var vk2=(()=>{var ivt=Object.create;var FI=Object.defineProperty,avt=Object.defineProperties,svt=Object.getOwnPropertyDescriptor,lvt=Object.getOwnPropertyDescriptors,uvt=Object.getOwnPropertyNames,WN=Object.getOwnPropertySymbols,cvt=Object.getPrototypeOf,SV=Object.prototype.hasOwnProperty,rhe=Object.prototype.propertyIsEnumerable;var lw=(e,t)=>(t=Symbol[e])?t:Symbol.for("Symbol."+e),TV=e=>{throw TypeError(e)},ag=Math.pow,EV=(e,t,r)=>t in e?FI(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r,Se=(e,t)=>{for(var r in t||(t={}))SV.call(t,r)&&EV(e,r,t[r]);if(WN)for(var r of WN(t))rhe.call(t,r)&&EV(e,r,t[r]);return e},Pt=(e,t)=>avt(e,lvt(t));var nhe=e=>typeof e=="symbol"?e:e+"",En=(e,t)=>{var r={};for(var n in e)SV.call(e,n)&&t.indexOf(n)<0&&(r[n]=e[n]);if(e!=null&&WN)for(var n of WN(e))t.indexOf(n)<0&&rhe.call(e,n)&&(r[n]=e[n]);return r};var pvt=(e,t)=>()=>(e&&(t=e(e=0)),t);var N=(e,t)=>()=>(t||e((t={exports:{}}).exports,t),t.exports),uw=(e,t)=>{for(var r in t)FI(e,r,{get:t[r],enumerable:!0})},ohe=(e,t,r,n)=>{if(t&&typeof t=="object"||typeof t=="function")for(let o of uvt(t))!SV.call(e,o)&&o!==r&&FI(e,o,{get:()=>t[o],enumerable:!(n=svt(t,o))||n.enumerable});return e};var Q=(e,t,r)=>(r=e!=null?ivt(cvt(e)):{},ohe(t||!e||!e.__esModule?FI(r,"default",{value:e,enumerable:!0}):r,e)),fvt=e=>ohe(FI({},"__esModule",{value:!0}),e);var St=(e,t,r)=>EV(e,typeof t!="symbol"?t+"":t,r),IV=(e,t,r)=>t.has(e)||TV("Cannot "+r);var qr=(e,t,r)=>(IV(e,t,"read from private field"),r?r.call(e):t.get(e)),Ga=(e,t,r)=>t.has(e)?TV("Cannot add the same private member more than once"):t instanceof WeakSet?t.add(e):t.set(e,r),Ha=(e,t,r,n)=>(IV(e,t,"write to private field"),n?n.call(e,r):t.set(e,r),r),pa=(e,t,r)=>(IV(e,t,"access private method"),r);var vt=(e,t,r)=>new Promise((n,o)=>{var i=h=>{try{c(r.next(h))}catch(m){o(m)}},a=h=>{try{c(r.throw(h))}catch(m){o(m)}},c=h=>h.done?n(h.value):Promise.resolve(h.value).then(i,a);c((r=r.apply(e,t)).next())}),$1=function(e,t){this[0]=e,this[1]=t},MV=(e,t,r)=>{var n=(a,c,h,m)=>{try{var y=r[a](c),w=(c=y.value)instanceof $1,E=y.done;Promise.resolve(w?c[0]:c).then(A=>w?n(a==="return"?a:"next",c[1]?{done:A.done,value:A.value}:A,h,m):h({value:A,done:E})).catch(A=>n("throw",A,h,m))}catch(A){m(A)}},o=a=>i[a]=c=>new Promise((h,m)=>n(a,c,h,m)),i={};return r=r.apply(e,t),i[lw("asyncIterator")]=()=>i,o("next"),o("throw"),o("return"),i},CV=e=>{var t=e[lw("asyncIterator")],r=!1,n,o={};return t==null?(t=e[lw("iterator")](),n=i=>o[i]=a=>t[i](a)):(t=t.call(e),n=i=>o[i]=a=>{if(r){if(r=!1,i==="throw")throw a;return a}return r=!0,{done:!1,value:new $1(new Promise(c=>{var h=t[i](a);h instanceof Object||TV("Object expected"),c(h)}),1)}}),o[lw("iterator")]=()=>o,n("next"),"throw"in t?n("throw"):o.throw=i=>{throw i},"return"in t&&n("return"),o},ihe=(e,t,r)=>(t=e[lw("asyncIterator")])?t.call(e):(e=e[lw("iterator")](),t={},r=(n,o)=>(o=e[n])&&(t[n]=i=>new Promise((a,c,h)=>(i=o.call(e,i),h=i.done,Promise.resolve(i.value).then(m=>a({value:m,done:h}),c)))),r("next"),r("return"),t);var _,u=pvt(()=>{_={env:{}}});var $N=N((pFr,she)=>{"use strict";u();var ahe=Object.getOwnPropertySymbols,hvt=Object.prototype.hasOwnProperty,mvt=Object.prototype.propertyIsEnumerable;function gvt(e){if(e==null)throw new TypeError("Object.assign cannot be called with null or undefined");return Object(e)}function vvt(){try{if(!Object.assign)return!1;var e=new String("abc");if(e[5]="de",Object.getOwnPropertyNames(e)[0]==="5")return!1;for(var t={},r=0;r<10;r++)t["_"+String.fromCharCode(r)]=r;var n=Object.getOwnPropertyNames(t).map(function(i){return t[i]});if(n.join("")!=="0123456789")return!1;var o={};return"abcdefghijklmnopqrst".split("").forEach(function(i){o[i]=i}),Object.keys(Object.assign({},o)).join("")==="abcdefghijklmnopqrst"}catch(i){return!1}}she.exports=vvt()?Object.assign:function(e,t){for(var r,n=gvt(e),o,i=1;i<arguments.length;i++){r=Object(arguments[i]);for(var a in r)hvt.call(r,a)&&(n[a]=r[a]);if(ahe){o=ahe(r);for(var c=0;c<o.length;c++)mvt.call(r,o[c])&&(n[o[c]]=r[o[c]])}}return n}});var Ehe=N(Fo=>{"use strict";u();var OV=$N(),cw=60103,che=60106;Fo.Fragment=60107;Fo.StrictMode=60108;Fo.Profiler=60114;var phe=60109,fhe=60110,dhe=60112;Fo.Suspense=60113;var hhe=60115,mhe=60116;typeof Symbol=="function"&&Symbol.for&&(Up=Symbol.for,cw=Up("react.element"),che=Up("react.portal"),Fo.Fragment=Up("react.fragment"),Fo.StrictMode=Up("react.strict_mode"),Fo.Profiler=Up("react.profiler"),phe=Up("react.provider"),fhe=Up("react.context"),dhe=Up("react.forward_ref"),Fo.Suspense=Up("react.suspense"),hhe=Up("react.memo"),mhe=Up("react.lazy"));var Up,lhe=typeof Symbol=="function"&&Symbol.iterator;function yvt(e){return e===null||typeof e!="object"?null:(e=lhe&&e[lhe]||e["@@iterator"],typeof e=="function"?e:null)}function UI(e){for(var t="https://reactjs.org/docs/error-decoder.html?invariant="+e,r=1;r<arguments.length;r++)t+="&args[]="+encodeURIComponent(arguments[r]);return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var ghe={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},vhe={};function pw(e,t,r){this.props=e,this.context=t,this.refs=vhe,this.updater=r||ghe}pw.prototype.isReactComponent={};pw.prototype.setState=function(e,t){if(typeof e!="object"&&typeof e!="function"&&e!=null)throw Error(UI(85));this.updater.enqueueSetState(this,e,t,"setState")};pw.prototype.forceUpdate=function(e){this.updater.enqueueForceUpdate(this,e,"forceUpdate")};function yhe(){}yhe.prototype=pw.prototype;function PV(e,t,r){this.props=e,this.context=t,this.refs=vhe,this.updater=r||ghe}var DV=PV.prototype=new yhe;DV.constructor=PV;OV(DV,pw.prototype);DV.isPureReactComponent=!0;var NV={current:null},_he=Object.prototype.hasOwnProperty,bhe={key:!0,ref:!0,__self:!0,__source:!0};function xhe(e,t,r){var n,o={},i=null,a=null;if(t!=null)for(n in t.ref!==void 0&&(a=t.ref),t.key!==void 0&&(i=""+t.key),t)_he.call(t,n)&&!bhe.hasOwnProperty(n)&&(o[n]=t[n]);var c=arguments.length-2;if(c===1)o.children=r;else if(1<c){for(var h=Array(c),m=0;m<c;m++)h[m]=arguments[m+2];o.children=h}if(e&&e.defaultProps)for(n in c=e.defaultProps,c)o[n]===void 0&&(o[n]=c[n]);return{$$typeof:cw,type:e,key:i,ref:a,props:o,_owner:NV.current}}function _vt(e,t){return{$$typeof:cw,type:e.type,key:t,ref:e.ref,props:e.props,_owner:e._owner}}function LV(e){return typeof e=="object"&&e!==null&&e.$$typeof===cw}function bvt(e){var t={"=":"=0",":":"=2"};return"$"+e.replace(/[=:]/g,function(r){return t[r]})}var uhe=/\/+/g;function AV(e,t){return typeof e=="object"&&e!==null&&e.key!=null?bvt(""+e.key):t.toString(36)}function ZN(e,t,r,n,o){var i=typeof e;(i==="undefined"||i==="boolean")&&(e=null);var a=!1;if(e===null)a=!0;else switch(i){case"string":case"number":a=!0;break;case"object":switch(e.$$typeof){case cw:case che:a=!0}}if(a)return a=e,o=o(a),e=n===""?"."+AV(a,0):n,Array.isArray(o)?(r="",e!=null&&(r=e.replace(uhe,"$&/")+"/"),ZN(o,t,r,"",function(m){return m})):o!=null&&(LV(o)&&(o=_vt(o,r+(!o.key||a&&a.key===o.key?"":(""+o.key).replace(uhe,"$&/")+"/")+e)),t.push(o)),1;if(a=0,n=n===""?".":n+":",Array.isArray(e))for(var c=0;c<e.length;c++){i=e[c];var h=n+AV(i,c);a+=ZN(i,t,r,h,o)}else if(h=yvt(e),typeof h=="function")for(e=h.call(e),c=0;!(i=e.next()).done;)i=i.value,h=n+AV(i,c++),a+=ZN(i,t,r,h,o);else if(i==="object")throw t=""+e,Error(UI(31,t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t));return a}function YN(e,t,r){if(e==null)return e;var n=[],o=0;return ZN(e,n,"","",function(i){return t.call(r,i,o++)}),n}function xvt(e){if(e._status===-1){var t=e._result;t=t(),e._status=0,e._result=t,t.then(function(r){e._status===0&&(r=r.default,e._status=1,e._result=r)},function(r){e._status===0&&(e._status=2,e._result=r)})}if(e._status===1)return e._result;throw e._result}var whe={current:null};function sg(){var e=whe.current;if(e===null)throw Error(UI(321));return e}var wvt={ReactCurrentDispatcher:whe,ReactCurrentBatchConfig:{transition:0},ReactCurrentOwner:NV,IsSomeRendererActing:{current:!1},assign:OV};Fo.Children={map:YN,forEach:function(e,t,r){YN(e,function(){t.apply(this,arguments)},r)},count:function(e){var t=0;return YN(e,function(){t++}),t},toArray:function(e){return YN(e,function(t){return t})||[]},only:function(e){if(!LV(e))throw Error(UI(143));return e}};Fo.Component=pw;Fo.PureComponent=PV;Fo.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=wvt;Fo.cloneElement=function(e,t,r){if(e==null)throw Error(UI(267,e));var n=OV({},e.props),o=e.key,i=e.ref,a=e._owner;if(t!=null){if(t.ref!==void 0&&(i=t.ref,a=NV.current),t.key!==void 0&&(o=""+t.key),e.type&&e.type.defaultProps)var c=e.type.defaultProps;for(h in t)_he.call(t,h)&&!bhe.hasOwnProperty(h)&&(n[h]=t[h]===void 0&&c!==void 0?c[h]:t[h])}var h=arguments.length-2;if(h===1)n.children=r;else if(1<h){c=Array(h);for(var m=0;m<h;m++)c[m]=arguments[m+2];n.children=c}return{$$typeof:cw,type:e.type,key:o,ref:i,props:n,_owner:a}};Fo.createContext=function(e,t){return t===void 0&&(t=null),e={$$typeof:fhe,_calculateChangedBits:t,_currentValue:e,_currentValue2:e,_threadCount:0,Provider:null,Consumer:null},e.Provider={$$typeof:phe,_context:e},e.Consumer=e};Fo.createElement=xhe;Fo.createFactory=function(e){var t=xhe.bind(null,e);return t.type=e,t};Fo.createRef=function(){return{current:null}};Fo.forwardRef=function(e){return{$$typeof:dhe,render:e}};Fo.isValidElement=LV;Fo.lazy=function(e){return{$$typeof:mhe,_payload:{_status:-1,_result:e},_init:xvt}};Fo.memo=function(e,t){return{$$typeof:hhe,type:e,compare:t===void 0?null:t}};Fo.useCallback=function(e,t){return sg().useCallback(e,t)};Fo.useContext=function(e,t){return sg().useContext(e,t)};Fo.useDebugValue=function(){};Fo.useEffect=function(e,t){return sg().useEffect(e,t)};Fo.useImperativeHandle=function(e,t,r){return sg().useImperativeHandle(e,t,r)};Fo.useLayoutEffect=function(e,t){return sg().useLayoutEffect(e,t)};Fo.useMemo=function(e,t){return sg().useMemo(e,t)};Fo.useReducer=function(e,t,r){return sg().useReducer(e,t,r)};Fo.useRef=function(e){return sg().useRef(e)};Fo.useState=function(e){return sg().useState(e)};Fo.version="17.0.2"});var De=N((mFr,She)=>{"use strict";u();She.exports=Ehe()});var Ohe=N(oi=>{"use strict";u();var dw,GI,QN,UV;typeof performance=="object"&&typeof performance.now=="function"?(The=performance,oi.unstable_now=function(){return The.now()}):(kV=Date,Ihe=kV.now(),oi.unstable_now=function(){return kV.now()-Ihe});var The,kV,Ihe;typeof window=="undefined"||typeof MessageChannel!="function"?(fw=null,RV=null,jV=function(){if(fw!==null)try{var e=oi.unstable_now();fw(!0,e),fw=null}catch(t){throw setTimeout(jV,0),t}},dw=function(e){fw!==null?setTimeout(dw,0,e):(fw=e,setTimeout(jV,0))},GI=function(e,t){RV=setTimeout(e,t)},QN=function(){clearTimeout(RV)},oi.unstable_shouldYield=function(){return!1},UV=oi.unstable_forceFrameRate=function(){}):(Mhe=window.setTimeout,Che=window.clearTimeout,typeof console!="undefined"&&(Ahe=window.cancelAnimationFrame,typeof window.requestAnimationFrame!="function"&&console.error("This browser doesn't support requestAnimationFrame. Make sure that you load a polyfill in older browsers. https://reactjs.org/link/react-polyfills"),typeof Ahe!="function"&&console.error("This browser doesn't support cancelAnimationFrame. Make sure that you load a polyfill in older browsers. https://reactjs.org/link/react-polyfills")),BI=!1,VI=null,KN=-1,qV=5,zV=0,oi.unstable_shouldYield=function(){return oi.unstable_now()>=zV},UV=function(){},oi.unstable_forceFrameRate=function(e){0>e||125<e?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):qV=0<e?Math.floor(1e3/e):5},FV=new MessageChannel,XN=FV.port2,FV.port1.onmessage=function(){if(VI!==null){var e=oi.unstable_now();zV=e+qV;try{VI(!0,e)?XN.postMessage(null):(BI=!1,VI=null)}catch(t){throw XN.postMessage(null),t}}else BI=!1},dw=function(e){VI=e,BI||(BI=!0,XN.postMessage(null))},GI=function(e,t){KN=Mhe(function(){e(oi.unstable_now())},t)},QN=function(){Che(KN),KN=-1});var fw,RV,jV,Mhe,Che,Ahe,BI,VI,KN,qV,zV,FV,XN;function BV(e,t){var r=e.length;e.push(t);e:for(;;){var n=r-1>>>1,o=e[n];if(o!==void 0&&0<JN(o,t))e[n]=t,e[r]=o,r=n;else break e}}function ud(e){return e=e[0],e===void 0?null:e}function e5(e){var t=e[0];if(t!==void 0){var r=e.pop();if(r!==t){e[0]=r;e:for(var n=0,o=e.length;n<o;){var i=2*(n+1)-1,a=e[i],c=i+1,h=e[c];if(a!==void 0&&0>JN(a,r))h!==void 0&&0>JN(h,a)?(e[n]=h,e[c]=r,n=c):(e[n]=a,e[i]=r,n=i);else if(h!==void 0&&0>JN(h,r))e[n]=h,e[c]=r,n=c;else break e}}return t}return null}function JN(e,t){var r=e.sortIndex-t.sortIndex;return r!==0?r:e.id-t.id}var Eh=[],Wv=[],Evt=1,Bp=null,tu=3,t5=!1,Y1=!1,HI=!1;function VV(e){for(var t=ud(Wv);t!==null;){if(t.callback===null)e5(Wv);else if(t.startTime<=e)e5(Wv),t.sortIndex=t.expirationTime,BV(Eh,t);else break;t=ud(Wv)}}function GV(e){if(HI=!1,VV(e),!Y1)if(ud(Eh)!==null)Y1=!0,dw(HV);else{var t=ud(Wv);t!==null&&GI(GV,t.startTime-e)}}function HV(e,t){Y1=!1,HI&&(HI=!1,QN()),t5=!0;var r=tu;try{for(VV(t),Bp=ud(Eh);Bp!==null&&(!(Bp.expirationTime>t)||e&&!oi.unstable_shouldYield());){var n=Bp.callback;if(typeof n=="function"){Bp.callback=null,tu=Bp.priorityLevel;var o=n(Bp.expirationTime<=t);t=oi.unstable_now(),typeof o=="function"?Bp.callback=o:Bp===ud(Eh)&&e5(Eh),VV(t)}else e5(Eh);Bp=ud(Eh)}if(Bp!==null)var i=!0;else{var a=ud(Wv);a!==null&&GI(GV,a.startTime-t),i=!1}return i}finally{Bp=null,tu=r,t5=!1}}var Svt=UV;oi.unstable_IdlePriority=5;oi.unstable_ImmediatePriority=1;oi.unstable_LowPriority=4;oi.unstable_NormalPriority=3;oi.unstable_Profiling=null;oi.unstable_UserBlockingPriority=2;oi.unstable_cancelCallback=function(e){e.callback=null};oi.unstable_continueExecution=function(){Y1||t5||(Y1=!0,dw(HV))};oi.unstable_getCurrentPriorityLevel=function(){return tu};oi.unstable_getFirstCallbackNode=function(){return ud(Eh)};oi.unstable_next=function(e){switch(tu){case 1:case 2:case 3:var t=3;break;default:t=tu}var r=tu;tu=t;try{return e()}finally{tu=r}};oi.unstable_pauseExecution=function(){};oi.unstable_requestPaint=Svt;oi.unstable_runWithPriority=function(e,t){switch(e){case 1:case 2:case 3:case 4:case 5:break;default:e=3}var r=tu;tu=e;try{return t()}finally{tu=r}};oi.unstable_scheduleCallback=function(e,t,r){var n=oi.unstable_now();switch(typeof r=="object"&&r!==null?(r=r.delay,r=typeof r=="number"&&0<r?n+r:n):r=n,e){case 1:var o=-1;break;case 2:o=250;break;case 5:o=1073741823;break;case 4:o=1e4;break;default:o=5e3}return o=r+o,e={id:Evt++,callback:t,priorityLevel:e,startTime:r,expirationTime:o,sortIndex:-1},r>n?(e.sortIndex=r,BV(Wv,e),ud(Eh)===null&&e===ud(Wv)&&(HI?QN():HI=!0,GI(GV,r-n))):(e.sortIndex=o,BV(Eh,e),Y1||t5||(Y1=!0,dw(HV))),e};oi.unstable_wrapCallback=function(e){var t=tu;return function(){var r=tu;tu=t;try{return e.apply(this,arguments)}finally{tu=r}}}});var Dhe=N((_Fr,Phe)=>{"use strict";u();Phe.exports=Ohe()});var yve=N(Yp=>{"use strict";u();var Y5=De(),fa=$N(),Ys=Dhe();function ur(e){for(var t="https://reactjs.org/docs/error-decoder.html?invariant="+e,r=1;r<arguments.length;r++)t+="&args[]="+encodeURIComponent(arguments[r]);return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}if(!Y5)throw Error(ur(227));var Hme=new Set,xM={};function i_(e,t){Lw(e,t),Lw(e+"Capture",t)}function Lw(e,t){for(xM[e]=t,e=0;e<t.length;e++)Hme.add(t[e])}var dg=!(typeof window=="undefined"||typeof window.document=="undefined"||typeof window.document.createElement=="undefined"),Tvt=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,Nhe=Object.prototype.hasOwnProperty,Lhe={},khe={};function Ivt(e){return Nhe.call(khe,e)?!0:Nhe.call(Lhe,e)?!1:Tvt.test(e)?khe[e]=!0:(Lhe[e]=!0,!1)}function Mvt(e,t,r,n){if(r!==null&&r.type===0)return!1;switch(typeof t){case"function":case"symbol":return!0;case"boolean":return n?!1:r!==null?!r.acceptsBooleans:(e=e.toLowerCase().slice(0,5),e!=="data-"&&e!=="aria-");default:return!1}}function Cvt(e,t,r,n){if(t===null||typeof t=="undefined"||Mvt(e,t,r,n))return!0;if(n)return!1;if(r!==null)switch(r.type){case 3:return!t;case 4:return t===!1;case 5:return isNaN(t);case 6:return isNaN(t)||1>t}return!1}function Nu(e,t,r,n,o,i,a){this.acceptsBooleans=t===2||t===3||t===4,this.attributeName=n,this.attributeNamespace=o,this.mustUseProperty=r,this.propertyName=e,this.type=t,this.sanitizeURL=i,this.removeEmptyString=a}var xl={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(e){xl[e]=new Nu(e,0,!1,e,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(e){var t=e[0];xl[t]=new Nu(t,1,!1,e[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(e){xl[e]=new Nu(e,2,!1,e.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(e){xl[e]=new Nu(e,2,!1,e,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(e){xl[e]=new Nu(e,3,!1,e.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(e){xl[e]=new Nu(e,3,!0,e,null,!1,!1)});["capture","download"].forEach(function(e){xl[e]=new Nu(e,4,!1,e,null,!1,!1)});["cols","rows","size","span"].forEach(function(e){xl[e]=new Nu(e,6,!1,e,null,!1,!1)});["rowSpan","start"].forEach(function(e){xl[e]=new Nu(e,5,!1,e.toLowerCase(),null,!1,!1)});var eH=/[\-:]([a-z])/g;function tH(e){return e[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(e){var t=e.replace(eH,tH);xl[t]=new Nu(t,1,!1,e,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(e){var t=e.replace(eH,tH);xl[t]=new Nu(t,1,!1,e,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(e){var t=e.replace(eH,tH);xl[t]=new Nu(t,1,!1,e,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(e){xl[e]=new Nu(e,1,!1,e.toLowerCase(),null,!1,!1)});xl.xlinkHref=new Nu("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(e){xl[e]=new Nu(e,1,!1,e.toLowerCase(),null,!0,!0)});function rH(e,t,r,n){var o=xl.hasOwnProperty(t)?xl[t]:null,i=o!==null?o.type===0:n?!1:!(!(2<t.length)||t[0]!=="o"&&t[0]!=="O"||t[1]!=="n"&&t[1]!=="N");i||(Cvt(t,r,o,n)&&(r=null),n||o===null?Ivt(t)&&(r===null?e.removeAttribute(t):e.setAttribute(t,""+r)):o.mustUseProperty?e[o.propertyName]=r===null?o.type===3?!1:"":r:(t=o.attributeName,n=o.attributeNamespace,r===null?e.removeAttribute(t):(o=o.type,r=o===3||o===4&&r===!0?"":""+r,n?e.setAttributeNS(n,t,r):e.setAttribute(t,r))))}var a_=Y5.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,oM=60103,K1=60106,Yv=60107,nH=60108,uM=60114,oH=60109,iH=60110,Z5=60112,cM=60113,T5=60120,K5=60115,aH=60116,sH=60121,lH=60128,Wme=60129,uH=60130,hG=60131;typeof Symbol=="function"&&Symbol.for&&(Ds=Symbol.for,oM=Ds("react.element"),K1=Ds("react.portal"),Yv=Ds("react.fragment"),nH=Ds("react.strict_mode"),uM=Ds("react.profiler"),oH=Ds("react.provider"),iH=Ds("react.context"),Z5=Ds("react.forward_ref"),cM=Ds("react.suspense"),T5=Ds("react.suspense_list"),K5=Ds("react.memo"),aH=Ds("react.lazy"),sH=Ds("react.block"),Ds("react.scope"),lH=Ds("react.opaque.id"),Wme=Ds("react.debug_trace_mode"),uH=Ds("react.offscreen"),hG=Ds("react.legacy_hidden"));var Ds,Rhe=typeof Symbol=="function"&&Symbol.iterator;function WI(e){return e===null||typeof e!="object"?null:(e=Rhe&&e[Rhe]||e["@@iterator"],typeof e=="function"?e:null)}var WV;function iM(e){if(WV===void 0)try{throw Error()}catch(r){var t=r.stack.trim().match(/\n( *(at )?)/);WV=t&&t[1]||""}return`
`+WV+e}var $V=!1;function r5(e,t){if(!e||$V)return"";$V=!0;var r=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(t){if(t=function(){throw Error()},Object.defineProperty(t.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(t,[])}catch(h){var n=h}Reflect.construct(e,[],t)}else{try{t.call()}catch(h){n=h}e.call(t.prototype)}}else{try{throw Error()}catch(h){n=h}e()}}catch(h){if(h&&n&&typeof h.stack=="string"){for(var o=h.stack.split(`
`),i=n.stack.split(`
`),a=o.length-1,c=i.length-1;1<=a&&0<=c&&o[a]!==i[c];)c--;for(;1<=a&&0<=c;a--,c--)if(o[a]!==i[c]){if(a!==1||c!==1)do if(a--,c--,0>c||o[a]!==i[c])return`
`+o[a].replace(" at new "," at ");while(1<=a&&0<=c);break}}}finally{$V=!1,Error.prepareStackTrace=r}return(e=e?e.displayName||e.name:"")?iM(e):""}function Avt(e){switch(e.tag){case 5:return iM(e.type);case 16:return iM("Lazy");case 13:return iM("Suspense");case 19:return iM("SuspenseList");case 0:case 2:case 15:return e=r5(e.type,!1),e;case 11:return e=r5(e.type.render,!1),e;case 22:return e=r5(e.type._render,!1),e;case 1:return e=r5(e.type,!0),e;default:return""}}function Sw(e){if(e==null)return null;if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e;switch(e){case Yv:return"Fragment";case K1:return"Portal";case uM:return"Profiler";case nH:return"StrictMode";case cM:return"Suspense";case T5:return"SuspenseList"}if(typeof e=="object")switch(e.$$typeof){case iH:return(e.displayName||"Context")+".Consumer";case oH:return(e._context.displayName||"Context")+".Provider";case Z5:var t=e.render;return t=t.displayName||t.name||"",e.displayName||(t!==""?"ForwardRef("+t+")":"ForwardRef");case K5:return Sw(e.type);case sH:return Sw(e._render);case aH:t=e._payload,e=e._init;try{return Sw(e(t))}catch(r){}}return null}function ay(e){switch(typeof e){case"boolean":case"number":case"object":case"string":case"undefined":return e;default:return""}}function $me(e){var t=e.type;return(e=e.nodeName)&&e.toLowerCase()==="input"&&(t==="checkbox"||t==="radio")}function Ovt(e){var t=$me(e)?"checked":"value",r=Object.getOwnPropertyDescriptor(e.constructor.prototype,t),n=""+e[t];if(!e.hasOwnProperty(t)&&typeof r!="undefined"&&typeof r.get=="function"&&typeof r.set=="function"){var o=r.get,i=r.set;return Object.defineProperty(e,t,{configurable:!0,get:function(){return o.call(this)},set:function(a){n=""+a,i.call(this,a)}}),Object.defineProperty(e,t,{enumerable:r.enumerable}),{getValue:function(){return n},setValue:function(a){n=""+a},stopTracking:function(){e._valueTracker=null,delete e[t]}}}}function n5(e){e._valueTracker||(e._valueTracker=Ovt(e))}function Yme(e){if(!e)return!1;var t=e._valueTracker;if(!t)return!0;var r=t.getValue(),n="";return e&&(n=$me(e)?e.checked?"true":"false":e.value),e=n,e!==r?(t.setValue(e),!0):!1}function I5(e){if(e=e||(typeof document!="undefined"?document:void 0),typeof e=="undefined")return null;try{return e.activeElement||e.body}catch(t){return e.body}}function mG(e,t){var r=t.checked;return fa({},t,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:r!=null?r:e._wrapperState.initialChecked})}function jhe(e,t){var r=t.defaultValue==null?"":t.defaultValue,n=t.checked!=null?t.checked:t.defaultChecked;r=ay(t.value!=null?t.value:r),e._wrapperState={initialChecked:n,initialValue:r,controlled:t.type==="checkbox"||t.type==="radio"?t.checked!=null:t.value!=null}}function Zme(e,t){t=t.checked,t!=null&&rH(e,"checked",t,!1)}function gG(e,t){Zme(e,t);var r=ay(t.value),n=t.type;if(r!=null)n==="number"?(r===0&&e.value===""||e.value!=r)&&(e.value=""+r):e.value!==""+r&&(e.value=""+r);else if(n==="submit"||n==="reset"){e.removeAttribute("value");return}t.hasOwnProperty("value")?vG(e,t.type,r):t.hasOwnProperty("defaultValue")&&vG(e,t.type,ay(t.defaultValue)),t.checked==null&&t.defaultChecked!=null&&(e.defaultChecked=!!t.defaultChecked)}function qhe(e,t,r){if(t.hasOwnProperty("value")||t.hasOwnProperty("defaultValue")){var n=t.type;if(!(n!=="submit"&&n!=="reset"||t.value!==void 0&&t.value!==null))return;t=""+e._wrapperState.initialValue,r||t===e.value||(e.value=t),e.defaultValue=t}r=e.name,r!==""&&(e.name=""),e.defaultChecked=!!e._wrapperState.initialChecked,r!==""&&(e.name=r)}function vG(e,t,r){(t!=="number"||I5(e.ownerDocument)!==e)&&(r==null?e.defaultValue=""+e._wrapperState.initialValue:e.defaultValue!==""+r&&(e.defaultValue=""+r))}function Pvt(e){var t="";return Y5.Children.forEach(e,function(r){r!=null&&(t+=r)}),t}function yG(e,t){return e=fa({children:void 0},t),(t=Pvt(t.children))&&(e.children=t),e}function Tw(e,t,r,n){if(e=e.options,t){t={};for(var o=0;o<r.length;o++)t["$"+r[o]]=!0;for(r=0;r<e.length;r++)o=t.hasOwnProperty("$"+e[r].value),e[r].selected!==o&&(e[r].selected=o),o&&n&&(e[r].defaultSelected=!0)}else{for(r=""+ay(r),t=null,o=0;o<e.length;o++){if(e[o].value===r){e[o].selected=!0,n&&(e[o].defaultSelected=!0);return}t!==null||e[o].disabled||(t=e[o])}t!==null&&(t.selected=!0)}}function _G(e,t){if(t.dangerouslySetInnerHTML!=null)throw Error(ur(91));return fa({},t,{value:void 0,defaultValue:void 0,children:""+e._wrapperState.initialValue})}function zhe(e,t){var r=t.value;if(r==null){if(r=t.children,t=t.defaultValue,r!=null){if(t!=null)throw Error(ur(92));if(Array.isArray(r)){if(!(1>=r.length))throw Error(ur(93));r=r[0]}t=r}t==null&&(t=""),r=t}e._wrapperState={initialValue:ay(r)}}function Kme(e,t){var r=ay(t.value),n=ay(t.defaultValue);r!=null&&(r=""+r,r!==e.value&&(e.value=r),t.defaultValue==null&&e.defaultValue!==r&&(e.defaultValue=r)),n!=null&&(e.defaultValue=""+n)}function Fhe(e){var t=e.textContent;t===e._wrapperState.initialValue&&t!==""&&t!==null&&(e.value=t)}var bG={html:"http://www.w3.org/1999/xhtml",mathml:"http://www.w3.org/1998/Math/MathML",svg:"http://www.w3.org/2000/svg"};function Xme(e){switch(e){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function xG(e,t){return e==null||e==="http://www.w3.org/1999/xhtml"?Xme(t):e==="http://www.w3.org/2000/svg"&&t==="foreignObject"?"http://www.w3.org/1999/xhtml":e}var o5,Jme=function(e){return typeof MSApp!="undefined"&&MSApp.execUnsafeLocalFunction?function(t,r,n,o){MSApp.execUnsafeLocalFunction(function(){return e(t,r,n,o)})}:e}(function(e,t){if(e.namespaceURI!==bG.svg||"innerHTML"in e)e.innerHTML=t;else{for(o5=o5||document.createElement("div"),o5.innerHTML="<svg>"+t.valueOf().toString()+"</svg>",t=o5.firstChild;e.firstChild;)e.removeChild(e.firstChild);for(;t.firstChild;)e.appendChild(t.firstChild)}});function wM(e,t){if(t){var r=e.firstChild;if(r&&r===e.lastChild&&r.nodeType===3){r.nodeValue=t;return}}e.textContent=t}var pM={animationIterationCount:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},Dvt=["Webkit","ms","Moz","O"];Object.keys(pM).forEach(function(e){Dvt.forEach(function(t){t=t+e.charAt(0).toUpperCase()+e.substring(1),pM[t]=pM[e]})});function Qme(e,t,r){return t==null||typeof t=="boolean"||t===""?"":r||typeof t!="number"||t===0||pM.hasOwnProperty(e)&&pM[e]?(""+t).trim():t+"px"}function ege(e,t){e=e.style;for(var r in t)if(t.hasOwnProperty(r)){var n=r.indexOf("--")===0,o=Qme(r,t[r],n);r==="float"&&(r="cssFloat"),n?e.setProperty(r,o):e[r]=o}}var Nvt=fa({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function wG(e,t){if(t){if(Nvt[e]&&(t.children!=null||t.dangerouslySetInnerHTML!=null))throw Error(ur(137,e));if(t.dangerouslySetInnerHTML!=null){if(t.children!=null)throw Error(ur(60));if(!(typeof t.dangerouslySetInnerHTML=="object"&&"__html"in t.dangerouslySetInnerHTML))throw Error(ur(61))}if(t.style!=null&&typeof t.style!="object")throw Error(ur(62))}}function EG(e,t){if(e.indexOf("-")===-1)return typeof t.is=="string";switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}function cH(e){return e=e.target||e.srcElement||window,e.correspondingUseElement&&(e=e.correspondingUseElement),e.nodeType===3?e.parentNode:e}var SG=null,Iw=null,Mw=null;function Uhe(e){if(e=RM(e)){if(typeof SG!="function")throw Error(ur(280));var t=e.stateNode;t&&(t=rL(t),SG(e.stateNode,e.type,t))}}function tge(e){Iw?Mw?Mw.push(e):Mw=[e]:Iw=e}function rge(){if(Iw){var e=Iw,t=Mw;if(Mw=Iw=null,Uhe(e),t)for(e=0;e<t.length;e++)Uhe(t[e])}}function pH(e,t){return e(t)}function nge(e,t,r,n,o){return e(t,r,n,o)}function fH(){}var oge=pH,X1=!1,YV=!1;function dH(){(Iw!==null||Mw!==null)&&(fH(),rge())}function Lvt(e,t,r){if(YV)return e(t,r);YV=!0;try{return oge(e,t,r)}finally{YV=!1,dH()}}function EM(e,t){var r=e.stateNode;if(r===null)return null;var n=rL(r);if(n===null)return null;r=n[t];e:switch(t){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(n=!n.disabled)||(e=e.type,n=!(e==="button"||e==="input"||e==="select"||e==="textarea")),e=!n;break e;default:e=!1}if(e)return null;if(r&&typeof r!="function")throw Error(ur(231,t,typeof r));return r}var TG=!1;if(dg)try{hw={},Object.defineProperty(hw,"passive",{get:function(){TG=!0}}),window.addEventListener("test",hw,hw),window.removeEventListener("test",hw,hw)}catch(e){TG=!1}var hw;function kvt(e,t,r,n,o,i,a,c,h){var m=Array.prototype.slice.call(arguments,3);try{t.apply(r,m)}catch(y){this.onError(y)}}var fM=!1,M5=null,C5=!1,IG=null,Rvt={onError:function(e){fM=!0,M5=e}};function jvt(e,t,r,n,o,i,a,c,h){fM=!1,M5=null,kvt.apply(Rvt,arguments)}function qvt(e,t,r,n,o,i,a,c,h){if(jvt.apply(this,arguments),fM){if(fM){var m=M5;fM=!1,M5=null}else throw Error(ur(198));C5||(C5=!0,IG=m)}}function s_(e){var t=e,r=e;if(e.alternate)for(;t.return;)t=t.return;else{e=t;do t=e,(t.flags&1026)!==0&&(r=t.return),e=t.return;while(e)}return t.tag===3?r:null}function ige(e){if(e.tag===13){var t=e.memoizedState;if(t===null&&(e=e.alternate,e!==null&&(t=e.memoizedState)),t!==null)return t.dehydrated}return null}function Bhe(e){if(s_(e)!==e)throw Error(ur(188))}function zvt(e){var t=e.alternate;if(!t){if(t=s_(e),t===null)throw Error(ur(188));return t!==e?null:e}for(var r=e,n=t;;){var o=r.return;if(o===null)break;var i=o.alternate;if(i===null){if(n=o.return,n!==null){r=n;continue}break}if(o.child===i.child){for(i=o.child;i;){if(i===r)return Bhe(o),e;if(i===n)return Bhe(o),t;i=i.sibling}throw Error(ur(188))}if(r.return!==n.return)r=o,n=i;else{for(var a=!1,c=o.child;c;){if(c===r){a=!0,r=o,n=i;break}if(c===n){a=!0,n=o,r=i;break}c=c.sibling}if(!a){for(c=i.child;c;){if(c===r){a=!0,r=i,n=o;break}if(c===n){a=!0,n=i,r=o;break}c=c.sibling}if(!a)throw Error(ur(189))}}if(r.alternate!==n)throw Error(ur(190))}if(r.tag!==3)throw Error(ur(188));return r.stateNode.current===r?e:t}function age(e){if(e=zvt(e),!e)return null;for(var t=e;;){if(t.tag===5||t.tag===6)return t;if(t.child)t.child.return=t,t=t.child;else{if(t===e)break;for(;!t.sibling;){if(!t.return||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}}return null}function Vhe(e,t){for(var r=e.alternate;t!==null;){if(t===e||t===r)return!0;t=t.return}return!1}var sge,hH,lge,uge,MG=!1,Sh=[],Jv=null,Qv=null,ey=null,SM=new Map,TM=new Map,$I=[],Ghe="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function CG(e,t,r,n,o){return{blockedOn:e,domEventName:t,eventSystemFlags:r|16,nativeEvent:o,targetContainers:[n]}}function Hhe(e,t){switch(e){case"focusin":case"focusout":Jv=null;break;case"dragenter":case"dragleave":Qv=null;break;case"mouseover":case"mouseout":ey=null;break;case"pointerover":case"pointerout":SM.delete(t.pointerId);break;case"gotpointercapture":case"lostpointercapture":TM.delete(t.pointerId)}}function YI(e,t,r,n,o,i){return e===null||e.nativeEvent!==i?(e=CG(t,r,n,o,i),t!==null&&(t=RM(t),t!==null&&hH(t)),e):(e.eventSystemFlags|=n,t=e.targetContainers,o!==null&&t.indexOf(o)===-1&&t.push(o),e)}function Fvt(e,t,r,n,o){switch(t){case"focusin":return Jv=YI(Jv,e,t,r,n,o),!0;case"dragenter":return Qv=YI(Qv,e,t,r,n,o),!0;case"mouseover":return ey=YI(ey,e,t,r,n,o),!0;case"pointerover":var i=o.pointerId;return SM.set(i,YI(SM.get(i)||null,e,t,r,n,o)),!0;case"gotpointercapture":return i=o.pointerId,TM.set(i,YI(TM.get(i)||null,e,t,r,n,o)),!0}return!1}function Uvt(e){var t=J1(e.target);if(t!==null){var r=s_(t);if(r!==null){if(t=r.tag,t===13){if(t=ige(r),t!==null){e.blockedOn=t,uge(e.lanePriority,function(){Ys.unstable_runWithPriority(e.priority,function(){lge(r)})});return}}else if(t===3&&r.stateNode.hydrate){e.blockedOn=r.tag===3?r.stateNode.containerInfo:null;return}}}e.blockedOn=null}function m5(e){if(e.blockedOn!==null)return!1;for(var t=e.targetContainers;0<t.length;){var r=yH(e.domEventName,e.eventSystemFlags,t[0],e.nativeEvent);if(r!==null)return t=RM(r),t!==null&&hH(t),e.blockedOn=r,!1;t.shift()}return!0}function Whe(e,t,r){m5(e)&&r.delete(t)}function Bvt(){for(MG=!1;0<Sh.length;){var e=Sh[0];if(e.blockedOn!==null){e=RM(e.blockedOn),e!==null&&sge(e);break}for(var t=e.targetContainers;0<t.length;){var r=yH(e.domEventName,e.eventSystemFlags,t[0],e.nativeEvent);if(r!==null){e.blockedOn=r;break}t.shift()}e.blockedOn===null&&Sh.shift()}Jv!==null&&m5(Jv)&&(Jv=null),Qv!==null&&m5(Qv)&&(Qv=null),ey!==null&&m5(ey)&&(ey=null),SM.forEach(Whe),TM.forEach(Whe)}function ZI(e,t){e.blockedOn===t&&(e.blockedOn=null,MG||(MG=!0,Ys.unstable_scheduleCallback(Ys.unstable_NormalPriority,Bvt)))}function cge(e){function t(o){return ZI(o,e)}if(0<Sh.length){ZI(Sh[0],e);for(var r=1;r<Sh.length;r++){var n=Sh[r];n.blockedOn===e&&(n.blockedOn=null)}}for(Jv!==null&&ZI(Jv,e),Qv!==null&&ZI(Qv,e),ey!==null&&ZI(ey,e),SM.forEach(t),TM.forEach(t),r=0;r<$I.length;r++)n=$I[r],n.blockedOn===e&&(n.blockedOn=null);for(;0<$I.length&&(r=$I[0],r.blockedOn===null);)Uvt(r),r.blockedOn===null&&$I.shift()}function i5(e,t){var r={};return r[e.toLowerCase()]=t.toLowerCase(),r["Webkit"+e]="webkit"+t,r["Moz"+e]="moz"+t,r}var yw={animationend:i5("Animation","AnimationEnd"),animationiteration:i5("Animation","AnimationIteration"),animationstart:i5("Animation","AnimationStart"),transitionend:i5("Transition","TransitionEnd")},ZV={},pge={};dg&&(pge=document.createElement("div").style,"AnimationEvent"in window||(delete yw.animationend.animation,delete yw.animationiteration.animation,delete yw.animationstart.animation),"TransitionEvent"in window||delete yw.transitionend.transition);function X5(e){if(ZV[e])return ZV[e];if(!yw[e])return e;var t=yw[e],r;for(r in t)if(t.hasOwnProperty(r)&&r in pge)return ZV[e]=t[r];return e}var fge=X5("animationend"),dge=X5("animationiteration"),hge=X5("animationstart"),mge=X5("transitionend"),gge=new Map,mH=new Map,Vvt=["abort","abort",fge,"animationEnd",dge,"animationIteration",hge,"animationStart","canplay","canPlay","canplaythrough","canPlayThrough","durationchange","durationChange","emptied","emptied","encrypted","encrypted","ended","ended","error","error","gotpointercapture","gotPointerCapture","load","load","loadeddata","loadedData","loadedmetadata","loadedMetadata","loadstart","loadStart","lostpointercapture","lostPointerCapture","playing","playing","progress","progress","seeking","seeking","stalled","stalled","suspend","suspend","timeupdate","timeUpdate",mge,"transitionEnd","waiting","waiting"];function gH(e,t){for(var r=0;r<e.length;r+=2){var n=e[r],o=e[r+1];o="on"+(o[0].toUpperCase()+o.slice(1)),mH.set(n,t),gge.set(n,o),i_(o,[n])}}var Gvt=Ys.unstable_now;Gvt();var Fi=8;function gw(e){if((1&e)!==0)return Fi=15,1;if((2&e)!==0)return Fi=14,2;if((4&e)!==0)return Fi=13,4;var t=24&e;return t!==0?(Fi=12,t):(e&32)!==0?(Fi=11,32):(t=192&e,t!==0?(Fi=10,t):(e&256)!==0?(Fi=9,256):(t=3584&e,t!==0?(Fi=8,t):(e&4096)!==0?(Fi=7,4096):(t=4186112&e,t!==0?(Fi=6,t):(t=62914560&e,t!==0?(Fi=5,t):e&67108864?(Fi=4,67108864):(e&134217728)!==0?(Fi=3,134217728):(t=805306368&e,t!==0?(Fi=2,t):(1073741824&e)!==0?(Fi=1,1073741824):(Fi=8,e))))))}function Hvt(e){switch(e){case 99:return 15;case 98:return 10;case 97:case 96:return 8;case 95:return 2;default:return 0}}function Wvt(e){switch(e){case 15:case 14:return 99;case 13:case 12:case 11:case 10:return 98;case 9:case 8:case 7:case 6:case 4:case 5:return 97;case 3:case 2:case 1:return 95;case 0:return 90;default:throw Error(ur(358,e))}}function IM(e,t){var r=e.pendingLanes;if(r===0)return Fi=0;var n=0,o=0,i=e.expiredLanes,a=e.suspendedLanes,c=e.pingedLanes;if(i!==0)n=i,o=Fi=15;else if(i=r&134217727,i!==0){var h=i&~a;h!==0?(n=gw(h),o=Fi):(c&=i,c!==0&&(n=gw(c),o=Fi))}else i=r&~a,i!==0?(n=gw(i),o=Fi):c!==0&&(n=gw(c),o=Fi);if(n===0)return 0;if(n=31-sy(n),n=r&((0>n?0:1<<n)<<1)-1,t!==0&&t!==n&&(t&a)===0){if(gw(t),o<=Fi)return t;Fi=o}if(t=e.entangledLanes,t!==0)for(e=e.entanglements,t&=n;0<t;)r=31-sy(t),o=1<<r,n|=e[r],t&=~o;return n}function vge(e){return e=e.pendingLanes&-1073741825,e!==0?e:e&1073741824?1073741824:0}function A5(e,t){switch(e){case 15:return 1;case 14:return 2;case 12:return e=vw(24&~t),e===0?A5(10,t):e;case 10:return e=vw(192&~t),e===0?A5(8,t):e;case 8:return e=vw(3584&~t),e===0&&(e=vw(4186112&~t),e===0&&(e=512)),e;case 2:return t=vw(805306368&~t),t===0&&(t=268435456),t}throw Error(ur(358,e))}function vw(e){return e&-e}function KV(e){for(var t=[],r=0;31>r;r++)t.push(e);return t}function J5(e,t,r){e.pendingLanes|=t;var n=t-1;e.suspendedLanes&=n,e.pingedLanes&=n,e=e.eventTimes,t=31-sy(t),e[t]=r}var sy=Math.clz32?Math.clz32:Zvt,$vt=Math.log,Yvt=Math.LN2;function Zvt(e){return e===0?32:31-($vt(e)/Yvt|0)|0}var Kvt=Ys.unstable_UserBlockingPriority,Xvt=Ys.unstable_runWithPriority,g5=!0;function Jvt(e,t,r,n){X1||fH();var o=vH,i=X1;X1=!0;try{nge(o,e,t,r,n)}finally{(X1=i)||dH()}}function Qvt(e,t,r,n){Xvt(Kvt,vH.bind(null,e,t,r,n))}function vH(e,t,r,n){if(g5){var o;if((o=(t&4)===0)&&0<Sh.length&&-1<Ghe.indexOf(e))e=CG(null,e,t,r,n),Sh.push(e);else{var i=yH(e,t,r,n);if(i===null)o&&Hhe(e,n);else{if(o){if(-1<Ghe.indexOf(e)){e=CG(i,e,t,r,n),Sh.push(e);return}if(Fvt(i,e,t,r,n))return;Hhe(e,n)}Oge(e,t,n,null,r)}}}}function yH(e,t,r,n){var o=cH(n);if(o=J1(o),o!==null){var i=s_(o);if(i===null)o=null;else{var a=i.tag;if(a===13){if(o=ige(i),o!==null)return o;o=null}else if(a===3){if(i.stateNode.hydrate)return i.tag===3?i.stateNode.containerInfo:null;o=null}else i!==o&&(o=null)}}return Oge(e,t,n,o,r),null}var Zv=null,_H=null,v5=null;function yge(){if(v5)return v5;var e,t=_H,r=t.length,n,o="value"in Zv?Zv.value:Zv.textContent,i=o.length;for(e=0;e<r&&t[e]===o[e];e++);var a=r-e;for(n=1;n<=a&&t[r-n]===o[i-n];n++);return v5=o.slice(e,1<n?1-n:void 0)}function y5(e){var t=e.keyCode;return"charCode"in e?(e=e.charCode,e===0&&t===13&&(e=13)):e=t,e===10&&(e=13),32<=e||e===13?e:0}function a5(){return!0}function $he(){return!1}function fp(e){function t(r,n,o,i,a){this._reactName=r,this._targetInst=o,this.type=n,this.nativeEvent=i,this.target=a,this.currentTarget=null;for(var c in e)e.hasOwnProperty(c)&&(r=e[c],this[c]=r?r(i):i[c]);return this.isDefaultPrevented=(i.defaultPrevented!=null?i.defaultPrevented:i.returnValue===!1)?a5:$he,this.isPropagationStopped=$he,this}return fa(t.prototype,{preventDefault:function(){this.defaultPrevented=!0;var r=this.nativeEvent;r&&(r.preventDefault?r.preventDefault():typeof r.returnValue!="unknown"&&(r.returnValue=!1),this.isDefaultPrevented=a5)},stopPropagation:function(){var r=this.nativeEvent;r&&(r.stopPropagation?r.stopPropagation():typeof r.cancelBubble!="unknown"&&(r.cancelBubble=!0),this.isPropagationStopped=a5)},persist:function(){},isPersistent:a5}),t}var qw={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},bH=fp(qw),kM=fa({},qw,{view:0,detail:0}),eyt=fp(kM),XV,JV,KI,Q5=fa({},kM,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:xH,button:0,buttons:0,relatedTarget:function(e){return e.relatedTarget===void 0?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==KI&&(KI&&e.type==="mousemove"?(XV=e.screenX-KI.screenX,JV=e.screenY-KI.screenY):JV=XV=0,KI=e),XV)},movementY:function(e){return"movementY"in e?e.movementY:JV}}),Yhe=fp(Q5),tyt=fa({},Q5,{dataTransfer:0}),ryt=fp(tyt),nyt=fa({},kM,{relatedTarget:0}),QV=fp(nyt),oyt=fa({},qw,{animationName:0,elapsedTime:0,pseudoElement:0}),iyt=fp(oyt),ayt=fa({},qw,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}}),syt=fp(ayt),lyt=fa({},qw,{data:0}),Zhe=fp(lyt),uyt={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},cyt={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},pyt={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function fyt(e){var t=this.nativeEvent;return t.getModifierState?t.getModifierState(e):(e=pyt[e])?!!t[e]:!1}function xH(){return fyt}var dyt=fa({},kM,{key:function(e){if(e.key){var t=uyt[e.key]||e.key;if(t!=="Unidentified")return t}return e.type==="keypress"?(e=y5(e),e===13?"Enter":String.fromCharCode(e)):e.type==="keydown"||e.type==="keyup"?cyt[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:xH,charCode:function(e){return e.type==="keypress"?y5(e):0},keyCode:function(e){return e.type==="keydown"||e.type==="keyup"?e.keyCode:0},which:function(e){return e.type==="keypress"?y5(e):e.type==="keydown"||e.type==="keyup"?e.keyCode:0}}),hyt=fp(dyt),myt=fa({},Q5,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),Khe=fp(myt),gyt=fa({},kM,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:xH}),vyt=fp(gyt),yyt=fa({},qw,{propertyName:0,elapsedTime:0,pseudoElement:0}),_yt=fp(yyt),byt=fa({},Q5,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0}),xyt=fp(byt),wyt=[9,13,27,32],wH=dg&&"CompositionEvent"in window,dM=null;dg&&"documentMode"in document&&(dM=document.documentMode);var Eyt=dg&&"TextEvent"in window&&!dM,_ge=dg&&(!wH||dM&&8<dM&&11>=dM),Xhe=" ",Jhe=!1;function bge(e,t){switch(e){case"keyup":return wyt.indexOf(t.keyCode)!==-1;case"keydown":return t.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function xge(e){return e=e.detail,typeof e=="object"&&"data"in e?e.data:null}var _w=!1;function Syt(e,t){switch(e){case"compositionend":return xge(t);case"keypress":return t.which!==32?null:(Jhe=!0,Xhe);case"textInput":return e=t.data,e===Xhe&&Jhe?null:e;default:return null}}function Tyt(e,t){if(_w)return e==="compositionend"||!wH&&bge(e,t)?(e=yge(),v5=_H=Zv=null,_w=!1,e):null;switch(e){case"paste":return null;case"keypress":if(!(t.ctrlKey||t.altKey||t.metaKey)||t.ctrlKey&&t.altKey){if(t.char&&1<t.char.length)return t.char;if(t.which)return String.fromCharCode(t.which)}return null;case"compositionend":return _ge&&t.locale!=="ko"?null:t.data;default:return null}}var Iyt={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Qhe(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t==="input"?!!Iyt[e.type]:t==="textarea"}function wge(e,t,r,n){tge(n),t=O5(t,"onChange"),0<t.length&&(r=new bH("onChange","change",null,r,n),e.push({event:r,listeners:t}))}var hM=null,MM=null;function Myt(e){Mge(e,0)}function eL(e){var t=xw(e);if(Yme(t))return e}function Cyt(e,t){if(e==="change")return t}var Ege=!1;dg&&(dg?(l5="oninput"in document,l5||(eG=document.createElement("div"),eG.setAttribute("oninput","return;"),l5=typeof eG.oninput=="function"),s5=l5):s5=!1,Ege=s5&&(!document.documentMode||9<document.documentMode));var s5,l5,eG;function eme(){hM&&(hM.detachEvent("onpropertychange",Sge),MM=hM=null)}function Sge(e){if(e.propertyName==="value"&&eL(MM)){var t=[];if(wge(t,MM,e,cH(e)),e=Myt,X1)e(t);else{X1=!0;try{pH(e,t)}finally{X1=!1,dH()}}}}function Ayt(e,t,r){e==="focusin"?(eme(),hM=t,MM=r,hM.attachEvent("onpropertychange",Sge)):e==="focusout"&&eme()}function Oyt(e){if(e==="selectionchange"||e==="keyup"||e==="keydown")return eL(MM)}function Pyt(e,t){if(e==="click")return eL(t)}function Dyt(e,t){if(e==="input"||e==="change")return eL(t)}function Nyt(e,t){return e===t&&(e!==0||1/e===1/t)||e!==e&&t!==t}var Vp=typeof Object.is=="function"?Object.is:Nyt,Lyt=Object.prototype.hasOwnProperty;function CM(e,t){if(Vp(e,t))return!0;if(typeof e!="object"||e===null||typeof t!="object"||t===null)return!1;var r=Object.keys(e),n=Object.keys(t);if(r.length!==n.length)return!1;for(n=0;n<r.length;n++)if(!Lyt.call(t,r[n])||!Vp(e[r[n]],t[r[n]]))return!1;return!0}function tme(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function rme(e,t){var r=tme(e);e=0;for(var n;r;){if(r.nodeType===3){if(n=e+r.textContent.length,e<=t&&n>=t)return{node:r,offset:t-e};e=n}e:{for(;r;){if(r.nextSibling){r=r.nextSibling;break e}r=r.parentNode}r=void 0}r=tme(r)}}function Tge(e,t){return e&&t?e===t?!0:e&&e.nodeType===3?!1:t&&t.nodeType===3?Tge(e,t.parentNode):"contains"in e?e.contains(t):e.compareDocumentPosition?!!(e.compareDocumentPosition(t)&16):!1:!1}function nme(){for(var e=window,t=I5();t instanceof e.HTMLIFrameElement;){try{var r=typeof t.contentWindow.location.href=="string"}catch(n){r=!1}if(r)e=t.contentWindow;else break;t=I5(e.document)}return t}function AG(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t&&(t==="input"&&(e.type==="text"||e.type==="search"||e.type==="tel"||e.type==="url"||e.type==="password")||t==="textarea"||e.contentEditable==="true")}var kyt=dg&&"documentMode"in document&&11>=document.documentMode,bw=null,OG=null,mM=null,PG=!1;function ome(e,t,r){var n=r.window===r?r.document:r.nodeType===9?r:r.ownerDocument;PG||bw==null||bw!==I5(n)||(n=bw,"selectionStart"in n&&AG(n)?n={start:n.selectionStart,end:n.selectionEnd}:(n=(n.ownerDocument&&n.ownerDocument.defaultView||window).getSelection(),n={anchorNode:n.anchorNode,anchorOffset:n.anchorOffset,focusNode:n.focusNode,focusOffset:n.focusOffset}),mM&&CM(mM,n)||(mM=n,n=O5(OG,"onSelect"),0<n.length&&(t=new bH("onSelect","select",null,t,r),e.push({event:t,listeners:n}),t.target=bw)))}gH("cancel cancel click click close close contextmenu contextMenu copy copy cut cut auxclick auxClick dblclick doubleClick dragend dragEnd dragstart dragStart drop drop focusin focus focusout blur input input invalid invalid keydown keyDown keypress keyPress keyup keyUp mousedown mouseDown mouseup mouseUp paste paste pause pause play play pointercancel pointerCancel pointerdown pointerDown pointerup pointerUp ratechange rateChange reset reset seeked seeked submit submit touchcancel touchCancel touchend touchEnd touchstart touchStart volumechange volumeChange".split(" "),0);gH("drag drag dragenter dragEnter dragexit dragExit dragleave dragLeave dragover dragOver mousemove mouseMove mouseout mouseOut mouseover mouseOver pointermove pointerMove pointerout pointerOut pointerover pointerOver scroll scroll toggle toggle touchmove touchMove wheel wheel".split(" "),1);gH(Vvt,2);for(tG="change selectionchange textInput compositionstart compositionend compositionupdate".split(" "),u5=0;u5<tG.length;u5++)mH.set(tG[u5],0);var tG,u5;Lw("onMouseEnter",["mouseout","mouseover"]);Lw("onMouseLeave",["mouseout","mouseover"]);Lw("onPointerEnter",["pointerout","pointerover"]);Lw("onPointerLeave",["pointerout","pointerover"]);i_("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));i_("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));i_("onBeforeInput",["compositionend","keypress","textInput","paste"]);i_("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));i_("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));i_("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var aM="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),Ige=new Set("cancel close invalid load scroll toggle".split(" ").concat(aM));function ime(e,t,r){var n=e.type||"unknown-event";e.currentTarget=r,qvt(n,t,void 0,e),e.currentTarget=null}function Mge(e,t){t=(t&4)!==0;for(var r=0;r<e.length;r++){var n=e[r],o=n.event;n=n.listeners;e:{var i=void 0;if(t)for(var a=n.length-1;0<=a;a--){var c=n[a],h=c.instance,m=c.currentTarget;if(c=c.listener,h!==i&&o.isPropagationStopped())break e;ime(o,c,m),i=h}else for(a=0;a<n.length;a++){if(c=n[a],h=c.instance,m=c.currentTarget,c=c.listener,h!==i&&o.isPropagationStopped())break e;ime(o,c,m),i=h}}}if(C5)throw e=IG,C5=!1,IG=null,e}function Qi(e,t){var r=Dge(t),n=e+"__bubble";r.has(n)||(Age(t,e,2,!1),r.add(n))}var ame="_reactListening"+Math.random().toString(36).slice(2);function Cge(e){e[ame]||(e[ame]=!0,Hme.forEach(function(t){Ige.has(t)||sme(t,!1,e,null),sme(t,!0,e,null)}))}function sme(e,t,r,n){var o=4<arguments.length&&arguments[4]!==void 0?arguments[4]:0,i=r;if(e==="selectionchange"&&r.nodeType!==9&&(i=r.ownerDocument),n!==null&&!t&&Ige.has(e)){if(e!=="scroll")return;o|=2,i=n}var a=Dge(i),c=e+"__"+(t?"capture":"bubble");a.has(c)||(t&&(o|=4),Age(i,e,o,t),a.add(c))}function Age(e,t,r,n){var o=mH.get(t);switch(o===void 0?2:o){case 0:o=Jvt;break;case 1:o=Qvt;break;default:o=vH}r=o.bind(null,t,r,e),o=void 0,!TG||t!=="touchstart"&&t!=="touchmove"&&t!=="wheel"||(o=!0),n?o!==void 0?e.addEventListener(t,r,{capture:!0,passive:o}):e.addEventListener(t,r,!0):o!==void 0?e.addEventListener(t,r,{passive:o}):e.addEventListener(t,r,!1)}function Oge(e,t,r,n,o){var i=n;if((t&1)===0&&(t&2)===0&&n!==null)e:for(;;){if(n===null)return;var a=n.tag;if(a===3||a===4){var c=n.stateNode.containerInfo;if(c===o||c.nodeType===8&&c.parentNode===o)break;if(a===4)for(a=n.return;a!==null;){var h=a.tag;if((h===3||h===4)&&(h=a.stateNode.containerInfo,h===o||h.nodeType===8&&h.parentNode===o))return;a=a.return}for(;c!==null;){if(a=J1(c),a===null)return;if(h=a.tag,h===5||h===6){n=i=a;continue e}c=c.parentNode}}n=n.return}Lvt(function(){var m=i,y=cH(r),w=[];e:{var E=gge.get(e);if(E!==void 0){var A=bH,P=e;switch(e){case"keypress":if(y5(r)===0)break e;case"keydown":case"keyup":A=hyt;break;case"focusin":P="focus",A=QV;break;case"focusout":P="blur",A=QV;break;case"beforeblur":case"afterblur":A=QV;break;case"click":if(r.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":A=Yhe;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":A=ryt;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":A=vyt;break;case fge:case dge:case hge:A=iyt;break;case mge:A=_yt;break;case"scroll":A=eyt;break;case"wheel":A=xyt;break;case"copy":case"cut":case"paste":A=syt;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":A=Khe}var j=(t&4)!==0,D=!j&&e==="scroll",k=j?E!==null?E+"Capture":null:E;j=[];for(var z=m,V;z!==null;){V=z;var G=V.stateNode;if(V.tag===5&&G!==null&&(V=G,k!==null&&(G=EM(z,k),G!=null&&j.push(AM(z,G,V)))),D)break;z=z.return}0<j.length&&(E=new A(E,P,null,r,y),w.push({event:E,listeners:j}))}}if((t&7)===0){e:{if(E=e==="mouseover"||e==="pointerover",A=e==="mouseout"||e==="pointerout",E&&(t&16)===0&&(P=r.relatedTarget||r.fromElement)&&(J1(P)||P[zw]))break e;if((A||E)&&(E=y.window===y?y:(E=y.ownerDocument)?E.defaultView||E.parentWindow:window,A?(P=r.relatedTarget||r.toElement,A=m,P=P?J1(P):null,P!==null&&(D=s_(P),P!==D||P.tag!==5&&P.tag!==6)&&(P=null)):(A=null,P=m),A!==P)){if(j=Yhe,G="onMouseLeave",k="onMouseEnter",z="mouse",(e==="pointerout"||e==="pointerover")&&(j=Khe,G="onPointerLeave",k="onPointerEnter",z="pointer"),D=A==null?E:xw(A),V=P==null?E:xw(P),E=new j(G,z+"leave",A,r,y),E.target=D,E.relatedTarget=V,G=null,J1(y)===m&&(j=new j(k,z+"enter",P,r,y),j.target=V,j.relatedTarget=D,G=j),D=G,A&&P)t:{for(j=A,k=P,z=0,V=j;V;V=mw(V))z++;for(V=0,G=k;G;G=mw(G))V++;for(;0<z-V;)j=mw(j),z--;for(;0<V-z;)k=mw(k),V--;for(;z--;){if(j===k||k!==null&&j===k.alternate)break t;j=mw(j),k=mw(k)}j=null}else j=null;A!==null&&lme(w,E,A,j,!1),P!==null&&D!==null&&lme(w,D,P,j,!0)}}e:{if(E=m?xw(m):window,A=E.nodeName&&E.nodeName.toLowerCase(),A==="select"||A==="input"&&E.type==="file")var K=Cyt;else if(Qhe(E)){if(Ege)K=Dyt;else{K=Oyt;var Z=Ayt}}else(A=E.nodeName)&&A.toLowerCase()==="input"&&(E.type==="checkbox"||E.type==="radio")&&(K=Pyt);if(K&&(K=K(e,m))){wge(w,K,r,y);break e}Z&&Z(e,E,m),e==="focusout"&&(Z=E._wrapperState)&&Z.controlled&&E.type==="number"&&vG(E,"number",E.value)}switch(Z=m?xw(m):window,e){case"focusin":(Qhe(Z)||Z.contentEditable==="true")&&(bw=Z,OG=m,mM=null);break;case"focusout":mM=OG=bw=null;break;case"mousedown":PG=!0;break;case"contextmenu":case"mouseup":case"dragend":PG=!1,ome(w,r,y);break;case"selectionchange":if(kyt)break;case"keydown":case"keyup":ome(w,r,y)}var te;if(wH)e:{switch(e){case"compositionstart":var se="onCompositionStart";break e;case"compositionend":se="onCompositionEnd";break e;case"compositionupdate":se="onCompositionUpdate";break e}se=void 0}else _w?bge(e,r)&&(se="onCompositionEnd"):e==="keydown"&&r.keyCode===229&&(se="onCompositionStart");se&&(_ge&&r.locale!=="ko"&&(_w||se!=="onCompositionStart"?se==="onCompositionEnd"&&_w&&(te=yge()):(Zv=y,_H="value"in Zv?Zv.value:Zv.textContent,_w=!0)),Z=O5(m,se),0<Z.length&&(se=new Zhe(se,e,null,r,y),w.push({event:se,listeners:Z}),te?se.data=te:(te=xge(r),te!==null&&(se.data=te)))),(te=Eyt?Syt(e,r):Tyt(e,r))&&(m=O5(m,"onBeforeInput"),0<m.length&&(y=new Zhe("onBeforeInput","beforeinput",null,r,y),w.push({event:y,listeners:m}),y.data=te))}Mge(w,t)})}function AM(e,t,r){return{instance:e,listener:t,currentTarget:r}}function O5(e,t){for(var r=t+"Capture",n=[];e!==null;){var o=e,i=o.stateNode;o.tag===5&&i!==null&&(o=i,i=EM(e,r),i!=null&&n.unshift(AM(e,i,o)),i=EM(e,t),i!=null&&n.push(AM(e,i,o))),e=e.return}return n}function mw(e){if(e===null)return null;do e=e.return;while(e&&e.tag!==5);return e||null}function lme(e,t,r,n,o){for(var i=t._reactName,a=[];r!==null&&r!==n;){var c=r,h=c.alternate,m=c.stateNode;if(h!==null&&h===n)break;c.tag===5&&m!==null&&(c=m,o?(h=EM(r,i),h!=null&&a.unshift(AM(r,h,c))):o||(h=EM(r,i),h!=null&&a.push(AM(r,h,c)))),r=r.return}a.length!==0&&e.push({event:t,listeners:a})}function P5(){}var rG=null,nG=null;function Pge(e,t){switch(e){case"button":case"input":case"select":case"textarea":return!!t.autoFocus}return!1}function DG(e,t){return e==="textarea"||e==="option"||e==="noscript"||typeof t.children=="string"||typeof t.children=="number"||typeof t.dangerouslySetInnerHTML=="object"&&t.dangerouslySetInnerHTML!==null&&t.dangerouslySetInnerHTML.__html!=null}var ume=typeof setTimeout=="function"?setTimeout:void 0,Ryt=typeof clearTimeout=="function"?clearTimeout:void 0;function EH(e){e.nodeType===1?e.textContent="":e.nodeType===9&&(e=e.body,e!=null&&(e.textContent=""))}function Cw(e){for(;e!=null;e=e.nextSibling){var t=e.nodeType;if(t===1||t===3)break}return e}function cme(e){e=e.previousSibling;for(var t=0;e;){if(e.nodeType===8){var r=e.data;if(r==="$"||r==="$!"||r==="$?"){if(t===0)return e;t--}else r==="/$"&&t++}e=e.previousSibling}return null}var oG=0;function jyt(e){return{$$typeof:lH,toString:e,valueOf:e}}var tL=Math.random().toString(36).slice(2),Kv="__reactFiber$"+tL,D5="__reactProps$"+tL,zw="__reactContainer$"+tL,pme="__reactEvents$"+tL;function J1(e){var t=e[Kv];if(t)return t;for(var r=e.parentNode;r;){if(t=r[zw]||r[Kv]){if(r=t.alternate,t.child!==null||r!==null&&r.child!==null)for(e=cme(e);e!==null;){if(r=e[Kv])return r;e=cme(e)}return t}e=r,r=e.parentNode}return null}function RM(e){return e=e[Kv]||e[zw],!e||e.tag!==5&&e.tag!==6&&e.tag!==13&&e.tag!==3?null:e}function xw(e){if(e.tag===5||e.tag===6)return e.stateNode;throw Error(ur(33))}function rL(e){return e[D5]||null}function Dge(e){var t=e[pme];return t===void 0&&(t=e[pme]=new Set),t}var NG=[],ww=-1;function py(e){return{current:e}}function ea(e){0>ww||(e.current=NG[ww],NG[ww]=null,ww--)}function Pa(e,t){ww++,NG[ww]=e.current,e.current=t}var ly={},iu=py(ly),pc=py(!1),r_=ly;function kw(e,t){var r=e.type.contextTypes;if(!r)return ly;var n=e.stateNode;if(n&&n.__reactInternalMemoizedUnmaskedChildContext===t)return n.__reactInternalMemoizedMaskedChildContext;var o={},i;for(i in r)o[i]=t[i];return n&&(e=e.stateNode,e.__reactInternalMemoizedUnmaskedChildContext=t,e.__reactInternalMemoizedMaskedChildContext=o),o}function fc(e){return e=e.childContextTypes,e!=null}function N5(){ea(pc),ea(iu)}function fme(e,t,r){if(iu.current!==ly)throw Error(ur(168));Pa(iu,t),Pa(pc,r)}function Nge(e,t,r){var n=e.stateNode;if(e=t.childContextTypes,typeof n.getChildContext!="function")return r;n=n.getChildContext();for(var o in n)if(!(o in e))throw Error(ur(108,Sw(t)||"Unknown",o));return fa({},r,n)}function _5(e){return e=(e=e.stateNode)&&e.__reactInternalMemoizedMergedChildContext||ly,r_=iu.current,Pa(iu,e),Pa(pc,pc.current),!0}function dme(e,t,r){var n=e.stateNode;if(!n)throw Error(ur(169));r?(e=Nge(e,t,r_),n.__reactInternalMemoizedMergedChildContext=e,ea(pc),ea(iu),Pa(iu,e)):ea(pc),Pa(pc,r)}var SH=null,t_=null,qyt=Ys.unstable_runWithPriority,TH=Ys.unstable_scheduleCallback,LG=Ys.unstable_cancelCallback,zyt=Ys.unstable_shouldYield,hme=Ys.unstable_requestPaint,kG=Ys.unstable_now,Fyt=Ys.unstable_getCurrentPriorityLevel,nL=Ys.unstable_ImmediatePriority,Lge=Ys.unstable_UserBlockingPriority,kge=Ys.unstable_NormalPriority,Rge=Ys.unstable_LowPriority,jge=Ys.unstable_IdlePriority,iG={},Uyt=hme!==void 0?hme:function(){},lg=null,b5=null,aG=!1,mme=kG(),nu=1e4>mme?kG:function(){return kG()-mme};function Rw(){switch(Fyt()){case nL:return 99;case Lge:return 98;case kge:return 97;case Rge:return 96;case jge:return 95;default:throw Error(ur(332))}}function qge(e){switch(e){case 99:return nL;case 98:return Lge;case 97:return kge;case 96:return Rge;case 95:return jge;default:throw Error(ur(332))}}function n_(e,t){return e=qge(e),qyt(e,t)}function OM(e,t,r){return e=qge(e),TH(e,t,r)}function Ah(){if(b5!==null){var e=b5;b5=null,LG(e)}zge()}function zge(){if(!aG&&lg!==null){aG=!0;var e=0;try{var t=lg;n_(99,function(){for(;e<t.length;e++){var r=t[e];do r=r(!0);while(r!==null)}}),lg=null}catch(r){throw lg!==null&&(lg=lg.slice(e+1)),TH(nL,Ah),r}finally{aG=!1}}}var Byt=a_.ReactCurrentBatchConfig;function cd(e,t){if(e&&e.defaultProps){t=fa({},t),e=e.defaultProps;for(var r in e)t[r]===void 0&&(t[r]=e[r]);return t}return t}var L5=py(null),k5=null,Ew=null,R5=null;function IH(){R5=Ew=k5=null}function MH(e){var t=L5.current;ea(L5),e.type._context._currentValue=t}function Fge(e,t){for(;e!==null;){var r=e.alternate;if((e.childLanes&t)===t){if(r===null||(r.childLanes&t)===t)break;r.childLanes|=t}else e.childLanes|=t,r!==null&&(r.childLanes|=t);e=e.return}}function Aw(e,t){k5=e,R5=Ew=null,e=e.dependencies,e!==null&&e.firstContext!==null&&((e.lanes&t)!==0&&(pd=!0),e.firstContext=null)}function Wp(e,t){if(R5!==e&&t!==!1&&t!==0)if((typeof t!="number"||t===1073741823)&&(R5=e,t=1073741823),t={context:e,observedBits:t,next:null},Ew===null){if(k5===null)throw Error(ur(308));Ew=t,k5.dependencies={lanes:0,firstContext:t,responders:null}}else Ew=Ew.next=t;return e._currentValue}var $v=!1;function CH(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null},effects:null}}function Uge(e,t){e=e.updateQueue,t.updateQueue===e&&(t.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,effects:e.effects})}function ty(e,t){return{eventTime:e,lane:t,tag:0,payload:null,callback:null,next:null}}function ry(e,t){if(e=e.updateQueue,e!==null){e=e.shared;var r=e.pending;r===null?t.next=t:(t.next=r.next,r.next=t),e.pending=t}}function gme(e,t){var r=e.updateQueue,n=e.alternate;if(n!==null&&(n=n.updateQueue,r===n)){var o=null,i=null;if(r=r.firstBaseUpdate,r!==null){do{var a={eventTime:r.eventTime,lane:r.lane,tag:r.tag,payload:r.payload,callback:r.callback,next:null};i===null?o=i=a:i=i.next=a,r=r.next}while(r!==null);i===null?o=i=t:i=i.next=t}else o=i=t;r={baseState:n.baseState,firstBaseUpdate:o,lastBaseUpdate:i,shared:n.shared,effects:n.effects},e.updateQueue=r;return}e=r.lastBaseUpdate,e===null?r.firstBaseUpdate=t:e.next=t,r.lastBaseUpdate=t}function PM(e,t,r,n){var o=e.updateQueue;$v=!1;var i=o.firstBaseUpdate,a=o.lastBaseUpdate,c=o.shared.pending;if(c!==null){o.shared.pending=null;var h=c,m=h.next;h.next=null,a===null?i=m:a.next=m,a=h;var y=e.alternate;if(y!==null){y=y.updateQueue;var w=y.lastBaseUpdate;w!==a&&(w===null?y.firstBaseUpdate=m:w.next=m,y.lastBaseUpdate=h)}}if(i!==null){w=o.baseState,a=0,y=m=h=null;do{c=i.lane;var E=i.eventTime;if((n&c)===c){y!==null&&(y=y.next={eventTime:E,lane:0,tag:i.tag,payload:i.payload,callback:i.callback,next:null});e:{var A=e,P=i;switch(c=t,E=r,P.tag){case 1:if(A=P.payload,typeof A=="function"){w=A.call(E,w,c);break e}w=A;break e;case 3:A.flags=A.flags&-4097|64;case 0:if(A=P.payload,c=typeof A=="function"?A.call(E,w,c):A,c==null)break e;w=fa({},w,c);break e;case 2:$v=!0}}i.callback!==null&&(e.flags|=32,c=o.effects,c===null?o.effects=[i]:c.push(i))}else E={eventTime:E,lane:c,tag:i.tag,payload:i.payload,callback:i.callback,next:null},y===null?(m=y=E,h=w):y=y.next=E,a|=c;if(i=i.next,i===null){if(c=o.shared.pending,c===null)break;i=c.next,c.next=null,o.lastBaseUpdate=c,o.shared.pending=null}}while(!0);y===null&&(h=w),o.baseState=h,o.firstBaseUpdate=m,o.lastBaseUpdate=y,qM|=a,e.lanes=a,e.memoizedState=w}}function vme(e,t,r){if(e=t.effects,t.effects=null,e!==null)for(t=0;t<e.length;t++){var n=e[t],o=n.callback;if(o!==null){if(n.callback=null,n=r,typeof o!="function")throw Error(ur(191,o));o.call(n)}}}var Bge=new Y5.Component().refs;function j5(e,t,r,n){t=e.memoizedState,r=r(n,t),r=r==null?t:fa({},t,r),e.memoizedState=r,e.lanes===0&&(e.updateQueue.baseState=r)}var oL={isMounted:function(e){return(e=e._reactInternals)?s_(e)===e:!1},enqueueSetState:function(e,t,r){e=e._reactInternals;var n=pp(),o=ny(e),i=ty(n,o);i.payload=t,r!=null&&(i.callback=r),ry(e,i),oy(e,o,n)},enqueueReplaceState:function(e,t,r){e=e._reactInternals;var n=pp(),o=ny(e),i=ty(n,o);i.tag=1,i.payload=t,r!=null&&(i.callback=r),ry(e,i),oy(e,o,n)},enqueueForceUpdate:function(e,t){e=e._reactInternals;var r=pp(),n=ny(e),o=ty(r,n);o.tag=2,t!=null&&(o.callback=t),ry(e,o),oy(e,n,r)}};function yme(e,t,r,n,o,i,a){return e=e.stateNode,typeof e.shouldComponentUpdate=="function"?e.shouldComponentUpdate(n,i,a):t.prototype&&t.prototype.isPureReactComponent?!CM(r,n)||!CM(o,i):!0}function Vge(e,t,r){var n=!1,o=ly,i=t.contextType;return typeof i=="object"&&i!==null?i=Wp(i):(o=fc(t)?r_:iu.current,n=t.contextTypes,i=(n=n!=null)?kw(e,o):ly),t=new t(r,i),e.memoizedState=t.state!==null&&t.state!==void 0?t.state:null,t.updater=oL,e.stateNode=t,t._reactInternals=e,n&&(e=e.stateNode,e.__reactInternalMemoizedUnmaskedChildContext=o,e.__reactInternalMemoizedMaskedChildContext=i),t}function _me(e,t,r,n){e=t.state,typeof t.componentWillReceiveProps=="function"&&t.componentWillReceiveProps(r,n),typeof t.UNSAFE_componentWillReceiveProps=="function"&&t.UNSAFE_componentWillReceiveProps(r,n),t.state!==e&&oL.enqueueReplaceState(t,t.state,null)}function RG(e,t,r,n){var o=e.stateNode;o.props=r,o.state=e.memoizedState,o.refs=Bge,CH(e);var i=t.contextType;typeof i=="object"&&i!==null?o.context=Wp(i):(i=fc(t)?r_:iu.current,o.context=kw(e,i)),PM(e,r,o,n),o.state=e.memoizedState,i=t.getDerivedStateFromProps,typeof i=="function"&&(j5(e,t,i,r),o.state=e.memoizedState),typeof t.getDerivedStateFromProps=="function"||typeof o.getSnapshotBeforeUpdate=="function"||typeof o.UNSAFE_componentWillMount!="function"&&typeof o.componentWillMount!="function"||(t=o.state,typeof o.componentWillMount=="function"&&o.componentWillMount(),typeof o.UNSAFE_componentWillMount=="function"&&o.UNSAFE_componentWillMount(),t!==o.state&&oL.enqueueReplaceState(o,o.state,null),PM(e,r,o,n),o.state=e.memoizedState),typeof o.componentDidMount=="function"&&(e.flags|=4)}var c5=Array.isArray;function XI(e,t,r){if(e=r.ref,e!==null&&typeof e!="function"&&typeof e!="object"){if(r._owner){if(r=r._owner,r){if(r.tag!==1)throw Error(ur(309));var n=r.stateNode}if(!n)throw Error(ur(147,e));var o=""+e;return t!==null&&t.ref!==null&&typeof t.ref=="function"&&t.ref._stringRef===o?t.ref:(t=function(i){var a=n.refs;a===Bge&&(a=n.refs={}),i===null?delete a[o]:a[o]=i},t._stringRef=o,t)}if(typeof e!="string")throw Error(ur(284));if(!r._owner)throw Error(ur(290,e))}return e}function p5(e,t){if(e.type!=="textarea")throw Error(ur(31,Object.prototype.toString.call(t)==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":t))}function Gge(e){function t(D,k){if(e){var z=D.lastEffect;z!==null?(z.nextEffect=k,D.lastEffect=k):D.firstEffect=D.lastEffect=k,k.nextEffect=null,k.flags=8}}function r(D,k){if(!e)return null;for(;k!==null;)t(D,k),k=k.sibling;return null}function n(D,k){for(D=new Map;k!==null;)k.key!==null?D.set(k.key,k):D.set(k.index,k),k=k.sibling;return D}function o(D,k){return D=cy(D,k),D.index=0,D.sibling=null,D}function i(D,k,z){return D.index=z,e?(z=D.alternate,z!==null?(z=z.index,z<k?(D.flags=2,k):z):(D.flags=2,k)):k}function a(D){return e&&D.alternate===null&&(D.flags=2),D}function c(D,k,z,V){return k===null||k.tag!==6?(k=pG(z,D.mode,V),k.return=D,k):(k=o(k,z),k.return=D,k)}function h(D,k,z,V){return k!==null&&k.elementType===z.type?(V=o(k,z.props),V.ref=XI(D,k,z),V.return=D,V):(V=S5(z.type,z.key,z.props,null,D.mode,V),V.ref=XI(D,k,z),V.return=D,V)}function m(D,k,z,V){return k===null||k.tag!==4||k.stateNode.containerInfo!==z.containerInfo||k.stateNode.implementation!==z.implementation?(k=fG(z,D.mode,V),k.return=D,k):(k=o(k,z.children||[]),k.return=D,k)}function y(D,k,z,V,G){return k===null||k.tag!==7?(k=Nw(z,D.mode,V,G),k.return=D,k):(k=o(k,z),k.return=D,k)}function w(D,k,z){if(typeof k=="string"||typeof k=="number")return k=pG(""+k,D.mode,z),k.return=D,k;if(typeof k=="object"&&k!==null){switch(k.$$typeof){case oM:return z=S5(k.type,k.key,k.props,null,D.mode,z),z.ref=XI(D,null,k),z.return=D,z;case K1:return k=fG(k,D.mode,z),k.return=D,k}if(c5(k)||WI(k))return k=Nw(k,D.mode,z,null),k.return=D,k;p5(D,k)}return null}function E(D,k,z,V){var G=k!==null?k.key:null;if(typeof z=="string"||typeof z=="number")return G!==null?null:c(D,k,""+z,V);if(typeof z=="object"&&z!==null){switch(z.$$typeof){case oM:return z.key===G?z.type===Yv?y(D,k,z.props.children,V,G):h(D,k,z,V):null;case K1:return z.key===G?m(D,k,z,V):null}if(c5(z)||WI(z))return G!==null?null:y(D,k,z,V,null);p5(D,z)}return null}function A(D,k,z,V,G){if(typeof V=="string"||typeof V=="number")return D=D.get(z)||null,c(k,D,""+V,G);if(typeof V=="object"&&V!==null){switch(V.$$typeof){case oM:return D=D.get(V.key===null?z:V.key)||null,V.type===Yv?y(k,D,V.props.children,G,V.key):h(k,D,V,G);case K1:return D=D.get(V.key===null?z:V.key)||null,m(k,D,V,G)}if(c5(V)||WI(V))return D=D.get(z)||null,y(k,D,V,G,null);p5(k,V)}return null}function P(D,k,z,V){for(var G=null,K=null,Z=k,te=k=0,se=null;Z!==null&&te<z.length;te++){Z.index>te?(se=Z,Z=null):se=Z.sibling;var le=E(D,Z,z[te],V);if(le===null){Z===null&&(Z=se);break}e&&Z&&le.alternate===null&&t(D,Z),k=i(le,k,te),K===null?G=le:K.sibling=le,K=le,Z=se}if(te===z.length)return r(D,Z),G;if(Z===null){for(;te<z.length;te++)Z=w(D,z[te],V),Z!==null&&(k=i(Z,k,te),K===null?G=Z:K.sibling=Z,K=Z);return G}for(Z=n(D,Z);te<z.length;te++)se=A(Z,D,te,z[te],V),se!==null&&(e&&se.alternate!==null&&Z.delete(se.key===null?te:se.key),k=i(se,k,te),K===null?G=se:K.sibling=se,K=se);return e&&Z.forEach(function(pe){return t(D,pe)}),G}function j(D,k,z,V){var G=WI(z);if(typeof G!="function")throw Error(ur(150));if(z=G.call(z),z==null)throw Error(ur(151));for(var K=G=null,Z=k,te=k=0,se=null,le=z.next();Z!==null&&!le.done;te++,le=z.next()){Z.index>te?(se=Z,Z=null):se=Z.sibling;var pe=E(D,Z,le.value,V);if(pe===null){Z===null&&(Z=se);break}e&&Z&&pe.alternate===null&&t(D,Z),k=i(pe,k,te),K===null?G=pe:K.sibling=pe,K=pe,Z=se}if(le.done)return r(D,Z),G;if(Z===null){for(;!le.done;te++,le=z.next())le=w(D,le.value,V),le!==null&&(k=i(le,k,te),K===null?G=le:K.sibling=le,K=le);return G}for(Z=n(D,Z);!le.done;te++,le=z.next())le=A(Z,D,te,le.value,V),le!==null&&(e&&le.alternate!==null&&Z.delete(le.key===null?te:le.key),k=i(le,k,te),K===null?G=le:K.sibling=le,K=le);return e&&Z.forEach(function(me){return t(D,me)}),G}return function(D,k,z,V){var G=typeof z=="object"&&z!==null&&z.type===Yv&&z.key===null;G&&(z=z.props.children);var K=typeof z=="object"&&z!==null;if(K)switch(z.$$typeof){case oM:e:{for(K=z.key,G=k;G!==null;){if(G.key===K){switch(G.tag){case 7:if(z.type===Yv){r(D,G.sibling),k=o(G,z.props.children),k.return=D,D=k;break e}break;default:if(G.elementType===z.type){r(D,G.sibling),k=o(G,z.props),k.ref=XI(D,G,z),k.return=D,D=k;break e}}r(D,G);break}else t(D,G);G=G.sibling}z.type===Yv?(k=Nw(z.props.children,D.mode,V,z.key),k.return=D,D=k):(V=S5(z.type,z.key,z.props,null,D.mode,V),V.ref=XI(D,k,z),V.return=D,D=V)}return a(D);case K1:e:{for(G=z.key;k!==null;){if(k.key===G){if(k.tag===4&&k.stateNode.containerInfo===z.containerInfo&&k.stateNode.implementation===z.implementation){r(D,k.sibling),k=o(k,z.children||[]),k.return=D,D=k;break e}else{r(D,k);break}}else t(D,k);k=k.sibling}k=fG(z,D.mode,V),k.return=D,D=k}return a(D)}if(typeof z=="string"||typeof z=="number")return z=""+z,k!==null&&k.tag===6?(r(D,k.sibling),k=o(k,z),k.return=D,D=k):(r(D,k),k=pG(z,D.mode,V),k.return=D,D=k),a(D);if(c5(z))return P(D,k,z,V);if(WI(z))return j(D,k,z,V);if(K&&p5(D,z),typeof z=="undefined"&&!G)switch(D.tag){case 1:case 22:case 0:case 11:case 15:throw Error(ur(152,Sw(D.type)||"Component"))}return r(D,k)}}var q5=Gge(!0),Hge=Gge(!1),jM={},Mh=py(jM),DM=py(jM),NM=py(jM);function Q1(e){if(e===jM)throw Error(ur(174));return e}function jG(e,t){switch(Pa(NM,t),Pa(DM,e),Pa(Mh,jM),e=t.nodeType,e){case 9:case 11:t=(t=t.documentElement)?t.namespaceURI:xG(null,"");break;default:e=e===8?t.parentNode:t,t=e.namespaceURI||null,e=e.tagName,t=xG(t,e)}ea(Mh),Pa(Mh,t)}function jw(){ea(Mh),ea(DM),ea(NM)}function bme(e){Q1(NM.current);var t=Q1(Mh.current),r=xG(t,e.type);t!==r&&(Pa(DM,e),Pa(Mh,r))}function AH(e){DM.current===e&&(ea(Mh),ea(DM))}var Oa=py(0);function z5(e){for(var t=e;t!==null;){if(t.tag===13){var r=t.memoizedState;if(r!==null&&(r=r.dehydrated,r===null||r.data==="$?"||r.data==="$!"))return t}else if(t.tag===19&&t.memoizedProps.revealOrder!==void 0){if((t.flags&64)!==0)return t}else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}return null}var cg=null,Xv=null,Ch=!1;function Wge(e,t){var r=Gp(5,null,null,0);r.elementType="DELETED",r.type="DELETED",r.stateNode=t,r.return=e,r.flags=8,e.lastEffect!==null?(e.lastEffect.nextEffect=r,e.lastEffect=r):e.firstEffect=e.lastEffect=r}function xme(e,t){switch(e.tag){case 5:var r=e.type;return t=t.nodeType!==1||r.toLowerCase()!==t.nodeName.toLowerCase()?null:t,t!==null?(e.stateNode=t,!0):!1;case 6:return t=e.pendingProps===""||t.nodeType!==3?null:t,t!==null?(e.stateNode=t,!0):!1;case 13:return!1;default:return!1}}function qG(e){if(Ch){var t=Xv;if(t){var r=t;if(!xme(e,t)){if(t=Cw(r.nextSibling),!t||!xme(e,t)){e.flags=e.flags&-1025|2,Ch=!1,cg=e;return}Wge(cg,r)}cg=e,Xv=Cw(t.firstChild)}else e.flags=e.flags&-1025|2,Ch=!1,cg=e}}function wme(e){for(e=e.return;e!==null&&e.tag!==5&&e.tag!==3&&e.tag!==13;)e=e.return;cg=e}function f5(e){if(e!==cg)return!1;if(!Ch)return wme(e),Ch=!0,!1;var t=e.type;if(e.tag!==5||t!=="head"&&t!=="body"&&!DG(t,e.memoizedProps))for(t=Xv;t;)Wge(e,t),t=Cw(t.nextSibling);if(wme(e),e.tag===13){if(e=e.memoizedState,e=e!==null?e.dehydrated:null,!e)throw Error(ur(317));e:{for(e=e.nextSibling,t=0;e;){if(e.nodeType===8){var r=e.data;if(r==="/$"){if(t===0){Xv=Cw(e.nextSibling);break e}t--}else r!=="$"&&r!=="$!"&&r!=="$?"||t++}e=e.nextSibling}Xv=null}}else Xv=cg?Cw(e.stateNode.nextSibling):null;return!0}function sG(){Xv=cg=null,Ch=!1}var Ow=[];function OH(){for(var e=0;e<Ow.length;e++)Ow[e]._workInProgressVersionPrimary=null;Ow.length=0}var gM=a_.ReactCurrentDispatcher,Hp=a_.ReactCurrentBatchConfig,LM=0,Wa=null,ru=null,_l=null,F5=!1,vM=!1;function uc(){throw Error(ur(321))}function PH(e,t){if(t===null)return!1;for(var r=0;r<t.length&&r<e.length;r++)if(!Vp(e[r],t[r]))return!1;return!0}function DH(e,t,r,n,o,i){if(LM=i,Wa=t,t.memoizedState=null,t.updateQueue=null,t.lanes=0,gM.current=e===null||e.memoizedState===null?Gyt:Hyt,e=r(n,o),vM){i=0;do{if(vM=!1,!(25>i))throw Error(ur(301));i+=1,_l=ru=null,t.updateQueue=null,gM.current=Wyt,e=r(n,o)}while(vM)}if(gM.current=G5,t=ru!==null&&ru.next!==null,LM=0,_l=ru=Wa=null,F5=!1,t)throw Error(ur(300));return e}function e_(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return _l===null?Wa.memoizedState=_l=e:_l=_l.next=e,_l}function l_(){if(ru===null){var e=Wa.alternate;e=e!==null?e.memoizedState:null}else e=ru.next;var t=_l===null?Wa.memoizedState:_l.next;if(t!==null)_l=t,ru=e;else{if(e===null)throw Error(ur(310));ru=e,e={memoizedState:ru.memoizedState,baseState:ru.baseState,baseQueue:ru.baseQueue,queue:ru.queue,next:null},_l===null?Wa.memoizedState=_l=e:_l=_l.next=e}return _l}function Th(e,t){return typeof t=="function"?t(e):t}function JI(e){var t=l_(),r=t.queue;if(r===null)throw Error(ur(311));r.lastRenderedReducer=e;var n=ru,o=n.baseQueue,i=r.pending;if(i!==null){if(o!==null){var a=o.next;o.next=i.next,i.next=a}n.baseQueue=o=i,r.pending=null}if(o!==null){o=o.next,n=n.baseState;var c=a=i=null,h=o;do{var m=h.lane;if((LM&m)===m)c!==null&&(c=c.next={lane:0,action:h.action,eagerReducer:h.eagerReducer,eagerState:h.eagerState,next:null}),n=h.eagerReducer===e?h.eagerState:e(n,h.action);else{var y={lane:m,action:h.action,eagerReducer:h.eagerReducer,eagerState:h.eagerState,next:null};c===null?(a=c=y,i=n):c=c.next=y,Wa.lanes|=m,qM|=m}h=h.next}while(h!==null&&h!==o);c===null?i=n:c.next=a,Vp(n,t.memoizedState)||(pd=!0),t.memoizedState=n,t.baseState=i,t.baseQueue=c,r.lastRenderedState=n}return[t.memoizedState,r.dispatch]}function QI(e){var t=l_(),r=t.queue;if(r===null)throw Error(ur(311));r.lastRenderedReducer=e;var n=r.dispatch,o=r.pending,i=t.memoizedState;if(o!==null){r.pending=null;var a=o=o.next;do i=e(i,a.action),a=a.next;while(a!==o);Vp(i,t.memoizedState)||(pd=!0),t.memoizedState=i,t.baseQueue===null&&(t.baseState=i),r.lastRenderedState=i}return[i,n]}function Eme(e,t,r){var n=t._getVersion;n=n(t._source);var o=t._workInProgressVersionPrimary;if(o!==null?e=o===n:(e=e.mutableReadLanes,(e=(LM&e)===e)&&(t._workInProgressVersionPrimary=n,Ow.push(t))),e)return r(t._source);throw Ow.push(t),Error(ur(350))}function $ge(e,t,r,n){var o=Du;if(o===null)throw Error(ur(349));var i=t._getVersion,a=i(t._source),c=gM.current,h=c.useState(function(){return Eme(o,t,r)}),m=h[1],y=h[0];h=_l;var w=e.memoizedState,E=w.refs,A=E.getSnapshot,P=w.source;w=w.subscribe;var j=Wa;return e.memoizedState={refs:E,source:t,subscribe:n},c.useEffect(function(){E.getSnapshot=r,E.setSnapshot=m;var D=i(t._source);if(!Vp(a,D)){D=r(t._source),Vp(y,D)||(m(D),D=ny(j),o.mutableReadLanes|=D&o.pendingLanes),D=o.mutableReadLanes,o.entangledLanes|=D;for(var k=o.entanglements,z=D;0<z;){var V=31-sy(z),G=1<<V;k[V]|=D,z&=~G}}},[r,t,n]),c.useEffect(function(){return n(t._source,function(){var D=E.getSnapshot,k=E.setSnapshot;try{k(D(t._source));var z=ny(j);o.mutableReadLanes|=z&o.pendingLanes}catch(V){k(function(){throw V})}})},[t,n]),Vp(A,r)&&Vp(P,t)&&Vp(w,n)||(e={pending:null,dispatch:null,lastRenderedReducer:Th,lastRenderedState:y},e.dispatch=m=kH.bind(null,Wa,e),h.queue=e,h.baseQueue=null,y=Eme(o,t,r),h.memoizedState=h.baseState=y),y}function Yge(e,t,r){var n=l_();return $ge(n,e,t,r)}function eM(e){var t=e_();return typeof e=="function"&&(e=e()),t.memoizedState=t.baseState=e,e=t.queue={pending:null,dispatch:null,lastRenderedReducer:Th,lastRenderedState:e},e=e.dispatch=kH.bind(null,Wa,e),[t.memoizedState,e]}function U5(e,t,r,n){return e={tag:e,create:t,destroy:r,deps:n,next:null},t=Wa.updateQueue,t===null?(t={lastEffect:null},Wa.updateQueue=t,t.lastEffect=e.next=e):(r=t.lastEffect,r===null?t.lastEffect=e.next=e:(n=r.next,r.next=e,e.next=n,t.lastEffect=e)),e}function Sme(e){var t=e_();return e={current:e},t.memoizedState=e}function B5(){return l_().memoizedState}function zG(e,t,r,n){var o=e_();Wa.flags|=e,o.memoizedState=U5(1|t,r,void 0,n===void 0?null:n)}function NH(e,t,r,n){var o=l_();n=n===void 0?null:n;var i=void 0;if(ru!==null){var a=ru.memoizedState;if(i=a.destroy,n!==null&&PH(n,a.deps)){U5(t,r,i,n);return}}Wa.flags|=e,o.memoizedState=U5(1|t,r,i,n)}function Tme(e,t){return zG(516,4,e,t)}function V5(e,t){return NH(516,4,e,t)}function Zge(e,t){return NH(4,2,e,t)}function Kge(e,t){if(typeof t=="function")return e=e(),t(e),function(){t(null)};if(t!=null)return e=e(),t.current=e,function(){t.current=null}}function Xge(e,t,r){return r=r!=null?r.concat([e]):null,NH(4,2,Kge.bind(null,t,e),r)}function LH(){}function Jge(e,t){var r=l_();t=t===void 0?null:t;var n=r.memoizedState;return n!==null&&t!==null&&PH(t,n[1])?n[0]:(r.memoizedState=[e,t],e)}function Qge(e,t){var r=l_();t=t===void 0?null:t;var n=r.memoizedState;return n!==null&&t!==null&&PH(t,n[1])?n[0]:(e=e(),r.memoizedState=[e,t],e)}function Vyt(e,t){var r=Rw();n_(98>r?98:r,function(){e(!0)}),n_(97<r?97:r,function(){var n=Hp.transition;Hp.transition=1;try{e(!1),t()}finally{Hp.transition=n}})}function kH(e,t,r){var n=pp(),o=ny(e),i={lane:o,action:r,eagerReducer:null,eagerState:null,next:null},a=t.pending;if(a===null?i.next=i:(i.next=a.next,a.next=i),t.pending=i,a=e.alternate,e===Wa||a!==null&&a===Wa)vM=F5=!0;else{if(e.lanes===0&&(a===null||a.lanes===0)&&(a=t.lastRenderedReducer,a!==null))try{var c=t.lastRenderedState,h=a(c,r);if(i.eagerReducer=a,i.eagerState=h,Vp(h,c))return}catch(m){}finally{}oy(e,o,n)}}var G5={readContext:Wp,useCallback:uc,useContext:uc,useEffect:uc,useImperativeHandle:uc,useLayoutEffect:uc,useMemo:uc,useReducer:uc,useRef:uc,useState:uc,useDebugValue:uc,useDeferredValue:uc,useTransition:uc,useMutableSource:uc,useOpaqueIdentifier:uc,unstable_isNewReconciler:!1},Gyt={readContext:Wp,useCallback:function(e,t){return e_().memoizedState=[e,t===void 0?null:t],e},useContext:Wp,useEffect:Tme,useImperativeHandle:function(e,t,r){return r=r!=null?r.concat([e]):null,zG(4,2,Kge.bind(null,t,e),r)},useLayoutEffect:function(e,t){return zG(4,2,e,t)},useMemo:function(e,t){var r=e_();return t=t===void 0?null:t,e=e(),r.memoizedState=[e,t],e},useReducer:function(e,t,r){var n=e_();return t=r!==void 0?r(t):t,n.memoizedState=n.baseState=t,e=n.queue={pending:null,dispatch:null,lastRenderedReducer:e,lastRenderedState:t},e=e.dispatch=kH.bind(null,Wa,e),[n.memoizedState,e]},useRef:Sme,useState:eM,useDebugValue:LH,useDeferredValue:function(e){var t=eM(e),r=t[0],n=t[1];return Tme(function(){var o=Hp.transition;Hp.transition=1;try{n(e)}finally{Hp.transition=o}},[e]),r},useTransition:function(){var e=eM(!1),t=e[0];return e=Vyt.bind(null,e[1]),Sme(e),[e,t]},useMutableSource:function(e,t,r){var n=e_();return n.memoizedState={refs:{getSnapshot:t,setSnapshot:null},source:e,subscribe:r},$ge(n,e,t,r)},useOpaqueIdentifier:function(){if(Ch){var e=!1,t=jyt(function(){throw e||(e=!0,r("r:"+(oG++).toString(36))),Error(ur(355))}),r=eM(t)[1];return(Wa.mode&2)===0&&(Wa.flags|=516,U5(5,function(){r("r:"+(oG++).toString(36))},void 0,null)),t}return t="r:"+(oG++).toString(36),eM(t),t},unstable_isNewReconciler:!1},Hyt={readContext:Wp,useCallback:Jge,useContext:Wp,useEffect:V5,useImperativeHandle:Xge,useLayoutEffect:Zge,useMemo:Qge,useReducer:JI,useRef:B5,useState:function(){return JI(Th)},useDebugValue:LH,useDeferredValue:function(e){var t=JI(Th),r=t[0],n=t[1];return V5(function(){var o=Hp.transition;Hp.transition=1;try{n(e)}finally{Hp.transition=o}},[e]),r},useTransition:function(){var e=JI(Th)[0];return[B5().current,e]},useMutableSource:Yge,useOpaqueIdentifier:function(){return JI(Th)[0]},unstable_isNewReconciler:!1},Wyt={readContext:Wp,useCallback:Jge,useContext:Wp,useEffect:V5,useImperativeHandle:Xge,useLayoutEffect:Zge,useMemo:Qge,useReducer:QI,useRef:B5,useState:function(){return QI(Th)},useDebugValue:LH,useDeferredValue:function(e){var t=QI(Th),r=t[0],n=t[1];return V5(function(){var o=Hp.transition;Hp.transition=1;try{n(e)}finally{Hp.transition=o}},[e]),r},useTransition:function(){var e=QI(Th)[0];return[B5().current,e]},useMutableSource:Yge,useOpaqueIdentifier:function(){return QI(Th)[0]},unstable_isNewReconciler:!1},$yt=a_.ReactCurrentOwner,pd=!1;function cc(e,t,r,n){t.child=e===null?Hge(t,null,r,n):q5(t,e.child,r,n)}function Ime(e,t,r,n,o){r=r.render;var i=t.ref;return Aw(t,o),n=DH(e,t,r,n,i,o),e!==null&&!pd?(t.updateQueue=e.updateQueue,t.flags&=-517,e.lanes&=~o,pg(e,t,o)):(t.flags|=1,cc(e,t,n,o),t.child)}function Mme(e,t,r,n,o,i){if(e===null){var a=r.type;return typeof a=="function"&&!UH(a)&&a.defaultProps===void 0&&r.compare===null&&r.defaultProps===void 0?(t.tag=15,t.type=a,eve(e,t,a,n,o,i)):(e=S5(r.type,null,n,t,t.mode,i),e.ref=t.ref,e.return=t,t.child=e)}return a=e.child,(o&i)===0&&(o=a.memoizedProps,r=r.compare,r=r!==null?r:CM,r(o,n)&&e.ref===t.ref)?pg(e,t,i):(t.flags|=1,e=cy(a,n),e.ref=t.ref,e.return=t,t.child=e)}function eve(e,t,r,n,o,i){if(e!==null&&CM(e.memoizedProps,n)&&e.ref===t.ref)if(pd=!1,(i&o)!==0)(e.flags&16384)!==0&&(pd=!0);else return t.lanes=e.lanes,pg(e,t,i);return FG(e,t,r,n,i)}function lG(e,t,r){var n=t.pendingProps,o=n.children,i=e!==null?e.memoizedState:null;if(n.mode==="hidden"||n.mode==="unstable-defer-without-hiding"){if((t.mode&4)===0)t.memoizedState={baseLanes:0},h5(t,r);else if((r&1073741824)!==0)t.memoizedState={baseLanes:0},h5(t,i!==null?i.baseLanes:r);else return e=i!==null?i.baseLanes|r:r,t.lanes=t.childLanes=1073741824,t.memoizedState={baseLanes:e},h5(t,e),null;}else i!==null?(n=i.baseLanes|r,t.memoizedState=null):n=r,h5(t,n);return cc(e,t,o,r),t.child}function tve(e,t){var r=t.ref;(e===null&&r!==null||e!==null&&e.ref!==r)&&(t.flags|=128)}function FG(e,t,r,n,o){var i=fc(r)?r_:iu.current;return i=kw(t,i),Aw(t,o),r=DH(e,t,r,n,i,o),e!==null&&!pd?(t.updateQueue=e.updateQueue,t.flags&=-517,e.lanes&=~o,pg(e,t,o)):(t.flags|=1,cc(e,t,r,o),t.child)}function Cme(e,t,r,n,o){if(fc(r)){var i=!0;_5(t)}else i=!1;if(Aw(t,o),t.stateNode===null)e!==null&&(e.alternate=null,t.alternate=null,t.flags|=2),Vge(t,r,n),RG(t,r,n,o),n=!0;else if(e===null){var a=t.stateNode,c=t.memoizedProps;a.props=c;var h=a.context,m=r.contextType;typeof m=="object"&&m!==null?m=Wp(m):(m=fc(r)?r_:iu.current,m=kw(t,m));var y=r.getDerivedStateFromProps,w=typeof y=="function"||typeof a.getSnapshotBeforeUpdate=="function";w||typeof a.UNSAFE_componentWillReceiveProps!="function"&&typeof a.componentWillReceiveProps!="function"||(c!==n||h!==m)&&_me(t,a,n,m),$v=!1;var E=t.memoizedState;a.state=E,PM(t,n,a,o),h=t.memoizedState,c!==n||E!==h||pc.current||$v?(typeof y=="function"&&(j5(t,r,y,n),h=t.memoizedState),(c=$v||yme(t,r,c,n,E,h,m))?(w||typeof a.UNSAFE_componentWillMount!="function"&&typeof a.componentWillMount!="function"||(typeof a.componentWillMount=="function"&&a.componentWillMount(),typeof a.UNSAFE_componentWillMount=="function"&&a.UNSAFE_componentWillMount()),typeof a.componentDidMount=="function"&&(t.flags|=4)):(typeof a.componentDidMount=="function"&&(t.flags|=4),t.memoizedProps=n,t.memoizedState=h),a.props=n,a.state=h,a.context=m,n=c):(typeof a.componentDidMount=="function"&&(t.flags|=4),n=!1)}else{a=t.stateNode,Uge(e,t),c=t.memoizedProps,m=t.type===t.elementType?c:cd(t.type,c),a.props=m,w=t.pendingProps,E=a.context,h=r.contextType,typeof h=="object"&&h!==null?h=Wp(h):(h=fc(r)?r_:iu.current,h=kw(t,h));var A=r.getDerivedStateFromProps;(y=typeof A=="function"||typeof a.getSnapshotBeforeUpdate=="function")||typeof a.UNSAFE_componentWillReceiveProps!="function"&&typeof a.componentWillReceiveProps!="function"||(c!==w||E!==h)&&_me(t,a,n,h),$v=!1,E=t.memoizedState,a.state=E,PM(t,n,a,o);var P=t.memoizedState;c!==w||E!==P||pc.current||$v?(typeof A=="function"&&(j5(t,r,A,n),P=t.memoizedState),(m=$v||yme(t,r,m,n,E,P,h))?(y||typeof a.UNSAFE_componentWillUpdate!="function"&&typeof a.componentWillUpdate!="function"||(typeof a.componentWillUpdate=="function"&&a.componentWillUpdate(n,P,h),typeof a.UNSAFE_componentWillUpdate=="function"&&a.UNSAFE_componentWillUpdate(n,P,h)),typeof a.componentDidUpdate=="function"&&(t.flags|=4),typeof a.getSnapshotBeforeUpdate=="function"&&(t.flags|=256)):(typeof a.componentDidUpdate!="function"||c===e.memoizedProps&&E===e.memoizedState||(t.flags|=4),typeof a.getSnapshotBeforeUpdate!="function"||c===e.memoizedProps&&E===e.memoizedState||(t.flags|=256),t.memoizedProps=n,t.memoizedState=P),a.props=n,a.state=P,a.context=h,n=m):(typeof a.componentDidUpdate!="function"||c===e.memoizedProps&&E===e.memoizedState||(t.flags|=4),typeof a.getSnapshotBeforeUpdate!="function"||c===e.memoizedProps&&E===e.memoizedState||(t.flags|=256),n=!1)}return UG(e,t,r,n,i,o)}function UG(e,t,r,n,o,i){tve(e,t);var a=(t.flags&64)!==0;if(!n&&!a)return o&&dme(t,r,!1),pg(e,t,i);n=t.stateNode,$yt.current=t;var c=a&&typeof r.getDerivedStateFromError!="function"?null:n.render();return t.flags|=1,e!==null&&a?(t.child=q5(t,e.child,null,i),t.child=q5(t,null,c,i)):cc(e,t,c,i),t.memoizedState=n.state,o&&dme(t,r,!0),t.child}function Ame(e){var t=e.stateNode;t.pendingContext?fme(e,t.pendingContext,t.pendingContext!==t.context):t.context&&fme(e,t.context,!1),jG(e,t.containerInfo)}var d5={dehydrated:null,retryLane:0};function Ome(e,t,r){var n=t.pendingProps,o=Oa.current,i=!1,a;return(a=(t.flags&64)!==0)||(a=e!==null&&e.memoizedState===null?!1:(o&2)!==0),a?(i=!0,t.flags&=-65):e!==null&&e.memoizedState===null||n.fallback===void 0||n.unstable_avoidThisFallback===!0||(o|=1),Pa(Oa,o&1),e===null?(n.fallback!==void 0&&qG(t),e=n.children,o=n.fallback,i?(e=Pme(t,e,o,r),t.child.memoizedState={baseLanes:r},t.memoizedState=d5,e):typeof n.unstable_expectedLoadTime=="number"?(e=Pme(t,e,o,r),t.child.memoizedState={baseLanes:r},t.memoizedState=d5,t.lanes=33554432,e):(r=BH({mode:"visible",children:e},t.mode,r,null),r.return=t,t.child=r)):e.memoizedState!==null?i?(n=Nme(e,t,n.children,n.fallback,r),i=t.child,o=e.child.memoizedState,i.memoizedState=o===null?{baseLanes:r}:{baseLanes:o.baseLanes|r},i.childLanes=e.childLanes&~r,t.memoizedState=d5,n):(r=Dme(e,t,n.children,r),t.memoizedState=null,r):i?(n=Nme(e,t,n.children,n.fallback,r),i=t.child,o=e.child.memoizedState,i.memoizedState=o===null?{baseLanes:r}:{baseLanes:o.baseLanes|r},i.childLanes=e.childLanes&~r,t.memoizedState=d5,n):(r=Dme(e,t,n.children,r),t.memoizedState=null,r)}function Pme(e,t,r,n){var o=e.mode,i=e.child;return t={mode:"hidden",children:t},(o&2)===0&&i!==null?(i.childLanes=0,i.pendingProps=t):i=BH(t,o,0,null),r=Nw(r,o,n,null),i.return=e,r.return=e,i.sibling=r,e.child=i,r}function Dme(e,t,r,n){var o=e.child;return e=o.sibling,r=cy(o,{mode:"visible",children:r}),(t.mode&2)===0&&(r.lanes=n),r.return=t,r.sibling=null,e!==null&&(e.nextEffect=null,e.flags=8,t.firstEffect=t.lastEffect=e),t.child=r}function Nme(e,t,r,n,o){var i=t.mode,a=e.child;e=a.sibling;var c={mode:"hidden",children:r};return(i&2)===0&&t.child!==a?(r=t.child,r.childLanes=0,r.pendingProps=c,a=r.lastEffect,a!==null?(t.firstEffect=r.firstEffect,t.lastEffect=a,a.nextEffect=null):t.firstEffect=t.lastEffect=null):r=cy(a,c),e!==null?n=cy(e,n):(n=Nw(n,i,o,null),n.flags|=2),n.return=t,r.return=t,r.sibling=n,t.child=r,n}function Lme(e,t){e.lanes|=t;var r=e.alternate;r!==null&&(r.lanes|=t),Fge(e.return,t)}function uG(e,t,r,n,o,i){var a=e.memoizedState;a===null?e.memoizedState={isBackwards:t,rendering:null,renderingStartTime:0,last:n,tail:r,tailMode:o,lastEffect:i}:(a.isBackwards=t,a.rendering=null,a.renderingStartTime=0,a.last=n,a.tail=r,a.tailMode=o,a.lastEffect=i)}function kme(e,t,r){var n=t.pendingProps,o=n.revealOrder,i=n.tail;if(cc(e,t,n.children,r),n=Oa.current,(n&2)!==0)n=n&1|2,t.flags|=64;else{if(e!==null&&(e.flags&64)!==0)e:for(e=t.child;e!==null;){if(e.tag===13)e.memoizedState!==null&&Lme(e,r);else if(e.tag===19)Lme(e,r);else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break e;for(;e.sibling===null;){if(e.return===null||e.return===t)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}n&=1}if(Pa(Oa,n),(t.mode&2)===0)t.memoizedState=null;else switch(o){case"forwards":for(r=t.child,o=null;r!==null;)e=r.alternate,e!==null&&z5(e)===null&&(o=r),r=r.sibling;r=o,r===null?(o=t.child,t.child=null):(o=r.sibling,r.sibling=null),uG(t,!1,o,r,i,t.lastEffect);break;case"backwards":for(r=null,o=t.child,t.child=null;o!==null;){if(e=o.alternate,e!==null&&z5(e)===null){t.child=o;break}e=o.sibling,o.sibling=r,r=o,o=e}uG(t,!0,r,null,i,t.lastEffect);break;case"together":uG(t,!1,null,null,void 0,t.lastEffect);break;default:t.memoizedState=null}return t.child}function pg(e,t,r){if(e!==null&&(t.dependencies=e.dependencies),qM|=t.lanes,(r&t.childLanes)!==0){if(e!==null&&t.child!==e.child)throw Error(ur(153));if(t.child!==null){for(e=t.child,r=cy(e,e.pendingProps),t.child=r,r.return=t;e.sibling!==null;)e=e.sibling,r=r.sibling=cy(e,e.pendingProps),r.return=t;r.sibling=null}return t.child}return null}var rve,BG,nve,ove;rve=function(e,t){for(var r=t.child;r!==null;){if(r.tag===5||r.tag===6)e.appendChild(r.stateNode);else if(r.tag!==4&&r.child!==null){r.child.return=r,r=r.child;continue}if(r===t)break;for(;r.sibling===null;){if(r.return===null||r.return===t)return;r=r.return}r.sibling.return=r.return,r=r.sibling}};BG=function(){};nve=function(e,t,r,n){var o=e.memoizedProps;if(o!==n){e=t.stateNode,Q1(Mh.current);var i=null;switch(r){case"input":o=mG(e,o),n=mG(e,n),i=[];break;case"option":o=yG(e,o),n=yG(e,n),i=[];break;case"select":o=fa({},o,{value:void 0}),n=fa({},n,{value:void 0}),i=[];break;case"textarea":o=_G(e,o),n=_G(e,n),i=[];break;default:typeof o.onClick!="function"&&typeof n.onClick=="function"&&(e.onclick=P5)}wG(r,n);var a;r=null;for(m in o)if(!n.hasOwnProperty(m)&&o.hasOwnProperty(m)&&o[m]!=null)if(m==="style"){var c=o[m];for(a in c)c.hasOwnProperty(a)&&(r||(r={}),r[a]="")}else m!=="dangerouslySetInnerHTML"&&m!=="children"&&m!=="suppressContentEditableWarning"&&m!=="suppressHydrationWarning"&&m!=="autoFocus"&&(xM.hasOwnProperty(m)?i||(i=[]):(i=i||[]).push(m,null));for(m in n){var h=n[m];if(c=o!=null?o[m]:void 0,n.hasOwnProperty(m)&&h!==c&&(h!=null||c!=null))if(m==="style"){if(c){for(a in c)!c.hasOwnProperty(a)||h&&h.hasOwnProperty(a)||(r||(r={}),r[a]="");for(a in h)h.hasOwnProperty(a)&&c[a]!==h[a]&&(r||(r={}),r[a]=h[a])}else r||(i||(i=[]),i.push(m,r)),r=h;}else m==="dangerouslySetInnerHTML"?(h=h?h.__html:void 0,c=c?c.__html:void 0,h!=null&&c!==h&&(i=i||[]).push(m,h)):m==="children"?typeof h!="string"&&typeof h!="number"||(i=i||[]).push(m,""+h):m!=="suppressContentEditableWarning"&&m!=="suppressHydrationWarning"&&(xM.hasOwnProperty(m)?(h!=null&&m==="onScroll"&&Qi("scroll",e),i||c===h||(i=[])):typeof h=="object"&&h!==null&&h.$$typeof===lH?h.toString():(i=i||[]).push(m,h))}r&&(i=i||[]).push("style",r);var m=i;(t.updateQueue=m)&&(t.flags|=4)}};ove=function(e,t,r,n){r!==n&&(t.flags|=4)};function tM(e,t){if(!Ch)switch(e.tailMode){case"hidden":t=e.tail;for(var r=null;t!==null;)t.alternate!==null&&(r=t),t=t.sibling;r===null?e.tail=null:r.sibling=null;break;case"collapsed":r=e.tail;for(var n=null;r!==null;)r.alternate!==null&&(n=r),r=r.sibling;n===null?t||e.tail===null?e.tail=null:e.tail.sibling=null:n.sibling=null}}function Yyt(e,t,r){var n=t.pendingProps;switch(t.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return null;case 1:return fc(t.type)&&N5(),null;case 3:return jw(),ea(pc),ea(iu),OH(),n=t.stateNode,n.pendingContext&&(n.context=n.pendingContext,n.pendingContext=null),(e===null||e.child===null)&&(f5(t)?t.flags|=4:n.hydrate||(t.flags|=256)),BG(t),null;case 5:AH(t);var o=Q1(NM.current);if(r=t.type,e!==null&&t.stateNode!=null)nve(e,t,r,n,o),e.ref!==t.ref&&(t.flags|=128);else{if(!n){if(t.stateNode===null)throw Error(ur(166));return null}if(e=Q1(Mh.current),f5(t)){n=t.stateNode,r=t.type;var i=t.memoizedProps;switch(n[Kv]=t,n[D5]=i,r){case"dialog":Qi("cancel",n),Qi("close",n);break;case"iframe":case"object":case"embed":Qi("load",n);break;case"video":case"audio":for(e=0;e<aM.length;e++)Qi(aM[e],n);break;case"source":Qi("error",n);break;case"img":case"image":case"link":Qi("error",n),Qi("load",n);break;case"details":Qi("toggle",n);break;case"input":jhe(n,i),Qi("invalid",n);break;case"select":n._wrapperState={wasMultiple:!!i.multiple},Qi("invalid",n);break;case"textarea":zhe(n,i),Qi("invalid",n)}wG(r,i),e=null;for(var a in i)i.hasOwnProperty(a)&&(o=i[a],a==="children"?typeof o=="string"?n.textContent!==o&&(e=["children",o]):typeof o=="number"&&n.textContent!==""+o&&(e=["children",""+o]):xM.hasOwnProperty(a)&&o!=null&&a==="onScroll"&&Qi("scroll",n));switch(r){case"input":n5(n),qhe(n,i,!0);break;case"textarea":n5(n),Fhe(n);break;case"select":case"option":break;default:typeof i.onClick=="function"&&(n.onclick=P5)}n=e,t.updateQueue=n,n!==null&&(t.flags|=4)}else{switch(a=o.nodeType===9?o:o.ownerDocument,e===bG.html&&(e=Xme(r)),e===bG.html?r==="script"?(e=a.createElement("div"),e.innerHTML="<script></script>",e=e.removeChild(e.firstChild)):typeof n.is=="string"?e=a.createElement(r,{is:n.is}):(e=a.createElement(r),r==="select"&&(a=e,n.multiple?a.multiple=!0:n.size&&(a.size=n.size))):e=a.createElementNS(e,r),e[Kv]=t,e[D5]=n,rve(e,t,!1,!1),t.stateNode=e,a=EG(r,n),r){case"dialog":Qi("cancel",e),Qi("close",e),o=n;break;case"iframe":case"object":case"embed":Qi("load",e),o=n;break;case"video":case"audio":for(o=0;o<aM.length;o++)Qi(aM[o],e);o=n;break;case"source":Qi("error",e),o=n;break;case"img":case"image":case"link":Qi("error",e),Qi("load",e),o=n;break;case"details":Qi("toggle",e),o=n;break;case"input":jhe(e,n),o=mG(e,n),Qi("invalid",e);break;case"option":o=yG(e,n);break;case"select":e._wrapperState={wasMultiple:!!n.multiple},o=fa({},n,{value:void 0}),Qi("invalid",e);break;case"textarea":zhe(e,n),o=_G(e,n),Qi("invalid",e);break;default:o=n}wG(r,o);var c=o;for(i in c)if(c.hasOwnProperty(i)){var h=c[i];i==="style"?ege(e,h):i==="dangerouslySetInnerHTML"?(h=h?h.__html:void 0,h!=null&&Jme(e,h)):i==="children"?typeof h=="string"?(r!=="textarea"||h!=="")&&wM(e,h):typeof h=="number"&&wM(e,""+h):i!=="suppressContentEditableWarning"&&i!=="suppressHydrationWarning"&&i!=="autoFocus"&&(xM.hasOwnProperty(i)?h!=null&&i==="onScroll"&&Qi("scroll",e):h!=null&&rH(e,i,h,a))}switch(r){case"input":n5(e),qhe(e,n,!1);break;case"textarea":n5(e),Fhe(e);break;case"option":n.value!=null&&e.setAttribute("value",""+ay(n.value));break;case"select":e.multiple=!!n.multiple,i=n.value,i!=null?Tw(e,!!n.multiple,i,!1):n.defaultValue!=null&&Tw(e,!!n.multiple,n.defaultValue,!0);break;default:typeof o.onClick=="function"&&(e.onclick=P5)}Pge(r,n)&&(t.flags|=4)}t.ref!==null&&(t.flags|=128)}return null;case 6:if(e&&t.stateNode!=null)ove(e,t,e.memoizedProps,n);else{if(typeof n!="string"&&t.stateNode===null)throw Error(ur(166));r=Q1(NM.current),Q1(Mh.current),f5(t)?(n=t.stateNode,r=t.memoizedProps,n[Kv]=t,n.nodeValue!==r&&(t.flags|=4)):(n=(r.nodeType===9?r:r.ownerDocument).createTextNode(n),n[Kv]=t,t.stateNode=n)}return null;case 13:return ea(Oa),n=t.memoizedState,(t.flags&64)!==0?(t.lanes=r,t):(n=n!==null,r=!1,e===null?t.memoizedProps.fallback!==void 0&&f5(t):r=e.memoizedState!==null,n&&!r&&(t.mode&2)!==0&&(e===null&&t.memoizedProps.unstable_avoidThisFallback!==!0||(Oa.current&1)!==0?bl===0&&(bl=3):((bl===0||bl===3)&&(bl=4),Du===null||(qM&134217727)===0&&(Uw&134217727)===0||Pw(Du,ou))),(n||r)&&(t.flags|=4),null);case 4:return jw(),BG(t),e===null&&Cge(t.stateNode.containerInfo),null;case 10:return MH(t),null;case 17:return fc(t.type)&&N5(),null;case 19:if(ea(Oa),n=t.memoizedState,n===null)return null;if(i=(t.flags&64)!==0,a=n.rendering,a===null){if(i)tM(n,!1);else{if(bl!==0||e!==null&&(e.flags&64)!==0)for(e=t.child;e!==null;){if(a=z5(e),a!==null){for(t.flags|=64,tM(n,!1),i=a.updateQueue,i!==null&&(t.updateQueue=i,t.flags|=4),n.lastEffect===null&&(t.firstEffect=null),t.lastEffect=n.lastEffect,n=r,r=t.child;r!==null;)i=r,e=n,i.flags&=2,i.nextEffect=null,i.firstEffect=null,i.lastEffect=null,a=i.alternate,a===null?(i.childLanes=0,i.lanes=e,i.child=null,i.memoizedProps=null,i.memoizedState=null,i.updateQueue=null,i.dependencies=null,i.stateNode=null):(i.childLanes=a.childLanes,i.lanes=a.lanes,i.child=a.child,i.memoizedProps=a.memoizedProps,i.memoizedState=a.memoizedState,i.updateQueue=a.updateQueue,i.type=a.type,e=a.dependencies,i.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext}),r=r.sibling;return Pa(Oa,Oa.current&1|2),t.child}e=e.sibling}n.tail!==null&&nu()>YG&&(t.flags|=64,i=!0,tM(n,!1),t.lanes=33554432)}}else{if(!i)if(e=z5(a),e!==null){if(t.flags|=64,i=!0,r=e.updateQueue,r!==null&&(t.updateQueue=r,t.flags|=4),tM(n,!0),n.tail===null&&n.tailMode==="hidden"&&!a.alternate&&!Ch)return t=t.lastEffect=n.lastEffect,t!==null&&(t.nextEffect=null),null}else 2*nu()-n.renderingStartTime>YG&&r!==1073741824&&(t.flags|=64,i=!0,tM(n,!1),t.lanes=33554432);n.isBackwards?(a.sibling=t.child,t.child=a):(r=n.last,r!==null?r.sibling=a:t.child=a,n.last=a)}return n.tail!==null?(r=n.tail,n.rendering=r,n.tail=r.sibling,n.lastEffect=t.lastEffect,n.renderingStartTime=nu(),r.sibling=null,t=Oa.current,Pa(Oa,i?t&1|2:t&1),r):null;case 23:case 24:return FH(),e!==null&&e.memoizedState!==null!=(t.memoizedState!==null)&&n.mode!=="unstable-defer-without-hiding"&&(t.flags|=4),null}throw Error(ur(156,t.tag))}function Zyt(e){switch(e.tag){case 1:fc(e.type)&&N5();var t=e.flags;return t&4096?(e.flags=t&-4097|64,e):null;case 3:if(jw(),ea(pc),ea(iu),OH(),t=e.flags,(t&64)!==0)throw Error(ur(285));return e.flags=t&-4097|64,e;case 5:return AH(e),null;case 13:return ea(Oa),t=e.flags,t&4096?(e.flags=t&-4097|64,e):null;case 19:return ea(Oa),null;case 4:return jw(),null;case 10:return MH(e),null;case 23:case 24:return FH(),null;default:return null}}function RH(e,t){try{var r="",n=t;do r+=Avt(n),n=n.return;while(n);var o=r}catch(i){o=`
Error generating stack: `+i.message+`
`+i.stack}return{value:e,source:t,stack:o}}function VG(e,t){try{console.error(t.value)}catch(r){setTimeout(function(){throw r})}}var Kyt=typeof WeakMap=="function"?WeakMap:Map;function ive(e,t,r){r=ty(-1,r),r.tag=3,r.payload={element:null};var n=t.value;return r.callback=function(){W5||(W5=!0,ZG=n),VG(e,t)},r}function ave(e,t,r){r=ty(-1,r),r.tag=3;var n=e.type.getDerivedStateFromError;if(typeof n=="function"){var o=t.value;r.payload=function(){return VG(e,t),n(o)}}var i=e.stateNode;return i!==null&&typeof i.componentDidCatch=="function"&&(r.callback=function(){typeof n!="function"&&(Ih===null?Ih=new Set([this]):Ih.add(this),VG(e,t));var a=t.stack;this.componentDidCatch(t.value,{componentStack:a!==null?a:""})}),r}var Xyt=typeof WeakSet=="function"?WeakSet:Set;function Rme(e){var t=e.ref;if(t!==null)if(typeof t=="function")try{t(null)}catch(r){iy(e,r)}else t.current=null}function Jyt(e,t){switch(t.tag){case 0:case 11:case 15:case 22:return;case 1:if(t.flags&256&&e!==null){var r=e.memoizedProps,n=e.memoizedState;e=t.stateNode,t=e.getSnapshotBeforeUpdate(t.elementType===t.type?r:cd(t.type,r),n),e.__reactInternalSnapshotBeforeUpdate=t}return;case 3:t.flags&256&&EH(t.stateNode.containerInfo);return;case 5:case 6:case 4:case 17:return}throw Error(ur(163))}function Qyt(e,t,r){switch(r.tag){case 0:case 11:case 15:case 22:if(t=r.updateQueue,t=t!==null?t.lastEffect:null,t!==null){e=t=t.next;do{if((e.tag&3)===3){var n=e.create;e.destroy=n()}e=e.next}while(e!==t)}if(t=r.updateQueue,t=t!==null?t.lastEffect:null,t!==null){e=t=t.next;do{var o=e;n=o.next,o=o.tag,(o&4)!==0&&(o&1)!==0&&(mve(r,e),s0t(r,e)),e=n}while(e!==t)}return;case 1:e=r.stateNode,r.flags&4&&(t===null?e.componentDidMount():(n=r.elementType===r.type?t.memoizedProps:cd(r.type,t.memoizedProps),e.componentDidUpdate(n,t.memoizedState,e.__reactInternalSnapshotBeforeUpdate))),t=r.updateQueue,t!==null&&vme(r,t,e);return;case 3:if(t=r.updateQueue,t!==null){if(e=null,r.child!==null)switch(r.child.tag){case 5:e=r.child.stateNode;break;case 1:e=r.child.stateNode}vme(r,t,e)}return;case 5:e=r.stateNode,t===null&&r.flags&4&&Pge(r.type,r.memoizedProps)&&e.focus();return;case 6:return;case 4:return;case 12:return;case 13:r.memoizedState===null&&(r=r.alternate,r!==null&&(r=r.memoizedState,r!==null&&(r=r.dehydrated,r!==null&&cge(r))));return;case 19:case 17:case 20:case 21:case 23:case 24:return}throw Error(ur(163))}function jme(e,t){for(var r=e;;){if(r.tag===5){var n=r.stateNode;if(t)n=n.style,typeof n.setProperty=="function"?n.setProperty("display","none","important"):n.display="none";else{n=r.stateNode;var o=r.memoizedProps.style;o=o!=null&&o.hasOwnProperty("display")?o.display:null,n.style.display=Qme("display",o)}}else if(r.tag===6)r.stateNode.nodeValue=t?"":r.memoizedProps;else if((r.tag!==23&&r.tag!==24||r.memoizedState===null||r===e)&&r.child!==null){r.child.return=r,r=r.child;continue}if(r===e)break;for(;r.sibling===null;){if(r.return===null||r.return===e)return;r=r.return}r.sibling.return=r.return,r=r.sibling}}function qme(e,t){if(t_&&typeof t_.onCommitFiberUnmount=="function")try{t_.onCommitFiberUnmount(SH,t)}catch(i){}switch(t.tag){case 0:case 11:case 14:case 15:case 22:if(e=t.updateQueue,e!==null&&(e=e.lastEffect,e!==null)){var r=e=e.next;do{var n=r,o=n.destroy;if(n=n.tag,o!==void 0)if((n&4)!==0)mve(t,r);else{n=t;try{o()}catch(i){iy(n,i)}}r=r.next}while(r!==e)}break;case 1:if(Rme(t),e=t.stateNode,typeof e.componentWillUnmount=="function")try{e.props=t.memoizedProps,e.state=t.memoizedState,e.componentWillUnmount()}catch(i){iy(t,i)}break;case 5:Rme(t);break;case 4:sve(e,t)}}function zme(e){e.alternate=null,e.child=null,e.dependencies=null,e.firstEffect=null,e.lastEffect=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.return=null,e.updateQueue=null}function Fme(e){return e.tag===5||e.tag===3||e.tag===4}function Ume(e){e:{for(var t=e.return;t!==null;){if(Fme(t))break e;t=t.return}throw Error(ur(160))}var r=t;switch(t=r.stateNode,r.tag){case 5:var n=!1;break;case 3:t=t.containerInfo,n=!0;break;case 4:t=t.containerInfo,n=!0;break;default:throw Error(ur(161))}r.flags&16&&(wM(t,""),r.flags&=-17);e:t:for(r=e;;){for(;r.sibling===null;){if(r.return===null||Fme(r.return)){r=null;break e}r=r.return}for(r.sibling.return=r.return,r=r.sibling;r.tag!==5&&r.tag!==6&&r.tag!==18;){if(r.flags&2||r.child===null||r.tag===4)continue t;r.child.return=r,r=r.child}if(!(r.flags&2)){r=r.stateNode;break e}}n?GG(e,r,t):HG(e,r,t)}function GG(e,t,r){var n=e.tag,o=n===5||n===6;if(o)e=o?e.stateNode:e.stateNode.instance,t?r.nodeType===8?r.parentNode.insertBefore(e,t):r.insertBefore(e,t):(r.nodeType===8?(t=r.parentNode,t.insertBefore(e,r)):(t=r,t.appendChild(e)),r=r._reactRootContainer,r!=null||t.onclick!==null||(t.onclick=P5));else if(n!==4&&(e=e.child,e!==null))for(GG(e,t,r),e=e.sibling;e!==null;)GG(e,t,r),e=e.sibling}function HG(e,t,r){var n=e.tag,o=n===5||n===6;if(o)e=o?e.stateNode:e.stateNode.instance,t?r.insertBefore(e,t):r.appendChild(e);else if(n!==4&&(e=e.child,e!==null))for(HG(e,t,r),e=e.sibling;e!==null;)HG(e,t,r),e=e.sibling}function sve(e,t){for(var r=t,n=!1,o,i;;){if(!n){n=r.return;e:for(;;){if(n===null)throw Error(ur(160));switch(o=n.stateNode,n.tag){case 5:i=!1;break e;case 3:o=o.containerInfo,i=!0;break e;case 4:o=o.containerInfo,i=!0;break e}n=n.return}n=!0}if(r.tag===5||r.tag===6){e:for(var a=e,c=r,h=c;;)if(qme(a,h),h.child!==null&&h.tag!==4)h.child.return=h,h=h.child;else{if(h===c)break e;for(;h.sibling===null;){if(h.return===null||h.return===c)break e;h=h.return}h.sibling.return=h.return,h=h.sibling}i?(a=o,c=r.stateNode,a.nodeType===8?a.parentNode.removeChild(c):a.removeChild(c)):o.removeChild(r.stateNode)}else if(r.tag===4){if(r.child!==null){o=r.stateNode.containerInfo,i=!0,r.child.return=r,r=r.child;continue}}else if(qme(e,r),r.child!==null){r.child.return=r,r=r.child;continue}if(r===t)break;for(;r.sibling===null;){if(r.return===null||r.return===t)return;r=r.return,r.tag===4&&(n=!1)}r.sibling.return=r.return,r=r.sibling}}function cG(e,t){switch(t.tag){case 0:case 11:case 14:case 15:case 22:var r=t.updateQueue;if(r=r!==null?r.lastEffect:null,r!==null){var n=r=r.next;do(n.tag&3)===3&&(e=n.destroy,n.destroy=void 0,e!==void 0&&e()),n=n.next;while(n!==r)}return;case 1:return;case 5:if(r=t.stateNode,r!=null){n=t.memoizedProps;var o=e!==null?e.memoizedProps:n;e=t.type;var i=t.updateQueue;if(t.updateQueue=null,i!==null){for(r[D5]=n,e==="input"&&n.type==="radio"&&n.name!=null&&Zme(r,n),EG(e,o),t=EG(e,n),o=0;o<i.length;o+=2){var a=i[o],c=i[o+1];a==="style"?ege(r,c):a==="dangerouslySetInnerHTML"?Jme(r,c):a==="children"?wM(r,c):rH(r,a,c,t)}switch(e){case"input":gG(r,n);break;case"textarea":Kme(r,n);break;case"select":e=r._wrapperState.wasMultiple,r._wrapperState.wasMultiple=!!n.multiple,i=n.value,i!=null?Tw(r,!!n.multiple,i,!1):e!==!!n.multiple&&(n.defaultValue!=null?Tw(r,!!n.multiple,n.defaultValue,!0):Tw(r,!!n.multiple,n.multiple?[]:"",!1))}}}return;case 6:if(t.stateNode===null)throw Error(ur(162));t.stateNode.nodeValue=t.memoizedProps;return;case 3:r=t.stateNode,r.hydrate&&(r.hydrate=!1,cge(r.containerInfo));return;case 12:return;case 13:t.memoizedState!==null&&(zH=nu(),jme(t.child,!0)),Bme(t);return;case 19:Bme(t);return;case 17:return;case 23:case 24:jme(t,t.memoizedState!==null);return}throw Error(ur(163))}function Bme(e){var t=e.updateQueue;if(t!==null){e.updateQueue=null;var r=e.stateNode;r===null&&(r=e.stateNode=new Xyt),t.forEach(function(n){var o=c0t.bind(null,e,n);r.has(n)||(r.add(n),n.then(o,o))})}}function e0t(e,t){return e!==null&&(e=e.memoizedState,e===null||e.dehydrated!==null)?(t=t.memoizedState,t!==null&&t.dehydrated===null):!1}var t0t=Math.ceil,H5=a_.ReactCurrentDispatcher,jH=a_.ReactCurrentOwner,kn=0,Du=null,Ns=null,ou=0,o_=0,WG=py(0),bl=0,iL=null,Fw=0,qM=0,Uw=0,qH=0,$G=null,zH=0,YG=1/0;function Bw(){YG=nu()+500}var Lr=null,W5=!1,ZG=null,Ih=null,uy=!1,yM=null,sM=90,KG=[],XG=[],fg=null,_M=0,JG=null,x5=-1,ug=0,w5=0,bM=null,E5=!1;function pp(){return(kn&48)!==0?nu():x5!==-1?x5:x5=nu()}function ny(e){if(e=e.mode,(e&2)===0)return 1;if((e&4)===0)return Rw()===99?1:2;if(ug===0&&(ug=Fw),Byt.transition!==0){w5!==0&&(w5=$G!==null?$G.pendingLanes:0),e=ug;var t=4186112&~w5;return t&=-t,t===0&&(e=4186112&~e,t=e&-e,t===0&&(t=8192)),t}return e=Rw(),(kn&4)!==0&&e===98?e=A5(12,ug):(e=Hvt(e),e=A5(e,ug)),e}function oy(e,t,r){if(50<_M)throw _M=0,JG=null,Error(ur(185));if(e=aL(e,t),e===null)return null;J5(e,t,r),e===Du&&(Uw|=t,bl===4&&Pw(e,ou));var n=Rw();t===1?(kn&8)!==0&&(kn&48)===0?QG(e):($p(e,r),kn===0&&(Bw(),Ah())):((kn&4)===0||n!==98&&n!==99||(fg===null?fg=new Set([e]):fg.add(e)),$p(e,r)),$G=e}function aL(e,t){e.lanes|=t;var r=e.alternate;for(r!==null&&(r.lanes|=t),r=e,e=e.return;e!==null;)e.childLanes|=t,r=e.alternate,r!==null&&(r.childLanes|=t),r=e,e=e.return;return r.tag===3?r.stateNode:null}function $p(e,t){for(var r=e.callbackNode,n=e.suspendedLanes,o=e.pingedLanes,i=e.expirationTimes,a=e.pendingLanes;0<a;){var c=31-sy(a),h=1<<c,m=i[c];if(m===-1){if((h&n)===0||(h&o)!==0){m=t,gw(h);var y=Fi;i[c]=10<=y?m+250:6<=y?m+5e3:-1}}else m<=t&&(e.expiredLanes|=h);a&=~h}if(n=IM(e,e===Du?ou:0),t=Fi,n===0)r!==null&&(r!==iG&&LG(r),e.callbackNode=null,e.callbackPriority=0);else{if(r!==null){if(e.callbackPriority===t)return;r!==iG&&LG(r)}t===15?(r=QG.bind(null,e),lg===null?(lg=[r],b5=TH(nL,zge)):lg.push(r),r=iG):t===14?r=OM(99,QG.bind(null,e)):(r=Wvt(t),r=OM(r,lve.bind(null,e))),e.callbackPriority=t,e.callbackNode=r}}function lve(e){if(x5=-1,w5=ug=0,(kn&48)!==0)throw Error(ur(327));var t=e.callbackNode;if(fy()&&e.callbackNode!==t)return null;var r=IM(e,e===Du?ou:0);if(r===0)return null;var n=r,o=kn;kn|=16;var i=fve();(Du!==e||ou!==n)&&(Bw(),Dw(e,n));do try{o0t();break}catch(c){pve(e,c)}while(!0);if(IH(),H5.current=i,kn=o,Ns!==null?n=0:(Du=null,ou=0,n=bl),(Fw&Uw)!==0)Dw(e,0);else if(n!==0){if(n===2&&(kn|=64,e.hydrate&&(e.hydrate=!1,EH(e.containerInfo)),r=vge(e),r!==0&&(n=lM(e,r))),n===1)throw t=iL,Dw(e,0),Pw(e,r),$p(e,nu()),t;switch(e.finishedWork=e.current.alternate,e.finishedLanes=r,n){case 0:case 1:throw Error(ur(345));case 2:Z1(e);break;case 3:if(Pw(e,r),(r&62914560)===r&&(n=zH+500-nu(),10<n)){if(IM(e,0)!==0)break;if(o=e.suspendedLanes,(o&r)!==r){pp(),e.pingedLanes|=e.suspendedLanes&o;break}e.timeoutHandle=ume(Z1.bind(null,e),n);break}Z1(e);break;case 4:if(Pw(e,r),(r&4186112)===r)break;for(n=e.eventTimes,o=-1;0<r;){var a=31-sy(r);i=1<<a,a=n[a],a>o&&(o=a),r&=~i}if(r=o,r=nu()-r,r=(120>r?120:480>r?480:1080>r?1080:1920>r?1920:3e3>r?3e3:4320>r?4320:1960*t0t(r/1960))-r,10<r){e.timeoutHandle=ume(Z1.bind(null,e),r);break}Z1(e);break;case 5:Z1(e);break;default:throw Error(ur(329))}}return $p(e,nu()),e.callbackNode===t?lve.bind(null,e):null}function Pw(e,t){for(t&=~qH,t&=~Uw,e.suspendedLanes|=t,e.pingedLanes&=~t,e=e.expirationTimes;0<t;){var r=31-sy(t),n=1<<r;e[r]=-1,t&=~n}}function QG(e){if((kn&48)!==0)throw Error(ur(327));if(fy(),e===Du&&(e.expiredLanes&ou)!==0){var t=ou,r=lM(e,t);(Fw&Uw)!==0&&(t=IM(e,t),r=lM(e,t))}else t=IM(e,0),r=lM(e,t);if(e.tag!==0&&r===2&&(kn|=64,e.hydrate&&(e.hydrate=!1,EH(e.containerInfo)),t=vge(e),t!==0&&(r=lM(e,t))),r===1)throw r=iL,Dw(e,0),Pw(e,t),$p(e,nu()),r;return e.finishedWork=e.current.alternate,e.finishedLanes=t,Z1(e),$p(e,nu()),null}function r0t(){if(fg!==null){var e=fg;fg=null,e.forEach(function(t){t.expiredLanes|=24&t.pendingLanes,$p(t,nu())})}Ah()}function uve(e,t){var r=kn;kn|=1;try{return e(t)}finally{kn=r,kn===0&&(Bw(),Ah())}}function cve(e,t){var r=kn;kn&=-2,kn|=8;try{return e(t)}finally{kn=r,kn===0&&(Bw(),Ah())}}function h5(e,t){Pa(WG,o_),o_|=t,Fw|=t}function FH(){o_=WG.current,ea(WG)}function Dw(e,t){e.finishedWork=null,e.finishedLanes=0;var r=e.timeoutHandle;if(r!==-1&&(e.timeoutHandle=-1,Ryt(r)),Ns!==null)for(r=Ns.return;r!==null;){var n=r;switch(n.tag){case 1:n=n.type.childContextTypes,n!=null&&N5();break;case 3:jw(),ea(pc),ea(iu),OH();break;case 5:AH(n);break;case 4:jw();break;case 13:ea(Oa);break;case 19:ea(Oa);break;case 10:MH(n);break;case 23:case 24:FH()}r=r.return}Du=e,Ns=cy(e.current,null),ou=o_=Fw=t,bl=0,iL=null,qH=Uw=qM=0}function pve(e,t){do{var r=Ns;try{if(IH(),gM.current=G5,F5){for(var n=Wa.memoizedState;n!==null;){var o=n.queue;o!==null&&(o.pending=null),n=n.next}F5=!1}if(LM=0,_l=ru=Wa=null,vM=!1,jH.current=null,r===null||r.return===null){bl=1,iL=t,Ns=null;break}e:{var i=e,a=r.return,c=r,h=t;if(t=ou,c.flags|=2048,c.firstEffect=c.lastEffect=null,h!==null&&typeof h=="object"&&typeof h.then=="function"){var m=h;if((c.mode&2)===0){var y=c.alternate;y?(c.updateQueue=y.updateQueue,c.memoizedState=y.memoizedState,c.lanes=y.lanes):(c.updateQueue=null,c.memoizedState=null)}var w=(Oa.current&1)!==0,E=a;do{var A;if(A=E.tag===13){var P=E.memoizedState;if(P!==null)A=P.dehydrated!==null;else{var j=E.memoizedProps;A=j.fallback===void 0?!1:j.unstable_avoidThisFallback!==!0?!0:!w}}if(A){var D=E.updateQueue;if(D===null){var k=new Set;k.add(m),E.updateQueue=k}else D.add(m);if((E.mode&2)===0){if(E.flags|=64,c.flags|=16384,c.flags&=-2981,c.tag===1)if(c.alternate===null)c.tag=17;else{var z=ty(-1,1);z.tag=2,ry(c,z)}c.lanes|=1;break e}h=void 0,c=t;var V=i.pingCache;if(V===null?(V=i.pingCache=new Kyt,h=new Set,V.set(m,h)):(h=V.get(m),h===void 0&&(h=new Set,V.set(m,h))),!h.has(c)){h.add(c);var G=u0t.bind(null,i,m,c);m.then(G,G)}E.flags|=4096,E.lanes=t;break e}E=E.return}while(E!==null);h=Error((Sw(c.type)||"A React component")+` suspended while rendering, but no fallback UI was specified.

Add a <Suspense fallback=...> component higher in the tree to provide a loading indicator or placeholder to display.`)}bl!==5&&(bl=2),h=RH(h,c),E=a;do{switch(E.tag){case 3:i=h,E.flags|=4096,t&=-t,E.lanes|=t;var K=ive(E,i,t);gme(E,K);break e;case 1:i=h;var Z=E.type,te=E.stateNode;if((E.flags&64)===0&&(typeof Z.getDerivedStateFromError=="function"||te!==null&&typeof te.componentDidCatch=="function"&&(Ih===null||!Ih.has(te)))){E.flags|=4096,t&=-t,E.lanes|=t;var se=ave(E,i,t);gme(E,se);break e}}E=E.return}while(E!==null)}hve(r)}catch(le){t=le,Ns===r&&r!==null&&(Ns=r=r.return);continue}break}while(!0)}function fve(){var e=H5.current;return H5.current=G5,e===null?G5:e}function lM(e,t){var r=kn;kn|=16;var n=fve();Du===e&&ou===t||Dw(e,t);do try{n0t();break}catch(o){pve(e,o)}while(!0);if(IH(),kn=r,H5.current=n,Ns!==null)throw Error(ur(261));return Du=null,ou=0,bl}function n0t(){for(;Ns!==null;)dve(Ns)}function o0t(){for(;Ns!==null&&!zyt();)dve(Ns)}function dve(e){var t=gve(e.alternate,e,o_);e.memoizedProps=e.pendingProps,t===null?hve(e):Ns=t,jH.current=null}function hve(e){var t=e;do{var r=t.alternate;if(e=t.return,(t.flags&2048)===0){if(r=Yyt(r,t,o_),r!==null){Ns=r;return}if(r=t,r.tag!==24&&r.tag!==23||r.memoizedState===null||(o_&1073741824)!==0||(r.mode&4)===0){for(var n=0,o=r.child;o!==null;)n|=o.lanes|o.childLanes,o=o.sibling;r.childLanes=n}e!==null&&(e.flags&2048)===0&&(e.firstEffect===null&&(e.firstEffect=t.firstEffect),t.lastEffect!==null&&(e.lastEffect!==null&&(e.lastEffect.nextEffect=t.firstEffect),e.lastEffect=t.lastEffect),1<t.flags&&(e.lastEffect!==null?e.lastEffect.nextEffect=t:e.firstEffect=t,e.lastEffect=t))}else{if(r=Zyt(t),r!==null){r.flags&=2047,Ns=r;return}e!==null&&(e.firstEffect=e.lastEffect=null,e.flags|=2048)}if(t=t.sibling,t!==null){Ns=t;return}Ns=t=e}while(t!==null);bl===0&&(bl=5)}function Z1(e){var t=Rw();return n_(99,i0t.bind(null,e,t)),null}function i0t(e,t){do fy();while(yM!==null);if((kn&48)!==0)throw Error(ur(327));var r=e.finishedWork;if(r===null)return null;if(e.finishedWork=null,e.finishedLanes=0,r===e.current)throw Error(ur(177));e.callbackNode=null;var n=r.lanes|r.childLanes,o=n,i=e.pendingLanes&~o;e.pendingLanes=o,e.suspendedLanes=0,e.pingedLanes=0,e.expiredLanes&=o,e.mutableReadLanes&=o,e.entangledLanes&=o,o=e.entanglements;for(var a=e.eventTimes,c=e.expirationTimes;0<i;){var h=31-sy(i),m=1<<h;o[h]=0,a[h]=-1,c[h]=-1,i&=~m}if(fg!==null&&(n&24)===0&&fg.has(e)&&fg.delete(e),e===Du&&(Ns=Du=null,ou=0),1<r.flags?r.lastEffect!==null?(r.lastEffect.nextEffect=r,n=r.firstEffect):n=r:n=r.firstEffect,n!==null){if(o=kn,kn|=32,jH.current=null,rG=g5,a=nme(),AG(a)){if("selectionStart"in a)c={start:a.selectionStart,end:a.selectionEnd};else e:if(c=(c=a.ownerDocument)&&c.defaultView||window,(m=c.getSelection&&c.getSelection())&&m.rangeCount!==0){c=m.anchorNode,i=m.anchorOffset,h=m.focusNode,m=m.focusOffset;try{c.nodeType,h.nodeType}catch(le){c=null;break e}var y=0,w=-1,E=-1,A=0,P=0,j=a,D=null;t:for(;;){for(var k;j!==c||i!==0&&j.nodeType!==3||(w=y+i),j!==h||m!==0&&j.nodeType!==3||(E=y+m),j.nodeType===3&&(y+=j.nodeValue.length),(k=j.firstChild)!==null;)D=j,j=k;for(;;){if(j===a)break t;if(D===c&&++A===i&&(w=y),D===h&&++P===m&&(E=y),(k=j.nextSibling)!==null)break;j=D,D=j.parentNode}j=k}c=w===-1||E===-1?null:{start:w,end:E}}else c=null;c=c||{start:0,end:0}}else c=null;nG={focusedElem:a,selectionRange:c},g5=!1,bM=null,E5=!1,Lr=n;do try{a0t()}catch(le){if(Lr===null)throw Error(ur(330));iy(Lr,le),Lr=Lr.nextEffect}while(Lr!==null);bM=null,Lr=n;do try{for(a=e;Lr!==null;){var z=Lr.flags;if(z&16&&wM(Lr.stateNode,""),z&128){var V=Lr.alternate;if(V!==null){var G=V.ref;G!==null&&(typeof G=="function"?G(null):G.current=null)}}switch(z&1038){case 2:Ume(Lr),Lr.flags&=-3;break;case 6:Ume(Lr),Lr.flags&=-3,cG(Lr.alternate,Lr);break;case 1024:Lr.flags&=-1025;break;case 1028:Lr.flags&=-1025,cG(Lr.alternate,Lr);break;case 4:cG(Lr.alternate,Lr);break;case 8:c=Lr,sve(a,c);var K=c.alternate;zme(c),K!==null&&zme(K)}Lr=Lr.nextEffect}}catch(le){if(Lr===null)throw Error(ur(330));iy(Lr,le),Lr=Lr.nextEffect}while(Lr!==null);if(G=nG,V=nme(),z=G.focusedElem,a=G.selectionRange,V!==z&&z&&z.ownerDocument&&Tge(z.ownerDocument.documentElement,z)){for(a!==null&&AG(z)&&(V=a.start,G=a.end,G===void 0&&(G=V),"selectionStart"in z?(z.selectionStart=V,z.selectionEnd=Math.min(G,z.value.length)):(G=(V=z.ownerDocument||document)&&V.defaultView||window,G.getSelection&&(G=G.getSelection(),c=z.textContent.length,K=Math.min(a.start,c),a=a.end===void 0?K:Math.min(a.end,c),!G.extend&&K>a&&(c=a,a=K,K=c),c=rme(z,K),i=rme(z,a),c&&i&&(G.rangeCount!==1||G.anchorNode!==c.node||G.anchorOffset!==c.offset||G.focusNode!==i.node||G.focusOffset!==i.offset)&&(V=V.createRange(),V.setStart(c.node,c.offset),G.removeAllRanges(),K>a?(G.addRange(V),G.extend(i.node,i.offset)):(V.setEnd(i.node,i.offset),G.addRange(V)))))),V=[],G=z;G=G.parentNode;)G.nodeType===1&&V.push({element:G,left:G.scrollLeft,top:G.scrollTop});for(typeof z.focus=="function"&&z.focus(),z=0;z<V.length;z++)G=V[z],G.element.scrollLeft=G.left,G.element.scrollTop=G.top}g5=!!rG,nG=rG=null,e.current=r,Lr=n;do try{for(z=e;Lr!==null;){var Z=Lr.flags;if(Z&36&&Qyt(z,Lr.alternate,Lr),Z&128){V=void 0;var te=Lr.ref;if(te!==null){var se=Lr.stateNode;switch(Lr.tag){case 5:V=se;break;default:V=se}typeof te=="function"?te(V):te.current=V}}Lr=Lr.nextEffect}}catch(le){if(Lr===null)throw Error(ur(330));iy(Lr,le),Lr=Lr.nextEffect}while(Lr!==null);Lr=null,Uyt(),kn=o}else e.current=r;if(uy)uy=!1,yM=e,sM=t;else for(Lr=n;Lr!==null;)t=Lr.nextEffect,Lr.nextEffect=null,Lr.flags&8&&(Z=Lr,Z.sibling=null,Z.stateNode=null),Lr=t;if(n=e.pendingLanes,n===0&&(Ih=null),n===1?e===JG?_M++:(_M=0,JG=e):_M=0,r=r.stateNode,t_&&typeof t_.onCommitFiberRoot=="function")try{t_.onCommitFiberRoot(SH,r,void 0,(r.current.flags&64)===64)}catch(le){}if($p(e,nu()),W5)throw W5=!1,e=ZG,ZG=null,e;return(kn&8)!==0||Ah(),null}function a0t(){for(;Lr!==null;){var e=Lr.alternate;E5||bM===null||((Lr.flags&8)!==0?Vhe(Lr,bM)&&(E5=!0):Lr.tag===13&&e0t(e,Lr)&&Vhe(Lr,bM)&&(E5=!0));var t=Lr.flags;(t&256)!==0&&Jyt(e,Lr),(t&512)===0||uy||(uy=!0,OM(97,function(){return fy(),null})),Lr=Lr.nextEffect}}function fy(){if(sM!==90){var e=97<sM?97:sM;return sM=90,n_(e,l0t)}return!1}function s0t(e,t){KG.push(t,e),uy||(uy=!0,OM(97,function(){return fy(),null}))}function mve(e,t){XG.push(t,e),uy||(uy=!0,OM(97,function(){return fy(),null}))}function l0t(){if(yM===null)return!1;var e=yM;if(yM=null,(kn&48)!==0)throw Error(ur(331));var t=kn;kn|=32;var r=XG;XG=[];for(var n=0;n<r.length;n+=2){var o=r[n],i=r[n+1],a=o.destroy;if(o.destroy=void 0,typeof a=="function")try{a()}catch(h){if(i===null)throw Error(ur(330));iy(i,h)}}for(r=KG,KG=[],n=0;n<r.length;n+=2){o=r[n],i=r[n+1];try{var c=o.create;o.destroy=c()}catch(h){if(i===null)throw Error(ur(330));iy(i,h)}}for(c=e.current.firstEffect;c!==null;)e=c.nextEffect,c.nextEffect=null,c.flags&8&&(c.sibling=null,c.stateNode=null),c=e;return kn=t,Ah(),!0}function Vme(e,t,r){t=RH(r,t),t=ive(e,t,1),ry(e,t),t=pp(),e=aL(e,1),e!==null&&(J5(e,1,t),$p(e,t))}function iy(e,t){if(e.tag===3)Vme(e,e,t);else for(var r=e.return;r!==null;){if(r.tag===3){Vme(r,e,t);break}else if(r.tag===1){var n=r.stateNode;if(typeof r.type.getDerivedStateFromError=="function"||typeof n.componentDidCatch=="function"&&(Ih===null||!Ih.has(n))){e=RH(t,e);var o=ave(r,e,1);if(ry(r,o),o=pp(),r=aL(r,1),r!==null)J5(r,1,o),$p(r,o);else if(typeof n.componentDidCatch=="function"&&(Ih===null||!Ih.has(n)))try{n.componentDidCatch(t,e)}catch(i){}break}}r=r.return}}function u0t(e,t,r){var n=e.pingCache;n!==null&&n.delete(t),t=pp(),e.pingedLanes|=e.suspendedLanes&r,Du===e&&(ou&r)===r&&(bl===4||bl===3&&(ou&62914560)===ou&&500>nu()-zH?Dw(e,0):qH|=r),$p(e,t)}function c0t(e,t){var r=e.stateNode;r!==null&&r.delete(t),t=0,t===0&&(t=e.mode,(t&2)===0?t=1:(t&4)===0?t=Rw()===99?1:2:(ug===0&&(ug=Fw),t=vw(62914560&~ug),t===0&&(t=4194304))),r=pp(),e=aL(e,t),e!==null&&(J5(e,t,r),$p(e,r))}var gve;gve=function(e,t,r){var n=t.lanes;if(e!==null){if(e.memoizedProps!==t.pendingProps||pc.current)pd=!0;else if((r&n)!==0)pd=(e.flags&16384)!==0;else{switch(pd=!1,t.tag){case 3:Ame(t),sG();break;case 5:bme(t);break;case 1:fc(t.type)&&_5(t);break;case 4:jG(t,t.stateNode.containerInfo);break;case 10:n=t.memoizedProps.value;var o=t.type._context;Pa(L5,o._currentValue),o._currentValue=n;break;case 13:if(t.memoizedState!==null)return(r&t.child.childLanes)!==0?Ome(e,t,r):(Pa(Oa,Oa.current&1),t=pg(e,t,r),t!==null?t.sibling:null);Pa(Oa,Oa.current&1);break;case 19:if(n=(r&t.childLanes)!==0,(e.flags&64)!==0){if(n)return kme(e,t,r);t.flags|=64}if(o=t.memoizedState,o!==null&&(o.rendering=null,o.tail=null,o.lastEffect=null),Pa(Oa,Oa.current),n)break;return null;case 23:case 24:return t.lanes=0,lG(e,t,r)}return pg(e,t,r)}}else pd=!1;switch(t.lanes=0,t.tag){case 2:if(n=t.type,e!==null&&(e.alternate=null,t.alternate=null,t.flags|=2),e=t.pendingProps,o=kw(t,iu.current),Aw(t,r),o=DH(null,t,n,e,o,r),t.flags|=1,typeof o=="object"&&o!==null&&typeof o.render=="function"&&o.$$typeof===void 0){if(t.tag=1,t.memoizedState=null,t.updateQueue=null,fc(n)){var i=!0;_5(t)}else i=!1;t.memoizedState=o.state!==null&&o.state!==void 0?o.state:null,CH(t);var a=n.getDerivedStateFromProps;typeof a=="function"&&j5(t,n,a,e),o.updater=oL,t.stateNode=o,o._reactInternals=t,RG(t,n,e,r),t=UG(null,t,n,!0,i,r)}else t.tag=0,cc(null,t,o,r),t=t.child;return t;case 16:o=t.elementType;e:{switch(e!==null&&(e.alternate=null,t.alternate=null,t.flags|=2),e=t.pendingProps,i=o._init,o=i(o._payload),t.type=o,i=t.tag=f0t(o),e=cd(o,e),i){case 0:t=FG(null,t,o,e,r);break e;case 1:t=Cme(null,t,o,e,r);break e;case 11:t=Ime(null,t,o,e,r);break e;case 14:t=Mme(null,t,o,cd(o.type,e),n,r);break e}throw Error(ur(306,o,""))}return t;case 0:return n=t.type,o=t.pendingProps,o=t.elementType===n?o:cd(n,o),FG(e,t,n,o,r);case 1:return n=t.type,o=t.pendingProps,o=t.elementType===n?o:cd(n,o),Cme(e,t,n,o,r);case 3:if(Ame(t),n=t.updateQueue,e===null||n===null)throw Error(ur(282));if(n=t.pendingProps,o=t.memoizedState,o=o!==null?o.element:null,Uge(e,t),PM(t,n,null,r),n=t.memoizedState.element,n===o)sG(),t=pg(e,t,r);else{if(o=t.stateNode,(i=o.hydrate)&&(Xv=Cw(t.stateNode.containerInfo.firstChild),cg=t,i=Ch=!0),i){if(e=o.mutableSourceEagerHydrationData,e!=null)for(o=0;o<e.length;o+=2)i=e[o],i._workInProgressVersionPrimary=e[o+1],Ow.push(i);for(r=Hge(t,null,n,r),t.child=r;r;)r.flags=r.flags&-3|1024,r=r.sibling}else cc(e,t,n,r),sG();t=t.child}return t;case 5:return bme(t),e===null&&qG(t),n=t.type,o=t.pendingProps,i=e!==null?e.memoizedProps:null,a=o.children,DG(n,o)?a=null:i!==null&&DG(n,i)&&(t.flags|=16),tve(e,t),cc(e,t,a,r),t.child;case 6:return e===null&&qG(t),null;case 13:return Ome(e,t,r);case 4:return jG(t,t.stateNode.containerInfo),n=t.pendingProps,e===null?t.child=q5(t,null,n,r):cc(e,t,n,r),t.child;case 11:return n=t.type,o=t.pendingProps,o=t.elementType===n?o:cd(n,o),Ime(e,t,n,o,r);case 7:return cc(e,t,t.pendingProps,r),t.child;case 8:return cc(e,t,t.pendingProps.children,r),t.child;case 12:return cc(e,t,t.pendingProps.children,r),t.child;case 10:e:{n=t.type._context,o=t.pendingProps,a=t.memoizedProps,i=o.value;var c=t.type._context;if(Pa(L5,c._currentValue),c._currentValue=i,a!==null)if(c=a.value,i=Vp(c,i)?0:(typeof n._calculateChangedBits=="function"?n._calculateChangedBits(c,i):1073741823)|0,i===0){if(a.children===o.children&&!pc.current){t=pg(e,t,r);break e}}else for(c=t.child,c!==null&&(c.return=t);c!==null;){var h=c.dependencies;if(h!==null){a=c.child;for(var m=h.firstContext;m!==null;){if(m.context===n&&(m.observedBits&i)!==0){c.tag===1&&(m=ty(-1,r&-r),m.tag=2,ry(c,m)),c.lanes|=r,m=c.alternate,m!==null&&(m.lanes|=r),Fge(c.return,r),h.lanes|=r;break}m=m.next}}else a=c.tag===10&&c.type===t.type?null:c.child;if(a!==null)a.return=c;else for(a=c;a!==null;){if(a===t){a=null;break}if(c=a.sibling,c!==null){c.return=a.return,a=c;break}a=a.return}c=a}cc(e,t,o.children,r),t=t.child}return t;case 9:return o=t.type,i=t.pendingProps,n=i.children,Aw(t,r),o=Wp(o,i.unstable_observedBits),n=n(o),t.flags|=1,cc(e,t,n,r),t.child;case 14:return o=t.type,i=cd(o,t.pendingProps),i=cd(o.type,i),Mme(e,t,o,i,n,r);case 15:return eve(e,t,t.type,t.pendingProps,n,r);case 17:return n=t.type,o=t.pendingProps,o=t.elementType===n?o:cd(n,o),e!==null&&(e.alternate=null,t.alternate=null,t.flags|=2),t.tag=1,fc(n)?(e=!0,_5(t)):e=!1,Aw(t,r),Vge(t,n,o),RG(t,n,o,r),UG(null,t,n,!0,e,r);case 19:return kme(e,t,r);case 23:return lG(e,t,r);case 24:return lG(e,t,r)}throw Error(ur(156,t.tag))};function p0t(e,t,r,n){this.tag=e,this.key=r,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=t,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=n,this.flags=0,this.lastEffect=this.firstEffect=this.nextEffect=null,this.childLanes=this.lanes=0,this.alternate=null}function Gp(e,t,r,n){return new p0t(e,t,r,n)}function UH(e){return e=e.prototype,!(!e||!e.isReactComponent)}function f0t(e){if(typeof e=="function")return UH(e)?1:0;if(e!=null){if(e=e.$$typeof,e===Z5)return 11;if(e===K5)return 14}return 2}function cy(e,t){var r=e.alternate;return r===null?(r=Gp(e.tag,t,e.key,e.mode),r.elementType=e.elementType,r.type=e.type,r.stateNode=e.stateNode,r.alternate=e,e.alternate=r):(r.pendingProps=t,r.type=e.type,r.flags=0,r.nextEffect=null,r.firstEffect=null,r.lastEffect=null),r.childLanes=e.childLanes,r.lanes=e.lanes,r.child=e.child,r.memoizedProps=e.memoizedProps,r.memoizedState=e.memoizedState,r.updateQueue=e.updateQueue,t=e.dependencies,r.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext},r.sibling=e.sibling,r.index=e.index,r.ref=e.ref,r}function S5(e,t,r,n,o,i){var a=2;if(n=e,typeof e=="function")UH(e)&&(a=1);else if(typeof e=="string")a=5;else e:switch(e){case Yv:return Nw(r.children,o,i,t);case Wme:a=8,o|=16;break;case nH:a=8,o|=1;break;case uM:return e=Gp(12,r,t,o|8),e.elementType=uM,e.type=uM,e.lanes=i,e;case cM:return e=Gp(13,r,t,o),e.type=cM,e.elementType=cM,e.lanes=i,e;case T5:return e=Gp(19,r,t,o),e.elementType=T5,e.lanes=i,e;case uH:return BH(r,o,i,t);case hG:return e=Gp(24,r,t,o),e.elementType=hG,e.lanes=i,e;default:if(typeof e=="object"&&e!==null)switch(e.$$typeof){case oH:a=10;break e;case iH:a=9;break e;case Z5:a=11;break e;case K5:a=14;break e;case aH:a=16,n=null;break e;case sH:a=22;break e}throw Error(ur(130,e==null?e:typeof e,""))}return t=Gp(a,r,t,o),t.elementType=e,t.type=n,t.lanes=i,t}function Nw(e,t,r,n){return e=Gp(7,e,n,t),e.lanes=r,e}function BH(e,t,r,n){return e=Gp(23,e,n,t),e.elementType=uH,e.lanes=r,e}function pG(e,t,r){return e=Gp(6,e,null,t),e.lanes=r,e}function fG(e,t,r){return t=Gp(4,e.children!==null?e.children:[],e.key,t),t.lanes=r,t.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},t}function d0t(e,t,r){this.tag=t,this.containerInfo=e,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.pendingContext=this.context=null,this.hydrate=r,this.callbackNode=null,this.callbackPriority=0,this.eventTimes=KV(0),this.expirationTimes=KV(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=KV(0),this.mutableSourceEagerHydrationData=null}function h0t(e,t,r){var n=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:K1,key:n==null?null:""+n,children:e,containerInfo:t,implementation:r}}function $5(e,t,r,n){var o=t.current,i=pp(),a=ny(o);e:if(r){r=r._reactInternals;t:{if(s_(r)!==r||r.tag!==1)throw Error(ur(170));var c=r;do{switch(c.tag){case 3:c=c.stateNode.context;break t;case 1:if(fc(c.type)){c=c.stateNode.__reactInternalMemoizedMergedChildContext;break t}}c=c.return}while(c!==null);throw Error(ur(171))}if(r.tag===1){var h=r.type;if(fc(h)){r=Nge(r,h,c);break e}}r=c}else r=ly;return t.context===null?t.context=r:t.pendingContext=r,t=ty(i,a),t.payload={element:e},n=n===void 0?null:n,n!==null&&(t.callback=n),ry(o,t),oy(o,a,i),a}function dG(e){if(e=e.current,!e.child)return null;switch(e.child.tag){case 5:return e.child.stateNode;default:return e.child.stateNode}}function Gme(e,t){if(e=e.memoizedState,e!==null&&e.dehydrated!==null){var r=e.retryLane;e.retryLane=r!==0&&r<t?r:t}}function VH(e,t){Gme(e,t),(e=e.alternate)&&Gme(e,t)}function m0t(){return null}function GH(e,t,r){var n=r!=null&&r.hydrationOptions!=null&&r.hydrationOptions.mutableSources||null;if(r=new d0t(e,t,r!=null&&r.hydrate===!0),t=Gp(3,null,null,t===2?7:t===1?3:0),r.current=t,t.stateNode=r,CH(t),e[zw]=r.current,Cge(e.nodeType===8?e.parentNode:e),n)for(e=0;e<n.length;e++){t=n[e];var o=t._getVersion;o=o(t._source),r.mutableSourceEagerHydrationData==null?r.mutableSourceEagerHydrationData=[t,o]:r.mutableSourceEagerHydrationData.push(t,o)}this._internalRoot=r}GH.prototype.render=function(e){$5(e,this._internalRoot,null,null)};GH.prototype.unmount=function(){var e=this._internalRoot,t=e.containerInfo;$5(null,e,null,function(){t[zw]=null})};function zM(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11&&(e.nodeType!==8||e.nodeValue!==" react-mount-point-unstable "))}function g0t(e,t){if(t||(t=e?e.nodeType===9?e.documentElement:e.firstChild:null,t=!(!t||t.nodeType!==1||!t.hasAttribute("data-reactroot"))),!t)for(var r;r=e.lastChild;)e.removeChild(r);return new GH(e,0,t?{hydrate:!0}:void 0)}function sL(e,t,r,n,o){var i=r._reactRootContainer;if(i){var a=i._internalRoot;if(typeof o=="function"){var c=o;o=function(){var m=dG(a);c.call(m)}}$5(t,a,e,o)}else{if(i=r._reactRootContainer=g0t(r,n),a=i._internalRoot,typeof o=="function"){var h=o;o=function(){var m=dG(a);h.call(m)}}cve(function(){$5(t,a,e,o)})}return dG(a)}sge=function(e){if(e.tag===13){var t=pp();oy(e,4,t),VH(e,4)}};hH=function(e){if(e.tag===13){var t=pp();oy(e,67108864,t),VH(e,67108864)}};lge=function(e){if(e.tag===13){var t=pp(),r=ny(e);oy(e,r,t),VH(e,r)}};uge=function(e,t){return t()};SG=function(e,t,r){switch(t){case"input":if(gG(e,r),t=r.name,r.type==="radio"&&t!=null){for(r=e;r.parentNode;)r=r.parentNode;for(r=r.querySelectorAll("input[name="+JSON.stringify(""+t)+"][type=\"radio\"]"),t=0;t<r.length;t++){var n=r[t];if(n!==e&&n.form===e.form){var o=rL(n);if(!o)throw Error(ur(90));Yme(n),gG(n,o)}}}break;case"textarea":Kme(e,r);break;case"select":t=r.value,t!=null&&Tw(e,!!r.multiple,t,!1)}};pH=uve;nge=function(e,t,r,n,o){var i=kn;kn|=4;try{return n_(98,e.bind(null,t,r,n,o))}finally{kn=i,kn===0&&(Bw(),Ah())}};fH=function(){(kn&49)===0&&(r0t(),fy())};oge=function(e,t){var r=kn;kn|=2;try{return e(t)}finally{kn=r,kn===0&&(Bw(),Ah())}};function vve(e,t){var r=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!zM(t))throw Error(ur(200));return h0t(e,t,null,r)}var v0t={Events:[RM,xw,rL,tge,rge,fy,{current:!1}]},rM={findFiberByHostInstance:J1,bundleType:0,version:"17.0.2",rendererPackageName:"react-dom"},y0t={bundleType:rM.bundleType,version:rM.version,rendererPackageName:rM.rendererPackageName,rendererConfig:rM.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:a_.ReactCurrentDispatcher,findHostInstanceByFiber:function(e){return e=age(e),e===null?null:e.stateNode},findFiberByHostInstance:rM.findFiberByHostInstance||m0t,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__!="undefined"&&(nM=__REACT_DEVTOOLS_GLOBAL_HOOK__,!nM.isDisabled&&nM.supportsFiber))try{SH=nM.inject(y0t),t_=nM}catch(e){}var nM;Yp.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=v0t;Yp.createPortal=vve;Yp.findDOMNode=function(e){if(e==null)return null;if(e.nodeType===1)return e;var t=e._reactInternals;if(t===void 0)throw typeof e.render=="function"?Error(ur(188)):Error(ur(268,Object.keys(e)));return e=age(t),e=e===null?null:e.stateNode,e};Yp.flushSync=function(e,t){var r=kn;if((r&48)!==0)return e(t);kn|=1;try{if(e)return n_(99,e.bind(null,t))}finally{kn=r,Ah()}};Yp.hydrate=function(e,t,r){if(!zM(t))throw Error(ur(200));return sL(null,e,t,!0,r)};Yp.render=function(e,t,r){if(!zM(t))throw Error(ur(200));return sL(null,e,t,!1,r)};Yp.unmountComponentAtNode=function(e){if(!zM(e))throw Error(ur(40));return e._reactRootContainer?(cve(function(){sL(null,null,e,!1,function(){e._reactRootContainer=null,e[zw]=null})}),!0):!1};Yp.unstable_batchedUpdates=uve;Yp.unstable_createPortal=function(e,t){return vve(e,t,2<arguments.length&&arguments[2]!==void 0?arguments[2]:null)};Yp.unstable_renderSubtreeIntoContainer=function(e,t,r,n){if(!zM(r))throw Error(ur(200));if(e==null||e._reactInternals===void 0)throw Error(ur(38));return sL(e,t,r,!1,n)};Yp.version="17.0.2"});var ba=N((EFr,bve)=>{"use strict";u();function _ve(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__=="undefined"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(_ve)}catch(e){console.error(e)}}_ve(),bve.exports=yve()});var cr=N((HH,xve)=>{"use strict";u();var FM=function(e){return e&&e.Math===Math&&e};xve.exports=FM(typeof globalThis=="object"&&globalThis)||FM(typeof window=="object"&&window)||FM(typeof self=="object"&&self)||FM(typeof global=="object"&&global)||FM(typeof HH=="object"&&HH)||function(){return this}()||Function("return this")()});var Gt=N((IFr,wve)=>{"use strict";u();wve.exports=function(e){try{return!!e()}catch(t){return!0}}});var $r=N((CFr,Eve)=>{"use strict";u();var _0t=Gt();Eve.exports=!_0t(function(){return Object.defineProperty({},1,{get:function(){return 7}})[1]!==7})});var Vw=N((OFr,Sve)=>{"use strict";u();var b0t=Gt();Sve.exports=!b0t(function(){var e=function(){}.bind();return typeof e!="function"||e.hasOwnProperty("prototype")})});var pr=N((DFr,Tve)=>{"use strict";u();var x0t=Vw(),lL=Function.prototype.call;Tve.exports=x0t?lL.bind(lL):function(){return lL.apply(lL,arguments)}});var UM=N(Cve=>{"use strict";u();var Ive={}.propertyIsEnumerable,Mve=Object.getOwnPropertyDescriptor,w0t=Mve&&!Ive.call({1:2},1);Cve.f=w0t?function(t){var r=Mve(this,t);return!!r&&r.enumerable}:Ive});var dc=N((RFr,Ave)=>{"use strict";u();Ave.exports=function(e,t){return{enumerable:!(e&1),configurable:!(e&2),writable:!(e&4),value:t}}});var Lt=N((qFr,Dve)=>{"use strict";u();var Ove=Vw(),Pve=Function.prototype,WH=Pve.call,E0t=Ove&&Pve.bind.bind(WH,WH);Dve.exports=Ove?E0t:function(e){return function(){return WH.apply(e,arguments)}}});var wl=N((FFr,Lve)=>{"use strict";u();var Nve=Lt(),S0t=Nve({}.toString),T0t=Nve("".slice);Lve.exports=function(e){return T0t(S0t(e),8,-1)}});var hg=N((BFr,kve)=>{"use strict";u();var I0t=Lt(),M0t=Gt(),C0t=wl(),$H=Object,A0t=I0t("".split);kve.exports=M0t(function(){return!$H("z").propertyIsEnumerable(0)})?function(e){return C0t(e)==="String"?A0t(e,""):$H(e)}:$H});var hc=N((GFr,Rve)=>{"use strict";u();Rve.exports=function(e){return e==null}});var Pi=N((WFr,jve)=>{"use strict";u();var O0t=hc(),P0t=TypeError;jve.exports=function(e){if(O0t(e))throw new P0t("Can't call method on "+e);return e}});var hs=N((YFr,qve)=>{"use strict";u();var D0t=hg(),N0t=Pi();qve.exports=function(e){return D0t(N0t(e))}});var Rn=N((KFr,zve)=>{"use strict";u();var YH=typeof document=="object"&&document.all;zve.exports=typeof YH=="undefined"&&YH!==void 0?function(e){return typeof e=="function"||e===YH}:function(e){return typeof e=="function"}});var Qr=N((JFr,Fve)=>{"use strict";u();var L0t=Rn();Fve.exports=function(e){return typeof e=="object"?e!==null:L0t(e)}});var cn=N((e7r,Uve)=>{"use strict";u();var ZH=cr(),k0t=Rn(),R0t=function(e){return k0t(e)?e:void 0};Uve.exports=function(e,t){return arguments.length<2?R0t(ZH[e]):ZH[e]&&ZH[e][t]}});var El=N((r7r,Bve)=>{"use strict";u();var j0t=Lt();Bve.exports=j0t({}.isPrototypeOf)});var fd=N((o7r,Hve)=>{"use strict";u();var q0t=cr(),Vve=q0t.navigator,Gve=Vve&&Vve.userAgent;Hve.exports=Gve?String(Gve):""});var hd=N((a7r,Xve)=>{"use strict";u();var Kve=cr(),KH=fd(),Wve=Kve.process,$ve=Kve.Deno,Yve=Wve&&Wve.versions||$ve&&$ve.version,Zve=Yve&&Yve.v8,dd,uL;Zve&&(dd=Zve.split("."),uL=dd[0]>0&&dd[0]<4?1:+(dd[0]+dd[1]));!uL&&KH&&(dd=KH.match(/Edge\/(\d+)/),(!dd||dd[1]>=74)&&(dd=KH.match(/Chrome\/(\d+)/),dd&&(uL=+dd[1])));Xve.exports=uL});var dy=N((l7r,Qve)=>{"use strict";u();var Jve=hd(),z0t=Gt(),F0t=cr(),U0t=F0t.String;Qve.exports=!!Object.getOwnPropertySymbols&&!z0t(function(){var e=Symbol("symbol detection");return!U0t(e)||!(Object(e)instanceof Symbol)||!Symbol.sham&&Jve&&Jve<41})});var XH=N((c7r,eye)=>{"use strict";u();var B0t=dy();eye.exports=B0t&&!Symbol.sham&&typeof Symbol.iterator=="symbol"});var mg=N((f7r,tye)=>{"use strict";u();var V0t=cn(),G0t=Rn(),H0t=El(),W0t=XH(),$0t=Object;tye.exports=W0t?function(e){return typeof e=="symbol"}:function(e){var t=V0t("Symbol");return G0t(t)&&H0t(t.prototype,$0t(e))}});var hy=N((h7r,rye)=>{"use strict";u();var Y0t=String;rye.exports=function(e){try{return Y0t(e)}catch(t){return"Object"}}});var pn=N((g7r,nye)=>{"use strict";u();var Z0t=Rn(),K0t=hy(),X0t=TypeError;nye.exports=function(e){if(Z0t(e))return e;throw new X0t(K0t(e)+" is not a function")}});var Da=N((y7r,oye)=>{"use strict";u();var J0t=pn(),Q0t=hc();oye.exports=function(e,t){var r=e[t];return Q0t(r)?void 0:J0t(r)}});var tW=N((b7r,iye)=>{"use strict";u();var JH=pr(),QH=Rn(),eW=Qr(),e1t=TypeError;iye.exports=function(e,t){var r,n;if(t==="string"&&QH(r=e.toString)&&!eW(n=JH(r,e))||QH(r=e.valueOf)&&!eW(n=JH(r,e))||t!=="string"&&QH(r=e.toString)&&!eW(n=JH(r,e)))return n;throw new e1t("Can't convert object to primitive value")}});var To=N((w7r,aye)=>{"use strict";u();aye.exports=!1});var cL=N((S7r,lye)=>{"use strict";u();var sye=cr(),t1t=Object.defineProperty;lye.exports=function(e,t){try{t1t(sye,e,{value:t,configurable:!0,writable:!0})}catch(r){sye[e]=t}return t}});var BM=N((I7r,pye)=>{"use strict";u();var r1t=To(),n1t=cr(),o1t=cL(),uye="__core-js_shared__",cye=pye.exports=n1t[uye]||o1t(uye,{});(cye.versions||(cye.versions=[])).push({version:"3.42.0",mode:r1t?"pure":"global",copyright:"\xA9 2014-2025 Denis Pushkarev (zloirock.ru)",license:"https://github.com/zloirock/core-js/blob/v3.42.0/LICENSE",source:"https://github.com/zloirock/core-js"})});var gg=N((C7r,dye)=>{"use strict";u();var fye=BM();dye.exports=function(e,t){return fye[e]||(fye[e]=t||{})}});var Jn=N((O7r,hye)=>{"use strict";u();var i1t=Pi(),a1t=Object;hye.exports=function(e){return a1t(i1t(e))}});var $n=N((D7r,mye)=>{"use strict";u();var s1t=Lt(),l1t=Jn(),u1t=s1t({}.hasOwnProperty);mye.exports=Object.hasOwn||function(t,r){return u1t(l1t(t),r)}});var my=N((L7r,gye)=>{"use strict";u();var c1t=Lt(),p1t=0,f1t=Math.random(),d1t=c1t(1 .toString);gye.exports=function(e){return"Symbol("+(e===void 0?"":e)+")_"+d1t(++p1t+f1t,36)}});var an=N((R7r,yye)=>{"use strict";u();var h1t=cr(),m1t=gg(),vye=$n(),g1t=my(),v1t=dy(),y1t=XH(),Gw=h1t.Symbol,rW=m1t("wks"),_1t=y1t?Gw.for||Gw:Gw&&Gw.withoutSetter||g1t;yye.exports=function(e){return vye(rW,e)||(rW[e]=v1t&&vye(Gw,e)?Gw[e]:_1t("Symbol."+e)),rW[e]}});var VM=N((q7r,xye)=>{"use strict";u();var b1t=pr(),_ye=Qr(),bye=mg(),x1t=Da(),w1t=tW(),E1t=an(),S1t=TypeError,T1t=E1t("toPrimitive");xye.exports=function(e,t){if(!_ye(e)||bye(e))return e;var r=x1t(e,T1t),n;if(r){if(t===void 0&&(t="default"),n=b1t(r,e,t),!_ye(n)||bye(n))return n;throw new S1t("Can't convert object to primitive value")}return t===void 0&&(t="number"),w1t(e,t)}});var Oh=N((F7r,wye)=>{"use strict";u();var I1t=VM(),M1t=mg();wye.exports=function(e){var t=I1t(e,"string");return M1t(t)?t:t+""}});var GM=N((B7r,Sye)=>{"use strict";u();var C1t=cr(),Eye=Qr(),nW=C1t.document,A1t=Eye(nW)&&Eye(nW.createElement);Sye.exports=function(e){return A1t?nW.createElement(e):{}}});var oW=N((G7r,Tye)=>{"use strict";u();var O1t=$r(),P1t=Gt(),D1t=GM();Tye.exports=!O1t&&!P1t(function(){return Object.defineProperty(D1t("div"),"a",{get:function(){return 7}}).a!==7})});var Zs=N(Mye=>{"use strict";u();var N1t=$r(),L1t=pr(),k1t=UM(),R1t=dc(),j1t=hs(),q1t=Oh(),z1t=$n(),F1t=oW(),Iye=Object.getOwnPropertyDescriptor;Mye.f=N1t?Iye:function(t,r){if(t=j1t(t),r=q1t(r),F1t)try{return Iye(t,r)}catch(n){}if(z1t(t,r))return R1t(!L1t(k1t.f,t,r),t[r])}});var iW=N((Y7r,Cye)=>{"use strict";u();var U1t=$r(),B1t=Gt();Cye.exports=U1t&&B1t(function(){return Object.defineProperty(function(){},"prototype",{value:42,writable:!1}).prototype!==42})});var dr=N((K7r,Aye)=>{"use strict";u();var V1t=Qr(),G1t=String,H1t=TypeError;Aye.exports=function(e){if(V1t(e))return e;throw new H1t(G1t(e)+" is not an object")}});var wi=N(Pye=>{"use strict";u();var W1t=$r(),$1t=oW(),Y1t=iW(),pL=dr(),Oye=Oh(),Z1t=TypeError,aW=Object.defineProperty,K1t=Object.getOwnPropertyDescriptor,sW="enumerable",lW="configurable",uW="writable";Pye.f=W1t?Y1t?function(t,r,n){if(pL(t),r=Oye(r),pL(n),typeof t=="function"&&r==="prototype"&&"value"in n&&uW in n&&!n[uW]){var o=K1t(t,r);o&&o[uW]&&(t[r]=n.value,n={configurable:lW in n?n[lW]:o[lW],enumerable:sW in n?n[sW]:o[sW],writable:!1})}return aW(t,r,n)}:aW:function(t,r,n){if(pL(t),r=Oye(r),pL(n),$1t)try{return aW(t,r,n)}catch(o){}if("get"in n||"set"in n)throw new Z1t("Accessors not supported");return"value"in n&&(t[r]=n.value),t}});var ms=N((e9r,Dye)=>{"use strict";u();var X1t=$r(),J1t=wi(),Q1t=dc();Dye.exports=X1t?function(e,t,r){return J1t.f(e,t,Q1t(1,r))}:function(e,t,r){return e[t]=r,e}});var u_=N((r9r,Lye)=>{"use strict";u();var cW=$r(),e_t=$n(),Nye=Function.prototype,t_t=cW&&Object.getOwnPropertyDescriptor,pW=e_t(Nye,"name"),r_t=pW&&function(){}.name==="something",n_t=pW&&(!cW||cW&&t_t(Nye,"name").configurable);Lye.exports={EXISTS:pW,PROPER:r_t,CONFIGURABLE:n_t}});var HM=N((o9r,kye)=>{"use strict";u();var o_t=Lt(),i_t=Rn(),fW=BM(),a_t=o_t(Function.toString);i_t(fW.inspectSource)||(fW.inspectSource=function(e){return a_t(e)});kye.exports=fW.inspectSource});var dW=N((a9r,jye)=>{"use strict";u();var s_t=cr(),l_t=Rn(),Rye=s_t.WeakMap;jye.exports=l_t(Rye)&&/native code/.test(String(Rye))});var WM=N((l9r,zye)=>{"use strict";u();var u_t=gg(),c_t=my(),qye=u_t("keys");zye.exports=function(e){return qye[e]||(qye[e]=c_t(e))}});var Hw=N((c9r,Fye)=>{"use strict";u();Fye.exports={}});var Ho=N((f9r,Vye)=>{"use strict";u();var p_t=dW(),Bye=cr(),f_t=Qr(),d_t=ms(),hW=$n(),mW=BM(),h_t=WM(),m_t=Hw(),Uye="Object already initialized",gW=Bye.TypeError,g_t=Bye.WeakMap,fL,$M,dL,v_t=function(e){return dL(e)?$M(e):fL(e,{})},y_t=function(e){return function(t){var r;if(!f_t(t)||(r=$M(t)).type!==e)throw new gW("Incompatible receiver, "+e+" required");return r}};p_t||mW.state?(md=mW.state||(mW.state=new g_t),md.get=md.get,md.has=md.has,md.set=md.set,fL=function(e,t){if(md.has(e))throw new gW(Uye);return t.facade=e,md.set(e,t),t},$M=function(e){return md.get(e)||{}},dL=function(e){return md.has(e)}):(c_=h_t("state"),m_t[c_]=!0,fL=function(e,t){if(hW(e,c_))throw new gW(Uye);return t.facade=e,d_t(e,c_,t),t},$M=function(e){return hW(e,c_)?e[c_]:{}},dL=function(e){return hW(e,c_)});var md,c_;Vye.exports={set:fL,get:$M,has:dL,enforce:v_t,getterFor:y_t}});var YM=N((h9r,Wye)=>{"use strict";u();var yW=Lt(),__t=Gt(),b_t=Rn(),hL=$n(),vW=$r(),x_t=u_().CONFIGURABLE,w_t=HM(),Hye=Ho(),E_t=Hye.enforce,S_t=Hye.get,Gye=String,mL=Object.defineProperty,T_t=yW("".slice),I_t=yW("".replace),M_t=yW([].join),C_t=vW&&!__t(function(){return mL(function(){},"length",{value:8}).length!==8}),A_t=String(String).split("String"),O_t=Wye.exports=function(e,t,r){T_t(Gye(t),0,7)==="Symbol("&&(t="["+I_t(Gye(t),/^Symbol\(([^)]*)\).*$/,"$1")+"]"),r&&r.getter&&(t="get "+t),r&&r.setter&&(t="set "+t),(!hL(e,"name")||x_t&&e.name!==t)&&(vW?mL(e,"name",{value:t,configurable:!0}):e.name=t),C_t&&r&&hL(r,"arity")&&e.length!==r.arity&&mL(e,"length",{value:r.arity});try{r&&hL(r,"constructor")&&r.constructor?vW&&mL(e,"prototype",{writable:!1}):e.prototype&&(e.prototype=void 0)}catch(o){}var n=E_t(e);return hL(n,"source")||(n.source=M_t(A_t,typeof t=="string"?t:"")),e};Function.prototype.toString=O_t(function(){return b_t(this)&&S_t(this).source||w_t(this)},"toString")});var ei=N((g9r,$ye)=>{"use strict";u();var P_t=Rn(),D_t=wi(),N_t=YM(),L_t=cL();$ye.exports=function(e,t,r,n){n||(n={});var o=n.enumerable,i=n.name!==void 0?n.name:t;if(P_t(r)&&N_t(r,i,n),n.global)o?e[t]=r:L_t(t,r);else{try{n.unsafe?e[t]&&(o=!0):delete e[t]}catch(a){}o?e[t]=r:D_t.f(e,t,{value:r,enumerable:!1,configurable:!n.nonConfigurable,writable:!n.nonWritable})}return e}});var _W=N((y9r,Yye)=>{"use strict";u();var k_t=Math.ceil,R_t=Math.floor;Yye.exports=Math.trunc||function(t){var r=+t;return(r>0?R_t:k_t)(r)}});var Ui=N((b9r,Zye)=>{"use strict";u();var j_t=_W();Zye.exports=function(e){var t=+e;return t!==t||t===0?0:j_t(t)}});var gd=N((w9r,Kye)=>{"use strict";u();var q_t=Ui(),z_t=Math.max,F_t=Math.min;Kye.exports=function(e,t){var r=q_t(e);return r<0?z_t(r+t,0):F_t(r,t)}});var mc=N((S9r,Xye)=>{"use strict";u();var U_t=Ui(),B_t=Math.min;Xye.exports=function(e){var t=U_t(e);return t>0?B_t(t,9007199254740991):0}});var ho=N((I9r,Jye)=>{"use strict";u();var V_t=mc();Jye.exports=function(e){return V_t(e.length)}});var Ww=N((C9r,e0e)=>{"use strict";u();var G_t=hs(),H_t=gd(),W_t=ho(),Qye=function(e){return function(t,r,n){var o=G_t(t),i=W_t(o);if(i===0)return!e&&-1;var a=H_t(n,i),c;if(e&&r!==r){for(;i>a;)if(c=o[a++],c!==c)return!0}else for(;i>a;a++)if((e||a in o)&&o[a]===r)return e||a||0;return!e&&-1}};e0e.exports={includes:Qye(!0),indexOf:Qye(!1)}});var xW=N((O9r,r0e)=>{"use strict";u();var $_t=Lt(),bW=$n(),Y_t=hs(),Z_t=Ww().indexOf,K_t=Hw(),t0e=$_t([].push);r0e.exports=function(e,t){var r=Y_t(e),n=0,o=[],i;for(i in r)!bW(K_t,i)&&bW(r,i)&&t0e(o,i);for(;t.length>n;)bW(r,i=t[n++])&&(~Z_t(o,i)||t0e(o,i));return o}});var gL=N((D9r,n0e)=>{"use strict";u();n0e.exports=["constructor","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","toLocaleString","toString","valueOf"]});var gy=N(o0e=>{"use strict";u();var X_t=xW(),J_t=gL(),Q_t=J_t.concat("length","prototype");o0e.f=Object.getOwnPropertyNames||function(t){return X_t(t,Q_t)}});var ZM=N(i0e=>{"use strict";u();i0e.f=Object.getOwnPropertySymbols});var vL=N((q9r,a0e)=>{"use strict";u();var ebt=cn(),tbt=Lt(),rbt=gy(),nbt=ZM(),obt=dr(),ibt=tbt([].concat);a0e.exports=ebt("Reflect","ownKeys")||function(t){var r=rbt.f(obt(t)),n=nbt.f;return n?ibt(r,n(t)):r}});var p_=N((F9r,l0e)=>{"use strict";u();var s0e=$n(),abt=vL(),sbt=Zs(),lbt=wi();l0e.exports=function(e,t,r){for(var n=abt(t),o=lbt.f,i=sbt.f,a=0;a<n.length;a++){var c=n[a];!s0e(e,c)&&!(r&&s0e(r,c))&&o(e,c,i(t,c))}}});var $w=N((B9r,u0e)=>{"use strict";u();var ubt=Gt(),cbt=Rn(),pbt=/#|\.prototype\./,KM=function(e,t){var r=dbt[fbt(e)];return r===mbt?!0:r===hbt?!1:cbt(t)?ubt(t):!!t},fbt=KM.normalize=function(e){return String(e).replace(pbt,".").toLowerCase()},dbt=KM.data={},hbt=KM.NATIVE="N",mbt=KM.POLYFILL="P";u0e.exports=KM});var ce=N((G9r,c0e)=>{"use strict";u();var yL=cr(),gbt=Zs().f,vbt=ms(),ybt=ei(),_bt=cL(),bbt=p_(),xbt=$w();c0e.exports=function(e,t){var r=e.target,n=e.global,o=e.stat,i,a,c,h,m,y;if(n?a=yL:o?a=yL[r]||_bt(r,{}):a=yL[r]&&yL[r].prototype,a)for(c in t){if(m=t[c],e.dontCallGetSet?(y=gbt(a,c),h=y&&y.value):h=a[c],i=xbt(n?c:r+(o?".":"#")+c,e.forced),!i&&h!==void 0){if(typeof m==typeof h)continue;bbt(m,h)}(e.sham||h&&h.sham)&&vbt(m,"sham",!0),ybt(a,c,m,e)}}});var _L=N((W9r,f0e)=>{"use strict";u();var wbt=an(),Ebt=wbt("toStringTag"),p0e={};p0e[Ebt]="z";f0e.exports=String(p0e)==="[object z]"});var Lu=N((Y9r,d0e)=>{"use strict";u();var Sbt=_L(),Tbt=Rn(),bL=wl(),Ibt=an(),Mbt=Ibt("toStringTag"),Cbt=Object,Abt=bL(function(){return arguments}())==="Arguments",Obt=function(e,t){try{return e[t]}catch(r){}};d0e.exports=Sbt?bL:function(e){var t,r,n;return e===void 0?"Undefined":e===null?"Null":typeof(r=Obt(t=Cbt(e),Mbt))=="string"?r:Abt?bL(t):(n=bL(t))==="Object"&&Tbt(t.callee)?"Arguments":n}});var Sn=N((K9r,h0e)=>{"use strict";u();var Pbt=Lu(),Dbt=String;h0e.exports=function(e){if(Pbt(e)==="Symbol")throw new TypeError("Cannot convert a Symbol value to a string");return Dbt(e)}});var f_=N((J9r,m0e)=>{"use strict";u();var Nbt=xW(),Lbt=gL();m0e.exports=Object.keys||function(t){return Nbt(t,Lbt)}});var xL=N(g0e=>{"use strict";u();var kbt=$r(),Rbt=iW(),jbt=wi(),qbt=dr(),zbt=hs(),Fbt=f_();g0e.f=kbt&&!Rbt?Object.defineProperties:function(t,r){qbt(t);for(var n=zbt(r),o=Fbt(r),i=o.length,a=0,c;i>a;)jbt.f(t,c=o[a++],n[c]);return t}});var wW=N((rUr,v0e)=>{"use strict";u();var Ubt=cn();v0e.exports=Ubt("document","documentElement")});var Na=N((oUr,S0e)=>{"use strict";u();var Bbt=dr(),Vbt=xL(),y0e=gL(),Gbt=Hw(),Hbt=wW(),Wbt=GM(),$bt=WM(),_0e=">",b0e="<",SW="prototype",TW="script",w0e=$bt("IE_PROTO"),EW=function(){},E0e=function(e){return b0e+TW+_0e+e+b0e+"/"+TW+_0e},x0e=function(e){e.write(E0e("")),e.close();var t=e.parentWindow.Object;return e=null,t},Ybt=function(){var e=Wbt("iframe"),t="java"+TW+":",r;return e.style.display="none",Hbt.appendChild(e),e.src=String(t),r=e.contentWindow.document,r.open(),r.write(E0e("document.F=Object")),r.close(),r.F},wL,EL=function(){try{wL=new ActiveXObject("htmlfile")}catch(t){}EL=typeof document!="undefined"?document.domain&&wL?x0e(wL):Ybt():x0e(wL);for(var e=y0e.length;e--;)delete EL[SW][y0e[e]];return EL()};Gbt[w0e]=!0;S0e.exports=Object.create||function(t,r){var n;return t!==null?(EW[SW]=Bbt(t),n=new EW,EW[SW]=null,n[w0e]=t):n=EL(),r===void 0?n:Vbt.f(n,r)}});var gc=N((aUr,T0e)=>{"use strict";u();var Zbt=Lt();T0e.exports=Zbt([].slice)});var SL=N((lUr,C0e)=>{"use strict";u();var Kbt=wl(),Xbt=hs(),I0e=gy().f,Jbt=gc(),M0e=typeof window=="object"&&window&&Object.getOwnPropertyNames?Object.getOwnPropertyNames(window):[],Qbt=function(e){try{return I0e(e)}catch(t){return Jbt(M0e)}};C0e.exports.f=function(t){return M0e&&Kbt(t)==="Window"?Qbt(t):I0e(Xbt(t))}});var Bi=N((cUr,O0e)=>{"use strict";u();var A0e=YM(),ext=wi();O0e.exports=function(e,t,r){return r.get&&A0e(r.get,t,{getter:!0}),r.set&&A0e(r.set,t,{setter:!0}),ext.f(e,t,r)}});var IW=N(P0e=>{"use strict";u();var txt=an();P0e.f=txt});var TL=N((hUr,D0e)=>{"use strict";u();var rxt=cr();D0e.exports=rxt});var da=N((gUr,L0e)=>{"use strict";u();var N0e=TL(),nxt=$n(),oxt=IW(),ixt=wi().f;L0e.exports=function(e){var t=N0e.Symbol||(N0e.Symbol={});nxt(t,e)||ixt(t,e,{value:oxt.f(e)})}});var MW=N((yUr,k0e)=>{"use strict";u();var axt=pr(),sxt=cn(),lxt=an(),uxt=ei();k0e.exports=function(){var e=sxt("Symbol"),t=e&&e.prototype,r=t&&t.valueOf,n=lxt("toPrimitive");t&&!t[n]&&uxt(t,n,function(o){return axt(r,this)},{arity:1})}});var ku=N((bUr,j0e)=>{"use strict";u();var cxt=wi().f,pxt=$n(),fxt=an(),R0e=fxt("toStringTag");j0e.exports=function(e,t,r){e&&!r&&(e=e.prototype),e&&!pxt(e,R0e)&&cxt(e,R0e,{configurable:!0,value:t})}});var vy=N((wUr,q0e)=>{"use strict";u();var dxt=wl(),hxt=Lt();q0e.exports=function(e){if(dxt(e)==="Function")return hxt(e)}});var ui=N((SUr,F0e)=>{"use strict";u();var z0e=vy(),mxt=pn(),gxt=Vw(),vxt=z0e(z0e.bind);F0e.exports=function(e,t){return mxt(e),t===void 0?e:gxt?vxt(e,t):function(){return e.apply(t,arguments)}}});var vd=N((IUr,U0e)=>{"use strict";u();var yxt=wl();U0e.exports=Array.isArray||function(t){return yxt(t)==="Array"}});var yd=N((CUr,W0e)=>{"use strict";u();var _xt=Lt(),bxt=Gt(),B0e=Rn(),xxt=Lu(),wxt=cn(),Ext=HM(),V0e=function(){},G0e=wxt("Reflect","construct"),CW=/^\s*(?:class|function)\b/,Sxt=_xt(CW.exec),Txt=!CW.test(V0e),XM=function(t){if(!B0e(t))return!1;try{return G0e(V0e,[],t),!0}catch(r){return!1}},H0e=function(t){if(!B0e(t))return!1;switch(xxt(t)){case"AsyncFunction":case"GeneratorFunction":case"AsyncGeneratorFunction":return!1}try{return Txt||!!Sxt(CW,Ext(t))}catch(r){return!0}};H0e.sham=!0;W0e.exports=!G0e||bxt(function(){var e;return XM(XM.call)||!XM(Object)||!XM(function(){e=!0})||e})?H0e:XM});var K0e=N((OUr,Z0e)=>{"use strict";u();var $0e=vd(),Ixt=yd(),Mxt=Qr(),Cxt=an(),Axt=Cxt("species"),Y0e=Array;Z0e.exports=function(e){var t;return $0e(e)&&(t=e.constructor,Ixt(t)&&(t===Y0e||$0e(t.prototype))?t=void 0:Mxt(t)&&(t=t[Axt],t===null&&(t=void 0))),t===void 0?Y0e:t}});var Yw=N((DUr,X0e)=>{"use strict";u();var Oxt=K0e();X0e.exports=function(e,t){return new(Oxt(e))(t===0?0:t)}});var La=N((LUr,Q0e)=>{"use strict";u();var Pxt=ui(),Dxt=Lt(),Nxt=hg(),Lxt=Jn(),kxt=ho(),Rxt=Yw(),J0e=Dxt([].push),yy=function(e){var t=e===1,r=e===2,n=e===3,o=e===4,i=e===6,a=e===7,c=e===5||i;return function(h,m,y,w){for(var E=Lxt(h),A=Nxt(E),P=kxt(A),j=Pxt(m,y),D=0,k=w||Rxt,z=t?k(h,P):r||a?k(h,0):void 0,V,G;P>D;D++)if((c||D in A)&&(V=A[D],G=j(V,D,E),e))if(t)z[D]=G;else if(G)switch(e){case 3:return!0;case 5:return V;case 6:return D;case 2:J0e(z,V)}else switch(e){case 4:return!1;case 7:J0e(z,V)}return i?-1:n||o?o:z}};Q0e.exports={forEach:yy(0),map:yy(1),filter:yy(2),some:yy(3),every:yy(4),find:yy(5),findIndex:yy(6),filterReject:yy(7)}});var g1e=N(()=>{"use strict";u();var IL=ce(),eC=cr(),jW=pr(),jxt=Lt(),qxt=To(),Zw=$r(),Kw=dy(),zxt=Gt(),Ks=$n(),Fxt=El(),DW=dr(),ML=hs(),qW=Oh(),Uxt=Sn(),NW=dc(),Xw=Na(),r1e=f_(),Bxt=gy(),n1e=SL(),Vxt=ZM(),o1e=Zs(),i1e=wi(),Gxt=xL(),a1e=UM(),AW=ei(),Hxt=Bi(),zW=gg(),Wxt=WM(),s1e=Hw(),e1e=my(),$xt=an(),Yxt=IW(),Zxt=da(),Kxt=MW(),Xxt=ku(),l1e=Ho(),CL=La().forEach,vc=Wxt("hidden"),AL="Symbol",QM="prototype",Jxt=l1e.set,t1e=l1e.getterFor(AL),Zp=Object[QM],d_=eC.Symbol,JM=d_&&d_[QM],Qxt=eC.RangeError,ewt=eC.TypeError,OW=eC.QObject,u1e=o1e.f,h_=i1e.f,c1e=n1e.f,twt=a1e.f,p1e=jxt([].push),vg=zW("symbols"),tC=zW("op-symbols"),rwt=zW("wks"),LW=!OW||!OW[QM]||!OW[QM].findChild,f1e=function(e,t,r){var n=u1e(Zp,t);n&&delete Zp[t],h_(e,t,r),n&&e!==Zp&&h_(Zp,t,n)},kW=Zw&&zxt(function(){return Xw(h_({},"a",{get:function(){return h_(this,"a",{value:7}).a}})).a!==7})?f1e:h_,PW=function(e,t){var r=vg[e]=Xw(JM);return Jxt(r,{type:AL,tag:e,description:t}),Zw||(r.description=t),r},OL=function(t,r,n){t===Zp&&OL(tC,r,n),DW(t);var o=qW(r);return DW(n),Ks(vg,o)?(n.enumerable?(Ks(t,vc)&&t[vc][o]&&(t[vc][o]=!1),n=Xw(n,{enumerable:NW(0,!1)})):(Ks(t,vc)||h_(t,vc,NW(1,Xw(null))),t[vc][o]=!0),kW(t,o,n)):h_(t,o,n)},FW=function(t,r){DW(t);var n=ML(r),o=r1e(n).concat(m1e(n));return CL(o,function(i){(!Zw||jW(RW,n,i))&&OL(t,i,n[i])}),t},nwt=function(t,r){return r===void 0?Xw(t):FW(Xw(t),r)},RW=function(t){var r=qW(t),n=jW(twt,this,r);return this===Zp&&Ks(vg,r)&&!Ks(tC,r)?!1:n||!Ks(this,r)||!Ks(vg,r)||Ks(this,vc)&&this[vc][r]?n:!0},d1e=function(t,r){var n=ML(t),o=qW(r);if(!(n===Zp&&Ks(vg,o)&&!Ks(tC,o))){var i=u1e(n,o);return i&&Ks(vg,o)&&!(Ks(n,vc)&&n[vc][o])&&(i.enumerable=!0),i}},h1e=function(t){var r=c1e(ML(t)),n=[];return CL(r,function(o){!Ks(vg,o)&&!Ks(s1e,o)&&p1e(n,o)}),n},m1e=function(e){var t=e===Zp,r=c1e(t?tC:ML(e)),n=[];return CL(r,function(o){Ks(vg,o)&&(!t||Ks(Zp,o))&&p1e(n,vg[o])}),n};Kw||(d_=function(){if(Fxt(JM,this))throw new ewt("Symbol is not a constructor");var t=!arguments.length||arguments[0]===void 0?void 0:Uxt(arguments[0]),r=e1e(t),n=function(o){var i=this===void 0?eC:this;i===Zp&&jW(n,tC,o),Ks(i,vc)&&Ks(i[vc],r)&&(i[vc][r]=!1);var a=NW(1,o);try{kW(i,r,a)}catch(c){if(!(c instanceof Qxt))throw c;f1e(i,r,a)}};return Zw&&LW&&kW(Zp,r,{configurable:!0,set:n}),PW(r,t)},JM=d_[QM],AW(JM,"toString",function(){return t1e(this).tag}),AW(d_,"withoutSetter",function(e){return PW(e1e(e),e)}),a1e.f=RW,i1e.f=OL,Gxt.f=FW,o1e.f=d1e,Bxt.f=n1e.f=h1e,Vxt.f=m1e,Yxt.f=function(e){return PW($xt(e),e)},Zw&&(Hxt(JM,"description",{configurable:!0,get:function(){return t1e(this).description}}),qxt||AW(Zp,"propertyIsEnumerable",RW,{unsafe:!0})));IL({global:!0,constructor:!0,wrap:!0,forced:!Kw,sham:!Kw},{Symbol:d_});CL(r1e(rwt),function(e){Zxt(e)});IL({target:AL,stat:!0,forced:!Kw},{useSetter:function(){LW=!0},useSimple:function(){LW=!1}});IL({target:"Object",stat:!0,forced:!Kw,sham:!Zw},{create:nwt,defineProperty:OL,defineProperties:FW,getOwnPropertyDescriptor:d1e});IL({target:"Object",stat:!0,forced:!Kw},{getOwnPropertyNames:h1e});Kxt();Xxt(d_,AL);s1e[vc]=!0});var UW=N((zUr,v1e)=>{"use strict";u();var owt=dy();v1e.exports=owt&&!!Symbol.for&&!!Symbol.keyFor});var _1e=N(()=>{"use strict";u();var iwt=ce(),awt=cn(),swt=$n(),lwt=Sn(),y1e=gg(),uwt=UW(),BW=y1e("string-to-symbol-registry"),cwt=y1e("symbol-to-string-registry");iwt({target:"Symbol",stat:!0,forced:!uwt},{for:function(e){var t=lwt(e);if(swt(BW,t))return BW[t];var r=awt("Symbol")(t);return BW[t]=r,cwt[r]=t,r}})});var x1e=N(()=>{"use strict";u();var pwt=ce(),fwt=$n(),dwt=mg(),hwt=hy(),mwt=gg(),gwt=UW(),b1e=mwt("symbol-to-string-registry");pwt({target:"Symbol",stat:!0,forced:!gwt},{keyFor:function(t){if(!dwt(t))throw new TypeError(hwt(t)+" is not a symbol");if(fwt(b1e,t))return b1e[t]}})});var Sl=N(($Ur,T1e)=>{"use strict";u();var vwt=Vw(),S1e=Function.prototype,w1e=S1e.apply,E1e=S1e.call;T1e.exports=typeof Reflect=="object"&&Reflect.apply||(vwt?E1e.bind(w1e):function(){return E1e.apply(w1e,arguments)})});var VW=N((ZUr,A1e)=>{"use strict";u();var ywt=Lt(),I1e=vd(),_wt=Rn(),M1e=wl(),bwt=Sn(),C1e=ywt([].push);A1e.exports=function(e){if(_wt(e))return e;if(I1e(e)){for(var t=e.length,r=[],n=0;n<t;n++){var o=e[n];typeof o=="string"?C1e(r,o):(typeof o=="number"||M1e(o)==="Number"||M1e(o)==="String")&&C1e(r,bwt(o))}var i=r.length,a=!0;return function(c,h){if(a)return a=!1,h;if(I1e(this))return h;for(var m=0;m<i;m++)if(r[m]===c)return h}}}});var GW=N(()=>{"use strict";u();var xwt=ce(),j1e=cn(),q1e=Sl(),wwt=pr(),rC=Lt(),z1e=Gt(),O1e=Rn(),P1e=mg(),F1e=gc(),Ewt=VW(),Swt=dy(),Twt=String,_y=j1e("JSON","stringify"),PL=rC(/./.exec),D1e=rC("".charAt),Iwt=rC("".charCodeAt),Mwt=rC("".replace),Cwt=rC(1 .toString),Awt=/[\uD800-\uDFFF]/g,N1e=/^[\uD800-\uDBFF]$/,L1e=/^[\uDC00-\uDFFF]$/,k1e=!Swt||z1e(function(){var e=j1e("Symbol")("stringify detection");return _y([e])!=="[null]"||_y({a:e})!=="{}"||_y(Object(e))!=="{}"}),R1e=z1e(function(){return _y("\uDF06\uD834")!=="\"\\udf06\\ud834\""||_y("\uDEAD")!=="\"\\udead\""}),Owt=function(e,t){var r=F1e(arguments),n=Ewt(t);if(!(!O1e(n)&&(e===void 0||P1e(e))))return r[1]=function(o,i){if(O1e(n)&&(i=wwt(n,this,Twt(o),i)),!P1e(i))return i},q1e(_y,null,r)},Pwt=function(e,t,r){var n=D1e(r,t-1),o=D1e(r,t+1);return PL(N1e,e)&&!PL(L1e,o)||PL(L1e,e)&&!PL(N1e,n)?"\\u"+Cwt(Iwt(e,0),16):e};_y&&xwt({target:"JSON",stat:!0,arity:3,forced:k1e||R1e},{stringify:function(t,r,n){var o=F1e(arguments),i=q1e(k1e?Owt:_y,null,o);return R1e&&typeof i=="string"?Mwt(i,Awt,Pwt):i}})});var B1e=N(()=>{"use strict";u();var Dwt=ce(),Nwt=dy(),Lwt=Gt(),U1e=ZM(),kwt=Jn(),Rwt=!Nwt||Lwt(function(){U1e.f(1)});Dwt({target:"Object",stat:!0,forced:Rwt},{getOwnPropertySymbols:function(t){var r=U1e.f;return r?r(kwt(t)):[]}})});var V1e=N(()=>{"use strict";u();g1e();_1e();x1e();GW();B1e()});var K1e=N(()=>{"use strict";u();var jwt=ce(),qwt=$r(),zwt=cr(),DL=Lt(),Fwt=$n(),Uwt=Rn(),Bwt=El(),Vwt=Sn(),Gwt=Bi(),Hwt=p_(),yg=zwt.Symbol,m_=yg&&yg.prototype;qwt&&Uwt(yg)&&(!("description"in m_)||yg().description!==void 0)&&(HW={},nC=function(){var t=arguments.length<1||arguments[0]===void 0?void 0:Vwt(arguments[0]),r=Bwt(m_,this)?new yg(t):t===void 0?yg():yg(t);return t===""&&(HW[r]=!0),r},Hwt(nC,yg),nC.prototype=m_,m_.constructor=nC,G1e=String(yg("description detection"))==="Symbol(description detection)",H1e=DL(m_.valueOf),W1e=DL(m_.toString),$1e=/^Symbol\((.*)\)[^)]+$/,Y1e=DL("".replace),Z1e=DL("".slice),Gwt(m_,"description",{configurable:!0,get:function(){var t=H1e(this);if(Fwt(HW,t))return"";var r=W1e(t),n=G1e?Z1e(r,7,-1):Y1e(r,$1e,"$1");return n===""?void 0:n}}),jwt({global:!0,constructor:!0,forced:!0},{Symbol:nC}));var HW,nC,G1e,H1e,W1e,$1e,Y1e,Z1e});var X1e=N(()=>{"use strict";u();var Wwt=da();Wwt("asyncIterator")});var J1e=N(()=>{"use strict";u();var $wt=da();$wt("hasInstance")});var Q1e=N(()=>{"use strict";u();var Ywt=da();Ywt("isConcatSpreadable")});var e_e=N(()=>{"use strict";u();var Zwt=da();Zwt("iterator")});var t_e=N(()=>{"use strict";u();var Kwt=da();Kwt("match")});var r_e=N(()=>{"use strict";u();var Xwt=da();Xwt("matchAll")});var n_e=N(()=>{"use strict";u();var Jwt=da();Jwt("replace")});var o_e=N(()=>{"use strict";u();var Qwt=da();Qwt("search")});var i_e=N(()=>{"use strict";u();var eEt=da();eEt("species")});var a_e=N(()=>{"use strict";u();var tEt=da();tEt("split")});var s_e=N(()=>{"use strict";u();var rEt=da(),nEt=MW();rEt("toPrimitive");nEt()});var l_e=N(()=>{"use strict";u();var oEt=cn(),iEt=da(),aEt=ku();iEt("toStringTag");aEt(oEt("Symbol"),"Symbol")});var u_e=N(()=>{"use strict";u();var sEt=da();sEt("unscopables")});var oC=N((YBr,c_e)=>{"use strict";u();var lEt=Lt(),uEt=pn();c_e.exports=function(e,t,r){try{return lEt(uEt(Object.getOwnPropertyDescriptor(e,t)[r]))}catch(n){}}});var WW=N((KBr,p_e)=>{"use strict";u();var cEt=Qr();p_e.exports=function(e){return cEt(e)||e===null}});var $W=N((JBr,f_e)=>{"use strict";u();var pEt=WW(),fEt=String,dEt=TypeError;f_e.exports=function(e){if(pEt(e))return e;throw new dEt("Can't set "+fEt(e)+" as a prototype")}});var Kp=N((eVr,d_e)=>{"use strict";u();var hEt=oC(),mEt=Qr(),gEt=Pi(),vEt=$W();d_e.exports=Object.setPrototypeOf||("__proto__"in{}?function(){var e=!1,t={},r;try{r=hEt(Object.prototype,"__proto__","set"),r(t,[]),e=t instanceof Array}catch(n){}return function(o,i){return gEt(o),vEt(i),mEt(o)&&(e?r(o,i):o.__proto__=i),o}}():void 0)});var YW=N((rVr,h_e)=>{"use strict";u();var yEt=wi().f;h_e.exports=function(e,t,r){r in e||yEt(e,r,{configurable:!0,get:function(){return t[r]},set:function(n){t[r]=n}})}});var by=N((oVr,g_e)=>{"use strict";u();var _Et=Rn(),bEt=Qr(),m_e=Kp();g_e.exports=function(e,t,r){var n,o;return m_e&&_Et(n=t.constructor)&&n!==r&&bEt(o=n.prototype)&&o!==r.prototype&&m_e(e,o),e}});var g_=N((aVr,v_e)=>{"use strict";u();var xEt=Sn();v_e.exports=function(e,t){return e===void 0?arguments.length<2?"":t:xEt(e)}});var ZW=N((lVr,y_e)=>{"use strict";u();var wEt=Qr(),EEt=ms();y_e.exports=function(e,t){wEt(t)&&"cause"in t&&EEt(e,"cause",t.cause)}});var NL=N((cVr,w_e)=>{"use strict";u();var SEt=Lt(),b_e=Error,TEt=SEt("".replace),IEt=function(e){return String(new b_e(e).stack)}("zxcasd"),x_e=/\n\s*at [^:]*:[^\n]*/,MEt=x_e.test(IEt);w_e.exports=function(e,t){if(MEt&&typeof e=="string"&&!b_e.prepareStackTrace)for(;t--;)e=TEt(e,x_e,"");return e}});var KW=N((fVr,E_e)=>{"use strict";u();var CEt=Gt(),AEt=dc();E_e.exports=!CEt(function(){var e=new Error("a");return"stack"in e?(Object.defineProperty(e,"stack",AEt(1,7)),e.stack!==7):!0})});var LL=N((hVr,T_e)=>{"use strict";u();var OEt=ms(),PEt=NL(),DEt=KW(),S_e=Error.captureStackTrace;T_e.exports=function(e,t,r,n){DEt&&(S_e?S_e(e,t):OEt(e,"stack",PEt(r,n)))}});var XW=N((gVr,D_e)=>{"use strict";u();var I_e=cn(),NEt=$n(),M_e=ms(),LEt=El(),C_e=Kp(),A_e=p_(),O_e=YW(),kEt=by(),REt=g_(),jEt=ZW(),qEt=LL(),zEt=$r(),P_e=To();D_e.exports=function(e,t,r,n){var o="stackTraceLimit",i=n?2:1,a=e.split("."),c=a[a.length-1],h=I_e.apply(null,a);if(h){var m=h.prototype;if(!P_e&&NEt(m,"cause")&&delete m.cause,!r)return h;var y=I_e("Error"),w=t(function(E,A){var P=REt(n?A:E,void 0),j=n?new h(E):new h;return P!==void 0&&M_e(j,"message",P),qEt(j,w,j.stack,2),this&&LEt(m,this)&&kEt(j,this,w),arguments.length>i&&jEt(j,arguments[i]),j});if(w.prototype=m,c!=="Error"?C_e?C_e(w,y):A_e(w,y,{name:!0}):zEt&&o in h&&(O_e(w,h,o),O_e(w,h,"prepareStackTrace")),A_e(w,h),!P_e)try{m.name!==c&&M_e(m,"name",c),m.constructor=w}catch(E){}return w}}});var R_e=N(()=>{"use strict";u();var L_e=ce(),FEt=cr(),Ph=Sl(),k_e=XW(),JW="WebAssembly",N_e=FEt[JW],kL=new Error("e",{cause:7}).cause!==7,v_=function(e,t){var r={};r[e]=k_e(e,t,kL),L_e({global:!0,constructor:!0,arity:1,forced:kL},r)},QW=function(e,t){if(N_e&&N_e[e]){var r={};r[e]=k_e(JW+"."+e,t,kL),L_e({target:JW,stat:!0,constructor:!0,arity:1,forced:kL},r)}};v_("Error",function(e){return function(r){return Ph(e,this,arguments)}});v_("EvalError",function(e){return function(r){return Ph(e,this,arguments)}});v_("RangeError",function(e){return function(r){return Ph(e,this,arguments)}});v_("ReferenceError",function(e){return function(r){return Ph(e,this,arguments)}});v_("SyntaxError",function(e){return function(r){return Ph(e,this,arguments)}});v_("TypeError",function(e){return function(r){return Ph(e,this,arguments)}});v_("URIError",function(e){return function(r){return Ph(e,this,arguments)}});QW("CompileError",function(e){return function(r){return Ph(e,this,arguments)}});QW("LinkError",function(e){return function(r){return Ph(e,this,arguments)}});QW("RuntimeError",function(e){return function(r){return Ph(e,this,arguments)}})});var e$=N((xVr,q_e)=>{"use strict";u();var UEt=$r(),BEt=Gt(),VEt=dr(),j_e=g_(),RL=Error.prototype.toString,GEt=BEt(function(){if(UEt){var e=Object.create(Object.defineProperty({},"name",{get:function(){return this===e}}));if(RL.call(e)!=="true")return!0}return RL.call({message:1,name:2})!=="2: 1"||RL.call({})!=="Error"});q_e.exports=GEt?function(){var t=VEt(this),r=j_e(t.name,"Error"),n=j_e(t.message);return r?n?r+": "+n:r:n}:RL});var U_e=N(()=>{"use strict";u();var HEt=ei(),z_e=e$(),F_e=Error.prototype;F_e.toString!==z_e&&HEt(F_e,"toString",z_e)});var jL=N((IVr,B_e)=>{"use strict";u();var WEt=Gt();B_e.exports=!WEt(function(){function e(){}return e.prototype.constructor=null,Object.getPrototypeOf(new e)!==e.prototype})});var gs=N((CVr,G_e)=>{"use strict";u();var $Et=$n(),YEt=Rn(),ZEt=Jn(),KEt=WM(),XEt=jL(),V_e=KEt("IE_PROTO"),t$=Object,JEt=t$.prototype;G_e.exports=XEt?t$.getPrototypeOf:function(e){var t=ZEt(e);if($Et(t,V_e))return t[V_e];var r=t.constructor;return YEt(r)&&t instanceof r?r.prototype:t instanceof t$?JEt:null}});var y_=N((OVr,H_e)=>{"use strict";u();H_e.exports={}});var qL=N((DVr,W_e)=>{"use strict";u();var QEt=an(),eSt=y_(),tSt=QEt("iterator"),rSt=Array.prototype;W_e.exports=function(e){return e!==void 0&&(eSt.Array===e||rSt[tSt]===e)}});var Dh=N((LVr,Y_e)=>{"use strict";u();var nSt=Lu(),$_e=Da(),oSt=hc(),iSt=y_(),aSt=an(),sSt=aSt("iterator");Y_e.exports=function(e){if(!oSt(e))return $_e(e,sSt)||$_e(e,"@@iterator")||iSt[nSt(e)]}});var xy=N((RVr,Z_e)=>{"use strict";u();var lSt=pr(),uSt=pn(),cSt=dr(),pSt=hy(),fSt=Dh(),dSt=TypeError;Z_e.exports=function(e,t){var r=arguments.length<2?fSt(e):t;if(uSt(r))return cSt(lSt(r,e));throw new dSt(pSt(e)+" is not iterable")}});var Xs=N((qVr,X_e)=>{"use strict";u();var hSt=pr(),K_e=dr(),mSt=Da();X_e.exports=function(e,t,r){var n,o;K_e(e);try{if(n=mSt(e,"return"),!n){if(t==="throw")throw r;return r}n=hSt(n,e)}catch(i){o=!0,n=i}if(t==="throw")throw r;if(o)throw n;return K_e(n),r}});var ha=N((FVr,tbe)=>{"use strict";u();var gSt=ui(),vSt=pr(),ySt=dr(),_St=hy(),bSt=qL(),xSt=ho(),J_e=El(),wSt=xy(),ESt=Dh(),Q_e=Xs(),SSt=TypeError,zL=function(e,t){this.stopped=e,this.result=t},ebe=zL.prototype;tbe.exports=function(e,t,r){var n=r&&r.that,o=!!(r&&r.AS_ENTRIES),i=!!(r&&r.IS_RECORD),a=!!(r&&r.IS_ITERATOR),c=!!(r&&r.INTERRUPTED),h=gSt(t,n),m,y,w,E,A,P,j,D=function(z){return m&&Q_e(m,"normal",z),new zL(!0,z)},k=function(z){return o?(ySt(z),c?h(z[0],z[1],D):h(z[0],z[1])):c?h(z,D):h(z)};if(i)m=e.iterator;else if(a)m=e;else{if(y=ESt(e),!y)throw new SSt(_St(e)+" is not iterable");if(bSt(y)){for(w=0,E=xSt(e);E>w;w++)if(A=k(e[w]),A&&J_e(ebe,A))return A;return new zL(!1)}m=wSt(e,y)}for(P=i?e.next:m.next;!(j=vSt(P,m)).done;){try{A=k(j.value)}catch(z){Q_e(m,"throw",z)}if(typeof A=="object"&&A&&J_e(ebe,A))return A}return new zL(!1)}});var nbe=N(()=>{"use strict";u();var TSt=ce(),ISt=El(),MSt=gs(),FL=Kp(),CSt=p_(),rbe=Na(),r$=ms(),n$=dc(),ASt=ZW(),OSt=LL(),PSt=ha(),DSt=g_(),NSt=an(),LSt=NSt("toStringTag"),UL=Error,kSt=[].push,Jw=function(t,r){var n=ISt(o$,this),o;FL?o=FL(new UL,n?MSt(this):o$):(o=n?this:rbe(o$),r$(o,LSt,"Error")),r!==void 0&&r$(o,"message",DSt(r)),OSt(o,Jw,o.stack,1),arguments.length>2&&ASt(o,arguments[2]);var i=[];return PSt(t,kSt,{that:i}),r$(o,"errors",i),o};FL?FL(Jw,UL):CSt(Jw,UL,{name:!0});var o$=Jw.prototype=rbe(UL.prototype,{constructor:n$(1,Jw),message:n$(1,""),name:n$(1,"AggregateError")});TSt({global:!0,constructor:!0,arity:2},{AggregateError:Jw})});var i$=N(()=>{"use strict";u();nbe()});var sbe=N(()=>{"use strict";u();var RSt=ce(),jSt=cn(),qSt=Sl(),obe=Gt(),zSt=XW(),a$="AggregateError",ibe=jSt(a$),abe=!obe(function(){return ibe([1]).errors[0]!==1})&&obe(function(){return ibe([1],a$,{cause:7}).cause!==7});RSt({global:!0,constructor:!0,arity:2,forced:abe},{AggregateError:zSt(a$,function(e){return function(r,n){return qSt(e,this,arguments)}},abe,!0)})});var ma=N((XVr,lbe)=>{"use strict";u();var FSt=an(),USt=Na(),BSt=wi().f,s$=FSt("unscopables"),l$=Array.prototype;l$[s$]===void 0&&BSt(l$,s$,{configurable:!0,value:USt(null)});lbe.exports=function(e){l$[s$][e]=!0}});var u$=N(()=>{"use strict";u();var VSt=ce(),GSt=Jn(),HSt=ho(),WSt=Ui(),$St=ma();VSt({target:"Array",proto:!0},{at:function(t){var r=GSt(this),n=HSt(r),o=WSt(t),i=o>=0?o:n+o;return i<0||i>=n?void 0:r[i]}});$St("at")});var wy=N((rGr,ube)=>{"use strict";u();var YSt=TypeError,ZSt=9007199254740991;ube.exports=function(e){if(e>ZSt)throw YSt("Maximum allowed index exceeded");return e}});var Xp=N((oGr,cbe)=>{"use strict";u();var KSt=$r(),XSt=wi(),JSt=dc();cbe.exports=function(e,t,r){KSt?XSt.f(e,t,JSt(0,r)):e[t]=r}});var Qw=N((aGr,pbe)=>{"use strict";u();var QSt=Gt(),eTt=an(),tTt=hd(),rTt=eTt("species");pbe.exports=function(e){return tTt>=51||!QSt(function(){var t=[],r=t.constructor={};return r[rTt]=function(){return{foo:1}},t[e](Boolean).foo!==1})}});var mbe=N(()=>{"use strict";u();var nTt=ce(),oTt=Gt(),iTt=vd(),aTt=Qr(),sTt=Jn(),lTt=ho(),fbe=wy(),dbe=Xp(),uTt=Yw(),cTt=Qw(),pTt=an(),fTt=hd(),hbe=pTt("isConcatSpreadable"),dTt=fTt>=51||!oTt(function(){var e=[];return e[hbe]=!1,e.concat()[0]!==e}),hTt=function(e){if(!aTt(e))return!1;var t=e[hbe];return t!==void 0?!!t:iTt(e)},mTt=!dTt||!cTt("concat");nTt({target:"Array",proto:!0,arity:1,forced:mTt},{concat:function(t){var r=sTt(this),n=uTt(r,0),o=0,i,a,c,h,m;for(i=-1,c=arguments.length;i<c;i++)if(m=i===-1?r:arguments[i],hTt(m))for(h=lTt(m),fbe(o+h),a=0;a<h;a++,o++)a in m&&dbe(n,o,m[a]);else fbe(o+1),dbe(n,o++,m);return n.length=o,n}})});var iC=N((pGr,vbe)=>{"use strict";u();var gbe=hy(),gTt=TypeError;vbe.exports=function(e,t){if(!delete e[t])throw new gTt("Cannot delete property "+gbe(t)+" of "+gbe(e))}});var p$=N((dGr,ybe)=>{"use strict";u();var vTt=Jn(),c$=gd(),yTt=ho(),_Tt=iC(),bTt=Math.min;ybe.exports=[].copyWithin||function(t,r){var n=vTt(this),o=yTt(n),i=c$(t,o),a=c$(r,o),c=arguments.length>2?arguments[2]:void 0,h=bTt((c===void 0?o:c$(c,o))-a,o-i),m=1;for(a<i&&i<a+h&&(m=-1,a+=h-1,i+=h-1);h-->0;)a in n?n[i]=n[a]:_Tt(n,i),i+=m,a+=m;return n}});var _be=N(()=>{"use strict";u();var xTt=ce(),wTt=p$(),ETt=ma();xTt({target:"Array",proto:!0},{copyWithin:wTt});ETt("copyWithin")});var Jp=N((yGr,bbe)=>{"use strict";u();var STt=Gt();bbe.exports=function(e,t){var r=[][e];return!!r&&STt(function(){r.call(null,t||function(){return 1},1)})}});var xbe=N(()=>{"use strict";u();var TTt=ce(),ITt=La().every,MTt=Jp(),CTt=MTt("every");TTt({target:"Array",proto:!0,forced:!CTt},{every:function(t){return ITt(this,t,arguments.length>1?arguments[1]:void 0)}})});var BL=N((EGr,Ebe)=>{"use strict";u();var ATt=Jn(),wbe=gd(),OTt=ho();Ebe.exports=function(t){for(var r=ATt(this),n=OTt(r),o=arguments.length,i=wbe(o>1?arguments[1]:void 0,n),a=o>2?arguments[2]:void 0,c=a===void 0?n:wbe(a,n);c>i;)r[i++]=t;return r}});var Sbe=N(()=>{"use strict";u();var PTt=ce(),DTt=BL(),NTt=ma();PTt({target:"Array",proto:!0},{fill:DTt});NTt("fill")});var Tbe=N(()=>{"use strict";u();var LTt=ce(),kTt=La().filter,RTt=Qw(),jTt=RTt("filter");LTt({target:"Array",proto:!0,forced:!jTt},{filter:function(t){return kTt(this,t,arguments.length>1?arguments[1]:void 0)}})});var Mbe=N(()=>{"use strict";u();var qTt=ce(),zTt=La().find,FTt=ma(),f$="find",Ibe=!0;f$ in[]&&Array(1)[f$](function(){Ibe=!1});qTt({target:"Array",proto:!0,forced:Ibe},{find:function(t){return zTt(this,t,arguments.length>1?arguments[1]:void 0)}});FTt(f$)});var Abe=N(()=>{"use strict";u();var UTt=ce(),BTt=La().findIndex,VTt=ma(),d$="findIndex",Cbe=!0;d$ in[]&&Array(1)[d$](function(){Cbe=!1});UTt({target:"Array",proto:!0,forced:Cbe},{findIndex:function(t){return BTt(this,t,arguments.length>1?arguments[1]:void 0)}});VTt(d$)});var aC=N((jGr,Pbe)=>{"use strict";u();var GTt=ui(),HTt=hg(),WTt=Jn(),$Tt=ho(),Obe=function(e){var t=e===1;return function(r,n,o){for(var i=WTt(r),a=HTt(i),c=$Tt(a),h=GTt(n,o),m,y;c-->0;)if(m=a[c],y=h(m,c,i),y)switch(e){case 0:return m;case 1:return c}return t?-1:void 0}};Pbe.exports={findLast:Obe(0),findLastIndex:Obe(1)}});var h$=N(()=>{"use strict";u();var YTt=ce(),ZTt=aC().findLast,KTt=ma();YTt({target:"Array",proto:!0},{findLast:function(t){return ZTt(this,t,arguments.length>1?arguments[1]:void 0)}});KTt("findLast")});var m$=N(()=>{"use strict";u();var XTt=ce(),JTt=aC().findLastIndex,QTt=ma();XTt({target:"Array",proto:!0},{findLastIndex:function(t){return JTt(this,t,arguments.length>1?arguments[1]:void 0)}});QTt("findLastIndex")});var g$=N((HGr,Nbe)=>{"use strict";u();var e2t=vd(),t2t=ho(),r2t=wy(),n2t=ui(),Dbe=function(e,t,r,n,o,i,a,c){for(var h=o,m=0,y=a?n2t(a,c):!1,w,E;m<n;)m in r&&(w=y?y(r[m],m,t):r[m],i>0&&e2t(w)?(E=t2t(w),h=Dbe(e,t,w,E,h,i-1)-1):(r2t(h+1),e[h]=w),h++),m++;return h};Nbe.exports=Dbe});var Lbe=N(()=>{"use strict";u();var o2t=ce(),i2t=g$(),a2t=Jn(),s2t=ho(),l2t=Ui(),u2t=Yw();o2t({target:"Array",proto:!0},{flat:function(){var t=arguments.length?arguments[0]:void 0,r=a2t(this),n=s2t(r),o=u2t(r,0);return o.length=i2t(o,r,r,n,0,t===void 0?1:l2t(t)),o}})});var kbe=N(()=>{"use strict";u();var c2t=ce(),p2t=g$(),f2t=pn(),d2t=Jn(),h2t=ho(),m2t=Yw();c2t({target:"Array",proto:!0},{flatMap:function(t){var r=d2t(this),n=h2t(r),o;return f2t(t),o=m2t(r,0),o.length=p2t(o,r,r,n,0,1,t,arguments.length>1?arguments[1]:void 0),o}})});var v$=N((QGr,Rbe)=>{"use strict";u();var g2t=La().forEach,v2t=Jp(),y2t=v2t("forEach");Rbe.exports=y2t?[].forEach:function(t){return g2t(this,t,arguments.length>1?arguments[1]:void 0)}});var qbe=N(()=>{"use strict";u();var _2t=ce(),jbe=v$();_2t({target:"Array",proto:!0,forced:[].forEach!==jbe},{forEach:jbe})});var VL=N((oHr,zbe)=>{"use strict";u();var b2t=dr(),x2t=Xs();zbe.exports=function(e,t,r,n){try{return n?t(b2t(r)[0],r[1]):t(r)}catch(o){x2t(e,"throw",o)}}});var y$=N((aHr,Bbe)=>{"use strict";u();var w2t=ui(),E2t=pr(),S2t=Jn(),T2t=VL(),I2t=qL(),M2t=yd(),C2t=ho(),Fbe=Xp(),A2t=xy(),O2t=Dh(),Ube=Array;Bbe.exports=function(t){var r=S2t(t),n=M2t(this),o=arguments.length,i=o>1?arguments[1]:void 0,a=i!==void 0;a&&(i=w2t(i,o>2?arguments[2]:void 0));var c=O2t(r),h=0,m,y,w,E,A,P;if(c&&!(this===Ube&&I2t(c)))for(y=n?new this:[],E=A2t(r,c),A=E.next;!(w=E2t(A,E)).done;h++)P=a?T2t(E,i,[w.value,h],!0):w.value,Fbe(y,h,P);else for(m=C2t(r),y=n?new this(m):Ube(m);m>h;h++)P=a?i(r[h],h):r[h],Fbe(y,h,P);return y.length=h,y}});var sC=N((lHr,Wbe)=>{"use strict";u();var P2t=an(),Gbe=P2t("iterator"),Hbe=!1;try{Vbe=0,_$={next:function(){return{done:!!Vbe++}},return:function(){Hbe=!0}},_$[Gbe]=function(){return this},Array.from(_$,function(){throw 2})}catch(e){}var Vbe,_$;Wbe.exports=function(e,t){try{if(!t&&!Hbe)return!1}catch(o){return!1}var r=!1;try{var n={};n[Gbe]=function(){return{next:function(){return{done:r=!0}}}},e(n)}catch(o){}return r}});var $be=N(()=>{"use strict";u();var D2t=ce(),N2t=y$(),L2t=sC(),k2t=!L2t(function(e){Array.from(e)});D2t({target:"Array",stat:!0,forced:k2t},{from:N2t})});var Ybe=N(()=>{"use strict";u();var R2t=ce(),j2t=Ww().includes,q2t=Gt(),z2t=ma(),F2t=q2t(function(){return!Array(1).includes()});R2t({target:"Array",proto:!0,forced:F2t},{includes:function(t){return j2t(this,t,arguments.length>1?arguments[1]:void 0)}});z2t("includes")});var Kbe=N(()=>{"use strict";u();var U2t=ce(),B2t=vy(),V2t=Ww().indexOf,G2t=Jp(),b$=B2t([].indexOf),Zbe=!!b$&&1/b$([1],1,-0)<0,H2t=Zbe||!G2t("indexOf");U2t({target:"Array",proto:!0,forced:H2t},{indexOf:function(t){var r=arguments.length>1?arguments[1]:void 0;return Zbe?b$(this,t,r)||0:V2t(this,t,r)}})});var Xbe=N(()=>{"use strict";u();var W2t=ce(),$2t=vd();W2t({target:"Array",stat:!0},{isArray:$2t})});var Ey=N((wHr,exe)=>{"use strict";u();var Y2t=Gt(),Z2t=Rn(),K2t=Qr(),X2t=Na(),Jbe=gs(),J2t=ei(),Q2t=an(),eIt=To(),E$=Q2t("iterator"),Qbe=!1,_g,x$,w$;[].keys&&(w$=[].keys(),"next"in w$?(x$=Jbe(Jbe(w$)),x$!==Object.prototype&&(_g=x$)):Qbe=!0);var tIt=!K2t(_g)||Y2t(function(){var e={};return _g[E$].call(e)!==e});tIt?_g={}:eIt&&(_g=X2t(_g));Z2t(_g[E$])||J2t(_g,E$,function(){return this});exe.exports={IteratorPrototype:_g,BUGGY_SAFARI_ITERATORS:Qbe}});var Sy=N((SHr,txe)=>{"use strict";u();var rIt=Ey().IteratorPrototype,nIt=Na(),oIt=dc(),iIt=ku(),aIt=y_(),sIt=function(){return this};txe.exports=function(e,t,r,n){var o=t+" Iterator";return e.prototype=nIt(rIt,{next:oIt(+!n,r)}),iIt(e,o,!1,!0),aIt[o]=sIt,e}});var WL=N((IHr,pxe)=>{"use strict";u();var lIt=ce(),uIt=pr(),GL=To(),uxe=u_(),cIt=Rn(),pIt=Sy(),rxe=gs(),nxe=Kp(),fIt=ku(),dIt=ms(),S$=ei(),hIt=an(),oxe=y_(),cxe=Ey(),mIt=uxe.PROPER,gIt=uxe.CONFIGURABLE,ixe=cxe.IteratorPrototype,HL=cxe.BUGGY_SAFARI_ITERATORS,lC=hIt("iterator"),axe="keys",uC="values",sxe="entries",lxe=function(){return this};pxe.exports=function(e,t,r,n,o,i,a){pIt(r,t,n);var c=function(k){if(k===o&&E)return E;if(!HL&&k&&k in y)return y[k];switch(k){case axe:return function(){return new r(this,k)};case uC:return function(){return new r(this,k)};case sxe:return function(){return new r(this,k)}}return function(){return new r(this)}},h=t+" Iterator",m=!1,y=e.prototype,w=y[lC]||y["@@iterator"]||o&&y[o],E=!HL&&w||c(o),A=t==="Array"&&y.entries||w,P,j,D;if(A&&(P=rxe(A.call(new e)),P!==Object.prototype&&P.next&&(!GL&&rxe(P)!==ixe&&(nxe?nxe(P,ixe):cIt(P[lC])||S$(P,lC,lxe)),fIt(P,h,!0,!0),GL&&(oxe[h]=lxe))),mIt&&o===uC&&w&&w.name!==uC&&(!GL&&gIt?dIt(y,"name",uC):(m=!0,E=function(){return uIt(w,this)})),o)if(j={values:c(uC),keys:i?E:c(axe),entries:c(sxe)},a)for(D in j)(HL||m||!(D in y))&&S$(y,D,j[D]);else lIt({target:t,proto:!0,forced:HL||m},j);return(!GL||a)&&y[lC]!==E&&S$(y,lC,E,{name:o}),oxe[t]=E,j}});var Ls=N((CHr,fxe)=>{"use strict";u();fxe.exports=function(e,t){return{value:e,done:t}}});var cC=N((OHr,vxe)=>{"use strict";u();var vIt=hs(),T$=ma(),dxe=y_(),mxe=Ho(),yIt=wi().f,_It=WL(),$L=Ls(),bIt=To(),xIt=$r(),gxe="Array Iterator",wIt=mxe.set,EIt=mxe.getterFor(gxe);vxe.exports=_It(Array,"Array",function(e,t){wIt(this,{type:gxe,target:vIt(e),index:0,kind:t})},function(){var e=EIt(this),t=e.target,r=e.index++;if(!t||r>=t.length)return e.target=null,$L(void 0,!0);switch(e.kind){case"keys":return $L(r,!1);case"values":return $L(t[r],!1)}return $L([r,t[r]],!1)},"values");var hxe=dxe.Arguments=dxe.Array;T$("keys");T$("values");T$("entries");if(!bIt&&xIt&&hxe.name!=="values")try{yIt(hxe,"name",{value:"values"})}catch(e){}});var yxe=N(()=>{"use strict";u();var SIt=ce(),TIt=Lt(),IIt=hg(),MIt=hs(),CIt=Jp(),AIt=TIt([].join),OIt=IIt!==Object,PIt=OIt||!CIt("join",",");SIt({target:"Array",proto:!0,forced:PIt},{join:function(t){return AIt(MIt(this),t===void 0?",":t)}})});var M$=N((kHr,bxe)=>{"use strict";u();var DIt=Sl(),NIt=hs(),LIt=Ui(),kIt=ho(),RIt=Jp(),jIt=Math.min,I$=[].lastIndexOf,_xe=!!I$&&1/[1].lastIndexOf(1,-0)<0,qIt=RIt("lastIndexOf"),zIt=_xe||!qIt;bxe.exports=zIt?function(t){if(_xe)return DIt(I$,this,arguments)||0;var r=NIt(this),n=kIt(r);if(n===0)return-1;var o=n-1;for(arguments.length>1&&(o=jIt(o,LIt(arguments[1]))),o<0&&(o=n+o);o>=0;o--)if(o in r&&r[o]===t)return o||0;return-1}:I$});var wxe=N(()=>{"use strict";u();var FIt=ce(),xxe=M$();FIt({target:"Array",proto:!0,forced:xxe!==[].lastIndexOf},{lastIndexOf:xxe})});var Exe=N(()=>{"use strict";u();var UIt=ce(),BIt=La().map,VIt=Qw(),GIt=VIt("map");UIt({target:"Array",proto:!0,forced:!GIt},{map:function(t){return BIt(this,t,arguments.length>1?arguments[1]:void 0)}})});var Txe=N(()=>{"use strict";u();var HIt=ce(),WIt=Gt(),$It=yd(),YIt=Xp(),Sxe=Array,ZIt=WIt(function(){function e(){}return!(Sxe.of.call(e)instanceof e)});HIt({target:"Array",stat:!0,forced:ZIt},{of:function(){for(var t=0,r=arguments.length,n=new($It(this)?this:Sxe)(r);r>t;)YIt(n,t,arguments[t++]);return n.length=r,n}})});var YL=N((WHr,Ixe)=>{"use strict";u();var KIt=$r(),XIt=vd(),JIt=TypeError,QIt=Object.getOwnPropertyDescriptor,eMt=KIt&&!function(){if(this!==void 0)return!0;try{Object.defineProperty([],"length",{writable:!1}).length=1}catch(e){return e instanceof TypeError}}();Ixe.exports=eMt?function(e,t){if(XIt(e)&&!QIt(e,"length").writable)throw new JIt("Cannot set read only .length");return e.length=t}:function(e,t){return e.length=t}});var Mxe=N(()=>{"use strict";u();var tMt=ce(),rMt=Jn(),nMt=ho(),oMt=YL(),iMt=wy(),aMt=Gt(),sMt=aMt(function(){return[].push.call({length:4294967296},1)!==4294967297}),lMt=function(){try{Object.defineProperty([],"length",{writable:!1}).push()}catch(e){return e instanceof TypeError}},uMt=sMt||!lMt();tMt({target:"Array",proto:!0,arity:1,forced:uMt},{push:function(t){var r=rMt(this),n=nMt(r),o=arguments.length;iMt(n+o);for(var i=0;i<o;i++)r[n]=arguments[i],n++;return oMt(r,n),n}})});var pC=N((XHr,Pxe)=>{"use strict";u();var cMt=pn(),pMt=Jn(),fMt=hg(),dMt=ho(),Cxe=TypeError,Axe="Reduce of empty array with no initial value",Oxe=function(e){return function(t,r,n,o){var i=pMt(t),a=fMt(i),c=dMt(i);if(cMt(r),c===0&&n<2)throw new Cxe(Axe);var h=e?c-1:0,m=e?-1:1;if(n<2)for(;;){if(h in a){o=a[h],h+=m;break}if(h+=m,e?h<0:c<=h)throw new Cxe(Axe)}for(;e?h>=0:c>h;h+=m)h in a&&(o=r(o,a[h],h,i));return o}};Pxe.exports={left:Oxe(!1),right:Oxe(!0)}});var dC=N((QHr,Dxe)=>{"use strict";u();var fC=cr(),hMt=fd(),mMt=wl(),ZL=function(e){return hMt.slice(0,e.length)===e};Dxe.exports=function(){return ZL("Bun/")?"BUN":ZL("Cloudflare-Workers")?"CLOUDFLARE":ZL("Deno/")?"DENO":ZL("Node.js/")?"NODE":fC.Bun&&typeof Bun.version=="string"?"BUN":fC.Deno&&typeof Deno.version=="object"?"DENO":mMt(fC.process)==="process"?"NODE":fC.window&&fC.document?"BROWSER":"REST"}()});var __=N((tWr,Nxe)=>{"use strict";u();var gMt=dC();Nxe.exports=gMt==="NODE"});var kxe=N(()=>{"use strict";u();var vMt=ce(),yMt=pC().left,_Mt=Jp(),Lxe=hd(),bMt=__(),xMt=!bMt&&Lxe>79&&Lxe<83,wMt=xMt||!_Mt("reduce");vMt({target:"Array",proto:!0,forced:wMt},{reduce:function(t){var r=arguments.length;return yMt(this,t,r,r>1?arguments[1]:void 0)}})});var jxe=N(()=>{"use strict";u();var EMt=ce(),SMt=pC().right,TMt=Jp(),Rxe=hd(),IMt=__(),MMt=!IMt&&Rxe>79&&Rxe<83,CMt=MMt||!TMt("reduceRight");EMt({target:"Array",proto:!0,forced:CMt},{reduceRight:function(t){return SMt(this,t,arguments.length,arguments.length>1?arguments[1]:void 0)}})});var zxe=N(()=>{"use strict";u();var AMt=ce(),OMt=Lt(),PMt=vd(),DMt=OMt([].reverse),qxe=[1,2];AMt({target:"Array",proto:!0,forced:String(qxe)===String(qxe.reverse())},{reverse:function(){return PMt(this)&&(this.length=this.length),DMt(this)}})});var Bxe=N(()=>{"use strict";u();var NMt=ce(),Fxe=vd(),LMt=yd(),kMt=Qr(),Uxe=gd(),RMt=ho(),jMt=hs(),qMt=Xp(),zMt=an(),FMt=Qw(),UMt=gc(),BMt=FMt("slice"),VMt=zMt("species"),C$=Array,GMt=Math.max;NMt({target:"Array",proto:!0,forced:!BMt},{slice:function(t,r){var n=jMt(this),o=RMt(n),i=Uxe(t,o),a=Uxe(r===void 0?o:r,o),c,h,m;if(Fxe(n)&&(c=n.constructor,LMt(c)&&(c===C$||Fxe(c.prototype))?c=void 0:kMt(c)&&(c=c[VMt],c===null&&(c=void 0)),c===C$||c===void 0))return UMt(n,i,a);for(h=new(c===void 0?C$:c)(GMt(a-i,0)),m=0;i<a;i++,m++)i in n&&qMt(h,m,n[i]);return h.length=m,h}})});var Vxe=N(()=>{"use strict";u();var HMt=ce(),WMt=La().some,$Mt=Jp(),YMt=$Mt("some");HMt({target:"Array",proto:!0,forced:!YMt},{some:function(t){return WMt(this,t,arguments.length>1?arguments[1]:void 0)}})});var KL=N((yWr,Hxe)=>{"use strict";u();var Gxe=gc(),ZMt=Math.floor,A$=function(e,t){var r=e.length;if(r<8)for(var n=1,o,i;n<r;){for(i=n,o=e[n];i&&t(e[i-1],o)>0;)e[i]=e[--i];i!==n++&&(e[i]=o)}else for(var a=ZMt(r/2),c=A$(Gxe(e,0,a),t),h=A$(Gxe(e,a),t),m=c.length,y=h.length,w=0,E=0;w<m||E<y;)e[w+E]=w<m&&E<y?t(c[w],h[E])<=0?c[w++]:h[E++]:w<m?c[w++]:h[E++];return e};Hxe.exports=A$});var O$=N((bWr,$xe)=>{"use strict";u();var KMt=fd(),Wxe=KMt.match(/firefox\/(\d+)/i);$xe.exports=!!Wxe&&+Wxe[1]});var P$=N((wWr,Yxe)=>{"use strict";u();var XMt=fd();Yxe.exports=/MSIE|Trident/.test(XMt)});var XL=N((SWr,Kxe)=>{"use strict";u();var JMt=fd(),Zxe=JMt.match(/AppleWebKit\/(\d+)\./);Kxe.exports=!!Zxe&&+Zxe[1]});var iwe=N(()=>{"use strict";u();var QMt=ce(),nwe=Lt(),eCt=pn(),tCt=Jn(),Xxe=ho(),rCt=iC(),Jxe=Sn(),D$=Gt(),nCt=KL(),oCt=Jp(),Qxe=O$(),iCt=P$(),ewe=hd(),twe=XL(),Ty=[],rwe=nwe(Ty.sort),aCt=nwe(Ty.push),sCt=D$(function(){Ty.sort(void 0)}),lCt=D$(function(){Ty.sort(null)}),uCt=oCt("sort"),owe=!D$(function(){if(ewe)return ewe<70;if(!(Qxe&&Qxe>3)){if(iCt)return!0;if(twe)return twe<603;var e="",t,r,n,o;for(t=65;t<76;t++){switch(r=String.fromCharCode(t),t){case 66:case 69:case 70:case 72:n=3;break;case 68:case 71:n=4;break;default:n=2}for(o=0;o<47;o++)Ty.push({k:r+o,v:n})}for(Ty.sort(function(i,a){return a.v-i.v}),o=0;o<Ty.length;o++)r=Ty[o].k.charAt(0),e.charAt(e.length-1)!==r&&(e+=r);return e!=="DGBEFHACIJK"}}),cCt=sCt||!lCt||!uCt||!owe,pCt=function(e){return function(t,r){return r===void 0?-1:t===void 0?1:e!==void 0?+e(t,r)||0:Jxe(t)>Jxe(r)?1:-1}};QMt({target:"Array",proto:!0,forced:cCt},{sort:function(t){t!==void 0&&eCt(t);var r=tCt(this);if(owe)return t===void 0?rwe(r):rwe(r,t);var n=[],o=Xxe(r),i,a;for(a=0;a<o;a++)a in r&&aCt(n,r[a]);for(nCt(n,pCt(t)),i=Xxe(n),a=0;a<i;)r[a]=n[a++];for(;a<o;)rCt(r,a++);return r}})});var Iy=N((AWr,swe)=>{"use strict";u();var fCt=cn(),dCt=Bi(),hCt=an(),mCt=$r(),awe=hCt("species");swe.exports=function(e){var t=fCt(e);mCt&&t&&!t[awe]&&dCt(t,awe,{configurable:!0,get:function(){return this}})}});var lwe=N(()=>{"use strict";u();var gCt=Iy();gCt("Array")});var uwe=N(()=>{"use strict";u();var vCt=ce(),yCt=Jn(),_Ct=gd(),bCt=Ui(),xCt=ho(),wCt=YL(),ECt=wy(),SCt=Yw(),TCt=Xp(),N$=iC(),ICt=Qw(),MCt=ICt("splice"),CCt=Math.max,ACt=Math.min;vCt({target:"Array",proto:!0,forced:!MCt},{splice:function(t,r){var n=yCt(this),o=xCt(n),i=_Ct(t,o),a=arguments.length,c,h,m,y,w,E;for(a===0?c=h=0:a===1?(c=0,h=o-i):(c=a-2,h=ACt(CCt(bCt(r),0),o-i)),ECt(o+c-h),m=SCt(n,h),y=0;y<h;y++)w=i+y,w in n&&TCt(m,y,n[w]);if(m.length=h,c<h){for(y=i;y<o-h;y++)w=y+h,E=y+c,w in n?n[E]=n[w]:N$(n,E);for(y=o;y>o-h+c;y--)N$(n,y-1)}else if(c>h)for(y=o-h;y>i;y--)w=y+h-1,E=y+c-1,w in n?n[E]=n[w]:N$(n,E);for(y=0;y<c;y++)n[y+i]=arguments[y+2];return wCt(n,o-h+c),m}})});var L$=N((jWr,cwe)=>{"use strict";u();var OCt=ho();cwe.exports=function(e,t){for(var r=OCt(e),n=new t(r),o=0;o<r;o++)n[o]=e[r-o-1];return n}});var k$=N(()=>{"use strict";u();var PCt=ce(),DCt=L$(),NCt=hs(),LCt=ma(),kCt=Array;PCt({target:"Array",proto:!0},{toReversed:function(){return DCt(NCt(this),kCt)}});LCt("toReversed")});var bg=N((BWr,pwe)=>{"use strict";u();var RCt=ho();pwe.exports=function(e,t,r){for(var n=0,o=arguments.length>2?r:RCt(t),i=new e(o);o>n;)i[n]=t[n++];return i}});var R$=N((GWr,fwe)=>{"use strict";u();var jCt=cr();fwe.exports=function(e,t){var r=jCt[e],n=r&&r.prototype;return n&&n[t]}});var j$=N(()=>{"use strict";u();var qCt=ce(),zCt=Lt(),FCt=pn(),UCt=hs(),BCt=bg(),VCt=R$(),GCt=ma(),HCt=Array,WCt=zCt(VCt("Array","sort"));qCt({target:"Array",proto:!0},{toSorted:function(t){t!==void 0&&FCt(t);var r=UCt(this),n=BCt(HCt,r);return WCt(n,t)}});GCt("toSorted")});var q$=N(()=>{"use strict";u();var $Ct=ce(),YCt=ma(),ZCt=wy(),KCt=ho(),XCt=gd(),JCt=hs(),QCt=Ui(),eAt=Array,tAt=Math.max,rAt=Math.min;$Ct({target:"Array",proto:!0},{toSpliced:function(t,r){var n=JCt(this),o=KCt(n),i=XCt(t,o),a=arguments.length,c=0,h,m,y,w;for(a===0?h=m=0:a===1?(h=0,m=o-i):(h=a-2,m=rAt(tAt(QCt(r),0),o-i)),y=ZCt(o+h-m),w=eAt(y);c<i;c++)w[c]=n[c];for(;c<i+h;c++)w[c]=arguments[c-i+2];for(;c<y;c++)w[c]=n[c+m-h];return w}});YCt("toSpliced")});var dwe=N(()=>{"use strict";u();var nAt=ma();nAt("flat")});var hwe=N(()=>{"use strict";u();var oAt=ma();oAt("flatMap")});var mwe=N(()=>{"use strict";u();var iAt=ce(),aAt=Jn(),sAt=ho(),lAt=YL(),uAt=iC(),cAt=wy(),pAt=[].unshift(0)!==1,fAt=function(){try{Object.defineProperty([],"length",{writable:!1}).unshift()}catch(e){return e instanceof TypeError}},dAt=pAt||!fAt();iAt({target:"Array",proto:!0,arity:1,forced:dAt},{unshift:function(t){var r=aAt(this),n=sAt(r),o=arguments.length;if(o){cAt(n+o);for(var i=n;i--;){var a=i+o;i in r?r[a]=r[i]:uAt(r,a)}for(var c=0;c<o;c++)r[c]=arguments[c]}return lAt(r,n+o)}})});var z$=N((s$r,gwe)=>{"use strict";u();var hAt=ho(),mAt=Ui(),gAt=RangeError;gwe.exports=function(e,t,r,n){var o=hAt(e),i=mAt(r),a=i<0?o+i:i;if(a>=o||a<0)throw new gAt("Incorrect index");for(var c=new t(o),h=0;h<o;h++)c[h]=h===a?n:e[h];return c}});var F$=N(()=>{"use strict";u();var vAt=ce(),yAt=z$(),_At=hs(),bAt=Array;vAt({target:"Array",proto:!0},{with:function(e,t){return yAt(_At(this),bAt,e,t)}})});var hC=N((f$r,vwe)=>{"use strict";u();vwe.exports=typeof ArrayBuffer!="undefined"&&typeof DataView!="undefined"});var Qp=N((h$r,ywe)=>{"use strict";u();var xAt=ei();ywe.exports=function(e,t,r){for(var n in t)xAt(e,n,t[n],r);return e}});var au=N((g$r,_we)=>{"use strict";u();var wAt=El(),EAt=TypeError;_we.exports=function(e,t){if(wAt(t,e))return e;throw new EAt("Incorrect invocation")}});var eE=N((y$r,bwe)=>{"use strict";u();var SAt=Ui(),TAt=mc(),IAt=RangeError;bwe.exports=function(e){if(e===void 0)return 0;var t=SAt(e),r=TAt(t);if(t!==r)throw new IAt("Wrong length or index");return r}});var JL=N((b$r,xwe)=>{"use strict";u();xwe.exports=Math.sign||function(t){var r=+t;return r===0||r!==r?r:r<0?-1:1}});var U$=N((w$r,Ewe)=>{"use strict";u();var MAt=2220446049250313e-31,wwe=1/MAt;Ewe.exports=function(e){return e+wwe-wwe}});var B$=N((S$r,Swe)=>{"use strict";u();var CAt=JL(),AAt=U$(),OAt=Math.abs,PAt=2220446049250313e-31;Swe.exports=function(e,t,r,n){var o=+e,i=OAt(o),a=CAt(o);if(i<n)return a*AAt(i/n/t)*n*t;var c=(1+t/PAt)*i,h=c-(c-i);return h>r||h!==h?a*(1/0):a*h}});var QL=N((I$r,Twe)=>{"use strict";u();var DAt=B$(),NAt=1.1920928955078125e-7,LAt=34028234663852886e22,kAt=11754943508222875e-54;Twe.exports=Math.fround||function(t){return DAt(t,NAt,LAt,kAt)}});var Mwe=N((C$r,Iwe)=>{"use strict";u();var RAt=Array,jAt=Math.abs,xg=Math.pow,qAt=Math.floor,zAt=Math.log,FAt=Math.LN2,UAt=function(e,t,r){var n=RAt(r),o=r*8-t-1,i=(1<<o)-1,a=i>>1,c=t===23?xg(2,-24)-xg(2,-77):0,h=e<0||e===0&&1/e<0?1:0,m=0,y,w,E;for(e=jAt(e),e!==e||e===1/0?(w=e!==e?1:0,y=i):(y=qAt(zAt(e)/FAt),E=xg(2,-y),e*E<1&&(y--,E*=2),y+a>=1?e+=c/E:e+=c*xg(2,1-a),e*E>=2&&(y++,E/=2),y+a>=i?(w=0,y=i):y+a>=1?(w=(e*E-1)*xg(2,t),y+=a):(w=e*xg(2,a-1)*xg(2,t),y=0));t>=8;)n[m++]=w&255,w/=256,t-=8;for(y=y<<t|w,o+=t;o>0;)n[m++]=y&255,y/=256,o-=8;return n[m-1]|=h*128,n},BAt=function(e,t){var r=e.length,n=r*8-t-1,o=(1<<n)-1,i=o>>1,a=n-7,c=r-1,h=e[c--],m=h&127,y;for(h>>=7;a>0;)m=m*256+e[c--],a-=8;for(y=m&(1<<-a)-1,m>>=-a,a+=t;a>0;)y=y*256+e[c--],a-=8;if(m===0)m=1-i;else{if(m===o)return y?NaN:h?-1/0:1/0;y+=xg(2,t),m-=i}return(h?-1:1)*y*xg(2,m-t)};Iwe.exports={pack:UAt,unpack:BAt}});var vC=N((O$r,Gwe)=>{"use strict";u();var o3=cr(),$$=Lt(),V$=$r(),VAt=hC(),zwe=u_(),GAt=ms(),HAt=Bi(),Cwe=Qp(),G$=Gt(),e3=au(),WAt=Ui(),$At=mc(),r3=eE(),YAt=QL(),Fwe=Mwe(),ZAt=gs(),Awe=Kp(),KAt=BL(),XAt=gc(),JAt=by(),QAt=p_(),Uwe=ku(),Y$=Ho(),eOt=zwe.PROPER,Owe=zwe.CONFIGURABLE,rE="ArrayBuffer",i3="DataView",nE="prototype",tOt="Wrong length",Bwe="Wrong index",Pwe=Y$.getterFor(rE),gC=Y$.getterFor(i3),Dwe=Y$.set,_d=o3[rE],dp=_d,tE=dp&&dp[nE],Nh=o3[i3],b_=Nh&&Nh[nE],Nwe=Object.prototype,rOt=o3.Array,n3=o3.RangeError,nOt=$$(KAt),oOt=$$([].reverse),Vwe=Fwe.pack,Lwe=Fwe.unpack,kwe=function(e){return[e&255]},Rwe=function(e){return[e&255,e>>8&255]},jwe=function(e){return[e&255,e>>8&255,e>>16&255,e>>24&255]},qwe=function(e){return e[3]<<24|e[2]<<16|e[1]<<8|e[0]},iOt=function(e){return Vwe(YAt(e),23,4)},aOt=function(e){return Vwe(e,52,8)},t3=function(e,t,r){HAt(e[nE],t,{configurable:!0,get:function(){return r(this)[t]}})},My=function(e,t,r,n){var o=gC(e),i=r3(r),a=!!n;if(i+t>o.byteLength)throw new n3(Bwe);var c=o.bytes,h=i+o.byteOffset,m=XAt(c,h,h+t);return a?m:oOt(m)},Cy=function(e,t,r,n,o,i){var a=gC(e),c=r3(r),h=n(+o),m=!!i;if(c+t>a.byteLength)throw new n3(Bwe);for(var y=a.bytes,w=c+a.byteOffset,E=0;E<t;E++)y[w+E]=h[m?E:t-E-1]};VAt?(H$=eOt&&_d.name!==rE,!G$(function(){_d(1)})||!G$(function(){new _d(-1)})||G$(function(){return new _d,new _d(1.5),new _d(NaN),_d.length!==1||H$&&!Owe})?(dp=function(t){return e3(this,tE),JAt(new _d(r3(t)),this,dp)},dp[nE]=tE,tE.constructor=dp,QAt(dp,_d)):H$&&Owe&&GAt(_d,"name",rE),Awe&&ZAt(b_)!==Nwe&&Awe(b_,Nwe),mC=new Nh(new dp(2)),W$=$$(b_.setInt8),mC.setInt8(0,2147483648),mC.setInt8(1,2147483649),(mC.getInt8(0)||!mC.getInt8(1))&&Cwe(b_,{setInt8:function(t,r){W$(this,t,r<<24>>24)},setUint8:function(t,r){W$(this,t,r<<24>>24)}},{unsafe:!0})):(dp=function(t){e3(this,tE);var r=r3(t);Dwe(this,{type:rE,bytes:nOt(rOt(r),0),byteLength:r}),V$||(this.byteLength=r,this.detached=!1)},tE=dp[nE],Nh=function(t,r,n){e3(this,b_),e3(t,tE);var o=Pwe(t),i=o.byteLength,a=WAt(r);if(a<0||a>i)throw new n3("Wrong offset");if(n=n===void 0?i-a:$At(n),a+n>i)throw new n3(tOt);Dwe(this,{type:i3,buffer:t,byteLength:n,byteOffset:a,bytes:o.bytes}),V$||(this.buffer=t,this.byteLength=n,this.byteOffset=a)},b_=Nh[nE],V$&&(t3(dp,"byteLength",Pwe),t3(Nh,"buffer",gC),t3(Nh,"byteLength",gC),t3(Nh,"byteOffset",gC)),Cwe(b_,{getInt8:function(t){return My(this,1,t)[0]<<24>>24},getUint8:function(t){return My(this,1,t)[0]},getInt16:function(t){var r=My(this,2,t,arguments.length>1?arguments[1]:!1);return(r[1]<<8|r[0])<<16>>16},getUint16:function(t){var r=My(this,2,t,arguments.length>1?arguments[1]:!1);return r[1]<<8|r[0]},getInt32:function(t){return qwe(My(this,4,t,arguments.length>1?arguments[1]:!1))},getUint32:function(t){return qwe(My(this,4,t,arguments.length>1?arguments[1]:!1))>>>0},getFloat32:function(t){return Lwe(My(this,4,t,arguments.length>1?arguments[1]:!1),23)},getFloat64:function(t){return Lwe(My(this,8,t,arguments.length>1?arguments[1]:!1),52)},setInt8:function(t,r){Cy(this,1,t,kwe,r)},setUint8:function(t,r){Cy(this,1,t,kwe,r)},setInt16:function(t,r){Cy(this,2,t,Rwe,r,arguments.length>2?arguments[2]:!1)},setUint16:function(t,r){Cy(this,2,t,Rwe,r,arguments.length>2?arguments[2]:!1)},setInt32:function(t,r){Cy(this,4,t,jwe,r,arguments.length>2?arguments[2]:!1)},setUint32:function(t,r){Cy(this,4,t,jwe,r,arguments.length>2?arguments[2]:!1)},setFloat32:function(t,r){Cy(this,4,t,iOt,r,arguments.length>2?arguments[2]:!1)},setFloat64:function(t,r){Cy(this,8,t,aOt,r,arguments.length>2?arguments[2]:!1)}}));var H$,mC,W$;Uwe(dp,rE);Uwe(Nh,i3);Gwe.exports={ArrayBuffer:dp,DataView:Nh}});var Wwe=N(()=>{"use strict";u();var sOt=ce(),lOt=cr(),uOt=vC(),cOt=Iy(),Z$="ArrayBuffer",Hwe=uOt[Z$],pOt=lOt[Z$];sOt({global:!0,constructor:!0,forced:pOt!==Hwe},{ArrayBuffer:Hwe});cOt(Z$)});var Zn=N((k$r,rEe)=>{"use strict";u();var fOt=hC(),Q$=$r(),Ru=cr(),Kwe=Rn(),l3=Qr(),Oy=$n(),eY=Lu(),dOt=hy(),hOt=ms(),K$=ei(),mOt=Bi(),gOt=El(),u3=gs(),iE=Kp(),vOt=an(),yOt=my(),Xwe=Ho(),Jwe=Xwe.enforce,_Ot=Xwe.get,a3=Ru.Int8Array,X$=a3&&a3.prototype,$we=Ru.Uint8ClampedArray,Ywe=$we&&$we.prototype,Lh=a3&&u3(a3),bd=X$&&u3(X$),bOt=Object.prototype,tY=Ru.TypeError,Zwe=vOt("toStringTag"),J$=yOt("TYPED_ARRAY_TAG"),s3="TypedArrayConstructor",wg=fOt&&!!iE&&eY(Ru.opera)!=="Opera",Qwe=!1,yc,Ay,oE,Eg={Int8Array:1,Uint8Array:1,Uint8ClampedArray:1,Int16Array:2,Uint16Array:2,Int32Array:4,Uint32Array:4,Float32Array:4,Float64Array:8},rY={BigInt64Array:8,BigUint64Array:8},xOt=function(t){if(!l3(t))return!1;var r=eY(t);return r==="DataView"||Oy(Eg,r)||Oy(rY,r)},eEe=function(e){var t=u3(e);if(l3(t)){var r=_Ot(t);return r&&Oy(r,s3)?r[s3]:eEe(t)}},tEe=function(e){if(!l3(e))return!1;var t=eY(e);return Oy(Eg,t)||Oy(rY,t)},wOt=function(e){if(tEe(e))return e;throw new tY("Target is not a typed array")},EOt=function(e){if(Kwe(e)&&(!iE||gOt(Lh,e)))return e;throw new tY(dOt(e)+" is not a typed array constructor")},SOt=function(e,t,r,n){if(Q$){if(r)for(var o in Eg){var i=Ru[o];if(i&&Oy(i.prototype,e))try{delete i.prototype[e]}catch(a){try{i.prototype[e]=t}catch(c){}}}(!bd[e]||r)&&K$(bd,e,r?t:wg&&X$[e]||t,n)}},TOt=function(e,t,r){var n,o;if(Q$){if(iE){if(r){for(n in Eg)if(o=Ru[n],o&&Oy(o,e))try{delete o[e]}catch(i){}}if(!Lh[e]||r)try{return K$(Lh,e,r?t:wg&&Lh[e]||t)}catch(i){}else return}for(n in Eg)o=Ru[n],o&&(!o[e]||r)&&K$(o,e,t)}};for(yc in Eg)Ay=Ru[yc],oE=Ay&&Ay.prototype,oE?Jwe(oE)[s3]=Ay:wg=!1;for(yc in rY)Ay=Ru[yc],oE=Ay&&Ay.prototype,oE&&(Jwe(oE)[s3]=Ay);if((!wg||!Kwe(Lh)||Lh===Function.prototype)&&(Lh=function(){throw new tY("Incorrect invocation")},wg))for(yc in Eg)Ru[yc]&&iE(Ru[yc],Lh);if((!wg||!bd||bd===bOt)&&(bd=Lh.prototype,wg))for(yc in Eg)Ru[yc]&&iE(Ru[yc].prototype,bd);wg&&u3(Ywe)!==bd&&iE(Ywe,bd);if(Q$&&!Oy(bd,Zwe)){Qwe=!0,mOt(bd,Zwe,{configurable:!0,get:function(){return l3(this)?this[J$]:void 0}});for(yc in Eg)Ru[yc]&&hOt(Ru[yc],J$,yc)}rEe.exports={NATIVE_ARRAY_BUFFER_VIEWS:wg,TYPED_ARRAY_TAG:Qwe&&J$,aTypedArray:wOt,aTypedArrayConstructor:EOt,exportTypedArrayMethod:SOt,exportTypedArrayStaticMethod:TOt,getTypedArrayConstructor:eEe,isView:xOt,isTypedArray:tEe,TypedArray:Lh,TypedArrayPrototype:bd}});var oEe=N(()=>{"use strict";u();var IOt=ce(),nEe=Zn(),MOt=nEe.NATIVE_ARRAY_BUFFER_VIEWS;IOt({target:"ArrayBuffer",stat:!0,forced:!MOt},{isView:nEe.isView})});var cEe=N(()=>{"use strict";u();var COt=ce(),oY=vy(),AOt=Gt(),lEe=vC(),iEe=dr(),aEe=gd(),OOt=mc(),iY=lEe.ArrayBuffer,nY=lEe.DataView,uEe=nY.prototype,sEe=oY(iY.prototype.slice),POt=oY(uEe.getUint8),DOt=oY(uEe.setUint8),NOt=AOt(function(){return!new iY(2).slice(1,void 0).byteLength});COt({target:"ArrayBuffer",proto:!0,unsafe:!0,forced:NOt},{slice:function(t,r){if(sEe&&r===void 0)return sEe(iEe(this),t);for(var n=iEe(this).byteLength,o=aEe(t,n),i=aEe(r===void 0?n:r,n),a=new iY(OOt(i-o)),c=new nY(this),h=new nY(a),m=0;o<i;)DOt(h,m++,POt(c,o++));return a}})});var pEe=N(()=>{"use strict";u();var LOt=ce(),kOt=vC(),ROt=hC();LOt({global:!0,constructor:!0,forced:!ROt},{DataView:kOt.DataView})});var fEe=N(()=>{"use strict";u();pEe()});var aY=N(()=>{"use strict";u();var jOt=ce(),qOt=Lt(),gEe=Math.pow,dEe=31,zOt=1023,hEe=gEe(2,-24),mEe=.0009765625,FOt=function(e){var t=e>>>15,r=e>>>10&dEe,n=e&zOt;return r===dEe?n===0?t===0?1/0:-1/0:NaN:r===0?n*(t===0?hEe:-hEe):gEe(2,r-15)*(t===0?1+n*mEe:-1-n*mEe)},UOt=qOt(DataView.prototype.getUint16);jOt({target:"DataView",proto:!0},{getFloat16:function(t){var r=UOt(this,t,arguments.length>1?arguments[1]:!1);return FOt(r)}})});var sY=N((J$r,vEe)=>{"use strict";u();var BOt=Lu(),VOt=TypeError;vEe.exports=function(e){if(BOt(e)==="DataView")return e;throw new VOt("Argument is not a DataView")}});var lY=N((eYr,yEe)=>{"use strict";u();var GOt=Math.log,HOt=Math.LN2;yEe.exports=Math.log2||function(t){return GOt(t)/HOt}});var cY=N(()=>{"use strict";u();var WOt=ce(),$Ot=Lt(),YOt=sY(),ZOt=eE(),KOt=lY(),_Ee=U$(),XOt=Math.pow,JOt=65520,QOt=61005353927612305e-21,ePt=16777216,uY=1024,tPt=function(e){if(e!==e)return 32256;if(e===0)return(1/e===-1/0)<<15;var t=e<0;if(t&&(e=-e),e>=JOt)return t<<15|31744;if(e<QOt)return t<<15|_Ee(e*ePt);var r=KOt(e)|0;if(r===-15)return t<<15|uY;var n=_Ee((e*XOt(2,-r)-1)*uY);return n===uY?t<<15|r+16<<10:t<<15|r+15<<10|n},rPt=$Ot(DataView.prototype.setUint16);WOt({target:"DataView",proto:!0},{setFloat16:function(t,r){YOt(this);var n=ZOt(t),o=tPt(+r);return rPt(this,n,o,arguments.length>2?arguments[2]:!1)}})});var pY=N((iYr,wEe)=>{"use strict";u();var xEe=cr(),nPt=oC(),oPt=wl(),bEe=xEe.ArrayBuffer,iPt=xEe.TypeError;wEe.exports=bEe&&nPt(bEe.prototype,"byteLength","get")||function(e){if(oPt(e)!=="ArrayBuffer")throw new iPt("ArrayBuffer expected");return e.byteLength}});var fY=N((sYr,EEe)=>{"use strict";u();var aPt=cr(),sPt=hC(),lPt=pY(),uPt=aPt.DataView;EEe.exports=function(e){if(!sPt||lPt(e)!==0)return!1;try{return new uPt(e),!1}catch(t){return!0}}});var dY=N(()=>{"use strict";u();var cPt=$r(),pPt=Bi(),fPt=fY(),SEe=ArrayBuffer.prototype;cPt&&!("detached"in SEe)&&pPt(SEe,"detached",{configurable:!0,get:function(){return fPt(this)}})});var aE=N((fYr,TEe)=>{"use strict";u();var dPt=fY(),hPt=TypeError;TEe.exports=function(e){if(dPt(e))throw new hPt("ArrayBuffer is detached");return e}});var hY=N((hYr,IEe)=>{"use strict";u();var mPt=cr(),gPt=__();IEe.exports=function(e){if(gPt){try{return mPt.process.getBuiltinModule(e)}catch(t){}try{return Function("return require(\""+e+"\")")()}catch(t){}}}});var c3=N((gYr,CEe)=>{"use strict";u();var vPt=cr(),yPt=Gt(),mY=hd(),gY=dC(),MEe=vPt.structuredClone;CEe.exports=!!MEe&&!yPt(function(){if(gY==="DENO"&&mY>92||gY==="NODE"&&mY>94||gY==="BROWSER"&&mY>97)return!1;var e=new ArrayBuffer(8),t=MEe(e,{transfer:[e]});return e.byteLength!==0||t.byteLength!==8})});var xY=N((yYr,PEe)=>{"use strict";u();var bY=cr(),_Pt=hY(),bPt=c3(),xPt=bY.structuredClone,AEe=bY.ArrayBuffer,p3=bY.MessageChannel,_Y=!1,vY,OEe,f3,yY;if(bPt)_Y=function(e){xPt(e,{transfer:[e]})};else if(AEe)try{p3||(vY=_Pt("worker_threads"),vY&&(p3=vY.MessageChannel)),p3&&(OEe=new p3,f3=new AEe(2),yY=function(e){OEe.port1.postMessage(null,[e])},f3.byteLength===2&&(yY(f3),f3.byteLength===0&&(_Y=yY)))}catch(e){}PEe.exports=_Y});var MY=N((bYr,qEe)=>{"use strict";u();var SY=cr(),TY=Lt(),kEe=oC(),wPt=eE(),EPt=aE(),SPt=pY(),DEe=xY(),wY=c3(),TPt=SY.structuredClone,REe=SY.ArrayBuffer,EY=SY.DataView,IPt=Math.min,IY=REe.prototype,jEe=EY.prototype,MPt=TY(IY.slice),NEe=kEe(IY,"resizable","get"),LEe=kEe(IY,"maxByteLength","get"),CPt=TY(jEe.getInt8),APt=TY(jEe.setInt8);qEe.exports=(wY||DEe)&&function(e,t,r){var n=SPt(e),o=t===void 0?n:wPt(t),i=!NEe||!NEe(e),a;if(EPt(e),wY&&(e=TPt(e,{transfer:[e]}),n===o&&(r||i)))return e;if(n>=o&&(!r||i))a=MPt(e,0,o);else{var c=r&&!i&&LEe?{maxByteLength:LEe(e)}:void 0;a=new REe(o,c);for(var h=new EY(e),m=new EY(a),y=IPt(o,n),w=0;w<y;w++)APt(m,w,CPt(h,w))}return wY||DEe(e),a}});var CY=N(()=>{"use strict";u();var OPt=ce(),zEe=MY();zEe&&OPt({target:"ArrayBuffer",proto:!0},{transfer:function(){return zEe(this,arguments.length?arguments[0]:void 0,!0)}})});var AY=N(()=>{"use strict";u();var PPt=ce(),FEe=MY();FEe&&PPt({target:"ArrayBuffer",proto:!0},{transferToFixedLength:function(){return FEe(this,arguments.length?arguments[0]:void 0,!1)}})});var UEe=N(()=>{"use strict";u();var DPt=ce(),NPt=Lt(),LPt=Gt(),kPt=LPt(function(){return new Date(16e11).getYear()!==120}),RPt=NPt(Date.prototype.getFullYear);DPt({target:"Date",proto:!0,forced:kPt},{getYear:function(){return RPt(this)-1900}})});var VEe=N(()=>{"use strict";u();var jPt=ce(),qPt=Lt(),BEe=Date,zPt=qPt(BEe.prototype.getTime);jPt({target:"Date",stat:!0},{now:function(){return zPt(new BEe)}})});var WEe=N(()=>{"use strict";u();var FPt=ce(),GEe=Lt(),UPt=Ui(),HEe=Date.prototype,BPt=GEe(HEe.getTime),VPt=GEe(HEe.setFullYear);FPt({target:"Date",proto:!0},{setYear:function(t){BPt(this);var r=UPt(t),n=r>=0&&r<=99?r+1900:r;return VPt(this,n)}})});var $Ee=N(()=>{"use strict";u();var GPt=ce();GPt({target:"Date",proto:!0},{toGMTString:Date.prototype.toUTCString})});var yC=N((FYr,YEe)=>{"use strict";u();var HPt=Ui(),WPt=Sn(),$Pt=Pi(),YPt=RangeError;YEe.exports=function(t){var r=WPt($Pt(this)),n="",o=HPt(t);if(o<0||o===1/0)throw new YPt("Wrong number of repetitions");for(;o>0;(o>>>=1)&&(r+=r))o&1&&(n+=r);return n}});var _C=N((BYr,JEe)=>{"use strict";u();var XEe=Lt(),ZPt=mc(),ZEe=Sn(),KPt=yC(),XPt=Pi(),JPt=XEe(KPt),QPt=XEe("".slice),e4t=Math.ceil,KEe=function(e){return function(t,r,n){var o=ZEe(XPt(t)),i=ZPt(r),a=o.length,c=n===void 0?" ":ZEe(n),h,m;return i<=a||c===""?o:(h=i-a,m=JPt(c,e4t(h/c.length)),m.length>h&&(m=QPt(m,0,h)),e?o+m:m+o)}};JEe.exports={start:KEe(!1),end:KEe(!0)}});var tSe=N((GYr,eSe)=>{"use strict";u();var Py=Lt(),QEe=Gt(),x_=_C().start,t4t=RangeError,r4t=isFinite,n4t=Math.abs,Sg=Date.prototype,OY=Sg.toISOString,o4t=Py(Sg.getTime),i4t=Py(Sg.getUTCDate),a4t=Py(Sg.getUTCFullYear),s4t=Py(Sg.getUTCHours),l4t=Py(Sg.getUTCMilliseconds),u4t=Py(Sg.getUTCMinutes),c4t=Py(Sg.getUTCMonth),p4t=Py(Sg.getUTCSeconds);eSe.exports=QEe(function(){return OY.call(new Date(-5e13-1))!=="0385-07-25T07:06:39.999Z"})||!QEe(function(){OY.call(new Date(NaN))})?function(){if(!r4t(o4t(this)))throw new t4t("Invalid time value");var t=this,r=a4t(t),n=l4t(t),o=r<0?"-":r>9999?"+":"";return o+x_(n4t(r),o?6:4,0)+"-"+x_(c4t(t)+1,2,0)+"-"+x_(i4t(t),2,0)+"T"+x_(s4t(t),2,0)+":"+x_(u4t(t),2,0)+":"+x_(p4t(t),2,0)+"."+x_(n,3,0)+"Z"}:OY});var nSe=N(()=>{"use strict";u();var f4t=ce(),rSe=tSe();f4t({target:"Date",proto:!0,forced:Date.prototype.toISOString!==rSe},{toISOString:rSe})});var oSe=N(()=>{"use strict";u();var d4t=ce(),h4t=Gt(),m4t=Jn(),g4t=VM(),v4t=h4t(function(){return new Date(NaN).toJSON()!==null||Date.prototype.toJSON.call({toISOString:function(){return 1}})!==1});d4t({target:"Date",proto:!0,arity:1,forced:v4t},{toJSON:function(t){var r=m4t(this),n=g4t(r,"number");return typeof n=="number"&&!isFinite(n)?null:r.toISOString()}})});var aSe=N((JYr,iSe)=>{"use strict";u();var y4t=dr(),_4t=tW(),b4t=TypeError;iSe.exports=function(e){if(y4t(this),e==="string"||e==="default")e="string";else if(e!=="number")throw new b4t("Incorrect hint");return _4t(this,e)}});var uSe=N(()=>{"use strict";u();var x4t=$n(),w4t=ei(),E4t=aSe(),S4t=an(),sSe=S4t("toPrimitive"),lSe=Date.prototype;x4t(lSe,sSe)||w4t(lSe,sSe,E4t)});var dSe=N(()=>{"use strict";u();var pSe=Lt(),T4t=ei(),PY=Date.prototype,cSe="Invalid Date",fSe="toString",I4t=pSe(PY[fSe]),M4t=pSe(PY.getTime);String(new Date(NaN))!==cSe&&T4t(PY,fSe,function(){var t=M4t(this);return t===t?I4t(this):cSe})});var mSe=N(()=>{"use strict";u();var C4t=ce(),bC=Lt(),A4t=Sn(),O4t=bC("".charAt),P4t=bC("".charCodeAt),D4t=bC(/./.exec),N4t=bC(1 .toString),L4t=bC("".toUpperCase),k4t=/[\w*+\-./@]/,hSe=function(e,t){for(var r=N4t(e,16);r.length<t;)r="0"+r;return r};C4t({global:!0},{escape:function(t){for(var r=A4t(t),n="",o=r.length,i=0,a,c;i<o;)a=O4t(r,i++),D4t(k4t,a)?n+=a:(c=P4t(a,0),c<256?n+="%"+hSe(c,2):n+="%u"+L4t(hSe(c,4)));return n}})});var NY=N((uZr,_Se)=>{"use strict";u();var vSe=Lt(),R4t=pn(),j4t=Qr(),q4t=$n(),gSe=gc(),z4t=Vw(),ySe=Function,F4t=vSe([].concat),U4t=vSe([].join),DY={},B4t=function(e,t,r){if(!q4t(DY,t)){for(var n=[],o=0;o<t;o++)n[o]="a["+o+"]";DY[t]=ySe("C,a","return new C("+U4t(n,",")+")")}return DY[t](e,r)};_Se.exports=z4t?ySe.bind:function(t){var r=R4t(this),n=r.prototype,o=gSe(arguments,1),i=function(){var c=F4t(o,gSe(arguments));return this instanceof i?B4t(r,c.length,c):r.apply(t,c)};return j4t(n)&&(i.prototype=n),i}});var xSe=N(()=>{"use strict";u();var V4t=ce(),bSe=NY();V4t({target:"Function",proto:!0,forced:Function.bind!==bSe},{bind:bSe})});var SSe=N(()=>{"use strict";u();var G4t=Rn(),wSe=Qr(),H4t=wi(),W4t=El(),$4t=an(),Y4t=YM(),LY=$4t("hasInstance"),ESe=Function.prototype;LY in ESe||H4t.f(ESe,LY,{value:Y4t(function(e){if(!G4t(this)||!wSe(e))return!1;var t=this.prototype;return wSe(t)?W4t(t,e):e instanceof this},LY)})});var CSe=N(()=>{"use strict";u();var Z4t=$r(),K4t=u_().EXISTS,TSe=Lt(),X4t=Bi(),ISe=Function.prototype,J4t=TSe(ISe.toString),MSe=/function\b(?:\s|\/\*[\S\s]*?\*\/|\/\/[^\n\r]*[\n\r]+)*([^\s(/]*)/,Q4t=TSe(MSe.exec),eDt="name";Z4t&&!K4t&&X4t(ISe,eDt,{configurable:!0,get:function(){try{return Q4t(MSe,J4t(this))[1]}catch(e){return""}}})});var RY=N(()=>{"use strict";u();var tDt=ce(),kY=cr();tDt({global:!0,forced:kY.globalThis!==kY},{globalThis:kY})});var UY=N(()=>{"use strict";u();var rDt=ce(),nDt=cr(),oDt=au(),iDt=dr(),aDt=Rn(),sDt=gs(),lDt=Bi(),uDt=Xp(),cDt=Gt(),zY=$n(),pDt=an(),kh=Ey().IteratorPrototype,fDt=$r(),dDt=To(),jY="constructor",OSe="Iterator",ASe=pDt("toStringTag"),PSe=TypeError,qY=nDt[OSe],DSe=dDt||!aDt(qY)||qY.prototype!==kh||!cDt(function(){qY({})}),FY=function(){if(oDt(this,kh),sDt(this)===kh)throw new PSe("Abstract class Iterator not directly constructable")},NSe=function(e,t){fDt?lDt(kh,e,{configurable:!0,get:function(){return t},set:function(r){if(iDt(this),this===kh)throw new PSe("You can't redefine this property");zY(this,e)?this[e]=r:uDt(this,e,r)}}):kh[e]=t};zY(kh,ASe)||NSe(ASe,OSe);(DSe||!zY(kh,jY)||kh[jY]===Object)&&NSe(jY,FY);FY.prototype=kh;rDt({global:!0,constructor:!0,forced:DSe},{Iterator:FY})});var ta=N((IZr,LSe)=>{"use strict";u();LSe.exports=function(e){return{iterator:e,next:e.next,done:!1}}});var sE=N((CZr,kSe)=>{"use strict";u();var hDt=RangeError;kSe.exports=function(e){if(e===e)return e;throw new hDt("NaN is not allowed")}});var lE=N((OZr,RSe)=>{"use strict";u();var mDt=Ui(),gDt=RangeError;RSe.exports=function(e){var t=mDt(e);if(t<0)throw new gDt("The argument can't be less than 0");return t}});var Dy=N((DZr,BSe)=>{"use strict";u();var vDt=pr(),yDt=Na(),_Dt=ms(),bDt=Qp(),xDt=an(),jSe=Ho(),wDt=Da(),EDt=Ey().IteratorPrototype,d3=Ls(),BY=Xs(),SDt=xDt("toStringTag"),qSe="IteratorHelper",zSe="WrapForValidIterator",TDt=jSe.set,FSe=function(e){var t=jSe.getterFor(e?zSe:qSe);return bDt(yDt(EDt),{next:function(){var n=t(this);if(e)return n.nextHandler();if(n.done)return d3(void 0,!0);try{var o=n.nextHandler();return n.returnHandlerResult?o:d3(o,n.done)}catch(i){throw n.done=!0,i}},return:function(){var r=t(this),n=r.iterator;if(r.done=!0,e){var o=wDt(n,"return");return o?vDt(o,n):d3(void 0,!0)}if(r.inner)try{BY(r.inner.iterator,"normal")}catch(i){return BY(n,"throw",i)}return n&&BY(n,"normal"),d3(void 0,!0)}})},IDt=FSe(!0),USe=FSe(!1);_Dt(USe,SDt,"Iterator Helper");BSe.exports=function(e,t,r){var n=function(i,a){a?(a.iterator=i.iterator,a.next=i.next):a=i,a.type=t?zSe:qSe,a.returnHandlerResult=!!r,a.nextHandler=e,a.counter=0,a.done=!1,TDt(this,a)};return n.prototype=t?IDt:USe,n}});var xd=N((LZr,VSe)=>{"use strict";u();var MDt=cr();VSe.exports=function(e,t){var r=MDt.Iterator,n=r&&r.prototype,o=n&&n[e],i=!1;if(o)try{o.call({next:function(){return{done:!0}},return:function(){i=!0}},-1)}catch(a){a instanceof t||(i=!1)}if(!i)return o}});var WY=N(()=>{"use strict";u();var CDt=ce(),GY=pr(),HY=dr(),ADt=ta(),ODt=sE(),PDt=lE(),DDt=Xs(),NDt=Dy(),LDt=xd(),GSe=To(),VY=!GSe&&LDt("drop",RangeError),kDt=NDt(function(){for(var e=this.iterator,t=this.next,r,n;this.remaining;)if(this.remaining--,r=HY(GY(t,e)),n=this.done=!!r.done,n)return;if(r=HY(GY(t,e)),n=this.done=!!r.done,!n)return r.value});CDt({target:"Iterator",proto:!0,real:!0,forced:GSe||VY},{drop:function(t){HY(this);var r;try{r=PDt(ODt(+t))}catch(n){DDt(this,"throw",n)}return VY?GY(VY,this,r):new kDt(ADt(this),{remaining:r})}})});var YY=N(()=>{"use strict";u();var RDt=ce(),jDt=pr(),qDt=ha(),zDt=pn(),FDt=dr(),UDt=ta(),BDt=Xs(),VDt=xd(),$Y=VDt("every",TypeError);RDt({target:"Iterator",proto:!0,real:!0,forced:$Y},{every:function(t){FDt(this);try{zDt(t)}catch(o){BDt(this,"throw",o)}if($Y)return jDt($Y,this,t);var r=UDt(this),n=0;return!qDt(r,function(o,i){if(!t(o,n++))return i()},{IS_RECORD:!0,INTERRUPTED:!0}).stopped}})});var KY=N(()=>{"use strict";u();var GDt=ce(),HSe=pr(),HDt=pn(),WSe=dr(),WDt=ta(),$Dt=Dy(),YDt=VL(),$Se=To(),ZDt=Xs(),KDt=xd(),ZY=!$Se&&KDt("filter",TypeError),XDt=$Dt(function(){for(var e=this.iterator,t=this.predicate,r=this.next,n,o,i;;){if(n=WSe(HSe(r,e)),o=this.done=!!n.done,o)return;if(i=n.value,YDt(e,t,[i,this.counter++],!0))return i}});GDt({target:"Iterator",proto:!0,real:!0,forced:$Se||ZY},{filter:function(t){WSe(this);try{HDt(t)}catch(r){ZDt(this,"throw",r)}return ZY?HSe(ZY,this,t):new XDt(WDt(this),{predicate:t})}})});var JY=N(()=>{"use strict";u();var JDt=ce(),QDt=pr(),eNt=ha(),tNt=pn(),rNt=dr(),nNt=ta(),oNt=Xs(),iNt=xd(),XY=iNt("find",TypeError);JDt({target:"Iterator",proto:!0,real:!0,forced:XY},{find:function(t){rNt(this);try{tNt(t)}catch(o){oNt(this,"throw",o)}if(XY)return QDt(XY,this,t);var r=nNt(this),n=0;return eNt(r,function(o,i){if(t(o,n++))return i(o)},{IS_RECORD:!0,INTERRUPTED:!0}).result}})});var QY=N((YZr,ZSe)=>{"use strict";u();var aNt=pr(),YSe=dr(),sNt=ta(),lNt=Dh();ZSe.exports=function(e,t){(!t||typeof e!="string")&&YSe(e);var r=lNt(e);return sNt(YSe(r!==void 0?aNt(r,e):e))}});var oZ=N(()=>{"use strict";u();var uNt=ce(),tZ=pr(),cNt=pn(),rZ=dr(),pNt=ta(),fNt=QY(),dNt=Dy(),nZ=Xs(),KSe=To(),hNt=xd(),eZ=!KSe&&hNt("flatMap",TypeError),mNt=dNt(function(){for(var e=this.iterator,t=this.mapper,r,n;;){if(n=this.inner)try{if(r=rZ(tZ(n.next,n.iterator)),!r.done)return r.value;this.inner=null}catch(o){nZ(e,"throw",o)}if(r=rZ(tZ(this.next,e)),this.done=!!r.done)return;try{this.inner=fNt(t(r.value,this.counter++),!1)}catch(o){nZ(e,"throw",o)}}});uNt({target:"Iterator",proto:!0,real:!0,forced:KSe||eZ},{flatMap:function(t){rZ(this);try{cNt(t)}catch(r){nZ(this,"throw",r)}return eZ?tZ(eZ,this,t):new mNt(pNt(this),{mapper:t,inner:null})}})});var aZ=N(()=>{"use strict";u();var gNt=ce(),vNt=pr(),yNt=ha(),_Nt=pn(),bNt=dr(),xNt=ta(),wNt=Xs(),ENt=xd(),iZ=ENt("forEach",TypeError);gNt({target:"Iterator",proto:!0,real:!0,forced:iZ},{forEach:function(t){bNt(this);try{_Nt(t)}catch(o){wNt(this,"throw",o)}if(iZ)return vNt(iZ,this,t);var r=xNt(this),n=0;yNt(r,function(o){t(o,n++)},{IS_RECORD:!0})}})});var sZ=N(()=>{"use strict";u();var SNt=ce(),TNt=pr(),INt=Jn(),MNt=El(),CNt=Ey().IteratorPrototype,ANt=Dy(),ONt=QY(),PNt=To(),DNt=ANt(function(){return TNt(this.next,this.iterator)},!0);SNt({target:"Iterator",stat:!0,forced:PNt},{from:function(t){var r=ONt(typeof t=="string"?INt(t):t,!0);return MNt(CNt,r.iterator)?r.iterator:new DNt(r)}})});var h3=N(()=>{"use strict";u();var NNt=ce(),XSe=pr(),LNt=pn(),JSe=dr(),kNt=ta(),RNt=Dy(),jNt=VL(),qNt=Xs(),zNt=xd(),QSe=To(),lZ=!QSe&&zNt("map",TypeError),FNt=RNt(function(){var e=this.iterator,t=JSe(XSe(this.next,e)),r=this.done=!!t.done;if(!r)return jNt(e,this.mapper,[t.value,this.counter++],!0)});NNt({target:"Iterator",proto:!0,real:!0,forced:QSe||lZ},{map:function(t){JSe(this);try{LNt(t)}catch(r){qNt(this,"throw",r)}return lZ?XSe(lZ,this,t):new FNt(kNt(this),{mapper:t})}})});var cZ=N(()=>{"use strict";u();var UNt=ce(),BNt=ha(),VNt=pn(),GNt=dr(),HNt=ta(),WNt=Xs(),$Nt=xd(),YNt=Sl(),ZNt=Gt(),eTe=TypeError,tTe=ZNt(function(){[].keys().reduce(function(){},void 0)}),uZ=!tTe&&$Nt("reduce",eTe);UNt({target:"Iterator",proto:!0,real:!0,forced:tTe||uZ},{reduce:function(t){GNt(this);try{VNt(t)}catch(a){WNt(this,"throw",a)}var r=arguments.length<2,n=r?void 0:arguments[1];if(uZ)return YNt(uZ,this,r?[t]:[t,n]);var o=HNt(this),i=0;if(BNt(o,function(a){r?(r=!1,n=a):n=t(n,a,i),i++},{IS_RECORD:!0}),r)throw new eTe("Reduce of empty iterator with no initial value");return n}})});var fZ=N(()=>{"use strict";u();var KNt=ce(),XNt=pr(),JNt=ha(),QNt=pn(),e5t=dr(),t5t=ta(),r5t=Xs(),n5t=xd(),pZ=n5t("some",TypeError);KNt({target:"Iterator",proto:!0,real:!0,forced:pZ},{some:function(t){e5t(this);try{QNt(t)}catch(o){r5t(this,"throw",o)}if(pZ)return XNt(pZ,this,t);var r=t5t(this),n=0;return JNt(r,function(o,i){if(t(o,n++))return i()},{IS_RECORD:!0,INTERRUPTED:!0}).stopped}})});var hZ=N(()=>{"use strict";u();var o5t=ce(),rTe=pr(),nTe=dr(),i5t=ta(),a5t=sE(),s5t=lE(),l5t=Dy(),oTe=Xs(),u5t=xd(),iTe=To(),dZ=!iTe&&u5t("take",RangeError),c5t=l5t(function(){var e=this.iterator;if(!this.remaining--)return this.done=!0,oTe(e,"normal",void 0);var t=nTe(rTe(this.next,e)),r=this.done=!!t.done;if(!r)return t.value});o5t({target:"Iterator",proto:!0,real:!0,forced:iTe||dZ},{take:function(t){nTe(this);var r;try{r=s5t(a5t(+t))}catch(n){oTe(this,"throw",n)}return dZ?rTe(dZ,this,r):new c5t(i5t(this),{remaining:r})}})});var mZ=N(()=>{"use strict";u();var p5t=ce(),f5t=dr(),d5t=ha(),h5t=ta(),m5t=[].push;p5t({target:"Iterator",proto:!0,real:!0},{toArray:function(){var t=[];return d5t(h5t(f5t(this)),m5t,{that:t,IS_RECORD:!0}),t}})});var aTe=N(()=>{"use strict";u();var g5t=cr(),v5t=ku();v5t(g5t.JSON,"JSON",!0)});var m3=N((EKr,sTe)=>{"use strict";u();var y5t=Gt();sTe.exports=y5t(function(){if(typeof ArrayBuffer=="function"){var e=new ArrayBuffer(8);Object.isExtensible(e)&&Object.defineProperty(e,"a",{value:8})}})});var v3=N((TKr,uTe)=>{"use strict";u();var _5t=Gt(),b5t=Qr(),x5t=wl(),lTe=m3(),g3=Object.isExtensible,w5t=_5t(function(){g3(1)});uTe.exports=w5t||lTe?function(t){return!b5t(t)||lTe&&x5t(t)==="ArrayBuffer"?!1:g3?g3(t):!0}:g3});var Tg=N((MKr,cTe)=>{"use strict";u();var E5t=Gt();cTe.exports=!E5t(function(){return Object.isExtensible(Object.preventExtensions({}))})});var Ny=N((AKr,dTe)=>{"use strict";u();var S5t=ce(),T5t=Lt(),I5t=Hw(),M5t=Qr(),gZ=$n(),C5t=wi().f,pTe=gy(),A5t=SL(),vZ=v3(),O5t=my(),P5t=Tg(),fTe=!1,Ig=O5t("meta"),D5t=0,yZ=function(e){C5t(e,Ig,{value:{objectID:"O"+D5t++,weakData:{}}})},N5t=function(e,t){if(!M5t(e))return typeof e=="symbol"?e:(typeof e=="string"?"S":"P")+e;if(!gZ(e,Ig)){if(!vZ(e))return"F";if(!t)return"E";yZ(e)}return e[Ig].objectID},L5t=function(e,t){if(!gZ(e,Ig)){if(!vZ(e))return!0;if(!t)return!1;yZ(e)}return e[Ig].weakData},k5t=function(e){return P5t&&fTe&&vZ(e)&&!gZ(e,Ig)&&yZ(e),e},R5t=function(){j5t.enable=function(){},fTe=!0;var e=pTe.f,t=T5t([].splice),r={};r[Ig]=1,e(r).length&&(pTe.f=function(n){for(var o=e(n),i=0,a=o.length;i<a;i++)if(o[i]===Ig){t(o,i,1);break}return o},S5t({target:"Object",stat:!0,forced:!0},{getOwnPropertyNames:A5t.f}))},j5t=dTe.exports={enable:R5t,fastKey:N5t,getWeakData:L5t,onFreeze:k5t};I5t[Ig]=!0});var xC=N((PKr,mTe)=>{"use strict";u();var q5t=ce(),z5t=cr(),F5t=Lt(),hTe=$w(),U5t=ei(),B5t=Ny(),V5t=ha(),G5t=au(),H5t=Rn(),W5t=hc(),_Z=Qr(),bZ=Gt(),$5t=sC(),Y5t=ku(),Z5t=by();mTe.exports=function(e,t,r){var n=e.indexOf("Map")!==-1,o=e.indexOf("Weak")!==-1,i=n?"set":"add",a=z5t[e],c=a&&a.prototype,h=a,m={},y=function(k){var z=F5t(c[k]);U5t(c,k,k==="add"?function(G){return z(this,G===0?0:G),this}:k==="delete"?function(V){return o&&!_Z(V)?!1:z(this,V===0?0:V)}:k==="get"?function(G){return o&&!_Z(G)?void 0:z(this,G===0?0:G)}:k==="has"?function(G){return o&&!_Z(G)?!1:z(this,G===0?0:G)}:function(G,K){return z(this,G===0?0:G,K),this})},w=hTe(e,!H5t(a)||!(o||c.forEach&&!bZ(function(){new a().entries().next()})));if(w)h=r.getConstructor(t,e,n,i),B5t.enable();else if(hTe(e,!0)){var E=new h,A=E[i](o?{}:-0,1)!==E,P=bZ(function(){E.has(1)}),j=$5t(function(k){new a(k)}),D=!o&&bZ(function(){for(var k=new a,z=5;z--;)k[i](z,z);return!k.has(-0)});j||(h=t(function(k,z){G5t(k,c);var V=Z5t(new a,k,h);return W5t(z)||V5t(z,V[i],{that:V,AS_ENTRIES:n}),V}),h.prototype=c,c.constructor=h),(P||D)&&(y("delete"),y("has"),n&&y("get")),(D||A)&&y(i),o&&c.clear&&delete c.clear}return m[e]=h,q5t({global:!0,constructor:!0,forced:h!==a},m),Y5t(h,e),o||r.setStrong(h,e,n),h}});var wZ=N((NKr,xTe)=>{"use strict";u();var gTe=Na(),K5t=Bi(),vTe=Qp(),X5t=ui(),J5t=au(),Q5t=hc(),eLt=ha(),tLt=WL(),y3=Ls(),rLt=Iy(),wC=$r(),yTe=Ny().fastKey,bTe=Ho(),_Te=bTe.set,xZ=bTe.getterFor;xTe.exports={getConstructor:function(e,t,r,n){var o=e(function(m,y){J5t(m,i),_Te(m,{type:t,index:gTe(null),first:null,last:null,size:0}),wC||(m.size=0),Q5t(y)||eLt(y,m[n],{that:m,AS_ENTRIES:r})}),i=o.prototype,a=xZ(t),c=function(m,y,w){var E=a(m),A=h(m,y),P,j;return A?A.value=w:(E.last=A={index:j=yTe(y,!0),key:y,value:w,previous:P=E.last,next:null,removed:!1},E.first||(E.first=A),P&&(P.next=A),wC?E.size++:m.size++,j!=="F"&&(E.index[j]=A)),m},h=function(m,y){var w=a(m),E=yTe(y),A;if(E!=="F")return w.index[E];for(A=w.first;A;A=A.next)if(A.key===y)return A};return vTe(i,{clear:function(){for(var y=this,w=a(y),E=w.first;E;)E.removed=!0,E.previous&&(E.previous=E.previous.next=null),E=E.next;w.first=w.last=null,w.index=gTe(null),wC?w.size=0:y.size=0},delete:function(m){var y=this,w=a(y),E=h(y,m);if(E){var A=E.next,P=E.previous;delete w.index[E.index],E.removed=!0,P&&(P.next=A),A&&(A.previous=P),w.first===E&&(w.first=A),w.last===E&&(w.last=P),wC?w.size--:y.size--}return!!E},forEach:function(y){for(var w=a(this),E=X5t(y,arguments.length>1?arguments[1]:void 0),A;A=A?A.next:w.first;)for(E(A.value,A.key,this);A&&A.removed;)A=A.previous},has:function(y){return!!h(this,y)}}),vTe(i,r?{get:function(y){var w=h(this,y);return w&&w.value},set:function(y,w){return c(this,y===0?0:y,w)}}:{add:function(y){return c(this,y=y===0?0:y,y)}}),wC&&K5t(i,"size",{configurable:!0,get:function(){return a(this).size}}),o},setStrong:function(e,t,r){var n=t+" Iterator",o=xZ(t),i=xZ(n);tLt(e,t,function(a,c){_Te(this,{type:n,target:a,state:o(a),kind:c,last:null})},function(){for(var a=i(this),c=a.kind,h=a.last;h&&h.removed;)h=h.previous;return!a.target||!(a.last=h=h?h.next:a.state.first)?(a.target=null,y3(void 0,!0)):y3(c==="keys"?h.key:c==="values"?h.value:[h.key,h.value],!1)},r?"entries":"values",!r,!0),rLt(t)}}});var wTe=N(()=>{"use strict";u();var nLt=xC(),oLt=wZ();nLt("Map",function(e){return function(){return e(this,arguments.length?arguments[0]:void 0)}},oLt)});var _3=N(()=>{"use strict";u();wTe()});var ks=N((UKr,ETe)=>{"use strict";u();var b3=Lt(),EC=Map.prototype;ETe.exports={Map,set:b3(EC.set),get:b3(EC.get),has:b3(EC.has),remove:b3(EC.delete),proto:EC}});var EZ=N(()=>{"use strict";u();var iLt=ce(),aLt=Lt(),sLt=pn(),lLt=Pi(),uLt=ha(),x3=ks(),STe=To(),cLt=Gt(),TTe=x3.Map,pLt=x3.has,fLt=x3.get,dLt=x3.set,hLt=aLt([].push),mLt=STe||cLt(function(){return TTe.groupBy("ab",function(e){return e}).get("a").length!==1});iLt({target:"Map",stat:!0,forced:STe||mLt},{groupBy:function(t,r){lLt(t),sLt(r);var n=new TTe,o=0;return uLt(t,function(i){var a=r(i,o++);pLt(n,a)?hLt(fLt(n,a),i):dLt(n,a,[i])}),n}})});var SZ=N((WKr,ITe)=>{"use strict";u();var gLt=Math.log;ITe.exports=Math.log1p||function(t){var r=+t;return r>-1e-8&&r<1e-8?r-r*r/2:gLt(1+r)}});var CTe=N(()=>{"use strict";u();var vLt=ce(),yLt=SZ(),TZ=Math.acosh,_Lt=Math.log,MTe=Math.sqrt,bLt=Math.LN2,xLt=!TZ||Math.floor(TZ(Number.MAX_VALUE))!==710||TZ(1/0)!==1/0;vLt({target:"Math",stat:!0,forced:xLt},{acosh:function(t){var r=+t;return r<1?NaN:r>94906265.62425156?_Lt(r)+bLt:yLt(r-1+MTe(r-1)*MTe(r+1))}})});var PTe=N(()=>{"use strict";u();var wLt=ce(),ATe=Math.asinh,ELt=Math.log,SLt=Math.sqrt;function OTe(e){var t=+e;return!isFinite(t)||t===0?t:t<0?-OTe(-t):ELt(t+SLt(t*t+1))}var TLt=!(ATe&&1/ATe(0)>0);wLt({target:"Math",stat:!0,forced:TLt},{asinh:OTe})});var NTe=N(()=>{"use strict";u();var ILt=ce(),DTe=Math.atanh,MLt=Math.log,CLt=!(DTe&&1/DTe(-0)<0);ILt({target:"Math",stat:!0,forced:CLt},{atanh:function(t){var r=+t;return r===0?r:MLt((1+r)/(1-r))/2}})});var LTe=N(()=>{"use strict";u();var ALt=ce(),OLt=JL(),PLt=Math.abs,DLt=Math.pow;ALt({target:"Math",stat:!0},{cbrt:function(t){var r=+t;return OLt(r)*DLt(PLt(r),1/3)}})});var kTe=N(()=>{"use strict";u();var NLt=ce(),LLt=Math.floor,kLt=Math.log,RLt=Math.LOG2E;NLt({target:"Math",stat:!0},{clz32:function(t){var r=t>>>0;return r?31-LLt(kLt(r+.5)*RLt):32}})});var TC=N((uXr,RTe)=>{"use strict";u();var SC=Math.expm1,jLt=Math.exp;RTe.exports=!SC||SC(10)>22025.465794806718||SC(10)<22025.465794806718||SC(-2e-17)!==-2e-17?function(t){var r=+t;return r===0?r:r>-1e-6&&r<1e-6?r+r*r/2:jLt(r)-1}:SC});var qTe=N(()=>{"use strict";u();var qLt=ce(),zLt=TC(),jTe=Math.cosh,FLt=Math.abs,IZ=Math.E,ULt=!jTe||jTe(710)===1/0;qLt({target:"Math",stat:!0,forced:ULt},{cosh:function(t){var r=zLt(FLt(t)-1)+1;return(r+1/(r*IZ*IZ))*(IZ/2)}})});var FTe=N(()=>{"use strict";u();var BLt=ce(),zTe=TC();BLt({target:"Math",stat:!0,forced:zTe!==Math.expm1},{expm1:zTe})});var UTe=N(()=>{"use strict";u();var VLt=ce(),GLt=QL();VLt({target:"Math",stat:!0},{fround:GLt})});var MZ=N(()=>{"use strict";u();var HLt=ce(),WLt=B$(),$Lt=.0009765625,YLt=65504,ZLt=6103515625e-14;HLt({target:"Math",stat:!0},{f16round:function(t){return WLt(t,$Lt,YLt,ZLt)}})});var VTe=N(()=>{"use strict";u();var KLt=ce(),BTe=Math.hypot,XLt=Math.abs,JLt=Math.sqrt,QLt=!!BTe&&BTe(1/0,NaN)!==1/0;KLt({target:"Math",stat:!0,arity:2,forced:QLt},{hypot:function(t,r){for(var n=0,o=0,i=arguments.length,a=0,c,h;o<i;)c=XLt(arguments[o++]),a<c?(h=a/c,n=n*h*h+1,a=c):c>0?(h=c/a,n+=h*h):n+=c;return a===1/0?1/0:a*JLt(n)}})});var HTe=N(()=>{"use strict";u();var e3t=ce(),t3t=Gt(),GTe=Math.imul,r3t=t3t(function(){return GTe(4294967295,5)!==-5||GTe.length!==2});e3t({target:"Math",stat:!0,forced:r3t},{imul:function(t,r){var n=65535,o=+t,i=+r,a=n&o,c=n&i;return 0|a*c+((n&o>>>16)*c+a*(n&i>>>16)<<16>>>0)}})});var CZ=N((AXr,WTe)=>{"use strict";u();var n3t=Math.log,o3t=Math.LOG10E;WTe.exports=Math.log10||function(t){return n3t(t)*o3t}});var $Te=N(()=>{"use strict";u();var i3t=ce(),a3t=CZ();i3t({target:"Math",stat:!0},{log10:a3t})});var YTe=N(()=>{"use strict";u();var s3t=ce(),l3t=SZ();s3t({target:"Math",stat:!0},{log1p:l3t})});var ZTe=N(()=>{"use strict";u();var u3t=ce(),c3t=lY();u3t({target:"Math",stat:!0},{log2:c3t})});var KTe=N(()=>{"use strict";u();var p3t=ce(),f3t=JL();p3t({target:"Math",stat:!0},{sign:f3t})});var QTe=N(()=>{"use strict";u();var d3t=ce(),h3t=Gt(),XTe=TC(),m3t=Math.abs,JTe=Math.exp,g3t=Math.E,v3t=h3t(function(){return Math.sinh(-2e-17)!==-2e-17});d3t({target:"Math",stat:!0,forced:v3t},{sinh:function(t){var r=+t;return m3t(r)<1?(XTe(r)-XTe(-r))/2:(JTe(r-1)-JTe(-r-1))*(g3t/2)}})});var r2e=N(()=>{"use strict";u();var y3t=ce(),e2e=TC(),t2e=Math.exp;y3t({target:"Math",stat:!0},{tanh:function(t){var r=+t,n=e2e(r),o=e2e(-r);return n===1/0?1:o===1/0?-1:(n-o)/(t2e(r)+t2e(-r))}})});var n2e=N(()=>{"use strict";u();var _3t=ku();_3t(Math,"Math",!0)});var o2e=N(()=>{"use strict";u();var b3t=ce(),x3t=_W();b3t({target:"Math",stat:!0},{trunc:x3t})});var IC=N((tJr,i2e)=>{"use strict";u();var w3t=Lt();i2e.exports=w3t(1 .valueOf)});var w_=N((nJr,a2e)=>{"use strict";u();a2e.exports=`	
\v\f\r \xA0\u1680\u2000\u2001\u2002\u2003\u2004\u2005\u2006\u2007\u2008\u2009\u200A\u202F\u205F\u3000\u2028\u2029\uFEFF`});var E_=N((iJr,l2e)=>{"use strict";u();var E3t=Lt(),S3t=Pi(),T3t=Sn(),OZ=w_(),s2e=E3t("".replace),I3t=RegExp("^["+OZ+"]+"),M3t=RegExp("(^|[^"+OZ+"])["+OZ+"]+$"),AZ=function(e){return function(t){var r=T3t(S3t(t));return e&1&&(r=s2e(r,I3t,"")),e&2&&(r=s2e(r,M3t,"$1")),r}};l2e.exports={start:AZ(1),end:AZ(2),trim:AZ(3)}});var m2e=N(()=>{"use strict";u();var C3t=ce(),PZ=To(),A3t=$r(),p2e=cr(),DZ=TL(),f2e=Lt(),O3t=$w(),u2e=$n(),P3t=by(),D3t=El(),N3t=mg(),d2e=VM(),L3t=Gt(),k3t=gy().f,R3t=Zs().f,j3t=wi().f,q3t=IC(),z3t=E_().trim,MC="Number",uE=p2e[MC],c2e=DZ[MC],NZ=uE.prototype,F3t=p2e.TypeError,U3t=f2e("".slice),w3=f2e("".charCodeAt),B3t=function(e){var t=d2e(e,"number");return typeof t=="bigint"?t:V3t(t)},V3t=function(e){var t=d2e(e,"number"),r,n,o,i,a,c,h,m;if(N3t(t))throw new F3t("Cannot convert a Symbol value to a number");if(typeof t=="string"&&t.length>2){if(t=z3t(t),r=w3(t,0),r===43||r===45){if(n=w3(t,2),n===88||n===120)return NaN}else if(r===48){switch(w3(t,1)){case 66:case 98:o=2,i=49;break;case 79:case 111:o=8,i=55;break;default:return+t}for(a=U3t(t,2),c=a.length,h=0;h<c;h++)if(m=w3(a,h),m<48||m>i)return NaN;return parseInt(a,o)}}return+t},LZ=O3t(MC,!uE(" 0o1")||!uE("0b1")||uE("+0x1")),G3t=function(e){return D3t(NZ,e)&&L3t(function(){q3t(e)})},E3=function(t){var r=arguments.length<1?0:uE(B3t(t));return G3t(this)?P3t(Object(r),this,E3):r};E3.prototype=NZ;LZ&&!PZ&&(NZ.constructor=E3);C3t({global:!0,constructor:!0,wrap:!0,forced:LZ},{Number:E3});var h2e=function(e,t){for(var r=A3t?k3t(t):"MAX_VALUE,MIN_VALUE,NaN,NEGATIVE_INFINITY,POSITIVE_INFINITY,EPSILON,MAX_SAFE_INTEGER,MIN_SAFE_INTEGER,isFinite,isInteger,isNaN,isSafeInteger,parseFloat,parseInt,fromString,range".split(","),n=0,o;r.length>n;n++)u2e(t,o=r[n])&&!u2e(e,o)&&j3t(e,o,R3t(t,o))};PZ&&c2e&&h2e(DZ[MC],c2e);(LZ||PZ)&&h2e(DZ[MC],uE)});var g2e=N(()=>{"use strict";u();var H3t=ce();H3t({target:"Number",stat:!0,nonConfigurable:!0,nonWritable:!0},{EPSILON:Math.pow(2,-52)})});var kZ=N((dJr,v2e)=>{"use strict";u();var W3t=cr(),$3t=W3t.isFinite;v2e.exports=Number.isFinite||function(t){return typeof t=="number"&&$3t(t)}});var y2e=N(()=>{"use strict";u();var Y3t=ce(),Z3t=kZ();Y3t({target:"Number",stat:!0},{isFinite:Z3t})});var S3=N((yJr,_2e)=>{"use strict";u();var K3t=Qr(),X3t=Math.floor;_2e.exports=Number.isInteger||function(t){return!K3t(t)&&isFinite(t)&&X3t(t)===t}});var b2e=N(()=>{"use strict";u();var J3t=ce(),Q3t=S3();J3t({target:"Number",stat:!0},{isInteger:Q3t})});var x2e=N(()=>{"use strict";u();var ekt=ce();ekt({target:"Number",stat:!0},{isNaN:function(t){return t!==t}})});var w2e=N(()=>{"use strict";u();var tkt=ce(),rkt=S3(),nkt=Math.abs;tkt({target:"Number",stat:!0},{isSafeInteger:function(t){return rkt(t)&&nkt(t)<=9007199254740991}})});var E2e=N(()=>{"use strict";u();var okt=ce();okt({target:"Number",stat:!0,nonConfigurable:!0,nonWritable:!0},{MAX_SAFE_INTEGER:9007199254740991})});var S2e=N(()=>{"use strict";u();var ikt=ce();ikt({target:"Number",stat:!0,nonConfigurable:!0,nonWritable:!0},{MIN_SAFE_INTEGER:-9007199254740991})});var RZ=N((kJr,C2e)=>{"use strict";u();var M2e=cr(),akt=Gt(),skt=Lt(),lkt=Sn(),ukt=E_().trim,ckt=w_(),pkt=skt("".charAt),T3=M2e.parseFloat,T2e=M2e.Symbol,I2e=T2e&&T2e.iterator,fkt=1/T3(ckt+"-0")!==-1/0||I2e&&!akt(function(){T3(Object(I2e))});C2e.exports=fkt?function(t){var r=ukt(lkt(t)),n=T3(r);return n===0&&pkt(r,0)==="-"?-0:n}:T3});var O2e=N(()=>{"use strict";u();var dkt=ce(),A2e=RZ();dkt({target:"Number",stat:!0,forced:Number.parseFloat!==A2e},{parseFloat:A2e})});var jZ=N((FJr,R2e)=>{"use strict";u();var L2e=cr(),hkt=Gt(),mkt=Lt(),gkt=Sn(),vkt=E_().trim,P2e=w_(),CC=L2e.parseInt,D2e=L2e.Symbol,N2e=D2e&&D2e.iterator,k2e=/^[+-]?0x/i,ykt=mkt(k2e.exec),_kt=CC(P2e+"08")!==8||CC(P2e+"0x16")!==22||N2e&&!hkt(function(){CC(Object(N2e))});R2e.exports=_kt?function(t,r){var n=vkt(gkt(t));return CC(n,r>>>0||(ykt(k2e,n)?16:10))}:CC});var q2e=N(()=>{"use strict";u();var bkt=ce(),j2e=jZ();bkt({target:"Number",stat:!0,forced:Number.parseInt!==j2e},{parseInt:j2e})});var V2e=N(()=>{"use strict";u();var xkt=ce(),zZ=Lt(),wkt=Ui(),Ekt=IC(),Skt=yC(),Tkt=CZ(),qZ=Gt(),Ikt=RangeError,z2e=String,Mkt=isFinite,Ckt=Math.abs,Akt=Math.floor,F2e=Math.pow,Okt=Math.round,Rh=zZ(1 .toExponential),Pkt=zZ(Skt),U2e=zZ("".slice),B2e=Rh(-69e-12,4)==="-6.9000e-11"&&Rh(1.255,2)==="1.25e+0"&&Rh(12345,3)==="1.235e+4"&&Rh(25,0)==="3e+1",Dkt=function(){return qZ(function(){Rh(1,1/0)})&&qZ(function(){Rh(1,-1/0)})},Nkt=function(){return!qZ(function(){Rh(1/0,1/0),Rh(NaN,1/0)})},Lkt=!B2e||!Dkt()||!Nkt();xkt({target:"Number",proto:!0,forced:Lkt},{toExponential:function(t){var r=Ekt(this);if(t===void 0)return Rh(r);var n=wkt(t);if(!Mkt(r))return String(r);if(n<0||n>20)throw new Ikt("Incorrect fraction digits");if(B2e)return Rh(r,n);var o="",i,a,c,h;if(r<0&&(o="-",r=-r),r===0)a=0,i=Pkt("0",n+1);else{var m=Tkt(r);a=Akt(m);var y=F2e(10,a-n),w=Okt(r/y);2*r>=(2*w+1)*y&&(w+=1),w>=F2e(10,n+1)&&(w/=10,a+=1),i=z2e(w)}return n!==0&&(i=U2e(i,0,1)+"."+U2e(i,1)),a===0?(c="+",h="0"):(c=a>0?"+":"-",h=z2e(Ckt(a))),i+="e"+c+h,o+i}})});var Z2e=N(()=>{"use strict";u();var kkt=ce(),BZ=Lt(),Rkt=Ui(),jkt=IC(),qkt=yC(),G2e=Gt(),zkt=RangeError,$2e=String,Y2e=Math.floor,UZ=BZ(qkt),H2e=BZ("".slice),AC=BZ(1 .toFixed),pE=function(e,t,r){return t===0?r:t%2===1?pE(e,t-1,r*e):pE(e*e,t/2,r)},Fkt=function(e){for(var t=0,r=e;r>=4096;)t+=12,r/=4096;for(;r>=2;)t+=1,r/=2;return t},cE=function(e,t,r){for(var n=-1,o=r;++n<6;)o+=t*e[n],e[n]=o%1e7,o=Y2e(o/1e7)},FZ=function(e,t){for(var r=6,n=0;--r>=0;)n+=e[r],e[r]=Y2e(n/t),n=n%t*1e7},W2e=function(e){for(var t=6,r="";--t>=0;)if(r!==""||t===0||e[t]!==0){var n=$2e(e[t]);r=r===""?n:r+UZ("0",7-n.length)+n}return r},Ukt=G2e(function(){return AC(8e-5,3)!=="0.000"||AC(.9,0)!=="1"||AC(1.255,2)!=="1.25"||AC(0xde0b6b3a7640080,0)!=="1000000000000000128"})||!G2e(function(){AC({})});kkt({target:"Number",proto:!0,forced:Ukt},{toFixed:function(t){var r=jkt(this),n=Rkt(t),o=[0,0,0,0,0,0],i="",a="0",c,h,m,y;if(n<0||n>20)throw new zkt("Incorrect fraction digits");if(r!==r)return"NaN";if(r<=-1e21||r>=1e21)return $2e(r);if(r<0&&(i="-",r=-r),r>1e-21)if(c=Fkt(r*pE(2,69,1))-69,h=c<0?r*pE(2,-c,1):r/pE(2,c,1),h*=4503599627370496,c=52-c,c>0){for(cE(o,0,h),m=n;m>=7;)cE(o,1e7,0),m-=7;for(cE(o,pE(10,m,1),0),m=c-1;m>=23;)FZ(o,1<<23),m-=23;FZ(o,1<<m),cE(o,1,1),FZ(o,2),a=W2e(o)}else cE(o,0,h),cE(o,1<<-c,0),a=W2e(o)+UZ("0",n);return n>0?(y=a.length,a=i+(y<=n?"0."+UZ("0",n-y)+a:H2e(a,0,y-n)+"."+H2e(a,y-n))):a=i+a,a}})});var J2e=N(()=>{"use strict";u();var Bkt=ce(),Vkt=Lt(),K2e=Gt(),X2e=IC(),I3=Vkt(1 .toPrecision),Gkt=K2e(function(){return I3(1,void 0)!=="1"})||!K2e(function(){I3({})});Bkt({target:"Number",proto:!0,forced:Gkt},{toPrecision:function(t){return t===void 0?I3(X2e(this)):I3(X2e(this),t)}})});var GZ=N((eQr,tIe)=>{"use strict";u();var Q2e=$r(),Hkt=Lt(),Wkt=pr(),$kt=Gt(),VZ=f_(),Ykt=ZM(),Zkt=UM(),Kkt=Jn(),Xkt=hg(),fE=Object.assign,eIe=Object.defineProperty,Jkt=Hkt([].concat);tIe.exports=!fE||$kt(function(){if(Q2e&&fE({b:1},fE(eIe({},"a",{enumerable:!0,get:function(){eIe(this,"b",{value:3,enumerable:!1})}}),{b:2})).b!==1)return!0;var e={},t={},r=Symbol("assign detection"),n="abcdefghijklmnopqrst";return e[r]=7,n.split("").forEach(function(o){t[o]=o}),fE({},e)[r]!==7||VZ(fE({},t)).join("")!==n})?function(t,r){for(var n=Kkt(t),o=arguments.length,i=1,a=Ykt.f,c=Zkt.f;o>i;)for(var h=Xkt(arguments[i++]),m=a?Jkt(VZ(h),a(h)):VZ(h),y=m.length,w=0,E;y>w;)E=m[w++],(!Q2e||Wkt(c,h,E))&&(n[E]=h[E]);return n}:fE});var nIe=N(()=>{"use strict";u();var Qkt=ce(),rIe=GZ();Qkt({target:"Object",stat:!0,arity:2,forced:Object.assign!==rIe},{assign:rIe})});var oIe=N(()=>{"use strict";u();var eRt=ce(),tRt=$r(),rRt=Na();eRt({target:"Object",stat:!0,sham:!tRt},{create:rRt})});var OC=N((lQr,aIe)=>{"use strict";u();var nRt=To(),oRt=cr(),iRt=Gt(),iIe=XL();aIe.exports=nRt||!iRt(function(){if(!(iIe&&iIe<535)){var e=Math.random();__defineSetter__.call(null,e,function(){}),delete oRt[e]}})});var sIe=N(()=>{"use strict";u();var aRt=ce(),sRt=$r(),lRt=OC(),uRt=pn(),cRt=Jn(),pRt=wi();sRt&&aRt({target:"Object",proto:!0,forced:lRt},{__defineGetter__:function(t,r){pRt.f(cRt(this),t,{get:uRt(r),enumerable:!0,configurable:!0})}})});var uIe=N(()=>{"use strict";u();var fRt=ce(),dRt=$r(),lIe=xL().f;fRt({target:"Object",stat:!0,forced:Object.defineProperties!==lIe,sham:!dRt},{defineProperties:lIe})});var pIe=N(()=>{"use strict";u();var hRt=ce(),mRt=$r(),cIe=wi().f;hRt({target:"Object",stat:!0,forced:Object.defineProperty!==cIe,sham:!mRt},{defineProperty:cIe})});var fIe=N(()=>{"use strict";u();var gRt=ce(),vRt=$r(),yRt=OC(),_Rt=pn(),bRt=Jn(),xRt=wi();vRt&&gRt({target:"Object",proto:!0,forced:yRt},{__defineSetter__:function(t,r){xRt.f(bRt(this),t,{set:_Rt(r),enumerable:!0,configurable:!0})}})});var HZ=N((wQr,vIe)=>{"use strict";u();var hIe=$r(),wRt=Gt(),mIe=Lt(),ERt=gs(),SRt=f_(),TRt=hs(),IRt=UM().f,gIe=mIe(IRt),MRt=mIe([].push),CRt=hIe&&wRt(function(){var e=Object.create(null);return e[2]=2,!gIe(e,2)}),dIe=function(e){return function(t){for(var r=TRt(t),n=SRt(r),o=CRt&&ERt(r)===null,i=n.length,a=0,c=[],h;i>a;)h=n[a++],(!hIe||(o?h in r:gIe(r,h)))&&MRt(c,e?[h,r[h]]:r[h]);return c}};vIe.exports={entries:dIe(!0),values:dIe(!1)}});var yIe=N(()=>{"use strict";u();var ARt=ce(),ORt=HZ().entries;ARt({target:"Object",stat:!0},{entries:function(t){return ORt(t)}})});var _Ie=N(()=>{"use strict";u();var PRt=ce(),DRt=Tg(),NRt=Gt(),LRt=Qr(),kRt=Ny().onFreeze,WZ=Object.freeze,RRt=NRt(function(){WZ(1)});PRt({target:"Object",stat:!0,forced:RRt,sham:!DRt},{freeze:function(t){return WZ&&LRt(t)?WZ(kRt(t)):t}})});var bIe=N(()=>{"use strict";u();var jRt=ce(),qRt=ha(),zRt=Xp();jRt({target:"Object",stat:!0},{fromEntries:function(t){var r={};return qRt(t,function(n,o){zRt(r,n,o)},{AS_ENTRIES:!0}),r}})});var EIe=N(()=>{"use strict";u();var FRt=ce(),URt=Gt(),BRt=hs(),xIe=Zs().f,wIe=$r(),VRt=!wIe||URt(function(){xIe(1)});FRt({target:"Object",stat:!0,forced:VRt,sham:!wIe},{getOwnPropertyDescriptor:function(t,r){return xIe(BRt(t),r)}})});var SIe=N(()=>{"use strict";u();var GRt=ce(),HRt=$r(),WRt=vL(),$Rt=hs(),YRt=Zs(),ZRt=Xp();GRt({target:"Object",stat:!0,sham:!HRt},{getOwnPropertyDescriptors:function(t){for(var r=$Rt(t),n=YRt.f,o=WRt(r),i={},a=0,c,h;o.length>a;)h=n(r,c=o[a++]),h!==void 0&&ZRt(i,c,h);return i}})});var TIe=N(()=>{"use strict";u();var KRt=ce(),XRt=Gt(),JRt=SL().f,QRt=XRt(function(){return!Object.getOwnPropertyNames(1)});KRt({target:"Object",stat:!0,forced:QRt},{getOwnPropertyNames:JRt})});var MIe=N(()=>{"use strict";u();var e6t=ce(),t6t=Gt(),r6t=Jn(),IIe=gs(),n6t=jL(),o6t=t6t(function(){IIe(1)});e6t({target:"Object",stat:!0,forced:o6t,sham:!n6t},{getPrototypeOf:function(t){return IIe(r6t(t))}})});var $Z=N(()=>{"use strict";u();var i6t=ce(),a6t=cn(),s6t=Lt(),l6t=pn(),u6t=Pi(),c6t=Oh(),p6t=ha(),f6t=Gt(),CIe=Object.groupBy,d6t=a6t("Object","create"),h6t=s6t([].push),m6t=!CIe||f6t(function(){return CIe("ab",function(e){return e}).a.length!==1});i6t({target:"Object",stat:!0,forced:m6t},{groupBy:function(t,r){u6t(t),l6t(r);var n=d6t(null),o=0;return p6t(t,function(i){var a=c6t(r(i,o++));a in n?h6t(n[a],i):n[a]=[i]}),n}})});var YZ=N(()=>{"use strict";u();var g6t=ce(),v6t=$n();g6t({target:"Object",stat:!0},{hasOwn:v6t})});var M3=N((XQr,AIe)=>{"use strict";u();AIe.exports=Object.is||function(t,r){return t===r?t!==0||1/t===1/r:t!==t&&r!==r}});var OIe=N(()=>{"use strict";u();var y6t=ce(),_6t=M3();y6t({target:"Object",stat:!0},{is:_6t})});var DIe=N(()=>{"use strict";u();var b6t=ce(),PIe=v3();b6t({target:"Object",stat:!0,forced:Object.isExtensible!==PIe},{isExtensible:PIe})});var LIe=N(()=>{"use strict";u();var x6t=ce(),w6t=Gt(),E6t=Qr(),S6t=wl(),NIe=m3(),ZZ=Object.isFrozen,T6t=NIe||w6t(function(){ZZ(1)});x6t({target:"Object",stat:!0,forced:T6t},{isFrozen:function(t){return!E6t(t)||NIe&&S6t(t)==="ArrayBuffer"?!0:ZZ?ZZ(t):!1}})});var RIe=N(()=>{"use strict";u();var I6t=ce(),M6t=Gt(),C6t=Qr(),A6t=wl(),kIe=m3(),KZ=Object.isSealed,O6t=kIe||M6t(function(){KZ(1)});I6t({target:"Object",stat:!0,forced:O6t},{isSealed:function(t){return!C6t(t)||kIe&&A6t(t)==="ArrayBuffer"?!0:KZ?KZ(t):!1}})});var qIe=N(()=>{"use strict";u();var P6t=ce(),D6t=Jn(),jIe=f_(),N6t=Gt(),L6t=N6t(function(){jIe(1)});P6t({target:"Object",stat:!0,forced:L6t},{keys:function(t){return jIe(D6t(t))}})});var zIe=N(()=>{"use strict";u();var k6t=ce(),R6t=$r(),j6t=OC(),q6t=Jn(),z6t=Oh(),F6t=gs(),U6t=Zs().f;R6t&&k6t({target:"Object",proto:!0,forced:j6t},{__lookupGetter__:function(t){var r=q6t(this),n=z6t(t),o;do if(o=U6t(r,n))return o.get;while(r=F6t(r))}})});var FIe=N(()=>{"use strict";u();var B6t=ce(),V6t=$r(),G6t=OC(),H6t=Jn(),W6t=Oh(),$6t=gs(),Y6t=Zs().f;V6t&&B6t({target:"Object",proto:!0,forced:G6t},{__lookupSetter__:function(t){var r=H6t(this),n=W6t(t),o;do if(o=Y6t(r,n))return o.set;while(r=$6t(r))}})});var UIe=N(()=>{"use strict";u();var Z6t=ce(),K6t=Qr(),X6t=Ny().onFreeze,J6t=Tg(),Q6t=Gt(),XZ=Object.preventExtensions,ejt=Q6t(function(){XZ(1)});Z6t({target:"Object",stat:!0,forced:ejt,sham:!J6t},{preventExtensions:function(t){return XZ&&K6t(t)?XZ(X6t(t)):t}})});var WIe=N(()=>{"use strict";u();var tjt=$r(),rjt=Bi(),njt=Qr(),ojt=WW(),ijt=Jn(),ajt=Pi(),BIe=Object.getPrototypeOf,VIe=Object.setPrototypeOf,GIe=Object.prototype,HIe="__proto__";if(tjt&&BIe&&VIe&&!(HIe in GIe))try{rjt(GIe,HIe,{configurable:!0,get:function(){return BIe(ijt(this))},set:function(t){var r=ajt(this);ojt(t)&&njt(r)&&VIe(r,t)}})}catch(e){}});var $Ie=N(()=>{"use strict";u();var sjt=ce(),ljt=Qr(),ujt=Ny().onFreeze,cjt=Tg(),pjt=Gt(),JZ=Object.seal,fjt=pjt(function(){JZ(1)});sjt({target:"Object",stat:!0,forced:fjt,sham:!cjt},{seal:function(t){return JZ&&ljt(t)?JZ(ujt(t)):t}})});var YIe=N(()=>{"use strict";u();var djt=ce(),hjt=Kp();djt({target:"Object",stat:!0},{setPrototypeOf:hjt})});var KIe=N((Den,ZIe)=>{"use strict";u();var mjt=_L(),gjt=Lu();ZIe.exports=mjt?{}.toString:function(){return"[object "+gjt(this)+"]"}});var XIe=N(()=>{"use strict";u();var vjt=_L(),yjt=ei(),_jt=KIe();vjt||yjt(Object.prototype,"toString",_jt,{unsafe:!0})});var JIe=N(()=>{"use strict";u();var bjt=ce(),xjt=HZ().values;bjt({target:"Object",stat:!0},{values:function(t){return xjt(t)}})});var eMe=N(()=>{"use strict";u();var wjt=ce(),QIe=RZ();wjt({global:!0,forced:parseFloat!==QIe},{parseFloat:QIe})});var rMe=N(()=>{"use strict";u();var Ejt=ce(),tMe=jZ();Ejt({global:!0,forced:parseInt!==tMe},{parseInt:tMe})});var PC=N((Wen,nMe)=>{"use strict";u();var Sjt=yd(),Tjt=hy(),Ijt=TypeError;nMe.exports=function(e){if(Sjt(e))return e;throw new Ijt(Tjt(e)+" is not a constructor")}});var DC=N((Yen,iMe)=>{"use strict";u();var oMe=dr(),Mjt=PC(),Cjt=hc(),Ajt=an(),Ojt=Ajt("species");iMe.exports=function(e,t){var r=oMe(e).constructor,n;return r===void 0||Cjt(n=oMe(r)[Ojt])?t:Mjt(n)}});var hp=N((Ken,aMe)=>{"use strict";u();var Pjt=TypeError;aMe.exports=function(e,t){if(e<t)throw new Pjt("Not enough arguments");return e}});var QZ=N((Jen,sMe)=>{"use strict";u();var Djt=fd();sMe.exports=/(?:ipad|iphone|ipod).*applewebkit/i.test(Djt)});var kC=N((etn,gMe)=>{"use strict";u();var mp=cr(),Njt=Sl(),Ljt=ui(),lMe=Rn(),kjt=$n(),mMe=Gt(),uMe=wW(),Rjt=gc(),cMe=GM(),jjt=hp(),qjt=QZ(),zjt=__(),iK=mp.setImmediate,aK=mp.clearImmediate,Fjt=mp.process,eK=mp.Dispatch,Ujt=mp.Function,pMe=mp.MessageChannel,Bjt=mp.String,tK=0,NC={},fMe="onreadystatechange",LC,S_,rK,nK;mMe(function(){LC=mp.location});var sK=function(e){if(kjt(NC,e)){var t=NC[e];delete NC[e],t()}},oK=function(e){return function(){sK(e)}},dMe=function(e){sK(e.data)},hMe=function(e){mp.postMessage(Bjt(e),LC.protocol+"//"+LC.host)};(!iK||!aK)&&(iK=function(t){jjt(arguments.length,1);var r=lMe(t)?t:Ujt(t),n=Rjt(arguments,1);return NC[++tK]=function(){Njt(r,void 0,n)},S_(tK),tK},aK=function(t){delete NC[t]},zjt?S_=function(e){Fjt.nextTick(oK(e))}:eK&&eK.now?S_=function(e){eK.now(oK(e))}:pMe&&!qjt?(rK=new pMe,nK=rK.port2,rK.port1.onmessage=dMe,S_=Ljt(nK.postMessage,nK)):mp.addEventListener&&lMe(mp.postMessage)&&!mp.importScripts&&LC&&LC.protocol!=="file:"&&!mMe(hMe)?(S_=hMe,mp.addEventListener("message",dMe,!1)):fMe in cMe("script")?S_=function(e){uMe.appendChild(cMe("script"))[fMe]=function(){uMe.removeChild(this),sK(e)}}:S_=function(e){setTimeout(oK(e),0)});gMe.exports={set:iK,clear:aK}});var lK=N((rtn,yMe)=>{"use strict";u();var vMe=cr(),Vjt=$r(),Gjt=Object.getOwnPropertyDescriptor;yMe.exports=function(e){if(!Vjt)return vMe[e];var t=Gjt(vMe,e);return t&&t.value}});var uK=N((otn,bMe)=>{"use strict";u();var _Me=function(){this.head=null,this.tail=null};_Me.prototype={add:function(e){var t={item:e,next:null},r=this.tail;r?r.next=t:this.head=t,this.tail=t},get:function(){var e=this.head;if(e){var t=this.head=e.next;return t===null&&(this.tail=null),e.item}}};bMe.exports=_Me});var wMe=N((atn,xMe)=>{"use strict";u();var Hjt=fd();xMe.exports=/ipad|iphone|ipod/i.test(Hjt)&&typeof Pebble!="undefined"});var SMe=N((ltn,EMe)=>{"use strict";u();var Wjt=fd();EMe.exports=/web0s(?!.*chrome)/i.test(Wjt)});var mK=N((ctn,OMe)=>{"use strict";u();var hE=cr(),$jt=lK(),TMe=ui(),cK=kC().set,Yjt=uK(),Zjt=QZ(),Kjt=wMe(),Xjt=SMe(),pK=__(),IMe=hE.MutationObserver||hE.WebKitMutationObserver,MMe=hE.document,CMe=hE.process,C3=hE.Promise,hK=$jt("queueMicrotask"),dE,fK,dK,A3,AMe;hK||(RC=new Yjt,jC=function(){var e,t;for(pK&&(e=CMe.domain)&&e.exit();t=RC.get();)try{t()}catch(r){throw RC.head&&dE(),r}e&&e.enter()},!Zjt&&!pK&&!Xjt&&IMe&&MMe?(fK=!0,dK=MMe.createTextNode(""),new IMe(jC).observe(dK,{characterData:!0}),dE=function(){dK.data=fK=!fK}):!Kjt&&C3&&C3.resolve?(A3=C3.resolve(void 0),A3.constructor=C3,AMe=TMe(A3.then,A3),dE=function(){AMe(jC)}):pK?dE=function(){CMe.nextTick(jC)}:(cK=TMe(cK,hE),dE=function(){cK(jC)}),hK=function(e){RC.head||dE(),RC.add(e)});var RC,jC;OMe.exports=hK});var gK=N((ftn,PMe)=>{"use strict";u();PMe.exports=function(e,t){try{arguments.length===1?console.error(e):console.error(e,t)}catch(r){}}});var Ly=N((htn,DMe)=>{"use strict";u();DMe.exports=function(e){try{return{error:!1,value:e()}}catch(t){return{error:!0,value:t}}}});var T_=N((gtn,NMe)=>{"use strict";u();var Jjt=cr();NMe.exports=Jjt.Promise});var mE=N((ytn,jMe)=>{"use strict";u();var Qjt=cr(),qC=T_(),eqt=Rn(),tqt=$w(),rqt=HM(),nqt=an(),LMe=dC(),oqt=To(),vK=hd(),kMe=qC&&qC.prototype,iqt=nqt("species"),yK=!1,RMe=eqt(Qjt.PromiseRejectionEvent),aqt=tqt("Promise",function(){var e=rqt(qC),t=e!==String(qC);if(!t&&vK===66||oqt&&!(kMe.catch&&kMe.finally))return!0;if(!vK||vK<51||!/native code/.test(e)){var r=new qC(function(i){i(1)}),n=function(i){i(function(){},function(){})},o=r.constructor={};if(o[iqt]=n,yK=r.then(function(){})instanceof n,!yK)return!0}return!t&&(LMe==="BROWSER"||LMe==="DENO")&&!RMe});jMe.exports={CONSTRUCTOR:aqt,REJECTION_EVENT:RMe,SUBCLASSING:yK}});var jh=N((btn,zMe)=>{"use strict";u();var qMe=pn(),sqt=TypeError,lqt=function(e){var t,r;this.promise=new e(function(n,o){if(t!==void 0||r!==void 0)throw new sqt("Bad Promise constructor");t=n,r=o}),this.resolve=qMe(t),this.reject=qMe(r)};zMe.exports.f=function(e){return new lqt(e)}});var oCe=N(()=>{"use strict";u();var uqt=ce(),cqt=To(),N3=__(),ky=cr(),_E=pr(),FMe=ei(),UMe=Kp(),pqt=ku(),fqt=Iy(),dqt=pn(),D3=Rn(),hqt=Qr(),mqt=au(),gqt=DC(),WMe=kC().set,EK=mK(),vqt=gK(),yqt=Ly(),_qt=uK(),$Me=Ho(),L3=T_(),SK=mE(),YMe=jh(),k3="Promise",ZMe=SK.CONSTRUCTOR,bqt=SK.REJECTION_EVENT,xqt=SK.SUBCLASSING,_K=$Me.getterFor(k3),wqt=$Me.set,gE=L3&&L3.prototype,I_=L3,O3=gE,KMe=ky.TypeError,bK=ky.document,TK=ky.process,xK=YMe.f,Eqt=xK,Sqt=!!(bK&&bK.createEvent&&ky.dispatchEvent),XMe="unhandledrejection",Tqt="rejectionhandled",BMe=0,JMe=1,Iqt=2,IK=1,QMe=2,P3,VMe,Mqt,GMe,eCe=function(e){var t;return hqt(e)&&D3(t=e.then)?t:!1},tCe=function(e,t){var r=t.value,n=t.state===JMe,o=n?e.ok:e.fail,i=e.resolve,a=e.reject,c=e.domain,h,m,y;try{o?(n||(t.rejection===QMe&&Aqt(t),t.rejection=IK),o===!0?h=r:(c&&c.enter(),h=o(r),c&&(c.exit(),y=!0)),h===e.promise?a(new KMe("Promise-chain cycle")):(m=eCe(h))?_E(m,h,i,a):i(h)):a(r)}catch(w){c&&!y&&c.exit(),a(w)}},rCe=function(e,t){e.notified||(e.notified=!0,EK(function(){for(var r=e.reactions,n;n=r.get();)tCe(n,e);e.notified=!1,t&&!e.rejection&&Cqt(e)}))},nCe=function(e,t,r){var n,o;Sqt?(n=bK.createEvent("Event"),n.promise=t,n.reason=r,n.initEvent(e,!1,!0),ky.dispatchEvent(n)):n={promise:t,reason:r},!bqt&&(o=ky["on"+e])?o(n):e===XMe&&vqt("Unhandled promise rejection",r)},Cqt=function(e){_E(WMe,ky,function(){var t=e.facade,r=e.value,n=HMe(e),o;if(n&&(o=yqt(function(){N3?TK.emit("unhandledRejection",r,t):nCe(XMe,t,r)}),e.rejection=N3||HMe(e)?QMe:IK,o.error))throw o.value})},HMe=function(e){return e.rejection!==IK&&!e.parent},Aqt=function(e){_E(WMe,ky,function(){var t=e.facade;N3?TK.emit("rejectionHandled",t):nCe(Tqt,t,e.value)})},vE=function(e,t,r){return function(n){e(t,n,r)}},yE=function(e,t,r){e.done||(e.done=!0,r&&(e=r),e.value=t,e.state=Iqt,rCe(e,!0))},wK=function(e,t,r){if(!e.done){e.done=!0,r&&(e=r);try{if(e.facade===t)throw new KMe("Promise can't be resolved itself");var n=eCe(t);n?EK(function(){var o={done:!1};try{_E(n,t,vE(wK,o,e),vE(yE,o,e))}catch(i){yE(o,i,e)}}):(e.value=t,e.state=JMe,rCe(e,!1))}catch(o){yE({done:!1},o,e)}}};if(ZMe&&(I_=function(t){mqt(this,O3),dqt(t),_E(P3,this);var r=_K(this);try{t(vE(wK,r),vE(yE,r))}catch(n){yE(r,n)}},O3=I_.prototype,P3=function(t){wqt(this,{type:k3,done:!1,notified:!1,parent:!1,reactions:new _qt,rejection:!1,state:BMe,value:null})},P3.prototype=FMe(O3,"then",function(t,r){var n=_K(this),o=xK(gqt(this,I_));return n.parent=!0,o.ok=D3(t)?t:!0,o.fail=D3(r)&&r,o.domain=N3?TK.domain:void 0,n.state===BMe?n.reactions.add(o):EK(function(){tCe(o,n)}),o.promise}),VMe=function(){var e=new P3,t=_K(e);this.promise=e,this.resolve=vE(wK,t),this.reject=vE(yE,t)},YMe.f=xK=function(e){return e===I_||e===Mqt?new VMe(e):Eqt(e)},!cqt&&D3(L3)&&gE!==Object.prototype)){GMe=gE.then,xqt||FMe(gE,"then",function(t,r){var n=this;return new I_(function(o,i){_E(GMe,n,o,i)}).then(t,r)},{unsafe:!0});try{delete gE.constructor}catch(e){}UMe&&UMe(gE,O3)}uqt({global:!0,constructor:!0,wrap:!0,forced:ZMe},{Promise:I_});pqt(I_,k3,!1,!0);fqt(k3)});var zC=N((Ttn,iCe)=>{"use strict";u();var Oqt=T_(),Pqt=sC(),Dqt=mE().CONSTRUCTOR;iCe.exports=Dqt||!Pqt(function(e){Oqt.all(e).then(void 0,function(){})})});var aCe=N(()=>{"use strict";u();var Nqt=ce(),Lqt=pr(),kqt=pn(),Rqt=jh(),jqt=Ly(),qqt=ha(),zqt=zC();Nqt({target:"Promise",stat:!0,forced:zqt},{all:function(t){var r=this,n=Rqt.f(r),o=n.resolve,i=n.reject,a=jqt(function(){var c=kqt(r.resolve),h=[],m=0,y=1;qqt(t,function(w){var E=m++,A=!1;y++,Lqt(c,r,w).then(function(P){A||(A=!0,h[E]=P,--y||o(h))},i)}),--y||o(h)});return a.error&&i(a.value),n.promise}})});var lCe=N(()=>{"use strict";u();var Fqt=ce(),Uqt=To(),Bqt=mE().CONSTRUCTOR,CK=T_(),Vqt=cn(),Gqt=Rn(),Hqt=ei(),sCe=CK&&CK.prototype;Fqt({target:"Promise",proto:!0,forced:Bqt,real:!0},{catch:function(e){return this.then(void 0,e)}});!Uqt&&Gqt(CK)&&(MK=Vqt("Promise").prototype.catch,sCe.catch!==MK&&Hqt(sCe,"catch",MK,{unsafe:!0}));var MK});var uCe=N(()=>{"use strict";u();var Wqt=ce(),$qt=pr(),Yqt=pn(),Zqt=jh(),Kqt=Ly(),Xqt=ha(),Jqt=zC();Wqt({target:"Promise",stat:!0,forced:Jqt},{race:function(t){var r=this,n=Zqt.f(r),o=n.reject,i=Kqt(function(){var a=Yqt(r.resolve);Xqt(t,function(c){$qt(a,r,c).then(n.resolve,o)})});return i.error&&o(i.value),n.promise}})});var cCe=N(()=>{"use strict";u();var Qqt=ce(),ezt=jh(),tzt=mE().CONSTRUCTOR;Qqt({target:"Promise",stat:!0,forced:tzt},{reject:function(t){var r=ezt.f(this),n=r.reject;return n(t),r.promise}})});var AK=N((ztn,pCe)=>{"use strict";u();var rzt=dr(),nzt=Qr(),ozt=jh();pCe.exports=function(e,t){if(rzt(e),nzt(t)&&t.constructor===e)return t;var r=ozt.f(e),n=r.resolve;return n(t),r.promise}});var hCe=N(()=>{"use strict";u();var izt=ce(),azt=cn(),fCe=To(),szt=T_(),dCe=mE().CONSTRUCTOR,lzt=AK(),uzt=azt("Promise"),czt=fCe&&!dCe;izt({target:"Promise",stat:!0,forced:fCe||dCe},{resolve:function(t){return lzt(czt&&this===uzt?szt:this,t)}})});var mCe=N(()=>{"use strict";u();oCe();aCe();lCe();uCe();cCe();hCe()});var OK=N(()=>{"use strict";u();var pzt=ce(),fzt=pr(),dzt=pn(),hzt=jh(),mzt=Ly(),gzt=ha(),vzt=zC();pzt({target:"Promise",stat:!0,forced:vzt},{allSettled:function(t){var r=this,n=hzt.f(r),o=n.resolve,i=n.reject,a=mzt(function(){var c=dzt(r.resolve),h=[],m=0,y=1;gzt(t,function(w){var E=m++,A=!1;y++,fzt(c,r,w).then(function(P){A||(A=!0,h[E]={status:"fulfilled",value:P},--y||o(h))},function(P){A||(A=!0,h[E]={status:"rejected",reason:P},--y||o(h))})}),--y||o(h)});return a.error&&i(a.value),n.promise}})});var PK=N(()=>{"use strict";u();var yzt=ce(),_zt=pr(),bzt=pn(),xzt=cn(),wzt=jh(),Ezt=Ly(),Szt=ha(),Tzt=zC(),gCe="No one promise resolved";yzt({target:"Promise",stat:!0,forced:Tzt},{any:function(t){var r=this,n=xzt("AggregateError"),o=wzt.f(r),i=o.resolve,a=o.reject,c=Ezt(function(){var h=bzt(r.resolve),m=[],y=0,w=1,E=!1;Szt(t,function(A){var P=y++,j=!1;w++,_zt(h,r,A).then(function(D){j||E||(E=!0,i(D))},function(D){j||E||(j=!0,m[P]=D,--w||a(new n(m,gCe)))})}),--w||a(new n(m,gCe))});return c.error&&a(c.value),o.promise}})});var bCe=N(()=>{"use strict";u();var Izt=ce(),Mzt=To(),R3=T_(),Czt=Gt(),yCe=cn(),_Ce=Rn(),Azt=DC(),vCe=AK(),Ozt=ei(),NK=R3&&R3.prototype,Pzt=!!R3&&Czt(function(){NK.finally.call({then:function(){}},function(){})});Izt({target:"Promise",proto:!0,real:!0,forced:Pzt},{finally:function(e){var t=Azt(this,yCe("Promise")),r=_Ce(e);return this.then(r?function(n){return vCe(t,e()).then(function(){return n})}:e,r?function(n){return vCe(t,e()).then(function(){throw n})}:e)}});!Mzt&&_Ce(R3)&&(DK=yCe("Promise").prototype.finally,NK.finally!==DK&&Ozt(NK,"finally",DK,{unsafe:!0}));var DK});var kK=N(()=>{"use strict";u();var Dzt=ce(),Nzt=cr(),Lzt=Sl(),kzt=gc(),Rzt=jh(),jzt=pn(),wCe=Ly(),LK=Nzt.Promise,xCe=!1,qzt=!LK||!LK.try||wCe(function(){LK.try(function(e){xCe=e===8},8)}).error||!xCe;Dzt({target:"Promise",stat:!0,forced:qzt},{try:function(e){var t=arguments.length>1?kzt(arguments,1):[],r=Rzt.f(this),n=wCe(function(){return Lzt(jzt(e),void 0,t)});return(n.error?r.reject:r.resolve)(n.value),r.promise}})});var RK=N(()=>{"use strict";u();var zzt=ce(),Fzt=jh();zzt({target:"Promise",stat:!0},{withResolvers:function(){var t=Fzt.f(this);return{promise:t.promise,resolve:t.resolve,reject:t.reject}}})});var ECe=N(()=>{"use strict";u();var Uzt=ce(),Bzt=Sl(),Vzt=pn(),Gzt=dr(),Hzt=Gt(),Wzt=!Hzt(function(){Reflect.apply(function(){})});Uzt({target:"Reflect",stat:!0,forced:Wzt},{apply:function(t,r,n){return Bzt(Vzt(t),r,Gzt(n))}})});var OCe=N(()=>{"use strict";u();var $zt=ce(),Yzt=cn(),jK=Sl(),Zzt=NY(),SCe=PC(),Kzt=dr(),TCe=Qr(),Xzt=Na(),MCe=Gt(),qK=Yzt("Reflect","construct"),Jzt=Object.prototype,Qzt=[].push,CCe=MCe(function(){function e(){}return!(qK(function(){},[],e)instanceof e)}),ACe=!MCe(function(){qK(function(){})}),ICe=CCe||ACe;$zt({target:"Reflect",stat:!0,forced:ICe,sham:ICe},{construct:function(t,r){SCe(t),Kzt(r);var n=arguments.length<3?t:SCe(arguments[2]);if(ACe&&!CCe)return qK(t,r,n);if(t===n){switch(r.length){case 0:return new t;case 1:return new t(r[0]);case 2:return new t(r[0],r[1]);case 3:return new t(r[0],r[1],r[2]);case 4:return new t(r[0],r[1],r[2],r[3])}var o=[null];return jK(Qzt,o,r),new(jK(Zzt,t,o))}var i=n.prototype,a=Xzt(TCe(i)?i:Jzt),c=jK(t,a,r);return TCe(c)?c:a}})});var NCe=N(()=>{"use strict";u();var e8t=ce(),t8t=$r(),PCe=dr(),r8t=Oh(),DCe=wi(),n8t=Gt(),o8t=n8t(function(){Reflect.defineProperty(DCe.f({},1,{value:1}),1,{value:2})});e8t({target:"Reflect",stat:!0,forced:o8t,sham:!t8t},{defineProperty:function(t,r,n){PCe(t);var o=r8t(r);PCe(n);try{return DCe.f(t,o,n),!0}catch(i){return!1}}})});var LCe=N(()=>{"use strict";u();var i8t=ce(),a8t=dr(),s8t=Zs().f;i8t({target:"Reflect",stat:!0},{deleteProperty:function(t,r){var n=s8t(a8t(t),r);return n&&!n.configurable?!1:delete t[r]}})});var zK=N((brn,RCe)=>{"use strict";u();var kCe=$n();RCe.exports=function(e){return e!==void 0&&(kCe(e,"value")||kCe(e,"writable"))}});var qCe=N(()=>{"use strict";u();var l8t=ce(),u8t=pr(),c8t=Qr(),p8t=dr(),f8t=zK(),d8t=Zs(),h8t=gs();function jCe(e,t){var r=arguments.length<3?e:arguments[2],n,o;if(p8t(e)===r)return e[t];if(n=d8t.f(e,t),n)return f8t(n)?n.value:n.get===void 0?void 0:u8t(n.get,r);if(c8t(o=h8t(e)))return jCe(o,t,r)}l8t({target:"Reflect",stat:!0},{get:jCe})});var zCe=N(()=>{"use strict";u();var m8t=ce(),g8t=$r(),v8t=dr(),y8t=Zs();m8t({target:"Reflect",stat:!0,sham:!g8t},{getOwnPropertyDescriptor:function(t,r){return y8t.f(v8t(t),r)}})});var FCe=N(()=>{"use strict";u();var _8t=ce(),b8t=dr(),x8t=gs(),w8t=jL();_8t({target:"Reflect",stat:!0,sham:!w8t},{getPrototypeOf:function(t){return x8t(b8t(t))}})});var UCe=N(()=>{"use strict";u();var E8t=ce();E8t({target:"Reflect",stat:!0},{has:function(t,r){return r in t}})});var BCe=N(()=>{"use strict";u();var S8t=ce(),T8t=dr(),I8t=v3();S8t({target:"Reflect",stat:!0},{isExtensible:function(t){return T8t(t),I8t(t)}})});var VCe=N(()=>{"use strict";u();var M8t=ce(),C8t=vL();M8t({target:"Reflect",stat:!0},{ownKeys:C8t})});var GCe=N(()=>{"use strict";u();var A8t=ce(),O8t=cn(),P8t=dr(),D8t=Tg();A8t({target:"Reflect",stat:!0,sham:!D8t},{preventExtensions:function(t){P8t(t);try{var r=O8t("Object","preventExtensions");return r&&r(t),!0}catch(n){return!1}}})});var ZCe=N(()=>{"use strict";u();var N8t=ce(),L8t=pr(),k8t=dr(),HCe=Qr(),R8t=zK(),j8t=Gt(),FK=wi(),WCe=Zs(),q8t=gs(),$Ce=dc();function YCe(e,t,r){var n=arguments.length<4?e:arguments[3],o=WCe.f(k8t(e),t),i,a,c;if(!o){if(HCe(a=q8t(e)))return YCe(a,t,r,n);o=$Ce(0)}if(R8t(o)){if(o.writable===!1||!HCe(n))return!1;if(i=WCe.f(n,t)){if(i.get||i.set||i.writable===!1)return!1;i.value=r,FK.f(n,t,i)}else FK.f(n,t,$Ce(0,r))}else{if(c=o.set,c===void 0)return!1;L8t(c,n,r)}return!0}var z8t=j8t(function(){var e=function(){},t=FK.f(new e,"a",{configurable:!0});return Reflect.set(e.prototype,"a",1,t)!==!1});N8t({target:"Reflect",stat:!0,forced:z8t},{set:YCe})});var XCe=N(()=>{"use strict";u();var F8t=ce(),U8t=dr(),B8t=$W(),KCe=Kp();KCe&&F8t({target:"Reflect",stat:!0},{setPrototypeOf:function(t,r){U8t(t),B8t(r);try{return KCe(t,r),!0}catch(n){return!1}}})});var JCe=N(()=>{"use strict";u();var V8t=ce(),G8t=cr(),H8t=ku();V8t({global:!0},{Reflect:{}});H8t(G8t.Reflect,"Reflect",!0)});var FC=N((Jrn,QCe)=>{"use strict";u();var W8t=Qr(),$8t=wl(),Y8t=an(),Z8t=Y8t("match");QCe.exports=function(e){var t;return W8t(e)&&((t=e[Z8t])!==void 0?!!t:$8t(e)==="RegExp")}});var j3=N((enn,eAe)=>{"use strict";u();var K8t=dr();eAe.exports=function(){var e=K8t(this),t="";return e.hasIndices&&(t+="d"),e.global&&(t+="g"),e.ignoreCase&&(t+="i"),e.multiline&&(t+="m"),e.dotAll&&(t+="s"),e.unicode&&(t+="u"),e.unicodeSets&&(t+="v"),e.sticky&&(t+="y"),t}});var bE=N((rnn,rAe)=>{"use strict";u();var X8t=pr(),J8t=$n(),Q8t=El(),eFt=j3(),tAe=RegExp.prototype;rAe.exports=function(e){var t=e.flags;return t===void 0&&!("flags"in tAe)&&!J8t(e,"flags")&&Q8t(tAe,e)?X8t(eFt,e):t}});var UC=N((onn,nAe)=>{"use strict";u();var UK=Gt(),tFt=cr(),BK=tFt.RegExp,VK=UK(function(){var e=BK("a","y");return e.lastIndex=2,e.exec("abcd")!==null}),rFt=VK||UK(function(){return!BK("a","y").sticky}),nFt=VK||UK(function(){var e=BK("^r","gy");return e.lastIndex=2,e.exec("str")!==null});nAe.exports={BROKEN_CARET:nFt,MISSED_STICKY:rFt,UNSUPPORTED_Y:VK}});var q3=N((ann,oAe)=>{"use strict";u();var oFt=Gt(),iFt=cr(),aFt=iFt.RegExp;oAe.exports=oFt(function(){var e=aFt(".","s");return!(e.dotAll&&e.test(`
`)&&e.flags==="s")})});var GK=N((lnn,iAe)=>{"use strict";u();var sFt=Gt(),lFt=cr(),uFt=lFt.RegExp;iAe.exports=sFt(function(){var e=uFt("(?<a>b)","g");return e.exec("b").groups.a!=="b"||"b".replace(e,"$<a>c")!=="bc"})});var mAe=N(()=>{"use strict";u();var cFt=$r(),YK=cr(),BC=Lt(),pFt=$w(),fFt=by(),dFt=ms(),hFt=Na(),mFt=gy().f,aAe=El(),gFt=FC(),sAe=Sn(),vFt=bE(),pAe=UC(),yFt=YW(),_Ft=ei(),bFt=Gt(),xFt=$n(),wFt=Ho().enforce,EFt=Iy(),SFt=an(),fAe=q3(),dAe=GK(),TFt=SFt("match"),jy=YK.RegExp,xE=jy.prototype,IFt=YK.SyntaxError,MFt=BC(xE.exec),z3=BC("".charAt),lAe=BC("".replace),uAe=BC("".indexOf),cAe=BC("".slice),CFt=/^\?<[^\s\d!#%&*+<=>@^][^\s!#%&*+<=>@^]*>/,M_=/a/g,HK=/a/g,AFt=new jy(M_)!==M_,hAe=pAe.MISSED_STICKY,OFt=pAe.UNSUPPORTED_Y,PFt=cFt&&(!AFt||hAe||fAe||dAe||bFt(function(){return HK[TFt]=!1,jy(M_)!==M_||jy(HK)===HK||String(jy(M_,"i"))!=="/a/i"})),DFt=function(e){for(var t=e.length,r=0,n="",o=!1,i;r<=t;r++){if(i=z3(e,r),i==="\\"){n+=i+z3(e,++r);continue}!o&&i==="."?n+="[\\s\\S]":(i==="["?o=!0:i==="]"&&(o=!1),n+=i)}return n},NFt=function(e){for(var t=e.length,r=0,n="",o=[],i=hFt(null),a=!1,c=!1,h=0,m="",y;r<=t;r++){if(y=z3(e,r),y==="\\")y+=z3(e,++r);else if(y==="]")a=!1;else if(!a)switch(!0){case y==="[":a=!0;break;case y==="(":if(n+=y,cAe(e,r+1,r+3)==="?:")continue;MFt(CFt,cAe(e,r+1))&&(r+=2,c=!0),h++;continue;case y===">"&&c:if(m===""||xFt(i,m))throw new IFt("Invalid capture group name");i[m]=!0,o[o.length]=[m,h],c=!1,m="";continue}c?m+=y:n+=y}return[n,o]};if(pFt("RegExp",PFt)){for(Ry=function(t,r){var n=aAe(xE,this),o=gFt(t),i=r===void 0,a=[],c=t,h,m,y,w,E,A;if(!n&&o&&i&&t.constructor===Ry)return t;if((o||aAe(xE,t))&&(t=t.source,i&&(r=vFt(c))),t=t===void 0?"":sAe(t),r=r===void 0?"":sAe(r),c=t,fAe&&"dotAll"in M_&&(m=!!r&&uAe(r,"s")>-1,m&&(r=lAe(r,/s/g,""))),h=r,hAe&&"sticky"in M_&&(y=!!r&&uAe(r,"y")>-1,y&&OFt&&(r=lAe(r,/y/g,""))),dAe&&(w=NFt(t),t=w[0],a=w[1]),E=fFt(jy(t,r),n?this:xE,Ry),(m||y||a.length)&&(A=wFt(E),m&&(A.dotAll=!0,A.raw=Ry(DFt(t),h)),y&&(A.sticky=!0),a.length&&(A.groups=a)),t!==c)try{dFt(E,"source",c===""?"(?:)":c)}catch(P){}return E},WK=mFt(jy),$K=0;WK.length>$K;)yFt(Ry,jy,WK[$K++]);xE.constructor=Ry,Ry.prototype=xE,_Ft(YK,"RegExp",Ry,{constructor:!0})}var Ry,WK,$K;EFt("RegExp")});var VC=N((dnn,gAe)=>{"use strict";u();var LFt=TypeError;gAe.exports=function(e){if(typeof e=="string")return e;throw new LFt("Argument is not a string")}});var JK=N(()=>{"use strict";u();var kFt=ce(),GC=Lt(),RFt=VC(),jFt=$n(),vAe=_C().start,qFt=w_(),zFt=Array,yAe=RegExp.escape,_Ae=GC("".charAt),XK=GC("".charCodeAt),FFt=GC(1.1.toString),UFt=GC([].join),xAe=/^[0-9a-z]/i,BFt=/^[$()*+./?[\\\]^{|}]/,VFt=RegExp("^[!\"#%&',\\-:;<=>@`~"+qFt+"]"),ZK=GC(xAe.exec),bAe={"\t":"t","\n":"n","\x0B":"v","\f":"f","\r":"r"},KK=function(e){var t=FFt(XK(e,0),16);return t.length<3?"\\x"+vAe(t,2,"0"):"\\u"+vAe(t,4,"0")},GFt=!yAe||yAe("ab")!=="\\x61b";kFt({target:"RegExp",stat:!0,forced:GFt},{escape:function(t){RFt(t);for(var r=t.length,n=zFt(r),o=0;o<r;o++){var i=_Ae(t,o);if(o===0&&ZK(xAe,i))n[o]=KK(i);else if(jFt(bAe,i))n[o]="\\"+bAe[i];else if(ZK(BFt,i))n[o]="\\"+i;else if(ZK(VFt,i))n[o]=KK(i);else{var a=XK(i,0);(a&63488)!==55296?n[o]=i:a>=56320||o+1>=r||(XK(t,o+1)&64512)!==56320?n[o]=KK(i):(n[o]=i,n[++o]=_Ae(t,o))}}return UFt(n,"")}})});var EAe=N(()=>{"use strict";u();var HFt=$r(),WFt=q3(),$Ft=wl(),YFt=Bi(),ZFt=Ho().get,wAe=RegExp.prototype,KFt=TypeError;HFt&&WFt&&YFt(wAe,"dotAll",{configurable:!0,get:function(){if(this!==wAe){if($Ft(this)==="RegExp")return!!ZFt(this).dotAll;throw new KFt("Incompatible receiver, RegExp required")}}})});var B3=N((xnn,TAe)=>{"use strict";u();var wE=pr(),U3=Lt(),XFt=Sn(),JFt=j3(),QFt=UC(),e7t=gg(),t7t=Na(),r7t=Ho().get,n7t=q3(),o7t=GK(),i7t=e7t("native-string-replace",String.prototype.replace),F3=RegExp.prototype.exec,eX=F3,a7t=U3("".charAt),s7t=U3("".indexOf),l7t=U3("".replace),QK=U3("".slice),tX=function(){var e=/a/,t=/b*/g;return wE(F3,e,"a"),wE(F3,t,"a"),e.lastIndex!==0||t.lastIndex!==0}(),SAe=QFt.BROKEN_CARET,rX=/()??/.exec("")[1]!==void 0,u7t=tX||rX||SAe||n7t||o7t;u7t&&(eX=function(t){var r=this,n=r7t(r),o=XFt(t),i=n.raw,a,c,h,m,y,w,E;if(i)return i.lastIndex=r.lastIndex,a=wE(eX,i,o),r.lastIndex=i.lastIndex,a;var A=n.groups,P=SAe&&r.sticky,j=wE(JFt,r),D=r.source,k=0,z=o;if(P&&(j=l7t(j,"y",""),s7t(j,"g")===-1&&(j+="g"),z=QK(o,r.lastIndex),r.lastIndex>0&&(!r.multiline||r.multiline&&a7t(o,r.lastIndex-1)!==`
`)&&(D="(?: "+D+")",z=" "+z,k++),c=new RegExp("^(?:"+D+")",j)),rX&&(c=new RegExp("^"+D+"$(?!\\s)",j)),tX&&(h=r.lastIndex),m=wE(F3,P?c:r,z),P?m?(m.input=QK(m.input,k),m[0]=QK(m[0],k),m.index=r.lastIndex,r.lastIndex+=m[0].length):r.lastIndex=0:tX&&m&&(r.lastIndex=r.global?m.index+m[0].length:h),rX&&m&&m.length>1&&wE(i7t,m[0],c,function(){for(y=1;y<arguments.length-2;y++)arguments[y]===void 0&&(m[y]=void 0)}),m&&A)for(m.groups=w=t7t(null),y=0;y<A.length;y++)E=A[y],w[E[0]]=m[E[1]];return m});TAe.exports=eX});var V3=N(()=>{"use strict";u();var c7t=ce(),IAe=B3();c7t({target:"RegExp",proto:!0,forced:/./.exec!==IAe},{exec:IAe})});var AAe=N(()=>{"use strict";u();var p7t=cr(),f7t=$r(),d7t=Bi(),h7t=j3(),m7t=Gt(),MAe=p7t.RegExp,CAe=MAe.prototype,g7t=f7t&&m7t(function(){var e=!0;try{MAe(".","d")}catch(h){e=!1}var t={},r="",n=e?"dgimsy":"gimsy",o=function(h,m){Object.defineProperty(t,h,{get:function(){return r+=m,!0}})},i={dotAll:"s",global:"g",ignoreCase:"i",multiline:"m",sticky:"y"};e&&(i.hasIndices="d");for(var a in i)o(a,i[a]);var c=Object.getOwnPropertyDescriptor(CAe,"flags").get.call(t);return c!==n||r!==n});g7t&&d7t(CAe,"flags",{configurable:!0,get:h7t})});var PAe=N(()=>{"use strict";u();var v7t=$r(),y7t=UC().MISSED_STICKY,_7t=wl(),b7t=Bi(),x7t=Ho().get,OAe=RegExp.prototype,w7t=TypeError;v7t&&y7t&&b7t(OAe,"sticky",{configurable:!0,get:function(){if(this!==OAe){if(_7t(this)==="RegExp")return!!x7t(this).sticky;throw new w7t("Incompatible receiver, RegExp required")}}})});var LAe=N(()=>{"use strict";u();V3();var E7t=ce(),DAe=pr(),S7t=Rn(),NAe=dr(),T7t=Sn(),I7t=function(){var e=!1,t=/[ac]/;return t.exec=function(){return e=!0,/./.exec.apply(this,arguments)},t.test("abc")===!0&&e}(),M7t=/./.test;E7t({target:"RegExp",proto:!0,forced:!I7t},{test:function(e){var t=NAe(this),r=T7t(e),n=t.exec;if(!S7t(n))return DAe(M7t,t,r);var o=DAe(n,t,r);return o===null?!1:(NAe(o),!0)}})});var qAe=N(()=>{"use strict";u();var C7t=u_().PROPER,A7t=ei(),O7t=dr(),kAe=Sn(),P7t=Gt(),D7t=bE(),nX="toString",RAe=RegExp.prototype,jAe=RAe[nX],N7t=P7t(function(){return jAe.call({source:"a",flags:"b"})!=="/a/b"}),L7t=C7t&&jAe.name!==nX;(N7t||L7t)&&A7t(RAe,nX,function(){var t=O7t(this),r=kAe(t.source),n=kAe(D7t(t));return"/"+r+"/"+n},{unsafe:!0})});var zAe=N(()=>{"use strict";u();var k7t=xC(),R7t=wZ();k7t("Set",function(e){return function(){return e(this,arguments.length?arguments[0]:void 0)}},R7t)});var FAe=N(()=>{"use strict";u();zAe()});var Js=N((Gnn,UAe)=>{"use strict";u();var oX=Lt(),G3=Set.prototype;UAe.exports={Set,add:oX(G3.add),has:oX(G3.has),remove:oX(G3.delete),proto:G3}});var Tl=N((Wnn,BAe)=>{"use strict";u();var j7t=Js().has;BAe.exports=function(e){return j7t(e),e}});var Mg=N((Ynn,VAe)=>{"use strict";u();var q7t=pr();VAe.exports=function(e,t,r){for(var n=r?e:e.iterator,o=e.next,i,a;!(i=q7t(o,n)).done;)if(a=t(i.value),a!==void 0)return a}});var _c=N((Knn,YAe)=>{"use strict";u();var GAe=Lt(),z7t=Mg(),HAe=Js(),F7t=HAe.Set,WAe=HAe.proto,U7t=GAe(WAe.forEach),$Ae=GAe(WAe.keys),B7t=$Ae(new F7t).next;YAe.exports=function(e,t,r){return r?z7t({iterator:$Ae(e),next:B7t},t):U7t(e,t)}});var H3=N((Jnn,KAe)=>{"use strict";u();var ZAe=Js(),V7t=_c(),G7t=ZAe.Set,H7t=ZAe.add;KAe.exports=function(e){var t=new G7t;return V7t(e,function(r){H7t(t,r)}),t}});var EE=N((eon,XAe)=>{"use strict";u();var W7t=oC(),$7t=Js();XAe.exports=W7t($7t.proto,"size","get")||function(e){return e.size}});var qy=N((ron,nOe)=>{"use strict";u();var JAe=pn(),tOe=dr(),QAe=pr(),Y7t=Ui(),Z7t=ta(),eOe="Invalid size",K7t=RangeError,X7t=TypeError,J7t=Math.max,rOe=function(e,t){this.set=e,this.size=J7t(t,0),this.has=JAe(e.has),this.keys=JAe(e.keys)};rOe.prototype={getIterator:function(){return Z7t(tOe(QAe(this.keys,this.set)))},includes:function(e){return QAe(this.has,this.set,e)}};nOe.exports=function(e){tOe(e);var t=+e.size;if(t!==t)throw new X7t(eOe);var r=Y7t(t);if(r<0)throw new K7t(eOe);return new rOe(e,r)}});var iX=N((oon,aOe)=>{"use strict";u();var Q7t=Tl(),iOe=Js(),e9t=H3(),t9t=EE(),r9t=qy(),n9t=_c(),o9t=Mg(),i9t=iOe.has,oOe=iOe.remove;aOe.exports=function(t){var r=Q7t(this),n=r9t(t),o=e9t(r);return t9t(r)<=n.size?n9t(r,function(i){n.includes(i)&&oOe(o,i)}):o9t(n.getIterator(),function(i){i9t(r,i)&&oOe(o,i)}),o}});var zy=N((aon,uOe)=>{"use strict";u();var a9t=cn(),sOe=function(e){return{size:e,has:function(){return!1},keys:function(){return{next:function(){return{done:!0}}}}}},lOe=function(e){return{size:e,has:function(){return!0},keys:function(){throw new Error("e")}}};uOe.exports=function(e,t){var r=a9t("Set");try{new r()[e](sOe(0));try{return new r()[e](sOe(-1)),!1}catch(o){if(!t)return!0;try{return new r()[e](lOe(-1/0)),!1}catch(i){var n=new r;return n.add(1),n.add(2),t(n[e](lOe(1/0)))}}}catch(o){return!1}}});var aX=N(()=>{"use strict";u();var s9t=ce(),l9t=iX(),u9t=zy(),c9t=!u9t("difference",function(e){return e.size===0});s9t({target:"Set",proto:!0,real:!0,forced:c9t},{difference:l9t})});var lX=N((pon,pOe)=>{"use strict";u();var p9t=Tl(),sX=Js(),f9t=EE(),d9t=qy(),h9t=_c(),m9t=Mg(),g9t=sX.Set,cOe=sX.add,v9t=sX.has;pOe.exports=function(t){var r=p9t(this),n=d9t(t),o=new g9t;return f9t(r)>n.size?m9t(n.getIterator(),function(i){v9t(r,i)&&cOe(o,i)}):h9t(r,function(i){n.includes(i)&&cOe(o,i)}),o}});var uX=N(()=>{"use strict";u();var y9t=ce(),_9t=Gt(),b9t=lX(),x9t=zy(),w9t=!x9t("intersection",function(e){return e.size===2&&e.has(1)&&e.has(2)})||_9t(function(){return String(Array.from(new Set([1,2,3]).intersection(new Set([3,2]))))!=="3,2"});y9t({target:"Set",proto:!0,real:!0,forced:w9t},{intersection:b9t})});var cX=N((gon,fOe)=>{"use strict";u();var E9t=Tl(),S9t=Js().has,T9t=EE(),I9t=qy(),M9t=_c(),C9t=Mg(),A9t=Xs();fOe.exports=function(t){var r=E9t(this),n=I9t(t);if(T9t(r)<=n.size)return M9t(r,function(i){if(n.includes(i))return!1},!0)!==!1;var o=n.getIterator();return C9t(o,function(i){if(S9t(r,i))return A9t(o,"normal",!1)})!==!1}});var pX=N(()=>{"use strict";u();var O9t=ce(),P9t=cX(),D9t=zy(),N9t=!D9t("isDisjointFrom",function(e){return!e});O9t({target:"Set",proto:!0,real:!0,forced:N9t},{isDisjointFrom:P9t})});var fX=N((xon,dOe)=>{"use strict";u();var L9t=Tl(),k9t=EE(),R9t=_c(),j9t=qy();dOe.exports=function(t){var r=L9t(this),n=j9t(t);return k9t(r)>n.size?!1:R9t(r,function(o){if(!n.includes(o))return!1},!0)!==!1}});var dX=N(()=>{"use strict";u();var q9t=ce(),z9t=fX(),F9t=zy(),U9t=!F9t("isSubsetOf",function(e){return e});q9t({target:"Set",proto:!0,real:!0,forced:U9t},{isSubsetOf:z9t})});var hX=N((Ion,hOe)=>{"use strict";u();var B9t=Tl(),V9t=Js().has,G9t=EE(),H9t=qy(),W9t=Mg(),$9t=Xs();hOe.exports=function(t){var r=B9t(this),n=H9t(t);if(G9t(r)<n.size)return!1;var o=n.getIterator();return W9t(o,function(i){if(!V9t(r,i))return $9t(o,"normal",!1)})!==!1}});var mX=N(()=>{"use strict";u();var Y9t=ce(),Z9t=hX(),K9t=zy(),X9t=!K9t("isSupersetOf",function(e){return!e});Y9t({target:"Set",proto:!0,real:!0,forced:X9t},{isSupersetOf:Z9t})});var vX=N((Pon,mOe)=>{"use strict";u();var J9t=Tl(),gX=Js(),Q9t=H3(),eUt=qy(),tUt=Mg(),rUt=gX.add,nUt=gX.has,oUt=gX.remove;mOe.exports=function(t){var r=J9t(this),n=eUt(t).getIterator(),o=Q9t(r);return tUt(n,function(i){nUt(r,i)?oUt(o,i):rUt(o,i)}),o}});var yX=N(()=>{"use strict";u();var iUt=ce(),aUt=vX(),sUt=zy();iUt({target:"Set",proto:!0,real:!0,forced:!sUt("symmetricDifference")},{symmetricDifference:aUt})});var _X=N((Ron,gOe)=>{"use strict";u();var lUt=Tl(),uUt=Js().add,cUt=H3(),pUt=qy(),fUt=Mg();gOe.exports=function(t){var r=lUt(this),n=pUt(t).getIterator(),o=cUt(r);return fUt(n,function(i){uUt(o,i)}),o}});var bX=N(()=>{"use strict";u();var dUt=ce(),hUt=_X(),mUt=zy();dUt({target:"Set",proto:!0,real:!0,forced:!mUt("union")},{union:hUt})});var vOe=N(()=>{"use strict";u();var gUt=ce(),vUt=Lt(),yUt=Pi(),_Ut=Ui(),bUt=Sn(),xUt=Gt(),wUt=vUt("".charAt),EUt=xUt(function(){return"\uD842\uDFB7".at(-2)!=="\uD842"});gUt({target:"String",proto:!0,forced:EUt},{at:function(t){var r=bUt(yUt(this)),n=r.length,o=_Ut(t),i=o>=0?o:n+o;return i<0||i>=n?void 0:wUt(r,i)}})});var C_=N((Gon,bOe)=>{"use strict";u();var xX=Lt(),SUt=Ui(),TUt=Sn(),IUt=Pi(),MUt=xX("".charAt),yOe=xX("".charCodeAt),CUt=xX("".slice),_Oe=function(e){return function(t,r){var n=TUt(IUt(t)),o=SUt(r),i=n.length,a,c;return o<0||o>=i?e?"":void 0:(a=yOe(n,o),a<55296||a>56319||o+1===i||(c=yOe(n,o+1))<56320||c>57343?e?MUt(n,o):a:e?CUt(n,o,o+2):(a-55296<<10)+(c-56320)+65536)}};bOe.exports={codeAt:_Oe(!1),charAt:_Oe(!0)}});var xOe=N(()=>{"use strict";u();var AUt=ce(),OUt=C_().codeAt;AUt({target:"String",proto:!0},{codePointAt:function(t){return OUt(this,t)}})});var W3=N((Zon,wOe)=>{"use strict";u();var PUt=FC(),DUt=TypeError;wOe.exports=function(e){if(PUt(e))throw new DUt("The method doesn't accept regular expressions");return e}});var $3=N((Xon,EOe)=>{"use strict";u();var NUt=an(),LUt=NUt("match");EOe.exports=function(e){var t=/./;try{"/./"[e](t)}catch(r){try{return t[LUt]=!1,"/./"[e](t)}catch(n){}}return!1}});var IOe=N(()=>{"use strict";u();var kUt=ce(),RUt=vy(),jUt=Zs().f,qUt=mc(),SOe=Sn(),zUt=W3(),FUt=Pi(),UUt=$3(),BUt=To(),VUt=RUt("".slice),GUt=Math.min,TOe=UUt("endsWith"),HUt=!BUt&&!TOe&&!!function(){var e=jUt(String.prototype,"endsWith");return e&&!e.writable}();kUt({target:"String",proto:!0,forced:!HUt&&!TOe},{endsWith:function(t){var r=SOe(FUt(this));zUt(t);var n=arguments.length>1?arguments[1]:void 0,o=r.length,i=n===void 0?o:GUt(qUt(n),o),a=SOe(t);return VUt(r,i-a.length,i)===a}})});var wX=N(()=>{"use strict";u();var WUt=ce(),$Ut=Lt(),YUt=gd(),ZUt=RangeError,MOe=String.fromCharCode,COe=String.fromCodePoint,KUt=$Ut([].join),XUt=!!COe&&COe.length!==1;WUt({target:"String",stat:!0,arity:1,forced:XUt},{fromCodePoint:function(t){for(var r=[],n=arguments.length,o=0,i;n>o;){if(i=+arguments[o++],YUt(i,1114111)!==i)throw new ZUt(i+" is not a valid code point");r[o]=i<65536?MOe(i):MOe(((i-=65536)>>10)+55296,i%1024+56320)}return KUt(r,"")}})});var OOe=N(()=>{"use strict";u();var JUt=ce(),QUt=Lt(),eBt=W3(),tBt=Pi(),AOe=Sn(),rBt=$3(),nBt=QUt("".indexOf);JUt({target:"String",proto:!0,forced:!rBt("includes")},{includes:function(t){return!!~nBt(AOe(tBt(this)),AOe(eBt(t)),arguments.length>1?arguments[1]:void 0)}})});var EX=N(()=>{"use strict";u();var oBt=ce(),iBt=Lt(),aBt=Pi(),sBt=Sn(),POe=iBt("".charCodeAt);oBt({target:"String",proto:!0},{isWellFormed:function(){for(var t=sBt(aBt(this)),r=t.length,n=0;n<r;n++){var o=POe(t,n);if((o&63488)===55296&&(o>=56320||++n>=r||(POe(t,n)&64512)!==56320))return!1}return!0}})});var SX=N(()=>{"use strict";u();var lBt=C_().charAt,uBt=Sn(),NOe=Ho(),cBt=WL(),DOe=Ls(),LOe="String Iterator",pBt=NOe.set,fBt=NOe.getterFor(LOe);cBt(String,"String",function(e){pBt(this,{type:LOe,string:uBt(e),index:0})},function(){var t=fBt(this),r=t.string,n=t.index,o;return n>=r.length?DOe(void 0,!0):(o=lBt(r,n),t.index+=o.length,DOe(o,!1))})});var HC=N((hin,zOe)=>{"use strict";u();V3();var kOe=pr(),ROe=ei(),dBt=B3(),jOe=Gt(),qOe=an(),hBt=ms(),mBt=qOe("species"),TX=RegExp.prototype;zOe.exports=function(e,t,r,n){var o=qOe(e),i=!jOe(function(){var m={};return m[o]=function(){return 7},""[e](m)!==7}),a=i&&!jOe(function(){var m=!1,y=/a/;return e==="split"&&(y={},y.constructor={},y.constructor[mBt]=function(){return y},y.flags="",y[o]=/./[o]),y.exec=function(){return m=!0,null},y[o](""),!m});if(!i||!a||r){var c=/./[o],h=t(o,""[e],function(m,y,w,E,A){var P=y.exec;return P===dBt||P===TX.exec?i&&!A?{done:!0,value:kOe(c,y,w,E)}:{done:!0,value:kOe(m,w,y,E)}:{done:!1}});ROe(String.prototype,e,h[0]),ROe(TX,o,h[1])}n&&hBt(TX[o],"sham",!0)}});var WC=N((gin,FOe)=>{"use strict";u();var gBt=C_().charAt;FOe.exports=function(e,t,r){return t+(r?gBt(e,t).length:1)}});var SE=N((yin,BOe)=>{"use strict";u();var UOe=pr(),vBt=dr(),yBt=Rn(),_Bt=wl(),bBt=B3(),xBt=TypeError;BOe.exports=function(e,t){var r=e.exec;if(yBt(r)){var n=UOe(r,e,t);return n!==null&&vBt(n),n}if(_Bt(e)==="RegExp")return UOe(bBt,e,t);throw new xBt("RegExp#exec called on incompatible receiver")}});var GOe=N(()=>{"use strict";u();var wBt=pr(),EBt=HC(),SBt=dr(),TBt=Qr(),IBt=mc(),IX=Sn(),MBt=Pi(),CBt=Da(),ABt=WC(),VOe=SE();EBt("match",function(e,t,r){return[function(o){var i=MBt(this),a=TBt(o)?CBt(o,e):void 0;return a?wBt(a,o,i):new RegExp(o)[e](IX(i))},function(n){var o=SBt(this),i=IX(n),a=r(t,o,i);if(a.done)return a.value;if(!o.global)return VOe(o,i);var c=o.unicode;o.lastIndex=0;for(var h=[],m=0,y;(y=VOe(o,i))!==null;){var w=IX(y[0]);h[m]=w,w===""&&(o.lastIndex=ABt(i,IBt(o.lastIndex),c)),m++}return m===0?null:h}]})});var PX=N(()=>{"use strict";u();var OBt=ce(),HOe=pr(),YOe=vy(),PBt=Sy(),Y3=Ls(),WOe=Pi(),ZOe=mc(),$C=Sn(),DBt=dr(),NBt=Qr(),LBt=wl(),kBt=FC(),KOe=bE(),RBt=Da(),jBt=ei(),qBt=Gt(),zBt=an(),FBt=DC(),UBt=WC(),BBt=SE(),XOe=Ho(),CX=To(),Z3=zBt("matchAll"),JOe="RegExp String",QOe=JOe+" Iterator",VBt=XOe.set,GBt=XOe.getterFor(QOe),$Oe=RegExp.prototype,HBt=TypeError,AX=YOe("".indexOf),K3=YOe("".matchAll),MX=!!K3&&!qBt(function(){K3("a",/./)}),WBt=PBt(function(t,r,n,o){VBt(this,{type:QOe,regexp:t,string:r,global:n,unicode:o,done:!1})},JOe,function(){var t=GBt(this);if(t.done)return Y3(void 0,!0);var r=t.regexp,n=t.string,o=BBt(r,n);return o===null?(t.done=!0,Y3(void 0,!0)):t.global?($C(o[0])===""&&(r.lastIndex=UBt(n,ZOe(r.lastIndex),t.unicode)),Y3(o,!1)):(t.done=!0,Y3(o,!1))}),OX=function(e){var t=DBt(this),r=$C(e),n=FBt(t,RegExp),o=$C(KOe(t)),i,a,c;return i=new n(n===RegExp?t.source:t,o),a=!!~AX(o,"g"),c=!!~AX(o,"u"),i.lastIndex=ZOe(t.lastIndex),new WBt(i,r,a,c)};OBt({target:"String",proto:!0,forced:MX},{matchAll:function(t){var r=WOe(this),n,o,i,a;if(NBt(t)){if(kBt(t)&&(n=$C(WOe(KOe(t))),!~AX(n,"g")))throw new HBt("`.matchAll` does not allow non-global regexes");if(MX)return K3(r,t);if(i=RBt(t,Z3),i===void 0&&CX&&LBt(t)==="RegExp"&&(i=OX),i)return HOe(i,t,r)}else if(MX)return K3(r,t);return o=$C(r),a=new RegExp(t,"g"),CX?HOe(OX,a,o):a[Z3](o)}});CX||Z3 in $Oe||jBt($Oe,Z3,OX)});var DX=N((Iin,ePe)=>{"use strict";u();var $Bt=fd();ePe.exports=/Version\/10(?:\.\d+){1,2}(?: [\w./]+)?(?: Mobile\/\w+)? Safari\//.test($Bt)});var tPe=N(()=>{"use strict";u();var YBt=ce(),ZBt=_C().end,KBt=DX();YBt({target:"String",proto:!0,forced:KBt},{padEnd:function(t){return ZBt(this,t,arguments.length>1?arguments[1]:void 0)}})});var rPe=N(()=>{"use strict";u();var XBt=ce(),JBt=_C().start,QBt=DX();XBt({target:"String",proto:!0,forced:QBt},{padStart:function(t){return JBt(this,t,arguments.length>1?arguments[1]:void 0)}})});var aPe=N(()=>{"use strict";u();var eVt=ce(),iPe=Lt(),tVt=hs(),rVt=Jn(),nPe=Sn(),nVt=ho(),oPe=iPe([].push),oVt=iPe([].join);eVt({target:"String",stat:!0},{raw:function(t){var r=tVt(rVt(t).raw),n=nVt(r);if(!n)return"";for(var o=arguments.length,i=[],a=0;;){if(oPe(i,nPe(r[a++])),a===n)return oVt(i,"");a<o&&oPe(i,nPe(arguments[a]))}}})});var sPe=N(()=>{"use strict";u();var iVt=ce(),aVt=yC();iVt({target:"String",proto:!0},{repeat:aVt})});var RX=N((Fin,lPe)=>{"use strict";u();var kX=Lt(),sVt=Jn(),lVt=Math.floor,NX=kX("".charAt),uVt=kX("".replace),LX=kX("".slice),cVt=/\$([$&'`]|\d{1,2}|<[^>]*>)/g,pVt=/\$([$&'`]|\d{1,2})/g;lPe.exports=function(e,t,r,n,o,i){var a=r+e.length,c=n.length,h=pVt;return o!==void 0&&(o=sVt(o),h=cVt),uVt(i,h,function(m,y){var w;switch(NX(y,0)){case"$":return"$";case"&":return e;case"`":return LX(t,0,r);case"'":return LX(t,a);case"<":w=o[LX(y,1,-1)];break;default:var E=+y;if(E===0)return m;if(E>c){var A=lVt(E/10);return A===0?m:A<=c?n[A-1]===void 0?NX(y,1):n[A-1]+NX(y,1):m}w=n[E-1]}return w===void 0?"":w})}});var dPe=N(()=>{"use strict";u();var fVt=Sl(),uPe=pr(),X3=Lt(),dVt=HC(),hVt=Gt(),mVt=dr(),gVt=Rn(),vVt=Qr(),yVt=Ui(),_Vt=mc(),TE=Sn(),bVt=Pi(),xVt=WC(),wVt=Da(),EVt=RX(),SVt=SE(),TVt=an(),qX=TVt("replace"),IVt=Math.max,MVt=Math.min,CVt=X3([].concat),jX=X3([].push),cPe=X3("".indexOf),pPe=X3("".slice),AVt=function(e){return e===void 0?e:String(e)},OVt=function(){return"a".replace(/./,"$0")==="$0"}(),fPe=function(){return /./[qX]?/./[qX]("a","$0")==="":!1}(),PVt=!hVt(function(){var e=/./;return e.exec=function(){var t=[];return t.groups={a:"7"},t},"".replace(e,"$<a>")!=="7"});dVt("replace",function(e,t,r){var n=fPe?"$":"$0";return[function(i,a){var c=bVt(this),h=vVt(i)?wVt(i,qX):void 0;return h?uPe(h,i,c,a):uPe(t,TE(c),i,a)},function(o,i){var a=mVt(this),c=TE(o);if(typeof i=="string"&&cPe(i,n)===-1&&cPe(i,"$<")===-1){var h=r(t,a,c,i);if(h.done)return h.value}var m=gVt(i);m||(i=TE(i));var y=a.global,w;y&&(w=a.unicode,a.lastIndex=0);for(var E=[],A;A=SVt(a,c),!(A===null||(jX(E,A),!y));){var P=TE(A[0]);P===""&&(a.lastIndex=xVt(c,_Vt(a.lastIndex),w))}for(var j="",D=0,k=0;k<E.length;k++){A=E[k];for(var z=TE(A[0]),V=IVt(MVt(yVt(A.index),c.length),0),G=[],K,Z=1;Z<A.length;Z++)jX(G,AVt(A[Z]));var te=A.groups;if(m){var se=CVt([z],G,V,c);te!==void 0&&jX(se,te),K=TE(fVt(i,void 0,se))}else K=EVt(z,c,V,G,te,i);V>=D&&(j+=pPe(c,D,V)+K,D=V+z.length)}return j+pPe(c,D)}]},!PVt||!OVt||fPe)});var UX=N(()=>{"use strict";u();var DVt=ce(),NVt=pr(),FX=Lt(),hPe=Pi(),LVt=Rn(),kVt=Qr(),RVt=FC(),IE=Sn(),jVt=Da(),qVt=bE(),zVt=RX(),FVt=an(),UVt=To(),BVt=FVt("replace"),VVt=TypeError,zX=FX("".indexOf),GVt=FX("".replace),mPe=FX("".slice),HVt=Math.max;DVt({target:"String",proto:!0},{replaceAll:function(t,r){var n=hPe(this),o,i,a,c,h,m,y,w,E,A,P=0,j="";if(kVt(t)){if(o=RVt(t),o&&(i=IE(hPe(qVt(t))),!~zX(i,"g")))throw new VVt("`.replaceAll` does not allow non-global regexes");if(a=jVt(t,BVt),a)return NVt(a,t,n,r);if(UVt&&o)return GVt(IE(n),t,r)}for(c=IE(n),h=IE(t),m=LVt(r),m||(r=IE(r)),y=h.length,w=HVt(1,y),E=zX(c,h);E!==-1;)A=m?IE(r(h,E,c)):zVt(h,c,E,[],void 0,r),j+=mPe(c,P,E)+A,P=E+y,E=E+w>c.length?-1:zX(c,h,E+w);return P<c.length&&(j+=mPe(c,P)),j}})});var yPe=N(()=>{"use strict";u();var WVt=pr(),$Vt=HC(),YVt=dr(),ZVt=Qr(),KVt=Pi(),gPe=M3(),vPe=Sn(),XVt=Da(),JVt=SE();$Vt("search",function(e,t,r){return[function(o){var i=KVt(this),a=ZVt(o)?XVt(o,e):void 0;return a?WVt(a,o,i):new RegExp(o)[e](vPe(i))},function(n){var o=YVt(this),i=vPe(n),a=r(t,o,i);if(a.done)return a.value;var c=o.lastIndex;gPe(c,0)||(o.lastIndex=0);var h=JVt(o,i);return gPe(o.lastIndex,c)||(o.lastIndex=c),h===null?-1:h.index}]})});var EPe=N(()=>{"use strict";u();var BX=pr(),wPe=Lt(),QVt=HC(),eGt=dr(),tGt=Qr(),rGt=Pi(),nGt=DC(),oGt=WC(),iGt=mc(),_Pe=Sn(),aGt=Da(),bPe=SE(),sGt=UC(),lGt=Gt(),ME=sGt.UNSUPPORTED_Y,uGt=4294967295,cGt=Math.min,VX=wPe([].push),GX=wPe("".slice),pGt=!lGt(function(){var e=/(?:)/,t=e.exec;e.exec=function(){return t.apply(this,arguments)};var r="ab".split(e);return r.length!==2||r[0]!=="a"||r[1]!=="b"}),xPe="abbc".split(/(b)*/)[1]==="c"||"test".split(/(?:)/,-1).length!==4||"ab".split(/(?:ab)*/).length!==2||".".split(/(.?)(.?)/).length!==4||".".split(/()()/).length>1||"".split(/.?/).length;QVt("split",function(e,t,r){var n="0".split(void 0,0).length?function(o,i){return o===void 0&&i===0?[]:BX(t,this,o,i)}:t;return[function(i,a){var c=rGt(this),h=tGt(i)?aGt(i,e):void 0;return h?BX(h,i,c,a):BX(n,_Pe(c),i,a)},function(o,i){var a=eGt(this),c=_Pe(o);if(!xPe){var h=r(n,a,c,i,n!==t);if(h.done)return h.value}var m=nGt(a,RegExp),y=a.unicode,w=(a.ignoreCase?"i":"")+(a.multiline?"m":"")+(a.unicode?"u":"")+(ME?"g":"y"),E=new m(ME?"^(?:"+a.source+")":a,w),A=i===void 0?uGt:i>>>0;if(A===0)return[];if(c.length===0)return bPe(E,c)===null?[c]:[];for(var P=0,j=0,D=[];j<c.length;){E.lastIndex=ME?0:j;var k=bPe(E,ME?GX(c,j):c),z;if(k===null||(z=cGt(iGt(E.lastIndex+(ME?j:0)),c.length))===P)j=oGt(c,j,y);else{if(VX(D,GX(c,P,j)),D.length===A)return D;for(var V=1;V<=k.length-1;V++)if(VX(D,k[V]),D.length===A)return D;j=P=z}}return VX(D,GX(c,P)),D}]},xPe||!pGt,ME)});var IPe=N(()=>{"use strict";u();var fGt=ce(),dGt=vy(),hGt=Zs().f,mGt=mc(),SPe=Sn(),gGt=W3(),vGt=Pi(),yGt=$3(),_Gt=To(),bGt=dGt("".slice),xGt=Math.min,TPe=yGt("startsWith"),wGt=!_Gt&&!TPe&&!!function(){var e=hGt(String.prototype,"startsWith");return e&&!e.writable}();fGt({target:"String",proto:!0,forced:!wGt&&!TPe},{startsWith:function(t){var r=SPe(vGt(this));gGt(t);var n=mGt(xGt(arguments.length>1?arguments[1]:void 0,r.length)),o=SPe(t);return bGt(r,n,n+o.length)===o}})});var CPe=N(()=>{"use strict";u();var EGt=ce(),SGt=Lt(),TGt=Pi(),MPe=Ui(),IGt=Sn(),MGt=SGt("".slice),CGt=Math.max,AGt=Math.min,OGt=!"".substr||"ab".substr(-1)!=="b";EGt({target:"String",proto:!0,forced:OGt},{substr:function(t,r){var n=IGt(TGt(this)),o=n.length,i=MPe(t),a,c;return i===1/0&&(i=0),i<0&&(i=CGt(o+i,0)),a=r===void 0?o:MPe(r),a<=0||a===1/0?"":(c=AGt(i+a,o),i>=c?"":MGt(n,i,c))}})});var YX=N(()=>{"use strict";u();var PGt=ce(),PPe=pr(),$X=Lt(),DGt=Pi(),NGt=Sn(),LGt=Gt(),kGt=Array,HX=$X("".charAt),APe=$X("".charCodeAt),RGt=$X([].join),WX="".toWellFormed,jGt="\uFFFD",OPe=WX&&LGt(function(){return PPe(WX,1)!=="1"});PGt({target:"String",proto:!0,forced:OPe},{toWellFormed:function(){var t=NGt(DGt(this));if(OPe)return PPe(WX,t);for(var r=t.length,n=kGt(r),o=0;o<r;o++){var i=APe(t,o);(i&63488)!==55296?n[o]=HX(t,o):i>=56320||o+1>=r||(APe(t,o+1)&64512)!==56320?n[o]=jGt:(n[o]=HX(t,o),n[++o]=HX(t,o))}return RGt(n,"")}})});var J3=N((uan,LPe)=>{"use strict";u();var qGt=u_().PROPER,zGt=Gt(),DPe=w_(),NPe="\u200B\x85\u180E";LPe.exports=function(e){return zGt(function(){return!!DPe[e]()||NPe[e]()!==NPe||qGt&&DPe[e].name!==e})}});var kPe=N(()=>{"use strict";u();var FGt=ce(),UGt=E_().trim,BGt=J3();FGt({target:"String",proto:!0,forced:BGt("trim")},{trim:function(){return UGt(this)}})});var ZX=N((han,RPe)=>{"use strict";u();var VGt=E_().end,GGt=J3();RPe.exports=GGt("trimEnd")?function(){return VGt(this)}:"".trimEnd});var qPe=N(()=>{"use strict";u();var HGt=ce(),jPe=ZX();HGt({target:"String",proto:!0,name:"trimEnd",forced:"".trimRight!==jPe},{trimRight:jPe})});var FPe=N(()=>{"use strict";u();qPe();var WGt=ce(),zPe=ZX();WGt({target:"String",proto:!0,name:"trimEnd",forced:"".trimEnd!==zPe},{trimEnd:zPe})});var KX=N((wan,UPe)=>{"use strict";u();var $Gt=E_().start,YGt=J3();UPe.exports=YGt("trimStart")?function(){return $Gt(this)}:"".trimStart});var VPe=N(()=>{"use strict";u();var ZGt=ce(),BPe=KX();ZGt({target:"String",proto:!0,name:"trimStart",forced:"".trimLeft!==BPe},{trimLeft:BPe})});var HPe=N(()=>{"use strict";u();VPe();var KGt=ce(),GPe=KX();KGt({target:"String",proto:!0,name:"trimStart",forced:"".trimStart!==GPe},{trimStart:GPe})});var bc=N((Oan,$Pe)=>{"use strict";u();var XGt=Lt(),JGt=Pi(),WPe=Sn(),QGt=/"/g,eHt=XGt("".replace);$Pe.exports=function(e,t,r,n){var o=WPe(JGt(e)),i="<"+t;return r!==""&&(i+=" "+r+"=\""+eHt(WPe(n),QGt,"&quot;")+"\""),i+">"+o+"</"+t+">"}});var xc=N((Dan,YPe)=>{"use strict";u();var tHt=Gt();YPe.exports=function(e){return tHt(function(){var t=""[e]("\"");return t!==t.toLowerCase()||t.split("\"").length>3})}});var ZPe=N(()=>{"use strict";u();var rHt=ce(),nHt=bc(),oHt=xc();rHt({target:"String",proto:!0,forced:oHt("anchor")},{anchor:function(t){return nHt(this,"a","name",t)}})});var KPe=N(()=>{"use strict";u();var iHt=ce(),aHt=bc(),sHt=xc();iHt({target:"String",proto:!0,forced:sHt("big")},{big:function(){return aHt(this,"big","","")}})});var XPe=N(()=>{"use strict";u();var lHt=ce(),uHt=bc(),cHt=xc();lHt({target:"String",proto:!0,forced:cHt("blink")},{blink:function(){return uHt(this,"blink","","")}})});var JPe=N(()=>{"use strict";u();var pHt=ce(),fHt=bc(),dHt=xc();pHt({target:"String",proto:!0,forced:dHt("bold")},{bold:function(){return fHt(this,"b","","")}})});var QPe=N(()=>{"use strict";u();var hHt=ce(),mHt=bc(),gHt=xc();hHt({target:"String",proto:!0,forced:gHt("fixed")},{fixed:function(){return mHt(this,"tt","","")}})});var e4e=N(()=>{"use strict";u();var vHt=ce(),yHt=bc(),_Ht=xc();vHt({target:"String",proto:!0,forced:_Ht("fontcolor")},{fontcolor:function(t){return yHt(this,"font","color",t)}})});var t4e=N(()=>{"use strict";u();var bHt=ce(),xHt=bc(),wHt=xc();bHt({target:"String",proto:!0,forced:wHt("fontsize")},{fontsize:function(t){return xHt(this,"font","size",t)}})});var r4e=N(()=>{"use strict";u();var EHt=ce(),SHt=bc(),THt=xc();EHt({target:"String",proto:!0,forced:THt("italics")},{italics:function(){return SHt(this,"i","","")}})});var n4e=N(()=>{"use strict";u();var IHt=ce(),MHt=bc(),CHt=xc();IHt({target:"String",proto:!0,forced:CHt("link")},{link:function(t){return MHt(this,"a","href",t)}})});var o4e=N(()=>{"use strict";u();var AHt=ce(),OHt=bc(),PHt=xc();AHt({target:"String",proto:!0,forced:PHt("small")},{small:function(){return OHt(this,"small","","")}})});var i4e=N(()=>{"use strict";u();var DHt=ce(),NHt=bc(),LHt=xc();DHt({target:"String",proto:!0,forced:LHt("strike")},{strike:function(){return NHt(this,"strike","","")}})});var a4e=N(()=>{"use strict";u();var kHt=ce(),RHt=bc(),jHt=xc();kHt({target:"String",proto:!0,forced:jHt("sub")},{sub:function(){return RHt(this,"sub","","")}})});var s4e=N(()=>{"use strict";u();var qHt=ce(),zHt=bc(),FHt=xc();qHt({target:"String",proto:!0,forced:FHt("sup")},{sup:function(){return zHt(this,"sup","","")}})});var Q3=N((_sn,u4e)=>{"use strict";u();var l4e=cr(),XX=Gt(),UHt=sC(),BHt=Zn().NATIVE_ARRAY_BUFFER_VIEWS,VHt=l4e.ArrayBuffer,A_=l4e.Int8Array;u4e.exports=!BHt||!XX(function(){A_(1)})||!XX(function(){new A_(-1)})||!UHt(function(e){new A_,new A_(null),new A_(1.5),new A_(e)},!0)||XX(function(){return new A_(new VHt(2),1,void 0).length!==1})});var JX=N((xsn,c4e)=>{"use strict";u();var GHt=lE(),HHt=RangeError;c4e.exports=function(e,t){var r=GHt(e);if(r%t)throw new HHt("Wrong offset");return r}});var QX=N((Esn,p4e)=>{"use strict";u();var WHt=Math.round;p4e.exports=function(e){var t=WHt(e);return t<0?0:t>255?255:t&255}});var ek=N((Tsn,f4e)=>{"use strict";u();var $Ht=Lu();f4e.exports=function(e){var t=$Ht(e);return t==="BigInt64Array"||t==="BigUint64Array"}});var YC=N((Msn,d4e)=>{"use strict";u();var YHt=VM(),ZHt=TypeError;d4e.exports=function(e){var t=YHt(e,"number");if(typeof t=="number")throw new ZHt("Can't convert number to bigint");return BigInt(t)}});var eJ=N((Asn,h4e)=>{"use strict";u();var KHt=ui(),XHt=pr(),JHt=PC(),QHt=Jn(),eWt=ho(),tWt=xy(),rWt=Dh(),nWt=qL(),oWt=ek(),iWt=Zn().aTypedArrayConstructor,aWt=YC();h4e.exports=function(t){var r=JHt(this),n=QHt(t),o=arguments.length,i=o>1?arguments[1]:void 0,a=i!==void 0,c=rWt(n),h,m,y,w,E,A,P,j;if(c&&!nWt(c))for(P=tWt(n,c),j=P.next,n=[];!(A=XHt(j,P)).done;)n.push(A.value);for(a&&o>2&&(i=KHt(i,arguments[2])),m=eWt(n),y=new(iWt(r))(m),w=oWt(y),h=0;m>h;h++)E=a?i(n[h],h):n[h],y[h]=w?aWt(E):+E;return y}});var qh=N((Psn,sJ)=>{"use strict";u();var m4e=ce(),I4e=cr(),g4e=pr(),sWt=$r(),lWt=Q3(),JC=Zn(),M4e=vC(),v4e=au(),uWt=dc(),ZC=ms(),cWt=S3(),pWt=mc(),y4e=eE(),tJ=JX(),fWt=QX(),C4e=Oh(),KC=$n(),dWt=Lu(),oJ=Qr(),hWt=mg(),mWt=Na(),gWt=El(),tk=Kp(),vWt=gy().f,_4e=eJ(),yWt=La().forEach,_Wt=Iy(),bWt=Bi(),A4e=wi(),O4e=Zs(),b4e=bg(),lJ=Ho(),xWt=by(),iJ=lJ.get,wWt=lJ.set,EWt=lJ.enforce,P4e=A4e.f,SWt=O4e.f,rJ=I4e.RangeError,D4e=M4e.ArrayBuffer,TWt=D4e.prototype,IWt=M4e.DataView,rk=JC.NATIVE_ARRAY_BUFFER_VIEWS,x4e=JC.TYPED_ARRAY_TAG,w4e=JC.TypedArray,XC=JC.TypedArrayPrototype,aJ=JC.isTypedArray,nk="BYTES_PER_ELEMENT",nJ="Wrong length",ok=function(e,t){bWt(e,t,{configurable:!0,get:function(){return iJ(this)[t]}})},E4e=function(e){var t;return gWt(TWt,e)||(t=dWt(e))==="ArrayBuffer"||t==="SharedArrayBuffer"},N4e=function(e,t){return aJ(e)&&!hWt(t)&&t in e&&cWt(+t)&&t>=0},S4e=function(t,r){return r=C4e(r),N4e(t,r)?uWt(2,t[r]):SWt(t,r)},T4e=function(t,r,n){return r=C4e(r),N4e(t,r)&&oJ(n)&&KC(n,"value")&&!KC(n,"get")&&!KC(n,"set")&&!n.configurable&&(!KC(n,"writable")||n.writable)&&(!KC(n,"enumerable")||n.enumerable)?(t[r]=n.value,t):P4e(t,r,n)};sWt?(rk||(O4e.f=S4e,A4e.f=T4e,ok(XC,"buffer"),ok(XC,"byteOffset"),ok(XC,"byteLength"),ok(XC,"length")),m4e({target:"Object",stat:!0,forced:!rk},{getOwnPropertyDescriptor:S4e,defineProperty:T4e}),sJ.exports=function(e,t,r){var n=e.match(/\d+/)[0]/8,o=e+(r?"Clamped":"")+"Array",i="get"+e,a="set"+e,c=I4e[o],h=c,m=h&&h.prototype,y={},w=function(j,D){var k=iJ(j);return k.view[i](D*n+k.byteOffset,!0)},E=function(j,D,k){var z=iJ(j);z.view[a](D*n+z.byteOffset,r?fWt(k):k,!0)},A=function(j,D){P4e(j,D,{get:function(){return w(this,D)},set:function(k){return E(this,D,k)},enumerable:!0})};rk?lWt&&(h=t(function(j,D,k,z){return v4e(j,m),xWt(function(){return oJ(D)?E4e(D)?z!==void 0?new c(D,tJ(k,n),z):k!==void 0?new c(D,tJ(k,n)):new c(D):aJ(D)?b4e(h,D):g4e(_4e,h,D):new c(y4e(D))}(),j,h)}),tk&&tk(h,w4e),yWt(vWt(c),function(j){j in h||ZC(h,j,c[j])}),h.prototype=m):(h=t(function(j,D,k,z){v4e(j,m);var V=0,G=0,K,Z,te;if(!oJ(D))te=y4e(D),Z=te*n,K=new D4e(Z);else if(E4e(D)){K=D,G=tJ(k,n);var se=D.byteLength;if(z===void 0){if(se%n)throw new rJ(nJ);if(Z=se-G,Z<0)throw new rJ(nJ)}else if(Z=pWt(z)*n,Z+G>se)throw new rJ(nJ);te=Z/n}else return aJ(D)?b4e(h,D):g4e(_4e,h,D);for(wWt(j,{buffer:K,byteOffset:G,byteLength:Z,length:te,view:new IWt(K)});V<te;)A(j,V++)}),tk&&tk(h,w4e),m=h.prototype=mWt(XC)),m.constructor!==h&&ZC(m,"constructor",h),EWt(m).TypedArrayConstructor=h,x4e&&ZC(m,x4e,o);var P=h!==c;y[o]=h,m4e({global:!0,constructor:!0,forced:P,sham:!rk},y),nk in h||ZC(h,nk,n),nk in m||ZC(m,nk,n),_Wt(o)}):sJ.exports=function(){}});var L4e=N(()=>{"use strict";u();var MWt=qh();MWt("Float32",function(e){return function(r,n,o){return e(this,r,n,o)}})});var k4e=N(()=>{"use strict";u();var CWt=qh();CWt("Float64",function(e){return function(r,n,o){return e(this,r,n,o)}})});var R4e=N(()=>{"use strict";u();var AWt=qh();AWt("Int8",function(e){return function(r,n,o){return e(this,r,n,o)}})});var j4e=N(()=>{"use strict";u();var OWt=qh();OWt("Int16",function(e){return function(r,n,o){return e(this,r,n,o)}})});var q4e=N(()=>{"use strict";u();var PWt=qh();PWt("Int32",function(e){return function(r,n,o){return e(this,r,n,o)}})});var z4e=N(()=>{"use strict";u();var DWt=qh();DWt("Uint8",function(e){return function(r,n,o){return e(this,r,n,o)}})});var F4e=N(()=>{"use strict";u();var NWt=qh();NWt("Uint8",function(e){return function(r,n,o){return e(this,r,n,o)}},!0)});var U4e=N(()=>{"use strict";u();var LWt=qh();LWt("Uint16",function(e){return function(r,n,o){return e(this,r,n,o)}})});var B4e=N(()=>{"use strict";u();var kWt=qh();kWt("Uint32",function(e){return function(r,n,o){return e(this,r,n,o)}})});var uJ=N(()=>{"use strict";u();var V4e=Zn(),RWt=ho(),jWt=Ui(),qWt=V4e.aTypedArray,zWt=V4e.exportTypedArrayMethod;zWt("at",function(t){var r=qWt(this),n=RWt(r),o=jWt(t),i=o>=0?o:n+o;return i<0||i>=n?void 0:r[i]})});var H4e=N(()=>{"use strict";u();var FWt=Lt(),G4e=Zn(),UWt=p$(),BWt=FWt(UWt),VWt=G4e.aTypedArray,GWt=G4e.exportTypedArrayMethod;GWt("copyWithin",function(t,r){return BWt(VWt(this),t,r,arguments.length>2?arguments[2]:void 0)})});var $4e=N(()=>{"use strict";u();var W4e=Zn(),HWt=La().every,WWt=W4e.aTypedArray,$Wt=W4e.exportTypedArrayMethod;$Wt("every",function(t){return HWt(WWt(this),t,arguments.length>1?arguments[1]:void 0)})});var Z4e=N(()=>{"use strict";u();var Y4e=Zn(),YWt=BL(),ZWt=YC(),KWt=Lu(),XWt=pr(),JWt=Lt(),QWt=Gt(),e$t=Y4e.aTypedArray,t$t=Y4e.exportTypedArrayMethod,r$t=JWt("".slice),n$t=QWt(function(){var e=0;return new Int8Array(2).fill({valueOf:function(){return e++}}),e!==1});t$t("fill",function(t){var r=arguments.length;e$t(this);var n=r$t(KWt(this),0,3)==="Big"?ZWt(t):+t;return XWt(YWt,this,n,r>1?arguments[1]:void 0,r>2?arguments[2]:void 0)},n$t)});var ik=N((yln,K4e)=>{"use strict";u();var o$t=bg(),i$t=Zn().getTypedArrayConstructor;K4e.exports=function(e,t){return o$t(i$t(e),t)}});var J4e=N(()=>{"use strict";u();var X4e=Zn(),a$t=La().filter,s$t=ik(),l$t=X4e.aTypedArray,u$t=X4e.exportTypedArrayMethod;u$t("filter",function(t){var r=a$t(l$t(this),t,arguments.length>1?arguments[1]:void 0);return s$t(this,r)})});var eDe=N(()=>{"use strict";u();var Q4e=Zn(),c$t=La().find,p$t=Q4e.aTypedArray,f$t=Q4e.exportTypedArrayMethod;f$t("find",function(t){return c$t(p$t(this),t,arguments.length>1?arguments[1]:void 0)})});var rDe=N(()=>{"use strict";u();var tDe=Zn(),d$t=La().findIndex,h$t=tDe.aTypedArray,m$t=tDe.exportTypedArrayMethod;m$t("findIndex",function(t){return d$t(h$t(this),t,arguments.length>1?arguments[1]:void 0)})});var cJ=N(()=>{"use strict";u();var nDe=Zn(),g$t=aC().findLast,v$t=nDe.aTypedArray,y$t=nDe.exportTypedArrayMethod;y$t("findLast",function(t){return g$t(v$t(this),t,arguments.length>1?arguments[1]:void 0)})});var pJ=N(()=>{"use strict";u();var oDe=Zn(),_$t=aC().findLastIndex,b$t=oDe.aTypedArray,x$t=oDe.exportTypedArrayMethod;x$t("findLastIndex",function(t){return _$t(b$t(this),t,arguments.length>1?arguments[1]:void 0)})});var aDe=N(()=>{"use strict";u();var iDe=Zn(),w$t=La().forEach,E$t=iDe.aTypedArray,S$t=iDe.exportTypedArrayMethod;S$t("forEach",function(t){w$t(E$t(this),t,arguments.length>1?arguments[1]:void 0)})});var sDe=N(()=>{"use strict";u();var T$t=Q3(),I$t=Zn().exportTypedArrayStaticMethod,M$t=eJ();I$t("from",M$t,T$t)});var uDe=N(()=>{"use strict";u();var lDe=Zn(),C$t=Ww().includes,A$t=lDe.aTypedArray,O$t=lDe.exportTypedArrayMethod;O$t("includes",function(t){return C$t(A$t(this),t,arguments.length>1?arguments[1]:void 0)})});var pDe=N(()=>{"use strict";u();var cDe=Zn(),P$t=Ww().indexOf,D$t=cDe.aTypedArray,N$t=cDe.exportTypedArrayMethod;N$t("indexOf",function(t){return P$t(D$t(this),t,arguments.length>1?arguments[1]:void 0)})});var gDe=N(()=>{"use strict";u();var L$t=cr(),k$t=Gt(),fJ=Lt(),dDe=Zn(),dJ=cC(),R$t=an(),hJ=R$t("iterator"),fDe=L$t.Uint8Array,j$t=fJ(dJ.values),q$t=fJ(dJ.keys),z$t=fJ(dJ.entries),mJ=dDe.aTypedArray,ak=dDe.exportTypedArrayMethod,CE=fDe&&fDe.prototype,sk=!k$t(function(){CE[hJ].call([1])}),hDe=!!CE&&CE.values&&CE[hJ]===CE.values&&CE.values.name==="values",mDe=function(){return j$t(mJ(this))};ak("entries",function(){return z$t(mJ(this))},sk);ak("keys",function(){return q$t(mJ(this))},sk);ak("values",mDe,sk||!hDe,{name:"values"});ak(hJ,mDe,sk||!hDe,{name:"values"})});var yDe=N(()=>{"use strict";u();var vDe=Zn(),F$t=Lt(),U$t=vDe.aTypedArray,B$t=vDe.exportTypedArrayMethod,V$t=F$t([].join);B$t("join",function(t){return V$t(U$t(this),t)})});var bDe=N(()=>{"use strict";u();var _De=Zn(),G$t=Sl(),H$t=M$(),W$t=_De.aTypedArray,$$t=_De.exportTypedArrayMethod;$$t("lastIndexOf",function(t){var r=arguments.length;return G$t(H$t,W$t(this),r>1?[t,arguments[1]]:[t])})});var xDe=N(()=>{"use strict";u();var gJ=Zn(),Y$t=La().map,Z$t=gJ.aTypedArray,K$t=gJ.getTypedArrayConstructor,X$t=gJ.exportTypedArrayMethod;X$t("map",function(t){return Y$t(Z$t(this),t,arguments.length>1?arguments[1]:void 0,function(r,n){return new(K$t(r))(n)})})});var EDe=N(()=>{"use strict";u();var wDe=Zn(),J$t=Q3(),Q$t=wDe.aTypedArrayConstructor,eYt=wDe.exportTypedArrayStaticMethod;eYt("of",function(){for(var t=0,r=arguments.length,n=new(Q$t(this))(r);r>t;)n[t]=arguments[t++];return n},J$t)});var TDe=N(()=>{"use strict";u();var SDe=Zn(),tYt=pC().left,rYt=SDe.aTypedArray,nYt=SDe.exportTypedArrayMethod;nYt("reduce",function(t){var r=arguments.length;return tYt(rYt(this),t,r,r>1?arguments[1]:void 0)})});var MDe=N(()=>{"use strict";u();var IDe=Zn(),oYt=pC().right,iYt=IDe.aTypedArray,aYt=IDe.exportTypedArrayMethod;aYt("reduceRight",function(t){var r=arguments.length;return oYt(iYt(this),t,r,r>1?arguments[1]:void 0)})});var ADe=N(()=>{"use strict";u();var CDe=Zn(),sYt=CDe.aTypedArray,lYt=CDe.exportTypedArrayMethod,uYt=Math.floor;lYt("reverse",function(){for(var t=this,r=sYt(t).length,n=uYt(r/2),o=0,i;o<n;)i=t[o],t[o++]=t[--r],t[r]=i;return t})});var kDe=N(()=>{"use strict";u();var PDe=cr(),DDe=pr(),_J=Zn(),cYt=ho(),pYt=JX(),fYt=Jn(),NDe=Gt(),dYt=PDe.RangeError,vJ=PDe.Int8Array,ODe=vJ&&vJ.prototype,LDe=ODe&&ODe.set,hYt=_J.aTypedArray,mYt=_J.exportTypedArrayMethod,yJ=!NDe(function(){var e=new Uint8ClampedArray(2);return DDe(LDe,e,{length:1,0:3},1),e[1]!==3}),gYt=yJ&&_J.NATIVE_ARRAY_BUFFER_VIEWS&&NDe(function(){var e=new vJ(2);return e.set(1),e.set("2",1),e[0]!==0||e[1]!==2});mYt("set",function(t){hYt(this);var r=pYt(arguments.length>1?arguments[1]:void 0,1),n=fYt(t);if(yJ)return DDe(LDe,this,n,r);var o=this.length,i=cYt(n),a=0;if(i+r>o)throw new dYt("Wrong length");for(;a<i;)this[r+a]=n[a++]},!yJ||gYt)});var RDe=N(()=>{"use strict";u();var bJ=Zn(),vYt=Gt(),yYt=gc(),_Yt=bJ.aTypedArray,bYt=bJ.getTypedArrayConstructor,xYt=bJ.exportTypedArrayMethod,wYt=vYt(function(){new Int8Array(1).slice()});xYt("slice",function(t,r){for(var n=yYt(_Yt(this),t,r),o=bYt(this),i=0,a=n.length,c=new o(a);a>i;)c[i]=n[i++];return c},wYt)});var qDe=N(()=>{"use strict";u();var jDe=Zn(),EYt=La().some,SYt=jDe.aTypedArray,TYt=jDe.exportTypedArrayMethod;TYt("some",function(t){return EYt(SYt(this),t,arguments.length>1?arguments[1]:void 0)})});var GDe=N(()=>{"use strict";u();var IYt=cr(),MYt=vy(),xJ=Gt(),CYt=pn(),AYt=KL(),VDe=Zn(),zDe=O$(),OYt=P$(),FDe=hd(),UDe=XL(),PYt=VDe.aTypedArray,DYt=VDe.exportTypedArrayMethod,QC=IYt.Uint16Array,AE=QC&&MYt(QC.prototype.sort),NYt=!!AE&&!(xJ(function(){AE(new QC(2),null)})&&xJ(function(){AE(new QC(2),{})})),BDe=!!AE&&!xJ(function(){if(FDe)return FDe<74;if(zDe)return zDe<67;if(OYt)return!0;if(UDe)return UDe<602;var e=new QC(516),t=Array(516),r,n;for(r=0;r<516;r++)n=r%4,e[r]=515-r,t[r]=r-2*n+3;for(AE(e,function(o,i){return(o/4|0)-(i/4|0)}),r=0;r<516;r++)if(e[r]!==t[r])return!0}),LYt=function(e){return function(t,r){return e!==void 0?+e(t,r)||0:r!==r?-1:t!==t?1:t===0&&r===0?1/t>0&&1/r<0?1:-1:t>r}};DYt("sort",function(t){return t!==void 0&&CYt(t),BDe?AE(this,t):AYt(PYt(this),LYt(t))},!BDe||NYt)});var WDe=N(()=>{"use strict";u();var wJ=Zn(),kYt=mc(),HDe=gd(),RYt=wJ.aTypedArray,jYt=wJ.getTypedArrayConstructor,qYt=wJ.exportTypedArrayMethod;qYt("subarray",function(t,r){var n=RYt(this),o=n.length,i=HDe(t,o),a=jYt(n);return new a(n.buffer,n.byteOffset+i*n.BYTES_PER_ELEMENT,kYt((r===void 0?o:HDe(r,o))-i))})});var XDe=N(()=>{"use strict";u();var zYt=cr(),FYt=Sl(),ZDe=Zn(),EJ=Gt(),$De=gc(),lk=zYt.Int8Array,YDe=ZDe.aTypedArray,UYt=ZDe.exportTypedArrayMethod,KDe=[].toLocaleString,BYt=!!lk&&EJ(function(){KDe.call(new lk(1))}),VYt=EJ(function(){return[1,2].toLocaleString()!==new lk([1,2]).toLocaleString()})||!EJ(function(){lk.prototype.toLocaleString.call([1,2])});UYt("toLocaleString",function(){return FYt(KDe,BYt?$De(YDe(this)):YDe(this),$De(arguments))},VYt)});var TJ=N(()=>{"use strict";u();var GYt=L$(),SJ=Zn(),HYt=SJ.aTypedArray,WYt=SJ.exportTypedArrayMethod,$Yt=SJ.getTypedArrayConstructor;WYt("toReversed",function(){return GYt(HYt(this),$Yt(this))})});var IJ=N(()=>{"use strict";u();var uk=Zn(),YYt=Lt(),ZYt=pn(),KYt=bg(),XYt=uk.aTypedArray,JYt=uk.getTypedArrayConstructor,QYt=uk.exportTypedArrayMethod,eZt=YYt(uk.TypedArrayPrototype.sort);QYt("toSorted",function(t){t!==void 0&&ZYt(t);var r=XYt(this),n=KYt(JYt(r),r);return eZt(n,t)})});var QDe=N(()=>{"use strict";u();var tZt=Zn().exportTypedArrayMethod,rZt=Gt(),nZt=cr(),oZt=Lt(),JDe=nZt.Uint8Array,iZt=JDe&&JDe.prototype||{},ck=[].toString,aZt=oZt([].join);rZt(function(){ck.call({})})&&(ck=function(){return aZt(this)});var sZt=iZt.toString!==ck;tZt("toString",ck,sZt)});var CJ=N(()=>{"use strict";u();var lZt=z$(),MJ=Zn(),uZt=ek(),cZt=Ui(),pZt=YC(),fZt=MJ.aTypedArray,dZt=MJ.getTypedArrayConstructor,hZt=MJ.exportTypedArrayMethod,mZt=!!function(){try{new Int8Array(1).with(2,{valueOf:function(){throw 8}})}catch(e){return e===8}}();hZt("with",function(e,t){var r=fZt(this),n=cZt(e),o=uZt(r)?pZt(t):+t;return lZt(r,dZt(r),n,o)},!mZt)});var oNe=N(()=>{"use strict";u();var gZt=ce(),AJ=Lt(),vZt=Sn(),eNe=String.fromCharCode,tNe=AJ("".charAt),rNe=AJ(/./.exec),nNe=AJ("".slice),yZt=/^[\da-f]{2}$/i,_Zt=/^[\da-f]{4}$/i;gZt({global:!0},{unescape:function(t){for(var r=vZt(t),n="",o=r.length,i=0,a,c;i<o;){if(a=tNe(r,i++),a==="%"){if(tNe(r,i)==="u"){if(c=nNe(r,i+1,i+5),rNe(_Zt,c)){n+=eNe(parseInt(c,16)),i+=5;continue}}else if(c=nNe(r,i,i+2),rNe(yZt,c)){n+=eNe(parseInt(c,16)),i+=2;continue}}n+=a}return n}})});var DJ=N((Xun,cNe)=>{"use strict";u();var bZt=Lt(),iNe=Qp(),pk=Ny().getWeakData,xZt=au(),wZt=dr(),EZt=hc(),OJ=Qr(),SZt=ha(),sNe=La(),aNe=$n(),lNe=Ho(),TZt=lNe.set,IZt=lNe.getterFor,MZt=sNe.find,CZt=sNe.findIndex,AZt=bZt([].splice),OZt=0,fk=function(e){return e.frozen||(e.frozen=new uNe)},uNe=function(){this.entries=[]},PJ=function(e,t){return MZt(e.entries,function(r){return r[0]===t})};uNe.prototype={get:function(e){var t=PJ(this,e);if(t)return t[1]},has:function(e){return!!PJ(this,e)},set:function(e,t){var r=PJ(this,e);r?r[1]=t:this.entries.push([e,t])},delete:function(e){var t=CZt(this.entries,function(r){return r[0]===e});return~t&&AZt(this.entries,t,1),!!~t}};cNe.exports={getConstructor:function(e,t,r,n){var o=e(function(h,m){xZt(h,i),TZt(h,{type:t,id:OZt++,frozen:null}),EZt(m)||SZt(m,h[n],{that:h,AS_ENTRIES:r})}),i=o.prototype,a=IZt(t),c=function(h,m,y){var w=a(h),E=pk(wZt(m),!0);return E===!0?fk(w).set(m,y):E[w.id]=y,h};return iNe(i,{delete:function(h){var m=a(this);if(!OJ(h))return!1;var y=pk(h);return y===!0?fk(m).delete(h):y&&aNe(y,m.id)&&delete y[m.id]},has:function(m){var y=a(this);if(!OJ(m))return!1;var w=pk(m);return w===!0?fk(y).has(m):w&&aNe(w,y.id)}}),iNe(i,r?{get:function(m){var y=a(this);if(OJ(m)){var w=pk(m);if(w===!0)return fk(y).get(m);if(w)return w[y.id]}},set:function(m,y){return c(this,m,y)}}:{add:function(m){return c(this,m,!0)}}),o}}});var yNe=N(()=>{"use strict";u();var PZt=Tg(),pNe=cr(),gk=Lt(),fNe=Qp(),DZt=Ny(),NZt=xC(),dNe=DJ(),dk=Qr(),hk=Ho().enforce,LZt=Gt(),kZt=dW(),rA=Object,RZt=Array.isArray,mk=rA.isExtensible,hNe=rA.isFrozen,jZt=rA.isSealed,mNe=rA.freeze,qZt=rA.seal,zZt=!pNe.ActiveXObject&&"ActiveXObject"in pNe,eA,gNe=function(e){return function(){return e(this,arguments.length?arguments[0]:void 0)}},vNe=NZt("WeakMap",gNe,dNe),OE=vNe.prototype,vk=gk(OE.set),FZt=function(){return PZt&&LZt(function(){var e=mNe([]);return vk(new vNe,e,1),!hNe(e)})};kZt&&(zZt?(eA=dNe.getConstructor(gNe,"WeakMap",!0),DZt.enable(),NJ=gk(OE.delete),tA=gk(OE.has),LJ=gk(OE.get),fNe(OE,{delete:function(e){if(dk(e)&&!mk(e)){var t=hk(this);return t.frozen||(t.frozen=new eA),NJ(this,e)||t.frozen.delete(e)}return NJ(this,e)},has:function(t){if(dk(t)&&!mk(t)){var r=hk(this);return r.frozen||(r.frozen=new eA),tA(this,t)||r.frozen.has(t)}return tA(this,t)},get:function(t){if(dk(t)&&!mk(t)){var r=hk(this);return r.frozen||(r.frozen=new eA),tA(this,t)?LJ(this,t):r.frozen.get(t)}return LJ(this,t)},set:function(t,r){if(dk(t)&&!mk(t)){var n=hk(this);n.frozen||(n.frozen=new eA),tA(this,t)?vk(this,t,r):n.frozen.set(t,r)}else vk(this,t,r);return this}})):FZt()&&fNe(OE,{set:function(t,r){var n;return RZt(t)&&(hNe(t)?n=mNe:jZt(t)&&(n=qZt)),vk(this,t,r),n&&n(t),this}}));var NJ,tA,LJ});var yk=N(()=>{"use strict";u();yNe()});var _Ne=N(()=>{"use strict";u();var UZt=xC(),BZt=DJ();UZt("WeakSet",function(e){return function(){return e(this,arguments.length?arguments[0]:void 0)}},BZt)});var bNe=N(()=>{"use strict";u();_Ne()});var xNe=N(()=>{"use strict";u();i$()});var SNe=N(()=>{"use strict";u();var VZt=ce(),GZt=cr(),HZt=El(),wNe=gs(),bk=Kp(),WZt=p_(),ENe=Na(),_k=ms(),kJ=dc(),$Zt=LL(),YZt=g_(),ZZt=an(),KZt=Gt(),XZt=To(),PE=GZt.SuppressedError,JZt=ZZt("toStringTag"),xk=Error,QZt=!!PE&&PE.length!==3,eKt=!!PE&&KZt(function(){return new PE(1,2,3,{cause:4}).cause===4}),wk=QZt||eKt,O_=function(t,r,n){var o=HZt(nA,this),i;return bk?i=wk&&(!o||wNe(this)===nA)?new PE:bk(new xk,o?wNe(this):nA):(i=o?this:ENe(nA),_k(i,JZt,"Error")),n!==void 0&&_k(i,"message",YZt(n)),$Zt(i,O_,i.stack,1),_k(i,"error",t),_k(i,"suppressed",r),i};bk?bk(O_,xk):WZt(O_,xk,{name:!0});var nA=O_.prototype=wk?PE.prototype:ENe(xk.prototype,{constructor:kJ(1,O_),message:kJ(1,""),name:kJ(1,"SuppressedError")});wk&&!XZt&&(nA.constructor=O_);VZt({global:!0,constructor:!0,arity:3,forced:wk},{SuppressedError:O_})});var DE=N((vcn,DNe)=>{"use strict";u();var ANe=cr(),ONe=BM(),PNe=Rn(),tKt=Na(),Ek=gs(),rKt=ei(),nKt=an(),oKt=To(),TNe="USE_FUNCTION_CONSTRUCTOR",INe=nKt("asyncIterator"),MNe=ANe.AsyncIterator,CNe=ONe.AsyncIteratorPrototype,zh,RJ;if(CNe)zh=CNe;else if(PNe(MNe))zh=MNe.prototype;else if(ONe[TNe]||ANe[TNe])try{RJ=Ek(Ek(Ek(Function("return async function*(){}()")()))),Ek(RJ)===Object.prototype&&(zh=RJ)}catch(e){}zh?oKt&&(zh=tKt(zh)):zh={};PNe(zh[INe])||rKt(zh,INe,function(){return this});DNe.exports=zh});var oA=N((_cn,UNe)=>{"use strict";u();var NNe=pr(),LNe=dr(),iKt=Na(),aKt=Da(),sKt=Qp(),jNe=Ho(),lKt=Xs(),uKt=cn(),cKt=DE(),qNe=Ls(),jJ=uKt("Promise"),zNe="AsyncFromSyncIterator",pKt=jNe.set,kNe=jNe.getterFor(zNe),RNe=function(e,t,r,n,o){var i=e.done;jJ.resolve(e.value).then(function(a){t(qNe(a,i))},function(a){if(!i&&o)try{lKt(n,"throw",a)}catch(c){a=c}r(a)})},FNe=function(t){t.type=zNe,pKt(this,t)};FNe.prototype=sKt(iKt(cKt),{next:function(){var t=kNe(this);return new jJ(function(r,n){var o=LNe(NNe(t.next,t.iterator));RNe(o,r,n,t.iterator,!0)})},return:function(){var e=kNe(this).iterator;return new jJ(function(t,r){var n=aKt(e,"return");if(n===void 0)return t(qNe(void 0,!0));var o=LNe(NNe(n,e));RNe(o,t,r,e)})}});UNe.exports=FNe});var VNe=N((xcn,BNe)=>{"use strict";u();var fKt=pr(),dKt=oA(),hKt=dr(),mKt=xy(),gKt=ta(),vKt=Da(),yKt=an(),_Kt=yKt("asyncIterator");BNe.exports=function(e,t){var r=arguments.length<2?vKt(e,_Kt):t;return r?hKt(fKt(r,e)):new dKt(gKt(mKt(e)))}});var NE=N((Ecn,GNe)=>{"use strict";u();var bKt=pr(),xKt=cn(),wKt=Da();GNe.exports=function(e,t,r,n){try{var o=wKt(e,"return");if(o)return xKt("Promise").resolve(bKt(o,e)).then(function(){t(r)},function(i){n(i)})}catch(i){return n(i)}t(r)}});var P_=N((Tcn,HNe)=>{"use strict";u();var EKt=pr(),SKt=pn(),qJ=dr(),TKt=Qr(),IKt=wy(),MKt=cn(),CKt=ta(),zJ=NE(),iA=function(e){var t=e===0,r=e===1,n=e===2,o=e===3;return function(i,a,c){qJ(i);var h=a!==void 0;(h||!t)&&SKt(a);var m=CKt(i),y=MKt("Promise"),w=m.iterator,E=m.next,A=0;return new y(function(P,j){var D=function(z){zJ(w,j,z,j)},k=function(){try{if(h)try{IKt(A)}catch(z){D(z)}y.resolve(qJ(EKt(E,w))).then(function(z){try{if(qJ(z).done)t?(c.length=A,P(c)):P(o?!1:n||void 0);else{var V=z.value;try{if(h){var G=a(V,A),K=function(Z){if(r)k();else if(n)Z?k():zJ(w,P,!1,j);else if(t)try{c[A++]=Z,k()}catch(te){D(te)}else Z?zJ(w,P,o||V,j):k()};TKt(G)?y.resolve(G).then(K,D):K(G)}else c[A++]=V,k()}catch(Z){D(Z)}}}catch(Z){j(Z)}},j)}catch(z){j(z)}};k()})}};HNe.exports={toArray:iA(0),forEach:iA(1),every:iA(2),some:iA(3),find:iA(4)}});var FJ=N((Mcn,ZNe)=>{"use strict";u();var AKt=ui(),WNe=Lt(),OKt=Jn(),PKt=yd(),DKt=VNe(),NKt=xy(),LKt=ta(),kKt=Dh(),RKt=Da(),jKt=cn(),qKt=R$(),zKt=an(),FKt=oA(),UKt=P_().toArray,BKt=zKt("asyncIterator"),$Ne=WNe(qKt("Array","values")),VKt=WNe($Ne([]).next),GKt=function(){return new YNe(this)},YNe=function(e){this.iterator=$Ne(e)};YNe.prototype.next=function(){return VKt(this.iterator)};ZNe.exports=function(t){var r=this,n=arguments.length,o=n>1?arguments[1]:void 0,i=n>2?arguments[2]:void 0;return new(jKt("Promise"))(function(a){var c=OKt(t);o!==void 0&&(o=AKt(o,i));var h=RKt(c,BKt),m=h?void 0:kKt(c)||GKt,y=PKt(r)?new r:[],w=h?DKt(c,h):new FKt(LKt(NKt(c,m)));a(UKt(w,o,y))})}});var XNe=N(()=>{"use strict";u();var HKt=ce(),WKt=FJ(),$Kt=Gt(),KNe=Array.fromAsync,YKt=!KNe||$Kt(function(){var e=0;return KNe.call(function(){return e++,[]},{length:0}),e!==1});HKt({target:"Array",stat:!0,forced:YKt},{fromAsync:WKt})});var JNe=N(()=>{"use strict";u();u$()});var QNe=N(()=>{"use strict";u();var ZKt=ce(),KKt=La().filterReject,XKt=ma();ZKt({target:"Array",proto:!0,forced:!0},{filterOut:function(t){return KKt(this,t,arguments.length>1?arguments[1]:void 0)}});XKt("filterOut")});var e5e=N(()=>{"use strict";u();var JKt=ce(),QKt=La().filterReject,eXt=ma();JKt({target:"Array",proto:!0,forced:!0},{filterReject:function(t){return QKt(this,t,arguments.length>1?arguments[1]:void 0)}});eXt("filterReject")});var t5e=N(()=>{"use strict";u();h$()});var r5e=N(()=>{"use strict";u();m$()});var Sk=N(($cn,n5e)=>{"use strict";u();var tXt=ui(),rXt=Lt(),nXt=hg(),oXt=Jn(),iXt=Oh(),aXt=ho(),sXt=Na(),lXt=bg(),uXt=Array,cXt=rXt([].push);n5e.exports=function(e,t,r,n){for(var o=oXt(e),i=nXt(o),a=tXt(t,r),c=sXt(null),h=aXt(i),m=0,y,w,E;h>m;m++)E=i[m],w=iXt(a(E,m,o)),w in c?cXt(c[w],E):c[w]=[E];if(n&&(y=n(o),y!==uXt))for(w in c)c[w]=lXt(y,c[w]);return c}});var o5e=N(()=>{"use strict";u();var pXt=ce(),fXt=Sk(),dXt=ma();pXt({target:"Array",proto:!0},{group:function(t){var r=arguments.length>1?arguments[1]:void 0;return fXt(this,t,r)}});dXt("group")});var i5e=N(()=>{"use strict";u();var hXt=ce(),mXt=Sk(),gXt=Jp(),vXt=ma();hXt({target:"Array",proto:!0,forced:!gXt("groupBy")},{groupBy:function(t){var r=arguments.length>1?arguments[1]:void 0;return mXt(this,t,r)}});vXt("groupBy")});var UJ=N((tpn,a5e)=>{"use strict";u();var yXt=ui(),_Xt=Lt(),bXt=hg(),xXt=Jn(),wXt=ho(),Tk=ks(),EXt=Tk.Map,SXt=Tk.get,TXt=Tk.has,IXt=Tk.set,MXt=_Xt([].push);a5e.exports=function(t){for(var r=xXt(this),n=bXt(r),o=yXt(t,arguments.length>1?arguments[1]:void 0),i=new EXt,a=wXt(n),c=0,h,m;a>c;c++)m=n[c],h=o(m,c,r),TXt(i,h)?MXt(SXt(i,h),m):IXt(i,h,[m]);return i}});var s5e=N(()=>{"use strict";u();var CXt=ce(),AXt=Jp(),OXt=ma(),PXt=UJ(),DXt=To();CXt({target:"Array",proto:!0,name:"groupToMap",forced:DXt||!AXt("groupByToMap")},{groupByToMap:PXt});OXt("groupByToMap")});var l5e=N(()=>{"use strict";u();var NXt=ce(),LXt=ma(),kXt=UJ(),RXt=To();NXt({target:"Array",proto:!0,forced:RXt},{groupToMap:kXt});LXt("groupToMap")});var p5e=N(()=>{"use strict";u();var jXt=ce(),qXt=vd(),u5e=Object.isFrozen,c5e=function(e,t){if(!u5e||!qXt(e)||!u5e(e))return!1;for(var r=0,n=e.length,o;r<n;)if(o=e[r++],!(typeof o=="string"||t&&o===void 0))return!1;return n!==0};jXt({target:"Array",stat:!0,sham:!0,forced:!0},{isTemplateObject:function(t){if(!c5e(t,!0))return!1;var r=t.raw;return r.length===t.length&&c5e(r,!1)}})});var f5e=N(()=>{"use strict";u();var zXt=$r(),FXt=ma(),UXt=Jn(),BXt=ho(),VXt=Bi();zXt&&(VXt(Array.prototype,"lastIndex",{configurable:!0,get:function(){var t=UXt(this),r=BXt(t);return r===0?0:r-1}}),FXt("lastIndex"))});var m5e=N(()=>{"use strict";u();var GXt=$r(),HXt=ma(),d5e=Jn(),h5e=ho(),WXt=Bi();GXt&&(WXt(Array.prototype,"lastItem",{configurable:!0,get:function(){var t=d5e(this),r=h5e(t);return r===0?void 0:t[r-1]},set:function(t){var r=d5e(this),n=h5e(r);return r[n===0?0:n-1]=t}}),HXt("lastItem"))});var g5e=N(()=>{"use strict";u();k$()});var v5e=N(()=>{"use strict";u();j$()});var y5e=N(()=>{"use strict";u();q$()});var ef=N((Mpn,E5e)=>{"use strict";u();var _5e=Lt(),$Xt=Mg(),b5e=ks(),YXt=b5e.Map,x5e=b5e.proto,ZXt=_5e(x5e.forEach),w5e=_5e(x5e.entries),KXt=w5e(new YXt).next;E5e.exports=function(e,t,r){return r?$Xt({iterator:w5e(e),next:KXt},function(n){return t(n[1],n[0])}):ZXt(e,t)}});var Ik=N((Apn,S5e)=>{"use strict";u();var XXt=Lt(),JXt=pn(),QXt=hc(),eJt=ho(),tJt=Jn(),BJ=ks(),rJt=ef(),nJt=BJ.Map,oJt=BJ.has,iJt=BJ.set,aJt=XXt([].push);S5e.exports=function(t){var r=tJt(this),n=eJt(r),o=[],i=new nJt,a=QXt(t)?function(y){return y}:JXt(t),c,h,m;for(c=0;c<n;c++)h=r[c],m=a(h),oJt(i,m)||iJt(i,m,h);return rJt(i,function(y){aJt(o,y)}),o}});var T5e=N(()=>{"use strict";u();var sJt=ce(),lJt=ma(),uJt=Ik();sJt({target:"Array",proto:!0,forced:!0},{uniqueBy:uJt});lJt("uniqueBy")});var I5e=N(()=>{"use strict";u();F$()});var M5e=N(()=>{"use strict";u();dY()});var C5e=N(()=>{"use strict";u();CY()});var A5e=N(()=>{"use strict";u();AY()});var GJ=N((Wpn,L5e)=>{"use strict";u();var cJt=cn(),pJt=pr(),fJt=Lt(),dJt=ui(),hJt=dr(),mJt=pn(),D5e=hc(),VJ=Da(),N5e=an(),gJt=N5e("asyncDispose"),O5e=N5e("dispose"),vJt=fJt([].push),yJt=function(e,t){if(t==="async-dispose"){var r=VJ(e,gJt);return r!==void 0||(r=VJ(e,O5e),r===void 0)?r:function(){var n=this,o=cJt("Promise");return new o(function(i){pJt(r,n),i(void 0)})}}return VJ(e,O5e)},P5e=function(e,t,r){return arguments.length<3&&!D5e(e)&&(r=mJt(yJt(hJt(e),t))),r===void 0?function(){}:dJt(r,e)};L5e.exports=function(e,t,r,n){var o;if(arguments.length<4){if(D5e(t)&&r==="sync-dispose")return;o=P5e(t,r)}else o=P5e(void 0,r,n);vJt(e.stack,o)}});var B5e=N(()=>{"use strict";u();var _Jt=ce(),Ck=$r(),q5e=cn(),k5e=pn(),bJt=au(),z5e=ei(),xJt=Qp(),wJt=Bi(),F5e=an(),U5e=Ho(),HJ=GJ(),R5e=hd(),j5e=q5e("Promise"),EJt=q5e("SuppressedError"),SJt=ReferenceError,TJt=F5e("asyncDispose"),IJt=F5e("toStringTag"),Ok="AsyncDisposableStack",MJt=U5e.set,Ak=U5e.getterFor(Ok),WJ="async-dispose",aA="disposed",CJt="pending",Mk=function(e){var t=Ak(e);if(t.state===aA)throw new SJt(Ok+" already disposed");return t},$J=function(){MJt(bJt(this,LE),{type:Ok,state:CJt,stack:[]}),Ck||(this.disposed=!1)},LE=$J.prototype;xJt(LE,{disposeAsync:function(){var t=this;return new j5e(function(r,n){var o=Ak(t);if(o.state===aA)return r(void 0);o.state=aA,Ck||(t.disposed=!0);var i=o.stack,a=i.length,c=!1,h,m=function(w){c?h=new EJt(w,h):(c=!0,h=w),y()},y=function(){if(a){var w=i[--a];i[a]=null;try{j5e.resolve(w()).then(y,m)}catch(E){m(E)}}else o.stack=null,c?n(h):r(void 0)};y()})},use:function(t){return HJ(Mk(this),t,WJ),t},adopt:function(t,r){var n=Mk(this);return k5e(r),HJ(n,void 0,WJ,function(){return r(t)}),t},defer:function(t){var r=Mk(this);k5e(t),HJ(r,void 0,WJ,t)},move:function(){var t=Mk(this),r=new $J;return Ak(r).stack=t.stack,t.stack=[],t.state=aA,Ck||(this.disposed=!0),r}});Ck&&wJt(LE,"disposed",{configurable:!0,get:function(){return Ak(this).state===aA}});z5e(LE,TJt,LE.disposeAsync,{name:"disposeAsync"});z5e(LE,IJt,Ok,{nonWritable:!0});var AJt=R5e&&R5e<136;_Jt({global:!0,constructor:!0,forced:AJt},{AsyncDisposableStack:$J})});var $5e=N(()=>{"use strict";u();var OJt=ce(),PJt=au(),DJt=gs(),G5e=ms(),H5e=$n(),NJt=an(),Fy=DE(),W5e=To(),V5e=NJt("toStringTag"),LJt=TypeError,YJ=function(){if(PJt(this,Fy),DJt(this)===Fy)throw new LJt("Abstract class AsyncIterator not directly constructable")};YJ.prototype=Fy;H5e(Fy,V5e)||G5e(Fy,V5e,"AsyncIterator");(W5e||!H5e(Fy,"constructor")||Fy.constructor===Object)&&G5e(Fy,"constructor",YJ);OJt({global:!0,constructor:!0,forced:W5e},{AsyncIterator:YJ})});var D_=N((efn,tLe)=>{"use strict";u();var kJt=pr(),Pk=Ly(),Y5e=dr(),RJt=Na(),jJt=ms(),qJt=Qp(),zJt=an(),K5e=Ho(),FJt=cn(),UJt=Da(),BJt=DE(),ZJ=Ls(),Z5e=Xs(),Fh=FJt("Promise"),VJt=zJt("toStringTag"),X5e="AsyncIteratorHelper",J5e="WrapForValidAsyncIterator",GJt=K5e.set,Q5e=function(e){var t=!e,r=K5e.getterFor(e?J5e:X5e),n=function(o){var i=Pk(function(){return r(o)}),a=i.error,c=i.value;return a||t&&c.done?{exit:!0,value:a?Fh.reject(c):Fh.resolve(ZJ(void 0,!0))}:{exit:!1,value:c}};return qJt(RJt(BJt),{next:function(){var i=n(this),a=i.value;if(i.exit)return a;var c=Pk(function(){return Y5e(a.nextHandler(Fh))}),h=c.error,m=c.value;return h&&(a.done=!0),h?Fh.reject(m):Fh.resolve(m)},return:function(){var o=n(this),i=o.value;if(o.exit)return i;i.done=!0;var a=i.iterator,c,h,m=Pk(function(){if(i.inner)try{Z5e(i.inner.iterator,"normal")}catch(y){return Z5e(a,"throw",y)}return UJt(a,"return")});return c=h=m.value,m.error?Fh.reject(h):c===void 0?Fh.resolve(ZJ(void 0,!0)):(m=Pk(function(){return kJt(c,a)}),h=m.value,m.error?Fh.reject(h):e?Fh.resolve(h):Fh.resolve(h).then(function(y){return Y5e(y),ZJ(void 0,!0)}))}})},HJt=Q5e(!0),eLe=Q5e(!1);jJt(eLe,VJt,"Async Iterator Helper");tLe.exports=function(e,t){var r=function(o,i){i?(i.iterator=o.iterator,i.next=o.next):i=o,i.type=t?J5e:X5e,i.nextHandler=e,i.counter=0,i.done=!1,GJt(this,i)};return r.prototype=t?HJt:eLe,r}});var XJ=N((rfn,nLe)=>{"use strict";u();var WJt=pr(),$Jt=pn(),KJ=dr(),YJt=Qr(),ZJt=ta(),KJt=D_(),rLe=Ls(),XJt=NE(),JJt=KJt(function(e){var t=this,r=t.iterator,n=t.mapper;return new e(function(o,i){var a=function(h){t.done=!0,i(h)},c=function(h){XJt(r,a,h,a)};e.resolve(KJ(WJt(t.next,r))).then(function(h){try{if(KJ(h).done)t.done=!0,o(rLe(void 0,!0));else{var m=h.value;try{var y=n(m,t.counter++),w=function(E){o(rLe(E,!1))};YJt(y)?e.resolve(y).then(w,c):w(y)}catch(E){c(E)}}}catch(E){a(E)}},a)})});nLe.exports=function(t){return KJ(this),$Jt(t),new JJt(ZJt(this),{mapper:t})}});var JJ=N((ofn,oLe)=>{"use strict";u();var QJt=pr(),eQt=XJ(),tQt=function(e,t){return[t,e]};oLe.exports=function(){return QJt(eQt,this,tQt)}});var iLe=N(()=>{"use strict";u();var rQt=ce(),nQt=JJ();rQt({target:"AsyncIterator",name:"indexed",proto:!0,real:!0,forced:!0},{asIndexedPairs:nQt})});var uLe=N(()=>{"use strict";u();var oQt=pr(),iQt=ei(),aQt=cn(),sQt=Da(),lQt=$n(),uQt=an(),aLe=DE(),sLe=uQt("asyncDispose"),lLe=aQt("Promise");lQt(aLe,sLe)||iQt(aLe,sLe,function(){var e=this;return new lLe(function(t,r){var n=sQt(e,"return");n?lLe.resolve(oQt(n,e)).then(function(){t(void 0)},r):t(void 0)})})});var pLe=N(()=>{"use strict";u();var cQt=ce(),pQt=pr(),QJ=dr(),fQt=ta(),dQt=sE(),hQt=lE(),mQt=D_(),cLe=Ls(),gQt=mQt(function(e){var t=this;return new e(function(r,n){var o=function(a){t.done=!0,n(a)},i=function(){try{e.resolve(QJ(pQt(t.next,t.iterator))).then(function(a){try{QJ(a).done?(t.done=!0,r(cLe(void 0,!0))):t.remaining?(t.remaining--,i()):r(cLe(a.value,!1))}catch(c){o(c)}},o)}catch(a){o(a)}};i()})});cQt({target:"AsyncIterator",proto:!0,real:!0,forced:!0},{drop:function(t){QJ(this);var r=hQt(dQt(+t));return new gQt(fQt(this),{remaining:r})}})});var fLe=N(()=>{"use strict";u();var vQt=ce(),yQt=P_().every;vQt({target:"AsyncIterator",proto:!0,real:!0,forced:!0},{every:function(t){return yQt(this,t)}})});var hLe=N(()=>{"use strict";u();var _Qt=ce(),bQt=pr(),xQt=pn(),eQ=dr(),wQt=Qr(),EQt=ta(),SQt=D_(),dLe=Ls(),TQt=NE(),IQt=SQt(function(e){var t=this,r=t.iterator,n=t.predicate;return new e(function(o,i){var a=function(m){t.done=!0,i(m)},c=function(m){TQt(r,a,m,a)},h=function(){try{e.resolve(eQ(bQt(t.next,r))).then(function(m){try{if(eQ(m).done)t.done=!0,o(dLe(void 0,!0));else{var y=m.value;try{var w=n(y,t.counter++),E=function(A){A?o(dLe(y,!1)):h()};wQt(w)?e.resolve(w).then(E,c):E(w)}catch(A){c(A)}}}catch(A){a(A)}},a)}catch(m){a(m)}};h()})});_Qt({target:"AsyncIterator",proto:!0,real:!0,forced:!0},{filter:function(t){return eQ(this),xQt(t),new IQt(EQt(this),{predicate:t})}})});var mLe=N(()=>{"use strict";u();var MQt=ce(),CQt=P_().find;MQt({target:"AsyncIterator",proto:!0,real:!0,forced:!0},{find:function(t){return CQt(this,t)}})});var tQ=N((Sfn,yLe)=>{"use strict";u();var AQt=pr(),OQt=Rn(),gLe=dr(),vLe=ta(),PQt=Dh(),DQt=Da(),NQt=an(),LQt=oA(),kQt=NQt("asyncIterator");yLe.exports=function(e){var t=gLe(e),r=!0,n=DQt(t,kQt),o;return OQt(n)||(n=PQt(t),r=!1),n!==void 0?o=AQt(n,t):(o=t,r=!0),gLe(o),vLe(r?o:new LQt(vLe(o)))}});var xLe=N(()=>{"use strict";u();var RQt=ce(),_Le=pr(),jQt=pn(),sA=dr(),qQt=Qr(),zQt=ta(),FQt=D_(),bLe=Ls(),UQt=tQ(),BQt=NE(),VQt=FQt(function(e){var t=this,r=t.iterator,n=t.mapper;return new e(function(o,i){var a=function(y){t.done=!0,i(y)},c=function(y){BQt(r,a,y,a)},h=function(){try{e.resolve(sA(_Le(t.next,r))).then(function(y){try{if(sA(y).done)t.done=!0,o(bLe(void 0,!0));else{var w=y.value;try{var E=n(w,t.counter++),A=function(P){try{t.inner=UQt(P),m()}catch(j){c(j)}};qQt(E)?e.resolve(E).then(A,c):A(E)}catch(P){c(P)}}}catch(P){a(P)}},a)}catch(y){a(y)}},m=function(){var y=t.inner;if(y)try{e.resolve(sA(_Le(y.next,y.iterator))).then(function(w){try{sA(w).done?(t.inner=null,h()):o(bLe(w.value,!1))}catch(E){c(E)}},c)}catch(w){c(w)}else h()};m()})});RQt({target:"AsyncIterator",proto:!0,real:!0,forced:!0},{flatMap:function(t){return sA(this),jQt(t),new VQt(zQt(this),{mapper:t,inner:null})}})});var wLe=N(()=>{"use strict";u();var GQt=ce(),HQt=P_().forEach;GQt({target:"AsyncIterator",proto:!0,real:!0,forced:!0},{forEach:function(t){return HQt(this,t)}})});var rQ=N((Dfn,ELe)=>{"use strict";u();var WQt=pr(),$Qt=D_();ELe.exports=$Qt(function(){return WQt(this.next,this.iterator)},!0)});var SLe=N(()=>{"use strict";u();var YQt=ce(),ZQt=Jn(),KQt=El(),XQt=tQ(),JQt=DE(),QQt=rQ();YQt({target:"AsyncIterator",stat:!0,forced:!0},{from:function(t){var r=XQt(typeof t=="string"?ZQt(t):t);return KQt(JQt,r.iterator)?r.iterator:new QQt(r)}})});var TLe=N(()=>{"use strict";u();var eer=ce(),ter=JJ();eer({target:"AsyncIterator",proto:!0,real:!0,forced:!0},{indexed:ter})});var ILe=N(()=>{"use strict";u();var rer=ce(),ner=XJ();rer({target:"AsyncIterator",proto:!0,real:!0,forced:!0},{map:ner})});var MLe=N(()=>{"use strict";u();var oer=ce(),ier=pr(),aer=pn(),nQ=dr(),ser=Qr(),ler=cn(),uer=ta(),cer=NE(),oQ=ler("Promise"),per=TypeError;oer({target:"AsyncIterator",proto:!0,real:!0,forced:!0},{reduce:function(t){nQ(this),aer(t);var r=uer(this),n=r.iterator,o=r.next,i=arguments.length<2,a=i?void 0:arguments[1],c=0;return new oQ(function(h,m){var y=function(E){cer(n,m,E,m)},w=function(){try{oQ.resolve(nQ(ier(o,n))).then(function(E){try{if(nQ(E).done)i?m(new per("Reduce of empty iterator with no initial value")):h(a);else{var A=E.value;if(i)i=!1,a=A,w();else try{var P=t(a,A,c),j=function(D){a=D,w()};ser(P)?oQ.resolve(P).then(j,y):j(P)}catch(D){y(D)}}c++}catch(D){m(D)}},m)}catch(E){m(E)}};w()})}})});var CLe=N(()=>{"use strict";u();var fer=ce(),der=P_().some;fer({target:"AsyncIterator",proto:!0,real:!0,forced:!0},{some:function(t){return der(this,t)}})});var PLe=N(()=>{"use strict";u();var her=ce(),ALe=pr(),OLe=dr(),mer=ta(),ger=sE(),ver=lE(),yer=D_(),iQ=Ls(),_er=yer(function(e){var t=this,r=t.iterator,n;if(!t.remaining--){var o=iQ(void 0,!0);return t.done=!0,n=r.return,n!==void 0?e.resolve(ALe(n,r,void 0)).then(function(){return o}):o}return e.resolve(ALe(t.next,r)).then(function(i){return OLe(i).done?(t.done=!0,iQ(void 0,!0)):iQ(i.value,!1)}).then(null,function(i){throw t.done=!0,i})});her({target:"AsyncIterator",proto:!0,real:!0,forced:!0},{take:function(t){OLe(this);var r=ver(ger(+t));return new _er(mer(this),{remaining:r})}})});var DLe=N(()=>{"use strict";u();var ber=ce(),xer=P_().toArray;ber({target:"AsyncIterator",proto:!0,real:!0,forced:!0},{toArray:function(){return xer(this,void 0,[])}})});var Nk=N((tdn,qLe)=>{"use strict";u();var LLe=Ho(),wer=Sy(),aQ=Ls(),Eer=hc(),Ser=Qr(),Ter=Bi(),kLe=$r(),lA="Incorrect Iterator.range arguments",lQ="NumericRangeIterator",Ier=LLe.set,RLe=LLe.getterFor(lQ),NLe=RangeError,sQ=TypeError,jLe=wer(function(t,r,n,o,i,a){if(typeof t!=o||r!==1/0&&r!==-1/0&&typeof r!=o)throw new sQ(lA);if(t===1/0||t===-1/0)throw new NLe(lA);var c=r>t,h=!1,m;if(n===void 0)m=void 0;else if(Ser(n))m=n.step,h=!!n.inclusive;else if(typeof n==o)m=n;else throw new sQ(lA);if(Eer(m)&&(m=c?a:-a),typeof m!=o)throw new sQ(lA);if(m===1/0||m===-1/0||m===i&&t!==r)throw new NLe(lA);var y=t!==t||r!==r||m!==m||r>t!=m>i;Ier(this,{type:lQ,start:t,end:r,step:m,inclusive:h,hitsEnd:y,currentCount:i,zero:i}),kLe||(this.start=t,this.end=r,this.step=m,this.inclusive=h)},lQ,function(){var t=RLe(this);if(t.hitsEnd)return aQ(void 0,!0);var r=t.start,n=t.end,o=t.step,i=r+o*t.currentCount++;i===n&&(t.hitsEnd=!0);var a=t.inclusive,c;return n>r?c=a?i>n:i>=n:c=a?n>i:n>=i,c?(t.hitsEnd=!0,aQ(void 0,!0)):aQ(i,!1)}),Dk=function(e){Ter(jLe.prototype,e,{get:function(){return RLe(this)[e]},set:function(){},configurable:!0,enumerable:!1})};kLe&&(Dk("start"),Dk("end"),Dk("inclusive"),Dk("step"));qLe.exports=jLe});var zLe=N(()=>{"use strict";u();var Mer=ce(),Cer=Nk();typeof BigInt=="function"&&Mer({target:"BigInt",stat:!0,forced:!0},{range:function(t,r,n){return new Cer(t,r,n,"bigint",BigInt(0),BigInt(1))}})});var uQ=N((adn,VLe)=>{"use strict";u();_3();yk();var BLe=cn(),Aer=Na(),FLe=Qr(),Oer=Object,Per=TypeError,Der=BLe("Map"),Ner=BLe("WeakMap"),Lk=function(){this.object=null,this.symbol=null,this.primitives=null,this.objectsByIndex=Aer(null)};Lk.prototype.get=function(e,t){return this[e]||(this[e]=t())};Lk.prototype.next=function(e,t,r){var n=r?this.objectsByIndex[e]||(this.objectsByIndex[e]=new Ner):this.primitives||(this.primitives=new Der),o=n.get(t);return o||n.set(t,o=new Lk),o};var ULe=new Lk;VLe.exports=function(){var e=ULe,t=arguments.length,r,n;for(r=0;r<t;r++)FLe(n=arguments[r])&&(e=e.next(r,n,!0));if(this===Oer&&e===ULe)throw new Per("Composite keys must contain a non-primitive component");for(r=0;r<t;r++)FLe(n=arguments[r])||(e=e.next(r,n,!1));return e}});var HLe=N(()=>{"use strict";u();var Ler=ce(),ker=Sl(),Rer=uQ(),jer=cn(),GLe=Na(),qer=Object,zer=function(){var e=jer("Object","freeze");return e?e(GLe(null)):GLe(null)};Ler({global:!0,forced:!0},{compositeKey:function(){return ker(Rer,qer,arguments).get("object",zer)}})});var $Le=N(()=>{"use strict";u();var Fer=ce(),Uer=uQ(),WLe=cn(),Ber=Sl();Fer({global:!0,forced:!0},{compositeSymbol:function(){return arguments.length===1&&typeof arguments[0]=="string"?WLe("Symbol").for(arguments[0]):Ber(Uer,null,arguments).get("symbol",WLe("Symbol"))}})});var YLe=N(()=>{"use strict";u();aY()});var ZLe=N(()=>{"use strict";u();var Ver=ce(),Ger=Lt(),Her=Ger(DataView.prototype.getUint8);Ver({target:"DataView",proto:!0,forced:!0},{getUint8Clamped:function(t){return Her(this,t)}})});var KLe=N(()=>{"use strict";u();cY()});var XLe=N(()=>{"use strict";u();var Wer=ce(),$er=Lt(),Yer=sY(),Zer=eE(),Ker=QX(),Xer=$er(DataView.prototype.setUint8);Wer({target:"DataView",proto:!0,forced:!0},{setUint8Clamped:function(t,r){Yer(this);var n=Zer(t);return Xer(this,n,Ker(r))}})});var r3e=N(()=>{"use strict";u();var Jer=ce(),Rk=$r(),Qer=cn(),JLe=pn(),etr=au(),QLe=ei(),ttr=Qp(),rtr=Bi(),e3e=an(),t3e=Ho(),cQ=GJ(),ntr=Qer("SuppressedError"),otr=ReferenceError,itr=e3e("dispose"),atr=e3e("toStringTag"),qk="DisposableStack",str=t3e.set,jk=t3e.getterFor(qk),pQ="sync-dispose",uA="disposed",ltr="pending",kk=function(e){var t=jk(e);if(t.state===uA)throw new otr(qk+" already disposed");return t},fQ=function(){str(etr(this,kE),{type:qk,state:ltr,stack:[]}),Rk||(this.disposed=!1)},kE=fQ.prototype;ttr(kE,{dispose:function(){var t=jk(this);if(t.state!==uA){t.state=uA,Rk||(this.disposed=!0);for(var r=t.stack,n=r.length,o=!1,i;n;){var a=r[--n];r[n]=null;try{a()}catch(c){o?i=new ntr(c,i):(o=!0,i=c)}}if(t.stack=null,o)throw i}},use:function(t){return cQ(kk(this),t,pQ),t},adopt:function(t,r){var n=kk(this);return JLe(r),cQ(n,void 0,pQ,function(){r(t)}),t},defer:function(t){var r=kk(this);JLe(t),cQ(r,void 0,pQ,t)},move:function(){var t=kk(this),r=new fQ;return jk(r).stack=t.stack,t.stack=[],t.state=uA,Rk||(this.disposed=!0),r}});Rk&&rtr(kE,"disposed",{configurable:!0,get:function(){return jk(this).state===uA}});QLe(kE,itr,kE.dispose,{name:"dispose"});QLe(kE,atr,qk,{nonWritable:!0});Jer({global:!0,constructor:!0},{DisposableStack:fQ})});var a3e=N(()=>{"use strict";u();var utr=ce(),o3e=cn(),ctr=Qr(),ptr=Lu(),ftr=Gt(),i3e="Error",hQ="DOMException",dtr=Object.setPrototypeOf||{}.__proto__,n3e=o3e(hQ),dQ=Error,zk=dQ.isError,htr=!zk||!dtr||ftr(function(){return n3e&&!zk(new n3e(hQ))||!zk(new dQ(i3e,{cause:function(){}}))||zk(o3e("Object","create")(dQ.prototype))});utr({target:"Error",stat:!0,sham:!0,forced:htr},{isError:function(t){if(!ctr(t))return!1;var r=ptr(t);return r===i3e||r===hQ}})});var mQ=N((Ddn,s3e)=>{"use strict";u();var mtr=Lt(),gtr=pn();s3e.exports=function(){return mtr(gtr(this))}});var l3e=N(()=>{"use strict";u();var vtr=ce(),ytr=mQ();vtr({target:"Function",proto:!0,forced:!0},{demethodize:ytr})});var c3e=N(()=>{"use strict";u();var _tr=ce(),btr=Lt(),xtr=Rn(),wtr=HM(),Etr=$n(),Str=$r(),Ttr=Object.getOwnPropertyDescriptor,u3e=/^\s*class\b/,Itr=btr(u3e.exec),Mtr=function(e){try{if(!Str||!Itr(u3e,wtr(e)))return!1}catch(r){}var t=Ttr(e,"prototype");return!!t&&Etr(t,"writable")&&!t.writable};_tr({target:"Function",stat:!0,sham:!0,forced:!0},{isCallable:function(t){return xtr(t)&&!Mtr(t)}})});var p3e=N(()=>{"use strict";u();var Ctr=ce(),Atr=yd();Ctr({target:"Function",stat:!0,forced:!0},{isConstructor:Atr})});var h3e=N(()=>{"use strict";u();var Otr=an(),Ptr=wi().f,f3e=Otr("metadata"),d3e=Function.prototype;d3e[f3e]===void 0&&Ptr(d3e,f3e,{value:null})});var m3e=N(()=>{"use strict";u();var Dtr=ce(),Ntr=mQ();Dtr({target:"Function",proto:!0,forced:!0,name:"demethodize"},{unThis:Ntr})});var g3e=N(()=>{"use strict";u();RY()});var v3e=N(()=>{"use strict";u();UY()});var gQ=N((thn,y3e)=>{"use strict";u();h3();var Ltr=pr(),ktr=Ey().IteratorPrototype.map,Rtr=function(e,t){return[t,e]};y3e.exports=function(){return Ltr(ktr,this,Rtr)}});var _3e=N(()=>{"use strict";u();var jtr=ce(),qtr=gQ();jtr({target:"Iterator",name:"indexed",proto:!0,real:!0,forced:!0},{asIndexedPairs:qtr})});var w3e=N(()=>{"use strict";u();var ztr=ce(),b3e=pr(),Ftr=pn(),x3e=dr(),Utr=Dh(),Btr=Dy(),Vtr=Ls(),Gtr=Array,Htr=Btr(function(){for(;;){var e=this.iterator;if(!e){var t=this.nextIterableIndex++,r=this.iterables;if(t>=r.length)return this.done=!0,Vtr(void 0,!0);var n=r[t];this.iterables[t]=null,e=this.iterator=b3e(n.method,n.iterable),this.next=e.next}var o=x3e(b3e(this.next,e));if(o.done){this.iterator=null,this.next=null;continue}return o}},!1,!0);ztr({target:"Iterator",stat:!0,forced:!0},{concat:function(){for(var t=arguments.length,r=Gtr(t),n=0;n<t;n++){var o=x3e(arguments[n]);r[n]={iterable:o,method:Ftr(Utr(o))}}return new Htr({iterables:r,nextIterableIndex:0,iterator:null,next:null})}})});var T3e=N(()=>{"use strict";u();var Wtr=pr(),$tr=ei(),Ytr=Da(),Ztr=$n(),Ktr=an(),E3e=Ey().IteratorPrototype,S3e=Ktr("dispose");Ztr(E3e,S3e)||$tr(E3e,S3e,function(){var e=Ytr(this,"return");e&&Wtr(e,this)})});var I3e=N(()=>{"use strict";u();WY()});var M3e=N(()=>{"use strict";u();YY()});var C3e=N(()=>{"use strict";u();KY()});var A3e=N(()=>{"use strict";u();JY()});var O3e=N(()=>{"use strict";u();oZ()});var P3e=N(()=>{"use strict";u();aZ()});var D3e=N(()=>{"use strict";u();sZ()});var N3e=N(()=>{"use strict";u();var Xtr=ce(),Jtr=gQ();Xtr({target:"Iterator",proto:!0,real:!0,forced:!0},{indexed:Jtr})});var L3e=N(()=>{"use strict";u();h3()});var R3e=N(()=>{"use strict";u();var Qtr=ce(),k3e=Nk(),err=TypeError;Qtr({target:"Iterator",stat:!0,forced:!0},{range:function(t,r,n){if(typeof t=="number")return new k3e(t,r,n,"number",0,1);if(typeof t=="bigint")return new k3e(t,r,n,"bigint",BigInt(0),BigInt(1));throw new err("Incorrect Iterator.range arguments")}})});var j3e=N(()=>{"use strict";u();cZ()});var q3e=N(()=>{"use strict";u();fZ()});var z3e=N(()=>{"use strict";u();hZ()});var F3e=N(()=>{"use strict";u();mZ()});var B3e=N(()=>{"use strict";u();var trr=ce(),rrr=dr(),nrr=oA(),orr=rQ(),U3e=ta();trr({target:"Iterator",proto:!0,real:!0,forced:!0},{toAsync:function(){return new orr(U3e(new nrr(U3e(rrr(this)))))}})});var vQ=N((nmn,V3e)=>{"use strict";u();var irr=Gt();V3e.exports=!irr(function(){var e="9007199254740993",t=JSON.rawJSON(e);return!JSON.isRawJSON(t)||JSON.stringify(t)!==e})});var yQ=N((imn,G3e)=>{"use strict";u();var arr=Qr(),srr=Ho().get;G3e.exports=function(t){if(!arr(t))return!1;var r=srr(t);return!!r&&r.type==="RawJSON"}});var H3e=N(()=>{"use strict";u();var lrr=ce(),urr=vQ(),crr=yQ();lrr({target:"JSON",stat:!0,forced:!urr},{isRawJSON:crr})});var bQ=N((cmn,Z3e)=>{"use strict";u();var _Q=Lt(),prr=$n(),Fk=SyntaxError,frr=parseInt,drr=String.fromCharCode,hrr=_Q("".charAt),W3e=_Q("".slice),$3e=_Q(/./.exec),Y3e={"\\\"":"\"","\\\\":"\\","\\/":"/","\\b":"\b","\\f":"\f","\\n":`
`,"\\r":"\r","\\t":"\t"},mrr=/^[\da-f]{4}$/i,grr=/^[\u0000-\u001F]$/;Z3e.exports=function(e,t){for(var r=!0,n="";t<e.length;){var o=hrr(e,t);if(o==="\\"){var i=W3e(e,t,t+2);if(prr(Y3e,i))n+=Y3e[i],t+=2;else if(i==="\\u"){t+=2;var a=W3e(e,t,t+4);if(!$3e(mrr,a))throw new Fk("Bad Unicode escape at: "+t);n+=drr(frr(a,16)),t+=4}else throw new Fk("Unknown escape sequence: \""+i+"\"")}else if(o==="\""){r=!1,t++;break}else{if($3e(grr,o))throw new Fk("Bad control character in string literal at: "+t);n+=o,t++}}if(r)throw new Fk("Unterminated string at: "+t);return{value:n,end:t}}});var nke=N(()=>{"use strict";u();var vrr=ce(),yrr=$r(),CQ=cr(),_rr=cn(),Uk=Lt(),brr=pr(),tke=Rn(),xrr=Qr(),wrr=vd(),Err=$n(),Srr=Sn(),K3e=ho(),TQ=Xp(),rke=Gt(),Trr=bQ(),Irr=dy(),X3e=CQ.JSON,Mrr=CQ.Number,RE=CQ.SyntaxError,AQ=X3e&&X3e.parse,Crr=_rr("Object","keys"),Arr=Object.getOwnPropertyDescriptor,Il=Uk("".charAt),xQ=Uk("".slice),wQ=Uk(/./.exec),J3e=Uk([].push),EQ=/^\d$/,Orr=/^[1-9]$/,Prr=/^[\d-]$/,cA=/^[\t\n\r ]$/,SQ=0,Q3e=1,Drr=function(e,t){e=Srr(e);var r=new MQ(e,0,""),n=r.parse(),o=n.value,i=r.skip(cA,n.end);if(i<e.length)throw new RE("Unexpected extra character: \""+Il(e,i)+"\" after the parsed data at: "+i);return tke(t)?IQ({"":o},"",t,n):o},IQ=function(e,t,r,n){var o=e[t],i=n&&o===n.value,a=i&&typeof n.source=="string"?{source:n.source}:{},c,h,m,y,w;if(xrr(o)){var E=wrr(o),A=i?n.nodes:E?[]:{};if(E)for(c=A.length,m=K3e(o),y=0;y<m;y++)eke(o,y,IQ(o,""+y,r,y<c?A[y]:void 0));else for(h=Crr(o),m=K3e(h),y=0;y<m;y++)w=h[y],eke(o,w,IQ(o,w,r,Err(A,w)?A[w]:void 0))}return brr(r,e,t,o,a)},eke=function(e,t,r){if(yrr){var n=Arr(e,t);if(n&&!n.configurable)return}r===void 0?delete e[t]:TQ(e,t,r)},Nrr=function(e,t,r,n){this.value=e,this.end=t,this.source=r,this.nodes=n},MQ=function(e,t){this.source=e,this.index=t};MQ.prototype={fork:function(e){return new MQ(this.source,e)},parse:function(){var e=this.source,t=this.skip(cA,this.index),r=this.fork(t),n=Il(e,t);if(wQ(Prr,n))return r.number();switch(n){case"{":return r.object();case"[":return r.array();case"\"":return r.string();case"t":return r.keyword(!0);case"f":return r.keyword(!1);case"n":return r.keyword(null)}throw new RE("Unexpected character: \""+n+"\" at: "+t)},node:function(e,t,r,n,o){return new Nrr(t,n,e?null:xQ(this.source,r,n),o)},object:function(){for(var e=this.source,t=this.index+1,r=!1,n={},o={};t<e.length;){if(t=this.until(["\"","}"],t),Il(e,t)==="}"&&!r){t++;break}var i=this.fork(t).string(),a=i.value;t=i.end,t=this.until([":"],t)+1,t=this.skip(cA,t),i=this.fork(t).parse(),TQ(o,a,i),TQ(n,a,i.value),t=this.until([",","}"],i.end);var c=Il(e,t);if(c===",")r=!0,t++;else if(c==="}"){t++;break}}return this.node(Q3e,n,this.index,t,o)},array:function(){for(var e=this.source,t=this.index+1,r=!1,n=[],o=[];t<e.length;){if(t=this.skip(cA,t),Il(e,t)==="]"&&!r){t++;break}var i=this.fork(t).parse();if(J3e(o,i),J3e(n,i.value),t=this.until([",","]"],i.end),Il(e,t)===",")r=!0,t++;else if(Il(e,t)==="]"){t++;break}}return this.node(Q3e,n,this.index,t,o)},string:function(){var e=this.index,t=Trr(this.source,this.index+1);return this.node(SQ,t.value,e,t.end)},number:function(){var e=this.source,t=this.index,r=t;if(Il(e,r)==="-"&&r++,Il(e,r)==="0")r++;else if(wQ(Orr,Il(e,r)))r=this.skip(EQ,r+1);else throw new RE("Failed to parse number at: "+r);if(Il(e,r)==="."&&(r=this.skip(EQ,r+1)),Il(e,r)==="e"||Il(e,r)==="E"){r++,(Il(e,r)==="+"||Il(e,r)==="-")&&r++;var n=r;if(r=this.skip(EQ,r),n===r)throw new RE("Failed to parse number's exponent value at: "+r)}return this.node(SQ,Mrr(xQ(e,t,r)),t,r)},keyword:function(e){var t=""+e,r=this.index,n=r+t.length;if(xQ(this.source,r,n)!==t)throw new RE("Failed to parse value at: "+r);return this.node(SQ,e,r,n)},skip:function(e,t){for(var r=this.source;t<r.length&&wQ(e,Il(r,t));t++);return t},until:function(e,t){t=this.skip(cA,t);for(var r=Il(this.source,t),n=0;n<e.length;n++)if(e[n]===r)return t;throw new RE("Unexpected character: \""+r+"\" at: "+t)}};var Lrr=rke(function(){var e="9007199254740993",t;return AQ(e,function(r,n,o){t=o.source}),t!==e}),krr=Irr&&!rke(function(){return 1/AQ("-0 \t")!==-1/0});vrr({target:"JSON",stat:!0,forced:Lrr},{parse:function(t,r){return krr&&!tke(r)?AQ(t):Drr(t,r)}})});var pke=N(()=>{"use strict";u();var uke=ce(),Rrr=Tg(),cke=vQ(),Bk=cn(),jrr=pr(),NQ=Lt(),qrr=Rn(),zrr=yQ(),Frr=Sn(),Urr=Xp(),Brr=bQ(),Vrr=VW(),Grr=my(),Hrr=Ho().set,Wrr=String,oke=SyntaxError,$rr=Bk("JSON","parse"),ike=Bk("JSON","stringify"),Yrr=Bk("Object","create"),Zrr=Bk("Object","freeze"),PQ=NQ("".charAt),OQ=NQ("".slice),Krr=NQ([].push),DQ=Grr(),ake=DQ.length,ske="Unacceptable as raw JSON",lke=function(e){return e===" "||e==="\t"||e===`
`||e==="\r"};uke({target:"JSON",stat:!0,forced:!cke},{rawJSON:function(t){var r=Frr(t);if(r===""||lke(PQ(r,0))||lke(PQ(r,r.length-1)))throw new oke(ske);var n=$rr(r);if(typeof n=="object"&&n!==null)throw new oke(ske);var o=Yrr(null);return Hrr(o,{type:"RawJSON"}),Urr(o,"rawJSON",r),Rrr?Zrr(o):o}});ike&&uke({target:"JSON",stat:!0,arity:3,forced:!cke},{stringify:function(t,r,n){var o=Vrr(r),i=[],a=ike(t,function(A,P){var j=qrr(o)?jrr(o,this,Wrr(A),P):P;return zrr(j)?DQ+(Krr(i,j.rawJSON)-1):j},n);if(typeof a!="string")return a;for(var c="",h=a.length,m=0;m<h;m++){var y=PQ(a,m);if(y==="\""){var w=Brr(a,++m).end-1,E=OQ(a,m,w);c+=OQ(E,0,ake)===DQ?i[OQ(E,ake)]:"\""+E+"\"",m=w}else c+=y}return c}})});var Ml=N((ymn,fke)=>{"use strict";u();var Xrr=ks().has;fke.exports=function(e){return Xrr(e),e}});var dke=N(()=>{"use strict";u();var Jrr=ce(),Qrr=Ml(),enr=ks().remove;Jrr({target:"Map",proto:!0,real:!0,forced:!0},{deleteAll:function(){for(var t=Qrr(this),r=!0,n,o=0,i=arguments.length;o<i;o++)n=enr(t,arguments[o]),r=r&&n;return!!r}})});var mke=N(()=>{"use strict";u();var tnr=ce(),rnr=Ml(),LQ=ks(),nnr=LQ.get,onr=LQ.has,hke=LQ.set;tnr({target:"Map",proto:!0,real:!0,forced:!0},{emplace:function(t,r){var n=rnr(this),o,i;return onr(n,t)?(o=nnr(n,t),"update"in r&&(o=r.update(o,t,n),hke(n,t,o)),o):(i=r.insert(t,n),hke(n,t,i),i)}})});var gke=N(()=>{"use strict";u();var inr=ce(),anr=ui(),snr=Ml(),lnr=ef();inr({target:"Map",proto:!0,real:!0,forced:!0},{every:function(t){var r=snr(this),n=anr(t,arguments.length>1?arguments[1]:void 0);return lnr(r,function(o,i){if(!n(o,i,r))return!1},!0)!==!1}})});var yke=N(()=>{"use strict";u();var unr=ce(),cnr=ui(),pnr=Ml(),vke=ks(),fnr=ef(),dnr=vke.Map,hnr=vke.set;unr({target:"Map",proto:!0,real:!0,forced:!0},{filter:function(t){var r=pnr(this),n=cnr(t,arguments.length>1?arguments[1]:void 0),o=new dnr;return fnr(r,function(i,a){n(i,a,r)&&hnr(o,a,i)}),o}})});var _ke=N(()=>{"use strict";u();var mnr=ce(),gnr=ui(),vnr=Ml(),ynr=ef();mnr({target:"Map",proto:!0,real:!0,forced:!0},{find:function(t){var r=vnr(this),n=gnr(t,arguments.length>1?arguments[1]:void 0),o=ynr(r,function(i,a){if(n(i,a,r))return{value:i}},!0);return o&&o.value}})});var bke=N(()=>{"use strict";u();var _nr=ce(),bnr=ui(),xnr=Ml(),wnr=ef();_nr({target:"Map",proto:!0,real:!0,forced:!0},{findKey:function(t){var r=xnr(this),n=bnr(t,arguments.length>1?arguments[1]:void 0),o=wnr(r,function(i,a){if(n(i,a,r))return{key:a}},!0);return o&&o.key}})});var pA=N((qmn,xke)=>{"use strict";u();var Enr=ui(),Snr=dr(),Tnr=Jn(),Inr=ha();xke.exports=function(e,t,r){return function(o){var i=Tnr(o),a=arguments.length,c=a>1?arguments[1]:void 0,h=c!==void 0,m=h?Enr(c,a>2?arguments[2]:void 0):void 0,y=new e,w=0;return Inr(i,function(E){var A=h?m(E,w++):E;r?t(y,Snr(A)[0],A[1]):t(y,A)}),y}}});var Eke=N(()=>{"use strict";u();var Mnr=ce(),wke=ks(),Cnr=pA();Mnr({target:"Map",stat:!0,forced:!0},{from:Cnr(wke.Map,wke.set,!0)})});var Ske=N(()=>{"use strict";u();var Anr=ce(),Onr=Ml(),kQ=ks(),Pnr=kQ.get,Dnr=kQ.has,Nnr=kQ.set;Anr({target:"Map",proto:!0,real:!0,forced:!0},{getOrInsert:function(t,r){return Dnr(Onr(this),t)?Pnr(this,t):(Nnr(this,t,r),r)}})});var Tke=N(()=>{"use strict";u();var Lnr=ce(),knr=pn(),Rnr=Ml(),RQ=ks(),jnr=RQ.get,qnr=RQ.has,znr=RQ.set;Lnr({target:"Map",proto:!0,real:!0,forced:!0},{getOrInsertComputed:function(t,r){if(Rnr(this),knr(r),qnr(this,t))return jnr(this,t);t===0&&1/t===-1/0&&(t=0);var n=r(t);return znr(this,t,n),n}})});var Ike=N(()=>{"use strict";u();EZ()});var Cke=N((Jmn,Mke)=>{"use strict";u();Mke.exports=function(e,t){return e===t||e!==e&&t!==t}});var Ake=N(()=>{"use strict";u();var Fnr=ce(),Unr=Cke(),Bnr=Ml(),Vnr=ef();Fnr({target:"Map",proto:!0,real:!0,forced:!0},{includes:function(t){return Vnr(Bnr(this),function(r){if(Unr(r,t))return!0},!0)===!0}})});var Pke=N(()=>{"use strict";u();var Gnr=ce(),Hnr=pr(),Wnr=ha(),$nr=Rn(),Oke=pn(),Ynr=ks().Map;Gnr({target:"Map",stat:!0,forced:!0},{keyBy:function(t,r){var n=$nr(this)?this:Ynr,o=new n;Oke(r);var i=Oke(o.set);return Wnr(t,function(a){Hnr(i,o,r(a),a)}),o}})});var Dke=N(()=>{"use strict";u();var Znr=ce(),Knr=Ml(),Xnr=ef();Znr({target:"Map",proto:!0,real:!0,forced:!0},{keyOf:function(t){var r=Xnr(Knr(this),function(n,o){if(n===t)return{key:o}},!0);return r&&r.key}})});var Lke=N(()=>{"use strict";u();var Jnr=ce(),Qnr=ui(),eor=Ml(),Nke=ks(),tor=ef(),ror=Nke.Map,nor=Nke.set;Jnr({target:"Map",proto:!0,real:!0,forced:!0},{mapKeys:function(t){var r=eor(this),n=Qnr(t,arguments.length>1?arguments[1]:void 0),o=new ror;return tor(r,function(i,a){nor(o,n(i,a,r),i)}),o}})});var Rke=N(()=>{"use strict";u();var oor=ce(),ior=ui(),aor=Ml(),kke=ks(),sor=ef(),lor=kke.Map,uor=kke.set;oor({target:"Map",proto:!0,real:!0,forced:!0},{mapValues:function(t){var r=aor(this),n=ior(t,arguments.length>1?arguments[1]:void 0),o=new lor;return sor(r,function(i,a){uor(o,a,n(i,a,r))}),o}})});var jke=N(()=>{"use strict";u();var cor=ce(),por=Ml(),dor=ha(),hor=ks().set;cor({target:"Map",proto:!0,real:!0,arity:1,forced:!0},{merge:function(t){for(var r=por(this),n=arguments.length,o=0;o<n;)dor(arguments[o++],function(i,a){hor(r,i,a)},{AS_ENTRIES:!0});return r}})});var fA=N((ygn,qke)=>{"use strict";u();var mor=dr();qke.exports=function(e,t,r){return function(){for(var o=new e,i=arguments.length,a=0;a<i;a++){var c=arguments[a];r?t(o,mor(c)[0],c[1]):t(o,c)}return o}}});var Fke=N(()=>{"use strict";u();var gor=ce(),zke=ks(),vor=fA();gor({target:"Map",stat:!0,forced:!0},{of:vor(zke.Map,zke.set,!0)})});var Uke=N(()=>{"use strict";u();var yor=ce(),_or=pn(),bor=Ml(),xor=ef(),wor=TypeError;yor({target:"Map",proto:!0,real:!0,forced:!0},{reduce:function(t){var r=bor(this),n=arguments.length<2,o=n?void 0:arguments[1];if(_or(t),xor(r,function(i,a){n?(n=!1,o=i):o=t(o,i,a,r)}),n)throw new wor("Reduce of empty map with no initial value");return o}})});var Bke=N(()=>{"use strict";u();var Eor=ce(),Sor=ui(),Tor=Ml(),Ior=ef();Eor({target:"Map",proto:!0,real:!0,forced:!0},{some:function(t){var r=Tor(this),n=Sor(t,arguments.length>1?arguments[1]:void 0);return Ior(r,function(o,i){if(n(o,i,r))return!0},!0)===!0}})});var Gke=N(()=>{"use strict";u();var Mor=ce(),Vke=pn(),Cor=Ml(),jQ=ks(),Aor=TypeError,Oor=jQ.get,Por=jQ.has,Dor=jQ.set;Mor({target:"Map",proto:!0,real:!0,forced:!0},{update:function(t,r){var n=Cor(this),o=arguments.length;Vke(r);var i=Por(n,t);if(!i&&o<3)throw new Aor("Updating absent value");var a=i?Oor(n,t):Vke(o>2?arguments[2]:void 0)(t,n);return Dor(n,t,r(a,t,n)),n}})});var Hk=N((Dgn,Hke)=>{"use strict";u();var Vk=pr(),qQ=pn(),Gk=Rn(),Nor=dr(),Lor=TypeError;Hke.exports=function(t,r){var n=Nor(this),o=qQ(n.get),i=qQ(n.has),a=qQ(n.set),c=arguments.length>2?arguments[2]:void 0,h;if(!Gk(r)&&!Gk(c))throw new Lor("At least one callback required");return Vk(i,n,t)?(h=Vk(o,n,t),Gk(r)&&(h=r(h),Vk(a,n,t,h))):Gk(c)&&(h=c(),Vk(a,n,t,h)),h}});var Wke=N(()=>{"use strict";u();var kor=ce(),Ror=Hk();kor({target:"Map",proto:!0,real:!0,name:"upsert",forced:!0},{updateOrInsert:Ror})});var $ke=N(()=>{"use strict";u();var jor=ce(),qor=Hk();jor({target:"Map",proto:!0,real:!0,forced:!0},{upsert:qor})});var Zke=N((Fgn,Yke)=>{"use strict";u();var zor=TypeError;Yke.exports=function(e){if(typeof e=="number")return e;throw new zor("Argument is not a number")}});var Jke=N(()=>{"use strict";u();var For=ce(),zQ=Zke(),Kke=sE(),Xke=M3(),Uor=RangeError,Bor=Math.min,Vor=Math.max;For({target:"Math",stat:!0,forced:!0},{clamp:function(t,r,n){if(zQ(t),Kke(zQ(r)),Kke(zQ(n)),Xke(r,0)&&Xke(n,-0)||r>n)throw new Uor("`min` should be smaller than `max`");return Bor(n,Vor(r,t))}})});var Qke=N(()=>{"use strict";u();var Gor=ce();Gor({target:"Math",stat:!0,nonConfigurable:!0,nonWritable:!0},{DEG_PER_RAD:Math.PI/180})});var eRe=N(()=>{"use strict";u();var Hor=ce(),Wor=180/Math.PI;Hor({target:"Math",stat:!0,forced:!0},{degrees:function(t){return t*Wor}})});var FQ=N((Xgn,tRe)=>{"use strict";u();tRe.exports=function(t,r,n,o,i){var a=+t,c=+r,h=+n,m=+o,y=+i;return a!==a||c!==c||h!==h||m!==m||y!==y?NaN:a===1/0||a===-1/0?a:(a-c)*(y-m)/(h-c)+m}});var rRe=N(()=>{"use strict";u();var $or=ce(),Yor=FQ(),Zor=QL();$or({target:"Math",stat:!0,forced:!0},{fscale:function(t,r,n,o,i){return Zor(Yor(t,r,n,o,i))}})});var nRe=N(()=>{"use strict";u();MZ()});var oRe=N(()=>{"use strict";u();var Kor=ce();Kor({target:"Math",stat:!0,forced:!0},{iaddh:function(t,r,n,o){var i=t>>>0,a=r>>>0,c=n>>>0;return a+(o>>>0)+((i&c|(i|c)&~(i+c>>>0))>>>31)|0}})});var iRe=N(()=>{"use strict";u();var Xor=ce();Xor({target:"Math",stat:!0,forced:!0},{imulh:function(t,r){var n=65535,o=+t,i=+r,a=o&n,c=i&n,h=o>>16,m=i>>16,y=(h*c>>>0)+(a*c>>>16);return h*m+(y>>16)+((a*m>>>0)+(y&n)>>16)}})});var aRe=N(()=>{"use strict";u();var Jor=ce();Jor({target:"Math",stat:!0,forced:!0},{isubh:function(t,r,n,o){var i=t>>>0,a=r>>>0,c=n>>>0;return a-(o>>>0)-((~i&c|~(i^c)&i-c>>>0)>>>31)|0}})});var sRe=N(()=>{"use strict";u();var Qor=ce();Qor({target:"Math",stat:!0,nonConfigurable:!0,nonWritable:!0},{RAD_PER_DEG:180/Math.PI})});var lRe=N(()=>{"use strict";u();var eir=ce(),tir=Math.PI/180;eir({target:"Math",stat:!0,forced:!0},{radians:function(t){return t*tir}})});var uRe=N(()=>{"use strict";u();var rir=ce(),nir=FQ();rir({target:"Math",stat:!0,forced:!0},{scale:nir})});var dRe=N(()=>{"use strict";u();var oir=ce(),iir=dr(),air=kZ(),sir=Sy(),lir=Ls(),cRe=Ho(),pRe="Seeded Random",fRe=pRe+" Generator",uir="Math.seededPRNG() argument should have a \"seed\" field with a finite value.",cir=cRe.set,pir=cRe.getterFor(fRe),fir=TypeError,dir=sir(function(t){cir(this,{type:fRe,seed:t%2147483647})},pRe,function(){var t=pir(this),r=t.seed=(t.seed*1103515245+12345)%2147483647;return lir((r&1073741823)/1073741823,!1)});oir({target:"Math",stat:!0,forced:!0},{seededPRNG:function(t){var r=iir(t).seed;if(!air(r))throw new fir(uir);return new dir(r)}})});var hRe=N(()=>{"use strict";u();var hir=ce();hir({target:"Math",stat:!0,forced:!0},{signbit:function(t){var r=+t;return r===r&&r===0?1/r===-1/0:r<0}})});var _Re=N(()=>{"use strict";u();var mir=ce(),gir=Lt(),vir=ha(),yir=RangeError,_ir=TypeError,tf=1/0,bir=NaN,N_=Math.abs,GQ=Math.pow,mRe=gir([].push),dA=GQ(2,1023),xir=GQ(2,53)-1,gRe=Number.MAX_VALUE,vRe=GQ(2,971),hA={},UQ={},BQ={},VQ={},yRe={},Wk=function(e,t){var r=e+t,n=t-(r-e);return{hi:r,lo:n}};mir({target:"Math",stat:!0},{sumPrecise:function(t){var r=[],n=0,o=VQ;switch(vir(t,function(V){if(++n>=xir)throw new yir("Maximum allowed index exceeded");if(typeof V!="number")throw new _ir("Value is not a number");o!==hA&&(V!==V?o=hA:V===tf?o=o===UQ?hA:BQ:V===-tf?o=o===BQ?hA:UQ:(V!==0||1/V===tf)&&(o===VQ||o===yRe)&&(o=yRe,mRe(r,V)))}),o){case hA:return bir;case UQ:return-tf;case BQ:return tf;case VQ:return-0}for(var i=[],a=0,c,h,m,y,w,E,A=0;A<r.length;A++){c=r[A];for(var P=0,j=0;j<i.length;j++){if(h=i[j],N_(c)<N_(h)&&(E=c,c=h,h=E),m=Wk(c,h),y=m.hi,w=m.lo,N_(y)===tf){var D=y===tf?1:-1;a+=D,c=c-D*dA-D*dA,N_(c)<N_(h)&&(E=c,c=h,h=E),m=Wk(c,h),y=m.hi,w=m.lo}w!==0&&(i[P++]=w),c=y}i.length=P,c!==0&&mRe(i,c)}var k=i.length-1;if(y=0,w=0,a!==0){var z=k>=0?i[k]:0;if(k--,N_(a)>1||a>0&&z>0||a<0&&z<0)return a>0?tf:-tf;if(m=Wk(a*dA,z/2),y=m.hi,w=m.lo,w*=2,N_(2*y)===tf)return y>0?y===dA&&w===-(vRe/2)&&k>=0&&i[k]<0?gRe:tf:y===-dA&&w===vRe/2&&k>=0&&i[k]>0?-gRe:-tf;w!==0&&(i[++k]=w,w=0),y*=2}for(;k>=0&&(m=Wk(y,i[k--]),y=m.hi,w=m.lo,w===0););return k>=0&&(w<0&&i[k]<0||w>0&&i[k]>0)&&(h=w*2,c=y+h,h===c-y&&(y=c)),y}})});var bRe=N(()=>{"use strict";u();var wir=ce();wir({target:"Math",stat:!0,forced:!0},{umulh:function(t,r){var n=65535,o=+t,i=+r,a=o&n,c=i&n,h=o>>>16,m=i>>>16,y=(h*c>>>0)+(a*c>>>16);return h*m+(y>>>16)+((a*m>>>0)+(y&n)>>>16)}})});var ERe=N(()=>{"use strict";u();var Eir=ce(),gA=Lt(),Sir=Ui(),mA="Invalid number representation",Tir="Invalid radix",Iir=RangeError,$k=SyntaxError,Mir=TypeError,xRe=parseInt,Cir=Math.pow,wRe=/^[\d.a-z]+$/,Air=gA("".charAt),Oir=gA(wRe.exec),Pir=gA(1 .toString),Dir=gA("".slice),Nir=gA("".split);Eir({target:"Number",stat:!0,forced:!0},{fromString:function(t,r){var n=1;if(typeof t!="string")throw new Mir(mA);if(!t.length)throw new $k(mA);if(Air(t,0)==="-"&&(n=-1,t=Dir(t,1),!t.length))throw new $k(mA);var o=r===void 0?10:Sir(r);if(o<2||o>36)throw new Iir(Tir);if(!Oir(wRe,t))throw new $k(mA);var i=Nir(t,"."),a=xRe(i[0],o);if(i.length>1&&(a+=xRe(i[1],o)/Cir(o,i[1].length)),o===10&&Pir(a,o)!==t)throw new $k(mA);return n*a}})});var SRe=N(()=>{"use strict";u();var Lir=ce(),kir=Nk();Lir({target:"Number",stat:!0,forced:!0},{range:function(t,r,n){return new kir(t,r,n,"number",0,1)}})});var TRe=N(()=>{"use strict";u();YZ()});var Zk=N((Gvn,CRe)=>{"use strict";u();var IRe=Ho(),Rir=Sy(),Yk=Ls(),jir=$n(),qir=f_(),zir=Jn(),MRe="Object Iterator",Fir=IRe.set,Uir=IRe.getterFor(MRe);CRe.exports=Rir(function(t,r){var n=zir(t);Fir(this,{type:MRe,mode:r,object:n,keys:qir(n),index:0})},"Object",function(){for(var t=Uir(this),r=t.keys;;){if(r===null||t.index>=r.length)return t.object=t.keys=null,Yk(void 0,!0);var n=r[t.index++],o=t.object;if(jir(o,n)){switch(t.mode){case"keys":return Yk(n,!1);case"values":return Yk(o[n],!1)}return Yk([n,o[n]],!1)}}})});var ARe=N(()=>{"use strict";u();var Bir=ce(),Vir=Zk();Bir({target:"Object",stat:!0,forced:!0},{iterateEntries:function(t){return new Vir(t,"entries")}})});var ORe=N(()=>{"use strict";u();var Gir=ce(),Hir=Zk();Gir({target:"Object",stat:!0,forced:!0},{iterateKeys:function(t){return new Hir(t,"keys")}})});var PRe=N(()=>{"use strict";u();var Wir=ce(),$ir=Zk();Wir({target:"Object",stat:!0,forced:!0},{iterateValues:function(t){return new $ir(t,"values")}})});var DRe=N(()=>{"use strict";u();$Z()});var BRe=N(()=>{"use strict";u();var Yir=ce(),Kk=pr(),vA=$r(),Zir=Iy(),NRe=pn(),Kir=dr(),Xir=au(),LRe=Rn(),Jir=hc(),Qir=Qr(),Xk=Da(),ear=ei(),HQ=Qp(),kRe=Bi(),jE=gK(),tar=an(),RRe=Ho(),rar=tar("observable"),WQ="Observable",jRe="Subscription",qRe="SubscriptionObserver",$Q=RRe.getterFor,YQ=RRe.set,nar=$Q(WQ),zRe=$Q(jRe),Jk=$Q(qRe),FRe=function(e){this.observer=Kir(e),this.cleanup=null,this.subscriptionObserver=null};FRe.prototype={type:jRe,clean:function(){var e=this.cleanup;if(e){this.cleanup=null;try{e()}catch(t){jE(t)}}},close:function(){if(!vA){var e=this.facade,t=this.subscriptionObserver;e.closed=!0,t&&(t.closed=!0)}this.observer=null},isClosed:function(){return this.observer===null}};var ZQ=function(e,t){var r=YQ(this,new FRe(e)),n;vA||(this.closed=!1);try{(n=Xk(e,"start"))&&Kk(n,e,this)}catch(c){jE(c)}if(!r.isClosed()){var o=r.subscriptionObserver=new KQ(r);try{var i=t(o),a=i;Jir(i)||(r.cleanup=LRe(i.unsubscribe)?function(){a.unsubscribe()}:NRe(i))}catch(c){o.error(c);return}r.isClosed()&&r.clean()}};ZQ.prototype=HQ({},{unsubscribe:function(){var t=zRe(this);t.isClosed()||(t.close(),t.clean())}});vA&&kRe(ZQ.prototype,"closed",{configurable:!0,get:function(){return zRe(this).isClosed()}});var KQ=function(e){YQ(this,{type:qRe,subscriptionState:e}),vA||(this.closed=!1)};KQ.prototype=HQ({},{next:function(t){var r=Jk(this).subscriptionState;if(!r.isClosed()){var n=r.observer;try{var o=Xk(n,"next");o&&Kk(o,n,t)}catch(i){jE(i)}}},error:function(t){var r=Jk(this).subscriptionState;if(!r.isClosed()){var n=r.observer;r.close();try{var o=Xk(n,"error");o?Kk(o,n,t):jE(t)}catch(i){jE(i)}r.clean()}},complete:function(){var t=Jk(this).subscriptionState;if(!t.isClosed()){var r=t.observer;t.close();try{var n=Xk(r,"complete");n&&Kk(n,r)}catch(o){jE(o)}t.clean()}}});vA&&kRe(KQ.prototype,"closed",{configurable:!0,get:function(){return Jk(this).subscriptionState.isClosed()}});var URe=function(t){Xir(this,XQ),YQ(this,{type:WQ,subscriber:NRe(t)})},XQ=URe.prototype;HQ(XQ,{subscribe:function(t){var r=arguments.length;return new ZQ(LRe(t)?{next:t,error:r>1?arguments[1]:void 0,complete:r>2?arguments[2]:void 0}:Qir(t)?t:{},nar(this).subscriber)}});ear(XQ,rar,function(){return this});Yir({global:!0,constructor:!0,forced:!0},{Observable:URe});Zir(WQ)});var GRe=N(()=>{"use strict";u();var oar=ce(),iar=cn(),aar=pr(),VRe=dr(),sar=yd(),lar=xy(),uar=Da(),car=ha(),par=an(),far=par("observable");oar({target:"Observable",stat:!0,forced:!0},{from:function(t){var r=sar(this)?this:iar("Observable"),n=uar(VRe(t),far);if(n){var o=VRe(aar(n,t));return o.constructor===r?o:new r(function(a){return o.subscribe(a)})}var i=lar(t);return new r(function(a){car(i,function(c,h){if(a.next(c),a.closed)return h()},{IS_ITERATOR:!0,INTERRUPTED:!0}),a.complete()})}})});var WRe=N(()=>{"use strict";u();var dar=ce(),HRe=cn(),har=yd(),mar=HRe("Array");dar({target:"Observable",stat:!0,forced:!0},{of:function(){for(var t=har(this)?this:HRe("Observable"),r=arguments.length,n=mar(r),o=0;o<r;)n[o]=arguments[o++];return new t(function(i){for(var a=0;a<r;a++)if(i.next(n[a]),i.closed)return;i.complete()})}})});var $Re=N(()=>{"use strict";u();BRe();GRe();WRe()});var YRe=N(()=>{"use strict";u();OK()});var ZRe=N(()=>{"use strict";u();PK()});var KRe=N(()=>{"use strict";u();kK()});var XRe=N(()=>{"use strict";u();RK()});var Uh=N((Cyn,t6e)=>{"use strict";u();_3();yk();var e6e=cn(),gar=Lt(),yar=gg(),JRe=e6e("Map"),_ar=e6e("WeakMap"),bar=gar([].push),QRe=yar("metadata"),JQ=QRe.store||(QRe.store=new _ar),yA=function(e,t,r){var n=JQ.get(e);if(!n){if(!r)return;JQ.set(e,n=new JRe)}var o=n.get(t);if(!o){if(!r)return;n.set(t,o=new JRe)}return o},xar=function(e,t,r){var n=yA(t,r,!1);return n===void 0?!1:n.has(e)},war=function(e,t,r){var n=yA(t,r,!1);return n===void 0?void 0:n.get(e)},Ear=function(e,t,r,n){yA(r,n,!0).set(e,t)},Sar=function(e,t){var r=yA(e,t,!1),n=[];return r&&r.forEach(function(o,i){bar(n,i)}),n},Tar=function(e){return e===void 0||typeof e=="symbol"?e:String(e)};t6e.exports={store:JQ,getMap:yA,has:xar,get:war,set:Ear,keys:Sar,toKey:Tar}});var n6e=N(()=>{"use strict";u();var Iar=ce(),r6e=Uh(),Mar=dr(),Car=r6e.toKey,Aar=r6e.set;Iar({target:"Reflect",stat:!0},{defineMetadata:function(t,r,n){var o=arguments.length<4?void 0:Car(arguments[3]);Aar(t,r,Mar(n),o)}})});var i6e=N(()=>{"use strict";u();var Oar=ce(),QQ=Uh(),Par=dr(),Dar=QQ.toKey,Nar=QQ.getMap,o6e=QQ.store;Oar({target:"Reflect",stat:!0},{deleteMetadata:function(t,r){var n=arguments.length<3?void 0:Dar(arguments[2]),o=Nar(Par(r),n,!1);if(o===void 0||!o.delete(t))return!1;if(o.size)return!0;var i=o6e.get(r);return i.delete(n),!!i.size||o6e.delete(r)}})});var s6e=N(()=>{"use strict";u();var Lar=ce(),eee=Uh(),kar=dr(),Rar=gs(),jar=eee.has,qar=eee.get,zar=eee.toKey,a6e=function(e,t,r){var n=jar(e,t,r);if(n)return qar(e,t,r);var o=Rar(t);return o!==null?a6e(e,o,r):void 0};Lar({target:"Reflect",stat:!0},{getMetadata:function(t,r){var n=arguments.length<3?void 0:zar(arguments[2]);return a6e(t,kar(r),n)}})});var p6e=N(()=>{"use strict";u();var Far=ce(),l6e=Lt(),u6e=Uh(),Uar=dr(),Bar=gs(),Var=Ik(),Gar=l6e(Var),Har=l6e([].concat),War=u6e.keys,$ar=u6e.toKey,c6e=function(e,t){var r=War(e,t),n=Bar(e);if(n===null)return r;var o=c6e(n,t);return o.length?r.length?Gar(Har(r,o)):o:r};Far({target:"Reflect",stat:!0},{getMetadataKeys:function(t){var r=arguments.length<2?void 0:$ar(arguments[1]);return c6e(Uar(t),r)}})});var d6e=N(()=>{"use strict";u();var Yar=ce(),f6e=Uh(),Zar=dr(),Kar=f6e.get,Xar=f6e.toKey;Yar({target:"Reflect",stat:!0},{getOwnMetadata:function(t,r){var n=arguments.length<3?void 0:Xar(arguments[2]);return Kar(t,Zar(r),n)}})});var m6e=N(()=>{"use strict";u();var Jar=ce(),h6e=Uh(),Qar=dr(),esr=h6e.keys,tsr=h6e.toKey;Jar({target:"Reflect",stat:!0},{getOwnMetadataKeys:function(t){var r=arguments.length<2?void 0:tsr(arguments[1]);return esr(Qar(t),r)}})});var y6e=N(()=>{"use strict";u();var rsr=ce(),g6e=Uh(),nsr=dr(),osr=gs(),isr=g6e.has,asr=g6e.toKey,v6e=function(e,t,r){var n=isr(e,t,r);if(n)return!0;var o=osr(t);return o!==null?v6e(e,o,r):!1};rsr({target:"Reflect",stat:!0},{hasMetadata:function(t,r){var n=arguments.length<3?void 0:asr(arguments[2]);return v6e(t,nsr(r),n)}})});var b6e=N(()=>{"use strict";u();var ssr=ce(),_6e=Uh(),lsr=dr(),usr=_6e.has,csr=_6e.toKey;ssr({target:"Reflect",stat:!0},{hasOwnMetadata:function(t,r){var n=arguments.length<3?void 0:csr(arguments[2]);return usr(t,lsr(r),n)}})});var w6e=N(()=>{"use strict";u();var psr=ce(),x6e=Uh(),fsr=dr(),dsr=x6e.toKey,hsr=x6e.set;psr({target:"Reflect",stat:!0},{metadata:function(t,r){return function(o,i){hsr(t,r,fsr(o),dsr(i))}}})});var E6e=N(()=>{"use strict";u();JK()});var S6e=N(()=>{"use strict";u();var msr=ce(),gsr=Tl(),vsr=Js().add;msr({target:"Set",proto:!0,real:!0,forced:!0},{addAll:function(){for(var t=gsr(this),r=0,n=arguments.length;r<n;r++)vsr(t,arguments[r]);return t}})});var T6e=N(()=>{"use strict";u();var ysr=ce(),_sr=Tl(),bsr=Js().remove;ysr({target:"Set",proto:!0,real:!0,forced:!0},{deleteAll:function(){for(var t=_sr(this),r=!0,n,o=0,i=arguments.length;o<i;o++)n=bsr(t,arguments[o]),r=r&&n;return!!r}})});var I6e=N(()=>{"use strict";u();aX()});var C6e=N((m0n,M6e)=>{"use strict";u();var xsr=Lu(),wsr=$n(),Esr=hc(),Ssr=an(),Tsr=y_(),Isr=Ssr("iterator"),Msr=Object;M6e.exports=function(e){if(Esr(e))return!1;var t=Msr(e);return t[Isr]!==void 0||"@@iterator"in t||wsr(Tsr,xsr(t))}});var Uy=N((v0n,O6e)=>{"use strict";u();var Csr=cn(),A6e=Rn(),Asr=C6e(),Osr=Qr(),Psr=Csr("Set"),Dsr=function(e){return Osr(e)&&typeof e.size=="number"&&A6e(e.has)&&A6e(e.keys)};O6e.exports=function(e){return Dsr(e)?e:Asr(e)?new Psr(e):e}});var P6e=N(()=>{"use strict";u();var Nsr=ce(),Lsr=pr(),ksr=Uy(),Rsr=iX();Nsr({target:"Set",proto:!0,real:!0,forced:!0},{difference:function(t){return Lsr(Rsr,this,ksr(t))}})});var D6e=N(()=>{"use strict";u();var jsr=ce(),qsr=ui(),zsr=Tl(),Fsr=_c();jsr({target:"Set",proto:!0,real:!0,forced:!0},{every:function(t){var r=zsr(this),n=qsr(t,arguments.length>1?arguments[1]:void 0);return Fsr(r,function(o){if(!n(o,o,r))return!1},!0)!==!1}})});var L6e=N(()=>{"use strict";u();var Usr=ce(),Bsr=ui(),Vsr=Tl(),N6e=Js(),Gsr=_c(),Hsr=N6e.Set,Wsr=N6e.add;Usr({target:"Set",proto:!0,real:!0,forced:!0},{filter:function(t){var r=Vsr(this),n=Bsr(t,arguments.length>1?arguments[1]:void 0),o=new Hsr;return Gsr(r,function(i){n(i,i,r)&&Wsr(o,i)}),o}})});var k6e=N(()=>{"use strict";u();var $sr=ce(),Ysr=ui(),Zsr=Tl(),Ksr=_c();$sr({target:"Set",proto:!0,real:!0,forced:!0},{find:function(t){var r=Zsr(this),n=Ysr(t,arguments.length>1?arguments[1]:void 0),o=Ksr(r,function(i){if(n(i,i,r))return{value:i}},!0);return o&&o.value}})});var j6e=N(()=>{"use strict";u();var Xsr=ce(),R6e=Js(),Jsr=pA();Xsr({target:"Set",stat:!0,forced:!0},{from:Jsr(R6e.Set,R6e.add,!1)})});var q6e=N(()=>{"use strict";u();uX()});var z6e=N(()=>{"use strict";u();var Qsr=ce(),elr=pr(),tlr=Uy(),rlr=lX();Qsr({target:"Set",proto:!0,real:!0,forced:!0},{intersection:function(t){return elr(rlr,this,tlr(t))}})});var F6e=N(()=>{"use strict";u();pX()});var U6e=N(()=>{"use strict";u();var nlr=ce(),olr=pr(),ilr=Uy(),alr=cX();nlr({target:"Set",proto:!0,real:!0,forced:!0},{isDisjointFrom:function(t){return olr(alr,this,ilr(t))}})});var B6e=N(()=>{"use strict";u();dX()});var V6e=N(()=>{"use strict";u();var slr=ce(),llr=pr(),ulr=Uy(),clr=fX();slr({target:"Set",proto:!0,real:!0,forced:!0},{isSubsetOf:function(t){return llr(clr,this,ulr(t))}})});var G6e=N(()=>{"use strict";u();mX()});var H6e=N(()=>{"use strict";u();var plr=ce(),flr=pr(),dlr=Uy(),hlr=hX();plr({target:"Set",proto:!0,real:!0,forced:!0},{isSupersetOf:function(t){return flr(hlr,this,dlr(t))}})});var $6e=N(()=>{"use strict";u();var mlr=ce(),W6e=Lt(),glr=Tl(),vlr=_c(),ylr=Sn(),_lr=W6e([].join),blr=W6e([].push);mlr({target:"Set",proto:!0,real:!0,forced:!0},{join:function(t){var r=glr(this),n=t===void 0?",":ylr(t),o=[];return vlr(r,function(i){blr(o,i)}),_lr(o,n)}})});var Z6e=N(()=>{"use strict";u();var xlr=ce(),wlr=ui(),Elr=Tl(),Y6e=Js(),Slr=_c(),Tlr=Y6e.Set,Ilr=Y6e.add;xlr({target:"Set",proto:!0,real:!0,forced:!0},{map:function(t){var r=Elr(this),n=wlr(t,arguments.length>1?arguments[1]:void 0),o=new Tlr;return Slr(r,function(i){Ilr(o,n(i,i,r))}),o}})});var X6e=N(()=>{"use strict";u();var Mlr=ce(),K6e=Js(),Clr=fA();Mlr({target:"Set",stat:!0,forced:!0},{of:Clr(K6e.Set,K6e.add,!1)})});var J6e=N(()=>{"use strict";u();var Alr=ce(),Olr=pn(),Plr=Tl(),Dlr=_c(),Nlr=TypeError;Alr({target:"Set",proto:!0,real:!0,forced:!0},{reduce:function(t){var r=Plr(this),n=arguments.length<2,o=n?void 0:arguments[1];if(Olr(t),Dlr(r,function(i){n?(n=!1,o=i):o=t(o,i,i,r)}),n)throw new Nlr("Reduce of empty set with no initial value");return o}})});var Q6e=N(()=>{"use strict";u();var Llr=ce(),klr=ui(),Rlr=Tl(),jlr=_c();Llr({target:"Set",proto:!0,real:!0,forced:!0},{some:function(t){var r=Rlr(this),n=klr(t,arguments.length>1?arguments[1]:void 0);return jlr(r,function(o){if(n(o,o,r))return!0},!0)===!0}})});var eje=N(()=>{"use strict";u();yX()});var tje=N(()=>{"use strict";u();var qlr=ce(),zlr=pr(),Flr=Uy(),Ulr=vX();qlr({target:"Set",proto:!0,real:!0,forced:!0},{symmetricDifference:function(t){return zlr(Ulr,this,Flr(t))}})});var rje=N(()=>{"use strict";u();bX()});var nje=N(()=>{"use strict";u();var Blr=ce(),Vlr=pr(),Glr=Uy(),Hlr=_X();Blr({target:"Set",proto:!0,real:!0,forced:!0},{union:function(t){return Vlr(Hlr,this,Glr(t))}})});var oje=N(()=>{"use strict";u();var Wlr=ce(),$lr=C_().charAt,Ylr=Pi(),Zlr=Ui(),Klr=Sn();Wlr({target:"String",proto:!0,forced:!0},{at:function(t){var r=Klr(Ylr(this)),n=r.length,o=Zlr(t),i=o>=0?o:n+o;return i<0||i>=n?void 0:$lr(r,i)}})});var tee=N((L1n,lje)=>{"use strict";u();var sje=Lt(),Xlr=hs(),ije=Sn(),Jlr=ho(),Qlr=TypeError,aje=sje([].push),eur=sje([].join);lje.exports=function(t){var r=Xlr(t),n=Jlr(r);if(!n)return"";for(var o=arguments.length,i=[],a=0;;){var c=r[a++];if(c===void 0)throw new Qlr("Incorrect template");if(aje(i,ije(c)),a===n)return eur(i,"");a<o&&aje(i,ije(arguments[a]))}}});var uje=N(()=>{"use strict";u();var tur=ce(),rur=tee();tur({target:"String",stat:!0,forced:!0},{cooked:rur})});var hje=N(()=>{"use strict";u();var nur=ce(),our=Sy(),cje=Ls(),iur=Pi(),aur=Sn(),pje=Ho(),fje=C_(),sur=fje.codeAt,lur=fje.charAt,dje="String Iterator",uur=pje.set,cur=pje.getterFor(dje),pur=our(function(t){uur(this,{type:dje,string:t,index:0})},"String",function(){var t=cur(this),r=t.string,n=t.index,o;return n>=r.length?cje(void 0,!0):(o=lur(r,n),t.index+=o.length,cje({codePoint:sur(o,0),position:n},!1))});nur({target:"String",proto:!0,forced:!0},{codePoints:function(){return new pur(aur(iur(this)))}})});var Bh=N((B1n,mje)=>{"use strict";u();var Qk=Lt(),eR=WeakMap.prototype;mje.exports={WeakMap,set:Qk(eR.set),get:Qk(eR.get),has:Qk(eR.has),remove:Qk(eR.delete)}});var Sje=N((G1n,Eje)=>{"use strict";u();var fur=cn(),tR=Lt(),dur=String.fromCharCode,hur=fur("String","fromCodePoint"),ree=tR("".charAt),xje=tR("".charCodeAt),gje=tR("".indexOf),vje=tR("".slice),oee=48,wje=57,yje=97,mur=102,_je=65,gur=70,bje=function(e,t){var r=xje(e,t);return r>=oee&&r<=wje},nee=function(e,t,r){if(r>=e.length)return-1;for(var n=0;t<r;t++){var o=vur(xje(e,t));if(o===-1)return-1;n=n*16+o}return n},vur=function(e){return e>=oee&&e<=wje?e-oee:e>=yje&&e<=mur?e-yje+10:e>=_je&&e<=gur?e-_je+10:-1};Eje.exports=function(e){for(var t="",r=0,n=0,o;(n=gje(e,"\\",n))>-1;){if(t+=vje(e,r,n),++n===e.length)return;var i=ree(e,n++);switch(i){case"b":t+="\b";break;case"t":t+="\t";break;case"n":t+=`
`;break;case"v":t+="\x0B";break;case"f":t+="\f";break;case"r":t+="\r";break;case"\r":n<e.length&&ree(e,n)===`
`&&++n;case`
`:case"\u2028":case"\u2029":break;case"0":if(bje(e,n))return;t+="\0";break;case"x":if(o=nee(e,n,n+2),o===-1)return;n+=2,t+=dur(o);break;case"u":if(n<e.length&&ree(e,n)==="{"){var a=gje(e,"}",++n);if(a===-1)return;o=nee(e,n,a),n=a+1}else o=nee(e,n,n+4),n+=4;if(o===-1||o>1114111)return;t+=hur(o);break;default:if(bje(i,0))return;t+=i}r=n}return t+vje(e,r)}});var Lje=N(()=>{"use strict";u();var yur=Tg(),_ur=ce(),bur=YM(),rR=Lt(),Aje=Sl(),Oje=dr(),xur=Jn(),wur=Rn(),Eur=ho(),Sur=wi().f,Tur=gc(),nR=Bh(),Iur=tee(),Mur=Sje(),Pje=w_(),iee=new nR.WeakMap,Cur=nR.get,Aur=nR.has,Our=nR.set,aee=Array,_A=TypeError,Tje=Object.freeze||Object,Pur=Object.isFrozen,Dur=Math.min,Ije=rR("".charAt),Dje=rR("".slice),Nur=rR("".split),Mje=rR(/./.exec),Lur=/([\n\u2028\u2029]|\r\n?)/g,kur=RegExp("^["+Pje+"]*"),Rur=RegExp("[^"+Pje+"]"),Cje="Invalid tag",jur="Invalid opening line",qur="Invalid closing line",zur=function(e){var t=e.raw;if(yur&&!Pur(t))throw new _A("Raw template should be frozen");if(Aur(iee,t))return Cur(iee,t);var r=Fur(t),n=Bur(r);return Sur(n,"raw",{value:Tje(r)}),Tje(n),Our(iee,t,n),n},Fur=function(e){var t=xur(e),r=Eur(t),n=aee(r),o=aee(r),i=0,a,c,h,m;if(!r)throw new _A(Cje);for(;i<r;i++){var y=t[i];if(typeof y=="string")n[i]=Nur(y,Lur);else throw new _A(Cje)}for(i=0;i<r;i++){var w=i+1===r;if(a=n[i],i===0){if(a.length===1||a[0].length>0)throw new _A(jur);a[1]=""}if(w){if(a.length===1||Mje(Rur,a[a.length-1]))throw new _A(qur);a[a.length-2]="",a[a.length-1]=""}for(var E=2;E<a.length;E+=2){var A=a[E],P=E+1===a.length&&!w,j=Mje(kur,A)[0];if(!P&&j.length===A.length){a[E]="";continue}c=Uur(j,c)}}var D=c?c.length:0;for(i=0;i<r;i++){for(a=n[i],h=a[0],m=1;m<a.length;m+=2)h+=a[m]+Dje(a[m+1],D);o[i]=h}return o},Uur=function(e,t){if(t===void 0||e===t)return e;for(var r=0,n=Dur(e.length,t.length);r<n&&Ije(e,r)===Ije(t,r);r++);return Dje(e,0,r)},Bur=function(e){for(var t=0,r=e.length,n=aee(r);t<r;t++)n[t]=Mur(e[t]);return n},Nje=function(e){return bur(function(t){var r=Tur(arguments);return r[0]=zur(Oje(t)),Aje(e,this,r)},"")},Vur=Nje(Iur);_ur({target:"String",stat:!0,forced:!0},{dedent:function(t){return Oje(t),wur(t)?Nje(t):Aje(Vur,this,arguments)}})});var kje=N(()=>{"use strict";u();EX()});var Rje=N(()=>{"use strict";u();PX()});var jje=N(()=>{"use strict";u();UX()});var qje=N(()=>{"use strict";u();YX()});var zje=N(()=>{"use strict";u();var Gur=cr(),Hur=da(),Wur=wi().f,$ur=Zs().f,see=Gur.Symbol;Hur("asyncDispose");see&&(bA=$ur(see,"asyncDispose"),bA.enumerable&&bA.configurable&&bA.writable&&Wur(see,"asyncDispose",{value:bA.value,enumerable:!1,configurable:!1,writable:!1}));var bA});var Fje=N(()=>{"use strict";u();var Yur=da();Yur("customMatcher")});var Uje=N(()=>{"use strict";u();var Zur=cr(),Kur=da(),Xur=wi().f,Jur=Zs().f,lee=Zur.Symbol;Kur("dispose");lee&&(xA=Jur(lee,"dispose"),xA.enumerable&&xA.configurable&&xA.writable&&Xur(lee,"dispose",{value:xA.value,enumerable:!1,configurable:!1,writable:!1}));var xA});var cee=N((g_n,Bje)=>{"use strict";u();var Qur=cn(),ecr=Lt(),uee=Qur("Symbol"),tcr=uee.keyFor,rcr=ecr(uee.prototype.valueOf);Bje.exports=uee.isRegisteredSymbol||function(t){try{return tcr(rcr(t))!==void 0}catch(r){return!1}}});var Vje=N(()=>{"use strict";u();var ncr=ce(),ocr=cee();ncr({target:"Symbol",stat:!0},{isRegisteredSymbol:ocr})});var Gje=N(()=>{"use strict";u();var icr=ce(),acr=cee();icr({target:"Symbol",stat:!0,name:"isRegisteredSymbol"},{isRegistered:acr})});var dee=N((S_n,Kje)=>{"use strict";u();var scr=gg(),Yje=cn(),lcr=Lt(),ucr=mg(),ccr=an(),iR=Yje("Symbol"),Hje=iR.isWellKnownSymbol,Zje=Yje("Object","getOwnPropertyNames"),pcr=lcr(iR.prototype.valueOf),Wje=scr("wks");for(oR=0,pee=Zje(iR),$je=pee.length;oR<$je;oR++)try{fee=pee[oR],ucr(iR[fee])&&ccr(fee)}catch(e){}var fee,oR,pee,$je;Kje.exports=function(t){if(Hje&&Hje(t))return!0;try{for(var r=pcr(t),n=0,o=Zje(Wje),i=o.length;n<i;n++)if(Wje[o[n]]==r)return!0}catch(a){}return!1}});var Xje=N(()=>{"use strict";u();var fcr=ce(),dcr=dee();fcr({target:"Symbol",stat:!0,forced:!0},{isWellKnownSymbol:dcr})});var Jje=N(()=>{"use strict";u();var hcr=ce(),mcr=dee();hcr({target:"Symbol",stat:!0,name:"isWellKnownSymbol",forced:!0},{isWellKnown:mcr})});var Qje=N(()=>{"use strict";u();var gcr=da();gcr("matcher")});var eqe=N(()=>{"use strict";u();var vcr=da();vcr("metadata")});var tqe=N(()=>{"use strict";u();var ycr=da();ycr("metadataKey")});var rqe=N(()=>{"use strict";u();var _cr=da();_cr("observable")});var nqe=N(()=>{"use strict";u();var bcr=da();bcr("patternMatch")});var oqe=N(()=>{"use strict";u();var xcr=da();xcr("replaceAll")});var aqe=N(()=>{"use strict";u();var wcr=cn(),Ecr=PC(),Scr=FJ(),iqe=Zn(),Tcr=bg(),Icr=iqe.aTypedArrayConstructor,Mcr=iqe.exportTypedArrayStaticMethod;Mcr("fromAsync",function(t){var r=this,n=arguments.length,o=n>1?arguments[1]:void 0,i=n>2?arguments[2]:void 0;return new(wcr("Promise"))(function(a){Ecr(r),a(Scr(t,o,i))}).then(function(a){return Tcr(Icr(r),a)})},!0)});var sqe=N(()=>{"use strict";u();uJ()});var uqe=N(()=>{"use strict";u();var lqe=Zn(),Ccr=La().filterReject,Acr=ik(),Ocr=lqe.aTypedArray,Pcr=lqe.exportTypedArrayMethod;Pcr("filterOut",function(t){var r=Ccr(Ocr(this),t,arguments.length>1?arguments[1]:void 0);return Acr(this,r)},!0)});var pqe=N(()=>{"use strict";u();var cqe=Zn(),Dcr=La().filterReject,Ncr=ik(),Lcr=cqe.aTypedArray,kcr=cqe.exportTypedArrayMethod;kcr("filterReject",function(t){var r=Dcr(Lcr(this),t,arguments.length>1?arguments[1]:void 0);return Ncr(this,r)},!0)});var fqe=N(()=>{"use strict";u();cJ()});var dqe=N(()=>{"use strict";u();pJ()});var hqe=N(()=>{"use strict";u();var hee=Zn(),Rcr=Sk(),jcr=hee.aTypedArray,qcr=hee.getTypedArrayConstructor,zcr=hee.exportTypedArrayMethod;zcr("groupBy",function(t){var r=arguments.length>1?arguments[1]:void 0;return Rcr(jcr(this),t,r,qcr)},!0)});var mqe=N(()=>{"use strict";u();TJ()});var gqe=N(()=>{"use strict";u();IJ()});var vqe=N(()=>{"use strict";u();var mee=Zn(),Fcr=ho(),Ucr=ek(),Bcr=gd(),Vcr=YC(),Gcr=Ui(),Hcr=mee.aTypedArray,Wcr=mee.getTypedArrayConstructor,$cr=mee.exportTypedArrayMethod,Ycr=Math.max,Zcr=Math.min;$cr("toSpliced",function(t,r){var n=Hcr(this),o=Wcr(n),i=Fcr(n),a=Bcr(t,i),c=arguments.length,h=0,m,y,w,E,A,P,j;if(c===0)m=y=0;else if(c===1)m=0,y=i-a;else if(y=Zcr(Ycr(Gcr(r),0),i-a),m=c-2,m){E=new o(m),w=Ucr(E);for(var D=2;D<c;D++)A=arguments[D],E[D-2]=w?Vcr(A):+A}for(P=i+m-y,j=new o(P);h<a;h++)j[h]=n[h];for(;h<a+m;h++)j[h]=E[h-a];for(;h<P;h++)j[h]=n[h+y-m];return j},!0)});var yqe=N(()=>{"use strict";u();var Kcr=Lt(),gee=Zn(),Xcr=bg(),Jcr=Ik(),Qcr=gee.aTypedArray,epr=gee.getTypedArrayConstructor,tpr=gee.exportTypedArrayMethod,rpr=Kcr(Jcr);tpr("uniqueBy",function(t){return Qcr(this),Xcr(epr(this),rpr(this,t))},!0)});var _qe=N(()=>{"use strict";u();CJ()});var vee=N((Dbn,bqe)=>{"use strict";u();var npr=Qr(),opr=String,ipr=TypeError;bqe.exports=function(e){if(e===void 0||npr(e))return e;throw new ipr(opr(e)+" is not an object or undefined")}});var wA=N((Lbn,Tqe)=>{"use strict";u();var Sqe="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",xqe=Sqe+"+/",wqe=Sqe+"-_",Eqe=function(e){for(var t={},r=0;r<64;r++)t[e.charAt(r)]=r;return t};Tqe.exports={i2c:xqe,c2i:Eqe(xqe),i2cUrl:wqe,c2iUrl:Eqe(wqe)}});var yee=N((Rbn,Iqe)=>{"use strict";u();var apr=TypeError;Iqe.exports=function(e){var t=e&&e.alphabet;if(t===void 0||t==="base64"||t==="base64url")return t||"base64";throw new apr("Incorrect `alphabet` option")}});var wee=N((qbn,Aqe)=>{"use strict";u();var Mqe=cr(),spr=Lt(),lpr=vee(),upr=VC(),cpr=$n(),Cqe=wA(),ppr=yee(),fpr=aE(),dpr=Cqe.c2i,hpr=Cqe.c2iUrl,By=Mqe.SyntaxError,mpr=Mqe.TypeError,L_=spr("".charAt),_ee=function(e,t){for(var r=e.length;t<r;t++){var n=L_(e,t);if(n!==" "&&n!=="\t"&&n!==`
`&&n!=="\f"&&n!=="\r")break}return t},bee=function(e,t,r){var n=e.length;n<4&&(e+=n===2?"AA":"A");var o=(t[L_(e,0)]<<18)+(t[L_(e,1)]<<12)+(t[L_(e,2)]<<6)+t[L_(e,3)],i=[o>>16&255,o>>8&255,o&255];if(n===2){if(r&&i[1]!==0)throw new By("Extra bits");return[i[0]]}if(n===3){if(r&&i[2]!==0)throw new By("Extra bits");return[i[0],i[1]]}return i},xee=function(e,t,r){for(var n=t.length,o=0;o<n;o++)e[r+o]=t[o];return r+n};Aqe.exports=function(e,t,r,n){upr(e),lpr(t);var o=ppr(t)==="base64"?dpr:hpr,i=t?t.lastChunkHandling:void 0;if(i===void 0&&(i="loose"),i!=="loose"&&i!=="strict"&&i!=="stop-before-partial")throw new mpr("Incorrect `lastChunkHandling` option");r&&fpr(r.buffer);var a=r||[],c=0,h=0,m="",y=0;if(n)for(;;){if(y=_ee(e,y),y===e.length){if(m.length>0){if(i==="stop-before-partial")break;if(i==="loose"){if(m.length===1)throw new By("Malformed padding: exactly one additional character");c=xee(a,bee(m,o,!1),c)}else throw new By("Missing padding")}h=e.length;break}var w=L_(e,y);if(++y,w==="="){if(m.length<2)throw new By("Padding is too early");if(y=_ee(e,y),m.length===2){if(y===e.length){if(i==="stop-before-partial")break;throw new By("Malformed padding: only one =")}L_(e,y)==="="&&(++y,y=_ee(e,y))}if(y<e.length)throw new By("Unexpected character after padding");c=xee(a,bee(m,o,i==="strict"),c),h=e.length;break}if(!cpr(o,w))throw new By("Unexpected character");var E=n-c;if(E===1&&m.length===2||E===2&&m.length===3||(m+=w,m.length===4&&(c=xee(a,bee(m,o,!1),c),m="",h=y,c===n)))break}return{bytes:a,read:h,written:c}}});var Pqe=N(()=>{"use strict";u();var gpr=ce(),vpr=cr(),ypr=bg(),_pr=wee(),Oqe=vpr.Uint8Array;Oqe&&gpr({target:"Uint8Array",stat:!0},{fromBase64:function(t){var r=_pr(t,arguments.length>1?arguments[1]:void 0,null,9007199254740991);return ypr(Oqe,r.bytes)}})});var See=N((Vbn,kqe)=>{"use strict";u();var Eee=cr(),Nqe=Lt(),bpr=Eee.Uint8Array,Dqe=Eee.SyntaxError,xpr=Eee.parseInt,wpr=Math.min,Lqe=/[^\da-f]/i,Epr=Nqe(Lqe.exec),Spr=Nqe("".slice);kqe.exports=function(e,t){var r=e.length;if(r%2!==0)throw new Dqe("String should be an even number of characters");for(var n=t?wpr(t.length,r/2):r/2,o=t||new bpr(n),i=0,a=0;a<n;){var c=Spr(e,i,i+=2);if(Epr(Lqe,c))throw new Dqe("String should only contain hex characters");o[a++]=xpr(c,16)}return{bytes:o,read:i}}});var Rqe=N(()=>{"use strict";u();var Tpr=ce(),Ipr=cr(),Mpr=VC(),Cpr=See();Ipr.Uint8Array&&Tpr({target:"Uint8Array",stat:!0},{fromHex:function(t){return Cpr(Mpr(t)).bytes}})});var EA=N((Ybn,jqe)=>{"use strict";u();var Apr=Lu(),Opr=TypeError;jqe.exports=function(e){if(Apr(e)==="Uint8Array")return e;throw new Opr("Argument is not an Uint8Array")}});var qqe=N(()=>{"use strict";u();var Ppr=ce(),Dpr=cr(),Npr=wee(),Lpr=EA(),aR=Dpr.Uint8Array,kpr=!aR||!aR.prototype.setFromBase64||!function(){var e=new aR([255,255,255,255,255]);try{e.setFromBase64("MjYyZg===")}catch(t){return e[0]===50&&e[1]===54&&e[2]===50&&e[3]===255&&e[4]===255}}();aR&&Ppr({target:"Uint8Array",proto:!0,forced:kpr},{setFromBase64:function(t){Lpr(this);var r=Npr(t,arguments.length>1?arguments[1]:void 0,this,this.length);return{read:r.read,written:r.written}}})});var zqe=N(()=>{"use strict";u();var Rpr=ce(),jpr=cr(),qpr=VC(),zpr=EA(),Fpr=aE(),Upr=See();jpr.Uint8Array&&Rpr({target:"Uint8Array",proto:!0},{setFromHex:function(t){zpr(this),qpr(t),Fpr(this.buffer);var r=Upr(t,this).read;return{read:r,written:r/2}}})});var Uqe=N(()=>{"use strict";u();var Bpr=ce(),Vpr=cr(),Gpr=Lt(),Hpr=vee(),Wpr=EA(),$pr=aE(),Fqe=wA(),Ypr=yee(),Zpr=Fqe.i2c,Kpr=Fqe.i2cUrl,Xpr=Gpr("".charAt);Vpr.Uint8Array&&Bpr({target:"Uint8Array",proto:!0},{toBase64:function(){var t=Wpr(this),r=arguments.length?Hpr(arguments[0]):void 0,n=Ypr(r)==="base64"?Zpr:Kpr,o=!!r&&!!r.omitPadding;$pr(this.buffer);for(var i="",a=0,c=t.length,h,m=function(y){return Xpr(n,h>>6*y&63)};a+2<c;a+=3)h=(t[a]<<16)+(t[a+1]<<8)+t[a+2],i+=m(3)+m(2)+m(1)+m(0);return a+2===c?(h=(t[a]<<16)+(t[a+1]<<8),i+=m(3)+m(2)+m(1)+(o?"":"=")):a+1===c&&(h=t[a]<<16,i+=m(3)+m(2)+(o?"":"==")),i}})});var Bqe=N(()=>{"use strict";u();var Jpr=ce(),Qpr=cr(),efr=Lt(),tfr=EA(),rfr=aE(),nfr=efr(1 .toString);Qpr.Uint8Array&&Jpr({target:"Uint8Array",proto:!0},{toHex:function(){tfr(this),rfr(this.buffer);for(var t="",r=0,n=this.length;r<n;r++){var o=nfr(this[r],16);t+=o.length===1?"0"+o:o}return t}})});var SA=N((lxn,Vqe)=>{"use strict";u();var ofr=Bh().has;Vqe.exports=function(e){return ofr(e),e}});var Gqe=N(()=>{"use strict";u();var ifr=ce(),afr=SA(),sfr=Bh().remove;ifr({target:"WeakMap",proto:!0,real:!0,forced:!0},{deleteAll:function(){for(var t=afr(this),r=!0,n,o=0,i=arguments.length;o<i;o++)n=sfr(t,arguments[o]),r=r&&n;return!!r}})});var Wqe=N(()=>{"use strict";u();var lfr=ce(),Hqe=Bh(),ufr=pA();lfr({target:"WeakMap",stat:!0,forced:!0},{from:ufr(Hqe.WeakMap,Hqe.set,!0)})});var Yqe=N(()=>{"use strict";u();var cfr=ce(),$qe=Bh(),pfr=fA();cfr({target:"WeakMap",stat:!0,forced:!0},{of:pfr($qe.WeakMap,$qe.set,!0)})});var Kqe=N(()=>{"use strict";u();var ffr=ce(),dfr=SA(),Tee=Bh(),hfr=Tee.get,mfr=Tee.has,Zqe=Tee.set;ffr({target:"WeakMap",proto:!0,real:!0,forced:!0},{emplace:function(t,r){var n=dfr(this),o,i;return mfr(n,t)?(o=hfr(n,t),"update"in r&&(o=r.update(o,t,n),Zqe(n,t,o)),o):(i=r.insert(t,n),Zqe(n,t,i),i)}})});var Xqe=N(()=>{"use strict";u();var gfr=ce(),vfr=SA(),Iee=Bh(),yfr=Iee.get,_fr=Iee.has,bfr=Iee.set;gfr({target:"WeakMap",proto:!0,real:!0,forced:!0},{getOrInsert:function(t,r){return _fr(vfr(this),t)?yfr(this,t):(bfr(this,t,r),r)}})});var eze=N((Txn,Qqe)=>{"use strict";u();var Mee=Bh(),Jqe=new Mee.WeakMap,xfr=Mee.set,wfr=Mee.remove;Qqe.exports=function(e){return xfr(Jqe,e,1),wfr(Jqe,e),e}});var tze=N(()=>{"use strict";u();var Efr=ce(),Sfr=pn(),Tfr=SA(),Ifr=eze(),Cee=Bh(),Mfr=Cee.get,Cfr=Cee.has,Afr=Cee.set;Efr({target:"WeakMap",proto:!0,real:!0,forced:!0},{getOrInsertComputed:function(t,r){if(Tfr(this),Ifr(t),Sfr(r),Cfr(this,t))return Mfr(this,t);var n=r(t);return Afr(this,t,n),n}})});var rze=N(()=>{"use strict";u();var Ofr=ce(),Pfr=Hk();Ofr({target:"WeakMap",proto:!0,real:!0,forced:!0},{upsert:Pfr})});var qE=N((Nxn,nze)=>{"use strict";u();var Aee=Lt(),Oee=WeakSet.prototype;nze.exports={WeakSet,add:Aee(Oee.add),has:Aee(Oee.has),remove:Aee(Oee.delete)}});var Pee=N((kxn,oze)=>{"use strict";u();var Dfr=qE().has;oze.exports=function(e){return Dfr(e),e}});var ize=N(()=>{"use strict";u();var Nfr=ce(),Lfr=Pee(),kfr=qE().add;Nfr({target:"WeakSet",proto:!0,real:!0,forced:!0},{addAll:function(){for(var t=Lfr(this),r=0,n=arguments.length;r<n;r++)kfr(t,arguments[r]);return t}})});var aze=N(()=>{"use strict";u();var Rfr=ce(),jfr=Pee(),qfr=qE().remove;Rfr({target:"WeakSet",proto:!0,real:!0,forced:!0},{deleteAll:function(){for(var t=jfr(this),r=!0,n,o=0,i=arguments.length;o<i;o++)n=qfr(t,arguments[o]),r=r&&n;return!!r}})});var lze=N(()=>{"use strict";u();var zfr=ce(),sze=qE(),Ffr=pA();zfr({target:"WeakSet",stat:!0,forced:!0},{from:Ffr(sze.WeakSet,sze.add,!1)})});var cze=N(()=>{"use strict";u();var Ufr=ce(),uze=qE(),Bfr=fA();Ufr({target:"WeakSet",stat:!0,forced:!0},{of:Bfr(uze.WeakSet,uze.add,!1)})});var vze=N(()=>{"use strict";u();var Vfr=ce(),Gfr=cr(),dze=cn(),Dee=Lt(),Hfr=pr(),sR=Gt(),Wfr=Sn(),$fr=hp(),pze=wA().c2i,hze=/[^\d+/a-z]/i,Yfr=/[\t\n\f\r ]+/g,Zfr=/[=]{1,2}$/,k_=dze("atob"),Kfr=String.fromCharCode,Xfr=Dee("".charAt),fze=Dee("".replace),Jfr=Dee(hze.exec),zE=!!k_&&!sR(function(){return k_("aGk=")!=="hi"}),mze=zE&&sR(function(){return k_(" ")!==""}),gze=zE&&!sR(function(){k_("a")}),Qfr=zE&&!sR(function(){k_()}),edr=zE&&k_.length!==1,tdr=!zE||mze||gze||Qfr||edr;Vfr({global:!0,bind:!0,enumerable:!0,forced:tdr},{atob:function(t){if($fr(arguments.length,1),zE&&!mze&&!gze)return Hfr(k_,Gfr,t);var r=fze(Wfr(t),Yfr,""),n="",o=0,i=0,a,c,h;if(r.length%4===0&&(r=fze(r,Zfr,"")),a=r.length,a%4===1||Jfr(hze,r))throw new(dze("DOMException"))("The string is not correctly encoded","InvalidCharacterError");for(;o<a;)c=Xfr(r,o++),h=i%4?h*64+pze[c]:pze[c],i++%4&&(n+=Kfr(255&h>>(-2*i&6)));return n}})});var wze=N(()=>{"use strict";u();var rdr=ce(),ndr=cr(),bze=cn(),xze=Lt(),odr=pr(),Nee=Gt(),yze=Sn(),idr=hp(),adr=wA().i2c,FE=bze("btoa"),_ze=xze("".charAt),sdr=xze("".charCodeAt),TA=!!FE&&!Nee(function(){return FE("hi")!=="aGk="}),ldr=TA&&!Nee(function(){FE()}),udr=TA&&Nee(function(){return FE(null)!=="bnVsbA=="}),cdr=TA&&FE.length!==1;rdr({global:!0,bind:!0,enumerable:!0,forced:!TA||ldr||udr||cdr},{btoa:function(t){if(idr(arguments.length,1),TA)return odr(FE,ndr,yze(t));for(var r=yze(t),n="",o=0,i=adr,a,c;_ze(r,o)||(i="=",o%1);){if(c=sdr(r,o+=3/4),c>255)throw new(bze("DOMException"))("The string contains characters outside of the Latin1 range","InvalidCharacterError");a=a<<8|c,n+=_ze(i,63&a>>8-o%1*8)}return n}})});var Lee=N((twn,Eze)=>{"use strict";u();Eze.exports={CSSRuleList:0,CSSStyleDeclaration:0,CSSValueList:0,ClientRectList:0,DOMRectList:0,DOMStringList:0,DOMTokenList:1,DataTransferItemList:0,FileList:0,HTMLAllCollection:0,HTMLCollection:0,HTMLFormElement:0,HTMLSelectElement:0,MediaList:0,MimeTypeArray:0,NamedNodeMap:0,NodeList:1,PaintRequestList:0,Plugin:0,PluginArray:0,SVGLengthList:0,SVGNumberList:0,SVGPathSegList:0,SVGPointList:0,SVGStringList:0,SVGTransformList:0,SourceBufferList:0,StyleSheetList:0,TextTrackCueList:0,TextTrackList:0,TouchList:0}});var Ree=N((nwn,Tze)=>{"use strict";u();var pdr=GM(),kee=pdr("span").classList,Sze=kee&&kee.constructor&&kee.constructor.prototype;Tze.exports=Sze===Object.prototype?void 0:Sze});var Aze=N(()=>{"use strict";u();var Ize=cr(),Mze=Lee(),fdr=Ree(),jee=v$(),ddr=ms(),Cze=function(e){if(e&&e.forEach!==jee)try{ddr(e,"forEach",jee)}catch(t){e.forEach=jee}};for(lR in Mze)Mze[lR]&&Cze(Ize[lR]&&Ize[lR].prototype);var lR;Cze(fdr)});var Lze=N(()=>{"use strict";u();var Oze=cr(),Dze=Lee(),hdr=Ree(),IA=cC(),Pze=ms(),mdr=ku(),gdr=an(),qee=gdr("iterator"),zee=IA.values,Nze=function(e,t){if(e){if(e[qee]!==zee)try{Pze(e,qee,zee)}catch(n){e[qee]=zee}if(mdr(e,t,!0),Dze[t]){for(var r in IA)if(e[r]!==IA[r])try{Pze(e,r,IA[r])}catch(n){e[r]=IA[r]}}}};for(uR in Dze)Nze(Oze[uR]&&Oze[uR].prototype,uR);var uR;Nze(hdr,"DOMTokenList")});var Fee=N((pwn,kze)=>{"use strict";u();kze.exports={IndexSizeError:{s:"INDEX_SIZE_ERR",c:1,m:1},DOMStringSizeError:{s:"DOMSTRING_SIZE_ERR",c:2,m:0},HierarchyRequestError:{s:"HIERARCHY_REQUEST_ERR",c:3,m:1},WrongDocumentError:{s:"WRONG_DOCUMENT_ERR",c:4,m:1},InvalidCharacterError:{s:"INVALID_CHARACTER_ERR",c:5,m:1},NoDataAllowedError:{s:"NO_DATA_ALLOWED_ERR",c:6,m:0},NoModificationAllowedError:{s:"NO_MODIFICATION_ALLOWED_ERR",c:7,m:1},NotFoundError:{s:"NOT_FOUND_ERR",c:8,m:1},NotSupportedError:{s:"NOT_SUPPORTED_ERR",c:9,m:1},InUseAttributeError:{s:"INUSE_ATTRIBUTE_ERR",c:10,m:1},InvalidStateError:{s:"INVALID_STATE_ERR",c:11,m:1},SyntaxError:{s:"SYNTAX_ERR",c:12,m:1},InvalidModificationError:{s:"INVALID_MODIFICATION_ERR",c:13,m:1},NamespaceError:{s:"NAMESPACE_ERR",c:14,m:1},InvalidAccessError:{s:"INVALID_ACCESS_ERR",c:15,m:1},ValidationError:{s:"VALIDATION_ERR",c:16,m:0},TypeMismatchError:{s:"TYPE_MISMATCH_ERR",c:17,m:1},SecurityError:{s:"SECURITY_ERR",c:18,m:1},NetworkError:{s:"NETWORK_ERR",c:19,m:1},AbortError:{s:"ABORT_ERR",c:20,m:1},URLMismatchError:{s:"URL_MISMATCH_ERR",c:21,m:1},QuotaExceededError:{s:"QUOTA_EXCEEDED_ERR",c:22,m:1},TimeoutError:{s:"TIMEOUT_ERR",c:23,m:1},InvalidNodeTypeError:{s:"INVALID_NODE_TYPE_ERR",c:24,m:1},DataCloneError:{s:"DATA_CLONE_ERR",c:25,m:1}}});var Wze=N(()=>{"use strict";u();var vdr=ce(),fR=cn(),ydr=hY(),Wee=Gt(),_dr=Na(),$ee=dc(),dR=wi().f,bdr=ei(),cR=Bi(),pR=$n(),xdr=au(),wdr=dr(),qze=e$(),Rze=g_(),UE=Fee(),Edr=NL(),zze=Ho(),Yee=$r(),Fze=To(),BE="DOMException",Hee="DATA_CLONE_ERR",mR=fR("Error"),Cg=fR(BE)||function(){try{var e=fR("MessageChannel")||ydr("worker_threads").MessageChannel;new e().port1.postMessage(new WeakMap)}catch(t){if(t.name===Hee&&t.code===25)return t.constructor}}(),Sdr=Cg&&Cg.prototype,Uze=mR.prototype,Tdr=zze.set,Idr=zze.getterFor(BE),Mdr="stack"in new mR(BE),Bze=function(e){return pR(UE,e)&&UE[e].m?UE[e].c:0},Zee=function(){xdr(this,CA);var t=arguments.length,r=Rze(t<1?void 0:arguments[0]),n=Rze(t<2?void 0:arguments[1],"Error"),o=Bze(n);if(Tdr(this,{type:BE,name:n,message:r,code:o}),Yee||(this.name=n,this.message=r,this.code=o),Mdr){var i=new mR(r);i.name=BE,dR(this,"stack",$ee(1,Edr(i.stack,1)))}},CA=Zee.prototype=_dr(Uze),Vze=function(e){return{enumerable:!0,configurable:!0,get:e}},Uee=function(e){return Vze(function(){return Idr(this)[e]})};Yee&&(cR(CA,"code",Uee("code")),cR(CA,"message",Uee("message")),cR(CA,"name",Uee("name")));dR(CA,"constructor",$ee(1,Zee));var gR=Wee(function(){return!(new Cg instanceof mR)}),Gze=gR||Wee(function(){return Uze.toString!==qze||String(new Cg(1,2))!=="2: 1"}),Hze=gR||Wee(function(){return new Cg(1,"DataCloneError").code!==25}),Cdr=gR||Cg[Hee]!==25||Sdr[Hee]!==25,jze=Fze?Gze||Hze||Cdr:gR;vdr({global:!0,constructor:!0,forced:jze},{DOMException:jze?Zee:Cg});var AA=fR(BE),hR=AA.prototype;Gze&&(Fze||Cg===AA)&&bdr(hR,"toString",qze);Hze&&Yee&&Cg===AA&&cR(hR,"code",Vze(function(){return Bze(wdr(this).name)}));for(Bee in UE)pR(UE,Bee)&&(Vee=UE[Bee],MA=Vee.s,Gee=$ee(6,Vee.c),pR(AA,MA)||dR(AA,MA,Gee),pR(hR,MA)||dR(hR,MA,Gee));var Vee,MA,Gee,Bee});var Qze=N(()=>{"use strict";u();var Adr=ce(),Odr=cr(),nte=cn(),tte=dc(),rte=wi().f,$ze=$n(),Pdr=au(),Ddr=by(),Yze=g_(),Kee=Fee(),Ndr=NL(),Ldr=$r(),Xze=To(),PA="DOMException",Jze=nte("Error"),DA=nte(PA),ote=function(){Pdr(this,kdr);var t=arguments.length,r=Yze(t<1?void 0:arguments[0]),n=Yze(t<2?void 0:arguments[1],"Error"),o=new DA(r,n),i=new Jze(r);return i.name=PA,rte(o,"stack",tte(1,Ndr(i.stack,1))),Ddr(o,this,ote),o},kdr=ote.prototype=DA.prototype,Rdr="stack"in new Jze(PA),jdr="stack"in new DA(1,2),Xee=DA&&Ldr&&Object.getOwnPropertyDescriptor(Odr,PA),qdr=!!Xee&&!(Xee.writable&&Xee.configurable),Zze=Rdr&&!qdr&&!jdr;Adr({global:!0,constructor:!0,forced:Xze||Zze},{DOMException:Zze?ote:DA});var OA=nte(PA),Kze=OA.prototype;if(Kze.constructor!==OA){Xze||rte(Kze,"constructor",tte(1,OA));for(Jee in Kee)$ze(Kee,Jee)&&(Qee=Kee[Jee],ete=Qee.s,$ze(OA,ete)||rte(OA,ete,tte(6,Qee.c)))}var Qee,ete,Jee});var t8e=N(()=>{"use strict";u();var zdr=cn(),Fdr=ku(),e8e="DOMException";Fdr(zdr(e8e),e8e)});var n8e=N(()=>{"use strict";u();var Udr=ce(),Bdr=cr(),r8e=kC().clear;Udr({global:!0,bind:!0,enumerable:!0,forced:Bdr.clearImmediate!==r8e},{clearImmediate:r8e})});var vR=N((Twn,i8e)=>{"use strict";u();var o8e=cr(),Vdr=Sl(),Gdr=Rn(),Hdr=dC(),Wdr=fd(),$dr=gc(),Ydr=hp(),Zdr=o8e.Function,Kdr=/MSIE .\./.test(Wdr)||Hdr==="BUN"&&function(){var e=o8e.Bun.version.split(".");return e.length<3||e[0]==="0"&&(e[1]<3||e[1]==="3"&&e[2]==="0")}();i8e.exports=function(e,t){var r=t?2:1;return Kdr?function(n,o){var i=Ydr(arguments.length,1)>r,a=Gdr(n)?n:Zdr(n),c=i?$dr(arguments,r):[],h=i?function(){Vdr(a,this,c)}:a;return t?e(h,o):e(h)}:e}});var u8e=N(()=>{"use strict";u();var Xdr=ce(),l8e=cr(),a8e=kC().set,Jdr=vR(),s8e=l8e.setImmediate?Jdr(a8e,!1):a8e;Xdr({global:!0,bind:!0,enumerable:!0,forced:l8e.setImmediate!==s8e},{setImmediate:s8e})});var c8e=N(()=>{"use strict";u();n8e();u8e()});var p8e=N(()=>{"use strict";u();var Qdr=ce(),ehr=cr(),thr=mK(),rhr=pn(),nhr=hp(),ohr=Gt(),ihr=$r(),ahr=ohr(function(){return ihr&&Object.getOwnPropertyDescriptor(ehr,"queueMicrotask").value.length!==1});Qdr({global:!0,enumerable:!0,dontCallGetSet:!0,forced:ahr},{queueMicrotask:function(t){nhr(arguments.length,1),thr(rhr(t))}})});var d8e=N(()=>{"use strict";u();var shr=ce(),Vy=cr(),lhr=Bi(),uhr=$r(),chr=TypeError,phr=Object.defineProperty,f8e=Vy.self!==Vy;try{uhr?(yR=Object.getOwnPropertyDescriptor(Vy,"self"),(f8e||!yR||!yR.get||!yR.enumerable)&&lhr(Vy,"self",{get:function(){return Vy},set:function(t){if(this!==Vy)throw new chr("Illegal invocation");phr(Vy,"self",{value:t,writable:!0,configurable:!0,enumerable:!0})},configurable:!0,enumerable:!0})):shr({global:!0,simple:!0,forced:f8e},{self:Vy})}catch(e){}var yR});var S8e=N(()=>{"use strict";u();var fhr=To(),dhr=ce(),Al=cr(),LA=cn(),RA=Lt(),cte=Gt(),hhr=my(),GE=Rn(),mhr=yd(),ghr=hc(),ER=Qr(),vhr=mg(),yhr=ha(),g8e=dr(),xR=Lu(),_hr=$n(),bhr=Xp(),ite=ms(),_R=ho(),xhr=hp(),whr=bE(),SR=ks(),pte=Js(),Ehr=_c(),h8e=xY(),Shr=KW(),fte=c3(),NA=Al.Object,Thr=Al.Array,v8e=Al.Date,y8e=Al.Error,Ihr=Al.TypeError,Mhr=Al.PerformanceMark,R_=LA("DOMException"),lte=SR.Map,dte=SR.has,_8e=SR.get,wR=SR.set,b8e=pte.Set,x8e=pte.add,Chr=pte.has,Ahr=LA("Object","keys"),Ohr=RA([].push),Phr=RA((!0).valueOf),Dhr=RA(1 .valueOf),Nhr=RA("".valueOf),Lhr=RA(v8e.prototype.getTime),ute=hhr("structuredClone"),kA="DataCloneError",bR="Transferring",w8e=function(e){return!cte(function(){var t=new Al.Set([7]),r=e(t),n=e(NA(7));return r===t||!r.has(7)||!ER(n)||+n!=7})&&e},m8e=function(e,t){return!cte(function(){var r=new t,n=e({a:r,b:r});return!(n&&n.a===n.b&&n.a instanceof t&&n.a.stack===r.stack)})},khr=function(e){return!cte(function(){var t=e(new Al.AggregateError([1],ute,{cause:3}));return t.name!=="AggregateError"||t.errors[0]!==1||t.message!==ute||t.cause!==3})},VE=Al.structuredClone,Rhr=fhr||!m8e(VE,y8e)||!m8e(VE,R_)||!khr(VE),jhr=!VE&&w8e(function(e){return new Mhr(ute,{detail:e}).detail}),Ag=w8e(VE)||jhr,ate=function(e){throw new R_("Uncloneable type: "+e,kA)},wc=function(e,t){throw new R_((t||"Cloning")+" of "+e+" cannot be properly polyfilled in this engine",kA)},ste=function(e,t){return Ag||wc(t),Ag(e)},qhr=function(){var e;try{e=new Al.DataTransfer}catch(t){try{e=new Al.ClipboardEvent("").clipboardData}catch(r){}}return e&&e.items&&e.files?e:null},E8e=function(e,t,r){if(dte(t,e))return _8e(t,e);var n=r||xR(e),o,i,a,c,h,m;if(n==="SharedArrayBuffer")Ag?o=Ag(e):o=e;else{var y=Al.DataView;!y&&!GE(e.slice)&&wc("ArrayBuffer");try{if(GE(e.slice)&&!e.resizable)o=e.slice(0);else for(i=e.byteLength,a=("maxByteLength"in e)?{maxByteLength:e.maxByteLength}:void 0,o=new ArrayBuffer(i,a),c=new y(e),h=new y(o),m=0;m<i;m++)h.setUint8(m,c.getUint8(m))}catch(w){throw new R_("ArrayBuffer is detached",kA)}}return wR(t,e,o),o},zhr=function(e,t,r,n,o){var i=Al[t];return ER(i)||wc(t),new i(E8e(e.buffer,o),r,n)},Cl=function(e,t){if(vhr(e)&&ate("Symbol"),!ER(e))return e;if(t){if(dte(t,e))return _8e(t,e)}else t=new lte;var r=xR(e),n,o,i,a,c,h,m,y;switch(r){case"Array":i=Thr(_R(e));break;case"Object":i={};break;case"Map":i=new lte;break;case"Set":i=new b8e;break;case"RegExp":i=new RegExp(e.source,whr(e));break;case"Error":switch(o=e.name,o){case"AggregateError":i=new(LA(o))([]);break;case"EvalError":case"RangeError":case"ReferenceError":case"SuppressedError":case"SyntaxError":case"TypeError":case"URIError":i=new(LA(o));break;case"CompileError":case"LinkError":case"RuntimeError":i=new(LA("WebAssembly",o));break;default:i=new y8e}break;case"DOMException":i=new R_(e.message,e.name);break;case"ArrayBuffer":case"SharedArrayBuffer":i=E8e(e,t,r);break;case"DataView":case"Int8Array":case"Uint8Array":case"Uint8ClampedArray":case"Int16Array":case"Uint16Array":case"Int32Array":case"Uint32Array":case"Float16Array":case"Float32Array":case"Float64Array":case"BigInt64Array":case"BigUint64Array":h=r==="DataView"?e.byteLength:e.length,i=zhr(e,r,e.byteOffset,h,t);break;case"DOMQuad":try{i=new DOMQuad(Cl(e.p1,t),Cl(e.p2,t),Cl(e.p3,t),Cl(e.p4,t))}catch(w){i=ste(e,r)}break;case"File":if(Ag)try{i=Ag(e),xR(i)!==r&&(i=void 0)}catch(w){}if(!i)try{i=new File([e],e.name,e)}catch(w){}i||wc(r);break;case"FileList":if(a=qhr(),a){for(c=0,h=_R(e);c<h;c++)a.items.add(Cl(e[c],t));i=a.files}else i=ste(e,r);break;case"ImageData":try{i=new ImageData(Cl(e.data,t),e.width,e.height,{colorSpace:e.colorSpace})}catch(w){i=ste(e,r)}break;default:if(Ag)i=Ag(e);else switch(r){case"BigInt":i=NA(e.valueOf());break;case"Boolean":i=NA(Phr(e));break;case"Number":i=NA(Dhr(e));break;case"String":i=NA(Nhr(e));break;case"Date":i=new v8e(Lhr(e));break;case"Blob":try{i=e.slice(0,e.size,e.type)}catch(w){wc(r)}break;case"DOMPoint":case"DOMPointReadOnly":n=Al[r];try{i=n.fromPoint?n.fromPoint(e):new n(e.x,e.y,e.z,e.w)}catch(w){wc(r)}break;case"DOMRect":case"DOMRectReadOnly":n=Al[r];try{i=n.fromRect?n.fromRect(e):new n(e.x,e.y,e.width,e.height)}catch(w){wc(r)}break;case"DOMMatrix":case"DOMMatrixReadOnly":n=Al[r];try{i=n.fromMatrix?n.fromMatrix(e):new n(e)}catch(w){wc(r)}break;case"AudioData":case"VideoFrame":GE(e.clone)||wc(r);try{i=e.clone()}catch(w){ate(r)}break;case"CropTarget":case"CryptoKey":case"FileSystemDirectoryHandle":case"FileSystemFileHandle":case"FileSystemHandle":case"GPUCompilationInfo":case"GPUCompilationMessage":case"ImageBitmap":case"RTCCertificate":case"WebAssembly.Module":wc(r);default:ate(r)}}switch(wR(t,e,i),r){case"Array":case"Object":for(m=Ahr(e),c=0,h=_R(m);c<h;c++)y=m[c],bhr(i,y,Cl(e[y],t));break;case"Map":e.forEach(function(w,E){wR(i,Cl(E,t),Cl(w,t))});break;case"Set":e.forEach(function(w){x8e(i,Cl(w,t))});break;case"Error":ite(i,"message",Cl(e.message,t)),_hr(e,"cause")&&ite(i,"cause",Cl(e.cause,t)),o==="AggregateError"?i.errors=Cl(e.errors,t):o==="SuppressedError"&&(i.error=Cl(e.error,t),i.suppressed=Cl(e.suppressed,t));case"DOMException":Shr&&ite(i,"stack",Cl(e.stack,t))}return i},Fhr=function(e,t){if(!ER(e))throw new Ihr("Transfer option cannot be converted to a sequence");var r=[];yhr(e,function(E){Ohr(r,g8e(E))});for(var n=0,o=_R(r),i=new b8e,a,c,h,m,y,w;n<o;){if(a=r[n++],c=xR(a),c==="ArrayBuffer"?Chr(i,a):dte(t,a))throw new R_("Duplicate transferable",kA);if(c==="ArrayBuffer"){x8e(i,a);continue}if(fte)m=VE(a,{transfer:[a]});else switch(c){case"ImageBitmap":h=Al.OffscreenCanvas,mhr(h)||wc(c,bR);try{y=new h(a.width,a.height),w=y.getContext("bitmaprenderer"),w.transferFromImageBitmap(a),m=y.transferToImageBitmap()}catch(E){}break;case"AudioData":case"VideoFrame":(!GE(a.clone)||!GE(a.close))&&wc(c,bR);try{m=a.clone(),a.close()}catch(E){}break;case"MediaSourceHandle":case"MessagePort":case"MIDIAccess":case"OffscreenCanvas":case"ReadableStream":case"RTCDataChannel":case"TransformStream":case"WebTransportReceiveStream":case"WebTransportSendStream":case"WritableStream":wc(c,bR)}if(m===void 0)throw new R_("This object cannot be transferred: "+c,kA);wR(t,a,m)}return i},Uhr=function(e){Ehr(e,function(t){fte?Ag(t,{transfer:[t]}):GE(t.transfer)?t.transfer():h8e?h8e(t):wc("ArrayBuffer",bR)})};dhr({global:!0,enumerable:!0,sham:!fte,forced:Rhr},{structuredClone:function(t){var r=xhr(arguments.length,1)>1&&!ghr(arguments[1])?g8e(arguments[1]):void 0,n=r?r.transfer:void 0,o,i;n!==void 0&&(o=new lte,i=Fhr(n,o));var a=Cl(t,o);return i&&Uhr(i),a}})});var M8e=N(()=>{"use strict";u();var Bhr=ce(),I8e=cr(),Vhr=vR(),T8e=Vhr(I8e.setInterval,!0);Bhr({global:!0,bind:!0,forced:I8e.setInterval!==T8e},{setInterval:T8e})});var O8e=N(()=>{"use strict";u();var Ghr=ce(),A8e=cr(),Hhr=vR(),C8e=Hhr(A8e.setTimeout,!0);Ghr({global:!0,bind:!0,forced:A8e.setTimeout!==C8e},{setTimeout:C8e})});var P8e=N(()=>{"use strict";u();M8e();O8e()});var jA=N((Xwn,N8e)=>{"use strict";u();var Whr=Gt(),$hr=an(),Yhr=$r(),D8e=To(),Zhr=$hr("iterator");N8e.exports=!Whr(function(){var e=new URL("b?a=1&b=2&c=3","https://a"),t=e.searchParams,r=new URLSearchParams("a=1&a=2&b=3"),n="";return e.pathname="c%20d",t.forEach(function(o,i){t.delete("b"),n+=i+o}),r.delete("a",2),r.delete("b",void 0),D8e&&(!e.toJSON||!r.has("a",1)||r.has("a",2)||!r.has("a",void 0)||r.has("b"))||!t.size&&(D8e||!Yhr)||!t.sort||e.href!=="https://a/c%20d?a=1&c=3"||t.get("c")!=="3"||String(new URLSearchParams("?a=1"))!=="a=1"||!t[Zhr]||new URL("https://a@b").username!=="a"||new URLSearchParams(new URLSearchParams("a=b")).get("a")!=="b"||new URL("https://\u0442\u0435\u0441\u0442").host!=="xn--e1aybc"||new URL("https://a#\u0431").hash!=="#%D0%B1"||n!=="a1c3"||new URL("https://x",void 0).host!=="x"})});var B8e=N((Qwn,U8e)=>{"use strict";u();var j_=Lt(),hte=2147483647,qA=36,q8e=1,vte=26,Khr=38,Xhr=700,Jhr=72,Qhr=128,emr="-",tmr=/[^\0-\u007E]/,z8e=/[.\u3002\uFF0E\uFF61]/g,L8e="Overflow: input needs wider integers to process",mte=qA-q8e,k8e=RangeError,rmr=j_(z8e.exec),HE=Math.floor,gte=String.fromCharCode,R8e=j_("".charCodeAt),F8e=j_([].join),Gy=j_([].push),nmr=j_("".replace),omr=j_("".split),imr=j_("".toLowerCase),amr=function(e){for(var t=[],r=0,n=e.length;r<n;){var o=R8e(e,r++);if(o>=55296&&o<=56319&&r<n){var i=R8e(e,r++);(i&64512)===56320?Gy(t,((o&1023)<<10)+(i&1023)+65536):(Gy(t,o),r--)}else Gy(t,o)}return t},j8e=function(e){return e+22+75*(e<26)},smr=function(e,t,r){var n=0;for(e=r?HE(e/Xhr):e>>1,e+=HE(e/t);e>mte*vte>>1;)e=HE(e/mte),n+=qA;return HE(n+(mte+1)*e/(e+Khr))},lmr=function(e){var t=[];e=amr(e);var r=e.length,n=Qhr,o=0,i=Jhr,a,c;for(a=0;a<e.length;a++)c=e[a],c<128&&Gy(t,gte(c));var h=t.length,m=h;for(h&&Gy(t,emr);m<r;){var y=hte;for(a=0;a<e.length;a++)c=e[a],c>=n&&c<y&&(y=c);var w=m+1;if(y-n>HE((hte-o)/w))throw new k8e(L8e);for(o+=(y-n)*w,n=y,a=0;a<e.length;a++){if(c=e[a],c<n&&++o>hte)throw new k8e(L8e);if(c===n){for(var E=o,A=qA;;){var P=A<=i?q8e:A>=i+vte?vte:A-i;if(E<P)break;var j=E-P,D=qA-P;Gy(t,gte(j8e(P+j%D))),E=HE(j/D),A+=qA}Gy(t,gte(j8e(E))),i=smr(o,w,m===h),o=0,m++}}o++,n++}return F8e(t,"")};U8e.exports=function(e){var t=[],r=omr(nmr(imr(e),z8e,"."),"."),n,o;for(n=0;n<r.length;n++)o=r[n],Gy(t,rmr(tmr,o)?"xn--"+lmr(o):o);return F8e(t,".")}});var Ite=N((tEn,pFe)=>{"use strict";u();cC();wX();var Ete=ce(),tFe=cr(),Ste=lK(),umr=cn(),TR=pr(),wd=Lt(),zA=$r(),rFe=jA(),nFe=ei(),cmr=Bi(),pmr=Qp(),fmr=ku(),dmr=Sy(),Tte=Ho(),oFe=au(),yte=Rn(),hmr=$n(),mmr=ui(),gmr=Lu(),vmr=dr(),iFe=Qr(),ju=Sn(),ymr=Na(),V8e=dc(),G8e=xy(),_mr=Dh(),IR=Ls(),WE=hp(),bmr=an(),xmr=KL(),wmr=bmr("iterator"),YE="URLSearchParams",aFe=YE+"Iterator",sFe=Tte.set,rf=Tte.getterFor(YE),Emr=Tte.getterFor(aFe),H8e=Ste("fetch"),AR=Ste("Request"),FA=Ste("Headers"),_te=AR&&AR.prototype,W8e=FA&&FA.prototype,Smr=tFe.TypeError,Tmr=tFe.encodeURIComponent,Imr=String.fromCharCode,Mmr=umr("String","fromCodePoint"),Cmr=parseInt,CR=wd("".charAt),$8e=wd([].join),Hy=wd([].push),lFe=wd("".replace),Amr=wd([].shift),Y8e=wd([].splice),Z8e=wd("".split),uFe=wd("".slice),Omr=wd(/./.exec),Pmr=/\+/g,bte="\uFFFD",Dmr=/^[0-9a-f]+$/i,K8e=function(e,t){var r=uFe(e,t,t+2);return Omr(Dmr,r)?Cmr(r,16):NaN},Nmr=function(e){for(var t=0,r=128;r>0&&(e&r)!==0;r>>=1)t++;return t},Lmr=function(e){var t=null;switch(e.length){case 1:t=e[0];break;case 2:t=(e[0]&31)<<6|e[1]&63;break;case 3:t=(e[0]&15)<<12|(e[1]&63)<<6|e[2]&63;break;case 4:t=(e[0]&7)<<18|(e[1]&63)<<12|(e[2]&63)<<6|e[3]&63;break}return t>1114111?null:t},X8e=function(e){e=lFe(e,Pmr," ");for(var t=e.length,r="",n=0;n<t;){var o=CR(e,n);if(o==="%"){if(CR(e,n+1)==="%"||n+3>t){r+="%",n++;continue}var i=K8e(e,n+1);if(i!==i){r+=o,n++;continue}n+=2;var a=Nmr(i);if(a===0)o=Imr(i);else{if(a===1||a>4){r+=bte,n++;continue}for(var c=[i],h=1;h<a&&(n++,!(n+3>t||CR(e,n)!=="%"));){var m=K8e(e,n+1);if(m!==m){n+=3;break}if(m>191||m<128)break;Hy(c,m),n+=2,h++}if(c.length!==a){r+=bte;continue}var y=Lmr(c);y===null?r+=bte:o=Mmr(y)}}r+=o,n++}return r},kmr=/[!'()~]|%20/g,Rmr={"!":"%21","'":"%27","(":"%28",")":"%29","~":"%7E","%20":"+"},jmr=function(e){return Rmr[e]},J8e=function(e){return lFe(Tmr(e),kmr,jmr)},xte=dmr(function(t,r){sFe(this,{type:aFe,target:rf(t).entries,index:0,kind:r})},YE,function(){var t=Emr(this),r=t.target,n=t.index++;if(!r||n>=r.length)return t.target=null,IR(void 0,!0);var o=r[n];switch(t.kind){case"keys":return IR(o.key,!1);case"values":return IR(o.value,!1)}return IR([o.key,o.value],!1)},!0),cFe=function(e){this.entries=[],this.url=null,e!==void 0&&(iFe(e)?this.parseObject(e):this.parseQuery(typeof e=="string"?CR(e,0)==="?"?uFe(e,1):e:ju(e)))};cFe.prototype={type:YE,bindURL:function(e){this.url=e,this.update()},parseObject:function(e){var t=this.entries,r=_mr(e),n,o,i,a,c,h,m;if(r)for(n=G8e(e,r),o=n.next;!(i=TR(o,n)).done;){if(a=G8e(vmr(i.value)),c=a.next,(h=TR(c,a)).done||(m=TR(c,a)).done||!TR(c,a).done)throw new Smr("Expected sequence with length 2");Hy(t,{key:ju(h.value),value:ju(m.value)})}else for(var y in e)hmr(e,y)&&Hy(t,{key:y,value:ju(e[y])})},parseQuery:function(e){if(e)for(var t=this.entries,r=Z8e(e,"&"),n=0,o,i;n<r.length;)o=r[n++],o.length&&(i=Z8e(o,"="),Hy(t,{key:X8e(Amr(i)),value:X8e($8e(i,"="))}))},serialize:function(){for(var e=this.entries,t=[],r=0,n;r<e.length;)n=e[r++],Hy(t,J8e(n.key)+"="+J8e(n.value));return $8e(t,"&")},update:function(){this.entries.length=0,this.parseQuery(this.url.query)},updateURL:function(){this.url&&this.url.update()}};var OR=function(){oFe(this,$E);var t=arguments.length>0?arguments[0]:void 0,r=sFe(this,new cFe(t));zA||(this.size=r.entries.length)},$E=OR.prototype;pmr($E,{append:function(t,r){var n=rf(this);WE(arguments.length,2),Hy(n.entries,{key:ju(t),value:ju(r)}),zA||this.length++,n.updateURL()},delete:function(e){for(var t=rf(this),r=WE(arguments.length,1),n=t.entries,o=ju(e),i=r<2?void 0:arguments[1],a=i===void 0?i:ju(i),c=0;c<n.length;){var h=n[c];if(h.key===o&&(a===void 0||h.value===a)){if(Y8e(n,c,1),a!==void 0)break}else c++}zA||(this.size=n.length),t.updateURL()},get:function(t){var r=rf(this).entries;WE(arguments.length,1);for(var n=ju(t),o=0;o<r.length;o++)if(r[o].key===n)return r[o].value;return null},getAll:function(t){var r=rf(this).entries;WE(arguments.length,1);for(var n=ju(t),o=[],i=0;i<r.length;i++)r[i].key===n&&Hy(o,r[i].value);return o},has:function(t){for(var r=rf(this).entries,n=WE(arguments.length,1),o=ju(t),i=n<2?void 0:arguments[1],a=i===void 0?i:ju(i),c=0;c<r.length;){var h=r[c++];if(h.key===o&&(a===void 0||h.value===a))return!0}return!1},set:function(t,r){var n=rf(this);WE(arguments.length,1);for(var o=n.entries,i=!1,a=ju(t),c=ju(r),h=0,m;h<o.length;h++)m=o[h],m.key===a&&(i?Y8e(o,h--,1):(i=!0,m.value=c));i||Hy(o,{key:a,value:c}),zA||(this.size=o.length),n.updateURL()},sort:function(){var t=rf(this);xmr(t.entries,function(r,n){return r.key>n.key?1:-1}),t.updateURL()},forEach:function(t){for(var r=rf(this).entries,n=mmr(t,arguments.length>1?arguments[1]:void 0),o=0,i;o<r.length;)i=r[o++],n(i.value,i.key,this)},keys:function(){return new xte(this,"keys")},values:function(){return new xte(this,"values")},entries:function(){return new xte(this,"entries")}},{enumerable:!0});nFe($E,wmr,$E.entries,{name:"entries"});nFe($E,"toString",function(){return rf(this).serialize()},{enumerable:!0});zA&&cmr($E,"size",{get:function(){return rf(this).entries.length},configurable:!0,enumerable:!0});fmr(OR,YE);Ete({global:!0,constructor:!0,forced:!rFe},{URLSearchParams:OR});!rFe&&yte(FA)&&(Q8e=wd(W8e.has),eFe=wd(W8e.set),wte=function(e){if(iFe(e)){var t=e.body,r;if(gmr(t)===YE)return r=e.headers?new FA(e.headers):new FA,Q8e(r,"content-type")||eFe(r,"content-type","application/x-www-form-urlencoded;charset=UTF-8"),ymr(e,{body:V8e(0,ju(t)),headers:V8e(0,r)})}return e},yte(H8e)&&Ete({global:!0,enumerable:!0,dontCallGetSet:!0,forced:!0},{fetch:function(t){return H8e(t,arguments.length>1?wte(arguments[1]):{})}}),yte(AR)&&(MR=function(t){return oFe(this,_te),new AR(t,arguments.length>1?wte(arguments[1]):{})},_te.constructor=MR,MR.prototype=_te,Ete({global:!0,constructor:!0,dontCallGetSet:!0,forced:!0},{Request:MR})));var Q8e,eFe,wte,MR;pFe.exports={URLSearchParams:OR,getState:rf}});var AFe=N(()=>{"use strict";u();SX();var qmr=ce(),Vte=$r(),zmr=jA(),Gte=cr(),fFe=ui(),lf=Lt(),kR=ei(),nf=Bi(),Fmr=au(),Fte=$n(),Hte=GZ(),ZE=y$(),Ed=gc(),Umr=C_().codeAt,Bmr=B8e(),Pg=Sn(),Vmr=ku(),Gmr=hp(),EFe=Ite(),SFe=Ho(),Hmr=SFe.set,RR=SFe.getterFor("URL"),Wmr=EFe.URLSearchParams,$mr=EFe.getState,UA=Gte.URL,Ute=Gte.TypeError,jR=Gte.parseInt,Ymr=Math.floor,dFe=Math.pow,sf=lf("".charAt),Sd=lf(/./.exec),VA=lf([].join),Zmr=lf(1 .toString),Kmr=lf([].pop),XE=lf([].push),Mte=lf("".replace),Xmr=lf([].shift),Jmr=lf("".split),HA=lf("".slice),qR=lf("".toLowerCase),Qmr=lf([].unshift),egr="Invalid authority",Cte="Invalid scheme",q_="Invalid host",hFe="Invalid port",TFe=/[a-z]/i,tgr=/[\d+-.a-z]/i,Bte=/\d/,rgr=/^0x/i,ngr=/^[0-7]+$/,ogr=/^\d+$/,IFe=/^[\da-f]+$/i,igr=/[\0\t\n\r #%/:<>?@[\\\]^|]/,agr=/[\0\t\n\r #/:<>?@[\\\]^|]/,sgr=/^[\u0000-\u0020]+/,lgr=/(^|[^\u0000-\u0020])[\u0000-\u0020]+$/,ugr=/[\t\n\r]/g,of,cgr=function(e){var t=Jmr(e,"."),r,n,o,i,a,c,h;if(t.length&&t[t.length-1]===""&&t.length--,r=t.length,r>4)return e;for(n=[],o=0;o<r;o++){if(i=t[o],i==="")return e;if(a=10,i.length>1&&sf(i,0)==="0"&&(a=Sd(rgr,i)?16:8,i=HA(i,a===8?1:2)),i==="")c=0;else{if(!Sd(a===10?ogr:a===8?ngr:IFe,i))return e;c=jR(i,a)}XE(n,c)}for(o=0;o<r;o++)if(c=n[o],o===r-1){if(c>=dFe(256,5-r))return null}else if(c>255)return null;for(h=Kmr(n),o=0;o<n.length;o++)h+=n[o]*dFe(256,3-o);return h},pgr=function(e){var t=[0,0,0,0,0,0,0,0],r=0,n=null,o=0,i,a,c,h,m,y,w,E=function(){return sf(e,o)};if(E()===":"){if(sf(e,1)!==":")return;o+=2,r++,n=r}for(;E();){if(r===8)return;if(E()===":"){if(n!==null)return;o++,r++,n=r;continue}for(i=a=0;a<4&&Sd(IFe,E());)i=i*16+jR(E(),16),o++,a++;if(E()==="."){if(a===0||(o-=a,r>6))return;for(c=0;E();){if(h=null,c>0)if(E()==="."&&c<4)o++;else return;if(!Sd(Bte,E()))return;for(;Sd(Bte,E());){if(m=jR(E(),10),h===null)h=m;else{if(h===0)return;h=h*10+m}if(h>255)return;o++}t[r]=t[r]*256+h,c++,(c===2||c===4)&&r++}if(c!==4)return;break}else if(E()===":"){if(o++,!E())return}else if(E())return;t[r++]=i}if(n!==null)for(y=r-n,r=7;r!==0&&y>0;)w=t[r],t[r--]=t[n+y-1],t[n+--y]=w;else if(r!==8)return;return t},fgr=function(e){for(var t=null,r=1,n=null,o=0,i=0;i<8;i++)e[i]!==0?(o>r&&(t=n,r=o),n=null,o=0):(n===null&&(n=i),++o);return o>r?n:t},BA=function(e){var t,r,n,o;if(typeof e=="number"){for(t=[],r=0;r<4;r++)Qmr(t,e%256),e=Ymr(e/256);return VA(t,".")}if(typeof e=="object"){for(t="",n=fgr(e),r=0;r<8;r++)o&&e[r]===0||(o&&(o=!1),n===r?(t+=r?":":"::",o=!0):(t+=Zmr(e[r],16),r<7&&(t+=":")));return"["+t+"]"}return e},LR={},MFe=Hte({},LR,{" ":1,"\"":1,"<":1,">":1,"`":1}),CFe=Hte({},MFe,{"#":1,"?":1,"{":1,"}":1}),Ate=Hte({},CFe,{"/":1,":":1,";":1,"=":1,"@":1,"[":1,"\\":1,"]":1,"^":1,"|":1}),Wy=function(e,t){var r=Umr(e,0);return r>32&&r<127&&!Fte(t,e)?e:encodeURIComponent(e)},PR={ftp:21,file:null,http:80,https:443,ws:80,wss:443},GA=function(e,t){var r;return e.length===2&&Sd(TFe,sf(e,0))&&((r=sf(e,1))===":"||!t&&r==="|")},mFe=function(e){var t;return e.length>1&&GA(HA(e,0,2))&&(e.length===2||(t=sf(e,2))==="/"||t==="\\"||t==="?"||t==="#")},dgr=function(e){return e==="."||qR(e)==="%2e"},hgr=function(e){return e=qR(e),e===".."||e==="%2e."||e===".%2e"||e==="%2e%2e"},Ote={},gFe={},Pte={},vFe={},yFe={},Dte={},_Fe={},bFe={},DR={},NR={},Nte={},Lte={},kte={},Rte={},xFe={},jte={},KE={},Vh={},wFe={},z_={},Og={},Wte=function(e,t,r){var n=Pg(e),o,i,a;if(t){if(i=this.parse(n),i)throw new Ute(i);this.searchParams=null}else{if(r!==void 0&&(o=new Wte(r,!0)),i=this.parse(n,null,o),i)throw new Ute(i);a=$mr(new Wmr),a.bindURL(this),this.searchParams=a}};Wte.prototype={type:"URL",parse:function(e,t,r){var n=this,o=t||Ote,i=0,a="",c=!1,h=!1,m=!1,y,w,E,A;for(e=Pg(e),t||(n.scheme="",n.username="",n.password="",n.host=null,n.port=null,n.path=[],n.query=null,n.fragment=null,n.cannotBeABaseURL=!1,e=Mte(e,sgr,""),e=Mte(e,lgr,"$1")),e=Mte(e,ugr,""),y=ZE(e);i<=y.length;){switch(w=y[i],o){case Ote:if(w&&Sd(TFe,w))a+=qR(w),o=gFe;else{if(t)return Cte;o=Pte;continue}break;case gFe:if(w&&(Sd(tgr,w)||w==="+"||w==="-"||w==="."))a+=qR(w);else if(w===":"){if(t&&(n.isSpecial()!==Fte(PR,a)||a==="file"&&(n.includesCredentials()||n.port!==null)||n.scheme==="file"&&!n.host))return;if(n.scheme=a,t){n.isSpecial()&&PR[n.scheme]===n.port&&(n.port=null);return}a="",n.scheme==="file"?o=Rte:n.isSpecial()&&r&&r.scheme===n.scheme?o=vFe:n.isSpecial()?o=bFe:y[i+1]==="/"?(o=yFe,i++):(n.cannotBeABaseURL=!0,XE(n.path,""),o=wFe)}else{if(t)return Cte;a="",o=Pte,i=0;continue}break;case Pte:if(!r||r.cannotBeABaseURL&&w!=="#")return Cte;if(r.cannotBeABaseURL&&w==="#"){n.scheme=r.scheme,n.path=Ed(r.path),n.query=r.query,n.fragment="",n.cannotBeABaseURL=!0,o=Og;break}o=r.scheme==="file"?Rte:Dte;continue;case vFe:if(w==="/"&&y[i+1]==="/")o=DR,i++;else{o=Dte;continue}break;case yFe:if(w==="/"){o=NR;break}else{o=Vh;continue}case Dte:if(n.scheme=r.scheme,w===of)n.username=r.username,n.password=r.password,n.host=r.host,n.port=r.port,n.path=Ed(r.path),n.query=r.query;else if(w==="/"||w==="\\"&&n.isSpecial())o=_Fe;else if(w==="?")n.username=r.username,n.password=r.password,n.host=r.host,n.port=r.port,n.path=Ed(r.path),n.query="",o=z_;else if(w==="#")n.username=r.username,n.password=r.password,n.host=r.host,n.port=r.port,n.path=Ed(r.path),n.query=r.query,n.fragment="",o=Og;else{n.username=r.username,n.password=r.password,n.host=r.host,n.port=r.port,n.path=Ed(r.path),n.path.length--,o=Vh;continue}break;case _Fe:if(n.isSpecial()&&(w==="/"||w==="\\"))o=DR;else if(w==="/")o=NR;else{n.username=r.username,n.password=r.password,n.host=r.host,n.port=r.port,o=Vh;continue}break;case bFe:if(o=DR,w!=="/"||sf(a,i+1)!=="/")continue;i++;break;case DR:if(w!=="/"&&w!=="\\"){o=NR;continue}break;case NR:if(w==="@"){c&&(a="%40"+a),c=!0,E=ZE(a);for(var P=0;P<E.length;P++){var j=E[P];if(j===":"&&!m){m=!0;continue}var D=Wy(j,Ate);m?n.password+=D:n.username+=D}a=""}else if(w===of||w==="/"||w==="?"||w==="#"||w==="\\"&&n.isSpecial()){if(c&&a==="")return egr;i-=ZE(a).length+1,a="",o=Nte}else a+=w;break;case Nte:case Lte:if(t&&n.scheme==="file"){o=jte;continue}else if(w===":"&&!h){if(a==="")return q_;if(A=n.parseHost(a),A)return A;if(a="",o=kte,t===Lte)return}else if(w===of||w==="/"||w==="?"||w==="#"||w==="\\"&&n.isSpecial()){if(n.isSpecial()&&a==="")return q_;if(t&&a===""&&(n.includesCredentials()||n.port!==null))return;if(A=n.parseHost(a),A)return A;if(a="",o=KE,t)return;continue}else w==="["?h=!0:w==="]"&&(h=!1),a+=w;break;case kte:if(Sd(Bte,w))a+=w;else if(w===of||w==="/"||w==="?"||w==="#"||w==="\\"&&n.isSpecial()||t){if(a!==""){var k=jR(a,10);if(k>65535)return hFe;n.port=n.isSpecial()&&k===PR[n.scheme]?null:k,a=""}if(t)return;o=KE;continue}else return hFe;break;case Rte:if(n.scheme="file",w==="/"||w==="\\")o=xFe;else if(r&&r.scheme==="file")switch(w){case of:n.host=r.host,n.path=Ed(r.path),n.query=r.query;break;case"?":n.host=r.host,n.path=Ed(r.path),n.query="",o=z_;break;case"#":n.host=r.host,n.path=Ed(r.path),n.query=r.query,n.fragment="",o=Og;break;default:mFe(VA(Ed(y,i),""))||(n.host=r.host,n.path=Ed(r.path),n.shortenPath()),o=Vh;continue}else{o=Vh;continue}break;case xFe:if(w==="/"||w==="\\"){o=jte;break}r&&r.scheme==="file"&&!mFe(VA(Ed(y,i),""))&&(GA(r.path[0],!0)?XE(n.path,r.path[0]):n.host=r.host),o=Vh;continue;case jte:if(w===of||w==="/"||w==="\\"||w==="?"||w==="#"){if(!t&&GA(a))o=Vh;else if(a===""){if(n.host="",t)return;o=KE}else{if(A=n.parseHost(a),A)return A;if(n.host==="localhost"&&(n.host=""),t)return;a="",o=KE}continue}else a+=w;break;case KE:if(n.isSpecial()){if(o=Vh,w!=="/"&&w!=="\\")continue}else if(!t&&w==="?")n.query="",o=z_;else if(!t&&w==="#")n.fragment="",o=Og;else if(w!==of&&(o=Vh,w!=="/"))continue;break;case Vh:if(w===of||w==="/"||w==="\\"&&n.isSpecial()||!t&&(w==="?"||w==="#")){if(hgr(a)?(n.shortenPath(),w!=="/"&&!(w==="\\"&&n.isSpecial())&&XE(n.path,"")):dgr(a)?w!=="/"&&!(w==="\\"&&n.isSpecial())&&XE(n.path,""):(n.scheme==="file"&&!n.path.length&&GA(a)&&(n.host&&(n.host=""),a=sf(a,0)+":"),XE(n.path,a)),a="",n.scheme==="file"&&(w===of||w==="?"||w==="#"))for(;n.path.length>1&&n.path[0]==="";)Xmr(n.path);w==="?"?(n.query="",o=z_):w==="#"&&(n.fragment="",o=Og)}else a+=Wy(w,CFe);break;case wFe:w==="?"?(n.query="",o=z_):w==="#"?(n.fragment="",o=Og):w!==of&&(n.path[0]+=Wy(w,LR));break;case z_:!t&&w==="#"?(n.fragment="",o=Og):w!==of&&(w==="'"&&n.isSpecial()?n.query+="%27":w==="#"?n.query+="%23":n.query+=Wy(w,LR));break;case Og:w!==of&&(n.fragment+=Wy(w,MFe));break}i++}},parseHost:function(e){var t,r,n;if(sf(e,0)==="["){if(sf(e,e.length-1)!=="]"||(t=pgr(HA(e,1,-1)),!t))return q_;this.host=t}else if(this.isSpecial()){if(e=Bmr(e),Sd(igr,e)||(t=cgr(e),t===null))return q_;this.host=t}else{if(Sd(agr,e))return q_;for(t="",r=ZE(e),n=0;n<r.length;n++)t+=Wy(r[n],LR);this.host=t}},cannotHaveUsernamePasswordPort:function(){return!this.host||this.cannotBeABaseURL||this.scheme==="file"},includesCredentials:function(){return this.username!==""||this.password!==""},isSpecial:function(){return Fte(PR,this.scheme)},shortenPath:function(){var e=this.path,t=e.length;t&&(this.scheme!=="file"||t!==1||!GA(e[0],!0))&&e.length--},serialize:function(){var e=this,t=e.scheme,r=e.username,n=e.password,o=e.host,i=e.port,a=e.path,c=e.query,h=e.fragment,m=t+":";return o!==null?(m+="//",e.includesCredentials()&&(m+=r+(n?":"+n:"")+"@"),m+=BA(o),i!==null&&(m+=":"+i)):t==="file"&&(m+="//"),m+=e.cannotBeABaseURL?a[0]:a.length?"/"+VA(a,"/"):"",c!==null&&(m+="?"+c),h!==null&&(m+="#"+h),m},setHref:function(e){var t=this.parse(e);if(t)throw new Ute(t);this.searchParams.update()},getOrigin:function(){var e=this.scheme,t=this.port;if(e==="blob")try{return new JE(e.path[0]).origin}catch(r){return"null"}return e==="file"||!this.isSpecial()?"null":e+"://"+BA(this.host)+(t!==null?":"+t:"")},getProtocol:function(){return this.scheme+":"},setProtocol:function(e){this.parse(Pg(e)+":",Ote)},getUsername:function(){return this.username},setUsername:function(e){var t=ZE(Pg(e));if(!this.cannotHaveUsernamePasswordPort()){this.username="";for(var r=0;r<t.length;r++)this.username+=Wy(t[r],Ate)}},getPassword:function(){return this.password},setPassword:function(e){var t=ZE(Pg(e));if(!this.cannotHaveUsernamePasswordPort()){this.password="";for(var r=0;r<t.length;r++)this.password+=Wy(t[r],Ate)}},getHost:function(){var e=this.host,t=this.port;return e===null?"":t===null?BA(e):BA(e)+":"+t},setHost:function(e){this.cannotBeABaseURL||this.parse(e,Nte)},getHostname:function(){var e=this.host;return e===null?"":BA(e)},setHostname:function(e){this.cannotBeABaseURL||this.parse(e,Lte)},getPort:function(){var e=this.port;return e===null?"":Pg(e)},setPort:function(e){this.cannotHaveUsernamePasswordPort()||(e=Pg(e),e===""?this.port=null:this.parse(e,kte))},getPathname:function(){var e=this.path;return this.cannotBeABaseURL?e[0]:e.length?"/"+VA(e,"/"):""},setPathname:function(e){this.cannotBeABaseURL||(this.path=[],this.parse(e,KE))},getSearch:function(){var e=this.query;return e?"?"+e:""},setSearch:function(e){e=Pg(e),e===""?this.query=null:(sf(e,0)==="?"&&(e=HA(e,1)),this.query="",this.parse(e,z_)),this.searchParams.update()},getSearchParams:function(){return this.searchParams.facade},getHash:function(){var e=this.fragment;return e?"#"+e:""},setHash:function(e){if(e=Pg(e),e===""){this.fragment=null;return}sf(e,0)==="#"&&(e=HA(e,1)),this.fragment="",this.parse(e,Og)},update:function(){this.query=this.searchParams.serialize()||null}};var JE=function(t){var r=Fmr(this,qu),n=Gmr(arguments.length,1)>1?arguments[1]:void 0,o=Hmr(r,new Wte(t,!1,n));Vte||(r.href=o.serialize(),r.origin=o.getOrigin(),r.protocol=o.getProtocol(),r.username=o.getUsername(),r.password=o.getPassword(),r.host=o.getHost(),r.hostname=o.getHostname(),r.port=o.getPort(),r.pathname=o.getPathname(),r.search=o.getSearch(),r.searchParams=o.getSearchParams(),r.hash=o.getHash())},qu=JE.prototype,af=function(e,t){return{get:function(){return RR(this)[e]()},set:t&&function(r){return RR(this)[t](r)},configurable:!0,enumerable:!0}};Vte&&(nf(qu,"href",af("serialize","setHref")),nf(qu,"origin",af("getOrigin")),nf(qu,"protocol",af("getProtocol","setProtocol")),nf(qu,"username",af("getUsername","setUsername")),nf(qu,"password",af("getPassword","setPassword")),nf(qu,"host",af("getHost","setHost")),nf(qu,"hostname",af("getHostname","setHostname")),nf(qu,"port",af("getPort","setPort")),nf(qu,"pathname",af("getPathname","setPathname")),nf(qu,"search",af("getSearch","setSearch")),nf(qu,"searchParams",af("getSearchParams")),nf(qu,"hash",af("getHash","setHash")));kR(qu,"toJSON",function(){return RR(this).serialize()},{enumerable:!0});kR(qu,"toString",function(){return RR(this).serialize()},{enumerable:!0});UA&&(qte=UA.createObjectURL,zte=UA.revokeObjectURL,qte&&kR(JE,"createObjectURL",fFe(qte,UA)),zte&&kR(JE,"revokeObjectURL",fFe(zte,UA)));var qte,zte;Vmr(JE,"URL");qmr({global:!0,constructor:!0,forced:!zmr,sham:!Vte},{URL:JE})});var OFe=N(()=>{"use strict";u();AFe()});var NFe=N(()=>{"use strict";u();var mgr=ce(),ggr=cn(),DFe=Gt(),vgr=hp(),PFe=Sn(),ygr=jA(),$te=ggr("URL"),_gr=ygr&&DFe(function(){$te.canParse()}),bgr=DFe(function(){return $te.canParse.length!==1});mgr({target:"URL",stat:!0,forced:!_gr||bgr},{canParse:function(t){var r=vgr(arguments.length,1),n=PFe(t),o=r<2||arguments[1]===void 0?void 0:PFe(arguments[1]);try{return!!new $te(n,o)}catch(i){return!1}}})});var kFe=N(()=>{"use strict";u();var xgr=ce(),wgr=cn(),Egr=hp(),LFe=Sn(),Sgr=jA(),Tgr=wgr("URL");xgr({target:"URL",stat:!0,forced:!Sgr},{parse:function(t){var r=Egr(arguments.length,1),n=LFe(t),o=r<2||arguments[1]===void 0?void 0:LFe(arguments[1]);try{return new Tgr(n,o)}catch(i){return null}}})});var RFe=N(()=>{"use strict";u();var Igr=ce(),Mgr=pr();Igr({target:"URL",proto:!0,enumerable:!0},{toJSON:function(){return Mgr(URL.prototype.toString,this)}})});var jFe=N(()=>{"use strict";u();Ite()});var UFe=N(()=>{"use strict";u();var Cgr=ei(),zR=Lt(),qFe=Sn(),Agr=hp(),FFe=URLSearchParams,FR=FFe.prototype,Ogr=zR(FR.append),zFe=zR(FR.delete),Pgr=zR(FR.forEach),Dgr=zR([].push),Yte=new FFe("a=1&a=2&b=3");Yte.delete("a",1);Yte.delete("b",void 0);Yte+""!="a=2"&&Cgr(FR,"delete",function(e){var t=arguments.length,r=t<2?void 0:arguments[1];if(t&&r===void 0)return zFe(this,e);var n=[];Pgr(this,function(w,E){Dgr(n,{key:E,value:w})}),Agr(t,1);for(var o=qFe(e),i=qFe(r),a=0,c=0,h=!1,m=n.length,y;a<m;)y=n[a++],h||y.key===o?(h=!0,zFe(this,y.key)):c++;for(;c<m;)y=n[c++],y.key===o&&y.value===i||Ogr(this,y.key,y.value)},{enumerable:!0,unsafe:!0})});var HFe=N(()=>{"use strict";u();var Ngr=ei(),VFe=Lt(),Lgr=Sn(),kgr=hp(),GFe=URLSearchParams,Zte=GFe.prototype,Rgr=VFe(Zte.getAll),jgr=VFe(Zte.has),BFe=new GFe("a=1");(BFe.has("a",2)||!BFe.has("a",void 0))&&Ngr(Zte,"has",function(t){var r=arguments.length,n=r<2?void 0:arguments[1];if(r&&n===void 0)return jgr(this,t);var o=Rgr(this,t);kgr(r,1);for(var i=Lgr(n),a=0;a<o.length;)if(o[a++]===i)return!0;return!1},{enumerable:!0,unsafe:!0})});var WFe=N(()=>{"use strict";u();var qgr=$r(),zgr=Lt(),Fgr=Bi(),Kte=URLSearchParams.prototype,Ugr=zgr(Kte.forEach);qgr&&!("size"in Kte)&&Fgr(Kte,"size",{get:function(){var t=0;return Ugr(this,function(){t++}),t},configurable:!0,enumerable:!0})});var YFe=N((OEn,$Fe)=>{"use strict";u();V1e();K1e();X1e();J1e();Q1e();e_e();t_e();r_e();n_e();o_e();i_e();a_e();s_e();l_e();u_e();R_e();U_e();i$();sbe();u$();mbe();_be();xbe();Sbe();Tbe();Mbe();Abe();h$();m$();Lbe();kbe();qbe();$be();Ybe();Kbe();Xbe();cC();yxe();wxe();Exe();Txe();Mxe();kxe();jxe();zxe();Bxe();Vxe();iwe();lwe();uwe();k$();j$();q$();dwe();hwe();mwe();F$();Wwe();oEe();cEe();fEe();aY();cY();dY();CY();AY();UEe();VEe();WEe();$Ee();nSe();oSe();uSe();dSe();mSe();xSe();SSe();CSe();RY();UY();WY();YY();KY();JY();oZ();aZ();sZ();h3();cZ();fZ();hZ();mZ();GW();aTe();_3();EZ();CTe();PTe();NTe();LTe();kTe();qTe();FTe();UTe();MZ();VTe();HTe();$Te();YTe();ZTe();KTe();QTe();r2e();n2e();o2e();m2e();g2e();y2e();b2e();x2e();w2e();E2e();S2e();O2e();q2e();V2e();Z2e();J2e();nIe();oIe();sIe();uIe();pIe();fIe();yIe();_Ie();bIe();EIe();SIe();TIe();MIe();$Z();YZ();OIe();DIe();LIe();RIe();qIe();zIe();FIe();UIe();WIe();$Ie();YIe();XIe();JIe();eMe();rMe();mCe();OK();PK();bCe();kK();RK();ECe();OCe();NCe();LCe();qCe();zCe();FCe();UCe();BCe();VCe();GCe();ZCe();XCe();JCe();mAe();JK();EAe();V3();AAe();PAe();LAe();qAe();FAe();aX();uX();pX();dX();mX();yX();bX();vOe();xOe();IOe();wX();OOe();EX();SX();GOe();PX();tPe();rPe();aPe();sPe();dPe();UX();yPe();EPe();IPe();CPe();YX();kPe();FPe();HPe();ZPe();KPe();XPe();JPe();QPe();e4e();t4e();r4e();n4e();o4e();i4e();a4e();s4e();L4e();k4e();R4e();j4e();q4e();z4e();F4e();U4e();B4e();uJ();H4e();$4e();Z4e();J4e();eDe();rDe();cJ();pJ();aDe();sDe();uDe();pDe();gDe();yDe();bDe();xDe();EDe();TDe();MDe();ADe();kDe();RDe();qDe();GDe();WDe();XDe();TJ();IJ();QDe();CJ();oNe();yk();bNe();xNe();SNe();XNe();JNe();QNe();e5e();t5e();r5e();o5e();i5e();s5e();l5e();p5e();f5e();m5e();g5e();v5e();y5e();T5e();I5e();M5e();C5e();A5e();B5e();$5e();iLe();uLe();pLe();fLe();hLe();mLe();xLe();wLe();SLe();TLe();ILe();MLe();CLe();PLe();DLe();zLe();HLe();$Le();YLe();ZLe();KLe();XLe();r3e();a3e();l3e();c3e();p3e();h3e();m3e();g3e();v3e();_3e();w3e();T3e();I3e();M3e();C3e();A3e();O3e();P3e();D3e();N3e();L3e();R3e();j3e();q3e();z3e();F3e();B3e();H3e();nke();pke();dke();mke();gke();yke();_ke();bke();Eke();Ske();Tke();Ike();Ake();Pke();Dke();Lke();Rke();jke();Fke();Uke();Bke();Gke();Wke();$ke();Jke();Qke();eRe();rRe();nRe();oRe();iRe();aRe();sRe();lRe();uRe();dRe();hRe();_Re();bRe();ERe();SRe();TRe();ARe();ORe();PRe();DRe();$Re();YRe();ZRe();KRe();XRe();n6e();i6e();s6e();p6e();d6e();m6e();y6e();b6e();w6e();E6e();S6e();T6e();I6e();P6e();D6e();L6e();k6e();j6e();q6e();z6e();F6e();U6e();B6e();V6e();G6e();H6e();$6e();Z6e();X6e();J6e();Q6e();eje();tje();rje();nje();oje();uje();hje();Lje();kje();Rje();jje();qje();zje();Fje();Uje();Vje();Gje();Xje();Jje();Qje();eqe();tqe();rqe();nqe();oqe();aqe();sqe();uqe();pqe();fqe();dqe();hqe();mqe();gqe();vqe();yqe();_qe();Pqe();Rqe();qqe();zqe();Uqe();Bqe();Gqe();Wqe();Yqe();Kqe();Xqe();tze();rze();ize();aze();lze();cze();vze();wze();Aze();Lze();Wze();Qze();t8e();c8e();p8e();d8e();S8e();P8e();OFe();NFe();kFe();RFe();jFe();UFe();HFe();WFe();$Fe.exports=TL()});var Xte=N((DEn,ZFe)=>{"use strict";u();ZFe.exports=YFe()});var g9e=N((ISn,m9e)=>{"use strict";u();var dbr="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED";m9e.exports=dbr});var b9e=N((CSn,_9e)=>{"use strict";u();var hbr=g9e();function v9e(){}function y9e(){}y9e.resetWarningCache=v9e;_9e.exports=function(){function e(n,o,i,a,c,h){if(h!==hbr){var m=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw m.name="Invariant Violation",m}}e.isRequired=e;function t(){return e}var r={array:e,bigint:e,bool:e,func:e,number:e,object:e,string:e,symbol:e,any:e,arrayOf:t,element:e,elementType:e,instanceOf:t,node:e,objectOf:t,oneOf:t,oneOfType:t,shape:t,exact:t,checkPropTypes:y9e,resetWarningCache:v9e};return r.PropTypes=r,r}});var It=N((DSn,x9e)=>{u();x9e.exports=b9e()();var OSn,PSn});var tUe=N(dO=>{"use strict";u();$N();var Vbr=De(),Q9e=60103;dO.Fragment=60107;typeof Symbol=="function"&&Symbol.for&&(one=Symbol.for,Q9e=one("react.element"),dO.Fragment=one("react.fragment"));var one,Gbr=Vbr.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,Hbr=Object.prototype.hasOwnProperty,Wbr={key:!0,ref:!0,__self:!0,__source:!0};function eUe(e,t,r){var n,o={},i=null,a=null;r!==void 0&&(i=""+r),t.key!==void 0&&(i=""+t.key),t.ref!==void 0&&(a=t.ref);for(n in t)Hbr.call(t,n)&&!Wbr.hasOwnProperty(n)&&(o[n]=t[n]);if(e&&e.defaultProps)for(n in t=e.defaultProps,t)o[n]===void 0&&(o[n]=t[n]);return{$$typeof:Q9e,type:e,key:i,ref:a,props:o,_owner:Gbr.current}}dO.jsx=eUe;dO.jsxs=eUe});var nUe=N((y2n,rUe)=>{"use strict";u();rUe.exports=tUe()});var wO=N((mAn,qBe)=>{"use strict";u();qBe.exports=function e(t,r){if(t===r)return!0;if(t&&r&&typeof t=="object"&&typeof r=="object"){if(t.constructor!==r.constructor)return!1;var n,o,i;if(Array.isArray(t)){if(n=t.length,n!=r.length)return!1;for(o=n;o--!==0;)if(!e(t[o],r[o]))return!1;return!0}if(t.constructor===RegExp)return t.source===r.source&&t.flags===r.flags;if(t.valueOf!==Object.prototype.valueOf)return t.valueOf()===r.valueOf();if(t.toString!==Object.prototype.toString)return t.toString()===r.toString();if(i=Object.keys(t),n=i.length,n!==Object.keys(r).length)return!1;for(o=n;o--!==0;)if(!Object.prototype.hasOwnProperty.call(r,i[o]))return!1;for(o=n;o--!==0;){var a=i[o];if(!e(t[a],r[a]))return!1}return!0}return t!==t&&r!==r}});var jO=N((Jne,Qne)=>{u();(function(e,t){typeof Jne=="object"&&typeof Qne!="undefined"?Qne.exports=t():typeof define=="function"&&define.amd?define(t):(e=typeof globalThis!="undefined"?globalThis:e||self,e.maplibregl=t())})(Jne,function(){"use strict";var e={},t={};function r(o,i,a){if(t[o]=a,o==="index"){var c="var sharedModule = {}; ("+t.shared+")(sharedModule); ("+t.worker+")(sharedModule);",h={};return t.shared(h),t.index(e,h),typeof window!="undefined"&&e.setWorkerUrl(window.URL.createObjectURL(new Blob([c],{type:"text/javascript"}))),e}}r("shared",["exports"],function(o){"use strict";function i(f,l,p,g){return new(p||(p=Promise))(function(b,I){function M(F){try{L(g.next(F))}catch(U){I(U)}}function O(F){try{L(g.throw(F))}catch(U){I(U)}}function L(F){var U;F.done?b(F.value):(U=F.value,U instanceof p?U:new p(function(W){W(U)})).then(M,O)}L((g=g.apply(f,l||[])).next())})}function a(f,l){this.x=f,this.y=l}function c(f){return f&&f.__esModule&&Object.prototype.hasOwnProperty.call(f,"default")?f.default:f}var h,m;typeof SuppressedError=="function"&&SuppressedError,a.prototype={clone(){return new a(this.x,this.y)},add(f){return this.clone()._add(f)},sub(f){return this.clone()._sub(f)},multByPoint(f){return this.clone()._multByPoint(f)},divByPoint(f){return this.clone()._divByPoint(f)},mult(f){return this.clone()._mult(f)},div(f){return this.clone()._div(f)},rotate(f){return this.clone()._rotate(f)},rotateAround(f,l){return this.clone()._rotateAround(f,l)},matMult(f){return this.clone()._matMult(f)},unit(){return this.clone()._unit()},perp(){return this.clone()._perp()},round(){return this.clone()._round()},mag(){return Math.sqrt(this.x*this.x+this.y*this.y)},equals(f){return this.x===f.x&&this.y===f.y},dist(f){return Math.sqrt(this.distSqr(f))},distSqr(f){let l=f.x-this.x,p=f.y-this.y;return l*l+p*p},angle(){return Math.atan2(this.y,this.x)},angleTo(f){return Math.atan2(this.y-f.y,this.x-f.x)},angleWith(f){return this.angleWithSep(f.x,f.y)},angleWithSep(f,l){return Math.atan2(this.x*l-this.y*f,this.x*f+this.y*l)},_matMult(f){let l=f[2]*this.x+f[3]*this.y;return this.x=f[0]*this.x+f[1]*this.y,this.y=l,this},_add(f){return this.x+=f.x,this.y+=f.y,this},_sub(f){return this.x-=f.x,this.y-=f.y,this},_mult(f){return this.x*=f,this.y*=f,this},_div(f){return this.x/=f,this.y/=f,this},_multByPoint(f){return this.x*=f.x,this.y*=f.y,this},_divByPoint(f){return this.x/=f.x,this.y/=f.y,this},_unit(){return this._div(this.mag()),this},_perp(){let f=this.y;return this.y=this.x,this.x=-f,this},_rotate(f){let l=Math.cos(f),p=Math.sin(f),g=p*this.x+l*this.y;return this.x=l*this.x-p*this.y,this.y=g,this},_rotateAround(f,l){let p=Math.cos(f),g=Math.sin(f),b=l.y+g*(this.x-l.x)+p*(this.y-l.y);return this.x=l.x+p*(this.x-l.x)-g*(this.y-l.y),this.y=b,this},_round(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this},constructor:a},a.convert=function(f){if(f instanceof a)return f;if(Array.isArray(f))return new a(+f[0],+f[1]);if(f.x!==void 0&&f.y!==void 0)return new a(+f.x,+f.y);throw new Error("Expected [x, y] or {x, y} point format")};var y=function(){if(m)return h;function f(l,p,g,b){this.cx=3*l,this.bx=3*(g-l)-this.cx,this.ax=1-this.cx-this.bx,this.cy=3*p,this.by=3*(b-p)-this.cy,this.ay=1-this.cy-this.by,this.p1x=l,this.p1y=p,this.p2x=g,this.p2y=b}return m=1,h=f,f.prototype={sampleCurveX:function(l){return((this.ax*l+this.bx)*l+this.cx)*l},sampleCurveY:function(l){return((this.ay*l+this.by)*l+this.cy)*l},sampleCurveDerivativeX:function(l){return(3*this.ax*l+2*this.bx)*l+this.cx},solveCurveX:function(l,p){if(p===void 0&&(p=1e-6),l<0)return 0;if(l>1)return 1;for(var g=l,b=0;b<8;b++){var I=this.sampleCurveX(g)-l;if(Math.abs(I)<p)return g;var M=this.sampleCurveDerivativeX(g);if(Math.abs(M)<1e-6)break;g-=I/M}var O=0,L=1;for(g=l,b=0;b<20&&(I=this.sampleCurveX(g),!(Math.abs(I-l)<p));b++)l>I?O=g:L=g,g=.5*(L-O)+O;return g},solve:function(l,p){return this.sampleCurveY(this.solveCurveX(l,p))}},h}(),w=c(y);let E,A;function P(){return E==null&&(E=typeof OffscreenCanvas!="undefined"&&new OffscreenCanvas(1,1).getContext("2d")&&typeof createImageBitmap=="function"),E}function j(){if(A==null&&(A=!1,P())){let l=new OffscreenCanvas(5,5).getContext("2d",{willReadFrequently:!0});if(l){for(let g=0;g<5*5;g++){let b=4*g;l.fillStyle=`rgb(${b},${b+1},${b+2})`,l.fillRect(g%5,Math.floor(g/5),1,1)}let p=l.getImageData(0,0,5,5).data;for(let g=0;g<5*5*4;g++)if(g%4!=3&&p[g]!==g){A=!0;break}}}return A||!1}var D=1e-6,k=typeof Float32Array!="undefined"?Float32Array:Array;function z(){var f=new k(9);return k!=Float32Array&&(f[1]=0,f[2]=0,f[3]=0,f[5]=0,f[6]=0,f[7]=0),f[0]=1,f[4]=1,f[8]=1,f}function V(f){return f[0]=1,f[1]=0,f[2]=0,f[3]=0,f[4]=0,f[5]=1,f[6]=0,f[7]=0,f[8]=0,f[9]=0,f[10]=1,f[11]=0,f[12]=0,f[13]=0,f[14]=0,f[15]=1,f}function G(){var f=new k(3);return k!=Float32Array&&(f[0]=0,f[1]=0,f[2]=0),f}function K(f){var l=f[0],p=f[1],g=f[2];return Math.sqrt(l*l+p*p+g*g)}function Z(f,l,p){var g=new k(3);return g[0]=f,g[1]=l,g[2]=p,g}function te(f,l,p){return f[0]=l[0]+p[0],f[1]=l[1]+p[1],f[2]=l[2]+p[2],f}function se(f,l,p){return f[0]=l[0]*p,f[1]=l[1]*p,f[2]=l[2]*p,f}function le(f,l,p){var g=l[0],b=l[1],I=l[2],M=p[0],O=p[1],L=p[2];return f[0]=b*L-I*O,f[1]=I*M-g*L,f[2]=g*O-b*M,f}var pe,me=K;function _e(f,l,p){var g=l[0],b=l[1],I=l[2],M=l[3];return f[0]=p[0]*g+p[4]*b+p[8]*I+p[12]*M,f[1]=p[1]*g+p[5]*b+p[9]*I+p[13]*M,f[2]=p[2]*g+p[6]*b+p[10]*I+p[14]*M,f[3]=p[3]*g+p[7]*b+p[11]*I+p[15]*M,f}function de(){var f=new k(4);return k!=Float32Array&&(f[0]=0,f[1]=0,f[2]=0),f[3]=1,f}function Ce(f,l,p,g){var b=arguments.length>4&&arguments[4]!==void 0?arguments[4]:"zyx",I=Math.PI/360;l*=I,g*=I,p*=I;var M=Math.sin(l),O=Math.cos(l),L=Math.sin(p),F=Math.cos(p),U=Math.sin(g),W=Math.cos(g);switch(b){case"xyz":f[0]=M*F*W+O*L*U,f[1]=O*L*W-M*F*U,f[2]=O*F*U+M*L*W,f[3]=O*F*W-M*L*U;break;case"xzy":f[0]=M*F*W-O*L*U,f[1]=O*L*W-M*F*U,f[2]=O*F*U+M*L*W,f[3]=O*F*W+M*L*U;break;case"yxz":f[0]=M*F*W+O*L*U,f[1]=O*L*W-M*F*U,f[2]=O*F*U-M*L*W,f[3]=O*F*W+M*L*U;break;case"yzx":f[0]=M*F*W+O*L*U,f[1]=O*L*W+M*F*U,f[2]=O*F*U-M*L*W,f[3]=O*F*W-M*L*U;break;case"zxy":f[0]=M*F*W-O*L*U,f[1]=O*L*W+M*F*U,f[2]=O*F*U+M*L*W,f[3]=O*F*W-M*L*U;break;case"zyx":f[0]=M*F*W-O*L*U,f[1]=O*L*W+M*F*U,f[2]=O*F*U-M*L*W,f[3]=O*F*W+M*L*U;break;default:throw new Error("Unknown angle order "+b)}return f}function Ye(){var f=new k(2);return k!=Float32Array&&(f[0]=0,f[1]=0),f}function rt(f,l){var p=new k(2);return p[0]=f,p[1]=l,p}G(),pe=new k(4),k!=Float32Array&&(pe[0]=0,pe[1]=0,pe[2]=0,pe[3]=0),G(),Z(1,0,0),Z(0,1,0),de(),de(),z(),Ye();let ct=8192;function qe(f,l,p){return l*(ct/(f.tileSize*Math.pow(2,p-f.tileID.overscaledZ)))}function lt(f,l){return(f%l+l)%l}function bt(f,l,p){return f*(1-p)+l*p}function Tt(f){if(f<=0)return 0;if(f>=1)return 1;let l=f*f,p=l*f;return 4*(f<.5?p:3*(f-l)+p-.75)}function et(f,l,p,g){let b=new w(f,l,p,g);return I=>b.solve(I)}let pt=et(.25,.1,.25,1);function ot(f,l,p){return Math.min(p,Math.max(l,f))}function We(f,l,p){let g=p-l,b=((f-l)%g+g)%g+l;return b===l?p:b}function Ne(f,...l){for(let p of l)for(let g in p)f[g]=p[g];return f}let Ke=1;function Ge(f,l,p){let g={};for(let b in f)g[b]=l.call(this,f[b],b,f);return g}function ft(f,l,p){let g={};for(let b in f)l.call(this,f[b],b,f)&&(g[b]=f[b]);return g}function mt(f){return Array.isArray(f)?f.map(mt):typeof f=="object"&&f?Ge(f,mt):f}let Ot={};function At(f){Ot[f]||(typeof console!="undefined"&&console.warn(f),Ot[f]=!0)}function Mt(f,l,p){return(p.y-f.y)*(l.x-f.x)>(l.y-f.y)*(p.x-f.x)}function Yt(f){return typeof WorkerGlobalScope!="undefined"&&f!==void 0&&f instanceof WorkerGlobalScope}let qt=null;function Ut(f){return typeof ImageBitmap!="undefined"&&f instanceof ImageBitmap}let sr="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAAC0lEQVQYV2NgAAIAAAUAAarVyFEAAAAASUVORK5CYII=";function jr(f,l,p,g,b){return i(this,void 0,void 0,function*(){if(typeof VideoFrame=="undefined")throw new Error("VideoFrame not supported");let I=new VideoFrame(f,{timestamp:0});try{let M=I==null?void 0:I.format;if(!M||!M.startsWith("BGR")&&!M.startsWith("RGB"))throw new Error(`Unrecognized format ${M}`);let O=M.startsWith("BGR"),L=new Uint8ClampedArray(g*b*4);if(yield I.copyTo(L,function(F,U,W,X,re){let ne=4*Math.max(-U,0),ae=(Math.max(0,W)-W)*X*4+ne,he=4*X,Ie=Math.max(0,U),Xe=Math.max(0,W);return{rect:{x:Ie,y:Xe,width:Math.min(F.width,U+X)-Ie,height:Math.min(F.height,W+re)-Xe},layout:[{offset:ae,stride:he}]}}(f,l,p,g,b)),O)for(let F=0;F<L.length;F+=4){let U=L[F];L[F]=L[F+2],L[F+2]=U}return L}finally{I.close()}})}let Pr,br;function Dr(f,l,p,g){return f.addEventListener(l,p,g),{unsubscribe:()=>{f.removeEventListener(l,p,g)}}}function ke(f){return f*Math.PI/180}function Je(f){return f/Math.PI*180}let tt={touchstart:!0,touchmove:!0,touchmoveWindow:!0,touchend:!0,touchcancel:!0},Ft={dblclick:!0,click:!0,mouseover:!0,mouseout:!0,mousedown:!0,mousemove:!0,mousemoveWindow:!0,mouseup:!0,mouseupWindow:!0,contextmenu:!0,wheel:!0},Wt="AbortError";function xe(){return new Error(Wt)}let J={MAX_PARALLEL_IMAGE_REQUESTS:16,MAX_PARALLEL_IMAGE_REQUESTS_PER_FRAME:8,MAX_TILE_CACHE_ZOOM_LEVELS:5,REGISTERED_PROTOCOLS:{},WORKER_URL:""};function oe(f){return J.REGISTERED_PROTOCOLS[f.substring(0,f.indexOf("://"))]}let ue="global-dispatcher";class we extends Error{constructor(l,p,g,b){super(`AJAXError: ${p} (${l}): ${g}`),this.status=l,this.statusText=p,this.url=g,this.body=b}}let Fe=()=>Yt(self)?self.worker&&self.worker.referrer:(window.location.protocol==="blob:"?window.parent:window).location.href,$e=function(f,l){if(/:\/\//.test(f.url)&&!/^https?:|^file:/.test(f.url)){let g=oe(f.url);if(g)return g(f,l);if(Yt(self)&&self.worker&&self.worker.actor)return self.worker.actor.sendAsync({type:"GR",data:f,targetMapId:ue},l)}if(!(/^file:/.test(p=f.url)||/^file:/.test(Fe())&&!/^\w+:/.test(p))){if(fetch&&Request&&AbortController&&Object.prototype.hasOwnProperty.call(Request.prototype,"signal"))return function(g,b){return i(this,void 0,void 0,function*(){let I=new Request(g.url,{method:g.method||"GET",body:g.body,credentials:g.credentials,headers:g.headers,cache:g.cache,referrer:Fe(),signal:b.signal}),M,O;g.type!=="json"||I.headers.has("Accept")||I.headers.set("Accept","application/json");try{M=yield fetch(I)}catch(F){throw new we(0,F.message,g.url,new Blob())}if(!M.ok){let F=yield M.blob();throw new we(M.status,M.statusText,g.url,F)}O=g.type==="arrayBuffer"||g.type==="image"?M.arrayBuffer():g.type==="json"?M.json():M.text();let L=yield O;if(b.signal.aborted)throw xe();return{data:L,cacheControl:M.headers.get("Cache-Control"),expires:M.headers.get("Expires")}})}(f,l);if(Yt(self)&&self.worker&&self.worker.actor)return self.worker.actor.sendAsync({type:"GR",data:f,mustQueue:!0,targetMapId:ue},l)}var p;return function(g,b){return new Promise((I,M)=>{var O;let L=new XMLHttpRequest;L.open(g.method||"GET",g.url,!0),g.type!=="arrayBuffer"&&g.type!=="image"||(L.responseType="arraybuffer");for(let F in g.headers)L.setRequestHeader(F,g.headers[F]);g.type==="json"&&(L.responseType="text",!((O=g.headers)===null||O===void 0)&&O.Accept||L.setRequestHeader("Accept","application/json")),L.withCredentials=g.credentials==="include",L.onerror=()=>{M(new Error(L.statusText))},L.onload=()=>{if(!b.signal.aborted)if((L.status>=200&&L.status<300||L.status===0)&&L.response!==null){let F=L.response;if(g.type==="json")try{F=JSON.parse(L.response)}catch(U){return void M(U)}I({data:F,cacheControl:L.getResponseHeader("Cache-Control"),expires:L.getResponseHeader("Expires")})}else{let F=new Blob([L.response],{type:L.getResponseHeader("Content-Type")});M(new we(L.status,L.statusText,g.url,F))}},b.signal.addEventListener("abort",()=>{L.abort(),M(xe())}),L.send(g.body)})}(f,l)};function nt(f){if(!f||f.indexOf("://")<=0||f.indexOf("data:image/")===0||f.indexOf("blob:")===0)return!0;let l=new URL(f),p=window.location;return l.protocol===p.protocol&&l.host===p.host}function Ze(f,l,p){p[f]&&p[f].indexOf(l)!==-1||(p[f]=p[f]||[],p[f].push(l))}function be(f,l,p){if(p&&p[f]){let g=p[f].indexOf(l);g!==-1&&p[f].splice(g,1)}}class Ee{constructor(l,p={}){Ne(this,p),this.type=l}}class Be extends Ee{constructor(l,p={}){super("error",Ne({error:l},p))}}class gt{on(l,p){return this._listeners=this._listeners||{},Ze(l,p,this._listeners),{unsubscribe:()=>{this.off(l,p)}}}off(l,p){return be(l,p,this._listeners),be(l,p,this._oneTimeListeners),this}once(l,p){return p?(this._oneTimeListeners=this._oneTimeListeners||{},Ze(l,p,this._oneTimeListeners),this):new Promise(g=>this.once(l,g))}fire(l,p){typeof l=="string"&&(l=new Ee(l,p||{}));let g=l.type;if(this.listens(g)){l.target=this;let b=this._listeners&&this._listeners[g]?this._listeners[g].slice():[];for(let O of b)O.call(this,l);let I=this._oneTimeListeners&&this._oneTimeListeners[g]?this._oneTimeListeners[g].slice():[];for(let O of I)be(g,O,this._oneTimeListeners),O.call(this,l);let M=this._eventedParent;M&&(Ne(l,typeof this._eventedParentData=="function"?this._eventedParentData():this._eventedParentData),M.fire(l))}else l instanceof Be&&console.error(l.error);return this}listens(l){return this._listeners&&this._listeners[l]&&this._listeners[l].length>0||this._oneTimeListeners&&this._oneTimeListeners[l]&&this._oneTimeListeners[l].length>0||this._eventedParent&&this._eventedParent.listens(l)}setEventedParent(l,p){return this._eventedParent=l,this._eventedParentData=p,this}}var Ae={$version:8,$root:{version:{required:!0,type:"enum",values:[8]},name:{type:"string"},metadata:{type:"*"},center:{type:"array",value:"number"},centerAltitude:{type:"number"},zoom:{type:"number"},bearing:{type:"number",default:0,period:360,units:"degrees"},pitch:{type:"number",default:0,units:"degrees"},roll:{type:"number",default:0,units:"degrees"},state:{type:"state",default:{}},light:{type:"light"},sky:{type:"sky"},projection:{type:"projection"},terrain:{type:"terrain"},sources:{required:!0,type:"sources"},sprite:{type:"sprite"},glyphs:{type:"string"},transition:{type:"transition"},layers:{required:!0,type:"array",value:"layer"}},sources:{"*":{type:"source"}},source:["source_vector","source_raster","source_raster_dem","source_geojson","source_video","source_image"],source_vector:{type:{required:!0,type:"enum",values:{vector:{}}},url:{type:"string"},tiles:{type:"array",value:"string"},bounds:{type:"array",value:"number",length:4,default:[-180,-85.051129,180,85.051129]},scheme:{type:"enum",values:{xyz:{},tms:{}},default:"xyz"},minzoom:{type:"number",default:0},maxzoom:{type:"number",default:22},attribution:{type:"string"},promoteId:{type:"promoteId"},volatile:{type:"boolean",default:!1},"*":{type:"*"}},source_raster:{type:{required:!0,type:"enum",values:{raster:{}}},url:{type:"string"},tiles:{type:"array",value:"string"},bounds:{type:"array",value:"number",length:4,default:[-180,-85.051129,180,85.051129]},minzoom:{type:"number",default:0},maxzoom:{type:"number",default:22},tileSize:{type:"number",default:512,units:"pixels"},scheme:{type:"enum",values:{xyz:{},tms:{}},default:"xyz"},attribution:{type:"string"},volatile:{type:"boolean",default:!1},"*":{type:"*"}},source_raster_dem:{type:{required:!0,type:"enum",values:{"raster-dem":{}}},url:{type:"string"},tiles:{type:"array",value:"string"},bounds:{type:"array",value:"number",length:4,default:[-180,-85.051129,180,85.051129]},minzoom:{type:"number",default:0},maxzoom:{type:"number",default:22},tileSize:{type:"number",default:512,units:"pixels"},attribution:{type:"string"},encoding:{type:"enum",values:{terrarium:{},mapbox:{},custom:{}},default:"mapbox"},redFactor:{type:"number",default:1},blueFactor:{type:"number",default:1},greenFactor:{type:"number",default:1},baseShift:{type:"number",default:0},volatile:{type:"boolean",default:!1},"*":{type:"*"}},source_geojson:{type:{required:!0,type:"enum",values:{geojson:{}}},data:{required:!0,type:"*"},maxzoom:{type:"number",default:18},attribution:{type:"string"},buffer:{type:"number",default:128,maximum:512,minimum:0},filter:{type:"*"},tolerance:{type:"number",default:.375},cluster:{type:"boolean",default:!1},clusterRadius:{type:"number",default:50,minimum:0},clusterMaxZoom:{type:"number"},clusterMinPoints:{type:"number"},clusterProperties:{type:"*"},lineMetrics:{type:"boolean",default:!1},generateId:{type:"boolean",default:!1},promoteId:{type:"promoteId"}},source_video:{type:{required:!0,type:"enum",values:{video:{}}},urls:{required:!0,type:"array",value:"string"},coordinates:{required:!0,type:"array",length:4,value:{type:"array",length:2,value:"number"}}},source_image:{type:{required:!0,type:"enum",values:{image:{}}},url:{required:!0,type:"string"},coordinates:{required:!0,type:"array",length:4,value:{type:"array",length:2,value:"number"}}},layer:{id:{type:"string",required:!0},type:{type:"enum",values:{fill:{},line:{},symbol:{},circle:{},heatmap:{},"fill-extrusion":{},raster:{},hillshade:{},"color-relief":{},background:{}},required:!0},metadata:{type:"*"},source:{type:"string"},"source-layer":{type:"string"},minzoom:{type:"number",minimum:0,maximum:24},maxzoom:{type:"number",minimum:0,maximum:24},filter:{type:"filter"},layout:{type:"layout"},paint:{type:"paint"}},layout:["layout_fill","layout_line","layout_circle","layout_heatmap","layout_fill-extrusion","layout_symbol","layout_raster","layout_hillshade","layout_color-relief","layout_background"],layout_background:{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_fill:{"fill-sort-key":{type:"number",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_circle:{"circle-sort-key":{type:"number",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_heatmap:{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},"layout_fill-extrusion":{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_line:{"line-cap":{type:"enum",values:{butt:{},round:{},square:{}},default:"butt",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"line-join":{type:"enum",values:{bevel:{},round:{},miter:{}},default:"miter",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"line-miter-limit":{type:"number",default:2,requires:[{"line-join":"miter"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"line-round-limit":{type:"number",default:1.05,requires:[{"line-join":"round"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"line-sort-key":{type:"number",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_symbol:{"symbol-placement":{type:"enum",values:{point:{},line:{},"line-center":{}},default:"point",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"symbol-spacing":{type:"number",default:250,minimum:1,units:"pixels",requires:[{"symbol-placement":"line"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"symbol-avoid-edges":{type:"boolean",default:!1,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"symbol-sort-key":{type:"number",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"symbol-z-order":{type:"enum",values:{auto:{},"viewport-y":{},source:{}},default:"auto",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-allow-overlap":{type:"boolean",default:!1,requires:["icon-image",{"!":"icon-overlap"}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-overlap":{type:"enum",values:{never:{},always:{},cooperative:{}},requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-ignore-placement":{type:"boolean",default:!1,requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-optional":{type:"boolean",default:!1,requires:["icon-image","text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-rotation-alignment":{type:"enum",values:{map:{},viewport:{},auto:{}},default:"auto",requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-size":{type:"number",default:1,minimum:0,units:"factor of the original icon size",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-text-fit":{type:"enum",values:{none:{},width:{},height:{},both:{}},default:"none",requires:["icon-image","text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-text-fit-padding":{type:"array",value:"number",length:4,default:[0,0,0,0],units:"pixels",requires:["icon-image","text-field",{"icon-text-fit":["both","width","height"]}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"icon-image":{type:"resolvedImage",tokens:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-rotate":{type:"number",default:0,period:360,units:"degrees",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-padding":{type:"padding",default:[2],units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-keep-upright":{type:"boolean",default:!1,requires:["icon-image",{"icon-rotation-alignment":"map"},{"symbol-placement":["line","line-center"]}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-offset":{type:"array",value:"number",length:2,default:[0,0],requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-anchor":{type:"enum",values:{center:{},left:{},right:{},top:{},bottom:{},"top-left":{},"top-right":{},"bottom-left":{},"bottom-right":{}},default:"center",requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-pitch-alignment":{type:"enum",values:{map:{},viewport:{},auto:{}},default:"auto",requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-pitch-alignment":{type:"enum",values:{map:{},viewport:{},auto:{}},default:"auto",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-rotation-alignment":{type:"enum",values:{map:{},viewport:{},"viewport-glyph":{},auto:{}},default:"auto",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-field":{type:"formatted",default:"",tokens:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-font":{type:"array",value:"string",default:["Open Sans Regular","Arial Unicode MS Regular"],requires:["text-field"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-size":{type:"number",default:16,minimum:0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-max-width":{type:"number",default:10,minimum:0,units:"ems",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-line-height":{type:"number",default:1.2,units:"ems",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-letter-spacing":{type:"number",default:0,units:"ems",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-justify":{type:"enum",values:{auto:{},left:{},center:{},right:{}},default:"center",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-radial-offset":{type:"number",units:"ems",default:0,requires:["text-field"],"property-type":"data-driven",expression:{interpolated:!0,parameters:["zoom","feature"]}},"text-variable-anchor":{type:"array",value:"enum",values:{center:{},left:{},right:{},top:{},bottom:{},"top-left":{},"top-right":{},"bottom-left":{},"bottom-right":{}},requires:["text-field",{"symbol-placement":["point"]}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-variable-anchor-offset":{type:"variableAnchorOffsetCollection",requires:["text-field",{"symbol-placement":["point"]}],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-anchor":{type:"enum",values:{center:{},left:{},right:{},top:{},bottom:{},"top-left":{},"top-right":{},"bottom-left":{},"bottom-right":{}},default:"center",requires:["text-field",{"!":"text-variable-anchor"}],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-max-angle":{type:"number",default:45,units:"degrees",requires:["text-field",{"symbol-placement":["line","line-center"]}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-writing-mode":{type:"array",value:"enum",values:{horizontal:{},vertical:{}},requires:["text-field",{"symbol-placement":["point"]}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-rotate":{type:"number",default:0,period:360,units:"degrees",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-padding":{type:"number",default:2,minimum:0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-keep-upright":{type:"boolean",default:!0,requires:["text-field",{"text-rotation-alignment":"map"},{"symbol-placement":["line","line-center"]}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-transform":{type:"enum",values:{none:{},uppercase:{},lowercase:{}},default:"none",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-offset":{type:"array",value:"number",units:"ems",length:2,default:[0,0],requires:["text-field",{"!":"text-radial-offset"}],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-allow-overlap":{type:"boolean",default:!1,requires:["text-field",{"!":"text-overlap"}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-overlap":{type:"enum",values:{never:{},always:{},cooperative:{}},requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-ignore-placement":{type:"boolean",default:!1,requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-optional":{type:"boolean",default:!1,requires:["text-field","icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_raster:{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_hillshade:{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},"layout_color-relief":{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},filter:{type:"array",value:"*"},filter_operator:{type:"enum",values:{"==":{},"!=":{},">":{},">=":{},"<":{},"<=":{},in:{},"!in":{},all:{},any:{},none:{},has:{},"!has":{}}},geometry_type:{type:"enum",values:{Point:{},LineString:{},Polygon:{}}},function:{expression:{type:"expression"},stops:{type:"array",value:"function_stop"},base:{type:"number",default:1,minimum:0},property:{type:"string",default:"$zoom"},type:{type:"enum",values:{identity:{},exponential:{},interval:{},categorical:{}},default:"exponential"},colorSpace:{type:"enum",values:{rgb:{},lab:{},hcl:{}},default:"rgb"},default:{type:"*",required:!1}},function_stop:{type:"array",minimum:0,maximum:24,value:["number","color"],length:2},expression:{type:"array",value:"*",minimum:1},light:{anchor:{type:"enum",default:"viewport",values:{map:{},viewport:{}},"property-type":"data-constant",transition:!1,expression:{interpolated:!1,parameters:["zoom"]}},position:{type:"array",default:[1.15,210,30],length:3,value:"number","property-type":"data-constant",transition:!0,expression:{interpolated:!0,parameters:["zoom"]}},color:{type:"color","property-type":"data-constant",default:"#ffffff",expression:{interpolated:!0,parameters:["zoom"]},transition:!0},intensity:{type:"number","property-type":"data-constant",default:.5,minimum:0,maximum:1,expression:{interpolated:!0,parameters:["zoom"]},transition:!0}},sky:{"sky-color":{type:"color","property-type":"data-constant",default:"#88C6FC",expression:{interpolated:!0,parameters:["zoom"]},transition:!0},"horizon-color":{type:"color","property-type":"data-constant",default:"#ffffff",expression:{interpolated:!0,parameters:["zoom"]},transition:!0},"fog-color":{type:"color","property-type":"data-constant",default:"#ffffff",expression:{interpolated:!0,parameters:["zoom"]},transition:!0},"fog-ground-blend":{type:"number","property-type":"data-constant",default:.5,minimum:0,maximum:1,expression:{interpolated:!0,parameters:["zoom"]},transition:!0},"horizon-fog-blend":{type:"number","property-type":"data-constant",default:.8,minimum:0,maximum:1,expression:{interpolated:!0,parameters:["zoom"]},transition:!0},"sky-horizon-blend":{type:"number","property-type":"data-constant",default:.8,minimum:0,maximum:1,expression:{interpolated:!0,parameters:["zoom"]},transition:!0},"atmosphere-blend":{type:"number","property-type":"data-constant",default:.8,minimum:0,maximum:1,expression:{interpolated:!0,parameters:["zoom"]},transition:!0}},terrain:{source:{type:"string",required:!0},exaggeration:{type:"number",minimum:0,default:1}},projection:{type:{type:"projectionDefinition",default:"mercator","property-type":"data-constant",transition:!1,expression:{interpolated:!0,parameters:["zoom"]}}},paint:["paint_fill","paint_line","paint_circle","paint_heatmap","paint_fill-extrusion","paint_symbol","paint_raster","paint_hillshade","paint_color-relief","paint_background"],paint_fill:{"fill-antialias":{type:"boolean",default:!0,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"fill-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"fill-pattern"}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-outline-color":{type:"color",transition:!0,requires:[{"!":"fill-pattern"},{"fill-antialias":!0}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"fill-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["fill-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"fill-pattern":{type:"resolvedImage",transition:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"cross-faded-data-driven"}},"paint_fill-extrusion":{"fill-extrusion-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"fill-extrusion-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"fill-extrusion-pattern"}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-extrusion-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"fill-extrusion-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["fill-extrusion-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"fill-extrusion-pattern":{type:"resolvedImage",transition:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"cross-faded-data-driven"},"fill-extrusion-height":{type:"number",default:0,minimum:0,units:"meters",transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-extrusion-base":{type:"number",default:0,minimum:0,units:"meters",transition:!0,requires:["fill-extrusion-height"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-extrusion-vertical-gradient":{type:"boolean",default:!0,transition:!1,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"}},paint_line:{"line-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"line-pattern"}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"line-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["line-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"line-width":{type:"number",default:1,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-gap-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-offset":{type:"number",default:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-blur":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-dasharray":{type:"array",value:"number",minimum:0,transition:!0,units:"line widths",requires:[{"!":"line-pattern"}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"cross-faded"},"line-pattern":{type:"resolvedImage",transition:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"cross-faded-data-driven"},"line-gradient":{type:"color",transition:!1,requires:[{"!":"line-dasharray"},{"!":"line-pattern"},{source:"geojson",has:{lineMetrics:!0}}],expression:{interpolated:!0,parameters:["line-progress"]},"property-type":"color-ramp"}},paint_circle:{"circle-radius":{type:"number",default:5,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-color":{type:"color",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-blur":{type:"number",default:0,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"circle-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["circle-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"circle-pitch-scale":{type:"enum",values:{map:{},viewport:{}},default:"map",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"circle-pitch-alignment":{type:"enum",values:{map:{},viewport:{}},default:"viewport",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"circle-stroke-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-stroke-color":{type:"color",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-stroke-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"}},paint_heatmap:{"heatmap-radius":{type:"number",default:30,minimum:1,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"heatmap-weight":{type:"number",default:1,minimum:0,transition:!1,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"heatmap-intensity":{type:"number",default:1,minimum:0,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"heatmap-color":{type:"color",default:["interpolate",["linear"],["heatmap-density"],0,"rgba(0, 0, 255, 0)",.1,"royalblue",.3,"cyan",.5,"lime",.7,"yellow",1,"red"],transition:!1,expression:{interpolated:!0,parameters:["heatmap-density"]},"property-type":"color-ramp"},"heatmap-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},paint_symbol:{"icon-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-color":{type:"color",default:"#000000",transition:!0,requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-halo-color":{type:"color",default:"rgba(0, 0, 0, 0)",transition:!0,requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-halo-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-halo-blur":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"icon-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["icon-image","icon-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-color":{type:"color",default:"#000000",transition:!0,overridable:!0,requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-halo-color":{type:"color",default:"rgba(0, 0, 0, 0)",transition:!0,requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-halo-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-halo-blur":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["text-field","text-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"}},paint_raster:{"raster-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-hue-rotate":{type:"number",default:0,period:360,transition:!0,units:"degrees",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-brightness-min":{type:"number",default:0,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-brightness-max":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-saturation":{type:"number",default:0,minimum:-1,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-contrast":{type:"number",default:0,minimum:-1,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-resampling":{type:"enum",values:{linear:{},nearest:{}},default:"linear",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"raster-fade-duration":{type:"number",default:300,minimum:0,transition:!1,units:"milliseconds",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},paint_hillshade:{"hillshade-illumination-direction":{type:"numberArray",default:335,minimum:0,maximum:359,transition:!1,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-illumination-altitude":{type:"numberArray",default:45,minimum:0,maximum:90,transition:!1,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-illumination-anchor":{type:"enum",values:{map:{},viewport:{}},default:"viewport",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-exaggeration":{type:"number",default:.5,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-shadow-color":{type:"colorArray",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-highlight-color":{type:"colorArray",default:"#FFFFFF",transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-accent-color":{type:"color",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-method":{type:"enum",values:{standard:{},basic:{},combined:{},igor:{},multidirectional:{}},default:"standard",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"}},"paint_color-relief":{"color-relief-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"color-relief-color":{type:"color",transition:!1,expression:{interpolated:!0,parameters:["elevation"]},"property-type":"color-ramp"}},paint_background:{"background-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"background-pattern"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"background-pattern":{type:"resolvedImage",transition:!0,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"cross-faded"},"background-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},transition:{duration:{type:"number",default:300,minimum:0,units:"milliseconds"},delay:{type:"number",default:0,minimum:0,units:"milliseconds"}},"property-type":{"data-driven":{type:"property-type"},"cross-faded":{type:"property-type"},"cross-faded-data-driven":{type:"property-type"},"color-ramp":{type:"property-type"},"data-constant":{type:"property-type"},constant:{type:"property-type"}},promoteId:{"*":{type:"string"}}};let Dt=["type","source","source-layer","minzoom","maxzoom","filter","layout"];function Oe(f,l){let p={};for(let g in f)g!=="ref"&&(p[g]=f[g]);return Dt.forEach(g=>{g in l&&(p[g]=l[g])}),p}function xt(f,l){if(Array.isArray(f)){if(!Array.isArray(l)||f.length!==l.length)return!1;for(let p=0;p<f.length;p++)if(!xt(f[p],l[p]))return!1;return!0}if(typeof f=="object"&&f!==null&&l!==null){if(typeof l!="object"||Object.keys(f).length!==Object.keys(l).length)return!1;for(let p in f)if(!xt(f[p],l[p]))return!1;return!0}return f===l}function Bt(f,l){f.push(l)}function Tr(f,l,p){Bt(p,{command:"addSource",args:[f,l[f]]})}function dn(f,l,p){Bt(l,{command:"removeSource",args:[f]}),p[f]=!0}function wt(f,l,p,g){dn(f,p,g),Tr(f,l,p)}function ln(f,l,p){let g;for(g in f[p])if(Object.prototype.hasOwnProperty.call(f[p],g)&&g!=="data"&&!xt(f[p][g],l[p][g]))return!1;for(g in l[p])if(Object.prototype.hasOwnProperty.call(l[p],g)&&g!=="data"&&!xt(f[p][g],l[p][g]))return!1;return!0}function Ar(f,l,p,g,b,I){f=f||{},l=l||{};for(let M in f)Object.prototype.hasOwnProperty.call(f,M)&&(xt(f[M],l[M])||p.push({command:I,args:[g,M,l[M],b]}));for(let M in l)Object.prototype.hasOwnProperty.call(l,M)&&!Object.prototype.hasOwnProperty.call(f,M)&&(xt(f[M],l[M])||p.push({command:I,args:[g,M,l[M],b]}))}function or(f){return f.id}function Er(f,l){return f[l.id]=l,f}class Rt{constructor(l,p,g,b){this.message=(l?`${l}: `:"")+g,b&&(this.identifier=b),p!=null&&p.__line__&&(this.line=p.__line__)}}function jo(f,...l){for(let p of l)for(let g in p)f[g]=p[g];return f}class Ko extends Error{constructor(l,p){super(p),this.message=p,this.key=l}}class Un{constructor(l,p=[]){this.parent=l,this.bindings={};for(let[g,b]of p)this.bindings[g]=b}concat(l){return new Un(this,l)}get(l){if(this.bindings[l])return this.bindings[l];if(this.parent)return this.parent.get(l);throw new Error(`${l} not found in scope.`)}has(l){return!!this.bindings[l]||!!this.parent&&this.parent.has(l)}}let la={kind:"null"},zt={kind:"number"},Nr={kind:"string"},hr={kind:"boolean"},vn={kind:"color"},yn={kind:"projectionDefinition"},An={kind:"object"},lr={kind:"value"},hn={kind:"collator"},_n={kind:"formatted"},on={kind:"padding"},sn={kind:"colorArray"},Gr={kind:"numberArray"},Hr={kind:"resolvedImage"},In={kind:"variableAnchorOffsetCollection"};function On(f,l){return{kind:"array",itemType:f,N:l}}function Et(f){if(f.kind==="array"){let l=Et(f.itemType);return typeof f.N=="number"?`array<${l}, ${f.N}>`:f.itemType.kind==="value"?"array":`array<${l}>`}return f.kind}let rr=[la,zt,Nr,hr,vn,yn,_n,An,On(lr),on,Gr,sn,Hr,In];function li(f,l){if(l.kind==="error")return null;if(f.kind==="array"){if(l.kind==="array"&&(l.N===0&&l.itemType.kind==="value"||!li(f.itemType,l.itemType))&&(typeof f.N!="number"||f.N===l.N))return null}else{if(f.kind===l.kind)return null;if(f.kind==="value"){for(let p of rr)if(!li(p,l))return null}}return`Expected ${Et(f)} but found ${Et(l)} instead.`}function Ci(f,l){return l.some(p=>p.kind===f.kind)}function po(f,l){return l.some(p=>p==="null"?f===null:p==="array"?Array.isArray(f):p==="object"?f&&!Array.isArray(f)&&typeof f=="object":p===typeof f)}function so(f,l){return f.kind==="array"&&l.kind==="array"?f.itemType.kind===l.itemType.kind&&typeof f.N=="number":f.kind===l.kind}let Kl=.96422,Us=.82521,Kc=4/29,Eo=6/29,Kn=3*Eo*Eo,ri=Eo*Eo*Eo,fo=Math.PI/180,Zr=180/Math.PI;function mn(f){return(f%=360)<0&&(f+=360),f}function nn([f,l,p,g]){let b,I,M=Bn((.2225045*(f=xn(f))+.7168786*(l=xn(l))+.0606169*(p=xn(p)))/1);f===l&&l===p?b=I=M:(b=Bn((.4360747*f+.3850649*l+.1430804*p)/Kl),I=Bn((.0139322*f+.0971045*l+.7141733*p)/Us));let O=116*M-16;return[O<0?0:O,500*(b-M),200*(M-I),g]}function xn(f){return f<=.04045?f/12.92:Math.pow((f+.055)/1.055,2.4)}function Bn(f){return f>ri?Math.pow(f,1/3):f/Kn+Kc}function Br([f,l,p,g]){let b=(f+16)/116,I=isNaN(l)?b:b+l/500,M=isNaN(p)?b:b-p/200;return b=1*Hn(b),I=Kl*Hn(I),M=Us*Hn(M),[lo(3.1338561*I-1.6168667*b-.4906146*M),lo(-.9787684*I+1.9161415*b+.033454*M),lo(.0719453*I-.2289914*b+1.4052427*M),g]}function lo(f){return(f=f<=.00304?12.92*f:1.055*Math.pow(f,1/2.4)-.055)<0?0:f>1?1:f}function Hn(f){return f>Eo?f*f*f:Kn*(f-Kc)}let qo=Object.hasOwn||function(f,l){return Object.prototype.hasOwnProperty.call(f,l)};function Wn(f,l){return qo(f,l)?f[l]:void 0}function Yi(f){return parseInt(f.padEnd(2,f),16)/255}function Vo(f,l){return Wr(l?f/100:f,0,1)}function Wr(f,l,p){return Math.min(Math.max(l,f),p)}function Ai(f){return!f.some(Number.isNaN)}let _i={aliceblue:[240,248,255],antiquewhite:[250,235,215],aqua:[0,255,255],aquamarine:[127,255,212],azure:[240,255,255],beige:[245,245,220],bisque:[255,228,196],black:[0,0,0],blanchedalmond:[255,235,205],blue:[0,0,255],blueviolet:[138,43,226],brown:[165,42,42],burlywood:[222,184,135],cadetblue:[95,158,160],chartreuse:[127,255,0],chocolate:[210,105,30],coral:[255,127,80],cornflowerblue:[100,149,237],cornsilk:[255,248,220],crimson:[220,20,60],cyan:[0,255,255],darkblue:[0,0,139],darkcyan:[0,139,139],darkgoldenrod:[184,134,11],darkgray:[169,169,169],darkgreen:[0,100,0],darkgrey:[169,169,169],darkkhaki:[189,183,107],darkmagenta:[139,0,139],darkolivegreen:[85,107,47],darkorange:[255,140,0],darkorchid:[153,50,204],darkred:[139,0,0],darksalmon:[233,150,122],darkseagreen:[143,188,143],darkslateblue:[72,61,139],darkslategray:[47,79,79],darkslategrey:[47,79,79],darkturquoise:[0,206,209],darkviolet:[148,0,211],deeppink:[255,20,147],deepskyblue:[0,191,255],dimgray:[105,105,105],dimgrey:[105,105,105],dodgerblue:[30,144,255],firebrick:[178,34,34],floralwhite:[255,250,240],forestgreen:[34,139,34],fuchsia:[255,0,255],gainsboro:[220,220,220],ghostwhite:[248,248,255],gold:[255,215,0],goldenrod:[218,165,32],gray:[128,128,128],green:[0,128,0],greenyellow:[173,255,47],grey:[128,128,128],honeydew:[240,255,240],hotpink:[255,105,180],indianred:[205,92,92],indigo:[75,0,130],ivory:[255,255,240],khaki:[240,230,140],lavender:[230,230,250],lavenderblush:[255,240,245],lawngreen:[124,252,0],lemonchiffon:[255,250,205],lightblue:[173,216,230],lightcoral:[240,128,128],lightcyan:[224,255,255],lightgoldenrodyellow:[250,250,210],lightgray:[211,211,211],lightgreen:[144,238,144],lightgrey:[211,211,211],lightpink:[255,182,193],lightsalmon:[255,160,122],lightseagreen:[32,178,170],lightskyblue:[135,206,250],lightslategray:[119,136,153],lightslategrey:[119,136,153],lightsteelblue:[176,196,222],lightyellow:[255,255,224],lime:[0,255,0],limegreen:[50,205,50],linen:[250,240,230],magenta:[255,0,255],maroon:[128,0,0],mediumaquamarine:[102,205,170],mediumblue:[0,0,205],mediumorchid:[186,85,211],mediumpurple:[147,112,219],mediumseagreen:[60,179,113],mediumslateblue:[123,104,238],mediumspringgreen:[0,250,154],mediumturquoise:[72,209,204],mediumvioletred:[199,21,133],midnightblue:[25,25,112],mintcream:[245,255,250],mistyrose:[255,228,225],moccasin:[255,228,181],navajowhite:[255,222,173],navy:[0,0,128],oldlace:[253,245,230],olive:[128,128,0],olivedrab:[107,142,35],orange:[255,165,0],orangered:[255,69,0],orchid:[218,112,214],palegoldenrod:[238,232,170],palegreen:[152,251,152],paleturquoise:[175,238,238],palevioletred:[219,112,147],papayawhip:[255,239,213],peachpuff:[255,218,185],peru:[205,133,63],pink:[255,192,203],plum:[221,160,221],powderblue:[176,224,230],purple:[128,0,128],rebeccapurple:[102,51,153],red:[255,0,0],rosybrown:[188,143,143],royalblue:[65,105,225],saddlebrown:[139,69,19],salmon:[250,128,114],sandybrown:[244,164,96],seagreen:[46,139,87],seashell:[255,245,238],sienna:[160,82,45],silver:[192,192,192],skyblue:[135,206,235],slateblue:[106,90,205],slategray:[112,128,144],slategrey:[112,128,144],snow:[255,250,250],springgreen:[0,255,127],steelblue:[70,130,180],tan:[210,180,140],teal:[0,128,128],thistle:[216,191,216],tomato:[255,99,71],turquoise:[64,224,208],violet:[238,130,238],wheat:[245,222,179],white:[255,255,255],whitesmoke:[245,245,245],yellow:[255,255,0],yellowgreen:[154,205,50]};function Bs(f,l,p){return f+p*(l-f)}function os(f,l,p){return f.map((g,b)=>Bs(g,l[b],p))}class gn{constructor(l,p,g,b=1,I=!0){this.r=l,this.g=p,this.b=g,this.a=b,I||(this.r*=b,this.g*=b,this.b*=b,b||this.overwriteGetter("rgb",[l,p,g,b]))}static parse(l){if(l instanceof gn)return l;if(typeof l!="string")return;let p=function(g){if((g=g.toLowerCase().trim())==="transparent")return[0,0,0,0];let b=Wn(_i,g);if(b){let[M,O,L]=b;return[M/255,O/255,L/255,1]}if(g.startsWith("#")&&/^#(?:[0-9a-f]{3,4}|[0-9a-f]{6}|[0-9a-f]{8})$/.test(g)){let M=g.length<6?1:2,O=1;return[Yi(g.slice(O,O+=M)),Yi(g.slice(O,O+=M)),Yi(g.slice(O,O+=M)),Yi(g.slice(O,O+M)||"ff")]}if(g.startsWith("rgb")){let M=g.match(/^rgba?\(\s*([\de.+-]+)(%)?(?:\s+|\s*(,)\s*)([\de.+-]+)(%)?(?:\s+|\s*(,)\s*)([\de.+-]+)(%)?(?:\s*([,\/])\s*([\de.+-]+)(%)?)?\s*\)$/);if(M){let[O,L,F,U,W,X,re,ne,ae,he,Ie,Xe]=M,je=[U||" ",re||" ",he].join("");if(je==="  "||je==="  /"||je===",,"||je===",,,"){let Ve=[F,X,ae].join(""),st=Ve==="%%%"?100:Ve===""?255:0;if(st){let yt=[Wr(+L/st,0,1),Wr(+W/st,0,1),Wr(+ne/st,0,1),Ie?Vo(+Ie,Xe):1];if(Ai(yt))return yt}}return}}let I=g.match(/^hsla?\(\s*([\de.+-]+)(?:deg)?(?:\s+|\s*(,)\s*)([\de.+-]+)%(?:\s+|\s*(,)\s*)([\de.+-]+)%(?:\s*([,\/])\s*([\de.+-]+)(%)?)?\s*\)$/);if(I){let[M,O,L,F,U,W,X,re,ne]=I,ae=[L||" ",U||" ",X].join("");if(ae==="  "||ae==="  /"||ae===",,"||ae===",,,"){let he=[+O,Wr(+F,0,100),Wr(+W,0,100),re?Vo(+re,ne):1];if(Ai(he))return function([Ie,Xe,je,Ve]){function st(yt){let kt=(yt+Ie/30)%12,tr=Xe*Math.min(je,1-je);return je-tr*Math.max(-1,Math.min(kt-3,9-kt,1))}return Ie=mn(Ie),Xe/=100,je/=100,[st(0),st(8),st(4),Ve]}(he)}}}(l);return p?new gn(...p,!1):void 0}get rgb(){let{r:l,g:p,b:g,a:b}=this,I=b||1/0;return this.overwriteGetter("rgb",[l/I,p/I,g/I,b])}get hcl(){return this.overwriteGetter("hcl",function(l){let[p,g,b,I]=nn(l),M=Math.sqrt(g*g+b*b);return[Math.round(1e4*M)?mn(Math.atan2(b,g)*Zr):NaN,M,p,I]}(this.rgb))}get lab(){return this.overwriteGetter("lab",nn(this.rgb))}overwriteGetter(l,p){return Object.defineProperty(this,l,{value:p}),p}toString(){let[l,p,g,b]=this.rgb;return`rgba(${[l,p,g].map(I=>Math.round(255*I)).join(",")},${b})`}static interpolate(l,p,g,b="rgb"){switch(b){case"rgb":{let[I,M,O,L]=os(l.rgb,p.rgb,g);return new gn(I,M,O,L,!1)}case"hcl":{let[I,M,O,L]=l.hcl,[F,U,W,X]=p.hcl,re,ne;if(isNaN(I)||isNaN(F))isNaN(I)?isNaN(F)?re=NaN:(re=F,O!==1&&O!==0||(ne=U)):(re=I,W!==1&&W!==0||(ne=M));else{let je=F-I;F>I&&je>180?je-=360:F<I&&I-F>180&&(je+=360),re=I+g*je}let[ae,he,Ie,Xe]=function([je,Ve,st,yt]){return je=isNaN(je)?0:je*fo,Br([st,Math.cos(je)*Ve,Math.sin(je)*Ve,yt])}([re,ne!=null?ne:Bs(M,U,g),Bs(O,W,g),Bs(L,X,g)]);return new gn(ae,he,Ie,Xe,!1)}case"lab":{let[I,M,O,L]=Br(os(l.lab,p.lab,g));return new gn(I,M,O,L,!1)}}}}gn.black=new gn(0,0,0,1),gn.white=new gn(1,1,1,1),gn.transparent=new gn(0,0,0,0),gn.red=new gn(1,0,0,1);class is{constructor(l,p,g){this.sensitivity=l?p?"variant":"case":p?"accent":"base",this.locale=g,this.collator=new Intl.Collator(this.locale?this.locale:[],{sensitivity:this.sensitivity,usage:"search"})}compare(l,p){return this.collator.compare(l,p)}resolvedLocale(){return new Intl.Collator(this.locale?this.locale:[]).resolvedOptions().locale}}let Iu=["bottom","center","top"];class Qf{constructor(l,p,g,b,I,M){this.text=l,this.image=p,this.scale=g,this.fontStack=b,this.textColor=I,this.verticalAlign=M}}class ya{constructor(l){this.sections=l}static fromString(l){return new ya([new Qf(l,null,null,null,null,null)])}isEmpty(){return this.sections.length===0||!this.sections.some(l=>l.text.length!==0||l.image&&l.image.name.length!==0)}static factory(l){return l instanceof ya?l:ya.fromString(l)}toString(){return this.sections.length===0?"":this.sections.map(l=>l.text).join("")}}class as{constructor(l){this.values=l.slice()}static parse(l){if(l instanceof as)return l;if(typeof l=="number")return new as([l,l,l,l]);if(Array.isArray(l)&&!(l.length<1||l.length>4)){for(let p of l)if(typeof p!="number")return;switch(l.length){case 1:l=[l[0],l[0],l[0],l[0]];break;case 2:l=[l[0],l[1],l[0],l[1]];break;case 3:l=[l[0],l[1],l[2],l[1]]}return new as(l)}}toString(){return JSON.stringify(this.values)}static interpolate(l,p,g){return new as(os(l.values,p.values,g))}}class Zi{constructor(l){this.values=l.slice()}static parse(l){if(l instanceof Zi)return l;if(typeof l=="number")return new Zi([l]);if(Array.isArray(l)){for(let p of l)if(typeof p!="number")return;return new Zi(l)}}toString(){return JSON.stringify(this.values)}static interpolate(l,p,g){return new Zi(os(l.values,p.values,g))}}class Oi{constructor(l){this.values=l.slice()}static parse(l){if(l instanceof Oi)return l;if(typeof l=="string"){let g=gn.parse(l);return g?new Oi([g]):void 0}if(!Array.isArray(l))return;let p=[];for(let g of l){if(typeof g!="string")return;let b=gn.parse(g);if(!b)return;p.push(b)}return new Oi(p)}toString(){return JSON.stringify(this.values)}static interpolate(l,p,g,b="rgb"){let I=[];if(l.values.length!=p.values.length)throw new Error(`colorArray: Arrays have mismatched length (${l.values.length} vs. ${p.values.length}), cannot interpolate.`);for(let M=0;M<l.values.length;M++)I.push(gn.interpolate(l.values[M],p.values[M],g,b));return new Oi(I)}}class zo extends Error{constructor(l){super(l),this.name="RuntimeError"}toJSON(){return this.message}}let px=new Set(["center","left","right","top","bottom","top-left","top-right","bottom-left","bottom-right"]);class hl{constructor(l){this.values=l.slice()}static parse(l){if(l instanceof hl)return l;if(Array.isArray(l)&&!(l.length<1)&&l.length%2==0){for(let p=0;p<l.length;p+=2){let g=l[p],b=l[p+1];if(typeof g!="string"||!px.has(g)||!Array.isArray(b)||b.length!==2||typeof b[0]!="number"||typeof b[1]!="number")return}return new hl(l)}}toString(){return JSON.stringify(this.values)}static interpolate(l,p,g){let b=l.values,I=p.values;if(b.length!==I.length)throw new zo(`Cannot interpolate values of different length. from: ${l.toString()}, to: ${p.toString()}`);let M=[];for(let O=0;O<b.length;O+=2){if(b[O]!==I[O])throw new zo(`Cannot interpolate values containing mismatched anchors. from[${O}]: ${b[O]}, to[${O}]: ${I[O]}`);M.push(b[O]);let[L,F]=b[O+1],[U,W]=I[O+1];M.push([Bs(L,U,g),Bs(F,W,g)])}return new hl(M)}}class Vs{constructor(l){this.name=l.name,this.available=l.available}toString(){return this.name}static fromString(l){return l?new Vs({name:l,available:!1}):null}}class Gs{constructor(l,p,g){this.from=l,this.to=p,this.transition=g}static interpolate(l,p,g){return new Gs(l,p,g)}static parse(l){return l instanceof Gs?l:Array.isArray(l)&&l.length===3&&typeof l[0]=="string"&&typeof l[1]=="string"&&typeof l[2]=="number"?new Gs(l[0],l[1],l[2]):typeof l=="object"&&typeof l.from=="string"&&typeof l.to=="string"&&typeof l.transition=="number"?new Gs(l.from,l.to,l.transition):typeof l=="string"?new Gs(l,l,1):void 0}}function bi(f,l,p,g){return typeof f=="number"&&f>=0&&f<=255&&typeof l=="number"&&l>=0&&l<=255&&typeof p=="number"&&p>=0&&p<=255?g===void 0||typeof g=="number"&&g>=0&&g<=1?null:`Invalid rgba value [${[f,l,p,g].join(", ")}]: 'a' must be between 0 and 1.`:`Invalid rgba value [${(typeof g=="number"?[f,l,p,g]:[f,l,p]).join(", ")}]: 'r', 'g', and 'b' must be between 0 and 255.`}function Bm(f){if(f===null||typeof f=="string"||typeof f=="boolean"||typeof f=="number"||f instanceof Gs||f instanceof gn||f instanceof is||f instanceof ya||f instanceof as||f instanceof Zi||f instanceof Oi||f instanceof hl||f instanceof Vs)return!0;if(Array.isArray(f)){for(let l of f)if(!Bm(l))return!1;return!0}if(typeof f=="object"){for(let l in f)if(!Bm(f[l]))return!1;return!0}return!1}function Xr(f){if(f===null)return la;if(typeof f=="string")return Nr;if(typeof f=="boolean")return hr;if(typeof f=="number")return zt;if(f instanceof gn)return vn;if(f instanceof Gs)return yn;if(f instanceof is)return hn;if(f instanceof ya)return _n;if(f instanceof as)return on;if(f instanceof Zi)return Gr;if(f instanceof Oi)return sn;if(f instanceof hl)return In;if(f instanceof Vs)return Hr;if(Array.isArray(f)){let l=f.length,p;for(let g of f){let b=Xr(g);if(p){if(p===b)continue;p=lr;break}p=b}return On(p||lr,l)}return An}function wn(f){let l=typeof f;return f===null?"":l==="string"||l==="number"||l==="boolean"?String(f):f instanceof gn||f instanceof Gs||f instanceof ya||f instanceof as||f instanceof Zi||f instanceof Oi||f instanceof hl||f instanceof Vs?f.toString():JSON.stringify(f)}class ed{constructor(l,p){this.type=l,this.value=p}static parse(l,p){if(l.length!==2)return p.error(`'literal' expression requires exactly one argument, but found ${l.length-1} instead.`);if(!Bm(l[1]))return p.error("invalid value");let g=l[1],b=Xr(g),I=p.expectedType;return b.kind!=="array"||b.N!==0||!I||I.kind!=="array"||typeof I.N=="number"&&I.N!==0||(b=I),new ed(b,g)}evaluate(){return this.value}eachChild(){}outputDefined(){return!0}}let uo={string:Nr,number:zt,boolean:hr,object:An};class Mu{constructor(l,p){this.type=l,this.args=p}static parse(l,p){if(l.length<2)return p.error("Expected at least one argument.");let g,b=1,I=l[0];if(I==="array"){let O,L;if(l.length>2){let F=l[1];if(typeof F!="string"||!(F in uo)||F==="object")return p.error("The item type argument of \"array\" must be one of string, number, boolean",1);O=uo[F],b++}else O=lr;if(l.length>3){if(l[2]!==null&&(typeof l[2]!="number"||l[2]<0||l[2]!==Math.floor(l[2])))return p.error("The length argument to \"array\" must be a positive integer literal",2);L=l[2],b++}g=On(O,L)}else{if(!uo[I])throw new Error(`Types doesn't contain name = ${I}`);g=uo[I]}let M=[];for(;b<l.length;b++){let O=p.parse(l[b],b,lr);if(!O)return null;M.push(O)}return new Mu(g,M)}evaluate(l){for(let p=0;p<this.args.length;p++){let g=this.args[p].evaluate(l);if(!li(this.type,Xr(g)))return g;if(p===this.args.length-1)throw new zo(`Expected value to be of type ${Et(this.type)}, but found ${Et(Xr(g))} instead.`)}throw new Error}eachChild(l){this.args.forEach(l)}outputDefined(){return this.args.every(l=>l.outputDefined())}}let Rp={"to-boolean":hr,"to-color":vn,"to-number":zt,"to-string":Nr};class jp{constructor(l,p){this.type=l,this.args=p}static parse(l,p){if(l.length<2)return p.error("Expected at least one argument.");let g=l[0];if(!Rp[g])throw new Error(`Can't parse ${g} as it is not part of the known types`);if((g==="to-boolean"||g==="to-string")&&l.length!==2)return p.error("Expected one argument.");let b=Rp[g],I=[];for(let M=1;M<l.length;M++){let O=p.parse(l[M],M,lr);if(!O)return null;I.push(O)}return new jp(b,I)}evaluate(l){switch(this.type.kind){case"boolean":return!!this.args[0].evaluate(l);case"color":{let p,g;for(let b of this.args){if(p=b.evaluate(l),g=null,p instanceof gn)return p;if(typeof p=="string"){let I=l.parseColor(p);if(I)return I}else if(Array.isArray(p)&&(g=p.length<3||p.length>4?`Invalid rgba value ${JSON.stringify(p)}: expected an array containing either three or four numeric values.`:bi(p[0],p[1],p[2],p[3]),!g))return new gn(p[0]/255,p[1]/255,p[2]/255,p[3])}throw new zo(g||`Could not parse color from value '${typeof p=="string"?p:JSON.stringify(p)}'`)}case"padding":{let p;for(let g of this.args){p=g.evaluate(l);let b=as.parse(p);if(b)return b}throw new zo(`Could not parse padding from value '${typeof p=="string"?p:JSON.stringify(p)}'`)}case"numberArray":{let p;for(let g of this.args){p=g.evaluate(l);let b=Zi.parse(p);if(b)return b}throw new zo(`Could not parse numberArray from value '${typeof p=="string"?p:JSON.stringify(p)}'`)}case"colorArray":{let p;for(let g of this.args){p=g.evaluate(l);let b=Oi.parse(p);if(b)return b}throw new zo(`Could not parse colorArray from value '${typeof p=="string"?p:JSON.stringify(p)}'`)}case"variableAnchorOffsetCollection":{let p;for(let g of this.args){p=g.evaluate(l);let b=hl.parse(p);if(b)return b}throw new zo(`Could not parse variableAnchorOffsetCollection from value '${typeof p=="string"?p:JSON.stringify(p)}'`)}case"number":{let p=null;for(let g of this.args){if(p=g.evaluate(l),p===null)return 0;let b=Number(p);if(!isNaN(b))return b}throw new zo(`Could not convert ${JSON.stringify(p)} to number.`)}case"formatted":return ya.fromString(wn(this.args[0].evaluate(l)));case"resolvedImage":return Vs.fromString(wn(this.args[0].evaluate(l)));case"projectionDefinition":return this.args[0].evaluate(l);default:return wn(this.args[0].evaluate(l))}}eachChild(l){this.args.forEach(l)}outputDefined(){return this.args.every(l=>l.outputDefined())}}let fx=["Unknown","Point","LineString","Polygon"];class j2{constructor(){this.globals=null,this.feature=null,this.featureState=null,this.formattedSection=null,this._parseColorCache=new Map,this.availableImages=null,this.canonical=null}id(){return this.feature&&"id"in this.feature?this.feature.id:null}geometryType(){return this.feature?typeof this.feature.type=="number"?fx[this.feature.type]:this.feature.type:null}geometry(){return this.feature&&"geometry"in this.feature?this.feature.geometry:null}canonicalID(){return this.canonical}properties(){return this.feature&&this.feature.properties||{}}parseColor(l){let p=this._parseColorCache.get(l);return p||(p=gn.parse(l),this._parseColorCache.set(l,p)),p}}class Ev{constructor(l,p,g=[],b,I=new Un,M=[]){this.registry=l,this.path=g,this.key=g.map(O=>`[${O}]`).join(""),this.scope=I,this.errors=M,this.expectedType=b,this._isConstant=p}parse(l,p,g,b,I={}){return p?this.concat(p,g,b)._parse(l,I):this._parse(l,I)}_parse(l,p){function g(b,I,M){return M==="assert"?new Mu(I,[b]):M==="coerce"?new jp(I,[b]):b}if(l!==null&&typeof l!="string"&&typeof l!="boolean"&&typeof l!="number"||(l=["literal",l]),Array.isArray(l)){if(l.length===0)return this.error("Expected an array with at least one element. If you wanted a literal array, use [\"literal\", []].");let b=l[0];if(typeof b!="string")return this.error(`Expression name must be a string, but found ${typeof b} instead. If you wanted a literal array, use ["literal", [...]].`,0),null;let I=this.registry[b];if(I){let M=I.parse(l,this);if(!M)return null;if(this.expectedType){let O=this.expectedType,L=M.type;if(O.kind!=="string"&&O.kind!=="number"&&O.kind!=="boolean"&&O.kind!=="object"&&O.kind!=="array"||L.kind!=="value"){if(O.kind==="projectionDefinition"&&["string","array"].includes(L.kind)||["color","formatted","resolvedImage"].includes(O.kind)&&["value","string"].includes(L.kind)||["padding","numberArray"].includes(O.kind)&&["value","number","array"].includes(L.kind)||O.kind==="colorArray"&&["value","string","array"].includes(L.kind)||O.kind==="variableAnchorOffsetCollection"&&["value","array"].includes(L.kind))M=g(M,O,p.typeAnnotation||"coerce");else if(this.checkSubtype(O,L))return null}else M=g(M,O,p.typeAnnotation||"assert")}if(!(M instanceof ed)&&M.type.kind!=="resolvedImage"&&this._isConstant(M)){let O=new j2;try{M=new ed(M.type,M.evaluate(O))}catch(L){return this.error(L.message),null}}return M}return this.error(`Unknown expression "${b}". If you wanted a literal array, use ["literal", [...]].`,0)}return this.error(l===void 0?"'undefined' value invalid. Use null instead.":typeof l=="object"?"Bare objects invalid. Use [\"literal\", {...}] instead.":`Expected an array, but found ${typeof l} instead.`)}concat(l,p,g){let b=typeof l=="number"?this.path.concat(l):this.path,I=g?this.scope.concat(g):this.scope;return new Ev(this.registry,this._isConstant,b,p||null,I,this.errors)}error(l,...p){let g=`${this.key}${p.map(b=>`[${b}]`).join("")}`;this.errors.push(new Ko(g,l))}checkSubtype(l,p){let g=li(l,p);return g&&this.error(g),g}}class m1{constructor(l,p){this.type=p.type,this.bindings=[].concat(l),this.result=p}evaluate(l){return this.result.evaluate(l)}eachChild(l){for(let p of this.bindings)l(p[1]);l(this.result)}static parse(l,p){if(l.length<4)return p.error(`Expected at least 3 arguments, but found ${l.length-1} instead.`);let g=[];for(let I=1;I<l.length-1;I+=2){let M=l[I];if(typeof M!="string")return p.error(`Expected string, but found ${typeof M} instead.`,I);if(/[^a-zA-Z0-9_]/.test(M))return p.error("Variable names must contain only alphanumeric characters or '_'.",I);let O=p.parse(l[I+1],I+1);if(!O)return null;g.push([M,O])}let b=p.parse(l[l.length-1],l.length-1,p.expectedType,g);return b?new m1(g,b):null}outputDefined(){return this.result.outputDefined()}}class dx{constructor(l,p){this.type=p.type,this.name=l,this.boundExpression=p}static parse(l,p){if(l.length!==2||typeof l[1]!="string")return p.error("'var' expression requires exactly one string literal argument.");let g=l[1];return p.scope.has(g)?new dx(g,p.scope.get(g)):p.error(`Unknown variable "${g}". Make sure "${g}" has been bound in an enclosing "let" expression before using it.`,1)}evaluate(l){return this.boundExpression.evaluate(l)}eachChild(){}outputDefined(){return!1}}class hx{constructor(l,p,g){this.type=l,this.index=p,this.input=g}static parse(l,p){if(l.length!==3)return p.error(`Expected 2 arguments, but found ${l.length-1} instead.`);let g=p.parse(l[1],1,zt),b=p.parse(l[2],2,On(p.expectedType||lr));return g&&b?new hx(b.type.itemType,g,b):null}evaluate(l){let p=this.index.evaluate(l),g=this.input.evaluate(l);if(p<0)throw new zo(`Array index out of bounds: ${p} < 0.`);if(p>=g.length)throw new zo(`Array index out of bounds: ${p} > ${g.length-1}.`);if(p!==Math.floor(p))throw new zo(`Array index must be an integer, but found ${p} instead.`);return g[p]}eachChild(l){l(this.index),l(this.input)}outputDefined(){return!1}}class mx{constructor(l,p){this.type=hr,this.needle=l,this.haystack=p}static parse(l,p){if(l.length!==3)return p.error(`Expected 2 arguments, but found ${l.length-1} instead.`);let g=p.parse(l[1],1,lr),b=p.parse(l[2],2,lr);return g&&b?Ci(g.type,[hr,Nr,zt,la,lr])?new mx(g,b):p.error(`Expected first argument to be of type boolean, string, number or null, but found ${Et(g.type)} instead`):null}evaluate(l){let p=this.needle.evaluate(l),g=this.haystack.evaluate(l);if(!g)return!1;if(!po(p,["boolean","string","number","null"]))throw new zo(`Expected first argument to be of type boolean, string, number or null, but found ${Et(Xr(p))} instead.`);if(!po(g,["string","array"]))throw new zo(`Expected second argument to be of type array or string, but found ${Et(Xr(g))} instead.`);return g.indexOf(p)>=0}eachChild(l){l(this.needle),l(this.haystack)}outputDefined(){return!0}}class Xc{constructor(l,p,g){this.type=zt,this.needle=l,this.haystack=p,this.fromIndex=g}static parse(l,p){if(l.length<=2||l.length>=5)return p.error(`Expected 3 or 4 arguments, but found ${l.length-1} instead.`);let g=p.parse(l[1],1,lr),b=p.parse(l[2],2,lr);if(!g||!b)return null;if(!Ci(g.type,[hr,Nr,zt,la,lr]))return p.error(`Expected first argument to be of type boolean, string, number or null, but found ${Et(g.type)} instead`);if(l.length===4){let I=p.parse(l[3],3,zt);return I?new Xc(g,b,I):null}return new Xc(g,b)}evaluate(l){let p=this.needle.evaluate(l),g=this.haystack.evaluate(l);if(!po(p,["boolean","string","number","null"]))throw new zo(`Expected first argument to be of type boolean, string, number or null, but found ${Et(Xr(p))} instead.`);let b;if(this.fromIndex&&(b=this.fromIndex.evaluate(l)),po(g,["string"])){let I=g.indexOf(p,b);return I===-1?-1:[...g.slice(0,I)].length}if(po(g,["array"]))return g.indexOf(p,b);throw new zo(`Expected second argument to be of type array or string, but found ${Et(Xr(g))} instead.`)}eachChild(l){l(this.needle),l(this.haystack),this.fromIndex&&l(this.fromIndex)}outputDefined(){return!1}}class ss{constructor(l,p,g,b,I,M){this.inputType=l,this.type=p,this.input=g,this.cases=b,this.outputs=I,this.otherwise=M}static parse(l,p){if(l.length<5)return p.error(`Expected at least 4 arguments, but found only ${l.length-1}.`);if(l.length%2!=1)return p.error("Expected an even number of arguments.");let g,b;p.expectedType&&p.expectedType.kind!=="value"&&(b=p.expectedType);let I={},M=[];for(let F=2;F<l.length-1;F+=2){let U=l[F],W=l[F+1];Array.isArray(U)||(U=[U]);let X=p.concat(F);if(U.length===0)return X.error("Expected at least one branch label.");for(let ne of U){if(typeof ne!="number"&&typeof ne!="string")return X.error("Branch labels must be numbers or strings.");if(typeof ne=="number"&&Math.abs(ne)>Number.MAX_SAFE_INTEGER)return X.error(`Branch labels must be integers no larger than ${Number.MAX_SAFE_INTEGER}.`);if(typeof ne=="number"&&Math.floor(ne)!==ne)return X.error("Numeric branch labels must be integer values.");if(g){if(X.checkSubtype(g,Xr(ne)))return null}else g=Xr(ne);if(I[String(ne)]!==void 0)return X.error("Branch labels must be unique.");I[String(ne)]=M.length}let re=p.parse(W,F,b);if(!re)return null;b=b||re.type,M.push(re)}let O=p.parse(l[1],1,lr);if(!O)return null;let L=p.parse(l[l.length-1],l.length-1,b);return L?O.type.kind!=="value"&&p.concat(1).checkSubtype(g,O.type)?null:new ss(g,b,O,I,M,L):null}evaluate(l){let p=this.input.evaluate(l);return(Xr(p)===this.inputType&&this.outputs[this.cases[p]]||this.otherwise).evaluate(l)}eachChild(l){l(this.input),this.outputs.forEach(l),l(this.otherwise)}outputDefined(){return this.outputs.every(l=>l.outputDefined())&&this.otherwise.outputDefined()}}class Sv{constructor(l,p,g){this.type=l,this.branches=p,this.otherwise=g}static parse(l,p){if(l.length<4)return p.error(`Expected at least 3 arguments, but found only ${l.length-1}.`);if(l.length%2!=0)return p.error("Expected an odd number of arguments.");let g;p.expectedType&&p.expectedType.kind!=="value"&&(g=p.expectedType);let b=[];for(let M=1;M<l.length-1;M+=2){let O=p.parse(l[M],M,hr);if(!O)return null;let L=p.parse(l[M+1],M+1,g);if(!L)return null;b.push([O,L]),g=g||L.type}let I=p.parse(l[l.length-1],l.length-1,g);if(!I)return null;if(!g)throw new Error("Can't infer output type");return new Sv(g,b,I)}evaluate(l){for(let[p,g]of this.branches)if(p.evaluate(l))return g.evaluate(l);return this.otherwise.evaluate(l)}eachChild(l){for(let[p,g]of this.branches)l(p),l(g);l(this.otherwise)}outputDefined(){return this.branches.every(([l,p])=>p.outputDefined())&&this.otherwise.outputDefined()}}class g1{constructor(l,p,g,b){this.type=l,this.input=p,this.beginIndex=g,this.endIndex=b}static parse(l,p){if(l.length<=2||l.length>=5)return p.error(`Expected 3 or 4 arguments, but found ${l.length-1} instead.`);let g=p.parse(l[1],1,lr),b=p.parse(l[2],2,zt);if(!g||!b)return null;if(!Ci(g.type,[On(lr),Nr,lr]))return p.error(`Expected first argument to be of type array or string, but found ${Et(g.type)} instead`);if(l.length===4){let I=p.parse(l[3],3,zt);return I?new g1(g.type,g,b,I):null}return new g1(g.type,g,b)}evaluate(l){let p=this.input.evaluate(l),g=this.beginIndex.evaluate(l),b;if(this.endIndex&&(b=this.endIndex.evaluate(l)),po(p,["string"]))return[...p].slice(g,b).join("");if(po(p,["array"]))return p.slice(g,b);throw new zo(`Expected first argument to be of type array or string, but found ${Et(Xr(p))} instead.`)}eachChild(l){l(this.input),l(this.beginIndex),this.endIndex&&l(this.endIndex)}outputDefined(){return!1}}function Vm(f,l){let p=f.length-1,g,b,I=0,M=p,O=0;for(;I<=M;)if(O=Math.floor((I+M)/2),g=f[O],b=f[O+1],g<=l){if(O===p||l<b)return O;I=O+1}else{if(!(g>l))throw new zo("Input is not a number.");M=O-1}return 0}class ua{constructor(l,p,g){this.type=l,this.input=p,this.labels=[],this.outputs=[];for(let[b,I]of g)this.labels.push(b),this.outputs.push(I)}static parse(l,p){if(l.length-1<4)return p.error(`Expected at least 4 arguments, but found only ${l.length-1}.`);if((l.length-1)%2!=0)return p.error("Expected an even number of arguments.");let g=p.parse(l[1],1,zt);if(!g)return null;let b=[],I=null;p.expectedType&&p.expectedType.kind!=="value"&&(I=p.expectedType);for(let M=1;M<l.length;M+=2){let O=M===1?-1/0:l[M],L=l[M+1],F=M,U=M+1;if(typeof O!="number")return p.error("Input/output pairs for \"step\" expressions must be defined using literal numeric values (not computed expressions) for the input values.",F);if(b.length&&b[b.length-1][0]>=O)return p.error("Input/output pairs for \"step\" expressions must be arranged with input values in strictly ascending order.",F);let W=p.parse(L,U,I);if(!W)return null;I=I||W.type,b.push([O,W])}return new ua(I,g,b)}evaluate(l){let p=this.labels,g=this.outputs;if(p.length===1)return g[0].evaluate(l);let b=this.input.evaluate(l);if(b<=p[0])return g[0].evaluate(l);let I=p.length;return b>=p[I-1]?g[I-1].evaluate(l):g[Vm(p,b)].evaluate(l)}eachChild(l){l(this.input);for(let p of this.outputs)l(p)}outputDefined(){return this.outputs.every(l=>l.outputDefined())}}function UD(f){return f&&f.__esModule&&Object.prototype.hasOwnProperty.call(f,"default")?f.default:f}var v1,q2,dB=function(){if(q2)return v1;function f(l,p,g,b){this.cx=3*l,this.bx=3*(g-l)-this.cx,this.ax=1-this.cx-this.bx,this.cy=3*p,this.by=3*(b-p)-this.cy,this.ay=1-this.cy-this.by,this.p1x=l,this.p1y=p,this.p2x=g,this.p2y=b}return q2=1,v1=f,f.prototype={sampleCurveX:function(l){return((this.ax*l+this.bx)*l+this.cx)*l},sampleCurveY:function(l){return((this.ay*l+this.by)*l+this.cy)*l},sampleCurveDerivativeX:function(l){return(3*this.ax*l+2*this.bx)*l+this.cx},solveCurveX:function(l,p){if(p===void 0&&(p=1e-6),l<0)return 0;if(l>1)return 1;for(var g=l,b=0;b<8;b++){var I=this.sampleCurveX(g)-l;if(Math.abs(I)<p)return g;var M=this.sampleCurveDerivativeX(g);if(Math.abs(M)<1e-6)break;g-=I/M}var O=0,L=1;for(g=l,b=0;b<20&&(I=this.sampleCurveX(g),!(Math.abs(I-l)<p));b++)l>I?O=g:L=g,g=.5*(L-O)+O;return g},solve:function(l,p){return this.sampleCurveY(this.solveCurveX(l,p))}},v1}(),Tv=UD(dB);class Cs{constructor(l,p,g,b,I){this.type=l,this.operator=p,this.interpolation=g,this.input=b,this.labels=[],this.outputs=[];for(let[M,O]of I)this.labels.push(M),this.outputs.push(O)}static interpolationFactor(l,p,g,b){let I=0;if(l.name==="exponential")I=y1(p,l.base,g,b);else if(l.name==="linear")I=y1(p,1,g,b);else if(l.name==="cubic-bezier"){let M=l.controlPoints;I=new Tv(M[0],M[1],M[2],M[3]).solve(y1(p,1,g,b))}return I}static parse(l,p){let[g,b,I,...M]=l;if(!Array.isArray(b)||b.length===0)return p.error("Expected an interpolation type expression.",1);if(b[0]==="linear")b={name:"linear"};else if(b[0]==="exponential"){let F=b[1];if(typeof F!="number")return p.error("Exponential interpolation requires a numeric base.",1,1);b={name:"exponential",base:F}}else{if(b[0]!=="cubic-bezier")return p.error(`Unknown interpolation type ${String(b[0])}`,1,0);{let F=b.slice(1);if(F.length!==4||F.some(U=>typeof U!="number"||U<0||U>1))return p.error("Cubic bezier interpolation requires four numeric arguments with values between 0 and 1.",1);b={name:"cubic-bezier",controlPoints:F}}}if(l.length-1<4)return p.error(`Expected at least 4 arguments, but found only ${l.length-1}.`);if((l.length-1)%2!=0)return p.error("Expected an even number of arguments.");if(I=p.parse(I,2,zt),!I)return null;let O=[],L=null;g!=="interpolate-hcl"&&g!=="interpolate-lab"||p.expectedType==sn?p.expectedType&&p.expectedType.kind!=="value"&&(L=p.expectedType):L=vn;for(let F=0;F<M.length;F+=2){let U=M[F],W=M[F+1],X=F+3,re=F+4;if(typeof U!="number")return p.error("Input/output pairs for \"interpolate\" expressions must be defined using literal numeric values (not computed expressions) for the input values.",X);if(O.length&&O[O.length-1][0]>=U)return p.error("Input/output pairs for \"interpolate\" expressions must be arranged with input values in strictly ascending order.",X);let ne=p.parse(W,re,L);if(!ne)return null;L=L||ne.type,O.push([U,ne])}return so(L,zt)||so(L,yn)||so(L,vn)||so(L,on)||so(L,Gr)||so(L,sn)||so(L,In)||so(L,On(zt))?new Cs(L,g,b,I,O):p.error(`Type ${Et(L)} is not interpolatable.`)}evaluate(l){let p=this.labels,g=this.outputs;if(p.length===1)return g[0].evaluate(l);let b=this.input.evaluate(l);if(b<=p[0])return g[0].evaluate(l);let I=p.length;if(b>=p[I-1])return g[I-1].evaluate(l);let M=Vm(p,b),O=Cs.interpolationFactor(this.interpolation,b,p[M],p[M+1]),L=g[M].evaluate(l),F=g[M+1].evaluate(l);switch(this.operator){case"interpolate":switch(this.type.kind){case"number":return Bs(L,F,O);case"color":return gn.interpolate(L,F,O);case"padding":return as.interpolate(L,F,O);case"colorArray":return Oi.interpolate(L,F,O);case"numberArray":return Zi.interpolate(L,F,O);case"variableAnchorOffsetCollection":return hl.interpolate(L,F,O);case"array":return os(L,F,O);case"projectionDefinition":return Gs.interpolate(L,F,O)}case"interpolate-hcl":switch(this.type.kind){case"color":return gn.interpolate(L,F,O,"hcl");case"colorArray":return Oi.interpolate(L,F,O,"hcl")}case"interpolate-lab":switch(this.type.kind){case"color":return gn.interpolate(L,F,O,"lab");case"colorArray":return Oi.interpolate(L,F,O,"lab")}}}eachChild(l){l(this.input);for(let p of this.outputs)l(p)}outputDefined(){return this.outputs.every(l=>l.outputDefined())}}function y1(f,l,p,g){let b=g-p,I=f-p;return b===0?0:l===1?I/b:(Math.pow(l,I)-1)/(Math.pow(l,b)-1)}let qp={color:gn.interpolate,number:Bs,padding:as.interpolate,numberArray:Zi.interpolate,colorArray:Oi.interpolate,variableAnchorOffsetCollection:hl.interpolate,array:os};class _1{constructor(l,p){this.type=l,this.args=p}static parse(l,p){if(l.length<2)return p.error("Expected at least one argument.");let g=null,b=p.expectedType;b&&b.kind!=="value"&&(g=b);let I=[];for(let O of l.slice(1)){let L=p.parse(O,1+I.length,g,void 0,{typeAnnotation:"omit"});if(!L)return null;g=g||L.type,I.push(L)}if(!g)throw new Error("No output type");let M=b&&I.some(O=>li(b,O.type));return new _1(M?lr:g,I)}evaluate(l){let p,g=null,b=0;for(let I of this.args)if(b++,g=I.evaluate(l),g&&g instanceof Vs&&!g.available&&(p||(p=g.name),g=null,b===this.args.length&&(g=p)),g!==null)break;return g}eachChild(l){this.args.forEach(l)}outputDefined(){return this.args.every(l=>l.outputDefined())}}function b1(f,l){return f==="=="||f==="!="?l.kind==="boolean"||l.kind==="string"||l.kind==="number"||l.kind==="null"||l.kind==="value":l.kind==="string"||l.kind==="number"||l.kind==="value"}function x1(f,l,p,g){return g.compare(l,p)===0}function Hs(f,l,p){let g=f!=="=="&&f!=="!=";return class pGe{constructor(I,M,O){this.type=hr,this.lhs=I,this.rhs=M,this.collator=O,this.hasUntypedArgument=I.type.kind==="value"||M.type.kind==="value"}static parse(I,M){if(I.length!==3&&I.length!==4)return M.error("Expected two or three arguments.");let O=I[0],L=M.parse(I[1],1,lr);if(!L)return null;if(!b1(O,L.type))return M.concat(1).error(`"${O}" comparisons are not supported for type '${Et(L.type)}'.`);let F=M.parse(I[2],2,lr);if(!F)return null;if(!b1(O,F.type))return M.concat(2).error(`"${O}" comparisons are not supported for type '${Et(F.type)}'.`);if(L.type.kind!==F.type.kind&&L.type.kind!=="value"&&F.type.kind!=="value")return M.error(`Cannot compare types '${Et(L.type)}' and '${Et(F.type)}'.`);g&&(L.type.kind==="value"&&F.type.kind!=="value"?L=new Mu(F.type,[L]):L.type.kind!=="value"&&F.type.kind==="value"&&(F=new Mu(L.type,[F])));let U=null;if(I.length===4){if(L.type.kind!=="string"&&F.type.kind!=="string"&&L.type.kind!=="value"&&F.type.kind!=="value")return M.error("Cannot use collator to compare non-string types.");if(U=M.parse(I[3],3,hn),!U)return null}return new pGe(L,F,U)}evaluate(I){let M=this.lhs.evaluate(I),O=this.rhs.evaluate(I);if(g&&this.hasUntypedArgument){let L=Xr(M),F=Xr(O);if(L.kind!==F.kind||L.kind!=="string"&&L.kind!=="number")throw new zo(`Expected arguments for "${f}" to be (string, string) or (number, number), but found (${L.kind}, ${F.kind}) instead.`)}if(this.collator&&!g&&this.hasUntypedArgument){let L=Xr(M),F=Xr(O);if(L.kind!=="string"||F.kind!=="string")return l(I,M,O)}return this.collator?p(I,M,O,this.collator.evaluate(I)):l(I,M,O)}eachChild(I){I(this.lhs),I(this.rhs),this.collator&&I(this.collator)}outputDefined(){return!0}}}let BD=Hs("==",function(f,l,p){return l===p},x1),gx=Hs("!=",function(f,l,p){return l!==p},function(f,l,p,g){return!x1(0,l,p,g)}),hB=Hs("<",function(f,l,p){return l<p},function(f,l,p,g){return g.compare(l,p)<0}),z2=Hs(">",function(f,l,p){return l>p},function(f,l,p,g){return g.compare(l,p)>0}),mB=Hs("<=",function(f,l,p){return l<=p},function(f,l,p,g){return g.compare(l,p)<=0}),gB=Hs(">=",function(f,l,p){return l>=p},function(f,l,p,g){return g.compare(l,p)>=0});class vx{constructor(l,p,g){this.type=hn,this.locale=g,this.caseSensitive=l,this.diacriticSensitive=p}static parse(l,p){if(l.length!==2)return p.error("Expected one argument.");let g=l[1];if(typeof g!="object"||Array.isArray(g))return p.error("Collator options argument must be an object.");let b=p.parse(g["case-sensitive"]!==void 0&&g["case-sensitive"],1,hr);if(!b)return null;let I=p.parse(g["diacritic-sensitive"]!==void 0&&g["diacritic-sensitive"],1,hr);if(!I)return null;let M=null;return g.locale&&(M=p.parse(g.locale,1,Nr),!M)?null:new vx(b,I,M)}evaluate(l){return new is(this.caseSensitive.evaluate(l),this.diacriticSensitive.evaluate(l),this.locale?this.locale.evaluate(l):null)}eachChild(l){l(this.caseSensitive),l(this.diacriticSensitive),this.locale&&l(this.locale)}outputDefined(){return!1}}class F2{constructor(l,p,g,b,I){this.type=Nr,this.number=l,this.locale=p,this.currency=g,this.minFractionDigits=b,this.maxFractionDigits=I}static parse(l,p){if(l.length!==3)return p.error("Expected two arguments.");let g=p.parse(l[1],1,zt);if(!g)return null;let b=l[2];if(typeof b!="object"||Array.isArray(b))return p.error("NumberFormat options argument must be an object.");let I=null;if(b.locale&&(I=p.parse(b.locale,1,Nr),!I))return null;let M=null;if(b.currency&&(M=p.parse(b.currency,1,Nr),!M))return null;let O=null;if(b["min-fraction-digits"]&&(O=p.parse(b["min-fraction-digits"],1,zt),!O))return null;let L=null;return b["max-fraction-digits"]&&(L=p.parse(b["max-fraction-digits"],1,zt),!L)?null:new F2(g,I,M,O,L)}evaluate(l){return new Intl.NumberFormat(this.locale?this.locale.evaluate(l):[],{style:this.currency?"currency":"decimal",currency:this.currency?this.currency.evaluate(l):void 0,minimumFractionDigits:this.minFractionDigits?this.minFractionDigits.evaluate(l):void 0,maximumFractionDigits:this.maxFractionDigits?this.maxFractionDigits.evaluate(l):void 0}).format(this.number.evaluate(l))}eachChild(l){l(this.number),this.locale&&l(this.locale),this.currency&&l(this.currency),this.minFractionDigits&&l(this.minFractionDigits),this.maxFractionDigits&&l(this.maxFractionDigits)}outputDefined(){return!1}}class Gm{constructor(l){this.type=_n,this.sections=l}static parse(l,p){if(l.length<2)return p.error("Expected at least one argument.");let g=l[1];if(!Array.isArray(g)&&typeof g=="object")return p.error("First argument must be an image or text section.");let b=[],I=!1;for(let M=1;M<=l.length-1;++M){let O=l[M];if(I&&typeof O=="object"&&!Array.isArray(O)){I=!1;let L=null;if(O["font-scale"]&&(L=p.parse(O["font-scale"],1,zt),!L))return null;let F=null;if(O["text-font"]&&(F=p.parse(O["text-font"],1,On(Nr)),!F))return null;let U=null;if(O["text-color"]&&(U=p.parse(O["text-color"],1,vn),!U))return null;let W=null;if(O["vertical-align"]){if(typeof O["vertical-align"]=="string"&&!Iu.includes(O["vertical-align"]))return p.error(`'vertical-align' must be one of: 'bottom', 'center', 'top' but found '${O["vertical-align"]}' instead.`);if(W=p.parse(O["vertical-align"],1,Nr),!W)return null}let X=b[b.length-1];X.scale=L,X.font=F,X.textColor=U,X.verticalAlign=W}else{let L=p.parse(l[M],1,lr);if(!L)return null;let F=L.type.kind;if(F!=="string"&&F!=="value"&&F!=="null"&&F!=="resolvedImage")return p.error("Formatted text type must be 'string', 'value', 'image' or 'null'.");I=!0,b.push({content:L,scale:null,font:null,textColor:null,verticalAlign:null})}}return new Gm(b)}evaluate(l){return new ya(this.sections.map(p=>{let g=p.content.evaluate(l);return Xr(g)===Hr?new Qf("",g,null,null,null,p.verticalAlign?p.verticalAlign.evaluate(l):null):new Qf(wn(g),null,p.scale?p.scale.evaluate(l):null,p.font?p.font.evaluate(l).join(","):null,p.textColor?p.textColor.evaluate(l):null,p.verticalAlign?p.verticalAlign.evaluate(l):null)}))}eachChild(l){for(let p of this.sections)l(p.content),p.scale&&l(p.scale),p.font&&l(p.font),p.textColor&&l(p.textColor),p.verticalAlign&&l(p.verticalAlign)}outputDefined(){return!1}}class U2{constructor(l){this.type=Hr,this.input=l}static parse(l,p){if(l.length!==2)return p.error("Expected two arguments.");let g=p.parse(l[1],1,Nr);return g?new U2(g):p.error("No image name provided.")}evaluate(l){let p=this.input.evaluate(l),g=Vs.fromString(p);return g&&l.availableImages&&(g.available=l.availableImages.indexOf(p)>-1),g}eachChild(l){l(this.input)}outputDefined(){return!1}}class yx{constructor(l){this.type=zt,this.input=l}static parse(l,p){if(l.length!==2)return p.error(`Expected 1 argument, but found ${l.length-1} instead.`);let g=p.parse(l[1],1);return g?g.type.kind!=="array"&&g.type.kind!=="string"&&g.type.kind!=="value"?p.error(`Expected argument of type string or array, but found ${Et(g.type)} instead.`):new yx(g):null}evaluate(l){let p=this.input.evaluate(l);if(typeof p=="string")return[...p].length;if(Array.isArray(p))return p.length;throw new zo(`Expected value to be of type string or array, but found ${Et(Xr(p))} instead.`)}eachChild(l){l(this.input)}outputDefined(){return!1}}let Jc=8192;function vB(f,l){let p=(180+f[0])/360,g=(180-180/Math.PI*Math.log(Math.tan(Math.PI/4+f[1]*Math.PI/360)))/360,b=Math.pow(2,l.z);return[Math.round(p*b*Jc),Math.round(g*b*Jc)]}function _x(f,l){let p=Math.pow(2,l.z);return[(b=(f[0]/Jc+l.x)/p,360*b-180),(g=(f[1]/Jc+l.y)/p,360/Math.PI*Math.atan(Math.exp((180-360*g)*Math.PI/180))-90)];var g,b}function w1(f,l){f[0]=Math.min(f[0],l[0]),f[1]=Math.min(f[1],l[1]),f[2]=Math.max(f[2],l[0]),f[3]=Math.max(f[3],l[1])}function E1(f,l){return!(f[0]<=l[0]||f[2]>=l[2]||f[1]<=l[1]||f[3]>=l[3])}function yB(f,l,p){let g=f[0]-l[0],b=f[1]-l[1],I=f[0]-p[0],M=f[1]-p[1];return g*M-I*b==0&&g*I<=0&&b*M<=0}function bx(f,l,p,g){return(b=[g[0]-p[0],g[1]-p[1]])[0]*(I=[l[0]-f[0],l[1]-f[1]])[1]-b[1]*I[0]!=0&&!(!GD(f,l,p,g)||!GD(p,g,f,l));var b,I}function _B(f,l,p){for(let g of p)for(let b=0;b<g.length-1;++b)if(bx(f,l,g[b],g[b+1]))return!0;return!1}function Hm(f,l,p=!1){let g=!1;for(let O of l)for(let L=0;L<O.length-1;L++){if(yB(f,O[L],O[L+1]))return p;(I=O[L])[1]>(b=f)[1]!=(M=O[L+1])[1]>b[1]&&b[0]<(M[0]-I[0])*(b[1]-I[1])/(M[1]-I[1])+I[0]&&(g=!g)}var b,I,M;return g}function VD(f,l){for(let p of l)if(Hm(f,p))return!0;return!1}function B2(f,l){for(let p of f)if(!Hm(p,l))return!1;for(let p=0;p<f.length-1;++p)if(_B(f[p],f[p+1],l))return!1;return!0}function bB(f,l){for(let p of l)if(B2(f,p))return!0;return!1}function GD(f,l,p,g){let b=g[0]-p[0],I=g[1]-p[1],M=(f[0]-p[0])*I-b*(f[1]-p[1]),O=(l[0]-p[0])*I-b*(l[1]-p[1]);return M>0&&O<0||M<0&&O>0}function V2(f,l,p){let g=[];for(let b=0;b<f.length;b++){let I=[];for(let M=0;M<f[b].length;M++){let O=vB(f[b][M],p);w1(l,O),I.push(O)}g.push(I)}return g}function HD(f,l,p){let g=[];for(let b=0;b<f.length;b++){let I=V2(f[b],l,p);g.push(I)}return g}function xx(f,l,p,g){if(f[0]<p[0]||f[0]>p[2]){let b=.5*g,I=f[0]-p[0]>b?-g:p[0]-f[0]>b?g:0;I===0&&(I=f[0]-p[2]>b?-g:p[2]-f[0]>b?g:0),f[0]+=I}w1(l,f)}function WD(f,l,p,g){let b=Math.pow(2,g.z)*Jc,I=[g.x*Jc,g.y*Jc],M=[];for(let O of f)for(let L of O){let F=[L.x+I[0],L.y+I[1]];xx(F,l,p,b),M.push(F)}return M}function $D(f,l,p,g){let b=Math.pow(2,g.z)*Jc,I=[g.x*Jc,g.y*Jc],M=[];for(let L of f){let F=[];for(let U of L){let W=[U.x+I[0],U.y+I[1]];w1(l,W),F.push(W)}M.push(F)}if(l[2]-l[0]<=b/2){(O=l)[0]=O[1]=1/0,O[2]=O[3]=-1/0;for(let L of M)for(let F of L)xx(F,l,p,b)}var O;return M}class Wm{constructor(l,p){this.type=hr,this.geojson=l,this.geometries=p}static parse(l,p){if(l.length!==2)return p.error(`'within' expression requires exactly one argument, but found ${l.length-1} instead.`);if(Bm(l[1])){let g=l[1];if(g.type==="FeatureCollection"){let b=[];for(let I of g.features){let{type:M,coordinates:O}=I.geometry;M==="Polygon"&&b.push(O),M==="MultiPolygon"&&b.push(...O)}if(b.length)return new Wm(g,{type:"MultiPolygon",coordinates:b})}else if(g.type==="Feature"){let b=g.geometry.type;if(b==="Polygon"||b==="MultiPolygon")return new Wm(g,g.geometry)}else if(g.type==="Polygon"||g.type==="MultiPolygon")return new Wm(g,g)}return p.error("'within' expression requires valid geojson object that contains polygon geometry type.")}evaluate(l){if(l.geometry()!=null&&l.canonicalID()!=null){if(l.geometryType()==="Point")return function(p,g){let b=[1/0,1/0,-1/0,-1/0],I=[1/0,1/0,-1/0,-1/0],M=p.canonicalID();if(g.type==="Polygon"){let O=V2(g.coordinates,I,M),L=WD(p.geometry(),b,I,M);if(!E1(b,I))return!1;for(let F of L)if(!Hm(F,O))return!1}if(g.type==="MultiPolygon"){let O=HD(g.coordinates,I,M),L=WD(p.geometry(),b,I,M);if(!E1(b,I))return!1;for(let F of L)if(!VD(F,O))return!1}return!0}(l,this.geometries);if(l.geometryType()==="LineString")return function(p,g){let b=[1/0,1/0,-1/0,-1/0],I=[1/0,1/0,-1/0,-1/0],M=p.canonicalID();if(g.type==="Polygon"){let O=V2(g.coordinates,I,M),L=$D(p.geometry(),b,I,M);if(!E1(b,I))return!1;for(let F of L)if(!B2(F,O))return!1}if(g.type==="MultiPolygon"){let O=HD(g.coordinates,I,M),L=$D(p.geometry(),b,I,M);if(!E1(b,I))return!1;for(let F of L)if(!bB(F,O))return!1}return!0}(l,this.geometries)}return!1}eachChild(){}outputDefined(){return!0}}let G2=class{constructor(f=[],l=(p,g)=>p<g?-1:p>g?1:0){if(this.data=f,this.length=this.data.length,this.compare=l,this.length>0)for(let p=(this.length>>1)-1;p>=0;p--)this._down(p)}push(f){this.data.push(f),this._up(this.length++)}pop(){if(this.length===0)return;let f=this.data[0],l=this.data.pop();return--this.length>0&&(this.data[0]=l,this._down(0)),f}peek(){return this.data[0]}_up(f){let{data:l,compare:p}=this,g=l[f];for(;f>0;){let b=f-1>>1,I=l[b];if(p(g,I)>=0)break;l[f]=I,f=b}l[f]=g}_down(f){let{data:l,compare:p}=this,g=this.length>>1,b=l[f];for(;f<g;){let I=1+(f<<1),M=I+1;if(M<this.length&&p(l[M],l[I])<0&&(I=M),p(l[I],b)>=0)break;l[f]=l[I],f=I}l[f]=b}};function H2(f,l,p=0,g=f.length-1,b=xB){for(;g>p;){if(g-p>600){let L=g-p+1,F=l-p+1,U=Math.log(L),W=.5*Math.exp(2*U/3),X=.5*Math.sqrt(U*W*(L-W)/L)*(F-L/2<0?-1:1);H2(f,l,Math.max(p,Math.floor(l-F*W/L+X)),Math.min(g,Math.floor(l+(L-F)*W/L+X)),b)}let I=f[l],M=p,O=g;for(S1(f,p,l),b(f[g],I)>0&&S1(f,p,g);M<O;){for(S1(f,M,O),M++,O--;b(f[M],I)<0;)M++;for(;b(f[O],I)>0;)O--}b(f[p],I)===0?S1(f,p,O):(O++,S1(f,O,g)),O<=l&&(p=O+1),l<=O&&(g=O-1)}}function S1(f,l,p){let g=f[l];f[l]=f[p],f[p]=g}function xB(f,l){return f<l?-1:f>l?1:0}function T1(f,l){if(f.length<=1)return[f];let p=[],g,b;for(let I of f){let M=wB(I);M!==0&&(I.area=Math.abs(M),b===void 0&&(b=M<0),b===M<0?(g&&p.push(g),g=[I]):g.push(I))}if(g&&p.push(g),l>1)for(let I=0;I<p.length;I++)p[I].length<=l||(H2(p[I],l,1,p[I].length-1,YD),p[I]=p[I].slice(0,l));return p}function YD(f,l){return l.area-f.area}function wB(f){let l=0;for(let p,g,b=0,I=f.length,M=I-1;b<I;M=b++)p=f[b],g=f[M],l+=(g.x-p.x)*(p.y+g.y);return l}let ZD=1/298.257223563,KD=ZD*(2-ZD),W2=Math.PI/180;class $2{constructor(l){let p=6378.137*W2*1e3,g=Math.cos(l*W2),b=1/(1-KD*(1-g*g)),I=Math.sqrt(b);this.kx=p*I*g,this.ky=p*I*b*(1-KD)}distance(l,p){let g=this.wrap(l[0]-p[0])*this.kx,b=(l[1]-p[1])*this.ky;return Math.sqrt(g*g+b*b)}pointOnLine(l,p){let g,b,I,M,O=1/0;for(let L=0;L<l.length-1;L++){let F=l[L][0],U=l[L][1],W=this.wrap(l[L+1][0]-F)*this.kx,X=(l[L+1][1]-U)*this.ky,re=0;W===0&&X===0||(re=(this.wrap(p[0]-F)*this.kx*W+(p[1]-U)*this.ky*X)/(W*W+X*X),re>1?(F=l[L+1][0],U=l[L+1][1]):re>0&&(F+=W/this.kx*re,U+=X/this.ky*re)),W=this.wrap(p[0]-F)*this.kx,X=(p[1]-U)*this.ky;let ne=W*W+X*X;ne<O&&(O=ne,g=F,b=U,I=L,M=re)}return{point:[g,b],index:I,t:Math.max(0,Math.min(1,M))}}wrap(l){for(;l<-180;)l+=360;for(;l>180;)l-=360;return l}}function XD(f,l){return l[0]-f[0]}function wx(f){return f[1]-f[0]+1}function td(f,l){return f[1]>=f[0]&&f[1]<l}function xo(f,l){if(f[0]>f[1])return[null,null];let p=wx(f);if(l){if(p===2)return[f,null];let b=Math.floor(p/2);return[[f[0],f[0]+b],[f[0]+b,f[1]]]}if(p===1)return[f,null];let g=Math.floor(p/2)-1;return[[f[0],f[0]+g],[f[0]+g+1,f[1]]]}function Y2(f,l){if(!td(l,f.length))return[1/0,1/0,-1/0,-1/0];let p=[1/0,1/0,-1/0,-1/0];for(let g=l[0];g<=l[1];++g)w1(p,f[g]);return p}function Z2(f){let l=[1/0,1/0,-1/0,-1/0];for(let p of f)for(let g of p)w1(l,g);return l}function JD(f){return f[0]!==-1/0&&f[1]!==-1/0&&f[2]!==1/0&&f[3]!==1/0}function K2(f,l,p){if(!JD(f)||!JD(l))return NaN;let g=0,b=0;return f[2]<l[0]&&(g=l[0]-f[2]),f[0]>l[2]&&(g=f[0]-l[2]),f[1]>l[3]&&(b=f[1]-l[3]),f[3]<l[1]&&(b=l[1]-f[3]),p.distance([0,0],[g,b])}function $m(f,l,p){let g=p.pointOnLine(l,f);return p.distance(f,g.point)}function X2(f,l,p,g,b){let I=Math.min($m(f,[p,g],b),$m(l,[p,g],b)),M=Math.min($m(p,[f,l],b),$m(g,[f,l],b));return Math.min(I,M)}function EB(f,l,p,g,b){if(!td(l,f.length)||!td(g,p.length))return 1/0;let I=1/0;for(let M=l[0];M<l[1];++M){let O=f[M],L=f[M+1];for(let F=g[0];F<g[1];++F){let U=p[F],W=p[F+1];if(bx(O,L,U,W))return 0;I=Math.min(I,X2(O,L,U,W,b))}}return I}function SB(f,l,p,g,b){if(!td(l,f.length)||!td(g,p.length))return NaN;let I=1/0;for(let M=l[0];M<=l[1];++M)for(let O=g[0];O<=g[1];++O)if(I=Math.min(I,b.distance(f[M],p[O])),I===0)return I;return I}function TB(f,l,p){if(Hm(f,l,!0))return 0;let g=1/0;for(let b of l){let I=b[0],M=b[b.length-1];if(I!==M&&(g=Math.min(g,$m(f,[M,I],p)),g===0))return g;let O=p.pointOnLine(b,f);if(g=Math.min(g,p.distance(f,O.point)),g===0)return g}return g}function IB(f,l,p,g){if(!td(l,f.length))return NaN;for(let I=l[0];I<=l[1];++I)if(Hm(f[I],p,!0))return 0;let b=1/0;for(let I=l[0];I<l[1];++I){let M=f[I],O=f[I+1];for(let L of p)for(let F=0,U=L.length,W=U-1;F<U;W=F++){let X=L[W],re=L[F];if(bx(M,O,X,re))return 0;b=Math.min(b,X2(M,O,X,re,g))}}return b}function QD(f,l){for(let p of f)for(let g of p)if(Hm(g,l,!0))return!0;return!1}function MB(f,l,p,g=1/0){let b=Z2(f),I=Z2(l);if(g!==1/0&&K2(b,I,p)>=g)return g;if(E1(b,I)){if(QD(f,l))return 0}else if(QD(l,f))return 0;let M=1/0;for(let O of f)for(let L=0,F=O.length,U=F-1;L<F;U=L++){let W=O[U],X=O[L];for(let re of l)for(let ne=0,ae=re.length,he=ae-1;ne<ae;he=ne++){let Ie=re[he],Xe=re[ne];if(bx(W,X,Ie,Xe))return 0;M=Math.min(M,X2(W,X,Ie,Xe,p))}}return M}function eN(f,l,p,g,b,I){if(!I)return;let M=K2(Y2(g,I),b,p);M<l&&f.push([M,I,[0,0]])}function Ex(f,l,p,g,b,I,M){if(!I||!M)return;let O=K2(Y2(g,I),Y2(b,M),p);O<l&&f.push([O,I,M])}function Sx(f,l,p,g,b=1/0){let I=Math.min(g.distance(f[0],p[0][0]),b);if(I===0)return I;let M=new G2([[0,[0,f.length-1],[0,0]]],XD),O=Z2(p);for(;M.length>0;){let L=M.pop();if(L[0]>=I)continue;let F=L[1],U=l?50:100;if(wx(F)<=U){if(!td(F,f.length))return NaN;if(l){let W=IB(f,F,p,g);if(isNaN(W)||W===0)return W;I=Math.min(I,W)}else for(let W=F[0];W<=F[1];++W){let X=TB(f[W],p,g);if(I=Math.min(I,X),I===0)return 0}}else{let W=xo(F,l);eN(M,I,g,f,O,W[0]),eN(M,I,g,f,O,W[1])}}return I}function Tx(f,l,p,g,b,I=1/0){let M=Math.min(I,b.distance(f[0],p[0]));if(M===0)return M;let O=new G2([[0,[0,f.length-1],[0,p.length-1]]],XD);for(;O.length>0;){let L=O.pop();if(L[0]>=M)continue;let F=L[1],U=L[2],W=l?50:100,X=g?50:100;if(wx(F)<=W&&wx(U)<=X){if(!td(F,f.length)&&td(U,p.length))return NaN;let re;if(l&&g)re=EB(f,F,p,U,b),M=Math.min(M,re);else if(l&&!g){let ne=f.slice(F[0],F[1]+1);for(let ae=U[0];ae<=U[1];++ae)if(re=$m(p[ae],ne,b),M=Math.min(M,re),M===0)return M}else if(!l&&g){let ne=p.slice(U[0],U[1]+1);for(let ae=F[0];ae<=F[1];++ae)if(re=$m(f[ae],ne,b),M=Math.min(M,re),M===0)return M}else re=SB(f,F,p,U,b),M=Math.min(M,re)}else{let re=xo(F,l),ne=xo(U,g);Ex(O,M,b,f,p,re[0],ne[0]),Ex(O,M,b,f,p,re[0],ne[1]),Ex(O,M,b,f,p,re[1],ne[0]),Ex(O,M,b,f,p,re[1],ne[1])}}return M}function J2(f){return f.type==="MultiPolygon"?f.coordinates.map(l=>({type:"Polygon",coordinates:l})):f.type==="MultiLineString"?f.coordinates.map(l=>({type:"LineString",coordinates:l})):f.type==="MultiPoint"?f.coordinates.map(l=>({type:"Point",coordinates:l})):[f]}class Ym{constructor(l,p){this.type=zt,this.geojson=l,this.geometries=p}static parse(l,p){if(l.length!==2)return p.error(`'distance' expression requires exactly one argument, but found ${l.length-1} instead.`);if(Bm(l[1])){let g=l[1];if(g.type==="FeatureCollection")return new Ym(g,g.features.map(b=>J2(b.geometry)).flat());if(g.type==="Feature")return new Ym(g,J2(g.geometry));if("type"in g&&"coordinates"in g)return new Ym(g,J2(g))}return p.error("'distance' expression requires valid geojson object that contains polygon geometry type.")}evaluate(l){if(l.geometry()!=null&&l.canonicalID()!=null){if(l.geometryType()==="Point")return function(p,g){let b=p.geometry(),I=b.flat().map(L=>_x([L.x,L.y],p.canonical));if(b.length===0)return NaN;let M=new $2(I[0][1]),O=1/0;for(let L of g){switch(L.type){case"Point":O=Math.min(O,Tx(I,!1,[L.coordinates],!1,M,O));break;case"LineString":O=Math.min(O,Tx(I,!1,L.coordinates,!0,M,O));break;case"Polygon":O=Math.min(O,Sx(I,!1,L.coordinates,M,O))}if(O===0)return O}return O}(l,this.geometries);if(l.geometryType()==="LineString")return function(p,g){let b=p.geometry(),I=b.flat().map(L=>_x([L.x,L.y],p.canonical));if(b.length===0)return NaN;let M=new $2(I[0][1]),O=1/0;for(let L of g){switch(L.type){case"Point":O=Math.min(O,Tx(I,!0,[L.coordinates],!1,M,O));break;case"LineString":O=Math.min(O,Tx(I,!0,L.coordinates,!0,M,O));break;case"Polygon":O=Math.min(O,Sx(I,!0,L.coordinates,M,O))}if(O===0)return O}return O}(l,this.geometries);if(l.geometryType()==="Polygon")return function(p,g){let b=p.geometry();if(b.length===0||b[0].length===0)return NaN;let I=T1(b,0).map(L=>L.map(F=>F.map(U=>_x([U.x,U.y],p.canonical)))),M=new $2(I[0][0][0][1]),O=1/0;for(let L of g)for(let F of I){switch(L.type){case"Point":O=Math.min(O,Sx([L.coordinates],!1,F,M,O));break;case"LineString":O=Math.min(O,Sx(L.coordinates,!0,F,M,O));break;case"Polygon":O=Math.min(O,MB(F,L.coordinates,M,O))}if(O===0)return O}return O}(l,this.geometries)}return NaN}eachChild(){}outputDefined(){return!0}}class I1{constructor(l){this.type=lr,this.key=l}static parse(l,p){if(l.length!==2)return p.error(`Expected 1 argument, but found ${l.length-1} instead.`);let g=l[1];return g==null?p.error("Global state property must be defined."):typeof g!="string"?p.error(`Global state property must be string, but found ${typeof l[1]} instead.`):new I1(g)}evaluate(l){var p;let g=(p=l.globals)===null||p===void 0?void 0:p.globalState;return g&&Object.keys(g).length!==0?Wn(g,this.key):null}eachChild(){}outputDefined(){return!1}}let Iv={"==":BD,"!=":gx,">":z2,"<":hB,">=":gB,"<=":mB,array:Mu,at:hx,boolean:Mu,case:Sv,coalesce:_1,collator:vx,format:Gm,image:U2,in:mx,"index-of":Xc,interpolate:Cs,"interpolate-hcl":Cs,"interpolate-lab":Cs,length:yx,let:m1,literal:ed,match:ss,number:Mu,"number-format":F2,object:Mu,slice:g1,step:ua,string:Mu,"to-boolean":jp,"to-color":jp,"to-number":jp,"to-string":jp,var:dx,within:Wm,distance:Ym,"global-state":I1};class ic{constructor(l,p,g,b){this.name=l,this.type=p,this._evaluate=g,this.args=b}evaluate(l){return this._evaluate(l,this.args)}eachChild(l){this.args.forEach(l)}outputDefined(){return!1}static parse(l,p){let g=l[0],b=ic.definitions[g];if(!b)return p.error(`Unknown expression "${g}". If you wanted a literal array, use ["literal", [...]].`,0);let I=Array.isArray(b)?b[0]:b.type,M=Array.isArray(b)?[[b[1],b[2]]]:b.overloads,O=M.filter(([F])=>!Array.isArray(F)||F.length===l.length-1),L=null;for(let[F,U]of O){L=new Ev(p.registry,Ix,p.path,null,p.scope);let W=[],X=!1;for(let re=1;re<l.length;re++){let ne=l[re],ae=Array.isArray(F)?F[re-1]:F.type,he=L.parse(ne,1+W.length,ae);if(!he){X=!0;break}W.push(he)}if(!X)if(Array.isArray(F)&&F.length!==W.length)L.error(`Expected ${F.length} arguments, but found ${W.length} instead.`);else{for(let re=0;re<W.length;re++){let ne=Array.isArray(F)?F[re]:F.type,ae=W[re];L.concat(re+1).checkSubtype(ne,ae.type)}if(L.errors.length===0)return new ic(g,I,U,W)}}if(O.length===1)p.errors.push(...L.errors);else{let F=(O.length?O:M).map(([W])=>{return X=W,Array.isArray(X)?`(${X.map(Et).join(", ")})`:`(${Et(X.type)}...)`;var X}).join(" | "),U=[];for(let W=1;W<l.length;W++){let X=p.parse(l[W],1+U.length);if(!X)return null;U.push(Et(X.type))}p.error(`Expected arguments of type ${F}, but found (${U.join(", ")}) instead.`)}return null}static register(l,p){ic.definitions=p;for(let g in p)l[g]=ic}}function tN(f,[l,p,g,b]){l=l.evaluate(f),p=p.evaluate(f),g=g.evaluate(f);let I=b?b.evaluate(f):1,M=bi(l,p,g,I);if(M)throw new zo(M);return new gn(l/255,p/255,g/255,I,!1)}function rN(f,l){return f in l}function Q2(f,l){let p=l[f];return p===void 0?null:p}function Zm(f){return{type:f}}function Ix(f){if(f instanceof dx)return Ix(f.boundExpression);if(f instanceof ic&&f.name==="error"||f instanceof vx||f instanceof Wm||f instanceof Ym||f instanceof I1)return!1;let l=f instanceof jp||f instanceof Mu,p=!0;return f.eachChild(g=>{p=l?p&&Ix(g):p&&g instanceof ed}),!!p&&Mx(f)&&Cx(f,["zoom","heatmap-density","elevation","line-progress","accumulated","is-supported-script"])}function Mx(f){if(f instanceof ic&&(f.name==="get"&&f.args.length===1||f.name==="feature-state"||f.name==="has"&&f.args.length===1||f.name==="properties"||f.name==="geometry-type"||f.name==="id"||/^filter-/.test(f.name))||f instanceof Wm||f instanceof Ym)return!1;let l=!0;return f.eachChild(p=>{l&&!Mx(p)&&(l=!1)}),l}function M1(f){if(f instanceof ic&&f.name==="feature-state")return!1;let l=!0;return f.eachChild(p=>{l&&!M1(p)&&(l=!1)}),l}function Cx(f,l){if(f instanceof ic&&l.indexOf(f.name)>=0)return!1;let p=!0;return f.eachChild(g=>{p&&!Cx(g,l)&&(p=!1)}),p}function nN(f){return{result:"success",value:f}}function Mv(f){return{result:"error",value:f}}function hh(f){return f["property-type"]==="data-driven"||f["property-type"]==="cross-faded-data-driven"}function oN(f){return!!f.expression&&f.expression.parameters.indexOf("zoom")>-1}function eI(f){return!!f.expression&&f.expression.interpolated}function Xn(f){return f instanceof Number?"number":f instanceof String?"string":f instanceof Boolean?"boolean":Array.isArray(f)?"array":f===null?"null":typeof f}function C1(f){return typeof f=="object"&&f!==null&&!Array.isArray(f)&&Xr(f)===An}function CB(f){return f}function iN(f,l){let p=f.stops&&typeof f.stops[0][0]=="object",g=p||!(p||f.property!==void 0),b=f.type||(eI(l)?"exponential":"interval"),I=function(U){switch(U.type){case"color":return gn.parse;case"padding":return as.parse;case"numberArray":return Zi.parse;case"colorArray":return Oi.parse;default:return null}}(l);if(I&&((f=jo({},f)).stops&&(f.stops=f.stops.map(U=>[U[0],I(U[1])])),f.default=I(f.default?f.default:l.default)),f.colorSpace&&(M=f.colorSpace)!=="rgb"&&M!=="hcl"&&M!=="lab")throw new Error(`Unknown color space: "${f.colorSpace}"`);var M;let O=function(U){switch(U){case"exponential":return sN;case"interval":return AB;case"categorical":return aN;case"identity":return OB;default:throw new Error(`Unknown function type "${U}"`)}}(b),L,F;if(b==="categorical"){L=Object.create(null);for(let U of f.stops)L[U[0]]=U[1];F=typeof f.stops[0][0]}if(p){let U={},W=[];for(let ne=0;ne<f.stops.length;ne++){let ae=f.stops[ne],he=ae[0].zoom;U[he]===void 0&&(U[he]={zoom:he,type:f.type,property:f.property,default:f.default,stops:[]},W.push(he)),U[he].stops.push([ae[0].value,ae[1]])}let X=[];for(let ne of W)X.push([U[ne].zoom,iN(U[ne],l)]);let re={name:"linear"};return{kind:"composite",interpolationType:re,interpolationFactor:Cs.interpolationFactor.bind(void 0,re),zoomStops:X.map(ne=>ne[0]),evaluate:({zoom:ne},ae)=>sN({stops:X,base:f.base},l,ne).evaluate(ne,ae)}}if(g){let U=b==="exponential"?{name:"exponential",base:f.base!==void 0?f.base:1}:null;return{kind:"camera",interpolationType:U,interpolationFactor:Cs.interpolationFactor.bind(void 0,U),zoomStops:f.stops.map(W=>W[0]),evaluate:({zoom:W})=>O(f,l,W,L,F)}}return{kind:"source",evaluate(U,W){let X=W&&W.properties?W.properties[f.property]:void 0;return X===void 0?mh(f.default,l.default):O(f,l,X,L,F)}}}function mh(f,l,p){return f!==void 0?f:l!==void 0?l:p!==void 0?p:void 0}function aN(f,l,p,g,b){return mh(typeof p===b?g[p]:void 0,f.default,l.default)}function AB(f,l,p){if(Xn(p)!=="number")return mh(f.default,l.default);let g=f.stops.length;if(g===1||p<=f.stops[0][0])return f.stops[0][1];if(p>=f.stops[g-1][0])return f.stops[g-1][1];let b=Vm(f.stops.map(I=>I[0]),p);return f.stops[b][1]}function sN(f,l,p){let g=f.base!==void 0?f.base:1;if(Xn(p)!=="number")return mh(f.default,l.default);let b=f.stops.length;if(b===1||p<=f.stops[0][0])return f.stops[0][1];if(p>=f.stops[b-1][0])return f.stops[b-1][1];let I=Vm(f.stops.map(U=>U[0]),p),M=function(U,W,X,re){let ne=re-X,ae=U-X;return ne===0?0:W===1?ae/ne:(Math.pow(W,ae)-1)/(Math.pow(W,ne)-1)}(p,g,f.stops[I][0],f.stops[I+1][0]),O=f.stops[I][1],L=f.stops[I+1][1],F=qp[l.type]||CB;return typeof O.evaluate=="function"?{evaluate(...U){let W=O.evaluate.apply(void 0,U),X=L.evaluate.apply(void 0,U);if(W!==void 0&&X!==void 0)return F(W,X,M,f.colorSpace)}}:F(O,L,M,f.colorSpace)}function OB(f,l,p){switch(l.type){case"color":p=gn.parse(p);break;case"formatted":p=ya.fromString(p.toString());break;case"resolvedImage":p=Vs.fromString(p.toString());break;case"padding":p=as.parse(p);break;case"colorArray":p=Oi.parse(p);break;case"numberArray":p=Zi.parse(p);break;default:Xn(p)===l.type||l.type==="enum"&&l.values[p]||(p=void 0)}return mh(p,f.default,l.default)}ic.register(Iv,{error:[{kind:"error"},[Nr],(f,[l])=>{throw new zo(l.evaluate(f))}],typeof:[Nr,[lr],(f,[l])=>Et(Xr(l.evaluate(f)))],"to-rgba":[On(zt,4),[vn],(f,[l])=>{let[p,g,b,I]=l.evaluate(f).rgb;return[255*p,255*g,255*b,I]}],rgb:[vn,[zt,zt,zt],tN],rgba:[vn,[zt,zt,zt,zt],tN],has:{type:hr,overloads:[[[Nr],(f,[l])=>rN(l.evaluate(f),f.properties())],[[Nr,An],(f,[l,p])=>rN(l.evaluate(f),p.evaluate(f))]]},get:{type:lr,overloads:[[[Nr],(f,[l])=>Q2(l.evaluate(f),f.properties())],[[Nr,An],(f,[l,p])=>Q2(l.evaluate(f),p.evaluate(f))]]},"feature-state":[lr,[Nr],(f,[l])=>Q2(l.evaluate(f),f.featureState||{})],properties:[An,[],f=>f.properties()],"geometry-type":[Nr,[],f=>f.geometryType()],id:[lr,[],f=>f.id()],zoom:[zt,[],f=>f.globals.zoom],"heatmap-density":[zt,[],f=>f.globals.heatmapDensity||0],elevation:[zt,[],f=>f.globals.elevation||0],"line-progress":[zt,[],f=>f.globals.lineProgress||0],accumulated:[lr,[],f=>f.globals.accumulated===void 0?null:f.globals.accumulated],"+":[zt,Zm(zt),(f,l)=>{let p=0;for(let g of l)p+=g.evaluate(f);return p}],"*":[zt,Zm(zt),(f,l)=>{let p=1;for(let g of l)p*=g.evaluate(f);return p}],"-":{type:zt,overloads:[[[zt,zt],(f,[l,p])=>l.evaluate(f)-p.evaluate(f)],[[zt],(f,[l])=>-l.evaluate(f)]]},"/":[zt,[zt,zt],(f,[l,p])=>l.evaluate(f)/p.evaluate(f)],"%":[zt,[zt,zt],(f,[l,p])=>l.evaluate(f)%p.evaluate(f)],ln2:[zt,[],()=>Math.LN2],pi:[zt,[],()=>Math.PI],e:[zt,[],()=>Math.E],"^":[zt,[zt,zt],(f,[l,p])=>Math.pow(l.evaluate(f),p.evaluate(f))],sqrt:[zt,[zt],(f,[l])=>Math.sqrt(l.evaluate(f))],log10:[zt,[zt],(f,[l])=>Math.log(l.evaluate(f))/Math.LN10],ln:[zt,[zt],(f,[l])=>Math.log(l.evaluate(f))],log2:[zt,[zt],(f,[l])=>Math.log(l.evaluate(f))/Math.LN2],sin:[zt,[zt],(f,[l])=>Math.sin(l.evaluate(f))],cos:[zt,[zt],(f,[l])=>Math.cos(l.evaluate(f))],tan:[zt,[zt],(f,[l])=>Math.tan(l.evaluate(f))],asin:[zt,[zt],(f,[l])=>Math.asin(l.evaluate(f))],acos:[zt,[zt],(f,[l])=>Math.acos(l.evaluate(f))],atan:[zt,[zt],(f,[l])=>Math.atan(l.evaluate(f))],min:[zt,Zm(zt),(f,l)=>Math.min(...l.map(p=>p.evaluate(f)))],max:[zt,Zm(zt),(f,l)=>Math.max(...l.map(p=>p.evaluate(f)))],abs:[zt,[zt],(f,[l])=>Math.abs(l.evaluate(f))],round:[zt,[zt],(f,[l])=>{let p=l.evaluate(f);return p<0?-Math.round(-p):Math.round(p)}],floor:[zt,[zt],(f,[l])=>Math.floor(l.evaluate(f))],ceil:[zt,[zt],(f,[l])=>Math.ceil(l.evaluate(f))],"filter-==":[hr,[Nr,lr],(f,[l,p])=>f.properties()[l.value]===p.value],"filter-id-==":[hr,[lr],(f,[l])=>f.id()===l.value],"filter-type-==":[hr,[Nr],(f,[l])=>f.geometryType()===l.value],"filter-<":[hr,[Nr,lr],(f,[l,p])=>{let g=f.properties()[l.value],b=p.value;return typeof g==typeof b&&g<b}],"filter-id-<":[hr,[lr],(f,[l])=>{let p=f.id(),g=l.value;return typeof p==typeof g&&p<g}],"filter->":[hr,[Nr,lr],(f,[l,p])=>{let g=f.properties()[l.value],b=p.value;return typeof g==typeof b&&g>b}],"filter-id->":[hr,[lr],(f,[l])=>{let p=f.id(),g=l.value;return typeof p==typeof g&&p>g}],"filter-<=":[hr,[Nr,lr],(f,[l,p])=>{let g=f.properties()[l.value],b=p.value;return typeof g==typeof b&&g<=b}],"filter-id-<=":[hr,[lr],(f,[l])=>{let p=f.id(),g=l.value;return typeof p==typeof g&&p<=g}],"filter->=":[hr,[Nr,lr],(f,[l,p])=>{let g=f.properties()[l.value],b=p.value;return typeof g==typeof b&&g>=b}],"filter-id->=":[hr,[lr],(f,[l])=>{let p=f.id(),g=l.value;return typeof p==typeof g&&p>=g}],"filter-has":[hr,[lr],(f,[l])=>l.value in f.properties()],"filter-has-id":[hr,[],f=>f.id()!==null&&f.id()!==void 0],"filter-type-in":[hr,[On(Nr)],(f,[l])=>l.value.indexOf(f.geometryType())>=0],"filter-id-in":[hr,[On(lr)],(f,[l])=>l.value.indexOf(f.id())>=0],"filter-in-small":[hr,[Nr,On(lr)],(f,[l,p])=>p.value.indexOf(f.properties()[l.value])>=0],"filter-in-large":[hr,[Nr,On(lr)],(f,[l,p])=>function(g,b,I,M){for(;I<=M;){let O=I+M>>1;if(b[O]===g)return!0;b[O]>g?M=O-1:I=O+1}return!1}(f.properties()[l.value],p.value,0,p.value.length-1)],all:{type:hr,overloads:[[[hr,hr],(f,[l,p])=>l.evaluate(f)&&p.evaluate(f)],[Zm(hr),(f,l)=>{for(let p of l)if(!p.evaluate(f))return!1;return!0}]]},any:{type:hr,overloads:[[[hr,hr],(f,[l,p])=>l.evaluate(f)||p.evaluate(f)],[Zm(hr),(f,l)=>{for(let p of l)if(p.evaluate(f))return!0;return!1}]]},"!":[hr,[hr],(f,[l])=>!l.evaluate(f)],"is-supported-script":[hr,[Nr],(f,[l])=>{let p=f.globals&&f.globals.isSupportedScript;return!p||p(l.evaluate(f))}],upcase:[Nr,[Nr],(f,[l])=>l.evaluate(f).toUpperCase()],downcase:[Nr,[Nr],(f,[l])=>l.evaluate(f).toLowerCase()],concat:[Nr,Zm(lr),(f,l)=>l.map(p=>wn(p.evaluate(f))).join("")],"resolved-locale":[Nr,[hn],(f,[l])=>l.evaluate(f).resolvedLocale()]});class tI{constructor(l,p){this.expression=l,this._warningHistory={},this._evaluator=new j2,this._defaultValue=p?function(g){if(g.type==="color"&&C1(g.default))return new gn(0,0,0,0);switch(g.type){case"color":return gn.parse(g.default)||null;case"padding":return as.parse(g.default)||null;case"numberArray":return Zi.parse(g.default)||null;case"colorArray":return Oi.parse(g.default)||null;case"variableAnchorOffsetCollection":return hl.parse(g.default)||null;case"projectionDefinition":return Gs.parse(g.default)||null;default:return g.default===void 0?null:g.default}}(p):null,this._enumValues=p&&p.type==="enum"?p.values:null}evaluateWithoutErrorHandling(l,p,g,b,I,M){return this._evaluator.globals=l,this._evaluator.feature=p,this._evaluator.featureState=g,this._evaluator.canonical=b,this._evaluator.availableImages=I||null,this._evaluator.formattedSection=M,this.expression.evaluate(this._evaluator)}evaluate(l,p,g,b,I,M){this._evaluator.globals=l,this._evaluator.feature=p||null,this._evaluator.featureState=g||null,this._evaluator.canonical=b,this._evaluator.availableImages=I||null,this._evaluator.formattedSection=M||null;try{let O=this.expression.evaluate(this._evaluator);if(O==null||typeof O=="number"&&O!=O)return this._defaultValue;if(this._enumValues&&!(O in this._enumValues))throw new zo(`Expected value to be one of ${Object.keys(this._enumValues).map(L=>JSON.stringify(L)).join(", ")}, but found ${JSON.stringify(O)} instead.`);return O}catch(O){return this._warningHistory[O.message]||(this._warningHistory[O.message]=!0,typeof console!="undefined"&&console.warn(O.message)),this._defaultValue}}}function Ax(f){return Array.isArray(f)&&f.length>0&&typeof f[0]=="string"&&f[0]in Iv}function A1(f,l){let p=new Ev(Iv,Ix,[],l?function(b){let I={color:vn,string:Nr,number:zt,enum:Nr,boolean:hr,formatted:_n,padding:on,numberArray:Gr,colorArray:sn,projectionDefinition:yn,resolvedImage:Hr,variableAnchorOffsetCollection:In};return b.type==="array"?On(I[b.value]||lr,b.length):I[b.type]}(l):void 0),g=p.parse(f,void 0,void 0,void 0,l&&l.type==="string"?{typeAnnotation:"coerce"}:void 0);return g?nN(new tI(g,l)):Mv(p.errors)}class O1{constructor(l,p){this.kind=l,this._styleExpression=p,this.isStateDependent=l!=="constant"&&!M1(p.expression),this.globalStateRefs=N1(p.expression)}evaluateWithoutErrorHandling(l,p,g,b,I,M){return this._styleExpression.evaluateWithoutErrorHandling(l,p,g,b,I,M)}evaluate(l,p,g,b,I,M){return this._styleExpression.evaluate(l,p,g,b,I,M)}}class rI{constructor(l,p,g,b){this.kind=l,this.zoomStops=g,this._styleExpression=p,this.isStateDependent=l!=="camera"&&!M1(p.expression),this.globalStateRefs=N1(p.expression),this.interpolationType=b}evaluateWithoutErrorHandling(l,p,g,b,I,M){return this._styleExpression.evaluateWithoutErrorHandling(l,p,g,b,I,M)}evaluate(l,p,g,b,I,M){return this._styleExpression.evaluate(l,p,g,b,I,M)}interpolationFactor(l,p,g){return this.interpolationType?Cs.interpolationFactor(this.interpolationType,l,p,g):0}}function lN(f,l){let p=A1(f,l);if(p.result==="error")return p;let g=p.value.expression,b=Mx(g);if(!b&&!hh(l))return Mv([new Ko("","data expressions not supported")]);let I=Cx(g,["zoom"]);if(!I&&!oN(l))return Mv([new Ko("","zoom expressions not supported")]);let M=D1(g);return M||I?M instanceof Ko?Mv([M]):M instanceof Cs&&!eI(l)?Mv([new Ko("","\"interpolate\" expressions cannot be used with this property")]):nN(M?new rI(b?"camera":"composite",p.value,M.labels,M instanceof Cs?M.interpolation:void 0):new O1(b?"constant":"source",p.value)):Mv([new Ko("","\"zoom\" expression may only be used as input to a top-level \"step\" or \"interpolate\" expression.")])}class P1{constructor(l,p){this._parameters=l,this._specification=p,jo(this,iN(this._parameters,this._specification))}static deserialize(l){return new P1(l._parameters,l._specification)}static serialize(l){return{_parameters:l._parameters,_specification:l._specification}}}function D1(f){let l=null;if(f instanceof m1)l=D1(f.result);else if(f instanceof _1){for(let p of f.args)if(l=D1(p),l)break}else(f instanceof ua||f instanceof Cs)&&f.input instanceof ic&&f.input.name==="zoom"&&(l=f);return l instanceof Ko||f.eachChild(p=>{let g=D1(p);g instanceof Ko?l=g:!l&&g?l=new Ko("","\"zoom\" expression may only be used as input to a top-level \"step\" or \"interpolate\" expression."):l&&g&&l!==g&&(l=new Ko("","Only one zoom-based \"step\" or \"interpolate\" subexpression may be used in an expression."))}),l}function N1(f,l=new Set){return f instanceof I1&&l.add(f.key),f.eachChild(p=>{N1(p,l)}),l}function Ox(f){if(f===!0||f===!1)return!0;if(!Array.isArray(f)||f.length===0)return!1;switch(f[0]){case"has":return f.length>=2&&f[1]!=="$id"&&f[1]!=="$type";case"in":return f.length>=3&&(typeof f[1]!="string"||Array.isArray(f[2]));case"!in":case"!has":case"none":return!1;case"==":case"!=":case">":case">=":case"<":case"<=":return f.length!==3||Array.isArray(f[1])||Array.isArray(f[2]);case"any":case"all":for(let l of f.slice(1))if(!Ox(l)&&typeof l!="boolean")return!1;return!0;default:return!0}}let nI={type:"boolean",default:!1,transition:!1,"property-type":"data-driven",expression:{interpolated:!1,parameters:["zoom","feature"]}};function Km(f){if(f==null)return{filter:()=>!0,needGeometry:!1,getGlobalStateRefs:()=>new Set};Ox(f)||(f=Xm(f));let l=A1(f,nI);if(l.result==="error")throw new Error(l.value.map(p=>`${p.key}: ${p.message}`).join(", "));return{filter:(p,g,b)=>l.value.evaluate(p,g,{},b),needGeometry:Px(f),getGlobalStateRefs:()=>N1(l.value.expression)}}function oI(f,l){return f<l?-1:f>l?1:0}function Px(f){if(!Array.isArray(f))return!1;if(f[0]==="within"||f[0]==="distance")return!0;for(let l=1;l<f.length;l++)if(Px(f[l]))return!0;return!1}function Xm(f){if(!f)return!0;let l=f[0];return f.length<=1?l!=="any":l==="=="?iI(f[1],f[2],"=="):l==="!="?Dx(iI(f[1],f[2],"==")):l==="<"||l===">"||l==="<="||l===">="?iI(f[1],f[2],l):l==="any"?(p=f.slice(1),["any"].concat(p.map(Xm))):l==="all"?["all"].concat(f.slice(1).map(Xm)):l==="none"?["all"].concat(f.slice(1).map(Xm).map(Dx)):l==="in"?uN(f[1],f.slice(2)):l==="!in"?Dx(uN(f[1],f.slice(2))):l==="has"?cN(f[1]):l!=="!has"||Dx(cN(f[1]));var p}function iI(f,l,p){switch(f){case"$type":return[`filter-type-${p}`,l];case"$id":return[`filter-id-${p}`,l];default:return[`filter-${p}`,f,l]}}function uN(f,l){if(l.length===0)return!1;switch(f){case"$type":return["filter-type-in",["literal",l]];case"$id":return["filter-id-in",["literal",l]];default:return l.length>200&&!l.some(p=>typeof p!=typeof l[0])?["filter-in-large",f,["literal",l.sort(oI)]]:["filter-in-small",f,["literal",l]]}}function cN(f){switch(f){case"$type":return!0;case"$id":return["filter-has-id"];default:return["filter-has",f]}}function Dx(f){return["!",f]}function aI(f){let l=typeof f;if(l==="number"||l==="boolean"||l==="string"||f==null)return JSON.stringify(f);if(Array.isArray(f)){let b="[";for(let I of f)b+=`${aI(I)},`;return`${b}]`}let p=Object.keys(f).sort(),g="{";for(let b=0;b<p.length;b++)g+=`${JSON.stringify(p[b])}:${aI(f[p[b]])},`;return`${g}}`}function PB(f){let l="";for(let p of Dt)l+=`/${aI(f[p])}`;return l}function sI(f){let l=f.value;return l?[new Rt(f.key,l,"constants have been deprecated as of v8")]:[]}function Ki(f){return f instanceof Number||f instanceof String||f instanceof Boolean?f.valueOf():f}function zp(f){if(Array.isArray(f))return f.map(zp);if(f instanceof Object&&!(f instanceof Number||f instanceof String||f instanceof Boolean)){let l={};for(let p in f)l[p]=zp(f[p]);return l}return Ki(f)}function ac(f){let l=f.key,p=f.value,g=f.valueSpec||{},b=f.objectElementValidators||{},I=f.style,M=f.styleSpec,O=f.validateSpec,L=[],F=Xn(p);if(F!=="object")return[new Rt(l,p,`object expected, ${F} found`)];for(let U in p){let W=U.split(".")[0],X=Wn(g,W)||g["*"],re;if(Wn(b,W))re=b[W];else if(Wn(g,W))re=O;else if(b["*"])re=b["*"];else{if(!g["*"]){L.push(new Rt(l,p[U],`unknown property "${U}"`));continue}re=O}L=L.concat(re({key:(l&&`${l}.`)+U,value:p[U],valueSpec:X,style:I,styleSpec:M,object:p,objectKey:U,validateSpec:O},p))}for(let U in g)b[U]||g[U].required&&g[U].default===void 0&&p[U]===void 0&&L.push(new Rt(l,p,`missing required property "${U}"`));return L}function Nx(f){let l=f.value,p=f.valueSpec,g=f.style,b=f.styleSpec,I=f.key,M=f.arrayElementValidator||f.validateSpec;if(Xn(l)!=="array")return[new Rt(I,l,`array expected, ${Xn(l)} found`)];if(p.length&&l.length!==p.length)return[new Rt(I,l,`array length ${p.length} expected, length ${l.length} found`)];if(p["min-length"]&&l.length<p["min-length"])return[new Rt(I,l,`array length at least ${p["min-length"]} expected, length ${l.length} found`)];let O={type:p.value,values:p.values};b.$version<7&&(O.function=p.function),Xn(p.value)==="object"&&(O=p.value);let L=[];for(let F=0;F<l.length;F++)L=L.concat(M({array:l,arrayIndex:F,value:l[F],valueSpec:O,validateSpec:f.validateSpec,style:g,styleSpec:b,key:`${I}[${F}]`}));return L}function L1(f){let l=f.key,p=f.value,g=f.valueSpec,b=Xn(p);return b==="number"&&p!=p&&(b="NaN"),b!=="number"?[new Rt(l,p,`number expected, ${b} found`)]:"minimum"in g&&p<g.minimum?[new Rt(l,p,`${p} is less than the minimum value ${g.minimum}`)]:"maximum"in g&&p>g.maximum?[new Rt(l,p,`${p} is greater than the maximum value ${g.maximum}`)]:[]}function pN(f){let l=f.valueSpec,p=Ki(f.value.type),g,b,I,M={},O=p!=="categorical"&&f.value.property===void 0,L=!O,F=Xn(f.value.stops)==="array"&&Xn(f.value.stops[0])==="array"&&Xn(f.value.stops[0][0])==="object",U=ac({key:f.key,value:f.value,valueSpec:f.styleSpec.function,validateSpec:f.validateSpec,style:f.style,styleSpec:f.styleSpec,objectElementValidators:{stops:function(re){if(p==="identity")return[new Rt(re.key,re.value,"identity function may not have a \"stops\" property")];let ne=[],ae=re.value;return ne=ne.concat(Nx({key:re.key,value:ae,valueSpec:re.valueSpec,validateSpec:re.validateSpec,style:re.style,styleSpec:re.styleSpec,arrayElementValidator:W})),Xn(ae)==="array"&&ae.length===0&&ne.push(new Rt(re.key,ae,"array must have at least one stop")),ne},default:function(re){return re.validateSpec({key:re.key,value:re.value,valueSpec:l,validateSpec:re.validateSpec,style:re.style,styleSpec:re.styleSpec})}}});return p==="identity"&&O&&U.push(new Rt(f.key,f.value,"missing required property \"property\"")),p==="identity"||f.value.stops||U.push(new Rt(f.key,f.value,"missing required property \"stops\"")),p==="exponential"&&f.valueSpec.expression&&!eI(f.valueSpec)&&U.push(new Rt(f.key,f.value,"exponential functions not supported")),f.styleSpec.$version>=8&&(L&&!hh(f.valueSpec)?U.push(new Rt(f.key,f.value,"property functions not supported")):O&&!oN(f.valueSpec)&&U.push(new Rt(f.key,f.value,"zoom functions not supported"))),p!=="categorical"&&!F||f.value.property!==void 0||U.push(new Rt(f.key,f.value,"\"property\" property is required")),U;function W(re){let ne=[],ae=re.value,he=re.key;if(Xn(ae)!=="array")return[new Rt(he,ae,`array expected, ${Xn(ae)} found`)];if(ae.length!==2)return[new Rt(he,ae,`array length 2 expected, length ${ae.length} found`)];if(F){if(Xn(ae[0])!=="object")return[new Rt(he,ae,`object expected, ${Xn(ae[0])} found`)];if(ae[0].zoom===void 0)return[new Rt(he,ae,"object stop key must have zoom")];if(ae[0].value===void 0)return[new Rt(he,ae,"object stop key must have value")];if(I&&I>Ki(ae[0].zoom))return[new Rt(he,ae[0].zoom,"stop zoom values must appear in ascending order")];Ki(ae[0].zoom)!==I&&(I=Ki(ae[0].zoom),b=void 0,M={}),ne=ne.concat(ac({key:`${he}[0]`,value:ae[0],valueSpec:{zoom:{}},validateSpec:re.validateSpec,style:re.style,styleSpec:re.styleSpec,objectElementValidators:{zoom:L1,value:X}}))}else ne=ne.concat(X({key:`${he}[0]`,value:ae[0],validateSpec:re.validateSpec,style:re.style,styleSpec:re.styleSpec},ae));return Ax(zp(ae[1]))?ne.concat([new Rt(`${he}[1]`,ae[1],"expressions are not allowed in function stops.")]):ne.concat(re.validateSpec({key:`${he}[1]`,value:ae[1],valueSpec:l,validateSpec:re.validateSpec,style:re.style,styleSpec:re.styleSpec}))}function X(re,ne){let ae=Xn(re.value),he=Ki(re.value),Ie=re.value!==null?re.value:ne;if(g){if(ae!==g)return[new Rt(re.key,Ie,`${ae} stop domain type must match previous stop domain type ${g}`)]}else g=ae;if(ae!=="number"&&ae!=="string"&&ae!=="boolean")return[new Rt(re.key,Ie,"stop domain value must be a number, string, or boolean")];if(ae!=="number"&&p!=="categorical"){let Xe=`number expected, ${ae} found`;return hh(l)&&p===void 0&&(Xe+="\nIf you intended to use a categorical function, specify `\"type\": \"categorical\"`."),[new Rt(re.key,Ie,Xe)]}return p!=="categorical"||ae!=="number"||isFinite(he)&&Math.floor(he)===he?p!=="categorical"&&ae==="number"&&b!==void 0&&he<b?[new Rt(re.key,Ie,"stop domain values must appear in ascending order")]:(b=he,p==="categorical"&&he in M?[new Rt(re.key,Ie,"stop domain values must be unique")]:(M[he]=!0,[])):[new Rt(re.key,Ie,`integer expected, found ${he}`)]}}function Jm(f){let l=(f.expressionContext==="property"?lN:A1)(zp(f.value),f.valueSpec);if(l.result==="error")return l.value.map(g=>new Rt(`${f.key}${g.key}`,f.value,g.message));let p=l.value.expression||l.value._styleExpression.expression;if(f.expressionContext==="property"&&f.propertyKey==="text-font"&&!p.outputDefined())return[new Rt(f.key,f.value,`Invalid data expression for "${f.propertyKey}". Output values must be contained as literals within the expression.`)];if(f.expressionContext==="property"&&f.propertyType==="layout"&&!M1(p))return[new Rt(f.key,f.value,"\"feature-state\" data expressions are not supported with layout properties.")];if(f.expressionContext==="filter"&&!M1(p))return[new Rt(f.key,f.value,"\"feature-state\" data expressions are not supported with filters.")];if(f.expressionContext&&f.expressionContext.indexOf("cluster")===0){if(!Cx(p,["zoom","feature-state"]))return[new Rt(f.key,f.value,"\"zoom\" and \"feature-state\" expressions are not supported with cluster properties.")];if(f.expressionContext==="cluster-initial"&&!Mx(p))return[new Rt(f.key,f.value,"Feature data expressions are not supported with initial expression part of cluster properties.")]}return[]}function Lx(f){let l=f.key,p=f.value,g=Xn(p);return g!=="string"?[new Rt(l,p,`color expected, ${g} found`)]:gn.parse(String(p))?[]:[new Rt(l,p,`color expected, "${p}" found`)]}function rd(f){let l=f.key,p=f.value,g=f.valueSpec,b=[];return Array.isArray(g.values)?g.values.indexOf(Ki(p))===-1&&b.push(new Rt(l,p,`expected one of [${g.values.join(", ")}], ${JSON.stringify(p)} found`)):Object.keys(g.values).indexOf(Ki(p))===-1&&b.push(new Rt(l,p,`expected one of [${Object.keys(g.values).join(", ")}], ${JSON.stringify(p)} found`)),b}function lI(f){return Ox(zp(f.value))?Jm(jo({},f,{expressionContext:"filter",valueSpec:{value:"boolean"}})):fN(f)}function fN(f){let l=f.value,p=f.key;if(Xn(l)!=="array")return[new Rt(p,l,`array expected, ${Xn(l)} found`)];let g=f.styleSpec,b,I=[];if(l.length<1)return[new Rt(p,l,"filter array must have at least 1 element")];switch(I=I.concat(rd({key:`${p}[0]`,value:l[0],valueSpec:g.filter_operator,style:f.style,styleSpec:f.styleSpec})),Ki(l[0])){case"<":case"<=":case">":case">=":l.length>=2&&Ki(l[1])==="$type"&&I.push(new Rt(p,l,`"$type" cannot be use with operator "${l[0]}"`));case"==":case"!=":l.length!==3&&I.push(new Rt(p,l,`filter array for operator "${l[0]}" must have 3 elements`));case"in":case"!in":l.length>=2&&(b=Xn(l[1]),b!=="string"&&I.push(new Rt(`${p}[1]`,l[1],`string expected, ${b} found`)));for(let M=2;M<l.length;M++)b=Xn(l[M]),Ki(l[1])==="$type"?I=I.concat(rd({key:`${p}[${M}]`,value:l[M],valueSpec:g.geometry_type,style:f.style,styleSpec:f.styleSpec})):b!=="string"&&b!=="number"&&b!=="boolean"&&I.push(new Rt(`${p}[${M}]`,l[M],`string, number, or boolean expected, ${b} found`));break;case"any":case"all":case"none":for(let M=1;M<l.length;M++)I=I.concat(fN({key:`${p}[${M}]`,value:l[M],style:f.style,styleSpec:f.styleSpec}));break;case"has":case"!has":b=Xn(l[1]),l.length!==2?I.push(new Rt(p,l,`filter array for "${l[0]}" operator must have 2 elements`)):b!=="string"&&I.push(new Rt(`${p}[1]`,l[1],`string expected, ${b} found`))}return I}function dN(f,l){let p=f.key,g=f.validateSpec,b=f.style,I=f.styleSpec,M=f.value,O=f.objectKey,L=I[`${l}_${f.layerType}`];if(!L)return[];let F=O.match(/^(.*)-transition$/);if(l==="paint"&&F&&L[F[1]]&&L[F[1]].transition)return g({key:p,value:M,valueSpec:I.transition,style:b,styleSpec:I});let U=f.valueSpec||L[O];if(!U)return[new Rt(p,M,`unknown property "${O}"`)];let W;if(Xn(M)==="string"&&hh(U)&&!U.tokens&&(W=/^{([^}]+)}$/.exec(M)))return[new Rt(p,M,`"${O}" does not support interpolation syntax
Use an identity property function instead: \`{ "type": "identity", "property": ${JSON.stringify(W[1])} }\`.`)];let X=[];return f.layerType==="symbol"&&(O==="text-field"&&b&&!b.glyphs&&X.push(new Rt(p,M,"use of \"text-field\" requires a style \"glyphs\" property")),O==="text-font"&&C1(zp(M))&&Ki(M.type)==="identity"&&X.push(new Rt(p,M,"\"text-font\" does not support identity functions"))),X.concat(g({key:f.key,value:M,valueSpec:U,style:b,styleSpec:I,expressionContext:"property",propertyType:l,propertyKey:O}))}function hN(f){return dN(f,"paint")}function mN(f){return dN(f,"layout")}function gN(f){let l=[],p=f.value,g=f.key,b=f.style,I=f.styleSpec;if(Xn(p)!=="object")return[new Rt(g,p,`object expected, ${Xn(p)} found`)];p.type||p.ref||l.push(new Rt(g,p,"either \"type\" or \"ref\" is required"));let M=Ki(p.type),O=Ki(p.ref);if(p.id){let L=Ki(p.id);for(let F=0;F<f.arrayIndex;F++){let U=b.layers[F];Ki(U.id)===L&&l.push(new Rt(g,p.id,`duplicate layer id "${p.id}", previously used at line ${U.id.__line__}`))}}if("ref"in p){let L;["type","source","source-layer","filter","layout"].forEach(F=>{F in p&&l.push(new Rt(g,p[F],`"${F}" is prohibited for ref layers`))}),b.layers.forEach(F=>{Ki(F.id)===O&&(L=F)}),L?L.ref?l.push(new Rt(g,p.ref,"ref cannot reference another ref layer")):M=Ki(L.type):l.push(new Rt(g,p.ref,`ref layer "${O}" not found`))}else if(M!=="background")if(p.source){let L=b.sources&&b.sources[p.source],F=L&&Ki(L.type);L?F==="vector"&&M==="raster"?l.push(new Rt(g,p.source,`layer "${p.id}" requires a raster source`)):F!=="raster-dem"&&M==="hillshade"||F!=="raster-dem"&&M==="color-relief"?l.push(new Rt(g,p.source,`layer "${p.id}" requires a raster-dem source`)):F==="raster"&&M!=="raster"?l.push(new Rt(g,p.source,`layer "${p.id}" requires a vector source`)):F!=="vector"||p["source-layer"]?F==="raster-dem"&&M!=="hillshade"&&M!=="color-relief"?l.push(new Rt(g,p.source,"raster-dem source can only be used with layer type 'hillshade' or 'color-relief'.")):M!=="line"||!p.paint||!p.paint["line-gradient"]||F==="geojson"&&L.lineMetrics||l.push(new Rt(g,p,`layer "${p.id}" specifies a line-gradient, which requires a GeoJSON source with \`lineMetrics\` enabled.`)):l.push(new Rt(g,p,`layer "${p.id}" must specify a "source-layer"`)):l.push(new Rt(g,p.source,`source "${p.source}" not found`))}else l.push(new Rt(g,p,"missing required property \"source\""));return l=l.concat(ac({key:g,value:p,valueSpec:I.layer,style:f.style,styleSpec:f.styleSpec,validateSpec:f.validateSpec,objectElementValidators:{"*":()=>[],type:()=>f.validateSpec({key:`${g}.type`,value:p.type,valueSpec:I.layer.type,style:f.style,styleSpec:f.styleSpec,validateSpec:f.validateSpec,object:p,objectKey:"type"}),filter:lI,layout:L=>ac({layer:p,key:L.key,value:L.value,style:L.style,styleSpec:L.styleSpec,validateSpec:L.validateSpec,objectElementValidators:{"*":F=>mN(jo({layerType:M},F))}}),paint:L=>ac({layer:p,key:L.key,value:L.value,style:L.style,styleSpec:L.styleSpec,validateSpec:L.validateSpec,objectElementValidators:{"*":F=>hN(jo({layerType:M},F))}})}})),l}function Qc(f){let l=f.value,p=f.key,g=Xn(l);return g!=="string"?[new Rt(p,l,`string expected, ${g} found`)]:[]}let Cv={promoteId:function({key:f,value:l}){if(Xn(l)==="string")return Qc({key:f,value:l});{let p=[];for(let g in l)p.push(...Qc({key:`${f}.${g}`,value:l[g]}));return p}}};function Xl(f){let l=f.value,p=f.key,g=f.styleSpec,b=f.style,I=f.validateSpec;if(!l.type)return[new Rt(p,l,"\"type\" is required")];let M=Ki(l.type),O;switch(M){case"vector":case"raster":return O=ac({key:p,value:l,valueSpec:g[`source_${M.replace("-","_")}`],style:f.style,styleSpec:g,objectElementValidators:Cv,validateSpec:I}),O;case"raster-dem":return O=function(L){var F;let U=(F=L.sourceName)!==null&&F!==void 0?F:"",W=L.value,X=L.styleSpec,re=X.source_raster_dem,ne=L.style,ae=[],he=Xn(W);if(W===void 0)return ae;if(he!=="object")return ae.push(new Rt("source_raster_dem",W,`object expected, ${he} found`)),ae;let Ie=Ki(W.encoding)==="custom",Xe=["redFactor","greenFactor","blueFactor","baseShift"],je=L.value.encoding?`"${L.value.encoding}"`:"Default";for(let Ve in W)!Ie&&Xe.includes(Ve)?ae.push(new Rt(Ve,W[Ve],`In "${U}": "${Ve}" is only valid when "encoding" is set to "custom". ${je} encoding found`)):re[Ve]?ae=ae.concat(L.validateSpec({key:Ve,value:W[Ve],valueSpec:re[Ve],validateSpec:L.validateSpec,style:ne,styleSpec:X})):ae.push(new Rt(Ve,W[Ve],`unknown property "${Ve}"`));return ae}({sourceName:p,value:l,style:f.style,styleSpec:g,validateSpec:I}),O;case"geojson":if(O=ac({key:p,value:l,valueSpec:g.source_geojson,style:b,styleSpec:g,validateSpec:I,objectElementValidators:Cv}),l.cluster)for(let L in l.clusterProperties){let[F,U]=l.clusterProperties[L],W=typeof F=="string"?[F,["accumulated"],["get",L]]:F;O.push(...Jm({key:`${p}.${L}.map`,value:U,expressionContext:"cluster-map"})),O.push(...Jm({key:`${p}.${L}.reduce`,value:W,expressionContext:"cluster-reduce"}))}return O;case"video":return ac({key:p,value:l,valueSpec:g.source_video,style:b,validateSpec:I,styleSpec:g});case"image":return ac({key:p,value:l,valueSpec:g.source_image,style:b,validateSpec:I,styleSpec:g});case"canvas":return[new Rt(p,null,"Please use runtime APIs to add canvas sources, rather than including them in stylesheets.","source.canvas")];default:return rd({key:`${p}.type`,value:l.type,valueSpec:{values:["vector","raster","raster-dem","geojson","video","image"]}})}}function Av(f){let l=f.value,p=f.styleSpec,g=p.light,b=f.style,I=[],M=Xn(l);if(l===void 0)return I;if(M!=="object")return I=I.concat([new Rt("light",l,`object expected, ${M} found`)]),I;for(let O in l){let L=O.match(/^(.*)-transition$/);I=I.concat(L&&g[L[1]]&&g[L[1]].transition?f.validateSpec({key:O,value:l[O],valueSpec:p.transition,validateSpec:f.validateSpec,style:b,styleSpec:p}):g[O]?f.validateSpec({key:O,value:l[O],valueSpec:g[O],validateSpec:f.validateSpec,style:b,styleSpec:p}):[new Rt(O,l[O],`unknown property "${O}"`)])}return I}function uI(f){let l=f.value,p=f.styleSpec,g=p.sky,b=f.style,I=Xn(l);if(l===void 0)return[];if(I!=="object")return[new Rt("sky",l,`object expected, ${I} found`)];let M=[];for(let O in l)M=M.concat(g[O]?f.validateSpec({key:O,value:l[O],valueSpec:g[O],style:b,styleSpec:p}):[new Rt(O,l[O],`unknown property "${O}"`)]);return M}function vN(f){let l=f.value,p=f.styleSpec,g=p.terrain,b=f.style,I=[],M=Xn(l);if(l===void 0)return I;if(M!=="object")return I=I.concat([new Rt("terrain",l,`object expected, ${M} found`)]),I;for(let O in l)I=I.concat(g[O]?f.validateSpec({key:O,value:l[O],valueSpec:g[O],validateSpec:f.validateSpec,style:b,styleSpec:p}):[new Rt(O,l[O],`unknown property "${O}"`)]);return I}function yN(f){let l=[],p=f.value,g=f.key;if(Array.isArray(p)){let b=[],I=[];for(let M in p)p[M].id&&b.includes(p[M].id)&&l.push(new Rt(g,p,`all the sprites' ids must be unique, but ${p[M].id} is duplicated`)),b.push(p[M].id),p[M].url&&I.includes(p[M].url)&&l.push(new Rt(g,p,`all the sprites' URLs must be unique, but ${p[M].url} is duplicated`)),I.push(p[M].url),l=l.concat(ac({key:`${g}[${M}]`,value:p[M],valueSpec:{id:{type:"string",required:!0},url:{type:"string",required:!0}},validateSpec:f.validateSpec}));return l}return Qc({key:g,value:p})}function Ov(f){return l=f.value,l&&l.constructor===Object?[]:[new Rt(f.key,f.value,`object expected, ${Xn(f.value)} found`)];var l}let cI={"*":()=>[],array:Nx,boolean:function(f){let l=f.value,p=f.key,g=Xn(l);return g!=="boolean"?[new Rt(p,l,`boolean expected, ${g} found`)]:[]},number:L1,color:Lx,constants:sI,enum:rd,filter:lI,function:pN,layer:gN,object:ac,source:Xl,light:Av,sky:uI,terrain:vN,projection:function(f){let l=f.value,p=f.styleSpec,g=p.projection,b=f.style,I=Xn(l);if(l===void 0)return[];if(I!=="object")return[new Rt("projection",l,`object expected, ${I} found`)];let M=[];for(let O in l)M=M.concat(g[O]?f.validateSpec({key:O,value:l[O],valueSpec:g[O],style:b,styleSpec:p}):[new Rt(O,l[O],`unknown property "${O}"`)]);return M},projectionDefinition:function(f){let l=f.key,p=f.value;p=p instanceof String?p.valueOf():p;let g=Xn(p);return g!=="array"||function(b){return Array.isArray(b)&&b.length===3&&typeof b[0]=="string"&&typeof b[1]=="string"&&typeof b[2]=="number"}(p)||function(b){return!!["interpolate","step","literal"].includes(b[0])}(p)?["array","string"].includes(g)?[]:[new Rt(l,p,`projection expected, invalid type "${g}" found`)]:[new Rt(l,p,`projection expected, invalid array ${JSON.stringify(p)} found`)]},string:Qc,formatted:function(f){return Qc(f).length===0?[]:Jm(f)},resolvedImage:function(f){return Qc(f).length===0?[]:Jm(f)},padding:function(f){let l=f.key,p=f.value;if(Xn(p)==="array"){if(p.length<1||p.length>4)return[new Rt(l,p,`padding requires 1 to 4 values; ${p.length} values found`)];let g={type:"number"},b=[];for(let I=0;I<p.length;I++)b=b.concat(f.validateSpec({key:`${l}[${I}]`,value:p[I],validateSpec:f.validateSpec,valueSpec:g}));return b}return L1({key:l,value:p,valueSpec:{}})},numberArray:function(f){let l=f.key,p=f.value;if(Xn(p)==="array"){let g={type:"number"};if(p.length<1)return[new Rt(l,p,"array length at least 1 expected, length 0 found")];let b=[];for(let I=0;I<p.length;I++)b=b.concat(f.validateSpec({key:`${l}[${I}]`,value:p[I],validateSpec:f.validateSpec,valueSpec:g}));return b}return L1({key:l,value:p,valueSpec:{}})},colorArray:function(f){let l=f.key,p=f.value;if(Xn(p)==="array"){if(p.length<1)return[new Rt(l,p,"array length at least 1 expected, length 0 found")];let g=[];for(let b=0;b<p.length;b++)g=g.concat(Lx({key:`${l}[${b}]`,value:p[b]}));return g}return Lx({key:l,value:p})},variableAnchorOffsetCollection:function(f){let l=f.key,p=f.value,g=Xn(p),b=f.styleSpec;if(g!=="array"||p.length<1||p.length%2!=0)return[new Rt(l,p,"variableAnchorOffsetCollection requires a non-empty array of even length")];let I=[];for(let M=0;M<p.length;M+=2)I=I.concat(rd({key:`${l}[${M}]`,value:p[M],valueSpec:b.layout_symbol["text-anchor"]})),I=I.concat(Nx({key:`${l}[${M+1}]`,value:p[M+1],valueSpec:{length:2,value:"number"},validateSpec:f.validateSpec,style:f.style,styleSpec:b}));return I},sprite:yN,state:Ov};function Pv(f){let l=f.value,p=f.valueSpec,g=f.styleSpec;return f.validateSpec=Pv,p.expression&&C1(Ki(l))?pN(f):p.expression&&Ax(zp(l))?Jm(f):p.type&&cI[p.type]?cI[p.type](f):ac(jo({},f,{valueSpec:p.type?g[p.type]:p}))}function _N(f){let l=f.value,p=f.key,g=Qc(f);return g.length||(l.indexOf("{fontstack}")===-1&&g.push(new Rt(p,l,"\"glyphs\" url must include a \"{fontstack}\" token")),l.indexOf("{range}")===-1&&g.push(new Rt(p,l,"\"glyphs\" url must include a \"{range}\" token"))),g}function Jl(f,l=Ae){let p=[];return p=p.concat(Pv({key:"",value:f,valueSpec:l.$root,styleSpec:l,style:f,validateSpec:Pv,objectElementValidators:{glyphs:_N,"*":()=>[]}})),f.constants&&(p=p.concat(sI({key:"constants",value:f.constants}))),Dv(p)}function ep(f){return function(l){return f(Pt(Se({},l),{validateSpec:Pv}))}}function Dv(f){return[].concat(f).sort((l,p)=>l.line-p.line)}function tp(f){return function(...l){return Dv(f.apply(this,l))}}Jl.source=tp(ep(Xl)),Jl.sprite=tp(ep(yN)),Jl.glyphs=tp(ep(_N)),Jl.light=tp(ep(Av)),Jl.sky=tp(ep(uI)),Jl.terrain=tp(ep(vN)),Jl.state=tp(ep(Ov)),Jl.layer=tp(ep(gN)),Jl.filter=tp(ep(lI)),Jl.paintProperty=tp(ep(hN)),Jl.layoutProperty=tp(ep(mN));let Nv=Jl,DB=Nv.light,k1=Nv.sky,NB=Nv.paintProperty,LB=Nv.layoutProperty;function R1(f,l){let p=!1;if(l&&l.length)for(let g of l)f.fire(new Be(new Error(g.message))),p=!0;return p}class j1{constructor(l,p,g){let b=this.cells=[];if(l instanceof ArrayBuffer){this.arrayBuffer=l;let M=new Int32Array(this.arrayBuffer);l=M[0],this.d=(p=M[1])+2*(g=M[2]);for(let L=0;L<this.d*this.d;L++){let F=M[3+L],U=M[3+L+1];b.push(F===U?null:M.subarray(F,U))}let O=M[3+b.length+1];this.keys=M.subarray(M[3+b.length],O),this.bboxes=M.subarray(O),this.insert=this._insertReadonly}else{this.d=p+2*g;for(let M=0;M<this.d*this.d;M++)b.push([]);this.keys=[],this.bboxes=[]}this.n=p,this.extent=l,this.padding=g,this.scale=p/l,this.uid=0;let I=g/p*l;this.min=-I,this.max=l+I}insert(l,p,g,b,I){this._forEachCell(p,g,b,I,this._insertCell,this.uid++,void 0,void 0),this.keys.push(l),this.bboxes.push(p),this.bboxes.push(g),this.bboxes.push(b),this.bboxes.push(I)}_insertReadonly(){throw new Error("Cannot insert into a GridIndex created from an ArrayBuffer.")}_insertCell(l,p,g,b,I,M){this.cells[I].push(M)}query(l,p,g,b,I){let M=this.min,O=this.max;if(l<=M&&p<=M&&O<=g&&O<=b&&!I)return Array.prototype.slice.call(this.keys);{let L=[];return this._forEachCell(l,p,g,b,this._queryCell,L,{},I),L}}_queryCell(l,p,g,b,I,M,O,L){let F=this.cells[I];if(F!==null){let U=this.keys,W=this.bboxes;for(let X=0;X<F.length;X++){let re=F[X];if(O[re]===void 0){let ne=4*re;(L?L(W[ne+0],W[ne+1],W[ne+2],W[ne+3]):l<=W[ne+2]&&p<=W[ne+3]&&g>=W[ne+0]&&b>=W[ne+1])?(O[re]=!0,M.push(U[re])):O[re]=!1}}}}_forEachCell(l,p,g,b,I,M,O,L){let F=this._convertToCellCoord(l),U=this._convertToCellCoord(p),W=this._convertToCellCoord(g),X=this._convertToCellCoord(b);for(let re=F;re<=W;re++)for(let ne=U;ne<=X;ne++){let ae=this.d*ne+re;if((!L||L(this._convertFromCellCoord(re),this._convertFromCellCoord(ne),this._convertFromCellCoord(re+1),this._convertFromCellCoord(ne+1)))&&I.call(this,l,p,g,b,ae,M,O,L))return}}_convertFromCellCoord(l){return(l-this.padding)/this.scale}_convertToCellCoord(l){return Math.max(0,Math.min(this.d-1,Math.floor(l*this.scale)+this.padding))}toArrayBuffer(){if(this.arrayBuffer)return this.arrayBuffer;let l=this.cells,p=3+this.cells.length+1+1,g=0;for(let M=0;M<this.cells.length;M++)g+=this.cells[M].length;let b=new Int32Array(p+g+this.keys.length+this.bboxes.length);b[0]=this.extent,b[1]=this.n,b[2]=this.padding;let I=p;for(let M=0;M<l.length;M++){let O=l[M];b[3+M]=I,b.set(O,I),I+=O.length}return b[3+l.length]=I,b.set(this.keys,I),I+=this.keys.length,b[3+l.length+1]=I,b.set(this.bboxes,I),I+=this.bboxes.length,b.buffer}static serialize(l,p){let g=l.toArrayBuffer();return p&&p.push(g),{buffer:g}}static deserialize(l){return new j1(l.buffer)}}let rp={};function fr(f,l,p={}){if(rp[f])throw new Error(`${f} is already registered.`);Object.defineProperty(l,"_classRegistryKey",{value:f,writeable:!1}),rp[f]={klass:l,omit:p.omit||[],shallow:p.shallow||[]}}fr("Object",Object),fr("Set",Set),fr("TransferableGridIndex",j1),fr("Color",gn),fr("Error",Error),fr("AJAXError",we),fr("ResolvedImage",Vs),fr("StylePropertyFunction",P1),fr("StyleExpression",tI,{omit:["_evaluator"]}),fr("ZoomDependentExpression",rI),fr("ZoomConstantExpression",O1),fr("CompoundExpression",ic,{omit:["_evaluate"]});for(let f in Iv)Iv[f]._classRegistryKey||fr(`Expression_${f}`,Iv[f]);function pI(f){return f&&typeof ArrayBuffer!="undefined"&&(f instanceof ArrayBuffer||f.constructor&&f.constructor.name==="ArrayBuffer")}function kx(f){return f.$name||f.constructor._classRegistryKey}function fI(f){return!function(l){if(l===null||typeof l!="object")return!1;let p=kx(l);return!(!p||p==="Object")}(f)&&(f==null||typeof f=="boolean"||typeof f=="number"||typeof f=="string"||f instanceof Boolean||f instanceof Number||f instanceof String||f instanceof Date||f instanceof RegExp||f instanceof Blob||f instanceof Error||pI(f)||Ut(f)||ArrayBuffer.isView(f)||f instanceof ImageData)}function Lv(f,l){if(fI(f))return(pI(f)||Ut(f))&&l&&l.push(f),ArrayBuffer.isView(f)&&l&&l.push(f.buffer),f instanceof ImageData&&l&&l.push(f.data.buffer),f;if(Array.isArray(f)){let I=[];for(let M of f)I.push(Lv(M,l));return I}if(typeof f!="object")throw new Error("can't serialize object of type "+typeof f);let p=kx(f);if(!p)throw new Error(`can't serialize object of unregistered class ${f.constructor.name}`);if(!rp[p])throw new Error(`${p} is not registered.`);let{klass:g}=rp[p],b=g.serialize?g.serialize(f,l):{};if(g.serialize){if(l&&b===l[l.length-1])throw new Error("statically serialized object won't survive transfer of $name property")}else{for(let I in f){if(!f.hasOwnProperty(I)||rp[p].omit.indexOf(I)>=0)continue;let M=f[I];b[I]=rp[p].shallow.indexOf(I)>=0?M:Lv(M,l)}f instanceof Error&&(b.message=f.message)}if(b.$name)throw new Error("$name property is reserved for worker serialization logic.");return p!=="Object"&&(b.$name=p),b}function Qm(f){if(fI(f))return f;if(Array.isArray(f))return f.map(Qm);if(typeof f!="object")throw new Error("can't deserialize object of type "+typeof f);let l=kx(f)||"Object";if(!rp[l])throw new Error(`can't deserialize unregistered class ${l}`);let{klass:p}=rp[l];if(!p)throw new Error(`can't deserialize unregistered class ${l}`);if(p.deserialize)return p.deserialize(f);let g=Object.create(p.prototype);for(let b of Object.keys(f)){if(b==="$name")continue;let I=f[b];g[b]=rp[l].shallow.indexOf(b)>=0?I:Qm(I)}return g}class Rx{constructor(){this.first=!0}update(l,p){let g=Math.floor(l);return this.first?(this.first=!1,this.lastIntegerZoom=g,this.lastIntegerZoomTime=0,this.lastZoom=l,this.lastFloorZoom=g,!0):(this.lastFloorZoom>g?(this.lastIntegerZoom=g+1,this.lastIntegerZoomTime=p):this.lastFloorZoom<g&&(this.lastIntegerZoom=g,this.lastIntegerZoomTime=p),l!==this.lastZoom&&(this.lastZoom=l,this.lastFloorZoom=g,!0))}}let ro={"Latin-1 Supplement":f=>f>=128&&f<=255,"Hangul Jamo":f=>f>=4352&&f<=4607,Khmer:f=>f>=6016&&f<=6143,"General Punctuation":f=>f>=8192&&f<=8303,"Letterlike Symbols":f=>f>=8448&&f<=8527,"Number Forms":f=>f>=8528&&f<=8591,"Miscellaneous Technical":f=>f>=8960&&f<=9215,"Control Pictures":f=>f>=9216&&f<=9279,"Optical Character Recognition":f=>f>=9280&&f<=9311,"Enclosed Alphanumerics":f=>f>=9312&&f<=9471,"Geometric Shapes":f=>f>=9632&&f<=9727,"Miscellaneous Symbols":f=>f>=9728&&f<=9983,"Miscellaneous Symbols and Arrows":f=>f>=11008&&f<=11263,"Ideographic Description Characters":f=>f>=12272&&f<=12287,"CJK Symbols and Punctuation":f=>f>=12288&&f<=12351,Hiragana:f=>f>=12352&&f<=12447,Katakana:f=>f>=12448&&f<=12543,Kanbun:f=>f>=12688&&f<=12703,"CJK Strokes":f=>f>=12736&&f<=12783,"Enclosed CJK Letters and Months":f=>f>=12800&&f<=13055,"CJK Compatibility":f=>f>=13056&&f<=13311,"Yijing Hexagram Symbols":f=>f>=19904&&f<=19967,"CJK Unified Ideographs":f=>f>=19968&&f<=40959,"Hangul Syllables":f=>f>=44032&&f<=55215,"Private Use Area":f=>f>=57344&&f<=63743,"Vertical Forms":f=>f>=65040&&f<=65055,"CJK Compatibility Forms":f=>f>=65072&&f<=65103,"Small Form Variants":f=>f>=65104&&f<=65135,"Halfwidth and Fullwidth Forms":f=>f>=65280&&f<=65519};function jx(f){for(let l of f)if(hI(l.charCodeAt(0)))return!0;return!1}function kB(f){for(let l of f)if(!bN(l.charCodeAt(0)))return!1;return!0}function qx(f){let l=f.map(p=>{try{return new RegExp(`\\p{sc=${p}}`,"u").source}catch(g){return null}}).filter(p=>p);return new RegExp(l.join("|"),"u")}let RB=qx(["Arab","Dupl","Mong","Ougr","Syrc"]);function bN(f){return!RB.test(String.fromCodePoint(f))}let dI=qx(["Bopo","Hani","Hira","Kana","Kits","Nshu","Tang","Yiii"]);function hI(f){return!(f!==746&&f!==747&&(f<4352||!(ro["CJK Compatibility Forms"](f)&&!(f>=65097&&f<=65103)||ro["CJK Compatibility"](f)||ro["CJK Strokes"](f)||!(!ro["CJK Symbols and Punctuation"](f)||f>=12296&&f<=12305||f>=12308&&f<=12319||f===12336)||ro["Enclosed CJK Letters and Months"](f)||ro["Ideographic Description Characters"](f)||ro.Kanbun(f)||ro.Katakana(f)&&f!==12540||!(!ro["Halfwidth and Fullwidth Forms"](f)||f===65288||f===65289||f===65293||f>=65306&&f<=65310||f===65339||f===65341||f===65343||f>=65371&&f<=65503||f===65507||f>=65512&&f<=65519)||!(!ro["Small Form Variants"](f)||f>=65112&&f<=65118||f>=65123&&f<=65126)||ro["Vertical Forms"](f)||ro["Yijing Hexagram Symbols"](f)||new RegExp("\\p{sc=Cans}","u").test(String.fromCodePoint(f))||new RegExp("\\p{sc=Hang}","u").test(String.fromCodePoint(f))||dI.test(String.fromCodePoint(f)))))}function xN(f){return!(hI(f)||function(l){return!!(ro["Latin-1 Supplement"](l)&&(l===167||l===169||l===174||l===177||l===188||l===189||l===190||l===215||l===247)||ro["General Punctuation"](l)&&(l===8214||l===8224||l===8225||l===8240||l===8241||l===8251||l===8252||l===8258||l===8263||l===8264||l===8265||l===8273)||ro["Letterlike Symbols"](l)||ro["Number Forms"](l)||ro["Miscellaneous Technical"](l)&&(l>=8960&&l<=8967||l>=8972&&l<=8991||l>=8996&&l<=9e3||l===9003||l>=9085&&l<=9114||l>=9150&&l<=9165||l===9167||l>=9169&&l<=9179||l>=9186&&l<=9215)||ro["Control Pictures"](l)&&l!==9251||ro["Optical Character Recognition"](l)||ro["Enclosed Alphanumerics"](l)||ro["Geometric Shapes"](l)||ro["Miscellaneous Symbols"](l)&&!(l>=9754&&l<=9759)||ro["Miscellaneous Symbols and Arrows"](l)&&(l>=11026&&l<=11055||l>=11088&&l<=11097||l>=11192&&l<=11243)||ro["CJK Symbols and Punctuation"](l)||ro.Katakana(l)||ro["Private Use Area"](l)||ro["CJK Compatibility Forms"](l)||ro["Small Form Variants"](l)||ro["Halfwidth and Fullwidth Forms"](l)||l===8734||l===8756||l===8757||l>=9984&&l<=10087||l>=10102&&l<=10131||l===65532||l===65533)}(f))}let wN=qx(["Adlm","Arab","Armi","Avst","Chrs","Cprt","Egyp","Elym","Gara","Hatr","Hebr","Hung","Khar","Lydi","Mand","Mani","Mend","Merc","Mero","Narb","Nbat","Nkoo","Orkh","Palm","Phli","Phlp","Phnx","Prti","Rohg","Samr","Sarb","Sogo","Syrc","Thaa","Todr","Yezi"]);function mI(f){return wN.test(String.fromCodePoint(f))}function EN(f,l){return!(!l&&mI(f)||f>=2304&&f<=3583||f>=3840&&f<=4255||ro.Khmer(f))}function SN(f){for(let l of f)if(mI(l.charCodeAt(0)))return!0;return!1}let np=new class{constructor(){this.TIMEOUT=5e3,this.applyArabicShaping=null,this.processBidirectionalText=null,this.processStyledBidirectionalText=null,this.pluginStatus="unavailable",this.pluginURL=null,this.loadScriptResolve=()=>{}}setState(f){this.pluginStatus=f.pluginStatus,this.pluginURL=f.pluginURL}getState(){return{pluginStatus:this.pluginStatus,pluginURL:this.pluginURL}}setMethods(f){if(np.isParsed())throw new Error("RTL text plugin already registered.");this.applyArabicShaping=f.applyArabicShaping,this.processBidirectionalText=f.processBidirectionalText,this.processStyledBidirectionalText=f.processStyledBidirectionalText,this.loadScriptResolve()}isParsed(){return this.applyArabicShaping!=null&&this.processBidirectionalText!=null&&this.processStyledBidirectionalText!=null}getRTLTextPluginStatus(){return this.pluginStatus}syncState(f,l){return i(this,void 0,void 0,function*(){if(this.isParsed())return this.getState();if(f.pluginStatus!=="loading")return this.setState(f),f;let p=f.pluginURL,g=new Promise(I=>{this.loadScriptResolve=I});l(p);let b=new Promise(I=>setTimeout(()=>I(),this.TIMEOUT));if(yield Promise.race([g,b]),this.isParsed()){let I={pluginStatus:"loaded",pluginURL:p};return this.setState(I),I}throw this.setState({pluginStatus:"error",pluginURL:""}),new Error(`RTL Text Plugin failed to import scripts from ${p}`)})}};class ni{constructor(l,p){this.zoom=l,p?(this.now=p.now||0,this.fadeDuration=p.fadeDuration||0,this.zoomHistory=p.zoomHistory||new Rx,this.transition=p.transition||{},this.globalState=p.globalState||{}):(this.now=0,this.fadeDuration=0,this.zoomHistory=new Rx,this.transition={},this.globalState={})}isSupportedScript(l){return function(p,g){for(let b of p)if(!EN(b.charCodeAt(0),g))return!1;return!0}(l,np.getRTLTextPluginStatus()==="loaded")}crossFadingFactor(){return this.fadeDuration===0?1:Math.min((this.now-this.zoomHistory.lastIntegerZoomTime)/this.fadeDuration,1)}getCrossfadeParameters(){let l=this.zoom,p=l-Math.floor(l),g=this.crossFadingFactor();return l>this.zoomHistory.lastIntegerZoom?{fromScale:2,toScale:1,t:p+(1-p)*g}:{fromScale:.5,toScale:1,t:1-(1-g)*p}}}class kv{constructor(l,p){this.property=l,this.value=p,this.expression=function(g,b){if(C1(g))return new P1(g,b);if(Ax(g)){let I=lN(g,b);if(I.result==="error")throw new Error(I.value.map(M=>`${M.key}: ${M.message}`).join(", "));return I.value}{let I=g;return b.type==="color"&&typeof g=="string"?I=gn.parse(g):b.type!=="padding"||typeof g!="number"&&!Array.isArray(g)?b.type!=="numberArray"||typeof g!="number"&&!Array.isArray(g)?b.type!=="colorArray"||typeof g!="string"&&!Array.isArray(g)?b.type==="variableAnchorOffsetCollection"&&Array.isArray(g)?I=hl.parse(g):b.type==="projectionDefinition"&&typeof g=="string"&&(I=Gs.parse(g)):I=Oi.parse(g):I=Zi.parse(g):I=as.parse(g),{globalStateRefs:new Set,kind:"constant",evaluate:()=>I}}}(p===void 0?l.specification.default:p,l.specification),this._evaluate=this.expression.evaluate}isDataDriven(){return this.expression.kind==="source"||this.expression.kind==="composite"}getGlobalStateRefs(){return this.expression.globalStateRefs||new Set}possiblyEvaluate(l,p,g){return this.property.possiblyEvaluate(this,l,p,g)}setGlobalState(l){this.expression.evaluate=(p,g,b,I,M,O)=>(p.globalState=l,this._evaluate.call(this.expression,p,g,b,I,M,O))}}class gI{constructor(l){this.property=l,this.value=new kv(l,void 0)}transitioned(l,p){return new vI(this.property,this.value,p,Ne({},l.transition,this.transition),l.now)}untransitioned(){return new vI(this.property,this.value,null,{},0)}}class TN{constructor(l){this._properties=l,this._values=Object.create(l.defaultTransitionablePropertyValues)}getValue(l){return mt(this._values[l].value.value)}setValue(l,p){Object.prototype.hasOwnProperty.call(this._values,l)||(this._values[l]=new gI(this._values[l].property)),this._values[l].value=new kv(this._values[l].property,p===null?void 0:mt(p))}getTransition(l){return mt(this._values[l].transition)}setTransition(l,p){Object.prototype.hasOwnProperty.call(this._values,l)||(this._values[l]=new gI(this._values[l].property)),this._values[l].transition=mt(p)||void 0}serialize(){let l={};for(let p of Object.keys(this._values)){let g=this.getValue(p);g!==void 0&&(l[p]=g);let b=this.getTransition(p);b!==void 0&&(l[`${p}-transition`]=b)}return l}transitioned(l,p){let g=new yI(this._properties);for(let b of Object.keys(this._values))g._values[b]=this._values[b].transitioned(l,p._values[b]);return g}untransitioned(){let l=new yI(this._properties);for(let p of Object.keys(this._values))l._values[p]=this._values[p].untransitioned();return l}}class vI{constructor(l,p,g,b,I){this.property=l,this.value=p,this.begin=I+b.delay||0,this.end=this.begin+b.duration||0,l.specification.transition&&(b.delay||b.duration)&&(this.prior=g)}possiblyEvaluate(l,p,g){let b=l.now||0,I=this.value.possiblyEvaluate(l,p,g),M=this.prior;if(M){if(b>this.end)return this.prior=null,I;if(this.value.isDataDriven())return this.prior=null,I;if(b<this.begin)return M.possiblyEvaluate(l,p,g);{let O=(b-this.begin)/(this.end-this.begin);return this.property.interpolate(M.possiblyEvaluate(l,p,g),I,Tt(O))}}return I}}class yI{constructor(l){this._properties=l,this._values=Object.create(l.defaultTransitioningPropertyValues)}possiblyEvaluate(l,p,g){let b=new zx(this._properties);for(let I of Object.keys(this._values))b._values[I]=this._values[I].possiblyEvaluate(l,p,g);return b}hasTransition(){for(let l of Object.keys(this._values))if(this._values[l].prior)return!0;return!1}}class IN{constructor(l){this._properties=l,this._values=Object.create(l.defaultPropertyValues),this._globalState={}}hasValue(l){return this._values[l].value!==void 0}getValue(l){return mt(this._values[l].value)}setValue(l,p){this._values[l]=new kv(this._values[l].property,p===null?void 0:mt(p)),this._values[l].setGlobalState(this._globalState)}serialize(){let l={};for(let p of Object.keys(this._values)){let g=this.getValue(p);g!==void 0&&(l[p]=g)}return l}possiblyEvaluate(l,p,g){let b=new zx(this._properties);for(let I of Object.keys(this._values))b._values[I]=this._values[I].possiblyEvaluate(l,p,g);return b}setGlobalState(l){this._globalState=l;for(let p of Object.values(this._values))p.setGlobalState(l)}}class Fp{constructor(l,p,g){this.property=l,this.value=p,this.parameters=g}isConstant(){return this.value.kind==="constant"}constantOr(l){return this.value.kind==="constant"?this.value.value:l}evaluate(l,p,g,b){return this.property.evaluate(this.value,this.parameters,l,p,g,b)}}class zx{constructor(l){this._properties=l,this._values=Object.create(l.defaultPossiblyEvaluatedValues)}get(l){return this._values[l]}}class Sr{constructor(l){this.specification=l}possiblyEvaluate(l,p){if(l.isDataDriven())throw new Error("Value should not be data driven");return l.expression.evaluate(p)}interpolate(l,p,g){let b=qp[this.specification.type];return b?b(l,p,g):l}}class Kr{constructor(l,p){this.specification=l,this.overrides=p}possiblyEvaluate(l,p,g,b){return new Fp(this,l.expression.kind==="constant"||l.expression.kind==="camera"?{kind:"constant",value:l.expression.evaluate(p,null,{},g,b)}:l.expression,p)}interpolate(l,p,g){if(l.value.kind!=="constant"||p.value.kind!=="constant")return l;if(l.value.value===void 0||p.value.value===void 0)return new Fp(this,{kind:"constant",value:void 0},l.parameters);let b=qp[this.specification.type];if(b){let I=b(l.value.value,p.value.value,g);return new Fp(this,{kind:"constant",value:I},l.parameters)}return l}evaluate(l,p,g,b,I,M){return l.kind==="constant"?l.value:l.evaluate(p,g,b,I,M)}}class Fx extends Kr{possiblyEvaluate(l,p,g,b){if(l.value===void 0)return new Fp(this,{kind:"constant",value:void 0},p);if(l.expression.kind==="constant"){let I=l.expression.evaluate(p,null,{},g,b),M=l.property.specification.type==="resolvedImage"&&typeof I!="string"?I.name:I,O=this._calculate(M,M,M,p);return new Fp(this,{kind:"constant",value:O},p)}if(l.expression.kind==="camera"){let I=this._calculate(l.expression.evaluate({zoom:p.zoom-1}),l.expression.evaluate({zoom:p.zoom}),l.expression.evaluate({zoom:p.zoom+1}),p);return new Fp(this,{kind:"constant",value:I},p)}return new Fp(this,l.expression,p)}evaluate(l,p,g,b,I,M){if(l.kind==="source"){let O=l.evaluate(p,g,b,I,M);return this._calculate(O,O,O,p)}return l.kind==="composite"?this._calculate(l.evaluate({zoom:Math.floor(p.zoom)-1},g,b),l.evaluate({zoom:Math.floor(p.zoom)},g,b),l.evaluate({zoom:Math.floor(p.zoom)+1},g,b),p):l.value}_calculate(l,p,g,b){return b.zoom>b.zoomHistory.lastIntegerZoom?{from:l,to:p}:{from:g,to:p}}interpolate(l){return l}}class gh{constructor(l){this.specification=l}possiblyEvaluate(l,p,g,b){if(l.value!==void 0){if(l.expression.kind==="constant"){let I=l.expression.evaluate(p,null,{},g,b);return this._calculate(I,I,I,p)}return this._calculate(l.expression.evaluate(new ni(Math.floor(p.zoom-1),p)),l.expression.evaluate(new ni(Math.floor(p.zoom),p)),l.expression.evaluate(new ni(Math.floor(p.zoom+1),p)),p)}}_calculate(l,p,g,b){return b.zoom>b.zoomHistory.lastIntegerZoom?{from:l,to:p}:{from:g,to:p}}interpolate(l){return l}}class Ux{constructor(l){this.specification=l}possiblyEvaluate(l,p,g,b){return!!l.expression.evaluate(p,null,{},g,b)}interpolate(){return!1}}class ml{constructor(l){this.properties=l,this.defaultPropertyValues={},this.defaultTransitionablePropertyValues={},this.defaultTransitioningPropertyValues={},this.defaultPossiblyEvaluatedValues={},this.overridableProperties=[];for(let p in l){let g=l[p];g.specification.overridable&&this.overridableProperties.push(p);let b=this.defaultPropertyValues[p]=new kv(g,void 0),I=this.defaultTransitionablePropertyValues[p]=new gI(g);this.defaultTransitioningPropertyValues[p]=I.untransitioned(),this.defaultPossiblyEvaluatedValues[p]=b.possiblyEvaluate({})}}}fr("DataDrivenProperty",Kr),fr("DataConstantProperty",Sr),fr("CrossFadedDataDrivenProperty",Fx),fr("CrossFadedProperty",gh),fr("ColorRampProperty",Ux);let MN="-transition";class sc extends gt{constructor(l,p){if(super(),this.id=l.id,this.type=l.type,this._featureFilter={filter:()=>!0,needGeometry:!1,getGlobalStateRefs:()=>new Set},l.type!=="custom"&&(this.metadata=l.metadata,this.minzoom=l.minzoom,this.maxzoom=l.maxzoom,this._globalState={},l.type!=="background"&&(this.source=l.source,this.sourceLayer=l["source-layer"],this.filter=l.filter,this._featureFilter=Km(l.filter)),p.layout&&(this._unevaluatedLayout=new IN(p.layout)),p.paint)){this._transitionablePaint=new TN(p.paint);for(let g in l.paint)this.setPaintProperty(g,l.paint[g],{validate:!1});for(let g in l.layout)this.setLayoutProperty(g,l.layout[g],{validate:!1});this._transitioningPaint=this._transitionablePaint.untransitioned(),this.paint=new zx(p.paint)}}setFilter(l){this.filter=l,this._featureFilter=Km(l)}getCrossfadeParameters(){return this._crossfadeParameters}getLayoutProperty(l){return l==="visibility"?this.visibility:this._unevaluatedLayout.getValue(l)}getLayoutAffectingGlobalStateRefs(){let l=new Set;if(this._unevaluatedLayout)for(let p in this._unevaluatedLayout._values){let g=this._unevaluatedLayout._values[p];for(let b of g.getGlobalStateRefs())l.add(b)}for(let p of this._featureFilter.getGlobalStateRefs())l.add(p);return l}getPaintAffectingGlobalStateRefs(){var l;let p=new globalThis.Map;if(this._transitionablePaint)for(let g in this._transitionablePaint._values){let b=this._transitionablePaint._values[g].value;for(let I of b.getGlobalStateRefs()){let M=(l=p.get(I))!==null&&l!==void 0?l:[];M.push({name:g,value:b.value}),p.set(I,M)}}return p}setLayoutProperty(l,p,g={}){p!=null&&this._validate(LB,`layers.${this.id}.layout.${l}`,l,p,g)||(l!=="visibility"?this._unevaluatedLayout.setValue(l,p):this.visibility=p)}getPaintProperty(l){return l.endsWith(MN)?this._transitionablePaint.getTransition(l.slice(0,-11)):this._transitionablePaint.getValue(l)}setPaintProperty(l,p,g={}){if(p!=null&&this._validate(NB,`layers.${this.id}.paint.${l}`,l,p,g))return!1;if(l.endsWith(MN))return this._transitionablePaint.setTransition(l.slice(0,-11),p||void 0),!1;{let b=this._transitionablePaint._values[l],I=b.property.specification["property-type"]==="cross-faded-data-driven",M=b.value.isDataDriven(),O=b.value;this._transitionablePaint.setValue(l,p),this._handleSpecialPaintPropertyUpdate(l);let L=this._transitionablePaint._values[l].value;return L.isDataDriven()||M||I||this._handleOverridablePaintPropertyUpdate(l,O,L)}}_handleSpecialPaintPropertyUpdate(l){}_handleOverridablePaintPropertyUpdate(l,p,g){return!1}isHidden(l){return!!(this.minzoom&&l<this.minzoom)||!!(this.maxzoom&&l>=this.maxzoom)||this.visibility==="none"}updateTransitions(l){this._transitioningPaint=this._transitionablePaint.transitioned(l,this._transitioningPaint)}hasTransition(){return this._transitioningPaint.hasTransition()}recalculate(l,p){l.globalState=this._globalState,l.getCrossfadeParameters&&(this._crossfadeParameters=l.getCrossfadeParameters()),this._unevaluatedLayout&&(this.layout=this._unevaluatedLayout.possiblyEvaluate(l,void 0,p)),this.paint=this._transitioningPaint.possiblyEvaluate(l,void 0,p)}setGlobalState(l){this._globalState=l,this._unevaluatedLayout&&this._unevaluatedLayout.setGlobalState(l)}serialize(){let l={id:this.id,type:this.type,source:this.source,"source-layer":this.sourceLayer,metadata:this.metadata,minzoom:this.minzoom,maxzoom:this.maxzoom,filter:this.filter,layout:this._unevaluatedLayout&&this._unevaluatedLayout.serialize(),paint:this._transitionablePaint&&this._transitionablePaint.serialize()};return this.visibility&&(l.layout=l.layout||{},l.layout.visibility=this.visibility),ft(l,(p,g)=>!(p===void 0||g==="layout"&&!Object.keys(p).length||g==="paint"&&!Object.keys(p).length))}_validate(l,p,g,b,I={}){return(!I||I.validate!==!1)&&R1(this,l.call(Nv,{key:p,layerType:this.type,objectKey:g,value:b,styleSpec:Ae,style:{glyphs:!0,sprite:!0}}))}is3D(){return!1}isTileClipped(){return!1}hasOffscreenPass(){return!1}resize(){}isStateDependent(){for(let l in this.paint._values){let p=this.paint.get(l);if(p instanceof Fp&&hh(p.property.specification)&&(p.value.kind==="source"||p.value.kind==="composite")&&p.value.isStateDependent)return!0}return!1}}let jB={Int8:Int8Array,Uint8:Uint8Array,Int16:Int16Array,Uint16:Uint16Array,Int32:Int32Array,Uint32:Uint32Array,Float32:Float32Array};class q1{constructor(l,p){this._structArray=l,this._pos1=p*this.size,this._pos2=this._pos1/2,this._pos4=this._pos1/4,this._pos8=this._pos1/8}}class Xo{constructor(){this.isTransferred=!1,this.capacity=-1,this.resize(0)}static serialize(l,p){return l._trim(),p&&(l.isTransferred=!0,p.push(l.arrayBuffer)),{length:l.length,arrayBuffer:l.arrayBuffer}}static deserialize(l){let p=Object.create(this.prototype);return p.arrayBuffer=l.arrayBuffer,p.length=l.length,p.capacity=l.arrayBuffer.byteLength/p.bytesPerElement,p._refreshViews(),p}_trim(){this.length!==this.capacity&&(this.capacity=this.length,this.arrayBuffer=this.arrayBuffer.slice(0,this.length*this.bytesPerElement),this._refreshViews())}clear(){this.length=0}resize(l){this.reserve(l),this.length=l}reserve(l){if(l>this.capacity){this.capacity=Math.max(l,Math.floor(5*this.capacity),128),this.arrayBuffer=new ArrayBuffer(this.capacity*this.bytesPerElement);let p=this.uint8;this._refreshViews(),p&&this.uint8.set(p)}}_refreshViews(){throw new Error("_refreshViews() must be implemented by each concrete StructArray layout")}}function ca(f,l=1){let p=0,g=0;return{members:f.map(b=>{let I=jB[b.type].BYTES_PER_ELEMENT,M=p=Bx(p,Math.max(l,I)),O=b.components||1;return g=Math.max(g,I),p+=I*O,{name:b.name,type:b.type,components:O,offset:M}}),size:Bx(p,Math.max(g,l)),alignment:l}}function Bx(f,l){return Math.ceil(f/l)*l}class Rv extends Xo{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(l,p){let g=this.length;return this.resize(g+1),this.emplace(g,l,p)}emplace(l,p,g){let b=2*l;return this.int16[b+0]=p,this.int16[b+1]=g,l}}Rv.prototype.bytesPerElement=4,fr("StructArrayLayout2i4",Rv);class jv extends Xo{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(l,p,g){let b=this.length;return this.resize(b+1),this.emplace(b,l,p,g)}emplace(l,p,g,b){let I=3*l;return this.int16[I+0]=p,this.int16[I+1]=g,this.int16[I+2]=b,l}}jv.prototype.bytesPerElement=6,fr("StructArrayLayout3i6",jv);class _I extends Xo{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(l,p,g,b){let I=this.length;return this.resize(I+1),this.emplace(I,l,p,g,b)}emplace(l,p,g,b,I){let M=4*l;return this.int16[M+0]=p,this.int16[M+1]=g,this.int16[M+2]=b,this.int16[M+3]=I,l}}_I.prototype.bytesPerElement=8,fr("StructArrayLayout4i8",_I);class qv extends Xo{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(l,p,g,b,I,M){let O=this.length;return this.resize(O+1),this.emplace(O,l,p,g,b,I,M)}emplace(l,p,g,b,I,M,O){let L=6*l;return this.int16[L+0]=p,this.int16[L+1]=g,this.int16[L+2]=b,this.int16[L+3]=I,this.int16[L+4]=M,this.int16[L+5]=O,l}}qv.prototype.bytesPerElement=12,fr("StructArrayLayout2i4i12",qv);class eg extends Xo{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(l,p,g,b,I,M){let O=this.length;return this.resize(O+1),this.emplace(O,l,p,g,b,I,M)}emplace(l,p,g,b,I,M,O){let L=4*l,F=8*l;return this.int16[L+0]=p,this.int16[L+1]=g,this.uint8[F+4]=b,this.uint8[F+5]=I,this.uint8[F+6]=M,this.uint8[F+7]=O,l}}eg.prototype.bytesPerElement=8,fr("StructArrayLayout2i4ub8",eg);class z1 extends Xo{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(l,p){let g=this.length;return this.resize(g+1),this.emplace(g,l,p)}emplace(l,p,g){let b=2*l;return this.float32[b+0]=p,this.float32[b+1]=g,l}}z1.prototype.bytesPerElement=8,fr("StructArrayLayout2f8",z1);class Vx extends Xo{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(l,p,g,b,I,M,O,L,F,U){let W=this.length;return this.resize(W+1),this.emplace(W,l,p,g,b,I,M,O,L,F,U)}emplace(l,p,g,b,I,M,O,L,F,U,W){let X=10*l;return this.uint16[X+0]=p,this.uint16[X+1]=g,this.uint16[X+2]=b,this.uint16[X+3]=I,this.uint16[X+4]=M,this.uint16[X+5]=O,this.uint16[X+6]=L,this.uint16[X+7]=F,this.uint16[X+8]=U,this.uint16[X+9]=W,l}}Vx.prototype.bytesPerElement=20,fr("StructArrayLayout10ui20",Vx);class tg extends Xo{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(l,p,g,b,I,M,O,L,F,U,W,X){let re=this.length;return this.resize(re+1),this.emplace(re,l,p,g,b,I,M,O,L,F,U,W,X)}emplace(l,p,g,b,I,M,O,L,F,U,W,X,re){let ne=12*l;return this.int16[ne+0]=p,this.int16[ne+1]=g,this.int16[ne+2]=b,this.int16[ne+3]=I,this.uint16[ne+4]=M,this.uint16[ne+5]=O,this.uint16[ne+6]=L,this.uint16[ne+7]=F,this.int16[ne+8]=U,this.int16[ne+9]=W,this.int16[ne+10]=X,this.int16[ne+11]=re,l}}tg.prototype.bytesPerElement=24,fr("StructArrayLayout4i4ui4i24",tg);class bI extends Xo{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(l,p,g){let b=this.length;return this.resize(b+1),this.emplace(b,l,p,g)}emplace(l,p,g,b){let I=3*l;return this.float32[I+0]=p,this.float32[I+1]=g,this.float32[I+2]=b,l}}bI.prototype.bytesPerElement=12,fr("StructArrayLayout3f12",bI);class xI extends Xo{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer)}emplaceBack(l){let p=this.length;return this.resize(p+1),this.emplace(p,l)}emplace(l,p){return this.uint32[1*l+0]=p,l}}xI.prototype.bytesPerElement=4,fr("StructArrayLayout1ul4",xI);class Gx extends Xo{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(l,p,g,b,I,M,O,L,F){let U=this.length;return this.resize(U+1),this.emplace(U,l,p,g,b,I,M,O,L,F)}emplace(l,p,g,b,I,M,O,L,F,U){let W=10*l,X=5*l;return this.int16[W+0]=p,this.int16[W+1]=g,this.int16[W+2]=b,this.int16[W+3]=I,this.int16[W+4]=M,this.int16[W+5]=O,this.uint32[X+3]=L,this.uint16[W+8]=F,this.uint16[W+9]=U,l}}Gx.prototype.bytesPerElement=20,fr("StructArrayLayout6i1ul2ui20",Gx);class wI extends Xo{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(l,p,g,b,I,M){let O=this.length;return this.resize(O+1),this.emplace(O,l,p,g,b,I,M)}emplace(l,p,g,b,I,M,O){let L=6*l;return this.int16[L+0]=p,this.int16[L+1]=g,this.int16[L+2]=b,this.int16[L+3]=I,this.int16[L+4]=M,this.int16[L+5]=O,l}}wI.prototype.bytesPerElement=12,fr("StructArrayLayout2i2i2i12",wI);class S extends Xo{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(l,p,g,b,I){let M=this.length;return this.resize(M+1),this.emplace(M,l,p,g,b,I)}emplace(l,p,g,b,I,M){let O=4*l,L=8*l;return this.float32[O+0]=p,this.float32[O+1]=g,this.float32[O+2]=b,this.int16[L+6]=I,this.int16[L+7]=M,l}}S.prototype.bytesPerElement=16,fr("StructArrayLayout2f1f2i16",S);class s extends Xo{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(l,p,g,b,I,M){let O=this.length;return this.resize(O+1),this.emplace(O,l,p,g,b,I,M)}emplace(l,p,g,b,I,M,O){let L=16*l,F=4*l,U=8*l;return this.uint8[L+0]=p,this.uint8[L+1]=g,this.float32[F+1]=b,this.float32[F+2]=I,this.int16[U+6]=M,this.int16[U+7]=O,l}}s.prototype.bytesPerElement=16,fr("StructArrayLayout2ub2f2i16",s);class d extends Xo{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(l,p,g){let b=this.length;return this.resize(b+1),this.emplace(b,l,p,g)}emplace(l,p,g,b){let I=3*l;return this.uint16[I+0]=p,this.uint16[I+1]=g,this.uint16[I+2]=b,l}}d.prototype.bytesPerElement=6,fr("StructArrayLayout3ui6",d);class v extends Xo{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(l,p,g,b,I,M,O,L,F,U,W,X,re,ne,ae,he,Ie){let Xe=this.length;return this.resize(Xe+1),this.emplace(Xe,l,p,g,b,I,M,O,L,F,U,W,X,re,ne,ae,he,Ie)}emplace(l,p,g,b,I,M,O,L,F,U,W,X,re,ne,ae,he,Ie,Xe){let je=24*l,Ve=12*l,st=48*l;return this.int16[je+0]=p,this.int16[je+1]=g,this.uint16[je+2]=b,this.uint16[je+3]=I,this.uint32[Ve+2]=M,this.uint32[Ve+3]=O,this.uint32[Ve+4]=L,this.uint16[je+10]=F,this.uint16[je+11]=U,this.uint16[je+12]=W,this.float32[Ve+7]=X,this.float32[Ve+8]=re,this.uint8[st+36]=ne,this.uint8[st+37]=ae,this.uint8[st+38]=he,this.uint32[Ve+10]=Ie,this.int16[je+22]=Xe,l}}v.prototype.bytesPerElement=48,fr("StructArrayLayout2i2ui3ul3ui2f3ub1ul1i48",v);class x extends Xo{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(l,p,g,b,I,M,O,L,F,U,W,X,re,ne,ae,he,Ie,Xe,je,Ve,st,yt,kt,tr,Ht,Xt,Or,Kt){let Jt=this.length;return this.resize(Jt+1),this.emplace(Jt,l,p,g,b,I,M,O,L,F,U,W,X,re,ne,ae,he,Ie,Xe,je,Ve,st,yt,kt,tr,Ht,Xt,Or,Kt)}emplace(l,p,g,b,I,M,O,L,F,U,W,X,re,ne,ae,he,Ie,Xe,je,Ve,st,yt,kt,tr,Ht,Xt,Or,Kt,Jt){let Ct=32*l,Jr=16*l;return this.int16[Ct+0]=p,this.int16[Ct+1]=g,this.int16[Ct+2]=b,this.int16[Ct+3]=I,this.int16[Ct+4]=M,this.int16[Ct+5]=O,this.int16[Ct+6]=L,this.int16[Ct+7]=F,this.uint16[Ct+8]=U,this.uint16[Ct+9]=W,this.uint16[Ct+10]=X,this.uint16[Ct+11]=re,this.uint16[Ct+12]=ne,this.uint16[Ct+13]=ae,this.uint16[Ct+14]=he,this.uint16[Ct+15]=Ie,this.uint16[Ct+16]=Xe,this.uint16[Ct+17]=je,this.uint16[Ct+18]=Ve,this.uint16[Ct+19]=st,this.uint16[Ct+20]=yt,this.uint16[Ct+21]=kt,this.uint16[Ct+22]=tr,this.uint32[Jr+12]=Ht,this.float32[Jr+13]=Xt,this.float32[Jr+14]=Or,this.uint16[Ct+30]=Kt,this.uint16[Ct+31]=Jt,l}}x.prototype.bytesPerElement=64,fr("StructArrayLayout8i15ui1ul2f2ui64",x);class T extends Xo{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(l){let p=this.length;return this.resize(p+1),this.emplace(p,l)}emplace(l,p){return this.float32[1*l+0]=p,l}}T.prototype.bytesPerElement=4,fr("StructArrayLayout1f4",T);class C extends Xo{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(l,p,g){let b=this.length;return this.resize(b+1),this.emplace(b,l,p,g)}emplace(l,p,g,b){let I=3*l;return this.uint16[6*l+0]=p,this.float32[I+1]=g,this.float32[I+2]=b,l}}C.prototype.bytesPerElement=12,fr("StructArrayLayout1ui2f12",C);class R extends Xo{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(l,p,g){let b=this.length;return this.resize(b+1),this.emplace(b,l,p,g)}emplace(l,p,g,b){let I=4*l;return this.uint32[2*l+0]=p,this.uint16[I+2]=g,this.uint16[I+3]=b,l}}R.prototype.bytesPerElement=8,fr("StructArrayLayout1ul2ui8",R);class q extends Xo{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(l,p){let g=this.length;return this.resize(g+1),this.emplace(g,l,p)}emplace(l,p,g){let b=2*l;return this.uint16[b+0]=p,this.uint16[b+1]=g,l}}q.prototype.bytesPerElement=4,fr("StructArrayLayout2ui4",q);class B extends Xo{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(l){let p=this.length;return this.resize(p+1),this.emplace(p,l)}emplace(l,p){return this.uint16[1*l+0]=p,l}}B.prototype.bytesPerElement=2,fr("StructArrayLayout1ui2",B);class H extends Xo{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(l,p,g,b){let I=this.length;return this.resize(I+1),this.emplace(I,l,p,g,b)}emplace(l,p,g,b,I){let M=4*l;return this.float32[M+0]=p,this.float32[M+1]=g,this.float32[M+2]=b,this.float32[M+3]=I,l}}H.prototype.bytesPerElement=16,fr("StructArrayLayout4f16",H);class Y extends q1{get anchorPointX(){return this._structArray.int16[this._pos2+0]}get anchorPointY(){return this._structArray.int16[this._pos2+1]}get x1(){return this._structArray.int16[this._pos2+2]}get y1(){return this._structArray.int16[this._pos2+3]}get x2(){return this._structArray.int16[this._pos2+4]}get y2(){return this._structArray.int16[this._pos2+5]}get featureIndex(){return this._structArray.uint32[this._pos4+3]}get sourceLayerIndex(){return this._structArray.uint16[this._pos2+8]}get bucketIndex(){return this._structArray.uint16[this._pos2+9]}get anchorPoint(){return new a(this.anchorPointX,this.anchorPointY)}}Y.prototype.size=20;class $ extends Gx{get(l){return new Y(this,l)}}fr("CollisionBoxArray",$);class ee extends q1{get anchorX(){return this._structArray.int16[this._pos2+0]}get anchorY(){return this._structArray.int16[this._pos2+1]}get glyphStartIndex(){return this._structArray.uint16[this._pos2+2]}get numGlyphs(){return this._structArray.uint16[this._pos2+3]}get vertexStartIndex(){return this._structArray.uint32[this._pos4+2]}get lineStartIndex(){return this._structArray.uint32[this._pos4+3]}get lineLength(){return this._structArray.uint32[this._pos4+4]}get segment(){return this._structArray.uint16[this._pos2+10]}get lowerSize(){return this._structArray.uint16[this._pos2+11]}get upperSize(){return this._structArray.uint16[this._pos2+12]}get lineOffsetX(){return this._structArray.float32[this._pos4+7]}get lineOffsetY(){return this._structArray.float32[this._pos4+8]}get writingMode(){return this._structArray.uint8[this._pos1+36]}get placedOrientation(){return this._structArray.uint8[this._pos1+37]}set placedOrientation(l){this._structArray.uint8[this._pos1+37]=l}get hidden(){return this._structArray.uint8[this._pos1+38]}set hidden(l){this._structArray.uint8[this._pos1+38]=l}get crossTileID(){return this._structArray.uint32[this._pos4+10]}set crossTileID(l){this._structArray.uint32[this._pos4+10]=l}get associatedIconIndex(){return this._structArray.int16[this._pos2+22]}}ee.prototype.size=48;class ie extends v{get(l){return new ee(this,l)}}fr("PlacedSymbolArray",ie);class ve extends q1{get anchorX(){return this._structArray.int16[this._pos2+0]}get anchorY(){return this._structArray.int16[this._pos2+1]}get rightJustifiedTextSymbolIndex(){return this._structArray.int16[this._pos2+2]}get centerJustifiedTextSymbolIndex(){return this._structArray.int16[this._pos2+3]}get leftJustifiedTextSymbolIndex(){return this._structArray.int16[this._pos2+4]}get verticalPlacedTextSymbolIndex(){return this._structArray.int16[this._pos2+5]}get placedIconSymbolIndex(){return this._structArray.int16[this._pos2+6]}get verticalPlacedIconSymbolIndex(){return this._structArray.int16[this._pos2+7]}get key(){return this._structArray.uint16[this._pos2+8]}get textBoxStartIndex(){return this._structArray.uint16[this._pos2+9]}get textBoxEndIndex(){return this._structArray.uint16[this._pos2+10]}get verticalTextBoxStartIndex(){return this._structArray.uint16[this._pos2+11]}get verticalTextBoxEndIndex(){return this._structArray.uint16[this._pos2+12]}get iconBoxStartIndex(){return this._structArray.uint16[this._pos2+13]}get iconBoxEndIndex(){return this._structArray.uint16[this._pos2+14]}get verticalIconBoxStartIndex(){return this._structArray.uint16[this._pos2+15]}get verticalIconBoxEndIndex(){return this._structArray.uint16[this._pos2+16]}get featureIndex(){return this._structArray.uint16[this._pos2+17]}get numHorizontalGlyphVertices(){return this._structArray.uint16[this._pos2+18]}get numVerticalGlyphVertices(){return this._structArray.uint16[this._pos2+19]}get numIconVertices(){return this._structArray.uint16[this._pos2+20]}get numVerticalIconVertices(){return this._structArray.uint16[this._pos2+21]}get useRuntimeCollisionCircles(){return this._structArray.uint16[this._pos2+22]}get crossTileID(){return this._structArray.uint32[this._pos4+12]}set crossTileID(l){this._structArray.uint32[this._pos4+12]=l}get textBoxScale(){return this._structArray.float32[this._pos4+13]}get collisionCircleDiameter(){return this._structArray.float32[this._pos4+14]}get textAnchorOffsetStartIndex(){return this._structArray.uint16[this._pos2+30]}get textAnchorOffsetEndIndex(){return this._structArray.uint16[this._pos2+31]}}ve.prototype.size=64;class ge extends x{get(l){return new ve(this,l)}}fr("SymbolInstanceArray",ge);class ye extends T{getoffsetX(l){return this.float32[1*l+0]}}fr("GlyphOffsetArray",ye);class Me extends jv{getx(l){return this.int16[3*l+0]}gety(l){return this.int16[3*l+1]}gettileUnitDistanceFromAnchor(l){return this.int16[3*l+2]}}fr("SymbolLineVertexArray",Me);class Re extends q1{get textAnchor(){return this._structArray.uint16[this._pos2+0]}get textOffset0(){return this._structArray.float32[this._pos4+1]}get textOffset1(){return this._structArray.float32[this._pos4+2]}}Re.prototype.size=12;class Pe extends C{get(l){return new Re(this,l)}}fr("TextAnchorOffsetArray",Pe);class ze extends q1{get featureIndex(){return this._structArray.uint32[this._pos4+0]}get sourceLayerIndex(){return this._structArray.uint16[this._pos2+2]}get bucketIndex(){return this._structArray.uint16[this._pos2+3]}}ze.prototype.size=8;class He extends R{get(l){return new ze(this,l)}}fr("FeatureIndexArray",He);class Le extends Rv{}class Qe extends Rv{}class ht extends Rv{}class it extends qv{}class at extends eg{}class dt extends z1{}class Vt extends Vx{}class $t extends tg{}class Nt extends bI{}class xr extends xI{}class Pn extends wI{}class So extends s{}class Jo extends d{}class Go extends q{}let qi=ca([{name:"a_pos",components:2,type:"Int16"}],4),{members:Xi}=qi;class Mn{constructor(l=[]){this._forceNewSegmentOnNextPrepare=!1,this.segments=l}prepareSegment(l,p,g,b){let I=this.segments[this.segments.length-1];return l>Mn.MAX_VERTEX_ARRAY_LENGTH&&At(`Max vertices per segment is ${Mn.MAX_VERTEX_ARRAY_LENGTH}: bucket requested ${l}. Consider using the \`fillLargeMeshArrays\` function if you require meshes with more than ${Mn.MAX_VERTEX_ARRAY_LENGTH} vertices.`),this._forceNewSegmentOnNextPrepare||!I||I.vertexLength+l>Mn.MAX_VERTEX_ARRAY_LENGTH||I.sortKey!==b?this.createNewSegment(p,g,b):I}createNewSegment(l,p,g){let b={vertexOffset:l.length,primitiveOffset:p.length,vertexLength:0,primitiveLength:0,vaos:{}};return g!==void 0&&(b.sortKey=g),this._forceNewSegmentOnNextPrepare=!1,this.segments.push(b),b}getOrCreateLatestSegment(l,p,g){return this.prepareSegment(0,l,p,g)}forceNewSegmentOnNextPrepare(){this._forceNewSegmentOnNextPrepare=!0}get(){return this.segments}destroy(){for(let l of this.segments)for(let p in l.vaos)l.vaos[p].destroy()}static simpleSegment(l,p,g,b){return new Mn([{vertexOffset:l,primitiveOffset:p,vertexLength:g,primitiveLength:b,vaos:{},sortKey:0}])}}function Qo(f,l){return 256*(f=ot(Math.floor(f),0,255))+ot(Math.floor(l),0,255)}Mn.MAX_VERTEX_ARRAY_LENGTH=Math.pow(2,16)-1,fr("SegmentVector",Mn);let Ia=ca([{name:"a_pattern_from",components:4,type:"Uint16"},{name:"a_pattern_to",components:4,type:"Uint16"},{name:"a_pixel_ratio_from",components:1,type:"Uint16"},{name:"a_pixel_ratio_to",components:1,type:"Uint16"}]);var Fa,ls,gl,op={exports:{}},vh={exports:{}},yh={exports:{}},zv=function(){if(gl)return op.exports;gl=1;var f=(Fa||(Fa=1,vh.exports=function(p,g){var b,I,M,O,L,F,U,W;for(I=p.length-(b=3&p.length),M=g,L=3432918353,F=461845907,W=0;W<I;)U=255&p.charCodeAt(W)|(255&p.charCodeAt(++W))<<8|(255&p.charCodeAt(++W))<<16|(255&p.charCodeAt(++W))<<24,++W,M=27492+(65535&(O=5*(65535&(M=(M^=U=(65535&(U=(U=(65535&U)*L+(((U>>>16)*L&65535)<<16)&4294967295)<<15|U>>>17))*F+(((U>>>16)*F&65535)<<16)&4294967295)<<13|M>>>19))+((5*(M>>>16)&65535)<<16)&4294967295))+((58964+(O>>>16)&65535)<<16);switch(U=0,b){case 3:U^=(255&p.charCodeAt(W+2))<<16;case 2:U^=(255&p.charCodeAt(W+1))<<8;case 1:M^=U=(65535&(U=(U=(65535&(U^=255&p.charCodeAt(W)))*L+(((U>>>16)*L&65535)<<16)&4294967295)<<15|U>>>17))*F+(((U>>>16)*F&65535)<<16)&4294967295}return M^=p.length,M=2246822507*(65535&(M^=M>>>16))+((2246822507*(M>>>16)&65535)<<16)&4294967295,M=3266489909*(65535&(M^=M>>>13))+((3266489909*(M>>>16)&65535)<<16)&4294967295,(M^=M>>>16)>>>0}),vh.exports),l=(ls||(ls=1,yh.exports=function(p,g){for(var b,I=p.length,M=g^I,O=0;I>=4;)b=1540483477*(65535&(b=255&p.charCodeAt(O)|(255&p.charCodeAt(++O))<<8|(255&p.charCodeAt(++O))<<16|(255&p.charCodeAt(++O))<<24))+((1540483477*(b>>>16)&65535)<<16),M=1540483477*(65535&M)+((1540483477*(M>>>16)&65535)<<16)^(b=1540483477*(65535&(b^=b>>>24))+((1540483477*(b>>>16)&65535)<<16)),I-=4,++O;switch(I){case 3:M^=(255&p.charCodeAt(O+2))<<16;case 2:M^=(255&p.charCodeAt(O+1))<<8;case 1:M=1540483477*(65535&(M^=255&p.charCodeAt(O)))+((1540483477*(M>>>16)&65535)<<16)}return M=1540483477*(65535&(M^=M>>>13))+((1540483477*(M>>>16)&65535)<<16),(M^=M>>>15)>>>0}),yh.exports);return op.exports=f,op.exports.murmur3=f,op.exports.murmur2=l,op.exports}(),Fv=c(zv);class rg{constructor(){this.ids=[],this.positions=[],this.indexed=!1}add(l,p,g,b){this.ids.push(ng(l)),this.positions.push(p,g,b)}getPositions(l){if(!this.indexed)throw new Error("Trying to get index, but feature positions are not indexed");let p=ng(l),g=0,b=this.ids.length-1;for(;g<b;){let M=g+b>>1;this.ids[M]>=p?b=M:g=M+1}let I=[];for(;this.ids[g]===p;)I.push({index:this.positions[3*g],start:this.positions[3*g+1],end:this.positions[3*g+2]}),g++;return I}static serialize(l,p){let g=new Float64Array(l.ids),b=new Uint32Array(l.positions);return Ql(g,b,0,g.length-1),p&&p.push(g.buffer,b.buffer),{ids:g,positions:b}}static deserialize(l){let p=new rg;return p.ids=l.ids,p.positions=l.positions,p.indexed=!0,p}}function ng(f){let l=+f;return!isNaN(l)&&l<=Number.MAX_SAFE_INTEGER?l:Fv(String(f))}function Ql(f,l,p,g){for(;p<g;){let b=f[p+g>>1],I=p-1,M=g+1;for(;;){do I++;while(f[I]<b);do M--;while(f[M]>b);if(I>=M)break;ip(f,I,M),ip(l,3*I,3*M),ip(l,3*I+1,3*M+1),ip(l,3*I+2,3*M+2)}M-p<g-M?(Ql(f,l,p,M),p=M+1):(Ql(f,l,M+1,g),g=M)}}function ip(f,l,p){let g=f[l];f[l]=f[p],f[p]=g}fr("FeaturePositionMap",rg);class vl{constructor(l,p){this.gl=l.gl,this.location=p}}class _h extends vl{constructor(l,p){super(l,p),this.current=0}set(l){this.current!==l&&(this.current=l,this.gl.uniform1f(this.location,l))}}class Ma extends vl{constructor(l,p){super(l,p),this.current=[0,0,0,0]}set(l){l[0]===this.current[0]&&l[1]===this.current[1]&&l[2]===this.current[2]&&l[3]===this.current[3]||(this.current=l,this.gl.uniform4f(this.location,l[0],l[1],l[2],l[3]))}}class Ua extends vl{constructor(l,p){super(l,p),this.current=gn.transparent}set(l){l.r===this.current.r&&l.g===this.current.g&&l.b===this.current.b&&l.a===this.current.a||(this.current=l,this.gl.uniform4f(this.location,l.r,l.g,l.b,l.a))}}let lc=new Float32Array(16);function Ca(f){return[Qo(255*f.r,255*f.g),Qo(255*f.b,255*f.a)]}class F1{constructor(l,p,g){this.value=l,this.uniformNames=p.map(b=>`u_${b}`),this.type=g}setUniform(l,p,g){l.set(g.constantOr(this.value))}getBinding(l,p,g){return this.type==="color"?new Ua(l,p):new _h(l,p)}}class Uv{constructor(l,p){this.uniformNames=p.map(g=>`u_${g}`),this.patternFrom=null,this.patternTo=null,this.pixelRatioFrom=1,this.pixelRatioTo=1}setConstantPatternPositions(l,p){this.pixelRatioFrom=p.pixelRatio,this.pixelRatioTo=l.pixelRatio,this.patternFrom=p.tlbr,this.patternTo=l.tlbr}setUniform(l,p,g,b){let I=b==="u_pattern_to"?this.patternTo:b==="u_pattern_from"?this.patternFrom:b==="u_pixel_ratio_to"?this.pixelRatioTo:b==="u_pixel_ratio_from"?this.pixelRatioFrom:null;I&&l.set(I)}getBinding(l,p,g){return g.substr(0,9)==="u_pattern"?new Ma(l,p):new _h(l,p)}}class nd{constructor(l,p,g,b){this.expression=l,this.type=g,this.maxValue=0,this.paintVertexAttributes=p.map(I=>({name:`a_${I}`,type:"Float32",components:g==="color"?2:1,offset:0})),this.paintVertexArray=new b}populatePaintArray(l,p,g){let b=this.paintVertexArray.length,I=this.expression.evaluate(new ni(0,g),p,{},g.canonical,[],g.formattedSection);this.paintVertexArray.resize(l),this._setPaintValue(b,l,I)}updatePaintArray(l,p,g,b,I){let M=this.expression.evaluate(new ni(0,I),g,b);this._setPaintValue(l,p,M)}_setPaintValue(l,p,g){if(this.type==="color"){let b=Ca(g);for(let I=l;I<p;I++)this.paintVertexArray.emplace(I,b[0],b[1])}else{for(let b=l;b<p;b++)this.paintVertexArray.emplace(b,g);this.maxValue=Math.max(this.maxValue,Math.abs(g))}}upload(l){this.paintVertexArray&&this.paintVertexArray.arrayBuffer&&(this.paintVertexBuffer&&this.paintVertexBuffer.buffer?this.paintVertexBuffer.updateData(this.paintVertexArray):this.paintVertexBuffer=l.createVertexBuffer(this.paintVertexArray,this.paintVertexAttributes,this.expression.isStateDependent))}destroy(){this.paintVertexBuffer&&this.paintVertexBuffer.destroy()}}class ap{constructor(l,p,g,b,I,M){this.expression=l,this.uniformNames=p.map(O=>`u_${O}_t`),this.type=g,this.useIntegerZoom=b,this.zoom=I,this.maxValue=0,this.paintVertexAttributes=p.map(O=>({name:`a_${O}`,type:"Float32",components:g==="color"?4:2,offset:0})),this.paintVertexArray=new M}populatePaintArray(l,p,g){let b=this.expression.evaluate(new ni(this.zoom,g),p,{},g.canonical,[],g.formattedSection),I=this.expression.evaluate(new ni(this.zoom+1,g),p,{},g.canonical,[],g.formattedSection),M=this.paintVertexArray.length;this.paintVertexArray.resize(l),this._setPaintValue(M,l,b,I)}updatePaintArray(l,p,g,b,I){let M=this.expression.evaluate(new ni(this.zoom,I),g,b),O=this.expression.evaluate(new ni(this.zoom+1,I),g,b);this._setPaintValue(l,p,M,O)}_setPaintValue(l,p,g,b){if(this.type==="color"){let I=Ca(g),M=Ca(b);for(let O=l;O<p;O++)this.paintVertexArray.emplace(O,I[0],I[1],M[0],M[1])}else{for(let I=l;I<p;I++)this.paintVertexArray.emplace(I,g,b);this.maxValue=Math.max(this.maxValue,Math.abs(g),Math.abs(b))}}upload(l){this.paintVertexArray&&this.paintVertexArray.arrayBuffer&&(this.paintVertexBuffer&&this.paintVertexBuffer.buffer?this.paintVertexBuffer.updateData(this.paintVertexArray):this.paintVertexBuffer=l.createVertexBuffer(this.paintVertexArray,this.paintVertexAttributes,this.expression.isStateDependent))}destroy(){this.paintVertexBuffer&&this.paintVertexBuffer.destroy()}setUniform(l,p){let g=this.useIntegerZoom?Math.floor(p.zoom):p.zoom,b=ot(this.expression.interpolationFactor(g,this.zoom,this.zoom+1),0,1);l.set(b)}getBinding(l,p,g){return new _h(l,p)}}class bh{constructor(l,p,g,b,I,M){this.expression=l,this.type=p,this.useIntegerZoom=g,this.zoom=b,this.layerId=M,this.zoomInPaintVertexArray=new I,this.zoomOutPaintVertexArray=new I}populatePaintArray(l,p,g){let b=this.zoomInPaintVertexArray.length;this.zoomInPaintVertexArray.resize(l),this.zoomOutPaintVertexArray.resize(l),this._setPaintValues(b,l,p.patterns&&p.patterns[this.layerId],g.imagePositions)}updatePaintArray(l,p,g,b,I){this._setPaintValues(l,p,g.patterns&&g.patterns[this.layerId],I.imagePositions)}_setPaintValues(l,p,g,b){if(!b||!g)return;let{min:I,mid:M,max:O}=g,L=b[I],F=b[M],U=b[O];if(L&&F&&U)for(let W=l;W<p;W++)this.zoomInPaintVertexArray.emplace(W,F.tl[0],F.tl[1],F.br[0],F.br[1],L.tl[0],L.tl[1],L.br[0],L.br[1],F.pixelRatio,L.pixelRatio),this.zoomOutPaintVertexArray.emplace(W,F.tl[0],F.tl[1],F.br[0],F.br[1],U.tl[0],U.tl[1],U.br[0],U.br[1],F.pixelRatio,U.pixelRatio)}upload(l){this.zoomInPaintVertexArray&&this.zoomInPaintVertexArray.arrayBuffer&&this.zoomOutPaintVertexArray&&this.zoomOutPaintVertexArray.arrayBuffer&&(this.zoomInPaintVertexBuffer=l.createVertexBuffer(this.zoomInPaintVertexArray,Ia.members,this.expression.isStateDependent),this.zoomOutPaintVertexBuffer=l.createVertexBuffer(this.zoomOutPaintVertexArray,Ia.members,this.expression.isStateDependent))}destroy(){this.zoomOutPaintVertexBuffer&&this.zoomOutPaintVertexBuffer.destroy(),this.zoomInPaintVertexBuffer&&this.zoomInPaintVertexBuffer.destroy()}}class CN{constructor(l,p,g){this.binders={},this._buffers=[];let b=[];for(let I in l.paint._values){if(!g(I))continue;let M=l.paint.get(I);if(!(M instanceof Fp&&hh(M.property.specification)))continue;let O=AN(I,l.type),L=M.value,F=M.property.specification.type,U=M.property.useIntegerZoom,W=M.property.specification["property-type"],X=W==="cross-faded"||W==="cross-faded-data-driven";if(L.kind==="constant")this.binders[I]=X?new Uv(L.value,O):new F1(L.value,O,F),b.push(`/u_${I}`);else if(L.kind==="source"||X){let re=EI(I,F,"source");this.binders[I]=X?new bh(L,F,U,p,re,l.id):new nd(L,O,F,re),b.push(`/a_${I}`)}else{let re=EI(I,F,"composite");this.binders[I]=new ap(L,O,F,U,p,re),b.push(`/z_${I}`)}}this.cacheKey=b.sort().join("")}getMaxValue(l){let p=this.binders[l];return p instanceof nd||p instanceof ap?p.maxValue:0}populatePaintArrays(l,p,g){for(let b in this.binders){let I=this.binders[b];(I instanceof nd||I instanceof ap||I instanceof bh)&&I.populatePaintArray(l,p,g)}}setConstantPatternPositions(l,p){for(let g in this.binders){let b=this.binders[g];b instanceof Uv&&b.setConstantPatternPositions(l,p)}}updatePaintArrays(l,p,g,b,I){let M=!1;for(let O in l){let L=p.getPositions(O);for(let F of L){let U=g.feature(F.index);for(let W in this.binders){let X=this.binders[W];if((X instanceof nd||X instanceof ap||X instanceof bh)&&X.expression.isStateDependent===!0){let re=b.paint.get(W);X.expression=re.value,X.updatePaintArray(F.start,F.end,U,l[O],I),M=!0}}}}return M}defines(){let l=[];for(let p in this.binders){let g=this.binders[p];(g instanceof F1||g instanceof Uv)&&l.push(...g.uniformNames.map(b=>`#define HAS_UNIFORM_${b}`))}return l}getBinderAttributes(){let l=[];for(let p in this.binders){let g=this.binders[p];if(g instanceof nd||g instanceof ap)for(let b=0;b<g.paintVertexAttributes.length;b++)l.push(g.paintVertexAttributes[b].name);else if(g instanceof bh)for(let b=0;b<Ia.members.length;b++)l.push(Ia.members[b].name)}return l}getBinderUniforms(){let l=[];for(let p in this.binders){let g=this.binders[p];if(g instanceof F1||g instanceof Uv||g instanceof ap)for(let b of g.uniformNames)l.push(b)}return l}getPaintVertexBuffers(){return this._buffers}getUniforms(l,p){let g=[];for(let b in this.binders){let I=this.binders[b];if(I instanceof F1||I instanceof Uv||I instanceof ap){for(let M of I.uniformNames)if(p[M]){let O=I.getBinding(l,p[M],M);g.push({name:M,property:b,binding:O})}}}return g}setUniforms(l,p,g,b){for(let{name:I,property:M,binding:O}of p)this.binders[M].setUniform(O,b,g.get(M),I)}updatePaintBuffers(l){this._buffers=[];for(let p in this.binders){let g=this.binders[p];if(l&&g instanceof bh){let b=l.fromScale===2?g.zoomInPaintVertexBuffer:g.zoomOutPaintVertexBuffer;b&&this._buffers.push(b)}else(g instanceof nd||g instanceof ap)&&g.paintVertexBuffer&&this._buffers.push(g.paintVertexBuffer)}}upload(l){for(let p in this.binders){let g=this.binders[p];(g instanceof nd||g instanceof ap||g instanceof bh)&&g.upload(l)}this.updatePaintBuffers()}destroy(){for(let l in this.binders){let p=this.binders[l];(p instanceof nd||p instanceof ap||p instanceof bh)&&p.destroy()}}}class Cu{constructor(l,p,g=()=>!0){this.programConfigurations={};for(let b of l)this.programConfigurations[b.id]=new CN(b,p,g);this.needsUpload=!1,this._featureMap=new rg,this._bufferOffset=0}populatePaintArrays(l,p,g,b){for(let I in this.programConfigurations)this.programConfigurations[I].populatePaintArrays(l,p,b);p.id!==void 0&&this._featureMap.add(p.id,g,this._bufferOffset,l),this._bufferOffset=l,this.needsUpload=!0}updatePaintArrays(l,p,g,b){for(let I of g)this.needsUpload=this.programConfigurations[I.id].updatePaintArrays(l,this._featureMap,p,I,b)||this.needsUpload}get(l){return this.programConfigurations[l]}upload(l){if(this.needsUpload){for(let p in this.programConfigurations)this.programConfigurations[p].upload(l);this.needsUpload=!1}}destroy(){for(let l in this.programConfigurations)this.programConfigurations[l].destroy()}}function AN(f,l){return{"text-opacity":["opacity"],"icon-opacity":["opacity"],"text-color":["fill_color"],"icon-color":["fill_color"],"text-halo-color":["halo_color"],"icon-halo-color":["halo_color"],"text-halo-blur":["halo_blur"],"icon-halo-blur":["halo_blur"],"text-halo-width":["halo_width"],"icon-halo-width":["halo_width"],"line-gap-width":["gapwidth"],"line-pattern":["pattern_to","pattern_from","pixel_ratio_to","pixel_ratio_from"],"fill-pattern":["pattern_to","pattern_from","pixel_ratio_to","pixel_ratio_from"],"fill-extrusion-pattern":["pattern_to","pattern_from","pixel_ratio_to","pixel_ratio_from"]}[f]||[f.replace(`${l}-`,"").replace(/-/g,"_")]}function EI(f,l,p){let g={color:{source:z1,composite:H},number:{source:T,composite:z1}},b=function(I){return{"line-pattern":{source:Vt,composite:Vt},"fill-pattern":{source:Vt,composite:Vt},"fill-extrusion-pattern":{source:Vt,composite:Vt}}[I]}(f);return b&&b[p]||g[l][p]}fr("ConstantBinder",F1),fr("CrossFadedConstantBinder",Uv),fr("SourceExpressionBinder",nd),fr("CrossFadedCompositeBinder",bh),fr("CompositeExpressionBinder",ap),fr("ProgramConfiguration",CN,{omit:["_buffers"]}),fr("ProgramConfigurationSet",Cu);let Hx=Math.pow(2,14)-1,Wx=-Hx-1;function xh(f){let l=ct/f.extent,p=f.loadGeometry();for(let g=0;g<p.length;g++){let b=p[g];for(let I=0;I<b.length;I++){let M=b[I],O=Math.round(M.x*l),L=Math.round(M.y*l);M.x=ot(O,Wx,Hx),M.y=ot(L,Wx,Hx),(O<M.x||O>M.x+1||L<M.y||L>M.y+1)&&At("Geometry exceeds allowed extent, reduce your vector tile buffer size")}}return p}function od(f,l){return{type:f.type,id:f.id,properties:f.properties,geometry:l?xh(f):[]}}let wfe=-32768;function pmt(f,l,p,g,b){f.emplaceBack(wfe+8*l+g,wfe+8*p+b)}class qB{constructor(l){this.zoom=l.zoom,this.globalState=l.globalState,this.overscaling=l.overscaling,this.layers=l.layers,this.layerIds=this.layers.map(p=>p.id),this.index=l.index,this.hasPattern=!1,this.layoutVertexArray=new Qe,this.indexArray=new Jo,this.segments=new Mn,this.programConfigurations=new Cu(l.layers,l.zoom),this.stateDependentLayerIds=this.layers.filter(p=>p.isStateDependent()).map(p=>p.id)}populate(l,p,g){let b=this.layers[0],I=[],M=null,O=!1,L=b.type==="heatmap";if(b.type==="circle"){let U=b;M=U.layout.get("circle-sort-key"),O=!M.isConstant(),L=L||U.paint.get("circle-pitch-alignment")==="map"}let F=L?p.subdivisionGranularity.circle:1;for(let{feature:U,id:W,index:X,sourceLayerIndex:re}of l){let ne=this.layers[0]._featureFilter.needGeometry,ae=od(U,ne);if(!this.layers[0]._featureFilter.filter(new ni(this.zoom,{globalState:this.globalState}),ae,g))continue;let he=O?M.evaluate(ae,{},g):void 0,Ie={id:W,properties:U.properties,type:U.type,sourceLayerIndex:re,index:X,geometry:ne?ae.geometry:xh(U),patterns:{},sortKey:he};I.push(Ie)}O&&I.sort((U,W)=>U.sortKey-W.sortKey);for(let U of I){let{geometry:W,index:X,sourceLayerIndex:re}=U,ne=l[X].feature;this.addFeature(U,W,X,g,F),p.featureIndex.insert(ne,W,X,re,this.index)}}update(l,p,g){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(l,p,this.stateDependentLayers,{imagePositions:g,globalState:this.globalState})}isEmpty(){return this.layoutVertexArray.length===0}uploadPending(){return!this.uploaded||this.programConfigurations.needsUpload}upload(l){this.uploaded||(this.layoutVertexBuffer=l.createVertexBuffer(this.layoutVertexArray,Xi),this.indexBuffer=l.createIndexBuffer(this.indexArray)),this.programConfigurations.upload(l),this.uploaded=!0}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy())}addFeature(l,p,g,b,I=1){let M;switch(I){case 1:M=[0,7];break;case 3:M=[0,2,5,7];break;case 5:M=[0,1,3,4,6,7];break;case 7:M=[0,1,2,3,4,5,6,7];break;default:throw new Error(`Invalid circle bucket granularity: ${I}; valid values are 1, 3, 5, 7.`)}let O=M.length;for(let L of p)for(let F of L){let U=F.x,W=F.y;if(U<0||U>=ct||W<0||W>=ct)continue;let X=this.segments.prepareSegment(O*O,this.layoutVertexArray,this.indexArray,l.sortKey),re=X.vertexLength;for(let ne=0;ne<O;ne++)for(let ae=0;ae<O;ae++)pmt(this.layoutVertexArray,U,W,M[ae],M[ne]);for(let ne=0;ne<O-1;ne++)for(let ae=0;ae<O-1;ae++){let he=re+ne*O+ae,Ie=re+(ne+1)*O+ae;this.indexArray.emplaceBack(he,Ie+1,he+1),this.indexArray.emplaceBack(he,Ie,Ie+1)}X.vertexLength+=O*O,X.primitiveLength+=(O-1)*(O-1)*2}this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,l,g,{imagePositions:{},canonical:b,globalState:this.globalState})}}function Efe(f,l){for(let p=0;p<f.length;p++)if($x(l,f[p]))return!0;for(let p=0;p<l.length;p++)if($x(f,l[p]))return!0;return!!zB(f,l)}function fmt(f,l,p){return!!$x(f,l)||!!FB(l,f,p)}function Sfe(f,l){if(f.length===1)return Ife(l,f[0]);for(let p=0;p<l.length;p++){let g=l[p];for(let b=0;b<g.length;b++)if($x(f,g[b]))return!0}for(let p=0;p<f.length;p++)if(Ife(l,f[p]))return!0;for(let p=0;p<l.length;p++)if(zB(f,l[p]))return!0;return!1}function dmt(f,l,p){if(f.length>1){if(zB(f,l))return!0;for(let g=0;g<l.length;g++)if(FB(l[g],f,p))return!0}for(let g=0;g<f.length;g++)if(FB(f[g],l,p))return!0;return!1}function zB(f,l){if(f.length===0||l.length===0)return!1;for(let p=0;p<f.length-1;p++){let g=f[p],b=f[p+1];for(let I=0;I<l.length-1;I++)if(hmt(g,b,l[I],l[I+1]))return!0}return!1}function hmt(f,l,p,g){return Mt(f,p,g)!==Mt(l,p,g)&&Mt(f,l,p)!==Mt(f,l,g)}function FB(f,l,p){let g=p*p;if(l.length===1)return f.distSqr(l[0])<g;for(let b=1;b<l.length;b++)if(Tfe(f,l[b-1],l[b])<g)return!0;return!1}function Tfe(f,l,p){let g=l.distSqr(p);if(g===0)return f.distSqr(l);let b=((f.x-l.x)*(p.x-l.x)+(f.y-l.y)*(p.y-l.y))/g;return f.distSqr(b<0?l:b>1?p:p.sub(l)._mult(b)._add(l))}function Ife(f,l){let p,g,b,I=!1;for(let M=0;M<f.length;M++){p=f[M];for(let O=0,L=p.length-1;O<p.length;L=O++)g=p[O],b=p[L],g.y>l.y!=b.y>l.y&&l.x<(b.x-g.x)*(l.y-g.y)/(b.y-g.y)+g.x&&(I=!I)}return I}function $x(f,l){let p=!1;for(let g=0,b=f.length-1;g<f.length;b=g++){let I=f[g],M=f[b];I.y>l.y!=M.y>l.y&&l.x<(M.x-I.x)*(l.y-I.y)/(M.y-I.y)+I.x&&(p=!p)}return p}function mmt(f,l,p){let g=p[0],b=p[2];if(f.x<g.x&&l.x<g.x||f.x>b.x&&l.x>b.x||f.y<g.y&&l.y<g.y||f.y>b.y&&l.y>b.y)return!1;let I=Mt(f,l,p[0]);return I!==Mt(f,l,p[1])||I!==Mt(f,l,p[2])||I!==Mt(f,l,p[3])}function SI(f,l,p){let g=l.paint.get(f).value;return g.kind==="constant"?g.value:p.programConfigurations.get(l.id).getMaxValue(f)}function ON(f){return Math.sqrt(f[0]*f[0]+f[1]*f[1])}function PN(f,l,p,g,b){if(!l[0]&&!l[1])return f;let I=a.convert(l)._mult(b);p==="viewport"&&I._rotate(-g);let M=[];for(let O=0;O<f.length;O++)M.push(f[O].sub(I));return M}let Mfe,Cfe;fr("CircleBucket",qB,{omit:["layers"]});var gmt={get paint(){return Cfe=Cfe||new ml({"circle-radius":new Kr(Ae.paint_circle["circle-radius"]),"circle-color":new Kr(Ae.paint_circle["circle-color"]),"circle-blur":new Kr(Ae.paint_circle["circle-blur"]),"circle-opacity":new Kr(Ae.paint_circle["circle-opacity"]),"circle-translate":new Sr(Ae.paint_circle["circle-translate"]),"circle-translate-anchor":new Sr(Ae.paint_circle["circle-translate-anchor"]),"circle-pitch-scale":new Sr(Ae.paint_circle["circle-pitch-scale"]),"circle-pitch-alignment":new Sr(Ae.paint_circle["circle-pitch-alignment"]),"circle-stroke-width":new Kr(Ae.paint_circle["circle-stroke-width"]),"circle-stroke-color":new Kr(Ae.paint_circle["circle-stroke-color"]),"circle-stroke-opacity":new Kr(Ae.paint_circle["circle-stroke-opacity"])})},get layout(){return Mfe=Mfe||new ml({"circle-sort-key":new Kr(Ae.layout_circle["circle-sort-key"])})}};class vmt extends sc{constructor(l){super(l,gmt)}createBucket(l){return new qB(l)}queryRadius(l){let p=l;return SI("circle-radius",this,p)+SI("circle-stroke-width",this,p)+ON(this.paint.get("circle-translate"))}queryIntersectsFeature({queryGeometry:l,feature:p,featureState:g,geometry:b,transform:I,pixelsToTileUnits:M,unwrappedTileID:O,getElevation:L}){let F=PN(l,this.paint.get("circle-translate"),this.paint.get("circle-translate-anchor"),-I.bearingInRadians,M),U=this.paint.get("circle-radius").evaluate(p,g)+this.paint.get("circle-stroke-width").evaluate(p,g),W=this.paint.get("circle-pitch-alignment")==="map",X=W?F:function(ne,ae,he,Ie){return ne.map(Xe=>Afe(Xe,ae,he,Ie))}(F,I,O,L),re=W?U*M:U;for(let ne of b)for(let ae of ne){let he=W?ae:Afe(ae,I,O,L),Ie=re,Xe=I.projectTileCoordinates(ae.x,ae.y,O,L).signedDistanceFromCamera;if(this.paint.get("circle-pitch-scale")==="viewport"&&this.paint.get("circle-pitch-alignment")==="map"?Ie*=Xe/I.cameraToCenterDistance:this.paint.get("circle-pitch-scale")==="map"&&this.paint.get("circle-pitch-alignment")==="viewport"&&(Ie*=I.cameraToCenterDistance/Xe),fmt(X,he,Ie))return!0}return!1}}function Afe(f,l,p,g){let b=l.projectTileCoordinates(f.x,f.y,p,g).point;return new a((.5*b.x+.5)*l.width,(.5*-b.y+.5)*l.height)}class Ofe extends qB{}let Pfe;fr("HeatmapBucket",Ofe,{omit:["layers"]});var ymt={get paint(){return Pfe=Pfe||new ml({"heatmap-radius":new Kr(Ae.paint_heatmap["heatmap-radius"]),"heatmap-weight":new Kr(Ae.paint_heatmap["heatmap-weight"]),"heatmap-intensity":new Sr(Ae.paint_heatmap["heatmap-intensity"]),"heatmap-color":new Ux(Ae.paint_heatmap["heatmap-color"]),"heatmap-opacity":new Sr(Ae.paint_heatmap["heatmap-opacity"])})}};function UB(f,{width:l,height:p},g,b){if(b){if(b instanceof Uint8ClampedArray)b=new Uint8Array(b.buffer);else if(b.length!==l*p*g)throw new RangeError(`mismatched image size. expected: ${b.length} but got: ${l*p*g}`)}else b=new Uint8Array(l*p*g);return f.width=l,f.height=p,f.data=b,f}function Dfe(f,{width:l,height:p},g){if(l===f.width&&p===f.height)return;let b=UB({},{width:l,height:p},g);BB(f,b,{x:0,y:0},{x:0,y:0},{width:Math.min(f.width,l),height:Math.min(f.height,p)},g),f.width=l,f.height=p,f.data=b.data}function BB(f,l,p,g,b,I){if(b.width===0||b.height===0)return l;if(b.width>f.width||b.height>f.height||p.x>f.width-b.width||p.y>f.height-b.height)throw new RangeError("out of range source coordinates for image copy");if(b.width>l.width||b.height>l.height||g.x>l.width-b.width||g.y>l.height-b.height)throw new RangeError("out of range destination coordinates for image copy");let M=f.data,O=l.data;if(M===O)throw new Error("srcData equals dstData, so image is already copied");for(let L=0;L<b.height;L++){let F=((p.y+L)*f.width+p.x)*I,U=((g.y+L)*l.width+g.x)*I;for(let W=0;W<b.width*I;W++)O[U+W]=M[F+W]}return l}class TI{constructor(l,p){UB(this,l,1,p)}resize(l){Dfe(this,l,1)}clone(){return new TI({width:this.width,height:this.height},new Uint8Array(this.data))}static copy(l,p,g,b,I){BB(l,p,g,b,I,1)}}class Au{constructor(l,p){UB(this,l,4,p)}resize(l){Dfe(this,l,4)}replace(l,p){p?this.data.set(l):this.data=l instanceof Uint8ClampedArray?new Uint8Array(l.buffer):l}clone(){return new Au({width:this.width,height:this.height},new Uint8Array(this.data))}static copy(l,p,g,b,I){BB(l,p,g,b,I,4)}setPixel(l,p,g){let b=4*(l*this.width+p);this.data[b+0]=Math.round(255*g.r/g.a),this.data[b+1]=Math.round(255*g.g/g.a),this.data[b+2]=Math.round(255*g.b/g.a),this.data[b+3]=Math.round(255*g.a)}}function Nfe(f){let l={},p=f.resolution||256,g=f.clips?f.clips.length:1,b=f.image||new Au({width:p,height:g});if(Math.log(p)/Math.LN2%1!=0)throw new Error(`width is not a power of 2 - ${p}`);let I=(M,O,L)=>{l[f.evaluationKey]=L;let F=f.expression.evaluate(l);b.setPixel(M/4/p,O/4,F)};if(f.clips)for(let M=0,O=0;M<g;++M,O+=4*p)for(let L=0,F=0;L<p;L++,F+=4){let U=L/(p-1),{start:W,end:X}=f.clips[M];I(O,F,W*(1-U)+X*U)}else for(let M=0,O=0;M<p;M++,O+=4)I(0,O,M/(p-1));return b}fr("AlphaImage",TI),fr("RGBAImage",Au);let VB="big-fb";class _mt extends sc{createBucket(l){return new Ofe(l)}constructor(l){super(l,ymt),this.heatmapFbos=new Map,this._updateColorRamp()}_handleSpecialPaintPropertyUpdate(l){l==="heatmap-color"&&this._updateColorRamp()}_updateColorRamp(){this.colorRamp=Nfe({expression:this._transitionablePaint._values["heatmap-color"].value.expression,evaluationKey:"heatmapDensity",image:this.colorRamp}),this.colorRampTexture=null}resize(){this.heatmapFbos.has(VB)&&this.heatmapFbos.delete(VB)}queryRadius(){return 0}queryIntersectsFeature(){return!1}hasOffscreenPass(){return this.paint.get("heatmap-opacity")!==0&&this.visibility!=="none"}}let Lfe;var bmt={get paint(){return Lfe=Lfe||new ml({"hillshade-illumination-direction":new Sr(Ae.paint_hillshade["hillshade-illumination-direction"]),"hillshade-illumination-altitude":new Sr(Ae.paint_hillshade["hillshade-illumination-altitude"]),"hillshade-illumination-anchor":new Sr(Ae.paint_hillshade["hillshade-illumination-anchor"]),"hillshade-exaggeration":new Sr(Ae.paint_hillshade["hillshade-exaggeration"]),"hillshade-shadow-color":new Sr(Ae.paint_hillshade["hillshade-shadow-color"]),"hillshade-highlight-color":new Sr(Ae.paint_hillshade["hillshade-highlight-color"]),"hillshade-accent-color":new Sr(Ae.paint_hillshade["hillshade-accent-color"]),"hillshade-method":new Sr(Ae.paint_hillshade["hillshade-method"])})}};class xmt extends sc{constructor(l){super(l,bmt),this.recalculate({zoom:0,zoomHistory:{}},void 0)}getIlluminationProperties(){let l=this.paint.get("hillshade-illumination-direction").values,p=this.paint.get("hillshade-illumination-altitude").values,g=this.paint.get("hillshade-highlight-color").values,b=this.paint.get("hillshade-shadow-color").values,I=Math.max(l.length,p.length,g.length,b.length);l=l.concat(Array(I-l.length).fill(l.at(-1))),p=p.concat(Array(I-p.length).fill(p.at(-1))),g=g.concat(Array(I-g.length).fill(g.at(-1))),b=b.concat(Array(I-b.length).fill(b.at(-1)));let M=p.map(ke);return{directionRadians:l.map(ke),altitudeRadians:M,shadowColor:b,highlightColor:g}}hasOffscreenPass(){return this.paint.get("hillshade-exaggeration")!==0&&this.visibility!=="none"}}let kfe;var wmt={get paint(){return kfe=kfe||new ml({"color-relief-opacity":new Sr(Ae["paint_color-relief"]["color-relief-opacity"]),"color-relief-color":new Ux(Ae["paint_color-relief"]["color-relief-color"])})}};class GB{constructor(l,p,g,b){this.context=l,this.format=g,this.texture=l.gl.createTexture(),this.update(p,b)}update(l,p,g){let{width:b,height:I}=l,M=!(this.size&&this.size[0]===b&&this.size[1]===I||g),{context:O}=this,{gl:L}=O;if(this.useMipmap=!!(p&&p.useMipmap),L.bindTexture(L.TEXTURE_2D,this.texture),O.pixelStoreUnpackFlipY.set(!1),O.pixelStoreUnpack.set(1),O.pixelStoreUnpackPremultiplyAlpha.set(this.format===L.RGBA&&(!p||p.premultiply!==!1)),M)this.size=[b,I],l instanceof HTMLImageElement||l instanceof HTMLCanvasElement||l instanceof HTMLVideoElement||l instanceof ImageData||Ut(l)?L.texImage2D(L.TEXTURE_2D,0,this.format,this.format,L.UNSIGNED_BYTE,l):L.texImage2D(L.TEXTURE_2D,0,this.format,b,I,0,this.format,L.UNSIGNED_BYTE,l.data);else{let{x:F,y:U}=g||{x:0,y:0};l instanceof HTMLImageElement||l instanceof HTMLCanvasElement||l instanceof HTMLVideoElement||l instanceof ImageData||Ut(l)?L.texSubImage2D(L.TEXTURE_2D,0,F,U,L.RGBA,L.UNSIGNED_BYTE,l):L.texSubImage2D(L.TEXTURE_2D,0,F,U,b,I,L.RGBA,L.UNSIGNED_BYTE,l.data)}this.useMipmap&&this.isSizePowerOfTwo()&&L.generateMipmap(L.TEXTURE_2D),O.pixelStoreUnpackFlipY.setDefault(),O.pixelStoreUnpack.setDefault(),O.pixelStoreUnpackPremultiplyAlpha.setDefault()}bind(l,p,g){let{context:b}=this,{gl:I}=b;I.bindTexture(I.TEXTURE_2D,this.texture),g!==I.LINEAR_MIPMAP_NEAREST||this.isSizePowerOfTwo()||(g=I.LINEAR),l!==this.filter&&(I.texParameteri(I.TEXTURE_2D,I.TEXTURE_MAG_FILTER,l),I.texParameteri(I.TEXTURE_2D,I.TEXTURE_MIN_FILTER,g||l),this.filter=l),p!==this.wrap&&(I.texParameteri(I.TEXTURE_2D,I.TEXTURE_WRAP_S,p),I.texParameteri(I.TEXTURE_2D,I.TEXTURE_WRAP_T,p),this.wrap=p)}isSizePowerOfTwo(){return this.size[0]===this.size[1]&&Math.log(this.size[0])/Math.LN2%1==0}destroy(){let{gl:l}=this.context;l.deleteTexture(this.texture),this.texture=null}}class Rfe{constructor(l,p,g,b=1,I=1,M=1,O=0){if(this.uid=l,p.height!==p.width)throw new RangeError("DEM tiles must be square");if(g&&!["mapbox","terrarium","custom"].includes(g))return void At(`"${g}" is not a valid encoding type. Valid types include "mapbox", "terrarium" and "custom".`);this.stride=p.height;let L=this.dim=p.height-2;switch(this.data=new Uint32Array(p.data.buffer),g){case"terrarium":this.redFactor=256,this.greenFactor=1,this.blueFactor=1/256,this.baseShift=32768;break;case"custom":this.redFactor=b,this.greenFactor=I,this.blueFactor=M,this.baseShift=O;break;default:this.redFactor=6553.6,this.greenFactor=25.6,this.blueFactor=.1,this.baseShift=1e4}for(let F=0;F<L;F++)this.data[this._idx(-1,F)]=this.data[this._idx(0,F)],this.data[this._idx(L,F)]=this.data[this._idx(L-1,F)],this.data[this._idx(F,-1)]=this.data[this._idx(F,0)],this.data[this._idx(F,L)]=this.data[this._idx(F,L-1)];this.data[this._idx(-1,-1)]=this.data[this._idx(0,0)],this.data[this._idx(L,-1)]=this.data[this._idx(L-1,0)],this.data[this._idx(-1,L)]=this.data[this._idx(0,L-1)],this.data[this._idx(L,L)]=this.data[this._idx(L-1,L-1)],this.min=Number.MAX_SAFE_INTEGER,this.max=Number.MIN_SAFE_INTEGER;for(let F=0;F<L;F++)for(let U=0;U<L;U++){let W=this.get(F,U);W>this.max&&(this.max=W),W<this.min&&(this.min=W)}}get(l,p){let g=new Uint8Array(this.data.buffer),b=4*this._idx(l,p);return this.unpack(g[b],g[b+1],g[b+2])}getUnpackVector(){return[this.redFactor,this.greenFactor,this.blueFactor,this.baseShift]}_idx(l,p){if(l<-1||l>=this.dim+1||p<-1||p>=this.dim+1)throw new RangeError("out of range source coordinates for DEM data");return(p+1)*this.stride+(l+1)}unpack(l,p,g){return l*this.redFactor+p*this.greenFactor+g*this.blueFactor-this.baseShift}pack(l){return jfe(l,this.getUnpackVector())}getPixels(){return new Au({width:this.stride,height:this.stride},new Uint8Array(this.data.buffer))}backfillBorder(l,p,g){if(this.dim!==l.dim)throw new Error("dem dimension mismatch");let b=p*this.dim,I=p*this.dim+this.dim,M=g*this.dim,O=g*this.dim+this.dim;switch(p){case-1:b=I-1;break;case 1:I=b+1}switch(g){case-1:M=O-1;break;case 1:O=M+1}let L=-p*this.dim,F=-g*this.dim;for(let U=M;U<O;U++)for(let W=b;W<I;W++)this.data[this._idx(W,U)]=l.data[this._idx(W+L,U+F)]}}function jfe(f,l){let p=l[0],g=l[1],b=l[2],I=l[3],M=Math.min(p,g,b),O=Math.round((f+I)/M);return{r:Math.floor(O*M/p)%256,g:Math.floor(O*M/g)%256,b:Math.floor(O*M/b)%256}}fr("DEMData",Rfe);class Emt extends sc{constructor(l){super(l,wmt)}_createColorRamp(l){let p={elevationStops:[],colorStops:[]},g=this._transitionablePaint._values["color-relief-color"].value.expression;if(g instanceof O1&&g._styleExpression.expression instanceof Cs){this.colorRampExpression=g;let M=g._styleExpression.expression;p.elevationStops=M.labels,p.colorStops=[];for(let O of p.elevationStops)p.colorStops.push(M.evaluate({globals:{elevation:O}}))}if(p.elevationStops.length<1&&(p.elevationStops=[0],p.colorStops=[gn.transparent]),p.elevationStops.length<2&&(p.elevationStops.push(p.elevationStops[0]+1),p.colorStops.push(p.colorStops[0])),p.elevationStops.length<=l)return p;let b={elevationStops:[],colorStops:[]},I=(p.elevationStops.length-1)/(l-1);for(let M=0;M<p.elevationStops.length-.5;M+=I)b.elevationStops.push(p.elevationStops[Math.round(M)]),b.colorStops.push(p.colorStops[Math.round(M)]);return At(`Too many colors in specification of ${this.id} color-relief layer, may not render properly.`),b}_colorRampChanged(){return this.colorRampExpression!=this._transitionablePaint._values["color-relief-color"].value.expression}getColorRampTextures(l,p,g){if(this.colorRampTextures&&!this._colorRampChanged())return this.colorRampTextures;let b=this._createColorRamp(p),I=new Au({width:b.colorStops.length,height:1}),M=new Au({width:b.colorStops.length,height:1});for(let O=0;O<b.elevationStops.length;O++){let L=jfe(b.elevationStops[O],g);M.setPixel(0,O,new gn(L.r/255,L.g/255,L.b/255,1)),I.setPixel(0,O,b.colorStops[O])}return this.colorRampTextures={elevationTexture:new GB(l,M,l.gl.RGBA),colorTexture:new GB(l,I,l.gl.RGBA)},this.colorRampTextures}hasOffscreenPass(){return this.visibility!=="none"&&!!this.colorRampTextures}}let Smt=ca([{name:"a_pos",components:2,type:"Int16"}],4),{members:Tmt}=Smt;function HB(f,l,p){let g=p.patternDependencies,b=!1;for(let I of l){let M=I.paint.get(`${f}-pattern`);M.isConstant()||(b=!0);let O=M.constantOr(null);O&&(b=!0,g[O.to]=!0,g[O.from]=!0)}return b}function WB(f,l,p,g,b){let{zoom:I,globalState:M}=g,O=b.patternDependencies;for(let L of l){let F=L.paint.get(`${f}-pattern`).value;if(F.kind!=="constant"){let U=F.evaluate({zoom:I-1,globalState:M},p,{},b.availableImages),W=F.evaluate({zoom:I,globalState:M},p,{},b.availableImages),X=F.evaluate({zoom:I+1,globalState:M},p,{},b.availableImages);U=U&&U.name?U.name:U,W=W&&W.name?W.name:W,X=X&&X.name?X.name:X,O[U]=!0,O[W]=!0,O[X]=!0,p.patterns[L.id]={min:U,mid:W,max:X}}}return p}function qfe(f,l,p,g,b){let I;if(b===function(M,O,L,F){let U=0;for(let W=O,X=L-F;W<L;W+=F)U+=(M[X]-M[W])*(M[W+1]+M[X+1]),X=W;return U}(f,l,p,g)>0)for(let M=l;M<p;M+=g)I=Bfe(M/g|0,f[M],f[M+1],I);else for(let M=p-g;M>=l;M-=g)I=Bfe(M/g|0,f[M],f[M+1],I);return I&&Yx(I,I.next)&&(AI(I),I=I.next),I}function U1(f,l){if(!f)return f;l||(l=f);let p,g=f;do if(p=!1,g.steiner||!Yx(g,g.next)&&_a(g.prev,g,g.next)!==0)g=g.next;else{if(AI(g),g=l=g.prev,g===g.next)break;p=!0}while(p||g!==l);return l}function II(f,l,p,g,b,I,M){if(!f)return;!M&&I&&function(L,F,U,W){let X=L;do X.z===0&&(X.z=$B(X.x,X.y,F,U,W)),X.prevZ=X.prev,X.nextZ=X.next,X=X.next;while(X!==L);X.prevZ.nextZ=null,X.prevZ=null,function(re){let ne,ae=1;do{let he,Ie=re;re=null;let Xe=null;for(ne=0;Ie;){ne++;let je=Ie,Ve=0;for(let yt=0;yt<ae&&(Ve++,je=je.nextZ,je);yt++);let st=ae;for(;Ve>0||st>0&&je;)Ve!==0&&(st===0||!je||Ie.z<=je.z)?(he=Ie,Ie=Ie.nextZ,Ve--):(he=je,je=je.nextZ,st--),Xe?Xe.nextZ=he:re=he,he.prevZ=Xe,Xe=he;Ie=je}Xe.nextZ=null,ae*=2}while(ne>1)}(X)}(f,g,b,I);let O=f;for(;f.prev!==f.next;){let L=f.prev,F=f.next;if(I?Mmt(f,g,b,I):Imt(f))l.push(L.i,f.i,F.i),AI(f),f=F.next,O=F.next;else if((f=F)===O){M?M===1?II(f=Cmt(U1(f),l),l,p,g,b,I,2):M===2&&Amt(f,l,p,g,b,I):II(U1(f),l,p,g,b,I,1);break}}}function Imt(f){let l=f.prev,p=f,g=f.next;if(_a(l,p,g)>=0)return!1;let b=l.x,I=p.x,M=g.x,O=l.y,L=p.y,F=g.y,U=Math.min(b,I,M),W=Math.min(O,L,F),X=Math.max(b,I,M),re=Math.max(O,L,F),ne=g.next;for(;ne!==l;){if(ne.x>=U&&ne.x<=X&&ne.y>=W&&ne.y<=re&&MI(b,O,I,L,M,F,ne.x,ne.y)&&_a(ne.prev,ne,ne.next)>=0)return!1;ne=ne.next}return!0}function Mmt(f,l,p,g){let b=f.prev,I=f,M=f.next;if(_a(b,I,M)>=0)return!1;let O=b.x,L=I.x,F=M.x,U=b.y,W=I.y,X=M.y,re=Math.min(O,L,F),ne=Math.min(U,W,X),ae=Math.max(O,L,F),he=Math.max(U,W,X),Ie=$B(re,ne,l,p,g),Xe=$B(ae,he,l,p,g),je=f.prevZ,Ve=f.nextZ;for(;je&&je.z>=Ie&&Ve&&Ve.z<=Xe;){if(je.x>=re&&je.x<=ae&&je.y>=ne&&je.y<=he&&je!==b&&je!==M&&MI(O,U,L,W,F,X,je.x,je.y)&&_a(je.prev,je,je.next)>=0||(je=je.prevZ,Ve.x>=re&&Ve.x<=ae&&Ve.y>=ne&&Ve.y<=he&&Ve!==b&&Ve!==M&&MI(O,U,L,W,F,X,Ve.x,Ve.y)&&_a(Ve.prev,Ve,Ve.next)>=0))return!1;Ve=Ve.nextZ}for(;je&&je.z>=Ie;){if(je.x>=re&&je.x<=ae&&je.y>=ne&&je.y<=he&&je!==b&&je!==M&&MI(O,U,L,W,F,X,je.x,je.y)&&_a(je.prev,je,je.next)>=0)return!1;je=je.prevZ}for(;Ve&&Ve.z<=Xe;){if(Ve.x>=re&&Ve.x<=ae&&Ve.y>=ne&&Ve.y<=he&&Ve!==b&&Ve!==M&&MI(O,U,L,W,F,X,Ve.x,Ve.y)&&_a(Ve.prev,Ve,Ve.next)>=0)return!1;Ve=Ve.nextZ}return!0}function Cmt(f,l){let p=f;do{let g=p.prev,b=p.next.next;!Yx(g,b)&&Ffe(g,p,p.next,b)&&CI(g,b)&&CI(b,g)&&(l.push(g.i,p.i,b.i),AI(p),AI(p.next),p=f=b),p=p.next}while(p!==f);return U1(p)}function Amt(f,l,p,g,b,I){let M=f;do{let O=M.next.next;for(;O!==M.prev;){if(M.i!==O.i&&Lmt(M,O)){let L=Ufe(M,O);return M=U1(M,M.next),L=U1(L,L.next),II(M,l,p,g,b,I,0),void II(L,l,p,g,b,I,0)}O=O.next}M=M.next}while(M!==f)}function Omt(f,l){let p=f.x-l.x;return p===0&&(p=f.y-l.y,p===0)&&(p=(f.next.y-f.y)/(f.next.x-f.x)-(l.next.y-l.y)/(l.next.x-l.x)),p}function Pmt(f,l){let p=function(b,I){let M=I,O=b.x,L=b.y,F,U=-1/0;if(Yx(b,M))return M;do{if(Yx(b,M.next))return M.next;if(L<=M.y&&L>=M.next.y&&M.next.y!==M.y){let ae=M.x+(L-M.y)*(M.next.x-M.x)/(M.next.y-M.y);if(ae<=O&&ae>U&&(U=ae,F=M.x<M.next.x?M:M.next,ae===O))return F}M=M.next}while(M!==I);if(!F)return null;let W=F,X=F.x,re=F.y,ne=1/0;M=F;do{if(O>=M.x&&M.x>=X&&O!==M.x&&zfe(L<re?O:U,L,X,re,L<re?U:O,L,M.x,M.y)){let ae=Math.abs(L-M.y)/(O-M.x);CI(M,b)&&(ae<ne||ae===ne&&(M.x>F.x||M.x===F.x&&Dmt(F,M)))&&(F=M,ne=ae)}M=M.next}while(M!==W);return F}(f,l);if(!p)return l;let g=Ufe(p,f);return U1(g,g.next),U1(p,p.next)}function Dmt(f,l){return _a(f.prev,f,l.prev)<0&&_a(l.next,f,f.next)<0}function $B(f,l,p,g,b){return(f=1431655765&((f=858993459&((f=252645135&((f=16711935&((f=(f-p)*b|0)|f<<8))|f<<4))|f<<2))|f<<1))|(l=1431655765&((l=858993459&((l=252645135&((l=16711935&((l=(l-g)*b|0)|l<<8))|l<<4))|l<<2))|l<<1))<<1}function Nmt(f){let l=f,p=f;do(l.x<p.x||l.x===p.x&&l.y<p.y)&&(p=l),l=l.next;while(l!==f);return p}function zfe(f,l,p,g,b,I,M,O){return(b-M)*(l-O)>=(f-M)*(I-O)&&(f-M)*(g-O)>=(p-M)*(l-O)&&(p-M)*(I-O)>=(b-M)*(g-O)}function MI(f,l,p,g,b,I,M,O){return!(f===M&&l===O)&&zfe(f,l,p,g,b,I,M,O)}function Lmt(f,l){return f.next.i!==l.i&&f.prev.i!==l.i&&!function(p,g){let b=p;do{if(b.i!==p.i&&b.next.i!==p.i&&b.i!==g.i&&b.next.i!==g.i&&Ffe(b,b.next,p,g))return!0;b=b.next}while(b!==p);return!1}(f,l)&&(CI(f,l)&&CI(l,f)&&function(p,g){let b=p,I=!1,M=(p.x+g.x)/2,O=(p.y+g.y)/2;do b.y>O!=b.next.y>O&&b.next.y!==b.y&&M<(b.next.x-b.x)*(O-b.y)/(b.next.y-b.y)+b.x&&(I=!I),b=b.next;while(b!==p);return I}(f,l)&&(_a(f.prev,f,l.prev)||_a(f,l.prev,l))||Yx(f,l)&&_a(f.prev,f,f.next)>0&&_a(l.prev,l,l.next)>0)}function _a(f,l,p){return(l.y-f.y)*(p.x-l.x)-(l.x-f.x)*(p.y-l.y)}function Yx(f,l){return f.x===l.x&&f.y===l.y}function Ffe(f,l,p,g){let b=NN(_a(f,l,p)),I=NN(_a(f,l,g)),M=NN(_a(p,g,f)),O=NN(_a(p,g,l));return b!==I&&M!==O||!(b!==0||!DN(f,p,l))||!(I!==0||!DN(f,g,l))||!(M!==0||!DN(p,f,g))||!(O!==0||!DN(p,l,g))}function DN(f,l,p){return l.x<=Math.max(f.x,p.x)&&l.x>=Math.min(f.x,p.x)&&l.y<=Math.max(f.y,p.y)&&l.y>=Math.min(f.y,p.y)}function NN(f){return f>0?1:f<0?-1:0}function CI(f,l){return _a(f.prev,f,f.next)<0?_a(f,l,f.next)>=0&&_a(f,f.prev,l)>=0:_a(f,l,f.prev)<0||_a(f,f.next,l)<0}function Ufe(f,l){let p=YB(f.i,f.x,f.y),g=YB(l.i,l.x,l.y),b=f.next,I=l.prev;return f.next=l,l.prev=f,p.next=b,b.prev=p,g.next=p,p.prev=g,I.next=g,g.prev=I,g}function Bfe(f,l,p,g){let b=YB(f,l,p);return g?(b.next=g.next,b.prev=g,g.next.prev=b,g.next=b):(b.prev=b,b.next=b),b}function AI(f){f.next.prev=f.prev,f.prev.next=f.next,f.prevZ&&(f.prevZ.nextZ=f.nextZ),f.nextZ&&(f.nextZ.prevZ=f.prevZ)}function YB(f,l,p){return{i:f,x:l,y:p,prev:null,next:null,z:0,prevZ:null,nextZ:null,steiner:!1}}class Zx{constructor(l,p){if(p>l)throw new Error("Min granularity must not be greater than base granularity.");this._baseZoomGranularity=l,this._minGranularity=p}getGranularityForZoomLevel(l){return Math.max(Math.floor(this._baseZoomGranularity/(1<<l)),this._minGranularity,1)}}class LN{constructor(l){this.fill=l.fill,this.line=l.line,this.tile=l.tile,this.stencil=l.stencil,this.circle=l.circle}}LN.noSubdivision=new LN({fill:new Zx(0,0),line:new Zx(0,0),tile:new Zx(0,0),stencil:new Zx(0,0),circle:1}),fr("SubdivisionGranularityExpression",Zx),fr("SubdivisionGranularitySetting",LN);let Kx=-32768,OI=32767;class kmt{constructor(l,p){this._vertexBuffer=[],this._vertexDictionary=new Map,this._used=!1,this._granularity=l,this._granularityCellSize=ct/l,this._canonical=p}_getKey(l,p){return(l+=32768)<<16|p+32768}_vertexToIndex(l,p){if(l<-32768||p<-32768||l>32767||p>32767)throw new Error("Vertex coordinates are out of signed 16 bit integer range.");let g=0|Math.round(l),b=0|Math.round(p),I=this._getKey(g,b);if(this._vertexDictionary.has(I))return this._vertexDictionary.get(I);let M=this._vertexBuffer.length/2;return this._vertexDictionary.set(I,M),this._vertexBuffer.push(g,b),M}_subdivideTrianglesScanline(l){if(this._granularity<2)return function(b,I){let M=[];for(let O=0;O<I.length;O+=3){let L=I[O],F=I[O+1],U=I[O+2],W=b[2*L],X=b[2*L+1];(b[2*F]-W)*(b[2*U+1]-X)-(b[2*F+1]-X)*(b[2*U]-W)>0?(M.push(L),M.push(U),M.push(F)):(M.push(L),M.push(F),M.push(U))}return M}(this._vertexBuffer,l);let p=[],g=l.length;for(let b=0;b<g;b+=3){let I=[l[b+0],l[b+1],l[b+2]],M=[this._vertexBuffer[2*l[b+0]+0],this._vertexBuffer[2*l[b+0]+1],this._vertexBuffer[2*l[b+1]+0],this._vertexBuffer[2*l[b+1]+1],this._vertexBuffer[2*l[b+2]+0],this._vertexBuffer[2*l[b+2]+1]],O=1/0,L=1/0,F=-1/0,U=-1/0;for(let ae=0;ae<3;ae++){let he=M[2*ae],Ie=M[2*ae+1];O=Math.min(O,he),F=Math.max(F,he),L=Math.min(L,Ie),U=Math.max(U,Ie)}if(O===F||L===U)continue;let W=Math.floor(O/this._granularityCellSize),X=Math.ceil(F/this._granularityCellSize),re=Math.floor(L/this._granularityCellSize),ne=Math.ceil(U/this._granularityCellSize);if(W!==X||re!==ne)for(let ae=re;ae<ne;ae++){let he=this._scanlineGenerateVertexRingForCellRow(ae,M,I);Rmt(this._vertexBuffer,he,p)}else p.push(...I)}return p}_scanlineGenerateVertexRingForCellRow(l,p,g){let b=l*this._granularityCellSize,I=b+this._granularityCellSize,M=[];for(let O=0;O<3;O++){let L=p[2*O],F=p[2*O+1],U=p[2*(O+1)%6],W=p[(2*(O+1)+1)%6],X=p[2*(O+2)%6],re=p[(2*(O+2)+1)%6],ne=U-L,ae=W-F,he=ne===0,Ie=ae===0,Xe=(b-F)/ae,je=(I-F)/ae,Ve=Math.min(Xe,je),st=Math.max(Xe,je);if(!Ie&&(Ve>=1||st<=0)||Ie&&(F<b||F>I)){W>=b&&W<=I&&M.push(g[(O+1)%3]);continue}!Ie&&Ve>0&&M.push(this._vertexToIndex(L+ne*Ve,F+ae*Ve));let yt=L+ne*Math.max(Ve,0),kt=L+ne*Math.min(st,1);he||this._generateIntraEdgeVertices(M,L,F,U,W,yt,kt),!Ie&&st<1&&M.push(this._vertexToIndex(L+ne*st,F+ae*st)),(Ie||W>=b&&W<=I)&&M.push(g[(O+1)%3]),!Ie&&(W<=b||W>=I)&&this._generateInterEdgeVertices(M,L,F,U,W,X,re,kt,b,I)}return M}_generateIntraEdgeVertices(l,p,g,b,I,M,O){let L=b-p,F=I-g,U=F===0,W=U?Math.min(p,b):Math.min(M,O),X=U?Math.max(p,b):Math.max(M,O),re=Math.floor(W/this._granularityCellSize)+1,ne=Math.ceil(X/this._granularityCellSize)-1;if(U?p<b:M<O)for(let ae=re;ae<=ne;ae++){let he=ae*this._granularityCellSize;l.push(this._vertexToIndex(he,g+F*(he-p)/L))}else for(let ae=ne;ae>=re;ae--){let he=ae*this._granularityCellSize;l.push(this._vertexToIndex(he,g+F*(he-p)/L))}}_generateInterEdgeVertices(l,p,g,b,I,M,O,L,F,U){let W=I-g,X=M-b,re=O-I,ne=(F-I)/re,ae=(U-I)/re,he=Math.min(ne,ae),Ie=Math.max(ne,ae),Xe=b+X*he,je=Math.floor(Math.min(Xe,L)/this._granularityCellSize)+1,Ve=Math.ceil(Math.max(Xe,L)/this._granularityCellSize)-1,st=L<Xe,yt=re===0;if(yt&&(O===F||O===U))return;if(yt||he>=1||Ie<=0){let tr=g-O,Ht=M+(p-M)*Math.min((F-O)/tr,(U-O)/tr);je=Math.floor(Math.min(Ht,L)/this._granularityCellSize)+1,Ve=Math.ceil(Math.max(Ht,L)/this._granularityCellSize)-1,st=L<Ht}let kt=W>0?U:F;if(st)for(let tr=je;tr<=Ve;tr++)l.push(this._vertexToIndex(tr*this._granularityCellSize,kt));else for(let tr=Ve;tr>=je;tr--)l.push(this._vertexToIndex(tr*this._granularityCellSize,kt))}_generateOutline(l){let p=[];for(let g of l){let b=B1(g,this._granularity,!0),I=this._pointArrayToIndices(b),M=[];for(let O=1;O<I.length;O++)M.push(I[O-1]),M.push(I[O]);p.push(M)}return p}_handlePoles(l){let p=!1,g=!1;this._canonical&&(this._canonical.y===0&&(p=!0),this._canonical.y===(1<<this._canonical.z)-1&&(g=!0)),(p||g)&&this._fillPoles(l,p,g)}_ensureNoPoleVertices(){let l=this._vertexBuffer;for(let p=0;p<l.length;p+=2){let g=l[p+1];g===Kx&&(l[p+1]=-32767),g===OI&&(l[p+1]=32766)}}_generatePoleQuad(l,p,g,b,I,M){b>I!=(M===Kx)?(l.push(p),l.push(g),l.push(this._vertexToIndex(b,M)),l.push(g),l.push(this._vertexToIndex(I,M)),l.push(this._vertexToIndex(b,M))):(l.push(g),l.push(p),l.push(this._vertexToIndex(b,M)),l.push(this._vertexToIndex(I,M)),l.push(g),l.push(this._vertexToIndex(b,M)))}_fillPoles(l,p,g){let b=this._vertexBuffer,I=ct,M=l.length;for(let O=2;O<M;O+=3){let L=l[O-2],F=l[O-1],U=l[O],W=b[2*L],X=b[2*L+1],re=b[2*F],ne=b[2*F+1],ae=b[2*U],he=b[2*U+1];p&&(X===0&&ne===0&&this._generatePoleQuad(l,L,F,W,re,Kx),ne===0&&he===0&&this._generatePoleQuad(l,F,U,re,ae,Kx),he===0&&X===0&&this._generatePoleQuad(l,U,L,ae,W,Kx)),g&&(X===I&&ne===I&&this._generatePoleQuad(l,L,F,W,re,OI),ne===I&&he===I&&this._generatePoleQuad(l,F,U,re,ae,OI),he===I&&X===I&&this._generatePoleQuad(l,U,L,ae,W,OI))}}_initializeVertices(l){for(let p=0;p<l.length;p+=2)this._vertexToIndex(l[p],l[p+1])}subdividePolygonInternal(l,p){if(this._used)throw new Error("Subdivision: multiple use not allowed.");this._used=!0;let{flattened:g,holeIndices:b}=function(O){let L=[],F=[];for(let U of O)if(U.length!==0){U!==O[0]&&L.push(F.length/2);for(let W=0;W<U.length;W++)F.push(U[W].x),F.push(U[W].y)}return{flattened:F,holeIndices:L}}(l),I;this._initializeVertices(g);try{let O=function(F,U,W=2){let X=U&&U.length,re=X?U[0]*W:F.length,ne=qfe(F,0,re,W,!0),ae=[];if(!ne||ne.next===ne.prev)return ae;let he,Ie,Xe;if(X&&(ne=function(je,Ve,st,yt){let kt=[];for(let tr=0,Ht=Ve.length;tr<Ht;tr++){let Xt=qfe(je,Ve[tr]*yt,tr<Ht-1?Ve[tr+1]*yt:je.length,yt,!1);Xt===Xt.next&&(Xt.steiner=!0),kt.push(Nmt(Xt))}kt.sort(Omt);for(let tr=0;tr<kt.length;tr++)st=Pmt(kt[tr],st);return st}(F,U,ne,W)),F.length>80*W){he=F[0],Ie=F[1];let je=he,Ve=Ie;for(let st=W;st<re;st+=W){let yt=F[st],kt=F[st+1];yt<he&&(he=yt),kt<Ie&&(Ie=kt),yt>je&&(je=yt),kt>Ve&&(Ve=kt)}Xe=Math.max(je-he,Ve-Ie),Xe=Xe!==0?32767/Xe:0}return II(ne,ae,W,he,Ie,Xe,0),ae}(g,b),L=this._convertIndices(g,O);I=this._subdivideTrianglesScanline(L)}catch(O){console.error(O)}let M=[];return p&&(M=this._generateOutline(l)),this._ensureNoPoleVertices(),this._handlePoles(I),{verticesFlattened:this._vertexBuffer,indicesTriangles:I,indicesLineList:M}}_convertIndices(l,p){let g=[];for(let b=0;b<p.length;b++)g.push(this._vertexToIndex(l[2*p[b]],l[2*p[b]+1]));return g}_pointArrayToIndices(l){let p=[];for(let g=0;g<l.length;g++){let b=l[g];p.push(this._vertexToIndex(b.x,b.y))}return p}}function Vfe(f,l,p,g=!0){return new kmt(p,l).subdividePolygonInternal(f,g)}function B1(f,l,p=!1){if(!f||f.length<1)return[];if(f.length<2)return[];let g=f[0],b=f[f.length-1],I=p&&(g.x!==b.x||g.y!==b.y);if(l<2)return I?[...f,f[0]]:[...f];let M=Math.floor(ct/l),O=[];O.push(new a(f[0].x,f[0].y));let L=f.length,F=I?L:L-1;for(let U=0;U<F;U++){let W=f[U],X=U<L-1?f[U+1]:f[0],re=W.x,ne=W.y,ae=X.x,he=X.y,Ie=re!==ae,Xe=ne!==he;if(!Ie&&!Xe)continue;let je=ae-re,Ve=he-ne,st=Math.abs(je),yt=Math.abs(Ve),kt=re,tr=ne;for(;;){let Xt=je>0?(Math.floor(kt/M)+1)*M:(Math.ceil(kt/M)-1)*M,Or=Ve>0?(Math.floor(tr/M)+1)*M:(Math.ceil(tr/M)-1)*M,Kt=Math.abs(kt-Xt),Jt=Math.abs(tr-Or),Ct=Math.abs(kt-ae),Jr=Math.abs(tr-he),un=Ie?Kt/st:Number.POSITIVE_INFINITY,Vr=Xe?Jt/yt:Number.POSITIVE_INFINITY;if((Ct<=Kt||!Ie)&&(Jr<=Jt||!Xe))break;if(un<Vr&&Ie||!Xe){kt=Xt,tr+=Ve*un;let wr=new a(kt,Math.round(tr));O[O.length-1].x===wr.x&&O[O.length-1].y===wr.y||O.push(wr)}else{kt+=je*Vr,tr=Or;let wr=new a(Math.round(kt),tr);O[O.length-1].x===wr.x&&O[O.length-1].y===wr.y||O.push(wr)}}let Ht=new a(ae,he);O[O.length-1].x===Ht.x&&O[O.length-1].y===Ht.y||O.push(Ht)}return O}function Rmt(f,l,p){if(l.length===0)throw new Error("Subdivision vertex ring is empty.");let g=0,b=f[2*l[0]];for(let L=1;L<l.length;L++){let F=f[2*l[L]];F<b&&(b=F,g=L)}let I=l.length,M=g,O=(M+1)%I;for(;;){let L=M-1>=0?M-1:I-1,F=(O+1)%I,U=f[2*l[L]],W=f[2*l[F]],X=f[2*l[M]],re=f[2*l[M]+1],ne=f[2*l[O]+1],ae=!1;if(U<W)ae=!0;else if(U>W)ae=!1;else{let he=ne-re,Ie=-(f[2*l[O]]-X),Xe=re<ne?1:-1;((U-X)*he+(f[2*l[L]+1]-re)*Ie)*Xe>((W-X)*he+(f[2*l[F]+1]-re)*Ie)*Xe&&(ae=!0)}if(ae){let he=l[L],Ie=l[M],Xe=l[O];he!==Ie&&he!==Xe&&Ie!==Xe&&p.push(Xe,Ie,he),M--,M<0&&(M=I-1)}else{let he=l[F],Ie=l[M],Xe=l[O];he!==Ie&&he!==Xe&&Ie!==Xe&&p.push(Xe,Ie,he),O++,O>=I&&(O=0)}if(L===F)break}}function Gfe(f,l,p,g,b,I,M,O,L){let F=b.length/2,U=M&&O&&L;if(F<Mn.MAX_VERTEX_ARRAY_LENGTH){let W=l.prepareSegment(F,p,g),X=W.vertexLength;for(let ae=0;ae<I.length;ae+=3)g.emplaceBack(X+I[ae],X+I[ae+1],X+I[ae+2]);let re,ne;W.vertexLength+=F,W.primitiveLength+=I.length/3,U&&(ne=M.prepareSegment(F,p,O),re=ne.vertexLength,ne.vertexLength+=F);for(let ae=0;ae<b.length;ae+=2)f(b[ae],b[ae+1]);if(U)for(let ae=0;ae<L.length;ae++){let he=L[ae];for(let Ie=1;Ie<he.length;Ie+=2)O.emplaceBack(re+he[Ie-1],re+he[Ie]);ne.primitiveLength+=he.length/2}}else(function(W,X,re,ne,ae,he){let Ie=[];for(let yt=0;yt<ne.length/2;yt++)Ie.push(-1);let Xe={count:0},je=0,Ve=W.getOrCreateLatestSegment(X,re),st=Ve.vertexLength;for(let yt=2;yt<ae.length;yt+=3){let kt=ae[yt-2],tr=ae[yt-1],Ht=ae[yt],Xt=Ie[kt]<je,Or=Ie[tr]<je,Kt=Ie[Ht]<je;Ve.vertexLength+((Xt?1:0)+(Or?1:0)+(Kt?1:0))>Mn.MAX_VERTEX_ARRAY_LENGTH&&(Ve=W.createNewSegment(X,re),je=Xe.count,Xt=!0,Or=!0,Kt=!0,st=0);let Jt=PI(Ie,ne,he,Xe,kt,Xt,Ve),Ct=PI(Ie,ne,he,Xe,tr,Or,Ve),Jr=PI(Ie,ne,he,Xe,Ht,Kt,Ve);re.emplaceBack(st+Jt-je,st+Ct-je,st+Jr-je),Ve.primitiveLength++}})(l,p,g,b,I,f),U&&function(W,X,re,ne,ae,he){let Ie=[];for(let yt=0;yt<ne.length/2;yt++)Ie.push(-1);let Xe={count:0},je=0,Ve=W.getOrCreateLatestSegment(X,re),st=Ve.vertexLength;for(let yt=0;yt<ae.length;yt++){let kt=ae[yt];for(let tr=1;tr<ae[yt].length;tr+=2){let Ht=kt[tr-1],Xt=kt[tr],Or=Ie[Ht]<je,Kt=Ie[Xt]<je;Ve.vertexLength+((Or?1:0)+(Kt?1:0))>Mn.MAX_VERTEX_ARRAY_LENGTH&&(Ve=W.createNewSegment(X,re),je=Xe.count,Or=!0,Kt=!0,st=0);let Jt=PI(Ie,ne,he,Xe,Ht,Or,Ve),Ct=PI(Ie,ne,he,Xe,Xt,Kt,Ve);re.emplaceBack(st+Jt-je,st+Ct-je),Ve.primitiveLength++}}}(M,p,O,b,L,f),l.forceNewSegmentOnNextPrepare(),M==null||M.forceNewSegmentOnNextPrepare()}function PI(f,l,p,g,b,I,M){if(I){let O=g.count;return p(l[2*b],l[2*b+1]),f[b]=g.count,g.count++,M.vertexLength++,O}return f[b]}class ZB{constructor(l){this.zoom=l.zoom,this.globalState=l.globalState,this.overscaling=l.overscaling,this.layers=l.layers,this.layerIds=this.layers.map(p=>p.id),this.index=l.index,this.hasPattern=!1,this.patternFeatures=[],this.layoutVertexArray=new ht,this.indexArray=new Jo,this.indexArray2=new Go,this.programConfigurations=new Cu(l.layers,l.zoom),this.segments=new Mn,this.segments2=new Mn,this.stateDependentLayerIds=this.layers.filter(p=>p.isStateDependent()).map(p=>p.id)}populate(l,p,g){this.hasPattern=HB("fill",this.layers,p);let b=this.layers[0].layout.get("fill-sort-key"),I=!b.isConstant(),M=[];for(let{feature:O,id:L,index:F,sourceLayerIndex:U}of l){let W=this.layers[0]._featureFilter.needGeometry,X=od(O,W);if(!this.layers[0]._featureFilter.filter(new ni(this.zoom,{globalState:this.globalState}),X,g))continue;let re=I?b.evaluate(X,{},g,p.availableImages):void 0,ne={id:L,properties:O.properties,type:O.type,sourceLayerIndex:U,index:F,geometry:W?X.geometry:xh(O),patterns:{},sortKey:re};M.push(ne)}I&&M.sort((O,L)=>O.sortKey-L.sortKey);for(let O of M){let{geometry:L,index:F,sourceLayerIndex:U}=O;if(this.hasPattern){let W=WB("fill",this.layers,O,{zoom:this.zoom,globalState:this.globalState},p);this.patternFeatures.push(W)}else this.addFeature(O,L,F,g,{},p.subdivisionGranularity);p.featureIndex.insert(l[F].feature,L,F,U,this.index)}}update(l,p,g){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(l,p,this.stateDependentLayers,{imagePositions:g,globalState:this.globalState})}addFeatures(l,p,g){for(let b of this.patternFeatures)this.addFeature(b,b.geometry,b.index,p,g,l.subdivisionGranularity)}isEmpty(){return this.layoutVertexArray.length===0}uploadPending(){return!this.uploaded||this.programConfigurations.needsUpload}upload(l){this.uploaded||(this.layoutVertexBuffer=l.createVertexBuffer(this.layoutVertexArray,Tmt),this.indexBuffer=l.createIndexBuffer(this.indexArray),this.indexBuffer2=l.createIndexBuffer(this.indexArray2)),this.programConfigurations.upload(l),this.uploaded=!0}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.indexBuffer2.destroy(),this.programConfigurations.destroy(),this.segments.destroy(),this.segments2.destroy())}addFeature(l,p,g,b,I,M){for(let O of T1(p,500)){let L=Vfe(O,b,M.fill.getGranularityForZoomLevel(b.z)),F=this.layoutVertexArray;Gfe((U,W)=>{F.emplaceBack(U,W)},this.segments,this.layoutVertexArray,this.indexArray,L.verticesFlattened,L.indicesTriangles,this.segments2,this.indexArray2,L.indicesLineList)}this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,l,g,{imagePositions:I,canonical:b,globalState:this.globalState})}}let Hfe,Wfe;fr("FillBucket",ZB,{omit:["layers","patternFeatures"]});var jmt={get paint(){return Wfe=Wfe||new ml({"fill-antialias":new Sr(Ae.paint_fill["fill-antialias"]),"fill-opacity":new Kr(Ae.paint_fill["fill-opacity"]),"fill-color":new Kr(Ae.paint_fill["fill-color"]),"fill-outline-color":new Kr(Ae.paint_fill["fill-outline-color"]),"fill-translate":new Sr(Ae.paint_fill["fill-translate"]),"fill-translate-anchor":new Sr(Ae.paint_fill["fill-translate-anchor"]),"fill-pattern":new Fx(Ae.paint_fill["fill-pattern"])})},get layout(){return Hfe=Hfe||new ml({"fill-sort-key":new Kr(Ae.layout_fill["fill-sort-key"])})}};class qmt extends sc{constructor(l){super(l,jmt)}recalculate(l,p){super.recalculate(l,p);let g=this.paint._values["fill-outline-color"];g.value.kind==="constant"&&g.value.value===void 0&&(this.paint._values["fill-outline-color"]=this.paint._values["fill-color"])}createBucket(l){return new ZB(l)}queryRadius(){return ON(this.paint.get("fill-translate"))}queryIntersectsFeature({queryGeometry:l,geometry:p,transform:g,pixelsToTileUnits:b}){return Sfe(PN(l,this.paint.get("fill-translate"),this.paint.get("fill-translate-anchor"),-g.bearingInRadians,b),p)}isTileClipped(){return!0}}let zmt=ca([{name:"a_pos",components:2,type:"Int16"},{name:"a_normal_ed",components:4,type:"Int16"}],4),Fmt=ca([{name:"a_centroid",components:2,type:"Int16"}],4),{members:Umt}=zmt;class Xx{constructor(l,p,g,b,I){this.properties={},this.extent=g,this.type=0,this.id=void 0,this._pbf=l,this._geometry=-1,this._keys=b,this._values=I,l.readFields(Bmt,this,p)}loadGeometry(){let l=this._pbf;l.pos=this._geometry;let p=l.readVarint()+l.pos,g=[],b,I=1,M=0,O=0,L=0;for(;l.pos<p;){if(M<=0){let F=l.readVarint();I=7&F,M=F>>3}if(M--,I===1||I===2)O+=l.readSVarint(),L+=l.readSVarint(),I===1&&(b&&g.push(b),b=[]),b&&b.push(new a(O,L));else{if(I!==7)throw new Error(`unknown command ${I}`);b&&b.push(b[0].clone())}}return b&&g.push(b),g}bbox(){let l=this._pbf;l.pos=this._geometry;let p=l.readVarint()+l.pos,g=1,b=0,I=0,M=0,O=1/0,L=-1/0,F=1/0,U=-1/0;for(;l.pos<p;){if(b<=0){let W=l.readVarint();g=7&W,b=W>>3}if(b--,g===1||g===2)I+=l.readSVarint(),M+=l.readSVarint(),I<O&&(O=I),I>L&&(L=I),M<F&&(F=M),M>U&&(U=M);else if(g!==7)throw new Error(`unknown command ${g}`)}return[O,F,L,U]}toGeoJSON(l,p,g){let b=this.extent*Math.pow(2,g),I=this.extent*l,M=this.extent*p,O=this.loadGeometry();function L(X){return[360*(X.x+I)/b-180,360/Math.PI*Math.atan(Math.exp((1-2*(X.y+M)/b)*Math.PI))-90]}function F(X){return X.map(L)}let U;if(this.type===1){let X=[];for(let ne of O)X.push(ne[0]);let re=F(X);U=X.length===1?{type:"Point",coordinates:re[0]}:{type:"MultiPoint",coordinates:re}}else if(this.type===2){let X=O.map(F);U=X.length===1?{type:"LineString",coordinates:X[0]}:{type:"MultiLineString",coordinates:X}}else{if(this.type!==3)throw new Error("unknown feature type");{let X=function(ne){let ae=ne.length;if(ae<=1)return[ne];let he=[],Ie,Xe;for(let je=0;je<ae;je++){let Ve=Vmt(ne[je]);Ve!==0&&(Xe===void 0&&(Xe=Ve<0),Xe===Ve<0?(Ie&&he.push(Ie),Ie=[ne[je]]):Ie&&Ie.push(ne[je]))}return Ie&&he.push(Ie),he}(O),re=[];for(let ne of X)re.push(ne.map(F));U=re.length===1?{type:"Polygon",coordinates:re[0]}:{type:"MultiPolygon",coordinates:re}}}let W={type:"Feature",geometry:U,properties:this.properties};return this.id!=null&&(W.id=this.id),W}}function Bmt(f,l,p){f===1?l.id=p.readVarint():f===2?function(g,b){let I=g.readVarint()+g.pos;for(;g.pos<I;){let M=b._keys[g.readVarint()],O=b._values[g.readVarint()];b.properties[M]=O}}(p,l):f===3?l.type=p.readVarint():f===4&&(l._geometry=p.pos)}function Vmt(f){let l=0;for(let p,g,b=0,I=f.length,M=I-1;b<I;M=b++)p=f[b],g=f[M],l+=(g.x-p.x)*(p.y+g.y);return l}Xx.types=["Unknown","Point","LineString","Polygon"];class $fe{constructor(l,p){this.version=1,this.name="",this.extent=4096,this.length=0,this._pbf=l,this._keys=[],this._values=[],this._features=[],l.readFields(Gmt,this,p),this.length=this._features.length}feature(l){if(l<0||l>=this._features.length)throw new Error("feature index out of bounds");this._pbf.pos=this._features[l];let p=this._pbf.readVarint()+this._pbf.pos;return new Xx(this._pbf,p,this.extent,this._keys,this._values)}}function Gmt(f,l,p){f===15?l.version=p.readVarint():f===1?l.name=p.readString():f===5?l.extent=p.readVarint():f===2?l._features.push(p.pos):f===3?l._keys.push(p.readString()):f===4&&l._values.push(function(g){let b=null,I=g.readVarint()+g.pos;for(;g.pos<I;){let M=g.readVarint()>>3;b=M===1?g.readString():M===2?g.readFloat():M===3?g.readDouble():M===4?g.readVarint64():M===5?g.readVarint():M===6?g.readSVarint():M===7?g.readBoolean():null}if(b==null)throw new Error("unknown feature value");return b}(p))}class Yfe{constructor(l,p){this.layers=l.readFields(Hmt,{},p)}}function Hmt(f,l,p){if(f===3){let g=new $fe(p,p.readVarint()+p.pos);g.length&&(l[g.name]=g)}}let KB=Math.pow(2,13);function DI(f,l,p,g,b,I,M,O){f.emplaceBack(l,p,2*Math.floor(g*KB)+M,b*KB*2,I*KB*2,Math.round(O))}class XB{constructor(l){this.zoom=l.zoom,this.globalState=l.globalState,this.overscaling=l.overscaling,this.layers=l.layers,this.layerIds=this.layers.map(p=>p.id),this.index=l.index,this.hasPattern=!1,this.layoutVertexArray=new it,this.centroidVertexArray=new Le,this.indexArray=new Jo,this.programConfigurations=new Cu(l.layers,l.zoom),this.segments=new Mn,this.stateDependentLayerIds=this.layers.filter(p=>p.isStateDependent()).map(p=>p.id)}populate(l,p,g){this.features=[],this.hasPattern=HB("fill-extrusion",this.layers,p);for(let{feature:b,id:I,index:M,sourceLayerIndex:O}of l){let L=this.layers[0]._featureFilter.needGeometry,F=od(b,L);if(!this.layers[0]._featureFilter.filter(new ni(this.zoom,{globalState:this.globalState}),F,g))continue;let U={id:I,sourceLayerIndex:O,index:M,geometry:L?F.geometry:xh(b),properties:b.properties,type:b.type,patterns:{}};this.hasPattern?this.features.push(WB("fill-extrusion",this.layers,U,{zoom:this.zoom,globalState:this.globalState},p)):this.addFeature(U,U.geometry,M,g,{},p.subdivisionGranularity),p.featureIndex.insert(b,U.geometry,M,O,this.index,!0)}}addFeatures(l,p,g){for(let b of this.features){let{geometry:I}=b;this.addFeature(b,I,b.index,p,g,l.subdivisionGranularity)}}update(l,p,g){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(l,p,this.stateDependentLayers,{imagePositions:g,globalState:this.globalState})}isEmpty(){return this.layoutVertexArray.length===0&&this.centroidVertexArray.length===0}uploadPending(){return!this.uploaded||this.programConfigurations.needsUpload}upload(l){this.uploaded||(this.layoutVertexBuffer=l.createVertexBuffer(this.layoutVertexArray,Umt),this.centroidVertexBuffer=l.createVertexBuffer(this.centroidVertexArray,Fmt.members,!0),this.indexBuffer=l.createIndexBuffer(this.indexArray)),this.programConfigurations.upload(l),this.uploaded=!0}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy(),this.centroidVertexBuffer.destroy())}addFeature(l,p,g,b,I,M){for(let O of T1(p,500)){let L={x:0,y:0,sampleCount:0},F=this.layoutVertexArray.length;this.processPolygon(L,b,l,O,M);let U=this.layoutVertexArray.length-F,W=Math.floor(L.x/L.sampleCount),X=Math.floor(L.y/L.sampleCount);for(let re=0;re<U;re++)this.centroidVertexArray.emplaceBack(W,X)}this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,l,g,{imagePositions:I,canonical:b,globalState:this.globalState})}processPolygon(l,p,g,b,I){if(b.length<1||Zfe(b[0]))return;for(let W of b)W.length!==0&&Wmt(l,W);let M={segment:this.segments.prepareSegment(4,this.layoutVertexArray,this.indexArray)},O=I.fill.getGranularityForZoomLevel(p.z),L=Xx.types[g.type]==="Polygon";for(let W of b){if(W.length===0||Zfe(W))continue;let X=B1(W,O,L);this._generateSideFaces(X,M)}if(!L)return;let F=Vfe(b,p,O,!1),U=this.layoutVertexArray;Gfe((W,X)=>{DI(U,W,X,0,0,1,1,0)},this.segments,this.layoutVertexArray,this.indexArray,F.verticesFlattened,F.indicesTriangles)}_generateSideFaces(l,p){let g=0;for(let b=1;b<l.length;b++){let I=l[b],M=l[b-1];if($mt(I,M))continue;p.segment.vertexLength+4>Mn.MAX_VERTEX_ARRAY_LENGTH&&(p.segment=this.segments.prepareSegment(4,this.layoutVertexArray,this.indexArray));let O=I.sub(M)._perp()._unit(),L=M.dist(I);g+L>32768&&(g=0),DI(this.layoutVertexArray,I.x,I.y,O.x,O.y,0,0,g),DI(this.layoutVertexArray,I.x,I.y,O.x,O.y,0,1,g),g+=L,DI(this.layoutVertexArray,M.x,M.y,O.x,O.y,0,0,g),DI(this.layoutVertexArray,M.x,M.y,O.x,O.y,0,1,g);let F=p.segment.vertexLength;this.indexArray.emplaceBack(F,F+2,F+1),this.indexArray.emplaceBack(F+1,F+2,F+3),p.segment.vertexLength+=4,p.segment.primitiveLength+=2}}}function Wmt(f,l){for(let p=0;p<l.length;p++){let g=l[p];p===l.length-1&&l[0].x===g.x&&l[0].y===g.y||(f.x+=g.x,f.y+=g.y,f.sampleCount++)}}function $mt(f,l){return f.x===l.x&&(f.x<0||f.x>ct)||f.y===l.y&&(f.y<0||f.y>ct)}function Zfe(f){return f.every(l=>l.x<0)||f.every(l=>l.x>ct)||f.every(l=>l.y<0)||f.every(l=>l.y>ct)}let Kfe;fr("FillExtrusionBucket",XB,{omit:["layers","features"]});var Ymt={get paint(){return Kfe=Kfe||new ml({"fill-extrusion-opacity":new Sr(Ae["paint_fill-extrusion"]["fill-extrusion-opacity"]),"fill-extrusion-color":new Kr(Ae["paint_fill-extrusion"]["fill-extrusion-color"]),"fill-extrusion-translate":new Sr(Ae["paint_fill-extrusion"]["fill-extrusion-translate"]),"fill-extrusion-translate-anchor":new Sr(Ae["paint_fill-extrusion"]["fill-extrusion-translate-anchor"]),"fill-extrusion-pattern":new Fx(Ae["paint_fill-extrusion"]["fill-extrusion-pattern"]),"fill-extrusion-height":new Kr(Ae["paint_fill-extrusion"]["fill-extrusion-height"]),"fill-extrusion-base":new Kr(Ae["paint_fill-extrusion"]["fill-extrusion-base"]),"fill-extrusion-vertical-gradient":new Sr(Ae["paint_fill-extrusion"]["fill-extrusion-vertical-gradient"])})}};class Zmt extends sc{constructor(l){super(l,Ymt)}createBucket(l){return new XB(l)}queryRadius(){return ON(this.paint.get("fill-extrusion-translate"))}is3D(){return!0}queryIntersectsFeature({queryGeometry:l,feature:p,featureState:g,geometry:b,transform:I,pixelsToTileUnits:M,pixelPosMatrix:O}){let L=PN(l,this.paint.get("fill-extrusion-translate"),this.paint.get("fill-extrusion-translate-anchor"),-I.bearingInRadians,M),F=this.paint.get("fill-extrusion-height").evaluate(p,g),U=this.paint.get("fill-extrusion-base").evaluate(p,g),W=function(re,ne){let ae=[];for(let he of re){let Ie=[he.x,he.y,0,1];_e(Ie,Ie,ne),ae.push(new a(Ie[0]/Ie[3],Ie[1]/Ie[3]))}return ae}(L,O),X=function(re,ne,ae,he){let Ie=[],Xe=[],je=he[8]*ne,Ve=he[9]*ne,st=he[10]*ne,yt=he[11]*ne,kt=he[8]*ae,tr=he[9]*ae,Ht=he[10]*ae,Xt=he[11]*ae;for(let Or of re){let Kt=[],Jt=[];for(let Ct of Or){let Jr=Ct.x,un=Ct.y,Vr=he[0]*Jr+he[4]*un+he[12],wr=he[1]*Jr+he[5]*un+he[13],no=he[2]*Jr+he[6]*un+he[14],Ji=he[3]*Jr+he[7]*un+he[15],Ba=no+st,$s=Ji+yt,lp=Vr+kt,Ou=wr+tr,As=no+Ht,zi=Ji+Xt,cs=new a((Vr+je)/$s,(wr+Ve)/$s);cs.z=Ba/$s,Kt.push(cs);let Os=new a(lp/zi,Ou/zi);Os.z=As/zi,Jt.push(Os)}Ie.push(Kt),Xe.push(Jt)}return[Ie,Xe]}(b,U,F,O);return function(re,ne,ae){let he=1/0;Sfe(ae,ne)&&(he=Xfe(ae,ne[0]));for(let Ie=0;Ie<ne.length;Ie++){let Xe=ne[Ie],je=re[Ie];for(let Ve=0;Ve<Xe.length-1;Ve++){let st=Xe[Ve],yt=[st,Xe[Ve+1],je[Ve+1],je[Ve],st];Efe(ae,yt)&&(he=Math.min(he,Xfe(ae,yt)))}}return he!==1/0&&he}(X[0],X[1],W)}}function NI(f,l){return f.x*l.x+f.y*l.y}function Xfe(f,l){if(f.length===1){let p=0,g=l[p++],b;for(;!b||g.equals(b);)if(b=l[p++],!b)return 1/0;for(;p<l.length;p++){let I=l[p],M=f[0],O=b.sub(g),L=I.sub(g),F=M.sub(g),U=NI(O,O),W=NI(O,L),X=NI(L,L),re=NI(F,O),ne=NI(F,L),ae=U*X-W*W,he=(X*re-W*ne)/ae,Ie=(U*ne-W*re)/ae,Xe=g.z*(1-he-Ie)+b.z*he+I.z*Ie;if(isFinite(Xe))return Xe}return 1/0}{let p=1/0;for(let g of l)p=Math.min(p,g.z);return p}}let Kmt=ca([{name:"a_pos_normal",components:2,type:"Int16"},{name:"a_data",components:4,type:"Uint8"}],4),{members:Xmt}=Kmt,Jmt=ca([{name:"a_uv_x",components:1,type:"Float32"},{name:"a_split_index",components:1,type:"Float32"}]),{members:Qmt}=Jmt,egt=Math.cos(Math.PI/180*37.5),Jfe=Math.pow(2,14)/.5;class JB{constructor(l){this.zoom=l.zoom,this.globalState=l.globalState,this.overscaling=l.overscaling,this.layers=l.layers,this.layerIds=this.layers.map(p=>p.id),this.index=l.index,this.hasPattern=!1,this.patternFeatures=[],this.lineClipsArray=[],this.gradients={},this.layers.forEach(p=>{this.gradients[p.id]={}}),this.layoutVertexArray=new at,this.layoutVertexArray2=new dt,this.indexArray=new Jo,this.programConfigurations=new Cu(l.layers,l.zoom),this.segments=new Mn,this.maxLineLength=0,this.stateDependentLayerIds=this.layers.filter(p=>p.isStateDependent()).map(p=>p.id)}populate(l,p,g){this.hasPattern=HB("line",this.layers,p);let b=this.layers[0].layout.get("line-sort-key"),I=!b.isConstant(),M=[];for(let{feature:O,id:L,index:F,sourceLayerIndex:U}of l){let W=this.layers[0]._featureFilter.needGeometry,X=od(O,W);if(!this.layers[0]._featureFilter.filter(new ni(this.zoom,{globalState:this.globalState}),X,g))continue;let re=I?b.evaluate(X,{},g):void 0,ne={id:L,properties:O.properties,type:O.type,sourceLayerIndex:U,index:F,geometry:W?X.geometry:xh(O),patterns:{},sortKey:re};M.push(ne)}I&&M.sort((O,L)=>O.sortKey-L.sortKey);for(let O of M){let{geometry:L,index:F,sourceLayerIndex:U}=O;if(this.hasPattern){let W=WB("line",this.layers,O,{zoom:this.zoom,globalState:this.globalState},p);this.patternFeatures.push(W)}else this.addFeature(O,L,F,g,{},p.subdivisionGranularity);p.featureIndex.insert(l[F].feature,L,F,U,this.index)}}update(l,p,g){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(l,p,this.stateDependentLayers,{imagePositions:g,globalState:this.globalState})}addFeatures(l,p,g){for(let b of this.patternFeatures)this.addFeature(b,b.geometry,b.index,p,g,l.subdivisionGranularity)}isEmpty(){return this.layoutVertexArray.length===0}uploadPending(){return!this.uploaded||this.programConfigurations.needsUpload}upload(l){this.uploaded||(this.layoutVertexArray2.length!==0&&(this.layoutVertexBuffer2=l.createVertexBuffer(this.layoutVertexArray2,Qmt)),this.layoutVertexBuffer=l.createVertexBuffer(this.layoutVertexArray,Xmt),this.indexBuffer=l.createIndexBuffer(this.indexArray)),this.programConfigurations.upload(l),this.uploaded=!0}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy())}lineFeatureClips(l){if(l.properties&&Object.prototype.hasOwnProperty.call(l.properties,"mapbox_clip_start")&&Object.prototype.hasOwnProperty.call(l.properties,"mapbox_clip_end"))return{start:+l.properties.mapbox_clip_start,end:+l.properties.mapbox_clip_end}}addFeature(l,p,g,b,I,M){let O=this.layers[0].layout,L=O.get("line-join").evaluate(l,{}),F=O.get("line-cap"),U=O.get("line-miter-limit"),W=O.get("line-round-limit");this.lineClips=this.lineFeatureClips(l);for(let X of p)this.addLine(X,l,L,F,U,W,b,M);this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,l,g,{imagePositions:I,canonical:b,globalState:this.globalState})}addLine(l,p,g,b,I,M,O,L){if(this.distance=0,this.scaledDistance=0,this.totalDistance=0,l=B1(l,O?L.line.getGranularityForZoomLevel(O.z):1),this.lineClips){this.lineClipsArray.push(this.lineClips);for(let je=0;je<l.length-1;je++)this.totalDistance+=l[je].dist(l[je+1]);this.updateScaledDistance(),this.maxLineLength=Math.max(this.maxLineLength,this.totalDistance)}let F=Xx.types[p.type]==="Polygon",U=l.length;for(;U>=2&&l[U-1].equals(l[U-2]);)U--;let W=0;for(;W<U-1&&l[W].equals(l[W+1]);)W++;if(U<(F?3:2))return;g==="bevel"&&(I=1.05);let X=this.overscaling<=16?122880/(512*this.overscaling):0,re=this.segments.prepareSegment(10*U,this.layoutVertexArray,this.indexArray),ne,ae,he,Ie,Xe;this.e1=this.e2=-1,F&&(ne=l[U-2],Xe=l[W].sub(ne)._unit()._perp());for(let je=W;je<U;je++){if(he=je===U-1?F?l[W+1]:void 0:l[je+1],he&&l[je].equals(he))continue;Xe&&(Ie=Xe),ne&&(ae=ne),ne=l[je],Xe=he?he.sub(ne)._unit()._perp():Ie,Ie=Ie||Xe;let Ve=Ie.add(Xe);Ve.x===0&&Ve.y===0||Ve._unit();let st=Ie.x*Xe.x+Ie.y*Xe.y,yt=Ve.x*Xe.x+Ve.y*Xe.y,kt=yt!==0?1/yt:1/0,tr=2*Math.sqrt(2-2*yt),Ht=yt<egt&&ae&&he,Xt=Ie.x*Xe.y-Ie.y*Xe.x>0;if(Ht&&je>W){let Jt=ne.dist(ae);if(Jt>2*X){let Ct=ne.sub(ne.sub(ae)._mult(X/Jt)._round());this.updateDistance(ae,Ct),this.addCurrentVertex(Ct,Ie,0,0,re),ae=Ct}}let Or=ae&&he,Kt=Or?g:F?"butt":b;if(Or&&Kt==="round"&&(kt<M?Kt="miter":kt<=2&&(Kt="fakeround")),Kt==="miter"&&kt>I&&(Kt="bevel"),Kt==="bevel"&&(kt>2&&(Kt="flipbevel"),kt<I&&(Kt="miter")),ae&&this.updateDistance(ae,ne),Kt==="miter")Ve._mult(kt),this.addCurrentVertex(ne,Ve,0,0,re);else if(Kt==="flipbevel"){if(kt>100)Ve=Xe.mult(-1);else{let Jt=kt*Ie.add(Xe).mag()/Ie.sub(Xe).mag();Ve._perp()._mult(Jt*(Xt?-1:1))}this.addCurrentVertex(ne,Ve,0,0,re),this.addCurrentVertex(ne,Ve.mult(-1),0,0,re)}else if(Kt==="bevel"||Kt==="fakeround"){let Jt=-Math.sqrt(kt*kt-1),Ct=Xt?Jt:0,Jr=Xt?0:Jt;if(ae&&this.addCurrentVertex(ne,Ie,Ct,Jr,re),Kt==="fakeround"){let un=Math.round(180*tr/Math.PI/20);for(let Vr=1;Vr<un;Vr++){let wr=Vr/un;if(wr!==.5){let Ji=wr-.5;wr+=wr*Ji*(wr-1)*((1.0904+st*(st*(3.55645-1.43519*st)-3.2452))*Ji*Ji+(.848013+st*(.215638*st-1.06021)))}let no=Xe.sub(Ie)._mult(wr)._add(Ie)._unit()._mult(Xt?-1:1);this.addHalfVertex(ne,no.x,no.y,!1,Xt,0,re)}}he&&this.addCurrentVertex(ne,Xe,-Ct,-Jr,re)}else if(Kt==="butt")this.addCurrentVertex(ne,Ve,0,0,re);else if(Kt==="square"){let Jt=ae?1:-1;this.addCurrentVertex(ne,Ve,Jt,Jt,re)}else Kt==="round"&&(ae&&(this.addCurrentVertex(ne,Ie,0,0,re),this.addCurrentVertex(ne,Ie,1,1,re,!0)),he&&(this.addCurrentVertex(ne,Xe,-1,-1,re,!0),this.addCurrentVertex(ne,Xe,0,0,re)));if(Ht&&je<U-1){let Jt=ne.dist(he);if(Jt>2*X){let Ct=ne.add(he.sub(ne)._mult(X/Jt)._round());this.updateDistance(ne,Ct),this.addCurrentVertex(Ct,Xe,0,0,re),ne=Ct}}}}addCurrentVertex(l,p,g,b,I,M=!1){let O=p.y*b-p.x,L=-p.y-p.x*b;this.addHalfVertex(l,p.x+p.y*g,p.y-p.x*g,M,!1,g,I),this.addHalfVertex(l,O,L,M,!0,-b,I),this.distance>Jfe/2&&this.totalDistance===0&&(this.distance=0,this.updateScaledDistance(),this.addCurrentVertex(l,p,g,b,I,M))}addHalfVertex({x:l,y:p},g,b,I,M,O,L){let F=.5*(this.lineClips?this.scaledDistance*(Jfe-1):this.scaledDistance);this.layoutVertexArray.emplaceBack((l<<1)+(I?1:0),(p<<1)+(M?1:0),Math.round(63*g)+128,Math.round(63*b)+128,1+(O===0?0:O<0?-1:1)|(63&F)<<2,F>>6),this.lineClips&&this.layoutVertexArray2.emplaceBack((this.scaledDistance-this.lineClips.start)/(this.lineClips.end-this.lineClips.start),this.lineClipsArray.length);let U=L.vertexLength++;this.e1>=0&&this.e2>=0&&(this.indexArray.emplaceBack(this.e1,U,this.e2),L.primitiveLength++),M?this.e2=U:this.e1=U}updateScaledDistance(){this.scaledDistance=this.lineClips?this.lineClips.start+(this.lineClips.end-this.lineClips.start)*this.distance/this.totalDistance:this.distance}updateDistance(l,p){this.distance+=l.dist(p),this.updateScaledDistance()}}let Qfe,ede;fr("LineBucket",JB,{omit:["layers","patternFeatures"]});var tde={get paint(){return ede=ede||new ml({"line-opacity":new Kr(Ae.paint_line["line-opacity"]),"line-color":new Kr(Ae.paint_line["line-color"]),"line-translate":new Sr(Ae.paint_line["line-translate"]),"line-translate-anchor":new Sr(Ae.paint_line["line-translate-anchor"]),"line-width":new Kr(Ae.paint_line["line-width"]),"line-gap-width":new Kr(Ae.paint_line["line-gap-width"]),"line-offset":new Kr(Ae.paint_line["line-offset"]),"line-blur":new Kr(Ae.paint_line["line-blur"]),"line-dasharray":new gh(Ae.paint_line["line-dasharray"]),"line-pattern":new Fx(Ae.paint_line["line-pattern"]),"line-gradient":new Ux(Ae.paint_line["line-gradient"])})},get layout(){return Qfe=Qfe||new ml({"line-cap":new Sr(Ae.layout_line["line-cap"]),"line-join":new Kr(Ae.layout_line["line-join"]),"line-miter-limit":new Sr(Ae.layout_line["line-miter-limit"]),"line-round-limit":new Sr(Ae.layout_line["line-round-limit"]),"line-sort-key":new Kr(Ae.layout_line["line-sort-key"])})}};class tgt extends Kr{possiblyEvaluate(l,p){return p=new ni(Math.floor(p.zoom),{now:p.now,fadeDuration:p.fadeDuration,zoomHistory:p.zoomHistory,transition:p.transition}),super.possiblyEvaluate(l,p)}evaluate(l,p,g,b){return p=Ne({},p,{zoom:Math.floor(p.zoom)}),super.evaluate(l,p,g,b)}}let kN;class rgt extends sc{constructor(l){super(l,tde),this.gradientVersion=0,kN||(kN=new tgt(tde.paint.properties["line-width"].specification),kN.useIntegerZoom=!0)}_handleSpecialPaintPropertyUpdate(l){if(l==="line-gradient"){let p=this.gradientExpression();this.stepInterpolant=!!function(g){return g._styleExpression!==void 0}(p)&&p._styleExpression.expression instanceof ua,this.gradientVersion=(this.gradientVersion+1)%Number.MAX_SAFE_INTEGER}}gradientExpression(){return this._transitionablePaint._values["line-gradient"].value.expression}recalculate(l,p){super.recalculate(l,p),this.paint._values["line-floorwidth"]=kN.possiblyEvaluate(this._transitioningPaint._values["line-width"].value,l)}createBucket(l){return new JB(l)}queryRadius(l){let p=l,g=rde(SI("line-width",this,p),SI("line-gap-width",this,p)),b=SI("line-offset",this,p);return g/2+Math.abs(b)+ON(this.paint.get("line-translate"))}queryIntersectsFeature({queryGeometry:l,feature:p,featureState:g,geometry:b,transform:I,pixelsToTileUnits:M}){let O=PN(l,this.paint.get("line-translate"),this.paint.get("line-translate-anchor"),-I.bearingInRadians,M),L=M/2*rde(this.paint.get("line-width").evaluate(p,g),this.paint.get("line-gap-width").evaluate(p,g)),F=this.paint.get("line-offset").evaluate(p,g);return F&&(b=function(U,W){let X=[];for(let re=0;re<U.length;re++){let ne=U[re],ae=[];for(let he=0;he<ne.length;he++){let Ie=ne[he-1],Xe=ne[he],je=ne[he+1],Ve=he===0?new a(0,0):Xe.sub(Ie)._unit()._perp(),st=he===ne.length-1?new a(0,0):je.sub(Xe)._unit()._perp(),yt=Ve._add(st)._unit(),kt=yt.x*st.x+yt.y*st.y;kt!==0&&yt._mult(1/kt),ae.push(yt._mult(W)._add(Xe))}X.push(ae)}return X}(b,F*M)),function(U,W,X){for(let re=0;re<W.length;re++){let ne=W[re];if(U.length>=3){for(let ae=0;ae<ne.length;ae++)if($x(U,ne[ae]))return!0}if(dmt(U,ne,X))return!0}return!1}(O,b,L)}isTileClipped(){return!0}}function rde(f,l){return l>0?l+2*f:f}let ngt=ca([{name:"a_pos_offset",components:4,type:"Int16"},{name:"a_data",components:4,type:"Uint16"},{name:"a_pixeloffset",components:4,type:"Int16"}],4),ogt=ca([{name:"a_projected_pos",components:3,type:"Float32"}],4);ca([{name:"a_fade_opacity",components:1,type:"Uint32"}],4);let igt=ca([{name:"a_placed",components:2,type:"Uint8"},{name:"a_shift",components:2,type:"Float32"},{name:"a_box_real",components:2,type:"Int16"}]);ca([{type:"Int16",name:"anchorPointX"},{type:"Int16",name:"anchorPointY"},{type:"Int16",name:"x1"},{type:"Int16",name:"y1"},{type:"Int16",name:"x2"},{type:"Int16",name:"y2"},{type:"Uint32",name:"featureIndex"},{type:"Uint16",name:"sourceLayerIndex"},{type:"Uint16",name:"bucketIndex"}]);let nde=ca([{name:"a_pos",components:2,type:"Int16"},{name:"a_anchor_pos",components:2,type:"Int16"},{name:"a_extrude",components:2,type:"Int16"}],4),agt=ca([{name:"a_pos",components:2,type:"Float32"},{name:"a_radius",components:1,type:"Float32"},{name:"a_flags",components:2,type:"Int16"}],4);function sgt(f,l,p){return f.sections.forEach(g=>{g.text=function(b,I,M){let O=I.layout.get("text-transform").evaluate(M,{});return O==="uppercase"?b=b.toLocaleUpperCase():O==="lowercase"&&(b=b.toLocaleLowerCase()),np.applyArabicShaping&&(b=np.applyArabicShaping(b)),b}(g.text,l,p)}),f}ca([{name:"triangle",components:3,type:"Uint16"}]),ca([{type:"Int16",name:"anchorX"},{type:"Int16",name:"anchorY"},{type:"Uint16",name:"glyphStartIndex"},{type:"Uint16",name:"numGlyphs"},{type:"Uint32",name:"vertexStartIndex"},{type:"Uint32",name:"lineStartIndex"},{type:"Uint32",name:"lineLength"},{type:"Uint16",name:"segment"},{type:"Uint16",name:"lowerSize"},{type:"Uint16",name:"upperSize"},{type:"Float32",name:"lineOffsetX"},{type:"Float32",name:"lineOffsetY"},{type:"Uint8",name:"writingMode"},{type:"Uint8",name:"placedOrientation"},{type:"Uint8",name:"hidden"},{type:"Uint32",name:"crossTileID"},{type:"Int16",name:"associatedIconIndex"}]),ca([{type:"Int16",name:"anchorX"},{type:"Int16",name:"anchorY"},{type:"Int16",name:"rightJustifiedTextSymbolIndex"},{type:"Int16",name:"centerJustifiedTextSymbolIndex"},{type:"Int16",name:"leftJustifiedTextSymbolIndex"},{type:"Int16",name:"verticalPlacedTextSymbolIndex"},{type:"Int16",name:"placedIconSymbolIndex"},{type:"Int16",name:"verticalPlacedIconSymbolIndex"},{type:"Uint16",name:"key"},{type:"Uint16",name:"textBoxStartIndex"},{type:"Uint16",name:"textBoxEndIndex"},{type:"Uint16",name:"verticalTextBoxStartIndex"},{type:"Uint16",name:"verticalTextBoxEndIndex"},{type:"Uint16",name:"iconBoxStartIndex"},{type:"Uint16",name:"iconBoxEndIndex"},{type:"Uint16",name:"verticalIconBoxStartIndex"},{type:"Uint16",name:"verticalIconBoxEndIndex"},{type:"Uint16",name:"featureIndex"},{type:"Uint16",name:"numHorizontalGlyphVertices"},{type:"Uint16",name:"numVerticalGlyphVertices"},{type:"Uint16",name:"numIconVertices"},{type:"Uint16",name:"numVerticalIconVertices"},{type:"Uint16",name:"useRuntimeCollisionCircles"},{type:"Uint32",name:"crossTileID"},{type:"Float32",name:"textBoxScale"},{type:"Float32",name:"collisionCircleDiameter"},{type:"Uint16",name:"textAnchorOffsetStartIndex"},{type:"Uint16",name:"textAnchorOffsetEndIndex"}]),ca([{type:"Float32",name:"offsetX"}]),ca([{type:"Int16",name:"x"},{type:"Int16",name:"y"},{type:"Int16",name:"tileUnitDistanceFromAnchor"}]),ca([{type:"Uint16",name:"textAnchor"},{type:"Float32",components:2,name:"textOffset"}]);let LI={"!":"\uFE15","#":"\uFF03",$:"\uFF04","%":"\uFF05","&":"\uFF06","(":"\uFE35",")":"\uFE36","*":"\uFF0A","+":"\uFF0B",",":"\uFE10","-":"\uFE32",".":"\u30FB","/":"\uFF0F",":":"\uFE13",";":"\uFE14","<":"\uFE3F","=":"\uFF1D",">":"\uFE40","?":"\uFE16","@":"\uFF20","[":"\uFE47","\\":"\uFF3C","]":"\uFE48","^":"\uFF3E",_:"\uFE33","`":"\uFF40","{":"\uFE37","|":"\u2015","}":"\uFE38","~":"\uFF5E","\xA2":"\uFFE0","\xA3":"\uFFE1","\xA5":"\uFFE5","\xA6":"\uFFE4","\xAC":"\uFFE2","\xAF":"\uFFE3","\u2013":"\uFE32","\u2014":"\uFE31","\u2018":"\uFE43","\u2019":"\uFE44","\u201C":"\uFE41","\u201D":"\uFE42","\u2026":"\uFE19","\u2027":"\u30FB","\u20A9":"\uFFE6","\u3001":"\uFE11","\u3002":"\uFE12","\u3008":"\uFE3F","\u3009":"\uFE40","\u300A":"\uFE3D","\u300B":"\uFE3E","\u300C":"\uFE41","\u300D":"\uFE42","\u300E":"\uFE43","\u300F":"\uFE44","\u3010":"\uFE3B","\u3011":"\uFE3C","\u3014":"\uFE39","\u3015":"\uFE3A","\u3016":"\uFE17","\u3017":"\uFE18","\uFF01":"\uFE15","\uFF08":"\uFE35","\uFF09":"\uFE36","\uFF0C":"\uFE10","\uFF0D":"\uFE32","\uFF0E":"\u30FB","\uFF1A":"\uFE13","\uFF1B":"\uFE14","\uFF1C":"\uFE3F","\uFF1E":"\uFE40","\uFF1F":"\uFE16","\uFF3B":"\uFE47","\uFF3D":"\uFE48","\uFF3F":"\uFE33","\uFF5B":"\uFE37","\uFF5C":"\u2015","\uFF5D":"\uFE38","\uFF5F":"\uFE35","\uFF60":"\uFE36","\uFF61":"\uFE12","\uFF62":"\uFE41","\uFF63":"\uFE42"};var us=24;let QB=4294967296,ode=1/QB,ide=typeof TextDecoder=="undefined"?null:new TextDecoder("utf-8");class eV{constructor(l=new Uint8Array(16)){this.buf=ArrayBuffer.isView(l)?l:new Uint8Array(l),this.dataView=new DataView(this.buf.buffer),this.pos=0,this.type=0,this.length=this.buf.length}readFields(l,p,g=this.length){for(;this.pos<g;){let b=this.readVarint(),I=b>>3,M=this.pos;this.type=7&b,l(I,p,this),this.pos===M&&this.skip(b)}return p}readMessage(l,p){return this.readFields(l,p,this.readVarint()+this.pos)}readFixed32(){let l=this.dataView.getUint32(this.pos,!0);return this.pos+=4,l}readSFixed32(){let l=this.dataView.getInt32(this.pos,!0);return this.pos+=4,l}readFixed64(){let l=this.dataView.getUint32(this.pos,!0)+this.dataView.getUint32(this.pos+4,!0)*QB;return this.pos+=8,l}readSFixed64(){let l=this.dataView.getUint32(this.pos,!0)+this.dataView.getInt32(this.pos+4,!0)*QB;return this.pos+=8,l}readFloat(){let l=this.dataView.getFloat32(this.pos,!0);return this.pos+=4,l}readDouble(){let l=this.dataView.getFloat64(this.pos,!0);return this.pos+=8,l}readVarint(l){let p=this.buf,g,b;return b=p[this.pos++],g=127&b,b<128?g:(b=p[this.pos++],g|=(127&b)<<7,b<128?g:(b=p[this.pos++],g|=(127&b)<<14,b<128?g:(b=p[this.pos++],g|=(127&b)<<21,b<128?g:(b=p[this.pos],g|=(15&b)<<28,function(I,M,O){let L=O.buf,F,U;if(U=L[O.pos++],F=(112&U)>>4,U<128||(U=L[O.pos++],F|=(127&U)<<3,U<128)||(U=L[O.pos++],F|=(127&U)<<10,U<128)||(U=L[O.pos++],F|=(127&U)<<17,U<128)||(U=L[O.pos++],F|=(127&U)<<24,U<128)||(U=L[O.pos++],F|=(1&U)<<31,U<128))return Jx(I,F,M);throw new Error("Expected varint not more than 10 bytes")}(g,l,this)))))}readVarint64(){return this.readVarint(!0)}readSVarint(){let l=this.readVarint();return l%2==1?(l+1)/-2:l/2}readBoolean(){return!!this.readVarint()}readString(){let l=this.readVarint()+this.pos,p=this.pos;return this.pos=l,l-p>=12&&ide?ide.decode(this.buf.subarray(p,l)):function(g,b,I){let M="",O=b;for(;O<I;){let L=g[O],F,U,W,X=null,re=L>239?4:L>223?3:L>191?2:1;if(O+re>I)break;re===1?L<128&&(X=L):re===2?(F=g[O+1],(192&F)==128&&(X=(31&L)<<6|63&F,X<=127&&(X=null))):re===3?(F=g[O+1],U=g[O+2],(192&F)==128&&(192&U)==128&&(X=(15&L)<<12|(63&F)<<6|63&U,(X<=2047||X>=55296&&X<=57343)&&(X=null))):re===4&&(F=g[O+1],U=g[O+2],W=g[O+3],(192&F)==128&&(192&U)==128&&(192&W)==128&&(X=(15&L)<<18|(63&F)<<12|(63&U)<<6|63&W,(X<=65535||X>=1114112)&&(X=null))),X===null?(X=65533,re=1):X>65535&&(X-=65536,M+=String.fromCharCode(X>>>10&1023|55296),X=56320|1023&X),M+=String.fromCharCode(X),O+=re}return M}(this.buf,p,l)}readBytes(){let l=this.readVarint()+this.pos,p=this.buf.subarray(this.pos,l);return this.pos=l,p}readPackedVarint(l=[],p){let g=this.readPackedEnd();for(;this.pos<g;)l.push(this.readVarint(p));return l}readPackedSVarint(l=[]){let p=this.readPackedEnd();for(;this.pos<p;)l.push(this.readSVarint());return l}readPackedBoolean(l=[]){let p=this.readPackedEnd();for(;this.pos<p;)l.push(this.readBoolean());return l}readPackedFloat(l=[]){let p=this.readPackedEnd();for(;this.pos<p;)l.push(this.readFloat());return l}readPackedDouble(l=[]){let p=this.readPackedEnd();for(;this.pos<p;)l.push(this.readDouble());return l}readPackedFixed32(l=[]){let p=this.readPackedEnd();for(;this.pos<p;)l.push(this.readFixed32());return l}readPackedSFixed32(l=[]){let p=this.readPackedEnd();for(;this.pos<p;)l.push(this.readSFixed32());return l}readPackedFixed64(l=[]){let p=this.readPackedEnd();for(;this.pos<p;)l.push(this.readFixed64());return l}readPackedSFixed64(l=[]){let p=this.readPackedEnd();for(;this.pos<p;)l.push(this.readSFixed64());return l}readPackedEnd(){return this.type===2?this.readVarint()+this.pos:this.pos+1}skip(l){let p=7&l;if(p===0)for(;this.buf[this.pos++]>127;);else if(p===2)this.pos=this.readVarint()+this.pos;else if(p===5)this.pos+=4;else{if(p!==1)throw new Error(`Unimplemented type: ${p}`);this.pos+=8}}writeTag(l,p){this.writeVarint(l<<3|p)}realloc(l){let p=this.length||16;for(;p<this.pos+l;)p*=2;if(p!==this.length){let g=new Uint8Array(p);g.set(this.buf),this.buf=g,this.dataView=new DataView(g.buffer),this.length=p}}finish(){return this.length=this.pos,this.pos=0,this.buf.subarray(0,this.length)}writeFixed32(l){this.realloc(4),this.dataView.setInt32(this.pos,l,!0),this.pos+=4}writeSFixed32(l){this.realloc(4),this.dataView.setInt32(this.pos,l,!0),this.pos+=4}writeFixed64(l){this.realloc(8),this.dataView.setInt32(this.pos,-1&l,!0),this.dataView.setInt32(this.pos+4,Math.floor(l*ode),!0),this.pos+=8}writeSFixed64(l){this.realloc(8),this.dataView.setInt32(this.pos,-1&l,!0),this.dataView.setInt32(this.pos+4,Math.floor(l*ode),!0),this.pos+=8}writeVarint(l){(l=+l||0)>268435455||l<0?function(p,g){let b,I;if(p>=0?(b=p%4294967296|0,I=p/4294967296|0):(b=~(-p%4294967296),I=~(-p/4294967296),4294967295^b?b=b+1|0:(b=0,I=I+1|0)),p>=18446744073709552e3||p<-18446744073709552e3)throw new Error("Given varint doesn't fit into 10 bytes");g.realloc(10),function(M,O,L){L.buf[L.pos++]=127&M|128,M>>>=7,L.buf[L.pos++]=127&M|128,M>>>=7,L.buf[L.pos++]=127&M|128,M>>>=7,L.buf[L.pos++]=127&M|128,L.buf[L.pos]=127&(M>>>=7)}(b,0,g),function(M,O){let L=(7&M)<<4;O.buf[O.pos++]|=L|((M>>>=3)?128:0),M&&(O.buf[O.pos++]=127&M|((M>>>=7)?128:0),M&&(O.buf[O.pos++]=127&M|((M>>>=7)?128:0),M&&(O.buf[O.pos++]=127&M|((M>>>=7)?128:0),M&&(O.buf[O.pos++]=127&M|((M>>>=7)?128:0),M&&(O.buf[O.pos++]=127&M)))))}(I,g)}(l,this):(this.realloc(4),this.buf[this.pos++]=127&l|(l>127?128:0),l<=127||(this.buf[this.pos++]=127&(l>>>=7)|(l>127?128:0),l<=127||(this.buf[this.pos++]=127&(l>>>=7)|(l>127?128:0),l<=127||(this.buf[this.pos++]=l>>>7&127))))}writeSVarint(l){this.writeVarint(l<0?2*-l-1:2*l)}writeBoolean(l){this.writeVarint(+l)}writeString(l){l=String(l),this.realloc(4*l.length),this.pos++;let p=this.pos;this.pos=function(b,I,M){for(let O,L,F=0;F<I.length;F++){if(O=I.charCodeAt(F),O>55295&&O<57344){if(!L){O>56319||F+1===I.length?(b[M++]=239,b[M++]=191,b[M++]=189):L=O;continue}if(O<56320){b[M++]=239,b[M++]=191,b[M++]=189,L=O;continue}O=L-55296<<10|O-56320|65536,L=null}else L&&(b[M++]=239,b[M++]=191,b[M++]=189,L=null);O<128?b[M++]=O:(O<2048?b[M++]=O>>6|192:(O<65536?b[M++]=O>>12|224:(b[M++]=O>>18|240,b[M++]=O>>12&63|128),b[M++]=O>>6&63|128),b[M++]=63&O|128)}return M}(this.buf,l,this.pos);let g=this.pos-p;g>=128&&ade(p,g,this),this.pos=p-1,this.writeVarint(g),this.pos+=g}writeFloat(l){this.realloc(4),this.dataView.setFloat32(this.pos,l,!0),this.pos+=4}writeDouble(l){this.realloc(8),this.dataView.setFloat64(this.pos,l,!0),this.pos+=8}writeBytes(l){let p=l.length;this.writeVarint(p),this.realloc(p);for(let g=0;g<p;g++)this.buf[this.pos++]=l[g]}writeRawMessage(l,p){this.pos++;let g=this.pos;l(p,this);let b=this.pos-g;b>=128&&ade(g,b,this),this.pos=g-1,this.writeVarint(b),this.pos+=b}writeMessage(l,p,g){this.writeTag(l,2),this.writeRawMessage(p,g)}writePackedVarint(l,p){p.length&&this.writeMessage(l,lgt,p)}writePackedSVarint(l,p){p.length&&this.writeMessage(l,ugt,p)}writePackedBoolean(l,p){p.length&&this.writeMessage(l,fgt,p)}writePackedFloat(l,p){p.length&&this.writeMessage(l,cgt,p)}writePackedDouble(l,p){p.length&&this.writeMessage(l,pgt,p)}writePackedFixed32(l,p){p.length&&this.writeMessage(l,dgt,p)}writePackedSFixed32(l,p){p.length&&this.writeMessage(l,hgt,p)}writePackedFixed64(l,p){p.length&&this.writeMessage(l,mgt,p)}writePackedSFixed64(l,p){p.length&&this.writeMessage(l,ggt,p)}writeBytesField(l,p){this.writeTag(l,2),this.writeBytes(p)}writeFixed32Field(l,p){this.writeTag(l,5),this.writeFixed32(p)}writeSFixed32Field(l,p){this.writeTag(l,5),this.writeSFixed32(p)}writeFixed64Field(l,p){this.writeTag(l,1),this.writeFixed64(p)}writeSFixed64Field(l,p){this.writeTag(l,1),this.writeSFixed64(p)}writeVarintField(l,p){this.writeTag(l,0),this.writeVarint(p)}writeSVarintField(l,p){this.writeTag(l,0),this.writeSVarint(p)}writeStringField(l,p){this.writeTag(l,2),this.writeString(p)}writeFloatField(l,p){this.writeTag(l,5),this.writeFloat(p)}writeDoubleField(l,p){this.writeTag(l,1),this.writeDouble(p)}writeBooleanField(l,p){this.writeVarintField(l,+p)}}function Jx(f,l,p){return p?4294967296*l+(f>>>0):4294967296*(l>>>0)+(f>>>0)}function ade(f,l,p){let g=l<=16383?1:l<=2097151?2:l<=268435455?3:Math.floor(Math.log(l)/(7*Math.LN2));p.realloc(g);for(let b=p.pos-1;b>=f;b--)p.buf[b+g]=p.buf[b]}function lgt(f,l){for(let p=0;p<f.length;p++)l.writeVarint(f[p])}function ugt(f,l){for(let p=0;p<f.length;p++)l.writeSVarint(f[p])}function cgt(f,l){for(let p=0;p<f.length;p++)l.writeFloat(f[p])}function pgt(f,l){for(let p=0;p<f.length;p++)l.writeDouble(f[p])}function fgt(f,l){for(let p=0;p<f.length;p++)l.writeBoolean(f[p])}function dgt(f,l){for(let p=0;p<f.length;p++)l.writeFixed32(f[p])}function hgt(f,l){for(let p=0;p<f.length;p++)l.writeSFixed32(f[p])}function mgt(f,l){for(let p=0;p<f.length;p++)l.writeFixed64(f[p])}function ggt(f,l){for(let p=0;p<f.length;p++)l.writeSFixed64(f[p])}function vgt(f,l,p){f===1&&p.readMessage(ygt,l)}function ygt(f,l,p){if(f===3){let{id:g,bitmap:b,width:I,height:M,left:O,top:L,advance:F}=p.readMessage(_gt,{});l.push({id:g,bitmap:new TI({width:I+6,height:M+6},b),metrics:{width:I,height:M,left:O,top:L,advance:F}})}}function _gt(f,l,p){f===1?l.id=p.readVarint():f===2?l.bitmap=p.readBytes():f===3?l.width=p.readVarint():f===4?l.height=p.readVarint():f===5?l.left=p.readSVarint():f===6?l.top=p.readSVarint():f===7&&(l.advance=p.readVarint())}function sde(f){let l=0,p=0;for(let M of f)l+=M.w*M.h,p=Math.max(p,M.w);f.sort((M,O)=>O.h-M.h);let g=[{x:0,y:0,w:Math.max(Math.ceil(Math.sqrt(l/.95)),p),h:1/0}],b=0,I=0;for(let M of f)for(let O=g.length-1;O>=0;O--){let L=g[O];if(!(M.w>L.w||M.h>L.h)){if(M.x=L.x,M.y=L.y,I=Math.max(I,M.y+M.h),b=Math.max(b,M.x+M.w),M.w===L.w&&M.h===L.h){let F=g.pop();F&&O<g.length&&(g[O]=F)}else M.h===L.h?(L.x+=M.w,L.w-=M.w):M.w===L.w?(L.y+=M.h,L.h-=M.h):(g.push({x:L.x+M.w,y:L.y,w:L.w-M.w,h:M.h}),L.y+=M.h,L.h-=M.h);break}}return{w:b,h:I,fill:l/(b*I)||0}}class tV{constructor(l,{pixelRatio:p,version:g,stretchX:b,stretchY:I,content:M,textFitWidth:O,textFitHeight:L}){this.paddedRect=l,this.pixelRatio=p,this.stretchX=b,this.stretchY=I,this.content=M,this.version=g,this.textFitWidth=O,this.textFitHeight=L}get tl(){return[this.paddedRect.x+1,this.paddedRect.y+1]}get br(){return[this.paddedRect.x+this.paddedRect.w-1,this.paddedRect.y+this.paddedRect.h-1]}get tlbr(){return this.tl.concat(this.br)}get displaySize(){return[(this.paddedRect.w-2)/this.pixelRatio,(this.paddedRect.h-2)/this.pixelRatio]}}class lde{constructor(l,p){let g={},b={};this.haveRenderCallbacks=[];let I=[];this.addImages(l,g,I),this.addImages(p,b,I);let{w:M,h:O}=sde(I),L=new Au({width:M||1,height:O||1});for(let F in l){let U=l[F],W=g[F].paddedRect;Au.copy(U.data,L,{x:0,y:0},{x:W.x+1,y:W.y+1},U.data)}for(let F in p){let U=p[F],W=b[F].paddedRect,X=W.x+1,re=W.y+1,ne=U.data.width,ae=U.data.height;Au.copy(U.data,L,{x:0,y:0},{x:X,y:re},U.data),Au.copy(U.data,L,{x:0,y:ae-1},{x:X,y:re-1},{width:ne,height:1}),Au.copy(U.data,L,{x:0,y:0},{x:X,y:re+ae},{width:ne,height:1}),Au.copy(U.data,L,{x:ne-1,y:0},{x:X-1,y:re},{width:1,height:ae}),Au.copy(U.data,L,{x:0,y:0},{x:X+ne,y:re},{width:1,height:ae})}this.image=L,this.iconPositions=g,this.patternPositions=b}addImages(l,p,g){for(let b in l){let I=l[b],M={x:0,y:0,w:I.data.width+2,h:I.data.height+2};g.push(M),p[b]=new tV(M,I),I.hasRenderCallback&&this.haveRenderCallbacks.push(b)}}patchUpdatedImages(l,p){l.dispatchRenderCallbacks(this.haveRenderCallbacks);for(let g in l.updatedImages)this.patchUpdatedImage(this.iconPositions[g],l.getImage(g),p),this.patchUpdatedImage(this.patternPositions[g],l.getImage(g),p)}patchUpdatedImage(l,p,g){if(!l||!p||l.version===p.version)return;l.version=p.version;let[b,I]=l.tl;g.update(p.data,void 0,{x:b,y:I})}}var Bv;fr("ImagePosition",tV),fr("ImageAtlas",lde),o.ao=void 0,(Bv=o.ao||(o.ao={}))[Bv.none=0]="none",Bv[Bv.horizontal=1]="horizontal",Bv[Bv.vertical=2]="vertical",Bv[Bv.horizontalOnly=3]="horizontalOnly";class kI{constructor(){this.scale=1,this.fontStack="",this.imageName=null,this.verticalAlign="bottom"}static forText(l,p,g){let b=new kI;return b.scale=l||1,b.fontStack=p,b.verticalAlign=g||"bottom",b}static forImage(l,p){let g=new kI;return g.imageName=l,g.verticalAlign=p||"bottom",g}}class Qx{constructor(){this.text="",this.sectionIndex=[],this.sections=[],this.imageSectionID=null}static fromFeature(l,p){let g=new Qx;for(let b=0;b<l.sections.length;b++){let I=l.sections[b];I.image?g.addImageSection(I):g.addTextSection(I,p)}return g}length(){return this.text.length}getSection(l){return this.sections[this.sectionIndex[l]]}getSectionIndex(l){return this.sectionIndex[l]}getCharCode(l){return this.text.charCodeAt(l)}verticalizePunctuation(){this.text=function(l){let p="";for(let g=0;g<l.length;g++){let b=l.charCodeAt(g+1)||null,I=l.charCodeAt(g-1)||null;p+=b&&xN(b)&&!LI[l[g+1]]||I&&xN(I)&&!LI[l[g-1]]||!LI[l[g]]?l[g]:LI[l[g]]}return p}(this.text)}trim(){let l=0;for(let g=0;g<this.text.length&&jN[this.text.charCodeAt(g)];g++)l++;let p=this.text.length;for(let g=this.text.length-1;g>=0&&g>=l&&jN[this.text.charCodeAt(g)];g--)p--;this.text=this.text.substring(l,p),this.sectionIndex=this.sectionIndex.slice(l,p)}substring(l,p){let g=new Qx;return g.text=this.text.substring(l,p),g.sectionIndex=this.sectionIndex.slice(l,p),g.sections=this.sections,g}toString(){return this.text}getMaxScale(){return this.sectionIndex.reduce((l,p)=>Math.max(l,this.sections[p].scale),0)}getMaxImageSize(l){let p=0,g=0;for(let b=0;b<this.length();b++){let I=this.getSection(b);if(I.imageName){let M=l[I.imageName];if(!M)continue;let O=M.displaySize;p=Math.max(p,O[0]),g=Math.max(g,O[1])}}return{maxImageWidth:p,maxImageHeight:g}}addTextSection(l,p){this.text+=l.text,this.sections.push(kI.forText(l.scale,l.fontStack||p,l.verticalAlign));let g=this.sections.length-1;for(let b=0;b<l.text.length;++b)this.sectionIndex.push(g)}addImageSection(l){let p=l.image?l.image.name:"";if(p.length===0)return void At("Can't add FormattedSection with an empty image.");let g=this.getNextImageSectionCharCode();g?(this.text+=String.fromCharCode(g),this.sections.push(kI.forImage(p,l.verticalAlign)),this.sectionIndex.push(this.sections.length-1)):At("Reached maximum number of images 6401")}getNextImageSectionCharCode(){return this.imageSectionID?this.imageSectionID>=63743?null:++this.imageSectionID:(this.imageSectionID=57344,this.imageSectionID)}}function RN(f,l,p,g,b,I,M,O,L,F,U,W,X,re,ne){let ae=Qx.fromFeature(f,b),he;W===o.ao.vertical&&ae.verticalizePunctuation();let{processBidirectionalText:Ie,processStyledBidirectionalText:Xe}=np;if(Ie&&ae.sections.length===1){he=[];let st=Ie(ae.toString(),rV(ae,F,I,l,g,re));for(let yt of st){let kt=new Qx;kt.text=yt,kt.sections=ae.sections;for(let tr=0;tr<yt.length;tr++)kt.sectionIndex.push(0);he.push(kt)}}else if(Xe){he=[];let st=Xe(ae.text,ae.sectionIndex,rV(ae,F,I,l,g,re));for(let yt of st){let kt=new Qx;kt.text=yt[0],kt.sectionIndex=yt[1],kt.sections=ae.sections,he.push(kt)}}else he=function(st,yt){let kt=[],tr=st.text,Ht=0;for(let Xt of yt)kt.push(st.substring(Ht,Xt)),Ht=Xt;return Ht<tr.length&&kt.push(st.substring(Ht,tr.length)),kt}(ae,rV(ae,F,I,l,g,re));let je=[],Ve={positionedLines:je,text:ae.toString(),top:U[1],bottom:U[1],left:U[0],right:U[0],writingMode:W,iconsInText:!1,verticalizable:!1};return function(st,yt,kt,tr,Ht,Xt,Or,Kt,Jt,Ct,Jr,un){let Vr=0,wr=0,no=0,Ji=0,Ba=Kt==="right"?1:Kt==="left"?0:.5,$s=us/un,lp=0;for(let zi of Ht){zi.trim();let cs=zi.getMaxScale(),Os={positionedGlyphs:[],lineOffset:0};st.positionedLines[lp]=Os;let Ps=Os.positionedGlyphs,eu=0;if(!zi.length()){wr+=Xt,++lp;continue}let up=Egt(tr,zi,$s);for(let Pu=0;Pu<zi.length();Pu++){let Va=zi.getSection(Pu),fs=zi.getSectionIndex(Pu),ds=zi.getCharCode(Pu),Aa=Sgt(Jt,Jr,ds),xi;if(Va.imageName){if(st.iconsInText=!0,Va.scale=Va.scale*$s,xi=Igt(Va,Aa,cs,up,tr),!xi)continue;eu=Math.max(eu,xi.imageOffset)}else if(xi=Tgt(Va,ds,Aa,up,yt,kt),!xi)continue;let{rect:id,metrics:nw,baselineOffset:ad}=xi;Ps.push({glyph:ds,imageName:Va.imageName,x:Vr,y:wr+ad+-17,vertical:Aa,scale:Va.scale,fontStack:Va.fontStack,sectionIndex:fs,metrics:nw,rect:id}),Aa?(st.verticalizable=!0,Vr+=(Va.imageName?nw.advance:us)*Va.scale+Ct):Vr+=nw.advance*Va.scale+Ct}Ps.length!==0&&(no=Math.max(Vr-Ct,no),Mgt(Ps,0,Ps.length-1,Ba)),Vr=0,Os.lineOffset=Math.max(eu,(cs-1)*us);let ps=Xt*cs+eu;wr+=ps,Ji=Math.max(ps,Ji),++lp}let{horizontalAlign:Ou,verticalAlign:As}=nV(Or);(function(zi,cs,Os,Ps,eu,up,ps,Pu,Va){let fs=(cs-Os)*eu,ds=0;ds=up!==ps?-Pu*Ps- -17:-Ps*Va*ps+.5*ps;for(let Aa of zi)for(let xi of Aa.positionedGlyphs)xi.x+=fs,xi.y+=ds})(st.positionedLines,Ba,Ou,As,no,Ji,Xt,wr,Ht.length),st.top+=-As*wr,st.bottom=st.top+wr,st.left+=-Ou*no,st.right=st.left+no}(Ve,l,p,g,he,M,O,L,W,F,X,ne),!function(st){for(let yt of st)if(yt.positionedGlyphs.length!==0)return!1;return!0}(je)&&Ve}let jN={9:!0,10:!0,11:!0,12:!0,13:!0,32:!0},bgt={10:!0,32:!0,38:!0,41:!0,43:!0,45:!0,47:!0,173:!0,183:!0,8203:!0,8208:!0,8211:!0,8231:!0},xgt={40:!0};function ude(f,l,p,g,b,I){if(l.imageName){let M=g[l.imageName];return M?M.displaySize[0]*l.scale*us/I+b:0}{let M=p[l.fontStack],O=M&&M[f];return O?O.metrics.advance*l.scale+b:0}}function cde(f,l,p,g){let b=Math.pow(f-l,2);return g?f<l?b/2:2*b:b+Math.abs(p)*p}function wgt(f,l,p){let g=0;return f===10&&(g-=1e4),p&&(g+=150),f!==40&&f!==65288||(g+=50),l!==41&&l!==65289||(g+=50),g}function pde(f,l,p,g,b,I){let M=null,O=cde(l,p,b,I);for(let L of g){let F=cde(l-L.x,p,b,I)+L.badness;F<=O&&(M=L,O=F)}return{index:f,x:l,priorBreak:M,badness:O}}function fde(f){return f?fde(f.priorBreak).concat(f.index):[]}function rV(f,l,p,g,b,I){if(!f)return[];let M=[],O=function(W,X,re,ne,ae,he){let Ie=0;for(let Xe=0;Xe<W.length();Xe++){let je=W.getSection(Xe);Ie+=ude(W.getCharCode(Xe),je,ne,ae,X,he)}return Ie/Math.max(1,Math.ceil(Ie/re))}(f,l,p,g,b,I),L=f.text.indexOf("\u200B")>=0,F=0;for(let W=0;W<f.length();W++){let X=f.getSection(W),re=f.getCharCode(W);if(jN[re]||(F+=ude(re,X,g,b,l,I)),W<f.length()-1){let ne=!((U=re)<11904)&&(!!ro["CJK Compatibility Forms"](U)||!!ro["CJK Compatibility"](U)||!!ro["CJK Strokes"](U)||!!ro["CJK Symbols and Punctuation"](U)||!!ro["Enclosed CJK Letters and Months"](U)||!!ro["Halfwidth and Fullwidth Forms"](U)||!!ro["Ideographic Description Characters"](U)||!!ro["Vertical Forms"](U)||dI.test(String.fromCodePoint(U)));(bgt[re]||ne||X.imageName||W!==f.length()-2&&xgt[f.getCharCode(W+1)])&&M.push(pde(W+1,F,O,M,wgt(re,f.getCharCode(W+1),ne&&L),!1))}}var U;return fde(pde(f.length(),F,O,M,0,!0))}function nV(f){let l=.5,p=.5;switch(f){case"right":case"top-right":case"bottom-right":l=1;break;case"left":case"top-left":case"bottom-left":l=0}switch(f){case"bottom":case"bottom-right":case"bottom-left":p=1;break;case"top":case"top-right":case"top-left":p=0}return{horizontalAlign:l,verticalAlign:p}}function Egt(f,l,p){let g=l.getMaxScale()*us,{maxImageWidth:b,maxImageHeight:I}=l.getMaxImageSize(f),M=Math.max(g,I*p);return{verticalLineContentWidth:Math.max(g,b*p),horizontalLineContentHeight:M}}function dde(f){switch(f){case"top":return 0;case"center":return .5;default:return 1}}function Sgt(f,l,p){return!(f===o.ao.horizontal||!l&&!hI(p)||l&&(jN[p]||(g=p,new RegExp("\\p{sc=Arab}","u").test(String.fromCodePoint(g)))));var g}function Tgt(f,l,p,g,b,I){let M=I[f.fontStack],O=function(F,U,W,X){if(F&&F.rect)return F;let re=U[W.fontStack],ne=re&&re[X];return ne?{rect:null,metrics:ne.metrics}:null}(M&&M[l],b,f,l);if(O===null)return null;let L;if(p)L=g.verticalLineContentWidth-f.scale*us;else{let F=dde(f.verticalAlign);L=(g.horizontalLineContentHeight-f.scale*us)*F}return{rect:O.rect,metrics:O.metrics,baselineOffset:L}}function Igt(f,l,p,g,b){let I=b[f.imageName];if(!I)return null;let M=I.paddedRect,O=I.displaySize,L={width:O[0],height:O[1],left:1,top:-3,advance:l?O[1]:O[0]},F;if(l)F=g.verticalLineContentWidth-O[1]*f.scale;else{let U=dde(f.verticalAlign);F=(g.horizontalLineContentHeight-O[1]*f.scale)*U}return{rect:M,metrics:L,baselineOffset:F,imageOffset:(l?O[0]:O[1])*f.scale-us*p}}function Mgt(f,l,p,g){if(g===0)return;let b=f[p],I=(f[p].x+b.metrics.advance*b.scale)*g;for(let M=l;M<=p;M++)f[M].x-=I}function Cgt(f,l,p){let{horizontalAlign:g,verticalAlign:b}=nV(p),I=l[0]-f.displaySize[0]*g,M=l[1]-f.displaySize[1]*b;return{image:f,top:M,bottom:M+f.displaySize[1],left:I,right:I+f.displaySize[0]}}function hde(f){var l,p;let g=f.left,b=f.top,I=f.right-g,M=f.bottom-b,O=(l=f.image.textFitWidth)!==null&&l!==void 0?l:"stretchOrShrink",L=(p=f.image.textFitHeight)!==null&&p!==void 0?p:"stretchOrShrink",F=(f.image.content[2]-f.image.content[0])/(f.image.content[3]-f.image.content[1]);if(L==="proportional"){if(O==="stretchOnly"&&I/M<F||O==="proportional"){let U=Math.ceil(M*F);g*=U/I,I=U}}else if(O==="proportional"&&L==="stretchOnly"&&F!==0&&I/M>F){let U=Math.ceil(I/F);b*=U/M,M=U}return{x1:g,y1:b,x2:g+I,y2:b+M}}function mde(f,l,p,g,b,I){let M=f.image,O;if(M.content){let he=M.content,Ie=M.pixelRatio||1;O=[he[0]/Ie,he[1]/Ie,M.displaySize[0]-he[2]/Ie,M.displaySize[1]-he[3]/Ie]}let L=l.left*I,F=l.right*I,U,W,X,re;p==="width"||p==="both"?(re=b[0]+L-g[3],W=b[0]+F+g[1]):(re=b[0]+(L+F-M.displaySize[0])/2,W=re+M.displaySize[0]);let ne=l.top*I,ae=l.bottom*I;return p==="height"||p==="both"?(U=b[1]+ne-g[0],X=b[1]+ae+g[2]):(U=b[1]+(ne+ae-M.displaySize[1])/2,X=U+M.displaySize[1]),{image:M,top:U,right:W,bottom:X,left:re,collisionPadding:O}}let og=128,Vv=32640;function gde(f,l){let{expression:p}=l;if(p.kind==="constant")return{kind:"constant",layoutSize:p.evaluate(new ni(f+1))};if(p.kind==="source")return{kind:"source"};{let{zoomStops:g,interpolationType:b}=p,I=0;for(;I<g.length&&g[I]<=f;)I++;I=Math.max(0,I-1);let M=I;for(;M<g.length&&g[M]<f+1;)M++;M=Math.min(g.length-1,M);let O=g[I],L=g[M];return p.kind==="composite"?{kind:"composite",minZoom:O,maxZoom:L,interpolationType:b}:{kind:"camera",minZoom:O,maxZoom:L,minSize:p.evaluate(new ni(O)),maxSize:p.evaluate(new ni(L)),interpolationType:b}}}function oV(f,l,p){let g="never",b=f.get(l);return b?g=b:f.get(p)&&(g="always"),g}let Agt=[{name:"a_fade_opacity",components:1,type:"Uint8",offset:0}];function qN(f,l,p,g,b,I,M,O,L,F,U,W,X){let re=O?Math.min(Vv,Math.round(O[0])):0,ne=O?Math.min(Vv,Math.round(O[1])):0;f.emplaceBack(l,p,Math.round(32*g),Math.round(32*b),I,M,(re<<1)+(L?1:0),ne,16*F,16*U,256*W,256*X)}function iV(f,l,p){f.emplaceBack(l.x,l.y,p),f.emplaceBack(l.x,l.y,p),f.emplaceBack(l.x,l.y,p),f.emplaceBack(l.x,l.y,p)}function Ogt(f){for(let l of f.sections)if(SN(l.text))return!0;return!1}class aV{constructor(l){this.layoutVertexArray=new $t,this.indexArray=new Jo,this.programConfigurations=l,this.segments=new Mn,this.dynamicLayoutVertexArray=new Nt,this.opacityVertexArray=new xr,this.hasVisibleVertices=!1,this.placedSymbolArray=new ie}isEmpty(){return this.layoutVertexArray.length===0&&this.indexArray.length===0&&this.dynamicLayoutVertexArray.length===0&&this.opacityVertexArray.length===0}upload(l,p,g,b){this.isEmpty()||(g&&(this.layoutVertexBuffer=l.createVertexBuffer(this.layoutVertexArray,ngt.members),this.indexBuffer=l.createIndexBuffer(this.indexArray,p),this.dynamicLayoutVertexBuffer=l.createVertexBuffer(this.dynamicLayoutVertexArray,ogt.members,!0),this.opacityVertexBuffer=l.createVertexBuffer(this.opacityVertexArray,Agt,!0),this.opacityVertexBuffer.itemSize=1),(g||b)&&this.programConfigurations.upload(l))}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy(),this.dynamicLayoutVertexBuffer.destroy(),this.opacityVertexBuffer.destroy())}}fr("SymbolBuffers",aV);class sV{constructor(l,p,g){this.layoutVertexArray=new l,this.layoutAttributes=p,this.indexArray=new g,this.segments=new Mn,this.collisionVertexArray=new So}upload(l){this.layoutVertexBuffer=l.createVertexBuffer(this.layoutVertexArray,this.layoutAttributes),this.indexBuffer=l.createIndexBuffer(this.indexArray),this.collisionVertexBuffer=l.createVertexBuffer(this.collisionVertexArray,igt.members,!0)}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.segments.destroy(),this.collisionVertexBuffer.destroy())}}fr("CollisionBuffers",sV);class ew{constructor(l){this.collisionBoxArray=l.collisionBoxArray,this.zoom=l.zoom,this.globalState=l.globalState,this.overscaling=l.overscaling,this.layers=l.layers,this.layerIds=this.layers.map(M=>M.id),this.index=l.index,this.pixelRatio=l.pixelRatio,this.sourceLayerIndex=l.sourceLayerIndex,this.hasPattern=!1,this.hasRTLText=!1,this.sortKeyRanges=[],this.collisionCircleArray=[];let p=this.layers[0]._unevaluatedLayout._values;this.textSizeData=gde(this.zoom,p["text-size"]),this.iconSizeData=gde(this.zoom,p["icon-size"]);let g=this.layers[0].layout,b=g.get("symbol-sort-key"),I=g.get("symbol-z-order");this.canOverlap=oV(g,"text-overlap","text-allow-overlap")!=="never"||oV(g,"icon-overlap","icon-allow-overlap")!=="never"||g.get("text-ignore-placement")||g.get("icon-ignore-placement"),this.sortFeaturesByKey=I!=="viewport-y"&&!b.isConstant(),this.sortFeaturesByY=(I==="viewport-y"||I==="auto"&&!this.sortFeaturesByKey)&&this.canOverlap,g.get("symbol-placement")==="point"&&(this.writingModes=g.get("text-writing-mode").map(M=>o.ao[M])),this.stateDependentLayerIds=this.layers.filter(M=>M.isStateDependent()).map(M=>M.id),this.sourceID=l.sourceID}createArrays(){this.text=new aV(new Cu(this.layers,this.zoom,l=>/^text/.test(l))),this.icon=new aV(new Cu(this.layers,this.zoom,l=>/^icon/.test(l))),this.glyphOffsetArray=new ye,this.lineVertexArray=new Me,this.symbolInstances=new ge,this.textAnchorOffsets=new Pe}calculateGlyphDependencies(l,p,g,b,I){for(let M=0;M<l.length;M++)if(p[l.charCodeAt(M)]=!0,(g||b)&&I){let O=LI[l.charAt(M)];O&&(p[O.charCodeAt(0)]=!0)}}populate(l,p,g){let b=this.layers[0],I=b.layout,M=I.get("text-font"),O=I.get("text-field"),L=I.get("icon-image"),F=(O.value.kind!=="constant"||O.value.value instanceof ya&&!O.value.value.isEmpty()||O.value.value.toString().length>0)&&(M.value.kind!=="constant"||M.value.value.length>0),U=L.value.kind!=="constant"||!!L.value.value||Object.keys(L.parameters).length>0,W=I.get("symbol-sort-key");if(this.features=[],!F&&!U)return;let X=p.iconDependencies,re=p.glyphDependencies,ne=p.availableImages,ae=new ni(this.zoom,{globalState:this.globalState});for(let{feature:he,id:Ie,index:Xe,sourceLayerIndex:je}of l){let Ve=b._featureFilter.needGeometry,st=od(he,Ve);if(!b._featureFilter.filter(ae,st,g))continue;let yt,kt;if(Ve||(st.geometry=xh(he)),F){let Ht=b.getValueAndResolveTokens("text-field",st,g,ne),Xt=ya.factory(Ht),Or=this.hasRTLText=this.hasRTLText||Ogt(Xt);(!Or||np.getRTLTextPluginStatus()==="unavailable"||Or&&np.isParsed())&&(yt=sgt(Xt,b,st))}if(U){let Ht=b.getValueAndResolveTokens("icon-image",st,g,ne);kt=Ht instanceof Vs?Ht:Vs.fromString(Ht)}if(!yt&&!kt)continue;let tr=this.sortFeaturesByKey?W.evaluate(st,{},g):void 0;if(this.features.push({id:Ie,text:yt,icon:kt,index:Xe,sourceLayerIndex:je,geometry:st.geometry,properties:he.properties,type:Xx.types[he.type],sortKey:tr}),kt&&(X[kt.name]=!0),yt){let Ht=M.evaluate(st,{},g).join(","),Xt=I.get("text-rotation-alignment")!=="viewport"&&I.get("symbol-placement")!=="point";this.allowVerticalPlacement=this.writingModes&&this.writingModes.indexOf(o.ao.vertical)>=0;for(let Or of yt.sections)if(Or.image)X[Or.image.name]=!0;else{let Kt=jx(yt.toString()),Jt=Or.fontStack||Ht,Ct=re[Jt]=re[Jt]||{};this.calculateGlyphDependencies(Or.text,Ct,Xt,this.allowVerticalPlacement,Kt)}}}I.get("symbol-placement")==="line"&&(this.features=function(he){let Ie={},Xe={},je=[],Ve=0;function st(Ht){je.push(he[Ht]),Ve++}function yt(Ht,Xt,Or){let Kt=Xe[Ht];return delete Xe[Ht],Xe[Xt]=Kt,je[Kt].geometry[0].pop(),je[Kt].geometry[0]=je[Kt].geometry[0].concat(Or[0]),Kt}function kt(Ht,Xt,Or){let Kt=Ie[Xt];return delete Ie[Xt],Ie[Ht]=Kt,je[Kt].geometry[0].shift(),je[Kt].geometry[0]=Or[0].concat(je[Kt].geometry[0]),Kt}function tr(Ht,Xt,Or){let Kt=Or?Xt[0][Xt[0].length-1]:Xt[0][0];return`${Ht}:${Kt.x}:${Kt.y}`}for(let Ht=0;Ht<he.length;Ht++){let Xt=he[Ht],Or=Xt.geometry,Kt=Xt.text?Xt.text.toString():null;if(!Kt){st(Ht);continue}let Jt=tr(Kt,Or),Ct=tr(Kt,Or,!0);if(Jt in Xe&&Ct in Ie&&Xe[Jt]!==Ie[Ct]){let Jr=kt(Jt,Ct,Or),un=yt(Jt,Ct,je[Jr].geometry);delete Ie[Jt],delete Xe[Ct],Xe[tr(Kt,je[un].geometry,!0)]=un,je[Jr].geometry=null}else Jt in Xe?yt(Jt,Ct,Or):Ct in Ie?kt(Jt,Ct,Or):(st(Ht),Ie[Jt]=Ve-1,Xe[Ct]=Ve-1)}return je.filter(Ht=>Ht.geometry)}(this.features)),this.sortFeaturesByKey&&this.features.sort((he,Ie)=>he.sortKey-Ie.sortKey)}update(l,p,g){this.stateDependentLayers.length&&(this.text.programConfigurations.updatePaintArrays(l,p,this.layers,{imagePositions:g,globalState:this.globalState}),this.icon.programConfigurations.updatePaintArrays(l,p,this.layers,{imagePositions:g,globalState:this.globalState}))}isEmpty(){return this.symbolInstances.length===0&&!this.hasRTLText}uploadPending(){return!this.uploaded||this.text.programConfigurations.needsUpload||this.icon.programConfigurations.needsUpload}upload(l){!this.uploaded&&this.hasDebugData()&&(this.textCollisionBox.upload(l),this.iconCollisionBox.upload(l)),this.text.upload(l,this.sortFeaturesByY,!this.uploaded,this.text.programConfigurations.needsUpload),this.icon.upload(l,this.sortFeaturesByY,!this.uploaded,this.icon.programConfigurations.needsUpload),this.uploaded=!0}destroyDebugData(){this.textCollisionBox.destroy(),this.iconCollisionBox.destroy()}destroy(){this.text.destroy(),this.icon.destroy(),this.hasDebugData()&&this.destroyDebugData()}addToLineVertexArray(l,p){let g=this.lineVertexArray.length;if(l.segment!==void 0){let b=l.dist(p[l.segment+1]),I=l.dist(p[l.segment]),M={};for(let O=l.segment+1;O<p.length;O++)M[O]={x:p[O].x,y:p[O].y,tileUnitDistanceFromAnchor:b},O<p.length-1&&(b+=p[O+1].dist(p[O]));for(let O=l.segment||0;O>=0;O--)M[O]={x:p[O].x,y:p[O].y,tileUnitDistanceFromAnchor:I},O>0&&(I+=p[O-1].dist(p[O]));for(let O=0;O<p.length;O++){let L=M[O];this.lineVertexArray.emplaceBack(L.x,L.y,L.tileUnitDistanceFromAnchor)}}return{lineStartIndex:g,lineLength:this.lineVertexArray.length-g}}addSymbols(l,p,g,b,I,M,O,L,F,U,W,X){let re=l.indexArray,ne=l.layoutVertexArray,ae=l.segments.prepareSegment(4*p.length,ne,re,this.canOverlap?M.sortKey:void 0),he=this.glyphOffsetArray.length,Ie=ae.vertexLength,Xe=this.allowVerticalPlacement&&O===o.ao.vertical?Math.PI/2:0,je=M.text&&M.text.sections;for(let Ve=0;Ve<p.length;Ve++){let{tl:st,tr:yt,bl:kt,br:tr,tex:Ht,pixelOffsetTL:Xt,pixelOffsetBR:Or,minFontScaleX:Kt,minFontScaleY:Jt,glyphOffset:Ct,isSDF:Jr,sectionIndex:un}=p[Ve],Vr=ae.vertexLength,wr=Ct[1];qN(ne,L.x,L.y,st.x,wr+st.y,Ht.x,Ht.y,g,Jr,Xt.x,Xt.y,Kt,Jt),qN(ne,L.x,L.y,yt.x,wr+yt.y,Ht.x+Ht.w,Ht.y,g,Jr,Or.x,Xt.y,Kt,Jt),qN(ne,L.x,L.y,kt.x,wr+kt.y,Ht.x,Ht.y+Ht.h,g,Jr,Xt.x,Or.y,Kt,Jt),qN(ne,L.x,L.y,tr.x,wr+tr.y,Ht.x+Ht.w,Ht.y+Ht.h,g,Jr,Or.x,Or.y,Kt,Jt),iV(l.dynamicLayoutVertexArray,L,Xe),re.emplaceBack(Vr,Vr+2,Vr+1),re.emplaceBack(Vr+1,Vr+2,Vr+3),ae.vertexLength+=4,ae.primitiveLength+=2,this.glyphOffsetArray.emplaceBack(Ct[0]),Ve!==p.length-1&&un===p[Ve+1].sectionIndex||l.programConfigurations.populatePaintArrays(ne.length,M,M.index,{imagePositions:{},canonical:X,formattedSection:je&&je[un],globalState:this.globalState})}l.placedSymbolArray.emplaceBack(L.x,L.y,he,this.glyphOffsetArray.length-he,Ie,F,U,L.segment,g?g[0]:0,g?g[1]:0,b[0],b[1],O,0,!1,0,W)}_addCollisionDebugVertex(l,p,g,b,I,M){return p.emplaceBack(0,0),l.emplaceBack(g.x,g.y,b,I,Math.round(M.x),Math.round(M.y))}addCollisionDebugVertices(l,p,g,b,I,M,O){let L=I.segments.prepareSegment(4,I.layoutVertexArray,I.indexArray),F=L.vertexLength,U=I.layoutVertexArray,W=I.collisionVertexArray,X=O.anchorX,re=O.anchorY;this._addCollisionDebugVertex(U,W,M,X,re,new a(l,p)),this._addCollisionDebugVertex(U,W,M,X,re,new a(g,p)),this._addCollisionDebugVertex(U,W,M,X,re,new a(g,b)),this._addCollisionDebugVertex(U,W,M,X,re,new a(l,b)),L.vertexLength+=4;let ne=I.indexArray;ne.emplaceBack(F,F+1),ne.emplaceBack(F+1,F+2),ne.emplaceBack(F+2,F+3),ne.emplaceBack(F+3,F),L.primitiveLength+=4}addDebugCollisionBoxes(l,p,g,b){for(let I=l;I<p;I++){let M=this.collisionBoxArray.get(I);this.addCollisionDebugVertices(M.x1,M.y1,M.x2,M.y2,b?this.textCollisionBox:this.iconCollisionBox,M.anchorPoint,g)}}generateCollisionDebugBuffers(){this.hasDebugData()&&this.destroyDebugData(),this.textCollisionBox=new sV(Pn,nde.members,Go),this.iconCollisionBox=new sV(Pn,nde.members,Go);for(let l=0;l<this.symbolInstances.length;l++){let p=this.symbolInstances.get(l);this.addDebugCollisionBoxes(p.textBoxStartIndex,p.textBoxEndIndex,p,!0),this.addDebugCollisionBoxes(p.verticalTextBoxStartIndex,p.verticalTextBoxEndIndex,p,!0),this.addDebugCollisionBoxes(p.iconBoxStartIndex,p.iconBoxEndIndex,p,!1),this.addDebugCollisionBoxes(p.verticalIconBoxStartIndex,p.verticalIconBoxEndIndex,p,!1)}}_deserializeCollisionBoxesForSymbol(l,p,g,b,I,M,O,L,F){let U={};for(let W=p;W<g;W++){let X=l.get(W);U.textBox={x1:X.x1,y1:X.y1,x2:X.x2,y2:X.y2,anchorPointX:X.anchorPointX,anchorPointY:X.anchorPointY},U.textFeatureIndex=X.featureIndex;break}for(let W=b;W<I;W++){let X=l.get(W);U.verticalTextBox={x1:X.x1,y1:X.y1,x2:X.x2,y2:X.y2,anchorPointX:X.anchorPointX,anchorPointY:X.anchorPointY},U.verticalTextFeatureIndex=X.featureIndex;break}for(let W=M;W<O;W++){let X=l.get(W);U.iconBox={x1:X.x1,y1:X.y1,x2:X.x2,y2:X.y2,anchorPointX:X.anchorPointX,anchorPointY:X.anchorPointY},U.iconFeatureIndex=X.featureIndex;break}for(let W=L;W<F;W++){let X=l.get(W);U.verticalIconBox={x1:X.x1,y1:X.y1,x2:X.x2,y2:X.y2,anchorPointX:X.anchorPointX,anchorPointY:X.anchorPointY},U.verticalIconFeatureIndex=X.featureIndex;break}return U}deserializeCollisionBoxes(l){this.collisionArrays=[];for(let p=0;p<this.symbolInstances.length;p++){let g=this.symbolInstances.get(p);this.collisionArrays.push(this._deserializeCollisionBoxesForSymbol(l,g.textBoxStartIndex,g.textBoxEndIndex,g.verticalTextBoxStartIndex,g.verticalTextBoxEndIndex,g.iconBoxStartIndex,g.iconBoxEndIndex,g.verticalIconBoxStartIndex,g.verticalIconBoxEndIndex))}}hasTextData(){return this.text.segments.get().length>0}hasIconData(){return this.icon.segments.get().length>0}hasDebugData(){return this.textCollisionBox&&this.iconCollisionBox}hasTextCollisionBoxData(){return this.hasDebugData()&&this.textCollisionBox.segments.get().length>0}hasIconCollisionBoxData(){return this.hasDebugData()&&this.iconCollisionBox.segments.get().length>0}addIndicesForPlacedSymbol(l,p){let g=l.placedSymbolArray.get(p),b=g.vertexStartIndex+4*g.numGlyphs;for(let I=g.vertexStartIndex;I<b;I+=4)l.indexArray.emplaceBack(I,I+2,I+1),l.indexArray.emplaceBack(I+1,I+2,I+3)}getSortedSymbolIndexes(l){if(this.sortedAngle===l&&this.symbolInstanceIndexes!==void 0)return this.symbolInstanceIndexes;let p=Math.sin(l),g=Math.cos(l),b=[],I=[],M=[];for(let O=0;O<this.symbolInstances.length;++O){M.push(O);let L=this.symbolInstances.get(O);b.push(0|Math.round(p*L.anchorX+g*L.anchorY)),I.push(L.featureIndex)}return M.sort((O,L)=>b[O]-b[L]||I[L]-I[O]),M}addToSortKeyRanges(l,p){let g=this.sortKeyRanges[this.sortKeyRanges.length-1];g&&g.sortKey===p?g.symbolInstanceEnd=l+1:this.sortKeyRanges.push({sortKey:p,symbolInstanceStart:l,symbolInstanceEnd:l+1})}sortFeatures(l){if(this.sortFeaturesByY&&this.sortedAngle!==l&&!(this.text.segments.get().length>1||this.icon.segments.get().length>1)){this.symbolInstanceIndexes=this.getSortedSymbolIndexes(l),this.sortedAngle=l,this.text.indexArray.clear(),this.icon.indexArray.clear(),this.featureSortOrder=[];for(let p of this.symbolInstanceIndexes){let g=this.symbolInstances.get(p);this.featureSortOrder.push(g.featureIndex),[g.rightJustifiedTextSymbolIndex,g.centerJustifiedTextSymbolIndex,g.leftJustifiedTextSymbolIndex].forEach((b,I,M)=>{b>=0&&M.indexOf(b)===I&&this.addIndicesForPlacedSymbol(this.text,b)}),g.verticalPlacedTextSymbolIndex>=0&&this.addIndicesForPlacedSymbol(this.text,g.verticalPlacedTextSymbolIndex),g.placedIconSymbolIndex>=0&&this.addIndicesForPlacedSymbol(this.icon,g.placedIconSymbolIndex),g.verticalPlacedIconSymbolIndex>=0&&this.addIndicesForPlacedSymbol(this.icon,g.verticalPlacedIconSymbolIndex)}this.text.indexBuffer&&this.text.indexBuffer.updateData(this.text.indexArray),this.icon.indexBuffer&&this.icon.indexBuffer.updateData(this.icon.indexArray)}}}let vde,yde;fr("SymbolBucket",ew,{omit:["layers","collisionBoxArray","features","compareText"]}),ew.MAX_GLYPHS=65535,ew.addDynamicAttributes=iV;var lV={get paint(){return yde=yde||new ml({"icon-opacity":new Kr(Ae.paint_symbol["icon-opacity"]),"icon-color":new Kr(Ae.paint_symbol["icon-color"]),"icon-halo-color":new Kr(Ae.paint_symbol["icon-halo-color"]),"icon-halo-width":new Kr(Ae.paint_symbol["icon-halo-width"]),"icon-halo-blur":new Kr(Ae.paint_symbol["icon-halo-blur"]),"icon-translate":new Sr(Ae.paint_symbol["icon-translate"]),"icon-translate-anchor":new Sr(Ae.paint_symbol["icon-translate-anchor"]),"text-opacity":new Kr(Ae.paint_symbol["text-opacity"]),"text-color":new Kr(Ae.paint_symbol["text-color"],{runtimeType:vn,getOverride:f=>f.textColor,hasOverride:f=>!!f.textColor}),"text-halo-color":new Kr(Ae.paint_symbol["text-halo-color"]),"text-halo-width":new Kr(Ae.paint_symbol["text-halo-width"]),"text-halo-blur":new Kr(Ae.paint_symbol["text-halo-blur"]),"text-translate":new Sr(Ae.paint_symbol["text-translate"]),"text-translate-anchor":new Sr(Ae.paint_symbol["text-translate-anchor"])})},get layout(){return vde=vde||new ml({"symbol-placement":new Sr(Ae.layout_symbol["symbol-placement"]),"symbol-spacing":new Sr(Ae.layout_symbol["symbol-spacing"]),"symbol-avoid-edges":new Sr(Ae.layout_symbol["symbol-avoid-edges"]),"symbol-sort-key":new Kr(Ae.layout_symbol["symbol-sort-key"]),"symbol-z-order":new Sr(Ae.layout_symbol["symbol-z-order"]),"icon-allow-overlap":new Sr(Ae.layout_symbol["icon-allow-overlap"]),"icon-overlap":new Sr(Ae.layout_symbol["icon-overlap"]),"icon-ignore-placement":new Sr(Ae.layout_symbol["icon-ignore-placement"]),"icon-optional":new Sr(Ae.layout_symbol["icon-optional"]),"icon-rotation-alignment":new Sr(Ae.layout_symbol["icon-rotation-alignment"]),"icon-size":new Kr(Ae.layout_symbol["icon-size"]),"icon-text-fit":new Sr(Ae.layout_symbol["icon-text-fit"]),"icon-text-fit-padding":new Sr(Ae.layout_symbol["icon-text-fit-padding"]),"icon-image":new Kr(Ae.layout_symbol["icon-image"]),"icon-rotate":new Kr(Ae.layout_symbol["icon-rotate"]),"icon-padding":new Kr(Ae.layout_symbol["icon-padding"]),"icon-keep-upright":new Sr(Ae.layout_symbol["icon-keep-upright"]),"icon-offset":new Kr(Ae.layout_symbol["icon-offset"]),"icon-anchor":new Kr(Ae.layout_symbol["icon-anchor"]),"icon-pitch-alignment":new Sr(Ae.layout_symbol["icon-pitch-alignment"]),"text-pitch-alignment":new Sr(Ae.layout_symbol["text-pitch-alignment"]),"text-rotation-alignment":new Sr(Ae.layout_symbol["text-rotation-alignment"]),"text-field":new Kr(Ae.layout_symbol["text-field"]),"text-font":new Kr(Ae.layout_symbol["text-font"]),"text-size":new Kr(Ae.layout_symbol["text-size"]),"text-max-width":new Kr(Ae.layout_symbol["text-max-width"]),"text-line-height":new Sr(Ae.layout_symbol["text-line-height"]),"text-letter-spacing":new Kr(Ae.layout_symbol["text-letter-spacing"]),"text-justify":new Kr(Ae.layout_symbol["text-justify"]),"text-radial-offset":new Kr(Ae.layout_symbol["text-radial-offset"]),"text-variable-anchor":new Sr(Ae.layout_symbol["text-variable-anchor"]),"text-variable-anchor-offset":new Kr(Ae.layout_symbol["text-variable-anchor-offset"]),"text-anchor":new Kr(Ae.layout_symbol["text-anchor"]),"text-max-angle":new Sr(Ae.layout_symbol["text-max-angle"]),"text-writing-mode":new Sr(Ae.layout_symbol["text-writing-mode"]),"text-rotate":new Kr(Ae.layout_symbol["text-rotate"]),"text-padding":new Sr(Ae.layout_symbol["text-padding"]),"text-keep-upright":new Sr(Ae.layout_symbol["text-keep-upright"]),"text-transform":new Kr(Ae.layout_symbol["text-transform"]),"text-offset":new Kr(Ae.layout_symbol["text-offset"]),"text-allow-overlap":new Sr(Ae.layout_symbol["text-allow-overlap"]),"text-overlap":new Sr(Ae.layout_symbol["text-overlap"]),"text-ignore-placement":new Sr(Ae.layout_symbol["text-ignore-placement"]),"text-optional":new Sr(Ae.layout_symbol["text-optional"])})}};class _de{constructor(l){if(l.property.overrides===void 0)throw new Error("overrides must be provided to instantiate FormatSectionOverride class");this.type=l.property.overrides?l.property.overrides.runtimeType:la,this.defaultValue=l}evaluate(l){if(l.formattedSection){let p=this.defaultValue.property.overrides;if(p&&p.hasOverride(l.formattedSection))return p.getOverride(l.formattedSection)}return l.feature&&l.featureState?this.defaultValue.evaluate(l.feature,l.featureState):this.defaultValue.property.specification.default}eachChild(l){this.defaultValue.isConstant()||l(this.defaultValue.value._styleExpression.expression)}outputDefined(){return!1}serialize(){return null}}fr("FormatSectionOverride",_de,{omit:["defaultValue"]});class zN extends sc{constructor(l){super(l,lV)}recalculate(l,p){if(super.recalculate(l,p),this.layout.get("icon-rotation-alignment")==="auto"&&(this.layout._values["icon-rotation-alignment"]=this.layout.get("symbol-placement")!=="point"?"map":"viewport"),this.layout.get("text-rotation-alignment")==="auto"&&(this.layout._values["text-rotation-alignment"]=this.layout.get("symbol-placement")!=="point"?"map":"viewport"),this.layout.get("text-pitch-alignment")==="auto"&&(this.layout._values["text-pitch-alignment"]=this.layout.get("text-rotation-alignment")==="map"?"map":"viewport"),this.layout.get("icon-pitch-alignment")==="auto"&&(this.layout._values["icon-pitch-alignment"]=this.layout.get("icon-rotation-alignment")),this.layout.get("symbol-placement")==="point"){let g=this.layout.get("text-writing-mode");if(g){let b=[];for(let I of g)b.indexOf(I)<0&&b.push(I);this.layout._values["text-writing-mode"]=b}else this.layout._values["text-writing-mode"]=["horizontal"]}this._setPaintOverrides()}getValueAndResolveTokens(l,p,g,b){let I=this.layout.get(l).evaluate(p,{},g,b),M=this._unevaluatedLayout._values[l];return M.isDataDriven()||Ax(M.value)||!I?I:function(O,L){return L.replace(/{([^{}]+)}/g,(F,U)=>O&&U in O?String(O[U]):"")}(p.properties,I)}createBucket(l){return new ew(l)}queryRadius(){return 0}queryIntersectsFeature(){throw new Error("Should take a different path in FeatureIndex")}_setPaintOverrides(){for(let l of lV.paint.overridableProperties){if(!zN.hasPaintOverride(this.layout,l))continue;let p=this.paint.get(l),g=new _de(p),b=new tI(g,p.property.specification),I=null;I=p.value.kind==="constant"||p.value.kind==="source"?new O1("source",b):new rI("composite",b,p.value.zoomStops),this.paint._values[l]=new Fp(p.property,I,p.parameters)}}_handleOverridablePaintPropertyUpdate(l,p,g){return!(!this.layout||p.isDataDriven()||g.isDataDriven())&&zN.hasPaintOverride(this.layout,l)}static hasPaintOverride(l,p){let g=l.get("text-field"),b=lV.paint.properties[p],I=!1,M=O=>{for(let L of O)if(b.overrides&&b.overrides.hasOverride(L))return void(I=!0)};if(g.value.kind==="constant"&&g.value.value instanceof ya)M(g.value.value.sections);else if(g.value.kind==="source"||g.value.kind==="composite"){let O=F=>{I||(F instanceof ed&&Xr(F.value)===_n?M(F.value.sections):F instanceof Gm?M(F.sections):F.eachChild(O))},L=g.value;L._styleExpression&&O(L._styleExpression.expression)}return I}}let bde;var Pgt={get paint(){return bde=bde||new ml({"background-color":new Sr(Ae.paint_background["background-color"]),"background-pattern":new gh(Ae.paint_background["background-pattern"]),"background-opacity":new Sr(Ae.paint_background["background-opacity"])})}};class Dgt extends sc{constructor(l){super(l,Pgt)}}let xde;var Ngt={get paint(){return xde=xde||new ml({"raster-opacity":new Sr(Ae.paint_raster["raster-opacity"]),"raster-hue-rotate":new Sr(Ae.paint_raster["raster-hue-rotate"]),"raster-brightness-min":new Sr(Ae.paint_raster["raster-brightness-min"]),"raster-brightness-max":new Sr(Ae.paint_raster["raster-brightness-max"]),"raster-saturation":new Sr(Ae.paint_raster["raster-saturation"]),"raster-contrast":new Sr(Ae.paint_raster["raster-contrast"]),"raster-resampling":new Sr(Ae.paint_raster["raster-resampling"]),"raster-fade-duration":new Sr(Ae.paint_raster["raster-fade-duration"])})}};class Lgt extends sc{constructor(l){super(l,Ngt)}}class kgt extends sc{constructor(l){super(l,{}),this.onAdd=p=>{this.implementation.onAdd&&this.implementation.onAdd(p,p.painter.context.gl)},this.onRemove=p=>{this.implementation.onRemove&&this.implementation.onRemove(p,p.painter.context.gl)},this.implementation=l}is3D(){return this.implementation.renderingMode==="3d"}hasOffscreenPass(){return this.implementation.prerender!==void 0}recalculate(){}updateTransitions(){}hasTransition(){return!1}serialize(){throw new Error("Custom layers cannot be serialized")}}class Rgt{constructor(l){this._methodToThrottle=l,this._triggered=!1,typeof MessageChannel!="undefined"&&(this._channel=new MessageChannel,this._channel.port2.onmessage=()=>{this._triggered=!1,this._methodToThrottle()})}trigger(){this._triggered||(this._triggered=!0,this._channel?this._channel.port1.postMessage(!0):setTimeout(()=>{this._triggered=!1,this._methodToThrottle()},0))}remove(){delete this._channel,this._methodToThrottle=()=>{}}}let jgt={once:!0},uV=6371008.8;class Gv{constructor(l,p){if(isNaN(l)||isNaN(p))throw new Error(`Invalid LngLat object: (${l}, ${p})`);if(this.lng=+l,this.lat=+p,this.lat>90||this.lat<-90)throw new Error("Invalid LngLat latitude value: must be between -90 and 90")}wrap(){return new Gv(We(this.lng,-180,180),this.lat)}toArray(){return[this.lng,this.lat]}toString(){return`LngLat(${this.lng}, ${this.lat})`}distanceTo(l){let p=Math.PI/180,g=this.lat*p,b=l.lat*p,I=Math.sin(g)*Math.sin(b)+Math.cos(g)*Math.cos(b)*Math.cos((l.lng-this.lng)*p);return uV*Math.acos(Math.min(I,1))}static convert(l){if(l instanceof Gv)return l;if(Array.isArray(l)&&(l.length===2||l.length===3))return new Gv(Number(l[0]),Number(l[1]));if(!Array.isArray(l)&&typeof l=="object"&&l!==null)return new Gv(Number("lng"in l?l.lng:l.lon),Number(l.lat));throw new Error("`LngLatLike` argument must be specified as a LngLat instance, an object {lng: <lng>, lat: <lat>}, an object {lon: <lng>, lat: <lat>}, or an array of [<lng>, <lat>]")}}let wde=2*Math.PI*uV;function Ede(f){return wde*Math.cos(f*Math.PI/180)}function Sde(f){return(180+f)/360}function Tde(f){return(180-180/Math.PI*Math.log(Math.tan(Math.PI/4+f*Math.PI/360)))/360}function Ide(f,l){return f/Ede(l)}function cV(f){return 360/Math.PI*Math.atan(Math.exp((180-360*f)*Math.PI/180))-90}function Mde(f,l){return f*Ede(cV(l))}class RI{constructor(l,p,g=0){this.x=+l,this.y=+p,this.z=+g}static fromLngLat(l,p=0){let g=Gv.convert(l);return new RI(Sde(g.lng),Tde(g.lat),Ide(p,g.lat))}toLngLat(){return new Gv(360*this.x-180,cV(this.y))}toAltitude(){return Mde(this.z,this.y)}meterInMercatorCoordinateUnits(){return 1/wde*(l=cV(this.y),1/Math.cos(l*Math.PI/180));var l}}function Cde(f,l,p){var g=2*Math.PI*6378137/256/Math.pow(2,p);return[f*g-2*Math.PI*6378137/2,l*g-2*Math.PI*6378137/2]}class pV{constructor(l,p,g){if(!function(b,I,M){return!(b<0||b>25||M<0||M>=Math.pow(2,b)||I<0||I>=Math.pow(2,b))}(l,p,g))throw new Error(`x=${p}, y=${g}, z=${l} outside of bounds. 0<=x<${Math.pow(2,l)}, 0<=y<${Math.pow(2,l)} 0<=z<=25 `);this.z=l,this.x=p,this.y=g,this.key=tw(0,l,l,p,g)}equals(l){return this.z===l.z&&this.x===l.x&&this.y===l.y}url(l,p,g){let b=(M=this.y,O=this.z,L=Cde(256*(I=this.x),256*(M=Math.pow(2,O)-M-1),O),F=Cde(256*(I+1),256*(M+1),O),L[0]+","+L[1]+","+F[0]+","+F[1]);var I,M,O,L,F;let U=function(W,X,re){let ne,ae="";for(let he=W;he>0;he--)ne=1<<he-1,ae+=(X&ne?1:0)+(re&ne?2:0);return ae}(this.z,this.x,this.y);return l[(this.x+this.y)%l.length].replace(/{prefix}/g,(this.x%16).toString(16)+(this.y%16).toString(16)).replace(/{z}/g,String(this.z)).replace(/{x}/g,String(this.x)).replace(/{y}/g,String(g==="tms"?Math.pow(2,this.z)-this.y-1:this.y)).replace(/{ratio}/g,p>1?"@2x":"").replace(/{quadkey}/g,U).replace(/{bbox-epsg-3857}/g,b)}isChildOf(l){let p=this.z-l.z;return p>0&&l.x===this.x>>p&&l.y===this.y>>p}getTilePoint(l){let p=Math.pow(2,this.z);return new a((l.x*p-this.x)*ct,(l.y*p-this.y)*ct)}toString(){return`${this.z}/${this.x}/${this.y}`}}class Ade{constructor(l,p){this.wrap=l,this.canonical=p,this.key=tw(l,p.z,p.z,p.x,p.y)}}class sp{constructor(l,p,g,b,I){if(this.terrainRttPosMatrix32f=null,l<g)throw new Error(`overscaledZ should be >= z; overscaledZ = ${l}; z = ${g}`);this.overscaledZ=l,this.wrap=p,this.canonical=new pV(g,+b,+I),this.key=tw(p,l,g,b,I)}clone(){return new sp(this.overscaledZ,this.wrap,this.canonical.z,this.canonical.x,this.canonical.y)}equals(l){return this.overscaledZ===l.overscaledZ&&this.wrap===l.wrap&&this.canonical.equals(l.canonical)}scaledTo(l){if(l>this.overscaledZ)throw new Error(`targetZ > this.overscaledZ; targetZ = ${l}; overscaledZ = ${this.overscaledZ}`);let p=this.canonical.z-l;return l>this.canonical.z?new sp(l,this.wrap,this.canonical.z,this.canonical.x,this.canonical.y):new sp(l,this.wrap,l,this.canonical.x>>p,this.canonical.y>>p)}calculateScaledKey(l,p){if(l>this.overscaledZ)throw new Error(`targetZ > this.overscaledZ; targetZ = ${l}; overscaledZ = ${this.overscaledZ}`);let g=this.canonical.z-l;return l>this.canonical.z?tw(this.wrap*+p,l,this.canonical.z,this.canonical.x,this.canonical.y):tw(this.wrap*+p,l,l,this.canonical.x>>g,this.canonical.y>>g)}isChildOf(l){if(l.wrap!==this.wrap)return!1;let p=this.canonical.z-l.canonical.z;return l.overscaledZ===0||l.overscaledZ<this.overscaledZ&&l.canonical.x===this.canonical.x>>p&&l.canonical.y===this.canonical.y>>p}children(l){if(this.overscaledZ>=l)return[new sp(this.overscaledZ+1,this.wrap,this.canonical.z,this.canonical.x,this.canonical.y)];let p=this.canonical.z+1,g=2*this.canonical.x,b=2*this.canonical.y;return[new sp(p,this.wrap,p,g,b),new sp(p,this.wrap,p,g+1,b),new sp(p,this.wrap,p,g,b+1),new sp(p,this.wrap,p,g+1,b+1)]}isLessThan(l){return this.wrap<l.wrap||!(this.wrap>l.wrap)&&(this.overscaledZ<l.overscaledZ||!(this.overscaledZ>l.overscaledZ)&&(this.canonical.x<l.canonical.x||!(this.canonical.x>l.canonical.x)&&this.canonical.y<l.canonical.y))}wrapped(){return new sp(this.overscaledZ,0,this.canonical.z,this.canonical.x,this.canonical.y)}unwrapTo(l){return new sp(this.overscaledZ,l,this.canonical.z,this.canonical.x,this.canonical.y)}overscaleFactor(){return Math.pow(2,this.overscaledZ-this.canonical.z)}toUnwrapped(){return new Ade(this.wrap,this.canonical)}toString(){return`${this.overscaledZ}/${this.canonical.x}/${this.canonical.y}`}getTilePoint(l){return this.canonical.getTilePoint(new RI(l.x-this.wrap,l.y))}}function tw(f,l,p,g,b){(f*=2)<0&&(f=-1*f-1);let I=1<<p;return(I*I*f+I*b+g).toString(36)+p.toString(36)+l.toString(36)}function jI(f,l){return l?f.properties[l]:f.id}fr("CanonicalTileID",pV),fr("OverscaledTileID",sp,{omit:["terrainRttPosMatrix32f"]});class V1{constructor(){this.minX=1/0,this.maxX=-1/0,this.minY=1/0,this.maxY=-1/0}extend(l){return this.minX=Math.min(this.minX,l.x),this.minY=Math.min(this.minY,l.y),this.maxX=Math.max(this.maxX,l.x),this.maxY=Math.max(this.maxY,l.y),this}expandBy(l){return this.minX-=l,this.minY-=l,this.maxX+=l,this.maxY+=l,(this.minX>this.maxX||this.minY>this.maxY)&&(this.minX=1/0,this.maxX=-1/0,this.minY=1/0,this.maxY=-1/0),this}shrinkBy(l){return this.expandBy(-l)}map(l){let p=new V1;return p.extend(l(new a(this.minX,this.minY))),p.extend(l(new a(this.maxX,this.minY))),p.extend(l(new a(this.minX,this.maxY))),p.extend(l(new a(this.maxX,this.maxY))),p}static fromPoints(l){let p=new V1;for(let g of l)p.extend(g);return p}contains(l){return l.x>=this.minX&&l.x<=this.maxX&&l.y>=this.minY&&l.y<=this.maxY}empty(){return this.minX>this.maxX}width(){return this.maxX-this.minX}height(){return this.maxY-this.minY}covers(l){return!this.empty()&&!l.empty()&&l.minX>=this.minX&&l.maxX<=this.maxX&&l.minY>=this.minY&&l.maxY<=this.maxY}intersects(l){return!this.empty()&&!l.empty()&&l.minX<=this.maxX&&l.maxX>=this.minX&&l.minY<=this.maxY&&l.maxY>=this.minY}}class Ode{constructor(l){this._stringToNumber={},this._numberToString=[];for(let p=0;p<l.length;p++){let g=l[p];this._stringToNumber[g]=p,this._numberToString[p]=g}}encode(l){return this._stringToNumber[l]}decode(l){if(l>=this._numberToString.length)throw new Error(`Out of bounds. Index requested n=${l} can't be >= this._numberToString.length ${this._numberToString.length}`);return this._numberToString[l]}}class Pde{constructor(l,p,g,b,I){this.type="Feature",this._vectorTileFeature=l,l._z=p,l._x=g,l._y=b,this.properties=l.properties,this.id=I}get geometry(){return this._geometry===void 0&&(this._geometry=this._vectorTileFeature.toGeoJSON(this._vectorTileFeature._x,this._vectorTileFeature._y,this._vectorTileFeature._z).geometry),this._geometry}set geometry(l){this._geometry=l}toJSON(){let l={geometry:this.geometry};for(let p in this)p!=="_geometry"&&p!=="_vectorTileFeature"&&(l[p]=this[p]);return l}}class Dde{constructor(l,p){this.tileID=l,this.x=l.canonical.x,this.y=l.canonical.y,this.z=l.canonical.z,this.grid=new j1(ct,16,0),this.grid3D=new j1(ct,16,0),this.featureIndexArray=new He,this.promoteId=p}insert(l,p,g,b,I,M){let O=this.featureIndexArray.length;this.featureIndexArray.emplaceBack(g,b,I);let L=M?this.grid3D:this.grid;for(let F=0;F<p.length;F++){let U=p[F],W=[1/0,1/0,-1/0,-1/0];for(let X=0;X<U.length;X++){let re=U[X];W[0]=Math.min(W[0],re.x),W[1]=Math.min(W[1],re.y),W[2]=Math.max(W[2],re.x),W[3]=Math.max(W[3],re.y)}W[0]<ct&&W[1]<ct&&W[2]>=0&&W[3]>=0&&L.insert(O,W[0],W[1],W[2],W[3])}}loadVTLayers(){return this.vtLayers||(this.vtLayers=new Yfe(new eV(this.rawTileData)).layers,this.sourceLayerCoder=new Ode(this.vtLayers?Object.keys(this.vtLayers).sort():["_geojsonTileLayer"])),this.vtLayers}query(l,p,g,b){this.loadVTLayers();let I=l.params,M=ct/l.tileSize/l.scale,O=Km(I.filter),L=l.queryGeometry,F=l.queryPadding*M,U=V1.fromPoints(L),W=this.grid.query(U.minX-F,U.minY-F,U.maxX+F,U.maxY+F),X=V1.fromPoints(l.cameraQueryGeometry).expandBy(F),re=this.grid3D.query(X.minX,X.minY,X.maxX,X.maxY,(he,Ie,Xe,je)=>function(Ve,st,yt,kt,tr){for(let Xt of Ve)if(st<=Xt.x&&yt<=Xt.y&&kt>=Xt.x&&tr>=Xt.y)return!0;let Ht=[new a(st,yt),new a(st,tr),new a(kt,tr),new a(kt,yt)];if(Ve.length>2){for(let Xt of Ht)if($x(Ve,Xt))return!0}for(let Xt=0;Xt<Ve.length-1;Xt++)if(mmt(Ve[Xt],Ve[Xt+1],Ht))return!0;return!1}(l.cameraQueryGeometry,he-F,Ie-F,Xe+F,je+F));for(let he of re)W.push(he);W.sort(qgt);let ne={},ae;for(let he=0;he<W.length;he++){let Ie=W[he];if(Ie===ae)continue;ae=Ie;let Xe=this.featureIndexArray.get(Ie),je=null;this.loadMatchingFeature(ne,Xe.bucketIndex,Xe.sourceLayerIndex,Xe.featureIndex,O,I.layers,I.availableImages,p,g,b,(Ve,st,yt)=>(je||(je=xh(Ve)),st.queryIntersectsFeature({queryGeometry:L,feature:Ve,featureState:yt,geometry:je,zoom:this.z,transform:l.transform,pixelsToTileUnits:M,pixelPosMatrix:l.pixelPosMatrix,unwrappedTileID:this.tileID.toUnwrapped(),getElevation:l.getElevation})))}return ne}loadMatchingFeature(l,p,g,b,I,M,O,L,F,U,W){let X=this.bucketLayerIDs[p];if(M&&!X.some(he=>M.has(he)))return;let re=this.sourceLayerCoder.decode(g),ne=this.vtLayers[re].feature(b);if(I.needGeometry){let he=od(ne,!0);if(!I.filter(new ni(this.tileID.overscaledZ),he,this.tileID.canonical))return}else if(!I.filter(new ni(this.tileID.overscaledZ),ne))return;let ae=this.getId(ne,re);for(let he=0;he<X.length;he++){let Ie=X[he];if(M&&!M.has(Ie))continue;let Xe=L[Ie];if(!Xe)continue;let je={};ae&&U&&(je=U.getState(Xe.sourceLayer||"_geojsonTileLayer",ae));let Ve=Ne({},F[Ie]);Ve.paint=Nde(Ve.paint,Xe.paint,ne,je,O),Ve.layout=Nde(Ve.layout,Xe.layout,ne,je,O);let st=!W||W(ne,Xe,je);if(!st)continue;let yt=new Pde(ne,this.z,this.x,this.y,ae);yt.layer=Ve;let kt=l[Ie];kt===void 0&&(kt=l[Ie]=[]),kt.push({featureIndex:b,feature:yt,intersectionZ:st})}}lookupSymbolFeatures(l,p,g,b,I,M,O,L){let F={};this.loadVTLayers();let U=Km(I);for(let W of l)this.loadMatchingFeature(F,g,b,W,U,M,O,L,p);return F}hasLayer(l){for(let p of this.bucketLayerIDs)for(let g of p)if(l===g)return!0;return!1}getId(l,p){var g;let b=l.id;return this.promoteId&&(b=l.properties[typeof this.promoteId=="string"?this.promoteId:this.promoteId[p]],typeof b=="boolean"&&(b=Number(b)),b===void 0&&!((g=l.properties)===null||g===void 0)&&g.cluster&&this.promoteId&&(b=Number(l.properties.cluster_id))),b}}function Nde(f,l,p,g,b){return Ge(f,(I,M)=>{let O=l instanceof zx?l.get(M):null;return O&&O.evaluate?O.evaluate(p,g,b):O})}function qgt(f,l){return l-f}function Lde(f,l,p,g,b){let I=[];for(let M=0;M<f.length;M++){let O=f[M],L;for(let F=0;F<O.length-1;F++){let U=O[F],W=O[F+1];U.x<l&&W.x<l||(U.x<l?U=new a(l,U.y+(l-U.x)/(W.x-U.x)*(W.y-U.y))._round():W.x<l&&(W=new a(l,U.y+(l-U.x)/(W.x-U.x)*(W.y-U.y))._round()),U.y<p&&W.y<p||(U.y<p?U=new a(U.x+(p-U.y)/(W.y-U.y)*(W.x-U.x),p)._round():W.y<p&&(W=new a(U.x+(p-U.y)/(W.y-U.y)*(W.x-U.x),p)._round()),U.x>=g&&W.x>=g||(U.x>=g?U=new a(g,U.y+(g-U.x)/(W.x-U.x)*(W.y-U.y))._round():W.x>=g&&(W=new a(g,U.y+(g-U.x)/(W.x-U.x)*(W.y-U.y))._round()),U.y>=b&&W.y>=b||(U.y>=b?U=new a(U.x+(b-U.y)/(W.y-U.y)*(W.x-U.x),b)._round():W.y>=b&&(W=new a(U.x+(b-U.y)/(W.y-U.y)*(W.x-U.x),b)._round()),L&&U.equals(L[L.length-1])||(L=[U],I.push(L)),L.push(W)))))}}return I}fr("FeatureIndex",Dde,{omit:["rawTileData","sourceLayerCoder"]});class Hv extends a{constructor(l,p,g,b){super(l,p),this.angle=g,b!==void 0&&(this.segment=b)}clone(){return new Hv(this.x,this.y,this.angle,this.segment)}}function kde(f,l,p,g,b){if(l.segment===void 0||p===0)return!0;let I=l,M=l.segment+1,O=0;for(;O>-p/2;){if(M--,M<0)return!1;O-=f[M].dist(I),I=f[M]}O+=f[M].dist(f[M+1]),M++;let L=[],F=0;for(;O<p/2;){let U=f[M],W=f[M+1];if(!W)return!1;let X=f[M-1].angleTo(U)-U.angleTo(W);for(X=Math.abs((X+3*Math.PI)%(2*Math.PI)-Math.PI),L.push({distance:O,angleDelta:X}),F+=X;O-L[0].distance>g;)F-=L.shift().angleDelta;if(F>b)return!1;M++,O+=U.dist(W)}return!0}function Rde(f){let l=0;for(let p=0;p<f.length-1;p++)l+=f[p].dist(f[p+1]);return l}function jde(f,l,p){return f?.6*l*p:0}function qde(f,l){return Math.max(f?f.right-f.left:0,l?l.right-l.left:0)}function zgt(f,l,p,g,b,I){let M=jde(p,b,I),O=qde(p,g)*I,L=0,F=Rde(f)/2;for(let U=0;U<f.length-1;U++){let W=f[U],X=f[U+1],re=W.dist(X);if(L+re>F){let ne=(F-L)/re,ae=qp.number(W.x,X.x,ne),he=qp.number(W.y,X.y,ne),Ie=new Hv(ae,he,X.angleTo(W),U);return Ie._round(),!M||kde(f,Ie,O,M,l)?Ie:void 0}L+=re}}function Fgt(f,l,p,g,b,I,M,O,L){let F=jde(g,I,M),U=qde(g,b),W=U*M,X=f[0].x===0||f[0].x===L||f[0].y===0||f[0].y===L;return l-W<l/4&&(l=W+l/4),zde(f,X?l/2*O%l:(U/2+2*I)*M*O%l,l,F,p,W,X,!1,L)}function zde(f,l,p,g,b,I,M,O,L){let F=I/2,U=Rde(f),W=0,X=l-p,re=[];for(let ne=0;ne<f.length-1;ne++){let ae=f[ne],he=f[ne+1],Ie=ae.dist(he),Xe=he.angleTo(ae);for(;X+p<W+Ie;){X+=p;let je=(X-W)/Ie,Ve=qp.number(ae.x,he.x,je),st=qp.number(ae.y,he.y,je);if(Ve>=0&&Ve<L&&st>=0&&st<L&&X-F>=0&&X+F<=U){let yt=new Hv(Ve,st,Xe,ne);yt._round(),g&&!kde(f,yt,I,g,b)||re.push(yt)}}W+=Ie}return O||re.length||M||(re=zde(f,W/2,p,g,b,I,M,!0,L)),re}function Fde(f,l,p,g){let b=[],I=f.image,M=I.pixelRatio,O=I.paddedRect.w-2,L=I.paddedRect.h-2,F={x1:f.left,y1:f.top,x2:f.right,y2:f.bottom},U=I.stretchX||[[0,O]],W=I.stretchY||[[0,L]],X=(Ct,Jr)=>Ct+Jr[1]-Jr[0],re=U.reduce(X,0),ne=W.reduce(X,0),ae=O-re,he=L-ne,Ie=0,Xe=re,je=0,Ve=ne,st=0,yt=ae,kt=0,tr=he;if(I.content&&g){let Ct=I.content,Jr=Ct[2]-Ct[0],un=Ct[3]-Ct[1];(I.textFitWidth||I.textFitHeight)&&(F=hde(f)),Ie=FN(U,0,Ct[0]),je=FN(W,0,Ct[1]),Xe=FN(U,Ct[0],Ct[2]),Ve=FN(W,Ct[1],Ct[3]),st=Ct[0]-Ie,kt=Ct[1]-je,yt=Jr-Xe,tr=un-Ve}let Ht=F.x1,Xt=F.y1,Or=F.x2-Ht,Kt=F.y2-Xt,Jt=(Ct,Jr,un,Vr)=>{let wr=UN(Ct.stretch-Ie,Xe,Or,Ht),no=BN(Ct.fixed-st,yt,Ct.stretch,re),Ji=UN(Jr.stretch-je,Ve,Kt,Xt),Ba=BN(Jr.fixed-kt,tr,Jr.stretch,ne),$s=UN(un.stretch-Ie,Xe,Or,Ht),lp=BN(un.fixed-st,yt,un.stretch,re),Ou=UN(Vr.stretch-je,Ve,Kt,Xt),As=BN(Vr.fixed-kt,tr,Vr.stretch,ne),zi=new a(wr,Ji),cs=new a($s,Ji),Os=new a($s,Ou),Ps=new a(wr,Ou),eu=new a(no/M,Ba/M),up=new a(lp/M,As/M),ps=l*Math.PI/180;if(ps){let fs=Math.sin(ps),ds=Math.cos(ps),Aa=[ds,-fs,fs,ds];zi._matMult(Aa),cs._matMult(Aa),Ps._matMult(Aa),Os._matMult(Aa)}let Pu=Ct.stretch+Ct.fixed,Va=Jr.stretch+Jr.fixed;return{tl:zi,tr:cs,bl:Ps,br:Os,tex:{x:I.paddedRect.x+1+Pu,y:I.paddedRect.y+1+Va,w:un.stretch+un.fixed-Pu,h:Vr.stretch+Vr.fixed-Va},writingMode:void 0,glyphOffset:[0,0],sectionIndex:0,pixelOffsetTL:eu,pixelOffsetBR:up,minFontScaleX:yt/M/Or,minFontScaleY:tr/M/Kt,isSDF:p}};if(g&&(I.stretchX||I.stretchY)){let Ct=Ude(U,ae,re),Jr=Ude(W,he,ne);for(let un=0;un<Ct.length-1;un++){let Vr=Ct[un],wr=Ct[un+1];for(let no=0;no<Jr.length-1;no++)b.push(Jt(Vr,Jr[no],wr,Jr[no+1]))}}else b.push(Jt({fixed:0,stretch:-1},{fixed:0,stretch:-1},{fixed:0,stretch:O+1},{fixed:0,stretch:L+1}));return b}function FN(f,l,p){let g=0;for(let b of f)g+=Math.max(l,Math.min(p,b[1]))-Math.max(l,Math.min(p,b[0]));return g}function Ude(f,l,p){let g=[{fixed:-1,stretch:0}];for(let[b,I]of f){let M=g[g.length-1];g.push({fixed:b-M.stretch,stretch:M.stretch}),g.push({fixed:b-M.stretch,stretch:M.stretch+(I-b)})}return g.push({fixed:l+1,stretch:p}),g}function UN(f,l,p,g){return f/l*p+g}function BN(f,l,p,g){return f-l*p/g}fr("Anchor",Hv);class VN{constructor(l,p,g,b,I,M,O,L,F,U){var W;if(this.boxStartIndex=l.length,F){let X=M.top,re=M.bottom,ne=M.collisionPadding;ne&&(X-=ne[1],re+=ne[3]);let ae=re-X;ae>0&&(ae=Math.max(10,ae),this.circleDiameter=ae)}else{let X=!((W=M.image)===null||W===void 0)&&W.content&&(M.image.textFitWidth||M.image.textFitHeight)?hde(M):{x1:M.left,y1:M.top,x2:M.right,y2:M.bottom};X.y1=X.y1*O-L[0],X.y2=X.y2*O+L[2],X.x1=X.x1*O-L[3],X.x2=X.x2*O+L[1];let re=M.collisionPadding;if(re&&(X.x1-=re[0]*O,X.y1-=re[1]*O,X.x2+=re[2]*O,X.y2+=re[3]*O),U){let ne=new a(X.x1,X.y1),ae=new a(X.x2,X.y1),he=new a(X.x1,X.y2),Ie=new a(X.x2,X.y2),Xe=U*Math.PI/180;ne._rotate(Xe),ae._rotate(Xe),he._rotate(Xe),Ie._rotate(Xe),X.x1=Math.min(ne.x,ae.x,he.x,Ie.x),X.x2=Math.max(ne.x,ae.x,he.x,Ie.x),X.y1=Math.min(ne.y,ae.y,he.y,Ie.y),X.y2=Math.max(ne.y,ae.y,he.y,Ie.y)}l.emplaceBack(p.x,p.y,X.x1,X.y1,X.x2,X.y2,g,b,I)}this.boxEndIndex=l.length}}class Ugt{constructor(l=[],p=(g,b)=>g<b?-1:g>b?1:0){if(this.data=l,this.length=this.data.length,this.compare=p,this.length>0)for(let g=(this.length>>1)-1;g>=0;g--)this._down(g)}push(l){this.data.push(l),this._up(this.length++)}pop(){if(this.length===0)return;let l=this.data[0],p=this.data.pop();return--this.length>0&&(this.data[0]=p,this._down(0)),l}peek(){return this.data[0]}_up(l){let{data:p,compare:g}=this,b=p[l];for(;l>0;){let I=l-1>>1,M=p[I];if(g(b,M)>=0)break;p[l]=M,l=I}p[l]=b}_down(l){let{data:p,compare:g}=this,b=this.length>>1,I=p[l];for(;l<b;){let M=1+(l<<1),O=M+1;if(O<this.length&&g(p[O],p[M])<0&&(M=O),g(p[M],I)>=0)break;p[l]=p[M],l=M}p[l]=I}}function Bgt(f,l=1,p=!1){let g=V1.fromPoints(f[0]),b=Math.min(g.width(),g.height()),I=b/2,M=new Ugt([],Vgt),{minX:O,minY:L,maxX:F,maxY:U}=g;if(b===0)return new a(O,L);for(let re=O;re<F;re+=b)for(let ne=L;ne<U;ne+=b)M.push(new rw(re+I,ne+I,I,f));let W=function(re){let ne=0,ae=0,he=0,Ie=re[0];for(let Xe=0,je=Ie.length,Ve=je-1;Xe<je;Ve=Xe++){let st=Ie[Xe],yt=Ie[Ve],kt=st.x*yt.y-yt.x*st.y;ae+=(st.x+yt.x)*kt,he+=(st.y+yt.y)*kt,ne+=3*kt}return new rw(ae/ne,he/ne,0,re)}(f),X=M.length;for(;M.length;){let re=M.pop();(re.d>W.d||!W.d)&&(W=re,p&&console.log("found best %d after %d probes",Math.round(1e4*re.d)/1e4,X)),re.max-W.d<=l||(I=re.h/2,M.push(new rw(re.p.x-I,re.p.y-I,I,f)),M.push(new rw(re.p.x+I,re.p.y-I,I,f)),M.push(new rw(re.p.x-I,re.p.y+I,I,f)),M.push(new rw(re.p.x+I,re.p.y+I,I,f)),X+=4)}return p&&(console.log(`num probes: ${X}`),console.log(`best distance: ${W.d}`)),W.p}function Vgt(f,l){return l.max-f.max}function rw(f,l,p,g){this.p=new a(f,l),this.h=p,this.d=function(b,I){let M=!1,O=1/0;for(let L=0;L<I.length;L++){let F=I[L];for(let U=0,W=F.length,X=W-1;U<W;X=U++){let re=F[U],ne=F[X];re.y>b.y!=ne.y>b.y&&b.x<(ne.x-re.x)*(b.y-re.y)/(ne.y-re.y)+re.x&&(M=!M),O=Math.min(O,Tfe(b,re,ne))}}return(M?1:-1)*Math.sqrt(O)}(this.p,g),this.max=this.d+this.h*Math.SQRT2}var Ws;o.aE=void 0,(Ws=o.aE||(o.aE={}))[Ws.center=1]="center",Ws[Ws.left=2]="left",Ws[Ws.right=3]="right",Ws[Ws.top=4]="top",Ws[Ws.bottom=5]="bottom",Ws[Ws["top-left"]=6]="top-left",Ws[Ws["top-right"]=7]="top-right",Ws[Ws["bottom-left"]=8]="bottom-left",Ws[Ws["bottom-right"]=9]="bottom-right";let fV=Number.POSITIVE_INFINITY;function Bde(f,l){return l[1]!==fV?function(p,g,b){let I=0,M=0;switch(g=Math.abs(g),b=Math.abs(b),p){case"top-right":case"top-left":case"top":M=b-7;break;case"bottom-right":case"bottom-left":case"bottom":M=7-b}switch(p){case"top-right":case"bottom-right":case"right":I=-g;break;case"top-left":case"bottom-left":case"left":I=g}return[I,M]}(f,l[0],l[1]):function(p,g){let b=0,I=0;g<0&&(g=0);let M=g/Math.SQRT2;switch(p){case"top-right":case"top-left":I=M-7;break;case"bottom-right":case"bottom-left":I=7-M;break;case"bottom":I=7-g;break;case"top":I=g-7}switch(p){case"top-right":case"bottom-right":b=-M;break;case"top-left":case"bottom-left":b=M;break;case"left":b=g;break;case"right":b=-g}return[b,I]}(f,l[0])}function Vde(f,l,p){var g;let b=f.layout,I=(g=b.get("text-variable-anchor-offset"))===null||g===void 0?void 0:g.evaluate(l,{},p);if(I){let O=I.values,L=[];for(let F=0;F<O.length;F+=2){let U=L[F]=O[F],W=O[F+1].map(X=>X*us);U.startsWith("top")?W[1]-=7:U.startsWith("bottom")&&(W[1]+=7),L[F+1]=W}return new hl(L)}let M=b.get("text-variable-anchor");if(M){let O;O=f._unevaluatedLayout.getValue("text-radial-offset")!==void 0?[b.get("text-radial-offset").evaluate(l,{},p)*us,fV]:b.get("text-offset").evaluate(l,{},p).map(F=>F*us);let L=[];for(let F of M)L.push(F,Bde(F,O));return new hl(L)}return null}function dV(f){switch(f){case"right":case"top-right":case"bottom-right":return"right";case"left":case"top-left":case"bottom-left":return"left"}return"center"}function Ggt(f,l,p,g,b,I,M,O,L,F,U,W){let X=I.textMaxSize.evaluate(l,{});X===void 0&&(X=M);let re=f.layers[0].layout,ne=re.get("icon-offset").evaluate(l,{},U),ae=Hde(p.horizontal),he=M/24,Ie=f.tilePixelRatio*he,Xe=f.tilePixelRatio*X/24,je=f.tilePixelRatio*O,Ve=f.tilePixelRatio*re.get("symbol-spacing"),st=re.get("text-padding")*f.tilePixelRatio,yt=function(un,Vr,wr,no=1){let Ji=un.get("icon-padding").evaluate(Vr,{},wr),Ba=Ji&&Ji.values;return[Ba[0]*no,Ba[1]*no,Ba[2]*no,Ba[3]*no]}(re,l,U,f.tilePixelRatio),kt=re.get("text-max-angle")/180*Math.PI,tr=re.get("text-rotation-alignment")!=="viewport"&&re.get("symbol-placement")!=="point",Ht=re.get("icon-rotation-alignment")==="map"&&re.get("symbol-placement")!=="point",Xt=re.get("symbol-placement"),Or=Ve/2,Kt=re.get("icon-text-fit"),Jt;g&&Kt!=="none"&&(f.allowVerticalPlacement&&p.vertical&&(Jt=mde(g,p.vertical,Kt,re.get("icon-text-fit-padding"),ne,he)),ae&&(g=mde(g,ae,Kt,re.get("icon-text-fit-padding"),ne,he)));let Ct=U?W.line.getGranularityForZoomLevel(U.z):1,Jr=(un,Vr)=>{Vr.x<0||Vr.x>=ct||Vr.y<0||Vr.y>=ct||function(wr,no,Ji,Ba,$s,lp,Ou,As,zi,cs,Os,Ps,eu,up,ps,Pu,Va,fs,ds,Aa,xi,id,nw,ad,$gt){let ow=wr.addToLineVertexArray(no,Ji),G1,iw,aw,sw,Zde=0,Kde=0,Xde=0,Jde=0,xV=-1,wV=-1,ig={},Qde=Fv("");if(wr.allowVerticalPlacement&&Ba.vertical){let yl=As.layout.get("text-rotate").evaluate(xi,{},ad)+90;aw=new VN(zi,no,cs,Os,Ps,Ba.vertical,eu,up,ps,yl),Ou&&(sw=new VN(zi,no,cs,Os,Ps,Ou,Va,fs,ps,yl))}if($s){let yl=As.layout.get("icon-rotate").evaluate(xi,{}),cp=As.layout.get("icon-text-fit")!=="none",H1=Fde($s,yl,nw,cp),ld=Ou?Fde(Ou,yl,nw,cp):void 0;iw=new VN(zi,no,cs,Os,Ps,$s,Va,fs,!1,yl),Zde=4*H1.length;let W1=wr.iconSizeData,wh=null;W1.kind==="source"?(wh=[og*As.layout.get("icon-size").evaluate(xi,{})],wh[0]>Vv&&At(`${wr.layerIds[0]}: Value for "icon-size" is >= 255. Reduce your "icon-size".`)):W1.kind==="composite"&&(wh=[og*id.compositeIconSizes[0].evaluate(xi,{},ad),og*id.compositeIconSizes[1].evaluate(xi,{},ad)],(wh[0]>Vv||wh[1]>Vv)&&At(`${wr.layerIds[0]}: Value for "icon-size" is >= 255. Reduce your "icon-size".`)),wr.addSymbols(wr.icon,H1,wh,Aa,ds,xi,o.ao.none,no,ow.lineStartIndex,ow.lineLength,-1,ad),xV=wr.icon.placedSymbolArray.length-1,ld&&(Kde=4*ld.length,wr.addSymbols(wr.icon,ld,wh,Aa,ds,xi,o.ao.vertical,no,ow.lineStartIndex,ow.lineLength,-1,ad),wV=wr.icon.placedSymbolArray.length-1)}let ehe=Object.keys(Ba.horizontal);for(let yl of ehe){let cp=Ba.horizontal[yl];if(!G1){Qde=Fv(cp.text);let ld=As.layout.get("text-rotate").evaluate(xi,{},ad);G1=new VN(zi,no,cs,Os,Ps,cp,eu,up,ps,ld)}let H1=cp.positionedLines.length===1;if(Xde+=Gde(wr,no,cp,lp,As,ps,xi,Pu,ow,Ba.vertical?o.ao.horizontal:o.ao.horizontalOnly,H1?ehe:[yl],ig,xV,id,ad),H1)break}Ba.vertical&&(Jde+=Gde(wr,no,Ba.vertical,lp,As,ps,xi,Pu,ow,o.ao.vertical,["vertical"],ig,wV,id,ad));let Ygt=G1?G1.boxStartIndex:wr.collisionBoxArray.length,Zgt=G1?G1.boxEndIndex:wr.collisionBoxArray.length,Kgt=aw?aw.boxStartIndex:wr.collisionBoxArray.length,Xgt=aw?aw.boxEndIndex:wr.collisionBoxArray.length,Jgt=iw?iw.boxStartIndex:wr.collisionBoxArray.length,Qgt=iw?iw.boxEndIndex:wr.collisionBoxArray.length,evt=sw?sw.boxStartIndex:wr.collisionBoxArray.length,tvt=sw?sw.boxEndIndex:wr.collisionBoxArray.length,sd=-1,HN=(yl,cp)=>yl&&yl.circleDiameter?Math.max(yl.circleDiameter,cp):cp;sd=HN(G1,sd),sd=HN(aw,sd),sd=HN(iw,sd),sd=HN(sw,sd);let the=sd>-1?1:0;the&&(sd*=$gt/us),wr.glyphOffsetArray.length>=ew.MAX_GLYPHS&&At("Too many glyphs being rendered in a tile. See https://github.com/mapbox/mapbox-gl-js/issues/2907"),xi.sortKey!==void 0&&wr.addToSortKeyRanges(wr.symbolInstances.length,xi.sortKey);let rvt=Vde(As,xi,ad),[nvt,ovt]=function(yl,cp){let H1=yl.length,ld=cp==null?void 0:cp.values;if((ld==null?void 0:ld.length)>0)for(let W1=0;W1<ld.length;W1+=2){let wh=ld[W1+1];yl.emplaceBack(o.aE[ld[W1]],wh[0],wh[1])}return[H1,yl.length]}(wr.textAnchorOffsets,rvt);wr.symbolInstances.emplaceBack(no.x,no.y,ig.right>=0?ig.right:-1,ig.center>=0?ig.center:-1,ig.left>=0?ig.left:-1,ig.vertical||-1,xV,wV,Qde,Ygt,Zgt,Kgt,Xgt,Jgt,Qgt,evt,tvt,cs,Xde,Jde,Zde,Kde,the,0,eu,sd,nvt,ovt)}(f,Vr,un,p,g,b,Jt,f.layers[0],f.collisionBoxArray,l.index,l.sourceLayerIndex,f.index,Ie,[st,st,st,st],tr,L,je,yt,Ht,ne,l,I,F,U,M)};if(Xt==="line")for(let un of Lde(l.geometry,0,0,ct,ct)){let Vr=B1(un,Ct),wr=Fgt(Vr,Ve,kt,p.vertical||ae,g,24,Xe,f.overscaling,ct);for(let no of wr)ae&&Hgt(f,ae.text,Or,no)||Jr(Vr,no)}else if(Xt==="line-center"){for(let un of l.geometry)if(un.length>1){let Vr=B1(un,Ct),wr=zgt(Vr,kt,p.vertical||ae,g,24,Xe);wr&&Jr(Vr,wr)}}else if(l.type==="Polygon")for(let un of T1(l.geometry,0)){let Vr=Bgt(un,16);Jr(B1(un[0],Ct,!0),new Hv(Vr.x,Vr.y,0))}else if(l.type==="LineString")for(let un of l.geometry){let Vr=B1(un,Ct);Jr(Vr,new Hv(Vr[0].x,Vr[0].y,0))}else if(l.type==="Point")for(let un of l.geometry)for(let Vr of un)Jr([Vr],new Hv(Vr.x,Vr.y,0))}function Gde(f,l,p,g,b,I,M,O,L,F,U,W,X,re,ne){let ae=function(Xe,je,Ve,st,yt,kt,tr,Ht){let Xt=st.layout.get("text-rotate").evaluate(kt,{})*Math.PI/180,Or=[];for(let Kt of je.positionedLines)for(let Jt of Kt.positionedGlyphs){if(!Jt.rect)continue;let Ct=Jt.rect||{},Jr=4,un=!0,Vr=1,wr=0,no=(yt||Ht)&&Jt.vertical,Ji=Jt.metrics.advance*Jt.scale/2;if(Ht&&je.verticalizable&&(wr=Kt.lineOffset/2-(Jt.imageName?-(us-Jt.metrics.width*Jt.scale)/2:(Jt.scale-1)*us)),Jt.imageName){let fs=tr[Jt.imageName];un=fs.sdf,Vr=fs.pixelRatio,Jr=1/Vr}let Ba=yt?[Jt.x+Ji,Jt.y]:[0,0],$s=yt?[0,0]:[Jt.x+Ji+Ve[0],Jt.y+Ve[1]-wr],lp=[0,0];no&&(lp=$s,$s=[0,0]);let Ou=Jt.metrics.isDoubleResolution?2:1,As=(Jt.metrics.left-Jr)*Jt.scale-Ji+$s[0],zi=(-Jt.metrics.top-Jr)*Jt.scale+$s[1],cs=As+Ct.w/Ou*Jt.scale/Vr,Os=zi+Ct.h/Ou*Jt.scale/Vr,Ps=new a(As,zi),eu=new a(cs,zi),up=new a(As,Os),ps=new a(cs,Os);if(no){let fs=new a(-Ji,Ji- -17),ds=-Math.PI/2,Aa=12-Ji,xi=new a(22-Aa,-(Jt.imageName?Aa:0)),id=new a(...lp);Ps._rotateAround(ds,fs)._add(xi)._add(id),eu._rotateAround(ds,fs)._add(xi)._add(id),up._rotateAround(ds,fs)._add(xi)._add(id),ps._rotateAround(ds,fs)._add(xi)._add(id)}if(Xt){let fs=Math.sin(Xt),ds=Math.cos(Xt),Aa=[ds,-fs,fs,ds];Ps._matMult(Aa),eu._matMult(Aa),up._matMult(Aa),ps._matMult(Aa)}let Pu=new a(0,0),Va=new a(0,0);Or.push({tl:Ps,tr:eu,bl:up,br:ps,tex:Ct,writingMode:je.writingMode,glyphOffset:Ba,sectionIndex:Jt.sectionIndex,isSDF:un,pixelOffsetTL:Pu,pixelOffsetBR:Va,minFontScaleX:0,minFontScaleY:0})}return Or}(0,p,O,b,I,M,g,f.allowVerticalPlacement),he=f.textSizeData,Ie=null;he.kind==="source"?(Ie=[og*b.layout.get("text-size").evaluate(M,{})],Ie[0]>Vv&&At(`${f.layerIds[0]}: Value for "text-size" is >= 255. Reduce your "text-size".`)):he.kind==="composite"&&(Ie=[og*re.compositeTextSizes[0].evaluate(M,{},ne),og*re.compositeTextSizes[1].evaluate(M,{},ne)],(Ie[0]>Vv||Ie[1]>Vv)&&At(`${f.layerIds[0]}: Value for "text-size" is >= 255. Reduce your "text-size".`)),f.addSymbols(f.text,ae,Ie,O,I,M,F,l,L.lineStartIndex,L.lineLength,X,ne);for(let Xe of U)W[Xe]=f.text.placedSymbolArray.length-1;return 4*ae.length}function Hde(f){for(let l in f)return f[l];return null}function Hgt(f,l,p,g){let b=f.compareText;if(l in b){let I=b[l];for(let M=I.length-1;M>=0;M--)if(g.dist(I[M])<p)return!0}else b[l]=[];return b[l].push(g),!1}let Wde=[Int8Array,Uint8Array,Uint8ClampedArray,Int16Array,Uint16Array,Int32Array,Uint32Array,Float32Array,Float64Array];class hV{static from(l){if(!(l instanceof ArrayBuffer))throw new Error("Data must be an instance of ArrayBuffer.");let[p,g]=new Uint8Array(l,0,2);if(p!==219)throw new Error("Data does not appear to be in a KDBush format.");let b=g>>4;if(b!==1)throw new Error(`Got v${b} data when expected v1.`);let I=Wde[15&g];if(!I)throw new Error("Unrecognized array type.");let[M]=new Uint16Array(l,2,1),[O]=new Uint32Array(l,4,1);return new hV(O,M,I,l)}constructor(l,p=64,g=Float64Array,b){if(isNaN(l)||l<0)throw new Error(`Unpexpected numItems value: ${l}.`);this.numItems=+l,this.nodeSize=Math.min(Math.max(+p,2),65535),this.ArrayType=g,this.IndexArrayType=l<65536?Uint16Array:Uint32Array;let I=Wde.indexOf(this.ArrayType),M=2*l*this.ArrayType.BYTES_PER_ELEMENT,O=l*this.IndexArrayType.BYTES_PER_ELEMENT,L=(8-O%8)%8;if(I<0)throw new Error(`Unexpected typed array class: ${g}.`);b&&b instanceof ArrayBuffer?(this.data=b,this.ids=new this.IndexArrayType(this.data,8,l),this.coords=new this.ArrayType(this.data,8+O+L,2*l),this._pos=2*l,this._finished=!0):(this.data=new ArrayBuffer(8+M+O+L),this.ids=new this.IndexArrayType(this.data,8,l),this.coords=new this.ArrayType(this.data,8+O+L,2*l),this._pos=0,this._finished=!1,new Uint8Array(this.data,0,2).set([219,16+I]),new Uint16Array(this.data,2,1)[0]=p,new Uint32Array(this.data,4,1)[0]=l)}add(l,p){let g=this._pos>>1;return this.ids[g]=g,this.coords[this._pos++]=l,this.coords[this._pos++]=p,g}finish(){let l=this._pos>>1;if(l!==this.numItems)throw new Error(`Added ${l} items when expected ${this.numItems}.`);return mV(this.ids,this.coords,this.nodeSize,0,this.numItems-1,0),this._finished=!0,this}range(l,p,g,b){if(!this._finished)throw new Error("Data not yet indexed - call index.finish().");let{ids:I,coords:M,nodeSize:O}=this,L=[0,I.length-1,0],F=[];for(;L.length;){let U=L.pop()||0,W=L.pop()||0,X=L.pop()||0;if(W-X<=O){for(let he=X;he<=W;he++){let Ie=M[2*he],Xe=M[2*he+1];Ie>=l&&Ie<=g&&Xe>=p&&Xe<=b&&F.push(I[he])}continue}let re=X+W>>1,ne=M[2*re],ae=M[2*re+1];ne>=l&&ne<=g&&ae>=p&&ae<=b&&F.push(I[re]),(U===0?l<=ne:p<=ae)&&(L.push(X),L.push(re-1),L.push(1-U)),(U===0?g>=ne:b>=ae)&&(L.push(re+1),L.push(W),L.push(1-U))}return F}within(l,p,g){if(!this._finished)throw new Error("Data not yet indexed - call index.finish().");let{ids:b,coords:I,nodeSize:M}=this,O=[0,b.length-1,0],L=[],F=g*g;for(;O.length;){let U=O.pop()||0,W=O.pop()||0,X=O.pop()||0;if(W-X<=M){for(let he=X;he<=W;he++)Yde(I[2*he],I[2*he+1],l,p)<=F&&L.push(b[he]);continue}let re=X+W>>1,ne=I[2*re],ae=I[2*re+1];Yde(ne,ae,l,p)<=F&&L.push(b[re]),(U===0?l-g<=ne:p-g<=ae)&&(O.push(X),O.push(re-1),O.push(1-U)),(U===0?l+g>=ne:p+g>=ae)&&(O.push(re+1),O.push(W),O.push(1-U))}return L}}function mV(f,l,p,g,b,I){if(b-g<=p)return;let M=g+b>>1;$de(f,l,M,g,b,I),mV(f,l,p,g,M-1,1-I),mV(f,l,p,M+1,b,1-I)}function $de(f,l,p,g,b,I){for(;b>g;){if(b-g>600){let F=b-g+1,U=p-g+1,W=Math.log(F),X=.5*Math.exp(2*W/3),re=.5*Math.sqrt(W*X*(F-X)/F)*(U-F/2<0?-1:1);$de(f,l,p,Math.max(g,Math.floor(p-U*X/F+re)),Math.min(b,Math.floor(p+(F-U)*X/F+re)),I)}let M=l[2*p+I],O=g,L=b;for(qI(f,l,g,p),l[2*b+I]>M&&qI(f,l,g,b);O<L;){for(qI(f,l,O,L),O++,L--;l[2*O+I]<M;)O++;for(;l[2*L+I]>M;)L--}l[2*g+I]===M?qI(f,l,g,L):(L++,qI(f,l,L,b)),L<=p&&(g=L+1),p<=L&&(b=L-1)}}function qI(f,l,p,g){gV(f,p,g),gV(l,2*p,2*g),gV(l,2*p+1,2*g+1)}function gV(f,l,p){let g=f[l];f[l]=f[p],f[p]=g}function Yde(f,l,p,g){let b=f-p,I=l-g;return b*b+I*I}var vV;o.cx=void 0,(vV=o.cx||(o.cx={})).create="create",vV.load="load",vV.fullLoad="fullLoad";let GN=null,zI=[],yV=1e3/60,_V="loadTime",bV="fullLoadTime",Wgt={mark(f){performance.mark(f)},frame(f){let l=f;GN!=null&&zI.push(l-GN),GN=l},clearMetrics(){GN=null,zI=[],performance.clearMeasures(_V),performance.clearMeasures(bV);for(let f in o.cx)performance.clearMarks(o.cx[f])},getPerformanceMetrics(){performance.measure(_V,o.cx.create,o.cx.load),performance.measure(bV,o.cx.create,o.cx.fullLoad);let f=performance.getEntriesByName(_V)[0].duration,l=performance.getEntriesByName(bV)[0].duration,p=zI.length,g=1/(zI.reduce((I,M)=>I+M,0)/p/1e3),b=zI.filter(I=>I>yV).reduce((I,M)=>I+(M-yV)/yV,0);return{loadTime:f,fullLoadTime:l,fps:g,percentDroppedFrames:b/(p+b)*100,totalFrames:p}}};o.$=ct,o.A=k,o.B=function([f,l,p]){return l+=90,l*=Math.PI/180,p*=Math.PI/180,{x:f*Math.cos(l)*Math.sin(p),y:f*Math.sin(l)*Math.sin(p),z:f*Math.cos(p)}},o.C=qp,o.D=Sr,o.E=gt,o.F=ni,o.G=k1,o.H=function(f){if(qt==null){let l=f.navigator?f.navigator.userAgent:null;qt=!!f.safari||!(!l||!(/\b(iPad|iPhone|iPod)\b/.test(l)||l.match("Safari")&&!l.match("Chrome")))}return qt},o.I=tV,o.J=class{constructor(f,l){this.target=f,this.mapId=l,this.resolveRejects={},this.tasks={},this.taskQueue=[],this.abortControllers={},this.messageHandlers={},this.invoker=new Rgt(()=>this.process()),this.subscription=Dr(this.target,"message",p=>this.receive(p),!1),this.globalScope=Yt(self)?f:window}registerMessageHandler(f,l){this.messageHandlers[f]=l}sendAsync(f,l){return new Promise((p,g)=>{let b=Math.round(1e18*Math.random()).toString(36).substring(0,10),I=l?Dr(l.signal,"abort",()=>{I==null||I.unsubscribe(),delete this.resolveRejects[b];let L={id:b,type:"<cancel>",origin:location.origin,targetMapId:f.targetMapId,sourceMapId:this.mapId};this.target.postMessage(L)},jgt):null;this.resolveRejects[b]={resolve:L=>{I==null||I.unsubscribe(),p(L)},reject:L=>{I==null||I.unsubscribe(),g(L)}};let M=[],O=Object.assign(Object.assign({},f),{id:b,sourceMapId:this.mapId,origin:location.origin,data:Lv(f.data,M)});this.target.postMessage(O,{transfer:M})})}receive(f){let l=f.data,p=l.id;if(!(l.origin!=="file://"&&location.origin!=="file://"&&l.origin!=="resource://android"&&location.origin!=="resource://android"&&l.origin!==location.origin||l.targetMapId&&this.mapId!==l.targetMapId)){if(l.type==="<cancel>"){delete this.tasks[p];let g=this.abortControllers[p];return delete this.abortControllers[p],void(g&&g.abort())}if(Yt(self)||l.mustQueue)return this.tasks[p]=l,this.taskQueue.push(p),void this.invoker.trigger();this.processTask(p,l)}}process(){if(this.taskQueue.length===0)return;let f=this.taskQueue.shift(),l=this.tasks[f];delete this.tasks[f],this.taskQueue.length>0&&this.invoker.trigger(),l&&this.processTask(f,l)}processTask(f,l){return i(this,void 0,void 0,function*(){if(l.type==="<response>"){let b=this.resolveRejects[f];return delete this.resolveRejects[f],b?void(l.error?b.reject(Qm(l.error)):b.resolve(Qm(l.data))):void 0}if(!this.messageHandlers[l.type])return void this.completeTask(f,new Error(`Could not find a registered handler for ${l.type}, map ID: ${this.mapId}, available handlers: ${Object.keys(this.messageHandlers).join(", ")}`));let p=Qm(l.data),g=new AbortController;this.abortControllers[f]=g;try{let b=yield this.messageHandlers[l.type](l.sourceMapId,p,g);this.completeTask(f,null,b)}catch(b){this.completeTask(f,b)}})}completeTask(f,l,p){let g=[];delete this.abortControllers[f];let b={id:f,type:"<response>",sourceMapId:this.mapId,origin:location.origin,error:l?Lv(l):null,data:Lv(p,g)};this.target.postMessage(b,{transfer:g})}remove(){this.invoker.remove(),this.subscription.unsubscribe()}},o.K=ue,o.L=function(){var f=new k(16);return k!=Float32Array&&(f[1]=0,f[2]=0,f[3]=0,f[4]=0,f[6]=0,f[7]=0,f[8]=0,f[9]=0,f[11]=0,f[12]=0,f[13]=0,f[14]=0),f[0]=1,f[5]=1,f[10]=1,f[15]=1,f},o.M=function(f,l,p){var g,b,I,M,O,L,F,U,W,X,re,ne,ae=p[0],he=p[1],Ie=p[2];return l===f?(f[12]=l[0]*ae+l[4]*he+l[8]*Ie+l[12],f[13]=l[1]*ae+l[5]*he+l[9]*Ie+l[13],f[14]=l[2]*ae+l[6]*he+l[10]*Ie+l[14],f[15]=l[3]*ae+l[7]*he+l[11]*Ie+l[15]):(b=l[1],I=l[2],M=l[3],O=l[4],L=l[5],F=l[6],U=l[7],W=l[8],X=l[9],re=l[10],ne=l[11],f[0]=g=l[0],f[1]=b,f[2]=I,f[3]=M,f[4]=O,f[5]=L,f[6]=F,f[7]=U,f[8]=W,f[9]=X,f[10]=re,f[11]=ne,f[12]=g*ae+O*he+W*Ie+l[12],f[13]=b*ae+L*he+X*Ie+l[13],f[14]=I*ae+F*he+re*Ie+l[14],f[15]=M*ae+U*he+ne*Ie+l[15]),f},o.N=function(f,l,p){var g=p[0],b=p[1],I=p[2];return f[0]=l[0]*g,f[1]=l[1]*g,f[2]=l[2]*g,f[3]=l[3]*g,f[4]=l[4]*b,f[5]=l[5]*b,f[6]=l[6]*b,f[7]=l[7]*b,f[8]=l[8]*I,f[9]=l[9]*I,f[10]=l[10]*I,f[11]=l[11]*I,f[12]=l[12],f[13]=l[13],f[14]=l[14],f[15]=l[15],f},o.O=function(f,l,p){var g=l[0],b=l[1],I=l[2],M=l[3],O=l[4],L=l[5],F=l[6],U=l[7],W=l[8],X=l[9],re=l[10],ne=l[11],ae=l[12],he=l[13],Ie=l[14],Xe=l[15],je=p[0],Ve=p[1],st=p[2],yt=p[3];return f[0]=je*g+Ve*O+st*W+yt*ae,f[1]=je*b+Ve*L+st*X+yt*he,f[2]=je*I+Ve*F+st*re+yt*Ie,f[3]=je*M+Ve*U+st*ne+yt*Xe,f[4]=(je=p[4])*g+(Ve=p[5])*O+(st=p[6])*W+(yt=p[7])*ae,f[5]=je*b+Ve*L+st*X+yt*he,f[6]=je*I+Ve*F+st*re+yt*Ie,f[7]=je*M+Ve*U+st*ne+yt*Xe,f[8]=(je=p[8])*g+(Ve=p[9])*O+(st=p[10])*W+(yt=p[11])*ae,f[9]=je*b+Ve*L+st*X+yt*he,f[10]=je*I+Ve*F+st*re+yt*Ie,f[11]=je*M+Ve*U+st*ne+yt*Xe,f[12]=(je=p[12])*g+(Ve=p[13])*O+(st=p[14])*W+(yt=p[15])*ae,f[13]=je*b+Ve*L+st*X+yt*he,f[14]=je*I+Ve*F+st*re+yt*Ie,f[15]=je*M+Ve*U+st*ne+yt*Xe,f},o.P=a,o.Q=function(f,l){let p={};for(let g=0;g<l.length;g++){let b=l[g];b in f&&(p[b]=f[b])}return p},o.R=Au,o.S=Gv,o.T=GB,o.U=Tde,o.V=Sde,o.W=P,o.X=j,o.Y=jr,o.Z=sp,o._=i,o.a=J,o.a$=me,o.a0=function(f,l){var p,g,b,I,M;if(!f)return l!=null?l:{};if(!l)return f;let O=Object.assign({},f);if(l.removeAll&&(O={removeAll:!0}),l.remove){let L=new Set(l.remove);O.add&&(O.add=O.add.filter(U=>!L.has(U.id))),O.update&&(O.update=O.update.filter(U=>!L.has(U.id)));let F=new Set(((p=f.add)!==null&&p!==void 0?p:[]).map(U=>U.id));l.remove=l.remove.filter(U=>!F.has(U))}if(l.remove){let L=new Set(O.remove?O.remove.concat(l.remove):l.remove);O.remove=Array.from(L.values())}if(l.add){let L=O.add?O.add.concat(l.add):l.add,F=new Map(L.map(U=>[U.id,U]));O.add=Array.from(F.values())}if(l.update){let L=new Map((g=O.update)===null||g===void 0?void 0:g.map(F=>[F.id,F]));for(let F of l.update){let U=(b=L.get(F.id))!==null&&b!==void 0?b:{id:F.id};F.newGeometry&&(U.newGeometry=F.newGeometry),F.addOrUpdateProperties&&(U.addOrUpdateProperties=((I=U.addOrUpdateProperties)!==null&&I!==void 0?I:[]).concat(F.addOrUpdateProperties)),F.removeProperties&&(U.removeProperties=((M=U.removeProperties)!==null&&M!==void 0?M:[]).concat(F.removeProperties)),F.removeAllProperties&&(U.removeAllProperties=!0),L.set(F.id,U)}O.update=Array.from(L.values())}return O.remove&&O.add&&(O.remove=O.remove.filter(L=>O.add.findIndex(F=>F.id===L)===-1)),O},o.a1=RI,o.a2=V1,o.a3=25,o.a4=pV,o.a5=f=>{let l=window.document.createElement("video");return l.muted=!0,new Promise(p=>{l.onloadstart=()=>{p(l)};for(let g of f){let b=window.document.createElement("source");nt(g)||(l.crossOrigin="Anonymous"),b.src=g,l.appendChild(b)}})},o.a6=Rt,o.a7=function(){return Ke++},o.a8=$,o.a9=ew,o.aA=function(f){let l=1/0,p=1/0,g=-1/0,b=-1/0;for(let I of f)l=Math.min(l,I.x),p=Math.min(p,I.y),g=Math.max(g,I.x),b=Math.max(b,I.y);return[l,p,g,b]},o.aB=us,o.aC=qe,o.aD=function(f,l,p,g,b=!1){if(!p[0]&&!p[1])return[0,0];let I=b?g==="map"?-f.bearingInRadians:0:g==="viewport"?f.bearingInRadians:0;if(I){let M=Math.sin(I),O=Math.cos(I);p=[p[0]*O-p[1]*M,p[0]*M+p[1]*O]}return[b?p[0]:qe(l,p[0],f.zoom),b?p[1]:qe(l,p[1],f.zoom)]},o.aF=oV,o.aG=dV,o.aH=nV,o.aI=hV,o.aJ=ca,o.aK=LN,o.aL=Le,o.aM=Mn,o.aN=Jo,o.aO=We,o.aP=Je,o.aQ=Mde,o.aR=se,o.aS=te,o.aT=function(f){var l=new k(3);return l[0]=f[0],l[1]=f[1],l[2]=f[2],l},o.aU=function(f,l,p){return f[0]=l[0]-p[0],f[1]=l[1]-p[1],f[2]=l[2]-p[2],f},o.aV=function(f,l){var p=l[0],g=l[1],b=l[2],I=p*p+g*g+b*b;return I>0&&(I=1/Math.sqrt(I)),f[0]=l[0]*I,f[1]=l[1]*I,f[2]=l[2]*I,f},o.aW=le,o.aX=function(f,l){return f[0]*l[0]+f[1]*l[1]+f[2]*l[2]},o.aY=function(f,l,p){return f[0]=l[0]*p[0],f[1]=l[1]*p[1],f[2]=l[2]*p[2],f[3]=l[3]*p[3],f},o.aZ=K,o.a_=function(f,l,p){let g=l[0]*p[0]+l[1]*p[1]+l[2]*p[2];return g===0?null:(-(f[0]*p[0]+f[1]*p[1]+f[2]*p[2])-p[3])/g},o.aa=Km,o.ab=od,o.ac=Pde,o.ad=function(f){let l={};if(f.replace(/(?:^|(?:\s*\,\s*))([^\x00-\x20\(\)<>@\,;\:\\"\/\[\]\?\=\{\}\x7F]+)(?:\=(?:([^\x00-\x20\(\)<>@\,;\:\\"\/\[\]\?\=\{\}\x7F]+)|(?:\"((?:[^"\\]|\\.)*)\")))?/g,(p,g,b,I)=>{let M=b||I;return l[g]=!M||M.toLowerCase(),""}),l["max-age"]){let p=parseInt(l["max-age"],10);isNaN(p)?delete l["max-age"]:l["max-age"]=p}return l},o.ae=ke,o.af=function(f){return Math.pow(2,f)},o.ag=V,o.ah=ot,o.ai=85.051129,o.aj=Ide,o.ak=function(f){return Math.log(f)/Math.LN2},o.al=function(f){var l=f[0],p=f[1];return l*l+p*p},o.am=function(f,l){let p=[];for(let g in f)g in l||p.push(g);return p},o.an=function(f,l){let p=0,g=0;if(f.kind==="constant")g=f.layoutSize;else if(f.kind!=="source"){let{interpolationType:b,minZoom:I,maxZoom:M}=f,O=b?ot(Cs.interpolationFactor(b,l,I,M),0,1):0;f.kind==="camera"?g=qp.number(f.minSize,f.maxSize,O):p=O}return{uSizeT:p,uSize:g}},o.ap=function(f,{uSize:l,uSizeT:p},{lowerSize:g,upperSize:b}){return f.kind==="source"?g/og:f.kind==="composite"?qp.number(g/og,b/og,p):l},o.aq=function(f,l){var p=l[0],g=l[1],b=l[2],I=l[3],M=l[4],O=l[5],L=l[6],F=l[7],U=l[8],W=l[9],X=l[10],re=l[11],ne=l[12],ae=l[13],he=l[14],Ie=l[15],Xe=p*O-g*M,je=p*L-b*M,Ve=p*F-I*M,st=g*L-b*O,yt=g*F-I*O,kt=b*F-I*L,tr=U*ae-W*ne,Ht=U*he-X*ne,Xt=U*Ie-re*ne,Or=W*he-X*ae,Kt=W*Ie-re*ae,Jt=X*Ie-re*he,Ct=Xe*Jt-je*Kt+Ve*Or+st*Xt-yt*Ht+kt*tr;return Ct?(f[0]=(O*Jt-L*Kt+F*Or)*(Ct=1/Ct),f[1]=(b*Kt-g*Jt-I*Or)*Ct,f[2]=(ae*kt-he*yt+Ie*st)*Ct,f[3]=(X*yt-W*kt-re*st)*Ct,f[4]=(L*Xt-M*Jt-F*Ht)*Ct,f[5]=(p*Jt-b*Xt+I*Ht)*Ct,f[6]=(he*Ve-ne*kt-Ie*je)*Ct,f[7]=(U*kt-X*Ve+re*je)*Ct,f[8]=(M*Kt-O*Xt+F*tr)*Ct,f[9]=(g*Xt-p*Kt-I*tr)*Ct,f[10]=(ne*yt-ae*Ve+Ie*Xe)*Ct,f[11]=(W*Ve-U*yt-re*Xe)*Ct,f[12]=(O*Ht-M*Or-L*tr)*Ct,f[13]=(p*Or-g*Ht+b*tr)*Ct,f[14]=(ae*je-ne*st-he*Xe)*Ct,f[15]=(U*st-W*je+X*Xe)*Ct,f):null},o.ar=Ye,o.as=function(f){var l=f[0],p=f[1];return Math.sqrt(l*l+p*p)},o.at=function(f){return f[0]=0,f[1]=0,f},o.au=function(f,l,p){return f[0]=l[0]*p,f[1]=l[1]*p,f},o.av=iV,o.aw=_e,o.ax=function(f,l,p,g){let b=l.y-f.y,I=l.x-f.x,M=g.y-p.y,O=g.x-p.x,L=M*I-O*b;if(L===0)return null;let F=(O*(f.y-p.y)-M*(f.x-p.x))/L;return new a(f.x+F*I,f.y+F*b)},o.ay=Lde,o.az=Efe,o.b=Ut,o.b$=class extends S{},o.b0=function(f,l,p){return f[0]=l[0]*p,f[1]=l[1]*p,f[2]=l[2]*p,f[3]=l[3]*p,f},o.b1=function(f,l){return f[0]*l[0]+f[1]*l[1]+f[2]*l[2]+f[3]},o.b2=Ade,o.b3=tw,o.b4=function(f,l,p,g,b){var I=1/Math.tan(l/2);if(f[0]=I/p,f[1]=0,f[2]=0,f[3]=0,f[4]=0,f[5]=I,f[6]=0,f[7]=0,f[8]=0,f[9]=0,f[11]=-1,f[12]=0,f[13]=0,f[15]=0,b!=null&&b!==1/0){var M=1/(g-b);f[10]=(b+g)*M,f[14]=2*b*g*M}else f[10]=-1,f[14]=-2*g;return f},o.b5=function(f){var l=new k(16);return l[0]=f[0],l[1]=f[1],l[2]=f[2],l[3]=f[3],l[4]=f[4],l[5]=f[5],l[6]=f[6],l[7]=f[7],l[8]=f[8],l[9]=f[9],l[10]=f[10],l[11]=f[11],l[12]=f[12],l[13]=f[13],l[14]=f[14],l[15]=f[15],l},o.b6=function(f,l,p){var g=Math.sin(p),b=Math.cos(p),I=l[0],M=l[1],O=l[2],L=l[3],F=l[4],U=l[5],W=l[6],X=l[7];return l!==f&&(f[8]=l[8],f[9]=l[9],f[10]=l[10],f[11]=l[11],f[12]=l[12],f[13]=l[13],f[14]=l[14],f[15]=l[15]),f[0]=I*b+F*g,f[1]=M*b+U*g,f[2]=O*b+W*g,f[3]=L*b+X*g,f[4]=F*b-I*g,f[5]=U*b-M*g,f[6]=W*b-O*g,f[7]=X*b-L*g,f},o.b7=function(f,l,p){var g=Math.sin(p),b=Math.cos(p),I=l[4],M=l[5],O=l[6],L=l[7],F=l[8],U=l[9],W=l[10],X=l[11];return l!==f&&(f[0]=l[0],f[1]=l[1],f[2]=l[2],f[3]=l[3],f[12]=l[12],f[13]=l[13],f[14]=l[14],f[15]=l[15]),f[4]=I*b+F*g,f[5]=M*b+U*g,f[6]=O*b+W*g,f[7]=L*b+X*g,f[8]=F*b-I*g,f[9]=U*b-M*g,f[10]=W*b-O*g,f[11]=X*b-L*g,f},o.b8=function(){let f=new Float32Array(16);return V(f),f},o.b9=function(){let f=new Float64Array(16);return V(f),f},o.bA=function(f,l){let p=lt(f,360),g=lt(l,360),b=g-p,I=g>p?b-360:b+360;return Math.abs(b)<Math.abs(I)?b:I},o.bB=function(f){return f[0]=0,f[1]=0,f[2]=0,f},o.bC=function(f,l,p,g){let b=Math.sqrt(f*f+l*l),I=Math.sqrt(p*p+g*g);f/=b,l/=b,p/=I,g/=I;let M=Math.acos(f*p+l*g);return-l*p+f*g>0?M:-M},o.bD=function(f,l){let p=lt(f,2*Math.PI),g=lt(l,2*Math.PI);return Math.min(Math.abs(p-g),Math.abs(p-g+2*Math.PI),Math.abs(p-g-2*Math.PI))},o.bE=function(){let f={},l=Ae.$version;for(let p in Ae.$root){let g=Ae.$root[p];if(g.required){let b=null;b=p==="version"?l:g.type==="array"?[]:{},b!=null&&(f[p]=b)}}return f},o.bF=Rx,o.bG=Fe,o.bH=function f(l,p){if(Array.isArray(l)){if(!Array.isArray(p)||l.length!==p.length)return!1;for(let g=0;g<l.length;g++)if(!f(l[g],p[g]))return!1;return!0}if(typeof l=="object"&&l!==null&&p!==null){if(typeof p!="object"||Object.keys(l).length!==Object.keys(p).length)return!1;for(let g in l)if(!f(l[g],p[g]))return!1;return!0}return l===p},o.bI=function(f){f=f.slice();let l=Object.create(null);for(let p=0;p<f.length;p++)l[f[p].id]=f[p];for(let p=0;p<f.length;p++)"ref"in f[p]&&(f[p]=Oe(f[p],l[f[p].ref]));return f},o.bJ=function(f){if(f.type==="custom")return new kgt(f);switch(f.type){case"background":return new Dgt(f);case"circle":return new vmt(f);case"color-relief":return new Emt(f);case"fill":return new qmt(f);case"fill-extrusion":return new Zmt(f);case"heatmap":return new _mt(f);case"hillshade":return new xmt(f);case"line":return new rgt(f);case"raster":return new Lgt(f);case"symbol":return new zN(f)}},o.bK=mt,o.bL=function(f,l){if(!f)return[{command:"setStyle",args:[l]}];let p=[];try{if(!xt(f.version,l.version))return[{command:"setStyle",args:[l]}];xt(f.center,l.center)||p.push({command:"setCenter",args:[l.center]}),xt(f.state,l.state)||p.push({command:"setGlobalState",args:[l.state]}),xt(f.centerAltitude,l.centerAltitude)||p.push({command:"setCenterAltitude",args:[l.centerAltitude]}),xt(f.zoom,l.zoom)||p.push({command:"setZoom",args:[l.zoom]}),xt(f.bearing,l.bearing)||p.push({command:"setBearing",args:[l.bearing]}),xt(f.pitch,l.pitch)||p.push({command:"setPitch",args:[l.pitch]}),xt(f.roll,l.roll)||p.push({command:"setRoll",args:[l.roll]}),xt(f.sprite,l.sprite)||p.push({command:"setSprite",args:[l.sprite]}),xt(f.glyphs,l.glyphs)||p.push({command:"setGlyphs",args:[l.glyphs]}),xt(f.transition,l.transition)||p.push({command:"setTransition",args:[l.transition]}),xt(f.light,l.light)||p.push({command:"setLight",args:[l.light]}),xt(f.terrain,l.terrain)||p.push({command:"setTerrain",args:[l.terrain]}),xt(f.sky,l.sky)||p.push({command:"setSky",args:[l.sky]}),xt(f.projection,l.projection)||p.push({command:"setProjection",args:[l.projection]});let g={},b=[];(function(M,O,L,F){let U;for(U in O=O||{},M=M||{})Object.prototype.hasOwnProperty.call(M,U)&&(Object.prototype.hasOwnProperty.call(O,U)||dn(U,L,F));for(U in O)Object.prototype.hasOwnProperty.call(O,U)&&(Object.prototype.hasOwnProperty.call(M,U)?xt(M[U],O[U])||(M[U].type==="geojson"&&O[U].type==="geojson"&&ln(M,O,U)?Bt(L,{command:"setGeoJSONSourceData",args:[U,O[U].data]}):wt(U,O,L,F)):Tr(U,O,L))})(f.sources,l.sources,b,g);let I=[];f.layers&&f.layers.forEach(M=>{"source"in M&&g[M.source]?p.push({command:"removeLayer",args:[M.id]}):I.push(M)}),p=p.concat(b),function(M,O,L){O=O||[];let F=(M=M||[]).map(or),U=O.map(or),W=M.reduce(Er,{}),X=O.reduce(Er,{}),re=F.slice(),ne=Object.create(null),ae,he,Ie,Xe,je;for(let Ve=0,st=0;Ve<F.length;Ve++)ae=F[Ve],Object.prototype.hasOwnProperty.call(X,ae)?st++:(Bt(L,{command:"removeLayer",args:[ae]}),re.splice(re.indexOf(ae,st),1));for(let Ve=0,st=0;Ve<U.length;Ve++)ae=U[U.length-1-Ve],re[re.length-1-Ve]!==ae&&(Object.prototype.hasOwnProperty.call(W,ae)?(Bt(L,{command:"removeLayer",args:[ae]}),re.splice(re.lastIndexOf(ae,re.length-st),1)):st++,Xe=re[re.length-Ve],Bt(L,{command:"addLayer",args:[X[ae],Xe]}),re.splice(re.length-Ve,0,ae),ne[ae]=!0);for(let Ve=0;Ve<U.length;Ve++)if(ae=U[Ve],he=W[ae],Ie=X[ae],!ne[ae]&&!xt(he,Ie))if(xt(he.source,Ie.source)&&xt(he["source-layer"],Ie["source-layer"])&&xt(he.type,Ie.type)){for(je in Ar(he.layout,Ie.layout,L,ae,null,"setLayoutProperty"),Ar(he.paint,Ie.paint,L,ae,null,"setPaintProperty"),xt(he.filter,Ie.filter)||Bt(L,{command:"setFilter",args:[ae,Ie.filter]}),xt(he.minzoom,Ie.minzoom)&&xt(he.maxzoom,Ie.maxzoom)||Bt(L,{command:"setLayerZoomRange",args:[ae,Ie.minzoom,Ie.maxzoom]}),he)Object.prototype.hasOwnProperty.call(he,je)&&je!=="layout"&&je!=="paint"&&je!=="filter"&&je!=="metadata"&&je!=="minzoom"&&je!=="maxzoom"&&(je.indexOf("paint.")===0?Ar(he[je],Ie[je],L,ae,je.slice(6),"setPaintProperty"):xt(he[je],Ie[je])||Bt(L,{command:"setLayerProperty",args:[ae,je,Ie[je]]}));for(je in Ie)Object.prototype.hasOwnProperty.call(Ie,je)&&!Object.prototype.hasOwnProperty.call(he,je)&&je!=="layout"&&je!=="paint"&&je!=="filter"&&je!=="metadata"&&je!=="minzoom"&&je!=="maxzoom"&&(je.indexOf("paint.")===0?Ar(he[je],Ie[je],L,ae,je.slice(6),"setPaintProperty"):xt(he[je],Ie[je])||Bt(L,{command:"setLayerProperty",args:[ae,je,Ie[je]]}))}else Bt(L,{command:"removeLayer",args:[ae]}),Xe=re[re.lastIndexOf(ae)+1],Bt(L,{command:"addLayer",args:[Ie,Xe]})}(I,l.layers,p)}catch(g){console.warn("Unable to compute style diff:",g),p=[{command:"setStyle",args:[l]}]}return p},o.bM=function(f){let l=[],p=f.id;return p===void 0&&l.push({message:`layers.${p}: missing required property "id"`}),f.render===void 0&&l.push({message:`layers.${p}: missing required method "render"`}),f.renderingMode&&f.renderingMode!=="2d"&&f.renderingMode!=="3d"&&l.push({message:`layers.${p}: property "renderingMode" must be either "2d" or "3d"`}),l},o.bN=Ge,o.bO=ft,o.bP=class extends vl{constructor(f,l){super(f,l),this.current=0}set(f){this.current!==f&&(this.current=f,this.gl.uniform1i(this.location,f))}},o.bQ=Ua,o.bR=class extends vl{constructor(f,l){super(f,l),this.current=lc}set(f){if(f[12]!==this.current[12]||f[0]!==this.current[0])return this.current=f,void this.gl.uniformMatrix4fv(this.location,!1,f);for(let l=1;l<16;l++)if(f[l]!==this.current[l]){this.current=f,this.gl.uniformMatrix4fv(this.location,!1,f);break}}},o.bS=Ma,o.bT=class extends vl{constructor(f,l){super(f,l),this.current=[0,0,0]}set(f){f[0]===this.current[0]&&f[1]===this.current[1]&&f[2]===this.current[2]||(this.current=f,this.gl.uniform3f(this.location,f[0],f[1],f[2]))}},o.bU=class extends vl{constructor(f,l){super(f,l),this.current=[0,0]}set(f){f[0]===this.current[0]&&f[1]===this.current[1]||(this.current=f,this.gl.uniform2f(this.location,f[0],f[1]))}},o.bV=z,o.bW=function(f,l){var p=Math.sin(l),g=Math.cos(l);return f[0]=g,f[1]=p,f[2]=0,f[3]=-p,f[4]=g,f[5]=0,f[6]=0,f[7]=0,f[8]=1,f},o.bX=function(f,l,p){var g=l[0],b=l[1],I=l[2];return f[0]=g*p[0]+b*p[3]+I*p[6],f[1]=g*p[1]+b*p[4]+I*p[7],f[2]=g*p[2]+b*p[5]+I*p[8],f},o.bY=function(f,l,p,g,b,I,M){var O=1/(l-p),L=1/(g-b),F=1/(I-M);return f[0]=-2*O,f[1]=0,f[2]=0,f[3]=0,f[4]=0,f[5]=-2*L,f[6]=0,f[7]=0,f[8]=0,f[9]=0,f[10]=2*F,f[11]=0,f[12]=(l+p)*O,f[13]=(b+g)*L,f[14]=(M+I)*F,f[15]=1,f},o.bZ=class extends vl{constructor(f,l){super(f,l),this.current=new Array}set(f){if(f!=this.current){this.current=f;let l=new Float32Array(4*f.length);for(let p=0;p<f.length;p++)l[4*p]=f[p].r,l[4*p+1]=f[p].g,l[4*p+2]=f[p].b,l[4*p+3]=f[p].a;this.gl.uniform4fv(this.location,l)}}},o.b_=class extends vl{constructor(f,l){super(f,l),this.current=new Array}set(f){if(f!=this.current){this.current=f;let l=new Float32Array(f);this.gl.uniform1fv(this.location,l)}}},o.ba=function(){return new Float64Array(16)},o.bb=function(f,l,p){let g=new Float64Array(4);return Ce(g,f,l-90,p),g},o.bc=function(f,l,p,g){var b,I,M,O,L,F=l[0],U=l[1],W=l[2],X=l[3],re=p[0],ne=p[1],ae=p[2],he=p[3];return(I=F*re+U*ne+W*ae+X*he)<0&&(I=-I,re=-re,ne=-ne,ae=-ae,he=-he),1-I>D?(b=Math.acos(I),M=Math.sin(b),O=Math.sin((1-g)*b)/M,L=Math.sin(g*b)/M):(O=1-g,L=g),f[0]=O*F+L*re,f[1]=O*U+L*ne,f[2]=O*W+L*ae,f[3]=O*X+L*he,f},o.bd=function(f){let l=new Float64Array(9);var p,g,b,I,M,O,L,F,U,W,X,re,ne,ae,he,Ie,Xe,je;W=(b=(g=f)[0])*(L=b+b),X=(I=g[1])*L,ne=(M=g[2])*L,ae=M*(F=I+I),Ie=(O=g[3])*L,Xe=O*F,je=O*(U=M+M),(p=l)[0]=1-(re=I*F)-(he=M*U),p[3]=X-je,p[6]=ne+Xe,p[1]=X+je,p[4]=1-W-he,p[7]=ae-Ie,p[2]=ne-Xe,p[5]=ae+Ie,p[8]=1-W-re;let Ve=Je(-Math.asin(ot(l[2],-1,1))),st,yt;return Math.hypot(l[5],l[8])<.001?(st=0,yt=-Je(Math.atan2(l[3],l[4]))):(st=Je(l[5]===0&&l[8]===0?0:Math.atan2(l[5],l[8])),yt=Je(l[1]===0&&l[0]===0?0:Math.atan2(l[1],l[0]))),{roll:st,pitch:Ve+90,bearing:yt}},o.be=function(f,l){return f.roll==l.roll&&f.pitch==l.pitch&&f.bearing==l.bearing},o.bf=gn,o.bg=_h,o.bh=Kx,o.bi=OI,o.bj=Zx,o.bk=bt,o.bl=Tt,o.bm=Gs,o.bn=function(f,l,p,g,b){return bt(g,b,ot((f-l)/(p-l),0,1))},o.bo=lt,o.bp=function(){return new Float64Array(3)},o.bq=function(f,l,p,g){return f[0]=l[0]+p[0]*g,f[1]=l[1]+p[1]*g,f[2]=l[2]+p[2]*g,f},o.br=Ce,o.bs=function(f,l,p){var g=p[0],b=p[1],I=p[2],M=p[3],O=l[0],L=l[1],F=l[2],U=b*F-I*L,W=I*O-g*F,X=g*L-b*O;return f[0]=O+M*(U+=U)+b*(X+=X)-I*(W+=W),f[1]=L+M*W+I*U-g*X,f[2]=F+M*X+g*W-b*U,f},o.bt=function(f,l,p){let g=(b=[f[0],f[1],f[2],l[0],l[1],l[2],p[0],p[1],p[2]])[0]*((U=b[8])*(M=b[4])-(O=b[5])*(F=b[7]))+b[1]*(-U*(I=b[3])+O*(L=b[6]))+b[2]*(F*I-M*L);var b,I,M,O,L,F,U;if(g===0)return null;let W=le([],[l[0],l[1],l[2]],[p[0],p[1],p[2]]),X=le([],[p[0],p[1],p[2]],[f[0],f[1],f[2]]),re=le([],[f[0],f[1],f[2]],[l[0],l[1],l[2]]),ne=se([],W,-f[3]);return te(ne,ne,se([],X,-l[3])),te(ne,ne,se([],re,-p[3])),se(ne,ne,1/g),ne},o.bu=uV,o.bv=function(){return new Float64Array(4)},o.bw=function(f,l,p,g){var b=[],I=[];return b[0]=l[0]-p[0],b[1]=l[1]-p[1],b[2]=l[2]-p[2],I[0]=b[0]*Math.cos(g)-b[1]*Math.sin(g),I[1]=b[0]*Math.sin(g)+b[1]*Math.cos(g),I[2]=b[2],f[0]=I[0]+p[0],f[1]=I[1]+p[1],f[2]=I[2]+p[2],f},o.bx=function(f,l,p,g){var b=[],I=[];return b[0]=l[0]-p[0],b[1]=l[1]-p[1],b[2]=l[2]-p[2],I[0]=b[0],I[1]=b[1]*Math.cos(g)-b[2]*Math.sin(g),I[2]=b[1]*Math.sin(g)+b[2]*Math.cos(g),f[0]=I[0]+p[0],f[1]=I[1]+p[1],f[2]=I[2]+p[2],f},o.by=function(f,l,p,g){var b=[],I=[];return b[0]=l[0]-p[0],b[1]=l[1]-p[1],b[2]=l[2]-p[2],I[0]=b[2]*Math.sin(g)+b[0]*Math.cos(g),I[1]=b[1],I[2]=b[2]*Math.cos(g)-b[0]*Math.sin(g),f[0]=I[0]+p[0],f[1]=I[1]+p[1],f[2]=I[2]+p[2],f},o.bz=function(f,l,p){var g=Math.sin(p),b=Math.cos(p),I=l[0],M=l[1],O=l[2],L=l[3],F=l[8],U=l[9],W=l[10],X=l[11];return l!==f&&(f[4]=l[4],f[5]=l[5],f[6]=l[6],f[7]=l[7],f[12]=l[12],f[13]=l[13],f[14]=l[14],f[15]=l[15]),f[0]=I*b-F*g,f[1]=M*b-U*g,f[2]=O*b-W*g,f[3]=L*b-X*g,f[8]=I*g+F*b,f[9]=M*g+U*b,f[10]=O*g+W*b,f[11]=L*g+X*b,f},o.c=xe,o.c0=agt,o.c1=class extends d{},o.c2=VB,o.c3=function(f){return f<=1?1:Math.pow(2,Math.ceil(Math.log(f)/Math.LN2))},o.c4=Nfe,o.c5=function(f,l,p){var g=l[0],b=l[1],I=l[2],M=p[3]*g+p[7]*b+p[11]*I+p[15];return f[0]=(p[0]*g+p[4]*b+p[8]*I+p[12])/(M=M||1),f[1]=(p[1]*g+p[5]*b+p[9]*I+p[13])/M,f[2]=(p[2]*g+p[6]*b+p[10]*I+p[14])/M,f},o.c6=class extends _I{},o.c7=class extends B{},o.c8=function(f,l){return f[0]===l[0]&&f[1]===l[1]&&f[2]===l[2]&&f[3]===l[3]&&f[4]===l[4]&&f[5]===l[5]&&f[6]===l[6]&&f[7]===l[7]&&f[8]===l[8]&&f[9]===l[9]&&f[10]===l[10]&&f[11]===l[11]&&f[12]===l[12]&&f[13]===l[13]&&f[14]===l[14]&&f[15]===l[15]},o.c9=function(f,l){var p=f[0],g=f[1],b=f[2],I=f[3],M=f[4],O=f[5],L=f[6],F=f[7],U=f[8],W=f[9],X=f[10],re=f[11],ne=f[12],ae=f[13],he=f[14],Ie=f[15],Xe=l[0],je=l[1],Ve=l[2],st=l[3],yt=l[4],kt=l[5],tr=l[6],Ht=l[7],Xt=l[8],Or=l[9],Kt=l[10],Jt=l[11],Ct=l[12],Jr=l[13],un=l[14],Vr=l[15];return Math.abs(p-Xe)<=D*Math.max(1,Math.abs(p),Math.abs(Xe))&&Math.abs(g-je)<=D*Math.max(1,Math.abs(g),Math.abs(je))&&Math.abs(b-Ve)<=D*Math.max(1,Math.abs(b),Math.abs(Ve))&&Math.abs(I-st)<=D*Math.max(1,Math.abs(I),Math.abs(st))&&Math.abs(M-yt)<=D*Math.max(1,Math.abs(M),Math.abs(yt))&&Math.abs(O-kt)<=D*Math.max(1,Math.abs(O),Math.abs(kt))&&Math.abs(L-tr)<=D*Math.max(1,Math.abs(L),Math.abs(tr))&&Math.abs(F-Ht)<=D*Math.max(1,Math.abs(F),Math.abs(Ht))&&Math.abs(U-Xt)<=D*Math.max(1,Math.abs(U),Math.abs(Xt))&&Math.abs(W-Or)<=D*Math.max(1,Math.abs(W),Math.abs(Or))&&Math.abs(X-Kt)<=D*Math.max(1,Math.abs(X),Math.abs(Kt))&&Math.abs(re-Jt)<=D*Math.max(1,Math.abs(re),Math.abs(Jt))&&Math.abs(ne-Ct)<=D*Math.max(1,Math.abs(ne),Math.abs(Ct))&&Math.abs(ae-Jr)<=D*Math.max(1,Math.abs(ae),Math.abs(Jr))&&Math.abs(he-un)<=D*Math.max(1,Math.abs(he),Math.abs(un))&&Math.abs(Ie-Vr)<=D*Math.max(1,Math.abs(Ie),Math.abs(Vr))},o.cA=function(f,l){J.REGISTERED_PROTOCOLS[f]=l},o.cB=function(f){delete J.REGISTERED_PROTOCOLS[f]},o.cC=function(f,l){let p={};for(let b=0;b<f.length;b++){let I=l&&l[f[b].id]||PB(f[b]);l&&(l[f[b].id]=I);let M=p[I];M||(M=p[I]=[]),M.push(f[b])}let g=[];for(let b in p)g.push(p[b]);return g},o.cD=fr,o.cE=Ode,o.cF=Dde,o.cG=lde,o.cH=function(f){f.bucket.createArrays(),f.bucket.tilePixelRatio=ct/(512*f.bucket.overscaling),f.bucket.compareText={},f.bucket.iconsNeedLinear=!1;let l=f.bucket.layers[0],p=l.layout,g=l._unevaluatedLayout._values,b={layoutIconSize:g["icon-size"].possiblyEvaluate(new ni(f.bucket.zoom+1),f.canonical),layoutTextSize:g["text-size"].possiblyEvaluate(new ni(f.bucket.zoom+1),f.canonical),textMaxSize:g["text-size"].possiblyEvaluate(new ni(18))};if(f.bucket.textSizeData.kind==="composite"){let{minZoom:F,maxZoom:U}=f.bucket.textSizeData;b.compositeTextSizes=[g["text-size"].possiblyEvaluate(new ni(F),f.canonical),g["text-size"].possiblyEvaluate(new ni(U),f.canonical)]}if(f.bucket.iconSizeData.kind==="composite"){let{minZoom:F,maxZoom:U}=f.bucket.iconSizeData;b.compositeIconSizes=[g["icon-size"].possiblyEvaluate(new ni(F),f.canonical),g["icon-size"].possiblyEvaluate(new ni(U),f.canonical)]}let I=p.get("text-line-height")*us,M=p.get("text-rotation-alignment")!=="viewport"&&p.get("symbol-placement")!=="point",O=p.get("text-keep-upright"),L=p.get("text-size");for(let F of f.bucket.features){let U=p.get("text-font").evaluate(F,{},f.canonical).join(","),W=L.evaluate(F,{},f.canonical),X=b.layoutTextSize.evaluate(F,{},f.canonical),re=b.layoutIconSize.evaluate(F,{},f.canonical),ne={horizontal:{},vertical:void 0},ae=F.text,he,Ie=[0,0];if(ae){let Ve=ae.toString(),st=p.get("text-letter-spacing").evaluate(F,{},f.canonical)*us,yt=kB(Ve)?st:0,kt=p.get("text-anchor").evaluate(F,{},f.canonical),tr=Vde(l,F,f.canonical);if(!tr){let Kt=p.get("text-radial-offset").evaluate(F,{},f.canonical);Ie=Kt?Bde(kt,[Kt*us,fV]):p.get("text-offset").evaluate(F,{},f.canonical).map(Jt=>Jt*us)}let Ht=M?"center":p.get("text-justify").evaluate(F,{},f.canonical),Xt=p.get("symbol-placement")==="point"?p.get("text-max-width").evaluate(F,{},f.canonical)*us:1/0,Or=()=>{f.bucket.allowVerticalPlacement&&jx(Ve)&&(ne.vertical=RN(ae,f.glyphMap,f.glyphPositions,f.imagePositions,U,Xt,I,kt,"left",yt,Ie,o.ao.vertical,!0,X,W))};if(!M&&tr){let Kt=new Set;if(Ht==="auto")for(let Ct=0;Ct<tr.values.length;Ct+=2)Kt.add(dV(tr.values[Ct]));else Kt.add(Ht);let Jt=!1;for(let Ct of Kt)if(!ne.horizontal[Ct])if(Jt)ne.horizontal[Ct]=ne.horizontal[0];else{let Jr=RN(ae,f.glyphMap,f.glyphPositions,f.imagePositions,U,Xt,I,"center",Ct,yt,Ie,o.ao.horizontal,!1,X,W);Jr&&(ne.horizontal[Ct]=Jr,Jt=Jr.positionedLines.length===1)}Or()}else{Ht==="auto"&&(Ht=dV(kt));let Kt=RN(ae,f.glyphMap,f.glyphPositions,f.imagePositions,U,Xt,I,kt,Ht,yt,Ie,o.ao.horizontal,!1,X,W);Kt&&(ne.horizontal[Ht]=Kt),Or(),jx(Ve)&&M&&O&&(ne.vertical=RN(ae,f.glyphMap,f.glyphPositions,f.imagePositions,U,Xt,I,kt,Ht,yt,Ie,o.ao.vertical,!1,X,W))}}let Xe=!1;if(F.icon&&F.icon.name){let Ve=f.imageMap[F.icon.name];Ve&&(he=Cgt(f.imagePositions[F.icon.name],p.get("icon-offset").evaluate(F,{},f.canonical),p.get("icon-anchor").evaluate(F,{},f.canonical)),Xe=!!Ve.sdf,f.bucket.sdfIcons===void 0?f.bucket.sdfIcons=Xe:f.bucket.sdfIcons!==Xe&&At("Style sheet warning: Cannot mix SDF and non-SDF icons in one buffer"),(Ve.pixelRatio!==f.bucket.pixelRatio||p.get("icon-rotate").constantOr(1)!==0)&&(f.bucket.iconsNeedLinear=!0))}let je=Hde(ne.horizontal)||ne.vertical;f.bucket.iconsInText=!!je&&je.iconsInText,(je||he)&&Ggt(f.bucket,F,ne,he,f.imageMap,b,X,re,Ie,Xe,f.canonical,f.subdivisionGranularity)}f.showCollisionBoxes&&f.bucket.generateCollisionDebugBuffers()},o.cI=JB,o.cJ=ZB,o.cK=XB,o.cL=Yfe,o.cM=eV,o.cN=class{constructor(f){this._marks={start:[f.url,"start"].join("#"),end:[f.url,"end"].join("#"),measure:f.url.toString()},performance.mark(this._marks.start)}finish(){performance.mark(this._marks.end);let f=performance.getEntriesByName(this._marks.measure);return f.length===0&&(performance.measure(this._marks.measure,this._marks.start,this._marks.end),f=performance.getEntriesByName(this._marks.measure),performance.clearMarks(this._marks.start),performance.clearMarks(this._marks.end),performance.clearMeasures(this._marks.measure)),f}},o.cO=function(f,l,p,g,b){return i(this,void 0,void 0,function*(){if(j())try{return yield jr(f,l,p,g,b)}catch(I){}return function(I,M,O,L,F){let U=I.width,W=I.height;Pr&&br||(Pr=new OffscreenCanvas(U,W),br=Pr.getContext("2d",{willReadFrequently:!0})),Pr.width=U,Pr.height=W,br.drawImage(I,0,0,U,W);let X=br.getImageData(M,O,L,F);return br.clearRect(0,0,U,W),X.data}(f,l,p,g,b)})},o.cP=Rfe,o.cQ=c,o.cR=$fe,o.cS=Xx,o.cT=A1,o.cU=function(f,l){let p=new Map;if(f!=null)if(f.type==="Feature")p.set(jI(f,l),f);else for(let g of f.features)p.set(jI(g,l),g);return p},o.cV=function(f,l){if(f==null)return!0;if(f.type==="Feature")return jI(f,l)!=null;if(f.type==="FeatureCollection"){let p=new Set;for(let g of f.features){let b=jI(g,l);if(b==null||p.has(b))return!1;p.add(b)}return!0}return!1},o.cW=function(f,l,p){var g,b,I,M;if(l.removeAll&&f.clear(),l.remove)for(let O of l.remove)f.delete(O);if(l.add)for(let O of l.add){let L=jI(O,p);L!=null&&f.set(L,O)}if(l.update)for(let O of l.update){let L=f.get(O.id);if(L==null)continue;let F=!O.removeAllProperties&&(((g=O.removeProperties)===null||g===void 0?void 0:g.length)>0||((b=O.addOrUpdateProperties)===null||b===void 0?void 0:b.length)>0);if((O.newGeometry||O.removeAllProperties||F)&&(L=Object.assign({},L),f.set(O.id,L),F&&(L.properties=Object.assign({},L.properties))),O.newGeometry&&(L.geometry=O.newGeometry),O.removeAllProperties)L.properties={};else if(((I=O.removeProperties)===null||I===void 0?void 0:I.length)>0)for(let U of O.removeProperties)Object.prototype.hasOwnProperty.call(L.properties,U)&&delete L.properties[U];if(((M=O.addOrUpdateProperties)===null||M===void 0?void 0:M.length)>0)for(let{key:U,value:W}of O.addOrUpdateProperties)L.properties[U]=W}},o.cX=np,o.ca=function(f,l){return f[0]=l[0],f[1]=l[1],f[2]=l[2],f[3]=l[3],f[4]=l[4],f[5]=l[5],f[6]=l[6],f[7]=l[7],f[8]=l[8],f[9]=l[9],f[10]=l[10],f[11]=l[11],f[12]=l[12],f[13]=l[13],f[14]=l[14],f[15]=l[15],f},o.cb=f=>f.type==="symbol",o.cc=f=>f.type==="circle",o.cd=f=>f.type==="heatmap",o.ce=f=>f.type==="line",o.cf=f=>f.type==="fill",o.cg=f=>f.type==="fill-extrusion",o.ch=f=>f.type==="hillshade",o.ci=f=>f.type==="color-relief",o.cj=f=>f.type==="raster",o.ck=f=>f.type==="background",o.cl=f=>f.type==="custom",o.cm=et,o.cn=function(f,l,p){let g=rt(l.x-p.x,l.y-p.y),b=rt(f.x-p.x,f.y-p.y);var I,M;return Je(Math.atan2(g[0]*b[1]-g[1]*b[0],(I=g)[0]*(M=b)[0]+I[1]*M[1]))},o.co=pt,o.cp=function(f,l){return Ft[l]&&(f instanceof MouseEvent||f instanceof WheelEvent)},o.cq=function(f,l){return tt[l]&&"touches"in f},o.cr=function(f){return tt[f]||Ft[f]},o.cs=function(f,l,p){var g=l[0],b=l[1];return f[0]=p[0]*g+p[4]*b+p[12],f[1]=p[1]*g+p[5]*b+p[13],f},o.ct=function(f,l){let{x:p,y:g}=RI.fromLngLat(l);return!(f<0||f>25||g<0||g>=1||p<0||p>=1)},o.cu=function(f,l){return f[0]=l[0],f[1]=0,f[2]=0,f[3]=0,f[4]=0,f[5]=l[1],f[6]=0,f[7]=0,f[8]=0,f[9]=0,f[10]=l[2],f[11]=0,f[12]=0,f[13]=0,f[14]=0,f[15]=1,f},o.cv=class extends jv{},o.cw=Wgt,o.cy=function(f){return f.message===Wt},o.cz=we,o.d=nt,o.e=Ne,o.f=f=>i(void 0,void 0,void 0,function*(){if(f.byteLength===0)return createImageBitmap(new ImageData(1,1));let l=new Blob([new Uint8Array(f)],{type:"image/png"});try{return createImageBitmap(l)}catch(p){throw new Error(`Could not load image because of ${p.message}. Please make sure to use a supported image type such as PNG or JPEG. Note that SVGs are not supported.`)}}),o.g=oe,o.h=f=>new Promise((l,p)=>{let g=new Image;g.onload=()=>{l(g),URL.revokeObjectURL(g.src),g.onload=null,window.requestAnimationFrame(()=>{g.src=sr})},g.onerror=()=>p(new Error("Could not load image. Please make sure to use a supported image type such as PNG or JPEG. Note that SVGs are not supported."));let b=new Blob([new Uint8Array(f)],{type:"image/png"});g.src=f.byteLength?URL.createObjectURL(b):sr}),o.i=Yt,o.j=(f,l)=>$e(Ne(f,{type:"json"}),l),o.k=Be,o.l=Ee,o.m=$e,o.n=(f,l)=>$e(Ne(f,{type:"arrayBuffer"}),l),o.o=function(f){return new eV(f).readFields(vgt,[])},o.p=sde,o.q=TI,o.r=ml,o.s=Dr,o.t=TN,o.u=ro,o.v=Ae,o.w=At,o.x=DB,o.y=R1,o.z=Nv}),r("worker",["./shared"],function(o){"use strict";class i{constructor(J){this.keyCache={},J&&this.replace(J)}replace(J){this._layerConfigs={},this._layers={},this.update(J,[])}update(J,oe){for(let we of J){this._layerConfigs[we.id]=we;let Fe=this._layers[we.id]=o.bJ(we);Fe._featureFilter=o.aa(Fe.filter),this.keyCache[we.id]&&delete this.keyCache[we.id]}for(let we of oe)delete this.keyCache[we],delete this._layerConfigs[we],delete this._layers[we];this.familiesBySource={};let ue=o.cC(Object.values(this._layerConfigs),this.keyCache);for(let we of ue){let Fe=we.map(Be=>this._layers[Be.id]),$e=Fe[0];if($e.visibility==="none")continue;let nt=$e.source||"",Ze=this.familiesBySource[nt];Ze||(Ze=this.familiesBySource[nt]={});let be=$e.sourceLayer||"_geojsonTileLayer",Ee=Ze[be];Ee||(Ee=Ze[be]=[]),Ee.push(Fe)}}}class a{constructor(J){let oe={},ue=[];for(let nt in J){let Ze=J[nt],be=oe[nt]={};for(let Ee in Ze){let Be=Ze[+Ee];if(!Be||Be.bitmap.width===0||Be.bitmap.height===0)continue;let gt={x:0,y:0,w:Be.bitmap.width+2,h:Be.bitmap.height+2};ue.push(gt),be[Ee]={rect:gt,metrics:Be.metrics}}}let{w:we,h:Fe}=o.p(ue),$e=new o.q({width:we||1,height:Fe||1});for(let nt in J){let Ze=J[nt];for(let be in Ze){let Ee=Ze[+be];if(!Ee||Ee.bitmap.width===0||Ee.bitmap.height===0)continue;let Be=oe[nt][be].rect;o.q.copy(Ee.bitmap,$e,{x:0,y:0},{x:Be.x+1,y:Be.y+1},Ee.bitmap)}}this.image=$e,this.positions=oe}}o.cD("GlyphAtlas",a);class c{constructor(J){this.tileID=new o.Z(J.tileID.overscaledZ,J.tileID.wrap,J.tileID.canonical.z,J.tileID.canonical.x,J.tileID.canonical.y),this.uid=J.uid,this.zoom=J.zoom,this.pixelRatio=J.pixelRatio,this.tileSize=J.tileSize,this.source=J.source,this.overscaling=this.tileID.overscaleFactor(),this.showCollisionBoxes=J.showCollisionBoxes,this.collectResourceTiming=!!J.collectResourceTiming,this.returnDependencies=!!J.returnDependencies,this.promoteId=J.promoteId,this.inFlightDependencies=[],this.globalState=J.globalState}parse(J,oe,ue,we,Fe){return o._(this,void 0,void 0,function*(){this.status="parsing",this.data=J,this.collisionBoxArray=new o.a8;let $e=new o.cE(Object.keys(J.layers).sort()),nt=new o.cF(this.tileID,this.promoteId);nt.bucketLayerIDs=[];let Ze={},be={featureIndex:nt,iconDependencies:{},patternDependencies:{},glyphDependencies:{},availableImages:ue,subdivisionGranularity:Fe},Ee=oe.familiesBySource[this.source];for(let Ar in Ee){let or=J.layers[Ar];if(!or)continue;or.version===1&&o.w(`Vector tile source "${this.source}" layer "${Ar}" does not use vector tile spec v2 and therefore may have some rendering errors.`);let Er=$e.encode(Ar),Rt=[];for(let jo=0;jo<or.length;jo++){let Ko=or.feature(jo),Un=nt.getId(Ko,Ar);Rt.push({feature:Ko,id:Un,index:jo,sourceLayerIndex:Er})}for(let jo of Ee[Ar]){let Ko=jo[0];Ko.source!==this.source&&o.w(`layer.source = ${Ko.source} does not equal this.source = ${this.source}`),Ko.minzoom&&this.zoom<Math.floor(Ko.minzoom)||Ko.maxzoom&&this.zoom>=Ko.maxzoom||Ko.visibility!=="none"&&(h(jo,this.zoom,ue,this.globalState),(Ze[Ko.id]=Ko.createBucket({index:nt.bucketLayerIDs.length,layers:jo,zoom:this.zoom,pixelRatio:this.pixelRatio,overscaling:this.overscaling,collisionBoxArray:this.collisionBoxArray,sourceLayerIndex:Er,sourceID:this.source,globalState:this.globalState})).populate(Rt,be,this.tileID.canonical),nt.bucketLayerIDs.push(jo.map(Un=>Un.id)))}}let Be=o.bN(be.glyphDependencies,Ar=>Object.keys(Ar).map(Number));this.inFlightDependencies.forEach(Ar=>Ar==null?void 0:Ar.abort()),this.inFlightDependencies=[];let gt=Promise.resolve({});if(Object.keys(Be).length){let Ar=new AbortController;this.inFlightDependencies.push(Ar),gt=we.sendAsync({type:"GG",data:{stacks:Be,source:this.source,tileID:this.tileID,type:"glyphs"}},Ar)}let Ae=Object.keys(be.iconDependencies),Dt=Promise.resolve({});if(Ae.length){let Ar=new AbortController;this.inFlightDependencies.push(Ar),Dt=we.sendAsync({type:"GI",data:{icons:Ae,source:this.source,tileID:this.tileID,type:"icons"}},Ar)}let Oe=Object.keys(be.patternDependencies),xt=Promise.resolve({});if(Oe.length){let Ar=new AbortController;this.inFlightDependencies.push(Ar),xt=we.sendAsync({type:"GI",data:{icons:Oe,source:this.source,tileID:this.tileID,type:"patterns"}},Ar)}let[Bt,Tr,dn]=yield Promise.all([gt,Dt,xt]),wt=new a(Bt),ln=new o.cG(Tr,dn);for(let Ar in Ze){let or=Ze[Ar];or instanceof o.a9?(h(or.layers,this.zoom,ue,this.globalState),o.cH({bucket:or,glyphMap:Bt,glyphPositions:wt.positions,imageMap:Tr,imagePositions:ln.iconPositions,showCollisionBoxes:this.showCollisionBoxes,canonical:this.tileID.canonical,subdivisionGranularity:be.subdivisionGranularity})):or.hasPattern&&(or instanceof o.cI||or instanceof o.cJ||or instanceof o.cK)&&(h(or.layers,this.zoom,ue,this.globalState),or.addFeatures(be,this.tileID.canonical,ln.patternPositions))}return this.status="done",{buckets:Object.values(Ze).filter(Ar=>!Ar.isEmpty()),featureIndex:nt,collisionBoxArray:this.collisionBoxArray,glyphAtlasImage:wt.image,imageAtlas:ln,glyphMap:this.returnDependencies?Bt:null,iconMap:this.returnDependencies?Tr:null,glyphPositions:this.returnDependencies?wt.positions:null}})}}function h(xe,J,oe,ue){let we=new o.F(J);for(let Fe of xe)Fe.setGlobalState(ue),Fe.recalculate(we,oe)}class m{constructor(J,oe,ue){this.actor=J,this.layerIndex=oe,this.availableImages=ue,this.fetching={},this.loading={},this.loaded={}}loadVectorTile(J,oe){return o._(this,void 0,void 0,function*(){let ue=yield o.n(J.request,oe);try{return{vectorTile:new o.cL(new o.cM(ue.data)),rawData:ue.data,cacheControl:ue.cacheControl,expires:ue.expires}}catch(we){let Fe=new Uint8Array(ue.data),$e=`Unable to parse the tile at ${J.request.url}, `;throw $e+=Fe[0]===31&&Fe[1]===139?"please make sure the data is not gzipped and that you have configured the relevant header in the server":`got error: ${we.message}`,new Error($e)}})}loadTile(J){return o._(this,void 0,void 0,function*(){let oe=J.uid,ue=!!(J&&J.request&&J.request.collectResourceTiming)&&new o.cN(J.request),we=new c(J);this.loading[oe]=we;let Fe=new AbortController;we.abort=Fe;try{let $e=yield this.loadVectorTile(J,Fe);if(delete this.loading[oe],!$e)return null;let nt=$e.rawData,Ze={};$e.expires&&(Ze.expires=$e.expires),$e.cacheControl&&(Ze.cacheControl=$e.cacheControl);let be={};if(ue){let Be=ue.finish();Be&&(be.resourceTiming=JSON.parse(JSON.stringify(Be)))}we.vectorTile=$e.vectorTile;let Ee=we.parse($e.vectorTile,this.layerIndex,this.availableImages,this.actor,J.subdivisionGranularity);this.loaded[oe]=we,this.fetching[oe]={rawTileData:nt,cacheControl:Ze,resourceTiming:be};try{let Be=yield Ee;return o.e({rawTileData:nt.slice(0)},Be,Ze,be)}finally{delete this.fetching[oe]}}catch($e){throw delete this.loading[oe],we.status="done",this.loaded[oe]=we,$e}})}reloadTile(J){return o._(this,void 0,void 0,function*(){let oe=J.uid;if(!this.loaded||!this.loaded[oe])throw new Error("Should not be trying to reload a tile that was never loaded or has been removed");let ue=this.loaded[oe];if(ue.showCollisionBoxes=J.showCollisionBoxes,ue.globalState=J.globalState,ue.status==="parsing"){let we=yield ue.parse(ue.vectorTile,this.layerIndex,this.availableImages,this.actor,J.subdivisionGranularity),Fe;if(this.fetching[oe]){let{rawTileData:$e,cacheControl:nt,resourceTiming:Ze}=this.fetching[oe];delete this.fetching[oe],Fe=o.e({rawTileData:$e.slice(0)},we,nt,Ze)}else Fe=we;return Fe}if(ue.status==="done"&&ue.vectorTile)return ue.parse(ue.vectorTile,this.layerIndex,this.availableImages,this.actor,J.subdivisionGranularity)})}abortTile(J){return o._(this,void 0,void 0,function*(){let oe=this.loading,ue=J.uid;oe&&oe[ue]&&oe[ue].abort&&(oe[ue].abort.abort(),delete oe[ue])})}removeTile(J){return o._(this,void 0,void 0,function*(){this.loaded&&this.loaded[J.uid]&&delete this.loaded[J.uid]})}}class y{constructor(){this.loaded={}}loadTile(J){return o._(this,void 0,void 0,function*(){let{uid:oe,encoding:ue,rawImageData:we,redFactor:Fe,greenFactor:$e,blueFactor:nt,baseShift:Ze}=J,be=we.width+2,Ee=we.height+2,Be=o.b(we)?new o.R({width:be,height:Ee},yield o.cO(we,-1,-1,be,Ee)):we,gt=new o.cP(oe,Be,ue,Fe,$e,nt,Ze);return this.loaded=this.loaded||{},this.loaded[oe]=gt,gt})}removeTile(J){let oe=this.loaded,ue=J.uid;oe&&oe[ue]&&delete oe[ue]}}var w,E,A=function(){if(E)return w;function xe(oe,ue){if(oe.length!==0){J(oe[0],ue);for(var we=1;we<oe.length;we++)J(oe[we],!ue)}}function J(oe,ue){for(var we=0,Fe=0,$e=0,nt=oe.length,Ze=nt-1;$e<nt;Ze=$e++){var be=(oe[$e][0]-oe[Ze][0])*(oe[Ze][1]+oe[$e][1]),Ee=we+be;Fe+=Math.abs(we)>=Math.abs(be)?we-Ee+be:be-Ee+we,we=Ee}we+Fe>=0!=!!ue&&oe.reverse()}return E=1,w=function oe(ue,we){var Fe,$e=ue&&ue.type;if($e==="FeatureCollection")for(Fe=0;Fe<ue.features.length;Fe++)oe(ue.features[Fe],we);else if($e==="GeometryCollection")for(Fe=0;Fe<ue.geometries.length;Fe++)oe(ue.geometries[Fe],we);else if($e==="Feature")oe(ue.geometry,we);else if($e==="Polygon")xe(ue.coordinates,we);else if($e==="MultiPolygon")for(Fe=0;Fe<ue.coordinates.length;Fe++)xe(ue.coordinates[Fe],we);return ue}}(),P=o.cQ(A);class j extends o.cS{constructor(J,oe){super(new o.cM,0,oe,[],[]),this.feature=J,this.type=J.type,this.properties=J.tags?J.tags:{},"id"in J&&(typeof J.id=="string"?this.id=parseInt(J.id,10):typeof J.id!="number"||isNaN(J.id)||(this.id=J.id))}loadGeometry(){let J=[],oe=this.feature.type===1?[this.feature.geometry]:this.feature.geometry;for(let ue of oe){let we=[];for(let Fe of ue)we.push(new o.P(Fe[0],Fe[1]));J.push(we)}return J}}class D extends o.cR{constructor(J,oe){super(new o.cM),this.layers={_geojsonTileLayer:this},this.name="_geojsonTileLayer",this.version=oe?oe.version:1,this.extent=oe?oe.extent:4096,this.length=J.length,this.features=J}feature(J){return new j(this.features[J],this.extent)}}function k(xe,J){J.writeVarintField(15,xe.version||1),J.writeStringField(1,xe.name||""),J.writeVarintField(5,xe.extent||4096);let oe={keys:[],values:[],keycache:{},valuecache:{}};for(let Fe=0;Fe<xe.length;Fe++)oe.feature=xe.feature(Fe),J.writeMessage(2,z,oe);let ue=oe.keys;for(let Fe of ue)J.writeStringField(3,Fe);let we=oe.values;for(let Fe of we)J.writeMessage(4,te,Fe)}function z(xe,J){if(!xe.feature)return;let oe=xe.feature;oe.id!==void 0&&J.writeVarintField(1,oe.id),J.writeMessage(2,V,xe),J.writeVarintField(3,oe.type),J.writeMessage(4,Z,oe)}function V(xe,J){var oe;for(let ue in(oe=xe.feature)==null?void 0:oe.properties){let we=xe.feature.properties[ue],Fe=xe.keycache[ue];if(we===null)continue;Fe===void 0&&(xe.keys.push(ue),Fe=xe.keys.length-1,xe.keycache[ue]=Fe),J.writeVarint(Fe),typeof we!="string"&&typeof we!="boolean"&&typeof we!="number"&&(we=JSON.stringify(we));let $e=typeof we+":"+we,nt=xe.valuecache[$e];nt===void 0&&(xe.values.push(we),nt=xe.values.length-1,xe.valuecache[$e]=nt),J.writeVarint(nt)}}function G(xe,J){return(J<<3)+(7&xe)}function K(xe){return xe<<1^xe>>31}function Z(xe,J){let oe=xe.loadGeometry(),ue=xe.type,we=0,Fe=0;for(let $e of oe){let nt=1;ue===1&&(nt=$e.length),J.writeVarint(G(1,nt));let Ze=ue===3?$e.length-1:$e.length;for(let be=0;be<Ze;be++){be===1&&ue!==1&&J.writeVarint(G(2,Ze-1));let Ee=$e[be].x-we,Be=$e[be].y-Fe;J.writeVarint(K(Ee)),J.writeVarint(K(Be)),we+=Ee,Fe+=Be}xe.type===3&&J.writeVarint(G(7,1))}}function te(xe,J){let oe=typeof xe;oe==="string"?J.writeStringField(1,xe):oe==="boolean"?J.writeBooleanField(7,xe):oe==="number"&&(xe%1!=0?J.writeDoubleField(3,xe):xe<0?J.writeSVarintField(6,xe):J.writeVarintField(5,xe))}let se={minZoom:0,maxZoom:16,minPoints:2,radius:40,extent:512,nodeSize:64,log:!1,generateId:!1,reduce:null,map:xe=>xe},le=Math.fround||(pe=new Float32Array(1),xe=>(pe[0]=+xe,pe[0]));var pe;class me{constructor(J){this.options=Object.assign(Object.create(se),J),this.trees=new Array(this.options.maxZoom+1),this.stride=this.options.reduce?7:6,this.clusterProps=[]}load(J){let{log:oe,minZoom:ue,maxZoom:we}=this.options;oe&&console.time("total time");let Fe=`prepare ${J.length} points`;oe&&console.time(Fe),this.points=J;let $e=[];for(let Ze=0;Ze<J.length;Ze++){let be=J[Ze];if(!be.geometry)continue;let[Ee,Be]=be.geometry.coordinates,gt=le(Ce(Ee)),Ae=le(Ye(Be));$e.push(gt,Ae,1/0,Ze,-1,1),this.options.reduce&&$e.push(0)}let nt=this.trees[we+1]=this._createTree($e);oe&&console.timeEnd(Fe);for(let Ze=we;Ze>=ue;Ze--){let be=+Date.now();nt=this.trees[Ze]=this._createTree(this._cluster(nt,Ze)),oe&&console.log("z%d: %d clusters in %dms",Ze,nt.numItems,+Date.now()-be)}return oe&&console.timeEnd("total time"),this}getClusters(J,oe){let ue=((J[0]+180)%360+360)%360-180,we=Math.max(-90,Math.min(90,J[1])),Fe=J[2]===180?180:((J[2]+180)%360+360)%360-180,$e=Math.max(-90,Math.min(90,J[3]));if(J[2]-J[0]>=360)ue=-180,Fe=180;else if(ue>Fe){let Be=this.getClusters([ue,we,180,$e],oe),gt=this.getClusters([-180,we,Fe,$e],oe);return Be.concat(gt)}let nt=this.trees[this._limitZoom(oe)],Ze=nt.range(Ce(ue),Ye($e),Ce(Fe),Ye(we)),be=nt.data,Ee=[];for(let Be of Ze){let gt=this.stride*Be;Ee.push(be[gt+5]>1?_e(be,gt,this.clusterProps):this.points[be[gt+3]])}return Ee}getChildren(J){let oe=this._getOriginId(J),ue=this._getOriginZoom(J),we="No cluster with the specified id.",Fe=this.trees[ue];if(!Fe)throw new Error(we);let $e=Fe.data;if(oe*this.stride>=$e.length)throw new Error(we);let nt=this.options.radius/(this.options.extent*Math.pow(2,ue-1)),Ze=Fe.within($e[oe*this.stride],$e[oe*this.stride+1],nt),be=[];for(let Ee of Ze){let Be=Ee*this.stride;$e[Be+4]===J&&be.push($e[Be+5]>1?_e($e,Be,this.clusterProps):this.points[$e[Be+3]])}if(be.length===0)throw new Error(we);return be}getLeaves(J,oe,ue){let we=[];return this._appendLeaves(we,J,oe=oe||10,ue=ue||0,0),we}getTile(J,oe,ue){let we=this.trees[this._limitZoom(J)],Fe=Math.pow(2,J),{extent:$e,radius:nt}=this.options,Ze=nt/$e,be=(ue-Ze)/Fe,Ee=(ue+1+Ze)/Fe,Be={features:[]};return this._addTileFeatures(we.range((oe-Ze)/Fe,be,(oe+1+Ze)/Fe,Ee),we.data,oe,ue,Fe,Be),oe===0&&this._addTileFeatures(we.range(1-Ze/Fe,be,1,Ee),we.data,Fe,ue,Fe,Be),oe===Fe-1&&this._addTileFeatures(we.range(0,be,Ze/Fe,Ee),we.data,-1,ue,Fe,Be),Be.features.length?Be:null}getClusterExpansionZoom(J){let oe=this._getOriginZoom(J)-1;for(;oe<=this.options.maxZoom;){let ue=this.getChildren(J);if(oe++,ue.length!==1)break;J=ue[0].properties.cluster_id}return oe}_appendLeaves(J,oe,ue,we,Fe){let $e=this.getChildren(oe);for(let nt of $e){let Ze=nt.properties;if(Ze&&Ze.cluster?Fe+Ze.point_count<=we?Fe+=Ze.point_count:Fe=this._appendLeaves(J,Ze.cluster_id,ue,we,Fe):Fe<we?Fe++:J.push(nt),J.length===ue)break}return Fe}_createTree(J){let oe=new o.aI(J.length/this.stride|0,this.options.nodeSize,Float32Array);for(let ue=0;ue<J.length;ue+=this.stride)oe.add(J[ue],J[ue+1]);return oe.finish(),oe.data=J,oe}_addTileFeatures(J,oe,ue,we,Fe,$e){for(let nt of J){let Ze=nt*this.stride,be=oe[Ze+5]>1,Ee,Be,gt;if(be)Ee=de(oe,Ze,this.clusterProps),Be=oe[Ze],gt=oe[Ze+1];else{let Oe=this.points[oe[Ze+3]];Ee=Oe.properties;let[xt,Bt]=Oe.geometry.coordinates;Be=Ce(xt),gt=Ye(Bt)}let Ae={type:1,geometry:[[Math.round(this.options.extent*(Be*Fe-ue)),Math.round(this.options.extent*(gt*Fe-we))]],tags:Ee},Dt;Dt=be||this.options.generateId?oe[Ze+3]:this.points[oe[Ze+3]].id,Dt!==void 0&&(Ae.id=Dt),$e.features.push(Ae)}}_limitZoom(J){return Math.max(this.options.minZoom,Math.min(Math.floor(+J),this.options.maxZoom+1))}_cluster(J,oe){let{radius:ue,extent:we,reduce:Fe,minPoints:$e}=this.options,nt=ue/(we*Math.pow(2,oe)),Ze=J.data,be=[],Ee=this.stride;for(let Be=0;Be<Ze.length;Be+=Ee){if(Ze[Be+2]<=oe)continue;Ze[Be+2]=oe;let gt=Ze[Be],Ae=Ze[Be+1],Dt=J.within(Ze[Be],Ze[Be+1],nt),Oe=Ze[Be+5],xt=Oe;for(let Bt of Dt){let Tr=Bt*Ee;Ze[Tr+2]>oe&&(xt+=Ze[Tr+5])}if(xt>Oe&&xt>=$e){let Bt,Tr=gt*Oe,dn=Ae*Oe,wt=-1,ln=(Be/Ee<<5)+(oe+1)+this.points.length;for(let Ar of Dt){let or=Ar*Ee;if(Ze[or+2]<=oe)continue;Ze[or+2]=oe;let Er=Ze[or+5];Tr+=Ze[or]*Er,dn+=Ze[or+1]*Er,Ze[or+4]=ln,Fe&&(Bt||(Bt=this._map(Ze,Be,!0),wt=this.clusterProps.length,this.clusterProps.push(Bt)),Fe(Bt,this._map(Ze,or)))}Ze[Be+4]=ln,be.push(Tr/xt,dn/xt,1/0,ln,-1,xt),Fe&&be.push(wt)}else{for(let Bt=0;Bt<Ee;Bt++)be.push(Ze[Be+Bt]);if(xt>1)for(let Bt of Dt){let Tr=Bt*Ee;if(!(Ze[Tr+2]<=oe)){Ze[Tr+2]=oe;for(let dn=0;dn<Ee;dn++)be.push(Ze[Tr+dn])}}}}return be}_getOriginId(J){return J-this.points.length>>5}_getOriginZoom(J){return(J-this.points.length)%32}_map(J,oe,ue){if(J[oe+5]>1){let $e=this.clusterProps[J[oe+6]];return ue?Object.assign({},$e):$e}let we=this.points[J[oe+3]].properties,Fe=this.options.map(we);return ue&&Fe===we?Object.assign({},Fe):Fe}}function _e(xe,J,oe){return{type:"Feature",id:xe[J+3],properties:de(xe,J,oe),geometry:{type:"Point",coordinates:[(ue=xe[J],360*(ue-.5)),rt(xe[J+1])]}};var ue}function de(xe,J,oe){let ue=xe[J+5],we=ue>=1e4?`${Math.round(ue/1e3)}k`:ue>=1e3?Math.round(ue/100)/10+"k":ue,Fe=xe[J+6],$e=Fe===-1?{}:Object.assign({},oe[Fe]);return Object.assign($e,{cluster:!0,cluster_id:xe[J+3],point_count:ue,point_count_abbreviated:we})}function Ce(xe){return xe/360+.5}function Ye(xe){let J=Math.sin(xe*Math.PI/180),oe=.5-.25*Math.log((1+J)/(1-J))/Math.PI;return oe<0?0:oe>1?1:oe}function rt(xe){let J=(180-360*xe)*Math.PI/180;return 360*Math.atan(Math.exp(J))/Math.PI-90}function ct(xe,J,oe,ue){let we=ue,Fe=J+(oe-J>>1),$e,nt=oe-J,Ze=xe[J],be=xe[J+1],Ee=xe[oe],Be=xe[oe+1];for(let gt=J+3;gt<oe;gt+=3){let Ae=qe(xe[gt],xe[gt+1],Ze,be,Ee,Be);if(Ae>we)$e=gt,we=Ae;else if(Ae===we){let Dt=Math.abs(gt-Fe);Dt<nt&&($e=gt,nt=Dt)}}we>ue&&($e-J>3&&ct(xe,J,$e,ue),xe[$e+2]=we,oe-$e>3&&ct(xe,$e,oe,ue))}function qe(xe,J,oe,ue,we,Fe){let $e=we-oe,nt=Fe-ue;if($e!==0||nt!==0){let Ze=((xe-oe)*$e+(J-ue)*nt)/($e*$e+nt*nt);Ze>1?(oe=we,ue=Fe):Ze>0&&(oe+=$e*Ze,ue+=nt*Ze)}return $e=xe-oe,nt=J-ue,$e*$e+nt*nt}function lt(xe,J,oe,ue){let we={id:xe==null?null:xe,type:J,geometry:oe,tags:ue,minX:1/0,minY:1/0,maxX:-1/0,maxY:-1/0};if(J==="Point"||J==="MultiPoint"||J==="LineString")bt(we,oe);else if(J==="Polygon")bt(we,oe[0]);else if(J==="MultiLineString")for(let Fe of oe)bt(we,Fe);else if(J==="MultiPolygon")for(let Fe of oe)bt(we,Fe[0]);return we}function bt(xe,J){for(let oe=0;oe<J.length;oe+=3)xe.minX=Math.min(xe.minX,J[oe]),xe.minY=Math.min(xe.minY,J[oe+1]),xe.maxX=Math.max(xe.maxX,J[oe]),xe.maxY=Math.max(xe.maxY,J[oe+1])}function Tt(xe,J,oe,ue){if(!J.geometry)return;let we=J.geometry.coordinates;if(we&&we.length===0)return;let Fe=J.geometry.type,$e=Math.pow(oe.tolerance/((1<<oe.maxZoom)*oe.extent),2),nt=[],Ze=J.id;if(oe.promoteId?Ze=J.properties[oe.promoteId]:oe.generateId&&(Ze=ue||0),Fe==="Point")et(we,nt);else if(Fe==="MultiPoint")for(let be of we)et(be,nt);else if(Fe==="LineString")pt(we,nt,$e,!1);else if(Fe==="MultiLineString"){if(oe.lineMetrics){for(let be of we)nt=[],pt(be,nt,$e,!1),xe.push(lt(Ze,"LineString",nt,J.properties));return}ot(we,nt,$e,!1)}else if(Fe==="Polygon")ot(we,nt,$e,!0);else{if(Fe!=="MultiPolygon"){if(Fe==="GeometryCollection"){for(let be of J.geometry.geometries)Tt(xe,{id:Ze,geometry:be,properties:J.properties},oe,ue);return}throw new Error("Input data is not a valid GeoJSON object.")}for(let be of we){let Ee=[];ot(be,Ee,$e,!0),nt.push(Ee)}}xe.push(lt(Ze,Fe,nt,J.properties))}function et(xe,J){J.push(We(xe[0]),Ne(xe[1]),0)}function pt(xe,J,oe,ue){let we,Fe,$e=0;for(let Ze=0;Ze<xe.length;Ze++){let be=We(xe[Ze][0]),Ee=Ne(xe[Ze][1]);J.push(be,Ee,0),Ze>0&&($e+=ue?(we*Ee-be*Fe)/2:Math.sqrt(Math.pow(be-we,2)+Math.pow(Ee-Fe,2))),we=be,Fe=Ee}let nt=J.length-3;J[2]=1,ct(J,0,nt,oe),J[nt+2]=1,J.size=Math.abs($e),J.start=0,J.end=J.size}function ot(xe,J,oe,ue){for(let we=0;we<xe.length;we++){let Fe=[];pt(xe[we],Fe,oe,ue),J.push(Fe)}}function We(xe){return xe/360+.5}function Ne(xe){let J=Math.sin(xe*Math.PI/180),oe=.5-.25*Math.log((1+J)/(1-J))/Math.PI;return oe<0?0:oe>1?1:oe}function Ke(xe,J,oe,ue,we,Fe,$e,nt){if(ue/=J,Fe>=(oe/=J)&&$e<ue)return xe;if($e<oe||Fe>=ue)return null;let Ze=[];for(let be of xe){let Ee=be.geometry,Be=be.type,gt=we===0?be.minX:be.minY,Ae=we===0?be.maxX:be.maxY;if(gt>=oe&&Ae<ue){Ze.push(be);continue}if(Ae<oe||gt>=ue)continue;let Dt=[];if(Be==="Point"||Be==="MultiPoint")Ge(Ee,Dt,oe,ue,we);else if(Be==="LineString")ft(Ee,Dt,oe,ue,we,!1,nt.lineMetrics);else if(Be==="MultiLineString")Ot(Ee,Dt,oe,ue,we,!1);else if(Be==="Polygon")Ot(Ee,Dt,oe,ue,we,!0);else if(Be==="MultiPolygon")for(let Oe of Ee){let xt=[];Ot(Oe,xt,oe,ue,we,!0),xt.length&&Dt.push(xt)}if(Dt.length){if(nt.lineMetrics&&Be==="LineString"){for(let Oe of Dt)Ze.push(lt(be.id,Be,Oe,be.tags));continue}Be!=="LineString"&&Be!=="MultiLineString"||(Dt.length===1?(Be="LineString",Dt=Dt[0]):Be="MultiLineString"),Be!=="Point"&&Be!=="MultiPoint"||(Be=Dt.length===3?"Point":"MultiPoint"),Ze.push(lt(be.id,Be,Dt,be.tags))}}return Ze.length?Ze:null}function Ge(xe,J,oe,ue,we){for(let Fe=0;Fe<xe.length;Fe+=3){let $e=xe[Fe+we];$e>=oe&&$e<=ue&&At(J,xe[Fe],xe[Fe+1],xe[Fe+2])}}function ft(xe,J,oe,ue,we,Fe,$e){let nt=mt(xe),Ze=we===0?Mt:Yt,be,Ee,Be=xe.start;for(let xt=0;xt<xe.length-3;xt+=3){let Bt=xe[xt],Tr=xe[xt+1],dn=xe[xt+2],wt=xe[xt+3],ln=xe[xt+4],Ar=we===0?Bt:Tr,or=we===0?wt:ln,Er=!1;$e&&(be=Math.sqrt(Math.pow(Bt-wt,2)+Math.pow(Tr-ln,2))),Ar<oe?or>oe&&(Ee=Ze(nt,Bt,Tr,wt,ln,oe),$e&&(nt.start=Be+be*Ee)):Ar>ue?or<ue&&(Ee=Ze(nt,Bt,Tr,wt,ln,ue),$e&&(nt.start=Be+be*Ee)):At(nt,Bt,Tr,dn),or<oe&&Ar>=oe&&(Ee=Ze(nt,Bt,Tr,wt,ln,oe),Er=!0),or>ue&&Ar<=ue&&(Ee=Ze(nt,Bt,Tr,wt,ln,ue),Er=!0),!Fe&&Er&&($e&&(nt.end=Be+be*Ee),J.push(nt),nt=mt(xe)),$e&&(Be+=be)}let gt=xe.length-3,Ae=xe[gt],Dt=xe[gt+1],Oe=we===0?Ae:Dt;Oe>=oe&&Oe<=ue&&At(nt,Ae,Dt,xe[gt+2]),gt=nt.length-3,Fe&&gt>=3&&(nt[gt]!==nt[0]||nt[gt+1]!==nt[1])&&At(nt,nt[0],nt[1],nt[2]),nt.length&&J.push(nt)}function mt(xe){let J=[];return J.size=xe.size,J.start=xe.start,J.end=xe.end,J}function Ot(xe,J,oe,ue,we,Fe){for(let $e of xe)ft($e,J,oe,ue,we,Fe,!1)}function At(xe,J,oe,ue){xe.push(J,oe,ue)}function Mt(xe,J,oe,ue,we,Fe){let $e=(Fe-J)/(ue-J);return At(xe,Fe,oe+(we-oe)*$e,1),$e}function Yt(xe,J,oe,ue,we,Fe){let $e=(Fe-oe)/(we-oe);return At(xe,J+(ue-J)*$e,Fe,1),$e}function qt(xe,J){let oe=[];for(let ue=0;ue<xe.length;ue++){let we=xe[ue],Fe=we.type,$e;if(Fe==="Point"||Fe==="MultiPoint"||Fe==="LineString")$e=Ut(we.geometry,J);else if(Fe==="MultiLineString"||Fe==="Polygon"){$e=[];for(let nt of we.geometry)$e.push(Ut(nt,J))}else if(Fe==="MultiPolygon"){$e=[];for(let nt of we.geometry){let Ze=[];for(let be of nt)Ze.push(Ut(be,J));$e.push(Ze)}}oe.push(lt(we.id,Fe,$e,we.tags))}return oe}function Ut(xe,J){let oe=[];oe.size=xe.size,xe.start!==void 0&&(oe.start=xe.start,oe.end=xe.end);for(let ue=0;ue<xe.length;ue+=3)oe.push(xe[ue]+J,xe[ue+1],xe[ue+2]);return oe}function sr(xe,J){if(xe.transformed)return xe;let oe=1<<xe.z,ue=xe.x,we=xe.y;for(let Fe of xe.features){let $e=Fe.geometry,nt=Fe.type;if(Fe.geometry=[],nt===1)for(let Ze=0;Ze<$e.length;Ze+=2)Fe.geometry.push(jr($e[Ze],$e[Ze+1],J,oe,ue,we));else for(let Ze=0;Ze<$e.length;Ze++){let be=[];for(let Ee=0;Ee<$e[Ze].length;Ee+=2)be.push(jr($e[Ze][Ee],$e[Ze][Ee+1],J,oe,ue,we));Fe.geometry.push(be)}}return xe.transformed=!0,xe}function jr(xe,J,oe,ue,we,Fe){return[Math.round(oe*(xe*ue-we)),Math.round(oe*(J*ue-Fe))]}function Pr(xe,J,oe,ue,we){let Fe=J===we.maxZoom?0:we.tolerance/((1<<J)*we.extent),$e={features:[],numPoints:0,numSimplified:0,numFeatures:xe.length,source:null,x:oe,y:ue,z:J,transformed:!1,minX:2,minY:1,maxX:-1,maxY:0};for(let nt of xe)br($e,nt,Fe,we);return $e}function br(xe,J,oe,ue){let we=J.geometry,Fe=J.type,$e=[];if(xe.minX=Math.min(xe.minX,J.minX),xe.minY=Math.min(xe.minY,J.minY),xe.maxX=Math.max(xe.maxX,J.maxX),xe.maxY=Math.max(xe.maxY,J.maxY),Fe==="Point"||Fe==="MultiPoint")for(let nt=0;nt<we.length;nt+=3)$e.push(we[nt],we[nt+1]),xe.numPoints++,xe.numSimplified++;else if(Fe==="LineString")Dr($e,we,xe,oe,!1,!1);else if(Fe==="MultiLineString"||Fe==="Polygon")for(let nt=0;nt<we.length;nt++)Dr($e,we[nt],xe,oe,Fe==="Polygon",nt===0);else if(Fe==="MultiPolygon")for(let nt=0;nt<we.length;nt++){let Ze=we[nt];for(let be=0;be<Ze.length;be++)Dr($e,Ze[be],xe,oe,!0,be===0)}if($e.length){let nt=J.tags||null;if(Fe==="LineString"&&ue.lineMetrics){nt={};for(let be in J.tags)nt[be]=J.tags[be];nt.mapbox_clip_start=we.start/we.size,nt.mapbox_clip_end=we.end/we.size}let Ze={geometry:$e,type:Fe==="Polygon"||Fe==="MultiPolygon"?3:Fe==="LineString"||Fe==="MultiLineString"?2:1,tags:nt};J.id!==null&&(Ze.id=J.id),xe.features.push(Ze)}}function Dr(xe,J,oe,ue,we,Fe){let $e=ue*ue;if(ue>0&&J.size<(we?$e:ue))return void(oe.numPoints+=J.length/3);let nt=[];for(let Ze=0;Ze<J.length;Ze+=3)(ue===0||J[Ze+2]>$e)&&(oe.numSimplified++,nt.push(J[Ze],J[Ze+1])),oe.numPoints++;we&&function(Ze,be){let Ee=0;for(let Be=0,gt=Ze.length,Ae=gt-2;Be<gt;Ae=Be,Be+=2)Ee+=(Ze[Be]-Ze[Ae])*(Ze[Be+1]+Ze[Ae+1]);if(Ee>0===be)for(let Be=0,gt=Ze.length;Be<gt/2;Be+=2){let Ae=Ze[Be],Dt=Ze[Be+1];Ze[Be]=Ze[gt-2-Be],Ze[Be+1]=Ze[gt-1-Be],Ze[gt-2-Be]=Ae,Ze[gt-1-Be]=Dt}}(nt,Fe),xe.push(nt)}let ke={maxZoom:14,indexMaxZoom:5,indexMaxPoints:1e5,tolerance:3,extent:4096,buffer:64,lineMetrics:!1,promoteId:null,generateId:!1,debug:0};class Je{constructor(J,oe){let ue=(oe=this.options=function(Fe,$e){for(let nt in $e)Fe[nt]=$e[nt];return Fe}(Object.create(ke),oe)).debug;if(ue&&console.time("preprocess data"),oe.maxZoom<0||oe.maxZoom>24)throw new Error("maxZoom should be in the 0-24 range");if(oe.promoteId&&oe.generateId)throw new Error("promoteId and generateId cannot be used together.");let we=function(Fe,$e){let nt=[];if(Fe.type==="FeatureCollection")for(let Ze=0;Ze<Fe.features.length;Ze++)Tt(nt,Fe.features[Ze],$e,Ze);else Tt(nt,Fe.type==="Feature"?Fe:{geometry:Fe},$e);return nt}(J,oe);this.tiles={},this.tileCoords=[],ue&&(console.timeEnd("preprocess data"),console.log("index: maxZoom: %d, maxPoints: %d",oe.indexMaxZoom,oe.indexMaxPoints),console.time("generate tiles"),this.stats={},this.total=0),we=function(Fe,$e){let nt=$e.buffer/$e.extent,Ze=Fe,be=Ke(Fe,1,-1-nt,nt,0,-1,2,$e),Ee=Ke(Fe,1,1-nt,2+nt,0,-1,2,$e);return(be||Ee)&&(Ze=Ke(Fe,1,-nt,1+nt,0,-1,2,$e)||[],be&&(Ze=qt(be,1).concat(Ze)),Ee&&(Ze=Ze.concat(qt(Ee,-1)))),Ze}(we,oe),we.length&&this.splitTile(we,0,0,0),ue&&(we.length&&console.log("features: %d, points: %d",this.tiles[0].numFeatures,this.tiles[0].numPoints),console.timeEnd("generate tiles"),console.log("tiles generated:",this.total,JSON.stringify(this.stats)))}splitTile(J,oe,ue,we,Fe,$e,nt){let Ze=[J,oe,ue,we],be=this.options,Ee=be.debug;for(;Ze.length;){we=Ze.pop(),ue=Ze.pop(),oe=Ze.pop(),J=Ze.pop();let Be=1<<oe,gt=tt(oe,ue,we),Ae=this.tiles[gt];if(!Ae&&(Ee>1&&console.time("creation"),Ae=this.tiles[gt]=Pr(J,oe,ue,we,be),this.tileCoords.push({z:oe,x:ue,y:we}),Ee)){Ee>1&&(console.log("tile z%d-%d-%d (features: %d, points: %d, simplified: %d)",oe,ue,we,Ae.numFeatures,Ae.numPoints,Ae.numSimplified),console.timeEnd("creation"));let Er=`z${oe}`;this.stats[Er]=(this.stats[Er]||0)+1,this.total++}if(Ae.source=J,Fe==null){if(oe===be.indexMaxZoom||Ae.numPoints<=be.indexMaxPoints)continue}else{if(oe===be.maxZoom||oe===Fe)continue;if(Fe!=null){let Er=Fe-oe;if(ue!==$e>>Er||we!==nt>>Er)continue}}if(Ae.source=null,J.length===0)continue;Ee>1&&console.time("clipping");let Dt=.5*be.buffer/be.extent,Oe=.5-Dt,xt=.5+Dt,Bt=1+Dt,Tr=null,dn=null,wt=null,ln=null,Ar=Ke(J,Be,ue-Dt,ue+xt,0,Ae.minX,Ae.maxX,be),or=Ke(J,Be,ue+Oe,ue+Bt,0,Ae.minX,Ae.maxX,be);J=null,Ar&&(Tr=Ke(Ar,Be,we-Dt,we+xt,1,Ae.minY,Ae.maxY,be),dn=Ke(Ar,Be,we+Oe,we+Bt,1,Ae.minY,Ae.maxY,be),Ar=null),or&&(wt=Ke(or,Be,we-Dt,we+xt,1,Ae.minY,Ae.maxY,be),ln=Ke(or,Be,we+Oe,we+Bt,1,Ae.minY,Ae.maxY,be),or=null),Ee>1&&console.timeEnd("clipping"),Ze.push(Tr||[],oe+1,2*ue,2*we),Ze.push(dn||[],oe+1,2*ue,2*we+1),Ze.push(wt||[],oe+1,2*ue+1,2*we),Ze.push(ln||[],oe+1,2*ue+1,2*we+1)}}getTile(J,oe,ue){J=+J,oe=+oe,ue=+ue;let we=this.options,{extent:Fe,debug:$e}=we;if(J<0||J>24)return null;let nt=1<<J,Ze=tt(J,oe=oe+nt&nt-1,ue);if(this.tiles[Ze])return sr(this.tiles[Ze],Fe);$e>1&&console.log("drilling down to z%d-%d-%d",J,oe,ue);let be,Ee=J,Be=oe,gt=ue;for(;!be&&Ee>0;)Ee--,Be>>=1,gt>>=1,be=this.tiles[tt(Ee,Be,gt)];return be&&be.source?($e>1&&(console.log("found parent tile z%d-%d-%d",Ee,Be,gt),console.time("drilling down")),this.splitTile(be.source,Ee,Be,gt,J,oe,ue),$e>1&&console.timeEnd("drilling down"),this.tiles[Ze]?sr(this.tiles[Ze],Fe):null):null}}function tt(xe,J,oe){return 32*((1<<xe)*oe+J)+xe}class Ft extends m{constructor(){super(...arguments),this._dataUpdateable=new Map}loadVectorTile(J,oe){return o._(this,void 0,void 0,function*(){let ue=J.tileID.canonical;if(!this._geoJSONIndex)throw new Error("Unable to parse the data into a cluster or geojson");let we=this._geoJSONIndex.getTile(ue.z,ue.x,ue.y);if(!we)return null;let Fe=new D(we.features,{version:2,extent:o.$}),$e=function(nt){let Ze=new o.cM;return function(be,Ee){for(let Be in be.layers)Ee.writeMessage(3,k,be.layers[Be])}(nt,Ze),Ze.finish()}(Fe);return $e.byteOffset===0&&$e.byteLength===$e.buffer.byteLength||($e=new Uint8Array($e)),{vectorTile:Fe,rawData:$e.buffer}})}loadData(J){return o._(this,void 0,void 0,function*(){var oe;(oe=this._pendingRequest)===null||oe===void 0||oe.abort();let ue=!!(J&&J.request&&J.request.collectResourceTiming)&&new o.cN(J.request);this._pendingRequest=new AbortController;try{this._pendingData=this.loadAndProcessGeoJSON(J,this._pendingRequest);let we=yield this._pendingData;this._geoJSONIndex=J.cluster?new me(function({superclusterOptions:$e,clusterProperties:nt}){if(!nt||!$e)return $e;let Ze={},be={},Ee={accumulated:null,zoom:0},Be={properties:null},gt=Object.keys(nt);for(let Ae of gt){let[Dt,Oe]=nt[Ae],xt=o.cT(Oe),Bt=o.cT(typeof Dt=="string"?[Dt,["accumulated"],["get",Ae]]:Dt);Ze[Ae]=xt.value,be[Ae]=Bt.value}return $e.map=Ae=>{Be.properties=Ae;let Dt={};for(let Oe of gt)Dt[Oe]=Ze[Oe].evaluate(Ee,Be);return Dt},$e.reduce=(Ae,Dt)=>{Be.properties=Dt;for(let Oe of gt)Ee.accumulated=Ae[Oe],Ae[Oe]=be[Oe].evaluate(Ee,Be)},$e}(J)).load(we.features):function($e,nt){return new Je($e,nt)}(we,J.geojsonVtOptions),this.loaded={};let Fe={data:we};if(ue){let $e=ue.finish();$e&&(Fe.resourceTiming={},Fe.resourceTiming[J.source]=JSON.parse(JSON.stringify($e)))}return Fe}catch(we){if(delete this._pendingRequest,o.cy(we))return{abandoned:!0};throw we}})}getData(){return o._(this,void 0,void 0,function*(){return this._pendingData})}reloadTile(J){let oe=this.loaded;return oe&&oe[J.uid]?super.reloadTile(J):this.loadTile(J)}loadAndProcessGeoJSON(J,oe){return o._(this,void 0,void 0,function*(){let ue=yield this.loadGeoJSON(J,oe);if(delete this._pendingRequest,typeof ue!="object")throw new Error(`Input data given to '${J.source}' is not a valid GeoJSON object.`);if(P(ue,!0),J.filter){let we=o.cT(J.filter,{type:"boolean","property-type":"data-driven",overridable:!1,transition:!1});if(we.result==="error")throw new Error(we.value.map($e=>`${$e.key}: ${$e.message}`).join(", "));ue={type:"FeatureCollection",features:ue.features.filter($e=>we.value.evaluate({zoom:0},$e))}}return ue})}loadGeoJSON(J,oe){return o._(this,void 0,void 0,function*(){let{promoteId:ue}=J;if(J.request){let we=yield o.j(J.request,oe);return this._dataUpdateable=o.cV(we.data,ue)?o.cU(we.data,ue):void 0,we.data}if(typeof J.data=="string")try{let we=JSON.parse(J.data);return this._dataUpdateable=o.cV(we,ue)?o.cU(we,ue):void 0,we}catch(we){throw new Error(`Input data given to '${J.source}' is not a valid GeoJSON object.`)}if(!J.dataDiff)throw new Error(`Input data given to '${J.source}' is not a valid GeoJSON object.`);if(!this._dataUpdateable)throw new Error(`Cannot update existing geojson data in ${J.source}`);return o.cW(this._dataUpdateable,J.dataDiff,ue),{type:"FeatureCollection",features:Array.from(this._dataUpdateable.values())}})}removeSource(J){return o._(this,void 0,void 0,function*(){this._pendingRequest&&this._pendingRequest.abort()})}getClusterExpansionZoom(J){return this._geoJSONIndex.getClusterExpansionZoom(J.clusterId)}getClusterChildren(J){return this._geoJSONIndex.getChildren(J.clusterId)}getClusterLeaves(J){return this._geoJSONIndex.getLeaves(J.clusterId,J.limit,J.offset)}}class Wt{constructor(J){this.self=J,this.actor=new o.J(J),this.layerIndexes={},this.availableImages={},this.workerSources={},this.demWorkerSources={},this.externalWorkerSourceTypes={},this.self.registerWorkerSource=(oe,ue)=>{if(this.externalWorkerSourceTypes[oe])throw new Error(`Worker source with name "${oe}" already registered.`);this.externalWorkerSourceTypes[oe]=ue},this.self.addProtocol=o.cA,this.self.removeProtocol=o.cB,this.self.registerRTLTextPlugin=oe=>{o.cX.setMethods(oe)},this.actor.registerMessageHandler("LDT",(oe,ue)=>this._getDEMWorkerSource(oe,ue.source).loadTile(ue)),this.actor.registerMessageHandler("RDT",(oe,ue)=>o._(this,void 0,void 0,function*(){this._getDEMWorkerSource(oe,ue.source).removeTile(ue)})),this.actor.registerMessageHandler("GCEZ",(oe,ue)=>o._(this,void 0,void 0,function*(){return this._getWorkerSource(oe,ue.type,ue.source).getClusterExpansionZoom(ue)})),this.actor.registerMessageHandler("GCC",(oe,ue)=>o._(this,void 0,void 0,function*(){return this._getWorkerSource(oe,ue.type,ue.source).getClusterChildren(ue)})),this.actor.registerMessageHandler("GCL",(oe,ue)=>o._(this,void 0,void 0,function*(){return this._getWorkerSource(oe,ue.type,ue.source).getClusterLeaves(ue)})),this.actor.registerMessageHandler("LD",(oe,ue)=>this._getWorkerSource(oe,ue.type,ue.source).loadData(ue)),this.actor.registerMessageHandler("GD",(oe,ue)=>this._getWorkerSource(oe,ue.type,ue.source).getData()),this.actor.registerMessageHandler("LT",(oe,ue)=>this._getWorkerSource(oe,ue.type,ue.source).loadTile(ue)),this.actor.registerMessageHandler("RT",(oe,ue)=>this._getWorkerSource(oe,ue.type,ue.source).reloadTile(ue)),this.actor.registerMessageHandler("AT",(oe,ue)=>this._getWorkerSource(oe,ue.type,ue.source).abortTile(ue)),this.actor.registerMessageHandler("RMT",(oe,ue)=>this._getWorkerSource(oe,ue.type,ue.source).removeTile(ue)),this.actor.registerMessageHandler("RS",(oe,ue)=>o._(this,void 0,void 0,function*(){if(!this.workerSources[oe]||!this.workerSources[oe][ue.type]||!this.workerSources[oe][ue.type][ue.source])return;let we=this.workerSources[oe][ue.type][ue.source];delete this.workerSources[oe][ue.type][ue.source],we.removeSource!==void 0&&we.removeSource(ue)})),this.actor.registerMessageHandler("RM",oe=>o._(this,void 0,void 0,function*(){delete this.layerIndexes[oe],delete this.availableImages[oe],delete this.workerSources[oe],delete this.demWorkerSources[oe]})),this.actor.registerMessageHandler("SR",(oe,ue)=>o._(this,void 0,void 0,function*(){this.referrer=ue})),this.actor.registerMessageHandler("SRPS",(oe,ue)=>this._syncRTLPluginState(oe,ue)),this.actor.registerMessageHandler("IS",(oe,ue)=>o._(this,void 0,void 0,function*(){this.self.importScripts(ue)})),this.actor.registerMessageHandler("SI",(oe,ue)=>this._setImages(oe,ue)),this.actor.registerMessageHandler("UL",(oe,ue)=>o._(this,void 0,void 0,function*(){this._getLayerIndex(oe).update(ue.layers,ue.removedIds)})),this.actor.registerMessageHandler("SL",(oe,ue)=>o._(this,void 0,void 0,function*(){this._getLayerIndex(oe).replace(ue)}))}_setImages(J,oe){return o._(this,void 0,void 0,function*(){this.availableImages[J]=oe;for(let ue in this.workerSources[J]){let we=this.workerSources[J][ue];for(let Fe in we)we[Fe].availableImages=oe}})}_syncRTLPluginState(J,oe){return o._(this,void 0,void 0,function*(){return yield o.cX.syncState(oe,this.self.importScripts)})}_getAvailableImages(J){let oe=this.availableImages[J];return oe||(oe=[]),oe}_getLayerIndex(J){let oe=this.layerIndexes[J];return oe||(oe=this.layerIndexes[J]=new i),oe}_getWorkerSource(J,oe,ue){if(this.workerSources[J]||(this.workerSources[J]={}),this.workerSources[J][oe]||(this.workerSources[J][oe]={}),!this.workerSources[J][oe][ue]){let we={sendAsync:(Fe,$e)=>(Fe.targetMapId=J,this.actor.sendAsync(Fe,$e))};switch(oe){case"vector":this.workerSources[J][oe][ue]=new m(we,this._getLayerIndex(J),this._getAvailableImages(J));break;case"geojson":this.workerSources[J][oe][ue]=new Ft(we,this._getLayerIndex(J),this._getAvailableImages(J));break;default:this.workerSources[J][oe][ue]=new this.externalWorkerSourceTypes[oe](we,this._getLayerIndex(J),this._getAvailableImages(J))}}return this.workerSources[J][oe][ue]}_getDEMWorkerSource(J,oe){return this.demWorkerSources[J]||(this.demWorkerSources[J]={}),this.demWorkerSources[J][oe]||(this.demWorkerSources[J][oe]=new y),this.demWorkerSources[J][oe]}}return o.i(self)&&(self.worker=new Wt(self)),Wt}),r("index",["exports","./shared"],function(o,i){"use strict";var a="5.7.1";function c(){var S=new i.A(4);return i.A!=Float32Array&&(S[1]=0,S[2]=0),S[0]=1,S[3]=1,S}let h,m,y={now:typeof performance!="undefined"&&performance&&performance.now?performance.now.bind(performance):Date.now.bind(Date),frame(S,s,d){let v=requestAnimationFrame(T=>{x(),s(T)}),{unsubscribe:x}=i.s(S.signal,"abort",()=>{x(),cancelAnimationFrame(v),d(i.c())},!1)},frameAsync(S){return new Promise((s,d)=>{this.frame(S,s,d)})},getImageData(S,s=0){return this.getImageCanvasContext(S).getImageData(-s,-s,S.width+2*s,S.height+2*s)},getImageCanvasContext(S){let s=window.document.createElement("canvas"),d=s.getContext("2d",{willReadFrequently:!0});if(!d)throw new Error("failed to create canvas 2d context");return s.width=S.width,s.height=S.height,d.drawImage(S,0,0,S.width,S.height),d},resolveURL:S=>(h||(h=document.createElement("a")),h.href=S,h.href),hardwareConcurrency:typeof navigator!="undefined"&&navigator.hardwareConcurrency||4,get prefersReducedMotion(){return!!matchMedia&&(m==null&&(m=matchMedia("(prefers-reduced-motion: reduce)")),m.matches)}};class w{static testProp(s){if(!w.docStyle)return s[0];for(let d=0;d<s.length;d++)if(s[d]in w.docStyle)return s[d];return s[0]}static create(s,d,v){let x=window.document.createElement(s);return d!==void 0&&(x.className=d),v&&v.appendChild(x),x}static createNS(s,d){return window.document.createElementNS(s,d)}static disableDrag(){w.docStyle&&w.selectProp&&(w.userSelect=w.docStyle[w.selectProp],w.docStyle[w.selectProp]="none")}static enableDrag(){w.docStyle&&w.selectProp&&(w.docStyle[w.selectProp]=w.userSelect)}static setTransform(s,d){s.style[w.transformProp]=d}static addEventListener(s,d,v,x={}){s.addEventListener(d,v,"passive"in x?x:x.capture)}static removeEventListener(s,d,v,x={}){s.removeEventListener(d,v,"passive"in x?x:x.capture)}static suppressClickInternal(s){s.preventDefault(),s.stopPropagation(),window.removeEventListener("click",w.suppressClickInternal,!0)}static suppressClick(){window.addEventListener("click",w.suppressClickInternal,!0),window.setTimeout(()=>{window.removeEventListener("click",w.suppressClickInternal,!0)},0)}static getScale(s){let d=s.getBoundingClientRect();return{x:d.width/s.offsetWidth||1,y:d.height/s.offsetHeight||1,boundingClientRect:d}}static getPoint(s,d,v){let x=d.boundingClientRect;return new i.P((v.clientX-x.left)/d.x-s.clientLeft,(v.clientY-x.top)/d.y-s.clientTop)}static mousePos(s,d){let v=w.getScale(s);return w.getPoint(s,v,d)}static touchPos(s,d){let v=[],x=w.getScale(s);for(let T=0;T<d.length;T++)v.push(w.getPoint(s,x,d[T]));return v}static mouseButton(s){return s.button}static remove(s){s.parentNode&&s.parentNode.removeChild(s)}static sanitize(s){let d=new DOMParser().parseFromString(s,"text/html").body||document.createElement("body"),v=d.querySelectorAll("script");for(let x of v)x.remove();return w.clean(d),d.innerHTML}static isPossiblyDangerous(s,d){let v=d.replace(/\s+/g,"").toLowerCase();return!(!["src","href","xlink:href"].includes(s)||!v.includes("javascript:")&&!v.includes("data:"))||!!s.startsWith("on")||void 0}static clean(s){let d=s.children;for(let v of d)w.removeAttributes(v),w.clean(v)}static removeAttributes(s){for(let{name:d,value:v}of s.attributes)w.isPossiblyDangerous(d,v)&&s.removeAttribute(d)}}w.docStyle=typeof window!="undefined"&&window.document&&window.document.documentElement.style,w.selectProp=w.testProp(["userSelect","MozUserSelect","WebkitUserSelect","msUserSelect"]),w.transformProp=w.testProp(["transform","WebkitTransform"]);let E={supported:!1,testSupport:function(S){!j&&P&&(D?k(S):A=S)}},A,P,j=!1,D=!1;function k(S){let s=S.createTexture();S.bindTexture(S.TEXTURE_2D,s);try{if(S.texImage2D(S.TEXTURE_2D,0,S.RGBA,S.RGBA,S.UNSIGNED_BYTE,P),S.isContextLost())return;E.supported=!0}catch(d){}S.deleteTexture(s),j=!0}var z;typeof document!="undefined"&&(P=document.createElement("img"),P.onload=()=>{A&&k(A),A=null,D=!0},P.onerror=()=>{j=!0,A=null},P.src="data:image/webp;base64,UklGRh4AAABXRUJQVlA4TBEAAAAvAQAAAAfQ//73v/+BiOh/AAA="),function(S){let s,d,v,x;S.resetRequestQueue=()=>{s=[],d=0,v=0,x={}},S.addThrottleControl=q=>{let B=v++;return x[B]=q,B},S.removeThrottleControl=q=>{delete x[q],C()},S.getImage=(q,B,H=!0)=>new Promise((Y,$)=>{E.supported&&(q.headers||(q.headers={}),q.headers.accept="image/webp,*/*"),i.e(q,{type:"image"}),s.push({abortController:B,requestParameters:q,supportImageRefresh:H,state:"queued",onError:ee=>{$(ee)},onSuccess:ee=>{Y(ee)}}),C()});let T=q=>i._(this,void 0,void 0,function*(){q.state="running";let{requestParameters:B,supportImageRefresh:H,onError:Y,onSuccess:$,abortController:ee}=q,ie=H===!1&&!i.i(self)&&!i.g(B.url)&&(!B.headers||Object.keys(B.headers).reduce((ye,Me)=>ye&&Me==="accept",!0));d++;let ve=ie?R(B,ee):i.m(B,ee);try{let ye=yield ve;delete q.abortController,q.state="completed",ye.data instanceof HTMLImageElement||i.b(ye.data)?$(ye):ye.data&&$({data:yield(ge=ye.data,typeof createImageBitmap=="function"?i.f(ge):i.h(ge)),cacheControl:ye.cacheControl,expires:ye.expires})}catch(ye){delete q.abortController,Y(ye)}finally{d--,C()}var ge}),C=()=>{let q=(()=>{for(let B of Object.keys(x))if(x[B]())return!0;return!1})()?i.a.MAX_PARALLEL_IMAGE_REQUESTS_PER_FRAME:i.a.MAX_PARALLEL_IMAGE_REQUESTS;for(let B=d;B<q&&s.length>0;B++){let H=s.shift();H.abortController.signal.aborted?B--:T(H)}},R=(q,B)=>new Promise((H,Y)=>{let $=new Image,ee=q.url,ie=q.credentials;ie&&ie==="include"?$.crossOrigin="use-credentials":(ie&&ie==="same-origin"||!i.d(ee))&&($.crossOrigin="anonymous"),B.signal.addEventListener("abort",()=>{$.src="",Y(i.c())}),$.fetchPriority="high",$.onload=()=>{$.onerror=$.onload=null,H({data:$})},$.onerror=()=>{$.onerror=$.onload=null,B.signal.aborted||Y(new Error("Could not load image. Please make sure to use a supported image type such as PNG or JPEG. Note that SVGs are not supported."))},$.src=ee})}(z||(z={})),z.resetRequestQueue();class V{constructor(s){this._transformRequestFn=s!=null?s:null}transformRequest(s,d){return this._transformRequestFn&&this._transformRequestFn(s,d)||{url:s}}setTransformRequest(s){this._transformRequestFn=s}}function G(S){let s=[];if(typeof S=="string")s.push({id:"default",url:S});else if(S&&S.length>0){let d=[];for(let{id:v,url:x}of S){let T=`${v}${x}`;d.indexOf(T)===-1&&(d.push(T),s.push({id:v,url:x}))}}return s}function K(S,s,d){try{let v=new URL(S);return v.pathname+=`${s}${d}`,v.toString()}catch(v){throw new Error(`Invalid sprite URL "${S}", must be absolute. Modify style specification directly or use TransformStyleFunction to correct the issue dynamically`)}}function Z(S){let{userImage:s}=S;return!!(s&&s.render&&s.render())&&(S.data.replace(new Uint8Array(s.data.buffer)),!0)}class te extends i.E{constructor(){super(),this.images={},this.updatedImages={},this.callbackDispatchedThisFrame={},this.loaded=!1,this.requestors=[],this.patterns={},this.atlasImage=new i.R({width:1,height:1}),this.dirty=!0}isLoaded(){return this.loaded}setLoaded(s){if(this.loaded!==s&&(this.loaded=s,s)){for(let{ids:d,promiseResolve:v}of this.requestors)v(this._getImagesForIds(d));this.requestors=[]}}getImage(s){let d=this.images[s];if(d&&!d.data&&d.spriteData){let v=d.spriteData;d.data=new i.R({width:v.width,height:v.height},v.context.getImageData(v.x,v.y,v.width,v.height).data),d.spriteData=null}return d}addImage(s,d){if(this.images[s])throw new Error(`Image id ${s} already exist, use updateImage instead`);this._validate(s,d)&&(this.images[s]=d)}_validate(s,d){let v=!0,x=d.data||d.spriteData;return this._validateStretch(d.stretchX,x&&x.width)||(this.fire(new i.k(new Error(`Image "${s}" has invalid "stretchX" value`))),v=!1),this._validateStretch(d.stretchY,x&&x.height)||(this.fire(new i.k(new Error(`Image "${s}" has invalid "stretchY" value`))),v=!1),this._validateContent(d.content,d)||(this.fire(new i.k(new Error(`Image "${s}" has invalid "content" value`))),v=!1),v}_validateStretch(s,d){if(!s)return!0;let v=0;for(let x of s){if(x[0]<v||x[1]<x[0]||d<x[1])return!1;v=x[1]}return!0}_validateContent(s,d){if(!s)return!0;if(s.length!==4)return!1;let v=d.spriteData,x=v&&v.width||d.data.width,T=v&&v.height||d.data.height;return!(s[0]<0||x<s[0]||s[1]<0||T<s[1]||s[2]<0||x<s[2]||s[3]<0||T<s[3]||s[2]<s[0]||s[3]<s[1])}updateImage(s,d,v=!0){let x=this.getImage(s);if(v&&(x.data.width!==d.data.width||x.data.height!==d.data.height))throw new Error(`size mismatch between old image (${x.data.width}x${x.data.height}) and new image (${d.data.width}x${d.data.height}).`);d.version=x.version+1,this.images[s]=d,this.updatedImages[s]=!0}removeImage(s){let d=this.images[s];delete this.images[s],delete this.patterns[s],d.userImage&&d.userImage.onRemove&&d.userImage.onRemove()}listImages(){return Object.keys(this.images)}getImages(s){return new Promise((d,v)=>{let x=!0;if(!this.isLoaded())for(let T of s)this.images[T]||(x=!1);this.isLoaded()||x?d(this._getImagesForIds(s)):this.requestors.push({ids:s,promiseResolve:d})})}_getImagesForIds(s){let d={};for(let v of s){let x=this.getImage(v);x||(this.fire(new i.l("styleimagemissing",{id:v})),x=this.getImage(v)),x?d[v]={data:x.data.clone(),pixelRatio:x.pixelRatio,sdf:x.sdf,version:x.version,stretchX:x.stretchX,stretchY:x.stretchY,content:x.content,textFitWidth:x.textFitWidth,textFitHeight:x.textFitHeight,hasRenderCallback:!!(x.userImage&&x.userImage.render)}:i.w(`Image "${v}" could not be loaded. Please make sure you have added the image with map.addImage() or a "sprite" property in your style. You can provide missing images by listening for the "styleimagemissing" map event.`)}return d}getPixelSize(){let{width:s,height:d}=this.atlasImage;return{width:s,height:d}}getPattern(s){let d=this.patterns[s],v=this.getImage(s);if(!v)return null;if(d&&d.position.version===v.version)return d.position;if(d)d.position.version=v.version;else{let x={w:v.data.width+2,h:v.data.height+2,x:0,y:0},T=new i.I(x,v);this.patterns[s]={bin:x,position:T}}return this._updatePatternAtlas(),this.patterns[s].position}bind(s){let d=s.gl;this.atlasTexture?this.dirty&&(this.atlasTexture.update(this.atlasImage),this.dirty=!1):this.atlasTexture=new i.T(s,this.atlasImage,d.RGBA),this.atlasTexture.bind(d.LINEAR,d.CLAMP_TO_EDGE)}_updatePatternAtlas(){let s=[];for(let T in this.patterns)s.push(this.patterns[T].bin);let{w:d,h:v}=i.p(s),x=this.atlasImage;x.resize({width:d||1,height:v||1});for(let T in this.patterns){let{bin:C}=this.patterns[T],R=C.x+1,q=C.y+1,B=this.getImage(T).data,H=B.width,Y=B.height;i.R.copy(B,x,{x:0,y:0},{x:R,y:q},{width:H,height:Y}),i.R.copy(B,x,{x:0,y:Y-1},{x:R,y:q-1},{width:H,height:1}),i.R.copy(B,x,{x:0,y:0},{x:R,y:q+Y},{width:H,height:1}),i.R.copy(B,x,{x:H-1,y:0},{x:R-1,y:q},{width:1,height:Y}),i.R.copy(B,x,{x:0,y:0},{x:R+H,y:q},{width:1,height:Y})}this.dirty=!0}beginFrame(){this.callbackDispatchedThisFrame={}}dispatchRenderCallbacks(s){for(let d of s){if(this.callbackDispatchedThisFrame[d])continue;this.callbackDispatchedThisFrame[d]=!0;let v=this.getImage(d);v||i.w(`Image with ID: "${d}" was not found`),Z(v)&&this.updateImage(d,v)}}}let se=1e20;function le(S,s,d,v,x,T,C,R,q){for(let B=s;B<s+v;B++)pe(S,d*T+B,T,x,C,R,q);for(let B=d;B<d+x;B++)pe(S,B*T+s,1,v,C,R,q)}function pe(S,s,d,v,x,T,C){T[0]=0,C[0]=-se,C[1]=se,x[0]=S[s];for(let R=1,q=0,B=0;R<v;R++){x[R]=S[s+R*d];let H=R*R;do{let Y=T[q];B=(x[R]-x[Y]+H-Y*Y)/(R-Y)/2}while(B<=C[q]&&--q>-1);q++,T[q]=R,C[q]=B,C[q+1]=se}for(let R=0,q=0;R<v;R++){for(;C[q+1]<R;)q++;let B=T[q],H=R-B;S[s+R*d]=x[B]+H*H}}class me{constructor(s,d,v){this.requestManager=s,this.localIdeographFontFamily=d,this.entries={},this.lang=v}setURL(s){this.url=s}getGlyphs(s){return i._(this,void 0,void 0,function*(){let d=[];for(let T in s)for(let C of s[T])d.push(this._getAndCacheGlyphsPromise(T,C));let v=yield Promise.all(d),x={};for(let{stack:T,id:C,glyph:R}of v)x[T]||(x[T]={}),x[T][C]=R&&{id:R.id,bitmap:R.bitmap.clone(),metrics:R.metrics};return x})}_getAndCacheGlyphsPromise(s,d){return i._(this,void 0,void 0,function*(){let v=this.entries[s];v||(v=this.entries[s]={glyphs:{},requests:{},ranges:{}});let x=v.glyphs[d];if(x!==void 0)return{stack:s,id:d,glyph:x};if(x=this._tinySDF(v,s,d),x)return v.glyphs[d]=x,{stack:s,id:d,glyph:x};let T=Math.floor(d/256);if(256*T>65535)throw new Error("glyphs > 65535 not supported");if(v.ranges[T])return{stack:s,id:d,glyph:x};if(!this.url)throw new Error("glyphsUrl is not set");if(!v.requests[T]){let R=me.loadGlyphRange(s,T,this.url,this.requestManager);v.requests[T]=R}let C=yield v.requests[T];for(let R in C)this._doesCharSupportLocalGlyph(+R)||(v.glyphs[+R]=C[+R]);return v.ranges[T]=!0,{stack:s,id:d,glyph:C[d]||null}})}_doesCharSupportLocalGlyph(s){return!!this.localIdeographFontFamily&&(new RegExp("\\p{Ideo}|\\p{sc=Hang}|\\p{sc=Hira}|\\p{sc=Kana}","u").test(String.fromCodePoint(s))||i.u["CJK Unified Ideographs"](s)||i.u["Hangul Syllables"](s)||i.u.Hiragana(s)||i.u.Katakana(s)||i.u["CJK Symbols and Punctuation"](s)||i.u["Halfwidth and Fullwidth Forms"](s))}_tinySDF(s,d,v){let x=this.localIdeographFontFamily;if(!x||!this._doesCharSupportLocalGlyph(v))return;let T=s.tinySDF;if(!T){let R="400";/bold/i.test(d)?R="900":/medium/i.test(d)?R="500":/light/i.test(d)&&(R="200"),T=s.tinySDF=new me.TinySDF({fontSize:48,buffer:6,radius:16,cutoff:.25,lang:this.lang,fontFamily:x,fontWeight:R})}let C=T.draw(String.fromCharCode(v));return{id:v,bitmap:new i.q({width:C.width||60,height:C.height||60},C.data),metrics:{width:C.glyphWidth/2||24,height:C.glyphHeight/2||24,left:C.glyphLeft/2+.5||0,top:C.glyphTop/2-27.5||-8,advance:C.glyphAdvance/2||24,isDoubleResolution:!0}}}}me.loadGlyphRange=function(S,s,d,v){return i._(this,void 0,void 0,function*(){let x=256*s,T=x+255,C=v.transformRequest(d.replace("{fontstack}",S).replace("{range}",`${x}-${T}`),"Glyphs"),R=yield i.n(C,new AbortController);if(!R||!R.data)throw new Error(`Could not load glyph range. range: ${s}, ${x}-${T}`);let q={};for(let B of i.o(R.data))q[B.id]=B;return q})},me.TinySDF=class{constructor({fontSize:S=24,buffer:s=3,radius:d=8,cutoff:v=.25,fontFamily:x="sans-serif",fontWeight:T="normal",fontStyle:C="normal",lang:R=null}={}){this.buffer=s,this.cutoff=v,this.radius=d,this.lang=R;let q=this.size=S+4*s,B=this._createCanvas(q),H=this.ctx=B.getContext("2d",{willReadFrequently:!0});H.font=`${C} ${T} ${S}px ${x}`,H.textBaseline="alphabetic",H.textAlign="left",H.fillStyle="black",this.gridOuter=new Float64Array(q*q),this.gridInner=new Float64Array(q*q),this.f=new Float64Array(q),this.z=new Float64Array(q+1),this.v=new Uint16Array(q)}_createCanvas(S){let s=document.createElement("canvas");return s.width=s.height=S,s}draw(S){let{width:s,actualBoundingBoxAscent:d,actualBoundingBoxDescent:v,actualBoundingBoxLeft:x,actualBoundingBoxRight:T}=this.ctx.measureText(S),C=Math.ceil(d),R=Math.max(0,Math.min(this.size-this.buffer,Math.ceil(T-x))),q=Math.min(this.size-this.buffer,C+Math.ceil(v)),B=R+2*this.buffer,H=q+2*this.buffer,Y=Math.max(B*H,0),$=new Uint8ClampedArray(Y),ee={data:$,width:B,height:H,glyphWidth:R,glyphHeight:q,glyphTop:C,glyphLeft:0,glyphAdvance:s};if(R===0||q===0)return ee;let{ctx:ie,buffer:ve,gridInner:ge,gridOuter:ye}=this;this.lang&&(ie.lang=this.lang),ie.clearRect(ve,ve,R,q),ie.fillText(S,ve,ve+C);let Me=ie.getImageData(ve,ve,R,q);ye.fill(se,0,Y),ge.fill(0,0,Y);for(let Re=0;Re<q;Re++)for(let Pe=0;Pe<R;Pe++){let ze=Me.data[4*(Re*R+Pe)+3]/255;if(ze===0)continue;let He=(Re+ve)*B+Pe+ve;if(ze===1)ye[He]=0,ge[He]=se;else{let Le=.5-ze;ye[He]=Le>0?Le*Le:0,ge[He]=Le<0?Le*Le:0}}le(ye,0,0,B,H,B,this.f,this.v,this.z),le(ge,ve,ve,R,q,B,this.f,this.v,this.z);for(let Re=0;Re<Y;Re++){let Pe=Math.sqrt(ye[Re])-Math.sqrt(ge[Re]);$[Re]=Math.round(255-255*(Pe/this.radius+this.cutoff))}return ee}};class _e{constructor(){this.specification=i.v.light.position}possiblyEvaluate(s,d){return i.B(s.expression.evaluate(d))}interpolate(s,d,v){return{x:i.C.number(s.x,d.x,v),y:i.C.number(s.y,d.y,v),z:i.C.number(s.z,d.z,v)}}}let de;class Ce extends i.E{constructor(s){super(),de=de||new i.r({anchor:new i.D(i.v.light.anchor),position:new _e,color:new i.D(i.v.light.color),intensity:new i.D(i.v.light.intensity)}),this._transitionable=new i.t(de),this.setLight(s),this._transitioning=this._transitionable.untransitioned()}getLight(){return this._transitionable.serialize()}setLight(s,d={}){if(!this._validate(i.x,s,d))for(let v in s){let x=s[v];v.endsWith("-transition")?this._transitionable.setTransition(v.slice(0,-11),x):this._transitionable.setValue(v,x)}}updateTransitions(s){this._transitioning=this._transitionable.transitioned(s,this._transitioning)}hasTransition(){return this._transitioning.hasTransition()}recalculate(s){this.properties=this._transitioning.possiblyEvaluate(s)}_validate(s,d,v){return(!v||v.validate!==!1)&&i.y(this,s.call(i.z,{value:d,style:{glyphs:!0,sprite:!0},styleSpec:i.v}))}}let Ye=new i.r({"sky-color":new i.D(i.v.sky["sky-color"]),"horizon-color":new i.D(i.v.sky["horizon-color"]),"fog-color":new i.D(i.v.sky["fog-color"]),"fog-ground-blend":new i.D(i.v.sky["fog-ground-blend"]),"horizon-fog-blend":new i.D(i.v.sky["horizon-fog-blend"]),"sky-horizon-blend":new i.D(i.v.sky["sky-horizon-blend"]),"atmosphere-blend":new i.D(i.v.sky["atmosphere-blend"])});class rt extends i.E{constructor(s){super(),this._transitionable=new i.t(Ye),this.setSky(s),this._transitioning=this._transitionable.untransitioned(),this.recalculate(new i.F(0))}setSky(s,d={}){if(!this._validate(i.G,s,d)){s||(s={"sky-color":"transparent","horizon-color":"transparent","fog-color":"transparent","fog-ground-blend":1,"atmosphere-blend":0});for(let v in s){let x=s[v];v.endsWith("-transition")?this._transitionable.setTransition(v.slice(0,-11),x):this._transitionable.setValue(v,x)}}}getSky(){return this._transitionable.serialize()}updateTransitions(s){this._transitioning=this._transitionable.transitioned(s,this._transitioning)}hasTransition(){return this._transitioning.hasTransition()}recalculate(s){this.properties=this._transitioning.possiblyEvaluate(s)}_validate(s,d,v={}){return(v==null?void 0:v.validate)!==!1&&i.y(this,s.call(i.z,i.e({value:d,style:{glyphs:!0,sprite:!0},styleSpec:i.v})))}calculateFogBlendOpacity(s){return s<60?0:s<70?(s-60)/10:1}}class ct{constructor(s,d){this.width=s,this.height=d,this.nextRow=0,this.data=new Uint8Array(this.width*this.height),this.dashEntry={}}getDash(s,d){let v=s.join(",")+String(d);return this.dashEntry[v]||(this.dashEntry[v]=this.addDash(s,d)),this.dashEntry[v]}getDashRanges(s,d,v){let x=[],T=s.length%2==1?-s[s.length-1]*v:0,C=s[0]*v,R=!0;x.push({left:T,right:C,isDash:R,zeroLength:s[0]===0});let q=s[0];for(let B=1;B<s.length;B++){R=!R;let H=s[B];T=q*v,q+=H,C=q*v,x.push({left:T,right:C,isDash:R,zeroLength:H===0})}return x}addRoundDash(s,d,v){let x=d/2;for(let T=-v;T<=v;T++){let C=this.width*(this.nextRow+v+T),R=0,q=s[R];for(let B=0;B<this.width;B++){B/q.right>1&&(q=s[++R]);let H=Math.abs(B-q.left),Y=Math.abs(B-q.right),$=Math.min(H,Y),ee,ie=T/v*(x+1);if(q.isDash){let ve=x-Math.abs(ie);ee=Math.sqrt($*$+ve*ve)}else ee=x-Math.sqrt($*$+ie*ie);this.data[C+B]=Math.max(0,Math.min(255,ee+128))}}}addRegularDash(s){for(let R=s.length-1;R>=0;--R){let q=s[R],B=s[R+1];q.zeroLength?s.splice(R,1):B&&B.isDash===q.isDash&&(B.left=q.left,s.splice(R,1))}let d=s[0],v=s[s.length-1];d.isDash===v.isDash&&(d.left=v.left-this.width,v.right=d.right+this.width);let x=this.width*this.nextRow,T=0,C=s[T];for(let R=0;R<this.width;R++){R/C.right>1&&(C=s[++T]);let q=Math.abs(R-C.left),B=Math.abs(R-C.right),H=Math.min(q,B);this.data[x+R]=Math.max(0,Math.min(255,(C.isDash?H:-H)+128))}}addDash(s,d){let v=d?7:0,x=2*v+1;if(this.nextRow+x>this.height)return i.w("LineAtlas out of space"),null;let T=0;for(let R=0;R<s.length;R++)T+=s[R];if(T!==0){let R=this.width/T,q=this.getDashRanges(s,this.width,R);d?this.addRoundDash(q,R,v):this.addRegularDash(q)}let C={y:(this.nextRow+v+.5)/this.height,height:2*v/this.height,width:T};return this.nextRow+=x,this.dirty=!0,C}bind(s){let d=s.gl;this.texture?(d.bindTexture(d.TEXTURE_2D,this.texture),this.dirty&&(this.dirty=!1,d.texSubImage2D(d.TEXTURE_2D,0,0,0,this.width,this.height,d.ALPHA,d.UNSIGNED_BYTE,this.data))):(this.texture=d.createTexture(),d.bindTexture(d.TEXTURE_2D,this.texture),d.texParameteri(d.TEXTURE_2D,d.TEXTURE_WRAP_S,d.REPEAT),d.texParameteri(d.TEXTURE_2D,d.TEXTURE_WRAP_T,d.REPEAT),d.texParameteri(d.TEXTURE_2D,d.TEXTURE_MIN_FILTER,d.LINEAR),d.texParameteri(d.TEXTURE_2D,d.TEXTURE_MAG_FILTER,d.LINEAR),d.texImage2D(d.TEXTURE_2D,0,d.ALPHA,this.width,this.height,0,d.ALPHA,d.UNSIGNED_BYTE,this.data))}}let qe="maplibre_preloaded_worker_pool";class lt{constructor(){this.active={}}acquire(s){if(!this.workers)for(this.workers=[];this.workers.length<lt.workerCount;)this.workers.push(new Worker(i.a.WORKER_URL));return this.active[s]=!0,this.workers.slice()}release(s){delete this.active[s],this.numActive()===0&&(this.workers.forEach(d=>{d.terminate()}),this.workers=null)}isPreloaded(){return!!this.active[qe]}numActive(){return Object.keys(this.active).length}}let bt=Math.floor(y.hardwareConcurrency/2),Tt,et;function pt(){return Tt||(Tt=new lt),Tt}lt.workerCount=i.H(globalThis)?Math.max(Math.min(bt,3),1):1;class ot{constructor(s,d){this.workerPool=s,this.actors=[],this.currentActor=0,this.id=d;let v=this.workerPool.acquire(d);for(let x=0;x<v.length;x++){let T=new i.J(v[x],d);T.name=`Worker ${x}`,this.actors.push(T)}if(!this.actors.length)throw new Error("No actors found")}broadcast(s,d){let v=[];for(let x of this.actors)v.push(x.sendAsync({type:s,data:d}));return Promise.all(v)}getActor(){return this.currentActor=(this.currentActor+1)%this.actors.length,this.actors[this.currentActor]}remove(s=!0){this.actors.forEach(d=>{d.remove()}),this.actors=[],s&&this.workerPool.release(this.id)}registerMessageHandler(s,d){for(let v of this.actors)v.registerMessageHandler(s,d)}}function We(){return et||(et=new ot(pt(),i.K),et.registerMessageHandler("GR",(S,s,d)=>i.m(s,d))),et}function Ne(S,s){let d=i.L();return i.M(d,d,[1,1,0]),i.N(d,d,[.5*S.width,.5*S.height,1]),S.calculatePosMatrix?i.O(d,d,S.calculatePosMatrix(s.toUnwrapped())):d}function Ke(S,s,d,v,x,T,C){var R;let q=function($,ee,ie){if($)for(let ve of $){let ge=ee[ve];if(ge&&ge.source===ie&&ge.type==="fill-extrusion")return!0}else for(let ve in ee){let ge=ee[ve];if(ge.source===ie&&ge.type==="fill-extrusion")return!0}return!1}((R=x==null?void 0:x.layers)!==null&&R!==void 0?R:null,s,S.id),B=T.maxPitchScaleFactor(),H=S.tilesIn(v,B,q);H.sort(Ge);let Y=[];for(let $ of H)Y.push({wrappedTileID:$.tileID.wrapped().key,queryResults:$.tile.queryRenderedFeatures(s,d,S._state,$.queryGeometry,$.cameraQueryGeometry,$.scale,x,T,B,Ne(S.transform,$.tileID),C?(ee,ie)=>C($.tileID,ee,ie):void 0)});return function($,ee){for(let ie in $)for(let ve of $[ie])ft(ve,ee);return $}(function($){let ee={},ie={};for(let ve of $){let ge=ve.queryResults,ye=ve.wrappedTileID,Me=ie[ye]=ie[ye]||{};for(let Re in ge){let Pe=ge[Re],ze=Me[Re]=Me[Re]||{},He=ee[Re]=ee[Re]||[];for(let Le of Pe)ze[Le.featureIndex]||(ze[Le.featureIndex]=!0,He.push(Le))}}return ee}(Y),S)}function Ge(S,s){let d=S.tileID,v=s.tileID;return d.overscaledZ-v.overscaledZ||d.canonical.y-v.canonical.y||d.wrap-v.wrap||d.canonical.x-v.canonical.x}function ft(S,s){let d=S.feature,v=s.getFeatureState(d.layer["source-layer"],d.id);d.source=d.layer.source,d.layer["source-layer"]&&(d.sourceLayer=d.layer["source-layer"]),d.state=v}function mt(S,s,d){return i._(this,void 0,void 0,function*(){let v=S;if(S.url?v=(yield i.j(s.transformRequest(S.url,"Source"),d)).data:yield y.frameAsync(d),!v)return null;let x=i.Q(i.e(v,S),["tiles","minzoom","maxzoom","attribution","bounds","scheme","tileSize","encoding"]);return"vector_layers"in v&&v.vector_layers&&(x.vectorLayerIds=v.vector_layers.map(T=>T.id)),x})}class Ot{constructor(s,d){s&&(d?this.setSouthWest(s).setNorthEast(d):Array.isArray(s)&&(s.length===4?this.setSouthWest([s[0],s[1]]).setNorthEast([s[2],s[3]]):this.setSouthWest(s[0]).setNorthEast(s[1])))}setNorthEast(s){return this._ne=s instanceof i.S?new i.S(s.lng,s.lat):i.S.convert(s),this}setSouthWest(s){return this._sw=s instanceof i.S?new i.S(s.lng,s.lat):i.S.convert(s),this}extend(s){let d=this._sw,v=this._ne,x,T;if(s instanceof i.S)x=s,T=s;else{if(!(s instanceof Ot))return Array.isArray(s)?s.length===4||s.every(Array.isArray)?this.extend(Ot.convert(s)):this.extend(i.S.convert(s)):s&&("lng"in s||"lon"in s)&&"lat"in s?this.extend(i.S.convert(s)):this;if(x=s._sw,T=s._ne,!x||!T)return this}return d||v?(d.lng=Math.min(x.lng,d.lng),d.lat=Math.min(x.lat,d.lat),v.lng=Math.max(T.lng,v.lng),v.lat=Math.max(T.lat,v.lat)):(this._sw=new i.S(x.lng,x.lat),this._ne=new i.S(T.lng,T.lat)),this}getCenter(){return new i.S((this._sw.lng+this._ne.lng)/2,(this._sw.lat+this._ne.lat)/2)}getSouthWest(){return this._sw}getNorthEast(){return this._ne}getNorthWest(){return new i.S(this.getWest(),this.getNorth())}getSouthEast(){return new i.S(this.getEast(),this.getSouth())}getWest(){return this._sw.lng}getSouth(){return this._sw.lat}getEast(){return this._ne.lng}getNorth(){return this._ne.lat}toArray(){return[this._sw.toArray(),this._ne.toArray()]}toString(){return`LngLatBounds(${this._sw.toString()}, ${this._ne.toString()})`}isEmpty(){return!(this._sw&&this._ne)}contains(s){let{lng:d,lat:v}=i.S.convert(s),x=this._sw.lng<=d&&d<=this._ne.lng;return this._sw.lng>this._ne.lng&&(x=this._sw.lng>=d&&d>=this._ne.lng),this._sw.lat<=v&&v<=this._ne.lat&&x}static convert(s){return s instanceof Ot?s:s&&new Ot(s)}static fromLngLat(s,d=0){let v=360*d/40075017,x=v/Math.cos(Math.PI/180*s.lat);return new Ot(new i.S(s.lng-x,s.lat-v),new i.S(s.lng+x,s.lat+v))}adjustAntiMeridian(){let s=new i.S(this._sw.lng,this._sw.lat),d=new i.S(this._ne.lng,this._ne.lat);return new Ot(s,s.lng>d.lng?new i.S(d.lng+360,d.lat):d)}}class At{constructor(s,d,v){this.bounds=Ot.convert(this.validateBounds(s)),this.minzoom=d||0,this.maxzoom=v||24}validateBounds(s){return Array.isArray(s)&&s.length===4?[Math.max(-180,s[0]),Math.max(-90,s[1]),Math.min(180,s[2]),Math.min(90,s[3])]:[-180,-90,180,90]}contains(s){let d=Math.pow(2,s.z),v=Math.floor(i.V(this.bounds.getWest())*d),x=Math.floor(i.U(this.bounds.getNorth())*d),T=Math.ceil(i.V(this.bounds.getEast())*d),C=Math.ceil(i.U(this.bounds.getSouth())*d);return s.x>=v&&s.x<T&&s.y>=x&&s.y<C}}class Mt extends i.E{constructor(s,d,v,x){if(super(),this.id=s,this.dispatcher=v,this.type="vector",this.minzoom=0,this.maxzoom=22,this.scheme="xyz",this.tileSize=512,this.reparseOverscaled=!0,this.isTileClipped=!0,this._loaded=!1,i.e(this,i.Q(d,["url","scheme","tileSize","promoteId"])),this._options=i.e({type:"vector"},d),this._collectResourceTiming=d.collectResourceTiming,this.tileSize!==512)throw new Error("vector tile sources must have a tileSize of 512");this.setEventedParent(x)}load(){return i._(this,void 0,void 0,function*(){this._loaded=!1,this.fire(new i.l("dataloading",{dataType:"source"})),this._tileJSONRequest=new AbortController;try{let s=yield mt(this._options,this.map._requestManager,this._tileJSONRequest);this._tileJSONRequest=null,this._loaded=!0,this.map.style.sourceCaches[this.id].clearTiles(),s&&(i.e(this,s),s.bounds&&(this.tileBounds=new At(s.bounds,this.minzoom,this.maxzoom)),this.fire(new i.l("data",{dataType:"source",sourceDataType:"metadata"})),this.fire(new i.l("data",{dataType:"source",sourceDataType:"content"})))}catch(s){this._tileJSONRequest=null,this.fire(new i.k(s))}})}loaded(){return this._loaded}hasTile(s){return!this.tileBounds||this.tileBounds.contains(s.canonical)}onAdd(s){this.map=s,this.load()}setSourceProperty(s){this._tileJSONRequest&&this._tileJSONRequest.abort(),s(),this.load()}setTiles(s){return this.setSourceProperty(()=>{this._options.tiles=s}),this}setUrl(s){return this.setSourceProperty(()=>{this.url=s,this._options.url=s}),this}onRemove(){this._tileJSONRequest&&(this._tileJSONRequest.abort(),this._tileJSONRequest=null)}serialize(){return i.e({},this._options)}loadTile(s){return i._(this,void 0,void 0,function*(){let d=s.tileID.canonical.url(this.tiles,this.map.getPixelRatio(),this.scheme),v={request:this.map._requestManager.transformRequest(d,"Tile"),uid:s.uid,tileID:s.tileID,zoom:s.tileID.overscaledZ,tileSize:this.tileSize*s.tileID.overscaleFactor(),type:this.type,source:this.id,pixelRatio:this.map.getPixelRatio(),showCollisionBoxes:this.map.showCollisionBoxes,promoteId:this.promoteId,subdivisionGranularity:this.map.style.projection.subdivisionGranularity,globalState:this.map.getGlobalState()};v.request.collectResourceTiming=this._collectResourceTiming;let x="RT";if(s.actor&&s.state!=="expired"){if(s.state==="loading")return new Promise((T,C)=>{s.reloadPromise={resolve:T,reject:C}})}else s.actor=this.dispatcher.getActor(),x="LT";s.abortController=new AbortController;try{let T=yield s.actor.sendAsync({type:x,data:v},s.abortController);if(delete s.abortController,s.aborted)return;this._afterTileLoadWorkerResponse(s,T)}catch(T){if(delete s.abortController,s.aborted)return;if(T&&T.status!==404)throw T;this._afterTileLoadWorkerResponse(s,null)}})}_afterTileLoadWorkerResponse(s,d){if(d&&d.resourceTiming&&(s.resourceTiming=d.resourceTiming),d&&this.map._refreshExpiredTiles&&s.setExpiryData(d),s.loadVectorData(d,this.map.painter),s.reloadPromise){let v=s.reloadPromise;s.reloadPromise=null,this.loadTile(s).then(v.resolve).catch(v.reject)}}abortTile(s){return i._(this,void 0,void 0,function*(){s.abortController&&(s.abortController.abort(),delete s.abortController),s.actor&&(yield s.actor.sendAsync({type:"AT",data:{uid:s.uid,type:this.type,source:this.id}}))})}unloadTile(s){return i._(this,void 0,void 0,function*(){s.unloadVectorData(),s.actor&&(yield s.actor.sendAsync({type:"RMT",data:{uid:s.uid,type:this.type,source:this.id}}))})}hasTransition(){return!1}}class Yt extends i.E{constructor(s,d,v,x){super(),this.id=s,this.dispatcher=v,this.setEventedParent(x),this.type="raster",this.minzoom=0,this.maxzoom=22,this.roundZoom=!0,this.scheme="xyz",this.tileSize=512,this._loaded=!1,this._options=i.e({type:"raster"},d),i.e(this,i.Q(d,["url","scheme","tileSize"]))}load(){return i._(this,arguments,void 0,function*(s=!1){this._loaded=!1,this.fire(new i.l("dataloading",{dataType:"source"})),this._tileJSONRequest=new AbortController;try{let d=yield mt(this._options,this.map._requestManager,this._tileJSONRequest);this._tileJSONRequest=null,this._loaded=!0,d&&(i.e(this,d),d.bounds&&(this.tileBounds=new At(d.bounds,this.minzoom,this.maxzoom)),this.fire(new i.l("data",{dataType:"source",sourceDataType:"metadata"})),this.fire(new i.l("data",{dataType:"source",sourceDataType:"content",sourceDataChanged:s})))}catch(d){this._tileJSONRequest=null,this.fire(new i.k(d))}})}loaded(){return this._loaded}onAdd(s){this.map=s,this.load()}onRemove(){this._tileJSONRequest&&(this._tileJSONRequest.abort(),this._tileJSONRequest=null)}setSourceProperty(s){this._tileJSONRequest&&(this._tileJSONRequest.abort(),this._tileJSONRequest=null),s(),this.load(!0)}setTiles(s){return this.setSourceProperty(()=>{this._options.tiles=s}),this}setUrl(s){return this.setSourceProperty(()=>{this.url=s,this._options.url=s}),this}serialize(){return i.e({},this._options)}hasTile(s){return!this.tileBounds||this.tileBounds.contains(s.canonical)}loadTile(s){return i._(this,void 0,void 0,function*(){let d=s.tileID.canonical.url(this.tiles,this.map.getPixelRatio(),this.scheme);s.abortController=new AbortController;try{let v=yield z.getImage(this.map._requestManager.transformRequest(d,"Tile"),s.abortController,this.map._refreshExpiredTiles);if(delete s.abortController,s.aborted)return void(s.state="unloaded");if(v&&v.data){this.map._refreshExpiredTiles&&(v.cacheControl||v.expires)&&s.setExpiryData({cacheControl:v.cacheControl,expires:v.expires});let x=this.map.painter.context,T=x.gl,C=v.data;s.texture=this.map.painter.getTileTexture(C.width),s.texture?s.texture.update(C,{useMipmap:!0}):(s.texture=new i.T(x,C,T.RGBA,{useMipmap:!0}),s.texture.bind(T.LINEAR,T.CLAMP_TO_EDGE,T.LINEAR_MIPMAP_NEAREST)),s.state="loaded"}}catch(v){if(delete s.abortController,s.aborted)s.state="unloaded";else if(v)throw s.state="errored",v}})}abortTile(s){return i._(this,void 0,void 0,function*(){s.abortController&&(s.abortController.abort(),delete s.abortController)})}unloadTile(s){return i._(this,void 0,void 0,function*(){s.texture&&this.map.painter.saveTileTexture(s.texture)})}hasTransition(){return!1}}class qt extends Yt{constructor(s,d,v,x){super(s,d,v,x),this.type="raster-dem",this.maxzoom=22,this._options=i.e({type:"raster-dem"},d),this.encoding=d.encoding||"mapbox",this.redFactor=d.redFactor,this.greenFactor=d.greenFactor,this.blueFactor=d.blueFactor,this.baseShift=d.baseShift}loadTile(s){return i._(this,void 0,void 0,function*(){let d=s.tileID.canonical.url(this.tiles,this.map.getPixelRatio(),this.scheme),v=this.map._requestManager.transformRequest(d,"Tile");s.neighboringTiles=this._getNeighboringTiles(s.tileID),s.abortController=new AbortController;try{let x=yield z.getImage(v,s.abortController,this.map._refreshExpiredTiles);if(delete s.abortController,s.aborted)return void(s.state="unloaded");if(x&&x.data){let T=x.data;this.map._refreshExpiredTiles&&(x.cacheControl||x.expires)&&s.setExpiryData({cacheControl:x.cacheControl,expires:x.expires});let C=i.b(T)&&i.W()?T:yield this.readImageNow(T),R={type:this.type,uid:s.uid,source:this.id,rawImageData:C,encoding:this.encoding,redFactor:this.redFactor,greenFactor:this.greenFactor,blueFactor:this.blueFactor,baseShift:this.baseShift};if(!s.actor||s.state==="expired"){s.actor=this.dispatcher.getActor();let q=yield s.actor.sendAsync({type:"LDT",data:R});s.dem=q,s.needsHillshadePrepare=!0,s.needsTerrainPrepare=!0,s.state="loaded"}}}catch(x){if(delete s.abortController,s.aborted)s.state="unloaded";else if(x)throw s.state="errored",x}})}readImageNow(s){return i._(this,void 0,void 0,function*(){if(typeof VideoFrame!="undefined"&&i.X()){let d=s.width+2,v=s.height+2;try{return new i.R({width:d,height:v},yield i.Y(s,-1,-1,d,v))}catch(x){}}return y.getImageData(s,1)})}_getNeighboringTiles(s){let d=s.canonical,v=Math.pow(2,d.z),x=(d.x-1+v)%v,T=d.x===0?s.wrap-1:s.wrap,C=(d.x+1+v)%v,R=d.x+1===v?s.wrap+1:s.wrap,q={};return q[new i.Z(s.overscaledZ,T,d.z,x,d.y).key]={backfilled:!1},q[new i.Z(s.overscaledZ,R,d.z,C,d.y).key]={backfilled:!1},d.y>0&&(q[new i.Z(s.overscaledZ,T,d.z,x,d.y-1).key]={backfilled:!1},q[new i.Z(s.overscaledZ,s.wrap,d.z,d.x,d.y-1).key]={backfilled:!1},q[new i.Z(s.overscaledZ,R,d.z,C,d.y-1).key]={backfilled:!1}),d.y+1<v&&(q[new i.Z(s.overscaledZ,T,d.z,x,d.y+1).key]={backfilled:!1},q[new i.Z(s.overscaledZ,s.wrap,d.z,d.x,d.y+1).key]={backfilled:!1},q[new i.Z(s.overscaledZ,R,d.z,C,d.y+1).key]={backfilled:!1}),q}unloadTile(s){return i._(this,void 0,void 0,function*(){s.demTexture&&this.map.painter.saveTileTexture(s.demTexture),s.fbo&&(s.fbo.destroy(),delete s.fbo),s.dem&&delete s.dem,delete s.neighboringTiles,s.state="unloaded",s.actor&&(yield s.actor.sendAsync({type:"RDT",data:{type:this.type,uid:s.uid,source:this.id}}))})}}class Ut extends i.E{constructor(s,d,v,x){super(),this.id=s,this.type="geojson",this.minzoom=0,this.maxzoom=18,this.tileSize=512,this.isTileClipped=!0,this.reparseOverscaled=!0,this._removed=!1,this._isUpdatingWorker=!1,this._pendingWorkerUpdate={data:d.data},this.actor=v.getActor(),this.setEventedParent(x),this._data=d.data,this._options=i.e({},d),this._collectResourceTiming=d.collectResourceTiming,d.maxzoom!==void 0&&(this.maxzoom=d.maxzoom),d.type&&(this.type=d.type),d.attribution&&(this.attribution=d.attribution),this.promoteId=d.promoteId,d.clusterMaxZoom!==void 0&&this.maxzoom<=d.clusterMaxZoom&&i.w(`The maxzoom value "${this.maxzoom}" is expected to be greater than the clusterMaxZoom value "${d.clusterMaxZoom}".`),this.workerOptions=i.e({source:this.id,cluster:d.cluster||!1,geojsonVtOptions:{buffer:this._pixelsToTileUnits(d.buffer!==void 0?d.buffer:128),tolerance:this._pixelsToTileUnits(d.tolerance!==void 0?d.tolerance:.375),extent:i.$,maxZoom:this.maxzoom,lineMetrics:d.lineMetrics||!1,generateId:d.generateId||!1},superclusterOptions:{maxZoom:this._getClusterMaxZoom(d.clusterMaxZoom),minPoints:Math.max(2,d.clusterMinPoints||2),extent:i.$,radius:this._pixelsToTileUnits(d.clusterRadius||50),log:!1,generateId:d.generateId||!1},clusterProperties:d.clusterProperties,filter:d.filter},d.workerOptions),typeof this.promoteId=="string"&&(this.workerOptions.promoteId=this.promoteId)}_pixelsToTileUnits(s){return s*(i.$/this.tileSize)}_getClusterMaxZoom(s){let d=s?Math.round(s):this.maxzoom-1;return Number.isInteger(s)||s===void 0||i.w(`Integer expected for option 'clusterMaxZoom': provided value "${s}" rounded to "${d}"`),d}load(){return i._(this,void 0,void 0,function*(){yield this._updateWorkerData()})}onAdd(s){this.map=s,this.load()}setData(s){return this._data=s,this._pendingWorkerUpdate={data:s},this._updateWorkerData(),this}updateData(s){return this._pendingWorkerUpdate.diff=i.a0(this._pendingWorkerUpdate.diff,s),this._updateWorkerData(),this}getData(){return i._(this,void 0,void 0,function*(){let s=i.e({type:this.type},this.workerOptions);return this.actor.sendAsync({type:"GD",data:s})})}getCoordinatesFromGeometry(s){return s.type==="GeometryCollection"?s.geometries.map(d=>d.coordinates).flat(1/0):s.coordinates.flat(1/0)}getBounds(){return i._(this,void 0,void 0,function*(){let s=new Ot,d=yield this.getData(),v;switch(d.type){case"FeatureCollection":v=d.features.map(x=>this.getCoordinatesFromGeometry(x.geometry)).flat(1/0);break;case"Feature":v=this.getCoordinatesFromGeometry(d.geometry);break;default:v=this.getCoordinatesFromGeometry(d)}if(v.length==0)return s;for(let x=0;x<v.length-1;x+=2)s.extend([v[x],v[x+1]]);return s})}setClusterOptions(s){return this.workerOptions.cluster=s.cluster,s&&(s.clusterRadius!==void 0&&(this.workerOptions.superclusterOptions.radius=this._pixelsToTileUnits(s.clusterRadius)),s.clusterMaxZoom!==void 0&&(this.workerOptions.superclusterOptions.maxZoom=this._getClusterMaxZoom(s.clusterMaxZoom))),this._updateWorkerData(),this}getClusterExpansionZoom(s){return this.actor.sendAsync({type:"GCEZ",data:{type:this.type,clusterId:s,source:this.id}})}getClusterChildren(s){return this.actor.sendAsync({type:"GCC",data:{type:this.type,clusterId:s,source:this.id}})}getClusterLeaves(s,d,v){return this.actor.sendAsync({type:"GCL",data:{type:this.type,source:this.id,clusterId:s,limit:d,offset:v}})}_updateWorkerData(){return i._(this,void 0,void 0,function*(){if(this._isUpdatingWorker)return;let{data:s,diff:d}=this._pendingWorkerUpdate;if(!s&&!d)return void i.w(`No data or diff provided to GeoJSONSource ${this.id}.`);let v=i.e({type:this.type},this.workerOptions);s?(typeof s=="string"?(v.request=this.map._requestManager.transformRequest(y.resolveURL(s),"Source"),v.request.collectResourceTiming=this._collectResourceTiming):v.data=JSON.stringify(s),this._pendingWorkerUpdate.data=void 0):d&&(v.dataDiff=d,this._pendingWorkerUpdate.diff=void 0),this._isUpdatingWorker=!0,this.fire(new i.l("dataloading",{dataType:"source"}));try{let x=yield this.actor.sendAsync({type:"LD",data:v});if(this._isUpdatingWorker=!1,this._removed||x.abandoned)return void this.fire(new i.l("dataabort",{dataType:"source"}));this._data=x.data;let T=null;x.resourceTiming&&x.resourceTiming[this.id]&&(T=x.resourceTiming[this.id].slice(0));let C={dataType:"source"};this._collectResourceTiming&&T&&T.length>0&&i.e(C,{resourceTiming:T}),this.fire(new i.l("data",Object.assign(Object.assign({},C),{sourceDataType:"metadata"}))),this.fire(new i.l("data",Object.assign(Object.assign({},C),{sourceDataType:"content"})))}catch(x){if(this._isUpdatingWorker=!1,this._removed)return void this.fire(new i.l("dataabort",{dataType:"source"}));this.fire(new i.k(x))}finally{(this._pendingWorkerUpdate.data||this._pendingWorkerUpdate.diff)&&this._updateWorkerData()}})}loaded(){return!this._isUpdatingWorker&&this._pendingWorkerUpdate.data===void 0&&this._pendingWorkerUpdate.diff===void 0}loadTile(s){return i._(this,void 0,void 0,function*(){let d=s.actor?"RT":"LT";s.actor=this.actor;let v={type:this.type,uid:s.uid,tileID:s.tileID,zoom:s.tileID.overscaledZ,maxZoom:this.maxzoom,tileSize:this.tileSize,source:this.id,pixelRatio:this.map.getPixelRatio(),showCollisionBoxes:this.map.showCollisionBoxes,promoteId:this.promoteId,subdivisionGranularity:this.map.style.projection.subdivisionGranularity,globalState:this.map.getGlobalState()};s.abortController=new AbortController;let x=yield this.actor.sendAsync({type:d,data:v},s.abortController);delete s.abortController,s.unloadVectorData(),s.aborted||s.loadVectorData(x,this.map.painter,d==="RT")})}abortTile(s){return i._(this,void 0,void 0,function*(){s.abortController&&(s.abortController.abort(),delete s.abortController),s.aborted=!0})}unloadTile(s){return i._(this,void 0,void 0,function*(){s.unloadVectorData(),yield this.actor.sendAsync({type:"RMT",data:{uid:s.uid,type:this.type,source:this.id}})})}onRemove(){this._removed=!0,this.actor.sendAsync({type:"RS",data:{type:this.type,source:this.id}})}serialize(){return i.e({},this._options,{type:this.type,data:this._data})}hasTransition(){return!1}}class sr extends i.E{constructor(s,d,v,x){super(),this.flippedWindingOrder=!1,this.id=s,this.dispatcher=v,this.coordinates=d.coordinates,this.type="image",this.minzoom=0,this.maxzoom=22,this.tileSize=512,this.tiles={},this._loaded=!1,this.setEventedParent(x),this.options=d}load(s){return i._(this,void 0,void 0,function*(){this._loaded=!1,this.fire(new i.l("dataloading",{dataType:"source"})),this.url=this.options.url,this._request=new AbortController;try{let d=yield z.getImage(this.map._requestManager.transformRequest(this.url,"Image"),this._request);this._request=null,this._loaded=!0,d&&d.data&&(this.image=d.data,s&&(this.coordinates=s),this._finishLoading())}catch(d){this._request=null,this._loaded=!0,this.fire(new i.k(d))}})}loaded(){return this._loaded}updateImage(s){return s.url?(this._request&&(this._request.abort(),this._request=null),this.options.url=s.url,this.load(s.coordinates).finally(()=>{this.texture=null}),this):this}_finishLoading(){this.map&&(this.setCoordinates(this.coordinates),this.fire(new i.l("data",{dataType:"source",sourceDataType:"metadata"})))}onAdd(s){this.map=s,this.load()}onRemove(){this._request&&(this._request.abort(),this._request=null)}setCoordinates(s){this.coordinates=s;let d=s.map(i.a1.fromLngLat);var v;return this.tileID=function(x){let T=i.a2.fromPoints(x),C=T.width(),R=T.height(),q=Math.max(C,R),B=Math.max(0,Math.floor(-Math.log(q)/Math.LN2)),H=Math.pow(2,B);return new i.a4(B,Math.floor((T.minX+T.maxX)/2*H),Math.floor((T.minY+T.maxY)/2*H))}(d),this.terrainTileRanges=this._getOverlappingTileRanges(d),this.minzoom=this.maxzoom=this.tileID.z,this.tileCoords=d.map(x=>this.tileID.getTilePoint(x)._round()),this.flippedWindingOrder=((v=this.tileCoords)[1].x-v[0].x)*(v[2].y-v[0].y)-(v[1].y-v[0].y)*(v[2].x-v[0].x)<0,this.fire(new i.l("data",{dataType:"source",sourceDataType:"content"})),this}prepare(){if(Object.keys(this.tiles).length===0||!this.image)return;let s=this.map.painter.context,d=s.gl;this.texture||(this.texture=new i.T(s,this.image,d.RGBA),this.texture.bind(d.LINEAR,d.CLAMP_TO_EDGE));let v=!1;for(let x in this.tiles){let T=this.tiles[x];T.state!=="loaded"&&(T.state="loaded",T.texture=this.texture,v=!0)}v&&this.fire(new i.l("data",{dataType:"source",sourceDataType:"idle",sourceId:this.id}))}loadTile(s){return i._(this,void 0,void 0,function*(){this.tileID&&this.tileID.equals(s.tileID.canonical)?(this.tiles[String(s.tileID.wrap)]=s,s.buckets={}):s.state="errored"})}serialize(){return{type:"image",url:this.options.url,coordinates:this.coordinates}}hasTransition(){return!1}_getOverlappingTileRanges(s){let{minX:d,minY:v,maxX:x,maxY:T}=i.a2.fromPoints(s),C={};for(let R=0;R<=i.a3;R++){let q=Math.pow(2,R),B=Math.floor(d*q),H=Math.floor(v*q),Y=Math.floor(x*q),$=Math.floor(T*q);C[R]={minTileX:B,minTileY:H,maxTileX:Y,maxTileY:$}}return C}}class jr extends sr{constructor(s,d,v,x){super(s,d,v,x),this.roundZoom=!0,this.type="video",this.options=d}load(){return i._(this,void 0,void 0,function*(){this._loaded=!1;let s=this.options;this.urls=[];for(let d of s.urls)this.urls.push(this.map._requestManager.transformRequest(d,"Source").url);try{let d=yield i.a5(this.urls);if(this._loaded=!0,!d)return;this.video=d,this.video.loop=!0,this.video.addEventListener("playing",()=>{this.map.triggerRepaint()}),this.map&&this.video.play(),this._finishLoading()}catch(d){this.fire(new i.k(d))}})}pause(){this.video&&this.video.pause()}play(){this.video&&this.video.play()}seek(s){if(this.video){let d=this.video.seekable;s<d.start(0)||s>d.end(0)?this.fire(new i.k(new i.a6(`sources.${this.id}`,null,`Playback for this video can be set only between the ${d.start(0)} and ${d.end(0)}-second mark.`))):this.video.currentTime=s}}getVideo(){return this.video}onAdd(s){this.map||(this.map=s,this.load(),this.video&&(this.video.play(),this.setCoordinates(this.coordinates)))}prepare(){if(Object.keys(this.tiles).length===0||this.video.readyState<2)return;let s=this.map.painter.context,d=s.gl;this.texture?this.video.paused||(this.texture.bind(d.LINEAR,d.CLAMP_TO_EDGE),d.texSubImage2D(d.TEXTURE_2D,0,0,0,d.RGBA,d.UNSIGNED_BYTE,this.video)):(this.texture=new i.T(s,this.video,d.RGBA),this.texture.bind(d.LINEAR,d.CLAMP_TO_EDGE));let v=!1;for(let x in this.tiles){let T=this.tiles[x];T.state!=="loaded"&&(T.state="loaded",T.texture=this.texture,v=!0)}v&&this.fire(new i.l("data",{dataType:"source",sourceDataType:"idle",sourceId:this.id}))}serialize(){return{type:"video",urls:this.urls,coordinates:this.coordinates}}hasTransition(){return this.video&&!this.video.paused}}class Pr extends sr{constructor(s,d,v,x){super(s,d,v,x),d.coordinates?Array.isArray(d.coordinates)&&d.coordinates.length===4&&!d.coordinates.some(T=>!Array.isArray(T)||T.length!==2||T.some(C=>typeof C!="number"))||this.fire(new i.k(new i.a6(`sources.${s}`,null,"\"coordinates\" property must be an array of 4 longitude/latitude array pairs"))):this.fire(new i.k(new i.a6(`sources.${s}`,null,"missing required property \"coordinates\""))),d.animate&&typeof d.animate!="boolean"&&this.fire(new i.k(new i.a6(`sources.${s}`,null,"optional \"animate\" property must be a boolean value"))),d.canvas?typeof d.canvas=="string"||d.canvas instanceof HTMLCanvasElement||this.fire(new i.k(new i.a6(`sources.${s}`,null,"\"canvas\" must be either a string representing the ID of the canvas element from which to read, or an HTMLCanvasElement instance"))):this.fire(new i.k(new i.a6(`sources.${s}`,null,"missing required property \"canvas\""))),this.options=d,this.animate=d.animate===void 0||d.animate}load(){return i._(this,void 0,void 0,function*(){this._loaded=!0,this.canvas||(this.canvas=this.options.canvas instanceof HTMLCanvasElement?this.options.canvas:document.getElementById(this.options.canvas)),this.width=this.canvas.width,this.height=this.canvas.height,this._hasInvalidDimensions()?this.fire(new i.k(new Error("Canvas dimensions cannot be less than or equal to zero."))):(this.play=function(){this._playing=!0,this.map.triggerRepaint()},this.pause=function(){this._playing&&(this.prepare(),this._playing=!1)},this._finishLoading())})}getCanvas(){return this.canvas}onAdd(s){this.map=s,this.load(),this.canvas&&this.animate&&this.play()}onRemove(){this.pause()}prepare(){let s=!1;if(this.canvas.width!==this.width&&(this.width=this.canvas.width,s=!0),this.canvas.height!==this.height&&(this.height=this.canvas.height,s=!0),this._hasInvalidDimensions()||Object.keys(this.tiles).length===0)return;let d=this.map.painter.context,v=d.gl;this.texture?(s||this._playing)&&this.texture.update(this.canvas,{premultiply:!0}):this.texture=new i.T(d,this.canvas,v.RGBA,{premultiply:!0});let x=!1;for(let T in this.tiles){let C=this.tiles[T];C.state!=="loaded"&&(C.state="loaded",C.texture=this.texture,x=!0)}x&&this.fire(new i.l("data",{dataType:"source",sourceDataType:"idle",sourceId:this.id}))}serialize(){return{type:"canvas",coordinates:this.coordinates}}hasTransition(){return this._playing}_hasInvalidDimensions(){for(let s of[this.canvas.width,this.canvas.height])if(isNaN(s)||s<=0)return!0;return!1}}let br={},Dr=S=>{switch(S){case"geojson":return Ut;case"image":return sr;case"raster":return Yt;case"raster-dem":return qt;case"vector":return Mt;case"video":return jr;case"canvas":return Pr}return br[S]},ke="RTLPluginLoaded";class Je extends i.E{constructor(){super(...arguments),this.status="unavailable",this.url=null,this.dispatcher=We()}_syncState(s){return this.status=s,this.dispatcher.broadcast("SRPS",{pluginStatus:s,pluginURL:this.url}).catch(d=>{throw this.status="error",d})}getRTLTextPluginStatus(){return this.status}clearRTLTextPlugin(){this.status="unavailable",this.url=null}setRTLTextPlugin(s){return i._(this,arguments,void 0,function*(d,v=!1){if(this.url)throw new Error("setRTLTextPlugin cannot be called multiple times.");if(this.url=y.resolveURL(d),!this.url)throw new Error(`requested url ${d} is invalid`);if(this.status==="unavailable"){if(!v)return this._requestImport();this.status="deferred",this._syncState(this.status)}else if(this.status==="requested")return this._requestImport()})}_requestImport(){return i._(this,void 0,void 0,function*(){yield this._syncState("loading"),this.status="loaded",this.fire(new i.l(ke))})}lazyLoad(){this.status==="unavailable"?this.status="requested":this.status==="deferred"&&this._requestImport()}}let tt=null;function Ft(){return tt||(tt=new Je),tt}class Wt{constructor(s,d){this.timeAdded=0,this.fadeEndTime=0,this.tileID=s,this.uid=i.a7(),this.uses=0,this.tileSize=d,this.buckets={},this.expirationTime=null,this.queryPadding=0,this.hasSymbolBuckets=!1,this.hasRTLText=!1,this.dependencies={},this.rtt=[],this.rttCoords={},this.expiredRequestCount=0,this.state="loading"}registerFadeDuration(s){let d=s+this.timeAdded;d<this.fadeEndTime||(this.fadeEndTime=d)}wasRequested(){return this.state==="errored"||this.state==="loaded"||this.state==="reloading"}clearTextures(s){this.demTexture&&s.saveTileTexture(this.demTexture),this.demTexture=null}loadVectorData(s,d,v){if(this.hasData()&&this.unloadVectorData(),this.state="loaded",s){s.featureIndex&&(this.latestFeatureIndex=s.featureIndex,s.rawTileData?(this.latestRawTileData=s.rawTileData,this.latestFeatureIndex.rawTileData=s.rawTileData):this.latestRawTileData&&(this.latestFeatureIndex.rawTileData=this.latestRawTileData)),this.collisionBoxArray=s.collisionBoxArray,this.buckets=function(x,T){let C={};if(!T)return C;for(let R of x){let q=R.layerIds.map(B=>T.getLayer(B)).filter(Boolean);if(q.length!==0){R.layers=q,R.stateDependentLayerIds&&(R.stateDependentLayers=R.stateDependentLayerIds.map(B=>q.filter(H=>H.id===B)[0]));for(let B of q)C[B.id]=R}}return C}(s.buckets,d==null?void 0:d.style),this.hasSymbolBuckets=!1;for(let x in this.buckets){let T=this.buckets[x];if(T instanceof i.a9){if(this.hasSymbolBuckets=!0,!v)break;T.justReloaded=!0}}if(this.hasRTLText=!1,this.hasSymbolBuckets)for(let x in this.buckets){let T=this.buckets[x];if(T instanceof i.a9&&T.hasRTLText){this.hasRTLText=!0,Ft().lazyLoad();break}}this.queryPadding=0;for(let x in this.buckets){let T=this.buckets[x];this.queryPadding=Math.max(this.queryPadding,d.style.getLayer(x).queryRadius(T))}s.imageAtlas&&(this.imageAtlas=s.imageAtlas),s.glyphAtlasImage&&(this.glyphAtlasImage=s.glyphAtlasImage)}else this.collisionBoxArray=new i.a8}unloadVectorData(){for(let s in this.buckets)this.buckets[s].destroy();this.buckets={},this.imageAtlasTexture&&this.imageAtlasTexture.destroy(),this.imageAtlas&&(this.imageAtlas=null),this.glyphAtlasTexture&&this.glyphAtlasTexture.destroy(),this.latestFeatureIndex=null,this.state="unloaded"}getBucket(s){return this.buckets[s.id]}upload(s){for(let v in this.buckets){let x=this.buckets[v];x.uploadPending()&&x.upload(s)}let d=s.gl;this.imageAtlas&&!this.imageAtlas.uploaded&&(this.imageAtlasTexture=new i.T(s,this.imageAtlas.image,d.RGBA),this.imageAtlas.uploaded=!0),this.glyphAtlasImage&&(this.glyphAtlasTexture=new i.T(s,this.glyphAtlasImage,d.ALPHA),this.glyphAtlasImage=null)}prepare(s){this.imageAtlas&&this.imageAtlas.patchUpdatedImages(s,this.imageAtlasTexture)}queryRenderedFeatures(s,d,v,x,T,C,R,q,B,H,Y){return this.latestFeatureIndex&&this.latestFeatureIndex.rawTileData?this.latestFeatureIndex.query({queryGeometry:x,cameraQueryGeometry:T,scale:C,tileSize:this.tileSize,pixelPosMatrix:H,transform:q,params:R,queryPadding:this.queryPadding*B,getElevation:Y},s,d,v):{}}querySourceFeatures(s,d){let v=this.latestFeatureIndex;if(!v||!v.rawTileData)return;let x=v.loadVTLayers(),T=d&&d.sourceLayer?d.sourceLayer:"",C=x._geojsonTileLayer||x[T];if(!C)return;let R=i.aa(d&&d.filter),{z:q,x:B,y:H}=this.tileID.canonical,Y={z:q,x:B,y:H};for(let $=0;$<C.length;$++){let ee=C.feature($);if(R.needGeometry){let ge=i.ab(ee,!0);if(!R.filter(new i.F(this.tileID.overscaledZ),ge,this.tileID.canonical))continue}else if(!R.filter(new i.F(this.tileID.overscaledZ),ee))continue;let ie=v.getId(ee,T),ve=new i.ac(ee,q,B,H,ie);ve.tile=Y,s.push(ve)}}hasData(){return this.state==="loaded"||this.state==="reloading"||this.state==="expired"}patternsLoaded(){return this.imageAtlas&&!!Object.keys(this.imageAtlas.patternPositions).length}setExpiryData(s){let d=this.expirationTime;if(s.cacheControl){let v=i.ad(s.cacheControl);v["max-age"]&&(this.expirationTime=Date.now()+1e3*v["max-age"])}else s.expires&&(this.expirationTime=new Date(s.expires).getTime());if(this.expirationTime){let v=Date.now(),x=!1;if(this.expirationTime>v)x=!1;else if(d){if(this.expirationTime<d)x=!0;else{let T=this.expirationTime-d;T?this.expirationTime=v+Math.max(T,3e4):x=!0}}else x=!0;x?(this.expiredRequestCount++,this.state="expired"):this.expiredRequestCount=0}}getExpiryTimeout(){if(this.expirationTime)return this.expiredRequestCount?1e3*(1<<Math.min(this.expiredRequestCount-1,31)):Math.min(this.expirationTime-new Date().getTime(),Math.pow(2,31)-1)}setFeatureState(s,d){if(!this.latestFeatureIndex||!this.latestFeatureIndex.rawTileData||Object.keys(s).length===0)return;let v=this.latestFeatureIndex.loadVTLayers();for(let x in this.buckets){if(!d.style.hasLayer(x))continue;let T=this.buckets[x],C=T.layers[0].sourceLayer||"_geojsonTileLayer",R=v[C],q=s[C];if(!R||!q||Object.keys(q).length===0)continue;T.update(q,R,this.imageAtlas&&this.imageAtlas.patternPositions||{});let B=d&&d.style&&d.style.getLayer(x);B&&(this.queryPadding=Math.max(this.queryPadding,B.queryRadius(T)))}}holdingForFade(){return this.symbolFadeHoldUntil!==void 0}symbolFadeFinished(){return!this.symbolFadeHoldUntil||this.symbolFadeHoldUntil<y.now()}clearFadeHold(){this.symbolFadeHoldUntil=void 0}setHoldDuration(s){this.symbolFadeHoldUntil=y.now()+s}setDependencies(s,d){let v={};for(let x of d)v[x]=!0;this.dependencies[s]=v}hasDependency(s,d){for(let v of s){let x=this.dependencies[v];if(x){for(let T of d)if(x[T])return!0}}return!1}}class xe{constructor(s,d){this.max=s,this.onRemove=d,this.reset()}reset(){for(let s in this.data)for(let d of this.data[s])d.timeout&&clearTimeout(d.timeout),this.onRemove(d.value);return this.data={},this.order=[],this}add(s,d,v){let x=s.wrapped().key;this.data[x]===void 0&&(this.data[x]=[]);let T={value:d,timeout:void 0};if(v!==void 0&&(T.timeout=setTimeout(()=>{this.remove(s,T)},v)),this.data[x].push(T),this.order.push(x),this.order.length>this.max){let C=this._getAndRemoveByKey(this.order[0]);C&&this.onRemove(C)}return this}has(s){return s.wrapped().key in this.data}getAndRemove(s){return this.has(s)?this._getAndRemoveByKey(s.wrapped().key):null}_getAndRemoveByKey(s){let d=this.data[s].shift();return d.timeout&&clearTimeout(d.timeout),this.data[s].length===0&&delete this.data[s],this.order.splice(this.order.indexOf(s),1),d.value}getByKey(s){let d=this.data[s];return d?d[0].value:null}get(s){return this.has(s)?this.data[s.wrapped().key][0].value:null}remove(s,d){if(!this.has(s))return this;let v=s.wrapped().key,x=d===void 0?0:this.data[v].indexOf(d),T=this.data[v][x];return this.data[v].splice(x,1),T.timeout&&clearTimeout(T.timeout),this.data[v].length===0&&delete this.data[v],this.onRemove(T.value),this.order.splice(this.order.indexOf(v),1),this}setMaxSize(s){for(this.max=s;this.order.length>this.max;){let d=this._getAndRemoveByKey(this.order[0]);d&&this.onRemove(d)}return this}filter(s){let d=[];for(let v in this.data)for(let x of this.data[v])s(x.value)||d.push(x);for(let v of d)this.remove(v.value.tileID,v)}}class J{constructor(){this.state={},this.stateChanges={},this.deletedStates={}}updateState(s,d,v){let x=String(d);if(this.stateChanges[s]=this.stateChanges[s]||{},this.stateChanges[s][x]=this.stateChanges[s][x]||{},i.e(this.stateChanges[s][x],v),this.deletedStates[s]===null){this.deletedStates[s]={};for(let T in this.state[s])T!==x&&(this.deletedStates[s][T]=null)}else if(this.deletedStates[s]&&this.deletedStates[s][x]===null){this.deletedStates[s][x]={};for(let T in this.state[s][x])v[T]||(this.deletedStates[s][x][T]=null)}else for(let T in v)this.deletedStates[s]&&this.deletedStates[s][x]&&this.deletedStates[s][x][T]===null&&delete this.deletedStates[s][x][T]}removeFeatureState(s,d,v){if(this.deletedStates[s]===null)return;let x=String(d);if(this.deletedStates[s]=this.deletedStates[s]||{},v&&d!==void 0)this.deletedStates[s][x]!==null&&(this.deletedStates[s][x]=this.deletedStates[s][x]||{},this.deletedStates[s][x][v]=null);else if(d!==void 0){if(this.stateChanges[s]&&this.stateChanges[s][x])for(v in this.deletedStates[s][x]={},this.stateChanges[s][x])this.deletedStates[s][x][v]=null;else this.deletedStates[s][x]=null;}else this.deletedStates[s]=null}getState(s,d){let v=String(d),x=i.e({},(this.state[s]||{})[v],(this.stateChanges[s]||{})[v]);if(this.deletedStates[s]===null)return{};if(this.deletedStates[s]){let T=this.deletedStates[s][d];if(T===null)return{};for(let C in T)delete x[C]}return x}initializeTileState(s,d){s.setFeatureState(this.state,d)}coalesceChanges(s,d){let v={};for(let x in this.stateChanges){this.state[x]=this.state[x]||{};let T={};for(let C in this.stateChanges[x])this.state[x][C]||(this.state[x][C]={}),i.e(this.state[x][C],this.stateChanges[x][C]),T[C]=this.state[x][C];v[x]=T}for(let x in this.deletedStates){this.state[x]=this.state[x]||{};let T={};if(this.deletedStates[x]===null)for(let C in this.state[x])T[C]={},this.state[x][C]={};else for(let C in this.deletedStates[x]){if(this.deletedStates[x][C]===null)this.state[x][C]={};else for(let R of Object.keys(this.deletedStates[x][C]))delete this.state[x][C][R];T[C]=this.state[x][C]}v[x]=v[x]||{},i.e(v[x],T)}if(this.stateChanges={},this.deletedStates={},Object.keys(v).length!==0)for(let x in s)s[x].setFeatureState(v,d)}}let oe=89.25;function ue(S,s){let d=i.ah(s.lat,-i.ai,i.ai);return new i.P(i.V(s.lng)*S,i.U(d)*S)}function we(S,s){return new i.a1(s.x/S,s.y/S).toLngLat()}function Fe(S){return S.cameraToCenterDistance*Math.min(.85*Math.tan(i.ae(90-S.pitch)),Math.tan(i.ae(oe-S.pitch)))}function $e(S,s){let d=S.canonical,v=s/i.af(d.z),x=d.x+Math.pow(2,d.z)*S.wrap,T=i.ag(new Float64Array(16));return i.M(T,T,[x*v,d.y*v,0]),i.N(T,T,[v/i.$,v/i.$,1]),T}function nt(S,s,d,v,x){let T=i.a1.fromLngLat(S,s),C=x*i.aj(1,S.lat),R=C*Math.cos(i.ae(d)),q=Math.sqrt(C*C-R*R),B=q*Math.sin(i.ae(-v)),H=q*Math.cos(i.ae(-v));return new i.a1(T.x+B,T.y+H,T.z+R)}function Ze(S,s,d){let v=s.intersectsFrustum(S);if(!d||v===0)return v;let x=s.intersectsPlane(d);return x===0?0:v===2&&x===2?2:1}function be(S,s,d){let v=0,x=(d-s)/10;for(let T=0;T<10;T++)v+=x*Math.pow(Math.cos(s+(T+.5)/10*(d-s)),S);return v}function Ee(S,s){return function(d,v,x,T,C){let R=2*((S-1)/i.ak(Math.cos(i.ae(oe-C))/Math.cos(i.ae(oe)))-1),q=Math.acos(x/T),B=2*be(R-1,0,i.ae(C/2)),H=Math.min(i.ae(oe),q+i.ae(C/2)),Y=be(R-1,Math.min(H,q-i.ae(C/2)),H),$=Math.atan(v/x),ee=Math.hypot(v,x),ie=d;return ie+=i.ak(T/ee/Math.max(.5,Math.cos(i.ae(C/2)))),ie+=R*i.ak(Math.cos($))/2,ie-=i.ak(Math.max(1,Y/B/s))/2,ie}}let Be=Ee(9.314,3);function gt(S,s){let d=(s.roundZoom?Math.round:Math.floor)(S.zoom+i.ak(S.tileSize/s.tileSize));return Math.max(0,d)}function Ae(S,s){let d=S.getCameraFrustum(),v=S.getClippingPlane(),x=S.screenPointToMercatorCoordinate(S.getCameraPoint()),T=i.a1.fromLngLat(S.center,S.elevation);x.z=T.z+Math.cos(S.pitchInRadians)*S.cameraToCenterDistance/S.worldSize;let C=S.getCoveringTilesDetailsProvider(),R=C.allowVariableZoom(S,s),q=gt(S,s),B=s.minzoom||0,H=s.maxzoom!==void 0?s.maxzoom:S.maxZoom,Y=Math.min(Math.max(0,q),H),$=Math.pow(2,Y),ee=[$*x.x,$*x.y,0],ie=[$*T.x,$*T.y,0],ve=Math.hypot(T.x-x.x,T.y-x.y),ge=Math.abs(T.z-x.z),ye=Math.hypot(ve,ge),Me=ze=>({zoom:0,x:0,y:0,wrap:ze,fullyVisible:!1}),Re=[],Pe=[];if(S.renderWorldCopies&&C.allowWorldCopies())for(let ze=1;ze<=3;ze++)Re.push(Me(-ze)),Re.push(Me(ze));for(Re.push(Me(0));Re.length>0;){let ze=Re.pop(),He=ze.x,Le=ze.y,Qe=ze.fullyVisible,ht={x:He,y:Le,z:ze.zoom},it=C.getTileBoundingVolume(ht,ze.wrap,S.elevation,s);if(!Qe){let $t=Ze(d,it,v);if($t===0)continue;Qe=$t===2}let at=C.distanceToTile2d(x.x,x.y,ht,it),dt=q;R&&(dt=(s.calculateTileZoom||Be)(S.zoom+i.ak(S.tileSize/s.tileSize),at,ge,ye,S.fov)),dt=(s.roundZoom?Math.round:Math.floor)(dt),dt=Math.max(0,dt);let Vt=Math.min(dt,H);if(ze.wrap=C.getWrap(T,ht,ze.wrap),ze.zoom>=Vt){if(ze.zoom<B)continue;let $t=Y-ze.zoom,Nt=ee[0]-.5-(He<<$t),xr=ee[1]-.5-(Le<<$t),Pn=s.reparseOverscaled?Math.max(ze.zoom,dt):ze.zoom;Pe.push({tileID:new i.Z(ze.zoom===H?Pn:ze.zoom,ze.wrap,ze.zoom,He,Le),distanceSq:i.al([ie[0]-.5-He,ie[1]-.5-Le]),tileDistanceToCamera:Math.sqrt(Nt*Nt+xr*xr)})}else for(let $t=0;$t<4;$t++)Re.push({zoom:ze.zoom+1,x:(He<<1)+$t%2,y:(Le<<1)+($t>>1),wrap:ze.wrap,fullyVisible:Qe})}return Pe.sort((ze,He)=>ze.distanceSq-He.distanceSq).map(ze=>ze.tileID)}let Dt=i.a2.fromPoints([new i.P(0,0),new i.P(i.$,i.$)]);class Oe extends i.E{constructor(s,d,v){super(),this.id=s,this.dispatcher=v,this.on("data",x=>this._dataHandler(x)),this.on("dataloading",()=>{this._sourceErrored=!1}),this.on("error",()=>{this._sourceErrored=this._source.loaded()}),this._source=((x,T,C,R)=>{let q=new(Dr(T.type))(x,T,C,R);if(q.id!==x)throw new Error(`Expected Source id to be ${x} instead of ${q.id}`);return q})(s,d,v,this),this._tiles={},this._cache=new xe(0,x=>this._unloadTile(x)),this._timers={},this._cacheTimers={},this._maxTileCacheSize=null,this._maxTileCacheZoomLevels=null,this._loadedParentTiles={},this._coveredTiles={},this._state=new J,this._didEmitContent=!1,this._updated=!1}onAdd(s){this.map=s,this._maxTileCacheSize=s?s._maxTileCacheSize:null,this._maxTileCacheZoomLevels=s?s._maxTileCacheZoomLevels:null,this._source&&this._source.onAdd&&this._source.onAdd(s)}onRemove(s){this.clearTiles(),this._source&&this._source.onRemove&&this._source.onRemove(s)}loaded(){if(this._sourceErrored)return!0;if(!this._sourceLoaded||!this._source.loaded())return!1;if(!(this.used===void 0&&this.usedForTerrain===void 0||this.used||this.usedForTerrain))return!0;if(!this._updated)return!1;for(let s in this._tiles){let d=this._tiles[s];if(d.state!=="loaded"&&d.state!=="errored")return!1}return!0}getSource(){return this._source}pause(){this._paused=!0}resume(){if(!this._paused)return;let s=this._shouldReloadOnResume;this._paused=!1,this._shouldReloadOnResume=!1,s&&this.reload(),this.transform&&this.update(this.transform,this.terrain)}_loadTile(s,d,v){return i._(this,void 0,void 0,function*(){try{yield this._source.loadTile(s),this._tileLoaded(s,d,v)}catch(x){s.state="errored",x.status!==404?this._source.fire(new i.k(x,{tile:s})):this.update(this.transform,this.terrain)}})}_unloadTile(s){this._source.unloadTile&&this._source.unloadTile(s)}_abortTile(s){this._source.abortTile&&this._source.abortTile(s),this._source.fire(new i.l("dataabort",{tile:s,coord:s.tileID,dataType:"source"}))}serialize(){return this._source.serialize()}prepare(s){this._source.prepare&&this._source.prepare(),this._state.coalesceChanges(this._tiles,this.map?this.map.painter:null);for(let d in this._tiles){let v=this._tiles[d];v.upload(s),v.prepare(this.map.style.imageManager)}}getIds(){return Object.values(this._tiles).map(s=>s.tileID).sort(xt).map(s=>s.key)}getRenderableIds(s){let d=[];for(let v in this._tiles)this._isIdRenderable(v,s)&&d.push(this._tiles[v]);return s?d.sort((v,x)=>{let T=v.tileID,C=x.tileID,R=new i.P(T.canonical.x,T.canonical.y)._rotate(-this.transform.bearingInRadians),q=new i.P(C.canonical.x,C.canonical.y)._rotate(-this.transform.bearingInRadians);return T.overscaledZ-C.overscaledZ||q.y-R.y||q.x-R.x}).map(v=>v.tileID.key):d.map(v=>v.tileID).sort(xt).map(v=>v.key)}hasRenderableParent(s){let d=this.findLoadedParent(s,0);return!!d&&this._isIdRenderable(d.tileID.key)}_isIdRenderable(s,d){return this._tiles[s]&&this._tiles[s].hasData()&&!this._coveredTiles[s]&&(d||!this._tiles[s].holdingForFade())}reload(s){if(this._paused)this._shouldReloadOnResume=!0;else{this._cache.reset();for(let d in this._tiles)s?this._reloadTile(d,"expired"):this._tiles[d].state!=="errored"&&this._reloadTile(d,"reloading")}}_reloadTile(s,d){return i._(this,void 0,void 0,function*(){let v=this._tiles[s];v&&(v.state!=="loading"&&(v.state=d),yield this._loadTile(v,s,d))})}_tileLoaded(s,d,v){s.timeAdded=y.now(),v==="expired"&&(s.refreshedUponExpiration=!0),this._setTileReloadTimer(d,s),this.getSource().type==="raster-dem"&&s.dem&&this._backfillDEM(s),this._state.initializeTileState(s,this.map?this.map.painter:null),s.aborted||this._source.fire(new i.l("data",{dataType:"source",tile:s,coord:s.tileID}))}_backfillDEM(s){let d=this.getRenderableIds();for(let x=0;x<d.length;x++){let T=d[x];if(s.neighboringTiles&&s.neighboringTiles[T]){let C=this.getTileByID(T);v(s,C),v(C,s)}}function v(x,T){x.needsHillshadePrepare=!0,x.needsTerrainPrepare=!0;let C=T.tileID.canonical.x-x.tileID.canonical.x,R=T.tileID.canonical.y-x.tileID.canonical.y,q=Math.pow(2,x.tileID.canonical.z),B=T.tileID.key;C===0&&R===0||Math.abs(R)>1||(Math.abs(C)>1&&(Math.abs(C+q)===1?C+=q:Math.abs(C-q)===1&&(C-=q)),T.dem&&x.dem&&(x.dem.backfillBorder(T.dem,C,R),x.neighboringTiles&&x.neighboringTiles[B]&&(x.neighboringTiles[B].backfilled=!0)))}}getTile(s){return this.getTileByID(s.key)}getTileByID(s){return this._tiles[s]}_retainLoadedChildren(s,d,v,x){for(let T in this._tiles){let C=this._tiles[T];if(x[T]||!C.hasData()||C.tileID.overscaledZ<=d||C.tileID.overscaledZ>v)continue;let R=C.tileID;for(;C&&C.tileID.overscaledZ>d+1;){let B=C.tileID.scaledTo(C.tileID.overscaledZ-1);C=this._tiles[B.key],C&&C.hasData()&&(R=B)}let q=R;for(;q.overscaledZ>d;)if(q=q.scaledTo(q.overscaledZ-1),s[q.key]||s[q.canonical.key]){x[R.key]=R;break}}}findLoadedParent(s,d){if(s.key in this._loadedParentTiles){let v=this._loadedParentTiles[s.key];return v&&v.tileID.overscaledZ>=d?v:null}for(let v=s.overscaledZ-1;v>=d;v--){let x=s.scaledTo(v),T=this._getLoadedTile(x);if(T)return T}}findLoadedSibling(s){return this._getLoadedTile(s)}_getLoadedTile(s){let d=this._tiles[s.key];return d&&d.hasData()?d:this._cache.getByKey(s.wrapped().key)}updateCacheSize(s){let d=Math.ceil(s.width/this._source.tileSize)+1,v=Math.ceil(s.height/this._source.tileSize)+1,x=Math.floor(d*v*(this._maxTileCacheZoomLevels===null?i.a.MAX_TILE_CACHE_ZOOM_LEVELS:this._maxTileCacheZoomLevels)),T=typeof this._maxTileCacheSize=="number"?Math.min(this._maxTileCacheSize,x):x;this._cache.setMaxSize(T)}handleWrapJump(s){let d=Math.round((s-(this._prevLng===void 0?s:this._prevLng))/360);if(this._prevLng=s,d){let v={};for(let x in this._tiles){let T=this._tiles[x];T.tileID=T.tileID.unwrapTo(T.tileID.wrap+d),v[T.tileID.key]=T}this._tiles=v;for(let x in this._timers)clearTimeout(this._timers[x]),delete this._timers[x];for(let x in this._tiles)this._setTileReloadTimer(x,this._tiles[x])}}_updateCoveredAndRetainedTiles(s,d,v,x,T,C){let R={},q={},B=Object.keys(s),H=y.now();for(let Y of B){let $=s[Y],ee=this._tiles[Y];if(!ee||ee.fadeEndTime!==0&&ee.fadeEndTime<=H)continue;let ie=this.findLoadedParent($,d),ve=this.findLoadedSibling($),ge=ie||ve||null;ge&&(this._addTile(ge.tileID),R[ge.tileID.key]=ge.tileID),q[Y]=$}this._retainLoadedChildren(q,x,v,s);for(let Y in R)s[Y]||(this._coveredTiles[Y]=!0,s[Y]=R[Y]);if(C){let Y={},$={};for(let ee of T)this._tiles[ee.key].hasData()?Y[ee.key]=ee:$[ee.key]=ee;for(let ee in $){let ie=$[ee].children(this._source.maxzoom);this._tiles[ie[0].key]&&this._tiles[ie[1].key]&&this._tiles[ie[2].key]&&this._tiles[ie[3].key]&&(Y[ie[0].key]=s[ie[0].key]=ie[0],Y[ie[1].key]=s[ie[1].key]=ie[1],Y[ie[2].key]=s[ie[2].key]=ie[2],Y[ie[3].key]=s[ie[3].key]=ie[3],delete $[ee])}for(let ee in $){let ie=$[ee],ve=this.findLoadedParent(ie,this._source.minzoom),ge=this.findLoadedSibling(ie),ye=ve||ge||null;if(ye){Y[ye.tileID.key]=s[ye.tileID.key]=ye.tileID;for(let Me in Y)Y[Me].isChildOf(ye.tileID)&&delete Y[Me]}}for(let ee in this._tiles)Y[ee]||(this._coveredTiles[ee]=!0)}}update(s,d){if(!this._sourceLoaded||this._paused)return;let v;this.transform=s,this.terrain=d,this.updateCacheSize(s),this.handleWrapJump(this.transform.center.lng),this._coveredTiles={},this.used||this.usedForTerrain?this._source.tileID?v=s.getVisibleUnwrappedCoordinates(this._source.tileID).map(H=>new i.Z(H.canonical.z,H.wrap,H.canonical.z,H.canonical.x,H.canonical.y)):(v=Ae(s,{tileSize:this.usedForTerrain?this.tileSize:this._source.tileSize,minzoom:this._source.minzoom,maxzoom:this._source.maxzoom,roundZoom:!this.usedForTerrain&&this._source.roundZoom,reparseOverscaled:this._source.reparseOverscaled,terrain:d,calculateTileZoom:this._source.calculateTileZoom}),this._source.hasTile&&(v=v.filter(H=>this._source.hasTile(H)))):v=[];let x=gt(s,this._source),T=Math.max(x-Oe.maxOverzooming,this._source.minzoom),C=Math.max(x+Oe.maxUnderzooming,this._source.minzoom);if(this.usedForTerrain){let H={};for(let Y of v)if(Y.canonical.z>this._source.minzoom){let $=Y.scaledTo(Y.canonical.z-1);H[$.key]=$;let ee=Y.scaledTo(Math.max(this._source.minzoom,Math.min(Y.canonical.z,5)));H[ee.key]=ee}v=v.concat(Object.values(H))}let R=v.length===0&&!this._updated&&this._didEmitContent;this._updated=!0,R&&this.fire(new i.l("data",{sourceDataType:"idle",dataType:"source",sourceId:this.id}));let q=this._updateRetainedTiles(v,x);Bt(this._source.type)&&this._updateCoveredAndRetainedTiles(q,T,C,x,v,d);for(let H in q)this._tiles[H].clearFadeHold();let B=i.am(this._tiles,q);for(let H of B){let Y=this._tiles[H];Y.hasSymbolBuckets&&!Y.holdingForFade()?Y.setHoldDuration(this.map._fadeDuration):Y.hasSymbolBuckets&&!Y.symbolFadeFinished()||this._removeTile(H)}this._updateLoadedParentTileCache(),this._updateLoadedSiblingTileCache()}releaseSymbolFadeTiles(){for(let s in this._tiles)this._tiles[s].holdingForFade()&&this._removeTile(s)}_updateRetainedTiles(s,d){var v;let x={},T={},C=Math.max(d-Oe.maxOverzooming,this._source.minzoom),R=Math.max(d+Oe.maxUnderzooming,this._source.minzoom),q={};for(let B of s){let H=this._addTile(B);x[B.key]=B,H.hasData()||d<this._source.maxzoom&&(q[B.key]=B)}this._retainLoadedChildren(q,d,R,x);for(let B of s){let H=this._tiles[B.key];if(H.hasData())continue;if(d+1>this._source.maxzoom){let $=B.children(this._source.maxzoom)[0],ee=this.getTile($);if(ee&&ee.hasData()){x[$.key]=$;continue}}else{let $=B.children(this._source.maxzoom);if(x[$[0].key]&&x[$[1].key]&&x[$[2].key]&&x[$[3].key])continue}let Y=H.wasRequested();for(let $=B.overscaledZ-1;$>=C;--$){let ee=B.scaledTo($);if(T[ee.key])break;if(T[ee.key]=!0,H=this.getTile(ee),!H&&Y&&(H=this._addTile(ee)),H){let ie=H.hasData();if((ie||!(!((v=this.map)===null||v===void 0)&&v.cancelPendingTileRequestsWhileZooming)||Y)&&(x[ee.key]=ee),Y=H.wasRequested(),ie)break}}}return x}_updateLoadedParentTileCache(){this._loadedParentTiles={};for(let s in this._tiles){let d=[],v,x=this._tiles[s].tileID;for(;x.overscaledZ>0;){if(x.key in this._loadedParentTiles){v=this._loadedParentTiles[x.key];break}d.push(x.key);let T=x.scaledTo(x.overscaledZ-1);if(v=this._getLoadedTile(T),v)break;x=T}for(let T of d)this._loadedParentTiles[T]=v}}_updateLoadedSiblingTileCache(){this._loadedSiblingTiles={};for(let s in this._tiles){let d=this._tiles[s].tileID,v=this._getLoadedTile(d);this._loadedSiblingTiles[d.key]=v}}_addTile(s){let d=this._tiles[s.key];if(d)return d;d=this._cache.getAndRemove(s),d&&(this._setTileReloadTimer(s.key,d),d.tileID=s,this._state.initializeTileState(d,this.map?this.map.painter:null),this._cacheTimers[s.key]&&(clearTimeout(this._cacheTimers[s.key]),delete this._cacheTimers[s.key],this._setTileReloadTimer(s.key,d)));let v=d;return d||(d=new Wt(s,this._source.tileSize*s.overscaleFactor()),this._loadTile(d,s.key,d.state)),d.uses++,this._tiles[s.key]=d,v||this._source.fire(new i.l("dataloading",{tile:d,coord:d.tileID,dataType:"source"})),d}_setTileReloadTimer(s,d){s in this._timers&&(clearTimeout(this._timers[s]),delete this._timers[s]);let v=d.getExpiryTimeout();v&&(this._timers[s]=setTimeout(()=>{this._reloadTile(s,"expired"),delete this._timers[s]},v))}refreshTiles(s){for(let d in this._tiles)(this._isIdRenderable(d)||this._tiles[d].state=="errored")&&s.some(v=>v.equals(this._tiles[d].tileID.canonical))&&this._reloadTile(d,"expired")}_removeTile(s){let d=this._tiles[s];d&&(d.uses--,delete this._tiles[s],this._timers[s]&&(clearTimeout(this._timers[s]),delete this._timers[s]),d.uses>0||(d.hasData()&&d.state!=="reloading"?this._cache.add(d.tileID,d,d.getExpiryTimeout()):(d.aborted=!0,this._abortTile(d),this._unloadTile(d))))}_dataHandler(s){let d=s.sourceDataType;s.dataType==="source"&&d==="metadata"&&(this._sourceLoaded=!0),this._sourceLoaded&&!this._paused&&s.dataType==="source"&&d==="content"&&(this.reload(s.sourceDataChanged),this.transform&&this.update(this.transform,this.terrain),this._didEmitContent=!0)}clearTiles(){this._shouldReloadOnResume=!1,this._paused=!1;for(let s in this._tiles)this._removeTile(s);this._cache.reset()}tilesIn(s,d,v){let x=[],T=this.transform;if(!T)return x;let C=T.getCoveringTilesDetailsProvider().allowWorldCopies(),R=v?T.getCameraQueryGeometry(s):s,q=ee=>T.screenPointToMercatorCoordinate(ee,this.terrain),B=this.transformBbox(s,q,!C),H=this.transformBbox(R,q,!C),Y=this.getIds(),$=i.a2.fromPoints(H);for(let ee=0;ee<Y.length;ee++){let ie=this._tiles[Y[ee]];if(ie.holdingForFade())continue;let ve=C?[ie.tileID]:[ie.tileID.unwrapTo(-1),ie.tileID.unwrapTo(0)],ge=Math.pow(2,T.zoom-ie.tileID.overscaledZ),ye=d*ie.queryPadding*i.$/ie.tileSize/ge;for(let Me of ve){let Re=$.map(Pe=>Me.getTilePoint(new i.a1(Pe.x,Pe.y)));if(Re.expandBy(ye),Re.intersects(Dt)){let Pe=B.map(He=>Me.getTilePoint(He)),ze=H.map(He=>Me.getTilePoint(He));x.push({tile:ie,tileID:C?Me:Me.unwrapTo(0),queryGeometry:Pe,cameraQueryGeometry:ze,scale:ge})}}}return x}transformBbox(s,d,v){let x=s.map(d);if(v){let T=i.a2.fromPoints(s);T.shrinkBy(.001*Math.min(T.width(),T.height()));let C=T.map(d);i.a2.fromPoints(x).covers(C)||(x=x.map(R=>R.x>.5?new i.a1(R.x-1,R.y,R.z):R))}return x}getVisibleCoordinates(s){let d=this.getRenderableIds(s).map(v=>this._tiles[v].tileID);return this.transform&&this.transform.populateCache(d),d}hasTransition(){if(this._source.hasTransition())return!0;if(Bt(this._source.type)){let s=y.now();for(let d in this._tiles)if(this._tiles[d].fadeEndTime>=s)return!0}return!1}setFeatureState(s,d,v){this._state.updateState(s=s||"_geojsonTileLayer",d,v)}removeFeatureState(s,d,v){this._state.removeFeatureState(s=s||"_geojsonTileLayer",d,v)}getFeatureState(s,d){return this._state.getState(s=s||"_geojsonTileLayer",d)}setDependencies(s,d,v){let x=this._tiles[s];x&&x.setDependencies(d,v)}reloadTilesForDependencies(s,d){for(let v in this._tiles)this._tiles[v].hasDependency(s,d)&&this._reloadTile(v,"reloading");this._cache.filter(v=>!v.hasDependency(s,d))}}function xt(S,s){let d=Math.abs(2*S.wrap)-+(S.wrap<0),v=Math.abs(2*s.wrap)-+(s.wrap<0);return S.overscaledZ-s.overscaledZ||v-d||s.canonical.y-S.canonical.y||s.canonical.x-S.canonical.x}function Bt(S){return S==="raster"||S==="image"||S==="video"}Oe.maxOverzooming=10,Oe.maxUnderzooming=3;class Tr{constructor(s,d){this.reset(s,d)}reset(s,d){this.points=s||[],this._distances=[0];for(let v=1;v<this.points.length;v++)this._distances[v]=this._distances[v-1]+this.points[v].dist(this.points[v-1]);this.length=this._distances[this._distances.length-1],this.padding=Math.min(d||0,.5*this.length),this.paddedLength=this.length-2*this.padding}lerp(s){if(this.points.length===1)return this.points[0];s=i.ah(s,0,1);let d=1,v=this._distances[d],x=s*this.paddedLength+this.padding;for(;v<x&&d<this._distances.length;)v=this._distances[++d];let T=d-1,C=this._distances[T],R=v-C,q=R>0?(x-C)/R:0;return this.points[T].mult(1-q).add(this.points[d].mult(q))}}function dn(S,s){let d=!0;return S==="always"||S!=="never"&&s!=="never"||(d=!1),d}class wt{constructor(s,d,v){let x=this.boxCells=[],T=this.circleCells=[];this.xCellCount=Math.ceil(s/v),this.yCellCount=Math.ceil(d/v);for(let C=0;C<this.xCellCount*this.yCellCount;C++)x.push([]),T.push([]);this.circleKeys=[],this.boxKeys=[],this.bboxes=[],this.circles=[],this.width=s,this.height=d,this.xScale=this.xCellCount/s,this.yScale=this.yCellCount/d,this.boxUid=0,this.circleUid=0}keysLength(){return this.boxKeys.length+this.circleKeys.length}insert(s,d,v,x,T){this._forEachCell(d,v,x,T,this._insertBoxCell,this.boxUid++),this.boxKeys.push(s),this.bboxes.push(d),this.bboxes.push(v),this.bboxes.push(x),this.bboxes.push(T)}insertCircle(s,d,v,x){this._forEachCell(d-x,v-x,d+x,v+x,this._insertCircleCell,this.circleUid++),this.circleKeys.push(s),this.circles.push(d),this.circles.push(v),this.circles.push(x)}_insertBoxCell(s,d,v,x,T,C){this.boxCells[T].push(C)}_insertCircleCell(s,d,v,x,T,C){this.circleCells[T].push(C)}_query(s,d,v,x,T,C,R){if(v<0||s>this.width||x<0||d>this.height)return[];let q=[];if(s<=0&&d<=0&&this.width<=v&&this.height<=x){if(T)return[{key:null,x1:s,y1:d,x2:v,y2:x}];for(let B=0;B<this.boxKeys.length;B++)q.push({key:this.boxKeys[B],x1:this.bboxes[4*B],y1:this.bboxes[4*B+1],x2:this.bboxes[4*B+2],y2:this.bboxes[4*B+3]});for(let B=0;B<this.circleKeys.length;B++){let H=this.circles[3*B],Y=this.circles[3*B+1],$=this.circles[3*B+2];q.push({key:this.circleKeys[B],x1:H-$,y1:Y-$,x2:H+$,y2:Y+$})}}else this._forEachCell(s,d,v,x,this._queryCell,q,{hitTest:T,overlapMode:C,seenUids:{box:{},circle:{}}},R);return q}query(s,d,v,x){return this._query(s,d,v,x,!1,null)}hitTest(s,d,v,x,T,C){return this._query(s,d,v,x,!0,T,C).length>0}hitTestCircle(s,d,v,x,T){let C=s-v,R=s+v,q=d-v,B=d+v;if(R<0||C>this.width||B<0||q>this.height)return!1;let H=[];return this._forEachCell(C,q,R,B,this._queryCellCircle,H,{hitTest:!0,overlapMode:x,circle:{x:s,y:d,radius:v},seenUids:{box:{},circle:{}}},T),H.length>0}_queryCell(s,d,v,x,T,C,R,q){let{seenUids:B,hitTest:H,overlapMode:Y}=R,$=this.boxCells[T];if($!==null){let ie=this.bboxes;for(let ve of $)if(!B.box[ve]){B.box[ve]=!0;let ge=4*ve,ye=this.boxKeys[ve];if(s<=ie[ge+2]&&d<=ie[ge+3]&&v>=ie[ge+0]&&x>=ie[ge+1]&&(!q||q(ye))&&(!H||!dn(Y,ye.overlapMode))&&(C.push({key:ye,x1:ie[ge],y1:ie[ge+1],x2:ie[ge+2],y2:ie[ge+3]}),H))return!0}}let ee=this.circleCells[T];if(ee!==null){let ie=this.circles;for(let ve of ee)if(!B.circle[ve]){B.circle[ve]=!0;let ge=3*ve,ye=this.circleKeys[ve];if(this._circleAndRectCollide(ie[ge],ie[ge+1],ie[ge+2],s,d,v,x)&&(!q||q(ye))&&(!H||!dn(Y,ye.overlapMode))){let Me=ie[ge],Re=ie[ge+1],Pe=ie[ge+2];if(C.push({key:ye,x1:Me-Pe,y1:Re-Pe,x2:Me+Pe,y2:Re+Pe}),H)return!0}}}return!1}_queryCellCircle(s,d,v,x,T,C,R,q){let{circle:B,seenUids:H,overlapMode:Y}=R,$=this.boxCells[T];if($!==null){let ie=this.bboxes;for(let ve of $)if(!H.box[ve]){H.box[ve]=!0;let ge=4*ve,ye=this.boxKeys[ve];if(this._circleAndRectCollide(B.x,B.y,B.radius,ie[ge+0],ie[ge+1],ie[ge+2],ie[ge+3])&&(!q||q(ye))&&!dn(Y,ye.overlapMode))return C.push(!0),!0}}let ee=this.circleCells[T];if(ee!==null){let ie=this.circles;for(let ve of ee)if(!H.circle[ve]){H.circle[ve]=!0;let ge=3*ve,ye=this.circleKeys[ve];if(this._circlesCollide(ie[ge],ie[ge+1],ie[ge+2],B.x,B.y,B.radius)&&(!q||q(ye))&&!dn(Y,ye.overlapMode))return C.push(!0),!0}}}_forEachCell(s,d,v,x,T,C,R,q){let B=this._convertToXCellCoord(s),H=this._convertToYCellCoord(d),Y=this._convertToXCellCoord(v),$=this._convertToYCellCoord(x);for(let ee=B;ee<=Y;ee++)for(let ie=H;ie<=$;ie++)if(T.call(this,s,d,v,x,this.xCellCount*ie+ee,C,R,q))return}_convertToXCellCoord(s){return Math.max(0,Math.min(this.xCellCount-1,Math.floor(s*this.xScale)))}_convertToYCellCoord(s){return Math.max(0,Math.min(this.yCellCount-1,Math.floor(s*this.yScale)))}_circlesCollide(s,d,v,x,T,C){let R=x-s,q=T-d,B=v+C;return B*B>R*R+q*q}_circleAndRectCollide(s,d,v,x,T,C,R){let q=(C-x)/2,B=Math.abs(s-(x+q));if(B>q+v)return!1;let H=(R-T)/2,Y=Math.abs(d-(T+H));if(Y>H+v)return!1;if(B<=q||Y<=H)return!0;let $=B-q,ee=Y-H;return $*$+ee*ee<=v*v}}function ln(S,s,d){let v=i.L();if(!S){let{vecSouth:Y,vecEast:$}=or(s),ee=c();ee[0]=$[0],ee[1]=$[1],ee[2]=Y[0],ee[3]=Y[1],x=ee,(H=(C=(T=ee)[0])*(B=T[3])-(q=T[2])*(R=T[1]))&&(x[0]=B*(H=1/H),x[1]=-R*H,x[2]=-q*H,x[3]=C*H),v[0]=ee[0],v[1]=ee[1],v[4]=ee[2],v[5]=ee[3]}var x,T,C,R,q,B,H;return i.N(v,v,[1/d,1/d,1]),v}function Ar(S,s,d,v){if(S){let x=i.L();if(!s){let{vecSouth:T,vecEast:C}=or(d);x[0]=C[0],x[1]=C[1],x[4]=T[0],x[5]=T[1]}return i.N(x,x,[v,v,1]),x}return d.pixelsToClipSpaceMatrix}function or(S){let s=Math.cos(S.rollInRadians),d=Math.sin(S.rollInRadians),v=Math.cos(S.pitchInRadians),x=Math.cos(S.bearingInRadians),T=Math.sin(S.bearingInRadians),C=i.ar();C[0]=-x*v*d-T*s,C[1]=-T*v*d+x*s;let R=i.as(C);R<1e-9?i.at(C):i.au(C,C,1/R);let q=i.ar();q[0]=x*v*s-T*d,q[1]=T*v*s+x*d;let B=i.as(q);return B<1e-9?i.at(q):i.au(q,q,1/B),{vecEast:q,vecSouth:C}}function Er(S,s,d,v){let x;v?(x=[S,s,v(S,s),1],i.aw(x,x,d)):(x=[S,s,0,1],Gr(x,x,d));let T=x[3];return{point:new i.P(x[0]/T,x[1]/T),signedDistanceFromCamera:T,isOccluded:!1}}function Rt(S,s){return .5+S/s*.5}function jo(S,s){return S.x>=-s[0]&&S.x<=s[0]&&S.y>=-s[1]&&S.y<=s[1]}function Ko(S,s,d,v,x,T,C,R,q,B,H,Y,$){let ee=d?S.textSizeData:S.iconSizeData,ie=i.an(ee,s.transform.zoom),ve=[256/s.width*2+1,256/s.height*2+1],ge=d?S.text.dynamicLayoutVertexArray:S.icon.dynamicLayoutVertexArray;ge.clear();let ye=S.lineVertexArray,Me=d?S.text.placedSymbolArray:S.icon.placedSymbolArray,Re=s.transform.width/s.transform.height,Pe=!1;for(let ze=0;ze<Me.length;ze++){let He=Me.get(ze);if(He.hidden||He.writingMode===i.ao.vertical&&!Pe){sn(He.numGlyphs,ge);continue}Pe=!1;let Le=new i.P(He.anchorX,He.anchorY),Qe={getElevation:$,pitchedLabelPlaneMatrix:v,lineVertexArray:ye,pitchWithMap:T,projectionCache:{projections:{},offsets:{},cachedAnchorPoint:void 0,anyProjectionOccluded:!1},transform:s.transform,tileAnchorPoint:Le,unwrappedTileID:q,width:B,height:H,translation:Y},ht=An(He.anchorX,He.anchorY,Qe);if(!jo(ht.point,ve)){sn(He.numGlyphs,ge);continue}let it=Rt(s.transform.cameraToCenterDistance,ht.signedDistanceFromCamera),at=i.ap(ee,ie,He),dt=T?at*s.transform.getPitchedTextCorrection(He.anchorX,He.anchorY,q)/it:at*it,Vt=zt({projectionContext:Qe,pitchedLabelPlaneMatrixInverse:x,symbol:He,fontSize:dt,flip:!1,keepUpright:C,glyphOffsetArray:S.glyphOffsetArray,dynamicLayoutVertexArray:ge,aspectRatio:Re,rotateToLine:R});Pe=Vt.useVertical,(Vt.notEnoughRoom||Pe||Vt.needsFlipping&&zt({projectionContext:Qe,pitchedLabelPlaneMatrixInverse:x,symbol:He,fontSize:dt,flip:!0,keepUpright:C,glyphOffsetArray:S.glyphOffsetArray,dynamicLayoutVertexArray:ge,aspectRatio:Re,rotateToLine:R}).notEnoughRoom)&&sn(He.numGlyphs,ge)}d?S.text.dynamicLayoutVertexBuffer.updateData(ge):S.icon.dynamicLayoutVertexBuffer.updateData(ge)}function Un(S,s,d,v,x,T,C,R){let q=T.glyphStartIndex+T.numGlyphs,B=T.lineStartIndex,H=T.lineStartIndex+T.lineLength,Y=s.getoffsetX(T.glyphStartIndex),$=s.getoffsetX(q-1),ee=_n(S*Y,d,v,x,T.segment,B,H,R,C);if(!ee)return null;let ie=_n(S*$,d,v,x,T.segment,B,H,R,C);return ie?R.projectionCache.anyProjectionOccluded?null:{first:ee,last:ie}:null}function la(S,s,d,v){return S===i.ao.horizontal&&Math.abs(d.y-s.y)>Math.abs(d.x-s.x)*v?{useVertical:!0}:(S===i.ao.vertical?s.y<d.y:s.x>d.x)?{needsFlipping:!0}:null}function zt(S){let{projectionContext:s,pitchedLabelPlaneMatrixInverse:d,symbol:v,fontSize:x,flip:T,keepUpright:C,glyphOffsetArray:R,dynamicLayoutVertexArray:q,aspectRatio:B,rotateToLine:H}=S,Y=x/24,$=v.lineOffsetX*Y,ee=v.lineOffsetY*Y,ie;if(v.numGlyphs>1){let ve=v.glyphStartIndex+v.numGlyphs,ge=v.lineStartIndex,ye=v.lineStartIndex+v.lineLength,Me=Un(Y,R,$,ee,T,v,H,s);if(!Me)return{notEnoughRoom:!0};let Re=yn(Me.first.point.x,Me.first.point.y,s,d),Pe=yn(Me.last.point.x,Me.last.point.y,s,d);if(C&&!T){let ze=la(v.writingMode,Re,Pe,B);if(ze)return ze}ie=[Me.first];for(let ze=v.glyphStartIndex+1;ze<ve-1;ze++){let He=_n(Y*R.getoffsetX(ze),$,ee,T,v.segment,ge,ye,s,H);if(!He)return{notEnoughRoom:!0};ie.push(He)}ie.push(Me.last)}else{if(C&&!T){let ge=vn(s.tileAnchorPoint.x,s.tileAnchorPoint.y,s).point,ye=v.lineStartIndex+v.segment+1,Me=new i.P(s.lineVertexArray.getx(ye),s.lineVertexArray.gety(ye)),Re=vn(Me.x,Me.y,s),Pe=Re.signedDistanceFromCamera>0?Re.point:Nr(s.tileAnchorPoint,Me,ge,1,s),ze=yn(ge.x,ge.y,s,d),He=yn(Pe.x,Pe.y,s,d),Le=la(v.writingMode,ze,He,B);if(Le)return Le}let ve=_n(Y*R.getoffsetX(v.glyphStartIndex),$,ee,T,v.segment,v.lineStartIndex,v.lineStartIndex+v.lineLength,s,H);if(!ve||s.projectionCache.anyProjectionOccluded)return{notEnoughRoom:!0};ie=[ve]}for(let ve of ie)i.av(q,ve.point,ve.angle);return{}}function Nr(S,s,d,v,x){let T=S.add(S.sub(s)._unit()),C=vn(T.x,T.y,x).point,R=d.sub(C);return d.add(R._mult(v/R.mag()))}function hr(S,s,d){let v=s.projectionCache;if(v.projections[S])return v.projections[S];let x=new i.P(s.lineVertexArray.getx(S),s.lineVertexArray.gety(S)),T=vn(x.x,x.y,s);if(T.signedDistanceFromCamera>0)return v.projections[S]=T.point,v.anyProjectionOccluded=v.anyProjectionOccluded||T.isOccluded,T.point;let C=S-d.direction;return Nr(d.distanceFromAnchor===0?s.tileAnchorPoint:new i.P(s.lineVertexArray.getx(C),s.lineVertexArray.gety(C)),x,d.previousVertex,d.absOffsetX-d.distanceFromAnchor+1,s)}function vn(S,s,d){let v=S+d.translation[0],x=s+d.translation[1],T;return d.pitchWithMap?(T=Er(v,x,d.pitchedLabelPlaneMatrix,d.getElevation),T.isOccluded=!1):(T=d.transform.projectTileCoordinates(v,x,d.unwrappedTileID,d.getElevation),T.point.x=(.5*T.point.x+.5)*d.width,T.point.y=(.5*-T.point.y+.5)*d.height),T}function yn(S,s,d,v){if(d.pitchWithMap){let x=[S,s,0,1];return i.aw(x,x,v),d.transform.projectTileCoordinates(x[0]/x[3],x[1]/x[3],d.unwrappedTileID,d.getElevation).point}return{x:S/d.width*2-1,y:1-s/d.height*2}}function An(S,s,d){return d.transform.projectTileCoordinates(S,s,d.unwrappedTileID,d.getElevation)}function lr(S,s,d){return S._unit()._perp()._mult(s*d)}function hn(S,s,d,v,x,T,C,R,q){if(R.projectionCache.offsets[S])return R.projectionCache.offsets[S];let B=d.add(s);if(S+q.direction<v||S+q.direction>=x)return R.projectionCache.offsets[S]=B,B;let H=hr(S+q.direction,R,q),Y=lr(H.sub(d),C,q.direction),$=d.add(Y),ee=H.add(Y);return R.projectionCache.offsets[S]=i.ax(T,B,$,ee)||B,R.projectionCache.offsets[S]}function _n(S,s,d,v,x,T,C,R,q){let B=v?S-s:S+s,H=B>0?1:-1,Y=0;v&&(H*=-1,Y=Math.PI),H<0&&(Y+=Math.PI);let $,ee=H>0?T+x:T+x+1;R.projectionCache.cachedAnchorPoint?$=R.projectionCache.cachedAnchorPoint:($=vn(R.tileAnchorPoint.x,R.tileAnchorPoint.y,R).point,R.projectionCache.cachedAnchorPoint=$);let ie,ve,ge=$,ye=$,Me=0,Re=0,Pe=Math.abs(B),ze=[],He;for(;Me+Re<=Pe;){if(ee+=H,ee<T||ee>=C)return null;Me+=Re,ye=ge,ve=ie;let ht={absOffsetX:Pe,direction:H,distanceFromAnchor:Me,previousVertex:ye};if(ge=hr(ee,R,ht),d===0)ze.push(ye),He=ge.sub(ye);else{let it,at=ge.sub(ye);it=at.mag()===0?lr(hr(ee+H,R,ht).sub(ge),d,H):lr(at,d,H),ve||(ve=ye.add(it)),ie=hn(ee,it,ge,T,C,ve,d,R,ht),ze.push(ve),He=ie.sub(ve)}Re=He.mag()}let Le=He._mult((Pe-Me)/Re)._add(ve||ye),Qe=Y+Math.atan2(ge.y-ye.y,ge.x-ye.x);return ze.push(Le),{point:Le,angle:q?Qe:0,path:ze}}let on=new Float32Array([-1/0,-1/0,0,-1/0,-1/0,0,-1/0,-1/0,0,-1/0,-1/0,0]);function sn(S,s){for(let d=0;d<S;d++){let v=s.length;s.resize(v+4),s.float32.set(on,3*v)}}function Gr(S,s,d){let v=s[0],x=s[1];return S[0]=d[0]*v+d[4]*x+d[12],S[1]=d[1]*v+d[5]*x+d[13],S[3]=d[3]*v+d[7]*x+d[15],S}let Hr=100;class In{constructor(s,d=new wt(s.width+200,s.height+200,25),v=new wt(s.width+200,s.height+200,25)){this.transform=s,this.grid=d,this.ignoredGrid=v,this.pitchFactor=Math.cos(s.pitch*Math.PI/180)*s.cameraToCenterDistance,this.screenRightBoundary=s.width+Hr,this.screenBottomBoundary=s.height+Hr,this.gridRightBoundary=s.width+200,this.gridBottomBoundary=s.height+200,this.perspectiveRatioCutoff=.6}placeCollisionBox(s,d,v,x,T,C,R,q,B,H,Y,$){let ee=this.projectAndGetPerspectiveRatio(s.anchorPointX+q[0],s.anchorPointY+q[1],T,H,$),ie=v*ee.perspectiveRatio,ve;if(C||R)ve=this._projectCollisionBox(s,ie,x,T,C,R,q,ee,H,Y,$);else{let He=ee.x+(Y?Y.x*ie:0),Le=ee.y+(Y?Y.y*ie:0);ve={allPointsOccluded:!1,box:[He+s.x1*ie,Le+s.y1*ie,He+s.x2*ie,Le+s.y2*ie]}}let[ge,ye,Me,Re]=ve.box,Pe=C?ve.allPointsOccluded:ee.isOccluded,ze=Pe;return ze||(ze=ee.perspectiveRatio<this.perspectiveRatioCutoff),ze||(ze=!this.isInsideGrid(ge,ye,Me,Re)),ze||d!=="always"&&this.grid.hitTest(ge,ye,Me,Re,d,B)?{box:[ge,ye,Me,Re],placeable:!1,offscreen:!1,occluded:Pe}:{box:[ge,ye,Me,Re],placeable:!0,offscreen:this.isOffscreen(ge,ye,Me,Re),occluded:Pe}}placeCollisionCircles(s,d,v,x,T,C,R,q,B,H,Y,$,ee,ie){let ve=[],ge=new i.P(d.anchorX,d.anchorY),ye=this.getPerspectiveRatio(ge.x,ge.y,C,ie),Me=(B?T*this.transform.getPitchedTextCorrection(d.anchorX,d.anchorY,C)/ye:T*ye)/i.aB,Re={getElevation:ie,pitchedLabelPlaneMatrix:R,lineVertexArray:v,pitchWithMap:B,projectionCache:{projections:{},offsets:{},cachedAnchorPoint:void 0,anyProjectionOccluded:!1},transform:this.transform,tileAnchorPoint:ge,unwrappedTileID:C,width:this.transform.width,height:this.transform.height,translation:ee},Pe=Un(Me,x,d.lineOffsetX*Me,d.lineOffsetY*Me,!1,d,!1,Re),ze=!1,He=!1,Le=!0;if(Pe){let Qe=.5*Y*ye+$,ht=new i.P(-100,-100),it=new i.P(this.screenRightBoundary,this.screenBottomBoundary),at=new Tr,dt=Pe.first,Vt=Pe.last,$t=[];for(let Pn=dt.path.length-1;Pn>=1;Pn--)$t.push(dt.path[Pn]);for(let Pn=1;Pn<Vt.path.length;Pn++)$t.push(Vt.path[Pn]);let Nt=2.5*Qe;if(B){let Pn=this.projectPathToScreenSpace($t,Re);$t=Pn.some(So=>So.signedDistanceFromCamera<=0)?[]:Pn.map(So=>So.point)}let xr=[];if($t.length>0){let Pn=$t[0].clone(),So=$t[0].clone();for(let Jo=1;Jo<$t.length;Jo++)Pn.x=Math.min(Pn.x,$t[Jo].x),Pn.y=Math.min(Pn.y,$t[Jo].y),So.x=Math.max(So.x,$t[Jo].x),So.y=Math.max(So.y,$t[Jo].y);xr=Pn.x>=ht.x&&So.x<=it.x&&Pn.y>=ht.y&&So.y<=it.y?[$t]:So.x<ht.x||Pn.x>it.x||So.y<ht.y||Pn.y>it.y?[]:i.ay([$t],ht.x,ht.y,it.x,it.y)}for(let Pn of xr){at.reset(Pn,.25*Qe);let So=0;So=at.length<=.5*Qe?1:Math.ceil(at.paddedLength/Nt)+1;for(let Jo=0;Jo<So;Jo++){let Go=Jo/Math.max(So-1,1),qi=at.lerp(Go),Xi=qi.x+Hr,Mn=qi.y+Hr;ve.push(Xi,Mn,Qe,0);let Qo=Xi-Qe,Ia=Mn-Qe,Fa=Xi+Qe,ls=Mn+Qe;if(Le=Le&&this.isOffscreen(Qo,Ia,Fa,ls),He=He||this.isInsideGrid(Qo,Ia,Fa,ls),s!=="always"&&this.grid.hitTestCircle(Xi,Mn,Qe,s,H)&&(ze=!0,!q))return{circles:[],offscreen:!1,collisionDetected:ze}}}}return{circles:!q&&ze||!He||ye<this.perspectiveRatioCutoff?[]:ve,offscreen:Le,collisionDetected:ze}}projectPathToScreenSpace(s,d){let v=function(x,T){let C=i.L();return i.aq(C,T.pitchedLabelPlaneMatrix),x.map(R=>{let q=Er(R.x,R.y,C,T.getElevation),B=T.transform.projectTileCoordinates(q.point.x,q.point.y,T.unwrappedTileID,T.getElevation);return B.point.x=(.5*B.point.x+.5)*T.width,B.point.y=(.5*-B.point.y+.5)*T.height,B})}(s,d);return function(x){let T=0,C=0,R=0,q=0;for(let B=0;B<x.length;B++)x[B].isOccluded?(R=B+1,q=0):(q++,q>C&&(C=q,T=R));return x.slice(T,T+C)}(v)}queryRenderedSymbols(s){if(s.length===0||this.grid.keysLength()===0&&this.ignoredGrid.keysLength()===0)return{};let d=[],v=new i.a2;for(let Y of s){let $=new i.P(Y.x+Hr,Y.y+Hr);v.extend($),d.push($)}let{minX:x,minY:T,maxX:C,maxY:R}=v,q=this.grid.query(x,T,C,R).concat(this.ignoredGrid.query(x,T,C,R)),B={},H={};for(let Y of q){let $=Y.key;if(B[$.bucketInstanceId]===void 0&&(B[$.bucketInstanceId]={}),B[$.bucketInstanceId][$.featureIndex])continue;let ee=[new i.P(Y.x1,Y.y1),new i.P(Y.x2,Y.y1),new i.P(Y.x2,Y.y2),new i.P(Y.x1,Y.y2)];i.az(d,ee)&&(B[$.bucketInstanceId][$.featureIndex]=!0,H[$.bucketInstanceId]===void 0&&(H[$.bucketInstanceId]=[]),H[$.bucketInstanceId].push($.featureIndex))}return H}insertCollisionBox(s,d,v,x,T,C){(v?this.ignoredGrid:this.grid).insert({bucketInstanceId:x,featureIndex:T,collisionGroupID:C,overlapMode:d},s[0],s[1],s[2],s[3])}insertCollisionCircles(s,d,v,x,T,C){let R=v?this.ignoredGrid:this.grid,q={bucketInstanceId:x,featureIndex:T,collisionGroupID:C,overlapMode:d};for(let B=0;B<s.length;B+=4)R.insertCircle(q,s[B],s[B+1],s[B+2])}projectAndGetPerspectiveRatio(s,d,v,x,T){if(T){let C;x?(C=[s,d,x(s,d),1],i.aw(C,C,T)):(C=[s,d,0,1],Gr(C,C,T));let R=C[3];return{x:(C[0]/R+1)/2*this.transform.width+Hr,y:(-C[1]/R+1)/2*this.transform.height+Hr,perspectiveRatio:.5+this.transform.cameraToCenterDistance/R*.5,isOccluded:!1,signedDistanceFromCamera:R}}{let C=this.transform.projectTileCoordinates(s,d,v,x);return{x:(C.point.x+1)/2*this.transform.width+Hr,y:(1-C.point.y)/2*this.transform.height+Hr,perspectiveRatio:.5+this.transform.cameraToCenterDistance/C.signedDistanceFromCamera*.5,isOccluded:C.isOccluded,signedDistanceFromCamera:C.signedDistanceFromCamera}}}getPerspectiveRatio(s,d,v,x){let T=this.transform.projectTileCoordinates(s,d,v,x);return .5+this.transform.cameraToCenterDistance/T.signedDistanceFromCamera*.5}isOffscreen(s,d,v,x){return v<Hr||s>=this.screenRightBoundary||x<Hr||d>this.screenBottomBoundary}isInsideGrid(s,d,v,x){return v>=0&&s<this.gridRightBoundary&&x>=0&&d<this.gridBottomBoundary}getViewportMatrix(){let s=i.ag([]);return i.M(s,s,[-100,-100,0]),s}_projectCollisionBox(s,d,v,x,T,C,R,q,B,H,Y){let $=1,ee=0,ie=0,ve=1,ge=s.anchorPointX+R[0],ye=s.anchorPointY+R[1];if(C&&!T){let $t=this.projectAndGetPerspectiveRatio(ge+1,ye,x,B,Y),Nt=$t.x-q.x,xr=Math.atan(($t.y-q.y)/Nt)+(Nt<0?Math.PI:0),Pn=Math.sin(xr),So=Math.cos(xr);$=So,ee=Pn,ie=-Pn,ve=So}else if(!C&&T){let $t=or(this.transform);$=$t.vecEast[0],ee=$t.vecEast[1],ie=$t.vecSouth[0],ve=$t.vecSouth[1]}let Me=q.x,Re=q.y,Pe=d;T&&(Me=ge,Re=ye,Pe=Math.pow(2,-(this.transform.zoom-v.overscaledZ)),Pe*=this.transform.getPitchedTextCorrection(ge,ye,x),H||(Pe*=i.ah(.5+q.signedDistanceFromCamera/this.transform.cameraToCenterDistance*.5,0,4))),H&&(Me+=$*H.x*Pe+ie*H.y*Pe,Re+=ee*H.x*Pe+ve*H.y*Pe);let ze=s.x1*Pe,He=s.x2*Pe,Le=(ze+He)/2,Qe=s.y1*Pe,ht=s.y2*Pe,it=(Qe+ht)/2,at=[{offsetX:ze,offsetY:Qe},{offsetX:Le,offsetY:Qe},{offsetX:He,offsetY:Qe},{offsetX:He,offsetY:it},{offsetX:He,offsetY:ht},{offsetX:Le,offsetY:ht},{offsetX:ze,offsetY:ht},{offsetX:ze,offsetY:it}],dt=[];for(let{offsetX:$t,offsetY:Nt}of at)dt.push(new i.P(Me+$*$t+ie*Nt,Re+ee*$t+ve*Nt));let Vt=!1;if(T){let $t=dt.map(Nt=>this.projectAndGetPerspectiveRatio(Nt.x,Nt.y,x,B,Y));Vt=$t.some(Nt=>!Nt.isOccluded),dt=$t.map(Nt=>new i.P(Nt.x,Nt.y))}else Vt=!0;return{box:i.aA(dt),allPointsOccluded:!Vt}}}class On{constructor(s,d,v,x){this.opacity=s?Math.max(0,Math.min(1,s.opacity+(s.placed?d:-d))):x&&v?1:0,this.placed=v}isHidden(){return this.opacity===0&&!this.placed}}class Et{constructor(s,d,v,x,T){this.text=new On(s?s.text:null,d,v,T),this.icon=new On(s?s.icon:null,d,x,T)}isHidden(){return this.text.isHidden()&&this.icon.isHidden()}}class rr{constructor(s,d,v){this.text=s,this.icon=d,this.skipFade=v}}class li{constructor(s,d,v,x,T){this.bucketInstanceId=s,this.featureIndex=d,this.sourceLayerIndex=v,this.bucketIndex=x,this.tileID=T}}class Ci{constructor(s){this.crossSourceCollisions=s,this.maxGroupID=0,this.collisionGroups={}}get(s){if(this.crossSourceCollisions)return{ID:0,predicate:null};if(!this.collisionGroups[s]){let d=++this.maxGroupID;this.collisionGroups[s]={ID:d,predicate:v=>v.collisionGroupID===d}}return this.collisionGroups[s]}}function po(S,s,d,v,x){let{horizontalAlign:T,verticalAlign:C}=i.aH(S);return new i.P(-(T-.5)*s+v[0]*x,-(C-.5)*d+v[1]*x)}class so{constructor(s,d,v,x,T){this.transform=s.clone(),this.terrain=d,this.collisionIndex=new In(this.transform),this.placements={},this.opacities={},this.variableOffsets={},this.stale=!1,this.commitTime=0,this.fadeDuration=v,this.retainedQueryData={},this.collisionGroups=new Ci(x),this.collisionCircleArrays={},this.collisionBoxArrays=new Map,this.prevPlacement=T,T&&(T.prevPlacement=void 0),this.placedOrientations={}}_getTerrainElevationFunc(s){let d=this.terrain;return d?(v,x)=>d.getElevation(s,v,x):null}getBucketParts(s,d,v,x){let T=v.getBucket(d),C=v.latestFeatureIndex;if(!T||!C||d.id!==T.layerIds[0])return;let R=v.collisionBoxArray,q=T.layers[0].layout,B=T.layers[0].paint,H=Math.pow(2,this.transform.zoom-v.tileID.overscaledZ),Y=v.tileSize/i.$,$=v.tileID.toUnwrapped(),ee=q.get("text-rotation-alignment")==="map",ie=i.aC(v,1,this.transform.zoom),ve=i.aD(this.collisionIndex.transform,v,B.get("text-translate"),B.get("text-translate-anchor")),ge=i.aD(this.collisionIndex.transform,v,B.get("icon-translate"),B.get("icon-translate-anchor")),ye=ln(ee,this.transform,ie);this.retainedQueryData[T.bucketInstanceId]=new li(T.bucketInstanceId,C,T.sourceLayerIndex,T.index,v.tileID);let Me={bucket:T,layout:q,translationText:ve,translationIcon:ge,unwrappedTileID:$,pitchedLabelPlaneMatrix:ye,scale:H,textPixelRatio:Y,holdingForFade:v.holdingForFade(),collisionBoxArray:R,partiallyEvaluatedTextSize:i.an(T.textSizeData,this.transform.zoom),collisionGroup:this.collisionGroups.get(T.sourceID)};if(x)for(let Re of T.sortKeyRanges){let{sortKey:Pe,symbolInstanceStart:ze,symbolInstanceEnd:He}=Re;s.push({sortKey:Pe,symbolInstanceStart:ze,symbolInstanceEnd:He,parameters:Me})}else s.push({symbolInstanceStart:0,symbolInstanceEnd:T.symbolInstances.length,parameters:Me})}attemptAnchorPlacement(s,d,v,x,T,C,R,q,B,H,Y,$,ee,ie,ve,ge,ye,Me,Re,Pe){let ze=i.aE[s.textAnchor],He=[s.textOffset0,s.textOffset1],Le=po(ze,v,x,He,T),Qe=this.collisionIndex.placeCollisionBox(d,$,q,B,H,R,C,ge,Y.predicate,Re,Le,Pe);if((!Me||this.collisionIndex.placeCollisionBox(Me,$,q,B,H,R,C,ye,Y.predicate,Re,Le,Pe).placeable)&&Qe.placeable){let ht;if(this.prevPlacement&&this.prevPlacement.variableOffsets[ee.crossTileID]&&this.prevPlacement.placements[ee.crossTileID]&&this.prevPlacement.placements[ee.crossTileID].text&&(ht=this.prevPlacement.variableOffsets[ee.crossTileID].anchor),ee.crossTileID===0)throw new Error("symbolInstance.crossTileID can't be 0");return this.variableOffsets[ee.crossTileID]={textOffset:He,width:v,height:x,anchor:ze,textBoxScale:T,prevAnchor:ht},this.markUsedJustification(ie,ze,ee,ve),ie.allowVerticalPlacement&&(this.markUsedOrientation(ie,ve,ee),this.placedOrientations[ee.crossTileID]=ve),{shift:Le,placedGlyphBoxes:Qe}}}placeLayerBucketPart(s,d,v){let{bucket:x,layout:T,translationText:C,translationIcon:R,unwrappedTileID:q,pitchedLabelPlaneMatrix:B,textPixelRatio:H,holdingForFade:Y,collisionBoxArray:$,partiallyEvaluatedTextSize:ee,collisionGroup:ie}=s.parameters,ve=T.get("text-optional"),ge=T.get("icon-optional"),ye=i.aF(T,"text-overlap","text-allow-overlap"),Me=ye==="always",Re=i.aF(T,"icon-overlap","icon-allow-overlap"),Pe=Re==="always",ze=T.get("text-rotation-alignment")==="map",He=T.get("text-pitch-alignment")==="map",Le=T.get("icon-text-fit")!=="none",Qe=T.get("symbol-z-order")==="viewport-y",ht=Me&&(Pe||!x.hasIconData()||ge),it=Pe&&(Me||!x.hasTextData()||ve);!x.collisionArrays&&$&&x.deserializeCollisionBoxes($);let at=this.retainedQueryData[x.bucketInstanceId].tileID,dt=this._getTerrainElevationFunc(at),Vt=this.transform.getFastPathSimpleProjectionMatrix(at),$t=(Nt,xr,Pn)=>{var So,Jo;if(d[Nt.crossTileID])return;if(Y)return void(this.placements[Nt.crossTileID]=new rr(!1,!1,!1));let Go=!1,qi=!1,Xi=!0,Mn=null,Qo={box:null,placeable:!1,offscreen:null,occluded:!1},Ia={placeable:!1},Fa=null,ls=null,gl=null,op=0,vh=0,yh=0;xr.textFeatureIndex?op=xr.textFeatureIndex:Nt.useRuntimeCollisionCircles&&(op=Nt.featureIndex),xr.verticalTextFeatureIndex&&(vh=xr.verticalTextFeatureIndex);let zv=xr.textBox;if(zv){let Ql=Ma=>{let Ua=i.ao.horizontal;if(x.allowVerticalPlacement&&!Ma&&this.prevPlacement){let lc=this.prevPlacement.placedOrientations[Nt.crossTileID];lc&&(this.placedOrientations[Nt.crossTileID]=lc,Ua=lc,this.markUsedOrientation(x,Ua,Nt))}return Ua},ip=(Ma,Ua)=>{if(x.allowVerticalPlacement&&Nt.numVerticalGlyphVertices>0&&xr.verticalTextBox){for(let lc of x.writingModes)if(lc===i.ao.vertical?(Qo=Ua(),Ia=Qo):Qo=Ma(),Qo&&Qo.placeable)break}else Qo=Ma()},vl=Nt.textAnchorOffsetStartIndex,_h=Nt.textAnchorOffsetEndIndex;if(_h===vl){let Ma=(Ua,lc)=>{let Ca=this.collisionIndex.placeCollisionBox(Ua,ye,H,at,q,He,ze,C,ie.predicate,dt,void 0,Vt);return Ca&&Ca.placeable&&(this.markUsedOrientation(x,lc,Nt),this.placedOrientations[Nt.crossTileID]=lc),Ca};ip(()=>Ma(zv,i.ao.horizontal),()=>{let Ua=xr.verticalTextBox;return x.allowVerticalPlacement&&Nt.numVerticalGlyphVertices>0&&Ua?Ma(Ua,i.ao.vertical):{box:null,offscreen:null}}),Ql(Qo&&Qo.placeable)}else{let Ma=i.aE[(Jo=(So=this.prevPlacement)===null||So===void 0?void 0:So.variableOffsets[Nt.crossTileID])===null||Jo===void 0?void 0:Jo.anchor],Ua=(Ca,F1,Uv)=>{let nd=Ca.x2-Ca.x1,ap=Ca.y2-Ca.y1,bh=Nt.textBoxScale,CN=Le&&Re==="never"?F1:null,Cu=null,AN=ye==="never"?1:2,EI="never";Ma&&AN++;for(let Hx=0;Hx<AN;Hx++){for(let Wx=vl;Wx<_h;Wx++){let xh=x.textAnchorOffsets.get(Wx);if(Ma&&xh.textAnchor!==Ma)continue;let od=this.attemptAnchorPlacement(xh,Ca,nd,ap,bh,ze,He,H,at,q,ie,EI,Nt,x,Uv,C,R,CN,dt);if(od&&(Cu=od.placedGlyphBoxes,Cu&&Cu.placeable))return Go=!0,Mn=od.shift,Cu}Ma?Ma=null:EI=ye}return v&&!Cu&&(Cu={box:this.collisionIndex.placeCollisionBox(zv,"always",H,at,q,He,ze,C,ie.predicate,dt,void 0,Vt).box,offscreen:!1,placeable:!1,occluded:!1}),Cu};ip(()=>Ua(zv,xr.iconBox,i.ao.horizontal),()=>{let Ca=xr.verticalTextBox;return x.allowVerticalPlacement&&(!Qo||!Qo.placeable)&&Nt.numVerticalGlyphVertices>0&&Ca?Ua(Ca,xr.verticalIconBox,i.ao.vertical):{box:null,occluded:!0,offscreen:null}}),Qo&&(Go=Qo.placeable,Xi=Qo.offscreen);let lc=Ql(Qo&&Qo.placeable);if(!Go&&this.prevPlacement){let Ca=this.prevPlacement.variableOffsets[Nt.crossTileID];Ca&&(this.variableOffsets[Nt.crossTileID]=Ca,this.markUsedJustification(x,Ca.anchor,Nt,lc))}}}if(Fa=Qo,Go=Fa&&Fa.placeable,Xi=Fa&&Fa.offscreen,Nt.useRuntimeCollisionCircles){let Ql=x.text.placedSymbolArray.get(Nt.centerJustifiedTextSymbolIndex),ip=i.ap(x.textSizeData,ee,Ql),vl=T.get("text-padding");ls=this.collisionIndex.placeCollisionCircles(ye,Ql,x.lineVertexArray,x.glyphOffsetArray,ip,q,B,v,He,ie.predicate,Nt.collisionCircleDiameter,vl,C,dt),ls.circles.length&&ls.collisionDetected&&!v&&i.w("Collisions detected, but collision boxes are not shown"),Go=Me||ls.circles.length>0&&!ls.collisionDetected,Xi=Xi&&ls.offscreen}if(xr.iconFeatureIndex&&(yh=xr.iconFeatureIndex),xr.iconBox){let Ql=ip=>this.collisionIndex.placeCollisionBox(ip,Re,H,at,q,He,ze,R,ie.predicate,dt,Le&&Mn?Mn:void 0,Vt);Ia&&Ia.placeable&&xr.verticalIconBox?(gl=Ql(xr.verticalIconBox),qi=gl.placeable):(gl=Ql(xr.iconBox),qi=gl.placeable),Xi=Xi&&gl.offscreen}let Fv=ve||Nt.numHorizontalGlyphVertices===0&&Nt.numVerticalGlyphVertices===0,rg=ge||Nt.numIconVertices===0;Fv||rg?rg?Fv||(qi=qi&&Go):Go=qi&&Go:qi=Go=qi&&Go;let ng=qi&&gl.placeable;if(Go&&Fa.placeable&&this.collisionIndex.insertCollisionBox(Fa.box,ye,T.get("text-ignore-placement"),x.bucketInstanceId,Ia&&Ia.placeable&&vh?vh:op,ie.ID),ng&&this.collisionIndex.insertCollisionBox(gl.box,Re,T.get("icon-ignore-placement"),x.bucketInstanceId,yh,ie.ID),ls&&Go&&this.collisionIndex.insertCollisionCircles(ls.circles,ye,T.get("text-ignore-placement"),x.bucketInstanceId,op,ie.ID),v&&this.storeCollisionData(x.bucketInstanceId,Pn,xr,Fa,gl,ls),Nt.crossTileID===0)throw new Error("symbolInstance.crossTileID can't be 0");if(x.bucketInstanceId===0)throw new Error("bucket.bucketInstanceId can't be 0");this.placements[Nt.crossTileID]=new rr((Go||ht)&&!(Fa!=null&&Fa.occluded),(qi||it)&&!(gl!=null&&gl.occluded),Xi||x.justReloaded),d[Nt.crossTileID]=!0};if(Qe){if(s.symbolInstanceStart!==0)throw new Error("bucket.bucketInstanceId should be 0");let Nt=x.getSortedSymbolIndexes(-this.transform.bearingInRadians);for(let xr=Nt.length-1;xr>=0;--xr){let Pn=Nt[xr];$t(x.symbolInstances.get(Pn),x.collisionArrays[Pn],Pn)}}else for(let Nt=s.symbolInstanceStart;Nt<s.symbolInstanceEnd;Nt++)$t(x.symbolInstances.get(Nt),x.collisionArrays[Nt],Nt);x.justReloaded=!1}storeCollisionData(s,d,v,x,T,C){if(v.textBox||v.iconBox){let R,q;this.collisionBoxArrays.has(s)?R=this.collisionBoxArrays.get(s):(R=new Map,this.collisionBoxArrays.set(s,R)),R.has(d)?q=R.get(d):(q={text:null,icon:null},R.set(d,q)),v.textBox&&(q.text=x.box),v.iconBox&&(q.icon=T.box)}if(C){let R=this.collisionCircleArrays[s];R===void 0&&(R=this.collisionCircleArrays[s]=[]);for(let q=0;q<C.circles.length;q+=4)R.push(C.circles[q+0]-Hr),R.push(C.circles[q+1]-Hr),R.push(C.circles[q+2]),R.push(C.collisionDetected?1:0)}}markUsedJustification(s,d,v,x){let T;T=x===i.ao.vertical?v.verticalPlacedTextSymbolIndex:{left:v.leftJustifiedTextSymbolIndex,center:v.centerJustifiedTextSymbolIndex,right:v.rightJustifiedTextSymbolIndex}[i.aG(d)];let C=[v.leftJustifiedTextSymbolIndex,v.centerJustifiedTextSymbolIndex,v.rightJustifiedTextSymbolIndex,v.verticalPlacedTextSymbolIndex];for(let R of C)R>=0&&(s.text.placedSymbolArray.get(R).crossTileID=T>=0&&R!==T?0:v.crossTileID)}markUsedOrientation(s,d,v){let x=d===i.ao.horizontal||d===i.ao.horizontalOnly?d:0,T=d===i.ao.vertical?d:0,C=[v.leftJustifiedTextSymbolIndex,v.centerJustifiedTextSymbolIndex,v.rightJustifiedTextSymbolIndex];for(let R of C)s.text.placedSymbolArray.get(R).placedOrientation=x;v.verticalPlacedTextSymbolIndex&&(s.text.placedSymbolArray.get(v.verticalPlacedTextSymbolIndex).placedOrientation=T)}commit(s){this.commitTime=s,this.zoomAtLastRecencyCheck=this.transform.zoom;let d=this.prevPlacement,v=!1;this.prevZoomAdjustment=d?d.zoomAdjustment(this.transform.zoom):0;let x=d?d.symbolFadeChange(s):1,T=d?d.opacities:{},C=d?d.variableOffsets:{},R=d?d.placedOrientations:{};for(let q in this.placements){let B=this.placements[q],H=T[q];H?(this.opacities[q]=new Et(H,x,B.text,B.icon),v=v||B.text!==H.text.placed||B.icon!==H.icon.placed):(this.opacities[q]=new Et(null,x,B.text,B.icon,B.skipFade),v=v||B.text||B.icon)}for(let q in T){let B=T[q];if(!this.opacities[q]){let H=new Et(B,x,!1,!1);H.isHidden()||(this.opacities[q]=H,v=v||B.text.placed||B.icon.placed)}}for(let q in C)this.variableOffsets[q]||!this.opacities[q]||this.opacities[q].isHidden()||(this.variableOffsets[q]=C[q]);for(let q in R)this.placedOrientations[q]||!this.opacities[q]||this.opacities[q].isHidden()||(this.placedOrientations[q]=R[q]);if(d&&d.lastPlacementChangeTime===void 0)throw new Error("Last placement time for previous placement is not defined");v?this.lastPlacementChangeTime=s:typeof this.lastPlacementChangeTime!="number"&&(this.lastPlacementChangeTime=d?d.lastPlacementChangeTime:s)}updateLayerOpacities(s,d){let v={};for(let x of d){let T=x.getBucket(s);T&&x.latestFeatureIndex&&s.id===T.layerIds[0]&&this.updateBucketOpacities(T,x.tileID,v,x.collisionBoxArray)}}updateBucketOpacities(s,d,v,x){s.hasTextData()&&(s.text.opacityVertexArray.clear(),s.text.hasVisibleVertices=!1),s.hasIconData()&&(s.icon.opacityVertexArray.clear(),s.icon.hasVisibleVertices=!1),s.hasIconCollisionBoxData()&&s.iconCollisionBox.collisionVertexArray.clear(),s.hasTextCollisionBoxData()&&s.textCollisionBox.collisionVertexArray.clear();let T=s.layers[0],C=T.layout,R=new Et(null,0,!1,!1,!0),q=C.get("text-allow-overlap"),B=C.get("icon-allow-overlap"),H=T._unevaluatedLayout.hasValue("text-variable-anchor")||T._unevaluatedLayout.hasValue("text-variable-anchor-offset"),Y=C.get("text-rotation-alignment")==="map",$=C.get("text-pitch-alignment")==="map",ee=C.get("icon-text-fit")!=="none",ie=new Et(null,0,q&&(B||!s.hasIconData()||C.get("icon-optional")),B&&(q||!s.hasTextData()||C.get("text-optional")),!0);!s.collisionArrays&&x&&(s.hasIconCollisionBoxData()||s.hasTextCollisionBoxData())&&s.deserializeCollisionBoxes(x);let ve=(ye,Me,Re)=>{for(let Pe=0;Pe<Me/4;Pe++)ye.opacityVertexArray.emplaceBack(Re);ye.hasVisibleVertices=ye.hasVisibleVertices||Re!==nn},ge=this.collisionBoxArrays.get(s.bucketInstanceId);for(let ye=0;ye<s.symbolInstances.length;ye++){let Me=s.symbolInstances.get(ye),{numHorizontalGlyphVertices:Re,numVerticalGlyphVertices:Pe,crossTileID:ze}=Me,He=this.opacities[ze];v[ze]?He=R:He||(He=ie,this.opacities[ze]=He),v[ze]=!0;let Le=Me.numIconVertices>0,Qe=this.placedOrientations[Me.crossTileID],ht=Qe===i.ao.vertical,it=Qe===i.ao.horizontal||Qe===i.ao.horizontalOnly;if(Re>0||Pe>0){let dt=mn(He.text);ve(s.text,Re,ht?nn:dt),ve(s.text,Pe,it?nn:dt);let Vt=He.text.isHidden();[Me.rightJustifiedTextSymbolIndex,Me.centerJustifiedTextSymbolIndex,Me.leftJustifiedTextSymbolIndex].forEach(xr=>{xr>=0&&(s.text.placedSymbolArray.get(xr).hidden=Vt||ht?1:0)}),Me.verticalPlacedTextSymbolIndex>=0&&(s.text.placedSymbolArray.get(Me.verticalPlacedTextSymbolIndex).hidden=Vt||it?1:0);let $t=this.variableOffsets[Me.crossTileID];$t&&this.markUsedJustification(s,$t.anchor,Me,Qe);let Nt=this.placedOrientations[Me.crossTileID];Nt&&(this.markUsedJustification(s,"left",Me,Nt),this.markUsedOrientation(s,Nt,Me))}if(Le){let dt=mn(He.icon),Vt=!(ee&&Me.verticalPlacedIconSymbolIndex&&ht);Me.placedIconSymbolIndex>=0&&(ve(s.icon,Me.numIconVertices,Vt?dt:nn),s.icon.placedSymbolArray.get(Me.placedIconSymbolIndex).hidden=He.icon.isHidden()),Me.verticalPlacedIconSymbolIndex>=0&&(ve(s.icon,Me.numVerticalIconVertices,Vt?nn:dt),s.icon.placedSymbolArray.get(Me.verticalPlacedIconSymbolIndex).hidden=He.icon.isHidden())}let at=ge&&ge.has(ye)?ge.get(ye):{text:null,icon:null};if(s.hasIconCollisionBoxData()||s.hasTextCollisionBoxData()){let dt=s.collisionArrays[ye];if(dt){let Vt=new i.P(0,0);if(dt.textBox||dt.verticalTextBox){let $t=!0;if(H){let Nt=this.variableOffsets[ze];Nt?(Vt=po(Nt.anchor,Nt.width,Nt.height,Nt.textOffset,Nt.textBoxScale),Y&&Vt._rotate($?-this.transform.bearingInRadians:this.transform.bearingInRadians)):$t=!1}if(dt.textBox||dt.verticalTextBox){let Nt;dt.textBox&&(Nt=ht),dt.verticalTextBox&&(Nt=it),Kl(s.textCollisionBox.collisionVertexArray,He.text.placed,!$t||Nt,at.text,Vt.x,Vt.y)}}if(dt.iconBox||dt.verticalIconBox){let $t=!!(!it&&dt.verticalIconBox),Nt;dt.iconBox&&(Nt=$t),dt.verticalIconBox&&(Nt=!$t),Kl(s.iconCollisionBox.collisionVertexArray,He.icon.placed,Nt,at.icon,ee?Vt.x:0,ee?Vt.y:0)}}}}if(s.sortFeatures(-this.transform.bearingInRadians),this.retainedQueryData[s.bucketInstanceId]&&(this.retainedQueryData[s.bucketInstanceId].featureSortOrder=s.featureSortOrder),s.hasTextData()&&s.text.opacityVertexBuffer&&s.text.opacityVertexBuffer.updateData(s.text.opacityVertexArray),s.hasIconData()&&s.icon.opacityVertexBuffer&&s.icon.opacityVertexBuffer.updateData(s.icon.opacityVertexArray),s.hasIconCollisionBoxData()&&s.iconCollisionBox.collisionVertexBuffer&&s.iconCollisionBox.collisionVertexBuffer.updateData(s.iconCollisionBox.collisionVertexArray),s.hasTextCollisionBoxData()&&s.textCollisionBox.collisionVertexBuffer&&s.textCollisionBox.collisionVertexBuffer.updateData(s.textCollisionBox.collisionVertexArray),s.text.opacityVertexArray.length!==s.text.layoutVertexArray.length/4)throw new Error(`bucket.text.opacityVertexArray.length (= ${s.text.opacityVertexArray.length}) !== bucket.text.layoutVertexArray.length (= ${s.text.layoutVertexArray.length}) / 4`);if(s.icon.opacityVertexArray.length!==s.icon.layoutVertexArray.length/4)throw new Error(`bucket.icon.opacityVertexArray.length (= ${s.icon.opacityVertexArray.length}) !== bucket.icon.layoutVertexArray.length (= ${s.icon.layoutVertexArray.length}) / 4`);s.bucketInstanceId in this.collisionCircleArrays&&(s.collisionCircleArray=this.collisionCircleArrays[s.bucketInstanceId],delete this.collisionCircleArrays[s.bucketInstanceId])}symbolFadeChange(s){return this.fadeDuration===0?1:(s-this.commitTime)/this.fadeDuration+this.prevZoomAdjustment}zoomAdjustment(s){return Math.max(0,(this.transform.zoom-s)/1.5)}hasTransitions(s){return this.stale||s-this.lastPlacementChangeTime<this.fadeDuration}stillRecent(s,d){let v=this.zoomAtLastRecencyCheck===d?1-this.zoomAdjustment(d):1;return this.zoomAtLastRecencyCheck=d,this.commitTime+this.fadeDuration*v>s}setStale(){this.stale=!0}}function Kl(S,s,d,v,x,T){v&&v.length!==0||(v=[0,0,0,0]);let C=v[0]-Hr,R=v[1]-Hr,q=v[2]-Hr,B=v[3]-Hr;S.emplaceBack(s?1:0,d?1:0,x||0,T||0,C,R),S.emplaceBack(s?1:0,d?1:0,x||0,T||0,q,R),S.emplaceBack(s?1:0,d?1:0,x||0,T||0,q,B),S.emplaceBack(s?1:0,d?1:0,x||0,T||0,C,B)}let Us=Math.pow(2,25),Kc=Math.pow(2,24),Eo=Math.pow(2,17),Kn=Math.pow(2,16),ri=Math.pow(2,9),fo=Math.pow(2,8),Zr=Math.pow(2,1);function mn(S){if(S.opacity===0&&!S.placed)return 0;if(S.opacity===1&&S.placed)return 4294967295;let s=S.placed?1:0,d=Math.floor(127*S.opacity);return d*Us+s*Kc+d*Eo+s*Kn+d*ri+s*fo+d*Zr+s}let nn=0;class xn{constructor(s){this._sortAcrossTiles=s.layout.get("symbol-z-order")!=="viewport-y"&&!s.layout.get("symbol-sort-key").isConstant(),this._currentTileIndex=0,this._currentPartIndex=0,this._seenCrossTileIDs={},this._bucketParts=[]}continuePlacement(s,d,v,x,T){let C=this._bucketParts;for(;this._currentTileIndex<s.length;)if(d.getBucketParts(C,x,s[this._currentTileIndex],this._sortAcrossTiles),this._currentTileIndex++,T())return!0;for(this._sortAcrossTiles&&(this._sortAcrossTiles=!1,C.sort((R,q)=>R.sortKey-q.sortKey));this._currentPartIndex<C.length;)if(d.placeLayerBucketPart(C[this._currentPartIndex],this._seenCrossTileIDs,v),this._currentPartIndex++,T())return!0;return!1}}class Bn{constructor(s,d,v,x,T,C,R,q){this.placement=new so(s,d,C,R,q),this._currentPlacementIndex=v.length-1,this._forceFullPlacement=x,this._showCollisionBoxes=T,this._done=!1}isDone(){return this._done}continuePlacement(s,d,v){let x=y.now(),T=()=>!this._forceFullPlacement&&y.now()-x>2;for(;this._currentPlacementIndex>=0;){let C=d[s[this._currentPlacementIndex]],R=this.placement.collisionIndex.transform.zoom;if(C.type==="symbol"&&(!C.minzoom||C.minzoom<=R)&&(!C.maxzoom||C.maxzoom>R)){if(this._inProgressLayer||(this._inProgressLayer=new xn(C)),this._inProgressLayer.continuePlacement(v[C.source],this.placement,this._showCollisionBoxes,C,T))return;delete this._inProgressLayer}this._currentPlacementIndex--}this._done=!0}commit(s){return this.placement.commit(s),this.placement}}let Br=512/i.$/2;class lo{constructor(s,d,v){this.tileID=s,this.bucketInstanceId=v,this._symbolsByKey={};let x=new Map;for(let T=0;T<d.length;T++){let C=d.get(T),R=C.key,q=x.get(R);q?q.push(C):x.set(R,[C])}for(let[T,C]of x){let R={positions:C.map(q=>({x:Math.floor(q.anchorX*Br),y:Math.floor(q.anchorY*Br)})),crossTileIDs:C.map(q=>q.crossTileID)};if(R.positions.length>128){let q=new i.aI(R.positions.length,16,Uint16Array);for(let{x:B,y:H}of R.positions)q.add(B,H);q.finish(),delete R.positions,R.index=q}this._symbolsByKey[T]=R}}getScaledCoordinates(s,d){let{x:v,y:x,z:T}=this.tileID.canonical,{x:C,y:R,z:q}=d.canonical,B=Br/Math.pow(2,q-T),H=(R*i.$+s.anchorY)*B,Y=x*i.$*Br;return{x:Math.floor((C*i.$+s.anchorX)*B-v*i.$*Br),y:Math.floor(H-Y)}}findMatches(s,d,v){let x=this.tileID.canonical.z<d.canonical.z?1:Math.pow(2,this.tileID.canonical.z-d.canonical.z);for(let T=0;T<s.length;T++){let C=s.get(T);if(C.crossTileID)continue;let R=this._symbolsByKey[C.key];if(!R)continue;let q=this.getScaledCoordinates(C,d);if(R.index){let B=R.index.range(q.x-x,q.y-x,q.x+x,q.y+x).sort();for(let H of B){let Y=R.crossTileIDs[H];if(!v[Y]){v[Y]=!0,C.crossTileID=Y;break}}}else if(R.positions)for(let B=0;B<R.positions.length;B++){let H=R.positions[B],Y=R.crossTileIDs[B];if(Math.abs(H.x-q.x)<=x&&Math.abs(H.y-q.y)<=x&&!v[Y]){v[Y]=!0,C.crossTileID=Y;break}}}}getCrossTileIDsLists(){return Object.values(this._symbolsByKey).map(({crossTileIDs:s})=>s)}}class Hn{constructor(){this.maxCrossTileID=0}generate(){return++this.maxCrossTileID}}class qo{constructor(){this.indexes={},this.usedCrossTileIDs={},this.lng=0}handleWrapJump(s){let d=Math.round((s-this.lng)/360);if(d!==0)for(let v in this.indexes){let x=this.indexes[v],T={};for(let C in x){let R=x[C];R.tileID=R.tileID.unwrapTo(R.tileID.wrap+d),T[R.tileID.key]=R}this.indexes[v]=T}this.lng=s}addBucket(s,d,v){if(this.indexes[s.overscaledZ]&&this.indexes[s.overscaledZ][s.key]){if(this.indexes[s.overscaledZ][s.key].bucketInstanceId===d.bucketInstanceId)return!1;this.removeBucketCrossTileIDs(s.overscaledZ,this.indexes[s.overscaledZ][s.key])}for(let T=0;T<d.symbolInstances.length;T++)d.symbolInstances.get(T).crossTileID=0;this.usedCrossTileIDs[s.overscaledZ]||(this.usedCrossTileIDs[s.overscaledZ]={});let x=this.usedCrossTileIDs[s.overscaledZ];for(let T in this.indexes){let C=this.indexes[T];if(Number(T)>s.overscaledZ)for(let R in C){let q=C[R];q.tileID.isChildOf(s)&&q.findMatches(d.symbolInstances,s,x)}else{let R=C[s.scaledTo(Number(T)).key];R&&R.findMatches(d.symbolInstances,s,x)}}for(let T=0;T<d.symbolInstances.length;T++){let C=d.symbolInstances.get(T);C.crossTileID||(C.crossTileID=v.generate(),x[C.crossTileID]=!0)}return this.indexes[s.overscaledZ]===void 0&&(this.indexes[s.overscaledZ]={}),this.indexes[s.overscaledZ][s.key]=new lo(s,d.symbolInstances,d.bucketInstanceId),!0}removeBucketCrossTileIDs(s,d){for(let v of d.getCrossTileIDsLists())for(let x of v)delete this.usedCrossTileIDs[s][x]}removeStaleBuckets(s){let d=!1;for(let v in this.indexes){let x=this.indexes[v];for(let T in x)s[x[T].bucketInstanceId]||(this.removeBucketCrossTileIDs(v,x[T]),delete x[T],d=!0)}return d}}class Wn{constructor(){this.layerIndexes={},this.crossTileIDs=new Hn,this.maxBucketInstanceId=0,this.bucketsInCurrentPlacement={}}addLayer(s,d,v){let x=this.layerIndexes[s.id];x===void 0&&(x=this.layerIndexes[s.id]=new qo);let T=!1,C={};x.handleWrapJump(v);for(let R of d){let q=R.getBucket(s);q&&s.id===q.layerIds[0]&&(q.bucketInstanceId||(q.bucketInstanceId=++this.maxBucketInstanceId),x.addBucket(R.tileID,q,this.crossTileIDs)&&(T=!0),C[q.bucketInstanceId]=!0)}return x.removeStaleBuckets(C)&&(T=!0),T}pruneUnusedLayers(s){let d={};s.forEach(v=>{d[v]=!0});for(let v in this.layerIndexes)d[v]||delete this.layerIndexes[v]}}var Yi="void main() {fragColor=vec4(1.0);}";let Vo={prelude:Wr(`#ifdef GL_ES
precision mediump float;
#else
#if !defined(lowp)
#define lowp
#endif
#if !defined(mediump)
#define mediump
#endif
#if !defined(highp)
#define highp
#endif
#endif
out highp vec4 fragColor;`,`#ifdef GL_ES
precision highp float;
#else
#if !defined(lowp)
#define lowp
#endif
#if !defined(mediump)
#define mediump
#endif
#if !defined(highp)
#define highp
#endif
#endif
vec2 unpack_float(const float packedValue) {int packedIntValue=int(packedValue);int v0=packedIntValue/256;return vec2(v0,packedIntValue-v0*256);}vec2 unpack_opacity(const float packedOpacity) {int intOpacity=int(packedOpacity)/2;return vec2(float(intOpacity)/127.0,mod(packedOpacity,2.0));}vec4 decode_color(const vec2 encodedColor) {return vec4(unpack_float(encodedColor[0])/255.0,unpack_float(encodedColor[1])/255.0
);}float unpack_mix_vec2(const vec2 packedValue,const float t) {return mix(packedValue[0],packedValue[1],t);}vec4 unpack_mix_color(const vec4 packedColors,const float t) {vec4 minColor=decode_color(vec2(packedColors[0],packedColors[1]));vec4 maxColor=decode_color(vec2(packedColors[2],packedColors[3]));return mix(minColor,maxColor,t);}vec2 get_pattern_pos(const vec2 pixel_coord_upper,const vec2 pixel_coord_lower,const vec2 pattern_size,const float tile_units_to_pixels,const vec2 pos) {vec2 offset=mod(mod(mod(pixel_coord_upper,pattern_size)*256.0,pattern_size)*256.0+pixel_coord_lower,pattern_size);return (tile_units_to_pixels*pos+offset)/pattern_size;}mat3 rotationMatrixFromAxisAngle(vec3 u,float angle) {float c=cos(angle);float s=sin(angle);float c2=1.0-c;return mat3(u.x*u.x*c2+      c,u.x*u.y*c2-u.z*s,u.x*u.z*c2+u.y*s,u.y*u.x*c2+u.z*s,u.y*u.y*c2+    c,u.y*u.z*c2-u.x*s,u.z*u.x*c2-u.y*s,u.z*u.y*c2+u.x*s,u.z*u.z*c2+    c
);}
#ifdef TERRAIN3D
uniform sampler2D u_terrain;uniform float u_terrain_dim;uniform mat4 u_terrain_matrix;uniform vec4 u_terrain_unpack;uniform float u_terrain_exaggeration;uniform highp sampler2D u_depth;
#endif
const highp vec4 bitSh=vec4(256.*256.*256.,256.*256.,256.,1.);const highp vec4 bitShifts=vec4(1.)/bitSh;highp float unpack(highp vec4 color) {return dot(color,bitShifts);}highp float depthOpacity(vec3 frag) {
#ifdef TERRAIN3D
highp float d=unpack(texture(u_depth,frag.xy*0.5+0.5))+0.0001-frag.z;return 1.0-max(0.0,min(1.0,-d*500.0));
#else
return 1.0;
#endif
}float calculate_visibility(vec4 pos) {
#ifdef TERRAIN3D
vec3 frag=pos.xyz/pos.w;highp float d=depthOpacity(frag);if (d > 0.95) return 1.0;return (d+depthOpacity(frag+vec3(0.0,0.01,0.0)))/2.0;
#else
return 1.0;
#endif
}float ele(vec2 pos) {
#ifdef TERRAIN3D
vec4 rgb=(texture(u_terrain,pos)*255.0)*u_terrain_unpack;return rgb.r+rgb.g+rgb.b-u_terrain_unpack.a;
#else
return 0.0;
#endif
}float get_elevation(vec2 pos) {
#ifdef TERRAIN3D
#ifdef GLOBE
if ((pos.y <-32767.5) || (pos.y > 32766.5)) {return 0.0;}
#endif
vec2 coord=(u_terrain_matrix*vec4(pos,0.0,1.0)).xy*u_terrain_dim+1.0;vec2 f=fract(coord);vec2 c=(floor(coord)+0.5)/(u_terrain_dim+2.0);float d=1.0/(u_terrain_dim+2.0);float tl=ele(c);float tr=ele(c+vec2(d,0.0));float bl=ele(c+vec2(0.0,d));float br=ele(c+vec2(d,d));float elevation=mix(mix(tl,tr,f.x),mix(bl,br,f.x),f.y);return elevation*u_terrain_exaggeration;
#else
return 0.0;
#endif
}const float PI=3.141592653589793;uniform mat4 u_projection_matrix;`),projectionMercator:Wr("","float projectLineThickness(float tileY) {return 1.0;}float projectCircleRadius(float tileY) {return 1.0;}vec4 projectTile(vec2 p) {vec4 result=u_projection_matrix*vec4(p,0.0,1.0);return result;}vec4 projectTile(vec2 p,vec2 rawPos) {vec4 result=u_projection_matrix*vec4(p,0.0,1.0);if (rawPos.y <-32767.5 || rawPos.y > 32766.5) {result.z=-10000000.0;}return result;}vec4 projectTileWithElevation(vec2 posInTile,float elevation) {return u_projection_matrix*vec4(posInTile,elevation,1.0);}vec4 projectTileFor3D(vec2 posInTile,float elevation) {return projectTileWithElevation(posInTile,elevation);}"),projectionGlobe:Wr("",`#define GLOBE_RADIUS 6371008.8
uniform highp vec4 u_projection_tile_mercator_coords;uniform highp vec4 u_projection_clipping_plane;uniform highp float u_projection_transition;uniform mat4 u_projection_fallback_matrix;vec3 globeRotateVector(vec3 vec,vec2 angles) {vec3 axisRight=vec3(vec.z,0.0,-vec.x);vec3 axisUp=cross(axisRight,vec);axisRight=normalize(axisRight);axisUp=normalize(axisUp);vec2 t=tan(angles);return normalize(vec+axisRight*t.x+axisUp*t.y);}mat3 globeGetRotationMatrix(vec3 spherePos) {vec3 axisRight=vec3(spherePos.z,0.0,-spherePos.x);vec3 axisDown=cross(axisRight,spherePos);axisRight=normalize(axisRight);axisDown=normalize(axisDown);return mat3(axisRight,axisDown,spherePos
);}float circumferenceRatioAtTileY(float tileY) {float mercator_pos_y=u_projection_tile_mercator_coords.y+u_projection_tile_mercator_coords.w*tileY;float spherical_y=2.0*atan(exp(PI-(mercator_pos_y*PI*2.0)))-PI*0.5;return cos(spherical_y);}float projectLineThickness(float tileY) {float thickness=1.0/circumferenceRatioAtTileY(tileY); 
if (u_projection_transition < 0.999) {return mix(1.0,thickness,u_projection_transition);} else {return thickness;}}vec3 projectToSphere(vec2 translatedPos,vec2 rawPos) {vec2 mercator_pos=u_projection_tile_mercator_coords.xy+u_projection_tile_mercator_coords.zw*translatedPos;vec2 spherical;spherical.x=mercator_pos.x*PI*2.0+PI;spherical.y=2.0*atan(exp(PI-(mercator_pos.y*PI*2.0)))-PI*0.5;float len=cos(spherical.y);vec3 pos=vec3(sin(spherical.x)*len,sin(spherical.y),cos(spherical.x)*len
);if (rawPos.y <-32767.5) {pos=vec3(0.0,1.0,0.0);}if (rawPos.y > 32766.5) {pos=vec3(0.0,-1.0,0.0);}return pos;}vec3 projectToSphere(vec2 posInTile) {return projectToSphere(posInTile,vec2(0.0,0.0));}float globeComputeClippingZ(vec3 spherePos) {return (1.0-(dot(spherePos,u_projection_clipping_plane.xyz)+u_projection_clipping_plane.w));}vec4 interpolateProjection(vec2 posInTile,vec3 spherePos,float elevation) {vec3 elevatedPos=spherePos*(1.0+elevation/GLOBE_RADIUS);vec4 globePosition=u_projection_matrix*vec4(elevatedPos,1.0);globePosition.z=globeComputeClippingZ(elevatedPos)*globePosition.w;if (u_projection_transition > 0.999) {return globePosition;}vec4 flatPosition=u_projection_fallback_matrix*vec4(posInTile,elevation,1.0);const float z_globeness_threshold=0.2;vec4 result=globePosition;result.z=mix(0.0,globePosition.z,clamp((u_projection_transition-z_globeness_threshold)/(1.0-z_globeness_threshold),0.0,1.0));result.xyw=mix(flatPosition.xyw,globePosition.xyw,u_projection_transition);if ((posInTile.y <-32767.5) || (posInTile.y > 32766.5)) {result=globePosition;const float poles_hidden_anim_percentage=0.02;result.z=mix(globePosition.z,100.0,pow(max((1.0-u_projection_transition)/poles_hidden_anim_percentage,0.0),8.0));}return result;}vec4 interpolateProjectionFor3D(vec2 posInTile,vec3 spherePos,float elevation) {vec3 elevatedPos=spherePos*(1.0+elevation/GLOBE_RADIUS);vec4 globePosition=u_projection_matrix*vec4(elevatedPos,1.0);if (u_projection_transition > 0.999) {return globePosition;}vec4 fallbackPosition=u_projection_fallback_matrix*vec4(posInTile,elevation,1.0);return mix(fallbackPosition,globePosition,u_projection_transition);}vec4 projectTile(vec2 posInTile) {return interpolateProjection(posInTile,projectToSphere(posInTile),0.0);}vec4 projectTile(vec2 posInTile,vec2 rawPos) {return interpolateProjection(posInTile,projectToSphere(posInTile,rawPos),0.0);}vec4 projectTileWithElevation(vec2 posInTile,float elevation) {return interpolateProjection(posInTile,projectToSphere(posInTile),elevation);}vec4 projectTileFor3D(vec2 posInTile,float elevation) {vec3 spherePos=projectToSphere(posInTile,posInTile);return interpolateProjectionFor3D(posInTile,spherePos,elevation);}`),background:Wr(`uniform vec4 u_color;uniform float u_opacity;void main() {fragColor=u_color*u_opacity;
#ifdef OVERDRAW_INSPECTOR
fragColor=vec4(1.0);
#endif
}`,"in vec2 a_pos;void main() {gl_Position=projectTile(a_pos);}"),backgroundPattern:Wr(`uniform vec2 u_pattern_tl_a;uniform vec2 u_pattern_br_a;uniform vec2 u_pattern_tl_b;uniform vec2 u_pattern_br_b;uniform vec2 u_texsize;uniform float u_mix;uniform float u_opacity;uniform sampler2D u_image;in vec2 v_pos_a;in vec2 v_pos_b;void main() {vec2 imagecoord=mod(v_pos_a,1.0);vec2 pos=mix(u_pattern_tl_a/u_texsize,u_pattern_br_a/u_texsize,imagecoord);vec4 color1=texture(u_image,pos);vec2 imagecoord_b=mod(v_pos_b,1.0);vec2 pos2=mix(u_pattern_tl_b/u_texsize,u_pattern_br_b/u_texsize,imagecoord_b);vec4 color2=texture(u_image,pos2);fragColor=mix(color1,color2,u_mix)*u_opacity;
#ifdef OVERDRAW_INSPECTOR
fragColor=vec4(1.0);
#endif
}`,"uniform vec2 u_pattern_size_a;uniform vec2 u_pattern_size_b;uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform float u_scale_a;uniform float u_scale_b;uniform float u_tile_units_to_pixels;in vec2 a_pos;out vec2 v_pos_a;out vec2 v_pos_b;void main() {gl_Position=projectTile(a_pos);v_pos_a=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,u_scale_a*u_pattern_size_a,u_tile_units_to_pixels,a_pos);v_pos_b=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,u_scale_b*u_pattern_size_b,u_tile_units_to_pixels,a_pos);}"),circle:Wr(`in vec3 v_data;in float v_visibility;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define mediump float radius
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define highp vec4 stroke_color
#pragma mapbox: define mediump float stroke_width
#pragma mapbox: define lowp float stroke_opacity
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize mediump float radius
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize highp vec4 stroke_color
#pragma mapbox: initialize mediump float stroke_width
#pragma mapbox: initialize lowp float stroke_opacity
vec2 extrude=v_data.xy;float extrude_length=length(extrude);float antialiased_blur=v_data.z;float opacity_t=smoothstep(0.0,antialiased_blur,extrude_length-1.0);float color_t=stroke_width < 0.01 ? 0.0 : smoothstep(antialiased_blur,0.0,extrude_length-radius/(radius+stroke_width));fragColor=v_visibility*opacity_t*mix(color*opacity,stroke_color*stroke_opacity,color_t);const float epsilon=0.5/255.0;if (fragColor.r < epsilon && fragColor.g < epsilon && fragColor.b < epsilon && fragColor.a < epsilon) {discard;}
#ifdef OVERDRAW_INSPECTOR
fragColor=vec4(1.0);
#endif
}`,`uniform bool u_scale_with_map;uniform bool u_pitch_with_map;uniform vec2 u_extrude_scale;uniform highp float u_globe_extrude_scale;uniform lowp float u_device_pixel_ratio;uniform highp float u_camera_to_center_distance;uniform vec2 u_translate;in vec2 a_pos;out vec3 v_data;out float v_visibility;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define mediump float radius
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define highp vec4 stroke_color
#pragma mapbox: define mediump float stroke_width
#pragma mapbox: define lowp float stroke_opacity
void main(void) {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize mediump float radius
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize highp vec4 stroke_color
#pragma mapbox: initialize mediump float stroke_width
#pragma mapbox: initialize lowp float stroke_opacity
vec2 pos_raw=a_pos+32768.0;vec2 extrude=vec2(mod(pos_raw,8.0)/7.0*2.0-1.0);vec2 circle_center=floor(pos_raw/8.0)+u_translate;float ele=get_elevation(circle_center);v_visibility=calculate_visibility(projectTileWithElevation(circle_center,ele));if (u_pitch_with_map) {
#ifdef GLOBE
vec3 center_vector=projectToSphere(circle_center);
#endif
float angle_scale=u_globe_extrude_scale;vec2 corner_position=circle_center;if (u_scale_with_map) {angle_scale*=(radius+stroke_width);corner_position+=extrude*u_extrude_scale*(radius+stroke_width);} else {
#ifdef GLOBE
vec4 projected_center=interpolateProjection(circle_center,center_vector,ele);
#else
vec4 projected_center=projectTileWithElevation(circle_center,ele);
#endif
corner_position+=extrude*u_extrude_scale*(radius+stroke_width)*(projected_center.w/u_camera_to_center_distance);angle_scale*=(radius+stroke_width)*(projected_center.w/u_camera_to_center_distance);}
#ifdef GLOBE
vec2 angles=extrude*angle_scale;vec3 corner_vector=globeRotateVector(center_vector,angles);gl_Position=interpolateProjection(corner_position,corner_vector,ele);
#else
gl_Position=projectTileWithElevation(corner_position,ele);
#endif
} else {gl_Position=projectTileWithElevation(circle_center,ele);if (gl_Position.z/gl_Position.w > 1.0) {gl_Position.xy=vec2(10000.0);}if (u_scale_with_map) {gl_Position.xy+=extrude*(radius+stroke_width)*u_extrude_scale*u_camera_to_center_distance;} else {gl_Position.xy+=extrude*(radius+stroke_width)*u_extrude_scale*gl_Position.w;}}float antialiasblur=-max(1.0/u_device_pixel_ratio/(radius+stroke_width),blur);v_data=vec3(extrude.x,extrude.y,antialiasblur);}`),clippingMask:Wr(Yi,"in vec2 a_pos;void main() {gl_Position=projectTile(a_pos);}"),heatmap:Wr(`uniform highp float u_intensity;in vec2 v_extrude;
#pragma mapbox: define highp float weight
#define GAUSS_COEF 0.3989422804014327
void main() {
#pragma mapbox: initialize highp float weight
float d=-0.5*3.0*3.0*dot(v_extrude,v_extrude);float val=weight*u_intensity*GAUSS_COEF*exp(d);fragColor=vec4(val,1.0,1.0,1.0);
#ifdef OVERDRAW_INSPECTOR
fragColor=vec4(1.0);
#endif
}`,`uniform float u_extrude_scale;uniform float u_opacity;uniform float u_intensity;uniform highp float u_globe_extrude_scale;in vec2 a_pos;out vec2 v_extrude;
#pragma mapbox: define highp float weight
#pragma mapbox: define mediump float radius
const highp float ZERO=1.0/255.0/16.0;
#define GAUSS_COEF 0.3989422804014327
void main(void) {
#pragma mapbox: initialize highp float weight
#pragma mapbox: initialize mediump float radius
vec2 pos_raw=a_pos+32768.0;vec2 unscaled_extrude=vec2(mod(pos_raw,8.0)/7.0*2.0-1.0);float S=sqrt(-2.0*log(ZERO/weight/u_intensity/GAUSS_COEF))/3.0;v_extrude=S*unscaled_extrude;vec2 extrude=v_extrude*radius*u_extrude_scale;vec2 circle_center=floor(pos_raw/8.0);
#ifdef GLOBE
vec2 angles=v_extrude*radius*u_globe_extrude_scale;vec3 center_vector=projectToSphere(circle_center);vec3 corner_vector=globeRotateVector(center_vector,angles);gl_Position=interpolateProjection(circle_center+extrude,corner_vector,0.0);
#else
gl_Position=projectTileFor3D(circle_center+extrude,get_elevation(circle_center));
#endif
}`),heatmapTexture:Wr(`uniform sampler2D u_image;uniform sampler2D u_color_ramp;uniform float u_opacity;in vec2 v_pos;void main() {float t=texture(u_image,v_pos).r;vec4 color=texture(u_color_ramp,vec2(t,0.5));fragColor=color*u_opacity;
#ifdef OVERDRAW_INSPECTOR
fragColor=vec4(0.0);
#endif
}`,"uniform mat4 u_matrix;uniform vec2 u_world;in vec2 a_pos;out vec2 v_pos;void main() {gl_Position=u_matrix*vec4(a_pos*u_world,0,1);v_pos.x=a_pos.x;v_pos.y=1.0-a_pos.y;}"),collisionBox:Wr("in float v_placed;in float v_notUsed;void main() {float alpha=0.5;fragColor=vec4(1.0,0.0,0.0,1.0)*alpha;if (v_placed > 0.5) {fragColor=vec4(0.0,0.0,1.0,0.5)*alpha;}if (v_notUsed > 0.5) {fragColor*=.1;}}","in vec2 a_anchor_pos;in vec2 a_placed;in vec2 a_box_real;uniform vec2 u_pixel_extrude_scale;out float v_placed;out float v_notUsed;void main() {gl_Position=projectTileWithElevation(a_anchor_pos,get_elevation(a_anchor_pos));gl_Position.xy=((a_box_real+0.5)*u_pixel_extrude_scale*2.0-1.0)*vec2(1.0,-1.0)*gl_Position.w;if (gl_Position.z/gl_Position.w < 1.1) {gl_Position.z=0.5;}v_placed=a_placed.x;v_notUsed=a_placed.y;}"),collisionCircle:Wr("in float v_radius;in vec2 v_extrude;in float v_collision;void main() {float alpha=0.5;float stroke_radius=0.9;float distance_to_center=length(v_extrude);float distance_to_edge=abs(distance_to_center-v_radius);float opacity_t=smoothstep(-stroke_radius,0.0,-distance_to_edge);vec4 color=mix(vec4(0.0,0.0,1.0,0.5),vec4(1.0,0.0,0.0,1.0),v_collision);fragColor=color*alpha*opacity_t;}","in vec2 a_pos;in float a_radius;in vec2 a_flags;uniform vec2 u_viewport_size;out float v_radius;out vec2 v_extrude;out float v_collision;void main() {float radius=a_radius;float collision=a_flags.x;float vertexIdx=a_flags.y;vec2 quadVertexOffset=vec2(mix(-1.0,1.0,float(vertexIdx >=2.0)),mix(-1.0,1.0,float(vertexIdx >=1.0 && vertexIdx <=2.0)));vec2 quadVertexExtent=quadVertexOffset*radius;float padding_factor=1.2;v_radius=radius;v_extrude=quadVertexExtent*padding_factor;v_collision=collision;gl_Position=vec4((a_pos/u_viewport_size*2.0-1.0)*vec2(1.0,-1.0),0.0,1.0)+vec4(quadVertexExtent*padding_factor/u_viewport_size*2.0,0.0,0.0);}"),colorRelief:Wr(`#ifdef GL_ES
precision highp float;
#endif
uniform sampler2D u_image;uniform vec4 u_unpack;uniform sampler2D u_elevation_stops;uniform sampler2D u_color_stops;uniform int u_color_ramp_size;uniform float u_opacity;in vec2 v_pos;float getElevation(vec2 coord) {vec4 data=texture(u_image,coord)*255.0;data.a=-1.0;return dot(data,u_unpack);}float getElevationStop(int stop) {float x=(float(stop)+0.5)/float(u_color_ramp_size);vec4 data=texture(u_elevation_stops,vec2(x,0))*255.0;data.a=-1.0;return dot(data,u_unpack);}void main() {float el=getElevation(v_pos);int r=(u_color_ramp_size-1);int l=0;float el_l=getElevationStop(l);float el_r=getElevationStop(r);while(r-l > 1){int m=(r+l)/2;float el_m=getElevationStop(m);if(el < el_m){r=m;el_r=el_m;}else
{l=m;el_l=el_m;}}float x=(float(l)+(el-el_l)/(el_r-el_l)+0.5)/float(u_color_ramp_size);fragColor=u_opacity*texture(u_color_stops,vec2(x,0));
#ifdef OVERDRAW_INSPECTOR
fragColor=vec4(1.0);
#endif
}`,"uniform vec2 u_dimension;in vec2 a_pos;out vec2 v_pos;void main() {gl_Position=projectTile(a_pos,a_pos);highp vec2 epsilon=1.0/u_dimension;float scale=(u_dimension.x-2.0)/u_dimension.x;v_pos=(a_pos/8192.0)*scale+epsilon;if (a_pos.y <-32767.5) {v_pos.y=0.0;}if (a_pos.y > 32766.5) {v_pos.y=1.0;}}"),debug:Wr("uniform highp vec4 u_color;uniform sampler2D u_overlay;in vec2 v_uv;void main() {vec4 overlay_color=texture(u_overlay,v_uv);fragColor=mix(u_color,overlay_color,overlay_color.a);}","in vec2 a_pos;out vec2 v_uv;uniform float u_overlay_scale;void main() {v_uv=a_pos/8192.0;gl_Position=projectTileWithElevation(a_pos*u_overlay_scale,get_elevation(a_pos));}"),depth:Wr(Yi,`in vec2 a_pos;void main() {
#ifdef GLOBE
gl_Position=projectTileFor3D(a_pos,0.0);
#else
gl_Position=u_projection_matrix*vec4(a_pos,0.0,1.0);
#endif
}`),fill:Wr(`#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float opacity
fragColor=color*opacity;
#ifdef OVERDRAW_INSPECTOR
fragColor=vec4(1.0);
#endif
}`,`uniform vec2 u_fill_translate;in vec2 a_pos;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float opacity
gl_Position=projectTile(a_pos+u_fill_translate,a_pos);}`),fillOutline:Wr(`in vec2 v_pos;
#ifdef GLOBE
in float v_depth;
#endif
#pragma mapbox: define highp vec4 outline_color
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize highp vec4 outline_color
#pragma mapbox: initialize lowp float opacity
float dist=length(v_pos-gl_FragCoord.xy);float alpha=1.0-smoothstep(0.0,1.0,dist);fragColor=outline_color*(alpha*opacity);
#ifdef GLOBE
if (v_depth > 1.0) {discard;}
#endif
#ifdef OVERDRAW_INSPECTOR
fragColor=vec4(1.0);
#endif
}`,`uniform vec2 u_world;uniform vec2 u_fill_translate;in vec2 a_pos;out vec2 v_pos;
#ifdef GLOBE
out float v_depth;
#endif
#pragma mapbox: define highp vec4 outline_color
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize highp vec4 outline_color
#pragma mapbox: initialize lowp float opacity
gl_Position=projectTile(a_pos+u_fill_translate,a_pos);v_pos=(gl_Position.xy/gl_Position.w+1.0)/2.0*u_world;
#ifdef GLOBE
v_depth=gl_Position.z/gl_Position.w;
#endif
}`),fillOutlinePattern:Wr(`uniform vec2 u_texsize;uniform sampler2D u_image;uniform float u_fade;in vec2 v_pos_a;in vec2 v_pos_b;in vec2 v_pos;
#ifdef GLOBE
in float v_depth;
#endif
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
void main() {
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;vec2 imagecoord=mod(v_pos_a,1.0);vec2 pos=mix(pattern_tl_a/u_texsize,pattern_br_a/u_texsize,imagecoord);vec4 color1=texture(u_image,pos);vec2 imagecoord_b=mod(v_pos_b,1.0);vec2 pos2=mix(pattern_tl_b/u_texsize,pattern_br_b/u_texsize,imagecoord_b);vec4 color2=texture(u_image,pos2);float dist=length(v_pos-gl_FragCoord.xy);float alpha=1.0-smoothstep(0.0,1.0,dist);fragColor=mix(color1,color2,u_fade)*alpha*opacity;
#ifdef GLOBE
if (v_depth > 1.0) {discard;}
#endif
#ifdef OVERDRAW_INSPECTOR
fragColor=vec4(1.0);
#endif
}`,`uniform vec2 u_world;uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform vec3 u_scale;uniform vec2 u_fill_translate;in vec2 a_pos;out vec2 v_pos_a;out vec2 v_pos_b;out vec2 v_pos;
#ifdef GLOBE
out float v_depth;
#endif
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
#pragma mapbox: define lowp float pixel_ratio_from
#pragma mapbox: define lowp float pixel_ratio_to
void main() {
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
#pragma mapbox: initialize lowp float pixel_ratio_from
#pragma mapbox: initialize lowp float pixel_ratio_to
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;float tileRatio=u_scale.x;float fromScale=u_scale.y;float toScale=u_scale.z;gl_Position=projectTile(a_pos+u_fill_translate,a_pos);vec2 display_size_a=(pattern_br_a-pattern_tl_a)/pixel_ratio_from;vec2 display_size_b=(pattern_br_b-pattern_tl_b)/pixel_ratio_to;v_pos_a=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,fromScale*display_size_a,tileRatio,a_pos);v_pos_b=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,toScale*display_size_b,tileRatio,a_pos);v_pos=(gl_Position.xy/gl_Position.w+1.0)/2.0*u_world;
#ifdef GLOBE
v_depth=gl_Position.z/gl_Position.w;
#endif
}`),fillPattern:Wr(`#ifdef GL_ES
precision highp float;
#endif
uniform vec2 u_texsize;uniform float u_fade;uniform sampler2D u_image;in vec2 v_pos_a;in vec2 v_pos_b;
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
void main() {
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;vec2 imagecoord=mod(v_pos_a,1.0);vec2 pos=mix(pattern_tl_a/u_texsize,pattern_br_a/u_texsize,imagecoord);vec4 color1=texture(u_image,pos);vec2 imagecoord_b=mod(v_pos_b,1.0);vec2 pos2=mix(pattern_tl_b/u_texsize,pattern_br_b/u_texsize,imagecoord_b);vec4 color2=texture(u_image,pos2);fragColor=mix(color1,color2,u_fade)*opacity;
#ifdef OVERDRAW_INSPECTOR
fragColor=vec4(1.0);
#endif
}`,`uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform vec3 u_scale;uniform vec2 u_fill_translate;in vec2 a_pos;out vec2 v_pos_a;out vec2 v_pos_b;
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
#pragma mapbox: define lowp float pixel_ratio_from
#pragma mapbox: define lowp float pixel_ratio_to
void main() {
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
#pragma mapbox: initialize lowp float pixel_ratio_from
#pragma mapbox: initialize lowp float pixel_ratio_to
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;float tileZoomRatio=u_scale.x;float fromScale=u_scale.y;float toScale=u_scale.z;vec2 display_size_a=(pattern_br_a-pattern_tl_a)/pixel_ratio_from;vec2 display_size_b=(pattern_br_b-pattern_tl_b)/pixel_ratio_to;gl_Position=projectTile(a_pos+u_fill_translate,a_pos);v_pos_a=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,fromScale*display_size_a,tileZoomRatio,a_pos);v_pos_b=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,toScale*display_size_b,tileZoomRatio,a_pos);}`),fillExtrusion:Wr(`in vec4 v_color;void main() {fragColor=v_color;
#ifdef OVERDRAW_INSPECTOR
fragColor=vec4(1.0);
#endif
}`,`uniform vec3 u_lightcolor;uniform lowp vec3 u_lightpos;uniform lowp vec3 u_lightpos_globe;uniform lowp float u_lightintensity;uniform float u_vertical_gradient;uniform lowp float u_opacity;uniform vec2 u_fill_translate;in vec2 a_pos;in vec4 a_normal_ed;
#ifdef TERRAIN3D
in vec2 a_centroid;
#endif
out vec4 v_color;
#pragma mapbox: define highp float base
#pragma mapbox: define highp float height
#pragma mapbox: define highp vec4 color
void main() {
#pragma mapbox: initialize highp float base
#pragma mapbox: initialize highp float height
#pragma mapbox: initialize highp vec4 color
vec3 normal=a_normal_ed.xyz;
#ifdef TERRAIN3D
float height_terrain3d_offset=get_elevation(a_centroid);float base_terrain3d_offset=height_terrain3d_offset-(base > 0.0 ? 0.0 : 10.0);
#else
float height_terrain3d_offset=0.0;float base_terrain3d_offset=0.0;
#endif
base=max(0.0,base)+base_terrain3d_offset;height=max(0.0,height)+height_terrain3d_offset;float t=mod(normal.x,2.0);float elevation=t > 0.0 ? height : base;vec2 posInTile=a_pos+u_fill_translate;
#ifdef GLOBE
vec3 spherePos=projectToSphere(posInTile,a_pos);gl_Position=interpolateProjectionFor3D(posInTile,spherePos,elevation);
#else
gl_Position=u_projection_matrix*vec4(posInTile,elevation,1.0);
#endif
float colorvalue=color.r*0.2126+color.g*0.7152+color.b*0.0722;v_color=vec4(0.0,0.0,0.0,1.0);vec4 ambientlight=vec4(0.03,0.03,0.03,1.0);color+=ambientlight;vec3 normalForLighting=normal/16384.0;float directional=clamp(dot(normalForLighting,u_lightpos),0.0,1.0);
#ifdef GLOBE
mat3 rotMatrix=globeGetRotationMatrix(spherePos);normalForLighting=rotMatrix*normalForLighting;directional=mix(directional,clamp(dot(normalForLighting,u_lightpos_globe),0.0,1.0),u_projection_transition);
#endif
directional=mix((1.0-u_lightintensity),max((1.0-colorvalue+u_lightintensity),1.0),directional);if (normal.y !=0.0) {directional*=((1.0-u_vertical_gradient)+(u_vertical_gradient*clamp((t+base)*pow(height/150.0,0.5),mix(0.7,0.98,1.0-u_lightintensity),1.0)));}v_color.r+=clamp(color.r*directional*u_lightcolor.r,mix(0.0,0.3,1.0-u_lightcolor.r),1.0);v_color.g+=clamp(color.g*directional*u_lightcolor.g,mix(0.0,0.3,1.0-u_lightcolor.g),1.0);v_color.b+=clamp(color.b*directional*u_lightcolor.b,mix(0.0,0.3,1.0-u_lightcolor.b),1.0);v_color*=u_opacity;}`),fillExtrusionPattern:Wr(`uniform vec2 u_texsize;uniform float u_fade;uniform sampler2D u_image;in vec2 v_pos_a;in vec2 v_pos_b;in vec4 v_lighting;
#pragma mapbox: define lowp float base
#pragma mapbox: define lowp float height
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
#pragma mapbox: define lowp float pixel_ratio_from
#pragma mapbox: define lowp float pixel_ratio_to
void main() {
#pragma mapbox: initialize lowp float base
#pragma mapbox: initialize lowp float height
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
#pragma mapbox: initialize lowp float pixel_ratio_from
#pragma mapbox: initialize lowp float pixel_ratio_to
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;vec2 imagecoord=mod(v_pos_a,1.0);vec2 pos=mix(pattern_tl_a/u_texsize,pattern_br_a/u_texsize,imagecoord);vec4 color1=texture(u_image,pos);vec2 imagecoord_b=mod(v_pos_b,1.0);vec2 pos2=mix(pattern_tl_b/u_texsize,pattern_br_b/u_texsize,imagecoord_b);vec4 color2=texture(u_image,pos2);vec4 mixedColor=mix(color1,color2,u_fade);fragColor=mixedColor*v_lighting;
#ifdef OVERDRAW_INSPECTOR
fragColor=vec4(1.0);
#endif
}`,`uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform float u_height_factor;uniform vec3 u_scale;uniform float u_vertical_gradient;uniform lowp float u_opacity;uniform vec2 u_fill_translate;uniform vec3 u_lightcolor;uniform lowp vec3 u_lightpos;uniform lowp vec3 u_lightpos_globe;uniform lowp float u_lightintensity;in vec2 a_pos;in vec4 a_normal_ed;
#ifdef TERRAIN3D
in vec2 a_centroid;
#endif
#ifdef GLOBE
out vec3 v_sphere_pos;
#endif
out vec2 v_pos_a;out vec2 v_pos_b;out vec4 v_lighting;
#pragma mapbox: define lowp float base
#pragma mapbox: define lowp float height
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
#pragma mapbox: define lowp float pixel_ratio_from
#pragma mapbox: define lowp float pixel_ratio_to
void main() {
#pragma mapbox: initialize lowp float base
#pragma mapbox: initialize lowp float height
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
#pragma mapbox: initialize lowp float pixel_ratio_from
#pragma mapbox: initialize lowp float pixel_ratio_to
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;float tileRatio=u_scale.x;float fromScale=u_scale.y;float toScale=u_scale.z;vec3 normal=a_normal_ed.xyz;float edgedistance=a_normal_ed.w;vec2 display_size_a=(pattern_br_a-pattern_tl_a)/pixel_ratio_from;vec2 display_size_b=(pattern_br_b-pattern_tl_b)/pixel_ratio_to;
#ifdef TERRAIN3D
float height_terrain3d_offset=get_elevation(a_centroid);float base_terrain3d_offset=height_terrain3d_offset-(base > 0.0 ? 0.0 : 10.0);
#else
float height_terrain3d_offset=0.0;float base_terrain3d_offset=0.0;
#endif
base=max(0.0,base)+base_terrain3d_offset;height=max(0.0,height)+height_terrain3d_offset;float t=mod(normal.x,2.0);float elevation=t > 0.0 ? height : base;vec2 posInTile=a_pos+u_fill_translate;
#ifdef GLOBE
vec3 spherePos=projectToSphere(posInTile,a_pos);vec3 elevatedPos=spherePos*(1.0+elevation/GLOBE_RADIUS);v_sphere_pos=elevatedPos;gl_Position=interpolateProjectionFor3D(posInTile,spherePos,elevation);
#else
gl_Position=u_projection_matrix*vec4(posInTile,elevation,1.0);
#endif
vec2 pos=normal.x==1.0 && normal.y==0.0 && normal.z==16384.0
? a_pos
: vec2(edgedistance,elevation*u_height_factor);v_pos_a=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,fromScale*display_size_a,tileRatio,pos);v_pos_b=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,toScale*display_size_b,tileRatio,pos);v_lighting=vec4(0.0,0.0,0.0,1.0);float directional=clamp(dot(normal/16383.0,u_lightpos),0.0,1.0);directional=mix((1.0-u_lightintensity),max((0.5+u_lightintensity),1.0),directional);if (normal.y !=0.0) {directional*=((1.0-u_vertical_gradient)+(u_vertical_gradient*clamp((t+base)*pow(height/150.0,0.5),mix(0.7,0.98,1.0-u_lightintensity),1.0)));}v_lighting.rgb+=clamp(directional*u_lightcolor,mix(vec3(0.0),vec3(0.3),1.0-u_lightcolor),vec3(1.0));v_lighting*=u_opacity;}`),hillshadePrepare:Wr(`#ifdef GL_ES
precision highp float;
#endif
uniform sampler2D u_image;in vec2 v_pos;uniform vec2 u_dimension;uniform float u_zoom;uniform vec4 u_unpack;float getElevation(vec2 coord,float bias) {vec4 data=texture(u_image,coord)*255.0;data.a=-1.0;return dot(data,u_unpack);}void main() {vec2 epsilon=1.0/u_dimension;float tileSize=u_dimension.x-2.0;float a=getElevation(v_pos+vec2(-epsilon.x,-epsilon.y),0.0);float b=getElevation(v_pos+vec2(0,-epsilon.y),0.0);float c=getElevation(v_pos+vec2(epsilon.x,-epsilon.y),0.0);float d=getElevation(v_pos+vec2(-epsilon.x,0),0.0);float e=getElevation(v_pos,0.0);float f=getElevation(v_pos+vec2(epsilon.x,0),0.0);float g=getElevation(v_pos+vec2(-epsilon.x,epsilon.y),0.0);float h=getElevation(v_pos+vec2(0,epsilon.y),0.0);float i=getElevation(v_pos+vec2(epsilon.x,epsilon.y),0.0);float exaggerationFactor=u_zoom < 2.0 ? 0.4 : u_zoom < 4.5 ? 0.35 : 0.3;float exaggeration=u_zoom < 15.0 ? (u_zoom-15.0)*exaggerationFactor : 0.0;vec2 deriv=vec2((c+f+f+i)-(a+d+d+g),(g+h+h+i)-(a+b+b+c))*tileSize/pow(2.0,exaggeration+(28.2562-u_zoom));fragColor=clamp(vec4(deriv.x/8.0+0.5,deriv.y/8.0+0.5,1.0,1.0),0.0,1.0);
#ifdef OVERDRAW_INSPECTOR
fragColor=vec4(1.0);
#endif
}`,"uniform mat4 u_matrix;uniform vec2 u_dimension;in vec2 a_pos;in vec2 a_texture_pos;out vec2 v_pos;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);highp vec2 epsilon=1.0/u_dimension;float scale=(u_dimension.x-2.0)/u_dimension.x;v_pos=(a_texture_pos/8192.0)*scale+epsilon;}"),hillshade:Wr(`uniform sampler2D u_image;in vec2 v_pos;uniform vec2 u_latrange;uniform float u_exaggeration;uniform vec4 u_accent;uniform int u_method;uniform float u_altitudes[NUM_ILLUMINATION_SOURCES];uniform float u_azimuths[NUM_ILLUMINATION_SOURCES];uniform vec4 u_shadows[NUM_ILLUMINATION_SOURCES];uniform vec4 u_highlights[NUM_ILLUMINATION_SOURCES];
#define PI 3.141592653589793
#define STANDARD 0
#define COMBINED 1
#define IGOR 2
#define MULTIDIRECTIONAL 3
#define BASIC 4
float get_aspect(vec2 deriv){return deriv.x !=0.0 ? atan(deriv.y,-deriv.x) : PI/2.0*(deriv.y > 0.0 ? 1.0 :-1.0);}void igor_hillshade(vec2 deriv){deriv=deriv*u_exaggeration*2.0;float aspect=get_aspect(deriv);float azimuth=u_azimuths[0]+PI;float slope_stength=atan(length(deriv))*2.0/PI;float aspect_strength=1.0-abs(mod((aspect+azimuth)/PI+0.5,2.0)-1.0);float shadow_strength=slope_stength*aspect_strength;float highlight_strength=slope_stength*(1.0-aspect_strength);fragColor=u_shadows[0]*shadow_strength+u_highlights[0]*highlight_strength;}void standard_hillshade(vec2 deriv){float azimuth=u_azimuths[0]+PI;float slope=atan(0.625*length(deriv));float aspect=get_aspect(deriv);float intensity=u_exaggeration;float base=1.875-intensity*1.75;float maxValue=0.5*PI;float scaledSlope=intensity !=0.5 ? ((pow(base,slope)-1.0)/(pow(base,maxValue)-1.0))*maxValue : slope;float accent=cos(scaledSlope);vec4 accent_color=(1.0-accent)*u_accent*clamp(intensity*2.0,0.0,1.0);float shade=abs(mod((aspect+azimuth)/PI+0.5,2.0)-1.0);vec4 shade_color=mix(u_shadows[0],u_highlights[0],shade)*sin(scaledSlope)*clamp(intensity*2.0,0.0,1.0);fragColor=accent_color*(1.0-shade_color.a)+shade_color;}void basic_hillshade(vec2 deriv){deriv=deriv*u_exaggeration*2.0;float azimuth=u_azimuths[0]+PI;float cos_az=cos(azimuth);float sin_az=sin(azimuth);float cos_alt=cos(u_altitudes[0]);float sin_alt=sin(u_altitudes[0]);float cang=(sin_alt-(deriv.y*cos_az*cos_alt-deriv.x*sin_az*cos_alt))/sqrt(1.0+dot(deriv,deriv));float shade=clamp(cang,0.0,1.0);if(shade > 0.5){fragColor=u_highlights[0]*(2.0*shade-1.0);}else
{fragColor=u_shadows[0]*(1.0-2.0*shade);}}void multidirectional_hillshade(vec2 deriv){deriv=deriv*u_exaggeration*2.0;fragColor=vec4(0,0,0,0);for(int i=0; i < NUM_ILLUMINATION_SOURCES; i++){float cos_alt=cos(u_altitudes[i]);float sin_alt=sin(u_altitudes[i]);float cos_az=-cos(u_azimuths[i]);float sin_az=-sin(u_azimuths[i]);float cang=(sin_alt-(deriv.y*cos_az*cos_alt-deriv.x*sin_az*cos_alt))/sqrt(1.0+dot(deriv,deriv));float shade=clamp(cang,0.0,1.0);if(shade > 0.5){fragColor+=u_highlights[i]*(2.0*shade-1.0)/float(NUM_ILLUMINATION_SOURCES);}else
{fragColor+=u_shadows[i]*(1.0-2.0*shade)/float(NUM_ILLUMINATION_SOURCES);}}}void combined_hillshade(vec2 deriv){deriv=deriv*u_exaggeration*2.0;float azimuth=u_azimuths[0]+PI;float cos_az=cos(azimuth);float sin_az=sin(azimuth);float cos_alt=cos(u_altitudes[0]);float sin_alt=sin(u_altitudes[0]);float cang=acos((sin_alt-(deriv.y*cos_az*cos_alt-deriv.x*sin_az*cos_alt))/sqrt(1.0+dot(deriv,deriv)));cang=clamp(cang,0.0,PI/2.0);float shade=cang*atan(length(deriv))*4.0/PI/PI;float highlight=(PI/2.0-cang)*atan(length(deriv))*4.0/PI/PI;fragColor=u_shadows[0]*shade+u_highlights[0]*highlight;}void main() {vec4 pixel=texture(u_image,v_pos);float scaleFactor=cos(radians((u_latrange[0]-u_latrange[1])*(1.0-v_pos.y)+u_latrange[1]));vec2 deriv=((pixel.rg*8.0)-4.0)/scaleFactor;if (u_method==BASIC) {basic_hillshade(deriv);} else if (u_method==COMBINED) {combined_hillshade(deriv);} else if (u_method==IGOR) {igor_hillshade(deriv);} else if (u_method==MULTIDIRECTIONAL) {multidirectional_hillshade(deriv);} else if (u_method==STANDARD) {standard_hillshade(deriv);} else {standard_hillshade(deriv);}
#ifdef OVERDRAW_INSPECTOR
fragColor=vec4(1.0);
#endif
}`,"uniform mat4 u_matrix;in vec2 a_pos;out vec2 v_pos;void main() {gl_Position=projectTile(a_pos,a_pos);v_pos=a_pos/8192.0;if (a_pos.y <-32767.5) {v_pos.y=0.0;}if (a_pos.y > 32766.5) {v_pos.y=1.0;}}"),line:Wr(`uniform lowp float u_device_pixel_ratio;in vec2 v_width2;in vec2 v_normal;in float v_gamma_scale;
#ifdef GLOBE
in float v_depth;
#endif
#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
float dist=length(v_normal)*v_width2.s;float blur2=(blur+1.0/u_device_pixel_ratio)*v_gamma_scale;float alpha=clamp(min(dist-(v_width2.t-blur2),v_width2.s-dist)/blur2,0.0,1.0);fragColor=color*(alpha*opacity);
#ifdef GLOBE
if (v_depth > 1.0) {discard;}
#endif
#ifdef OVERDRAW_INSPECTOR
fragColor=vec4(1.0);
#endif
}`,`
#define scale 0.015873016
in vec2 a_pos_normal;in vec4 a_data;uniform vec2 u_translation;uniform mediump float u_ratio;uniform vec2 u_units_to_pixels;uniform lowp float u_device_pixel_ratio;out vec2 v_normal;out vec2 v_width2;out float v_gamma_scale;out highp float v_linesofar;
#ifdef GLOBE
out float v_depth;
#endif
#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define mediump float gapwidth
#pragma mapbox: define lowp float offset
#pragma mapbox: define mediump float width
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump float gapwidth
#pragma mapbox: initialize lowp float offset
#pragma mapbox: initialize mediump float width
float ANTIALIASING=1.0/u_device_pixel_ratio/2.0;vec2 a_extrude=a_data.xy-128.0;float a_direction=mod(a_data.z,4.0)-1.0;v_linesofar=(floor(a_data.z/4.0)+a_data.w*64.0)*2.0;vec2 pos=floor(a_pos_normal*0.5);mediump vec2 normal=a_pos_normal-2.0*pos;normal.y=normal.y*2.0-1.0;v_normal=normal;gapwidth=gapwidth/2.0;float halfwidth=width/2.0;offset=-1.0*offset;float inset=gapwidth+(gapwidth > 0.0 ? ANTIALIASING : 0.0);float outset=gapwidth+halfwidth*(gapwidth > 0.0 ? 2.0 : 1.0)+(halfwidth==0.0 ? 0.0 : ANTIALIASING);mediump vec2 dist=outset*a_extrude*scale;mediump float u=0.5*a_direction;mediump float t=1.0-abs(u);mediump vec2 offset2=offset*a_extrude*scale*normal.y*mat2(t,-u,u,t);float adjustedThickness=projectLineThickness(pos.y);vec4 projected_no_extrude=projectTile(pos+offset2/u_ratio*adjustedThickness+u_translation);vec4 projected_with_extrude=projectTile(pos+offset2/u_ratio*adjustedThickness+u_translation+dist/u_ratio*adjustedThickness);gl_Position=projected_with_extrude;
#ifdef GLOBE
v_depth=gl_Position.z/gl_Position.w;
#endif
#ifdef TERRAIN3D
v_gamma_scale=1.0;
#else
float extrude_length_without_perspective=length(dist);float extrude_length_with_perspective=length((projected_with_extrude.xy-projected_no_extrude.xy)/projected_with_extrude.w*u_units_to_pixels);v_gamma_scale=extrude_length_without_perspective/extrude_length_with_perspective;
#endif
v_width2=vec2(outset,inset);}`),lineGradient:Wr(`uniform lowp float u_device_pixel_ratio;uniform sampler2D u_image;in vec2 v_width2;in vec2 v_normal;in float v_gamma_scale;in highp vec2 v_uv;
#ifdef GLOBE
in float v_depth;
#endif
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
float dist=length(v_normal)*v_width2.s;float blur2=(blur+1.0/u_device_pixel_ratio)*v_gamma_scale;float alpha=clamp(min(dist-(v_width2.t-blur2),v_width2.s-dist)/blur2,0.0,1.0);vec4 color=texture(u_image,v_uv);fragColor=color*(alpha*opacity);
#ifdef GLOBE
if (v_depth > 1.0) {discard;}
#endif
#ifdef OVERDRAW_INSPECTOR
fragColor=vec4(1.0);
#endif
}`,`
#define scale 0.015873016
in vec2 a_pos_normal;in vec4 a_data;in float a_uv_x;in float a_split_index;uniform vec2 u_translation;uniform mediump float u_ratio;uniform lowp float u_device_pixel_ratio;uniform vec2 u_units_to_pixels;uniform float u_image_height;out vec2 v_normal;out vec2 v_width2;out float v_gamma_scale;out highp vec2 v_uv;
#ifdef GLOBE
out float v_depth;
#endif
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define mediump float gapwidth
#pragma mapbox: define lowp float offset
#pragma mapbox: define mediump float width
void main() {
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump float gapwidth
#pragma mapbox: initialize lowp float offset
#pragma mapbox: initialize mediump float width
float ANTIALIASING=1.0/u_device_pixel_ratio/2.0;vec2 a_extrude=a_data.xy-128.0;float a_direction=mod(a_data.z,4.0)-1.0;highp float texel_height=1.0/u_image_height;highp float half_texel_height=0.5*texel_height;v_uv=vec2(a_uv_x,a_split_index*texel_height-half_texel_height);vec2 pos=floor(a_pos_normal*0.5);mediump vec2 normal=a_pos_normal-2.0*pos;normal.y=normal.y*2.0-1.0;v_normal=normal;gapwidth=gapwidth/2.0;float halfwidth=width/2.0;offset=-1.0*offset;float inset=gapwidth+(gapwidth > 0.0 ? ANTIALIASING : 0.0);float outset=gapwidth+halfwidth*(gapwidth > 0.0 ? 2.0 : 1.0)+(halfwidth==0.0 ? 0.0 : ANTIALIASING);mediump vec2 dist=outset*a_extrude*scale;mediump float u=0.5*a_direction;mediump float t=1.0-abs(u);mediump vec2 offset2=offset*a_extrude*scale*normal.y*mat2(t,-u,u,t);float adjustedThickness=projectLineThickness(pos.y);vec4 projected_no_extrude=projectTile(pos+offset2/u_ratio*adjustedThickness+u_translation);vec4 projected_with_extrude=projectTile(pos+offset2/u_ratio*adjustedThickness+u_translation+dist/u_ratio*adjustedThickness);gl_Position=projected_with_extrude;
#ifdef GLOBE
v_depth=gl_Position.z/gl_Position.w;
#endif
#ifdef TERRAIN3D
v_gamma_scale=1.0;
#else
float extrude_length_without_perspective=length(dist);float extrude_length_with_perspective=length((projected_with_extrude.xy-projected_no_extrude.xy)/projected_with_extrude.w*u_units_to_pixels);v_gamma_scale=extrude_length_without_perspective/extrude_length_with_perspective;
#endif
v_width2=vec2(outset,inset);}`),linePattern:Wr(`#ifdef GL_ES
precision highp float;
#endif
uniform lowp float u_device_pixel_ratio;uniform vec2 u_texsize;uniform float u_fade;uniform mediump vec3 u_scale;uniform sampler2D u_image;in vec2 v_normal;in vec2 v_width2;in float v_linesofar;in float v_gamma_scale;in float v_width;
#ifdef GLOBE
in float v_depth;
#endif
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
#pragma mapbox: define lowp float pixel_ratio_from
#pragma mapbox: define lowp float pixel_ratio_to
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
#pragma mapbox: initialize lowp float pixel_ratio_from
#pragma mapbox: initialize lowp float pixel_ratio_to
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;float tileZoomRatio=u_scale.x;float fromScale=u_scale.y;float toScale=u_scale.z;vec2 display_size_a=(pattern_br_a-pattern_tl_a)/pixel_ratio_from;vec2 display_size_b=(pattern_br_b-pattern_tl_b)/pixel_ratio_to;vec2 pattern_size_a=vec2(display_size_a.x*fromScale/tileZoomRatio,display_size_a.y);vec2 pattern_size_b=vec2(display_size_b.x*toScale/tileZoomRatio,display_size_b.y);float aspect_a=display_size_a.y/v_width;float aspect_b=display_size_b.y/v_width;float dist=length(v_normal)*v_width2.s;float blur2=(blur+1.0/u_device_pixel_ratio)*v_gamma_scale;float alpha=clamp(min(dist-(v_width2.t-blur2),v_width2.s-dist)/blur2,0.0,1.0);float x_a=mod(v_linesofar/pattern_size_a.x*aspect_a,1.0);float x_b=mod(v_linesofar/pattern_size_b.x*aspect_b,1.0);float y=0.5*v_normal.y+0.5;vec2 texel_size=1.0/u_texsize;vec2 pos_a=mix(pattern_tl_a*texel_size-texel_size,pattern_br_a*texel_size+texel_size,vec2(x_a,y));vec2 pos_b=mix(pattern_tl_b*texel_size-texel_size,pattern_br_b*texel_size+texel_size,vec2(x_b,y));vec4 color=mix(texture(u_image,pos_a),texture(u_image,pos_b),u_fade);fragColor=color*alpha*opacity;
#ifdef GLOBE
if (v_depth > 1.0) {discard;}
#endif
#ifdef OVERDRAW_INSPECTOR
fragColor=vec4(1.0);
#endif
}`,`
#define scale 0.015873016
#define LINE_DISTANCE_SCALE 2.0
in vec2 a_pos_normal;in vec4 a_data;uniform vec2 u_translation;uniform vec2 u_units_to_pixels;uniform mediump float u_ratio;uniform lowp float u_device_pixel_ratio;out vec2 v_normal;out vec2 v_width2;out float v_linesofar;out float v_gamma_scale;out float v_width;
#ifdef GLOBE
out float v_depth;
#endif
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp float offset
#pragma mapbox: define mediump float gapwidth
#pragma mapbox: define mediump float width
#pragma mapbox: define lowp float floorwidth
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
#pragma mapbox: define lowp float pixel_ratio_from
#pragma mapbox: define lowp float pixel_ratio_to
void main() {
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize lowp float offset
#pragma mapbox: initialize mediump float gapwidth
#pragma mapbox: initialize mediump float width
#pragma mapbox: initialize lowp float floorwidth
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
#pragma mapbox: initialize lowp float pixel_ratio_from
#pragma mapbox: initialize lowp float pixel_ratio_to
float ANTIALIASING=1.0/u_device_pixel_ratio/2.0;vec2 a_extrude=a_data.xy-128.0;float a_direction=mod(a_data.z,4.0)-1.0;float a_linesofar=(floor(a_data.z/4.0)+a_data.w*64.0)*LINE_DISTANCE_SCALE;vec2 pos=floor(a_pos_normal*0.5);mediump vec2 normal=a_pos_normal-2.0*pos;normal.y=normal.y*2.0-1.0;v_normal=normal;gapwidth=gapwidth/2.0;float halfwidth=width/2.0;offset=-1.0*offset;float inset=gapwidth+(gapwidth > 0.0 ? ANTIALIASING : 0.0);float outset=gapwidth+halfwidth*(gapwidth > 0.0 ? 2.0 : 1.0)+(halfwidth==0.0 ? 0.0 : ANTIALIASING);mediump vec2 dist=outset*a_extrude*scale;mediump float u=0.5*a_direction;mediump float t=1.0-abs(u);mediump vec2 offset2=offset*a_extrude*scale*normal.y*mat2(t,-u,u,t);float adjustedThickness=projectLineThickness(pos.y);vec4 projected_no_extrude=projectTile(pos+offset2/u_ratio*adjustedThickness+u_translation);vec4 projected_with_extrude=projectTile(pos+offset2/u_ratio*adjustedThickness+u_translation+dist/u_ratio*adjustedThickness);gl_Position=projected_with_extrude;
#ifdef GLOBE
v_depth=gl_Position.z/gl_Position.w;
#endif
#ifdef TERRAIN3D
v_gamma_scale=1.0;
#else
float extrude_length_without_perspective=length(dist);float extrude_length_with_perspective=length((projected_with_extrude.xy-projected_no_extrude.xy)/projected_with_extrude.w*u_units_to_pixels);v_gamma_scale=extrude_length_without_perspective/extrude_length_with_perspective;
#endif
v_linesofar=a_linesofar;v_width2=vec2(outset,inset);v_width=floorwidth;}`),lineSDF:Wr(`uniform lowp float u_device_pixel_ratio;uniform sampler2D u_image;uniform float u_sdfgamma;uniform float u_mix;in vec2 v_normal;in vec2 v_width2;in vec2 v_tex_a;in vec2 v_tex_b;in float v_gamma_scale;
#ifdef GLOBE
in float v_depth;
#endif
#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define mediump float width
#pragma mapbox: define lowp float floorwidth
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump float width
#pragma mapbox: initialize lowp float floorwidth
float dist=length(v_normal)*v_width2.s;float blur2=(blur+1.0/u_device_pixel_ratio)*v_gamma_scale;float alpha=clamp(min(dist-(v_width2.t-blur2),v_width2.s-dist)/blur2,0.0,1.0);float sdfdist_a=texture(u_image,v_tex_a).a;float sdfdist_b=texture(u_image,v_tex_b).a;float sdfdist=mix(sdfdist_a,sdfdist_b,u_mix);alpha*=smoothstep(0.5-u_sdfgamma/floorwidth,0.5+u_sdfgamma/floorwidth,sdfdist);fragColor=color*(alpha*opacity);
#ifdef GLOBE
if (v_depth > 1.0) {discard;}
#endif
#ifdef OVERDRAW_INSPECTOR
fragColor=vec4(1.0);
#endif
}`,`
#define scale 0.015873016
#define LINE_DISTANCE_SCALE 2.0
in vec2 a_pos_normal;in vec4 a_data;uniform vec2 u_translation;uniform mediump float u_ratio;uniform lowp float u_device_pixel_ratio;uniform vec2 u_patternscale_a;uniform float u_tex_y_a;uniform vec2 u_patternscale_b;uniform float u_tex_y_b;uniform vec2 u_units_to_pixels;out vec2 v_normal;out vec2 v_width2;out vec2 v_tex_a;out vec2 v_tex_b;out float v_gamma_scale;
#ifdef GLOBE
out float v_depth;
#endif
#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define mediump float gapwidth
#pragma mapbox: define lowp float offset
#pragma mapbox: define mediump float width
#pragma mapbox: define lowp float floorwidth
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump float gapwidth
#pragma mapbox: initialize lowp float offset
#pragma mapbox: initialize mediump float width
#pragma mapbox: initialize lowp float floorwidth
float ANTIALIASING=1.0/u_device_pixel_ratio/2.0;vec2 a_extrude=a_data.xy-128.0;float a_direction=mod(a_data.z,4.0)-1.0;float a_linesofar=(floor(a_data.z/4.0)+a_data.w*64.0)*LINE_DISTANCE_SCALE;vec2 pos=floor(a_pos_normal*0.5);mediump vec2 normal=a_pos_normal-2.0*pos;normal.y=normal.y*2.0-1.0;v_normal=normal;gapwidth=gapwidth/2.0;float halfwidth=width/2.0;offset=-1.0*offset;float inset=gapwidth+(gapwidth > 0.0 ? ANTIALIASING : 0.0);float outset=gapwidth+halfwidth*(gapwidth > 0.0 ? 2.0 : 1.0)+(halfwidth==0.0 ? 0.0 : ANTIALIASING);mediump vec2 dist=outset*a_extrude*scale;mediump float u=0.5*a_direction;mediump float t=1.0-abs(u);mediump vec2 offset2=offset*a_extrude*scale*normal.y*mat2(t,-u,u,t);float adjustedThickness=projectLineThickness(pos.y);vec4 projected_no_extrude=projectTile(pos+offset2/u_ratio*adjustedThickness+u_translation);vec4 projected_with_extrude=projectTile(pos+offset2/u_ratio*adjustedThickness+u_translation+dist/u_ratio*adjustedThickness);gl_Position=projected_with_extrude;
#ifdef GLOBE
v_depth=gl_Position.z/gl_Position.w;
#endif
#ifdef TERRAIN3D
v_gamma_scale=1.0;
#else
float extrude_length_without_perspective=length(dist);float extrude_length_with_perspective=length((projected_with_extrude.xy-projected_no_extrude.xy)/projected_with_extrude.w*u_units_to_pixels);v_gamma_scale=extrude_length_without_perspective/extrude_length_with_perspective;
#endif
v_tex_a=vec2(a_linesofar*u_patternscale_a.x/floorwidth,normal.y*u_patternscale_a.y+u_tex_y_a);v_tex_b=vec2(a_linesofar*u_patternscale_b.x/floorwidth,normal.y*u_patternscale_b.y+u_tex_y_b);v_width2=vec2(outset,inset);}`),raster:Wr(`uniform float u_fade_t;uniform float u_opacity;uniform sampler2D u_image0;uniform sampler2D u_image1;in vec2 v_pos0;in vec2 v_pos1;uniform float u_brightness_low;uniform float u_brightness_high;uniform float u_saturation_factor;uniform float u_contrast_factor;uniform vec3 u_spin_weights;void main() {vec4 color0=texture(u_image0,v_pos0);vec4 color1=texture(u_image1,v_pos1);if (color0.a > 0.0) {color0.rgb=color0.rgb/color0.a;}if (color1.a > 0.0) {color1.rgb=color1.rgb/color1.a;}vec4 color=mix(color0,color1,u_fade_t);color.a*=u_opacity;vec3 rgb=color.rgb;rgb=vec3(dot(rgb,u_spin_weights.xyz),dot(rgb,u_spin_weights.zxy),dot(rgb,u_spin_weights.yzx));float average=(color.r+color.g+color.b)/3.0;rgb+=(average-rgb)*u_saturation_factor;rgb=(rgb-0.5)*u_contrast_factor+0.5;vec3 u_high_vec=vec3(u_brightness_low,u_brightness_low,u_brightness_low);vec3 u_low_vec=vec3(u_brightness_high,u_brightness_high,u_brightness_high);fragColor=vec4(mix(u_high_vec,u_low_vec,rgb)*color.a,color.a);
#ifdef OVERDRAW_INSPECTOR
fragColor=vec4(1.0);
#endif
}`,`uniform vec2 u_tl_parent;uniform float u_scale_parent;uniform float u_buffer_scale;uniform vec4 u_coords_top;uniform vec4 u_coords_bottom;in vec2 a_pos;out vec2 v_pos0;out vec2 v_pos1;void main() {vec2 fractionalPos=a_pos/8192.0;vec2 position=mix(mix(u_coords_top.xy,u_coords_top.zw,fractionalPos.x),mix(u_coords_bottom.xy,u_coords_bottom.zw,fractionalPos.x),fractionalPos.y);gl_Position=projectTile(position,position);v_pos0=((fractionalPos-0.5)/u_buffer_scale)+0.5;
#ifdef GLOBE
if (a_pos.y <-32767.5) {v_pos0.y=0.0;}if (a_pos.y > 32766.5) {v_pos0.y=1.0;}
#endif
v_pos1=(v_pos0*u_scale_parent)+u_tl_parent;}`),symbolIcon:Wr(`uniform sampler2D u_texture;in vec2 v_tex;in float v_fade_opacity;
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize lowp float opacity
lowp float alpha=opacity*v_fade_opacity;fragColor=texture(u_texture,v_tex)*alpha;
#ifdef OVERDRAW_INSPECTOR
fragColor=vec4(1.0);
#endif
}`,`in vec4 a_pos_offset;in vec4 a_data;in vec4 a_pixeloffset;in vec3 a_projected_pos;in float a_fade_opacity;uniform bool u_is_size_zoom_constant;uniform bool u_is_size_feature_constant;uniform highp float u_size_t;uniform highp float u_size;uniform highp float u_camera_to_center_distance;uniform highp float u_pitch;uniform bool u_rotate_symbol;uniform highp float u_aspect_ratio;uniform float u_fade_change;uniform mat4 u_label_plane_matrix;uniform mat4 u_coord_matrix;uniform bool u_is_text;uniform bool u_pitch_with_map;uniform vec2 u_texsize;uniform bool u_is_along_line;uniform bool u_is_variable_anchor;uniform vec2 u_translation;uniform float u_pitched_scale;out vec2 v_tex;out float v_fade_opacity;
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize lowp float opacity
vec2 a_pos=a_pos_offset.xy;vec2 a_offset=a_pos_offset.zw;vec2 a_tex=a_data.xy;vec2 a_size=a_data.zw;float a_size_min=floor(a_size[0]*0.5);vec2 a_pxoffset=a_pixeloffset.xy;vec2 a_minFontScale=a_pixeloffset.zw/256.0;float ele=get_elevation(a_pos);highp float segment_angle=-a_projected_pos[2];float size;if (!u_is_size_zoom_constant && !u_is_size_feature_constant) {size=mix(a_size_min,a_size[1],u_size_t)/128.0;} else if (u_is_size_zoom_constant && !u_is_size_feature_constant) {size=a_size_min/128.0;} else {size=u_size;}vec2 translated_a_pos=a_pos+u_translation;vec4 projectedPoint=projectTileWithElevation(translated_a_pos,ele);highp float camera_to_anchor_distance=projectedPoint.w;highp float distance_ratio=u_pitch_with_map ?
camera_to_anchor_distance/u_camera_to_center_distance :
u_camera_to_center_distance/camera_to_anchor_distance;highp float perspective_ratio=clamp(0.5+0.5*distance_ratio,0.0,4.0);size*=perspective_ratio;float fontScale=u_is_text ? size/24.0 : size;highp float symbol_rotation=0.0;if (u_rotate_symbol) {vec4 offsetProjectedPoint=projectTileWithElevation(translated_a_pos+vec2(1,0),ele);vec2 a=projectedPoint.xy/projectedPoint.w;vec2 b=offsetProjectedPoint.xy/offsetProjectedPoint.w;symbol_rotation=atan((b.y-a.y)/u_aspect_ratio,b.x-a.x);}highp float angle_sin=sin(segment_angle+symbol_rotation);highp float angle_cos=cos(segment_angle+symbol_rotation);mat2 rotation_matrix=mat2(angle_cos,-1.0*angle_sin,angle_sin,angle_cos);vec4 projected_pos;if (u_is_along_line || u_is_variable_anchor) {projected_pos=vec4(a_projected_pos.xy,ele,1.0);} else if (u_pitch_with_map) {projected_pos=u_label_plane_matrix*vec4(a_projected_pos.xy+u_translation,ele,1.0);} else {projected_pos=u_label_plane_matrix*projectTileWithElevation(a_projected_pos.xy+u_translation,ele);}float z=float(u_pitch_with_map)*projected_pos.z/projected_pos.w;float projectionScaling=1.0;
#ifdef GLOBE
if(u_pitch_with_map) {float anchor_pos_tile_y=(u_coord_matrix*vec4(projected_pos.xy/projected_pos.w,z,1.0)).y;projectionScaling=mix(projectionScaling,1.0/circumferenceRatioAtTileY(anchor_pos_tile_y)*u_pitched_scale,u_projection_transition);}
#endif
vec4 finalPos=u_coord_matrix*vec4(projected_pos.xy/projected_pos.w+rotation_matrix*(a_offset/32.0*max(a_minFontScale,fontScale)+a_pxoffset/16.0)*projectionScaling,z,1.0);if(u_pitch_with_map) {finalPos=projectTileWithElevation(finalPos.xy,finalPos.z);}gl_Position=finalPos;v_tex=a_tex/u_texsize;vec2 fade_opacity=unpack_opacity(a_fade_opacity);float fade_change=fade_opacity[1] > 0.5 ? u_fade_change :-u_fade_change;float visibility=calculate_visibility(projectedPoint);v_fade_opacity=max(0.0,min(visibility,fade_opacity[0]+fade_change));}`),symbolSDF:Wr(`#define SDF_PX 8.0
uniform bool u_is_halo;uniform sampler2D u_texture;uniform highp float u_gamma_scale;uniform lowp float u_device_pixel_ratio;uniform bool u_is_text;in vec2 v_data0;in vec3 v_data1;
#pragma mapbox: define highp vec4 fill_color
#pragma mapbox: define highp vec4 halo_color
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp float halo_width
#pragma mapbox: define lowp float halo_blur
void main() {
#pragma mapbox: initialize highp vec4 fill_color
#pragma mapbox: initialize highp vec4 halo_color
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize lowp float halo_width
#pragma mapbox: initialize lowp float halo_blur
float EDGE_GAMMA=0.105/u_device_pixel_ratio;vec2 tex=v_data0.xy;float gamma_scale=v_data1.x;float size=v_data1.y;float fade_opacity=v_data1[2];float fontScale=u_is_text ? size/24.0 : size;lowp vec4 color=fill_color;highp float gamma=EDGE_GAMMA/(fontScale*u_gamma_scale);lowp float inner_edge=(256.0-64.0)/256.0;if (u_is_halo) {color=halo_color;gamma=(halo_blur*1.19/SDF_PX+EDGE_GAMMA)/(fontScale*u_gamma_scale);inner_edge=inner_edge+gamma*gamma_scale;}lowp float dist=texture(u_texture,tex).a;highp float gamma_scaled=gamma*gamma_scale;highp float alpha=smoothstep(inner_edge-gamma_scaled,inner_edge+gamma_scaled,dist);if (u_is_halo) {lowp float halo_edge=(6.0-halo_width/fontScale)/SDF_PX;alpha=min(smoothstep(halo_edge-gamma_scaled,halo_edge+gamma_scaled,dist),1.0-alpha);}fragColor=color*(alpha*opacity*fade_opacity);
#ifdef OVERDRAW_INSPECTOR
fragColor=vec4(1.0);
#endif
}`,`in vec4 a_pos_offset;in vec4 a_data;in vec4 a_pixeloffset;in vec3 a_projected_pos;in float a_fade_opacity;uniform bool u_is_size_zoom_constant;uniform bool u_is_size_feature_constant;uniform highp float u_size_t;uniform highp float u_size;uniform mat4 u_label_plane_matrix;uniform mat4 u_coord_matrix;uniform bool u_is_text;uniform bool u_pitch_with_map;uniform bool u_is_along_line;uniform bool u_is_variable_anchor;uniform highp float u_pitch;uniform bool u_rotate_symbol;uniform highp float u_aspect_ratio;uniform highp float u_camera_to_center_distance;uniform float u_fade_change;uniform vec2 u_texsize;uniform vec2 u_translation;uniform float u_pitched_scale;out vec2 v_data0;out vec3 v_data1;
#pragma mapbox: define highp vec4 fill_color
#pragma mapbox: define highp vec4 halo_color
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp float halo_width
#pragma mapbox: define lowp float halo_blur
void main() {
#pragma mapbox: initialize highp vec4 fill_color
#pragma mapbox: initialize highp vec4 halo_color
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize lowp float halo_width
#pragma mapbox: initialize lowp float halo_blur
vec2 a_pos=a_pos_offset.xy;vec2 a_offset=a_pos_offset.zw;vec2 a_tex=a_data.xy;vec2 a_size=a_data.zw;float a_size_min=floor(a_size[0]*0.5);vec2 a_pxoffset=a_pixeloffset.xy;float ele=get_elevation(a_pos);highp float segment_angle=-a_projected_pos[2];float size;if (!u_is_size_zoom_constant && !u_is_size_feature_constant) {size=mix(a_size_min,a_size[1],u_size_t)/128.0;} else if (u_is_size_zoom_constant && !u_is_size_feature_constant) {size=a_size_min/128.0;} else {size=u_size;}vec2 translated_a_pos=a_pos+u_translation;vec4 projectedPoint=projectTileWithElevation(translated_a_pos,ele);highp float camera_to_anchor_distance=projectedPoint.w;highp float distance_ratio=u_pitch_with_map ?
camera_to_anchor_distance/u_camera_to_center_distance :
u_camera_to_center_distance/camera_to_anchor_distance;highp float perspective_ratio=clamp(0.5+0.5*distance_ratio,0.0,4.0);size*=perspective_ratio;float fontScale=u_is_text ? size/24.0 : size;highp float symbol_rotation=0.0;if (u_rotate_symbol) {vec4 offsetProjectedPoint=projectTileWithElevation(translated_a_pos+vec2(1,0),ele);vec2 a=projectedPoint.xy/projectedPoint.w;vec2 b=offsetProjectedPoint.xy/offsetProjectedPoint.w;symbol_rotation=atan((b.y-a.y)/u_aspect_ratio,b.x-a.x);}highp float angle_sin=sin(segment_angle+symbol_rotation);highp float angle_cos=cos(segment_angle+symbol_rotation);mat2 rotation_matrix=mat2(angle_cos,-1.0*angle_sin,angle_sin,angle_cos);vec4 projected_pos;if (u_is_along_line || u_is_variable_anchor) {projected_pos=vec4(a_projected_pos.xy,ele,1.0);} else if (u_pitch_with_map) {projected_pos=u_label_plane_matrix*vec4(a_projected_pos.xy+u_translation,ele,1.0);} else {projected_pos=u_label_plane_matrix*projectTileWithElevation(a_projected_pos.xy+u_translation,ele);}float z=float(u_pitch_with_map)*projected_pos.z/projected_pos.w;float projectionScaling=1.0;
#ifdef GLOBE
if(u_pitch_with_map) {float anchor_pos_tile_y=(u_coord_matrix*vec4(projected_pos.xy/projected_pos.w,z,1.0)).y;projectionScaling=mix(projectionScaling,1.0/circumferenceRatioAtTileY(anchor_pos_tile_y)*u_pitched_scale,u_projection_transition);}
#endif
vec4 finalPos=u_coord_matrix*vec4(projected_pos.xy/projected_pos.w+rotation_matrix*(a_offset/32.0*fontScale+a_pxoffset)*projectionScaling,z,1.0);if(u_pitch_with_map) {finalPos=projectTileWithElevation(finalPos.xy,finalPos.z);}float gamma_scale=finalPos.w;gl_Position=finalPos;vec2 fade_opacity=unpack_opacity(a_fade_opacity);float visibility=calculate_visibility(projectedPoint);float fade_change=fade_opacity[1] > 0.5 ? u_fade_change :-u_fade_change;float interpolated_fade_opacity=max(0.0,min(visibility,fade_opacity[0]+fade_change));v_data0=a_tex/u_texsize;v_data1=vec3(gamma_scale,size,interpolated_fade_opacity);}`),symbolTextAndIcon:Wr(`#define SDF_PX 8.0
#define SDF 1.0
#define ICON 0.0
uniform bool u_is_halo;uniform sampler2D u_texture;uniform sampler2D u_texture_icon;uniform highp float u_gamma_scale;uniform lowp float u_device_pixel_ratio;in vec4 v_data0;in vec4 v_data1;
#pragma mapbox: define highp vec4 fill_color
#pragma mapbox: define highp vec4 halo_color
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp float halo_width
#pragma mapbox: define lowp float halo_blur
void main() {
#pragma mapbox: initialize highp vec4 fill_color
#pragma mapbox: initialize highp vec4 halo_color
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize lowp float halo_width
#pragma mapbox: initialize lowp float halo_blur
float fade_opacity=v_data1[2];if (v_data1.w==ICON) {vec2 tex_icon=v_data0.zw;lowp float alpha=opacity*fade_opacity;fragColor=texture(u_texture_icon,tex_icon)*alpha;
#ifdef OVERDRAW_INSPECTOR
fragColor=vec4(1.0);
#endif
return;}vec2 tex=v_data0.xy;float EDGE_GAMMA=0.105/u_device_pixel_ratio;float gamma_scale=v_data1.x;float size=v_data1.y;float fontScale=size/24.0;lowp vec4 color=fill_color;highp float gamma=EDGE_GAMMA/(fontScale*u_gamma_scale);lowp float buff=(256.0-64.0)/256.0;if (u_is_halo) {color=halo_color;gamma=(halo_blur*1.19/SDF_PX+EDGE_GAMMA)/(fontScale*u_gamma_scale);buff=(6.0-halo_width/fontScale)/SDF_PX;}lowp float dist=texture(u_texture,tex).a;highp float gamma_scaled=gamma*gamma_scale;highp float alpha=smoothstep(buff-gamma_scaled,buff+gamma_scaled,dist);fragColor=color*(alpha*opacity*fade_opacity);
#ifdef OVERDRAW_INSPECTOR
fragColor=vec4(1.0);
#endif
}`,`in vec4 a_pos_offset;in vec4 a_data;in vec3 a_projected_pos;in float a_fade_opacity;uniform bool u_is_size_zoom_constant;uniform bool u_is_size_feature_constant;uniform highp float u_size_t;uniform highp float u_size;uniform mat4 u_label_plane_matrix;uniform mat4 u_coord_matrix;uniform bool u_is_text;uniform bool u_pitch_with_map;uniform highp float u_pitch;uniform bool u_rotate_symbol;uniform highp float u_aspect_ratio;uniform highp float u_camera_to_center_distance;uniform float u_fade_change;uniform vec2 u_texsize;uniform vec2 u_texsize_icon;uniform bool u_is_along_line;uniform bool u_is_variable_anchor;uniform vec2 u_translation;uniform float u_pitched_scale;out vec4 v_data0;out vec4 v_data1;
#pragma mapbox: define highp vec4 fill_color
#pragma mapbox: define highp vec4 halo_color
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp float halo_width
#pragma mapbox: define lowp float halo_blur
void main() {
#pragma mapbox: initialize highp vec4 fill_color
#pragma mapbox: initialize highp vec4 halo_color
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize lowp float halo_width
#pragma mapbox: initialize lowp float halo_blur
vec2 a_pos=a_pos_offset.xy;vec2 a_offset=a_pos_offset.zw;vec2 a_tex=a_data.xy;vec2 a_size=a_data.zw;float a_size_min=floor(a_size[0]*0.5);float is_sdf=a_size[0]-2.0*a_size_min;float ele=get_elevation(a_pos);highp float segment_angle=-a_projected_pos[2];float size;if (!u_is_size_zoom_constant && !u_is_size_feature_constant) {size=mix(a_size_min,a_size[1],u_size_t)/128.0;} else if (u_is_size_zoom_constant && !u_is_size_feature_constant) {size=a_size_min/128.0;} else {size=u_size;}vec2 translated_a_pos=a_pos+u_translation;vec4 projectedPoint=projectTileWithElevation(translated_a_pos,ele);highp float camera_to_anchor_distance=projectedPoint.w;highp float distance_ratio=u_pitch_with_map ?
camera_to_anchor_distance/u_camera_to_center_distance :
u_camera_to_center_distance/camera_to_anchor_distance;highp float perspective_ratio=clamp(0.5+0.5*distance_ratio,0.0,4.0);size*=perspective_ratio;float fontScale=size/24.0;highp float symbol_rotation=0.0;if (u_rotate_symbol) {vec4 offsetProjectedPoint=projectTileWithElevation(translated_a_pos+vec2(1,0),ele);vec2 a=projectedPoint.xy/projectedPoint.w;vec2 b=offsetProjectedPoint.xy/offsetProjectedPoint.w;symbol_rotation=atan((b.y-a.y)/u_aspect_ratio,b.x-a.x);}highp float angle_sin=sin(segment_angle+symbol_rotation);highp float angle_cos=cos(segment_angle+symbol_rotation);mat2 rotation_matrix=mat2(angle_cos,-1.0*angle_sin,angle_sin,angle_cos);vec4 projected_pos;if (u_is_along_line || u_is_variable_anchor) {projected_pos=vec4(a_projected_pos.xy,ele,1.0);} else if (u_pitch_with_map) {projected_pos=u_label_plane_matrix*vec4(a_projected_pos.xy+u_translation,ele,1.0);} else {projected_pos=u_label_plane_matrix*projectTileWithElevation(a_projected_pos.xy+u_translation,ele);}float z=float(u_pitch_with_map)*projected_pos.z/projected_pos.w;float projectionScaling=1.0;
#ifdef GLOBE
if(u_pitch_with_map && !u_is_along_line) {float anchor_pos_tile_y=(u_coord_matrix*vec4(projected_pos.xy/projected_pos.w,z,1.0)).y;projectionScaling=mix(projectionScaling,1.0/circumferenceRatioAtTileY(anchor_pos_tile_y)*u_pitched_scale,u_projection_transition);}
#endif
vec4 finalPos=u_coord_matrix*vec4(projected_pos.xy/projected_pos.w+rotation_matrix*(a_offset/32.0*fontScale)*projectionScaling,z,1.0);if(u_pitch_with_map) {finalPos=projectTileWithElevation(finalPos.xy,finalPos.z);}float gamma_scale=finalPos.w;gl_Position=finalPos;vec2 fade_opacity=unpack_opacity(a_fade_opacity);float visibility=calculate_visibility(projectedPoint);float fade_change=fade_opacity[1] > 0.5 ? u_fade_change :-u_fade_change;float interpolated_fade_opacity=max(0.0,min(visibility,fade_opacity[0]+fade_change));v_data0.xy=a_tex/u_texsize;v_data0.zw=a_tex/u_texsize_icon;v_data1=vec4(gamma_scale,size,interpolated_fade_opacity,is_sdf);}`),terrain:Wr("uniform sampler2D u_texture;uniform vec4 u_fog_color;uniform vec4 u_horizon_color;uniform float u_fog_ground_blend;uniform float u_fog_ground_blend_opacity;uniform float u_horizon_fog_blend;uniform bool u_is_globe_mode;in vec2 v_texture_pos;in float v_fog_depth;const float gamma=2.2;vec4 gammaToLinear(vec4 color) {return pow(color,vec4(gamma));}vec4 linearToGamma(vec4 color) {return pow(color,vec4(1.0/gamma));}void main() {vec4 surface_color=texture(u_texture,vec2(v_texture_pos.x,1.0-v_texture_pos.y));if (!u_is_globe_mode && v_fog_depth > u_fog_ground_blend) {vec4 surface_color_linear=gammaToLinear(surface_color);float blend_color=smoothstep(0.0,1.0,max((v_fog_depth-u_horizon_fog_blend)/(1.0-u_horizon_fog_blend),0.0));vec4 fog_horizon_color_linear=mix(gammaToLinear(u_fog_color),gammaToLinear(u_horizon_color),blend_color);float factor_fog=max(v_fog_depth-u_fog_ground_blend,0.0)/(1.0-u_fog_ground_blend);fragColor=linearToGamma(mix(surface_color_linear,fog_horizon_color_linear,pow(factor_fog,2.0)*u_fog_ground_blend_opacity));} else {fragColor=surface_color;}}","in vec3 a_pos3d;uniform mat4 u_fog_matrix;uniform float u_ele_delta;out vec2 v_texture_pos;out float v_fog_depth;void main() {float ele=get_elevation(a_pos3d.xy);float ele_delta=a_pos3d.z==1.0 ? u_ele_delta : 0.0;v_texture_pos=a_pos3d.xy/8192.0;gl_Position=projectTileFor3D(a_pos3d.xy,get_elevation(a_pos3d.xy)-ele_delta);vec4 pos=u_fog_matrix*vec4(a_pos3d.xy,ele,1.0);v_fog_depth=pos.z/pos.w*0.5+0.5;}"),terrainDepth:Wr("in float v_depth;const highp vec4 bitSh=vec4(256.*256.*256.,256.*256.,256.,1.);const highp vec4 bitMsk=vec4(0.,vec3(1./256.0));highp vec4 pack(highp float value) {highp vec4 comp=fract(value*bitSh);comp-=comp.xxyz*bitMsk;return comp;}void main() {fragColor=pack(v_depth);}","in vec3 a_pos3d;uniform float u_ele_delta;out float v_depth;void main() {float ele=get_elevation(a_pos3d.xy);float ele_delta=a_pos3d.z==1.0 ? u_ele_delta : 0.0;gl_Position=projectTileFor3D(a_pos3d.xy,ele-ele_delta);v_depth=gl_Position.z/gl_Position.w;}"),terrainCoords:Wr("precision mediump float;uniform sampler2D u_texture;uniform float u_terrain_coords_id;in vec2 v_texture_pos;void main() {vec4 rgba=texture(u_texture,v_texture_pos);fragColor=vec4(rgba.r,rgba.g,rgba.b,u_terrain_coords_id);}","in vec3 a_pos3d;uniform float u_ele_delta;out vec2 v_texture_pos;void main() {float ele=get_elevation(a_pos3d.xy);float ele_delta=a_pos3d.z==1.0 ? u_ele_delta : 0.0;v_texture_pos=a_pos3d.xy/8192.0;gl_Position=projectTileFor3D(a_pos3d.xy,ele-ele_delta);}"),projectionErrorMeasurement:Wr("in vec4 v_output_error_encoded;void main() {fragColor=v_output_error_encoded;}","in vec2 a_pos;uniform highp float u_input;uniform highp float u_output_expected;out vec4 v_output_error_encoded;void main() {float real_output=2.0*atan(exp(PI-(u_input*PI*2.0)))-PI*0.5;float error=real_output-u_output_expected;float abs_error=abs(error)*128.0;v_output_error_encoded.x=min(floor(abs_error*256.0),255.0)/255.0;abs_error-=v_output_error_encoded.x;v_output_error_encoded.y=min(floor(abs_error*65536.0),255.0)/255.0;abs_error-=v_output_error_encoded.x/255.0;v_output_error_encoded.z=min(floor(abs_error*16777216.0),255.0)/255.0;v_output_error_encoded.w=error >=0.0 ? 1.0 : 0.0;gl_Position=vec4(a_pos,0.0,1.0);}"),atmosphere:Wr(`in vec3 view_direction;uniform vec3 u_sun_pos;uniform vec3 u_globe_position;uniform float u_globe_radius;uniform float u_atmosphere_blend;/**Shader use from https:*Made some change to adapt to MapLibre Globe geometry*/const float PI=3.141592653589793;const int iSteps=5;const int jSteps=3;/*radius of the planet*/const float EARTH_RADIUS=6371e3;/*radius of the atmosphere*/const float ATMOS_RADIUS=6471e3;vec2 rsi(vec3 r0,vec3 rd,float sr) {float a=dot(rd,rd);float b=2.0*dot(rd,r0);float c=dot(r0,r0)-(sr*sr);float d=(b*b)-4.0*a*c;if (d < 0.0) return vec2(1e5,-1e5);return vec2((-b-sqrt(d))/(2.0*a),(-b+sqrt(d))/(2.0*a));}vec4 atmosphere(vec3 r,vec3 r0,vec3 pSun,float iSun,float rPlanet,float rAtmos,vec3 kRlh,float kMie,float shRlh,float shMie,float g) {pSun=normalize(pSun);r=normalize(r);vec2 p=rsi(r0,r,rAtmos);if (p.x > p.y) {return vec4(0.0,0.0,0.0,1.0);}if (p.x < 0.0) {p.x=0.0;}vec3 pos=r0+r*p.x;vec2 p2=rsi(r0,r,rPlanet);if (p2.x <=p2.y && p2.x > 0.0) {p.y=min(p.y,p2.x);}float iStepSize=(p.y-p.x)/float(iSteps);float iTime=p.x+iStepSize*0.5;vec3 totalRlh=vec3(0,0,0);vec3 totalMie=vec3(0,0,0);float iOdRlh=0.0;float iOdMie=0.0;float mu=dot(r,pSun);float mumu=mu*mu;float gg=g*g;float pRlh=3.0/(16.0*PI)*(1.0+mumu);float pMie=3.0/(8.0*PI)*((1.0-gg)*(mumu+1.0))/(pow(1.0+gg-2.0*mu*g,1.5)*(2.0+gg));for (int i=0; i < iSteps; i++) {vec3 iPos=r0+r*iTime;float iHeight=length(iPos)-rPlanet;float odStepRlh=exp(-iHeight/shRlh)*iStepSize;float odStepMie=exp(-iHeight/shMie)*iStepSize;iOdRlh+=odStepRlh;iOdMie+=odStepMie;float jStepSize=rsi(iPos,pSun,rAtmos).y/float(jSteps);float jTime=jStepSize*0.5;float jOdRlh=0.0;float jOdMie=0.0;for (int j=0; j < jSteps; j++) {vec3 jPos=iPos+pSun*jTime;float jHeight=length(jPos)-rPlanet;jOdRlh+=exp(-jHeight/shRlh)*jStepSize;jOdMie+=exp(-jHeight/shMie)*jStepSize;jTime+=jStepSize;}vec3 attn=exp(-(kMie*(iOdMie+jOdMie)+kRlh*(iOdRlh+jOdRlh)));totalRlh+=odStepRlh*attn;totalMie+=odStepMie*attn;iTime+=iStepSize;}float opacity=exp(-(length(kRlh)*length(totalRlh)+kMie*length(totalMie)));vec3 color=iSun*(pRlh*kRlh*totalRlh+pMie*kMie*totalMie);return vec4(color,opacity);}void main() {vec3 scale_camera_pos=-u_globe_position*EARTH_RADIUS/u_globe_radius;vec4 color=atmosphere(normalize(view_direction),scale_camera_pos,u_sun_pos,22.0,EARTH_RADIUS,ATMOS_RADIUS,vec3(5.5e-6,13.0e-6,22.4e-6),21e-6,8e3,1.2e3,0.758
);color.rgb=1.0-exp(-1.0*color.rgb);color=pow(color,vec4(1.0/2.2));fragColor=vec4(color.rgb,1.0-color.a)*u_atmosphere_blend;}`,"in vec2 a_pos;uniform mat4 u_inv_proj_matrix;out vec3 view_direction;void main() {view_direction=(u_inv_proj_matrix*vec4(a_pos,0.0,1.0)).xyz;gl_Position=vec4(a_pos,0.0,1.0);}"),sky:Wr("uniform vec4 u_sky_color;uniform vec4 u_horizon_color;uniform vec2 u_horizon;uniform vec2 u_horizon_normal;uniform float u_sky_horizon_blend;uniform float u_sky_blend;void main() {float x=gl_FragCoord.x;float y=gl_FragCoord.y;float blend=(y-u_horizon.y)*u_horizon_normal.y+(x-u_horizon.x)*u_horizon_normal.x;if (blend > 0.0) {if (blend < u_sky_horizon_blend) {fragColor=mix(u_sky_color,u_horizon_color,pow(1.0-blend/u_sky_horizon_blend,2.0));} else {fragColor=u_sky_color;}}fragColor=mix(fragColor,vec4(vec3(0.0),0.0),u_sky_blend);}","in vec2 a_pos;void main() {gl_Position=vec4(a_pos,1.0,1.0);}")};function Wr(S,s){let d=/#pragma mapbox: ([\w]+) ([\w]+) ([\w]+) ([\w]+)/g,v=s.match(/in ([\w]+) ([\w]+)/g),x=S.match(/uniform ([\w]+) ([\w]+)([\s]*)([\w]*)/g),T=s.match(/uniform ([\w]+) ([\w]+)([\s]*)([\w]*)/g),C=T?T.concat(x):x,R={};return{fragmentSource:S=S.replace(d,(q,B,H,Y,$)=>(R[$]=!0,B==="define"?`
#ifndef HAS_UNIFORM_u_${$}
in ${H} ${Y} ${$};
#else
uniform ${H} ${Y} u_${$};
#endif
`:`
#ifdef HAS_UNIFORM_u_${$}
    ${H} ${Y} ${$} = u_${$};
#endif
`)),vertexSource:s=s.replace(d,(q,B,H,Y,$)=>{let ee=Y==="float"?"vec2":"vec4",ie=$.match(/color/)?"color":ee;return R[$]?B==="define"?`
#ifndef HAS_UNIFORM_u_${$}
uniform lowp float u_${$}_t;
in ${H} ${ee} a_${$};
out ${H} ${Y} ${$};
#else
uniform ${H} ${Y} u_${$};
#endif
`:ie==="vec4"?`
#ifndef HAS_UNIFORM_u_${$}
    ${$} = a_${$};
#else
    ${H} ${Y} ${$} = u_${$};
#endif
`:`
#ifndef HAS_UNIFORM_u_${$}
    ${$} = unpack_mix_${ie}(a_${$}, u_${$}_t);
#else
    ${H} ${Y} ${$} = u_${$};
#endif
`:B==="define"?`
#ifndef HAS_UNIFORM_u_${$}
uniform lowp float u_${$}_t;
in ${H} ${ee} a_${$};
#else
uniform ${H} ${Y} u_${$};
#endif
`:ie==="vec4"?`
#ifndef HAS_UNIFORM_u_${$}
    ${H} ${Y} ${$} = a_${$};
#else
    ${H} ${Y} ${$} = u_${$};
#endif
`:`
#ifndef HAS_UNIFORM_u_${$}
    ${H} ${Y} ${$} = unpack_mix_${ie}(a_${$}, u_${$}_t);
#else
    ${H} ${Y} ${$} = u_${$};
#endif
`}),staticAttributes:v,staticUniforms:C}}class Ai{constructor(s,d,v){this.vertexBuffer=s,this.indexBuffer=d,this.segments=v}destroy(){this.vertexBuffer.destroy(),this.indexBuffer.destroy(),this.segments.destroy(),this.vertexBuffer=null,this.indexBuffer=null,this.segments=null}}var _i=i.aJ([{name:"a_pos",type:"Int16",components:2}]);let Bs="#define PROJECTION_MERCATOR",os="mercator";class gn{constructor(){this._cachedMesh=null}get name(){return"mercator"}get useSubdivision(){return!1}get shaderVariantName(){return os}get shaderDefine(){return Bs}get shaderPreludeCode(){return Vo.projectionMercator}get vertexShaderPreludeCode(){return Vo.projectionMercator.vertexSource}get subdivisionGranularity(){return i.aK.noSubdivision}get useGlobeControls(){return!1}get transitionState(){return 0}get latitudeErrorCorrectionRadians(){return 0}destroy(){}updateGPUdependent(s){}getMeshFromTileID(s,d,v,x,T){if(this._cachedMesh)return this._cachedMesh;let C=new i.aL;C.emplaceBack(0,0),C.emplaceBack(i.$,0),C.emplaceBack(0,i.$),C.emplaceBack(i.$,i.$);let R=s.createVertexBuffer(C,_i.members),q=i.aM.simpleSegment(0,0,4,2),B=new i.aN;B.emplaceBack(1,0,2),B.emplaceBack(1,2,3);let H=s.createIndexBuffer(B);return this._cachedMesh=new Ai(R,H,q),this._cachedMesh}recalculate(){}hasTransition(){return!1}setErrorQueryLatitudeDegrees(s){}}class is{constructor(s=0,d=0,v=0,x=0){if(isNaN(s)||s<0||isNaN(d)||d<0||isNaN(v)||v<0||isNaN(x)||x<0)throw new Error("Invalid value for edge-insets, top, bottom, left and right must all be numbers");this.top=s,this.bottom=d,this.left=v,this.right=x}interpolate(s,d,v){return d.top!=null&&s.top!=null&&(this.top=i.C.number(s.top,d.top,v)),d.bottom!=null&&s.bottom!=null&&(this.bottom=i.C.number(s.bottom,d.bottom,v)),d.left!=null&&s.left!=null&&(this.left=i.C.number(s.left,d.left,v)),d.right!=null&&s.right!=null&&(this.right=i.C.number(s.right,d.right,v)),this}getCenter(s,d){let v=i.ah((this.left+s-this.right)/2,0,s),x=i.ah((this.top+d-this.bottom)/2,0,d);return new i.P(v,x)}equals(s){return this.top===s.top&&this.bottom===s.bottom&&this.left===s.left&&this.right===s.right}clone(){return new is(this.top,this.bottom,this.left,this.right)}toJSON(){return{top:this.top,bottom:this.bottom,left:this.left,right:this.right}}}function Iu(S,s){if(!S.renderWorldCopies||S.lngRange)return;let d=s.lng-S.center.lng;s.lng+=d>180?-360:d<-180?360:0}function Qf(S){return Math.max(0,Math.floor(S))}class ya{constructor(s,d,v,x,T,C){this._callbacks=s,this._tileSize=512,this._renderWorldCopies=C===void 0||!!C,this._minZoom=d||0,this._maxZoom=v||22,this._minPitch=x==null?0:x,this._maxPitch=T==null?60:T,this.setMaxBounds(),this._width=0,this._height=0,this._center=new i.S(0,0),this._elevation=0,this._zoom=0,this._tileZoom=Qf(this._zoom),this._scale=i.af(this._zoom),this._bearingInRadians=0,this._fovInRadians=.6435011087932844,this._pitchInRadians=0,this._rollInRadians=0,this._unmodified=!0,this._edgeInsets=new is,this._minElevationForCurrentTile=0,this._autoCalculateNearFarZ=!0}apply(s,d,v){this._latRange=s.latRange,this._lngRange=s.lngRange,this._width=s.width,this._height=s.height,this._center=s.center,this._elevation=s.elevation,this._minElevationForCurrentTile=s.minElevationForCurrentTile,this._zoom=s.zoom,this._tileZoom=Qf(this._zoom),this._scale=i.af(this._zoom),this._bearingInRadians=s.bearingInRadians,this._fovInRadians=s.fovInRadians,this._pitchInRadians=s.pitchInRadians,this._rollInRadians=s.rollInRadians,this._unmodified=s.unmodified,this._edgeInsets=new is(s.padding.top,s.padding.bottom,s.padding.left,s.padding.right),this._minZoom=s.minZoom,this._maxZoom=s.maxZoom,this._minPitch=s.minPitch,this._maxPitch=s.maxPitch,this._renderWorldCopies=s.renderWorldCopies,this._cameraToCenterDistance=s.cameraToCenterDistance,this._nearZ=s.nearZ,this._farZ=s.farZ,this._autoCalculateNearFarZ=!v&&s.autoCalculateNearFarZ,d&&this._constrain(),this._calcMatrices()}get pixelsToClipSpaceMatrix(){return this._pixelsToClipSpaceMatrix}get clipSpaceToPixelsMatrix(){return this._clipSpaceToPixelsMatrix}get minElevationForCurrentTile(){return this._minElevationForCurrentTile}setMinElevationForCurrentTile(s){this._minElevationForCurrentTile=s}get tileSize(){return this._tileSize}get tileZoom(){return this._tileZoom}get scale(){return this._scale}get width(){return this._width}get height(){return this._height}get bearingInRadians(){return this._bearingInRadians}get lngRange(){return this._lngRange}get latRange(){return this._latRange}get pixelsToGLUnits(){return this._pixelsToGLUnits}get minZoom(){return this._minZoom}setMinZoom(s){this._minZoom!==s&&(this._minZoom=s,this.setZoom(this.getConstrained(this._center,this.zoom).zoom))}get maxZoom(){return this._maxZoom}setMaxZoom(s){this._maxZoom!==s&&(this._maxZoom=s,this.setZoom(this.getConstrained(this._center,this.zoom).zoom))}get minPitch(){return this._minPitch}setMinPitch(s){this._minPitch!==s&&(this._minPitch=s,this.setPitch(Math.max(this.pitch,s)))}get maxPitch(){return this._maxPitch}setMaxPitch(s){this._maxPitch!==s&&(this._maxPitch=s,this.setPitch(Math.min(this.pitch,s)))}get renderWorldCopies(){return this._renderWorldCopies}setRenderWorldCopies(s){s===void 0?s=!0:s===null&&(s=!1),this._renderWorldCopies=s}get worldSize(){return this._tileSize*this._scale}get centerOffset(){return this.centerPoint._sub(this.size._div(2))}get size(){return new i.P(this._width,this._height)}get bearing(){return this._bearingInRadians/Math.PI*180}setBearing(s){let d=i.aO(s,-180,180)*Math.PI/180;var v,x,T,C,R,q,B,H,Y;this._bearingInRadians!==d&&(this._unmodified=!1,this._bearingInRadians=d,this._calcMatrices(),this._rotationMatrix=c(),v=this._rotationMatrix,T=-this._bearingInRadians,C=(x=this._rotationMatrix)[0],R=x[1],q=x[2],B=x[3],H=Math.sin(T),Y=Math.cos(T),v[0]=C*Y+q*H,v[1]=R*Y+B*H,v[2]=C*-H+q*Y,v[3]=R*-H+B*Y)}get rotationMatrix(){return this._rotationMatrix}get pitchInRadians(){return this._pitchInRadians}get pitch(){return this._pitchInRadians/Math.PI*180}setPitch(s){let d=i.ah(s,this.minPitch,this.maxPitch)/180*Math.PI;this._pitchInRadians!==d&&(this._unmodified=!1,this._pitchInRadians=d,this._calcMatrices())}get rollInRadians(){return this._rollInRadians}get roll(){return this._rollInRadians/Math.PI*180}setRoll(s){let d=s/180*Math.PI;this._rollInRadians!==d&&(this._unmodified=!1,this._rollInRadians=d,this._calcMatrices())}get fovInRadians(){return this._fovInRadians}get fov(){return i.aP(this._fovInRadians)}setFov(s){s=i.ah(s,.1,150),this.fov!==s&&(this._unmodified=!1,this._fovInRadians=i.ae(s),this._calcMatrices())}get zoom(){return this._zoom}setZoom(s){let d=this.getConstrained(this._center,s).zoom;this._zoom!==d&&(this._unmodified=!1,this._zoom=d,this._tileZoom=Math.max(0,Math.floor(d)),this._scale=i.af(d),this._constrain(),this._calcMatrices())}get center(){return this._center}setCenter(s){s.lat===this._center.lat&&s.lng===this._center.lng||(this._unmodified=!1,this._center=s,this._constrain(),this._calcMatrices())}get elevation(){return this._elevation}setElevation(s){s!==this._elevation&&(this._elevation=s,this._constrain(),this._calcMatrices())}get padding(){return this._edgeInsets.toJSON()}setPadding(s){this._edgeInsets.equals(s)||(this._unmodified=!1,this._edgeInsets.interpolate(this._edgeInsets,s,1),this._calcMatrices())}get centerPoint(){return this._edgeInsets.getCenter(this._width,this._height)}get pixelsPerMeter(){return this._pixelPerMeter}get unmodified(){return this._unmodified}get cameraToCenterDistance(){return this._cameraToCenterDistance}get nearZ(){return this._nearZ}get farZ(){return this._farZ}get autoCalculateNearFarZ(){return this._autoCalculateNearFarZ}overrideNearFarZ(s,d){this._autoCalculateNearFarZ=!1,this._nearZ=s,this._farZ=d,this._calcMatrices()}clearNearFarZOverride(){this._autoCalculateNearFarZ=!0,this._calcMatrices()}isPaddingEqual(s){return this._edgeInsets.equals(s)}interpolatePadding(s,d,v){this._unmodified=!1,this._edgeInsets.interpolate(s,d,v),this._constrain(),this._calcMatrices()}resize(s,d,v=!0){this._width=s,this._height=d,v&&this._constrain(),this._calcMatrices()}getMaxBounds(){return this._latRange&&this._latRange.length===2&&this._lngRange&&this._lngRange.length===2?new Ot([this._lngRange[0],this._latRange[0]],[this._lngRange[1],this._latRange[1]]):null}setMaxBounds(s){s?(this._lngRange=[s.getWest(),s.getEast()],this._latRange=[s.getSouth(),s.getNorth()],this._constrain()):(this._lngRange=null,this._latRange=[-i.ai,i.ai])}getConstrained(s,d){return this._callbacks.getConstrained(s,d)}getCameraQueryGeometry(s,d){if(d.length===1)return[d[0],s];{let{minX:v,minY:x,maxX:T,maxY:C}=i.a2.fromPoints(d).extend(s);return[new i.P(v,x),new i.P(T,x),new i.P(T,C),new i.P(v,C),new i.P(v,x)]}}_constrain(){if(!this.center||!this._width||!this._height||this._constraining)return;this._constraining=!0;let s=this._unmodified,{center:d,zoom:v}=this.getConstrained(this.center,this.zoom);this.setCenter(d),this.setZoom(v),this._unmodified=s,this._constraining=!1}_calcMatrices(){if(this._width&&this._height){this._pixelsToGLUnits=[2/this._width,-2/this._height];let s=i.ag(new Float64Array(16));i.N(s,s,[this._width/2,-this._height/2,1]),i.M(s,s,[1,-1,0]),this._clipSpaceToPixelsMatrix=s,s=i.ag(new Float64Array(16)),i.N(s,s,[1,-1,1]),i.M(s,s,[-1,-1,0]),i.N(s,s,[2/this._width,2/this._height,1]),this._pixelsToClipSpaceMatrix=s,this._cameraToCenterDistance=.5/Math.tan(this.fovInRadians/2)*this._height}this._callbacks.calcMatrices()}calculateCenterFromCameraLngLatAlt(s,d,v,x){let T=v!==void 0?v:this.bearing,C=x=x!==void 0?x:this.pitch,R=i.a1.fromLngLat(s,d),q=-Math.cos(i.ae(C)),B=Math.sin(i.ae(C)),H=B*Math.sin(i.ae(T)),Y=-B*Math.cos(i.ae(T)),$=this.elevation,ee=d-$,ie;q*ee>=0||Math.abs(q)<.1?(ie=1e4,$=d+ie*q):ie=-ee/q;let ve,ge,ye=i.aQ(1,R.y),Me=0;do{if(Me+=1,Me>10)break;ge=ie/ye,ve=new i.a1(R.x+H*ge,R.y+Y*ge),ye=1/ve.meterInMercatorCoordinateUnits()}while(Math.abs(ie-ge*ye)>1e-12);return{center:ve.toLngLat(),elevation:$,zoom:i.ak(this.height/2/Math.tan(this.fovInRadians/2)/ge/this.tileSize)}}recalculateZoomAndCenter(s){if(this.elevation-s==0)return;let d=i.aj(1,this.center.lat)*this.worldSize,v=this.cameraToCenterDistance/d,x=i.a1.fromLngLat(this.center,this.elevation),T=nt(this.center,this.elevation,this.pitch,this.bearing,v);this._elevation=s;let C=this.calculateCenterFromCameraLngLatAlt(T.toLngLat(),i.aQ(T.z,x.y),this.bearing,this.pitch);this._elevation=C.elevation,this._center=C.center,this.setZoom(C.zoom)}getCameraPoint(){let s=Math.tan(this.pitchInRadians)*(this.cameraToCenterDistance||1);return this.centerPoint.add(new i.P(s*Math.sin(this.rollInRadians),s*Math.cos(this.rollInRadians)))}getCameraAltitude(){return Math.cos(this.pitchInRadians)*this._cameraToCenterDistance/this._pixelPerMeter+this.elevation}getCameraLngLat(){let s=i.aj(1,this.center.lat)*this.worldSize;return nt(this.center,this.elevation,this.pitch,this.bearing,this.cameraToCenterDistance/s).toLngLat()}getMercatorTileCoordinates(s){if(!s)return[0,0,1,1];let d=s.canonical.z>=0?1<<s.canonical.z:Math.pow(2,s.canonical.z);return[s.canonical.x/d,s.canonical.y/d,1/d/i.$,1/d/i.$]}}class as{constructor(s,d){this.min=s,this.max=d,this.center=i.aR([],i.aS([],this.min,this.max),.5)}quadrant(s){let d=[s%2==0,s<2],v=i.aT(this.min),x=i.aT(this.max);for(let T=0;T<d.length;T++)v[T]=d[T]?this.min[T]:this.center[T],x[T]=d[T]?this.center[T]:this.max[T];return x[2]=this.max[2],new as(v,x)}distanceX(s){return Math.max(Math.min(this.max[0],s[0]),this.min[0])-s[0]}distanceY(s){return Math.max(Math.min(this.max[1],s[1]),this.min[1])-s[1]}intersectsFrustum(s){let d=!0;for(let v=0;v<s.planes.length;v++){let x=this.intersectsPlane(s.planes[v]);if(x===0)return 0;x===1&&(d=!1)}return d?2:s.aabb.min[0]>this.max[0]||s.aabb.min[1]>this.max[1]||s.aabb.min[2]>this.max[2]||s.aabb.max[0]<this.min[0]||s.aabb.max[1]<this.min[1]||s.aabb.max[2]<this.min[2]?0:1}intersectsPlane(s){let d=s[3],v=s[3];for(let x=0;x<3;x++)s[x]>0?(d+=s[x]*this.min[x],v+=s[x]*this.max[x]):(v+=s[x]*this.min[x],d+=s[x]*this.max[x]);return d>=0?2:v<0?0:1}}class Zi{distanceToTile2d(s,d,v,x){let T=x.distanceX([s,d]),C=x.distanceY([s,d]);return Math.hypot(T,C)}getWrap(s,d,v){return v}getTileBoundingVolume(s,d,v,x){var T,C;let R=0,q=0;if(x!=null&&x.terrain){let H=new i.Z(s.z,d,s.z,s.x,s.y),Y=x.terrain.getMinMaxElevation(H);R=(T=Y.minElevation)!==null&&T!==void 0?T:Math.min(0,v),q=(C=Y.maxElevation)!==null&&C!==void 0?C:Math.max(0,v)}let B=1<<s.z;return new as([d+s.x/B,s.y/B,R],[d+(s.x+1)/B,(s.y+1)/B,q])}allowVariableZoom(s,d){let v=s.fov*(Math.abs(Math.cos(s.rollInRadians))*s.height+Math.abs(Math.sin(s.rollInRadians))*s.width)/s.height,x=i.ah(78.5-v/2,0,60);return!!d.terrain||s.pitch>x}allowWorldCopies(){return!0}prepareNextFrame(){}}class Oi{constructor(s,d,v){this.points=s,this.planes=d,this.aabb=v}static fromInvProjectionMatrix(s,d=1,v=0,x,T){let C=T?[[6,5,4],[0,1,2],[0,3,7],[2,1,5],[3,2,6],[0,4,5]]:[[0,1,2],[6,5,4],[0,3,7],[2,1,5],[3,2,6],[0,4,5]],R=Math.pow(2,v),q=[[-1,1,-1,1],[1,1,-1,1],[1,-1,-1,1],[-1,-1,-1,1],[-1,1,1,1],[1,1,1,1],[1,-1,1,1],[-1,-1,1,1]].map($=>function(ee,ie,ve,ge){let ye=i.aw([],ee,ie),Me=1/ye[3]/ve*ge;return i.aY(ye,ye,[Me,Me,1/ye[3],Me])}($,s,d,R));x&&function($,ee,ie,ve){let ge=ve?4:0,ye=ve?0:4,Me=0,Re=[],Pe=[];for(let Le=0;Le<4;Le++){let Qe=i.aU([],$[Le+ye],$[Le+ge]),ht=i.aZ(Qe);i.aR(Qe,Qe,1/ht),Re.push(ht),Pe.push(Qe)}for(let Le=0;Le<4;Le++){let Qe=i.a_($[Le+ge],Pe[Le],ie);Me=Qe!==null&&Qe>=0?Math.max(Me,Qe):Math.max(Me,Re[Le])}let ze=function(Le,Qe){let ht=i.aU([],Le[Qe[0]],Le[Qe[1]]),it=i.aU([],Le[Qe[2]],Le[Qe[1]]),at=[0,0,0,0];return i.aV(at,i.aW([],ht,it)),at[3]=-i.aX(at,Le[Qe[0]]),at}($,ee),He=function(Le,Qe){let ht=i.a$(Le),it=i.b0([],Le,1/ht),at=i.aU([],Qe,i.aR([],it,i.aX(Qe,it))),dt=i.a$(at);if(dt>0){let Vt=Math.sqrt(1-it[3]*it[3]),$t=i.aR([],it,-it[3]),Nt=i.aS([],$t,i.aR([],at,Vt/dt));return i.b1(Qe,Nt)}return null}(ie,ze);if(He!==null){let Le=He/i.aX(Pe[0],ze);Me=Math.min(Me,Le)}for(let Le=0;Le<4;Le++){let Qe=Math.min(Me,Re[Le]);$[Le+ye]=[$[Le+ge][0]+Pe[Le][0]*Qe,$[Le+ge][1]+Pe[Le][1]*Qe,$[Le+ge][2]+Pe[Le][2]*Qe,1]}}(q,C[0],x,T);let B=C.map($=>{let ee=i.aU([],q[$[0]],q[$[1]]),ie=i.aU([],q[$[2]],q[$[1]]),ve=i.aV([],i.aW([],ee,ie)),ge=-i.aX(ve,q[$[1]]);return ve.concat(ge)}),H=[Number.POSITIVE_INFINITY,Number.POSITIVE_INFINITY,Number.POSITIVE_INFINITY],Y=[Number.NEGATIVE_INFINITY,Number.NEGATIVE_INFINITY,Number.NEGATIVE_INFINITY];for(let $ of q)for(let ee=0;ee<3;ee++)H[ee]=Math.min(H[ee],$[ee]),Y[ee]=Math.max(Y[ee],$[ee]);return new Oi(q,B,new as(H,Y))}}class zo{get pixelsToClipSpaceMatrix(){return this._helper.pixelsToClipSpaceMatrix}get clipSpaceToPixelsMatrix(){return this._helper.clipSpaceToPixelsMatrix}get pixelsToGLUnits(){return this._helper.pixelsToGLUnits}get centerOffset(){return this._helper.centerOffset}get size(){return this._helper.size}get rotationMatrix(){return this._helper.rotationMatrix}get centerPoint(){return this._helper.centerPoint}get pixelsPerMeter(){return this._helper.pixelsPerMeter}setMinZoom(s){this._helper.setMinZoom(s)}setMaxZoom(s){this._helper.setMaxZoom(s)}setMinPitch(s){this._helper.setMinPitch(s)}setMaxPitch(s){this._helper.setMaxPitch(s)}setRenderWorldCopies(s){this._helper.setRenderWorldCopies(s)}setBearing(s){this._helper.setBearing(s)}setPitch(s){this._helper.setPitch(s)}setRoll(s){this._helper.setRoll(s)}setFov(s){this._helper.setFov(s)}setZoom(s){this._helper.setZoom(s)}setCenter(s){this._helper.setCenter(s)}setElevation(s){this._helper.setElevation(s)}setMinElevationForCurrentTile(s){this._helper.setMinElevationForCurrentTile(s)}setPadding(s){this._helper.setPadding(s)}interpolatePadding(s,d,v){return this._helper.interpolatePadding(s,d,v)}isPaddingEqual(s){return this._helper.isPaddingEqual(s)}resize(s,d,v=!0){this._helper.resize(s,d,v)}getMaxBounds(){return this._helper.getMaxBounds()}setMaxBounds(s){this._helper.setMaxBounds(s)}overrideNearFarZ(s,d){this._helper.overrideNearFarZ(s,d)}clearNearFarZOverride(){this._helper.clearNearFarZOverride()}getCameraQueryGeometry(s){return this._helper.getCameraQueryGeometry(this.getCameraPoint(),s)}get tileSize(){return this._helper.tileSize}get tileZoom(){return this._helper.tileZoom}get scale(){return this._helper.scale}get worldSize(){return this._helper.worldSize}get width(){return this._helper.width}get height(){return this._helper.height}get lngRange(){return this._helper.lngRange}get latRange(){return this._helper.latRange}get minZoom(){return this._helper.minZoom}get maxZoom(){return this._helper.maxZoom}get zoom(){return this._helper.zoom}get center(){return this._helper.center}get minPitch(){return this._helper.minPitch}get maxPitch(){return this._helper.maxPitch}get pitch(){return this._helper.pitch}get pitchInRadians(){return this._helper.pitchInRadians}get roll(){return this._helper.roll}get rollInRadians(){return this._helper.rollInRadians}get bearing(){return this._helper.bearing}get bearingInRadians(){return this._helper.bearingInRadians}get fov(){return this._helper.fov}get fovInRadians(){return this._helper.fovInRadians}get elevation(){return this._helper.elevation}get minElevationForCurrentTile(){return this._helper.minElevationForCurrentTile}get padding(){return this._helper.padding}get unmodified(){return this._helper.unmodified}get renderWorldCopies(){return this._helper.renderWorldCopies}get cameraToCenterDistance(){return this._helper.cameraToCenterDistance}get nearZ(){return this._helper.nearZ}get farZ(){return this._helper.farZ}get autoCalculateNearFarZ(){return this._helper.autoCalculateNearFarZ}setTransitionState(s,d){}constructor(s,d,v,x,T){this._posMatrixCache=new Map,this._alignedPosMatrixCache=new Map,this._fogMatrixCacheF32=new Map,this._helper=new ya({calcMatrices:()=>{this._calcMatrices()},getConstrained:(C,R)=>this.getConstrained(C,R)},s,d,v,x,T),this._coveringTilesDetailsProvider=new Zi}clone(){let s=new zo;return s.apply(this),s}apply(s,d,v){this._helper.apply(s,d,v)}get cameraPosition(){return this._cameraPosition}get projectionMatrix(){return this._projectionMatrix}get modelViewProjectionMatrix(){return this._viewProjMatrix}get inverseProjectionMatrix(){return this._invProjMatrix}get mercatorMatrix(){return this._mercatorMatrix}getVisibleUnwrappedCoordinates(s){let d=[new i.b2(0,s)];if(this._helper._renderWorldCopies){let v=this.screenPointToMercatorCoordinate(new i.P(0,0)),x=this.screenPointToMercatorCoordinate(new i.P(this._helper._width,0)),T=this.screenPointToMercatorCoordinate(new i.P(this._helper._width,this._helper._height)),C=this.screenPointToMercatorCoordinate(new i.P(0,this._helper._height)),R=Math.floor(Math.min(v.x,x.x,T.x,C.x)),q=Math.floor(Math.max(v.x,x.x,T.x,C.x)),B=1;for(let H=R-B;H<=q+B;H++)H!==0&&d.push(new i.b2(H,s))}return d}getCameraFrustum(){return Oi.fromInvProjectionMatrix(this._invViewProjMatrix,this.worldSize)}getClippingPlane(){return null}getCoveringTilesDetailsProvider(){return this._coveringTilesDetailsProvider}recalculateZoomAndCenter(s){let d=this.screenPointToLocation(this.centerPoint,s),v=s?s.getElevationForLngLatZoom(d,this._helper._tileZoom):0;this._helper.recalculateZoomAndCenter(v)}setLocationAtPoint(s,d){let v=i.aj(this.elevation,this.center.lat),x=this.screenPointToMercatorCoordinateAtZ(d,v),T=this.screenPointToMercatorCoordinateAtZ(this.centerPoint,v),C=i.a1.fromLngLat(s),R=new i.a1(C.x-(x.x-T.x),C.y-(x.y-T.y));this.setCenter(R==null?void 0:R.toLngLat()),this._helper._renderWorldCopies&&this.setCenter(this.center.wrap())}locationToScreenPoint(s,d){return d?this.coordinatePoint(i.a1.fromLngLat(s),d.getElevationForLngLatZoom(s,this._helper._tileZoom),this._pixelMatrix3D):this.coordinatePoint(i.a1.fromLngLat(s))}screenPointToLocation(s,d){var v;return(v=this.screenPointToMercatorCoordinate(s,d))===null||v===void 0?void 0:v.toLngLat()}screenPointToMercatorCoordinate(s,d){if(d){let v=d.pointCoordinate(s);if(v!=null)return v}return this.screenPointToMercatorCoordinateAtZ(s)}screenPointToMercatorCoordinateAtZ(s,d){let v=d||0,x=[s.x,s.y,0,1],T=[s.x,s.y,1,1];i.aw(x,x,this._pixelMatrixInverse),i.aw(T,T,this._pixelMatrixInverse);let C=x[3],R=T[3],q=x[1]/C,B=T[1]/R,H=x[2]/C,Y=T[2]/R,$=H===Y?0:(v-H)/(Y-H);return new i.a1(i.C.number(x[0]/C,T[0]/R,$)/this.worldSize,i.C.number(q,B,$)/this.worldSize,v)}coordinatePoint(s,d=0,v=this._pixelMatrix){let x=[s.x*this.worldSize,s.y*this.worldSize,d,1];return i.aw(x,x,v),new i.P(x[0]/x[3],x[1]/x[3])}getBounds(){let s=Math.max(0,this._helper._height/2-Fe(this));return new Ot().extend(this.screenPointToLocation(new i.P(0,s))).extend(this.screenPointToLocation(new i.P(this._helper._width,s))).extend(this.screenPointToLocation(new i.P(this._helper._width,this._helper._height))).extend(this.screenPointToLocation(new i.P(0,this._helper._height)))}isPointOnMapSurface(s,d){return d?d.pointCoordinate(s)!=null:s.y>this.height/2-Fe(this)}calculatePosMatrix(s,d=!1,v){var x;let T=(x=s.key)!==null&&x!==void 0?x:i.b3(s.wrap,s.canonical.z,s.canonical.z,s.canonical.x,s.canonical.y),C=d?this._alignedPosMatrixCache:this._posMatrixCache;if(C.has(T)){let B=C.get(T);return v?B.f32:B.f64}let R=$e(s,this.worldSize);i.O(R,d?this._alignedProjMatrix:this._viewProjMatrix,R);let q={f64:R,f32:new Float32Array(R)};return C.set(T,q),v?q.f32:q.f64}calculateFogMatrix(s){let d=s.key,v=this._fogMatrixCacheF32;if(v.has(d))return v.get(d);let x=$e(s,this.worldSize);return i.O(x,this._fogMatrix,x),v.set(d,new Float32Array(x)),v.get(d)}getConstrained(s,d){d=i.ah(+d,this.minZoom,this.maxZoom);let v={center:new i.S(s.lng,s.lat),zoom:d},x=this._helper._lngRange;if(!this._helper._renderWorldCopies&&x===null){let Re=179.9999999999;x=[-Re,Re]}let T=this.tileSize*i.af(v.zoom),C=0,R=T,q=0,B=T,H=0,Y=0,{x:$,y:ee}=this.size;if(this._helper._latRange){let Re=this._helper._latRange;C=i.U(Re[1])*T,R=i.U(Re[0])*T,R-C<ee&&(H=ee/(R-C))}x&&(q=i.aO(i.V(x[0])*T,0,T),B=i.aO(i.V(x[1])*T,0,T),B<q&&(B+=T),B-q<$&&(Y=$/(B-q)));let{x:ie,y:ve}=ue(T,s),ge,ye,Me=Math.max(Y||0,H||0);if(Me){let Re=new i.P(Y?(B+q)/2:ie,H?(R+C)/2:ve);return v.center=we(T,Re).wrap(),v.zoom+=i.ak(Me),v}if(this._helper._latRange){let Re=ee/2;ve-Re<C&&(ye=C+Re),ve+Re>R&&(ye=R-Re)}if(x){let Re=(q+B)/2,Pe=ie;this._helper._renderWorldCopies&&(Pe=i.aO(ie,Re-T/2,Re+T/2));let ze=$/2;Pe-ze<q&&(ge=q+ze),Pe+ze>B&&(ge=B-ze)}if(ge!==void 0||ye!==void 0){let Re=new i.P(ge!=null?ge:ie,ye!=null?ye:ve);v.center=we(T,Re).wrap()}return v}calculateCenterFromCameraLngLatAlt(s,d,v,x){return this._helper.calculateCenterFromCameraLngLatAlt(s,d,v,x)}_calculateNearFarZIfNeeded(s,d,v){if(!this._helper.autoCalculateNearFarZ)return;let x=Math.min(this.elevation,this.minElevationForCurrentTile,this.getCameraAltitude()-100),T=s-x*this._helper._pixelPerMeter/Math.cos(d),C=x<0?T:s,R=Math.PI/2+this.pitchInRadians,q=i.ae(this.fov)*(Math.abs(Math.cos(i.ae(this.roll)))*this.height+Math.abs(Math.sin(i.ae(this.roll)))*this.width)/this.height*(.5+v.y/this.height),B=Math.sin(q)*C/Math.sin(i.ah(Math.PI-R-q,.01,Math.PI-.01)),H=Fe(this),Y=Math.atan(H/this._helper.cameraToCenterDistance),$=i.ae(.75),ee=Y>$?2*Y*(.5+v.y/(2*H)):$,ie=Math.sin(ee)*C/Math.sin(i.ah(Math.PI-R-ee,.01,Math.PI-.01)),ve=Math.min(B,ie);this._helper._farZ=1.01*(Math.cos(Math.PI/2-d)*ve+C),this._helper._nearZ=this._helper._height/50}_calcMatrices(){if(!this._helper._height)return;let s=this.centerOffset,d=ue(this.worldSize,this.center),v=d.x,x=d.y;this._helper._pixelPerMeter=i.aj(1,this.center.lat)*this.worldSize;let T=i.ae(Math.min(this.pitch,oe)),C=Math.max(this._helper.cameraToCenterDistance/2,this._helper.cameraToCenterDistance+this._helper._elevation*this._helper._pixelPerMeter/Math.cos(T)),R;this._calculateNearFarZIfNeeded(C,T,s),R=new Float64Array(16),i.b4(R,this.fovInRadians,this._helper._width/this._helper._height,this._helper._nearZ,this._helper._farZ),this._invProjMatrix=new Float64Array(16),i.aq(this._invProjMatrix,R),R[8]=2*-s.x/this._helper._width,R[9]=2*s.y/this._helper._height,this._projectionMatrix=i.b5(R),i.N(R,R,[1,-1,1]),i.M(R,R,[0,0,-this._helper.cameraToCenterDistance]),i.b6(R,R,-this.rollInRadians),i.b7(R,R,this.pitchInRadians),i.b6(R,R,-this.bearingInRadians),i.M(R,R,[-v,-x,0]),this._mercatorMatrix=i.N([],R,[this.worldSize,this.worldSize,this.worldSize]),i.N(R,R,[1,1,this._helper._pixelPerMeter]),this._pixelMatrix=i.O(new Float64Array(16),this.clipSpaceToPixelsMatrix,R),i.M(R,R,[0,0,-this.elevation]),this._viewProjMatrix=R,this._invViewProjMatrix=i.aq([],R);let q=[0,0,-1,1];i.aw(q,q,this._invViewProjMatrix),this._cameraPosition=[q[0]/q[3],q[1]/q[3],q[2]/q[3]],this._fogMatrix=new Float64Array(16),i.b4(this._fogMatrix,this.fovInRadians,this.width/this.height,C,this._helper._farZ),this._fogMatrix[8]=2*-s.x/this.width,this._fogMatrix[9]=2*s.y/this.height,i.N(this._fogMatrix,this._fogMatrix,[1,-1,1]),i.M(this._fogMatrix,this._fogMatrix,[0,0,-this.cameraToCenterDistance]),i.b6(this._fogMatrix,this._fogMatrix,-this.rollInRadians),i.b7(this._fogMatrix,this._fogMatrix,this.pitchInRadians),i.b6(this._fogMatrix,this._fogMatrix,-this.bearingInRadians),i.M(this._fogMatrix,this._fogMatrix,[-v,-x,0]),i.N(this._fogMatrix,this._fogMatrix,[1,1,this._helper._pixelPerMeter]),i.M(this._fogMatrix,this._fogMatrix,[0,0,-this.elevation]),this._pixelMatrix3D=i.O(new Float64Array(16),this.clipSpaceToPixelsMatrix,R);let B=this._helper._width%2/2,H=this._helper._height%2/2,Y=Math.cos(this.bearingInRadians),$=Math.sin(-this.bearingInRadians),ee=v-Math.round(v)+Y*B+$*H,ie=x-Math.round(x)+Y*H+$*B,ve=new Float64Array(R);if(i.M(ve,ve,[ee>.5?ee-1:ee,ie>.5?ie-1:ie,0]),this._alignedProjMatrix=ve,R=i.aq(new Float64Array(16),this._pixelMatrix),!R)throw new Error("failed to invert matrix");this._pixelMatrixInverse=R,this._clearMatrixCaches()}_clearMatrixCaches(){this._posMatrixCache.clear(),this._alignedPosMatrixCache.clear(),this._fogMatrixCacheF32.clear()}maxPitchScaleFactor(){if(!this._pixelMatrixInverse)return 1;let s=this.screenPointToMercatorCoordinate(new i.P(0,0)),d=[s.x*this.worldSize,s.y*this.worldSize,0,1];return i.aw(d,d,this._pixelMatrix)[3]/this._helper.cameraToCenterDistance}getCameraPoint(){return this._helper.getCameraPoint()}getCameraAltitude(){return this._helper.getCameraAltitude()}getCameraLngLat(){let s=i.aj(1,this.center.lat)*this.worldSize;return nt(this.center,this.elevation,this.pitch,this.bearing,this._helper.cameraToCenterDistance/s).toLngLat()}lngLatToCameraDepth(s,d){let v=i.a1.fromLngLat(s),x=[v.x*this.worldSize,v.y*this.worldSize,d,1];return i.aw(x,x,this._viewProjMatrix),x[2]/x[3]}getProjectionData(s){let{overscaledTileID:d,aligned:v,applyTerrainMatrix:x}=s,T=this._helper.getMercatorTileCoordinates(d),C=d?this.calculatePosMatrix(d,v,!0):null,R;return R=d&&d.terrainRttPosMatrix32f&&x?d.terrainRttPosMatrix32f:C||i.b8(),{mainMatrix:R,tileMercatorCoords:T,clippingPlane:[0,0,0,0],projectionTransition:0,fallbackMatrix:R}}isLocationOccluded(s){return!1}getPixelScale(){return 1}getCircleRadiusCorrection(){return 1}getPitchedTextCorrection(s,d,v){return 1}transformLightDirection(s){return i.aT(s)}getRayDirectionFromPixel(s){throw new Error("Not implemented.")}projectTileCoordinates(s,d,v,x){let T=this.calculatePosMatrix(v),C;x?(C=[s,d,x(s,d),1],i.aw(C,C,T)):(C=[s,d,0,1],Gr(C,C,T));let R=C[3];return{point:new i.P(C[0]/R,C[1]/R),signedDistanceFromCamera:R,isOccluded:!1}}populateCache(s){for(let d of s)this.calculatePosMatrix(d)}getMatrixForModel(s,d){let v=i.a1.fromLngLat(s,d),x=v.meterInMercatorCoordinateUnits(),T=i.b9();return i.M(T,T,[v.x,v.y,v.z]),i.b6(T,T,Math.PI),i.b7(T,T,Math.PI/2),i.N(T,T,[-x,x,x]),T}getProjectionDataForCustomLayer(s=!0){let d=new i.Z(0,0,0,0,0),v=this.getProjectionData({overscaledTileID:d,applyGlobeMatrix:s}),x=$e(d,this.worldSize);i.O(x,this._viewProjMatrix,x),v.tileMercatorCoords=[0,0,1,1];let T=[i.$,i.$,this.worldSize/this._helper.pixelsPerMeter],C=i.ba();return i.N(C,x,T),v.fallbackMatrix=C,v.mainMatrix=C,v}getFastPathSimpleProjectionMatrix(s){return this.calculatePosMatrix(s)}}function px(){i.w("Map cannot fit within canvas with the given bounds, padding, and/or offset.")}function hl(S){if(S.useSlerp){if(S.k<1){let s=i.bb(S.startEulerAngles.roll,S.startEulerAngles.pitch,S.startEulerAngles.bearing),d=i.bb(S.endEulerAngles.roll,S.endEulerAngles.pitch,S.endEulerAngles.bearing),v=new Float64Array(4);i.bc(v,s,d,S.k);let x=i.bd(v);S.tr.setRoll(x.roll),S.tr.setPitch(x.pitch),S.tr.setBearing(x.bearing)}else S.tr.setRoll(S.endEulerAngles.roll),S.tr.setPitch(S.endEulerAngles.pitch),S.tr.setBearing(S.endEulerAngles.bearing);}else S.tr.setRoll(i.C.number(S.startEulerAngles.roll,S.endEulerAngles.roll,S.k)),S.tr.setPitch(i.C.number(S.startEulerAngles.pitch,S.endEulerAngles.pitch,S.k)),S.tr.setBearing(i.C.number(S.startEulerAngles.bearing,S.endEulerAngles.bearing,S.k))}function Vs(S,s,d,v,x){let T=x.padding,C=ue(x.worldSize,d.getNorthWest()),R=ue(x.worldSize,d.getNorthEast()),q=ue(x.worldSize,d.getSouthEast()),B=ue(x.worldSize,d.getSouthWest()),H=i.ae(-v),Y=C.rotate(H),$=R.rotate(H),ee=q.rotate(H),ie=B.rotate(H),ve=new i.P(Math.max(Y.x,$.x,ie.x,ee.x),Math.max(Y.y,$.y,ie.y,ee.y)),ge=new i.P(Math.min(Y.x,$.x,ie.x,ee.x),Math.min(Y.y,$.y,ie.y,ee.y)),ye=ve.sub(ge),Me=(x.width-(T.left+T.right+s.left+s.right))/ye.x,Re=(x.height-(T.top+T.bottom+s.top+s.bottom))/ye.y;if(Re<0||Me<0)return void px();let Pe=Math.min(i.ak(x.scale*Math.min(Me,Re)),S.maxZoom),ze=i.P.convert(S.offset),He=new i.P((s.left-s.right)/2,(s.top-s.bottom)/2).rotate(i.ae(v)),Le=ze.add(He).mult(x.scale/i.af(Pe));return{center:we(x.worldSize,C.add(q).div(2).sub(Le)),zoom:Pe,bearing:v}}class Gs{get useGlobeControls(){return!1}handlePanInertia(s,d){let v=s.mag(),x=Math.abs(Fe(d));return{easingOffset:s.mult(Math.min(.75*x/v,1)),easingCenter:d.center}}handleMapControlsRollPitchBearingZoom(s,d){s.bearingDelta&&d.setBearing(d.bearing+s.bearingDelta),s.pitchDelta&&d.setPitch(d.pitch+s.pitchDelta),s.rollDelta&&d.setRoll(d.roll+s.rollDelta),s.zoomDelta&&d.setZoom(d.zoom+s.zoomDelta)}handleMapControlsPan(s,d,v){s.around.distSqr(d.centerPoint)<.01||d.setLocationAtPoint(v,s.around)}cameraForBoxAndBearing(s,d,v,x,T){return Vs(s,d,v,x,T)}handleJumpToCenterZoom(s,d){s.zoom!==(d.zoom!==void 0?+d.zoom:s.zoom)&&s.setZoom(+d.zoom),d.center!==void 0&&s.setCenter(i.S.convert(d.center))}handleEaseTo(s,d){let v=s.zoom,x=s.padding,T={roll:s.roll,pitch:s.pitch,bearing:s.bearing},C={roll:d.roll===void 0?s.roll:d.roll,pitch:d.pitch===void 0?s.pitch:d.pitch,bearing:d.bearing===void 0?s.bearing:d.bearing},R=d.zoom!==void 0,q=!s.isPaddingEqual(d.padding),B=!1,H=R?+d.zoom:s.zoom,Y=s.centerPoint.add(d.offsetAsPoint),$=s.screenPointToLocation(Y),{center:ee,zoom:ie}=s.getConstrained(i.S.convert(d.center||$),H!=null?H:v);Iu(s,ee);let ve=ue(s.worldSize,$),ge=ue(s.worldSize,ee).sub(ve),ye=i.af(ie-v);return B=ie!==v,{easeFunc:Me=>{if(B&&s.setZoom(i.C.number(v,ie,Me)),i.be(T,C)||hl({startEulerAngles:T,endEulerAngles:C,tr:s,k:Me,useSlerp:T.roll!=C.roll}),q&&(s.interpolatePadding(x,d.padding,Me),Y=s.centerPoint.add(d.offsetAsPoint)),d.around)s.setLocationAtPoint(d.around,d.aroundPoint);else{let Re=i.af(s.zoom-v),Pe=ie>v?Math.min(2,ye):Math.max(.5,ye),ze=Math.pow(Pe,1-Me),He=we(s.worldSize,ve.add(ge.mult(Me*ze)).mult(Re));s.setLocationAtPoint(s.renderWorldCopies?He.wrap():He,Y)}},isZooming:B,elevationCenter:ee}}handleFlyTo(s,d){let v=d.zoom!==void 0,x=s.zoom,T=s.getConstrained(i.S.convert(d.center||d.locationAtOffset),v?+d.zoom:x),C=T.center,R=T.zoom;Iu(s,C);let q=ue(s.worldSize,d.locationAtOffset),B=ue(s.worldSize,C).sub(q),H=B.mag(),Y=i.af(R-x),$;if(d.minZoom!==void 0){let ee=Math.min(+d.minZoom,x,R),ie=s.getConstrained(C,ee).zoom;$=i.af(ie-x)}return{easeFunc:(ee,ie,ve,ge)=>{s.setZoom(ee===1?R:x+i.ak(ie));let ye=ee===1?C:we(s.worldSize,q.add(B.mult(ve)).mult(ie));s.setLocationAtPoint(s.renderWorldCopies?ye.wrap():ye,ge)},scaleOfZoom:Y,targetCenter:C,scaleOfMinZoom:$,pixelPathLength:H}}}class bi{constructor(s,d,v){this.blendFunction=s,this.blendColor=d,this.mask=v}}bi.Replace=[1,0],bi.disabled=new bi(bi.Replace,i.bf.transparent,[!1,!1,!1,!1]),bi.unblended=new bi(bi.Replace,i.bf.transparent,[!0,!0,!0,!0]),bi.alphaBlended=new bi([1,771],i.bf.transparent,[!0,!0,!0,!0]);let Bm=2305;class Xr{constructor(s,d,v){this.enable=s,this.mode=d,this.frontFace=v}}Xr.disabled=new Xr(!1,1029,Bm),Xr.backCCW=new Xr(!0,1029,Bm),Xr.frontCCW=new Xr(!0,1028,Bm);class wn{constructor(s,d,v){this.func=s,this.mask=d,this.range=v}}wn.ReadOnly=!1,wn.ReadWrite=!0,wn.disabled=new wn(519,wn.ReadOnly,[0,1]);let ed=7680;class uo{constructor(s,d,v,x,T,C){this.test=s,this.ref=d,this.mask=v,this.fail=x,this.depthFail=T,this.pass=C}}uo.disabled=new uo({func:519,mask:0},0,0,ed,ed,ed);let Mu=new WeakMap;function Rp(S){var s;if(Mu.has(S))return Mu.get(S);{let d=(s=S.getParameter(S.VERSION))===null||s===void 0?void 0:s.startsWith("WebGL 2.0");return Mu.set(S,d),d}}class jp{get awaitingQuery(){return!!this._readbackQueue}constructor(s){this._readbackWaitFrames=4,this._measureWaitFrames=6,this._texWidth=1,this._texHeight=1,this._measuredError=0,this._updateCount=0,this._lastReadbackFrame=-1e3,this._readbackQueue=null,this._cachedRenderContext=s;let d=s.context,v=d.gl;this._texFormat=v.RGBA,this._texType=v.UNSIGNED_BYTE;let x=new i.aL;x.emplaceBack(-1,-1),x.emplaceBack(2,-1),x.emplaceBack(-1,2);let T=new i.aN;T.emplaceBack(0,1,2),this._fullscreenTriangle=new Ai(d.createVertexBuffer(x,_i.members),d.createIndexBuffer(T),i.aM.simpleSegment(0,0,x.length,T.length)),this._resultBuffer=new Uint8Array(4),d.activeTexture.set(v.TEXTURE1);let C=v.createTexture();v.bindTexture(v.TEXTURE_2D,C),v.texParameteri(v.TEXTURE_2D,v.TEXTURE_WRAP_S,v.CLAMP_TO_EDGE),v.texParameteri(v.TEXTURE_2D,v.TEXTURE_WRAP_T,v.CLAMP_TO_EDGE),v.texParameteri(v.TEXTURE_2D,v.TEXTURE_MIN_FILTER,v.NEAREST),v.texParameteri(v.TEXTURE_2D,v.TEXTURE_MAG_FILTER,v.NEAREST),v.texImage2D(v.TEXTURE_2D,0,this._texFormat,this._texWidth,this._texHeight,0,this._texFormat,this._texType,null),this._fbo=d.createFramebuffer(this._texWidth,this._texHeight,!1,!1),this._fbo.colorAttachment.set(C),Rp(v)&&(this._pbo=v.createBuffer(),v.bindBuffer(v.PIXEL_PACK_BUFFER,this._pbo),v.bufferData(v.PIXEL_PACK_BUFFER,4,v.STREAM_READ),v.bindBuffer(v.PIXEL_PACK_BUFFER,null))}destroy(){let s=this._cachedRenderContext.context.gl;this._fullscreenTriangle.destroy(),this._fbo.destroy(),s.deleteBuffer(this._pbo),this._fullscreenTriangle=null,this._fbo=null,this._pbo=null,this._resultBuffer=null}updateErrorLoop(s,d){let v=this._updateCount;return this._readbackQueue?v>=this._readbackQueue.frameNumberIssued+this._readbackWaitFrames&&this._tryReadback():v>=this._lastReadbackFrame+this._measureWaitFrames&&this._renderErrorTexture(s,d),this._updateCount++,this._measuredError}_bindFramebuffer(){let s=this._cachedRenderContext.context,d=s.gl;s.activeTexture.set(d.TEXTURE1),d.bindTexture(d.TEXTURE_2D,this._fbo.colorAttachment.get()),s.bindFramebuffer.set(this._fbo.framebuffer)}_renderErrorTexture(s,d){let v=this._cachedRenderContext.context,x=v.gl;if(this._bindFramebuffer(),v.viewport.set([0,0,this._texWidth,this._texHeight]),v.clear({color:i.bf.transparent}),this._cachedRenderContext.useProgram("projectionErrorMeasurement").draw(v,x.TRIANGLES,wn.disabled,uo.disabled,bi.unblended,Xr.disabled,((T,C)=>({u_input:T,u_output_expected:C}))(s,d),null,null,"$clipping",this._fullscreenTriangle.vertexBuffer,this._fullscreenTriangle.indexBuffer,this._fullscreenTriangle.segments),this._pbo&&Rp(x)){x.bindBuffer(x.PIXEL_PACK_BUFFER,this._pbo),x.readBuffer(x.COLOR_ATTACHMENT0),x.readPixels(0,0,this._texWidth,this._texHeight,this._texFormat,this._texType,0),x.bindBuffer(x.PIXEL_PACK_BUFFER,null);let T=x.fenceSync(x.SYNC_GPU_COMMANDS_COMPLETE,0);x.flush(),this._readbackQueue={frameNumberIssued:this._updateCount,sync:T}}else this._readbackQueue={frameNumberIssued:this._updateCount,sync:null}}_tryReadback(){let s=this._cachedRenderContext.context.gl;if(this._pbo&&this._readbackQueue&&Rp(s)){let d=s.clientWaitSync(this._readbackQueue.sync,0,0);if(d===s.WAIT_FAILED)return i.w("WebGL2 clientWaitSync failed."),this._readbackQueue=null,void(this._lastReadbackFrame=this._updateCount);if(d===s.TIMEOUT_EXPIRED)return;s.bindBuffer(s.PIXEL_PACK_BUFFER,this._pbo),s.getBufferSubData(s.PIXEL_PACK_BUFFER,0,this._resultBuffer,0,4),s.bindBuffer(s.PIXEL_PACK_BUFFER,null)}else this._bindFramebuffer(),s.readPixels(0,0,this._texWidth,this._texHeight,this._texFormat,this._texType,this._resultBuffer);this._readbackQueue=null,this._measuredError=jp._parseRGBA8float(this._resultBuffer),this._lastReadbackFrame=this._updateCount}static _parseRGBA8float(s){let d=0;return d+=s[0]/256,d+=s[1]/65536,d+=s[2]/16777216,s[3]<127&&(d=-d),d/128}}let fx=i.$/128;function j2(S,s){let d=S.granularity!==void 0?Math.max(S.granularity,1):1,v=d+(S.generateBorders?2:0),x=d+(S.extendToNorthPole||S.generateBorders?1:0)+(S.extendToSouthPole||S.generateBorders?1:0),T=v+1,C=x+1,R=S.generateBorders?-1:0,q=S.generateBorders||S.extendToNorthPole?-1:0,B=d+(S.generateBorders?1:0),H=d+(S.generateBorders||S.extendToSouthPole?1:0),Y=T*C,$=v*x*6,ee=T*C>65536;if(ee&&s==="16bit")throw new Error("Granularity is too large and meshes would not fit inside 16 bit vertex indices.");let ie=ee||s==="32bit",ve=new Int16Array(2*Y),ge=0;for(let Re=q;Re<=H;Re++)for(let Pe=R;Pe<=B;Pe++){let ze=Pe/d*i.$;Pe===-1&&(ze=-fx),Pe===d+1&&(ze=i.$+fx);let He=Re/d*i.$;Re===-1&&(He=S.extendToNorthPole?i.bh:-fx),Re===d+1&&(He=S.extendToSouthPole?i.bi:i.$+fx),ve[ge++]=ze,ve[ge++]=He}let ye=ie?new Uint32Array($):new Uint16Array($),Me=0;for(let Re=0;Re<x;Re++)for(let Pe=0;Pe<v;Pe++){let ze=Pe+1+Re*T,He=Pe+(Re+1)*T,Le=Pe+1+(Re+1)*T;ye[Me++]=Pe+Re*T,ye[Me++]=He,ye[Me++]=ze,ye[Me++]=ze,ye[Me++]=He,ye[Me++]=Le}return{vertices:ve.buffer.slice(0),indices:ye.buffer.slice(0),uses32bitIndices:ie}}let Ev=new i.aK({fill:new i.bj(128,2),line:new i.bj(512,0),tile:new i.bj(128,32),stencil:new i.bj(128,1),circle:3});class m1{constructor(){this._tileMeshCache={},this._errorCorrectionUsable=0,this._errorMeasurementLastValue=0,this._errorCorrectionPreviousValue=0,this._errorMeasurementLastChangeTime=-1e3}get name(){return"vertical-perspective"}get transitionState(){return 1}get useSubdivision(){return!0}get shaderVariantName(){return"globe"}get shaderDefine(){return"#define GLOBE"}get shaderPreludeCode(){return Vo.projectionGlobe}get vertexShaderPreludeCode(){return Vo.projectionMercator.vertexSource}get subdivisionGranularity(){return Ev}get useGlobeControls(){return!0}get latitudeErrorCorrectionRadians(){return this._errorCorrectionUsable}destroy(){this._errorMeasurement&&this._errorMeasurement.destroy()}updateGPUdependent(s){this._errorMeasurement||(this._errorMeasurement=new jp(s));let d=i.U(this._errorQueryLatitudeDegrees),v=2*Math.atan(Math.exp(Math.PI-d*Math.PI*2))-.5*Math.PI,x=this._errorMeasurement.updateErrorLoop(d,v),T=y.now();x!==this._errorMeasurementLastValue&&(this._errorCorrectionPreviousValue=this._errorCorrectionUsable,this._errorMeasurementLastValue=x,this._errorMeasurementLastChangeTime=T);let C=Math.min(Math.max((T-this._errorMeasurementLastChangeTime)/1e3/.5,0),1);this._errorCorrectionUsable=i.bk(this._errorCorrectionPreviousValue,-this._errorMeasurementLastValue,i.bl(C))}_getMeshKey(s){return`${s.granularity.toString(36)}_${s.generateBorders?"b":""}${s.extendToNorthPole?"n":""}${s.extendToSouthPole?"s":""}`}getMeshFromTileID(s,d,v,x,T){let C=(T==="stencil"?Ev.stencil:Ev.tile).getGranularityForZoomLevel(d.z);return this._getMesh(s,{granularity:C,generateBorders:v,extendToNorthPole:d.y===0&&x,extendToSouthPole:d.y===(1<<d.z)-1&&x})}_getMesh(s,d){let v=this._getMeshKey(d);if(v in this._tileMeshCache)return this._tileMeshCache[v];let x=function(T,C){let R=j2(C,"16bit"),q=i.aL.deserialize({arrayBuffer:R.vertices,length:R.vertices.byteLength/2/2}),B=i.aN.deserialize({arrayBuffer:R.indices,length:R.indices.byteLength/2/3});return new Ai(T.createVertexBuffer(q,_i.members),T.createIndexBuffer(B),i.aM.simpleSegment(0,0,q.length,B.length))}(s,d);return this._tileMeshCache[v]=x,x}recalculate(s){}hasTransition(){let s=y.now(),d=!1;return d=d||(s-this._errorMeasurementLastChangeTime)/1e3<.7,d=d||this._errorMeasurement&&this._errorMeasurement.awaitingQuery,d}setErrorQueryLatitudeDegrees(s){this._errorQueryLatitudeDegrees=s}}let dx=new i.r({type:new i.D(i.v.projection.type)});class hx extends i.E{constructor(s){super(),this._transitionable=new i.t(dx),this.setProjection(s),this._transitioning=this._transitionable.untransitioned(),this.recalculate(new i.F(0)),this._mercatorProjection=new gn,this._verticalPerspectiveProjection=new m1}get transitionState(){let s=this.properties.get("type");if(typeof s=="string"&&s==="mercator")return 0;if(typeof s=="string"&&s==="vertical-perspective")return 1;if(s instanceof i.bm){if(s.from==="vertical-perspective"&&s.to==="mercator")return 1-s.transition;if(s.from==="mercator"&&s.to==="vertical-perspective")return s.transition}return 1}get useGlobeRendering(){return this.transitionState>0}get latitudeErrorCorrectionRadians(){return this._verticalPerspectiveProjection.latitudeErrorCorrectionRadians}get currentProjection(){return this.useGlobeRendering?this._verticalPerspectiveProjection:this._mercatorProjection}get name(){return"globe"}get useSubdivision(){return this.currentProjection.useSubdivision}get shaderVariantName(){return this.currentProjection.shaderVariantName}get shaderDefine(){return this.currentProjection.shaderDefine}get shaderPreludeCode(){return this.currentProjection.shaderPreludeCode}get vertexShaderPreludeCode(){return this.currentProjection.vertexShaderPreludeCode}get subdivisionGranularity(){return this.currentProjection.subdivisionGranularity}get useGlobeControls(){return this.transitionState>0}destroy(){this._mercatorProjection.destroy(),this._verticalPerspectiveProjection.destroy()}updateGPUdependent(s){this._mercatorProjection.updateGPUdependent(s),this._verticalPerspectiveProjection.updateGPUdependent(s)}getMeshFromTileID(s,d,v,x,T){return this.currentProjection.getMeshFromTileID(s,d,v,x,T)}setProjection(s){this._transitionable.setValue("type",(s==null?void 0:s.type)||"mercator")}updateTransitions(s){this._transitioning=this._transitionable.transitioned(s,this._transitioning)}hasTransition(){return this._transitioning.hasTransition()||this.currentProjection.hasTransition()}recalculate(s){this.properties=this._transitioning.possiblyEvaluate(s)}setErrorQueryLatitudeDegrees(s){this._verticalPerspectiveProjection.setErrorQueryLatitudeDegrees(s),this._mercatorProjection.setErrorQueryLatitudeDegrees(s)}}function mx(S){let s=Sv(S.worldSize,S.center.lat);return 2*Math.PI*s}function Xc(S,s,d,v,x){let T=1/(1<<x),C=s/i.$*T+v*T,R=i.bo((S/i.$*T+d*T)*Math.PI*2+Math.PI,2*Math.PI),q=2*Math.atan(Math.exp(Math.PI-C*Math.PI*2))-.5*Math.PI,B=Math.cos(q),H=new Float64Array(3);return H[0]=Math.sin(R)*B,H[1]=Math.sin(q),H[2]=Math.cos(R)*B,H}function ss(S){return function(s,d){let v=Math.cos(d),x=new Float64Array(3);return x[0]=Math.sin(s)*v,x[1]=Math.sin(d),x[2]=Math.cos(s)*v,x}(S.lng*Math.PI/180,S.lat*Math.PI/180)}function Sv(S,s){return S/(2*Math.PI)/Math.cos(s*Math.PI/180)}function g1(S){let s=Math.asin(S[1])/Math.PI*180,d=Math.sqrt(S[0]*S[0]+S[2]*S[2]);if(d>1e-6){let v=S[0]/d,x=Math.acos(S[2]/d),T=(v>0?x:-x)/Math.PI*180;return new i.S(i.aO(T,-180,180),s)}return new i.S(0,s)}function Vm(S){return Math.cos(S*Math.PI/180)}function ua(S,s){let d=Vm(S),v=Vm(s);return i.ak(v/d)}function UD(S,s){let d=S.rotate(s.bearingInRadians),v=s.zoom+ua(s.center.lat,0),x=i.bk(1/Vm(s.center.lat),1/Vm(Math.min(Math.abs(s.center.lat),60)),i.bn(v,7,3,0,1)),T=360/mx({worldSize:s.worldSize,center:{lat:s.center.lat}});return new i.S(s.center.lng-d.x*T*x,i.ah(s.center.lat+d.y*T,-i.ai,i.ai))}function v1(S){let s=.5*S,d=Math.sin(s),v=Math.cos(s);return Math.log(d+v)-Math.log(v-d)}function q2(S,s,d,v){let x=S.lat+d*v;if(Math.abs(d)>1){let T=(Math.sign(S.lat+d)!==Math.sign(S.lat)?-Math.abs(S.lat):Math.abs(S.lat))*Math.PI/180,C=Math.abs(S.lat+d)*Math.PI/180,R=v1(T+v*(C-T)),q=v1(T),B=v1(C);return new i.S(S.lng+s*((R-q)/(B-q)),x)}return new i.S(S.lng+s*v,x)}class dB{constructor(s){this._cachePrevious=new Map,this._cache=new Map,this._hadAnyChanges=!1,this._boundingVolumeFactory=s}swapBuffers(){if(!this._hadAnyChanges)return;let s=this._cachePrevious;this._cachePrevious=this._cache,this._cache=s,this._cache.clear(),this._hadAnyChanges=!1}getTileBoundingVolume(s,d,v,x){let T=`${s.z}_${s.x}_${s.y}_${x!=null&&x.terrain?"t":""}`,C=this._cache.get(T);if(C)return C;let R=this._cachePrevious.get(T);if(R)return this._cache.set(T,R),R;let q=this._boundingVolumeFactory(s,d,v,x);return this._cache.set(T,q),this._hadAnyChanges=!0,q}}class Tv{constructor(s,d,v,x){this.min=v,this.max=x,this.points=s,this.planes=d}static fromAabb(s,d){let v=[];for(let x=0;x<8;x++)v.push([1&~x?s[0]:d[0],(x>>1&1)==1?d[1]:s[1],(x>>2&1)==1?d[2]:s[2]]);return new Tv(v,[[-1,0,0,d[0]],[1,0,0,-s[0]],[0,-1,0,d[1]],[0,1,0,-s[1]],[0,0,-1,d[2]],[0,0,1,-s[2]]],s,d)}static fromCenterSizeAngles(s,d,v){let x=i.br([],v[0],v[1],v[2]),T=i.bs([],[d[0],0,0],x),C=i.bs([],[0,d[1],0],x),R=i.bs([],[0,0,d[2]],x),q=[...s],B=[...s];for(let Y=0;Y<8;Y++)for(let $=0;$<3;$++){let ee=s[$]+T[$]*(1&~Y?-1:1)+C[$]*((Y>>1&1)==1?1:-1)+R[$]*((Y>>2&1)==1?1:-1);q[$]=Math.min(q[$],ee),B[$]=Math.max(B[$],ee)}let H=[];for(let Y=0;Y<8;Y++){let $=[...s];i.aS($,$,i.aR([],T,1&~Y?-1:1)),i.aS($,$,i.aR([],C,(Y>>1&1)==1?1:-1)),i.aS($,$,i.aR([],R,(Y>>2&1)==1?1:-1)),H.push($)}return new Tv(H,[[...T,-i.aX(T,H[0])],[...C,-i.aX(C,H[0])],[...R,-i.aX(R,H[0])],[-T[0],-T[1],-T[2],-i.aX(T,H[7])],[-C[0],-C[1],-C[2],-i.aX(C,H[7])],[-R[0],-R[1],-R[2],-i.aX(R,H[7])]],q,B)}intersectsFrustum(s){let d=!0,v=this.points.length,x=this.planes.length,T=s.planes.length,C=s.points.length;for(let R=0;R<T;R++){let q=s.planes[R],B=0;for(let H=0;H<v;H++){let Y=this.points[H];q[0]*Y[0]+q[1]*Y[1]+q[2]*Y[2]+q[3]>=0&&B++}if(B===0)return 0;B<v&&(d=!1)}if(d)return 2;for(let R=0;R<x;R++){let q=this.planes[R],B=0;for(let H=0;H<C;H++){let Y=s.points[H];q[0]*Y[0]+q[1]*Y[1]+q[2]*Y[2]+q[3]>=0&&B++}if(B===0)return 0}return 1}intersectsPlane(s){let d=this.points.length,v=0;for(let x=0;x<d;x++){let T=this.points[x];s[0]*T[0]+s[1]*T[1]+s[2]*T[2]+s[3]>=0&&v++}return v===d?2:v===0?0:1}}function Cs(S,s,d){let v=S-s;return v<0?-v:Math.max(0,v-d)}function y1(S,s,d,v,x){let T=S-d,C;return C=T<0?Math.min(-T,1+T-x):T>1?Math.min(Math.max(T-x,0),1-T):0,Math.max(C,Cs(s,v,x))}class qp{constructor(){this._boundingVolumeCache=new dB(this._computeTileBoundingVolume)}prepareNextFrame(){this._boundingVolumeCache.swapBuffers()}distanceToTile2d(s,d,v,x){let T=1<<v.z,C=1/T,R=v.x/T,q=v.y/T,B=2;return B=Math.min(B,y1(s,d,R,q,C)),B=Math.min(B,y1(s,d,R+.5,-q-C,C)),B=Math.min(B,y1(s,d,R+.5,2-q-C,C)),B}getWrap(s,d,v){let x=1<<d.z,T=1/x,C=d.x/x,R=Cs(s.x,C,T),q=Cs(s.x,C-1,T),B=Cs(s.x,C+1,T),H=Math.min(R,q,B);return H===B?1:H===q?-1:0}allowVariableZoom(s,d){return gt(s,d)>4}allowWorldCopies(){return!1}getTileBoundingVolume(s,d,v,x){return this._boundingVolumeCache.getTileBoundingVolume(s,d,v,x)}_computeTileBoundingVolume(s,d,v,x){var T,C;let R=0,q=0;if(x!=null&&x.terrain){let B=new i.Z(s.z,d,s.z,s.x,s.y),H=x.terrain.getMinMaxElevation(B);R=(T=H.minElevation)!==null&&T!==void 0?T:Math.min(0,v),q=(C=H.maxElevation)!==null&&C!==void 0?C:Math.max(0,v)}if(R/=i.bu,q/=i.bu,R+=1,q+=1,s.z<=0)return Tv.fromAabb([-q,-q,-q],[q,q,q]);if(s.z===1)return Tv.fromAabb([s.x===0?-q:0,s.y===0?0:-q,-q],[s.x===0?0:q,s.y===0?q:0,q]);{let B=[Xc(0,0,s.x,s.y,s.z),Xc(i.$,0,s.x,s.y,s.z),Xc(i.$,i.$,s.x,s.y,s.z),Xc(0,i.$,s.x,s.y,s.z)],H=[];for(let at of B)H.push(i.aR([],at,q));if(q!==R)for(let at of B)H.push(i.aR([],at,R));s.y===0&&H.push([0,1,0]),s.y===(1<<s.z)-1&&H.push([0,-1,0]);let Y=[1,1,1],$=[-1,-1,-1];for(let at of H)for(let dt=0;dt<3;dt++)Y[dt]=Math.min(Y[dt],at[dt]),$[dt]=Math.max($[dt],at[dt]);let ee=Xc(i.$/2,i.$/2,s.x,s.y,s.z),ie=i.aW([],[0,1,0],ee);i.aV(ie,ie);let ve=i.aW([],ee,ie);i.aV(ve,ve);let ge=i.aW([],B[2],B[1]);i.aV(ge,ge);let ye=i.aW([],B[0],B[3]);i.aV(ye,ye),H.push(i.aR([],ee,q)),s.y>=(1<<s.z)/2&&H.push(i.aR([],Xc(i.$/2,0,s.x,s.y,s.z),q)),s.y<(1<<s.z)/2&&H.push(i.aR([],Xc(i.$/2,i.$,s.x,s.y,s.z),q));let Me=_1(ee,H),Re=_1(ve,H),Pe=[-ee[0],-ee[1],-ee[2],Me.max],ze=[ee[0],ee[1],ee[2],-Me.min],He=[-ve[0],-ve[1],-ve[2],Re.max],Le=[ve[0],ve[1],ve[2],-Re.min],Qe=[...ge,0],ht=[...ye,0],it=[];return s.y===0?it.push(i.bt(ht,Qe,Pe),i.bt(ht,Qe,ze)):it.push(i.bt(He,Qe,Pe),i.bt(He,Qe,ze),i.bt(He,ht,Pe),i.bt(He,ht,ze)),s.y===(1<<s.z)-1?it.push(i.bt(ht,Qe,Pe),i.bt(ht,Qe,ze)):it.push(i.bt(Le,Qe,Pe),i.bt(Le,Qe,ze),i.bt(Le,ht,Pe),i.bt(Le,ht,ze)),new Tv(it,[Pe,ze,He,Le,Qe,ht],Y,$)}}}function _1(S,s){let d=1/0,v=-1/0;for(let x of s){let T=i.aX(S,x);d=Math.min(d,T),v=Math.max(v,T)}return{min:d,max:v}}class b1{get pixelsToClipSpaceMatrix(){return this._helper.pixelsToClipSpaceMatrix}get clipSpaceToPixelsMatrix(){return this._helper.clipSpaceToPixelsMatrix}get pixelsToGLUnits(){return this._helper.pixelsToGLUnits}get centerOffset(){return this._helper.centerOffset}get size(){return this._helper.size}get rotationMatrix(){return this._helper.rotationMatrix}get centerPoint(){return this._helper.centerPoint}get pixelsPerMeter(){return this._helper.pixelsPerMeter}setMinZoom(s){this._helper.setMinZoom(s)}setMaxZoom(s){this._helper.setMaxZoom(s)}setMinPitch(s){this._helper.setMinPitch(s)}setMaxPitch(s){this._helper.setMaxPitch(s)}setRenderWorldCopies(s){this._helper.setRenderWorldCopies(s)}setBearing(s){this._helper.setBearing(s)}setPitch(s){this._helper.setPitch(s)}setRoll(s){this._helper.setRoll(s)}setFov(s){this._helper.setFov(s)}setZoom(s){this._helper.setZoom(s)}setCenter(s){this._helper.setCenter(s)}setElevation(s){this._helper.setElevation(s)}setMinElevationForCurrentTile(s){this._helper.setMinElevationForCurrentTile(s)}setPadding(s){this._helper.setPadding(s)}interpolatePadding(s,d,v){return this._helper.interpolatePadding(s,d,v)}isPaddingEqual(s){return this._helper.isPaddingEqual(s)}resize(s,d){this._helper.resize(s,d)}getMaxBounds(){return this._helper.getMaxBounds()}setMaxBounds(s){this._helper.setMaxBounds(s)}overrideNearFarZ(s,d){this._helper.overrideNearFarZ(s,d)}clearNearFarZOverride(){this._helper.clearNearFarZOverride()}getCameraQueryGeometry(s){return this._helper.getCameraQueryGeometry(this.getCameraPoint(),s)}get tileSize(){return this._helper.tileSize}get tileZoom(){return this._helper.tileZoom}get scale(){return this._helper.scale}get worldSize(){return this._helper.worldSize}get width(){return this._helper.width}get height(){return this._helper.height}get lngRange(){return this._helper.lngRange}get latRange(){return this._helper.latRange}get minZoom(){return this._helper.minZoom}get maxZoom(){return this._helper.maxZoom}get zoom(){return this._helper.zoom}get center(){return this._helper.center}get minPitch(){return this._helper.minPitch}get maxPitch(){return this._helper.maxPitch}get pitch(){return this._helper.pitch}get pitchInRadians(){return this._helper.pitchInRadians}get roll(){return this._helper.roll}get rollInRadians(){return this._helper.rollInRadians}get bearing(){return this._helper.bearing}get bearingInRadians(){return this._helper.bearingInRadians}get fov(){return this._helper.fov}get fovInRadians(){return this._helper.fovInRadians}get elevation(){return this._helper.elevation}get minElevationForCurrentTile(){return this._helper.minElevationForCurrentTile}get padding(){return this._helper.padding}get unmodified(){return this._helper.unmodified}get renderWorldCopies(){return this._helper.renderWorldCopies}get nearZ(){return this._helper.nearZ}get farZ(){return this._helper.farZ}get autoCalculateNearFarZ(){return this._helper.autoCalculateNearFarZ}setTransitionState(s){}constructor(){this._cachedClippingPlane=i.bv(),this._projectionMatrix=i.b9(),this._globeViewProjMatrix32f=i.b8(),this._globeViewProjMatrixNoCorrection=i.b9(),this._globeViewProjMatrixNoCorrectionInverted=i.b9(),this._globeProjMatrixInverted=i.b9(),this._cameraPosition=i.bp(),this._globeLatitudeErrorCorrectionRadians=0,this._helper=new ya({calcMatrices:()=>{this._calcMatrices()},getConstrained:(s,d)=>this.getConstrained(s,d)}),this._coveringTilesDetailsProvider=new qp}clone(){let s=new b1;return s.apply(this),s}apply(s,d){this._globeLatitudeErrorCorrectionRadians=d||0,this._helper.apply(s)}get projectionMatrix(){return this._projectionMatrix}get modelViewProjectionMatrix(){return this._globeViewProjMatrixNoCorrection}get inverseProjectionMatrix(){return this._globeProjMatrixInverted}get cameraPosition(){let s=i.bp();return s[0]=this._cameraPosition[0],s[1]=this._cameraPosition[1],s[2]=this._cameraPosition[2],s}get cameraToCenterDistance(){return this._helper.cameraToCenterDistance}getProjectionData(s){let{overscaledTileID:d,applyGlobeMatrix:v}=s,x=this._helper.getMercatorTileCoordinates(d);return{mainMatrix:this._globeViewProjMatrix32f,tileMercatorCoords:x,clippingPlane:this._cachedClippingPlane,projectionTransition:v?1:0,fallbackMatrix:this._globeViewProjMatrix32f}}_computeClippingPlane(s){let d=this.pitchInRadians,v=this.cameraToCenterDistance/s,x=Math.sin(d)*v,T=Math.cos(d)*v+1,C=1/Math.sqrt(x*x+T*T)*1,R=-x,q=T,B=Math.sqrt(R*R+q*q);R/=B,q/=B;let H=[0,R,q];i.bw(H,H,[0,0,0],-this.bearingInRadians),i.bx(H,H,[0,0,0],-1*this.center.lat*Math.PI/180),i.by(H,H,[0,0,0],this.center.lng*Math.PI/180);let Y=1/i.aZ(H);return i.aR(H,H,Y),[...H,-C*Y]}isLocationOccluded(s){return!this.isSurfacePointVisible(ss(s))}transformLightDirection(s){let d=this._helper._center.lng*Math.PI/180,v=this._helper._center.lat*Math.PI/180,x=Math.cos(v),T=[Math.sin(d)*x,Math.sin(v),Math.cos(d)*x],C=[T[2],0,-T[0]],R=[0,0,0];i.aW(R,C,T),i.aV(C,C),i.aV(R,R);let q=[0,0,0];return i.aV(q,[C[0]*s[0]+R[0]*s[1]+T[0]*s[2],C[1]*s[0]+R[1]*s[1]+T[1]*s[2],C[2]*s[0]+R[2]*s[1]+T[2]*s[2]]),q}getPixelScale(){return 1/Math.cos(this._helper._center.lat*Math.PI/180)}getCircleRadiusCorrection(){return Math.cos(this._helper._center.lat*Math.PI/180)}getPitchedTextCorrection(s,d,v){let x=function(R,q,B){let H=1/(1<<B.z);return new i.a1(R/i.$*H+B.x*H,q/i.$*H+B.y*H)}(s,d,v.canonical),T=(C=x.y,[i.bo(x.x*Math.PI*2+Math.PI,2*Math.PI),2*Math.atan(Math.exp(Math.PI-C*Math.PI*2))-.5*Math.PI]);var C;return this.getCircleRadiusCorrection()/Math.cos(T[1])}projectTileCoordinates(s,d,v,x){let T=v.canonical,C=Xc(s,d,T.x,T.y,T.z),R=1+(x?x(s,d):0)/i.bu,q=[C[0]*R,C[1]*R,C[2]*R,1];i.aw(q,q,this._globeViewProjMatrixNoCorrection);let B=this._cachedClippingPlane,H=B[0]*C[0]+B[1]*C[1]+B[2]*C[2]+B[3]<0;return{point:new i.P(q[0]/q[3],q[1]/q[3]),signedDistanceFromCamera:q[3],isOccluded:H}}_calcMatrices(){if(!this._helper._width||!this._helper._height)return;let s=Sv(this.worldSize,this.center.lat),d=i.ba(),v=i.ba();this._helper.autoCalculateNearFarZ&&(this._helper._nearZ=.5,this._helper._farZ=this.cameraToCenterDistance+2*s),i.b4(d,this.fovInRadians,this.width/this.height,this._helper._nearZ,this._helper._farZ);let x=this.centerOffset;d[8]=2*-x.x/this._helper._width,d[9]=2*x.y/this._helper._height,this._projectionMatrix=i.b5(d),this._globeProjMatrixInverted=i.ba(),i.aq(this._globeProjMatrixInverted,d),i.M(d,d,[0,0,-this.cameraToCenterDistance]),i.b6(d,d,this.rollInRadians),i.b7(d,d,-this.pitchInRadians),i.b6(d,d,this.bearingInRadians),i.M(d,d,[0,0,-s]);let T=i.bp();T[0]=s,T[1]=s,T[2]=s,i.b7(v,d,this.center.lat*Math.PI/180),i.bz(v,v,-this.center.lng*Math.PI/180),i.N(v,v,T),this._globeViewProjMatrixNoCorrection=v,i.b7(d,d,this.center.lat*Math.PI/180-this._globeLatitudeErrorCorrectionRadians),i.bz(d,d,-this.center.lng*Math.PI/180),i.N(d,d,T),this._globeViewProjMatrix32f=new Float32Array(d),this._globeViewProjMatrixNoCorrectionInverted=i.ba(),i.aq(this._globeViewProjMatrixNoCorrectionInverted,v);let C=i.bp();this._cameraPosition=i.bp(),this._cameraPosition[2]=this.cameraToCenterDistance/s,i.bw(this._cameraPosition,this._cameraPosition,C,-this.rollInRadians),i.bx(this._cameraPosition,this._cameraPosition,C,this.pitchInRadians),i.bw(this._cameraPosition,this._cameraPosition,C,-this.bearingInRadians),i.aS(this._cameraPosition,this._cameraPosition,[0,0,1]),i.bx(this._cameraPosition,this._cameraPosition,C,-this.center.lat*Math.PI/180),i.by(this._cameraPosition,this._cameraPosition,C,this.center.lng*Math.PI/180),this._cachedClippingPlane=this._computeClippingPlane(s);let R=i.b5(this._globeViewProjMatrixNoCorrectionInverted);i.N(R,R,[1,1,-1]),this._cachedFrustum=Oi.fromInvProjectionMatrix(R,1,0,this._cachedClippingPlane,!0)}calculateFogMatrix(s){i.w("calculateFogMatrix is not supported on globe projection.");let d=i.ba();return i.ag(d),d}getVisibleUnwrappedCoordinates(s){return[new i.b2(0,s)]}getCameraFrustum(){return this._cachedFrustum}getClippingPlane(){return this._cachedClippingPlane}getCoveringTilesDetailsProvider(){return this._coveringTilesDetailsProvider}recalculateZoomAndCenter(s){s&&i.w("terrain is not fully supported on vertical perspective projection."),this._helper.recalculateZoomAndCenter(0)}maxPitchScaleFactor(){return 1}getCameraPoint(){return this._helper.getCameraPoint()}getCameraAltitude(){return this._helper.getCameraAltitude()}getCameraLngLat(){return this._helper.getCameraLngLat()}lngLatToCameraDepth(s,d){if(!this._globeViewProjMatrixNoCorrection)return 1;let v=ss(s);i.aR(v,v,1+d/i.bu);let x=i.bv();return i.aw(x,[v[0],v[1],v[2],1],this._globeViewProjMatrixNoCorrection),x[2]/x[3]}populateCache(s){}getBounds(){let s=.5*this.width,d=.5*this.height,v=[new i.P(0,0),new i.P(s,0),new i.P(this.width,0),new i.P(this.width,d),new i.P(this.width,this.height),new i.P(s,this.height),new i.P(0,this.height),new i.P(0,d)],x=[];for(let Y of v)x.push(this.unprojectScreenPoint(Y));let T=0,C=0,R=0,q=0,B=this.center;for(let Y of x){let $=i.bA(B.lng,Y.lng),ee=i.bA(B.lat,Y.lat);$<C&&(C=$),$>T&&(T=$),ee<q&&(q=ee),ee>R&&(R=ee)}let H=[B.lng+C,B.lat+q,B.lng+T,B.lat+R];return this.isSurfacePointOnScreen([0,1,0])&&(H[3]=90,H[0]=-180,H[2]=180),this.isSurfacePointOnScreen([0,-1,0])&&(H[1]=-90,H[0]=-180,H[2]=180),new Ot(H)}getConstrained(s,d){let v=i.ah(s.lat,-i.ai,i.ai),x=i.ah(+d,this.minZoom+ua(0,v),this.maxZoom);return{center:new i.S(s.lng,v),zoom:x}}calculateCenterFromCameraLngLatAlt(s,d,v,x){return this._helper.calculateCenterFromCameraLngLatAlt(s,d,v,x)}setLocationAtPoint(s,d){let v=ss(this.unprojectScreenPoint(d)),x=ss(s),T=i.bp();i.bB(T);let C=i.bp();i.by(C,v,T,-this.center.lng*Math.PI/180),i.bx(C,C,T,this.center.lat*Math.PI/180);let R=x[0]*x[0]+x[2]*x[2],q=C[0]*C[0];if(R<q)return;let B=Math.sqrt(R-q),H=-B,Y=i.bC(x[0],x[2],C[0],B),$=i.bC(x[0],x[2],C[0],H),ee=i.bp();i.by(ee,x,T,-Y);let ie=i.bC(ee[1],ee[2],C[1],C[2]),ve=i.bp();i.by(ve,x,T,-$);let ge=i.bC(ve[1],ve[2],C[1],C[2]),ye=.5*Math.PI,Me=ie>=-ye&&ie<=ye,Re=ge>=-ye&&ge<=ye,Pe,ze;if(Me&&Re){let ht=this.center.lng*Math.PI/180,it=this.center.lat*Math.PI/180;i.bD(Y,ht)+i.bD(ie,it)<i.bD($,ht)+i.bD(ge,it)?(Pe=Y,ze=ie):(Pe=$,ze=ge)}else if(Me)Pe=Y,ze=ie;else{if(!Re)return;Pe=$,ze=ge}let He=Pe/Math.PI*180,Le=ze/Math.PI*180,Qe=this.center.lat;this.setCenter(new i.S(He,i.ah(Le,-90,90))),this.setZoom(this.zoom+ua(Qe,this.center.lat))}locationToScreenPoint(s,d){let v=ss(s);if(d){let x=d.getElevationForLngLatZoom(s,this._helper._tileZoom);i.aR(v,v,1+x/i.bu)}return this._projectSurfacePointToScreen(v)}_projectSurfacePointToScreen(s){let d=i.bv();return i.aw(d,[...s,1],this._globeViewProjMatrixNoCorrection),d[0]/=d[3],d[1]/=d[3],new i.P((.5*d[0]+.5)*this.width,(.5*-d[1]+.5)*this.height)}screenPointToMercatorCoordinate(s,d){if(d){let v=d.pointCoordinate(s);if(v)return v}return i.a1.fromLngLat(this.unprojectScreenPoint(s))}screenPointToLocation(s,d){var v;return(v=this.screenPointToMercatorCoordinate(s,d))===null||v===void 0?void 0:v.toLngLat()}isPointOnMapSurface(s,d){let v=this._cameraPosition,x=this.getRayDirectionFromPixel(s);return!!this.rayPlanetIntersection(v,x)}getRayDirectionFromPixel(s){let d=i.bv();d[0]=s.x/this.width*2-1,d[1]=-1*(s.y/this.height*2-1),d[2]=1,d[3]=1,i.aw(d,d,this._globeViewProjMatrixNoCorrectionInverted),d[0]/=d[3],d[1]/=d[3],d[2]/=d[3];let v=i.bp();v[0]=d[0]-this._cameraPosition[0],v[1]=d[1]-this._cameraPosition[1],v[2]=d[2]-this._cameraPosition[2];let x=i.bp();return i.aV(x,v),x}isSurfacePointVisible(s){let d=this._cachedClippingPlane;return d[0]*s[0]+d[1]*s[1]+d[2]*s[2]+d[3]>=0}isSurfacePointOnScreen(s){if(!this.isSurfacePointVisible(s))return!1;let d=i.bv();return i.aw(d,[...s,1],this._globeViewProjMatrixNoCorrection),d[0]/=d[3],d[1]/=d[3],d[2]/=d[3],d[0]>-1&&d[0]<1&&d[1]>-1&&d[1]<1&&d[2]>-1&&d[2]<1}rayPlanetIntersection(s,d){let v=i.aX(s,d),x=i.bp(),T=i.bp();i.aR(T,d,v),i.aU(x,s,T);let C=1-i.aX(x,x);if(C<0)return null;let R=i.aX(s,s)-1,q=-v+(v<0?1:-1)*Math.sqrt(C),B=R/q,H=q;return{tMin:Math.min(B,H),tMax:Math.max(B,H)}}unprojectScreenPoint(s){let d=this._cameraPosition,v=this.getRayDirectionFromPixel(s),x=this.rayPlanetIntersection(d,v);if(x){let H=i.bp();i.aS(H,d,[v[0]*x.tMin,v[1]*x.tMin,v[2]*x.tMin]);let Y=i.bp();return i.aV(Y,H),g1(Y)}let T=this._cachedClippingPlane,C=T[0]*v[0]+T[1]*v[1]+T[2]*v[2],R=-i.b1(T,d)/C,q=i.bp();if(R>0)i.aS(q,d,[v[0]*R,v[1]*R,v[2]*R]);else{let H=i.bp();i.aS(H,d,[2*v[0],2*v[1],2*v[2]]);let Y=i.b1(this._cachedClippingPlane,H);i.aU(q,H,[this._cachedClippingPlane[0]*Y,this._cachedClippingPlane[1]*Y,this._cachedClippingPlane[2]*Y])}let B=function(H){let Y=i.bp();return Y[0]=H[0]*-H[3],Y[1]=H[1]*-H[3],Y[2]=H[2]*-H[3],{center:Y,radius:Math.sqrt(1-H[3]*H[3])}}(T);return g1(function(H,Y,$){let ee=i.bp();i.aU(ee,$,H);let ie=i.bp();return i.bq(ie,H,ee,Y/i.a$(ee)),ie}(B.center,B.radius,q))}getMatrixForModel(s,d){let v=i.S.convert(s),x=1/i.bu,T=i.b9();return i.bz(T,T,v.lng/180*Math.PI),i.b7(T,T,-v.lat/180*Math.PI),i.M(T,T,[0,0,1+d/i.bu]),i.b7(T,T,.5*Math.PI),i.N(T,T,[x,x,x]),T}getProjectionDataForCustomLayer(s=!0){let d=this.getProjectionData({overscaledTileID:new i.Z(0,0,0,0,0),applyGlobeMatrix:s});return d.tileMercatorCoords=[0,0,1,1],d}getFastPathSimpleProjectionMatrix(s){}}class x1{get pixelsToClipSpaceMatrix(){return this._helper.pixelsToClipSpaceMatrix}get clipSpaceToPixelsMatrix(){return this._helper.clipSpaceToPixelsMatrix}get pixelsToGLUnits(){return this._helper.pixelsToGLUnits}get centerOffset(){return this._helper.centerOffset}get size(){return this._helper.size}get rotationMatrix(){return this._helper.rotationMatrix}get centerPoint(){return this._helper.centerPoint}get pixelsPerMeter(){return this._helper.pixelsPerMeter}setMinZoom(s){this._helper.setMinZoom(s)}setMaxZoom(s){this._helper.setMaxZoom(s)}setMinPitch(s){this._helper.setMinPitch(s)}setMaxPitch(s){this._helper.setMaxPitch(s)}setRenderWorldCopies(s){this._helper.setRenderWorldCopies(s)}setBearing(s){this._helper.setBearing(s)}setPitch(s){this._helper.setPitch(s)}setRoll(s){this._helper.setRoll(s)}setFov(s){this._helper.setFov(s)}setZoom(s){this._helper.setZoom(s)}setCenter(s){this._helper.setCenter(s)}setElevation(s){this._helper.setElevation(s)}setMinElevationForCurrentTile(s){this._helper.setMinElevationForCurrentTile(s)}setPadding(s){this._helper.setPadding(s)}interpolatePadding(s,d,v){return this._helper.interpolatePadding(s,d,v)}isPaddingEqual(s){return this._helper.isPaddingEqual(s)}resize(s,d,v=!0){this._helper.resize(s,d,v)}getMaxBounds(){return this._helper.getMaxBounds()}setMaxBounds(s){this._helper.setMaxBounds(s)}overrideNearFarZ(s,d){this._helper.overrideNearFarZ(s,d)}clearNearFarZOverride(){this._helper.clearNearFarZOverride()}getCameraQueryGeometry(s){return this._helper.getCameraQueryGeometry(this.getCameraPoint(),s)}get tileSize(){return this._helper.tileSize}get tileZoom(){return this._helper.tileZoom}get scale(){return this._helper.scale}get worldSize(){return this._helper.worldSize}get width(){return this._helper.width}get height(){return this._helper.height}get lngRange(){return this._helper.lngRange}get latRange(){return this._helper.latRange}get minZoom(){return this._helper.minZoom}get maxZoom(){return this._helper.maxZoom}get zoom(){return this._helper.zoom}get center(){return this._helper.center}get minPitch(){return this._helper.minPitch}get maxPitch(){return this._helper.maxPitch}get pitch(){return this._helper.pitch}get pitchInRadians(){return this._helper.pitchInRadians}get roll(){return this._helper.roll}get rollInRadians(){return this._helper.rollInRadians}get bearing(){return this._helper.bearing}get bearingInRadians(){return this._helper.bearingInRadians}get fov(){return this._helper.fov}get fovInRadians(){return this._helper.fovInRadians}get elevation(){return this._helper.elevation}get minElevationForCurrentTile(){return this._helper.minElevationForCurrentTile}get padding(){return this._helper.padding}get unmodified(){return this._helper.unmodified}get renderWorldCopies(){return this._helper.renderWorldCopies}get cameraToCenterDistance(){return this._helper.cameraToCenterDistance}get nearZ(){return this._helper.nearZ}get farZ(){return this._helper.farZ}get autoCalculateNearFarZ(){return this._helper.autoCalculateNearFarZ}get isGlobeRendering(){return this._globeness>0}setTransitionState(s,d){this._globeness=s,this._globeLatitudeErrorCorrectionRadians=d,this._calcMatrices(),this._verticalPerspectiveTransform.getCoveringTilesDetailsProvider().prepareNextFrame(),this._mercatorTransform.getCoveringTilesDetailsProvider().prepareNextFrame()}get currentTransform(){return this.isGlobeRendering?this._verticalPerspectiveTransform:this._mercatorTransform}constructor(){this._globeLatitudeErrorCorrectionRadians=0,this._globeness=1,this._helper=new ya({calcMatrices:()=>{this._calcMatrices()},getConstrained:(s,d)=>this.getConstrained(s,d)}),this._globeness=1,this._mercatorTransform=new zo,this._verticalPerspectiveTransform=new b1}clone(){let s=new x1;return s._globeness=this._globeness,s._globeLatitudeErrorCorrectionRadians=this._globeLatitudeErrorCorrectionRadians,s.apply(this),s}apply(s){this._helper.apply(s),this._mercatorTransform.apply(this),this._verticalPerspectiveTransform.apply(this,this._globeLatitudeErrorCorrectionRadians)}get projectionMatrix(){return this.currentTransform.projectionMatrix}get modelViewProjectionMatrix(){return this.currentTransform.modelViewProjectionMatrix}get inverseProjectionMatrix(){return this.currentTransform.inverseProjectionMatrix}get cameraPosition(){return this.currentTransform.cameraPosition}getProjectionData(s){let d=this._mercatorTransform.getProjectionData(s),v=this._verticalPerspectiveTransform.getProjectionData(s);return{mainMatrix:this.isGlobeRendering?v.mainMatrix:d.mainMatrix,clippingPlane:v.clippingPlane,tileMercatorCoords:v.tileMercatorCoords,projectionTransition:s.applyGlobeMatrix?this._globeness:0,fallbackMatrix:d.fallbackMatrix}}isLocationOccluded(s){return this.currentTransform.isLocationOccluded(s)}transformLightDirection(s){return this.currentTransform.transformLightDirection(s)}getPixelScale(){return i.bk(this._mercatorTransform.getPixelScale(),this._verticalPerspectiveTransform.getPixelScale(),this._globeness)}getCircleRadiusCorrection(){return i.bk(this._mercatorTransform.getCircleRadiusCorrection(),this._verticalPerspectiveTransform.getCircleRadiusCorrection(),this._globeness)}getPitchedTextCorrection(s,d,v){let x=this._mercatorTransform.getPitchedTextCorrection(s,d,v),T=this._verticalPerspectiveTransform.getPitchedTextCorrection(s,d,v);return i.bk(x,T,this._globeness)}projectTileCoordinates(s,d,v,x){return this.currentTransform.projectTileCoordinates(s,d,v,x)}_calcMatrices(){this._helper._width&&this._helper._height&&(this._verticalPerspectiveTransform.apply(this,this._globeLatitudeErrorCorrectionRadians),this._helper._nearZ=this._verticalPerspectiveTransform.nearZ,this._helper._farZ=this._verticalPerspectiveTransform.farZ,this._mercatorTransform.apply(this,!0,this.isGlobeRendering),this._helper._nearZ=this._mercatorTransform.nearZ,this._helper._farZ=this._mercatorTransform.farZ)}calculateFogMatrix(s){return this.currentTransform.calculateFogMatrix(s)}getVisibleUnwrappedCoordinates(s){return this.currentTransform.getVisibleUnwrappedCoordinates(s)}getCameraFrustum(){return this.currentTransform.getCameraFrustum()}getClippingPlane(){return this.currentTransform.getClippingPlane()}getCoveringTilesDetailsProvider(){return this.currentTransform.getCoveringTilesDetailsProvider()}recalculateZoomAndCenter(s){this._mercatorTransform.recalculateZoomAndCenter(s),this._verticalPerspectiveTransform.recalculateZoomAndCenter(s)}maxPitchScaleFactor(){return this._mercatorTransform.maxPitchScaleFactor()}getCameraPoint(){return this._helper.getCameraPoint()}getCameraAltitude(){return this._helper.getCameraAltitude()}getCameraLngLat(){return this._helper.getCameraLngLat()}lngLatToCameraDepth(s,d){return this.currentTransform.lngLatToCameraDepth(s,d)}populateCache(s){this._mercatorTransform.populateCache(s),this._verticalPerspectiveTransform.populateCache(s)}getBounds(){return this.currentTransform.getBounds()}getConstrained(s,d){return this.currentTransform.getConstrained(s,d)}calculateCenterFromCameraLngLatAlt(s,d,v,x){return this._helper.calculateCenterFromCameraLngLatAlt(s,d,v,x)}setLocationAtPoint(s,d){if(!this.isGlobeRendering)return this._mercatorTransform.setLocationAtPoint(s,d),void this.apply(this._mercatorTransform);this._verticalPerspectiveTransform.setLocationAtPoint(s,d),this.apply(this._verticalPerspectiveTransform)}locationToScreenPoint(s,d){return this.currentTransform.locationToScreenPoint(s,d)}screenPointToMercatorCoordinate(s,d){return this.currentTransform.screenPointToMercatorCoordinate(s,d)}screenPointToLocation(s,d){return this.currentTransform.screenPointToLocation(s,d)}isPointOnMapSurface(s,d){return this.currentTransform.isPointOnMapSurface(s,d)}getRayDirectionFromPixel(s){return this._verticalPerspectiveTransform.getRayDirectionFromPixel(s)}getMatrixForModel(s,d){return this.currentTransform.getMatrixForModel(s,d)}getProjectionDataForCustomLayer(s=!0){let d=this._mercatorTransform.getProjectionDataForCustomLayer(s);if(!this.isGlobeRendering)return d;let v=this._verticalPerspectiveTransform.getProjectionDataForCustomLayer(s);return v.fallbackMatrix=d.mainMatrix,v}getFastPathSimpleProjectionMatrix(s){return this.currentTransform.getFastPathSimpleProjectionMatrix(s)}}class Hs{get useGlobeControls(){return!0}handlePanInertia(s,d){let v=UD(s,d);return Math.abs(v.lng-d.center.lng)>180&&(v.lng=d.center.lng+179.5*Math.sign(v.lng-d.center.lng)),{easingCenter:v,easingOffset:new i.P(0,0)}}handleMapControlsRollPitchBearingZoom(s,d){let v=s.around,x=d.screenPointToLocation(v);s.bearingDelta&&d.setBearing(d.bearing+s.bearingDelta),s.pitchDelta&&d.setPitch(d.pitch+s.pitchDelta),s.rollDelta&&d.setRoll(d.roll+s.rollDelta);let T=d.zoom;s.zoomDelta&&d.setZoom(d.zoom+s.zoomDelta);let C=d.zoom-T;if(C===0)return;let R=i.bA(d.center.lng,x.lng),q=R/(Math.abs(R/180)+1),B=i.bA(d.center.lat,x.lat),H=d.getRayDirectionFromPixel(v),Y=d.cameraPosition,$=-1*i.aX(Y,H),ee=i.bp();i.aS(ee,Y,[H[0]*$,H[1]*$,H[2]*$]);let ie=i.aZ(ee)-1,ve=Math.exp(.5*-Math.max(ie-.3,0)),ge=Sv(d.worldSize,d.center.lat)/Math.min(d.width,d.height),ye=i.bn(ge,.9,.5,1,.25),Me=(1-i.af(-C))*Math.min(ve,ye),Re=d.center.lat,Pe=d.zoom,ze=new i.S(d.center.lng+q*Me,i.ah(d.center.lat+B*Me,-i.ai,i.ai));d.setLocationAtPoint(x,v);let He=d.center,Le=i.bn(Math.abs(R),45,85,0,1),Qe=i.bn(ge,.75,.35,0,1),ht=Math.pow(Math.max(Le,Qe),.25),it=i.bA(He.lng,ze.lng),at=i.bA(He.lat,ze.lat);d.setCenter(new i.S(He.lng+it*ht,He.lat+at*ht).wrap()),d.setZoom(Pe+ua(Re,d.center.lat))}handleMapControlsPan(s,d,v){if(!s.panDelta)return;let x=d.center.lat,T=d.zoom;d.setCenter(UD(s.panDelta,d).wrap()),d.setZoom(T+ua(x,d.center.lat))}cameraForBoxAndBearing(s,d,v,x,T){let C=Vs(s,d,v,x,T),R=d.left/T.width*2-1,q=(T.width-d.right)/T.width*2-1,B=d.top/T.height*-2+1,H=(T.height-d.bottom)/T.height*-2+1,Y=i.bA(v.getWest(),v.getEast())<0,$=Y?v.getEast():v.getWest(),ee=Y?v.getWest():v.getEast(),ie=Math.max(v.getNorth(),v.getSouth()),ve=Math.min(v.getNorth(),v.getSouth()),ge=$+.5*i.bA($,ee),ye=ie+.5*i.bA(ie,ve),Me=T.clone();Me.setCenter(C.center),Me.setBearing(C.bearing),Me.setPitch(0),Me.setRoll(0),Me.setZoom(C.zoom);let Re=Me.modelViewProjectionMatrix,Pe=[ss(v.getNorthWest()),ss(v.getNorthEast()),ss(v.getSouthWest()),ss(v.getSouthEast()),ss(new i.S(ee,ye)),ss(new i.S($,ye)),ss(new i.S(ge,ie)),ss(new i.S(ge,ve))],ze=ss(C.center),He=Number.POSITIVE_INFINITY;for(let Le of Pe)R<0&&(He=Hs.getLesserNonNegativeNonNull(He,Hs.solveVectorScale(Le,ze,Re,"x",R))),q>0&&(He=Hs.getLesserNonNegativeNonNull(He,Hs.solveVectorScale(Le,ze,Re,"x",q))),B>0&&(He=Hs.getLesserNonNegativeNonNull(He,Hs.solveVectorScale(Le,ze,Re,"y",B))),H<0&&(He=Hs.getLesserNonNegativeNonNull(He,Hs.solveVectorScale(Le,ze,Re,"y",H)));if(Number.isFinite(He)&&He!==0)return C.zoom=Me.zoom+i.ak(He),C;px()}handleJumpToCenterZoom(s,d){let v=s.center.lat,x=s.getConstrained(d.center?i.S.convert(d.center):s.center,s.zoom).center;s.setCenter(x.wrap());let T=d.zoom!==void 0?+d.zoom:s.zoom+ua(v,x.lat);s.zoom!==T&&s.setZoom(T)}handleEaseTo(s,d){let v=s.zoom,x=s.center,T=s.padding,C={roll:s.roll,pitch:s.pitch,bearing:s.bearing},R={roll:d.roll===void 0?s.roll:d.roll,pitch:d.pitch===void 0?s.pitch:d.pitch,bearing:d.bearing===void 0?s.bearing:d.bearing},q=d.zoom!==void 0,B=!s.isPaddingEqual(d.padding),H=!1,Y=d.center?i.S.convert(d.center):x,$=s.getConstrained(Y,v).center;Iu(s,$);let ee=s.clone();ee.setCenter($),ee.setZoom(q?+d.zoom:v+ua(x.lat,Y.lat)),ee.setBearing(d.bearing);let ie=new i.P(i.ah(s.centerPoint.x+d.offsetAsPoint.x,0,s.width),i.ah(s.centerPoint.y+d.offsetAsPoint.y,0,s.height));ee.setLocationAtPoint($,ie);let ve=(d.offset&&d.offsetAsPoint.mag())>0?ee.center:$,ge=q?+d.zoom:v+ua(x.lat,ve.lat),ye=v+ua(x.lat,0),Me=ge+ua(ve.lat,0),Re=i.bA(x.lng,ve.lng),Pe=i.bA(x.lat,ve.lat),ze=i.af(Me-ye);return H=ge!==v,{easeFunc:He=>{if(i.be(C,R)||hl({startEulerAngles:C,endEulerAngles:R,tr:s,k:He,useSlerp:C.roll!=R.roll}),B&&s.interpolatePadding(T,d.padding,He),d.around)i.w("Easing around a point is not supported under globe projection."),s.setLocationAtPoint(d.around,d.aroundPoint);else{let Le=Me>ye?Math.min(2,ze):Math.max(.5,ze),Qe=Math.pow(Le,1-He),ht=q2(x,Re,Pe,He*Qe);s.setCenter(ht.wrap())}if(H){let Le=i.C.number(ye,Me,He)+ua(0,s.center.lat);s.setZoom(Le)}},isZooming:H,elevationCenter:ve}}handleFlyTo(s,d){let v=d.zoom!==void 0,x=s.center,T=s.zoom,C=s.padding,R=!s.isPaddingEqual(d.padding),q=s.getConstrained(i.S.convert(d.center||d.locationAtOffset),T).center,B=v?+d.zoom:s.zoom+ua(s.center.lat,q.lat),H=s.clone();H.setCenter(q),H.setZoom(B),H.setBearing(d.bearing);let Y=new i.P(i.ah(s.centerPoint.x+d.offsetAsPoint.x,0,s.width),i.ah(s.centerPoint.y+d.offsetAsPoint.y,0,s.height));H.setLocationAtPoint(q,Y);let $=H.center;Iu(s,$);let ee=function(Pe,ze,He){let Le=ss(ze),Qe=ss(He),ht=i.aX(Le,Qe),it=Math.acos(ht),at=mx(Pe);return it/(2*Math.PI)*at}(s,x,$),ie=T+ua(x.lat,0),ve=B+ua($.lat,0),ge=i.af(ve-ie),ye;if(typeof d.minZoom=="number"){let Pe=+d.minZoom+ua($.lat,0),ze=Math.min(Pe,ie,ve)+ua(0,$.lat),He=s.getConstrained($,ze).zoom+ua($.lat,0);ye=i.af(He-ie)}let Me=i.bA(x.lng,$.lng),Re=i.bA(x.lat,$.lat);return{easeFunc:(Pe,ze,He,Le)=>{let Qe=q2(x,Me,Re,He);R&&s.interpolatePadding(C,d.padding,Pe);let ht=Pe===1?$:Qe;s.setCenter(ht.wrap());let it=ie+i.ak(ze);s.setZoom(Pe===1?B:it+ua(0,ht.lat))},scaleOfZoom:ge,targetCenter:$,scaleOfMinZoom:ye,pixelPathLength:ee}}static solveVectorScale(s,d,v,x,T){let C=x==="x"?[v[0],v[4],v[8],v[12]]:[v[1],v[5],v[9],v[13]],R=[v[3],v[7],v[11],v[15]],q=s[0]*C[0]+s[1]*C[1]+s[2]*C[2],B=s[0]*R[0]+s[1]*R[1]+s[2]*R[2],H=d[0]*C[0]+d[1]*C[1]+d[2]*C[2],Y=d[0]*R[0]+d[1]*R[1]+d[2]*R[2];return H+T*B===q+T*Y||R[3]*(q-H)+C[3]*(Y-B)+q*Y==H*B?null:(H+C[3]-T*Y-T*R[3])/(H-q-T*Y+T*B)}static getLesserNonNegativeNonNull(s,d){return d!==null&&d>=0&&d<s?d:s}}class BD{constructor(s){this._globe=s,this._mercatorCameraHelper=new Gs,this._verticalPerspectiveCameraHelper=new Hs}get useGlobeControls(){return this._globe.useGlobeRendering}get currentHelper(){return this.useGlobeControls?this._verticalPerspectiveCameraHelper:this._mercatorCameraHelper}handlePanInertia(s,d){return this.currentHelper.handlePanInertia(s,d)}handleMapControlsRollPitchBearingZoom(s,d){return this.currentHelper.handleMapControlsRollPitchBearingZoom(s,d)}handleMapControlsPan(s,d,v){this.currentHelper.handleMapControlsPan(s,d,v)}cameraForBoxAndBearing(s,d,v,x,T){return this.currentHelper.cameraForBoxAndBearing(s,d,v,x,T)}handleJumpToCenterZoom(s,d){this.currentHelper.handleJumpToCenterZoom(s,d)}handleEaseTo(s,d){return this.currentHelper.handleEaseTo(s,d)}handleFlyTo(s,d){return this.currentHelper.handleFlyTo(s,d)}}let gx=(S,s)=>i.y(S,s&&s.filter(d=>d.identifier!=="source.canvas")),hB=i.bE();class z2 extends i.E{constructor(s,d={}){var v,x;super(),this._rtlPluginLoaded=()=>{for(let C in this.sourceCaches){let R=this.sourceCaches[C].getSource().type;R!=="vector"&&R!=="geojson"||this.sourceCaches[C].reload()}},this.map=s,this.dispatcher=new ot(pt(),s._getMapId()),this.dispatcher.registerMessageHandler("GG",(C,R)=>this.getGlyphs(C,R)),this.dispatcher.registerMessageHandler("GI",(C,R)=>this.getImages(C,R)),this.imageManager=new te,this.imageManager.setEventedParent(this);let T=((v=s._container)===null||v===void 0?void 0:v.lang)||typeof document!="undefined"&&((x=document.documentElement)===null||x===void 0?void 0:x.lang)||void 0;this.glyphManager=new me(s._requestManager,d.localIdeographFontFamily,T),this.lineAtlas=new ct(256,512),this.crossTileSymbolIndex=new Wn,this._spritesImagesIds={},this._layers={},this._order=[],this.sourceCaches={},this.zoomHistory=new i.bF,this._loaded=!1,this._availableImages=[],this._globalState={},this._resetUpdates(),this.dispatcher.broadcast("SR",i.bG()),Ft().on(ke,this._rtlPluginLoaded),this.on("data",C=>{if(C.dataType!=="source"||C.sourceDataType!=="metadata")return;let R=this.sourceCaches[C.sourceId];if(!R)return;let q=R.getSource();if(q&&q.vectorLayerIds)for(let B in this._layers){let H=this._layers[B];H.source===q.id&&this._validateLayer(H)}})}setGlobalStateProperty(s,d){var v,x,T;this._checkLoaded();let C=d===null?(T=(x=(v=this.stylesheet.state)===null||v===void 0?void 0:v[s])===null||x===void 0?void 0:x.default)!==null&&T!==void 0?T:null:d;if(i.bH(C,this._globalState[s]))return this;this._globalState[s]=C,this._applyGlobalStateChanges([s])}getGlobalState(){return this._globalState}setGlobalState(s){this._checkLoaded();let d=[];for(let v in s)!i.bH(this._globalState[v],s[v].default)&&(d.push(v),this._globalState[v]=s[v].default);this._applyGlobalStateChanges(d)}_applyGlobalStateChanges(s){if(s.length===0)return;let d=new Set;for(let v in this._layers){let x=this._layers[v],T=x.getLayoutAffectingGlobalStateRefs(),C=x.getPaintAffectingGlobalStateRefs();for(let R of s)if(T.has(R)&&d.add(x.source),C.has(R))for(let{name:q,value:B}of C.get(R))this._updatePaintProperty(x,q,B)}for(let v in this.sourceCaches)d.has(v)&&(this._reloadSource(v),this._changed=!0)}loadURL(s,d={},v){this.fire(new i.l("dataloading",{dataType:"style"})),d.validate=typeof d.validate!="boolean"||d.validate;let x=this.map._requestManager.transformRequest(s,"Style");this._loadStyleRequest=new AbortController;let T=this._loadStyleRequest;i.j(x,this._loadStyleRequest).then(C=>{this._loadStyleRequest=null,this._load(C.data,d,v)}).catch(C=>{this._loadStyleRequest=null,C&&!T.signal.aborted&&this.fire(new i.k(C))})}loadJSON(s,d={},v){this.fire(new i.l("dataloading",{dataType:"style"})),this._frameRequest=new AbortController,y.frameAsync(this._frameRequest).then(()=>{this._frameRequest=null,d.validate=d.validate!==!1,this._load(s,d,v)}).catch(()=>{})}loadEmpty(){this.fire(new i.l("dataloading",{dataType:"style"})),this._load(hB,{validate:!1})}_load(s,d,v){var x,T;let C=d.transformStyle?d.transformStyle(v,s):s;if(!d.validate||!gx(this,i.z(C))){C=Object.assign({},C),this._loaded=!0,this.stylesheet=C;for(let R in C.sources)this.addSource(R,C.sources[R],{validate:!1});C.sprite?this._loadSprite(C.sprite):this.imageManager.setLoaded(!0),this.glyphManager.setURL(C.glyphs),this._createLayers(),this.light=new Ce(this.stylesheet.light),this._setProjectionInternal(((x=this.stylesheet.projection)===null||x===void 0?void 0:x.type)||"mercator"),this.sky=new rt(this.stylesheet.sky),this.map.setTerrain((T=this.stylesheet.terrain)!==null&&T!==void 0?T:null),this.fire(new i.l("data",{dataType:"style"})),this.fire(new i.l("style.load"))}}_createLayers(){var s;let d=i.bI(this.stylesheet.layers);this.dispatcher.broadcast("SL",d),this._order=d.map(v=>v.id),this._layers={},this.setGlobalState((s=this.stylesheet.state)!==null&&s!==void 0?s:null),this._serializedLayers=null;for(let v of d){let x=i.bJ(v);x.setEventedParent(this,{layer:{id:v.id}}),x.setGlobalState(this._globalState),this._layers[v.id]=x}}_loadSprite(s,d=!1,v=void 0){let x;this.imageManager.setLoaded(!1),this._spriteRequest=new AbortController,function(T,C,R,q){return i._(this,void 0,void 0,function*(){let B=G(T),H=R>1?"@2x":"",Y={},$={};for(let{id:ee,url:ie}of B){let ve=C.transformRequest(K(ie,H,".json"),"SpriteJSON");Y[ee]=i.j(ve,q);let ge=C.transformRequest(K(ie,H,".png"),"SpriteImage");$[ee]=z.getImage(ge,q)}return yield Promise.all([...Object.values(Y),...Object.values($)]),function(ee,ie){return i._(this,void 0,void 0,function*(){let ve={};for(let ge in ee){ve[ge]={};let ye=y.getImageCanvasContext((yield ie[ge]).data),Me=(yield ee[ge]).data;for(let Re in Me){let{width:Pe,height:ze,x:He,y:Le,sdf:Qe,pixelRatio:ht,stretchX:it,stretchY:at,content:dt,textFitWidth:Vt,textFitHeight:$t}=Me[Re];ve[ge][Re]={data:null,pixelRatio:ht,sdf:Qe,stretchX:it,stretchY:at,content:dt,textFitWidth:Vt,textFitHeight:$t,spriteData:{width:Pe,height:ze,x:He,y:Le,context:ye}}}}return ve})}(Y,$)})}(s,this.map._requestManager,this.map.getPixelRatio(),this._spriteRequest).then(T=>{if(this._spriteRequest=null,T)for(let C in T){this._spritesImagesIds[C]=[];let R=this._spritesImagesIds[C]?this._spritesImagesIds[C].filter(q=>!(q in T)):[];for(let q of R)this.imageManager.removeImage(q),this._changedImages[q]=!0;for(let q in T[C]){let B=C==="default"?q:`${C}:${q}`;this._spritesImagesIds[C].push(B),B in this.imageManager.images?this.imageManager.updateImage(B,T[C][q],!1):this.imageManager.addImage(B,T[C][q]),d&&(this._changedImages[B]=!0)}}}).catch(T=>{this._spriteRequest=null,x=T,this.fire(new i.k(x))}).finally(()=>{this.imageManager.setLoaded(!0),this._availableImages=this.imageManager.listImages(),d&&(this._changed=!0),this.dispatcher.broadcast("SI",this._availableImages),this.fire(new i.l("data",{dataType:"style"})),v&&v(x)})}_unloadSprite(){for(let s of Object.values(this._spritesImagesIds).flat())this.imageManager.removeImage(s),this._changedImages[s]=!0;this._spritesImagesIds={},this._availableImages=this.imageManager.listImages(),this._changed=!0,this.dispatcher.broadcast("SI",this._availableImages),this.fire(new i.l("data",{dataType:"style"}))}_validateLayer(s){let d=this.sourceCaches[s.source];if(!d)return;let v=s.sourceLayer;if(!v)return;let x=d.getSource();(x.type==="geojson"||x.vectorLayerIds&&x.vectorLayerIds.indexOf(v)===-1)&&this.fire(new i.k(new Error(`Source layer "${v}" does not exist on source "${x.id}" as specified by style layer "${s.id}".`)))}loaded(){if(!this._loaded||Object.keys(this._updatedSources).length)return!1;for(let s in this.sourceCaches)if(!this.sourceCaches[s].loaded())return!1;return!!this.imageManager.isLoaded()}_serializeByIds(s,d=!1){let v=this._serializedAllLayers();if(!s||s.length===0)return Object.values(d?i.bK(v):v);let x=[];for(let T of s)if(v[T]){let C=d?i.bK(v[T]):v[T];x.push(C)}return x}_serializedAllLayers(){let s=this._serializedLayers;if(s)return s;s=this._serializedLayers={};let d=Object.keys(this._layers);for(let v of d){let x=this._layers[v];x.type!=="custom"&&(s[v]=x.serialize())}return s}hasTransitions(){var s,d,v;if(!((s=this.light)===null||s===void 0)&&s.hasTransition()||!((d=this.sky)===null||d===void 0)&&d.hasTransition()||!((v=this.projection)===null||v===void 0)&&v.hasTransition())return!0;for(let x in this.sourceCaches)if(this.sourceCaches[x].hasTransition())return!0;for(let x in this._layers)if(this._layers[x].hasTransition())return!0;return!1}_checkLoaded(){if(!this._loaded)throw new Error("Style is not done loading.")}update(s){if(!this._loaded)return;let d=this._changed;if(d){let x=Object.keys(this._updatedLayers),T=Object.keys(this._removedLayers);(x.length||T.length)&&this._updateWorkerLayers(x,T);for(let C in this._updatedSources){let R=this._updatedSources[C];if(R==="reload")this._reloadSource(C);else{if(R!=="clear")throw new Error(`Invalid action ${R}`);this._clearSource(C)}}this._updateTilesForChangedImages(),this._updateTilesForChangedGlyphs();for(let C in this._updatedPaintProps)this._layers[C].updateTransitions(s);this.light.updateTransitions(s),this.sky.updateTransitions(s),this._resetUpdates()}let v={};for(let x in this.sourceCaches){let T=this.sourceCaches[x];v[x]=T.used,T.used=!1}for(let x of this._order){let T=this._layers[x];T.recalculate(s,this._availableImages),!T.isHidden(s.zoom)&&T.source&&(this.sourceCaches[T.source].used=!0)}for(let x in v){let T=this.sourceCaches[x];!!v[x]!=!!T.used&&T.fire(new i.l("data",{sourceDataType:"visibility",dataType:"source",sourceId:x}))}this.light.recalculate(s),this.sky.recalculate(s),this.projection.recalculate(s),this.z=s.zoom,d&&this.fire(new i.l("data",{dataType:"style"}))}_updateTilesForChangedImages(){let s=Object.keys(this._changedImages);if(s.length){for(let d in this.sourceCaches)this.sourceCaches[d].reloadTilesForDependencies(["icons","patterns"],s);this._changedImages={}}}_updateTilesForChangedGlyphs(){if(this._glyphsDidChange){for(let s in this.sourceCaches)this.sourceCaches[s].reloadTilesForDependencies(["glyphs"],[""]);this._glyphsDidChange=!1}}_updateWorkerLayers(s,d){this.dispatcher.broadcast("UL",{layers:this._serializeByIds(s,!1),removedIds:d})}_resetUpdates(){this._changed=!1,this._updatedLayers={},this._removedLayers={},this._updatedSources={},this._updatedPaintProps={},this._changedImages={},this._glyphsDidChange=!1}setState(s,d={}){var v;this._checkLoaded();let x=this.serialize();if(s=d.transformStyle?d.transformStyle(x,s):s,((v=d.validate)===null||v===void 0||v)&&gx(this,i.z(s)))return!1;(s=i.bK(s)).layers=i.bI(s.layers);let T=i.bL(x,s),C=this._getOperationsToPerform(T);if(C.unimplemented.length>0)throw new Error(`Unimplemented: ${C.unimplemented.join(", ")}.`);if(C.operations.length===0)return!1;for(let R of C.operations)R();return this.stylesheet=s,this._serializedLayers=null,!0}_getOperationsToPerform(s){let d=[],v=[];for(let x of s)switch(x.command){case"setCenter":case"setZoom":case"setBearing":case"setPitch":case"setRoll":continue;case"addLayer":d.push(()=>this.addLayer.apply(this,x.args));break;case"removeLayer":d.push(()=>this.removeLayer.apply(this,x.args));break;case"setPaintProperty":d.push(()=>this.setPaintProperty.apply(this,x.args));break;case"setLayoutProperty":d.push(()=>this.setLayoutProperty.apply(this,x.args));break;case"setFilter":d.push(()=>this.setFilter.apply(this,x.args));break;case"addSource":d.push(()=>this.addSource.apply(this,x.args));break;case"removeSource":d.push(()=>this.removeSource.apply(this,x.args));break;case"setLayerZoomRange":d.push(()=>this.setLayerZoomRange.apply(this,x.args));break;case"setLight":d.push(()=>this.setLight.apply(this,x.args));break;case"setGeoJSONSourceData":d.push(()=>this.setGeoJSONSourceData.apply(this,x.args));break;case"setGlyphs":d.push(()=>this.setGlyphs.apply(this,x.args));break;case"setSprite":d.push(()=>this.setSprite.apply(this,x.args));break;case"setTerrain":d.push(()=>this.map.setTerrain.apply(this,x.args));break;case"setSky":d.push(()=>this.setSky.apply(this,x.args));break;case"setProjection":this.setProjection.apply(this,x.args);break;case"setGlobalState":d.push(()=>this.setGlobalState.apply(this,x.args));break;case"setTransition":d.push(()=>{});break;default:v.push(x.command)}return{operations:d,unimplemented:v}}addImage(s,d){if(this.getImage(s))return this.fire(new i.k(new Error(`An image named "${s}" already exists.`)));this.imageManager.addImage(s,d),this._afterImageUpdated(s)}updateImage(s,d){this.imageManager.updateImage(s,d)}getImage(s){return this.imageManager.getImage(s)}removeImage(s){if(!this.getImage(s))return this.fire(new i.k(new Error(`An image named "${s}" does not exist.`)));this.imageManager.removeImage(s),this._afterImageUpdated(s)}_afterImageUpdated(s){this._availableImages=this.imageManager.listImages(),this._changedImages[s]=!0,this._changed=!0,this.dispatcher.broadcast("SI",this._availableImages),this.fire(new i.l("data",{dataType:"style"}))}listImages(){return this._checkLoaded(),this.imageManager.listImages()}addSource(s,d,v={}){if(this._checkLoaded(),this.sourceCaches[s]!==void 0)throw new Error(`Source "${s}" already exists.`);if(!d.type)throw new Error(`The type property must be defined, but only the following properties were given: ${Object.keys(d).join(", ")}.`);if(["vector","raster","geojson","video","image"].indexOf(d.type)>=0&&this._validate(i.z.source,`sources.${s}`,d,null,v))return;this.map&&this.map._collectResourceTiming&&(d.collectResourceTiming=!0);let x=this.sourceCaches[s]=new Oe(s,d,this.dispatcher);x.style=this,x.setEventedParent(this,()=>({isSourceLoaded:x.loaded(),source:x.serialize(),sourceId:s})),x.onAdd(this.map),this._changed=!0}removeSource(s){if(this._checkLoaded(),this.sourceCaches[s]===void 0)throw new Error("There is no source with this ID");for(let v in this._layers)if(this._layers[v].source===s)return this.fire(new i.k(new Error(`Source "${s}" cannot be removed while layer "${v}" is using it.`)));let d=this.sourceCaches[s];delete this.sourceCaches[s],delete this._updatedSources[s],d.fire(new i.l("data",{sourceDataType:"metadata",dataType:"source",sourceId:s})),d.setEventedParent(null),d.onRemove(this.map),this._changed=!0}setGeoJSONSourceData(s,d){if(this._checkLoaded(),this.sourceCaches[s]===void 0)throw new Error(`There is no source with this ID=${s}`);let v=this.sourceCaches[s].getSource();if(v.type!=="geojson")throw new Error(`geojsonSource.type is ${v.type}, which is !== 'geojson`);v.setData(d),this._changed=!0}getSource(s){return this.sourceCaches[s]&&this.sourceCaches[s].getSource()}addLayer(s,d,v={}){this._checkLoaded();let x=s.id;if(this.getLayer(x))return void this.fire(new i.k(new Error(`Layer "${x}" already exists on this map.`)));let T;if(s.type==="custom"){if(gx(this,i.bM(s)))return;T=i.bJ(s)}else{if("source"in s&&typeof s.source=="object"&&(this.addSource(x,s.source),s=i.bK(s),s=i.e(s,{source:x})),this._validate(i.z.layer,`layers.${x}`,s,{arrayIndex:-1},v))return;T=i.bJ(s),this._validateLayer(T),T.setEventedParent(this,{layer:{id:x}})}let C=d?this._order.indexOf(d):this._order.length;if(d&&C===-1)this.fire(new i.k(new Error(`Cannot add layer "${x}" before non-existing layer "${d}".`)));else{if(this._order.splice(C,0,x),this._layerOrderChanged=!0,this._layers[x]=T,this._removedLayers[x]&&T.source&&T.type!=="custom"){let R=this._removedLayers[x];delete this._removedLayers[x],R.type!==T.type?this._updatedSources[T.source]="clear":(this._updatedSources[T.source]="reload",this.sourceCaches[T.source].pause())}this._updateLayer(T),T.onAdd&&T.onAdd(this.map)}}moveLayer(s,d){if(this._checkLoaded(),this._changed=!0,!this._layers[s])return void this.fire(new i.k(new Error(`The layer '${s}' does not exist in the map's style and cannot be moved.`)));if(s===d)return;let v=this._order.indexOf(s);this._order.splice(v,1);let x=d?this._order.indexOf(d):this._order.length;d&&x===-1?this.fire(new i.k(new Error(`Cannot move layer "${s}" before non-existing layer "${d}".`))):(this._order.splice(x,0,s),this._layerOrderChanged=!0)}removeLayer(s){this._checkLoaded();let d=this._layers[s];if(!d)return void this.fire(new i.k(new Error(`Cannot remove non-existing layer "${s}".`)));d.setEventedParent(null);let v=this._order.indexOf(s);this._order.splice(v,1),this._layerOrderChanged=!0,this._changed=!0,this._removedLayers[s]=d,delete this._layers[s],this._serializedLayers&&delete this._serializedLayers[s],delete this._updatedLayers[s],delete this._updatedPaintProps[s],d.onRemove&&d.onRemove(this.map)}getLayer(s){return this._layers[s]}getLayersOrder(){return[...this._order]}hasLayer(s){return s in this._layers}setLayerZoomRange(s,d,v){this._checkLoaded();let x=this.getLayer(s);x?x.minzoom===d&&x.maxzoom===v||(d!=null&&(x.minzoom=d),v!=null&&(x.maxzoom=v),this._updateLayer(x)):this.fire(new i.k(new Error(`Cannot set the zoom range of non-existing layer "${s}".`)))}setFilter(s,d,v={}){this._checkLoaded();let x=this.getLayer(s);if(x){if(!i.bH(x.filter,d))return d==null?(x.setFilter(void 0),void this._updateLayer(x)):void(this._validate(i.z.filter,`layers.${x.id}.filter`,d,null,v)||(x.setFilter(i.bK(d)),this._updateLayer(x)))}else this.fire(new i.k(new Error(`Cannot filter non-existing layer "${s}".`)))}getFilter(s){return i.bK(this.getLayer(s).filter)}setLayoutProperty(s,d,v,x={}){this._checkLoaded();let T=this.getLayer(s);T?i.bH(T.getLayoutProperty(d),v)||(T.setLayoutProperty(d,v,x),this._updateLayer(T)):this.fire(new i.k(new Error(`Cannot style non-existing layer "${s}".`)))}getLayoutProperty(s,d){let v=this.getLayer(s);if(v)return v.getLayoutProperty(d);this.fire(new i.k(new Error(`Cannot get style of non-existing layer "${s}".`)))}setPaintProperty(s,d,v,x={}){this._checkLoaded();let T=this.getLayer(s);T?i.bH(T.getPaintProperty(d),v)||this._updatePaintProperty(T,d,v,x):this.fire(new i.k(new Error(`Cannot style non-existing layer "${s}".`)))}_updatePaintProperty(s,d,v,x={}){s.setPaintProperty(d,v,x)&&this._updateLayer(s),this._changed=!0,this._updatedPaintProps[s.id]=!0,this._serializedLayers=null}getPaintProperty(s,d){return this.getLayer(s).getPaintProperty(d)}setFeatureState(s,d){this._checkLoaded();let v=s.source,x=s.sourceLayer,T=this.sourceCaches[v];if(T===void 0)return void this.fire(new i.k(new Error(`The source '${v}' does not exist in the map's style.`)));let C=T.getSource().type;C==="geojson"&&x?this.fire(new i.k(new Error("GeoJSON sources cannot have a sourceLayer parameter."))):C!=="vector"||x?(s.id===void 0&&this.fire(new i.k(new Error("The feature id parameter must be provided."))),T.setFeatureState(x,s.id,d)):this.fire(new i.k(new Error("The sourceLayer parameter must be provided for vector source types.")))}removeFeatureState(s,d){this._checkLoaded();let v=s.source,x=this.sourceCaches[v];if(x===void 0)return void this.fire(new i.k(new Error(`The source '${v}' does not exist in the map's style.`)));let T=x.getSource().type,C=T==="vector"?s.sourceLayer:void 0;T!=="vector"||C?d&&typeof s.id!="string"&&typeof s.id!="number"?this.fire(new i.k(new Error("A feature id is required to remove its specific state property."))):x.removeFeatureState(C,s.id,d):this.fire(new i.k(new Error("The sourceLayer parameter must be provided for vector source types.")))}getFeatureState(s){this._checkLoaded();let d=s.source,v=s.sourceLayer,x=this.sourceCaches[d];if(x!==void 0)return x.getSource().type!=="vector"||v?(s.id===void 0&&this.fire(new i.k(new Error("The feature id parameter must be provided."))),x.getFeatureState(v,s.id)):void this.fire(new i.k(new Error("The sourceLayer parameter must be provided for vector source types.")));this.fire(new i.k(new Error(`The source '${d}' does not exist in the map's style.`)))}getTransition(){return i.e({duration:300,delay:0},this.stylesheet&&this.stylesheet.transition)}serialize(){if(!this._loaded)return;let s=i.bN(this.sourceCaches,T=>T.serialize()),d=this._serializeByIds(this._order,!0),v=this.map.getTerrain()||void 0,x=this.stylesheet;return i.bO({version:x.version,name:x.name,metadata:x.metadata,light:x.light,sky:x.sky,center:x.center,zoom:x.zoom,bearing:x.bearing,pitch:x.pitch,sprite:x.sprite,glyphs:x.glyphs,transition:x.transition,projection:x.projection,sources:s,layers:d,terrain:v},T=>T!==void 0)}_updateLayer(s){this._updatedLayers[s.id]=!0,s.source&&!this._updatedSources[s.source]&&this.sourceCaches[s.source].getSource().type!=="raster"&&(this._updatedSources[s.source]="reload",this.sourceCaches[s.source].pause()),this._serializedLayers=null,this._changed=!0}_flattenAndSortRenderedFeatures(s){let d=C=>this._layers[C].type==="fill-extrusion",v={},x=[];for(let C=this._order.length-1;C>=0;C--){let R=this._order[C];if(d(R)){v[R]=C;for(let q of s){let B=q[R];if(B)for(let H of B)x.push(H)}}}x.sort((C,R)=>R.intersectionZ-C.intersectionZ);let T=[];for(let C=this._order.length-1;C>=0;C--){let R=this._order[C];if(d(R))for(let q=x.length-1;q>=0;q--){let B=x[q].feature;if(v[B.layer.id]<C)break;T.push(B),x.pop()}else for(let q of s){let B=q[R];if(B)for(let H of B)T.push(H.feature)}}return T}queryRenderedFeatures(s,d,v){d&&d.filter&&this._validate(i.z.filter,"queryRenderedFeatures.filter",d.filter,null,d);let x={};if(d&&d.layers){if(!(Array.isArray(d.layers)||d.layers instanceof Set))return this.fire(new i.k(new Error("parameters.layers must be an Array or a Set of strings"))),[];for(let B of d.layers){let H=this._layers[B];if(!H)return this.fire(new i.k(new Error(`The layer '${B}' does not exist in the map's style and cannot be queried for features.`))),[];x[H.source]=!0}}let T=[];d.availableImages=this._availableImages;let C=this._serializedAllLayers(),R=d.layers instanceof Set?d.layers:Array.isArray(d.layers)?new Set(d.layers):null,q=Object.assign(Object.assign({},d),{layers:R});for(let B in this.sourceCaches)d.layers&&!x[B]||T.push(Ke(this.sourceCaches[B],this._layers,C,s,q,v,this.map.terrain?(H,Y,$)=>this.map.terrain.getElevation(H,Y,$):void 0));return this.placement&&T.push(function(B,H,Y,$,ee,ie,ve){let ge={},ye=ie.queryRenderedSymbols($),Me=[];for(let Re of Object.keys(ye).map(Number))Me.push(ve[Re]);Me.sort(Ge);for(let Re of Me){let Pe=Re.featureIndex.lookupSymbolFeatures(ye[Re.bucketInstanceId],H,Re.bucketIndex,Re.sourceLayerIndex,ee.filter,ee.layers,ee.availableImages,B);for(let ze in Pe){let He=ge[ze]=ge[ze]||[],Le=Pe[ze];Le.sort((Qe,ht)=>{let it=Re.featureSortOrder;if(it){let at=it.indexOf(Qe.featureIndex);return it.indexOf(ht.featureIndex)-at}return ht.featureIndex-Qe.featureIndex});for(let Qe of Le)He.push(Qe)}}return function(Re,Pe,ze){for(let He in Re)for(let Le of Re[He])ft(Le,ze[Pe[He].source]);return Re}(ge,B,Y)}(this._layers,C,this.sourceCaches,s,q,this.placement.collisionIndex,this.placement.retainedQueryData)),this._flattenAndSortRenderedFeatures(T)}querySourceFeatures(s,d){d&&d.filter&&this._validate(i.z.filter,"querySourceFeatures.filter",d.filter,null,d);let v=this.sourceCaches[s];return v?function(x,T){let C=x.getRenderableIds().map(B=>x.getTileByID(B)),R=[],q={};for(let B=0;B<C.length;B++){let H=C[B],Y=H.tileID.canonical.key;q[Y]||(q[Y]=!0,H.querySourceFeatures(R,T))}return R}(v,d):[]}getLight(){return this.light.getLight()}setLight(s,d={}){this._checkLoaded();let v=this.light.getLight(),x=!1;for(let C in s)if(!i.bH(s[C],v[C])){x=!0;break}if(!x)return;let T={now:y.now(),transition:i.e({duration:300,delay:0},this.stylesheet.transition)};this.light.setLight(s,d),this.light.updateTransitions(T)}getProjection(){var s;return(s=this.stylesheet)===null||s===void 0?void 0:s.projection}setProjection(s){if(this._checkLoaded(),this.projection){if(this.projection.name===s.type)return;this.projection.destroy(),delete this.projection}this.stylesheet.projection=s,this._setProjectionInternal(s.type)}getSky(){var s;return(s=this.stylesheet)===null||s===void 0?void 0:s.sky}setSky(s,d={}){this._checkLoaded();let v=this.getSky(),x=!1;if(!s&&!v)return;if(s&&!v)x=!0;else if(!s&&v)x=!0;else for(let C in s)if(!i.bH(s[C],v[C])){x=!0;break}if(!x)return;let T={now:y.now(),transition:i.e({duration:300,delay:0},this.stylesheet.transition)};this.stylesheet.sky=s,this.sky.setSky(s,d),this.sky.updateTransitions(T)}_setProjectionInternal(s){let d=function(v){if(Array.isArray(v)){let x=new hx({type:v});return{projection:x,transform:new x1,cameraHelper:new BD(x)}}switch(v){case"mercator":return{projection:new gn,transform:new zo,cameraHelper:new Gs};case"globe":{let x=new hx({type:["interpolate",["linear"],["zoom"],11,"vertical-perspective",12,"mercator"]});return{projection:x,transform:new x1,cameraHelper:new BD(x)}}case"vertical-perspective":return{projection:new m1,transform:new b1,cameraHelper:new Hs};default:return i.w(`Unknown projection name: ${v}. Falling back to mercator projection.`),{projection:new gn,transform:new zo,cameraHelper:new Gs}}}(s);this.projection=d.projection,this.map.migrateProjection(d.transform,d.cameraHelper);for(let v in this.sourceCaches)this.sourceCaches[v].reload()}_validate(s,d,v,x,T={}){return(!T||T.validate!==!1)&&gx(this,s.call(i.z,i.e({key:d,style:this.serialize(),value:v,styleSpec:i.v},x)))}_remove(s=!0){this._frameRequest&&(this._frameRequest.abort(),this._frameRequest=null),this._loadStyleRequest&&(this._loadStyleRequest.abort(),this._loadStyleRequest=null),this._spriteRequest&&(this._spriteRequest.abort(),this._spriteRequest=null),Ft().off(ke,this._rtlPluginLoaded);for(let d in this._layers)this._layers[d].setEventedParent(null);for(let d in this.sourceCaches){let v=this.sourceCaches[d];v.setEventedParent(null),v.onRemove(this.map)}this.imageManager.setEventedParent(null),this.setEventedParent(null),s&&this.dispatcher.broadcast("RM",void 0),this.dispatcher.remove(s)}_clearSource(s){this.sourceCaches[s].clearTiles()}_reloadSource(s){this.sourceCaches[s].resume(),this.sourceCaches[s].reload()}_updateSources(s){for(let d in this.sourceCaches)this.sourceCaches[d].update(s,this.map.terrain)}_generateCollisionBoxes(){for(let s in this.sourceCaches)this._reloadSource(s)}_updatePlacement(s,d,v,x,T=!1){let C=!1,R=!1,q={};for(let B of this._order){let H=this._layers[B];if(H.type!=="symbol")continue;if(!q[H.source]){let $=this.sourceCaches[H.source];q[H.source]=$.getRenderableIds(!0).map(ee=>$.getTileByID(ee)).sort((ee,ie)=>ie.tileID.overscaledZ-ee.tileID.overscaledZ||(ee.tileID.isLessThan(ie.tileID)?-1:1))}let Y=this.crossTileSymbolIndex.addLayer(H,q[H.source],s.center.lng);C=C||Y}if(this.crossTileSymbolIndex.pruneUnusedLayers(this._order),((T=T||this._layerOrderChanged||v===0)||!this.pauseablePlacement||this.pauseablePlacement.isDone()&&!this.placement.stillRecent(y.now(),s.zoom))&&(this.pauseablePlacement=new Bn(s,this.map.terrain,this._order,T,d,v,x,this.placement),this._layerOrderChanged=!1),this.pauseablePlacement.isDone()?this.placement.setStale():(this.pauseablePlacement.continuePlacement(this._order,this._layers,q),this.pauseablePlacement.isDone()&&(this.placement=this.pauseablePlacement.commit(y.now()),R=!0),C&&this.pauseablePlacement.placement.setStale()),R||C)for(let B of this._order){let H=this._layers[B];H.type==="symbol"&&this.placement.updateLayerOpacities(H,q[H.source])}return!this.pauseablePlacement.isDone()||this.placement.hasTransitions(y.now())}_releaseSymbolFadeTiles(){for(let s in this.sourceCaches)this.sourceCaches[s].releaseSymbolFadeTiles()}getImages(s,d){return i._(this,void 0,void 0,function*(){let v=yield this.imageManager.getImages(d.icons);this._updateTilesForChangedImages();let x=this.sourceCaches[d.source];return x&&x.setDependencies(d.tileID.key,d.type,d.icons),v})}getGlyphs(s,d){return i._(this,void 0,void 0,function*(){let v=yield this.glyphManager.getGlyphs(d.stacks),x=this.sourceCaches[d.source];return x&&x.setDependencies(d.tileID.key,d.type,[""]),v})}getGlyphsUrl(){return this.stylesheet.glyphs||null}setGlyphs(s,d={}){this._checkLoaded(),s&&this._validate(i.z.glyphs,"glyphs",s,null,d)||(this._glyphsDidChange=!0,this.stylesheet.glyphs=s,this.glyphManager.entries={},this.glyphManager.setURL(s))}addSprite(s,d,v={},x){this._checkLoaded();let T=[{id:s,url:d}],C=[...G(this.stylesheet.sprite),...T];this._validate(i.z.sprite,"sprite",C,null,v)||(this.stylesheet.sprite=C,this._loadSprite(T,!0,x))}removeSprite(s){this._checkLoaded();let d=G(this.stylesheet.sprite);if(d.find(v=>v.id===s)){if(this._spritesImagesIds[s])for(let v of this._spritesImagesIds[s])this.imageManager.removeImage(v),this._changedImages[v]=!0;d.splice(d.findIndex(v=>v.id===s),1),this.stylesheet.sprite=d.length>0?d:void 0,delete this._spritesImagesIds[s],this._availableImages=this.imageManager.listImages(),this._changed=!0,this.dispatcher.broadcast("SI",this._availableImages),this.fire(new i.l("data",{dataType:"style"}))}else this.fire(new i.k(new Error(`Sprite "${s}" doesn't exists on this map.`)))}getSprite(){return G(this.stylesheet.sprite)}setSprite(s,d={},v){this._checkLoaded(),s&&this._validate(i.z.sprite,"sprite",s,null,d)||(this.stylesheet.sprite=s,s?this._loadSprite(s,!0,v):(this._unloadSprite(),v&&v(null)))}}var mB=i.aJ([{name:"a_pos",type:"Int16",components:2},{name:"a_texture_pos",type:"Int16",components:2}]);class gB{constructor(){this.boundProgram=null,this.boundLayoutVertexBuffer=null,this.boundPaintVertexBuffers=[],this.boundIndexBuffer=null,this.boundVertexOffset=null,this.boundDynamicVertexBuffer=null,this.vao=null}bind(s,d,v,x,T,C,R,q,B){this.context=s;let H=this.boundPaintVertexBuffers.length!==x.length;for(let Y=0;!H&&Y<x.length;Y++)this.boundPaintVertexBuffers[Y]!==x[Y]&&(H=!0);!this.vao||this.boundProgram!==d||this.boundLayoutVertexBuffer!==v||H||this.boundIndexBuffer!==T||this.boundVertexOffset!==C||this.boundDynamicVertexBuffer!==R||this.boundDynamicVertexBuffer2!==q||this.boundDynamicVertexBuffer3!==B?this.freshBind(d,v,x,T,C,R,q,B):(s.bindVertexArray.set(this.vao),R&&R.bind(),T&&T.dynamicDraw&&T.bind(),q&&q.bind(),B&&B.bind())}freshBind(s,d,v,x,T,C,R,q){let B=s.numAttributes,H=this.context,Y=H.gl;this.vao&&this.destroy(),this.vao=H.createVertexArray(),H.bindVertexArray.set(this.vao),this.boundProgram=s,this.boundLayoutVertexBuffer=d,this.boundPaintVertexBuffers=v,this.boundIndexBuffer=x,this.boundVertexOffset=T,this.boundDynamicVertexBuffer=C,this.boundDynamicVertexBuffer2=R,this.boundDynamicVertexBuffer3=q,d.enableAttributes(Y,s);for(let $ of v)$.enableAttributes(Y,s);C&&C.enableAttributes(Y,s),R&&R.enableAttributes(Y,s),q&&q.enableAttributes(Y,s),d.bind(),d.setVertexAttribPointers(Y,s,T);for(let $ of v)$.bind(),$.setVertexAttribPointers(Y,s,T);C&&(C.bind(),C.setVertexAttribPointers(Y,s,T)),x&&x.bind(),R&&(R.bind(),R.setVertexAttribPointers(Y,s,T)),q&&(q.bind(),q.setVertexAttribPointers(Y,s,T)),H.currentNumAttributes=B}destroy(){this.vao&&(this.context.deleteVertexArray(this.vao),this.vao=null)}}let vx=(S,s,d,v,x)=>({u_texture:0,u_ele_delta:S,u_fog_matrix:s,u_fog_color:d?d.properties.get("fog-color"):i.bf.white,u_fog_ground_blend:d?d.properties.get("fog-ground-blend"):1,u_fog_ground_blend_opacity:x?0:d?d.calculateFogBlendOpacity(v):0,u_horizon_color:d?d.properties.get("horizon-color"):i.bf.white,u_horizon_fog_blend:d?d.properties.get("horizon-fog-blend"):1,u_is_globe_mode:x?1:0}),F2={mainMatrix:"u_projection_matrix",tileMercatorCoords:"u_projection_tile_mercator_coords",clippingPlane:"u_projection_clipping_plane",projectionTransition:"u_projection_transition",fallbackMatrix:"u_projection_fallback_matrix"};function Gm(S){let s=[];for(let d=0;d<S.length;d++){if(S[d]===null)continue;let v=S[d].split(" ");s.push(v.pop())}return s}class U2{constructor(s,d,v,x,T,C,R,q,B=[]){let H=s.gl;this.program=H.createProgram();let Y=Gm(d.staticAttributes),$=v?v.getBinderAttributes():[],ee=Y.concat($),ie=Vo.prelude.staticUniforms?Gm(Vo.prelude.staticUniforms):[],ve=R.staticUniforms?Gm(R.staticUniforms):[],ge=d.staticUniforms?Gm(d.staticUniforms):[],ye=v?v.getBinderUniforms():[],Me=ie.concat(ve).concat(ge).concat(ye),Re=[];for(let it of Me)Re.indexOf(it)<0&&Re.push(it);let Pe=v?v.defines():[];Rp(H)&&Pe.unshift("#version 300 es"),T&&Pe.push("#define OVERDRAW_INSPECTOR;"),C&&Pe.push("#define TERRAIN3D;"),q&&Pe.push(q),B&&Pe.push(...B);let ze=Pe.concat(Vo.prelude.fragmentSource,R.fragmentSource,d.fragmentSource).join(`
`),He=Pe.concat(Vo.prelude.vertexSource,R.vertexSource,d.vertexSource).join(`
`);Rp(H)||(ze=function(it){return it.replace(/\bin\s/g,"varying ").replace("out highp vec4 fragColor;","").replace(/fragColor/g,"gl_FragColor").replace(/texture\(/g,"texture2D(")}(ze),He=function(it){return it.replace(/\bin\s/g,"attribute ").replace(/\bout\s/g,"varying ").replace(/texture\(/g,"texture2D(")}(He));let Le=H.createShader(H.FRAGMENT_SHADER);if(H.isContextLost())return void(this.failedToCreate=!0);if(H.shaderSource(Le,ze),H.compileShader(Le),!H.getShaderParameter(Le,H.COMPILE_STATUS))throw new Error(`Could not compile fragment shader: ${H.getShaderInfoLog(Le)}`);H.attachShader(this.program,Le);let Qe=H.createShader(H.VERTEX_SHADER);if(H.isContextLost())return void(this.failedToCreate=!0);if(H.shaderSource(Qe,He),H.compileShader(Qe),!H.getShaderParameter(Qe,H.COMPILE_STATUS))throw new Error(`Could not compile vertex shader: ${H.getShaderInfoLog(Qe)}`);H.attachShader(this.program,Qe),this.attributes={};let ht={};this.numAttributes=ee.length;for(let it=0;it<this.numAttributes;it++)ee[it]&&(H.bindAttribLocation(this.program,it,ee[it]),this.attributes[ee[it]]=it);if(H.linkProgram(this.program),!H.getProgramParameter(this.program,H.LINK_STATUS))throw new Error(`Program failed to link: ${H.getProgramInfoLog(this.program)}`);H.deleteShader(Qe),H.deleteShader(Le);for(let it=0;it<Re.length;it++){let at=Re[it];if(at&&!ht[at]){let dt=H.getUniformLocation(this.program,at);dt&&(ht[at]=dt)}}this.fixedUniforms=x(s,ht),this.terrainUniforms=((it,at)=>({u_depth:new i.bP(it,at.u_depth),u_terrain:new i.bP(it,at.u_terrain),u_terrain_dim:new i.bg(it,at.u_terrain_dim),u_terrain_matrix:new i.bR(it,at.u_terrain_matrix),u_terrain_unpack:new i.bS(it,at.u_terrain_unpack),u_terrain_exaggeration:new i.bg(it,at.u_terrain_exaggeration)}))(s,ht),this.projectionUniforms=((it,at)=>({u_projection_matrix:new i.bR(it,at.u_projection_matrix),u_projection_tile_mercator_coords:new i.bS(it,at.u_projection_tile_mercator_coords),u_projection_clipping_plane:new i.bS(it,at.u_projection_clipping_plane),u_projection_transition:new i.bg(it,at.u_projection_transition),u_projection_fallback_matrix:new i.bR(it,at.u_projection_fallback_matrix)}))(s,ht),this.binderUniforms=v?v.getUniforms(s,ht):[]}draw(s,d,v,x,T,C,R,q,B,H,Y,$,ee,ie,ve,ge,ye,Me,Re){let Pe=s.gl;if(this.failedToCreate)return;if(s.program.set(this.program),s.setDepthMode(v),s.setStencilMode(x),s.setColorMode(T),s.setCullFace(C),q){s.activeTexture.set(Pe.TEXTURE2),Pe.bindTexture(Pe.TEXTURE_2D,q.depthTexture),s.activeTexture.set(Pe.TEXTURE3),Pe.bindTexture(Pe.TEXTURE_2D,q.texture);for(let He in this.terrainUniforms)this.terrainUniforms[He].set(q[He])}if(B)for(let He in B)this.projectionUniforms[F2[He]].set(B[He]);if(R)for(let He in this.fixedUniforms)this.fixedUniforms[He].set(R[He]);ge&&ge.setUniforms(s,this.binderUniforms,ie,{zoom:ve});let ze=0;switch(d){case Pe.LINES:ze=2;break;case Pe.TRIANGLES:ze=3;break;case Pe.LINE_STRIP:ze=1}for(let He of ee.get()){let Le=He.vaos||(He.vaos={});(Le[H]||(Le[H]=new gB)).bind(s,this,Y,ge?ge.getPaintVertexBuffers():[],$,He.vertexOffset,ye,Me,Re),Pe.drawElements(d,He.primitiveLength*ze,Pe.UNSIGNED_SHORT,He.primitiveOffset*ze*2)}}}function yx(S,s,d){let v=1/i.aC(d,1,s.transform.tileZoom),x=Math.pow(2,d.tileID.overscaledZ),T=d.tileSize*Math.pow(2,s.transform.tileZoom)/x,C=T*(d.tileID.canonical.x+d.tileID.wrap*x),R=T*d.tileID.canonical.y;return{u_image:0,u_texsize:d.imageAtlasTexture.size,u_scale:[v,S.fromScale,S.toScale],u_fade:S.t,u_pixel_coord_upper:[C>>16,R>>16],u_pixel_coord_lower:[65535&C,65535&R]}}let Jc=(S,s,d,v)=>{let x=S.style.light,T=x.properties.get("position"),C=[T.x,T.y,T.z],R=i.bV();x.properties.get("anchor")==="viewport"&&i.bW(R,S.transform.bearingInRadians),i.bX(C,C,R);let q=S.transform.transformLightDirection(C),B=x.properties.get("color");return{u_lightpos:C,u_lightpos_globe:q,u_lightintensity:x.properties.get("intensity"),u_lightcolor:[B.r,B.g,B.b],u_vertical_gradient:+s,u_opacity:d,u_fill_translate:v}},vB=(S,s,d,v,x,T,C)=>i.e(Jc(S,s,d,v),yx(T,S,C),{u_height_factor:-Math.pow(2,x.overscaledZ)/C.tileSize/8}),_x=(S,s,d,v)=>i.e(yx(s,S,d),{u_fill_translate:v}),w1=(S,s)=>({u_world:S,u_fill_translate:s}),E1=(S,s,d,v,x)=>i.e(_x(S,s,d,x),{u_world:v}),yB=(S,s,d,v,x)=>{let T=S.transform,C,R,q=0;if(d.paint.get("circle-pitch-alignment")==="map"){let B=i.aC(s,1,T.zoom);C=!0,R=[B,B],q=B/(i.$*Math.pow(2,s.tileID.overscaledZ))*2*Math.PI*x}else C=!1,R=T.pixelsToGLUnits;return{u_camera_to_center_distance:T.cameraToCenterDistance,u_scale_with_map:+(d.paint.get("circle-pitch-scale")==="map"),u_pitch_with_map:+C,u_device_pixel_ratio:S.pixelRatio,u_extrude_scale:R,u_globe_extrude_scale:q,u_translate:v}},bx=S=>({u_pixel_extrude_scale:[1/S.width,1/S.height]}),_B=S=>({u_viewport_size:[S.width,S.height]}),Hm=(S,s=1)=>({u_color:S,u_overlay:0,u_overlay_scale:s}),VD=(S,s,d,v)=>{let x=i.aC(S,1,s)/(i.$*Math.pow(2,S.tileID.overscaledZ))*2*Math.PI*v;return{u_extrude_scale:i.aC(S,1,s),u_intensity:d,u_globe_extrude_scale:x}},B2=(S,s,d,v)=>{let x=i.L();i.bY(x,0,S.width,S.height,0,0,1);let T=S.context.gl;return{u_matrix:x,u_world:[T.drawingBufferWidth,T.drawingBufferHeight],u_image:d,u_color_ramp:v,u_opacity:s.paint.get("heatmap-opacity")}},bB=(S,s,d)=>{let v=d.paint.get("hillshade-accent-color"),x;switch(d.paint.get("hillshade-method")){case"basic":x=4;break;case"combined":x=1;break;case"igor":x=2;break;case"multidirectional":x=3;break;default:x=0}let T=d.getIlluminationProperties();for(let C=0;C<T.directionRadians.length;C++)d.paint.get("hillshade-illumination-anchor")==="viewport"&&(T.directionRadians[C]+=S.transform.bearingInRadians);return{u_image:0,u_latrange:V2(0,s.tileID),u_exaggeration:d.paint.get("hillshade-exaggeration"),u_altitudes:T.altitudeRadians,u_azimuths:T.directionRadians,u_accent:v,u_method:x,u_highlights:T.highlightColor,u_shadows:T.shadowColor}},GD=(S,s)=>{let d=s.stride,v=i.L();return i.bY(v,0,i.$,-i.$,0,0,1),i.M(v,v,[0,-i.$,0]),{u_matrix:v,u_image:1,u_dimension:[d,d],u_zoom:S.overscaledZ,u_unpack:s.getUnpackVector()}};function V2(S,s){let d=Math.pow(2,s.canonical.z),v=s.canonical.y;return[new i.a1(0,v/d).toLngLat().lat,new i.a1(0,(v+1)/d).toLngLat().lat]}let HD=(S,s,d=0)=>({u_image:0,u_unpack:s.getUnpackVector(),u_dimension:[s.stride,s.stride],u_elevation_stops:1,u_color_stops:4,u_color_ramp_size:d,u_opacity:S.paint.get("color-relief-opacity")}),xx=(S,s,d,v)=>{let x=S.transform;return{u_translation:H2(S,s,d),u_ratio:v/i.aC(s,1,x.zoom),u_device_pixel_ratio:S.pixelRatio,u_units_to_pixels:[1/x.pixelsToGLUnits[0],1/x.pixelsToGLUnits[1]]}},WD=(S,s,d,v,x)=>i.e(xx(S,s,d,v),{u_image:0,u_image_height:x}),$D=(S,s,d,v,x)=>{let T=S.transform,C=G2(s,T);return{u_translation:H2(S,s,d),u_texsize:s.imageAtlasTexture.size,u_ratio:v/i.aC(s,1,T.zoom),u_device_pixel_ratio:S.pixelRatio,u_image:0,u_scale:[C,x.fromScale,x.toScale],u_fade:x.t,u_units_to_pixels:[1/T.pixelsToGLUnits[0],1/T.pixelsToGLUnits[1]]}},Wm=(S,s,d,v,x,T)=>{let C=S.lineAtlas,R=G2(s,S.transform),q=d.layout.get("line-cap")==="round",B=C.getDash(x.from,q),H=C.getDash(x.to,q),Y=B.width*T.fromScale,$=H.width*T.toScale;return i.e(xx(S,s,d,v),{u_patternscale_a:[R/Y,-B.height/2],u_patternscale_b:[R/$,-H.height/2],u_sdfgamma:C.width/(256*Math.min(Y,$)*S.pixelRatio)/2,u_image:0,u_tex_y_a:B.y,u_tex_y_b:H.y,u_mix:T.t})};function G2(S,s){return 1/i.aC(S,1,s.tileZoom)}function H2(S,s,d){return i.aD(S.transform,s,d.paint.get("line-translate"),d.paint.get("line-translate-anchor"))}let S1=(S,s,d,v,x)=>{return{u_tl_parent:S,u_scale_parent:s,u_buffer_scale:1,u_fade_t:d.mix,u_opacity:d.opacity*v.paint.get("raster-opacity"),u_image0:0,u_image1:1,u_brightness_low:v.paint.get("raster-brightness-min"),u_brightness_high:v.paint.get("raster-brightness-max"),u_saturation_factor:(C=v.paint.get("raster-saturation"),C>0?1-1/(1.001-C):-C),u_contrast_factor:(T=v.paint.get("raster-contrast"),T>0?1/(1-T):1+T),u_spin_weights:xB(v.paint.get("raster-hue-rotate")),u_coords_top:[x[0].x,x[0].y,x[1].x,x[1].y],u_coords_bottom:[x[3].x,x[3].y,x[2].x,x[2].y]};var T,C};function xB(S){S*=Math.PI/180;let s=Math.sin(S),d=Math.cos(S);return[(2*d+1)/3,(-Math.sqrt(3)*s-d+1)/3,(Math.sqrt(3)*s-d+1)/3]}let T1=(S,s,d,v,x,T,C,R,q,B,H,Y,$)=>{let ee=C.transform;return{u_is_size_zoom_constant:+(S==="constant"||S==="source"),u_is_size_feature_constant:+(S==="constant"||S==="camera"),u_size_t:s?s.uSizeT:0,u_size:s?s.uSize:0,u_camera_to_center_distance:ee.cameraToCenterDistance,u_pitch:ee.pitch/360*2*Math.PI,u_rotate_symbol:+d,u_aspect_ratio:ee.width/ee.height,u_fade_change:C.options.fadeDuration?C.symbolFadeChange:1,u_label_plane_matrix:R,u_coord_matrix:q,u_is_text:+H,u_pitch_with_map:+v,u_is_along_line:x,u_is_variable_anchor:T,u_texsize:Y,u_texture:0,u_translation:B,u_pitched_scale:$}},YD=(S,s,d,v,x,T,C,R,q,B,H,Y,$,ee)=>{let ie=C.transform;return i.e(T1(S,s,d,v,x,T,C,R,q,B,H,Y,ee),{u_gamma_scale:v?Math.cos(ie.pitch*Math.PI/180)*ie.cameraToCenterDistance:1,u_device_pixel_ratio:C.pixelRatio,u_is_halo:1})},wB=(S,s,d,v,x,T,C,R,q,B,H,Y,$)=>i.e(YD(S,s,d,v,x,T,C,R,q,B,!0,H,0,$),{u_texsize_icon:Y,u_texture_icon:1}),ZD=(S,s)=>({u_opacity:S,u_color:s}),KD=(S,s,d,v,x)=>i.e(function(T,C,R,q){let B=R.imageManager.getPattern(T.from.toString()),H=R.imageManager.getPattern(T.to.toString()),{width:Y,height:$}=R.imageManager.getPixelSize(),ee=Math.pow(2,q.tileID.overscaledZ),ie=q.tileSize*Math.pow(2,R.transform.tileZoom)/ee,ve=ie*(q.tileID.canonical.x+q.tileID.wrap*ee),ge=ie*q.tileID.canonical.y;return{u_image:0,u_pattern_tl_a:B.tl,u_pattern_br_a:B.br,u_pattern_tl_b:H.tl,u_pattern_br_b:H.br,u_texsize:[Y,$],u_mix:C.t,u_pattern_size_a:B.displaySize,u_pattern_size_b:H.displaySize,u_scale_a:C.fromScale,u_scale_b:C.toScale,u_tile_units_to_pixels:1/i.aC(q,1,R.transform.tileZoom),u_pixel_coord_upper:[ve>>16,ge>>16],u_pixel_coord_lower:[65535&ve,65535&ge]}}(d,x,s,v),{u_opacity:S}),W2=(S,s)=>{},$2={fillExtrusion:(S,s)=>({u_lightpos:new i.bT(S,s.u_lightpos),u_lightpos_globe:new i.bT(S,s.u_lightpos_globe),u_lightintensity:new i.bg(S,s.u_lightintensity),u_lightcolor:new i.bT(S,s.u_lightcolor),u_vertical_gradient:new i.bg(S,s.u_vertical_gradient),u_opacity:new i.bg(S,s.u_opacity),u_fill_translate:new i.bU(S,s.u_fill_translate)}),fillExtrusionPattern:(S,s)=>({u_lightpos:new i.bT(S,s.u_lightpos),u_lightpos_globe:new i.bT(S,s.u_lightpos_globe),u_lightintensity:new i.bg(S,s.u_lightintensity),u_lightcolor:new i.bT(S,s.u_lightcolor),u_vertical_gradient:new i.bg(S,s.u_vertical_gradient),u_height_factor:new i.bg(S,s.u_height_factor),u_opacity:new i.bg(S,s.u_opacity),u_fill_translate:new i.bU(S,s.u_fill_translate),u_image:new i.bP(S,s.u_image),u_texsize:new i.bU(S,s.u_texsize),u_pixel_coord_upper:new i.bU(S,s.u_pixel_coord_upper),u_pixel_coord_lower:new i.bU(S,s.u_pixel_coord_lower),u_scale:new i.bT(S,s.u_scale),u_fade:new i.bg(S,s.u_fade)}),fill:(S,s)=>({u_fill_translate:new i.bU(S,s.u_fill_translate)}),fillPattern:(S,s)=>({u_image:new i.bP(S,s.u_image),u_texsize:new i.bU(S,s.u_texsize),u_pixel_coord_upper:new i.bU(S,s.u_pixel_coord_upper),u_pixel_coord_lower:new i.bU(S,s.u_pixel_coord_lower),u_scale:new i.bT(S,s.u_scale),u_fade:new i.bg(S,s.u_fade),u_fill_translate:new i.bU(S,s.u_fill_translate)}),fillOutline:(S,s)=>({u_world:new i.bU(S,s.u_world),u_fill_translate:new i.bU(S,s.u_fill_translate)}),fillOutlinePattern:(S,s)=>({u_world:new i.bU(S,s.u_world),u_image:new i.bP(S,s.u_image),u_texsize:new i.bU(S,s.u_texsize),u_pixel_coord_upper:new i.bU(S,s.u_pixel_coord_upper),u_pixel_coord_lower:new i.bU(S,s.u_pixel_coord_lower),u_scale:new i.bT(S,s.u_scale),u_fade:new i.bg(S,s.u_fade),u_fill_translate:new i.bU(S,s.u_fill_translate)}),circle:(S,s)=>({u_camera_to_center_distance:new i.bg(S,s.u_camera_to_center_distance),u_scale_with_map:new i.bP(S,s.u_scale_with_map),u_pitch_with_map:new i.bP(S,s.u_pitch_with_map),u_extrude_scale:new i.bU(S,s.u_extrude_scale),u_device_pixel_ratio:new i.bg(S,s.u_device_pixel_ratio),u_globe_extrude_scale:new i.bg(S,s.u_globe_extrude_scale),u_translate:new i.bU(S,s.u_translate)}),collisionBox:(S,s)=>({u_pixel_extrude_scale:new i.bU(S,s.u_pixel_extrude_scale)}),collisionCircle:(S,s)=>({u_viewport_size:new i.bU(S,s.u_viewport_size)}),debug:(S,s)=>({u_color:new i.bQ(S,s.u_color),u_overlay:new i.bP(S,s.u_overlay),u_overlay_scale:new i.bg(S,s.u_overlay_scale)}),depth:W2,clippingMask:W2,heatmap:(S,s)=>({u_extrude_scale:new i.bg(S,s.u_extrude_scale),u_intensity:new i.bg(S,s.u_intensity),u_globe_extrude_scale:new i.bg(S,s.u_globe_extrude_scale)}),heatmapTexture:(S,s)=>({u_matrix:new i.bR(S,s.u_matrix),u_world:new i.bU(S,s.u_world),u_image:new i.bP(S,s.u_image),u_color_ramp:new i.bP(S,s.u_color_ramp),u_opacity:new i.bg(S,s.u_opacity)}),hillshade:(S,s)=>({u_image:new i.bP(S,s.u_image),u_latrange:new i.bU(S,s.u_latrange),u_exaggeration:new i.bg(S,s.u_exaggeration),u_altitudes:new i.b_(S,s.u_altitudes),u_azimuths:new i.b_(S,s.u_azimuths),u_accent:new i.bQ(S,s.u_accent),u_method:new i.bP(S,s.u_method),u_shadows:new i.bZ(S,s.u_shadows),u_highlights:new i.bZ(S,s.u_highlights)}),hillshadePrepare:(S,s)=>({u_matrix:new i.bR(S,s.u_matrix),u_image:new i.bP(S,s.u_image),u_dimension:new i.bU(S,s.u_dimension),u_zoom:new i.bg(S,s.u_zoom),u_unpack:new i.bS(S,s.u_unpack)}),colorRelief:(S,s)=>({u_image:new i.bP(S,s.u_image),u_unpack:new i.bS(S,s.u_unpack),u_dimension:new i.bU(S,s.u_dimension),u_elevation_stops:new i.bP(S,s.u_elevation_stops),u_color_stops:new i.bP(S,s.u_color_stops),u_color_ramp_size:new i.bP(S,s.u_color_ramp_size),u_opacity:new i.bg(S,s.u_opacity)}),line:(S,s)=>({u_translation:new i.bU(S,s.u_translation),u_ratio:new i.bg(S,s.u_ratio),u_device_pixel_ratio:new i.bg(S,s.u_device_pixel_ratio),u_units_to_pixels:new i.bU(S,s.u_units_to_pixels)}),lineGradient:(S,s)=>({u_translation:new i.bU(S,s.u_translation),u_ratio:new i.bg(S,s.u_ratio),u_device_pixel_ratio:new i.bg(S,s.u_device_pixel_ratio),u_units_to_pixels:new i.bU(S,s.u_units_to_pixels),u_image:new i.bP(S,s.u_image),u_image_height:new i.bg(S,s.u_image_height)}),linePattern:(S,s)=>({u_translation:new i.bU(S,s.u_translation),u_texsize:new i.bU(S,s.u_texsize),u_ratio:new i.bg(S,s.u_ratio),u_device_pixel_ratio:new i.bg(S,s.u_device_pixel_ratio),u_image:new i.bP(S,s.u_image),u_units_to_pixels:new i.bU(S,s.u_units_to_pixels),u_scale:new i.bT(S,s.u_scale),u_fade:new i.bg(S,s.u_fade)}),lineSDF:(S,s)=>({u_translation:new i.bU(S,s.u_translation),u_ratio:new i.bg(S,s.u_ratio),u_device_pixel_ratio:new i.bg(S,s.u_device_pixel_ratio),u_units_to_pixels:new i.bU(S,s.u_units_to_pixels),u_patternscale_a:new i.bU(S,s.u_patternscale_a),u_patternscale_b:new i.bU(S,s.u_patternscale_b),u_sdfgamma:new i.bg(S,s.u_sdfgamma),u_image:new i.bP(S,s.u_image),u_tex_y_a:new i.bg(S,s.u_tex_y_a),u_tex_y_b:new i.bg(S,s.u_tex_y_b),u_mix:new i.bg(S,s.u_mix)}),raster:(S,s)=>({u_tl_parent:new i.bU(S,s.u_tl_parent),u_scale_parent:new i.bg(S,s.u_scale_parent),u_buffer_scale:new i.bg(S,s.u_buffer_scale),u_fade_t:new i.bg(S,s.u_fade_t),u_opacity:new i.bg(S,s.u_opacity),u_image0:new i.bP(S,s.u_image0),u_image1:new i.bP(S,s.u_image1),u_brightness_low:new i.bg(S,s.u_brightness_low),u_brightness_high:new i.bg(S,s.u_brightness_high),u_saturation_factor:new i.bg(S,s.u_saturation_factor),u_contrast_factor:new i.bg(S,s.u_contrast_factor),u_spin_weights:new i.bT(S,s.u_spin_weights),u_coords_top:new i.bS(S,s.u_coords_top),u_coords_bottom:new i.bS(S,s.u_coords_bottom)}),symbolIcon:(S,s)=>({u_is_size_zoom_constant:new i.bP(S,s.u_is_size_zoom_constant),u_is_size_feature_constant:new i.bP(S,s.u_is_size_feature_constant),u_size_t:new i.bg(S,s.u_size_t),u_size:new i.bg(S,s.u_size),u_camera_to_center_distance:new i.bg(S,s.u_camera_to_center_distance),u_pitch:new i.bg(S,s.u_pitch),u_rotate_symbol:new i.bP(S,s.u_rotate_symbol),u_aspect_ratio:new i.bg(S,s.u_aspect_ratio),u_fade_change:new i.bg(S,s.u_fade_change),u_label_plane_matrix:new i.bR(S,s.u_label_plane_matrix),u_coord_matrix:new i.bR(S,s.u_coord_matrix),u_is_text:new i.bP(S,s.u_is_text),u_pitch_with_map:new i.bP(S,s.u_pitch_with_map),u_is_along_line:new i.bP(S,s.u_is_along_line),u_is_variable_anchor:new i.bP(S,s.u_is_variable_anchor),u_texsize:new i.bU(S,s.u_texsize),u_texture:new i.bP(S,s.u_texture),u_translation:new i.bU(S,s.u_translation),u_pitched_scale:new i.bg(S,s.u_pitched_scale)}),symbolSDF:(S,s)=>({u_is_size_zoom_constant:new i.bP(S,s.u_is_size_zoom_constant),u_is_size_feature_constant:new i.bP(S,s.u_is_size_feature_constant),u_size_t:new i.bg(S,s.u_size_t),u_size:new i.bg(S,s.u_size),u_camera_to_center_distance:new i.bg(S,s.u_camera_to_center_distance),u_pitch:new i.bg(S,s.u_pitch),u_rotate_symbol:new i.bP(S,s.u_rotate_symbol),u_aspect_ratio:new i.bg(S,s.u_aspect_ratio),u_fade_change:new i.bg(S,s.u_fade_change),u_label_plane_matrix:new i.bR(S,s.u_label_plane_matrix),u_coord_matrix:new i.bR(S,s.u_coord_matrix),u_is_text:new i.bP(S,s.u_is_text),u_pitch_with_map:new i.bP(S,s.u_pitch_with_map),u_is_along_line:new i.bP(S,s.u_is_along_line),u_is_variable_anchor:new i.bP(S,s.u_is_variable_anchor),u_texsize:new i.bU(S,s.u_texsize),u_texture:new i.bP(S,s.u_texture),u_gamma_scale:new i.bg(S,s.u_gamma_scale),u_device_pixel_ratio:new i.bg(S,s.u_device_pixel_ratio),u_is_halo:new i.bP(S,s.u_is_halo),u_translation:new i.bU(S,s.u_translation),u_pitched_scale:new i.bg(S,s.u_pitched_scale)}),symbolTextAndIcon:(S,s)=>({u_is_size_zoom_constant:new i.bP(S,s.u_is_size_zoom_constant),u_is_size_feature_constant:new i.bP(S,s.u_is_size_feature_constant),u_size_t:new i.bg(S,s.u_size_t),u_size:new i.bg(S,s.u_size),u_camera_to_center_distance:new i.bg(S,s.u_camera_to_center_distance),u_pitch:new i.bg(S,s.u_pitch),u_rotate_symbol:new i.bP(S,s.u_rotate_symbol),u_aspect_ratio:new i.bg(S,s.u_aspect_ratio),u_fade_change:new i.bg(S,s.u_fade_change),u_label_plane_matrix:new i.bR(S,s.u_label_plane_matrix),u_coord_matrix:new i.bR(S,s.u_coord_matrix),u_is_text:new i.bP(S,s.u_is_text),u_pitch_with_map:new i.bP(S,s.u_pitch_with_map),u_is_along_line:new i.bP(S,s.u_is_along_line),u_is_variable_anchor:new i.bP(S,s.u_is_variable_anchor),u_texsize:new i.bU(S,s.u_texsize),u_texsize_icon:new i.bU(S,s.u_texsize_icon),u_texture:new i.bP(S,s.u_texture),u_texture_icon:new i.bP(S,s.u_texture_icon),u_gamma_scale:new i.bg(S,s.u_gamma_scale),u_device_pixel_ratio:new i.bg(S,s.u_device_pixel_ratio),u_is_halo:new i.bP(S,s.u_is_halo),u_translation:new i.bU(S,s.u_translation),u_pitched_scale:new i.bg(S,s.u_pitched_scale)}),background:(S,s)=>({u_opacity:new i.bg(S,s.u_opacity),u_color:new i.bQ(S,s.u_color)}),backgroundPattern:(S,s)=>({u_opacity:new i.bg(S,s.u_opacity),u_image:new i.bP(S,s.u_image),u_pattern_tl_a:new i.bU(S,s.u_pattern_tl_a),u_pattern_br_a:new i.bU(S,s.u_pattern_br_a),u_pattern_tl_b:new i.bU(S,s.u_pattern_tl_b),u_pattern_br_b:new i.bU(S,s.u_pattern_br_b),u_texsize:new i.bU(S,s.u_texsize),u_mix:new i.bg(S,s.u_mix),u_pattern_size_a:new i.bU(S,s.u_pattern_size_a),u_pattern_size_b:new i.bU(S,s.u_pattern_size_b),u_scale_a:new i.bg(S,s.u_scale_a),u_scale_b:new i.bg(S,s.u_scale_b),u_pixel_coord_upper:new i.bU(S,s.u_pixel_coord_upper),u_pixel_coord_lower:new i.bU(S,s.u_pixel_coord_lower),u_tile_units_to_pixels:new i.bg(S,s.u_tile_units_to_pixels)}),terrain:(S,s)=>({u_texture:new i.bP(S,s.u_texture),u_ele_delta:new i.bg(S,s.u_ele_delta),u_fog_matrix:new i.bR(S,s.u_fog_matrix),u_fog_color:new i.bQ(S,s.u_fog_color),u_fog_ground_blend:new i.bg(S,s.u_fog_ground_blend),u_fog_ground_blend_opacity:new i.bg(S,s.u_fog_ground_blend_opacity),u_horizon_color:new i.bQ(S,s.u_horizon_color),u_horizon_fog_blend:new i.bg(S,s.u_horizon_fog_blend),u_is_globe_mode:new i.bg(S,s.u_is_globe_mode)}),terrainDepth:(S,s)=>({u_ele_delta:new i.bg(S,s.u_ele_delta)}),terrainCoords:(S,s)=>({u_texture:new i.bP(S,s.u_texture),u_terrain_coords_id:new i.bg(S,s.u_terrain_coords_id),u_ele_delta:new i.bg(S,s.u_ele_delta)}),projectionErrorMeasurement:(S,s)=>({u_input:new i.bg(S,s.u_input),u_output_expected:new i.bg(S,s.u_output_expected)}),atmosphere:(S,s)=>({u_sun_pos:new i.bT(S,s.u_sun_pos),u_atmosphere_blend:new i.bg(S,s.u_atmosphere_blend),u_globe_position:new i.bT(S,s.u_globe_position),u_globe_radius:new i.bg(S,s.u_globe_radius),u_inv_proj_matrix:new i.bR(S,s.u_inv_proj_matrix)}),sky:(S,s)=>({u_sky_color:new i.bQ(S,s.u_sky_color),u_horizon_color:new i.bQ(S,s.u_horizon_color),u_horizon:new i.bU(S,s.u_horizon),u_horizon_normal:new i.bU(S,s.u_horizon_normal),u_sky_horizon_blend:new i.bg(S,s.u_sky_horizon_blend),u_sky_blend:new i.bg(S,s.u_sky_blend)})};class XD{constructor(s,d,v){this.context=s;let x=s.gl;this.buffer=x.createBuffer(),this.dynamicDraw=!!v,this.context.unbindVAO(),s.bindElementBuffer.set(this.buffer),x.bufferData(x.ELEMENT_ARRAY_BUFFER,d.arrayBuffer,this.dynamicDraw?x.DYNAMIC_DRAW:x.STATIC_DRAW),this.dynamicDraw||delete d.arrayBuffer}bind(){this.context.bindElementBuffer.set(this.buffer)}updateData(s){let d=this.context.gl;if(!this.dynamicDraw)throw new Error("Attempted to update data while not in dynamic mode.");this.context.unbindVAO(),this.bind(),d.bufferSubData(d.ELEMENT_ARRAY_BUFFER,0,s.arrayBuffer)}destroy(){this.buffer&&(this.context.gl.deleteBuffer(this.buffer),delete this.buffer)}}let wx={Int8:"BYTE",Uint8:"UNSIGNED_BYTE",Int16:"SHORT",Uint16:"UNSIGNED_SHORT",Int32:"INT",Uint32:"UNSIGNED_INT",Float32:"FLOAT"};class td{constructor(s,d,v,x){this.length=d.length,this.attributes=v,this.itemSize=d.bytesPerElement,this.dynamicDraw=x,this.context=s;let T=s.gl;this.buffer=T.createBuffer(),s.bindVertexBuffer.set(this.buffer),T.bufferData(T.ARRAY_BUFFER,d.arrayBuffer,this.dynamicDraw?T.DYNAMIC_DRAW:T.STATIC_DRAW),this.dynamicDraw||delete d.arrayBuffer}bind(){this.context.bindVertexBuffer.set(this.buffer)}updateData(s){if(s.length!==this.length)throw new Error(`Length of new data is ${s.length}, which doesn't match current length of ${this.length}`);let d=this.context.gl;this.bind(),d.bufferSubData(d.ARRAY_BUFFER,0,s.arrayBuffer)}enableAttributes(s,d){for(let v=0;v<this.attributes.length;v++){let x=d.attributes[this.attributes[v].name];x!==void 0&&s.enableVertexAttribArray(x)}}setVertexAttribPointers(s,d,v){for(let x=0;x<this.attributes.length;x++){let T=this.attributes[x],C=d.attributes[T.name];C!==void 0&&s.vertexAttribPointer(C,T.components,s[wx[T.type]],!1,this.itemSize,T.offset+this.itemSize*(v||0))}}destroy(){this.buffer&&(this.context.gl.deleteBuffer(this.buffer),delete this.buffer)}}class xo{constructor(s){this.gl=s.gl,this.default=this.getDefault(),this.current=this.default,this.dirty=!1}get(){return this.current}set(s){}getDefault(){return this.default}setDefault(){this.set(this.default)}}class Y2 extends xo{getDefault(){return i.bf.transparent}set(s){let d=this.current;(s.r!==d.r||s.g!==d.g||s.b!==d.b||s.a!==d.a||this.dirty)&&(this.gl.clearColor(s.r,s.g,s.b,s.a),this.current=s,this.dirty=!1)}}class Z2 extends xo{getDefault(){return 1}set(s){(s!==this.current||this.dirty)&&(this.gl.clearDepth(s),this.current=s,this.dirty=!1)}}class JD extends xo{getDefault(){return 0}set(s){(s!==this.current||this.dirty)&&(this.gl.clearStencil(s),this.current=s,this.dirty=!1)}}class K2 extends xo{getDefault(){return[!0,!0,!0,!0]}set(s){let d=this.current;(s[0]!==d[0]||s[1]!==d[1]||s[2]!==d[2]||s[3]!==d[3]||this.dirty)&&(this.gl.colorMask(s[0],s[1],s[2],s[3]),this.current=s,this.dirty=!1)}}class $m extends xo{getDefault(){return!0}set(s){(s!==this.current||this.dirty)&&(this.gl.depthMask(s),this.current=s,this.dirty=!1)}}class X2 extends xo{getDefault(){return 255}set(s){(s!==this.current||this.dirty)&&(this.gl.stencilMask(s),this.current=s,this.dirty=!1)}}class EB extends xo{getDefault(){return{func:this.gl.ALWAYS,ref:0,mask:255}}set(s){let d=this.current;(s.func!==d.func||s.ref!==d.ref||s.mask!==d.mask||this.dirty)&&(this.gl.stencilFunc(s.func,s.ref,s.mask),this.current=s,this.dirty=!1)}}class SB extends xo{getDefault(){let s=this.gl;return[s.KEEP,s.KEEP,s.KEEP]}set(s){let d=this.current;(s[0]!==d[0]||s[1]!==d[1]||s[2]!==d[2]||this.dirty)&&(this.gl.stencilOp(s[0],s[1],s[2]),this.current=s,this.dirty=!1)}}class TB extends xo{getDefault(){return!1}set(s){if(s===this.current&&!this.dirty)return;let d=this.gl;s?d.enable(d.STENCIL_TEST):d.disable(d.STENCIL_TEST),this.current=s,this.dirty=!1}}class IB extends xo{getDefault(){return[0,1]}set(s){let d=this.current;(s[0]!==d[0]||s[1]!==d[1]||this.dirty)&&(this.gl.depthRange(s[0],s[1]),this.current=s,this.dirty=!1)}}class QD extends xo{getDefault(){return!1}set(s){if(s===this.current&&!this.dirty)return;let d=this.gl;s?d.enable(d.DEPTH_TEST):d.disable(d.DEPTH_TEST),this.current=s,this.dirty=!1}}class MB extends xo{getDefault(){return this.gl.LESS}set(s){(s!==this.current||this.dirty)&&(this.gl.depthFunc(s),this.current=s,this.dirty=!1)}}class eN extends xo{getDefault(){return!1}set(s){if(s===this.current&&!this.dirty)return;let d=this.gl;s?d.enable(d.BLEND):d.disable(d.BLEND),this.current=s,this.dirty=!1}}class Ex extends xo{getDefault(){let s=this.gl;return[s.ONE,s.ZERO]}set(s){let d=this.current;(s[0]!==d[0]||s[1]!==d[1]||this.dirty)&&(this.gl.blendFunc(s[0],s[1]),this.current=s,this.dirty=!1)}}class Sx extends xo{getDefault(){return i.bf.transparent}set(s){let d=this.current;(s.r!==d.r||s.g!==d.g||s.b!==d.b||s.a!==d.a||this.dirty)&&(this.gl.blendColor(s.r,s.g,s.b,s.a),this.current=s,this.dirty=!1)}}class Tx extends xo{getDefault(){return this.gl.FUNC_ADD}set(s){(s!==this.current||this.dirty)&&(this.gl.blendEquation(s),this.current=s,this.dirty=!1)}}class J2 extends xo{getDefault(){return!1}set(s){if(s===this.current&&!this.dirty)return;let d=this.gl;s?d.enable(d.CULL_FACE):d.disable(d.CULL_FACE),this.current=s,this.dirty=!1}}class Ym extends xo{getDefault(){return this.gl.BACK}set(s){(s!==this.current||this.dirty)&&(this.gl.cullFace(s),this.current=s,this.dirty=!1)}}class I1 extends xo{getDefault(){return this.gl.CCW}set(s){(s!==this.current||this.dirty)&&(this.gl.frontFace(s),this.current=s,this.dirty=!1)}}class Iv extends xo{getDefault(){return null}set(s){(s!==this.current||this.dirty)&&(this.gl.useProgram(s),this.current=s,this.dirty=!1)}}class ic extends xo{getDefault(){return this.gl.TEXTURE0}set(s){(s!==this.current||this.dirty)&&(this.gl.activeTexture(s),this.current=s,this.dirty=!1)}}class tN extends xo{getDefault(){let s=this.gl;return[0,0,s.drawingBufferWidth,s.drawingBufferHeight]}set(s){let d=this.current;(s[0]!==d[0]||s[1]!==d[1]||s[2]!==d[2]||s[3]!==d[3]||this.dirty)&&(this.gl.viewport(s[0],s[1],s[2],s[3]),this.current=s,this.dirty=!1)}}class rN extends xo{getDefault(){return null}set(s){if(s===this.current&&!this.dirty)return;let d=this.gl;d.bindFramebuffer(d.FRAMEBUFFER,s),this.current=s,this.dirty=!1}}class Q2 extends xo{getDefault(){return null}set(s){if(s===this.current&&!this.dirty)return;let d=this.gl;d.bindRenderbuffer(d.RENDERBUFFER,s),this.current=s,this.dirty=!1}}class Zm extends xo{getDefault(){return null}set(s){if(s===this.current&&!this.dirty)return;let d=this.gl;d.bindTexture(d.TEXTURE_2D,s),this.current=s,this.dirty=!1}}class Ix extends xo{getDefault(){return null}set(s){if(s===this.current&&!this.dirty)return;let d=this.gl;d.bindBuffer(d.ARRAY_BUFFER,s),this.current=s,this.dirty=!1}}class Mx extends xo{getDefault(){return null}set(s){let d=this.gl;d.bindBuffer(d.ELEMENT_ARRAY_BUFFER,s),this.current=s,this.dirty=!1}}class M1 extends xo{getDefault(){return null}set(s){var d;if(s===this.current&&!this.dirty)return;let v=this.gl;Rp(v)?v.bindVertexArray(s):(d=v.getExtension("OES_vertex_array_object"))===null||d===void 0||d.bindVertexArrayOES(s),this.current=s,this.dirty=!1}}class Cx extends xo{getDefault(){return 4}set(s){if(s===this.current&&!this.dirty)return;let d=this.gl;d.pixelStorei(d.UNPACK_ALIGNMENT,s),this.current=s,this.dirty=!1}}class nN extends xo{getDefault(){return!1}set(s){if(s===this.current&&!this.dirty)return;let d=this.gl;d.pixelStorei(d.UNPACK_PREMULTIPLY_ALPHA_WEBGL,s),this.current=s,this.dirty=!1}}class Mv extends xo{getDefault(){return!1}set(s){if(s===this.current&&!this.dirty)return;let d=this.gl;d.pixelStorei(d.UNPACK_FLIP_Y_WEBGL,s),this.current=s,this.dirty=!1}}class hh extends xo{constructor(s,d){super(s),this.context=s,this.parent=d}getDefault(){return null}}class oN extends hh{setDirty(){this.dirty=!0}set(s){if(s===this.current&&!this.dirty)return;this.context.bindFramebuffer.set(this.parent);let d=this.gl;d.framebufferTexture2D(d.FRAMEBUFFER,d.COLOR_ATTACHMENT0,d.TEXTURE_2D,s,0),this.current=s,this.dirty=!1}}class eI extends hh{set(s){if(s===this.current&&!this.dirty)return;this.context.bindFramebuffer.set(this.parent);let d=this.gl;d.framebufferRenderbuffer(d.FRAMEBUFFER,d.DEPTH_ATTACHMENT,d.RENDERBUFFER,s),this.current=s,this.dirty=!1}}class Xn extends hh{set(s){if(s===this.current&&!this.dirty)return;this.context.bindFramebuffer.set(this.parent);let d=this.gl;d.framebufferRenderbuffer(d.FRAMEBUFFER,d.DEPTH_STENCIL_ATTACHMENT,d.RENDERBUFFER,s),this.current=s,this.dirty=!1}}let C1="Framebuffer is not complete";class CB{constructor(s,d,v,x,T){this.context=s,this.width=d,this.height=v;let C=s.gl,R=this.framebuffer=C.createFramebuffer();if(this.colorAttachment=new oN(s,R),x)this.depthAttachment=T?new Xn(s,R):new eI(s,R);else if(T)throw new Error("Stencil cannot be set without depth");if(C.checkFramebufferStatus(C.FRAMEBUFFER)!==C.FRAMEBUFFER_COMPLETE)throw new Error(C1)}destroy(){let s=this.context.gl,d=this.colorAttachment.get();if(d&&s.deleteTexture(d),this.depthAttachment){let v=this.depthAttachment.get();v&&s.deleteRenderbuffer(v)}s.deleteFramebuffer(this.framebuffer)}}class iN{constructor(s){var d,v;if(this.gl=s,this.clearColor=new Y2(this),this.clearDepth=new Z2(this),this.clearStencil=new JD(this),this.colorMask=new K2(this),this.depthMask=new $m(this),this.stencilMask=new X2(this),this.stencilFunc=new EB(this),this.stencilOp=new SB(this),this.stencilTest=new TB(this),this.depthRange=new IB(this),this.depthTest=new QD(this),this.depthFunc=new MB(this),this.blend=new eN(this),this.blendFunc=new Ex(this),this.blendColor=new Sx(this),this.blendEquation=new Tx(this),this.cullFace=new J2(this),this.cullFaceSide=new Ym(this),this.frontFace=new I1(this),this.program=new Iv(this),this.activeTexture=new ic(this),this.viewport=new tN(this),this.bindFramebuffer=new rN(this),this.bindRenderbuffer=new Q2(this),this.bindTexture=new Zm(this),this.bindVertexBuffer=new Ix(this),this.bindElementBuffer=new Mx(this),this.bindVertexArray=new M1(this),this.pixelStoreUnpack=new Cx(this),this.pixelStoreUnpackPremultiplyAlpha=new nN(this),this.pixelStoreUnpackFlipY=new Mv(this),this.extTextureFilterAnisotropic=s.getExtension("EXT_texture_filter_anisotropic")||s.getExtension("MOZ_EXT_texture_filter_anisotropic")||s.getExtension("WEBKIT_EXT_texture_filter_anisotropic"),this.extTextureFilterAnisotropic&&(this.extTextureFilterAnisotropicMax=s.getParameter(this.extTextureFilterAnisotropic.MAX_TEXTURE_MAX_ANISOTROPY_EXT)),this.maxTextureSize=s.getParameter(s.MAX_TEXTURE_SIZE),Rp(s)){this.HALF_FLOAT=s.HALF_FLOAT;let x=s.getExtension("EXT_color_buffer_half_float");this.RGBA16F=(d=s.RGBA16F)!==null&&d!==void 0?d:x==null?void 0:x.RGBA16F_EXT,this.RGB16F=(v=s.RGB16F)!==null&&v!==void 0?v:x==null?void 0:x.RGB16F_EXT,s.getExtension("EXT_color_buffer_float")}else{s.getExtension("EXT_color_buffer_half_float"),s.getExtension("OES_texture_half_float_linear");let x=s.getExtension("OES_texture_half_float");this.HALF_FLOAT=x==null?void 0:x.HALF_FLOAT_OES}}setDefault(){this.unbindVAO(),this.clearColor.setDefault(),this.clearDepth.setDefault(),this.clearStencil.setDefault(),this.colorMask.setDefault(),this.depthMask.setDefault(),this.stencilMask.setDefault(),this.stencilFunc.setDefault(),this.stencilOp.setDefault(),this.stencilTest.setDefault(),this.depthRange.setDefault(),this.depthTest.setDefault(),this.depthFunc.setDefault(),this.blend.setDefault(),this.blendFunc.setDefault(),this.blendColor.setDefault(),this.blendEquation.setDefault(),this.cullFace.setDefault(),this.cullFaceSide.setDefault(),this.frontFace.setDefault(),this.program.setDefault(),this.activeTexture.setDefault(),this.bindFramebuffer.setDefault(),this.pixelStoreUnpack.setDefault(),this.pixelStoreUnpackPremultiplyAlpha.setDefault(),this.pixelStoreUnpackFlipY.setDefault()}setDirty(){this.clearColor.dirty=!0,this.clearDepth.dirty=!0,this.clearStencil.dirty=!0,this.colorMask.dirty=!0,this.depthMask.dirty=!0,this.stencilMask.dirty=!0,this.stencilFunc.dirty=!0,this.stencilOp.dirty=!0,this.stencilTest.dirty=!0,this.depthRange.dirty=!0,this.depthTest.dirty=!0,this.depthFunc.dirty=!0,this.blend.dirty=!0,this.blendFunc.dirty=!0,this.blendColor.dirty=!0,this.blendEquation.dirty=!0,this.cullFace.dirty=!0,this.cullFaceSide.dirty=!0,this.frontFace.dirty=!0,this.program.dirty=!0,this.activeTexture.dirty=!0,this.viewport.dirty=!0,this.bindFramebuffer.dirty=!0,this.bindRenderbuffer.dirty=!0,this.bindTexture.dirty=!0,this.bindVertexBuffer.dirty=!0,this.bindElementBuffer.dirty=!0,this.bindVertexArray.dirty=!0,this.pixelStoreUnpack.dirty=!0,this.pixelStoreUnpackPremultiplyAlpha.dirty=!0,this.pixelStoreUnpackFlipY.dirty=!0}createIndexBuffer(s,d){return new XD(this,s,d)}createVertexBuffer(s,d,v){return new td(this,s,d,v)}createRenderbuffer(s,d,v){let x=this.gl,T=x.createRenderbuffer();return this.bindRenderbuffer.set(T),x.renderbufferStorage(x.RENDERBUFFER,s,d,v),this.bindRenderbuffer.set(null),T}createFramebuffer(s,d,v,x){return new CB(this,s,d,v,x)}clear({color:s,depth:d,stencil:v}){let x=this.gl,T=0;s&&(T|=x.COLOR_BUFFER_BIT,this.clearColor.set(s),this.colorMask.set([!0,!0,!0,!0])),d!==void 0&&(T|=x.DEPTH_BUFFER_BIT,this.depthRange.set([0,1]),this.clearDepth.set(d),this.depthMask.set(!0)),v!==void 0&&(T|=x.STENCIL_BUFFER_BIT,this.clearStencil.set(v),this.stencilMask.set(255)),x.clear(T)}setCullFace(s){s.enable===!1?this.cullFace.set(!1):(this.cullFace.set(!0),this.cullFaceSide.set(s.mode),this.frontFace.set(s.frontFace))}setDepthMode(s){s.func!==this.gl.ALWAYS||s.mask?(this.depthTest.set(!0),this.depthFunc.set(s.func),this.depthMask.set(s.mask),this.depthRange.set(s.range)):this.depthTest.set(!1)}setStencilMode(s){s.test.func!==this.gl.ALWAYS||s.mask?(this.stencilTest.set(!0),this.stencilMask.set(s.mask),this.stencilOp.set([s.fail,s.depthFail,s.pass]),this.stencilFunc.set({func:s.test.func,ref:s.ref,mask:s.test.mask})):this.stencilTest.set(!1)}setColorMode(s){i.bH(s.blendFunction,bi.Replace)?this.blend.set(!1):(this.blend.set(!0),this.blendFunc.set(s.blendFunction),this.blendColor.set(s.blendColor)),this.colorMask.set(s.mask)}createVertexArray(){var s;return Rp(this.gl)?this.gl.createVertexArray():(s=this.gl.getExtension("OES_vertex_array_object"))===null||s===void 0?void 0:s.createVertexArrayOES()}deleteVertexArray(s){var d;return Rp(this.gl)?this.gl.deleteVertexArray(s):(d=this.gl.getExtension("OES_vertex_array_object"))===null||d===void 0?void 0:d.deleteVertexArrayOES(s)}unbindVAO(){this.bindVertexArray.set(null)}}let mh;function aN(S,s,d,v,x){let T=S.context,C=S.transform,R=T.gl,q=S.useProgram("collisionBox"),B=[],H=0,Y=0;for(let ye=0;ye<v.length;ye++){let Me=v[ye],Re=s.getTile(Me).getBucket(d);if(!Re)continue;let Pe=x?Re.textCollisionBox:Re.iconCollisionBox,ze=Re.collisionCircleArray;ze.length>0&&(B.push({circleArray:ze,circleOffset:Y,coord:Me}),H+=ze.length/4,Y=H),Pe&&q.draw(T,R.LINES,wn.disabled,uo.disabled,S.colorModeForRenderPass(),Xr.disabled,bx(S.transform),S.style.map.terrain&&S.style.map.terrain.getTerrainData(Me),C.getProjectionData({overscaledTileID:Me,applyGlobeMatrix:!0,applyTerrainMatrix:!0}),d.id,Pe.layoutVertexBuffer,Pe.indexBuffer,Pe.segments,null,S.transform.zoom,null,null,Pe.collisionVertexBuffer)}if(!x||!B.length)return;let $=S.useProgram("collisionCircle"),ee=new i.b$;ee.resize(4*H),ee._trim();let ie=0;for(let ye of B)for(let Me=0;Me<ye.circleArray.length/4;Me++){let Re=4*Me,Pe=ye.circleArray[Re+0],ze=ye.circleArray[Re+1],He=ye.circleArray[Re+2],Le=ye.circleArray[Re+3];ee.emplace(ie++,Pe,ze,He,Le,0),ee.emplace(ie++,Pe,ze,He,Le,1),ee.emplace(ie++,Pe,ze,He,Le,2),ee.emplace(ie++,Pe,ze,He,Le,3)}(!mh||mh.length<2*H)&&(mh=function(ye){let Me=2*ye,Re=new i.c1;Re.resize(Me),Re._trim();for(let Pe=0;Pe<Me;Pe++){let ze=6*Pe;Re.uint16[ze+0]=4*Pe+0,Re.uint16[ze+1]=4*Pe+1,Re.uint16[ze+2]=4*Pe+2,Re.uint16[ze+3]=4*Pe+2,Re.uint16[ze+4]=4*Pe+3,Re.uint16[ze+5]=4*Pe+0}return Re}(H));let ve=T.createIndexBuffer(mh,!0),ge=T.createVertexBuffer(ee,i.c0.members,!0);for(let ye of B){let Me=_B(S.transform);$.draw(T,R.TRIANGLES,wn.disabled,uo.disabled,S.colorModeForRenderPass(),Xr.disabled,Me,S.style.map.terrain&&S.style.map.terrain.getTerrainData(ye.coord),null,d.id,ge,ve,i.aM.simpleSegment(0,2*ye.circleOffset,ye.circleArray.length,ye.circleArray.length/2),null,S.transform.zoom,null,null,null)}ge.destroy(),ve.destroy()}let AB=i.ag(new Float32Array(16));function sN(S,s,d,v,x,T){let{horizontalAlign:C,verticalAlign:R}=i.aH(S);return new i.P((-(C-.5)*s/x+v[0])*T,(-(R-.5)*d/x+v[1])*T)}function OB(S,s,d,v,x,T){let C=s.tileAnchorPoint.add(new i.P(s.translation[0],s.translation[1]));if(s.pitchWithMap){let R=v.mult(T);d||(R=R.rotate(-x));let q=C.add(R);return Er(q.x,q.y,s.pitchedLabelPlaneMatrix,s.getElevation).point}if(d){let R=vn(s.tileAnchorPoint.x+1,s.tileAnchorPoint.y,s).point.sub(S),q=Math.atan(R.y/R.x)+(R.x<0?Math.PI:0);return S.add(v.rotate(q))}return S.add(v)}function tI(S,s,d,v,x,T,C,R,q,B,H,Y){let $=S.text.placedSymbolArray,ee=S.text.dynamicLayoutVertexArray,ie=S.icon.dynamicLayoutVertexArray,ve={};ee.clear();for(let ge=0;ge<$.length;ge++){let ye=$.get(ge),Me=ye.hidden||!ye.crossTileID||S.allowVerticalPlacement&&!ye.placedOrientation?null:v[ye.crossTileID];if(Me){let Re=new i.P(ye.anchorX,ye.anchorY),Pe={getElevation:Y,width:x.width,height:x.height,pitchedLabelPlaneMatrix:T,pitchWithMap:d,transform:x,tileAnchorPoint:Re,translation:B,unwrappedTileID:H},ze=d?An(Re.x,Re.y,Pe):vn(Re.x,Re.y,Pe),He=Rt(x.cameraToCenterDistance,ze.signedDistanceFromCamera),Le=i.ap(S.textSizeData,R,ye)*He/i.aB;d&&(Le*=S.tilePixelRatio/C);let{width:Qe,height:ht,anchor:it,textOffset:at,textBoxScale:dt}=Me,Vt=sN(it,Qe,ht,at,dt,Le),$t=x.getPitchedTextCorrection(Re.x+B[0],Re.y+B[1],H),Nt=OB(ze.point,Pe,s,Vt,-x.bearingInRadians,$t),xr=S.allowVerticalPlacement&&ye.placedOrientation===i.ao.vertical?Math.PI/2:0;for(let Pn=0;Pn<ye.numGlyphs;Pn++)i.av(ee,Nt,xr);q&&ye.associatedIconIndex>=0&&(ve[ye.associatedIconIndex]={shiftedAnchor:Nt,angle:xr})}else sn(ye.numGlyphs,ee)}if(q){ie.clear();let ge=S.icon.placedSymbolArray;for(let ye=0;ye<ge.length;ye++){let Me=ge.get(ye);if(Me.hidden)sn(Me.numGlyphs,ie);else{let Re=ve[ye];if(Re)for(let Pe=0;Pe<Me.numGlyphs;Pe++)i.av(ie,Re.shiftedAnchor,Re.angle);else sn(Me.numGlyphs,ie)}}S.icon.dynamicLayoutVertexBuffer.updateData(ie)}S.text.dynamicLayoutVertexBuffer.updateData(ee)}function Ax(S,s,d){return d.iconsInText&&s?"symbolTextAndIcon":S?"symbolSDF":"symbolIcon"}function A1(S,s,d,v,x,T,C,R,q,B,H,Y,$){let ee=S.context,ie=ee.gl,ve=S.transform,ge=R==="map",ye=q==="map",Me=R!=="viewport"&&d.layout.get("symbol-placement")!=="point",Re=ge&&!ye&&!Me,Pe=!d.layout.get("symbol-sort-key").isConstant(),ze=!1,He=S.getDepthModeForSublayer(0,wn.ReadOnly),Le=d._unevaluatedLayout.hasValue("text-variable-anchor")||d._unevaluatedLayout.hasValue("text-variable-anchor-offset"),Qe=[],ht=ve.getCircleRadiusCorrection();for(let it of v){let at=s.getTile(it),dt=at.getBucket(d);if(!dt)continue;let Vt=x?dt.text:dt.icon;if(!Vt||!Vt.segments.get().length||!Vt.hasVisibleVertices)continue;let $t=Vt.programConfigurations.get(d.id),Nt=x||dt.sdfIcons,xr=x?dt.textSizeData:dt.iconSizeData,Pn=ye||ve.pitch!==0,So=S.useProgram(Ax(Nt,x,dt),$t),Jo=i.an(xr,ve.zoom),Go=S.style.map.terrain&&S.style.map.terrain.getTerrainData(it),qi,Xi,Mn,Qo,Ia=[0,0],Fa=null;if(x)Xi=at.glyphAtlasTexture,Mn=ie.LINEAR,qi=at.glyphAtlasTexture.size,dt.iconsInText&&(Ia=at.imageAtlasTexture.size,Fa=at.imageAtlasTexture,Qo=Pn||S.options.rotating||S.options.zooming||xr.kind==="composite"||xr.kind==="camera"?ie.LINEAR:ie.NEAREST);else{let Ma=d.layout.get("icon-size").constantOr(0)!==1||dt.iconsNeedLinear;Xi=at.imageAtlasTexture,Mn=Nt||S.options.rotating||S.options.zooming||Ma||Pn?ie.LINEAR:ie.NEAREST,qi=at.imageAtlasTexture.size}let ls=i.aC(at,1,S.transform.zoom),gl=ln(ge,S.transform,ls),op=i.L();i.aq(op,gl);let vh=Ar(ye,ge,S.transform,ls),yh=i.aD(ve,at,T,C),zv=ve.getProjectionData({overscaledTileID:it,applyGlobeMatrix:!$,applyTerrainMatrix:!0}),Fv=Le&&dt.hasTextData(),rg=d.layout.get("icon-text-fit")!=="none"&&Fv&&dt.hasIconData();if(Me){let Ma=S.style.map.terrain?(lc,Ca)=>S.style.map.terrain.getElevation(it,lc,Ca):null,Ua=d.layout.get("text-rotation-alignment")==="map";Ko(dt,S,x,gl,op,ye,B,Ua,it.toUnwrapped(),ve.width,ve.height,yh,Ma)}let ng=x&&Le||rg,Ql=Me||ng?AB:ye?gl:S.transform.clipSpaceToPixelsMatrix,ip=Nt&&d.paint.get(x?"text-halo-width":"icon-halo-width").constantOr(1)!==0,vl;vl=Nt?dt.iconsInText?wB(xr.kind,Jo,Re,ye,Me,ng,S,Ql,vh,yh,qi,Ia,ht):YD(xr.kind,Jo,Re,ye,Me,ng,S,Ql,vh,yh,x,qi,0,ht):T1(xr.kind,Jo,Re,ye,Me,ng,S,Ql,vh,yh,x,qi,ht);let _h={program:So,buffers:Vt,uniformValues:vl,projectionData:zv,atlasTexture:Xi,atlasTextureIcon:Fa,atlasInterpolation:Mn,atlasInterpolationIcon:Qo,isSDF:Nt,hasHalo:ip};if(Pe&&dt.canOverlap){ze=!0;let Ma=Vt.segments.get();for(let Ua of Ma)Qe.push({segments:new i.aM([Ua]),sortKey:Ua.sortKey,state:_h,terrainData:Go})}else Qe.push({segments:Vt.segments,sortKey:0,state:_h,terrainData:Go})}ze&&Qe.sort((it,at)=>it.sortKey-at.sortKey);for(let it of Qe){let at=it.state;if(ee.activeTexture.set(ie.TEXTURE0),at.atlasTexture.bind(at.atlasInterpolation,ie.CLAMP_TO_EDGE),at.atlasTextureIcon&&(ee.activeTexture.set(ie.TEXTURE1),at.atlasTextureIcon&&at.atlasTextureIcon.bind(at.atlasInterpolationIcon,ie.CLAMP_TO_EDGE)),at.isSDF){let dt=at.uniformValues;at.hasHalo&&(dt.u_is_halo=1,O1(at.buffers,it.segments,d,S,at.program,He,H,Y,dt,at.projectionData,it.terrainData)),dt.u_is_halo=0}O1(at.buffers,it.segments,d,S,at.program,He,H,Y,at.uniformValues,at.projectionData,it.terrainData)}}function O1(S,s,d,v,x,T,C,R,q,B,H){let Y=v.context;x.draw(Y,Y.gl.TRIANGLES,T,C,R,Xr.backCCW,q,H,B,d.id,S.layoutVertexBuffer,S.indexBuffer,s,d.paint,v.transform.zoom,S.programConfigurations.get(d.id),S.dynamicLayoutVertexBuffer,S.opacityVertexBuffer)}function rI(S,s,d,v,x){let T=S.context,C=T.gl,R=uo.disabled,q=new bi([C.ONE,C.ONE],i.bf.transparent,[!0,!0,!0,!0]),B=s.getBucket(d);if(!B)return;let H=v.key,Y=d.heatmapFbos.get(H);Y||(Y=P1(T,s.tileSize,s.tileSize),d.heatmapFbos.set(H,Y)),T.bindFramebuffer.set(Y.framebuffer),T.viewport.set([0,0,s.tileSize,s.tileSize]),T.clear({color:i.bf.transparent});let $=B.programConfigurations.get(d.id),ee=S.useProgram("heatmap",$,!x),ie=S.transform.getProjectionData({overscaledTileID:s.tileID,applyGlobeMatrix:!0,applyTerrainMatrix:!0}),ve=S.style.map.terrain.getTerrainData(v);ee.draw(T,C.TRIANGLES,wn.disabled,R,q,Xr.disabled,VD(s,S.transform.zoom,d.paint.get("heatmap-intensity"),1),ve,ie,d.id,B.layoutVertexBuffer,B.indexBuffer,B.segments,d.paint,S.transform.zoom,$)}function lN(S,s,d,v,x){let T=S.context,C=T.gl,R=S.transform;T.setColorMode(S.colorModeForRenderPass());let q=D1(T,s),B=d.key,H=s.heatmapFbos.get(B);if(!H)return;T.activeTexture.set(C.TEXTURE0),C.bindTexture(C.TEXTURE_2D,H.colorAttachment.get()),T.activeTexture.set(C.TEXTURE1),q.bind(C.LINEAR,C.CLAMP_TO_EDGE);let Y=R.getProjectionData({overscaledTileID:d,applyTerrainMatrix:x,applyGlobeMatrix:!v});S.useProgram("heatmapTexture").draw(T,C.TRIANGLES,wn.disabled,uo.disabled,S.colorModeForRenderPass(),Xr.disabled,B2(S,s,0,1),null,Y,s.id,S.rasterBoundsBuffer,S.quadTriangleIndexBuffer,S.rasterBoundsSegments,s.paint,R.zoom),H.destroy(),s.heatmapFbos.delete(B)}function P1(S,s,d){var v,x;let T=S.gl,C=T.createTexture();T.bindTexture(T.TEXTURE_2D,C),T.texParameteri(T.TEXTURE_2D,T.TEXTURE_WRAP_S,T.CLAMP_TO_EDGE),T.texParameteri(T.TEXTURE_2D,T.TEXTURE_WRAP_T,T.CLAMP_TO_EDGE),T.texParameteri(T.TEXTURE_2D,T.TEXTURE_MIN_FILTER,T.LINEAR),T.texParameteri(T.TEXTURE_2D,T.TEXTURE_MAG_FILTER,T.LINEAR);let R=(v=S.HALF_FLOAT)!==null&&v!==void 0?v:T.UNSIGNED_BYTE,q=(x=S.RGBA16F)!==null&&x!==void 0?x:T.RGBA;T.texImage2D(T.TEXTURE_2D,0,q,s,d,0,T.RGBA,R,null);let B=S.createFramebuffer(s,d,!1,!1);return B.colorAttachment.set(C),B}function D1(S,s){return s.colorRampTexture||(s.colorRampTexture=new i.T(S,s.colorRamp,S.gl.RGBA)),s.colorRampTexture}function N1(S,s,d,v,x){if(!d||!v||!v.imageAtlas)return;let T=v.imageAtlas.patternPositions,C=T[d.to.toString()],R=T[d.from.toString()];if(!C&&R&&(C=R),!R&&C&&(R=C),!C||!R){let q=x.getPaintProperty(s);C=T[q],R=T[q]}C&&R&&S.setConstantPatternPositions(C,R)}function Ox(S,s,d,v,x,T,C,R){let q=S.context.gl,B="fill-pattern",H=d.paint.get(B),Y=H&&H.constantOr(1),$=d.getCrossfadeParameters(),ee,ie,ve,ge,ye,Me=S.transform,Re=d.paint.get("fill-translate"),Pe=d.paint.get("fill-translate-anchor");C?(ie=Y&&!d.getPaintProperty("fill-outline-color")?"fillOutlinePattern":"fillOutline",ee=q.LINES):(ie=Y?"fillPattern":"fill",ee=q.TRIANGLES);let ze=H.constantOr(null);for(let He of v){let Le=s.getTile(He);if(Y&&!Le.patternsLoaded())continue;let Qe=Le.getBucket(d);if(!Qe)continue;let ht=Qe.programConfigurations.get(d.id),it=S.useProgram(ie,ht),at=S.style.map.terrain&&S.style.map.terrain.getTerrainData(He);Y&&(S.context.activeTexture.set(q.TEXTURE0),Le.imageAtlasTexture.bind(q.LINEAR,q.CLAMP_TO_EDGE),ht.updatePaintBuffers($)),N1(ht,B,ze,Le,d);let dt=Me.getProjectionData({overscaledTileID:He,applyGlobeMatrix:!R,applyTerrainMatrix:!0}),Vt=i.aD(Me,Le,Re,Pe);if(C){ge=Qe.indexBuffer2,ye=Qe.segments2;let Nt=[q.drawingBufferWidth,q.drawingBufferHeight];ve=ie==="fillOutlinePattern"&&Y?E1(S,$,Le,Nt,Vt):w1(Nt,Vt)}else ge=Qe.indexBuffer,ye=Qe.segments,ve=Y?_x(S,$,Le,Vt):{u_fill_translate:Vt};let $t=S.stencilModeForClipping(He);it.draw(S.context,ee,x,$t,T,Xr.backCCW,ve,at,dt,d.id,Qe.layoutVertexBuffer,ge,ye,d.paint,S.transform.zoom,ht)}}function nI(S,s,d,v,x,T,C,R){let q=S.context,B=q.gl,H="fill-extrusion-pattern",Y=d.paint.get(H),$=Y.constantOr(1),ee=d.getCrossfadeParameters(),ie=d.paint.get("fill-extrusion-opacity"),ve=Y.constantOr(null),ge=S.transform;for(let ye of v){let Me=s.getTile(ye),Re=Me.getBucket(d);if(!Re)continue;let Pe=S.style.map.terrain&&S.style.map.terrain.getTerrainData(ye),ze=Re.programConfigurations.get(d.id),He=S.useProgram($?"fillExtrusionPattern":"fillExtrusion",ze);$&&(S.context.activeTexture.set(B.TEXTURE0),Me.imageAtlasTexture.bind(B.LINEAR,B.CLAMP_TO_EDGE),ze.updatePaintBuffers(ee));let Le=ge.getProjectionData({overscaledTileID:ye,applyGlobeMatrix:!R,applyTerrainMatrix:!0});N1(ze,H,ve,Me,d);let Qe=i.aD(ge,Me,d.paint.get("fill-extrusion-translate"),d.paint.get("fill-extrusion-translate-anchor")),ht=d.paint.get("fill-extrusion-vertical-gradient"),it=$?vB(S,ht,ie,Qe,ye,ee,Me):Jc(S,ht,ie,Qe);He.draw(q,q.gl.TRIANGLES,x,T,C,Xr.backCCW,it,Pe,Le,d.id,Re.layoutVertexBuffer,Re.indexBuffer,Re.segments,d.paint,S.transform.zoom,ze,S.style.map.terrain&&Re.centroidVertexBuffer)}}function Km(S,s,d,v,x,T,C,R,q){var B;let H=S.style.projection,Y=S.context,$=S.transform,ee=Y.gl,ie=[`#define NUM_ILLUMINATION_SOURCES ${d.paint.get("hillshade-highlight-color").values.length}`],ve=S.useProgram("hillshade",null,!1,ie),ge=!S.options.moving;for(let ye of v){let Me=s.getTile(ye),Re=Me.fbo;if(!Re)continue;let Pe=H.getMeshFromTileID(Y,ye.canonical,R,!0,"raster"),ze=(B=S.style.map.terrain)===null||B===void 0?void 0:B.getTerrainData(ye);Y.activeTexture.set(ee.TEXTURE0),ee.bindTexture(ee.TEXTURE_2D,Re.colorAttachment.get());let He=$.getProjectionData({overscaledTileID:ye,aligned:ge,applyGlobeMatrix:!q,applyTerrainMatrix:!0});ve.draw(Y,ee.TRIANGLES,T,x[ye.overscaledZ],C,Xr.backCCW,bB(S,Me,d),ze,He,d.id,Pe.vertexBuffer,Pe.indexBuffer,Pe.segments)}}function oI(S,s,d,v,x,T,C,R,q){var B;let H=S.style.projection,Y=S.context,$=S.transform,ee=Y.gl,ie=S.useProgram("colorRelief"),ve=!S.options.moving,ge=!0,ye=0;for(let Me of v){let Re=s.getTile(Me),Pe=Re.dem;if(ge){let it=ee.getParameter(ee.MAX_TEXTURE_SIZE),{elevationTexture:at,colorTexture:dt}=d.getColorRampTextures(Y,it,Pe.getUnpackVector());Y.activeTexture.set(ee.TEXTURE1),at.bind(ee.NEAREST,ee.CLAMP_TO_EDGE),Y.activeTexture.set(ee.TEXTURE4),dt.bind(ee.LINEAR,ee.CLAMP_TO_EDGE),ge=!1,ye=at.size[0]}if(!Pe||!Pe.data)continue;let ze=Pe.stride,He=Pe.getPixels();if(Y.activeTexture.set(ee.TEXTURE0),Y.pixelStoreUnpackPremultiplyAlpha.set(!1),Re.demTexture=Re.demTexture||S.getTileTexture(ze),Re.demTexture){let it=Re.demTexture;it.update(He,{premultiply:!1}),it.bind(ee.LINEAR,ee.CLAMP_TO_EDGE)}else Re.demTexture=new i.T(Y,He,ee.RGBA,{premultiply:!1}),Re.demTexture.bind(ee.LINEAR,ee.CLAMP_TO_EDGE);let Le=H.getMeshFromTileID(Y,Me.canonical,R,!0,"raster"),Qe=(B=S.style.map.terrain)===null||B===void 0?void 0:B.getTerrainData(Me),ht=$.getProjectionData({overscaledTileID:Me,aligned:ve,applyGlobeMatrix:!q,applyTerrainMatrix:!0});ie.draw(Y,ee.TRIANGLES,T,x[Me.overscaledZ],C,Xr.backCCW,HD(d,Re.dem,ye),Qe,ht,d.id,Le.vertexBuffer,Le.indexBuffer,Le.segments)}}let Px=[new i.P(0,0),new i.P(i.$,0),new i.P(i.$,i.$),new i.P(0,i.$)];function Xm(S,s,d,v,x,T,C,R,q=!1,B=!1){let H=v[v.length-1].overscaledZ,Y=S.context,$=Y.gl,ee=S.useProgram("raster"),ie=S.transform,ve=S.style.projection,ge=S.colorModeForRenderPass(),ye=!S.options.moving;for(let Me of v){let Re=S.getDepthModeForSublayer(Me.overscaledZ-H,d.paint.get("raster-opacity")===1?wn.ReadWrite:wn.ReadOnly,$.LESS),Pe=s.getTile(Me);Pe.registerFadeDuration(d.paint.get("raster-fade-duration"));let ze=s.findLoadedParent(Me,0),He=s.findLoadedSibling(Me),Le=iI(Pe,ze||He||null,s,d,S.transform,S.style.map.terrain),Qe,ht,it=d.paint.get("raster-resampling")==="nearest"?$.NEAREST:$.LINEAR;Y.activeTexture.set($.TEXTURE0),Pe.texture.bind(it,$.CLAMP_TO_EDGE,$.LINEAR_MIPMAP_NEAREST),Y.activeTexture.set($.TEXTURE1),ze?(ze.texture.bind(it,$.CLAMP_TO_EDGE,$.LINEAR_MIPMAP_NEAREST),Qe=Math.pow(2,ze.tileID.overscaledZ-Pe.tileID.overscaledZ),ht=[Pe.tileID.canonical.x*Qe%1,Pe.tileID.canonical.y*Qe%1]):Pe.texture.bind(it,$.CLAMP_TO_EDGE,$.LINEAR_MIPMAP_NEAREST),Pe.texture.useMipmap&&Y.extTextureFilterAnisotropic&&S.transform.pitch>20&&$.texParameterf($.TEXTURE_2D,Y.extTextureFilterAnisotropic.TEXTURE_MAX_ANISOTROPY_EXT,Y.extTextureFilterAnisotropicMax);let at=S.style.map.terrain&&S.style.map.terrain.getTerrainData(Me),dt=ie.getProjectionData({overscaledTileID:Me,aligned:ye,applyGlobeMatrix:!B,applyTerrainMatrix:!0}),Vt=S1(ht||[0,0],Qe||1,Le,d,R),$t=ve.getMeshFromTileID(Y,Me.canonical,T,C,"raster");ee.draw(Y,$.TRIANGLES,Re,x?x[Me.overscaledZ]:uo.disabled,ge,q?Xr.frontCCW:Xr.backCCW,Vt,at,dt,d.id,$t.vertexBuffer,$t.indexBuffer,$t.segments)}}function iI(S,s,d,v,x,T){let C=v.paint.get("raster-fade-duration");if(!T&&C>0){let R=y.now(),q=(R-S.timeAdded)/C,B=s?(R-s.timeAdded)/C:-1,H=d.getSource(),Y=gt(x,{tileSize:H.tileSize,roundZoom:H.roundZoom}),$=!s||Math.abs(s.tileID.overscaledZ-Y)>Math.abs(S.tileID.overscaledZ-Y),ee=$&&S.refreshedUponExpiration?1:i.ah($?q:1-B,0,1);return S.refreshedUponExpiration&&q>=1&&(S.refreshedUponExpiration=!1),s?{opacity:1,mix:1-ee}:{opacity:ee,mix:0}}return{opacity:1,mix:0}}let uN=new i.bf(1,0,0,1),cN=new i.bf(0,1,0,1),Dx=new i.bf(0,0,1,1),aI=new i.bf(1,0,1,1),PB=new i.bf(0,1,1,1);function sI(S,s,d,v){zp(S,0,s+d/2,S.transform.width,d,v)}function Ki(S,s,d,v){zp(S,s-d/2,0,d,S.transform.height,v)}function zp(S,s,d,v,x,T){let C=S.context,R=C.gl;R.enable(R.SCISSOR_TEST),R.scissor(s*S.pixelRatio,d*S.pixelRatio,v*S.pixelRatio,x*S.pixelRatio),C.clear({color:T}),R.disable(R.SCISSOR_TEST)}function ac(S,s,d){let v=S.context,x=v.gl,T=S.useProgram("debug"),C=wn.disabled,R=uo.disabled,q=S.colorModeForRenderPass(),B="$debug",H=S.style.map.terrain&&S.style.map.terrain.getTerrainData(d);v.activeTexture.set(x.TEXTURE0);let Y=s.getTileByID(d.key).latestRawTileData,$=Math.floor((Y&&Y.byteLength||0)/1024),ee=s.getTile(d).tileSize,ie=512/Math.min(ee,512)*(d.overscaledZ/S.transform.zoom)*.5,ve=d.canonical.toString();d.overscaledZ!==d.canonical.z&&(ve+=` => ${d.overscaledZ}`),function(ye,Me){ye.initDebugOverlayCanvas();let Re=ye.debugOverlayCanvas,Pe=ye.context.gl,ze=ye.debugOverlayCanvas.getContext("2d");ze.clearRect(0,0,Re.width,Re.height),ze.shadowColor="white",ze.shadowBlur=2,ze.lineWidth=1.5,ze.strokeStyle="white",ze.textBaseline="top",ze.font="bold 36px Open Sans, sans-serif",ze.fillText(Me,5,5),ze.strokeText(Me,5,5),ye.debugOverlayTexture.update(Re),ye.debugOverlayTexture.bind(Pe.LINEAR,Pe.CLAMP_TO_EDGE)}(S,`${ve} ${$}kB`);let ge=S.transform.getProjectionData({overscaledTileID:d,applyGlobeMatrix:!0,applyTerrainMatrix:!0});T.draw(v,x.TRIANGLES,C,R,bi.alphaBlended,Xr.disabled,Hm(i.bf.transparent,ie),null,ge,B,S.debugBuffer,S.quadTriangleIndexBuffer,S.debugSegments),T.draw(v,x.LINE_STRIP,C,R,q,Xr.disabled,Hm(i.bf.red),H,ge,B,S.debugBuffer,S.tileBorderIndexBuffer,S.debugSegments)}function Nx(S,s,d,v){let{isRenderingGlobe:x}=v,T=S.context,C=T.gl,R=S.transform,q=S.colorModeForRenderPass(),B=S.getDepthModeFor3D(),H=S.useProgram("terrain");T.bindFramebuffer.set(null),T.viewport.set([0,0,S.width,S.height]);for(let Y of d){let $=s.getTerrainMesh(Y.tileID),ee=S.renderToTexture.getTexture(Y),ie=s.getTerrainData(Y.tileID);T.activeTexture.set(C.TEXTURE0),C.bindTexture(C.TEXTURE_2D,ee.texture);let ve=s.getMeshFrameDelta(R.zoom),ge=R.calculateFogMatrix(Y.tileID.toUnwrapped()),ye=vx(ve,ge,S.style.sky,R.pitch,x),Me=R.getProjectionData({overscaledTileID:Y.tileID,applyTerrainMatrix:!1,applyGlobeMatrix:!0});H.draw(T,C.TRIANGLES,B,uo.disabled,q,Xr.backCCW,ye,ie,Me,"terrain",$.vertexBuffer,$.indexBuffer,$.segments)}}function L1(S,s){if(!s.mesh){let d=new i.aL;d.emplaceBack(-1,-1),d.emplaceBack(1,-1),d.emplaceBack(1,1),d.emplaceBack(-1,1);let v=new i.aN;v.emplaceBack(0,1,2),v.emplaceBack(0,2,3),s.mesh=new Ai(S.createVertexBuffer(d,_i.members),S.createIndexBuffer(v),i.aM.simpleSegment(0,0,d.length,v.length))}return s.mesh}class pN{constructor(s,d){this.context=new iN(s),this.transform=d,this._tileTextures={},this.terrainFacilitator={dirty:!0,matrix:i.ag(new Float64Array(16)),renderTime:0},this.setup(),this.numSublayers=Oe.maxUnderzooming+Oe.maxOverzooming+1,this.depthEpsilon=1/Math.pow(2,16),this.crossTileSymbolIndex=new Wn}resize(s,d,v){if(this.width=Math.floor(s*v),this.height=Math.floor(d*v),this.pixelRatio=v,this.context.viewport.set([0,0,this.width,this.height]),this.style)for(let x of this.style._order)this.style._layers[x].resize()}setup(){let s=this.context,d=new i.aL;d.emplaceBack(0,0),d.emplaceBack(i.$,0),d.emplaceBack(0,i.$),d.emplaceBack(i.$,i.$),this.tileExtentBuffer=s.createVertexBuffer(d,_i.members),this.tileExtentSegments=i.aM.simpleSegment(0,0,4,2);let v=new i.aL;v.emplaceBack(0,0),v.emplaceBack(i.$,0),v.emplaceBack(0,i.$),v.emplaceBack(i.$,i.$),this.debugBuffer=s.createVertexBuffer(v,_i.members),this.debugSegments=i.aM.simpleSegment(0,0,4,5);let x=new i.c6;x.emplaceBack(0,0,0,0),x.emplaceBack(i.$,0,i.$,0),x.emplaceBack(0,i.$,0,i.$),x.emplaceBack(i.$,i.$,i.$,i.$),this.rasterBoundsBuffer=s.createVertexBuffer(x,mB.members),this.rasterBoundsSegments=i.aM.simpleSegment(0,0,4,2);let T=new i.aL;T.emplaceBack(0,0),T.emplaceBack(i.$,0),T.emplaceBack(0,i.$),T.emplaceBack(i.$,i.$),this.rasterBoundsBufferPosOnly=s.createVertexBuffer(T,_i.members),this.rasterBoundsSegmentsPosOnly=i.aM.simpleSegment(0,0,4,5);let C=new i.aL;C.emplaceBack(0,0),C.emplaceBack(1,0),C.emplaceBack(0,1),C.emplaceBack(1,1),this.viewportBuffer=s.createVertexBuffer(C,_i.members),this.viewportSegments=i.aM.simpleSegment(0,0,4,2);let R=new i.c7;R.emplaceBack(0),R.emplaceBack(1),R.emplaceBack(3),R.emplaceBack(2),R.emplaceBack(0),this.tileBorderIndexBuffer=s.createIndexBuffer(R);let q=new i.aN;q.emplaceBack(1,0,2),q.emplaceBack(1,2,3),this.quadTriangleIndexBuffer=s.createIndexBuffer(q);let B=this.context.gl;this.stencilClearMode=new uo({func:B.ALWAYS,mask:0},0,255,B.ZERO,B.ZERO,B.ZERO),this.tileExtentMesh=new Ai(this.tileExtentBuffer,this.quadTriangleIndexBuffer,this.tileExtentSegments)}clearStencil(){let s=this.context,d=s.gl;this.nextStencilID=1,this.currentStencilSource=void 0;let v=i.L();i.bY(v,0,this.width,this.height,0,0,1),i.N(v,v,[d.drawingBufferWidth,d.drawingBufferHeight,0]);let x={mainMatrix:v,tileMercatorCoords:[0,0,1,1],clippingPlane:[0,0,0,0],projectionTransition:0,fallbackMatrix:v};this.useProgram("clippingMask",null,!0).draw(s,d.TRIANGLES,wn.disabled,this.stencilClearMode,bi.disabled,Xr.disabled,null,null,x,"$clipping",this.viewportBuffer,this.quadTriangleIndexBuffer,this.viewportSegments)}_renderTileClippingMasks(s,d,v){if(this.currentStencilSource===s.source||!s.isTileClipped()||!d||!d.length)return;this.currentStencilSource=s.source,this.nextStencilID+d.length>256&&this.clearStencil();let x=this.context;x.setColorMode(bi.disabled),x.setDepthMode(wn.disabled);let T={};for(let C of d)T[C.key]=this.nextStencilID++;this._renderTileMasks(T,d,v,!0),this._renderTileMasks(T,d,v,!1),this._tileClippingMaskIDs=T}_renderTileMasks(s,d,v,x){let T=this.context,C=T.gl,R=this.style.projection,q=this.transform,B=this.useProgram("clippingMask");for(let H of d){let Y=s[H.key],$=this.style.map.terrain&&this.style.map.terrain.getTerrainData(H),ee=R.getMeshFromTileID(this.context,H.canonical,x,!0,"stencil"),ie=q.getProjectionData({overscaledTileID:H,applyGlobeMatrix:!v,applyTerrainMatrix:!0});B.draw(T,C.TRIANGLES,wn.disabled,new uo({func:C.ALWAYS,mask:0},Y,255,C.KEEP,C.KEEP,C.REPLACE),bi.disabled,v?Xr.disabled:Xr.backCCW,null,$,ie,"$clipping",ee.vertexBuffer,ee.indexBuffer,ee.segments)}}_renderTilesDepthBuffer(){let s=this.context,d=s.gl,v=this.style.projection,x=this.transform,T=this.useProgram("depth"),C=this.getDepthModeFor3D(),R=Ae(x,{tileSize:x.tileSize});for(let q of R){let B=this.style.map.terrain&&this.style.map.terrain.getTerrainData(q),H=v.getMeshFromTileID(this.context,q.canonical,!0,!0,"raster"),Y=x.getProjectionData({overscaledTileID:q,applyGlobeMatrix:!0,applyTerrainMatrix:!0});T.draw(s,d.TRIANGLES,C,uo.disabled,bi.disabled,Xr.backCCW,null,B,Y,"$clipping",H.vertexBuffer,H.indexBuffer,H.segments)}}stencilModeFor3D(){this.currentStencilSource=void 0,this.nextStencilID+1>256&&this.clearStencil();let s=this.nextStencilID++,d=this.context.gl;return new uo({func:d.NOTEQUAL,mask:255},s,255,d.KEEP,d.KEEP,d.REPLACE)}stencilModeForClipping(s){let d=this.context.gl;return new uo({func:d.EQUAL,mask:255},this._tileClippingMaskIDs[s.key],0,d.KEEP,d.KEEP,d.REPLACE)}getStencilConfigForOverlapAndUpdateStencilID(s){let d=this.context.gl,v=s.sort((C,R)=>R.overscaledZ-C.overscaledZ),x=v[v.length-1].overscaledZ,T=v[0].overscaledZ-x+1;if(T>1){this.currentStencilSource=void 0,this.nextStencilID+T>256&&this.clearStencil();let C={};for(let R=0;R<T;R++)C[R+x]=new uo({func:d.GEQUAL,mask:255},R+this.nextStencilID,255,d.KEEP,d.KEEP,d.REPLACE);return this.nextStencilID+=T,[C,v]}return[{[x]:uo.disabled},v]}stencilConfigForOverlapTwoPass(s){let d=this.context.gl,v=s.sort((C,R)=>R.overscaledZ-C.overscaledZ),x=v[v.length-1].overscaledZ,T=v[0].overscaledZ-x+1;if(this.clearStencil(),T>1){let C={},R={};for(let q=0;q<T;q++)C[q+x]=new uo({func:d.GREATER,mask:255},T+1+q,255,d.KEEP,d.KEEP,d.REPLACE),R[q+x]=new uo({func:d.GREATER,mask:255},1+q,255,d.KEEP,d.KEEP,d.REPLACE);return this.nextStencilID=2*T+1,[C,R,v]}return this.nextStencilID=3,[{[x]:new uo({func:d.GREATER,mask:255},2,255,d.KEEP,d.KEEP,d.REPLACE)},{[x]:new uo({func:d.GREATER,mask:255},1,255,d.KEEP,d.KEEP,d.REPLACE)},v]}colorModeForRenderPass(){let s=this.context.gl;return this._showOverdrawInspector?new bi([s.CONSTANT_COLOR,s.ONE],new i.bf(.125,.125,.125,0),[!0,!0,!0,!0]):this.renderPass==="opaque"?bi.unblended:bi.alphaBlended}getDepthModeForSublayer(s,d,v){if(!this.opaquePassEnabledForLayer())return wn.disabled;let x=1-((1+this.currentLayer)*this.numSublayers+s)*this.depthEpsilon;return new wn(v||this.context.gl.LEQUAL,d,[x,x])}getDepthModeFor3D(){return new wn(this.context.gl.LEQUAL,wn.ReadWrite,this.depthRangeFor3D)}opaquePassEnabledForLayer(){return this.currentLayer<this.opaquePassCutoff}render(s,d){var v,x;this.style=s,this.options=d,this.lineAtlas=s.lineAtlas,this.imageManager=s.imageManager,this.glyphManager=s.glyphManager,this.symbolFadeChange=s.placement.symbolFadeChange(y.now()),this.imageManager.beginFrame();let T=this.style._order,C=this.style.sourceCaches,R={},q={},B={},H={isRenderingToTexture:!1,isRenderingGlobe:((v=s.projection)===null||v===void 0?void 0:v.transitionState)>0};for(let $ in C){let ee=C[$];ee.used&&ee.prepare(this.context),R[$]=ee.getVisibleCoordinates(!1),q[$]=R[$].slice().reverse(),B[$]=ee.getVisibleCoordinates(!0).reverse()}this.opaquePassCutoff=1/0;for(let $=0;$<T.length;$++)if(this.style._layers[T[$]].is3D()){this.opaquePassCutoff=$;break}this.maybeDrawDepthAndCoords(!1),this.renderToTexture&&(this.renderToTexture.prepareForRender(this.style,this.transform.zoom),this.opaquePassCutoff=0),this.renderPass="offscreen";for(let $ of T){let ee=this.style._layers[$];if(!ee.hasOffscreenPass()||ee.isHidden(this.transform.zoom))continue;let ie=q[ee.source];(ee.type==="custom"||ie.length)&&this.renderLayer(this,C[ee.source],ee,ie,H)}if((x=this.style.projection)===null||x===void 0||x.updateGPUdependent({context:this.context,useProgram:$=>this.useProgram($)}),this.context.viewport.set([0,0,this.width,this.height]),this.context.bindFramebuffer.set(null),this.context.clear({color:d.showOverdrawInspector?i.bf.black:i.bf.transparent,depth:1}),this.clearStencil(),this.style.sky&&function($,ee){let ie=$.context,ve=ie.gl,ge=((He,Le,Qe)=>{let ht=Math.cos(Le.rollInRadians),it=Math.sin(Le.rollInRadians),at=Fe(Le),dt=Le.getProjectionData({overscaledTileID:null,applyGlobeMatrix:!0,applyTerrainMatrix:!0}).projectionTransition;return{u_sky_color:He.properties.get("sky-color"),u_horizon_color:He.properties.get("horizon-color"),u_horizon:[(Le.width/2-at*it)*Qe,(Le.height/2+at*ht)*Qe],u_horizon_normal:[-it,ht],u_sky_horizon_blend:He.properties.get("sky-horizon-blend")*Le.height/2*Qe,u_sky_blend:dt}})(ee,$.style.map.transform,$.pixelRatio),ye=new wn(ve.LEQUAL,wn.ReadWrite,[0,1]),Me=uo.disabled,Re=$.colorModeForRenderPass(),Pe=$.useProgram("sky"),ze=L1(ie,ee);Pe.draw(ie,ve.TRIANGLES,ye,Me,Re,Xr.disabled,ge,null,void 0,"sky",ze.vertexBuffer,ze.indexBuffer,ze.segments)}(this,this.style.sky),this._showOverdrawInspector=d.showOverdrawInspector,this.depthRangeFor3D=[0,1-(s._order.length+2)*this.numSublayers*this.depthEpsilon],!this.renderToTexture)for(this.renderPass="opaque",this.currentLayer=T.length-1;this.currentLayer>=0;this.currentLayer--){let $=this.style._layers[T[this.currentLayer]],ee=C[$.source],ie=R[$.source];this._renderTileClippingMasks($,ie,!1),this.renderLayer(this,ee,$,ie,H)}this.renderPass="translucent";let Y=!1;for(this.currentLayer=0;this.currentLayer<T.length;this.currentLayer++){let $=this.style._layers[T[this.currentLayer]],ee=C[$.source];if(this.renderToTexture&&this.renderToTexture.renderLayer($,H))continue;this.opaquePassEnabledForLayer()||Y||(Y=!0,H.isRenderingGlobe&&!this.style.map.terrain&&this._renderTilesDepthBuffer());let ie=($.type==="symbol"?B:q)[$.source];this._renderTileClippingMasks($,R[$.source],!!this.renderToTexture),this.renderLayer(this,ee,$,ie,H)}if(H.isRenderingGlobe&&function($,ee,ie){let ve=$.context,ge=ve.gl,ye=$.useProgram("atmosphere"),Me=new wn(ge.LEQUAL,wn.ReadOnly,[0,1]),Re=$.transform,Pe=function(dt,Vt){let $t=dt.properties.get("position"),Nt=[-$t.x,-$t.y,-$t.z],xr=i.ag(new Float64Array(16));return dt.properties.get("anchor")==="map"&&(i.b6(xr,xr,Vt.rollInRadians),i.b7(xr,xr,-Vt.pitchInRadians),i.b6(xr,xr,Vt.bearingInRadians),i.b7(xr,xr,Vt.center.lat*Math.PI/180),i.bz(xr,xr,-Vt.center.lng*Math.PI/180)),i.c5(Nt,Nt,xr),Nt}(ie,$.transform),ze=Re.getProjectionData({overscaledTileID:null,applyGlobeMatrix:!0,applyTerrainMatrix:!0}),He=ee.properties.get("atmosphere-blend")*ze.projectionTransition;if(He===0)return;let Le=Sv(Re.worldSize,Re.center.lat),Qe=Re.inverseProjectionMatrix,ht=new Float64Array(4);ht[3]=1,i.aw(ht,ht,Re.modelViewProjectionMatrix),ht[0]/=ht[3],ht[1]/=ht[3],ht[2]/=ht[3],ht[3]=1,i.aw(ht,ht,Qe),ht[0]/=ht[3],ht[1]/=ht[3],ht[2]/=ht[3],ht[3]=1;let it=((dt,Vt,$t,Nt,xr)=>({u_sun_pos:dt,u_atmosphere_blend:Vt,u_globe_position:$t,u_globe_radius:Nt,u_inv_proj_matrix:xr}))(Pe,He,[ht[0],ht[1],ht[2]],Le,Qe),at=L1(ve,ee);ye.draw(ve,ge.TRIANGLES,Me,uo.disabled,bi.alphaBlended,Xr.disabled,it,null,null,"atmosphere",at.vertexBuffer,at.indexBuffer,at.segments)}(this,this.style.sky,this.style.light),this.options.showTileBoundaries){let $=function(ee,ie){let ve=null,ge=Object.values(ee._layers).flatMap(Pe=>Pe.source&&!Pe.isHidden(ie)?[ee.sourceCaches[Pe.source]]:[]),ye=ge.filter(Pe=>Pe.getSource().type==="vector"),Me=ge.filter(Pe=>Pe.getSource().type!=="vector"),Re=Pe=>{(!ve||ve.getSource().maxzoom<Pe.getSource().maxzoom)&&(ve=Pe)};return ye.forEach(Pe=>Re(Pe)),ve||Me.forEach(Pe=>Re(Pe)),ve}(this.style,this.transform.zoom);$&&function(ee,ie,ve){for(let ge=0;ge<ve.length;ge++)ac(ee,ie,ve[ge])}(this,$,$.getVisibleCoordinates())}this.options.showPadding&&function($){let ee=$.transform.padding;sI($,$.transform.height-(ee.top||0),3,uN),sI($,ee.bottom||0,3,cN),Ki($,ee.left||0,3,Dx),Ki($,$.transform.width-(ee.right||0),3,aI);let ie=$.transform.centerPoint;(function(ve,ge,ye,Me){zp(ve,ge-1,ye-10,2,20,Me),zp(ve,ge-10,ye-1,20,2,Me)})($,ie.x,$.transform.height-ie.y,PB)}(this),this.context.setDefault()}maybeDrawDepthAndCoords(s){if(!this.style||!this.style.map||!this.style.map.terrain)return;let d=this.terrainFacilitator.matrix,v=this.transform.modelViewProjectionMatrix,x=this.terrainFacilitator.dirty;x||(x=s?!i.c8(d,v):!i.c9(d,v)),x||(x=this.style.map.terrain.sourceCache.anyTilesAfterTime(this.terrainFacilitator.renderTime)),x&&(i.ca(d,v),this.terrainFacilitator.renderTime=Date.now(),this.terrainFacilitator.dirty=!1,function(T,C){let R=T.context,q=R.gl,B=T.transform,H=bi.unblended,Y=new wn(q.LEQUAL,wn.ReadWrite,[0,1]),$=C.sourceCache.getRenderableTiles(),ee=T.useProgram("terrainDepth");R.bindFramebuffer.set(C.getFramebuffer("depth").framebuffer),R.viewport.set([0,0,T.width/devicePixelRatio,T.height/devicePixelRatio]),R.clear({color:i.bf.transparent,depth:1});for(let ie of $){let ve=C.getTerrainMesh(ie.tileID),ge=C.getTerrainData(ie.tileID),ye=B.getProjectionData({overscaledTileID:ie.tileID,applyTerrainMatrix:!1,applyGlobeMatrix:!0}),Me={u_ele_delta:C.getMeshFrameDelta(B.zoom)};ee.draw(R,q.TRIANGLES,Y,uo.disabled,H,Xr.backCCW,Me,ge,ye,"terrain",ve.vertexBuffer,ve.indexBuffer,ve.segments)}R.bindFramebuffer.set(null),R.viewport.set([0,0,T.width,T.height])}(this,this.style.map.terrain),function(T,C){let R=T.context,q=R.gl,B=T.transform,H=bi.unblended,Y=new wn(q.LEQUAL,wn.ReadWrite,[0,1]),$=C.getCoordsTexture(),ee=C.sourceCache.getRenderableTiles(),ie=T.useProgram("terrainCoords");R.bindFramebuffer.set(C.getFramebuffer("coords").framebuffer),R.viewport.set([0,0,T.width/devicePixelRatio,T.height/devicePixelRatio]),R.clear({color:i.bf.transparent,depth:1}),C.coordsIndex=[];for(let ve of ee){let ge=C.getTerrainMesh(ve.tileID),ye=C.getTerrainData(ve.tileID);R.activeTexture.set(q.TEXTURE0),q.bindTexture(q.TEXTURE_2D,$.texture);let Me={u_terrain_coords_id:(255-C.coordsIndex.length)/255,u_texture:0,u_ele_delta:C.getMeshFrameDelta(B.zoom)},Re=B.getProjectionData({overscaledTileID:ve.tileID,applyTerrainMatrix:!1,applyGlobeMatrix:!0});ie.draw(R,q.TRIANGLES,Y,uo.disabled,H,Xr.backCCW,Me,ye,Re,"terrain",ge.vertexBuffer,ge.indexBuffer,ge.segments),C.coordsIndex.push(ve.tileID.key)}R.bindFramebuffer.set(null),R.viewport.set([0,0,T.width,T.height])}(this,this.style.map.terrain))}renderLayer(s,d,v,x,T){v.isHidden(this.transform.zoom)||(v.type==="background"||v.type==="custom"||(x||[]).length)&&(this.id=v.id,i.cb(v)?function(C,R,q,B,H,Y){if(C.renderPass!=="translucent")return;let{isRenderingToTexture:$}=Y,ee=uo.disabled,ie=C.colorModeForRenderPass();(q._unevaluatedLayout.hasValue("text-variable-anchor")||q._unevaluatedLayout.hasValue("text-variable-anchor-offset"))&&function(ve,ge,ye,Me,Re,Pe,ze,He,Le){let Qe=ge.transform,ht=ge.style.map.terrain,it=Re==="map",at=Pe==="map";for(let dt of ve){let Vt=Me.getTile(dt),$t=Vt.getBucket(ye);if(!$t||!$t.text||!$t.text.segments.get().length)continue;let Nt=i.an($t.textSizeData,Qe.zoom),xr=i.aC(Vt,1,ge.transform.zoom),Pn=ln(it,ge.transform,xr),So=ye.layout.get("icon-text-fit")!=="none"&&$t.hasIconData();if(Nt){let Jo=Math.pow(2,Qe.zoom-Vt.tileID.overscaledZ),Go=ht?(qi,Xi)=>ht.getElevation(dt,qi,Xi):null;tI($t,it,at,Le,Qe,Pn,Jo,Nt,So,i.aD(Qe,Vt,ze,He),dt.toUnwrapped(),Go)}}}(B,C,q,R,q.layout.get("text-rotation-alignment"),q.layout.get("text-pitch-alignment"),q.paint.get("text-translate"),q.paint.get("text-translate-anchor"),H),q.paint.get("icon-opacity").constantOr(1)!==0&&A1(C,R,q,B,!1,q.paint.get("icon-translate"),q.paint.get("icon-translate-anchor"),q.layout.get("icon-rotation-alignment"),q.layout.get("icon-pitch-alignment"),q.layout.get("icon-keep-upright"),ee,ie,$),q.paint.get("text-opacity").constantOr(1)!==0&&A1(C,R,q,B,!0,q.paint.get("text-translate"),q.paint.get("text-translate-anchor"),q.layout.get("text-rotation-alignment"),q.layout.get("text-pitch-alignment"),q.layout.get("text-keep-upright"),ee,ie,$),R.map.showCollisionBoxes&&(aN(C,R,q,B,!0),aN(C,R,q,B,!1))}(s,d,v,x,this.style.placement.variableOffsets,T):i.cc(v)?function(C,R,q,B,H){if(C.renderPass!=="translucent")return;let{isRenderingToTexture:Y}=H,$=q.paint.get("circle-opacity"),ee=q.paint.get("circle-stroke-width"),ie=q.paint.get("circle-stroke-opacity"),ve=!q.layout.get("circle-sort-key").isConstant();if($.constantOr(1)===0&&(ee.constantOr(1)===0||ie.constantOr(1)===0))return;let ge=C.context,ye=ge.gl,Me=C.transform,Re=C.getDepthModeForSublayer(0,wn.ReadOnly),Pe=uo.disabled,ze=C.colorModeForRenderPass(),He=[],Le=Me.getCircleRadiusCorrection();for(let Qe=0;Qe<B.length;Qe++){let ht=B[Qe],it=R.getTile(ht),at=it.getBucket(q);if(!at)continue;let dt=q.paint.get("circle-translate"),Vt=q.paint.get("circle-translate-anchor"),$t=i.aD(Me,it,dt,Vt),Nt=at.programConfigurations.get(q.id),xr=C.useProgram("circle",Nt),Pn=at.layoutVertexBuffer,So=at.indexBuffer,Jo=C.style.map.terrain&&C.style.map.terrain.getTerrainData(ht),Go={programConfiguration:Nt,program:xr,layoutVertexBuffer:Pn,indexBuffer:So,uniformValues:yB(C,it,q,$t,Le),terrainData:Jo,projectionData:Me.getProjectionData({overscaledTileID:ht,applyGlobeMatrix:!Y,applyTerrainMatrix:!0})};if(ve){let qi=at.segments.get();for(let Xi of qi)He.push({segments:new i.aM([Xi]),sortKey:Xi.sortKey,state:Go})}else He.push({segments:at.segments,sortKey:0,state:Go})}ve&&He.sort((Qe,ht)=>Qe.sortKey-ht.sortKey);for(let Qe of He){let{programConfiguration:ht,program:it,layoutVertexBuffer:at,indexBuffer:dt,uniformValues:Vt,terrainData:$t,projectionData:Nt}=Qe.state;it.draw(ge,ye.TRIANGLES,Re,Pe,ze,Xr.backCCW,Vt,$t,Nt,q.id,at,dt,Qe.segments,q.paint,C.transform.zoom,ht)}}(s,d,v,x,T):i.cd(v)?function(C,R,q,B,H){if(q.paint.get("heatmap-opacity")===0)return;let Y=C.context,{isRenderingToTexture:$,isRenderingGlobe:ee}=H;if(C.style.map.terrain){for(let ie of B){let ve=R.getTile(ie);R.hasRenderableParent(ie)||(C.renderPass==="offscreen"?rI(C,ve,q,ie,ee):C.renderPass==="translucent"&&lN(C,q,ie,$,ee))}Y.viewport.set([0,0,C.width,C.height])}else C.renderPass==="offscreen"?function(ie,ve,ge,ye){let Me=ie.context,Re=Me.gl,Pe=ie.transform,ze=uo.disabled,He=new bi([Re.ONE,Re.ONE],i.bf.transparent,[!0,!0,!0,!0]);(function(Le,Qe,ht){let it=Le.gl;Le.activeTexture.set(it.TEXTURE1),Le.viewport.set([0,0,Qe.width/4,Qe.height/4]);let at=ht.heatmapFbos.get(i.c2);at?(it.bindTexture(it.TEXTURE_2D,at.colorAttachment.get()),Le.bindFramebuffer.set(at.framebuffer)):(at=P1(Le,Qe.width/4,Qe.height/4),ht.heatmapFbos.set(i.c2,at))})(Me,ie,ge),Me.clear({color:i.bf.transparent});for(let Le=0;Le<ye.length;Le++){let Qe=ye[Le];if(ve.hasRenderableParent(Qe))continue;let ht=ve.getTile(Qe),it=ht.getBucket(ge);if(!it)continue;let at=it.programConfigurations.get(ge.id),dt=ie.useProgram("heatmap",at),Vt=Pe.getProjectionData({overscaledTileID:Qe,applyGlobeMatrix:!0,applyTerrainMatrix:!1}),$t=Pe.getCircleRadiusCorrection();dt.draw(Me,Re.TRIANGLES,wn.disabled,ze,He,Xr.backCCW,VD(ht,Pe.zoom,ge.paint.get("heatmap-intensity"),$t),null,Vt,ge.id,it.layoutVertexBuffer,it.indexBuffer,it.segments,ge.paint,Pe.zoom,at)}Me.viewport.set([0,0,ie.width,ie.height])}(C,R,q,B):C.renderPass==="translucent"&&function(ie,ve){let ge=ie.context,ye=ge.gl;ge.setColorMode(ie.colorModeForRenderPass());let Me=ve.heatmapFbos.get(i.c2);Me&&(ge.activeTexture.set(ye.TEXTURE0),ye.bindTexture(ye.TEXTURE_2D,Me.colorAttachment.get()),ge.activeTexture.set(ye.TEXTURE1),D1(ge,ve).bind(ye.LINEAR,ye.CLAMP_TO_EDGE),ie.useProgram("heatmapTexture").draw(ge,ye.TRIANGLES,wn.disabled,uo.disabled,ie.colorModeForRenderPass(),Xr.disabled,B2(ie,ve,0,1),null,null,ve.id,ie.viewportBuffer,ie.quadTriangleIndexBuffer,ie.viewportSegments,ve.paint,ie.transform.zoom))}(C,q)}(s,d,v,x,T):i.ce(v)?function(C,R,q,B,H){if(C.renderPass!=="translucent")return;let{isRenderingToTexture:Y}=H,$=q.paint.get("line-opacity"),ee=q.paint.get("line-width");if($.constantOr(1)===0||ee.constantOr(1)===0)return;let ie=C.getDepthModeForSublayer(0,wn.ReadOnly),ve=C.colorModeForRenderPass(),ge=q.paint.get("line-dasharray"),ye=q.paint.get("line-pattern"),Me=ye.constantOr(1),Re=q.paint.get("line-gradient"),Pe=q.getCrossfadeParameters(),ze=Me?"linePattern":ge?"lineSDF":Re?"lineGradient":"line",He=C.context,Le=He.gl,Qe=C.transform,ht=!0;for(let it of B){let at=R.getTile(it);if(Me&&!at.patternsLoaded())continue;let dt=at.getBucket(q);if(!dt)continue;let Vt=dt.programConfigurations.get(q.id),$t=C.context.program.get(),Nt=C.useProgram(ze,Vt),xr=ht||Nt.program!==$t,Pn=C.style.map.terrain&&C.style.map.terrain.getTerrainData(it),So=ye.constantOr(null);if(So&&at.imageAtlas){let Mn=at.imageAtlas,Qo=Mn.patternPositions[So.to.toString()],Ia=Mn.patternPositions[So.from.toString()];Qo&&Ia&&Vt.setConstantPatternPositions(Qo,Ia)}let Jo=Qe.getProjectionData({overscaledTileID:it,applyGlobeMatrix:!Y,applyTerrainMatrix:!0}),Go=Qe.getPixelScale(),qi=Me?$D(C,at,q,Go,Pe):ge?Wm(C,at,q,Go,ge,Pe):Re?WD(C,at,q,Go,dt.lineClipsArray.length):xx(C,at,q,Go);if(Me)He.activeTexture.set(Le.TEXTURE0),at.imageAtlasTexture.bind(Le.LINEAR,Le.CLAMP_TO_EDGE),Vt.updatePaintBuffers(Pe);else if(ge&&(xr||C.lineAtlas.dirty))He.activeTexture.set(Le.TEXTURE0),C.lineAtlas.bind(He);else if(Re){let Mn=dt.gradients[q.id],Qo=Mn.texture;if(q.gradientVersion!==Mn.version){let Ia=256;if(q.stepInterpolant){let Fa=R.getSource().maxzoom,ls=it.canonical.z===Fa?Math.ceil(1<<C.transform.maxZoom-it.canonical.z):1;Ia=i.ah(i.c3(dt.maxLineLength/i.$*1024*ls),256,He.maxTextureSize)}Mn.gradient=i.c4({expression:q.gradientExpression(),evaluationKey:"lineProgress",resolution:Ia,image:Mn.gradient||void 0,clips:dt.lineClipsArray}),Mn.texture?Mn.texture.update(Mn.gradient):Mn.texture=new i.T(He,Mn.gradient,Le.RGBA),Mn.version=q.gradientVersion,Qo=Mn.texture}He.activeTexture.set(Le.TEXTURE0),Qo.bind(q.stepInterpolant?Le.NEAREST:Le.LINEAR,Le.CLAMP_TO_EDGE)}let Xi=C.stencilModeForClipping(it);Nt.draw(He,Le.TRIANGLES,ie,Xi,ve,Xr.disabled,qi,Pn,Jo,q.id,dt.layoutVertexBuffer,dt.indexBuffer,dt.segments,q.paint,C.transform.zoom,Vt,dt.layoutVertexBuffer2),ht=!1}}(s,d,v,x,T):i.cf(v)?function(C,R,q,B,H){let Y=q.paint.get("fill-color"),$=q.paint.get("fill-opacity");if($.constantOr(1)===0)return;let{isRenderingToTexture:ee}=H,ie=C.colorModeForRenderPass(),ve=q.paint.get("fill-pattern"),ge=C.opaquePassEnabledForLayer()&&!ve.constantOr(1)&&Y.constantOr(i.bf.transparent).a===1&&$.constantOr(0)===1?"opaque":"translucent";if(C.renderPass===ge){let ye=C.getDepthModeForSublayer(1,C.renderPass==="opaque"?wn.ReadWrite:wn.ReadOnly);Ox(C,R,q,B,ye,ie,!1,ee)}if(C.renderPass==="translucent"&&q.paint.get("fill-antialias")){let ye=C.getDepthModeForSublayer(q.getPaintProperty("fill-outline-color")?2:0,wn.ReadOnly);Ox(C,R,q,B,ye,ie,!0,ee)}}(s,d,v,x,T):i.cg(v)?function(C,R,q,B,H){let Y=q.paint.get("fill-extrusion-opacity");if(Y===0)return;let{isRenderingToTexture:$}=H;if(C.renderPass==="translucent"){let ee=new wn(C.context.gl.LEQUAL,wn.ReadWrite,C.depthRangeFor3D);if(Y!==1||q.paint.get("fill-extrusion-pattern").constantOr(1))nI(C,R,q,B,ee,uo.disabled,bi.disabled,$),nI(C,R,q,B,ee,C.stencilModeFor3D(),C.colorModeForRenderPass(),$);else{let ie=C.colorModeForRenderPass();nI(C,R,q,B,ee,uo.disabled,ie,$)}}}(s,d,v,x,T):i.ch(v)?function(C,R,q,B,H){if(C.renderPass!=="offscreen"&&C.renderPass!=="translucent")return;let{isRenderingToTexture:Y}=H,$=C.context,ee=C.style.projection.useSubdivision,ie=C.getDepthModeForSublayer(0,wn.ReadOnly),ve=C.colorModeForRenderPass();if(C.renderPass==="offscreen")(function(ge,ye,Me,Re,Pe,ze,He){let Le=ge.context,Qe=Le.gl;for(let ht of Me){let it=ye.getTile(ht),at=it.dem;if(!at||!at.data||!it.needsHillshadePrepare)continue;let dt=at.dim,Vt=at.stride,$t=at.getPixels();if(Le.activeTexture.set(Qe.TEXTURE1),Le.pixelStoreUnpackPremultiplyAlpha.set(!1),it.demTexture=it.demTexture||ge.getTileTexture(Vt),it.demTexture){let xr=it.demTexture;xr.update($t,{premultiply:!1}),xr.bind(Qe.NEAREST,Qe.CLAMP_TO_EDGE)}else it.demTexture=new i.T(Le,$t,Qe.RGBA,{premultiply:!1}),it.demTexture.bind(Qe.NEAREST,Qe.CLAMP_TO_EDGE);Le.activeTexture.set(Qe.TEXTURE0);let Nt=it.fbo;if(!Nt){let xr=new i.T(Le,{width:dt,height:dt,data:null},Qe.RGBA);xr.bind(Qe.LINEAR,Qe.CLAMP_TO_EDGE),Nt=it.fbo=Le.createFramebuffer(dt,dt,!0,!1),Nt.colorAttachment.set(xr.texture)}Le.bindFramebuffer.set(Nt.framebuffer),Le.viewport.set([0,0,dt,dt]),ge.useProgram("hillshadePrepare").draw(Le,Qe.TRIANGLES,Pe,ze,He,Xr.disabled,GD(it.tileID,at),null,null,Re.id,ge.rasterBoundsBuffer,ge.quadTriangleIndexBuffer,ge.rasterBoundsSegments),it.needsHillshadePrepare=!1}})(C,R,B,q,ie,uo.disabled,ve),$.viewport.set([0,0,C.width,C.height]);else if(C.renderPass==="translucent")if(ee){let[ge,ye,Me]=C.stencilConfigForOverlapTwoPass(B);Km(C,R,q,Me,ge,ie,ve,!1,Y),Km(C,R,q,Me,ye,ie,ve,!0,Y)}else{let[ge,ye]=C.getStencilConfigForOverlapAndUpdateStencilID(B);Km(C,R,q,ye,ge,ie,ve,!1,Y)}}(s,d,v,x,T):i.ci(v)?function(C,R,q,B,H){if(C.renderPass!=="translucent"||!B.length)return;let{isRenderingToTexture:Y}=H,$=C.style.projection.useSubdivision,ee=C.getDepthModeForSublayer(0,wn.ReadOnly),ie=C.colorModeForRenderPass();if($){let[ve,ge,ye]=C.stencilConfigForOverlapTwoPass(B);oI(C,R,q,ye,ve,ee,ie,!1,Y),oI(C,R,q,ye,ge,ee,ie,!0,Y)}else{let[ve,ge]=C.getStencilConfigForOverlapAndUpdateStencilID(B);oI(C,R,q,ge,ve,ee,ie,!1,Y)}}(s,d,v,x,T):i.cj(v)?function(C,R,q,B,H){if(C.renderPass!=="translucent"||q.paint.get("raster-opacity")===0||!B.length)return;let{isRenderingToTexture:Y}=H,$=R.getSource(),ee=C.style.projection.useSubdivision;if($ instanceof sr)Xm(C,R,q,B,null,!1,!1,$.tileCoords,$.flippedWindingOrder,Y);else if(ee){let[ie,ve,ge]=C.stencilConfigForOverlapTwoPass(B);Xm(C,R,q,ge,ie,!1,!0,Px,!1,Y),Xm(C,R,q,ge,ve,!0,!0,Px,!1,Y)}else{let[ie,ve]=C.getStencilConfigForOverlapAndUpdateStencilID(B);Xm(C,R,q,ve,ie,!1,!0,Px,!1,Y)}}(s,d,v,x,T):i.ck(v)?function(C,R,q,B,H){let Y=q.paint.get("background-color"),$=q.paint.get("background-opacity");if($===0)return;let{isRenderingToTexture:ee}=H,ie=C.context,ve=ie.gl,ge=C.style.projection,ye=C.transform,Me=ye.tileSize,Re=q.paint.get("background-pattern");if(C.isPatternMissing(Re))return;let Pe=!Re&&Y.a===1&&$===1&&C.opaquePassEnabledForLayer()?"opaque":"translucent";if(C.renderPass!==Pe)return;let ze=uo.disabled,He=C.getDepthModeForSublayer(0,Pe==="opaque"?wn.ReadWrite:wn.ReadOnly),Le=C.colorModeForRenderPass(),Qe=C.useProgram(Re?"backgroundPattern":"background"),ht=B||Ae(ye,{tileSize:Me,terrain:C.style.map.terrain});Re&&(ie.activeTexture.set(ve.TEXTURE0),C.imageManager.bind(C.context));let it=q.getCrossfadeParameters();for(let at of ht){let dt=ye.getProjectionData({overscaledTileID:at,applyGlobeMatrix:!ee,applyTerrainMatrix:!0}),Vt=Re?KD($,C,Re,{tileID:at,tileSize:Me},it):ZD($,Y),$t=C.style.map.terrain&&C.style.map.terrain.getTerrainData(at),Nt=ge.getMeshFromTileID(ie,at.canonical,!1,!0,"raster");Qe.draw(ie,ve.TRIANGLES,He,ze,Le,Xr.backCCW,Vt,$t,dt,q.id,Nt.vertexBuffer,Nt.indexBuffer,Nt.segments)}}(s,0,v,x,T):i.cl(v)&&function(C,R,q,B){let{isRenderingGlobe:H}=B,Y=C.context,$=q.implementation,ee=C.style.projection,ie=C.transform,ve=ie.getProjectionDataForCustomLayer(H),ge={farZ:ie.farZ,nearZ:ie.nearZ,fov:ie.fov*Math.PI/180,modelViewProjectionMatrix:ie.modelViewProjectionMatrix,projectionMatrix:ie.projectionMatrix,shaderData:{variantName:ee.shaderVariantName,vertexShaderPrelude:`const float PI = 3.141592653589793;
uniform mat4 u_projection_matrix;
${ee.shaderPreludeCode.vertexSource}`,define:ee.shaderDefine},defaultProjectionData:ve},ye=$.renderingMode?$.renderingMode:"2d";if(C.renderPass==="offscreen"){let Me=$.prerender;Me&&(C.setCustomLayerDefaults(),Y.setColorMode(C.colorModeForRenderPass()),Me.call($,Y.gl,ge),Y.setDirty(),C.setBaseState())}else if(C.renderPass==="translucent"){C.setCustomLayerDefaults(),Y.setColorMode(C.colorModeForRenderPass()),Y.setStencilMode(uo.disabled);let Me=ye==="3d"?C.getDepthModeFor3D():C.getDepthModeForSublayer(0,wn.ReadOnly);Y.setDepthMode(Me),$.render(Y.gl,ge),Y.setDirty(),C.setBaseState(),Y.bindFramebuffer.set(null)}}(s,0,v,T))}saveTileTexture(s){let d=this._tileTextures[s.size[0]];d?d.push(s):this._tileTextures[s.size[0]]=[s]}getTileTexture(s){let d=this._tileTextures[s];return d&&d.length>0?d.pop():null}isPatternMissing(s){if(!s)return!1;if(!s.from||!s.to)return!0;let d=this.imageManager.getPattern(s.from.toString()),v=this.imageManager.getPattern(s.to.toString());return!d||!v}useProgram(s,d,v=!1,x=[]){this.cache=this.cache||{};let T=!!this.style.map.terrain,C=this.style.projection,R=v?Vo.projectionMercator:C.shaderPreludeCode,q=v?Bs:C.shaderDefine,B=s+(d?d.cacheKey:"")+`/${v?os:C.shaderVariantName}`+(this._showOverdrawInspector?"/overdraw":"")+(T?"/terrain":"")+(x?`/${x.join("/")}`:"");return this.cache[B]||(this.cache[B]=new U2(this.context,Vo[s],d,$2[s],this._showOverdrawInspector,T,R,q,x)),this.cache[B]}setCustomLayerDefaults(){this.context.unbindVAO(),this.context.cullFace.setDefault(),this.context.activeTexture.setDefault(),this.context.pixelStoreUnpack.setDefault(),this.context.pixelStoreUnpackPremultiplyAlpha.setDefault(),this.context.pixelStoreUnpackFlipY.setDefault()}setBaseState(){let s=this.context.gl;this.context.cullFace.set(!1),this.context.viewport.set([0,0,this.width,this.height]),this.context.blendEquation.set(s.FUNC_ADD)}initDebugOverlayCanvas(){this.debugOverlayCanvas==null&&(this.debugOverlayCanvas=document.createElement("canvas"),this.debugOverlayCanvas.width=512,this.debugOverlayCanvas.height=512,this.debugOverlayTexture=new i.T(this.context,this.debugOverlayCanvas,this.context.gl.RGBA))}destroy(){this.debugOverlayTexture&&this.debugOverlayTexture.destroy()}overLimit(){let{drawingBufferWidth:s,drawingBufferHeight:d}=this.context.gl;return this.width!==s||this.height!==d}}function Jm(S,s){let d,v=!1,x=null,T=null,C=()=>{x=null,v&&(S.apply(T,d),x=setTimeout(C,s),v=!1)};return(...R)=>(v=!0,T=this,d=R,x||C(),x)}class Lx{constructor(s){this._getCurrentHash=()=>{let d=window.location.hash.replace("#","");if(this._hashName){let v;return d.split("&").map(x=>x.split("=")).forEach(x=>{x[0]===this._hashName&&(v=x)}),(v&&v[1]||"").split("/")}return d.split("/")},this._onHashChange=()=>{let d=this._getCurrentHash();if(!this._isValidHash(d))return!1;let v=this._map.dragRotate.isEnabled()&&this._map.touchZoomRotate.isEnabled()?+(d[3]||0):this._map.getBearing();return this._map.jumpTo({center:[+d[2],+d[1]],zoom:+d[0],bearing:v,pitch:+(d[4]||0)}),!0},this._updateHashUnthrottled=()=>{let d=window.location.href.replace(/(#.*)?$/,this.getHashString());window.history.replaceState(window.history.state,null,d)},this._removeHash=()=>{let d=this._getCurrentHash();if(d.length===0)return;let v=d.join("/"),x=v;x.split("&").length>0&&(x=x.split("&")[0]),this._hashName&&(x=`${this._hashName}=${v}`);let T=window.location.hash.replace(x,"");T.startsWith("#&")?T=T.slice(0,1)+T.slice(2):T==="#"&&(T="");let C=window.location.href.replace(/(#.+)?$/,T);C=C.replace("&&","&"),window.history.replaceState(window.history.state,null,C)},this._updateHash=Jm(this._updateHashUnthrottled,300),this._hashName=s&&encodeURIComponent(s)}addTo(s){return this._map=s,addEventListener("hashchange",this._onHashChange,!1),this._map.on("moveend",this._updateHash),this}remove(){return removeEventListener("hashchange",this._onHashChange,!1),this._map.off("moveend",this._updateHash),clearTimeout(this._updateHash()),this._removeHash(),delete this._map,this}getHashString(s){let d=this._map.getCenter(),v=Math.round(100*this._map.getZoom())/100,x=Math.ceil((v*Math.LN2+Math.log(512/360/.5))/Math.LN10),T=Math.pow(10,x),C=Math.round(d.lng*T)/T,R=Math.round(d.lat*T)/T,q=this._map.getBearing(),B=this._map.getPitch(),H="";if(H+=s?`/${C}/${R}/${v}`:`${v}/${R}/${C}`,(q||B)&&(H+="/"+Math.round(10*q)/10),B&&(H+=`/${Math.round(B)}`),this._hashName){let Y=this._hashName,$=!1,ee=window.location.hash.slice(1).split("&").map(ie=>{let ve=ie.split("=")[0];return ve===Y?($=!0,`${ve}=${H}`):ie}).filter(ie=>ie);return $||ee.push(`${Y}=${H}`),`#${ee.join("&")}`}return`#${H}`}_isValidHash(s){if(s.length<3||s.some(isNaN))return!1;try{new i.S(+s[2],+s[1])}catch(T){return!1}let d=+s[0],v=+(s[3]||0),x=+(s[4]||0);return d>=this._map.getMinZoom()&&d<=this._map.getMaxZoom()&&v>=-180&&v<=180&&x>=this._map.getMinPitch()&&x<=this._map.getMaxPitch()}}let rd={linearity:.3,easing:i.cm(0,0,.3,1)},lI=i.e({deceleration:2500,maxSpeed:1400},rd),fN=i.e({deceleration:20,maxSpeed:1400},rd),dN=i.e({deceleration:1e3,maxSpeed:360},rd),hN=i.e({deceleration:1e3,maxSpeed:90},rd),mN=i.e({deceleration:1e3,maxSpeed:360},rd);class gN{constructor(s){this._map=s,this.clear()}clear(){this._inertiaBuffer=[]}record(s){this._drainInertiaBuffer(),this._inertiaBuffer.push({time:y.now(),settings:s})}_drainInertiaBuffer(){let s=this._inertiaBuffer,d=y.now();for(;s.length>0&&d-s[0].time>160;)s.shift()}_onMoveEnd(s){if(this._drainInertiaBuffer(),this._inertiaBuffer.length<2)return;let d={zoom:0,bearing:0,pitch:0,roll:0,pan:new i.P(0,0),pinchAround:void 0,around:void 0};for(let{settings:T}of this._inertiaBuffer)d.zoom+=T.zoomDelta||0,d.bearing+=T.bearingDelta||0,d.pitch+=T.pitchDelta||0,d.roll+=T.rollDelta||0,T.panDelta&&d.pan._add(T.panDelta),T.around&&(d.around=T.around),T.pinchAround&&(d.pinchAround=T.pinchAround);let v=this._inertiaBuffer[this._inertiaBuffer.length-1].time-this._inertiaBuffer[0].time,x={};if(d.pan.mag()){let T=Cv(d.pan.mag(),v,i.e({},lI,s||{})),C=d.pan.mult(T.amount/d.pan.mag()),R=this._map.cameraHelper.handlePanInertia(C,this._map.transform);x.center=R.easingCenter,x.offset=R.easingOffset,Qc(x,T)}if(d.zoom){let T=Cv(d.zoom,v,fN);x.zoom=this._map.transform.zoom+T.amount,Qc(x,T)}if(d.bearing){let T=Cv(d.bearing,v,dN);x.bearing=this._map.transform.bearing+i.ah(T.amount,-179,179),Qc(x,T)}if(d.pitch){let T=Cv(d.pitch,v,hN);x.pitch=this._map.transform.pitch+T.amount,Qc(x,T)}if(d.roll){let T=Cv(d.roll,v,mN);x.roll=this._map.transform.roll+i.ah(T.amount,-179,179),Qc(x,T)}if(x.zoom||x.bearing){let T=d.pinchAround===void 0?d.around:d.pinchAround;x.around=T?this._map.unproject(T):this._map.getCenter()}return this.clear(),i.e(x,{noMoveStart:!0})}}function Qc(S,s){(!S.duration||S.duration<s.duration)&&(S.duration=s.duration,S.easing=s.easing)}function Cv(S,s,d){let{maxSpeed:v,linearity:x,deceleration:T}=d,C=i.ah(S*x/(s/1e3),-v,v),R=Math.abs(C)/(T*x);return{easing:d.easing,duration:1e3*R,amount:C*(R/2)}}class Xl extends i.l{preventDefault(){this._defaultPrevented=!0}get defaultPrevented(){return this._defaultPrevented}constructor(s,d,v,x={}){v=v instanceof MouseEvent?v:new MouseEvent(s,v);let T=w.mousePos(d.getCanvas(),v),C=d.unproject(T);super(s,i.e({point:T,lngLat:C,originalEvent:v},x)),this._defaultPrevented=!1,this.target=d}}class Av extends i.l{preventDefault(){this._defaultPrevented=!0}get defaultPrevented(){return this._defaultPrevented}constructor(s,d,v){let x=s==="touchend"?v.changedTouches:v.touches,T=w.touchPos(d.getCanvasContainer(),x),C=T.map(q=>d.unproject(q)),R=T.reduce((q,B,H,Y)=>q.add(B.div(Y.length)),new i.P(0,0));super(s,{points:T,point:R,lngLats:C,lngLat:d.unproject(R),originalEvent:v}),this._defaultPrevented=!1}}class uI extends i.l{preventDefault(){this._defaultPrevented=!0}get defaultPrevented(){return this._defaultPrevented}constructor(s,d,v){super(s,{originalEvent:v}),this._defaultPrevented=!1}}class vN{constructor(s,d){this._map=s,this._clickTolerance=d.clickTolerance}reset(){delete this._mousedownPos}wheel(s){return this._firePreventable(new uI(s.type,this._map,s))}mousedown(s,d){return this._mousedownPos=d,this._firePreventable(new Xl(s.type,this._map,s))}mouseup(s){this._map.fire(new Xl(s.type,this._map,s))}click(s,d){this._mousedownPos&&this._mousedownPos.dist(d)>=this._clickTolerance||this._map.fire(new Xl(s.type,this._map,s))}dblclick(s){return this._firePreventable(new Xl(s.type,this._map,s))}mouseover(s){this._map.fire(new Xl(s.type,this._map,s))}mouseout(s){this._map.fire(new Xl(s.type,this._map,s))}touchstart(s){return this._firePreventable(new Av(s.type,this._map,s))}touchmove(s){this._map.fire(new Av(s.type,this._map,s))}touchend(s){this._map.fire(new Av(s.type,this._map,s))}touchcancel(s){this._map.fire(new Av(s.type,this._map,s))}_firePreventable(s){if(this._map.fire(s),s.defaultPrevented)return{}}isEnabled(){return!0}isActive(){return!1}enable(){}disable(){}}class yN{constructor(s){this._map=s}reset(){this._delayContextMenu=!1,this._ignoreContextMenu=!0,delete this._contextMenuEvent}mousemove(s){this._map.fire(new Xl(s.type,this._map,s))}mousedown(){this._delayContextMenu=!0,this._ignoreContextMenu=!1}mouseup(){this._delayContextMenu=!1,this._contextMenuEvent&&(this._map.fire(new Xl("contextmenu",this._map,this._contextMenuEvent)),delete this._contextMenuEvent)}contextmenu(s){this._delayContextMenu?this._contextMenuEvent=s:this._ignoreContextMenu||this._map.fire(new Xl(s.type,this._map,s)),this._map.listens("contextmenu")&&s.preventDefault()}isEnabled(){return!0}isActive(){return!1}enable(){}disable(){}}class Ov{constructor(s){this._map=s}get transform(){return this._map._requestedCameraState||this._map.transform}get center(){return{lng:this.transform.center.lng,lat:this.transform.center.lat}}get zoom(){return this.transform.zoom}get pitch(){return this.transform.pitch}get bearing(){return this.transform.bearing}unproject(s){return this.transform.screenPointToLocation(i.P.convert(s),this._map.terrain)}}class cI{constructor(s,d){this._map=s,this._tr=new Ov(s),this._el=s.getCanvasContainer(),this._container=s.getContainer(),this._clickTolerance=d.clickTolerance||1}isEnabled(){return!!this._enabled}isActive(){return!!this._active}enable(){this.isEnabled()||(this._enabled=!0)}disable(){this.isEnabled()&&(this._enabled=!1)}mousedown(s,d){this.isEnabled()&&s.shiftKey&&s.button===0&&(w.disableDrag(),this._startPos=this._lastPos=d,this._active=!0)}mousemoveWindow(s,d){if(!this._active)return;let v=d;if(this._lastPos.equals(v)||!this._box&&v.dist(this._startPos)<this._clickTolerance)return;let x=this._startPos;this._lastPos=v,this._box||(this._box=w.create("div","maplibregl-boxzoom",this._container),this._container.classList.add("maplibregl-crosshair"),this._fireEvent("boxzoomstart",s));let T=Math.min(x.x,v.x),C=Math.max(x.x,v.x),R=Math.min(x.y,v.y),q=Math.max(x.y,v.y);w.setTransform(this._box,`translate(${T}px,${R}px)`),this._box.style.width=C-T+"px",this._box.style.height=q-R+"px"}mouseupWindow(s,d){if(!this._active||s.button!==0)return;let v=this._startPos,x=d;if(this.reset(),w.suppressClick(),v.x!==x.x||v.y!==x.y)return this._map.fire(new i.l("boxzoomend",{originalEvent:s})),{cameraAnimation:T=>T.fitScreenCoordinates(v,x,this._tr.bearing,{linear:!0})};this._fireEvent("boxzoomcancel",s)}keydown(s){this._active&&s.keyCode===27&&(this.reset(),this._fireEvent("boxzoomcancel",s))}reset(){this._active=!1,this._container.classList.remove("maplibregl-crosshair"),this._box&&(w.remove(this._box),this._box=null),w.enableDrag(),delete this._startPos,delete this._lastPos}_fireEvent(s,d){return this._map.fire(new i.l(s,{originalEvent:d}))}}function Pv(S,s){if(S.length!==s.length)throw new Error(`The number of touches and points are not equal - touches ${S.length}, points ${s.length}`);let d={};for(let v=0;v<S.length;v++)d[S[v].identifier]=s[v];return d}class _N{constructor(s){this.reset(),this.numTouches=s.numTouches}reset(){delete this.centroid,delete this.startTime,delete this.touches,this.aborted=!1}touchstart(s,d,v){(this.centroid||v.length>this.numTouches)&&(this.aborted=!0),this.aborted||(this.startTime===void 0&&(this.startTime=s.timeStamp),v.length===this.numTouches&&(this.centroid=function(x){let T=new i.P(0,0);for(let C of x)T._add(C);return T.div(x.length)}(d),this.touches=Pv(v,d)))}touchmove(s,d,v){if(this.aborted||!this.centroid)return;let x=Pv(v,d);for(let T in this.touches){let C=x[T];(!C||C.dist(this.touches[T])>30)&&(this.aborted=!0)}}touchend(s,d,v){if((!this.centroid||s.timeStamp-this.startTime>500)&&(this.aborted=!0),v.length===0){let x=!this.aborted&&this.centroid;if(this.reset(),x)return x}}}class Jl{constructor(s){this.singleTap=new _N(s),this.numTaps=s.numTaps,this.reset()}reset(){this.lastTime=1/0,delete this.lastTap,this.count=0,this.singleTap.reset()}touchstart(s,d,v){this.singleTap.touchstart(s,d,v)}touchmove(s,d,v){this.singleTap.touchmove(s,d,v)}touchend(s,d,v){let x=this.singleTap.touchend(s,d,v);if(x){let T=s.timeStamp-this.lastTime<500,C=!this.lastTap||this.lastTap.dist(x)<30;if(T&&C||this.reset(),this.count++,this.lastTime=s.timeStamp,this.lastTap=x,this.count===this.numTaps)return this.reset(),x}}}class ep{constructor(s){this._tr=new Ov(s),this._zoomIn=new Jl({numTouches:1,numTaps:2}),this._zoomOut=new Jl({numTouches:2,numTaps:1}),this.reset()}reset(){this._active=!1,this._zoomIn.reset(),this._zoomOut.reset()}touchstart(s,d,v){this._zoomIn.touchstart(s,d,v),this._zoomOut.touchstart(s,d,v)}touchmove(s,d,v){this._zoomIn.touchmove(s,d,v),this._zoomOut.touchmove(s,d,v)}touchend(s,d,v){let x=this._zoomIn.touchend(s,d,v),T=this._zoomOut.touchend(s,d,v),C=this._tr;return x?(this._active=!0,s.preventDefault(),setTimeout(()=>this.reset(),0),{cameraAnimation:R=>R.easeTo({duration:300,zoom:C.zoom+1,around:C.unproject(x)},{originalEvent:s})}):T?(this._active=!0,s.preventDefault(),setTimeout(()=>this.reset(),0),{cameraAnimation:R=>R.easeTo({duration:300,zoom:C.zoom-1,around:C.unproject(T)},{originalEvent:s})}):void 0}touchcancel(){this.reset()}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}}class Dv{constructor(s){this._enabled=!!s.enable,this._moveStateManager=s.moveStateManager,this._clickTolerance=s.clickTolerance||1,this._moveFunction=s.move,this._activateOnStart=!!s.activateOnStart,s.assignEvents(this),this.reset()}reset(s){this._active=!1,this._moved=!1,delete this._lastPoint,this._moveStateManager.endMove(s)}_move(...s){let d=this._moveFunction(...s);if(d.bearingDelta||d.pitchDelta||d.rollDelta||d.around||d.panDelta)return this._active=!0,d}dragStart(s,d){this.isEnabled()&&!this._lastPoint&&this._moveStateManager.isValidStartEvent(s)&&(this._moveStateManager.startMove(s),this._lastPoint=Array.isArray(d)?d[0]:d,this._activateOnStart&&this._lastPoint&&(this._active=!0))}dragMove(s,d){if(!this.isEnabled())return;let v=this._lastPoint;if(!v)return;if(s.preventDefault(),!this._moveStateManager.isValidMoveEvent(s))return void this.reset(s);let x=Array.isArray(d)?d[0]:d;return!this._moved&&x.dist(v)<this._clickTolerance?void 0:(this._moved=!0,this._lastPoint=x,this._move(v,x))}dragEnd(s){this.isEnabled()&&this._lastPoint&&this._moveStateManager.isValidEndEvent(s)&&(this._moved&&w.suppressClick(),this.reset(s))}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}getClickTolerance(){return this._clickTolerance}}let tp=0,Nv=2,DB={[tp]:1,[Nv]:2};class k1{constructor(s){this._correctEvent=s.checkCorrectEvent}startMove(s){let d=w.mouseButton(s);this._eventButton=d}endMove(s){delete this._eventButton}isValidStartEvent(s){return this._correctEvent(s)}isValidMoveEvent(s){return!function(d,v){let x=DB[v];return d.buttons===void 0||(d.buttons&x)!==x}(s,this._eventButton)}isValidEndEvent(s){return w.mouseButton(s)===this._eventButton}}class NB{constructor(){this._firstTouch=void 0}_isOneFingerTouch(s){return s.targetTouches.length===1}_isSameTouchEvent(s){return s.targetTouches[0].identifier===this._firstTouch}startMove(s){this._firstTouch=s.targetTouches[0].identifier}endMove(s){delete this._firstTouch}isValidStartEvent(s){return this._isOneFingerTouch(s)}isValidMoveEvent(s){return this._isOneFingerTouch(s)&&this._isSameTouchEvent(s)}isValidEndEvent(s){return this._isOneFingerTouch(s)&&this._isSameTouchEvent(s)}}class LB{constructor(s=new k1({checkCorrectEvent:()=>!0}),d=new NB){this.mouseMoveStateManager=s,this.oneFingerTouchMoveStateManager=d}_executeRelevantHandler(s,d,v){return s instanceof MouseEvent?d(s):typeof TouchEvent!="undefined"&&s instanceof TouchEvent?v(s):void 0}startMove(s){this._executeRelevantHandler(s,d=>this.mouseMoveStateManager.startMove(d),d=>this.oneFingerTouchMoveStateManager.startMove(d))}endMove(s){this._executeRelevantHandler(s,d=>this.mouseMoveStateManager.endMove(d),d=>this.oneFingerTouchMoveStateManager.endMove(d))}isValidStartEvent(s){return this._executeRelevantHandler(s,d=>this.mouseMoveStateManager.isValidStartEvent(d),d=>this.oneFingerTouchMoveStateManager.isValidStartEvent(d))}isValidMoveEvent(s){return this._executeRelevantHandler(s,d=>this.mouseMoveStateManager.isValidMoveEvent(d),d=>this.oneFingerTouchMoveStateManager.isValidMoveEvent(d))}isValidEndEvent(s){return this._executeRelevantHandler(s,d=>this.mouseMoveStateManager.isValidEndEvent(d),d=>this.oneFingerTouchMoveStateManager.isValidEndEvent(d))}}let R1=S=>{S.mousedown=S.dragStart,S.mousemoveWindow=S.dragMove,S.mouseup=S.dragEnd,S.contextmenu=s=>{s.preventDefault()}};class j1{constructor(s,d){this._clickTolerance=s.clickTolerance||1,this._map=d,this.reset()}reset(){this._active=!1,this._touches={},this._sum=new i.P(0,0)}_shouldBePrevented(s){return s<(this._map.cooperativeGestures.isEnabled()?2:1)}touchstart(s,d,v){return this._calculateTransform(s,d,v)}touchmove(s,d,v){if(this._active){if(!this._shouldBePrevented(v.length))return s.preventDefault(),this._calculateTransform(s,d,v);this._map.cooperativeGestures.notifyGestureBlocked("touch_pan",s)}}touchend(s,d,v){this._calculateTransform(s,d,v),this._active&&this._shouldBePrevented(v.length)&&this.reset()}touchcancel(){this.reset()}_calculateTransform(s,d,v){v.length>0&&(this._active=!0);let x=Pv(v,d),T=new i.P(0,0),C=new i.P(0,0),R=0;for(let B in x){let H=x[B],Y=this._touches[B];Y&&(T._add(H),C._add(H.sub(Y)),R++,x[B]=H)}if(this._touches=x,this._shouldBePrevented(R)||!C.mag())return;let q=C.div(R);return this._sum._add(q),this._sum.mag()<this._clickTolerance?void 0:{around:T.div(R),panDelta:q}}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}}class rp{constructor(){this.reset()}reset(){this._active=!1,delete this._firstTwoTouches}touchstart(s,d,v){this._firstTwoTouches||v.length<2||(this._firstTwoTouches=[v[0].identifier,v[1].identifier],this._start([d[0],d[1]]))}touchmove(s,d,v){if(!this._firstTwoTouches)return;s.preventDefault();let[x,T]=this._firstTwoTouches,C=fr(v,d,x),R=fr(v,d,T);if(!C||!R)return;let q=this._aroundCenter?null:C.add(R).div(2);return this._move([C,R],q,s)}touchend(s,d,v){if(!this._firstTwoTouches)return;let[x,T]=this._firstTwoTouches,C=fr(v,d,x),R=fr(v,d,T);C&&R||(this._active&&w.suppressClick(),this.reset())}touchcancel(){this.reset()}enable(s){this._enabled=!0,this._aroundCenter=!!s&&s.around==="center"}disable(){this._enabled=!1,this.reset()}isEnabled(){return!!this._enabled}isActive(){return!!this._active}}function fr(S,s,d){for(let v=0;v<S.length;v++)if(S[v].identifier===d)return s[v]}function pI(S,s){return Math.log(S/s)/Math.LN2}class kx extends rp{reset(){super.reset(),delete this._distance,delete this._startDistance}_start(s){this._startDistance=this._distance=s[0].dist(s[1])}_move(s,d){let v=this._distance;if(this._distance=s[0].dist(s[1]),this._active||!(Math.abs(pI(this._distance,this._startDistance))<.1))return this._active=!0,{zoomDelta:pI(this._distance,v),pinchAround:d}}}function fI(S,s){return 180*S.angleWith(s)/Math.PI}class Lv extends rp{reset(){super.reset(),delete this._minDiameter,delete this._startVector,delete this._vector}_start(s){this._startVector=this._vector=s[0].sub(s[1]),this._minDiameter=s[0].dist(s[1])}_move(s,d,v){let x=this._vector;if(this._vector=s[0].sub(s[1]),this._active||!this._isBelowThreshold(this._vector))return this._active=!0,{bearingDelta:fI(this._vector,x),pinchAround:d}}_isBelowThreshold(s){this._minDiameter=Math.min(this._minDiameter,s.mag());let d=25/(Math.PI*this._minDiameter)*360,v=fI(s,this._startVector);return Math.abs(v)<d}}function Qm(S){return Math.abs(S.y)>Math.abs(S.x)}class Rx extends rp{constructor(s){super(),this._currentTouchCount=0,this._map=s}reset(){super.reset(),this._valid=void 0,delete this._firstMove,delete this._lastPoints}touchstart(s,d,v){super.touchstart(s,d,v),this._currentTouchCount=v.length}_start(s){this._lastPoints=s,Qm(s[0].sub(s[1]))&&(this._valid=!1)}_move(s,d,v){if(this._map.cooperativeGestures.isEnabled()&&this._currentTouchCount<3)return;let x=s[0].sub(this._lastPoints[0]),T=s[1].sub(this._lastPoints[1]);return this._valid=this.gestureBeginsVertically(x,T,v.timeStamp),this._valid?(this._lastPoints=s,this._active=!0,{pitchDelta:(x.y+T.y)/2*-.5}):void 0}gestureBeginsVertically(s,d,v){if(this._valid!==void 0)return this._valid;let x=s.mag()>=2,T=d.mag()>=2;if(!x&&!T)return;if(!x||!T)return this._firstMove===void 0&&(this._firstMove=v),v-this._firstMove<100&&void 0;let C=s.y>0==d.y>0;return Qm(s)&&Qm(d)&&C}}let ro={panStep:100,bearingStep:15,pitchStep:10};class jx{constructor(s){this._tr=new Ov(s);let d=ro;this._panStep=d.panStep,this._bearingStep=d.bearingStep,this._pitchStep=d.pitchStep,this._rotationDisabled=!1}reset(){this._active=!1}keydown(s){if(s.altKey||s.ctrlKey||s.metaKey)return;let d=0,v=0,x=0,T=0,C=0;switch(s.keyCode){case 61:case 107:case 171:case 187:d=1;break;case 189:case 109:case 173:d=-1;break;case 37:s.shiftKey?v=-1:(s.preventDefault(),T=-1);break;case 39:s.shiftKey?v=1:(s.preventDefault(),T=1);break;case 38:s.shiftKey?x=1:(s.preventDefault(),C=-1);break;case 40:s.shiftKey?x=-1:(s.preventDefault(),C=1);break;default:return}return this._rotationDisabled&&(v=0,x=0),{cameraAnimation:R=>{let q=this._tr;R.easeTo({duration:300,easeId:"keyboardHandler",easing:kB,zoom:d?Math.round(q.zoom)+d*(s.shiftKey?2:1):q.zoom,bearing:q.bearing+v*this._bearingStep,pitch:q.pitch+x*this._pitchStep,offset:[-T*this._panStep,-C*this._panStep],center:q.center},{originalEvent:s})}}}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}disableRotation(){this._rotationDisabled=!0}enableRotation(){this._rotationDisabled=!1}}function kB(S){return S*(2-S)}let qx=4.000244140625,RB=1/450;class bN{constructor(s,d){this._onTimeout=v=>{this._type="wheel",this._delta-=this._lastValue,this._active||this._start(v)},this._map=s,this._tr=new Ov(s),this._triggerRenderFrame=d,this._delta=0,this._defaultZoomRate=.01,this._wheelZoomRate=RB}setZoomRate(s){this._defaultZoomRate=s}setWheelZoomRate(s){this._wheelZoomRate=s}isEnabled(){return!!this._enabled}isActive(){return!!this._active||this._finishTimeout!==void 0}isZooming(){return!!this._zooming}enable(s){this.isEnabled()||(this._enabled=!0,this._aroundCenter=!!s&&s.around==="center")}disable(){this.isEnabled()&&(this._enabled=!1)}_shouldBePrevented(s){return!!this._map.cooperativeGestures.isEnabled()&&!(s.ctrlKey||this._map.cooperativeGestures.isBypassed(s))}wheel(s){if(!this.isEnabled())return;if(this._shouldBePrevented(s))return void this._map.cooperativeGestures.notifyGestureBlocked("wheel_zoom",s);let d=s.deltaMode===WheelEvent.DOM_DELTA_LINE?40*s.deltaY:s.deltaY,v=y.now(),x=v-(this._lastWheelEventTime||0);this._lastWheelEventTime=v,d!==0&&d%qx==0?this._type="wheel":d!==0&&Math.abs(d)<4?this._type="trackpad":x>400?(this._type=null,this._lastValue=d,this._timeout=setTimeout(this._onTimeout,40,s)):this._type||(this._type=Math.abs(x*d)<200?"trackpad":"wheel",this._timeout&&(clearTimeout(this._timeout),this._timeout=null,d+=this._lastValue)),s.shiftKey&&d&&(d/=4),this._type&&(this._lastWheelEvent=s,this._delta-=d,this._active||this._start(s)),s.preventDefault()}_start(s){if(!this._delta)return;this._frameId&&(this._frameId=null),this._active=!0,this.isZooming()||(this._zooming=!0),this._finishTimeout&&(clearTimeout(this._finishTimeout),delete this._finishTimeout);let d=w.mousePos(this._map.getCanvas(),s),v=this._tr;this._aroundPoint=this._aroundCenter?v.transform.locationToScreenPoint(i.S.convert(v.center)):d,this._frameId||(this._frameId=!0,this._triggerRenderFrame())}renderFrame(){if(!this._frameId||(this._frameId=null,!this.isActive()))return;let s=this._tr.transform;if(typeof this._lastExpectedZoom=="number"){let R=s.zoom-this._lastExpectedZoom;typeof this._startZoom=="number"&&(this._startZoom+=R),typeof this._targetZoom=="number"&&(this._targetZoom+=R)}if(this._delta!==0){let R=this._type==="wheel"&&Math.abs(this._delta)>qx?this._wheelZoomRate:this._defaultZoomRate,q=2/(1+Math.exp(-Math.abs(this._delta*R)));this._delta<0&&q!==0&&(q=1/q);let B=typeof this._targetZoom!="number"?s.scale:i.af(this._targetZoom);this._targetZoom=s.getConstrained(s.getCameraLngLat(),i.ak(B*q)).zoom,this._type==="wheel"&&(this._startZoom=s.zoom,this._easing=this._smoothOutEasing(200)),this._delta=0}let d=typeof this._targetZoom!="number"?s.zoom:this._targetZoom,v=this._startZoom,x=this._easing,T,C=!1;if(this._type==="wheel"&&v&&x){let R=y.now()-this._lastWheelEventTime,q=Math.min((R+5)/200,1),B=x(q);T=i.C.number(v,d,B),q<1?this._frameId||(this._frameId=!0):C=!0}else T=d,C=!0;return this._active=!0,C&&(this._active=!1,this._finishTimeout=setTimeout(()=>{this._zooming=!1,this._triggerRenderFrame(),delete this._targetZoom,delete this._lastExpectedZoom,delete this._finishTimeout},200)),this._lastExpectedZoom=T,{noInertia:!0,needsRenderFrame:!C,zoomDelta:T-s.zoom,around:this._aroundPoint,originalEvent:this._lastWheelEvent}}_smoothOutEasing(s){let d=i.co;if(this._prevEase){let v=this._prevEase,x=(y.now()-v.start)/v.duration,T=v.easing(x+.01)-v.easing(x),C=.27/Math.sqrt(T*T+1e-4)*.01,R=Math.sqrt(.0729-C*C);d=i.cm(C,R,.25,1)}return this._prevEase={start:y.now(),duration:s,easing:d},d}reset(){this._active=!1,this._zooming=!1,delete this._targetZoom,delete this._lastExpectedZoom,this._finishTimeout&&(clearTimeout(this._finishTimeout),delete this._finishTimeout)}}class dI{constructor(s,d){this._clickZoom=s,this._tapZoom=d}enable(){this._clickZoom.enable(),this._tapZoom.enable()}disable(){this._clickZoom.disable(),this._tapZoom.disable()}isEnabled(){return this._clickZoom.isEnabled()&&this._tapZoom.isEnabled()}isActive(){return this._clickZoom.isActive()||this._tapZoom.isActive()}}class hI{constructor(s){this._tr=new Ov(s),this.reset()}reset(){this._active=!1}dblclick(s,d){return s.preventDefault(),{cameraAnimation:v=>{v.easeTo({duration:300,zoom:this._tr.zoom+(s.shiftKey?-1:1),around:this._tr.unproject(d)},{originalEvent:s})}}}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}}class xN{constructor(){this._tap=new Jl({numTouches:1,numTaps:1}),this.reset()}reset(){this._active=!1,delete this._swipePoint,delete this._swipeTouch,delete this._tapTime,delete this._tapPoint,this._tap.reset()}touchstart(s,d,v){if(!this._swipePoint)if(this._tapTime){let x=d[0],T=s.timeStamp-this._tapTime<500,C=this._tapPoint.dist(x)<30;T&&C?v.length>0&&(this._swipePoint=x,this._swipeTouch=v[0].identifier):this.reset()}else this._tap.touchstart(s,d,v)}touchmove(s,d,v){if(this._tapTime){if(this._swipePoint){if(v[0].identifier!==this._swipeTouch)return;let x=d[0],T=x.y-this._swipePoint.y;return this._swipePoint=x,s.preventDefault(),this._active=!0,{zoomDelta:T/128}}}else this._tap.touchmove(s,d,v)}touchend(s,d,v){if(this._tapTime)this._swipePoint&&v.length===0&&this.reset();else{let x=this._tap.touchend(s,d,v);x&&(this._tapTime=s.timeStamp,this._tapPoint=x)}}touchcancel(){this.reset()}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}}class wN{constructor(s,d,v){this._el=s,this._mousePan=d,this._touchPan=v}enable(s){this._inertiaOptions=s||{},this._mousePan.enable(),this._touchPan.enable(),this._el.classList.add("maplibregl-touch-drag-pan")}disable(){this._mousePan.disable(),this._touchPan.disable(),this._el.classList.remove("maplibregl-touch-drag-pan")}isEnabled(){return this._mousePan.isEnabled()&&this._touchPan.isEnabled()}isActive(){return this._mousePan.isActive()||this._touchPan.isActive()}}class mI{constructor(s,d,v,x){this._pitchWithRotate=s.pitchWithRotate,this._rollEnabled=s.rollEnabled,this._mouseRotate=d,this._mousePitch=v,this._mouseRoll=x}enable(){this._mouseRotate.enable(),this._pitchWithRotate&&this._mousePitch.enable(),this._rollEnabled&&this._mouseRoll.enable()}disable(){this._mouseRotate.disable(),this._mousePitch.disable(),this._mouseRoll.disable()}isEnabled(){return this._mouseRotate.isEnabled()&&(!this._pitchWithRotate||this._mousePitch.isEnabled())&&(!this._rollEnabled||this._mouseRoll.isEnabled())}isActive(){return this._mouseRotate.isActive()||this._mousePitch.isActive()||this._mouseRoll.isActive()}}class EN{constructor(s,d,v,x){this._el=s,this._touchZoom=d,this._touchRotate=v,this._tapDragZoom=x,this._rotationDisabled=!1,this._enabled=!0}enable(s){this._touchZoom.enable(s),this._rotationDisabled||this._touchRotate.enable(s),this._tapDragZoom.enable(),this._el.classList.add("maplibregl-touch-zoom-rotate")}disable(){this._touchZoom.disable(),this._touchRotate.disable(),this._tapDragZoom.disable(),this._el.classList.remove("maplibregl-touch-zoom-rotate")}isEnabled(){return this._touchZoom.isEnabled()&&(this._rotationDisabled||this._touchRotate.isEnabled())&&this._tapDragZoom.isEnabled()}isActive(){return this._touchZoom.isActive()||this._touchRotate.isActive()||this._tapDragZoom.isActive()}disableRotation(){this._rotationDisabled=!0,this._touchRotate.disable()}enableRotation(){this._rotationDisabled=!1,this._touchZoom.isEnabled()&&this._touchRotate.enable()}}class SN{constructor(s,d){this._bypassKey=navigator.userAgent.indexOf("Mac")!==-1?"metaKey":"ctrlKey",this._map=s,this._options=d,this._enabled=!1}isActive(){return!1}reset(){}_setupUI(){if(this._container)return;let s=this._map.getCanvasContainer();s.classList.add("maplibregl-cooperative-gestures"),this._container=w.create("div","maplibregl-cooperative-gesture-screen",s);let d=this._map._getUIString("CooperativeGesturesHandler.WindowsHelpText");this._bypassKey==="metaKey"&&(d=this._map._getUIString("CooperativeGesturesHandler.MacHelpText"));let v=this._map._getUIString("CooperativeGesturesHandler.MobileHelpText"),x=document.createElement("div");x.className="maplibregl-desktop-message",x.textContent=d,this._container.appendChild(x);let T=document.createElement("div");T.className="maplibregl-mobile-message",T.textContent=v,this._container.appendChild(T),this._container.setAttribute("aria-hidden","true")}_destroyUI(){this._container&&(w.remove(this._container),this._map.getCanvasContainer().classList.remove("maplibregl-cooperative-gestures")),delete this._container}enable(){this._setupUI(),this._enabled=!0}disable(){this._enabled=!1,this._destroyUI()}isEnabled(){return this._enabled}isBypassed(s){return s[this._bypassKey]}notifyGestureBlocked(s,d){this._enabled&&(this._map.fire(new i.l("cooperativegestureprevented",{gestureType:s,originalEvent:d})),this._container.classList.add("maplibregl-show"),setTimeout(()=>{this._container.classList.remove("maplibregl-show")},100))}}let np=S=>S.zoom||S.drag||S.roll||S.pitch||S.rotate;class ni extends i.l{}function kv(S){return S.panDelta&&S.panDelta.mag()||S.zoomDelta||S.bearingDelta||S.pitchDelta||S.rollDelta}class gI{constructor(s,d){this.handleWindowEvent=x=>{this.handleEvent(x,`${x.type}Window`)},this.handleEvent=(x,T)=>{if(x.type==="blur")return void this.stop(!0);this._updatingCamera=!0;let C=x.type==="renderFrame"?void 0:x,R={needsRenderFrame:!1},q={},B={};for(let{handlerName:$,handler:ee,allowed:ie}of this._handlers){if(!ee.isEnabled())continue;let ve;if(this._blockedByActive(B,ie,$))ee.reset();else if(ee[T||x.type]){if(i.cp(x,T||x.type)){let ge=w.mousePos(this._map.getCanvas(),x);ve=ee[T||x.type](x,ge)}else if(i.cq(x,T||x.type)){let ge=this._getMapTouches(x.touches),ye=w.touchPos(this._map.getCanvas(),ge);ve=ee[T||x.type](x,ye,ge)}else i.cr(T||x.type)||(ve=ee[T||x.type](x));this.mergeHandlerResult(R,q,ve,$,C),ve&&ve.needsRenderFrame&&this._triggerRenderFrame()}(ve||ee.isActive())&&(B[$]=ee)}let H={};for(let $ in this._previousActiveHandlers)B[$]||(H[$]=C);this._previousActiveHandlers=B,(Object.keys(H).length||kv(R))&&(this._changes.push([R,q,H]),this._triggerRenderFrame()),(Object.keys(B).length||kv(R))&&this._map._stop(!0),this._updatingCamera=!1;let{cameraAnimation:Y}=R;Y&&(this._inertia.clear(),this._fireEvents({},{},!0),this._changes=[],Y(this._map))},this._map=s,this._el=this._map.getCanvasContainer(),this._handlers=[],this._handlersById={},this._changes=[],this._inertia=new gN(s),this._bearingSnap=d.bearingSnap,this._previousActiveHandlers={},this._eventsInProgress={},this._addDefaultHandlers(d);let v=this._el;this._listeners=[[v,"touchstart",{passive:!0}],[v,"touchmove",{passive:!1}],[v,"touchend",void 0],[v,"touchcancel",void 0],[v,"mousedown",void 0],[v,"mousemove",void 0],[v,"mouseup",void 0],[document,"mousemove",{capture:!0}],[document,"mouseup",void 0],[v,"mouseover",void 0],[v,"mouseout",void 0],[v,"dblclick",void 0],[v,"click",void 0],[v,"keydown",{capture:!1}],[v,"keyup",void 0],[v,"wheel",{passive:!1}],[v,"contextmenu",void 0],[window,"blur",void 0]];for(let[x,T,C]of this._listeners)w.addEventListener(x,T,x===document?this.handleWindowEvent:this.handleEvent,C)}destroy(){for(let[s,d,v]of this._listeners)w.removeEventListener(s,d,s===document?this.handleWindowEvent:this.handleEvent,v)}_addDefaultHandlers(s){let d=this._map,v=d.getCanvasContainer();this._add("mapEvent",new vN(d,s));let x=d.boxZoom=new cI(d,s);this._add("boxZoom",x),s.interactive&&s.boxZoom&&x.enable();let T=d.cooperativeGestures=new SN(d,s.cooperativeGestures);this._add("cooperativeGestures",T),s.cooperativeGestures&&T.enable();let C=new ep(d),R=new hI(d);d.doubleClickZoom=new dI(R,C),this._add("tapZoom",C),this._add("clickZoom",R),s.interactive&&s.doubleClickZoom&&d.doubleClickZoom.enable();let q=new xN;this._add("tapDragZoom",q);let B=d.touchPitch=new Rx(d);this._add("touchPitch",B),s.interactive&&s.touchPitch&&d.touchPitch.enable(s.touchPitch);let H=()=>d.project(d.getCenter()),Y=function({enable:Pe,clickTolerance:ze,aroundCenter:He=!0,minPixelCenterThreshold:Le=100,rotateDegreesPerPixelMoved:Qe=.8},ht){let it=new k1({checkCorrectEvent:at=>w.mouseButton(at)===0&&at.ctrlKey||w.mouseButton(at)===2&&!at.ctrlKey});return new Dv({clickTolerance:ze,move:(at,dt)=>{let Vt=ht();if(He&&Math.abs(Vt.y-at.y)>Le)return{bearingDelta:i.cn(new i.P(at.x,dt.y),dt,Vt)};let $t=(dt.x-at.x)*Qe;return He&&dt.y<Vt.y&&($t=-$t),{bearingDelta:$t}},moveStateManager:it,enable:Pe,assignEvents:R1})}(s,H),$=function({enable:Pe,clickTolerance:ze,pitchDegreesPerPixelMoved:He=-.5}){let Le=new k1({checkCorrectEvent:Qe=>w.mouseButton(Qe)===0&&Qe.ctrlKey||w.mouseButton(Qe)===2});return new Dv({clickTolerance:ze,move:(Qe,ht)=>({pitchDelta:(ht.y-Qe.y)*He}),moveStateManager:Le,enable:Pe,assignEvents:R1})}(s),ee=function({enable:Pe,clickTolerance:ze,rollDegreesPerPixelMoved:He=.3},Le){let Qe=new k1({checkCorrectEvent:ht=>w.mouseButton(ht)===2&&ht.ctrlKey});return new Dv({clickTolerance:ze,move:(ht,it)=>{let at=Le(),dt=(it.x-ht.x)*He;return it.y<at.y&&(dt=-dt),{rollDelta:dt}},moveStateManager:Qe,enable:Pe,assignEvents:R1})}(s,H);d.dragRotate=new mI(s,Y,$,ee),this._add("mouseRotate",Y,["mousePitch"]),this._add("mousePitch",$,["mouseRotate","mouseRoll"]),this._add("mouseRoll",ee,["mousePitch"]),s.interactive&&s.dragRotate&&d.dragRotate.enable();let ie=function({enable:Pe,clickTolerance:ze}){let He=new k1({checkCorrectEvent:Le=>w.mouseButton(Le)===0&&!Le.ctrlKey});return new Dv({clickTolerance:ze,move:(Le,Qe)=>({around:Qe,panDelta:Qe.sub(Le)}),activateOnStart:!0,moveStateManager:He,enable:Pe,assignEvents:R1})}(s),ve=new j1(s,d);d.dragPan=new wN(v,ie,ve),this._add("mousePan",ie),this._add("touchPan",ve,["touchZoom","touchRotate"]),s.interactive&&s.dragPan&&d.dragPan.enable(s.dragPan);let ge=new Lv,ye=new kx;d.touchZoomRotate=new EN(v,ye,ge,q),this._add("touchRotate",ge,["touchPan","touchZoom"]),this._add("touchZoom",ye,["touchPan","touchRotate"]),s.interactive&&s.touchZoomRotate&&d.touchZoomRotate.enable(s.touchZoomRotate);let Me=d.scrollZoom=new bN(d,()=>this._triggerRenderFrame());this._add("scrollZoom",Me,["mousePan"]),s.interactive&&s.scrollZoom&&d.scrollZoom.enable(s.scrollZoom);let Re=d.keyboard=new jx(d);this._add("keyboard",Re),s.interactive&&s.keyboard&&d.keyboard.enable(),this._add("blockableMapEvent",new yN(d))}_add(s,d,v){this._handlers.push({handlerName:s,handler:d,allowed:v}),this._handlersById[s]=d}stop(s){if(!this._updatingCamera){for(let{handler:d}of this._handlers)d.reset();this._inertia.clear(),this._fireEvents({},{},s),this._changes=[]}}isActive(){for(let{handler:s}of this._handlers)if(s.isActive())return!0;return!1}isZooming(){return!!this._eventsInProgress.zoom||this._map.scrollZoom.isZooming()}isRotating(){return!!this._eventsInProgress.rotate}isMoving(){return!!np(this._eventsInProgress)||this.isZooming()}_blockedByActive(s,d,v){for(let x in s)if(x!==v&&(!d||d.indexOf(x)<0))return!0;return!1}_getMapTouches(s){let d=[];for(let v of s)this._el.contains(v.target)&&d.push(v);return d}mergeHandlerResult(s,d,v,x,T){if(!v)return;i.e(s,v);let C={handlerName:x,originalEvent:v.originalEvent||T};v.zoomDelta!==void 0&&(d.zoom=C),v.panDelta!==void 0&&(d.drag=C),v.rollDelta!==void 0&&(d.roll=C),v.pitchDelta!==void 0&&(d.pitch=C),v.bearingDelta!==void 0&&(d.rotate=C)}_applyChanges(){let s={},d={},v={};for(let[x,T,C]of this._changes)x.panDelta&&(s.panDelta=(s.panDelta||new i.P(0,0))._add(x.panDelta)),x.zoomDelta&&(s.zoomDelta=(s.zoomDelta||0)+x.zoomDelta),x.bearingDelta&&(s.bearingDelta=(s.bearingDelta||0)+x.bearingDelta),x.pitchDelta&&(s.pitchDelta=(s.pitchDelta||0)+x.pitchDelta),x.rollDelta&&(s.rollDelta=(s.rollDelta||0)+x.rollDelta),x.around!==void 0&&(s.around=x.around),x.pinchAround!==void 0&&(s.pinchAround=x.pinchAround),x.noInertia&&(s.noInertia=x.noInertia),i.e(d,T),i.e(v,C);this._updateMapTransform(s,d,v),this._changes=[]}_updateMapTransform(s,d,v){let x=this._map,T=x._getTransformForUpdate(),C=x.terrain;if(!(kv(s)||C&&this._terrainMovement))return this._fireEvents(d,v,!0);x._stop(!0);let{panDelta:R,zoomDelta:q,bearingDelta:B,pitchDelta:H,rollDelta:Y,around:$,pinchAround:ee}=s;ee!==void 0&&($=ee),$=$||x.transform.centerPoint,C&&!T.isPointOnMapSurface($)&&($=T.centerPoint);let ie={panDelta:R,zoomDelta:q,rollDelta:Y,pitchDelta:H,bearingDelta:B,around:$};this._map.cameraHelper.useGlobeControls&&!T.isPointOnMapSurface($)&&($=T.centerPoint);let ve=$.distSqr(T.centerPoint)<.01?T.center:T.screenPointToLocation(R?$.sub(R):$);C?(this._map.cameraHelper.handleMapControlsRollPitchBearingZoom(ie,T),this._terrainMovement||!d.drag&&!d.zoom?d.drag&&this._terrainMovement?T.setCenter(T.screenPointToLocation(T.centerPoint.sub(R))):this._map.cameraHelper.handleMapControlsPan(ie,T,ve):(this._terrainMovement=!0,this._map._elevationFreeze=!0,this._map.cameraHelper.handleMapControlsPan(ie,T,ve))):(this._map.cameraHelper.handleMapControlsRollPitchBearingZoom(ie,T),this._map.cameraHelper.handleMapControlsPan(ie,T,ve)),x._applyUpdatedTransform(T),this._map._update(),s.noInertia||this._inertia.record(s),this._fireEvents(d,v,!0)}_fireEvents(s,d,v){let x=np(this._eventsInProgress),T=np(s),C={};for(let Y in s){let{originalEvent:$}=s[Y];this._eventsInProgress[Y]||(C[`${Y}start`]=$),this._eventsInProgress[Y]=s[Y]}!x&&T&&this._fireEvent("movestart",T.originalEvent);for(let Y in C)this._fireEvent(Y,C[Y]);T&&this._fireEvent("move",T.originalEvent);for(let Y in s){let{originalEvent:$}=s[Y];this._fireEvent(Y,$)}let R={},q;for(let Y in this._eventsInProgress){let{handlerName:$,originalEvent:ee}=this._eventsInProgress[Y];this._handlersById[$].isActive()||(delete this._eventsInProgress[Y],q=d[$]||ee,R[`${Y}end`]=q)}for(let Y in R)this._fireEvent(Y,R[Y]);let B=np(this._eventsInProgress),H=(x||T)&&!B;if(H&&this._terrainMovement){this._map._elevationFreeze=!1,this._terrainMovement=!1;let Y=this._map._getTransformForUpdate();this._map.getCenterClampedToGround()&&Y.recalculateZoomAndCenter(this._map.terrain),this._map._applyUpdatedTransform(Y)}if(v&&H){this._updatingCamera=!0;let Y=this._inertia._onMoveEnd(this._map.dragPan._inertiaOptions),$=ee=>ee!==0&&-this._bearingSnap<ee&&ee<this._bearingSnap;!Y||!Y.essential&&y.prefersReducedMotion?(this._map.fire(new i.l("moveend",{originalEvent:q})),$(this._map.getBearing())&&this._map.resetNorth()):($(Y.bearing||this._map.getBearing())&&(Y.bearing=0),Y.freezeElevation=!0,this._map.easeTo(Y,{originalEvent:q})),this._updatingCamera=!1}}_fireEvent(s,d){this._map.fire(new i.l(s,d?{originalEvent:d}:{}))}_requestFrame(){return this._map.triggerRepaint(),this._map._renderTaskQueue.add(s=>{delete this._frameId,this.handleEvent(new ni("renderFrame",{timeStamp:s})),this._applyChanges()})}_triggerRenderFrame(){this._frameId===void 0&&(this._frameId=this._requestFrame())}}class TN extends i.E{constructor(s,d,v){super(),this._renderFrameCallback=()=>{let x=Math.min((y.now()-this._easeStart)/this._easeOptions.duration,1);this._onEaseFrame(this._easeOptions.easing(x)),x<1&&this._easeFrameId?this._easeFrameId=this._requestRenderFrame(this._renderFrameCallback):this.stop()},this._moving=!1,this._zooming=!1,this.transform=s,this._bearingSnap=v.bearingSnap,this.cameraHelper=d,this.on("moveend",()=>{delete this._requestedCameraState})}migrateProjection(s,d){s.apply(this.transform),this.transform=s,this.cameraHelper=d}getCenter(){return new i.S(this.transform.center.lng,this.transform.center.lat)}setCenter(s,d){return this.jumpTo({center:s},d)}getCenterElevation(){return this.transform.elevation}setCenterElevation(s,d){return this.jumpTo({elevation:s},d),this}getCenterClampedToGround(){return this._centerClampedToGround}setCenterClampedToGround(s){this._centerClampedToGround=s}panBy(s,d,v){return s=i.P.convert(s).mult(-1),this.panTo(this.transform.center,i.e({offset:s},d),v)}panTo(s,d,v){return this.easeTo(i.e({center:s},d),v)}getZoom(){return this.transform.zoom}setZoom(s,d){return this.jumpTo({zoom:s},d),this}zoomTo(s,d,v){return this.easeTo(i.e({zoom:s},d),v)}zoomIn(s,d){return this.zoomTo(this.getZoom()+1,s,d),this}zoomOut(s,d){return this.zoomTo(this.getZoom()-1,s,d),this}getVerticalFieldOfView(){return this.transform.fov}setVerticalFieldOfView(s,d){return s!=this.transform.fov&&(this.transform.setFov(s),this.fire(new i.l("movestart",d)).fire(new i.l("move",d)).fire(new i.l("moveend",d))),this}getBearing(){return this.transform.bearing}setBearing(s,d){return this.jumpTo({bearing:s},d),this}getPadding(){return this.transform.padding}setPadding(s,d){return this.jumpTo({padding:s},d),this}rotateTo(s,d,v){return this.easeTo(i.e({bearing:s},d),v)}resetNorth(s,d){return this.rotateTo(0,i.e({duration:1e3},s),d),this}resetNorthPitch(s,d){return this.easeTo(i.e({bearing:0,pitch:0,roll:0,duration:1e3},s),d),this}snapToNorth(s,d){return Math.abs(this.getBearing())<this._bearingSnap?this.resetNorth(s,d):this}getPitch(){return this.transform.pitch}setPitch(s,d){return this.jumpTo({pitch:s},d),this}getRoll(){return this.transform.roll}setRoll(s,d){return this.jumpTo({roll:s},d),this}cameraForBounds(s,d){s=Ot.convert(s).adjustAntiMeridian();let v=d&&d.bearing||0;return this._cameraForBoxAndBearing(s.getNorthWest(),s.getSouthEast(),v,d)}_cameraForBoxAndBearing(s,d,v,x){let T={top:0,bottom:0,right:0,left:0};if(typeof(x=i.e({padding:T,offset:[0,0],maxZoom:this.transform.maxZoom},x)).padding=="number"){let B=x.padding;x.padding={top:B,bottom:B,right:B,left:B}}let C=i.e(T,x.padding);x.padding=C;let R=this.transform,q=new Ot(s,d);return this.cameraHelper.cameraForBoxAndBearing(x,C,q,v,R)}fitBounds(s,d,v){return this._fitInternal(this.cameraForBounds(s,d),d,v)}fitScreenCoordinates(s,d,v,x,T){return this._fitInternal(this._cameraForBoxAndBearing(this.transform.screenPointToLocation(i.P.convert(s)),this.transform.screenPointToLocation(i.P.convert(d)),v,x),x,T)}_fitInternal(s,d,v){return s?(delete(d=i.e(s,d)).padding,d.linear?this.easeTo(d,v):this.flyTo(d,v)):this}jumpTo(s,d){this.stop();let v=this._getTransformForUpdate(),x=!1,T=!1,C=!1,R=v.zoom;this.cameraHelper.handleJumpToCenterZoom(v,s);let q=v.zoom!==R;return"elevation"in s&&v.elevation!==+s.elevation&&v.setElevation(+s.elevation),"bearing"in s&&v.bearing!==+s.bearing&&(x=!0,v.setBearing(+s.bearing)),"pitch"in s&&v.pitch!==+s.pitch&&(T=!0,v.setPitch(+s.pitch)),"roll"in s&&v.roll!==+s.roll&&(C=!0,v.setRoll(+s.roll)),s.padding==null||v.isPaddingEqual(s.padding)||v.setPadding(s.padding),this._applyUpdatedTransform(v),this.fire(new i.l("movestart",d)).fire(new i.l("move",d)),q&&this.fire(new i.l("zoomstart",d)).fire(new i.l("zoom",d)).fire(new i.l("zoomend",d)),x&&this.fire(new i.l("rotatestart",d)).fire(new i.l("rotate",d)).fire(new i.l("rotateend",d)),T&&this.fire(new i.l("pitchstart",d)).fire(new i.l("pitch",d)).fire(new i.l("pitchend",d)),C&&this.fire(new i.l("rollstart",d)).fire(new i.l("roll",d)).fire(new i.l("rollend",d)),this.fire(new i.l("moveend",d))}calculateCameraOptionsFromTo(s,d,v,x=0){let T=i.a1.fromLngLat(s,d),C=i.a1.fromLngLat(v,x),R=C.x-T.x,q=C.y-T.y,B=C.z-T.z,H=Math.hypot(R,q,B);if(H===0)throw new Error("Can't calculate camera options with same From and To");let Y=Math.hypot(R,q),$=i.ak(this.transform.cameraToCenterDistance/H/this.transform.tileSize),ee=180*Math.atan2(R,-q)/Math.PI,ie=180*Math.acos(Y/H)/Math.PI;return ie=B<0?90-ie:90+ie,{center:C.toLngLat(),elevation:x,zoom:$,pitch:ie,bearing:ee}}calculateCameraOptionsFromCameraLngLatAltRotation(s,d,v,x,T){let C=this.transform.calculateCenterFromCameraLngLatAlt(s,d,v,x);return{center:C.center,elevation:C.elevation,zoom:C.zoom,bearing:v,pitch:x,roll:T}}easeTo(s,d){this._stop(!1,s.easeId),((s=i.e({offset:[0,0],duration:500,easing:i.co},s)).animate===!1||!s.essential&&y.prefersReducedMotion)&&(s.duration=0);let v=this._getTransformForUpdate(),x=this.getBearing(),T=v.pitch,C=v.roll,R="bearing"in s?this._normalizeBearing(s.bearing,x):x,q="pitch"in s?+s.pitch:T,B="roll"in s?this._normalizeBearing(s.roll,C):C,H="padding"in s?s.padding:v.padding,Y=i.P.convert(s.offset),$,ee;s.around&&($=i.S.convert(s.around),ee=v.locationToScreenPoint($));let ie={moving:this._moving,zooming:this._zooming,rotating:this._rotating,pitching:this._pitching,rolling:this._rolling},ve=this.cameraHelper.handleEaseTo(v,{bearing:R,pitch:q,roll:B,padding:H,around:$,aroundPoint:ee,offsetAsPoint:Y,offset:s.offset,zoom:s.zoom,center:s.center});return this._rotating=this._rotating||x!==R,this._pitching=this._pitching||q!==T,this._rolling=this._rolling||B!==C,this._padding=!v.isPaddingEqual(H),this._zooming=this._zooming||ve.isZooming,this._easeId=s.easeId,this._prepareEase(d,s.noMoveStart,ie),this.terrain&&this._prepareElevation(ve.elevationCenter),this._ease(ge=>{ve.easeFunc(ge),this.terrain&&!s.freezeElevation&&this._updateElevation(ge),this._applyUpdatedTransform(v),this._fireMoveEvents(d)},ge=>{this.terrain&&s.freezeElevation&&this._finalizeElevation(),this._afterEase(d,ge)},s),this}_prepareEase(s,d,v={}){this._moving=!0,d||v.moving||this.fire(new i.l("movestart",s)),this._zooming&&!v.zooming&&this.fire(new i.l("zoomstart",s)),this._rotating&&!v.rotating&&this.fire(new i.l("rotatestart",s)),this._pitching&&!v.pitching&&this.fire(new i.l("pitchstart",s)),this._rolling&&!v.rolling&&this.fire(new i.l("rollstart",s))}_prepareElevation(s){this._elevationCenter=s,this._elevationStart=this.transform.elevation,this._elevationTarget=this.terrain.getElevationForLngLatZoom(s,this.transform.tileZoom),this._elevationFreeze=!0}_updateElevation(s){this._elevationStart!==void 0&&this._elevationCenter!==void 0||this._prepareElevation(this.transform.center),this.transform.setMinElevationForCurrentTile(this.terrain.getMinTileElevationForLngLatZoom(this._elevationCenter,this.transform.tileZoom));let d=this.terrain.getElevationForLngLatZoom(this._elevationCenter,this.transform.tileZoom);if(s<1&&d!==this._elevationTarget){let v=this._elevationTarget-this._elevationStart;this._elevationStart+=s*(v-(d-(v*s+this._elevationStart))/(1-s)),this._elevationTarget=d}this.transform.setElevation(i.C.number(this._elevationStart,this._elevationTarget,s))}_finalizeElevation(){this._elevationFreeze=!1,this.getCenterClampedToGround()&&this.transform.recalculateZoomAndCenter(this.terrain)}_getTransformForUpdate(){return this.transformCameraUpdate||this.terrain?(this._requestedCameraState||(this._requestedCameraState=this.transform.clone()),this._requestedCameraState):this.transform}_elevateCameraIfInsideTerrain(s){if(!this.terrain&&s.elevation>=0&&s.pitch<=90)return{};let d=s.getCameraLngLat(),v=s.getCameraAltitude(),x=this.terrain?this.terrain.getElevationForLngLatZoom(d,s.zoom):0;if(v<x){let T=this.calculateCameraOptionsFromTo(d,x,s.center,s.elevation);return{pitch:T.pitch,zoom:T.zoom}}return{}}_applyUpdatedTransform(s){let d=[];if(d.push(x=>this._elevateCameraIfInsideTerrain(x)),this.transformCameraUpdate&&d.push(x=>this.transformCameraUpdate(x)),!d.length)return;let v=s.clone();for(let x of d){let T=v.clone(),{center:C,zoom:R,roll:q,pitch:B,bearing:H,elevation:Y}=x(T);C&&T.setCenter(C),Y!==void 0&&T.setElevation(Y),R!==void 0&&T.setZoom(R),q!==void 0&&T.setRoll(q),B!==void 0&&T.setPitch(B),H!==void 0&&T.setBearing(H),v.apply(T)}this.transform.apply(v)}_fireMoveEvents(s){this.fire(new i.l("move",s)),this._zooming&&this.fire(new i.l("zoom",s)),this._rotating&&this.fire(new i.l("rotate",s)),this._pitching&&this.fire(new i.l("pitch",s)),this._rolling&&this.fire(new i.l("roll",s))}_afterEase(s,d){if(this._easeId&&d&&this._easeId===d)return;delete this._easeId;let v=this._zooming,x=this._rotating,T=this._pitching,C=this._rolling;this._moving=!1,this._zooming=!1,this._rotating=!1,this._pitching=!1,this._rolling=!1,this._padding=!1,v&&this.fire(new i.l("zoomend",s)),x&&this.fire(new i.l("rotateend",s)),T&&this.fire(new i.l("pitchend",s)),C&&this.fire(new i.l("rollend",s)),this.fire(new i.l("moveend",s))}flyTo(s,d){if(!s.essential&&y.prefersReducedMotion){let dt=i.Q(s,["center","zoom","bearing","pitch","roll","elevation"]);return this.jumpTo(dt,d)}this.stop(),s=i.e({offset:[0,0],speed:1.2,curve:1.42,easing:i.co},s);let v=this._getTransformForUpdate(),x=v.bearing,T=v.pitch,C=v.roll,R=v.padding,q="bearing"in s?this._normalizeBearing(s.bearing,x):x,B="pitch"in s?+s.pitch:T,H="roll"in s?this._normalizeBearing(s.roll,C):C,Y="padding"in s?s.padding:v.padding,$=i.P.convert(s.offset),ee=v.centerPoint.add($),ie=v.screenPointToLocation(ee),ve=this.cameraHelper.handleFlyTo(v,{bearing:q,pitch:B,roll:H,padding:Y,locationAtOffset:ie,offsetAsPoint:$,center:s.center,minZoom:s.minZoom,zoom:s.zoom}),ge=s.curve,ye=Math.max(v.width,v.height),Me=ye/ve.scaleOfZoom,Re=ve.pixelPathLength;typeof ve.scaleOfMinZoom=="number"&&(ge=Math.sqrt(ye/ve.scaleOfMinZoom/Re*2));let Pe=ge*ge;function ze(dt){let Vt=(Me*Me-ye*ye+(dt?-1:1)*Pe*Pe*Re*Re)/(2*(dt?Me:ye)*Pe*Re);return Math.log(Math.sqrt(Vt*Vt+1)-Vt)}function He(dt){return(Math.exp(dt)-Math.exp(-dt))/2}function Le(dt){return(Math.exp(dt)+Math.exp(-dt))/2}let Qe=ze(!1),ht=function(dt){return Le(Qe)/Le(Qe+ge*dt)},it=function(dt){return ye*((Le(Qe)*(He(Vt=Qe+ge*dt)/Le(Vt))-He(Qe))/Pe)/Re;var Vt},at=(ze(!0)-Qe)/ge;if(Math.abs(Re)<2e-6||!isFinite(at)){if(Math.abs(ye-Me)<1e-6)return this.easeTo(s,d);let dt=Me<ye?-1:1;at=Math.abs(Math.log(Me/ye))/ge,it=()=>0,ht=Vt=>Math.exp(dt*ge*Vt)}return s.duration="duration"in s?+s.duration:1e3*at/("screenSpeed"in s?+s.screenSpeed/ge:+s.speed),s.maxDuration&&s.duration>s.maxDuration&&(s.duration=0),this._zooming=!0,this._rotating=x!==q,this._pitching=B!==T,this._rolling=H!==C,this._padding=!v.isPaddingEqual(Y),this._prepareEase(d,!1),this.terrain&&this._prepareElevation(ve.targetCenter),this._ease(dt=>{let Vt=dt*at,$t=1/ht(Vt),Nt=it(Vt);this._rotating&&v.setBearing(i.C.number(x,q,dt)),this._pitching&&v.setPitch(i.C.number(T,B,dt)),this._rolling&&v.setRoll(i.C.number(C,H,dt)),this._padding&&(v.interpolatePadding(R,Y,dt),ee=v.centerPoint.add($)),ve.easeFunc(dt,$t,Nt,ee),this.terrain&&!s.freezeElevation&&this._updateElevation(dt),this._applyUpdatedTransform(v),this._fireMoveEvents(d)},()=>{this.terrain&&s.freezeElevation&&this._finalizeElevation(),this._afterEase(d)},s),this}isEasing(){return!!this._easeFrameId}stop(){return this._stop()}_stop(s,d){var v;if(this._easeFrameId&&(this._cancelRenderFrame(this._easeFrameId),delete this._easeFrameId,delete this._onEaseFrame),this._onEaseEnd){let x=this._onEaseEnd;delete this._onEaseEnd,x.call(this,d)}return s||(v=this.handlers)===null||v===void 0||v.stop(!1),this}_ease(s,d,v){v.animate===!1||v.duration===0?(s(1),d()):(this._easeStart=y.now(),this._easeOptions=v,this._onEaseFrame=s,this._onEaseEnd=d,this._easeFrameId=this._requestRenderFrame(this._renderFrameCallback))}_normalizeBearing(s,d){s=i.aO(s,-180,180);let v=Math.abs(s-d);return Math.abs(s-360-d)<v&&(s-=360),Math.abs(s+360-d)<v&&(s+=360),s}queryTerrainElevation(s){return this.terrain?this.terrain.getElevationForLngLatZoom(i.S.convert(s),this.transform.tileZoom):null}}let vI={compact:!0,customAttribution:"<a href=\"https://maplibre.org/\" target=\"_blank\">MapLibre</a>"};class yI{constructor(s=vI){this._toggleAttribution=()=>{this._container.classList.contains("maplibregl-compact")&&(this._container.classList.contains("maplibregl-compact-show")?(this._container.setAttribute("open",""),this._container.classList.remove("maplibregl-compact-show")):(this._container.classList.add("maplibregl-compact-show"),this._container.removeAttribute("open")))},this._updateData=d=>{!d||d.sourceDataType!=="metadata"&&d.sourceDataType!=="visibility"&&d.dataType!=="style"&&d.type!=="terrain"||this._updateAttributions()},this._updateCompact=()=>{this._map.getCanvasContainer().offsetWidth<=640||this._compact?this._compact===!1?this._container.setAttribute("open",""):this._container.classList.contains("maplibregl-compact")||this._container.classList.contains("maplibregl-attrib-empty")||(this._container.setAttribute("open",""),this._container.classList.add("maplibregl-compact","maplibregl-compact-show")):(this._container.setAttribute("open",""),this._container.classList.contains("maplibregl-compact")&&this._container.classList.remove("maplibregl-compact","maplibregl-compact-show"))},this._updateCompactMinimize=()=>{this._container.classList.contains("maplibregl-compact")&&this._container.classList.contains("maplibregl-compact-show")&&this._container.classList.remove("maplibregl-compact-show")},this.options=s}getDefaultPosition(){return"bottom-right"}onAdd(s){return this._map=s,this._compact=this.options.compact,this._container=w.create("details","maplibregl-ctrl maplibregl-ctrl-attrib"),this._compactButton=w.create("summary","maplibregl-ctrl-attrib-button",this._container),this._compactButton.addEventListener("click",this._toggleAttribution),this._setElementTitle(this._compactButton,"ToggleAttribution"),this._innerContainer=w.create("div","maplibregl-ctrl-attrib-inner",this._container),this._updateAttributions(),this._updateCompact(),this._map.on("styledata",this._updateData),this._map.on("sourcedata",this._updateData),this._map.on("terrain",this._updateData),this._map.on("resize",this._updateCompact),this._map.on("drag",this._updateCompactMinimize),this._container}onRemove(){w.remove(this._container),this._map.off("styledata",this._updateData),this._map.off("sourcedata",this._updateData),this._map.off("terrain",this._updateData),this._map.off("resize",this._updateCompact),this._map.off("drag",this._updateCompactMinimize),this._map=void 0,this._compact=void 0,this._attribHTML=void 0}_setElementTitle(s,d){let v=this._map._getUIString(`AttributionControl.${d}`);s.title=v,s.setAttribute("aria-label",v)}_updateAttributions(){if(!this._map.style)return;let s=[];if(this.options.customAttribution&&(Array.isArray(this.options.customAttribution)?s=s.concat(this.options.customAttribution.map(x=>typeof x!="string"?"":x)):typeof this.options.customAttribution=="string"&&s.push(this.options.customAttribution)),this._map.style.stylesheet){let x=this._map.style.stylesheet;this.styleOwner=x.owner,this.styleId=x.id}let d=this._map.style.sourceCaches;for(let x in d){let T=d[x];if(T.used||T.usedForTerrain){let C=T.getSource();C.attribution&&s.indexOf(C.attribution)<0&&s.push(C.attribution)}}s=s.filter(x=>String(x).trim()),s.sort((x,T)=>x.length-T.length),s=s.filter((x,T)=>{for(let C=T+1;C<s.length;C++)if(s[C].indexOf(x)>=0)return!1;return!0});let v=s.join(" | ");v!==this._attribHTML&&(this._attribHTML=v,s.length?(this._innerContainer.innerHTML=w.sanitize(v),this._container.classList.remove("maplibregl-attrib-empty")):this._container.classList.add("maplibregl-attrib-empty"),this._updateCompact(),this._editLink=null)}}class IN{constructor(s={}){this._updateCompact=()=>{let d=this._container.children;if(d.length){let v=d[0];this._map.getCanvasContainer().offsetWidth<=640||this._compact?this._compact!==!1&&v.classList.add("maplibregl-compact"):v.classList.remove("maplibregl-compact")}},this.options=s}getDefaultPosition(){return"bottom-left"}onAdd(s){this._map=s,this._compact=this.options&&this.options.compact,this._container=w.create("div","maplibregl-ctrl");let d=w.create("a","maplibregl-ctrl-logo");return d.target="_blank",d.rel="noopener nofollow",d.href="https://maplibre.org/",d.setAttribute("aria-label",this._map._getUIString("LogoControl.Title")),d.setAttribute("rel","noopener nofollow"),this._container.appendChild(d),this._container.style.display="block",this._map.on("resize",this._updateCompact),this._updateCompact(),this._container}onRemove(){w.remove(this._container),this._map.off("resize",this._updateCompact),this._map=void 0,this._compact=void 0}}class Fp{constructor(){this._queue=[],this._id=0,this._cleared=!1,this._currentlyRunning=!1}add(s){let d=++this._id;return this._queue.push({callback:s,id:d,cancelled:!1}),d}remove(s){let d=this._currentlyRunning,v=d?this._queue.concat(d):this._queue;for(let x of v)if(x.id===s)return void(x.cancelled=!0)}run(s=0){if(this._currentlyRunning)throw new Error("Attempting to run(), but is already running.");let d=this._currentlyRunning=this._queue;this._queue=[];for(let v of d)if(!v.cancelled&&(v.callback(s),this._cleared))break;this._cleared=!1,this._currentlyRunning=!1}clear(){this._currentlyRunning&&(this._cleared=!0),this._queue=[]}}var zx=i.aJ([{name:"a_pos3d",type:"Int16",components:3}]);class Sr extends i.E{constructor(s){super(),this._lastTilesetChange=y.now(),this.sourceCache=s,this._tiles={},this._renderableTilesKeys=[],this._sourceTileCache={},this.minzoom=0,this.maxzoom=22,this.deltaZoom=1,this.tileSize=s._source.tileSize*ag(2,this.deltaZoom),s.usedForTerrain=!0,s.tileSize=this.tileSize}destruct(){this.sourceCache.usedForTerrain=!1,this.sourceCache.tileSize=null}update(s,d){this.sourceCache.update(s,d),this._renderableTilesKeys=[];let v={};for(let x of Ae(s,{tileSize:this.tileSize,minzoom:this.minzoom,maxzoom:this.maxzoom,reparseOverscaled:!1,terrain:d,calculateTileZoom:this.sourceCache._source.calculateTileZoom}))v[x.key]=!0,this._renderableTilesKeys.push(x.key),this._tiles[x.key]||(x.terrainRttPosMatrix32f=new Float64Array(16),i.bY(x.terrainRttPosMatrix32f,0,i.$,i.$,0,0,1),this._tiles[x.key]=new Wt(x,this.tileSize),this._lastTilesetChange=y.now());for(let x in this._tiles)v[x]||delete this._tiles[x]}freeRtt(s){for(let d in this._tiles){let v=this._tiles[d];(!s||v.tileID.equals(s)||v.tileID.isChildOf(s)||s.isChildOf(v.tileID))&&(v.rtt=[])}}getRenderableTiles(){return this._renderableTilesKeys.map(s=>this.getTileByID(s))}getTileByID(s){return this._tiles[s]}getTerrainCoords(s,d){return d?this._getTerrainCoordsForTileRanges(s,d):this._getTerrainCoordsForRegularTile(s)}_getTerrainCoordsForRegularTile(s){let d={};for(let v of this._renderableTilesKeys){let x=this._tiles[v].tileID,T=s.clone(),C=i.ba();if(x.canonical.equals(s.canonical))i.bY(C,0,i.$,i.$,0,0,1);else if(x.canonical.isChildOf(s.canonical)){let R=x.canonical.z-s.canonical.z,q=x.canonical.x-(x.canonical.x>>R<<R),B=x.canonical.y-(x.canonical.y>>R<<R),H=i.$>>R;i.bY(C,0,H,H,0,0,1),i.M(C,C,[-q*H,-B*H,0])}else{if(!s.canonical.isChildOf(x.canonical))continue;{let R=s.canonical.z-x.canonical.z,q=s.canonical.x-(s.canonical.x>>R<<R),B=s.canonical.y-(s.canonical.y>>R<<R),H=i.$>>R;i.bY(C,0,i.$,i.$,0,0,1),i.M(C,C,[q*H,B*H,0]),i.N(C,C,[1/ag(2,R),1/ag(2,R),0])}}T.terrainRttPosMatrix32f=new Float32Array(C),d[v]=T}return d}_getTerrainCoordsForTileRanges(s,d){let v={};for(let x of this._renderableTilesKeys){let T=this._tiles[x].tileID;if(!this._isWithinTileRanges(T,d))continue;let C=s.clone(),R=i.ba();if(T.canonical.z===s.canonical.z){let q=s.canonical.x-T.canonical.x,B=s.canonical.y-T.canonical.y;i.bY(R,0,i.$,i.$,0,0,1),i.M(R,R,[q*i.$,B*i.$,0])}else if(T.canonical.z>s.canonical.z){let q=T.canonical.z-s.canonical.z,B=T.canonical.x-(T.canonical.x>>q<<q),H=T.canonical.y-(T.canonical.y>>q<<q),Y=s.canonical.x-(T.canonical.x>>q),$=s.canonical.y-(T.canonical.y>>q),ee=i.$>>q;i.bY(R,0,ee,ee,0,0,1),i.M(R,R,[-B*ee+Y*i.$,-H*ee+$*i.$,0])}else{let q=s.canonical.z-T.canonical.z,B=s.canonical.x-(s.canonical.x>>q<<q),H=s.canonical.y-(s.canonical.y>>q<<q),Y=(s.canonical.x>>q)-T.canonical.x,$=(s.canonical.y>>q)-T.canonical.y,ee=i.$<<q;i.bY(R,0,ee,ee,0,0,1),i.M(R,R,[B*i.$+Y*ee,H*i.$+$*ee,0])}C.terrainRttPosMatrix32f=new Float32Array(R),v[x]=C}return v}getSourceTile(s,d){let v=this.sourceCache._source,x=s.overscaledZ-this.deltaZoom;if(x>v.maxzoom&&(x=v.maxzoom),x<v.minzoom)return null;this._sourceTileCache[s.key]||(this._sourceTileCache[s.key]=s.scaledTo(x).key);let T=this.sourceCache.getTileByID(this._sourceTileCache[s.key]);if((!T||!T.dem)&&d)for(;x>=v.minzoom&&(!T||!T.dem);)T=this.sourceCache.getTileByID(s.scaledTo(x--).key);return T}anyTilesAfterTime(s=Date.now()){return this._lastTilesetChange>=s}_isWithinTileRanges(s,d){return d[s.canonical.z]&&s.canonical.x>=d[s.canonical.z].minTileX&&s.canonical.x<=d[s.canonical.z].maxTileX&&s.canonical.y>=d[s.canonical.z].minTileY&&s.canonical.y<=d[s.canonical.z].maxTileY}}class Kr{constructor(s,d,v){this._meshCache={},this.painter=s,this.sourceCache=new Sr(d),this.options=v,this.exaggeration=typeof v.exaggeration=="number"?v.exaggeration:1,this.qualityFactor=2,this.meshSize=128,this._demMatrixCache={},this.coordsIndex=[],this._coordsTextureSize=1024}getDEMElevation(s,d,v,x=i.$){var T;if(!(d>=0&&d<x&&v>=0&&v<x))return 0;let C=this.getTerrainData(s),R=(T=C.tile)===null||T===void 0?void 0:T.dem;if(!R)return 0;let q=i.cs([],[d/x*i.$,v/x*i.$],C.u_terrain_matrix),B=[q[0]*R.dim,q[1]*R.dim],H=Math.floor(B[0]),Y=Math.floor(B[1]),$=B[0]-H,ee=B[1]-Y;return R.get(H,Y)*(1-$)*(1-ee)+R.get(H+1,Y)*$*(1-ee)+R.get(H,Y+1)*(1-$)*ee+R.get(H+1,Y+1)*$*ee}getElevationForLngLatZoom(s,d){if(!i.ct(d,s.wrap()))return 0;let{tileID:v,mercatorX:x,mercatorY:T}=this._getOverscaledTileIDFromLngLatZoom(s,d);return this.getElevation(v,x%i.$,T%i.$,i.$)}getElevation(s,d,v,x=i.$){return this.getDEMElevation(s,d,v,x)*this.exaggeration}getTerrainData(s){if(!this._emptyDemTexture){let x=this.painter.context,T=new i.R({width:1,height:1},new Uint8Array(4));this._emptyDepthTexture=new i.T(x,T,x.gl.RGBA,{premultiply:!1}),this._emptyDemUnpack=[0,0,0,0],this._emptyDemTexture=new i.T(x,new i.R({width:1,height:1}),x.gl.RGBA,{premultiply:!1}),this._emptyDemTexture.bind(x.gl.NEAREST,x.gl.CLAMP_TO_EDGE),this._emptyDemMatrix=i.ag([])}let d=this.sourceCache.getSourceTile(s,!0);if(d&&d.dem&&(!d.demTexture||d.needsTerrainPrepare)){let x=this.painter.context;d.demTexture=this.painter.getTileTexture(d.dem.stride),d.demTexture?d.demTexture.update(d.dem.getPixels(),{premultiply:!1}):d.demTexture=new i.T(x,d.dem.getPixels(),x.gl.RGBA,{premultiply:!1}),d.demTexture.bind(x.gl.NEAREST,x.gl.CLAMP_TO_EDGE),d.needsTerrainPrepare=!1}let v=d&&d+d.tileID.key+s.key;if(v&&!this._demMatrixCache[v]){let x=this.sourceCache.sourceCache._source.maxzoom,T=s.canonical.z-d.tileID.canonical.z;s.overscaledZ>s.canonical.z&&(s.canonical.z>=x?T=s.canonical.z-x:i.w("cannot calculate elevation if elevation maxzoom > source.maxzoom"));let C=s.canonical.x-(s.canonical.x>>T<<T),R=s.canonical.y-(s.canonical.y>>T<<T),q=i.cu(new Float64Array(16),[1/(i.$<<T),1/(i.$<<T),0]);i.M(q,q,[C*i.$,R*i.$,0]),this._demMatrixCache[s.key]={matrix:q,coord:s}}return{u_depth:2,u_terrain:3,u_terrain_dim:d&&d.dem&&d.dem.dim||1,u_terrain_matrix:v?this._demMatrixCache[s.key].matrix:this._emptyDemMatrix,u_terrain_unpack:d&&d.dem&&d.dem.getUnpackVector()||this._emptyDemUnpack,u_terrain_exaggeration:this.exaggeration,texture:(d&&d.demTexture||this._emptyDemTexture).texture,depthTexture:(this._fboDepthTexture||this._emptyDepthTexture).texture,tile:d}}getFramebuffer(s){let d=this.painter,v=d.width/devicePixelRatio,x=d.height/devicePixelRatio;return!this._fbo||this._fbo.width===v&&this._fbo.height===x||(this._fbo.destroy(),this._fboCoordsTexture.destroy(),this._fboDepthTexture.destroy(),delete this._fbo,delete this._fboDepthTexture,delete this._fboCoordsTexture),this._fboCoordsTexture||(this._fboCoordsTexture=new i.T(d.context,{width:v,height:x,data:null},d.context.gl.RGBA,{premultiply:!1}),this._fboCoordsTexture.bind(d.context.gl.NEAREST,d.context.gl.CLAMP_TO_EDGE)),this._fboDepthTexture||(this._fboDepthTexture=new i.T(d.context,{width:v,height:x,data:null},d.context.gl.RGBA,{premultiply:!1}),this._fboDepthTexture.bind(d.context.gl.NEAREST,d.context.gl.CLAMP_TO_EDGE)),this._fbo||(this._fbo=d.context.createFramebuffer(v,x,!0,!1),this._fbo.depthAttachment.set(d.context.createRenderbuffer(d.context.gl.DEPTH_COMPONENT16,v,x))),this._fbo.colorAttachment.set(s==="coords"?this._fboCoordsTexture.texture:this._fboDepthTexture.texture),this._fbo}getCoordsTexture(){let s=this.painter.context;if(this._coordsTexture)return this._coordsTexture;let d=new Uint8Array(this._coordsTextureSize*this._coordsTextureSize*4);for(let T=0,C=0;T<this._coordsTextureSize;T++)for(let R=0;R<this._coordsTextureSize;R++,C+=4)d[C+0]=255&R,d[C+1]=255&T,d[C+2]=R>>8<<4|T>>8,d[C+3]=0;let v=new i.R({width:this._coordsTextureSize,height:this._coordsTextureSize},new Uint8Array(d.buffer)),x=new i.T(s,v,s.gl.RGBA,{premultiply:!1});return x.bind(s.gl.NEAREST,s.gl.CLAMP_TO_EDGE),this._coordsTexture=x,x}pointCoordinate(s){this.painter.maybeDrawDepthAndCoords(!0);let d=new Uint8Array(4),v=this.painter.context,x=v.gl,T=Math.round(s.x*this.painter.pixelRatio/devicePixelRatio),C=Math.round(s.y*this.painter.pixelRatio/devicePixelRatio),R=Math.round(this.painter.height/devicePixelRatio);v.bindFramebuffer.set(this.getFramebuffer("coords").framebuffer),x.readPixels(T,R-C-1,1,1,x.RGBA,x.UNSIGNED_BYTE,d),v.bindFramebuffer.set(null);let q=d[0]+(d[2]>>4<<8),B=d[1]+((15&d[2])<<8),H=this.coordsIndex[255-d[3]],Y=H&&this.sourceCache.getTileByID(H);if(!Y)return null;let $=this._coordsTextureSize,ee=(1<<Y.tileID.canonical.z)*$;return new i.a1((Y.tileID.canonical.x*$+q)/ee+Y.tileID.wrap,(Y.tileID.canonical.y*$+B)/ee,this.getElevation(Y.tileID,q,B,$))}depthAtPoint(s){let d=new Uint8Array(4),v=this.painter.context,x=v.gl;return v.bindFramebuffer.set(this.getFramebuffer("depth").framebuffer),x.readPixels(s.x,this.painter.height/devicePixelRatio-s.y-1,1,1,x.RGBA,x.UNSIGNED_BYTE,d),v.bindFramebuffer.set(null),(d[0]/16777216+d[1]/65536+d[2]/256+d[3])/256}getTerrainMesh(s){var d;let v=((d=this.painter.style.projection)===null||d===void 0?void 0:d.transitionState)>0,x=v&&s.canonical.y===0,T=v&&s.canonical.y===(1<<s.canonical.z)-1,C=`m_${x?"n":""}_${T?"s":""}`;if(this._meshCache[C])return this._meshCache[C];let R=this.painter.context,q=new i.cv,B=new i.aN,H=this.meshSize,Y=i.$/H,$=H*H;for(let Le=0;Le<=H;Le++)for(let Qe=0;Qe<=H;Qe++)q.emplaceBack(Qe*Y,Le*Y,0);for(let Le=0;Le<$;Le+=H+1)for(let Qe=0;Qe<H;Qe++)B.emplaceBack(Qe+Le,H+Qe+Le+1,H+Qe+Le+2),B.emplaceBack(Qe+Le,H+Qe+Le+2,Qe+Le+1);let ee=q.length,ie=ee+(H+1),ve=(H+1)*H,ge=x?i.bh:0,ye=x?0:1,Me=T?i.bi:i.$,Re=T?0:1;for(let Le=0;Le<=H;Le++)q.emplaceBack(Le*Y,ge,ye);for(let Le=0;Le<=H;Le++)q.emplaceBack(Le*Y,Me,Re);for(let Le=0;Le<H;Le++)B.emplaceBack(ve+Le,ie+Le,ie+Le+1),B.emplaceBack(ve+Le,ie+Le+1,ve+Le+1),B.emplaceBack(0+Le,ee+Le+1,ee+Le),B.emplaceBack(0+Le,0+Le+1,ee+Le+1);let Pe=q.length,ze=Pe+2*(H+1);for(let Le of[0,1])for(let Qe=0;Qe<=H;Qe++)for(let ht of[0,1])q.emplaceBack(Le*i.$,Qe*Y,ht);for(let Le=0;Le<2*H;Le+=2)B.emplaceBack(Pe+Le,Pe+Le+1,Pe+Le+3),B.emplaceBack(Pe+Le,Pe+Le+3,Pe+Le+2),B.emplaceBack(ze+Le,ze+Le+3,ze+Le+1),B.emplaceBack(ze+Le,ze+Le+2,ze+Le+3);let He=new Ai(R.createVertexBuffer(q,zx.members),R.createIndexBuffer(B),i.aM.simpleSegment(0,0,q.length,B.length));return this._meshCache[C]=He,He}getMeshFrameDelta(s){return 2*Math.PI*i.bu/Math.pow(2,Math.max(s,0))/5}getMinTileElevationForLngLatZoom(s,d){var v;let{tileID:x}=this._getOverscaledTileIDFromLngLatZoom(s,d);return(v=this.getMinMaxElevation(x).minElevation)!==null&&v!==void 0?v:0}getMinMaxElevation(s){let d=this.getTerrainData(s).tile,v={minElevation:null,maxElevation:null};return d&&d.dem&&(v.minElevation=d.dem.min*this.exaggeration,v.maxElevation=d.dem.max*this.exaggeration),v}_getOverscaledTileIDFromLngLatZoom(s,d){let v=i.a1.fromLngLat(s.wrap()),x=(1<<d)*i.$,T=v.x*x,C=v.y*x,R=Math.floor(T/i.$),q=Math.floor(C/i.$);return{tileID:new i.Z(d,0,d,R,q),mercatorX:T,mercatorY:C}}}class Fx{constructor(s,d,v){this._context=s,this._size=d,this._tileSize=v,this._objects=[],this._recentlyUsed=[],this._stamp=0}destruct(){for(let s of this._objects)s.texture.destroy(),s.fbo.destroy()}_createObject(s){let d=this._context.createFramebuffer(this._tileSize,this._tileSize,!0,!0),v=new i.T(this._context,{width:this._tileSize,height:this._tileSize,data:null},this._context.gl.RGBA);return v.bind(this._context.gl.LINEAR,this._context.gl.CLAMP_TO_EDGE),this._context.extTextureFilterAnisotropic&&this._context.gl.texParameterf(this._context.gl.TEXTURE_2D,this._context.extTextureFilterAnisotropic.TEXTURE_MAX_ANISOTROPY_EXT,this._context.extTextureFilterAnisotropicMax),d.depthAttachment.set(this._context.createRenderbuffer(this._context.gl.DEPTH_STENCIL,this._tileSize,this._tileSize)),d.colorAttachment.set(v.texture),{id:s,fbo:d,texture:v,stamp:-1,inUse:!1}}getObjectForId(s){return this._objects[s]}useObject(s){s.inUse=!0,this._recentlyUsed=this._recentlyUsed.filter(d=>s.id!==d),this._recentlyUsed.push(s.id)}stampObject(s){s.stamp=++this._stamp}getOrCreateFreeObject(){for(let d of this._recentlyUsed)if(!this._objects[d].inUse)return this._objects[d];if(this._objects.length>=this._size)throw new Error("No free RenderPool available, call freeAllObjects() required!");let s=this._createObject(this._objects.length);return this._objects.push(s),s}freeObject(s){s.inUse=!1}freeAllObjects(){for(let s of this._objects)this.freeObject(s)}isFull(){return!(this._objects.length<this._size)&&this._objects.some(s=>!s.inUse)===!1}}let gh={background:!0,fill:!0,line:!0,raster:!0,hillshade:!0,"color-relief":!0};class Ux{constructor(s,d){this.painter=s,this.terrain=d,this.pool=new Fx(s.context,30,d.sourceCache.tileSize*d.qualityFactor)}destruct(){this.pool.destruct()}getTexture(s){return this.pool.getObjectForId(s.rtt[this._stacks.length-1].id).texture}prepareForRender(s,d){this._stacks=[],this._prevType=null,this._rttTiles=[],this._renderableTiles=this.terrain.sourceCache.getRenderableTiles(),this._renderableLayerIds=s._order.filter(v=>!s._layers[v].isHidden(d)),this._coordsAscending={};for(let v in s.sourceCaches){this._coordsAscending[v]={};let x=s.sourceCaches[v].getVisibleCoordinates(),T=s.sourceCaches[v].getSource(),C=T instanceof sr?T.terrainTileRanges:null;for(let R of x){let q=this.terrain.sourceCache.getTerrainCoords(R,C);for(let B in q)this._coordsAscending[v][B]||(this._coordsAscending[v][B]=[]),this._coordsAscending[v][B].push(q[B])}}this._coordsAscendingStr={};for(let v of s._order){let x=s._layers[v],T=x.source;if(gh[x.type]&&!this._coordsAscendingStr[T]){this._coordsAscendingStr[T]={};for(let C in this._coordsAscending[T])this._coordsAscendingStr[T][C]=this._coordsAscending[T][C].map(R=>R.key).sort().join()}}for(let v of this._renderableTiles)for(let x in this._coordsAscendingStr){let T=this._coordsAscendingStr[x][v.tileID.key];T&&T!==v.rttCoords[x]&&(v.rtt=[])}}renderLayer(s,d){if(s.isHidden(this.painter.transform.zoom))return!1;let v=Object.assign(Object.assign({},d),{isRenderingToTexture:!0}),x=s.type,T=this.painter,C=this._renderableLayerIds[this._renderableLayerIds.length-1]===s.id;if(gh[x]&&(this._prevType&&gh[this._prevType]||this._stacks.push([]),this._prevType=x,this._stacks[this._stacks.length-1].push(s.id),!C))return!0;if(gh[this._prevType]||gh[x]&&C){this._prevType=x;let R=this._stacks.length-1,q=this._stacks[R]||[];for(let B of this._renderableTiles){if(this.pool.isFull()&&(Nx(this.painter,this.terrain,this._rttTiles,v),this._rttTiles=[],this.pool.freeAllObjects()),this._rttTiles.push(B),B.rtt[R]){let Y=this.pool.getObjectForId(B.rtt[R].id);if(Y.stamp===B.rtt[R].stamp){this.pool.useObject(Y);continue}}let H=this.pool.getOrCreateFreeObject();this.pool.useObject(H),this.pool.stampObject(H),B.rtt[R]={id:H.id,stamp:H.stamp},T.context.bindFramebuffer.set(H.fbo.framebuffer),T.context.clear({color:i.bf.transparent,stencil:0}),T.currentStencilSource=void 0;for(let Y=0;Y<q.length;Y++){let $=T.style._layers[q[Y]],ee=$.source?this._coordsAscending[$.source][B.tileID.key]:[B.tileID];T.context.viewport.set([0,0,H.fbo.width,H.fbo.height]),T._renderTileClippingMasks($,ee,!0),T.renderLayer(T,T.style.sourceCaches[$.source],$,ee,v),$.source&&(B.rttCoords[$.source]=this._coordsAscendingStr[$.source][B.tileID.key])}}return Nx(this.painter,this.terrain,this._rttTiles,v),this._rttTiles=[],this.pool.freeAllObjects(),gh[x]}return!1}}let ml={"AttributionControl.ToggleAttribution":"Toggle attribution","AttributionControl.MapFeedback":"Map feedback","FullscreenControl.Enter":"Enter fullscreen","FullscreenControl.Exit":"Exit fullscreen","GeolocateControl.FindMyLocation":"Find my location","GeolocateControl.LocationNotAvailable":"Location not available","LogoControl.Title":"MapLibre logo","Map.Title":"Map","Marker.Title":"Map marker","NavigationControl.ResetBearing":"Reset bearing to north","NavigationControl.ZoomIn":"Zoom in","NavigationControl.ZoomOut":"Zoom out","Popup.Close":"Close popup","ScaleControl.Feet":"ft","ScaleControl.Meters":"m","ScaleControl.Kilometers":"km","ScaleControl.Miles":"mi","ScaleControl.NauticalMiles":"nm","GlobeControl.Enable":"Enable globe","GlobeControl.Disable":"Disable globe","TerrainControl.Enable":"Enable terrain","TerrainControl.Disable":"Disable terrain","CooperativeGesturesHandler.WindowsHelpText":"Use Ctrl + scroll to zoom the map","CooperativeGesturesHandler.MacHelpText":"Use \u2318 + scroll to zoom the map","CooperativeGesturesHandler.MobileHelpText":"Use two fingers to move the map"},MN=a,sc={hash:!1,interactive:!0,bearingSnap:7,attributionControl:vI,maplibreLogo:!1,refreshExpiredTiles:!0,canvasContextAttributes:{antialias:!1,preserveDrawingBuffer:!1,powerPreference:"high-performance",failIfMajorPerformanceCaveat:!1,desynchronized:!1,contextType:void 0},scrollZoom:!0,minZoom:-2,maxZoom:22,minPitch:0,maxPitch:60,boxZoom:!0,dragRotate:!0,dragPan:!0,keyboard:!0,doubleClickZoom:!0,touchZoomRotate:!0,touchPitch:!0,cooperativeGestures:!1,trackResize:!0,center:[0,0],elevation:0,zoom:0,bearing:0,pitch:0,roll:0,renderWorldCopies:!0,maxTileCacheSize:null,maxTileCacheZoomLevels:i.a.MAX_TILE_CACHE_ZOOM_LEVELS,transformRequest:null,transformCameraUpdate:null,fadeDuration:300,crossSourceCollisions:!0,clickTolerance:3,localIdeographFontFamily:"sans-serif",pitchWithRotate:!0,rollEnabled:!1,validateStyle:!0,maxCanvasSize:[4096,4096],cancelPendingTileRequestsWhileZooming:!0,centerClampedToGround:!0},jB={showCompass:!0,showZoom:!0,visualizePitch:!1,visualizeRoll:!0};class q1{constructor(s,d,v=!1){this.mousedown=T=>{this.startMove(T,w.mousePos(this.element,T)),w.addEventListener(window,"mousemove",this.mousemove),w.addEventListener(window,"mouseup",this.mouseup)},this.mousemove=T=>{this.move(T,w.mousePos(this.element,T))},this.mouseup=T=>{this._rotatePitchHandler.dragEnd(T),this.offTemp()},this.touchstart=T=>{T.targetTouches.length!==1?this.reset():(this._startPos=this._lastPos=w.touchPos(this.element,T.targetTouches)[0],this.startMove(T,this._startPos),w.addEventListener(window,"touchmove",this.touchmove,{passive:!1}),w.addEventListener(window,"touchend",this.touchend))},this.touchmove=T=>{T.targetTouches.length!==1?this.reset():(this._lastPos=w.touchPos(this.element,T.targetTouches)[0],this.move(T,this._lastPos))},this.touchend=T=>{T.targetTouches.length===0&&this._startPos&&this._lastPos&&this._startPos.dist(this._lastPos)<this._clickTolerance&&this.element.click(),delete this._startPos,delete this._lastPos,this.offTemp()},this.reset=()=>{this._rotatePitchHandler.reset(),delete this._startPos,delete this._lastPos,this.offTemp()},this._clickTolerance=10,this.element=d;let x=new LB;this._rotatePitchHandler=new Dv({clickTolerance:3,move:(T,C)=>{let R=d.getBoundingClientRect(),q=new i.P((R.bottom-R.top)/2,(R.right-R.left)/2);return{bearingDelta:i.cn(new i.P(T.x,C.y),C,q),pitchDelta:v?-.5*(C.y-T.y):void 0}},moveStateManager:x,enable:!0,assignEvents:()=>{}}),this.map=s,w.addEventListener(d,"mousedown",this.mousedown),w.addEventListener(d,"touchstart",this.touchstart,{passive:!1}),w.addEventListener(d,"touchcancel",this.reset)}startMove(s,d){this._rotatePitchHandler.dragStart(s,d),w.disableDrag()}move(s,d){let v=this.map,{bearingDelta:x,pitchDelta:T}=this._rotatePitchHandler.dragMove(s,d)||{};x&&v.setBearing(v.getBearing()+x),T&&v.setPitch(v.getPitch()+T)}off(){let s=this.element;w.removeEventListener(s,"mousedown",this.mousedown),w.removeEventListener(s,"touchstart",this.touchstart,{passive:!1}),w.removeEventListener(window,"touchmove",this.touchmove,{passive:!1}),w.removeEventListener(window,"touchend",this.touchend),w.removeEventListener(s,"touchcancel",this.reset),this.offTemp()}offTemp(){w.enableDrag(),w.removeEventListener(window,"mousemove",this.mousemove),w.removeEventListener(window,"mouseup",this.mouseup),w.removeEventListener(window,"touchmove",this.touchmove,{passive:!1}),w.removeEventListener(window,"touchend",this.touchend)}}let Xo;function ca(S,s,d,v=!1){if(v||!d.getCoveringTilesDetailsProvider().allowWorldCopies())return S==null?void 0:S.wrap();let x=new i.S(S.lng,S.lat);if(S=new i.S(S.lng,S.lat),s){let T=new i.S(S.lng-360,S.lat),C=new i.S(S.lng+360,S.lat),R=d.locationToScreenPoint(S).distSqr(s);d.locationToScreenPoint(T).distSqr(s)<R?S=T:d.locationToScreenPoint(C).distSqr(s)<R&&(S=C)}for(;Math.abs(S.lng-d.center.lng)>180;){let T=d.locationToScreenPoint(S);if(T.x>=0&&T.y>=0&&T.x<=d.width&&T.y<=d.height)break;S.lng>d.center.lng?S.lng-=360:S.lng+=360}return S.lng!==x.lng&&d.isPointOnMapSurface(d.locationToScreenPoint(S))?S:x}let Bx={center:"translate(-50%,-50%)",top:"translate(-50%,0)","top-left":"translate(0,0)","top-right":"translate(-100%,0)",bottom:"translate(-50%,-100%)","bottom-left":"translate(0,-100%)","bottom-right":"translate(-100%,-100%)",left:"translate(0,-50%)",right:"translate(-100%,-50%)"};function Rv(S,s,d){let v=S.classList;for(let x in Bx)v.remove(`maplibregl-${d}-anchor-${x}`);v.add(`maplibregl-${d}-anchor-${s}`)}class jv extends i.E{constructor(s){if(super(),this._onKeyPress=d=>{let v=d.code,x=d.charCode||d.keyCode;v!=="Space"&&v!=="Enter"&&x!==32&&x!==13||this.togglePopup()},this._onMapClick=d=>{let v=d.originalEvent.target,x=this._element;this._popup&&(v===x||x.contains(v))&&this.togglePopup()},this._update=d=>{if(!this._map)return;let v=this._map.loaded()&&!this._map.isMoving();((d==null?void 0:d.type)==="terrain"||(d==null?void 0:d.type)==="render"&&!v)&&this._map.once("render",this._update),this._lngLat=ca(this._lngLat,this._flatPos,this._map.transform),this._flatPos=this._pos=this._map.project(this._lngLat)._add(this._offset),this._map.terrain&&(this._flatPos=this._map.transform.locationToScreenPoint(this._lngLat)._add(this._offset));let x="";this._rotationAlignment==="viewport"||this._rotationAlignment==="auto"?x=`rotateZ(${this._rotation}deg)`:this._rotationAlignment==="map"&&(x=`rotateZ(${this._rotation-this._map.getBearing()}deg)`);let T="";this._pitchAlignment==="viewport"||this._pitchAlignment==="auto"?T="rotateX(0deg)":this._pitchAlignment==="map"&&(T=`rotateX(${this._map.getPitch()}deg)`),this._subpixelPositioning||d&&d.type!=="moveend"||(this._pos=this._pos.round()),w.setTransform(this._element,`${Bx[this._anchor]} translate(${this._pos.x}px, ${this._pos.y}px) ${T} ${x}`),y.frameAsync(new AbortController).then(()=>{this._updateOpacity(d&&d.type==="moveend")}).catch(()=>{})},this._onMove=d=>{if(!this._isDragging){let v=this._clickTolerance||this._map._clickTolerance;this._isDragging=d.point.dist(this._pointerdownPos)>=v}this._isDragging&&(this._pos=d.point.sub(this._positionDelta),this._lngLat=this._map.unproject(this._pos),this.setLngLat(this._lngLat),this._element.style.pointerEvents="none",this._state==="pending"&&(this._state="active",this.fire(new i.l("dragstart"))),this.fire(new i.l("drag")))},this._onUp=()=>{this._element.style.pointerEvents="auto",this._positionDelta=null,this._pointerdownPos=null,this._isDragging=!1,this._map.off("mousemove",this._onMove),this._map.off("touchmove",this._onMove),this._state==="active"&&this.fire(new i.l("dragend")),this._state="inactive"},this._addDragHandler=d=>{this._element.contains(d.originalEvent.target)&&(d.preventDefault(),this._positionDelta=d.point.sub(this._pos).add(this._offset),this._pointerdownPos=d.point,this._state="pending",this._map.on("mousemove",this._onMove),this._map.on("touchmove",this._onMove),this._map.once("mouseup",this._onUp),this._map.once("touchend",this._onUp))},this._anchor=s&&s.anchor||"center",this._color=s&&s.color||"#3FB1CE",this._scale=s&&s.scale||1,this._draggable=s&&s.draggable||!1,this._clickTolerance=s&&s.clickTolerance||0,this._subpixelPositioning=s&&s.subpixelPositioning||!1,this._isDragging=!1,this._state="inactive",this._rotation=s&&s.rotation||0,this._rotationAlignment=s&&s.rotationAlignment||"auto",this._pitchAlignment=s&&s.pitchAlignment&&s.pitchAlignment!=="auto"?s.pitchAlignment:this._rotationAlignment,this.setOpacity(s==null?void 0:s.opacity,s==null?void 0:s.opacityWhenCovered),s&&s.element)this._element=s.element,this._offset=i.P.convert(s&&s.offset||[0,0]);else{this._defaultMarker=!0,this._element=w.create("div");let d=w.createNS("http://www.w3.org/2000/svg","svg"),v=41,x=27;d.setAttributeNS(null,"display","block"),d.setAttributeNS(null,"height",`${v}px`),d.setAttributeNS(null,"width",`${x}px`),d.setAttributeNS(null,"viewBox",`0 0 ${x} ${v}`);let T=w.createNS("http://www.w3.org/2000/svg","g");T.setAttributeNS(null,"stroke","none"),T.setAttributeNS(null,"stroke-width","1"),T.setAttributeNS(null,"fill","none"),T.setAttributeNS(null,"fill-rule","evenodd");let C=w.createNS("http://www.w3.org/2000/svg","g");C.setAttributeNS(null,"fill-rule","nonzero");let R=w.createNS("http://www.w3.org/2000/svg","g");R.setAttributeNS(null,"transform","translate(3.0, 29.0)"),R.setAttributeNS(null,"fill","#000000");let q=[{rx:"10.5",ry:"5.25002273"},{rx:"10.5",ry:"5.25002273"},{rx:"9.5",ry:"4.77275007"},{rx:"8.5",ry:"4.29549936"},{rx:"7.5",ry:"3.81822308"},{rx:"6.5",ry:"3.34094679"},{rx:"5.5",ry:"2.86367051"},{rx:"4.5",ry:"2.38636864"}];for(let ye of q){let Me=w.createNS("http://www.w3.org/2000/svg","ellipse");Me.setAttributeNS(null,"opacity","0.04"),Me.setAttributeNS(null,"cx","10.5"),Me.setAttributeNS(null,"cy","5.80029008"),Me.setAttributeNS(null,"rx",ye.rx),Me.setAttributeNS(null,"ry",ye.ry),R.appendChild(Me)}let B=w.createNS("http://www.w3.org/2000/svg","g");B.setAttributeNS(null,"fill",this._color);let H=w.createNS("http://www.w3.org/2000/svg","path");H.setAttributeNS(null,"d","M27,13.5 C27,19.074644 20.250001,27.000002 14.75,34.500002 C14.016665,35.500004 12.983335,35.500004 12.25,34.500002 C6.7499993,27.000002 0,19.222562 0,13.5 C0,6.0441559 6.0441559,0 13.5,0 C20.955844,0 27,6.0441559 27,13.5 Z"),B.appendChild(H);let Y=w.createNS("http://www.w3.org/2000/svg","g");Y.setAttributeNS(null,"opacity","0.25"),Y.setAttributeNS(null,"fill","#000000");let $=w.createNS("http://www.w3.org/2000/svg","path");$.setAttributeNS(null,"d","M13.5,0 C6.0441559,0 0,6.0441559 0,13.5 C0,19.222562 6.7499993,27 12.25,34.5 C13,35.522727 14.016664,35.500004 14.75,34.5 C20.250001,27 27,19.074644 27,13.5 C27,6.0441559 20.955844,0 13.5,0 Z M13.5,1 C20.415404,1 26,6.584596 26,13.5 C26,15.898657 24.495584,19.181431 22.220703,22.738281 C19.945823,26.295132 16.705119,30.142167 13.943359,33.908203 C13.743445,34.180814 13.612715,34.322738 13.5,34.441406 C13.387285,34.322738 13.256555,34.180814 13.056641,33.908203 C10.284481,30.127985 7.4148684,26.314159 5.015625,22.773438 C2.6163816,19.232715 1,15.953538 1,13.5 C1,6.584596 6.584596,1 13.5,1 Z"),Y.appendChild($);let ee=w.createNS("http://www.w3.org/2000/svg","g");ee.setAttributeNS(null,"transform","translate(6.0, 7.0)"),ee.setAttributeNS(null,"fill","#FFFFFF");let ie=w.createNS("http://www.w3.org/2000/svg","g");ie.setAttributeNS(null,"transform","translate(8.0, 8.0)");let ve=w.createNS("http://www.w3.org/2000/svg","circle");ve.setAttributeNS(null,"fill","#000000"),ve.setAttributeNS(null,"opacity","0.25"),ve.setAttributeNS(null,"cx","5.5"),ve.setAttributeNS(null,"cy","5.5"),ve.setAttributeNS(null,"r","5.4999962");let ge=w.createNS("http://www.w3.org/2000/svg","circle");ge.setAttributeNS(null,"fill","#FFFFFF"),ge.setAttributeNS(null,"cx","5.5"),ge.setAttributeNS(null,"cy","5.5"),ge.setAttributeNS(null,"r","5.4999962"),ie.appendChild(ve),ie.appendChild(ge),C.appendChild(R),C.appendChild(B),C.appendChild(Y),C.appendChild(ee),C.appendChild(ie),d.appendChild(C),d.setAttributeNS(null,"height",v*this._scale+"px"),d.setAttributeNS(null,"width",x*this._scale+"px"),this._element.appendChild(d),this._offset=i.P.convert(s&&s.offset||[0,-14])}if(this._element.classList.add("maplibregl-marker"),this._element.addEventListener("dragstart",d=>{d.preventDefault()}),this._element.addEventListener("mousedown",d=>{d.preventDefault()}),Rv(this._element,this._anchor,"marker"),s&&s.className)for(let d of s.className.split(" "))this._element.classList.add(d);this._popup=null}addTo(s){return this.remove(),this._map=s,this._element.hasAttribute("aria-label")||this._element.setAttribute("aria-label",s._getUIString("Marker.Title")),s.getCanvasContainer().appendChild(this._element),s.on("move",this._update),s.on("moveend",this._update),s.on("terrain",this._update),s.on("projectiontransition",this._update),this.setDraggable(this._draggable),this._update(),this._map.on("click",this._onMapClick),this}remove(){return this._opacityTimeout&&(clearTimeout(this._opacityTimeout),delete this._opacityTimeout),this._map&&(this._map.off("click",this._onMapClick),this._map.off("move",this._update),this._map.off("moveend",this._update),this._map.off("terrain",this._update),this._map.off("projectiontransition",this._update),this._map.off("mousedown",this._addDragHandler),this._map.off("touchstart",this._addDragHandler),this._map.off("mouseup",this._onUp),this._map.off("touchend",this._onUp),this._map.off("mousemove",this._onMove),this._map.off("touchmove",this._onMove),delete this._map),w.remove(this._element),this._popup&&this._popup.remove(),this}getLngLat(){return this._lngLat}setLngLat(s){return this._lngLat=i.S.convert(s),this._pos=null,this._popup&&this._popup.setLngLat(this._lngLat),this._update(),this}getElement(){return this._element}setPopup(s){if(this._popup&&(this._popup.remove(),this._popup=null,this._element.removeEventListener("keypress",this._onKeyPress),this._originalTabIndex||this._element.removeAttribute("tabindex")),s){if(!("offset"in s.options)){let x=Math.abs(13.5)/Math.SQRT2;s.options.offset=this._defaultMarker?{top:[0,0],"top-left":[0,0],"top-right":[0,0],bottom:[0,-38.1],"bottom-left":[x,-1*(38.1-13.5+x)],"bottom-right":[-x,-1*(38.1-13.5+x)],left:[13.5,-1*(38.1-13.5)],right:[-13.5,-1*(38.1-13.5)]}:this._offset}this._popup=s,this._originalTabIndex=this._element.getAttribute("tabindex"),this._originalTabIndex||this._element.setAttribute("tabindex","0"),this._element.addEventListener("keypress",this._onKeyPress)}return this}setSubpixelPositioning(s){return this._subpixelPositioning=s,this}getPopup(){return this._popup}togglePopup(){let s=this._popup;return this._element.style.opacity===this._opacityWhenCovered?this:s?(s.isOpen()?s.remove():(s.setLngLat(this._lngLat),s.addTo(this._map)),this):this}_updateOpacity(s=!1){var d,v;let x=(d=this._map)===null||d===void 0?void 0:d.terrain,T=this._map.transform.isLocationOccluded(this._lngLat);if(!x||T){let ee=T?this._opacityWhenCovered:this._opacity;return void(this._element.style.opacity!==ee&&(this._element.style.opacity=ee))}if(s)this._opacityTimeout=null;else{if(this._opacityTimeout)return;this._opacityTimeout=setTimeout(()=>{this._opacityTimeout=null},100)}let C=this._map,R=C.terrain.depthAtPoint(this._pos),q=C.terrain.getElevationForLngLatZoom(this._lngLat,C.transform.tileZoom);if(C.transform.lngLatToCameraDepth(this._lngLat,q)-R<.006)return void(this._element.style.opacity=this._opacity);let B=-this._offset.y/C.transform.pixelsPerMeter,H=Math.sin(C.getPitch()*Math.PI/180)*B,Y=C.terrain.depthAtPoint(new i.P(this._pos.x,this._pos.y-this._offset.y)),$=C.transform.lngLatToCameraDepth(this._lngLat,q+H)-Y>.006;!((v=this._popup)===null||v===void 0)&&v.isOpen()&&$&&this._popup.remove(),this._element.style.opacity=$?this._opacityWhenCovered:this._opacity}getOffset(){return this._offset}setOffset(s){return this._offset=i.P.convert(s),this._update(),this}addClassName(s){this._element.classList.add(s)}removeClassName(s){this._element.classList.remove(s)}toggleClassName(s){return this._element.classList.toggle(s)}setDraggable(s){return this._draggable=!!s,this._map&&(s?(this._map.on("mousedown",this._addDragHandler),this._map.on("touchstart",this._addDragHandler)):(this._map.off("mousedown",this._addDragHandler),this._map.off("touchstart",this._addDragHandler))),this}isDraggable(){return this._draggable}setRotation(s){return this._rotation=s||0,this._update(),this}getRotation(){return this._rotation}setRotationAlignment(s){return this._rotationAlignment=s||"auto",this._update(),this}getRotationAlignment(){return this._rotationAlignment}setPitchAlignment(s){return this._pitchAlignment=s&&s!=="auto"?s:this._rotationAlignment,this._update(),this}getPitchAlignment(){return this._pitchAlignment}setOpacity(s,d){return(this._opacity===void 0||s===void 0&&d===void 0)&&(this._opacity="1",this._opacityWhenCovered="0.2"),s!==void 0&&(this._opacity=s),d!==void 0&&(this._opacityWhenCovered=d),this._map&&this._updateOpacity(!0),this}}let _I={positionOptions:{enableHighAccuracy:!1,maximumAge:0,timeout:6e3},fitBoundsOptions:{maxZoom:15},trackUserLocation:!1,showAccuracyCircle:!0,showUserLocation:!0},qv=0,eg=!1,z1={maxWidth:100,unit:"metric"};function Vx(S,s,d){let v=d&&d.maxWidth||100,x=S._container.clientHeight/2,T=S._container.clientWidth/2,C=S.unproject([T-v/2,x]),R=S.unproject([T+v/2,x]),q=Math.round(S.project(R).x-S.project(C).x),B=Math.min(v,q,S._container.clientWidth),H=C.distanceTo(R);if(d&&d.unit==="imperial"){let Y=3.2808*H;Y>5280?tg(s,B,Y/5280,S._getUIString("ScaleControl.Miles")):tg(s,B,Y,S._getUIString("ScaleControl.Feet"))}else d&&d.unit==="nautical"?tg(s,B,H/1852,S._getUIString("ScaleControl.NauticalMiles")):H>=1e3?tg(s,B,H/1e3,S._getUIString("ScaleControl.Kilometers")):tg(s,B,H,S._getUIString("ScaleControl.Meters"))}function tg(S,s,d,v){let x=function(T){let C=Math.pow(10,`${Math.floor(T)}`.length-1),R=T/C;return R=R>=10?10:R>=5?5:R>=3?3:R>=2?2:R>=1?1:function(q){let B=Math.pow(10,Math.ceil(-Math.log(q)/Math.LN10));return Math.round(q*B)/B}(R),C*R}(d);S.style.width=s*(x/d)+"px",S.innerHTML=`${x}&nbsp;${v}`}let bI={closeButton:!0,closeOnClick:!0,focusAfterOpen:!0,className:"",maxWidth:"240px",subpixelPositioning:!1,locationOccludedOpacity:void 0},xI=["a[href]","[tabindex]:not([tabindex='-1'])","[contenteditable]:not([contenteditable='false'])","button:not([disabled])","input:not([disabled])","select:not([disabled])","textarea:not([disabled])"].join(", ");function Gx(S){if(S){if(typeof S=="number"){let s=Math.round(Math.abs(S)/Math.SQRT2);return{center:new i.P(0,0),top:new i.P(0,S),"top-left":new i.P(s,s),"top-right":new i.P(-s,s),bottom:new i.P(0,-S),"bottom-left":new i.P(s,-s),"bottom-right":new i.P(-s,-s),left:new i.P(S,0),right:new i.P(-S,0)}}if(S instanceof i.P||Array.isArray(S)){let s=i.P.convert(S);return{center:s,top:s,"top-left":s,"top-right":s,bottom:s,"bottom-left":s,"bottom-right":s,left:s,right:s}}return{center:i.P.convert(S.center||[0,0]),top:i.P.convert(S.top||[0,0]),"top-left":i.P.convert(S["top-left"]||[0,0]),"top-right":i.P.convert(S["top-right"]||[0,0]),bottom:i.P.convert(S.bottom||[0,0]),"bottom-left":i.P.convert(S["bottom-left"]||[0,0]),"bottom-right":i.P.convert(S["bottom-right"]||[0,0]),left:i.P.convert(S.left||[0,0]),right:i.P.convert(S.right||[0,0])}}return Gx(new i.P(0,0))}let wI=a;o.AJAXError=i.cz,o.Event=i.l,o.Evented=i.E,o.LngLat=i.S,o.MercatorCoordinate=i.a1,o.Point=i.P,o.addProtocol=i.cA,o.config=i.a,o.removeProtocol=i.cB,o.AttributionControl=yI,o.BoxZoomHandler=cI,o.CanvasSource=Pr,o.CooperativeGesturesHandler=SN,o.DoubleClickZoomHandler=dI,o.DragPanHandler=wN,o.DragRotateHandler=mI,o.EdgeInsets=is,o.FullscreenControl=class extends i.E{constructor(S={}){super(),this._onFullscreenChange=()=>{var s;let d=window.document.fullscreenElement||window.document.mozFullScreenElement||window.document.webkitFullscreenElement||window.document.msFullscreenElement;for(;!((s=d==null?void 0:d.shadowRoot)===null||s===void 0)&&s.fullscreenElement;)d=d.shadowRoot.fullscreenElement;d===this._container!==this._fullscreen&&this._handleFullscreenChange()},this._onClickFullscreen=()=>{this._isFullscreen()?this._exitFullscreen():this._requestFullscreen()},this._fullscreen=!1,S&&S.container&&(S.container instanceof HTMLElement?this._container=S.container:i.w("Full screen control 'container' must be a DOM element.")),"onfullscreenchange"in document?this._fullscreenchange="fullscreenchange":"onmozfullscreenchange"in document?this._fullscreenchange="mozfullscreenchange":"onwebkitfullscreenchange"in document?this._fullscreenchange="webkitfullscreenchange":"onmsfullscreenchange"in document&&(this._fullscreenchange="MSFullscreenChange")}onAdd(S){return this._map=S,this._container||(this._container=this._map.getContainer()),this._controlContainer=w.create("div","maplibregl-ctrl maplibregl-ctrl-group"),this._setupUI(),this._controlContainer}onRemove(){w.remove(this._controlContainer),this._map=null,window.document.removeEventListener(this._fullscreenchange,this._onFullscreenChange)}_setupUI(){let S=this._fullscreenButton=w.create("button","maplibregl-ctrl-fullscreen",this._controlContainer);w.create("span","maplibregl-ctrl-icon",S).setAttribute("aria-hidden","true"),S.type="button",this._updateTitle(),this._fullscreenButton.addEventListener("click",this._onClickFullscreen),window.document.addEventListener(this._fullscreenchange,this._onFullscreenChange)}_updateTitle(){let S=this._getTitle();this._fullscreenButton.setAttribute("aria-label",S),this._fullscreenButton.title=S}_getTitle(){return this._map._getUIString(this._isFullscreen()?"FullscreenControl.Exit":"FullscreenControl.Enter")}_isFullscreen(){return this._fullscreen}_handleFullscreenChange(){this._fullscreen=!this._fullscreen,this._fullscreenButton.classList.toggle("maplibregl-ctrl-shrink"),this._fullscreenButton.classList.toggle("maplibregl-ctrl-fullscreen"),this._updateTitle(),this._fullscreen?(this.fire(new i.l("fullscreenstart")),this._prevCooperativeGesturesEnabled=this._map.cooperativeGestures.isEnabled(),this._map.cooperativeGestures.disable()):(this.fire(new i.l("fullscreenend")),this._prevCooperativeGesturesEnabled&&this._map.cooperativeGestures.enable())}_exitFullscreen(){window.document.exitFullscreen?window.document.exitFullscreen():window.document.mozCancelFullScreen?window.document.mozCancelFullScreen():window.document.msExitFullscreen?window.document.msExitFullscreen():window.document.webkitCancelFullScreen?window.document.webkitCancelFullScreen():this._togglePseudoFullScreen()}_requestFullscreen(){this._container.requestFullscreen?this._container.requestFullscreen():this._container.mozRequestFullScreen?this._container.mozRequestFullScreen():this._container.msRequestFullscreen?this._container.msRequestFullscreen():this._container.webkitRequestFullscreen?this._container.webkitRequestFullscreen():this._togglePseudoFullScreen()}_togglePseudoFullScreen(){this._container.classList.toggle("maplibregl-pseudo-fullscreen"),this._handleFullscreenChange(),this._map.resize()}},o.GeoJSONSource=Ut,o.GeolocateControl=class extends i.E{constructor(S){super(),this._onSuccess=s=>{if(this._map){if(this._isOutOfMapMaxBounds(s))return this._setErrorState(),this.fire(new i.l("outofmaxbounds",s)),this._updateMarker(),void this._finish();if(this.options.trackUserLocation)switch(this._lastKnownPosition=s,this._watchState){case"WAITING_ACTIVE":case"ACTIVE_LOCK":case"ACTIVE_ERROR":this._watchState="ACTIVE_LOCK",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active-error"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-active");break;case"BACKGROUND":case"BACKGROUND_ERROR":this._watchState="BACKGROUND",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-background-error"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-background");break;default:throw new Error(`Unexpected watchState ${this._watchState}`)}this.options.showUserLocation&&this._watchState!=="OFF"&&this._updateMarker(s),this.options.trackUserLocation&&this._watchState!=="ACTIVE_LOCK"||this._updateCamera(s),this.options.showUserLocation&&this._dotElement.classList.remove("maplibregl-user-location-dot-stale"),this.fire(new i.l("geolocate",s)),this._finish()}},this._updateCamera=s=>{let d=new i.S(s.coords.longitude,s.coords.latitude),v=s.coords.accuracy,x=this._map.getBearing(),T=i.e({bearing:x},this.options.fitBoundsOptions),C=Ot.fromLngLat(d,v);this._map.fitBounds(C,T,{geolocateSource:!0})},this._updateMarker=s=>{if(s){let d=new i.S(s.coords.longitude,s.coords.latitude);this._accuracyCircleMarker.setLngLat(d).addTo(this._map),this._userLocationDotMarker.setLngLat(d).addTo(this._map),this._accuracy=s.coords.accuracy,this._updateCircleRadiusIfNeeded()}else this._userLocationDotMarker.remove(),this._accuracyCircleMarker.remove()},this._onUpdate=()=>{this._updateCircleRadiusIfNeeded()},this._onError=s=>{if(this._map){if(s.code===1){this._watchState="OFF",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active-error"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-background"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-background-error"),this._geolocateButton.disabled=!0;let d=this._map._getUIString("GeolocateControl.LocationNotAvailable");this._geolocateButton.title=d,this._geolocateButton.setAttribute("aria-label",d),this._geolocationWatchID!==void 0&&this._clearWatch()}else{if(s.code===3&&eg)return;this.options.trackUserLocation&&this._setErrorState()}this._watchState!=="OFF"&&this.options.showUserLocation&&this._dotElement.classList.add("maplibregl-user-location-dot-stale"),this.fire(new i.l("error",s)),this._finish()}},this._finish=()=>{this._timeoutId&&clearTimeout(this._timeoutId),this._timeoutId=void 0},this._setupUI=()=>{this._map&&(this._container.addEventListener("contextmenu",s=>s.preventDefault()),this._geolocateButton=w.create("button","maplibregl-ctrl-geolocate",this._container),w.create("span","maplibregl-ctrl-icon",this._geolocateButton).setAttribute("aria-hidden","true"),this._geolocateButton.type="button",this._geolocateButton.disabled=!0)},this._finishSetupUI=s=>{if(this._map){if(s===!1){i.w("Geolocation support is not available so the GeolocateControl will be disabled.");let d=this._map._getUIString("GeolocateControl.LocationNotAvailable");this._geolocateButton.disabled=!0,this._geolocateButton.title=d,this._geolocateButton.setAttribute("aria-label",d)}else{let d=this._map._getUIString("GeolocateControl.FindMyLocation");this._geolocateButton.disabled=!1,this._geolocateButton.title=d,this._geolocateButton.setAttribute("aria-label",d)}this.options.trackUserLocation&&(this._geolocateButton.setAttribute("aria-pressed","false"),this._watchState="OFF"),this.options.showUserLocation&&(this._dotElement=w.create("div","maplibregl-user-location-dot"),this._userLocationDotMarker=new jv({element:this._dotElement}),this._circleElement=w.create("div","maplibregl-user-location-accuracy-circle"),this._accuracyCircleMarker=new jv({element:this._circleElement,pitchAlignment:"map"}),this.options.trackUserLocation&&(this._watchState="OFF"),this._map.on("zoom",this._onUpdate),this._map.on("move",this._onUpdate),this._map.on("rotate",this._onUpdate),this._map.on("pitch",this._onUpdate)),this._geolocateButton.addEventListener("click",()=>this.trigger()),this._setup=!0,this.options.trackUserLocation&&this._map.on("movestart",d=>{let v=(d==null?void 0:d[0])instanceof ResizeObserverEntry;d.geolocateSource||this._watchState!=="ACTIVE_LOCK"||v||this._map.isZooming()||(this._watchState="BACKGROUND",this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-background"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active"),this.fire(new i.l("trackuserlocationend")),this.fire(new i.l("userlocationlostfocus")))})}},this.options=i.e({},_I,S)}onAdd(S){return this._map=S,this._container=w.create("div","maplibregl-ctrl maplibregl-ctrl-group"),this._setupUI(),function(){return i._(this,arguments,void 0,function*(s=!1){if(Xo!==void 0&&!s)return Xo;if(window.navigator.permissions===void 0)return Xo=!!window.navigator.geolocation,Xo;try{Xo=(yield window.navigator.permissions.query({name:"geolocation"})).state!=="denied"}catch(d){Xo=!!window.navigator.geolocation}return Xo})}().then(s=>this._finishSetupUI(s)),this._container}onRemove(){this._geolocationWatchID!==void 0&&(window.navigator.geolocation.clearWatch(this._geolocationWatchID),this._geolocationWatchID=void 0),this.options.showUserLocation&&this._userLocationDotMarker&&this._userLocationDotMarker.remove(),this.options.showAccuracyCircle&&this._accuracyCircleMarker&&this._accuracyCircleMarker.remove(),w.remove(this._container),this._map.off("zoom",this._onUpdate),this._map.off("move",this._onUpdate),this._map.off("rotate",this._onUpdate),this._map.off("pitch",this._onUpdate),this._map=void 0,qv=0,eg=!1}_isOutOfMapMaxBounds(S){let s=this._map.getMaxBounds(),d=S.coords;return s&&(d.longitude<s.getWest()||d.longitude>s.getEast()||d.latitude<s.getSouth()||d.latitude>s.getNorth())}_setErrorState(){switch(this._watchState){case"WAITING_ACTIVE":this._watchState="ACTIVE_ERROR",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-active-error");break;case"ACTIVE_LOCK":this._watchState="ACTIVE_ERROR",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-active-error"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-waiting");break;case"BACKGROUND":this._watchState="BACKGROUND_ERROR",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-background"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-background-error"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-waiting");break;case"ACTIVE_ERROR":break;default:throw new Error(`Unexpected watchState ${this._watchState}`)}}_updateCircleRadiusIfNeeded(){let S=this._userLocationDotMarker.getLngLat();if(!(this.options.showUserLocation&&this.options.showAccuracyCircle&&this._accuracy&&S))return;let s=this._map.project(S),d=this._map.unproject([s.x+100,s.y]),v=S.distanceTo(d)/100,x=2*this._accuracy/v;this._circleElement.style.width=`${x.toFixed(2)}px`,this._circleElement.style.height=`${x.toFixed(2)}px`}trigger(){if(!this._setup)return i.w("Geolocate control triggered before added to a map"),!1;if(this.options.trackUserLocation){switch(this._watchState){case"OFF":this._watchState="WAITING_ACTIVE",this.fire(new i.l("trackuserlocationstart"));break;case"WAITING_ACTIVE":case"ACTIVE_LOCK":case"ACTIVE_ERROR":case"BACKGROUND_ERROR":qv--,eg=!1,this._watchState="OFF",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active-error"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-background"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-background-error"),this.fire(new i.l("trackuserlocationend"));break;case"BACKGROUND":this._watchState="ACTIVE_LOCK",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-background"),this._lastKnownPosition&&this._updateCamera(this._lastKnownPosition),this.fire(new i.l("trackuserlocationstart")),this.fire(new i.l("userlocationfocus"));break;default:throw new Error(`Unexpected watchState ${this._watchState}`)}switch(this._watchState){case"WAITING_ACTIVE":this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-waiting"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-active");break;case"ACTIVE_LOCK":this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-active");break;case"OFF":break;default:throw new Error(`Unexpected watchState ${this._watchState}`)}if(this._watchState==="OFF"&&this._geolocationWatchID!==void 0)this._clearWatch();else if(this._geolocationWatchID===void 0){let S;this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-waiting"),this._geolocateButton.setAttribute("aria-pressed","true"),qv++,qv>1?(S={maximumAge:6e5,timeout:0},eg=!0):(S=this.options.positionOptions,eg=!1),this._geolocationWatchID=window.navigator.geolocation.watchPosition(this._onSuccess,this._onError,S)}}else window.navigator.geolocation.getCurrentPosition(this._onSuccess,this._onError,this.options.positionOptions),this._timeoutId=setTimeout(this._finish,1e4);return!0}_clearWatch(){window.navigator.geolocation.clearWatch(this._geolocationWatchID),this._geolocationWatchID=void 0,this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-waiting"),this._geolocateButton.setAttribute("aria-pressed","false"),this.options.showUserLocation&&this._updateMarker(null)}},o.GlobeControl=class{constructor(){this._toggleProjection=()=>{var S;let s=(S=this._map.getProjection())===null||S===void 0?void 0:S.type;this._map.setProjection(s!=="mercator"&&s?{type:"mercator"}:{type:"globe"}),this._updateGlobeIcon()},this._updateGlobeIcon=()=>{var S;this._globeButton.classList.remove("maplibregl-ctrl-globe"),this._globeButton.classList.remove("maplibregl-ctrl-globe-enabled"),((S=this._map.getProjection())===null||S===void 0?void 0:S.type)==="globe"?(this._globeButton.classList.add("maplibregl-ctrl-globe-enabled"),this._globeButton.title=this._map._getUIString("GlobeControl.Disable")):(this._globeButton.classList.add("maplibregl-ctrl-globe"),this._globeButton.title=this._map._getUIString("GlobeControl.Enable"))}}onAdd(S){return this._map=S,this._container=w.create("div","maplibregl-ctrl maplibregl-ctrl-group"),this._globeButton=w.create("button","maplibregl-ctrl-globe",this._container),w.create("span","maplibregl-ctrl-icon",this._globeButton).setAttribute("aria-hidden","true"),this._globeButton.type="button",this._globeButton.addEventListener("click",this._toggleProjection),this._updateGlobeIcon(),this._map.on("styledata",this._updateGlobeIcon),this._container}onRemove(){w.remove(this._container),this._map.off("styledata",this._updateGlobeIcon),this._globeButton.removeEventListener("click",this._toggleProjection),this._map=void 0}},o.Hash=Lx,o.ImageSource=sr,o.KeyboardHandler=jx,o.LngLatBounds=Ot,o.LogoControl=IN,o.Map=class extends TN{constructor(S){var s,d;i.cw.mark(i.cx.create);let v=Object.assign(Object.assign(Object.assign({},sc),S),{canvasContextAttributes:Object.assign(Object.assign({},sc.canvasContextAttributes),S.canvasContextAttributes)});if(v.minZoom!=null&&v.maxZoom!=null&&v.minZoom>v.maxZoom)throw new Error("maxZoom must be greater than or equal to minZoom");if(v.minPitch!=null&&v.maxPitch!=null&&v.minPitch>v.maxPitch)throw new Error("maxPitch must be greater than or equal to minPitch");if(v.minPitch!=null&&v.minPitch<0)throw new Error("minPitch must be greater than or equal to 0");if(v.maxPitch!=null&&v.maxPitch>180)throw new Error("maxPitch must be less than or equal to 180");let x=new zo,T=new Gs;if(v.minZoom!==void 0&&x.setMinZoom(v.minZoom),v.maxZoom!==void 0&&x.setMaxZoom(v.maxZoom),v.minPitch!==void 0&&x.setMinPitch(v.minPitch),v.maxPitch!==void 0&&x.setMaxPitch(v.maxPitch),v.renderWorldCopies!==void 0&&x.setRenderWorldCopies(v.renderWorldCopies),super(x,T,{bearingSnap:v.bearingSnap}),this._idleTriggered=!1,this._crossFadingFactor=1,this._renderTaskQueue=new Fp,this._controls=[],this._mapId=i.a7(),this._contextLost=R=>{R.preventDefault(),this._frameRequest&&(this._frameRequest.abort(),this._frameRequest=null),this.fire(new i.l("webglcontextlost",{originalEvent:R}))},this._contextRestored=R=>{this._setupPainter(),this.resize(),this._update(),this.fire(new i.l("webglcontextrestored",{originalEvent:R}))},this._onMapScroll=R=>{if(R.target===this._container)return this._container.scrollTop=0,this._container.scrollLeft=0,!1},this._onWindowOnline=()=>{this._update()},this._interactive=v.interactive,this._maxTileCacheSize=v.maxTileCacheSize,this._maxTileCacheZoomLevels=v.maxTileCacheZoomLevels,this._canvasContextAttributes=Object.assign({},v.canvasContextAttributes),this._trackResize=v.trackResize===!0,this._bearingSnap=v.bearingSnap,this._centerClampedToGround=v.centerClampedToGround,this._refreshExpiredTiles=v.refreshExpiredTiles===!0,this._fadeDuration=v.fadeDuration,this._crossSourceCollisions=v.crossSourceCollisions===!0,this._collectResourceTiming=v.collectResourceTiming===!0,this._locale=Object.assign(Object.assign({},ml),v.locale),this._clickTolerance=v.clickTolerance,this._overridePixelRatio=v.pixelRatio,this._maxCanvasSize=v.maxCanvasSize,this.transformCameraUpdate=v.transformCameraUpdate,this.cancelPendingTileRequestsWhileZooming=v.cancelPendingTileRequestsWhileZooming===!0,this._imageQueueHandle=z.addThrottleControl(()=>this.isMoving()),this._requestManager=new V(v.transformRequest),typeof v.container=="string"){if(this._container=document.getElementById(v.container),!this._container)throw new Error(`Container '${v.container}' not found.`)}else{if(!(v.container instanceof HTMLElement))throw new Error("Invalid type: 'container' must be a String or HTMLElement.");this._container=v.container}if(v.maxBounds&&this.setMaxBounds(v.maxBounds),this._setupContainer(),this._setupPainter(),this.on("move",()=>this._update(!1)),this.on("moveend",()=>this._update(!1)),this.on("zoom",()=>this._update(!0)),this.on("terrain",()=>{this.painter.terrainFacilitator.dirty=!0,this._update(!0)}),this.once("idle",()=>{this._idleTriggered=!0}),typeof window!="undefined"){addEventListener("online",this._onWindowOnline,!1);let R=!1,q=Jm(B=>{this._trackResize&&!this._removed&&(this.resize(B),this.redraw())},50);this._resizeObserver=new ResizeObserver(B=>{R?q(B):R=!0}),this._resizeObserver.observe(this._container)}this.handlers=new gI(this,v),this._hash=v.hash&&new Lx(typeof v.hash=="string"&&v.hash||void 0).addTo(this),this._hash&&this._hash._onHashChange()||(this.jumpTo({center:v.center,elevation:v.elevation,zoom:v.zoom,bearing:v.bearing,pitch:v.pitch,roll:v.roll}),v.bounds&&(this.resize(),this.fitBounds(v.bounds,i.e({},v.fitBoundsOptions,{duration:0}))));let C=typeof v.style=="string"||((d=(s=v.style)===null||s===void 0?void 0:s.projection)===null||d===void 0?void 0:d.type)!=="globe";this.resize(null,C),this._localIdeographFontFamily=v.localIdeographFontFamily,this._validateStyle=v.validateStyle,v.style&&this.setStyle(v.style,{localIdeographFontFamily:v.localIdeographFontFamily}),v.attributionControl&&this.addControl(new yI(typeof v.attributionControl=="boolean"?void 0:v.attributionControl)),v.maplibreLogo&&this.addControl(new IN,v.logoPosition),this.on("style.load",()=>{if(C||this._resizeTransform(),this.transform.unmodified){let R=i.Q(this.style.stylesheet,["center","zoom","bearing","pitch","roll"]);this.jumpTo(R)}}),this.on("data",R=>{this._update(R.dataType==="style"),this.fire(new i.l(`${R.dataType}data`,R))}),this.on("dataloading",R=>{this.fire(new i.l(`${R.dataType}dataloading`,R))}),this.on("dataabort",R=>{this.fire(new i.l("sourcedataabort",R))})}_getMapId(){return this._mapId}setGlobalStateProperty(S,s){return this.style.setGlobalStateProperty(S,s),this._update(!0)}getGlobalState(){return this.style.getGlobalState()}addControl(S,s){if(s===void 0&&(s=S.getDefaultPosition?S.getDefaultPosition():"top-right"),!S||!S.onAdd)return this.fire(new i.k(new Error("Invalid argument to map.addControl(). Argument must be a control with onAdd and onRemove methods.")));let d=S.onAdd(this);this._controls.push(S);let v=this._controlPositions[s];return s.indexOf("bottom")!==-1?v.insertBefore(d,v.firstChild):v.appendChild(d),this}removeControl(S){if(!S||!S.onRemove)return this.fire(new i.k(new Error("Invalid argument to map.removeControl(). Argument must be a control with onAdd and onRemove methods.")));let s=this._controls.indexOf(S);return s>-1&&this._controls.splice(s,1),S.onRemove(this),this}hasControl(S){return this._controls.indexOf(S)>-1}coveringTiles(S){return Ae(this.transform,S)}calculateCameraOptionsFromTo(S,s,d,v){return v==null&&this.terrain&&(v=this.terrain.getElevationForLngLatZoom(d,this.transform.tileZoom)),super.calculateCameraOptionsFromTo(S,s,d,v)}resize(S,s=!0){let[d,v]=this._containerDimensions(),x=this._getClampedPixelRatio(d,v);if(this._resizeCanvas(d,v,x),this.painter.resize(d,v,x),this.painter.overLimit()){let C=this.painter.context.gl;this._maxCanvasSize=[C.drawingBufferWidth,C.drawingBufferHeight];let R=this._getClampedPixelRatio(d,v);this._resizeCanvas(d,v,R),this.painter.resize(d,v,R)}this._resizeTransform(s);let T=!this._moving;return T&&(this.stop(),this.fire(new i.l("movestart",S)).fire(new i.l("move",S))),this.fire(new i.l("resize",S)),T&&this.fire(new i.l("moveend",S)),this}_resizeTransform(S=!0){var s;let[d,v]=this._containerDimensions();this.transform.resize(d,v,S),(s=this._requestedCameraState)===null||s===void 0||s.resize(d,v,S)}_getClampedPixelRatio(S,s){let{0:d,1:v}=this._maxCanvasSize,x=this.getPixelRatio(),T=S*x,C=s*x;return Math.min(T>d?d/T:1,C>v?v/C:1)*x}getPixelRatio(){var S;return(S=this._overridePixelRatio)!==null&&S!==void 0?S:devicePixelRatio}setPixelRatio(S){this._overridePixelRatio=S,this.resize()}getBounds(){return this.transform.getBounds()}getMaxBounds(){return this.transform.getMaxBounds()}setMaxBounds(S){return this.transform.setMaxBounds(Ot.convert(S)),this._update()}setMinZoom(S){if((S=S==null?-2:S)>=-2&&S<=this.transform.maxZoom)return this.transform.setMinZoom(S),this._update(),this.getZoom()<S&&this.setZoom(S),this;throw new Error("minZoom must be between -2 and the current maxZoom, inclusive")}getMinZoom(){return this.transform.minZoom}setMaxZoom(S){if((S=S==null?22:S)>=this.transform.minZoom)return this.transform.setMaxZoom(S),this._update(),this.getZoom()>S&&this.setZoom(S),this;throw new Error("maxZoom must be greater than the current minZoom")}getMaxZoom(){return this.transform.maxZoom}setMinPitch(S){if((S=S==null?0:S)<0)throw new Error("minPitch must be greater than or equal to 0");if(S>=0&&S<=this.transform.maxPitch)return this.transform.setMinPitch(S),this._update(),this.getPitch()<S&&this.setPitch(S),this;throw new Error("minPitch must be between 0 and the current maxPitch, inclusive")}getMinPitch(){return this.transform.minPitch}setMaxPitch(S){if((S=S==null?60:S)>180)throw new Error("maxPitch must be less than or equal to 180");if(S>=this.transform.minPitch)return this.transform.setMaxPitch(S),this._update(),this.getPitch()>S&&this.setPitch(S),this;throw new Error("maxPitch must be greater than the current minPitch")}getMaxPitch(){return this.transform.maxPitch}getRenderWorldCopies(){return this.transform.renderWorldCopies}setRenderWorldCopies(S){return this.transform.setRenderWorldCopies(S),this._update()}project(S){return this.transform.locationToScreenPoint(i.S.convert(S),this.style&&this.terrain)}unproject(S){return this.transform.screenPointToLocation(i.P.convert(S),this.terrain)}isMoving(){var S;return this._moving||((S=this.handlers)===null||S===void 0?void 0:S.isMoving())}isZooming(){var S;return this._zooming||((S=this.handlers)===null||S===void 0?void 0:S.isZooming())}isRotating(){var S;return this._rotating||((S=this.handlers)===null||S===void 0?void 0:S.isRotating())}_createDelegatedListener(S,s,d){if(S==="mouseenter"||S==="mouseover"){let v=!1;return{layers:s,listener:d,delegates:{mousemove:T=>{let C=s.filter(q=>this.getLayer(q)),R=C.length!==0?this.queryRenderedFeatures(T.point,{layers:C}):[];R.length?v||(v=!0,d.call(this,new Xl(S,this,T.originalEvent,{features:R}))):v=!1},mouseout:()=>{v=!1}}}}if(S==="mouseleave"||S==="mouseout"){let v=!1;return{layers:s,listener:d,delegates:{mousemove:C=>{let R=s.filter(q=>this.getLayer(q));(R.length!==0?this.queryRenderedFeatures(C.point,{layers:R}):[]).length?v=!0:v&&(v=!1,d.call(this,new Xl(S,this,C.originalEvent)))},mouseout:C=>{v&&(v=!1,d.call(this,new Xl(S,this,C.originalEvent)))}}}}{let v=x=>{let T=s.filter(R=>this.getLayer(R)),C=T.length!==0?this.queryRenderedFeatures(x.point,{layers:T}):[];C.length&&(x.features=C,d.call(this,x),delete x.features)};return{layers:s,listener:d,delegates:{[S]:v}}}}_saveDelegatedListener(S,s){this._delegatedListeners=this._delegatedListeners||{},this._delegatedListeners[S]=this._delegatedListeners[S]||[],this._delegatedListeners[S].push(s)}_removeDelegatedListener(S,s,d){if(!this._delegatedListeners||!this._delegatedListeners[S])return;let v=this._delegatedListeners[S];for(let x=0;x<v.length;x++){let T=v[x];if(T.listener===d&&T.layers.length===s.length&&T.layers.every(C=>s.includes(C))){for(let C in T.delegates)this.off(C,T.delegates[C]);return void v.splice(x,1)}}}on(S,s,d){if(d===void 0)return super.on(S,s);let v=typeof s=="string"?[s]:s,x=this._createDelegatedListener(S,v,d);this._saveDelegatedListener(S,x);for(let T in x.delegates)this.on(T,x.delegates[T]);return{unsubscribe:()=>{this._removeDelegatedListener(S,v,d)}}}once(S,s,d){if(d===void 0)return super.once(S,s);let v=typeof s=="string"?[s]:s,x=this._createDelegatedListener(S,v,d);for(let T in x.delegates){let C=x.delegates[T];x.delegates[T]=(...R)=>{this._removeDelegatedListener(S,v,d),C(...R)}}this._saveDelegatedListener(S,x);for(let T in x.delegates)this.once(T,x.delegates[T]);return this}off(S,s,d){return d===void 0?super.off(S,s):(this._removeDelegatedListener(S,typeof s=="string"?[s]:s,d),this)}queryRenderedFeatures(S,s){if(!this.style)return[];let d,v=S instanceof i.P||Array.isArray(S),x=v?S:[[0,0],[this.transform.width,this.transform.height]];if(s=s||(v?{}:S)||{},x instanceof i.P||typeof x[0]=="number")d=[i.P.convert(x)];else{let T=i.P.convert(x[0]),C=i.P.convert(x[1]);d=[T,new i.P(C.x,T.y),C,new i.P(T.x,C.y),T]}return this.style.queryRenderedFeatures(d,s,this.transform)}querySourceFeatures(S,s){return this.style.querySourceFeatures(S,s)}setStyle(S,s){return(s=i.e({},{localIdeographFontFamily:this._localIdeographFontFamily,validate:this._validateStyle},s)).diff!==!1&&s.localIdeographFontFamily===this._localIdeographFontFamily&&this.style&&S?(this._diffStyle(S,s),this):(this._localIdeographFontFamily=s.localIdeographFontFamily,this._updateStyle(S,s))}setTransformRequest(S){return this._requestManager.setTransformRequest(S),this}_getUIString(S){let s=this._locale[S];if(s==null)throw new Error(`Missing UI string '${S}'`);return s}_updateStyle(S,s){var d,v;if(s.transformStyle&&this.style&&!this.style._loaded)return void this.style.once("style.load",()=>this._updateStyle(S,s));let x=this.style&&s.transformStyle?this.style.serialize():void 0;return this.style&&(this.style.setEventedParent(null),this.style._remove(!S)),S?(this.style=new z2(this,s||{}),this.style.setEventedParent(this,{style:this.style}),typeof S=="string"?this.style.loadURL(S,s,x):this.style.loadJSON(S,s,x),this):((v=(d=this.style)===null||d===void 0?void 0:d.projection)===null||v===void 0||v.destroy(),delete this.style,this)}_lazyInitEmptyStyle(){this.style||(this.style=new z2(this,{}),this.style.setEventedParent(this,{style:this.style}),this.style.loadEmpty())}_diffStyle(S,s){if(typeof S=="string"){let d=this._requestManager.transformRequest(S,"Style");i.j(d,new AbortController).then(v=>{this._updateDiff(v.data,s)}).catch(v=>{v&&this.fire(new i.k(v))})}else typeof S=="object"&&this._updateDiff(S,s)}_updateDiff(S,s){try{this.style.setState(S,s)&&this._update(!0)}catch(d){i.w(`Unable to perform style diff: ${d.message||d.error||d}.  Rebuilding the style from scratch.`),this._updateStyle(S,s)}}getStyle(){if(this.style)return this.style.serialize()}isStyleLoaded(){return this.style?this.style.loaded():i.w("There is no style added to the map.")}addSource(S,s){return this._lazyInitEmptyStyle(),this.style.addSource(S,s),this._update(!0)}isSourceLoaded(S){let s=this.style&&this.style.sourceCaches[S];if(s!==void 0)return s.loaded();this.fire(new i.k(new Error(`There is no source with ID '${S}'`)))}setTerrain(S){if(this.style._checkLoaded(),this._terrainDataCallback&&this.style.off("data",this._terrainDataCallback),S){let s=this.style.sourceCaches[S.source];if(!s)throw new Error(`cannot load terrain, because there exists no source with ID: ${S.source}`);this.terrain===null&&s.reload();for(let d in this.style._layers){let v=this.style._layers[d];v.type==="hillshade"&&v.source===S.source&&i.w("You are using the same source for a hillshade layer and for 3D terrain. Please consider using two separate sources to improve rendering quality."),v.type==="color-relief"&&v.source===S.source&&i.w("You are using the same source for a color-relief layer and for 3D terrain. Please consider using two separate sources to improve rendering quality.")}this.terrain=new Kr(this.painter,s,S),this.painter.renderToTexture=new Ux(this.painter,this.terrain),this.transform.setMinElevationForCurrentTile(this.terrain.getMinTileElevationForLngLatZoom(this.transform.center,this.transform.tileZoom)),this.transform.setElevation(this.terrain.getElevationForLngLatZoom(this.transform.center,this.transform.tileZoom)),this._terrainDataCallback=d=>{var v;d.dataType==="style"?this.terrain.sourceCache.freeRtt():d.dataType==="source"&&d.tile&&(d.sourceId!==S.source||this._elevationFreeze||(this.transform.setMinElevationForCurrentTile(this.terrain.getMinTileElevationForLngLatZoom(this.transform.center,this.transform.tileZoom)),this._centerClampedToGround&&this.transform.setElevation(this.terrain.getElevationForLngLatZoom(this.transform.center,this.transform.tileZoom))),((v=d.source)===null||v===void 0?void 0:v.type)==="image"?this.terrain.sourceCache.freeRtt():this.terrain.sourceCache.freeRtt(d.tile.tileID))},this.style.on("data",this._terrainDataCallback)}else this.terrain&&this.terrain.sourceCache.destruct(),this.terrain=null,this.painter.renderToTexture&&this.painter.renderToTexture.destruct(),this.painter.renderToTexture=null,this.transform.setMinElevationForCurrentTile(0),this._centerClampedToGround&&this.transform.setElevation(0);return this.fire(new i.l("terrain",{terrain:S})),this}getTerrain(){var S,s;return(s=(S=this.terrain)===null||S===void 0?void 0:S.options)!==null&&s!==void 0?s:null}areTilesLoaded(){let S=this.style&&this.style.sourceCaches;for(let s in S){let d=S[s]._tiles;for(let v in d){let x=d[v];if(x.state!=="loaded"&&x.state!=="errored")return!1}}return!0}removeSource(S){return this.style.removeSource(S),this._update(!0)}getSource(S){return this.style.getSource(S)}setSourceTileLodParams(S,s,d){if(d){let v=this.getSource(d);if(!v)throw new Error(`There is no source with ID "${d}", cannot set LOD parameters`);v.calculateTileZoom=Ee(Math.max(1,S),Math.max(1,s))}else for(let v in this.style.sourceCaches)this.style.sourceCaches[v].getSource().calculateTileZoom=Ee(Math.max(1,S),Math.max(1,s));return this._update(!0),this}refreshTiles(S,s){let d=this.style.sourceCaches[S];if(!d)throw new Error(`There is no source cache with ID "${S}", cannot refresh tile`);s===void 0?d.reload(!0):d.refreshTiles(s.map(v=>new i.a4(v.z,v.x,v.y)))}addImage(S,s,d={}){let{pixelRatio:v=1,sdf:x=!1,stretchX:T,stretchY:C,content:R,textFitWidth:q,textFitHeight:B}=d;if(this._lazyInitEmptyStyle(),!(s instanceof HTMLImageElement||i.b(s))){if(s.width===void 0||s.height===void 0)return this.fire(new i.k(new Error("Invalid arguments to map.addImage(). The second argument must be an `HTMLImageElement`, `ImageData`, `ImageBitmap`, or object with `width`, `height`, and `data` properties with the same format as `ImageData`")));{let{width:H,height:Y,data:$}=s,ee=s;return this.style.addImage(S,{data:new i.R({width:H,height:Y},new Uint8Array($)),pixelRatio:v,stretchX:T,stretchY:C,content:R,textFitWidth:q,textFitHeight:B,sdf:x,version:0,userImage:ee}),ee.onAdd&&ee.onAdd(this,S),this}}{let{width:H,height:Y,data:$}=y.getImageData(s);this.style.addImage(S,{data:new i.R({width:H,height:Y},$),pixelRatio:v,stretchX:T,stretchY:C,content:R,textFitWidth:q,textFitHeight:B,sdf:x,version:0})}}updateImage(S,s){let d=this.style.getImage(S);if(!d)return this.fire(new i.k(new Error("The map has no image with that id. If you are adding a new image use `map.addImage(...)` instead.")));let v=s instanceof HTMLImageElement||i.b(s)?y.getImageData(s):s,{width:x,height:T,data:C}=v;if(x===void 0||T===void 0)return this.fire(new i.k(new Error("Invalid arguments to map.updateImage(). The second argument must be an `HTMLImageElement`, `ImageData`, `ImageBitmap`, or object with `width`, `height`, and `data` properties with the same format as `ImageData`")));if(x!==d.data.width||T!==d.data.height)return this.fire(new i.k(new Error("The width and height of the updated image must be that same as the previous version of the image")));let R=!(s instanceof HTMLImageElement||i.b(s));return d.data.replace(C,R),this.style.updateImage(S,d),this}getImage(S){return this.style.getImage(S)}hasImage(S){return S?!!this.style.getImage(S):(this.fire(new i.k(new Error("Missing required image id"))),!1)}removeImage(S){this.style.removeImage(S)}loadImage(S){return z.getImage(this._requestManager.transformRequest(S,"Image"),new AbortController)}listImages(){return this.style.listImages()}addLayer(S,s){return this._lazyInitEmptyStyle(),this.style.addLayer(S,s),this._update(!0)}moveLayer(S,s){return this.style.moveLayer(S,s),this._update(!0)}removeLayer(S){return this.style.removeLayer(S),this._update(!0)}getLayer(S){return this.style.getLayer(S)}getLayersOrder(){return this.style.getLayersOrder()}setLayerZoomRange(S,s,d){return this.style.setLayerZoomRange(S,s,d),this._update(!0)}setFilter(S,s,d={}){return this.style.setFilter(S,s,d),this._update(!0)}getFilter(S){return this.style.getFilter(S)}setPaintProperty(S,s,d,v={}){return this.style.setPaintProperty(S,s,d,v),this._update(!0)}getPaintProperty(S,s){return this.style.getPaintProperty(S,s)}setLayoutProperty(S,s,d,v={}){return this.style.setLayoutProperty(S,s,d,v),this._update(!0)}getLayoutProperty(S,s){return this.style.getLayoutProperty(S,s)}setGlyphs(S,s={}){return this._lazyInitEmptyStyle(),this.style.setGlyphs(S,s),this._update(!0)}getGlyphs(){return this.style.getGlyphsUrl()}addSprite(S,s,d={}){return this._lazyInitEmptyStyle(),this.style.addSprite(S,s,d,v=>{v||this._update(!0)}),this}removeSprite(S){return this._lazyInitEmptyStyle(),this.style.removeSprite(S),this._update(!0)}getSprite(){return this.style.getSprite()}setSprite(S,s={}){return this._lazyInitEmptyStyle(),this.style.setSprite(S,s,d=>{d||this._update(!0)}),this}setLight(S,s={}){return this._lazyInitEmptyStyle(),this.style.setLight(S,s),this._update(!0)}getLight(){return this.style.getLight()}setSky(S,s={}){return this._lazyInitEmptyStyle(),this.style.setSky(S,s),this._update(!0)}getSky(){return this.style.getSky()}setFeatureState(S,s){return this.style.setFeatureState(S,s),this._update()}removeFeatureState(S,s){return this.style.removeFeatureState(S,s),this._update()}getFeatureState(S){return this.style.getFeatureState(S)}getContainer(){return this._container}getCanvasContainer(){return this._canvasContainer}getCanvas(){return this._canvas}_containerDimensions(){let S=0,s=0;return this._container&&(S=this._container.clientWidth||400,s=this._container.clientHeight||300),[S,s]}_setupContainer(){let S=this._container;S.classList.add("maplibregl-map");let s=this._canvasContainer=w.create("div","maplibregl-canvas-container",S);this._interactive&&s.classList.add("maplibregl-interactive"),this._canvas=w.create("canvas","maplibregl-canvas",s),this._canvas.addEventListener("webglcontextlost",this._contextLost,!1),this._canvas.addEventListener("webglcontextrestored",this._contextRestored,!1),this._canvas.setAttribute("tabindex",this._interactive?"0":"-1"),this._canvas.setAttribute("aria-label",this._getUIString("Map.Title")),this._canvas.setAttribute("role","region");let d=this._containerDimensions(),v=this._getClampedPixelRatio(d[0],d[1]);this._resizeCanvas(d[0],d[1],v);let x=this._controlContainer=w.create("div","maplibregl-control-container",S),T=this._controlPositions={};["top-left","top-right","bottom-left","bottom-right"].forEach(C=>{T[C]=w.create("div",`maplibregl-ctrl-${C} `,x)}),this._container.addEventListener("scroll",this._onMapScroll,!1)}_resizeCanvas(S,s,d){this._canvas.width=Math.floor(d*S),this._canvas.height=Math.floor(d*s),this._canvas.style.width=`${S}px`,this._canvas.style.height=`${s}px`}_setupPainter(){let S=Object.assign(Object.assign({},this._canvasContextAttributes),{alpha:!0,depth:!0,stencil:!0,premultipliedAlpha:!0}),s=null;this._canvas.addEventListener("webglcontextcreationerror",v=>{s={requestedAttributes:S},v&&(s.statusMessage=v.statusMessage,s.type=v.type)},{once:!0});let d=null;if(d=this._canvasContextAttributes.contextType?this._canvas.getContext(this._canvasContextAttributes.contextType,S):this._canvas.getContext("webgl2",S)||this._canvas.getContext("webgl",S),!d){let v="Failed to initialize WebGL";throw s?(s.message=v,new Error(JSON.stringify(s))):new Error(v)}this.painter=new pN(d,this.transform),E.testSupport(d)}migrateProjection(S,s){super.migrateProjection(S,s),this.painter.transform=S,this.fire(new i.l("projectiontransition",{newProjection:this.style.projection.name}))}loaded(){return!this._styleDirty&&!this._sourcesDirty&&!!this.style&&this.style.loaded()}_update(S){return this.style&&this.style._loaded?(this._styleDirty=this._styleDirty||S,this._sourcesDirty=!0,this.triggerRepaint(),this):this}_requestRenderFrame(S){return this._update(),this._renderTaskQueue.add(S)}_cancelRenderFrame(S){this._renderTaskQueue.remove(S)}_render(S){var s,d,v,x,T;let C=this._idleTriggered?this._fadeDuration:0,R=((s=this.style.projection)===null||s===void 0?void 0:s.transitionState)>0;if(this.painter.context.setDirty(),this.painter.setBaseState(),this._renderTaskQueue.run(S),this._removed)return;let q=!1;if(this.style&&this._styleDirty){this._styleDirty=!1;let Y=this.transform.zoom,$=y.now();this.style.zoomHistory.update(Y,$);let ee=new i.F(Y,{now:$,fadeDuration:C,zoomHistory:this.style.zoomHistory,transition:this.style.getTransition(),globalState:this.style.getGlobalState()}),ie=ee.crossFadingFactor();ie===1&&ie===this._crossFadingFactor||(q=!0,this._crossFadingFactor=ie),this.style.update(ee)}let B=((d=this.style.projection)===null||d===void 0?void 0:d.transitionState)>0!==R;(v=this.style.projection)===null||v===void 0||v.setErrorQueryLatitudeDegrees(this.transform.center.lat),this.transform.setTransitionState((x=this.style.projection)===null||x===void 0?void 0:x.transitionState,(T=this.style.projection)===null||T===void 0?void 0:T.latitudeErrorCorrectionRadians),this.style&&(this._sourcesDirty||B)&&(this._sourcesDirty=!1,this.style._updateSources(this.transform)),this.terrain?(this.terrain.sourceCache.update(this.transform,this.terrain),this.transform.setMinElevationForCurrentTile(this.terrain.getMinTileElevationForLngLatZoom(this.transform.center,this.transform.tileZoom)),!this._elevationFreeze&&this._centerClampedToGround&&this.transform.setElevation(this.terrain.getElevationForLngLatZoom(this.transform.center,this.transform.tileZoom))):(this.transform.setMinElevationForCurrentTile(0),this._centerClampedToGround&&this.transform.setElevation(0)),this._placementDirty=this.style&&this.style._updatePlacement(this.transform,this.showCollisionBoxes,C,this._crossSourceCollisions,B),this.painter.render(this.style,{showTileBoundaries:this.showTileBoundaries,showOverdrawInspector:this._showOverdrawInspector,rotating:this.isRotating(),zooming:this.isZooming(),moving:this.isMoving(),fadeDuration:C,showPadding:this.showPadding}),this.fire(new i.l("render")),this.loaded()&&!this._loaded&&(this._loaded=!0,i.cw.mark(i.cx.load),this.fire(new i.l("load"))),this.style&&(this.style.hasTransitions()||q)&&(this._styleDirty=!0),this.style&&!this._placementDirty&&this.style._releaseSymbolFadeTiles();let H=this._sourcesDirty||this._styleDirty||this._placementDirty;return H||this._repaint?this.triggerRepaint():!this.isMoving()&&this.loaded()&&this.fire(new i.l("idle")),!this._loaded||this._fullyLoaded||H||(this._fullyLoaded=!0,i.cw.mark(i.cx.fullLoad)),this}redraw(){return this.style&&(this._frameRequest&&(this._frameRequest.abort(),this._frameRequest=null),this._render(0)),this}remove(){var S;this._hash&&this._hash.remove();for(let d of this._controls)d.onRemove(this);this._controls=[],this._frameRequest&&(this._frameRequest.abort(),this._frameRequest=null),this._renderTaskQueue.clear(),this.painter.destroy(),this.handlers.destroy(),delete this.handlers,this.setStyle(null),typeof window!="undefined"&&removeEventListener("online",this._onWindowOnline,!1),z.removeThrottleControl(this._imageQueueHandle),(S=this._resizeObserver)===null||S===void 0||S.disconnect();let s=this.painter.context.gl.getExtension("WEBGL_lose_context");s!=null&&s.loseContext&&s.loseContext(),this._canvas.removeEventListener("webglcontextrestored",this._contextRestored,!1),this._canvas.removeEventListener("webglcontextlost",this._contextLost,!1),w.remove(this._canvasContainer),w.remove(this._controlContainer),this._container.removeEventListener("scroll",this._onMapScroll,!1),this._container.classList.remove("maplibregl-map"),i.cw.clearMetrics(),this._removed=!0,this.fire(new i.l("remove"))}triggerRepaint(){this.style&&!this._frameRequest&&(this._frameRequest=new AbortController,y.frame(this._frameRequest,S=>{i.cw.frame(S),this._frameRequest=null;try{this._render(S)}catch(s){if(!i.cy(s)&&!function(d){return d.message===C1}(s))throw s}},()=>{}))}get showTileBoundaries(){return!!this._showTileBoundaries}set showTileBoundaries(S){this._showTileBoundaries!==S&&(this._showTileBoundaries=S,this._update())}get showPadding(){return!!this._showPadding}set showPadding(S){this._showPadding!==S&&(this._showPadding=S,this._update())}get showCollisionBoxes(){return!!this._showCollisionBoxes}set showCollisionBoxes(S){this._showCollisionBoxes!==S&&(this._showCollisionBoxes=S,S?this.style._generateCollisionBoxes():this._update())}get showOverdrawInspector(){return!!this._showOverdrawInspector}set showOverdrawInspector(S){this._showOverdrawInspector!==S&&(this._showOverdrawInspector=S,this._update())}get repaint(){return!!this._repaint}set repaint(S){this._repaint!==S&&(this._repaint=S,this.triggerRepaint())}get vertices(){return!!this._vertices}set vertices(S){this._vertices=S,this._update()}get version(){return MN}getCameraTargetElevation(){return this.transform.elevation}getProjection(){return this.style.getProjection()}setProjection(S){return this._lazyInitEmptyStyle(),this.style.setProjection(S),this._update(!0)}},o.MapMouseEvent=Xl,o.MapTouchEvent=Av,o.MapWheelEvent=uI,o.Marker=jv,o.NavigationControl=class{constructor(S){this._updateZoomButtons=()=>{let s=this._map.getZoom(),d=s===this._map.getMaxZoom(),v=s===this._map.getMinZoom();this._zoomInButton.disabled=d,this._zoomOutButton.disabled=v,this._zoomInButton.setAttribute("aria-disabled",d.toString()),this._zoomOutButton.setAttribute("aria-disabled",v.toString())},this._rotateCompassArrow=()=>{this._compassIcon.style.transform=this.options.visualizePitch&&this.options.visualizeRoll?`scale(${1/Math.pow(Math.cos(this._map.transform.pitchInRadians),.5)}) rotateZ(${-this._map.transform.roll}deg) rotateX(${this._map.transform.pitch}deg) rotateZ(${-this._map.transform.bearing}deg)`:this.options.visualizePitch?`scale(${1/Math.pow(Math.cos(this._map.transform.pitchInRadians),.5)}) rotateX(${this._map.transform.pitch}deg) rotateZ(${-this._map.transform.bearing}deg)`:this.options.visualizeRoll?`rotate(${-this._map.transform.bearing-this._map.transform.roll}deg)`:`rotate(${-this._map.transform.bearing}deg)`},this._setButtonTitle=(s,d)=>{let v=this._map._getUIString(`NavigationControl.${d}`);s.title=v,s.setAttribute("aria-label",v)},this.options=i.e({},jB,S),this._container=w.create("div","maplibregl-ctrl maplibregl-ctrl-group"),this._container.addEventListener("contextmenu",s=>s.preventDefault()),this.options.showZoom&&(this._zoomInButton=this._createButton("maplibregl-ctrl-zoom-in",s=>this._map.zoomIn({},{originalEvent:s})),w.create("span","maplibregl-ctrl-icon",this._zoomInButton).setAttribute("aria-hidden","true"),this._zoomOutButton=this._createButton("maplibregl-ctrl-zoom-out",s=>this._map.zoomOut({},{originalEvent:s})),w.create("span","maplibregl-ctrl-icon",this._zoomOutButton).setAttribute("aria-hidden","true")),this.options.showCompass&&(this._compass=this._createButton("maplibregl-ctrl-compass",s=>{this.options.visualizePitch?this._map.resetNorthPitch({},{originalEvent:s}):this._map.resetNorth({},{originalEvent:s})}),this._compassIcon=w.create("span","maplibregl-ctrl-icon",this._compass),this._compassIcon.setAttribute("aria-hidden","true"))}onAdd(S){return this._map=S,this.options.showZoom&&(this._setButtonTitle(this._zoomInButton,"ZoomIn"),this._setButtonTitle(this._zoomOutButton,"ZoomOut"),this._map.on("zoom",this._updateZoomButtons),this._updateZoomButtons()),this.options.showCompass&&(this._setButtonTitle(this._compass,"ResetBearing"),this.options.visualizePitch&&this._map.on("pitch",this._rotateCompassArrow),this.options.visualizeRoll&&this._map.on("roll",this._rotateCompassArrow),this._map.on("rotate",this._rotateCompassArrow),this._rotateCompassArrow(),this._handler=new q1(this._map,this._compass,this.options.visualizePitch)),this._container}onRemove(){w.remove(this._container),this.options.showZoom&&this._map.off("zoom",this._updateZoomButtons),this.options.showCompass&&(this.options.visualizePitch&&this._map.off("pitch",this._rotateCompassArrow),this.options.visualizeRoll&&this._map.off("roll",this._rotateCompassArrow),this._map.off("rotate",this._rotateCompassArrow),this._handler.off(),delete this._handler),delete this._map}_createButton(S,s){let d=w.create("button",S,this._container);return d.type="button",d.addEventListener("click",s),d}},o.Popup=class extends i.E{constructor(S){super(),this._updateOpacity=()=>{this.options.locationOccludedOpacity!==void 0&&(this._container.style.opacity=this._map.transform.isLocationOccluded(this.getLngLat())?`${this.options.locationOccludedOpacity}`:"")},this.remove=()=>(this._content&&w.remove(this._content),this._container&&(w.remove(this._container),delete this._container),this._map&&(this._map.off("move",this._update),this._map.off("move",this._onClose),this._map.off("click",this._onClose),this._map.off("remove",this.remove),this._map.off("mousemove",this._onMouseMove),this._map.off("mouseup",this._onMouseUp),this._map.off("drag",this._onDrag),this._map._canvasContainer.classList.remove("maplibregl-track-pointer"),delete this._map,this.fire(new i.l("close"))),this),this._onMouseUp=s=>{this._update(s.point)},this._onMouseMove=s=>{this._update(s.point)},this._onDrag=s=>{this._update(s.point)},this._update=s=>{if(!this._map||!this._lngLat&&!this._trackPointer||!this._content)return;if(!this._container){if(this._container=w.create("div","maplibregl-popup",this._map.getContainer()),this._tip=w.create("div","maplibregl-popup-tip",this._container),this._container.appendChild(this._content),this.options.className)for(let C of this.options.className.split(" "))this._container.classList.add(C);this._closeButton&&this._closeButton.setAttribute("aria-label",this._map._getUIString("Popup.Close")),this._trackPointer&&this._container.classList.add("maplibregl-popup-track-pointer")}if(this.options.maxWidth&&this._container.style.maxWidth!==this.options.maxWidth&&(this._container.style.maxWidth=this.options.maxWidth),this._lngLat=ca(this._lngLat,this._flatPos,this._map.transform,this._trackPointer),this._trackPointer&&!s)return;let d=this._flatPos=this._pos=this._trackPointer&&s?s:this._map.project(this._lngLat);this._map.terrain&&(this._flatPos=this._trackPointer&&s?s:this._map.transform.locationToScreenPoint(this._lngLat));let v=this.options.anchor,x=Gx(this.options.offset);if(!v){let C=this._container.offsetWidth,R=this._container.offsetHeight,q;q=d.y+x.bottom.y<R?["top"]:d.y>this._map.transform.height-R?["bottom"]:[],d.x<C/2?q.push("left"):d.x>this._map.transform.width-C/2&&q.push("right"),v=q.length===0?"bottom":q.join("-")}let T=d.add(x[v]);this.options.subpixelPositioning||(T=T.round()),w.setTransform(this._container,`${Bx[v]} translate(${T.x}px,${T.y}px)`),Rv(this._container,v,"popup"),this._updateOpacity()},this._onClose=()=>{this.remove()},this.options=i.e(Object.create(bI),S)}addTo(S){return this._map&&this.remove(),this._map=S,this.options.closeOnClick&&this._map.on("click",this._onClose),this.options.closeOnMove&&this._map.on("move",this._onClose),this._map.on("remove",this.remove),this._update(),this._focusFirstElement(),this._trackPointer?(this._map.on("mousemove",this._onMouseMove),this._map.on("mouseup",this._onMouseUp),this._container&&this._container.classList.add("maplibregl-popup-track-pointer"),this._map._canvasContainer.classList.add("maplibregl-track-pointer")):this._map.on("move",this._update),this.fire(new i.l("open")),this}isOpen(){return!!this._map}getLngLat(){return this._lngLat}setLngLat(S){return this._lngLat=i.S.convert(S),this._pos=null,this._flatPos=null,this._trackPointer=!1,this._update(),this._map&&(this._map.on("move",this._update),this._map.off("mousemove",this._onMouseMove),this._container&&this._container.classList.remove("maplibregl-popup-track-pointer"),this._map._canvasContainer.classList.remove("maplibregl-track-pointer")),this}trackPointer(){return this._trackPointer=!0,this._pos=null,this._flatPos=null,this._update(),this._map&&(this._map.off("move",this._update),this._map.on("mousemove",this._onMouseMove),this._map.on("drag",this._onDrag),this._container&&this._container.classList.add("maplibregl-popup-track-pointer"),this._map._canvasContainer.classList.add("maplibregl-track-pointer")),this}getElement(){return this._container}setText(S){return this.setDOMContent(document.createTextNode(S))}setHTML(S){let s=document.createDocumentFragment(),d=document.createElement("body"),v;for(d.innerHTML=S;v=d.firstChild,v;)s.appendChild(v);return this.setDOMContent(s)}getMaxWidth(){var S;return(S=this._container)===null||S===void 0?void 0:S.style.maxWidth}setMaxWidth(S){return this.options.maxWidth=S,this._update(),this}setDOMContent(S){if(this._content)for(;this._content.hasChildNodes();)this._content.firstChild&&this._content.removeChild(this._content.firstChild);else this._content=w.create("div","maplibregl-popup-content",this._container);return this._content.appendChild(S),this._createCloseButton(),this._update(),this._focusFirstElement(),this}addClassName(S){return this._container&&this._container.classList.add(S),this}removeClassName(S){return this._container&&this._container.classList.remove(S),this}setOffset(S){return this.options.offset=S,this._update(),this}toggleClassName(S){if(this._container)return this._container.classList.toggle(S)}setSubpixelPositioning(S){this.options.subpixelPositioning=S}_createCloseButton(){this.options.closeButton&&(this._closeButton=w.create("button","maplibregl-popup-close-button",this._content),this._closeButton.type="button",this._closeButton.innerHTML="&#215;",this._closeButton.addEventListener("click",this._onClose))}_focusFirstElement(){if(!this.options.focusAfterOpen||!this._container)return;let S=this._container.querySelector(xI);S&&S.focus()}},o.RasterDEMTileSource=qt,o.RasterTileSource=Yt,o.ScaleControl=class{constructor(S){this._onMove=()=>{Vx(this._map,this._container,this.options)},this.setUnit=s=>{this.options.unit=s,Vx(this._map,this._container,this.options)},this.options=Object.assign(Object.assign({},z1),S)}getDefaultPosition(){return"bottom-left"}onAdd(S){return this._map=S,this._container=w.create("div","maplibregl-ctrl maplibregl-ctrl-scale",S.getContainer()),this._map.on("move",this._onMove),this._onMove(),this._container}onRemove(){w.remove(this._container),this._map.off("move",this._onMove),this._map=void 0}},o.ScrollZoomHandler=bN,o.Style=z2,o.TerrainControl=class{constructor(S){this._toggleTerrain=()=>{this._map.getTerrain()?this._map.setTerrain(null):this._map.setTerrain(this.options),this._updateTerrainIcon()},this._updateTerrainIcon=()=>{this._terrainButton.classList.remove("maplibregl-ctrl-terrain"),this._terrainButton.classList.remove("maplibregl-ctrl-terrain-enabled"),this._map.terrain?(this._terrainButton.classList.add("maplibregl-ctrl-terrain-enabled"),this._terrainButton.title=this._map._getUIString("TerrainControl.Disable")):(this._terrainButton.classList.add("maplibregl-ctrl-terrain"),this._terrainButton.title=this._map._getUIString("TerrainControl.Enable"))},this.options=S}onAdd(S){return this._map=S,this._container=w.create("div","maplibregl-ctrl maplibregl-ctrl-group"),this._terrainButton=w.create("button","maplibregl-ctrl-terrain",this._container),w.create("span","maplibregl-ctrl-icon",this._terrainButton).setAttribute("aria-hidden","true"),this._terrainButton.type="button",this._terrainButton.addEventListener("click",this._toggleTerrain),this._updateTerrainIcon(),this._map.on("terrain",this._updateTerrainIcon),this._container}onRemove(){w.remove(this._container),this._map.off("terrain",this._updateTerrainIcon),this._map=void 0}},o.TwoFingersTouchPitchHandler=Rx,o.TwoFingersTouchRotateHandler=Lv,o.TwoFingersTouchZoomHandler=kx,o.TwoFingersTouchZoomRotateHandler=EN,o.VectorTileSource=Mt,o.VideoSource=jr,o.addSourceType=(S,s)=>i._(void 0,void 0,void 0,function*(){if(Dr(S))throw new Error(`A source type called "${S}" already exists.`);((d,v)=>{br[d]=v})(S,s)}),o.clearPrewarmedResources=function(){let S=Tt;S&&(S.isPreloaded()&&S.numActive()===1?(S.release(qe),Tt=null):console.warn("Could not clear WebWorkers since there are active Map instances that still reference it. The pre-warmed WebWorker pool can only be cleared when all map instances have been removed with map.remove()"))},o.createTileMesh=j2,o.getMaxParallelImageRequests=function(){return i.a.MAX_PARALLEL_IMAGE_REQUESTS},o.getRTLTextPluginStatus=function(){return Ft().getRTLTextPluginStatus()},o.getVersion=function(){return wI},o.getWorkerCount=function(){return lt.workerCount},o.getWorkerUrl=function(){return i.a.WORKER_URL},o.importScriptInWorkers=function(S){return We().broadcast("IS",S)},o.prewarm=function(){pt().acquire(qe)},o.setMaxParallelImageRequests=function(S){i.a.MAX_PARALLEL_IMAGE_REQUESTS=S},o.setRTLTextPlugin=function(S,s){return Ft().setRTLTextPlugin(S,s)},o.setWorkerCount=function(S){lt.workerCount=S},o.setWorkerUrl=function(S){i.a.WORKER_URL=S}});var n=e;return n})});var wGe=N((d3n,xGe)=>{u();var roe=1/0,nSr=17976931348623157e292,dGe=NaN,oSr="[object Symbol]",iSr=/^\s+|\s+$/g,aSr=/^[-+]0x[0-9a-f]+$/i,sSr=/^0b[01]+$/i,lSr=/^0o[0-7]+$/i,uSr=parseInt,cSr=typeof global=="object"&&global&&global.Object===Object&&global,pSr=typeof self=="object"&&self&&self.Object===Object&&self,fSr=cSr||pSr||Function("return this")(),dSr=Object.prototype,hSr=dSr.toString,hGe=fSr.Symbol,mSr=Math.min,mGe=hGe?hGe.prototype:void 0,gGe=mGe?mGe.toString:void 0;function gSr(e){if(typeof e=="string")return e;if(_Ge(e))return gGe?gGe.call(e):"";var t=e+"";return t=="0"&&1/e==-roe?"-0":t}function vSr(e){var t=Math[e];return function(r,n){if(r=bGe(r),n=mSr(bSr(n),292),n){var o=(yGe(r)+"e").split("e"),i=t(o[0]+"e"+(+o[1]+n));return o=(yGe(i)+"e").split("e"),+(o[0]+"e"+(+o[1]-n))}return t(r)}}function vGe(e){var t=typeof e;return!!e&&(t=="object"||t=="function")}function ySr(e){return!!e&&typeof e=="object"}function _Ge(e){return typeof e=="symbol"||ySr(e)&&hSr.call(e)==oSr}function _Sr(e){if(!e)return e===0?e:0;if(e=bGe(e),e===roe||e===-roe){var t=e<0?-1:1;return t*nSr}return e===e?e:0}function bSr(e){var t=_Sr(e),r=t%1;return t===t?r?t-r:t:0}function bGe(e){if(typeof e=="number")return e;if(_Ge(e))return dGe;if(vGe(e)){var t=typeof e.valueOf=="function"?e.valueOf():e;e=vGe(t)?t+"":t}if(typeof e!="string")return e===0?e:+e;e=e.replace(iSr,"");var r=sSr.test(e);return r||lSr.test(e)?uSr(e.slice(2),r?2:8):aSr.test(e)?dGe:+e}function yGe(e){return e==null?"":gSr(e)}var xSr=vSr("round");xGe.exports=xSr});var T$e=N((yWn,S$e)=>{"use strict";u();S$e.exports=e=>encodeURIComponent(e).replace(/[!'()*]/g,t=>`%${t.charCodeAt(0).toString(16).toUpperCase()}`)});var O$e=N((bWn,A$e)=>{"use strict";u();var C$e="%[a-f0-9]{2}",I$e=new RegExp("("+C$e+")|([^%]+?)","gi"),M$e=new RegExp("("+C$e+")+","gi");function Foe(e,t){try{return[decodeURIComponent(e.join(""))]}catch(o){}if(e.length===1)return e;t=t||1;var r=e.slice(0,t),n=e.slice(t);return Array.prototype.concat.call([],Foe(r),Foe(n))}function uIr(e){try{return decodeURIComponent(e)}catch(n){for(var t=e.match(I$e)||[],r=1;r<t.length;r++)e=Foe(t,r).join(""),t=e.match(I$e)||[];return e}}function cIr(e){for(var t={"%FE%FF":"\uFFFD\uFFFD","%FF%FE":"\uFFFD\uFFFD"},r=M$e.exec(e);r;){try{t[r[0]]=decodeURIComponent(r[0])}catch(c){var n=uIr(r[0]);n!==r[0]&&(t[r[0]]=n)}r=M$e.exec(e)}t["%C2"]="\uFFFD";for(var o=Object.keys(t),i=0;i<o.length;i++){var a=o[i];e=e.replace(new RegExp(a,"g"),t[a])}return e}A$e.exports=function(e){if(typeof e!="string")throw new TypeError("Expected `encodedURI` to be of type `string`, got `"+typeof e+"`");try{return e=e.replace(/\+/g," "),decodeURIComponent(e)}catch(t){return cIr(e)}}});var D$e=N((wWn,P$e)=>{"use strict";u();P$e.exports=(e,t)=>{if(!(typeof e=="string"&&typeof t=="string"))throw new TypeError("Expected the arguments to be of type `string`");if(t==="")return[e];let r=e.indexOf(t);return r===-1?[e]:[e.slice(0,r),e.slice(r+t.length)]}});var L$e=N((SWn,N$e)=>{"use strict";u();N$e.exports=function(e,t){for(var r={},n=Object.keys(e),o=Array.isArray(t),i=0;i<n.length;i++){var a=n[i],c=e[a];(o?t.indexOf(a)!==-1:t(a,c,e))&&(r[a]=c)}return r}});var sz=N(Ac=>{"use strict";u();var pIr=T$e(),fIr=O$e(),R$e=D$e(),dIr=L$e(),hIr=e=>e==null,Uoe=Symbol("encodeFragmentIdentifier");function mIr(e){switch(e.arrayFormat){case"index":return t=>(r,n)=>{let o=r.length;return n===void 0||e.skipNull&&n===null||e.skipEmptyString&&n===""?r:n===null?[...r,[Ka(t,e),"[",o,"]"].join("")]:[...r,[Ka(t,e),"[",Ka(o,e),"]=",Ka(n,e)].join("")]};case"bracket":return t=>(r,n)=>n===void 0||e.skipNull&&n===null||e.skipEmptyString&&n===""?r:n===null?[...r,[Ka(t,e),"[]"].join("")]:[...r,[Ka(t,e),"[]=",Ka(n,e)].join("")];case"colon-list-separator":return t=>(r,n)=>n===void 0||e.skipNull&&n===null||e.skipEmptyString&&n===""?r:n===null?[...r,[Ka(t,e),":list="].join("")]:[...r,[Ka(t,e),":list=",Ka(n,e)].join("")];case"comma":case"separator":case"bracket-separator":{let t=e.arrayFormat==="bracket-separator"?"[]=":"=";return r=>(n,o)=>o===void 0||e.skipNull&&o===null||e.skipEmptyString&&o===""?n:(o=o===null?"":o,n.length===0?[[Ka(r,e),t,Ka(o,e)].join("")]:[[n,Ka(o,e)].join(e.arrayFormatSeparator)])}default:return t=>(r,n)=>n===void 0||e.skipNull&&n===null||e.skipEmptyString&&n===""?r:n===null?[...r,Ka(t,e)]:[...r,[Ka(t,e),"=",Ka(n,e)].join("")]}}function gIr(e){let t;switch(e.arrayFormat){case"index":return(r,n,o)=>{if(t=/\[(\d*)\]$/.exec(r),r=r.replace(/\[\d*\]$/,""),!t){o[r]=n;return}o[r]===void 0&&(o[r]={}),o[r][t[1]]=n};case"bracket":return(r,n,o)=>{if(t=/(\[\])$/.exec(r),r=r.replace(/\[\]$/,""),!t){o[r]=n;return}if(o[r]===void 0){o[r]=[n];return}o[r]=[].concat(o[r],n)};case"colon-list-separator":return(r,n,o)=>{if(t=/(:list)$/.exec(r),r=r.replace(/:list$/,""),!t){o[r]=n;return}if(o[r]===void 0){o[r]=[n];return}o[r]=[].concat(o[r],n)};case"comma":case"separator":return(r,n,o)=>{let i=typeof n=="string"&&n.includes(e.arrayFormatSeparator),a=typeof n=="string"&&!i&&Ug(n,e).includes(e.arrayFormatSeparator);n=a?Ug(n,e):n;let c=i||a?n.split(e.arrayFormatSeparator).map(h=>Ug(h,e)):n===null?n:Ug(n,e);o[r]=c};case"bracket-separator":return(r,n,o)=>{let i=/(\[\])$/.test(r);if(r=r.replace(/\[\]$/,""),!i){o[r]=n&&Ug(n,e);return}let a=n===null?[]:n.split(e.arrayFormatSeparator).map(c=>Ug(c,e));if(o[r]===void 0){o[r]=a;return}o[r]=[].concat(o[r],a)};default:return(r,n,o)=>{if(o[r]===void 0){o[r]=n;return}o[r]=[].concat(o[r],n)}}}function j$e(e){if(typeof e!="string"||e.length!==1)throw new TypeError("arrayFormatSeparator must be single character string")}function Ka(e,t){return t.encode?t.strict?pIr(e):encodeURIComponent(e):e}function Ug(e,t){return t.decode?fIr(e):e}function q$e(e){return Array.isArray(e)?e.sort():typeof e=="object"?q$e(Object.keys(e)).sort((t,r)=>Number(t)-Number(r)).map(t=>e[t]):e}function z$e(e){let t=e.indexOf("#");return t!==-1&&(e=e.slice(0,t)),e}function vIr(e){let t="",r=e.indexOf("#");return r!==-1&&(t=e.slice(r)),t}function F$e(e){e=z$e(e);let t=e.indexOf("?");return t===-1?"":e.slice(t+1)}function k$e(e,t){return t.parseNumbers&&!Number.isNaN(Number(e))&&typeof e=="string"&&e.trim()!==""?e=Number(e):t.parseBooleans&&e!==null&&(e.toLowerCase()==="true"||e.toLowerCase()==="false")&&(e=e.toLowerCase()==="true"),e}function U$e(e,t){t=Object.assign({decode:!0,sort:!0,arrayFormat:"none",arrayFormatSeparator:",",parseNumbers:!1,parseBooleans:!1},t),j$e(t.arrayFormatSeparator);let r=gIr(t),n=Object.create(null);if(typeof e!="string"||(e=e.trim().replace(/^[?#&]/,""),!e))return n;for(let o of e.split("&")){if(o==="")continue;let[i,a]=R$e(t.decode?o.replace(/\+/g," "):o,"=");a=a===void 0?null:["comma","separator","bracket-separator"].includes(t.arrayFormat)?a:Ug(a,t),r(Ug(i,t),a,n)}for(let o of Object.keys(n)){let i=n[o];if(typeof i=="object"&&i!==null)for(let a of Object.keys(i))i[a]=k$e(i[a],t);else n[o]=k$e(i,t)}return t.sort===!1?n:(t.sort===!0?Object.keys(n).sort():Object.keys(n).sort(t.sort)).reduce((o,i)=>{let a=n[i];return a&&typeof a=="object"&&!Array.isArray(a)?o[i]=q$e(a):o[i]=a,o},Object.create(null))}Ac.extract=F$e;Ac.parse=U$e;Ac.stringify=(e,t)=>{if(!e)return"";t=Object.assign({encode:!0,strict:!0,arrayFormat:"none",arrayFormatSeparator:","},t),j$e(t.arrayFormatSeparator);let r=a=>t.skipNull&&hIr(e[a])||t.skipEmptyString&&e[a]==="",n=mIr(t),o={};for(let a of Object.keys(e))r(a)||(o[a]=e[a]);let i=Object.keys(o);return t.sort!==!1&&i.sort(t.sort),i.map(a=>{let c=e[a];return c===void 0?"":c===null?Ka(a,t):Array.isArray(c)?c.length===0&&t.arrayFormat==="bracket-separator"?Ka(a,t)+"[]":c.reduce(n(a),[]).join("&"):Ka(a,t)+"="+Ka(c,t)}).filter(a=>a.length>0).join("&")};Ac.parseUrl=(e,t)=>{t=Object.assign({decode:!0},t);let[r,n]=R$e(e,"#");return Object.assign({url:r.split("?")[0]||"",query:U$e(F$e(e),t)},t&&t.parseFragmentIdentifier&&n?{fragmentIdentifier:Ug(n,t)}:{})};Ac.stringifyUrl=(e,t)=>{t=Object.assign({encode:!0,strict:!0,[Uoe]:!0},t);let r=z$e(e.url).split("?")[0]||"",n=Ac.extract(e.url),o=Ac.parse(n,{sort:!1}),i=Object.assign(o,e.query),a=Ac.stringify(i,t);a&&(a=`?${a}`);let c=vIr(e.url);return e.fragmentIdentifier&&(c=`#${t[Uoe]?Ka(e.fragmentIdentifier,t):e.fragmentIdentifier}`),`${r}${a}${c}`};Ac.pick=(e,t,r)=>{r=Object.assign({parseFragmentIdentifier:!0,[Uoe]:!1},r);let{url:n,query:o,fragmentIdentifier:i}=Ac.parseUrl(e,r);return Ac.stringifyUrl({url:n,query:dIr(o,t),fragmentIdentifier:i},r)};Ac.exclude=(e,t,r)=>{let n=Array.isArray(t)?o=>!t.includes(o):(o,i)=>!t(o,i);return Ac.pick(e,n,r)}});var sP=N((a$n,rYe)=>{u();var SIr=rYe.exports=typeof window!="undefined"&&window.Math==Math?window:typeof self!="undefined"&&self.Math==Math?self:Function("return this")();typeof __g=="number"&&(__g=SIr)});var ob=N((l$n,nYe)=>{u();var TIr=nYe.exports={version:"2.6.12"};typeof __e=="number"&&(__e=TIr)});var iYe=N((c$n,oYe)=>{u();oYe.exports=function(e){if(typeof e!="function")throw TypeError(e+" is not a function!");return e}});var Hoe=N((f$n,aYe)=>{u();var IIr=iYe();aYe.exports=function(e,t,r){if(IIr(e),t===void 0)return e;switch(r){case 1:return function(n){return e.call(t,n)};case 2:return function(n,o){return e.call(t,n,o)};case 3:return function(n,o,i){return e.call(t,n,o,i)}}return function(){return e.apply(t,arguments)}}});var lP=N((h$n,sYe)=>{u();sYe.exports=function(e){return typeof e=="object"?e!==null:typeof e=="function"}});var uP=N((g$n,lYe)=>{u();var MIr=lP();lYe.exports=function(e){if(!MIr(e))throw TypeError(e+" is not an object!");return e}});var cz=N((y$n,uYe)=>{u();uYe.exports=function(e){try{return!!e()}catch(t){return!0}}});var g0=N((b$n,cYe)=>{u();cYe.exports=!cz()(function(){return Object.defineProperty({},"a",{get:function(){return 7}}).a!=7})});var $oe=N((w$n,fYe)=>{u();var pYe=lP(),Woe=sP().document,CIr=pYe(Woe)&&pYe(Woe.createElement);fYe.exports=function(e){return CIr?Woe.createElement(e):{}}});var Yoe=N((S$n,dYe)=>{u();dYe.exports=!g0()&&!cz()(function(){return Object.defineProperty($oe()("div"),"a",{get:function(){return 7}}).a!=7})});var Zoe=N((I$n,hYe)=>{u();var pz=lP();hYe.exports=function(e,t){if(!pz(e))return e;var r,n;if(t&&typeof(r=e.toString)=="function"&&!pz(n=r.call(e))||typeof(r=e.valueOf)=="function"&&!pz(n=r.call(e))||!t&&typeof(r=e.toString)=="function"&&!pz(n=r.call(e)))return n;throw TypeError("Can't convert object to primitive value")}});var Koe=N(gYe=>{u();var mYe=uP(),AIr=Yoe(),OIr=Zoe(),PIr=Object.defineProperty;gYe.f=g0()?Object.defineProperty:function(t,r,n){if(mYe(t),r=OIr(r,!0),mYe(n),AIr)try{return PIr(t,r,n)}catch(o){}if("get"in n||"set"in n)throw TypeError("Accessors not supported!");return"value"in n&&(t[r]=n.value),t}});var Xoe=N((O$n,vYe)=>{u();vYe.exports=function(e,t){return{enumerable:!(e&1),configurable:!(e&2),writable:!(e&4),value:t}}});var _Ye=N((D$n,yYe)=>{u();var DIr=Koe(),NIr=Xoe();yYe.exports=g0()?function(e,t,r){return DIr.f(e,t,NIr(1,r))}:function(e,t,r){return e[t]=r,e}});var fz=N((L$n,bYe)=>{u();var LIr={}.hasOwnProperty;bYe.exports=function(e,t){return LIr.call(e,t)}});var cP=N((R$n,wYe)=>{u();var dz=sP(),Joe=ob(),xYe=Hoe(),kIr=_Ye(),RIr=fz(),hz="prototype",fu=function(e,t,r){var n=e&fu.F,o=e&fu.G,i=e&fu.S,a=e&fu.P,c=e&fu.B,h=e&fu.W,m=o?Joe:Joe[t]||(Joe[t]={}),y=m[hz],w=o?dz:i?dz[t]:(dz[t]||{})[hz],E,A,P;o&&(r=t);for(E in r)A=!n&&w&&w[E]!==void 0,!(A&&RIr(m,E))&&(P=A?w[E]:r[E],m[E]=o&&typeof w[E]!="function"?r[E]:c&&A?xYe(P,dz):h&&w[E]==P?function(j){var D=function(k,z,V){if(this instanceof j){switch(arguments.length){case 0:return new j;case 1:return new j(k);case 2:return new j(k,z)}return new j(k,z,V)}return j.apply(this,arguments)};return D[hz]=j[hz],D}(P):a&&typeof P=="function"?xYe(Function.call,P):P,a&&((m.virtual||(m.virtual={}))[E]=P,e&fu.R&&y&&!y[E]&&kIr(y,E,P)))};fu.F=1;fu.G=2;fu.S=4;fu.P=8;fu.B=16;fu.W=32;fu.U=64;fu.R=128;wYe.exports=fu});var SYe=N((q$n,EYe)=>{u();var jIr={}.toString;EYe.exports=function(e){return jIr.call(e).slice(8,-1)}});var Qoe=N((F$n,TYe)=>{u();var qIr=SYe();TYe.exports=Object("z").propertyIsEnumerable(0)?Object:function(e){return qIr(e)=="String"?e.split(""):Object(e)}});var eie=N((B$n,IYe)=>{u();IYe.exports=function(e){if(e==null)throw TypeError("Can't call method on  "+e);return e}});var pP=N((G$n,MYe)=>{u();var zIr=Qoe(),FIr=eie();MYe.exports=function(e){return zIr(FIr(e))}});var tie=N((W$n,CYe)=>{u();var UIr=Math.ceil,BIr=Math.floor;CYe.exports=function(e){return isNaN(e=+e)?0:(e>0?BIr:UIr)(e)}});var OYe=N((Y$n,AYe)=>{u();var VIr=tie(),GIr=Math.min;AYe.exports=function(e){return e>0?GIr(VIr(e),9007199254740991):0}});var DYe=N((K$n,PYe)=>{u();var HIr=tie(),WIr=Math.max,$Ir=Math.min;PYe.exports=function(e,t){return e=HIr(e),e<0?WIr(e+t,0):$Ir(e,t)}});var LYe=N((J$n,NYe)=>{u();var YIr=pP(),ZIr=OYe(),KIr=DYe();NYe.exports=function(e){return function(t,r,n){var o=YIr(t),i=ZIr(o.length),a=KIr(n,i),c;if(e&&r!=r){for(;i>a;)if(c=o[a++],c!=c)return!0}else for(;i>a;a++)if((e||a in o)&&o[a]===r)return e||a||0;return!e&&-1}}});var RYe=N((eYn,kYe)=>{u();kYe.exports=!0});var UYe=N((rYn,FYe)=>{u();var XIr=ob(),jYe=sP(),qYe="__core-js_shared__",zYe=jYe[qYe]||(jYe[qYe]={});(FYe.exports=function(e,t){return zYe[e]||(zYe[e]=t!==void 0?t:{})})("versions",[]).push({version:XIr.version,mode:RYe()?"pure":"global",copyright:"\xA9 2020 Denis Pushkarev (zloirock.ru)"})});var VYe=N((oYn,BYe)=>{u();var JIr=0,QIr=Math.random();BYe.exports=function(e){return"Symbol(".concat(e===void 0?"":e,")_",(++JIr+QIr).toString(36))}});var rie=N((aYn,HYe)=>{u();var GYe=UYe()("keys"),eMr=VYe();HYe.exports=function(e){return GYe[e]||(GYe[e]=eMr(e))}});var YYe=N((lYn,$Ye)=>{u();var WYe=fz(),tMr=pP(),rMr=LYe()(!1),nMr=rie()("IE_PROTO");$Ye.exports=function(e,t){var r=tMr(e),n=0,o=[],i;for(i in r)i!=nMr&&WYe(r,i)&&o.push(i);for(;t.length>n;)WYe(r,i=t[n++])&&(~rMr(o,i)||o.push(i));return o}});var nie=N((cYn,ZYe)=>{u();ZYe.exports="constructor,hasOwnProperty,isPrototypeOf,propertyIsEnumerable,toLocaleString,toString,valueOf".split(",")});var mz=N((fYn,KYe)=>{u();var oMr=YYe(),iMr=nie();KYe.exports=Object.keys||function(t){return oMr(t,iMr)}});var JYe=N(XYe=>{u();XYe.f=Object.getOwnPropertySymbols});var gz=N(QYe=>{u();QYe.f={}.propertyIsEnumerable});var tZe=N((yYn,eZe)=>{u();var aMr=eie();eZe.exports=function(e){return Object(aMr(e))}});var oZe=N((bYn,nZe)=>{"use strict";u();var sMr=g0(),rZe=mz(),lMr=JYe(),uMr=gz(),cMr=tZe(),pMr=Qoe(),vz=Object.assign;nZe.exports=!vz||cz()(function(){var e={},t={},r=Symbol(),n="abcdefghijklmnopqrst";return e[r]=7,n.split("").forEach(function(o){t[o]=o}),vz({},e)[r]!=7||Object.keys(vz({},t)).join("")!=n})?function(t,r){for(var n=cMr(t),o=arguments.length,i=1,a=lMr.f,c=uMr.f;o>i;)for(var h=pMr(arguments[i++]),m=a?rZe(h).concat(a(h)):rZe(h),y=m.length,w=0,E;y>w;)E=m[w++],(!sMr||c.call(h,E))&&(n[E]=h[E]);return n}:vz});var iZe=N(()=>{u();var oie=cP();oie(oie.S+oie.F,"Object",{assign:oZe()})});var sZe=N((TYn,aZe)=>{u();iZe();aZe.exports=ob().Object.assign});var uZe=N((AYn,lZe)=>{u();var fMr=Koe(),dMr=uP(),hMr=mz();lZe.exports=g0()?Object.defineProperties:function(t,r){dMr(t);for(var n=hMr(r),o=n.length,i=0,a;o>i;)fMr.f(t,a=n[i++],r[a]);return t}});var fZe=N((PYn,pZe)=>{u();var cZe=sP().document;pZe.exports=cZe&&cZe.documentElement});var mZe=N((NYn,hZe)=>{u();var mMr=uP(),gMr=uZe(),dZe=nie(),vMr=rie()("IE_PROTO"),aie=function(){},sie="prototype",yz=function(){var e=$oe()("iframe"),t=dZe.length,r="<",n=">",o;for(e.style.display="none",fZe().appendChild(e),e.src="javascript:",o=e.contentWindow.document,o.open(),o.write(r+"script"+n+"document.F=Object"+r+"/script"+n),o.close(),yz=o.F;t--;)delete yz[sie][dZe[t]];return yz()};hZe.exports=Object.create||function(t,r){var n;return t!==null?(aie[sie]=mMr(t),n=new aie,aie[sie]=null,n[vMr]=t):n=yz(),r===void 0?n:gMr(n,r)}});var vZe=N(()=>{u();var gZe=cP();gZe(gZe.S,"Object",{create:mZe()})});var _Ze=N((qYn,yZe)=>{u();vZe();var yMr=ob().Object;yZe.exports=function(t,r){return yMr.create(t,r)}});var wZe=N(xZe=>{u();var _Mr=gz(),bMr=Xoe(),xMr=pP(),wMr=Zoe(),EMr=fz(),SMr=Yoe(),bZe=Object.getOwnPropertyDescriptor;xZe.f=g0()?bZe:function(t,r){if(t=xMr(t),r=wMr(r,!0),SMr)try{return bZe(t,r)}catch(n){}if(EMr(t,r))return bMr(!_Mr.f.call(t,r),t[r])}});var TZe=N((BYn,SZe)=>{u();var TMr=lP(),IMr=uP(),EZe=function(e,t){if(IMr(e),!TMr(t)&&t!==null)throw TypeError(t+": can't set as prototype!")};SZe.exports={set:Object.setPrototypeOf||("__proto__"in{}?function(e,t,r){try{r=Hoe()(Function.call,wZe().f(Object.prototype,"__proto__").set,2),r(e,[]),t=!(e instanceof Array)}catch(n){t=!0}return function(o,i){return EZe(o,i),t?o.__proto__=i:r(o,i),o}}({},!1):void 0),check:EZe}});var MZe=N(()=>{u();var IZe=cP();IZe(IZe.S,"Object",{setPrototypeOf:TZe().set})});var AZe=N(($Yn,CZe)=>{u();MZe();CZe.exports=ob().Object.setPrototypeOf});var Uo=N((rZn,bz)=>{u();(function(){"use strict";var e={}.hasOwnProperty;function t(){for(var o="",i=0;i<arguments.length;i++){var a=arguments[i];a&&(o=n(o,r(a)))}return o}function r(o){if(typeof o=="string"||typeof o=="number")return o;if(typeof o!="object")return"";if(Array.isArray(o))return t.apply(null,o);if(o.toString!==Object.prototype.toString&&!o.toString.toString().includes("[native code]"))return o.toString();var i="";for(var a in o)e.call(o,a)&&o[a]&&(i=n(i,a));return i}function n(o,i){return i?o?o+" "+i:o+i:o}typeof bz!="undefined"&&bz.exports?(t.default=t,bz.exports=t):typeof define=="function"&&typeof define.amd=="object"&&define.amd?define("classnames",[],function(){return t}):window.classNames=t})()});var xz=N((lZn,PZe)=>{"use strict";u();var MMr=function(e,t,r,n,o,i,a,c){if(!e){var h;if(t===void 0)h=new Error("Minified exception occurred; use the non-minified dev environment for the full error message and additional helpful warnings.");else{var m=[r,n,o,i,a,c],y=0;h=new Error(t.replace(/%s/g,function(){return m[y++]})),h.name="Invariant Violation"}throw h.framesToPop=1,h}};PZe.exports=MMr});var fie=N(pie=>{"use strict";u();Object.defineProperty(pie,"__esModule",{value:!0});function kZe(){var e=this.constructor.getDerivedStateFromProps(this.props,this.state);e!=null&&this.setState(e)}function RZe(e){function t(r){var n=this.constructor.getDerivedStateFromProps(e,r);return n!=null?n:null}this.setState(t.bind(this))}function jZe(e,t){try{var r=this.props,n=this.state;this.props=e,this.state=t,this.__reactInternalSnapshotFlag=!0,this.__reactInternalSnapshot=this.getSnapshotBeforeUpdate(r,n)}finally{this.props=r,this.state=n}}kZe.__suppressDeprecationWarning=!0;RZe.__suppressDeprecationWarning=!0;jZe.__suppressDeprecationWarning=!0;function AMr(e){var t=e.prototype;if(!t||!t.isReactComponent)throw new Error("Can only polyfill class components");if(typeof e.getDerivedStateFromProps!="function"&&typeof t.getSnapshotBeforeUpdate!="function")return e;var r=null,n=null,o=null;if(typeof t.componentWillMount=="function"?r="componentWillMount":typeof t.UNSAFE_componentWillMount=="function"&&(r="UNSAFE_componentWillMount"),typeof t.componentWillReceiveProps=="function"?n="componentWillReceiveProps":typeof t.UNSAFE_componentWillReceiveProps=="function"&&(n="UNSAFE_componentWillReceiveProps"),typeof t.componentWillUpdate=="function"?o="componentWillUpdate":typeof t.UNSAFE_componentWillUpdate=="function"&&(o="UNSAFE_componentWillUpdate"),r!==null||n!==null||o!==null){var i=e.displayName||e.name,a=typeof e.getDerivedStateFromProps=="function"?"getDerivedStateFromProps()":"getSnapshotBeforeUpdate()";throw Error(`Unsafe legacy lifecycles will not be called for components using new component APIs.

`+i+" uses "+a+" but also contains the following legacy lifecycles:"+(r!==null?`
  `+r:"")+(n!==null?`
  `+n:"")+(o!==null?`
  `+o:"")+`

The above lifecycles should be removed. Learn more about this warning here:
https://fb.me/react-async-component-lifecycle-hooks`)}if(typeof e.getDerivedStateFromProps=="function"&&(t.componentWillMount=kZe,t.componentWillReceiveProps=RZe),typeof t.getSnapshotBeforeUpdate=="function"){if(typeof t.componentDidUpdate!="function")throw new Error("Cannot polyfill getSnapshotBeforeUpdate() for components that do not define componentDidUpdate() on the prototype");t.componentWillUpdate=jZe;var c=t.componentDidUpdate;t.componentDidUpdate=function(m,y,w){var E=this.__reactInternalSnapshotFlag?this.__reactInternalSnapshot:w;c.call(this,m,y,E)}}return e}pie.polyfill=AMr});var UZe=N((kZn,FZe)=>{u();var PMr=g0(),DMr=mz(),NMr=pP(),LMr=gz().f;FZe.exports=function(e){return function(t){for(var r=NMr(t),n=DMr(r),o=n.length,i=0,a=[],c;o>i;)c=n[i++],(!PMr||LMr.call(r,c))&&a.push(e?[c,r[c]]:r[c]);return a}}});var VZe=N(()=>{u();var BZe=cP(),kMr=UZe()(!0);BZe(BZe.S,"Object",{entries:function(t){return kMr(t)}})});var HZe=N((FZn,GZe)=>{u();VZe();GZe.exports=ob().Object.entries});var die=N((BZn,WZe)=>{u();WZe.exports=HZe()});var Tz=N((Sz,XZe)=>{"use strict";u();Object.defineProperty(Sz,"__esModule",{value:!0});Sz.default=GMr;function GMr(e){function t(n,o,i,a,c,h){var m=a||"<<anonymous>>",y=h||i;if(o[i]==null)return n?new Error("Required "+c+" `"+y+"` was not specified "+("in `"+m+"`.")):null;for(var w=arguments.length,E=Array(w>6?w-6:0),A=6;A<w;A++)E[A-6]=arguments[A];return e.apply(void 0,[o,i,m,c,y].concat(E))}var r=t.bind(null,!1);return r.isRequired=t.bind(null,!0),r}XZe.exports=Sz.default});var eKe=N(di=>{"use strict";u();var ol=typeof Symbol=="function"&&Symbol.for,yie=ol?Symbol.for("react.element"):60103,_ie=ol?Symbol.for("react.portal"):60106,Iz=ol?Symbol.for("react.fragment"):60107,Mz=ol?Symbol.for("react.strict_mode"):60108,Cz=ol?Symbol.for("react.profiler"):60114,Az=ol?Symbol.for("react.provider"):60109,Oz=ol?Symbol.for("react.context"):60110,bie=ol?Symbol.for("react.async_mode"):60111,Pz=ol?Symbol.for("react.concurrent_mode"):60111,Dz=ol?Symbol.for("react.forward_ref"):60112,Nz=ol?Symbol.for("react.suspense"):60113,$Mr=ol?Symbol.for("react.suspense_list"):60120,Lz=ol?Symbol.for("react.memo"):60115,kz=ol?Symbol.for("react.lazy"):60116,YMr=ol?Symbol.for("react.block"):60121,ZMr=ol?Symbol.for("react.fundamental"):60117,KMr=ol?Symbol.for("react.responder"):60118,XMr=ol?Symbol.for("react.scope"):60119;function wp(e){if(typeof e=="object"&&e!==null){var t=e.$$typeof;switch(t){case yie:switch(e=e.type,e){case bie:case Pz:case Iz:case Cz:case Mz:case Nz:return e;default:switch(e=e&&e.$$typeof,e){case Oz:case Dz:case kz:case Lz:case Az:return e;default:return t}}case _ie:return t}}}function QZe(e){return wp(e)===Pz}di.AsyncMode=bie;di.ConcurrentMode=Pz;di.ContextConsumer=Oz;di.ContextProvider=Az;di.Element=yie;di.ForwardRef=Dz;di.Fragment=Iz;di.Lazy=kz;di.Memo=Lz;di.Portal=_ie;di.Profiler=Cz;di.StrictMode=Mz;di.Suspense=Nz;di.isAsyncMode=function(e){return QZe(e)||wp(e)===bie};di.isConcurrentMode=QZe;di.isContextConsumer=function(e){return wp(e)===Oz};di.isContextProvider=function(e){return wp(e)===Az};di.isElement=function(e){return typeof e=="object"&&e!==null&&e.$$typeof===yie};di.isForwardRef=function(e){return wp(e)===Dz};di.isFragment=function(e){return wp(e)===Iz};di.isLazy=function(e){return wp(e)===kz};di.isMemo=function(e){return wp(e)===Lz};di.isPortal=function(e){return wp(e)===_ie};di.isProfiler=function(e){return wp(e)===Cz};di.isStrictMode=function(e){return wp(e)===Mz};di.isSuspense=function(e){return wp(e)===Nz};di.isValidElementType=function(e){return typeof e=="string"||typeof e=="function"||e===Iz||e===Pz||e===Cz||e===Mz||e===Nz||e===$Mr||typeof e=="object"&&e!==null&&(e.$$typeof===kz||e.$$typeof===Lz||e.$$typeof===Az||e.$$typeof===Oz||e.$$typeof===Dz||e.$$typeof===ZMr||e.$$typeof===KMr||e.$$typeof===XMr||e.$$typeof===YMr)};di.typeOf=wp});var rKe=N((aKn,tKe)=>{"use strict";u();tKe.exports=eKe()});var Oc=N((Rz,oKe)=>{"use strict";u();Object.defineProperty(Rz,"__esModule",{value:!0});var JMr=De(),QMr=nKe(JMr),eCr=rKe(),tCr=Tz(),rCr=nKe(tCr);function nKe(e){return e&&e.__esModule?e:{default:e}}function nCr(e,t,r,n,o){var i=e[t];return QMr.default.isValidElement(i)?new Error("Invalid "+n+" `"+o+"` of type ReactElement "+("supplied to `"+r+"`,expected an element type (a string ")+", component class, or function component)."):(0,eCr.isValidElementType)(i)?null:new Error("Invalid "+n+" `"+o+"` of value `"+i+"` "+("supplied to `"+r+"`, expected an element type (a string ")+", component class, or function component).")}Rz.default=(0,rCr.default)(nCr);oKe.exports=Rz.default});var uKe=N((jz,lKe)=>{"use strict";u();Object.defineProperty(jz,"__esModule",{value:!0});jz.default=cCr;var sCr=Tz(),lCr=uCr(sCr);function uCr(e){return e&&e.__esModule?e:{default:e}}function cCr(){for(var e=arguments.length,t=Array(e),r=0;r<e;r++)t[r]=arguments[r];function n(){for(var o=arguments.length,i=Array(o),a=0;a<o;a++)i[a]=arguments[a];var c=null;return t.forEach(function(h){if(c==null){var m=h.apply(void 0,i);m!=null&&(c=m)}}),c}return(0,lCr.default)(n)}lKe.exports=jz.default});var ab=N((TKn,dKe)=>{"use strict";u();var fCr=function(){};dKe.exports=fCr});var Xa=N((kKn,hP)=>{u();function gCr(e){return e&&e.__esModule?e:{default:e}}hP.exports=gCr,hP.exports.__esModule=!0,hP.exports.default=hP.exports});var gKe=N((Uz,mKe)=>{"use strict";u();Uz.__esModule=!0;Uz.default=yCr;var vCr=/-(.)/g;function yCr(e){return e.replace(vCr,function(t,r){return r.toUpperCase()})}mKe.exports=Uz.default});var Tie=N((Bz,vKe)=>{"use strict";u();var _Cr=Xa();Bz.__esModule=!0;Bz.default=wCr;var bCr=_Cr(gKe()),xCr=/^-ms-/;function wCr(e){return(0,bCr.default)(e.replace(xCr,"ms-"))}vKe.exports=Bz.default});var _Ke=N((Vz,yKe)=>{"use strict";u();Vz.__esModule=!0;Vz.default=SCr;var ECr=/([A-Z])/g;function SCr(e){return e.replace(ECr,"-$1").toLowerCase()}yKe.exports=Vz.default});var xKe=N((Gz,bKe)=>{"use strict";u();var TCr=Xa();Gz.__esModule=!0;Gz.default=CCr;var ICr=TCr(_Ke()),MCr=/^ms-/;function CCr(e){return(0,ICr.default)(e).replace(MCr,"-ms-")}bKe.exports=Gz.default});var EKe=N((Hz,wKe)=>{"use strict";u();var ACr=Xa();Hz.__esModule=!0;Hz.default=NCr;var OCr=ACr(Tie()),PCr=/^(top|right|bottom|left)$/,DCr=/^([+-]?(?:\d*\.|)\d+(?:[eE][+-]?\d+|))(?!px)[a-z%]+$/i;function NCr(e){if(!e)throw new TypeError("No Element passed to `getComputedStyle()`");var t=e.ownerDocument;return"defaultView"in t?t.defaultView.opener?e.ownerDocument.defaultView.getComputedStyle(e,null):window.getComputedStyle(e,null):{getPropertyValue:function(n){var o=e.style;n=(0,OCr.default)(n),n=="float"&&(n="styleFloat");var i=e.currentStyle[n]||null;if(i==null&&o&&o[n]&&(i=o[n]),DCr.test(i)&&!PCr.test(n)){var a=o.left,c=e.runtimeStyle,h=c&&c.left;h&&(c.left=e.currentStyle.left),o.left=n==="fontSize"?"1em":i,i=o.pixelLeft+"px",o.left=a,h&&(c.left=h)}return i}}}wKe.exports=Hz.default});var TKe=N((Wz,SKe)=>{"use strict";u();Wz.__esModule=!0;Wz.default=LCr;function LCr(e,t){return"removeProperty"in e.style?e.style.removeProperty(t):e.style.removeAttribute(t)}SKe.exports=Wz.default});var em=N((mP,IKe)=>{"use strict";u();mP.__esModule=!0;mP.default=void 0;var kCr=!!(typeof window!="undefined"&&window.document&&window.document.createElement);mP.default=kCr;IKe.exports=mP.default});var DKe=N(_o=>{"use strict";u();var RCr=Xa();_o.__esModule=!0;_o.default=_o.animationEnd=_o.animationDelay=_o.animationTiming=_o.animationDuration=_o.animationName=_o.transitionEnd=_o.transitionDuration=_o.transitionDelay=_o.transitionTiming=_o.transitionProperty=_o.transform=void 0;var jCr=RCr(em()),Yz="transform";_o.transform=Yz;var tm,Iie,MKe;_o.animationEnd=MKe;_o.transitionEnd=Iie;var Mie,Cie,Aie,Oie;_o.transitionDelay=Oie;_o.transitionTiming=Aie;_o.transitionDuration=Cie;_o.transitionProperty=Mie;var CKe,AKe,OKe,PKe;_o.animationDelay=PKe;_o.animationTiming=OKe;_o.animationDuration=AKe;_o.animationName=CKe;jCr.default&&($z=zCr(),tm=$z.prefix,_o.transitionEnd=Iie=$z.transitionEnd,_o.animationEnd=MKe=$z.animationEnd,_o.transform=Yz=tm+"-"+Yz,_o.transitionProperty=Mie=tm+"-transition-property",_o.transitionDuration=Cie=tm+"-transition-duration",_o.transitionDelay=Oie=tm+"-transition-delay",_o.transitionTiming=Aie=tm+"-transition-timing-function",_o.animationName=CKe=tm+"-animation-name",_o.animationDuration=AKe=tm+"-animation-duration",_o.animationTiming=OKe=tm+"-animation-delay",_o.animationDelay=PKe=tm+"-animation-timing-function");var $z,qCr={transform:Yz,end:Iie,property:Mie,timing:Aie,delay:Oie,duration:Cie};_o.default=qCr;function zCr(){for(var e=document.createElement("div").style,t={O:function(m){return"o"+m.toLowerCase()},Moz:function(m){return m.toLowerCase()},Webkit:function(m){return"webkit"+m},ms:function(m){return"MS"+m}},r=Object.keys(t),n,o,i="",a=0;a<r.length;a++){var c=r[a];if(c+"TransitionProperty"in e){i="-"+c.toLowerCase(),n=t[c]("TransitionEnd"),o=t[c]("AnimationEnd");break}}return!n&&"transitionProperty"in e&&(n="transitionend"),!o&&"animationName"in e&&(o="animationend"),e=null,{animationEnd:o,transitionEnd:n,prefix:i}}});var LKe=N((Zz,NKe)=>{"use strict";u();Zz.__esModule=!0;Zz.default=UCr;var FCr=/^((translate|rotate|scale)(X|Y|Z|3d)?|matrix(3d)?|perspective|skew(X|Y)?)$/i;function UCr(e){return!!(e&&FCr.test(e))}NKe.exports=Zz.default});var Xz=N((Kz,kKe)=>{"use strict";u();var gP=Xa();Kz.__esModule=!0;Kz.default=$Cr;var BCr=gP(Tie()),Pie=gP(xKe()),VCr=gP(EKe()),GCr=gP(TKe()),HCr=DKe(),WCr=gP(LKe());function $Cr(e,t,r){var n="",o="",i=t;if(typeof t=="string"){if(r===void 0)return e.style[(0,BCr.default)(t)]||(0,VCr.default)(e).getPropertyValue((0,Pie.default)(t));(i={})[t]=r}Object.keys(i).forEach(function(a){var c=i[a];!c&&c!==0?(0,GCr.default)(e,(0,Pie.default)(a)):(0,WCr.default)(a)?o+=a+"("+c+") ":n+=(0,Pie.default)(a)+": "+c+";"}),o&&(n+=HCr.transform+": "+o+";"),e.style.cssText+=";"+n}kKe.exports=Kz.default});var RKe=N(XS=>{"use strict";u();XS.__esModule=!0;XS.classNamesShape=XS.timeoutsShape=void 0;var YKn=YCr(It());function YCr(e){return e&&e.__esModule?e:{default:e}}var ZCr=null;XS.timeoutsShape=ZCr;var KCr=null;XS.classNamesShape=KCr});var qKe=N(Pc=>{"use strict";u();Pc.__esModule=!0;Pc.default=Pc.EXITING=Pc.ENTERED=Pc.ENTERING=Pc.EXITED=Pc.UNMOUNTED=void 0;var XCr=eAr(It()),Die=jKe(De()),JCr=jKe(ba()),QCr=fie(),XKn=RKe();function jKe(e){return e&&e.__esModule?e:{default:e}}function eAr(e){if(e&&e.__esModule)return e;var t={};if(e!=null){for(var r in e)if(Object.prototype.hasOwnProperty.call(e,r)){var n=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(e,r):{};n.get||n.set?Object.defineProperty(t,r,n):t[r]=e[r]}}return t.default=e,t}function tAr(e,t){if(e==null)return{};var r={},n=Object.keys(e),o,i;for(i=0;i<n.length;i++)o=n[i],!(t.indexOf(o)>=0)&&(r[o]=e[o]);return r}function rAr(e,t){e.prototype=Object.create(t.prototype),e.prototype.constructor=e,e.__proto__=t}var vP="unmounted";Pc.UNMOUNTED=vP;var sb="exited";Pc.EXITED=sb;var lb="entering";Pc.ENTERING=lb;var QS="entered";Pc.ENTERED=QS;var Nie="exiting";Pc.EXITING=Nie;var rm=function(e){rAr(t,e);function t(n,o){var i;i=e.call(this,n,o)||this;var a=o.transitionGroup,c=a&&!a.isMounting?n.enter:n.appear,h;return i.appearStatus=null,n.in?c?(h=sb,i.appearStatus=lb):h=QS:n.unmountOnExit||n.mountOnEnter?h=vP:h=sb,i.state={status:h},i.nextCallback=null,i}var r=t.prototype;return r.getChildContext=function(){return{transitionGroup:null}},t.getDerivedStateFromProps=function(o,i){var a=o.in;return a&&i.status===vP?{status:sb}:null},r.componentDidMount=function(){this.updateStatus(!0,this.appearStatus)},r.componentDidUpdate=function(o){var i=null;if(o!==this.props){var a=this.state.status;this.props.in?a!==lb&&a!==QS&&(i=lb):(a===lb||a===QS)&&(i=Nie)}this.updateStatus(!1,i)},r.componentWillUnmount=function(){this.cancelNextCallback()},r.getTimeouts=function(){var o=this.props.timeout,i,a,c;return i=a=c=o,o!=null&&typeof o!="number"&&(i=o.exit,a=o.enter,c=o.appear!==void 0?o.appear:a),{exit:i,enter:a,appear:c}},r.updateStatus=function(o,i){if(o===void 0&&(o=!1),i!==null){this.cancelNextCallback();var a=JCr.default.findDOMNode(this);i===lb?this.performEnter(a,o):this.performExit(a)}else this.props.unmountOnExit&&this.state.status===sb&&this.setState({status:vP})},r.performEnter=function(o,i){var a=this,c=this.props.enter,h=this.context.transitionGroup?this.context.transitionGroup.isMounting:i,m=this.getTimeouts(),y=h?m.appear:m.enter;if(!i&&!c){this.safeSetState({status:QS},function(){a.props.onEntered(o)});return}this.props.onEnter(o,h),this.safeSetState({status:lb},function(){a.props.onEntering(o,h),a.onTransitionEnd(o,y,function(){a.safeSetState({status:QS},function(){a.props.onEntered(o,h)})})})},r.performExit=function(o){var i=this,a=this.props.exit,c=this.getTimeouts();if(!a){this.safeSetState({status:sb},function(){i.props.onExited(o)});return}this.props.onExit(o),this.safeSetState({status:Nie},function(){i.props.onExiting(o),i.onTransitionEnd(o,c.exit,function(){i.safeSetState({status:sb},function(){i.props.onExited(o)})})})},r.cancelNextCallback=function(){this.nextCallback!==null&&(this.nextCallback.cancel(),this.nextCallback=null)},r.safeSetState=function(o,i){i=this.setNextCallback(i),this.setState(o,i)},r.setNextCallback=function(o){var i=this,a=!0;return this.nextCallback=function(c){a&&(a=!1,i.nextCallback=null,o(c))},this.nextCallback.cancel=function(){a=!1},this.nextCallback},r.onTransitionEnd=function(o,i,a){this.setNextCallback(a);var c=i==null&&!this.props.addEndListener;if(!o||c){setTimeout(this.nextCallback,0);return}this.props.addEndListener&&this.props.addEndListener(o,this.nextCallback),i!=null&&setTimeout(this.nextCallback,i)},r.render=function(){var o=this.state.status;if(o===vP)return null;var i=this.props,a=i.children,c=tAr(i,["children"]);if(delete c.in,delete c.mountOnEnter,delete c.unmountOnExit,delete c.appear,delete c.enter,delete c.exit,delete c.timeout,delete c.addEndListener,delete c.onEnter,delete c.onEntering,delete c.onEntered,delete c.onExit,delete c.onExiting,delete c.onExited,typeof a=="function")return a(o,c);var h=Die.default.Children.only(a);return Die.default.cloneElement(h,c)},t}(Die.default.Component);rm.contextTypes={transitionGroup:XCr.object};rm.childContextTypes={transitionGroup:function(){}};rm.propTypes={};function JS(){}rm.defaultProps={in:!1,mountOnEnter:!1,unmountOnExit:!1,appear:!1,enter:!0,exit:!0,onEnter:JS,onEntering:JS,onEntered:JS,onExit:JS,onExiting:JS,onExited:JS};rm.UNMOUNTED=0;rm.EXITED=1;rm.ENTERING=2;rm.ENTERED=3;rm.EXITING=4;var nAr=(0,QCr.polyfill)(rm);Pc.default=nAr});var ub=N((Jz,zKe)=>{"use strict";u();Jz.__esModule=!0;Jz.default=oAr;function oAr(e){return e&&e.ownerDocument||document}zKe.exports=Jz.default});var UKe=N((Qz,FKe)=>{"use strict";u();var iAr=Xa();Qz.__esModule=!0;Qz.default=sAr;var aAr=iAr(ub());function sAr(e){e===void 0&&(e=(0,aAr.default)());try{return e.activeElement}catch(t){}}FKe.exports=Qz.default});var _P=N((yP,VKe)=>{"use strict";u();var lAr=Xa();yP.__esModule=!0;yP.default=void 0;var uAr=lAr(em()),cAr=function(){return uAr.default?function(e,t){return e.contains?e.contains(t):e.compareDocumentPosition?e===t||!!(e.compareDocumentPosition(t)&16):BKe(e,t)}:BKe}();yP.default=cAr;function BKe(e,t){if(t)do if(t===e)return!0;while(t=t.parentNode);return!1}VKe.exports=yP.default});var $Ke=N((cb,WKe)=>{u();function GKe(e){if(e&&typeof e=="object"){var t=e.which||e.keyCode||e.charCode;t&&(e=t)}if(typeof e=="number")return HKe[e];var r=String(e),n=Gg[r.toLowerCase()];if(n)return n;var n=e8[r.toLowerCase()];if(n)return n;if(r.length===1)return r.charCodeAt(0)}GKe.isEventKey=function(t,r){if(t&&typeof t=="object"){var n=t.which||t.keyCode||t.charCode;if(n==null)return!1;if(typeof r=="string"){var o=Gg[r.toLowerCase()];if(o)return o===n;var o=e8[r.toLowerCase()];if(o)return o===n}else if(typeof r=="number")return r===n;return!1}};cb=WKe.exports=GKe;var Gg=cb.code=cb.codes={backspace:8,tab:9,enter:13,shift:16,ctrl:17,alt:18,"pause/break":19,"caps lock":20,esc:27,space:32,"page up":33,"page down":34,end:35,home:36,left:37,up:38,right:39,down:40,insert:45,delete:46,command:91,"left command":91,"right command":93,"numpad *":106,"numpad +":107,"numpad -":109,"numpad .":110,"numpad /":111,"num lock":144,"scroll lock":145,"my computer":182,"my calculator":183,";":186,"=":187,",":188,"-":189,".":190,"/":191,"`":192,"[":219,"\\":220,"]":221,"'":222},e8=cb.aliases={windows:91,"\u21E7":16,"\u2325":18,"\u2303":17,"\u2318":91,ctl:17,control:17,option:18,pause:19,break:19,caps:20,return:13,escape:27,spc:32,spacebar:32,pgup:33,pgdn:34,ins:45,del:46,cmd:91};for(wa=97;wa<123;wa++)Gg[String.fromCharCode(wa)]=wa-32;for(wa=48;wa<58;wa++)Gg[wa-48]=wa;var wa;for(wa=1;wa<13;wa++)Gg["f"+wa]=wa+111;for(wa=0;wa<10;wa++)Gg["numpad "+wa]=wa+96;var HKe=cb.names=cb.title={};for(wa in Gg)HKe[Gg[wa]]=wa;for(Lie in e8)Gg[Lie]=e8[Lie];var Lie});var kie=N((t8,YKe)=>{"use strict";u();Object.defineProperty(t8,"__esModule",{value:!0});t8.default=pAr;function pAr(e){return function(r,n,o,i,a){var c=o||"<<anonymous>>",h=a||n;if(r[n]==null)return new Error("The "+i+" `"+h+"` is required to make "+("`"+c+"` accessible for users of assistive ")+"technologies such as screen readers.");for(var m=arguments.length,y=Array(m>5?m-5:0),w=5;w<m;w++)y[w-5]=arguments[w];return e.apply(void 0,[r,n,o,i,a].concat(y))}}YKe.exports=t8.default});var r8=N((bP,KKe)=>{"use strict";u();var fAr=Xa();bP.__esModule=!0;bP.default=void 0;var dAr=fAr(em()),ZKe=function(){};dAr.default&&(ZKe=function(){if(document.addEventListener)return function(e,t,r,n){return e.addEventListener(t,r,n||!1)};if(document.attachEvent)return function(e,t,r){return e.attachEvent("on"+t,function(n){n=n||window.event,n.target=n.target||n.srcElement,n.currentTarget=e,r.call(e,n)})}}());var hAr=ZKe;bP.default=hAr;KKe.exports=bP.default});var n8=N((xP,JKe)=>{"use strict";u();var mAr=Xa();xP.__esModule=!0;xP.default=void 0;var gAr=mAr(em()),XKe=function(){};gAr.default&&(XKe=function(){if(document.addEventListener)return function(e,t,r,n){return e.removeEventListener(t,r,n||!1)};if(document.attachEvent)return function(e,t,r){return e.detachEvent("on"+t,r)}}());var vAr=XKe;xP.default=vAr;JKe.exports=xP.default});var Rie=N((o8,eXe)=>{"use strict";u();o8.__esModule=!0;o8.default=function(e,t,r,n){return(0,_Ar.default)(e,t,r,n),{remove:function(){(0,xAr.default)(e,t,r,n)}}};var yAr=r8(),_Ar=QKe(yAr),bAr=n8(),xAr=QKe(bAr);function QKe(e){return e&&e.__esModule?e:{default:e}}eXe.exports=o8.default});var pb=N((i8,rXe)=>{"use strict";u();i8.__esModule=!0;i8.default=function(e){return(0,TAr.default)(EAr.default.findDOMNode(e))};var wAr=ba(),EAr=tXe(wAr),SAr=ub(),TAr=tXe(SAr);function tXe(e){return e&&e.__esModule?e:{default:e}}rXe.exports=i8.default});var oXe=N((l8,nXe)=>{"use strict";u();l8.__esModule=!0;var IAr=_P(),MAr=eT(IAr),CAr=It(),a8=eT(CAr),AAr=De(),OAr=eT(AAr),PAr=ba(),DAr=eT(PAr),NAr=Rie(),jie=eT(NAr),LAr=pb(),kAr=eT(LAr);function eT(e){return e&&e.__esModule?e:{default:e}}function RAr(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function jAr(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t&&(typeof t=="object"||typeof t=="function")?t:e}function qAr(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var zAr=27;function FAr(e){return e.button===0}function UAr(e){return!!(e.metaKey||e.altKey||e.ctrlKey||e.shiftKey)}var s8=function(e){qAr(t,e);function t(r,n){RAr(this,t);var o=jAr(this,e.call(this,r,n));return o.addEventListeners=function(){o.currentEvent=window.event;var i=o.props.event,a=(0,kAr.default)(o);o.documentMouseCaptureListener=(0,jie.default)(a,i,o.handleMouseCapture,!0),o.documentMouseListener=(0,jie.default)(a,i,o.handleMouse),o.documentKeyupListener=(0,jie.default)(a,"keyup",o.handleKeyUp)},o.removeEventListeners=function(){o.documentMouseCaptureListener&&o.documentMouseCaptureListener.remove(),o.documentMouseListener&&o.documentMouseListener.remove(),o.documentKeyupListener&&o.documentKeyupListener.remove()},o.handleMouseCapture=function(i){o.preventMouseRootClose=UAr(i)||!FAr(i)||(0,MAr.default)(DAr.default.findDOMNode(o),i.target)},o.handleMouse=function(i){if(i===o.currentEvent){o.currentEvent=void 0;return}!o.preventMouseRootClose&&o.props.onRootClose&&o.props.onRootClose(i)},o.handleKeyUp=function(i){if(i===o.currentEvent){o.currentEvent=void 0;return}i.keyCode===zAr&&o.props.onRootClose&&o.props.onRootClose(i)},o.preventMouseRootClose=!1,o}return t.prototype.componentDidMount=function(){this.props.disabled||this.addEventListeners()},t.prototype.componentDidUpdate=function(n){!this.props.disabled&&n.disabled?this.addEventListeners():this.props.disabled&&!n.disabled&&this.removeEventListeners()},t.prototype.componentWillUnmount=function(){this.props.disabled||this.removeEventListeners()},t.prototype.render=function(){return this.props.children},t}(OAr.default.Component);s8.displayName="RootCloseWrapper";s8.propTypes={onRootClose:a8.default.func,children:a8.default.element,disabled:a8.default.bool,event:a8.default.oneOf(["click","mousedown"])};s8.defaultProps={event:"click"};l8.default=s8;nXe.exports=l8.default});var gXe=N((d8,mXe)=>{"use strict";u();d8.__esModule=!0;d8.default=tOr;var eOr=/^[\w-]*$/,Yie=Function.prototype.bind.call(Function.prototype.call,[].slice);function tOr(e,t){var r=t[0]==="#",n=t[0]===".",o=r||n?t.slice(1):t,i=eOr.test(o),a;return i?r?(e=e.getElementById?e:document,(a=e.getElementById(o))?[a]:[]):e.getElementsByClassName&&n?Yie(e.getElementsByClassName(o)):Yie(e.getElementsByTagName(t)):Yie(e.querySelectorAll(t))}mXe.exports=d8.default});var _Xe=N((h8,yXe)=>{"use strict";u();var vXe=Xa();h8.__esModule=!0;h8.default=oOr;var rOr=vXe(_P()),nOr=vXe(gXe());function oOr(e,t){return function(n){var o=n.currentTarget,i=n.target,a=(0,nOr.default)(o,e);a.some(function(c){return(0,rOr.default)(c,i)})&&t.call(this,n)}}yXe.exports=h8.default});var wXe=N((SP,xXe)=>{"use strict";u();var Zie=Xa();SP.__esModule=!0;SP.default=void 0;var iOr=Zie(em()),aOr=Zie(r8()),sOr=Zie(n8()),bXe=function(){};iOr.default&&(bXe=function(t,r,n,o){return(0,aOr.default)(t,r,n,o),function(){(0,sOr.default)(t,r,n,o)}});var lOr=bXe;SP.default=lOr;xXe.exports=SP.default});var MXe=N(_0=>{"use strict";u();var m8=Xa();_0.__esModule=!0;_0.default=void 0;var EXe=m8(r8());_0.on=EXe.default;var SXe=m8(n8());_0.off=SXe.default;var TXe=m8(_Xe());_0.filter=TXe.default;var IXe=m8(wXe());_0.listen=IXe.default;var uOr={on:EXe.default,off:SXe.default,filter:TXe.default,listen:IXe.default};_0.default=uOr});var Kie=N((v8,CXe)=>{"use strict";u();var cOr=Xa();v8.__esModule=!0;v8.default=fOr;var pOr=cOr(em()),g8;function fOr(e){if((!g8&&g8!==0||e)&&pOr.default){var t=document.createElement("div");t.style.position="absolute",t.style.top="-9999px",t.style.width="50px",t.style.height="50px",t.style.overflow="scroll",document.body.appendChild(t),g8=t.offsetWidth-t.clientWidth,document.body.removeChild(t)}return g8}CXe.exports=v8.default});var TP=N((y8,OXe)=>{"use strict";u();Object.defineProperty(y8,"__esModule",{value:!0});var dOr=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},hOr=De(),mOr=AXe(hOr),gOr=Tz(),vOr=AXe(gOr);function AXe(e){return e&&e.__esModule?e:{default:e}}function yOr(e,t,r,n,o){var i=e[t],a=typeof i=="undefined"?"undefined":dOr(i);return mOr.default.isValidElement(i)?new Error("Invalid "+n+" `"+o+"` of type ReactElement "+("supplied to `"+r+"`, expected a ReactComponent or a ")+"DOMElement. You can usually obtain a ReactComponent or DOMElement from a ReactElement by attaching a ref to it."):(a!=="object"||typeof i.render!="function")&&i.nodeType!==1?new Error("Invalid "+n+" `"+o+"` of value `"+i+"` "+("supplied to `"+r+"`, expected a ReactComponent or a ")+"DOMElement."):null}y8.default=(0,vOr.default)(yOr);OXe.exports=y8.default});var LXe=N((rJn,NXe)=>{"use strict";u();var _Or=!1,DXe=function(){};_Or&&(PXe=function(t,r){var n=arguments.length;r=new Array(n>1?n-1:0);for(var o=1;o<n;o++)r[o-1]=arguments[o];var i=0,a="Warning: "+t.replace(/%s/g,function(){return r[i++]});typeof console!="undefined"&&console.error(a);try{throw new Error(a)}catch(c){}},DXe=function(e,t,r){var n=arguments.length;r=new Array(n>2?n-2:0);for(var o=2;o<n;o++)r[o-2]=arguments[o];if(t===void 0)throw new Error("`warning(condition, format, ...args)` requires a warning message argument");e||PXe.apply(null,[t].concat(r))});var PXe;NXe.exports=DXe});var jXe=N((_8,RXe)=>{"use strict";u();Object.defineProperty(_8,"__esModule",{value:!0});_8.default=kXe;var bOr=LXe(),xOr=wOr(bOr);function wOr(e){return e&&e.__esModule?e:{default:e}}var Xie={};function kXe(e,t){return function(n,o,i,a,c){var h=i||"<<anonymous>>",m=c||o;if(n[o]!=null){var y=i+"."+o;(0,xOr.default)(Xie[y],"The "+a+" `"+m+"` of "+("`"+h+"` is deprecated. "+t+".")),Xie[y]=!0}for(var w=arguments.length,E=Array(w>5?w-5:0),A=5;A<w;A++)E[A-5]=arguments[A];return e.apply(void 0,[n,o,i,a,c].concat(E))}}function EOr(){Xie={}}kXe._resetWarned=EOr;RXe.exports=_8.default});var Jie=N((b8,qXe)=>{"use strict";u();b8.__esModule=!0;b8.default=SOr;function SOr(e,t){return e.classList?!!t&&e.classList.contains(t):(" "+(e.className.baseVal||e.className)+" ").indexOf(" "+t+" ")!==-1}qXe.exports=b8.default});var FXe=N((x8,zXe)=>{"use strict";u();var TOr=Xa();x8.__esModule=!0;x8.default=MOr;var IOr=TOr(Jie());function MOr(e,t){e.classList?e.classList.add(t):(0,IOr.default)(e,t)||(typeof e.className=="string"?e.className=e.className+" "+t:e.setAttribute("class",(e.className&&e.className.baseVal||"")+" "+t))}zXe.exports=x8.default});var VXe=N((sJn,BXe)=>{"use strict";u();function UXe(e,t){return e.replace(new RegExp("(^|\\s)"+t+"(?:\\s|$)","g"),"$1").replace(/\s+/g," ").replace(/^\s*|\s*$/g,"")}BXe.exports=function(t,r){t.classList?t.classList.remove(r):typeof t.className=="string"?t.className=UXe(t.className,r):t.setAttribute("class",UXe(t.className&&t.className.baseVal||"",r))}});var $Xe=N(fb=>{"use strict";u();var Qie=Xa();fb.__esModule=!0;fb.default=void 0;var GXe=Qie(FXe());fb.addClass=GXe.default;var HXe=Qie(VXe());fb.removeClass=HXe.default;var WXe=Qie(Jie());fb.hasClass=WXe.default;var COr={addClass:GXe.default,removeClass:HXe.default,hasClass:WXe.default};fb.default=COr});var IP=N((w8,YXe)=>{"use strict";u();w8.__esModule=!0;w8.default=AOr;function AOr(e){return e===e.window?e:e.nodeType===9?e.defaultView||e.parentWindow:!1}YXe.exports=w8.default});var eae=N((E8,XXe)=>{"use strict";u();E8.__esModule=!0;E8.default=kOr;var OOr=IP(),ZXe=KXe(OOr),POr=ub(),DOr=KXe(POr);function KXe(e){return e&&e.__esModule?e:{default:e}}function NOr(e){return e&&e.tagName.toLowerCase()==="body"}function LOr(e){var t=(0,DOr.default)(e),r=(0,ZXe.default)(t),n=r.innerWidth;if(!n){var o=t.documentElement.getBoundingClientRect();n=o.right-Math.abs(o.left)}return t.body.clientWidth<n}function kOr(e){var t=(0,ZXe.default)(e);return t||NOr(e)?LOr(e):e.scrollHeight>e.clientHeight}XXe.exports=E8.default});var QXe=N(MP=>{"use strict";u();MP.__esModule=!0;MP.ariaHidden=tae;MP.hideSiblings=qOr;MP.showSiblings=zOr;var ROr=["template","script","style"],jOr=function(t){var r=t.nodeType,n=t.tagName;return r===1&&ROr.indexOf(n.toLowerCase())===-1},JXe=function(t,r,n){r=[].concat(r),[].forEach.call(t.children,function(o){r.indexOf(o)===-1&&jOr(o)&&n(o)})};function tae(e,t){t&&(e?t.setAttribute("aria-hidden","true"):t.removeAttribute("aria-hidden"))}function qOr(e,t){JXe(e,t,function(r){return tae(!0,r)})}function zOr(e,t){JXe(e,t,function(r){return tae(!1,r)})}});var nJe=N((T8,rJe)=>{"use strict";u();T8.__esModule=!0;var FOr=$Xe(),eJe=S8(FOr),UOr=Xz(),tJe=S8(UOr),BOr=Kie(),VOr=S8(BOr),GOr=eae(),HOr=S8(GOr),rae=QXe();function S8(e){return e&&e.__esModule?e:{default:e}}function WOr(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function $Or(e,t){var r=-1;return e.some(function(n,o){if(t(n,o))return r=o,!0}),r}function YOr(e,t){return $Or(e,function(r){return r.modals.indexOf(t)!==-1})}function ZOr(e,t){var r={overflow:"hidden"};e.style={overflow:t.style.overflow,paddingRight:t.style.paddingRight},e.overflowing&&(r.paddingRight=parseInt((0,tJe.default)(t,"paddingRight")||0,10)+(0,VOr.default)()+"px"),(0,tJe.default)(t,r)}function KOr(e,t){var r=e.style;Object.keys(r).forEach(function(n){return t.style[n]=r[n]})}var XOr=function e(){var t=this,r=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},n=r.hideSiblingNodes,o=n===void 0?!0:n,i=r.handleContainerOverflow,a=i===void 0?!0:i;WOr(this,e),this.add=function(c,h,m){var y=t.modals.indexOf(c),w=t.containers.indexOf(h);if(y!==-1)return y;if(y=t.modals.length,t.modals.push(c),t.hideSiblingNodes&&(0,rae.hideSiblings)(h,c.modalNode),w!==-1)return t.data[w].modals.push(c),y;var E={modals:[c],classes:m?m.split(/\s+/):[],overflowing:(0,HOr.default)(h)};return t.handleContainerOverflow&&ZOr(E,h),E.classes.forEach(eJe.default.addClass.bind(null,h)),t.containers.push(h),t.data.push(E),y},this.remove=function(c){var h=t.modals.indexOf(c);if(h!==-1){var m=YOr(t.data,c),y=t.data[m],w=t.containers[m];y.modals.splice(y.modals.indexOf(c),1),t.modals.splice(h,1),y.modals.length===0?(y.classes.forEach(eJe.default.removeClass.bind(null,w)),t.handleContainerOverflow&&KOr(y,w),t.hideSiblingNodes&&(0,rae.showSiblings)(w,c.modalNode),t.containers.splice(m,1),t.data.splice(m,1)):t.hideSiblingNodes&&(0,rae.ariaHidden)(!1,y.modals[y.modals.length-1].modalNode)}},this.isTopModal=function(c){return!!t.modals.length&&t.modals[t.modals.length-1]===c},this.hideSiblingNodes=o,this.handleContainerOverflow=a,this.modals=[],this.containers=[],this.data=[]};T8.default=XOr;rJe.exports=T8.default});var CP=N((I8,oJe)=>{"use strict";u();I8.__esModule=!0;I8.default=tPr;var JOr=ba(),QOr=ePr(JOr);function ePr(e){return e&&e.__esModule?e:{default:e}}function tPr(e,t){return e=typeof e=="function"?e():e,QOr.default.findDOMNode(e)||t}oJe.exports=I8.default});var pJe=N((M8,cJe)=>{"use strict";u();M8.__esModule=!0;var rPr=It(),nae=nT(rPr),nPr=TP(),oPr=nT(nPr),iPr=De(),iJe=nT(iPr),aPr=ba(),aJe=nT(aPr),sPr=CP(),sJe=nT(sPr),lPr=pb(),lJe=nT(lPr);function nT(e){return e&&e.__esModule?e:{default:e}}function uPr(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function uJe(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t&&(typeof t=="object"||typeof t=="function")?t:e}function cPr(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var oae=function(e){cPr(t,e);function t(){var r,n,o;uPr(this,t);for(var i=arguments.length,a=Array(i),c=0;c<i;c++)a[c]=arguments[c];return o=(r=(n=uJe(this,e.call.apply(e,[this].concat(a))),n),n._mountOverlayTarget=function(){n._overlayTarget||(n._overlayTarget=document.createElement("div"),n._portalContainerNode=(0,sJe.default)(n.props.container,(0,lJe.default)(n).body),n._portalContainerNode.appendChild(n._overlayTarget))},n._unmountOverlayTarget=function(){n._overlayTarget&&(n._portalContainerNode.removeChild(n._overlayTarget),n._overlayTarget=null),n._portalContainerNode=null},n._renderOverlay=function(){var h=n.props.children?iJe.default.Children.only(n.props.children):null;if(h!==null){n._mountOverlayTarget();var m=!n._overlayInstance;n._overlayInstance=aJe.default.unstable_renderSubtreeIntoContainer(n,h,n._overlayTarget,function(){m&&n.props.onRendered&&n.props.onRendered()})}else n._unrenderOverlay(),n._unmountOverlayTarget()},n._unrenderOverlay=function(){n._overlayTarget&&(aJe.default.unmountComponentAtNode(n._overlayTarget),n._overlayInstance=null)},n.getMountNode=function(){return n._overlayTarget},r),uJe(n,o)}return t.prototype.componentDidMount=function(){this._isMounted=!0,this._renderOverlay()},t.prototype.componentDidUpdate=function(){this._renderOverlay()},t.prototype.UNSAFE_componentWillReceiveProps=function(n){this._overlayTarget&&n.container!==this.props.container&&(this._portalContainerNode.removeChild(this._overlayTarget),this._portalContainerNode=(0,sJe.default)(n.container,(0,lJe.default)(this).body),this._portalContainerNode.appendChild(this._overlayTarget))},t.prototype.componentWillUnmount=function(){this._isMounted=!1,this._unrenderOverlay(),this._unmountOverlayTarget()},t.prototype.render=function(){return null},t}(iJe.default.Component);oae.displayName="Portal";oae.propTypes={container:nae.default.oneOfType([oPr.default,nae.default.func]),onRendered:nae.default.func};M8.default=oae;cJe.exports=M8.default});var lae=N((C8,dJe)=>{"use strict";u();C8.__esModule=!0;var pPr=em(),fPr=b0(pPr),dPr=It(),iae=b0(dPr),hPr=TP(),mPr=b0(hPr),gPr=De(),vPr=b0(gPr),yPr=ba(),aae=b0(yPr),_Pr=CP(),bPr=b0(_Pr),xPr=pb(),wPr=b0(xPr),EPr=pJe(),SPr=b0(EPr);function b0(e){return e&&e.__esModule?e:{default:e}}function TPr(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function fJe(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t&&(typeof t=="object"||typeof t=="function")?t:e}function IPr(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var sae=function(e){IPr(t,e);function t(){var r,n,o;TPr(this,t);for(var i=arguments.length,a=Array(i),c=0;c<i;c++)a[c]=arguments[c];return o=(r=(n=fJe(this,e.call.apply(e,[this].concat(a))),n),n.getMountNode=function(){return n._portalContainerNode},r),fJe(n,o)}return t.prototype.UNSAFE_componentWillMount=function(){if(fPr.default){var n=this.props.container;typeof n=="function"&&(n=n()),!(n&&!aae.default.findDOMNode(n))&&this.setContainer(n)}},t.prototype.componentDidMount=function(){this._portalContainerNode?this.props.onRendered&&this.props.onRendered():(this.setContainer(this.props.container),this.forceUpdate(this.props.onRendered))},t.prototype.UNSAFE_componentWillReceiveProps=function(n){n.container!==this.props.container&&this.setContainer(n.container)},t.prototype.componentWillUnmount=function(){this._portalContainerNode=null},t.prototype.setContainer=function(n){this._portalContainerNode=(0,bPr.default)(n,(0,wPr.default)(this).body)},t.prototype.render=function(){return this.props.children&&this._portalContainerNode?aae.default.createPortal(this.props.children,this._portalContainerNode):null},t}(vPr.default.Component);sae.displayName="Portal";sae.propTypes={container:iae.default.oneOfType([mPr.default,iae.default.func]),onRendered:iae.default.func};C8.default=aae.default.createPortal?sae:SPr.default;dJe.exports=C8.default});var vJe=N((A8,gJe)=>{"use strict";u();A8.__esModule=!0;var MPr=It(),CPr=hJe(MPr),APr=De(),OPr=hJe(APr);function hJe(e){return e&&e.__esModule?e:{default:e}}function PPr(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function DPr(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t&&(typeof t=="object"||typeof t=="function")?t:e}function NPr(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var LPr={children:CPr.default.node},mJe=function(e){NPr(t,e);function t(){return PPr(this,t),DPr(this,e.apply(this,arguments))}return t.prototype.render=function(){return this.props.children},t}(OPr.default.Component);mJe.propTypes=LPr;A8.default=mJe;gJe.exports=A8.default});var _Je=N((O8,yJe)=>{"use strict";u();O8.__esModule=!0;O8.default=kPr;function kPr(e){var t=!document.addEventListener,r=void 0;return t?(document.attachEvent("onfocusin",e),r=function(){return document.detachEvent("onfocusin",e)}):(document.addEventListener("focus",e,!0),r=function(){return document.removeEventListener("focus",e,!0)}),{remove:r}}yJe.exports=O8.default});var AJe=N((D8,CJe)=>{"use strict";u();D8.__esModule=!0;var EJe=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},RPr=UKe(),uae=jl(RPr),jPr=_P(),SJe=jl(jPr),qPr=em(),zPr=jl(qPr),FPr=It(),Gi=jl(FPr),UPr=TP(),BPr=jl(UPr),VPr=jXe(),GPr=jl(VPr),HPr=Oc(),bJe=jl(HPr),TJe=De(),x0=jl(TJe),WPr=ba(),$Pr=jl(WPr),YPr=ab(),ZPr=jl(YPr),KPr=nJe(),IJe=jl(KPr),XPr=lae(),MJe=jl(XPr),JPr=vJe(),QPr=jl(JPr),e4r=Rie(),xJe=jl(e4r),t4r=_Je(),r4r=jl(t4r),n4r=CP(),o4r=jl(n4r),i4r=pb(),cae=jl(i4r);function jl(e){return e&&e.__esModule?e:{default:e}}function a4r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function wJe(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t&&(typeof t=="object"||typeof t=="function")?t:e}function s4r(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var l4r=new IJe.default,P8=function(e){s4r(t,e);function t(){var r,n,o;a4r(this,t);for(var i=arguments.length,a=Array(i),c=0;c<i;c++)a[c]=arguments[c];return o=(r=(n=wJe(this,e.call.apply(e,[this].concat(a))),n),u4r.call(n),r),wJe(n,o)}return t.prototype.omitProps=function(n,o){var i=Object.keys(n),a={};return i.map(function(c){Object.prototype.hasOwnProperty.call(o,c)||(a[c]=n[c])}),a},t.prototype.render=function(){var n=this.props,o=n.show,i=n.container,a=n.children,c=n.transition,h=n.backdrop,m=n.className,y=n.style,w=n.onExit,E=n.onExiting,A=n.onEnter,P=n.onEntering,j=n.onEntered,D=x0.default.Children.only(a),k=this.omitProps(this.props,t.propTypes),z=o||c&&!this.state.exited;if(!z)return null;var V=D.props,G=V.role,K=V.tabIndex;return(G===void 0||K===void 0)&&(D=(0,TJe.cloneElement)(D,{role:G===void 0?"document":G,tabIndex:K==null?"-1":K})),c&&(D=x0.default.createElement(c,{appear:!0,unmountOnExit:!0,in:o,onExit:w,onExiting:E,onExited:this.handleHidden,onEnter:A,onEntering:P,onEntered:j},D)),x0.default.createElement(MJe.default,{ref:this.setMountNode,container:i,onRendered:this.onPortalRendered},x0.default.createElement("div",EJe({ref:this.setModalNodeRef,role:G||"dialog"},k,{style:y,className:m}),h&&this.renderBackdrop(),x0.default.createElement(QPr.default,{ref:this.setDialogRef},D)))},t.prototype.UNSAFE_componentWillReceiveProps=function(n){n.show?this.setState({exited:!1}):n.transition||this.setState({exited:!0})},t.prototype.UNSAFE_componentWillUpdate=function(n){!this.props.show&&n.show&&this.checkForFocus()},t.prototype.componentDidMount=function(){this._isMounted=!0,this.props.show&&this.onShow()},t.prototype.componentDidUpdate=function(n){var o=this.props.transition;n.show&&!this.props.show&&!o?this.onHide():!n.show&&this.props.show&&this.onShow()},t.prototype.componentWillUnmount=function(){var n=this.props,o=n.show,i=n.transition;this._isMounted=!1,(o||i&&!this.state.exited)&&this.onHide()},t.prototype.autoFocus=function(){if(this.props.autoFocus){var n=this.getDialogElement(),o=(0,uae.default)((0,cae.default)(this));n&&!(0,SJe.default)(n,o)&&(this.lastFocus=o,n.hasAttribute("tabIndex")||((0,ZPr.default)(!1,"The modal content node does not accept focus. For the benefit of assistive technologies, the tabIndex of the node is being set to \"-1\"."),n.setAttribute("tabIndex",-1)),n.focus())}},t.prototype.restoreLastFocus=function(){this.lastFocus&&this.lastFocus.focus&&(this.lastFocus.focus(),this.lastFocus=null)},t.prototype.getDialogElement=function(){return $Pr.default.findDOMNode(this.dialog)},t.prototype.isTopModal=function(){return this.props.manager.isTopModal(this)},t}(x0.default.Component);P8.propTypes=EJe({},MJe.default.propTypes,{show:Gi.default.bool,container:Gi.default.oneOfType([BPr.default,Gi.default.func]),onShow:Gi.default.func,onHide:Gi.default.func,backdrop:Gi.default.oneOfType([Gi.default.bool,Gi.default.oneOf(["static"])]),renderBackdrop:Gi.default.func,onEscapeKeyDown:Gi.default.func,onEscapeKeyUp:(0,GPr.default)(Gi.default.func,"Please use onEscapeKeyDown instead for consistency"),onBackdropClick:Gi.default.func,backdropStyle:Gi.default.object,backdropClassName:Gi.default.string,containerClassName:Gi.default.string,keyboard:Gi.default.bool,transition:bJe.default,backdropTransition:bJe.default,autoFocus:Gi.default.bool,enforceFocus:Gi.default.bool,restoreFocus:Gi.default.bool,onEnter:Gi.default.func,onEntering:Gi.default.func,onEntered:Gi.default.func,onExit:Gi.default.func,onExiting:Gi.default.func,onExited:Gi.default.func,manager:Gi.default.object.isRequired});P8.defaultProps={show:!1,backdrop:!0,keyboard:!0,autoFocus:!0,enforceFocus:!0,restoreFocus:!0,onHide:function(){},manager:l4r,renderBackdrop:function(t){return x0.default.createElement("div",t)}};var u4r=function(){var t=this;this.state={exited:!this.props.show},this.renderBackdrop=function(){var r=t.props,n=r.backdropStyle,o=r.backdropClassName,i=r.renderBackdrop,a=r.backdropTransition,c=function(y){return t.backdrop=y},h=i({ref:c,style:n,className:o,onClick:t.handleBackdropClick});return a&&(h=x0.default.createElement(a,{appear:!0,in:t.props.show},h)),h},this.onPortalRendered=function(){t.autoFocus(),t.props.onShow&&t.props.onShow()},this.onShow=function(){var r=(0,cae.default)(t),n=(0,o4r.default)(t.props.container,r.body);t.props.manager.add(t,n,t.props.containerClassName),t._onDocumentKeydownListener=(0,xJe.default)(r,"keydown",t.handleDocumentKeyDown),t._onDocumentKeyupListener=(0,xJe.default)(r,"keyup",t.handleDocumentKeyUp),t._onFocusinListener=(0,r4r.default)(t.enforceFocus)},this.onHide=function(){t.props.manager.remove(t),t._onDocumentKeydownListener.remove(),t._onDocumentKeyupListener.remove(),t._onFocusinListener.remove(),t.props.restoreFocus&&t.restoreLastFocus()},this.setMountNode=function(r){t.mountNode=r&&r.getMountNode()},this.setModalNodeRef=function(r){t.modalNode=r},this.setDialogRef=function(r){t.dialog=r},this.handleHidden=function(){if(t.setState({exited:!0}),t.onHide(),t.props.onExited){var r;(r=t.props).onExited.apply(r,arguments)}},this.handleBackdropClick=function(r){r.target===r.currentTarget&&(t.props.onBackdropClick&&t.props.onBackdropClick(r),t.props.backdrop===!0&&t.props.onHide())},this.handleDocumentKeyDown=function(r){t.props.keyboard&&r.keyCode===27&&t.isTopModal()&&(t.props.onEscapeKeyDown&&t.props.onEscapeKeyDown(r),t.props.onHide())},this.handleDocumentKeyUp=function(r){t.props.keyboard&&r.keyCode===27&&t.isTopModal()&&t.props.onEscapeKeyUp&&t.props.onEscapeKeyUp(r)},this.checkForFocus=function(){zPr.default&&(t.lastFocus=(0,uae.default)())},this.enforceFocus=function(){if(!(!t.props.enforceFocus||!t._isMounted||!t.isTopModal())){var r=t.getDialogElement(),n=(0,uae.default)((0,cae.default)(t));r&&!(0,SJe.default)(r,n)&&r.focus()}}};P8.Manager=IJe.default;D8.default=P8;CJe.exports=D8.default});var Sae=N((q8,KJe)=>{"use strict";u();var Eae=Xa();q8.__esModule=!0;q8.default=N4r;var O4r=Eae(_P()),P4r=Eae(IP()),D4r=Eae(ub());function N4r(e){var t=(0,D4r.default)(e),r=(0,P4r.default)(t),n=t&&t.documentElement,o={top:0,left:0,height:0,width:0};if(t)return(0,O4r.default)(n,e)&&(e.getBoundingClientRect!==void 0&&(o=e.getBoundingClientRect()),o={top:o.top+(r.pageYOffset||n.scrollTop)-(n.clientTop||0),left:o.left+(r.pageXOffset||n.scrollLeft)-(n.clientLeft||0),width:(o.width==null?e.offsetWidth:o.width)||0,height:(o.height==null?e.offsetHeight:o.height)||0}),o}KJe.exports=q8.default});var XJe=N((RQn,Hg)=>{u();function Tae(){return Hg.exports=Tae=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},Hg.exports.__esModule=!0,Hg.exports.default=Hg.exports,Tae.apply(null,arguments)}Hg.exports=Tae,Hg.exports.__esModule=!0,Hg.exports.default=Hg.exports});var eQe=N((z8,QJe)=>{"use strict";u();var JJe=Xa();z8.__esModule=!0;z8.default=j4r;var L4r=JJe(ub()),k4r=JJe(Xz());function R4r(e){return e.nodeName&&e.nodeName.toLowerCase()}function j4r(e){for(var t=(0,L4r.default)(e),r=e&&e.offsetParent;r&&R4r(e)!=="html"&&(0,k4r.default)(r,"position")==="static";)r=r.offsetParent;return r||t.documentElement}QJe.exports=z8.default});var Iae=N((F8,tQe)=>{"use strict";u();var q4r=Xa();F8.__esModule=!0;F8.default=F4r;var z4r=q4r(IP());function F4r(e,t){var r=(0,z4r.default)(e);if(t===void 0)return r?"pageYOffset"in r?r.pageYOffset:r.document.documentElement.scrollTop:e.scrollTop;r?r.scrollTo("pageXOffset"in r?r.pageXOffset:r.document.documentElement.scrollLeft,t):e.scrollTop=t}tQe.exports=F8.default});var nQe=N((U8,rQe)=>{"use strict";u();var U4r=Xa();U8.__esModule=!0;U8.default=V4r;var B4r=U4r(IP());function V4r(e,t){var r=(0,B4r.default)(e);if(t===void 0)return r?"pageXOffset"in r?r.pageXOffset:r.document.documentElement.scrollLeft:e.scrollLeft;r?r.scrollTo(t,"pageYOffset"in r?r.pageYOffset:r.document.documentElement.scrollTop):e.scrollLeft=t}rQe.exports=U8.default});var aQe=N((B8,iQe)=>{"use strict";u();var sT=Xa();B8.__esModule=!0;B8.default=Z4r;var G4r=sT(XJe()),oQe=sT(Sae()),H4r=sT(eQe()),W4r=sT(Iae()),$4r=sT(nQe()),RP=sT(Xz());function Y4r(e){return e.nodeName&&e.nodeName.toLowerCase()}function Z4r(e,t){var r={top:0,left:0},n;return(0,RP.default)(e,"position")==="fixed"?n=e.getBoundingClientRect():(t=t||(0,H4r.default)(e),n=(0,oQe.default)(e),Y4r(t)!=="html"&&(r=(0,oQe.default)(t)),r.top+=parseInt((0,RP.default)(t,"borderTopWidth"),10)-(0,W4r.default)(t)||0,r.left+=parseInt((0,RP.default)(t,"borderLeftWidth"),10)-(0,$4r.default)(t)||0),(0,G4r.default)({},n,{top:n.top-r.top-(parseInt((0,RP.default)(e,"marginTop"),10)||0),left:n.left-r.left-(parseInt((0,RP.default)(e,"marginLeft"),10)||0)})}iQe.exports=B8.default});var uQe=N((G8,lQe)=>{"use strict";u();G8.__esModule=!0;G8.default=oDr;var K4r=Sae(),Cae=V8(K4r),X4r=aQe(),J4r=V8(X4r),Q4r=Iae(),Mae=V8(Q4r),eDr=pb(),tDr=V8(eDr);function V8(e){return e&&e.__esModule?e:{default:e}}function sQe(e){var t=void 0,r=void 0,n=void 0;if(e.tagName==="BODY")t=window.innerWidth,r=window.innerHeight,n=(0,Mae.default)((0,tDr.default)(e).documentElement)||(0,Mae.default)(e);else{var o=(0,Cae.default)(e);t=o.width,r=o.height,n=(0,Mae.default)(e)}return{width:t,height:r,scroll:n}}function rDr(e,t,r,n){var o=sQe(r),i=o.scroll,a=o.height,c=e-n-i,h=e+n-i+t;return c<0?-c:h>a?a-h:0}function nDr(e,t,r,n){var o=sQe(r),i=o.width,a=e-n,c=e+n+t;return a<0?-a:c>i?i-c:0}function oDr(e,t,r,n,o){var i=n.tagName==="BODY"?(0,Cae.default)(r):(0,J4r.default)(r,n),a=(0,Cae.default)(t),c=a.height,h=a.width,m=void 0,y=void 0,w=void 0,E=void 0;if(e==="left"||e==="right"){y=i.top+(i.height-c)/2,e==="left"?m=i.left-h:m=i.left+i.width;var A=rDr(y,c,n,o);y+=A,E=50*(1-2*A/c)+"%",w=void 0}else if(e==="top"||e==="bottom"){m=i.left+(i.width-h)/2,e==="top"?y=i.top-c:y=i.top+i.height;var P=nDr(m,h,n,o);m+=P,w=50*(1-2*P/h)+"%",E=void 0}else throw new Error("calcOverlayPosition(): No such placement of \""+e+"\" found.");return{positionLeft:m,positionTop:y,arrowOffsetLeft:w,arrowOffsetTop:E}}lQe.exports=G8.default});var vQe=N((W8,gQe)=>{"use strict";u();W8.__esModule=!0;var cQe=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},iDr=Uo(),aDr=E0(iDr),sDr=It(),db=E0(sDr),lDr=TP(),pQe=E0(lDr),mQe=De(),fQe=E0(mQe),uDr=ba(),dQe=E0(uDr),cDr=uQe(),pDr=E0(cDr),fDr=CP(),dDr=E0(fDr),hDr=pb(),mDr=E0(hDr);function E0(e){return e&&e.__esModule?e:{default:e}}function hQe(e,t){var r={};for(var n in e)t.indexOf(n)>=0||Object.prototype.hasOwnProperty.call(e,n)&&(r[n]=e[n]);return r}function gDr(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function vDr(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t&&(typeof t=="object"||typeof t=="function")?t:e}function yDr(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var H8=function(e){yDr(t,e);function t(r,n){gDr(this,t);var o=vDr(this,e.call(this,r,n));return o.getTarget=function(){var i=o.props.target,a=typeof i=="function"?i():i;return a&&dQe.default.findDOMNode(a)||null},o.maybeUpdatePosition=function(i){var a=o.getTarget();!o.props.shouldUpdatePosition&&a===o._lastTarget&&!i||o.updatePosition(a)},o.state={positionLeft:0,positionTop:0,arrowOffsetLeft:null,arrowOffsetTop:null},o._needsFlush=!1,o._lastTarget=null,o}return t.prototype.componentDidMount=function(){this.updatePosition(this.getTarget())},t.prototype.UNSAFE_componentWillReceiveProps=function(){this._needsFlush=!0},t.prototype.componentDidUpdate=function(n){this._needsFlush&&(this._needsFlush=!1,this.maybeUpdatePosition(this.props.placement!==n.placement))},t.prototype.render=function(){var n=this.props,o=n.children,i=n.className,a=hQe(n,["children","className"]),c=this.state,h=c.positionLeft,m=c.positionTop,y=hQe(c,["positionLeft","positionTop"]);delete a.target,delete a.container,delete a.containerPadding,delete a.shouldUpdatePosition;var w=fQe.default.Children.only(o);return(0,mQe.cloneElement)(w,cQe({},a,y,{positionLeft:h,positionTop:m,className:(0,aDr.default)(i,w.props.className),style:cQe({},w.props.style,{left:h,top:m})}))},t.prototype.updatePosition=function(n){if(this._lastTarget=n,!n){this.setState({positionLeft:0,positionTop:0,arrowOffsetLeft:null,arrowOffsetTop:null});return}var o=dQe.default.findDOMNode(this),i=(0,dDr.default)(this.props.container,(0,mDr.default)(this).body);this.setState((0,pDr.default)(this.props.placement,o,n,i,this.props.containerPadding))},t}(fQe.default.Component);H8.propTypes={target:db.default.oneOfType([pQe.default,db.default.func]),container:db.default.oneOfType([pQe.default,db.default.func]),containerPadding:db.default.number,placement:db.default.oneOf(["top","right","bottom","left"]),shouldUpdatePosition:db.default.bool};H8.displayName="Position";H8.defaultProps={containerPadding:0,placement:"right",shouldUpdatePosition:!1};W8.default=H8;gQe.exports=W8.default});var EQe=N(($8,wQe)=>{"use strict";u();$8.__esModule=!0;var _Dr=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},bDr=It(),Wg=lT(bDr),xDr=Oc(),wDr=lT(xDr),EDr=De(),jP=lT(EDr),SDr=lae(),yQe=lT(SDr),TDr=vQe(),_Qe=lT(TDr),IDr=oXe(),bQe=lT(IDr);function lT(e){return e&&e.__esModule?e:{default:e}}function MDr(e,t){var r={};for(var n in e)t.indexOf(n)>=0||Object.prototype.hasOwnProperty.call(e,n)&&(r[n]=e[n]);return r}function CDr(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function ADr(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t&&(typeof t=="object"||typeof t=="function")?t:e}function ODr(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var xQe=function(e){ODr(t,e);function t(r,n){CDr(this,t);var o=ADr(this,e.call(this,r,n));return o.handleHidden=function(){if(o.setState({exited:!0}),o.props.onExited){var i;(i=o.props).onExited.apply(i,arguments)}},o.state={exited:!r.show},o.onHiddenListener=o.handleHidden.bind(o),o}return t.prototype.UNSAFE_componentWillReceiveProps=function(n){n.show?this.setState({exited:!1}):n.transition||this.setState({exited:!0})},t.prototype.render=function(){var n=this.props,o=n.container,i=n.containerPadding,a=n.target,c=n.placement,h=n.shouldUpdatePosition,m=n.rootClose,y=n.children,w=n.transition,E=MDr(n,["container","containerPadding","target","placement","shouldUpdatePosition","rootClose","children","transition"]),A=E.show||w&&!this.state.exited;if(!A)return null;var P=y;if(P=jP.default.createElement(_Qe.default,{container:o,containerPadding:i,target:a,placement:c,shouldUpdatePosition:h},P),w){var j=E.onExit,D=E.onExiting,k=E.onEnter,z=E.onEntering,V=E.onEntered;P=jP.default.createElement(w,{in:E.show,appear:!0,onExit:j,onExiting:D,onExited:this.onHiddenListener,onEnter:k,onEntering:z,onEntered:V},P)}return m&&(P=jP.default.createElement(bQe.default,{onRootClose:E.onHide,event:E.rootCloseEvent},P)),jP.default.createElement(yQe.default,{container:o},P)},t}(jP.default.Component);xQe.propTypes=_Dr({},yQe.default.propTypes,_Qe.default.propTypes,{show:Wg.default.bool,rootClose:Wg.default.bool,rootCloseEvent:bQe.default.propTypes.event,onHide:function(t){var r=Wg.default.func;t.rootClose&&(r=r.isRequired);for(var n=arguments.length,o=Array(n>1?n-1:0),i=1;i<n;i++)o[i-1]=arguments[i];return r.apply(void 0,[t].concat(o))},transition:wDr.default,onEnter:Wg.default.func,onEntering:Wg.default.func,onEntered:Wg.default.func,onExit:Wg.default.func,onExiting:Wg.default.func,onExited:Wg.default.func});$8.default=xQe;wQe.exports=$8.default});var Ptt=N((rio,ev)=>{u();function Ose(e,t){return ev.exports=Ose=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(r,n){return r.__proto__=n,r},ev.exports.__esModule=!0,ev.exports.default=ev.exports,Ose(e,t)}ev.exports=Ose,ev.exports.__esModule=!0,ev.exports.default=ev.exports});var Pse=N((oio,c4)=>{u();var J5r=Ptt();function Q5r(e,t){e.prototype=Object.create(t.prototype),e.prototype.constructor=e,J5r(e,t)}c4.exports=Q5r,c4.exports.__esModule=!0,c4.exports.default=c4.exports});var Nse=N(Dse=>{"use strict";u();Object.defineProperty(Dse,"__esModule",{value:!0});function eLr(e){if(e.sheet)return e.sheet;for(var t=0;t<document.styleSheets.length;t++)if(document.styleSheets[t].ownerNode===e)return document.styleSheets[t]}function tLr(e){var t=document.createElement("style");return t.setAttribute("data-emotion",e.key),e.nonce!==void 0&&t.setAttribute("nonce",e.nonce),t.appendChild(document.createTextNode("")),t}var rLr=function(){function e(r){this.isSpeedy=r.speedy===void 0?!0:r.speedy,this.tags=[],this.ctr=0,this.nonce=r.nonce,this.key=r.key,this.container=r.container,this.before=null}var t=e.prototype;return t.insert=function(n){if(this.ctr%(this.isSpeedy?65e3:1)===0){var o=tLr(this),i;this.tags.length===0?i=this.before:i=this.tags[this.tags.length-1].nextSibling,this.container.insertBefore(o,i),this.tags.push(o)}var a=this.tags[this.tags.length-1];if(this.isSpeedy){var c=eLr(a);try{var h=n.charCodeAt(1)===105&&n.charCodeAt(0)===64;c.insertRule(n,h?0:c.cssRules.length)}catch(m){}}else a.appendChild(document.createTextNode(n));this.ctr++},t.flush=function(){this.tags.forEach(function(n){return n.parentNode.removeChild(n)}),this.tags=[],this.ctr=0},e}();Dse.StyleSheet=rLr});var Dtt=N(Lse=>{"use strict";u();Object.defineProperty(Lse,"__esModule",{value:!0});function nLr(e){function t(et,pt,ot,We,Ne){for(var Ke=0,Ge=0,ft=0,mt=0,Ot,At,Mt=0,Yt=0,qt,Ut=qt=Ot=0,sr=0,jr=0,Pr=0,br=0,Dr=ot.length,ke=Dr-1,Je,tt="",Ft="",Wt="",xe="",J;sr<Dr;){if(At=ot.charCodeAt(sr),sr===ke&&Ge+mt+ft+Ke!==0&&(Ge!==0&&(At=Ge===47?10:47),mt=ft=Ke=0,Dr++,ke++),Ge+mt+ft+Ke===0){if(sr===ke&&(0<jr&&(tt=tt.replace(E,"")),0<tt.trim().length)){switch(At){case 32:case 9:case 59:case 13:case 10:break;default:tt+=ot.charAt(sr)}At=59}switch(At){case 123:for(tt=tt.trim(),Ot=tt.charCodeAt(0),qt=1,br=++sr;sr<Dr;){switch(At=ot.charCodeAt(sr)){case 123:qt++;break;case 125:qt--;break;case 47:switch(At=ot.charCodeAt(sr+1)){case 42:case 47:e:{for(Ut=sr+1;Ut<ke;++Ut)switch(ot.charCodeAt(Ut)){case 47:if(At===42&&ot.charCodeAt(Ut-1)===42&&sr+2!==Ut){sr=Ut+1;break e}break;case 10:if(At===47){sr=Ut+1;break e}}sr=Ut}}break;case 91:At++;case 40:At++;case 34:case 39:for(;sr++<ke&&ot.charCodeAt(sr)!==At;);}if(qt===0)break;sr++}switch(qt=ot.substring(br,sr),Ot===0&&(Ot=(tt=tt.replace(w,"").trim()).charCodeAt(0)),Ot){case 64:switch(0<jr&&(tt=tt.replace(E,"")),At=tt.charCodeAt(1),At){case 100:case 109:case 115:case 45:jr=pt;break;default:jr=rt}if(qt=t(pt,jr,qt,At,Ne+1),br=qt.length,0<qe&&(jr=r(rt,tt,Pr),J=c(3,qt,jr,pt,de,_e,br,At,Ne,We),tt=jr.join(""),J!==void 0&&(br=(qt=J.trim()).length)===0&&(At=0,qt="")),0<br)switch(At){case 115:tt=tt.replace(Z,a);case 100:case 109:case 45:qt=tt+"{"+qt+"}";break;case 107:tt=tt.replace(z,"$1 $2"),qt=tt+"{"+qt+"}",qt=Ye===1||Ye===2&&i("@"+qt,3)?"@-webkit-"+qt+"@"+qt:"@"+qt;break;default:qt=tt+qt,We===112&&(qt=(Ft+=qt,""))}else qt="";break;default:qt=t(pt,r(pt,tt,Pr),qt,We,Ne+1)}Wt+=qt,qt=Pr=jr=Ut=Ot=0,tt="",At=ot.charCodeAt(++sr);break;case 125:case 59:if(tt=(0<jr?tt.replace(E,""):tt).trim(),1<(br=tt.length))switch(Ut===0&&(Ot=tt.charCodeAt(0),Ot===45||96<Ot&&123>Ot)&&(br=(tt=tt.replace(" ",":")).length),0<qe&&(J=c(1,tt,pt,et,de,_e,Ft.length,We,Ne,We))!==void 0&&(br=(tt=J.trim()).length)===0&&(tt="\0\0"),Ot=tt.charCodeAt(0),At=tt.charCodeAt(1),Ot){case 0:break;case 64:if(At===105||At===99){xe+=tt+ot.charAt(sr);break}default:tt.charCodeAt(br-1)!==58&&(Ft+=o(tt,Ot,At,tt.charCodeAt(2)))}Pr=jr=Ut=Ot=0,tt="",At=ot.charCodeAt(++sr)}}switch(At){case 13:case 10:Ge===47?Ge=0:1+Ot===0&&We!==107&&0<tt.length&&(jr=1,tt+="\0"),0<qe*bt&&c(0,tt,pt,et,de,_e,Ft.length,We,Ne,We),_e=1,de++;break;case 59:case 125:if(Ge+mt+ft+Ke===0){_e++;break}default:switch(_e++,Je=ot.charAt(sr),At){case 9:case 32:if(mt+Ke+Ge===0)switch(Mt){case 44:case 58:case 9:case 32:Je="";break;default:At!==32&&(Je=" ")}break;case 0:Je="\\0";break;case 12:Je="\\f";break;case 11:Je="\\v";break;case 38:mt+Ge+Ke===0&&(jr=Pr=1,Je="\f"+Je);break;case 108:if(mt+Ge+Ke+Ce===0&&0<Ut)switch(sr-Ut){case 2:Mt===112&&ot.charCodeAt(sr-3)===58&&(Ce=Mt);case 8:Yt===111&&(Ce=Yt)}break;case 58:mt+Ge+Ke===0&&(Ut=sr);break;case 44:Ge+ft+mt+Ke===0&&(jr=1,Je+="\r");break;case 34:case 39:Ge===0&&(mt=mt===At?0:mt===0?At:mt);break;case 91:mt+Ge+ft===0&&Ke++;break;case 93:mt+Ge+ft===0&&Ke--;break;case 41:mt+Ge+Ke===0&&ft--;break;case 40:if(mt+Ge+Ke===0){if(Ot===0)switch(2*Mt+3*Yt){case 533:break;default:Ot=1}ft++}break;case 64:Ge+ft+mt+Ke+Ut+qt===0&&(qt=1);break;case 42:case 47:if(!(0<mt+Ke+ft))switch(Ge){case 0:switch(2*At+3*ot.charCodeAt(sr+1)){case 235:Ge=47;break;case 220:br=sr,Ge=42}break;case 42:At===47&&Mt===42&&br+2!==sr&&(ot.charCodeAt(br+2)===33&&(Ft+=ot.substring(br,sr+1)),Je="",Ge=0)}}Ge===0&&(tt+=Je)}Yt=Mt,Mt=At,sr++}if(br=Ft.length,0<br){if(jr=pt,0<qe&&(J=c(2,Ft,jr,et,de,_e,br,We,Ne,We),J!==void 0&&(Ft=J).length===0))return xe+Ft+Wt;if(Ft=jr.join(",")+"{"+Ft+"}",Ye*Ce!==0){switch(Ye!==2||i(Ft,2)||(Ce=0),Ce){case 111:Ft=Ft.replace(G,":-moz-$1")+Ft;break;case 112:Ft=Ft.replace(V,"::-webkit-input-$1")+Ft.replace(V,"::-moz-$1")+Ft.replace(V,":-ms-input-$1")+Ft}Ce=0}}return xe+Ft+Wt}function r(et,pt,ot){var We=pt.trim().split(D);pt=We;var Ne=We.length,Ke=et.length;switch(Ke){case 0:case 1:var Ge=0;for(et=Ke===0?"":et[0]+" ";Ge<Ne;++Ge)pt[Ge]=n(et,pt[Ge],ot).trim();break;default:var ft=Ge=0;for(pt=[];Ge<Ne;++Ge)for(var mt=0;mt<Ke;++mt)pt[ft++]=n(et[mt]+" ",We[Ge],ot).trim()}return pt}function n(et,pt,ot){var We=pt.charCodeAt(0);switch(33>We&&(We=(pt=pt.trim()).charCodeAt(0)),We){case 38:return pt.replace(k,"$1"+et.trim());case 58:return et.trim()+pt.replace(k,"$1"+et.trim());default:if(0<1*ot&&0<pt.indexOf("\f"))return pt.replace(k,(et.charCodeAt(0)===58?"":"$1")+et.trim())}return et+pt}function o(et,pt,ot,We){var Ne=et+";",Ke=2*pt+3*ot+4*We;if(Ke===944){et=Ne.indexOf(":",9)+1;var Ge=Ne.substring(et,Ne.length-1).trim();return Ge=Ne.substring(0,et).trim()+Ge+";",Ye===1||Ye===2&&i(Ge,1)?"-webkit-"+Ge+Ge:Ge}if(Ye===0||Ye===2&&!i(Ne,1))return Ne;switch(Ke){case 1015:return Ne.charCodeAt(10)===97?"-webkit-"+Ne+Ne:Ne;case 951:return Ne.charCodeAt(3)===116?"-webkit-"+Ne+Ne:Ne;case 963:return Ne.charCodeAt(5)===110?"-webkit-"+Ne+Ne:Ne;case 1009:if(Ne.charCodeAt(4)!==100)break;case 969:case 942:return"-webkit-"+Ne+Ne;case 978:return"-webkit-"+Ne+"-moz-"+Ne+Ne;case 1019:case 983:return"-webkit-"+Ne+"-moz-"+Ne+"-ms-"+Ne+Ne;case 883:if(Ne.charCodeAt(8)===45)return"-webkit-"+Ne+Ne;if(0<Ne.indexOf("image-set(",11))return Ne.replace(me,"$1-webkit-$2")+Ne;break;case 932:if(Ne.charCodeAt(4)===45)switch(Ne.charCodeAt(5)){case 103:return"-webkit-box-"+Ne.replace("-grow","")+"-webkit-"+Ne+"-ms-"+Ne.replace("grow","positive")+Ne;case 115:return"-webkit-"+Ne+"-ms-"+Ne.replace("shrink","negative")+Ne;case 98:return"-webkit-"+Ne+"-ms-"+Ne.replace("basis","preferred-size")+Ne}return"-webkit-"+Ne+"-ms-"+Ne+Ne;case 964:return"-webkit-"+Ne+"-ms-flex-"+Ne+Ne;case 1023:if(Ne.charCodeAt(8)!==99)break;return Ge=Ne.substring(Ne.indexOf(":",15)).replace("flex-","").replace("space-between","justify"),"-webkit-box-pack"+Ge+"-webkit-"+Ne+"-ms-flex-pack"+Ge+Ne;case 1005:return P.test(Ne)?Ne.replace(A,":-webkit-")+Ne.replace(A,":-moz-")+Ne:Ne;case 1e3:switch(Ge=Ne.substring(13).trim(),pt=Ge.indexOf("-")+1,Ge.charCodeAt(0)+Ge.charCodeAt(pt)){case 226:Ge=Ne.replace(K,"tb");break;case 232:Ge=Ne.replace(K,"tb-rl");break;case 220:Ge=Ne.replace(K,"lr");break;default:return Ne}return"-webkit-"+Ne+"-ms-"+Ge+Ne;case 1017:if(Ne.indexOf("sticky",9)===-1)break;case 975:switch(pt=(Ne=et).length-10,Ge=(Ne.charCodeAt(pt)===33?Ne.substring(0,pt):Ne).substring(et.indexOf(":",7)+1).trim(),Ke=Ge.charCodeAt(0)+(Ge.charCodeAt(7)|0)){case 203:if(111>Ge.charCodeAt(8))break;case 115:Ne=Ne.replace(Ge,"-webkit-"+Ge)+";"+Ne;break;case 207:case 102:Ne=Ne.replace(Ge,"-webkit-"+(102<Ke?"inline-":"")+"box")+";"+Ne.replace(Ge,"-webkit-"+Ge)+";"+Ne.replace(Ge,"-ms-"+Ge+"box")+";"+Ne}return Ne+";";case 938:if(Ne.charCodeAt(5)===45)switch(Ne.charCodeAt(6)){case 105:return Ge=Ne.replace("-items",""),"-webkit-"+Ne+"-webkit-box-"+Ge+"-ms-flex-"+Ge+Ne;case 115:return"-webkit-"+Ne+"-ms-flex-item-"+Ne.replace(se,"")+Ne;default:return"-webkit-"+Ne+"-ms-flex-line-pack"+Ne.replace("align-content","").replace(se,"")+Ne}break;case 973:case 989:if(Ne.charCodeAt(3)!==45||Ne.charCodeAt(4)===122)break;case 931:case 953:if(pe.test(et)===!0)return(Ge=et.substring(et.indexOf(":")+1)).charCodeAt(0)===115?o(et.replace("stretch","fill-available"),pt,ot,We).replace(":fill-available",":stretch"):Ne.replace(Ge,"-webkit-"+Ge)+Ne.replace(Ge,"-moz-"+Ge.replace("fill-",""))+Ne;break;case 962:if(Ne="-webkit-"+Ne+(Ne.charCodeAt(5)===102?"-ms-"+Ne:"")+Ne,ot+We===211&&Ne.charCodeAt(13)===105&&0<Ne.indexOf("transform",10))return Ne.substring(0,Ne.indexOf(";",27)+1).replace(j,"$1-webkit-$2")+Ne}return Ne}function i(et,pt){var ot=et.indexOf(pt===1?":":"{"),We=et.substring(0,pt!==3?ot:10);return ot=et.substring(ot+1,et.length-1),lt(pt!==2?We:We.replace(le,"$1"),ot,pt)}function a(et,pt){var ot=o(pt,pt.charCodeAt(0),pt.charCodeAt(1),pt.charCodeAt(2));return ot!==pt+";"?ot.replace(te," or ($1)").substring(4):"("+pt+")"}function c(et,pt,ot,We,Ne,Ke,Ge,ft,mt,Ot){for(var At=0,Mt=pt,Yt;At<qe;++At)switch(Yt=ct[At].call(y,et,Mt,ot,We,Ne,Ke,Ge,ft,mt,Ot)){case void 0:case!1:case!0:case null:break;default:Mt=Yt}if(Mt!==pt)return Mt}function h(et){switch(et){case void 0:case null:qe=ct.length=0;break;default:if(typeof et=="function")ct[qe++]=et;else if(typeof et=="object")for(var pt=0,ot=et.length;pt<ot;++pt)h(et[pt]);else bt=!!et|0}return h}function m(et){return et=et.prefix,et!==void 0&&(lt=null,et?typeof et!="function"?Ye=1:(Ye=2,lt=et):Ye=0),m}function y(et,pt){var ot=et;if(33>ot.charCodeAt(0)&&(ot=ot.trim()),Tt=ot,ot=[Tt],0<qe){var We=c(-1,pt,ot,ot,de,_e,0,0,0,0);We!==void 0&&typeof We=="string"&&(pt=We)}var Ne=t(rt,ot,pt,0,0);return 0<qe&&(We=c(-2,Ne,ot,ot,de,_e,Ne.length,0,0,0),We!==void 0&&(Ne=We)),Tt="",Ce=0,_e=de=1,Ne}var w=/^\0+/g,E=/[\0\r\f]/g,A=/: */g,P=/zoo|gra/,j=/([,: ])(transform)/g,D=/,\r+?/g,k=/([\t\r\n ])*\f?&/g,z=/@(k\w+)\s*(\S*)\s*/,V=/::(place)/g,G=/:(read-only)/g,K=/[svh]\w+-[tblr]{2}/,Z=/\(\s*(.*)\s*\)/g,te=/([\s\S]*?);/g,se=/-self|flex-/g,le=/[^]*?(:[rp][el]a[\w-]+)[^]*/,pe=/stretch|:\s*\w+\-(?:conte|avail)/,me=/([^-])(image-set\()/,_e=1,de=1,Ce=0,Ye=1,rt=[],ct=[],qe=0,lt=null,bt=0,Tt="";return y.use=h,y.set=m,e!==void 0&&m(e),y}Lse.default=nLr});var Ntt=N(kse=>{"use strict";u();Object.defineProperty(kse,"__esModule",{value:!0});var oLr=function(t){var r=new WeakMap;return function(n){if(r.has(n))return r.get(n);var o=t(n);return r.set(n,o),o}};kse.default=oLr});var qse=N(jse=>{"use strict";u();Object.defineProperty(jse,"__esModule",{value:!0});function iLr(e){return e&&typeof e=="object"&&"default"in e?e.default:e}var aLr=Nse(),sLr=iLr(Dtt());Ntt();var Rse="/*|*/",lLr=Rse+"}";function uLr(e){e&&LF.current.insert(e+"}")}var LF={current:null},cLr=function(t,r,n,o,i,a,c,h,m,y){switch(t){case 1:{switch(r.charCodeAt(0)){case 64:return LF.current.insert(r+";"),"";case 108:if(r.charCodeAt(2)===98)return""}break}case 2:{if(h===0)return r+Rse;break}case 3:switch(h){case 102:case 112:return LF.current.insert(n[0]+r),"";default:return r+(y===0?Rse:"")}case-2:r.split(lLr).forEach(uLr)}},pLr=function(t){t===void 0&&(t={});var r=t.key||"css",n;t.prefix!==void 0&&(n={prefix:t.prefix});var o=new sLr(n),i={},a;{a=t.container||document.head;var c=document.querySelectorAll("style[data-emotion-"+r+"]");Array.prototype.forEach.call(c,function(E){var A=E.getAttribute("data-emotion-"+r);A.split(" ").forEach(function(P){i[P]=!0}),E.parentNode!==a&&a.appendChild(E)})}var h;if(o.use(t.stylisPlugins)(cLr),h=function(A,P,j,D){var k=P.name;if(LF.current=j,0)var z;o(A,P.styles),D&&(w.inserted[k]=!0)},0)var m,y;var w={key:r,sheet:new aLr.StyleSheet({key:r,container:a,nonce:t.nonce,speedy:t.speedy}),nonce:t.nonce,inserted:i,registered:{},insert:h};return w};jse.default=pLr});var zse=N(kF=>{"use strict";u();Object.defineProperty(kF,"__esModule",{value:!0});var fLr=!0;function dLr(e,t,r){var n="";return r.split(" ").forEach(function(o){e[o]!==void 0?t.push(e[o]):n+=o+" "}),n}var hLr=function(t,r,n){var o=t.key+"-"+r.name;if((n===!1||fLr===!1&&t.compat!==void 0)&&t.registered[o]===void 0&&(t.registered[o]=r.styles),t.inserted[r.name]===void 0){var i=r;do{var a=t.insert("."+o,i,t.sheet,!0);i=i.next}while(i!==void 0)}};kF.getRegisteredStyles=dLr;kF.insertStyles=hLr});var Ltt=N(Fse=>{"use strict";u();Object.defineProperty(Fse,"__esModule",{value:!0});function mLr(e){for(var t=0,r,n=0,o=e.length;o>=4;++n,o-=4)r=e.charCodeAt(n)&255|(e.charCodeAt(++n)&255)<<8|(e.charCodeAt(++n)&255)<<16|(e.charCodeAt(++n)&255)<<24,r=(r&65535)*1540483477+((r>>>16)*59797<<16),r^=r>>>24,t=(r&65535)*1540483477+((r>>>16)*59797<<16)^(t&65535)*1540483477+((t>>>16)*59797<<16);switch(o){case 3:t^=(e.charCodeAt(n+2)&255)<<16;case 2:t^=(e.charCodeAt(n+1)&255)<<8;case 1:t^=e.charCodeAt(n)&255,t=(t&65535)*1540483477+((t>>>16)*59797<<16)}return t^=t>>>13,t=(t&65535)*1540483477+((t>>>16)*59797<<16),((t^t>>>15)>>>0).toString(36)}Fse.default=mLr});var ktt=N(Use=>{"use strict";u();Object.defineProperty(Use,"__esModule",{value:!0});var gLr={animationIterationCount:1,borderImageOutset:1,borderImageSlice:1,borderImageWidth:1,boxFlex:1,boxFlexGroup:1,boxOrdinalGroup:1,columnCount:1,columns:1,flex:1,flexGrow:1,flexPositive:1,flexShrink:1,flexNegative:1,flexOrder:1,gridRow:1,gridRowEnd:1,gridRowSpan:1,gridRowStart:1,gridColumn:1,gridColumnEnd:1,gridColumnSpan:1,gridColumnStart:1,msGridRow:1,msGridRowSpan:1,msGridColumn:1,msGridColumnSpan:1,fontWeight:1,lineHeight:1,opacity:1,order:1,orphans:1,tabSize:1,widows:1,zIndex:1,zoom:1,WebkitLineClamp:1,fillOpacity:1,floodOpacity:1,stopOpacity:1,strokeDasharray:1,strokeDashoffset:1,strokeMiterlimit:1,strokeOpacity:1,strokeWidth:1};Use.default=gLr});var Rtt=N(Bse=>{"use strict";u();Object.defineProperty(Bse,"__esModule",{value:!0});function vLr(e){var t={};return function(r){return t[r]===void 0&&(t[r]=e(r)),t[r]}}Bse.default=vLr});var RF=N(Hse=>{"use strict";u();Object.defineProperty(Hse,"__esModule",{value:!0});function Gse(e){return e&&typeof e=="object"&&"default"in e?e.default:e}var yLr=Gse(Ltt()),_Lr=Gse(ktt()),bLr=Gse(Rtt()),xLr=/[A-Z]|^ms/g,wLr=/_EMO_([^_]+?)_([^]*?)_EMO_/g,Ftt=function(t){return t.charCodeAt(1)===45},jtt=function(t){return t!=null&&typeof t!="boolean"},Vse=bLr(function(e){return Ftt(e)?e:e.replace(xLr,"-$&").toLowerCase()}),qtt=function(t,r){switch(t){case"animation":case"animationName":if(typeof r=="string")return r.replace(wLr,function(n,o,i){return sm={name:o,styles:i,next:sm},o})}return _Lr[t]!==1&&!Ftt(t)&&typeof r=="number"&&r!==0?r+"px":r};function p4(e,t,r,n){if(r==null)return"";if(r.__emotion_styles!==void 0)return r;switch(typeof r){case"boolean":return"";case"object":{if(r.anim===1)return sm={name:r.name,styles:r.styles,next:sm},r.name;if(r.styles!==void 0){var o=r.next;if(o!==void 0)for(;o!==void 0;)sm={name:o.name,styles:o.styles,next:sm},o=o.next;var i=r.styles+";";return i}return ELr(e,t,r)}case"function":{if(e!==void 0){var a=sm,c=r(e);return sm=a,p4(e,t,c,n)}break}case"string":if(0)var h,m;break}if(t==null)return r;var y=t[r];return y!==void 0&&!n?y:r}function ELr(e,t,r){var n="";if(Array.isArray(r))for(var o=0;o<r.length;o++)n+=p4(e,t,r[o],!1);else for(var i in r){var a=r[i];if(typeof a!="object")t!=null&&t[a]!==void 0?n+=i+"{"+t[a]+"}":jtt(a)&&(n+=Vse(i)+":"+qtt(i,a)+";");else if(Array.isArray(a)&&typeof a[0]=="string"&&(t==null||t[a[0]]===void 0))for(var c=0;c<a.length;c++)jtt(a[c])&&(n+=Vse(i)+":"+qtt(i,a[c])+";");else{var h=p4(e,t,a,!1);switch(i){case"animation":case"animationName":{n+=Vse(i)+":"+h+";";break}default:n+=i+"{"+h+"}"}}}return n}var ztt=/label:\s*([^\s;\n{]+)\s*;/g,sm,SLr=function(t,r,n){if(t.length===1&&typeof t[0]=="object"&&t[0]!==null&&t[0].styles!==void 0)return t[0];var o=!0,i="";sm=void 0;var a=t[0];a==null||a.raw===void 0?(o=!1,i+=p4(n,r,a,!1)):i+=a[0];for(var c=1;c<t.length;c++)i+=p4(n,r,t[c],i.charCodeAt(i.length-1)===46),o&&(i+=a[c]);var h;ztt.lastIndex=0;for(var m="",y;(y=ztt.exec(i))!==null;)m+="-"+y[1];var w=yLr(i)+m;return{name:w,styles:i,next:sm}};Hse.serializeStyles=SLr});var Wtt=N(Mb=>{"use strict";u();Pse();var tv=De(),TLr=qse(),Utt=zse(),ILr=RF();function MLr(e){return e&&e.__esModule?e:{default:e}}var CLr=MLr(TLr),$se=Object.prototype.hasOwnProperty,Vtt=tv.createContext(typeof HTMLElement!="undefined"?CLr.default():null),Gtt=tv.createContext({}),ALr=Vtt.Provider,Htt=function(t){var r=function(o,i){return tv.createElement(Vtt.Consumer,null,function(a){return t(o,a,i)})};return tv.forwardRef(r)},Wse="__EMOTION_TYPE_PLEASE_DO_NOT_USE__",OLr=function(t,r){var n={};for(var o in r)$se.call(r,o)&&(n[o]=r[o]);if(n[Wse]=t,0){var i;if(i.stack)var a}return n},PLr=function(){return null},Btt=function(t,r,n,o){var i=n===null?r.css:r.css(n);typeof i=="string"&&t.registered[i]!==void 0&&(i=t.registered[i]);var a=r[Wse],c=[i],h="";typeof r.className=="string"?h=Utt.getRegisteredStyles(t.registered,c,r.className):r.className!=null&&(h=r.className+" ");var m=ILr.serializeStyles(c);if(0)var y;var w=Utt.insertStyles(t,m,typeof a=="string");h+=t.key+"-"+m.name;var E={};for(var A in r)$se.call(r,A)&&A!=="css"&&A!==Wse&&(E[A]=r[A]);E.ref=o,E.className=h;var P=tv.createElement(a,E),j=tv.createElement(PLr,null);return tv.createElement(tv.Fragment,null,j,P)},DLr=Htt(function(e,t,r){return typeof e.css=="function"?tv.createElement(Gtt.Consumer,null,function(n){return Btt(t,e,n,r)}):Btt(t,e,null,r)});Mb.CacheProvider=ALr;Mb.Emotion=DLr;Mb.ThemeContext=Gtt;Mb.createEmotionProps=OLr;Mb.hasOwnProperty=$se;Mb.withEmotionCache=Htt});var $tt=N(Yse=>{"use strict";u();Object.defineProperty(Yse,"__esModule",{value:!0});var NLr=RF();function LLr(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];return NLr.serializeStyles(t)}Yse.default=LLr});var Jtt=N(Yd=>{"use strict";u();Object.defineProperty(Yd,"__esModule",{value:!0});var kLr=Pse(),lm=De();qse();var um=Wtt(),Kse=zse(),Zse=RF(),RLr=Nse(),jLr=$tt();function Ztt(e){return e&&e.__esModule?e:{default:e}}var qLr=Ztt(kLr),Ktt=Ztt(jLr),Xtt=function(t,r){var n=arguments;if(r==null||!um.hasOwnProperty.call(r,"css"))return lm.createElement.apply(void 0,n);var o=n.length,i=new Array(o);i[0]=um.Emotion,i[1]=um.createEmotionProps(t,r);for(var a=2;a<o;a++)i[a]=n[a];return lm.createElement.apply(null,i)},zLr=um.withEmotionCache(function(e,t){var r=e.styles;if(typeof r=="function")return lm.createElement(um.ThemeContext.Consumer,null,function(o){var i=Zse.serializeStyles([r(o)]);return lm.createElement(Ytt,{serialized:i,cache:t})});var n=Zse.serializeStyles([r]);return lm.createElement(Ytt,{serialized:n,cache:t})}),Ytt=function(e){qLr.default(t,e);function t(n,o,i){return e.call(this,n,o,i)||this}var r=t.prototype;return r.componentDidMount=function(){this.sheet=new RLr.StyleSheet({key:this.props.cache.key+"-global",nonce:this.props.cache.sheet.nonce,container:this.props.cache.sheet.container});var o=document.querySelector("style[data-emotion-"+this.props.cache.key+"=\""+this.props.serialized.name+"\"]");o!==null&&this.sheet.tags.push(o),this.props.cache.sheet.tags.length&&(this.sheet.before=this.props.cache.sheet.tags[0]),this.insertStyles()},r.componentDidUpdate=function(o){o.serialized.name!==this.props.serialized.name&&this.insertStyles()},r.insertStyles=function(){if(this.props.serialized.next!==void 0&&Kse.insertStyles(this.props.cache,this.props.serialized.next,!0),this.sheet.tags.length){var o=this.sheet.tags[this.sheet.tags.length-1].nextElementSibling;this.sheet.before=o,this.sheet.flush()}this.props.cache.insert("",this.props.serialized,this.sheet,!1)},r.componentWillUnmount=function(){this.sheet.flush()},r.render=function(){return null},t}(lm.Component),FLr=function(){var t=Ktt.default.apply(void 0,arguments),r="animation-"+t.name;return{name:r,styles:"@keyframes "+r+"{"+t.styles+"}",anim:1,toString:function(){return"_EMO_"+this.name+"_"+this.styles+"_EMO_"}}},ULr=function e(t){for(var r=t.length,n=0,o="";n<r;n++){var i=t[n];if(i!=null){var a=void 0;switch(typeof i){case"boolean":break;case"object":{if(Array.isArray(i))a=e(i);else{a="";for(var c in i)i[c]&&c&&(a&&(a+=" "),a+=c)}break}default:a=i}a&&(o&&(o+=" "),o+=a)}}return o};function BLr(e,t,r){var n=[],o=Kse.getRegisteredStyles(e,n,r);return n.length<2?r:o+t(n)}var VLr=function(){return null},GLr=um.withEmotionCache(function(e,t){return lm.createElement(um.ThemeContext.Consumer,null,function(r){var n=!1,o=function(){for(var y=arguments.length,w=new Array(y),E=0;E<y;E++)w[E]=arguments[E];var A=Zse.serializeStyles(w,t.registered);return Kse.insertStyles(t,A,!1),t.key+"-"+A.name},i=function(){for(var y=arguments.length,w=new Array(y),E=0;E<y;E++)w[E]=arguments[E];return BLr(t.registered,o,ULr(w))},a={css:o,cx:i,theme:r},c=e.children(a);n=!0;var h=lm.createElement(VLr,null);return lm.createElement(lm.Fragment,null,h,c)})});Yd.CacheProvider=um.CacheProvider;Yd.ThemeContext=um.ThemeContext;Yd.withEmotionCache=um.withEmotionCache;Object.defineProperty(Yd,"css",{enumerable:!0,get:function(){return Ktt.default}});Yd.ClassNames=GLr;Yd.Global=zLr;Yd.createElement=Xtt;Yd.jsx=Xtt;Yd.keyframes=FLr});var Xse=N(Zd=>{"use strict";u();Object.defineProperty(Zd,"__esModule",{value:!0});Zd.default=ort;Zd.skeletonStyles=Zd.skeletonKeyframes=Zd.defaultHighlightColor=Zd.defaultBaseColor=void 0;var Oio=HLr(De()),CT=Jtt();function HLr(e){return e&&e.__esModule?e:{default:e}}function Qtt(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(o){return Object.getOwnPropertyDescriptor(e,o).enumerable})),r.push.apply(r,n)}return r}function WLr(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?Qtt(r,!0).forEach(function(n){$Lr(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Qtt(r).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function $Lr(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function ert(){var e=YLr([`
  0% {
    background-position: -200px 0;
  }
  `,`
  100% {
    background-position: calc(200px + 100%) 0;
  }
`]);return ert=function(){return e},e}function YLr(e,t){return t||(t=e.slice(0)),Object.freeze(Object.defineProperties(e,{raw:{value:Object.freeze(t)}}))}var jF="#eee";Zd.defaultBaseColor=jF;var trt="#f5f5f5";Zd.defaultHighlightColor=trt;var rrt=function(t,r){return(0,CT.keyframes)(ert(),r>0?"".concat(Math.floor(1/(t+r)*t*100),`% {
    background-position: calc(200px + 100%) 0;
  }`):void 0)};Zd.skeletonKeyframes=rrt;var nrt=(0,CT.css)("background-color:",jF,";background-image:linear-gradient( 90deg,",jF,",",trt,",",jF," );background-size:200px 100%;background-repeat:no-repeat;border-radius:4px;display:inline-block;line-height:1;width:100%;;label:skeletonStyles;");Zd.skeletonStyles=nrt;function ort(e){for(var t=e.count,r=e.duration,n=e.width,o=e.wrapper,i=e.height,a=e.circle,c=e.delay,h=e.style,m=e.className,y=[],w=0;w<t;w++){var E={};n!==null&&(E.width=n),i!==null&&(E.height=i),n!==null&&i!==null&&a&&(E.borderRadius="50%");var A="react-loading-skeleton";m&&(A+=" "+m),y.push((0,CT.jsx)("span",{key:w,className:A,css:(0,CT.css)(nrt," animation:",rrt(r,c)," ",r+c,"s ease-in-out infinite;label:Skeleton;"),style:WLr({},h,{},E)},"\u200C"))}return(0,CT.jsx)("span",null,o?y.map(function(P,j){return(0,CT.jsx)(o,{key:j},P,"\u200C")}):y)}ort.defaultProps={count:1,duration:1.2,width:null,wrapper:null,height:null,circle:!1,delay:0}});var Mrt=N((ale,sle)=>{u();(function(e,t){typeof ale=="object"&&typeof sle!="undefined"?sle.exports=t():typeof define=="function"&&define.amd?define(t):(e=e||self).RBush=t()})(ale,function(){"use strict";function e(D,k,z,V,G){(function K(Z,te,se,le,pe){for(;le>se;){if(le-se>600){var me=le-se+1,_e=te-se+1,de=Math.log(me),Ce=.5*Math.exp(2*de/3),Ye=.5*Math.sqrt(de*Ce*(me-Ce)/me)*(_e-me/2<0?-1:1),rt=Math.max(se,Math.floor(te-_e*Ce/me+Ye)),ct=Math.min(le,Math.floor(te+(me-_e)*Ce/me+Ye));K(Z,te,rt,ct,pe)}var qe=Z[te],lt=se,bt=le;for(t(Z,se,te),pe(Z[le],qe)>0&&t(Z,se,le);lt<bt;){for(t(Z,lt,bt),lt++,bt--;pe(Z[lt],qe)<0;)lt++;for(;pe(Z[bt],qe)>0;)bt--}pe(Z[se],qe)===0?t(Z,se,bt):t(Z,++bt,le),bt<=te&&(se=bt+1),te<=bt&&(le=bt-1)}})(D,k,z||0,V||D.length-1,G||r)}function t(D,k,z){var V=D[k];D[k]=D[z],D[z]=V}function r(D,k){return D<k?-1:D>k?1:0}var n=function(D){D===void 0&&(D=9),this._maxEntries=Math.max(4,D),this._minEntries=Math.max(2,Math.ceil(.4*this._maxEntries)),this.clear()};function o(D,k,z){if(!z)return k.indexOf(D);for(var V=0;V<k.length;V++)if(z(D,k[V]))return V;return-1}function i(D,k){a(D,0,D.children.length,k,D)}function a(D,k,z,V,G){G||(G=P(null)),G.minX=1/0,G.minY=1/0,G.maxX=-1/0,G.maxY=-1/0;for(var K=k;K<z;K++){var Z=D.children[K];c(G,D.leaf?V(Z):Z)}return G}function c(D,k){return D.minX=Math.min(D.minX,k.minX),D.minY=Math.min(D.minY,k.minY),D.maxX=Math.max(D.maxX,k.maxX),D.maxY=Math.max(D.maxY,k.maxY),D}function h(D,k){return D.minX-k.minX}function m(D,k){return D.minY-k.minY}function y(D){return(D.maxX-D.minX)*(D.maxY-D.minY)}function w(D){return D.maxX-D.minX+(D.maxY-D.minY)}function E(D,k){return D.minX<=k.minX&&D.minY<=k.minY&&k.maxX<=D.maxX&&k.maxY<=D.maxY}function A(D,k){return k.minX<=D.maxX&&k.minY<=D.maxY&&k.maxX>=D.minX&&k.maxY>=D.minY}function P(D){return{children:D,height:1,leaf:!0,minX:1/0,minY:1/0,maxX:-1/0,maxY:-1/0}}function j(D,k,z,V,G){for(var K=[k,z];K.length;)if(!((z=K.pop())-(k=K.pop())<=V)){var Z=k+Math.ceil((z-k)/V/2)*V;e(D,Z,k,z,G),K.push(k,Z,Z,z)}}return n.prototype.all=function(){return this._all(this.data,[])},n.prototype.search=function(D){var k=this.data,z=[];if(!A(D,k))return z;for(var V=this.toBBox,G=[];k;){for(var K=0;K<k.children.length;K++){var Z=k.children[K],te=k.leaf?V(Z):Z;A(D,te)&&(k.leaf?z.push(Z):E(D,te)?this._all(Z,z):G.push(Z))}k=G.pop()}return z},n.prototype.collides=function(D){var k=this.data;if(!A(D,k))return!1;for(var z=[];k;){for(var V=0;V<k.children.length;V++){var G=k.children[V],K=k.leaf?this.toBBox(G):G;if(A(D,K)){if(k.leaf||E(D,K))return!0;z.push(G)}}k=z.pop()}return!1},n.prototype.load=function(D){if(!D||!D.length)return this;if(D.length<this._minEntries){for(var k=0;k<D.length;k++)this.insert(D[k]);return this}var z=this._build(D.slice(),0,D.length-1,0);if(this.data.children.length){if(this.data.height===z.height)this._splitRoot(this.data,z);else{if(this.data.height<z.height){var V=this.data;this.data=z,z=V}this._insert(z,this.data.height-z.height-1,!0)}}else this.data=z;return this},n.prototype.insert=function(D){return D&&this._insert(D,this.data.height-1),this},n.prototype.clear=function(){return this.data=P([]),this},n.prototype.remove=function(D,k){if(!D)return this;for(var z,V,G,K=this.data,Z=this.toBBox(D),te=[],se=[];K||te.length;){if(K||(K=te.pop(),V=te[te.length-1],z=se.pop(),G=!0),K.leaf){var le=o(D,K.children,k);if(le!==-1)return K.children.splice(le,1),te.push(K),this._condense(te),this}G||K.leaf||!E(K,Z)?V?(z++,K=V.children[z],G=!1):K=null:(te.push(K),se.push(z),z=0,V=K,K=K.children[0])}return this},n.prototype.toBBox=function(D){return D},n.prototype.compareMinX=function(D,k){return D.minX-k.minX},n.prototype.compareMinY=function(D,k){return D.minY-k.minY},n.prototype.toJSON=function(){return this.data},n.prototype.fromJSON=function(D){return this.data=D,this},n.prototype._all=function(D,k){for(var z=[];D;)D.leaf?k.push.apply(k,D.children):z.push.apply(z,D.children),D=z.pop();return k},n.prototype._build=function(D,k,z,V){var G,K=z-k+1,Z=this._maxEntries;if(K<=Z)return i(G=P(D.slice(k,z+1)),this.toBBox),G;V||(V=Math.ceil(Math.log(K)/Math.log(Z)),Z=Math.ceil(K/Math.pow(Z,V-1))),(G=P([])).leaf=!1,G.height=V;var te=Math.ceil(K/Z),se=te*Math.ceil(Math.sqrt(Z));j(D,k,z,se,this.compareMinX);for(var le=k;le<=z;le+=se){var pe=Math.min(le+se-1,z);j(D,le,pe,te,this.compareMinY);for(var me=le;me<=pe;me+=te){var _e=Math.min(me+te-1,pe);G.children.push(this._build(D,me,_e,V-1))}}return i(G,this.toBBox),G},n.prototype._chooseSubtree=function(D,k,z,V){for(;V.push(k),!k.leaf&&V.length-1!==z;){for(var G=1/0,K=1/0,Z=void 0,te=0;te<k.children.length;te++){var se=k.children[te],le=y(se),pe=(me=D,_e=se,(Math.max(_e.maxX,me.maxX)-Math.min(_e.minX,me.minX))*(Math.max(_e.maxY,me.maxY)-Math.min(_e.minY,me.minY))-le);pe<K?(K=pe,G=le<G?le:G,Z=se):pe===K&&le<G&&(G=le,Z=se)}k=Z||k.children[0]}var me,_e;return k},n.prototype._insert=function(D,k,z){var V=z?D:this.toBBox(D),G=[],K=this._chooseSubtree(V,this.data,k,G);for(K.children.push(D),c(K,V);k>=0&&G[k].children.length>this._maxEntries;)this._split(G,k),k--;this._adjustParentBBoxes(V,G,k)},n.prototype._split=function(D,k){var z=D[k],V=z.children.length,G=this._minEntries;this._chooseSplitAxis(z,G,V);var K=this._chooseSplitIndex(z,G,V),Z=P(z.children.splice(K,z.children.length-K));Z.height=z.height,Z.leaf=z.leaf,i(z,this.toBBox),i(Z,this.toBBox),k?D[k-1].children.push(Z):this._splitRoot(z,Z)},n.prototype._splitRoot=function(D,k){this.data=P([D,k]),this.data.height=D.height+1,this.data.leaf=!1,i(this.data,this.toBBox)},n.prototype._chooseSplitIndex=function(D,k,z){for(var V,G,K,Z,te,se,le,pe=1/0,me=1/0,_e=k;_e<=z-k;_e++){var de=a(D,0,_e,this.toBBox),Ce=a(D,_e,z,this.toBBox),Ye=(G=de,K=Ce,Z=void 0,te=void 0,se=void 0,le=void 0,Z=Math.max(G.minX,K.minX),te=Math.max(G.minY,K.minY),se=Math.min(G.maxX,K.maxX),le=Math.min(G.maxY,K.maxY),Math.max(0,se-Z)*Math.max(0,le-te)),rt=y(de)+y(Ce);Ye<pe?(pe=Ye,V=_e,me=rt<me?rt:me):Ye===pe&&rt<me&&(me=rt,V=_e)}return V||z-k},n.prototype._chooseSplitAxis=function(D,k,z){var V=D.leaf?this.compareMinX:h,G=D.leaf?this.compareMinY:m;this._allDistMargin(D,k,z,V)<this._allDistMargin(D,k,z,G)&&D.children.sort(V)},n.prototype._allDistMargin=function(D,k,z,V){D.children.sort(V);for(var G=this.toBBox,K=a(D,0,k,G),Z=a(D,z-k,z,G),te=w(K)+w(Z),se=k;se<z-k;se++){var le=D.children[se];c(K,D.leaf?G(le):le),te+=w(K)}for(var pe=z-k-1;pe>=k;pe--){var me=D.children[pe];c(Z,D.leaf?G(me):me),te+=w(Z)}return te},n.prototype._adjustParentBBoxes=function(D,k,z){for(var V=z;V>=0;V--)c(k[V],D)},n.prototype._condense=function(D){for(var k=D.length-1,z=void 0;k>=0;k--)D[k].children.length===0?k>0?(z=D[k-1].children).splice(z.indexOf(D[k]),1):this.clear():i(D[k],this.toBBox)},n})});var Crt=N((lle,ule)=>{u();(function(e,t){typeof lle=="object"&&typeof ule!="undefined"?ule.exports=t():typeof define=="function"&&define.amd?define(t):(e=e||self,e.TinyQueue=t())})(lle,function(){"use strict";var e=function(n,o){if(n===void 0&&(n=[]),o===void 0&&(o=t),this.data=n,this.length=this.data.length,this.compare=o,this.length>0)for(var i=(this.length>>1)-1;i>=0;i--)this._down(i)};e.prototype.push=function(n){this.data.push(n),this.length++,this._up(this.length-1)},e.prototype.pop=function(){if(this.length!==0){var n=this.data[0],o=this.data.pop();return this.length--,this.length>0&&(this.data[0]=o,this._down(0)),n}},e.prototype.peek=function(){return this.data[0]},e.prototype._up=function(n){for(var o=this,i=o.data,a=o.compare,c=i[n];n>0;){var h=n-1>>1,m=i[h];if(a(c,m)>=0)break;i[n]=m,n=h}i[n]=c},e.prototype._down=function(n){for(var o=this,i=o.data,a=o.compare,c=this.length>>1,h=i[n];n<c;){var m=(n<<1)+1,y=i[m],w=m+1;if(w<this.length&&a(i[w],y)<0&&(m=w,y=i[w]),a(y,h)>=0)break;i[n]=y,n=m}i[n]=h};function t(r,n){return r<n?-1:r>n?1:0}return e})});var Ort=N((Pso,Art)=>{u();Art.exports=function(t,r,n,o){var i=t[0],a=t[1],c=!1;n===void 0&&(n=0),o===void 0&&(o=r.length);for(var h=(o-n)/2,m=0,y=h-1;m<h;y=m++){var w=r[n+m*2+0],E=r[n+m*2+1],A=r[n+y*2+0],P=r[n+y*2+1],j=E>a!=P>a&&i<(A-w)*(a-E)/(P-E)+w;j&&(c=!c)}return c}});var Drt=N((Nso,Prt)=>{u();Prt.exports=function(t,r,n,o){var i=t[0],a=t[1],c=!1;n===void 0&&(n=0),o===void 0&&(o=r.length);for(var h=o-n,m=0,y=h-1;m<h;y=m++){var w=r[m+n][0],E=r[m+n][1],A=r[y+n][0],P=r[y+n][1],j=E>a!=P>a&&i<(A-w)*(a-E)/(P-E)+w;j&&(c=!c)}return c}});var krt=N((kso,HF)=>{u();var Nrt=Ort(),Lrt=Drt();HF.exports=function(t,r,n,o){return r.length>0&&Array.isArray(r[0])?Lrt(t,r,n,o):Nrt(t,r,n,o)};HF.exports.nested=Lrt;HF.exports.flat=Nrt});var jrt=N((WF,Rrt)=>{u();(function(e,t){typeof WF=="object"&&typeof Rrt!="undefined"?t(WF):typeof define=="function"&&define.amd?define(["exports"],t):t((e=e||self).predicates={})})(WF,function(e){"use strict";let r=33306690738754706e-32;function n(A,P,j,D,k){let z,V,G,K,Z=P[0],te=D[0],se=0,le=0;te>Z==te>-Z?(z=Z,Z=P[++se]):(z=te,te=D[++le]);let pe=0;if(se<A&&le<j)for(te>Z==te>-Z?(G=z-((V=Z+z)-Z),Z=P[++se]):(G=z-((V=te+z)-te),te=D[++le]),z=V,G!==0&&(k[pe++]=G);se<A&&le<j;)te>Z==te>-Z?(G=z-((V=z+Z)-(K=V-z))+(Z-K),Z=P[++se]):(G=z-((V=z+te)-(K=V-z))+(te-K),te=D[++le]),z=V,G!==0&&(k[pe++]=G);for(;se<A;)G=z-((V=z+Z)-(K=V-z))+(Z-K),Z=P[++se],z=V,G!==0&&(k[pe++]=G);for(;le<j;)G=z-((V=z+te)-(K=V-z))+(te-K),te=D[++le],z=V,G!==0&&(k[pe++]=G);return z===0&&pe!==0||(k[pe++]=z),pe}function o(A){return new Float64Array(A)}let i=33306690738754716e-32,a=22204460492503146e-32,c=11093356479670487e-47,h=o(4),m=o(8),y=o(12),w=o(16),E=o(4);e.orient2d=function(A,P,j,D,k,z){let V=(P-z)*(j-k),G=(A-k)*(D-z),K=V-G;if(V===0||G===0||V>0!=G>0)return K;let Z=Math.abs(V+G);return Math.abs(K)>=i*Z?K:-function(te,se,le,pe,me,_e,de){let Ce,Ye,rt,ct,qe,lt,bt,Tt,et,pt,ot,We,Ne,Ke,Ge,ft,mt,Ot,At=te-me,Mt=le-me,Yt=se-_e,qt=pe-_e;qe=(Ge=(Tt=At-(bt=(lt=134217729*At)-(lt-At)))*(pt=qt-(et=(lt=134217729*qt)-(lt-qt)))-((Ke=At*qt)-bt*et-Tt*et-bt*pt))-(ot=Ge-(mt=(Tt=Yt-(bt=(lt=134217729*Yt)-(lt-Yt)))*(pt=Mt-(et=(lt=134217729*Mt)-(lt-Mt)))-((ft=Yt*Mt)-bt*et-Tt*et-bt*pt))),h[0]=Ge-(ot+qe)+(qe-mt),qe=(Ne=Ke-((We=Ke+ot)-(qe=We-Ke))+(ot-qe))-(ot=Ne-ft),h[1]=Ne-(ot+qe)+(qe-ft),qe=(Ot=We+ot)-We,h[2]=We-(Ot-qe)+(ot-qe),h[3]=Ot;let Ut=function(Dr,ke){let Je=ke[0];for(let tt=1;tt<Dr;tt++)Je+=ke[tt];return Je}(4,h),sr=a*de;if(Ut>=sr||-Ut>=sr||(Ce=te-(At+(qe=te-At))+(qe-me),rt=le-(Mt+(qe=le-Mt))+(qe-me),Ye=se-(Yt+(qe=se-Yt))+(qe-_e),ct=pe-(qt+(qe=pe-qt))+(qe-_e),Ce===0&&Ye===0&&rt===0&&ct===0)||(sr=c*de+r*Math.abs(Ut),(Ut+=At*ct+qt*Ce-(Yt*rt+Mt*Ye))>=sr||-Ut>=sr))return Ut;qe=(Ge=(Tt=Ce-(bt=(lt=134217729*Ce)-(lt-Ce)))*(pt=qt-(et=(lt=134217729*qt)-(lt-qt)))-((Ke=Ce*qt)-bt*et-Tt*et-bt*pt))-(ot=Ge-(mt=(Tt=Ye-(bt=(lt=134217729*Ye)-(lt-Ye)))*(pt=Mt-(et=(lt=134217729*Mt)-(lt-Mt)))-((ft=Ye*Mt)-bt*et-Tt*et-bt*pt))),E[0]=Ge-(ot+qe)+(qe-mt),qe=(Ne=Ke-((We=Ke+ot)-(qe=We-Ke))+(ot-qe))-(ot=Ne-ft),E[1]=Ne-(ot+qe)+(qe-ft),qe=(Ot=We+ot)-We,E[2]=We-(Ot-qe)+(ot-qe),E[3]=Ot;let jr=n(4,h,4,E,m);qe=(Ge=(Tt=At-(bt=(lt=134217729*At)-(lt-At)))*(pt=ct-(et=(lt=134217729*ct)-(lt-ct)))-((Ke=At*ct)-bt*et-Tt*et-bt*pt))-(ot=Ge-(mt=(Tt=Yt-(bt=(lt=134217729*Yt)-(lt-Yt)))*(pt=rt-(et=(lt=134217729*rt)-(lt-rt)))-((ft=Yt*rt)-bt*et-Tt*et-bt*pt))),E[0]=Ge-(ot+qe)+(qe-mt),qe=(Ne=Ke-((We=Ke+ot)-(qe=We-Ke))+(ot-qe))-(ot=Ne-ft),E[1]=Ne-(ot+qe)+(qe-ft),qe=(Ot=We+ot)-We,E[2]=We-(Ot-qe)+(ot-qe),E[3]=Ot;let Pr=n(jr,m,4,E,y);qe=(Ge=(Tt=Ce-(bt=(lt=134217729*Ce)-(lt-Ce)))*(pt=ct-(et=(lt=134217729*ct)-(lt-ct)))-((Ke=Ce*ct)-bt*et-Tt*et-bt*pt))-(ot=Ge-(mt=(Tt=Ye-(bt=(lt=134217729*Ye)-(lt-Ye)))*(pt=rt-(et=(lt=134217729*rt)-(lt-rt)))-((ft=Ye*rt)-bt*et-Tt*et-bt*pt))),E[0]=Ge-(ot+qe)+(qe-mt),qe=(Ne=Ke-((We=Ke+ot)-(qe=We-Ke))+(ot-qe))-(ot=Ne-ft),E[1]=Ne-(ot+qe)+(qe-ft),qe=(Ot=We+ot)-We,E[2]=We-(Ot-qe)+(ot-qe),E[3]=Ot;let br=n(Pr,y,4,E,w);return w[br-1]}(A,P,j,D,k,z,Z)},e.orient2dfast=function(A,P,j,D,k,z){return(P-z)*(j-k)-(A-k)*(D-z)},Object.defineProperty(e,"__esModule",{value:!0})})});var Vrt=N((qso,dle)=>{"use strict";u();var qrt=Mrt(),YF=Crt(),o3r=krt(),i3r=jrt().orient2d;YF.default&&(YF=YF.default);dle.exports=Brt;dle.exports.default=Brt;function Brt(e,t,r){t=Math.max(0,t===void 0?2:t),r=r||0;var n=c3r(e),o=new qrt(16);o.toBBox=function(z){return{minX:z[0],minY:z[1],maxX:z[0],maxY:z[1]}},o.compareMinX=function(z,V){return z[0]-V[0]},o.compareMinY=function(z,V){return z[1]-V[1]},o.load(e);for(var i=[],a=0,c;a<n.length;a++){var h=n[a];o.remove(h),c=Urt(h,c),i.push(c)}var m=new qrt(16);for(a=0;a<i.length;a++)m.insert(cle(i[a]));for(var y=t*t,w=r*r;i.length;){var E=i.shift(),A=E.p,P=E.next.p,j=ple(A,P);if(!(j<w)){var D=j/y;h=a3r(o,E.prev.p,A,P,E.next.next.p,D,m),h&&Math.min(ple(h,A),ple(h,P))<=D&&(i.push(E),i.push(Urt(h,E)),o.remove(h),m.remove(E),m.insert(cle(E)),m.insert(cle(E.next)))}}E=c;var k=[];do k.push(E.p),E=E.next;while(E!==c);return k.push(E.p),k}function a3r(e,t,r,n,o,i,a){for(var c=new YF([],s3r),h=e.data;h;){for(var m=0;m<h.children.length;m++){var y=h.children[m],w=h.leaf?fle(y,r,n):l3r(r,n,y);w>i||c.push({node:y,dist:w})}for(;c.length&&!c.peek().node.children;){var E=c.pop(),A=E.node,P=fle(A,t,r),j=fle(A,n,o);if(E.dist<P&&E.dist<j&&Frt(r,A,a)&&Frt(n,A,a))return A}h=c.pop(),h&&(h=h.node)}return null}function s3r(e,t){return e.dist-t.dist}function l3r(e,t,r){if(zrt(e,r)||zrt(t,r))return 0;var n=$F(e[0],e[1],t[0],t[1],r.minX,r.minY,r.maxX,r.minY);if(n===0)return 0;var o=$F(e[0],e[1],t[0],t[1],r.minX,r.minY,r.minX,r.maxY);if(o===0)return 0;var i=$F(e[0],e[1],t[0],t[1],r.maxX,r.minY,r.maxX,r.maxY);if(i===0)return 0;var a=$F(e[0],e[1],t[0],t[1],r.minX,r.maxY,r.maxX,r.maxY);return a===0?0:Math.min(n,o,i,a)}function zrt(e,t){return e[0]>=t.minX&&e[0]<=t.maxX&&e[1]>=t.minY&&e[1]<=t.maxY}function Frt(e,t,r){for(var n=Math.min(e[0],t[0]),o=Math.min(e[1],t[1]),i=Math.max(e[0],t[0]),a=Math.max(e[1],t[1]),c=r.search({minX:n,minY:o,maxX:i,maxY:a}),h=0;h<c.length;h++)if(u3r(c[h].p,c[h].next.p,e,t))return!1;return!0}function PT(e,t,r){return i3r(e[0],e[1],t[0],t[1],r[0],r[1])}function u3r(e,t,r,n){return e!==n&&t!==r&&PT(e,t,r)>0!=PT(e,t,n)>0&&PT(r,n,e)>0!=PT(r,n,t)>0}function cle(e){var t=e.p,r=e.next.p;return e.minX=Math.min(t[0],r[0]),e.minY=Math.min(t[1],r[1]),e.maxX=Math.max(t[0],r[0]),e.maxY=Math.max(t[1],r[1]),e}function c3r(e){for(var t=e[0],r=e[0],n=e[0],o=e[0],i=0;i<e.length;i++){var a=e[i];a[0]<t[0]&&(t=a),a[0]>n[0]&&(n=a),a[1]<r[1]&&(r=a),a[1]>o[1]&&(o=a)}var c=[t,r,n,o],h=c.slice();for(i=0;i<e.length;i++)o3r(e[i],c)||h.push(e[i]);return f3r(h)}function Urt(e,t){var r={p:e,prev:null,next:null,minX:0,minY:0,maxX:0,maxY:0};return t?(r.next=t.next,r.prev=t,t.next.prev=r,t.next=r):(r.prev=r,r.next=r),r}function ple(e,t){var r=e[0]-t[0],n=e[1]-t[1];return r*r+n*n}function fle(e,t,r){var n=t[0],o=t[1],i=r[0]-n,a=r[1]-o;if(i!==0||a!==0){var c=((e[0]-n)*i+(e[1]-o)*a)/(i*i+a*a);c>1?(n=r[0],o=r[1]):c>0&&(n+=i*c,o+=a*c)}return i=e[0]-n,a=e[1]-o,i*i+a*a}function $F(e,t,r,n,o,i,a,c){var h=r-e,m=n-t,y=a-o,w=c-i,E=e-o,A=t-i,P=h*h+m*m,j=h*y+m*w,D=y*y+w*w,k=h*E+m*A,z=y*E+w*A,V=P*D-j*j,G,K,Z,te,se=V,le=V;V===0?(K=0,se=1,te=z,le=D):(K=j*z-D*k,te=P*z-j*k,K<0?(K=0,te=z,le=D):K>se&&(K=se,te=z+j,le=D)),te<0?(te=0,-k<0?K=0:-k>P?K=se:(K=-k,se=P)):te>le&&(te=le,-k+j<0?K=0:-k+j>P?K=se:(K=-k+j,se=P)),G=K===0?0:K/se,Z=te===0?0:te/le;var pe=(1-G)*e+G*r,me=(1-G)*t+G*n,_e=(1-Z)*o+Z*a,de=(1-Z)*i+Z*c,Ce=_e-pe,Ye=de-me;return Ce*Ce+Ye*Ye}function p3r(e,t){return e[0]===t[0]?e[1]-t[1]:e[0]-t[0]}function f3r(e){e.sort(p3r);for(var t=[],r=0;r<e.length;r++){for(;t.length>=2&&PT(t[t.length-2],t[t.length-1],e[r])<=0;)t.pop();t.push(e[r])}for(var n=[],o=e.length-1;o>=0;o--){for(;n.length>=2&&PT(n[n.length-2],n[n.length-1],e[o])<=0;)n.pop();n.push(e[o])}return n.pop(),t.pop(),t.concat(n)}});var Qnt=N(gi=>{"use strict";u();var zle=Symbol.for("react.element"),Fle=Symbol.for("react.portal"),g7=Symbol.for("react.fragment"),v7=Symbol.for("react.strict_mode"),y7=Symbol.for("react.profiler"),_7=Symbol.for("react.provider"),b7=Symbol.for("react.context"),F3r=Symbol.for("react.server_context"),x7=Symbol.for("react.forward_ref"),w7=Symbol.for("react.suspense"),E7=Symbol.for("react.suspense_list"),S7=Symbol.for("react.memo"),T7=Symbol.for("react.lazy"),U3r=Symbol.for("react.offscreen"),Jnt;Jnt=Symbol.for("react.module.reference");function Nf(e){if(typeof e=="object"&&e!==null){var t=e.$$typeof;switch(t){case zle:switch(e=e.type,e){case g7:case y7:case v7:case w7:case E7:return e;default:switch(e=e&&e.$$typeof,e){case F3r:case b7:case x7:case T7:case S7:case _7:return e;default:return t}}case Fle:return t}}}gi.ContextConsumer=b7;gi.ContextProvider=_7;gi.Element=zle;gi.ForwardRef=x7;gi.Fragment=g7;gi.Lazy=T7;gi.Memo=S7;gi.Portal=Fle;gi.Profiler=y7;gi.StrictMode=v7;gi.Suspense=w7;gi.SuspenseList=E7;gi.isAsyncMode=function(){return!1};gi.isConcurrentMode=function(){return!1};gi.isContextConsumer=function(e){return Nf(e)===b7};gi.isContextProvider=function(e){return Nf(e)===_7};gi.isElement=function(e){return typeof e=="object"&&e!==null&&e.$$typeof===zle};gi.isForwardRef=function(e){return Nf(e)===x7};gi.isFragment=function(e){return Nf(e)===g7};gi.isLazy=function(e){return Nf(e)===T7};gi.isMemo=function(e){return Nf(e)===S7};gi.isPortal=function(e){return Nf(e)===Fle};gi.isProfiler=function(e){return Nf(e)===y7};gi.isStrictMode=function(e){return Nf(e)===v7};gi.isSuspense=function(e){return Nf(e)===w7};gi.isSuspenseList=function(e){return Nf(e)===E7};gi.isValidElementType=function(e){return typeof e=="string"||typeof e=="function"||e===g7||e===y7||e===v7||e===w7||e===E7||e===U3r||typeof e=="object"&&e!==null&&(e.$$typeof===T7||e.$$typeof===S7||e.$$typeof===_7||e.$$typeof===b7||e.$$typeof===x7||e.$$typeof===Jnt||e.getModuleId!==void 0)};gi.typeOf=Nf});var tot=N((Ddo,eot)=>{"use strict";u();eot.exports=Qnt()});var Kat=N(Ni=>{"use strict";u();var y9=60103,_9=60106,V4=60107,G4=60108,H4=60114,W4=60109,$4=60110,Y4=60112,Z4=60113,Nue=60120,K4=60115,X4=60116,Hat=60121,Wat=60122,$at=60117,Yat=60129,Zat=60131;typeof Symbol=="function"&&Symbol.for&&(pl=Symbol.for,y9=pl("react.element"),_9=pl("react.portal"),V4=pl("react.fragment"),G4=pl("react.strict_mode"),H4=pl("react.profiler"),W4=pl("react.provider"),$4=pl("react.context"),Y4=pl("react.forward_ref"),Z4=pl("react.suspense"),Nue=pl("react.suspense_list"),K4=pl("react.memo"),X4=pl("react.lazy"),Hat=pl("react.block"),Wat=pl("react.server.block"),$at=pl("react.fundamental"),Yat=pl("react.debug_trace_mode"),Zat=pl("react.legacy_hidden"));var pl;function rh(e){if(typeof e=="object"&&e!==null){var t=e.$$typeof;switch(t){case y9:switch(e=e.type,e){case V4:case H4:case G4:case Z4:case Nue:return e;default:switch(e=e&&e.$$typeof,e){case $4:case Y4:case X4:case K4:case W4:return e;default:return t}}case _9:return t}}}var gRr=W4,vRr=y9,yRr=Y4,_Rr=V4,bRr=X4,xRr=K4,wRr=_9,ERr=H4,SRr=G4,TRr=Z4;Ni.ContextConsumer=$4;Ni.ContextProvider=gRr;Ni.Element=vRr;Ni.ForwardRef=yRr;Ni.Fragment=_Rr;Ni.Lazy=bRr;Ni.Memo=xRr;Ni.Portal=wRr;Ni.Profiler=ERr;Ni.StrictMode=SRr;Ni.Suspense=TRr;Ni.isAsyncMode=function(){return!1};Ni.isConcurrentMode=function(){return!1};Ni.isContextConsumer=function(e){return rh(e)===$4};Ni.isContextProvider=function(e){return rh(e)===W4};Ni.isElement=function(e){return typeof e=="object"&&e!==null&&e.$$typeof===y9};Ni.isForwardRef=function(e){return rh(e)===Y4};Ni.isFragment=function(e){return rh(e)===V4};Ni.isLazy=function(e){return rh(e)===X4};Ni.isMemo=function(e){return rh(e)===K4};Ni.isPortal=function(e){return rh(e)===_9};Ni.isProfiler=function(e){return rh(e)===H4};Ni.isStrictMode=function(e){return rh(e)===G4};Ni.isSuspense=function(e){return rh(e)===Z4};Ni.isValidElementType=function(e){return typeof e=="string"||typeof e=="function"||e===V4||e===H4||e===Yat||e===G4||e===Z4||e===Nue||e===Zat||typeof e=="object"&&e!==null&&(e.$$typeof===X4||e.$$typeof===K4||e.$$typeof===W4||e.$$typeof===$4||e.$$typeof===Y4||e.$$typeof===$at||e.$$typeof===Hat||e[0]===Wat)};Ni.typeOf=rh});var Jat=N((Bwo,Xat)=>{"use strict";u();Xat.exports=Kat()});var Dpt=N((t6o,TU)=>{u();TU.exports.RADIUS=6378137;TU.exports.FLATTENING=1/298.257223563;TU.exports.POLAR_RADIUS=6356752.3142});var Rpt=N((n6o,Ppe)=>{u();var Npt=Dpt();Ppe.exports.geometry=kpt;Ppe.exports.ring=Ope;function kpt(e){var t=0,r;switch(e.type){case"Polygon":return Lpt(e.coordinates);case"MultiPolygon":for(r=0;r<e.coordinates.length;r++)t+=Lpt(e.coordinates[r]);return t;case"Point":case"MultiPoint":case"LineString":case"MultiLineString":return 0;case"GeometryCollection":for(r=0;r<e.geometries.length;r++)t+=kpt(e.geometries[r]);return t}}function Lpt(e){var t=0;if(e&&e.length>0){t+=Math.abs(Ope(e[0]));for(var r=1;r<e.length;r++)t-=Math.abs(Ope(e[r]))}return t}function Ope(e){var t,r,n,o,i,a,c,h=0,m=e.length;if(m>2){for(c=0;c<m;c++)c===m-2?(o=m-2,i=m-1,a=0):c===m-1?(o=m-1,i=0,a=1):(o=c,i=c+1,a=c+2),t=e[o],r=e[i],n=e[a],h+=(Ape(n[0])-Ape(t[0]))*Math.sin(Ape(r[1]));h=h*Npt.RADIUS*Npt.RADIUS/2}return h}function Ape(e){return e*Math.PI/180}});var cft=N((Vqo,uft)=>{u();uft.exports=Kzr;var Zzr={Point:"geometry",MultiPoint:"geometry",LineString:"geometry",MultiLineString:"geometry",Polygon:"geometry",MultiPolygon:"geometry",GeometryCollection:"geometry",Feature:"feature",FeatureCollection:"featurecollection"};function Kzr(e){if(!e||!e.type)return null;var t=Zzr[e.type];if(!t)return null;if(t==="geometry")return{type:"FeatureCollection",features:[{type:"Feature",properties:{},geometry:e}]};if(t==="feature")return{type:"FeatureCollection",features:[e]};if(t==="featurecollection")return e}});var lFr={};uw(lFr,{SettingsProvider:()=>aFr,renderApp:()=>sFr});u();var umt=Q(De(),1),cmt=Q(ba(),1),rJo=Q(Xte(),1);u();var Um=Q(De(),1);u();var su=Q(De()),d7e=Q(ba());function Bgr(e){return!!e&&typeof e.then=="function"}var $a=Bgr;function Vgr(e,t){if(e!=null)return e;throw new Error(t!=null?t:"Got unexpected null or undefined")}var ii=Vgr,HR=class{},Ggr=new HR,yre={valueMaybe(){},valueOrThrow(){throw new Error(`Loadable expected value, but in "${this.state}" state`)},errorMaybe(){},errorOrThrow(){throw new Error(`Loadable expected error, but in "${this.state}" state`)},promiseMaybe(){},promiseOrThrow(){throw new Error(`Loadable expected promise, but in "${this.state}" state`)},is(e){return e.state===this.state&&e.contents===this.contents},map(e){if(this.state==="hasError")return this;if(this.state==="hasValue")try{let r=e(this.contents);return $a(r)?eS(r.then(n=>({__value:n}))):_re(r)}catch(r){return $a(r)?eS(r.next(()=>e(this.contents))):bre(r)}if(this.state==="loading")return eS(this.contents.then(r=>({__value:e(r.__value)})).catch(r=>{if($a(r))return r.then(()=>e(this.contents));throw r}));throw new Error("Invalid Loadable state")}};function _re(e){return Object.freeze(Pt(Se({state:"hasValue",contents:e},yre),{getValue(){return this.contents},toPromise(){return Promise.resolve(this.contents)},valueMaybe(){return this.contents},valueOrThrow(){return this.contents}}))}function bre(e){return Object.freeze(Pt(Se({state:"hasError",contents:e},yre),{getValue(){throw this.contents},toPromise(){return Promise.reject(this.contents)},errorMaybe(){return this.contents},errorOrThrow(){return this.contents}}))}function eS(e){return Object.freeze(Pt(Se({state:"loading",contents:e},yre),{getValue(){throw this.contents.then(({__value:t})=>t)},toPromise(){return this.contents.then(({__value:t})=>t)},promiseMaybe(){return this.contents.then(({__value:t})=>t)},promiseOrThrow(){return this.contents.then(({__value:t})=>t)}}))}function Hgr(){return eS(new Promise(()=>{}))}function Wgr(e){return e.every(t=>t.state==="hasValue")?_re(e.map(t=>t.contents)):e.some(t=>t.state==="hasError")?bre(ii(e.find(t=>t.state==="hasError"),"Invalid loadable passed to loadableAll").contents):eS(Promise.all(e.map(t=>t.contents)).then(t=>({__value:t})))}var nO={loadableWithValue:_re,loadableWithError:bre,loadableWithPromise:eS,loadableLoading:Hgr,loadableAll:Wgr,Canceled:HR,CANCELED:Ggr},Jte,h7e=(Jte=su.default.useMutableSource)!==null&&Jte!==void 0?Jte:su.default.unstable_useMutableSource;function $gr(){return h7e&&!(typeof window!="undefined"&&window.$disableRecoilValueMutableSource_TEMP_HACK_DO_NOT_USE)}var m7e={mutableSourceExists:$gr,useMutableSource:h7e},{mutableSourceExists:Ygr}=m7e,xre=new Map().set("recoil_hamt_2020",!0).set("recoil_memory_managament_2020",!0).set("recoil_suppress_rerender_in_callback",!0);function wre(e){var t;return e==="recoil_early_rendering_2021"&&!Ygr()?!1:(t=xre.get(e))!==null&&t!==void 0?t:!1}wre.setPass=e=>{xre.set(e,!0)};wre.setFail=e=>{xre.set(e,!1)};var Ei=wre;function Zgr(e,t,{error:r}={}){return null}var Kgr=Zgr,Gh=Kgr;function Xgr(e,t){let r=new Set(e);return r.add(t),r}function Jgr(e,t){let r=new Set(e);return r.delete(t),r}function Qgr(e,t,r){let n=new Map(e);return n.set(t,r),n}function evr(e,t,r){let n=new Map(e);return n.set(t,r(n.get(t))),n}function tvr(e,t){let r=new Map(e);return r.delete(t),r}function rvr(e,t){let r=new Map(e);return t.forEach(n=>r.delete(n)),r}var g7e={setByAddingToSet:Xgr,setByDeletingFromSet:Jgr,mapBySettingInMap:Qgr,mapByUpdatingInMap:evr,mapByDeletingFromMap:tvr,mapByDeletingMultipleFromMap:rvr};function*nvr(e,t){let r=0;for(let n of e)t(n,r++)&&(yield n)}var v7e=nvr;function ovr(e,t){return function*(){let r=0;for(let n of e)yield t(n,r++)}()}var y7e=ovr;function ivr(e,...t){}var avr=ivr,Ere=avr;function Do(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var eO=class{constructor(t){Do(this,"key",void 0),this.key=t}},WR=class extends eO{},$R=class extends eO{};function svr(e){return e instanceof WR||e instanceof $R}var o6={AbstractRecoilValue:eO,RecoilState:WR,RecoilValueReadOnly:$R,isRecoilValue:svr},lvr=o6.AbstractRecoilValue,uvr=o6.RecoilState,cvr=o6.RecoilValueReadOnly,pvr=o6.isRecoilValue,Yy=Object.freeze({__proto__:null,AbstractRecoilValue:lvr,RecoilState:uvr,RecoilValueReadOnly:cvr,isRecoilValue:pvr}),YR=class{},fvr=new YR,rre=class extends Error{constructor(t){super(`Tried to set the value of Recoil selector ${t} using an updater function, but it is an async selector in a pending or error state; this is not supported.`)}},U_=new Map,Sre=new Map;function dvr(e){return y7e(e,t=>ii(Sre.get(t)))}function hvr(e){if(U_.has(e.key)){let r=`Duplicate atom key "${e.key}". This is a FATAL ERROR in
      production. But it is safe to ignore this warning if it occurred because of
      hot module replacement.`;console.warn(r)}U_.set(e.key,e);let t=e.set==null?new Yy.RecoilValueReadOnly(e.key):new Yy.RecoilState(e.key);return Sre.set(e.key,t),t}var ZR=class extends Error{};function mvr(e){let t=U_.get(e);if(t==null)throw new ZR(`Missing definition for RecoilValue: "${e}""`);return t}function gvr(e){return U_.get(e)}var KR=new Map;function vvr(e){var t;if(!Ei("recoil_memory_managament_2020"))return;let r=U_.get(e);if(!(r==null||(t=r.shouldDeleteConfigOnRelease)===null||t===void 0)&&t.call(r)){var n;U_.delete(e),(n=_7e(e))===null||n===void 0||n(),KR.delete(e)}}function yvr(e,t){Ei("recoil_memory_managament_2020")&&(t===void 0?KR.delete(e):KR.set(e,t))}function _7e(e){return KR.get(e)}var uf={nodes:U_,recoilValues:Sre,registerNode:hvr,getNode:mvr,getNodeMaybe:gvr,deleteNodeConfigIfPossible:vvr,setConfigDeletionHandler:yvr,getConfigDeletionHandler:_7e,recoilValuesForKeys:dvr,NodeMissingError:ZR,DefaultValue:YR,DEFAULT_VALUE:fvr,RecoilValueNotReady:rre},XR=class{};function _vr(){return new XR}var i6={RetentionZone:XR,retentionZone:_vr},{setByAddingToSet:bvr}=g7e,{getNode:a6,getNodeMaybe:xvr,recoilValuesForKeys:KFe}=uf,{RetentionZone:XFe}=i6,wvr=Object.freeze(new Set),nre=class extends Error{};function Evr(e,t,r){if(!Ei("recoil_memory_managament_2020"))return()=>{};let{nodesRetainedByZone:n}=e.getState().retention;function o(i){let a=n.get(i);a||n.set(i,a=new Set),a.add(t)}if(r instanceof XFe)o(r);else if(Array.isArray(r))for(let i of r)o(i);return()=>{if(!Ei("recoil_memory_managament_2020"))return;let i=e.getState().retention.nodesRetainedByZone;function a(c){let h=i.get(c);h&&h.delete(t),h&&h.size===0&&i.delete(c)}if(r instanceof XFe)a(r);else if(Array.isArray(r))for(let c of r)a(c)}}function Tre(e,t,r,n){let o=e.getState();if(o.nodeCleanupFunctions.has(r))return;let i=a6(r),a=Evr(e,r,i.retainedBy),c=i.init(e,t,n);o.nodeCleanupFunctions.set(r,()=>{c(),a()})}function Svr(e,t){var r;let n=e.getState();(r=n.nodeCleanupFunctions.get(t))===null||r===void 0||r(),n.nodeCleanupFunctions.delete(t)}function Tvr(e,t,r){return Tre(e,t,r,"get"),a6(r).get(e,t)}function b7e(e,t,r){return a6(r).peek(e,t)}function Ivr(e,t,r){var n;let o=xvr(t);return o==null||(n=o.invalidate)===null||n===void 0||n.call(o,e),Pt(Se({},e),{atomValues:e.atomValues.clone().delete(t),nonvalidatedAtoms:e.nonvalidatedAtoms.clone().set(t,r),dirtyAtoms:bvr(e.dirtyAtoms,t)})}function Mvr(e,t,r,n){let o=a6(r);if(o.set==null)throw new nre(`Attempt to set read-only RecoilValue: ${r}`);let i=o.set;return Tre(e,t,r,"set"),i(e,t,n)}function Cvr(e,t,r){var n,o,i;let a=e.getState(),c=e.getGraph(t.version),h=a.knownAtoms.has(r)?"atom":a.knownSelectors.has(r)?"selector":void 0,m=v7e(x7e(e,t,new Set([r])),y=>y!==r);return{loadable:b7e(e,t,r),isActive:a.knownAtoms.has(r)||a.knownSelectors.has(r),isSet:h==="selector"?!1:t.atomValues.has(r),isModified:t.dirtyAtoms.has(r),type:h,deps:KFe((n=c.nodeDeps.get(r))!==null&&n!==void 0?n:[]),subscribers:{nodes:KFe(m),components:y7e((o=(i=a.nodeToComponentSubscriptions.get(r))===null||i===void 0?void 0:i.values())!==null&&o!==void 0?o:[],([y])=>({name:y}))}}}function x7e(e,t,r){let n=new Set,o=Array.from(r),i=e.getGraph(t.version);for(let c=o.pop();c;c=o.pop()){var a;n.add(c);let h=(a=i.nodeToNodeSubscriptions.get(c))!==null&&a!==void 0?a:wvr;for(let m of h)n.has(m)||o.push(m)}return n}var oS={getNodeLoadable:Tvr,peekNodeLoadable:b7e,setNodeValue:Mvr,cleanUpNode:Svr,setUnvalidatedAtomValue_DEPRECATED:Ivr,peekNodeInfo:Cvr,getDownstreamNodes:x7e,initializeNodeIfNewToStore:Tre},{CANCELED:Avr}=nO,{getDownstreamNodes:Ovr,getNodeLoadable:w7e,setNodeValue:Pvr}=oS,{getNodeMaybe:E7e}=uf,{DefaultValue:Ire,RecoilValueNotReady:Dvr}=uf,{AbstractRecoilValue:Nvr,RecoilState:Lvr,RecoilValueReadOnly:kvr,isRecoilValue:Rvr}=Yy;function jvr(e,{key:t},r=e.getState().currentTree){var n,o;let i=e.getState();r.version===i.currentTree.version||r.version===((n=i.nextTree)===null||n===void 0?void 0:n.version)||r.version===((o=i.previousTree)===null||o===void 0?void 0:o.version)||Gh("Tried to read from a discarded tree");let a=w7e(e,r,t);return a.state==="loading"&&a.contents.catch(()=>Avr),a}function qvr(e,t){let r=e.clone();return t.forEach((n,o)=>{n.state==="hasValue"&&n.contents instanceof Ire?r.delete(o):r.set(o,n)}),r}function zvr(e,t,{key:r},n){if(typeof n=="function"){let o=w7e(e,t,r);if(o.state==="loading")throw new Dvr(r);if(o.state==="hasError")throw o.contents;return n(o.contents)}else return n}function Fvr(e,t,r){if(r.type==="set"){let{recoilValue:o,valueOrUpdater:i}=r,a=zvr(e,t,o,i),c=Pvr(e,t,o.key,a);for(let[h,m]of c.entries())ore(t,h,m)}else if(r.type==="setLoadable"){let{recoilValue:{key:o},loadable:i}=r;ore(t,o,i)}else if(r.type==="markModified"){let{recoilValue:{key:o}}=r;t.dirtyAtoms.add(o)}else if(r.type==="setUnvalidated"){var n;let{recoilValue:{key:o},unvalidatedValue:i}=r,a=E7e(o);a==null||(n=a.invalidate)===null||n===void 0||n.call(a,t),t.atomValues.delete(o),t.nonvalidatedAtoms.set(o,i),t.dirtyAtoms.add(o)}else Gh(`Unknown action ${r.type}`)}function ore(e,t,r){r.state==="hasValue"&&r.contents instanceof Ire?e.atomValues.delete(t):e.atomValues.set(t,r),e.dirtyAtoms.add(t),e.nonvalidatedAtoms.delete(t)}function S7e(e,t){e.replaceState(r=>{let n=T7e(r);for(let o of t)Fvr(e,n,o);return ire(e,n),n})}function s6(e,t){if(JA.length){let r=JA[JA.length-1],n=r.get(e);n||r.set(e,n=[]),n.push(t)}else S7e(e,[t])}var JA=[];function Uvr(){let e=new Map;return JA.push(e),()=>{for(let[r,n]of e)S7e(r,n);JA.pop()!==e&&Gh("Incorrect order of batch popping")}}function T7e(e){return Pt(Se({},e),{atomValues:e.atomValues.clone(),nonvalidatedAtoms:e.nonvalidatedAtoms.clone(),dirtyAtoms:new Set(e.dirtyAtoms)})}function ire(e,t){let r=Ovr(e,t,t.dirtyAtoms);for(let i of r){var n,o;(n=E7e(i))===null||n===void 0||(o=n.invalidate)===null||o===void 0||o.call(n,t)}}function I7e(e,t,r){s6(e,{type:"set",recoilValue:t,valueOrUpdater:r})}function Bvr(e,t,r){if(r instanceof Ire)return I7e(e,t,r);s6(e,{type:"setLoadable",recoilValue:t,loadable:r})}function Vvr(e,t){s6(e,{type:"markModified",recoilValue:t})}function Gvr(e,t,r){s6(e,{type:"setUnvalidated",recoilValue:t,unvalidatedValue:r})}var Hvr=0;function Wvr(e,{key:t},r,n=null){let o=Hvr++,i=e.getState();if(i.nodeToComponentSubscriptions.has(t)||i.nodeToComponentSubscriptions.set(t,new Map),ii(i.nodeToComponentSubscriptions.get(t)).set(o,[n!=null?n:"<not captured>",r]),Ei("recoil_early_rendering_2021")){let a=e.getState().nextTree;a&&a.dirtyAtoms.has(t)&&r(a)}return{release:()=>{let a=e.getState(),c=a.nodeToComponentSubscriptions.get(t);if(c===void 0||!c.has(o)){Gh(`Subscription missing at release time for atom ${t}. This is a bug in Recoil.`);return}c.delete(o),c.size===0&&a.nodeToComponentSubscriptions.delete(t)}}}var B_={RecoilValueReadOnly:kvr,AbstractRecoilValue:Nvr,RecoilState:Lvr,getRecoilValueAsLoadable:jvr,setRecoilValue:I7e,setRecoilValueLoadable:Bvr,markRecoilValueModified:Vvr,setUnvalidatedRecoilValue:Gvr,subscribeToRecoilValue:Wvr,isRecoilValue:Rvr,applyAtomValueWrites:qvr,batchStart:Uvr,writeLoadableToTreeState:ore,invalidateDownstreams:ire,copyTreeState:T7e,invalidateDownstreams_FOR_TESTING:ire},{unstable_batchedUpdates:$vr}=d7e.default,Yvr={unstable_batchedUpdates:$vr},{unstable_batchedUpdates:Zvr}=Yvr,Kvr={unstable_batchedUpdates:Zvr},{batchStart:Xvr}=B_,{unstable_batchedUpdates:Jvr}=Kvr,Mre=Jvr,Qvr=e=>{Mre=e},eyr=()=>Mre,tyr=e=>{Mre(()=>{let t=()=>{};try{t=Xvr(),e()}finally{t()}})},Cre={getBatcher:eyr,setBatcher:Qvr,batchUpdates:tyr};function ryr(e,t){t()}var nyr={enqueueExecution:ryr};function oyr(e,...t){let r=new Set;e:for(let n of e){for(let o of t)if(o.has(n))continue e;r.add(n)}return r}var JR=oyr;function iyr(e,t){let r=new Map;return e.forEach((n,o)=>{r.set(o,t(n,o))}),r}var QR=iyr;function ayr(){return{nodeDeps:new Map,nodeToNodeSubscriptions:new Map}}function syr(e){return{nodeDeps:QR(e.nodeDeps,t=>new Set(t)),nodeToNodeSubscriptions:QR(e.nodeToNodeSubscriptions,t=>new Set(t))}}function Qte(e,t,r){let{nodeDeps:n,nodeToNodeSubscriptions:o}=t;e.forEach((i,a)=>{let c=n.get(a);if(c&&r&&c!==r.nodeDeps.get(a))return;n.set(a,new Set(i)),(c==null?i:JR(i,c)).forEach(m=>{o.has(m)||o.set(m,new Set),ii(o.get(m)).add(a)}),c&&JR(c,i).forEach(y=>{if(!o.has(y))return;let w=ii(o.get(y));w.delete(a),w.size===0&&o.delete(y)})})}function lyr(e,t,r){var n,o,i,a;let c=t.getState();r===c.currentTree.version||r===((n=c.nextTree)===null||n===void 0?void 0:n.version)||r===((o=c.previousTree)===null||o===void 0?void 0:o.version)||Gh("Tried to save dependencies to a discarded tree");let h=t.getGraph(r);if(Qte(e,h),r===((i=c.previousTree)===null||i===void 0?void 0:i.version)){let y=t.getGraph(c.currentTree.version);Qte(e,y,h)}if(r===((a=c.previousTree)===null||a===void 0?void 0:a.version)||r===c.currentTree.version){var m;let y=(m=c.nextTree)===null||m===void 0?void 0:m.version;if(y!==void 0){let w=t.getGraph(y);Qte(e,w,h)}}}function uyr(e,t){e.forEach((r,n)=>{t.has(n)||t.set(n,new Set);let o=ii(t.get(n));r.forEach(i=>o.add(i))})}function cyr(e,t,r){r.has(e)||r.set(e,new Set),ii(r.get(e)).add(t)}var oO={addToDependencyMap:cyr,cloneGraph:syr,graph:ayr,mergeDepsIntoDependencyMap:uyr,saveDependencyMapToStore:lyr};function pyr(e,t){return t={exports:{}},e(t,t.exports),t.exports}var fyr=pyr(function(e){var t=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(be){return typeof be}:function(be){return be&&typeof Symbol=="function"&&be.constructor===Symbol&&be!==Symbol.prototype?"symbol":typeof be},r={},n=5,o=Math.pow(2,n),i=o-1,a=o/2,c=o/4,h={},m=function(Ee){return function(){return Ee}},y=r.hash=function(be){var Ee=typeof be=="undefined"?"undefined":t(be);if(Ee==="number")return be;Ee!=="string"&&(be+="");for(var Be=0,gt=0,Ae=be.length;gt<Ae;++gt){var Dt=be.charCodeAt(gt);Be=(Be<<5)-Be+Dt|0}return Be},w=function(Ee){return Ee-=Ee>>1&1431655765,Ee=(Ee&858993459)+(Ee>>2&858993459),Ee=Ee+(Ee>>4)&252645135,Ee+=Ee>>8,Ee+=Ee>>16,Ee&127},E=function(Ee,Be){return Be>>>Ee&i},A=function(Ee){return 1<<Ee},P=function(Ee,Be){return w(Ee&Be-1)},j=function(Ee,Be,gt,Ae){var Dt=Ae;if(!Ee){var Oe=Ae.length;Dt=new Array(Oe);for(var xt=0;xt<Oe;++xt)Dt[xt]=Ae[xt]}return Dt[Be]=gt,Dt},D=function(Ee,Be,gt){var Ae=gt.length-1,Dt=0,Oe=0,xt=gt;if(Ee)Dt=Oe=Be;else for(xt=new Array(Ae);Dt<Be;)xt[Oe++]=gt[Dt++];for(++Dt;Dt<=Ae;)xt[Oe++]=gt[Dt++];return Ee&&(xt.length=Ae),xt},k=function(Ee,Be,gt,Ae){var Dt=Ae.length;if(Ee){for(var Oe=Dt;Oe>=Be;)Ae[Oe--]=Ae[Oe];return Ae[Be]=gt,Ae}for(var xt=0,Bt=0,Tr=new Array(Dt+1);xt<Be;)Tr[Bt++]=Ae[xt++];for(Tr[Be]=gt;xt<Dt;)Tr[++Bt]=Ae[xt++];return Tr},z=1,V=2,G=3,K=4,Z={__hamt_isEmpty:!0},te=function(Ee){return Ee===Z||Ee&&Ee.__hamt_isEmpty},se=function(Ee,Be,gt,Ae){return{type:z,edit:Ee,hash:Be,key:gt,value:Ae,_modify:qe}},le=function(Ee,Be,gt){return{type:V,edit:Ee,hash:Be,children:gt,_modify:lt}},pe=function(Ee,Be,gt){return{type:G,edit:Ee,mask:Be,children:gt,_modify:bt}},me=function(Ee,Be,gt){return{type:K,edit:Ee,size:Be,children:gt,_modify:Tt}},_e=function(Ee){return Ee===Z||Ee.type===z||Ee.type===V},de=function(Ee,Be,gt,Ae,Dt){for(var Oe=[],xt=Ae,Bt=0,Tr=0;xt;++Tr)xt&1&&(Oe[Tr]=Dt[Bt++]),xt>>>=1;return Oe[Be]=gt,me(Ee,Bt+1,Oe)},Ce=function(Ee,Be,gt,Ae){for(var Dt=new Array(Be-1),Oe=0,xt=0,Bt=0,Tr=Ae.length;Bt<Tr;++Bt)if(Bt!==gt){var dn=Ae[Bt];dn&&!te(dn)&&(Dt[Oe++]=dn,xt|=1<<Bt)}return pe(Ee,xt,Dt)},Ye=function be(Ee,Be,gt,Ae,Dt,Oe){if(gt===Dt)return le(Ee,gt,[Oe,Ae]);var xt=E(Be,gt),Bt=E(Be,Dt);return pe(Ee,A(xt)|A(Bt),xt===Bt?[be(Ee,Be+n,gt,Ae,Dt,Oe)]:xt<Bt?[Ae,Oe]:[Oe,Ae])},rt=function(Ee,Be,gt,Ae,Dt,Oe,xt,Bt){for(var Tr=Dt.length,dn=0;dn<Tr;++dn){var wt=Dt[dn];if(gt(xt,wt.key)){var ln=wt.value,Ar=Oe(ln);return Ar===ln?Dt:Ar===h?(--Bt.value,D(Ee,dn,Dt)):j(Ee,dn,se(Be,Ae,xt,Ar),Dt)}}var or=Oe();return or===h?Dt:(++Bt.value,j(Ee,Tr,se(Be,Ae,xt,or),Dt))},ct=function(Ee,Be){return Ee===Be.edit},qe=function(Ee,Be,gt,Ae,Dt,Oe,xt){if(Be(Oe,this.key)){var Bt=Ae(this.value);return Bt===this.value?this:Bt===h?(--xt.value,Z):ct(Ee,this)?(this.value=Bt,this):se(Ee,Dt,Oe,Bt)}var Tr=Ae();return Tr===h?this:(++xt.value,Ye(Ee,gt,this.hash,this,Dt,se(Ee,Dt,Oe,Tr)))},lt=function(Ee,Be,gt,Ae,Dt,Oe,xt){if(Dt===this.hash){var Bt=ct(Ee,this),Tr=rt(Bt,Ee,Be,this.hash,this.children,Ae,Oe,xt);return Tr===this.children?this:Tr.length>1?le(Ee,this.hash,Tr):Tr[0]}var dn=Ae();return dn===h?this:(++xt.value,Ye(Ee,gt,this.hash,this,Dt,se(Ee,Dt,Oe,dn)))},bt=function(Ee,Be,gt,Ae,Dt,Oe,xt){var Bt=this.mask,Tr=this.children,dn=E(gt,Dt),wt=A(dn),ln=P(Bt,wt),Ar=Bt&wt,or=Ar?Tr[ln]:Z,Er=or._modify(Ee,Be,gt+n,Ae,Dt,Oe,xt);if(or===Er)return this;var Rt=ct(Ee,this),jo=Bt,Ko=void 0;if(Ar&&te(Er)){if(jo&=~wt,!jo)return Z;if(Tr.length<=2&&_e(Tr[ln^1]))return Tr[ln^1];Ko=D(Rt,ln,Tr)}else if(!Ar&&!te(Er)){if(Tr.length>=a)return de(Ee,dn,Er,Bt,Tr);jo|=wt,Ko=k(Rt,ln,Er,Tr)}else Ko=j(Rt,ln,Er,Tr);return Rt?(this.mask=jo,this.children=Ko,this):pe(Ee,jo,Ko)},Tt=function(Ee,Be,gt,Ae,Dt,Oe,xt){var Bt=this.size,Tr=this.children,dn=E(gt,Dt),wt=Tr[dn],ln=(wt||Z)._modify(Ee,Be,gt+n,Ae,Dt,Oe,xt);if(wt===ln)return this;var Ar=ct(Ee,this),or=void 0;if(te(wt)&&!te(ln))++Bt,or=j(Ar,dn,ln,Tr);else if(!te(wt)&&te(ln)){if(--Bt,Bt<=c)return Ce(Ee,Bt,dn,Tr);or=j(Ar,dn,Z,Tr)}else or=j(Ar,dn,ln,Tr);return Ar?(this.size=Bt,this.children=or,this):me(Ee,Bt,or)};Z._modify=function(be,Ee,Be,gt,Ae,Dt,Oe){var xt=gt();return xt===h?Z:(++Oe.value,se(be,Ae,Dt,xt))};function et(be,Ee,Be,gt,Ae){this._editable=be,this._edit=Ee,this._config=Be,this._root=gt,this._size=Ae}et.prototype.setTree=function(be,Ee){return this._editable?(this._root=be,this._size=Ee,this):be===this._root?this:new et(this._editable,this._edit,this._config,be,Ee)};var pt=r.tryGetHash=function(be,Ee,Be,gt){for(var Ae=gt._root,Dt=0,Oe=gt._config.keyEq;;)switch(Ae.type){case z:return Oe(Be,Ae.key)?Ae.value:be;case V:{if(Ee===Ae.hash)for(var xt=Ae.children,Bt=0,Tr=xt.length;Bt<Tr;++Bt){var dn=xt[Bt];if(Oe(Be,dn.key))return dn.value}return be}case G:{var wt=E(Dt,Ee),ln=A(wt);if(Ae.mask&ln){Ae=Ae.children[P(Ae.mask,ln)],Dt+=n;break}return be}case K:{if(Ae=Ae.children[E(Dt,Ee)],Ae){Dt+=n;break}return be}default:return be}};et.prototype.tryGetHash=function(be,Ee,Be){return pt(be,Ee,Be,this)};var ot=r.tryGet=function(be,Ee,Be){return pt(be,Be._config.hash(Ee),Ee,Be)};et.prototype.tryGet=function(be,Ee){return ot(be,Ee,this)};var We=r.getHash=function(be,Ee,Be){return pt(void 0,be,Ee,Be)};et.prototype.getHash=function(be,Ee){return We(be,Ee,this)};var Ne=r.get=function(be,Ee){return pt(void 0,Ee._config.hash(be),be,Ee)};et.prototype.get=function(be,Ee){return ot(Ee,be,this)};var Ke=r.has=function(be,Ee,Be){return pt(h,be,Ee,Be)!==h};et.prototype.hasHash=function(be,Ee){return Ke(be,Ee,this)};var Ge=r.has=function(be,Ee){return Ke(Ee._config.hash(be),be,Ee)};et.prototype.has=function(be){return Ge(be,this)};var ft=function(Ee,Be){return Ee===Be};r.make=function(be){return new et(0,0,{keyEq:be&&be.keyEq||ft,hash:be&&be.hash||y},Z,0)},r.empty=r.make();var mt=r.isEmpty=function(be){return be&&!!te(be._root)};et.prototype.isEmpty=function(){return mt(this)};var Ot=r.modifyHash=function(be,Ee,Be,gt){var Ae={value:gt._size},Dt=gt._root._modify(gt._editable?gt._edit:NaN,gt._config.keyEq,0,be,Ee,Be,Ae);return gt.setTree(Dt,Ae.value)};et.prototype.modifyHash=function(be,Ee,Be){return Ot(Be,be,Ee,this)};var At=r.modify=function(be,Ee,Be){return Ot(be,Be._config.hash(Ee),Ee,Be)};et.prototype.modify=function(be,Ee){return At(Ee,be,this)};var Mt=r.setHash=function(be,Ee,Be,gt){return Ot(m(Be),be,Ee,gt)};et.prototype.setHash=function(be,Ee,Be){return Mt(be,Ee,Be,this)};var Yt=r.set=function(be,Ee,Be){return Mt(Be._config.hash(be),be,Ee,Be)};et.prototype.set=function(be,Ee){return Yt(be,Ee,this)};var qt=m(h),Ut=r.removeHash=function(be,Ee,Be){return Ot(qt,be,Ee,Be)};et.prototype.removeHash=et.prototype.deleteHash=function(be,Ee){return Ut(be,Ee,this)};var sr=r.remove=function(be,Ee){return Ut(Ee._config.hash(be),be,Ee)};et.prototype.remove=et.prototype.delete=function(be){return sr(be,this)};var jr=r.beginMutation=function(be){return new et(be._editable+1,be._edit+1,be._config,be._root,be._size)};et.prototype.beginMutation=function(){return jr(this)};var Pr=r.endMutation=function(be){return be._editable=be._editable&&be._editable-1,be};et.prototype.endMutation=function(){return Pr(this)};var br=r.mutate=function(be,Ee){var Be=jr(Ee);return be(Be),Pr(Be)};et.prototype.mutate=function(be){return br(be,this)};var Dr=function(Ee){return Ee&&ke(Ee[0],Ee[1],Ee[2],Ee[3],Ee[4])},ke=function(Ee,Be,gt,Ae,Dt){for(;gt<Ee;){var Oe=Be[gt++];if(Oe&&!te(Oe))return Je(Oe,Ae,[Ee,Be,gt,Ae,Dt])}return Dr(Dt)},Je=function(Ee,Be,gt){switch(Ee.type){case z:return{value:Be(Ee),rest:gt};case V:case K:case G:var Ae=Ee.children;return ke(Ae.length,Ae,0,Be,gt);default:return Dr(gt)}},tt={done:!0};function Ft(be){this.v=be}Ft.prototype.next=function(){if(!this.v)return tt;var be=this.v;return this.v=Dr(be.rest),be},Ft.prototype[Symbol.iterator]=function(){return this};var Wt=function(Ee,Be){return new Ft(Je(Ee._root,Be))},xe=function(Ee){return[Ee.key,Ee.value]},J=r.entries=function(be){return Wt(be,xe)};et.prototype.entries=et.prototype[Symbol.iterator]=function(){return J(this)};var oe=function(Ee){return Ee.key},ue=r.keys=function(be){return Wt(be,oe)};et.prototype.keys=function(){return ue(this)};var we=function(Ee){return Ee.value},Fe=r.values=et.prototype.values=function(be){return Wt(be,we)};et.prototype.values=function(){return Fe(this)};var $e=r.fold=function(be,Ee,Be){var gt=Be._root;if(gt.type===z)return be(Ee,gt.value,gt.key);for(var Ae=[gt.children],Dt=void 0;Dt=Ae.pop();)for(var Oe=0,xt=Dt.length;Oe<xt;){var Bt=Dt[Oe++];Bt&&Bt.type&&(Bt.type===z?Ee=be(Ee,Bt.value,Bt.key):Ae.push(Bt.children))}return Ee};et.prototype.fold=function(be,Ee){return $e(be,Ee,this)};var nt=r.forEach=function(be,Ee){return $e(function(Be,gt,Ae){return be(gt,Ae,Ee)},null,Ee)};et.prototype.forEach=function(be){return nt(be,this)};var Ze=r.count=function(be){return be._size};et.prototype.count=function(){return Ze(this)},Object.defineProperty(et.prototype,"size",{get:et.prototype.count}),e.exports?e.exports=r:(void 0).hamt=r}),are=class{constructor(t){Do(this,"_map",void 0),this._map=new Map(t==null?void 0:t.entries())}keys(){return this._map.keys()}entries(){return this._map.entries()}get(t){return this._map.get(t)}has(t){return this._map.has(t)}set(t,r){return this._map.set(t,r),this}delete(t){return this._map.delete(t),this}clone(){return Are(this)}toMap(){return new Map(this._map)}},sre=class e{constructor(t){if(Do(this,"_hamt",fyr.empty.beginMutation()),t instanceof e){let r=t._hamt.endMutation();t._hamt=r.beginMutation(),this._hamt=r.beginMutation()}else if(t)for(let[r,n]of t.entries())this._hamt.set(r,n)}keys(){return this._hamt.keys()}entries(){return this._hamt.entries()}get(t){return this._hamt.get(t)}has(t){return this._hamt.has(t)}set(t,r){return this._hamt.set(t,r),this}delete(t){return this._hamt.delete(t),this}clone(){return Are(this)}toMap(){return new Map(this._hamt)}};function Are(e){return Ei("recoil_hamt_2020")?new sre(e):new are(e)}var dyr={persistentMap:Are},hyr=dyr.persistentMap,myr=Object.freeze({__proto__:null,persistentMap:hyr}),{graph:gyr}=oO,{persistentMap:JFe}=myr,vyr=0,M7e=()=>vyr++;function C7e(){let e=M7e();return{version:e,stateID:e,transactionMetadata:{},dirtyAtoms:new Set,atomValues:JFe(),nonvalidatedAtoms:JFe()}}function yyr(){let e=C7e();return{currentTree:e,nextTree:null,previousTree:null,commitDepth:0,knownAtoms:new Set,knownSelectors:new Set,transactionSubscriptions:new Map,nodeTransactionSubscriptions:new Map,nodeToComponentSubscriptions:new Map,queuedComponentCallbacks_DEPRECATED:[],suspendedComponentResolvers:new Set,graphsByVersion:new Map().set(e.version,gyr()),versionsUsedByComponent:new Map,retention:{referenceCounts:new Map,nodesRetainedByZone:new Map,retainablesToCheckForRelease:new Set},nodeCleanupFunctions:new Map}}var A7e={makeEmptyTreeState:C7e,makeEmptyStoreState:yyr,getNextTreeStateVersion:M7e};function _yr(...e){let t=new Set;for(let r of e)for(let n of r)t.add(n);return t}var byr=_yr;function xyr(e,t,r){let n=e.entries(),o=n.next();for(;!o.done;){let i=o.value;if(t.call(r,i[1],i[0],e))return!0;o=n.next()}return!1}var wyr=xyr,{cleanUpNode:Eyr}=oS,{deleteNodeConfigIfPossible:Syr,getNode:O7e}=uf,{RetentionZone:P7e}=i6,D7e=new Set;function N7e(e,t){let r=e.getState(),n=r.currentTree;if(r.nextTree){Gh("releaseNodesNowOnCurrentTree should only be called at the end of a batch");return}let o=new Set;for(let a of t)if(a instanceof P7e)for(let c of Cyr(r,a))o.add(c);else o.add(a);let i=Tyr(e,o);for(let a of i)Myr(e,n,a)}function Tyr(e,t){let r=e.getState(),n=r.currentTree,o=e.getGraph(n.version),i=new Set,a=new Set;return c(t),i;function c(h){let m=new Set,y=Iyr(e,n,h,i,a);for(let P of y){var w;if(O7e(P).retainedBy==="recoilRoot"){a.add(P);continue}if(((w=r.retention.referenceCounts.get(P))!==null&&w!==void 0?w:0)>0){a.add(P);continue}if(L7e(P).some(D=>r.retention.referenceCounts.get(D))){a.add(P);continue}let j=o.nodeToNodeSubscriptions.get(P);if(j&&wyr(j,D=>a.has(D))){a.add(P);continue}i.add(P),m.add(P)}let E=new Set;for(let P of m)for(let j of(A=o.nodeDeps.get(P))!==null&&A!==void 0?A:D7e){var A;i.has(j)||E.add(j)}E.size&&c(E)}}function Iyr(e,t,r,n,o){let i=e.getGraph(t.version),a=[],c=new Set;for(;r.size>0;)h(ii(r.values().next().value));return a;function h(m){if(n.has(m)||o.has(m)){r.delete(m);return}if(c.has(m))return;let y=i.nodeToNodeSubscriptions.get(m);if(y)for(let w of y)h(w);c.add(m),r.delete(m),a.push(m)}}function Myr(e,t,r){if(!Ei("recoil_memory_managament_2020"))return;Eyr(e,r);let n=e.getState();n.knownAtoms.delete(r),n.knownSelectors.delete(r),n.nodeTransactionSubscriptions.delete(r),n.retention.referenceCounts.delete(r);let o=L7e(r);for(let h of o){var i;(i=n.retention.nodesRetainedByZone.get(h))===null||i===void 0||i.delete(r)}t.atomValues.delete(r),t.dirtyAtoms.delete(r),t.nonvalidatedAtoms.delete(r);let a=n.graphsByVersion.get(t.version);if(a){let h=a.nodeDeps.get(r);if(h!==void 0){a.nodeDeps.delete(r);for(let m of h){var c;(c=a.nodeToNodeSubscriptions.get(m))===null||c===void 0||c.delete(r)}}a.nodeToNodeSubscriptions.delete(r)}Syr(r)}function Cyr(e,t){var r;return(r=e.retention.nodesRetainedByZone.get(t))!==null&&r!==void 0?r:D7e}function L7e(e){let t=O7e(e).retainedBy;return t===void 0||t==="components"||t==="recoilRoot"?[]:t instanceof P7e?[t]:t}function Ayr(e,t){let r=e.getState();r.nextTree?r.retention.retainablesToCheckForRelease.add(t):N7e(e,new Set([t]))}function Oyr(e,t,r){var n;if(!Ei("recoil_memory_managament_2020"))return;let o=e.getState().retention.referenceCounts,i=((n=o.get(t))!==null&&n!==void 0?n:0)+r;i===0?k7e(e,t):o.set(t,i)}function k7e(e,t){if(!Ei("recoil_memory_managament_2020"))return;e.getState().retention.referenceCounts.delete(t),Ayr(e,t)}function Pyr(e){if(!Ei("recoil_memory_managament_2020"))return;let t=e.getState();N7e(e,t.retention.retainablesToCheckForRelease),t.retention.retainablesToCheckForRelease.clear()}function Dyr(e){return e===void 0?"recoilRoot":e}var iO={updateRetainCount:Oyr,updateRetainCountToZero:k7e,releaseScheduledRetainablesNow:Pyr,retainedByOptionWithDefault:Dyr};function*Nyr(e){for(let t of e)for(let r of t)yield r}var Lyr=Nyr,kyr=typeof window=="undefined",Ryr=typeof navigator!="undefined"&&navigator.product==="ReactNative",Ore={isSSR:kyr,isReactNative:Ryr},{isSSR:jyr}=Ore,{batchUpdates:lre}=Cre,{initializeNodeIfNewToStore:qyr,peekNodeInfo:zyr}=oS,{graph:Fyr}=oO,{DEFAULT_VALUE:Uyr,recoilValues:QFe,recoilValuesForKeys:e7e}=uf,{AbstractRecoilValue:Byr,getRecoilValueAsLoadable:Vyr,setRecoilValue:t7e,setUnvalidatedRecoilValue:Gyr}=B_,{updateRetainCount:GR}=iO,{getNextTreeStateVersion:Hyr,makeEmptyStoreState:Wyr}=A7e;var rS=class{constructor(t){Do(this,"_store",void 0),Do(this,"_refCount",0),Do(this,"getLoadable",r=>(this.checkRefCount_INTERNAL(),Vyr(this._store,r))),Do(this,"getPromise",r=>(this.checkRefCount_INTERNAL(),this.getLoadable(r).toPromise())),Do(this,"getNodes_UNSTABLE",r=>{if(this.checkRefCount_INTERNAL(),(r==null?void 0:r.isModified)===!0){if((r==null?void 0:r.isInitialized)===!1)return[];let i=this._store.getState().currentTree;return e7e(i.dirtyAtoms)}let n=this._store.getState().knownAtoms,o=this._store.getState().knownSelectors;return(r==null?void 0:r.isInitialized)==null?QFe.values():r.isInitialized===!0?e7e(Lyr([this._store.getState().knownAtoms,this._store.getState().knownSelectors])):v7e(QFe.values(),({key:i})=>!n.has(i)&&!o.has(i))}),Do(this,"getInfo_UNSTABLE",({key:r})=>(this.checkRefCount_INTERNAL(),zyr(this._store,this._store.getState().currentTree,r))),Do(this,"map",r=>{this.checkRefCount_INTERNAL();let n=new tO(this,lre);return r(n),ure(n.getStore_INTERNAL())}),Do(this,"asyncMap",r=>vt(this,null,function*(){this.checkRefCount_INTERNAL();let n=new tO(this,lre);return yield r(n),ure(n.getStore_INTERNAL())})),this._store={getState:()=>t,replaceState:r=>{t.currentTree=r(t.currentTree)},getGraph:r=>{let n=t.graphsByVersion;if(n.has(r))return ii(n.get(r));let o=Fyr();return n.set(r,o),o},subscribeToTransactions:()=>({release:()=>{}}),addTransactionMetadata:()=>{throw new Error("Cannot subscribe to Snapshots")}};for(let r of this._store.getState().nodeCleanupFunctions.keys())qyr(this._store,t.currentTree,r,"get"),GR(this._store,r,1);this.retain(),this.autorelease_INTERNAL()}retain(){if(!Ei("recoil_memory_managament_2020"))return()=>{};this._refCount++;let t=!1;return()=>{t||(t=!0,this.release_INTERNAL())}}autorelease_INTERNAL(){Ei("recoil_memory_managament_2020")&&(jyr||window.setTimeout(()=>this.release_INTERNAL(),0))}release_INTERNAL(){Ei("recoil_memory_managament_2020")&&(this._refCount--,this._refCount)}checkRefCount_INTERNAL(){Ei("recoil_memory_managament_2020")&&this._refCount<=0}getStore_INTERNAL(){return this.checkRefCount_INTERNAL(),this._store}getID(){return this.checkRefCount_INTERNAL(),this.getID_INTERNAL()}getID_INTERNAL(){return this.checkRefCount_INTERNAL(),this._store.getState().currentTree.stateID}};function R7e(e,t,r=!1){let n=e.getState(),o=r?Hyr():t.version;return{currentTree:r?{version:o,stateID:o,transactionMetadata:Se({},t.transactionMetadata),dirtyAtoms:new Set(t.dirtyAtoms),atomValues:t.atomValues.clone(),nonvalidatedAtoms:t.nonvalidatedAtoms.clone()}:t,commitDepth:0,nextTree:null,previousTree:null,knownAtoms:new Set(n.knownAtoms),knownSelectors:new Set(n.knownSelectors),transactionSubscriptions:new Map,nodeTransactionSubscriptions:new Map,nodeToComponentSubscriptions:new Map,queuedComponentCallbacks_DEPRECATED:[],suspendedComponentResolvers:new Set,graphsByVersion:new Map().set(o,e.getGraph(t.version)),versionsUsedByComponent:new Map,retention:{referenceCounts:new Map,nodesRetainedByZone:new Map,retainablesToCheckForRelease:new Set},nodeCleanupFunctions:new Map}}function $yr(e){let t=new rS(Wyr());return e!=null?t.map(e):t}function ure(e,t="current"){let r=e.getState(),n=t==="current"?r.currentTree:ii(r.previousTree);return new rS(R7e(e,n))}var tO=class extends rS{constructor(t,r){super(R7e(t.getStore_INTERNAL(),t.getStore_INTERNAL().getState().currentTree,!0)),Do(this,"_batch",void 0),Do(this,"set",(n,o)=>{this.checkRefCount_INTERNAL();let i=this.getStore_INTERNAL();this._batch(()=>{GR(i,n.key,1),t7e(this.getStore_INTERNAL(),n,o)})}),Do(this,"reset",n=>{this.checkRefCount_INTERNAL();let o=this.getStore_INTERNAL();this._batch(()=>{GR(o,n.key,1),t7e(this.getStore_INTERNAL(),n,Uyr)})}),Do(this,"setUnvalidatedAtomValues_DEPRECATED",n=>{this.checkRefCount_INTERNAL();let o=this.getStore_INTERNAL();lre(()=>{for(let[i,a]of n.entries())GR(o,i,1),Gyr(o,new Byr(i),a)})}),this._batch=r}},l6={Snapshot:rS,MutableSnapshot:tO,freshSnapshot:$yr,cloneSnapshot:ure},Yyr=l6.Snapshot,Zyr=l6.MutableSnapshot,Kyr=l6.freshSnapshot,Xyr=l6.cloneSnapshot,u6=Object.freeze({__proto__:null,Snapshot:Yyr,MutableSnapshot:Zyr,freshSnapshot:Kyr,cloneSnapshot:Xyr}),{getNextTreeStateVersion:Jyr,makeEmptyStoreState:j7e}=A7e,{cleanUpNode:Qyr,getDownstreamNodes:e0r,setNodeValue:t0r,setUnvalidatedAtomValue_DEPRECATED:r0r}=oS,{graph:n0r}=oO,{cloneGraph:o0r}=oO,{applyAtomValueWrites:i0r}=B_,{releaseScheduledRetainablesNow:q7e}=iO,{freshSnapshot:a0r}=u6,{useCallback:s0r,useContext:z7e,useEffect:cre,useMemo:l0r,useRef:ere,useState:u0r}=su.default;function WA(){throw new Error("This component must be used inside a <RecoilRoot> component.")}var F7e=Object.freeze({getState:WA,replaceState:WA,getGraph:WA,subscribeToTransactions:WA,addTransactionMetadata:WA}),pre=!1;function r7e(e){if(pre)throw new Error("An atom update was triggered within the execution of a state updater function. State updater functions provided to Recoil must be pure functions.");let t=e.getState();if(t.nextTree===null){Ei("recoil_memory_managament_2020")&&Ei("recoil_release_on_cascading_update_killswitch_2021")&&t.commitDepth>0&&q7e(e);let r=t.currentTree.version,n=Jyr();t.nextTree=Pt(Se({},t.currentTree),{version:n,stateID:n,dirtyAtoms:new Set,transactionMetadata:{}}),t.graphsByVersion.set(n,o0r(ii(t.graphsByVersion.get(r))))}}var U7e=su.default.createContext({current:F7e}),Pre=()=>z7e(U7e),B7e=su.default.createContext(null);function c0r(){let e=z7e(B7e);return e==null&&Ere("Attempted to use a Recoil hook outside of a <RecoilRoot>. <RecoilRoot> must be an ancestor of any component that uses Recoil hooks."),e}function Dre(e,t,r){let n=e0r(e,r,r.dirtyAtoms);for(let o of n){let i=t.nodeToComponentSubscriptions.get(o);if(i)for(let[a,[c,h]]of i)h(r)}}function V7e(e){let t=e.getState(),r=t.currentTree,n=r.dirtyAtoms;if(n.size){for(let[o,i]of t.nodeTransactionSubscriptions)if(n.has(o))for(let[a,c]of i)c(e);for(let[o,i]of t.transactionSubscriptions)i(e);(!Ei("recoil_early_rendering_2021")||t.suspendedComponentResolvers.size)&&(Dre(e,t,r),t.suspendedComponentResolvers.forEach(o=>o()),t.suspendedComponentResolvers.clear())}t.queuedComponentCallbacks_DEPRECATED.forEach(o=>o(r)),t.queuedComponentCallbacks_DEPRECATED.splice(0,t.queuedComponentCallbacks_DEPRECATED.length)}function p0r(e){let t=e.current.getState();t.commitDepth++;try{let{nextTree:r}=t;if(r===null)return;t.previousTree=t.currentTree,t.currentTree=r,t.nextTree=null,V7e(e.current),t.previousTree!=null?t.graphsByVersion.delete(t.previousTree.version):Gh("Ended batch with no previous state, which is unexpected","recoil"),t.previousTree=null,Ei("recoil_memory_managament_2020")&&q7e(e.current)}finally{t.commitDepth--}}function f0r({setNotifyBatcherOfChange:e}){let t=Pre(),[r,n]=u0r([]);return e(()=>n({})),cre(()=>{nyr.enqueueExecution("Batcher",()=>{p0r(t)})}),cre(()=>()=>{e(()=>{})},[e]),null}function d0r(e,t){let r=j7e();return t({set:(n,o)=>{let i=r.currentTree,a=t0r(e,i,n.key,o),c=new Set(a.keys()),h=i.nonvalidatedAtoms.clone();for(let m of c)h.delete(m);r.currentTree=Pt(Se({},i),{dirtyAtoms:byr(i.dirtyAtoms,c),atomValues:i0r(i.atomValues,a),nonvalidatedAtoms:h})},setUnvalidatedAtomValues:n=>{n.forEach((o,i)=>{r.currentTree=r0r(r.currentTree,i,o)})}}),r}function h0r(e){return a0r().map(e).getStore_INTERNAL().getState()}var n7e=0;function m0r({initializeState_DEPRECATED:e,initializeState:t,store_INTERNAL:r,children:n}){var o;let i,a=D=>{let k=i.current.graphsByVersion;if(k.has(D))return ii(k.get(D));let z=n0r();return k.set(D,z),z},c=(D,k)=>{if(k==null){let{transactionSubscriptions:z}=P.current.getState(),V=n7e++;return z.set(V,D),{release:()=>{z.delete(V)}}}else{let{nodeTransactionSubscriptions:z}=P.current.getState();z.has(k)||z.set(k,new Map);let V=n7e++;return ii(z.get(k)).set(V,D),{release:()=>{let G=z.get(k);G&&(G.delete(V),G.size===0&&z.delete(k))}}}},h=D=>{r7e(P.current);for(let k of Object.keys(D))ii(P.current.getState().nextTree).transactionMetadata[k]=D[k]},m=D=>{let k=P.current.getState();r7e(P.current);let z=ii(k.nextTree),V;try{pre=!0,V=D(z)}finally{pre=!1}V!==z&&(k.nextTree=V,Ei("recoil_early_rendering_2021")&&Dre(A,k,V),ii(y.current)())},y=ere(null),w=s0r(D=>{y.current=D},[y]),E=(o=su.default.createMutableSource)!==null&&o!==void 0?o:su.default.unstable_createMutableSource,A=r!=null?r:{getState:()=>i.current,replaceState:m,getGraph:a,subscribeToTransactions:c,addTransactionMetadata:h},P=ere(A);i=ere(e!=null?d0r(A,e):t!=null?h0r(t):j7e());let j=l0r(()=>E?E(i,()=>i.current.currentTree.version):null,[E,i]);return cre(()=>()=>{for(let D of P.current.getState().knownAtoms)Qyr(P.current,D)},[]),su.default.createElement(U7e.Provider,{value:P},su.default.createElement(B7e.Provider,{value:j},su.default.createElement(f0r,{setNotifyBatcherOfChange:w}),n))}function g0r(e){let o=e,{override:t}=o,r=En(o,["override"]),n=Pre();return t===!1&&n.current!==F7e?e.children:su.default.createElement(m0r,r)}var c6={useStoreRef:Pre,useRecoilMutableSource:c0r,RecoilRoot:g0r,notifyComponents_FOR_TESTING:Dre,sendEndOfBatchNotifications_FOR_TESTING:V7e},{loadableWithValue:v0r}=nO,{DEFAULT_VALUE:y0r,getNode:_0r}=uf,{copyTreeState:b0r,getRecoilValueAsLoadable:x0r,invalidateDownstreams:w0r,writeLoadableToTreeState:E0r}=B_;function o7e(e){return _0r(e.key).nodeType==="atom"}var fre=class{constructor(t,r){Do(this,"_store",void 0),Do(this,"_treeState",void 0),Do(this,"_changes",void 0),Do(this,"get",n=>{if(this._changes.has(n.key))return this._changes.get(n.key);if(!o7e(n))throw new Error("Reading selectors within atomicUpdate is not supported");let o=x0r(this._store,n,this._treeState);if(o.state==="hasValue")return o.contents;throw o.state==="hasError"?o.contents:new Error(`Expected Recoil atom ${n.key} to have a value, but it is in a loading state.`)}),Do(this,"set",(n,o)=>{if(!o7e(n))throw new Error("Setting selectors within atomicUpdate is not supported");if(typeof o=="function"){let i=this.get(n);this._changes.set(n.key,o(i))}else this._changes.set(n.key,o)}),Do(this,"reset",n=>{this.set(n,y0r)}),this._store=t,this._treeState=r,this._changes=new Map}newTreeState_INTERNAL(){if(this._changes.size===0)return this._treeState;let t=b0r(this._treeState);for(let[r,n]of this._changes)E0r(t,r,v0r(n));return w0r(this._store,t),t}};function S0r(e){return t=>{e.replaceState(r=>{let n=new fre(e,r);return t(n),n.newTreeState_INTERNAL()})}}var T0r={atomicUpdater:S0r},I0r=T0r.atomicUpdater,M0r=Object.freeze({__proto__:null,atomicUpdater:I0r});function C0r(e,t){let r=new Map;for(let[n,o]of e)t(o,n)&&r.set(n,o);return r}var A0r=C0r;function O0r(e,t){let r=new Set;for(let n of e)t(n)&&r.add(n);return r}var P0r=O0r;function D0r(e,t){if(!e)throw new Error(t)}var N0r=D0r,e6=N0r;function L0r(...e){let t=new Map;for(let r=0;r<e.length;r++){let n=e[r].keys(),o;for(;!(o=n.next()).done;)t.set(o.value,e[r].get(o.value))}return t}var k0r=L0r;function R0r(e,t){if(e===t)return!0;if(e.length!==t.length)return!1;for(let r=0,n=e.length;r<n;r++)if(e[r]!==t[r])return!1;return!0}var j0r=R0r;var{useRef:q0r}=su.default;function z0r(){let e=q0r();if(0&&Ei("recoil_infer_component_names"))var t;return"<component name not available>"}var Nre=z0r,{atomicUpdater:G7e}=M0r,{batchUpdates:Lre}=Cre,{DEFAULT_VALUE:p6,getNode:H7e,nodes:F0r}=uf,{useRecoilMutableSource:U0r,useStoreRef:gp}=c6,{isRecoilValue:LEn}=Yy,{AbstractRecoilValue:kre,getRecoilValueAsLoadable:QA,setRecoilValue:nS,setRecoilValueLoadable:B0r,setUnvalidatedRecoilValue:V0r,subscribeToRecoilValue:Rre}=B_,{updateRetainCount:$A}=iO,{RetentionZone:G0r}=i6,{Snapshot:kEn,cloneSnapshot:rO}=u6,{setByAddingToSet:H0r}=g7e,{isSSR:t6}=Ore,{mutableSourceExists:W0r,useMutableSource:$0r}=m7e,{useCallback:Id,useEffect:Dg,useMemo:W7e,useRef:$y,useState:jre}=su.default,$7e=12e4;function Y7e(e,t,r){if(e.state==="hasValue")return e.contents;throw e.state==="loading"?new Promise(o=>{r.current.getState().suspendedComponentResolvers.add(o)}):e.state==="hasError"?e.contents:new Error(`Invalid value of loadable atom "${t.key}"`)}function Y0r(){let e=gp(),[t,r]=jre([]),n=$y(new Set);n.current=new Set;let o=$y(new Set),i=$y(new Map),a=Id(h=>{let m=i.current.get(h);m&&(m.release(),i.current.delete(h))},[i]),c=Nre();return Dg(()=>{let h=e.current;function m(y,w){i.current.has(w)&&r([])}JR(n.current,o.current).forEach(y=>{if(i.current.has(y)){Ere(`Double subscription to RecoilValue "${y}"`);return}let w=Rre(h,new kre(y),A=>{m(A,y)},c);i.current.set(y,w),h.getState().nextTree?h.getState().queuedComponentCallbacks_DEPRECATED.push(()=>{m(h.getState(),y)}):m(h.getState(),y)}),JR(o.current,n.current).forEach(y=>{a(y)}),o.current=n.current}),Dg(()=>{let h=i.current;return()=>h.forEach((m,y)=>a(y))},[a]),W7e(()=>{function h(P){return j=>{nS(e.current,P,j)}}function m(P){return()=>nS(e.current,P,p6)}function y(P){var j;n.current.has(P.key)||(n.current=H0r(n.current,P.key));let D=e.current.getState();return QA(e.current,P,Ei("recoil_early_rendering_2021")&&(j=D.nextTree)!==null&&j!==void 0?j:D.currentTree)}function w(P){let j=y(P);return Y7e(j,P,e)}function E(P){return[w(P),h(P)]}function A(P){return[y(P),h(P)]}return{getRecoilValue:w,getRecoilValueLoadable:y,getRecoilState:E,getRecoilStateLoadable:A,getSetRecoilState:h,getResetRecoilState:m}},[n,e])}var Z0r={current:0};function K0r(e){let t=gp(),r=Id(()=>{var m;let y=t.current,w=y.getState(),E=Ei("recoil_early_rendering_2021")&&(m=w.nextTree)!==null&&m!==void 0?m:w.currentTree;return QA(y,e,E)},[t,e]),n=Id(()=>r(),[r]),o=Nre(),i=Id((m,y)=>{let w=t.current;return Rre(w,e,()=>{if(!Ei("recoil_suppress_rerender_in_callback"))return y();let A=r();h.current.is(A)||y(),h.current=A},o).release},[t,e,o,r]),a=U0r(),c=$0r(a,n,i),h=$y(c);return Dg(()=>{h.current=c}),c}function X0r(e){let t=gp(),[r,n]=jre([]),o=Nre();Dg(()=>{let c=t.current,h=c.getState(),m=Rre(c,e,w=>{var E;if(!Ei("recoil_suppress_rerender_in_callback"))return n([]);let A=QA(c,e,c.getState().currentTree);!((E=a.current)===null||E===void 0)&&E.is(A)||n(A),a.current=A},o);if(h.nextTree)c.getState().queuedComponentCallbacks_DEPRECATED.push(()=>{a.current=null,n([])});else{var y;if(!Ei("recoil_suppress_rerender_in_callback"))return n([]);let w=QA(c,e,c.getState().currentTree);!((y=a.current)===null||y===void 0)&&y.is(w)||n(w),a.current=w}return m.release},[o,e,t]);let i=QA(t.current,e),a=$y(i);return Dg(()=>{a.current=i}),i}function qre(e){return Ei("recoil_memory_managament_2020")&&J7e(e),W0r()?K0r(e):X0r(e)}function Z7e(e){let t=gp(),r=qre(e);return Y7e(r,e,t)}function zre(e){let t=gp();return Id(r=>{nS(t.current,e,r)},[t,e])}function J0r(e){let t=gp();return Id(()=>{nS(t.current,e,p6)},[t,e])}function Q0r(e){return[Z7e(e),zre(e)]}function e1r(e){return[qre(e),zre(e)]}function f6(e){let t=gp();Dg(()=>t.current.subscribeToTransactions(e).release,[e,t])}function i7e(e){let t=e.atomValues.toMap(),r=QR(A0r(t,(n,o)=>{let a=H7e(o).persistence_UNSTABLE;return a!=null&&a.type!=="none"&&n.state==="hasValue"}),n=>n.contents);return k0r(e.nonvalidatedAtoms.toMap(),r)}function t1r(e){f6(Id(t=>{let r=t.getState().previousTree,n=t.getState().currentTree;r||(Gh("Transaction subscribers notified without a previous tree being present -- this is a bug in Recoil"),r=t.getState().currentTree);let o=i7e(n),i=i7e(r),a=QR(F0r,h=>{var m,y,w,E;return{persistence_UNSTABLE:{type:(m=(y=h.persistence_UNSTABLE)===null||y===void 0?void 0:y.type)!==null&&m!==void 0?m:"none",backButton:(w=(E=h.persistence_UNSTABLE)===null||E===void 0?void 0:E.backButton)!==null&&w!==void 0?w:!1}}}),c=P0r(n.dirtyAtoms,h=>o.has(h)||i.has(h));e({atomValues:o,previousAtomValues:i,atomInfo:a,modifiedAtoms:c,transactionMetadata:Se({},n.transactionMetadata)})},[e]))}function r1r(e){f6(Id(t=>{let r=rO(t,"current"),n=rO(t,"previous");e({snapshot:r,previousSnapshot:n})},[e]))}function K7e(e){let t=$y();return Dg(()=>{t.current=e}),t.current}function n1r(){let e=gp(),[t,r]=jre(()=>rO(e.current)),n=K7e(t),o=$y();return Dg(()=>(o.current&&!t6&&window.clearTimeout(o.current),t.retain()),[t]),f6(Id(i=>r(rO(i)),[])),n!==t&&!t6&&(o.current&&(n==null||n.release_INTERNAL(),window.clearTimeout(o.current)),t.retain(),o.current=window.setTimeout(()=>{t.release_INTERNAL(),o.current=null},$7e)),t}function X7e(){let e=gp();return Id(t=>{var r;let n=e.current.getState(),o=(r=n.nextTree)!==null&&r!==void 0?r:n.currentTree,i=t.getStore_INTERNAL().getState().currentTree;Lre(()=>{let a=new Set;for(let m of[o.atomValues.keys(),i.atomValues.keys()])for(let y of m){var c,h;((c=o.atomValues.get(y))===null||c===void 0?void 0:c.contents)!==((h=i.atomValues.get(y))===null||h===void 0?void 0:h.contents)&&H7e(y).shouldRestoreFromSnapshots&&a.add(y)}a.forEach(m=>{B0r(e.current,new kre(m),i.atomValues.has(m)?ii(i.atomValues.get(m)):p6)}),e.current.replaceState(m=>Pt(Se({},m),{stateID:t.getID_INTERNAL()}))})},[e])}function o1r(){let e=gp();return(t,r={})=>{Lre(()=>{e.current.addTransactionMetadata(r),t.forEach((n,o)=>V0r(e.current,new kre(o),n))})}}var r6=class{},i1r=new r6;function a1r(e,t){let r=gp(),n=X7e();return Id((...o)=>{function i(y,w){nS(r.current,y,w)}function a(y){nS(r.current,y,p6)}let c=rO(r.current),h=G7e(r.current),m=i1r;return Lre(()=>{let y="useRecoilCallback expects a function that returns a function: it accepts a function of the type (RecoilInterface) => T = R and returns a callback function T => R, where RecoilInterface is an object {snapshot, set, ...} and T and R are the argument and return types of the callback you want to create.  Please see the docs at recoiljs.org for details.";if(typeof e!="function")throw new Error(y);let w=e({set:i,reset:a,snapshot:c,gotoSnapshot:n,transact_UNSTABLE:h});if(typeof w!="function")throw new Error(y);m=w(...o)}),m instanceof r6&&e6(!1),m},t!=null?[...t,r]:void 0)}function J7e(e){if(Ei("recoil_memory_managament_2020"))return s1r(e)}function s1r(e){let r=(Array.isArray(e)?e:[e]).map(a=>a instanceof G0r?a:a.key),n=gp();Dg(()=>{if(!Ei("recoil_memory_managament_2020"))return;let a=n.current;if(o.current&&!t6)window.clearTimeout(o.current),o.current=null;else for(let c of r)$A(a,c,1);return()=>{for(let c of r)$A(a,c,-1)}},[n,...r]);let o=$y(),i=K7e(r);if(!t6&&(i===void 0||!j0r(i,r))){let a=n.current;for(let c of r)$A(a,c,1);if(i)for(let c of i)$A(a,c,-1);o.current&&window.clearTimeout(o.current),o.current=window.setTimeout(()=>{o.current=null;for(let c of r)$A(a,c,-1)},$7e)}}function l1r(e,t){let r=gp();return W7e(()=>(...n)=>{G7e(r.current)(i=>{e(i)(...n)})},t!=null?[...t,r]:void 0)}var u1r={recoilComponentGetRecoilValueCount_FOR_TESTING:Z0r,useGotoRecoilSnapshot:X7e,useRecoilCallback:a1r,useRecoilInterface:Y0r,useRecoilSnapshot:n1r,useRecoilState:Q0r,useRecoilStateLoadable:e1r,useRecoilTransaction:l1r,useRecoilTransactionObserver:r1r,useRecoilValue:Z7e,useRecoilValueLoadable:qre,useRetain:J7e,useResetRecoilState:J0r,useSetRecoilState:zre,useSetUnvalidatedAtomValues:o1r,useTransactionObservation_DEPRECATED:t1r,useTransactionSubscription_DEPRECATED:f6},{peekNodeInfo:c1r}=oS,{useStoreRef:p1r}=c6;function f1r(){let e=p1r();return({key:t})=>c1r(e.current,e.current.getState().currentTree,t)}var d1r=f1r,{RecoilRoot:h1r,useStoreRef:m1r}=c6,{useMemo:g1r}=su.default;function v1r(){let e=m1r().current;return g1r(()=>{function t({children:r}){return su.default.createElement(h1r,{store_INTERNAL:e},r)}return t},[e])}var y1r=v1r;var{isReactNative:REn,isSSR:jEn}=Ore;function Td(e,t,r){if(typeof e=="string"&&!e.includes("\"")&&!e.includes("\\"))return`"${e}"`;switch(typeof e){case"undefined":return"";case"boolean":return e?"true":"false";case"number":case"symbol":return String(e);case"string":return JSON.stringify(e);case"function":if((t==null?void 0:t.allowFunctions)!==!0)throw new Error("Attempt to serialize function in a Recoil cache key");return`__FUNCTION(${e.name})__`}if(e===null)return"null";if(typeof e!="object"){var n;return(n=JSON.stringify(e))!==null&&n!==void 0?n:""}if($a(e))return"__PROMISE__";if(Array.isArray(e))return`[${e.map((o,i)=>Td(o,t,i.toString()))}]`;if(typeof e.toJSON=="function")return Td(e.toJSON(r),t,r);if(e instanceof Map){let o={};for(let[i,a]of e)o[typeof i=="string"?i:Td(i,t)]=a;return Td(o,t,r)}return e instanceof Set?Td(Array.from(e).sort((o,i)=>Td(o,t).localeCompare(Td(i,t))),t,r):Symbol!==void 0&&e[Symbol.iterator]!=null&&typeof e[Symbol.iterator]=="function"?Td(Array.from(e),t,r):`{${Object.keys(e).filter(o=>e[o]!==void 0).sort().map(o=>`${Td(o,t)}:${Td(e[o],t,o)}`).join(",")}}`}function _1r(e,t={allowFunctions:!1}){return Td(e,t)}var d6=_1r,dre=class{constructor(t){var r,n,o;Do(this,"_numLeafs",void 0),Do(this,"_root",void 0),Do(this,"_onHit",void 0),Do(this,"_onSet",void 0),Do(this,"_mapNodeValue",void 0),this._numLeafs=0,this._root=null,this._onHit=(r=t==null?void 0:t.onHit)!==null&&r!==void 0?r:()=>{},this._onSet=(n=t==null?void 0:t.onSet)!==null&&n!==void 0?n:()=>{},this._mapNodeValue=(o=t==null?void 0:t.mapNodeValue)!==null&&o!==void 0?o:i=>i}size(){return this._numLeafs}root(){return this._root}get(t,r){var n;return(n=this.getLeafNode(t,r))===null||n===void 0?void 0:n.value}getLeafNode(t,r){return Q7e(this.root(),n=>this._mapNodeValue(t(n)),{onNodeVisit:n=>{r==null||r.onNodeVisit(n),n.type==="leaf"&&this._onHit(n)}})}set(t,r,n){let o,i=hre(this.root(),t.map(([a,c])=>[a,this._mapNodeValue(c)]),null,r,null,{onNodeVisit:a=>{n==null||n.onNodeVisit(a),a.type==="leaf"&&(o=a)}});this.root()||(this._root=i),this._numLeafs++,this._onSet(ii(o))}delete(t){if(!this.root())return!1;let r=ii(this.root());return b1r(r,t,t.parent)?t===r||r.type==="branch"&&!r.branches.size?(this._root=null,this._numLeafs=0,!0):(this._numLeafs-=t9e(t),!0):!1}clear(){this._numLeafs=0,this._root=null}},Q7e=(e,t,r)=>{var n;if(e==null)return;if(r==null||(n=r.onNodeVisit)===null||n===void 0||n.call(r,e),e.type==="leaf")return e;let o=t(e.nodeKey);return Q7e(e.branches.get(o),t,r)},hre=(e,t,r,n,o,i)=>{var a;let c;if(e==null){if(t.length===0)c={type:"leaf",value:n,parent:r,branchKey:o};else{let[h,...m]=t,[y,w]=h;c={type:"branch",nodeKey:y,parent:r,branches:new Map,branchKey:o},c.branches.set(w,hre(null,m,c,n,w,i))}}else if(c=e,t.length){let[h,...m]=t,[y,w]=h;e.type==="branch"&&e.nodeKey===y||e6(!1),e.branches.set(w,hre(e.branches.get(w),m,e,n,w,i))}return i==null||(a=i.onNodeVisit)===null||a===void 0||a.call(i,c),c},b1r=(e,t,r)=>r?(r.branches.delete(t.branchKey),e9e(e,r,r.parent)):e===t,e9e=(e,t,r)=>r?(t.branches.size===0&&r.branches.delete(t.branchKey),e9e(e,r,r.parent)):e===t,t9e=e=>e.type==="leaf"?1:Array.from(e.branches.values()).reduce((t,r)=>t+t9e(r),0),x1r={TreeCache:dre},w1r=x1r.TreeCache,r9e=Object.freeze({__proto__:null,TreeCache:w1r}),mre=class{constructor(t){var r;Do(this,"_maxSize",void 0),Do(this,"_size",void 0),Do(this,"_head",void 0),Do(this,"_tail",void 0),Do(this,"_map",void 0),Do(this,"_keyMapper",void 0),this._maxSize=t.maxSize,this._size=0,this._head=null,this._tail=null,this._map=new Map,this._keyMapper=(r=t.mapKey)!==null&&r!==void 0?r:n=>n}head(){return this._head}tail(){return this._tail}size(){return this._size}maxSize(){return this._maxSize}has(t){return this._map.has(this._keyMapper(t))}get(t){let r=this._keyMapper(t),n=this._map.get(r);if(n)return this.set(t,n.value),n.value}set(t,r){let n=this._keyMapper(t);this._map.get(n)&&this.delete(t);let i=this.head(),a={key:t,right:i,left:null,value:r};i?i.left=a:this._tail=a,this._map.set(n,a),this._head=a,this._size++,this._maybeDeleteLRU()}_maybeDeleteLRU(){this.size()>this.maxSize()&&this.deleteLru()}deleteLru(){let t=this.tail();t&&this.delete(t.key)}delete(t){let r=this._keyMapper(t);if(!this._size||!this._map.has(r))return;let n=ii(this._map.get(r)),o=n.right,i=n.left;o&&(o.left=n.left),i&&(i.right=n.right),n===this.head()&&(this._head=o),n===this.tail()&&(this._tail=i),this._map.delete(r),this._size--}clear(){this._size=0,this._head=null,this._tail=null,this._map=new Map}},E1r={LRUCache:mre},S1r=E1r.LRUCache,n9e=Object.freeze({__proto__:null,LRUCache:S1r}),{LRUCache:T1r}=n9e,{TreeCache:I1r}=r9e;function M1r(e,t=r=>r){let r=new T1r({maxSize:e}),n=new I1r({mapNodeValue:t,onHit:o=>{r.set(o,!0)},onSet:o=>{let i=r.tail();r.set(o,!0),i&&n.size()>e&&n.delete(i.key)}});return n}var a7e=M1r,{TreeCache:C1r}=r9e,UR={equality:"reference",eviction:"keep-all",maxSize:1/0};function A1r({equality:e=UR.equality,eviction:t=UR.eviction,maxSize:r=UR.maxSize}=UR){let n=O1r(e);return P1r(t,r,n)}function O1r(e){switch(e){case"reference":return t=>t;case"value":return t=>d6(t)}throw new Error(`Unrecognized equality policy ${e}`)}function P1r(e,t,r){switch(e){case"keep-all":return new C1r({mapNodeValue:r});case"lru":return a7e(ii(t),r);case"most-recent":return a7e(1,r)}throw new Error(`Unrecognized eviction policy ${e}`)}var D1r=A1r;function N1r(e){return()=>null}var L1r={startPerfBlock:N1r},{CANCELED:YA,Canceled:k1r,loadableWithError:ZA,loadableWithPromise:R1r,loadableWithValue:tre}=nO,{getNodeLoadable:s7e,peekNodeLoadable:j1r,setNodeValue:q1r}=oS,{saveDependencyMapToStore:z1r}=oO,{DEFAULT_VALUE:F1r,RecoilValueNotReady:U1r,getConfigDeletionHandler:B1r,registerNode:l7e}=uf,{isRecoilValue:V1r}=Yy,{AbstractRecoilValue:G1r}=Yy,{setRecoilValueLoadable:H1r}=B_,{retainedByOptionWithDefault:W1r}=iO,{cloneSnapshot:$1r}=u6,{startPerfBlock:Y1r}=L1r,KA=[],BR=new Map,Z1r=(()=>{let e=0;return()=>e++})();function K1r(){return{depValuesDiscoveredSoFarDuringAsyncWork:null,latestLoadable:null,latestExecutionId:null,stateVersion:null}}function X1r(e){let{key:t,get:r,cachePolicy_UNSTABLE:n}=e,o=e.set!=null?e.set:void 0,i=D1r(n!=null?n:{equality:"reference",eviction:"keep-all"}),a=W1r(e.retainedBy_UNSTABLE),c=new Map,h=0;function m(){return!Ei("recoil_memory_managament_2020")||h>0}function y(We){return c.has(We)||c.set(We,K1r()),ii(c.get(We))}function w(We){return h++,We.getState().knownSelectors.add(t),()=>{h--,We.getState().knownSelectors.delete(t),c.delete(We)}}function E(){return B1r(t)!==void 0&&!m()}function A(We,Ne,Ke){if(Ne.state==="loading"){let Ge=BR.get(Ke);Ge==null&&BR.set(Ke,Ge=new Set),Ge.add(We)}}function P(We,Ne){let Ke=BR.get(Ne);if(Ke!==void 0){for(let Ge of Ke)H1r(Ge,new G1r(t),We);BR.delete(Ne)}}function j(We,Ne,Ke){let Ge=We.getState().knownSelectors.has(Ke);if(Ge&&Ne.atomValues.has(Ke))return ii(Ne.atomValues.get(Ke));let ft=s7e(We,Ne,Ke);return ft.state!=="loading"&&Ge&&Ne.atomValues.set(Ke,ft),ft}function D(We,Ne,Ke,Ge,ft){return Ne.then(mt=>{if(!m())return rt(We,ft),YA;let Ot=tre(mt);return bt(Ke,te(Ge),Ot),V(We,Ke,new Set(Ge.keys()),ft),z(We,Ot,ft),{__value:mt,__key:t}}).catch(mt=>{if(!m())return rt(We,ft),YA;if(ct(We,ft)&&Ye(Ge,We,ft),$a(mt))return k(We,mt,Ke,Ge,ft);let Ot=ZA(mt);throw bt(Ke,te(Ge),Ot),V(We,Ke,new Set(Ge.keys()),ft),z(We,Ot,ft),mt})}function k(We,Ne,Ke,Ge,ft){return Ne.then(mt=>{if(!m())return rt(We,ft),YA;if(mt instanceof k1r)return Gh("Selector was released while it had dependencies"),YA;let{__key:Ot,__value:At}=mt!=null?mt:{},Mt=!0;Ot!=null&&(Ke.atomValues.set(Ot,tre(At)),Mt=!1);let Yt=Z(We,Ke);if(Yt&&Yt.state==="hasValue")return de(Yt,We),{__value:Yt.contents,__key:t};if(!ct(We,ft)){var qt;let jr=pe(Ke);if((jr==null||(qt=jr.latestLoadable)===null||qt===void 0?void 0:qt.state)==="loading")return jr.latestLoadable.contents}let[Ut,sr]=K(We,Ke,ft,Mt);if(ct(We,ft)&&Ye(sr,We,ft),qe(Ut),Ut.state!=="loading"&&(bt(Ke,te(sr),Ut),V(We,Ke,new Set(sr.keys()),ft),z(We,Ut,ft)),Ut.state==="hasError")throw Ut.contents;return Ut.state==="hasValue"?{__value:Ut.contents,__key:t}:Ut.contents}).catch(mt=>{if(!m())return rt(We,ft),YA;let Ot=ZA(mt);throw bt(Ke,te(Ge),ZA(mt)),V(We,Ke,new Set(Ge.keys()),ft),z(We,Ot,ft),mt})}function z(We,Ne,Ke){ct(We,Ke)&&(de(Ne,We),P(Ne,Ke))}function V(We,Ne,Ke,Ge){var ft,mt,Ot,At;if(ct(We,Ge)||Ne.version===((ft=We.getState())===null||ft===void 0||(mt=ft.currentTree)===null||mt===void 0?void 0:mt.version)||Ne.version===((Ot=We.getState())===null||Ot===void 0||(At=Ot.nextTree)===null||At===void 0?void 0:At.version)){var Mt,Yt,qt;z1r(new Map([[t,Ke]]),We,(Mt=(Yt=We.getState())===null||Yt===void 0||(qt=Yt.nextTree)===null||qt===void 0?void 0:qt.version)!==null&&Mt!==void 0?Mt:We.getState().currentTree.version)}}function G(We,Ne,Ke,Ge,ft){Ke.add(Ge),V(We,Ne,Ke,ft)}function K(We,Ne,Ke,Ge=!1){let ft=Y1r(t),mt,Ot=!1,At,Mt=new Map,Yt=new Set;V(We,Ne,Yt,Ke);function qt(jr){let{key:Pr}=jr;G(We,Ne,Yt,Pr,Ke);let br=Ge?s7e(We,Ne,Pr):j(We,Ne,Pr);if(qe(br),Mt.set(Pr,br),br.state==="hasValue")return br.contents;throw br.contents}let Ut=!1,sr=jr=>(...Pr)=>{if(!Ut)throw new Error("getCallback() should only be called asynchronously after the selector is evalutated.  It can be used for selectors to return objects with callbacks that can obtain the current Recoil state without a subscription.");let br=$1r(We),Dr=jr({snapshot:br});if(typeof Dr!="function")throw new Error("getCallback() expects a function that returns a function.");return Dr(...Pr)};try{mt=r({get:qt,getCallback:sr}),mt=V1r(mt)?qt(mt):mt,Ut=!0,$a(mt)?mt=D(We,mt,Ne,Mt,Ke).finally(ft):ft()}catch(jr){mt=jr,$a(mt)?mt=k(We,mt,Ne,Mt,Ke).finally(ft):(Ot=!0,ft())}return Ot?At=ZA(mt):$a(mt)?At=R1r(mt):At=tre(mt),qe(At),[At,Mt]}function Z(We,Ne){let Ke=new Set,Ge=y(We),ft=i.get(mt=>(typeof mt!="string"&&e6(!1),j(We,Ne,mt).contents),{onNodeVisit:mt=>{mt.type==="branch"&&mt.nodeKey!==t&&typeof mt.nodeKey=="string"&&Ke.add(mt.nodeKey)}});return ft&&V(We,Ne,Ke,Ge.latestExecutionId),ft}function te(We){return Array.from(We.entries()).map(([Ne,Ke])=>[Ne,Ke.contents])}function se(We,Ne){let Ke=Z1r(),[Ge,ft]=K(We,Ne,Ke);return de(Ge,We,ft,Ke,Ne),Ce(Ne,te(ft),Ge),A(We,Ge,Ke),Ge}function le(We,Ne){let Ke=Z(We,Ne);if(Ke!=null)return de(Ke,We),Ke;let Ge=pe(Ne);if(Ge){let ft=Ge;return A(We,ii(ft.latestLoadable),ii(ft.latestExecutionId)),ii(ft.latestLoadable)}return se(We,Ne)}function pe(We){var Ne;let[,Ke]=(Ne=Array.from(c.entries()).find(([Ge,ft])=>ft.latestLoadable!=null&&ft.latestExecutionId!=null&&!_e(Ge,We)))!==null&&Ne!==void 0?Ne:[];return Ke}let me=new Map;function _e(We,Ne){var Ke,Ge;let ft=y(We),mt=(Ke=ft.depValuesDiscoveredSoFarDuringAsyncWork)!==null&&Ke!==void 0?Ke:new Map,Ot=Array(((Ge=me.get(Ne.version))!==null&&Ge!==void 0?Ge:new Map).entries()),At=me.has(Ne.version)&&Ot.length===mt.size&&Ot.every(([Mt,Yt])=>mt.get(Mt)===Yt);return mt==null||Ne.version===ft.stateVersion||At?!1:(me.set(Ne.version,new Map(mt)),Array.from(mt).some(([Mt,Yt])=>j(We,Ne,Mt).contents!==Yt.contents))}function de(We,Ne,Ke,Ge,ft){let mt=y(Ne);We.state==="loading"?(mt.depValuesDiscoveredSoFarDuringAsyncWork=Ke,mt.latestExecutionId=Ge,mt.latestLoadable=We,mt.stateVersion=ft==null?void 0:ft.version):(mt.depValuesDiscoveredSoFarDuringAsyncWork=null,mt.latestExecutionId=null,mt.latestLoadable=null,mt.stateVersion=null)}function Ce(We,Ne,Ke){Ke.state!=="loading"&&bt(We,Ne,Ke)}function Ye(We,Ne,Ke){let Ge=y(Ne);ct(Ne,Ke)&&(Ge.depValuesDiscoveredSoFarDuringAsyncWork=We)}function rt(We,Ne){ct(We,Ne)&&c.delete(We)}function ct(We,Ne){let Ke=y(We);return Ne===Ke.latestExecutionId}function qe(We){We.state!=="loading"&&(We.contents,void 0)}function lt(We){}function bt(We,Ne,Ke){We.atomValues.set(t,Ke),i.set(Ne,Ke)}function Tt(We){if(KA.includes(t)){let Ne=`Recoil selector has circular dependencies: ${KA.slice(KA.indexOf(t)).join(" \u2192 ")}`;return ZA(new Error(Ne))}KA.push(t);try{return We()}finally{KA.pop()}}function et(We,Ne){return i.get(Ge=>{typeof Ge!="string"&&e6(!1);let ft=j1r(We,Ne,Ge);return ft==null?void 0:ft.contents})}function pt(We,Ne){return Tt(()=>le(We,Ne))}function ot(We){We.atomValues.delete(t)}return o!=null?l7e({key:t,nodeType:"selector",peek:et,get:pt,set:(Ne,Ke,Ge)=>{let ft=!1,mt=new Map;function Ot({key:qt}){if(ft)throw new Error("Recoil: Async selector sets are not currently supported.");let Ut=j(Ne,Ke,qt);if(qe(Ut),Ut.state==="hasValue")return Ut.contents;throw Ut.state==="loading"?new U1r(qt):Ut.contents}function At(qt,Ut){if(ft)throw new Error("Recoil: Async selector sets are not currently supported.");let sr=typeof Ut=="function"?Ut(Ot(qt)):Ut;q1r(Ne,Ke,qt.key,sr).forEach((Pr,br)=>mt.set(br,Pr))}function Mt(qt){At(qt,F1r)}let Yt=o({set:At,get:Ot,reset:Mt},Ge);if(Yt!==void 0)throw $a(Yt)?new Error("Recoil: Async selector sets are not currently supported."):new Error("Recoil: selector set should be a void function.");return ft=!0,mt},init:w,invalidate:ot,shouldDeleteConfigOnRelease:E,dangerouslyAllowMutability:e.dangerouslyAllowMutability,shouldRestoreFromSnapshots:!1,retainedBy:a}):l7e({key:t,nodeType:"selector",peek:et,get:pt,init:w,invalidate:ot,shouldDeleteConfigOnRelease:E,dangerouslyAllowMutability:e.dangerouslyAllowMutability,shouldRestoreFromSnapshots:!1,retainedBy:a})}var n6=X1r,{loadableWithError:u7e,loadableWithPromise:c7e,loadableWithValue:XA}=nO,{DEFAULT_VALUE:F_,DefaultValue:QE,getConfigDeletionHandler:o9e,registerNode:J1r,setConfigDeletionHandler:Q1r}=uf,{isRecoilValue:e_r}=Yy,{markRecoilValueModified:t_r,setRecoilValue:p7e,setRecoilValueLoadable:r_r}=B_,{retainedByOptionWithDefault:n_r}=iO;function o_r(e){let{key:t,persistence_UNSTABLE:r}=e,n=n_r(e.retainedBy_UNSTABLE),o=0,i=$a(e.default)?c7e(e.default.then(D=>(i=XA(D),{__key:t,__value:D})).catch(D=>{throw i=u7e(D),D})):XA(e.default),a,c=new Map;function h(D,k){let z=k.then(V=>{var G,K;return((K=((G=D.getState().nextTree)!==null&&G!==void 0?G:D.getState().currentTree).atomValues.get(t))===null||K===void 0?void 0:K.contents)===z&&p7e(D,j,V),{__key:t,__value:V}}).catch(V=>{var G,K;throw((K=((G=D.getState().nextTree)!==null&&G!==void 0?G:D.getState().currentTree).atomValues.get(t))===null||K===void 0?void 0:K.contents)===z&&r_r(D,j,u7e(V)),V});return z}function m(D,k,z){o++;let V=D.getState().knownAtoms.has(t);if(D.getState().knownAtoms.add(t),i.state==="loading"){let le=()=>{var pe;((pe=D.getState().nextTree)!==null&&pe!==void 0?pe:D.getState().currentTree).atomValues.has(t)||t_r(D,j)};i.contents.then(le).catch(le)}let G=F_,K=null;if(e.effects_UNSTABLE!=null&&!V){let le=!0,pe=de=>Ce=>{if(le){let Ye=G instanceof QE||$a(G)?i.state==="hasValue"?i.contents:F_:G;G=typeof Ce=="function"?Ce(Ye):Ce,$a(G)&&(G=G.then(rt=>(K={effect:de,value:rt},rt)))}else{if($a(Ce))throw new Error("Setting atoms to async values is not implemented.");typeof Ce!="function"&&(K={effect:de,value:Ce}),p7e(D,j,typeof Ce=="function"?Ye=>{let rt=Ce(Ye);return K={effect:de,value:rt},rt}:Ce)}},me=de=>()=>pe(de)(F_),_e=de=>Ce=>{D.subscribeToTransactions(Ye=>{var rt;let{currentTree:ct,previousTree:qe}=Ye.getState();qe||(Gh("Transaction subscribers notified without a next tree being present -- this is a bug in Recoil"),qe=ct);let lt=(rt=ct.atomValues.get(t))!==null&&rt!==void 0?rt:i;if(lt.state==="hasValue"){var bt,Tt,et,pt;let ot=lt.contents,We=(bt=qe.atomValues.get(t))!==null&&bt!==void 0?bt:i,Ne=We.state==="hasValue"?We.contents:F_;((Tt=K)===null||Tt===void 0?void 0:Tt.effect)!==de||((et=K)===null||et===void 0?void 0:et.value)!==ot?Ce(ot,Ne):((pt=K)===null||pt===void 0?void 0:pt.effect)===de&&(K=null)}},t)};for(let de of(Z=e.effects_UNSTABLE)!==null&&Z!==void 0?Z:[]){var Z;let Ce=de({node:j,trigger:z,setSelf:pe(de),resetSelf:me(de),onSet:_e(de)});if(Ce!=null){var te;c.set(D,[...((te=c.get(D))!==null&&te!==void 0?te:[]),Ce])}}le=!1}if(!(G instanceof QE)){var se;let le=$a(G)?c7e(h(D,G)):XA(G);k.atomValues.set(t,le),(se=D.getState().nextTree)===null||se===void 0||se.atomValues.set(t,le)}return()=>{var le;o--,(le=c.get(D))===null||le===void 0||le.forEach(pe=>pe()),c.delete(D),D.getState().knownAtoms.delete(t)}}function y(D,k){var z,V,G;return(z=(V=k.atomValues.get(t))!==null&&V!==void 0?V:(G=a)===null||G===void 0?void 0:G[1])!==null&&z!==void 0?z:i}function w(D,k){if(k.atomValues.has(t))return ii(k.atomValues.get(t));if(k.nonvalidatedAtoms.has(t)){if(a!=null)return a;if(r==null)return Ere(`Tried to restore a persisted value for atom ${t} but it has no persistence settings.`),i;let z=k.nonvalidatedAtoms.get(t),V=r.validator(z,F_);return a=V instanceof QE?i:XA(V),a}else return i}function E(){a=void 0}function A(D,k,z){if(k.atomValues.has(t)){let V=ii(k.atomValues.get(t));if(V.state==="hasValue"&&z===V.contents)return new Map}else if(!k.nonvalidatedAtoms.has(t)&&z instanceof QE)return new Map;return a=void 0,new Map().set(t,XA(z))}function P(){return o9e(t)!==void 0&&o<=0}let j=J1r({key:t,nodeType:"atom",peek:y,get:w,set:A,init:m,invalidate:E,shouldDeleteConfigOnRelease:P,dangerouslyAllowMutability:e.dangerouslyAllowMutability,persistence_UNSTABLE:e.persistence_UNSTABLE?{type:e.persistence_UNSTABLE.type,backButton:e.persistence_UNSTABLE.backButton}:void 0,shouldRestoreFromSnapshots:!0,retainedBy:n});return j}function i9e(e){let n=e,{default:t}=n,r=En(n,["default"]);return e_r(t)?i_r(Pt(Se({},r),{default:t})):o_r(Pt(Se({},r),{default:t}))}function i_r(e){let t=i9e(Pt(Se({},e),{default:F_,persistence_UNSTABLE:e.persistence_UNSTABLE===void 0?void 0:Pt(Se({},e.persistence_UNSTABLE),{validator:n=>n instanceof QE?n:ii(e.persistence_UNSTABLE).validator(n,F_)}),effects_UNSTABLE:e.effects_UNSTABLE})),r=n6({key:`${e.key}__withFallback`,get:({get:n})=>{let o=n(t);return o instanceof QE?e.default:o},set:({set:n},o)=>n(t,o),dangerouslyAllowMutability:e.dangerouslyAllowMutability});return Q1r(r.key,o9e(e.key)),r}var a9e=i9e,gre=class{constructor(t){var r;Do(this,"_map",void 0),Do(this,"_keyMapper",void 0),this._map=new Map,this._keyMapper=(r=t==null?void 0:t.mapKey)!==null&&r!==void 0?r:n=>n}size(){return this._map.size}has(t){return this._map.has(this._keyMapper(t))}get(t){return this._map.get(this._keyMapper(t))}set(t,r){this._map.set(this._keyMapper(t),r)}delete(t){this._map.delete(this._keyMapper(t))}clear(){this._map.clear()}},a_r={MapCache:gre},s_r=a_r.MapCache,l_r=Object.freeze({__proto__:null,MapCache:s_r}),{LRUCache:f7e}=n9e,{MapCache:u_r}=l_r,VR={equality:"reference",eviction:"none",maxSize:1/0};function c_r({equality:e=VR.equality,eviction:t=VR.eviction,maxSize:r=VR.maxSize}=VR){let n=p_r(e);return f_r(t,r,n)}function p_r(e){switch(e){case"reference":return t=>t;case"value":return t=>d6(t)}throw new Error(`Unrecognized equality policy ${e}`)}function f_r(e,t,r){switch(e){case"keep-all":return new u_r({mapKey:r});case"lru":return new f7e({mapKey:r,maxSize:ii(t)});case"most-recent":return new f7e({mapKey:r,maxSize:1})}throw new Error(`Unrecognized eviction policy ${e}`)}var s9e=c_r,{setConfigDeletionHandler:d_r}=uf;function h_r(e){var t,r;let n=s9e({equality:(t=(r=e.cachePolicyForParams_UNSTABLE)===null||r===void 0?void 0:r.equality)!==null&&t!==void 0?t:"value",eviction:"keep-all"});return o=>{var i;let a=n.get(o);if(a!=null)return a;let y=e,{cachePolicyForParams_UNSTABLE:c}=y,h=En(y,["cachePolicyForParams_UNSTABLE"]),m=a9e(Pt(Se({},h),{key:`${e.key}__${(i=d6(o))!==null&&i!==void 0?i:"void"}`,default:typeof e.default=="function"?e.default(o):e.default,retainedBy_UNSTABLE:typeof e.retainedBy_UNSTABLE=="function"?e.retainedBy_UNSTABLE(o):e.retainedBy_UNSTABLE,effects_UNSTABLE:typeof e.effects_UNSTABLE=="function"?e.effects_UNSTABLE(o):e.effects_UNSTABLE}));return n.set(o,m),d_r(m.key,()=>{n.delete(o)}),m}}var m_r=h_r,{setConfigDeletionHandler:g_r}=uf,v_r=0;function y_r(e){var t,r;let n=s9e({equality:(t=(r=e.cachePolicyForParams_UNSTABLE)===null||r===void 0?void 0:r.equality)!==null&&t!==void 0?t:"value",eviction:"keep-all"});return o=>{var i;let a=n.get(o);if(a!=null)return a;let c=`${e.key}__selectorFamily/${(i=d6(o,{allowFunctions:!0}))!==null&&i!==void 0?i:"void"}/${v_r++}`,h=E=>e.get(o)(E),m=e.cachePolicy_UNSTABLE,y=typeof e.retainedBy_UNSTABLE=="function"?e.retainedBy_UNSTABLE(o):e.retainedBy_UNSTABLE,w;if(e.set!=null){let E=e.set;w=n6({key:c,get:h,set:(P,j)=>E(o)(P,j),cachePolicy_UNSTABLE:m,dangerouslyAllowMutability:e.dangerouslyAllowMutability,retainedBy_UNSTABLE:y})}else w=n6({key:c,get:h,cachePolicy_UNSTABLE:m,dangerouslyAllowMutability:e.dangerouslyAllowMutability,retainedBy_UNSTABLE:y});return n.set(o,w),g_r(w.key,()=>{n.delete(o)}),w}}var Zy=y_r,__r=Zy({key:"__constant",get:e=>()=>e,cachePolicyForParams_UNSTABLE:{equality:"reference"}});function b_r(e){return __r(e)}var x_r=b_r,w_r=Zy({key:"__error",get:e=>()=>{throw new Error(e)},cachePolicyForParams_UNSTABLE:{equality:"reference"}});function E_r(e){return w_r(e)}var S_r=E_r;function T_r(e){return e}var I_r=T_r,{loadableWithError:l9e,loadableWithPromise:u9e,loadableWithValue:c9e}=nO;function h6(e,t){let r=Array(t.length).fill(void 0),n=Array(t.length).fill(void 0);for(let[o,i]of t.entries())try{r[o]=e(i)}catch(a){n[o]=a}return[r,n]}function M_r(e){return e!=null&&!$a(e)}function m6(e){return Array.isArray(e)?e:Object.getOwnPropertyNames(e).map(t=>e[t])}function Fre(e){return e!=null&&typeof e=="object"&&e.hasOwnProperty("__value")?e.__value:e}function vre(e,t){return Array.isArray(e)?t:Object.getOwnPropertyNames(e).reduce((r,n,o)=>Pt(Se({},r),{[n]:t[o]}),{})}function tS(e,t,r){let n=r.map((o,i)=>o==null?c9e(t[i]):$a(o)?u9e(o):l9e(o));return vre(e,n)}function C_r(e,t){return t.map((r,n)=>r===void 0?e[n]:r)}var A_r=Zy({key:"__waitForNone",get:e=>({get:t})=>{let r=m6(e),[n,o]=h6(t,r);return tS(e,n,o)},dangerouslyAllowMutability:!0}),O_r=Zy({key:"__waitForAny",get:e=>({get:t})=>{let r=m6(e),[n,o]=h6(t,r);return o.some(i=>!$a(i))?tS(e,n,o):new Promise(i=>{for(let[a,c]of o.entries())$a(c)&&c.then(h=>{n[a]=Fre(h),o[a]=void 0,i(tS(e,n,o))}).catch(h=>{o[a]=h,i(tS(e,n,o))})})},dangerouslyAllowMutability:!0}),P_r=Zy({key:"__waitForAll",get:e=>({get:t})=>{let r=m6(e),[n,o]=h6(t,r);if(o.every(a=>a==null))return vre(e,n);let i=o.find(M_r);if(i!=null)throw i;return Promise.all(o).then(a=>vre(e,C_r(n,a).map(Fre)))},dangerouslyAllowMutability:!0}),D_r=Zy({key:"__waitForAllSettled",get:e=>({get:t})=>{let r=m6(e),[n,o]=h6(t,r);return o.every(i=>!$a(i))?tS(e,n,o):Promise.all(o.map((i,a)=>$a(i)?i.then(c=>{n[a]=Fre(c),o[a]=void 0}).catch(c=>{n[a]=void 0,o[a]=c}):null)).then(()=>tS(e,n,o))},dangerouslyAllowMutability:!0}),N_r=Zy({key:"__noWait",get:e=>({get:t})=>{try{return c9e(t(e))}catch(r){return $a(r)?u9e(r):l9e(r)}},dangerouslyAllowMutability:!0}),L_r={waitForNone:A_r,waitForAny:O_r,waitForAll:P_r,waitForAllSettled:D_r,noWait:N_r},{batchUpdates:k_r,setBatcher:R_r}=Cre,{DefaultValue:j_r}=uf,{RecoilRoot:q_r}=c6,{isRecoilValue:z_r}=Yy,{retentionZone:F_r}=i6,{freshSnapshot:U_r}=u6,{useGotoRecoilSnapshot:B_r,useRecoilCallback:V_r,useRecoilSnapshot:G_r,useRecoilState:H_r,useRecoilStateLoadable:W_r,useRecoilTransaction:$_r,useRecoilTransactionObserver:Y_r,useRecoilValue:Z_r,useRecoilValueLoadable:K_r,useResetRecoilState:X_r,useRetain:J_r,useSetRecoilState:Q_r,useSetUnvalidatedAtomValues:ebr,useTransactionObservation_DEPRECATED:tbr}=u1r,{noWait:rbr,waitForAll:nbr,waitForAllSettled:obr,waitForAny:ibr,waitForNone:abr}=L_r,Io={DefaultValue:j_r,RecoilRoot:q_r,useRecoilBridgeAcrossReactRoots_UNSTABLE:y1r,atom:a9e,selector:n6,retentionZone:F_r,atomFamily:m_r,selectorFamily:Zy,constSelector:x_r,errorSelector:S_r,readOnlySelector:I_r,useRecoilValue:Z_r,useRecoilValueLoadable:K_r,useRecoilState:H_r,useRecoilStateLoadable:W_r,useSetRecoilState:Q_r,useResetRecoilState:X_r,useGetRecoilValueInfo_UNSTABLE:d1r,useRetain:J_r,useRecoilCallback:V_r,useRecoilTransaction_UNSTABLE:$_r,useGotoRecoilSnapshot:B_r,useRecoilSnapshot:G_r,useRecoilTransactionObserver_UNSTABLE:Y_r,useTransactionObservation_UNSTABLE:tbr,useSetUnvalidatedAtomValues_UNSTABLE:ebr,noWait:rbr,waitForNone:abr,waitForAny:ibr,waitForAll:nbr,waitForAllSettled:obr,isRecoilValue:z_r,batchUpdates:k_r,setBatcher:R_r,snapshot_UNSTABLE:U_r},qEn=Io.DefaultValue,p9e=Io.RecoilRoot,zEn=Io.useRecoilBridgeAcrossReactRoots_UNSTABLE,en=Io.atom,vs=Io.selector,FEn=Io.retentionZone,UEn=Io.atomFamily,BEn=Io.selectorFamily,VEn=Io.constSelector,GEn=Io.errorSelector,HEn=Io.readOnlySelector,_t=Io.useRecoilValue,WEn=Io.useRecoilValueLoadable,mo=Io.useRecoilState,$En=Io.useRecoilStateLoadable,Ir=Io.useSetRecoilState,YEn=Io.useResetRecoilState,ZEn=Io.useGetRecoilValueInfo_UNSTABLE,KEn=Io.useRetain,ir=Io.useRecoilCallback,XEn=Io.useRecoilTransaction_UNSTABLE,JEn=Io.useGotoRecoilSnapshot,QEn=Io.useRecoilSnapshot,eSn=Io.useRecoilTransactionObserver_UNSTABLE,tSn=Io.useTransactionObservation_UNSTABLE,rSn=Io.useSetUnvalidatedAtomValues_UNSTABLE,nSn=Io.noWait,oSn=Io.waitForNone,iSn=Io.waitForAny,aSn=Io.waitForAll,sSn=Io.waitForAllSettled,lSn=Io.isRecoilValue,uSn=Io.batchUpdates,cSn=Io.setBatcher,pSn=Io.snapshot_UNSTABLE;u();u();var Ky=Q(De());u();var g6=Q(De()),sbr=e=>{let t=g6.useRef(e);return g6.useEffect(()=>{t.current=e}),t},v6=sbr;var lbr=(e,t=100,r=!1)=>{let n=v6(e),o=Ky.useRef(),i=[t,r,n];function a(){o.current&&clearTimeout(o.current),o.current=void 0}Ky.useEffect(()=>a,i);function c(){o.current=void 0}return Ky.useCallback(function(){let h=arguments,{current:m}=o;if(m===void 0&&r)return o.current=setTimeout(c,t),n.current.apply(null,h);m&&clearTimeout(m),o.current=setTimeout(()=>{o.current=void 0,n.current.apply(null,h)},t)},i)},f9e=(e,t,r)=>{let n=Ky.useState(e);return[n[0],lbr(n[1],t,r)]};u();var iS=Q(De());function ubr(e,t,r,n){let o=iS.useRef(r),i=iS.useRef(n);iS.useEffect(()=>{o.current=r,i.current=n}),iS.useEffect(()=>{let a=e&&"current"in e?e.current:e;if(!a)return;let c=0;function h(...y){c||o.current.apply(this,y)}a.addEventListener(t,h);let m=i.current;return()=>{c=1,a.removeEventListener(t,h),m&&m()}},[e,t])}var y6=ubr;var cbr={},aO=typeof window=="undefined"?null:window,pbr=aO&&typeof aO.visualViewport!="undefined"?aO.visualViewport:null,d9e=()=>[document.documentElement.clientWidth,document.documentElement.clientHeight],fbr=function(e){e===void 0&&(e=cbr);let{wait:t,leading:r,initialWidth:n=0,initialHeight:o=0}=e,[i,a]=f9e(typeof document=="undefined"?[n,o]:d9e,t,r),c=()=>a(d9e);return y6(aO,"resize",c),y6(pbr,"resize",c),y6(aO,"orientationchange",c),i};var h9e=e=>fbr(e)[0];var amt=Q(It(),1);u();u();u();u();u();function Ure(e){var t=null,r=function(){return t==null&&(t=e()),t};return r}function w9e(e,t){return e.filter(function(r){return r!==t})}function E9e(e,t){var r=new Set,n=function(a){return r.add(a)};e.forEach(n),t.forEach(n);var o=[];return r.forEach(function(i){return o.push(i)}),o}function mbr(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function S9e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function gbr(e,t,r){return t&&S9e(e.prototype,t),r&&S9e(e,r),e}function T9e(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var I9e=function(){function e(t){mbr(this,e),T9e(this,"entered",[]),T9e(this,"isNodeInDocument",void 0),this.isNodeInDocument=t}return gbr(e,[{key:"enter",value:function(r){var n=this,o=this.entered.length,i=function(c){return n.isNodeInDocument(c)&&(!c.contains||c.contains(r))};return this.entered=E9e(this.entered.filter(i),[r]),o===0&&this.entered.length>0}},{key:"leave",value:function(r){var n=this.entered.length;return this.entered=w9e(this.entered.filter(this.isNodeInDocument),r),n>0&&this.entered.length===0}},{key:"reset",value:function(){this.entered=[]}}]),e}();u();u();var M9e=Ure(function(){return /firefox/i.test(navigator.userAgent)}),Bre=Ure(function(){return!!window.safari});u();function vbr(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function C9e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function ybr(e,t,r){return t&&C9e(e.prototype,t),r&&C9e(e,r),e}function sO(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var Vre=function(){function e(t,r){vbr(this,e),sO(this,"xs",void 0),sO(this,"ys",void 0),sO(this,"c1s",void 0),sO(this,"c2s",void 0),sO(this,"c3s",void 0);for(var n=t.length,o=[],i=0;i<n;i++)o.push(i);o.sort(function(le,pe){return t[le]<t[pe]?-1:1});for(var a=[],c=[],h=[],m,y,w=0;w<n-1;w++)m=t[w+1]-t[w],y=r[w+1]-r[w],c.push(m),a.push(y),h.push(y/m);for(var E=[h[0]],A=0;A<c.length-1;A++){var P=h[A],j=h[A+1];if(P*j<=0)E.push(0);else{m=c[A];var D=c[A+1],k=m+D;E.push(3*k/((k+D)/P+(k+m)/j))}}E.push(h[h.length-1]);for(var z=[],V=[],G,K=0;K<E.length-1;K++){G=h[K];var Z=E[K],te=1/c[K],se=Z+E[K+1]-G-G;z.push((G-Z-se)*te),V.push(se*te*te)}this.xs=t,this.ys=r,this.c1s=E,this.c2s=z,this.c3s=V}return ybr(e,[{key:"interpolate",value:function(r){var n=this.xs,o=this.ys,i=this.c1s,a=this.c2s,c=this.c3s,h=n.length-1;if(r===n[h])return o[h];for(var m=0,y=c.length-1,w;m<=y;){w=Math.floor(.5*(m+y));var E=n[w];if(E<r)m=w+1;else if(E>r)y=w-1;else return o[w]}h=Math.max(0,y);var A=r-n[h],P=A*A;return o[h]+i[h]*A+a[h]*P+c[h]*A*P}}]),e}();var _br=1;function Gre(e){var t=e.nodeType===_br?e:e.parentElement;if(!t)return null;var r=t.getBoundingClientRect(),n=r.top,o=r.left;return{x:o,y:n}}function lO(e){return{x:e.clientX,y:e.clientY}}function bbr(e){var t;return e.nodeName==="IMG"&&(M9e()||!((t=document.documentElement)!==null&&t!==void 0&&t.contains(e)))}function xbr(e,t,r,n){var o=e?t.width:r,i=e?t.height:n;return Bre()&&e&&(i/=window.devicePixelRatio,o/=window.devicePixelRatio),{dragPreviewWidth:o,dragPreviewHeight:i}}function A9e(e,t,r,n,o){var i=bbr(t),a=i?e:t,c=Gre(a),h={x:r.x-c.x,y:r.y-c.y},m=e.offsetWidth,y=e.offsetHeight,w=n.anchorX,E=n.anchorY,A=xbr(i,t,m,y),P=A.dragPreviewWidth,j=A.dragPreviewHeight,D=function(){var te=new Vre([0,.5,1],[h.y,h.y/y*j,h.y+j-y]),se=te.interpolate(E);return Bre()&&i&&(se+=(window.devicePixelRatio-1)*j),se},k=function(){var te=new Vre([0,.5,1],[h.x,h.x/m*P,h.x+P-m]);return te.interpolate(w)},z=o.offsetX,V=o.offsetY,G=z===0||z,K=V===0||V;return{x:G?z:k(),y:K?V:D()}}u();u();var Xy={};uw(Xy,{FILE:()=>Hre,HTML:()=>Yre,TEXT:()=>$re,URL:()=>Wre});u();var Hre="__NATIVE_FILE__",Wre="__NATIVE_URL__",$re="__NATIVE_TEXT__",Yre="__NATIVE_HTML__";u();function _6(e,t,r){var n=t.reduce(function(o,i){return o||e.getData(i)},"");return n!=null?n:r}var aS;function b6(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var x6=(aS={},b6(aS,Hre,{exposeProperties:{files:function(t){return Array.prototype.slice.call(t.files)},items:function(t){return t.items},dataTransfer:function(t){return t}},matchesTypes:["Files"]}),b6(aS,Yre,{exposeProperties:{html:function(t,r){return _6(t,r,"")},dataTransfer:function(t){return t}},matchesTypes:["Html","text/html"]}),b6(aS,Wre,{exposeProperties:{urls:function(t,r){return _6(t,r,"").split(`
`)},dataTransfer:function(t){return t}},matchesTypes:["Url","text/uri-list"]}),b6(aS,$re,{exposeProperties:{text:function(t,r){return _6(t,r,"")},dataTransfer:function(t){return t}},matchesTypes:["Text","text/plain"]}),aS);u();function wbr(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function O9e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function Ebr(e,t,r){return t&&O9e(e.prototype,t),r&&O9e(e,r),e}function P9e(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var D9e=function(){function e(t){wbr(this,e),P9e(this,"item",void 0),P9e(this,"config",void 0),this.config=t,this.item={},this.initializeExposedProperties()}return Ebr(e,[{key:"initializeExposedProperties",value:function(){var r=this;Object.keys(this.config.exposeProperties).forEach(function(n){Object.defineProperty(r.item,n,{configurable:!0,enumerable:!0,get:function(){return console.warn(`Browser doesn't allow reading "`.concat(n,"\" until the drop event.")),null}})})}},{key:"loadDataTransfer",value:function(r){var n=this;if(r){var o={};Object.keys(this.config.exposeProperties).forEach(function(i){o[i]={value:n.config.exposeProperties[i](r,n.config.matchesTypes),configurable:!0,enumerable:!0}}),Object.defineProperties(this.item,o)}}},{key:"canDrag",value:function(){return!0}},{key:"beginDrag",value:function(){return this.item}},{key:"isDragging",value:function(r,n){return n===r.getSourceId()}},{key:"endDrag",value:function(){}}]),e}();function N9e(e,t){var r=new D9e(x6[e]);return r.loadDataTransfer(t),r}function w6(e){if(!e)return null;var t=Array.prototype.slice.call(e.types||[]);return Object.keys(x6).filter(function(r){var n=x6[r].matchesTypes;return n.some(function(o){return t.indexOf(o)>-1})})[0]||null}u();function Sbr(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function L9e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function Tbr(e,t,r){return t&&L9e(e.prototype,t),r&&L9e(e,r),e}function Zre(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var k9e=function(){function e(t,r){Sbr(this,e),Zre(this,"ownerDocument",null),Zre(this,"globalContext",void 0),Zre(this,"optionsArgs",void 0),this.globalContext=t,this.optionsArgs=r}return Tbr(e,[{key:"window",get:function(){if(this.globalContext)return this.globalContext;if(typeof window!="undefined")return window}},{key:"document",get:function(){var r;return(r=this.globalContext)!==null&&r!==void 0&&r.document?this.globalContext.document:this.window?this.window.document:void 0}},{key:"rootElement",get:function(){var r;return((r=this.optionsArgs)===null||r===void 0?void 0:r.rootElement)||this.window}}]),e}();function R9e(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(o){return Object.getOwnPropertyDescriptor(e,o).enumerable})),r.push.apply(r,n)}return r}function j9e(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?R9e(Object(r),!0).forEach(function(n){vo(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):R9e(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function Ibr(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function q9e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function Mbr(e,t,r){return t&&q9e(e.prototype,t),r&&q9e(e,r),e}function vo(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var z9e=function(){function e(t,r,n){var o=this;Ibr(this,e),vo(this,"options",void 0),vo(this,"actions",void 0),vo(this,"monitor",void 0),vo(this,"registry",void 0),vo(this,"enterLeaveCounter",void 0),vo(this,"sourcePreviewNodes",new Map),vo(this,"sourcePreviewNodeOptions",new Map),vo(this,"sourceNodes",new Map),vo(this,"sourceNodeOptions",new Map),vo(this,"dragStartSourceIds",null),vo(this,"dropTargetIds",[]),vo(this,"dragEnterTargetIds",[]),vo(this,"currentNativeSource",null),vo(this,"currentNativeHandle",null),vo(this,"currentDragSourceNode",null),vo(this,"altKeyPressed",!1),vo(this,"mouseMoveTimeoutTimer",null),vo(this,"asyncEndDragFrameId",null),vo(this,"dragOverTargetIds",null),vo(this,"lastClientOffset",null),vo(this,"hoverRafId",null),vo(this,"getSourceClientOffset",function(i){var a=o.sourceNodes.get(i);return a&&Gre(a)||null}),vo(this,"endDragNativeItem",function(){o.isDraggingNativeItem()&&(o.actions.endDrag(),o.currentNativeHandle&&o.registry.removeSource(o.currentNativeHandle),o.currentNativeHandle=null,o.currentNativeSource=null)}),vo(this,"isNodeInDocument",function(i){return!!(i&&o.document&&o.document.body&&o.document.body.contains(i))}),vo(this,"endDragIfSourceWasRemovedFromDOM",function(){var i=o.currentDragSourceNode;i==null||o.isNodeInDocument(i)||o.clearCurrentDragSourceNode()&&o.monitor.isDragging()&&o.actions.endDrag()}),vo(this,"handleTopDragStartCapture",function(){o.clearCurrentDragSourceNode(),o.dragStartSourceIds=[]}),vo(this,"handleTopDragStart",function(i){if(!i.defaultPrevented){var a=o.dragStartSourceIds;o.dragStartSourceIds=null;var c=lO(i);o.monitor.isDragging()&&o.actions.endDrag(),o.actions.beginDrag(a||[],{publishSource:!1,getSourceClientOffset:o.getSourceClientOffset,clientOffset:c});var h=i.dataTransfer,m=w6(h);if(o.monitor.isDragging()){if(h&&typeof h.setDragImage=="function"){var y=o.monitor.getSourceId(),w=o.sourceNodes.get(y),E=o.sourcePreviewNodes.get(y)||w;if(E){var A=o.getCurrentSourcePreviewNodeOptions(),P=A.anchorX,j=A.anchorY,D=A.offsetX,k=A.offsetY,z={anchorX:P,anchorY:j},V={offsetX:D,offsetY:k},G=A9e(w,E,c,z,V);h.setDragImage(E,G.x,G.y)}}try{h==null||h.setData("application/json",{})}catch(te){}o.setCurrentDragSourceNode(i.target);var K=o.getCurrentSourcePreviewNodeOptions(),Z=K.captureDraggingState;Z?o.actions.publishDragSource():setTimeout(function(){return o.actions.publishDragSource()},0)}else if(m)o.beginDragNativeItem(m);else{if(h&&!h.types&&(i.target&&!i.target.hasAttribute||!i.target.hasAttribute("draggable")))return;i.preventDefault()}}}),vo(this,"handleTopDragEndCapture",function(){o.clearCurrentDragSourceNode()&&o.monitor.isDragging()&&o.actions.endDrag()}),vo(this,"handleTopDragEnterCapture",function(i){o.dragEnterTargetIds=[];var a=o.enterLeaveCounter.enter(i.target);if(!(!a||o.monitor.isDragging())){var c=i.dataTransfer,h=w6(c);h&&o.beginDragNativeItem(h,c)}}),vo(this,"handleTopDragEnter",function(i){var a=o.dragEnterTargetIds;if(o.dragEnterTargetIds=[],!!o.monitor.isDragging()){o.altKeyPressed=i.altKey,a.length>0&&o.actions.hover(a,{clientOffset:lO(i)});var c=a.some(function(h){return o.monitor.canDropOnTarget(h)});c&&(i.preventDefault(),i.dataTransfer&&(i.dataTransfer.dropEffect=o.getCurrentDropEffect()))}}),vo(this,"handleTopDragOverCapture",function(){o.dragOverTargetIds=[]}),vo(this,"handleTopDragOver",function(i){var a=o.dragOverTargetIds;if(o.dragOverTargetIds=[],!o.monitor.isDragging()){i.preventDefault(),i.dataTransfer&&(i.dataTransfer.dropEffect="none");return}o.altKeyPressed=i.altKey,o.lastClientOffset=lO(i),o.hoverRafId===null&&typeof requestAnimationFrame!="undefined"&&(o.hoverRafId=requestAnimationFrame(function(){o.monitor.isDragging()&&o.actions.hover(a||[],{clientOffset:o.lastClientOffset}),o.hoverRafId=null}));var c=(a||[]).some(function(h){return o.monitor.canDropOnTarget(h)});c?(i.preventDefault(),i.dataTransfer&&(i.dataTransfer.dropEffect=o.getCurrentDropEffect())):o.isDraggingNativeItem()?i.preventDefault():(i.preventDefault(),i.dataTransfer&&(i.dataTransfer.dropEffect="none"))}),vo(this,"handleTopDragLeaveCapture",function(i){o.isDraggingNativeItem()&&i.preventDefault();var a=o.enterLeaveCounter.leave(i.target);a&&o.isDraggingNativeItem()&&setTimeout(function(){return o.endDragNativeItem()},0)}),vo(this,"handleTopDropCapture",function(i){if(o.dropTargetIds=[],o.isDraggingNativeItem()){var a;i.preventDefault(),(a=o.currentNativeSource)===null||a===void 0||a.loadDataTransfer(i.dataTransfer)}else w6(i.dataTransfer)&&i.preventDefault();o.enterLeaveCounter.reset()}),vo(this,"handleTopDrop",function(i){var a=o.dropTargetIds;o.dropTargetIds=[],o.actions.hover(a,{clientOffset:lO(i)}),o.actions.drop({dropEffect:o.getCurrentDropEffect()}),o.isDraggingNativeItem()?o.endDragNativeItem():o.monitor.isDragging()&&o.actions.endDrag()}),vo(this,"handleSelectStart",function(i){var a=i.target;typeof a.dragDrop=="function"&&(a.tagName==="INPUT"||a.tagName==="SELECT"||a.tagName==="TEXTAREA"||a.isContentEditable||(i.preventDefault(),a.dragDrop()))}),this.options=new k9e(r,n),this.actions=t.getActions(),this.monitor=t.getMonitor(),this.registry=t.getRegistry(),this.enterLeaveCounter=new I9e(this.isNodeInDocument)}return Mbr(e,[{key:"profile",value:function(){var r,n;return{sourcePreviewNodes:this.sourcePreviewNodes.size,sourcePreviewNodeOptions:this.sourcePreviewNodeOptions.size,sourceNodeOptions:this.sourceNodeOptions.size,sourceNodes:this.sourceNodes.size,dragStartSourceIds:((r=this.dragStartSourceIds)===null||r===void 0?void 0:r.length)||0,dropTargetIds:this.dropTargetIds.length,dragEnterTargetIds:this.dragEnterTargetIds.length,dragOverTargetIds:((n=this.dragOverTargetIds)===null||n===void 0?void 0:n.length)||0}}},{key:"window",get:function(){return this.options.window}},{key:"document",get:function(){return this.options.document}},{key:"rootElement",get:function(){return this.options.rootElement}},{key:"setup",value:function(){var r=this.rootElement;if(r!==void 0){if(r.__isReactDndBackendSetUp)throw new Error("Cannot have two HTML5 backends at the same time.");r.__isReactDndBackendSetUp=!0,this.addEventListeners(r)}}},{key:"teardown",value:function(){var r=this.rootElement;if(r!==void 0&&(r.__isReactDndBackendSetUp=!1,this.removeEventListeners(this.rootElement),this.clearCurrentDragSourceNode(),this.asyncEndDragFrameId)){var n;(n=this.window)===null||n===void 0||n.cancelAnimationFrame(this.asyncEndDragFrameId)}}},{key:"connectDragPreview",value:function(r,n,o){var i=this;return this.sourcePreviewNodeOptions.set(r,o),this.sourcePreviewNodes.set(r,n),function(){i.sourcePreviewNodes.delete(r),i.sourcePreviewNodeOptions.delete(r)}}},{key:"connectDragSource",value:function(r,n,o){var i=this;this.sourceNodes.set(r,n),this.sourceNodeOptions.set(r,o);var a=function(m){return i.handleDragStart(m,r)},c=function(m){return i.handleSelectStart(m)};return n.setAttribute("draggable","true"),n.addEventListener("dragstart",a),n.addEventListener("selectstart",c),function(){i.sourceNodes.delete(r),i.sourceNodeOptions.delete(r),n.removeEventListener("dragstart",a),n.removeEventListener("selectstart",c),n.setAttribute("draggable","false")}}},{key:"connectDropTarget",value:function(r,n){var o=this,i=function(m){return o.handleDragEnter(m,r)},a=function(m){return o.handleDragOver(m,r)},c=function(m){return o.handleDrop(m,r)};return n.addEventListener("dragenter",i),n.addEventListener("dragover",a),n.addEventListener("drop",c),function(){n.removeEventListener("dragenter",i),n.removeEventListener("dragover",a),n.removeEventListener("drop",c)}}},{key:"addEventListeners",value:function(r){r.addEventListener&&(r.addEventListener("dragstart",this.handleTopDragStart),r.addEventListener("dragstart",this.handleTopDragStartCapture,!0),r.addEventListener("dragend",this.handleTopDragEndCapture,!0),r.addEventListener("dragenter",this.handleTopDragEnter),r.addEventListener("dragenter",this.handleTopDragEnterCapture,!0),r.addEventListener("dragleave",this.handleTopDragLeaveCapture,!0),r.addEventListener("dragover",this.handleTopDragOver),r.addEventListener("dragover",this.handleTopDragOverCapture,!0),r.addEventListener("drop",this.handleTopDrop),r.addEventListener("drop",this.handleTopDropCapture,!0))}},{key:"removeEventListeners",value:function(r){r.removeEventListener&&(r.removeEventListener("dragstart",this.handleTopDragStart),r.removeEventListener("dragstart",this.handleTopDragStartCapture,!0),r.removeEventListener("dragend",this.handleTopDragEndCapture,!0),r.removeEventListener("dragenter",this.handleTopDragEnter),r.removeEventListener("dragenter",this.handleTopDragEnterCapture,!0),r.removeEventListener("dragleave",this.handleTopDragLeaveCapture,!0),r.removeEventListener("dragover",this.handleTopDragOver),r.removeEventListener("dragover",this.handleTopDragOverCapture,!0),r.removeEventListener("drop",this.handleTopDrop),r.removeEventListener("drop",this.handleTopDropCapture,!0))}},{key:"getCurrentSourceNodeOptions",value:function(){var r=this.monitor.getSourceId(),n=this.sourceNodeOptions.get(r);return j9e({dropEffect:this.altKeyPressed?"copy":"move"},n||{})}},{key:"getCurrentDropEffect",value:function(){return this.isDraggingNativeItem()?"copy":this.getCurrentSourceNodeOptions().dropEffect}},{key:"getCurrentSourcePreviewNodeOptions",value:function(){var r=this.monitor.getSourceId(),n=this.sourcePreviewNodeOptions.get(r);return j9e({anchorX:.5,anchorY:.5,captureDraggingState:!1},n||{})}},{key:"isDraggingNativeItem",value:function(){var r=this.monitor.getItemType();return Object.keys(Xy).some(function(n){return Xy[n]===r})}},{key:"beginDragNativeItem",value:function(r,n){this.clearCurrentDragSourceNode(),this.currentNativeSource=N9e(r,n),this.currentNativeHandle=this.registry.addSource(r,this.currentNativeSource),this.actions.beginDrag([this.currentNativeHandle])}},{key:"setCurrentDragSourceNode",value:function(r){var n=this;this.clearCurrentDragSourceNode(),this.currentDragSourceNode=r;var o=1e3;this.mouseMoveTimeoutTimer=setTimeout(function(){var i;return(i=n.rootElement)===null||i===void 0?void 0:i.addEventListener("mousemove",n.endDragIfSourceWasRemovedFromDOM,!0)},o)}},{key:"clearCurrentDragSourceNode",value:function(){if(this.currentDragSourceNode){if(this.currentDragSourceNode=null,this.rootElement){var r;(r=this.window)===null||r===void 0||r.clearTimeout(this.mouseMoveTimeoutTimer||void 0),this.rootElement.removeEventListener("mousemove",this.endDragIfSourceWasRemovedFromDOM,!0)}return this.mouseMoveTimeoutTimer=null,!0}return!1}},{key:"handleDragStart",value:function(r,n){r.defaultPrevented||(this.dragStartSourceIds||(this.dragStartSourceIds=[]),this.dragStartSourceIds.unshift(n))}},{key:"handleDragEnter",value:function(r,n){this.dragEnterTargetIds.unshift(n)}},{key:"handleDragOver",value:function(r,n){this.dragOverTargetIds===null&&(this.dragOverTargetIds=[]),this.dragOverTargetIds.unshift(n)}},{key:"handleDrop",value:function(r,n){this.dropTargetIds.unshift(n)}}]),e}();var F9e=function(t,r,n){return new z9e(t,r,n)};u();u();u();function U9e(e,t,...r){if(Cbr()&&t===void 0)throw new Error("invariant requires an error message argument");if(!e){let n;if(t===void 0)n=new Error("Minified exception occurred; use the non-minified dev environment for the full error message and additional helpful warnings.");else{let o=0;n=new Error(t.replace(/%s/g,function(){return r[o++]})),n.name="Invariant Violation"}throw n.framesToPop=1,n}}function Cbr(){return typeof _!="undefined"&&!0}u();var Ng;(function(e){e.mouse="mouse",e.touch="touch",e.keyboard="keyboard"})(Ng||(Ng={}));u();var Abr={Left:1,Right:2,Center:4},Obr={Left:0,Center:1,Right:2};function E6(e){return e.button===void 0||e.button===Obr.Left}function B9e(e){return e.buttons===void 0||(e.buttons&Abr.Left)===0}function S6(e){return!!e.targetTouches}u();var Pbr=1;function V9e(e){let t=e.nodeType===Pbr?e:e.parentElement;if(!t)return;let{top:r,left:n}=t.getBoundingClientRect();return{x:n,y:r}}function Dbr(e,t){if(e.targetTouches.length===1)return uO(e.targetTouches[0]);if(t&&e.touches.length===1&&e.touches[0].target===t.target)return uO(e.touches[0])}function uO(e,t){return S6(e)?Dbr(e,t):{x:e.clientX,y:e.clientY}}u();function G9e(e,t,r,n){return Math.sqrt(Math.pow(Math.abs(r-e),2)+Math.pow(Math.abs(n-t),2))}function H9e(e,t,r,n,o){if(!o)return!1;let i=Math.atan2(n-t,r-e)*180/Math.PI+180;for(let a=0;a<o.length;++a){let c=o[a];if(c&&(c.start==null||i>=c.start)&&(c.end==null||i<=c.end))return!0}return!1}u();var Kre=(()=>{let e=!1;try{addEventListener("test",()=>{},Object.defineProperty({},"passive",{get(){return e=!0,!0}}))}catch(t){}return e})();u();var T6=class{get delay(){var t;return(t=this.args.delay)!==null&&t!==void 0?t:0}get scrollAngleRanges(){return this.args.scrollAngleRanges}get getDropTargetElementsAtPoint(){return this.args.getDropTargetElementsAtPoint}get ignoreContextMenu(){var t;return(t=this.args.ignoreContextMenu)!==null&&t!==void 0?t:!1}get enableHoverOutsideTarget(){var t;return(t=this.args.enableHoverOutsideTarget)!==null&&t!==void 0?t:!1}get enableKeyboardEvents(){var t;return(t=this.args.enableKeyboardEvents)!==null&&t!==void 0?t:!1}get enableMouseEvents(){var t;return(t=this.args.enableMouseEvents)!==null&&t!==void 0?t:!1}get enableTouchEvents(){var t;return(t=this.args.enableTouchEvents)!==null&&t!==void 0?t:!0}get touchSlop(){return this.args.touchSlop||0}get delayTouchStart(){var t,r,n,o;return(o=(n=(t=this.args)===null||t===void 0?void 0:t.delayTouchStart)!==null&&n!==void 0?n:(r=this.args)===null||r===void 0?void 0:r.delay)!==null&&o!==void 0?o:0}get delayMouseStart(){var t,r,n,o;return(o=(n=(t=this.args)===null||t===void 0?void 0:t.delayMouseStart)!==null&&n!==void 0?n:(r=this.args)===null||r===void 0?void 0:r.delay)!==null&&o!==void 0?o:0}get window(){if(this.context&&this.context.window)return this.context.window;if(typeof window!="undefined")return window}get document(){var t;if(!((t=this.context)===null||t===void 0)&&t.document)return this.context.document;if(this.window)return this.window.document}get rootElement(){var t;return((t=this.args)===null||t===void 0?void 0:t.rootElement)||this.document}constructor(t,r){this.args=t,this.context=r}};var cO={[Ng.mouse]:{start:"mousedown",move:"mousemove",end:"mouseup",contextmenu:"contextmenu"},[Ng.touch]:{start:"touchstart",move:"touchmove",end:"touchend"},[Ng.keyboard]:{keydown:"keydown"}},I6=class e{profile(){var t;return{sourceNodes:this.sourceNodes.size,sourcePreviewNodes:this.sourcePreviewNodes.size,sourcePreviewNodeOptions:this.sourcePreviewNodeOptions.size,targetNodes:this.targetNodes.size,dragOverTargetIds:((t=this.dragOverTargetIds)===null||t===void 0?void 0:t.length)||0}}get document(){return this.options.document}setup(){let t=this.options.rootElement;t&&(U9e(!e.isSetUp,"Cannot have two Touch backends at the same time."),e.isSetUp=!0,this.addEventListener(t,"start",this.getTopMoveStartHandler()),this.addEventListener(t,"start",this.handleTopMoveStartCapture,!0),this.addEventListener(t,"move",this.handleTopMove),this.addEventListener(t,"move",this.handleTopMoveCapture,!0),this.addEventListener(t,"end",this.handleTopMoveEndCapture,!0),this.options.enableMouseEvents&&!this.options.ignoreContextMenu&&this.addEventListener(t,"contextmenu",this.handleTopMoveEndCapture),this.options.enableKeyboardEvents&&this.addEventListener(t,"keydown",this.handleCancelOnEscape,!0))}teardown(){let t=this.options.rootElement;t&&(e.isSetUp=!1,this._mouseClientOffset={},this.removeEventListener(t,"start",this.handleTopMoveStartCapture,!0),this.removeEventListener(t,"start",this.handleTopMoveStart),this.removeEventListener(t,"move",this.handleTopMoveCapture,!0),this.removeEventListener(t,"move",this.handleTopMove),this.removeEventListener(t,"end",this.handleTopMoveEndCapture,!0),this.options.enableMouseEvents&&!this.options.ignoreContextMenu&&this.removeEventListener(t,"contextmenu",this.handleTopMoveEndCapture),this.options.enableKeyboardEvents&&this.removeEventListener(t,"keydown",this.handleCancelOnEscape,!0),this.uninstallSourceNodeRemovalObserver())}addEventListener(t,r,n,o=!1){let i=Kre?{capture:o,passive:!1}:o;this.listenerTypes.forEach(function(a){let c=cO[a][r];c&&t.addEventListener(c,n,i)})}removeEventListener(t,r,n,o=!1){let i=Kre?{capture:o,passive:!1}:o;this.listenerTypes.forEach(function(a){let c=cO[a][r];c&&t.removeEventListener(c,n,i)})}connectDragSource(t,r){let n=this.handleMoveStart.bind(this,t);return this.sourceNodes.set(t,r),this.addEventListener(r,"start",n),()=>{this.sourceNodes.delete(t),this.removeEventListener(r,"start",n)}}connectDragPreview(t,r,n){return this.sourcePreviewNodeOptions.set(t,n),this.sourcePreviewNodes.set(t,r),()=>{this.sourcePreviewNodes.delete(t),this.sourcePreviewNodeOptions.delete(t)}}connectDropTarget(t,r){let n=this.options.rootElement;if(!this.document||!n)return()=>{};let o=i=>{if(!this.document||!n||!this.monitor.isDragging())return;let a;switch(i.type){case cO.mouse.move:a={x:i.clientX,y:i.clientY};break;case cO.touch.move:var c,h;a={x:((c=i.touches[0])===null||c===void 0?void 0:c.clientX)||0,y:((h=i.touches[0])===null||h===void 0?void 0:h.clientY)||0};break}let m=a!=null?this.document.elementFromPoint(a.x,a.y):void 0,y=m&&r.contains(m);if(m===r||y)return this.handleMove(i,t)};return this.addEventListener(this.document.body,"move",o),this.targetNodes.set(t,r),()=>{this.document&&(this.targetNodes.delete(t),this.removeEventListener(this.document.body,"move",o))}}getTopMoveStartHandler(){return!this.options.delayTouchStart&&!this.options.delayMouseStart?this.handleTopMoveStart:this.handleTopMoveStartDelay}installSourceNodeRemovalObserver(t){this.uninstallSourceNodeRemovalObserver(),this.draggedSourceNode=t,this.draggedSourceNodeRemovalObserver=new MutationObserver(()=>{t&&!t.parentElement&&(this.resurrectSourceNode(),this.uninstallSourceNodeRemovalObserver())}),!(!t||!t.parentElement)&&this.draggedSourceNodeRemovalObserver.observe(t.parentElement,{childList:!0})}resurrectSourceNode(){this.document&&this.draggedSourceNode&&(this.draggedSourceNode.style.display="none",this.draggedSourceNode.removeAttribute("data-reactid"),this.document.body.appendChild(this.draggedSourceNode))}uninstallSourceNodeRemovalObserver(){this.draggedSourceNodeRemovalObserver&&this.draggedSourceNodeRemovalObserver.disconnect(),this.draggedSourceNodeRemovalObserver=void 0,this.draggedSourceNode=void 0}constructor(t,r,n){this.getSourceClientOffset=o=>{let i=this.sourceNodes.get(o);return i&&V9e(i)},this.handleTopMoveStartCapture=o=>{E6(o)&&(this.moveStartSourceIds=[])},this.handleMoveStart=o=>{Array.isArray(this.moveStartSourceIds)&&this.moveStartSourceIds.unshift(o)},this.handleTopMoveStart=o=>{if(!E6(o))return;let i=uO(o);i&&(S6(o)&&(this.lastTargetTouchFallback=o.targetTouches[0]),this._mouseClientOffset=i),this.waitingForDelay=!1},this.handleTopMoveStartDelay=o=>{if(!E6(o))return;let i=o.type===cO.touch.start?this.options.delayTouchStart:this.options.delayMouseStart;this.timeout=setTimeout(this.handleTopMoveStart.bind(this,o),i),this.waitingForDelay=!0},this.handleTopMoveCapture=()=>{this.dragOverTargetIds=[]},this.handleMove=(o,i)=>{this.dragOverTargetIds&&this.dragOverTargetIds.unshift(i)},this.handleTopMove=o=>{if(this.timeout&&clearTimeout(this.timeout),!this.document||this.waitingForDelay)return;let{moveStartSourceIds:i,dragOverTargetIds:a}=this,c=this.options.enableHoverOutsideTarget,h=uO(o,this.lastTargetTouchFallback);if(!h)return;if(this._isScrolling||!this.monitor.isDragging()&&H9e(this._mouseClientOffset.x||0,this._mouseClientOffset.y||0,h.x,h.y,this.options.scrollAngleRanges)){this._isScrolling=!0;return}if(!this.monitor.isDragging()&&this._mouseClientOffset.hasOwnProperty("x")&&i&&G9e(this._mouseClientOffset.x||0,this._mouseClientOffset.y||0,h.x,h.y)>(this.options.touchSlop?this.options.touchSlop:0)&&(this.moveStartSourceIds=void 0,this.actions.beginDrag(i,{clientOffset:this._mouseClientOffset,getSourceClientOffset:this.getSourceClientOffset,publishSource:!1})),!this.monitor.isDragging())return;let m=this.sourceNodes.get(this.monitor.getSourceId());this.installSourceNodeRemovalObserver(m),this.actions.publishDragSource(),o.cancelable&&o.preventDefault();let y=(a||[]).map(P=>this.targetNodes.get(P)).filter(P=>!!P),w=this.options.getDropTargetElementsAtPoint?this.options.getDropTargetElementsAtPoint(h.x,h.y,y):this.document.elementsFromPoint(h.x,h.y),E=[];for(let P in w){if(!w.hasOwnProperty(P))continue;let j=w[P];for(j!=null&&E.push(j);j;)j=j.parentElement,j&&E.indexOf(j)===-1&&E.push(j)}let A=E.filter(P=>y.indexOf(P)>-1).map(P=>this._getDropTargetId(P)).filter(P=>!!P).filter((P,j,D)=>D.indexOf(P)===j);if(c)for(let P in this.targetNodes){let j=this.targetNodes.get(P);if(m&&j&&j.contains(m)&&A.indexOf(P)===-1){A.unshift(P);break}}A.reverse(),this.actions.hover(A,{clientOffset:h})},this._getDropTargetId=o=>{let i=this.targetNodes.keys(),a=i.next();for(;a.done===!1;){let c=a.value;if(o===this.targetNodes.get(c))return c;a=i.next()}},this.handleTopMoveEndCapture=o=>{if(this._isScrolling=!1,this.lastTargetTouchFallback=void 0,!!B9e(o)){if(!this.monitor.isDragging()||this.monitor.didDrop()){this.moveStartSourceIds=void 0;return}o.cancelable&&o.preventDefault(),this._mouseClientOffset={},this.uninstallSourceNodeRemovalObserver(),this.actions.drop(),this.actions.endDrag()}},this.handleCancelOnEscape=o=>{o.key==="Escape"&&this.monitor.isDragging()&&(this._mouseClientOffset={},this.uninstallSourceNodeRemovalObserver(),this.actions.endDrag())},this.options=new T6(n,r),this.actions=t.getActions(),this.monitor=t.getMonitor(),this.sourceNodes=new Map,this.sourcePreviewNodes=new Map,this.sourcePreviewNodeOptions=new Map,this.targetNodes=new Map,this.listenerTypes=[],this._mouseClientOffset={},this._isScrolling=!1,this.options.enableMouseEvents&&this.listenerTypes.push(Ng.mouse),this.options.enableTouchEvents&&this.listenerTypes.push(Ng.touch),this.options.enableKeyboardEvents&&this.listenerTypes.push(Ng.keyboard)}};var W9e=function(t,r={},n={}){return new I6(t,r,n)};u();u();u();u();function Xre(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function Nbr(e,t,r){Lbr(e,t),t.set(e,r)}function Lbr(e,t){if(t.has(e))throw new TypeError("Cannot initialize the same private elements twice on an object")}function M6(e,t){var r=$9e(e,t,"get");return kbr(e,r)}function kbr(e,t){return t.get?t.get.call(e):t.value}function Rbr(e,t,r){var n=$9e(e,t,"set");return jbr(e,n,r),r}function $9e(e,t,r){if(!t.has(e))throw new TypeError("attempted to "+r+" private field on non-instance");return t.get(e)}function jbr(e,t,r){if(t.set)t.set.call(e,r);else{if(!t.writable)throw new TypeError("attempted to set read only private field");t.value=r}}var sS=new WeakMap,C6=class{constructor(){Nbr(this,sS,{writable:!0,value:void 0}),Xre(this,"register",t=>{M6(this,sS).push(t)}),Xre(this,"unregister",t=>{let r;for(;(r=M6(this,sS).indexOf(t))!==-1;)M6(this,sS).splice(r,1)}),Xre(this,"backendChanged",t=>{for(let r of M6(this,sS))r.backendChanged(t)}),Rbr(this,sS,[])}};function Md(e,t,r){qbr(e,t),t.set(e,r)}function qbr(e,t){if(t.has(e))throw new TypeError("Cannot initialize the same private elements twice on an object")}function Hh(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function Qn(e,t){var r=X9e(e,t,"get");return zbr(e,r)}function zbr(e,t){return t.get?t.get.call(e):t.value}function lS(e,t,r){var n=X9e(e,t,"set");return Fbr(e,n,r),r}function X9e(e,t,r){if(!t.has(e))throw new TypeError("attempted to "+r+" private field on non-instance");return t.get(e)}function Fbr(e,t,r){if(t.set)t.set.call(e,r);else{if(!t.writable)throw new TypeError("attempted to set read only private field");t.value=r}}var cf=new WeakMap,A6=new WeakMap,pf=new WeakMap,Jy=new WeakMap,V_=new WeakMap,Y9e=new WeakMap,Z9e=new WeakMap,K9e=new WeakMap,Jre=new WeakMap,Qre=new WeakMap,O6=new WeakMap,pO=class e{constructor(t,r,n){if(Md(this,cf,{writable:!0,value:void 0}),Md(this,A6,{writable:!0,value:void 0}),Md(this,pf,{writable:!0,value:void 0}),Md(this,Jy,{writable:!0,value:void 0}),Md(this,V_,{writable:!0,value:void 0}),Md(this,Y9e,{writable:!0,value:(o,i,a)=>{var c,h;if(!a.backend)throw new Error("You must specify a 'backend' property in your Backend entry: ".concat(JSON.stringify(a)));let m=a.backend(o,i,a.options),y=a.id,w=!a.id&&m&&m.constructor;if(w&&(y=m.constructor.name),y)w&&console.warn(`Deprecation notice: You are using a pipeline which doesn't include backends' 'id'.
        This might be unsupported in the future, please specify 'id' explicitely for every backend.`);else throw new Error("You must specify an 'id' property in your Backend entry: ".concat(JSON.stringify(a),`
        see this guide: https://github.com/louisbrunner/dnd-multi-backend/tree/master/packages/react-dnd-multi-backend#migrating-from-5xx`));if(Qn(this,pf)[y])throw new Error(`You must specify a unique 'id' property in your Backend entry:
        `.concat(JSON.stringify(a)," (conflicts with: ").concat(JSON.stringify(Qn(this,pf)[y]),")"));return{id:y,instance:m,preview:(c=a.preview)!==null&&c!==void 0?c:!1,transition:a.transition,skipDispatchOnTransition:(h=a.skipDispatchOnTransition)!==null&&h!==void 0?h:!1}}}),Hh(this,"setup",()=>{if(typeof window!="undefined"){if(e.isSetUp)throw new Error("Cannot have two MultiBackends at the same time.");e.isSetUp=!0,Qn(this,Z9e).call(this,window),Qn(this,pf)[Qn(this,cf)].instance.setup()}}),Hh(this,"teardown",()=>{typeof window!="undefined"&&(e.isSetUp=!1,Qn(this,K9e).call(this,window),Qn(this,pf)[Qn(this,cf)].instance.teardown())}),Hh(this,"connectDragSource",(o,i,a)=>Qn(this,O6).call(this,"connectDragSource",o,i,a)),Hh(this,"connectDragPreview",(o,i,a)=>Qn(this,O6).call(this,"connectDragPreview",o,i,a)),Hh(this,"connectDropTarget",(o,i,a)=>Qn(this,O6).call(this,"connectDropTarget",o,i,a)),Hh(this,"profile",()=>Qn(this,pf)[Qn(this,cf)].instance.profile()),Hh(this,"previewEnabled",()=>Qn(this,pf)[Qn(this,cf)].preview),Hh(this,"previewsList",()=>Qn(this,A6)),Hh(this,"backendsList",()=>Qn(this,Jy)),Md(this,Z9e,{writable:!0,value:o=>{Qn(this,Jy).forEach(i=>{i.transition&&o.addEventListener(i.transition.event,Qn(this,Jre))})}}),Md(this,K9e,{writable:!0,value:o=>{Qn(this,Jy).forEach(i=>{i.transition&&o.removeEventListener(i.transition.event,Qn(this,Jre))})}}),Md(this,Jre,{writable:!0,value:o=>{let i=Qn(this,cf);if(Qn(this,Jy).some(c=>c.id!==Qn(this,cf)&&c.transition&&c.transition.check(o)?(lS(this,cf,c.id),!0):!1),Qn(this,cf)!==i){var a;Qn(this,pf)[i].instance.teardown(),Object.keys(Qn(this,V_)).forEach(y=>{let w=Qn(this,V_)[y];w.unsubscribe(),w.unsubscribe=Qn(this,Qre).call(this,w.func,...w.args)}),Qn(this,A6).backendChanged(this);let c=Qn(this,pf)[Qn(this,cf)];if(c.instance.setup(),c.skipDispatchOnTransition)return;let h=o.constructor,m=new h(o.type,o);(a=o.target)===null||a===void 0||a.dispatchEvent(m)}}}),Md(this,Qre,{writable:!0,value:(o,i,a,c)=>Qn(this,pf)[Qn(this,cf)].instance[o](i,a,c)}),Md(this,O6,{writable:!0,value:(o,i,a,c)=>{let h="".concat(o,"_").concat(i),m=Qn(this,Qre).call(this,o,i,a,c);return Qn(this,V_)[h]={func:o,args:[i,a,c],unsubscribe:m},()=>{Qn(this,V_)[h].unsubscribe(),delete Qn(this,V_)[h]}}}),!n||!n.backends||n.backends.length<1)throw new Error(`You must specify at least one Backend, if you are coming from 2.x.x (or don't understand this error)
        see this guide: https://github.com/louisbrunner/dnd-multi-backend/tree/master/packages/react-dnd-multi-backend#migrating-from-2xx`);lS(this,A6,new C6),lS(this,pf,{}),lS(this,Jy,[]),n.backends.forEach(o=>{let i=Qn(this,Y9e).call(this,t,r,o);Qn(this,pf)[i.id]=i,Qn(this,Jy).push(i)}),lS(this,cf,Qn(this,Jy)[0].id),lS(this,V_,{})}};Hh(pO,"isSetUp",!1);var ene=(e,t,r)=>new pO(e,t,r);u();var fO=(e,t)=>({event:e,check:t});u();var tne=fO("touchstart",e=>{let t=e;return t.touches!==null&&t.touches!==void 0}),Ubr=fO("dragstart",e=>e.type.indexOf("drag")!==-1||e.type.indexOf("drop")!==-1),Bbr=fO("mousedown",e=>e.type.indexOf("touch")===-1&&e.type.indexOf("mouse")!==-1),rne=fO("pointerdown",e=>e.pointerType=="mouse");var nne={backends:[{id:"html5",backend:F9e,transition:rne},{id:"touch",backend:W9e,options:{enableMouseEvents:!0},preview:!0,transition:tne}]};u();u();var n0=Q(De());u();var J9e=Q(De()),P6=(0,J9e.createContext)({dragDropManager:void 0});u();var uBe=Q(nUe()),B6=Q(De());u();var vp;(function(e){e.SOURCE="SOURCE",e.TARGET="TARGET"})(vp||(vp={}));u();u();u();u();u();function tn(e,t){for(var r=arguments.length,n=new Array(r>2?r-2:0),o=2;o<r;o++)n[o-2]=arguments[o];if(!e){var i;if(t===void 0)i=new Error("Minified exception occurred; use the non-minified dev environment for the full error message and additional helpful warnings.");else{var a=0;i=new Error(t.replace(/%s/g,function(){return n[a++]})),i.name="Invariant Violation"}throw i.framesToPop=1,i}}u();u();var uS="dnd-core/INIT_COORDS",Qy="dnd-core/BEGIN_DRAG",cS="dnd-core/PUBLISH_DRAG_SOURCE",e0="dnd-core/HOVER",t0="dnd-core/DROP",r0="dnd-core/END_DRAG";function ine(e,t){return{type:uS,payload:{sourceClientOffset:t||null,clientOffset:e||null}}}u();function D6(e){"@babel/helpers - typeof";return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?D6=function(r){return typeof r}:D6=function(r){return r&&typeof Symbol=="function"&&r.constructor===Symbol&&r!==Symbol.prototype?"symbol":typeof r},D6(e)}function oUe(e,t,r){return t.split(".").reduce(function(n,o){return n&&n[o]?n[o]:r||null},e)}function iUe(e,t){return e.filter(function(r){return r!==t})}function N6(e){return D6(e)==="object"}function aUe(e,t){var r=new Map,n=function(a){r.set(a,r.has(a)?r.get(a)+1:1)};e.forEach(n),t.forEach(n);var o=[];return r.forEach(function(i,a){i===1&&o.push(a)}),o}function sUe(e,t){return e.filter(function(r){return t.indexOf(r)>-1})}var $br={type:uS,payload:{clientOffset:null,sourceClientOffset:null}};function lUe(e){return function(){var r=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[],n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{publishSource:!0},o=n.publishSource,i=o===void 0?!0:o,a=n.clientOffset,c=n.getSourceClientOffset,h=e.getMonitor(),m=e.getRegistry();e.dispatch(ine(a)),Ybr(r,h,m);var y=Xbr(r,h);if(y===null){e.dispatch($br);return}var w=null;if(a){if(!c)throw new Error("getSourceClientOffset must be defined");Zbr(c),w=c(y)}e.dispatch(ine(a,w));var E=m.getSource(y),A=E.beginDrag(h,y);if(A!=null){Kbr(A),m.pinSource(y);var P=m.getSourceType(y);return{type:Qy,payload:{itemType:P,item:A,sourceId:y,clientOffset:a||null,sourceClientOffset:w||null,isSourcePublic:!!i}}}}}function Ybr(e,t,r){tn(!t.isDragging(),"Cannot call beginDrag while dragging."),e.forEach(function(n){tn(r.getSource(n),"Expected sourceIds to be registered.")})}function Zbr(e){tn(typeof e=="function","When clientOffset is provided, getSourceClientOffset must be a function.")}function Kbr(e){tn(N6(e),"Item must be an object.")}function Xbr(e,t){for(var r=null,n=e.length-1;n>=0;n--)if(t.canDragSource(e[n])){r=e[n];break}return r}u();function uUe(e){return function(){var r=e.getMonitor();if(r.isDragging())return{type:cS}}}u();u();function hO(e,t){return t===null?e===null:Array.isArray(e)?e.some(function(r){return r===t}):e===t}function cUe(e){return function(r){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},o=n.clientOffset;Jbr(r);var i=r.slice(0),a=e.getMonitor(),c=e.getRegistry();Qbr(i,a,c);var h=a.getItemType();return exr(i,c,h),txr(i,a,c),{type:e0,payload:{targetIds:i,clientOffset:o||null}}}}function Jbr(e){tn(Array.isArray(e),"Expected targetIds to be an array.")}function Qbr(e,t,r){tn(t.isDragging(),"Cannot call hover while not dragging."),tn(!t.didDrop(),"Cannot call hover after drop.");for(var n=0;n<e.length;n++){var o=e[n];tn(e.lastIndexOf(o)===n,"Expected targetIds to be unique in the passed array.");var i=r.getTarget(o);tn(i,"Expected targetIds to be registered.")}}function exr(e,t,r){for(var n=e.length-1;n>=0;n--){var o=e[n],i=t.getTargetType(o);hO(i,r)||e.splice(n,1)}}function txr(e,t,r){e.forEach(function(n){var o=r.getTarget(n);o.hover(t,n)})}u();function pUe(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(o){return Object.getOwnPropertyDescriptor(e,o).enumerable})),r.push.apply(r,n)}return r}function fUe(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?pUe(Object(r),!0).forEach(function(n){rxr(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):pUe(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function rxr(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function dUe(e){return function(){var r=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},n=e.getMonitor(),o=e.getRegistry();nxr(n);var i=axr(n);i.forEach(function(a,c){var h=oxr(a,c,o,n),m={type:t0,payload:{dropResult:fUe(fUe({},r),h)}};e.dispatch(m)})}}function nxr(e){tn(e.isDragging(),"Cannot call drop while not dragging."),tn(!e.didDrop(),"Cannot call drop twice during one drag operation.")}function oxr(e,t,r,n){var o=r.getTarget(e),i=o?o.drop(n,e):void 0;return ixr(i),typeof i=="undefined"&&(i=t===0?{}:n.getDropResult()),i}function ixr(e){tn(typeof e=="undefined"||N6(e),"Drop result must either be an object or undefined.")}function axr(e){var t=e.getTargetIds().filter(e.canDropOnTarget,e);return t.reverse(),t}u();function hUe(e){return function(){var r=e.getMonitor(),n=e.getRegistry();sxr(r);var o=r.getSourceId();if(o!=null){var i=n.getSource(o,!0);i.endDrag(r,o),n.unpinSource()}return{type:r0}}}function sxr(e){tn(e.isDragging(),"Cannot call endDrag while not dragging.")}function mUe(e){return{beginDrag:lUe(e),publishDragSource:uUe(e),hover:cUe(e),drop:dUe(e),endDrag:hUe(e)}}function lxr(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function gUe(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function uxr(e,t,r){return t&&gUe(e.prototype,t),r&&gUe(e,r),e}function mO(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var vUe=function(){function e(t,r){var n=this;lxr(this,e),mO(this,"store",void 0),mO(this,"monitor",void 0),mO(this,"backend",void 0),mO(this,"isSetUp",!1),mO(this,"handleRefCountChange",function(){var o=n.store.getState().refCount>0;n.backend&&(o&&!n.isSetUp?(n.backend.setup(),n.isSetUp=!0):!o&&n.isSetUp&&(n.backend.teardown(),n.isSetUp=!1))}),this.store=t,this.monitor=r,t.subscribe(this.handleRefCountChange)}return uxr(e,[{key:"receiveBackend",value:function(r){this.backend=r}},{key:"getMonitor",value:function(){return this.monitor}},{key:"getBackend",value:function(){return this.backend}},{key:"getRegistry",value:function(){return this.monitor.registry}},{key:"getActions",value:function(){var r=this,n=this.store.dispatch;function o(a){return function(){for(var c=arguments.length,h=new Array(c),m=0;m<c;m++)h[m]=arguments[m];var y=a.apply(r,h);typeof y!="undefined"&&n(y)}}var i=mUe(this);return Object.keys(i).reduce(function(a,c){var h=i[c];return a[c]=o(h),a},{})}},{key:"dispatch",value:function(r){this.store.dispatch(r)}}]),e}();u();u();u();u();u();function No(e){"@babel/helpers - typeof";return No=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},No(e)}u();function yUe(e,t){if(No(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t||"default");if(No(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function L6(e){var t=yUe(e,"string");return No(t)=="symbol"?t:t+""}function Zt(e,t,r){return(t=L6(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function _Ue(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(o){return Object.getOwnPropertyDescriptor(e,o).enumerable})),r.push.apply(r,n)}return r}function nr(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?_Ue(Object(r),!0).forEach(function(n){Zt(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):_Ue(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function ff(e){return"Minified Redux error #"+e+"; visit https://redux.js.org/Errors?code="+e+" for the full message or use the non-minified dev environment for full errors. "}var bUe=function(){return typeof Symbol=="function"&&Symbol.observable||"@@observable"}(),ane=function(){return Math.random().toString(36).substring(7).split("").join(".")},xUe={INIT:"@@redux/INIT"+ane(),REPLACE:"@@redux/REPLACE"+ane(),PROBE_UNKNOWN_ACTION:function(){return"@@redux/PROBE_UNKNOWN_ACTION"+ane()}};function cxr(e){if(typeof e!="object"||e===null)return!1;for(var t=e;Object.getPrototypeOf(t)!==null;)t=Object.getPrototypeOf(t);return Object.getPrototypeOf(e)===t}function sne(e,t,r){var n;if(typeof t=="function"&&typeof r=="function"||typeof r=="function"&&typeof arguments[3]=="function")throw new Error(ff(0));if(typeof t=="function"&&typeof r=="undefined"&&(r=t,t=void 0),typeof r!="undefined"){if(typeof r!="function")throw new Error(ff(1));return r(sne)(e,t)}if(typeof e!="function")throw new Error(ff(2));var o=e,i=t,a=[],c=a,h=!1;function m(){c===a&&(c=a.slice())}function y(){if(h)throw new Error(ff(3));return i}function w(j){if(typeof j!="function")throw new Error(ff(4));if(h)throw new Error(ff(5));var D=!0;return m(),c.push(j),function(){if(D){if(h)throw new Error(ff(6));D=!1,m();var z=c.indexOf(j);c.splice(z,1),a=null}}}function E(j){if(!cxr(j))throw new Error(ff(7));if(typeof j.type=="undefined")throw new Error(ff(8));if(h)throw new Error(ff(9));try{h=!0,i=o(i,j)}finally{h=!1}for(var D=a=c,k=0;k<D.length;k++){var z=D[k];z()}return j}function A(j){if(typeof j!="function")throw new Error(ff(10));o=j,E({type:xUe.REPLACE})}function P(){var j,D=w;return j={subscribe:function(z){if(typeof z!="object"||z===null)throw new Error(ff(11));function V(){z.next&&z.next(y())}V();var G=D(V);return{unsubscribe:G}}},j[bUe]=function(){return this},j}return E({type:xUe.INIT}),n={dispatch:E,subscribe:w,getState:y,replaceReducer:A},n[bUe]=P,n}u();u();u();var pxr=function(t,r){return t===r};function wUe(e,t){return!e&&!t?!0:!e||!t?!1:e.x===t.x&&e.y===t.y}function EUe(e,t){var r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:pxr;if(e.length!==t.length)return!1;for(var n=0;n<e.length;++n)if(!r(e[n],t[n]))return!1;return!0}function SUe(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(o){return Object.getOwnPropertyDescriptor(e,o).enumerable})),r.push.apply(r,n)}return r}function TUe(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?SUe(Object(r),!0).forEach(function(n){fxr(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):SUe(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function fxr(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var IUe={initialSourceClientOffset:null,initialClientOffset:null,clientOffset:null};function MUe(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:IUe,t=arguments.length>1?arguments[1]:void 0,r=t.payload;switch(t.type){case uS:case Qy:return{initialSourceClientOffset:r.sourceClientOffset,initialClientOffset:r.clientOffset,clientOffset:r.clientOffset};case e0:return wUe(e.clientOffset,r.clientOffset)?e:TUe(TUe({},e),{},{clientOffset:r.clientOffset});case r0:case t0:return IUe;default:return e}}u();u();var gO="dnd-core/ADD_SOURCE",vO="dnd-core/ADD_TARGET",yO="dnd-core/REMOVE_SOURCE",G_="dnd-core/REMOVE_TARGET";function CUe(e){return{type:gO,payload:{sourceId:e}}}function AUe(e){return{type:vO,payload:{targetId:e}}}function OUe(e){return{type:yO,payload:{sourceId:e}}}function PUe(e){return{type:G_,payload:{targetId:e}}}function DUe(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(o){return Object.getOwnPropertyDescriptor(e,o).enumerable})),r.push.apply(r,n)}return r}function df(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?DUe(Object(r),!0).forEach(function(n){dxr(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):DUe(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function dxr(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var hxr={itemType:null,item:null,sourceId:null,targetIds:[],dropResult:null,didDrop:!1,isSourcePublic:null};function NUe(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:hxr,t=arguments.length>1?arguments[1]:void 0,r=t.payload;switch(t.type){case Qy:return df(df({},e),{},{itemType:r.itemType,item:r.item,sourceId:r.sourceId,isSourcePublic:r.isSourcePublic,dropResult:null,didDrop:!1});case cS:return df(df({},e),{},{isSourcePublic:!0});case e0:return df(df({},e),{},{targetIds:r.targetIds});case G_:return e.targetIds.indexOf(r.targetId)===-1?e:df(df({},e),{},{targetIds:iUe(e.targetIds,r.targetId)});case t0:return df(df({},e),{},{dropResult:r.dropResult,didDrop:!0,targetIds:[]});case r0:return df(df({},e),{},{itemType:null,item:null,sourceId:null,dropResult:null,didDrop:!1,isSourcePublic:null,targetIds:[]});default:return e}}u();function LUe(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:0,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case gO:case vO:return e+1;case yO:case G_:return e-1;default:return e}}u();u();var pS=[],k6=[];pS.__IS_NONE__=!0;k6.__IS_ALL__=!0;function kUe(e,t){if(e===pS)return!1;if(e===k6||typeof t=="undefined")return!0;var r=sUe(t,e);return r.length>0}function RUe(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:pS,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case e0:break;case gO:case vO:case G_:case yO:return pS;case Qy:case cS:case r0:case t0:default:return k6}var r=t.payload,n=r.targetIds,o=n===void 0?[]:n,i=r.prevTargetIds,a=i===void 0?[]:i,c=aUe(o,a),h=c.length>0||!EUe(o,a);if(!h)return pS;var m=a[a.length-1],y=o[o.length-1];return m!==y&&(m&&c.push(m),y&&c.push(y)),c}u();function jUe(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:0;return e+1}function qUe(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(o){return Object.getOwnPropertyDescriptor(e,o).enumerable})),r.push.apply(r,n)}return r}function zUe(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?qUe(Object(r),!0).forEach(function(n){mxr(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):qUe(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function mxr(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function FUe(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0;return{dirtyHandlerIds:RUe(e.dirtyHandlerIds,{type:t.type,payload:zUe(zUe({},t.payload),{},{prevTargetIds:oUe(e,"dragOperation.targetIds",[])})}),dragOffset:MUe(e.dragOffset,t),refCount:LUe(e.refCount,t),dragOperation:NUe(e.dragOperation,t),stateId:jUe(e.stateId)}}u();u();function gxr(e,t){return{x:e.x+t.x,y:e.y+t.y}}function UUe(e,t){return{x:e.x-t.x,y:e.y-t.y}}function BUe(e){var t=e.clientOffset,r=e.initialClientOffset,n=e.initialSourceClientOffset;return!t||!r||!n?null:UUe(gxr(t,n),r)}function VUe(e){var t=e.clientOffset,r=e.initialClientOffset;return!t||!r?null:UUe(t,r)}function vxr(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function GUe(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function yxr(e,t,r){return t&&GUe(e.prototype,t),r&&GUe(e,r),e}function HUe(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var WUe=function(){function e(t,r){vxr(this,e),HUe(this,"store",void 0),HUe(this,"registry",void 0),this.store=t,this.registry=r}return yxr(e,[{key:"subscribeToStateChange",value:function(r){var n=this,o=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{handlerIds:void 0},i=o.handlerIds;tn(typeof r=="function","listener must be a function."),tn(typeof i=="undefined"||Array.isArray(i),"handlerIds, when specified, must be an array of strings.");var a=this.store.getState().stateId,c=function(){var m=n.store.getState(),y=m.stateId;try{var w=y===a||y===a+1&&!kUe(m.dirtyHandlerIds,i);w||r()}finally{a=y}};return this.store.subscribe(c)}},{key:"subscribeToOffsetChange",value:function(r){var n=this;tn(typeof r=="function","listener must be a function.");var o=this.store.getState().dragOffset,i=function(){var c=n.store.getState().dragOffset;c!==o&&(o=c,r())};return this.store.subscribe(i)}},{key:"canDragSource",value:function(r){if(!r)return!1;var n=this.registry.getSource(r);return tn(n,"Expected to find a valid source. sourceId=".concat(r)),this.isDragging()?!1:n.canDrag(this,r)}},{key:"canDropOnTarget",value:function(r){if(!r)return!1;var n=this.registry.getTarget(r);if(tn(n,"Expected to find a valid target. targetId=".concat(r)),!this.isDragging()||this.didDrop())return!1;var o=this.registry.getTargetType(r),i=this.getItemType();return hO(o,i)&&n.canDrop(this,r)}},{key:"isDragging",value:function(){return!!this.getItemType()}},{key:"isDraggingSource",value:function(r){if(!r)return!1;var n=this.registry.getSource(r,!0);if(tn(n,"Expected to find a valid source. sourceId=".concat(r)),!this.isDragging()||!this.isSourcePublic())return!1;var o=this.registry.getSourceType(r),i=this.getItemType();return o!==i?!1:n.isDragging(this,r)}},{key:"isOverTarget",value:function(r){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{shallow:!1};if(!r)return!1;var o=n.shallow;if(!this.isDragging())return!1;var i=this.registry.getTargetType(r),a=this.getItemType();if(a&&!hO(i,a))return!1;var c=this.getTargetIds();if(!c.length)return!1;var h=c.indexOf(r);return o?h===c.length-1:h>-1}},{key:"getItemType",value:function(){return this.store.getState().dragOperation.itemType}},{key:"getItem",value:function(){return this.store.getState().dragOperation.item}},{key:"getSourceId",value:function(){return this.store.getState().dragOperation.sourceId}},{key:"getTargetIds",value:function(){return this.store.getState().dragOperation.targetIds}},{key:"getDropResult",value:function(){return this.store.getState().dragOperation.dropResult}},{key:"didDrop",value:function(){return this.store.getState().dragOperation.didDrop}},{key:"isSourcePublic",value:function(){return!!this.store.getState().dragOperation.isSourcePublic}},{key:"getInitialClientOffset",value:function(){return this.store.getState().dragOffset.initialClientOffset}},{key:"getInitialSourceClientOffset",value:function(){return this.store.getState().dragOffset.initialSourceClientOffset}},{key:"getClientOffset",value:function(){return this.store.getState().dragOffset.clientOffset}},{key:"getSourceClientOffset",value:function(){return BUe(this.store.getState().dragOffset)}},{key:"getDifferenceFromInitialOffset",value:function(){return VUe(this.store.getState().dragOffset)}}]),e}();u();u();var _xr=0;function $Ue(){return _xr++}u();function R6(e){"@babel/helpers - typeof";return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?R6=function(r){return typeof r}:R6=function(r){return r&&typeof Symbol=="function"&&r.constructor===Symbol&&r!==Symbol.prototype?"symbol":typeof r},R6(e)}function YUe(e){tn(typeof e.canDrag=="function","Expected canDrag to be a function."),tn(typeof e.beginDrag=="function","Expected beginDrag to be a function."),tn(typeof e.endDrag=="function","Expected endDrag to be a function.")}function ZUe(e){tn(typeof e.canDrop=="function","Expected canDrop to be a function."),tn(typeof e.hover=="function","Expected hover to be a function."),tn(typeof e.drop=="function","Expected beginDrag to be a function.")}function j6(e,t){if(t&&Array.isArray(e)){e.forEach(function(r){return j6(r,!1)});return}tn(typeof e=="string"||R6(e)==="symbol",t?"Type can only be a string, a symbol, or an array of either.":"Type can only be a string or a symbol.")}u();u();u();u();var KUe=typeof global!="undefined"?global:self,XUe=KUe.MutationObserver||KUe.WebKitMutationObserver;function lne(e){return function(){let r=setTimeout(o,0),n=setInterval(o,50);function o(){clearTimeout(r),clearInterval(n),e()}}}function bxr(e){let t=1,r=new XUe(e),n=document.createTextNode("");return r.observe(n,{characterData:!0}),function(){t=-t,n.data=t}}var JUe=typeof XUe=="function"?bxr:lne;var q6=class{enqueueTask(t){let{queue:r,requestFlush:n}=this;r.length||(n(),this.flushing=!0),r[r.length]=t}constructor(){this.queue=[],this.pendingErrors=[],this.flushing=!1,this.index=0,this.capacity=1024,this.flush=()=>{let{queue:t}=this;for(;this.index<t.length;){let r=this.index;if(this.index++,t[r].call(),this.index>this.capacity){for(let n=0,o=t.length-this.index;n<o;n++)t[n]=t[n+this.index];t.length-=this.index,this.index=0}}t.length=0,this.index=0,this.flushing=!1},this.registerPendingError=t=>{this.pendingErrors.push(t),this.requestErrorThrow()},this.requestFlush=JUe(this.flush),this.requestErrorThrow=lne(()=>{if(this.pendingErrors.length)throw this.pendingErrors.shift()})}};u();u();var z6=class{call(){try{this.task&&this.task()}catch(t){this.onError(t)}finally{this.task=null,this.release(this)}}constructor(t,r){this.onError=t,this.release=r,this.task=null}};var F6=class{create(t){let r=this.freeTasks,n=r.length?r.pop():new z6(this.onError,o=>r[r.length]=o);return n.task=t,n}constructor(t){this.onError=t,this.freeTasks=[]}};var QUe=new q6,xxr=new F6(QUe.registerPendingError);function eBe(e){QUe.enqueueTask(xxr.create(e))}u();function wxr(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function tBe(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function Exr(e,t,r){return t&&tBe(e.prototype,t),r&&tBe(e,r),e}function fS(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function Sxr(e,t){return Cxr(e)||Mxr(e,t)||Ixr(e,t)||Txr()}function Txr(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Ixr(e,t){if(e){if(typeof e=="string")return rBe(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if(r==="Object"&&e.constructor&&(r=e.constructor.name),r==="Map"||r==="Set")return Array.from(e);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return rBe(e,t)}}function rBe(e,t){(t==null||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function Mxr(e,t){var r=e==null?null:typeof Symbol!="undefined"&&e[Symbol.iterator]||e["@@iterator"];if(r!=null){var n=[],o=!0,i=!1,a,c;try{for(r=r.call(e);!(o=(a=r.next()).done)&&(n.push(a.value),!(t&&n.length===t));o=!0);}catch(h){i=!0,c=h}finally{try{!o&&r.return!=null&&r.return()}finally{if(i)throw c}}return n}}function Cxr(e){if(Array.isArray(e))return e}function Axr(e){var t=$Ue().toString();switch(e){case vp.SOURCE:return"S".concat(t);case vp.TARGET:return"T".concat(t);default:throw new Error("Unknown Handler Role: ".concat(e))}}function nBe(e){switch(e[0]){case"S":return vp.SOURCE;case"T":return vp.TARGET;default:tn(!1,"Cannot parse handler ID: ".concat(e))}}function oBe(e,t){var r=e.entries(),n=!1;do{var o=r.next(),i=o.done,a=Sxr(o.value,2),c=a[1];if(c===t)return!0;n=!!i}while(!n);return!1}var iBe=function(){function e(t){wxr(this,e),fS(this,"types",new Map),fS(this,"dragSources",new Map),fS(this,"dropTargets",new Map),fS(this,"pinnedSourceId",null),fS(this,"pinnedSource",null),fS(this,"store",void 0),this.store=t}return Exr(e,[{key:"addSource",value:function(r,n){j6(r),YUe(n);var o=this.addHandler(vp.SOURCE,r,n);return this.store.dispatch(CUe(o)),o}},{key:"addTarget",value:function(r,n){j6(r,!0),ZUe(n);var o=this.addHandler(vp.TARGET,r,n);return this.store.dispatch(AUe(o)),o}},{key:"containsHandler",value:function(r){return oBe(this.dragSources,r)||oBe(this.dropTargets,r)}},{key:"getSource",value:function(r){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1;tn(this.isSourceId(r),"Expected a valid source ID.");var o=n&&r===this.pinnedSourceId,i=o?this.pinnedSource:this.dragSources.get(r);return i}},{key:"getTarget",value:function(r){return tn(this.isTargetId(r),"Expected a valid target ID."),this.dropTargets.get(r)}},{key:"getSourceType",value:function(r){return tn(this.isSourceId(r),"Expected a valid source ID."),this.types.get(r)}},{key:"getTargetType",value:function(r){return tn(this.isTargetId(r),"Expected a valid target ID."),this.types.get(r)}},{key:"isSourceId",value:function(r){var n=nBe(r);return n===vp.SOURCE}},{key:"isTargetId",value:function(r){var n=nBe(r);return n===vp.TARGET}},{key:"removeSource",value:function(r){var n=this;tn(this.getSource(r),"Expected an existing source."),this.store.dispatch(OUe(r)),eBe(function(){n.dragSources.delete(r),n.types.delete(r)})}},{key:"removeTarget",value:function(r){tn(this.getTarget(r),"Expected an existing target."),this.store.dispatch(PUe(r)),this.dropTargets.delete(r),this.types.delete(r)}},{key:"pinSource",value:function(r){var n=this.getSource(r);tn(n,"Expected an existing source."),this.pinnedSourceId=r,this.pinnedSource=n}},{key:"unpinSource",value:function(){tn(this.pinnedSource,"No source is pinned at the time."),this.pinnedSourceId=null,this.pinnedSource=null}},{key:"addHandler",value:function(r,n,o){var i=Axr(r);return this.types.set(i,n),r===vp.SOURCE?this.dragSources.set(i,o):r===vp.TARGET&&this.dropTargets.set(i,o),i}}]),e}();function aBe(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:void 0,r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},n=arguments.length>3&&arguments[3]!==void 0?arguments[3]:!1,o=Oxr(n),i=new WUe(o,new iBe(o)),a=new vUe(o,i),c=e(a,t,r);return a.receiveBackend(c),a}function Oxr(e){var t=typeof window!="undefined"&&window.__REDUX_DEVTOOLS_EXTENSION__;return sne(FUe,e&&t&&t({name:"dnd-core",instanceId:"dnd-core"}))}var Pxr=["children"];function Dxr(e,t){return Rxr(e)||kxr(e,t)||Lxr(e,t)||Nxr()}function Nxr(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Lxr(e,t){if(e){if(typeof e=="string")return sBe(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if(r==="Object"&&e.constructor&&(r=e.constructor.name),r==="Map"||r==="Set")return Array.from(e);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return sBe(e,t)}}function sBe(e,t){(t==null||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function kxr(e,t){var r=e==null?null:typeof Symbol!="undefined"&&e[Symbol.iterator]||e["@@iterator"];if(r!=null){var n=[],o=!0,i=!1,a,c;try{for(r=r.call(e);!(o=(a=r.next()).done)&&(n.push(a.value),!(t&&n.length===t));o=!0);}catch(h){i=!0,c=h}finally{try{!o&&r.return!=null&&r.return()}finally{if(i)throw c}}return n}}function Rxr(e){if(Array.isArray(e))return e}function jxr(e,t){if(e==null)return{};var r=qxr(e,t),n,o;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(o=0;o<i.length;o++)n=i[o],!(t.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}function qxr(e,t){if(e==null)return{};var r={},n=Object.keys(e),o,i;for(i=0;i<n.length;i++)o=n[i],!(t.indexOf(o)>=0)&&(r[o]=e[o]);return r}var lBe=0,U6=Symbol.for("__REACT_DND_CONTEXT_INSTANCE__"),cBe=(0,B6.memo)(function(t){var r=t.children,n=jxr(t,Pxr),o=zxr(n),i=Dxr(o,2),a=i[0],c=i[1];return(0,B6.useEffect)(function(){if(c){var h=pBe();return++lBe,function(){--lBe===0&&(h[U6]=null)}}},[]),(0,uBe.jsx)(P6.Provider,Object.assign({value:a},{children:r}),void 0)});function zxr(e){if("manager"in e){var t={dragDropManager:e.manager};return[t,!1]}var r=Fxr(e.backend,e.context,e.options,e.debugMode),n=!e.context;return[r,n]}function Fxr(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:pBe(),r=arguments.length>2?arguments[2]:void 0,n=arguments.length>3?arguments[3]:void 0,o=t;return o[U6]||(o[U6]={dragDropManager:aBe(e,t,r,n)}),o[U6]}function pBe(){return typeof global!="undefined"?global:window}u();function Uxr(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function fBe(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function Bxr(e,t,r){return t&&fBe(e.prototype,t),r&&fBe(e,r),e}function dBe(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var une=!1,cne=!1,hBe=function(){function e(t){Uxr(this,e),dBe(this,"internalMonitor",void 0),dBe(this,"sourceId",null),this.internalMonitor=t.getMonitor()}return Bxr(e,[{key:"receiveHandlerId",value:function(r){this.sourceId=r}},{key:"getHandlerId",value:function(){return this.sourceId}},{key:"canDrag",value:function(){tn(!une,"You may not call monitor.canDrag() inside your canDrag() implementation. Read more: http://react-dnd.github.io/react-dnd/docs/api/drag-source-monitor");try{return une=!0,this.internalMonitor.canDragSource(this.sourceId)}finally{une=!1}}},{key:"isDragging",value:function(){if(!this.sourceId)return!1;tn(!cne,"You may not call monitor.isDragging() inside your isDragging() implementation. Read more: http://react-dnd.github.io/react-dnd/docs/api/drag-source-monitor");try{return cne=!0,this.internalMonitor.isDraggingSource(this.sourceId)}finally{cne=!1}}},{key:"subscribeToStateChange",value:function(r,n){return this.internalMonitor.subscribeToStateChange(r,n)}},{key:"isDraggingSource",value:function(r){return this.internalMonitor.isDraggingSource(r)}},{key:"isOverTarget",value:function(r,n){return this.internalMonitor.isOverTarget(r,n)}},{key:"getTargetIds",value:function(){return this.internalMonitor.getTargetIds()}},{key:"isSourcePublic",value:function(){return this.internalMonitor.isSourcePublic()}},{key:"getSourceId",value:function(){return this.internalMonitor.getSourceId()}},{key:"subscribeToOffsetChange",value:function(r){return this.internalMonitor.subscribeToOffsetChange(r)}},{key:"canDragSource",value:function(r){return this.internalMonitor.canDragSource(r)}},{key:"canDropOnTarget",value:function(r){return this.internalMonitor.canDropOnTarget(r)}},{key:"getItemType",value:function(){return this.internalMonitor.getItemType()}},{key:"getItem",value:function(){return this.internalMonitor.getItem()}},{key:"getDropResult",value:function(){return this.internalMonitor.getDropResult()}},{key:"didDrop",value:function(){return this.internalMonitor.didDrop()}},{key:"getInitialClientOffset",value:function(){return this.internalMonitor.getInitialClientOffset()}},{key:"getInitialSourceClientOffset",value:function(){return this.internalMonitor.getInitialSourceClientOffset()}},{key:"getSourceClientOffset",value:function(){return this.internalMonitor.getSourceClientOffset()}},{key:"getClientOffset",value:function(){return this.internalMonitor.getClientOffset()}},{key:"getDifferenceFromInitialOffset",value:function(){return this.internalMonitor.getDifferenceFromInitialOffset()}}]),e}();u();function Vxr(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function mBe(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function Gxr(e,t,r){return t&&mBe(e.prototype,t),r&&mBe(e,r),e}function gBe(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var pne=!1,vBe=function(){function e(t){Vxr(this,e),gBe(this,"internalMonitor",void 0),gBe(this,"targetId",null),this.internalMonitor=t.getMonitor()}return Gxr(e,[{key:"receiveHandlerId",value:function(r){this.targetId=r}},{key:"getHandlerId",value:function(){return this.targetId}},{key:"subscribeToStateChange",value:function(r,n){return this.internalMonitor.subscribeToStateChange(r,n)}},{key:"canDrop",value:function(){if(!this.targetId)return!1;tn(!pne,"You may not call monitor.canDrop() inside your canDrop() implementation. Read more: http://react-dnd.github.io/react-dnd/docs/api/drop-target-monitor");try{return pne=!0,this.internalMonitor.canDropOnTarget(this.targetId)}finally{pne=!1}}},{key:"isOver",value:function(r){return this.targetId?this.internalMonitor.isOverTarget(this.targetId,r):!1}},{key:"getItemType",value:function(){return this.internalMonitor.getItemType()}},{key:"getItem",value:function(){return this.internalMonitor.getItem()}},{key:"getDropResult",value:function(){return this.internalMonitor.getDropResult()}},{key:"didDrop",value:function(){return this.internalMonitor.didDrop()}},{key:"getInitialClientOffset",value:function(){return this.internalMonitor.getInitialClientOffset()}},{key:"getInitialSourceClientOffset",value:function(){return this.internalMonitor.getInitialSourceClientOffset()}},{key:"getSourceClientOffset",value:function(){return this.internalMonitor.getSourceClientOffset()}},{key:"getClientOffset",value:function(){return this.internalMonitor.getClientOffset()}},{key:"getDifferenceFromInitialOffset",value:function(){return this.internalMonitor.getDifferenceFromInitialOffset()}}]),e}();u();u();var _O=Q(De());function Hxr(e){if(typeof e.type!="string"){var t=e.type.displayName||e.type.name||"the component";throw new Error("Only native element nodes can now be passed to React DnD connectors."+"You can either wrap ".concat(t," into a <div>, or turn it into a ")+"drag source or a drop target itself.")}}function Wxr(e){return function(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:null,r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:null;if(!(0,_O.isValidElement)(t)){var n=t;return e(n,r),n}var o=t;Hxr(o);var i=r?function(a){return e(a,r)}:e;return $xr(o,i)}}function V6(e){var t={};return Object.keys(e).forEach(function(r){var n=e[r];if(r.endsWith("Ref"))t[r]=e[r];else{var o=Wxr(n);t[r]=function(){return o}}}),t}function yBe(e,t){typeof e=="function"?e(t):e.current=t}function $xr(e,t){var r=e.ref;return tn(typeof r!="string","Cannot connect React DnD to an element with an existing string ref. Please convert it to use a callback ref instead, or wrap it into a <span> or <div>. Read more: https://reactjs.org/docs/refs-and-the-dom.html#callback-refs"),r?(0,_O.cloneElement)(e,{ref:function(o){yBe(r,o),yBe(t,o)}}):(0,_O.cloneElement)(e,{ref:t})}u();function G6(e){"@babel/helpers - typeof";return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?G6=function(r){return typeof r}:G6=function(r){return r&&typeof Symbol=="function"&&r.constructor===Symbol&&r!==Symbol.prototype?"symbol":typeof r},G6(e)}function bO(e){return e!==null&&G6(e)==="object"&&Object.prototype.hasOwnProperty.call(e,"current")}u();function xO(e,t,r,n){var o=r?r.call(n,e,t):void 0;if(o!==void 0)return!!o;if(e===t)return!0;if(typeof e!="object"||!e||typeof t!="object"||!t)return!1;var i=Object.keys(e),a=Object.keys(t);if(i.length!==a.length)return!1;for(var c=Object.prototype.hasOwnProperty.bind(t),h=0;h<i.length;h++){var m=i[h];if(!c(m))return!1;var y=e[m],w=t[m];if(o=r?r.call(n,y,w,m):void 0,o===!1||o===void 0&&y!==w)return!1}return!0}function Yxr(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _Be(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function Zxr(e,t,r){return t&&_Be(e.prototype,t),r&&_Be(e,r),e}function lu(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var bBe=function(){function e(t){var r=this;Yxr(this,e),lu(this,"hooks",V6({dragSource:function(o,i){r.clearDragSource(),r.dragSourceOptions=i||null,bO(o)?r.dragSourceRef=o:r.dragSourceNode=o,r.reconnectDragSource()},dragPreview:function(o,i){r.clearDragPreview(),r.dragPreviewOptions=i||null,bO(o)?r.dragPreviewRef=o:r.dragPreviewNode=o,r.reconnectDragPreview()}})),lu(this,"handlerId",null),lu(this,"dragSourceRef",null),lu(this,"dragSourceNode",void 0),lu(this,"dragSourceOptionsInternal",null),lu(this,"dragSourceUnsubscribe",void 0),lu(this,"dragPreviewRef",null),lu(this,"dragPreviewNode",void 0),lu(this,"dragPreviewOptionsInternal",null),lu(this,"dragPreviewUnsubscribe",void 0),lu(this,"lastConnectedHandlerId",null),lu(this,"lastConnectedDragSource",null),lu(this,"lastConnectedDragSourceOptions",null),lu(this,"lastConnectedDragPreview",null),lu(this,"lastConnectedDragPreviewOptions",null),lu(this,"backend",void 0),this.backend=t}return Zxr(e,[{key:"receiveHandlerId",value:function(r){this.handlerId!==r&&(this.handlerId=r,this.reconnect())}},{key:"connectTarget",get:function(){return this.dragSource}},{key:"dragSourceOptions",get:function(){return this.dragSourceOptionsInternal},set:function(r){this.dragSourceOptionsInternal=r}},{key:"dragPreviewOptions",get:function(){return this.dragPreviewOptionsInternal},set:function(r){this.dragPreviewOptionsInternal=r}},{key:"reconnect",value:function(){this.reconnectDragSource(),this.reconnectDragPreview()}},{key:"reconnectDragSource",value:function(){var r=this.dragSource,n=this.didHandlerIdChange()||this.didConnectedDragSourceChange()||this.didDragSourceOptionsChange();if(n&&this.disconnectDragSource(),!!this.handlerId){if(!r){this.lastConnectedDragSource=r;return}n&&(this.lastConnectedHandlerId=this.handlerId,this.lastConnectedDragSource=r,this.lastConnectedDragSourceOptions=this.dragSourceOptions,this.dragSourceUnsubscribe=this.backend.connectDragSource(this.handlerId,r,this.dragSourceOptions))}}},{key:"reconnectDragPreview",value:function(){var r=this.dragPreview,n=this.didHandlerIdChange()||this.didConnectedDragPreviewChange()||this.didDragPreviewOptionsChange();if(n&&this.disconnectDragPreview(),!!this.handlerId){if(!r){this.lastConnectedDragPreview=r;return}n&&(this.lastConnectedHandlerId=this.handlerId,this.lastConnectedDragPreview=r,this.lastConnectedDragPreviewOptions=this.dragPreviewOptions,this.dragPreviewUnsubscribe=this.backend.connectDragPreview(this.handlerId,r,this.dragPreviewOptions))}}},{key:"didHandlerIdChange",value:function(){return this.lastConnectedHandlerId!==this.handlerId}},{key:"didConnectedDragSourceChange",value:function(){return this.lastConnectedDragSource!==this.dragSource}},{key:"didConnectedDragPreviewChange",value:function(){return this.lastConnectedDragPreview!==this.dragPreview}},{key:"didDragSourceOptionsChange",value:function(){return!xO(this.lastConnectedDragSourceOptions,this.dragSourceOptions)}},{key:"didDragPreviewOptionsChange",value:function(){return!xO(this.lastConnectedDragPreviewOptions,this.dragPreviewOptions)}},{key:"disconnectDragSource",value:function(){this.dragSourceUnsubscribe&&(this.dragSourceUnsubscribe(),this.dragSourceUnsubscribe=void 0)}},{key:"disconnectDragPreview",value:function(){this.dragPreviewUnsubscribe&&(this.dragPreviewUnsubscribe(),this.dragPreviewUnsubscribe=void 0,this.dragPreviewNode=null,this.dragPreviewRef=null)}},{key:"dragSource",get:function(){return this.dragSourceNode||this.dragSourceRef&&this.dragSourceRef.current}},{key:"dragPreview",get:function(){return this.dragPreviewNode||this.dragPreviewRef&&this.dragPreviewRef.current}},{key:"clearDragSource",value:function(){this.dragSourceNode=null,this.dragSourceRef=null}},{key:"clearDragPreview",value:function(){this.dragPreviewNode=null,this.dragPreviewRef=null}}]),e}();u();function Kxr(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function xBe(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function Xxr(e,t,r){return t&&xBe(e.prototype,t),r&&xBe(e,r),e}function Wh(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var wBe=function(){function e(t){var r=this;Kxr(this,e),Wh(this,"hooks",V6({dropTarget:function(o,i){r.clearDropTarget(),r.dropTargetOptions=i,bO(o)?r.dropTargetRef=o:r.dropTargetNode=o,r.reconnect()}})),Wh(this,"handlerId",null),Wh(this,"dropTargetRef",null),Wh(this,"dropTargetNode",void 0),Wh(this,"dropTargetOptionsInternal",null),Wh(this,"unsubscribeDropTarget",void 0),Wh(this,"lastConnectedHandlerId",null),Wh(this,"lastConnectedDropTarget",null),Wh(this,"lastConnectedDropTargetOptions",null),Wh(this,"backend",void 0),this.backend=t}return Xxr(e,[{key:"connectTarget",get:function(){return this.dropTarget}},{key:"reconnect",value:function(){var r=this.didHandlerIdChange()||this.didDropTargetChange()||this.didOptionsChange();r&&this.disconnectDropTarget();var n=this.dropTarget;if(this.handlerId){if(!n){this.lastConnectedDropTarget=n;return}r&&(this.lastConnectedHandlerId=this.handlerId,this.lastConnectedDropTarget=n,this.lastConnectedDropTargetOptions=this.dropTargetOptions,this.unsubscribeDropTarget=this.backend.connectDropTarget(this.handlerId,n,this.dropTargetOptions))}}},{key:"receiveHandlerId",value:function(r){r!==this.handlerId&&(this.handlerId=r,this.reconnect())}},{key:"dropTargetOptions",get:function(){return this.dropTargetOptionsInternal},set:function(r){this.dropTargetOptionsInternal=r}},{key:"didHandlerIdChange",value:function(){return this.lastConnectedHandlerId!==this.handlerId}},{key:"didDropTargetChange",value:function(){return this.lastConnectedDropTarget!==this.dropTarget}},{key:"didOptionsChange",value:function(){return!xO(this.lastConnectedDropTargetOptions,this.dropTargetOptions)}},{key:"disconnectDropTarget",value:function(){this.unsubscribeDropTarget&&(this.unsubscribeDropTarget(),this.unsubscribeDropTarget=void 0)}},{key:"dropTarget",get:function(){return this.dropTargetNode||this.dropTargetRef&&this.dropTargetRef.current}},{key:"clearDropTarget",value:function(){this.dropTargetRef=null,this.dropTargetNode=null}}]),e}();u();function EBe(e,t,r){var n=r.getRegistry(),o=n.addTarget(e,t);return[o,function(){return n.removeTarget(o)}]}function SBe(e,t,r){var n=r.getRegistry(),o=n.addSource(e,t);return[o,function(){return n.removeSource(o)}]}u();u();u();var H6=Q(De()),yp=typeof window!="undefined"?H6.useLayoutEffect:H6.useEffect;u();var $6=Q(De());u();function W6(e){"@babel/helpers - typeof";return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?W6=function(r){return typeof r}:W6=function(r){return r&&typeof Symbol=="function"&&r.constructor===Symbol&&r!==Symbol.prototype?"symbol":typeof r},W6(e)}function Jxr(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function TBe(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function Qxr(e,t,r){return t&&TBe(e.prototype,t),r&&TBe(e,r),e}function fne(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var IBe=function(){function e(t,r,n){Jxr(this,e),fne(this,"spec",void 0),fne(this,"monitor",void 0),fne(this,"connector",void 0),this.spec=t,this.monitor=r,this.connector=n}return Qxr(e,[{key:"beginDrag",value:function(){var r,n=this.spec,o=this.monitor,i=null;return W6(n.item)==="object"?i=n.item:typeof n.item=="function"?i=n.item(o):i={},(r=i)!==null&&r!==void 0?r:null}},{key:"canDrag",value:function(){var r=this.spec,n=this.monitor;return typeof r.canDrag=="boolean"?r.canDrag:typeof r.canDrag=="function"?r.canDrag(n):!0}},{key:"isDragging",value:function(r,n){var o=this.spec,i=this.monitor,a=o.isDragging;return a?a(i):n===r.getSourceId()}},{key:"endDrag",value:function(){var r=this.spec,n=this.monitor,o=this.connector,i=r.end;i&&i(n.getItem(),n),o.reconnect()}}]),e}();function MBe(e,t,r){var n=(0,$6.useMemo)(function(){return new IBe(e,t,r)},[t,r]);return(0,$6.useEffect)(function(){n.spec=e},[e]),n}u();var CBe=Q(De());function hf(){var e=(0,CBe.useContext)(P6),t=e.dragDropManager;return tn(t!=null,"Expected drag drop context"),t}u();var ABe=Q(De());function OBe(e){return(0,ABe.useMemo)(function(){var t=e.type;return tn(t!=null,"spec.type must be defined"),t},[e])}function ewr(e,t){return owr(e)||nwr(e,t)||rwr(e,t)||twr()}function twr(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function rwr(e,t){if(e){if(typeof e=="string")return PBe(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if(r==="Object"&&e.constructor&&(r=e.constructor.name),r==="Map"||r==="Set")return Array.from(e);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return PBe(e,t)}}function PBe(e,t){(t==null||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function nwr(e,t){var r=e==null?null:typeof Symbol!="undefined"&&e[Symbol.iterator]||e["@@iterator"];if(r!=null){var n=[],o=!0,i=!1,a,c;try{for(r=r.call(e);!(o=(a=r.next()).done)&&(n.push(a.value),!(t&&n.length===t));o=!0);}catch(h){i=!0,c=h}finally{try{!o&&r.return!=null&&r.return()}finally{if(i)throw c}}return n}}function owr(e){if(Array.isArray(e))return e}function DBe(e,t,r){var n=hf(),o=MBe(e,t,r),i=OBe(e);yp(function(){if(i!=null){var c=SBe(i,o,n),h=ewr(c,2),m=h[0],y=h[1];return t.receiveHandlerId(m),r.receiveHandlerId(m),y}},[n,t,r,o,i])}u();var NBe=Q(De());function iwr(e){return uwr(e)||lwr(e)||swr(e)||awr()}function awr(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function swr(e,t){if(e){if(typeof e=="string")return dne(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if(r==="Object"&&e.constructor&&(r=e.constructor.name),r==="Map"||r==="Set")return Array.from(e);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return dne(e,t)}}function lwr(e){if(typeof Symbol!="undefined"&&e[Symbol.iterator]!=null||e["@@iterator"]!=null)return Array.from(e)}function uwr(e){if(Array.isArray(e))return dne(e)}function dne(e,t){(t==null||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function Y6(e,t){var r=iwr(t||[]);return t==null&&typeof e!="function"&&r.push(e),(0,NBe.useMemo)(function(){return typeof e=="function"?e():e},r)}u();var LBe=Q(De());function kBe(){var e=hf();return(0,LBe.useMemo)(function(){return new hBe(e)},[e])}u();var RBe=Q(De());function jBe(e,t){var r=hf(),n=(0,RBe.useMemo)(function(){return new bBe(r.getBackend())},[r]);return yp(function(){return n.dragSourceOptions=e||null,n.reconnect(),function(){return n.disconnectDragSource()}},[n,e]),yp(function(){return n.dragPreviewOptions=t||null,n.reconnect(),function(){return n.disconnectDragPreview()}},[n,t]),n}u();u();u();var FBe=Q(wO()),Z6=Q(De());function cwr(e,t){return hwr(e)||dwr(e,t)||fwr(e,t)||pwr()}function pwr(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function fwr(e,t){if(e){if(typeof e=="string")return zBe(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if(r==="Object"&&e.constructor&&(r=e.constructor.name),r==="Map"||r==="Set")return Array.from(e);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return zBe(e,t)}}function zBe(e,t){(t==null||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function dwr(e,t){var r=e==null?null:typeof Symbol!="undefined"&&e[Symbol.iterator]||e["@@iterator"];if(r!=null){var n=[],o=!0,i=!1,a,c;try{for(r=r.call(e);!(o=(a=r.next()).done)&&(n.push(a.value),!(t&&n.length===t));o=!0);}catch(h){i=!0,c=h}finally{try{!o&&r.return!=null&&r.return()}finally{if(i)throw c}}return n}}function hwr(e){if(Array.isArray(e))return e}function UBe(e,t,r){var n=(0,Z6.useState)(function(){return t(e)}),o=cwr(n,2),i=o[0],a=o[1],c=(0,Z6.useCallback)(function(){var h=t(e);(0,FBe.default)(i,h)||(a(h),r&&r())},[i,e,r]);return yp(c),[i,c]}function mwr(e,t){return _wr(e)||ywr(e,t)||vwr(e,t)||gwr()}function gwr(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function vwr(e,t){if(e){if(typeof e=="string")return BBe(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if(r==="Object"&&e.constructor&&(r=e.constructor.name),r==="Map"||r==="Set")return Array.from(e);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return BBe(e,t)}}function BBe(e,t){(t==null||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function ywr(e,t){var r=e==null?null:typeof Symbol!="undefined"&&e[Symbol.iterator]||e["@@iterator"];if(r!=null){var n=[],o=!0,i=!1,a,c;try{for(r=r.call(e);!(o=(a=r.next()).done)&&(n.push(a.value),!(t&&n.length===t));o=!0);}catch(h){i=!0,c=h}finally{try{!o&&r.return!=null&&r.return()}finally{if(i)throw c}}return n}}function _wr(e){if(Array.isArray(e))return e}function VBe(e,t,r){var n=UBe(e,t,r),o=mwr(n,2),i=o[0],a=o[1];return yp(function(){var h=e.getHandlerId();if(h!=null)return e.subscribeToStateChange(a,{handlerIds:[h]})},[e,a]),i}function K6(e,t,r){return VBe(t,e||function(){return{}},function(){return r.reconnect()})}u();var hne=Q(De());function GBe(e){return(0,hne.useMemo)(function(){return e.hooks.dragSource()},[e])}function HBe(e){return(0,hne.useMemo)(function(){return e.hooks.dragPreview()},[e])}function WBe(e,t){var r=Y6(e,t);tn(!r.begin,"useDrag::spec.begin was deprecated in v14. Replace spec.begin() with spec.item(). (see more here - https://react-dnd.github.io/react-dnd/docs/api/use-drag)");var n=kBe(),o=jBe(r.options,r.previewOptions);return DBe(r,n,o),[K6(r.collect,n,o),GBe(o),HBe(o)]}u();u();u();var $Be=Q(De());function YBe(e){var t=e.accept;return(0,$Be.useMemo)(function(){return tn(e.accept!=null,"accept must be defined"),Array.isArray(t)?t:[t]},[t])}u();var X6=Q(De());u();function bwr(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function ZBe(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function xwr(e,t,r){return t&&ZBe(e.prototype,t),r&&ZBe(e,r),e}function KBe(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var XBe=function(){function e(t,r){bwr(this,e),KBe(this,"spec",void 0),KBe(this,"monitor",void 0),this.spec=t,this.monitor=r}return xwr(e,[{key:"canDrop",value:function(){var r=this.spec,n=this.monitor;return r.canDrop?r.canDrop(n.getItem(),n):!0}},{key:"hover",value:function(){var r=this.spec,n=this.monitor;r.hover&&r.hover(n.getItem(),n)}},{key:"drop",value:function(){var r=this.spec,n=this.monitor;if(r.drop)return r.drop(n.getItem(),n)}}]),e}();function JBe(e,t){var r=(0,X6.useMemo)(function(){return new XBe(e,t)},[t]);return(0,X6.useEffect)(function(){r.spec=e},[e]),r}function wwr(e,t){return Iwr(e)||Twr(e,t)||Swr(e,t)||Ewr()}function Ewr(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Swr(e,t){if(e){if(typeof e=="string")return QBe(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if(r==="Object"&&e.constructor&&(r=e.constructor.name),r==="Map"||r==="Set")return Array.from(e);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return QBe(e,t)}}function QBe(e,t){(t==null||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function Twr(e,t){var r=e==null?null:typeof Symbol!="undefined"&&e[Symbol.iterator]||e["@@iterator"];if(r!=null){var n=[],o=!0,i=!1,a,c;try{for(r=r.call(e);!(o=(a=r.next()).done)&&(n.push(a.value),!(t&&n.length===t));o=!0);}catch(h){i=!0,c=h}finally{try{!o&&r.return!=null&&r.return()}finally{if(i)throw c}}return n}}function Iwr(e){if(Array.isArray(e))return e}function eVe(e,t,r){var n=hf(),o=JBe(e,t),i=YBe(e);yp(function(){var c=EBe(i,o,n),h=wwr(c,2),m=h[0],y=h[1];return t.receiveHandlerId(m),r.receiveHandlerId(m),y},[n,t,o,r,i.map(function(a){return a.toString()}).join("|")])}u();var tVe=Q(De());function rVe(){var e=hf();return(0,tVe.useMemo)(function(){return new vBe(e)},[e])}u();var nVe=Q(De());function oVe(e){var t=hf(),r=(0,nVe.useMemo)(function(){return new wBe(t.getBackend())},[t]);return yp(function(){return r.dropTargetOptions=e||null,r.reconnect(),function(){return r.disconnectDropTarget()}},[e]),r}u();var iVe=Q(De());function aVe(e){return(0,iVe.useMemo)(function(){return e.hooks.dropTarget()},[e])}function J6(e,t){var r=Y6(e,t),n=rVe(),o=oVe(r.options);return eVe(r,n,o),[K6(r.collect,n,o),aVe(o)]}function mne(){return mne=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},mne.apply(this,arguments)}var Mwr=(0,n0.createContext)(null),gne=e=>{let i=e,{portal:t}=i,r=En(i,["portal"]),[n,o]=(0,n0.useState)(null);return n0.default.createElement(Mwr.Provider,{value:t!=null?t:n},n0.default.createElement(cBe,mne({backend:ene},r)),t?null:n0.default.createElement("div",{ref:o}))};u();u();var xp=Q(De(),1);var az=Q(It(),1);u();var Rs=en({key:"notificationState",default:null});u();var qd=Q(De(),1);u();u();u();u();u();u();u();u();var mf=[];var sVe=function(){return mf.some(function(e){return e.activeTargets.length>0})};u();var lVe=function(){return mf.some(function(e){return e.skippedTargets.length>0})};u();var uVe="ResizeObserver loop completed with undelivered notifications.",cVe=function(){var e;typeof ErrorEvent=="function"?e=new ErrorEvent("error",{message:uVe}):(e=document.createEvent("Event"),e.initEvent("error",!1,!1),e.message=uVe),window.dispatchEvent(e)};u();u();u();u();var H_;(function(e){e.BORDER_BOX="border-box",e.CONTENT_BOX="content-box",e.DEVICE_PIXEL_CONTENT_BOX="device-pixel-content-box"})(H_||(H_={}));u();u();var Cd=function(e){return Object.freeze(e)};var vne=function(){function e(t,r){this.inlineSize=t,this.blockSize=r,Cd(this)}return e}();u();var yne=function(){function e(t,r,n,o){return this.x=t,this.y=r,this.width=n,this.height=o,this.top=this.y,this.left=this.x,this.bottom=this.top+this.height,this.right=this.left+this.width,Cd(this)}return e.prototype.toJSON=function(){var t=this,r=t.x,n=t.y,o=t.top,i=t.right,a=t.bottom,c=t.left,h=t.width,m=t.height;return{x:r,y:n,top:o,right:i,bottom:a,left:c,width:h,height:m}},e.fromRect=function(t){return new e(t.x,t.y,t.width,t.height)},e}();u();var EO=function(e){return e instanceof SVGElement&&"getBBox"in e},Q6=function(e){if(EO(e)){var t=e.getBBox(),r=t.width,n=t.height;return!r&&!n}var o=e,i=o.offsetWidth,a=o.offsetHeight;return!(i||a||e.getClientRects().length)},_ne=function(e){var t;if(e instanceof Element)return!0;var r=(t=e==null?void 0:e.ownerDocument)===null||t===void 0?void 0:t.defaultView;return!!(r&&e instanceof r.Element)},pVe=function(e){switch(e.tagName){case"INPUT":if(e.type!=="image")break;case"VIDEO":case"AUDIO":case"EMBED":case"OBJECT":case"CANVAS":case"IFRAME":case"IMG":return!0}return!1};u();var W_=typeof window!="undefined"?window:{};var ej=new WeakMap,fVe=/auto|scroll/,Cwr=/^tb|vertical/,Awr=/msie|trident/i.test(W_.navigator&&W_.navigator.userAgent),$h=function(e){return parseFloat(e||"0")},dS=function(e,t,r){return e===void 0&&(e=0),t===void 0&&(t=0),r===void 0&&(r=!1),new vne((r?t:e)||0,(r?e:t)||0)},dVe=Cd({devicePixelContentBoxSize:dS(),borderBoxSize:dS(),contentBoxSize:dS(),contentRect:new yne(0,0,0,0)}),bne=function(e,t){if(t===void 0&&(t=!1),ej.has(e)&&!t)return ej.get(e);if(Q6(e))return ej.set(e,dVe),dVe;var r=getComputedStyle(e),n=EO(e)&&e.ownerSVGElement&&e.getBBox(),o=!Awr&&r.boxSizing==="border-box",i=Cwr.test(r.writingMode||""),a=!n&&fVe.test(r.overflowY||""),c=!n&&fVe.test(r.overflowX||""),h=n?0:$h(r.paddingTop),m=n?0:$h(r.paddingRight),y=n?0:$h(r.paddingBottom),w=n?0:$h(r.paddingLeft),E=n?0:$h(r.borderTopWidth),A=n?0:$h(r.borderRightWidth),P=n?0:$h(r.borderBottomWidth),j=n?0:$h(r.borderLeftWidth),D=w+m,k=h+y,z=j+A,V=E+P,G=c?e.offsetHeight-V-e.clientHeight:0,K=a?e.offsetWidth-z-e.clientWidth:0,Z=o?D+z:0,te=o?k+V:0,se=n?n.width:$h(r.width)-Z-K,le=n?n.height:$h(r.height)-te-G,pe=se+D+K+z,me=le+k+G+V,_e=Cd({devicePixelContentBoxSize:dS(Math.round(se*devicePixelRatio),Math.round(le*devicePixelRatio),i),borderBoxSize:dS(pe,me,i),contentBoxSize:dS(se,le,i),contentRect:new yne(w,h,se,le)});return ej.set(e,_e),_e},tj=function(e,t,r){var n=bne(e,r),o=n.borderBoxSize,i=n.contentBoxSize,a=n.devicePixelContentBoxSize;switch(t){case H_.DEVICE_PIXEL_CONTENT_BOX:return a;case H_.BORDER_BOX:return o;default:return i}};var xne=function(){function e(t){var r=bne(t);this.target=t,this.contentRect=r.contentRect,this.borderBoxSize=Cd([r.borderBoxSize]),this.contentBoxSize=Cd([r.contentBoxSize]),this.devicePixelContentBoxSize=Cd([r.devicePixelContentBoxSize])}return e}();u();var rj=function(e){if(Q6(e))return 1/0;for(var t=0,r=e.parentNode;r;)t+=1,r=r.parentNode;return t};var hVe=function(){var e=1/0,t=[];mf.forEach(function(a){if(a.activeTargets.length!==0){var c=[];a.activeTargets.forEach(function(m){var y=new xne(m.target),w=rj(m.target);c.push(y),m.lastReportedSize=tj(m.target,m.observedBox),w<e&&(e=w)}),t.push(function(){a.callback.call(a.observer,c,a.observer)}),a.activeTargets.splice(0,a.activeTargets.length)}});for(var r=0,n=t;r<n.length;r++){var o=n[r];o()}return e};u();var wne=function(e){mf.forEach(function(r){r.activeTargets.splice(0,r.activeTargets.length),r.skippedTargets.splice(0,r.skippedTargets.length),r.observationTargets.forEach(function(o){o.isActive()&&(rj(o.target)>e?r.activeTargets.push(o):r.skippedTargets.push(o))})})};var mVe=function(){var e=0;for(wne(e);sVe();)e=hVe(),wne(e);return lVe()&&cVe(),e>0};u();u();var Ene,gVe=[],Owr=function(){return gVe.splice(0).forEach(function(e){return e()})},vVe=function(e){if(!Ene){var t=0,r=document.createTextNode(""),n={characterData:!0};new MutationObserver(function(){return Owr()}).observe(r,n),Ene=function(){r.textContent="".concat(t?t--:t++)}}gVe.push(e),Ene()};var yVe=function(e){vVe(function(){requestAnimationFrame(e)})};var nj=0,Pwr=function(){return!!nj},Dwr=250,Nwr={attributes:!0,characterData:!0,childList:!0,subtree:!0},_Ve=["resize","load","transitionend","animationend","animationstart","animationiteration","keyup","keydown","mouseup","mousedown","mouseover","mouseout","blur","focus"],bVe=function(e){return e===void 0&&(e=0),Date.now()+e},Sne=!1,Lwr=function(){function e(){var t=this;this.stopped=!0,this.listener=function(){return t.schedule()}}return e.prototype.run=function(t){var r=this;if(t===void 0&&(t=Dwr),!Sne){Sne=!0;var n=bVe(t);yVe(function(){var o=!1;try{o=mVe()}finally{if(Sne=!1,t=n-bVe(),!Pwr())return;o?r.run(1e3):t>0?r.run(t):r.start()}})}},e.prototype.schedule=function(){this.stop(),this.run()},e.prototype.observe=function(){var t=this,r=function(){return t.observer&&t.observer.observe(document.body,Nwr)};document.body?r():W_.addEventListener("DOMContentLoaded",r)},e.prototype.start=function(){var t=this;this.stopped&&(this.stopped=!1,this.observer=new MutationObserver(this.listener),this.observe(),_Ve.forEach(function(r){return W_.addEventListener(r,t.listener,!0)}))},e.prototype.stop=function(){var t=this;this.stopped||(this.observer&&this.observer.disconnect(),_Ve.forEach(function(r){return W_.removeEventListener(r,t.listener,!0)}),this.stopped=!0)},e}(),oj=new Lwr,Tne=function(e){!nj&&e>0&&oj.start(),nj+=e,!nj&&oj.stop()};u();var kwr=function(e){return!EO(e)&&!pVe(e)&&getComputedStyle(e).display==="inline"},xVe=function(){function e(t,r){this.target=t,this.observedBox=r||H_.CONTENT_BOX,this.lastReportedSize={inlineSize:0,blockSize:0}}return e.prototype.isActive=function(){var t=tj(this.target,this.observedBox,!0);return kwr(this.target)&&(this.lastReportedSize=t),this.lastReportedSize.inlineSize!==t.inlineSize||this.lastReportedSize.blockSize!==t.blockSize},e}();u();var wVe=function(){function e(t,r){this.activeTargets=[],this.skippedTargets=[],this.observationTargets=[],this.observer=t,this.callback=r}return e}();var ij=new WeakMap,EVe=function(e,t){for(var r=0;r<e.length;r+=1)if(e[r].target===t)return r;return-1},SO=function(){function e(){}return e.connect=function(t,r){var n=new wVe(t,r);ij.set(t,n)},e.observe=function(t,r,n){var o=ij.get(t),i=o.observationTargets.length===0;EVe(o.observationTargets,r)<0&&(i&&mf.push(o),o.observationTargets.push(new xVe(r,n&&n.box)),Tne(1),oj.schedule())},e.unobserve=function(t,r){var n=ij.get(t),o=EVe(n.observationTargets,r),i=n.observationTargets.length===1;o>=0&&(i&&mf.splice(mf.indexOf(n),1),n.observationTargets.splice(o,1),Tne(-1))},e.disconnect=function(t){var r=this,n=ij.get(t);n.observationTargets.slice().forEach(function(o){return r.unobserve(t,o.target)}),n.activeTargets.splice(0,n.activeTargets.length)},e}();var Ine=function(){function e(t){if(arguments.length===0)throw new TypeError("Failed to construct 'ResizeObserver': 1 argument required, but only 0 present.");if(typeof t!="function")throw new TypeError("Failed to construct 'ResizeObserver': The callback provided as parameter 1 is not a function.");SO.connect(this,t)}return e.prototype.observe=function(t,r){if(arguments.length===0)throw new TypeError("Failed to execute 'observe' on 'ResizeObserver': 1 argument required, but only 0 present.");if(!_ne(t))throw new TypeError("Failed to execute 'observe' on 'ResizeObserver': parameter 1 is not of type 'Element");SO.observe(this,t,r)},e.prototype.unobserve=function(t){if(arguments.length===0)throw new TypeError("Failed to execute 'unobserve' on 'ResizeObserver': 1 argument required, but only 0 present.");if(!_ne(t))throw new TypeError("Failed to execute 'unobserve' on 'ResizeObserver': parameter 1 is not of type 'Element");SO.unobserve(this,t)},e.prototype.disconnect=function(){SO.disconnect(this)},e.toString=function(){return"function ResizeObserver () { [polyfill code] }"},e}();u();var SVe=Q(De()),Rwr=SVe.default[typeof document!="undefined"&&document.createElement!==void 0?"useLayoutEffect":"useEffect"],TVe=Rwr;var jwr=typeof window!="undefined"&&"ResizeObserver"in window?window.ResizeObserver:Ine;function qwr(){}function zwr(e,t){let r=Uwr(),n=v6(t);return TVe(()=>{let o=!1,i=e&&"current"in e?e.current:e;if(!i)return qwr;function a(c,h){o||n.current(c,h)}return r.subscribe(i,a),()=>{o=!0,r.unsubscribe(i,a)}},[e,r,n]),r.observer}function Fwr(){let e=!1,t=[],r=new Map,n=new jwr((o,i)=>{t=t.concat(o);function a(){let c=new Set;for(let h=0;h<t.length;h++){if(c.has(t[h].target))continue;c.add(t[h].target);let m=r.get(t[h].target);m==null||m.forEach(y=>y(t[h],i))}t=[],e=!1}e||window.requestAnimationFrame(a),e=!0});return{observer:n,subscribe(o,i){var a;n.observe(o);let c=(a=r.get(o))!==null&&a!==void 0?a:[];c.push(i),r.set(o,c)},unsubscribe(o,i){var a;let c=(a=r.get(o))!==null&&a!==void 0?a:[];if(c.length===1){n.unobserve(o),r.delete(o);return}let h=c.indexOf(i);h!==-1&&c.splice(h,1),r.set(o,c)}}}var Mne,Uwr=()=>Mne||(Mne=Fwr()),IVe=zwr;u();u();u();u();u();u();u();function TO(e,t){return function(){return e.apply(t,arguments)}}var{toString:Bwr}=Object.prototype,{getPrototypeOf:Ane}=Object,{iterator:sj,toStringTag:CVe}=Symbol,lj=(e=>t=>{let r=Bwr.call(t);return e[r]||(e[r]=r.slice(8,-1).toLowerCase())})(Object.create(null)),Ad=e=>(e=e.toLowerCase(),t=>lj(t)===e),uj=e=>t=>typeof t===e,{isArray:mS}=Array,hS=uj("undefined");function IO(e){return e!==null&&!hS(e)&&e.constructor!==null&&!hS(e.constructor)&&Ec(e.constructor.isBuffer)&&e.constructor.isBuffer(e)}var AVe=Ad("ArrayBuffer");function Vwr(e){let t;return typeof ArrayBuffer!="undefined"&&ArrayBuffer.isView?t=ArrayBuffer.isView(e):t=e&&e.buffer&&AVe(e.buffer),t}var Gwr=uj("string"),Ec=uj("function"),OVe=uj("number"),MO=e=>e!==null&&typeof e=="object",Hwr=e=>e===!0||e===!1,aj=e=>{if(lj(e)!=="object")return!1;let t=Ane(e);return(t===null||t===Object.prototype||Object.getPrototypeOf(t)===null)&&!(CVe in e)&&!(sj in e)},Wwr=e=>{if(!MO(e)||IO(e))return!1;try{return Object.keys(e).length===0&&Object.getPrototypeOf(e)===Object.prototype}catch(t){return!1}},$wr=Ad("Date"),Ywr=Ad("File"),Zwr=Ad("Blob"),Kwr=Ad("FileList"),Xwr=e=>MO(e)&&Ec(e.pipe),Jwr=e=>{let t;return e&&(typeof FormData=="function"&&e instanceof FormData||Ec(e.append)&&((t=lj(e))==="formdata"||t==="object"&&Ec(e.toString)&&e.toString()==="[object FormData]"))},Qwr=Ad("URLSearchParams"),[eEr,tEr,rEr,nEr]=["ReadableStream","Request","Response","Headers"].map(Ad),oEr=e=>e.trim?e.trim():e.replace(/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,"");function CO(e,t,{allOwnKeys:r=!1}={}){if(e===null||typeof e=="undefined")return;let n,o;if(typeof e!="object"&&(e=[e]),mS(e))for(n=0,o=e.length;n<o;n++)t.call(null,e[n],n,e);else{if(IO(e))return;let i=r?Object.getOwnPropertyNames(e):Object.keys(e),a=i.length,c;for(n=0;n<a;n++)c=i[n],t.call(null,e[c],c,e)}}function PVe(e,t){if(IO(e))return null;t=t.toLowerCase();let r=Object.keys(e),n=r.length,o;for(;n-->0;)if(o=r[n],t===o.toLowerCase())return o;return null}var $_=typeof globalThis!="undefined"?globalThis:typeof self!="undefined"?self:typeof window!="undefined"?window:global,DVe=e=>!hS(e)&&e!==$_;function Cne(){let{caseless:e,skipUndefined:t}=DVe(this)&&this||{},r={},n=(o,i)=>{let a=e&&PVe(r,i)||i;aj(r[a])&&aj(o)?r[a]=Cne(r[a],o):aj(o)?r[a]=Cne({},o):mS(o)?r[a]=o.slice():(!t||!hS(o))&&(r[a]=o)};for(let o=0,i=arguments.length;o<i;o++)arguments[o]&&CO(arguments[o],n);return r}var iEr=(e,t,r,{allOwnKeys:n}={})=>(CO(t,(o,i)=>{r&&Ec(o)?e[i]=TO(o,r):e[i]=o},{allOwnKeys:n}),e),aEr=e=>(e.charCodeAt(0)===65279&&(e=e.slice(1)),e),sEr=(e,t,r,n)=>{e.prototype=Object.create(t.prototype,n),e.prototype.constructor=e,Object.defineProperty(e,"super",{value:t.prototype}),r&&Object.assign(e.prototype,r)},lEr=(e,t,r,n)=>{let o,i,a,c={};if(t=t||{},e==null)return t;do{for(o=Object.getOwnPropertyNames(e),i=o.length;i-->0;)a=o[i],(!n||n(a,e,t))&&!c[a]&&(t[a]=e[a],c[a]=!0);e=r!==!1&&Ane(e)}while(e&&(!r||r(e,t))&&e!==Object.prototype);return t},uEr=(e,t,r)=>{e=String(e),(r===void 0||r>e.length)&&(r=e.length),r-=t.length;let n=e.indexOf(t,r);return n!==-1&&n===r},cEr=e=>{if(!e)return null;if(mS(e))return e;let t=e.length;if(!OVe(t))return null;let r=new Array(t);for(;t-->0;)r[t]=e[t];return r},pEr=(e=>t=>e&&t instanceof e)(typeof Uint8Array!="undefined"&&Ane(Uint8Array)),fEr=(e,t)=>{let n=(e&&e[sj]).call(e),o;for(;(o=n.next())&&!o.done;){let i=o.value;t.call(e,i[0],i[1])}},dEr=(e,t)=>{let r,n=[];for(;(r=e.exec(t))!==null;)n.push(r);return n},hEr=Ad("HTMLFormElement"),mEr=e=>e.toLowerCase().replace(/[-_\s]([a-z\d])(\w*)/g,function(r,n,o){return n.toUpperCase()+o}),MVe=(({hasOwnProperty:e})=>(t,r)=>e.call(t,r))(Object.prototype),gEr=Ad("RegExp"),NVe=(e,t)=>{let r=Object.getOwnPropertyDescriptors(e),n={};CO(r,(o,i)=>{let a;(a=t(o,i,e))!==!1&&(n[i]=a||o)}),Object.defineProperties(e,n)},vEr=e=>{NVe(e,(t,r)=>{if(Ec(e)&&["arguments","caller","callee"].indexOf(r)!==-1)return!1;let n=e[r];if(Ec(n)){if(t.enumerable=!1,"writable"in t){t.writable=!1;return}t.set||(t.set=()=>{throw Error("Can not rewrite read-only method '"+r+"'")})}})},yEr=(e,t)=>{let r={},n=o=>{o.forEach(i=>{r[i]=!0})};return mS(e)?n(e):n(String(e).split(t)),r},_Er=()=>{},bEr=(e,t)=>e!=null&&Number.isFinite(e=+e)?e:t;function xEr(e){return!!(e&&Ec(e.append)&&e[CVe]==="FormData"&&e[sj])}var wEr=e=>{let t=new Array(10),r=(n,o)=>{if(MO(n)){if(t.indexOf(n)>=0)return;if(IO(n))return n;if(!("toJSON"in n)){t[o]=n;let i=mS(n)?[]:{};return CO(n,(a,c)=>{let h=r(a,o+1);!hS(h)&&(i[c]=h)}),t[o]=void 0,i}}return n};return r(e,0)},EEr=Ad("AsyncFunction"),SEr=e=>e&&(MO(e)||Ec(e))&&Ec(e.then)&&Ec(e.catch),LVe=((e,t)=>e?setImmediate:t?((r,n)=>($_.addEventListener("message",({source:o,data:i})=>{o===$_&&i===r&&n.length&&n.shift()()},!1),o=>{n.push(o),$_.postMessage(r,"*")}))(`axios@${Math.random()}`,[]):r=>setTimeout(r))(typeof setImmediate=="function",Ec($_.postMessage)),TEr=typeof queueMicrotask!="undefined"?queueMicrotask.bind($_):typeof _!="undefined"&&_.nextTick||LVe,IEr=e=>e!=null&&Ec(e[sj]),ut={isArray:mS,isArrayBuffer:AVe,isBuffer:IO,isFormData:Jwr,isArrayBufferView:Vwr,isString:Gwr,isNumber:OVe,isBoolean:Hwr,isObject:MO,isPlainObject:aj,isEmptyObject:Wwr,isReadableStream:eEr,isRequest:tEr,isResponse:rEr,isHeaders:nEr,isUndefined:hS,isDate:$wr,isFile:Ywr,isBlob:Zwr,isRegExp:gEr,isFunction:Ec,isStream:Xwr,isURLSearchParams:Qwr,isTypedArray:pEr,isFileList:Kwr,forEach:CO,merge:Cne,extend:iEr,trim:oEr,stripBOM:aEr,inherits:sEr,toFlatObject:lEr,kindOf:lj,kindOfTest:Ad,endsWith:uEr,toArray:cEr,forEachEntry:fEr,matchAll:dEr,isHTMLForm:hEr,hasOwnProperty:MVe,hasOwnProp:MVe,reduceDescriptors:NVe,freezeMethods:vEr,toObjectSet:yEr,toCamelCase:mEr,noop:_Er,toFiniteNumber:bEr,findKey:PVe,global:$_,isContextDefined:DVe,isSpecCompliantForm:xEr,toJSONObject:wEr,isAsyncFn:EEr,isThenable:SEr,setImmediate:LVe,asap:TEr,isIterable:IEr};u();u();u();u();u();function gS(e,t,r,n,o){Error.call(this),Error.captureStackTrace?Error.captureStackTrace(this,this.constructor):this.stack=new Error().stack,this.message=e,this.name="AxiosError",t&&(this.code=t),r&&(this.config=r),n&&(this.request=n),o&&(this.response=o,this.status=o.status?o.status:null)}ut.inherits(gS,Error,{toJSON:function(){return{message:this.message,name:this.name,description:this.description,number:this.number,fileName:this.fileName,lineNumber:this.lineNumber,columnNumber:this.columnNumber,stack:this.stack,config:ut.toJSONObject(this.config),code:this.code,status:this.status}}});var kVe=gS.prototype,RVe={};["ERR_BAD_OPTION_VALUE","ERR_BAD_OPTION","ECONNABORTED","ETIMEDOUT","ERR_NETWORK","ERR_FR_TOO_MANY_REDIRECTS","ERR_DEPRECATED","ERR_BAD_RESPONSE","ERR_BAD_REQUEST","ERR_CANCELED","ERR_NOT_SUPPORT","ERR_INVALID_URL"].forEach(e=>{RVe[e]={value:e}});Object.defineProperties(gS,RVe);Object.defineProperty(kVe,"isAxiosError",{value:!0});gS.from=(e,t,r,n,o,i)=>{let a=Object.create(kVe);ut.toFlatObject(e,a,function(y){return y!==Error.prototype},m=>m!=="isAxiosError");let c=e&&e.message?e.message:"Error",h=t==null&&e?e.code:t;return gS.call(a,c,h,r,n,o),e&&a.cause==null&&Object.defineProperty(a,"cause",{value:e,configurable:!0}),a.name=e&&e.name||"Error",i&&Object.assign(a,i),a};var Dn=gS;u();var cj=null;function One(e){return ut.isPlainObject(e)||ut.isArray(e)}function qVe(e){return ut.endsWith(e,"[]")?e.slice(0,-2):e}function jVe(e,t,r){return e?e.concat(t).map(function(o,i){return o=qVe(o),!r&&i?"["+o+"]":o}).join(r?".":""):t}function MEr(e){return ut.isArray(e)&&!e.some(One)}var CEr=ut.toFlatObject(ut,{},null,function(t){return /^is[A-Z]/.test(t)});function AEr(e,t,r){if(!ut.isObject(e))throw new TypeError("target must be an object");t=t||new(cj||FormData),r=ut.toFlatObject(r,{metaTokens:!0,dots:!1,indexes:!1},!1,function(j,D){return!ut.isUndefined(D[j])});let n=r.metaTokens,o=r.visitor||y,i=r.dots,a=r.indexes,h=(r.Blob||typeof Blob!="undefined"&&Blob)&&ut.isSpecCompliantForm(t);if(!ut.isFunction(o))throw new TypeError("visitor must be a function");function m(P){if(P===null)return"";if(ut.isDate(P))return P.toISOString();if(ut.isBoolean(P))return P.toString();if(!h&&ut.isBlob(P))throw new Dn("Blob is not supported. Use a Buffer instead.");return ut.isArrayBuffer(P)||ut.isTypedArray(P)?h&&typeof Blob=="function"?new Blob([P]):Buffer.from(P):P}function y(P,j,D){let k=P;if(P&&!D&&typeof P=="object"){if(ut.endsWith(j,"{}"))j=n?j:j.slice(0,-2),P=JSON.stringify(P);else if(ut.isArray(P)&&MEr(P)||(ut.isFileList(P)||ut.endsWith(j,"[]"))&&(k=ut.toArray(P)))return j=qVe(j),k.forEach(function(V,G){!(ut.isUndefined(V)||V===null)&&t.append(a===!0?jVe([j],G,i):a===null?j:j+"[]",m(V))}),!1}return One(P)?!0:(t.append(jVe(D,j,i),m(P)),!1)}let w=[],E=Object.assign(CEr,{defaultVisitor:y,convertValue:m,isVisitable:One});function A(P,j){if(!ut.isUndefined(P)){if(w.indexOf(P)!==-1)throw Error("Circular reference detected in "+j.join("."));w.push(P),ut.forEach(P,function(k,z){(!(ut.isUndefined(k)||k===null)&&o.call(t,k,ut.isString(z)?z.trim():z,j,E))===!0&&A(k,j?j.concat(z):[z])}),w.pop()}}if(!ut.isObject(e))throw new TypeError("data must be an object");return A(e),t}var o0=AEr;function zVe(e){let t={"!":"%21","'":"%27","(":"%28",")":"%29","~":"%7E","%20":"+","%00":"\0"};return encodeURIComponent(e).replace(/[!'()~]|%20|%00/g,function(n){return t[n]})}function FVe(e,t){this._pairs=[],e&&o0(e,this,t)}var UVe=FVe.prototype;UVe.append=function(t,r){this._pairs.push([t,r])};UVe.toString=function(t){let r=t?function(n){return t.call(this,n,zVe)}:zVe;return this._pairs.map(function(o){return r(o[0])+"="+r(o[1])},"").join("&")};var pj=FVe;function OEr(e){return encodeURIComponent(e).replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%20/g,"+")}function AO(e,t,r){if(!t)return e;let n=r&&r.encode||OEr;ut.isFunction(r)&&(r={serialize:r});let o=r&&r.serialize,i;if(o?i=o(t,r):i=ut.isURLSearchParams(t)?t.toString():new pj(t,r).toString(n),i){let a=e.indexOf("#");a!==-1&&(e=e.slice(0,a)),e+=(e.indexOf("?")===-1?"?":"&")+i}return e}u();var Pne=class{constructor(){this.handlers=[]}use(t,r,n){return this.handlers.push({fulfilled:t,rejected:r,synchronous:n?n.synchronous:!1,runWhen:n?n.runWhen:null}),this.handlers.length-1}eject(t){this.handlers[t]&&(this.handlers[t]=null)}clear(){this.handlers&&(this.handlers=[])}forEach(t){ut.forEach(this.handlers,function(n){n!==null&&t(n)})}},Dne=Pne;u();u();u();u();var fj={silentJSONParsing:!0,forcedJSONParsing:!0,clarifyTimeoutError:!1};u();u();u();u();var BVe=typeof URLSearchParams!="undefined"?URLSearchParams:pj;u();var VVe=typeof FormData!="undefined"?FormData:null;u();var GVe=typeof Blob!="undefined"?Blob:null;var HVe={isBrowser:!0,classes:{URLSearchParams:BVe,FormData:VVe,Blob:GVe},protocols:["http","https","file","blob","url","data"]};var kne={};uw(kne,{hasBrowserEnv:()=>Lne,hasStandardBrowserEnv:()=>PEr,hasStandardBrowserWebWorkerEnv:()=>DEr,navigator:()=>Nne,origin:()=>NEr});u();var Lne=typeof window!="undefined"&&typeof document!="undefined",Nne=typeof navigator=="object"&&navigator||void 0,PEr=Lne&&(!Nne||["ReactNative","NativeScript","NS"].indexOf(Nne.product)<0),DEr=typeof WorkerGlobalScope!="undefined"&&self instanceof WorkerGlobalScope&&typeof self.importScripts=="function",NEr=Lne&&window.location.href||"http://localhost";var xa=Se(Se({},kne),HVe);function Rne(e,t){return o0(e,new xa.classes.URLSearchParams,Se({visitor:function(r,n,o,i){return xa.isNode&&ut.isBuffer(r)?(this.append(n,r.toString("base64")),!1):i.defaultVisitor.apply(this,arguments)}},t))}u();function LEr(e){return ut.matchAll(/\w+|\[(\w*)]/g,e).map(t=>t[0]==="[]"?"":t[1]||t[0])}function kEr(e){let t={},r=Object.keys(e),n,o=r.length,i;for(n=0;n<o;n++)i=r[n],t[i]=e[i];return t}function REr(e){function t(r,n,o,i){let a=r[i++];if(a==="__proto__")return!0;let c=Number.isFinite(+a),h=i>=r.length;return a=!a&&ut.isArray(o)?o.length:a,h?(ut.hasOwnProp(o,a)?o[a]=[o[a],n]:o[a]=n,!c):((!o[a]||!ut.isObject(o[a]))&&(o[a]=[]),t(r,n,o[a],i)&&ut.isArray(o[a])&&(o[a]=kEr(o[a])),!c)}if(ut.isFormData(e)&&ut.isFunction(e.entries)){let r={};return ut.forEachEntry(e,(n,o)=>{t(LEr(n),o,r,0)}),r}return null}var dj=REr;function jEr(e,t,r){if(ut.isString(e))try{return(t||JSON.parse)(e),ut.trim(e)}catch(n){if(n.name!=="SyntaxError")throw n}return(r||JSON.stringify)(e)}var jne={transitional:fj,adapter:["xhr","http","fetch"],transformRequest:[function(t,r){let n=r.getContentType()||"",o=n.indexOf("application/json")>-1,i=ut.isObject(t);if(i&&ut.isHTMLForm(t)&&(t=new FormData(t)),ut.isFormData(t))return o?JSON.stringify(dj(t)):t;if(ut.isArrayBuffer(t)||ut.isBuffer(t)||ut.isStream(t)||ut.isFile(t)||ut.isBlob(t)||ut.isReadableStream(t))return t;if(ut.isArrayBufferView(t))return t.buffer;if(ut.isURLSearchParams(t))return r.setContentType("application/x-www-form-urlencoded;charset=utf-8",!1),t.toString();let c;if(i){if(n.indexOf("application/x-www-form-urlencoded")>-1)return Rne(t,this.formSerializer).toString();if((c=ut.isFileList(t))||n.indexOf("multipart/form-data")>-1){let h=this.env&&this.env.FormData;return o0(c?{"files[]":t}:t,h&&new h,this.formSerializer)}}return i||o?(r.setContentType("application/json",!1),jEr(t)):t}],transformResponse:[function(t){let r=this.transitional||jne.transitional,n=r&&r.forcedJSONParsing,o=this.responseType==="json";if(ut.isResponse(t)||ut.isReadableStream(t))return t;if(t&&ut.isString(t)&&(n&&!this.responseType||o)){let a=!(r&&r.silentJSONParsing)&&o;try{return JSON.parse(t,this.parseReviver)}catch(c){if(a)throw c.name==="SyntaxError"?Dn.from(c,Dn.ERR_BAD_RESPONSE,this,null,this.response):c}}return t}],timeout:0,xsrfCookieName:"XSRF-TOKEN",xsrfHeaderName:"X-XSRF-TOKEN",maxContentLength:-1,maxBodyLength:-1,env:{FormData:xa.classes.FormData,Blob:xa.classes.Blob},validateStatus:function(t){return t>=200&&t<300},headers:{common:{Accept:"application/json, text/plain, */*","Content-Type":void 0}}};ut.forEach(["delete","get","head","post","put","patch"],e=>{jne.headers[e]={}});var vS=jne;u();u();var qEr=ut.toObjectSet(["age","authorization","content-length","content-type","etag","expires","from","host","if-modified-since","if-unmodified-since","last-modified","location","max-forwards","proxy-authorization","referer","retry-after","user-agent"]),WVe=e=>{let t={},r,n,o;return e&&e.split(`
`).forEach(function(a){o=a.indexOf(":"),r=a.substring(0,o).trim().toLowerCase(),n=a.substring(o+1).trim(),!(!r||t[r]&&qEr[r])&&(r==="set-cookie"?t[r]?t[r].push(n):t[r]=[n]:t[r]=t[r]?t[r]+", "+n:n)}),t};var $Ve=Symbol("internals");function OO(e){return e&&String(e).trim().toLowerCase()}function hj(e){return e===!1||e==null?e:ut.isArray(e)?e.map(hj):String(e)}function zEr(e){let t=Object.create(null),r=/([^\s,;=]+)\s*(?:=\s*([^,;]+))?/g,n;for(;n=r.exec(e);)t[n[1]]=n[2];return t}var FEr=e=>/^[-_a-zA-Z0-9^`|~,!#$%&'*+.]+$/.test(e.trim());function qne(e,t,r,n,o){if(ut.isFunction(n))return n.call(this,t,r);if(o&&(t=r),!!ut.isString(t)){if(ut.isString(n))return t.indexOf(n)!==-1;if(ut.isRegExp(n))return n.test(t)}}function UEr(e){return e.trim().toLowerCase().replace(/([a-z\d])(\w*)/g,(t,r,n)=>r.toUpperCase()+n)}function BEr(e,t){let r=ut.toCamelCase(" "+t);["get","set","has"].forEach(n=>{Object.defineProperty(e,n+r,{value:function(o,i,a){return this[n].call(this,t,o,i,a)},configurable:!0})})}var yS=class{constructor(t){t&&this.set(t)}set(t,r,n){let o=this;function i(c,h,m){let y=OO(h);if(!y)throw new Error("header name must be a non-empty string");let w=ut.findKey(o,y);(!w||o[w]===void 0||m===!0||m===void 0&&o[w]!==!1)&&(o[w||h]=hj(c))}let a=(c,h)=>ut.forEach(c,(m,y)=>i(m,y,h));if(ut.isPlainObject(t)||t instanceof this.constructor)a(t,r);else if(ut.isString(t)&&(t=t.trim())&&!FEr(t))a(WVe(t),r);else if(ut.isObject(t)&&ut.isIterable(t)){let c={},h,m;for(let y of t){if(!ut.isArray(y))throw TypeError("Object iterator must return a key-value pair");c[m=y[0]]=(h=c[m])?ut.isArray(h)?[...h,y[1]]:[h,y[1]]:y[1]}a(c,r)}else t!=null&&i(r,t,n);return this}get(t,r){if(t=OO(t),t){let n=ut.findKey(this,t);if(n){let o=this[n];if(!r)return o;if(r===!0)return zEr(o);if(ut.isFunction(r))return r.call(this,o,n);if(ut.isRegExp(r))return r.exec(o);throw new TypeError("parser must be boolean|regexp|function")}}}has(t,r){if(t=OO(t),t){let n=ut.findKey(this,t);return!!(n&&this[n]!==void 0&&(!r||qne(this,this[n],n,r)))}return!1}delete(t,r){let n=this,o=!1;function i(a){if(a=OO(a),a){let c=ut.findKey(n,a);c&&(!r||qne(n,n[c],c,r))&&(delete n[c],o=!0)}}return ut.isArray(t)?t.forEach(i):i(t),o}clear(t){let r=Object.keys(this),n=r.length,o=!1;for(;n--;){let i=r[n];(!t||qne(this,this[i],i,t,!0))&&(delete this[i],o=!0)}return o}normalize(t){let r=this,n={};return ut.forEach(this,(o,i)=>{let a=ut.findKey(n,i);if(a){r[a]=hj(o),delete r[i];return}let c=t?UEr(i):String(i).trim();c!==i&&delete r[i],r[c]=hj(o),n[c]=!0}),this}concat(...t){return this.constructor.concat(this,...t)}toJSON(t){let r=Object.create(null);return ut.forEach(this,(n,o)=>{n!=null&&n!==!1&&(r[o]=t&&ut.isArray(n)?n.join(", "):n)}),r}[Symbol.iterator](){return Object.entries(this.toJSON())[Symbol.iterator]()}toString(){return Object.entries(this.toJSON()).map(([t,r])=>t+": "+r).join(`
`)}getSetCookie(){return this.get("set-cookie")||[]}get[Symbol.toStringTag](){return"AxiosHeaders"}static from(t){return t instanceof this?t:new this(t)}static concat(t,...r){let n=new this(t);return r.forEach(o=>n.set(o)),n}static accessor(t){let n=(this[$Ve]=this[$Ve]={accessors:{}}).accessors,o=this.prototype;function i(a){let c=OO(a);n[c]||(BEr(o,a),n[c]=!0)}return ut.isArray(t)?t.forEach(i):i(t),this}};yS.accessor(["Content-Type","Content-Length","Accept","Accept-Encoding","User-Agent","Authorization"]);ut.reduceDescriptors(yS.prototype,({value:e},t)=>{let r=t[0].toUpperCase()+t.slice(1);return{get:()=>e,set(n){this[r]=n}}});ut.freezeMethods(yS);var js=yS;function PO(e,t){let r=this||vS,n=t||r,o=js.from(n.headers),i=n.data;return ut.forEach(e,function(c){i=c.call(r,i,o.normalize(),t?t.status:void 0)}),o.normalize(),i}u();function DO(e){return!!(e&&e.__CANCEL__)}u();function YVe(e,t,r){Dn.call(this,e==null?"canceled":e,Dn.ERR_CANCELED,t,r),this.name="CanceledError"}ut.inherits(YVe,Dn,{__CANCEL__:!0});var Yh=YVe;u();u();u();function NO(e,t,r){let n=r.config.validateStatus;!r.status||!n||n(r.status)?e(r):t(new Dn("Request failed with status code "+r.status,[Dn.ERR_BAD_REQUEST,Dn.ERR_BAD_RESPONSE][Math.floor(r.status/100)-4],r.config,r.request,r))}u();function zne(e){let t=/^([-+\w]{1,25})(:?\/\/|:)/.exec(e);return t&&t[1]||""}u();u();function VEr(e,t){e=e||10;let r=new Array(e),n=new Array(e),o=0,i=0,a;return t=t!==void 0?t:1e3,function(h){let m=Date.now(),y=n[i];a||(a=m),r[o]=h,n[o]=m;let w=i,E=0;for(;w!==o;)E+=r[w++],w=w%e;if(o=(o+1)%e,o===i&&(i=(i+1)%e),m-a<t)return;let A=y&&m-y;return A?Math.round(E*1e3/A):void 0}}var ZVe=VEr;u();function GEr(e,t){let r=0,n=1e3/t,o,i,a=(m,y=Date.now())=>{r=y,o=null,i&&(clearTimeout(i),i=null),e(...m)};return[(...m)=>{let y=Date.now(),w=y-r;w>=n?a(m,y):(o=m,i||(i=setTimeout(()=>{i=null,a(o)},n-w)))},()=>o&&a(o)]}var KVe=GEr;var _S=(e,t,r=3)=>{let n=0,o=ZVe(50,250);return KVe(i=>{let a=i.loaded,c=i.lengthComputable?i.total:void 0,h=a-n,m=o(h),y=a<=c;n=a;let w={loaded:a,total:c,progress:c?a/c:void 0,bytes:h,rate:m||void 0,estimated:m&&c&&y?(c-a)/m:void 0,event:i,lengthComputable:c!=null,[t?"download":"upload"]:!0};e(w)},r)},Fne=(e,t)=>{let r=e!=null;return[n=>t[0]({lengthComputable:r,total:e,loaded:n}),t[1]]},Une=e=>(...t)=>ut.asap(()=>e(...t));u();u();var XVe=xa.hasStandardBrowserEnv?((e,t)=>r=>(r=new URL(r,xa.origin),e.protocol===r.protocol&&e.host===r.host&&(t||e.port===r.port)))(new URL(xa.origin),xa.navigator&&/(msie|trident)/i.test(xa.navigator.userAgent)):()=>!0;u();var JVe=xa.hasStandardBrowserEnv?{write(e,t,r,n,o,i){let a=[e+"="+encodeURIComponent(t)];ut.isNumber(r)&&a.push("expires="+new Date(r).toGMTString()),ut.isString(n)&&a.push("path="+n),ut.isString(o)&&a.push("domain="+o),i===!0&&a.push("secure"),document.cookie=a.join("; ")},read(e){let t=document.cookie.match(new RegExp("(^|;\\s*)("+e+")=([^;]*)"));return t?decodeURIComponent(t[3]):null},remove(e){this.write(e,"",Date.now()-864e5)}}:{write(){},read(){return null},remove(){}};u();u();function Bne(e){return /^([a-z][a-z\d+\-.]*:)?\/\//i.test(e)}u();function Vne(e,t){return t?e.replace(/\/?\/$/,"")+"/"+t.replace(/^\/+/,""):e}function LO(e,t,r){let n=!Bne(t);return e&&(n||r==!1)?Vne(e,t):t}u();var QVe=e=>e instanceof js?Se({},e):e;function Od(e,t){t=t||{};let r={};function n(m,y,w,E){return ut.isPlainObject(m)&&ut.isPlainObject(y)?ut.merge.call({caseless:E},m,y):ut.isPlainObject(y)?ut.merge({},y):ut.isArray(y)?y.slice():y}function o(m,y,w,E){if(ut.isUndefined(y)){if(!ut.isUndefined(m))return n(void 0,m,w,E)}else return n(m,y,w,E)}function i(m,y){if(!ut.isUndefined(y))return n(void 0,y)}function a(m,y){if(ut.isUndefined(y)){if(!ut.isUndefined(m))return n(void 0,m)}else return n(void 0,y)}function c(m,y,w){if(w in t)return n(m,y);if(w in e)return n(void 0,m)}let h={url:i,method:i,data:i,baseURL:a,transformRequest:a,transformResponse:a,paramsSerializer:a,timeout:a,timeoutMessage:a,withCredentials:a,withXSRFToken:a,adapter:a,responseType:a,xsrfCookieName:a,xsrfHeaderName:a,onUploadProgress:a,onDownloadProgress:a,decompress:a,maxContentLength:a,maxBodyLength:a,beforeRedirect:a,transport:a,httpAgent:a,httpsAgent:a,cancelToken:a,socketPath:a,responseEncoding:a,validateStatus:c,headers:(m,y,w)=>o(QVe(m),QVe(y),w,!0)};return ut.forEach(Object.keys(Se(Se({},e),t)),function(y){let w=h[y]||o,E=w(e[y],t[y],y);ut.isUndefined(E)&&w!==c||(r[y]=E)}),r}var mj=e=>{let t=Od({},e),{data:r,withXSRFToken:n,xsrfHeaderName:o,xsrfCookieName:i,headers:a,auth:c}=t;if(t.headers=a=js.from(a),t.url=AO(LO(t.baseURL,t.url,t.allowAbsoluteUrls),e.params,e.paramsSerializer),c&&a.set("Authorization","Basic "+btoa((c.username||"")+":"+(c.password?unescape(encodeURIComponent(c.password)):""))),ut.isFormData(r)){if(xa.hasStandardBrowserEnv||xa.hasStandardBrowserWebWorkerEnv)a.setContentType(void 0);else if(ut.isFunction(r.getHeaders)){let h=r.getHeaders(),m=["content-type","content-length"];Object.entries(h).forEach(([y,w])=>{m.includes(y.toLowerCase())&&a.set(y,w)})}}if(xa.hasStandardBrowserEnv&&(n&&ut.isFunction(n)&&(n=n(t)),n||n!==!1&&XVe(t.url))){let h=o&&i&&JVe.read(i);h&&a.set(o,h)}return t};var HEr=typeof XMLHttpRequest!="undefined",eGe=HEr&&function(e){return new Promise(function(r,n){let o=mj(e),i=o.data,a=js.from(o.headers).normalize(),{responseType:c,onUploadProgress:h,onDownloadProgress:m}=o,y,w,E,A,P;function j(){A&&A(),P&&P(),o.cancelToken&&o.cancelToken.unsubscribe(y),o.signal&&o.signal.removeEventListener("abort",y)}let D=new XMLHttpRequest;D.open(o.method.toUpperCase(),o.url,!0),D.timeout=o.timeout;function k(){if(!D)return;let V=js.from("getAllResponseHeaders"in D&&D.getAllResponseHeaders()),K={data:!c||c==="text"||c==="json"?D.responseText:D.response,status:D.status,statusText:D.statusText,headers:V,config:e,request:D};NO(function(te){r(te),j()},function(te){n(te),j()},K),D=null}"onloadend"in D?D.onloadend=k:D.onreadystatechange=function(){!D||D.readyState!==4||D.status===0&&!(D.responseURL&&D.responseURL.indexOf("file:")===0)||setTimeout(k)},D.onabort=function(){D&&(n(new Dn("Request aborted",Dn.ECONNABORTED,e,D)),D=null)},D.onerror=function(G){let K=G&&G.message?G.message:"Network Error",Z=new Dn(K,Dn.ERR_NETWORK,e,D);Z.event=G||null,n(Z),D=null},D.ontimeout=function(){let G=o.timeout?"timeout of "+o.timeout+"ms exceeded":"timeout exceeded",K=o.transitional||fj;o.timeoutErrorMessage&&(G=o.timeoutErrorMessage),n(new Dn(G,K.clarifyTimeoutError?Dn.ETIMEDOUT:Dn.ECONNABORTED,e,D)),D=null},i===void 0&&a.setContentType(null),"setRequestHeader"in D&&ut.forEach(a.toJSON(),function(G,K){D.setRequestHeader(K,G)}),ut.isUndefined(o.withCredentials)||(D.withCredentials=!!o.withCredentials),c&&c!=="json"&&(D.responseType=o.responseType),m&&([E,P]=_S(m,!0),D.addEventListener("progress",E)),h&&D.upload&&([w,A]=_S(h),D.upload.addEventListener("progress",w),D.upload.addEventListener("loadend",A)),(o.cancelToken||o.signal)&&(y=V=>{D&&(n(!V||V.type?new Yh(null,e,D):V),D.abort(),D=null)},o.cancelToken&&o.cancelToken.subscribe(y),o.signal&&(o.signal.aborted?y():o.signal.addEventListener("abort",y)));let z=zne(o.url);if(z&&xa.protocols.indexOf(z)===-1){n(new Dn("Unsupported protocol "+z+":",Dn.ERR_BAD_REQUEST,e));return}D.send(i||null)})};u();u();var WEr=(e,t)=>{let{length:r}=e=e?e.filter(Boolean):[];if(t||r){let n=new AbortController,o,i=function(m){if(!o){o=!0,c();let y=m instanceof Error?m:this.reason;n.abort(y instanceof Dn?y:new Yh(y instanceof Error?y.message:y))}},a=t&&setTimeout(()=>{a=null,i(new Dn(`timeout ${t} of ms exceeded`,Dn.ETIMEDOUT))},t),c=()=>{e&&(a&&clearTimeout(a),a=null,e.forEach(m=>{m.unsubscribe?m.unsubscribe(i):m.removeEventListener("abort",i)}),e=null)};e.forEach(m=>m.addEventListener("abort",i));let{signal:h}=n;return h.unsubscribe=()=>ut.asap(c),h}},tGe=WEr;u();var $Er=function*(e,t){let r=e.byteLength;if(!t||r<t){yield e;return}let n=0,o;for(;n<r;)o=n+t,yield e.slice(n,o),n=o},YEr=function(e,t){return MV(this,null,function*(){try{for(var r=ihe(ZEr(e)),n,o,i;n=!(o=yield new $1(r.next())).done;n=!1){let a=o.value;yield*CV($Er(a,t))}}catch(o){i=[o]}finally{try{n&&(o=r.return)&&(yield new $1(o.call(r)))}finally{if(i)throw i[0]}}})},ZEr=function(e){return MV(this,null,function*(){if(e[Symbol.asyncIterator]){yield*CV(e);return}let t=e.getReader();try{for(;;){let{done:r,value:n}=yield new $1(t.read());if(r)break;yield n}}finally{yield new $1(t.cancel())}})},Gne=(e,t,r,n)=>{let o=YEr(e,t),i=0,a,c=m=>{a||(a=!0,n&&n(m))};return new ReadableStream({pull(m){return vt(this,null,function*(){try{let{done:y,value:w}=yield o.next();if(y){c(),m.close();return}let E=w.byteLength;if(r){let A=i+=E;r(A)}m.enqueue(new Uint8Array(w))}catch(y){throw c(y),y}})},cancel(m){return c(m),o.return()}},{highWaterMark:2})};var rGe=64*1024,{isFunction:gj}=ut,KEr=(({Request:e,Response:t})=>({Request:e,Response:t}))(ut.global),{ReadableStream:nGe,TextEncoder:oGe}=ut.global,iGe=(e,...t)=>{try{return!!e(...t)}catch(r){return!1}},XEr=e=>{e=ut.merge.call({skipUndefined:!0},KEr,e);let{fetch:t,Request:r,Response:n}=e,o=t?gj(t):typeof fetch=="function",i=gj(r),a=gj(n);if(!o)return!1;let c=o&&gj(nGe),h=o&&(typeof oGe=="function"?(P=>j=>P.encode(j))(new oGe):P=>vt(null,null,function*(){return new Uint8Array(yield new r(P).arrayBuffer())})),m=i&&c&&iGe(()=>{let P=!1,j=new r(xa.origin,{body:new nGe,method:"POST",get duplex(){return P=!0,"half"}}).headers.has("Content-Type");return P&&!j}),y=a&&c&&iGe(()=>ut.isReadableStream(new n("").body)),w={stream:y&&(P=>P.body)};o&&["text","arrayBuffer","blob","formData","stream"].forEach(P=>{!w[P]&&(w[P]=(j,D)=>{let k=j&&j[P];if(k)return k.call(j);throw new Dn(`Response type '${P}' is not supported`,Dn.ERR_NOT_SUPPORT,D)})});let E=P=>vt(null,null,function*(){if(P==null)return 0;if(ut.isBlob(P))return P.size;if(ut.isSpecCompliantForm(P))return(yield new r(xa.origin,{method:"POST",body:P}).arrayBuffer()).byteLength;if(ut.isArrayBufferView(P)||ut.isArrayBuffer(P))return P.byteLength;if(ut.isURLSearchParams(P)&&(P=P+""),ut.isString(P))return(yield h(P)).byteLength}),A=(P,j)=>vt(null,null,function*(){let D=ut.toFiniteNumber(P.getContentLength());return D==null?E(j):D});return P=>vt(null,null,function*(){let{url:j,method:D,data:k,signal:z,cancelToken:V,timeout:G,onDownloadProgress:K,onUploadProgress:Z,responseType:te,headers:se,withCredentials:le="same-origin",fetchOptions:pe}=mj(P),me=t||fetch;te=te?(te+"").toLowerCase():"text";let _e=tGe([z,V&&V.toAbortSignal()],G),de=null,Ce=_e&&_e.unsubscribe&&(()=>{_e.unsubscribe()}),Ye;try{if(Z&&m&&D!=="get"&&D!=="head"&&(Ye=yield A(se,k))!==0){let Tt=new r(j,{method:"POST",body:k,duplex:"half"}),et;if(ut.isFormData(k)&&(et=Tt.headers.get("content-type"))&&se.setContentType(et),Tt.body){let[pt,ot]=Fne(Ye,_S(Une(Z)));k=Gne(Tt.body,rGe,pt,ot)}}ut.isString(le)||(le=le?"include":"omit");let rt=i&&"credentials"in r.prototype,ct=Pt(Se({},pe),{signal:_e,method:D.toUpperCase(),headers:se.normalize().toJSON(),body:k,duplex:"half",credentials:rt?le:void 0});de=i&&new r(j,ct);let qe=yield i?me(de,pe):me(j,ct),lt=y&&(te==="stream"||te==="response");if(y&&(K||lt&&Ce)){let Tt={};["status","statusText","headers"].forEach(We=>{Tt[We]=qe[We]});let et=ut.toFiniteNumber(qe.headers.get("content-length")),[pt,ot]=K&&Fne(et,_S(Une(K),!0))||[];qe=new n(Gne(qe.body,rGe,pt,()=>{ot&&ot(),Ce&&Ce()}),Tt)}te=te||"text";let bt=yield w[ut.findKey(w,te)||"text"](qe,P);return!lt&&Ce&&Ce(),yield new Promise((Tt,et)=>{NO(Tt,et,{data:bt,headers:js.from(qe.headers),status:qe.status,statusText:qe.statusText,config:P,request:de})})}catch(rt){throw Ce&&Ce(),rt&&rt.name==="TypeError"&&/Load failed|fetch/i.test(rt.message)?Object.assign(new Dn("Network Error",Dn.ERR_NETWORK,P,de),{cause:rt.cause||rt}):Dn.from(rt,rt&&rt.code,P,de)}})},JEr=new Map,Hne=e=>{let t=e?e.env:{},{fetch:r,Request:n,Response:o}=t,i=[n,o,r],a=i.length,c=a,h,m,y=JEr;for(;c--;)h=i[c],m=y.get(h),m===void 0&&y.set(h,m=c?new Map:XEr(t)),y=m;return m},c5n=Hne();var Wne={http:cj,xhr:eGe,fetch:{get:Hne}};ut.forEach(Wne,(e,t)=>{if(e){try{Object.defineProperty(e,"name",{value:t})}catch(r){}Object.defineProperty(e,"adapterName",{value:t})}});var aGe=e=>`- ${e}`,eSr=e=>ut.isFunction(e)||e===null||e===!1,vj={getAdapter:(e,t)=>{e=ut.isArray(e)?e:[e];let{length:r}=e,n,o,i={};for(let a=0;a<r;a++){n=e[a];let c;if(o=n,!eSr(n)&&(o=Wne[(c=String(n)).toLowerCase()],o===void 0))throw new Dn(`Unknown adapter '${c}'`);if(o&&(ut.isFunction(o)||(o=o.get(t))))break;i[c||"#"+a]=o}if(!o){let a=Object.entries(i).map(([h,m])=>`adapter ${h} `+(m===!1?"is not supported by the environment":"is not available in the build")),c=r?a.length>1?`since :
`+a.map(aGe).join(`
`):" "+aGe(a[0]):"as no adapter specified";throw new Dn("There is no suitable adapter to dispatch the request "+c,"ERR_NOT_SUPPORT")}return o},adapters:Wne};function $ne(e){if(e.cancelToken&&e.cancelToken.throwIfRequested(),e.signal&&e.signal.aborted)throw new Yh(null,e)}function yj(e){return $ne(e),e.headers=js.from(e.headers),e.data=PO.call(e,e.transformRequest),["post","put","patch"].indexOf(e.method)!==-1&&e.headers.setContentType("application/x-www-form-urlencoded",!1),vj.getAdapter(e.adapter||vS.adapter,e)(e).then(function(n){return $ne(e),n.data=PO.call(e,e.transformResponse,n),n.headers=js.from(n.headers),n},function(n){return DO(n)||($ne(e),n&&n.response&&(n.response.data=PO.call(e,e.transformResponse,n.response),n.response.headers=js.from(n.response.headers))),Promise.reject(n)})}u();u();var _j="1.12.2";var bj={};["object","boolean","number","function","string","symbol"].forEach((e,t)=>{bj[e]=function(n){return typeof n===e||"a"+(t<1?"n ":" ")+e}});var sGe={};bj.transitional=function(t,r,n){function o(i,a){return"[Axios v"+_j+"] Transitional option '"+i+"'"+a+(n?". "+n:"")}return(i,a,c)=>{if(t===!1)throw new Dn(o(a," has been removed"+(r?" in "+r:"")),Dn.ERR_DEPRECATED);return r&&!sGe[a]&&(sGe[a]=!0,console.warn(o(a," has been deprecated since v"+r+" and will be removed in the near future"))),t?t(i,a,c):!0}};bj.spelling=function(t){return(r,n)=>(console.warn(`${n} is likely a misspelling of ${t}`),!0)};function tSr(e,t,r){if(typeof e!="object")throw new Dn("options must be an object",Dn.ERR_BAD_OPTION_VALUE);let n=Object.keys(e),o=n.length;for(;o-->0;){let i=n[o],a=t[i];if(a){let c=e[i],h=c===void 0||a(c,i,e);if(h!==!0)throw new Dn("option "+i+" must be "+h,Dn.ERR_BAD_OPTION_VALUE);continue}if(r!==!0)throw new Dn("Unknown option "+i,Dn.ERR_BAD_OPTION)}}var kO={assertOptions:tSr,validators:bj};var Zh=kO.validators,bS=class{constructor(t){this.defaults=t||{},this.interceptors={request:new Dne,response:new Dne}}request(t,r){return vt(this,null,function*(){try{return yield this._request(t,r)}catch(n){if(n instanceof Error){let o={};Error.captureStackTrace?Error.captureStackTrace(o):o=new Error;let i=o.stack?o.stack.replace(/^.+\n/,""):"";try{n.stack?i&&!String(n.stack).endsWith(i.replace(/^.+\n.+\n/,""))&&(n.stack+=`
`+i):n.stack=i}catch(a){}}throw n}})}_request(t,r){typeof t=="string"?(r=r||{},r.url=t):r=t||{},r=Od(this.defaults,r);let{transitional:n,paramsSerializer:o,headers:i}=r;n!==void 0&&kO.assertOptions(n,{silentJSONParsing:Zh.transitional(Zh.boolean),forcedJSONParsing:Zh.transitional(Zh.boolean),clarifyTimeoutError:Zh.transitional(Zh.boolean)},!1),o!=null&&(ut.isFunction(o)?r.paramsSerializer={serialize:o}:kO.assertOptions(o,{encode:Zh.function,serialize:Zh.function},!0)),r.allowAbsoluteUrls!==void 0||(this.defaults.allowAbsoluteUrls!==void 0?r.allowAbsoluteUrls=this.defaults.allowAbsoluteUrls:r.allowAbsoluteUrls=!0),kO.assertOptions(r,{baseUrl:Zh.spelling("baseURL"),withXsrfToken:Zh.spelling("withXSRFToken")},!0),r.method=(r.method||this.defaults.method||"get").toLowerCase();let a=i&&ut.merge(i.common,i[r.method]);i&&ut.forEach(["delete","get","head","post","put","patch","common"],P=>{delete i[P]}),r.headers=js.concat(a,i);let c=[],h=!0;this.interceptors.request.forEach(function(j){typeof j.runWhen=="function"&&j.runWhen(r)===!1||(h=h&&j.synchronous,c.unshift(j.fulfilled,j.rejected))});let m=[];this.interceptors.response.forEach(function(j){m.push(j.fulfilled,j.rejected)});let y,w=0,E;if(!h){let P=[yj.bind(this),void 0];for(P.unshift(...c),P.push(...m),E=P.length,y=Promise.resolve(r);w<E;)y=y.then(P[w++],P[w++]);return y}E=c.length;let A=r;for(;w<E;){let P=c[w++],j=c[w++];try{A=P(A)}catch(D){j.call(this,D);break}}try{y=yj.call(this,A)}catch(P){return Promise.reject(P)}for(w=0,E=m.length;w<E;)y=y.then(m[w++],m[w++]);return y}getUri(t){t=Od(this.defaults,t);let r=LO(t.baseURL,t.url,t.allowAbsoluteUrls);return AO(r,t.params,t.paramsSerializer)}};ut.forEach(["delete","get","head","options"],function(t){bS.prototype[t]=function(r,n){return this.request(Od(n||{},{method:t,url:r,data:(n||{}).data}))}});ut.forEach(["post","put","patch"],function(t){function r(n){return function(i,a,c){return this.request(Od(c||{},{method:t,headers:n?{"Content-Type":"multipart/form-data"}:{},url:i,data:a}))}}bS.prototype[t]=r(),bS.prototype[t+"Form"]=r(!0)});var RO=bS;u();var Yne=class e{constructor(t){if(typeof t!="function")throw new TypeError("executor must be a function.");let r;this.promise=new Promise(function(i){r=i});let n=this;this.promise.then(o=>{if(!n._listeners)return;let i=n._listeners.length;for(;i-->0;)n._listeners[i](o);n._listeners=null}),this.promise.then=o=>{let i,a=new Promise(c=>{n.subscribe(c),i=c}).then(o);return a.cancel=function(){n.unsubscribe(i)},a},t(function(i,a,c){n.reason||(n.reason=new Yh(i,a,c),r(n.reason))})}throwIfRequested(){if(this.reason)throw this.reason}subscribe(t){if(this.reason){t(this.reason);return}this._listeners?this._listeners.push(t):this._listeners=[t]}unsubscribe(t){if(!this._listeners)return;let r=this._listeners.indexOf(t);r!==-1&&this._listeners.splice(r,1)}toAbortSignal(){let t=new AbortController,r=n=>{t.abort(n)};return this.subscribe(r),t.signal.unsubscribe=()=>this.unsubscribe(r),t.signal}static source(){let t;return{token:new e(function(o){t=o}),cancel:t}}},lGe=Yne;u();function Zne(e){return function(r){return e.apply(null,r)}}u();function Kne(e){return ut.isObject(e)&&e.isAxiosError===!0}u();var Xne={Continue:100,SwitchingProtocols:101,Processing:102,EarlyHints:103,Ok:200,Created:201,Accepted:202,NonAuthoritativeInformation:203,NoContent:204,ResetContent:205,PartialContent:206,MultiStatus:207,AlreadyReported:208,ImUsed:226,MultipleChoices:300,MovedPermanently:301,Found:302,SeeOther:303,NotModified:304,UseProxy:305,Unused:306,TemporaryRedirect:307,PermanentRedirect:308,BadRequest:400,Unauthorized:401,PaymentRequired:402,Forbidden:403,NotFound:404,MethodNotAllowed:405,NotAcceptable:406,ProxyAuthenticationRequired:407,RequestTimeout:408,Conflict:409,Gone:410,LengthRequired:411,PreconditionFailed:412,PayloadTooLarge:413,UriTooLong:414,UnsupportedMediaType:415,RangeNotSatisfiable:416,ExpectationFailed:417,ImATeapot:418,MisdirectedRequest:421,UnprocessableEntity:422,Locked:423,FailedDependency:424,TooEarly:425,UpgradeRequired:426,PreconditionRequired:428,TooManyRequests:429,RequestHeaderFieldsTooLarge:431,UnavailableForLegalReasons:451,InternalServerError:500,NotImplemented:501,BadGateway:502,ServiceUnavailable:503,GatewayTimeout:504,HttpVersionNotSupported:505,VariantAlsoNegotiates:506,InsufficientStorage:507,LoopDetected:508,NotExtended:510,NetworkAuthenticationRequired:511};Object.entries(Xne).forEach(([e,t])=>{Xne[t]=e});var uGe=Xne;function cGe(e){let t=new RO(e),r=TO(RO.prototype.request,t);return ut.extend(r,RO.prototype,t,{allOwnKeys:!0}),ut.extend(r,t,null,{allOwnKeys:!0}),r.create=function(o){return cGe(Od(e,o))},r}var ys=cGe(vS);ys.Axios=RO;ys.CanceledError=Yh;ys.CancelToken=lGe;ys.isCancel=DO;ys.VERSION=_j;ys.toFormData=o0;ys.AxiosError=Dn;ys.Cancel=ys.CanceledError;ys.all=function(t){return Promise.all(t)};ys.spread=Zne;ys.isAxiosError=Kne;ys.mergeConfig=Od;ys.AxiosHeaders=js;ys.formToJSON=e=>dj(ut.isHTMLForm(e)?new FormData(e):e);ys.getAdapter=vj.getAdapter;ys.HttpStatusCode=uGe;ys.default=ys;var Ya=ys;var{Axios:bLn,AxiosError:xLn,CanceledError:wLn,isCancel:ELn,CancelToken:SLn,VERSION:TLn,all:ILn,Cancel:MLn,isAxiosError:CLn,spread:ALn,toFormData:OLn,AxiosHeaders:PLn,HttpStatusCode:DLn,formToJSON:NLn,getAdapter:LLn,mergeConfig:kLn}=Ya;u();var Pd=Q(jO(),1);u();var rSr="vkf-unique-control-panel",toe="basemap-selector",eoe=class{constructor(){St(this,"id",toe)}onAdd(t){this._map=t;let r=`maplibregl-ctrl maplibregl-ctrl-group basemap-selector ${rSr}`,n=document.createElement("div");return n.className=r,this._container=n,n}onRemove(){this._container.parentNode.removeChild(this._container),this._map=void 0}},fGe=eoe;u();var Y_=Q(wGe(),1);u();var EGe=(e,t="control-feedback-container")=>{let r=document.getElementById(t);if(r===null){let n=e.getCanvasContainer();r=document.createElement("div"),r.id=t,n.appendChild(r)}return r};var xj=3,SGe=e=>`${(0,Y_.default)(e[0],7)},${(0,Y_.default)(e[1],7)}`,wj=class{constructor(){St(this,"buttonCopyPosition");St(this,"textElCurrentPosition");St(this,"textElSavedPosition");St(this,"targetEl");St(this,"_container");St(this,"_button");St(this,"savedPosition");St(this,"generateSavedText",()=>{if(this.savedPosition===void 0)return this.buttonCopyPosition!==void 0&&(this.buttonCopyPosition.style.display="none"),fe("control-mouseposition-save-helper");{let t=fe("control-mouseposition-saved-label");return this.buttonCopyPosition!==void 0&&(this.buttonCopyPosition.style.display="block"),t+": Lon: "+(0,Y_.default)(this.savedPosition[0],xj)+" Lat: "+(0,Y_.default)(this.savedPosition[1],xj)}});St(this,"savePosition",t=>{if(this._map){let r=t.lngLat.toArray();this.savedPosition=r.slice(),navigator.clipboard.writeText(SGe(r)),this.updatePosition(t)}});St(this,"updatePosition",t=>{let r=this.textElCurrentPosition,n=this.textElSavedPosition,{lngLat:o}=t;r.innerHTML="Lon: "+(0,Y_.default)(o.lng,xj)+", Lat: "+(0,Y_.default)(o.lat,xj),n.innerHTML=this.generateSavedText()});St(this,"handleCopyButtonClick",t=>{t.preventDefault(),t.stopPropagation();let r=this.savedPosition;r!==void 0&&navigator.clipboard.writeText(SGe(r)),t.target.blur()});St(this,"toggleMousePosition",t=>{t.preventDefault();let r="active",n=this._button.classList.contains(r),o=this._map;if(!o)return;this._button.classList.toggle(r);let i=this.targetEl,a=EGe(o);if(this.targetEl===void 0){i=document.createElement("div"),i.className="ol-control ol-mouse-position-box";let c=document.createElement("p");this.textElCurrentPosition=c;let h=document.createElement("p");this.textElSavedPosition=h;let m=document.createElement("button");m.id="position-copy-to-clipboard",m.innerHTML="<span class=\"glyphicon glyphicon-copy\"></span>",m.title=fe("control-mouseposition-button-title"),this.buttonCopyPosition=m,m.addEventListener("click",this.handleCopyButtonClick);let y=document.createElement("div");y.className="saved-position-container",y.appendChild(h),y.appendChild(m),i.appendChild(c),i.appendChild(y),a.appendChild(i),this.targetEl=i}else this.textElCurrentPosition.innerHTML="",this.textElSavedPosition.innerHTML="";n?(o.off("mousemove",this.updatePosition),o.off("click",this.savePosition)):(this.savedPosition=void 0,o.on("mousemove",this.updatePosition),o.on("click",this.savePosition)),this.updatePosition({lngLat:o.unproject([t.clientX,t.clientY])}),i.classList.toggle(r),a.classList.toggle(`mouseposition-${r}`)})}onAdd(t){this._map=t;let r=document.createElement("div");r.className="maplibregl-ctrl maplibregl-ctrl-group";let n=document.createElement("button");return n.title=fe("control-mouseposition-title"),n.className="maplibregl-ctrl-mouse-position",n.type="button",r.appendChild(n),this._container=r,this._button=n,n.addEventListener("click",this.toggleMousePosition,!1),this._container}onRemove(){this._map.off("mousemove",this.updatePosition),this._map.off("click",this.savePosition),this._map=null,this._container.parentNode.removeChild(this._container)}};u();u();function TGe(e,t){for(let r of e)typeof t[r]=="function"&&(t[r]=t[r].bind(t))}function xS(e,t,r){let n=window.document.createElement(e);return t!==void 0&&(n.className=t),r&&r.appendChild(n),n}function IGe(e){e.parentNode&&e.parentNode.removeChild(e)}var ooe="permalink-control",noe=class{constructor(){St(this,"id",ooe)}onAdd(t){return this._map=t,this._container=xS("div","maplibregl-ctrl maplibregl-ctrl-group permalink-control"),this._container}onRemove(){this._container.parentNode.removeChild(this._container),this._map=void 0}},MGe=noe;u();u();u();var i0="vkf-terrain";var CGe=new Set(["fill-opacity","line-opacity","circle-opacity","icon-opacity","text-opacity","raster-opacity"]),AGe=new Set(["visibility"]),uu={None:"NONE",BasemapSelector:"BASEMAP_SELECTOR",Permalink:"PERMALINK"},_s={controlAdded:"controlAdded",controlRemoved:"controlRemoved",opacityChanged:"opacityChanged",visibilityChanged:"visibilityChanged"};u();function ioe(e,t){return new Promise(function(r){let n=()=>{r(!1)},o=()=>{t.signal.removeEventListener("abort",n)};t.signal.addEventListener("abort",n,{once:!0}),e.once("moveend",()=>{r(!0),o()}),e.once("touchstart",()=>{r(!1),o()}),e.once("mousedown",()=>{r(!1),o()}),e.flyTo(t)})}function OGe(e){return new Promise(t=>setTimeout(t,e))}var DGe=Q(jO(),1);var a0="vkf.globemodechange",PGe=60,Ej=class extends DGe.Map{constructor(){super(...arguments);St(this,"terrainConfiguration",mr.getTerrain());St(this,"terrainExaggeration",this.terrainConfiguration.exaggeration);St(this,"isVkfGlobeModeEnabledFlag",!1);St(this,"abortController",new AbortController);St(this,"minZoomLevelForTerrain",12);St(this,"minZoomLevelForPitchAnimation",4)}enableVkfGlobeMode({initialZoom:r}={initialZoom:null}){this.isVkfGlobeModeEnabledFlag=!0,this.fire(a0),this.on("zoomend",this._handleZoomBasedTerrainEnabling),this.on("zoomend",this._handleZoomBasedPitch);let n=()=>{ioe(this,this._getFlyToOptions(60)).then(()=>OGe(500)).then(()=>{this._growTerrain(this.terrainExaggeration)})},o=r||this.getZoom();if(o>this.minZoomLevelForPitchAnimation){if(o>=this.minZoomLevelForTerrain){this._enableTerrain(n),this.setProjection({type:"mercator"});return}this.setProjection({type:"globe"}),this.flyTo(this._getFlyToOptions(60))}else this.setMaxPitch(0),this.setProjection({type:"globe"})}disableVkfGlobeMode(){this.isVkfGlobeModeEnabledFlag=!1,this.setMaxPitch(PGe),this.fire(a0),this.off("zoomend",this._handleZoomBasedTerrainEnabling),this.off("zoomend",this._handleZoomBasedPitch);let r=()=>{ioe(this,this._getFlyToOptions(0))};if(this.terrain){this._disableTerrain(r),this.setProjection({type:"mercator"});return}this.flyTo(this._getFlyToOptions(0)),this.setProjection({type:"mercator"})}isVkfGlobeModeEnabled(){return this.isVkfGlobeModeEnabledFlag}_growTerrain(r,n=1e3){if(!this.terrain)return;let o=performance.now(),i=this.terrain.exaggeration,a=r-i,c=()=>{if(!this.terrain||this.terrainFlattening)return;let h=(performance.now()-o)/n;if(h<.99){let m=1-ag(1-h,4),y=i+m*a;this.terrain.exaggeration=y,requestAnimationFrame(c)}else this.terrainGrowing=!1,this.terrainFlattening=!1,this.terrain.exaggeration=r;this._elevationFreeze=!1,this.triggerRepaint()};this.terrainGrowing=!0,this.terrainFlattening=!1,requestAnimationFrame(c)}_maybeDispatchGrowTerrain(r){let n=i=>vt(this,null,function*(){!this.terrain||i.type!=="data"||i.dataType!=="source"||!("source"in i)||i.sourceId!==i0||i.source.type!=="raster-dem"||i.isSourceLoaded&&(this.off("data",n),r())});this.getSource(i0).loaded()?r():this.on("data",n)}_addTerrainSource(){this.addSource(i0,{attribution:this.terrainConfiguration.attribution,type:"raster-dem",tiles:[this.terrainConfiguration.url],tileSize:256,minzoom:this.terrainConfiguration.minZoom,maxzoom:this.terrainConfiguration.maxZoom,encoding:"terrarium"}),this.setTerrain({source:i0,exaggeration:0})}_enableTerrain(r){let n=this.terrainExaggeration;if(n<0){console.warn("Terrain exaggeration cannot be negative.");return}if(this.getTerrain()){this._growTerrain(n);return}this.loaded()||this.isVkfGlobeModeEnabled()?(this._addTerrainSource(),this._maybeDispatchGrowTerrain(r)):this.once("load",()=>{this.getTerrain()&&this.getSource(i0)||(this._addTerrainSource(),this._maybeDispatchGrowTerrain(r))})}_disableTerrain(r=()=>{}){if(!this.terrain)return;let n=1*1e3,o=performance.now(),i=this.terrain.exaggeration,a=()=>{if(!this.terrain||this.terrainGrowing)return;let c=(performance.now()-o)/n;if(this._elevationFreeze=!1,c<.99){let h=ag(1-c,4),m=i*h;this.terrain.exaggeration=m,requestAnimationFrame(a)}else this.terrain.exaggeration=0,this.terrainGrowing=!1,this.terrainFlattening=!1,this.setTerrain(),this.getSource(i0)&&this.removeSource(i0),r();this.triggerRepaint()};this.terrainGrowing=!1,this.terrainFlattening=!0,requestAnimationFrame(a)}_getFlyToOptions(r){return this.abortController.abort(),this.abortController=new AbortController,{signal:this.abortController.signal,pitch:r,duration:700}}_handleZoomBasedTerrainEnabling(){if(this.getZoom()>=this.minZoomLevelForTerrain){this._enableTerrain(()=>{this._growTerrain(this.terrainExaggeration),this.setProjection({type:"mercator"})});return}this._disableTerrain(()=>{this.setProjection({type:"globe"})})}_handleZoomBasedPitch(){let r=this.getZoom(),n=this.getPitch();if(r>=this.minZoomLevelForPitchAnimation){this.setMaxPitch(PGe);return}if(n===0){this.setMaxPitch(0);return}this.flyTo(this._getFlyToOptions(0)),this.once("pitchend",()=>{this.setMaxPitch(0)})}};var Sj=class{constructor(){St(this,"_map");St(this,"_container");St(this,"_button");TGe(["_toggleState","_updateIcon","_toggleProjection"],this)}onAdd(t){return this._map=t,this._container=xS("div","maplibregl-ctrl maplibregl-ctrl-group"),this._button=xS("button","maplibregl-ctrl-terrain",this._container),xS("span","maplibregl-ctrl-icon",this._button).setAttribute("aria-hidden","true"),this._button.type="button",this._button.addEventListener("click",this._toggleState),this._updateIcon(),this._map.on(a0,this._updateIcon),this._container}onRemove(){IGe(this._container),this._map.off(a0,this._updateIcon),this._map=void 0}_isVkfGlobeModeEnabled(){return this._map.isVkfGlobeModeEnabled()}_toggleState(){this._isVkfGlobeModeEnabled()?this._map.disableVkfGlobeMode():this._map.enableVkfGlobeMode(),this._updateIcon()}_updateIcon(){this._button.classList.remove("maplibregl-ctrl-vkf-globe-mode"),this._button.classList.remove("maplibregl-ctrl-vkf-globe-mode-enabled"),this._isVkfGlobeModeEnabled()?(this._button.classList.add("maplibregl-ctrl-vkf-globe-mode-enabled"),this._button.title=this._map._getUIString("VkfGlobeModeControl.Disable")):(this._button.classList.add("maplibregl-ctrl-vkf-globe-mode"),this._button.title=this._map._getUIString("VkfGlobeModeControl.Enable"))}};function Te(e){return e!=null}function wS(e){return typeof e=="string"||e instanceof String}function Dd(e){let t;try{t=new URL(e)}catch(r){return!1}return t.protocol==="http:"||t.protocol==="https:"}function NGe(e){let t;try{t=new URL(e)}catch(r){return!1}return t.protocol==="https:"}function fe(e){let t=mr.getLanguageDict();if(t===void 0)throw new Error("Dictionary is undefined.");let r=t[e];return r===void 0?(console.warn(`Translation for key "${e}" was not found in dictionary.`),""):r}var LGe=()=>[{position:"top-left",control:new Pd.NavigationControl({showZoom:!0,showCompass:!1,visualizePitch:!1})},{position:"top-left",control:new Pd.FullscreenControl({container:document.body})},{position:"top-left",control:new Pd.NavigationControl({showZoom:!1,showCompass:!0,visualizePitch:!0})},{position:"top-left",control:new wj},{position:"top-left",control:new Sj},{position:"top-left",control:new fGe},{position:"top-left",control:new Pd.GeolocateControl({trackUserLocation:!0})},{position:"top-left",control:new MGe},{position:"bottom-right",control:new Pd.AttributionControl({compact:!0})},{position:"bottom-right",control:new Pd.ScaleControl({maxWidth:137})}];var gf={EN:"en",DE:"de"},wSr=Te(_.env.DEV_MODE_SECRET)&&_.env.DEV_MODE_SECRET!==""&&Te(_.env.DEV_MODE_NAME)&&_.env.DEV_MODE_NAME!=="",Tj=()=>({"Dev-Mode-Secret":_.env.DEV_MODE_SECRET,"Dev-Mode-Name":_.env.DEV_MODE_NAME}),zu={BASEMAPS:[{id:"slub-osm",label:"SLUB OSM",urls:["https://tile-2.kartenforum.slub-dresden.de/styles/maptiler-basic-v2/style.json"],type:"vector",tileSize:512},{id:"bkg-topoplus",label:"BKG TopPlusOpen",urls:["https://sgx.geodatenzentrum.de/wms_topplus_open"],type:"wms",layers:"web",tileSize:512}],ENABLE_TILE_PRELOADING:!1,LANGUAGE_CODE:gf.EN,MARKER_IMAGE_ID:"marker",USERNAME:"anonymous",USER_ISAUTHENTICATED:!1,USER_ROLE:null},mr={axiosApiInstance:null,appendSettings(e){zu=Object.assign({},zu,e)},isDebug(){var e;return!!((e=_==null?void 0:_.env)!=null&&e.VKF_DEBUG)},getSettings(){return zu},getBaseMaps(){return zu.BASEMAPS},getDefaultBaseMapUrls(){return["https://tile-1.kartenforum.slub-dresden.de/styles/maptiler-basic-v2/{z}/{x}/{y}.png","https://tile-2.kartenforum.slub-dresden.de/styles/maptiler-basic-v2/{z}/{x}/{y}.png"]},getDefaultMapView(){return Object.assign({center:[14.9928,51.1463],zoom:6.3,maxZoom:19,minZoom:0},zu.MAPVIEW_PARAMS)},getLanguageDict(){return zu.dictionary},getMin3DZoomLevel(){return 9},getNominatimUrl(){return zu.NOMINATIM_URL},getTerrain(){return Object.assign({url:"https://terrain.kartenforum.slub-dresden.de/v2/{z}/{x}/{y}.png",attribution:"<a href='https://kartenforum.slub-dresden.de/attribution' target='_blank'>\xA9 U.S. Geological Survey and others</a>",exaggeration:1,minZoom:0,maxZoom:12},zu.TERRAIN_TILES)},getUsername(){return zu.USERNAME},isUserAuthenticated(){return zu.USER_ISAUTHENTICATED===!0},updateSettings(e){zu=e},_initAxiosApiInstance(){let e=zu.API_GEOREFERENCE_BASEURL,t=wS(e)&&e.length===0;if(!Te(e)||t)throw new Error("The URL for the georeference service is not set.");let r=Object.assign({baseURL:e,withCredentials:!0},wSr?{headers:{get:Tj(),post:Tj(),put:Tj(),delete:Tj()}}:{});this.axiosApiInstance=Ya.create(r)},getGeoreferenceApiClient(){return Te(this.axiosApiInstance)?this.axiosApiInstance:(this._initAxiosApiInstance(),this.axiosApiInstance)},getMarkerSettings(){let e=zu.MARKER_URL;if(!Te(e))throw new Error("The marker icon url is not set.");return{id:zu.MARKER_IMAGE_ID,url:e}},getUserRole(){return zu.USER_ROLE}};u();var Si={NONE:0,FEATURE:1,METADATA:2,HISTORY:3},Tc={NONE:0,METADATA:1},Sc={HORIZONTAL:"HORIZONTAL",VERTICAL:"VERTICAL"},Qs={STANDARD:"STANDARD",DRAW:"DRAW",VECTOR_MAP_EXTERNAL:"VECTOR_MAP_EXTERNAL"},ESr={EXTRA_SMALL:600,SMALL:600,MEDIUM:768,LARGE:992},kGe=e=>e>=ESr.LARGE?Sc.HORIZONTAL:Sc.VERTICAL,RGe=e=>{switch(e){case Sc.HORIZONTAL:default:return"ol-map-large";case Sc.VERTICAL:return"ol-map-small"}};u();u();u();u();u();u();var Ue={id:"id",timeChanged:"time_changed",title:"title",thumbnailUrl:"thumb_url",bounds:"bounds",hasGeoReference:"has_georeference",tmsUrls:"tms_urls",onlineResources:"online_resources",mapScale:"map_scale",rawMapIds:"raw_map_ids",name:"name",description:"description",timePeriod:"time_period",externalContentUrl:"external_content_url",externalContentType:"external_content_type",type:"type",vectorMapId:"vector_map_id",version:"version",userRole:"user_role"},_p={id:"vkf:layer_id",contentType:"vkf:content_type"},Fu={VKF:"vkf:geojson-spec-v1",IDOHIST:"idohist:idohist-v1"},go={HISTORIC_MAP:"historic_map",MOSAIC_MAP:"mosaic",VECTOR_MAP:"vector",LEGACY_GEOJSON:"geojson"},Lg={VISIBLE:"visible",NONE:"none"};u();u();u();var SSr=Math.pow(10,8)*24*60*60*1e3,skn=-SSr,Ij=6048e5,jGe=864e5,qO=6e4,zO=36e5,qGe=1e3;var TSr=3600;var zGe=TSr*24,lkn=zGe*7,ISr=zGe*365.2425,MSr=ISr/12,ukn=MSr*3,aoe=Symbol.for("constructDateFrom");function Mo(e,t){return typeof e=="function"?e(t):e&&typeof e=="object"&&aoe in e?e[aoe](t):e instanceof Date?new e.constructor(t):new Date(t)}u();function Nn(e,t){return Mo(t||e,e)}function Mj(e,t,r){let n=Nn(e,r==null?void 0:r.in);return isNaN(t)?Mo((r==null?void 0:r.in)||e,NaN):(t&&n.setDate(n.getDate()+t),n)}u();u();u();u();var CSr={};function vf(){return CSr}function Ic(e,t){var c,h,m,y,w,E,A,P;let r=vf(),n=(P=(A=(y=(m=t==null?void 0:t.weekStartsOn)!=null?m:(h=(c=t==null?void 0:t.locale)==null?void 0:c.options)==null?void 0:h.weekStartsOn)!=null?y:r.weekStartsOn)!=null?A:(E=(w=r.locale)==null?void 0:w.options)==null?void 0:E.weekStartsOn)!=null?P:0,o=Nn(e,t==null?void 0:t.in),i=o.getDay(),a=(i<n?7:0)+i-n;return o.setDate(o.getDate()-a),o.setHours(0,0,0,0),o}function Nd(e,t){return Ic(e,Pt(Se({},t),{weekStartsOn:1}))}function Cj(e,t){let r=Nn(e,t==null?void 0:t.in),n=r.getFullYear(),o=Mo(r,0);o.setFullYear(n+1,0,4),o.setHours(0,0,0,0);let i=Nd(o),a=Mo(r,0);a.setFullYear(n,0,4),a.setHours(0,0,0,0);let c=Nd(a);return r.getTime()>=i.getTime()?n+1:r.getTime()>=c.getTime()?n:n-1}u();u();function Z_(e){let t=Nn(e),r=new Date(Date.UTC(t.getFullYear(),t.getMonth(),t.getDate(),t.getHours(),t.getMinutes(),t.getSeconds(),t.getMilliseconds()));return r.setUTCFullYear(t.getFullYear()),+e-+r}u();function Aj(e,...t){let r=Mo.bind(null,e||t.find(n=>typeof n=="object"));return t.map(r)}u();function FO(e,t){let r=Nn(e,t==null?void 0:t.in);return r.setHours(0,0,0,0),r}function FGe(e,t,r){let[n,o]=Aj(r==null?void 0:r.in,e,t),i=FO(n),a=FO(o),c=+i-Z_(i),h=+a-Z_(a);return Math.round((c-h)/jGe)}u();function UGe(e,t){let r=Cj(e,t),n=Mo((t==null?void 0:t.in)||e,0);return n.setFullYear(r,0,4),n.setHours(0,0,0,0),Nd(n)}u();u();function BGe(e){return e instanceof Date||typeof e=="object"&&Object.prototype.toString.call(e)==="[object Date]"}function Oj(e){return!(!BGe(e)&&typeof e!="number"||isNaN(+Nn(e)))}u();function VGe(e,t){let r=Nn(e,t==null?void 0:t.in);return r.setFullYear(r.getFullYear(),0,1),r.setHours(0,0,0,0),r}u();u();u();u();var ASr={lessThanXSeconds:{one:"less than a second",other:"less than {{count}} seconds"},xSeconds:{one:"1 second",other:"{{count}} seconds"},halfAMinute:"half a minute",lessThanXMinutes:{one:"less than a minute",other:"less than {{count}} minutes"},xMinutes:{one:"1 minute",other:"{{count}} minutes"},aboutXHours:{one:"about 1 hour",other:"about {{count}} hours"},xHours:{one:"1 hour",other:"{{count}} hours"},xDays:{one:"1 day",other:"{{count}} days"},aboutXWeeks:{one:"about 1 week",other:"about {{count}} weeks"},xWeeks:{one:"1 week",other:"{{count}} weeks"},aboutXMonths:{one:"about 1 month",other:"about {{count}} months"},xMonths:{one:"1 month",other:"{{count}} months"},aboutXYears:{one:"about 1 year",other:"about {{count}} years"},xYears:{one:"1 year",other:"{{count}} years"},overXYears:{one:"over 1 year",other:"over {{count}} years"},almostXYears:{one:"almost 1 year",other:"almost {{count}} years"}},GGe=(e,t,r)=>{let n,o=ASr[e];return typeof o=="string"?n=o:t===1?n=o.one:n=o.other.replace("{{count}}",t.toString()),r!=null&&r.addSuffix?r.comparison&&r.comparison>0?"in "+n:n+" ago":n};u();u();function Pj(e){return(t={})=>{let r=t.width?String(t.width):e.defaultWidth;return e.formats[r]||e.formats[e.defaultWidth]}}var OSr={full:"EEEE, MMMM do, y",long:"MMMM do, y",medium:"MMM d, y",short:"MM/dd/yyyy"},PSr={full:"h:mm:ss a zzzz",long:"h:mm:ss a z",medium:"h:mm:ss a",short:"h:mm a"},DSr={full:"{{date}} 'at' {{time}}",long:"{{date}} 'at' {{time}}",medium:"{{date}}, {{time}}",short:"{{date}}, {{time}}"},HGe={date:Pj({formats:OSr,defaultWidth:"full"}),time:Pj({formats:PSr,defaultWidth:"full"}),dateTime:Pj({formats:DSr,defaultWidth:"full"})};u();var NSr={lastWeek:"'last' eeee 'at' p",yesterday:"'yesterday at' p",today:"'today at' p",tomorrow:"'tomorrow at' p",nextWeek:"eeee 'at' p",other:"P"},WGe=(e,t,r,n)=>NSr[e];u();u();function ES(e){return(t,r)=>{let n=r!=null&&r.context?String(r.context):"standalone",o;if(n==="formatting"&&e.formattingValues){let a=e.defaultFormattingWidth||e.defaultWidth,c=r!=null&&r.width?String(r.width):a;o=e.formattingValues[c]||e.formattingValues[a]}else{let a=e.defaultWidth,c=r!=null&&r.width?String(r.width):e.defaultWidth;o=e.values[c]||e.values[a]}let i=e.argumentCallback?e.argumentCallback(t):t;return o[i]}}var LSr={narrow:["B","A"],abbreviated:["BC","AD"],wide:["Before Christ","Anno Domini"]},kSr={narrow:["1","2","3","4"],abbreviated:["Q1","Q2","Q3","Q4"],wide:["1st quarter","2nd quarter","3rd quarter","4th quarter"]},RSr={narrow:["J","F","M","A","M","J","J","A","S","O","N","D"],abbreviated:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],wide:["January","February","March","April","May","June","July","August","September","October","November","December"]},jSr={narrow:["S","M","T","W","T","F","S"],short:["Su","Mo","Tu","We","Th","Fr","Sa"],abbreviated:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],wide:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"]},qSr={narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"}},zSr={narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"}},FSr=(e,t)=>{let r=Number(e),n=r%100;if(n>20||n<10)switch(n%10){case 1:return r+"st";case 2:return r+"nd";case 3:return r+"rd"}return r+"th"},$Ge={ordinalNumber:FSr,era:ES({values:LSr,defaultWidth:"wide"}),quarter:ES({values:kSr,defaultWidth:"wide",argumentCallback:e=>e-1}),month:ES({values:RSr,defaultWidth:"wide"}),day:ES({values:jSr,defaultWidth:"wide"}),dayPeriod:ES({values:qSr,defaultWidth:"wide",formattingValues:zSr,defaultFormattingWidth:"wide"})};u();u();function SS(e){return(t,r={})=>{let n=r.width,o=n&&e.matchPatterns[n]||e.matchPatterns[e.defaultMatchWidth],i=t.match(o);if(!i)return null;let a=i[0],c=n&&e.parsePatterns[n]||e.parsePatterns[e.defaultParseWidth],h=Array.isArray(c)?BSr(c,w=>w.test(a)):USr(c,w=>w.test(a)),m;m=e.valueCallback?e.valueCallback(h):h,m=r.valueCallback?r.valueCallback(m):m;let y=t.slice(a.length);return{value:m,rest:y}}}function USr(e,t){for(let r in e)if(Object.prototype.hasOwnProperty.call(e,r)&&t(e[r]))return r}function BSr(e,t){for(let r=0;r<e.length;r++)if(t(e[r]))return r}u();function YGe(e){return(t,r={})=>{let n=t.match(e.matchPattern);if(!n)return null;let o=n[0],i=t.match(e.parsePattern);if(!i)return null;let a=e.valueCallback?e.valueCallback(i[0]):i[0];a=r.valueCallback?r.valueCallback(a):a;let c=t.slice(o.length);return{value:a,rest:c}}}var VSr=/^(\d+)(th|st|nd|rd)?/i,GSr=/\d+/i,HSr={narrow:/^(b|a)/i,abbreviated:/^(b\.?\s?c\.?|b\.?\s?c\.?\s?e\.?|a\.?\s?d\.?|c\.?\s?e\.?)/i,wide:/^(before christ|before common era|anno domini|common era)/i},WSr={any:[/^b/i,/^(a|c)/i]},$Sr={narrow:/^[1234]/i,abbreviated:/^q[1234]/i,wide:/^[1234](th|st|nd|rd)? quarter/i},YSr={any:[/1/i,/2/i,/3/i,/4/i]},ZSr={narrow:/^[jfmasond]/i,abbreviated:/^(jan|feb|mar|apr|may|jun|jul|aug|sep|oct|nov|dec)/i,wide:/^(january|february|march|april|may|june|july|august|september|october|november|december)/i},KSr={narrow:[/^j/i,/^f/i,/^m/i,/^a/i,/^m/i,/^j/i,/^j/i,/^a/i,/^s/i,/^o/i,/^n/i,/^d/i],any:[/^ja/i,/^f/i,/^mar/i,/^ap/i,/^may/i,/^jun/i,/^jul/i,/^au/i,/^s/i,/^o/i,/^n/i,/^d/i]},XSr={narrow:/^[smtwf]/i,short:/^(su|mo|tu|we|th|fr|sa)/i,abbreviated:/^(sun|mon|tue|wed|thu|fri|sat)/i,wide:/^(sunday|monday|tuesday|wednesday|thursday|friday|saturday)/i},JSr={narrow:[/^s/i,/^m/i,/^t/i,/^w/i,/^t/i,/^f/i,/^s/i],any:[/^su/i,/^m/i,/^tu/i,/^w/i,/^th/i,/^f/i,/^sa/i]},QSr={narrow:/^(a|p|mi|n|(in the|at) (morning|afternoon|evening|night))/i,any:/^([ap]\.?\s?m\.?|midnight|noon|(in the|at) (morning|afternoon|evening|night))/i},eTr={any:{am:/^a/i,pm:/^p/i,midnight:/^mi/i,noon:/^no/i,morning:/morning/i,afternoon:/afternoon/i,evening:/evening/i,night:/night/i}},ZGe={ordinalNumber:YGe({matchPattern:VSr,parsePattern:GSr,valueCallback:e=>parseInt(e,10)}),era:SS({matchPatterns:HSr,defaultMatchWidth:"wide",parsePatterns:WSr,defaultParseWidth:"any"}),quarter:SS({matchPatterns:$Sr,defaultMatchWidth:"wide",parsePatterns:YSr,defaultParseWidth:"any",valueCallback:e=>e+1}),month:SS({matchPatterns:ZSr,defaultMatchWidth:"wide",parsePatterns:KSr,defaultParseWidth:"any"}),day:SS({matchPatterns:XSr,defaultMatchWidth:"wide",parsePatterns:JSr,defaultParseWidth:"any"}),dayPeriod:SS({matchPatterns:QSr,defaultMatchWidth:"any",parsePatterns:eTr,defaultParseWidth:"any"})};var UO={code:"en-US",formatDistance:GGe,formatLong:HGe,formatRelative:WGe,localize:$Ge,match:ZGe,options:{weekStartsOn:0,firstWeekContainsDate:1}};u();u();function KGe(e,t){let r=Nn(e,t==null?void 0:t.in);return FGe(r,VGe(r))+1}u();function Dj(e,t){let r=Nn(e,t==null?void 0:t.in),n=+Nd(r)-+UGe(r);return Math.round(n/Ij)+1}u();u();u();function TS(e,t){var y,w,E,A,P,j,D,k;let r=Nn(e,t==null?void 0:t.in),n=r.getFullYear(),o=vf(),i=(k=(D=(A=(E=t==null?void 0:t.firstWeekContainsDate)!=null?E:(w=(y=t==null?void 0:t.locale)==null?void 0:y.options)==null?void 0:w.firstWeekContainsDate)!=null?A:o.firstWeekContainsDate)!=null?D:(j=(P=o.locale)==null?void 0:P.options)==null?void 0:j.firstWeekContainsDate)!=null?k:1,a=Mo((t==null?void 0:t.in)||e,0);a.setFullYear(n+1,0,i),a.setHours(0,0,0,0);let c=Ic(a,t),h=Mo((t==null?void 0:t.in)||e,0);h.setFullYear(n,0,i),h.setHours(0,0,0,0);let m=Ic(h,t);return+r>=+c?n+1:+r>=+m?n:n-1}function XGe(e,t){var c,h,m,y,w,E,A,P;let r=vf(),n=(P=(A=(y=(m=t==null?void 0:t.firstWeekContainsDate)!=null?m:(h=(c=t==null?void 0:t.locale)==null?void 0:c.options)==null?void 0:h.firstWeekContainsDate)!=null?y:r.firstWeekContainsDate)!=null?A:(E=(w=r.locale)==null?void 0:w.options)==null?void 0:E.firstWeekContainsDate)!=null?P:1,o=TS(e,t),i=Mo((t==null?void 0:t.in)||e,0);return i.setFullYear(o,0,n),i.setHours(0,0,0,0),Ic(i,t)}function Nj(e,t){let r=Nn(e,t==null?void 0:t.in),n=+Ic(r,t)-+XGe(r,t);return Math.round(n/Ij)+1}u();function io(e,t){let r=e<0?"-":"",n=Math.abs(e).toString().padStart(t,"0");return r+n}u();var kg={y(e,t){let r=e.getFullYear(),n=r>0?r:1-r;return io(t==="yy"?n%100:n,t.length)},M(e,t){let r=e.getMonth();return t==="M"?String(r+1):io(r+1,2)},d(e,t){return io(e.getDate(),t.length)},a(e,t){let r=e.getHours()/12>=1?"pm":"am";switch(t){case"a":case"aa":return r.toUpperCase();case"aaa":return r;case"aaaaa":return r[0];case"aaaa":default:return r==="am"?"a.m.":"p.m."}},h(e,t){return io(e.getHours()%12||12,t.length)},H(e,t){return io(e.getHours(),t.length)},m(e,t){return io(e.getMinutes(),t.length)},s(e,t){return io(e.getSeconds(),t.length)},S(e,t){let r=t.length,n=e.getMilliseconds(),o=Math.trunc(n*Math.pow(10,r-3));return io(o,t.length)}};var IS={am:"am",pm:"pm",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},soe={G:function(e,t,r){let n=e.getFullYear()>0?1:0;switch(t){case"G":case"GG":case"GGG":return r.era(n,{width:"abbreviated"});case"GGGGG":return r.era(n,{width:"narrow"});case"GGGG":default:return r.era(n,{width:"wide"})}},y:function(e,t,r){if(t==="yo"){let n=e.getFullYear(),o=n>0?n:1-n;return r.ordinalNumber(o,{unit:"year"})}return kg.y(e,t)},Y:function(e,t,r,n){let o=TS(e,n),i=o>0?o:1-o;if(t==="YY"){let a=i%100;return io(a,2)}return t==="Yo"?r.ordinalNumber(i,{unit:"year"}):io(i,t.length)},R:function(e,t){let r=Cj(e);return io(r,t.length)},u:function(e,t){let r=e.getFullYear();return io(r,t.length)},Q:function(e,t,r){let n=Math.ceil((e.getMonth()+1)/3);switch(t){case"Q":return String(n);case"QQ":return io(n,2);case"Qo":return r.ordinalNumber(n,{unit:"quarter"});case"QQQ":return r.quarter(n,{width:"abbreviated",context:"formatting"});case"QQQQQ":return r.quarter(n,{width:"narrow",context:"formatting"});case"QQQQ":default:return r.quarter(n,{width:"wide",context:"formatting"})}},q:function(e,t,r){let n=Math.ceil((e.getMonth()+1)/3);switch(t){case"q":return String(n);case"qq":return io(n,2);case"qo":return r.ordinalNumber(n,{unit:"quarter"});case"qqq":return r.quarter(n,{width:"abbreviated",context:"standalone"});case"qqqqq":return r.quarter(n,{width:"narrow",context:"standalone"});case"qqqq":default:return r.quarter(n,{width:"wide",context:"standalone"})}},M:function(e,t,r){let n=e.getMonth();switch(t){case"M":case"MM":return kg.M(e,t);case"Mo":return r.ordinalNumber(n+1,{unit:"month"});case"MMM":return r.month(n,{width:"abbreviated",context:"formatting"});case"MMMMM":return r.month(n,{width:"narrow",context:"formatting"});case"MMMM":default:return r.month(n,{width:"wide",context:"formatting"})}},L:function(e,t,r){let n=e.getMonth();switch(t){case"L":return String(n+1);case"LL":return io(n+1,2);case"Lo":return r.ordinalNumber(n+1,{unit:"month"});case"LLL":return r.month(n,{width:"abbreviated",context:"standalone"});case"LLLLL":return r.month(n,{width:"narrow",context:"standalone"});case"LLLL":default:return r.month(n,{width:"wide",context:"standalone"})}},w:function(e,t,r,n){let o=Nj(e,n);return t==="wo"?r.ordinalNumber(o,{unit:"week"}):io(o,t.length)},I:function(e,t,r){let n=Dj(e);return t==="Io"?r.ordinalNumber(n,{unit:"week"}):io(n,t.length)},d:function(e,t,r){return t==="do"?r.ordinalNumber(e.getDate(),{unit:"date"}):kg.d(e,t)},D:function(e,t,r){let n=KGe(e);return t==="Do"?r.ordinalNumber(n,{unit:"dayOfYear"}):io(n,t.length)},E:function(e,t,r){let n=e.getDay();switch(t){case"E":case"EE":case"EEE":return r.day(n,{width:"abbreviated",context:"formatting"});case"EEEEE":return r.day(n,{width:"narrow",context:"formatting"});case"EEEEEE":return r.day(n,{width:"short",context:"formatting"});case"EEEE":default:return r.day(n,{width:"wide",context:"formatting"})}},e:function(e,t,r,n){let o=e.getDay(),i=(o-n.weekStartsOn+8)%7||7;switch(t){case"e":return String(i);case"ee":return io(i,2);case"eo":return r.ordinalNumber(i,{unit:"day"});case"eee":return r.day(o,{width:"abbreviated",context:"formatting"});case"eeeee":return r.day(o,{width:"narrow",context:"formatting"});case"eeeeee":return r.day(o,{width:"short",context:"formatting"});case"eeee":default:return r.day(o,{width:"wide",context:"formatting"})}},c:function(e,t,r,n){let o=e.getDay(),i=(o-n.weekStartsOn+8)%7||7;switch(t){case"c":return String(i);case"cc":return io(i,t.length);case"co":return r.ordinalNumber(i,{unit:"day"});case"ccc":return r.day(o,{width:"abbreviated",context:"standalone"});case"ccccc":return r.day(o,{width:"narrow",context:"standalone"});case"cccccc":return r.day(o,{width:"short",context:"standalone"});case"cccc":default:return r.day(o,{width:"wide",context:"standalone"})}},i:function(e,t,r){let n=e.getDay(),o=n===0?7:n;switch(t){case"i":return String(o);case"ii":return io(o,t.length);case"io":return r.ordinalNumber(o,{unit:"day"});case"iii":return r.day(n,{width:"abbreviated",context:"formatting"});case"iiiii":return r.day(n,{width:"narrow",context:"formatting"});case"iiiiii":return r.day(n,{width:"short",context:"formatting"});case"iiii":default:return r.day(n,{width:"wide",context:"formatting"})}},a:function(e,t,r){let o=e.getHours()/12>=1?"pm":"am";switch(t){case"a":case"aa":return r.dayPeriod(o,{width:"abbreviated",context:"formatting"});case"aaa":return r.dayPeriod(o,{width:"abbreviated",context:"formatting"}).toLowerCase();case"aaaaa":return r.dayPeriod(o,{width:"narrow",context:"formatting"});case"aaaa":default:return r.dayPeriod(o,{width:"wide",context:"formatting"})}},b:function(e,t,r){let n=e.getHours(),o;switch(n===12?o=IS.noon:n===0?o=IS.midnight:o=n/12>=1?"pm":"am",t){case"b":case"bb":return r.dayPeriod(o,{width:"abbreviated",context:"formatting"});case"bbb":return r.dayPeriod(o,{width:"abbreviated",context:"formatting"}).toLowerCase();case"bbbbb":return r.dayPeriod(o,{width:"narrow",context:"formatting"});case"bbbb":default:return r.dayPeriod(o,{width:"wide",context:"formatting"})}},B:function(e,t,r){let n=e.getHours(),o;switch(n>=17?o=IS.evening:n>=12?o=IS.afternoon:n>=4?o=IS.morning:o=IS.night,t){case"B":case"BB":case"BBB":return r.dayPeriod(o,{width:"abbreviated",context:"formatting"});case"BBBBB":return r.dayPeriod(o,{width:"narrow",context:"formatting"});case"BBBB":default:return r.dayPeriod(o,{width:"wide",context:"formatting"})}},h:function(e,t,r){if(t==="ho"){let n=e.getHours()%12;return n===0&&(n=12),r.ordinalNumber(n,{unit:"hour"})}return kg.h(e,t)},H:function(e,t,r){return t==="Ho"?r.ordinalNumber(e.getHours(),{unit:"hour"}):kg.H(e,t)},K:function(e,t,r){let n=e.getHours()%12;return t==="Ko"?r.ordinalNumber(n,{unit:"hour"}):io(n,t.length)},k:function(e,t,r){let n=e.getHours();return n===0&&(n=24),t==="ko"?r.ordinalNumber(n,{unit:"hour"}):io(n,t.length)},m:function(e,t,r){return t==="mo"?r.ordinalNumber(e.getMinutes(),{unit:"minute"}):kg.m(e,t)},s:function(e,t,r){return t==="so"?r.ordinalNumber(e.getSeconds(),{unit:"second"}):kg.s(e,t)},S:function(e,t){return kg.S(e,t)},X:function(e,t,r){let n=e.getTimezoneOffset();if(n===0)return"Z";switch(t){case"X":return QGe(n);case"XXXX":case"XX":return K_(n);case"XXXXX":case"XXX":default:return K_(n,":")}},x:function(e,t,r){let n=e.getTimezoneOffset();switch(t){case"x":return QGe(n);case"xxxx":case"xx":return K_(n);case"xxxxx":case"xxx":default:return K_(n,":")}},O:function(e,t,r){let n=e.getTimezoneOffset();switch(t){case"O":case"OO":case"OOO":return"GMT"+JGe(n,":");case"OOOO":default:return"GMT"+K_(n,":")}},z:function(e,t,r){let n=e.getTimezoneOffset();switch(t){case"z":case"zz":case"zzz":return"GMT"+JGe(n,":");case"zzzz":default:return"GMT"+K_(n,":")}},t:function(e,t,r){let n=Math.trunc(+e/1e3);return io(n,t.length)},T:function(e,t,r){return io(+e,t.length)}};function JGe(e,t=""){let r=e>0?"-":"+",n=Math.abs(e),o=Math.trunc(n/60),i=n%60;return i===0?r+String(o):r+String(o)+t+io(i,2)}function QGe(e,t){return e%60===0?(e>0?"-":"+")+io(Math.abs(e)/60,2):K_(e,t)}function K_(e,t=""){let r=e>0?"-":"+",n=Math.abs(e),o=io(Math.trunc(n/60),2),i=io(n%60,2);return r+o+t+i}u();var eHe=(e,t)=>{switch(e){case"P":return t.date({width:"short"});case"PP":return t.date({width:"medium"});case"PPP":return t.date({width:"long"});case"PPPP":default:return t.date({width:"full"})}},tHe=(e,t)=>{switch(e){case"p":return t.time({width:"short"});case"pp":return t.time({width:"medium"});case"ppp":return t.time({width:"long"});case"pppp":default:return t.time({width:"full"})}},tTr=(e,t)=>{let r=e.match(/(P+)(p+)?/)||[],n=r[1],o=r[2];if(!o)return eHe(e,t);let i;switch(n){case"P":i=t.dateTime({width:"short"});break;case"PP":i=t.dateTime({width:"medium"});break;case"PPP":i=t.dateTime({width:"long"});break;case"PPPP":default:i=t.dateTime({width:"full"});break}return i.replace("{{date}}",eHe(n,t)).replace("{{time}}",tHe(o,t))},BO={p:tHe,P:tTr};u();var rTr=/^D+$/,nTr=/^Y+$/,oTr=["D","DD","YY","YYYY"];function Lj(e){return rTr.test(e)}function kj(e){return nTr.test(e)}function VO(e,t,r){let n=iTr(e,t,r);if(console.warn(n),oTr.includes(e))throw new RangeError(n)}function iTr(e,t,r){let n=e[0]==="Y"?"years":"days of the month";return`Use \`${e.toLowerCase()}\` instead of \`${e}\` (in \`${t}\`) for formatting ${n} to the input \`${r}\`; see: https://github.com/date-fns/date-fns/blob/master/docs/unicodeTokens.md`}var aTr=/[yYQqMLwIdDecihHKkms]o|(\w)\1*|''|'(''|[^'])+('|$)|./g,sTr=/P+p+|P+|p+|''|'(''|[^'])+('|$)|./g,lTr=/^'([^]*?)'?$/,uTr=/''/g,cTr=/[a-zA-Z]/;function loe(e,t,r){var y,w,E,A,P,j,D,k,z,V,G,K,Z,te,se,le,pe,me;let n=vf(),o=(w=(y=r==null?void 0:r.locale)!=null?y:n.locale)!=null?w:UO,i=(V=(z=(j=(P=r==null?void 0:r.firstWeekContainsDate)!=null?P:(A=(E=r==null?void 0:r.locale)==null?void 0:E.options)==null?void 0:A.firstWeekContainsDate)!=null?j:n.firstWeekContainsDate)!=null?z:(k=(D=n.locale)==null?void 0:D.options)==null?void 0:k.firstWeekContainsDate)!=null?V:1,a=(me=(pe=(te=(Z=r==null?void 0:r.weekStartsOn)!=null?Z:(K=(G=r==null?void 0:r.locale)==null?void 0:G.options)==null?void 0:K.weekStartsOn)!=null?te:n.weekStartsOn)!=null?pe:(le=(se=n.locale)==null?void 0:se.options)==null?void 0:le.weekStartsOn)!=null?me:0,c=Nn(e,r==null?void 0:r.in);if(!Oj(c))throw new RangeError("Invalid time value");let h=t.match(sTr).map(_e=>{let de=_e[0];if(de==="p"||de==="P"){let Ce=BO[de];return Ce(_e,o.formatLong)}return _e}).join("").match(aTr).map(_e=>{if(_e==="''")return{isToken:!1,value:"'"};let de=_e[0];if(de==="'")return{isToken:!1,value:pTr(_e)};if(soe[de])return{isToken:!0,value:_e};if(de.match(cTr))throw new RangeError("Format string contains an unescaped latin alphabet character `"+de+"`");return{isToken:!1,value:_e}});o.localize.preprocessor&&(h=o.localize.preprocessor(c,h));let m={firstWeekContainsDate:i,weekStartsOn:a,locale:o};return h.map(_e=>{if(!_e.isToken)return _e.value;let de=_e.value;(!(r!=null&&r.useAdditionalWeekYearTokens)&&kj(de)||!(r!=null&&r.useAdditionalDayOfYearTokens)&&Lj(de))&&VO(de,t,String(e));let Ce=soe[de[0]];return Ce(c,de,o.localize,m)}).join("")}function pTr(e){let t=e.match(lTr);return t?t[1].replace(uTr,"'"):e}u();function rHe(e,t){var m,y;let r=Nn(e,t==null?void 0:t.in);if(isNaN(+r))throw new RangeError("Invalid time value");let n=(m=t==null?void 0:t.format)!=null?m:"extended",o=(y=t==null?void 0:t.representation)!=null?y:"complete",i="",a="",c=n==="extended"?"-":"",h=n==="extended"?":":"";if(o!=="time"){let w=io(r.getDate(),2),E=io(r.getMonth()+1,2);i=`${io(r.getFullYear(),4)}${c}${E}${c}${w}`}if(o!=="date"){let w=r.getTimezoneOffset();if(w!==0){let k=Math.abs(w),z=io(Math.trunc(k/60),2),V=io(k%60,2);a=`${w<0?"+":"-"}${z}:${V}`}else a="Z";let E=io(r.getHours(),2),A=io(r.getMinutes(),2),P=io(r.getSeconds(),2),j=i===""?"":"T",D=[E,A,P].join(h);i=`${i}${j}${D}${a}`}return i}u();function nHe(){return Object.assign({},vf())}u();function oHe(e,t){let r=Nn(e,t==null?void 0:t.in).getDay();return r===0?7:r}u();function iHe(e){return Math.trunc(+Nn(e)/1e3)}u();function GO(e,t){return Nn(e,t==null?void 0:t.in).getFullYear()}u();u();u();function aHe(e,t){let r=fTr(t)?new t(0):Mo(t,0);return r.setFullYear(e.getFullYear(),e.getMonth(),e.getDate()),r.setHours(e.getHours(),e.getMinutes(),e.getSeconds(),e.getMilliseconds()),r}function fTr(e){var t;return typeof e=="function"&&((t=e.prototype)==null?void 0:t.constructor)===e}var dTr=10,Rj=class{constructor(){St(this,"subPriority",0)}validate(t,r){return!0}},jj=class extends Rj{constructor(t,r,n,o,i){super(),this.value=t,this.validateValue=r,this.setValue=n,this.priority=o,i&&(this.subPriority=i)}validate(t,r){return this.validateValue(t,this.value,r)}set(t,r,n){return this.setValue(t,r,this.value,n)}},qj=class extends Rj{constructor(r,n){super();St(this,"priority",dTr);St(this,"subPriority",-1);this.context=r||(o=>Mo(n,o))}set(r,n){return n.timestampIsSet?r:Mo(r,aHe(r,this.context))}};u();u();u();var zr=class{run(t,r,n,o){let i=this.parse(t,r,n,o);return i?{setter:new jj(i.value,this.validate,this.set,this.priority,this.subPriority),rest:i.rest}:null}validate(t,r,n){return!0}};var zj=class extends zr{constructor(){super(...arguments);St(this,"priority",140);St(this,"incompatibleTokens",["R","u","t","T"])}parse(r,n,o){switch(n){case"G":case"GG":case"GGG":return o.era(r,{width:"abbreviated"})||o.era(r,{width:"narrow"});case"GGGGG":return o.era(r,{width:"narrow"});case"GGGG":default:return o.era(r,{width:"wide"})||o.era(r,{width:"abbreviated"})||o.era(r,{width:"narrow"})}}set(r,n,o){return n.era=o,r.setFullYear(o,0,1),r.setHours(0,0,0,0),r}};u();u();u();var Lo={month:/^(1[0-2]|0?\d)/,date:/^(3[0-1]|[0-2]?\d)/,dayOfYear:/^(36[0-6]|3[0-5]\d|[0-2]?\d?\d)/,week:/^(5[0-3]|[0-4]?\d)/,hour23h:/^(2[0-3]|[0-1]?\d)/,hour24h:/^(2[0-4]|[0-1]?\d)/,hour11h:/^(1[0-1]|0?\d)/,hour12h:/^(1[0-2]|0?\d)/,minute:/^[0-5]?\d/,second:/^[0-5]?\d/,singleDigit:/^\d/,twoDigits:/^\d{1,2}/,threeDigits:/^\d{1,3}/,fourDigits:/^\d{1,4}/,anyDigitsSigned:/^-?\d+/,singleDigitSigned:/^-?\d/,twoDigitsSigned:/^-?\d{1,2}/,threeDigitsSigned:/^-?\d{1,3}/,fourDigitsSigned:/^-?\d{1,4}/},yf={basicOptionalMinutes:/^([+-])(\d{2})(\d{2})?|Z/,basic:/^([+-])(\d{2})(\d{2})|Z/,basicOptionalSeconds:/^([+-])(\d{2})(\d{2})((\d{2}))?|Z/,extended:/^([+-])(\d{2}):(\d{2})|Z/,extendedOptionalSeconds:/^([+-])(\d{2}):(\d{2})(:(\d{2}))?|Z/};function ci(e,t){return e&&{value:t(e.value),rest:e.rest}}function Co(e,t){let r=t.match(e);return r?{value:parseInt(r[0],10),rest:t.slice(r[0].length)}:null}function _f(e,t){let r=t.match(e);if(!r)return null;if(r[0]==="Z")return{value:0,rest:t.slice(1)};let n=r[1]==="+"?1:-1,o=r[2]?parseInt(r[2],10):0,i=r[3]?parseInt(r[3],10):0,a=r[5]?parseInt(r[5],10):0;return{value:n*(o*zO+i*qO+a*qGe),rest:t.slice(r[0].length)}}function Fj(e){return Co(Lo.anyDigitsSigned,e)}function eo(e,t){switch(e){case 1:return Co(Lo.singleDigit,t);case 2:return Co(Lo.twoDigits,t);case 3:return Co(Lo.threeDigits,t);case 4:return Co(Lo.fourDigits,t);default:return Co(new RegExp("^\\d{1,"+e+"}"),t)}}function MS(e,t){switch(e){case 1:return Co(Lo.singleDigitSigned,t);case 2:return Co(Lo.twoDigitsSigned,t);case 3:return Co(Lo.threeDigitsSigned,t);case 4:return Co(Lo.fourDigitsSigned,t);default:return Co(new RegExp("^-?\\d{1,"+e+"}"),t)}}function CS(e){switch(e){case"morning":return 4;case"evening":return 17;case"pm":case"noon":case"afternoon":return 12;case"am":case"midnight":case"night":default:return 0}}function Uj(e,t){let r=t>0,n=r?t:1-t,o;if(n<=50)o=e||100;else{let i=n+50,a=Math.trunc(i/100)*100,c=e>=i%100;o=e+a-(c?100:0)}return r?o:1-o}function Bj(e){return e%400===0||e%4===0&&e%100!==0}var Vj=class extends zr{constructor(){super(...arguments);St(this,"priority",130);St(this,"incompatibleTokens",["Y","R","u","w","I","i","e","c","t","T"])}parse(r,n,o){let i=a=>({year:a,isTwoDigitYear:n==="yy"});switch(n){case"y":return ci(eo(4,r),i);case"yo":return ci(o.ordinalNumber(r,{unit:"year"}),i);default:return ci(eo(n.length,r),i)}}validate(r,n){return n.isTwoDigitYear||n.year>0}set(r,n,o){let i=r.getFullYear();if(o.isTwoDigitYear){let c=Uj(o.year,i);return r.setFullYear(c,0,1),r.setHours(0,0,0,0),r}let a=!("era"in n)||n.era===1?o.year:1-o.year;return r.setFullYear(a,0,1),r.setHours(0,0,0,0),r}};u();var Gj=class extends zr{constructor(){super(...arguments);St(this,"priority",130);St(this,"incompatibleTokens",["y","R","u","Q","q","M","L","I","d","D","i","t","T"])}parse(r,n,o){let i=a=>({year:a,isTwoDigitYear:n==="YY"});switch(n){case"Y":return ci(eo(4,r),i);case"Yo":return ci(o.ordinalNumber(r,{unit:"year"}),i);default:return ci(eo(n.length,r),i)}}validate(r,n){return n.isTwoDigitYear||n.year>0}set(r,n,o,i){let a=TS(r,i);if(o.isTwoDigitYear){let h=Uj(o.year,a);return r.setFullYear(h,0,i.firstWeekContainsDate),r.setHours(0,0,0,0),Ic(r,i)}let c=!("era"in n)||n.era===1?o.year:1-o.year;return r.setFullYear(c,0,i.firstWeekContainsDate),r.setHours(0,0,0,0),Ic(r,i)}};u();var Hj=class extends zr{constructor(){super(...arguments);St(this,"priority",130);St(this,"incompatibleTokens",["G","y","Y","u","Q","q","M","L","w","d","D","e","c","t","T"])}parse(r,n){return n==="R"?MS(4,r):MS(n.length,r)}set(r,n,o){let i=Mo(r,0);return i.setFullYear(o,0,4),i.setHours(0,0,0,0),Nd(i)}};u();var Wj=class extends zr{constructor(){super(...arguments);St(this,"priority",130);St(this,"incompatibleTokens",["G","y","Y","R","w","I","i","e","c","t","T"])}parse(r,n){return n==="u"?MS(4,r):MS(n.length,r)}set(r,n,o){return r.setFullYear(o,0,1),r.setHours(0,0,0,0),r}};u();var $j=class extends zr{constructor(){super(...arguments);St(this,"priority",120);St(this,"incompatibleTokens",["Y","R","q","M","L","w","I","d","D","i","e","c","t","T"])}parse(r,n,o){switch(n){case"Q":case"QQ":return eo(n.length,r);case"Qo":return o.ordinalNumber(r,{unit:"quarter"});case"QQQ":return o.quarter(r,{width:"abbreviated",context:"formatting"})||o.quarter(r,{width:"narrow",context:"formatting"});case"QQQQQ":return o.quarter(r,{width:"narrow",context:"formatting"});case"QQQQ":default:return o.quarter(r,{width:"wide",context:"formatting"})||o.quarter(r,{width:"abbreviated",context:"formatting"})||o.quarter(r,{width:"narrow",context:"formatting"})}}validate(r,n){return n>=1&&n<=4}set(r,n,o){return r.setMonth((o-1)*3,1),r.setHours(0,0,0,0),r}};u();var Yj=class extends zr{constructor(){super(...arguments);St(this,"priority",120);St(this,"incompatibleTokens",["Y","R","Q","M","L","w","I","d","D","i","e","c","t","T"])}parse(r,n,o){switch(n){case"q":case"qq":return eo(n.length,r);case"qo":return o.ordinalNumber(r,{unit:"quarter"});case"qqq":return o.quarter(r,{width:"abbreviated",context:"standalone"})||o.quarter(r,{width:"narrow",context:"standalone"});case"qqqqq":return o.quarter(r,{width:"narrow",context:"standalone"});case"qqqq":default:return o.quarter(r,{width:"wide",context:"standalone"})||o.quarter(r,{width:"abbreviated",context:"standalone"})||o.quarter(r,{width:"narrow",context:"standalone"})}}validate(r,n){return n>=1&&n<=4}set(r,n,o){return r.setMonth((o-1)*3,1),r.setHours(0,0,0,0),r}};u();var Zj=class extends zr{constructor(){super(...arguments);St(this,"incompatibleTokens",["Y","R","q","Q","L","w","I","D","i","e","c","t","T"]);St(this,"priority",110)}parse(r,n,o){let i=a=>a-1;switch(n){case"M":return ci(Co(Lo.month,r),i);case"MM":return ci(eo(2,r),i);case"Mo":return ci(o.ordinalNumber(r,{unit:"month"}),i);case"MMM":return o.month(r,{width:"abbreviated",context:"formatting"})||o.month(r,{width:"narrow",context:"formatting"});case"MMMMM":return o.month(r,{width:"narrow",context:"formatting"});case"MMMM":default:return o.month(r,{width:"wide",context:"formatting"})||o.month(r,{width:"abbreviated",context:"formatting"})||o.month(r,{width:"narrow",context:"formatting"})}}validate(r,n){return n>=0&&n<=11}set(r,n,o){return r.setMonth(o,1),r.setHours(0,0,0,0),r}};u();var Kj=class extends zr{constructor(){super(...arguments);St(this,"priority",110);St(this,"incompatibleTokens",["Y","R","q","Q","M","w","I","D","i","e","c","t","T"])}parse(r,n,o){let i=a=>a-1;switch(n){case"L":return ci(Co(Lo.month,r),i);case"LL":return ci(eo(2,r),i);case"Lo":return ci(o.ordinalNumber(r,{unit:"month"}),i);case"LLL":return o.month(r,{width:"abbreviated",context:"standalone"})||o.month(r,{width:"narrow",context:"standalone"});case"LLLLL":return o.month(r,{width:"narrow",context:"standalone"});case"LLLL":default:return o.month(r,{width:"wide",context:"standalone"})||o.month(r,{width:"abbreviated",context:"standalone"})||o.month(r,{width:"narrow",context:"standalone"})}}validate(r,n){return n>=0&&n<=11}set(r,n,o){return r.setMonth(o,1),r.setHours(0,0,0,0),r}};u();u();function sHe(e,t,r){let n=Nn(e,r==null?void 0:r.in),o=Nj(n,r)-t;return n.setDate(n.getDate()-o*7),Nn(n,r==null?void 0:r.in)}var Xj=class extends zr{constructor(){super(...arguments);St(this,"priority",100);St(this,"incompatibleTokens",["y","R","u","q","Q","M","L","I","d","D","i","t","T"])}parse(r,n,o){switch(n){case"w":return Co(Lo.week,r);case"wo":return o.ordinalNumber(r,{unit:"week"});default:return eo(n.length,r)}}validate(r,n){return n>=1&&n<=53}set(r,n,o,i){return Ic(sHe(r,o,i),i)}};u();u();function lHe(e,t,r){let n=Nn(e,r==null?void 0:r.in),o=Dj(n,r)-t;return n.setDate(n.getDate()-o*7),n}var Jj=class extends zr{constructor(){super(...arguments);St(this,"priority",100);St(this,"incompatibleTokens",["y","Y","u","q","Q","M","L","w","d","D","e","c","t","T"])}parse(r,n,o){switch(n){case"I":return Co(Lo.week,r);case"Io":return o.ordinalNumber(r,{unit:"week"});default:return eo(n.length,r)}}validate(r,n){return n>=1&&n<=53}set(r,n,o){return Nd(lHe(r,o))}};u();var hTr=[31,28,31,30,31,30,31,31,30,31,30,31],mTr=[31,29,31,30,31,30,31,31,30,31,30,31],Qj=class extends zr{constructor(){super(...arguments);St(this,"priority",90);St(this,"subPriority",1);St(this,"incompatibleTokens",["Y","R","q","Q","w","I","D","i","e","c","t","T"])}parse(r,n,o){switch(n){case"d":return Co(Lo.date,r);case"do":return o.ordinalNumber(r,{unit:"date"});default:return eo(n.length,r)}}validate(r,n){let o=r.getFullYear(),i=Bj(o),a=r.getMonth();return i?n>=1&&n<=mTr[a]:n>=1&&n<=hTr[a]}set(r,n,o){return r.setDate(o),r.setHours(0,0,0,0),r}};u();var eq=class extends zr{constructor(){super(...arguments);St(this,"priority",90);St(this,"subpriority",1);St(this,"incompatibleTokens",["Y","R","q","Q","M","L","w","I","d","E","i","e","c","t","T"])}parse(r,n,o){switch(n){case"D":case"DD":return Co(Lo.dayOfYear,r);case"Do":return o.ordinalNumber(r,{unit:"date"});default:return eo(n.length,r)}}validate(r,n){let o=r.getFullYear();return Bj(o)?n>=1&&n<=366:n>=1&&n<=365}set(r,n,o){return r.setMonth(0,o),r.setHours(0,0,0,0),r}};u();u();function AS(e,t,r){var w,E,A,P,j,D,k,z;let n=vf(),o=(z=(k=(P=(A=r==null?void 0:r.weekStartsOn)!=null?A:(E=(w=r==null?void 0:r.locale)==null?void 0:w.options)==null?void 0:E.weekStartsOn)!=null?P:n.weekStartsOn)!=null?k:(D=(j=n.locale)==null?void 0:j.options)==null?void 0:D.weekStartsOn)!=null?z:0,i=Nn(e,r==null?void 0:r.in),a=i.getDay(),h=(t%7+7)%7,m=7-o,y=t<0||t>6?t-(a+m)%7:(h+m)%7-(a+m)%7;return Mj(i,y,r)}var tq=class extends zr{constructor(){super(...arguments);St(this,"priority",90);St(this,"incompatibleTokens",["D","i","e","c","t","T"])}parse(r,n,o){switch(n){case"E":case"EE":case"EEE":return o.day(r,{width:"abbreviated",context:"formatting"})||o.day(r,{width:"short",context:"formatting"})||o.day(r,{width:"narrow",context:"formatting"});case"EEEEE":return o.day(r,{width:"narrow",context:"formatting"});case"EEEEEE":return o.day(r,{width:"short",context:"formatting"})||o.day(r,{width:"narrow",context:"formatting"});case"EEEE":default:return o.day(r,{width:"wide",context:"formatting"})||o.day(r,{width:"abbreviated",context:"formatting"})||o.day(r,{width:"short",context:"formatting"})||o.day(r,{width:"narrow",context:"formatting"})}}validate(r,n){return n>=0&&n<=6}set(r,n,o,i){return r=AS(r,o,i),r.setHours(0,0,0,0),r}};u();var rq=class extends zr{constructor(){super(...arguments);St(this,"priority",90);St(this,"incompatibleTokens",["y","R","u","q","Q","M","L","I","d","D","E","i","c","t","T"])}parse(r,n,o,i){let a=c=>{let h=Math.floor((c-1)/7)*7;return(c+i.weekStartsOn+6)%7+h};switch(n){case"e":case"ee":return ci(eo(n.length,r),a);case"eo":return ci(o.ordinalNumber(r,{unit:"day"}),a);case"eee":return o.day(r,{width:"abbreviated",context:"formatting"})||o.day(r,{width:"short",context:"formatting"})||o.day(r,{width:"narrow",context:"formatting"});case"eeeee":return o.day(r,{width:"narrow",context:"formatting"});case"eeeeee":return o.day(r,{width:"short",context:"formatting"})||o.day(r,{width:"narrow",context:"formatting"});case"eeee":default:return o.day(r,{width:"wide",context:"formatting"})||o.day(r,{width:"abbreviated",context:"formatting"})||o.day(r,{width:"short",context:"formatting"})||o.day(r,{width:"narrow",context:"formatting"})}}validate(r,n){return n>=0&&n<=6}set(r,n,o,i){return r=AS(r,o,i),r.setHours(0,0,0,0),r}};u();var nq=class extends zr{constructor(){super(...arguments);St(this,"priority",90);St(this,"incompatibleTokens",["y","R","u","q","Q","M","L","I","d","D","E","i","e","t","T"])}parse(r,n,o,i){let a=c=>{let h=Math.floor((c-1)/7)*7;return(c+i.weekStartsOn+6)%7+h};switch(n){case"c":case"cc":return ci(eo(n.length,r),a);case"co":return ci(o.ordinalNumber(r,{unit:"day"}),a);case"ccc":return o.day(r,{width:"abbreviated",context:"standalone"})||o.day(r,{width:"short",context:"standalone"})||o.day(r,{width:"narrow",context:"standalone"});case"ccccc":return o.day(r,{width:"narrow",context:"standalone"});case"cccccc":return o.day(r,{width:"short",context:"standalone"})||o.day(r,{width:"narrow",context:"standalone"});case"cccc":default:return o.day(r,{width:"wide",context:"standalone"})||o.day(r,{width:"abbreviated",context:"standalone"})||o.day(r,{width:"short",context:"standalone"})||o.day(r,{width:"narrow",context:"standalone"})}}validate(r,n){return n>=0&&n<=6}set(r,n,o,i){return r=AS(r,o,i),r.setHours(0,0,0,0),r}};u();u();function uHe(e,t,r){let n=Nn(e,r==null?void 0:r.in),o=oHe(n,r),i=t-o;return Mj(n,i,r)}var oq=class extends zr{constructor(){super(...arguments);St(this,"priority",90);St(this,"incompatibleTokens",["y","Y","u","q","Q","M","L","w","d","D","E","e","c","t","T"])}parse(r,n,o){let i=a=>a===0?7:a;switch(n){case"i":case"ii":return eo(n.length,r);case"io":return o.ordinalNumber(r,{unit:"day"});case"iii":return ci(o.day(r,{width:"abbreviated",context:"formatting"})||o.day(r,{width:"short",context:"formatting"})||o.day(r,{width:"narrow",context:"formatting"}),i);case"iiiii":return ci(o.day(r,{width:"narrow",context:"formatting"}),i);case"iiiiii":return ci(o.day(r,{width:"short",context:"formatting"})||o.day(r,{width:"narrow",context:"formatting"}),i);case"iiii":default:return ci(o.day(r,{width:"wide",context:"formatting"})||o.day(r,{width:"abbreviated",context:"formatting"})||o.day(r,{width:"short",context:"formatting"})||o.day(r,{width:"narrow",context:"formatting"}),i)}}validate(r,n){return n>=1&&n<=7}set(r,n,o){return r=uHe(r,o),r.setHours(0,0,0,0),r}};u();var iq=class extends zr{constructor(){super(...arguments);St(this,"priority",80);St(this,"incompatibleTokens",["b","B","H","k","t","T"])}parse(r,n,o){switch(n){case"a":case"aa":case"aaa":return o.dayPeriod(r,{width:"abbreviated",context:"formatting"})||o.dayPeriod(r,{width:"narrow",context:"formatting"});case"aaaaa":return o.dayPeriod(r,{width:"narrow",context:"formatting"});case"aaaa":default:return o.dayPeriod(r,{width:"wide",context:"formatting"})||o.dayPeriod(r,{width:"abbreviated",context:"formatting"})||o.dayPeriod(r,{width:"narrow",context:"formatting"})}}set(r,n,o){return r.setHours(CS(o),0,0,0),r}};u();var aq=class extends zr{constructor(){super(...arguments);St(this,"priority",80);St(this,"incompatibleTokens",["a","B","H","k","t","T"])}parse(r,n,o){switch(n){case"b":case"bb":case"bbb":return o.dayPeriod(r,{width:"abbreviated",context:"formatting"})||o.dayPeriod(r,{width:"narrow",context:"formatting"});case"bbbbb":return o.dayPeriod(r,{width:"narrow",context:"formatting"});case"bbbb":default:return o.dayPeriod(r,{width:"wide",context:"formatting"})||o.dayPeriod(r,{width:"abbreviated",context:"formatting"})||o.dayPeriod(r,{width:"narrow",context:"formatting"})}}set(r,n,o){return r.setHours(CS(o),0,0,0),r}};u();var sq=class extends zr{constructor(){super(...arguments);St(this,"priority",80);St(this,"incompatibleTokens",["a","b","t","T"])}parse(r,n,o){switch(n){case"B":case"BB":case"BBB":return o.dayPeriod(r,{width:"abbreviated",context:"formatting"})||o.dayPeriod(r,{width:"narrow",context:"formatting"});case"BBBBB":return o.dayPeriod(r,{width:"narrow",context:"formatting"});case"BBBB":default:return o.dayPeriod(r,{width:"wide",context:"formatting"})||o.dayPeriod(r,{width:"abbreviated",context:"formatting"})||o.dayPeriod(r,{width:"narrow",context:"formatting"})}}set(r,n,o){return r.setHours(CS(o),0,0,0),r}};u();var lq=class extends zr{constructor(){super(...arguments);St(this,"priority",70);St(this,"incompatibleTokens",["H","K","k","t","T"])}parse(r,n,o){switch(n){case"h":return Co(Lo.hour12h,r);case"ho":return o.ordinalNumber(r,{unit:"hour"});default:return eo(n.length,r)}}validate(r,n){return n>=1&&n<=12}set(r,n,o){let i=r.getHours()>=12;return i&&o<12?r.setHours(o+12,0,0,0):!i&&o===12?r.setHours(0,0,0,0):r.setHours(o,0,0,0),r}};u();var uq=class extends zr{constructor(){super(...arguments);St(this,"priority",70);St(this,"incompatibleTokens",["a","b","h","K","k","t","T"])}parse(r,n,o){switch(n){case"H":return Co(Lo.hour23h,r);case"Ho":return o.ordinalNumber(r,{unit:"hour"});default:return eo(n.length,r)}}validate(r,n){return n>=0&&n<=23}set(r,n,o){return r.setHours(o,0,0,0),r}};u();var cq=class extends zr{constructor(){super(...arguments);St(this,"priority",70);St(this,"incompatibleTokens",["h","H","k","t","T"])}parse(r,n,o){switch(n){case"K":return Co(Lo.hour11h,r);case"Ko":return o.ordinalNumber(r,{unit:"hour"});default:return eo(n.length,r)}}validate(r,n){return n>=0&&n<=11}set(r,n,o){return r.getHours()>=12&&o<12?r.setHours(o+12,0,0,0):r.setHours(o,0,0,0),r}};u();var pq=class extends zr{constructor(){super(...arguments);St(this,"priority",70);St(this,"incompatibleTokens",["a","b","h","H","K","t","T"])}parse(r,n,o){switch(n){case"k":return Co(Lo.hour24h,r);case"ko":return o.ordinalNumber(r,{unit:"hour"});default:return eo(n.length,r)}}validate(r,n){return n>=1&&n<=24}set(r,n,o){let i=o<=24?o%24:o;return r.setHours(i,0,0,0),r}};u();var fq=class extends zr{constructor(){super(...arguments);St(this,"priority",60);St(this,"incompatibleTokens",["t","T"])}parse(r,n,o){switch(n){case"m":return Co(Lo.minute,r);case"mo":return o.ordinalNumber(r,{unit:"minute"});default:return eo(n.length,r)}}validate(r,n){return n>=0&&n<=59}set(r,n,o){return r.setMinutes(o,0,0),r}};u();var dq=class extends zr{constructor(){super(...arguments);St(this,"priority",50);St(this,"incompatibleTokens",["t","T"])}parse(r,n,o){switch(n){case"s":return Co(Lo.second,r);case"so":return o.ordinalNumber(r,{unit:"second"});default:return eo(n.length,r)}}validate(r,n){return n>=0&&n<=59}set(r,n,o){return r.setSeconds(o,0),r}};u();var hq=class extends zr{constructor(){super(...arguments);St(this,"priority",30);St(this,"incompatibleTokens",["t","T"])}parse(r,n){let o=i=>Math.trunc(i*Math.pow(10,-n.length+3));return ci(eo(n.length,r),o)}set(r,n,o){return r.setMilliseconds(o),r}};u();var mq=class extends zr{constructor(){super(...arguments);St(this,"priority",10);St(this,"incompatibleTokens",["t","T","x"])}parse(r,n){switch(n){case"X":return _f(yf.basicOptionalMinutes,r);case"XX":return _f(yf.basic,r);case"XXXX":return _f(yf.basicOptionalSeconds,r);case"XXXXX":return _f(yf.extendedOptionalSeconds,r);case"XXX":default:return _f(yf.extended,r)}}set(r,n,o){return n.timestampIsSet?r:Mo(r,r.getTime()-Z_(r)-o)}};u();var gq=class extends zr{constructor(){super(...arguments);St(this,"priority",10);St(this,"incompatibleTokens",["t","T","X"])}parse(r,n){switch(n){case"x":return _f(yf.basicOptionalMinutes,r);case"xx":return _f(yf.basic,r);case"xxxx":return _f(yf.basicOptionalSeconds,r);case"xxxxx":return _f(yf.extendedOptionalSeconds,r);case"xxx":default:return _f(yf.extended,r)}}set(r,n,o){return n.timestampIsSet?r:Mo(r,r.getTime()-Z_(r)-o)}};u();var vq=class extends zr{constructor(){super(...arguments);St(this,"priority",40);St(this,"incompatibleTokens","*")}parse(r){return Fj(r)}set(r,n,o){return[Mo(r,o*1e3),{timestampIsSet:!0}]}};u();var yq=class extends zr{constructor(){super(...arguments);St(this,"priority",20);St(this,"incompatibleTokens","*")}parse(r){return Fj(r)}set(r,n,o){return[Mo(r,o),{timestampIsSet:!0}]}};var cHe={G:new zj,y:new Vj,Y:new Gj,R:new Hj,u:new Wj,Q:new $j,q:new Yj,M:new Zj,L:new Kj,w:new Xj,I:new Jj,d:new Qj,D:new eq,E:new tq,e:new rq,c:new nq,i:new oq,a:new iq,b:new aq,B:new sq,h:new lq,H:new uq,K:new cq,k:new pq,m:new fq,s:new dq,S:new hq,X:new mq,x:new gq,t:new vq,T:new yq};var gTr=/[yYQqMLwIdDecihHKkms]o|(\w)\1*|''|'(''|[^'])+('|$)|./g,vTr=/P+p+|P+|p+|''|'(''|[^'])+('|$)|./g,yTr=/^'([^]*?)'?$/,_Tr=/''/g,bTr=/\S/,xTr=/[a-zA-Z]/;function uoe(e,t,r,n){var D,k,z,V,G,K,Z,te,se,le,pe,me,_e,de,Ce,Ye,rt,ct;let o=()=>Mo((n==null?void 0:n.in)||r,NaN),i=nHe(),a=(k=(D=n==null?void 0:n.locale)!=null?D:i.locale)!=null?k:UO,c=(le=(se=(K=(G=n==null?void 0:n.firstWeekContainsDate)!=null?G:(V=(z=n==null?void 0:n.locale)==null?void 0:z.options)==null?void 0:V.firstWeekContainsDate)!=null?K:i.firstWeekContainsDate)!=null?se:(te=(Z=i.locale)==null?void 0:Z.options)==null?void 0:te.firstWeekContainsDate)!=null?le:1,h=(ct=(rt=(de=(_e=n==null?void 0:n.weekStartsOn)!=null?_e:(me=(pe=n==null?void 0:n.locale)==null?void 0:pe.options)==null?void 0:me.weekStartsOn)!=null?de:i.weekStartsOn)!=null?rt:(Ye=(Ce=i.locale)==null?void 0:Ce.options)==null?void 0:Ye.weekStartsOn)!=null?ct:0;if(!t)return e?o():Nn(r,n==null?void 0:n.in);let m={firstWeekContainsDate:c,weekStartsOn:h,locale:a},y=[new qj(n==null?void 0:n.in,r)],w=t.match(vTr).map(qe=>{let lt=qe[0];if(lt in BO){let bt=BO[lt];return bt(qe,a.formatLong)}return qe}).join("").match(gTr),E=[];for(let qe of w){!(n!=null&&n.useAdditionalWeekYearTokens)&&kj(qe)&&VO(qe,t,e),!(n!=null&&n.useAdditionalDayOfYearTokens)&&Lj(qe)&&VO(qe,t,e);let lt=qe[0],bt=cHe[lt];if(bt){let{incompatibleTokens:Tt}=bt;if(Array.isArray(Tt)){let pt=E.find(ot=>Tt.includes(ot.token)||ot.token===lt);if(pt)throw new RangeError(`The format string mustn't contain \`${pt.fullToken}\` and \`${qe}\` at the same time`)}else if(bt.incompatibleTokens==="*"&&E.length>0)throw new RangeError(`The format string mustn't contain \`${qe}\` and any other token at the same time`);E.push({token:lt,fullToken:qe});let et=bt.run(e,qe,a.match,m);if(!et)return o();y.push(et.setter),e=et.rest}else{if(lt.match(xTr))throw new RangeError("Format string contains an unescaped latin alphabet character `"+lt+"`");if(qe==="''"?qe="'":lt==="'"&&(qe=wTr(qe)),e.indexOf(qe)===0)e=e.slice(qe.length);else return o()}}if(e.length>0&&bTr.test(e))return o();let A=y.map(qe=>qe.priority).sort((qe,lt)=>lt-qe).filter((qe,lt,bt)=>bt.indexOf(qe)===lt).map(qe=>y.filter(lt=>lt.priority===qe).sort((lt,bt)=>bt.subPriority-lt.subPriority)).map(qe=>qe[0]),P=Nn(r,n==null?void 0:n.in);if(isNaN(+P))return o();let j={};for(let qe of A){if(!qe.validate(P,m))return o();let lt=qe.set(P,j,m);Array.isArray(lt)?(P=lt[0],Object.assign(j,lt[1])):P=lt}return P}function wTr(e){return e.match(yTr)[1].replace(_Tr,"'")}u();function pHe(e,t,r){let[n,o]=Aj(r==null?void 0:r.in,e,t);return n.getFullYear()===o.getFullYear()}u();function fHe(e,t){var m;let r=()=>Mo(t==null?void 0:t.in,NaN),n=(m=t==null?void 0:t.additionalDigits)!=null?m:2,o=ITr(e),i;if(o.date){let y=MTr(o.date,n);i=CTr(y.restDateString,y.year)}if(!i||isNaN(+i))return r();let a=+i,c=0,h;if(o.time&&(c=ATr(o.time),isNaN(c)))return r();if(o.timezone){if(h=OTr(o.timezone),isNaN(h))return r()}else{let y=new Date(a+c),w=Nn(0,t==null?void 0:t.in);return w.setFullYear(y.getUTCFullYear(),y.getUTCMonth(),y.getUTCDate()),w.setHours(y.getUTCHours(),y.getUTCMinutes(),y.getUTCSeconds(),y.getUTCMilliseconds()),w}return Nn(a+c+h,t==null?void 0:t.in)}var _q={dateTimeDelimiter:/[T ]/,timeZoneDelimiter:/[Z ]/i,timezone:/([Z+-].*)$/},ETr=/^-?(?:(\d{3})|(\d{2})(?:-?(\d{2}))?|W(\d{2})(?:-?(\d{1}))?|)$/,STr=/^(\d{2}(?:[.,]\d*)?)(?::?(\d{2}(?:[.,]\d*)?))?(?::?(\d{2}(?:[.,]\d*)?))?$/,TTr=/^([+-])(\d{2})(?::?(\d{2}))?$/;function ITr(e){let t={},r=e.split(_q.dateTimeDelimiter),n;if(r.length>2)return t;if(/:/.test(r[0])?n=r[0]:(t.date=r[0],n=r[1],_q.timeZoneDelimiter.test(t.date)&&(t.date=e.split(_q.timeZoneDelimiter)[0],n=e.substr(t.date.length,e.length))),n){let o=_q.timezone.exec(n);o?(t.time=n.replace(o[1],""),t.timezone=o[1]):t.time=n}return t}function MTr(e,t){let r=new RegExp("^(?:(\\d{4}|[+-]\\d{"+(4+t)+"})|(\\d{2}|[+-]\\d{"+(2+t)+"})$)"),n=e.match(r);if(!n)return{year:NaN,restDateString:""};let o=n[1]?parseInt(n[1]):null,i=n[2]?parseInt(n[2]):null;return{year:i===null?o:i*100,restDateString:e.slice((n[1]||n[2]).length)}}function CTr(e,t){if(t===null)return new Date(NaN);let r=e.match(ETr);if(!r)return new Date(NaN);let n=!!r[4],o=HO(r[1]),i=HO(r[2])-1,a=HO(r[3]),c=HO(r[4]),h=HO(r[5])-1;if(n)return kTr(t,c,h)?PTr(t,c,h):new Date(NaN);{let m=new Date(0);return!NTr(t,i,a)||!LTr(t,o)?new Date(NaN):(m.setUTCFullYear(t,i,Math.max(o,a)),m)}}function HO(e){return e?parseInt(e):1}function ATr(e){let t=e.match(STr);if(!t)return NaN;let r=coe(t[1]),n=coe(t[2]),o=coe(t[3]);return RTr(r,n,o)?r*zO+n*qO+o*1e3:NaN}function coe(e){return e&&parseFloat(e.replace(",","."))||0}function OTr(e){if(e==="Z")return 0;let t=e.match(TTr);if(!t)return 0;let r=t[1]==="+"?-1:1,n=parseInt(t[2]),o=t[3]&&parseInt(t[3])||0;return jTr(n,o)?r*(n*zO+o*qO):NaN}function PTr(e,t,r){let n=new Date(0);n.setUTCFullYear(e,0,4);let o=n.getUTCDay()||7,i=(t-1)*7+r+1-o;return n.setUTCDate(n.getUTCDate()+i),n}var DTr=[31,null,31,30,31,30,31,31,30,31,30,31];function dHe(e){return e%400===0||e%4===0&&e%100!==0}function NTr(e,t,r){return t>=0&&t<=11&&r>=1&&r<=(DTr[t]||(dHe(e)?29:28))}function LTr(e,t){return t>=1&&t<=(dHe(e)?366:365)}function kTr(e,t,r){return t>=1&&t<=53&&r>=0&&r<=6}function RTr(e,t,r){return e===24?t===0&&r===0:r>=0&&r<60&&t>=0&&t<60&&e>=0&&e<25}function jTr(e,t){return t>=0&&t<=59}var OS=class e{constructor({metadata:t,geometry:r}){St(this,"metadata",{});St(this,"geometry",{});if(this.constructor===e)throw new Error(`Abstract class '${this.constructor}' cannot be instantiated.`);this.metadata=t,this.geometry=r}getGeometry(){return this.geometry}getId(){return this.metadata.id}getMetadata(t){return Te(t)?this.metadata[t]:this.metadata}updateMetadata(t,r){if(!Te(t)){console.error("Cannot update metadata without key");return}if(!Object.values(Ue).includes(t)){console.error(`Cannot update metadata with invalid key '${t}'`);return}this.metadata[t]=r}getSortTime(){let t=this.metadata[Ue.timePeriod][0];return GO(t)}getDisplayTime(){let[t,r]=this.metadata[Ue.timePeriod];return pHe(t,r)?GO(t):`${GO(t)} \u2013 ${GO(r)}`}addLayerToMap(){throw new Error("Method 'addLayerToMap' must be implemented.")}isDisplayedInMap(){throw new Error("Method 'isDisplayedInMap' must be implemented.")}getType(){throw new Error("Method 'getType' must be implemented.")}setOpacity(){throw new Error("Method 'setOpacity' must be implemented.")}getOpacity(){throw new Error("Method 'getOpacity' must be implemented.")}moveToTop(){throw new Error("Method 'moveToTop' must be implemented.")}move(){throw new Error("Method 'move' must be implemented.")}getMapLibreLayerId(){throw new Error("Method 'getMapLibreLayerId' must be implemented.")}removeLayer(){throw new Error("Method 'removeLayer' must be implemented.")}setVisibility(){throw new Error("Method 'setVisibility' must be implemented.")}isVisible(){throw new Error("Method 'isVisible' must be implemented.")}serialize(){throw new Error("Method 'serialize' must be implemented.")}};u();u();var xq=Q(De(),1);u();u();var WO=Q(De(),1);var bq=Q(It(),1);var hHe=(e,{sourceId:t,fillId:r,outlineId:n})=>{e.addSource(t,{type:"geojson",data:{type:"FeatureCollection",features:[]}}),e.addLayer({id:r,type:"fill",source:t,paint:{"fill-color":"#ff0000","fill-opacity":.2}}),e.addLayer({id:n,type:"line",source:t,paint:{"line-color":"#ff0000","line-width":1}})},qTr=(e,{sourceId:t,fillId:r,outlineId:n})=>{e.getLayer(r)&&e.removeLayer(r),e.getLayer(n)&&e.removeLayer(n),e.getSource(t)&&e.removeSource(t)},mHe=e=>{let t=_t(Qt);return(0,WO.useEffect)(()=>{if(Te(t)){let r=()=>{hHe(t,Se({},e))};return t._loaded?hHe(t,Se({},e)):t.once("load",r),()=>{qTr(t,Se({},e)),t.off("load",r)}}},[t]),WO.default.createElement(WO.default.Fragment,null)};mHe.propTypes={sourceId:bq.default.string.isRequired,fillId:bq.default.string.isRequired,outlineId:bq.default.string.isRequired};var gHe=mHe;var vHe=gHe;var yHe="vkf-map-overlay-source",Uu="vkf-map-overlay-fill",zTr="vkf-map-overlay-outline",poe=(e,t)=>{let r=e.getSource(yHe);r&&r.setData(t)},_He=()=>xq.default.createElement(xq.default.Fragment,null,xq.default.createElement(vHe,{sourceId:yHe,fillId:Uu,outlineId:zTr}));_He.propTypes={};var bHe=_He;var xHe=(e,t,r,n)=>{var a,c;let o=e.getId();t.addSource(o,Pt(Se({type:"raster"},r),{bounds:e.getMetadata(Ue.bounds)}));let i=t.getLayer(Uu)!==void 0?Uu:void 0;t.addLayer({id:o,type:"raster",metadata:{[_p.id]:o},source:o,layout:{visibility:(a=n==null?void 0:n.visibility)!=null?a:"visible"},paint:{"raster-opacity":(c=n==null?void 0:n.opacity)!=null?c:1}},i)};u();u();u();var bp=6371008.8,D7n={centimeters:bp*100,centimetres:bp*100,degrees:360/(2*Math.PI),feet:bp*3.28084,inches:bp*39.37,kilometers:bp/1e3,kilometres:bp/1e3,meters:bp,metres:bp,miles:bp/1609.344,millimeters:bp*1e3,millimetres:bp*1e3,nauticalmiles:bp/1852,radians:1,yards:bp*1.0936};function EHe(e,t,r={}){let n={type:"Feature"};return(r.id===0||r.id)&&(n.id=r.id),r.bbox&&(n.bbox=r.bbox),n.properties=t||{},n.geometry=e,n}function SHe(e,t,r={}){if(!e)throw new Error("coordinates is required");if(!Array.isArray(e))throw new Error("coordinates must be an Array");if(e.length<2)throw new Error("coordinates must be at least 2 numbers long");if(!wHe(e[0])||!wHe(e[1]))throw new Error("coordinates must contain numbers");return EHe({type:"Point",coordinates:e},t,r)}function THe(e,t,r={}){for(let o of e){if(o.length<4)throw new Error("Each LinearRing of a Polygon must have 4 or more Positions.");if(o[o.length-1].length!==o[0].length)throw new Error("First and last Position are not equivalent.");for(let i=0;i<o[o.length-1].length;i++)if(o[o.length-1][i]!==o[0][i])throw new Error("First and last Position are not equivalent.")}return EHe({type:"Polygon",coordinates:e},t,r)}function IHe(e,t={}){let r={type:"FeatureCollection"};return t.id&&(r.id=t.id),t.bbox&&(r.bbox=t.bbox),r.features=e,r}function wHe(e){return!isNaN(e)&&e!==null&&!Array.isArray(e)}function $O(e,t,r){if(e!==null)for(var n,o,i,a,c,h,m,y=0,w=0,E,A=e.type,P=A==="FeatureCollection",j=A==="Feature",D=P?e.features.length:1,k=0;k<D;k++){m=P?e.features[k].geometry:j?e.geometry:e,E=m?m.type==="GeometryCollection":!1,c=E?m.geometries.length:1;for(var z=0;z<c;z++){var V=0,G=0;if(a=E?m.geometries[z]:m,a!==null){h=a.coordinates;var K=a.type;switch(y=r&&(K==="Polygon"||K==="MultiPolygon")?1:0,K){case null:break;case"Point":if(t(h,w,k,V,G)===!1)return!1;w++,V++;break;case"LineString":case"MultiPoint":for(n=0;n<h.length;n++){if(t(h[n],w,k,V,G)===!1)return!1;w++,K==="MultiPoint"&&V++}K==="LineString"&&V++;break;case"Polygon":case"MultiLineString":for(n=0;n<h.length;n++){for(o=0;o<h[n].length-y;o++){if(t(h[n][o],w,k,V,G)===!1)return!1;w++}K==="MultiLineString"&&V++,K==="Polygon"&&G++}K==="Polygon"&&V++;break;case"MultiPolygon":for(n=0;n<h.length;n++){for(G=0,o=0;o<h[n].length;o++){for(i=0;i<h[n][o].length-y;i++){if(t(h[n][o][i],w,k,V,G)===!1)return!1;w++}G++}V++}break;case"GeometryCollection":for(n=0;n<a.geometries.length;n++)if($O(a.geometries[n],t,r)===!1)return!1;break;default:throw new Error("Unknown Geometry Type")}}}}}function PS(e,t={}){if(e.bbox!=null&&t.recompute!==!0)return e.bbox;let r=[1/0,1/0,-1/0,-1/0];return $O(e,n=>{r[0]>n[0]&&(r[0]=n[0]),r[1]>n[1]&&(r[1]=n[1]),r[2]<n[0]&&(r[2]=n[0]),r[3]<n[1]&&(r[3]=n[1])}),r}var MHe=PS;var YO,wq,CHe,foe=class extends OS{constructor({metadata:r,geometry:n}){super({metadata:r,geometry:n});Ga(this,wq);Ga(this,YO,!1);pa(this,wq,CHe).call(this)}addLayerToMap(r,{sourceSettings:n,layerSettings:o}){if(r.getSource(this.getId())){console.error(`Source with id '${this.getId()}' exists already in map.`);return}return xHe(this,r,n,o)}addToOverlay(r,n){let o=r.getSource(n);if(o){let i=this.getPreviewFeature();i.id=this.getId();let a=[i];o.updateData({add:a})}}removeFromOverlay(r,n){let o=r.getSource(n);if(o){let i=[this.getId()];o.updateData({remove:i})}}getPreviewFeature(){return{type:"Feature",properties:{},geometry:this.geometry}}isDisplayedInMap(r){return r.getSource(this.getId())!==void 0&&r.getLayer(this.getId())!==void 0}getType(){return go.HISTORIC_MAP}setOpacity(r,n){r.getLayer(this.getId())&&r.setPaintProperty(this.getId(),"raster-opacity",n)}getOpacity(r){var n;return r.getLayer(this.getId())?(n=r.getPaintProperty(this.getId(),"raster-opacity"))!=null?n:1:null}moveToTop(r){this.move(r,null)}move(r,n){let o=n;Te(n)||(Te(r.getLayer(Uu))?o=Uu:o=null),r.moveLayer(this.getId(),o)}getMapLibreLayerId(){return this.getId()}removeMapLibreLayers(r){r.getLayer(this.getMapLibreLayerId())&&r.removeLayer(this.getMapLibreLayerId()),r.getSource(this.getId())&&r.removeSource(this.getId())}setVisibility(r,n){r.setLayoutProperty(this.getMapLibreLayerId(),"visibility",n)}isVisible(r){return r.getLayoutProperty(this.getMapLibreLayerId(),"visibility")==="visible"}isMissing(){return qr(this,YO)}setIsMissing(r){Ha(this,YO,r)}};YO=new WeakMap,wq=new WeakSet,CHe=function(){let r=this.geometry?PS(this.geometry):void 0;this.metadata[Ue.bounds]=r};var AHe=foe;var Rg=AHe;u();u();u();u();u();u();u();var ZO=class extends Date{constructor(){super(),this.setTime(arguments.length===0?Date.now():arguments.length===1?typeof arguments[0]=="string"?+new Date(arguments[0]):arguments[0]:Date.UTC(...arguments))}getTimezoneOffset(){return 0}},OHe=/^(get|set)(?!UTC)/;Object.getOwnPropertyNames(Date.prototype).forEach(e=>{if(OHe.test(e)){let t=Date.prototype[e.replace(OHe,"$1UTC")];t&&(ZO.prototype[e]=t)}});var Eq=class extends ZO{toString(){let t=this.toDateString(),r=this.toTimeString();return`${t} ${r}`}toDateString(){let t=FTr.format(this),r=UTr.format(this),n=this.getFullYear();return`${t} ${r} ${n}`}toTimeString(){return`${BTr.format(this)} GMT+0000 (Coordinated Universal Time)`}toLocaleString(t,r){return Date.prototype.toLocaleString.call(this,t,Se({timeZone:"UTC"},r))}toLocaleDateString(t,r){return Date.prototype.toLocaleDateString.call(this,t,Se({timeZone:"UTC"},r))}toLocaleTimeString(t,r){return Date.prototype.toLocaleTimeString.call(this,t,Se({timeZone:"UTC"},r))}},FTr=new Intl.DateTimeFormat("en-US",{weekday:"short",timeZone:"UTC"}),UTr=new Intl.DateTimeFormat("en-US",{month:"short",day:"numeric",timeZone:"UTC"}),BTr=new Intl.DateTimeFormat("en-GB",{hour12:!1,hour:"numeric",minute:"numeric",second:"numeric",timeZone:"UTC"});u();var s0=e=>new Eq(+new Date(e));var DS={en:"MM/dd/yyyy",de:"dd.MM.yyyy"},PHe={en:/^[0-9]{2}\/[0-9]{2}\/[0-9]{4}$/,de:/^[0-9]{2}\.[0-9]{2}\.[0-9]{4}$/};function Ol(e){let t=mr.getSettings().LANGUAGE_CODE,r=new Date(e);return Kh(r)?Object.hasOwn(DS,t)?loe(r,DS[t],{in:s0}):loe(r,DS[gf.EN],{in:s0}):e}function Mc(e){let t=mr.getSettings().LANGUAGE_CODE,r=new Date;return Object.hasOwn(DS,t)?uoe(e,DS[t],r,{in:s0}):uoe(e,DS[gf.EN],r,{in:s0})}function l0(e,t={}){let r="";try{r=rHe(e,Pt(Se({},t),{in:s0}))}catch(n){r=""}return r}function Sq(e){return!Te(e)||!wS(e)?new Date("invalid"):fHe(e,{in:s0})}function Kh(e){return Oj(e)}function doe(e){let t=mr.getSettings().LANGUAGE_CODE;return Object.hasOwn(PHe,t)?PHe[t].test(e)&&!Number.isNaN(Mc(e).valueOf()):!Number.isNaN(Mc(e).valueOf())}function jg(e){return FO(e,{in:s0})}function KO(e){return Te(e)?iHe(e):Number.NaN}function DHe(){return[l0(Date.now(),{representation:"date"}),l0(Date.now(),{representation:"date"})]}u();u();var Mr={SYMBOL:"symbol",LINE:"line",FILL:"fill",OUTLINE:"outline"},XO={[Mr.LINE]:"line-opacity",[Mr.FILL]:"fill-opacity",[Mr.OUTLINE]:"outline-opacity"},hoe={[Mr.LINE]:"stroke-opacity",[Mr.FILL]:"fill-opacity",[Mr.OUTLINE]:"stroke-opacity"},moe=e=>Object.keys(hoe).includes(e),fn={[Mr.SYMBOL]:{COLOR:"#0000FF"},[Mr.LINE]:{COLOR:"#00FF00",WIDTH:3,OPACITY:1},[Mr.OUTLINE]:{COLOR:"#0000FF",WIDTH:1,OPACITY:1},[Mr.FILL]:{COLOR:"#FFFF00",OPACITY:.27}},goe={[Mr.SYMBOL]:{type:"symbol",layout:{"icon-image":mr.getSettings().MARKER_IMAGE_ID,"icon-size":.5,"icon-anchor":"bottom","icon-allow-overlap":!0},paint:{"icon-color":["to-color",["feature-state","marker"],["get","marker"],fn[Mr.SYMBOL].COLOR],"icon-halo-color":"#FFF","icon-halo-width":1},filter:["==",["geometry-type"],"Point"]},[Mr.LINE]:{type:"line",paint:{"line-color":["coalesce",["feature-state","stroke"],["get","stroke"],fn[Mr.LINE].COLOR],"line-width":["coalesce",["feature-state","stroke-width"],["get","stroke-width"],fn[Mr.LINE].WIDTH],"line-opacity":["coalesce",["feature-state","stroke-opacity"],["get","stroke-opacity"],fn[Mr.LINE].OPACITY]},filter:["==",["geometry-type"],"LineString"]},[Mr.OUTLINE]:{type:"line",paint:{"line-color":["coalesce",["feature-state","stroke"],["get","stroke"],fn[Mr.OUTLINE].COLOR],"line-width":["coalesce",["feature-state","stroke-width"],["get","stroke-width"],fn[Mr.OUTLINE].WIDTH],"line-opacity":["coalesce",["feature-state","stroke-opacity"],["get","stroke-opacity"],fn[Mr.OUTLINE].OPACITY]},filter:["==",["geometry-type"],"Polygon"]},[Mr.FILL]:{type:"fill",paint:{"fill-color":["coalesce",["feature-state","fill"],["get","fill"],fn[Mr.FILL].COLOR],"fill-opacity":["coalesce",["feature-state","fill-opacity"],["get","fill-opacity"],fn[Mr.FILL].OPACITY]},filter:["==",["geometry-type"],"Polygon"]}};var Ln={imgLink:"img_link",title:"title",description:"description",time:"time",marker:"marker",fill:"fill",fillOpacity:"fill-opacity",stroke:"stroke",strokeWidth:"stroke-width",strokeOpacity:"stroke-opacity"},u0={type:"FeatureCollection",features:[]},NHe={Point:{marker:fn[Mr.SYMBOL].COLOR},MultiPoint:{marker:fn[Mr.SYMBOL].COLOR},Polygon:{fill:fn[Mr.FILL].COLOR,"fill-opacity":fn[Mr.FILL].OPACITY,stroke:fn[Mr.OUTLINE].COLOR,"stroke-opacity":fn[Mr.OUTLINE].OPACITY,"stroke-width":fn[Mr.OUTLINE].WIDTH},MultiPolygon:{fill:fn[Mr.FILL].COLOR,"fill-opacity":fn[Mr.FILL].OPACITY,stroke:fn[Mr.OUTLINE].COLOR,"stroke-opacity":fn[Mr.OUTLINE].OPACITY,"stroke-width":fn[Mr.OUTLINE].WIDTH},LineString:{stroke:fn[Mr.LINE].COLOR,"stroke-opacity":fn[Mr.LINE].OPACITY,"stroke-width":fn[Mr.LINE].WIDTH},MultiLineString:{stroke:fn[Mr.LINE].COLOR,"stroke-opacity":fn[Mr.LINE].OPACITY,"stroke-width":fn[Mr.LINE].WIDTH},GeometryCollection:{fill:fn[Mr.FILL].COLOR,"fill-opacity":fn[Mr.FILL].OPACITY,stroke:fn[Mr.LINE].COLOR,"stroke-opacity":fn[Mr.LINE].OPACITY,"stroke-width":fn[Mr.LINE].WIDTH}},JO={marker:{type:"color"},fill:{type:"color"},"fill-opacity":{step:.05,min:0,max:1,type:"number"},stroke:{type:"color"},"stroke-opacity":{max:1,min:0,step:.05,type:"number"},"stroke-width":{step:.1,min:0,max:20,type:"number"}},voe=Object.keys(JO),NS=[Ln.time,Ln.title,Ln.imgLink,Ln.description],Bu={POINT:"Point",MULTI_POINT:"MultiPoint",POLYGON:"Polygon",MULTI_POLYGON:"MultiPolygon",LINE_STRING:"LineString",MULTI_LINE_STRING:"MultiLineString",GEOMETRY_COLLECTION:"GeometryCollection"},Za={LOCAL:"local",REMOTE:"remote"};var LHe=e=>({type:"Polygon",coordinates:[[[e[0],e[1]],[e[2],e[1]],[e[2],e[3]],[e[0],e[3]],[e[0],e[1]]]]}),yoe=e=>{let{properties:t}=e,r=GTr(t);return Pt(Se({},e),{properties:r})},_oe=e=>{Object.hasOwn(e,"properties")||(e.properties={});let{properties:t}=e,r=VTr(t);return Pt(Se({},e),{properties:r})},VTr=e=>{let t=e[Ln.time],r=HTr(t);return r.length===0?(delete e[Ln.time],e):Pt(Se({},e),{[Ln.time]:r})},GTr=e=>{let t=e[Ln.time],r=WTr(t);return r.length===0?(delete e[Ln.time],e):Pt(Se({},e),{[Ln.time]:r})},HTr=e=>{if(Array.isArray(e)){if(e.length!==2)return[];let t=jg(Sq(e[0])).valueOf(),r=jg(Sq(e[1])).valueOf();return Number.isNaN(t)||Number.isNaN(r)?[]:t>r?[r,t]:[t,r]}if(wS(e)){let t=jg(Sq(e)).valueOf();return Number.isNaN(e)?[]:[t,t]}return[]},WTr=e=>{if(!Array.isArray(e))return[];if(e.length!==2)return[];let t=l0(e[0]),r=l0(e[1]);return t===""||r===""?[]:[t,r]},Tq=e=>{if(!Te(e))return[];let[t,r]=e;return!Te(t)||!Te(r)?[]:["any",["!",["has",Ln.time]],["all",["<=",["at",0,["get",Ln.time]],r*1e3],[">=",["at",1,["get",Ln.time]],t*1e3]]]};u();u();var kHe=e=>{let t={};for(let r of Object.keys(Mr)){let n=Mr[r],o=`${e}-${n}`;t[o]=Pt(Se({id:o,source:e,metadata:{[_p.id]:e}},goe[n]),{layout:Pt(Se({},goe[n].layout),{visibility:"visible"})})}return t};u();var boe=class e{constructor(){if(this.constructor===e)throw new Error(`Abstract class '${this.constructor}' cannot be instantiated.`)}addLayerToMap(){throw new Error("Method 'addLayerToMap' must be implemented.")}removeLayerFromMap(){throw new Error("Method 'removeLayerFromMap' must be implemented.")}setDataOnMap(){throw new Error("Method 'setDataOnMap' must be implemented.")}getOpacity(){throw new Error("Method 'getOpacity' must be implemented.")}setOpacity(){throw new Error("Method 'setOpacity' must be implemented.")}isVisible(){throw new Error("Method 'isVisible' must be implemented.")}setVisibility(){throw new Error("Method 'setVisibility' must be implemented.")}isDisplayedInMap(){throw new Error("Method 'isDisplayedInMap' must be implemented.")}getLayerId(){throw new Error("Method 'getLayerId' must be implemented.")}move(){throw new Error("Method 'move' must be implemented.")}setFilters(){throw new Error("Method 'setFilters' must be implemented.")}resetFilters(){throw new Error("Method 'resetFilters' must be implemented.")}},Iq=boe;var RHe=[{type:"mousemove",handler:e=>e.target.getCanvas().style.cursor="pointer"},{type:"mouseleave",handler:e=>e.target.getCanvas().style.cursor=""}],c0,p0,LS,cu,jHe,qHe,Xh,xoe=class extends Iq{constructor(r){super();Ga(this,cu);Ga(this,c0,null);Ga(this,p0,[]);Ga(this,LS,{});Ha(this,c0,r)}addLayerToMap(r,n,o){var h,m;if(!Te(r))return;let i=qr(this,c0),a=kHe(i);r.addSource(i,{type:"geojson",data:o});let c=r.getLayer(Uu)!==void 0?Uu:void 0;for(let[y,w]of Object.entries(a))r.addLayer(w,c),qr(this,p0).push(y),qr(this,LS)[y]=w.filter;if(Te(n)){let{layerSettings:y}=n,w=(h=y==null?void 0:y.opacity)!=null?h:1,E=(m=y==null?void 0:y.visibility)!=null?m:"visible";this.setOpacity(r,w),this.setVisibility(r,E)}pa(this,cu,jHe).call(this,r)}removeLayerFromMap(r){if(Te(r)){for(let{id:n}of pa(this,cu,Xh).call(this,r))pa(this,cu,qHe).call(this,r,n),r.removeLayer(n);r.removeSource(qr(this,c0)),Ha(this,p0,[])}}setDataOnMap(r,n){let o=r.getSource(qr(this,c0));if(!Te(o)){console.error("Cannot update geojson on map. Source layer not found");return}o.setData(n)}getOpacity(r){let n=pa(this,cu,Xh).call(this,r),o=1,i=1;if(n.length===0)return null;for(let{id:a,type:c}of n){if(!moe(c))continue;let h=XO[c];o=r.getPaintProperty(a,h);break}if(typeof o=="number")return o;if(Array.isArray(o)&&o.length>0){if(o[0]==="*")return o[2];if(o[0]==="coalesce")return o[3]}return i}setOpacity(r,n){let o=pa(this,cu,Xh).call(this,r);if(!(o.length===0||!Te(n)))for(let{id:i,type:a}of o){if(!moe(a))continue;let c=fn[a].OPACITY,h=XO[a],m=hoe[a];r.setPaintProperty(i,h,["*",["coalesce",["feature-state",m],["get",m],c],n])}}isVisible(r){let n=pa(this,cu,Xh).call(this,r);return n.length===0?!1:r.getLayoutProperty(n[0].id,"visibility")==="visible"}setVisibility(r,n){let o=pa(this,cu,Xh).call(this,r);if(!(o.length===0||!Te(n)))for(let{id:i}of o)r.setLayoutProperty(i,"visibility",n)}isDisplayedInMap(r){return r.getSource(qr(this,c0))!==void 0}getLayerId(){return qr(this,p0).length>0?qr(this,p0)[0]:null}move(r,n){let o=pa(this,cu,Xh).call(this,r),i=n;Te(n)||(Te(r.getLayer(Uu))?i=Uu:i=null),o.forEach(({id:a})=>{r.moveLayer(a,i)})}setFilters(r,n){let o=pa(this,cu,Xh).call(this,r);if(o.length===0)return;let i=n==null?void 0:n.timeExtent,a=Tq(i);for(let c of o){let{id:h}=c,y=["all",qr(this,LS)[h]];Te(a)&&a.length>0&&y.push(a),r.setFilter(h,y)}}resetFilters(r){let n=pa(this,cu,Xh).call(this,r);if(n.length!==0)for(let o of n){let{id:i}=o,a=qr(this,LS)[i];r.setFilter(i,a)}}};c0=new WeakMap,p0=new WeakMap,LS=new WeakMap,cu=new WeakSet,jHe=function(r){for(let{id:n}of pa(this,cu,Xh).call(this,r))for(let{type:o,handler:i}of RHe)r.on(o,n,i)},qHe=function(r,n){for(let{type:o,handler:i}of RHe)r.off(o,n,i)},Xh=function(r){let n=qr(this,p0).map(o=>r.getLayer(o));return n[0]===void 0?[]:n};var zHe=xoe;u();u();var UWe=Q(jO(),1);u();u();var Mq={},$Tr=()=>{let e=ir(({set:r})=>(n,o)=>{r(n,o)},[]),t=ir(({snapshot:r})=>n=>vt(null,null,function*(){return r.getPromise(n)}),[]);return Mq.setState=e,Mq.getStateAsync=t,null},woe=(e,t)=>Mq.setState(e,t),Cq=e=>vt(null,null,function*(){return Mq.getStateAsync(e)}),FHe=$Tr;var UHe=FHe;u();var ra={hoverPolygon:"hover_polygon",contentCertainty:"content_certainty",temporalCertainty:"temporal_certainty",spatialCertainty:"spatial_certainty",permalink:"permanent_link",parentLabel:"parent_label",tags:"tag",timeLabelDe:"time_label_edtf_de",timeLabelEn:"time_label_edtf_en",idohistLightColor:"idohist_light_color",idohistDarkColor:"idohist_dark_color"},Aq="#00b19e",QO="#00927E",X_={fill:.4,line:1},eP=["all",["==",["geometry-type"],"Polygon"],["==",["id"],"NON_EXISTING_ID"]],Oq={fill:{type:"fill",paint:{"fill-color":["coalesce",["get","idohist_light_color"],Aq],"fill-opacity":X_.fill},filter:eP},outline:{type:"line",paint:{"line-color":["coalesce",["get","idohist_dark_color"],QO],"line-width":2,"line-opacity":X_.line},filter:eP}},BHe={line:{type:"line",paint:{"line-color":["coalesce",["get","idohist_dark_color"],QO],"line-width":2,"line-opacity":X_.line},filter:["==",["geometry-type"],"LineString"]},fill:{type:"fill",paint:{"fill-color":["coalesce",["get","idohist_light_color"],Aq],"fill-opacity":X_.fill},filter:["==",["geometry-type"],"Polygon"]},outline:{type:"line",paint:{"line-color":["coalesce",["get","idohist_dark_color"],QO],"line-width":2,"line-opacity":X_.line},filter:["==",["geometry-type"],"Polygon"]}};u();u();u();u();function Pl(e){return function(){return e}}u();var Eoe=Math.abs,Dl=Math.atan2,f0=Math.cos,VHe=Math.max,Pq=Math.min,Ld=Math.sin,J_=Math.sqrt,Vu=1e-12,kS=Math.PI,tP=kS/2,RS=2*kS;function GHe(e){return e>1?0:e<-1?kS:Math.acos(e)}function Soe(e){return e>=1?tP:e<=-1?-tP:Math.asin(e)}u();u();u();var Toe=Math.PI,Ioe=2*Toe,Q_=1e-6,YTr=Ioe-Q_;function HHe(e){this._+=e[0];for(let t=1,r=e.length;t<r;++t)this._+=arguments[t]+e[t]}function ZTr(e){let t=Math.floor(e);if(!(t>=0))throw new Error(`invalid digits: ${e}`);if(t>15)return HHe;let r=ag(10,t);return function(n){this._+=n[0];for(let o=1,i=n.length;o<i;++o)this._+=Math.round(arguments[o]*r)/r+n[o]}}var eb=class{constructor(t){this._x0=this._y0=this._x1=this._y1=null,this._="",this._append=t==null?HHe:ZTr(t)}moveTo(t,r){this._append`M${this._x0=this._x1=+t},${this._y0=this._y1=+r}`}closePath(){this._x1!==null&&(this._x1=this._x0,this._y1=this._y0,this._append`Z`)}lineTo(t,r){this._append`L${this._x1=+t},${this._y1=+r}`}quadraticCurveTo(t,r,n,o){this._append`Q${+t},${+r},${this._x1=+n},${this._y1=+o}`}bezierCurveTo(t,r,n,o,i,a){this._append`C${+t},${+r},${+n},${+o},${this._x1=+i},${this._y1=+a}`}arcTo(t,r,n,o,i){if(t=+t,r=+r,n=+n,o=+o,i=+i,i<0)throw new Error(`negative radius: ${i}`);let a=this._x1,c=this._y1,h=n-t,m=o-r,y=a-t,w=c-r,E=y*y+w*w;if(this._x1===null)this._append`M${this._x1=t},${this._y1=r}`;else if(E>Q_)if(!(Math.abs(w*h-m*y)>Q_)||!i)this._append`L${this._x1=t},${this._y1=r}`;else{let A=n-a,P=o-c,j=h*h+m*m,D=A*A+P*P,k=Math.sqrt(j),z=Math.sqrt(E),V=i*Math.tan((Toe-Math.acos((j+E-D)/(2*k*z)))/2),G=V/z,K=V/k;Math.abs(G-1)>Q_&&this._append`L${t+G*y},${r+G*w}`,this._append`A${i},${i},0,0,${+(w*A>y*P)},${this._x1=t+K*h},${this._y1=r+K*m}`}}arc(t,r,n,o,i,a){if(t=+t,r=+r,n=+n,a=!!a,n<0)throw new Error(`negative radius: ${n}`);let c=n*Math.cos(o),h=n*Math.sin(o),m=t+c,y=r+h,w=1^a,E=a?o-i:i-o;this._x1===null?this._append`M${m},${y}`:(Math.abs(this._x1-m)>Q_||Math.abs(this._y1-y)>Q_)&&this._append`L${m},${y}`,n&&(E<0&&(E=E%Ioe+Ioe),E>YTr?this._append`A${n},${n},0,1,${w},${t-c},${r-h}A${n},${n},0,1,${w},${this._x1=m},${this._y1=y}`:E>Q_&&this._append`A${n},${n},0,${+(E>=Toe)},${w},${this._x1=t+n*Math.cos(i)},${this._y1=r+n*Math.sin(i)}`)}rect(t,r,n,o){this._append`M${this._x0=this._x1=+t},${this._y0=this._y1=+r}h${n=+n}v${+o}h${-n}Z`}toString(){return this._}};function WHe(){return new eb}WHe.prototype=eb.prototype;function $He(e){let t=3;return e.digits=function(r){if(!arguments.length)return t;if(r==null)t=null;else{let n=Math.floor(r);if(!(n>=0))throw new RangeError(`invalid digits: ${r}`);t=n}return e},()=>new eb(t)}function KTr(e){return e.innerRadius}function XTr(e){return e.outerRadius}function JTr(e){return e.startAngle}function QTr(e){return e.endAngle}function e2r(e){return e&&e.padAngle}function t2r(e,t,r,n,o,i,a,c){var h=r-e,m=n-t,y=a-o,w=c-i,E=w*h-y*m;if(!(E*E<Vu))return E=(y*(t-i)-w*(e-o))/E,[e+E*h,t+E*m]}function Dq(e,t,r,n,o,i,a){var c=e-r,h=t-n,m=(a?i:-i)/J_(c*c+h*h),y=m*h,w=-m*c,E=e+y,A=t+w,P=r+y,j=n+w,D=(E+P)/2,k=(A+j)/2,z=P-E,V=j-A,G=z*z+V*V,K=o-i,Z=E*j-P*A,te=(V<0?-1:1)*J_(VHe(0,K*K*G-Z*Z)),se=(Z*V-z*te)/G,le=(-Z*z-V*te)/G,pe=(Z*V+z*te)/G,me=(-Z*z+V*te)/G,_e=se-D,de=le-k,Ce=pe-D,Ye=me-k;return _e*_e+de*de>Ce*Ce+Ye*Ye&&(se=pe,le=me),{cx:se,cy:le,x01:-y,y01:-w,x11:se*(o/K-1),y11:le*(o/K-1)}}function Nq(){var e=KTr,t=XTr,r=Pl(0),n=null,o=JTr,i=QTr,a=e2r,c=null,h=$He(m);function m(){var y,w,E=+e.apply(this,arguments),A=+t.apply(this,arguments),P=o.apply(this,arguments)-tP,j=i.apply(this,arguments)-tP,D=Eoe(j-P),k=j>P;if(c||(c=y=h()),A<E&&(w=A,A=E,E=w),!(A>Vu))c.moveTo(0,0);else if(D>RS-Vu)c.moveTo(A*f0(P),A*Ld(P)),c.arc(0,0,A,P,j,!k),E>Vu&&(c.moveTo(E*f0(j),E*Ld(j)),c.arc(0,0,E,j,P,k));else{var z=P,V=j,G=P,K=j,Z=D,te=D,se=a.apply(this,arguments)/2,le=se>Vu&&(n?+n.apply(this,arguments):J_(E*E+A*A)),pe=Pq(Eoe(A-E)/2,+r.apply(this,arguments)),me=pe,_e=pe,de,Ce;if(le>Vu){var Ye=Soe(le/E*Ld(se)),rt=Soe(le/A*Ld(se));(Z-=Ye*2)>Vu?(Ye*=k?1:-1,G+=Ye,K-=Ye):(Z=0,G=K=(P+j)/2),(te-=rt*2)>Vu?(rt*=k?1:-1,z+=rt,V-=rt):(te=0,z=V=(P+j)/2)}var ct=A*f0(z),qe=A*Ld(z),lt=E*f0(K),bt=E*Ld(K);if(pe>Vu){var Tt=A*f0(V),et=A*Ld(V),pt=E*f0(G),ot=E*Ld(G),We;if(D<kS)if(We=t2r(ct,qe,pt,ot,Tt,et,lt,bt)){var Ne=ct-We[0],Ke=qe-We[1],Ge=Tt-We[0],ft=et-We[1],mt=1/Ld(GHe((Ne*Ge+Ke*ft)/(J_(Ne*Ne+Ke*Ke)*J_(Ge*Ge+ft*ft)))/2),Ot=J_(We[0]*We[0]+We[1]*We[1]);me=Pq(pe,(E-Ot)/(mt-1)),_e=Pq(pe,(A-Ot)/(mt+1))}else me=_e=0}te>Vu?_e>Vu?(de=Dq(pt,ot,ct,qe,A,_e,k),Ce=Dq(Tt,et,lt,bt,A,_e,k),c.moveTo(de.cx+de.x01,de.cy+de.y01),_e<pe?c.arc(de.cx,de.cy,_e,Dl(de.y01,de.x01),Dl(Ce.y01,Ce.x01),!k):(c.arc(de.cx,de.cy,_e,Dl(de.y01,de.x01),Dl(de.y11,de.x11),!k),c.arc(0,0,A,Dl(de.cy+de.y11,de.cx+de.x11),Dl(Ce.cy+Ce.y11,Ce.cx+Ce.x11),!k),c.arc(Ce.cx,Ce.cy,_e,Dl(Ce.y11,Ce.x11),Dl(Ce.y01,Ce.x01),!k))):(c.moveTo(ct,qe),c.arc(0,0,A,z,V,!k)):c.moveTo(ct,qe),!(E>Vu)||!(Z>Vu)?c.lineTo(lt,bt):me>Vu?(de=Dq(lt,bt,Tt,et,E,-me,k),Ce=Dq(ct,qe,pt,ot,E,-me,k),c.lineTo(de.cx+de.x01,de.cy+de.y01),me<pe?c.arc(de.cx,de.cy,me,Dl(de.y01,de.x01),Dl(Ce.y01,Ce.x01),!k):(c.arc(de.cx,de.cy,me,Dl(de.y01,de.x01),Dl(de.y11,de.x11),!k),c.arc(0,0,E,Dl(de.cy+de.y11,de.cx+de.x11),Dl(Ce.cy+Ce.y11,Ce.cx+Ce.x11),k),c.arc(Ce.cx,Ce.cy,me,Dl(Ce.y11,Ce.x11),Dl(Ce.y01,Ce.x01),!k))):c.arc(0,0,E,K,G,k)}if(c.closePath(),y)return c=null,y+""||null}return m.centroid=function(){var y=(+e.apply(this,arguments)+ +t.apply(this,arguments))/2,w=(+o.apply(this,arguments)+ +i.apply(this,arguments))/2-kS/2;return[f0(w)*y,Ld(w)*y]},m.innerRadius=function(y){return arguments.length?(e=typeof y=="function"?y:Pl(+y),m):e},m.outerRadius=function(y){return arguments.length?(t=typeof y=="function"?y:Pl(+y),m):t},m.cornerRadius=function(y){return arguments.length?(r=typeof y=="function"?y:Pl(+y),m):r},m.padRadius=function(y){return arguments.length?(n=y==null?null:typeof y=="function"?y:Pl(+y),m):n},m.startAngle=function(y){return arguments.length?(o=typeof y=="function"?y:Pl(+y),m):o},m.endAngle=function(y){return arguments.length?(i=typeof y=="function"?y:Pl(+y),m):i},m.padAngle=function(y){return arguments.length?(a=typeof y=="function"?y:Pl(+y),m):a},m.context=function(y){return arguments.length?(c=y==null?null:y,m):c},m}u();var wUn=Array.prototype.slice;function YHe(e){return typeof e=="object"&&"length"in e?e:Array.from(e)}u();u();function ZHe(e,t){return t<e?-1:t>e?1:t>=e?0:NaN}u();function KHe(e){return e}function Moe(){var e=KHe,t=ZHe,r=null,n=Pl(0),o=Pl(RS),i=Pl(0);function a(c){var h,m=(c=YHe(c)).length,y,w,E=0,A=new Array(m),P=new Array(m),j=+n.apply(this,arguments),D=Math.min(RS,Math.max(-RS,o.apply(this,arguments)-j)),k,z=Math.min(Math.abs(D)/m,i.apply(this,arguments)),V=z*(D<0?-1:1),G;for(h=0;h<m;++h)(G=P[A[h]=h]=+e(c[h],h,c))>0&&(E+=G);for(t!=null?A.sort(function(K,Z){return t(P[K],P[Z])}):r!=null&&A.sort(function(K,Z){return r(c[K],c[Z])}),h=0,w=E?(D-m*V)/E:0;h<m;++h,j=k)y=A[h],G=P[y],k=j+(G>0?G*w:0)+V,P[y]={data:c[y],index:h,value:G,startAngle:j,endAngle:k,padAngle:z};return P}return a.value=function(c){return arguments.length?(e=typeof c=="function"?c:Pl(+c),a):e},a.sortValues=function(c){return arguments.length?(t=c,r=null,a):t},a.sort=function(c){return arguments.length?(r=c,t=null,a):r},a.startAngle=function(c){return arguments.length?(n=typeof c=="function"?c:Pl(+c),a):n},a.endAngle=function(c){return arguments.length?(o=typeof c=="function"?c:Pl(+c),a):o},a.padAngle=function(c){return arguments.length?(i=typeof c=="function"?c:Pl(+c),a):i},a}u();u();u();u();var Lq="http://www.w3.org/1999/xhtml",Coe={svg:"http://www.w3.org/2000/svg",xhtml:Lq,xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"};function kq(e){var t=e+="",r=t.indexOf(":");return r>=0&&(t=e.slice(0,r))!=="xmlns"&&(e=e.slice(r+1)),Coe.hasOwnProperty(t)?{space:Coe[t],local:e}:e}function r2r(e){return function(){var t=this.ownerDocument,r=this.namespaceURI;return r===Lq&&t.documentElement.namespaceURI===Lq?t.createElement(e):t.createElementNS(r,e)}}function n2r(e){return function(){return this.ownerDocument.createElementNS(e.space,e.local)}}function Rq(e){var t=kq(e);return(t.local?n2r:r2r)(t)}u();u();u();u();function o2r(){}function jq(e){return e==null?o2r:function(){return this.querySelector(e)}}function XHe(e){typeof e!="function"&&(e=jq(e));for(var t=this._groups,r=t.length,n=new Array(r),o=0;o<r;++o)for(var i=t[o],a=i.length,c=n[o]=new Array(a),h,m,y=0;y<a;++y)(h=i[y])&&(m=e.call(h,h.__data__,y,i))&&("__data__"in h&&(m.__data__=h.__data__),c[y]=m);return new ka(n,this._parents)}u();u();function Aoe(e){return e==null?[]:Array.isArray(e)?e:Array.from(e)}u();function i2r(){return[]}function JHe(e){return e==null?i2r:function(){return this.querySelectorAll(e)}}function a2r(e){return function(){return Aoe(e.apply(this,arguments))}}function QHe(e){typeof e=="function"?e=a2r(e):e=JHe(e);for(var t=this._groups,r=t.length,n=[],o=[],i=0;i<r;++i)for(var a=t[i],c=a.length,h,m=0;m<c;++m)(h=a[m])&&(n.push(e.call(h,h.__data__,m,a)),o.push(h));return new ka(n,o)}u();u();function eWe(e){return function(){return this.matches(e)}}function qq(e){return function(t){return t.matches(e)}}var s2r=Array.prototype.find;function l2r(e){return function(){return s2r.call(this.children,e)}}function u2r(){return this.firstElementChild}function tWe(e){return this.select(e==null?u2r:l2r(typeof e=="function"?e:qq(e)))}u();var c2r=Array.prototype.filter;function p2r(){return Array.from(this.children)}function f2r(e){return function(){return c2r.call(this.children,e)}}function rWe(e){return this.selectAll(e==null?p2r:f2r(typeof e=="function"?e:qq(e)))}u();function nWe(e){typeof e!="function"&&(e=eWe(e));for(var t=this._groups,r=t.length,n=new Array(r),o=0;o<r;++o)for(var i=t[o],a=i.length,c=n[o]=[],h,m=0;m<a;++m)(h=i[m])&&e.call(h,h.__data__,m,i)&&c.push(h);return new ka(n,this._parents)}u();u();u();function zq(e){return new Array(e.length)}function oWe(){return new ka(this._enter||this._groups.map(zq),this._parents)}function rP(e,t){this.ownerDocument=e.ownerDocument,this.namespaceURI=e.namespaceURI,this._next=null,this._parent=e,this.__data__=t}rP.prototype={constructor:rP,appendChild:function(e){return this._parent.insertBefore(e,this._next)},insertBefore:function(e,t){return this._parent.insertBefore(e,t)},querySelector:function(e){return this._parent.querySelector(e)},querySelectorAll:function(e){return this._parent.querySelectorAll(e)}};u();function iWe(e){return function(){return e}}function d2r(e,t,r,n,o,i){for(var a=0,c,h=t.length,m=i.length;a<m;++a)(c=t[a])?(c.__data__=i[a],n[a]=c):r[a]=new rP(e,i[a]);for(;a<h;++a)(c=t[a])&&(o[a]=c)}function h2r(e,t,r,n,o,i,a){var c,h,m=new Map,y=t.length,w=i.length,E=new Array(y),A;for(c=0;c<y;++c)(h=t[c])&&(E[c]=A=a.call(h,h.__data__,c,t)+"",m.has(A)?o[c]=h:m.set(A,h));for(c=0;c<w;++c)A=a.call(e,i[c],c,i)+"",(h=m.get(A))?(n[c]=h,h.__data__=i[c],m.delete(A)):r[c]=new rP(e,i[c]);for(c=0;c<y;++c)(h=t[c])&&m.get(E[c])===h&&(o[c]=h)}function m2r(e){return e.__data__}function aWe(e,t){if(!arguments.length)return Array.from(this,m2r);var r=t?h2r:d2r,n=this._parents,o=this._groups;typeof e!="function"&&(e=iWe(e));for(var i=o.length,a=new Array(i),c=new Array(i),h=new Array(i),m=0;m<i;++m){var y=n[m],w=o[m],E=w.length,A=g2r(e.call(y,y&&y.__data__,m,n)),P=A.length,j=c[m]=new Array(P),D=a[m]=new Array(P),k=h[m]=new Array(E);r(y,w,j,D,k,A,t);for(var z=0,V=0,G,K;z<P;++z)if(G=j[z]){for(z>=V&&(V=z+1);!(K=D[V])&&++V<P;);G._next=K||null}}return a=new ka(a,n),a._enter=c,a._exit=h,a}function g2r(e){return typeof e=="object"&&"length"in e?e:Array.from(e)}u();function sWe(){return new ka(this._exit||this._groups.map(zq),this._parents)}u();function lWe(e,t,r){var n=this.enter(),o=this,i=this.exit();return typeof e=="function"?(n=e(n),n&&(n=n.selection())):n=n.append(e+""),t!=null&&(o=t(o),o&&(o=o.selection())),r==null?i.remove():r(i),n&&o?n.merge(o).order():o}u();function uWe(e){for(var t=e.selection?e.selection():e,r=this._groups,n=t._groups,o=r.length,i=n.length,a=Math.min(o,i),c=new Array(o),h=0;h<a;++h)for(var m=r[h],y=n[h],w=m.length,E=c[h]=new Array(w),A,P=0;P<w;++P)(A=m[P]||y[P])&&(E[P]=A);for(;h<o;++h)c[h]=r[h];return new ka(c,this._parents)}u();function cWe(){for(var e=this._groups,t=-1,r=e.length;++t<r;)for(var n=e[t],o=n.length-1,i=n[o],a;--o>=0;)(a=n[o])&&(i&&a.compareDocumentPosition(i)^4&&i.parentNode.insertBefore(a,i),i=a);return this}u();function pWe(e){e||(e=v2r);function t(w,E){return w&&E?e(w.__data__,E.__data__):!w-!E}for(var r=this._groups,n=r.length,o=new Array(n),i=0;i<n;++i){for(var a=r[i],c=a.length,h=o[i]=new Array(c),m,y=0;y<c;++y)(m=a[y])&&(h[y]=m);h.sort(t)}return new ka(o,this._parents).order()}function v2r(e,t){return e<t?-1:e>t?1:e>=t?0:NaN}u();function fWe(){var e=arguments[0];return arguments[0]=this,e.apply(null,arguments),this}u();function dWe(){return Array.from(this)}u();function hWe(){for(var e=this._groups,t=0,r=e.length;t<r;++t)for(var n=e[t],o=0,i=n.length;o<i;++o){var a=n[o];if(a)return a}return null}u();function mWe(){let e=0;for(let t of this)++e;return e}u();function gWe(){return!this.node()}u();function vWe(e){for(var t=this._groups,r=0,n=t.length;r<n;++r)for(var o=t[r],i=0,a=o.length,c;i<a;++i)(c=o[i])&&e.call(c,c.__data__,i,o);return this}u();function y2r(e){return function(){this.removeAttribute(e)}}function _2r(e){return function(){this.removeAttributeNS(e.space,e.local)}}function b2r(e,t){return function(){this.setAttribute(e,t)}}function x2r(e,t){return function(){this.setAttributeNS(e.space,e.local,t)}}function w2r(e,t){return function(){var r=t.apply(this,arguments);r==null?this.removeAttribute(e):this.setAttribute(e,r)}}function E2r(e,t){return function(){var r=t.apply(this,arguments);r==null?this.removeAttributeNS(e.space,e.local):this.setAttributeNS(e.space,e.local,r)}}function yWe(e,t){var r=kq(e);if(arguments.length<2){var n=this.node();return r.local?n.getAttributeNS(r.space,r.local):n.getAttribute(r)}return this.each((t==null?r.local?_2r:y2r:typeof t=="function"?r.local?E2r:w2r:r.local?x2r:b2r)(r,t))}u();u();function Fq(e){return e.ownerDocument&&e.ownerDocument.defaultView||e.document&&e||e.defaultView}function S2r(e){return function(){this.style.removeProperty(e)}}function T2r(e,t,r){return function(){this.style.setProperty(e,t,r)}}function I2r(e,t,r){return function(){var n=t.apply(this,arguments);n==null?this.style.removeProperty(e):this.style.setProperty(e,n,r)}}function _We(e,t,r){return arguments.length>1?this.each((t==null?S2r:typeof t=="function"?I2r:T2r)(e,t,r==null?"":r)):M2r(this.node(),e)}function M2r(e,t){return e.style.getPropertyValue(t)||Fq(e).getComputedStyle(e,null).getPropertyValue(t)}u();function C2r(e){return function(){delete this[e]}}function A2r(e,t){return function(){this[e]=t}}function O2r(e,t){return function(){var r=t.apply(this,arguments);r==null?delete this[e]:this[e]=r}}function bWe(e,t){return arguments.length>1?this.each((t==null?C2r:typeof t=="function"?O2r:A2r)(e,t)):this.node()[e]}u();function xWe(e){return e.trim().split(/^|\s+/)}function Ooe(e){return e.classList||new wWe(e)}function wWe(e){this._node=e,this._names=xWe(e.getAttribute("class")||"")}wWe.prototype={add:function(e){var t=this._names.indexOf(e);t<0&&(this._names.push(e),this._node.setAttribute("class",this._names.join(" ")))},remove:function(e){var t=this._names.indexOf(e);t>=0&&(this._names.splice(t,1),this._node.setAttribute("class",this._names.join(" ")))},contains:function(e){return this._names.indexOf(e)>=0}};function EWe(e,t){for(var r=Ooe(e),n=-1,o=t.length;++n<o;)r.add(t[n])}function SWe(e,t){for(var r=Ooe(e),n=-1,o=t.length;++n<o;)r.remove(t[n])}function P2r(e){return function(){EWe(this,e)}}function D2r(e){return function(){SWe(this,e)}}function N2r(e,t){return function(){(t.apply(this,arguments)?EWe:SWe)(this,e)}}function TWe(e,t){var r=xWe(e+"");if(arguments.length<2){for(var n=Ooe(this.node()),o=-1,i=r.length;++o<i;)if(!n.contains(r[o]))return!1;return!0}return this.each((typeof t=="function"?N2r:t?P2r:D2r)(r,t))}u();function L2r(){this.textContent=""}function k2r(e){return function(){this.textContent=e}}function R2r(e){return function(){var t=e.apply(this,arguments);this.textContent=t==null?"":t}}function IWe(e){return arguments.length?this.each(e==null?L2r:(typeof e=="function"?R2r:k2r)(e)):this.node().textContent}u();function j2r(){this.innerHTML=""}function q2r(e){return function(){this.innerHTML=e}}function z2r(e){return function(){var t=e.apply(this,arguments);this.innerHTML=t==null?"":t}}function MWe(e){return arguments.length?this.each(e==null?j2r:(typeof e=="function"?z2r:q2r)(e)):this.node().innerHTML}u();function F2r(){this.nextSibling&&this.parentNode.appendChild(this)}function CWe(){return this.each(F2r)}u();function U2r(){this.previousSibling&&this.parentNode.insertBefore(this,this.parentNode.firstChild)}function AWe(){return this.each(U2r)}u();function OWe(e){var t=typeof e=="function"?e:Rq(e);return this.select(function(){return this.appendChild(t.apply(this,arguments))})}u();function B2r(){return null}function PWe(e,t){var r=typeof e=="function"?e:Rq(e),n=t==null?B2r:typeof t=="function"?t:jq(t);return this.select(function(){return this.insertBefore(r.apply(this,arguments),n.apply(this,arguments)||null)})}u();function V2r(){var e=this.parentNode;e&&e.removeChild(this)}function DWe(){return this.each(V2r)}u();function G2r(){var e=this.cloneNode(!1),t=this.parentNode;return t?t.insertBefore(e,this.nextSibling):e}function H2r(){var e=this.cloneNode(!0),t=this.parentNode;return t?t.insertBefore(e,this.nextSibling):e}function NWe(e){return this.select(e?H2r:G2r)}u();function LWe(e){return arguments.length?this.property("__data__",e):this.node().__data__}u();function W2r(e){return function(t){e.call(this,t,this.__data__)}}function $2r(e){return e.trim().split(/^|\s+/).map(function(t){var r="",n=t.indexOf(".");return n>=0&&(r=t.slice(n+1),t=t.slice(0,n)),{type:t,name:r}})}function Y2r(e){return function(){var t=this.__on;if(t){for(var r=0,n=-1,o=t.length,i;r<o;++r)i=t[r],(!e.type||i.type===e.type)&&i.name===e.name?this.removeEventListener(i.type,i.listener,i.options):t[++n]=i;++n?t.length=n:delete this.__on}}}function Z2r(e,t,r){return function(){var n=this.__on,o,i=W2r(t);if(n){for(var a=0,c=n.length;a<c;++a)if((o=n[a]).type===e.type&&o.name===e.name){this.removeEventListener(o.type,o.listener,o.options),this.addEventListener(o.type,o.listener=i,o.options=r),o.value=t;return}}this.addEventListener(e.type,i,r),o={type:e.type,name:e.name,value:t,listener:i,options:r},n?n.push(o):this.__on=[o]}}function kWe(e,t,r){var n=$2r(e+""),o,i=n.length,a;if(arguments.length<2){var c=this.node().__on;if(c){for(var h=0,m=c.length,y;h<m;++h)for(o=0,y=c[h];o<i;++o)if((a=n[o]).type===y.type&&a.name===y.name)return y.value}return}for(c=t?Z2r:Y2r,o=0;o<i;++o)this.each(c(n[o],t,r));return this}u();function RWe(e,t,r){var n=Fq(e),o=n.CustomEvent;typeof o=="function"?o=new o(t,r):(o=n.document.createEvent("Event"),r?(o.initEvent(t,r.bubbles,r.cancelable),o.detail=r.detail):o.initEvent(t,!1,!1)),e.dispatchEvent(o)}function K2r(e,t){return function(){return RWe(this,e,t)}}function X2r(e,t){return function(){return RWe(this,e,t.apply(this,arguments))}}function jWe(e,t){return this.each((typeof t=="function"?X2r:K2r)(e,t))}u();function*qWe(){for(var e=this._groups,t=0,r=e.length;t<r;++t)for(var n=e[t],o=0,i=n.length,a;o<i;++o)(a=n[o])&&(yield a)}var Poe=[null];function ka(e,t){this._groups=e,this._parents=t}function J2r(){return new ka([[document.documentElement]],Poe)}function Q2r(){return this}ka.prototype=J2r.prototype={constructor:ka,select:XHe,selectAll:QHe,selectChild:tWe,selectChildren:rWe,filter:nWe,data:aWe,enter:oWe,exit:sWe,join:lWe,merge:uWe,selection:Q2r,order:cWe,sort:pWe,call:fWe,nodes:dWe,node:hWe,size:mWe,empty:gWe,each:vWe,attr:yWe,style:_We,property:bWe,classed:TWe,text:IWe,html:MWe,raise:CWe,lower:AWe,append:OWe,insert:PWe,remove:DWe,clone:NWe,datum:LWe,on:kWe,dispatch:jWe,[Symbol.iterator]:qWe};function Uq(e){return typeof e=="string"?new ka([[document.querySelector(e)]],[document.documentElement]):new ka([[e]],Poe)}var kd={},Doe="http://www.w3.org/2000/svg";typeof document!="undefined"&&(kd.svg=document.createElementNS(Doe,"svg"),kd.arcs=document.createElementNS(Doe,"g"),kd.arcs.classList.add("arcs"),kd.circle=document.createElementNS(Doe,"circle"),kd.circle.classList.add("circle"));var Noe=45,eIr=(e,t)=>{let n=t-7-4,o=7+(1-e)*n,i=Math.round((1-e)*7),a=kd.circle.cloneNode();return a.setAttribute("r",o),a.style.setProperty("--idohist-spatial-blur",`${i}px`),a.classList.add("spatial-certainty"),a},tIr=()=>{let e=kd.circle.cloneNode();return e.setAttribute("r",Noe),e.classList.add("background"),e},zWe=e=>{let t=kd.circle.cloneNode();return t.setAttribute("r",e),t.classList.add("track"),t},FWe=({spatialCertainty:e,temporalCertainty:t,contentCertainty:r,lightColor:n,darkColor:o})=>{let i=Noe*2,a=5,c=3,h=6,m=Noe-a,y=m-h,w=y-c,E=w-h,A=zWe(w-(w-E)/2),P=zWe(m-(m-y)/2),j=eIr(e,E),D=tIr(),k=kd.svg.cloneNode();k.style.setProperty("--idohist-light-color",n),k.style.setProperty("--idohist-dark-color",o);let z=kd.arcs.cloneNode();z.classList.add("temporal");let V=kd.arcs.cloneNode();V.classList.add("content");let G={content:[{value:r,cssClass:"certainty"},{value:1-r,cssClass:"uncertainty"}],temporal:[{value:t,cssClass:"certainty"},{value:1-t,cssClass:"uncertainty"}]},K=Nq().innerRadius(m).outerRadius(y),Z=Nq().innerRadius(E).outerRadius(w),te=Moe().sort(null).value(pe=>pe.value),se=Uq(V),le=Uq(z);return se.selectAll().data(te(G.content)).enter().append("path").attr("d",K).attr("class",pe=>pe.data.cssClass),le.selectAll().data(te(G.temporal)).enter().append("path").attr("d",Z).attr("class",pe=>pe.data.cssClass),k.setAttribute("viewBox",`${-i/2}, ${-i/2}, ${i}, ${i}`),k.append(D,j,A,P,z,V),k};var BWe="marker-idohist",VWe="data-vkf-feature-id",GWe="data-vkf-source-id",HWe="data-vkf-source-id-hover",Vq="data-vkf-visibility",Loe=Symbol("vkf:feature-properties"),rIr={type:"Polygon",coordinates:[]},nIr=typeof document!="undefined"?document.createElement("div"):{},koe=e=>{if(!Te(e))return;let t=e.closest(`div.${BWe}`),r=parseInt(t.getAttribute(VWe),10),n=t.getAttribute(GWe),o=t.getAttribute(HWe),i=t.getAttribute(Vq);return{featureId:r,sourceId:n,sourceIdHover:o,visibility:i}},WWe=(e,t,r)=>{if(!Te(e))return;let n=Object.keys(Oq).map(o=>`${t}-${o}`);for(let o of n){if(!Te(r)){e.setFilter(o,eP);continue}let i=["all",eP[1],["==",["id"],r]];e.setFilter(o,i)}},oIr=e=>{e.stopPropagation();let{target:t}=e,{featureId:r,sourceId:n,visibility:o}=koe(t);o!==Lg.NONE&&woe(el,{featureId:r,sourceId:n})},iIr=e=>{e.stopPropagation();let{target:t}=e,{featureId:r,sourceIdHover:n,visibility:o}=koe(t);o!==Lg.NONE&&Cq(Qt).then(i=>{WWe(i,n,r)})},aIr=e=>{e.stopPropagation();let{target:t}=e,{sourceIdHover:r,visibility:n}=koe(t);n!==Lg.NONE&&Cq(Qt).then(o=>{WWe(o,r,null)})},$We=(e,{sourceId:t,sourceIdHover:r})=>{let n=e.geometry.coordinates,o=e.id,{properties:i}=e,a=tb(i[ra.contentCertainty]),c=tb(i[ra.temporalCertainty]),h=tb(i[ra.spatialCertainty]),{lightColor:m,darkColor:y}=XWe(i),w=nIr.cloneNode();w.classList.add(BWe),w.setAttribute(VWe,o),w.setAttribute(GWe,t),w.setAttribute(HWe,r);let E=FWe({spatialCertainty:h,temporalCertainty:c,contentCertainty:a,lightColor:m,darkColor:y});w.appendChild(E),w.addEventListener("click",oIr),w.addEventListener("mouseenter",iIr),w.addEventListener("mouseleave",aIr);let A=new UWe.Marker({element:w});return A.isVisible=!0,A.setLngLat(n),A[Loe]=e.properties,A},YWe=e=>{let{properties:t}=e,r=rIr;Object.hasOwn(t,ra.hoverPolygon)&&t[ra.hoverPolygon].type==="Polygon"&&(r=t[ra.hoverPolygon]);let{lightColor:n,darkColor:o}=XWe(t);return{type:"Feature",geometry:r,id:e.id,properties:{[ra.idohistLightColor]:n,[ra.idohistDarkColor]:o}}},ZWe=(e,t,r)=>{let n={};for(let o of Object.keys(t)){let i=`${e}-${o}`;n[i]=Se(Pt(Se({id:i,source:e},t[o]),{layout:Pt(Se({},t[o].layout),{visibility:"visible"})}),r&&{metadata:{[_p.id]:e,[_p.contentType]:Fu.IDOHIST}})}return n},Bq={largeZoom:{slope:.04,intercept:.24},smallZoom:{slope:.038,intercept:.06}},KWe=e=>e>14?Bq.largeZoom.slope*e+Bq.largeZoom.intercept:Bq.smallZoom.slope*e+Bq.smallZoom.intercept,tb=e=>Number.isNaN(Number.parseFloat(e))||e<0?0:e>1?1:e,XWe=e=>{var n,o;let t=(n=e[ra.idohistDarkColor])!=null?n:QO,r=(o=e[ra.idohistLightColor])!=null?o:Aq;return{darkColor:t,lightColor:r}};var JWe=[{type:"mousemove",handler:e=>e.target.getCanvas().style.cursor="pointer"},{type:"mouseleave",handler:e=>e.target.getCanvas().style.cursor=""}],QWe=(e,{sourceId:t,sourceIdHover:r})=>{let n={type:"FeatureCollection",features:[]},o=[];for(let i of e.features){if(i.geometry.type!=="Point")continue;let a=$We(i,{sourceIdHover:r,sourceId:t});o.push(a);let c=YWe(i);n.features.push(c)}return{markers:o,geoJsonHoverPolygons:n}},Nl,Rd,jd,qS,nP,qg,zS,bf,jS,e$e,t$e,Roe=class extends Iq{constructor(r){super();Ga(this,bf);Ga(this,Nl,[]);Ga(this,Rd,null);Ga(this,jd,null);Ga(this,qS,!0);Ga(this,nP,1);Ga(this,qg,[]);Ga(this,zS,{});Ha(this,Rd,r),Ha(this,jd,`${r}-hover`)}addLayerToMap(r,n,o){var m,y;if(!Te(r))return;let{markers:i,geoJsonHoverPolygons:a}=QWe(o,{sourceId:qr(this,Rd),sourceIdHover:qr(this,jd)});Ha(this,Nl,i),qr(this,Nl).forEach(w=>w.addTo(r));let c=r.getLayer(Uu)!==void 0?Uu:void 0,h=[{sourceId:qr(this,Rd),definition:BHe,data:o,hasPopup:!0},{sourceId:qr(this,jd),definition:Oq,data:a,hasPopup:!1}];for(let{sourceId:w,definition:E,data:A,hasPopup:P}of h){r.addSource(w,{type:"geojson",data:A});let j=ZWe(w,E,P);for(let[D,k]of Object.entries(j))r.addLayer(k,c),qr(this,qg).push(D),qr(this,zS)[D]=k.filter}if(Te(n)){let{layerSettings:w}=n,E=(m=w==null?void 0:w.opacity)!=null?m:1,A=(y=w==null?void 0:w.visibility)!=null?y:"visible";this.setVisibility(r,A),this.setOpacity(r,E)}pa(this,bf,e$e).call(this,r)}removeLayerFromMap(r){qr(this,Nl).forEach(n=>n.remove()),Ha(this,Nl,[]);for(let n of qr(this,qg))pa(this,bf,t$e).call(this,r,n),r.removeLayer(n);r.removeSource(qr(this,Rd)),r.removeSource(qr(this,jd)),Ha(this,qg,[])}setDataOnMap(r,n){let{markers:o,geoJsonHoverPolygons:i}=QWe(n,{sourceId:qr(this,Rd),sourceIdHover:qr(this,jd)});qr(this,Nl).forEach(h=>h.remove()),Ha(this,Nl,o),qr(this,Nl).forEach(h=>h.addTo(r));let a=r.getSource(qr(this,Rd)),c=r.getSource(qr(this,jd));if(!Te(a)||!Te(c)){console.error("Cannot update geojson on map. Source layer not found");return}a.setData(n),c.setData(i)}getOpacity(){return qr(this,nP)}setOpacity(r,n){if(!Te(n))return;Ha(this,nP,n),qr(this,Nl).forEach(i=>i.setOpacity(n,0));let o=pa(this,bf,jS).call(this,r);for(let{id:i,type:a}of o){let c=X_[a],h=XO[a];r.setPaintProperty(i,h,["*",c,n])}}isVisible(){return qr(this,Nl).length===0?!1:qr(this,qS)}setVisibility(r,n){let o=pa(this,bf,jS).call(this,r);if(!(o.length===0||!Te(n))){for(let{id:i}of o)r.setLayoutProperty(i,"visibility",n);if(n===Lg.VISIBLE){for(let i of qr(this,Nl)){let a=i.getElement();a.setAttribute(Vq,Lg.VISIBLE),a.style.setProperty("display","block")}Ha(this,qS,!0),r.fireVisibilityChanged(qr(this,Rd),n),r.fireVisibilityChanged(qr(this,jd),n);return}if(n===Lg.NONE){for(let i of qr(this,Nl)){let a=i.getElement();a.setAttribute(Vq,Lg.NONE),a.style.setProperty("display","none")}Ha(this,qS,!1),r.fireVisibilityChanged(qr(this,Rd),n),r.fireVisibilityChanged(qr(this,jd),n);return}}}isDisplayedInMap(){return qr(this,Nl).length>0}getLayerId(){return qr(this,qg).length>0?qr(this,qg)[0]:null}move(){}setFilters(r,n){let o=n==null?void 0:n.timeExtent,i=Tq(o),a=pa(this,bf,jS).call(this,r);for(let c of a){let{id:h}=c,y=["all",qr(this,zS)[h]];Te(i)&&i.length>0&&y.push(i),r.setFilter(h,y)}for(let c of qr(this,Nl)){let[h,m]=c[Loe][Ln.time],{timeExtent:y}=n;h<=y[1]*1e3&&m>=y[0]*1e3?c.addTo(r):c.remove()}}resetFilters(r){let n=pa(this,bf,jS).call(this,r);qr(this,Nl).forEach(o=>o.addTo(r));for(let o of n){let{id:i}=o,a=qr(this,zS)[i];r.setFilter(i,a)}}};Nl=new WeakMap,Rd=new WeakMap,jd=new WeakMap,qS=new WeakMap,nP=new WeakMap,qg=new WeakMap,zS=new WeakMap,bf=new WeakSet,jS=function(r){let n=qr(this,qg).map(o=>r.getLayer(o));return n[0]===void 0?[]:n},e$e=function(r){for(let{id:n}of pa(this,bf,jS).call(this,r))for(let{type:o,handler:i}of JWe)r.on(o,n,i)},t$e=function(r,n){for(let{type:o,handler:i}of JWe)r.off(o,n,i)};var r$e=Roe;var rb,Ll,Gq,n$e,zg=class zg extends OS{constructor({metadata:r,geometry:n,geoJson:o}){if(!qr(zg,rb))throw new TypeError("Constructor is private. Use GeoJsonLayer.fromApplication() or GeoJsonLayer.fromPersistence() instead.");Ha(zg,rb,!1);super({metadata:r,geometry:n});Ga(this,Gq);St(this,"geoJSON",{});Ga(this,Ll,null);pa(this,Gq,n$e).call(this,o),this.metadata[Ue.externalContentType]===Fu.IDOHIST?Ha(this,Ll,new r$e(this.getId())):Ha(this,Ll,new zHe(this.getId()))}static fromApplication(r){return Ha(zg,rb,!0),new zg(r)}static fromPersistence({metadata:r,geometry:n,geoJson:o}){Ha(zg,rb,!0);let i=o.features.map(_oe),a=Pt(Se({},o),{features:i});return new zg({metadata:r,geometry:n,geoJson:a})}getGeoJson(){return this.geoJSON}getGeoJsonForPersistence(){var o;let r=structuredClone(this.getGeoJson()),n=(o=r.features)!=null?o:[];return n=n.map(yoe),r.features=n,r}setGeoJson(r){let n=r.features.map((i,a)=>(Object.hasOwn(i,"properties")||(i.properties={}),Te(i.id)?Se({},i):Pt(Se({},i),{id:a+1}))),o=Pt(Se({},r),{features:n});this.geoJSON=o}getFeature(r){let n=this.geoJSON.features.find(o=>o.id===r);return Te(n)?n:(console.warn(`No feature found for id '${r}'`),null)}getType(){return go.VECTOR_MAP}isRemote(){return Te(this.metadata[Ue.vectorMapId])}isLocal(){return!this.isRemote()}isExternalVectorMap(){let r=this.metadata[Ue.externalContentUrl];return Te(r)&&Dd(r)}getPreviewFeature(){let r=this.getMetadata(Ue.bounds);return{type:"Feature",properties:{},geometry:LHe(r)}}addLayerToMap(r,n){qr(this,Ll).addLayerToMap(r,n,this.geoJSON)}removeMapLibreLayers(r){qr(this,Ll).removeLayerFromMap(r)}setDataOnMap(r,n){!Te(r)||!Te(n)||(this.setGeoJson(n),qr(this,Ll).setDataOnMap(r,this.geoJSON))}getMapLibreLayerId(){return qr(this,Ll).getLayerId()}getOpacity(r){return qr(this,Ll).getOpacity(r)}setOpacity(r,n){qr(this,Ll).setOpacity(r,n)}isVisible(r){return qr(this,Ll).isVisible(r)}setVisibility(r,n){qr(this,Ll).setVisibility(r,n)}isDisplayedInMap(r){return qr(this,Ll).isDisplayedInMap(r)}move(r,n){qr(this,Ll).move(r,n)}moveToTop(r){this.move(r,null)}setFilters(r,n){if(!Te(n)||(n==null?void 0:n.length)===0){qr(this,Ll).resetFilters(r);return}qr(this,Ll).setFilters(r,n)}static toApplicationState(r){var i;if(!Te(r))return r;let n=structuredClone(r),o=(i=n.features)!=null?i:[];return o=o.map(_oe),n.features=o,n}static toPersistenceState(r){var i;if(!Te(r))return r;let n=structuredClone(r),o=(i=n.features)!=null?i:[];return o=o.map(yoe),n.features=o,n}};rb=new WeakMap,Ll=new WeakMap,Gq=new WeakSet,n$e=function(r){var o,i;this.setGeoJson(r);let n=this.geometry?PS(this.geometry):PS(this.geoJSON);this.metadata[Ue.bounds]=n,this.metadata[Ue.id]=(o=this.metadata[Ue.id])!=null?o:crypto.randomUUID(),this.metadata[Ue.timePeriod]=(i=this.metadata[Ue.timePeriod])!=null?i:DHe(),this.metadata[Ue.hasGeoReference]=!0},Ga(zg,rb,!1);var joe=zg,o$e=joe;var Wo=o$e;u();var i$e=bs,Gu={$schema:"http://json-schema.org/draft-07/schema#",$id:"https://geojson.org/schema/FeatureCollection.json",title:"GeoJSON FeatureCollection",type:"object",required:["type","features"],properties:{type:{type:"string",enum:["FeatureCollection"]},features:{type:"array",items:{title:"GeoJSON Feature",type:"object",required:["type","properties","geometry"],properties:{type:{type:"string",enum:["Feature"]},id:{oneOf:[{type:"number"},{type:"string"}]},properties:{oneOf:[{type:"null"},{type:"object"}]},geometry:{oneOf:[{type:"null"},{title:"GeoJSON Point",type:"object",required:["type","coordinates"],properties:{type:{type:"string",enum:["Point"]},coordinates:{type:"array",minItems:2,items:{type:"number"}},bbox:{type:"array",minItems:4,items:{type:"number"}}}},{title:"GeoJSON LineString",type:"object",required:["type","coordinates"],properties:{type:{type:"string",enum:["LineString"]},coordinates:{type:"array",minItems:2,items:{type:"array",minItems:2,items:{type:"number"}}},bbox:{type:"array",minItems:4,items:{type:"number"}}}},{title:"GeoJSON Polygon",type:"object",required:["type","coordinates"],properties:{type:{type:"string",enum:["Polygon"]},coordinates:{type:"array",items:{type:"array",minItems:4,items:{type:"array",minItems:2,items:{type:"number"}}}},bbox:{type:"array",minItems:4,items:{type:"number"}}}},{title:"GeoJSON MultiPoint",type:"object",required:["type","coordinates"],properties:{type:{type:"string",enum:["MultiPoint"]},coordinates:{type:"array",items:{type:"array",minItems:2,items:{type:"number"}}},bbox:{type:"array",minItems:4,items:{type:"number"}}}},{title:"GeoJSON MultiLineString",type:"object",required:["type","coordinates"],properties:{type:{type:"string",enum:["MultiLineString"]},coordinates:{type:"array",items:{type:"array",minItems:2,items:{type:"array",minItems:2,items:{type:"number"}}}},bbox:{type:"array",minItems:4,items:{type:"number"}}}},{title:"GeoJSON MultiPolygon",type:"object",required:["type","coordinates"],properties:{type:{type:"string",enum:["MultiPolygon"]},coordinates:{type:"array",items:{type:"array",items:{type:"array",minItems:4,items:{type:"array",minItems:2,items:{type:"number"}}}}},bbox:{type:"array",minItems:4,items:{type:"number"}}}},{title:"GeoJSON GeometryCollection",type:"object",required:["type","geometries"],properties:{type:{type:"string",enum:["GeometryCollection"]},geometries:{type:"array",items:{oneOf:[{title:"GeoJSON Point",type:"object",required:["type","coordinates"],properties:{type:{type:"string",enum:["Point"]},coordinates:{type:"array",minItems:2,items:{type:"number"}},bbox:{type:"array",minItems:4,items:{type:"number"}}}},{title:"GeoJSON LineString",type:"object",required:["type","coordinates"],properties:{type:{type:"string",enum:["LineString"]},coordinates:{type:"array",minItems:2,items:{type:"array",minItems:2,items:{type:"number"}}},bbox:{type:"array",minItems:4,items:{type:"number"}}}},{title:"GeoJSON Polygon",type:"object",required:["type","coordinates"],properties:{type:{type:"string",enum:["Polygon"]},coordinates:{type:"array",items:{type:"array",minItems:4,items:{type:"array",minItems:2,items:{type:"number"}}}},bbox:{type:"array",minItems:4,items:{type:"number"}}}},{title:"GeoJSON MultiPoint",type:"object",required:["type","coordinates"],properties:{type:{type:"string",enum:["MultiPoint"]},coordinates:{type:"array",items:{type:"array",minItems:2,items:{type:"number"}}},bbox:{type:"array",minItems:4,items:{type:"number"}}}},{title:"GeoJSON MultiLineString",type:"object",required:["type","coordinates"],properties:{type:{type:"string",enum:["MultiLineString"]},coordinates:{type:"array",items:{type:"array",minItems:2,items:{type:"array",minItems:2,items:{type:"number"}}}},bbox:{type:"array",minItems:4,items:{type:"number"}}}},{title:"GeoJSON MultiPolygon",type:"object",required:["type","coordinates"],properties:{type:{type:"string",enum:["MultiPolygon"]},coordinates:{type:"array",items:{type:"array",items:{type:"array",minItems:4,items:{type:"array",minItems:2,items:{type:"number"}}}}},bbox:{type:"array",minItems:4,items:{type:"number"}}}}]}},bbox:{type:"array",minItems:4,items:{type:"number"}}}}]},bbox:{type:"array",minItems:4,items:{type:"number"}}}}},bbox:{type:"array",minItems:4,items:{type:"number"}}}};function bs(e,{instancePath:t="",parentData:r,parentDataProperty:n,rootData:o=e}={}){let i=null,a=0;if(a===0)if(e&&typeof e=="object"&&!Array.isArray(e)){let Ee;if(e.type===void 0&&(Ee="type")||e.features===void 0&&(Ee="features"))return bs.errors=[{instancePath:t,schemaPath:"#/required",keyword:"required",params:{missingProperty:Ee},message:"must have required property '"+Ee+"'"}],!1;if(e.type!==void 0){let Be=e.type,gt=a;if(typeof Be!="string")return bs.errors=[{instancePath:t+"/type",schemaPath:"#/properties/type/type",keyword:"type",params:{type:"string"},message:"must be string"}],!1;if(Be!=="FeatureCollection")return bs.errors=[{instancePath:t+"/type",schemaPath:"#/properties/type/enum",keyword:"enum",params:{allowedValues:Gu.properties.type.enum},message:"must be equal to one of the allowed values"}],!1;var c=gt===a}else var c=!0;if(c){if(e.features!==void 0){let Be=e.features,gt=a;if(a===gt)if(Array.isArray(Be)){var h=!0;let Dt=Be.length;for(let Oe=0;Oe<Dt;Oe++){let xt=Be[Oe],Bt=a;if(a===Bt)if(xt&&typeof xt=="object"&&!Array.isArray(xt)){let dn;if(xt.type===void 0&&(dn="type")||xt.properties===void 0&&(dn="properties")||xt.geometry===void 0&&(dn="geometry"))return bs.errors=[{instancePath:t+"/features/"+Oe,schemaPath:"#/properties/features/items/required",keyword:"required",params:{missingProperty:dn},message:"must have required property '"+dn+"'"}],!1;if(xt.type!==void 0){let wt=xt.type,ln=a;if(typeof wt!="string")return bs.errors=[{instancePath:t+"/features/"+Oe+"/type",schemaPath:"#/properties/features/items/properties/type/type",keyword:"type",params:{type:"string"},message:"must be string"}],!1;if(wt!=="Feature")return bs.errors=[{instancePath:t+"/features/"+Oe+"/type",schemaPath:"#/properties/features/items/properties/type/enum",keyword:"enum",params:{allowedValues:Gu.properties.features.items.properties.type.enum},message:"must be equal to one of the allowed values"}],!1;var m=ln===a}else var m=!0;if(m){if(xt.id!==void 0){let wt=xt.id,ln=a,Ar=a,or=!1,Er=null,Rt=a;if(!(typeof wt=="number"&&isFinite(wt))){let Un={instancePath:t+"/features/"+Oe+"/id",schemaPath:"#/properties/features/items/properties/id/oneOf/0/type",keyword:"type",params:{type:"number"},message:"must be number"};i===null?i=[Un]:i.push(Un),a++}var y=Rt===a;y&&(or=!0,Er=0);let jo=a;if(typeof wt!="string"){let Un={instancePath:t+"/features/"+Oe+"/id",schemaPath:"#/properties/features/items/properties/id/oneOf/1/type",keyword:"type",params:{type:"string"},message:"must be string"};i===null?i=[Un]:i.push(Un),a++}var y=jo===a;if(y&&or?(or=!1,Er=[Er,1]):y&&(or=!0,Er=1),or)a=Ar,i!==null&&(Ar?i.length=Ar:i=null);else{let Un={instancePath:t+"/features/"+Oe+"/id",schemaPath:"#/properties/features/items/properties/id/oneOf",keyword:"oneOf",params:{passingSchemas:Er},message:"must match exactly one schema in oneOf"};return i===null?i=[Un]:i.push(Un),a++,bs.errors=i,!1}var m=ln===a}else var m=!0;if(m){if(xt.properties!==void 0){let wt=xt.properties,ln=a,Ar=a,or=!1,Er=null,Rt=a;if(wt!==null){let Un={instancePath:t+"/features/"+Oe+"/properties",schemaPath:"#/properties/features/items/properties/properties/oneOf/0/type",keyword:"type",params:{type:"null"},message:"must be null"};i===null?i=[Un]:i.push(Un),a++}var w=Rt===a;w&&(or=!0,Er=0);let jo=a;if(!(wt&&typeof wt=="object"&&!Array.isArray(wt))){let Un={instancePath:t+"/features/"+Oe+"/properties",schemaPath:"#/properties/features/items/properties/properties/oneOf/1/type",keyword:"type",params:{type:"object"},message:"must be object"};i===null?i=[Un]:i.push(Un),a++}var w=jo===a;if(w&&or?(or=!1,Er=[Er,1]):w&&(or=!0,Er=1),or)a=Ar,i!==null&&(Ar?i.length=Ar:i=null);else{let Un={instancePath:t+"/features/"+Oe+"/properties",schemaPath:"#/properties/features/items/properties/properties/oneOf",keyword:"oneOf",params:{passingSchemas:Er},message:"must match exactly one schema in oneOf"};return i===null?i=[Un]:i.push(Un),a++,bs.errors=i,!1}var m=ln===a}else var m=!0;if(m){if(xt.geometry!==void 0){let wt=xt.geometry,ln=a,Ar=a,or=!1,Er=null,Rt=a;if(wt!==null){let Un={instancePath:t+"/features/"+Oe+"/geometry",schemaPath:"#/properties/features/items/properties/geometry/oneOf/0/type",keyword:"type",params:{type:"null"},message:"must be null"};i===null?i=[Un]:i.push(Un),a++}var j=Rt===a;j&&(or=!0,Er=0);let jo=a;if(a===jo)if(wt&&typeof wt=="object"&&!Array.isArray(wt)){let Un;if(wt.type===void 0&&(Un="type")||wt.coordinates===void 0&&(Un="coordinates")){let la={instancePath:t+"/features/"+Oe+"/geometry",schemaPath:"#/properties/features/items/properties/geometry/oneOf/1/required",keyword:"required",params:{missingProperty:Un},message:"must have required property '"+Un+"'"};i===null?i=[la]:i.push(la),a++}else{if(wt.type!==void 0){let la=wt.type,zt=a;if(typeof la!="string"){let Nr={instancePath:t+"/features/"+Oe+"/geometry/type",schemaPath:"#/properties/features/items/properties/geometry/oneOf/1/properties/type/type",keyword:"type",params:{type:"string"},message:"must be string"};i===null?i=[Nr]:i.push(Nr),a++}if(la!=="Point"){let Nr={instancePath:t+"/features/"+Oe+"/geometry/type",schemaPath:"#/properties/features/items/properties/geometry/oneOf/1/properties/type/enum",keyword:"enum",params:{allowedValues:Gu.properties.features.items.properties.geometry.oneOf[1].properties.type.enum},message:"must be equal to one of the allowed values"};i===null?i=[Nr]:i.push(Nr),a++}var E=zt===a}else var E=!0;if(E){if(wt.coordinates!==void 0){let la=wt.coordinates,zt=a;if(a===zt)if(Array.isArray(la)){if(la.length<2){let hr={instancePath:t+"/features/"+Oe+"/geometry/coordinates",schemaPath:"#/properties/features/items/properties/geometry/oneOf/1/properties/coordinates/minItems",keyword:"minItems",params:{limit:2},message:"must NOT have fewer than 2 items"};i===null?i=[hr]:i.push(hr),a++}else{var A=!0;let hr=la.length;for(let vn=0;vn<hr;vn++){let yn=la[vn],An=a;if(!(typeof yn=="number"&&isFinite(yn))){let hn={instancePath:t+"/features/"+Oe+"/geometry/coordinates/"+vn,schemaPath:"#/properties/features/items/properties/geometry/oneOf/1/properties/coordinates/items/type",keyword:"type",params:{type:"number"},message:"must be number"};i===null?i=[hn]:i.push(hn),a++}var A=An===a;if(!A)break}}}else{let hr={instancePath:t+"/features/"+Oe+"/geometry/coordinates",schemaPath:"#/properties/features/items/properties/geometry/oneOf/1/properties/coordinates/type",keyword:"type",params:{type:"array"},message:"must be array"};i===null?i=[hr]:i.push(hr),a++}var E=zt===a}else var E=!0;if(E)if(wt.bbox!==void 0){let la=wt.bbox,zt=a;if(a===zt)if(Array.isArray(la)){if(la.length<4){let hr={instancePath:t+"/features/"+Oe+"/geometry/bbox",schemaPath:"#/properties/features/items/properties/geometry/oneOf/1/properties/bbox/minItems",keyword:"minItems",params:{limit:4},message:"must NOT have fewer than 4 items"};i===null?i=[hr]:i.push(hr),a++}else{var P=!0;let hr=la.length;for(let vn=0;vn<hr;vn++){let yn=la[vn],An=a;if(!(typeof yn=="number"&&isFinite(yn))){let hn={instancePath:t+"/features/"+Oe+"/geometry/bbox/"+vn,schemaPath:"#/properties/features/items/properties/geometry/oneOf/1/properties/bbox/items/type",keyword:"type",params:{type:"number"},message:"must be number"};i===null?i=[hn]:i.push(hn),a++}var P=An===a;if(!P)break}}}else{let hr={instancePath:t+"/features/"+Oe+"/geometry/bbox",schemaPath:"#/properties/features/items/properties/geometry/oneOf/1/properties/bbox/type",keyword:"type",params:{type:"array"},message:"must be array"};i===null?i=[hr]:i.push(hr),a++}var E=zt===a}else var E=!0}}}else{let Un={instancePath:t+"/features/"+Oe+"/geometry",schemaPath:"#/properties/features/items/properties/geometry/oneOf/1/type",keyword:"type",params:{type:"object"},message:"must be object"};i===null?i=[Un]:i.push(Un),a++}var j=jo===a;if(j&&or)or=!1,Er=[Er,1];else{j&&(or=!0,Er=1);let Un=a;if(a===Un)if(wt&&typeof wt=="object"&&!Array.isArray(wt)){let zt;if(wt.type===void 0&&(zt="type")||wt.coordinates===void 0&&(zt="coordinates")){let Nr={instancePath:t+"/features/"+Oe+"/geometry",schemaPath:"#/properties/features/items/properties/geometry/oneOf/2/required",keyword:"required",params:{missingProperty:zt},message:"must have required property '"+zt+"'"};i===null?i=[Nr]:i.push(Nr),a++}else{if(wt.type!==void 0){let Nr=wt.type,hr=a;if(typeof Nr!="string"){let vn={instancePath:t+"/features/"+Oe+"/geometry/type",schemaPath:"#/properties/features/items/properties/geometry/oneOf/2/properties/type/type",keyword:"type",params:{type:"string"},message:"must be string"};i===null?i=[vn]:i.push(vn),a++}if(Nr!=="LineString"){let vn={instancePath:t+"/features/"+Oe+"/geometry/type",schemaPath:"#/properties/features/items/properties/geometry/oneOf/2/properties/type/enum",keyword:"enum",params:{allowedValues:Gu.properties.features.items.properties.geometry.oneOf[2].properties.type.enum},message:"must be equal to one of the allowed values"};i===null?i=[vn]:i.push(vn),a++}var D=hr===a}else var D=!0;if(D){if(wt.coordinates!==void 0){let Nr=wt.coordinates,hr=a;if(a===hr)if(Array.isArray(Nr)){if(Nr.length<2){let yn={instancePath:t+"/features/"+Oe+"/geometry/coordinates",schemaPath:"#/properties/features/items/properties/geometry/oneOf/2/properties/coordinates/minItems",keyword:"minItems",params:{limit:2},message:"must NOT have fewer than 2 items"};i===null?i=[yn]:i.push(yn),a++}else{var k=!0;let yn=Nr.length;for(let An=0;An<yn;An++){let lr=Nr[An],hn=a;if(a===hn)if(Array.isArray(lr)){if(lr.length<2){let on={instancePath:t+"/features/"+Oe+"/geometry/coordinates/"+An,schemaPath:"#/properties/features/items/properties/geometry/oneOf/2/properties/coordinates/items/minItems",keyword:"minItems",params:{limit:2},message:"must NOT have fewer than 2 items"};i===null?i=[on]:i.push(on),a++}else{var z=!0;let on=lr.length;for(let sn=0;sn<on;sn++){let Gr=lr[sn],Hr=a;if(!(typeof Gr=="number"&&isFinite(Gr))){let On={instancePath:t+"/features/"+Oe+"/geometry/coordinates/"+An+"/"+sn,schemaPath:"#/properties/features/items/properties/geometry/oneOf/2/properties/coordinates/items/items/type",keyword:"type",params:{type:"number"},message:"must be number"};i===null?i=[On]:i.push(On),a++}var z=Hr===a;if(!z)break}}}else{let on={instancePath:t+"/features/"+Oe+"/geometry/coordinates/"+An,schemaPath:"#/properties/features/items/properties/geometry/oneOf/2/properties/coordinates/items/type",keyword:"type",params:{type:"array"},message:"must be array"};i===null?i=[on]:i.push(on),a++}var k=hn===a;if(!k)break}}}else{let yn={instancePath:t+"/features/"+Oe+"/geometry/coordinates",schemaPath:"#/properties/features/items/properties/geometry/oneOf/2/properties/coordinates/type",keyword:"type",params:{type:"array"},message:"must be array"};i===null?i=[yn]:i.push(yn),a++}var D=hr===a}else var D=!0;if(D)if(wt.bbox!==void 0){let Nr=wt.bbox,hr=a;if(a===hr)if(Array.isArray(Nr)){if(Nr.length<4){let yn={instancePath:t+"/features/"+Oe+"/geometry/bbox",schemaPath:"#/properties/features/items/properties/geometry/oneOf/2/properties/bbox/minItems",keyword:"minItems",params:{limit:4},message:"must NOT have fewer than 4 items"};i===null?i=[yn]:i.push(yn),a++}else{var V=!0;let yn=Nr.length;for(let An=0;An<yn;An++){let lr=Nr[An],hn=a;if(!(typeof lr=="number"&&isFinite(lr))){let on={instancePath:t+"/features/"+Oe+"/geometry/bbox/"+An,schemaPath:"#/properties/features/items/properties/geometry/oneOf/2/properties/bbox/items/type",keyword:"type",params:{type:"number"},message:"must be number"};i===null?i=[on]:i.push(on),a++}var V=hn===a;if(!V)break}}}else{let yn={instancePath:t+"/features/"+Oe+"/geometry/bbox",schemaPath:"#/properties/features/items/properties/geometry/oneOf/2/properties/bbox/type",keyword:"type",params:{type:"array"},message:"must be array"};i===null?i=[yn]:i.push(yn),a++}var D=hr===a}else var D=!0}}}else{let zt={instancePath:t+"/features/"+Oe+"/geometry",schemaPath:"#/properties/features/items/properties/geometry/oneOf/2/type",keyword:"type",params:{type:"object"},message:"must be object"};i===null?i=[zt]:i.push(zt),a++}var j=Un===a;if(j&&or)or=!1,Er=[Er,2];else{j&&(or=!0,Er=2);let zt=a;if(a===zt)if(wt&&typeof wt=="object"&&!Array.isArray(wt)){let hr;if(wt.type===void 0&&(hr="type")||wt.coordinates===void 0&&(hr="coordinates")){let vn={instancePath:t+"/features/"+Oe+"/geometry",schemaPath:"#/properties/features/items/properties/geometry/oneOf/3/required",keyword:"required",params:{missingProperty:hr},message:"must have required property '"+hr+"'"};i===null?i=[vn]:i.push(vn),a++}else{if(wt.type!==void 0){let vn=wt.type,yn=a;if(typeof vn!="string"){let An={instancePath:t+"/features/"+Oe+"/geometry/type",schemaPath:"#/properties/features/items/properties/geometry/oneOf/3/properties/type/type",keyword:"type",params:{type:"string"},message:"must be string"};i===null?i=[An]:i.push(An),a++}if(vn!=="Polygon"){let An={instancePath:t+"/features/"+Oe+"/geometry/type",schemaPath:"#/properties/features/items/properties/geometry/oneOf/3/properties/type/enum",keyword:"enum",params:{allowedValues:Gu.properties.features.items.properties.geometry.oneOf[3].properties.type.enum},message:"must be equal to one of the allowed values"};i===null?i=[An]:i.push(An),a++}var G=yn===a}else var G=!0;if(G){if(wt.coordinates!==void 0){let vn=wt.coordinates,yn=a;if(a===yn)if(Array.isArray(vn)){var K=!0;let lr=vn.length;for(let hn=0;hn<lr;hn++){let _n=vn[hn],on=a;if(a===on)if(Array.isArray(_n)){if(_n.length<4){let Gr={instancePath:t+"/features/"+Oe+"/geometry/coordinates/"+hn,schemaPath:"#/properties/features/items/properties/geometry/oneOf/3/properties/coordinates/items/minItems",keyword:"minItems",params:{limit:4},message:"must NOT have fewer than 4 items"};i===null?i=[Gr]:i.push(Gr),a++}else{var Z=!0;let Gr=_n.length;for(let Hr=0;Hr<Gr;Hr++){let In=_n[Hr],On=a;if(a===On)if(Array.isArray(In)){if(In.length<2){let rr={instancePath:t+"/features/"+Oe+"/geometry/coordinates/"+hn+"/"+Hr,schemaPath:"#/properties/features/items/properties/geometry/oneOf/3/properties/coordinates/items/items/minItems",keyword:"minItems",params:{limit:2},message:"must NOT have fewer than 2 items"};i===null?i=[rr]:i.push(rr),a++}else{var te=!0;let rr=In.length;for(let li=0;li<rr;li++){let Ci=In[li],po=a;if(!(typeof Ci=="number"&&isFinite(Ci))){let Kl={instancePath:t+"/features/"+Oe+"/geometry/coordinates/"+hn+"/"+Hr+"/"+li,schemaPath:"#/properties/features/items/properties/geometry/oneOf/3/properties/coordinates/items/items/items/type",keyword:"type",params:{type:"number"},message:"must be number"};i===null?i=[Kl]:i.push(Kl),a++}var te=po===a;if(!te)break}}}else{let rr={instancePath:t+"/features/"+Oe+"/geometry/coordinates/"+hn+"/"+Hr,schemaPath:"#/properties/features/items/properties/geometry/oneOf/3/properties/coordinates/items/items/type",keyword:"type",params:{type:"array"},message:"must be array"};i===null?i=[rr]:i.push(rr),a++}var Z=On===a;if(!Z)break}}}else{let Gr={instancePath:t+"/features/"+Oe+"/geometry/coordinates/"+hn,schemaPath:"#/properties/features/items/properties/geometry/oneOf/3/properties/coordinates/items/type",keyword:"type",params:{type:"array"},message:"must be array"};i===null?i=[Gr]:i.push(Gr),a++}var K=on===a;if(!K)break}}else{let lr={instancePath:t+"/features/"+Oe+"/geometry/coordinates",schemaPath:"#/properties/features/items/properties/geometry/oneOf/3/properties/coordinates/type",keyword:"type",params:{type:"array"},message:"must be array"};i===null?i=[lr]:i.push(lr),a++}var G=yn===a}else var G=!0;if(G)if(wt.bbox!==void 0){let vn=wt.bbox,yn=a;if(a===yn)if(Array.isArray(vn)){if(vn.length<4){let lr={instancePath:t+"/features/"+Oe+"/geometry/bbox",schemaPath:"#/properties/features/items/properties/geometry/oneOf/3/properties/bbox/minItems",keyword:"minItems",params:{limit:4},message:"must NOT have fewer than 4 items"};i===null?i=[lr]:i.push(lr),a++}else{var se=!0;let lr=vn.length;for(let hn=0;hn<lr;hn++){let _n=vn[hn],on=a;if(!(typeof _n=="number"&&isFinite(_n))){let Gr={instancePath:t+"/features/"+Oe+"/geometry/bbox/"+hn,schemaPath:"#/properties/features/items/properties/geometry/oneOf/3/properties/bbox/items/type",keyword:"type",params:{type:"number"},message:"must be number"};i===null?i=[Gr]:i.push(Gr),a++}var se=on===a;if(!se)break}}}else{let lr={instancePath:t+"/features/"+Oe+"/geometry/bbox",schemaPath:"#/properties/features/items/properties/geometry/oneOf/3/properties/bbox/type",keyword:"type",params:{type:"array"},message:"must be array"};i===null?i=[lr]:i.push(lr),a++}var G=yn===a}else var G=!0}}}else{let hr={instancePath:t+"/features/"+Oe+"/geometry",schemaPath:"#/properties/features/items/properties/geometry/oneOf/3/type",keyword:"type",params:{type:"object"},message:"must be object"};i===null?i=[hr]:i.push(hr),a++}var j=zt===a;if(j&&or)or=!1,Er=[Er,3];else{j&&(or=!0,Er=3);let hr=a;if(a===hr)if(wt&&typeof wt=="object"&&!Array.isArray(wt)){let yn;if(wt.type===void 0&&(yn="type")||wt.coordinates===void 0&&(yn="coordinates")){let An={instancePath:t+"/features/"+Oe+"/geometry",schemaPath:"#/properties/features/items/properties/geometry/oneOf/4/required",keyword:"required",params:{missingProperty:yn},message:"must have required property '"+yn+"'"};i===null?i=[An]:i.push(An),a++}else{if(wt.type!==void 0){let An=wt.type,lr=a;if(typeof An!="string"){let hn={instancePath:t+"/features/"+Oe+"/geometry/type",schemaPath:"#/properties/features/items/properties/geometry/oneOf/4/properties/type/type",keyword:"type",params:{type:"string"},message:"must be string"};i===null?i=[hn]:i.push(hn),a++}if(An!=="MultiPoint"){let hn={instancePath:t+"/features/"+Oe+"/geometry/type",schemaPath:"#/properties/features/items/properties/geometry/oneOf/4/properties/type/enum",keyword:"enum",params:{allowedValues:Gu.properties.features.items.properties.geometry.oneOf[4].properties.type.enum},message:"must be equal to one of the allowed values"};i===null?i=[hn]:i.push(hn),a++}var le=lr===a}else var le=!0;if(le){if(wt.coordinates!==void 0){let An=wt.coordinates,lr=a;if(a===lr)if(Array.isArray(An)){var pe=!0;let _n=An.length;for(let on=0;on<_n;on++){let sn=An[on],Gr=a;if(a===Gr)if(Array.isArray(sn)){if(sn.length<2){let In={instancePath:t+"/features/"+Oe+"/geometry/coordinates/"+on,schemaPath:"#/properties/features/items/properties/geometry/oneOf/4/properties/coordinates/items/minItems",keyword:"minItems",params:{limit:2},message:"must NOT have fewer than 2 items"};i===null?i=[In]:i.push(In),a++}else{var me=!0;let In=sn.length;for(let On=0;On<In;On++){let Et=sn[On],rr=a;if(!(typeof Et=="number"&&isFinite(Et))){let Ci={instancePath:t+"/features/"+Oe+"/geometry/coordinates/"+on+"/"+On,schemaPath:"#/properties/features/items/properties/geometry/oneOf/4/properties/coordinates/items/items/type",keyword:"type",params:{type:"number"},message:"must be number"};i===null?i=[Ci]:i.push(Ci),a++}var me=rr===a;if(!me)break}}}else{let In={instancePath:t+"/features/"+Oe+"/geometry/coordinates/"+on,schemaPath:"#/properties/features/items/properties/geometry/oneOf/4/properties/coordinates/items/type",keyword:"type",params:{type:"array"},message:"must be array"};i===null?i=[In]:i.push(In),a++}var pe=Gr===a;if(!pe)break}}else{let _n={instancePath:t+"/features/"+Oe+"/geometry/coordinates",schemaPath:"#/properties/features/items/properties/geometry/oneOf/4/properties/coordinates/type",keyword:"type",params:{type:"array"},message:"must be array"};i===null?i=[_n]:i.push(_n),a++}var le=lr===a}else var le=!0;if(le)if(wt.bbox!==void 0){let An=wt.bbox,lr=a;if(a===lr)if(Array.isArray(An)){if(An.length<4){let _n={instancePath:t+"/features/"+Oe+"/geometry/bbox",schemaPath:"#/properties/features/items/properties/geometry/oneOf/4/properties/bbox/minItems",keyword:"minItems",params:{limit:4},message:"must NOT have fewer than 4 items"};i===null?i=[_n]:i.push(_n),a++}else{var _e=!0;let _n=An.length;for(let on=0;on<_n;on++){let sn=An[on],Gr=a;if(!(typeof sn=="number"&&isFinite(sn))){let In={instancePath:t+"/features/"+Oe+"/geometry/bbox/"+on,schemaPath:"#/properties/features/items/properties/geometry/oneOf/4/properties/bbox/items/type",keyword:"type",params:{type:"number"},message:"must be number"};i===null?i=[In]:i.push(In),a++}var _e=Gr===a;if(!_e)break}}}else{let _n={instancePath:t+"/features/"+Oe+"/geometry/bbox",schemaPath:"#/properties/features/items/properties/geometry/oneOf/4/properties/bbox/type",keyword:"type",params:{type:"array"},message:"must be array"};i===null?i=[_n]:i.push(_n),a++}var le=lr===a}else var le=!0}}}else{let yn={instancePath:t+"/features/"+Oe+"/geometry",schemaPath:"#/properties/features/items/properties/geometry/oneOf/4/type",keyword:"type",params:{type:"object"},message:"must be object"};i===null?i=[yn]:i.push(yn),a++}var j=hr===a;if(j&&or)or=!1,Er=[Er,4];else{j&&(or=!0,Er=4);let yn=a;if(a===yn)if(wt&&typeof wt=="object"&&!Array.isArray(wt)){let lr;if(wt.type===void 0&&(lr="type")||wt.coordinates===void 0&&(lr="coordinates")){let hn={instancePath:t+"/features/"+Oe+"/geometry",schemaPath:"#/properties/features/items/properties/geometry/oneOf/5/required",keyword:"required",params:{missingProperty:lr},message:"must have required property '"+lr+"'"};i===null?i=[hn]:i.push(hn),a++}else{if(wt.type!==void 0){let hn=wt.type,_n=a;if(typeof hn!="string"){let on={instancePath:t+"/features/"+Oe+"/geometry/type",schemaPath:"#/properties/features/items/properties/geometry/oneOf/5/properties/type/type",keyword:"type",params:{type:"string"},message:"must be string"};i===null?i=[on]:i.push(on),a++}if(hn!=="MultiLineString"){let on={instancePath:t+"/features/"+Oe+"/geometry/type",schemaPath:"#/properties/features/items/properties/geometry/oneOf/5/properties/type/enum",keyword:"enum",params:{allowedValues:Gu.properties.features.items.properties.geometry.oneOf[5].properties.type.enum},message:"must be equal to one of the allowed values"};i===null?i=[on]:i.push(on),a++}var de=_n===a}else var de=!0;if(de){if(wt.coordinates!==void 0){let hn=wt.coordinates,_n=a;if(a===_n)if(Array.isArray(hn)){var Ce=!0;let sn=hn.length;for(let Gr=0;Gr<sn;Gr++){let Hr=hn[Gr],In=a;if(a===In)if(Array.isArray(Hr)){if(Hr.length<2){let Et={instancePath:t+"/features/"+Oe+"/geometry/coordinates/"+Gr,schemaPath:"#/properties/features/items/properties/geometry/oneOf/5/properties/coordinates/items/minItems",keyword:"minItems",params:{limit:2},message:"must NOT have fewer than 2 items"};i===null?i=[Et]:i.push(Et),a++}else{var Ye=!0;let Et=Hr.length;for(let rr=0;rr<Et;rr++){let li=Hr[rr],Ci=a;if(a===Ci)if(Array.isArray(li)){if(li.length<2){let so={instancePath:t+"/features/"+Oe+"/geometry/coordinates/"+Gr+"/"+rr,schemaPath:"#/properties/features/items/properties/geometry/oneOf/5/properties/coordinates/items/items/minItems",keyword:"minItems",params:{limit:2},message:"must NOT have fewer than 2 items"};i===null?i=[so]:i.push(so),a++}else{var rt=!0;let so=li.length;for(let Kl=0;Kl<so;Kl++){let Us=li[Kl],Kc=a;if(!(typeof Us=="number"&&isFinite(Us))){let Kn={instancePath:t+"/features/"+Oe+"/geometry/coordinates/"+Gr+"/"+rr+"/"+Kl,schemaPath:"#/properties/features/items/properties/geometry/oneOf/5/properties/coordinates/items/items/items/type",keyword:"type",params:{type:"number"},message:"must be number"};i===null?i=[Kn]:i.push(Kn),a++}var rt=Kc===a;if(!rt)break}}}else{let so={instancePath:t+"/features/"+Oe+"/geometry/coordinates/"+Gr+"/"+rr,schemaPath:"#/properties/features/items/properties/geometry/oneOf/5/properties/coordinates/items/items/type",keyword:"type",params:{type:"array"},message:"must be array"};i===null?i=[so]:i.push(so),a++}var Ye=Ci===a;if(!Ye)break}}}else{let Et={instancePath:t+"/features/"+Oe+"/geometry/coordinates/"+Gr,schemaPath:"#/properties/features/items/properties/geometry/oneOf/5/properties/coordinates/items/type",keyword:"type",params:{type:"array"},message:"must be array"};i===null?i=[Et]:i.push(Et),a++}var Ce=In===a;if(!Ce)break}}else{let sn={instancePath:t+"/features/"+Oe+"/geometry/coordinates",schemaPath:"#/properties/features/items/properties/geometry/oneOf/5/properties/coordinates/type",keyword:"type",params:{type:"array"},message:"must be array"};i===null?i=[sn]:i.push(sn),a++}var de=_n===a}else var de=!0;if(de)if(wt.bbox!==void 0){let hn=wt.bbox,_n=a;if(a===_n)if(Array.isArray(hn)){if(hn.length<4){let sn={instancePath:t+"/features/"+Oe+"/geometry/bbox",schemaPath:"#/properties/features/items/properties/geometry/oneOf/5/properties/bbox/minItems",keyword:"minItems",params:{limit:4},message:"must NOT have fewer than 4 items"};i===null?i=[sn]:i.push(sn),a++}else{var ct=!0;let sn=hn.length;for(let Gr=0;Gr<sn;Gr++){let Hr=hn[Gr],In=a;if(!(typeof Hr=="number"&&isFinite(Hr))){let Et={instancePath:t+"/features/"+Oe+"/geometry/bbox/"+Gr,schemaPath:"#/properties/features/items/properties/geometry/oneOf/5/properties/bbox/items/type",keyword:"type",params:{type:"number"},message:"must be number"};i===null?i=[Et]:i.push(Et),a++}var ct=In===a;if(!ct)break}}}else{let sn={instancePath:t+"/features/"+Oe+"/geometry/bbox",schemaPath:"#/properties/features/items/properties/geometry/oneOf/5/properties/bbox/type",keyword:"type",params:{type:"array"},message:"must be array"};i===null?i=[sn]:i.push(sn),a++}var de=_n===a}else var de=!0}}}else{let lr={instancePath:t+"/features/"+Oe+"/geometry",schemaPath:"#/properties/features/items/properties/geometry/oneOf/5/type",keyword:"type",params:{type:"object"},message:"must be object"};i===null?i=[lr]:i.push(lr),a++}var j=yn===a;if(j&&or)or=!1,Er=[Er,5];else{j&&(or=!0,Er=5);let lr=a;if(a===lr)if(wt&&typeof wt=="object"&&!Array.isArray(wt)){let _n;if(wt.type===void 0&&(_n="type")||wt.coordinates===void 0&&(_n="coordinates")){let on={instancePath:t+"/features/"+Oe+"/geometry",schemaPath:"#/properties/features/items/properties/geometry/oneOf/6/required",keyword:"required",params:{missingProperty:_n},message:"must have required property '"+_n+"'"};i===null?i=[on]:i.push(on),a++}else{if(wt.type!==void 0){let on=wt.type,sn=a;if(typeof on!="string"){let Gr={instancePath:t+"/features/"+Oe+"/geometry/type",schemaPath:"#/properties/features/items/properties/geometry/oneOf/6/properties/type/type",keyword:"type",params:{type:"string"},message:"must be string"};i===null?i=[Gr]:i.push(Gr),a++}if(on!=="MultiPolygon"){let Gr={instancePath:t+"/features/"+Oe+"/geometry/type",schemaPath:"#/properties/features/items/properties/geometry/oneOf/6/properties/type/enum",keyword:"enum",params:{allowedValues:Gu.properties.features.items.properties.geometry.oneOf[6].properties.type.enum},message:"must be equal to one of the allowed values"};i===null?i=[Gr]:i.push(Gr),a++}var qe=sn===a}else var qe=!0;if(qe){if(wt.coordinates!==void 0){let on=wt.coordinates,sn=a;if(a===sn)if(Array.isArray(on)){var lt=!0;let Hr=on.length;for(let In=0;In<Hr;In++){let On=on[In],Et=a;if(a===Et)if(Array.isArray(On)){var bt=!0;let li=On.length;for(let Ci=0;Ci<li;Ci++){let po=On[Ci],so=a;if(a===so)if(Array.isArray(po)){if(po.length<4){let Us={instancePath:t+"/features/"+Oe+"/geometry/coordinates/"+In+"/"+Ci,schemaPath:"#/properties/features/items/properties/geometry/oneOf/6/properties/coordinates/items/items/minItems",keyword:"minItems",params:{limit:4},message:"must NOT have fewer than 4 items"};i===null?i=[Us]:i.push(Us),a++}else{var Tt=!0;let Us=po.length;for(let Kc=0;Kc<Us;Kc++){let Eo=po[Kc],Kn=a;if(a===Kn)if(Array.isArray(Eo)){if(Eo.length<2){let fo={instancePath:t+"/features/"+Oe+"/geometry/coordinates/"+In+"/"+Ci+"/"+Kc,schemaPath:"#/properties/features/items/properties/geometry/oneOf/6/properties/coordinates/items/items/items/minItems",keyword:"minItems",params:{limit:2},message:"must NOT have fewer than 2 items"};i===null?i=[fo]:i.push(fo),a++}else{var et=!0;let fo=Eo.length;for(let Zr=0;Zr<fo;Zr++){let mn=Eo[Zr],nn=a;if(!(typeof mn=="number"&&isFinite(mn))){let Bn={instancePath:t+"/features/"+Oe+"/geometry/coordinates/"+In+"/"+Ci+"/"+Kc+"/"+Zr,schemaPath:"#/properties/features/items/properties/geometry/oneOf/6/properties/coordinates/items/items/items/items/type",keyword:"type",params:{type:"number"},message:"must be number"};i===null?i=[Bn]:i.push(Bn),a++}var et=nn===a;if(!et)break}}}else{let fo={instancePath:t+"/features/"+Oe+"/geometry/coordinates/"+In+"/"+Ci+"/"+Kc,schemaPath:"#/properties/features/items/properties/geometry/oneOf/6/properties/coordinates/items/items/items/type",keyword:"type",params:{type:"array"},message:"must be array"};i===null?i=[fo]:i.push(fo),a++}var Tt=Kn===a;if(!Tt)break}}}else{let Us={instancePath:t+"/features/"+Oe+"/geometry/coordinates/"+In+"/"+Ci,schemaPath:"#/properties/features/items/properties/geometry/oneOf/6/properties/coordinates/items/items/type",keyword:"type",params:{type:"array"},message:"must be array"};i===null?i=[Us]:i.push(Us),a++}var bt=so===a;if(!bt)break}}else{let li={instancePath:t+"/features/"+Oe+"/geometry/coordinates/"+In,schemaPath:"#/properties/features/items/properties/geometry/oneOf/6/properties/coordinates/items/type",keyword:"type",params:{type:"array"},message:"must be array"};i===null?i=[li]:i.push(li),a++}var lt=Et===a;if(!lt)break}}else{let Hr={instancePath:t+"/features/"+Oe+"/geometry/coordinates",schemaPath:"#/properties/features/items/properties/geometry/oneOf/6/properties/coordinates/type",keyword:"type",params:{type:"array"},message:"must be array"};i===null?i=[Hr]:i.push(Hr),a++}var qe=sn===a}else var qe=!0;if(qe)if(wt.bbox!==void 0){let on=wt.bbox,sn=a;if(a===sn)if(Array.isArray(on)){if(on.length<4){let Hr={instancePath:t+"/features/"+Oe+"/geometry/bbox",schemaPath:"#/properties/features/items/properties/geometry/oneOf/6/properties/bbox/minItems",keyword:"minItems",params:{limit:4},message:"must NOT have fewer than 4 items"};i===null?i=[Hr]:i.push(Hr),a++}else{var pt=!0;let Hr=on.length;for(let In=0;In<Hr;In++){let On=on[In],Et=a;if(!(typeof On=="number"&&isFinite(On))){let li={instancePath:t+"/features/"+Oe+"/geometry/bbox/"+In,schemaPath:"#/properties/features/items/properties/geometry/oneOf/6/properties/bbox/items/type",keyword:"type",params:{type:"number"},message:"must be number"};i===null?i=[li]:i.push(li),a++}var pt=Et===a;if(!pt)break}}}else{let Hr={instancePath:t+"/features/"+Oe+"/geometry/bbox",schemaPath:"#/properties/features/items/properties/geometry/oneOf/6/properties/bbox/type",keyword:"type",params:{type:"array"},message:"must be array"};i===null?i=[Hr]:i.push(Hr),a++}var qe=sn===a}else var qe=!0}}}else{let _n={instancePath:t+"/features/"+Oe+"/geometry",schemaPath:"#/properties/features/items/properties/geometry/oneOf/6/type",keyword:"type",params:{type:"object"},message:"must be object"};i===null?i=[_n]:i.push(_n),a++}var j=lr===a;if(j&&or)or=!1,Er=[Er,6];else{j&&(or=!0,Er=6);let _n=a;if(a===_n)if(wt&&typeof wt=="object"&&!Array.isArray(wt)){let sn;if(wt.type===void 0&&(sn="type")||wt.geometries===void 0&&(sn="geometries")){let Gr={instancePath:t+"/features/"+Oe+"/geometry",schemaPath:"#/properties/features/items/properties/geometry/oneOf/7/required",keyword:"required",params:{missingProperty:sn},message:"must have required property '"+sn+"'"};i===null?i=[Gr]:i.push(Gr),a++}else{if(wt.type!==void 0){let Gr=wt.type,Hr=a;if(typeof Gr!="string"){let In={instancePath:t+"/features/"+Oe+"/geometry/type",schemaPath:"#/properties/features/items/properties/geometry/oneOf/7/properties/type/type",keyword:"type",params:{type:"string"},message:"must be string"};i===null?i=[In]:i.push(In),a++}if(Gr!=="GeometryCollection"){let In={instancePath:t+"/features/"+Oe+"/geometry/type",schemaPath:"#/properties/features/items/properties/geometry/oneOf/7/properties/type/enum",keyword:"enum",params:{allowedValues:Gu.properties.features.items.properties.geometry.oneOf[7].properties.type.enum},message:"must be equal to one of the allowed values"};i===null?i=[In]:i.push(In),a++}var ot=Hr===a}else var ot=!0;if(ot){if(wt.geometries!==void 0){let Gr=wt.geometries,Hr=a;if(a===Hr)if(Array.isArray(Gr)){var We=!0;let On=Gr.length;for(let Et=0;Et<On;Et++){let rr=Gr[Et],li=a,Ci=a,po=!1,so=null,Kl=a;if(a===Kl)if(rr&&typeof rr=="object"&&!Array.isArray(rr)){let Eo;if(rr.type===void 0&&(Eo="type")||rr.coordinates===void 0&&(Eo="coordinates")){let Kn={instancePath:t+"/features/"+Oe+"/geometry/geometries/"+Et,schemaPath:"#/properties/features/items/properties/geometry/oneOf/7/properties/geometries/items/oneOf/0/required",keyword:"required",params:{missingProperty:Eo},message:"must have required property '"+Eo+"'"};i===null?i=[Kn]:i.push(Kn),a++}else{if(rr.type!==void 0){let Kn=rr.type,ri=a;if(typeof Kn!="string"){let fo={instancePath:t+"/features/"+Oe+"/geometry/geometries/"+Et+"/type",schemaPath:"#/properties/features/items/properties/geometry/oneOf/7/properties/geometries/items/oneOf/0/properties/type/type",keyword:"type",params:{type:"string"},message:"must be string"};i===null?i=[fo]:i.push(fo),a++}if(Kn!=="Point"){let fo={instancePath:t+"/features/"+Oe+"/geometry/geometries/"+Et+"/type",schemaPath:"#/properties/features/items/properties/geometry/oneOf/7/properties/geometries/items/oneOf/0/properties/type/enum",keyword:"enum",params:{allowedValues:Gu.properties.features.items.properties.geometry.oneOf[7].properties.geometries.items.oneOf[0].properties.type.enum},message:"must be equal to one of the allowed values"};i===null?i=[fo]:i.push(fo),a++}var Ne=ri===a}else var Ne=!0;if(Ne){if(rr.coordinates!==void 0){let Kn=rr.coordinates,ri=a;if(a===ri)if(Array.isArray(Kn)){if(Kn.length<2){let Zr={instancePath:t+"/features/"+Oe+"/geometry/geometries/"+Et+"/coordinates",schemaPath:"#/properties/features/items/properties/geometry/oneOf/7/properties/geometries/items/oneOf/0/properties/coordinates/minItems",keyword:"minItems",params:{limit:2},message:"must NOT have fewer than 2 items"};i===null?i=[Zr]:i.push(Zr),a++}else{var Ke=!0;let Zr=Kn.length;for(let mn=0;mn<Zr;mn++){let nn=Kn[mn],xn=a;if(!(typeof nn=="number"&&isFinite(nn))){let Br={instancePath:t+"/features/"+Oe+"/geometry/geometries/"+Et+"/coordinates/"+mn,schemaPath:"#/properties/features/items/properties/geometry/oneOf/7/properties/geometries/items/oneOf/0/properties/coordinates/items/type",keyword:"type",params:{type:"number"},message:"must be number"};i===null?i=[Br]:i.push(Br),a++}var Ke=xn===a;if(!Ke)break}}}else{let Zr={instancePath:t+"/features/"+Oe+"/geometry/geometries/"+Et+"/coordinates",schemaPath:"#/properties/features/items/properties/geometry/oneOf/7/properties/geometries/items/oneOf/0/properties/coordinates/type",keyword:"type",params:{type:"array"},message:"must be array"};i===null?i=[Zr]:i.push(Zr),a++}var Ne=ri===a}else var Ne=!0;if(Ne)if(rr.bbox!==void 0){let Kn=rr.bbox,ri=a;if(a===ri)if(Array.isArray(Kn)){if(Kn.length<4){let Zr={instancePath:t+"/features/"+Oe+"/geometry/geometries/"+Et+"/bbox",schemaPath:"#/properties/features/items/properties/geometry/oneOf/7/properties/geometries/items/oneOf/0/properties/bbox/minItems",keyword:"minItems",params:{limit:4},message:"must NOT have fewer than 4 items"};i===null?i=[Zr]:i.push(Zr),a++}else{var Ge=!0;let Zr=Kn.length;for(let mn=0;mn<Zr;mn++){let nn=Kn[mn],xn=a;if(!(typeof nn=="number"&&isFinite(nn))){let Br={instancePath:t+"/features/"+Oe+"/geometry/geometries/"+Et+"/bbox/"+mn,schemaPath:"#/properties/features/items/properties/geometry/oneOf/7/properties/geometries/items/oneOf/0/properties/bbox/items/type",keyword:"type",params:{type:"number"},message:"must be number"};i===null?i=[Br]:i.push(Br),a++}var Ge=xn===a;if(!Ge)break}}}else{let Zr={instancePath:t+"/features/"+Oe+"/geometry/geometries/"+Et+"/bbox",schemaPath:"#/properties/features/items/properties/geometry/oneOf/7/properties/geometries/items/oneOf/0/properties/bbox/type",keyword:"type",params:{type:"array"},message:"must be array"};i===null?i=[Zr]:i.push(Zr),a++}var Ne=ri===a}else var Ne=!0}}}else{let Eo={instancePath:t+"/features/"+Oe+"/geometry/geometries/"+Et,schemaPath:"#/properties/features/items/properties/geometry/oneOf/7/properties/geometries/items/oneOf/0/type",keyword:"type",params:{type:"object"},message:"must be object"};i===null?i=[Eo]:i.push(Eo),a++}var Mt=Kl===a;Mt&&(po=!0,so=0);let Us=a;if(a===Us)if(rr&&typeof rr=="object"&&!Array.isArray(rr)){let Eo;if(rr.type===void 0&&(Eo="type")||rr.coordinates===void 0&&(Eo="coordinates")){let Kn={instancePath:t+"/features/"+Oe+"/geometry/geometries/"+Et,schemaPath:"#/properties/features/items/properties/geometry/oneOf/7/properties/geometries/items/oneOf/1/required",keyword:"required",params:{missingProperty:Eo},message:"must have required property '"+Eo+"'"};i===null?i=[Kn]:i.push(Kn),a++}else{if(rr.type!==void 0){let Kn=rr.type,ri=a;if(typeof Kn!="string"){let fo={instancePath:t+"/features/"+Oe+"/geometry/geometries/"+Et+"/type",schemaPath:"#/properties/features/items/properties/geometry/oneOf/7/properties/geometries/items/oneOf/1/properties/type/type",keyword:"type",params:{type:"string"},message:"must be string"};i===null?i=[fo]:i.push(fo),a++}if(Kn!=="LineString"){let fo={instancePath:t+"/features/"+Oe+"/geometry/geometries/"+Et+"/type",schemaPath:"#/properties/features/items/properties/geometry/oneOf/7/properties/geometries/items/oneOf/1/properties/type/enum",keyword:"enum",params:{allowedValues:Gu.properties.features.items.properties.geometry.oneOf[7].properties.geometries.items.oneOf[1].properties.type.enum},message:"must be equal to one of the allowed values"};i===null?i=[fo]:i.push(fo),a++}var ft=ri===a}else var ft=!0;if(ft){if(rr.coordinates!==void 0){let Kn=rr.coordinates,ri=a;if(a===ri)if(Array.isArray(Kn)){if(Kn.length<2){let Zr={instancePath:t+"/features/"+Oe+"/geometry/geometries/"+Et+"/coordinates",schemaPath:"#/properties/features/items/properties/geometry/oneOf/7/properties/geometries/items/oneOf/1/properties/coordinates/minItems",keyword:"minItems",params:{limit:2},message:"must NOT have fewer than 2 items"};i===null?i=[Zr]:i.push(Zr),a++}else{var mt=!0;let Zr=Kn.length;for(let mn=0;mn<Zr;mn++){let nn=Kn[mn],xn=a;if(a===xn)if(Array.isArray(nn)){if(nn.length<2){let Br={instancePath:t+"/features/"+Oe+"/geometry/geometries/"+Et+"/coordinates/"+mn,schemaPath:"#/properties/features/items/properties/geometry/oneOf/7/properties/geometries/items/oneOf/1/properties/coordinates/items/minItems",keyword:"minItems",params:{limit:2},message:"must NOT have fewer than 2 items"};i===null?i=[Br]:i.push(Br),a++}else{var Ot=!0;let Br=nn.length;for(let lo=0;lo<Br;lo++){let Hn=nn[lo],qo=a;if(!(typeof Hn=="number"&&isFinite(Hn))){let Yi={instancePath:t+"/features/"+Oe+"/geometry/geometries/"+Et+"/coordinates/"+mn+"/"+lo,schemaPath:"#/properties/features/items/properties/geometry/oneOf/7/properties/geometries/items/oneOf/1/properties/coordinates/items/items/type",keyword:"type",params:{type:"number"},message:"must be number"};i===null?i=[Yi]:i.push(Yi),a++}var Ot=qo===a;if(!Ot)break}}}else{let Br={instancePath:t+"/features/"+Oe+"/geometry/geometries/"+Et+"/coordinates/"+mn,schemaPath:"#/properties/features/items/properties/geometry/oneOf/7/properties/geometries/items/oneOf/1/properties/coordinates/items/type",keyword:"type",params:{type:"array"},message:"must be array"};i===null?i=[Br]:i.push(Br),a++}var mt=xn===a;if(!mt)break}}}else{let Zr={instancePath:t+"/features/"+Oe+"/geometry/geometries/"+Et+"/coordinates",schemaPath:"#/properties/features/items/properties/geometry/oneOf/7/properties/geometries/items/oneOf/1/properties/coordinates/type",keyword:"type",params:{type:"array"},message:"must be array"};i===null?i=[Zr]:i.push(Zr),a++}var ft=ri===a}else var ft=!0;if(ft)if(rr.bbox!==void 0){let Kn=rr.bbox,ri=a;if(a===ri)if(Array.isArray(Kn)){if(Kn.length<4){let Zr={instancePath:t+"/features/"+Oe+"/geometry/geometries/"+Et+"/bbox",schemaPath:"#/properties/features/items/properties/geometry/oneOf/7/properties/geometries/items/oneOf/1/properties/bbox/minItems",keyword:"minItems",params:{limit:4},message:"must NOT have fewer than 4 items"};i===null?i=[Zr]:i.push(Zr),a++}else{var At=!0;let Zr=Kn.length;for(let mn=0;mn<Zr;mn++){let nn=Kn[mn],xn=a;if(!(typeof nn=="number"&&isFinite(nn))){let Br={instancePath:t+"/features/"+Oe+"/geometry/geometries/"+Et+"/bbox/"+mn,schemaPath:"#/properties/features/items/properties/geometry/oneOf/7/properties/geometries/items/oneOf/1/properties/bbox/items/type",keyword:"type",params:{type:"number"},message:"must be number"};i===null?i=[Br]:i.push(Br),a++}var At=xn===a;if(!At)break}}}else{let Zr={instancePath:t+"/features/"+Oe+"/geometry/geometries/"+Et+"/bbox",schemaPath:"#/properties/features/items/properties/geometry/oneOf/7/properties/geometries/items/oneOf/1/properties/bbox/type",keyword:"type",params:{type:"array"},message:"must be array"};i===null?i=[Zr]:i.push(Zr),a++}var ft=ri===a}else var ft=!0}}}else{let Eo={instancePath:t+"/features/"+Oe+"/geometry/geometries/"+Et,schemaPath:"#/properties/features/items/properties/geometry/oneOf/7/properties/geometries/items/oneOf/1/type",keyword:"type",params:{type:"object"},message:"must be object"};i===null?i=[Eo]:i.push(Eo),a++}var Mt=Us===a;if(Mt&&po)po=!1,so=[so,1];else{Mt&&(po=!0,so=1);let Eo=a;if(a===Eo)if(rr&&typeof rr=="object"&&!Array.isArray(rr)){let ri;if(rr.type===void 0&&(ri="type")||rr.coordinates===void 0&&(ri="coordinates")){let fo={instancePath:t+"/features/"+Oe+"/geometry/geometries/"+Et,schemaPath:"#/properties/features/items/properties/geometry/oneOf/7/properties/geometries/items/oneOf/2/required",keyword:"required",params:{missingProperty:ri},message:"must have required property '"+ri+"'"};i===null?i=[fo]:i.push(fo),a++}else{if(rr.type!==void 0){let fo=rr.type,Zr=a;if(typeof fo!="string"){let mn={instancePath:t+"/features/"+Oe+"/geometry/geometries/"+Et+"/type",schemaPath:"#/properties/features/items/properties/geometry/oneOf/7/properties/geometries/items/oneOf/2/properties/type/type",keyword:"type",params:{type:"string"},message:"must be string"};i===null?i=[mn]:i.push(mn),a++}if(fo!=="Polygon"){let mn={instancePath:t+"/features/"+Oe+"/geometry/geometries/"+Et+"/type",schemaPath:"#/properties/features/items/properties/geometry/oneOf/7/properties/geometries/items/oneOf/2/properties/type/enum",keyword:"enum",params:{allowedValues:Gu.properties.features.items.properties.geometry.oneOf[7].properties.geometries.items.oneOf[2].properties.type.enum},message:"must be equal to one of the allowed values"};i===null?i=[mn]:i.push(mn),a++}var Yt=Zr===a}else var Yt=!0;if(Yt){if(rr.coordinates!==void 0){let fo=rr.coordinates,Zr=a;if(a===Zr)if(Array.isArray(fo)){var qt=!0;let nn=fo.length;for(let xn=0;xn<nn;xn++){let Bn=fo[xn],Br=a;if(a===Br)if(Array.isArray(Bn)){if(Bn.length<4){let Hn={instancePath:t+"/features/"+Oe+"/geometry/geometries/"+Et+"/coordinates/"+xn,schemaPath:"#/properties/features/items/properties/geometry/oneOf/7/properties/geometries/items/oneOf/2/properties/coordinates/items/minItems",keyword:"minItems",params:{limit:4},message:"must NOT have fewer than 4 items"};i===null?i=[Hn]:i.push(Hn),a++}else{var Ut=!0;let Hn=Bn.length;for(let qo=0;qo<Hn;qo++){let Wn=Bn[qo],Yi=a;if(a===Yi)if(Array.isArray(Wn)){if(Wn.length<2){let Wr={instancePath:t+"/features/"+Oe+"/geometry/geometries/"+Et+"/coordinates/"+xn+"/"+qo,schemaPath:"#/properties/features/items/properties/geometry/oneOf/7/properties/geometries/items/oneOf/2/properties/coordinates/items/items/minItems",keyword:"minItems",params:{limit:2},message:"must NOT have fewer than 2 items"};i===null?i=[Wr]:i.push(Wr),a++}else{var sr=!0;let Wr=Wn.length;for(let Ai=0;Ai<Wr;Ai++){let _i=Wn[Ai],Bs=a;if(!(typeof _i=="number"&&isFinite(_i))){let gn={instancePath:t+"/features/"+Oe+"/geometry/geometries/"+Et+"/coordinates/"+xn+"/"+qo+"/"+Ai,schemaPath:"#/properties/features/items/properties/geometry/oneOf/7/properties/geometries/items/oneOf/2/properties/coordinates/items/items/items/type",keyword:"type",params:{type:"number"},message:"must be number"};i===null?i=[gn]:i.push(gn),a++}var sr=Bs===a;if(!sr)break}}}else{let Wr={instancePath:t+"/features/"+Oe+"/geometry/geometries/"+Et+"/coordinates/"+xn+"/"+qo,schemaPath:"#/properties/features/items/properties/geometry/oneOf/7/properties/geometries/items/oneOf/2/properties/coordinates/items/items/type",keyword:"type",params:{type:"array"},message:"must be array"};i===null?i=[Wr]:i.push(Wr),a++}var Ut=Yi===a;if(!Ut)break}}}else{let Hn={instancePath:t+"/features/"+Oe+"/geometry/geometries/"+Et+"/coordinates/"+xn,schemaPath:"#/properties/features/items/properties/geometry/oneOf/7/properties/geometries/items/oneOf/2/properties/coordinates/items/type",keyword:"type",params:{type:"array"},message:"must be array"};i===null?i=[Hn]:i.push(Hn),a++}var qt=Br===a;if(!qt)break}}else{let nn={instancePath:t+"/features/"+Oe+"/geometry/geometries/"+Et+"/coordinates",schemaPath:"#/properties/features/items/properties/geometry/oneOf/7/properties/geometries/items/oneOf/2/properties/coordinates/type",keyword:"type",params:{type:"array"},message:"must be array"};i===null?i=[nn]:i.push(nn),a++}var Yt=Zr===a}else var Yt=!0;if(Yt)if(rr.bbox!==void 0){let fo=rr.bbox,Zr=a;if(a===Zr)if(Array.isArray(fo)){if(fo.length<4){let nn={instancePath:t+"/features/"+Oe+"/geometry/geometries/"+Et+"/bbox",schemaPath:"#/properties/features/items/properties/geometry/oneOf/7/properties/geometries/items/oneOf/2/properties/bbox/minItems",keyword:"minItems",params:{limit:4},message:"must NOT have fewer than 4 items"};i===null?i=[nn]:i.push(nn),a++}else{var jr=!0;let nn=fo.length;for(let xn=0;xn<nn;xn++){let Bn=fo[xn],Br=a;if(!(typeof Bn=="number"&&isFinite(Bn))){let Hn={instancePath:t+"/features/"+Oe+"/geometry/geometries/"+Et+"/bbox/"+xn,schemaPath:"#/properties/features/items/properties/geometry/oneOf/7/properties/geometries/items/oneOf/2/properties/bbox/items/type",keyword:"type",params:{type:"number"},message:"must be number"};i===null?i=[Hn]:i.push(Hn),a++}var jr=Br===a;if(!jr)break}}}else{let nn={instancePath:t+"/features/"+Oe+"/geometry/geometries/"+Et+"/bbox",schemaPath:"#/properties/features/items/properties/geometry/oneOf/7/properties/geometries/items/oneOf/2/properties/bbox/type",keyword:"type",params:{type:"array"},message:"must be array"};i===null?i=[nn]:i.push(nn),a++}var Yt=Zr===a}else var Yt=!0}}}else{let ri={instancePath:t+"/features/"+Oe+"/geometry/geometries/"+Et,schemaPath:"#/properties/features/items/properties/geometry/oneOf/7/properties/geometries/items/oneOf/2/type",keyword:"type",params:{type:"object"},message:"must be object"};i===null?i=[ri]:i.push(ri),a++}var Mt=Eo===a;if(Mt&&po)po=!1,so=[so,2];else{Mt&&(po=!0,so=2);let ri=a;if(a===ri)if(rr&&typeof rr=="object"&&!Array.isArray(rr)){let Zr;if(rr.type===void 0&&(Zr="type")||rr.coordinates===void 0&&(Zr="coordinates")){let mn={instancePath:t+"/features/"+Oe+"/geometry/geometries/"+Et,schemaPath:"#/properties/features/items/properties/geometry/oneOf/7/properties/geometries/items/oneOf/3/required",keyword:"required",params:{missingProperty:Zr},message:"must have required property '"+Zr+"'"};i===null?i=[mn]:i.push(mn),a++}else{if(rr.type!==void 0){let mn=rr.type,nn=a;if(typeof mn!="string"){let xn={instancePath:t+"/features/"+Oe+"/geometry/geometries/"+Et+"/type",schemaPath:"#/properties/features/items/properties/geometry/oneOf/7/properties/geometries/items/oneOf/3/properties/type/type",keyword:"type",params:{type:"string"},message:"must be string"};i===null?i=[xn]:i.push(xn),a++}if(mn!=="MultiPoint"){let xn={instancePath:t+"/features/"+Oe+"/geometry/geometries/"+Et+"/type",schemaPath:"#/properties/features/items/properties/geometry/oneOf/7/properties/geometries/items/oneOf/3/properties/type/enum",keyword:"enum",params:{allowedValues:Gu.properties.features.items.properties.geometry.oneOf[7].properties.geometries.items.oneOf[3].properties.type.enum},message:"must be equal to one of the allowed values"};i===null?i=[xn]:i.push(xn),a++}var Pr=nn===a}else var Pr=!0;if(Pr){if(rr.coordinates!==void 0){let mn=rr.coordinates,nn=a;if(a===nn)if(Array.isArray(mn)){var br=!0;let Bn=mn.length;for(let Br=0;Br<Bn;Br++){let lo=mn[Br],Hn=a;if(a===Hn)if(Array.isArray(lo)){if(lo.length<2){let Wn={instancePath:t+"/features/"+Oe+"/geometry/geometries/"+Et+"/coordinates/"+Br,schemaPath:"#/properties/features/items/properties/geometry/oneOf/7/properties/geometries/items/oneOf/3/properties/coordinates/items/minItems",keyword:"minItems",params:{limit:2},message:"must NOT have fewer than 2 items"};i===null?i=[Wn]:i.push(Wn),a++}else{var Dr=!0;let Wn=lo.length;for(let Yi=0;Yi<Wn;Yi++){let Vo=lo[Yi],Wr=a;if(!(typeof Vo=="number"&&isFinite(Vo))){let _i={instancePath:t+"/features/"+Oe+"/geometry/geometries/"+Et+"/coordinates/"+Br+"/"+Yi,schemaPath:"#/properties/features/items/properties/geometry/oneOf/7/properties/geometries/items/oneOf/3/properties/coordinates/items/items/type",keyword:"type",params:{type:"number"},message:"must be number"};i===null?i=[_i]:i.push(_i),a++}var Dr=Wr===a;if(!Dr)break}}}else{let Wn={instancePath:t+"/features/"+Oe+"/geometry/geometries/"+Et+"/coordinates/"+Br,schemaPath:"#/properties/features/items/properties/geometry/oneOf/7/properties/geometries/items/oneOf/3/properties/coordinates/items/type",keyword:"type",params:{type:"array"},message:"must be array"};i===null?i=[Wn]:i.push(Wn),a++}var br=Hn===a;if(!br)break}}else{let Bn={instancePath:t+"/features/"+Oe+"/geometry/geometries/"+Et+"/coordinates",schemaPath:"#/properties/features/items/properties/geometry/oneOf/7/properties/geometries/items/oneOf/3/properties/coordinates/type",keyword:"type",params:{type:"array"},message:"must be array"};i===null?i=[Bn]:i.push(Bn),a++}var Pr=nn===a}else var Pr=!0;if(Pr)if(rr.bbox!==void 0){let mn=rr.bbox,nn=a;if(a===nn)if(Array.isArray(mn)){if(mn.length<4){let Bn={instancePath:t+"/features/"+Oe+"/geometry/geometries/"+Et+"/bbox",schemaPath:"#/properties/features/items/properties/geometry/oneOf/7/properties/geometries/items/oneOf/3/properties/bbox/minItems",keyword:"minItems",params:{limit:4},message:"must NOT have fewer than 4 items"};i===null?i=[Bn]:i.push(Bn),a++}else{var ke=!0;let Bn=mn.length;for(let Br=0;Br<Bn;Br++){let lo=mn[Br],Hn=a;if(!(typeof lo=="number"&&isFinite(lo))){let Wn={instancePath:t+"/features/"+Oe+"/geometry/geometries/"+Et+"/bbox/"+Br,schemaPath:"#/properties/features/items/properties/geometry/oneOf/7/properties/geometries/items/oneOf/3/properties/bbox/items/type",keyword:"type",params:{type:"number"},message:"must be number"};i===null?i=[Wn]:i.push(Wn),a++}var ke=Hn===a;if(!ke)break}}}else{let Bn={instancePath:t+"/features/"+Oe+"/geometry/geometries/"+Et+"/bbox",schemaPath:"#/properties/features/items/properties/geometry/oneOf/7/properties/geometries/items/oneOf/3/properties/bbox/type",keyword:"type",params:{type:"array"},message:"must be array"};i===null?i=[Bn]:i.push(Bn),a++}var Pr=nn===a}else var Pr=!0}}}else{let Zr={instancePath:t+"/features/"+Oe+"/geometry/geometries/"+Et,schemaPath:"#/properties/features/items/properties/geometry/oneOf/7/properties/geometries/items/oneOf/3/type",keyword:"type",params:{type:"object"},message:"must be object"};i===null?i=[Zr]:i.push(Zr),a++}var Mt=ri===a;if(Mt&&po)po=!1,so=[so,3];else{Mt&&(po=!0,so=3);let Zr=a;if(a===Zr)if(rr&&typeof rr=="object"&&!Array.isArray(rr)){let nn;if(rr.type===void 0&&(nn="type")||rr.coordinates===void 0&&(nn="coordinates")){let xn={instancePath:t+"/features/"+Oe+"/geometry/geometries/"+Et,schemaPath:"#/properties/features/items/properties/geometry/oneOf/7/properties/geometries/items/oneOf/4/required",keyword:"required",params:{missingProperty:nn},message:"must have required property '"+nn+"'"};i===null?i=[xn]:i.push(xn),a++}else{if(rr.type!==void 0){let xn=rr.type,Bn=a;if(typeof xn!="string"){let Br={instancePath:t+"/features/"+Oe+"/geometry/geometries/"+Et+"/type",schemaPath:"#/properties/features/items/properties/geometry/oneOf/7/properties/geometries/items/oneOf/4/properties/type/type",keyword:"type",params:{type:"string"},message:"must be string"};i===null?i=[Br]:i.push(Br),a++}if(xn!=="MultiLineString"){let Br={instancePath:t+"/features/"+Oe+"/geometry/geometries/"+Et+"/type",schemaPath:"#/properties/features/items/properties/geometry/oneOf/7/properties/geometries/items/oneOf/4/properties/type/enum",keyword:"enum",params:{allowedValues:Gu.properties.features.items.properties.geometry.oneOf[7].properties.geometries.items.oneOf[4].properties.type.enum},message:"must be equal to one of the allowed values"};i===null?i=[Br]:i.push(Br),a++}var Je=Bn===a}else var Je=!0;if(Je){if(rr.coordinates!==void 0){let xn=rr.coordinates,Bn=a;if(a===Bn)if(Array.isArray(xn)){var tt=!0;let lo=xn.length;for(let Hn=0;Hn<lo;Hn++){let qo=xn[Hn],Wn=a;if(a===Wn)if(Array.isArray(qo)){if(qo.length<2){let Vo={instancePath:t+"/features/"+Oe+"/geometry/geometries/"+Et+"/coordinates/"+Hn,schemaPath:"#/properties/features/items/properties/geometry/oneOf/7/properties/geometries/items/oneOf/4/properties/coordinates/items/minItems",keyword:"minItems",params:{limit:2},message:"must NOT have fewer than 2 items"};i===null?i=[Vo]:i.push(Vo),a++}else{var Ft=!0;let Vo=qo.length;for(let Wr=0;Wr<Vo;Wr++){let Ai=qo[Wr],_i=a;if(a===_i)if(Array.isArray(Ai)){if(Ai.length<2){let os={instancePath:t+"/features/"+Oe+"/geometry/geometries/"+Et+"/coordinates/"+Hn+"/"+Wr,schemaPath:"#/properties/features/items/properties/geometry/oneOf/7/properties/geometries/items/oneOf/4/properties/coordinates/items/items/minItems",keyword:"minItems",params:{limit:2},message:"must NOT have fewer than 2 items"};i===null?i=[os]:i.push(os),a++}else{var Wt=!0;let os=Ai.length;for(let gn=0;gn<os;gn++){let is=Ai[gn],Iu=a;if(!(typeof is=="number"&&isFinite(is))){let ya={instancePath:t+"/features/"+Oe+"/geometry/geometries/"+Et+"/coordinates/"+Hn+"/"+Wr+"/"+gn,schemaPath:"#/properties/features/items/properties/geometry/oneOf/7/properties/geometries/items/oneOf/4/properties/coordinates/items/items/items/type",keyword:"type",params:{type:"number"},message:"must be number"};i===null?i=[ya]:i.push(ya),a++}var Wt=Iu===a;if(!Wt)break}}}else{let os={instancePath:t+"/features/"+Oe+"/geometry/geometries/"+Et+"/coordinates/"+Hn+"/"+Wr,schemaPath:"#/properties/features/items/properties/geometry/oneOf/7/properties/geometries/items/oneOf/4/properties/coordinates/items/items/type",keyword:"type",params:{type:"array"},message:"must be array"};i===null?i=[os]:i.push(os),a++}var Ft=_i===a;if(!Ft)break}}}else{let Vo={instancePath:t+"/features/"+Oe+"/geometry/geometries/"+Et+"/coordinates/"+Hn,schemaPath:"#/properties/features/items/properties/geometry/oneOf/7/properties/geometries/items/oneOf/4/properties/coordinates/items/type",keyword:"type",params:{type:"array"},message:"must be array"};i===null?i=[Vo]:i.push(Vo),a++}var tt=Wn===a;if(!tt)break}}else{let lo={instancePath:t+"/features/"+Oe+"/geometry/geometries/"+Et+"/coordinates",schemaPath:"#/properties/features/items/properties/geometry/oneOf/7/properties/geometries/items/oneOf/4/properties/coordinates/type",keyword:"type",params:{type:"array"},message:"must be array"};i===null?i=[lo]:i.push(lo),a++}var Je=Bn===a}else var Je=!0;if(Je)if(rr.bbox!==void 0){let xn=rr.bbox,Bn=a;if(a===Bn)if(Array.isArray(xn)){if(xn.length<4){let lo={instancePath:t+"/features/"+Oe+"/geometry/geometries/"+Et+"/bbox",schemaPath:"#/properties/features/items/properties/geometry/oneOf/7/properties/geometries/items/oneOf/4/properties/bbox/minItems",keyword:"minItems",params:{limit:4},message:"must NOT have fewer than 4 items"};i===null?i=[lo]:i.push(lo),a++}else{var xe=!0;let lo=xn.length;for(let Hn=0;Hn<lo;Hn++){let qo=xn[Hn],Wn=a;if(!(typeof qo=="number"&&isFinite(qo))){let Vo={instancePath:t+"/features/"+Oe+"/geometry/geometries/"+Et+"/bbox/"+Hn,schemaPath:"#/properties/features/items/properties/geometry/oneOf/7/properties/geometries/items/oneOf/4/properties/bbox/items/type",keyword:"type",params:{type:"number"},message:"must be number"};i===null?i=[Vo]:i.push(Vo),a++}var xe=Wn===a;if(!xe)break}}}else{let lo={instancePath:t+"/features/"+Oe+"/geometry/geometries/"+Et+"/bbox",schemaPath:"#/properties/features/items/properties/geometry/oneOf/7/properties/geometries/items/oneOf/4/properties/bbox/type",keyword:"type",params:{type:"array"},message:"must be array"};i===null?i=[lo]:i.push(lo),a++}var Je=Bn===a}else var Je=!0}}}else{let nn={instancePath:t+"/features/"+Oe+"/geometry/geometries/"+Et,schemaPath:"#/properties/features/items/properties/geometry/oneOf/7/properties/geometries/items/oneOf/4/type",keyword:"type",params:{type:"object"},message:"must be object"};i===null?i=[nn]:i.push(nn),a++}var Mt=Zr===a;if(Mt&&po)po=!1,so=[so,4];else{Mt&&(po=!0,so=4);let nn=a;if(a===nn)if(rr&&typeof rr=="object"&&!Array.isArray(rr)){let Bn;if(rr.type===void 0&&(Bn="type")||rr.coordinates===void 0&&(Bn="coordinates")){let Br={instancePath:t+"/features/"+Oe+"/geometry/geometries/"+Et,schemaPath:"#/properties/features/items/properties/geometry/oneOf/7/properties/geometries/items/oneOf/5/required",keyword:"required",params:{missingProperty:Bn},message:"must have required property '"+Bn+"'"};i===null?i=[Br]:i.push(Br),a++}else{if(rr.type!==void 0){let Br=rr.type,lo=a;if(typeof Br!="string"){let Hn={instancePath:t+"/features/"+Oe+"/geometry/geometries/"+Et+"/type",schemaPath:"#/properties/features/items/properties/geometry/oneOf/7/properties/geometries/items/oneOf/5/properties/type/type",keyword:"type",params:{type:"string"},message:"must be string"};i===null?i=[Hn]:i.push(Hn),a++}if(Br!=="MultiPolygon"){let Hn={instancePath:t+"/features/"+Oe+"/geometry/geometries/"+Et+"/type",schemaPath:"#/properties/features/items/properties/geometry/oneOf/7/properties/geometries/items/oneOf/5/properties/type/enum",keyword:"enum",params:{allowedValues:Gu.properties.features.items.properties.geometry.oneOf[7].properties.geometries.items.oneOf[5].properties.type.enum},message:"must be equal to one of the allowed values"};i===null?i=[Hn]:i.push(Hn),a++}var J=lo===a}else var J=!0;if(J){if(rr.coordinates!==void 0){let Br=rr.coordinates,lo=a;if(a===lo)if(Array.isArray(Br)){var oe=!0;let qo=Br.length;for(let Wn=0;Wn<qo;Wn++){let Yi=Br[Wn],Vo=a;if(a===Vo)if(Array.isArray(Yi)){var ue=!0;let Ai=Yi.length;for(let _i=0;_i<Ai;_i++){let Bs=Yi[_i],os=a;if(a===os)if(Array.isArray(Bs)){if(Bs.length<4){let is={instancePath:t+"/features/"+Oe+"/geometry/geometries/"+Et+"/coordinates/"+Wn+"/"+_i,schemaPath:"#/properties/features/items/properties/geometry/oneOf/7/properties/geometries/items/oneOf/5/properties/coordinates/items/items/minItems",keyword:"minItems",params:{limit:4},message:"must NOT have fewer than 4 items"};i===null?i=[is]:i.push(is),a++}else{var we=!0;let is=Bs.length;for(let Iu=0;Iu<is;Iu++){let Qf=Bs[Iu],ya=a;if(a===ya)if(Array.isArray(Qf)){if(Qf.length<2){let Zi={instancePath:t+"/features/"+Oe+"/geometry/geometries/"+Et+"/coordinates/"+Wn+"/"+_i+"/"+Iu,schemaPath:"#/properties/features/items/properties/geometry/oneOf/7/properties/geometries/items/oneOf/5/properties/coordinates/items/items/items/minItems",keyword:"minItems",params:{limit:2},message:"must NOT have fewer than 2 items"};i===null?i=[Zi]:i.push(Zi),a++}else{var Fe=!0;let Zi=Qf.length;for(let Oi=0;Oi<Zi;Oi++){let zo=Qf[Oi],px=a;if(!(typeof zo=="number"&&isFinite(zo))){let Vs={instancePath:t+"/features/"+Oe+"/geometry/geometries/"+Et+"/coordinates/"+Wn+"/"+_i+"/"+Iu+"/"+Oi,schemaPath:"#/properties/features/items/properties/geometry/oneOf/7/properties/geometries/items/oneOf/5/properties/coordinates/items/items/items/items/type",keyword:"type",params:{type:"number"},message:"must be number"};i===null?i=[Vs]:i.push(Vs),a++}var Fe=px===a;if(!Fe)break}}}else{let Zi={instancePath:t+"/features/"+Oe+"/geometry/geometries/"+Et+"/coordinates/"+Wn+"/"+_i+"/"+Iu,schemaPath:"#/properties/features/items/properties/geometry/oneOf/7/properties/geometries/items/oneOf/5/properties/coordinates/items/items/items/type",keyword:"type",params:{type:"array"},message:"must be array"};i===null?i=[Zi]:i.push(Zi),a++}var we=ya===a;if(!we)break}}}else{let is={instancePath:t+"/features/"+Oe+"/geometry/geometries/"+Et+"/coordinates/"+Wn+"/"+_i,schemaPath:"#/properties/features/items/properties/geometry/oneOf/7/properties/geometries/items/oneOf/5/properties/coordinates/items/items/type",keyword:"type",params:{type:"array"},message:"must be array"};i===null?i=[is]:i.push(is),a++}var ue=os===a;if(!ue)break}}else{let Ai={instancePath:t+"/features/"+Oe+"/geometry/geometries/"+Et+"/coordinates/"+Wn,schemaPath:"#/properties/features/items/properties/geometry/oneOf/7/properties/geometries/items/oneOf/5/properties/coordinates/items/type",keyword:"type",params:{type:"array"},message:"must be array"};i===null?i=[Ai]:i.push(Ai),a++}var oe=Vo===a;if(!oe)break}}else{let qo={instancePath:t+"/features/"+Oe+"/geometry/geometries/"+Et+"/coordinates",schemaPath:"#/properties/features/items/properties/geometry/oneOf/7/properties/geometries/items/oneOf/5/properties/coordinates/type",keyword:"type",params:{type:"array"},message:"must be array"};i===null?i=[qo]:i.push(qo),a++}var J=lo===a}else var J=!0;if(J)if(rr.bbox!==void 0){let Br=rr.bbox,lo=a;if(a===lo)if(Array.isArray(Br)){if(Br.length<4){let qo={instancePath:t+"/features/"+Oe+"/geometry/geometries/"+Et+"/bbox",schemaPath:"#/properties/features/items/properties/geometry/oneOf/7/properties/geometries/items/oneOf/5/properties/bbox/minItems",keyword:"minItems",params:{limit:4},message:"must NOT have fewer than 4 items"};i===null?i=[qo]:i.push(qo),a++}else{var $e=!0;let qo=Br.length;for(let Wn=0;Wn<qo;Wn++){let Yi=Br[Wn],Vo=a;if(!(typeof Yi=="number"&&isFinite(Yi))){let Ai={instancePath:t+"/features/"+Oe+"/geometry/geometries/"+Et+"/bbox/"+Wn,schemaPath:"#/properties/features/items/properties/geometry/oneOf/7/properties/geometries/items/oneOf/5/properties/bbox/items/type",keyword:"type",params:{type:"number"},message:"must be number"};i===null?i=[Ai]:i.push(Ai),a++}var $e=Vo===a;if(!$e)break}}}else{let qo={instancePath:t+"/features/"+Oe+"/geometry/geometries/"+Et+"/bbox",schemaPath:"#/properties/features/items/properties/geometry/oneOf/7/properties/geometries/items/oneOf/5/properties/bbox/type",keyword:"type",params:{type:"array"},message:"must be array"};i===null?i=[qo]:i.push(qo),a++}var J=lo===a}else var J=!0}}}else{let Bn={instancePath:t+"/features/"+Oe+"/geometry/geometries/"+Et,schemaPath:"#/properties/features/items/properties/geometry/oneOf/7/properties/geometries/items/oneOf/5/type",keyword:"type",params:{type:"object"},message:"must be object"};i===null?i=[Bn]:i.push(Bn),a++}var Mt=nn===a;Mt&&po?(po=!1,so=[so,5]):Mt&&(po=!0,so=5)}}}}if(po)a=Ci,i!==null&&(Ci?i.length=Ci:i=null);else{let Eo={instancePath:t+"/features/"+Oe+"/geometry/geometries/"+Et,schemaPath:"#/properties/features/items/properties/geometry/oneOf/7/properties/geometries/items/oneOf",keyword:"oneOf",params:{passingSchemas:so},message:"must match exactly one schema in oneOf"};i===null?i=[Eo]:i.push(Eo),a++}var We=li===a;if(!We)break}}else{let On={instancePath:t+"/features/"+Oe+"/geometry/geometries",schemaPath:"#/properties/features/items/properties/geometry/oneOf/7/properties/geometries/type",keyword:"type",params:{type:"array"},message:"must be array"};i===null?i=[On]:i.push(On),a++}var ot=Hr===a}else var ot=!0;if(ot)if(wt.bbox!==void 0){let Gr=wt.bbox,Hr=a;if(a===Hr)if(Array.isArray(Gr)){if(Gr.length<4){let On={instancePath:t+"/features/"+Oe+"/geometry/bbox",schemaPath:"#/properties/features/items/properties/geometry/oneOf/7/properties/bbox/minItems",keyword:"minItems",params:{limit:4},message:"must NOT have fewer than 4 items"};i===null?i=[On]:i.push(On),a++}else{var nt=!0;let On=Gr.length;for(let Et=0;Et<On;Et++){let rr=Gr[Et],li=a;if(!(typeof rr=="number"&&isFinite(rr))){let po={instancePath:t+"/features/"+Oe+"/geometry/bbox/"+Et,schemaPath:"#/properties/features/items/properties/geometry/oneOf/7/properties/bbox/items/type",keyword:"type",params:{type:"number"},message:"must be number"};i===null?i=[po]:i.push(po),a++}var nt=li===a;if(!nt)break}}}else{let On={instancePath:t+"/features/"+Oe+"/geometry/bbox",schemaPath:"#/properties/features/items/properties/geometry/oneOf/7/properties/bbox/type",keyword:"type",params:{type:"array"},message:"must be array"};i===null?i=[On]:i.push(On),a++}var ot=Hr===a}else var ot=!0}}}else{let sn={instancePath:t+"/features/"+Oe+"/geometry",schemaPath:"#/properties/features/items/properties/geometry/oneOf/7/type",keyword:"type",params:{type:"object"},message:"must be object"};i===null?i=[sn]:i.push(sn),a++}var j=_n===a;j&&or?(or=!1,Er=[Er,7]):j&&(or=!0,Er=7)}}}}}}if(or)a=Ar,i!==null&&(Ar?i.length=Ar:i=null);else{let Un={instancePath:t+"/features/"+Oe+"/geometry",schemaPath:"#/properties/features/items/properties/geometry/oneOf",keyword:"oneOf",params:{passingSchemas:Er},message:"must match exactly one schema in oneOf"};return i===null?i=[Un]:i.push(Un),a++,bs.errors=i,!1}var m=ln===a}else var m=!0;if(m)if(xt.bbox!==void 0){let wt=xt.bbox,ln=a;if(a===ln)if(Array.isArray(wt)){if(wt.length<4)return bs.errors=[{instancePath:t+"/features/"+Oe+"/bbox",schemaPath:"#/properties/features/items/properties/bbox/minItems",keyword:"minItems",params:{limit:4},message:"must NOT have fewer than 4 items"}],!1;{var Ze=!0;let or=wt.length;for(let Er=0;Er<or;Er++){let Rt=wt[Er],jo=a;if(!(typeof Rt=="number"&&isFinite(Rt)))return bs.errors=[{instancePath:t+"/features/"+Oe+"/bbox/"+Er,schemaPath:"#/properties/features/items/properties/bbox/items/type",keyword:"type",params:{type:"number"},message:"must be number"}],!1;var Ze=jo===a;if(!Ze)break}}}else return bs.errors=[{instancePath:t+"/features/"+Oe+"/bbox",schemaPath:"#/properties/features/items/properties/bbox/type",keyword:"type",params:{type:"array"},message:"must be array"}],!1;var m=ln===a}else var m=!0}}}}else return bs.errors=[{instancePath:t+"/features/"+Oe,schemaPath:"#/properties/features/items/type",keyword:"type",params:{type:"object"},message:"must be object"}],!1;var h=Bt===a;if(!h)break}}else return bs.errors=[{instancePath:t+"/features",schemaPath:"#/properties/features/type",keyword:"type",params:{type:"array"},message:"must be array"}],!1;var c=gt===a}else var c=!0;if(c)if(e.bbox!==void 0){let Be=e.bbox,gt=a;if(a===gt)if(Array.isArray(Be)){if(Be.length<4)return bs.errors=[{instancePath:t+"/bbox",schemaPath:"#/properties/bbox/minItems",keyword:"minItems",params:{limit:4},message:"must NOT have fewer than 4 items"}],!1;{var be=!0;let Dt=Be.length;for(let Oe=0;Oe<Dt;Oe++){let xt=Be[Oe],Bt=a;if(!(typeof xt=="number"&&isFinite(xt)))return bs.errors=[{instancePath:t+"/bbox/"+Oe,schemaPath:"#/properties/bbox/items/type",keyword:"type",params:{type:"number"},message:"must be number"}],!1;var be=Bt===a;if(!be)break}}}else return bs.errors=[{instancePath:t+"/bbox",schemaPath:"#/properties/bbox/type",keyword:"type",params:{type:"array"},message:"must be array"}],!1;var c=gt===a}else var c=!0}}else return bs.errors=[{instancePath:t,schemaPath:"#/type",keyword:"type",params:{type:"object"},message:"must be object"}],!1;return bs.errors=i,a===0}u();var Jh=`${Ue.timePeriod}_start`,Qh=`${Ue.timePeriod}_end`,Hq=e=>Object.fromEntries(Object.entries(e).map(([t,r])=>!Te(r)||r===""?[t,null]:[t,r])),Wq=e=>Object.fromEntries(Object.entries(e).map(([t,r])=>Te(r)?[t,r]:[t,""])),$q=e=>{let t=e[Ue.timePeriod]?Ol(e[Ue.timePeriod][0]):"",r=e[Ue.timePeriod]?Ol(e[Ue.timePeriod][1]):"";return{timePeriodStart:t,timePeriodEnd:r}},Yq=(e,t)=>{let r=l0(Mc(e),{representation:"date"}),n=l0(Mc(t),{representation:"date"});return[r,n]};var Zq="vkf-geojson-metadata-form-external-vector-map",a$e=[{label:"VKF",value:Fu.VKF},{label:"IDOHIST",value:Fu.IDOHIST}],oP=e=>({[Ue.title]:e[Ue.title],[Ue.timePeriod]:e[Ue.timePeriod],[Ue.description]:e[Ue.description],[Ue.externalContentUrl]:e[Ue.externalContentUrl],[Ue.externalContentType]:e[Ue.externalContentType],[Ue.thumbnailUrl]:e[Ue.thumbnailUrl]}),qoe=e=>{let t={title:e[Ue.title],link_content:e[Ue.externalContentUrl],content_type:e[Ue.externalContentType],time_period:e[Ue.timePeriod],description:e[Ue.description],link_thumb:e[Ue.thumbnailUrl]};return Hq(t)},s$e=e=>{let{timePeriodStart:t,timePeriodEnd:r}=$q(e),n=e[Ue.externalContentType],o=Te(n)&&n!==""?n:Fu.VKF,i={[Ue.title]:e[Ue.title],[Ue.externalContentUrl]:e[Ue.externalContentUrl],[Ue.externalContentType]:o,[Jh]:t,[Qh]:r,[Ue.description]:e[Ue.description],[Ue.thumbnailUrl]:e[Ue.thumbnailUrl]};return Wq(i)},l$e=e=>{let t=e,r=t[Jh],n=t[Qh],o=Yq(r,n);return{[Ue.title]:t[Ue.title],[Ue.externalContentUrl]:t[Ue.externalContentUrl],[Ue.externalContentType]:t[Ue.externalContentType],[Ue.timePeriod]:o,[Ue.description]:t[Ue.description],[Ue.thumbnailUrl]:t[Ue.thumbnailUrl]}},u$e=e=>{let t=i$e(e);if(!t)throw new Error("The GeoJson is not a valid FeatureCollection");if(e.features.length===0)throw new Error("The GeoJson is an empty FeatureCollection");return t};var xf=en({key:"activeBasemapId",default:mr.getSettings().BASEMAPS[0].id}),Kq=en({key:"currentApplicationState",default:void 0}),Xq=en({key:"elementScreenSize",default:{map:{height:0,width:0}}}),c$e={facets:[],georeference:!1},wf=en({key:"facetState",default:{facets:[],georeference:!1}}),FS=en({key:"layoutState",default:Sc.VERTICAL}),Cc=en({key:"horizontalLayoutModeState",default:Qs.STANDARD}),Qt=en({key:"mapState",default:void 0,dangerouslyAllowMutability:!0}),p$e=en({key:"map3dState",default:!1}),US=en({key:"mapCountState",default:10}),Jq=en({key:"searchIsLoadingState",default:!1}),jn=en({key:"selectedLayersState",default:[],dangerouslyAllowMutability:!0}),Qq=en({key:"selectedOriginalMapIdState",default:void 0}),tl=en({key:"selectedGeoJsonLayerIdState",default:void 0}),d0=en({key:"selectedGeoJsonLayerLastUpdatedState",default:0}),pu=vs({key:"selectedGeoJsonLayerState",get:({get:e})=>{let t=e(tl),r=e(jn),n=e(d0);return{selectedLayer:r.find(i=>i.getId()===t),lastUpdated:n}},dangerouslyAllowMutability:!0}),el=en({key:"selectedGeoJsonFeatureIdentifierState",default:null}),f$e=vs({key:"isGeoJsonFeatureSelectedState",get:({get:e})=>{let t=e(el);if(!Te(t))return!1;let{featureId:r,sourceId:n}=t;return Te(r)&&Te(n)}}),h0=en({key:"timeExtentState",default:[1850,1970]}),zoe=[1850,1970],m0=en({key:"timeRangeState",default:zoe}),ez=en({key:"baseMapStyleLayersState",default:[]}),tz=en({key:"activeDialogState",default:uu.None}),rl=en({key:"drawState",default:void 0}),nl=en({key:"editedGeojsonState",default:null}),kl=en({key:"metadataDrawState",default:null}),$o=en({key:"vectorMapState",default:null}),Fg=en({key:"vectorMapActiveVersionDrawState",default:null}),d$e=vs({key:"isActiveVectorMapVersionDifferentState",get:({get:e})=>e(Fg)!==null}),rz=en({key:"showDropZoneState",default:!1}),nz=en({key:"addedFileState",default:null}),h$e=en({key:"addGeoJsonDialogState",default:!1}),xs=en({key:"drawModePanelState",default:Si.NONE}),Ef=en({key:"vectorMapExternalModePanelState",default:Tc.NONE}),Ra=en({key:"layerExternalVectorMapState",default:null,dangerouslyAllowMutability:!0}),oz=en({key:"forceUpdateLayerExternalVectorMapState",default:0}),iz=vs({key:"metadataExternalVectorMapState",get:({get:e})=>{e(oz);let t=e(Ra);return Te(t)?oP(t.getMetadata()):null},dangerouslyAllowMutability:!0}),m$e=vs({key:"geojsonExternalVectorMapState",get:({get:e})=>{e(oz);let t=e(Ra);return Te(t)?t.getGeoJson():null},dangerouslyAllowMutability:!0}),g$e=vs({key:"layerIdExternalVectorMapState",get:({get:e})=>{let t=e(Ra);return Te(t)?t.getId():null},dangerouslyAllowMutability:!0});function v$e(e,t=250){let r=(0,qd.useRef)();return(0,qd.useEffect)(()=>{clearTimeout(r.current)},[e]),(...n)=>{r.current=window.setTimeout(()=>{e.apply(this,n)},t)}}function y$e(e){let[t,r]=(0,qd.useState)(e);return(0,qd.useEffect)(()=>{r(e)},[e]),t}function _$e(e,t){let r=Ir(Xq),n=iP(e);(0,qd.useEffect)(()=>{let{height:o,width:i}=n;r(a=>Object.assign({},a,{[t]:{height:o,width:i}}))},[n])}var iP=e=>{let[t,r]=(0,qd.useState)({height:0,width:0});return(0,qd.useLayoutEffect)(()=>{r(e.current.getBoundingClientRect())},[e]),IVe(e,n=>r(n.contentRect)),t};u();function b$e(e){var t,r,n="";if(typeof e=="string"||typeof e=="number")n+=e;else if(typeof e=="object")if(Array.isArray(e))for(t=0;t<e.length;t++)e[t]&&(r=b$e(e[t]))&&(n&&(n+=" "),n+=r);else for(t in e)e[t]&&(n&&(n+=" "),n+=t);return n}function sIr(){for(var e,t,r=0,n="";r<arguments.length;)(e=arguments[r++])&&(t=b$e(e))&&(n&&(n+=" "),n+=t);return n}var jt=sIr;var x$e=e=>{let{onClose:t,text:r,type:n}=e;return xp.default.createElement("div",{className:"notification-item"},xp.default.createElement("div",{className:jt("alert","alert-"+n),role:"alert"},xp.default.createElement("div",{className:"close"},xp.default.createElement("button",{type:"button",className:"close","aria-label":"Close",onClick:t},xp.default.createElement("span",{"aria-hidden":"true"},"\xD7"))),xp.default.createElement("div",{className:"text"},r)))};x$e.propTypes={onClose:az.default.func,text:az.default.string,type:az.default.string};var lIr=()=>{let e=_t(Rs),t=y$e(e),[r,n]=(0,xp.useState)([]);return(0,xp.useEffect)(()=>{if(e!==null&&e.id!==null&&e!==t){let o=[...r],i=r.findIndex(a=>a.id===e.id);i>-1?o.splice(i,1,e.text!==null?e:void 0):o.splice(0,0,e),n(o.filter(a=>a!==void 0))}},[e,r,t]),xp.default.createElement("div",{className:jt("vkf-notifications",r.length===0?"hide":"")},r.map(({type:o,text:i},a)=>xp.default.createElement(x$e,{key:a,onClose:()=>{let c=[...r];c.splice(a,1),n(c)},type:o,text:i})))},w$e=lIr;var E$e=w$e;u();var R0=Q(De(),1);var unt=Q(sz(),1);u();var BS=Q(De(),1);var B$e=e=>Object.values(e).every(t=>t===void 0||Object.entries(t).length===0),Boe=(e,t=4)=>{if(Array.isArray(e))return e.map(r=>Boe(r,t));if(typeof e=="object"&&e!==null){let r={};return Object.entries(e).forEach(([n,o])=>{r[n]=Boe(o)}),r}else return isNaN(e)||e===null?e:e.toFixed(Math.min(_Ir(e),t))},yIr=(e,t=4)=>{let r={};return Object.entries(e).forEach(([n,o])=>{r[n]=Boe(o,t)}),r},_Ir=e=>Math.floor(e)===e?0:e.toString().split(".")[1].length||0,Voe=({geojson:e,properties:t})=>Wo.fromPersistence({metadata:t,geoJson:e!=null?e:structuredClone(u0)}),V$e=(e,t)=>{let r;if(e===void 0)r=t;else if(t===void 0)r=e;else{let n=Array.isArray(e),o=Array.isArray(t),i=n?e:[e],a=o?t:[t];r=Array.from(new Set([...i,...a]))}return r},G$e=(e,t)=>{let r=e.isVisible(t),n=e.getOpacity(t),o=e.getType(),i={isVisible:r,opacity:n};return o===go.VECTOR_MAP&&e.isLocal()?Object.assign(i,{geojson:e.getGeoJsonForPersistence(),type:go.VECTOR_MAP,properties:e.getMetadata()}):Object.assign(i,{id:e.getId(),type:o===go.HISTORIC_MAP?go.HISTORIC_MAP:go.VECTOR_MAP})},VS=(e,t=!1)=>{let r={center:e.getCenter().toArray(),bearing:e.getBearing(),pitch:e.getPitch(),zoom:e.getZoom()};return t?yIr(r,5):r};function zd(e,t){let r=()=>{if(typeof window=="undefined")return t;try{let a=window.localStorage.getItem(e);return a?JSON.parse(a):t}catch(a){return console.warn(`Error reading localStorage key \u201C${e}\u201D:`,a),t}},[n,o]=(0,BS.useState)(r),i=a=>{typeof window=="undefined"&&console.warn(`Tried setting localStorage key \u201C${e}\u201D even though environment is not a client`);try{let c=a instanceof Function?a(n):a;window.localStorage.setItem(e,JSON.stringify(c)),o(c),window.dispatchEvent(new Event("local-storage"))}catch(c){console.warn(`Error setting localStorage key \u201C${e}\u201D:`,c)}};return(0,BS.useEffect)(()=>{o(r())},[]),(0,BS.useEffect)(()=>{let a=()=>{o(r())};return window.addEventListener("storage",a),window.addEventListener("local-storage",a),()=>{window.removeEventListener("storage",a),window.removeEventListener("local-storage",a)}},[]),[n,i]}var H$e=e=>{(0,BS.useEffect)(()=>{let t="onpagehide"in window.self?"pagehide":"unload";return window.addEventListener(t,e,{capture:!0}),()=>{window.removeEventListener(t,e,{capture:!0})}},[e])},GS=e=>`${window.location.origin}${window.location.pathname}?${e}`;u();u();var W$e=e=>e.r!==void 0||e.d!==void 0||e.ri!==void 0||e.u!==void 0,$$e=e=>e.rotation!==void 0||e.direction!==void 0||e.right!==void 0||e.up!==void 0,Y$e=e=>{let{c:t,r,d:n,u:o,p:i,z:a}=e;return Object.assign({},t===void 0?null:{center:t},r===void 0?null:{rotation:r},a===void 0?null:{zoom:a},i===void 0?null:{position:i},n===void 0?null:{direction:n},o===void 0?null:{up:o})},bIr=e=>{let[t,r,n]=e,o=Math.log2(6378137/n)+6;return{center:[t,r],pitch:50,zoom:o}},xIr=(e,t)=>({bearing:wIr(t),legacy3dMapView:!0}),Z$e=e=>e*(180/Math.PI),wIr=e=>{let t=Math.PI+(Math.atan2(e[0],e[1])-Math.PI/2);return Z$e(t)};function lz(e){let{center:t,rotation:r,direction:n,position:o,zoom:i}=e;return Object.assign({},t===void 0?null:{center:t},r===void 0?null:{pitch:Z$e(r)},i===void 0?null:{zoom:i},o===void 0?null:bIr(o),n===void 0||o===void 0?null:xIr(o,n))}var uz={"2D":0,"3D":1},K$e=e=>{if(e!==void 0)return e===uz["3D"]},X$e=e=>{if(W$e(e)){let i=Y$e(e);return lz(i)}let{c:t,be:r,p:n,z:o}=e;return Object.assign({},t===void 0?null:{center:t},r===void 0?null:{bearing:r},n===void 0?null:{pitch:n},o===void 0?null:{zoom:o})},J$e=e=>{let{fid:t,foid:r}=e;if(!Te(t)||!Te(r))return;let n=/^[0-9]+$/.test(t),o=Number.parseInt(t,10);if(!n||!Number.isFinite(o)){console.error(`The feature id cannot be parsed from url params. The id '${t}' cannot be coerced to type number.`);return}return{featureId:o,sourceId:r}};u();var nb=Q(De(),1);var EIr=function(){let e=_t(xf),t=_t(wf),r=_t(Qt),n=_t(h0),o=_t(m0),i=_t(jn),a=Ir(Kq),[,c]=zd(Goe,{operationalLayers:[],is3dEnabled:!1}),h=(0,nb.useCallback)(()=>{if(r!==void 0){let m=r.isVkfGlobeModeEnabled(),y={activeBasemapId:e,is3dEnabled:m,operationalLayers:i.map(w=>G$e(w,r)).filter(w=>w!==null),searchOptions:{facets:t,timeExtent:n,timeRange:o}};return y.cameraOptions=VS(r),c(y),y}},[e,r,t,i,n,o]);return H$e(h),(0,nb.useEffect)(()=>{a(()=>h)},[h]),nb.default.createElement(nb.default.Fragment,null)},Q$e=EIr;u();u();function HS(e){return vt(this,null,function*(){let t=mr.getSettings().API_SEARCH;if(t===void 0)throw new Error("The url for the search endpoint is not set.");let r=yield Ya.get(`${t}/_doc/${e}`);if(r.status===200)return r.data._source;console.error("Something went wrong while trying to fetch search document.")})}u();var aP=function(e,t){let r="geometry"in t?t.geometry:void 0,n=[t.time_period_start,t.time_period_end];delete t.geometry,delete t.time_period_start,delete t.time_period_end;let o=Se({},t);return o.id=e,o[Ue.timePeriod]=n,o.type===go.VECTOR_MAP?(o[Ue.vectorMapId]=e,Wo.fromPersistence({geometry:r,metadata:o,geoJson:structuredClone(u0)})):new Rg({metadata:o,geometry:r})},eYe=function(e){let t=[];for(let r=0,n=e.length;r<n;r++)t.push(aP(e[r]._id,e[r]._source));return t};var tYe=e=>HS(e).then(t=>aP(e,t)).catch(()=>{let t=new Rg({metadata:{id:e,has_georeference:!1}});return t.setIsMissing(!0),t});u();var kc=Q(De(),1);u();u();var iie=Q(sZe(),1);function _r(){return _r=iie.default?iie.default.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},_r.apply(null,arguments)}u();var OZe=Q(_Ze(),1);u();var lie=Q(AZe(),1);function _z(e,t){return _z=lie.default?lie.default.bind():function(r,n){return r.__proto__=n,r},_z(e,t)}function bn(e,t){e.prototype=(0,OZe.default)(t.prototype),e.prototype.constructor=e,_z(e,t)}u();function qn(e,t){if(e==null)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(t.indexOf(n)!==-1)continue;r[n]=e[n]}return r}u();u();u();function yo(){return yo=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},yo.apply(null,arguments)}u();function WS(e,t){if(e==null)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(t.indexOf(n)!==-1)continue;r[n]=e[n]}return r}var cie=Q(De());u();var cZn=Q(xz()),CMr=function(){};function DZe(e,t){var r={};return Object.keys(e).forEach(function(n){if(r[$S(n)]=CMr,0)var o}),r}function uie(e,t){return e[t]!==void 0}function $S(e){return"default"+e.charAt(0).toUpperCase()+e.substr(1)}function NZe(e){return!!e&&(typeof e!="function"||e.prototype&&e.prototype.isReactComponent)}u();u();u();function YS(e,t){return YS=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(r,n){return r.__proto__=n,r},YS(e,t)}function wz(e,t){e.prototype=Object.create(t.prototype),e.prototype.constructor=e,YS(e,t)}var ZS=Q(De()),qZe=Q(fie()),zZe=Q(xz());var OMr="/Users/jquense/src/uncontrollable/src/uncontrollable.js";function ib(e,t,r){r===void 0&&(r=[]);var n=e.displayName||e.name||"Component",o=NZe(e),i=Object.keys(t),a=i.map($S);o||!r.length||(0,zZe.default)(!1);var c=function(m){wz(y,m);function y(){for(var E,A=arguments.length,P=new Array(A),j=0;j<A;j++)P[j]=arguments[j];E=m.call.apply(m,[this].concat(P))||this,E.handlers=Object.create(null),i.forEach(function(k){var z=t[k],V=function(K){if(E.props[z]){var Z;E._notifying=!0;for(var te=arguments.length,se=new Array(te>1?te-1:0),le=1;le<te;le++)se[le-1]=arguments[le];(Z=E.props)[z].apply(Z,[K].concat(se)),E._notifying=!1}E.unmounted||E.setState(function(pe){var me,_e=pe.values;return{values:yo(Object.create(null),_e,(me={},me[k]=K,me))}})};E.handlers[z]=V}),r.length&&(E.attachRef=function(k){E.inner=k});var D=Object.create(null);return i.forEach(function(k){D[k]=E.props[$S(k)]}),E.state={values:D,prevProps:{}},E}var w=y.prototype;return w.shouldComponentUpdate=function(){return!this._notifying},y.getDerivedStateFromProps=function(A,P){var j=P.values,D=P.prevProps,k={values:yo(Object.create(null),j),prevProps:{}};return i.forEach(function(z){k.prevProps[z]=A[z],!uie(A,z)&&uie(D,z)&&(k.values[z]=A[$S(z)])}),k},w.componentWillUnmount=function(){this.unmounted=!0},w.render=function(){var A=this,P=this.props,j=P.innerRef,D=WS(P,["innerRef"]);a.forEach(function(z){delete D[z]});var k={};return i.forEach(function(z){var V=A.props[z];k[z]=V!==void 0?V:A.state.values[z]}),ZS.default.createElement(e,yo({},D,k,this.handlers,{ref:j||this.attachRef}))},y}(ZS.default.Component);(0,qZe.polyfill)(c),c.displayName="Uncontrolled("+n+")",c.propTypes=yo({innerRef:function(){}},DZe(t,n)),r.forEach(function(m){c.prototype[m]=function(){var w;return(w=this.inner)[m].apply(w,arguments)}});var h=c;return ZS.default.forwardRef&&(h=ZS.default.forwardRef(function(m,y){return ZS.default.createElement(c,yo({},m,{innerRef:y,__source:{fileName:OMr,lineNumber:128},__self:this}))}),h.propTypes=c.propTypes),h.ControlledComponent=e,h.deferControlTo=function(m,y,w){return y===void 0&&(y={}),ib(m,yo({},t,y),w)},h}u();var hie=Q(die());var $Ze=Q(xz()),Ez=Q(It());u();var Sf={LARGE:"large",SMALL:"small",XSMALL:"xsmall"},fP={large:"lg",medium:"md",small:"sm",xsmall:"xs",lg:"lg",md:"md",sm:"sm",xs:"xs"};function mie(e){return function(){for(var t=arguments.length,r=new Array(t),n=0;n<t;n++)r[n]=arguments[n];var o=r[r.length-1];return typeof o=="function"?e.apply(void 0,r):function(i){return e.apply(void 0,r.concat([i]))}}}function pi(e,t){var r=(e.bsClass||"").trim();return r==null&&(0,$Ze.default)(!1),r+(t?"-"+t:"")}var wo=mie(function(e,t){var r=t.propTypes||(t.propTypes={}),n=t.defaultProps||(t.defaultProps={});return r.bsClass=Ez.default.string,n.bsClass=e,t}),YZe=mie(function(e,t,r){typeof t!="string"&&(r=t,t=void 0);var n=r.STYLES||[],o=r.propTypes||{};e.forEach(function(c){n.indexOf(c)===-1&&n.push(c)});var i=Ez.default.oneOf(n);if(r.STYLES=n,i._values=n,r.propTypes=_r({},o,{bsStyle:i}),t!==void 0){var a=r.defaultProps||(r.defaultProps={});a.bsStyle=t}return r}),v0=mie(function(e,t,r){typeof t!="string"&&(r=t,t=void 0);var n=r.SIZES||[],o=r.propTypes||{};e.forEach(function(c){n.indexOf(c)===-1&&n.push(c)});var i=[];n.forEach(function(c){var h=fP[c];h&&h!==c&&i.push(h),i.push(c)});var a=Ez.default.oneOf(i);return a._values=i,r.SIZES=n,r.propTypes=_r({},o,{bsSize:a}),t!==void 0&&(r.defaultProps||(r.defaultProps={}),r.defaultProps.bsSize=t),r});function ai(e){var t,r=(t={},t[pi(e)]=!0,t);if(e.bsSize){var n=fP[e.bsSize]||e.bsSize;r[pi(e,n)]=!0}return e.bsStyle&&(r[pi(e,e.bsStyle)]=!0),r}function ZZe(e){return{bsClass:e.bsClass,bsSize:e.bsSize,bsStyle:e.bsStyle,bsRole:e.bsRole}}function KZe(e){return e==="bsClass"||e==="bsSize"||e==="bsStyle"||e==="bsRole"}function Vi(e){var t={};return(0,hie.default)(e).forEach(function(r){var n=r[0],o=r[1];KZe(n)||(t[n]=o)}),[ZZe(e),t]}function KS(e,t){var r={};t.forEach(function(o){r[o]=!0});var n={};return(0,hie.default)(e).forEach(function(o){var i=o[0],a=o[1];!KZe(i)&&!r[i]&&(n[i]=a)}),[ZZe(e),n]}u();var Rl=Q(De());function RMr(e,t,r){var n=0;return Rl.default.Children.map(e,function(o){return Rl.default.isValidElement(o)?t.call(r,o,n++):o})}function jMr(e,t,r){var n=0;Rl.default.Children.forEach(e,function(o){Rl.default.isValidElement(o)&&t.call(r,o,n++)})}function qMr(e){var t=0;return Rl.default.Children.forEach(e,function(r){Rl.default.isValidElement(r)&&++t}),t}function zMr(e,t,r){var n=0,o=[];return Rl.default.Children.forEach(e,function(i){Rl.default.isValidElement(i)&&t.call(r,i,n++)&&o.push(i)}),o}function FMr(e,t,r){var n=0,o;return Rl.default.Children.forEach(e,function(i){o||Rl.default.isValidElement(i)&&t.call(r,i,n++)&&(o=i)}),o}function UMr(e,t,r){var n=0,o=!0;return Rl.default.Children.forEach(e,function(i){o&&Rl.default.isValidElement(i)&&(t.call(r,i,n++)||(o=!1))}),o}function BMr(e,t,r){var n=0,o=!1;return Rl.default.Children.forEach(e,function(i){o||Rl.default.isValidElement(i)&&t.call(r,i,n++)&&(o=!0)}),o}function VMr(e){var t=[];return Rl.default.Children.forEach(e,function(r){Rl.default.isValidElement(r)&&t.push(r)}),t}var Fd={map:RMr,forEach:jMr,count:qMr,find:FMr,filter:zMr,every:UMr,some:BMr,toArray:VMr};u();var gie=Q(It()),dP=Q(De()),HMr={label:gie.default.string.isRequired,onClick:gie.default.func},WMr={label:"Close"},vie=function(e){bn(t,e);function t(){return e.apply(this,arguments)||this}var r=t.prototype;return r.render=function(){var o=this.props,i=o.label,a=o.onClick;return dP.default.createElement("button",{type:"button",className:"close",onClick:a},dP.default.createElement("span",{"aria-hidden":"true"},"\xD7"),dP.default.createElement("span",{className:"sr-only"},i))},t}(dP.default.Component);vie.propTypes=HMr;vie.defaultProps=WMr;var JZe=vie;u();u();function fi(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}var xie=Q(De()),Bg=Q(It()),aKe=Q(Oc());u();function oCr(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];return t.filter(function(n){return n!=null}).reduce(function(n,o){if(typeof o!="function")throw new Error("Invalid Argument Type, must only provide functions, undefined, or null.");return n===null?o:function(){for(var a=arguments.length,c=new Array(a),h=0;h<a;h++)c[h]=arguments[h];n.apply(this,c),o.apply(this,c)}},null)}var Hu=oCr;var iCr={href:Bg.default.string,onClick:Bg.default.func,onKeyDown:Bg.default.func,disabled:Bg.default.bool,role:Bg.default.string,tabIndex:Bg.default.oneOfType([Bg.default.number,Bg.default.string]),componentClass:aKe.default},aCr={componentClass:"a"};function iKe(e){return!e||e.trim()==="#"}var wie=function(e){bn(t,e);function t(n,o){var i;return i=e.call(this,n,o)||this,i.handleClick=i.handleClick.bind(fi(fi(i))),i.handleKeyDown=i.handleKeyDown.bind(fi(fi(i))),i}var r=t.prototype;return r.handleClick=function(o){var i=this.props,a=i.disabled,c=i.href,h=i.onClick;if((a||iKe(c))&&o.preventDefault(),a){o.stopPropagation();return}h&&h(o)},r.handleKeyDown=function(o){o.key===" "&&(o.preventDefault(),this.handleClick(o))},r.render=function(){var o=this.props,i=o.componentClass,a=o.disabled,c=o.onKeyDown,h=qn(o,["componentClass","disabled","onKeyDown"]);return iKe(h.href)&&(h.role=h.role||"button",h.href=h.href||"#"),a&&(h.tabIndex=-1,h.style=_r({pointerEvents:"none"},h.style)),xie.default.createElement(i,_r({},h,{onClick:this.handleClick,onKeyDown:Hu(this.handleKeyDown,c)}))},t}(xie.default.Component);wie.propTypes=iCr;wie.defaultProps=aCr;var sKe=wie;u();var cKe=Q(Uo()),Eie=Q(De()),pKe=Q(It());var pCr={glyph:pKe.default.string.isRequired},fKe=function(e){bn(t,e);function t(){return e.apply(this,arguments)||this}var r=t.prototype;return r.render=function(){var o,i=this.props,a=i.glyph,c=i.className,h=qn(i,["glyph","className"]),m=Vi(h),y=m[0],w=m[1],E=_r({},ai(y),(o={},o[pi(y,a)]=!0,o));return Eie.default.createElement("span",_r({},w,{className:(0,cKe.default)(c,E)}))},t}(Eie.default.Component);fKe.propTypes=pCr;var Vg=wo("glyphicon",fKe);u();var hKe=Q(Uo()),Sie=Q(De()),qz=Q(It()),OKn=Q(ab());var dCr={htmlFor:qz.default.string,srOnly:qz.default.bool},hCr={srOnly:!1},mCr={$bs_formGroup:qz.default.object},zz=function(e){bn(t,e);function t(){return e.apply(this,arguments)||this}var r=t.prototype;return r.render=function(){var o=this.context.$bs_formGroup,i=o&&o.controlId,a=this.props,c=a.htmlFor,h=c===void 0?i:c,m=a.srOnly,y=a.className,w=qn(a,["htmlFor","srOnly","className"]),E=Vi(w),A=E[0],P=E[1],j=_r({},ai(A),{"sr-only":m});return Sie.default.createElement("label",_r({},P,{htmlFor:h,className:(0,hKe.default)(y,j)}))},t}(Sie.default.Component);zz.propTypes=dCr;zz.defaultProps=hCr;zz.contextTypes=mCr;var Fz=wo("control-label",zz);u();var iXe=Q(die());function qie(e,t){var r=t.propTypes,n={},o={};return(0,iXe.default)(e).forEach(function(i){var a=i[0],c=i[1];r[a]?n[a]=c:o[a]=c}),[n,o]}u();var aXe=Q(Uo()),c8=Q(De()),Tf=Q(It()),tT=Q(qKe()),u8,BAr={in:Tf.default.bool,mountOnEnter:Tf.default.bool,unmountOnExit:Tf.default.bool,appear:Tf.default.bool,timeout:Tf.default.number,onEnter:Tf.default.func,onEntering:Tf.default.func,onEntered:Tf.default.func,onExit:Tf.default.func,onExiting:Tf.default.func,onExited:Tf.default.func},VAr={in:!1,timeout:300,mountOnEnter:!1,unmountOnExit:!1,appear:!1},GAr=(u8={},u8[tT.ENTERING]="in",u8[tT.ENTERED]="in",u8),zie=function(e){bn(t,e);function t(){return e.apply(this,arguments)||this}var r=t.prototype;return r.render=function(){var o=this.props,i=o.className,a=o.children,c=qn(o,["className","children"]);return c8.default.createElement(tT.default,c,function(h,m){return c8.default.cloneElement(a,_r({},m,{className:(0,aXe.default)("fade",i,a.props.className,GAr[h])}))})},t}(c8.default.Component);zie.propTypes=BAr;zie.defaultProps=VAr;var y0=zie;u();var fXe=Q(Uo()),Gie=Q(De()),EP=Q(It()),dXe=Q(Oc()),NXn=Q(ab());u();var Fie=Q(Uo()),wP=Q(De()),sXe=Q(It());var HAr={bsRole:"feedback"},WAr={$bs_formGroup:sXe.default.object},Uie=function(e){bn(t,e);function t(){return e.apply(this,arguments)||this}var r=t.prototype;return r.getGlyph=function(o){switch(o){case"success":return"ok";case"warning":return"warning-sign";case"error":return"remove";default:return null}},r.renderDefaultFeedback=function(o,i,a,c){var h=this.getGlyph(o&&o.validationState);return h?wP.default.createElement(Vg,_r({},c,{glyph:h,className:(0,Fie.default)(i,a)})):null},r.render=function(){var o=this.props,i=o.className,a=o.children,c=qn(o,["className","children"]),h=Vi(c),m=h[0],y=h[1],w=ai(m);if(!a)return this.renderDefaultFeedback(this.context.$bs_formGroup,i,w,y);var E=wP.default.Children.only(a);return wP.default.cloneElement(E,_r({},y,{className:(0,Fie.default)(E.props.className,i,w)}))},t}(wP.default.Component);Uie.defaultProps=HAr;Uie.contextTypes=WAr;var lXe=wo("form-control-feedback",Uie);u();var uXe=Q(Uo()),Bie=Q(De()),cXe=Q(Oc());var $Ar={componentClass:cXe.default},YAr={componentClass:"p"},Vie=function(e){bn(t,e);function t(){return e.apply(this,arguments)||this}var r=t.prototype;return r.render=function(){var o=this.props,i=o.componentClass,a=o.className,c=qn(o,["componentClass","className"]),h=Vi(c),m=h[0],y=h[1],w=ai(m);return Bie.default.createElement(i,_r({},y,{className:(0,uXe.default)(a,w)}))},t}(Bie.default.Component);Vie.propTypes=$Ar;Vie.defaultProps=YAr;var pXe=wo("form-control-static",Vie);var ZAr={componentClass:dXe.default,type:EP.default.string,id:EP.default.string,inputRef:EP.default.func},KAr={componentClass:"input"},XAr={$bs_formGroup:EP.default.object},rT=function(e){bn(t,e);function t(){return e.apply(this,arguments)||this}var r=t.prototype;return r.render=function(){var o=this.context.$bs_formGroup,i=o&&o.controlId,a=this.props,c=a.componentClass,h=a.type,m=a.id,y=m===void 0?i:m,w=a.inputRef,E=a.className,A=a.bsSize,P=qn(a,["componentClass","type","id","inputRef","className","bsSize"]),j=Vi(P),D=j[0],k=j[1],z;if(h!=="file"&&(z=ai(D)),A){var V=fP[A]||A;z[pi({bsClass:"input"},V)]=!0}return Gie.default.createElement(c,_r({},k,{type:h,id:y,ref:w,className:(0,fXe.default)(E,z)}))},t}(Gie.default.Component);rT.propTypes=ZAr;rT.defaultProps=KAr;rT.contextTypes=XAr;rT.Feedback=lXe;rT.Static=pXe;var Hie=wo("form-control",v0([Sf.SMALL,Sf.LARGE],rT));u();var hXe=Q(Uo()),Wie=Q(De()),p8=Q(It());var JAr={controlId:p8.default.string,validationState:p8.default.oneOf(["success","warning","error",null])},QAr={$bs_formGroup:p8.default.object.isRequired},$ie=function(e){bn(t,e);function t(){return e.apply(this,arguments)||this}var r=t.prototype;return r.getChildContext=function(){var o=this.props,i=o.controlId,a=o.validationState;return{$bs_formGroup:{controlId:i,validationState:a}}},r.hasFeedback=function(o){var i=this;return Fd.some(o,function(a){return a.props.bsRole==="feedback"||a.props.children&&i.hasFeedback(a.props.children)})},r.render=function(){var o=this.props,i=o.validationState,a=o.className,c=o.children,h=qn(o,["validationState","className","children"]),m=KS(h,["controlId"]),y=m[0],w=m[1],E=_r({},ai(y),{"has-feedback":this.hasFeedback(c)});return i&&(E["has-"+i]=!0),Wie.default.createElement("div",_r({},w,{className:(0,hXe.default)(a,E)}),c)},t}(Wie.default.Component);$ie.propTypes=JAr;$ie.childContextTypes=QAr;var f8=wo("form-group",v0([Sf.LARGE,Sf.SMALL],$ie));u();var yae=Q(Uo()),_ae=Q(MXe()),zJe=Q(ub()),FJe=Q(em()),bae=Q(Kie()),iT=Q(De()),il=Q(It()),UJe=Q(ba()),aT=Q(AJe()),BJe=Q(eae()),VJe=Q(Oc());u();var OJe=Q(Uo()),pae=Q(De()),PJe=Q(Oc());var c4r={componentClass:PJe.default},p4r={componentClass:"div"},fae=function(e){bn(t,e);function t(){return e.apply(this,arguments)||this}var r=t.prototype;return r.render=function(){var o=this.props,i=o.componentClass,a=o.className,c=qn(o,["componentClass","className"]),h=Vi(c),m=h[0],y=h[1],w=ai(m);return pae.default.createElement(i,_r({},y,{className:(0,OJe.default)(a,w)}))},t}(pae.default.Component);fae.propTypes=c4r;fae.defaultProps=p4r;var AP=wo("modal-body",fae);u();var dae=Q(Uo()),OP=Q(De()),DJe=Q(It());var f4r={dialogClassName:DJe.default.string},NJe=function(e){bn(t,e);function t(){return e.apply(this,arguments)||this}var r=t.prototype;return r.render=function(){var o,i=this.props,a=i.dialogClassName,c=i.className,h=i.style,m=i.children,y=i.onMouseDownDialog,w=qn(i,["dialogClassName","className","style","children","onMouseDownDialog"]),E=Vi(w),A=E[0],P=E[1],j=pi(A),D=_r({display:"block"},h),k=_r({},ai(A),(o={},o[j]=!1,o[pi(A,"dialog")]=!0,o));return OP.default.createElement("div",_r({},P,{tabIndex:"-1",role:"dialog",style:D,className:(0,dae.default)(c,j)}),OP.default.createElement("div",{className:(0,dae.default)(a,k),onMouseDown:y},OP.default.createElement("div",{className:pi(A,"content"),role:"document"},m)))},t}(OP.default.Component);NJe.propTypes=f4r;var N8=wo("modal",v0([Sf.LARGE,Sf.SMALL],NJe));u();var LJe=Q(Uo()),hae=Q(De()),kJe=Q(Oc());var d4r={componentClass:kJe.default},h4r={componentClass:"div"},mae=function(e){bn(t,e);function t(){return e.apply(this,arguments)||this}var r=t.prototype;return r.render=function(){var o=this.props,i=o.componentClass,a=o.className,c=qn(o,["componentClass","className"]),h=Vi(c),m=h[0],y=h[1],w=ai(m);return hae.default.createElement(i,_r({},y,{className:(0,LJe.default)(a,w)}))},t}(hae.default.Component);mae.propTypes=d4r;mae.defaultProps=h4r;var PP=wo("modal-footer",mae);u();var RJe=Q(Uo()),oT=Q(It()),L8=Q(De());var m4r={closeLabel:oT.default.string,closeButton:oT.default.bool,onHide:oT.default.func},g4r={closeLabel:"Close",closeButton:!1},v4r={$bs_modal:oT.default.shape({onHide:oT.default.func})},k8=function(e){bn(t,e);function t(){return e.apply(this,arguments)||this}var r=t.prototype;return r.render=function(){var o=this.props,i=o.closeLabel,a=o.closeButton,c=o.onHide,h=o.className,m=o.children,y=qn(o,["closeLabel","closeButton","onHide","className","children"]),w=this.context.$bs_modal,E=Vi(y),A=E[0],P=E[1],j=ai(A);return L8.default.createElement("div",_r({},P,{className:(0,RJe.default)(h,j)}),a&&L8.default.createElement(JZe,{label:i,onClick:Hu(w&&w.onHide,c)}),m)},t}(L8.default.Component);k8.propTypes=m4r;k8.defaultProps=g4r;k8.contextTypes=v4r;var DP=wo("modal-header",k8);u();var jJe=Q(Uo()),gae=Q(De()),qJe=Q(Oc());var y4r={componentClass:qJe.default},_4r={componentClass:"h4"},vae=function(e){bn(t,e);function t(){return e.apply(this,arguments)||this}var r=t.prototype;return r.render=function(){var o=this.props,i=o.componentClass,a=o.className,c=qn(o,["componentClass","className"]),h=Vi(c),m=h[0],y=h[1],w=ai(m);return gae.default.createElement(i,_r({},y,{className:(0,jJe.default)(a,w)}))},t}(gae.default.Component);vae.propTypes=y4r;vae.defaultProps=_4r;var NP=wo("modal-title",vae);var b4r=_r({},aT.default.propTypes,N8.propTypes,{backdrop:il.default.oneOf(["static",!0,!1]),backdropClassName:il.default.string,keyboard:il.default.bool,animation:il.default.bool,dialogComponentClass:VJe.default,autoFocus:il.default.bool,enforceFocus:il.default.bool,restoreFocus:il.default.bool,show:il.default.bool,onHide:il.default.func,onEnter:il.default.func,onEntering:il.default.func,onEntered:il.default.func,onExit:il.default.func,onExiting:il.default.func,onExited:il.default.func,container:aT.default.propTypes.container}),x4r=_r({},aT.default.defaultProps,{animation:!0,dialogComponentClass:N8}),w4r={$bs_modal:il.default.shape({onHide:il.default.func})};function E4r(e){return iT.default.createElement(y0,_r({},e,{timeout:Ep.TRANSITION_DURATION}))}function S4r(e){return iT.default.createElement(y0,_r({},e,{timeout:Ep.BACKDROP_TRANSITION_DURATION}))}var Ep=function(e){bn(t,e);function t(n,o){var i;return i=e.call(this,n,o)||this,i.handleDialogBackdropMouseDown=function(){i._waitingForMouseUp=!0},i.handleMouseUp=function(a){var c=i._modal.getDialogElement();i._waitingForMouseUp&&a.target===c&&(i._ignoreBackdropClick=!0),i._waitingForMouseUp=!1},i.handleEntering=i.handleEntering.bind(fi(fi(i))),i.handleExited=i.handleExited.bind(fi(fi(i))),i.handleWindowResize=i.handleWindowResize.bind(fi(fi(i))),i.handleDialogClick=i.handleDialogClick.bind(fi(fi(i))),i.setModalRef=i.setModalRef.bind(fi(fi(i))),i.state={style:{}},i}var r=t.prototype;return r.getChildContext=function(){return{$bs_modal:{onHide:this.props.onHide}}},r.componentWillUnmount=function(){this.handleExited()},r.setModalRef=function(o){this._modal=o},r.handleDialogClick=function(o){if(this._ignoreBackdropClick||o.target!==o.currentTarget){this._ignoreBackdropClick=!1;return}this.props.onHide()},r.handleEntering=function(){_ae.default.on(window,"resize",this.handleWindowResize),this.updateStyle()},r.handleExited=function(){_ae.default.off(window,"resize",this.handleWindowResize)},r.handleWindowResize=function(){this.updateStyle()},r.updateStyle=function(){if(FJe.default){var o=this._modal.getDialogElement(),i=o.scrollHeight,a=(0,zJe.default)(o),c=(0,BJe.default)(UJe.default.findDOMNode(this.props.container||a.body)),h=i>a.documentElement.clientHeight;this.setState({style:{paddingRight:c&&!h?(0,bae.default)():void 0,paddingLeft:!c&&h?(0,bae.default)():void 0}})}},r.render=function(){var o=this.props,i=o.backdrop,a=o.backdropClassName,c=o.animation,h=o.show,m=o.dialogComponentClass,y=o.className,w=o.style,E=o.children,A=o.onEntering,P=o.onExited,j=qn(o,["backdrop","backdropClassName","animation","show","dialogComponentClass","className","style","children","onEntering","onExited"]),D=qie(j,aT.default),k=D[0],z=D[1],V=h&&!c&&"in";return iT.default.createElement(aT.default,_r({},k,{ref:this.setModalRef,show:h,containerClassName:pi(j,"open"),transition:c?E4r:void 0,backdrop:i,backdropTransition:c?S4r:void 0,backdropClassName:(0,yae.default)(pi(j,"backdrop"),a,V),onEntering:Hu(A,this.handleEntering),onExited:Hu(P,this.handleExited),onMouseUp:this.handleMouseUp}),iT.default.createElement(m,_r({},z,{style:_r({},this.state.style,w),className:(0,yae.default)(y,V),onClick:i===!0?this.handleDialogClick:null,onMouseDownDialog:this.handleDialogBackdropMouseDown}),E))},t}(iT.default.Component);Ep.propTypes=b4r;Ep.defaultProps=x4r;Ep.childContextTypes=w4r;Ep.Body=AP;Ep.Header=DP;Ep.Title=NP;Ep.Footer=PP;Ep.Dialog=N8;Ep.TRANSITION_DURATION=300;Ep.BACKDROP_TRANSITION_DURATION=150;var xae=wo("modal",v0([Sf.LARGE,Sf.SMALL],Ep));u();var GJe=Q(Uo()),LP=Q($Ke()),kP=Q(De()),al=Q(It()),HJe=Q(ba()),WJe=Q(uKe()),bQn=Q(ab());var T4r={activeKey:al.default.any,activeHref:al.default.string,stacked:al.default.bool,justified:(0,WJe.default)(al.default.bool,function(e){var t=e.justified,r=e.navbar;return t&&r?Error("justified navbar `Nav`s are not supported"):null}),onSelect:al.default.func,role:al.default.string,navbar:al.default.bool,pullRight:al.default.bool,pullLeft:al.default.bool},I4r={justified:!1,pullRight:!1,pullLeft:!1,stacked:!1},M4r={$bs_navbar:al.default.shape({bsClass:al.default.string,onSelect:al.default.func}),$bs_tabContainer:al.default.shape({activeKey:al.default.any,onSelect:al.default.func.isRequired,getTabId:al.default.func.isRequired,getPaneId:al.default.func.isRequired})},R8=function(e){bn(t,e);function t(){return e.apply(this,arguments)||this}var r=t.prototype;return r.componentDidUpdate=function(){var o=this;if(this._needsRefocus){this._needsRefocus=!1;var i=this.props.children,a=this.getActiveProps(),c=a.activeKey,h=a.activeHref,m=Fd.find(i,function(P){return o.isActive(P,c,h)}),y=Fd.toArray(i),w=y.indexOf(m),E=HJe.default.findDOMNode(this).children,A=E&&E[w];!A||!A.firstChild||A.firstChild.focus()}},r.getActiveProps=function(){var o=this.context.$bs_tabContainer;return o||this.props},r.getNextActiveChild=function(o){var i=this,a=this.props.children,c=Fd.filter(a,function(j){return j.props.eventKey!=null&&!j.props.disabled}),h=this.getActiveProps(),m=h.activeKey,y=h.activeHref,w=Fd.find(a,function(j){return i.isActive(j,m,y)}),E=c.indexOf(w);if(E===-1)return c[0];var A=E+o,P=c.length;return A>=P?A=0:A<0&&(A=P-1),c[A]},r.getTabProps=function(o,i,a,c,h){var m=this;if(!i&&a!=="tablist")return null;var y=o.props,w=y.id,E=y["aria-controls"],A=y.eventKey,P=y.role,j=y.onKeyDown,D=y.tabIndex;return i&&(w=i.getTabId(A),E=i.getPaneId(A)),a==="tablist"&&(P=P||"tab",j=Hu(function(k){return m.handleTabKeyDown(h,k)},j),D=c?D:-1),{id:w,role:P,onKeyDown:j,"aria-controls":E,tabIndex:D}},r.handleTabKeyDown=function(o,i){var a;switch(i.keyCode){case LP.default.codes.left:case LP.default.codes.up:a=this.getNextActiveChild(-1);break;case LP.default.codes.right:case LP.default.codes.down:a=this.getNextActiveChild(1);break;default:return}i.preventDefault(),o&&a&&a.props.eventKey!=null&&o(a.props.eventKey),this._needsRefocus=!0},r.isActive=function(o,i,a){var c=o.props;return c.active||i!=null&&c.eventKey===i||a&&c.href===a?!0:c.active},r.render=function(){var o,i=this,a=this.props,c=a.stacked,h=a.justified,m=a.onSelect,y=a.role,w=a.navbar,E=a.pullRight,A=a.pullLeft,P=a.className,j=a.children,D=qn(a,["stacked","justified","onSelect","role","navbar","pullRight","pullLeft","className","children"]),k=this.context.$bs_tabContainer,z=y||(k?"tablist":null),V=this.getActiveProps(),G=V.activeKey,K=V.activeHref;delete D.activeKey,delete D.activeHref;var Z=Vi(D),te=Z[0],se=Z[1],le=_r({},ai(te),(o={},o[pi(te,"stacked")]=c,o[pi(te,"justified")]=h,o)),pe=w!=null?w:this.context.$bs_navbar,me,_e;if(pe){var de=this.context.$bs_navbar||{bsClass:"navbar"};le[pi(de,"nav")]=!0,_e=pi(de,"right"),me=pi(de,"left")}else _e="pull-right",me="pull-left";return le[_e]=E,le[me]=A,kP.default.createElement("ul",_r({},se,{role:z,className:(0,GJe.default)(P,le)}),Fd.map(j,function(Ce){var Ye=i.isActive(Ce,G,K),rt=Hu(Ce.props.onSelect,m,pe&&pe.onSelect,k&&k.onSelect);return(0,kP.cloneElement)(Ce,_r({},i.getTabProps(Ce,k,z,Ye,rt),{active:Ye,activeKey:G,activeHref:K,onSelect:rt}))}))},t}(kP.default.Component);R8.propTypes=T4r;R8.defaultProps=I4r;R8.contextTypes=M4r;var $Je=wo("nav",YZe(["tabs","pills"],R8));u();var YJe=Q(Uo()),j8=Q(De()),w0=Q(It());var C4r={active:w0.default.bool,disabled:w0.default.bool,role:w0.default.string,href:w0.default.string,onClick:w0.default.func,onSelect:w0.default.func,eventKey:w0.default.any},A4r={active:!1,disabled:!1},wae=function(e){bn(t,e);function t(n,o){var i;return i=e.call(this,n,o)||this,i.handleClick=i.handleClick.bind(fi(fi(i))),i}var r=t.prototype;return r.handleClick=function(o){if(this.props.disabled){o.preventDefault();return}this.props.onSelect&&this.props.onSelect(this.props.eventKey,o)},r.render=function(){var o=this.props,i=o.active,a=o.disabled,c=o.onClick,h=o.className,m=o.style,y=qn(o,["active","disabled","onClick","className","style"]);return delete y.onSelect,delete y.eventKey,delete y.activeKey,delete y.activeHref,y.role?y.role==="tab"&&(y["aria-selected"]=i):y.href==="#"&&(y.role="button"),j8.default.createElement("li",{role:"presentation",className:(0,YJe.default)(h,{active:i,disabled:a}),style:m},j8.default.createElement(sKe,_r({},y,{disabled:a,onClick:Hu(c,this.handleClick)})))},t}(j8.default.Component);wae.propTypes=C4r;wae.defaultProps=A4r;var ZJe=wae;u();var SQe=Q(Uo()),qP=Q(De()),Sp=Q(It()),Aae=Q(EQe()),TQe=Q(Oc());var PDr=_r({},Aae.default.propTypes,{show:Sp.default.bool,rootClose:Sp.default.bool,onHide:Sp.default.func,animation:Sp.default.oneOfType([Sp.default.bool,TQe.default]),onEnter:Sp.default.func,onEntering:Sp.default.func,onEntered:Sp.default.func,onExit:Sp.default.func,onExiting:Sp.default.func,onExited:Sp.default.func,placement:Sp.default.oneOf(["top","right","bottom","left"])}),DDr={animation:y0,rootClose:!1,show:!1,placement:"right"},Oae=function(e){bn(t,e);function t(){return e.apply(this,arguments)||this}var r=t.prototype;return r.render=function(){var o=this.props,i=o.animation,a=o.children,c=qn(o,["animation","children"]),h=i===!0?y0:i||null,m;return h?m=a:m=(0,qP.cloneElement)(a,{className:(0,SQe.default)(a.props.className,"in")}),qP.default.createElement(Aae.default,_r({},c,{transition:h}),m)},t}(qP.default.Component);Oae.propTypes=PDr;Oae.defaultProps=DDr;var Pae=Oae;u();var Dae=Q(Uo()),uT=Q(De()),cT=Q(It()),eeo=Q(ab());var NDr={inline:cT.default.bool,disabled:cT.default.bool,title:cT.default.string,validationState:cT.default.oneOf(["success","warning","error",null]),inputRef:cT.default.func},LDr={inline:!1,disabled:!1,title:""},Nae=function(e){bn(t,e);function t(){return e.apply(this,arguments)||this}var r=t.prototype;return r.render=function(){var o=this.props,i=o.inline,a=o.disabled,c=o.validationState,h=o.inputRef,m=o.className,y=o.style,w=o.title,E=o.children,A=qn(o,["inline","disabled","validationState","inputRef","className","style","title","children"]),P=Vi(A),j=P[0],D=P[1],k=uT.default.createElement("input",_r({},D,{ref:h,type:"radio",disabled:a}));if(i){var z,V=(z={},z[pi(j,"inline")]=!0,z.disabled=a,z);return uT.default.createElement("label",{className:(0,Dae.default)(m,V),style:y,title:w},k,E)}var G=_r({},ai(j),{disabled:a});return c&&(G["has-"+c]=!0),uT.default.createElement("div",{className:(0,Dae.default)(m,G),style:y},uT.default.createElement("label",{title:w},k,E))},t}(uT.default.Component);Nae.propTypes=NDr;Nae.defaultProps=LDr;var Lae=wo("radio",Nae);u();var qae=Q(De()),tF=Q(It());u();var Y8=Q(De()),If=Q(It());var kDr="tab",RDr="pane",jDr=If.default.oneOfType([If.default.string,If.default.number]),qDr={id:function(t){var r=null;if(!t.generateChildId){for(var n=arguments.length,o=new Array(n>1?n-1:0),i=1;i<n;i++)o[i-1]=arguments[i];r=jDr.apply(void 0,[t].concat(o)),!r&&!t.id&&(r=new Error("In order to properly initialize Tabs in a way that is accessible to assistive technologies (such as screen readers) an `id` or a `generateChildId` prop to TabContainer is required"))}return r},generateChildId:If.default.func,onSelect:If.default.func,activeKey:If.default.any},zDr={$bs_tabContainer:If.default.shape({activeKey:If.default.any,onSelect:If.default.func.isRequired,getTabId:If.default.func.isRequired,getPaneId:If.default.func.isRequired})},kae=function(e){bn(t,e);function t(){return e.apply(this,arguments)||this}var r=t.prototype;return r.getChildContext=function(){var o=this.props,i=o.activeKey,a=o.onSelect,c=o.generateChildId,h=o.id,m=c||function(y,w){return h?h+"-"+w+"-"+y:null};return{$bs_tabContainer:{activeKey:i,onSelect:a,getTabId:function(w){return m(w,kDr)},getPaneId:function(w){return m(w,RDr)}}}},r.render=function(){var o=this.props,i=o.children,a=qn(o,["children"]);return delete a.generateChildId,delete a.onSelect,delete a.activeKey,Y8.default.cloneElement(Y8.default.Children.only(i),a)},t}(Y8.default.Component);kae.propTypes=qDr;kae.childContextTypes=zDr;var Z8=ib(kae,{activeKey:"onSelect"});u();var IQe=Q(Uo()),Rae=Q(De()),ql=Q(It()),K8=Q(Oc());var FDr={componentClass:K8.default,animation:ql.default.oneOfType([ql.default.bool,K8.default]),mountOnEnter:ql.default.bool,unmountOnExit:ql.default.bool},UDr={componentClass:"div",animation:!0,mountOnEnter:!1,unmountOnExit:!1},BDr={$bs_tabContainer:ql.default.shape({activeKey:ql.default.any})},VDr={$bs_tabContent:ql.default.shape({bsClass:ql.default.string,animation:ql.default.oneOfType([ql.default.bool,K8.default]),activeKey:ql.default.any,mountOnEnter:ql.default.bool,unmountOnExit:ql.default.bool,onPaneEnter:ql.default.func.isRequired,onPaneExited:ql.default.func.isRequired,exiting:ql.default.bool.isRequired})},zP=function(e){bn(t,e);function t(n,o){var i;return i=e.call(this,n,o)||this,i.handlePaneEnter=i.handlePaneEnter.bind(fi(fi(i))),i.handlePaneExited=i.handlePaneExited.bind(fi(fi(i))),i.state={activeKey:null,activeChild:null},i}var r=t.prototype;return r.getChildContext=function(){var o=this.props,i=o.bsClass,a=o.animation,c=o.mountOnEnter,h=o.unmountOnExit,m=this.state.activeKey,y=this.getContainerActiveKey(),w=m!=null?m:y,E=m!=null&&m!==y;return{$bs_tabContent:{bsClass:i,animation:a,activeKey:w,mountOnEnter:c,unmountOnExit:h,onPaneEnter:this.handlePaneEnter,onPaneExited:this.handlePaneExited,exiting:E}}},r.UNSAFE_componentWillReceiveProps=function(o){!o.animation&&this.state.activeChild&&this.setState({activeKey:null,activeChild:null})},r.componentWillUnmount=function(){this.isUnmounted=!0},r.getContainerActiveKey=function(){var o=this.context.$bs_tabContainer;return o&&o.activeKey},r.handlePaneEnter=function(o,i){return!this.props.animation||i!==this.getContainerActiveKey()?!1:(this.setState({activeKey:i,activeChild:o}),!0)},r.handlePaneExited=function(o){this.isUnmounted||this.setState(function(i){var a=i.activeChild;return a!==o?null:{activeKey:null,activeChild:null}})},r.render=function(){var o=this.props,i=o.componentClass,a=o.className,c=qn(o,["componentClass","className"]),h=KS(c,["animation","mountOnEnter","unmountOnExit"]),m=h[0],y=h[1];return Rae.default.createElement(i,_r({},y,{className:(0,IQe.default)(a,pi(m,"content"))}))},t}(Rae.default.Component);zP.propTypes=FDr;zP.defaultProps=UDr;zP.contextTypes=BDr;zP.childContextTypes=VDr;var X8=wo("tab",zP);u();var MQe=Q(Uo()),J8=Q(De()),hi=Q(It()),jae=Q(Oc()),xeo=Q(ab());var GDr={eventKey:hi.default.any,animation:hi.default.oneOfType([hi.default.bool,jae.default]),id:hi.default.string,"aria-labelledby":hi.default.string,bsClass:hi.default.string,onEnter:hi.default.func,onEntering:hi.default.func,onEntered:hi.default.func,onExit:hi.default.func,onExiting:hi.default.func,onExited:hi.default.func,mountOnEnter:hi.default.bool,unmountOnExit:hi.default.bool},HDr={$bs_tabContainer:hi.default.shape({getTabId:hi.default.func,getPaneId:hi.default.func}),$bs_tabContent:hi.default.shape({bsClass:hi.default.string,animation:hi.default.oneOfType([hi.default.bool,jae.default]),activeKey:hi.default.any,mountOnEnter:hi.default.bool,unmountOnExit:hi.default.bool,onPaneEnter:hi.default.func.isRequired,onPaneExited:hi.default.func.isRequired,exiting:hi.default.bool.isRequired})},WDr={$bs_tabContainer:hi.default.oneOf([null])},Q8=function(e){bn(t,e);function t(n,o){var i;return i=e.call(this,n,o)||this,i.handleEnter=i.handleEnter.bind(fi(fi(i))),i.handleExited=i.handleExited.bind(fi(fi(i))),i.in=!1,i}var r=t.prototype;return r.getChildContext=function(){return{$bs_tabContainer:null}},r.componentDidMount=function(){this.shouldBeIn()&&this.handleEnter()},r.componentDidUpdate=function(){this.in?this.shouldBeIn()||this.handleExited():this.shouldBeIn()&&this.handleEnter()},r.componentWillUnmount=function(){this.in&&this.handleExited()},r.getAnimation=function(){if(this.props.animation!=null)return this.props.animation;var o=this.context.$bs_tabContent;return o&&o.animation},r.handleEnter=function(){var o=this.context.$bs_tabContent;o&&(this.in=o.onPaneEnter(this,this.props.eventKey))},r.handleExited=function(){var o=this.context.$bs_tabContent;o&&(o.onPaneExited(this),this.in=!1)},r.isActive=function(){var o=this.context.$bs_tabContent,i=o&&o.activeKey;return this.props.eventKey===i},r.shouldBeIn=function(){return this.getAnimation()&&this.isActive()},r.render=function(){var o=this.props,i=o.eventKey,a=o.className,c=o.onEnter,h=o.onEntering,m=o.onEntered,y=o.onExit,w=o.onExiting,E=o.onExited,A=o.mountOnEnter,P=o.unmountOnExit,j=qn(o,["eventKey","className","onEnter","onEntering","onEntered","onExit","onExiting","onExited","mountOnEnter","unmountOnExit"]),D=this.context,k=D.$bs_tabContent,z=D.$bs_tabContainer,V=KS(j,["animation"]),G=V[0],K=V[1],Z=this.isActive(),te=this.getAnimation(),se=A!=null?A:k&&k.mountOnEnter,le=P!=null?P:k&&k.unmountOnExit;if(!Z&&!te&&le)return null;var pe=te===!0?y0:te||null;k&&(G.bsClass=pi(k,"pane"));var me=_r({},ai(G),{active:Z});z&&(K.id=z.getPaneId(i),K["aria-labelledby"]=z.getTabId(i));var _e=J8.default.createElement("div",_r({},K,{role:"tabpanel","aria-hidden":!Z,className:(0,MQe.default)(a,me)}));if(pe){var de=k&&k.exiting;return J8.default.createElement(pe,{in:Z&&!de,onEnter:Hu(this.handleEnter,c),onEntering:h,onEntered:m,onExit:y,onExiting:w,onExited:Hu(this.handleExited,E),mountOnEnter:se,unmountOnExit:le},_e)}return _e},t}(J8.default.Component);Q8.propTypes=GDr;Q8.contextTypes=HDr;Q8.childContextTypes=WDr;var eF=wo("tab-pane",Q8);var $Dr=_r({},eF.propTypes,{disabled:tF.default.bool,title:tF.default.node,tabClassName:tF.default.string}),FP=function(e){bn(t,e);function t(){return e.apply(this,arguments)||this}var r=t.prototype;return r.render=function(){var o=_r({},this.props);return delete o.title,delete o.disabled,delete o.tabClassName,qae.default.createElement(eF,o)},t}(qae.default.Component);FP.propTypes=$Dr;FP.Container=Z8;FP.Content=X8;FP.Pane=eF;var rF=FP;u();var hb=Q(De()),Ud=Q(It()),CQe=Q(kie());var AQe=Q(Oc());var YDr=Z8.ControlledComponent,ZDr={activeKey:Ud.default.any,bsStyle:Ud.default.oneOf(["tabs","pills"]),animation:Ud.default.oneOfType([Ud.default.bool,AQe.default]),id:(0,CQe.default)(Ud.default.oneOfType([Ud.default.string,Ud.default.number])),onSelect:Ud.default.func,mountOnEnter:Ud.default.bool,unmountOnExit:Ud.default.bool},KDr={bsStyle:"tabs",animation:!0,mountOnEnter:!1,unmountOnExit:!1};function XDr(e){var t;return Fd.forEach(e,function(r){t==null&&(t=r.props.eventKey)}),t}var nF=function(e){bn(t,e);function t(){return e.apply(this,arguments)||this}var r=t.prototype;return r.renderTab=function(o){var i=o.props,a=i.title,c=i.eventKey,h=i.disabled,m=i.tabClassName;return a==null?null:hb.default.createElement(ZJe,{eventKey:c,disabled:h,className:m},a)},r.render=function(){var o=this.props,i=o.id,a=o.onSelect,c=o.animation,h=o.mountOnEnter,m=o.unmountOnExit,y=o.bsClass,w=o.className,E=o.style,A=o.children,P=o.activeKey,j=P===void 0?XDr(A):P,D=qn(o,["id","onSelect","animation","mountOnEnter","unmountOnExit","bsClass","className","style","children","activeKey"]);return hb.default.createElement(YDr,{id:i,activeKey:j,onSelect:a,className:w,style:E},hb.default.createElement("div",null,hb.default.createElement($Je,_r({},D,{role:"tablist"}),Fd.map(A,this.renderTab)),hb.default.createElement(X8,{bsClass:y,animation:c,mountOnEnter:h,unmountOnExit:m},A)))},t}(hb.default.Component);nF.propTypes=ZDr;nF.defaultProps=KDr;wo("tab",nF);var zae=ib(nF,{activeKey:"onSelect"});u();var OQe=Q(Uo()),UP=Q(De()),zl=Q(It()),PQe=Q(kie());var JDr={id:(0,PQe.default)(zl.default.oneOfType([zl.default.string,zl.default.number])),placement:zl.default.oneOf(["top","right","bottom","left"]),positionTop:zl.default.oneOfType([zl.default.number,zl.default.string]),positionLeft:zl.default.oneOfType([zl.default.number,zl.default.string]),arrowOffsetTop:zl.default.oneOfType([zl.default.number,zl.default.string]),arrowOffsetLeft:zl.default.oneOfType([zl.default.number,zl.default.string])},QDr={placement:"right"},Fae=function(e){bn(t,e);function t(){return e.apply(this,arguments)||this}var r=t.prototype;return r.render=function(){var o,i=this.props,a=i.placement,c=i.positionTop,h=i.positionLeft,m=i.arrowOffsetTop,y=i.arrowOffsetLeft,w=i.className,E=i.style,A=i.children,P=qn(i,["placement","positionTop","positionLeft","arrowOffsetTop","arrowOffsetLeft","className","style","children"]),j=Vi(P),D=j[0],k=j[1],z=_r({},ai(D),(o={},o[a]=!0,o)),V=_r({top:c,left:h},E),G={top:m,left:y};return UP.default.createElement("div",_r({},k,{role:"tooltip",className:(0,OQe.default)(w,z),style:V}),UP.default.createElement("div",{className:pi(D,"arrow"),style:G}),UP.default.createElement("div",{className:pi(D,"inner")},A))},t}(UP.default.Component);Fae.propTypes=JDr;Fae.defaultProps=QDr;var Uae=wo("tooltip",Fae);u();var JP=Q(De(),1),hse=Q(It(),1);u();u();var S0=Q(De(),1),gb=Q(It(),1);u();u();var mb=Q(De(),1),nm=Q(It(),1);var DQe=(0,mb.forwardRef)(function(t,r){let{children:n,className:o="",onClick:i,type:a="default",disabled:c=!1,loading:h=!1,title:m,buttonType:y,form:w}=t;return mb.default.createElement("button",{className:`vkf-button-${a} ${o} ${jt(h&&"loading")}`,disabled:c,onClick:i,ref:r,title:m,type:y,form:w},h===!0&&mb.default.createElement(mb.default.Fragment,null,mb.default.createElement("div",{className:"loading-animation"}),n),h===!1&&n)});DQe.propTypes={children:nm.default.node,className:nm.default.string,onClick:nm.default.func,disabled:nm.default.bool,loading:nm.default.bool,title:nm.default.string,type:nm.default.oneOf(["primary","default","delete","discard","edit","save"]),buttonType:nm.default.string,form:nm.default.string};var BP=DQe;var rn=BP;u();u();var vr=Q(De(),1),NQe=Q(It(),1);var eNr={addVectorMap:vr.default.createElement("svg",{width:"20",height:"16",viewBox:"0 0 20 16",fill:"none",xmlns:"http://www.w3.org/2000/svg"},vr.default.createElement("path",{d:"M5.3888 13.0958C5.31376 12.9926 5.21482 12.9091 5.10047 12.8525C4.19363 12.4067 3.42983 11.7158 2.89568 10.8581C2.36152 10.0003 2.0784 9.01005 2.0784 7.99957C2.0784 6.9891 2.36152 5.99884 2.89568 5.14109C3.42983 4.28334 4.19363 3.59241 5.10047 3.14666C5.21477 3.09032 5.3137 3.00711 5.3888 2.90416L5.4063 2.87916C5.51654 2.73062 5.57378 2.54941 5.56886 2.3645C5.56394 2.17959 5.49715 2.00167 5.37917 1.85921C5.26118 1.71674 5.09883 1.61797 4.91808 1.57868C4.73732 1.53939 4.54861 1.56186 4.38214 1.64249C3.19133 2.22398 2.18778 3.12823 1.48579 4.25223C0.783811 5.37623 0.411621 6.67479 0.411621 7.99999C0.411621 9.32519 0.783811 10.6237 1.48579 11.7477C2.18778 12.8717 3.19133 13.776 4.38214 14.3575C4.54869 14.4376 4.73726 14.4596 4.9178 14.4201C5.09833 14.3805 5.26043 14.2817 5.37826 14.1393C5.4961 13.997 5.56288 13.8192 5.56796 13.6345C5.57304 13.4498 5.51613 13.2686 5.4063 13.12L5.3888 13.0958Z",fill:"currentColor"}),vr.default.createElement("path",{d:"M12.4946 0.5C11.0113 0.5 9.56122 0.939867 8.32785 1.76398C7.09449 2.58809 6.13319 3.75943 5.56554 5.12987C4.99788 6.50032 4.84935 8.00832 5.13874 9.46318C5.42813 10.918 6.14244 12.2544 7.19133 13.3033C8.24022 14.3522 9.5766 15.0665 11.0315 15.3559C12.4863 15.6453 13.9943 15.4968 15.3648 14.9291C16.7352 14.3614 17.9065 13.4001 18.7307 12.1668C19.5548 10.9334 19.9946 9.48336 19.9946 8C19.9924 6.01155 19.2015 4.10518 17.7955 2.69914C16.3895 1.29309 14.4831 0.502206 12.4946 0.5ZM12.4946 13.8333C11.3409 13.8333 10.2131 13.4912 9.25381 12.8502C8.29452 12.2093 7.54685 11.2982 7.10533 10.2323C6.66382 9.16642 6.5483 7.99353 6.77338 6.86197C6.99846 5.73042 7.55404 4.69102 8.36984 3.87521C9.18565 3.0594 10.225 2.50383 11.3566 2.27875C12.4882 2.05367 13.661 2.16919 14.727 2.6107C15.7929 3.05221 16.7039 3.79989 17.3449 4.75917C17.9858 5.71846 18.328 6.84628 18.328 8C18.3262 9.54655 17.7111 11.0293 16.6175 12.1228C15.5239 13.2164 14.0412 13.8316 12.4946 13.8333Z",fill:"currentColor"}),vr.default.createElement("path",{d:"M15.6321 6.9583H13.7446C13.6893 6.9583 13.6364 6.93635 13.5973 6.89728C13.5582 6.85821 13.5363 6.80522 13.5363 6.74997V4.86247C13.5363 4.5862 13.4265 4.32125 13.2312 4.1259C13.0358 3.93055 12.7709 3.8208 12.4946 3.8208C12.2183 3.8208 11.9534 3.93055 11.758 4.1259C11.5627 4.32125 11.4529 4.5862 11.4529 4.86247V6.74997C11.4529 6.80522 11.431 6.85821 11.3919 6.89728C11.3528 6.93635 11.2999 6.9583 11.2446 6.9583H9.3571C9.08083 6.9583 8.81588 7.06805 8.62053 7.2634C8.42518 7.45875 8.31543 7.7237 8.31543 7.99997C8.31543 8.27623 8.42518 8.54119 8.62053 8.73654C8.81588 8.93189 9.08083 9.04163 9.3571 9.04163H11.2446C11.2999 9.04163 11.3528 9.06358 11.3919 9.10265C11.431 9.14172 11.4529 9.19471 11.4529 9.24997V11.1366C11.4529 11.4129 11.5627 11.6779 11.758 11.8732C11.9534 12.0686 12.2183 12.1783 12.4946 12.1783C12.7709 12.1783 13.0358 12.0686 13.2312 11.8732C13.4265 11.6779 13.5363 11.4129 13.5363 11.1366V9.24997C13.5363 9.19471 13.5582 9.14172 13.5973 9.10265C13.6364 9.06358 13.6893 9.04163 13.7446 9.04163H15.6321C15.9084 9.04163 16.1733 8.93189 16.3687 8.73654C16.564 8.54119 16.6738 8.27623 16.6738 7.99997C16.6738 7.7237 16.564 7.45875 16.3687 7.2634C16.1733 7.06805 15.9084 6.9583 15.6321 6.9583Z",fill:"currentColor"})),uploadVectorMap:vr.default.createElement("svg",{width:"25",height:"24",viewBox:"0 0 25 24",fill:"none",xmlns:"http://www.w3.org/2000/svg"},vr.default.createElement("path",{d:"M17.6616 10.5C13.9366 10.5 10.9116 13.525 10.9116 17.25C10.9116 20.975 13.9366 24 17.6616 24C21.3866 24 24.4116 20.975 24.4116 17.25C24.4116 13.525 21.3866 10.5 17.6616 10.5ZM17.6616 12C20.5596 12 22.9116 14.352 22.9116 17.25C22.9116 20.148 20.5596 22.5 17.6616 22.5C14.7636 22.5 12.4116 20.148 12.4116 17.25C12.4116 14.352 14.7636 12 17.6616 12ZM8.66162 19.5H2.66162C2.25062 19.5 1.91162 19.161 1.91162 18.75V2.25C1.91162 1.839 2.25062 1.5 2.66162 1.5H13.2896C13.4886 1.5 13.6796 1.579 13.8206 1.719L16.6936 4.591C16.8346 4.731 16.9136 4.922 16.9136 5.121V8.25C16.9136 8.664 17.2496 9 17.6636 9C18.0776 9 18.4136 8.664 18.4136 8.25V5.121C18.4136 4.524 18.1756 3.951 17.7536 3.529L14.8806 0.658C14.4586 0.237 13.8856 0 13.2896 0H2.66162C1.42762 0 0.411621 1.016 0.411621 2.25V18.75C0.411621 19.984 1.42762 21 2.66162 21H8.66162C9.07562 21 9.41162 20.664 9.41162 20.25C9.41162 19.836 9.07562 19.5 8.66162 19.5ZM8.88162 6.53L10.6006 8.25L8.88162 9.97C8.58862 10.262 8.58862 10.738 8.88162 11.03C9.17362 11.323 9.64962 11.323 9.94162 11.03L12.1916 8.78C12.4846 8.487 12.4846 8.013 12.1916 7.72L9.94162 5.47C9.64962 5.177 9.17362 5.177 8.88162 5.47C8.58862 5.762 8.58862 6.238 8.88162 6.53ZM5.88162 5.47L3.63162 7.72C3.33862 8.013 3.33862 8.487 3.63162 8.78L5.88162 11.03C6.17362 11.323 6.64962 11.323 6.94162 11.03C7.23462 10.738 7.23462 10.262 6.94162 9.97L5.22262 8.25L6.94162 6.53C7.23462 6.238 7.23462 5.762 6.94162 5.47C6.64962 5.177 6.17362 5.177 5.88162 5.47Z",fill:"currentColor"}),vr.default.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M17.7167 13.6361C18.2138 13.6361 18.6167 14.0391 18.6167 14.5361V19.8171C18.6167 20.3141 18.2138 20.7171 17.7167 20.7171C17.2197 20.7171 16.8167 20.3141 16.8167 19.8171L16.8167 14.5361C16.8167 14.0391 17.2197 13.6361 17.7167 13.6361Z",fill:"currentColor"}),vr.default.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M21.2572 17.1766C21.2572 17.6736 20.8543 18.0766 20.3572 18.0766H15.0763C14.5792 18.0766 14.1763 17.6736 14.1763 17.1766C14.1763 16.6795 14.5792 16.2766 15.0763 16.2766L20.3572 16.2766C20.8543 16.2766 21.2572 16.6795 21.2572 17.1766Z",fill:"currentColor"})),edit:vr.default.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20"},vr.default.createElement("path",{d:"M16.667 9.573a.833.833 0 0 0-.834.834v7.083a.834.834 0 0 1-.833.833H2.5a.833.833 0 0 1-.833-.833V3.323A.833.833 0 0 1 2.5 2.49h8.333a.833.833 0 0 0 0-1.667H2.5a2.5 2.5 0 0 0-2.5 2.5V17.49a2.5 2.5 0 0 0 2.5 2.5H15a2.5 2.5 0 0 0 2.5-2.5v-7.083a.833.833 0 0 0-.833-.834ZM19.513.482a1.706 1.706 0 0 0-2.357 0l-.884.884a.417.417 0 0 0 0 .589l1.767 1.767a.417.417 0 0 0 .59 0l.884-.884a1.666 1.666 0 0 0 0-2.356Z"}),vr.default.createElement("path",{d:"m9.466 8.762 1.767 1.767a.417.417 0 0 0 .59 0l5.303-5.303a.417.417 0 0 0 0-.59l-1.769-1.769a.43.43 0 0 0-.589 0L9.466 8.172a.417.417 0 0 0 0 .59ZM8.624 9.363a.422.422 0 0 0-.303.25l-1.01 2.529a.416.416 0 0 0 .092.449.44.44 0 0 0 .45.092l2.525-1.01a.417.417 0 0 0 .14-.681L9 9.477a.417.417 0 0 0-.376-.114Z"})),"edit-inverse":vr.default.createElement("svg",{viewBox:"0 0 14 14",xmlns:"http://www.w3.org/2000/svg"},vr.default.createElement("path",{d:"M7.98408 8.41697C7.87252 8.52907 7.73909 8.61704 7.59208 8.67538L5.53 9.50197C5.31774 9.58487 5.08603 9.60464 4.86279 9.5589C4.63955 9.51315 4.4343 9.40384 4.27175 9.24413C4.11028 9.0827 3.99972 8.87744 3.95379 8.65377C3.90785 8.43011 3.92856 8.19789 4.01333 7.98588L4.83758 5.92497C4.89649 5.77794 4.9846 5.64439 5.09658 5.53238L8.53067 2.09772C8.55074 2.07732 8.56439 2.05149 8.56994 2.02342C8.57549 1.99535 8.57269 1.96627 8.5619 1.93977C8.5511 1.91327 8.53277 1.89052 8.50918 1.87432C8.48559 1.85812 8.45778 1.84919 8.42917 1.84863H1.81883C1.33645 1.84863 0.873821 2.04026 0.532724 2.38136C0.191627 2.72245 0 3.18508 0 3.66747V11.6971C-1.22907e-08 11.9359 0.0470497 12.1724 0.138462 12.393C0.229874 12.6136 0.363857 12.8141 0.532759 12.983C0.701661 13.1518 0.902173 13.2857 1.12284 13.3771C1.34351 13.4684 1.58001 13.5154 1.81883 13.5153H9.84842C10.0872 13.5154 10.3237 13.4684 10.5443 13.3771C10.765 13.2857 10.9654 13.1518 11.1343 12.9829C11.3031 12.8141 11.4371 12.6136 11.5284 12.393C11.6198 12.1723 11.6667 11.9358 11.6667 11.6971V5.08847C11.6666 5.05971 11.658 5.03161 11.642 5.0077C11.6261 4.98379 11.6033 4.96515 11.5768 4.95412C11.5502 4.94308 11.521 4.94014 11.4928 4.94568C11.4646 4.95121 11.4386 4.96497 11.4182 4.98522L7.98408 8.41697Z"}),vr.default.createElement("path",{d:"M10.8312 1.77357C10.7755 1.72081 10.7017 1.69141 10.625 1.69141C10.5483 1.69141 10.4745 1.72081 10.4188 1.77357L5.8612 6.33174C5.83328 6.35975 5.81127 6.39307 5.79645 6.42974L4.97162 8.49241C4.95035 8.54548 4.94514 8.60363 4.95666 8.65964C4.96817 8.71564 4.99589 8.76703 5.03637 8.80741C5.0775 8.84649 5.12878 8.87323 5.18437 8.88457C5.23997 8.89592 5.29763 8.89142 5.35078 8.87157L7.41287 8.04674C7.44959 8.03203 7.48293 8.01 7.51087 7.98199L12.069 3.42441C12.1237 3.36971 12.1544 3.29554 12.1544 3.2182C12.1544 3.14086 12.1237 3.06669 12.069 3.01199L10.8312 1.77357Z"}),vr.default.createElement("path",{d:"M13.513 1.98011C13.7317 1.76133 13.8546 1.46464 13.8546 1.15528C13.8546 0.845921 13.7317 0.549228 13.513 0.330445C13.2908 0.118342 12.9954 0 12.6882 0C12.381 0 12.0856 0.118342 11.8634 0.330445L11.2444 0.949362C11.2354 0.961013 11.2272 0.973295 11.2199 0.986112C11.1818 1.03444 11.1604 1.09377 11.1587 1.15528C11.1587 1.19365 11.1663 1.23164 11.181 1.26707C11.1957 1.30251 11.2173 1.33469 11.2444 1.36178L12.4834 2.59903C12.5324 2.64926 12.5983 2.67943 12.6683 2.68364C12.7383 2.68785 12.8074 2.66579 12.862 2.62178C12.8739 2.61508 12.8852 2.60747 12.8959 2.59903L13.513 1.98011Z"})),close:vr.default.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 30 30"},vr.default.createElement("path",{d:"M0 0h30v30H0z"}),vr.default.createElement("path",{stroke:"#fff",strokeWidth:"2",d:"M0-1h15.582",transform:"scale(.98773 1.01212) rotate(45 -7.565 16.188)"}),vr.default.createElement("path",{stroke:"#fff",strokeWidth:"2",d:"M0-1h15.582",transform:"matrix(-.69843 .71568 -.69843 -.71568 19.883 9)"})),add:vr.default.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 19 19"},vr.default.createElement("path",{d:"M.875 9A8.625 8.625 0 1 0 9.5.375 8.635 8.635 0 0 0 .875 9Zm3.75-.375a.75.75 0 0 1 .75-.75h2.813a.187.187 0 0 0 .187-.188V4.876a.75.75 0 0 1 .75-.75h.75a.75.75 0 0 1 .75.75v2.813a.188.188 0 0 0 .188.187h2.812a.75.75 0 0 1 .75.75v.75a.75.75 0 0 1-.75.75h-2.813a.188.188 0 0 0-.187.188v2.812a.75.75 0 0 1-.75.75h-.75a.75.75 0 0 1-.75-.75v-2.813a.188.188 0 0 0-.188-.187H5.376a.75.75 0 0 1-.75-.75v-.75Z"})),delete:vr.default.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 18 18"},vr.default.createElement("path",{d:"M14.354 6.748H3.103a.375.375 0 0 0-.375.375V16.5a1.5 1.5 0 0 0 1.5 1.5h9.001a1.5 1.5 0 0 0 1.5-1.5V7.123a.375.375 0 0 0-.375-.375Zm-6.938 8.627a.563.563 0 1 1-1.125 0V9.749a.563.563 0 1 1 1.125 0v5.626Zm3.75 0a.563.563 0 1 1-1.125 0V9.749a.563.563 0 0 1 1.125 0v5.626ZM15.337 1.912l-3.498.675a.188.188 0 0 1-.22-.15l-.178-.92A1.875 1.875 0 0 0 9.244.033l-3.68.714A1.875 1.875 0 0 0 4.08 2.945l.178.92a.187.187 0 0 1-.15.22l-3.498.676a.75.75 0 0 0-.596.878.774.774 0 0 0 .88.595l14.729-2.85a.75.75 0 1 0-.285-1.474v.002Zm-9.788.75a.375.375 0 0 1 .3-.44l3.683-.712a.375.375 0 0 1 .438.3l.179.922a.188.188 0 0 1-.15.22l-4.052.776a.187.187 0 0 1-.22-.15l-.178-.916Z"})),discard:vr.default.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 16 16"},vr.default.createElement("path",{d:"m5 5 4.125 4.125M11 5l-6 6"}),vr.default.createElement("path",{d:"M14.667 0H1.333A1.333 1.333 0 0 0 0 1.333v13.334A1.333 1.333 0 0 0 1.333 16h9.334c.177 0 .346-.07.471-.195l4.667-4.667a.667.667 0 0 0 .195-.471V1.333A1.334 1.334 0 0 0 14.667 0ZM1.333 1.667a.333.333 0 0 1 .334-.334h12.666a.333.333 0 0 1 .334.334V10a.333.333 0 0 1-.334.333h-2.666a1.333 1.333 0 0 0-1.334 1.334v2.666a.333.333 0 0 1-.333.334H1.667a.333.333 0 0 1-.334-.334V1.667Z"})),save:vr.default.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 16 16"},vr.default.createElement("path",{d:"M12.0122 5.20332C12.0936 5.10023 12.154 4.98212 12.1897 4.85572C12.2255 4.72932 12.236 4.59711 12.2207 4.46665C12.2054 4.33618 12.1645 4.21001 12.1004 4.09534C12.0364 3.98067 11.9503 3.87974 11.8472 3.79832C11.7441 3.7169 11.626 3.65658 11.4996 3.62081C11.3732 3.58504 11.241 3.57451 11.1106 3.58984C10.9801 3.60516 10.8539 3.64603 10.7392 3.71011C10.6246 3.77419 10.5236 3.86023 10.4422 3.96332L6.71356 8.68665C6.69905 8.70522 6.68075 8.72048 6.65989 8.73143C6.63902 8.74238 6.61606 8.74876 6.59254 8.75015C6.56902 8.75153 6.54547 8.7479 6.52346 8.73948C6.50145 8.73106 6.48149 8.71805 6.46489 8.70132L5.04823 7.28465C4.85963 7.1025 4.60702 7.0017 4.34483 7.00398C4.08263 7.00626 3.83182 7.11143 3.64641 7.29684C3.461 7.48224 3.35583 7.73306 3.35355 7.99525C3.35128 8.25745 3.45207 8.51005 3.63423 8.69865L5.44823 10.5133C5.61595 10.6772 5.81604 10.8042 6.0357 10.8863C6.25536 10.9684 6.48974 11.0037 6.72383 10.99C6.95792 10.9762 7.18656 10.9137 7.3951 10.8065C7.60365 10.6993 7.7875 10.5497 7.93489 10.3673L12.0122 5.20332Z"}),vr.default.createElement("path",{d:"M14.6667 0H1.33333C0.979711 0 0.640573 0.140476 0.390524 0.390524C0.140476 0.640573 0 0.979711 0 1.33333L0 14.6667C0 15.0203 0.140476 15.3594 0.390524 15.6095C0.640573 15.8595 0.979711 16 1.33333 16H10.6667C10.8435 16 11.013 15.9297 11.138 15.8047L15.8047 11.138C15.9297 11.013 16 10.8435 16 10.6667V1.33333C16 0.979711 15.8595 0.640573 15.6095 0.390524C15.3594 0.140476 15.0203 0 14.6667 0ZM1.33333 1.66667C1.33333 1.57826 1.36845 1.49348 1.43096 1.43096C1.49348 1.36845 1.57826 1.33333 1.66667 1.33333H14.3333C14.4217 1.33333 14.5065 1.36845 14.569 1.43096C14.6315 1.49348 14.6667 1.57826 14.6667 1.66667V10C14.6667 10.0884 14.6315 10.1732 14.569 10.2357C14.5065 10.2982 14.4217 10.3333 14.3333 10.3333H11.6667C11.313 10.3333 10.9739 10.4738 10.7239 10.7239C10.4738 10.9739 10.3333 11.313 10.3333 11.6667V14.3333C10.3333 14.4217 10.2982 14.5065 10.2357 14.569C10.1732 14.6315 10.0884 14.6667 10 14.6667H1.66667C1.57826 14.6667 1.49348 14.6315 1.43096 14.569C1.36845 14.5065 1.33333 14.4217 1.33333 14.3333V1.66667Z"})),caret:vr.default.createElement("svg",{viewBox:"0 0 28 14",fill:"none",xmlns:"http://www.w3.org/2000/svg"},vr.default.createElement("path",{d:"M12.9393 10.0607L14 11.1213L15.0607 10.0607L21.0607 4.06066L23.6213 1.5H20H8H4.37868L6.93934 4.06066L12.9393 10.0607Z",fill:"#00655A",stroke:"white",strokeWidth:"3"})),"export-geojson":vr.default.createElement("svg",{viewBox:"0 0 21 25",fill:"none",xmlns:"http://www.w3.org/2000/svg"},vr.default.createElement("path",{d:"M10.4136 1V16",stroke:"#666666",strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round"}),vr.default.createElement("path",{d:"M5.91357 11.5L10.4136 16L14.9136 11.5",stroke:"#666666",strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round"}),vr.default.createElement("path",{d:"M14.1636 4.74902H16.4116C17.2073 4.74902 17.9703 5.06509 18.5329 5.6277C19.0956 6.19031 19.4116 6.95337 19.4116 7.74902V20.499C19.4116 21.2947 19.0956 22.0577 18.5329 22.6203C17.9703 23.183 17.2073 23.499 16.4116 23.499H4.41162C3.61597 23.499 2.85291 23.183 2.2903 22.6203C1.72769 22.0577 1.41162 21.2947 1.41162 20.499V7.74902C1.41162 6.95337 1.72769 6.19031 2.2903 5.6277C2.85291 5.06509 3.61597 4.74902 4.41162 4.74902H6.66162",stroke:"#666666",strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round"})),"user-roles":vr.default.createElement("svg",{viewBox:"0 0 17 16",fill:"none",xmlns:"http://www.w3.org/2000/svg"},vr.default.createElement("g",{clipPath:"url(#clip0_1491_11619)"},vr.default.createElement("path",{d:"M5.66626 2.74115C6.15948 3.25291 6.75085 3.65994 7.40499 3.9379C8.05913 4.21586 8.76261 4.35905 9.47336 4.35889C10.1932 4.3591 10.9056 4.2125 11.5668 3.92806",stroke:"currentColor",strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round"}),vr.default.createElement("path",{d:"M8.41156 7.54465C10.171 7.54465 11.5973 6.11835 11.5973 4.35892C11.5973 2.59949 10.171 1.17319 8.41156 1.17319C6.65213 1.17319 5.22583 2.59949 5.22583 4.35892C5.22583 6.11835 6.65213 7.54465 8.41156 7.54465Z",stroke:"currentColor",strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round"}),vr.default.createElement("path",{d:"M2.49536 14.8263C2.49536 13.2572 3.11869 11.7524 4.22822 10.6428C5.33776 9.5333 6.8426 8.90997 8.41172 8.90997C9.98084 8.90997 11.4857 9.5333 12.5952 10.6428C13.7048 11.7524 14.3281 13.2572 14.3281 14.8263",stroke:"currentColor",strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round"})),vr.default.createElement("defs",null,vr.default.createElement("clipPath",{id:"clip0_1491_11619"},vr.default.createElement("rect",{width:"16",height:"16",fill:"currentColor",transform:"translate(0.411621 -0.000244141)"})))),filter:vr.default.createElement("svg",{viewBox:"0 0 22 24",fill:"none",xmlns:"http://www.w3.org/2000/svg"},vr.default.createElement("path",{d:"M10.75 9.75C16.1348 9.75 20.5 7.73528 20.5 5.25C20.5 2.76472 16.1348 0.75 10.75 0.75C5.36522 0.75 1 2.76472 1 5.25C1 7.73528 5.36522 9.75 10.75 9.75Z",strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round"}),vr.default.createElement("path",{d:"M1 5.25C1.00123 7.44343 1.74225 9.57232 3.10325 11.2924C4.46425 13.0126 6.36565 14.2233 8.5 14.729V21C8.5 21.5967 8.73705 22.169 9.15901 22.591C9.58097 23.0129 10.1533 23.25 10.75 23.25C11.3467 23.25 11.919 23.0129 12.341 22.591C12.7629 22.169 13 21.5967 13 21V14.729C15.1343 14.2233 17.0358 13.0126 18.3967 11.2924C19.7577 9.57232 20.4988 7.44343 20.5 5.25",strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round"})),"metadata-panel":vr.default.createElement("svg",{viewBox:"0 0 17 18",fill:"none",xmlns:"http://www.w3.org/2000/svg"},vr.default.createElement("g",{clipPath:"url(#clip0_1419_7239)"},vr.default.createElement("path",{d:"M12.2444 13.3538C12.7967 13.3538 13.2444 12.906 13.2444 12.3538C13.2444 11.8015 12.7967 11.3538 12.2444 11.3538C11.6921 11.3538 11.2444 11.8015 11.2444 12.3538C11.2444 12.906 11.6921 13.3538 12.2444 13.3538Z",fill:"currentColor"}),vr.default.createElement("path",{d:"M16.0896 11.4357C16.263 11.2498 16.3723 11.0132 16.4013 10.7606C16.4303 10.508 16.3774 10.2528 16.2506 10.0324C16.1237 9.8121 15.9296 9.63826 15.6966 9.53649C15.4636 9.43471 15.2041 9.41037 14.9562 9.46705L14.0155 9.68438C13.9412 9.70131 13.8631 9.6894 13.7972 9.65104C13.7312 9.61268 13.6823 9.55074 13.6602 9.47771L13.3775 8.54905C13.3044 8.30537 13.1546 8.09176 12.9505 7.93991C12.7463 7.78806 12.4986 7.70605 12.2442 7.70605C11.9898 7.70605 11.7421 7.78806 11.538 7.93991C11.3338 8.09176 11.1841 8.30537 11.1109 8.54905L10.8282 9.47771C10.806 9.55065 10.757 9.6125 10.6911 9.65083C10.6252 9.68916 10.5473 9.70115 10.4729 9.68438L9.53288 9.46638C9.28515 9.40991 9.02585 9.43436 8.79304 9.53613C8.56023 9.6379 8.36617 9.81162 8.23938 10.0318C8.11258 10.252 8.05971 10.507 8.08854 10.7595C8.11737 11.0119 8.22637 11.2485 8.39955 11.4344L9.05822 12.145C9.11026 12.2019 9.13913 12.2763 9.13913 12.3534C9.13913 12.4305 9.11026 12.5048 9.05822 12.5617L8.39955 13.271C8.22608 13.4569 8.11682 13.6936 8.08783 13.9461C8.05884 14.1987 8.11165 14.454 8.2385 14.6743C8.36535 14.8947 8.55955 15.0685 8.79254 15.1703C9.02553 15.272 9.28503 15.2964 9.53288 15.2397L10.4735 15.0224C10.548 15.0058 10.626 15.018 10.6919 15.0564C10.7577 15.0948 10.8067 15.1567 10.8289 15.2297L11.1115 16.157C11.1843 16.4011 11.334 16.6151 11.5382 16.7673C11.7423 16.9195 11.9902 17.0017 12.2449 17.0017C12.4996 17.0017 12.7474 16.9195 12.9516 16.7673C13.1558 16.6151 13.3054 16.4011 13.3782 16.157L13.6609 15.229C13.6827 15.1558 13.7315 15.0936 13.7975 15.0551C13.8635 15.0166 13.9417 15.0046 14.0162 15.0217L14.9569 15.239C15.2046 15.2955 15.4639 15.2711 15.6967 15.1693C15.9295 15.0675 16.1236 14.8938 16.2504 14.6736C16.3772 14.4534 16.4301 14.1984 16.4012 13.946C16.3724 13.6935 16.2634 13.457 16.0902 13.271L15.4316 12.561C15.3795 12.5041 15.3506 12.4298 15.3506 12.3527C15.3506 12.2756 15.3795 12.2013 15.4316 12.1444L16.0896 11.4357ZM12.2442 14.3537C11.8487 14.3537 11.462 14.2364 11.1331 14.0167C10.8042 13.7969 10.5478 13.4845 10.3965 13.1191C10.2451 12.7536 10.2055 12.3515 10.2826 11.9635C10.3598 11.5756 10.5503 11.2192 10.83 10.9395C11.1097 10.6598 11.4661 10.4693 11.854 10.3921C12.242 10.315 12.6441 10.3546 13.0096 10.506C13.375 10.6573 13.6874 10.9137 13.9072 11.2426C14.1269 11.5715 14.2442 11.9581 14.2442 12.3537C14.2442 12.8841 14.0335 13.3929 13.6584 13.7679C13.2834 14.143 12.7746 14.3537 12.2442 14.3537Z",fill:"currentColor"}),vr.default.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M7.09017 13.782C7.0974 13.8043 7.09994 13.8278 7.09762 13.8511C7.06412 14.1643 7.09939 14.481 7.20095 14.7791C7.2097 14.8042 7.2123 14.831 7.20855 14.8572C7.20479 14.8835 7.19479 14.9085 7.17938 14.9301C7.16396 14.9517 7.14359 14.9693 7.11997 14.9815C7.09635 14.9936 7.07017 14.9999 7.04362 14.9998H2.41162C1.88119 14.9998 1.37248 14.789 0.997407 14.414C0.622335 14.0389 0.411621 13.5302 0.411621 12.9998V3.99976C0.411621 3.46932 0.622335 2.96062 0.997407 2.58554C1.37248 2.21047 1.88119 1.99976 2.41162 1.99976H11.745C12.2754 1.99976 12.7841 2.21047 13.1592 2.58554C13.5342 2.96062 13.745 3.46932 13.745 3.99976V6.95976C13.745 6.99007 13.7368 7.01983 13.7212 7.0458C13.7056 7.07177 13.6831 7.09297 13.6563 7.10709C13.6293 7.12109 13.599 7.12756 13.5686 7.1258C13.5382 7.12404 13.5088 7.11412 13.4836 7.09709C13.4779 7.09315 13.4721 7.08924 13.4664 7.08536C13.1685 6.74277 12.7022 6.52222 12.178 6.52222C11.6135 6.52222 11.1161 6.77796 10.824 7.16642H9.74495C9.70075 7.16642 9.65836 7.18398 9.6271 7.21524C9.59585 7.24649 9.57829 7.28889 9.57829 7.33309V8.28442C9.57831 8.30728 9.57364 8.32989 9.56458 8.35087C9.55553 8.37186 9.54226 8.39076 9.52562 8.40642C9.50904 8.42206 9.48941 8.4341 9.46795 8.44178C9.4465 8.44947 9.42369 8.45264 9.40095 8.45109C9.19328 8.43777 8.98476 8.45393 8.78162 8.49909C8.75723 8.50469 8.73189 8.50466 8.70751 8.499C8.68314 8.49334 8.66038 8.4822 8.64095 8.46642C8.62099 8.45049 8.60495 8.43018 8.59409 8.40706C8.58322 8.38394 8.57782 8.35863 8.57829 8.33309V7.33309C8.57829 7.28889 8.56073 7.24649 8.52947 7.21524C8.49822 7.18398 8.45582 7.16642 8.41162 7.16642H5.74495C5.70075 7.16642 5.65836 7.18398 5.6271 7.21524C5.59585 7.24649 5.57829 7.28889 5.57829 7.33309V9.66842C5.57829 9.71263 5.59585 9.75502 5.6271 9.78627C5.65836 9.81753 5.70075 9.83509 5.74495 9.83509H6.99562C7.02151 9.83498 7.04707 9.84096 7.07023 9.85254C7.09339 9.86412 7.1135 9.88098 7.12895 9.90176C7.1445 9.92219 7.15511 9.94593 7.15997 9.97114C7.16483 9.99635 7.1638 10.0223 7.15695 10.0471C7.10109 10.2487 7.07459 10.4573 7.07829 10.6664C7.07847 10.7102 7.06133 10.7523 7.03061 10.7835C6.99989 10.8147 6.95808 10.8326 6.91429 10.8331H5.74495C5.70075 10.8331 5.65836 10.8506 5.6271 10.8819C5.59585 10.9132 5.57829 10.9556 5.57829 10.9998V13.4998C5.57829 13.544 5.59585 13.5864 5.6271 13.6176C5.65836 13.6489 5.70075 13.6664 5.74495 13.6664H6.93162C6.95502 13.6664 6.97815 13.6714 6.99951 13.6809C7.02088 13.6904 7.03999 13.7043 7.05562 13.7218C7.07118 13.7392 7.08294 13.7598 7.09017 13.782ZM4.52881 9.78427C4.56006 9.75302 4.57762 9.71063 4.57762 9.66642L4.57829 7.33309C4.57829 7.28889 4.56073 7.24649 4.52947 7.21524C4.49822 7.18398 4.45582 7.16642 4.41162 7.16642H1.91162C1.86742 7.16642 1.82503 7.18398 1.79377 7.21524C1.76251 7.24649 1.74495 7.28889 1.74495 7.33309V9.66642C1.74495 9.71051 1.76242 9.7528 1.79353 9.78404C1.82465 9.81528 1.86687 9.83291 1.91095 9.83309H4.41095C4.45516 9.83309 4.49755 9.81553 4.52881 9.78427ZM5.68097 6.15393C5.70127 6.16226 5.72301 6.16651 5.74495 6.16642H8.41162C8.45582 6.16642 8.49822 6.14886 8.52947 6.11761C8.56073 6.08635 8.57829 6.04396 8.57829 5.99976V3.49976C8.57829 3.45555 8.56073 3.41316 8.52947 3.3819C8.49822 3.35065 8.45582 3.33309 8.41162 3.33309H5.74495C5.72301 3.333 5.70127 3.33725 5.68097 3.34558C5.66067 3.35392 5.64222 3.36618 5.62667 3.38167C5.61112 3.39715 5.59879 3.41556 5.59037 3.43582C5.58195 3.45609 5.57762 3.47781 5.57762 3.49976V5.99976C5.57762 6.0217 5.58195 6.04343 5.59037 6.06369C5.59879 6.08396 5.61112 6.10236 5.62667 6.11784C5.64222 6.13333 5.66067 6.14559 5.68097 6.15393ZM12.2164 3.52835C12.0913 3.40333 11.9218 3.33309 11.745 3.33309H9.74495C9.70075 3.33309 9.65836 3.35065 9.6271 3.3819C9.59585 3.41316 9.57829 3.45555 9.57829 3.49976V5.99976C9.57829 6.04396 9.59585 6.08635 9.6271 6.11761C9.65836 6.14886 9.70075 6.16642 9.74495 6.16642H12.245C12.2892 6.16642 12.3315 6.14886 12.3628 6.11761C12.3941 6.08635 12.4116 6.04396 12.4116 5.99976V3.99976C12.4116 3.82294 12.3414 3.65338 12.2164 3.52835ZM4.41162 3.33309H2.41162C2.23481 3.33309 2.06524 3.40333 1.94022 3.52835C1.81519 3.65338 1.74495 3.82294 1.74495 3.99976V5.99976C1.74495 6.04384 1.76242 6.08613 1.79353 6.11737C1.82465 6.14861 1.86687 6.16625 1.91095 6.16642H4.41162C4.45582 6.16642 4.49822 6.14886 4.52947 6.11761C4.56073 6.08635 4.57829 6.04396 4.57829 5.99976V3.49976C4.57829 3.45555 4.56073 3.41316 4.52947 3.3819C4.49822 3.35065 4.45582 3.33309 4.41162 3.33309ZM1.74495 10.9998V12.9998C1.74495 13.1766 1.81519 13.3461 1.94022 13.4712C2.06524 13.5962 2.23481 13.6664 2.41162 13.6664H4.41162C4.45582 13.6664 4.49822 13.6489 4.52947 13.6176C4.56073 13.5864 4.57829 13.544 4.57829 13.4998V10.9998C4.57829 10.9556 4.56073 10.9132 4.52947 10.8819C4.49822 10.8506 4.45582 10.8331 4.41162 10.8331H1.91162C1.86742 10.8331 1.82503 10.8506 1.79377 10.8819C1.76251 10.9132 1.74495 10.9556 1.74495 10.9998Z",fill:"currentColor"})),vr.default.createElement("defs",null,vr.default.createElement("clipPath",{id:"clip0_1419_7239"},vr.default.createElement("rect",{width:"16",height:"18",fill:"currentColor",transform:"translate(0.411621 -0.000244141)"})))),clock:vr.default.createElement("svg",{viewBox:"0 0 18 15",fill:"none",xmlns:"http://www.w3.org/2000/svg"},vr.default.createElement("path",{d:"M5.71093 8.93449L3.56128 6.79363L1.41162 8.93449M3.42462 7.6044C3.46047 9.22172 4.09697 10.7684 5.21112 11.9456C6.32527 13.1228 7.838 13.847 9.45702 13.9782C11.076 14.1094 12.6864 13.6383 13.977 12.656C15.2676 11.6736 16.1468 10.2498 16.4447 8.6595C16.7427 7.06923 16.4382 5.42542 15.5901 4.04569C14.742 2.66597 13.4105 1.64826 11.8529 1.18921C10.2953 0.730155 8.62218 0.862343 7.15674 1.56023",strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round",stroke:"currentColor"}),vr.default.createElement("path",{d:"M9.04295 8.08988L10.7639 5.10907",strokeWidth:"1.5",strokeLinecap:"round",stroke:"currentColor"}),vr.default.createElement("path",{d:"M9.04288 8.0901L12.0237 9.81107",strokeWidth:"1.5",strokeLinecap:"round",stroke:"currentColor"})),"image-placeholder":vr.default.createElement("svg",{viewBox:"0 0 66 66",fill:"none",xmlns:"http://www.w3.org/2000/svg"},vr.default.createElement("path",{d:"M59.7357 1.99231H14.2691C11.9863 1.99231 10.1357 3.84287 10.1357 6.12564V51.5923C10.1357 53.8751 11.9863 55.7256 14.2691 55.7256H59.7357C62.0185 55.7256 63.8691 53.8751 63.8691 51.5923V6.12564C63.8691 3.84287 62.0185 1.99231 59.7357 1.99231Z",stroke:"#cccccc",strokeWidth:"3",strokeLinecap:"round",strokeLinejoin:"round"}),vr.default.createElement("path",{d:"M55.6025 63.9924H6.00247C4.90625 63.9924 3.85492 63.5569 3.07977 62.7817C2.30462 62.0066 1.86914 60.9553 1.86914 59.859V10.259",stroke:"#cccccc",strokeWidth:"3",strokeLinecap:"round",strokeLinejoin:"round"}),vr.default.createElement("path",{d:"M23.5662 18.5256C23.362 18.5262 23.1625 18.5872 22.9929 18.7011C22.8233 18.815 22.6913 18.9766 22.6135 19.1654C22.5357 19.3543 22.5157 19.562 22.5558 19.7622C22.596 19.9625 22.6947 20.1464 22.8393 20.2906C22.9839 20.4349 23.168 20.533 23.3684 20.5726C23.5688 20.6123 23.7764 20.5917 23.965 20.5134C24.1537 20.4351 24.3149 20.3026 24.4284 20.1328C24.5418 19.9629 24.6023 19.7632 24.6023 19.559C24.6023 19.2849 24.4934 19.0221 24.2997 18.8283C24.1059 18.6345 23.843 18.5256 23.569 18.5256",stroke:"#cccccc",strokeWidth:"3",strokeLinecap:"round",strokeLinejoin:"round"}),vr.default.createElement("path",{d:"M55.6022 43.3257L44.9382 27.2443C44.7512 26.9648 44.4986 26.7353 44.2026 26.5757C43.9066 26.4161 43.5761 26.3313 43.2398 26.3286C42.9036 26.3258 42.5717 26.4053 42.2732 26.5601C41.9746 26.7149 41.7184 26.9403 41.5269 27.2167L36.0295 35.07L32.6209 32.3448C32.3972 32.1661 32.1387 32.0359 31.862 31.9624C31.5853 31.8889 31.2963 31.8736 31.0134 31.9177C30.7305 31.9617 30.4598 32.0641 30.2186 32.2182C29.9773 32.3724 29.7707 32.575 29.6118 32.8132L22.5962 43.3257H55.6022Z",stroke:"#cccccc",strokeWidth:"3",strokeLinecap:"round",strokeLinejoin:"round"})),[Bu.POINT]:vr.default.createElement("svg",{viewBox:"0 0 10 13",fill:"none",xmlns:"http://www.w3.org/2000/svg"},vr.default.createElement("path",{d:"M5 0C3.67439 0.001577 2.40351 0.54425 1.46616 1.50897C0.528809 2.47369 0.00153226 3.78169 0 5.14601C0 8.69242 3.44105 11.9106 4.49526 12.8125C4.637 12.9337 4.81547 13 4.99974 13C5.18401 13 5.36247 12.9337 5.50421 12.8125C6.55684 11.9106 10 8.69134 10 5.14547C9.99833 3.78124 9.47099 2.47339 8.53366 1.50878C7.59632 0.544176 6.32552 0.00157672 5 0ZM5 7.85443C4.47952 7.85443 3.97073 7.69559 3.53797 7.39798C3.10521 7.10037 2.76792 6.67738 2.56874 6.18248C2.36956 5.68758 2.31745 5.143 2.41899 4.61762C2.52053 4.09224 2.77116 3.60964 3.13919 3.23086C3.50723 2.85208 3.97613 2.59413 4.4866 2.48962C4.99708 2.38512 5.5262 2.43875 6.00706 2.64375C6.48792 2.84874 6.89892 3.19589 7.18808 3.64129C7.47724 4.08669 7.63158 4.61033 7.63158 5.14601C7.63158 5.50168 7.56351 5.85388 7.43126 6.18248C7.29901 6.51108 7.10517 6.80965 6.86081 7.06115C6.61644 7.31265 6.32634 7.51216 6.00706 7.64827C5.68778 7.78438 5.34558 7.85443 5 7.85443Z",fill:"#999999"})),[Bu.LINE_STRING]:vr.default.createElement("svg",{viewBox:"0 0 12 12",fill:"none",xmlns:"http://www.w3.org/2000/svg"},vr.default.createElement("path",{d:"M10 2L2 10",stroke:"#999999",strokeWidth:"1.5"}),vr.default.createElement("circle",{cx:"2",cy:"10",r:"2",fill:"#999999"}),vr.default.createElement("circle",{cx:"10",cy:"2",r:"2",fill:"#999999"})),[Bu.POLYGON]:vr.default.createElement("svg",{viewBox:"0 0 13 14",fill:"none",xmlns:"http://www.w3.org/2000/svg"},vr.default.createElement("path",{d:"M1.50439 12.282L4.13685 5.51279L10.53 2.50427L9.77783 7.39312L9.0257 11.5298L1.50439 12.282Z",stroke:"#999999",strokeWidth:"1.5"}),vr.default.createElement("circle",{cx:"11",cy:"2",r:"2",fill:"#999999"}),vr.default.createElement("circle",{cx:"9",cy:"11",r:"2",fill:"#999999"}),vr.default.createElement("path",{d:"M4 12C4 13.1046 3.10457 14 2 14C0.89543 14 0 13.1046 0 12C0 10.8954 0.89543 10 2 10C3.10457 10 4 10.8954 4 12Z",fill:"#999999"}),vr.default.createElement("path",{d:"M6 5C6 6.10457 5.10457 7 4 7C2.89543 7 2 6.10457 2 5C2 3.89543 2.89543 3 4 3C5.10457 3 6 3.89543 6 5Z",fill:"#999999"}))},LQe=({name:e})=>{var t;return(t=eNr[e])!=null?t:""};LQe.propTypes={name:NQe.default.string.isRequired};var kQe=LQe;var Fr=kQe;var RQe=({isOpen:e,onClose:t,modalClassName:r,renderContent:n,renderFooter:o,title:i})=>S0.default.createElement(xae,{className:"vkf-modal",onHide:t,show:e,dialogClassName:r},S0.default.createElement(DP,null,S0.default.createElement(NP,null,i),S0.default.createElement(rn,{className:"close-button",onClick:t},S0.default.createElement(Fr,{name:"close"}))),S0.default.createElement(AP,null,n()),o!==void 0&&S0.default.createElement(PP,null,o()));RQe.propTypes={isOpen:gb.default.bool,onClose:gb.default.func,modalClassName:gb.default.string,renderContent:gb.default.func,renderFooter:gb.default.func,title:gb.default.string};var jQe=RQe;var Dc=jQe;u();var bb=Q(De(),1);u();var Ip=Q(De(),1);u();var Bae=Q(De(),1);var pT=en({key:"selectableWmsLayersAtom",default:[]}),qQe=vs({key:"hasWmsSelectableLayersAtom",get:({get:e})=>e(pT).length>0}),oF=en({key:"isParsingWmsCapabilitiesAtom",default:!1}),iF=()=>{let e=Ir(pT);return(0,Bae.useCallback)(()=>{e([])},[])},zQe=()=>{let e=Ir(Rs);return(0,Bae.useCallback)(r=>{e({id:"add-custom-wms",type:"danger",text:r})},[])};var Tet=Q(De(),1);u();var pF=Q(De(),1),Cn=Q(De(),1);var HP=e=>e.type==="checkbox",vb=e=>e instanceof Date,Wu=e=>e==null,ZQe=e=>typeof e=="object",Ja=e=>!Wu(e)&&!Array.isArray(e)&&ZQe(e)&&!vb(e),KQe=e=>Ja(e)&&e.target?HP(e.target)?e.target.checked:e.target.value:e,tNr=e=>e.substring(0,e.search(/\.\d+(\.|$)/))||e,XQe=(e,t)=>e.has(tNr(t)),rNr=e=>{let t=e.constructor&&e.constructor.prototype;return Ja(t)&&t.hasOwnProperty("isPrototypeOf")},tse=typeof window!="undefined"&&typeof window.HTMLElement!="undefined"&&typeof document!="undefined";function Ea(e){let t,r=Array.isArray(e),n=typeof FileList!="undefined"?e instanceof FileList:!1;if(e instanceof Date)t=new Date(e);else if(e instanceof Set)t=new Set(e);else if(!(tse&&(e instanceof Blob||n))&&(r||Ja(e))){if(t=r?[]:{},!r&&!rNr(e))t=e;else for(let o in e)e.hasOwnProperty(o)&&(t[o]=Ea(e[o]));}else return e;return t}var WP=e=>Array.isArray(e)?e.filter(Boolean):[],na=e=>e===void 0,gr=(e,t,r)=>{if(!t||!Ja(e))return r;let n=WP(t.split(/[,[\].]+?/)).reduce((o,i)=>Wu(o)?o:o[i],e);return na(n)||n===e?na(e[t])?r:e[t]:n},Tp=e=>typeof e=="boolean",rse=e=>/^\w*$/.test(e),JQe=e=>WP(e.replace(/["|']|\]/g,"").split(/\.|\[/)),mi=(e,t,r)=>{let n=-1,o=rse(t)?[t]:JQe(t),i=o.length,a=i-1;for(;++n<i;){let c=o[n],h=r;if(n!==a){let m=e[c];h=Ja(m)||Array.isArray(m)?m:isNaN(+o[n+1])?{}:[]}if(c==="__proto__"||c==="constructor"||c==="prototype")return;e[c]=h,e=e[c]}},sF={BLUR:"blur",FOCUS_OUT:"focusout",CHANGE:"change"},Mf={onBlur:"onBlur",onChange:"onChange",onSubmit:"onSubmit",onTouched:"onTouched",all:"all"},$g={max:"max",min:"min",maxLength:"maxLength",minLength:"minLength",pattern:"pattern",required:"required",validate:"validate"},QQe=Cn.default.createContext(null),mT=()=>Cn.default.useContext(QQe),M0=e=>{let n=e,{children:t}=n,r=En(n,["children"]);return Cn.default.createElement(QQe.Provider,{value:r},t)},eet=(e,t,r,n=!0)=>{let o={defaultValues:t._defaultValues};for(let i in e)Object.defineProperty(o,i,{get:()=>{let a=i;return t._proxyFormState[a]!==Mf.all&&(t._proxyFormState[a]=!n||Mf.all),r&&(r[a]=!0),e[a]}});return o},nse=typeof window!="undefined"?pF.useLayoutEffect:pF.useEffect;function nNr(e){let t=mT(),{control:r=t.control,disabled:n,name:o,exact:i}=e||{},[a,c]=Cn.default.useState(r._formState),h=Cn.default.useRef({isDirty:!1,isLoading:!1,dirtyFields:!1,touchedFields:!1,validatingFields:!1,isValidating:!1,isValid:!1,errors:!1});return nse(()=>r._subscribe({name:o,formState:h.current,exact:i,callback:m=>{!n&&c(Se(Se({},r._formState),m))}}),[o,n,i]),Cn.default.useEffect(()=>{h.current.isValid&&r._setValid(!0)},[r]),Cn.default.useMemo(()=>eet(a,r,h.current,!1),[a,r])}var om=e=>typeof e=="string",tet=(e,t,r,n,o)=>om(e)?(n&&t.watch.add(e),gr(r,e,o)):Array.isArray(e)?e.map(i=>(n&&t.watch.add(i),gr(r,i))):(n&&(t.watchAll=!0),r);function oNr(e){let t=mT(),{control:r=t.control,name:n,defaultValue:o,disabled:i,exact:a}=e||{},c=Cn.default.useRef(o),[h,m]=Cn.default.useState(r._getWatch(n,c.current));return nse(()=>r._subscribe({name:n,formState:{values:!0},exact:a,callback:y=>!i&&m(tet(n,r._names,y.values||r._formValues,!1,c.current))}),[n,r,i,a]),Cn.default.useEffect(()=>r._removeUnmounted()),h}function iNr(e){let t=mT(),{name:r,disabled:n,control:o=t.control,shouldUnregister:i}=e,a=XQe(o._names.array,r),c=oNr({control:o,name:r,defaultValue:gr(o._formValues,r,gr(o._defaultValues,r,e.defaultValue)),exact:!0}),h=nNr({control:o,name:r,exact:!0}),m=Cn.default.useRef(e),y=Cn.default.useRef(o.register(r,Se(Pt(Se({},e.rules),{value:c}),Tp(e.disabled)?{disabled:e.disabled}:{}))),w=Cn.default.useMemo(()=>Object.defineProperties({},{invalid:{enumerable:!0,get:()=>!!gr(h.errors,r)},isDirty:{enumerable:!0,get:()=>!!gr(h.dirtyFields,r)},isTouched:{enumerable:!0,get:()=>!!gr(h.touchedFields,r)},isValidating:{enumerable:!0,get:()=>!!gr(h.validatingFields,r)},error:{enumerable:!0,get:()=>gr(h.errors,r)}}),[h,r]),E=Cn.default.useCallback(D=>y.current.onChange({target:{value:KQe(D),name:r},type:sF.CHANGE}),[r]),A=Cn.default.useCallback(()=>y.current.onBlur({target:{value:gr(o._formValues,r),name:r},type:sF.BLUR}),[r,o._formValues]),P=Cn.default.useCallback(D=>{let k=gr(o._fields,r);k&&D&&(k._f.ref={focus:()=>D.focus(),select:()=>D.select(),setCustomValidity:z=>D.setCustomValidity(z),reportValidity:()=>D.reportValidity()})},[o._fields,r]),j=Cn.default.useMemo(()=>Pt(Se({name:r,value:c},Tp(n)||h.disabled?{disabled:h.disabled||n}:{}),{onChange:E,onBlur:A,ref:P}),[r,n,h.disabled,E,A,P,c]);return Cn.default.useEffect(()=>{let D=o._options.shouldUnregister||i;o.register(r,Se(Se({},m.current.rules),Tp(m.current.disabled)?{disabled:m.current.disabled}:{}));let k=(z,V)=>{let G=gr(o._fields,z);G&&G._f&&(G._f.mount=V)};if(k(r,!0),D){let z=Ea(gr(o._options.defaultValues,r));mi(o._defaultValues,r,z),na(gr(o._formValues,r))&&mi(o._formValues,r,z)}return!a&&o.register(r),()=>{(a?D&&!o._state.action:D)?o.unregister(r):k(r,!1)}},[r,o,a,i]),Cn.default.useEffect(()=>{o._setDisabledField({disabled:n,name:r})},[n,r,o]),Cn.default.useMemo(()=>({field:j,formState:h,fieldState:w}),[j,h,w])}var gT=e=>e.render(iNr(e));var aNr=(e,t,r,n,o)=>t?Pt(Se({},r[e]),{types:Pt(Se({},r[e]&&r[e].types?r[e].types:{}),{[n]:o||!0})}):{},Nc=e=>Array.isArray(e)?e:[e],FQe=()=>{let e=[];return{get observers(){return e},next:o=>{for(let i of e)i.next&&i.next(o)},subscribe:o=>(e.push(o),{unsubscribe:()=>{e=e.filter(i=>i!==o)}}),unsubscribe:()=>{e=[]}}},Jae=e=>Wu(e)||!ZQe(e);function I0(e,t){if(Jae(e)||Jae(t))return e===t;if(vb(e)&&vb(t))return e.getTime()===t.getTime();let r=Object.keys(e),n=Object.keys(t);if(r.length!==n.length)return!1;for(let o of r){let i=e[o];if(!n.includes(o))return!1;if(o!=="ref"){let a=t[o];if(vb(i)&&vb(a)||Ja(i)&&Ja(a)||Array.isArray(i)&&Array.isArray(a)?!I0(i,a):i!==a)return!1}}return!0}var du=e=>Ja(e)&&!Object.keys(e).length,ose=e=>e.type==="file",Bd=e=>typeof e=="function",lF=e=>{if(!tse)return!1;let t=e?e.ownerDocument:0;return e instanceof(t&&t.defaultView?t.defaultView.HTMLElement:HTMLElement)},ret=e=>e.type==="select-multiple",ise=e=>e.type==="radio",sNr=e=>ise(e)||HP(e),Vae=e=>lF(e)&&e.isConnected;function lNr(e,t){let r=t.slice(0,-1).length,n=0;for(;n<r;)e=na(e)?n++:e[t[n++]];return e}function uNr(e){for(let t in e)if(e.hasOwnProperty(t)&&!na(e[t]))return!1;return!0}function ws(e,t){let r=Array.isArray(t)?t:rse(t)?[t]:JQe(t),n=r.length===1?e:lNr(e,r),o=r.length-1,i=r[o];return n&&delete n[i],o!==0&&(Ja(n)&&du(n)||Array.isArray(n)&&uNr(n))&&ws(e,r.slice(0,-1)),e}var net=e=>{for(let t in e)if(Bd(e[t]))return!0;return!1};function uF(e,t={}){let r=Array.isArray(e);if(Ja(e)||r)for(let n in e)Array.isArray(e[n])||Ja(e[n])&&!net(e[n])?(t[n]=Array.isArray(e[n])?[]:{},uF(e[n],t[n])):Wu(e[n])||(t[n]=!0);return t}function oet(e,t,r){let n=Array.isArray(e);if(Ja(e)||n)for(let o in e)Array.isArray(e[o])||Ja(e[o])&&!net(e[o])?na(t)||Jae(r[o])?r[o]=Array.isArray(e[o])?uF(e[o],[]):Se({},uF(e[o])):oet(e[o],Wu(t)?{}:t[o],r[o]):r[o]=!I0(e[o],t[o]);return r}var VP=(e,t)=>oet(e,t,uF(t)),UQe={value:!1,isValid:!1},BQe={value:!0,isValid:!0},iet=e=>{if(Array.isArray(e)){if(e.length>1){let t=e.filter(r=>r&&r.checked&&!r.disabled).map(r=>r.value);return{value:t,isValid:!!t.length}}return e[0].checked&&!e[0].disabled?e[0].attributes&&!na(e[0].attributes.value)?na(e[0].value)||e[0].value===""?BQe:{value:e[0].value,isValid:!0}:BQe:UQe}return UQe},aet=(e,{valueAsNumber:t,valueAsDate:r,setValueAs:n})=>na(e)?e:t?e===""?NaN:e&&+e:r&&om(e)?new Date(e):n?n(e):e,VQe={isValid:!1,value:null},set=e=>Array.isArray(e)?e.reduce((t,r)=>r&&r.checked&&!r.disabled?{isValid:!0,value:r.value}:t,VQe):VQe;function GQe(e){let t=e.ref;return ose(t)?t.files:ise(t)?set(e.refs).value:ret(t)?[...t.selectedOptions].map(({value:r})=>r):HP(t)?iet(e.refs).value:aet(na(t.value)?e.ref.value:t.value,e)}var cNr=(e,t,r,n)=>{let o={};for(let i of e){let a=gr(t,i);a&&mi(o,i,a._f)}return{criteriaMode:r,names:[...e],fields:o,shouldUseNativeValidation:n}},cF=e=>e instanceof RegExp,GP=e=>na(e)?e:cF(e)?e.source:Ja(e)?cF(e.value)?e.value.source:e.value:e,dT=e=>({isOnSubmit:!e||e===Mf.onSubmit,isOnBlur:e===Mf.onBlur,isOnChange:e===Mf.onChange,isOnAll:e===Mf.all,isOnTouch:e===Mf.onTouched}),HQe="AsyncFunction",pNr=e=>!!e&&!!e.validate&&!!(Bd(e.validate)&&e.validate.constructor.name===HQe||Ja(e.validate)&&Object.values(e.validate).find(t=>t.constructor.name===HQe)),fNr=e=>e.mount&&(e.required||e.min||e.max||e.maxLength||e.minLength||e.pattern||e.validate),Qae=(e,t,r)=>!r&&(t.watchAll||t.watch.has(e)||[...t.watch].some(n=>e.startsWith(n)&&/^\.\w+/.test(e.slice(n.length)))),hT=(e,t,r,n)=>{for(let i of r||Object.keys(e)){let a=gr(e,i);if(a){let o=a,{_f:c}=o,h=En(o,["_f"]);if(c){if(c.refs&&c.refs[0]&&t(c.refs[0],i)&&!n)return!0;if(c.ref&&t(c.ref,c.name)&&!n)return!0;if(hT(h,t))break}else if(Ja(h)&&hT(h,t))break}}};function WQe(e,t,r){let n=gr(e,r);if(n||rse(r))return{error:n,name:r};let o=r.split(".");for(;o.length;){let i=o.join("."),a=gr(t,i),c=gr(e,i);if(a&&!Array.isArray(a)&&r!==i)return{name:r};if(c&&c.type)return{name:i,error:c};o.pop()}return{name:r}}var dNr=(e,t,r,n)=>{r(e);let a=e,{name:o}=a,i=En(a,["name"]);return du(i)||Object.keys(i).length>=Object.keys(t).length||Object.keys(i).find(c=>t[c]===(!n||Mf.all))},hNr=(e,t,r)=>!e||!t||e===t||Nc(e).some(n=>n&&(r?n===t:n.startsWith(t)||t.startsWith(n))),mNr=(e,t,r,n,o)=>o.isOnAll?!1:!r&&o.isOnTouch?!(t||e):(r?n.isOnBlur:o.isOnBlur)?!e:(r?n.isOnChange:o.isOnChange)?e:!0,gNr=(e,t)=>!WP(gr(e,t)).length&&ws(e,t),uet=(e,t,r)=>{let n=Nc(gr(e,r));return mi(n,"root",t[r]),mi(e,r,n),e},aF=e=>om(e);function $Qe(e,t,r="validate"){if(aF(e)||Array.isArray(e)&&e.every(aF)||Tp(e)&&!e)return{type:r,message:aF(e)?e:"",ref:t}}var fT=e=>Ja(e)&&!cF(e)?e:{value:e,message:""},ese=(e,t,r,n,o,i)=>vt(null,null,function*(){let{ref:a,refs:c,required:h,maxLength:m,minLength:y,min:w,max:E,pattern:A,validate:P,name:j,valueAsNumber:D,mount:k}=e._f,z=gr(r,j);if(!k||t.has(j))return{};let V=c?c[0]:a,G=_e=>{o&&V.reportValidity&&(V.setCustomValidity(Tp(_e)?"":_e||""),V.reportValidity())},K={},Z=ise(a),te=HP(a),se=Z||te,le=(D||ose(a))&&na(a.value)&&na(z)||lF(a)&&a.value===""||z===""||Array.isArray(z)&&!z.length,pe=aNr.bind(null,j,n,K),me=(_e,de,Ce,Ye=$g.maxLength,rt=$g.minLength)=>{let ct=_e?de:Ce;K[j]=Se({type:_e?Ye:rt,message:ct,ref:a},pe(_e?Ye:rt,ct))};if(i?!Array.isArray(z)||!z.length:h&&(!se&&(le||Wu(z))||Tp(z)&&!z||te&&!iet(c).isValid||Z&&!set(c).isValid)){let{value:_e,message:de}=aF(h)?{value:!!h,message:h}:fT(h);if(_e&&(K[j]=Se({type:$g.required,message:de,ref:V},pe($g.required,de)),!n))return G(de),K}if(!le&&(!Wu(w)||!Wu(E))){let _e,de,Ce=fT(E),Ye=fT(w);if(!Wu(z)&&!isNaN(z)){let rt=a.valueAsNumber||z&&+z;Wu(Ce.value)||(_e=rt>Ce.value),Wu(Ye.value)||(de=rt<Ye.value)}else{let rt=a.valueAsDate||new Date(z),ct=bt=>new Date(new Date().toDateString()+" "+bt),qe=a.type=="time",lt=a.type=="week";om(Ce.value)&&z&&(_e=qe?ct(z)>ct(Ce.value):lt?z>Ce.value:rt>new Date(Ce.value)),om(Ye.value)&&z&&(de=qe?ct(z)<ct(Ye.value):lt?z<Ye.value:rt<new Date(Ye.value))}if((_e||de)&&(me(!!_e,Ce.message,Ye.message,$g.max,$g.min),!n))return G(K[j].message),K}if((m||y)&&!le&&(om(z)||i&&Array.isArray(z))){let _e=fT(m),de=fT(y),Ce=!Wu(_e.value)&&z.length>+_e.value,Ye=!Wu(de.value)&&z.length<+de.value;if((Ce||Ye)&&(me(Ce,_e.message,de.message),!n))return G(K[j].message),K}if(A&&!le&&om(z)){let{value:_e,message:de}=fT(A);if(cF(_e)&&!z.match(_e)&&(K[j]=Se({type:$g.pattern,message:de,ref:a},pe($g.pattern,de)),!n))return G(de),K}if(P){if(Bd(P)){let _e=yield P(z,r),de=$Qe(_e,V);if(de&&(K[j]=Se(Se({},de),pe($g.validate,de.message)),!n))return G(de.message),K}else if(Ja(P)){let _e={};for(let de in P){if(!du(_e)&&!n)break;let Ce=$Qe(yield P[de](z,r),V,de);Ce&&(_e=Se(Se({},Ce),pe(de,Ce.message)),G(Ce.message),n&&(K[j]=_e))}if(!du(_e)&&(K[j]=Se({ref:V},_e),!n))return K}}return G(!0),K}),vNr={mode:Mf.onSubmit,reValidateMode:Mf.onChange,shouldFocusError:!0};function yNr(e={}){let t=Se(Se({},vNr),e),r={submitCount:0,isDirty:!1,isReady:!1,isLoading:Bd(t.defaultValues),isValidating:!1,isSubmitted:!1,isSubmitting:!1,isSubmitSuccessful:!1,isValid:!1,touchedFields:{},dirtyFields:{},validatingFields:{},errors:t.errors||{},disabled:t.disabled||!1},n={},o=Ja(t.defaultValues)||Ja(t.values)?Ea(t.defaultValues||t.values)||{}:{},i=t.shouldUnregister?{}:Ea(o),a={action:!1,mount:!1,watch:!1},c={mount:new Set,disabled:new Set,unMount:new Set,array:new Set,watch:new Set},h,m=0,y={isDirty:!1,dirtyFields:!1,validatingFields:!1,touchedFields:!1,isValidating:!1,isValid:!1,errors:!1},w=Se({},y),E={array:FQe(),state:FQe()},A=dT(t.mode),P=dT(t.reValidateMode),j=t.criteriaMode===Mf.all,D=ke=>Je=>{clearTimeout(m),m=setTimeout(ke,Je)},k=ke=>vt(null,null,function*(){if(!t.disabled&&(y.isValid||w.isValid||ke)){let Je=t.resolver?du((yield le()).errors):yield me(n,!0);Je!==r.isValid&&E.state.next({isValid:Je})}}),z=(ke,Je)=>{!t.disabled&&(y.isValidating||y.validatingFields||w.isValidating||w.validatingFields)&&((ke||Array.from(c.mount)).forEach(tt=>{tt&&(Je?mi(r.validatingFields,tt,Je):ws(r.validatingFields,tt))}),E.state.next({validatingFields:r.validatingFields,isValidating:!du(r.validatingFields)}))},V=(ke,Je=[],tt,Ft,Wt=!0,xe=!0)=>{if(Ft&&tt&&!t.disabled){if(a.action=!0,xe&&Array.isArray(gr(n,ke))){let J=tt(gr(n,ke),Ft.argA,Ft.argB);Wt&&mi(n,ke,J)}if(xe&&Array.isArray(gr(r.errors,ke))){let J=tt(gr(r.errors,ke),Ft.argA,Ft.argB);Wt&&mi(r.errors,ke,J),gNr(r.errors,ke)}if((y.touchedFields||w.touchedFields)&&xe&&Array.isArray(gr(r.touchedFields,ke))){let J=tt(gr(r.touchedFields,ke),Ft.argA,Ft.argB);Wt&&mi(r.touchedFields,ke,J)}(y.dirtyFields||w.dirtyFields)&&(r.dirtyFields=VP(o,i)),E.state.next({name:ke,isDirty:de(ke,Je),dirtyFields:r.dirtyFields,errors:r.errors,isValid:r.isValid})}else mi(i,ke,Je)},G=(ke,Je)=>{mi(r.errors,ke,Je),E.state.next({errors:r.errors})},K=ke=>{r.errors=ke,E.state.next({errors:r.errors,isValid:!1})},Z=(ke,Je,tt,Ft)=>{let Wt=gr(n,ke);if(Wt){let xe=gr(i,ke,na(tt)?gr(o,ke):tt);na(xe)||Ft&&Ft.defaultChecked||Je?mi(i,ke,Je?xe:GQe(Wt._f)):rt(ke,xe),a.mount&&k()}},te=(ke,Je,tt,Ft,Wt)=>{let xe=!1,J=!1,oe={name:ke};if(!t.disabled){if(!tt||Ft){(y.isDirty||w.isDirty)&&(J=r.isDirty,r.isDirty=oe.isDirty=de(),xe=J!==oe.isDirty);let ue=I0(gr(o,ke),Je);J=!!gr(r.dirtyFields,ke),ue?ws(r.dirtyFields,ke):mi(r.dirtyFields,ke,!0),oe.dirtyFields=r.dirtyFields,xe=xe||(y.dirtyFields||w.dirtyFields)&&J!==!ue}if(tt){let ue=gr(r.touchedFields,ke);ue||(mi(r.touchedFields,ke,tt),oe.touchedFields=r.touchedFields,xe=xe||(y.touchedFields||w.touchedFields)&&ue!==tt)}xe&&Wt&&E.state.next(oe)}return xe?oe:{}},se=(ke,Je,tt,Ft)=>{let Wt=gr(r.errors,ke),xe=(y.isValid||w.isValid)&&Tp(Je)&&r.isValid!==Je;if(t.delayError&&tt?(h=D(()=>G(ke,tt)),h(t.delayError)):(clearTimeout(m),h=null,tt?mi(r.errors,ke,tt):ws(r.errors,ke)),(tt?!I0(Wt,tt):Wt)||!du(Ft)||xe){let J=Pt(Se(Se({},Ft),xe&&Tp(Je)?{isValid:Je}:{}),{errors:r.errors,name:ke});r=Se(Se({},r),J),E.state.next(J)}},le=ke=>vt(null,null,function*(){z(ke,!0);let Je=yield t.resolver(i,t.context,cNr(ke||c.mount,n,t.criteriaMode,t.shouldUseNativeValidation));return z(ke),Je}),pe=ke=>vt(null,null,function*(){let{errors:Je}=yield le(ke);if(ke)for(let tt of ke){let Ft=gr(Je,tt);Ft?mi(r.errors,tt,Ft):ws(r.errors,tt)}else r.errors=Je;return Je}),me=(Ft,Wt,...xe)=>vt(null,[Ft,Wt,...xe],function*(ke,Je,tt={valid:!0}){for(let oe in ke){let ue=ke[oe];if(ue){let J=ue,{_f:we}=J,Fe=En(J,["_f"]);if(we){let $e=c.array.has(we.name),nt=ue._f&&pNr(ue._f);nt&&y.validatingFields&&z([oe],!0);let Ze=yield ese(ue,c.disabled,i,j,t.shouldUseNativeValidation&&!Je,$e);if(nt&&y.validatingFields&&z([oe]),Ze[we.name]&&(tt.valid=!1,Je))break;!Je&&(gr(Ze,we.name)?$e?uet(r.errors,Ze,we.name):mi(r.errors,we.name,Ze[we.name]):ws(r.errors,we.name))}!du(Fe)&&(yield me(Fe,Je,tt))}}return tt.valid}),_e=()=>{for(let ke of c.unMount){let Je=gr(n,ke);Je&&(Je._f.refs?Je._f.refs.every(tt=>!Vae(tt)):!Vae(Je._f.ref))&&ft(ke)}c.unMount=new Set},de=(ke,Je)=>!t.disabled&&(ke&&Je&&mi(i,ke,Je),!I0(et(),o)),Ce=(ke,Je,tt)=>tet(ke,c,Se({},a.mount?i:na(Je)?o:om(ke)?{[ke]:Je}:Je),tt,Je),Ye=ke=>WP(gr(a.mount?i:o,ke,t.shouldUnregister?gr(o,ke,[]):[])),rt=(ke,Je,tt={})=>{let Ft=gr(n,ke),Wt=Je;if(Ft){let xe=Ft._f;xe&&(!xe.disabled&&mi(i,ke,aet(Je,xe)),Wt=lF(xe.ref)&&Wu(Je)?"":Je,ret(xe.ref)?[...xe.ref.options].forEach(J=>J.selected=Wt.includes(J.value)):xe.refs?HP(xe.ref)?xe.refs.length>1?xe.refs.forEach(J=>(!J.defaultChecked||!J.disabled)&&(J.checked=Array.isArray(Wt)?!!Wt.find(oe=>oe===J.value):Wt===J.value)):xe.refs[0]&&(xe.refs[0].checked=!!Wt):xe.refs.forEach(J=>J.checked=J.value===Wt):ose(xe.ref)?xe.ref.value="":(xe.ref.value=Wt,xe.ref.type||E.state.next({name:ke,values:Ea(i)})))}(tt.shouldDirty||tt.shouldTouch)&&te(ke,Wt,tt.shouldTouch,tt.shouldDirty,!0),tt.shouldValidate&&Tt(ke)},ct=(ke,Je,tt)=>{for(let Ft in Je){let Wt=Je[Ft],xe=`${ke}.${Ft}`,J=gr(n,xe);(c.array.has(ke)||Ja(Wt)||J&&!J._f)&&!vb(Wt)?ct(xe,Wt,tt):rt(xe,Wt,tt)}},qe=(ke,Je,tt={})=>{let Ft=gr(n,ke),Wt=c.array.has(ke),xe=Ea(Je);mi(i,ke,xe),Wt?(E.array.next({name:ke,values:Ea(i)}),(y.isDirty||y.dirtyFields||w.isDirty||w.dirtyFields)&&tt.shouldDirty&&E.state.next({name:ke,dirtyFields:VP(o,i),isDirty:de(ke,xe)})):Ft&&!Ft._f&&!Wu(xe)?ct(ke,xe,tt):rt(ke,xe,tt),Qae(ke,c)&&E.state.next(Se({},r)),E.state.next({name:a.mount?ke:void 0,values:Ea(i)})},lt=ke=>vt(null,null,function*(){a.mount=!0;let Je=ke.target,tt=Je.name,Ft=!0,Wt=gr(n,tt),xe=J=>{Ft=Number.isNaN(J)||vb(J)&&isNaN(J.getTime())||I0(J,gr(i,tt,J))};if(Wt){let J,oe,ue=Je.type?GQe(Wt._f):KQe(ke),we=ke.type===sF.BLUR||ke.type===sF.FOCUS_OUT,Fe=!fNr(Wt._f)&&!t.resolver&&!gr(r.errors,tt)&&!Wt._f.deps||mNr(we,gr(r.touchedFields,tt),r.isSubmitted,P,A),$e=Qae(tt,c,we);mi(i,tt,ue),we?(Wt._f.onBlur&&Wt._f.onBlur(ke),h&&h(0)):Wt._f.onChange&&Wt._f.onChange(ke);let nt=te(tt,ue,we),Ze=!du(nt)||$e;if(!we&&E.state.next({name:tt,type:ke.type,values:Ea(i)}),Fe)return(y.isValid||w.isValid)&&(t.mode==="onBlur"?we&&k():we||k()),Ze&&E.state.next(Se({name:tt},$e?{}:nt));if(!we&&$e&&E.state.next(Se({},r)),t.resolver){let{errors:be}=yield le([tt]);if(xe(ue),Ft){let Ee=WQe(r.errors,n,tt),Be=WQe(be,n,Ee.name||tt);J=Be.error,tt=Be.name,oe=du(be)}}else z([tt],!0),J=(yield ese(Wt,c.disabled,i,j,t.shouldUseNativeValidation))[tt],z([tt]),xe(ue),Ft&&(J?oe=!1:(y.isValid||w.isValid)&&(oe=yield me(n,!0)));Ft&&(Wt._f.deps&&Tt(Wt._f.deps),se(tt,oe,J,nt))}}),bt=(ke,Je)=>{if(gr(r.errors,Je)&&ke.focus)return ke.focus(),1},Tt=(tt,...Ft)=>vt(null,[tt,...Ft],function*(ke,Je={}){let Wt,xe,J=Nc(ke);if(t.resolver){let oe=yield pe(na(ke)?ke:J);Wt=du(oe),xe=ke?!J.some(ue=>gr(oe,ue)):Wt}else ke?(xe=(yield Promise.all(J.map(oe=>vt(null,null,function*(){let ue=gr(n,oe);return yield me(ue&&ue._f?{[oe]:ue}:ue)})))).every(Boolean),!(!xe&&!r.isValid)&&k()):xe=Wt=yield me(n);return E.state.next(Pt(Se(Se({},!om(ke)||(y.isValid||w.isValid)&&Wt!==r.isValid?{}:{name:ke}),t.resolver||!ke?{isValid:Wt}:{}),{errors:r.errors})),Je.shouldFocus&&!xe&&hT(n,bt,ke?J:c.mount),xe}),et=ke=>{let Je=Se({},a.mount?i:o);return na(ke)?Je:om(ke)?gr(Je,ke):ke.map(tt=>gr(Je,tt))},pt=(ke,Je)=>({invalid:!!gr((Je||r).errors,ke),isDirty:!!gr((Je||r).dirtyFields,ke),error:gr((Je||r).errors,ke),isValidating:!!gr(r.validatingFields,ke),isTouched:!!gr((Je||r).touchedFields,ke)}),ot=ke=>{ke&&Nc(ke).forEach(Je=>ws(r.errors,Je)),E.state.next({errors:ke?r.errors:{}})},We=(ke,Je,tt)=>{let Ft=(gr(n,ke,{_f:{}})._f||{}).ref,we=gr(r.errors,ke)||{},{ref:xe,message:J,type:oe}=we,ue=En(we,["ref","message","type"]);mi(r.errors,ke,Pt(Se(Se({},ue),Je),{ref:Ft})),E.state.next({name:ke,errors:r.errors,isValid:!1}),tt&&tt.shouldFocus&&Ft&&Ft.focus&&Ft.focus()},Ne=(ke,Je)=>Bd(ke)?E.state.subscribe({next:tt=>ke(Ce(void 0,Je),tt)}):Ce(ke,Je,!0),Ke=ke=>E.state.subscribe({next:Je=>{hNr(ke.name,Je.name,ke.exact)&&dNr(Je,ke.formState||y,Pr,ke.reRenderRoot)&&ke.callback(Se(Se({values:Se({},i)},r),Je))}}).unsubscribe,Ge=ke=>(a.mount=!0,w=Se(Se({},w),ke.formState),Ke(Pt(Se({},ke),{formState:w}))),ft=(ke,Je={})=>{for(let tt of ke?Nc(ke):c.mount)c.mount.delete(tt),c.array.delete(tt),Je.keepValue||(ws(n,tt),ws(i,tt)),!Je.keepError&&ws(r.errors,tt),!Je.keepDirty&&ws(r.dirtyFields,tt),!Je.keepTouched&&ws(r.touchedFields,tt),!Je.keepIsValidating&&ws(r.validatingFields,tt),!t.shouldUnregister&&!Je.keepDefaultValue&&ws(o,tt);E.state.next({values:Ea(i)}),E.state.next(Se(Se({},r),Je.keepDirty?{isDirty:de()}:{})),!Je.keepIsValid&&k()},mt=({disabled:ke,name:Je})=>{(Tp(ke)&&a.mount||ke||c.disabled.has(Je))&&(ke?c.disabled.add(Je):c.disabled.delete(Je))},Ot=(ke,Je={})=>{let tt=gr(n,ke),Ft=Tp(Je.disabled)||Tp(t.disabled);return mi(n,ke,Pt(Se({},tt||{}),{_f:Se(Pt(Se({},tt&&tt._f?tt._f:{ref:{name:ke}}),{name:ke,mount:!0}),Je)})),c.mount.add(ke),tt?mt({disabled:Tp(Je.disabled)?Je.disabled:t.disabled,name:ke}):Z(ke,!0,Je.value),Pt(Se(Se({},Ft?{disabled:Je.disabled||t.disabled}:{}),t.progressive?{required:!!Je.required,min:GP(Je.min),max:GP(Je.max),minLength:GP(Je.minLength),maxLength:GP(Je.maxLength),pattern:GP(Je.pattern)}:{}),{name:ke,onChange:lt,onBlur:lt,ref:Wt=>{if(Wt){Ot(ke,Je),tt=gr(n,ke);let xe=na(Wt.value)&&Wt.querySelectorAll&&Wt.querySelectorAll("input,select,textarea")[0]||Wt,J=sNr(xe),oe=tt._f.refs||[];if(J?oe.find(ue=>ue===xe):xe===tt._f.ref)return;mi(n,ke,{_f:Se(Se({},tt._f),J?{refs:[...oe.filter(Vae),xe,...(Array.isArray(gr(o,ke))?[{}]:[])],ref:{type:xe.type,name:ke}}:{ref:xe})}),Z(ke,!1,void 0,xe)}else tt=gr(n,ke,{}),tt._f&&(tt._f.mount=!1),(t.shouldUnregister||Je.shouldUnregister)&&!(XQe(c.array,ke)&&a.action)&&c.unMount.add(ke)}})},At=()=>t.shouldFocusError&&hT(n,bt,c.mount),Mt=ke=>{Tp(ke)&&(E.state.next({disabled:ke}),hT(n,(Je,tt)=>{let Ft=gr(n,tt);Ft&&(Je.disabled=Ft._f.disabled||ke,Array.isArray(Ft._f.refs)&&Ft._f.refs.forEach(Wt=>{Wt.disabled=Ft._f.disabled||ke}))},0,!1))},Yt=(ke,Je)=>tt=>vt(null,null,function*(){let Ft;tt&&(tt.preventDefault&&tt.preventDefault(),tt.persist&&tt.persist());let Wt=Ea(i);if(E.state.next({isSubmitting:!0}),t.resolver){let{errors:xe,values:J}=yield le();r.errors=xe,Wt=J}else yield me(n);if(c.disabled.size)for(let xe of c.disabled)mi(Wt,xe,void 0);if(ws(r.errors,"root"),du(r.errors)){E.state.next({errors:{}});try{yield ke(Wt,tt)}catch(xe){Ft=xe}}else Je&&(yield Je(Se({},r.errors),tt)),At(),setTimeout(At);if(E.state.next({isSubmitted:!0,isSubmitting:!1,isSubmitSuccessful:du(r.errors)&&!Ft,submitCount:r.submitCount+1,errors:r.errors}),Ft)throw Ft}),qt=(ke,Je={})=>{gr(n,ke)&&(na(Je.defaultValue)?qe(ke,Ea(gr(o,ke))):(qe(ke,Je.defaultValue),mi(o,ke,Ea(Je.defaultValue))),Je.keepTouched||ws(r.touchedFields,ke),Je.keepDirty||(ws(r.dirtyFields,ke),r.isDirty=Je.defaultValue?de(ke,Ea(gr(o,ke))):de()),Je.keepError||(ws(r.errors,ke),y.isValid&&k()),E.state.next(Se({},r)))},Ut=(ke,Je={})=>{let tt=ke?Ea(ke):o,Ft=Ea(tt),Wt=du(ke),xe=Wt?o:Ft;if(Je.keepDefaultValues||(o=tt),!Je.keepValues){if(Je.keepDirtyValues){let J=new Set([...c.mount,...Object.keys(VP(o,i))]);for(let oe of Array.from(J))gr(r.dirtyFields,oe)?mi(xe,oe,gr(i,oe)):qe(oe,gr(xe,oe))}else{if(tse&&na(ke))for(let J of c.mount){let oe=gr(n,J);if(oe&&oe._f){let ue=Array.isArray(oe._f.refs)?oe._f.refs[0]:oe._f.ref;if(lF(ue)){let we=ue.closest("form");if(we){we.reset();break}}}}for(let J of c.mount)qe(J,gr(xe,J))}i=Ea(xe),E.array.next({values:Se({},xe)}),E.state.next({values:Se({},xe)})}c={mount:Je.keepDirtyValues?c.mount:new Set,unMount:new Set,array:new Set,disabled:new Set,watch:new Set,watchAll:!1,focus:""},a.mount=!y.isValid||!!Je.keepIsValid||!!Je.keepDirtyValues,a.watch=!!t.shouldUnregister,E.state.next({submitCount:Je.keepSubmitCount?r.submitCount:0,isDirty:Wt?!1:Je.keepDirty?r.isDirty:!!(Je.keepDefaultValues&&!I0(ke,o)),isSubmitted:Je.keepIsSubmitted?r.isSubmitted:!1,dirtyFields:Wt?{}:Je.keepDirtyValues?Je.keepDefaultValues&&i?VP(o,i):r.dirtyFields:Je.keepDefaultValues&&ke?VP(o,ke):Je.keepDirty?r.dirtyFields:{},touchedFields:Je.keepTouched?r.touchedFields:{},errors:Je.keepErrors?r.errors:{},isSubmitSuccessful:Je.keepIsSubmitSuccessful?r.isSubmitSuccessful:!1,isSubmitting:!1})},sr=(ke,Je)=>Ut(Bd(ke)?ke(i):ke,Je),jr=(ke,Je={})=>{let tt=gr(n,ke),Ft=tt&&tt._f;if(Ft){let Wt=Ft.refs?Ft.refs[0]:Ft.ref;Wt.focus&&(Wt.focus(),Je.shouldSelect&&Bd(Wt.select)&&Wt.select())}},Pr=ke=>{r=Se(Se({},r),ke)},Dr={control:{register:Ot,unregister:ft,getFieldState:pt,handleSubmit:Yt,setError:We,_subscribe:Ke,_runSchema:le,_getWatch:Ce,_getDirty:de,_setValid:k,_setFieldArray:V,_setDisabledField:mt,_setErrors:K,_getFieldArray:Ye,_reset:Ut,_resetDefaultValues:()=>Bd(t.defaultValues)&&t.defaultValues().then(ke=>{sr(ke,t.resetOptions),E.state.next({isLoading:!1})}),_removeUnmounted:_e,_disableForm:Mt,_subjects:E,_proxyFormState:y,get _fields(){return n},get _formValues(){return i},get _state(){return a},set _state(ke){a=ke},get _defaultValues(){return o},get _names(){return c},set _names(ke){c=ke},get _formState(){return r},get _options(){return t},set _options(ke){t=Se(Se({},t),ke)}},subscribe:Ge,trigger:Tt,register:Ot,handleSubmit:Yt,watch:Ne,setValue:qe,getValues:et,reset:sr,resetField:qt,clearErrors:ot,unregister:ft,setError:We,setFocus:jr,getFieldState:pt};return Pt(Se({},Dr),{formControl:Dr})}var T0=()=>{let e=typeof performance=="undefined"?Date.now():performance.now()*1e3;return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,t=>{let r=(Math.random()*16+e)%16|0;return(t=="x"?r:r&3|8).toString(16)})},Gae=(e,t,r={})=>r.shouldFocus||na(r.shouldFocus)?r.focusName||`${e}.${na(r.focusIndex)?t:r.focusIndex}.`:"",Hae=(e,t)=>[...e,...Nc(t)],Wae=e=>Array.isArray(e)?e.map(()=>{}):void 0;function $ae(e,t,r){return[...e.slice(0,t),...Nc(r),...e.slice(t)]}var Yae=(e,t,r)=>Array.isArray(e)?(na(e[r])&&(e[r]=void 0),e.splice(r,0,e.splice(t,1)[0]),e):[],Zae=(e,t)=>[...Nc(t),...Nc(e)];function _Nr(e,t){let r=0,n=[...e];for(let o of t)n.splice(o-r,1),r++;return WP(n).length?n:[]}var Kae=(e,t)=>na(t)?[]:_Nr(e,Nc(t).sort((r,n)=>r-n)),Xae=(e,t,r)=>{[e[t],e[r]]=[e[r],e[t]]},YQe=(e,t,r)=>(e[t]=r,e);function ase(e){let t=mT(),{control:r=t.control,name:n,keyName:o="id",shouldUnregister:i,rules:a}=e,[c,h]=Cn.default.useState(r._getFieldArray(n)),m=Cn.default.useRef(r._getFieldArray(n).map(T0)),y=Cn.default.useRef(c),w=Cn.default.useRef(n),E=Cn.default.useRef(!1);w.current=n,y.current=c,r._names.array.add(n),a&&r.register(n,a),Cn.default.useEffect(()=>r._subjects.array.subscribe({next:({values:Z,name:te})=>{if(te===w.current||!te){let se=gr(Z,w.current);Array.isArray(se)&&(h(se),m.current=se.map(T0))}}}).unsubscribe,[r]);let A=Cn.default.useCallback(Z=>{E.current=!0,r._setFieldArray(n,Z)},[r,n]),P=(Z,te)=>{let se=Nc(Ea(Z)),le=Hae(r._getFieldArray(n),se);r._names.focus=Gae(n,le.length-1,te),m.current=Hae(m.current,se.map(T0)),A(le),h(le),r._setFieldArray(n,le,Hae,{argA:Wae(Z)})},j=(Z,te)=>{let se=Nc(Ea(Z)),le=Zae(r._getFieldArray(n),se);r._names.focus=Gae(n,0,te),m.current=Zae(m.current,se.map(T0)),A(le),h(le),r._setFieldArray(n,le,Zae,{argA:Wae(Z)})},D=Z=>{let te=Kae(r._getFieldArray(n),Z);m.current=Kae(m.current,Z),A(te),h(te),!Array.isArray(gr(r._fields,n))&&mi(r._fields,n,void 0),r._setFieldArray(n,te,Kae,{argA:Z})},k=(Z,te,se)=>{let le=Nc(Ea(te)),pe=$ae(r._getFieldArray(n),Z,le);r._names.focus=Gae(n,Z,se),m.current=$ae(m.current,Z,le.map(T0)),A(pe),h(pe),r._setFieldArray(n,pe,$ae,{argA:Z,argB:Wae(te)})},z=(Z,te)=>{let se=r._getFieldArray(n);Xae(se,Z,te),Xae(m.current,Z,te),A(se),h(se),r._setFieldArray(n,se,Xae,{argA:Z,argB:te},!1)},V=(Z,te)=>{let se=r._getFieldArray(n);Yae(se,Z,te),Yae(m.current,Z,te),A(se),h(se),r._setFieldArray(n,se,Yae,{argA:Z,argB:te},!1)},G=(Z,te)=>{let se=Ea(te),le=YQe(r._getFieldArray(n),Z,se);m.current=[...le].map((pe,me)=>!pe||me===Z?T0():m.current[me]),A(le),h([...le]),r._setFieldArray(n,le,YQe,{argA:Z,argB:se},!0,!1)},K=Z=>{let te=Nc(Ea(Z));m.current=te.map(T0),A([...te]),h([...te]),r._setFieldArray(n,[...te],se=>se,{},!0,!1)};return Cn.default.useEffect(()=>{if(r._state.action=!1,Qae(n,r._names)&&r._subjects.state.next(Se({},r._formState)),E.current&&(!dT(r._options.mode).isOnSubmit||r._formState.isSubmitted)&&!dT(r._options.reValidateMode).isOnSubmit)if(r._options.resolver)r._runSchema([n]).then(Z=>{let te=gr(Z.errors,n),se=gr(r._formState.errors,n);(se?!te&&se.type||te&&(se.type!==te.type||se.message!==te.message):te&&te.type)&&(te?mi(r._formState.errors,n,te):ws(r._formState.errors,n),r._subjects.state.next({errors:r._formState.errors}))});else{let Z=gr(r._fields,n);Z&&Z._f&&!(dT(r._options.reValidateMode).isOnSubmit&&dT(r._options.mode).isOnSubmit)&&ese(Z,r._names.disabled,r._formValues,r._options.criteriaMode===Mf.all,r._options.shouldUseNativeValidation,!0).then(te=>!du(te)&&r._subjects.state.next({errors:uet(r._formState.errors,te,n)}))}r._subjects.state.next({name:n,values:Ea(r._formValues)}),r._names.focus&&hT(r._fields,(Z,te)=>{if(r._names.focus&&te.startsWith(r._names.focus)&&Z.focus)return Z.focus(),1}),r._names.focus="",r._setValid(),E.current=!1},[c,n,r]),Cn.default.useEffect(()=>(!gr(r._formValues,n)&&r._setFieldArray(n),()=>{let Z=(te,se)=>{let le=gr(r._fields,te);le&&le._f&&(le._f.mount=se)};r._options.shouldUnregister||i?r.unregister(n):Z(n,!1)}),[n,r,o,i]),{swap:Cn.default.useCallback(z,[A,n,r]),move:Cn.default.useCallback(V,[A,n,r]),prepend:Cn.default.useCallback(j,[A,n,r]),append:Cn.default.useCallback(P,[A,n,r]),remove:Cn.default.useCallback(D,[A,n,r]),insert:Cn.default.useCallback(k,[A,n,r]),update:Cn.default.useCallback(G,[A,n,r]),replace:Cn.default.useCallback(K,[A,n,r]),fields:Cn.default.useMemo(()=>c.map((Z,te)=>Pt(Se({},Z),{[o]:m.current[te]||T0()})),[c,o])}}function Cf(e={}){let t=Cn.default.useRef(void 0),r=Cn.default.useRef(void 0),[n,o]=Cn.default.useState({isDirty:!1,isValidating:!1,isLoading:Bd(e.defaultValues),isSubmitted:!1,isSubmitting:!1,isSubmitSuccessful:!1,isValid:!1,submitCount:0,dirtyFields:{},touchedFields:{},validatingFields:{},errors:e.errors||{},disabled:e.disabled||!1,isReady:!1,defaultValues:Bd(e.defaultValues)?void 0:e.defaultValues});t.current||(t.current=Pt(Se({},e.formControl?e.formControl:yNr(e)),{formState:n}),e.formControl&&e.defaultValues&&!Bd(e.defaultValues)&&e.formControl.reset(e.defaultValues,e.resetOptions));let i=t.current.control;return i._options=e,nse(()=>{let a=i._subscribe({formState:i._proxyFormState,callback:()=>o(Se({},i._formState)),reRenderRoot:!0});return o(c=>Pt(Se({},c),{isReady:!0})),i._formState.isReady=!0,a},[i]),Cn.default.useEffect(()=>i._disableForm(e.disabled),[i,e.disabled]),Cn.default.useEffect(()=>{e.mode&&(i._options.mode=e.mode),e.reValidateMode&&(i._options.reValidateMode=e.reValidateMode),e.errors&&!du(e.errors)&&i._setErrors(e.errors)},[i,e.errors,e.mode,e.reValidateMode]),Cn.default.useEffect(()=>{e.shouldUnregister&&i._subjects.state.next({values:i._getWatch()})},[i,e.shouldUnregister]),Cn.default.useEffect(()=>{if(i._proxyFormState.isDirty){let a=i._getDirty();a!==n.isDirty&&i._subjects.state.next({isDirty:a})}},[i,n.isDirty]),Cn.default.useEffect(()=>{e.values&&!I0(e.values,r.current)?(i._reset(e.values,i._options.resetOptions),r.current=e.values,o(a=>Se({},a))):i._resetDefaultValues()},[i,e.values]),Cn.default.useEffect(()=>{i._state.mount||(i._setValid(),i._state.mount=!0),i._state.watch&&(i._state.watch=!1,i._subjects.state.next(Se({},i._formState))),i._removeUnmounted()}),t.current.formState=eet(n,i),t.current}var Iet=Q(De(),1);u();u();var bo=e=>e!==void 0,cet=(e,t,r)=>t in e?e[t]:e[t]=r,$P={ELEMENT:1,ATTRIBUTE:2,TEXT:3,CDATA_SECTION:4,ENTITY_REFERENCE:5,ENTITY:6,PROCESSING_INSTRUCTION:7,COMMENT:8,DOCUMENT:9,DOCUMENT_TYPE:10,DOCUMENT_FRAGMENT:11,NOTATION:12},use=class{constructor(t){this._parser=new t}toDocument(t){return this._parser.parseFromString(t,"application/xml")}getAllTextContent(t,r){return hF(t,r).join("")}};function hF(e,t){return pet(e,t,[]).join("")}function pet(e,t,r){if(e.nodeType===$P.CDATA_SECTION||e.nodeType===$P.TEXT)t?r.push(String(e.nodeValue).replace(/(\r\n|\r|\n)/g,"")):r.push(e.nodeValue);else{var n;for(n=e.firstChild;n;n=n.nextSibling)pet(n,t,r)}return r}function bNr(e,t,r,n){for(var o=xNr(t);o;o=wNr(o)){var i=o.namespaceURI||null,a=e[i];if(bo(a)){var c=a[o.localName];bo(c)&&c.call(n,o,r)}}}function xNr(e){let t=e.firstElementChild||e.firstChild;for(;t&&t.nodeType!==$P.ELEMENT;)t=t.nextSibling;return t}function wNr(e){let t=e.nextElementSibling||e.nextSibling;for(;t&&t.nodeType!==$P.ELEMENT;)t=t.nextSibling;return t}function Fl(e,t,r){return ENr(e,t,r)}function ENr(e,t,r){var n=bo(r)?r:{},o,i;for(o=0,i=e.length;o<i;++o)n[e[o]]=t;return n}function fet(e,t){return function(r,n){var o=e.call(bo(t)?t:this,r,n);if(bo(o)){var i=n[n.length-1];i.push(o)}}}function sl(e,t,r,n,o){return n.push(e),bNr(t,r,n,o),n.pop()}function Yr(e,t,r){return function(n,o){let i=e.call(bo(r)?r:this,n,o);if(bo(i)){var a=o[o.length-1],c=bo(t)?t:n.localName;a[c]=i}}}function Lc(e,t,r){return function(n,o){var i=e.call(bo(r)?r:this,n,o);if(bo(i)){var a=o[o.length-1],c=bo(t)?t:n.localName,h=cet(a,c,[]);h.push(i)}}}var SNr=/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g;function TNr(e){return e.replace(SNr,"")}function yb(e){let t=/^\s*(true|1)|(false|0)\s*$/.exec(e);if(t)return bo(t[1])||!1}function vT(e){return Yg(hF(e,!1))}function Yg(e){let t=/^\s*([+\-]?\d*\.?\d+(?:e[+\-]?\d+)?)\s*$/i.exec(e);if(t)return parseFloat(t[1])}function sse(e){return fF(hF(e,!1))}function fF(e){let t=/^\s*(\d+)\s*$/.exec(e);if(t)return parseInt(t[1],10)}function Yo(e){return TNr(hF(e,!1))}var INr="http://www.w3.org/1999/xlink";function cse(e){return e.getAttributeNS(INr,"href")}function MNr(e,t){return sl({},e5r,e,t)}function det(e){return[Yg(e.getAttribute("minx")),Yg(e.getAttribute("miny")),Yg(e.getAttribute("maxx")),Yg(e.getAttribute("maxy"))]}function CNr(e,t){let r=det(e),n=[Yg(e.getAttribute("resx")),Yg(e.getAttribute("resy"))];return{crs:e.getAttribute("CRS")||e.getAttribute("SRS"),extent:r,res:n}}function ANr(e,t){let r=det(e);if(!(!bo(r[0])||!bo(r[1])||!bo(r[2])||!bo(r[3])))return r}function ONr(e,t){let r=parseFloat(e.getAttribute("min")),n=parseFloat(e.getAttribute("max"));return{min:r,max:n}}function PNr(e,t){let r=sl({},t5r,e,t);if(!bo(r))return;let n=r.westBoundLongitude,o=r.southBoundLatitude,i=r.eastBoundLongitude,a=r.northBoundLatitude;if(!(!bo(n)||!bo(o)||!bo(i)||!bo(a)))return[n,o,i,a]}function DNr(e,t){return sl({},YNr,e,t)}function NNr(e,t){return sl({},ZNr,e,t)}function LNr(e,t){return sl({},KNr,e,t)}function kNr(e,t){return sl({},XNr,e,t)}function RNr(e,t){return sl({},JNr,e,t)}function jNr(e,t){return sl([],QNr,e,t)}function qNr(e,t){let r=yb(e.getAttribute("queryable"));return sl({queryable:bo(r)?r:!1},get,e,t)}function zNr(e,t){var r=t[t.length-1];let n=sl({},get,e,t);if(!bo(n))return;let o=yb(e.getAttribute("queryable"));bo(o)||(o=r.queryable),n.queryable=bo(o)?o:!1;let i=fF(e.getAttribute("cascaded"));bo(i)||(i=r.cascaded),n.cascaded=i;let a=yb(e.getAttribute("opaque"));bo(a)||(a=r.opaque),n.opaque=bo(a)?a:!1;let c=yb(e.getAttribute("noSubsets"));bo(c)||(c=r.noSubsets),n.noSubsets=bo(c)?c:!1;let h=Yg(e.getAttribute("fixedWidth"));bo(h)||(h=r.fixedWidth),n.fixedWidth=h;let m=Yg(e.getAttribute("fixedHeight"));bo(m)||(m=r.fixedHeight),n.fixedHeight=m;let y=["Style","CRS","AuthorityURL"];for(let E=0,A=y.length;E<A;E++){let P=y[E],j=r[P];if(bo(j)){let D=cet(n,P,[]);D=D.concat(j),n[P]=D}}let w=["EX_GeographicBoundingBox","BoundingBox","Dimension","Attribution","MinScaleDenominator","MaxScaleDenominator"];for(let E=0,A=w.length;E<A;E++){let P=w[E],j=n[P];if(!bo(j)){let D=r[P];n[P]=D}}return n}function FNr(e,t){return{name:e.getAttribute("name"),units:e.getAttribute("units"),unitSymbol:e.getAttribute("unitSymbol"),default:e.getAttribute("default"),multipleValues:yb(e.getAttribute("multipleValues")),nearestValue:yb(e.getAttribute("nearestValue")),current:yb(e.getAttribute("current")),values:Yo(e)}}function Zg(e,t){return sl({},s5r,e,t)}function UNr(e,t){return sl({},r5r,e,t)}function BNr(e,t){return sl({},o5r,e,t)}function VNr(e,t){return sl({},i5r,e,t)}function lse(e,t){return sl({},n5r,e,t)}function het(e,t){var r=Zg(e,t);if(bo(r)){let n=[fF(e.getAttribute("width")),fF(e.getAttribute("height"))];return r.size=n,r}}function GNr(e,t){var r=Zg(e,t);if(bo(r))return r.name=e.getAttribute("name"),r}function HNr(e,t){var r=Zg(e,t);if(bo(r))return r.type=e.getAttribute("type"),r}function WNr(e,t){return sl({},a5r,e,t)}function met(e,t){return sl([],l5r,e,t)}var Ul=[null,"http://www.opengis.net/wms"],$Nr=Fl(Ul,{Service:Yr(NNr),Capability:Yr(DNr)}),YNr=Fl(Ul,{Request:Yr(UNr),Exception:Yr(jNr),Layer:Yr(qNr)}),ZNr=Fl(Ul,{Name:Yr(Yo),Title:Yr(Yo),Abstract:Yr(Yo),KeywordList:Yr(met),OnlineResource:Yr(cse),ContactInformation:Yr(LNr),Fees:Yr(Yo),AccessConstraints:Yr(Yo),LayerLimit:Yr(sse),MaxWidth:Yr(sse),MaxHeight:Yr(sse)}),KNr=Fl(Ul,{ContactPersonPrimary:Yr(kNr),ContactPosition:Yr(Yo),ContactAddress:Yr(RNr),ContactVoiceTelephone:Yr(Yo),ContactFacsimileTelephone:Yr(Yo),ContactElectronicMailAddress:Yr(Yo)}),XNr=Fl(Ul,{ContactPerson:Yr(Yo),ContactOrganization:Yr(Yo)}),JNr=Fl(Ul,{AddressType:Yr(Yo),Address:Yr(Yo),City:Yr(Yo),StateOrProvince:Yr(Yo),PostCode:Yr(Yo),Country:Yr(Yo)}),QNr=Fl(Ul,{Format:fet(Yo)}),get=Fl(Ul,{Name:Yr(Yo),Title:Yr(Yo),Abstract:Yr(Yo),KeywordList:Yr(met),CRS:Lc(Yo),SRS:Lc(Yo),EX_GeographicBoundingBox:Yr(PNr),LatLonBoundingBox:Yr(ANr),BoundingBox:Lc(CNr),Dimension:Lc(FNr),Attribution:Yr(MNr),AuthorityURL:Lc(GNr),Identifier:Lc(Yo),MetadataURL:Lc(HNr),DataURL:Lc(Zg),FeatureListURL:Lc(Zg),Style:Lc(WNr),MinScaleDenominator:Yr(vT),MaxScaleDenominator:Yr(vT),ScaleHint:Yr(ONr),Layer:Lc(zNr)}),e5r=Fl(Ul,{Title:Yr(Yo),OnlineResource:Yr(cse),LogoURL:Yr(het)}),t5r=Fl(Ul,{westBoundLongitude:Yr(vT),eastBoundLongitude:Yr(vT),southBoundLatitude:Yr(vT),northBoundLatitude:Yr(vT)}),r5r=Fl(Ul,{GetCapabilities:Yr(lse),GetMap:Yr(lse),GetFeatureInfo:Yr(lse)}),n5r=Fl(Ul,{Format:Lc(Yo),DCPType:Lc(BNr)}),o5r=Fl(Ul,{HTTP:Yr(VNr)}),i5r=Fl(Ul,{Get:Yr(Zg),Post:Yr(Zg)}),a5r=Fl(Ul,{Name:Yr(Yo),Title:Yr(Yo),Abstract:Yr(Yo),LegendURL:Lc(het),StyleSheetURL:Yr(Zg),StyleURL:Yr(Zg)}),s5r=Fl(Ul,{Format:Yr(Yo),OnlineResource:Yr(cse)}),l5r=Fl(Ul,{Keyword:fet(Yo)}),dF=class{constructor(t,r){!r&&typeof window!="undefined"&&(r=window.DOMParser),this.version=void 0,this._parser=new use(r),this._data=t}data(t){return this._data=t,this}toJSON(t){return t=t||this._data,this.parse(t)}parse(t){return this.readFromDocument(this._parser.toDocument(t))}readFromDocument(t){for(let r=t.firstChild;r;r=r.nextSibling)if(r.nodeType==$P.ELEMENT)return this.readFromNode(r);return null}readFromNode(t){return this.version=t.getAttribute("version"),sl({version:this.version},$Nr,t,[])||null}};var gF="wms-base-map-layer",YP="wms-base-map-source",ZP="xyz-base-map-layer",vF="xyz-base-map-source",mF={"1.0.0":"1.0.0","1.1.0":"1.1.0","1.1.1":"1.1.1","1.2.0":"1.2.0","1.3.0":"1.3.0","2.0.0":"2.0.0"};function yF(e){return vt(this,null,function*(){let t=yield Ya.get(e);if(t.status===200){let r=new dF().parse(t.data),n=u5r(r);if(n.length===0)throw new Error("There must be at least one layer present supporting the EPSG:3857 CRS.");return n}else throw new Error(`Could not fetch wms capabilities document at ${e}`)})}var u5r=e=>{var a;let t=[],r=e.version;if(r===mF["1.0.0"])throw new Error("WMS version 1.0.0 is not supported");let n=c5r(e),o=512,i=c=>{if(Te(c)){if(Te(c.Name)&&p5r(c)){let h={id:c.Name,label:c.Title,type:"wms",layers:c.Name,tileSize:o,urls:[n],version:r};t.push(h)}Te(c.Layer)&&Array.isArray(c.Layer)&&c.Layer.forEach(h=>i(h))}};return Te((a=e==null?void 0:e.Capability)==null?void 0:a.Layer)&&i(e.Capability.Layer),t},c5r=e=>{try{return e.Capability.Request.GetMap.DCPType[0].HTTP.Get.OnlineResource}catch(t){throw new Error("Invalid GetCapabilities response. The URL for the GetMap request is not defined")}},p5r=e=>{let t="EPSG:3857";if(Te(e.CRS))return e.CRS.includes(t);if(Te(e.SRS)){let r=[];return e.SRS.length===1?r=e.SRS[0].split(" "):r=e.SRS,r.includes(t)}return!1},pse=e=>{var y,w,E;let t=e.urls[0],r="1.3.0",n=512,o=(y=e.version)!=null?y:r,i=Pt(Se({format:"image/png",service:"WMS",version:o,request:"GetMap"},f5r(o,"EPSG:3857")),{transparent:!0,width:(w=e.tileSize)!=null?w:n,height:(E=e.tileSize)!=null?E:n,layers:e.layers,STYLES:""}),a=new URLSearchParams(i),c=new URL(t);return`${`${c.origin}${c.pathname}`}?bbox={bbox-epsg-3857}&${a.toString()}`},f5r=(e,t)=>[mF["1.0.0"],mF["1.1.0"],mF["1.1.1"]].includes(e)?{SRS:t}:{CRS:t},vet=(e,t,r)=>{if(!t)return!1;bet(e,r);let n=pse(t);if(!e.getSource(YP)){let o={type:"raster",tiles:[n]};t.attribution&&(o.attribution=t.attribution),e.addSource(YP,o);let i=e.getStyle().layers[0].id;e.addLayer({id:gF,type:"raster",source:YP,paint:{}},i)}},yet=e=>{for(let{id:t}of e.getStyle().layers)(t===gF||t===ZP)&&e.setLayoutProperty(t,"visibility","visible")},KP=e=>{yet(e),e.getLayer(gF)&&e.removeLayer(gF),e.getSource(YP)&&e.removeSource(YP)},_et=(e,t)=>{t.forEach(r=>{e.setLayoutProperty(r.id,"visibility","visible")})},bet=(e,t)=>{t.forEach(r=>{e.setLayoutProperty(r.id,"visibility","none")})},xet=(e,t,r)=>{if(!t)return!1;if(bet(e,r),KP(e),!e.getSource(ZP)){e.addSource(vF,{type:"raster",tiles:[t.urls[0]],attribution:t.attribution});let n=e.getStyle().layers[0].id;e.addLayer({id:ZP,type:"raster",source:vF,paint:{}},n)}},wet=e=>{yet(e),e.getLayer(ZP)&&e.removeLayer(ZP),e.getSource(vF)&&e.removeSource(vF)};var Eet="form-parse-capabilities",C0={url:"url"},d5r="https://meinwms.de?Request=GetCapabilities&Service=WMS&Version=1.3.0",h5r=()=>{let[e,t]=mo(oF),r=Ir(pT),n=iF(),o=zQe(),i=(0,Iet.useMemo)(()=>({[C0.url]:""}),[]),a=Cf({defaultValues:i}),{register:c,handleSubmit:h,formState:{errors:m}}=a,y=(0,Tet.useCallback)(w=>vt(null,null,function*(){let E=w[C0.url];t(!0);try{let A=yield yF(E);A.length!==0&&r(A)}catch(A){console.log(A),n(),o(fe("dialog.add-wms.error.invalid-url"))}finally{t(!1)}}),[]);return(0,Ip.useEffect)(()=>{Te(m[C0.url])&&n()},[m[C0.url]]),Ip.default.createElement(Ip.default.Fragment,null,Ip.default.createElement(M0,Se({},a),Ip.default.createElement("form",{className:"form-parse-wms-capabilities-root",id:Eet,onSubmit:h(y)},Ip.default.createElement("div",{className:"form-wrapper"},Ip.default.createElement("div",{className:jt("vkf-form-control",m[C0.url]&&"error")},Ip.default.createElement("label",{className:"vkf-form-label",htmlFor:C0.url},fe("control-basemapselector-addwms-input-label")),Ip.default.createElement("input",Se({className:"vkf-form-input",placeholder:d5r},c(C0.url,{required:!0,validate:w=>NGe(w)}))),Ip.default.createElement("div",{className:jt("vkf-form-error-hint",m[C0.url]&&"error")},fe("control-basemapselector-invalid-url-error-hint"))),Ip.default.createElement(rn,{className:"save-button",type:"save",buttonType:"submit",form:Eet,loading:e},fe("control-basemapselector-addwms-btn-load-capabilities"))))))},Met=h5r;u();var Qa=Q(De(),1);u();u();var Vd=Q(It(),1);var _b=Q(De(),1);var Cet=(0,_b.forwardRef)(function(t,r){let a=t,{options:n}=a,o=En(a,["options"]),i=t.disabled;return _b.default.createElement("div",{className:"vkf-select-field-root"},_b.default.createElement("div",{className:jt("select-field-container",i&&"disabled")},_b.default.createElement("select",Pt(Se({},o),{ref:r}),n.map(c=>_b.default.createElement("option",{key:c.value,value:c.value},c.label)))))});Cet.propTypes={className:Vd.default.string,options:Vd.default.arrayOf(Vd.default.shape({label:Vd.default.string,value:Vd.default.string})),onChange:Vd.default.func,onBlur:Vd.default.func,defaultValue:Vd.default.string,name:Vd.default.string,disabled:Vd.default.bool};var Aet=Cet;var _F=Aet;var fse=Q(It(),1);var Oet="form-select-custom-wms-layer",XP={selectedLayer:"selectedLayer"},Pet=({onSubmit:e,onClose:t})=>{let r=_t(pT),n=_t(oF),o=_t(qQe),[i,a]=(0,Qa.useState)(0),c=(0,Qa.useMemo)(()=>o?void 0:fe("control-basemapselector-select-disabled-hint"),[o]),h=(0,Qa.useMemo)(()=>r.map(({label:P,id:j})=>({label:P,value:j})),[r,o]),{register:m,handleSubmit:y,formState:{errors:w},reset:E}=Cf(),A=(0,Qa.useCallback)(P=>{let j=P[XP.selectedLayer],D=r.find(({id:k})=>k===j);e(D)},[e,r]);return(0,Qa.useEffect)(()=>(o&&(E({[XP.selectedLayer]:h[0].value}),a(P=>P+1)),()=>{E(),a(P=>P+1)}),[o,h,E]),Qa.default.createElement(Qa.default.Fragment,null,Qa.default.createElement("form",{className:"form-select-custom-wms-layer-root",id:Oet,onSubmit:y(A)},Qa.default.createElement("div",{className:"form-wrapper"},Qa.default.createElement("div",{className:jt("vkf-form-control",w[XP.selectedLayer]&&"error")},Qa.default.createElement("label",{className:"vkf-form-label",htmlFor:XP.selectedLayer},fe("control-basemapselector-addwms-select-label")),Qa.default.createElement(_F,Pt(Se({key:i,className:"vkf-form-input"},m(XP.selectedLayer,{required:!0})),{options:h,disabled:!o,title:c}))),Qa.default.createElement("div",{className:"form-buttons"},Qa.default.createElement(rn,{className:"save-button",type:"save",buttonType:"submit",form:Oet,disabled:n||!o},Qa.default.createElement(Fr,{name:"save"}),fe("control-basemapselector-addwms-btn-submit")),Qa.default.createElement(rn,{className:"cancel-button",type:"discard",onClick:t},fe("control-basemapselector-addwms-btn-cancel"))))))};Pet.propTypes={onSubmit:fse.default.func.isRequired,onClose:fse.default.func.isRequired};var Det=Pet;var dse=Q(It(),1);var Net=({onSubmit:e,onClose:t})=>bb.default.createElement("div",{className:"form-add-wms-root"},bb.default.createElement("div",{className:"form-description"},bb.default.createElement("div",null,fe("control-basemapselector-addwms-input-description")),bb.default.createElement("div",null,fe("control-basemapselector-addwms-select-description"))),bb.default.createElement(Met,null),bb.default.createElement(Det,{onSubmit:e,onClose:t}));Net.propTypes={onSubmit:dse.default.func.isRequired,onClose:dse.default.func.isRequired};var Let=Net;var ket=e=>{let{onClose:t,onSubmit:r}=e,n=iF(),o=(0,JP.useCallback)(()=>{n(),t()},[t,n]),i=a=>{r(a),o()};return JP.default.createElement(Dc,{title:fe("control-basemapselector-addwms-title"),modalClassName:"vkf-dialog-addwms",isOpen:!0,onClose:o,renderContent:()=>JP.default.createElement(Let,{onSubmit:i,onClose:o})})};ket.propTypes={onClose:hse.default.func.isRequired,onSubmit:hse.default.func.isRequired};var Ret=ket;u();var mse=en({key:"isCustomWmsDialogOpenState",default:!1}),jet=()=>ir(({snapshot:e})=>()=>vt(null,null,function*(){let t=(yield e.getPromise(tz))===uu.BasemapSelector;return(yield e.getPromise(mse))&&t}),[]);var xb="vkf-custom-basemaps",m5r=()=>{let e=_t(Qt),[t,r]=mo(xf),[n,o]=zd(xb,[]),i=mr.getBaseMaps(),a=Ir(Rs),[c,h]=mo(mse),m=P=>{r(P.id)},y=()=>{h(!0)},w=()=>{h(!1)},E=P=>{P.type==="wms"&&KP(e,P),t===P.id&&r(i[0].id),o(j=>j.filter(D=>D.id!==P.id))},A=P=>{if([...i,...n].find(D=>D.id===P.id||D.label===P.label))a({id:"basemapSelector",type:"danger",text:fe("control-basemapselector-error-initializiation")});else{let D=Pt(Se({},P),{allowDeletion:!0});o(k=>[...k,D])}};return kc.default.createElement(kc.default.Fragment,null,t!==void 0&&kc.default.createElement(kc.default.Fragment,null,kc.default.createElement("h2",null,fe("control-basemapselector-label"),":"),kc.default.createElement("ul",{className:"wms-entries"},[...i,...n].map(P=>kc.default.createElement("li",{key:P.id,className:"basemap-selector-entry"},kc.default.createElement(Lae,{onChange:()=>m(P),name:P.id,value:P.id,checked:t===P.id},P.label),P.allowDeletion&&kc.default.createElement("button",{className:"delete-basemap-button",onClick:j=>{j.preventDefault(),j.stopPropagation(),E(P)},title:"Remove basemap"},kc.default.createElement(Vg,{glyph:"remove"}))))),kc.default.createElement("div",{className:"controls-container"},kc.default.createElement("button",{className:"add-wms-button",onClick:y},fe("control-basemapselector-btn-addwms")))),c&&kc.default.createElement(Ret,{onClose:w,onSubmit:A}))},qet=m5r;u();u();u();u();var Gd={RADIANS:"radians",DEGREES:"degrees",FEET:"ft",METERS:"m",PIXELS:"pixels",TILE_PIXELS:"tile-pixels",USFEET:"us-ft"},Eno={9001:Gd.METERS,9002:Gd.FEET,9003:Gd.USFEET,9101:Gd.RADIANS,9102:Gd.DEGREES};var Rc={};Rc[Gd.RADIANS]=6370997/(2*Math.PI);Rc[Gd.DEGREES]=2*Math.PI*6370997/360;Rc[Gd.FEET]=.3048;Rc[Gd.METERS]=1;Rc[Gd.USFEET]=1200/3937;var jc=Gd;var g5r=function(){function e(t){this.code_=t.code,this.units_=t.units,this.extent_=t.extent!==void 0?t.extent:null,this.worldExtent_=t.worldExtent!==void 0?t.worldExtent:null,this.axisOrientation_=t.axisOrientation!==void 0?t.axisOrientation:"enu",this.global_=t.global!==void 0?t.global:!1,this.canWrapX_=!!(this.global_&&this.extent_),this.getPointResolutionFunc_=t.getPointResolution,this.defaultTileGrid_=null,this.metersPerUnit_=t.metersPerUnit}return e.prototype.canWrapX=function(){return this.canWrapX_},e.prototype.getCode=function(){return this.code_},e.prototype.getExtent=function(){return this.extent_},e.prototype.getUnits=function(){return this.units_},e.prototype.getMetersPerUnit=function(){return this.metersPerUnit_||Rc[this.units_]},e.prototype.getWorldExtent=function(){return this.worldExtent_},e.prototype.getAxisOrientation=function(){return this.axisOrientation_},e.prototype.isGlobal=function(){return this.global_},e.prototype.setGlobal=function(t){this.global_=t,this.canWrapX_=!!(t&&this.extent_)},e.prototype.getDefaultTileGrid=function(){return this.defaultTileGrid_},e.prototype.setDefaultTileGrid=function(t){this.defaultTileGrid_=t},e.prototype.setExtent=function(t){this.extent_=t,this.canWrapX_=!!(this.global_&&t)},e.prototype.setWorldExtent=function(t){this.worldExtent_=t},e.prototype.setGetPointResolution=function(t){this.getPointResolutionFunc_=t},e.prototype.getPointResolutionFunc=function(){return this.getPointResolutionFunc_},e}(),bF=g5r;u();u();function Di(e,t,r){return Math.min(Math.max(e,t),r)}var zet=function(){var e;return"cosh"in Math?e=Math.cosh:e=function(t){var r=Math.exp(t);return(r+1/r)/2},e}(),xF=function(){var e;return"log2"in Math?e=Math.log2:e=function(t){return Math.log(t)*Math.LOG2E},e}();function Fet(e,t,r,n,o,i){var a=o-r,c=i-n;if(a!==0||c!==0){var h=((e-r)*a+(t-n)*c)/(a*a+c*c);h>1?(r=o,n=i):h>0&&(r+=a*h,n+=c*h)}return Kg(e,t,r,n)}function Kg(e,t,r,n){var o=r-e,i=n-t;return o*o+i*i}function Uet(e){for(var t=e.length,r=0;r<t;r++){for(var n=r,o=Math.abs(e[r][r]),i=r+1;i<t;i++){var a=Math.abs(e[i][r]);a>o&&(o=a,n=i)}if(o===0)return null;var c=e[n];e[n]=e[r],e[r]=c;for(var h=r+1;h<t;h++)for(var m=-e[h][r]/e[r][r],y=r;y<t+1;y++)r==y?e[h][y]=0:e[h][y]+=m*e[r][y]}for(var w=new Array(t),E=t-1;E>=0;E--){w[E]=e[E][t]/e[E][E];for(var A=E-1;A>=0;A--)e[A][t]-=e[A][E]*w[E]}return w}function yT(e){return e*Math.PI/180}function Hd(e,t){var r=e%t;return r*t<0?r+t:r}function Bet(e,t,r){return e+r*(t-e)}function Vet(e,t){var r=Math.pow(10,t);return Math.round(e*r)/r}function QP(e,t){return Math.floor(Vet(e,t))}function e4(e,t){return Math.ceil(Vet(e,t))}var v5r=function(){var e=function(t,r){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,o){n.__proto__=o}||function(n,o){for(var i in o)Object.prototype.hasOwnProperty.call(o,i)&&(n[i]=o[i])},e(t,r)};return function(t,r){if(typeof r!="function"&&r!==null)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");e(t,r);function n(){this.constructor=t}t.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),t4=6378137,bT=Math.PI*t4,y5r=[-bT,-bT,bT,bT],_5r=[-180,-85,180,85],wF=t4*Math.log(Math.tan(Math.PI/2)),_T=function(e){v5r(t,e);function t(r){return e.call(this,{code:r,units:jc.METERS,extent:y5r,global:!0,worldExtent:_5r,getPointResolution:function(n,o){return n/zet(o[1]/t4)}})||this}return t}(bF),gse=[new _T("EPSG:3857"),new _T("EPSG:102100"),new _T("EPSG:102113"),new _T("EPSG:900913"),new _T("http://www.opengis.net/def/crs/EPSG/0/3857"),new _T("http://www.opengis.net/gml/srs/epsg.xml#3857")];function Get(e,t,r){var n=e.length,o=r>1?r:2,i=t;i===void 0&&(o>2?i=e.slice():i=new Array(n));for(var a=0;a<n;a+=o){i[a]=bT*e[a]/180;var c=t4*Math.log(Math.tan(Math.PI*(+e[a+1]+90)/360));c>wF?c=wF:c<-wF&&(c=-wF),i[a+1]=c}return i}function Het(e,t,r){var n=e.length,o=r>1?r:2,i=t;i===void 0&&(o>2?i=e.slice():i=new Array(n));for(var a=0;a<n;a+=o)i[a]=180*e[a]/bT,i[a+1]=360*Math.atan(Math.exp(e[a+1]/t4))/Math.PI-90;return i}u();var b5r=function(){var e=function(t,r){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,o){n.__proto__=o}||function(n,o){for(var i in o)Object.prototype.hasOwnProperty.call(o,i)&&(n[i]=o[i])},e(t,r)};return function(t,r){if(typeof r!="function"&&r!==null)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");e(t,r);function n(){this.constructor=t}t.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),x5r=6378137,Wet=[-180,-90,180,90],w5r=Math.PI*x5r/180,wb=function(e){b5r(t,e);function t(r,n){return e.call(this,{code:r,units:jc.DEGREES,extent:Wet,axisOrientation:n,global:!0,metersPerUnit:w5r,worldExtent:Wet})||this}return t}(bF),vse=[new wb("CRS:84"),new wb("EPSG:4326","neu"),new wb("urn:ogc:def:crs:OGC:1.3:CRS84"),new wb("urn:ogc:def:crs:OGC:2:84"),new wb("http://www.opengis.net/def/crs/OGC/1.3/CRS84"),new wb("http://www.opengis.net/gml/srs/epsg.xml#4326","neu"),new wb("http://www.opengis.net/def/crs/EPSG/0/4326","neu")];u();var yse={};function $et(e){return yse[e]||yse[e.replace(/urn:(x-)?ogc:def:crs:EPSG:(.*:)?(\w+)$/,"EPSG:$3")]||null}function Yet(e,t){yse[e]=t}u();u();var Ti=typeof Object.assign=="function"?Object.assign:function(e,t){if(e==null)throw new TypeError("Cannot convert undefined or null to object");for(var r=Object(e),n=1,o=arguments.length;n<o;++n){var i=arguments[n];if(i!=null)for(var a in i)i.hasOwnProperty(a)&&(r[a]=i[a])}return r};function Af(e){for(var t in e)delete e[t]}var Zet=typeof Object.values=="function"?Object.values:function(e){var t=[];for(var r in e)t.push(e[r]);return t};function Ket(e){var t;for(t in e)return!1;return!t}var xT={};function r4(e,t,r){var n=e.getCode(),o=t.getCode();n in xT||(xT[n]={}),xT[n][o]=r}function Xet(e,t){var r;return e in xT&&t in xT[e]&&(r=xT[e][t]),r}u();u();var ll={UNKNOWN:0,INTERSECTING:1,ABOVE:2,RIGHT:4,BELOW:8,LEFT:16};u();u();u();function Ao(){return function(){throw new Error("Unimplemented abstract method.")}()}var E5r=0;function es(e){return e.ol_uid||(e.ol_uid=String(++E5r))}var EF="6.15.1";var S5r=function(){var e=function(t,r){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,o){n.__proto__=o}||function(n,o){for(var i in o)Object.prototype.hasOwnProperty.call(o,i)&&(n[i]=o[i])},e(t,r)};return function(t,r){if(typeof r!="function"&&r!==null)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");e(t,r);function n(){this.constructor=t}t.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),T5r=function(e){S5r(t,e);function t(r){var n=this,o=EF==="latest"?EF:"v"+EF.split("-")[0],i="Assertion failed. See https://openlayers.org/en/"+o+"/doc/errors/#"+r+" for details.";return n=e.call(this,i)||this,n.code=r,n.name="AssertionError",n.message=i,n}return t}(Error),SF=T5r;function zn(e,t){if(!e)throw new SF(t)}function n4(e){for(var t=im(),r=0,n=e.length;r<n;++r)o4(t,e[r]);return t}function I5r(e,t,r){var n=Math.min.apply(null,e),o=Math.min.apply(null,t),i=Math.max.apply(null,e),a=Math.max.apply(null,t);return Jg(n,o,i,a,r)}function Qet(e,t){return t?(t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t):e.slice()}function TF(e,t,r){var n,o;return t<e[0]?n=e[0]-t:e[2]<t?n=t-e[2]:n=0,r<e[1]?o=e[1]-r:e[3]<r?o=r-e[3]:o=0,n*n+o*o}function Xg(e,t){return _se(e,t[0],t[1])}function ett(e,t){return e[0]<=t[0]&&t[2]<=e[2]&&e[1]<=t[1]&&t[3]<=e[3]}function _se(e,t,r){return e[0]<=t&&t<=e[2]&&e[1]<=r&&r<=e[3]}function Jet(e,t){var r=e[0],n=e[1],o=e[2],i=e[3],a=t[0],c=t[1],h=ll.UNKNOWN;return a<r?h=h|ll.LEFT:a>o&&(h=h|ll.RIGHT),c<n?h=h|ll.BELOW:c>i&&(h=h|ll.ABOVE),h===ll.UNKNOWN&&(h=ll.INTERSECTING),h}function im(){return[1/0,1/0,-1/0,-1/0]}function Jg(e,t,r,n,o){return o?(o[0]=e,o[1]=t,o[2]=r,o[3]=n,o):[e,t,r,n]}function wT(e){return Jg(1/0,1/0,-1/0,-1/0,e)}function ttt(e,t){var r=e[0],n=e[1];return Jg(r,n,r,n,t)}function rtt(e,t,r,n,o){var i=wT(o);return xse(i,e,t,r,n)}function bse(e,t){return e[0]==t[0]&&e[2]==t[2]&&e[1]==t[1]&&e[3]==t[3]}function ntt(e,t){return t[0]<e[0]&&(e[0]=t[0]),t[2]>e[2]&&(e[2]=t[2]),t[1]<e[1]&&(e[1]=t[1]),t[3]>e[3]&&(e[3]=t[3]),e}function o4(e,t){t[0]<e[0]&&(e[0]=t[0]),t[0]>e[2]&&(e[2]=t[0]),t[1]<e[1]&&(e[1]=t[1]),t[1]>e[3]&&(e[3]=t[1])}function xse(e,t,r,n,o){for(;r<n;r+=o)M5r(e,t[r],t[r+1]);return e}function M5r(e,t,r){e[0]=Math.min(e[0],t),e[1]=Math.min(e[1],r),e[2]=Math.max(e[2],t),e[3]=Math.max(e[3],r)}function IF(e,t){var r;return r=t(MF(e)),r||(r=t(CF(e)),r)||(r=t(AF(e)),r)||(r=t(A0(e)),r)?r:!1}function i4(e){var t=0;return Eb(e)||(t=oa(e)*Bl(e)),t}function MF(e){return[e[0],e[1]]}function CF(e){return[e[2],e[1]]}function Wd(e){return[(e[0]+e[2])/2,(e[1]+e[3])/2]}function ott(e,t){var r;return t==="bottom-left"?r=MF(e):t==="bottom-right"?r=CF(e):t==="top-left"?r=A0(e):t==="top-right"?r=AF(e):zn(!1,13),r}function a4(e,t,r,n,o){var i=C5r(e,t,r,n),a=i[0],c=i[1],h=i[2],m=i[3],y=i[4],w=i[5],E=i[6],A=i[7];return Jg(Math.min(a,h,y,E),Math.min(c,m,w,A),Math.max(a,h,y,E),Math.max(c,m,w,A),o)}function C5r(e,t,r,n){var o=t*n[0]/2,i=t*n[1]/2,a=Math.cos(r),c=Math.sin(r),h=o*a,m=o*c,y=i*a,w=i*c,E=e[0],A=e[1];return[E-h+w,A-m-y,E-h-w,A-m+y,E+h-w,A+m+y,E+h+w,A+m-y,E-h+w,A-m-y]}function Bl(e){return e[3]-e[1]}function am(e,t,r){var n=r||im();return s4(e,t)?(e[0]>t[0]?n[0]=e[0]:n[0]=t[0],e[1]>t[1]?n[1]=e[1]:n[1]=t[1],e[2]<t[2]?n[2]=e[2]:n[2]=t[2],e[3]<t[3]?n[3]=e[3]:n[3]=t[3]):wT(n),n}function A0(e){return[e[0],e[3]]}function AF(e){return[e[2],e[3]]}function oa(e){return e[2]-e[0]}function s4(e,t){return e[0]<=t[2]&&e[2]>=t[0]&&e[1]<=t[3]&&e[3]>=t[1]}function Eb(e){return e[2]<e[0]||e[3]<e[1]}function itt(e,t){return t?(t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t):e}function att(e,t,r){var n=!1,o=Jet(e,t),i=Jet(e,r);if(o===ll.INTERSECTING||i===ll.INTERSECTING)n=!0;else{var a=e[0],c=e[1],h=e[2],m=e[3],y=t[0],w=t[1],E=r[0],A=r[1],P=(A-w)/(E-y),j=void 0,D=void 0;i&ll.ABOVE&&!(o&ll.ABOVE)&&(j=E-(A-m)/P,n=j>=a&&j<=h),!n&&i&ll.RIGHT&&!(o&ll.RIGHT)&&(D=A-(E-h)*P,n=D>=c&&D<=m),!n&&i&ll.BELOW&&!(o&ll.BELOW)&&(j=E-(A-c)/P,n=j>=a&&j<=h),!n&&i&ll.LEFT&&!(o&ll.LEFT)&&(D=A-(E-a)*P,n=D>=c&&D<=m)}return n}function stt(e,t,r,n){var o=[];if(n>1)for(var i=e[2]-e[0],a=e[3]-e[1],c=0;c<n;++c)o.push(e[0]+i*c/n,e[1],e[2],e[1]+a*c/n,e[2]-i*c/n,e[3],e[0],e[3]-a*c/n);else o=[e[0],e[1],e[2],e[1],e[2],e[3],e[0],e[3]];t(o,o,2);for(var h=[],m=[],c=0,y=o.length;c<y;c+=2)h.push(o[c]),m.push(o[c+1]);return I5r(h,m,r)}u();function ltt(e,t){return e[0]+=+t[0],e[1]+=+t[1],e}function Sb(e,t){for(var r=!0,n=e.length-1;n>=0;--n)if(e[n]!=t[n]){r=!1;break}return r}function ET(e,t){var r=Math.cos(t),n=Math.sin(t),o=e[0]*r-e[1]*n,i=e[1]*r+e[0]*n;return e[0]=o,e[1]=i,e}function utt(e,t){return e[0]*=t,e[1]*=t,e}function ctt(e,t){if(t.canWrapX()){var r=oa(t.getExtent()),n=ptt(e,t,r);n&&(e[0]-=n*r)}return e}function ptt(e,t,r){var n=t.getExtent(),o=0;if(t.canWrapX()&&(e[0]<n[0]||e[0]>n[2])){var i=r||oa(n);o=Math.floor((e[0]-n[0])/i)}return o}u();var A5r=6371008.8;function wse(e,t,r){var n=r||A5r,o=yT(e[1]),i=yT(t[1]),a=(i-o)/2,c=yT(t[0]-e[0])/2,h=Math.sin(a)*Math.sin(a)+Math.sin(c)*Math.sin(c)*Math.cos(o)*Math.cos(i);return 2*n*Math.atan2(Math.sqrt(h),Math.sqrt(1-h))}var Ese=!0;function dtt(e){var t=e===void 0?!0:e;Ese=!t}function Sse(e,t,r){var n;if(t!==void 0){for(var o=0,i=e.length;o<i;++o)t[o]=e[o];n=t}else n=e.slice();return n}function htt(e,t,r){if(t!==void 0&&e!==t){for(var n=0,o=e.length;n<o;++n)t[n]=e[n];e=t}return e}function O5r(e){Yet(e.getCode(),e),r4(e,e,Sse)}function P5r(e){e.forEach(O5r)}function qc(e){return typeof e=="string"?$et(e):e||null}function Tse(e,t,r,n){e=qc(e);var o,i=e.getPointResolutionFunc();if(i){if(o=i(t,r),n&&n!==e.getUnits()){var a=e.getMetersPerUnit();a&&(o=o*a/Rc[n])}}else{var c=e.getUnits();if(c==jc.DEGREES&&!n||n==jc.DEGREES)o=t;else{var h=Ise(e,qc("EPSG:4326"));if(h===htt&&c!==jc.DEGREES)o=t*e.getMetersPerUnit();else{var m=[r[0]-t/2,r[1],r[0]+t/2,r[1],r[0],r[1]-t/2,r[0],r[1]+t/2];m=h(m,m,2);var y=wse(m.slice(0,2),m.slice(2,4)),w=wse(m.slice(4,6),m.slice(6,8));o=(y+w)/2}var a=n?Rc[n]:e.getMetersPerUnit();a!==void 0&&(o/=a)}}return o}function ftt(e){P5r(e),e.forEach(function(t){e.forEach(function(r){t!==r&&r4(t,r,Sse)})})}function D5r(e,t,r,n){e.forEach(function(o){t.forEach(function(i){r4(o,i,r),r4(i,o,n)})})}function OF(e,t){return e?typeof e=="string"?qc(e):e:qc(t)}function mtt(e,t){var r=l4(e,t!==void 0?t:"EPSG:3857","EPSG:4326"),n=r[0];return(n<-180||n>180)&&(r[0]=Hd(n+180,360)-180),r}function O0(e,t){if(e===t)return!0;var r=e.getUnits()===t.getUnits();if(e.getCode()===t.getCode())return r;var n=Ise(e,t);return n===Sse&&r}function Ise(e,t){var r=e.getCode(),n=t.getCode(),o=Xet(r,n);return o||(o=htt),o}function Tb(e,t){var r=qc(e),n=qc(t);return Ise(r,n)}function l4(e,t,r){var n=Tb(t,r);return n(e,void 0,e.length)}function gtt(e,t,r,n){var o=Tb(t,r);return stt(e,o,void 0,n)}var Qg=null;function vtt(){return Qg}function u4(e,t){return Qg?l4(e,t,Qg):e}function $d(e,t){return Qg?l4(e,Qg,t):(Ese&&!Sb(e,[0,0])&&e[0]>=-180&&e[0]<=180&&e[1]>=-90&&e[1]<=90&&(Ese=!1,console.warn("Call useGeographic() from ol/proj once to work with [longitude, latitude] coordinates.")),e)}function ytt(e,t){return Qg?gtt(e,t,Qg):e}function P0(e,t){return Qg?gtt(e,Qg,t):e}function N5r(){ftt(gse),ftt(vse),D5r(vse,gse,Get,Het)}N5r();u();var Ss=Q(De(),1);u();u();var TT=Q(De(),1),Mse=Q(It(),1);u();var Ib=Q(De(),1),ST=Q(It(),1),_tt=({checked:e,georeferenceMode:t,id:r,onClick:n,title:o})=>r!=="ToGeoref"||r==="toGeoref"&&t?Ib.default.createElement("li",null,Ib.default.createElement("label",{htmlFor:r},Ib.default.createElement("input",{checked:e,className:"facet-search-el",onChange:()=>{n(r)},id:r,title:o,type:"checkbox"}),Ib.default.createElement("span",{dangerouslySetInnerHTML:{__html:o}}))):Ib.default.createElement(Ib.default.Fragment,null);_tt.propTypes={checked:ST.default.bool,georeferenceMode:ST.default.bool,id:ST.default.string,onClick:ST.default.func,title:ST.default.string};var btt=_tt;var Cse={AE:"map_type-ae",AK:"map_type-ak",CM:"map_type-cm",GL:"map_type-gl",MB:"map_type-mb",MTB:"map_type-mtb",TK:"map_type-tk",TKX:"map_type-tkx",MM:"type-mosaic",VM:"type-vector"},L5r=(e,t)=>e.title>t.title?1:e.title<t.title?-1:0,k5r=()=>{let e=Object.keys(Cse).map(t=>({key:t,title:fe(`facet-${t.toLowerCase()}`)}));return e.sort(L5r),e},R5r={};Object.keys(Cse).forEach(e=>{R5r[e]=!1});var xtt=({georeferenceMode:e,mosaicMode:t})=>{let[r,n]=mo(wf),o=(0,TT.useMemo)(()=>{let c=Se({},Cse);return t&&(delete c.MM,delete c.VM),c},[t]),i=(0,TT.useMemo)(()=>k5r(),[]),a=c=>{n(h=>{let{facets:m,georeference:y}=h;if(c==="ToGeoref")return{facets:m,georeference:!y};{let w=m.slice(),E=w.findIndex(A=>A.id===c);if(E>-1)w.splice(E,1);else{let[A,P]=o[c].split("-");w.push({key:A,value:P,id:c})}return{facets:w,georeference:y}}})};return TT.default.createElement("ul",{className:"search-facet"},i.map(({key:c,title:h})=>TT.default.createElement(btt,{checked:r.facets.findIndex(m=>m.id===c)!==-1,key:c,georeferenceMode:e,onClick:a,id:c,title:h})))};xtt.propTypes={georeferenceMode:Mse.default.bool,mosaicMode:Mse.default.bool};var wtt=xtt;var PF=wtt;u();var Xd=Q(De(),1);var rle=Q(It(),1);u();var Es=Q(De(),1),zc=Q(It(),1);u();u();function Fn(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}u();var Ett=Number.isNaN||function(t){return typeof t=="number"&&t!==t};function j5r(e,t){return!!(e===t||Ett(e)&&Ett(t))}function q5r(e,t){if(e.length!==t.length)return!1;for(var r=0;r<e.length;r++)if(!j5r(e[r],t[r]))return!1;return!0}function z5r(e,t){t===void 0&&(t=q5r);var r,n=[],o,i=!1;function a(){for(var c=[],h=0;h<arguments.length;h++)c[h]=arguments[h];return i&&r===this&&t(c,n)||(o=e.apply(this,c),i=!0,r=this,n=c),o}return a}var DF=z5r;var MT=Q(De());var F5r=typeof performance=="object"&&typeof performance.now=="function",Stt=F5r?function(){return performance.now()}:function(){return Date.now()};function Ttt(e){cancelAnimationFrame(e.id)}function U5r(e,t){var r=Stt();function n(){Stt()-r>=t?e.call(null):o.id=requestAnimationFrame(n)}var o={id:requestAnimationFrame(n)};return o}var Ase=-1;function Itt(e){if(e===void 0&&(e=!1),Ase===-1||e){var t=document.createElement("div"),r=t.style;r.width="50px",r.height="50px",r.overflow="scroll",document.body.appendChild(t),Ase=t.offsetWidth-t.clientWidth,document.body.removeChild(t)}return Ase}var IT=null;function Mtt(e){if(e===void 0&&(e=!1),IT===null||e){var t=document.createElement("div"),r=t.style;r.width="50px",r.height="50px",r.overflow="scroll",r.direction="rtl";var n=document.createElement("div"),o=n.style;return o.width="100px",o.height="100px",t.appendChild(n),document.body.appendChild(t),t.scrollLeft>0?IT="positive-descending":(t.scrollLeft=1,t.scrollLeft===0?IT="negative":IT="positive-ascending"),document.body.removeChild(t),IT}return IT}var B5r=150,V5r=function(t,r){return t};function G5r(e){var t,r=e.getItemOffset,n=e.getEstimatedTotalSize,o=e.getItemSize,i=e.getOffsetForIndexAndAlignment,a=e.getStartIndexForOffset,c=e.getStopIndexForStartIndex,h=e.initInstanceProps,m=e.shouldResetStyleCacheOnItemSizeChange,y=e.validateProps;return t=function(w){wz(E,w);function E(P){var j;return j=w.call(this,P)||this,j._instanceProps=h(j.props,Fn(j)),j._outerRef=void 0,j._resetIsScrollingTimeoutId=null,j.state={instance:Fn(j),isScrolling:!1,scrollDirection:"forward",scrollOffset:typeof j.props.initialScrollOffset=="number"?j.props.initialScrollOffset:0,scrollUpdateWasRequested:!1},j._callOnItemsRendered=void 0,j._callOnItemsRendered=DF(function(D,k,z,V){return j.props.onItemsRendered({overscanStartIndex:D,overscanStopIndex:k,visibleStartIndex:z,visibleStopIndex:V})}),j._callOnScroll=void 0,j._callOnScroll=DF(function(D,k,z){return j.props.onScroll({scrollDirection:D,scrollOffset:k,scrollUpdateWasRequested:z})}),j._getItemStyle=void 0,j._getItemStyle=function(D){var k=j.props,z=k.direction,V=k.itemSize,G=k.layout,K=j._getItemStyleCache(m&&V,m&&G,m&&z),Z;if(K.hasOwnProperty(D))Z=K[D];else{var te=r(j.props,D,j._instanceProps),se=o(j.props,D,j._instanceProps),le=z==="horizontal"||G==="horizontal",pe=z==="rtl",me=le?te:0;K[D]=Z={position:"absolute",left:pe?void 0:me,right:pe?me:void 0,top:le?0:te,height:le?"100%":se,width:le?se:"100%"}}return Z},j._getItemStyleCache=void 0,j._getItemStyleCache=DF(function(D,k,z){return{}}),j._onScrollHorizontal=function(D){var k=D.currentTarget,z=k.clientWidth,V=k.scrollLeft,G=k.scrollWidth;j.setState(function(K){if(K.scrollOffset===V)return null;var Z=j.props.direction,te=V;if(Z==="rtl")switch(Mtt()){case"negative":te=-V;break;case"positive-descending":te=G-z-V;break}return te=Math.max(0,Math.min(te,G-z)),{isScrolling:!0,scrollDirection:K.scrollOffset<te?"forward":"backward",scrollOffset:te,scrollUpdateWasRequested:!1}},j._resetIsScrollingDebounced)},j._onScrollVertical=function(D){var k=D.currentTarget,z=k.clientHeight,V=k.scrollHeight,G=k.scrollTop;j.setState(function(K){if(K.scrollOffset===G)return null;var Z=Math.max(0,Math.min(G,V-z));return{isScrolling:!0,scrollDirection:K.scrollOffset<Z?"forward":"backward",scrollOffset:Z,scrollUpdateWasRequested:!1}},j._resetIsScrollingDebounced)},j._outerRefSetter=function(D){var k=j.props.outerRef;j._outerRef=D,typeof k=="function"?k(D):k!=null&&typeof k=="object"&&k.hasOwnProperty("current")&&(k.current=D)},j._resetIsScrollingDebounced=function(){j._resetIsScrollingTimeoutId!==null&&Ttt(j._resetIsScrollingTimeoutId),j._resetIsScrollingTimeoutId=U5r(j._resetIsScrolling,B5r)},j._resetIsScrolling=function(){j._resetIsScrollingTimeoutId=null,j.setState({isScrolling:!1},function(){j._getItemStyleCache(-1,null)})},j}E.getDerivedStateFromProps=function(j,D){return H5r(j,D),y(j),null};var A=E.prototype;return A.scrollTo=function(j){j=Math.max(0,j),this.setState(function(D){return D.scrollOffset===j?null:{scrollDirection:D.scrollOffset<j?"forward":"backward",scrollOffset:j,scrollUpdateWasRequested:!0}},this._resetIsScrollingDebounced)},A.scrollToItem=function(j,D){D===void 0&&(D="auto");var k=this.props,z=k.itemCount,V=k.layout,G=this.state.scrollOffset;j=Math.max(0,Math.min(j,z-1));var K=0;if(this._outerRef){var Z=this._outerRef;V==="vertical"?K=Z.scrollWidth>Z.clientWidth?Itt():0:K=Z.scrollHeight>Z.clientHeight?Itt():0}this.scrollTo(i(this.props,j,D,G,this._instanceProps,K))},A.componentDidMount=function(){var j=this.props,D=j.direction,k=j.initialScrollOffset,z=j.layout;if(typeof k=="number"&&this._outerRef!=null){var V=this._outerRef;D==="horizontal"||z==="horizontal"?V.scrollLeft=k:V.scrollTop=k}this._callPropsCallbacks()},A.componentDidUpdate=function(){var j=this.props,D=j.direction,k=j.layout,z=this.state,V=z.scrollOffset,G=z.scrollUpdateWasRequested;if(G&&this._outerRef!=null){var K=this._outerRef;if(D==="horizontal"||k==="horizontal"){if(D==="rtl")switch(Mtt()){case"negative":K.scrollLeft=-V;break;case"positive-ascending":K.scrollLeft=V;break;default:var Z=K.clientWidth,te=K.scrollWidth;K.scrollLeft=te-Z-V;break}else K.scrollLeft=V;}else K.scrollTop=V}this._callPropsCallbacks()},A.componentWillUnmount=function(){this._resetIsScrollingTimeoutId!==null&&Ttt(this._resetIsScrollingTimeoutId)},A.render=function(){var j=this.props,D=j.children,k=j.className,z=j.direction,V=j.height,G=j.innerRef,K=j.innerElementType,Z=j.innerTagName,te=j.itemCount,se=j.itemData,le=j.itemKey,pe=le===void 0?V5r:le,me=j.layout,_e=j.outerElementType,de=j.outerTagName,Ce=j.style,Ye=j.useIsScrolling,rt=j.width,ct=this.state.isScrolling,qe=z==="horizontal"||me==="horizontal",lt=qe?this._onScrollHorizontal:this._onScrollVertical,bt=this._getRangeToRender(),Tt=bt[0],et=bt[1],pt=[];if(te>0)for(var ot=Tt;ot<=et;ot++)pt.push((0,MT.createElement)(D,{data:se,key:pe(ot,se),index:ot,isScrolling:Ye?ct:void 0,style:this._getItemStyle(ot)}));var We=n(this.props,this._instanceProps);return(0,MT.createElement)(_e||de||"div",{className:k,onScroll:lt,ref:this._outerRefSetter,style:yo({position:"relative",height:V,width:rt,overflow:"auto",WebkitOverflowScrolling:"touch",willChange:"transform",direction:z},Ce)},(0,MT.createElement)(K||Z||"div",{children:pt,ref:G,style:{height:qe?"100%":We,pointerEvents:ct?"none":void 0,width:qe?We:"100%"}}))},A._callPropsCallbacks=function(){if(typeof this.props.onItemsRendered=="function"){var j=this.props.itemCount;if(j>0){var D=this._getRangeToRender(),k=D[0],z=D[1],V=D[2],G=D[3];this._callOnItemsRendered(k,z,V,G)}}if(typeof this.props.onScroll=="function"){var K=this.state,Z=K.scrollDirection,te=K.scrollOffset,se=K.scrollUpdateWasRequested;this._callOnScroll(Z,te,se)}},A._getRangeToRender=function(){var j=this.props,D=j.itemCount,k=j.overscanCount,z=this.state,V=z.isScrolling,G=z.scrollDirection,K=z.scrollOffset;if(D===0)return[0,0,0,0];var Z=a(this.props,K,this._instanceProps),te=c(this.props,Z,K,this._instanceProps),se=!V||G==="backward"?Math.max(1,k):1,le=!V||G==="forward"?Math.max(1,k):1;return[Math.max(0,Z-se),Math.max(0,Math.min(D-1,te+le)),Z,te]},E}(MT.PureComponent),t.defaultProps={direction:"ltr",itemData:void 0,layout:"vertical",overscanCount:2,useIsScrolling:!1},t}var H5r=function(t,r){var n=t.children,o=t.direction,i=t.height,a=t.layout,c=t.innerTagName,h=t.outerTagName,m=t.width,y=r.instance;if(0)var w};var NF=G5r({getItemOffset:function(t,r){var n=t.itemSize;return r*n},getItemSize:function(t,r){var n=t.itemSize;return n},getEstimatedTotalSize:function(t){var r=t.itemCount,n=t.itemSize;return n*r},getOffsetForIndexAndAlignment:function(t,r,n,o,i,a){var c=t.direction,h=t.height,m=t.itemCount,y=t.itemSize,w=t.layout,E=t.width,A=c==="horizontal"||w==="horizontal",P=A?E:h,j=Math.max(0,m*y-P),D=Math.min(j,r*y),k=Math.max(0,r*y-P+y+a);switch(n==="smart"&&(o>=k-P&&o<=D+P?n="auto":n="center"),n){case"start":return D;case"end":return k;case"center":{var z=Math.round(k+(D-k)/2);return z<Math.ceil(P/2)?0:z>j+Math.floor(P/2)?j:z}case"auto":default:return o>=k&&o<=D?o:o<k?k:D}},getStartIndexForOffset:function(t,r){var n=t.itemCount,o=t.itemSize;return Math.max(0,Math.min(n-1,Math.floor(r/o)))},getStopIndexForStartIndex:function(t,r,n){var o=t.direction,i=t.height,a=t.itemCount,c=t.itemSize,h=t.layout,m=t.width,y=o==="horizontal"||h==="horizontal",w=r*c,E=y?m:i,A=Math.ceil((E+n-w)/c);return Math.max(0,Math.min(a-1,r+A-1))},initInstanceProps:function(t){},shouldResetStyleCacheOnItemSizeChange:!0,validateProps:function(t){var r=t.itemSize}});u();var Att=Q(De());function W5r(e){var t=e.lastRenderedStartIndex,r=e.lastRenderedStopIndex,n=e.startIndex,o=e.stopIndex;return!(n>r||o<t)}function $5r(e){for(var t=e.isItemLoaded,r=e.itemCount,n=e.minimumBatchSize,o=e.startIndex,i=e.stopIndex,a=[],c=null,h=null,m=o;m<=i;m++){var y=t(m);y?h!==null&&(a.push(c,h),c=h=null):(h=m,c===null&&(c=m))}if(h!==null){for(var w=Math.min(Math.max(h,c+n-1),r-1),E=h+1;E<=w&&!t(E);E++)h=E;a.push(c,h)}if(a.length)for(;a[1]-a[0]+1<n&&a[0]>0;){var A=a[0]-1;if(!t(A))a[0]=A;else break}return a}var Y5r=function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")},Z5r=function(){function e(t,r){for(var n=0;n<r.length;n++){var o=r[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),K5r=function(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)},Ctt=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t&&(typeof t=="object"||typeof t=="function")?t:e},X5r=function(e){K5r(t,e);function t(){var r,n,o,i;Y5r(this,t);for(var a=arguments.length,c=Array(a),h=0;h<a;h++)c[h]=arguments[h];return i=(n=(o=Ctt(this,(r=t.__proto__||Object.getPrototypeOf(t)).call.apply(r,[this].concat(c))),o),o._lastRenderedStartIndex=-1,o._lastRenderedStopIndex=-1,o._memoizedUnloadedRanges=[],o._onItemsRendered=function(m){var y=m.visibleStartIndex,w=m.visibleStopIndex;o._lastRenderedStartIndex=y,o._lastRenderedStopIndex=w,o._ensureRowsLoaded(y,w)},o._setRef=function(m){o._listRef=m},n),Ctt(o,i)}return Z5r(t,[{key:"resetloadMoreItemsCache",value:function(){var n=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!1;this._memoizedUnloadedRanges=[],n&&this._ensureRowsLoaded(this._lastRenderedStartIndex,this._lastRenderedStopIndex)}},{key:"componentDidMount",value:function(){}},{key:"render",value:function(){var n=this.props.children;return n({onItemsRendered:this._onItemsRendered,ref:this._setRef})}},{key:"_ensureRowsLoaded",value:function(n,o){var i=this.props,a=i.isItemLoaded,c=i.itemCount,h=i.minimumBatchSize,m=h===void 0?10:h,y=i.threshold,w=y===void 0?15:y,E=$5r({isItemLoaded:a,itemCount:c,minimumBatchSize:m,startIndex:Math.max(0,n-w),stopIndex:Math.min(c-1,o+w)});(this._memoizedUnloadedRanges.length!==E.length||this._memoizedUnloadedRanges.some(function(A,P){return E[P]!==A}))&&(this._memoizedUnloadedRanges=E,this._loadUnloadedRanges(E))}},{key:"_loadUnloadedRanges",value:function(n){for(var o=this,i=this.props.loadMoreItems||this.props.loadMoreRows,a=function(m){var y=n[m],w=n[m+1],E=i(y,w);E!=null&&E.then(function(){if(W5r({lastRenderedStartIndex:o._lastRenderedStartIndex,lastRenderedStopIndex:o._lastRenderedStopIndex,startIndex:y,stopIndex:w})){if(o._listRef==null)return;typeof o._listRef.resetAfterIndex=="function"?o._listRef.resetAfterIndex(y,!0):(typeof o._listRef._getItemStyleCache=="function"&&o._listRef._getItemStyleCache(-1),o._listRef.forceUpdate())}})},c=0;c<n.length;c+=2)a(c)}}]),t}(Att.PureComponent),Ott=X5r;u();var grt=Q(De(),1);u();var h4=Q(De(),1);u();var ko=Q(De(),1),Mp=Q(It(),1);var d4=Q(Xse(),1);u();var irt=(e,t)=>e.findIndex(r=>r.getId()===t.getId())!==-1,ZLr="http://www.deutschefotothek.de/images/noimage/image120.jpg",f4=e=>e.getType()===go.VECTOR_MAP?mr.getSettings().FALLBACK_THUMBNAIL:ZLr,qF=e=>{let t=e.getMetadata(Ue.thumbnailUrl);return!Te(t)||t===""?f4(e):t.replace("http:","")};var art=({children:e,data:t,index:r,onClick:n,onMouseEnter:o,onMouseLeave:i,style:a})=>{var le;let{direction:c,maps:h}=t,m=(le=h[r])!=null?le:Cb,y=_t(jn),[w,E]=(0,ko.useState)(!1),{displayTime:A,sortTime:P}=(0,ko.useMemo)(()=>({displayTime:m.getDisplayTime(),sortTime:m.getSortTime()}),[m]),j=(0,ko.useMemo)(()=>qF(m),[m]),D=(0,ko.useMemo)(()=>f4(m),[m]),k=()=>{n(m)},z=pe=>{pe.key==="Enter"&&k()},V=(0,ko.useCallback)(()=>{j!==""&&j!==D&&E(!0)},[j,D]);(0,ko.useEffect)(()=>{E(!1)},[m.getId()]);let G=m===Cb,K=irt(y,m)&&!G,Z=m.getMetadata(Ue.mapScale)==="0"||m.getMetadata(Ue.mapScale)===0?fe("mapsearch-listelement-unknown"):`1:${m.getMetadata(Ue.mapScale)}`,te=m.getMetadata(Ue.type)===go.MOSAIC_MAP,se=m.getMetadata(Ue.type)===go.VECTOR_MAP;return ko.default.createElement("li",{tabIndex:0,style:a,className:jt("vkf-mapsearch-record",m.getMetadata(Ue.type),K&&"selected",c,G&&"loading"),id:m.getMetadata(Ue.id),onClick:G?void 0:k,onKeyDown:G?void 0:z,onMouseEnter:o,onMouseLeave:i},e,ko.default.createElement("span",{className:"data-col time"},isNaN(P)?"":P),ko.default.createElement("span",{className:"data-col title"},m.getMetadata(Ue.title)),ko.default.createElement("span",{className:"data-col time"},"1"),ko.default.createElement("div",{className:"view-item"},ko.default.createElement("span",{className:"thumbnail",href:"#"},G?ko.default.createElement(d4.default.default,{height:"calc(100% - 6px)"}):ko.default.createElement(ko.default.Fragment,null,ko.default.createElement("img",{alt:`Thumbnail Image of Map ${m.getMetadata(Ue.title)} ${A}`,onError:V,src:w?D:j}),te&&ko.default.createElement("span",{className:jt("mosaic-badge",K&&"selected")},fe("mosaic-badge-title")),se&&ko.default.createElement("span",{className:jt("vector-badge",K&&"selected")},fe("vector-badge-title"))),K&&ko.default.createElement("span",{className:"badge selected-badge"},ko.default.createElement("span",{className:"glyphicon glyphicon-ok"})," ")),ko.default.createElement("div",{className:"overview"},ko.default.createElement("h2",null,G?ko.default.createElement(d4.default.default,null):m.getMetadata(Ue.title)),ko.default.createElement("div",{className:"details"},ko.default.createElement("div",{className:"timestamp"},G?ko.default.createElement(d4.default.default,null):`${fe("mapsearch-listelement-time")} ${A}`),!se&&ko.default.createElement("div",{className:"scale"},G?ko.default.createElement(d4.default.default,null):`${fe("mapsearch-listelement-scale")} ${Z}`),!m.getMetadata(Ue.hasGeoReference)&&ko.default.createElement("div",{className:"georeference"},fe("mapsearch-listelement-no-georef"))))))};art.propTypes={children:Mp.default.element,data:Mp.default.shape({direction:Mp.default.oneOf(["horizontal","vertical"]),feature:Mp.default.object,is3d:Mp.default.bool,maps:Mp.default.object,selected:Mp.default.bool}),onClick:Mp.default.func,onMouseEnter:Mp.default.func,onMouseLeave:Mp.default.func,index:Mp.default.number,style:Mp.default.object};var Jse=art;var srt=e=>{var h;let{data:t,index:r}=e,{maps:n}=t,o=_t(Qt),i=(h=n[r])!=null?h:Cb,a=(0,h4.useCallback)(()=>{Te(o)&&poe(o,i.getPreviewFeature())},[o,i]),c=(0,h4.useCallback)(()=>{Te(o)&&poe(o,{type:"FeatureCollection",features:[]})},[o,i]);return h4.default.createElement(Jse,Se({onMouseEnter:a,onMouseLeave:c},e))};srt.propTypes=Se({},Jse.propTypes);var Qse=srt;u();var KLr=e=>vt(null,null,function*(){var t;try{let r=yield Ya.get(`${e}/tilemapresource.xml`),n=new DOMParser().parseFromString(r.data,"text/xml"),o=n.getElementsByTagName("BoundingBox")[0],i=[o.getAttribute("minx"),o.getAttribute("miny"),o.getAttribute("maxx"),o.getAttribute("maxy")].map(parseFloat),a=n.getElementsByTagName("TileSet"),c=(t=parseInt(n.getElementsByTagName("TileFormat")[0].getAttribute("width")))!=null?t:256;return{bounds:i,maxZoom:a.length-1,tileSize:c}}catch(r){return console.error("Error fetching or parsing XML:",r),null}}),AT=e=>vt(null,null,function*(){let t=e.getMetadata(Ue.tmsUrls),r=e.getMetadata(Ue.onlineResources).find(i=>i.type==="WMS").url,n=Array.isArray(t)&&t.length>0,o;if(n){let{maxZoom:i,bounds:a,tileSize:c}=yield KLr(t[0]);o={bounds:a,tileSize:c,maxzoom:i,tiles:t.map(h=>`${h}/{z}/{x}/{y}.png`),scheme:"tms"}}else{let i=yield yF(r);o={tiles:[pse(i[0])]}}return o});u();u();var lrt=(e,t)=>vt(null,null,function*(){return(yield mr.getGeoreferenceApiClient().post("/vector_maps/",Se({geojson:e},t))).data.id}),urt=(e,t,r,n)=>vt(null,null,function*(){let o=mr.getGeoreferenceApiClient(),i=`/vector_maps/${e}`;return(yield o.patch(i,{geojson:t,metadata:r,current_version:n})).data.version}),crt=e=>vt(null,null,function*(){let t=mr.getGeoreferenceApiClient(),r=`/vector_maps/${e}`;return(yield t.get(r)).data}),prt=e=>vt(null,null,function*(){let t=mr.getGeoreferenceApiClient(),r=`/vector_maps/${e}`;return(yield t.delete(r)).data}),frt=e=>vt(null,null,function*(){let t=mr.getGeoreferenceApiClient(),r=`/vector_maps/${e}/versions`;return(yield t.get(r)).data}),drt=(e,t)=>vt(null,null,function*(){let r=mr.getGeoreferenceApiClient(),n=`/vector_maps/${e}/versions/${t}`;return(yield r.get(n)).data}),hrt=e=>vt(null,null,function*(){let t=mr.getGeoreferenceApiClient(),r=`/vector_maps/${e}/roles`;return(yield t.get(r)).data}),mrt=(e,t)=>vt(null,null,function*(){let r=mr.getGeoreferenceApiClient(),n=`/vector_maps/${e}/roles`;return(yield r.patch(n,Se({},t))).data});var XLr=e=>vt(null,null,function*(){let t=e.getMetadata(Ue.externalContentUrl),r={accept:"application/json"},n=yield Ya.get(t,{headers:r}),o=Wo.toApplicationState(n.data);e.setGeoJson(o)}),JLr=e=>vt(null,null,function*(){let t=yield crt(e.getMetadata(Ue.vectorMapId));e.updateMetadata(Ue.userRole,t[Ue.userRole]),e.updateMetadata(Ue.version,t[Ue.version]);let r=Wo.toApplicationState(t.geojson);e.setGeoJson(r)}),OT=e=>vt(null,null,function*(){if(e.isExternalVectorMap()){yield XLr(e);return}yield JLr(e)});var QLr=()=>ir(({snapshot:e,set:t})=>r=>vt(null,null,function*(){let n=yield e.getPromise(jn),o=yield e.getPromise(Qt);t(tl,void 0);let i=n.find(c=>c.getId()===r.getId());if(i){t(jn,n.filter(c=>c.getId()!==r.getId())),i.removeMapLibreLayers(o);return}if(r.getMetadata(Ue.type)===go.VECTOR_MAP)yield OT(r),r.addLayerToMap(o),t(jn,c=>c.concat(r));else{let c=yield AT(r);r.addLayerToMap(o,{sourceSettings:c}),t(jn,h=>h.concat(r))}})),vrt=e=>{let t=QLr();return grt.default.createElement(Qse,Se({onClick:t},e))};vrt.propTypes=Se({},Qse.propTypes);var yrt=vrt;u();var N0=Q(It(),1),Kd=Q(De(),1);u();var D0=Q(De(),1),m4=Q(It(),1);var e3r=e=>e===$u.ASCENDING?$u.DESCENDING:$u.ASCENDING,_rt=({label:e,sortOrder:t,sortKey:r,onClick:n})=>{let o=(0,D0.useCallback)(()=>{let a=e3r(t);n(r,a)},[r,t,n]),i=(0,D0.useCallback)(a=>{a.key==="Enter"&&o()},[o]);return D0.default.createElement("div",{className:jt("inner-col",r)},D0.default.createElement("div",{className:jt("sort-element",r,t),onClick:o,onKeyDown:i,tabIndex:0},e,D0.default.createElement("span",{className:"caret-container"},D0.default.createElement("span",{className:"caret caret-reversed"}))))};_rt.propTypes={label:m4.default.string.isRequired,sortOrder:m4.default.string.isRequired,sortKey:m4.default.string.isRequired,onClick:m4.default.func.isRequired};var brt=_rt;var $u={ASCENDING:"ascending",DESCENDING:"descending"},xrt=({sortColumns:e,onUpdateSortOrder:t,defaultSortKey:r="title",defaultSortOrder:n=$u.ASCENDING})=>{let[o,i]=(0,Kd.useState)(r),[a,c]=(0,Kd.useState)(n),h=(0,Kd.useCallback)((m,y)=>{i(m),c(y),t(m,y)},[t,a]);return Kd.default.createElement("div",{className:"vkf-sort-control-root"},Kd.default.createElement("div",{className:"list-header"},Kd.default.createElement("strong",{className:"list-label"},fe("mapsearch-sorting"),":"),Kd.default.createElement("div",{className:"inner-columns"},e.map(({sortKey:m,label:y})=>Kd.default.createElement(brt,{key:m,onClick:h,sortOrder:o===m?a:"",sortKey:m,label:y})))))};xrt.propTypes={sortColumns:N0.default.arrayOf(N0.default.shape({sortKey:N0.default.string,label:N0.default.string})).isRequired,onUpdateSortOrder:N0.default.func,defaultSortKey:N0.default.string,defaultSortOrder:N0.default.oneOf([$u.ASCENDING,$u.DESCENDING])};var zF=xrt;var Cb=new Rg({metadata:{has_georeference:!0,map_scale:"0",thumb_url:"",[Ue.timePeriod]:[],title:"Loading"}}),FF=({direction:e="vertical",itemSize:t=110,ListItemComponent:r=yrt,minimumBatchSize:n,onFetchResults:o,onUpdateSortType:i,renderHeader:a=!0,searchResultDescriptor:{itemCount:c,id:h}})=>{let m=_t(p$e),[y,w]=(0,Es.useState)({}),E=(0,Es.useMemo)(()=>[{sortKey:"map_scale",label:fe("mapsearch-map_scale")},{sortKey:"time_period_start",label:fe("mapsearch-time")},{sortKey:"title",label:fe("mapsearch-title")}],[]),A=(0,Es.useRef)(!1),P=(0,Es.useRef)(),j=(0,Es.useRef)(),{height:D,width:k}=iP(j),z=(0,Es.useCallback)(G=>!A.current&&y[G]!==void 0&&y[G]!==Cb,[y]),V=(0,Es.useCallback)((G,K)=>{if(G!==void 0&&K!==void 0){let Z=K-G+1;return o(G,Z).then(te=>{te&&w(se=>{let le=A.current?{}:Object.assign({},se);return A.current=!1,te.forEach((pe,me)=>{le[G+me]=pe}),le})})}},[o]);return(0,Es.useEffect)(()=>{Cb.updateMetadata("title",fe("mapsearch-listelement-loading"))},[]),(0,Es.useEffect)(()=>{A.current=!0,P.current.resetloadMoreItemsCache(!0)},[h]),Es.default.createElement("div",{className:jt("vkf-mapsearch-result-list",e)},a&&Es.default.createElement(zF,{sortColumns:E,onUpdateSortOrder:i,defaultSortKey:ele,defaultSortOrder:tle}),Es.default.createElement("div",{className:"mapsearch-contentlist-container",ref:j},Es.default.createElement(Ott,{isItemLoaded:z,itemCount:c,loadMoreItems:V,minimumBatchSize:n,ref:P},({onItemsRendered:G,ref:K})=>Es.default.createElement(NF,{height:D,innerElementType:"ul",itemCount:c,itemSize:t,itemData:{direction:e,maps:y,is3d:m},layout:e,onItemsRendered:G,ref:K,width:k},r))))};FF.propTypes={direction:zc.default.oneOf(["horizontal","vertical"]),itemSize:zc.default.number,minimumBatchSize:zc.default.number,ListItemComponent:zc.default.elementType,renderHeader:zc.default.bool,onFetchResults:zc.default.func,onUpdateSortType:zc.default.func,searchResultDescriptor:zc.default.shape({id:zc.default.number,itemCount:zc.default.number}),sortSettings:zc.default.shape({activeType:zc.default.string,sortOrder:zc.default.string})};var ele="title",tle=$u.ASCENDING,wrt=o=>{var i=o,{customQuery:e,DataProvider:t,enableOverlayLayer:r=!0}=i,n=En(i,["customQuery","DataProvider","enableOverlayLayer"]);let[a,c]=(0,Xd.useState)({activeType:ele,sortOrder:tle}),h=(0,Xd.useCallback)((y,w)=>{c({sortOrder:w,activeType:y})},[]);return Xd.default.createElement(Xd.Fragment,null,r&&Xd.default.createElement(bHe,null),Xd.default.createElement(t,{customQuery:e,renderConsumer:y=>Xd.default.createElement(FF,Se(Se({onUpdateSortType:h},n),y)),sortSettings:a}))};wrt.propTypes=Se({DataProvider:rle.default.elementType.isRequired,enableOverlayLayer:rle.default.bool},FF.propTypes);var UF=wrt;u();var ole=Q(De(),1),ile=Q(It(),1);u();var nle=Q(De(),1),BF=Q(It(),1);var Ert=({name:e,color:t,size:r})=>nle.default.createElement("svg",{viewBox:"0 0 24 24",className:`icon ${e}`,fill:t,width:r,height:r},nle.default.createElement("use",{xlinkHref:`${mr.getSettings().ICON_SPRITE}#${e}`}));Ert.propTypes={name:BF.default.string.isRequired,color:BF.default.string,size:BF.default.number};var hu=Ert;var Srt=({onClick:e,isOpen:t})=>{let r=_t(wf);return ole.default.createElement("button",{className:jt("vkf-toggle-facets",r.facets.length>0&&"active"),onClick:e,title:fe(`mapsearch-facetedsearch-${t?"close":"open"}`)},ole.default.createElement(hu,{name:"icon-filter"}))};Srt.propTypes={isOpen:ile.default.bool,onClick:ile.default.func};var VF=Srt;u();var cm=Q(De(),1);var t3r=()=>cm.default.createElement("div",{className:"lds-roller"},cm.default.createElement("div",null),cm.default.createElement("div",null),cm.default.createElement("div",null),cm.default.createElement("div",null),cm.default.createElement("div",null),cm.default.createElement("div",null),cm.default.createElement("div",null),cm.default.createElement("div",null)),GF=t3r;u();var Vl=Q(De(),1),L0=Q(It(),1);u();var r3r=function(e){let t=[],r={bool:{should:t}};for(let n=0;n<e.length;n++){let o=e[n],i={term:{}};i.term[o.key]=o.value.toLowerCase(),t.push(i)}return r},Trt=function(e,t){return{aggs:{minYear:{min:{field:e}},maxYear:{max:{field:t}}}}},n3r=function(e,t){return{bool:{should:t.map(n=>({geo_shape:{[e]:{relation:"intersects",shape:{type:"polygon",coordinates:n}}}}))}}},Irt=function({timePeriodStartFieldName:e,timePeriodEndFieldName:t,timeValues:r,geometrySearchFieldName:n,geometrySearchPolygons:o,sortFieldName:i,sortValue:a,facets:c,customQueryExtension:h}){let[m,y]=r;return{query:{bool:{filter:[{range:{[e]:{lte:y}}},{range:{[t]:{gte:m}}},n3r(n,o),r3r(c),{term:{has_georeference:!0}},...(h||[])],must:[{match_all:{}}]}},sort:{[i]:{order:a}}}};u();u();var Grt=Q(Vrt(),1);function Hrt(e,t={}){t.concavity=t.concavity||1/0;let r=[];if($O(e,o=>{r.push([o[0],o[1]])}),!r.length)return null;let n=(0,Grt.default)(r,t.concavity);return n.length>3?THe([n]):null}var ZF={height:15,width:15},Wrt={height:15,width:0},KF={width:340},hle={width:340},$rt=(e,t,r)=>{let{map:n}=e,o=r<=2?30:r<=3.5?20:r<=5?10:5,i,a,c,h;t===Sc.VERTICAL?(i=0,a=n.height,c=n.width,h=0):(i=0+KF.width+ZF.width,a=n.height-Wrt.height-ZF.height,c=n.width-hle.width-ZF.width,h=Wrt.height+ZF.height);let m=(c-i)/o,y=(h-a)/o,w=[];for(let E=0;E<o+1;E++)for(let A=0;A<o+1;A++)w.push([Math.round(i+E*m),Math.round(a+A*y)]);return w};function Yrt(e,t){let r=e.map(i=>t.unproject(i).wrap().toArray()),n=[],o=d3r(r);return mr.isDebug()&&o.forEach(i=>{i.forEach(a=>{n.push({type:"Feature",geometry:{type:"Point",coordinates:a}})})}),o.forEach(i=>{let a=Hrt(IHe(i.map(c=>SHe(c))));n.push(a)}),n}function d3r(e){let t=e.map(c=>c[0]),r=Math.min(...t);if(!(Math.max(...t)-r>180))return[e];let i=e.filter(c=>c[0]>=0);return[e.filter(c=>c[0]<0),i]}u();var Zrt=Q(It(),1),Krt=Q(De(),1);function Xrt({features:e}){let t=_t(Qt);return(0,Krt.useEffect)(()=>{if(!t||!e)return;let r={type:"FeatureCollection",features:e},n="debug-search-source",o="debug-search-layer";if(!t.getSource(n))t.addSource(n,{type:"geojson",data:r}),t.addLayer({id:`${o}-polygon-fill`,type:"fill",source:n,paint:{"fill-color":"#209173","fill-opacity":.4}}),t.addLayer({id:`${o}-polygon-outline`,type:"line",source:n,paint:{"line-color":"#209173","line-width":2}}),t.addLayer({id:`${o}-point`,type:"circle",source:n,paint:{"circle-radius":5,"circle-color":"#0f0f0f","circle-stroke-width":1,"circle-stroke-color":"#0f0f0f"}});else{console.log("Zoom: ",t.getZoom());let i=t.getSource(n);i&&(console.log(r),i.setData(r))}},[t,e]),null}Xrt.propTypes=Zrt.default.array.isRequired;var Jrt=Xrt;function h3r(e,t){return e.length!==t.length?!1:e.every((r,n)=>JSON.stringify(r)===JSON.stringify(t[n]))}var Qrt=({customQuery:e,minimumBatchSize:t=20,renderConsumer:r,sortSettings:n})=>{let{activeType:o,sortOrder:i}=n,a=_t(Xq),{facets:c}=_t(wf),h=_t(FS),m=_t(Qt),[y,w]=(0,Vl.useState)(void 0),E=Ir(Jq),A=Ir(US),[P,j]=mo(m0),[D,k]=mo(h0),[z,V]=(0,Vl.useState)({itemCount:10,id:Date.now()}),K=mr.getSettings().API_SEARCH,Z=(0,Vl.useCallback)(me=>{let _e=i===$u.ASCENDING?"asc":"desc",de=me.filter(Ce=>{var Ye;return((Ye=Ce==null?void 0:Ce.geometry)==null?void 0:Ye.type)==="Polygon"}).map(Ce=>Ce.geometry.coordinates);return Irt({timePeriodStartFieldName:"time_period_start",timePeriodEndFieldName:"time_period_end",timeValues:[`${D[0]}-01-01`,`${D[1]}-12-31`],geometrySearchFieldName:"geometry",geometrySearchPolygons:de,sortFieldName:o,sortValue:_e,facets:c,customQueryExtension:e})},[c,o,i,D]),te=(0,Vl.useCallback)((me,_e,de=!1)=>{if(y===void 0)return E(!1),new Promise(rt=>rt([]));let Ce=Z(y),Ye=K+"/_search?from="+me+"&size="+_e;return E(!0),Ya.post(Ye,Ce).then(rt=>{if(rt.status===200){let ct=rt.data;return de?ct:eYe(ct.hits.hits)}}).catch(rt=>{console.warn(rt)}).finally(()=>{E(!1)})},[Z,y]),se=(0,Vl.useCallback)(()=>{te(0,0,!0).then(me=>{let _e=me.hits.total.value;A(_e),V({itemCount:_e,id:Date.now()})})},[te]),le=v$e(se,30),pe=(0,Vl.useCallback)(()=>{if(Te(m)){let me=$rt(a,h,m.getZoom()),_e=Yrt(me,m);(y===void 0||!h3r(_e,y))&&w(_e)}},[m,y,a]);return(0,Vl.useEffect)(()=>{if(Te(m))return m.on("moveend",pe),()=>{m.off("moveend",pe)}},[m,pe]),(0,Vl.useEffect)(()=>{le()},[c,se,y,o,i,D]),(0,Vl.useEffect)(()=>{pe()},[a,m]),(0,Vl.useEffect)(()=>{let me=`${K}/_search?`,_e=Trt("time_period_start","time_period_end");Ya.post(me,_e,{}).then(de=>{if(de.status===200){let Ce=de.data,Ye=new Date(Ce.aggregations.maxYear.value),ct=[new Date(Ce.aggregations.minYear.value).getUTCFullYear(),Ye.getUTCFullYear()];(P===void 0||zoe===P||ct[0]!==P[0]||ct[1]!==P[1])&&(j(ct),k(ct))}})},[]),Vl.default.createElement(Vl.default.Fragment,null,r({minimumBatchSize:t,onRefresh:se,onFetchResults:te,searchResultDescriptor:z}),mr.isDebug()&&Vl.default.createElement(Jrt,{features:y}))};Qrt.propTypes={customQuery:L0.default.array,minimumBatchSize:L0.default.number,projection:L0.default.string,renderConsumer:L0.default.func,sortSettings:L0.default.shape({activeType:L0.default.string,sortOrder:L0.default.string})};var XF=Qrt;var JF=Q(It(),1),ent="EPSG:3857",tnt=({customQuery:e,MapSearchListItemComponent:t,mosaicMode:r})=>{let[n,o]=mo(wf),[i,a]=(0,Ss.useState)(!1),[c,h]=(0,Ss.useState)(!1),m=_t(Jq),y=_t(US),w=()=>{a(A=>!A)},E=()=>{o(c$e)};return(0,Ss.useEffect)(()=>{h(m)},[m]),Ss.default.createElement("div",{className:jt("mapsearch-container",i&&"facetedsearch-open")},Ss.default.createElement("div",{className:"panel panel-default searchTablePanel"},Ss.default.createElement("div",{className:"panel-heading"},Ss.default.createElement("div",{className:"content"},Ss.default.createElement("div",null,y===0?fe("mapsearch-found-no-maps"):`${y} ${fe("mapsearch-found-maps")}`),n.facets.length>0&&Ss.default.createElement("button",{className:"remove-filter",onClick:E},Ss.default.createElement(hu,{name:"icon-filter"})),c&&Ss.default.createElement("div",{className:"loading-spinner"},Ss.default.createElement(GF,null)),Ss.default.createElement(VF,{onClick:w,isOpen:i})),Ss.default.createElement("div",{className:"facet-container"},Ss.default.createElement(PF,{georeferenceMode:!1,mosaicMode:r}))),Ss.default.createElement("div",{className:"panel-body"},Ss.default.createElement(UF,{customQuery:e,DataProvider:XF,ListItemComponent:t}))))};tnt.propTypes={customQuery:JF.default.array,MapSearchListItemComponent:JF.default.elementType,mosaicMode:JF.default.bool};var rnt=tnt;var nnt=e=>typeof e=="string"||e instanceof String,m3r=e=>{if(e===void 0||!Array.isArray(e)||e.length<2)return!1;let[t,r,...n]=e;if(isNaN(t)||isNaN(r)||n.some(o=>isNaN(o)))return!1;if(!ont(t,r)){let[o,i]=mtt([t,r],ent);return ont(o,i)}return!0},ont=(e,t)=>e<=180&&e>=-180&&t<=90&&t>=-90,int=e=>{let{activeBasemapId:t,is3dEnabled:r,oid:n,operationalLayers:o,mapView:i}=e,a=!0;return a&&(a=t===void 0||nnt(t)),a&&(a=r===void 0||typeof r=="boolean"),a&&(a=n===void 0||nnt(n)||Array.isArray(n)),a&&(a=o===void 0||Array.isArray(o)),a&&(a=i===void 0||g3r(i,r)),a},g3r=e=>{let t,{bearing:r,center:n,pitch:o,zoom:i}=e;return t=n===void 0||m3r(n),t&&(t=o===void 0||!isNaN(o)&&o>=0),t&&(t=r===void 0||!isNaN(r)),t&&(t=i===void 0||!isNaN(i)),t};u();var v3r=Object.values(go);function ant(e){return vt(this,null,function*(){let w=e,{id:t,type:r,isVisible:n,opacity:o}=w,i=En(w,["id","type","isVisible","opacity"]),c={visibility:n?"visible":"none",opacity:o};if(!v3r.includes(r))throw console.error("Unknown layer type: ",r),new Error(`Layer type "${r}" not supported`);if(r===go.LEGACY_GEOJSON)return{layer:Voe(i),settings:{layerSettings:c}};if(r===go.VECTOR_MAP&&!Te(t)){if(!Te(i.properties)||!Te(i.geojson))throw new Error("Cannot restore local vector map layer without geojson or properties");return{layer:Voe(i),settings:{layerSettings:c}}}if(!Te(t))throw new Error("Cannot restore remote layers with missing id");let h=yield HS(t),m=aP(t,h),y={layer:m,settings:{layerSettings:c}};return r===go.HISTORIC_MAP&&(y.settings.sourceSettings=yield AT(m)),r===go.VECTOR_MAP&&(yield OT(m)),y})}u();var lnt=Q(jO(),1);var DT=24,QF=100,y3r={left:DT+KF.width+QF,right:DT+hle.width+QF,top:60,bottom:DT},_3r={left:50,right:50,top:75,bottom:150},b3r=e=>({padding:e===Sc.HORIZONTAL?y3r:_3r,animate:!1}),x3r={padding:{left:DT+KF.width*2+QF,right:QF,top:DT,bottom:DT},animate:!1},snt=e=>{let t=e;Array.isArray(e)||(t=[e]);let r=null;for(let n of t){let o=n.getMetadata(Ue.bounds);if(!Te(r)){r=new lnt.LngLatBounds(o);continue}r.extend(o)}return r},w3r=()=>{let e=ir(({snapshot:r})=>n=>vt(null,null,function*(){let o=yield r.getPromise(Qt),i=yield r.getPromise(FS),a=b3r(i);if(Te(o)){let c=snt(n);o.fitBounds(c,a)}}),[]),t=ir(({snapshot:r})=>n=>vt(null,null,function*(){let o=yield r.getPromise(Qt);if(Te(o)){let i=snt(n);o.fitBounds(i,x3r)}}),[]);return{zoomToExtent:e,zoomToExtentMosaicMap:t}},k0=w3r;var Goe="vk_persistence_container",cnt=()=>{let e=_t(Qt),[t,r]=(0,R0.useState)(void 0),n=Ir(xf),o=Ir(wf),i=Ir(Rs),a=Ir(jn),c=Ir(m0),h=Ir(h0),m=Ir(el),{zoomToExtent:y}=k0(),w=mr.getGeoreferenceApiClient(),[E]=zd(Goe,{operationalLayers:[],is3dEnabled:!1}),[A,P]=zd(xb,[]),j=(D,k="danger")=>{i({id:"persistence-controller",type:k,text:D})};return(0,R0.useEffect)(()=>{let Z=(0,unt.parse)(location.search,{arrayFormat:"comma",parseNumbers:!0}),{b:D,v:k,oid:z,map_id:V,map_view_id:G}=Z,K=En(Z,["b","v","oid","map_id","map_view_id"]);if(G!==void 0){let se=`/map_view/${G}`;w.get(se).then(le=>{let{map_view_json:pe}=le.data,de=JSON.parse(pe),{customBasemaps:me}=de,_e=En(de,["customBasemaps"]);me!==void 0&&me.length>0&&P(me.concat(A).filter((Ce,Ye,rt)=>rt.findIndex(ct=>ct.id===Ce.id)===Ye)),_e.mapView&&$$e(_e.mapView)&&(_e.mapView=lz(_e.mapView)),r(_e)})}else{let te=K$e(k),se={activeBasemapId:D,is3dEnabled:te,cameraOptions:X$e(K),oid:V$e(z,V),featureIdentifier:J$e(K)},le=!B$e(se)||z!==void 0;r(le?se:E)}},[]),(0,R0.useEffect)(()=>{if(t!==void 0){let{activeBasemapId:D,is3dEnabled:k,oid:z,operationalLayers:V,cameraOptions:G={},featureIdentifier:K}=t;if(!int(t)){j(fe("persistencecontroller-error-persistence-object"));return}try{if(D!==void 0&&n(D),e!==void 0){let Z=Object.assign({},mr.getDefaultMapView(),G);if(k&&e.enableVkfGlobeMode({initialZoom:Z.zoom}),e.jumpTo(Z),Z.legacy3dMapView){let te=e.getCanvas(),se=te.height,le=te.width,pe=e.unproject([le/2,se*.3]);e.setCenter(pe),j(fe("persistencecontroller-deprecated-3d-map-view"),"warning")}if(V!==void 0&&V.length>0&&z===void 0)try{let te=[];for(let se of V){let le=ant(se);te.push(le)}Promise.all(te).then(se=>{for(let{layer:pe,settings:me}of se)pe.addLayerToMap(e,me);let le=se.map(({layer:pe})=>pe);a(le)}).catch(se=>{throw new Error(se)})}catch(te){console.error(te),j(fe("persistencecontroller-error-persistence-object"))}else if(z!==void 0){let se=(Array.isArray(z)?z:[z]).map(le=>tYe(le));Promise.all(se).then(le=>{Promise.all(le.map(pe=>pe.getType()===go.VECTOR_MAP?OT(pe).then(()=>({layer:pe})):new Promise(me=>AT(pe).then(_e=>me({layer:pe,sourceSettings:_e}))))).then(pe=>{for(let{layer:me,sourceSettings:_e}of pe)me.addLayerToMap(e,{sourceSettings:_e});a(le),Te(K)&&m(K)}),(G===void 0||Object.entries(G).length===0)&&y(le)}).catch(le=>{console.error(le),j(fe("persistencecontroller-error-single-map"),"warning")})}}}catch(Z){console.error(Z),j(fe("persistencecontroller-error-persistence-object"))}}},[e,t]),(0,R0.useEffect)(()=>{if(t!==void 0){let{searchOptions:D}=t;if(D!==void 0){let{facets:k,timeExtent:z,timeRange:V}=D;k!==void 0&&o(k),V!==void 0&&c(V),z!==void 0&&h(z)}}},[t]),R0.default.createElement(Q$e,null)};u();var FD=Q(De(),1),nmt=Q(It(),1);u();var Dp=Q(De(),1);u();u();var ga=Q(De(),1);u();u();var Of=Q(De(),1),n7=Q(It(),1);u();u();var pnt=(e,t)=>!Te(e.properties)||!Te(e.properties[t])?"":e.properties[t].trim().toLowerCase(),fnt=e=>!Te(e.properties)||!Te(e.properties[Ln.time])?Number.NEGATIVE_INFINITY:e.properties[Ln.time][0],dnt=(e,t)=>(r,n)=>{let o=t===$u.ASCENDING?1:-1,i="",a="";return e===Ln.time?(i=fnt(r),a=fnt(n)):(i=pnt(r,e),a=pnt(n,e)),i>a?1*o:i<a?-1*o:0};u();var pm=Q(De(),1);var e7=Ln.title,t7=$u.ASCENDING,E3r=()=>{let e=Ir(gle),t=Ir(mle),r=(0,pm.useMemo)(()=>[{sortKey:Ln.time,label:fe("mapsearch-time")},{sortKey:Ln.title,label:fe("mapsearch-title")}],[]),n=(0,pm.useCallback)((o,i)=>{t(o),e(i)},[]);return(0,pm.useEffect)(()=>()=>{t(e7),e(t7)},[]),pm.default.createElement(pm.default.Fragment,null,pm.default.createElement(zF,{sortColumns:r,defaultSortKey:e7,defaultSortOrder:t7,onUpdateSortOrder:n}))},hnt=E3r;var Ts={INITIAL:1,FILTER:2,EDIT:3},j0=en({key:"geoJsonLayerViewViewModeState",default:Ts.INITIAL}),q0=en({key:"geoJsonLayerViewLayerState",default:null,dangerouslyAllowMutability:!0}),mnt=vs({key:"geoJsonLayerViewFeaturesState",get:({get:e})=>{var r,n;let t=e(q0);return e(d0),(n=(r=t==null?void 0:t.getGeoJson())==null?void 0:r.features)!=null?n:[]},dangerouslyAllowMutability:!0}),NT=en({key:"geoJsonLayerViewTimeExtentFilterState",default:null}),mle=en({key:"geoJsonLayerViewFeaturesSortKeyState",default:e7}),gle=en({key:"geoJsonLayerViewFeaturesSortOrderState",default:t7}),vle=vs({key:"geoJsonLayerViewTimeRangeState",get:({get:e})=>{var o;let t=e(mnt),r=Number.NaN,n=Number.NaN;for(let i of t){let a=(o=i.properties.time)!=null?o:[],[c,h]=a;!Kh(c)||!Kh(h)||(Number.isNaN(r)&&(r=c),Number.isNaN(n)&&(n=h),c<r&&(r=c),h>n&&(n=h))}return r===n?[]:Number.isNaN(r)||Number.isNaN(n)?[]:(r=KO(jg(r)),n=KO(jg(n)),[r,n])}}),r7=vs({key:"geoJsonLayerViewIsValidTimeRangeState",get:({get:e})=>e(vle).length===2}),g4=vs({key:"geoJsonLayerViewFilteredFeaturesState",get:({get:e})=>{let t=e(j0),r=e(mnt),n=e(mle),o=e(gle),i=dnt(n,o);if(t!==Ts.FILTER)return[...r].sort(i);let a=r,c=e(NT);if(c!==null){let[m,y]=c;a=a.filter(({properties:w})=>{var D;let[E,A]=(D=w==null?void 0:w.time)!=null?D:[],P=KO(jg(E)),j=KO(jg(A));return Number.isNaN(P)||Number.isNaN(j)?!0:P<=y&&j>=m})}return[...a].sort(i)}}),gnt=vs({key:"geoJsonLayerViewExistFilteredFeaturesState",get:({get:e})=>e(g4).length>0}),vnt=vs({key:"geoJsonLayerViewMapFilters",get:({get:e})=>{let t=e(j0),r=e(NT);return t!==Ts.FILTER||r===null?null:{timeExtent:r}}});var ynt=({className:e,onFeatureClick:t,FeatureItem:r})=>{let n=_t(g4),o=(0,Of.useMemo)(()=>({features:n,onFeatureClick:t}),[n,t]),i=(0,Of.useRef)(null),{height:a}=iP(i);return Of.default.createElement(Of.default.Fragment,null,Of.default.createElement("div",{className:e,ref:i},Of.default.createElement("div",{className:"geojson-layer-feature-list-container"},Of.default.createElement(hnt,null),n.length===0&&Of.default.createElement("div",{className:"no-feature-container"},fe("geojsonlayerpanel-no-features")),n.length>0&&Of.default.createElement(NF,{height:a,overscanCount:3,innerElementType:"ul",itemData:o,itemCount:n.length,width:340,itemSize:110},r))))};ynt.propTypes={className:n7.default.string,onFeatureClick:n7.default.func.isRequired,FeatureItem:n7.default.object.isRequired};var _nt=ynt;var bnt=_nt;u();u();var Jd=Q(De(),1),LT=Q(It(),1);var xnt=({extraButton:e,isEditAllowed:t=!0,title:r,onCloseClick:n,onEditClick:o})=>{let i=(0,Jd.useMemo)(()=>!Te(o),[o]);return Jd.default.createElement("div",{className:"geojson-panel-header-root"},Jd.default.createElement("div",{className:"header-buttons"},Te(e)&&e,!i&&Jd.default.createElement(rn,{disabled:!t,className:"edit-button",onClick:o,type:"edit"},Jd.default.createElement(Fr,{name:"edit"})),Jd.default.createElement(rn,{className:"close-button",onClick:n},Jd.default.createElement(Fr,{name:"close"}))),Jd.default.createElement("div",{className:"header-info"},Jd.default.createElement("span",{className:"header-title"},r)))};xnt.propTypes={extraButton:LT.default.node,isEditAllowed:LT.default.bool,title:LT.default.string.isRequired,onCloseClick:LT.default.func.isRequired,onEditClick:LT.default.func};var wnt=xnt;var Pf=wnt;u();u();var T3r=Q(De(),1),I3r=Q(ba(),1),Kco=Q(Xte(),1);u();var yle=Q(De(),1);u();u();var _le=Q(De(),1);u();var o7=Q(De(),1);u();var ble=Q(De(),1);var fm=mr;var rv="vk2-admin",v4="vk2-editor",i7="owner",Ent="editor",xle=()=>fm.getUserRole()===rv,Snt=()=>fm.getUserRole()===rv,Tnt=()=>fm.getUserRole()===rv,a7=()=>{let e=fm.getUserRole();return e===rv||e===v4},Int=e=>{if(!Te(e.getMetadata(Ue.vectorMapId)))return!0;let r=e.getMetadata(Ue.userRole),n=fm.getUserRole();return n===rv?!0:n===v4?r===Ent||r===i7:!1},s7=e=>{if(e===null)return!0;let{type:t,layerRole:r,id:n}=e;if(t===Za.LOCAL)return!0;let i=fm.getUserRole();return i===rv?!0:i===v4?r===i7||!Te(n):!1},Mnt=e=>{if(e===null)return!0;let{layerRole:t,id:r}=e,n=fm.getUserRole();return n===rv?!0:n===v4?(t===Ent||t===i7)&&Te(r):!1},y4=e=>{if(e===null)return!0;let{id:t}=e;return!!(fm.getUserRole()===rv&&Te(t))},_4=e=>{if(e===null)return!0;let{layerRole:t,id:r}=e,n=fm.getUserRole();return n===rv&&Te(r)?!0:n===v4?t===i7&&Te(r):!1};u();u();u();var vi=Q(De(),1),ym=Q(It(),1);u();u();u();function mu(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}u();function Cnt(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,L6(n.key),n)}}function gu(e,t,r){return t&&Cnt(e.prototype,t),r&&Cnt(e,r),Object.defineProperty(e,"prototype",{writable:!1}),e}u();function vu(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&YS(e,t)}u();u();function Qd(e){return Qd=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},Qd(e)}u();function wle(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(t){}return(wle=function(){return!!e})()}u();function Ant(e,t){if(t&&(No(t)=="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return Fn(e)}function yu(e){var t=wle();return function(){var r,n=Qd(e);if(t){var o=Qd(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return Ant(this,r)}}var Nle=Q(De());u();var Ele={},M3r=[],C3r=function(t){M3r.push(t)};function A3r(e,t){if(0)var r}function O3r(e,t){if(0)var r}function P3r(){Ele={}}function Ont(e,t,r){!t&&!Ele[r]&&(e(!1,r),Ele[r]=!0)}function l7(e,t){Ont(A3r,e,t)}function D3r(e,t){Ont(O3r,e,t)}l7.preMessage=C3r;l7.resetWarned=P3r;l7.noteOnce=D3r;var dm=l7;u();var Pnt=Q(De()),N3r=function(t){var r,n,o=t.className,i=t.included,a=t.vertical,c=t.style,h=t.length,m=t.offset,y=t.reverse;h<0&&(y=!y,h=Math.abs(h),m=100-m);var w=a?(r={},Zt(r,y?"top":"bottom","".concat(m,"%")),Zt(r,y?"bottom":"top","auto"),Zt(r,"height","".concat(h,"%")),r):(n={},Zt(n,y?"right":"left","".concat(m,"%")),Zt(n,y?"left":"right","auto"),Zt(n,"width","".concat(h,"%")),n),E=nr(nr({},c),w);return i?Pnt.default.createElement("div",{className:o,style:E}):null},u7=N3r;u();u();function Yu(e,t){if(e==null)return{};var r,n,o=WS(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(n=0;n<i.length;n++)r=i[n],t.indexOf(r)===-1&&{}.propertyIsEnumerable.call(e,r)&&(o[r]=e[r])}return o}u();u();u();function b4(e,t){(t==null||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}function Dnt(e){if(Array.isArray(e))return b4(e)}u();function Sle(e){if(typeof Symbol!="undefined"&&e[Symbol.iterator]!=null||e["@@iterator"]!=null)return Array.from(e)}u();function x4(e,t){if(e){if(typeof e=="string")return b4(e,t);var r={}.toString.call(e).slice(8,-1);return r==="Object"&&e.constructor&&(r=e.constructor.name),r==="Map"||r==="Set"?Array.from(e):r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?b4(e,t):void 0}}u();function Nnt(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Df(e){return Dnt(e)||Sle(e)||x4(e)||Nnt()}u();u();function Lnt(e,t){for(;!{}.hasOwnProperty.call(e,t)&&(e=Qd(e))!==null;);return e}function kT(){return kT=typeof Reflect!="undefined"&&Reflect.get?Reflect.get.bind():function(e,t,r){var n=Lnt(e,t);if(n){var o=Object.getOwnPropertyDescriptor(n,t);return o.get?o.get.call(arguments.length<3?e:r):o.value}},kT.apply(null,arguments)}var jT=Q(De());u();var Tle=Q(ba());function Zu(e,t,r,n){var o=Tle.default.unstable_batchedUpdates?function(a){Tle.default.unstable_batchedUpdates(r,a)}:r;return e!=null&&e.addEventListener&&e.addEventListener(t,o,n),{remove:function(){e!=null&&e.removeEventListener&&e.removeEventListener(t,o,n)}}}var Vnt=Q(Uo());u();var Ile=Q(De()),knt=Q(Uo());var L3r=function(t,r,n,o,i,a){dm(n?o>0:!0,"`Slider[step]` should be a positive number in order to make Slider[dots] work.");var c=Object.keys(r).map(parseFloat).sort(function(m,y){return m-y});if(n&&o)for(var h=i;h<=a;h+=o)c.indexOf(h)===-1&&c.push(h);return c},k3r=function(t){var r=t.prefixCls,n=t.vertical,o=t.reverse,i=t.marks,a=t.dots,c=t.step,h=t.included,m=t.lowerBound,y=t.upperBound,w=t.max,E=t.min,A=t.dotStyle,P=t.activeDotStyle,j=w-E,D=L3r(n,i,a,c,E,w).map(function(k){var z,V="".concat(Math.abs(k-E)/j*100,"%"),G=!h&&k===y||h&&k<=y&&k>=m,K=n?nr(nr({},A),{},Zt({},o?"top":"bottom",V)):nr(nr({},A),{},Zt({},o?"right":"left",V));G&&(K=nr(nr({},K),P));var Z=(0,knt.default)((z={},Zt(z,"".concat(r,"-dot"),!0),Zt(z,"".concat(r,"-dot-active"),G),Zt(z,"".concat(r,"-dot-reverse"),o),z));return Ile.default.createElement("span",{className:Z,style:K,key:k})});return Ile.default.createElement("div",{className:"".concat(r,"-step")},D)},Rnt=k3r;u();var c7=Q(De()),jnt=Q(Uo()),R3r=function(t){var r=t.className,n=t.vertical,o=t.reverse,i=t.marks,a=t.included,c=t.upperBound,h=t.lowerBound,m=t.max,y=t.min,w=t.onClickLabel,E=Object.keys(i),A=m-y,P=E.map(parseFloat).sort(function(j,D){return j-D}).map(function(j){var D,k=i[j],z=No(k)==="object"&&!c7.default.isValidElement(k),V=z?k.label:k;if(!V&&V!==0)return null;var G=!a&&j===c||a&&j<=c&&j>=h,K=(0,jnt.default)((D={},Zt(D,"".concat(r,"-text"),!0),Zt(D,"".concat(r,"-text-active"),G),D)),Z=Zt({marginBottom:"-50%"},o?"top":"bottom","".concat((j-y)/A*100,"%")),te=Zt({transform:"translateX(".concat(o?"50%":"-50%",")"),msTransform:"translateX(".concat(o?"50%":"-50%",")")},o?"right":"left","".concat((j-y)/A*100,"%")),se=n?Z:te,le=z?nr(nr({},se),k.style):se;return c7.default.createElement("span",{className:K,style:le,key:j,onMouseDown:function(me){return w(me,j)},onTouchStart:function(me){return w(me,j)}},V)});return c7.default.createElement("div",{className:r},P)},qnt=R3r;u();var Mle=Q(De()),znt=Q(Uo());var RT=function(e){vu(r,e);var t=yu(r);function r(){var n;return mu(this,r),n=t.apply(this,arguments),n.state={clickFocused:!1},n.setHandleRef=function(o){n.handle=o},n.handleMouseUp=function(){document.activeElement===n.handle&&n.setClickFocus(!0)},n.handleMouseDown=function(o){o.preventDefault(),n.focus()},n.handleBlur=function(){n.setClickFocus(!1)},n.handleKeyDown=function(){n.setClickFocus(!1)},n}return gu(r,[{key:"componentDidMount",value:function(){this.onMouseUpListener=Zu(document,"mouseup",this.handleMouseUp)}},{key:"componentWillUnmount",value:function(){this.onMouseUpListener&&this.onMouseUpListener.remove()}},{key:"setClickFocus",value:function(o){this.setState({clickFocused:o})}},{key:"clickFocus",value:function(){this.setClickFocus(!0),this.focus()}},{key:"focus",value:function(){this.handle.focus()}},{key:"blur",value:function(){this.handle.blur()}},{key:"render",value:function(){var o,i,a=this.props,c=a.prefixCls,h=a.vertical,m=a.reverse,y=a.offset,w=a.style,E=a.disabled,A=a.min,P=a.max,j=a.value,D=a.tabIndex,k=a.ariaLabel,z=a.ariaLabelledBy,V=a.ariaValueTextFormatter,G=Yu(a,["prefixCls","vertical","reverse","offset","style","disabled","min","max","value","tabIndex","ariaLabel","ariaLabelledBy","ariaValueTextFormatter"]),K=(0,znt.default)(this.props.className,Zt({},"".concat(c,"-handle-click-focused"),this.state.clickFocused)),Z=h?(o={},Zt(o,m?"top":"bottom","".concat(y,"%")),Zt(o,m?"bottom":"top","auto"),Zt(o,"transform",m?null:"translateY(+50%)"),o):(i={},Zt(i,m?"right":"left","".concat(y,"%")),Zt(i,m?"left":"right","auto"),Zt(i,"transform","translateX(".concat(m?"+":"-","50%)")),i),te=nr(nr({},w),Z),se=D||0;(E||D===null)&&(se=null);var le;return V&&(le=V(j)),Mle.default.createElement("div",yo({ref:this.setHandleRef,tabIndex:se},G,{className:K,style:te,onBlur:this.handleBlur,onKeyDown:this.handleKeyDown,onMouseDown:this.handleMouseDown,role:"slider","aria-valuemin":A,"aria-valuemax":P,"aria-valuenow":j,"aria-disabled":!!E,"aria-label":k,"aria-labelledby":z,"aria-valuetext":le}))}}]),r}(Mle.default.Component);u();var Unt=Q(ba());u();var Tn={MAC_ENTER:3,BACKSPACE:8,TAB:9,NUM_CENTER:12,ENTER:13,SHIFT:16,CTRL:17,ALT:18,PAUSE:19,CAPS_LOCK:20,ESC:27,SPACE:32,PAGE_UP:33,PAGE_DOWN:34,END:35,HOME:36,LEFT:37,UP:38,RIGHT:39,DOWN:40,PRINT_SCREEN:44,INSERT:45,DELETE:46,ZERO:48,ONE:49,TWO:50,THREE:51,FOUR:52,FIVE:53,SIX:54,SEVEN:55,EIGHT:56,NINE:57,QUESTION_MARK:63,A:65,B:66,C:67,D:68,E:69,F:70,G:71,H:72,I:73,J:74,K:75,L:76,M:77,N:78,O:79,P:80,Q:81,R:82,S:83,T:84,U:85,V:86,W:87,X:88,Y:89,Z:90,META:91,WIN_KEY_RIGHT:92,CONTEXT_MENU:93,NUM_ZERO:96,NUM_ONE:97,NUM_TWO:98,NUM_THREE:99,NUM_FOUR:100,NUM_FIVE:101,NUM_SIX:102,NUM_SEVEN:103,NUM_EIGHT:104,NUM_NINE:105,NUM_MULTIPLY:106,NUM_PLUS:107,NUM_MINUS:109,NUM_PERIOD:110,NUM_DIVISION:111,F1:112,F2:113,F3:114,F4:115,F5:116,F6:117,F7:118,F8:119,F9:120,F10:121,F11:122,F12:123,NUMLOCK:144,SEMICOLON:186,DASH:189,EQUALS:187,COMMA:188,PERIOD:190,SLASH:191,APOSTROPHE:192,SINGLE_QUOTE:222,OPEN_SQUARE_BRACKET:219,BACKSLASH:220,CLOSE_SQUARE_BRACKET:221,WIN_KEY:224,MAC_FF_META:224,WIN_IME:229,isTextModifyingKeyEvent:function(t){var r=t.keyCode;if(t.altKey&&!t.ctrlKey||t.metaKey||r>=Tn.F1&&r<=Tn.F12)return!1;switch(r){case Tn.ALT:case Tn.CAPS_LOCK:case Tn.CONTEXT_MENU:case Tn.CTRL:case Tn.DOWN:case Tn.END:case Tn.ESC:case Tn.HOME:case Tn.INSERT:case Tn.LEFT:case Tn.MAC_FF_META:case Tn.META:case Tn.NUMLOCK:case Tn.NUM_CENTER:case Tn.PAGE_DOWN:case Tn.PAGE_UP:case Tn.PAUSE:case Tn.PRINT_SCREEN:case Tn.RIGHT:case Tn.SHIFT:case Tn.UP:case Tn.WIN_KEY:case Tn.WIN_KEY_RIGHT:return!1;default:return!0}},isCharacterKey:function(t){if(t>=Tn.ZERO&&t<=Tn.NINE||t>=Tn.NUM_ZERO&&t<=Tn.NUM_MULTIPLY||t>=Tn.A&&t<=Tn.Z||window.navigator.userAgent.indexOf("WebKit")!==-1&&t===0)return!0;switch(t){case Tn.SPACE:case Tn.QUESTION_MARK:case Tn.NUM_PLUS:case Tn.NUM_MINUS:case Tn.NUM_PERIOD:case Tn.NUM_DIVISION:case Tn.SEMICOLON:case Tn.DASH:case Tn.EQUALS:case Tn.COMMA:case Tn.PERIOD:case Tn.SLASH:case Tn.APOSTROPHE:case Tn.SINGLE_QUOTE:case Tn.OPEN_SQUARE_BRACKET:case Tn.BACKSLASH:case Tn.CLOSE_SQUARE_BRACKET:return!0;default:return!1}}},nv=Tn;function p7(e,t){try{return Object.keys(t).some(function(r){return e.target===(0,Unt.findDOMNode)(t[r])})}catch(r){return!1}}function f7(e,t){var r=t.min,n=t.max;return e<r||e>n}function Cle(e){return e.touches.length>1||e.type.toLowerCase()==="touchend"&&e.touches.length>0}function Fnt(e,t){var r=t.marks,n=t.step,o=t.min,i=t.max,a=Object.keys(r).map(parseFloat);if(n!==null){var c=Math.pow(10,Bnt(n)),h=Math.floor((i*c-o*c)/(n*c)),m=Math.min((e-o)/n,h),y=Math.round(m)*n+o;a.push(y)}var w=a.map(function(E){return Math.abs(e-E)});return a[w.indexOf(Math.min.apply(Math,Df(w)))]}function Bnt(e){var t=e.toString(),r=0;return t.indexOf(".")>=0&&(r=t.length-t.indexOf(".")-1),r}function Ale(e,t){return e?t.clientY:t.pageX}function Ole(e,t){return e?t.touches[0].clientY:t.touches[0].pageX}function Ple(e,t){var r=t.getBoundingClientRect();return e?r.top+r.height*.5:window.pageXOffset+r.left+r.width*.5}function w4(e,t){var r=t.max,n=t.min;return e<=n?n:e>=r?r:e}function d7(e,t){var r=t.step,n=isFinite(Fnt(e,t))?Fnt(e,t):0;return r===null?n:parseFloat(n.toFixed(Bnt(r)))}function ov(e){e.stopPropagation(),e.preventDefault()}function j3r(e,t,r){var n={increase:function(c,h){return c+h},decrease:function(c,h){return c-h}},o=n[e](Object.keys(r.marks).indexOf(JSON.stringify(t)),1),i=Object.keys(r.marks)[o];return r.step?n[e](t,r.step):Object.keys(r.marks).length&&r.marks[i]?r.marks[i]:t}function h7(e,t,r){var n="increase",o="decrease",i=n;switch(e.keyCode){case nv.UP:i=t&&r?o:n;break;case nv.RIGHT:i=!t&&r?o:n;break;case nv.DOWN:i=t&&r?n:o;break;case nv.LEFT:i=!t&&r?n:o;break;case nv.END:return function(a,c){return c.max};case nv.HOME:return function(a,c){return c.min};case nv.PAGE_UP:return function(a,c){return a+c.step*2};case nv.PAGE_DOWN:return function(a,c){return a-c.step*2};default:return}return function(a,c){return j3r(i,a,c)}}function hm(){}function E4(e){var t;return t=function(r){vu(o,r);var n=yu(o);function o(i){var a;mu(this,o),a=n.call(this,i),a.onDown=function(w,E){var A=E,P=a.props,j=P.draggableTrack,D=P.vertical,k=a.state.bounds,z=j&&a.positionGetValue?a.positionGetValue(A)||[]:[],V=p7(w,a.handlesRefs);if(a.dragTrack=j&&k.length>=2&&!V&&!z.map(function(K,Z){var te=Z?!0:K>=k[Z];return Z===z.length-1?K<=k[Z]:te}).some(function(K){return!K}),a.dragTrack)a.dragOffset=A,a.startBounds=Df(k);else{if(!V)a.dragOffset=0;else{var G=Ple(D,w.target);a.dragOffset=A-G,A=G}a.onStart(A)}},a.onMouseDown=function(w){if(w.button===0){a.removeDocumentEvents();var E=a.props.vertical,A=Ale(E,w);a.onDown(w,A),a.addDocumentMouseEvents()}},a.onTouchStart=function(w){if(!Cle(w)){var E=a.props.vertical,A=Ole(E,w);a.onDown(w,A),a.addDocumentTouchEvents(),ov(w)}},a.onFocus=function(w){var E=a.props,A=E.onFocus,P=E.vertical;if(p7(w,a.handlesRefs)&&!a.dragTrack){var j=Ple(P,w.target);a.dragOffset=0,a.onStart(j),ov(w),A&&A(w)}},a.onBlur=function(w){var E=a.props.onBlur;a.dragTrack||a.onEnd(),E&&E(w)},a.onMouseUp=function(){a.handlesRefs[a.prevMovedHandleIndex]&&a.handlesRefs[a.prevMovedHandleIndex].clickFocus()},a.onMouseMove=function(w){if(!a.sliderRef){a.onEnd();return}var E=Ale(a.props.vertical,w);a.onMove(w,E-a.dragOffset,a.dragTrack,a.startBounds)},a.onTouchMove=function(w){if(Cle(w)||!a.sliderRef){a.onEnd();return}var E=Ole(a.props.vertical,w);a.onMove(w,E-a.dragOffset,a.dragTrack,a.startBounds)},a.onKeyDown=function(w){a.sliderRef&&p7(w,a.handlesRefs)&&a.onKeyboard(w)},a.onClickMarkLabel=function(w,E){w.stopPropagation(),a.onChange({value:E}),a.setState({value:E},function(){return a.onEnd(!0)})},a.saveSlider=function(w){a.sliderRef=w};var c=i.step,h=i.max,m=i.min,y=isFinite(h-m)?(h-m)%c===0:!0;return dm(c&&Math.floor(c)===c?y:!0,"Slider[max] - Slider[min] (".concat(h-m,") should be a multiple of Slider[step] (").concat(c,")")),a.handlesRefs={},a}return gu(o,[{key:"componentDidMount",value:function(){this.document=this.sliderRef&&this.sliderRef.ownerDocument;var a=this.props,c=a.autoFocus,h=a.disabled;c&&!h&&this.focus()}},{key:"componentWillUnmount",value:function(){kT(Qd(o.prototype),"componentWillUnmount",this)&&kT(Qd(o.prototype),"componentWillUnmount",this).call(this),this.removeDocumentEvents()}},{key:"getSliderStart",value:function(){var a=this.sliderRef,c=this.props,h=c.vertical,m=c.reverse,y=a.getBoundingClientRect();return h?m?y.bottom:y.top:window.pageXOffset+(m?y.right:y.left)}},{key:"getSliderLength",value:function(){var a=this.sliderRef;if(!a)return 0;var c=a.getBoundingClientRect();return this.props.vertical?c.height:c.width}},{key:"addDocumentTouchEvents",value:function(){this.onTouchMoveListener=Zu(this.document,"touchmove",this.onTouchMove),this.onTouchUpListener=Zu(this.document,"touchend",this.onEnd)}},{key:"addDocumentMouseEvents",value:function(){this.onMouseMoveListener=Zu(this.document,"mousemove",this.onMouseMove),this.onMouseUpListener=Zu(this.document,"mouseup",this.onEnd)}},{key:"removeDocumentEvents",value:function(){this.onTouchMoveListener&&this.onTouchMoveListener.remove(),this.onTouchUpListener&&this.onTouchUpListener.remove(),this.onMouseMoveListener&&this.onMouseMoveListener.remove(),this.onMouseUpListener&&this.onMouseUpListener.remove()}},{key:"focus",value:function(){var a;this.props.disabled||(a=this.handlesRefs[0])===null||a===void 0||a.focus()}},{key:"blur",value:function(){var a=this;this.props.disabled||Object.keys(this.handlesRefs).forEach(function(c){var h,m;(h=a.handlesRefs[c])===null||h===void 0||(m=h.blur)===null||m===void 0||m.call(h)})}},{key:"calcValue",value:function(a){var c=this.props,h=c.vertical,m=c.min,y=c.max,w=Math.abs(Math.max(a,0)/this.getSliderLength()),E=h?(1-w)*(y-m)+m:w*(y-m)+m;return E}},{key:"calcValueByPos",value:function(a){var c=this.props.reverse?-1:1,h=c*(a-this.getSliderStart()),m=this.trimAlignValue(this.calcValue(h));return m}},{key:"calcOffset",value:function(a){var c=this.props,h=c.min,m=c.max,y=(a-h)/(m-h);return Math.max(0,y*100)}},{key:"saveHandle",value:function(a,c){this.handlesRefs[a]=c}},{key:"render",value:function(){var a,c=this.props,h=c.prefixCls,m=c.className,y=c.marks,w=c.dots,E=c.step,A=c.included,P=c.disabled,j=c.vertical,D=c.reverse,k=c.min,z=c.max,V=c.children,G=c.maximumTrackStyle,K=c.style,Z=c.railStyle,te=c.dotStyle,se=c.activeDotStyle,le=kT(Qd(o.prototype),"render",this).call(this),pe=le.tracks,me=le.handles,_e=(0,Vnt.default)(h,(a={},Zt(a,"".concat(h,"-with-marks"),Object.keys(y).length),Zt(a,"".concat(h,"-disabled"),P),Zt(a,"".concat(h,"-vertical"),j),Zt(a,m,m),a));return jT.default.createElement("div",{ref:this.saveSlider,className:_e,onTouchStart:P?hm:this.onTouchStart,onMouseDown:P?hm:this.onMouseDown,onMouseUp:P?hm:this.onMouseUp,onKeyDown:P?hm:this.onKeyDown,onFocus:P?hm:this.onFocus,onBlur:P?hm:this.onBlur,style:K},jT.default.createElement("div",{className:"".concat(h,"-rail"),style:nr(nr({},G),Z)}),pe,jT.default.createElement(Rnt,{prefixCls:h,vertical:j,reverse:D,marks:y,dots:w,step:E,included:A,lowerBound:this.getLowerBound(),upperBound:this.getUpperBound(),max:z,min:k,dotStyle:te,activeDotStyle:se}),me,jT.default.createElement(qnt,{className:"".concat(h,"-mark"),onClickLabel:P?hm:this.onClickMarkLabel,vertical:j,marks:y,included:A,lowerBound:this.getLowerBound(),upperBound:this.getUpperBound(),max:z,min:k,reverse:D}),V)}}]),o}(e),t.displayName="ComponentEnhancer(".concat(e.displayName,")"),t.defaultProps=nr(nr({},e.defaultProps),{},{prefixCls:"rc-slider",className:"",min:0,max:100,step:1,marks:{},handle:function(n){var o=n.index,i=Yu(n,["index"]);return delete i.dragging,i.value===null?null:jT.default.createElement(RT,yo({},i,{key:o}))},onBeforeChange:hm,onChange:hm,onAfterChange:hm,included:!0,disabled:!1,dots:!1,vertical:!1,reverse:!1,trackStyle:[{}],handleStyle:[{}],railStyle:{},dotStyle:{},activeDotStyle:{}}),t}var q3r=function(e){vu(r,e);var t=yu(r);function r(n){var o;mu(this,r),o=t.call(this,n),o.positionGetValue=function(c){return[]},o.onEnd=function(c){var h=o.state.dragging;o.removeDocumentEvents(),(h||c)&&o.props.onAfterChange(o.getValue()),o.setState({dragging:!1})};var i=n.defaultValue!==void 0?n.defaultValue:n.min,a=n.value!==void 0?n.value:i;return o.state={value:o.trimAlignValue(a),dragging:!1},dm(!("minimumTrackStyle"in n),"minimumTrackStyle will be deprecated, please use trackStyle instead."),dm(!("maximumTrackStyle"in n),"maximumTrackStyle will be deprecated, please use railStyle instead."),o}return gu(r,[{key:"calcValueByPos",value:function(o){return 0}},{key:"calcOffset",value:function(o){return 0}},{key:"saveHandle",value:function(o,i){}},{key:"removeDocumentEvents",value:function(){}},{key:"componentDidUpdate",value:function(o,i){var a=this.props,c=a.min,h=a.max,m=a.value,y=a.onChange;if("min"in this.props||"max"in this.props){var w=m!==void 0?m:i.value,E=this.trimAlignValue(w,this.props);E!==i.value&&(this.setState({value:E}),!(c===o.min&&h===o.max)&&f7(w,this.props)&&y(E))}}},{key:"onChange",value:function(o){var i=this.props,a=!("value"in i),c=o.value>this.props.max?nr(nr({},o),{},{value:this.props.max}):o;a&&this.setState(c);var h=c.value;i.onChange(h)}},{key:"onStart",value:function(o){this.setState({dragging:!0});var i=this.props,a=this.getValue();i.onBeforeChange(a);var c=this.calcValueByPos(o);this.startValue=c,this.startPosition=o,c!==a&&(this.prevMovedHandleIndex=0,this.onChange({value:c}))}},{key:"onMove",value:function(o,i){ov(o);var a=this.state.value,c=this.calcValueByPos(i);c!==a&&this.onChange({value:c})}},{key:"onKeyboard",value:function(o){var i=this.props,a=i.reverse,c=i.vertical,h=h7(o,c,a);if(h){ov(o);var m=this.state,y=m.value,w=h(y,this.props),E=this.trimAlignValue(w);if(E===y)return;this.onChange({value:E}),this.props.onAfterChange(E),this.onEnd()}}},{key:"getValue",value:function(){return this.state.value}},{key:"getLowerBound",value:function(){var o=this.props.startPoint||this.props.min;return this.state.value>o?o:this.state.value}},{key:"getUpperBound",value:function(){return this.state.value<this.props.startPoint?this.props.startPoint:this.state.value}},{key:"trimAlignValue",value:function(o){var i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(o===null)return null;var a=nr(nr({},this.props),i),c=w4(o,a);return d7(c,a)}},{key:"render",value:function(){var o=this,i=this.props,a=i.prefixCls,c=i.vertical,h=i.included,m=i.disabled,y=i.minimumTrackStyle,w=i.trackStyle,E=i.handleStyle,A=i.tabIndex,P=i.ariaLabelForHandle,j=i.ariaLabelledByForHandle,D=i.ariaValueTextFormatterForHandle,k=i.min,z=i.max,V=i.startPoint,G=i.reverse,K=i.handle,Z=this.state,te=Z.value,se=Z.dragging,le=this.calcOffset(te),pe=K({className:"".concat(a,"-handle"),prefixCls:a,vertical:c,offset:le,value:te,dragging:se,disabled:m,min:k,max:z,reverse:G,index:0,tabIndex:A,ariaLabel:P,ariaLabelledBy:j,ariaValueTextFormatter:D,style:E[0]||E,ref:function(Ye){return o.saveHandle(0,Ye)}}),me=V!==void 0?this.calcOffset(V):0,_e=w[0]||w,de=Nle.default.createElement(u7,{className:"".concat(a,"-track"),vertical:c,included:h,offset:me,reverse:G,length:le-me,style:nr(nr({},y),_e)});return{tracks:de,handles:pe}}}]),r}(Nle.default.Component),Gnt=E4(q3r);u();var Lle=Q(De()),kle=Q(Uo());var S4=function(t){var r=t.value,n=t.handle,o=t.bounds,i=t.props,a=i.allowCross,c=i.pushable,h=Number(c),m=w4(r,i),y=m;return!a&&n!=null&&o!==void 0&&(n>0&&m<=o[n-1]+h&&(y=o[n-1]+h),n<o.length-1&&m>=o[n+1]-h&&(y=o[n+1]-h)),d7(y,i)},Rle=function(e){vu(r,e);var t=yu(r);function r(n){var o;mu(this,r),o=t.call(this,n),o.positionGetValue=function(A){var P=o.getValue(),j=o.calcValueByPos(A),D=o.getClosestBound(j),k=o.getBoundNeedMoving(j,D),z=P[k];if(j===z)return null;var V=Df(P);return V[k]=j,V},o.onEnd=function(A){var P=o.state.handle;o.removeDocumentEvents(),P||(o.dragTrack=!1),(P!==null||A)&&o.props.onAfterChange(o.getValue()),o.setState({handle:null})};var i=n.count,a=n.min,c=n.max,h=Array.apply(void 0,Df(Array(i+1))).map(function(){return a}),m="defaultValue"in n?n.defaultValue:h,y=n.value!==void 0?n.value:m,w=y.map(function(A,P){return S4({value:A,handle:P,props:n})}),E=w[0]===c?0:w.length-1;return o.state={handle:null,recent:E,bounds:w},o}return gu(r,[{key:"calcValueByPos",value:function(o){return 0}},{key:"getSliderLength",value:function(){return 0}},{key:"calcOffset",value:function(o){return 0}},{key:"saveHandle",value:function(o,i){}},{key:"removeDocumentEvents",value:function(){}},{key:"componentDidUpdate",value:function(o,i){var a=this,c=this.props,h=c.onChange,m=c.value,y=c.min,w=c.max;if(("min"in this.props||"max"in this.props)&&!(y===o.min&&w===o.max)){var E=m||i.bounds;if(E.some(function(P){return f7(P,a.props)})){var A=E.map(function(P){return w4(P,a.props)});h(A)}}}},{key:"onChange",value:function(o){var i=this.props,a=!("value"in i);if(a)this.setState(o);else{var c={};["handle","recent"].forEach(function(y){o[y]!==void 0&&(c[y]=o[y])}),Object.keys(c).length&&this.setState(c)}var h=nr(nr({},this.state),o),m=h.bounds;i.onChange(m)}},{key:"onStart",value:function(o){var i=this.props,a=this.state,c=this.getValue();i.onBeforeChange(c);var h=this.calcValueByPos(o);this.startValue=h,this.startPosition=o;var m=this.getClosestBound(h);this.prevMovedHandleIndex=this.getBoundNeedMoving(h,m),this.setState({handle:this.prevMovedHandleIndex,recent:this.prevMovedHandleIndex});var y=c[this.prevMovedHandleIndex];if(h!==y){var w=Df(a.bounds);w[this.prevMovedHandleIndex]=h,this.onChange({bounds:w})}}},{key:"onMove",value:function(o,i,a,c){ov(o);var h=this.state,m=this.props,y=m.max||100,w=m.min||0;if(a){var E=m.vertical?-i:i;E=m.reverse?-E:E;var A=y-Math.max.apply(Math,Df(c)),P=w-Math.min.apply(Math,Df(c)),j=Math.min(Math.max(E/(this.getSliderLength()/(y-w)),P),A),D=c.map(function(V){return Math.floor(Math.max(Math.min(V+j,y),w))});h.bounds.map(function(V,G){return V===D[G]}).some(function(V){return!V})&&this.onChange({bounds:D});return}var k=this.calcValueByPos(i),z=h.bounds[h.handle];k!==z&&this.moveTo(k)}},{key:"onKeyboard",value:function(o){var i=this.props,a=i.reverse,c=i.vertical,h=h7(o,c,a);if(h){ov(o);var m=this.state,y=this.props,w=m.bounds,E=m.handle,A=w[E===null?m.recent:E],P=h(A,y),j=S4({value:P,handle:E,bounds:m.bounds,props:y});if(j===A)return;var D=!0;this.moveTo(j,D)}}},{key:"getValue",value:function(){return this.state.bounds}},{key:"getClosestBound",value:function(o){for(var i=this.state.bounds,a=0,c=1;c<i.length-1;c+=1)o>=i[c]&&(a=c);return Math.abs(i[a+1]-o)<Math.abs(i[a]-o)&&(a+=1),a}},{key:"getBoundNeedMoving",value:function(o,i){var a=this.state,c=a.bounds,h=a.recent,m=i,y=c[i+1]===c[i];return y&&c[h]===c[i]&&(m=h),y&&o!==c[i+1]&&(m=o<c[i+1]?i:i+1),m}},{key:"getLowerBound",value:function(){return this.state.bounds[0]}},{key:"getUpperBound",value:function(){var o=this.state.bounds;return o[o.length-1]}},{key:"getPoints",value:function(){var o=this.props,i=o.marks,a=o.step,c=o.min,h=o.max,m=this.internalPointsCache;if(!m||m.marks!==i||m.step!==a){var y=nr({},i);if(a!==null)for(var w=c;w<=h;w+=a)y[w]=w;var E=Object.keys(y).map(parseFloat);E.sort(function(A,P){return A-P}),this.internalPointsCache={marks:i,step:a,points:E}}return this.internalPointsCache.points}},{key:"moveTo",value:function(o,i){var a=this,c=this.state,h=this.props,m=Df(c.bounds),y=c.handle===null?c.recent:c.handle;m[y]=o;var w=y;h.pushable!==!1?this.pushSurroundingHandles(m,w):h.allowCross&&(m.sort(function(E,A){return E-A}),w=m.indexOf(o)),this.onChange({recent:w,handle:w,bounds:m}),i&&(this.props.onAfterChange(m),this.setState({},function(){a.handlesRefs[w].focus()}),this.onEnd())}},{key:"pushSurroundingHandles",value:function(o,i){var a=o[i],c=this.props.pushable,h=Number(c),m=0;if(o[i+1]-a<h&&(m=1),a-o[i-1]<h&&(m=-1),m!==0){var y=i+m,w=m*(o[y]-a);this.pushHandle(o,y,m,h-w)||(o[i]=o[y]-m*h)}}},{key:"pushHandle",value:function(o,i,a,c){for(var h=o[i],m=o[i];a*(m-h)<c;){if(!this.pushHandleOnePoint(o,i,a))return o[i]=h,!1;m=o[i]}return!0}},{key:"pushHandleOnePoint",value:function(o,i,a){var c=this.getPoints(),h=c.indexOf(o[i]),m=h+a;if(m>=c.length||m<0)return!1;var y=i+a,w=c[m],E=this.props.pushable,A=Number(E),P=a*(o[y]-w);return this.pushHandle(o,y,a,A-P)?(o[i]=w,!0):!1}},{key:"trimAlignValue",value:function(o){var i=this.state,a=i.handle,c=i.bounds;return S4({value:o,handle:a,bounds:c,props:this.props})}},{key:"render",value:function(){var o=this,i=this.state,a=i.handle,c=i.bounds,h=this.props,m=h.prefixCls,y=h.vertical,w=h.included,E=h.disabled,A=h.min,P=h.max,j=h.reverse,D=h.handle,k=h.trackStyle,z=h.handleStyle,V=h.tabIndex,G=h.ariaLabelGroupForHandles,K=h.ariaLabelledByGroupForHandles,Z=h.ariaValueTextFormatterGroupForHandles,te=c.map(function(me){return o.calcOffset(me)}),se="".concat(m,"-handle"),le=c.map(function(me,_e){var de,Ce=V[_e]||0;(E||V[_e]===null)&&(Ce=null);var Ye=a===_e;return D({className:(0,kle.default)((de={},Zt(de,se,!0),Zt(de,"".concat(se,"-").concat(_e+1),!0),Zt(de,"".concat(se,"-dragging"),Ye),de)),prefixCls:m,vertical:y,dragging:Ye,offset:te[_e],value:me,index:_e,tabIndex:Ce,min:A,max:P,reverse:j,disabled:E,style:z[_e],ref:function(ct){return o.saveHandle(_e,ct)},ariaLabel:G[_e],ariaLabelledBy:K[_e],ariaValueTextFormatter:Z[_e]})}),pe=c.slice(0,-1).map(function(me,_e){var de,Ce=_e+1,Ye=(0,kle.default)((de={},Zt(de,"".concat(m,"-track"),!0),Zt(de,"".concat(m,"-track-").concat(Ce),!0),de));return Lle.default.createElement(u7,{className:Ye,vertical:y,reverse:j,included:w,offset:te[Ce-1],length:te[Ce]-te[Ce-1],style:k[_e],key:Ce})});return{tracks:pe,handles:le}}}],[{key:"getDerivedStateFromProps",value:function(o,i){if(!("value"in o||"min"in o||"max"in o))return null;var a=o.value||i.bounds,c=a.map(function(h,m){return S4({value:h,handle:m,bounds:i.bounds,props:o})});if(i.bounds.length===c.length){if(c.every(function(h,m){return h===i.bounds[m]}))return null}else c=a.map(function(h,m){return S4({value:h,handle:m,props:o})});return nr(nr({},i),{},{bounds:c})}}]),r}(Lle.default.Component);Rle.displayName="Range";Rle.defaultProps={count:1,allowCross:!0,pushable:!1,draggableTrack:!1,tabIndex:[],ariaLabelGroupForHandles:[],ariaLabelledByGroupForHandles:[],ariaValueTextFormatterGroupForHandles:[]};var m7=E4(Rle);u();var j4=Q(De());u();var lv=Q(De());u();u();var _ue=Q(De()),HT=Q(De());u();var Ap=Q(De()),Oit=Q(ba());u();var Wnt=function(t){return+setTimeout(t,16)},$nt=function(t){return clearTimeout(t)};typeof window!="undefined"&&"requestAnimationFrame"in window&&(Wnt=function(t){return window.requestAnimationFrame(t)},$nt=function(t){return window.cancelAnimationFrame(t)});var Hnt=0,jle=new Map;function Ynt(e){jle.delete(e)}var Znt=function(t){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:1;Hnt+=1;var n=Hnt;function o(i){if(i===0)Ynt(n),t();else{var a=Wnt(function(){o(i-1)});jle.set(n,a)}}return o(r),n};Znt.cancel=function(e){var t=jle.get(e);return Ynt(e),$nt(t)};var Fc=Znt;u();function Ab(e,t){if(!e)return!1;if(e.contains)return e.contains(t);for(var r=t;r;){if(r===e)return!0;r=r.parentNode}return!1}u();var Xnt=Q(De()),qle=Q(ba());function Knt(e){return e instanceof HTMLElement||e instanceof SVGElement}function z3r(e){return e&&No(e)==="object"&&Knt(e.nativeElement)?e.nativeElement:Knt(e)?e:null}function T4(e){var t=z3r(e);if(t)return t;if(e instanceof Xnt.default.Component){var r;return(r=qle.default.findDOMNode)===null||r===void 0?void 0:r.call(qle.default,e)}return null}u();var I7=Q(De()),I4=Q(tot());u();var B3r=Q(De());u();var V3r=Symbol.for("react.element"),G3r=Symbol.for("react.transitional.element"),H3r=Symbol.for("react.fragment");function Ule(e){return e&&No(e)==="object"&&(e.$$typeof===V3r||e.$$typeof===G3r)&&e.type===H3r}var W3r=Number(I7.version.split(".")[0]),Ble=function(t,r){typeof t=="function"?t(r):No(t)==="object"&&t&&"current"in t&&(t.current=r)},qT=function(){for(var t=arguments.length,r=new Array(t),n=0;n<t;n++)r[n]=arguments[n];var o=r.filter(Boolean);return o.length<=1?o[0]:function(i){r.forEach(function(a){Ble(a,i)})}};var M4=function(t){var r,n;if(!t)return!1;if(rot(t)&&W3r>=19)return!0;var o=(0,I4.isMemo)(t)?t.type.type:t.type;return!(typeof o=="function"&&!((r=o.prototype)!==null&&r!==void 0&&r.render)&&o.$$typeof!==I4.ForwardRef||typeof t=="function"&&!((n=t.prototype)!==null&&n!==void 0&&n.render)&&t.$$typeof!==I4.ForwardRef)};function rot(e){return(0,I7.isValidElement)(e)&&!Ule(e)}var not=function(t){if(t&&rot(t)){var r=t;return r.props.propertyIsEnumerable("ref")?r.props.ref:r.ref}return null};u();var eh=Q(De()),oot=Q(ba());u();function mm(){return!!(typeof window!="undefined"&&window.document&&window.document.createElement)}var $3r=(0,eh.forwardRef)(function(e,t){var r=e.didUpdate,n=e.getContainer,o=e.children,i=(0,eh.useRef)(),a=(0,eh.useRef)();(0,eh.useImperativeHandle)(t,function(){return{}});var c=(0,eh.useRef)(!1);return!c.current&&mm()&&(a.current=n(),i.current=a.current.parentNode,c.current=!0),(0,eh.useEffect)(function(){r==null||r(e)}),(0,eh.useEffect)(function(){return a.current.parentNode===null&&i.current!==null&&i.current.appendChild(a.current),function(){var h;(h=a.current)===null||h===void 0||(h=h.parentNode)===null||h===void 0||h.removeChild(a.current)}},[]),a.current?oot.default.createPortal(o,a.current):null}),iot=$3r;var Pit=Q(Uo());u();function Y3r(e,t,r){return r?e[0]===t[0]:e[0]===t[0]&&e[1]===t[1]}function aot(e,t,r){var n=e[t]||{};return nr(nr({},n),r)}function sot(e,t,r,n){for(var o=r.points,i=Object.keys(e),a=0;a<i.length;a+=1){var c=i[a];if(Y3r(e[c].points,o,n))return"".concat(t,"-placement-").concat(c)}return""}u();u();u();function Vle(e){if(Array.isArray(e))return e}u();function lot(e,t){var r=e==null?null:typeof Symbol!="undefined"&&e[Symbol.iterator]||e["@@iterator"];if(r!=null){var n,o,i,a,c=[],h=!0,m=!1;try{if(i=(r=r.call(e)).next,t===0){if(Object(r)!==r)return;h=!1}else for(;!(h=(n=i.call(r)).done)&&(c.push(n.value),c.length!==t);h=!0);}catch(y){m=!0,o=y}finally{try{if(!h&&r.return!=null&&(a=r.return(),Object(a)!==a))return}finally{if(m)throw o}}return c}}u();function Gle(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Ro(e,t){return Vle(e)||lot(e,t)||x4(e,t)||Gle()}var Nb=Q(De()),R4=Q(De());u();var uot=function(){if(typeof navigator=="undefined"||typeof window=="undefined")return!1;var e=navigator.userAgent||navigator.vendor||window.opera;return /(android|bb\d+|meego).+mobile|avantgo|bada\/|blackberry|blazer|compal|elaine|fennec|hiptop|iemobile|ip(hone|od)|iris|kindle|lge |maemo|midp|mmp|mobile.+firefox|netfront|opera m(ob|in)i|palm( os)?|phone|p(ixi|re)\/|plucker|pocket|psp|series(4|6)0|symbian|treo|up\.(browser|link)|vodafone|wap|windows ce|xda|xiino|android|ipad|playbook|silk/i.test(e)||/1207|6310|6590|3gso|4thp|50[1-6]i|770s|802s|a wa|abac|ac(er|oo|s-)|ai(ko|rn)|al(av|ca|co)|amoi|an(ex|ny|yw)|aptu|ar(ch|go)|as(te|us)|attw|au(di|-m|r |s )|avan|be(ck|ll|nq)|bi(lb|rd)|bl(ac|az)|br(e|v)w|bumb|bw-(n|u)|c55\/|capi|ccwa|cdm-|cell|chtm|cldc|cmd-|co(mp|nd)|craw|da(it|ll|ng)|dbte|dc-s|devi|dica|dmob|do(c|p)o|ds(12|-d)|el(49|ai)|em(l2|ul)|er(ic|k0)|esl8|ez([4-7]0|os|wa|ze)|fetc|fly(-|_)|g1 u|g560|gene|gf-5|g-mo|go(\.w|od)|gr(ad|un)|haie|hcit|hd-(m|p|t)|hei-|hi(pt|ta)|hp( i|ip)|hs-c|ht(c(-| |_|a|g|p|s|t)|tp)|hu(aw|tc)|i-(20|go|ma)|i230|iac( |-|\/)|ibro|idea|ig01|ikom|im1k|inno|ipaq|iris|ja(t|v)a|jbro|jemu|jigs|kddi|keji|kgt( |\/)|klon|kpt |kwc-|kyo(c|k)|le(no|xi)|lg( g|\/(k|l|u)|50|54|-[a-w])|libw|lynx|m1-w|m3ga|m50\/|ma(te|ui|xo)|mc(01|21|ca)|m-cr|me(rc|ri)|mi(o8|oa|ts)|mmef|mo(01|02|bi|de|do|t(-| |o|v)|zz)|mt(50|p1|v )|mwbp|mywa|n10[0-2]|n20[2-3]|n30(0|2)|n50(0|2|5)|n7(0(0|1)|10)|ne((c|m)-|on|tf|wf|wg|wt)|nok(6|i)|nzph|o2im|op(ti|wv)|oran|owg1|p800|pan(a|d|t)|pdxg|pg(13|-([1-8]|c))|phil|pire|pl(ay|uc)|pn-2|po(ck|rt|se)|prox|psio|pt-g|qa-a|qc(07|12|21|32|60|-[2-7]|i-)|qtek|r380|r600|raks|rim9|ro(ve|zo)|s55\/|sa(ge|ma|mm|ms|ny|va)|sc(01|h-|oo|p-)|sdk\/|se(c(-|0|1)|47|mc|nd|ri)|sgh-|shar|sie(-|m)|sk-0|sl(45|id)|sm(al|ar|b3|it|t5)|so(ft|ny)|sp(01|h-|v-|v )|sy(01|mb)|t2(18|50)|t6(00|10|18)|ta(gt|lk)|tcl-|tdg-|tel(i|m)|tim-|t-mo|to(pl|sh)|ts(70|m-|m3|m5)|tx-9|up(\.b|g1|si)|utst|v400|v750|veri|vi(rg|te)|vk(40|5[0-3]|-v)|vm40|voda|vulc|vx(52|53|60|61|70|80|81|83|85|98)|w3c(-| )|webc|whit|wi(g |nc|nw)|wmlb|wonu|x700|yas-|your|zeto|zte-/i.test(e==null?void 0:e.substr(0,4))};u();var eue=Q(De()),Aot=Q(Uo());u();u();var Mot=Q(Uo());var Bc=Q(De()),Qle=Q(De());u();var Hle=Q(De());var cot=Hle.createContext({});u();var pot=Q(De()),Z3r=function(e){vu(r,e);var t=yu(r);function r(){return mu(this,r),t.apply(this,arguments)}return gu(r,[{key:"render",value:function(){return this.props.children}}]),r}(pot.Component),fot=Z3r;u();u();u();var M7=Q(De());function z0(e){var t=M7.useRef();t.current=e;var r=M7.useCallback(function(){for(var n,o=arguments.length,i=new Array(o),a=0;a<o;a++)i[a]=arguments[a];return(n=t.current)===null||n===void 0?void 0:n.call.apply(n,[t].concat(i))},[]);return r}u();u();var zT=Q(De());var dot=mm()?zT.useLayoutEffect:zT.useEffect,K3r=function(t,r){var n=zT.useRef(!0);dot(function(){return t(n.current)},r),dot(function(){return n.current=!1,function(){n.current=!0}},[])};var C4=K3r;u();var FT=Q(De());function iv(e){var t=FT.useRef(!1),r=FT.useState(e),n=Ro(r,2),o=n[0],i=n[1];FT.useEffect(function(){return t.current=!1,function(){t.current=!0}},[]);function a(c,h){h&&t.current||i(c)}return[o,a]}u();u();u();u();var C7=Q(De());function Wle(e){var t=C7.useReducer(function(c){return c+1},0),r=Ro(t,2),n=r[1],o=C7.useRef(e),i=z0(function(){return o.current}),a=z0(function(c){o.current=typeof c=="function"?c(o.current):c,n()});return[i,a]}var j7=Q(De()),sv=Q(De());u();var gm="none",A4="appear",O4="enter",P4="leave",$le="none",Uc="prepare",av="start",F0="active",A7="end",O7="prepared";u();var bot=Q(De()),xot=Q(De());u();function hot(e,t){var r={};return r[e.toLowerCase()]=t.toLowerCase(),r["Webkit".concat(e)]="webkit".concat(t),r["Moz".concat(e)]="moz".concat(t),r["ms".concat(e)]="MS".concat(t),r["O".concat(e)]="o".concat(t.toLowerCase()),r}function J3r(e,t){var r={animationend:hot("Animation","AnimationEnd"),transitionend:hot("Transition","TransitionEnd")};return e&&("AnimationEvent"in t||delete r.animationend.animation,"TransitionEvent"in t||delete r.transitionend.transition),r}var Q3r=J3r(mm(),typeof window!="undefined"?window:{}),got={};mm()&&(mot=document.createElement("div"),got=mot.style);var mot,P7={};function vot(e){if(P7[e])return P7[e];var t=Q3r[e];if(t)for(var r=Object.keys(t),n=r.length,o=0;o<n;o+=1){var i=r[o];if(Object.prototype.hasOwnProperty.call(t,i)&&i in got)return P7[e]=t[i],P7[e]}return""}var yot=vot("animationend"),_ot=vot("transitionend"),D7=!!(yot&&_ot),Yle=yot||"animationend",Zle=_ot||"transitionend";function Kle(e,t){if(!e)return null;if(No(e)==="object"){var r=t.replace(/-\w/g,function(n){return n[1].toUpperCase()});return e[r]}return"".concat(e,"-").concat(t)}var wot=function(e){var t=(0,xot.useRef)();function r(o){o&&(o.removeEventListener(Zle,e),o.removeEventListener(Yle,e))}function n(o){t.current&&t.current!==o&&r(t.current),o&&o!==t.current&&(o.addEventListener(Zle,e),o.addEventListener(Yle,e),t.current=o)}return bot.useEffect(function(){return function(){r(t.current)}},[]),[n,r]};u();var N7=Q(De()),ekr=mm()?N7.useLayoutEffect:N7.useEffect,L7=ekr;u();var Sot=Q(De());u();var k7=Q(De()),Eot=function(){var e=k7.useRef(null);function t(){Fc.cancel(e.current)}function r(n){var o=arguments.length>1&&arguments[1]!==void 0?arguments[1]:2;t();var i=Fc(function(){o<=1?n({isCanceled:function(){return i!==e.current}}):r(n,o-1)});e.current=i}return k7.useEffect(function(){return function(){t()}},[]),[r,t]};var tkr=[Uc,av,F0,A7],rkr=[Uc,O7],Xle=!1,Tot=!0;function R7(e){return e===F0||e===A7}var Iot=function(e,t,r){var n=iv($le),o=Ro(n,2),i=o[0],a=o[1],c=Eot(),h=Ro(c,2),m=h[0],y=h[1];function w(){a(Uc,!0)}var E=t?rkr:tkr;return L7(function(){if(i!==$le&&i!==A7){var A=E.indexOf(i),P=E[A+1],j=r(i);j===Xle?a(P,!0):P&&m(function(D){function k(){D.isCanceled()||a(P,!0)}j===!0?k():Promise.resolve(j).then(k)})}},[e,i]),Sot.useEffect(function(){return function(){y()}},[]),[w,i]};function Jle(e,t,r,n){var o=n.motionEnter,i=o===void 0?!0:o,a=n.motionAppear,c=a===void 0?!0:a,h=n.motionLeave,m=h===void 0?!0:h,y=n.motionDeadline,w=n.motionLeaveImmediately,E=n.onAppearPrepare,A=n.onEnterPrepare,P=n.onLeavePrepare,j=n.onAppearStart,D=n.onEnterStart,k=n.onLeaveStart,z=n.onAppearActive,V=n.onEnterActive,G=n.onLeaveActive,K=n.onAppearEnd,Z=n.onEnterEnd,te=n.onLeaveEnd,se=n.onVisibleChanged,le=iv(),pe=Ro(le,2),me=pe[0],_e=pe[1],de=Wle(gm),Ce=Ro(de,2),Ye=Ce[0],rt=Ce[1],ct=iv(null),qe=Ro(ct,2),lt=qe[0],bt=qe[1],Tt=Ye(),et=(0,sv.useRef)(!1),pt=(0,sv.useRef)(null);function ot(){return r()}var We=(0,sv.useRef)(!1);function Ne(){rt(gm),bt(null,!0)}var Ke=z0(function(Dr){var ke=Ye();if(ke!==gm){var Je=ot();if(!(Dr&&!Dr.deadline&&Dr.target!==Je)){var tt=We.current,Ft;ke===A4&&tt?Ft=K==null?void 0:K(Je,Dr):ke===O4&&tt?Ft=Z==null?void 0:Z(Je,Dr):ke===P4&&tt&&(Ft=te==null?void 0:te(Je,Dr)),tt&&Ft!==!1&&Ne()}}}),Ge=wot(Ke),ft=Ro(Ge,1),mt=ft[0],Ot=function(ke){switch(ke){case A4:return Zt(Zt(Zt({},Uc,E),av,j),F0,z);case O4:return Zt(Zt(Zt({},Uc,A),av,D),F0,V);case P4:return Zt(Zt(Zt({},Uc,P),av,k),F0,G);default:return{}}},At=j7.useMemo(function(){return Ot(Tt)},[Tt]),Mt=Iot(Tt,!e,function(Dr){if(Dr===Uc){var ke=At[Uc];return ke?ke(ot()):Xle}if(Ut in At){var Je;bt(((Je=At[Ut])===null||Je===void 0?void 0:Je.call(At,ot(),null))||null)}return Ut===F0&&Tt!==gm&&(mt(ot()),y>0&&(clearTimeout(pt.current),pt.current=setTimeout(function(){Ke({deadline:!0})},y))),Ut===O7&&Ne(),Tot}),Yt=Ro(Mt,2),qt=Yt[0],Ut=Yt[1],sr=R7(Ut);We.current=sr;var jr=(0,sv.useRef)(null);L7(function(){if(!(et.current&&jr.current===t)){_e(t);var Dr=et.current;et.current=!0;var ke;!Dr&&t&&c&&(ke=A4),Dr&&t&&i&&(ke=O4),(Dr&&!t&&m||!Dr&&w&&!t&&m)&&(ke=P4);var Je=Ot(ke);ke&&(e||Je[Uc])?(rt(ke),qt()):rt(gm),jr.current=t}},[t]),(0,sv.useEffect)(function(){(Tt===A4&&!c||Tt===O4&&!i||Tt===P4&&!m)&&rt(gm)},[c,i,m]),(0,sv.useEffect)(function(){return function(){et.current=!1,clearTimeout(pt.current)}},[]);var Pr=j7.useRef(!1);(0,sv.useEffect)(function(){me&&(Pr.current=!0),me!==void 0&&Tt===gm&&((Pr.current||me)&&(se==null||se(me)),Pr.current=!0)},[me,Tt]);var br=lt;return At[Uc]&&Ut===av&&(br=nr({transition:"none"},br)),[Tt,Ut,br,me!=null?me:t]}function nkr(e){var t=e;No(e)==="object"&&(t=e.transitionSupport);function r(o,i){return!!(o.motionName&&t&&i!==!1)}var n=Bc.forwardRef(function(o,i){var a=o.visible,c=a===void 0?!0:a,h=o.removeOnLeave,m=h===void 0?!0:h,y=o.forceRender,w=o.children,E=o.motionName,A=o.leavedClassName,P=o.eventProps,j=Bc.useContext(cot),D=j.motion,k=r(o,D),z=(0,Qle.useRef)(),V=(0,Qle.useRef)();function G(){try{return z.current instanceof HTMLElement?z.current:T4(V.current)}catch(qe){return null}}var K=Jle(k,c,G,o),Z=Ro(K,4),te=Z[0],se=Z[1],le=Z[2],pe=Z[3],me=Bc.useRef(pe);pe&&(me.current=!0);var _e=Bc.useCallback(function(qe){z.current=qe,Ble(i,qe)},[i]),de,Ce=nr(nr({},P),{},{visible:c});if(!w)de=null;else if(te===gm)pe?de=w(nr({},Ce),_e):!m&&me.current&&A?de=w(nr(nr({},Ce),{},{className:A}),_e):y||!m&&!A?de=w(nr(nr({},Ce),{},{style:{display:"none"}}),_e):de=null;else{var Ye;se===Uc?Ye="prepare":R7(se)?Ye="active":se===av&&(Ye="start");var rt=Kle(E,"".concat(te,"-").concat(Ye));de=w(nr(nr({},Ce),{},{className:(0,Mot.default)(Kle(E,te),Zt(Zt({},rt,rt&&Ye),E,typeof E=="string")),style:le}),_e)}if(Bc.isValidElement(de)&&M4(de)){var ct=not(de);ct||(de=Bc.cloneElement(de,{ref:_e}))}return Bc.createElement(fot,{ref:V},de)});return n.displayName="CSSMotion",n}var q7=nkr(D7);u();var Ob=Q(De());u();var z7="add",F7="keep",U7="remove",V7="removed";function okr(e){var t;return e&&No(e)==="object"&&"key"in e?t=e:t={key:e},nr(nr({},t),{},{key:String(t.key)})}function B7(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[];return e.map(okr)}function Cot(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[],t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:[],r=[],n=0,o=t.length,i=B7(e),a=B7(t);i.forEach(function(m){for(var y=!1,w=n;w<o;w+=1){var E=a[w];if(E.key===m.key){n<w&&(r=r.concat(a.slice(n,w).map(function(A){return nr(nr({},A),{},{status:z7})})),n=w),r.push(nr(nr({},E),{},{status:F7})),n+=1,y=!0;break}}y||r.push(nr(nr({},m),{},{status:U7}))}),n<o&&(r=r.concat(a.slice(n).map(function(m){return nr(nr({},m),{},{status:z7})})));var c={};r.forEach(function(m){var y=m.key;c[y]=(c[y]||0)+1});var h=Object.keys(c).filter(function(m){return c[m]>1});return h.forEach(function(m){r=r.filter(function(y){var w=y.key,E=y.status;return w!==m||E!==U7}),r.forEach(function(y){y.key===m&&(y.status=F7)})}),r}var ikr=["component","children","onVisibleChanged","onAllRemoved"],akr=["status"],skr=["eventProps","visible","children","motionName","motionAppear","motionEnter","motionLeave","motionLeaveImmediately","motionDeadline","removeOnLeave","leavedClassName","onAppearPrepare","onAppearStart","onAppearActive","onAppearEnd","onEnterStart","onEnterActive","onEnterEnd","onLeaveStart","onLeaveActive","onLeaveEnd"];function lkr(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:q7,r=function(n){vu(i,n);var o=yu(i);function i(){var a;mu(this,i);for(var c=arguments.length,h=new Array(c),m=0;m<c;m++)h[m]=arguments[m];return a=o.call.apply(o,[this].concat(h)),Zt(Fn(a),"state",{keyEntities:[]}),Zt(Fn(a),"removeKey",function(y){a.setState(function(w){var E=w.keyEntities.map(function(A){return A.key!==y?A:nr(nr({},A),{},{status:V7})});return{keyEntities:E}},function(){var w=a.state.keyEntities,E=w.filter(function(A){var P=A.status;return P!==V7}).length;E===0&&a.props.onAllRemoved&&a.props.onAllRemoved()})}),a}return gu(i,[{key:"render",value:function(){var c=this,h=this.state.keyEntities,m=this.props,y=m.component,w=m.children,E=m.onVisibleChanged,A=m.onAllRemoved,P=Yu(m,ikr),j=y||Ob.Fragment,D={};return skr.forEach(function(k){D[k]=P[k],delete P[k]}),delete P.keys,Ob.createElement(j,P,h.map(function(k,z){var V=k.status,G=Yu(k,akr),K=V===z7||V===F7;return Ob.createElement(t,yo({},D,{key:G.key,visible:K,eventProps:G,onVisibleChanged:function(te){E==null||E(te,{key:G.key}),te||c.removeKey(G.key)}}),function(Z,te){return w(nr(nr({},Z),{},{index:z}),te)})}))}}],[{key:"getDerivedStateFromProps",value:function(c,h){var m=c.keys,y=h.keyEntities,w=B7(m),E=Cot(y,w);return{keyEntities:E.filter(function(A){var P=y.find(function(j){var D=j.key;return A.key===D});return!(P&&P.status===V7&&A.status===U7)})}}}]),i}(Ob.Component);return Zt(r,"defaultProps",{component:"div"}),r}var ukr=lkr(D7);var UT=q7;u();function G7(e){var t=e.prefixCls,r=e.motion,n=e.animation,o=e.transitionName;return r||(n?{motionName:"".concat(t,"-").concat(n)}:o?{motionName:o}:null)}function tue(e){var t=e.prefixCls,r=e.visible,n=e.zIndex,o=e.mask,i=e.maskMotion,a=e.maskAnimation,c=e.maskTransitionName;if(!o)return null;var h={};return(i||c||a)&&(h=nr({motionAppear:!0},G7({motion:i,prefixCls:t,transitionName:c,animation:a}))),eue.createElement(UT,yo({},h,{visible:r,removeOnLeave:!0}),function(m){var y=m.className;return eue.createElement("div",{style:{zIndex:n},className:(0,Aot.default)("".concat(t,"-mask"),y)})})}u();var Cp=Q(De()),Db=Q(De());u();u();u();function Oot(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(o){return Object.getOwnPropertyDescriptor(e,o).enumerable})),r.push.apply(r,n)}return r}function Pot(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?Oot(Object(r),!0).forEach(function(n){ckr(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Oot(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function aue(e){"@babel/helpers - typeof";return aue=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},aue(e)}function ckr(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var D4,pkr={Webkit:"-webkit-",Moz:"-moz-",ms:"-ms-",O:"-o-"};function Z7(){if(D4!==void 0)return D4;D4="";var e=document.createElement("p").style,t="Transform";for(var r in pkr)r+t in e&&(D4=r);return D4}function Got(){return Z7()?"".concat(Z7(),"TransitionProperty"):"transitionProperty"}function K7(){return Z7()?"".concat(Z7(),"Transform"):"transform"}function Dot(e,t){var r=Got();r&&(e.style[r]=t,r!=="transitionProperty"&&(e.style.transitionProperty=t))}function rue(e,t){var r=K7();r&&(e.style[r]=t,r!=="transform"&&(e.style.transform=t))}function fkr(e){return e.style.transitionProperty||e.style[Got()]}function dkr(e){var t=window.getComputedStyle(e,null),r=t.getPropertyValue("transform")||t.getPropertyValue(K7());if(r&&r!=="none"){var n=r.replace(/[^0-9\-.,]/g,"").split(",");return{x:parseFloat(n[12]||n[4],0),y:parseFloat(n[13]||n[5],0)}}return{x:0,y:0}}var hkr=/matrix\((.*)\)/,mkr=/matrix3d\((.*)\)/;function gkr(e,t){var r=window.getComputedStyle(e,null),n=r.getPropertyValue("transform")||r.getPropertyValue(K7());if(n&&n!=="none"){var o,i=n.match(hkr);if(i)i=i[1],o=i.split(",").map(function(c){return parseFloat(c,10)}),o[4]=t.x,o[5]=t.y,rue(e,"matrix(".concat(o.join(","),")"));else{var a=n.match(mkr)[1];o=a.split(",").map(function(c){return parseFloat(c,10)}),o[12]=t.x,o[13]=t.y,rue(e,"matrix3d(".concat(o.join(","),")"))}}else rue(e,"translateX(".concat(t.x,"px) translateY(").concat(t.y,"px) translateZ(0)"))}var vkr=/[\-+]?(?:\d*\.|)\d+(?:[eE][\-+]?\d+|)/.source,k4;function Not(e){var t=e.style.display;e.style.display="none",e.offsetHeight,e.style.display=t}function BT(e,t,r){var n=r;if(aue(t)==="object"){for(var o in t)t.hasOwnProperty(o)&&BT(e,o,t[o]);return}if(typeof n!="undefined"){typeof n=="number"&&(n="".concat(n,"px")),e.style[t]=n;return}return k4(e,t)}function ykr(e){var t,r,n,o=e.ownerDocument,i=o.body,a=o&&o.documentElement;return t=e.getBoundingClientRect(),r=Math.floor(t.left),n=Math.floor(t.top),r-=a.clientLeft||i.clientLeft||0,n-=a.clientTop||i.clientTop||0,{left:r,top:n}}function Hot(e,t){var r=e["page".concat(t?"Y":"X","Offset")],n="scroll".concat(t?"Top":"Left");if(typeof r!="number"){var o=e.document;r=o.documentElement[n],typeof r!="number"&&(r=o.body[n])}return r}function Wot(e){return Hot(e)}function $ot(e){return Hot(e,!0)}function L4(e){var t=ykr(e),r=e.ownerDocument,n=r.defaultView||r.parentWindow;return t.left+=Wot(n),t.top+=$ot(n),t}function cue(e){return e!=null&&e==e.window}function Yot(e){return cue(e)?e.document:e.nodeType===9?e:e.ownerDocument}function _kr(e,t,r){var n=r,o="",i=Yot(e);return n=n||i.defaultView.getComputedStyle(e,null),n&&(o=n.getPropertyValue(t)||n[t]),o}var bkr=new RegExp("^(".concat(vkr,")(?!px)[a-z%]+$"),"i"),xkr=/^(top|right|bottom|left)$/,nue="currentStyle",oue="runtimeStyle",Pb="left",wkr="px";function Ekr(e,t){var r=e[nue]&&e[nue][t];if(bkr.test(r)&&!xkr.test(t)){var n=e.style,o=n[Pb],i=e[oue][Pb];e[oue][Pb]=e[nue][Pb],n[Pb]=t==="fontSize"?"1em":r||0,r=n.pixelLeft+wkr,n[Pb]=o,e[oue][Pb]=i}return r===""?"auto":r}typeof window!="undefined"&&(k4=window.getComputedStyle?_kr:Ekr);function H7(e,t){return e==="left"?t.useCssRight?"right":e:t.useCssBottom?"bottom":e}function Lot(e){if(e==="left")return"right";if(e==="right")return"left";if(e==="top")return"bottom";if(e==="bottom")return"top"}function kot(e,t,r){BT(e,"position")==="static"&&(e.style.position="relative");var n=-999,o=-999,i=H7("left",r),a=H7("top",r),c=Lot(i),h=Lot(a);i!=="left"&&(n=999),a!=="top"&&(o=999);var m="",y=L4(e);("left"in t||"top"in t)&&(m=fkr(e)||"",Dot(e,"none")),"left"in t&&(e.style[c]="",e.style[i]="".concat(n,"px")),"top"in t&&(e.style[h]="",e.style[a]="".concat(o,"px")),Not(e);var w=L4(e),E={};for(var A in t)if(t.hasOwnProperty(A)){var P=H7(A,r),j=A==="left"?n:o,D=y[A]-w[A];P===A?E[P]=j+D:E[P]=j-D}BT(e,E),Not(e),("left"in t||"top"in t)&&Dot(e,m);var k={};for(var z in t)if(t.hasOwnProperty(z)){var V=H7(z,r),G=t[z]-y[z];z===V?k[V]=E[V]+G:k[V]=E[V]-G}BT(e,k)}function Skr(e,t){var r=L4(e),n=dkr(e),o={x:n.x,y:n.y};"left"in t&&(o.x=n.x+t.left-r.left),"top"in t&&(o.y=n.y+t.top-r.top),gkr(e,o)}function Tkr(e,t,r){if(r.ignoreShake){var n=L4(e),o=n.left.toFixed(0),i=n.top.toFixed(0),a=t.left.toFixed(0),c=t.top.toFixed(0);if(o===a&&i===c)return}r.useCssRight||r.useCssBottom?kot(e,t,r):r.useCssTransform&&K7()in document.body.style?Skr(e,t):kot(e,t,r)}function pue(e,t){for(var r=0;r<e.length;r++)t(e[r])}function Zot(e){return k4(e,"boxSizing")==="border-box"}var Ikr=["margin","border","padding"],sue=-1,Mkr=2,lue=1,Ckr=0;function Akr(e,t,r){var n={},o=e.style,i;for(i in t)t.hasOwnProperty(i)&&(n[i]=o[i],o[i]=t[i]);r.call(e);for(i in t)t.hasOwnProperty(i)&&(o[i]=n[i])}function N4(e,t,r){var n=0,o,i,a;for(i=0;i<t.length;i++)if(o=t[i],o)for(a=0;a<r.length;a++){var c=void 0;o==="border"?c="".concat(o).concat(r[a],"Width"):c=o+r[a],n+=parseFloat(k4(e,c))||0}return n}var vm={getParent:function(t){var r=t;do r.nodeType===11&&r.host?r=r.host:r=r.parentNode;while(r&&r.nodeType!==1&&r.nodeType!==9);return r}};pue(["Width","Height"],function(e){vm["doc".concat(e)]=function(t){var r=t.document;return Math.max(r.documentElement["scroll".concat(e)],r.body["scroll".concat(e)],vm["viewport".concat(e)](r))},vm["viewport".concat(e)]=function(t){var r="client".concat(e),n=t.document,o=n.body,i=n.documentElement,a=i[r];return n.compatMode==="CSS1Compat"&&a||o&&o[r]||a}});function Rot(e,t,r){var n=r;if(cue(e))return t==="width"?vm.viewportWidth(e):vm.viewportHeight(e);if(e.nodeType===9)return t==="width"?vm.docWidth(e):vm.docHeight(e);var o=t==="width"?["Left","Right"]:["Top","Bottom"],i=Math.floor(t==="width"?e.getBoundingClientRect().width:e.getBoundingClientRect().height),a=Zot(e),c=0;(i==null||i<=0)&&(i=void 0,c=k4(e,t),(c==null||Number(c)<0)&&(c=e.style[t]||0),c=Math.floor(parseFloat(c))||0),n===void 0&&(n=a?lue:sue);var h=i!==void 0||a,m=i||c;return n===sue?h?m-N4(e,["border","padding"],o):c:h?n===lue?m:m+(n===Mkr?-N4(e,["border"],o):N4(e,["margin"],o)):c+N4(e,Ikr.slice(n),o)}var Okr={position:"absolute",visibility:"hidden",display:"block"};function jot(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];var n,o=t[0];return o.offsetWidth!==0?n=Rot.apply(void 0,t):Akr(o,Okr,function(){n=Rot.apply(void 0,t)}),n}pue(["width","height"],function(e){var t=e.charAt(0).toUpperCase()+e.slice(1);vm["outer".concat(t)]=function(n,o){return n&&jot(n,e,o?Ckr:lue)};var r=e==="width"?["Left","Right"]:["Top","Bottom"];vm[e]=function(n,o){var i=o;if(i!==void 0){if(n){var a=Zot(n);return a&&(i+=N4(n,["padding","border"],r)),BT(n,e,i)}return}return n&&jot(n,e,sue)}});function Kot(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r]);return e}var Yn={getWindow:function(t){if(t&&t.document&&t.setTimeout)return t;var r=t.ownerDocument||t;return r.defaultView||r.parentWindow},getDocument:Yot,offset:function(t,r,n){if(typeof r!="undefined")Tkr(t,r,n||{});else return L4(t)},isWindow:cue,each:pue,css:BT,clone:function(t){var r,n={};for(r in t)t.hasOwnProperty(r)&&(n[r]=t[r]);var o=t.overflow;if(o)for(r in t)t.hasOwnProperty(r)&&(n.overflow[r]=t.overflow[r]);return n},mix:Kot,getWindowScrollLeft:function(t){return Wot(t)},getWindowScrollTop:function(t){return $ot(t)},merge:function(){for(var t={},r=0;r<arguments.length;r++)Yn.mix(t,r<0||arguments.length<=r?void 0:arguments[r]);return t},viewportWidth:0,viewportHeight:0};Kot(Yn,vm);var iue=Yn.getParent;function uue(e){if(Yn.isWindow(e)||e.nodeType===9)return null;var t=Yn.getDocument(e),r=t.body,n,o=Yn.css(e,"position"),i=o==="fixed"||o==="absolute";if(!i)return e.nodeName.toLowerCase()==="html"?null:iue(e);for(n=iue(e);n&&n!==r&&n.nodeType!==9;n=iue(n))if(o=Yn.css(n,"position"),o!=="static")return n;return null}var qot=Yn.getParent;function Pkr(e){if(Yn.isWindow(e)||e.nodeType===9)return!1;var t=Yn.getDocument(e),r=t.body,n=null;for(n=qot(e);n&&n!==r&&n!==t;n=qot(n)){var o=Yn.css(n,"position");if(o==="fixed")return!0}return!1}function fue(e,t){for(var r={left:0,right:1/0,top:0,bottom:1/0},n=uue(e),o=Yn.getDocument(e),i=o.defaultView||o.parentWindow,a=o.body,c=o.documentElement;n;){if((navigator.userAgent.indexOf("MSIE")===-1||n.clientWidth!==0)&&n!==a&&n!==c&&Yn.css(n,"overflow")!=="visible"){var h=Yn.offset(n);h.left+=n.clientLeft,h.top+=n.clientTop,r.top=Math.max(r.top,h.top),r.right=Math.min(r.right,h.left+n.clientWidth),r.bottom=Math.min(r.bottom,h.top+n.clientHeight),r.left=Math.max(r.left,h.left)}else if(n===a||n===c)break;n=uue(n)}var m=null;if(!Yn.isWindow(e)&&e.nodeType!==9){m=e.style.position;var y=Yn.css(e,"position");y==="absolute"&&(e.style.position="fixed")}var w=Yn.getWindowScrollLeft(i),E=Yn.getWindowScrollTop(i),A=Yn.viewportWidth(i),P=Yn.viewportHeight(i),j=c.scrollWidth,D=c.scrollHeight,k=window.getComputedStyle(a);if(k.overflowX==="hidden"&&(j=i.innerWidth),k.overflowY==="hidden"&&(D=i.innerHeight),e.style&&(e.style.position=m),t||Pkr(e))r.left=Math.max(r.left,w),r.top=Math.max(r.top,E),r.right=Math.min(r.right,w+A),r.bottom=Math.min(r.bottom,E+P);else{var z=Math.max(j,w+A);r.right=Math.min(r.right,z);var V=Math.max(D,E+P);r.bottom=Math.min(r.bottom,V)}return r.top>=0&&r.left>=0&&r.bottom>r.top&&r.right>r.left?r:null}function Dkr(e,t,r,n){var o=Yn.clone(e),i={width:t.width,height:t.height};return n.adjustX&&o.left<r.left&&(o.left=r.left),n.resizeWidth&&o.left>=r.left&&o.left+i.width>r.right&&(i.width-=o.left+i.width-r.right),n.adjustX&&o.left+i.width>r.right&&(o.left=Math.max(r.right-i.width,r.left)),n.adjustY&&o.top<r.top&&(o.top=r.top),n.resizeHeight&&o.top>=r.top&&o.top+i.height>r.bottom&&(i.height-=o.top+i.height-r.bottom),n.adjustY&&o.top+i.height>r.bottom&&(o.top=Math.max(r.bottom-i.height,r.top)),Yn.mix(o,i)}function due(e){var t,r,n;if(!Yn.isWindow(e)&&e.nodeType!==9)t=Yn.offset(e),r=Yn.outerWidth(e),n=Yn.outerHeight(e);else{var o=Yn.getWindow(e);t={left:Yn.getWindowScrollLeft(o),top:Yn.getWindowScrollTop(o)},r=Yn.viewportWidth(o),n=Yn.viewportHeight(o)}return t.width=r,t.height=n,t}function zot(e,t){var r=t.charAt(0),n=t.charAt(1),o=e.width,i=e.height,a=e.left,c=e.top;return r==="c"?c+=i/2:r==="b"&&(c+=i),n==="c"?a+=o/2:n==="r"&&(a+=o),{left:a,top:c}}function W7(e,t,r,n,o){var i=zot(t,r[1]),a=zot(e,r[0]),c=[a.left-i.left,a.top-i.top];return{left:Math.round(e.left-c[0]+n[0]-o[0]),top:Math.round(e.top-c[1]+n[1]-o[1])}}function Fot(e,t,r){return e.left<r.left||e.left+t.width>r.right}function Uot(e,t,r){return e.top<r.top||e.top+t.height>r.bottom}function Nkr(e,t,r){return e.left>r.right||e.left+t.width<r.left}function Lkr(e,t,r){return e.top>r.bottom||e.top+t.height<r.top}function $7(e,t,r){var n=[];return Yn.each(e,function(o){n.push(o.replace(t,function(i){return r[i]}))}),n}function Y7(e,t){return e[t]=-e[t],e}function Bot(e,t){var r;return /%$/.test(e)?r=parseInt(e.substring(0,e.length-1),10)/100*t:r=parseInt(e,10),r||0}function Vot(e,t){e[0]=Bot(e[0],t.width),e[1]=Bot(e[1],t.height)}function Xot(e,t,r,n){var o=r.points,i=r.offset||[0,0],a=r.targetOffset||[0,0],c=r.overflow,h=r.source||e;i=[].concat(i),a=[].concat(a),c=c||{};var m={},y=0,w=!!(c&&c.alwaysByViewport),E=fue(h,w),A=due(h);Vot(i,A),Vot(a,t);var P=W7(A,t,o,i,a),j=Yn.merge(A,P);if(E&&(c.adjustX||c.adjustY)&&n){if(c.adjustX&&Fot(P,A,E)){var D=$7(o,/[lr]/gi,{l:"r",r:"l"}),k=Y7(i,0),z=Y7(a,0),V=W7(A,t,D,k,z);Nkr(V,A,E)||(y=1,o=D,i=k,a=z)}if(c.adjustY&&Uot(P,A,E)){var G=$7(o,/[tb]/gi,{t:"b",b:"t"}),K=Y7(i,1),Z=Y7(a,1),te=W7(A,t,G,K,Z);Lkr(te,A,E)||(y=1,o=G,i=K,a=Z)}y&&(P=W7(A,t,o,i,a),Yn.mix(j,P));var se=Fot(P,A,E),le=Uot(P,A,E);if(se||le){var pe=o;se&&(pe=$7(o,/[lr]/gi,{l:"r",r:"l"})),le&&(pe=$7(o,/[tb]/gi,{t:"b",b:"t"})),o=pe,i=r.offset||[0,0],a=r.targetOffset||[0,0]}m.adjustX=c.adjustX&&se,m.adjustY=c.adjustY&&le,(m.adjustX||m.adjustY)&&(j=Dkr(P,A,E,m))}return j.width!==A.width&&Yn.css(h,"width",Yn.width(h)+j.width-A.width),j.height!==A.height&&Yn.css(h,"height",Yn.height(h)+j.height-A.height),Yn.offset(h,{left:j.left,top:j.top},{useCssRight:r.useCssRight,useCssBottom:r.useCssBottom,useCssTransform:r.useCssTransform,ignoreShake:r.ignoreShake}),{points:o,offset:i,targetOffset:a,overflow:m}}function kkr(e,t){var r=fue(e,t),n=due(e);return!r||n.left+n.width<=r.left||n.top+n.height<=r.top||n.left>=r.right||n.top>=r.bottom}function X7(e,t,r){var n=r.target||t,o=due(n),i=!kkr(n,r.overflow&&r.overflow.alwaysByViewport);return Xot(e,o,r,i)}X7.__getOffsetParent=uue;X7.__getVisibleRectForElement=fue;function Jot(e,t,r){var n,o,i=Yn.getDocument(e),a=i.defaultView||i.parentWindow,c=Yn.getWindowScrollLeft(a),h=Yn.getWindowScrollTop(a),m=Yn.viewportWidth(a),y=Yn.viewportHeight(a);"pageX"in t?n=t.pageX:n=c+t.clientX,"pageY"in t?o=t.pageY:o=h+t.clientY;var w={left:n,top:o,width:0,height:0},E=n>=0&&n<=c+m&&o>=0&&o<=h+y,A=[r.points[0],"cc"];return Xot(e,w,Pot(Pot({},r),{},{points:A}),E)}u();function Rkr(e,t){var r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!1,n=new Set;function o(i,a){var c=arguments.length>2&&arguments[2]!==void 0?arguments[2]:1,h=n.has(i);if(dm(!h,"Warning: There may be circular references"),h)return!1;if(i===a)return!0;if(r&&c>1)return!1;n.add(i);var m=c+1;if(Array.isArray(i)){if(!Array.isArray(a)||i.length!==a.length)return!1;for(var y=0;y<i.length;y++)if(!o(i[y],a[y],m))return!1;return!0}if(i&&a&&No(i)==="object"&&No(a)==="object"){var w=Object.keys(i);return w.length!==Object.keys(a).length?!1:w.every(function(E){return o(i[E],a[E],m)})}return!1}return o(e,t)}var Qot=Rkr;u();var eit=function(e){if(!e)return!1;if(e instanceof Element){if(e.offsetParent)return!0;if(e.getBBox){var t=e.getBBox(),r=t.width,n=t.height;if(r||n)return!0}if(e.getBoundingClientRect){var o=e.getBoundingClientRect(),i=o.width,a=o.height;if(i||a)return!0}}return!1};var Gl=Q(De());u();var hue=Q(De()),tit=function(e,t){var r=hue.default.useRef(!1),n=hue.default.useRef(null);function o(){window.clearTimeout(n.current)}function i(a){if(o(),!r.current||a===!0){if(e(a)===!1)return;r.current=!0,n.current=window.setTimeout(function(){r.current=!1},t)}else n.current=window.setTimeout(function(){r.current=!1,i()},t)}return[i,function(){r.current=!1,o()}]};u();u();var nit=function(){if(typeof Map!="undefined")return Map;function e(t,r){var n=-1;return t.some(function(o,i){return o[0]===r?(n=i,!0):!1}),n}return function(){function t(){this.__entries__=[]}return Object.defineProperty(t.prototype,"size",{get:function(){return this.__entries__.length},enumerable:!0,configurable:!0}),t.prototype.get=function(r){var n=e(this.__entries__,r),o=this.__entries__[n];return o&&o[1]},t.prototype.set=function(r,n){var o=e(this.__entries__,r);~o?this.__entries__[o][1]=n:this.__entries__.push([r,n])},t.prototype.delete=function(r){var n=this.__entries__,o=e(n,r);~o&&n.splice(o,1)},t.prototype.has=function(r){return!!~e(this.__entries__,r)},t.prototype.clear=function(){this.__entries__.splice(0)},t.prototype.forEach=function(r,n){n===void 0&&(n=null);for(var o=0,i=this.__entries__;o<i.length;o++){var a=i[o];r.call(n,a[1],a[0])}},t}()}(),mue=typeof window!="undefined"&&typeof document!="undefined"&&window.document===document,J7=function(){return typeof global!="undefined"&&global.Math===Math?global:typeof self!="undefined"&&self.Math===Math?self:typeof window!="undefined"&&window.Math===Math?window:Function("return this")()}(),jkr=function(){return typeof requestAnimationFrame=="function"?requestAnimationFrame.bind(J7):function(e){return setTimeout(function(){return e(Date.now())},1e3/60)}}(),qkr=2;function zkr(e,t){var r=!1,n=!1,o=0;function i(){r&&(r=!1,e()),n&&c()}function a(){jkr(i)}function c(){var h=Date.now();if(r){if(h-o<qkr)return;n=!0}else r=!0,n=!1,setTimeout(a,t);o=h}return c}var Fkr=20,Ukr=["top","right","bottom","left","width","height","size","weight"],Bkr=typeof MutationObserver!="undefined",Vkr=function(){function e(){this.connected_=!1,this.mutationEventsAdded_=!1,this.mutationsObserver_=null,this.observers_=[],this.onTransitionEnd_=this.onTransitionEnd_.bind(this),this.refresh=zkr(this.refresh.bind(this),Fkr)}return e.prototype.addObserver=function(t){~this.observers_.indexOf(t)||this.observers_.push(t),this.connected_||this.connect_()},e.prototype.removeObserver=function(t){var r=this.observers_,n=r.indexOf(t);~n&&r.splice(n,1),!r.length&&this.connected_&&this.disconnect_()},e.prototype.refresh=function(){var t=this.updateObservers_();t&&this.refresh()},e.prototype.updateObservers_=function(){var t=this.observers_.filter(function(r){return r.gatherActive(),r.hasActive()});return t.forEach(function(r){return r.broadcastActive()}),t.length>0},e.prototype.connect_=function(){!mue||this.connected_||(document.addEventListener("transitionend",this.onTransitionEnd_),window.addEventListener("resize",this.refresh),Bkr?(this.mutationsObserver_=new MutationObserver(this.refresh),this.mutationsObserver_.observe(document,{attributes:!0,childList:!0,characterData:!0,subtree:!0})):(document.addEventListener("DOMSubtreeModified",this.refresh),this.mutationEventsAdded_=!0),this.connected_=!0)},e.prototype.disconnect_=function(){!mue||!this.connected_||(document.removeEventListener("transitionend",this.onTransitionEnd_),window.removeEventListener("resize",this.refresh),this.mutationsObserver_&&this.mutationsObserver_.disconnect(),this.mutationEventsAdded_&&document.removeEventListener("DOMSubtreeModified",this.refresh),this.mutationsObserver_=null,this.mutationEventsAdded_=!1,this.connected_=!1)},e.prototype.onTransitionEnd_=function(t){var r=t.propertyName,n=r===void 0?"":r,o=Ukr.some(function(i){return!!~n.indexOf(i)});o&&this.refresh()},e.getInstance=function(){return this.instance_||(this.instance_=new e),this.instance_},e.instance_=null,e}(),oit=function(e,t){for(var r=0,n=Object.keys(t);r<n.length;r++){var o=n[r];Object.defineProperty(e,o,{value:t[o],enumerable:!1,writable:!1,configurable:!0})}return e},VT=function(e){var t=e&&e.ownerDocument&&e.ownerDocument.defaultView;return t||J7},iit=e9(0,0,0,0);function Q7(e){return parseFloat(e)||0}function rit(e){for(var t=[],r=1;r<arguments.length;r++)t[r-1]=arguments[r];return t.reduce(function(n,o){var i=e["border-"+o+"-width"];return n+Q7(i)},0)}function Gkr(e){for(var t=["top","right","bottom","left"],r={},n=0,o=t;n<o.length;n++){var i=o[n],a=e["padding-"+i];r[i]=Q7(a)}return r}function Hkr(e){var t=e.getBBox();return e9(0,0,t.width,t.height)}function Wkr(e){var t=e.clientWidth,r=e.clientHeight;if(!t&&!r)return iit;var n=VT(e).getComputedStyle(e),o=Gkr(n),i=o.left+o.right,a=o.top+o.bottom,c=Q7(n.width),h=Q7(n.height);if(n.boxSizing==="border-box"&&(Math.round(c+i)!==t&&(c-=rit(n,"left","right")+i),Math.round(h+a)!==r&&(h-=rit(n,"top","bottom")+a)),!Ykr(e)){var m=Math.round(c+i)-t,y=Math.round(h+a)-r;Math.abs(m)!==1&&(c-=m),Math.abs(y)!==1&&(h-=y)}return e9(o.left,o.top,c,h)}var $kr=function(){return typeof SVGGraphicsElement!="undefined"?function(e){return e instanceof VT(e).SVGGraphicsElement}:function(e){return e instanceof VT(e).SVGElement&&typeof e.getBBox=="function"}}();function Ykr(e){return e===VT(e).document.documentElement}function Zkr(e){return mue?$kr(e)?Hkr(e):Wkr(e):iit}function Kkr(e){var t=e.x,r=e.y,n=e.width,o=e.height,i=typeof DOMRectReadOnly!="undefined"?DOMRectReadOnly:Object,a=Object.create(i.prototype);return oit(a,{x:t,y:r,width:n,height:o,top:r,right:t+n,bottom:o+r,left:t}),a}function e9(e,t,r,n){return{x:e,y:t,width:r,height:n}}var Xkr=function(){function e(t){this.broadcastWidth=0,this.broadcastHeight=0,this.contentRect_=e9(0,0,0,0),this.target=t}return e.prototype.isActive=function(){var t=Zkr(this.target);return this.contentRect_=t,t.width!==this.broadcastWidth||t.height!==this.broadcastHeight},e.prototype.broadcastRect=function(){var t=this.contentRect_;return this.broadcastWidth=t.width,this.broadcastHeight=t.height,t},e}(),Jkr=function(){function e(t,r){var n=Kkr(r);oit(this,{target:t,contentRect:n})}return e}(),Qkr=function(){function e(t,r,n){if(this.activeObservations_=[],this.observations_=new nit,typeof t!="function")throw new TypeError("The callback provided as parameter 1 is not a function.");this.callback_=t,this.controller_=r,this.callbackCtx_=n}return e.prototype.observe=function(t){if(!arguments.length)throw new TypeError("1 argument required, but only 0 present.");if(!(typeof Element=="undefined"||!(Element instanceof Object))){if(!(t instanceof VT(t).Element))throw new TypeError("parameter 1 is not of type \"Element\".");var r=this.observations_;r.has(t)||(r.set(t,new Xkr(t)),this.controller_.addObserver(this),this.controller_.refresh())}},e.prototype.unobserve=function(t){if(!arguments.length)throw new TypeError("1 argument required, but only 0 present.");if(!(typeof Element=="undefined"||!(Element instanceof Object))){if(!(t instanceof VT(t).Element))throw new TypeError("parameter 1 is not of type \"Element\".");var r=this.observations_;r.has(t)&&(r.delete(t),r.size||this.controller_.removeObserver(this))}},e.prototype.disconnect=function(){this.clearActive(),this.observations_.clear(),this.controller_.removeObserver(this)},e.prototype.gatherActive=function(){var t=this;this.clearActive(),this.observations_.forEach(function(r){r.isActive()&&t.activeObservations_.push(r)})},e.prototype.broadcastActive=function(){if(this.hasActive()){var t=this.callbackCtx_,r=this.activeObservations_.map(function(n){return new Jkr(n.target,n.broadcastRect())});this.callback_.call(t,r,t),this.clearActive()}},e.prototype.clearActive=function(){this.activeObservations_.splice(0)},e.prototype.hasActive=function(){return this.activeObservations_.length>0},e}(),ait=typeof WeakMap!="undefined"?new WeakMap:new nit,sit=function(){function e(t){if(!(this instanceof e))throw new TypeError("Cannot call a class as a function.");if(!arguments.length)throw new TypeError("1 argument required, but only 0 present.");var r=Vkr.getInstance(),n=new Qkr(t,r,this);ait.set(this,n)}return e}();["observe","unobserve","disconnect"].forEach(function(e){sit.prototype[e]=function(){var t;return(t=ait.get(this))[e].apply(t,arguments)}});var eRr=function(){return typeof J7.ResizeObserver!="undefined"?J7.ResizeObserver:sit}(),lit=eRr;function uit(e,t){return e===t?!0:!e||!t?!1:"pageX"in t&&"pageY"in t?e.pageX===t.pageX&&e.pageY===t.pageY:"clientX"in t&&"clientY"in t?e.clientX===t.clientX&&e.clientY===t.clientY:!1}function cit(e,t){e!==document.activeElement&&Ab(t,e)&&typeof e.focus=="function"&&e.focus()}function gue(e,t){var r=null,n=null;function o(a){var c=Ro(a,1),h=c[0].target;if(document.documentElement.contains(h)){var m=h.getBoundingClientRect(),y=m.width,w=m.height,E=Math.floor(y),A=Math.floor(w);(r!==E||n!==A)&&Promise.resolve().then(function(){t({width:E,height:A})}),r=E,n=A}}var i=new lit(o);return e&&i.observe(e),function(){i.disconnect()}}function pit(e){return typeof e!="function"?null:e()}function fit(e){return No(e)!=="object"||!e?null:e}var tRr=function(t,r){var n=t.children,o=t.disabled,i=t.target,a=t.align,c=t.onAlign,h=t.monitorWindowResize,m=t.monitorBufferTime,y=m===void 0?0:m,w=Gl.default.useRef({}),E=Gl.default.useRef(),A=Gl.default.Children.only(n),P=Gl.default.useRef({});P.current.disabled=o,P.current.target=i,P.current.align=a,P.current.onAlign=c;var j=tit(function(){var me=P.current,_e=me.disabled,de=me.target,Ce=me.align,Ye=me.onAlign,rt=E.current;if(!_e&&de&&rt){var ct,qe=pit(de),lt=fit(de);w.current.element=qe,w.current.point=lt,w.current.align=Ce;var bt=document,Tt=bt.activeElement;return qe&&eit(qe)?ct=X7(rt,qe,Ce):lt&&(ct=Jot(rt,lt,Ce)),cit(Tt,rt),Ye&&ct&&Ye(rt,ct),!0}return!1},y),D=Ro(j,2),k=D[0],z=D[1],V=Gl.default.useState(),G=Ro(V,2),K=G[0],Z=G[1],te=Gl.default.useState(),se=Ro(te,2),le=se[0],pe=se[1];return C4(function(){Z(pit(i)),pe(fit(i))}),Gl.default.useEffect(function(){(w.current.element!==K||!uit(w.current.point,le)||!Qot(w.current.align,a))&&k()}),Gl.default.useEffect(function(){var me=gue(E.current,k);return me},[E.current]),Gl.default.useEffect(function(){var me=gue(K,k);return me},[K]),Gl.default.useEffect(function(){o?z():k()},[o]),Gl.default.useEffect(function(){if(h){var me=Zu(window,"resize",k);return me.remove}},[h]),Gl.default.useEffect(function(){return function(){z()}},[]),Gl.default.useImperativeHandle(r,function(){return{forceAlign:function(){return k(!0)}}}),Gl.default.isValidElement(A)&&(A=Gl.default.cloneElement(A,{ref:qT(A.ref,E)})),A},dit=Gl.default.forwardRef(tRr);dit.displayName="Align";var hit=dit;var mit=hit;var xit=Q(Uo());u();u();function t9(){"use strict";t9=function(){return t};var e,t={},r=Object.prototype,n=r.hasOwnProperty,o=typeof Symbol=="function"?Symbol:{},i=o.iterator||"@@iterator",a=o.asyncIterator||"@@asyncIterator",c=o.toStringTag||"@@toStringTag";function h(pe,me,_e,de){return Object.defineProperty(pe,me,{value:_e,enumerable:!de,configurable:!de,writable:!de})}try{h({},"")}catch(pe){h=function(_e,de,Ce){return _e[de]=Ce}}function m(pe,me,_e,de){var Ce=me&&me.prototype instanceof E?me:E,Ye=Object.create(Ce.prototype);return h(Ye,"_invoke",function(rt,ct,qe){var lt=1;return function(bt,Tt){if(lt===3)throw Error("Generator is already running");if(lt===4){if(bt==="throw")throw Tt;return{value:e,done:!0}}for(qe.method=bt,qe.arg=Tt;;){var et=qe.delegate;if(et){var pt=K(et,qe);if(pt){if(pt===w)continue;return pt}}if(qe.method==="next")qe.sent=qe._sent=qe.arg;else if(qe.method==="throw"){if(lt===1)throw lt=4,qe.arg;qe.dispatchException(qe.arg)}else qe.method==="return"&&qe.abrupt("return",qe.arg);lt=3;var ot=y(rt,ct,qe);if(ot.type==="normal"){if(lt=qe.done?4:2,ot.arg===w)continue;return{value:ot.arg,done:qe.done}}ot.type==="throw"&&(lt=4,qe.method="throw",qe.arg=ot.arg)}}}(pe,_e,new se(de||[])),!0),Ye}function y(pe,me,_e){try{return{type:"normal",arg:pe.call(me,_e)}}catch(de){return{type:"throw",arg:de}}}t.wrap=m;var w={};function E(){}function A(){}function P(){}var j={};h(j,i,function(){return this});var D=Object.getPrototypeOf,k=D&&D(D(le([])));k&&k!==r&&n.call(k,i)&&(j=k);var z=P.prototype=E.prototype=Object.create(j);function V(pe){["next","throw","return"].forEach(function(me){h(pe,me,function(_e){return this._invoke(me,_e)})})}function G(pe,me){function _e(Ce,Ye,rt,ct){var qe=y(pe[Ce],pe,Ye);if(qe.type!=="throw"){var lt=qe.arg,bt=lt.value;return bt&&No(bt)=="object"&&n.call(bt,"__await")?me.resolve(bt.__await).then(function(Tt){_e("next",Tt,rt,ct)},function(Tt){_e("throw",Tt,rt,ct)}):me.resolve(bt).then(function(Tt){lt.value=Tt,rt(lt)},function(Tt){return _e("throw",Tt,rt,ct)})}ct(qe.arg)}var de;h(this,"_invoke",function(Ce,Ye){function rt(){return new me(function(ct,qe){_e(Ce,Ye,ct,qe)})}return de=de?de.then(rt,rt):rt()},!0)}function K(pe,me){var _e=me.method,de=pe.i[_e];if(de===e)return me.delegate=null,_e==="throw"&&pe.i.return&&(me.method="return",me.arg=e,K(pe,me),me.method==="throw")||_e!=="return"&&(me.method="throw",me.arg=new TypeError("The iterator does not provide a '"+_e+"' method")),w;var Ce=y(de,pe.i,me.arg);if(Ce.type==="throw")return me.method="throw",me.arg=Ce.arg,me.delegate=null,w;var Ye=Ce.arg;return Ye?Ye.done?(me[pe.r]=Ye.value,me.next=pe.n,me.method!=="return"&&(me.method="next",me.arg=e),me.delegate=null,w):Ye:(me.method="throw",me.arg=new TypeError("iterator result is not an object"),me.delegate=null,w)}function Z(pe){this.tryEntries.push(pe)}function te(pe){var me=pe[4]||{};me.type="normal",me.arg=e,pe[4]=me}function se(pe){this.tryEntries=[[-1]],pe.forEach(Z,this),this.reset(!0)}function le(pe){if(pe!=null){var me=pe[i];if(me)return me.call(pe);if(typeof pe.next=="function")return pe;if(!isNaN(pe.length)){var _e=-1,de=function Ce(){for(;++_e<pe.length;)if(n.call(pe,_e))return Ce.value=pe[_e],Ce.done=!1,Ce;return Ce.value=e,Ce.done=!0,Ce};return de.next=de}}throw new TypeError(No(pe)+" is not iterable")}return A.prototype=P,h(z,"constructor",P),h(P,"constructor",A),A.displayName=h(P,c,"GeneratorFunction"),t.isGeneratorFunction=function(pe){var me=typeof pe=="function"&&pe.constructor;return!!me&&(me===A||(me.displayName||me.name)==="GeneratorFunction")},t.mark=function(pe){return Object.setPrototypeOf?Object.setPrototypeOf(pe,P):(pe.__proto__=P,h(pe,c,"GeneratorFunction")),pe.prototype=Object.create(z),pe},t.awrap=function(pe){return{__await:pe}},V(G.prototype),h(G.prototype,a,function(){return this}),t.AsyncIterator=G,t.async=function(pe,me,_e,de,Ce){Ce===void 0&&(Ce=Promise);var Ye=new G(m(pe,me,_e,de),Ce);return t.isGeneratorFunction(me)?Ye:Ye.next().then(function(rt){return rt.done?rt.value:Ye.next()})},V(z),h(z,c,"Generator"),h(z,i,function(){return this}),h(z,"toString",function(){return"[object Generator]"}),t.keys=function(pe){var me=Object(pe),_e=[];for(var de in me)_e.unshift(de);return function Ce(){for(;_e.length;)if((de=_e.pop())in me)return Ce.value=de,Ce.done=!1,Ce;return Ce.done=!0,Ce}},t.values=le,se.prototype={constructor:se,reset:function(me){if(this.prev=this.next=0,this.sent=this._sent=e,this.done=!1,this.delegate=null,this.method="next",this.arg=e,this.tryEntries.forEach(te),!me)for(var _e in this)_e.charAt(0)==="t"&&n.call(this,_e)&&!isNaN(+_e.slice(1))&&(this[_e]=e)},stop:function(){this.done=!0;var me=this.tryEntries[0][4];if(me.type==="throw")throw me.arg;return this.rval},dispatchException:function(me){if(this.done)throw me;var _e=this;function de(bt){rt.type="throw",rt.arg=me,_e.next=bt}for(var Ce=_e.tryEntries.length-1;Ce>=0;--Ce){var Ye=this.tryEntries[Ce],rt=Ye[4],ct=this.prev,qe=Ye[1],lt=Ye[2];if(Ye[0]===-1)return de("end"),!1;if(!qe&&!lt)throw Error("try statement without catch or finally");if(Ye[0]!=null&&Ye[0]<=ct){if(ct<qe)return this.method="next",this.arg=e,de(qe),!0;if(ct<lt)return de(lt),!1}}},abrupt:function(me,_e){for(var de=this.tryEntries.length-1;de>=0;--de){var Ce=this.tryEntries[de];if(Ce[0]>-1&&Ce[0]<=this.prev&&this.prev<Ce[2]){var Ye=Ce;break}}Ye&&(me==="break"||me==="continue")&&Ye[0]<=_e&&_e<=Ye[2]&&(Ye=null);var rt=Ye?Ye[4]:{};return rt.type=me,rt.arg=_e,Ye?(this.method="next",this.next=Ye[2],w):this.complete(rt)},complete:function(me,_e){if(me.type==="throw")throw me.arg;return me.type==="break"||me.type==="continue"?this.next=me.arg:me.type==="return"?(this.rval=this.arg=me.arg,this.method="return",this.next="end"):me.type==="normal"&&_e&&(this.next=_e),w},finish:function(me){for(var _e=this.tryEntries.length-1;_e>=0;--_e){var de=this.tryEntries[_e];if(de[2]===me)return this.complete(de[4],de[3]),te(de),w}},catch:function(me){for(var _e=this.tryEntries.length-1;_e>=0;--_e){var de=this.tryEntries[_e];if(de[0]===me){var Ce=de[4];if(Ce.type==="throw"){var Ye=Ce.arg;te(de)}return Ye}}throw Error("illegal catch attempt")},delegateYield:function(me,_e,de){return this.delegate={i:le(me),r:_e,n:de},this.method==="next"&&(this.arg=e),w}},t}u();function git(e,t,r,n,o,i,a){try{var c=e[i](a),h=c.value}catch(m){return void r(m)}c.done?t(h):Promise.resolve(h).then(n,o)}function vit(e){return function(){var t=this,r=arguments;return new Promise(function(n,o){var i=e.apply(t,r);function a(h){git(i,n,o,a,c,"next",h)}function c(h){git(i,n,o,a,c,"throw",h)}a(void 0)})}}var GT=Q(De());var yit=["measure","alignPre","align",null,"motion"],_it=function(e,t){var r=iv(null),n=Ro(r,2),o=n[0],i=n[1],a=(0,GT.useRef)();function c(y){i(y,!0)}function h(){Fc.cancel(a.current)}function m(y){h(),a.current=Fc(function(){c(function(w){switch(o){case"align":return"motion";case"motion":return"stable";default:}return w}),y==null||y()})}return(0,GT.useEffect)(function(){c("measure")},[e]),(0,GT.useEffect)(function(){switch(o){case"measure":t();break;default:}o&&(a.current=Fc(vit(t9().mark(function y(){var w,E;return t9().wrap(function(P){for(;;)switch(P.prev=P.next){case 0:w=yit.indexOf(o),E=yit[w+1],E&&w!==-1&&c(E);case 3:case"end":return P.stop()}},y)}))))},[o]),(0,GT.useEffect)(function(){return function(){h()}},[]),[o,m]};u();var r9=Q(De()),bit=function(e){var t=r9.useState({width:0,height:0}),r=Ro(t,2),n=r[0],o=r[1];function i(c){var h=c.offsetWidth,m=c.offsetHeight,y=c.getBoundingClientRect(),w=y.width,E=y.height;Math.abs(h-w)<1&&Math.abs(m-E)<1&&(h=w,m=E),o({width:h,height:m})}var a=r9.useMemo(function(){var c={};if(e){var h=n.width,m=n.height;e.indexOf("height")!==-1&&m?c.height=m:e.indexOf("minHeight")!==-1&&m&&(c.minHeight=m),e.indexOf("width")!==-1&&h?c.width=h:e.indexOf("minWidth")!==-1&&h&&(c.minWidth=h)}return c},[e,n]);return[a,i]};var wit=Cp.forwardRef(function(e,t){var r=e.visible,n=e.prefixCls,o=e.className,i=e.style,a=e.children,c=e.zIndex,h=e.stretch,m=e.destroyPopupOnHide,y=e.forceRender,w=e.align,E=e.point,A=e.getRootDomNode,P=e.getClassNameFromAlign,j=e.onAlign,D=e.onMouseEnter,k=e.onMouseLeave,z=e.onMouseDown,V=e.onTouchStart,G=e.onClick,K=(0,Db.useRef)(),Z=(0,Db.useRef)(),te=(0,Db.useState)(),se=Ro(te,2),le=se[0],pe=se[1],me=bit(h),_e=Ro(me,2),de=_e[0],Ce=_e[1];function Ye(){h&&Ce(A())}var rt=_it(r,Ye),ct=Ro(rt,2),qe=ct[0],lt=ct[1],bt=(0,Db.useState)(0),Tt=Ro(bt,2),et=Tt[0],pt=Tt[1],ot=(0,Db.useRef)();C4(function(){qe==="alignPre"&&pt(0)},[qe]);function We(){return E||A}function Ne(){var Mt;(Mt=K.current)===null||Mt===void 0||Mt.forceAlign()}function Ke(Mt,Yt){var qt=P(Yt);le!==qt&&pe(qt),pt(function(Ut){return Ut+1}),qe==="align"&&(j==null||j(Mt,Yt))}C4(function(){qe==="align"&&(et<3?Ne():lt(function(){var Mt;(Mt=ot.current)===null||Mt===void 0||Mt.call(ot)}))},[et]);var Ge=nr({},G7(e));["onAppearEnd","onEnterEnd","onLeaveEnd"].forEach(function(Mt){var Yt=Ge[Mt];Ge[Mt]=function(qt,Ut){return lt(),Yt==null?void 0:Yt(qt,Ut)}});function ft(){return new Promise(function(Mt){ot.current=Mt})}Cp.useEffect(function(){!Ge.motionName&&qe==="motion"&&lt()},[Ge.motionName,qe]),Cp.useImperativeHandle(t,function(){return{forceAlign:Ne,getElement:function(){return Z.current}}});var mt=nr(nr({},de),{},{zIndex:c,opacity:qe==="motion"||qe==="stable"||!r?void 0:0,pointerEvents:!r&&qe!=="stable"?"none":void 0},i),Ot=!0;w!=null&&w.points&&(qe==="align"||qe==="stable")&&(Ot=!1);var At=a;return Cp.Children.count(a)>1&&(At=Cp.createElement("div",{className:"".concat(n,"-content")},a)),Cp.createElement(UT,yo({visible:r,ref:Z,leavedClassName:"".concat(n,"-hidden")},Ge,{onAppearPrepare:ft,onEnterPrepare:ft,removeOnLeave:m,forceRender:y}),function(Mt,Yt){var qt=Mt.className,Ut=Mt.style,sr=(0,xit.default)(n,o,le,qt);return Cp.createElement(mit,{target:We(),key:"popup",ref:K,monitorWindowResize:!0,disabled:Ot,align:w,onAlign:Ke},Cp.createElement("div",{ref:Yt,className:sr,onMouseEnter:D,onMouseLeave:k,onMouseDownCapture:z,onTouchStartCapture:V,onClick:G,style:nr(nr({},Ut),mt)},At))})});wit.displayName="PopupInner";var Eit=wit;u();var Lf=Q(De());var Sit=Q(Uo()),Tit=Lf.forwardRef(function(e,t){var r=e.prefixCls,n=e.visible,o=e.zIndex,i=e.children,a=e.mobile;a=a===void 0?{}:a;var c=a.popupClassName,h=a.popupStyle,m=a.popupMotion,y=m===void 0?{}:m,w=a.popupRender,E=e.onClick,A=Lf.useRef();Lf.useImperativeHandle(t,function(){return{forceAlign:function(){},getElement:function(){return A.current}}});var P=nr({zIndex:o},h),j=i;return Lf.Children.count(i)>1&&(j=Lf.createElement("div",{className:"".concat(r,"-content")},i)),w&&(j=w(j)),Lf.createElement(UT,yo({visible:n,ref:A,removeOnLeave:!0},y),function(D,k){var z=D.className,V=D.style,G=(0,Sit.default)(r,c,z);return Lf.createElement("div",{ref:k,className:G,onClick:E,style:nr(nr({},V),P)},j)})});Tit.displayName="MobilePopupInner";var Iit=Tit;var rRr=["visible","mobile"],Mit=Nb.forwardRef(function(e,t){var r=e.visible,n=e.mobile,o=Yu(e,rRr),i=(0,R4.useState)(r),a=Ro(i,2),c=a[0],h=a[1],m=(0,R4.useState)(!1),y=Ro(m,2),w=y[0],E=y[1],A=nr(nr({},o),{},{visible:c});(0,R4.useEffect)(function(){h(r),r&&n&&E(uot())},[r,n]);var P=w?Nb.createElement(Iit,yo({},A,{mobile:n,ref:t})):Nb.createElement(Eit,yo({},A,{ref:t}));return Nb.createElement("div",null,Nb.createElement(tue,A),P)});Mit.displayName="Popup";var Cit=Mit;u();var Ait=Q(De()),nRr=Ait.createContext(null),vue=nRr;function yue(){}function oRr(){return""}function iRr(e){return e?e.ownerDocument:window.document}var aRr=["onClick","onMouseDown","onTouchStart","onMouseEnter","onMouseLeave","onFocus","onBlur","onContextMenu"];function sRr(e){var t=function(r){vu(o,r);var n=yu(o);function o(i){var a;mu(this,o),a=n.call(this,i),Zt(Fn(a),"popupRef",Ap.createRef()),Zt(Fn(a),"triggerRef",Ap.createRef()),Zt(Fn(a),"portalContainer",void 0),Zt(Fn(a),"attachId",void 0),Zt(Fn(a),"clickOutsideHandler",void 0),Zt(Fn(a),"touchOutsideHandler",void 0),Zt(Fn(a),"contextMenuOutsideHandler1",void 0),Zt(Fn(a),"contextMenuOutsideHandler2",void 0),Zt(Fn(a),"mouseDownTimeout",void 0),Zt(Fn(a),"focusTime",void 0),Zt(Fn(a),"preClickTime",void 0),Zt(Fn(a),"preTouchTime",void 0),Zt(Fn(a),"delayTimer",void 0),Zt(Fn(a),"hasPopupMouseDown",void 0),Zt(Fn(a),"onMouseEnter",function(h){var m=a.props.mouseEnterDelay;a.fireEvents("onMouseEnter",h),a.delaySetPopupVisible(!0,m,m?null:h)}),Zt(Fn(a),"onMouseMove",function(h){a.fireEvents("onMouseMove",h),a.setPoint(h)}),Zt(Fn(a),"onMouseLeave",function(h){a.fireEvents("onMouseLeave",h),a.delaySetPopupVisible(!1,a.props.mouseLeaveDelay)}),Zt(Fn(a),"onPopupMouseEnter",function(){a.clearDelayTimer()}),Zt(Fn(a),"onPopupMouseLeave",function(h){var m;h.relatedTarget&&!h.relatedTarget.setTimeout&&Ab((m=a.popupRef.current)===null||m===void 0?void 0:m.getElement(),h.relatedTarget)||a.delaySetPopupVisible(!1,a.props.mouseLeaveDelay)}),Zt(Fn(a),"onFocus",function(h){a.fireEvents("onFocus",h),a.clearDelayTimer(),a.isFocusToShow()&&(a.focusTime=Date.now(),a.delaySetPopupVisible(!0,a.props.focusDelay))}),Zt(Fn(a),"onMouseDown",function(h){a.fireEvents("onMouseDown",h),a.preClickTime=Date.now()}),Zt(Fn(a),"onTouchStart",function(h){a.fireEvents("onTouchStart",h),a.preTouchTime=Date.now()}),Zt(Fn(a),"onBlur",function(h){a.fireEvents("onBlur",h),a.clearDelayTimer(),a.isBlurToHide()&&a.delaySetPopupVisible(!1,a.props.blurDelay)}),Zt(Fn(a),"onContextMenu",function(h){h.preventDefault(),a.fireEvents("onContextMenu",h),a.setPopupVisible(!0,h)}),Zt(Fn(a),"onContextMenuClose",function(){a.isContextMenuToShow()&&a.close()}),Zt(Fn(a),"onClick",function(h){if(a.fireEvents("onClick",h),a.focusTime){var m;if(a.preClickTime&&a.preTouchTime?m=Math.min(a.preClickTime,a.preTouchTime):a.preClickTime?m=a.preClickTime:a.preTouchTime&&(m=a.preTouchTime),Math.abs(m-a.focusTime)<20)return;a.focusTime=0}a.preClickTime=0,a.preTouchTime=0,a.isClickToShow()&&(a.isClickToHide()||a.isBlurToHide())&&h&&h.preventDefault&&h.preventDefault();var y=!a.state.popupVisible;(a.isClickToHide()&&!y||y&&a.isClickToShow())&&a.setPopupVisible(!a.state.popupVisible,h)}),Zt(Fn(a),"onPopupMouseDown",function(){if(a.hasPopupMouseDown=!0,clearTimeout(a.mouseDownTimeout),a.mouseDownTimeout=window.setTimeout(function(){a.hasPopupMouseDown=!1},0),a.context){var h;(h=a.context).onPopupMouseDown.apply(h,arguments)}}),Zt(Fn(a),"onDocumentClick",function(h){if(!(a.props.mask&&!a.props.maskClosable)){var m=h.target,y=a.getRootDomNode(),w=a.getPopupDomNode();(!Ab(y,m)||a.isContextMenuOnly())&&!Ab(w,m)&&!a.hasPopupMouseDown&&a.close()}}),Zt(Fn(a),"getRootDomNode",function(){var h=a.props.getTriggerDOMNode;if(h)return h(a.triggerRef.current);try{var m=T4(a.triggerRef.current);if(m)return m}catch(y){}return Oit.default.findDOMNode(Fn(a))}),Zt(Fn(a),"getPopupClassNameFromAlign",function(h){var m=[],y=a.props,w=y.popupPlacement,E=y.builtinPlacements,A=y.prefixCls,P=y.alignPoint,j=y.getPopupClassNameFromAlign;return w&&E&&m.push(sot(E,A,h,P)),j&&m.push(j(h)),m.join(" ")}),Zt(Fn(a),"getComponent",function(){var h=a.props,m=h.prefixCls,y=h.destroyPopupOnHide,w=h.popupClassName,E=h.onPopupAlign,A=h.popupMotion,P=h.popupAnimation,j=h.popupTransitionName,D=h.popupStyle,k=h.mask,z=h.maskAnimation,V=h.maskTransitionName,G=h.maskMotion,K=h.zIndex,Z=h.popup,te=h.stretch,se=h.alignPoint,le=h.mobile,pe=h.forceRender,me=h.onPopupClick,_e=a.state,de=_e.popupVisible,Ce=_e.point,Ye=a.getPopupAlign(),rt={};return a.isMouseEnterToShow()&&(rt.onMouseEnter=a.onPopupMouseEnter),a.isMouseLeaveToHide()&&(rt.onMouseLeave=a.onPopupMouseLeave),rt.onMouseDown=a.onPopupMouseDown,rt.onTouchStart=a.onPopupMouseDown,Ap.createElement(Cit,yo({prefixCls:m,destroyPopupOnHide:y,visible:de,point:se&&Ce,className:w,align:Ye,onAlign:E,animation:P,getClassNameFromAlign:a.getPopupClassNameFromAlign},rt,{stretch:te,getRootDomNode:a.getRootDomNode,style:D,mask:k,zIndex:K,transitionName:j,maskAnimation:z,maskTransitionName:V,maskMotion:G,ref:a.popupRef,motion:A,mobile:le,forceRender:pe,onClick:me}),typeof Z=="function"?Z():Z)}),Zt(Fn(a),"attachParent",function(h){Fc.cancel(a.attachId);var m=a.props,y=m.getPopupContainer,w=m.getDocument,E=a.getRootDomNode(),A;y?(E||y.length===0)&&(A=y(E)):A=w(a.getRootDomNode()).body,A?A.appendChild(h):a.attachId=Fc(function(){a.attachParent(h)})}),Zt(Fn(a),"getContainer",function(){if(!a.portalContainer){var h=a.props.getDocument,m=h(a.getRootDomNode()).createElement("div");m.style.position="absolute",m.style.top="0",m.style.left="0",m.style.width="100%",a.portalContainer=m}return a.attachParent(a.portalContainer),a.portalContainer}),Zt(Fn(a),"setPoint",function(h){var m=a.props.alignPoint;!m||!h||a.setState({point:{pageX:h.pageX,pageY:h.pageY}})}),Zt(Fn(a),"handlePortalUpdate",function(){a.state.prevPopupVisible!==a.state.popupVisible&&a.props.afterPopupVisibleChange(a.state.popupVisible)}),Zt(Fn(a),"triggerContextValue",{onPopupMouseDown:a.onPopupMouseDown});var c;return"popupVisible"in i?c=!!i.popupVisible:c=!!i.defaultPopupVisible,a.state={prevPopupVisible:c,popupVisible:c},aRr.forEach(function(h){a["fire".concat(h)]=function(m){a.fireEvents(h,m)}}),a}return gu(o,[{key:"componentDidMount",value:function(){this.componentDidUpdate()}},{key:"componentDidUpdate",value:function(){var a=this.props,c=this.state;if(c.popupVisible){var h;!this.clickOutsideHandler&&(this.isClickToHide()||this.isContextMenuToShow())&&(h=a.getDocument(this.getRootDomNode()),this.clickOutsideHandler=Zu(h,"mousedown",this.onDocumentClick)),this.touchOutsideHandler||(h=h||a.getDocument(this.getRootDomNode()),this.touchOutsideHandler=Zu(h,"touchstart",this.onDocumentClick)),!this.contextMenuOutsideHandler1&&this.isContextMenuToShow()&&(h=h||a.getDocument(this.getRootDomNode()),this.contextMenuOutsideHandler1=Zu(h,"scroll",this.onContextMenuClose)),!this.contextMenuOutsideHandler2&&this.isContextMenuToShow()&&(this.contextMenuOutsideHandler2=Zu(window,"blur",this.onContextMenuClose));return}this.clearOutsideHandler()}},{key:"componentWillUnmount",value:function(){this.clearDelayTimer(),this.clearOutsideHandler(),clearTimeout(this.mouseDownTimeout),Fc.cancel(this.attachId)}},{key:"getPopupDomNode",value:function(){var a;return((a=this.popupRef.current)===null||a===void 0?void 0:a.getElement())||null}},{key:"getPopupAlign",value:function(){var a=this.props,c=a.popupPlacement,h=a.popupAlign,m=a.builtinPlacements;return c&&m?aot(m,c,h):h}},{key:"setPopupVisible",value:function(a,c){var h=this.props.alignPoint,m=this.state.popupVisible;this.clearDelayTimer(),m!==a&&("popupVisible"in this.props||this.setState({popupVisible:a,prevPopupVisible:m}),this.props.onPopupVisibleChange(a)),h&&c&&a&&this.setPoint(c)}},{key:"delaySetPopupVisible",value:function(a,c,h){var m=this,y=c*1e3;if(this.clearDelayTimer(),y){var w=h?{pageX:h.pageX,pageY:h.pageY}:null;this.delayTimer=window.setTimeout(function(){m.setPopupVisible(a,w),m.clearDelayTimer()},y)}else this.setPopupVisible(a,h)}},{key:"clearDelayTimer",value:function(){this.delayTimer&&(clearTimeout(this.delayTimer),this.delayTimer=null)}},{key:"clearOutsideHandler",value:function(){this.clickOutsideHandler&&(this.clickOutsideHandler.remove(),this.clickOutsideHandler=null),this.contextMenuOutsideHandler1&&(this.contextMenuOutsideHandler1.remove(),this.contextMenuOutsideHandler1=null),this.contextMenuOutsideHandler2&&(this.contextMenuOutsideHandler2.remove(),this.contextMenuOutsideHandler2=null),this.touchOutsideHandler&&(this.touchOutsideHandler.remove(),this.touchOutsideHandler=null)}},{key:"createTwoChains",value:function(a){var c=this.props.children.props,h=this.props;return c[a]&&h[a]?this["fire".concat(a)]:c[a]||h[a]}},{key:"isClickToShow",value:function(){var a=this.props,c=a.action,h=a.showAction;return c.indexOf("click")!==-1||h.indexOf("click")!==-1}},{key:"isContextMenuOnly",value:function(){var a=this.props.action;return a==="contextMenu"||a.length===1&&a[0]==="contextMenu"}},{key:"isContextMenuToShow",value:function(){var a=this.props,c=a.action,h=a.showAction;return c.indexOf("contextMenu")!==-1||h.indexOf("contextMenu")!==-1}},{key:"isClickToHide",value:function(){var a=this.props,c=a.action,h=a.hideAction;return c.indexOf("click")!==-1||h.indexOf("click")!==-1}},{key:"isMouseEnterToShow",value:function(){var a=this.props,c=a.action,h=a.showAction;return c.indexOf("hover")!==-1||h.indexOf("mouseEnter")!==-1}},{key:"isMouseLeaveToHide",value:function(){var a=this.props,c=a.action,h=a.hideAction;return c.indexOf("hover")!==-1||h.indexOf("mouseLeave")!==-1}},{key:"isFocusToShow",value:function(){var a=this.props,c=a.action,h=a.showAction;return c.indexOf("focus")!==-1||h.indexOf("focus")!==-1}},{key:"isBlurToHide",value:function(){var a=this.props,c=a.action,h=a.hideAction;return c.indexOf("focus")!==-1||h.indexOf("blur")!==-1}},{key:"forcePopupAlign",value:function(){if(this.state.popupVisible){var a;(a=this.popupRef.current)===null||a===void 0||a.forceAlign()}}},{key:"fireEvents",value:function(a,c){var h=this.props.children.props[a];h&&h(c);var m=this.props[a];m&&m(c)}},{key:"close",value:function(){this.setPopupVisible(!1)}},{key:"render",value:function(){var a=this.state.popupVisible,c=this.props,h=c.children,m=c.forceRender,y=c.alignPoint,w=c.className,E=c.autoDestroy,A=Ap.Children.only(h),P={key:"trigger"};this.isContextMenuToShow()?P.onContextMenu=this.onContextMenu:P.onContextMenu=this.createTwoChains("onContextMenu"),this.isClickToHide()||this.isClickToShow()?(P.onClick=this.onClick,P.onMouseDown=this.onMouseDown,P.onTouchStart=this.onTouchStart):(P.onClick=this.createTwoChains("onClick"),P.onMouseDown=this.createTwoChains("onMouseDown"),P.onTouchStart=this.createTwoChains("onTouchStart")),this.isMouseEnterToShow()?(P.onMouseEnter=this.onMouseEnter,y&&(P.onMouseMove=this.onMouseMove)):P.onMouseEnter=this.createTwoChains("onMouseEnter"),this.isMouseLeaveToHide()?P.onMouseLeave=this.onMouseLeave:P.onMouseLeave=this.createTwoChains("onMouseLeave"),this.isFocusToShow()||this.isBlurToHide()?(P.onFocus=this.onFocus,P.onBlur=this.onBlur):(P.onFocus=this.createTwoChains("onFocus"),P.onBlur=this.createTwoChains("onBlur"));var j=(0,Pit.default)(A&&A.props&&A.props.className,w);j&&(P.className=j);var D=nr({},P);M4(A)&&(D.ref=qT(this.triggerRef,A.ref));var k=Ap.cloneElement(A,D),z;return(a||this.popupRef.current||m)&&(z=Ap.createElement(e,{key:"portal",getContainer:this.getContainer,didUpdate:this.handlePortalUpdate},this.getComponent())),!a&&E&&(z=null),Ap.createElement(vue.Provider,{value:this.triggerContextValue},k,z)}}],[{key:"getDerivedStateFromProps",value:function(a,c){var h=a.popupVisible,m={};return h!==void 0&&c.popupVisible!==h&&(m.popupVisible=h,m.prevPopupVisible=c.popupVisible),m}}]),o}(Ap.Component);return Zt(t,"contextType",vue),Zt(t,"defaultProps",{prefixCls:"rc-trigger-popup",getPopupClassNameFromAlign:oRr,getDocument:iRr,onPopupVisibleChange:yue,afterPopupVisibleChange:yue,onPopupAlign:yue,popupClassName:"",mouseEnterDelay:0,mouseLeaveDelay:.1,focusDelay:0,blurDelay:.15,popupStyle:{},destroyPopupOnHide:!1,popupAlign:{},defaultPopupVisible:!1,mask:!1,maskClosable:!0,action:[],showAction:[],hideAction:[],autoDestroy:!1}),t}var Dit=sRr(iot);u();var kf={adjustX:1,adjustY:1},Rf=[0,0],Nit={left:{points:["cr","cl"],overflow:kf,offset:[-4,0],targetOffset:Rf},right:{points:["cl","cr"],overflow:kf,offset:[4,0],targetOffset:Rf},top:{points:["bc","tc"],overflow:kf,offset:[0,-4],targetOffset:Rf},bottom:{points:["tc","bc"],overflow:kf,offset:[0,4],targetOffset:Rf},topLeft:{points:["bl","tl"],overflow:kf,offset:[0,-4],targetOffset:Rf},leftTop:{points:["tr","tl"],overflow:kf,offset:[-4,0],targetOffset:Rf},topRight:{points:["br","tr"],overflow:kf,offset:[0,-4],targetOffset:Rf},rightTop:{points:["tl","tr"],overflow:kf,offset:[4,0],targetOffset:Rf},bottomRight:{points:["tr","br"],overflow:kf,offset:[0,4],targetOffset:Rf},rightBottom:{points:["bl","br"],overflow:kf,offset:[4,0],targetOffset:Rf},bottomLeft:{points:["tl","bl"],overflow:kf,offset:[0,4],targetOffset:Rf},leftBottom:{points:["br","bl"],overflow:kf,offset:[-4,0],targetOffset:Rf}};u();var n9=Q(De()),Lit=Q(Uo());function o9(e){var t=e.showArrow,r=e.arrowContent,n=e.children,o=e.prefixCls,i=e.id,a=e.overlayInnerStyle,c=e.className,h=e.style;return n9.createElement("div",{className:(0,Lit.default)("".concat(o,"-content"),c),style:h},t!==!1&&n9.createElement("div",{className:"".concat(o,"-arrow"),key:"arrow"},r),n9.createElement("div",{className:"".concat(o,"-inner"),id:i,role:"tooltip",style:a},typeof n=="function"?n():n))}var lRr=["overlayClassName","trigger","mouseEnterDelay","mouseLeaveDelay","overlayStyle","prefixCls","children","onVisibleChange","afterVisibleChange","transitionName","animation","motion","placement","align","destroyTooltipOnHide","defaultVisible","getTooltipContainer","overlayInnerStyle","arrowContent","overlay","id","showArrow"],uRr=function(t,r){var n=t.overlayClassName,o=t.trigger,i=o===void 0?["hover"]:o,a=t.mouseEnterDelay,c=a===void 0?0:a,h=t.mouseLeaveDelay,m=h===void 0?.1:h,y=t.overlayStyle,w=t.prefixCls,E=w===void 0?"rc-tooltip":w,A=t.children,P=t.onVisibleChange,j=t.afterVisibleChange,D=t.transitionName,k=t.animation,z=t.motion,V=t.placement,G=V===void 0?"right":V,K=t.align,Z=K===void 0?{}:K,te=t.destroyTooltipOnHide,se=te===void 0?!1:te,le=t.defaultVisible,pe=t.getTooltipContainer,me=t.overlayInnerStyle,_e=t.arrowContent,de=t.overlay,Ce=t.id,Ye=t.showArrow,rt=Ye===void 0?!0:Ye,ct=Yu(t,lRr),qe=(0,HT.useRef)(null);(0,HT.useImperativeHandle)(r,function(){return qe.current});var lt=nr({},ct);"visible"in t&&(lt.popupVisible=t.visible);var bt=function(){return _ue.createElement(o9,{showArrow:rt,arrowContent:_e,key:"content",prefixCls:E,id:Ce,overlayInnerStyle:me},de)},Tt=!1,et=!1;if(typeof se=="boolean")Tt=se;else if(se&&No(se)==="object"){var pt=se.keepParent;Tt=pt===!0,et=pt===!1}return _ue.createElement(Dit,yo({popupClassName:n,prefixCls:E,popup:bt,action:i,builtinPlacements:Nit,popupPlacement:G,ref:qe,popupAlign:Z,getPopupContainer:pe,onPopupVisibleChange:P,afterPopupVisibleChange:j,popupTransitionName:D,popupAnimation:k,popupMotion:z,defaultPopupVisible:le,destroyPopupOnHide:Tt,autoDestroy:et,mouseLeaveDelay:m,popupStyle:y,mouseEnterDelay:c},lt),A)},kit=(0,HT.forwardRef)(uRr);var Rit=kit;var cRr=lv.forwardRef(function(e,t){var r=e.visible,n=e.overlay,o=lv.useRef(null),i=qT(t,o),a=lv.useRef(null);function c(){Fc.cancel(a.current)}function h(){a.current=Fc(function(){var m;(m=o.current)===null||m===void 0||m.forcePopupAlign()})}return lv.useEffect(function(){return r?h():c(),c},[r,n]),lv.createElement(Rit,yo({ref:i},e))}),bue=cRr;function xue(e){var t;return t=function(r){vu(o,r);var n=yu(o);function o(){var i;return mu(this,o),i=n.apply(this,arguments),i.state={visibles:{}},i.handleTooltipVisibleChange=function(a,c){i.setState(function(h){return{visibles:nr(nr({},h.visibles),{},Zt({},a,c))}})},i.handleWithTooltip=function(a){var c=a.value,h=a.dragging,m=a.index,y=a.disabled,w=Yu(a,["value","dragging","index","disabled"]),E=i.props,A=E.tipFormatter,P=E.tipProps,j=E.handleStyle,D=E.getTooltipContainer,k=P.prefixCls,z=k===void 0?"rc-slider-tooltip":k,V=P.overlay,G=V===void 0?A(c):V,K=P.placement,Z=K===void 0?"top":K,te=P.visible,se=te===void 0?!1:te,le=Yu(P,["prefixCls","overlay","placement","visible"]),pe;return Array.isArray(j)?pe=j[m]||j[0]:pe=j,j4.default.createElement(bue,yo({},le,{getTooltipContainer:D,prefixCls:z,overlay:G,placement:Z,visible:!y&&(i.state.visibles[m]||h)||se,key:m}),j4.default.createElement(RT,yo({},w,{style:nr({},pe),value:c,onMouseEnter:function(){return i.handleTooltipVisibleChange(m,!0)},onMouseLeave:function(){return i.handleTooltipVisibleChange(m,!1)}})))},i}return gu(o,[{key:"render",value:function(){return j4.default.createElement(e,yo({},this.props,{handle:this.handleWithTooltip}))}}]),o}(j4.default.Component),t.defaultProps={tipFormatter:function(n){return n},handleStyle:[{}],tipProps:{},getTooltipContainer:function(n){return n.parentNode}},t}var i9=Gnt;i9.Range=m7;i9.Handle=RT;i9.createSliderWithTooltip=xue;var a9=i9;u();var $T=Q(It(),1),ia=Q(De(),1);u();u();var th=Q(It(),1),Op=Q(De(),1);function pRr(e,t){function r(n){return n>="0"&&n<="9"}return e.split("").some(n=>!r(n)&&n!==t)}var jit=(0,Op.forwardRef)(function({className:t,value:r,onBlur:n=()=>{},onKeyDown:o=()=>{},onChange:i=()=>{},readOnly:a,tabIndex:c,placeholder:h,name:m},y){let[w,E]=(0,Op.useState)(r),[A,P]=(0,Op.useState)(r);A!==r&&(P(r),E(r));let j=(0,Op.useMemo)(()=>mr.getSettings().LANGUAGE_CODE===gf.DE?".":"/",[]),D=(0,Op.useCallback)(z=>{let V=`${z.target.value}`;pRr(V,j)||V.length>10||(E(z.target.value),i(z.target.value))},[j]),k=(0,Op.useCallback)(z=>{n(z,w)},[w,n]);return Op.default.createElement("div",{className:"date-input-root"},Op.default.createElement("input",{className:jt(a&&"readonly",t),ref:y,value:w,onBlur:k,onKeyDown:o,onChange:D,readOnly:a!=null?a:void 0,tabIndex:c!=null?c:void 0,placeholder:h!=null?h:void 0,name:m!=null?m:void 0}))});jit.propTypes={value:th.default.string.isRequired,className:th.default.string,onBlur:th.default.func,onKeyDown:th.default.func,onChange:th.default.func,readOnly:th.default.bool,tabIndex:th.default.number,placeholder:th.default.string,defaultValue:th.default.string,name:th.default.string};var qit=jit;var WT=qit;var zit=({values:e,min:t,max:r,onChange:n})=>{let[o,i]=(0,ia.useState)(e),[a,c]=(0,ia.useState)(!1),[h,m]=(0,ia.useState)(0),[y,w]=(0,ia.useState)(1),E=(0,ia.useRef)(),A=(0,ia.useRef)(),P=(0,ia.useRef)(),{start:j,end:D}=(0,ia.useMemo)(()=>({start:Ol(o[0]*1e3),end:Ol(o[1]*1e3)}),[o]),k=(0,ia.useCallback)((K,Z)=>{let te=Mc(Z).valueOf()/1e3,se=o[1];if(K.relatedTarget!==A.current&&K.relatedTarget!==P.current&&c(!1),!Kh(te)||te>se||te<t){n([o[0],o[1]]),m(Date.now());return}n([te,se])},[o]),z=(0,ia.useCallback)((K,Z)=>{let te=o[0],se=Mc(Z).valueOf()/1e3;if(K.relatedTarget!==E.current&&K.relatedTarget!==P.current&&c(!1),!Kh(se)||te>se||se>r){n([o[0],o[1]]),w(Date.now());return}n([te,se])},[o]),V=(0,ia.useCallback)(K=>{K.key==="Enter"&&(K.target===E.current&&A.current.focus(),K.target===A.current&&(K.target.blur(),c(!1)))},[]),G=(0,ia.useCallback)(()=>{a||E.current.focus(),c(K=>!K)},[]);return(0,ia.useEffect)(()=>{i(e)},[e]),ia.default.createElement("div",{className:"timeslider-controls-root"},ia.default.createElement(WT,{ref:E,key:h,value:j,onBlur:k,onKeyDown:V,readOnly:!a,tabIndex:a?void 0:-1}),ia.default.createElement("span",null,"\u2013"),ia.default.createElement(WT,{ref:A,key:y,value:D,onBlur:z,onKeyDown:V,readOnly:!a,tabIndex:a?void 0:-1}),ia.default.createElement("button",{ref:P,className:jt("edit-button",a&&"edit-state"),onClick:G},ia.default.createElement(Fr,{name:"edit-inverse"})))};zit.propTypes={values:$T.default.arrayOf($T.default.number).isRequired,min:$T.default.number.isRequired,max:$T.default.number.isRequired,onChange:$T.default.func.isRequired};var Fit=zit;u();var Lb=Q(It(),1),YT=Q(De(),1);var Uit=(0,YT.forwardRef)(function({className:t,posX:r,shouldUseDate:n,value:o},i){let a=(0,YT.useMemo)(()=>Array.isArray(o)?n?`${Ol(o[0]*1e3)} - ${Ol(o[1]*1e3)}`:`${o[0]} - ${o[1]}`:n?Ol(o*1e3):o,[o]);return YT.default.createElement("div",{ref:i,className:t,style:{transform:`translate(${r}px)`}},a)});Uit.propTypes={className:Lb.default.string,posX:Lb.default.number.isRequired,shouldUseDate:Lb.default.bool.isRequired,value:Lb.default.oneOfType([Lb.default.array,Lb.default.number]).isRequired};var s9=Uit;u();var Bit=(e,t,r,n)=>{let o=e.map(m=>(m-t[0])/(t[1]-t[0])),i=o[0]*n,a=o[1]*n,c=wue(i,r,n),h=wue(a,r,n);return{posMin:c,posMax:h}},Vit=(e,t,r,n)=>{let a=((e[1]-e[0])/2+e[0]-t[0])/(t[1]-t[0])*n;return wue(a,r,n)},wue=(e,t,r)=>e<t/2?0:e>r-t/2?r-t:e-t/2;var Eue=[1e3,1e3],Sue=e=>{let{title:t,values:r,timeRange:n,onChange:o,sliderProps:i,shouldUseDate:a,showControls:c}=e,[h,m]=(0,vi.useState)(r),[y,w]=(0,vi.useState)(0),[E,A]=(0,vi.useState)(0),[P,j]=(0,vi.useState)(0),[D,k]=(0,vi.useState)({min:0,max:0}),[z,V]=(0,vi.useState)(0),[G,K]=(0,vi.useState)(!1),Z=(0,vi.useRef)(),te=(0,vi.useRef)(),se=(0,vi.useRef)(),le=(0,vi.useCallback)(_e=>{let{posMin:de,posMax:Ce}=Bit(_e,n,y,P);if(Math.abs(de-Ce)<y){K(!0);let rt=Vit(_e,n,E,P);V(rt);return}K(!1),k({min:de,max:Ce})},[n,y,P]),pe=(0,vi.useCallback)(_e=>{le(_e),m(_e)},[le]),me=(0,vi.useCallback)(_e=>{pe(_e),o(_e)},[pe,o]);return(0,vi.useEffect)(()=>{if(Z.current&&te.current&&se.current){let _e=Z.current.getBoundingClientRect().width,de=te.current.getBoundingClientRect().width,Ce=se.current.getBoundingClientRect().width;k({min:0,max:_e-de}),A(Ce),j(_e),w(de)}},[]),(0,vi.useEffect)(()=>{m(r),le(r)},[r,le]),vi.default.createElement("div",{className:"timeslider-container"},vi.default.createElement("div",{className:"timeslider-control-container"},vi.default.createElement("label",null,t),c&&vi.default.createElement(Fit,{min:n[0],max:n[1],values:h,onChange:me})),vi.default.createElement("div",{ref:Z,className:"slider-container"},vi.default.createElement(m7,Se({allowCross:!1,ariaLabelledByGroupForHandles:["min-value","max-value"],min:n[0],max:n[1],onChange:pe,onAfterChange:o,value:h},i)),vi.default.createElement(s9,{className:jt("tooltip min-value",G&&"labels-too-close"),posX:D.min,ref:te,value:G?Eue[0]:h[0],shouldUseDate:a}),vi.default.createElement(s9,{className:jt("tooltip max-value",G&&"labels-too-close"),posX:D.max,value:G?Eue[1]:h[1],shouldUseDate:a}),vi.default.createElement(s9,{className:jt("tooltip min-max-value",G&&"labels-too-close"),posX:z,ref:se,value:G?h:Eue,shouldUseDate:a})))};Sue.defaultProps={timeRange:[1850,1970],shouldUseDate:!1,showControls:!1};Sue.propTypes={title:ym.default.string.isRequired,values:ym.default.arrayOf(ym.default.number),timeRange:ym.default.arrayOf(ym.default.number),onChange:ym.default.func.isRequired,sliderProps:ym.default.object,shouldUseDate:ym.default.bool,showControls:ym.default.bool};var Git=Sue;var l9=Git;var uv=Q(De(),1);u();var Tue=Q(De(),1);var Hit=()=>{let e=_t(vnt),t=ir(({snapshot:n})=>()=>vt(null,null,function*(){let o=yield n.getPromise(Qt),i=yield n.getPromise(q0);Te(o)&&Te(i)&&i.setFilters(o)})),r=ir(({snapshot:n})=>o=>vt(null,null,function*(){let i=yield n.getPromise(Qt),a=yield n.getPromise(q0);Te(i)&&Te(a)&&a.setFilters(i,o)}));return(0,Tue.useEffect)(()=>{e===null?t():r(e)},[e]),(0,Tue.useEffect)(()=>()=>{t()},[]),null};var Wit=()=>{let e=_t(r7),t=_t(vle),r=_t(j0),n=Ir(NT);return uv.default.createElement(uv.default.Fragment,null,uv.default.createElement("div",{className:jt("plain-divider",r===Ts.FILTER&&e&&"filtered")},uv.default.createElement("span",{className:jt("caret-container",r===Ts.FILTER&&e&&"filtered")},uv.default.createElement(Fr,{name:"caret"}))),uv.default.createElement("div",{className:jt("filter-container",r===Ts.FILTER&&e&&"in")},r!==Ts.EDIT&&e&&uv.default.createElement(l9,{title:`${fe("geojsonlayerpanel-timefilter-title")}: `,timeRange:t,onChange:o=>n(o),values:t,sliderProps:{step:86400,draggableTrack:!0},shouldUseDate:!0,showControls:!0})),uv.default.createElement(Hit,null))};var tat=Q(It(),1);u();var cv=Q(De(),1);u();var $it=(e,t)=>{let r="data:text/json;charset=utf-8,"+encodeURIComponent(t),n=document.createElement("a");n.setAttribute("href",r),n.setAttribute("download",`${e}.json`),n.click()};var fRr=()=>{let e=_t(gnt),[t,r]=mo(j0),n=_t(r7),o=(0,cv.useCallback)(()=>{r(a=>a===Ts.FILTER?Ts.INITIAL:Ts.FILTER)},[]),i=ir(({snapshot:a})=>()=>vt(null,null,function*(){let c=yield a.getPromise(g4),h=yield a.getPromise(q0),m={type:"FeatureCollection",features:c},y=Wo.toPersistenceState(m),w=JSON.stringify(y),E=h.getMetadata("title");$it(E,w)}),[]);return cv.default.createElement(cv.default.Fragment,null,cv.default.createElement(rn,{className:"geojson-headline--button export-button",disabled:!e,onClick:i,title:fe("layermanagement-export-geojson")},cv.default.createElement(Fr,{name:"export-geojson"})),cv.default.createElement(rn,{className:"geojson-headline--button filter-button",disabled:t===Ts.EDIT||!n,onClick:o,title:fe("layermanagement-filter-geojson-features")},cv.default.createElement(Fr,{name:"filter"})))},Yit=fRr;u();var u9=()=>{let e=ir(({set:r})=>()=>vt(null,null,function*(){r(nl,structuredClone(u0)),r(kl,{}),r($o,{type:Za.REMOTE,id:null,layerRole:"owner"}),r(Cc,Qs.DRAW),r(xs,Si.METADATA)}),[]),t=ir(({snapshot:r,set:n})=>o=>vt(null,null,function*(){var h;let i=yield r.getPromise(Qt);if(!Te(i)||!Te(o))throw new Error("Cannot switch to draw mode. Map or layer not defined.");if(o.isExternalVectorMap())throw new Error("Cannot switch to draw mode. External vector maps are not supported.");o.setVisibility(i,"none"),n(nl,o.getGeoJson()),n(kl,{[Ue.title]:o.getMetadata(Ue.title),[Ue.description]:o.getMetadata(Ue.description),[Ue.thumbnailUrl]:o.getMetadata(Ue.thumbnailUrl),[Ue.timePeriod]:o.getMetadata(Ue.timePeriod)});let a=o.getMetadata(Ue.vectorMapId),c=o.getMetadata(Ue.version);n($o,{type:a?"remote":"local",id:a!=null?a:null,version:c!=null?c:null,layerRole:(h=o.getMetadata(Ue.userRole))!=null?h:null}),n(Cc,Qs.DRAW)}),[]);return{createNewVectorMap:e,editVectorMap:t}};u();var Zit="unsaved_external_layer",q4=e=>e===Zit,c9=()=>{let e=ir(({set:r,snapshot:n})=>()=>vt(null,null,function*(){let o=yield n.getPromise(Qt);if(!Te(o))throw new Error("Cannot switch to external vector map mode. Map is not defined.");let i=Wo.fromApplication({metadata:{[Ue.id]:Zit},geoJson:structuredClone(u0)});i.addLayerToMap(o),r(Ra,i),r(Cc,Qs.VECTOR_MAP_EXTERNAL),r(Ef,Tc.METADATA)}),[]),t=ir(({set:r,snapshot:n})=>o=>vt(null,null,function*(){let i=yield n.getPromise(Qt);if(!Te(i)||!Te(o))throw new Error("Cannot switch to external vector map mode. Map or layer is not defined.");let a=o.getMetadata(),c=o.getGeoJson(),h=`${a[Ue.id]}-temp`,m=Wo.fromApplication({metadata:Pt(Se({},a),{[Ue.id]:h}),geoJson:structuredClone(c)});m.addLayerToMap(i),o.setVisibility(i,"none"),r(Ra,m),r(Ef,Tc.METADATA),r(Cc,Qs.VECTOR_MAP_EXTERNAL)}),[]);return{createNewExternalVectorMap:e,editExternalVectorMap:t}};u();u();var ul=Q(De(),1),p9=Q(It(),1);u();var Iue=mr.getSettings().LANGUAGE_CODE===gf.DE?"de-DE":"en-US",Kit=new Intl.PluralRules(Iue),Xit=new Intl.NumberFormat(Iue,{signDisplay:"exceptZero"}),dRr=new Intl.DateTimeFormat(Iue,{hour:"2-digit",minute:"2-digit",hour12:!1,day:"2-digit",month:"2-digit",year:"numeric"});function Jit(e,t="de"){let r=dRr.formatToParts(e),n={hour:r.find(o=>o.type==="hour").value,minute:r.find(o=>o.type==="minute").value,day:r.find(o=>o.type==="day").value,month:r.find(o=>o.type==="month").value,year:r.find(o=>o.type==="year").value};return t==="de"?`${n.hour}:${n.minute} Uhr ${n.day}.${n.month}.${n.year}`:`${n.hour}:${n.minute} o'clock ${n.day}.${n.month}.${n.year}`}function U0(e){if(!Te(e))return fe("geojson-featureview-no-time");let[t,r]=e;return!Kh(t)||!Kh(r)?fe("geojson-featureview-invalid-time"):t===r?Ol(t):`${Ol(t)}\u2013${Ol(r)}`}var Qit=({data:e,index:t,style:r})=>{let n=e.features[t],{properties:o,geometry:i}=n,a=(0,ul.useCallback)(()=>{e.onFeatureClick(n.id)},[e.onFeatureClick,n.id]),{defaultTitle:c}=(0,ul.useMemo)(()=>({defaultTitle:fe("geojson-featureview-no-title")}),[]),h=(0,ul.useMemo)(()=>{let{type:w}=i;return w===Bu.MULTI_LINE_STRING?Bu.LINE_STRING:w===Bu.MULTI_POLYGON?Bu.POLYGON:w===Bu.MULTI_POINT?Bu.POINT:w===Bu.GEOMETRY_COLLECTION?Bu.POLYGON:Object.values(Bu).includes(w)?w:Bu.POLYGON},[i]),m=(0,ul.useMemo)(()=>{let w=o[Ln.time];return U0(w)},[o[Ln.time]]),y=(0,ul.useMemo)(()=>{var w;return(w=o[Ln.title])!=null?w:c},[o[Ln.title]]);return ul.default.createElement("li",{className:"geojson-feature-item-root",onClick:a,style:r},ul.default.createElement("div",{className:"geojson-feature-item-container"},ul.default.createElement("div",{className:"sub-headline"},ul.default.createElement("div",{className:`type-icon icon--${h}`},ul.default.createElement(Fr,{name:h})),ul.default.createElement("div",{className:"type-text"},h)),ul.default.createElement("div",{className:"title"},y),ul.default.createElement("div",{className:"details"},fe("geojson-featureview-time")," ",m)))};Qit.propTypes={data:p9.default.object.isRequired,index:p9.default.number.isRequired,style:p9.default.object};var Mue=(0,ul.memo)(Qit);u();var Vc=Q(De(),1),f9=Q(It(),1);var eat=({data:e,index:t,style:r})=>{let n=e.features[t],{properties:o}=n,i=(0,Vc.useCallback)(()=>{e.onFeatureClick(n.id)},[e.onFeatureClick,n.id]),{defaultTitle:a}=(0,Vc.useMemo)(()=>({defaultTitle:fe("geojson-featureview-no-title")}),[]),c=(0,Vc.useMemo)(()=>{let w=mr.getSettings().LANGUAGE_CODE===gf.DE?o[ra.timeLabelDe]:o[ra.timeLabelEn];if(Te(w))return w;let E=o[Ln.time];return U0(E)},[o[Ln.time]]),{title:h,affiliation:m}=(0,Vc.useMemo)(()=>{var y,w;return{title:(y=o[Ln.title])!=null?y:a,affiliation:(w=o[ra.parentLabel])!=null?w:""}},[o[Ln.title],o[ra.parentLabel]]);return Vc.default.createElement("li",{className:"geojson-feature-item-root",onClick:i,style:r},Vc.default.createElement("div",{className:"geojson-feature-item-container"},Vc.default.createElement("div",{className:"title"},h),Vc.default.createElement("div",{className:"details"},fe("idohist-date-label")," ",c," ",Vc.default.createElement("br",null),m!==""&&m)))};eat.propTypes={data:f9.default.object.isRequired,index:f9.default.number.isRequired,style:f9.default.object};var Cue=(0,Vc.memo)(eat);var hRr=e=>Te(e)?e.isExternalVectorMap()?Tnt():Int(e):!1,rat=({selectedLayer:e})=>{let[t,r]=mo(j0),n=Ir(NT),o=Ir(q0),i=Ir(tl),a=Ir(el),{editVectorMap:c}=u9(),{editExternalVectorMap:h}=c9(),m=_t(Qt),{title:y,description:w,displayTime:E,layerId:A}=(0,ga.useMemo)(()=>({title:e==null?void 0:e.getMetadata(Ue.title),description:e==null?void 0:e.getMetadata(Ue.description),displayTime:e==null?void 0:e.getDisplayTime(),layerId:e==null?void 0:e.getMetadata(Ue.id)}),[e]),P=(0,ga.useMemo)(()=>E!=null?E:fe("geojson-featureview-no-time"),[E]),j=(0,ga.useMemo)(()=>e.getMetadata(Ue.externalContentType)===Fu.IDOHIST?Cue:Mue,[e]),D=(0,ga.useCallback)(()=>{i(null),r(Ts.INITIAL),n(null)},[]),k=(0,ga.useCallback)(()=>vt(null,null,function*(){try{e.isExternalVectorMap()?yield h(e):yield c(e)}catch(G){console.error(G);return}}),[e]),z=(0,ga.useCallback)(()=>{e.setVisibility(m,"visible"),r(Ts.INITIAL)},[e]),V=(0,ga.useCallback)(G=>{a({featureId:G,sourceId:A})},[A]);return(0,ga.useEffect)(()=>(o(e),()=>{r(Ts.INITIAL),n(null),o(null)}),[e]),ga.default.createElement(ga.default.Fragment,null,ga.default.createElement(Pf,{title:fe("geojsonlayerpanel-header-title"),onEditClick:t!==Ts.EDIT&&hRr(e)?k:void 0,onCloseClick:t===Ts.EDIT?z:D}),ga.default.createElement("div",{className:"headline-container"},ga.default.createElement("div",{className:"geojson-headline--date"},P),ga.default.createElement("div",{className:"title-row"},ga.default.createElement("div",{className:"geojson-headline--title"},y),ga.default.createElement(Yit,null)),ga.default.createElement("div",{className:"description-row"},ga.default.createElement("div",{className:"geojson-headline--description"},w))),ga.default.createElement(Wit,null),ga.default.createElement(bnt,{className:jt("geojson-layer-feature-list-root ",t!==Ts.EDIT&&["in","scrollable"]),onFeatureClick:V,FeatureItem:j}))};rat.propTypes={selectedLayer:tat.default.instanceOf(Wo)};var nat=rat;var oat=nat;u();var va=Q(De(),1);var KT=Q(It(),1);u();u();var pv=Q(De(),1);var mRr=()=>{let e=_t(Qt),[t,r]=(0,pv.useState)(!0),n=_t(jn),o=fe(t?"layermanagement-deactivate-all-maps":"layermanagement-activate-all-maps"),i=(0,pv.useCallback)(()=>{n.forEach(a=>{a.setVisibility(e,t?"none":"visible")})},[e,t,n]);return(0,pv.useEffect)(()=>{if(e){let a=()=>{let h=n.length===0?!0:n.some(m=>m.isVisible(e));r(h)},c=()=>{a()};return e._loaded?a():e.on("load",a),e.on(_s.visibilityChanged,c),()=>{e.off(_s.visibilityChanged,c),e.off("load",a)}}},[e,n]),pv.default.createElement("button",{onClick:i,className:jt("deactivate-map-col-control",t?"deactivate":""),title:o,id:"deactivate-all-maps"},pv.default.createElement(hu,{name:"layermanagement-deactivate","aria-labelledby":"deactivate-all-maps",alt:o}))},iat=mRr;var aat=iat;u();u();var Hl=Q(De(),1);var d9=Q(It(),1);u();var sat=(e,t)=>{for(let r in e)Object.prototype.hasOwnProperty.call(e,r)&&e[r].forEach(o=>{o.setOpacity(t,0),o.setVisibility(t,"visible")})},lat=e=>e.slice().sort((t,r)=>{let n=t.getSortTime(),o=r.getSortTime();return n>o?1:n<o?-1:0}),uat=(e,t)=>{let r={};return e.forEach(n=>{n.move(t,null);let o=n.getSortTime();o in r?r[o].push(n):r[o]=[n]}),r};var cat=({animationOptions:e={}})=>{let[t,r]=(0,Hl.useState)(!1),[n,o]=(0,Hl.useState)(void 0),[i,a]=(0,Hl.useState)(!1),c=_t(Qt),h=fe(`dynamicmapvis-${i?"close":"open"}`),[m,y]=mo(jn),w=(0,Hl.useRef)(!1),E=V=>{let{layers:G,delay:K=500}=V;G.forEach(Z=>{Z.setOpacity(c,0),Z.setVisibility(c,"visible")}),setTimeout(()=>{A(V)},K)},A=V=>{var se;let{layers:G,steps:K=.1,delay:Z=500,successCallback:te}=V;if(w.current){let le=((se=G[0].getOpacity(c))!=null?se:0)+K;le>1?(G.forEach(pe=>{pe.setOpacity(c,1)}),Te(te)&&te()):(G.forEach(pe=>{pe.setOpacity(c,le)}),setTimeout(()=>{A(V)},Z))}},P=V=>{let{sortedLayers:G,delay:K=500}=V;if(sat(G,c),w.current){let te=Object.keys(G);if(te.length>0){let se=te[0],le=G[se],Z=G,{[se]:pe}=Z,me=En(Z,[nhe(se)]),_e=()=>{P(Pt(Se({},V),{sortedLayers:me}))};setTimeout(()=>{E(Pt(Se({},V),{layers:le,successCallback:_e}),K)}),o(se)}else D()}},j=()=>{r(!0),w.current=!0;let V=lat(m),G=uat(V,c);y(V),P(Pt(Se({},e),{sortedLayers:G}))},D=()=>{r(!1),w.current=!1,o(void 0)},k=V=>{V.preventDefault(),i?(D(),a(!1)):a(!0)},z=n&&n.length>4?n.split(" ")[2]:n;return Hl.default.createElement("div",{className:jt("vkf-dyn-vis-control",t&&"play",i&&"open"),title:h,"aria-label":h,id:"dynamic-map-visualization"},Hl.default.createElement("button",{type:"button",className:"open-dyn-vis",onClick:k,"aria-labelledby":"dynamic-map-visualization"},Hl.default.createElement("svg",{width:"100%",height:"100%",viewBox:"0 0 30 30",version:"1.1",xmlns:"http://www.w3.org/2000/svg",alt:h},Hl.default.createElement("path",{className:"arrow",d:"M14.822,4.521c0.057,-0.014 0.117,-0.021 0.178,-0.021c1.561,0 3.047,0.348 4.385,0.97c1.342,0.611 2.573,1.513 3.589,2.699c0.83,0.969 1.452,2.052 1.868,3.192c0.425,1.136 0.658,2.363 0.658,3.639c0,1.561 -0.348,3.047 -0.97,4.385c-0.611,1.342 -1.513,2.573 -2.699,3.589c-0.969,0.83 -2.052,1.452 -3.192,1.868c-1.136,0.425 -2.363,0.658 -3.639,0.658c-1.561,0 -3.047,-0.348 -4.385,-0.97c-1.342,-0.611 -2.573,-1.513 -3.589,-2.699l-0.488,-0.569c-0.075,-0.088 -0.126,-0.188 -0.154,-0.292c-1.033,-1.48 -1.696,-3.234 -1.85,-5.122l-1.685,1.685c-0.293,0.293 -0.768,0.293 -1.061,0c-0.293,-0.292 -0.293,-0.768 0,-1.06l3,-3c0.293,-0.293 0.768,-0.293 1.061,0l3,3c0.292,0.292 0.292,0.768 0,1.06c-0.293,0.293 -0.768,0.293 -1.061,0l-1.754,-1.754c0.286,3.268 2.35,6.059 5.208,7.389c2.154,0.98 4.642,1.084 6.877,0.268c2.229,-0.835 4.051,-2.533 5.049,-4.678c0.98,-2.154 1.084,-4.642 0.268,-6.877c-0.835,-2.229 -2.533,-4.051 -4.678,-5.049c-3.095,-1.408 -6.88,-1.008 -9.613,1.333c-0.315,0.269 -0.788,0.233 -1.058,-0.082c-0.269,-0.314 -0.233,-0.788 0.082,-1.057c1.921,-1.646 4.287,-2.469 6.653,-2.505Z"}),Hl.default.createElement("path",{className:"minute-hand",d:"M14.238,8.795l0,5.47c0,0.414 0.336,0.75 0.75,0.75c0.414,0 0.75,-0.336 0.75,-0.75l0,-5.47c0,-0.414 -0.336,-0.75 -0.75,-0.75c-0.414,-0 -0.75,0.336 -0.75,0.75Z"}),Hl.default.createElement("path",{className:"hour-hand",d:"M21.18,14.263l-5.47,-0c-0.414,-0 -0.75,0.336 -0.75,0.75c-0,0.413 0.336,0.75 0.75,0.75l5.47,-0c0.414,-0 0.75,-0.337 0.75,-0.75c0,-0.414 -0.336,-0.75 -0.75,-0.75Z"}))),Hl.default.createElement("div",{className:"content"},Hl.default.createElement("div",{className:jt("feedback",n!==void 0&&"running")},z),Hl.default.createElement("button",{"aria-label":fe("dynamicmapvis-start"),className:"start-button",onClick:j,tabIndex:i?void 0:-1,title:fe("dynamicmapvis-start"),type:"button"},"Start"),Hl.default.createElement("button",{"aria-label":fe("dynamicmapvis-stop"),className:"stop-button",onClick:D,tabIndex:i?void 0:-1,title:fe("dynamicmapvis-stop"),type:"button"},"Stop")))};cat.propTypes={animationOptions:d9.default.shape({delay:d9.default.number,steps:d9.default.number})};var pat=cat;var fat=pat;u();u();var yi=Q(De(),1);var V0=Q(It(),1);u();var h9=Q(De(),1);function dat(e,t=300,r={}){let n=(0,h9.useRef)(null),o=(0,h9.useCallback)(i=>{n.current?(clearTimeout(n.current),n.current=null,e&&e(i)):n.current=setTimeout(()=>{r.onSingleTap&&r.onSingleTap(i),n.current=null},t)},[e,t,r.onSingleTap]);return e?{onClick:o}:{}}u();var jf=Q(De(),1);var z4=Q(It(),1);var Aue=e=>{let{onEndDrag:t,onStartDrag:r,orientation:n="horizontal",layer:o}=e,i=_t(Qt),[a,c]=(0,jf.useState)(o.getOpacity(i)*100),h=(0,jf.useRef)(null),m=0,y=100,w=(P,j)=>{if(n==="vertical"){var D=100-(P-m)/(y-m)*100;j.style.top=D+"%",j.innerHTML=P.toFixed(0)+"%";return}let k=(P-m)/(y-m)*100;j.style.left=k+"%",j.innerHTML=P+"%"},E=P=>{let{layerId:j}=P;if(j===o.getId()){let D=o.getOpacity(i)*100;c(D)}},A=P=>{c(P),Te(i)&&o.setOpacity(i,P/100)};return(0,jf.useEffect)(()=>{w(Math.round(a),h.current)},[a]),(0,jf.useEffect)(()=>{if(i)return i.on(_s.opacityChanged,E),()=>{i.off(_s.opacityChanged,E)}},[i]),jf.default.createElement("div",{className:"opacity-container"},jf.default.createElement("div",{className:"slider-container"},jf.default.createElement(a9,{onAfterChange:t,onBeforeChange:r,onChange:A,value:a,vertical:n==="vertical"}),jf.default.createElement("div",{className:"tooltip value",ref:h},"100%")))};Aue.propTypes={onEndDrag:z4.default.func,onStartDrag:z4.default.func,layer:z4.default.object.isRequired,orientation:z4.default.oneOf(["horizontal","vertical"])};u();var ZT=Q(De(),1),hat=Q(It(),1);var mat=r=>{var n=r,{active:e}=n,t=En(n,["active"]);let o=mr.getSettings();return ZT.default.createElement("button",Se({className:jt("vkf-drag-button",e&&"active"),title:o==="de"?"Ebene verschieben":"Move layer"},t),ZT.default.createElement("span",null),ZT.default.createElement("span",null),ZT.default.createElement("span",null),ZT.default.createElement("span",null))};mat.propTypes={active:hat.default.bool};var gat=mat;u();var vat=Q(It(),1),B0=Q(De(),1);var yat=e=>{let{layer:t}=e,r=t.getMetadata(Ue.title),n=_t(Qt),o=(0,B0.useMemo)(()=>t.isVisible(n),[t,n]),[i,a]=(0,B0.useState)(o),c=m=>{m.preventDefault(),m.stopPropagation(),a(!i),n&&t.setVisibility(n,i?"none":"visible")},h=({layerId:m,value:y})=>{m===t.getId()&&a(y==="visible")};return(0,B0.useEffect)(()=>{if(n)return n.on(_s.visibilityChanged,h),()=>{n.off(_s.visibilityChanged,h)}},[n]),B0.default.createElement("button",{className:jt("disable-layer minimize-tool",i?"record-visible":"record-hidden"),onClick:c,type:"button",title:fe("layermanagement-show-map")},` ${fe("layermanagement-show-map")}: ${r}`)};yat.propTypes={layer:vat.default.object};var _at=yat;u();u();var qf=hu;var Oue=Q(De(),1);var bat=Q(It(),1);var xat=e=>{let{layer:t}=e,r=_t(Qt),n=Ir(jn),[o,i]=mo(el);return Oue.default.createElement("button",{className:"remove-layer minimize-tool",onClick:c=>{c.stopPropagation(),Te(r)&&(t.removeMapLibreLayers(r),n(h=>h.filter(m=>m.getId()!==t.getId())),t.getType()===go.VECTOR_MAP&&(o==null?void 0:o.sourceId)===t.getId()&&i(null))},type:"button",title:fe("layermanagement-remove-map")},Oue.default.createElement(qf,{name:"layeraction-remove-map"}))};xat.propTypes={layer:bat.default.object.isRequired};var wat=xat;u();var F4=Q(De(),1),Eat=Q(It(),1);var Sat=e=>{let{layer:t}=e,{zoomToExtent:r}=k0(),n=(0,F4.useCallback)(()=>{r(t)},[r,t]);return F4.default.createElement("button",{className:"zoom-layer minimize-tool",onClick:n,type:"button",title:fe("layermanagement-zoom-to-map")},F4.default.createElement(qf,{name:"layeraction-center"}))};Sat.propTypes={layer:Eat.default.object.isRequired};var Tat=Sat;u();var Pue=Q(De(),1);var Iat=Q(It(),1),Mat=e=>{let{layer:t}=e,r=_t(Qt),n=Ir(jn);return Pue.default.createElement("button",{className:"move-layer-top minimize-tool",onClick:i=>{i.stopPropagation(),t.moveToTop(r),n(a=>[...a.filter(c=>c!==t),t])},type:"button",title:fe("layermanagement-move-top")},Pue.default.createElement(hu,{name:"layeraction-totop"}))};Mat.propTypes={layer:Iat.default.object.isRequired};var Cat=Mat;u();var zf=Q(De(),1),Aat=Q(It(),1);var Oat=({layer:e})=>{let[t,r]=(0,zf.useState)(qF(e)),n=(0,zf.useMemo)(()=>f4(e),[e]),{layerType:o,layerTitle:i,isMosaic:a,isRemoteVectorMap:c}=(0,zf.useMemo)(()=>({layerType:e.getType(),layerTitle:e.getMetadata(Ue.title),isMosaic:e.getMetadata(Ue.type)===go.MOSAIC_MAP,isRemoteVectorMap:Te(e.getMetadata(Ue.vectorMapId))}),[e]),h=(0,zf.useCallback)(()=>{t!==n&&r(n)},[n]);return zf.default.createElement("div",{className:"thumbnail-container"},zf.default.createElement("img",{onError:h,src:t,alt:`Thumbnail Image of Map for ${i}`}),o===go.VECTOR_MAP&&zf.default.createElement("span",{className:jt("vector-badge",!c&&"local-vector-badge")},fe("vector-badge-title")),a&&zf.default.createElement("span",{className:"mosaic-badge"},fe("mosaic-badge-title")))};Oat.propTypes={layer:Aat.default.object.isRequired};var Pat=Oat;u();var U4=Q(De(),1);var Dat=Q(It(),1),Nat=({layer:e})=>{let t=Ir(Qq),r=(0,U4.useCallback)(()=>{t(e.getId())},[e]);return U4.default.createElement("button",{className:"show-original",onClick:r,type:"button",title:fe("layermanagement-show-original")},U4.default.createElement(qf,{name:"layeraction-showoriginal"}))};Nat.propTypes={layer:Dat.default.object};var Lat=Nat;u();var B4=Q(De(),1),kat=Q(It(),1);var Rat=({layer:e})=>{let t=Ir(tl),r=(0,B4.useCallback)(()=>{e&&Te(e.getId())&&t(e.getId())},[e]);return B4.default.createElement("button",{className:"show-geojson-layer",onClick:r,type:"button",title:fe("layermanagement-show-geojson")},B4.default.createElement(hu,{name:"layermanagement-show-geojson"}))};Rat.propTypes={layer:kat.default.instanceOf(Wo).isRequired};var jat=Rat;var qat={LAYER:"LAYER"},zat=e=>{let{id:t,index:r,layer:n,onMoveLayer:o}=e,[i,a]=(0,yi.useState)(!1),[c,h]=(0,yi.useState)(!1),[m,y]=(0,yi.useState)(!1),[w,E]=(0,yi.useState)(!1),A=(0,yi.useRef)(null),P=mr.getSettings(),[{handlerId:j},D]=J6({accept:qat.LAYER,collect(rt){return{handlerId:rt.getHandlerId()}},hover(rt,ct){var ot;if(!A.current)return;let qe=rt.index,lt=r;if(qe===lt)return;let bt=(ot=A.current)==null?void 0:ot.getBoundingClientRect(),Tt=(bt.bottom-bt.top)/2,pt=ct.getClientOffset().y-bt.top;qe<lt&&pt<Tt||qe>lt&&pt>Tt||(o(qe,lt),rt.index=lt)}}),[{draggedItem:k,isDragging:z},V]=WBe({type:qat.LAYER,item:()=>({id:t,index:r}),collect:rt=>({isDragging:rt.isDragging(),draggedItem:rt.getItem()})}),G=()=>setTimeout(()=>{A.current!==null&&(A.current.contains(document.activeElement)||Z())},100),K=()=>{a(!0)},Z=()=>{a(!1)},te=dat(()=>{y(rt=>!rt)},500),se=()=>{h(!0)},le=()=>{h(!1)};(0,yi.useEffect)(()=>{i?k===null&&!w&&E(!0):k!==void 0&&!c&&E(!1)},[i,w,c,k]),V(D(A));let pe=n.getId(),me=n.getType(),_e=n.getDisplayTime(),de=n.getMetadata(Ue.title),Ye=n.getMetadata(Ue.type)==="mosaic";return yi.default.createElement("li",Pt(Se({className:jt("vkf-layermanagement-record",z&&"drag-and-drop-placeholder",m&&"show-actions",me===go.VECTOR_MAP&&"geojson-data",w&&(k===null||k.id===pe)&&"force-hover"),id:r,"data-id":pe,"data-handler-id":j,onFocus:K,onBlur:G,onMouseEnter:K,onMouseOver:K,onMouseLeave:Z},te),{ref:A}),yi.default.createElement("div",{className:"visibility-container"},yi.default.createElement(_at,{layer:n})),yi.default.createElement(Pat,{layer:n}),yi.default.createElement("div",{className:"metadata-container"},yi.default.createElement("h3",null,de),yi.default.createElement("div",{className:"timestamps"},yi.default.createElement("span",{className:"timestamps-label"},`${fe("mapsearch-listelement-time")} ${_e}`))),yi.default.createElement("div",{className:"control-container"},yi.default.createElement(Cat,{layer:n}),yi.default.createElement(wat,{layer:n}),yi.default.createElement(Tat,{layer:n}),me!==go.VECTOR_MAP?yi.default.createElement(Lat,{layer:n}):yi.default.createElement(jat,{layer:n}),!Ye&&P.LINK_TO_GEOREFERENCE!==void 0&&me!==go.VECTOR_MAP&&yi.default.createElement("button",{className:"georeference-update",title:`${fe("layermangement-georef-update")} ...`,onClick:()=>{window.open(`${P.LINK_TO_GEOREFERENCE}?map_id=${pe}`,"_blank")}},yi.default.createElement(hu,{name:"icon-point-move"})),yi.default.createElement(Aue,{onStartDrag:se,onEndDrag:le,orientation:"horizontal",layer:n})),yi.default.createElement("div",{className:"drag-container"},yi.default.createElement(gat,{tabIndex:-1})))};zat.propTypes={id:V0.default.string,index:V0.default.number,layer:V0.default.oneOfType([V0.default.instanceOf(Wo),V0.default.instanceOf(Rg)]),onMoveLayer:V0.default.func,showActions:V0.default.func};var Fat=zat;var Uat=Fat;u();var cl=Q(De(),1);function Due(){let{createNewVectorMap:e}=u9(),{createNewExternalVectorMap:t}=c9(),r=Ir(rz),n=(0,cl.useCallback)(()=>{e()},[]),o=(0,cl.useCallback)(()=>{t()},[]),i=(0,cl.useCallback)(()=>{r(!0)},[]);return cl.default.createElement("div",{className:jt("geojson-container",xle()&&"has-3-rows")},cl.default.createElement("div",{className:"geojson-action"},cl.default.createElement("button",{disabled:!a7(),onClick:n},cl.default.createElement(Fr,{name:"addVectorMap"}),cl.default.createElement("span",null,fe("layermanagement-create-vector-map")))),xle()&&cl.default.createElement("div",{className:"geojson-action"},cl.default.createElement("button",{onClick:o},cl.default.createElement(Fr,{name:"addVectorMap"}),cl.default.createElement("span",null,fe("layermanagement-create-external-vector-map")))),cl.default.createElement("div",{className:"geojson-action"},cl.default.createElement("button",{onClick:i},cl.default.createElement(qf,{name:"layermanagement-upload"}),cl.default.createElement("span",null,fe("layermanagement-add-vector-map")))))}var Bat=({showControls:e={showBadge:!0,showHideButton:!0,showDynamicMapVisualization:!0},showHeader:t=!0})=>{let{showBadge:r,showDynamicMapVisualization:n,showHideButton:o}=e,[i,a]=(0,va.useState)(!1),c=_t(Qt),h=_t(tl),[m,y]=mo(jn),w=(0,va.useMemo)(()=>Te(h),[h]),E=(0,va.useMemo)(()=>m.toReversed(),[m]),A=(j,D)=>{let k=[...E],z=k.splice(j,1)[0];k.splice(D,0,z);let V=D-1,G=V<0?null:k[V].getMapLibreLayerId();z.move(c,G),y(k.reverse())},P=()=>{a(j=>!j)};return va.default.createElement("div",{className:jt("vkf-layermanagement-root",!w&&"in",i&&"show-controls")},r&&m.length!==0&&va.default.createElement("span",{className:"badge"},m.length),t&&va.default.createElement("div",{className:"heading"},va.default.createElement("span",{className:"header-label"},fe("layermanagement-header-lbl")),va.default.createElement("div",{className:"header-functions"},va.default.createElement("span",{className:"deco-caret"},va.default.createElement(Fr,{name:"caret"})),va.default.createElement("button",{className:"geojson-upload",onClick:P},va.default.createElement(Fr,{name:"uploadVectorMap"}),va.default.createElement("span",{className:"label",id:"geojson-upload-label"},fe("geojson-adddialog-title"))),o&&va.default.createElement(aat,null),n&&va.default.createElement(fat,{animationOptions:{delay:30,steps:.01}}))),va.default.createElement(Due,null),va.default.createElement("ul",{className:"layermanagement-body"},m===void 0||m.length===0?va.default.createElement("li",{className:"empty"},va.default.createElement("h4",null,fe("layermanagement-start-msg-header")),va.default.createElement("p",null,fe("layermanagement-start-msg-body"))):E.map((j,D)=>{let k=j.getId();return va.default.createElement(Uat,{onMoveLayer:A,layer:j,index:D,key:k,id:k})})))};Bat.propTypes={showControls:KT.default.shape({showBadge:KT.default.bool,showDynamicMapVisualization:KT.default.bool,showHideButton:KT.default.bool}),showHeader:KT.default.bool};var m9=Bat;u();var H0=Q(De(),1);var A9=Q(It(),1);u();u();var g9=Q(De(),1);var Vat=()=>{let e=_t(m0),[t,r]=mo(h0),n=(0,g9.useCallback)(o=>r(o),[]);return g9.default.createElement(l9,{title:fe("timeslider-adjust-timeperiod"),timeRange:e,onChange:n,values:t,sliderProps:{draggableTrack:!0}})};Vat.propTypes={};var Gat=Vat;var v9=Gat;u();var M9=Q(De(),1);u();var Rb=Q(De(),1),Tce=Q(It(),1);u();var Xu=Q(De(),1);u();var ar=Q(It()),er=Q(De()),IRr=Q(Jat());u();function Qat(e){return typeof e=="object"&&e!=null&&e.nodeType===1}function est(e,t){return(!t||e!=="hidden")&&e!=="visible"&&e!=="clip"}function Lue(e,t){if(e.clientHeight<e.scrollHeight||e.clientWidth<e.scrollWidth){var r=getComputedStyle(e,null);return est(r.overflowY,t)||est(r.overflowX,t)||function(n){var o=function(i){if(!i.ownerDocument||!i.ownerDocument.defaultView)return null;try{return i.ownerDocument.defaultView.frameElement}catch(a){return null}}(n);return!!o&&(o.clientHeight<n.scrollHeight||o.clientWidth<n.scrollWidth)}(e)}return!1}function b9(e,t,r,n,o,i,a,c){return i<e&&a>t||i>e&&a<t?0:i<=e&&c<=r||a>=t&&c>=r?i-e-n:a>t&&c<r||i<e&&c>r?a-t+o:0}var tst=function(e,t){var r=window,n=t.scrollMode,o=t.block,i=t.inline,a=t.boundary,c=t.skipOverflowHiddenElements,h=typeof a=="function"?a:function(Yt){return Yt!==a};if(!Qat(e))throw new TypeError("Invalid target");for(var m,y,w=document.scrollingElement||document.documentElement,E=[],A=e;Qat(A)&&h(A);){if((A=(y=(m=A).parentElement)==null?m.getRootNode().host||null:y)===w){E.push(A);break}A!=null&&A===document.body&&Lue(A)&&!Lue(document.documentElement)||A!=null&&Lue(A,c)&&E.push(A)}for(var P=r.visualViewport?r.visualViewport.width:innerWidth,j=r.visualViewport?r.visualViewport.height:innerHeight,D=window.scrollX||pageXOffset,k=window.scrollY||pageYOffset,z=e.getBoundingClientRect(),V=z.height,G=z.width,K=z.top,Z=z.right,te=z.bottom,se=z.left,le=o==="start"||o==="nearest"?K:o==="end"?te:K+V/2,pe=i==="center"?se+G/2:i==="end"?Z:se,me=[],_e=0;_e<E.length;_e++){var de=E[_e],Ce=de.getBoundingClientRect(),Ye=Ce.height,rt=Ce.width,ct=Ce.top,qe=Ce.right,lt=Ce.bottom,bt=Ce.left;if(n==="if-needed"&&K>=0&&se>=0&&te<=j&&Z<=P&&K>=ct&&te<=lt&&se>=bt&&Z<=qe)return me;var Tt=getComputedStyle(de),et=parseInt(Tt.borderLeftWidth,10),pt=parseInt(Tt.borderTopWidth,10),ot=parseInt(Tt.borderRightWidth,10),We=parseInt(Tt.borderBottomWidth,10),Ne=0,Ke=0,Ge="offsetWidth"in de?de.offsetWidth-de.clientWidth-et-ot:0,ft="offsetHeight"in de?de.offsetHeight-de.clientHeight-pt-We:0,mt="offsetWidth"in de?de.offsetWidth===0?0:rt/de.offsetWidth:0,Ot="offsetHeight"in de?de.offsetHeight===0?0:Ye/de.offsetHeight:0;if(w===de)Ne=o==="start"?le:o==="end"?le-j:o==="nearest"?b9(k,k+j,j,pt,We,k+le,k+le+V,V):le-j/2,Ke=i==="start"?pe:i==="center"?pe-P/2:i==="end"?pe-P:b9(D,D+P,P,et,ot,D+pe,D+pe+G,G),Ne=Math.max(0,Ne+k),Ke=Math.max(0,Ke+D);else{Ne=o==="start"?le-ct-pt:o==="end"?le-lt+We+ft:o==="nearest"?b9(ct,lt,Ye,pt,We+ft,le,le+V,V):le-(ct+Ye/2)+ft/2,Ke=i==="start"?pe-bt-et:i==="center"?pe-(bt+rt/2)+Ge/2:i==="end"?pe-qe+ot+Ge:b9(bt,qe,rt,et,ot+Ge,pe,pe+G,G);var At=de.scrollLeft,Mt=de.scrollTop;le+=Mt-(Ne=Math.max(0,Math.min(Mt+Ne/Ot,de.scrollHeight-Ye/Ot+ft))),pe+=At-(Ke=Math.max(0,Math.min(At+Ke/mt,de.scrollWidth-rt/mt+Ge)))}me.push({el:de,top:Ne,left:Ke})}return me};u();var J4=function(){return J4=Object.assign||function(t){for(var r,n=1,o=arguments.length;n<o;n++){r=arguments[n];for(var i in r)Object.prototype.hasOwnProperty.call(r,i)&&(t[i]=r[i])}return t},J4.apply(this,arguments)};var MRr=0;function nD(){}function CRr(e,t){if(!e)return;tst(e,{boundary:t,block:"nearest",scrollMode:"if-needed"}).forEach(n=>{let{el:o,top:i,left:a}=n;o.scrollTop=i,o.scrollLeft=a})}function rst(e,t,r){return e===t||t instanceof r.Node&&e.contains&&e.contains(t)}function Rue(e,t){let r;function n(){r&&clearTimeout(r)}function o(){for(var i=arguments.length,a=new Array(i),c=0;c<i;c++)a[c]=arguments[c];n(),r=setTimeout(()=>{r=null,e(...a)},t)}return o.cancel=n,o}function qs(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];return function(n){for(var o=arguments.length,i=new Array(o>1?o-1:0),a=1;a<o;a++)i[a-1]=arguments[a];return t.some(c=>(c&&c(n,...i),n.preventDownshiftDefault||n.hasOwnProperty("nativeEvent")&&n.nativeEvent.preventDownshiftDefault))}}function _m(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];return n=>{t.forEach(o=>{typeof o=="function"?o(n):o&&(o.current=n)})}}function ARr(){return String(MRr++)}function ORr(e){let{isOpen:t,resultCount:r,previousResultCount:n}=e;return t?r?r!==n?`${r} result${r===1?" is":"s are"} available, use up and down arrow keys to navigate. Press Enter key to select.`:"":"No results are available.":""}function x9(e,t){return Object.keys(e).reduce((r,n)=>(r[n]=ust(t,n)?t[n]:e[n],r),{})}function ust(e,t){return e[t]!==void 0}function tD(e){let{key:t,keyCode:r}=e;return r>=37&&r<=40&&t.indexOf("Arrow")!==0?`Arrow${t}`:t}function rD(e,t,r,n,o){if(o===void 0&&(o=!0),r===0)return-1;let i=r-1;(typeof t!="number"||t<0||t>=r)&&(t=e>0?-1:i+1);let a=t+e;a<0?a=o?i:0:a>i&&(a=o?0:i);let c=kb(e,a,r,n,o);return c===-1?t>=r?-1:t:c}function kb(e,t,r,n,o){let i=n(t);if(!i||!i.hasAttribute("disabled"))return t;if(e>0){for(let a=t+1;a<r;a++)if(!n(a).hasAttribute("disabled"))return a}else for(let a=t-1;a>=0;a--)if(!n(a).hasAttribute("disabled"))return a;return o?e>0?kb(1,0,r,n,!1):kb(-1,r-1,r,n,!1):-1}function nst(e,t,r,n){return n===void 0&&(n=!0),t.some(o=>o&&(rst(o,e,r)||n&&rst(o,r.document.activeElement,r)))}var PRr=Rue(e=>{pst(e).textContent=""},500);function cst(e,t){let r=pst(t);e&&(r.textContent=e,PRr(t))}function pst(e){e===void 0&&(e=document);let t=e.getElementById("a11y-status-message");return t||(t=e.createElement("div"),t.setAttribute("id","a11y-status-message"),t.setAttribute("role","status"),t.setAttribute("aria-live","polite"),t.setAttribute("aria-relevant","additions text"),Object.assign(t.style,{border:"0",clip:"rect(0 0 0 0)",height:"1px",margin:"-1px",overflow:"hidden",padding:"0",position:"absolute",width:"1px"}),e.body.appendChild(t),t)}var fst={highlightedIndex:-1,isOpen:!1,selectedItem:null,inputValue:""};function DRr(e,t,r){let{props:n,type:o}=e,i={};Object.keys(t).forEach(a=>{NRr(a,e,t,r),r[a]!==t[a]&&(i[a]=r[a])}),n.onStateChange&&Object.keys(i).length&&n.onStateChange(Se({type:o},i))}function NRr(e,t,r,n){let{props:o,type:i}=t,a=`on${que(e)}Change`;o[a]&&n[e]!==void 0&&n[e]!==r[e]&&o[a](Se({type:i},n))}function LRr(e,t){return t.changes}function kRr(e){let{selectedItem:t,itemToString:r}=e;return t?`${r(t)} has been selected.`:""}var RRr=Rue((e,t)=>{cst(e(),t)},200),jRr=typeof window!="undefined"&&typeof window.document!="undefined"&&typeof window.document.createElement!="undefined"?er.useLayoutEffect:er.useEffect;function dst(e){let{id:t=`downshift-${ARr()}`,labelId:r,menuId:n,getItemId:o,toggleButtonId:i,inputId:a}=e;return(0,er.useRef)({labelId:r||`${t}-label`,menuId:n||`${t}-menu`,getItemId:o||(h=>`${t}-item-${h}`),toggleButtonId:i||`${t}-toggle-button`,inputId:a||`${t}-input`}).current}function jue(e,t,r){return e!==void 0?e:r.length===0?-1:r.indexOf(t)}function qRr(e){return e?String(e):""}function ost(e){return /^\S{1}$/.test(e)}function que(e){return`${e.slice(0,1).toUpperCase()}${e.slice(1)}`}function T9(e){let t=(0,er.useRef)(e);return t.current=e,t}function hst(e,t,r){let n=(0,er.useRef)(),o=(0,er.useRef)(),i=(0,er.useCallback)((w,E)=>{o.current=E,w=x9(w,E.props);let A=e(w,E);return E.props.stateReducer(w,Pt(Se({},E),{changes:A}))},[e]),[a,c]=(0,er.useReducer)(i,t),h=T9(r),m=(0,er.useCallback)(w=>c(Se({props:h.current},w)),[h]),y=o.current;return(0,er.useEffect)(()=>{y&&n.current&&n.current!==a&&DRr(y,x9(n.current,y.props),a),n.current=a},[a,r,y]),[a,m]}function mst(e,t,r){let[n,o]=hst(e,t,r);return[x9(n,r),o]}var eD={itemToString:qRr,stateReducer:LRr,getA11ySelectionMessage:kRr,scrollIntoView:CRr,circularNavigation:!1,environment:typeof window=="undefined"?{}:window};function Ku(e,t,r){r===void 0&&(r=fst);let n=e[`default${que(t)}`];return n!==void 0?n:r[t]}function Q4(e,t,r){r===void 0&&(r=fst);let n=e[t];if(n!==void 0)return n;let o=e[`initial${que(t)}`];return o!==void 0?o:Ku(e,t,r)}function gst(e){let t=Q4(e,"selectedItem"),r=Q4(e,"isOpen"),n=Q4(e,"highlightedIndex"),o=Q4(e,"inputValue");return{highlightedIndex:n<0&&t&&r?e.items.indexOf(t):n,isOpen:r,selectedItem:t,inputValue:o}}function XT(e,t,r,n){let{items:o,initialHighlightedIndex:i,defaultHighlightedIndex:a}=e,{selectedItem:c,highlightedIndex:h}=t;return o.length===0?-1:i!==void 0&&h===i?i:a!==void 0?a:c?r===0?o.indexOf(c):rD(r,o.indexOf(c),o.length,n,!1):r===0?-1:r<0?o.length-1:0}function vst(e,t,r,n){let o=(0,er.useRef)({isMouseDown:!1,isTouchMove:!1});return(0,er.useEffect)(()=>{let i=()=>{o.current.isMouseDown=!0},a=y=>{o.current.isMouseDown=!1,e&&!nst(y.target,t.map(w=>w.current),r)&&n()},c=()=>{o.current.isTouchMove=!1},h=()=>{o.current.isTouchMove=!0},m=y=>{e&&!o.current.isTouchMove&&!nst(y.target,t.map(w=>w.current),r,!1)&&n()};return r.addEventListener("mousedown",i),r.addEventListener("mouseup",a),r.addEventListener("touchstart",c),r.addEventListener("touchmove",h),r.addEventListener("touchend",m),function(){r.removeEventListener("mousedown",i),r.removeEventListener("mouseup",a),r.removeEventListener("touchstart",c),r.removeEventListener("touchmove",h),r.removeEventListener("touchend",m)}},[e,r]),o}var zue=()=>nD;function w9(e,t,r){let h=r,{isInitialMount:n,highlightedIndex:o,items:i,environment:a}=h,c=En(h,["isInitialMount","highlightedIndex","items","environment"]);(0,er.useEffect)(()=>{n||RRr(()=>e(Se({highlightedIndex:o,highlightedItem:i[o],resultCount:i.length},c)),a.document)},t)}function yst(e){let{highlightedIndex:t,isOpen:r,itemRefs:n,getItemNodeFromIndex:o,menuElement:i,scrollIntoView:a}=e,c=(0,er.useRef)(!0);return jRr(()=>{t<0||!r||!Object.keys(n.current).length||(c.current===!1?c.current=!0:a(o(t),i))},[t]),c}var Fue=nD;function _st(e,t,r){let{type:n,props:o}=t,i;switch(n){case r.ItemMouseMove:i={highlightedIndex:t.disabled?-1:t.index};break;case r.MenuMouseLeave:i={highlightedIndex:-1};break;case r.ToggleButtonClick:case r.FunctionToggleMenu:i={isOpen:!e.isOpen,highlightedIndex:e.isOpen?-1:XT(o,e,0)};break;case r.FunctionOpenMenu:i={isOpen:!0,highlightedIndex:XT(o,e,0)};break;case r.FunctionCloseMenu:i={isOpen:!1};break;case r.FunctionSetHighlightedIndex:i={highlightedIndex:t.highlightedIndex};break;case r.FunctionSetInputValue:i={inputValue:t.inputValue};break;case r.FunctionReset:i={highlightedIndex:Ku(o,"highlightedIndex"),isOpen:Ku(o,"isOpen"),selectedItem:Ku(o,"selectedItem"),inputValue:Ku(o,"inputValue")};break;default:throw new Error("Reducer called without proper action type.")}return Se(Se({},e),i)}function ist(e){for(var t=e.keysSoFar,r=e.highlightedIndex,n=e.items,o=e.itemToString,i=e.getItemNodeFromIndex,a=t.toLowerCase(),c=0;c<n.length;c++){var h=(c+r+1)%n.length,m=n[h];if(m!==void 0&&o(m).toLowerCase().startsWith(a)){var y=i(h);if(!(y!=null&&y.hasAttribute("disabled")))return h}}return r}var Kwo={items:ar.default.array.isRequired,itemToString:ar.default.func,getA11yStatusMessage:ar.default.func,getA11ySelectionMessage:ar.default.func,circularNavigation:ar.default.bool,highlightedIndex:ar.default.number,defaultHighlightedIndex:ar.default.number,initialHighlightedIndex:ar.default.number,isOpen:ar.default.bool,defaultIsOpen:ar.default.bool,initialIsOpen:ar.default.bool,selectedItem:ar.default.any,initialSelectedItem:ar.default.any,defaultSelectedItem:ar.default.any,id:ar.default.string,labelId:ar.default.string,menuId:ar.default.string,getItemId:ar.default.func,toggleButtonId:ar.default.string,stateReducer:ar.default.func,onSelectedItemChange:ar.default.func,onHighlightedIndexChange:ar.default.func,onStateChange:ar.default.func,onIsOpenChange:ar.default.func,environment:ar.default.shape({addEventListener:ar.default.func,removeEventListener:ar.default.func,document:ar.default.shape({getElementById:ar.default.func,activeElement:ar.default.any,body:ar.default.any})})};function zRr(e){var t=e.isOpen,r=e.resultCount,n=e.previousResultCount;return t?r?r!==n?"".concat(r," result").concat(r===1?" is":"s are"," available, use up and down arrow keys to navigate. Press Enter or Space Bar keys to select."):"":"No results are available.":""}var FRr=J4(J4({},eD),{getA11yStatusMessage:zRr}),URr=nD,Uue=0,Bue=1,Vue=2,Gue=3,Hue=4,Wue=5,$ue=6,Yue=7,E9=8,bst=9,xst=10,Zue=11,wst=12,Kue=13,Xue=14,Jue=15,Est=16,Sst=17,Tst=18,Ist=19,Que=20,kue=21,Mst=22,Cst=Object.freeze({__proto__:null,MenuKeyDownArrowDown:Uue,MenuKeyDownArrowUp:Bue,MenuKeyDownEscape:Vue,MenuKeyDownHome:Gue,MenuKeyDownEnd:Hue,MenuKeyDownEnter:Wue,MenuKeyDownSpaceButton:$ue,MenuKeyDownCharacter:Yue,MenuBlur:E9,MenuMouseLeave:bst,ItemMouseMove:xst,ItemClick:Zue,ToggleButtonClick:wst,ToggleButtonKeyDownArrowDown:Kue,ToggleButtonKeyDownArrowUp:Xue,ToggleButtonKeyDownCharacter:Jue,FunctionToggleMenu:Est,FunctionOpenMenu:Sst,FunctionCloseMenu:Tst,FunctionSetHighlightedIndex:Ist,FunctionSelectItem:Que,FunctionSetInputValue:kue,FunctionReset:Mst});function BRr(e,t){let{type:r,props:n,shiftKey:o}=t,i;switch(r){case Zue:i={isOpen:Ku(n,"isOpen"),highlightedIndex:Ku(n,"highlightedIndex"),selectedItem:n.items[t.index]};break;case Jue:{let a=t.key,c=`${e.inputValue}${a}`,h=ist({keysSoFar:c,highlightedIndex:e.selectedItem?n.items.indexOf(e.selectedItem):-1,items:n.items,itemToString:n.itemToString,getItemNodeFromIndex:t.getItemNodeFromIndex});i=Se({inputValue:c},h>=0&&{selectedItem:n.items[h]})}break;case Kue:i={highlightedIndex:XT(n,e,1,t.getItemNodeFromIndex),isOpen:!0};break;case Xue:i={highlightedIndex:XT(n,e,-1,t.getItemNodeFromIndex),isOpen:!0};break;case Wue:case $ue:i=Se({isOpen:Ku(n,"isOpen"),highlightedIndex:Ku(n,"highlightedIndex")},e.highlightedIndex>=0&&{selectedItem:n.items[e.highlightedIndex]});break;case Gue:i={highlightedIndex:kb(1,0,n.items.length,t.getItemNodeFromIndex,!1)};break;case Hue:i={highlightedIndex:kb(-1,n.items.length-1,n.items.length,t.getItemNodeFromIndex,!1)};break;case Vue:i={isOpen:!1,highlightedIndex:-1};break;case E9:i={isOpen:!1,highlightedIndex:-1};break;case Yue:{let a=t.key,c=`${e.inputValue}${a}`,h=ist({keysSoFar:c,highlightedIndex:e.highlightedIndex,items:n.items,itemToString:n.itemToString,getItemNodeFromIndex:t.getItemNodeFromIndex});i=Se({inputValue:c},h>=0&&{highlightedIndex:h})}break;case Uue:i={highlightedIndex:rD(o?5:1,e.highlightedIndex,n.items.length,t.getItemNodeFromIndex,n.circularNavigation)};break;case Bue:i={highlightedIndex:rD(o?-5:-1,e.highlightedIndex,n.items.length,t.getItemNodeFromIndex,n.circularNavigation)};break;case Que:i={selectedItem:t.selectedItem};break;default:return _st(e,t,Cst)}return Se(Se({},e),i)}Ast.stateChangeTypes=Cst;function Ast(e){e===void 0&&(e={}),URr(e,Ast);let t=Se(Se({},FRr),e),{items:r,scrollIntoView:n,environment:o,initialIsOpen:i,defaultIsOpen:a,itemToString:c,getA11ySelectionMessage:h,getA11yStatusMessage:m}=t,y=gst(t),[w,E]=mst(BRr,y,t),{isOpen:A,highlightedIndex:P,selectedItem:j,inputValue:D}=w,k=(0,er.useRef)(null),z=(0,er.useRef)(null),V=(0,er.useRef)({}),G=(0,er.useRef)(!0),K=(0,er.useRef)(null),Z=dst(t),te=(0,er.useRef)(),se=(0,er.useRef)(!0),le=T9({state:w,props:t}),pe=(0,er.useCallback)(Ke=>V.current[Z.getItemId(Ke)],[Z]);w9(m,[A,P,D,r],Se({isInitialMount:se.current,previousResultCount:te.current,items:r,environment:o,itemToString:c},w)),w9(h,[j],Se({isInitialMount:se.current,previousResultCount:te.current,items:r,environment:o,itemToString:c},w));let me=yst({menuElement:z.current,highlightedIndex:P,isOpen:A,itemRefs:V,scrollIntoView:n,getItemNodeFromIndex:pe});(0,er.useEffect)(()=>(K.current=Rue(Ke=>{Ke({type:kue,inputValue:""})},500),()=>{K.current.cancel()}),[]),(0,er.useEffect)(()=>{D&&K.current(E)},[E,D]),Fue({isInitialMount:se.current,props:t,state:w}),(0,er.useEffect)(()=>{if(se.current){(i||a||A)&&z.current&&z.current.focus();return}if(A){z.current&&z.current.focus();return}o.document.activeElement===z.current&&k.current&&(G.current=!1,k.current.focus())},[A]),(0,er.useEffect)(()=>{se.current||(te.current=r.length)});let _e=vst(A,[z,k],o,()=>{E({type:E9})}),de=zue("getMenuProps","getToggleButtonProps");(0,er.useEffect)(()=>{se.current=!1},[]),(0,er.useEffect)(()=>{A||(V.current={})},[A]);let Ce=(0,er.useMemo)(()=>({ArrowDown(Ke){Ke.preventDefault(),E({type:Kue,getItemNodeFromIndex:pe,shiftKey:Ke.shiftKey})},ArrowUp(Ke){Ke.preventDefault(),E({type:Xue,getItemNodeFromIndex:pe,shiftKey:Ke.shiftKey})}}),[E,pe]),Ye=(0,er.useMemo)(()=>({ArrowDown(Ke){Ke.preventDefault(),E({type:Uue,getItemNodeFromIndex:pe,shiftKey:Ke.shiftKey})},ArrowUp(Ke){Ke.preventDefault(),E({type:Bue,getItemNodeFromIndex:pe,shiftKey:Ke.shiftKey})},Home(Ke){Ke.preventDefault(),E({type:Gue,getItemNodeFromIndex:pe})},End(Ke){Ke.preventDefault(),E({type:Hue,getItemNodeFromIndex:pe})},Escape(){E({type:Vue})},Enter(Ke){Ke.preventDefault(),E({type:Wue})}," "(Ke){Ke.preventDefault(),E({type:$ue})}}),[E,pe]),rt=(0,er.useCallback)(()=>{E({type:Est})},[E]),ct=(0,er.useCallback)(()=>{E({type:Tst})},[E]),qe=(0,er.useCallback)(()=>{E({type:Sst})},[E]),lt=(0,er.useCallback)(Ke=>{E({type:Ist,highlightedIndex:Ke})},[E]),bt=(0,er.useCallback)(Ke=>{E({type:Que,selectedItem:Ke})},[E]),Tt=(0,er.useCallback)(()=>{E({type:Mst})},[E]),et=(0,er.useCallback)(Ke=>{E({type:kue,inputValue:Ke})},[E]),pt=(0,er.useCallback)(Ke=>Se({id:Z.labelId,htmlFor:Z.toggleButtonId},Ke),[Z]),ot=(0,er.useCallback)(function(Ke,Ge){let br=Ke===void 0?{}:Ke,{onMouseLeave:ft,refKey:mt="ref",onKeyDown:Ot,onBlur:At,ref:Mt}=br,Yt=En(br,["onMouseLeave","refKey","onKeyDown","onBlur","ref"]),{suppressRefError:qt=!1}=Ge===void 0?{}:Ge,Ut=le.current.state,sr=Dr=>{let ke=tD(Dr);ke&&Ye[ke]?Ye[ke](Dr):ost(ke)&&E({type:Yue,key:ke,getItemNodeFromIndex:pe})},jr=()=>{if(G.current===!1){G.current=!0;return}!_e.current.isMouseDown&&E({type:E9})},Pr=()=>{E({type:bst})};return de("getMenuProps",qt,mt,z),Se(Pt(Se({[mt]:_m(Mt,Dr=>{z.current=Dr}),id:Z.menuId,role:"listbox","aria-labelledby":Z.labelId,tabIndex:-1},Ut.isOpen&&Ut.highlightedIndex>-1&&{"aria-activedescendant":Z.getItemId(Ut.highlightedIndex)}),{onMouseLeave:qs(ft,Pr),onKeyDown:qs(Ot,sr),onBlur:qs(At,jr)}),Yt)},[E,le,Ye,_e,de,Z,pe]),We=(0,er.useCallback)(function(Ke,Ge){let jr=Ke===void 0?{}:Ke,{onClick:ft,onKeyDown:mt,refKey:Ot="ref",ref:At}=jr,Mt=En(jr,["onClick","onKeyDown","refKey","ref"]),{suppressRefError:Yt=!1}=Ge===void 0?{}:Ge,qt=()=>{E({type:wst})},Ut=Pr=>{let br=tD(Pr);br&&Ce[br]?Ce[br](Pr):ost(br)&&E({type:Jue,key:br,getItemNodeFromIndex:pe})},sr=Se({[Ot]:_m(At,Pr=>{k.current=Pr}),id:Z.toggleButtonId,"aria-haspopup":"listbox","aria-expanded":le.current.state.isOpen,"aria-labelledby":`${Z.labelId} ${Z.toggleButtonId}`},Mt);return Mt.disabled||(sr.onClick=qs(ft,qt),sr.onKeyDown=qs(mt,Ut)),de("getToggleButtonProps",Yt,Ot,k),sr},[E,le,Ce,de,Z,pe]),Ne=(0,er.useCallback)(function(Ke){let ke=Ke===void 0?{}:Ke,{item:Ge,index:ft,onMouseMove:mt,onClick:Ot,refKey:At="ref",ref:Mt,disabled:Yt}=ke,qt=En(ke,["item","index","onMouseMove","onClick","refKey","ref","disabled"]),{state:Ut,props:sr}=le.current,jr=()=>{ft!==Ut.highlightedIndex&&(me.current=!1,E({type:xst,index:ft,disabled:Yt}))},Pr=()=>{E({type:Zue,index:ft})},br=jue(ft,Ge,sr.items);if(br<0)throw new Error("Pass either item or item index in getItemProps!");let Dr=Se({disabled:Yt,role:"option","aria-selected":`${br===Ut.highlightedIndex}`,id:Z.getItemId(br),[At]:_m(Mt,Je=>{Je&&(V.current[Z.getItemId(br)]=Je)})},qt);return Yt||(Dr.onClick=qs(Ot,Pr)),Dr.onMouseMove=qs(mt,jr),Dr},[E,le,me,Z]);return{getToggleButtonProps:We,getLabelProps:pt,getMenuProps:ot,getItemProps:Ne,toggleMenu:rt,openMenu:qe,closeMenu:ct,setHighlightedIndex:lt,selectItem:bt,reset:Tt,setInputValue:et,highlightedIndex:P,isOpen:A,selectedItem:j,inputValue:D}}var ece=0,tce=1,rce=2,nce=3,oce=4,ice=5,ace=6,S9=7,Ost=8,Pst=9,sce=10,Dst=11,Nst=12,Lst=13,kst=14,Rst=15,lce=16,jst=17,qst=18,uce=19,zst=Object.freeze({__proto__:null,InputKeyDownArrowDown:ece,InputKeyDownArrowUp:tce,InputKeyDownEscape:rce,InputKeyDownHome:nce,InputKeyDownEnd:oce,InputKeyDownEnter:ice,InputChange:ace,InputBlur:S9,MenuMouseLeave:Ost,ItemMouseMove:Pst,ItemClick:sce,ToggleButtonClick:Dst,FunctionToggleMenu:Nst,FunctionOpenMenu:Lst,FunctionCloseMenu:kst,FunctionSetHighlightedIndex:Rst,FunctionSelectItem:lce,FunctionSetInputValue:jst,FunctionReset:qst,ControlledPropUpdatedSelectedItem:uce});function VRr(e){let t=gst(e),{selectedItem:r}=t,{inputValue:n}=t;return n===""&&r&&e.defaultInputValue===void 0&&e.initialInputValue===void 0&&e.inputValue===void 0&&(n=e.itemToString(r)),Pt(Se({},t),{inputValue:n})}var Xwo={items:ar.default.array.isRequired,itemToString:ar.default.func,getA11yStatusMessage:ar.default.func,getA11ySelectionMessage:ar.default.func,circularNavigation:ar.default.bool,highlightedIndex:ar.default.number,defaultHighlightedIndex:ar.default.number,initialHighlightedIndex:ar.default.number,isOpen:ar.default.bool,defaultIsOpen:ar.default.bool,initialIsOpen:ar.default.bool,selectedItem:ar.default.any,initialSelectedItem:ar.default.any,defaultSelectedItem:ar.default.any,inputValue:ar.default.string,defaultInputValue:ar.default.string,initialInputValue:ar.default.string,id:ar.default.string,labelId:ar.default.string,menuId:ar.default.string,getItemId:ar.default.func,inputId:ar.default.string,toggleButtonId:ar.default.string,stateReducer:ar.default.func,onSelectedItemChange:ar.default.func,onHighlightedIndexChange:ar.default.func,onStateChange:ar.default.func,onIsOpenChange:ar.default.func,onInputValueChange:ar.default.func,environment:ar.default.shape({addEventListener:ar.default.func,removeEventListener:ar.default.func,document:ar.default.shape({getElementById:ar.default.func,activeElement:ar.default.any,body:ar.default.any})})};function GRr(e,t,r){let n=(0,er.useRef)(),[o,i]=hst(e,t,r);return(0,er.useEffect)(()=>{ust(r,"selectedItem")&&(n.current!==r.selectedItem&&i({type:uce,inputValue:r.itemToString(r.selectedItem)}),n.current=o.selectedItem===n.current?r.selectedItem:o.selectedItem)}),[x9(o,r),i]}var HRr=nD,WRr=Pt(Se({},eD),{getA11yStatusMessage:ORr,circularNavigation:!0});function $Rr(e,t){let{type:r,props:n,shiftKey:o}=t,i;switch(r){case sce:i={isOpen:Ku(n,"isOpen"),highlightedIndex:Ku(n,"highlightedIndex"),selectedItem:n.items[t.index],inputValue:n.itemToString(n.items[t.index])};break;case ece:e.isOpen?i={highlightedIndex:rD(o?5:1,e.highlightedIndex,n.items.length,t.getItemNodeFromIndex,n.circularNavigation)}:i={highlightedIndex:XT(n,e,1,t.getItemNodeFromIndex),isOpen:n.items.length>=0};break;case tce:e.isOpen?i={highlightedIndex:rD(o?-5:-1,e.highlightedIndex,n.items.length,t.getItemNodeFromIndex,n.circularNavigation)}:i={highlightedIndex:XT(n,e,-1,t.getItemNodeFromIndex),isOpen:n.items.length>=0};break;case ice:i=Se({},e.isOpen&&e.highlightedIndex>=0&&{selectedItem:n.items[e.highlightedIndex],isOpen:Ku(n,"isOpen"),highlightedIndex:Ku(n,"highlightedIndex"),inputValue:n.itemToString(n.items[e.highlightedIndex])});break;case rce:i=Se({isOpen:!1,highlightedIndex:-1},!e.isOpen&&{selectedItem:null,inputValue:""});break;case nce:i={highlightedIndex:kb(1,0,n.items.length,t.getItemNodeFromIndex,!1)};break;case oce:i={highlightedIndex:kb(-1,n.items.length-1,n.items.length,t.getItemNodeFromIndex,!1)};break;case S9:i=Se({isOpen:!1,highlightedIndex:-1},e.highlightedIndex>=0&&t.selectItem&&{selectedItem:n.items[e.highlightedIndex],inputValue:n.itemToString(n.items[e.highlightedIndex])});break;case ace:i={isOpen:!0,highlightedIndex:Ku(n,"highlightedIndex"),inputValue:t.inputValue};break;case lce:i={selectedItem:t.selectedItem,inputValue:n.itemToString(t.selectedItem)};break;case uce:i={inputValue:t.inputValue};break;default:return _st(e,t,zst)}return Se(Se({},e),i)}I9.stateChangeTypes=zst;function I9(e){e===void 0&&(e={}),HRr(e,I9);let t=Se(Se({},WRr),e),{initialIsOpen:r,defaultIsOpen:n,items:o,scrollIntoView:i,environment:a,getA11yStatusMessage:c,getA11ySelectionMessage:h,itemToString:m}=t,y=VRr(t),[w,E]=GRr($Rr,y,t),{isOpen:A,highlightedIndex:P,selectedItem:j,inputValue:D}=w,k=(0,er.useRef)(null),z=(0,er.useRef)({}),V=(0,er.useRef)(null),G=(0,er.useRef)(null),K=(0,er.useRef)(null),Z=(0,er.useRef)(!0),te=dst(t),se=(0,er.useRef)(),le=T9({state:w,props:t}),pe=(0,er.useCallback)(Ge=>z.current[te.getItemId(Ge)],[te]);w9(c,[A,P,D,o],Se({isInitialMount:Z.current,previousResultCount:se.current,items:o,environment:a,itemToString:m},w)),w9(h,[j],Se({isInitialMount:Z.current,previousResultCount:se.current,items:o,environment:a,itemToString:m},w));let me=yst({menuElement:k.current,highlightedIndex:P,isOpen:A,itemRefs:z,scrollIntoView:i,getItemNodeFromIndex:pe});Fue({isInitialMount:Z.current,props:t,state:w}),(0,er.useEffect)(()=>{(r||n||A)&&V.current&&V.current.focus()},[]),(0,er.useEffect)(()=>{Z.current||(se.current=o.length)});let _e=vst(A,[K,k,G],a,()=>{E({type:S9,selectItem:!1})}),de=zue("getInputProps","getComboboxProps","getMenuProps");(0,er.useEffect)(()=>{Z.current=!1},[]),(0,er.useEffect)(()=>{A||(z.current={})},[A]);let Ce=(0,er.useMemo)(()=>({ArrowDown(Ge){Ge.preventDefault(),E({type:ece,shiftKey:Ge.shiftKey,getItemNodeFromIndex:pe})},ArrowUp(Ge){Ge.preventDefault(),E({type:tce,shiftKey:Ge.shiftKey,getItemNodeFromIndex:pe})},Home(Ge){le.current.state.isOpen&&(Ge.preventDefault(),E({type:nce,getItemNodeFromIndex:pe}))},End(Ge){le.current.state.isOpen&&(Ge.preventDefault(),E({type:oce,getItemNodeFromIndex:pe}))},Escape(Ge){let ft=le.current.state;(ft.isOpen||ft.inputValue||ft.selectedItem||ft.highlightedIndex>-1)&&(Ge.preventDefault(),E({type:rce}))},Enter(Ge){let ft=le.current.state;!ft.isOpen||ft.highlightedIndex<0||Ge.which===229||(Ge.preventDefault(),E({type:ice,getItemNodeFromIndex:pe}))}}),[E,le,pe]),Ye=(0,er.useCallback)(Ge=>Se({id:te.labelId,htmlFor:te.inputId},Ge),[te]),rt=(0,er.useCallback)(function(Ge,ft){let qt=Ge===void 0?{}:Ge,{onMouseLeave:mt,refKey:Ot="ref",ref:At}=qt,Mt=En(qt,["onMouseLeave","refKey","ref"]),{suppressRefError:Yt=!1}=ft===void 0?{}:ft;return de("getMenuProps",Yt,Ot,k),Se({[Ot]:_m(At,Ut=>{k.current=Ut}),id:te.menuId,role:"listbox","aria-labelledby":te.labelId,onMouseLeave:qs(mt,()=>{E({type:Ost})})},Mt)},[E,de,te]),ct=(0,er.useCallback)(function(Ge){let xe=Ge===void 0?{}:Ge,{item:ft,index:mt,refKey:Ot="ref",ref:At,onMouseMove:Mt,onMouseDown:Yt,onClick:qt,onPress:Ut,disabled:sr}=xe,jr=En(xe,["item","index","refKey","ref","onMouseMove","onMouseDown","onClick","onPress","disabled"]),{props:Pr,state:br}=le.current,Dr=jue(mt,ft,Pr.items);if(Dr<0)throw new Error("Pass either item or item index in getItemProps!");let ke="onClick",Je=qt,tt=()=>{mt!==br.highlightedIndex&&(me.current=!1,E({type:Pst,index:mt,disabled:sr}))},Ft=()=>{E({type:sce,index:mt})},Wt=J=>J.preventDefault();return Se(Pt(Se({[Ot]:_m(At,J=>{J&&(z.current[te.getItemId(Dr)]=J)}),disabled:sr,role:"option","aria-selected":`${Dr===br.highlightedIndex}`,id:te.getItemId(Dr)},!sr&&{[ke]:qs(Je,Ft)}),{onMouseMove:qs(Mt,tt),onMouseDown:qs(Yt,Wt)}),jr)},[E,le,me,te]),qe=(0,er.useCallback)(function(Ge){let qt=Ge===void 0?{}:Ge,{onClick:ft,onPress:mt,refKey:Ot="ref",ref:At}=qt,Mt=En(qt,["onClick","onPress","refKey","ref"]),Yt=()=>{E({type:Dst}),!le.current.state.isOpen&&V.current&&V.current.focus()};return Se(Se({[Ot]:_m(At,Ut=>{G.current=Ut}),id:te.toggleButtonId,tabIndex:-1},!Mt.disabled&&{onClick:qs(ft,Yt)}),Mt)},[E,le,te]),lt=(0,er.useCallback)(function(Ge,ft){let Ft=Ge===void 0?{}:Ge,{onKeyDown:mt,onChange:Ot,onInput:At,onBlur:Mt,onChangeText:Yt,refKey:qt="ref",ref:Ut}=Ft,sr=En(Ft,["onKeyDown","onChange","onInput","onBlur","onChangeText","refKey","ref"]),{suppressRefError:jr=!1}=ft===void 0?{}:ft;de("getInputProps",jr,qt,V);let Pr=le.current.state,br=Wt=>{let xe=tD(Wt);xe&&Ce[xe]&&Ce[xe](Wt)},Dr=Wt=>{E({type:ace,inputValue:Wt.target.value})},ke=()=>{Pr.isOpen&&!_e.current.isMouseDown&&E({type:S9,selectItem:!0})},Je="onChange",tt={};return sr.disabled||(tt={[Je]:qs(Ot,At,Dr),onKeyDown:qs(mt,br),onBlur:qs(Mt,ke)}),Se(Se(Pt(Se({[qt]:_m(Ut,Wt=>{V.current=Wt}),id:te.inputId,"aria-autocomplete":"list","aria-controls":te.menuId},Pr.isOpen&&Pr.highlightedIndex>-1&&{"aria-activedescendant":te.getItemId(Pr.highlightedIndex)}),{"aria-labelledby":te.labelId,autoComplete:"off",value:Pr.inputValue}),tt),sr)},[E,Ce,le,_e,de,te]),bt=(0,er.useCallback)(function(Ge,ft){let Yt=Ge===void 0?{}:Ge,{refKey:mt="ref",ref:Ot}=Yt,At=En(Yt,["refKey","ref"]),{suppressRefError:Mt=!1}=ft===void 0?{}:ft;return de("getComboboxProps",Mt,mt,K),Se({[mt]:_m(Ot,qt=>{K.current=qt}),role:"combobox","aria-haspopup":"listbox","aria-owns":te.menuId,"aria-expanded":le.current.state.isOpen},At)},[le,de,te]),Tt=(0,er.useCallback)(()=>{E({type:Nst})},[E]),et=(0,er.useCallback)(()=>{E({type:kst})},[E]),pt=(0,er.useCallback)(()=>{E({type:Lst})},[E]),ot=(0,er.useCallback)(Ge=>{E({type:Rst,highlightedIndex:Ge})},[E]),We=(0,er.useCallback)(Ge=>{E({type:lce,selectedItem:Ge})},[E]),Ne=(0,er.useCallback)(Ge=>{E({type:jst,inputValue:Ge})},[E]),Ke=(0,er.useCallback)(()=>{E({type:qst})},[E]);return{getItemProps:ct,getLabelProps:Ye,getMenuProps:rt,getInputProps:lt,getComboboxProps:bt,getToggleButtonProps:qe,toggleMenu:Tt,openMenu:pt,closeMenu:et,setHighlightedIndex:ot,setInputValue:Ne,selectItem:We,reset:Ke,highlightedIndex:P,isOpen:A,selectedItem:j,inputValue:D}}var Fst={activeIndex:-1,selectedItems:[]};function ast(e,t){return Q4(e,t,Fst)}function sst(e,t){return Ku(e,t,Fst)}function YRr(e){let t=ast(e,"activeIndex"),r=ast(e,"selectedItems");return{activeIndex:t,selectedItems:r}}function lst(e){if(e.shiftKey||e.metaKey||e.ctrlKey||e.altKey)return!1;let t=e.target;return!(t instanceof HTMLInputElement&&t.value!==""&&(t.selectionStart!==0||t.selectionEnd!==0))}function ZRr(e){let{removedSelectedItem:t,itemToString:r}=e;return`${r(t)} has been removed.`}var Jwo={selectedItems:ar.default.array,initialSelectedItems:ar.default.array,defaultSelectedItems:ar.default.array,itemToString:ar.default.func,getA11yRemovalMessage:ar.default.func,stateReducer:ar.default.func,activeIndex:ar.default.number,initialActiveIndex:ar.default.number,defaultActiveIndex:ar.default.number,onActiveIndexChange:ar.default.func,onSelectedItemsChange:ar.default.func,keyNavigationNext:ar.default.string,keyNavigationPrevious:ar.default.string,environment:ar.default.shape({addEventListener:ar.default.func,removeEventListener:ar.default.func,document:ar.default.shape({getElementById:ar.default.func,activeElement:ar.default.any,body:ar.default.any})})},KRr={itemToString:eD.itemToString,stateReducer:eD.stateReducer,environment:eD.environment,getA11yRemovalMessage:ZRr,keyNavigationNext:"ArrowRight",keyNavigationPrevious:"ArrowLeft"},XRr=nD,cce=0,pce=1,fce=2,dce=3,hce=4,mce=5,gce=6,vce=7,yce=8,_ce=9,bce=10,xce=11,wce=12,JRr=Object.freeze({__proto__:null,SelectedItemClick:cce,SelectedItemKeyDownDelete:pce,SelectedItemKeyDownBackspace:fce,SelectedItemKeyDownNavigationNext:dce,SelectedItemKeyDownNavigationPrevious:hce,DropdownKeyDownNavigationPrevious:mce,DropdownKeyDownBackspace:gce,DropdownClick:vce,FunctionAddSelectedItem:yce,FunctionRemoveSelectedItem:_ce,FunctionSetSelectedItems:bce,FunctionSetActiveIndex:xce,FunctionReset:wce});function QRr(e,t){let{type:r,index:n,props:o,selectedItem:i}=t,{activeIndex:a,selectedItems:c}=e,h;switch(r){case cce:h={activeIndex:n};break;case hce:h={activeIndex:a-1<0?0:a-1};break;case dce:h={activeIndex:a+1>=c.length?-1:a+1};break;case fce:case pce:{let m=a;c.length===1?m=-1:a===c.length-1&&(m=c.length-2),h={selectedItems:[...c.slice(0,a),...c.slice(a+1)],activeIndex:m};break}case mce:h={activeIndex:c.length-1};break;case gce:h={selectedItems:c.slice(0,c.length-1)};break;case yce:h={selectedItems:[...c,i]};break;case vce:h={activeIndex:-1};break;case _ce:{let m=a,y=c.indexOf(i);y>=0&&(c.length===1?m=-1:y===c.length-1&&(m=c.length-2),h={selectedItems:[...c.slice(0,y),...c.slice(y+1)],activeIndex:m});break}case bce:{let{selectedItems:m}=t;h={selectedItems:m};break}case xce:{let{activeIndex:m}=t;h={activeIndex:m};break}case wce:h={activeIndex:sst(o,"activeIndex"),selectedItems:sst(o,"selectedItems")};break;default:throw new Error("Reducer called without proper action type.")}return Se(Se({},e),h)}Ust.stateChangeTypes=JRr;function Ust(e){e===void 0&&(e={}),XRr(e,Ust);let t=Se(Se({},KRr),e),{getA11yRemovalMessage:r,itemToString:n,environment:o,keyNavigationNext:i,keyNavigationPrevious:a}=t,[c,h]=mst(QRr,YRr(t),t),{activeIndex:m,selectedItems:y}=c,w=(0,er.useRef)(!0),E=(0,er.useRef)(null),A=(0,er.useRef)(y),P=(0,er.useRef)();P.current=[];let j=T9({state:c,props:t});(0,er.useEffect)(()=>{if(!w.current){if(y.length<A.current.length){let pe=A.current.find(me=>y.indexOf(me)<0);cst(r({itemToString:n,resultCount:y.length,removedSelectedItem:pe,activeIndex:m,activeSelectedItem:y[m]}),o.document)}A.current=y}},[y.length]),(0,er.useEffect)(()=>{w.current||(m===-1&&E.current?E.current.focus():P.current[m]&&P.current[m].focus())},[m]),Fue({isInitialMount:w.current,props:t,state:c});let D=zue("getDropdownProps");(0,er.useEffect)(()=>{w.current=!1},[]);let k=(0,er.useMemo)(()=>({[a](){h({type:hce})},[i](){h({type:dce})},Delete(){h({type:pce})},Backspace(){h({type:fce})}}),[h,i,a]),z=(0,er.useMemo)(()=>({[a](pe){lst(pe)&&h({type:mce})},Backspace(pe){lst(pe)&&h({type:gce})}}),[h,a]),V=(0,er.useCallback)(function(pe){let et=pe===void 0?{}:pe,{refKey:me="ref",ref:_e,onClick:de,onKeyDown:Ce,selectedItem:Ye,index:rt}=et,ct=En(et,["refKey","ref","onClick","onKeyDown","selectedItem","index"]),{state:qe}=j.current;if(jue(rt,Ye,qe.selectedItems)<0)throw new Error("Pass either selectedItem or index in getSelectedItemProps!");let bt=()=>{h({type:cce,index:rt})},Tt=pt=>{let ot=tD(pt);ot&&k[ot]&&k[ot](pt)};return Se({[me]:_m(_e,pt=>{pt&&P.current.push(pt)}),tabIndex:rt===qe.activeIndex?0:-1,onClick:qs(de,bt),onKeyDown:qs(Ce,Tt)},ct)},[h,j,k]),G=(0,er.useCallback)(function(pe,me){let Tt=pe===void 0?{}:pe,{refKey:_e="ref",ref:de,onKeyDown:Ce,onClick:Ye,preventKeyAction:rt=!1}=Tt,ct=En(Tt,["refKey","ref","onKeyDown","onClick","preventKeyAction"]),{suppressRefError:qe=!1}=me===void 0?{}:me;D("getDropdownProps",qe,_e,E);let lt=et=>{let pt=tD(et);pt&&z[pt]&&z[pt](et)},bt=()=>{h({type:vce})};return Se(Se({[_e]:_m(de,et=>{et&&(E.current=et)})},!rt&&{onKeyDown:qs(Ce,lt),onClick:qs(Ye,bt)}),ct)},[h,z,D]),K=(0,er.useCallback)(pe=>{h({type:yce,selectedItem:pe})},[h]),Z=(0,er.useCallback)(pe=>{h({type:_ce,selectedItem:pe})},[h]),te=(0,er.useCallback)(pe=>{h({type:bce,selectedItems:pe})},[h]),se=(0,er.useCallback)(pe=>{h({type:xce,activeIndex:pe})},[h]),le=(0,er.useCallback)(()=>{h({type:wce})},[h]);return{getSelectedItemProps:V,getDropdownProps:G,addSelectedItem:K,removeSelectedItem:Z,setSelectedItems:te,setActiveIndex:se,reset:le,selectedItems:y,activeIndex:m}}var G0=Q(It(),1);function Ece({buttonProps:e,fetchInputItems:t,label:r,itemToString:n,inputProps:o,onSelectedItemChange:i,timeout:a=300}){let[c,h]=(0,Xu.useState)([]),[m,y]=(0,Xu.useState)(void 0),w=(0,Xu.useRef)(),E=(0,Xu.useRef)(null),A=Ce=>{clearTimeout(E.current),E.current=setTimeout(()=>{t(Ce).then(Ye=>h(Ye))},a)},P=({inputValue:Ce})=>{m!==void 0&&y(void 0),A(Ce)},j=({selectedItem:Ce})=>{i!==void 0&&i(Ce),y(Ce)},{isOpen:D,getToggleButtonProps:k,getLabelProps:z,getMenuProps:V,getInputProps:G,getComboboxProps:K,getItemProps:Z,highlightedIndex:te}=I9({items:c,itemToString:n,onInputValueChange:P,onSelectedItemChange:j}),_e=e!=null?e:{},{onClick:se}=_e,le=En(_e,["onClick"]),de=G(),{ref:pe}=de,me=En(de,["ref"]);return Xu.default.createElement("div",{className:"vkf-autocomplete-container"},Xu.default.createElement("label",Pt(Se({},z()),{id:me["aria-labelledby"],className:"visually-hidden"}),r!==void 0?r:o.placeholder),Xu.default.createElement("div",Se({className:"form-group"},K()),Xu.default.createElement("input",Se(Pt(Se({},me),{ref:Ce=>{pe(Ce),w.current=Ce},type:"text"}),o)),Xu.default.createElement("button",Se(Se(Pt(Se({type:"button"},k()),{"aria-label":"toggle menu"}),le),se!==void 0?{onClick:()=>{se(m,w.current!==null?w.current.value:"")}}:{}),"\u2193")),Xu.default.createElement("div",{className:"autocomplete-dropdown"},Xu.default.createElement("ul",Pt(Se({className:"autocomplete-result-list"},V()),{id:me["aria-controls"]}),D&&c.map((Ce,Ye)=>Xu.default.createElement("li",Se({className:jt("ui-menu-item",te===Ye&&"highlighted",m===Ce&&"selected"),key:`${Ce.label}${Ye}`},Z({item:Ce,index:Ye})),Ce.label)))))}Ece.propTypes={buttonProps:G0.default.object,fetchInputItems:G0.default.func,label:G0.default.string,inputProps:G0.default.object,itemToString:G0.default.func,onSelectedItemChange:G0.default.func,timeout:G0.default.number};u();var Sce=(e,t,r)=>{let n=e+"?format=json&q="+t;return Ya.get(n).then(o=>{let a=o.data.map(c=>({label:c.display_name,value:c.display_name,lonlat:{x:parseFloat(c.lon),y:parseFloat(c.lat)},type:c.type}));return r!==void 0&&r(),a})};var e6r=e=>e?e.label:"",Bst=e=>{let{onSelectPosition:t,searchUrl:r}=e,[n,o]=(0,Rb.useState)(!1),i=Ir(Rs),a=(0,Rb.useCallback)(h=>(o(!0),Sce(r,h,()=>{o(!1)})),[r]),c=(h,m)=>{h!==void 0?t(h):Sce(r,m).then(y=>{if(y.length>0)t(y[0]);else throw new Error(fe("placenamesearch-unknown-placename"))}).catch(()=>{i({id:"placenamesearch",type:"warning",text:fe("placenamesearch-unknown-placename")})})};return Rb.default.createElement("div",{className:"gazetteersearch-container"},Rb.default.createElement(Ece,{buttonProps:{className:"form-control gazetteersearch-submit",onClick:c,"aria-label":fe("placenamesearch-submit"),title:fe("placenamesearch-submit")},fetchInputItems:a,inputProps:{className:`form-control gazetteersearch-input ${n?"loading":""}`,placeholder:fe("placenamesearch-placeholder")},itemToString:e6r,onSelectedItemChange:c}))};Bst.propTypes={onSelectPosition:Tce.default.func.isRequired,searchUrl:Tce.default.string.isRequired};var Vst=Bst;var Gst=Q(It(),1),Hst=({searchUrl:e})=>{let t=_t(Qt),r=(0,M9.useCallback)(n=>{if(t){let o=[n.lonlat.x,n.lonlat.y];t.flyTo({center:o,zoom:12})}},[t]);return M9.default.createElement(Vst,{onSelectPosition:r,searchUrl:e})};Hst.propTypes={searchUrl:Gst.default.string.isRequired};var C9=Hst;var Wst=({customQuery:e,MapSearchListItemComponent:t,mosaicMode:r})=>{let n=_t(f$e);return H0.default.createElement("div",{className:jt("vkf-spatialsearch-root",!n&&"in")},H0.default.createElement("div",{className:"spatialsearch-inner-container"},H0.default.createElement("div",{className:"spatialsearch-content-panel"},H0.default.createElement("div",{className:"body-container"},H0.default.createElement(C9,{searchUrl:mr.getNominatimUrl()}),H0.default.createElement(v9,null),H0.default.createElement(rnt,{customQuery:e,MapSearchListItemComponent:t,mosaicMode:r})))))};Wst.propTypes={customQuery:A9.default.array,MapSearchListItemComponent:A9.default.elementType,mosaicMode:A9.default.bool};var $st=Wst;u();var co=Q(De(),1),cU=Q(It(),1);u();u();var m2=Q(De(),1);var xD=Q(It(),1);u();u();u();var t6r=function(){function e(t){this.propagationStopped,this.defaultPrevented,this.type=t,this.target=null}return e.prototype.preventDefault=function(){this.defaultPrevented=!0},e.prototype.stopPropagation=function(){this.propagationStopped=!0},e}();var _u=t6r;u();u();u();u();var fv={PROPERTYCHANGE:"propertychange"};u();u();u();var r6r=function(){function e(){this.disposed=!1}return e.prototype.dispose=function(){this.disposed||(this.disposed=!0,this.disposeInternal())},e.prototype.disposeInternal=function(){},e}(),W0=r6r;u();u();function oD(e,t){return e>t?1:e<t?-1:0}function JT(e,t,r){var n=e.length;if(e[0]<=t)return 0;if(t<=e[n-1])return n-1;var o=void 0;if(r>0){for(o=1;o<n;++o)if(e[o]<t)return o-1}else if(r<0){for(o=1;o<n;++o)if(e[o]<=t)return o}else for(o=1;o<n;++o){if(e[o]==t)return o;if(e[o]<t)return typeof r=="function"?r(t,e[o-1],e[o])>0?o-1:o:e[o-1]-t<t-e[o]?o-1:o}return n-1}function Yst(e,t){for(var r=Array.isArray(t)?t:[t],n=r.length,o=0;o<n;o++)e[e.length]=r[o]}function O9(e,t){var r=e.length;if(r!==t.length)return!1;for(var n=0;n<r;n++)if(e[n]!==t[n])return!1;return!0}function Zst(e,t,r){var n=t||oD;return e.every(function(o,i){if(i===0)return!0;var a=n(e[i-1],o);return!(a>0||r&&a===0)})}function $0(){return!0}function dv(){return!1}function hv(){}function Kst(e){var t=!1,r,n,o;return function(){var i=Array.prototype.slice.call(arguments);return(!t||this!==o||!O9(i,n))&&(t=!0,o=this,n=i,r=e.apply(this,arguments)),r}}var n6r=function(){var e=function(t,r){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,o){n.__proto__=o}||function(n,o){for(var i in o)Object.prototype.hasOwnProperty.call(o,i)&&(n[i]=o[i])},e(t,r)};return function(t,r){if(typeof r!="function"&&r!==null)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");e(t,r);function n(){this.constructor=t}t.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),o6r=function(e){n6r(t,e);function t(r){var n=e.call(this)||this;return n.eventTarget_=r,n.pendingRemovals_=null,n.dispatching_=null,n.listeners_=null,n}return t.prototype.addEventListener=function(r,n){if(!(!r||!n)){var o=this.listeners_||(this.listeners_={}),i=o[r]||(o[r]=[]);i.indexOf(n)===-1&&i.push(n)}},t.prototype.dispatchEvent=function(r){var n=typeof r=="string",o=n?r:r.type,i=this.listeners_&&this.listeners_[o];if(i){var a=n?new _u(r):r;a.target||(a.target=this.eventTarget_||this);var c=this.dispatching_||(this.dispatching_={}),h=this.pendingRemovals_||(this.pendingRemovals_={});o in c||(c[o]=0,h[o]=0),++c[o];for(var m,y=0,w=i.length;y<w;++y)if("handleEvent"in i[y]?m=i[y].handleEvent(a):m=i[y].call(this,a),m===!1||a.propagationStopped){m=!1;break}if(--c[o]===0){var E=h[o];for(delete h[o];E--;)this.removeEventListener(o,hv);delete c[o]}return m}},t.prototype.disposeInternal=function(){this.listeners_&&Af(this.listeners_)},t.prototype.getListeners=function(r){return this.listeners_&&this.listeners_[r]||void 0},t.prototype.hasListener=function(r){return this.listeners_?r?r in this.listeners_:Object.keys(this.listeners_).length>0:!1},t.prototype.removeEventListener=function(r,n){var o=this.listeners_&&this.listeners_[r];if(o){var i=o.indexOf(n);i!==-1&&(this.pendingRemovals_&&r in this.pendingRemovals_?(o[i]=hv,++this.pendingRemovals_[r]):(o.splice(i,1),o.length===0&&delete this.listeners_[r]))}},t}(W0),Ff=o6r;u();var kr={CHANGE:"change",ERROR:"error",BLUR:"blur",CLEAR:"clear",CONTEXTMENU:"contextmenu",CLICK:"click",DBLCLICK:"dblclick",DRAGENTER:"dragenter",DRAGOVER:"dragover",DROP:"drop",FOCUS:"focus",KEYDOWN:"keydown",KEYPRESS:"keypress",LOAD:"load",RESIZE:"resize",TOUCHMOVE:"touchmove",WHEEL:"wheel"};u();function ao(e,t,r,n,o){if(n&&n!==e&&(r=r.bind(n)),o){var i=r;r=function(){e.removeEventListener(t,r),i.apply(this,arguments)}}var a={target:e,type:t,listener:r};return e.addEventListener(t,r),a}function QT(e,t,r,n){return ao(e,t,r,n,!0)}function Zo(e){e&&e.target&&(e.target.removeEventListener(e.type,e.listener),Af(e))}var i6r=function(){var e=function(t,r){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,o){n.__proto__=o}||function(n,o){for(var i in o)Object.prototype.hasOwnProperty.call(o,i)&&(n[i]=o[i])},e(t,r)};return function(t,r){if(typeof r!="function"&&r!==null)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");e(t,r);function n(){this.constructor=t}t.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),P9=function(e){i6r(t,e);function t(){var r=e.call(this)||this;return r.on=r.onInternal,r.once=r.onceInternal,r.un=r.unInternal,r.revision_=0,r}return t.prototype.changed=function(){++this.revision_,this.dispatchEvent(kr.CHANGE)},t.prototype.getRevision=function(){return this.revision_},t.prototype.onInternal=function(r,n){if(Array.isArray(r)){for(var o=r.length,i=new Array(o),a=0;a<o;++a)i[a]=ao(this,r[a],n);return i}else return ao(this,r,n)},t.prototype.onceInternal=function(r,n){var o;if(Array.isArray(r)){var i=r.length;o=new Array(i);for(var a=0;a<i;++a)o[a]=QT(this,r[a],n)}else o=QT(this,r,n);return n.ol_key=o,o},t.prototype.unInternal=function(r,n){var o=n.ol_key;if(o)a6r(o);else if(Array.isArray(r))for(var i=0,a=r.length;i<a;++i)this.removeEventListener(r[i],n);else this.removeEventListener(r,n)},t}(Ff);P9.prototype.on;P9.prototype.once;P9.prototype.un;function a6r(e){if(Array.isArray(e))for(var t=0,r=e.length;t<r;++t)Zo(e[t]);else Zo(e)}var D9=P9;var Jst=function(){var e=function(t,r){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,o){n.__proto__=o}||function(n,o){for(var i in o)Object.prototype.hasOwnProperty.call(o,i)&&(n[i]=o[i])},e(t,r)};return function(t,r){if(typeof r!="function"&&r!==null)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");e(t,r);function n(){this.constructor=t}t.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),Xst=function(e){Jst(t,e);function t(r,n,o){var i=e.call(this,r)||this;return i.key=n,i.oldValue=o,i}return t}(_u);var s6r=function(e){Jst(t,e);function t(r){var n=e.call(this)||this;return n.on,n.once,n.un,es(n),n.values_=null,r!==void 0&&n.setProperties(r),n}return t.prototype.get=function(r){var n;return this.values_&&this.values_.hasOwnProperty(r)&&(n=this.values_[r]),n},t.prototype.getKeys=function(){return this.values_&&Object.keys(this.values_)||[]},t.prototype.getProperties=function(){return this.values_&&Ti({},this.values_)||{}},t.prototype.hasProperties=function(){return!!this.values_},t.prototype.notify=function(r,n){var o;o="change:".concat(r),this.hasListener(o)&&this.dispatchEvent(new Xst(o,r,n)),o=fv.PROPERTYCHANGE,this.hasListener(o)&&this.dispatchEvent(new Xst(o,r,n))},t.prototype.addChangeListener=function(r,n){this.addEventListener("change:".concat(r),n)},t.prototype.removeChangeListener=function(r,n){this.removeEventListener("change:".concat(r),n)},t.prototype.set=function(r,n,o){var i=this.values_||(this.values_={});if(o)i[r]=n;else{var a=i[r];i[r]=n,a!==n&&this.notify(r,a)}},t.prototype.setProperties=function(r,n){for(var o in r)this.set(o,r[o],n)},t.prototype.applyProperties=function(r){r.values_&&Ti(this.values_||(this.values_={}),r.values_)},t.prototype.unset=function(r,n){if(this.values_&&r in this.values_){var o=this.values_[r];delete this.values_[r],Ket(this.values_)&&(this.values_=null),n||this.notify(r,o)}},t}(D9),fl=s6r;u();var Ice={ACTIVE:"active"};u();function Mce(e){return Math.pow(e,3)}function Uf(e){return 1-Mce(1-e)}function Qst(e){return 3*e*e-2*e*e*e}function elt(e){return e}var l6r=function(){var e=function(t,r){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,o){n.__proto__=o}||function(n,o){for(var i in o)Object.prototype.hasOwnProperty.call(o,i)&&(n[i]=o[i])},e(t,r)};return function(t,r){if(typeof r!="function"&&r!==null)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");e(t,r);function n(){this.constructor=t}t.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),u6r=function(e){l6r(t,e);function t(r){var n=e.call(this)||this;return n.on,n.once,n.un,r&&r.handleEvent&&(n.handleEvent=r.handleEvent),n.map_=null,n.setActive(!0),n}return t.prototype.getActive=function(){return this.get(Ice.ACTIVE)},t.prototype.getMap=function(){return this.map_},t.prototype.handleEvent=function(r){return!0},t.prototype.setActive=function(r){this.set(Ice.ACTIVE,r)},t.prototype.setMap=function(r){this.map_=r},t}(fl);function tlt(e,t,r){var n=e.getCenterInternal();if(n){var o=[n[0]+t[0],n[1]+t[1]];e.animateInternal({duration:r!==void 0?r:250,easing:elt,center:e.getConstrainedCenter(o)})}}function e2(e,t,r,n){var o=e.getZoom();if(o!==void 0){var i=e.getConstrainedZoom(o+t),a=e.getResolutionForZoom(i);e.getAnimating()&&e.cancelAnimations(),e.animate({resolution:a,anchor:r,duration:n!==void 0?n:250,easing:Uf})}}var bm=u6r;u();var Hi={SINGLECLICK:"singleclick",CLICK:kr.CLICK,DBLCLICK:kr.DBLCLICK,POINTERDRAG:"pointerdrag",POINTERMOVE:"pointermove",POINTERDOWN:"pointerdown",POINTERUP:"pointerup",POINTEROVER:"pointerover",POINTEROUT:"pointerout",POINTERENTER:"pointerenter",POINTERLEAVE:"pointerleave",POINTERCANCEL:"pointercancel"};var c6r=function(){var e=function(t,r){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,o){n.__proto__=o}||function(n,o){for(var i in o)Object.prototype.hasOwnProperty.call(o,i)&&(n[i]=o[i])},e(t,r)};return function(t,r){if(typeof r!="function"&&r!==null)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");e(t,r);function n(){this.constructor=t}t.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),p6r=function(e){c6r(t,e);function t(r){var n=this,o=r||{};return n=e.call(this,o)||this,o.handleDownEvent&&(n.handleDownEvent=o.handleDownEvent),o.handleDragEvent&&(n.handleDragEvent=o.handleDragEvent),o.handleMoveEvent&&(n.handleMoveEvent=o.handleMoveEvent),o.handleUpEvent&&(n.handleUpEvent=o.handleUpEvent),o.stopDown&&(n.stopDown=o.stopDown),n.handlingDownUpSequence=!1,n.targetPointers=[],n}return t.prototype.getPointerCount=function(){return this.targetPointers.length},t.prototype.handleDownEvent=function(r){return!1},t.prototype.handleDragEvent=function(r){},t.prototype.handleEvent=function(r){if(!r.originalEvent)return!0;var n=!1;if(this.updateTrackedPointers_(r),this.handlingDownUpSequence){if(r.type==Hi.POINTERDRAG)this.handleDragEvent(r),r.originalEvent.preventDefault();else if(r.type==Hi.POINTERUP){var o=this.handleUpEvent(r);this.handlingDownUpSequence=o&&this.targetPointers.length>0}}else if(r.type==Hi.POINTERDOWN){var i=this.handleDownEvent(r);this.handlingDownUpSequence=i,n=this.stopDown(i)}else r.type==Hi.POINTERMOVE&&this.handleMoveEvent(r);return!n},t.prototype.handleMoveEvent=function(r){},t.prototype.handleUpEvent=function(r){return!1},t.prototype.stopDown=function(r){return r},t.prototype.updateTrackedPointers_=function(r){r.activePointers&&(this.targetPointers=r.activePointers)},t}(bm);function t2(e){for(var t=e.length,r=0,n=0,o=0;o<t;o++)r+=e[o].clientX,n+=e[o].clientY;return[r/t,n/t]}var xm=p6r;u();u();u();var bu={XY:"XY",XYZ:"XYZ",XYM:"XYM",XYZM:"XYZM"};u();u();u();u();u();var Y0=typeof navigator!="undefined"&&typeof navigator.userAgent!="undefined"?navigator.userAgent.toLowerCase():"",rlt=Y0.indexOf("firefox")!==-1,f6r=Y0.indexOf("safari")!==-1&&Y0.indexOf("chrom")==-1,nlt=f6r&&!!(Y0.indexOf("version/15.4")>=0||Y0.match(/cpu (os|iphone os) 15_4 like mac os x/)),olt=Y0.indexOf("webkit")!==-1&&Y0.indexOf("edge")==-1,ilt=Y0.indexOf("macintosh")!==-1,N9=typeof devicePixelRatio!="undefined"?devicePixelRatio:1,alt=typeof WorkerGlobalScope!="undefined"&&typeof OffscreenCanvas!="undefined"&&self instanceof WorkerGlobalScope,slt=typeof Image!="undefined"&&Image.prototype.decode,L9=function(){var e=!1;try{var t=Object.defineProperty({},"passive",{get:function(){e=!0}});window.addEventListener("_",null,t),window.removeEventListener("_",null,t)}catch(r){}return e}();var Cce=new Array(6);function Bf(){return[1,0,0,1,0,0]}function r2(e){return k9(e,1,0,0,1,0,0)}function Ace(e,t){var r=e[0],n=e[1],o=e[2],i=e[3],a=e[4],c=e[5],h=t[0],m=t[1],y=t[2],w=t[3],E=t[4],A=t[5];return e[0]=r*h+o*m,e[1]=n*h+i*m,e[2]=r*y+o*w,e[3]=n*y+i*w,e[4]=r*E+o*A+a,e[5]=n*E+i*A+c,e}function k9(e,t,r,n,o,i,a){return e[0]=t,e[1]=r,e[2]=n,e[3]=o,e[4]=i,e[5]=a,e}function Z0(e,t){var r=t[0],n=t[1];return t[0]=e[0]*r+e[2]*n+e[4],t[1]=e[1]*r+e[3]*n+e[5],t}function R9(e,t){var r=Math.cos(t),n=Math.sin(t);return Ace(e,k9(Cce,r,n,-n,r,0,0))}function iD(e,t,r){return Ace(e,k9(Cce,t,0,0,r,0,0))}function llt(e,t,r){return Ace(e,k9(Cce,1,0,0,1,t,r))}function K0(e,t,r,n,o,i,a,c){var h=Math.sin(i),m=Math.cos(i);return e[0]=n*m,e[1]=o*h,e[2]=-n*h,e[3]=o*m,e[4]=a*n*m-c*n*h+t,e[5]=a*o*h+c*o*m+r,e}function ult(e,t){var r=d6r(t);zn(r!==0,32);var n=t[0],o=t[1],i=t[2],a=t[3],c=t[4],h=t[5];return e[0]=a/r,e[1]=-o/r,e[2]=-i/r,e[3]=n/r,e[4]=(i*h-a*c)/r,e[5]=-(n*h-o*c)/r,e}function d6r(e){return e[0]*e[3]-e[1]*e[2]}u();function Oce(e,t,r,n,o,i){for(var a=i||[],c=0,h=t;h<r;h+=n){var m=e[h],y=e[h+1];a[c++]=o[0]*m+o[2]*y+o[4],a[c++]=o[1]*m+o[3]*y+o[5]}return i&&a.length!=c&&(a.length=c),a}function clt(e,t,r,n,o,i,a){for(var c=a||[],h=Math.cos(o),m=Math.sin(o),y=i[0],w=i[1],E=0,A=t;A<r;A+=n){var P=e[A]-y,j=e[A+1]-w;c[E++]=y+P*h-j*m,c[E++]=w+P*m+j*h;for(var D=A+2;D<A+n;++D)c[E++]=e[D]}return a&&c.length!=E&&(c.length=E),c}function plt(e,t,r,n,o,i,a,c){for(var h=c||[],m=a[0],y=a[1],w=0,E=t;E<r;E+=n){var A=e[E]-m,P=e[E+1]-y;h[w++]=m+o*A,h[w++]=y+i*P;for(var j=E+2;j<E+n;++j)h[w++]=e[j]}return c&&h.length!=w&&(h.length=w),h}function flt(e,t,r,n,o,i,a){for(var c=a||[],h=0,m=t;m<r;m+=n){c[h++]=e[m]+o,c[h++]=e[m+1]+i;for(var y=m+2;y<m+n;++y)c[h++]=e[y]}return a&&c.length!=h&&(c.length=h),c}var h6r=function(){var e=function(t,r){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,o){n.__proto__=o}||function(n,o){for(var i in o)Object.prototype.hasOwnProperty.call(o,i)&&(n[i]=o[i])},e(t,r)};return function(t,r){if(typeof r!="function"&&r!==null)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");e(t,r);function n(){this.constructor=t}t.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),dlt=Bf(),m6r=function(e){h6r(t,e);function t(){var r=e.call(this)||this;return r.extent_=im(),r.extentRevision_=-1,r.simplifiedGeometryMaxMinSquaredTolerance=0,r.simplifiedGeometryRevision=0,r.simplifyTransformedInternal=Kst(function(n,o,i){if(!i)return this.getSimplifiedGeometry(o);var a=this.clone();return a.applyTransform(i),a.getSimplifiedGeometry(o)}),r}return t.prototype.simplifyTransformed=function(r,n){return this.simplifyTransformedInternal(this.getRevision(),r,n)},t.prototype.clone=function(){return Ao()},t.prototype.closestPointXY=function(r,n,o,i){return Ao()},t.prototype.containsXY=function(r,n){var o=this.getClosestPoint([r,n]);return o[0]===r&&o[1]===n},t.prototype.getClosestPoint=function(r,n){var o=n||[NaN,NaN];return this.closestPointXY(r[0],r[1],o,1/0),o},t.prototype.intersectsCoordinate=function(r){return this.containsXY(r[0],r[1])},t.prototype.computeExtent=function(r){return Ao()},t.prototype.getExtent=function(r){if(this.extentRevision_!=this.getRevision()){var n=this.computeExtent(this.extent_);(isNaN(n[0])||isNaN(n[1]))&&wT(n),this.extentRevision_=this.getRevision()}return itt(this.extent_,r)},t.prototype.rotate=function(r,n){Ao()},t.prototype.scale=function(r,n,o){Ao()},t.prototype.simplify=function(r){return this.getSimplifiedGeometry(r*r)},t.prototype.getSimplifiedGeometry=function(r){return Ao()},t.prototype.getType=function(){return Ao()},t.prototype.applyTransform=function(r){Ao()},t.prototype.intersectsExtent=function(r){return Ao()},t.prototype.translate=function(r,n){Ao()},t.prototype.transform=function(r,n){var o=qc(r),i=o.getUnits()==jc.TILE_PIXELS?function(a,c,h){var m=o.getExtent(),y=o.getWorldExtent(),w=Bl(y)/Bl(m);return K0(dlt,y[0],y[3],w,-w,0,0,0),Oce(a,0,a.length,h,dlt,c),Tb(o,n)(a,c,h)}:Tb(o,n);return this.applyTransform(i),this},t}(fl),hlt=m6r;var g6r=function(){var e=function(t,r){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,o){n.__proto__=o}||function(n,o){for(var i in o)Object.prototype.hasOwnProperty.call(o,i)&&(n[i]=o[i])},e(t,r)};return function(t,r){if(typeof r!="function"&&r!==null)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");e(t,r);function n(){this.constructor=t}t.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),v6r=function(e){g6r(t,e);function t(){var r=e.call(this)||this;return r.layout=bu.XY,r.stride=2,r.flatCoordinates=null,r}return t.prototype.computeExtent=function(r){return rtt(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,r)},t.prototype.getCoordinates=function(){return Ao()},t.prototype.getFirstCoordinate=function(){return this.flatCoordinates.slice(0,this.stride)},t.prototype.getFlatCoordinates=function(){return this.flatCoordinates},t.prototype.getLastCoordinate=function(){return this.flatCoordinates.slice(this.flatCoordinates.length-this.stride)},t.prototype.getLayout=function(){return this.layout},t.prototype.getSimplifiedGeometry=function(r){if(this.simplifiedGeometryRevision!==this.getRevision()&&(this.simplifiedGeometryMaxMinSquaredTolerance=0,this.simplifiedGeometryRevision=this.getRevision()),r<0||this.simplifiedGeometryMaxMinSquaredTolerance!==0&&r<=this.simplifiedGeometryMaxMinSquaredTolerance)return this;var n=this.getSimplifiedGeometryInternal(r),o=n.getFlatCoordinates();return o.length<this.flatCoordinates.length?n:(this.simplifiedGeometryMaxMinSquaredTolerance=r,this)},t.prototype.getSimplifiedGeometryInternal=function(r){return this},t.prototype.getStride=function(){return this.stride},t.prototype.setFlatCoordinates=function(r,n){this.stride=mlt(r),this.layout=r,this.flatCoordinates=n},t.prototype.setCoordinates=function(r,n){Ao()},t.prototype.setLayout=function(r,n,o){var i;if(r)i=mlt(r);else{for(var a=0;a<o;++a)if(n.length===0){this.layout=bu.XY,this.stride=2;return}else n=n[0];i=n.length,r=y6r(i)}this.layout=r,this.stride=i},t.prototype.applyTransform=function(r){this.flatCoordinates&&(r(this.flatCoordinates,this.flatCoordinates,this.stride),this.changed())},t.prototype.rotate=function(r,n){var o=this.getFlatCoordinates();if(o){var i=this.getStride();clt(o,0,o.length,i,r,n,o),this.changed()}},t.prototype.scale=function(r,n,o){var i=n;i===void 0&&(i=r);var a=o;a||(a=Wd(this.getExtent()));var c=this.getFlatCoordinates();if(c){var h=this.getStride();plt(c,0,c.length,h,r,i,a,c),this.changed()}},t.prototype.translate=function(r,n){var o=this.getFlatCoordinates();if(o){var i=this.getStride();flt(o,0,o.length,i,r,n,o),this.changed()}},t}(hlt);function y6r(e){var t;return e==2?t=bu.XY:e==3?t=bu.XYZ:e==4&&(t=bu.XYZM),t}function mlt(e){var t;return e==bu.XY?t=2:e==bu.XYZ||e==bu.XYM?t=3:e==bu.XYZM&&(t=4),t}var n2=v6r;u();function glt(e,t,r,n,o,i,a){var c=e[t],h=e[t+1],m=e[r]-c,y=e[r+1]-h,w;if(m===0&&y===0)w=t;else{var E=((o-c)*m+(i-h)*y)/(m*m+y*y);if(E>1)w=r;else if(E>0){for(var A=0;A<n;++A)a[A]=Bet(e[t+A],e[r+A],E);a.length=n;return}else w=t}for(var A=0;A<n;++A)a[A]=e[w+A];a.length=n}function Pce(e,t,r,n,o){var i=e[t],a=e[t+1];for(t+=n;t<r;t+=n){var c=e[t],h=e[t+1],m=Kg(i,a,c,h);m>o&&(o=m),i=c,a=h}return o}function vlt(e,t,r,n,o){for(var i=0,a=r.length;i<a;++i){var c=r[i];o=Pce(e,t,c,n,o),t=c}return o}function Dce(e,t,r,n,o,i,a,c,h,m,y){if(t==r)return m;var w,E;if(o===0)if(E=Kg(a,c,e[t],e[t+1]),E<m){for(w=0;w<n;++w)h[w]=e[t+w];return h.length=n,E}else return m;for(var A=y||[NaN,NaN],P=t+n;P<r;)if(glt(e,P-n,P,n,a,c,A),E=Kg(a,c,A[0],A[1]),E<m){for(m=E,w=0;w<n;++w)h[w]=A[w];h.length=n,P+=n}else P+=n*Math.max((Math.sqrt(E)-Math.sqrt(m))/o|0,1);if(i&&(glt(e,r-n,t,n,a,c,A),E=Kg(a,c,A[0],A[1]),E<m)){for(m=E,w=0;w<n;++w)h[w]=A[w];h.length=n}return m}function ylt(e,t,r,n,o,i,a,c,h,m,y){for(var w=y||[NaN,NaN],E=0,A=r.length;E<A;++E){var P=r[E];m=Dce(e,t,P,n,o,i,a,c,h,m,w),t=P}return m}u();function _lt(e,t,r,n){for(var o=0,i=r.length;o<i;++o)e[t++]=r[o];return t}function Nce(e,t,r,n){for(var o=0,i=r.length;o<i;++o)for(var a=r[o],c=0;c<n;++c)e[t++]=a[c];return t}function blt(e,t,r,n,o){for(var i=o||[],a=0,c=0,h=r.length;c<h;++c){var m=Nce(e,t,r[c],n);i[a++]=m,t=m}return i.length=a,i}u();function xlt(e,t,r,n,o,i,a){var c=(r-t)/n;if(c<3){for(;t<r;t+=n)i[a++]=e[t],i[a++]=e[t+1];return a}var h=new Array(c);h[0]=1,h[c-1]=1;for(var m=[t,r-n],y=0;m.length>0;){for(var w=m.pop(),E=m.pop(),A=0,P=e[E],j=e[E+1],D=e[w],k=e[w+1],z=E+n;z<w;z+=n){var V=e[z],G=e[z+1],K=Fet(V,G,P,j,D,k);K>A&&(y=z,A=K)}A>o&&(h[(y-t)/n]=1,E+n<y&&m.push(E,y),y+n<w&&m.push(y,w))}for(var z=0;z<c;++z)h[z]&&(i[a++]=e[t+z*n],i[a++]=e[t+z*n+1]);return a}function o2(e,t){return t*Math.round(e/t)}function _6r(e,t,r,n,o,i,a){if(t==r)return a;var c=o2(e[t],o),h=o2(e[t+1],o);t+=n,i[a++]=c,i[a++]=h;var m,y;do if(m=o2(e[t],o),y=o2(e[t+1],o),t+=n,t==r)return i[a++]=m,i[a++]=y,a;while(m==c&&y==h);for(;t<r;){var w=o2(e[t],o),E=o2(e[t+1],o);if(t+=n,!(w==m&&E==y)){var A=m-c,P=y-h,j=w-c,D=E-h;if(A*D==P*j&&(A<0&&j<A||A==j||A>0&&j>A)&&(P<0&&D<P||P==D||P>0&&D>P)){m=w,y=E;continue}i[a++]=m,i[a++]=y,c=m,h=y,m=w,y=E}}return i[a++]=m,i[a++]=y,a}function wlt(e,t,r,n,o,i,a,c){for(var h=0,m=r.length;h<m;++h){var y=r[h];a=_6r(e,t,y,n,o,i,a),c.push(a),t=y}return a}u();function Lce(e,t,r,n,o){for(var i=o!==void 0?o:[],a=0,c=t;c<r;c+=n)i[a++]=e.slice(c,c+n);return i.length=a,i}function Elt(e,t,r,n,o){for(var i=o!==void 0?o:[],a=0,c=0,h=r.length;c<h;++c){var m=r[c];i[a++]=Lce(e,t,m,n,i[a]),t=m}return i.length=a,i}u();function kce(e,t,r,n){for(var o=0,i=e[r-n],a=e[r-n+1];t<r;t+=n){var c=e[t],h=e[t+1];o+=a*c-i*h,i=c,a=h}return o/2}function Slt(e,t,r,n){for(var o=0,i=0,a=r.length;i<a;++i){var c=r[i];o+=kce(e,t,c,n),t=c}return o}var b6r=function(){var e=function(t,r){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,o){n.__proto__=o}||function(n,o){for(var i in o)Object.prototype.hasOwnProperty.call(o,i)&&(n[i]=o[i])},e(t,r)};return function(t,r){if(typeof r!="function"&&r!==null)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");e(t,r);function n(){this.constructor=t}t.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),x6r=function(e){b6r(t,e);function t(r,n){var o=e.call(this)||this;return o.maxDelta_=-1,o.maxDeltaRevision_=-1,n!==void 0&&!Array.isArray(r[0])?o.setFlatCoordinates(n,r):o.setCoordinates(r,n),o}return t.prototype.clone=function(){return new t(this.flatCoordinates.slice(),this.layout)},t.prototype.closestPointXY=function(r,n,o,i){return i<TF(this.getExtent(),r,n)?i:(this.maxDeltaRevision_!=this.getRevision()&&(this.maxDelta_=Math.sqrt(Pce(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,0)),this.maxDeltaRevision_=this.getRevision()),Dce(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,this.maxDelta_,!0,r,n,o,i))},t.prototype.getArea=function(){return kce(this.flatCoordinates,0,this.flatCoordinates.length,this.stride)},t.prototype.getCoordinates=function(){return Lce(this.flatCoordinates,0,this.flatCoordinates.length,this.stride)},t.prototype.getSimplifiedGeometryInternal=function(r){var n=[];return n.length=xlt(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,r,n,0),new t(n,bu.XY)},t.prototype.getType=function(){return"LinearRing"},t.prototype.intersectsExtent=function(r){return!1},t.prototype.setCoordinates=function(r,n){this.setLayout(n,r,1),this.flatCoordinates||(this.flatCoordinates=[]),this.flatCoordinates.length=Nce(this.flatCoordinates,0,r,this.stride),this.changed()},t}(n2),Rce=x6r;u();var w6r=function(){var e=function(t,r){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,o){n.__proto__=o}||function(n,o){for(var i in o)Object.prototype.hasOwnProperty.call(o,i)&&(n[i]=o[i])},e(t,r)};return function(t,r){if(typeof r!="function"&&r!==null)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");e(t,r);function n(){this.constructor=t}t.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),E6r=function(e){w6r(t,e);function t(r,n){var o=e.call(this)||this;return o.setCoordinates(r,n),o}return t.prototype.clone=function(){var r=new t(this.flatCoordinates.slice(),this.layout);return r.applyProperties(this),r},t.prototype.closestPointXY=function(r,n,o,i){var a=this.flatCoordinates,c=Kg(r,n,a[0],a[1]);if(c<i){for(var h=this.stride,m=0;m<h;++m)o[m]=a[m];return o.length=h,c}else return i},t.prototype.getCoordinates=function(){return this.flatCoordinates?this.flatCoordinates.slice():[]},t.prototype.computeExtent=function(r){return ttt(this.flatCoordinates,r)},t.prototype.getType=function(){return"Point"},t.prototype.intersectsExtent=function(r){return _se(r,this.flatCoordinates[0],this.flatCoordinates[1])},t.prototype.setCoordinates=function(r,n){this.setLayout(n,r,0),this.flatCoordinates||(this.flatCoordinates=[]),this.flatCoordinates.length=_lt(this.flatCoordinates,0,r,this.stride),this.changed()},t}(n2),Tlt=E6r;u();u();function Ilt(e,t,r,n,o){var i=IF(o,function(a){return!X0(e,t,r,n,a[0],a[1])});return!i}function X0(e,t,r,n,o,i){for(var a=0,c=e[r-n],h=e[r-n+1];t<r;t+=n){var m=e[t],y=e[t+1];h<=i?y>i&&(m-c)*(i-h)-(o-c)*(y-h)>0&&a++:y<=i&&(m-c)*(i-h)-(o-c)*(y-h)<0&&a--,c=m,h=y}return a!==0}function j9(e,t,r,n,o,i){if(r.length===0||!X0(e,t,r[0],n,o,i))return!1;for(var a=1,c=r.length;a<c;++a)if(X0(e,r[a-1],r[a],n,o,i))return!1;return!0}function Mlt(e,t,r,n,o,i,a){for(var c,h,m,y,w,E,A,P=o[i+1],j=[],D=0,k=r.length;D<k;++D){var z=r[D];for(y=e[z-n],E=e[z-n+1],c=t;c<z;c+=n)w=e[c],A=e[c+1],(P<=E&&A<=P||E<=P&&P<=A)&&(m=(P-E)/(A-E)*(w-y)+y,j.push(m)),y=w,E=A}var V=NaN,G=-1/0;for(j.sort(oD),y=j[0],c=1,h=j.length;c<h;++c){w=j[c];var K=Math.abs(w-y);K>G&&(m=(y+w)/2,j9(e,t,r,n,m,P)&&(V=m,G=K)),y=w}return isNaN(V)&&(V=o[i]),a?(a.push(V,P,G),a):[V,P,G]}u();u();function Clt(e,t,r,n,o){var i;for(t+=n;t<r;t+=n)if(i=o(e.slice(t-n,t),e.slice(t,t+n)),i)return i;return!1}function Alt(e,t,r,n,o){var i=xse(im(),e,t,r,n);return s4(o,i)?ett(o,i)||i[0]>=o[0]&&i[2]<=o[2]||i[1]>=o[1]&&i[3]<=o[3]?!0:Clt(e,t,r,n,function(a,c){return att(o,a,c)}):!1}function jce(e,t,r,n,o){return!!(Alt(e,t,r,n,o)||X0(e,t,r,n,o[0],o[1])||X0(e,t,r,n,o[0],o[3])||X0(e,t,r,n,o[2],o[1])||X0(e,t,r,n,o[2],o[3]))}function Olt(e,t,r,n,o){if(!jce(e,t,r[0],n,o))return!1;if(r.length===1)return!0;for(var i=1,a=r.length;i<a;++i)if(Ilt(e,r[i-1],r[i],n,o)&&!Alt(e,r[i-1],r[i],n,o))return!1;return!0}u();u();function Plt(e,t,r,n){for(;t<r-n;){for(var o=0;o<n;++o){var i=e[t+o];e[t+o]=e[r-n+o],e[r-n+o]=i}t+=n,r-=n}}function Dlt(e,t,r,n){for(var o=0,i=e[r-n],a=e[r-n+1];t<r;t+=n){var c=e[t],h=e[t+1];o+=(c-i)*(h+a),i=c,a=h}return o===0?void 0:o>0}function Nlt(e,t,r,n,o){for(var i=o!==void 0?o:!1,a=0,c=r.length;a<c;++a){var h=r[a],m=Dlt(e,t,h,n);if(a===0){if(i&&m||!i&&!m)return!1}else if(i&&!m||!i&&m)return!1;t=h}return!0}function qce(e,t,r,n,o){for(var i=o!==void 0?o:!1,a=0,c=r.length;a<c;++a){var h=r[a],m=Dlt(e,t,h,n),y=a===0?i&&m||!i&&!m:i&&!m||!i&&m;y&&Plt(e,t,h,n),t=h}return t}var S6r=function(){var e=function(t,r){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,o){n.__proto__=o}||function(n,o){for(var i in o)Object.prototype.hasOwnProperty.call(o,i)&&(n[i]=o[i])},e(t,r)};return function(t,r){if(typeof r!="function"&&r!==null)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");e(t,r);function n(){this.constructor=t}t.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),Llt=function(e){S6r(t,e);function t(r,n,o){var i=e.call(this)||this;return i.ends_=[],i.flatInteriorPointRevision_=-1,i.flatInteriorPoint_=null,i.maxDelta_=-1,i.maxDeltaRevision_=-1,i.orientedRevision_=-1,i.orientedFlatCoordinates_=null,n!==void 0&&o?(i.setFlatCoordinates(n,r),i.ends_=o):i.setCoordinates(r,n),i}return t.prototype.appendLinearRing=function(r){this.flatCoordinates?Yst(this.flatCoordinates,r.getFlatCoordinates()):this.flatCoordinates=r.getFlatCoordinates().slice(),this.ends_.push(this.flatCoordinates.length),this.changed()},t.prototype.clone=function(){var r=new t(this.flatCoordinates.slice(),this.layout,this.ends_.slice());return r.applyProperties(this),r},t.prototype.closestPointXY=function(r,n,o,i){return i<TF(this.getExtent(),r,n)?i:(this.maxDeltaRevision_!=this.getRevision()&&(this.maxDelta_=Math.sqrt(vlt(this.flatCoordinates,0,this.ends_,this.stride,0)),this.maxDeltaRevision_=this.getRevision()),ylt(this.flatCoordinates,0,this.ends_,this.stride,this.maxDelta_,!0,r,n,o,i))},t.prototype.containsXY=function(r,n){return j9(this.getOrientedFlatCoordinates(),0,this.ends_,this.stride,r,n)},t.prototype.getArea=function(){return Slt(this.getOrientedFlatCoordinates(),0,this.ends_,this.stride)},t.prototype.getCoordinates=function(r){var n;return r!==void 0?(n=this.getOrientedFlatCoordinates().slice(),qce(n,0,this.ends_,this.stride,r)):n=this.flatCoordinates,Elt(n,0,this.ends_,this.stride)},t.prototype.getEnds=function(){return this.ends_},t.prototype.getFlatInteriorPoint=function(){if(this.flatInteriorPointRevision_!=this.getRevision()){var r=Wd(this.getExtent());this.flatInteriorPoint_=Mlt(this.getOrientedFlatCoordinates(),0,this.ends_,this.stride,r,0),this.flatInteriorPointRevision_=this.getRevision()}return this.flatInteriorPoint_},t.prototype.getInteriorPoint=function(){return new Tlt(this.getFlatInteriorPoint(),bu.XYM)},t.prototype.getLinearRingCount=function(){return this.ends_.length},t.prototype.getLinearRing=function(r){return r<0||this.ends_.length<=r?null:new Rce(this.flatCoordinates.slice(r===0?0:this.ends_[r-1],this.ends_[r]),this.layout)},t.prototype.getLinearRings=function(){for(var r=this.layout,n=this.flatCoordinates,o=this.ends_,i=[],a=0,c=0,h=o.length;c<h;++c){var m=o[c],y=new Rce(n.slice(a,m),r);i.push(y),a=m}return i},t.prototype.getOrientedFlatCoordinates=function(){if(this.orientedRevision_!=this.getRevision()){var r=this.flatCoordinates;Nlt(r,0,this.ends_,this.stride)?this.orientedFlatCoordinates_=r:(this.orientedFlatCoordinates_=r.slice(),this.orientedFlatCoordinates_.length=qce(this.orientedFlatCoordinates_,0,this.ends_,this.stride)),this.orientedRevision_=this.getRevision()}return this.orientedFlatCoordinates_},t.prototype.getSimplifiedGeometryInternal=function(r){var n=[],o=[];return n.length=wlt(this.flatCoordinates,0,this.ends_,this.stride,Math.sqrt(r),n,0,o),new t(n,bu.XY,o)},t.prototype.getType=function(){return"Polygon"},t.prototype.intersectsExtent=function(r){return Olt(this.getOrientedFlatCoordinates(),0,this.ends_,this.stride,r)},t.prototype.setCoordinates=function(r,n){this.setLayout(n,r,2),this.flatCoordinates||(this.flatCoordinates=[]);var o=blt(this.flatCoordinates,0,r,this.stride,this.ends_);this.flatCoordinates.length=o.length===0?0:o[o.length-1],this.changed()},t}(n2),klt=Llt;function aD(e){var t=e[0],r=e[1],n=e[2],o=e[3],i=[t,r,t,o,n,o,n,r,t,r];return new Llt(i,bu.XY,[i.length])}var T6r=function(){var e=function(t,r){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,o){n.__proto__=o}||function(n,o){for(var i in o)Object.prototype.hasOwnProperty.call(o,i)&&(n[i]=o[i])},e(t,r)};return function(t,r){if(typeof r!="function"&&r!==null)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");e(t,r);function n(){this.constructor=t}t.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),I6r=function(e){T6r(t,e);function t(r){var n=e.call(this)||this;return n.geometry_=null,n.element_=document.createElement("div"),n.element_.style.position="absolute",n.element_.style.pointerEvents="auto",n.element_.className="ol-box "+r,n.map_=null,n.startPixel_=null,n.endPixel_=null,n}return t.prototype.disposeInternal=function(){this.setMap(null)},t.prototype.render_=function(){var r=this.startPixel_,n=this.endPixel_,o="px",i=this.element_.style;i.left=Math.min(r[0],n[0])+o,i.top=Math.min(r[1],n[1])+o,i.width=Math.abs(n[0]-r[0])+o,i.height=Math.abs(n[1]-r[1])+o},t.prototype.setMap=function(r){if(this.map_){this.map_.getOverlayContainer().removeChild(this.element_);var n=this.element_.style;n.left="inherit",n.top="inherit",n.width="inherit",n.height="inherit"}this.map_=r,this.map_&&this.map_.getOverlayContainer().appendChild(this.element_)},t.prototype.setPixels=function(r,n){this.startPixel_=r,this.endPixel_=n,this.createOrUpdateGeometry(),this.render_()},t.prototype.createOrUpdateGeometry=function(){var r=this.startPixel_,n=this.endPixel_,o=[r,[r[0],n[1]],n,[n[0],r[1]]],i=o.map(this.map_.getCoordinateFromPixelInternal,this.map_);i[4]=i[0].slice(),this.geometry_?this.geometry_.setCoordinates([i]):this.geometry_=new klt([i])},t.prototype.getGeometry=function(){return this.geometry_},t}(W0),Rlt=I6r;u();function sD(e){var t=arguments;return function(r){for(var n=!0,o=0,i=t.length;o<i&&(n=n&&t[o](r),!!n);++o);return n}}var jlt=function(e){var t=e.originalEvent;return t.altKey&&!(t.metaKey||t.ctrlKey)&&t.shiftKey},M6r=function(e){var t=e.map.getTargetElement(),r=e.map.getOwnerDocument().activeElement;return t.contains(r)},q9=function(e){return e.map.getTargetElement().hasAttribute("tabindex")?M6r(e):!0},qlt=$0;var z9=function(e){var t=e.originalEvent;return t.button==0&&!(olt&&ilt&&t.ctrlKey)};var F9=function(e){var t=e.originalEvent;return!t.altKey&&!(t.metaKey||t.ctrlKey)&&!t.shiftKey};var zlt=function(e){var t=e.originalEvent;return!t.altKey&&!(t.metaKey||t.ctrlKey)&&t.shiftKey},U9=function(e){var t=e.originalEvent,r=t.target.tagName;return r!=="INPUT"&&r!=="SELECT"&&r!=="TEXTAREA"&&!t.target.isContentEditable},B9=function(e){var t=e.originalEvent;return zn(t!==void 0,56),t.pointerType=="mouse"};var Flt=function(e){var t=e.originalEvent;return zn(t!==void 0,56),t.isPrimary&&t.button===0};var Ult=function(){var e=function(t,r){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,o){n.__proto__=o}||function(n,o){for(var i in o)Object.prototype.hasOwnProperty.call(o,i)&&(n[i]=o[i])},e(t,r)};return function(t,r){if(typeof r!="function"&&r!==null)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");e(t,r);function n(){this.constructor=t}t.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),V9={BOXSTART:"boxstart",BOXDRAG:"boxdrag",BOXEND:"boxend",BOXCANCEL:"boxcancel"},zce=function(e){Ult(t,e);function t(r,n,o){var i=e.call(this,r)||this;return i.coordinate=n,i.mapBrowserEvent=o,i}return t}(_u);var C6r=function(e){Ult(t,e);function t(r){var n=e.call(this)||this;n.on,n.once,n.un;var o=r||{};return n.box_=new Rlt(o.className||"ol-dragbox"),n.minArea_=o.minArea!==void 0?o.minArea:64,o.onBoxEnd&&(n.onBoxEnd=o.onBoxEnd),n.startPixel_=null,n.condition_=o.condition?o.condition:z9,n.boxEndCondition_=o.boxEndCondition?o.boxEndCondition:n.defaultBoxEndCondition,n}return t.prototype.defaultBoxEndCondition=function(r,n,o){var i=o[0]-n[0],a=o[1]-n[1];return i*i+a*a>=this.minArea_},t.prototype.getGeometry=function(){return this.box_.getGeometry()},t.prototype.handleDragEvent=function(r){this.box_.setPixels(this.startPixel_,r.pixel),this.dispatchEvent(new zce(V9.BOXDRAG,r.coordinate,r))},t.prototype.handleUpEvent=function(r){this.box_.setMap(null);var n=this.boxEndCondition_(r,this.startPixel_,r.pixel);return n&&this.onBoxEnd(r),this.dispatchEvent(new zce(n?V9.BOXEND:V9.BOXCANCEL,r.coordinate,r)),!1},t.prototype.handleDownEvent=function(r){return this.condition_(r)?(this.startPixel_=r.pixel,this.box_.setMap(r.map),this.box_.setPixels(this.startPixel_,this.startPixel_),this.dispatchEvent(new zce(V9.BOXSTART,r.coordinate,r)),!0):!1},t.prototype.onBoxEnd=function(r){},t}(xm),Blt=C6r;var A6r=function(){var e=function(t,r){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,o){n.__proto__=o}||function(n,o){for(var i in o)Object.prototype.hasOwnProperty.call(o,i)&&(n[i]=o[i])},e(t,r)};return function(t,r){if(typeof r!="function"&&r!==null)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");e(t,r);function n(){this.constructor=t}t.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),O6r=function(e){A6r(t,e);function t(r){var n=this,o=r||{},i=o.condition?o.condition:zlt;return n=e.call(this,{condition:i,className:o.className||"ol-dragzoom",minArea:o.minArea})||this,n.duration_=o.duration!==void 0?o.duration:200,n.out_=o.out!==void 0?o.out:!1,n}return t.prototype.onBoxEnd=function(r){var n=this.getMap(),o=n.getView(),i=this.getGeometry();if(this.out_){var a=o.rotatedExtentForGeometry(i),c=o.getResolutionForExtentInternal(a),h=o.getResolution()/c;i=i.clone(),i.scale(h*h)}o.fitInternal(i,{duration:this.duration_,easing:Uf})},t}(Blt),G9=O6r;u();u();u();var wm={POSTRENDER:"postrender",MOVESTART:"movestart",MOVEEND:"moveend",LOADSTART:"loadstart",LOADEND:"loadend"};u();function mv(e,t,r,n){var o;return r&&r.length?o=r.shift():alt?o=new OffscreenCanvas(e||300,t||300):o=document.createElement("canvas"),e&&(o.width=e),t&&(o.height=t),o.getContext("2d",n)}function Vlt(e){var t=e.canvas;t.width=1,t.height=1,e.clearRect(0,0,1,1)}function i2(e,t){var r=t.parentNode;r&&r.replaceChild(e,t)}function lD(e){return e&&e.parentNode?e.parentNode.removeChild(e):null}function Glt(e){for(;e.lastChild;)e.removeChild(e.lastChild)}function Hlt(e,t){for(var r=e.childNodes,n=0;;++n){var o=r[n],i=t[n];if(!o&&!i)break;if(o!==i){if(!o){e.appendChild(i);continue}if(!i){e.removeChild(o),--n;continue}e.insertBefore(i,o)}}}var P6r=function(){var e=function(t,r){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,o){n.__proto__=o}||function(n,o){for(var i in o)Object.prototype.hasOwnProperty.call(o,i)&&(n[i]=o[i])},e(t,r)};return function(t,r){if(typeof r!="function"&&r!==null)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");e(t,r);function n(){this.constructor=t}t.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),D6r=function(e){P6r(t,e);function t(r){var n=e.call(this)||this,o=r.element;return o&&!r.target&&!o.style.pointerEvents&&(o.style.pointerEvents="auto"),n.element=o||null,n.target_=null,n.map_=null,n.listenerKeys=[],r.render&&(n.render=r.render),r.target&&n.setTarget(r.target),n}return t.prototype.disposeInternal=function(){lD(this.element),e.prototype.disposeInternal.call(this)},t.prototype.getMap=function(){return this.map_},t.prototype.setMap=function(r){this.map_&&lD(this.element);for(var n=0,o=this.listenerKeys.length;n<o;++n)Zo(this.listenerKeys[n]);if(this.listenerKeys.length=0,this.map_=r,r){var i=this.target_?this.target_:r.getOverlayContainerStopEvent();i.appendChild(this.element),this.render!==hv&&this.listenerKeys.push(ao(r,wm.POSTRENDER,this.render,this)),r.render()}},t.prototype.render=function(r){},t.prototype.setTarget=function(r){this.target_=typeof r=="string"?document.getElementById(r):r},t}(fl),Pp=D6r;u();var Is={LAYERGROUP:"layergroup",SIZE:"size",TARGET:"target",VIEW:"view"};u();var uD="ol-hidden";var Vf="ol-unselectable",Fce="ol-unsupported",Em="ol-control",Uce="ol-collapsed",N6r=new RegExp(["^\\s*(?=(?:(?:[-a-z]+\\s*){0,2}(italic|oblique))?)","(?=(?:(?:[-a-z]+\\s*){0,2}(small-caps))?)","(?=(?:(?:[-a-z]+\\s*){0,2}(bold(?:er)?|lighter|[1-9]00 ))?)","(?:(?:normal|\\1|\\2|\\3)\\s*){0,3}((?:xx?-)?","(?:small|large)|medium|smaller|larger|[\\.\\d]+(?:\\%|in|[cem]m|ex|p[ctx]))","(?:\\s*\\/\\s*(normal|[\\.\\d]+(?:\\%|in|[cem]m|ex|p[ctx])?))",`?\\s*([-,\\"\\'\\sa-z]+?)\\s*$`].join(""),"i"),Wlt=["style","variant","weight","size","lineHeight","family"],$lt=function(e){var t=e.match(N6r);if(!t)return null;for(var r={lineHeight:"normal",size:"1.2em",style:"normal",weight:"normal",variant:"normal"},n=0,o=Wlt.length;n<o;++n){var i=t[n+1];i!==void 0&&(r[Wlt[n]]=i)}return r.families=r.family.split(/,\s?/),r};var L6r=function(){var e=function(t,r){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,o){n.__proto__=o}||function(n,o){for(var i in o)Object.prototype.hasOwnProperty.call(o,i)&&(n[i]=o[i])},e(t,r)};return function(t,r){if(typeof r!="function"&&r!==null)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");e(t,r);function n(){this.constructor=t}t.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),Ylt=["fullscreenchange","webkitfullscreenchange","MSFullscreenChange"],Zlt={ENTERFULLSCREEN:"enterfullscreen",LEAVEFULLSCREEN:"leavefullscreen"},k6r=function(e){L6r(t,e);function t(r){var n=this,o=r||{};n=e.call(this,{element:document.createElement("div"),target:o.target})||this,n.on,n.once,n.un,n.keys_=o.keys!==void 0?o.keys:!1,n.source_=o.source,n.isInFullscreen_=!1,n.boundHandleMapTargetChange_=n.handleMapTargetChange_.bind(n),n.cssClassName_=o.className!==void 0?o.className:"ol-full-screen",n.documentListeners_=[],n.activeClassName_=o.activeClassName!==void 0?o.activeClassName.split(" "):[n.cssClassName_+"-true"],n.inactiveClassName_=o.inactiveClassName!==void 0?o.inactiveClassName.split(" "):[n.cssClassName_+"-false"];var i=o.label!==void 0?o.label:"\u2922";n.labelNode_=typeof i=="string"?document.createTextNode(i):i;var a=o.labelActive!==void 0?o.labelActive:"\xD7";n.labelActiveNode_=typeof a=="string"?document.createTextNode(a):a;var c=o.tipLabel?o.tipLabel:"Toggle full-screen";return n.button_=document.createElement("button"),n.button_.title=c,n.button_.setAttribute("type","button"),n.button_.appendChild(n.labelNode_),n.button_.addEventListener(kr.CLICK,n.handleClick_.bind(n),!1),n.setClassName_(n.button_,n.isInFullscreen_),n.element.className="".concat(n.cssClassName_," ").concat(Vf," ").concat(Em),n.element.appendChild(n.button_),n}return t.prototype.handleClick_=function(r){r.preventDefault(),this.handleFullScreen_()},t.prototype.handleFullScreen_=function(){var r=this.getMap();if(r){var n=r.getOwnerDocument();if(Klt(n))if(Xlt(n))j6r(n);else{var o=void 0;this.source_?o=typeof this.source_=="string"?n.getElementById(this.source_):this.source_:o=r.getTargetElement(),this.keys_?R6r(o):Jlt(o)}}},t.prototype.handleFullScreenChange_=function(){var r=this.getMap();if(r){var n=this.isInFullscreen_;this.isInFullscreen_=Xlt(r.getOwnerDocument()),n!==this.isInFullscreen_&&(this.setClassName_(this.button_,this.isInFullscreen_),this.isInFullscreen_?(i2(this.labelActiveNode_,this.labelNode_),this.dispatchEvent(Zlt.ENTERFULLSCREEN)):(i2(this.labelNode_,this.labelActiveNode_),this.dispatchEvent(Zlt.LEAVEFULLSCREEN)),r.updateSize())}},t.prototype.setClassName_=function(r,n){var o,i,a,c;n?((o=r.classList).remove.apply(o,this.inactiveClassName_),(i=r.classList).add.apply(i,this.activeClassName_)):((a=r.classList).remove.apply(a,this.activeClassName_),(c=r.classList).add.apply(c,this.inactiveClassName_))},t.prototype.setMap=function(r){var n=this.getMap();n&&n.removeChangeListener(Is.TARGET,this.boundHandleMapTargetChange_),e.prototype.setMap.call(this,r),this.handleMapTargetChange_(),r&&r.addChangeListener(Is.TARGET,this.boundHandleMapTargetChange_)},t.prototype.handleMapTargetChange_=function(){for(var r=this.documentListeners_,n=0,o=r.length;n<o;++n)Zo(r[n]);r.length=0;var i=this.getMap();if(i){var a=i.getOwnerDocument();Klt(a)?this.element.classList.remove(Fce):this.element.classList.add(Fce);for(var n=0,o=Ylt.length;n<o;++n)r.push(ao(a,Ylt[n],this.handleFullScreenChange_,this));this.handleFullScreenChange_()}},t}(Pp);function Klt(e){var t=e.body;return!!(t.webkitRequestFullscreen||t.msRequestFullscreen&&e.msFullscreenEnabled||t.requestFullscreen&&e.fullscreenEnabled)}function Xlt(e){return!!(e.webkitIsFullScreen||e.msFullscreenElement||e.fullscreenElement)}function Jlt(e){e.requestFullscreen?e.requestFullscreen():e.msRequestFullscreen?e.msRequestFullscreen():e.webkitRequestFullscreen&&e.webkitRequestFullscreen()}function R6r(e){e.webkitRequestFullscreen?e.webkitRequestFullscreen():Jlt(e)}function j6r(e){e.exitFullscreen?e.exitFullscreen():e.msExitFullscreen?e.msExitFullscreen():e.webkitExitFullscreen&&e.webkitExitFullscreen()}var Qlt=k6r;u();u();u();var Ju={ADD:"add",REMOVE:"remove"};var tut=function(){var e=function(t,r){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,o){n.__proto__=o}||function(n,o){for(var i in o)Object.prototype.hasOwnProperty.call(o,i)&&(n[i]=o[i])},e(t,r)};return function(t,r){if(typeof r!="function"&&r!==null)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");e(t,r);function n(){this.constructor=t}t.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),eut={LENGTH:"length"},H9=function(e){tut(t,e);function t(r,n,o){var i=e.call(this,r)||this;return i.element=n,i.index=o,i}return t}(_u);var q6r=function(e){tut(t,e);function t(r,n){var o=e.call(this)||this;o.on,o.once,o.un;var i=n||{};if(o.unique_=!!i.unique,o.array_=r||[],o.unique_)for(var a=0,c=o.array_.length;a<c;++a)o.assertUnique_(o.array_[a],a);return o.updateLength_(),o}return t.prototype.clear=function(){for(;this.getLength()>0;)this.pop()},t.prototype.extend=function(r){for(var n=0,o=r.length;n<o;++n)this.push(r[n]);return this},t.prototype.forEach=function(r){for(var n=this.array_,o=0,i=n.length;o<i;++o)r(n[o],o,n)},t.prototype.getArray=function(){return this.array_},t.prototype.item=function(r){return this.array_[r]},t.prototype.getLength=function(){return this.get(eut.LENGTH)},t.prototype.insertAt=function(r,n){this.unique_&&this.assertUnique_(n),this.array_.splice(r,0,n),this.updateLength_(),this.dispatchEvent(new H9(Ju.ADD,n,r))},t.prototype.pop=function(){return this.removeAt(this.getLength()-1)},t.prototype.push=function(r){this.unique_&&this.assertUnique_(r);var n=this.getLength();return this.insertAt(n,r),this.getLength()},t.prototype.remove=function(r){for(var n=this.array_,o=0,i=n.length;o<i;++o)if(n[o]===r)return this.removeAt(o)},t.prototype.removeAt=function(r){var n=this.array_[r];return this.array_.splice(r,1),this.updateLength_(),this.dispatchEvent(new H9(Ju.REMOVE,n,r)),n},t.prototype.setAt=function(r,n){var o=this.getLength();if(r<o){this.unique_&&this.assertUnique_(n,r);var i=this.array_[r];this.array_[r]=n,this.dispatchEvent(new H9(Ju.REMOVE,i,r)),this.dispatchEvent(new H9(Ju.ADD,n,r))}else{for(var a=o;a<r;++a)this.insertAt(a,void 0);this.insertAt(r,n)}},t.prototype.updateLength_=function(){this.set(eut.LENGTH,this.array_.length)},t.prototype.assertUnique_=function(r,n){for(var o=0,i=this.array_.length;o<i;++o)if(this.array_[o]===r&&o!==n)throw new SF(58)},t}(fl),Qu=q6r;u();var z6r=function(){var e=function(t,r){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,o){n.__proto__=o}||function(n,o){for(var i in o)Object.prototype.hasOwnProperty.call(o,i)&&(n[i]=o[i])},e(t,r)};return function(t,r){if(typeof r!="function"&&r!==null)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");e(t,r);function n(){this.constructor=t}t.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),F6r=function(e){z6r(t,e);function t(r){var n=e.call(this)||this,o=r||{};return n.delta_=o.delta?o.delta:1,n.duration_=o.duration!==void 0?o.duration:250,n}return t.prototype.handleEvent=function(r){var n=!1;if(r.type==Hi.DBLCLICK){var o=r.originalEvent,i=r.map,a=r.coordinate,c=o.shiftKey?-this.delta_:this.delta_,h=i.getView();e2(h,c,a,this.duration_),o.preventDefault(),n=!0}return!n},t}(bm),rut=F6r;u();var U6r=function(){var e=function(t,r){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,o){n.__proto__=o}||function(n,o){for(var i in o)Object.prototype.hasOwnProperty.call(o,i)&&(n[i]=o[i])},e(t,r)};return function(t,r){if(typeof r!="function"&&r!==null)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");e(t,r);function n(){this.constructor=t}t.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),B6r=function(e){U6r(t,e);function t(r){var n=e.call(this,{stopDown:dv})||this,o=r||{};n.kinetic_=o.kinetic,n.lastCentroid=null,n.lastPointersCount_,n.panning_=!1;var i=o.condition?o.condition:sD(F9,Flt);return n.condition_=o.onFocusOnly?sD(q9,i):i,n.noKinetic_=!1,n}return t.prototype.handleDragEvent=function(r){this.panning_||(this.panning_=!0,this.getMap().getView().beginInteraction());var n=this.targetPointers,o=t2(n);if(n.length==this.lastPointersCount_){if(this.kinetic_&&this.kinetic_.update(o[0],o[1]),this.lastCentroid){var i=[this.lastCentroid[0]-o[0],o[1]-this.lastCentroid[1]],a=r.map,c=a.getView();utt(i,c.getResolution()),ET(i,c.getRotation()),c.adjustCenterInternal(i)}}else this.kinetic_&&this.kinetic_.begin();this.lastCentroid=o,this.lastPointersCount_=n.length,r.originalEvent.preventDefault()},t.prototype.handleUpEvent=function(r){var n=r.map,o=n.getView();if(this.targetPointers.length===0){if(!this.noKinetic_&&this.kinetic_&&this.kinetic_.end()){var i=this.kinetic_.getDistance(),a=this.kinetic_.getAngle(),c=o.getCenterInternal(),h=n.getPixelFromCoordinateInternal(c),m=n.getCoordinateFromPixelInternal([h[0]-i*Math.cos(a),h[1]-i*Math.sin(a)]);o.animateInternal({center:o.getConstrainedCenter(m),duration:500,easing:Uf})}return this.panning_&&(this.panning_=!1,o.endInteraction()),!1}else return this.kinetic_&&this.kinetic_.begin(),this.lastCentroid=null,!0},t.prototype.handleDownEvent=function(r){if(this.targetPointers.length>0&&this.condition_(r)){var n=r.map,o=n.getView();return this.lastCentroid=null,o.getAnimating()&&o.cancelAnimations(),this.kinetic_&&this.kinetic_.begin(),this.noKinetic_=this.targetPointers.length>1,!0}else return!1},t}(xm),nut=B6r;u();u();function a2(e){if(e!==void 0)return 0}function Bce(e){if(e!==void 0)return e}function out(e){var t=2*Math.PI/e;return function(r,n){if(n)return r;if(r!==void 0)return r=Math.floor(r/t+.5)*t,r}}function iut(e){var t=e||yT(5);return function(r,n){if(n)return r;if(r!==void 0)return Math.abs(r)<=t?0:r}}var V6r=function(){var e=function(t,r){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,o){n.__proto__=o}||function(n,o){for(var i in o)Object.prototype.hasOwnProperty.call(o,i)&&(n[i]=o[i])},e(t,r)};return function(t,r){if(typeof r!="function"&&r!==null)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");e(t,r);function n(){this.constructor=t}t.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),G6r=function(e){V6r(t,e);function t(r){var n=this,o=r||{};return n=e.call(this,{stopDown:dv})||this,n.condition_=o.condition?o.condition:jlt,n.lastAngle_=void 0,n.duration_=o.duration!==void 0?o.duration:250,n}return t.prototype.handleDragEvent=function(r){if(B9(r)){var n=r.map,o=n.getView();if(o.getConstraints().rotation!==a2){var i=n.getSize(),a=r.pixel,c=Math.atan2(i[1]/2-a[1],a[0]-i[0]/2);if(this.lastAngle_!==void 0){var h=c-this.lastAngle_;o.adjustRotationInternal(-h)}this.lastAngle_=c}}},t.prototype.handleUpEvent=function(r){if(!B9(r))return!0;var n=r.map,o=n.getView();return o.endInteraction(this.duration_),!1},t.prototype.handleDownEvent=function(r){if(!B9(r))return!1;if(z9(r)&&this.condition_(r)){var n=r.map;return n.getView().beginInteraction(),this.lastAngle_=void 0,!0}else return!1},t}(xm),aut=G6r;u();u();var J0={LEFT:37,UP:38,RIGHT:39,DOWN:40};var H6r=function(){var e=function(t,r){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,o){n.__proto__=o}||function(n,o){for(var i in o)Object.prototype.hasOwnProperty.call(o,i)&&(n[i]=o[i])},e(t,r)};return function(t,r){if(typeof r!="function"&&r!==null)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");e(t,r);function n(){this.constructor=t}t.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),W6r=function(e){H6r(t,e);function t(r){var n=e.call(this)||this,o=r||{};return n.defaultCondition_=function(i){return F9(i)&&U9(i)},n.condition_=o.condition!==void 0?o.condition:n.defaultCondition_,n.duration_=o.duration!==void 0?o.duration:100,n.pixelDelta_=o.pixelDelta!==void 0?o.pixelDelta:128,n}return t.prototype.handleEvent=function(r){var n=!1;if(r.type==kr.KEYDOWN){var o=r.originalEvent,i=o.keyCode;if(this.condition_(r)&&(i==J0.DOWN||i==J0.LEFT||i==J0.RIGHT||i==J0.UP)){var a=r.map,c=a.getView(),h=c.getResolution()*this.pixelDelta_,m=0,y=0;i==J0.DOWN?y=-h:i==J0.LEFT?m=-h:i==J0.RIGHT?m=h:y=h;var w=[m,y];ET(w,c.getRotation()),tlt(c,w,this.duration_),o.preventDefault(),n=!0}}return!n},t}(bm),sut=W6r;u();var $6r=function(){var e=function(t,r){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,o){n.__proto__=o}||function(n,o){for(var i in o)Object.prototype.hasOwnProperty.call(o,i)&&(n[i]=o[i])},e(t,r)};return function(t,r){if(typeof r!="function"&&r!==null)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");e(t,r);function n(){this.constructor=t}t.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),Y6r=function(e){$6r(t,e);function t(r){var n=e.call(this)||this,o=r||{};return n.condition_=o.condition?o.condition:U9,n.delta_=o.delta?o.delta:1,n.duration_=o.duration!==void 0?o.duration:100,n}return t.prototype.handleEvent=function(r){var n=!1;if(r.type==kr.KEYDOWN||r.type==kr.KEYPRESS){var o=r.originalEvent,i=o.charCode;if(this.condition_(r)&&(i==43||i==45)){var a=r.map,c=i==43?this.delta_:-this.delta_,h=a.getView();e2(h,c,void 0,this.duration_),o.preventDefault(),n=!0}}return!n},t}(bm),lut=Y6r;u();var Z6r=function(){function e(t,r,n){this.decay_=t,this.minVelocity_=r,this.delay_=n,this.points_=[],this.angle_=0,this.initialVelocity_=0}return e.prototype.begin=function(){this.points_.length=0,this.angle_=0,this.initialVelocity_=0},e.prototype.update=function(t,r){this.points_.push(t,r,Date.now())},e.prototype.end=function(){if(this.points_.length<6)return!1;var t=Date.now()-this.delay_,r=this.points_.length-3;if(this.points_[r+2]<t)return!1;for(var n=r-3;n>0&&this.points_[n+2]>t;)n-=3;var o=this.points_[r+2]-this.points_[n+2];if(o<16.666666666666668)return!1;var i=this.points_[r]-this.points_[n],a=this.points_[r+1]-this.points_[n+1];return this.angle_=Math.atan2(a,i),this.initialVelocity_=Math.sqrt(i*i+a*a)/o,this.initialVelocity_>this.minVelocity_},e.prototype.getDistance=function(){return(this.minVelocity_-this.initialVelocity_)/this.decay_},e.prototype.getAngle=function(){return this.angle_},e}(),uut=Z6r;u();var K6r=function(){var e=function(t,r){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,o){n.__proto__=o}||function(n,o){for(var i in o)Object.prototype.hasOwnProperty.call(o,i)&&(n[i]=o[i])},e(t,r)};return function(t,r){if(typeof r!="function"&&r!==null)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");e(t,r);function n(){this.constructor=t}t.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),Vce={TRACKPAD:"trackpad",WHEEL:"wheel"},X6r=function(e){K6r(t,e);function t(r){var n=this,o=r||{};n=e.call(this,o)||this,n.totalDelta_=0,n.lastDelta_=0,n.maxDelta_=o.maxDelta!==void 0?o.maxDelta:1,n.duration_=o.duration!==void 0?o.duration:250,n.timeout_=o.timeout!==void 0?o.timeout:80,n.useAnchor_=o.useAnchor!==void 0?o.useAnchor:!0,n.constrainResolution_=o.constrainResolution!==void 0?o.constrainResolution:!1;var i=o.condition?o.condition:qlt;return n.condition_=o.onFocusOnly?sD(q9,i):i,n.lastAnchor_=null,n.startTime_=void 0,n.timeoutId_,n.mode_=void 0,n.trackpadEventGap_=400,n.trackpadTimeoutId_,n.deltaPerZoom_=300,n}return t.prototype.endInteraction_=function(){this.trackpadTimeoutId_=void 0;var r=this.getMap();if(r){var n=r.getView();n.endInteraction(void 0,this.lastDelta_?this.lastDelta_>0?1:-1:0,this.lastAnchor_)}},t.prototype.handleEvent=function(r){if(!this.condition_(r))return!0;var n=r.type;if(n!==kr.WHEEL)return!0;var o=r.map,i=r.originalEvent;i.preventDefault(),this.useAnchor_&&(this.lastAnchor_=r.coordinate);var a;if(r.type==kr.WHEEL&&(a=i.deltaY,rlt&&i.deltaMode===WheelEvent.DOM_DELTA_PIXEL&&(a/=N9),i.deltaMode===WheelEvent.DOM_DELTA_LINE&&(a*=40)),a===0)return!1;this.lastDelta_=a;var c=Date.now();this.startTime_===void 0&&(this.startTime_=c),(!this.mode_||c-this.startTime_>this.trackpadEventGap_)&&(this.mode_=Math.abs(a)<4?Vce.TRACKPAD:Vce.WHEEL);var h=o.getView();if(this.mode_===Vce.TRACKPAD&&!(h.getConstrainResolution()||this.constrainResolution_))return this.trackpadTimeoutId_?clearTimeout(this.trackpadTimeoutId_):(h.getAnimating()&&h.cancelAnimations(),h.beginInteraction()),this.trackpadTimeoutId_=setTimeout(this.endInteraction_.bind(this),this.timeout_),h.adjustZoom(-a/this.deltaPerZoom_,this.lastAnchor_),this.startTime_=c,!1;this.totalDelta_+=a;var m=Math.max(this.timeout_-(c-this.startTime_),0);return clearTimeout(this.timeoutId_),this.timeoutId_=setTimeout(this.handleWheelZoom_.bind(this,o),m),!1},t.prototype.handleWheelZoom_=function(r){var n=r.getView();n.getAnimating()&&n.cancelAnimations();var o=-Di(this.totalDelta_,-this.maxDelta_*this.deltaPerZoom_,this.maxDelta_*this.deltaPerZoom_)/this.deltaPerZoom_;(n.getConstrainResolution()||this.constrainResolution_)&&(o=o?o>0?1:-1:0),e2(n,o,this.lastAnchor_,this.duration_),this.mode_=void 0,this.totalDelta_=0,this.lastAnchor_=null,this.startTime_=void 0,this.timeoutId_=void 0},t.prototype.setMouseAnchor=function(r){this.useAnchor_=r,r||(this.lastAnchor_=null)},t}(bm),cut=X6r;u();var J6r=function(){var e=function(t,r){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,o){n.__proto__=o}||function(n,o){for(var i in o)Object.prototype.hasOwnProperty.call(o,i)&&(n[i]=o[i])},e(t,r)};return function(t,r){if(typeof r!="function"&&r!==null)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");e(t,r);function n(){this.constructor=t}t.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),Q6r=function(e){J6r(t,e);function t(r){var n=this,o=r||{},i=o;return i.stopDown||(i.stopDown=dv),n=e.call(this,i)||this,n.anchor_=null,n.lastAngle_=void 0,n.rotating_=!1,n.rotationDelta_=0,n.threshold_=o.threshold!==void 0?o.threshold:.3,n.duration_=o.duration!==void 0?o.duration:250,n}return t.prototype.handleDragEvent=function(r){var n=0,o=this.targetPointers[0],i=this.targetPointers[1],a=Math.atan2(i.clientY-o.clientY,i.clientX-o.clientX);if(this.lastAngle_!==void 0){var c=a-this.lastAngle_;this.rotationDelta_+=c,!this.rotating_&&Math.abs(this.rotationDelta_)>this.threshold_&&(this.rotating_=!0),n=c}this.lastAngle_=a;var h=r.map,m=h.getView();if(m.getConstraints().rotation!==a2){var y=h.getViewport().getBoundingClientRect(),w=t2(this.targetPointers);w[0]-=y.left,w[1]-=y.top,this.anchor_=h.getCoordinateFromPixelInternal(w),this.rotating_&&(h.render(),m.adjustRotationInternal(n,this.anchor_))}},t.prototype.handleUpEvent=function(r){if(this.targetPointers.length<2){var n=r.map,o=n.getView();return o.endInteraction(this.duration_),!1}else return!0},t.prototype.handleDownEvent=function(r){if(this.targetPointers.length>=2){var n=r.map;return this.anchor_=null,this.lastAngle_=void 0,this.rotating_=!1,this.rotationDelta_=0,this.handlingDownUpSequence||n.getView().beginInteraction(),!0}else return!1},t}(xm),put=Q6r;u();var ejr=function(){var e=function(t,r){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,o){n.__proto__=o}||function(n,o){for(var i in o)Object.prototype.hasOwnProperty.call(o,i)&&(n[i]=o[i])},e(t,r)};return function(t,r){if(typeof r!="function"&&r!==null)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");e(t,r);function n(){this.constructor=t}t.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),tjr=function(e){ejr(t,e);function t(r){var n=this,o=r||{},i=o;return i.stopDown||(i.stopDown=dv),n=e.call(this,i)||this,n.anchor_=null,n.duration_=o.duration!==void 0?o.duration:400,n.lastDistance_=void 0,n.lastScaleDelta_=1,n}return t.prototype.handleDragEvent=function(r){var n=1,o=this.targetPointers[0],i=this.targetPointers[1],a=o.clientX-i.clientX,c=o.clientY-i.clientY,h=Math.sqrt(a*a+c*c);this.lastDistance_!==void 0&&(n=this.lastDistance_/h),this.lastDistance_=h;var m=r.map,y=m.getView();n!=1&&(this.lastScaleDelta_=n);var w=m.getViewport().getBoundingClientRect(),E=t2(this.targetPointers);E[0]-=w.left,E[1]-=w.top,this.anchor_=m.getCoordinateFromPixelInternal(E),m.render(),y.adjustResolutionInternal(n,this.anchor_)},t.prototype.handleUpEvent=function(r){if(this.targetPointers.length<2){var n=r.map,o=n.getView(),i=this.lastScaleDelta_>1?1:-1;return o.endInteraction(this.duration_,i),!1}else return!0},t.prototype.handleDownEvent=function(r){if(this.targetPointers.length>=2){var n=r.map;return this.anchor_=null,this.lastDistance_=void 0,this.lastScaleDelta_=1,this.handlingDownUpSequence||n.getView().beginInteraction(),!0}else return!1},t}(xm),fut=tjr;u();u();var rjr=function(){var e=function(t,r){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,o){n.__proto__=o}||function(n,o){for(var i in o)Object.prototype.hasOwnProperty.call(o,i)&&(n[i]=o[i])},e(t,r)};return function(t,r){if(typeof r!="function"&&r!==null)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");e(t,r);function n(){this.constructor=t}t.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),njr=function(e){rjr(t,e);function t(r,n,o){var i=e.call(this,r)||this;return i.map=n,i.frameState=o!==void 0?o:null,i}return t}(_u),Q0=njr;var ojr=function(){var e=function(t,r){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,o){n.__proto__=o}||function(n,o){for(var i in o)Object.prototype.hasOwnProperty.call(o,i)&&(n[i]=o[i])},e(t,r)};return function(t,r){if(typeof r!="function"&&r!==null)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");e(t,r);function n(){this.constructor=t}t.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),ijr=function(e){ojr(t,e);function t(r,n,o,i,a,c){var h=e.call(this,r,n,a)||this;return h.originalEvent=o,h.pixel_=null,h.coordinate_=null,h.dragging=i!==void 0?i:!1,h.activePointers=c,h}return Object.defineProperty(t.prototype,"pixel",{get:function(){return this.pixel_||(this.pixel_=this.map.getEventPixel(this.originalEvent)),this.pixel_},set:function(r){this.pixel_=r},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"coordinate",{get:function(){return this.coordinate_||(this.coordinate_=this.map.getCoordinateFromPixel(this.pixel)),this.coordinate_},set:function(r){this.coordinate_=r},enumerable:!1,configurable:!0}),t.prototype.preventDefault=function(){e.prototype.preventDefault.call(this),"preventDefault"in this.originalEvent&&this.originalEvent.preventDefault()},t.prototype.stopPropagation=function(){e.prototype.stopPropagation.call(this),"stopPropagation"in this.originalEvent&&this.originalEvent.stopPropagation()},t}(Q0),Sm=ijr;u();u();u();var Oo={OPACITY:"opacity",VISIBLE:"visible",EXTENT:"extent",Z_INDEX:"zIndex",MAX_RESOLUTION:"maxResolution",MIN_RESOLUTION:"minResolution",MAX_ZOOM:"maxZoom",MIN_ZOOM:"minZoom",SOURCE:"source",MAP:"map"};var ajr=function(){var e=function(t,r){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,o){n.__proto__=o}||function(n,o){for(var i in o)Object.prototype.hasOwnProperty.call(o,i)&&(n[i]=o[i])},e(t,r)};return function(t,r){if(typeof r!="function"&&r!==null)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");e(t,r);function n(){this.constructor=t}t.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),sjr=function(e){ajr(t,e);function t(r){var n=e.call(this)||this;n.on,n.once,n.un,n.background_=r.background;var o=Ti({},r);return typeof r.properties=="object"&&(delete o.properties,Ti(o,r.properties)),o[Oo.OPACITY]=r.opacity!==void 0?r.opacity:1,zn(typeof o[Oo.OPACITY]=="number",64),o[Oo.VISIBLE]=r.visible!==void 0?r.visible:!0,o[Oo.Z_INDEX]=r.zIndex,o[Oo.MAX_RESOLUTION]=r.maxResolution!==void 0?r.maxResolution:1/0,o[Oo.MIN_RESOLUTION]=r.minResolution!==void 0?r.minResolution:0,o[Oo.MIN_ZOOM]=r.minZoom!==void 0?r.minZoom:-1/0,o[Oo.MAX_ZOOM]=r.maxZoom!==void 0?r.maxZoom:1/0,n.className_=o.className!==void 0?o.className:"ol-layer",delete o.className,n.setProperties(o),n.state_=null,n}return t.prototype.getBackground=function(){return this.background_},t.prototype.getClassName=function(){return this.className_},t.prototype.getLayerState=function(r){var n=this.state_||{layer:this,managed:r===void 0?!0:r},o=this.getZIndex();return n.opacity=Di(Math.round(this.getOpacity()*100)/100,0,1),n.visible=this.getVisible(),n.extent=this.getExtent(),n.zIndex=o===void 0&&!n.managed?1/0:o,n.maxResolution=this.getMaxResolution(),n.minResolution=Math.max(this.getMinResolution(),0),n.minZoom=this.getMinZoom(),n.maxZoom=this.getMaxZoom(),this.state_=n,n},t.prototype.getLayersArray=function(r){return Ao()},t.prototype.getLayerStatesArray=function(r){return Ao()},t.prototype.getExtent=function(){return this.get(Oo.EXTENT)},t.prototype.getMaxResolution=function(){return this.get(Oo.MAX_RESOLUTION)},t.prototype.getMinResolution=function(){return this.get(Oo.MIN_RESOLUTION)},t.prototype.getMinZoom=function(){return this.get(Oo.MIN_ZOOM)},t.prototype.getMaxZoom=function(){return this.get(Oo.MAX_ZOOM)},t.prototype.getOpacity=function(){return this.get(Oo.OPACITY)},t.prototype.getSourceState=function(){return Ao()},t.prototype.getVisible=function(){return this.get(Oo.VISIBLE)},t.prototype.getZIndex=function(){return this.get(Oo.Z_INDEX)},t.prototype.setBackground=function(r){this.background_=r,this.changed()},t.prototype.setExtent=function(r){this.set(Oo.EXTENT,r)},t.prototype.setMaxResolution=function(r){this.set(Oo.MAX_RESOLUTION,r)},t.prototype.setMinResolution=function(r){this.set(Oo.MIN_RESOLUTION,r)},t.prototype.setMaxZoom=function(r){this.set(Oo.MAX_ZOOM,r)},t.prototype.setMinZoom=function(r){this.set(Oo.MIN_ZOOM,r)},t.prototype.setOpacity=function(r){zn(typeof r=="number",64),this.set(Oo.OPACITY,r)},t.prototype.setVisible=function(r){this.set(Oo.VISIBLE,r)},t.prototype.setZIndex=function(r){this.set(Oo.Z_INDEX,r)},t.prototype.disposeInternal=function(){this.state_&&(this.state_.layer=null,this.state_=null),e.prototype.disposeInternal.call(this)},t}(fl),W9=sjr;u();var xu={PRERENDER:"prerender",POSTRENDER:"postrender",PRECOMPOSE:"precompose",POSTCOMPOSE:"postcompose",RENDERCOMPLETE:"rendercomplete"};var ljr=function(){var e=function(t,r){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,o){n.__proto__=o}||function(n,o){for(var i in o)Object.prototype.hasOwnProperty.call(o,i)&&(n[i]=o[i])},e(t,r)};return function(t,r){if(typeof r!="function"&&r!==null)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");e(t,r);function n(){this.constructor=t}t.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),ujr=function(e){ljr(t,e);function t(r){var n=this,o=Ti({},r);delete o.source,n=e.call(this,o)||this,n.on,n.once,n.un,n.mapPrecomposeKey_=null,n.mapRenderKey_=null,n.sourceChangeKey_=null,n.renderer_=null,n.rendered=!1,r.render&&(n.render=r.render),r.map&&n.setMap(r.map),n.addChangeListener(Oo.SOURCE,n.handleSourcePropertyChange_);var i=r.source?r.source:null;return n.setSource(i),n}return t.prototype.getLayersArray=function(r){var n=r||[];return n.push(this),n},t.prototype.getLayerStatesArray=function(r){var n=r||[];return n.push(this.getLayerState()),n},t.prototype.getSource=function(){return this.get(Oo.SOURCE)||null},t.prototype.getRenderSource=function(){return this.getSource()},t.prototype.getSourceState=function(){var r=this.getSource();return r?r.getState():"undefined"},t.prototype.handleSourceChange_=function(){this.changed()},t.prototype.handleSourcePropertyChange_=function(){this.sourceChangeKey_&&(Zo(this.sourceChangeKey_),this.sourceChangeKey_=null);var r=this.getSource();r&&(this.sourceChangeKey_=ao(r,kr.CHANGE,this.handleSourceChange_,this)),this.changed()},t.prototype.getFeatures=function(r){return this.renderer_?this.renderer_.getFeatures(r):new Promise(function(n){return n([])})},t.prototype.getData=function(r){return!this.renderer_||!this.rendered?null:this.renderer_.getData(r)},t.prototype.render=function(r,n){var o=this.getRenderer();if(o.prepareFrame(r))return this.rendered=!0,o.renderFrame(r,n)},t.prototype.unrender=function(){this.rendered=!1},t.prototype.setMapInternal=function(r){r||this.unrender(),this.set(Oo.MAP,r)},t.prototype.getMapInternal=function(){return this.get(Oo.MAP)},t.prototype.setMap=function(r){this.mapPrecomposeKey_&&(Zo(this.mapPrecomposeKey_),this.mapPrecomposeKey_=null),r||this.changed(),this.mapRenderKey_&&(Zo(this.mapRenderKey_),this.mapRenderKey_=null),r&&(this.mapPrecomposeKey_=ao(r,xu.PRECOMPOSE,function(n){var o=n,i=o.frameState.layerStatesArray,a=this.getLayerState(!1);zn(!i.some(function(c){return c.layer===a.layer}),67),i.push(a)},this),this.mapRenderKey_=ao(this,kr.CHANGE,r.render,r),this.changed())},t.prototype.setSource=function(r){this.set(Oo.SOURCE,r)},t.prototype.getRenderer=function(){return this.renderer_||(this.renderer_=this.createRenderer()),this.renderer_},t.prototype.hasRenderer=function(){return!!this.renderer_},t.prototype.createRenderer=function(){return null},t.prototype.disposeInternal=function(){this.renderer_&&(this.renderer_.dispose(),delete this.renderer_),this.setSource(null),e.prototype.disposeInternal.call(this)},t}(W9);function jb(e,t){if(!e.visible)return!1;var r=t.resolution;if(r<e.minResolution||r>=e.maxResolution)return!1;var n=t.zoom;return n>e.minZoom&&n<=e.maxZoom}var cD=ujr;u();var Gc={IDLE:0,LOADING:1,LOADED:2,ERROR:3,EMPTY:4};u();function Gce(e){return e[0]>0&&e[1]>0}function dut(e,t,r){return r===void 0&&(r=[0,0]),r[0]=e[0]*t+.5|0,r[1]=e[1]*t+.5|0,r}function dl(e,t){return Array.isArray(e)?e:(t===void 0?t=[e,e]:(t[0]=e,t[1]=e),t)}u();var mut=/^#([a-f0-9]{3}|[a-f0-9]{4}(?:[a-f0-9]{2}){0,2})$/i,gut=/^([a-z]*)$|^hsla?\(.*\)$/i;function vut(e){return typeof e=="string"?e:pjr(e)}function yut(e){var t=document.createElement("div");if(t.style.color=e,t.style.color!==""){document.body.appendChild(t);var r=getComputedStyle(t).color;return document.body.removeChild(t),r}else return""}var Hce=function(){var e=1024,t={},r=0;return function(n){var o;if(t.hasOwnProperty(n))o=t[n];else{if(r>=e){var i=0;for(var a in t)(i++&3)===0&&(delete t[a],--r)}o=cjr(n),t[n]=o,++r}return o}}();function _ut(e){return Array.isArray(e)?e:Hce(e)}function cjr(e){var t,r,n,o,i;if(gut.exec(e)&&(e=yut(e)),mut.exec(e)){var a=e.length-1,c=void 0;a<=4?c=1:c=2;var h=a===4||a===8;t=parseInt(e.substr(1+0*c,c),16),r=parseInt(e.substr(1+1*c,c),16),n=parseInt(e.substr(1+2*c,c),16),h?o=parseInt(e.substr(1+3*c,c),16):o=255,c==1&&(t=(t<<4)+t,r=(r<<4)+r,n=(n<<4)+n,h&&(o=(o<<4)+o)),i=[t,r,n,o/255]}else e.indexOf("rgba(")==0?(i=e.slice(5,-1).split(",").map(Number),hut(i)):e.indexOf("rgb(")==0?(i=e.slice(4,-1).split(",").map(Number),i.push(1),hut(i)):zn(!1,14);return i}function hut(e){return e[0]=Di(e[0]+.5|0,0,255),e[1]=Di(e[1]+.5|0,0,255),e[2]=Di(e[2]+.5|0,0,255),e[3]=Di(e[3],0,1),e}function pjr(e){var t=e[0];t!=(t|0)&&(t=t+.5|0);var r=e[1];r!=(r|0)&&(r=r+.5|0);var n=e[2];n!=(n|0)&&(n=n+.5|0);var o=e[3]===void 0?1:Math.round(e[3]*100)/100;return"rgba("+t+","+r+","+n+","+o+")"}function but(e){return gut.test(e)&&(e=yut(e)),mut.test(e)||e.indexOf("rgba(")===0||e.indexOf("rgb(")===0}u();var Tm=new fl,fjr=new Ff;fjr.setSize=function(){console.warn("labelCache is deprecated.")};var s2=null,Wce,djr={},eCo=function(){var e=100,t="32px ",r=["monospace","serif"],n=r.length,o="wmytzilWMYTZIL@#/&?$%10\uF013",i,a;function c(m,y,w){for(var E=!0,A=0;A<n;++A){var P=r[A];if(a=xut(m+" "+y+" "+t+P,o),w!=P){var j=xut(m+" "+y+" "+t+w+","+P,o);E=E&&j!=a}}return!!E}function h(){for(var m=!0,y=Tm.getKeys(),w=0,E=y.length;w<E;++w){var A=y[w];Tm.get(A)<e&&(c.apply(this,A.split(`
`))?(Af(djr),s2=null,Wce=void 0,Tm.set(A,e)):(Tm.set(A,Tm.get(A)+1,!0),m=!1))}m&&(clearInterval(i),i=void 0)}return function(m){var y=$lt(m);if(y)for(var w=y.families,E=0,A=w.length;E<A;++E){var P=w[E],j=y.style+`
`+y.weight+`
`+P;Tm.get(j)===void 0&&(Tm.set(j,e,!0),c(y.style,y.weight,P)||(Tm.set(j,0,!0),i===void 0&&(i=setInterval(h,32))))}}}();function hjr(e,t){return s2||(s2=mv(1,1)),e!=Wce&&(s2.font=e,Wce=s2.font),s2.measureText(t)}function xut(e,t){return hjr(e,t).width}u();var mjr=function(){var e=function(t,r){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,o){n.__proto__=o}||function(n,o){for(var i in o)Object.prototype.hasOwnProperty.call(o,i)&&(n[i]=o[i])},e(t,r)};return function(t,r){if(typeof r!="function"&&r!==null)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");e(t,r);function n(){this.constructor=t}t.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),gjr=function(e){mjr(t,e);function t(r){var n=e.call(this)||this;return n.ready=!0,n.boundHandleImageChange_=n.handleImageChange_.bind(n),n.layer_=r,n.declutterExecutorGroup=null,n}return t.prototype.getFeatures=function(r){return Ao()},t.prototype.getData=function(r){return null},t.prototype.prepareFrame=function(r){return Ao()},t.prototype.renderFrame=function(r,n){return Ao()},t.prototype.loadedTileCallback=function(r,n,o){r[n]||(r[n]={}),r[n][o.tileCoord.toString()]=o},t.prototype.createLoadedTileFinder=function(r,n,o){return function(i,a){var c=this.loadedTileCallback.bind(this,o,i);return r.forEachLoadedTile(n,i,a,c)}.bind(this)},t.prototype.forEachFeatureAtCoordinate=function(r,n,o,i,a){},t.prototype.getDataAtPixel=function(r,n,o){return null},t.prototype.getLayer=function(){return this.layer_},t.prototype.handleFontsChanged=function(){},t.prototype.handleImageChange_=function(r){var n=r.target;n.getState()===Gc.LOADED&&this.renderIfReadyAndVisible()},t.prototype.loadImage=function(r){var n=r.getState();return n!=Gc.LOADED&&n!=Gc.ERROR&&r.addEventListener(kr.CHANGE,this.boundHandleImageChange_),n==Gc.IDLE&&(r.load(),n=r.getState()),n==Gc.LOADED},t.prototype.renderIfReadyAndVisible=function(){var r=this.getLayer();r&&r.getVisible()&&r.getSourceState()==="ready"&&r.changed()},t.prototype.disposeInternal=function(){delete this.layer_,e.prototype.disposeInternal.call(this)},t}(D9),wut=gjr;u();var vjr=function(){var e=function(t,r){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,o){n.__proto__=o}||function(n,o){for(var i in o)Object.prototype.hasOwnProperty.call(o,i)&&(n[i]=o[i])},e(t,r)};return function(t,r){if(typeof r!="function"&&r!==null)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");e(t,r);function n(){this.constructor=t}t.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),yjr=function(e){vjr(t,e);function t(r,n,o,i){var a=e.call(this,r)||this;return a.inversePixelTransform=n,a.frameState=o,a.context=i,a}return t}(_u),l2=yjr;u();var Hc={ANIMATING:0,INTERACTING:1};u();var _jr=function(){function e(){this.cache_={},this.cacheSize_=0,this.maxCacheSize_=32}return e.prototype.clear=function(){this.cache_={},this.cacheSize_=0},e.prototype.canExpireCache=function(){return this.cacheSize_>this.maxCacheSize_},e.prototype.expire=function(){if(this.canExpireCache()){var t=0;for(var r in this.cache_){var n=this.cache_[r];(t++&3)===0&&!n.hasListener()&&(delete this.cache_[r],--this.cacheSize_)}}},e.prototype.get=function(t,r,n){var o=Eut(t,r,n);return o in this.cache_?this.cache_[o]:null},e.prototype.set=function(t,r,n,o){var i=Eut(t,r,n);this.cache_[i]=o,++this.cacheSize_},e.prototype.setSize=function(t){this.maxCacheSize_=t,this.expire()},e}();function Eut(e,t,r){var n=r?vut(r):"null";return t+":"+e+":"+n}var $ce=new _jr;u();u();var bjr=function(){var e=function(t,r){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,o){n.__proto__=o}||function(n,o){for(var i in o)Object.prototype.hasOwnProperty.call(o,i)&&(n[i]=o[i])},e(t,r)};return function(t,r){if(typeof r!="function"&&r!==null)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");e(t,r);function n(){this.constructor=t}t.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),xjr=function(e){bjr(t,e);function t(r,n,o,i){var a=e.call(this)||this;return a.extent=r,a.pixelRatio_=o,a.resolution=n,a.state=i,a}return t.prototype.changed=function(){this.dispatchEvent(kr.CHANGE)},t.prototype.getExtent=function(){return this.extent},t.prototype.getImage=function(){return Ao()},t.prototype.getPixelRatio=function(){return this.pixelRatio_},t.prototype.getResolution=function(){return this.resolution},t.prototype.getState=function(){return this.state},t.prototype.load=function(){Ao()},t}(Ff),Sut=xjr;var wjr=function(){var e=function(t,r){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,o){n.__proto__=o}||function(n,o){for(var i in o)Object.prototype.hasOwnProperty.call(o,i)&&(n[i]=o[i])},e(t,r)};return function(t,r){if(typeof r!="function"&&r!==null)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");e(t,r);function n(){this.constructor=t}t.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),CCo=function(e){wjr(t,e);function t(r,n,o,i,a,c){var h=e.call(this,r,n,o,Gc.IDLE)||this;return h.src_=i,h.image_=new Image,a!==null&&(h.image_.crossOrigin=a),h.unlisten_=null,h.state=Gc.IDLE,h.imageLoadFunction_=c,h}return t.prototype.getImage=function(){return this.image_},t.prototype.handleImageError_=function(){this.state=Gc.ERROR,this.unlistenImage_(),this.changed()},t.prototype.handleImageLoad_=function(){this.resolution===void 0&&(this.resolution=Bl(this.extent)/this.image_.height),this.state=Gc.LOADED,this.unlistenImage_(),this.changed()},t.prototype.load=function(){(this.state==Gc.IDLE||this.state==Gc.ERROR)&&(this.state=Gc.LOADING,this.changed(),this.imageLoadFunction_(this,this.src_),this.unlisten_=Yce(this.image_,this.handleImageLoad_.bind(this),this.handleImageError_.bind(this)))},t.prototype.setImage=function(r){this.image_=r,this.resolution=Bl(this.extent)/this.image_.height},t.prototype.unlistenImage_=function(){this.unlisten_&&(this.unlisten_(),this.unlisten_=null)},t}(Sut);function Yce(e,t,r){var n=e,o=!0,i=!1,a=!1,c=[QT(n,kr.LOAD,function(){a=!0,i||t()})];return n.src&&slt?(i=!0,n.decode().then(function(){o&&t()}).catch(function(h){o&&(a?t():r())})):c.push(QT(n,kr.ERROR,r)),function(){o=!1,c.forEach(Zo)}}u();var Ejr=function(){var e=function(t,r){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,o){n.__proto__=o}||function(n,o){for(var i in o)Object.prototype.hasOwnProperty.call(o,i)&&(n[i]=o[i])},e(t,r)};return function(t,r){if(typeof r!="function"&&r!==null)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");e(t,r);function n(){this.constructor=t}t.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),Sjr=function(e){Ejr(t,e);function t(r){var n=e.call(this)||this;n.projection=qc(r.projection),n.attributions_=Tut(r.attributions),n.attributionsCollapsible_=r.attributionsCollapsible!==void 0?r.attributionsCollapsible:!0,n.loading=!1,n.state_=r.state!==void 0?r.state:"ready",n.wrapX_=r.wrapX!==void 0?r.wrapX:!1,n.interpolate_=!!r.interpolate,n.viewResolver=null,n.viewRejector=null;var o=n;return n.viewPromise_=new Promise(function(i,a){o.viewResolver=i,o.viewRejector=a}),n}return t.prototype.getAttributions=function(){return this.attributions_},t.prototype.getAttributionsCollapsible=function(){return this.attributionsCollapsible_},t.prototype.getProjection=function(){return this.projection},t.prototype.getResolutions=function(){return Ao()},t.prototype.getView=function(){return this.viewPromise_},t.prototype.getState=function(){return this.state_},t.prototype.getWrapX=function(){return this.wrapX_},t.prototype.getInterpolate=function(){return this.interpolate_},t.prototype.refresh=function(){this.changed()},t.prototype.setAttributions=function(r){this.attributions_=Tut(r),this.changed()},t.prototype.setState=function(r){this.state_=r,this.changed()},t}(fl);function Tut(e){return e?Array.isArray(e)?function(t){return e}:typeof e=="function"?e:function(t){return[e]}:null}var Iut=Sjr;function $9(e){var t=e||{},r=new Qu,n=new uut(-.005,.05,100),o=t.altShiftDragRotate!==void 0?t.altShiftDragRotate:!0;o&&r.push(new aut);var i=t.doubleClickZoom!==void 0?t.doubleClickZoom:!0;i&&r.push(new rut({delta:t.zoomDelta,duration:t.zoomDuration}));var a=t.dragPan!==void 0?t.dragPan:!0;a&&r.push(new nut({onFocusOnly:t.onFocusOnly,kinetic:n}));var c=t.pinchRotate!==void 0?t.pinchRotate:!0;c&&r.push(new put);var h=t.pinchZoom!==void 0?t.pinchZoom:!0;h&&r.push(new fut({duration:t.zoomDuration}));var m=t.keyboard!==void 0?t.keyboard:!0;m&&(r.push(new sut),r.push(new lut({delta:t.zoomDelta,duration:t.zoomDuration})));var y=t.mouseWheelZoom!==void 0?t.mouseWheelZoom:!0;y&&r.push(new cut({onFocusOnly:t.onFocusOnly,duration:t.zoomDuration}));var w=t.shiftDragZoom!==void 0?t.shiftDragZoom:!0;return w&&r.push(new G9({duration:t.zoomDuration})),r}u();u();u();var Tjr=function(){var e=function(t,r){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,o){n.__proto__=o}||function(n,o){for(var i in o)Object.prototype.hasOwnProperty.call(o,i)&&(n[i]=o[i])},e(t,r)};return function(t,r){if(typeof r!="function"&&r!==null)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");e(t,r);function n(){this.constructor=t}t.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),Ijr=function(e){Tjr(t,e);function t(r){var n=e.call(this)||this;return n.map_=r,n}return t.prototype.dispatchRenderEvent=function(r,n){Ao()},t.prototype.calculateMatrices2D=function(r){var n=r.viewState,o=r.coordinateToPixelTransform,i=r.pixelToCoordinateTransform;K0(o,r.size[0]/2,r.size[1]/2,1/n.resolution,-1/n.resolution,-n.rotation,-n.center[0],-n.center[1]),ult(i,o)},t.prototype.forEachFeatureAtCoordinate=function(r,n,o,i,a,c,h,m){var y,w=n.viewState;function E(Ye,rt,ct,qe){return a.call(c,rt,Ye?ct:null,qe)}var A=w.projection,P=ctt(r.slice(),A),j=[[0,0]];if(A.canWrapX()&&i){var D=A.getExtent(),k=oa(D);j.push([-k,0],[k,0])}for(var z=n.layerStatesArray,V=z.length,G=[],K=[],Z=0;Z<j.length;Z++)for(var te=V-1;te>=0;--te){var se=z[te],le=se.layer;if(le.hasRenderer()&&jb(se,w)&&h.call(m,le)){var pe=le.getRenderer(),me=le.getSource();if(pe&&me){var _e=me.getWrapX()?P:r,de=E.bind(null,se.managed);K[0]=_e[0]+j[Z][0],K[1]=_e[1]+j[Z][1],y=pe.forEachFeatureAtCoordinate(K,n,o,de,G)}if(y)return y}}if(G.length!==0){var Ce=1/G.length;return G.forEach(function(Ye,rt){return Ye.distanceSq+=rt*Ce}),G.sort(function(Ye,rt){return Ye.distanceSq-rt.distanceSq}),G.some(function(Ye){return y=Ye.callback(Ye.feature,Ye.layer,Ye.geometry)}),y}},t.prototype.forEachLayerAtPixel=function(r,n,o,i,a){return Ao()},t.prototype.hasFeatureAtCoordinate=function(r,n,o,i,a,c){var h=this.forEachFeatureAtCoordinate(r,n,o,i,$0,this,a,c);return h!==void 0},t.prototype.getMap=function(){return this.map_},t.prototype.renderFrame=function(r){Ao()},t.prototype.scheduleExpireIconCache=function(r){$ce.canExpireCache()&&r.postRenderFunctions.push(Mjr)},t}(W0);function Mjr(e,t){$ce.expire()}var Mut=Ijr;var Cjr=function(){var e=function(t,r){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,o){n.__proto__=o}||function(n,o){for(var i in o)Object.prototype.hasOwnProperty.call(o,i)&&(n[i]=o[i])},e(t,r)};return function(t,r){if(typeof r!="function"&&r!==null)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");e(t,r);function n(){this.constructor=t}t.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),Ajr=function(e){Cjr(t,e);function t(r){var n=e.call(this,r)||this;n.fontChangeListenerKey_=ao(Tm,fv.PROPERTYCHANGE,r.redrawText.bind(r)),n.element_=document.createElement("div");var o=n.element_.style;o.position="absolute",o.width="100%",o.height="100%",o.zIndex="0",n.element_.className=Vf+" ol-layers";var i=r.getViewport();return i.insertBefore(n.element_,i.firstChild||null),n.children_=[],n.renderedVisible_=!0,n}return t.prototype.dispatchRenderEvent=function(r,n){var o=this.getMap();if(o.hasListener(r)){var i=new l2(r,void 0,n);o.dispatchEvent(i)}},t.prototype.disposeInternal=function(){Zo(this.fontChangeListenerKey_),this.element_.parentNode.removeChild(this.element_),e.prototype.disposeInternal.call(this)},t.prototype.renderFrame=function(r){if(!r){this.renderedVisible_&&(this.element_.style.display="none",this.renderedVisible_=!1);return}this.calculateMatrices2D(r),this.dispatchRenderEvent(xu.PRECOMPOSE,r);var n=r.layerStatesArray.sort(function(A,P){return A.zIndex-P.zIndex}),o=r.viewState;this.children_.length=0;for(var i=[],a=null,c=0,h=n.length;c<h;++c){var m=n[c];r.layerIndex=c;var y=m.layer,w=y.getSourceState();if(!jb(m,o)||w!="ready"&&w!="undefined"){y.unrender();continue}var E=y.render(r,a);E&&(E!==a&&(this.children_.push(E),a=E),"getDeclutter"in y&&i.push(y))}for(var c=i.length-1;c>=0;--c)i[c].renderDeclutter(r);Hlt(this.element_,this.children_),this.dispatchRenderEvent(xu.POSTCOMPOSE,r),this.renderedVisible_||(this.element_.style.display="",this.renderedVisible_=!0),this.scheduleExpireIconCache(r)},t.prototype.forEachLayerAtPixel=function(r,n,o,i,a){for(var c=n.viewState,h=n.layerStatesArray,m=h.length,y=m-1;y>=0;--y){var w=h[y],E=w.layer;if(E.hasRenderer()&&jb(w,c)&&a(E)){var A=E.getRenderer(),P=A.getDataAtPixel(r,n,o);if(P){var j=i(E,P);if(j)return j}}}},t}(Mut),Cut=Ajr;u();u();var Aut=function(){var e=function(t,r){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,o){n.__proto__=o}||function(n,o){for(var i in o)Object.prototype.hasOwnProperty.call(o,i)&&(n[i]=o[i])},e(t,r)};return function(t,r){if(typeof r!="function"&&r!==null)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");e(t,r);function n(){this.constructor=t}t.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),gv=function(e){Aut(t,e);function t(r,n){var o=e.call(this,r)||this;return o.layer=n,o}return t}(_u);var Zce={LAYERS:"layers"},Ojr=function(e){Aut(t,e);function t(r){var n=this,o=r||{},i=Ti({},o);delete i.layers;var a=o.layers;return n=e.call(this,i)||this,n.on,n.once,n.un,n.layersListenerKeys_=[],n.listenerKeys_={},n.addChangeListener(Zce.LAYERS,n.handleLayersChanged_),a?Array.isArray(a)?a=new Qu(a.slice(),{unique:!0}):zn(typeof a.getArray=="function",43):a=new Qu(void 0,{unique:!0}),n.setLayers(a),n}return t.prototype.handleLayerChange_=function(){this.changed()},t.prototype.handleLayersChanged_=function(){this.layersListenerKeys_.forEach(Zo),this.layersListenerKeys_.length=0;var r=this.getLayers();this.layersListenerKeys_.push(ao(r,Ju.ADD,this.handleLayersAdd_,this),ao(r,Ju.REMOVE,this.handleLayersRemove_,this));for(var n in this.listenerKeys_)this.listenerKeys_[n].forEach(Zo);Af(this.listenerKeys_);for(var o=r.getArray(),i=0,a=o.length;i<a;i++){var c=o[i];this.registerLayerListeners_(c),this.dispatchEvent(new gv("addlayer",c))}this.changed()},t.prototype.registerLayerListeners_=function(r){var n=[ao(r,fv.PROPERTYCHANGE,this.handleLayerChange_,this),ao(r,kr.CHANGE,this.handleLayerChange_,this)];r instanceof t&&n.push(ao(r,"addlayer",this.handleLayerGroupAdd_,this),ao(r,"removelayer",this.handleLayerGroupRemove_,this)),this.listenerKeys_[es(r)]=n},t.prototype.handleLayerGroupAdd_=function(r){this.dispatchEvent(new gv("addlayer",r.layer))},t.prototype.handleLayerGroupRemove_=function(r){this.dispatchEvent(new gv("removelayer",r.layer))},t.prototype.handleLayersAdd_=function(r){var n=r.element;this.registerLayerListeners_(n),this.dispatchEvent(new gv("addlayer",n)),this.changed()},t.prototype.handleLayersRemove_=function(r){var n=r.element,o=es(n);this.listenerKeys_[o].forEach(Zo),delete this.listenerKeys_[o],this.dispatchEvent(new gv("removelayer",n)),this.changed()},t.prototype.getLayers=function(){return this.get(Zce.LAYERS)},t.prototype.setLayers=function(r){var n=this.getLayers();if(n)for(var o=n.getArray(),i=0,a=o.length;i<a;++i)this.dispatchEvent(new gv("removelayer",o[i]));this.set(Zce.LAYERS,r)},t.prototype.getLayersArray=function(r){var n=r!==void 0?r:[];return this.getLayers().forEach(function(o){o.getLayersArray(n)}),n},t.prototype.getLayerStatesArray=function(r){var n=r!==void 0?r:[],o=n.length;this.getLayers().forEach(function(y){y.getLayerStatesArray(n)});var i=this.getLayerState(),a=i.zIndex;!r&&i.zIndex===void 0&&(a=0);for(var c=o,h=n.length;c<h;c++){var m=n[c];m.opacity*=i.opacity,m.visible=m.visible&&i.visible,m.maxResolution=Math.min(m.maxResolution,i.maxResolution),m.minResolution=Math.max(m.minResolution,i.minResolution),m.minZoom=Math.max(m.minZoom,i.minZoom),m.maxZoom=Math.min(m.maxZoom,i.maxZoom),i.extent!==void 0&&(m.extent!==void 0?m.extent=am(m.extent,i.extent):m.extent=i.extent),m.zIndex===void 0&&(m.zIndex=a)}return n},t.prototype.getSourceState=function(){return"ready"},t}(W9),pD=Ojr;u();u();var fD={POINTERMOVE:"pointermove",POINTERDOWN:"pointerdown",POINTERUP:"pointerup",POINTEROVER:"pointerover",POINTEROUT:"pointerout",POINTERENTER:"pointerenter",POINTERLEAVE:"pointerleave",POINTERCANCEL:"pointercancel"};var Pjr=function(){var e=function(t,r){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,o){n.__proto__=o}||function(n,o){for(var i in o)Object.prototype.hasOwnProperty.call(o,i)&&(n[i]=o[i])},e(t,r)};return function(t,r){if(typeof r!="function"&&r!==null)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");e(t,r);function n(){this.constructor=t}t.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),Djr=function(e){Pjr(t,e);function t(r,n){var o=e.call(this,r)||this;o.map_=r,o.clickTimeoutId_,o.emulateClicks_=!1,o.dragging_=!1,o.dragListenerKeys_=[],o.moveTolerance_=n===void 0?1:n,o.down_=null;var i=o.map_.getViewport();return o.activePointers_=[],o.trackedTouches_={},o.element_=i,o.pointerdownListenerKey_=ao(i,fD.POINTERDOWN,o.handlePointerDown_,o),o.originalPointerMoveEvent_,o.relayedListenerKey_=ao(i,fD.POINTERMOVE,o.relayMoveEvent_,o),o.boundHandleTouchMove_=o.handleTouchMove_.bind(o),o.element_.addEventListener(kr.TOUCHMOVE,o.boundHandleTouchMove_,L9?{passive:!1}:!1),o}return t.prototype.emulateClick_=function(r){var n=new Sm(Hi.CLICK,this.map_,r);this.dispatchEvent(n),this.clickTimeoutId_!==void 0?(clearTimeout(this.clickTimeoutId_),this.clickTimeoutId_=void 0,n=new Sm(Hi.DBLCLICK,this.map_,r),this.dispatchEvent(n)):this.clickTimeoutId_=setTimeout(function(){this.clickTimeoutId_=void 0;var o=new Sm(Hi.SINGLECLICK,this.map_,r);this.dispatchEvent(o)}.bind(this),250)},t.prototype.updateActivePointers_=function(r){var n=r,o=n.pointerId;if(n.type==Hi.POINTERUP||n.type==Hi.POINTERCANCEL){delete this.trackedTouches_[o];for(var i in this.trackedTouches_)if(this.trackedTouches_[i].target!==n.target){delete this.trackedTouches_[i];break}}else(n.type==Hi.POINTERDOWN||n.type==Hi.POINTERMOVE)&&(this.trackedTouches_[o]=n);this.activePointers_=Zet(this.trackedTouches_)},t.prototype.handlePointerUp_=function(r){this.updateActivePointers_(r);var n=new Sm(Hi.POINTERUP,this.map_,r,void 0,void 0,this.activePointers_);this.dispatchEvent(n),this.emulateClicks_&&!n.defaultPrevented&&!this.dragging_&&this.isMouseActionButton_(r)&&this.emulateClick_(this.down_),this.activePointers_.length===0&&(this.dragListenerKeys_.forEach(Zo),this.dragListenerKeys_.length=0,this.dragging_=!1,this.down_=null)},t.prototype.isMouseActionButton_=function(r){return r.button===0},t.prototype.handlePointerDown_=function(r){this.emulateClicks_=this.activePointers_.length===0,this.updateActivePointers_(r);var n=new Sm(Hi.POINTERDOWN,this.map_,r,void 0,void 0,this.activePointers_);this.dispatchEvent(n),this.down_={};for(var o in r){var i=r[o];this.down_[o]=typeof i=="function"?hv:i}if(this.dragListenerKeys_.length===0){var a=this.map_.getOwnerDocument();this.dragListenerKeys_.push(ao(a,Hi.POINTERMOVE,this.handlePointerMove_,this),ao(a,Hi.POINTERUP,this.handlePointerUp_,this),ao(this.element_,Hi.POINTERCANCEL,this.handlePointerUp_,this)),this.element_.getRootNode&&this.element_.getRootNode()!==a&&this.dragListenerKeys_.push(ao(this.element_.getRootNode(),Hi.POINTERUP,this.handlePointerUp_,this))}},t.prototype.handlePointerMove_=function(r){if(this.isMoving_(r)){this.updateActivePointers_(r),this.dragging_=!0;var n=new Sm(Hi.POINTERDRAG,this.map_,r,this.dragging_,void 0,this.activePointers_);this.dispatchEvent(n)}},t.prototype.relayMoveEvent_=function(r){this.originalPointerMoveEvent_=r;var n=!!(this.down_&&this.isMoving_(r));this.dispatchEvent(new Sm(Hi.POINTERMOVE,this.map_,r,n))},t.prototype.handleTouchMove_=function(r){var n=this.originalPointerMoveEvent_;(!n||n.defaultPrevented)&&(typeof r.cancelable!="boolean"||r.cancelable===!0)&&r.preventDefault()},t.prototype.isMoving_=function(r){return this.dragging_||Math.abs(r.clientX-this.down_.clientX)>this.moveTolerance_||Math.abs(r.clientY-this.down_.clientY)>this.moveTolerance_},t.prototype.disposeInternal=function(){this.relayedListenerKey_&&(Zo(this.relayedListenerKey_),this.relayedListenerKey_=null),this.element_.removeEventListener(kr.TOUCHMOVE,this.boundHandleTouchMove_),this.pointerdownListenerKey_&&(Zo(this.pointerdownListenerKey_),this.pointerdownListenerKey_=null),this.dragListenerKeys_.forEach(Zo),this.dragListenerKeys_.length=0,this.element_=null,e.prototype.disposeInternal.call(this)},t}(Ff),Out=Djr;u();u();var dD=1/0,Njr=function(){function e(t,r){this.priorityFunction_=t,this.keyFunction_=r,this.elements_=[],this.priorities_=[],this.queuedElements_={}}return e.prototype.clear=function(){this.elements_.length=0,this.priorities_.length=0,Af(this.queuedElements_)},e.prototype.dequeue=function(){var t=this.elements_,r=this.priorities_,n=t[0];t.length==1?(t.length=0,r.length=0):(t[0]=t.pop(),r[0]=r.pop(),this.siftUp_(0));var o=this.keyFunction_(n);return delete this.queuedElements_[o],n},e.prototype.enqueue=function(t){zn(!(this.keyFunction_(t)in this.queuedElements_),31);var r=this.priorityFunction_(t);return r!=dD?(this.elements_.push(t),this.priorities_.push(r),this.queuedElements_[this.keyFunction_(t)]=!0,this.siftDown_(0,this.elements_.length-1),!0):!1},e.prototype.getCount=function(){return this.elements_.length},e.prototype.getLeftChildIndex_=function(t){return t*2+1},e.prototype.getRightChildIndex_=function(t){return t*2+2},e.prototype.getParentIndex_=function(t){return t-1>>1},e.prototype.heapify_=function(){var t;for(t=(this.elements_.length>>1)-1;t>=0;t--)this.siftUp_(t)},e.prototype.isEmpty=function(){return this.elements_.length===0},e.prototype.isKeyQueued=function(t){return t in this.queuedElements_},e.prototype.isQueued=function(t){return this.isKeyQueued(this.keyFunction_(t))},e.prototype.siftUp_=function(t){for(var r=this.elements_,n=this.priorities_,o=r.length,i=r[t],a=n[t],c=t;t<o>>1;){var h=this.getLeftChildIndex_(t),m=this.getRightChildIndex_(t),y=m<o&&n[m]<n[h]?m:h;r[t]=r[y],n[t]=n[y],t=y}r[t]=i,n[t]=a,this.siftDown_(c,t)},e.prototype.siftDown_=function(t,r){for(var n=this.elements_,o=this.priorities_,i=n[r],a=o[r];r>t;){var c=this.getParentIndex_(r);if(o[c]>a)n[r]=n[c],o[r]=o[c],r=c;else break}n[r]=i,o[r]=a},e.prototype.reprioritize=function(){var t=this.priorityFunction_,r=this.elements_,n=this.priorities_,o=0,i=r.length,a,c,h;for(c=0;c<i;++c)a=r[c],h=t(a),h==dD?delete this.queuedElements_[this.keyFunction_(a)]:(n[o]=h,r[o++]=a);r.length=o,n.length=o,this.heapify_()},e}(),Put=Njr;u();var Rr={IDLE:0,LOADING:1,LOADED:2,ERROR:3,EMPTY:4};var Ljr=function(){var e=function(t,r){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,o){n.__proto__=o}||function(n,o){for(var i in o)Object.prototype.hasOwnProperty.call(o,i)&&(n[i]=o[i])},e(t,r)};return function(t,r){if(typeof r!="function"&&r!==null)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");e(t,r);function n(){this.constructor=t}t.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),kjr=function(e){Ljr(t,e);function t(r,n){var o=e.call(this,function(i){return r.apply(null,i)},function(i){return i[0].getKey()})||this;return o.boundHandleTileChange_=o.handleTileChange.bind(o),o.tileChangeCallback_=n,o.tilesLoading_=0,o.tilesLoadingKeys_={},o}return t.prototype.enqueue=function(r){var n=e.prototype.enqueue.call(this,r);if(n){var o=r[0];o.addEventListener(kr.CHANGE,this.boundHandleTileChange_)}return n},t.prototype.getTilesLoading=function(){return this.tilesLoading_},t.prototype.handleTileChange=function(r){var n=r.target,o=n.getState();if(o===Rr.LOADED||o===Rr.ERROR||o===Rr.EMPTY){n.removeEventListener(kr.CHANGE,this.boundHandleTileChange_);var i=n.getKey();i in this.tilesLoadingKeys_&&(delete this.tilesLoadingKeys_[i],--this.tilesLoading_),this.tileChangeCallback_()}},t.prototype.loadMoreTiles=function(r,n){for(var o=0,i,a,c;this.tilesLoading_<r&&o<n&&this.getCount()>0;)a=this.dequeue()[0],c=a.getKey(),i=a.getState(),i===Rr.IDLE&&!(c in this.tilesLoadingKeys_)&&(this.tilesLoadingKeys_[c]=!0,++this.tilesLoading_,++o,a.load())},t}(Put),Dut=kjr;function Nut(e,t,r,n,o){if(!e||!(r in e.wantedTiles))return dD;if(!e.wantedTiles[r][t.getKey()])return dD;var i=e.viewState.center,a=n[0]-i[0],c=n[1]-i[1];return 65536*Math.log(o)+Math.sqrt(a*a+c*c)/o}u();u();var Gf={CENTER:"center",RESOLUTION:"resolution",ROTATION:"rotation"};u();var Lut=42,e1=256;u();function Kce(e,t,r){return function(n,o,i,a,c){if(n){if(!o&&!t)return n;var h=t?0:i[0]*o,m=t?0:i[1]*o,y=c?c[0]:0,w=c?c[1]:0,E=e[0]+h/2+y,A=e[2]-h/2+y,P=e[1]+m/2+w,j=e[3]-m/2+w;E>A&&(E=(A+E)/2,A=E),P>j&&(P=(j+P)/2,j=P);var D=Di(n[0],E,A),k=Di(n[1],P,j);if(a&&r&&o){var z=30*o;D+=-z*Math.log(1+Math.max(0,E-n[0])/z)+z*Math.log(1+Math.max(0,n[0]-A)/z),k+=-z*Math.log(1+Math.max(0,P-n[1])/z)+z*Math.log(1+Math.max(0,n[1]-j)/z)}return[D,k]}}}function kut(e){return e}u();function Xce(e,t,r,n){var o=oa(t)/r[0],i=Bl(t)/r[1];return n?Math.min(e,Math.max(o,i)):Math.min(e,Math.min(o,i))}function Jce(e,t,r){var n=Math.min(e,t),o=50;return n*=Math.log(1+o*Math.max(0,e/t-1))/o+1,r&&(n=Math.max(n,r),n/=Math.log(1+o*Math.max(0,r/e-1))/o+1),Di(n,r/2,t*2)}function Rut(e,t,r,n){return function(o,i,a,c){if(o!==void 0){var h=e[0],m=e[e.length-1],y=r?Xce(h,r,a,n):h;if(c){var w=t!==void 0?t:!0;return w?Jce(o,y,m):Di(o,m,y)}var E=Math.min(y,o),A=Math.floor(JT(e,E,i));return e[A]>y&&A<e.length-1?e[A+1]:e[A]}else return}}function jut(e,t,r,n,o,i){return function(a,c,h,m){if(a!==void 0){var y=o?Xce(t,o,h,i):t,w=r!==void 0?r:0;if(m){var E=n!==void 0?n:!0;return E?Jce(a,y,w):Di(a,w,y)}var A=1e-9,P=Math.ceil(Math.log(t/y)/Math.log(e)-A),j=-c*(.5-A)+.5,D=Math.min(y,a),k=Math.floor(Math.log(t/D)/Math.log(e)+j),z=Math.max(P,k),V=t/Math.pow(e,z);return Di(V,w,y)}else return}}function Qce(e,t,r,n,o){return function(i,a,c,h){if(i!==void 0){var m=n?Xce(e,n,c,o):e,y=r!==void 0?r:!0;return!y||!h?Di(i,t,m):Jce(i,m,t)}else return}}var Rjr=function(){var e=function(t,r){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,o){n.__proto__=o}||function(n,o){for(var i in o)Object.prototype.hasOwnProperty.call(o,i)&&(n[i]=o[i])},e(t,r)};return function(t,r){if(typeof r!="function"&&r!==null)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");e(t,r);function n(){this.constructor=t}t.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),epe=0,jjr=function(e){Rjr(t,e);function t(r){var n=e.call(this)||this;n.on,n.once,n.un;var o=Ti({},r);return n.hints_=[0,0],n.animations_=[],n.updateAnimationKey_,n.projection_=OF(o.projection,"EPSG:3857"),n.viewportSize_=[100,100],n.targetCenter_=null,n.targetResolution_,n.targetRotation_,n.nextCenter_=null,n.nextResolution_,n.nextRotation_,n.cancelAnchor_=void 0,o.projection&&dtt(),o.center&&(o.center=$d(o.center,n.projection_)),o.extent&&(o.extent=P0(o.extent,n.projection_)),n.applyOptions_(o),n}return t.prototype.applyOptions_=function(r){var n=Ti({},r);for(var o in Gf)delete n[o];this.setProperties(n,!0);var i=zjr(r);this.maxResolution_=i.maxResolution,this.minResolution_=i.minResolution,this.zoomFactor_=i.zoomFactor,this.resolutions_=r.resolutions,this.padding_=r.padding,this.minZoom_=i.minZoom;var a=qjr(r),c=i.constraint,h=Fjr(r);this.constraints_={center:a,resolution:c,rotation:h},this.setRotation(r.rotation!==void 0?r.rotation:0),this.setCenterInternal(r.center!==void 0?r.center:null),r.resolution!==void 0?this.setResolution(r.resolution):r.zoom!==void 0&&this.setZoom(r.zoom)},Object.defineProperty(t.prototype,"padding",{get:function(){return this.padding_},set:function(r){var n=this.padding_;this.padding_=r;var o=this.getCenter();if(o){var i=r||[0,0,0,0];n=n||[0,0,0,0];var a=this.getResolution(),c=a/2*(i[3]-n[3]+n[1]-i[1]),h=a/2*(i[0]-n[0]+n[2]-i[2]);this.setCenterInternal([o[0]+c,o[1]-h])}},enumerable:!1,configurable:!0}),t.prototype.getUpdatedOptions_=function(r){var n=this.getProperties();return n.resolution!==void 0?n.resolution=this.getResolution():n.zoom=this.getZoom(),n.center=this.getCenterInternal(),n.rotation=this.getRotation(),Ti({},n,r)},t.prototype.animate=function(r){this.isDef()&&!this.getAnimating()&&this.resolveConstraints(0);for(var n=new Array(arguments.length),o=0;o<n.length;++o){var i=arguments[o];i.center&&(i=Ti({},i),i.center=$d(i.center,this.getProjection())),i.anchor&&(i=Ti({},i),i.anchor=$d(i.anchor,this.getProjection())),n[o]=i}this.animateInternal.apply(this,n)},t.prototype.animateInternal=function(r){var n=arguments.length,o;n>1&&typeof arguments[n-1]=="function"&&(o=arguments[n-1],--n);for(var i=0;i<n&&!this.isDef();++i){var a=arguments[i];a.center&&this.setCenterInternal(a.center),a.zoom!==void 0?this.setZoom(a.zoom):a.resolution&&this.setResolution(a.resolution),a.rotation!==void 0&&this.setRotation(a.rotation)}if(i===n){o&&Y9(o,!0);return}for(var c=Date.now(),h=this.targetCenter_.slice(),m=this.targetResolution_,y=this.targetRotation_,w=[];i<n;++i){var E=arguments[i],A={start:c,complete:!1,anchor:E.anchor,duration:E.duration!==void 0?E.duration:1e3,easing:E.easing||Qst,callback:o};if(E.center&&(A.sourceCenter=h,A.targetCenter=E.center.slice(),h=A.targetCenter),E.zoom!==void 0?(A.sourceResolution=m,A.targetResolution=this.getResolutionForZoom(E.zoom),m=A.targetResolution):E.resolution&&(A.sourceResolution=m,A.targetResolution=E.resolution,m=A.targetResolution),E.rotation!==void 0){A.sourceRotation=y;var P=Hd(E.rotation-y+Math.PI,2*Math.PI)-Math.PI;A.targetRotation=y+P,y=A.targetRotation}Ujr(A)?A.complete=!0:c+=A.duration,w.push(A)}this.animations_.push(w),this.setHint(Hc.ANIMATING,1),this.updateAnimations_()},t.prototype.getAnimating=function(){return this.hints_[Hc.ANIMATING]>0},t.prototype.getInteracting=function(){return this.hints_[Hc.INTERACTING]>0},t.prototype.cancelAnimations=function(){this.setHint(Hc.ANIMATING,-this.hints_[Hc.ANIMATING]);for(var r,n=0,o=this.animations_.length;n<o;++n){var i=this.animations_[n];if(i[0].callback&&Y9(i[0].callback,!1),!r)for(var a=0,c=i.length;a<c;++a){var h=i[a];if(!h.complete){r=h.anchor;break}}}this.animations_.length=0,this.cancelAnchor_=r,this.nextCenter_=null,this.nextResolution_=NaN,this.nextRotation_=NaN},t.prototype.updateAnimations_=function(){if(this.updateAnimationKey_!==void 0&&(cancelAnimationFrame(this.updateAnimationKey_),this.updateAnimationKey_=void 0),!!this.getAnimating()){for(var r=Date.now(),n=!1,o=this.animations_.length-1;o>=0;--o){for(var i=this.animations_[o],a=!0,c=0,h=i.length;c<h;++c){var m=i[c];if(!m.complete){var y=r-m.start,w=m.duration>0?y/m.duration:1;w>=1?(m.complete=!0,w=1):a=!1;var E=m.easing(w);if(m.sourceCenter){var A=m.sourceCenter[0],P=m.sourceCenter[1],j=m.targetCenter[0],D=m.targetCenter[1];this.nextCenter_=m.targetCenter;var k=A+E*(j-A),z=P+E*(D-P);this.targetCenter_=[k,z]}if(m.sourceResolution&&m.targetResolution){var V=E===1?m.targetResolution:m.sourceResolution+E*(m.targetResolution-m.sourceResolution);if(m.anchor){var G=this.getViewportSize_(this.getRotation()),K=this.constraints_.resolution(V,0,G,!0);this.targetCenter_=this.calculateCenterZoom(K,m.anchor)}this.nextResolution_=m.targetResolution,this.targetResolution_=V,this.applyTargetState_(!0)}if(m.sourceRotation!==void 0&&m.targetRotation!==void 0){var Z=E===1?Hd(m.targetRotation+Math.PI,2*Math.PI)-Math.PI:m.sourceRotation+E*(m.targetRotation-m.sourceRotation);if(m.anchor){var te=this.constraints_.rotation(Z,!0);this.targetCenter_=this.calculateCenterRotate(te,m.anchor)}this.nextRotation_=m.targetRotation,this.targetRotation_=Z}if(this.applyTargetState_(!0),n=!0,!m.complete)break}}if(a){this.animations_[o]=null,this.setHint(Hc.ANIMATING,-1),this.nextCenter_=null,this.nextResolution_=NaN,this.nextRotation_=NaN;var se=i[0].callback;se&&Y9(se,!0)}}this.animations_=this.animations_.filter(Boolean),n&&this.updateAnimationKey_===void 0&&(this.updateAnimationKey_=requestAnimationFrame(this.updateAnimations_.bind(this)))}},t.prototype.calculateCenterRotate=function(r,n){var o,i=this.getCenterInternal();return i!==void 0&&(o=[i[0]-n[0],i[1]-n[1]],ET(o,r-this.getRotation()),ltt(o,n)),o},t.prototype.calculateCenterZoom=function(r,n){var o,i=this.getCenterInternal(),a=this.getResolution();if(i!==void 0&&a!==void 0){var c=n[0]-r*(n[0]-i[0])/a,h=n[1]-r*(n[1]-i[1])/a;o=[c,h]}return o},t.prototype.getViewportSize_=function(r){var n=this.viewportSize_;if(r){var o=n[0],i=n[1];return[Math.abs(o*Math.cos(r))+Math.abs(i*Math.sin(r)),Math.abs(o*Math.sin(r))+Math.abs(i*Math.cos(r))]}else return n},t.prototype.setViewportSize=function(r){this.viewportSize_=Array.isArray(r)?r.slice():[100,100],this.getAnimating()||this.resolveConstraints(0)},t.prototype.getCenter=function(){var r=this.getCenterInternal();return r&&u4(r,this.getProjection())},t.prototype.getCenterInternal=function(){return this.get(Gf.CENTER)},t.prototype.getConstraints=function(){return this.constraints_},t.prototype.getConstrainResolution=function(){return this.get("constrainResolution")},t.prototype.getHints=function(r){return r!==void 0?(r[0]=this.hints_[0],r[1]=this.hints_[1],r):this.hints_.slice()},t.prototype.calculateExtent=function(r){var n=this.calculateExtentInternal(r);return ytt(n,this.getProjection())},t.prototype.calculateExtentInternal=function(r){var n=r||this.getViewportSizeMinusPadding_(),o=this.getCenterInternal();zn(o,1);var i=this.getResolution();zn(i!==void 0,2);var a=this.getRotation();return zn(a!==void 0,3),a4(o,i,a,n)},t.prototype.getMaxResolution=function(){return this.maxResolution_},t.prototype.getMinResolution=function(){return this.minResolution_},t.prototype.getMaxZoom=function(){return this.getZoomForResolution(this.minResolution_)},t.prototype.setMaxZoom=function(r){this.applyOptions_(this.getUpdatedOptions_({maxZoom:r}))},t.prototype.getMinZoom=function(){return this.getZoomForResolution(this.maxResolution_)},t.prototype.setMinZoom=function(r){this.applyOptions_(this.getUpdatedOptions_({minZoom:r}))},t.prototype.setConstrainResolution=function(r){this.applyOptions_(this.getUpdatedOptions_({constrainResolution:r}))},t.prototype.getProjection=function(){return this.projection_},t.prototype.getResolution=function(){return this.get(Gf.RESOLUTION)},t.prototype.getResolutions=function(){return this.resolutions_},t.prototype.getResolutionForExtent=function(r,n){return this.getResolutionForExtentInternal(P0(r,this.getProjection()),n)},t.prototype.getResolutionForExtentInternal=function(r,n){var o=n||this.getViewportSizeMinusPadding_(),i=oa(r)/o[0],a=Bl(r)/o[1];return Math.max(i,a)},t.prototype.getResolutionForValueFunction=function(r){var n=r||2,o=this.getConstrainedResolution(this.maxResolution_),i=this.minResolution_,a=Math.log(o/i)/Math.log(n);return function(c){var h=o/Math.pow(n,c*a);return h}},t.prototype.getRotation=function(){return this.get(Gf.ROTATION)},t.prototype.getValueForResolutionFunction=function(r){var n=Math.log(r||2),o=this.getConstrainedResolution(this.maxResolution_),i=this.minResolution_,a=Math.log(o/i)/n;return function(c){var h=Math.log(o/c)/n/a;return h}},t.prototype.getViewportSizeMinusPadding_=function(r){var n=this.getViewportSize_(r),o=this.padding_;return o&&(n=[n[0]-o[1]-o[3],n[1]-o[0]-o[2]]),n},t.prototype.getState=function(){var r=this.getProjection(),n=this.getResolution(),o=this.getRotation(),i=this.getCenterInternal(),a=this.padding_;if(a){var c=this.getViewportSizeMinusPadding_();i=tpe(i,this.getViewportSize_(),[c[0]/2+a[3],c[1]/2+a[0]],n,o)}return{center:i.slice(0),projection:r!==void 0?r:null,resolution:n,nextCenter:this.nextCenter_,nextResolution:this.nextResolution_,nextRotation:this.nextRotation_,rotation:o,zoom:this.getZoom()}},t.prototype.getZoom=function(){var r,n=this.getResolution();return n!==void 0&&(r=this.getZoomForResolution(n)),r},t.prototype.getZoomForResolution=function(r){var n=this.minZoom_||0,o,i;if(this.resolutions_){var a=JT(this.resolutions_,r,1);n=a,o=this.resolutions_[a],a==this.resolutions_.length-1?i=2:i=o/this.resolutions_[a+1]}else o=this.maxResolution_,i=this.zoomFactor_;return n+Math.log(o/r)/Math.log(i)},t.prototype.getResolutionForZoom=function(r){if(this.resolutions_){if(this.resolutions_.length<=1)return 0;var n=Di(Math.floor(r),0,this.resolutions_.length-2),o=this.resolutions_[n]/this.resolutions_[n+1];return this.resolutions_[n]/Math.pow(o,Di(r-n,0,1))}else return this.maxResolution_/Math.pow(this.zoomFactor_,r-this.minZoom_)},t.prototype.fit=function(r,n){var o;if(zn(Array.isArray(r)||typeof r.getSimplifiedGeometry=="function",24),Array.isArray(r)){zn(!Eb(r),25);var i=P0(r,this.getProjection());o=aD(i)}else if(r.getType()==="Circle"){var i=P0(r.getExtent(),this.getProjection());o=aD(i),o.rotate(this.getRotation(),Wd(i))}else{var a=vtt();a?o=r.clone().transform(a,this.getProjection()):o=r}this.fitInternal(o,n)},t.prototype.rotatedExtentForGeometry=function(r){for(var n=this.getRotation(),o=Math.cos(n),i=Math.sin(-n),a=r.getFlatCoordinates(),c=r.getStride(),h=1/0,m=1/0,y=-1/0,w=-1/0,E=0,A=a.length;E<A;E+=c){var P=a[E]*o-a[E+1]*i,j=a[E]*i+a[E+1]*o;h=Math.min(h,P),m=Math.min(m,j),y=Math.max(y,P),w=Math.max(w,j)}return[h,m,y,w]},t.prototype.fitInternal=function(r,n){var o=n||{},i=o.size;i||(i=this.getViewportSizeMinusPadding_());var a=o.padding!==void 0?o.padding:[0,0,0,0],c=o.nearest!==void 0?o.nearest:!1,h;o.minResolution!==void 0?h=o.minResolution:o.maxZoom!==void 0?h=this.getResolutionForZoom(o.maxZoom):h=0;var m=this.rotatedExtentForGeometry(r),y=this.getResolutionForExtentInternal(m,[i[0]-a[1]-a[3],i[1]-a[0]-a[2]]);y=isNaN(y)?h:Math.max(y,h),y=this.getConstrainedResolution(y,c?0:1);var w=this.getRotation(),E=Math.sin(w),A=Math.cos(w),P=Wd(m);P[0]+=(a[1]-a[3])/2*y,P[1]+=(a[0]-a[2])/2*y;var j=P[0]*A-P[1]*E,D=P[1]*A+P[0]*E,k=this.getConstrainedCenter([j,D],y),z=o.callback?o.callback:hv;o.duration!==void 0?this.animateInternal({resolution:y,center:k,duration:o.duration,easing:o.easing},z):(this.targetResolution_=y,this.targetCenter_=k,this.applyTargetState_(!1,!0),Y9(z,!0))},t.prototype.centerOn=function(r,n,o){this.centerOnInternal($d(r,this.getProjection()),n,o)},t.prototype.centerOnInternal=function(r,n,o){this.setCenterInternal(tpe(r,n,o,this.getResolution(),this.getRotation()))},t.prototype.calculateCenterShift=function(r,n,o,i){var a,c=this.padding_;if(c&&r){var h=this.getViewportSizeMinusPadding_(-o),m=tpe(r,i,[h[0]/2+c[3],h[1]/2+c[0]],n,o);a=[r[0]-m[0],r[1]-m[1]]}return a},t.prototype.isDef=function(){return!!this.getCenterInternal()&&this.getResolution()!==void 0},t.prototype.adjustCenter=function(r){var n=u4(this.targetCenter_,this.getProjection());this.setCenter([n[0]+r[0],n[1]+r[1]])},t.prototype.adjustCenterInternal=function(r){var n=this.targetCenter_;this.setCenterInternal([n[0]+r[0],n[1]+r[1]])},t.prototype.adjustResolution=function(r,n){var o=n&&$d(n,this.getProjection());this.adjustResolutionInternal(r,o)},t.prototype.adjustResolutionInternal=function(r,n){var o=this.getAnimating()||this.getInteracting(),i=this.getViewportSize_(this.getRotation()),a=this.constraints_.resolution(this.targetResolution_*r,0,i,o);n&&(this.targetCenter_=this.calculateCenterZoom(a,n)),this.targetResolution_*=r,this.applyTargetState_()},t.prototype.adjustZoom=function(r,n){this.adjustResolution(Math.pow(this.zoomFactor_,-r),n)},t.prototype.adjustRotation=function(r,n){n&&(n=$d(n,this.getProjection())),this.adjustRotationInternal(r,n)},t.prototype.adjustRotationInternal=function(r,n){var o=this.getAnimating()||this.getInteracting(),i=this.constraints_.rotation(this.targetRotation_+r,o);n&&(this.targetCenter_=this.calculateCenterRotate(i,n)),this.targetRotation_+=r,this.applyTargetState_()},t.prototype.setCenter=function(r){this.setCenterInternal(r&&$d(r,this.getProjection()))},t.prototype.setCenterInternal=function(r){this.targetCenter_=r,this.applyTargetState_()},t.prototype.setHint=function(r,n){return this.hints_[r]+=n,this.changed(),this.hints_[r]},t.prototype.setResolution=function(r){this.targetResolution_=r,this.applyTargetState_()},t.prototype.setRotation=function(r){this.targetRotation_=r,this.applyTargetState_()},t.prototype.setZoom=function(r){this.setResolution(this.getResolutionForZoom(r))},t.prototype.applyTargetState_=function(r,n){var o=this.getAnimating()||this.getInteracting()||n,i=this.constraints_.rotation(this.targetRotation_,o),a=this.getViewportSize_(i),c=this.constraints_.resolution(this.targetResolution_,0,a,o),h=this.constraints_.center(this.targetCenter_,c,a,o,this.calculateCenterShift(this.targetCenter_,c,i,a));this.get(Gf.ROTATION)!==i&&this.set(Gf.ROTATION,i),this.get(Gf.RESOLUTION)!==c&&(this.set(Gf.RESOLUTION,c),this.set("zoom",this.getZoom(),!0)),(!h||!this.get(Gf.CENTER)||!Sb(this.get(Gf.CENTER),h))&&this.set(Gf.CENTER,h),this.getAnimating()&&!r&&this.cancelAnimations(),this.cancelAnchor_=void 0},t.prototype.resolveConstraints=function(r,n,o){var i=r!==void 0?r:200,a=n||0,c=this.constraints_.rotation(this.targetRotation_),h=this.getViewportSize_(c),m=this.constraints_.resolution(this.targetResolution_,a,h),y=this.constraints_.center(this.targetCenter_,m,h,!1,this.calculateCenterShift(this.targetCenter_,m,c,h));if(i===0&&!this.cancelAnchor_){this.targetResolution_=m,this.targetRotation_=c,this.targetCenter_=y,this.applyTargetState_();return}var w=o||(i===0?this.cancelAnchor_:void 0);this.cancelAnchor_=void 0,(this.getResolution()!==m||this.getRotation()!==c||!this.getCenterInternal()||!Sb(this.getCenterInternal(),y))&&(this.getAnimating()&&this.cancelAnimations(),this.animateInternal({rotation:c,center:y,resolution:m,duration:i,easing:Uf,anchor:w}))},t.prototype.beginInteraction=function(){this.resolveConstraints(0),this.setHint(Hc.INTERACTING,1)},t.prototype.endInteraction=function(r,n,o){var i=o&&$d(o,this.getProjection());this.endInteractionInternal(r,n,i)},t.prototype.endInteractionInternal=function(r,n,o){this.setHint(Hc.INTERACTING,-1),this.resolveConstraints(r,n,o)},t.prototype.getConstrainedCenter=function(r,n){var o=this.getViewportSize_(this.getRotation());return this.constraints_.center(r,n||this.getResolution(),o)},t.prototype.getConstrainedZoom=function(r,n){var o=this.getResolutionForZoom(r);return this.getZoomForResolution(this.getConstrainedResolution(o,n))},t.prototype.getConstrainedResolution=function(r,n){var o=n||0,i=this.getViewportSize_(this.getRotation());return this.constraints_.resolution(r,o,i)},t}(fl);function Y9(e,t){setTimeout(function(){e(t)},0)}function qjr(e){if(e.extent!==void 0){var t=e.smoothExtentConstraint!==void 0?e.smoothExtentConstraint:!0;return Kce(e.extent,e.constrainOnlyCenter,t)}var r=OF(e.projection,"EPSG:3857");if(e.multiWorld!==!0&&r.isGlobal()){var n=r.getExtent().slice();return n[0]=-1/0,n[2]=1/0,Kce(n,!1,!1)}return kut}function zjr(e){var t,r,n,o=28,i=2,a=e.minZoom!==void 0?e.minZoom:epe,c=e.maxZoom!==void 0?e.maxZoom:o,h=e.zoomFactor!==void 0?e.zoomFactor:i,m=e.multiWorld!==void 0?e.multiWorld:!1,y=e.smoothResolutionConstraint!==void 0?e.smoothResolutionConstraint:!0,w=e.showFullExtent!==void 0?e.showFullExtent:!1,E=OF(e.projection,"EPSG:3857"),A=E.getExtent(),P=e.constrainOnlyCenter,j=e.extent;if(!m&&!j&&E.isGlobal()&&(P=!1,j=A),e.resolutions!==void 0){var D=e.resolutions;r=D[a],n=D[c]!==void 0?D[c]:D[D.length-1],e.constrainResolution?t=Rut(D,y,!P&&j,w):t=Qce(r,n,y,!P&&j,w)}else{var k=A?Math.max(oa(A),Bl(A)):360*Rc[jc.DEGREES]/E.getMetersPerUnit(),z=k/e1/Math.pow(i,epe),V=z/Math.pow(i,o-epe);r=e.maxResolution,r!==void 0?a=0:r=z/Math.pow(h,a),n=e.minResolution,n===void 0&&(e.maxZoom!==void 0?e.maxResolution!==void 0?n=r/Math.pow(h,c):n=z/Math.pow(h,c):n=V),c=a+Math.floor(Math.log(r/n)/Math.log(h)),n=r/Math.pow(h,c-a),e.constrainResolution?t=jut(h,r,n,y,!P&&j,w):t=Qce(r,n,y,!P&&j,w)}return{constraint:t,maxResolution:r,minResolution:n,minZoom:a,zoomFactor:h}}function Fjr(e){var t=e.enableRotation!==void 0?e.enableRotation:!0;if(t){var r=e.constrainRotation;return r===void 0||r===!0?iut():r===!1?Bce:typeof r=="number"?out(r):Bce}else return a2}function Ujr(e){return!(e.sourceCenter&&e.targetCenter&&!Sb(e.sourceCenter,e.targetCenter)||e.sourceResolution!==e.targetResolution||e.sourceRotation!==e.targetRotation)}function tpe(e,t,r,n,o){var i=Math.cos(-o),a=Math.sin(-o),c=e[0]*i-e[1]*a,h=e[1]*i+e[0]*a;c+=(t[0]/2-r[0])*n,h+=(r[1]-t[1]/2)*n,a=-a;var m=c*i-h*a,y=h*i+c*a;return[m,y]}var Im=jjr;var Bjr=function(){var e=function(t,r){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,o){n.__proto__=o}||function(n,o){for(var i in o)Object.prototype.hasOwnProperty.call(o,i)&&(n[i]=o[i])},e(t,r)};return function(t,r){if(typeof r!="function"&&r!==null)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");e(t,r);function n(){this.constructor=t}t.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}();function qut(e){if(e instanceof cD){e.setMapInternal(null);return}e instanceof pD&&e.getLayers().forEach(qut)}function zut(e,t){if(e instanceof cD){e.setMapInternal(t);return}if(e instanceof pD)for(var r=e.getLayers().getArray(),n=0,o=r.length;n<o;++n)zut(r[n],t)}var Vjr=function(e){Bjr(t,e);function t(r){var n=e.call(this)||this;n.on,n.once,n.un;var o=Gjr(r);n.renderComplete_,n.loaded_=!0,n.boundHandleBrowserEvent_=n.handleBrowserEvent.bind(n),n.maxTilesLoading_=r.maxTilesLoading!==void 0?r.maxTilesLoading:16,n.pixelRatio_=r.pixelRatio!==void 0?r.pixelRatio:N9,n.postRenderTimeoutHandle_,n.animationDelayKey_,n.animationDelay_=function(){this.animationDelayKey_=void 0,this.renderFrame_(Date.now())}.bind(n),n.coordinateToPixelTransform_=Bf(),n.pixelToCoordinateTransform_=Bf(),n.frameIndex_=0,n.frameState_=null,n.previousExtent_=null,n.viewPropertyListenerKey_=null,n.viewChangeListenerKey_=null,n.layerGroupPropertyListenerKeys_=null,n.viewport_=document.createElement("div"),n.viewport_.className="ol-viewport"+("ontouchstart"in window?" ol-touch":""),n.viewport_.style.position="relative",n.viewport_.style.overflow="hidden",n.viewport_.style.width="100%",n.viewport_.style.height="100%",n.overlayContainer_=document.createElement("div"),n.overlayContainer_.style.position="absolute",n.overlayContainer_.style.zIndex="0",n.overlayContainer_.style.width="100%",n.overlayContainer_.style.height="100%",n.overlayContainer_.style.pointerEvents="none",n.overlayContainer_.className="ol-overlaycontainer",n.viewport_.appendChild(n.overlayContainer_),n.overlayContainerStopEvent_=document.createElement("div"),n.overlayContainerStopEvent_.style.position="absolute",n.overlayContainerStopEvent_.style.zIndex="0",n.overlayContainerStopEvent_.style.width="100%",n.overlayContainerStopEvent_.style.height="100%",n.overlayContainerStopEvent_.style.pointerEvents="none",n.overlayContainerStopEvent_.className="ol-overlaycontainer-stopevent",n.viewport_.appendChild(n.overlayContainerStopEvent_),n.mapBrowserEventHandler_=null,n.moveTolerance_=r.moveTolerance,n.keyboardEventTarget_=o.keyboardEventTarget,n.targetChangeHandlerKeys_=null,n.controls=o.controls||new Qu,n.interactions=o.interactions||new Qu,n.overlays_=o.overlays,n.overlayIdIndex_={},n.renderer_=null,n.postRenderFunctions_=[],n.tileQueue_=new Dut(n.getTilePriority.bind(n),n.handleTileChange_.bind(n)),n.addChangeListener(Is.LAYERGROUP,n.handleLayerGroupChanged_),n.addChangeListener(Is.VIEW,n.handleViewChanged_),n.addChangeListener(Is.SIZE,n.handleSizeChanged_),n.addChangeListener(Is.TARGET,n.handleTargetChanged_),n.setProperties(o.values);var i=n;return r.view&&!(r.view instanceof Im)&&r.view.then(function(a){i.setView(new Im(a))}),n.controls.addEventListener(Ju.ADD,function(a){a.element.setMap(this)}.bind(n)),n.controls.addEventListener(Ju.REMOVE,function(a){a.element.setMap(null)}.bind(n)),n.interactions.addEventListener(Ju.ADD,function(a){a.element.setMap(this)}.bind(n)),n.interactions.addEventListener(Ju.REMOVE,function(a){a.element.setMap(null)}.bind(n)),n.overlays_.addEventListener(Ju.ADD,function(a){this.addOverlayInternal_(a.element)}.bind(n)),n.overlays_.addEventListener(Ju.REMOVE,function(a){var c=a.element,h=c.getId();h!==void 0&&delete this.overlayIdIndex_[h.toString()],a.element.setMap(null)}.bind(n)),n.controls.forEach(function(a){a.setMap(this)}.bind(n)),n.interactions.forEach(function(a){a.setMap(this)}.bind(n)),n.overlays_.forEach(n.addOverlayInternal_.bind(n)),n}return t.prototype.createRenderer=function(){throw new Error("Use a map type that has a createRenderer method")},t.prototype.addControl=function(r){this.getControls().push(r)},t.prototype.addInteraction=function(r){this.getInteractions().push(r)},t.prototype.addLayer=function(r){var n=this.getLayerGroup().getLayers();n.push(r)},t.prototype.handleLayerAdd_=function(r){zut(r.layer,this)},t.prototype.addOverlay=function(r){this.getOverlays().push(r)},t.prototype.addOverlayInternal_=function(r){var n=r.getId();n!==void 0&&(this.overlayIdIndex_[n.toString()]=r),r.setMap(this)},t.prototype.disposeInternal=function(){this.controls.clear(),this.interactions.clear(),this.overlays_.clear(),this.setTarget(null),e.prototype.disposeInternal.call(this)},t.prototype.forEachFeatureAtPixel=function(r,n,o){if(!(!this.frameState_||!this.renderer_)){var i=this.getCoordinateFromPixelInternal(r);o=o!==void 0?o:{};var a=o.hitTolerance!==void 0?o.hitTolerance:0,c=o.layerFilter!==void 0?o.layerFilter:$0,h=o.checkWrapped!==!1;return this.renderer_.forEachFeatureAtCoordinate(i,this.frameState_,a,h,n,null,c,null)}},t.prototype.getFeaturesAtPixel=function(r,n){var o=[];return this.forEachFeatureAtPixel(r,function(i){o.push(i)},n),o},t.prototype.getAllLayers=function(){var r=[];function n(o){o.forEach(function(i){i instanceof pD?n(i.getLayers()):r.push(i)})}return n(this.getLayers()),r},t.prototype.forEachLayerAtPixel=function(r,n,o){if(!(!this.frameState_||!this.renderer_)){var i=o||{},a=i.hitTolerance!==void 0?i.hitTolerance:0,c=i.layerFilter||$0;return this.renderer_.forEachLayerAtPixel(r,this.frameState_,a,n,c)}},t.prototype.hasFeatureAtPixel=function(r,n){if(!this.frameState_||!this.renderer_)return!1;var o=this.getCoordinateFromPixelInternal(r);n=n!==void 0?n:{};var i=n.layerFilter!==void 0?n.layerFilter:$0,a=n.hitTolerance!==void 0?n.hitTolerance:0,c=n.checkWrapped!==!1;return this.renderer_.hasFeatureAtCoordinate(o,this.frameState_,a,c,i,null)},t.prototype.getEventCoordinate=function(r){return this.getCoordinateFromPixel(this.getEventPixel(r))},t.prototype.getEventCoordinateInternal=function(r){return this.getCoordinateFromPixelInternal(this.getEventPixel(r))},t.prototype.getEventPixel=function(r){var n=this.viewport_.getBoundingClientRect(),o="changedTouches"in r?r.changedTouches[0]:r;return[o.clientX-n.left,o.clientY-n.top]},t.prototype.getTarget=function(){return this.get(Is.TARGET)},t.prototype.getTargetElement=function(){var r=this.getTarget();return r!==void 0?typeof r=="string"?document.getElementById(r):r:null},t.prototype.getCoordinateFromPixel=function(r){return u4(this.getCoordinateFromPixelInternal(r),this.getView().getProjection())},t.prototype.getCoordinateFromPixelInternal=function(r){var n=this.frameState_;return n?Z0(n.pixelToCoordinateTransform,r.slice()):null},t.prototype.getControls=function(){return this.controls},t.prototype.getOverlays=function(){return this.overlays_},t.prototype.getOverlayById=function(r){var n=this.overlayIdIndex_[r.toString()];return n!==void 0?n:null},t.prototype.getInteractions=function(){return this.interactions},t.prototype.getLayerGroup=function(){return this.get(Is.LAYERGROUP)},t.prototype.setLayers=function(r){var n=this.getLayerGroup();if(r instanceof Qu){n.setLayers(r);return}var o=n.getLayers();o.clear(),o.extend(r)},t.prototype.getLayers=function(){var r=this.getLayerGroup().getLayers();return r},t.prototype.getLoadingOrNotReady=function(){for(var r=this.getLayerGroup().getLayerStatesArray(),n=0,o=r.length;n<o;++n){var i=r[n];if(i.visible){var a=i.layer.getRenderer();if(a&&!a.ready)return!0;var c=i.layer.getSource();if(c&&c.loading)return!0}}return!1},t.prototype.getPixelFromCoordinate=function(r){var n=$d(r,this.getView().getProjection());return this.getPixelFromCoordinateInternal(n)},t.prototype.getPixelFromCoordinateInternal=function(r){var n=this.frameState_;return n?Z0(n.coordinateToPixelTransform,r.slice(0,2)):null},t.prototype.getRenderer=function(){return this.renderer_},t.prototype.getSize=function(){return this.get(Is.SIZE)},t.prototype.getView=function(){return this.get(Is.VIEW)},t.prototype.getViewport=function(){return this.viewport_},t.prototype.getOverlayContainer=function(){return this.overlayContainer_},t.prototype.getOverlayContainerStopEvent=function(){return this.overlayContainerStopEvent_},t.prototype.getOwnerDocument=function(){var r=this.getTargetElement();return r?r.ownerDocument:document},t.prototype.getTilePriority=function(r,n,o,i){return Nut(this.frameState_,r,n,o,i)},t.prototype.handleBrowserEvent=function(r,n){var o=n||r.type,i=new Sm(o,this,r);this.handleMapBrowserEvent(i)},t.prototype.handleMapBrowserEvent=function(r){if(this.frameState_){var n=r.originalEvent,o=n.type;if(o===fD.POINTERDOWN||o===kr.WHEEL||o===kr.KEYDOWN){var i=this.getOwnerDocument(),a=this.viewport_.getRootNode?this.viewport_.getRootNode():i,c=n.target;if(this.overlayContainerStopEvent_.contains(c)||!(a===i?i.documentElement:a).contains(c))return}if(r.frameState=this.frameState_,this.dispatchEvent(r)!==!1)for(var h=this.getInteractions().getArray().slice(),m=h.length-1;m>=0;m--){var y=h[m];if(!(y.getMap()!==this||!y.getActive()||!this.getTargetElement())){var w=y.handleEvent(r);if(!w||r.propagationStopped)break}}}},t.prototype.handlePostRender=function(){var r=this.frameState_,n=this.tileQueue_;if(!n.isEmpty()){var o=this.maxTilesLoading_,i=o;if(r){var a=r.viewHints;if(a[Hc.ANIMATING]||a[Hc.INTERACTING]){var c=Date.now()-r.time>8;o=c?0:8,i=c?0:2}}n.getTilesLoading()<o&&(n.reprioritize(),n.loadMoreTiles(o,i))}r&&this.renderer_&&!r.animate&&(this.renderComplete_===!0?(this.hasListener(xu.RENDERCOMPLETE)&&this.renderer_.dispatchRenderEvent(xu.RENDERCOMPLETE,r),this.loaded_===!1&&(this.loaded_=!0,this.dispatchEvent(new Q0(wm.LOADEND,this,r)))):this.loaded_===!0&&(this.loaded_=!1,this.dispatchEvent(new Q0(wm.LOADSTART,this,r))));for(var h=this.postRenderFunctions_,m=0,y=h.length;m<y;++m)h[m](this,r);h.length=0},t.prototype.handleSizeChanged_=function(){this.getView()&&!this.getView().getAnimating()&&this.getView().resolveConstraints(0),this.render()},t.prototype.handleTargetChanged_=function(){if(this.mapBrowserEventHandler_){for(var r=0,n=this.targetChangeHandlerKeys_.length;r<n;++r)Zo(this.targetChangeHandlerKeys_[r]);this.targetChangeHandlerKeys_=null,this.viewport_.removeEventListener(kr.CONTEXTMENU,this.boundHandleBrowserEvent_),this.viewport_.removeEventListener(kr.WHEEL,this.boundHandleBrowserEvent_),this.mapBrowserEventHandler_.dispose(),this.mapBrowserEventHandler_=null,lD(this.viewport_)}var o=this.getTargetElement();if(!o)this.renderer_&&(clearTimeout(this.postRenderTimeoutHandle_),this.postRenderTimeoutHandle_=void 0,this.postRenderFunctions_.length=0,this.renderer_.dispose(),this.renderer_=null),this.animationDelayKey_&&(cancelAnimationFrame(this.animationDelayKey_),this.animationDelayKey_=void 0);else{o.appendChild(this.viewport_),this.renderer_||(this.renderer_=this.createRenderer()),this.mapBrowserEventHandler_=new Out(this,this.moveTolerance_);for(var i in Hi)this.mapBrowserEventHandler_.addEventListener(Hi[i],this.handleMapBrowserEvent.bind(this));this.viewport_.addEventListener(kr.CONTEXTMENU,this.boundHandleBrowserEvent_,!1),this.viewport_.addEventListener(kr.WHEEL,this.boundHandleBrowserEvent_,L9?{passive:!1}:!1);var a=this.getOwnerDocument().defaultView,c=this.keyboardEventTarget_?this.keyboardEventTarget_:o;this.targetChangeHandlerKeys_=[ao(c,kr.KEYDOWN,this.handleBrowserEvent,this),ao(c,kr.KEYPRESS,this.handleBrowserEvent,this),ao(a,kr.RESIZE,this.updateSize,this)]}this.updateSize()},t.prototype.handleTileChange_=function(){this.render()},t.prototype.handleViewPropertyChanged_=function(){this.render()},t.prototype.handleViewChanged_=function(){this.viewPropertyListenerKey_&&(Zo(this.viewPropertyListenerKey_),this.viewPropertyListenerKey_=null),this.viewChangeListenerKey_&&(Zo(this.viewChangeListenerKey_),this.viewChangeListenerKey_=null);var r=this.getView();r&&(this.updateViewportSize_(),this.viewPropertyListenerKey_=ao(r,fv.PROPERTYCHANGE,this.handleViewPropertyChanged_,this),this.viewChangeListenerKey_=ao(r,kr.CHANGE,this.handleViewPropertyChanged_,this),r.resolveConstraints(0)),this.render()},t.prototype.handleLayerGroupChanged_=function(){this.layerGroupPropertyListenerKeys_&&(this.layerGroupPropertyListenerKeys_.forEach(Zo),this.layerGroupPropertyListenerKeys_=null);var r=this.getLayerGroup();r&&(this.handleLayerAdd_(new gv("addlayer",r)),this.layerGroupPropertyListenerKeys_=[ao(r,fv.PROPERTYCHANGE,this.render,this),ao(r,kr.CHANGE,this.render,this),ao(r,"addlayer",this.handleLayerAdd_,this),ao(r,"removelayer",this.handleLayerRemove_,this)]),this.render()},t.prototype.isRendered=function(){return!!this.frameState_},t.prototype.renderSync=function(){this.animationDelayKey_&&cancelAnimationFrame(this.animationDelayKey_),this.animationDelay_()},t.prototype.redrawText=function(){for(var r=this.getLayerGroup().getLayerStatesArray(),n=0,o=r.length;n<o;++n){var i=r[n].layer;i.hasRenderer()&&i.getRenderer().handleFontsChanged()}},t.prototype.render=function(){this.renderer_&&this.animationDelayKey_===void 0&&(this.animationDelayKey_=requestAnimationFrame(this.animationDelay_))},t.prototype.removeControl=function(r){return this.getControls().remove(r)},t.prototype.removeInteraction=function(r){return this.getInteractions().remove(r)},t.prototype.removeLayer=function(r){var n=this.getLayerGroup().getLayers();return n.remove(r)},t.prototype.handleLayerRemove_=function(r){qut(r.layer)},t.prototype.removeOverlay=function(r){return this.getOverlays().remove(r)},t.prototype.renderFrame_=function(r){var n=this,o=this.getSize(),i=this.getView(),a=this.frameState_,c=null;if(o!==void 0&&Gce(o)&&i&&i.isDef()){var h=i.getHints(this.frameState_?this.frameState_.viewHints:void 0),m=i.getState();if(c={animate:!1,coordinateToPixelTransform:this.coordinateToPixelTransform_,declutterTree:null,extent:a4(m.center,m.resolution,m.rotation,o),index:this.frameIndex_++,layerIndex:0,layerStatesArray:this.getLayerGroup().getLayerStatesArray(),pixelRatio:this.pixelRatio_,pixelToCoordinateTransform:this.pixelToCoordinateTransform_,postRenderFunctions:[],size:o,tileQueue:this.tileQueue_,time:r,usedTiles:{},viewState:m,viewHints:h,wantedTiles:{},mapId:es(this),renderTargets:{}},m.nextCenter&&m.nextResolution){var y=isNaN(m.nextRotation)?m.rotation:m.nextRotation;c.nextExtent=a4(m.nextCenter,m.nextResolution,y,o)}}if(this.frameState_=c,this.renderer_.renderFrame(c),c){if(c.animate&&this.render(),Array.prototype.push.apply(this.postRenderFunctions_,c.postRenderFunctions),a){var w=!this.previousExtent_||!Eb(this.previousExtent_)&&!bse(c.extent,this.previousExtent_);w&&(this.dispatchEvent(new Q0(wm.MOVESTART,this,a)),this.previousExtent_=wT(this.previousExtent_))}var E=this.previousExtent_&&!c.viewHints[Hc.ANIMATING]&&!c.viewHints[Hc.INTERACTING]&&!bse(c.extent,this.previousExtent_);E&&(this.dispatchEvent(new Q0(wm.MOVEEND,this,c)),Qet(c.extent,this.previousExtent_))}this.dispatchEvent(new Q0(wm.POSTRENDER,this,c)),this.renderComplete_=this.hasListener(wm.LOADSTART)||this.hasListener(wm.LOADEND)||this.hasListener(xu.RENDERCOMPLETE)?!this.tileQueue_.getTilesLoading()&&!this.tileQueue_.getCount()&&!this.getLoadingOrNotReady():void 0,this.postRenderTimeoutHandle_||(this.postRenderTimeoutHandle_=setTimeout(function(){n.postRenderTimeoutHandle_=void 0,n.handlePostRender()},0))},t.prototype.setLayerGroup=function(r){var n=this.getLayerGroup();n&&this.handleLayerRemove_(new gv("removelayer",n)),this.set(Is.LAYERGROUP,r)},t.prototype.setSize=function(r){this.set(Is.SIZE,r)},t.prototype.setTarget=function(r){this.set(Is.TARGET,r)},t.prototype.setView=function(r){if(!r||r instanceof Im){this.set(Is.VIEW,r);return}this.set(Is.VIEW,new Im);var n=this;r.then(function(o){n.setView(new Im(o))})},t.prototype.updateSize=function(){var r=this.getTargetElement(),n=void 0;if(r){var o=getComputedStyle(r),i=r.offsetWidth-parseFloat(o.borderLeftWidth)-parseFloat(o.paddingLeft)-parseFloat(o.paddingRight)-parseFloat(o.borderRightWidth),a=r.offsetHeight-parseFloat(o.borderTopWidth)-parseFloat(o.paddingTop)-parseFloat(o.paddingBottom)-parseFloat(o.borderBottomWidth);!isNaN(i)&&!isNaN(a)&&(n=[i,a],!Gce(n)&&(r.offsetWidth||r.offsetHeight||r.getClientRects().length)&&console.warn("No map visible because the map container's width or height are 0."))}this.setSize(n),this.updateViewportSize_()},t.prototype.updateViewportSize_=function(){var r=this.getView();if(r){var n=void 0,o=getComputedStyle(this.viewport_);o.width&&o.height&&(n=[parseInt(o.width,10),parseInt(o.height,10)]),r.setViewportSize(n)}},t}(fl);function Gjr(e){var t=null;e.keyboardEventTarget!==void 0&&(t=typeof e.keyboardEventTarget=="string"?document.getElementById(e.keyboardEventTarget):e.keyboardEventTarget);var r={},n=e.layers&&typeof e.layers.getLayers=="function"?e.layers:new pD({layers:e.layers});r[Is.LAYERGROUP]=n,r[Is.TARGET]=e.target,r[Is.VIEW]=e.view instanceof Im?e.view:new Im;var o;e.controls!==void 0&&(Array.isArray(e.controls)?o=new Qu(e.controls.slice()):(zn(typeof e.controls.getArray=="function",47),o=e.controls));var i;e.interactions!==void 0&&(Array.isArray(e.interactions)?i=new Qu(e.interactions.slice()):(zn(typeof e.interactions.getArray=="function",48),i=e.interactions));var a;return e.overlays!==void 0?Array.isArray(e.overlays)?a=new Qu(e.overlays.slice()):(zn(typeof e.overlays.getArray=="function",49),a=e.overlays):a=new Qu,{controls:o,interactions:i,keyboardEventTarget:t,overlays:a,values:r}}var Fut=Vjr;u();u();var Hjr=function(){var e=function(t,r){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,o){n.__proto__=o}||function(n,o){for(var i in o)Object.prototype.hasOwnProperty.call(o,i)&&(n[i]=o[i])},e(t,r)};return function(t,r){if(typeof r!="function"&&r!==null)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");e(t,r);function n(){this.constructor=t}t.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),Wjr=function(e){Hjr(t,e);function t(r){var n=this,o=r||{};n=e.call(this,{element:document.createElement("div"),render:o.render,target:o.target})||this,n.ulElement_=document.createElement("ul"),n.collapsed_=o.collapsed!==void 0?o.collapsed:!0,n.userCollapsed_=n.collapsed_,n.overrideCollapsible_=o.collapsible!==void 0,n.collapsible_=o.collapsible!==void 0?o.collapsible:!0,n.collapsible_||(n.collapsed_=!1);var i=o.className!==void 0?o.className:"ol-attribution",a=o.tipLabel!==void 0?o.tipLabel:"Attributions",c=o.expandClassName!==void 0?o.expandClassName:i+"-expand",h=o.collapseLabel!==void 0?o.collapseLabel:"\u203A",m=o.collapseClassName!==void 0?o.collapseClassName:i+"-collapse";typeof h=="string"?(n.collapseLabel_=document.createElement("span"),n.collapseLabel_.textContent=h,n.collapseLabel_.className=m):n.collapseLabel_=h;var y=o.label!==void 0?o.label:"i";typeof y=="string"?(n.label_=document.createElement("span"),n.label_.textContent=y,n.label_.className=c):n.label_=y;var w=n.collapsible_&&!n.collapsed_?n.collapseLabel_:n.label_;n.toggleButton_=document.createElement("button"),n.toggleButton_.setAttribute("type","button"),n.toggleButton_.setAttribute("aria-expanded",String(!n.collapsed_)),n.toggleButton_.title=a,n.toggleButton_.appendChild(w),n.toggleButton_.addEventListener(kr.CLICK,n.handleClick_.bind(n),!1);var E=i+" "+Vf+" "+Em+(n.collapsed_&&n.collapsible_?" "+Uce:"")+(n.collapsible_?"":" ol-uncollapsible"),A=n.element;return A.className=E,A.appendChild(n.toggleButton_),A.appendChild(n.ulElement_),n.renderedAttributions_=[],n.renderedVisible_=!0,n}return t.prototype.collectSourceAttributions_=function(r){for(var n={},o=[],i=!0,a=r.layerStatesArray,c=0,h=a.length;c<h;++c){var m=a[c];if(jb(m,r.viewState)){var y=m.layer.getSource();if(y){var w=y.getAttributions();if(w){var E=w(r);if(E)if(i=i&&y.getAttributionsCollapsible()!==!1,Array.isArray(E))for(var A=0,P=E.length;A<P;++A)E[A]in n||(o.push(E[A]),n[E[A]]=!0);else E in n||(o.push(E),n[E]=!0)}}}}return this.overrideCollapsible_||this.setCollapsible(i),o},t.prototype.updateElement_=function(r){if(!r){this.renderedVisible_&&(this.element.style.display="none",this.renderedVisible_=!1);return}var n=this.collectSourceAttributions_(r),o=n.length>0;if(this.renderedVisible_!=o&&(this.element.style.display=o?"":"none",this.renderedVisible_=o),!O9(n,this.renderedAttributions_)){Glt(this.ulElement_);for(var i=0,a=n.length;i<a;++i){var c=document.createElement("li");c.innerHTML=n[i],this.ulElement_.appendChild(c)}this.renderedAttributions_=n}},t.prototype.handleClick_=function(r){r.preventDefault(),this.handleToggle_(),this.userCollapsed_=this.collapsed_},t.prototype.handleToggle_=function(){this.element.classList.toggle(Uce),this.collapsed_?i2(this.collapseLabel_,this.label_):i2(this.label_,this.collapseLabel_),this.collapsed_=!this.collapsed_,this.toggleButton_.setAttribute("aria-expanded",String(!this.collapsed_))},t.prototype.getCollapsible=function(){return this.collapsible_},t.prototype.setCollapsible=function(r){this.collapsible_!==r&&(this.collapsible_=r,this.element.classList.toggle("ol-uncollapsible"),this.userCollapsed_&&this.handleToggle_())},t.prototype.setCollapsed=function(r){this.userCollapsed_=r,!(!this.collapsible_||this.collapsed_===r)&&this.handleToggle_()},t.prototype.getCollapsed=function(){return this.collapsed_},t.prototype.render=function(r){this.updateElement_(r.frameState)},t}(Pp),Uut=Wjr;u();var $jr=function(){var e=function(t,r){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,o){n.__proto__=o}||function(n,o){for(var i in o)Object.prototype.hasOwnProperty.call(o,i)&&(n[i]=o[i])},e(t,r)};return function(t,r){if(typeof r!="function"&&r!==null)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");e(t,r);function n(){this.constructor=t}t.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),Yjr=function(e){$jr(t,e);function t(r){var n=this,o=r||{};n=e.call(this,{element:document.createElement("div"),render:o.render,target:o.target})||this;var i=o.className!==void 0?o.className:"ol-rotate",a=o.label!==void 0?o.label:"\u21E7",c=o.compassClassName!==void 0?o.compassClassName:"ol-compass";n.label_=null,typeof a=="string"?(n.label_=document.createElement("span"),n.label_.className=c,n.label_.textContent=a):(n.label_=a,n.label_.classList.add(c));var h=o.tipLabel?o.tipLabel:"Reset rotation",m=document.createElement("button");m.className=i+"-reset",m.setAttribute("type","button"),m.title=h,m.appendChild(n.label_),m.addEventListener(kr.CLICK,n.handleClick_.bind(n),!1);var y=i+" "+Vf+" "+Em,w=n.element;return w.className=y,w.appendChild(m),n.callResetNorth_=o.resetNorth?o.resetNorth:void 0,n.duration_=o.duration!==void 0?o.duration:250,n.autoHide_=o.autoHide!==void 0?o.autoHide:!0,n.rotation_=void 0,n.autoHide_&&n.element.classList.add(uD),n}return t.prototype.handleClick_=function(r){r.preventDefault(),this.callResetNorth_!==void 0?this.callResetNorth_():this.resetNorth_()},t.prototype.resetNorth_=function(){var r=this.getMap(),n=r.getView();if(n){var o=n.getRotation();o!==void 0&&(this.duration_>0&&o%(2*Math.PI)!==0?n.animate({rotation:0,duration:this.duration_,easing:Uf}):n.setRotation(0))}},t.prototype.render=function(r){var n=r.frameState;if(n){var o=n.viewState.rotation;if(o!=this.rotation_){var i="rotate("+o+"rad)";if(this.autoHide_){var a=this.element.classList.contains(uD);!a&&o===0?this.element.classList.add(uD):a&&o!==0&&this.element.classList.remove(uD)}this.label_.style.transform=i}this.rotation_=o}},t}(Pp),But=Yjr;u();var Zjr=function(){var e=function(t,r){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,o){n.__proto__=o}||function(n,o){for(var i in o)Object.prototype.hasOwnProperty.call(o,i)&&(n[i]=o[i])},e(t,r)};return function(t,r){if(typeof r!="function"&&r!==null)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");e(t,r);function n(){this.constructor=t}t.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),Kjr=function(e){Zjr(t,e);function t(r){var n=this,o=r||{};n=e.call(this,{element:document.createElement("div"),target:o.target})||this;var i=o.className!==void 0?o.className:"ol-zoom",a=o.delta!==void 0?o.delta:1,c=o.zoomInClassName!==void 0?o.zoomInClassName:i+"-in",h=o.zoomOutClassName!==void 0?o.zoomOutClassName:i+"-out",m=o.zoomInLabel!==void 0?o.zoomInLabel:"+",y=o.zoomOutLabel!==void 0?o.zoomOutLabel:"\u2013",w=o.zoomInTipLabel!==void 0?o.zoomInTipLabel:"Zoom in",E=o.zoomOutTipLabel!==void 0?o.zoomOutTipLabel:"Zoom out",A=document.createElement("button");A.className=c,A.setAttribute("type","button"),A.title=w,A.appendChild(typeof m=="string"?document.createTextNode(m):m),A.addEventListener(kr.CLICK,n.handleClick_.bind(n,a),!1);var P=document.createElement("button");P.className=h,P.setAttribute("type","button"),P.title=E,P.appendChild(typeof y=="string"?document.createTextNode(y):y),P.addEventListener(kr.CLICK,n.handleClick_.bind(n,-a),!1);var j=i+" "+Vf+" "+Em,D=n.element;return D.className=j,D.appendChild(A),D.appendChild(P),n.duration_=o.duration!==void 0?o.duration:250,n}return t.prototype.handleClick_=function(r,n){n.preventDefault(),this.zoomByDelta_(r)},t.prototype.zoomByDelta_=function(r){var n=this.getMap(),o=n.getView();if(o){var i=o.getZoom();if(i!==void 0){var a=o.getConstrainedZoom(i+r);this.duration_>0?(o.getAnimating()&&o.cancelAnimations(),o.animate({zoom:a,duration:this.duration_,easing:Uf})):o.setZoom(a)}}},t}(Pp),Z9=Kjr;u();var Xjr=function(){var e=function(t,r){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,o){n.__proto__=o}||function(n,o){for(var i in o)Object.prototype.hasOwnProperty.call(o,i)&&(n[i]=o[i])},e(t,r)};return function(t,r){if(typeof r!="function"&&r!==null)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");e(t,r);function n(){this.constructor=t}t.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),Jjr=function(e){Xjr(t,e);function t(r){var n=this,o=r||{};n=e.call(this,{element:document.createElement("div"),target:o.target})||this,n.extent=o.extent?o.extent:null;var i=o.className!==void 0?o.className:"ol-zoom-extent",a=o.label!==void 0?o.label:"E",c=o.tipLabel!==void 0?o.tipLabel:"Fit to extent",h=document.createElement("button");h.setAttribute("type","button"),h.title=c,h.appendChild(typeof a=="string"?document.createTextNode(a):a),h.addEventListener(kr.CLICK,n.handleClick_.bind(n),!1);var m=i+" "+Vf+" "+Em,y=n.element;return y.className=m,y.appendChild(h),n}return t.prototype.handleClick_=function(r){r.preventDefault(),this.handleZoomToExtent()},t.prototype.handleZoomToExtent=function(){var r=this.getMap(),n=r.getView(),o=this.extent?this.extent:n.getProjection().getExtent();n.fitInternal(aD(o))},t}(Pp),Vut=Jjr;function Gut(e){var t=e||{},r=new Qu,n=t.zoom!==void 0?t.zoom:!0;n&&r.push(new Z9(t.zoomOptions));var o=t.rotate!==void 0?t.rotate:!0;o&&r.push(new But(t.rotateOptions));var i=t.attribution!==void 0?t.attribution:!0;return i&&r.push(new Uut(t.attributionOptions)),r}var Qjr=function(){var e=function(t,r){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,o){n.__proto__=o}||function(n,o){for(var i in o)Object.prototype.hasOwnProperty.call(o,i)&&(n[i]=o[i])},e(t,r)};return function(t,r){if(typeof r!="function"&&r!==null)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");e(t,r);function n(){this.constructor=t}t.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),eqr=function(e){Qjr(t,e);function t(r){return r=Ti({},r),r.controls||(r.controls=Gut()),r.interactions||(r.interactions=$9({onFocusOnly:!0})),e.call(this,r)||this}return t.prototype.createRenderer=function(){return new Cut(this)},t}(Fut),Hut=eqr;u();u();u();var hD={PRELOAD:"preload",USE_INTERIM_TILES_ON_ERROR:"useInterimTilesOnError"};var tqr=function(){var e=function(t,r){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,o){n.__proto__=o}||function(n,o){for(var i in o)Object.prototype.hasOwnProperty.call(o,i)&&(n[i]=o[i])},e(t,r)};return function(t,r){if(typeof r!="function"&&r!==null)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");e(t,r);function n(){this.constructor=t}t.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),rqr=function(e){tqr(t,e);function t(r){var n=this,o=r||{},i=Ti({},o);return delete i.preload,delete i.useInterimTilesOnError,n=e.call(this,i)||this,n.on,n.once,n.un,n.setPreload(o.preload!==void 0?o.preload:0),n.setUseInterimTilesOnError(o.useInterimTilesOnError!==void 0?o.useInterimTilesOnError:!0),n}return t.prototype.getPreload=function(){return this.get(hD.PRELOAD)},t.prototype.setPreload=function(r){this.set(hD.PRELOAD,r)},t.prototype.getUseInterimTilesOnError=function(){return this.get(hD.USE_INTERIM_TILES_ON_ERROR)},t.prototype.setUseInterimTilesOnError=function(r){this.set(hD.USE_INTERIM_TILES_ON_ERROR,r)},t.prototype.getData=function(r){return e.prototype.getData.call(this,r)},t}(cD),Wut=rqr;u();u();var nqr=function(){function e(t){this.highWaterMark=t!==void 0?t:2048,this.count_=0,this.entries_={},this.oldest_=null,this.newest_=null}return e.prototype.canExpireCache=function(){return this.highWaterMark>0&&this.getCount()>this.highWaterMark},e.prototype.expireCache=function(t){for(;this.canExpireCache();)this.pop()},e.prototype.clear=function(){this.count_=0,this.entries_={},this.oldest_=null,this.newest_=null},e.prototype.containsKey=function(t){return this.entries_.hasOwnProperty(t)},e.prototype.forEach=function(t){for(var r=this.oldest_;r;)t(r.value_,r.key_,this),r=r.newer},e.prototype.get=function(t,r){var n=this.entries_[t];return zn(n!==void 0,15),n===this.newest_||(n===this.oldest_?(this.oldest_=this.oldest_.newer,this.oldest_.older=null):(n.newer.older=n.older,n.older.newer=n.newer),n.newer=null,n.older=this.newest_,this.newest_.newer=n,this.newest_=n),n.value_},e.prototype.remove=function(t){var r=this.entries_[t];return zn(r!==void 0,15),r===this.newest_?(this.newest_=r.older,this.newest_&&(this.newest_.newer=null)):r===this.oldest_?(this.oldest_=r.newer,this.oldest_&&(this.oldest_.older=null)):(r.newer.older=r.older,r.older.newer=r.newer),delete this.entries_[t],--this.count_,r.value_},e.prototype.getCount=function(){return this.count_},e.prototype.getKeys=function(){var t=new Array(this.count_),r=0,n;for(n=this.newest_;n;n=n.older)t[r++]=n.key_;return t},e.prototype.getValues=function(){var t=new Array(this.count_),r=0,n;for(n=this.newest_;n;n=n.older)t[r++]=n.value_;return t},e.prototype.peekLast=function(){return this.oldest_.value_},e.prototype.peekLastKey=function(){return this.oldest_.key_},e.prototype.peekFirstKey=function(){return this.newest_.key_},e.prototype.peek=function(t){if(this.containsKey(t))return this.entries_[t].value_},e.prototype.pop=function(){var t=this.oldest_;return delete this.entries_[t.key_],t.newer&&(t.newer.older=null),this.oldest_=t.newer,this.oldest_||(this.newest_=null),--this.count_,t.value_},e.prototype.replace=function(t,r){this.get(t),this.entries_[t].value_=r},e.prototype.set=function(t,r){zn(!(t in this.entries_),16);var n={key_:t,newer:null,older:this.newest_,value_:r};this.newest_?this.newest_.newer=n:this.oldest_=n,this.newest_=n,this.entries_[t]=n,++this.count_},e.prototype.setSize=function(t){this.highWaterMark=t},e}(),K9=nqr;u();var $ut=function(){function e(t,r,n,o){this.minX=t,this.maxX=r,this.minY=n,this.maxY=o}return e.prototype.contains=function(t){return this.containsXY(t[1],t[2])},e.prototype.containsTileRange=function(t){return this.minX<=t.minX&&t.maxX<=this.maxX&&this.minY<=t.minY&&t.maxY<=this.maxY},e.prototype.containsXY=function(t,r){return this.minX<=t&&t<=this.maxX&&this.minY<=r&&r<=this.maxY},e.prototype.equals=function(t){return this.minX==t.minX&&this.minY==t.minY&&this.maxX==t.maxX&&this.maxY==t.maxY},e.prototype.extend=function(t){t.minX<this.minX&&(this.minX=t.minX),t.maxX>this.maxX&&(this.maxX=t.maxX),t.minY<this.minY&&(this.minY=t.minY),t.maxY>this.maxY&&(this.maxY=t.maxY)},e.prototype.getHeight=function(){return this.maxY-this.minY+1},e.prototype.getSize=function(){return[this.getWidth(),this.getHeight()]},e.prototype.getWidth=function(){return this.maxX-this.minX+1},e.prototype.intersects=function(t){return this.minX<=t.maxX&&this.maxX>=t.minX&&this.minY<=t.maxY&&this.maxY>=t.minY},e}();function qb(e,t,r,n,o){return o!==void 0?(o.minX=e,o.maxX=t,o.minY=r,o.maxY=n,o):new $ut(e,t,r,n)}var X9=$ut;u();u();u();var oqr=function(){var e=function(t,r){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,o){n.__proto__=o}||function(n,o){for(var i in o)Object.prototype.hasOwnProperty.call(o,i)&&(n[i]=o[i])},e(t,r)};return function(t,r){if(typeof r!="function"&&r!==null)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");e(t,r);function n(){this.constructor=t}t.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),iqr=function(e){oqr(t,e);function t(r,n,o){var i=e.call(this)||this,a=o||{};return i.tileCoord=r,i.state=n,i.interimTile=null,i.key="",i.transition_=a.transition===void 0?250:a.transition,i.transitionStarts_={},i.interpolate=!!a.interpolate,i}return t.prototype.changed=function(){this.dispatchEvent(kr.CHANGE)},t.prototype.release=function(){},t.prototype.getKey=function(){return this.key+"/"+this.tileCoord},t.prototype.getInterimTile=function(){if(!this.interimTile)return this;var r=this.interimTile;do{if(r.getState()==Rr.LOADED)return this.transition_=0,r;r=r.interimTile}while(r);return this},t.prototype.refreshInterimChain=function(){if(this.interimTile){var r=this.interimTile,n=this;do{if(r.getState()==Rr.LOADED){r.interimTile=null;break}else r.getState()==Rr.LOADING?n=r:r.getState()==Rr.IDLE?n.interimTile=r.interimTile:n=r;r=n.interimTile}while(r)}},t.prototype.getTileCoord=function(){return this.tileCoord},t.prototype.getState=function(){return this.state},t.prototype.setState=function(r){if(this.state!==Rr.ERROR&&this.state>r)throw new Error("Tile load sequence violation");this.state=r,this.changed()},t.prototype.load=function(){Ao()},t.prototype.getAlpha=function(r,n){if(!this.transition_)return 1;var o=this.transitionStarts_[r];if(!o)o=n,this.transitionStarts_[r]=o;else if(o===-1)return 1;var i=n-o+1e3/60;return i>=this.transition_?1:Mce(i/this.transition_)},t.prototype.inTransition=function(r){return this.transition_?this.transitionStarts_[r]!==-1:!1},t.prototype.endTransition=function(r){this.transition_&&(this.transitionStarts_[r]=-1)},t}(Ff),u2=iqr;var aqr=function(){var e=function(t,r){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,o){n.__proto__=o}||function(n,o){for(var i in o)Object.prototype.hasOwnProperty.call(o,i)&&(n[i]=o[i])},e(t,r)};return function(t,r){if(typeof r!="function"&&r!==null)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");e(t,r);function n(){this.constructor=t}t.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),sqr=function(e){aqr(t,e);function t(r){var n=this,o=Rr.IDLE;return n=e.call(this,r.tileCoord,o,{transition:r.transition,interpolate:r.interpolate})||this,n.loader_=r.loader,n.data_=null,n.error_=null,n.size_=r.size||[256,256],n}return t.prototype.getSize=function(){return this.size_},t.prototype.getData=function(){return this.data_},t.prototype.getError=function(){return this.error_},t.prototype.load=function(){if(!(this.state!==Rr.IDLE&&this.state!==Rr.ERROR)){this.state=Rr.LOADING,this.changed();var r=this;this.loader_().then(function(n){r.data_=n,r.state=Rr.LOADED,r.changed()}).catch(function(n){r.error_=n,r.state=Rr.ERROR,r.changed()})}},t}(u2),Yut=sqr;u();var lqr=function(){var e=function(t,r){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,o){n.__proto__=o}||function(n,o){for(var i in o)Object.prototype.hasOwnProperty.call(o,i)&&(n[i]=o[i])},e(t,r)};return function(t,r){if(typeof r!="function"&&r!==null)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");e(t,r);function n(){this.constructor=t}t.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),uqr=function(e){lqr(t,e);function t(r,n,o,i,a,c){var h=e.call(this,r,n,c)||this;return h.crossOrigin_=i,h.src_=o,h.key=o,h.image_=new Image,i!==null&&(h.image_.crossOrigin=i),h.unlisten_=null,h.tileLoadFunction_=a,h}return t.prototype.getImage=function(){return this.image_},t.prototype.setImage=function(r){this.image_=r,this.state=Rr.LOADED,this.unlistenImage_(),this.changed()},t.prototype.handleImageError_=function(){this.state=Rr.ERROR,this.unlistenImage_(),this.image_=cqr(),this.changed()},t.prototype.handleImageLoad_=function(){var r=this.image_;r.naturalWidth&&r.naturalHeight?this.state=Rr.LOADED:this.state=Rr.EMPTY,this.unlistenImage_(),this.changed()},t.prototype.load=function(){this.state==Rr.ERROR&&(this.state=Rr.IDLE,this.image_=new Image,this.crossOrigin_!==null&&(this.image_.crossOrigin=this.crossOrigin_)),this.state==Rr.IDLE&&(this.state=Rr.LOADING,this.changed(),this.tileLoadFunction_(this,this.src_),this.unlisten_=Yce(this.image_,this.handleImageLoad_.bind(this),this.handleImageError_.bind(this)))},t.prototype.unlistenImage_=function(){this.unlisten_&&(this.unlisten_(),this.unlisten_=null)},t}(u2);function cqr(){var e=mv(1,1);return e.fillStyle="rgba(0,0,0,0)",e.fillRect(0,0,1,1),e.canvas}var zb=uqr;u();u();var Zut=.5,Mm=!0;u();var pqr=10,Kut=.25,fqr=function(){function e(t,r,n,o,i,a){this.sourceProj_=t,this.targetProj_=r;var c={},h=Tb(this.targetProj_,this.sourceProj_);this.transformInv_=function(V){var G=V[0]+"/"+V[1];return c[G]||(c[G]=h(V)),c[G]},this.maxSourceExtent_=o,this.errorThresholdSquared_=i*i,this.triangles_=[],this.wrapsXInSource_=!1,this.canWrapXInSource_=this.sourceProj_.canWrapX()&&!!o&&!!this.sourceProj_.getExtent()&&oa(o)==oa(this.sourceProj_.getExtent()),this.sourceWorldWidth_=this.sourceProj_.getExtent()?oa(this.sourceProj_.getExtent()):null,this.targetWorldWidth_=this.targetProj_.getExtent()?oa(this.targetProj_.getExtent()):null;var m=A0(n),y=AF(n),w=CF(n),E=MF(n),A=this.transformInv_(m),P=this.transformInv_(y),j=this.transformInv_(w),D=this.transformInv_(E),k=pqr+(a?Math.max(0,Math.ceil(xF(i4(n)/(a*a*256*256)))):0);if(this.addQuad_(m,y,w,E,A,P,j,D,k),this.wrapsXInSource_){var z=1/0;this.triangles_.forEach(function(V,G,K){z=Math.min(z,V.source[0][0],V.source[1][0],V.source[2][0])}),this.triangles_.forEach(function(V){if(Math.max(V.source[0][0],V.source[1][0],V.source[2][0])-z>this.sourceWorldWidth_/2){var G=[[V.source[0][0],V.source[0][1]],[V.source[1][0],V.source[1][1]],[V.source[2][0],V.source[2][1]]];G[0][0]-z>this.sourceWorldWidth_/2&&(G[0][0]-=this.sourceWorldWidth_),G[1][0]-z>this.sourceWorldWidth_/2&&(G[1][0]-=this.sourceWorldWidth_),G[2][0]-z>this.sourceWorldWidth_/2&&(G[2][0]-=this.sourceWorldWidth_);var K=Math.min(G[0][0],G[1][0],G[2][0]),Z=Math.max(G[0][0],G[1][0],G[2][0]);Z-K<this.sourceWorldWidth_/2&&(V.source=G)}}.bind(this))}c={}}return e.prototype.addTriangle_=function(t,r,n,o,i,a){this.triangles_.push({source:[o,i,a],target:[t,r,n]})},e.prototype.addQuad_=function(t,r,n,o,i,a,c,h,m){var y=n4([i,a,c,h]),w=this.sourceWorldWidth_?oa(y)/this.sourceWorldWidth_:null,E=this.sourceWorldWidth_,A=this.sourceProj_.canWrapX()&&w>.5&&w<1,P=!1;if(m>0){if(this.targetProj_.isGlobal()&&this.targetWorldWidth_){var j=n4([t,r,n,o]),D=oa(j)/this.targetWorldWidth_;P=D>Kut||P}!A&&this.sourceProj_.isGlobal()&&w&&(P=w>Kut||P)}if(!(!P&&this.maxSourceExtent_&&isFinite(y[0])&&isFinite(y[1])&&isFinite(y[2])&&isFinite(y[3])&&!s4(y,this.maxSourceExtent_))){var k=0;if(!P&&(!isFinite(i[0])||!isFinite(i[1])||!isFinite(a[0])||!isFinite(a[1])||!isFinite(c[0])||!isFinite(c[1])||!isFinite(h[0])||!isFinite(h[1]))){if(m>0)P=!0;else if(k=(!isFinite(i[0])||!isFinite(i[1])?8:0)+(!isFinite(a[0])||!isFinite(a[1])?4:0)+(!isFinite(c[0])||!isFinite(c[1])?2:0)+(!isFinite(h[0])||!isFinite(h[1])?1:0),k!=1&&k!=2&&k!=4&&k!=8)return}if(m>0){if(!P){var z=[(t[0]+n[0])/2,(t[1]+n[1])/2],V=this.transformInv_(z),G=void 0;if(A){var K=(Hd(i[0],E)+Hd(c[0],E))/2;G=K-Hd(V[0],E)}else G=(i[0]+c[0])/2-V[0];var Z=(i[1]+c[1])/2-V[1],te=G*G+Z*Z;P=te>this.errorThresholdSquared_}if(P){if(Math.abs(t[0]-n[0])<=Math.abs(t[1]-n[1])){var se=[(r[0]+n[0])/2,(r[1]+n[1])/2],le=this.transformInv_(se),pe=[(o[0]+t[0])/2,(o[1]+t[1])/2],me=this.transformInv_(pe);this.addQuad_(t,r,se,pe,i,a,le,me,m-1),this.addQuad_(pe,se,n,o,me,le,c,h,m-1)}else{var _e=[(t[0]+r[0])/2,(t[1]+r[1])/2],de=this.transformInv_(_e),Ce=[(n[0]+o[0])/2,(n[1]+o[1])/2],Ye=this.transformInv_(Ce);this.addQuad_(t,_e,Ce,o,i,de,Ye,h,m-1),this.addQuad_(_e,r,n,Ce,de,a,c,Ye,m-1)}return}}if(A){if(!this.canWrapXInSource_)return;this.wrapsXInSource_=!0}(k&11)==0&&this.addTriangle_(t,n,o,i,c,h),(k&14)==0&&this.addTriangle_(t,n,r,i,c,a),k&&((k&13)==0&&this.addTriangle_(r,o,t,a,h,i),(k&7)==0&&this.addTriangle_(r,o,n,a,h,c))}},e.prototype.calculateSourceExtent=function(){var t=im();return this.triangles_.forEach(function(r,n,o){var i=r.source;o4(t,i[0]),o4(t,i[1]),o4(t,i[2])}),t},e.prototype.getTriangles=function(){return this.triangles_},e}(),Xut=fqr;u();u();var rpe={imageSmoothingEnabled:!1,msImageSmoothingEnabled:!1};var npe,ipe=[];function Jut(e,t,r,n,o){e.beginPath(),e.moveTo(0,0),e.lineTo(t,r),e.lineTo(n,o),e.closePath(),e.save(),e.clip(),e.fillRect(0,0,Math.max(t,n)+1,Math.max(r,o)),e.restore()}function ope(e,t){return Math.abs(e[t*4]-210)>2||Math.abs(e[t*4+3]-.75*255)>2}function dqr(){if(npe===void 0){var e=document.createElement("canvas").getContext("2d");e.globalCompositeOperation="lighter",e.fillStyle="rgba(210, 0, 0, 0.75)",Jut(e,4,5,4,0),Jut(e,4,5,0,5);var t=e.getImageData(0,0,3,3).data;npe=ope(t,0)||ope(t,4)||ope(t,8)}return npe}function Qut(e,t,r,n){var o=l4(r,t,e),i=Tse(t,n,r),a=t.getMetersPerUnit();a!==void 0&&(i*=a);var c=e.getMetersPerUnit();c!==void 0&&(i/=c);var h=e.getExtent();if(!h||Xg(h,o)){var m=Tse(e,i,o)/i;isFinite(m)&&m>0&&(i/=m)}return i}function ect(e,t,r,n){var o=Wd(r),i=Qut(e,t,o,n);return(!isFinite(i)||i<=0)&&IF(r,function(a){return i=Qut(e,t,a,n),isFinite(i)&&i>0}),i}function tct(e,t,r,n,o,i,a,c,h,m,y,w){var E=mv(Math.round(r*e),Math.round(r*t),ipe);if(w||Ti(E,rpe),h.length===0)return E.canvas;E.scale(r,r);function A(G){return Math.round(G*r)/r}E.globalCompositeOperation="lighter";var P=im();h.forEach(function(G,K,Z){ntt(P,G.extent)});var j=oa(P),D=Bl(P),k=mv(Math.round(r*j/n),Math.round(r*D/n));w||Ti(k,rpe);var z=r/n;h.forEach(function(G,K,Z){var te=G.extent[0]-P[0],se=-(G.extent[3]-P[3]),le=oa(G.extent),pe=Bl(G.extent);G.image.width>0&&G.image.height>0&&k.drawImage(G.image,m,m,G.image.width-2*m,G.image.height-2*m,te*z,se*z,le*z,pe*z)});var V=A0(a);return c.getTriangles().forEach(function(G,K,Z){var te=G.source,se=G.target,le=te[0][0],pe=te[0][1],me=te[1][0],_e=te[1][1],de=te[2][0],Ce=te[2][1],Ye=A((se[0][0]-V[0])/i),rt=A(-(se[0][1]-V[1])/i),ct=A((se[1][0]-V[0])/i),qe=A(-(se[1][1]-V[1])/i),lt=A((se[2][0]-V[0])/i),bt=A(-(se[2][1]-V[1])/i),Tt=le,et=pe;le=0,pe=0,me-=Tt,_e-=et,de-=Tt,Ce-=et;var pt=[[me,_e,0,0,ct-Ye],[de,Ce,0,0,lt-Ye],[0,0,me,_e,qe-rt],[0,0,de,Ce,bt-rt]],ot=Uet(pt);if(ot){if(E.save(),E.beginPath(),dqr()||!w){E.moveTo(ct,qe);for(var We=4,Ne=Ye-ct,Ke=rt-qe,Ge=0;Ge<We;Ge++)E.lineTo(ct+A((Ge+1)*Ne/We),qe+A(Ge*Ke/(We-1))),Ge!=We-1&&E.lineTo(ct+A((Ge+1)*Ne/We),qe+A((Ge+1)*Ke/(We-1)));E.lineTo(lt,bt)}else E.moveTo(ct,qe),E.lineTo(Ye,rt),E.lineTo(lt,bt);E.clip(),E.transform(ot[0],ot[2],ot[1],ot[3],Ye,rt),E.translate(P[0]-Tt,P[3]-et),E.scale(n/r,-n/r),E.drawImage(k.canvas,0,0),E.restore()}}),y&&(E.save(),E.globalCompositeOperation="source-over",E.strokeStyle="black",E.lineWidth=1,c.getTriangles().forEach(function(G,K,Z){var te=G.target,se=(te[0][0]-V[0])/i,le=-(te[0][1]-V[1])/i,pe=(te[1][0]-V[0])/i,me=-(te[1][1]-V[1])/i,_e=(te[2][0]-V[0])/i,de=-(te[2][1]-V[1])/i;E.beginPath(),E.moveTo(pe,me),E.lineTo(se,le),E.lineTo(_e,de),E.closePath(),E.stroke()}),E.restore()),E.canvas}var hqr=function(){var e=function(t,r){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,o){n.__proto__=o}||function(n,o){for(var i in o)Object.prototype.hasOwnProperty.call(o,i)&&(n[i]=o[i])},e(t,r)};return function(t,r){if(typeof r!="function"&&r!==null)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");e(t,r);function n(){this.constructor=t}t.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),mqr=function(e){hqr(t,e);function t(r,n,o,i,a,c,h,m,y,w,E,A){var P=e.call(this,a,Rr.IDLE,{interpolate:!!A})||this;P.renderEdges_=E!==void 0?E:!1,P.pixelRatio_=h,P.gutter_=m,P.canvas_=null,P.sourceTileGrid_=n,P.targetTileGrid_=i,P.wrappedTileCoord_=c||a,P.sourceTiles_=[],P.sourcesListenerKeys_=null,P.sourceZ_=0;var j=i.getTileCoordExtent(P.wrappedTileCoord_),D=P.targetTileGrid_.getExtent(),k=P.sourceTileGrid_.getExtent(),z=D?am(j,D):j;if(i4(z)===0)return P.state=Rr.EMPTY,P;var V=r.getExtent();V&&(k?k=am(k,V):k=V);var G=i.getResolution(P.wrappedTileCoord_[0]),K=ect(r,o,z,G);if(!isFinite(K)||K<=0)return P.state=Rr.EMPTY,P;var Z=w!==void 0?w:Zut;if(P.triangulation_=new Xut(r,o,z,k,K*Z,G),P.triangulation_.getTriangles().length===0)return P.state=Rr.EMPTY,P;P.sourceZ_=n.getZForResolution(K);var te=P.triangulation_.calculateSourceExtent();if(k&&(r.canWrapX()?(te[1]=Di(te[1],k[1],k[3]),te[3]=Di(te[3],k[1],k[3])):te=am(te,k)),!i4(te))P.state=Rr.EMPTY;else{for(var se=n.getTileRangeForExtentAndZ(te,P.sourceZ_),le=se.minX;le<=se.maxX;le++)for(var pe=se.minY;pe<=se.maxY;pe++){var me=y(P.sourceZ_,le,pe,h);me&&P.sourceTiles_.push(me)}P.sourceTiles_.length===0&&(P.state=Rr.EMPTY)}return P}return t.prototype.getImage=function(){return this.canvas_},t.prototype.reproject_=function(){var r=[];if(this.sourceTiles_.forEach(function(y,w,E){y&&y.getState()==Rr.LOADED&&r.push({extent:this.sourceTileGrid_.getTileCoordExtent(y.tileCoord),image:y.getImage()})}.bind(this)),this.sourceTiles_.length=0,r.length===0)this.state=Rr.ERROR;else{var n=this.wrappedTileCoord_[0],o=this.targetTileGrid_.getTileSize(n),i=typeof o=="number"?o:o[0],a=typeof o=="number"?o:o[1],c=this.targetTileGrid_.getResolution(n),h=this.sourceTileGrid_.getResolution(this.sourceZ_),m=this.targetTileGrid_.getTileCoordExtent(this.wrappedTileCoord_);this.canvas_=tct(i,a,this.pixelRatio_,h,this.sourceTileGrid_.getExtent(),c,m,this.triangulation_,r,this.gutter_,this.renderEdges_,this.interpolate),this.state=Rr.LOADED}this.changed()},t.prototype.load=function(){if(this.state==Rr.IDLE){this.state=Rr.LOADING,this.changed();var r=0;this.sourcesListenerKeys_=[],this.sourceTiles_.forEach(function(n,o,i){var a=n.getState();if(a==Rr.IDLE||a==Rr.LOADING){r++;var c=ao(n,kr.CHANGE,function(h){var m=n.getState();(m==Rr.LOADED||m==Rr.ERROR||m==Rr.EMPTY)&&(Zo(c),r--,r===0&&(this.unlistenSources_(),this.reproject_()))},this);this.sourcesListenerKeys_.push(c)}}.bind(this)),r===0?setTimeout(this.reproject_.bind(this),0):this.sourceTiles_.forEach(function(n,o,i){var a=n.getState();a==Rr.IDLE&&n.load()})}},t.prototype.unlistenSources_=function(){this.sourcesListenerKeys_.forEach(Zo),this.sourcesListenerKeys_=null},t.prototype.release=function(){this.canvas_&&(Vlt(this.canvas_.getContext("2d")),ipe.push(this.canvas_),this.canvas_=null),e.prototype.release.call(this)},t}(u2),J9=mqr;u();u();var mD=34962,gD=34963,nct=35040,c2=35044,oct=35048,ict=5121,act=5123,sct=5125,ape=5126,rct=["experimental-webgl","webgl","webkit-3d","moz-webgl"];function spe(e,t){for(var r=Ti({preserveDrawingBuffer:!0,antialias:!nlt},t),n=rct.length,o=0;o<n;++o)try{var i=e.getContext(rct[o],r);if(i)return i}catch(a){}return null}var gqr={STATIC_DRAW:c2,STREAM_DRAW:nct,DYNAMIC_DRAW:oct},vqr=function(){function e(t,r){this.array=null,this.type=t,zn(t===mD||t===gD,62),this.usage=r!==void 0?r:gqr.STATIC_DRAW}return e.prototype.ofSize=function(t){this.array=new(lpe(this.type))(t)},e.prototype.fromArray=function(t){var r=lpe(this.type);this.array=r.from?r.from(t):new r(t)},e.prototype.fromArrayBuffer=function(t){this.array=new(lpe(this.type))(t)},e.prototype.getType=function(){return this.type},e.prototype.getArray=function(){return this.array},e.prototype.getUsage=function(){return this.usage},e.prototype.getSize=function(){return this.array?this.array.length:0},e}();function lpe(e){switch(e){case mD:return Float32Array;case gD:return Uint32Array;default:return Float32Array}}var Q9=vqr;var yqr=function(){var e=function(t,r){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,o){n.__proto__=o}||function(n,o){for(var i in o)Object.prototype.hasOwnProperty.call(o,i)&&(n[i]=o[i])},e(t,r)};return function(t,r){if(typeof r!="function"&&r!==null)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");e(t,r);function n(){this.constructor=t}t.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}();function uct(e,t,r){var n=r?e.LINEAR:e.NEAREST;e.bindTexture(e.TEXTURE_2D,t),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_WRAP_S,e.CLAMP_TO_EDGE),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_WRAP_T,e.CLAMP_TO_EDGE),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_MIN_FILTER,n),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_MAG_FILTER,n)}function _qr(e,t,r,n){uct(e,t,n),e.texImage2D(e.TEXTURE_2D,0,e.RGBA,e.RGBA,e.UNSIGNED_BYTE,r)}function lct(e,t,r,n,o,i){var a=e.getGL(),c,h;if(r instanceof Float32Array){c=a.FLOAT,e.getExtension("OES_texture_float");var m=e.getExtension("OES_texture_float_linear");h=m!==null}else c=a.UNSIGNED_BYTE,h=!0;uct(a,t,i&&h);var y=r.byteLength/n[1],w=1;y%8===0?w=8:y%4===0?w=4:y%2===0&&(w=2);var E;switch(o){case 1:{E=a.LUMINANCE;break}case 2:{E=a.LUMINANCE_ALPHA;break}case 3:{E=a.RGB;break}case 4:{E=a.RGBA;break}default:throw new Error("Unsupported number of bands: ".concat(o))}var A=a.getParameter(a.UNPACK_ALIGNMENT);a.pixelStorei(a.UNPACK_ALIGNMENT,w),a.texImage2D(a.TEXTURE_2D,0,E,n[0],n[1],0,E,c,r),a.pixelStorei(a.UNPACK_ALIGNMENT,A)}var p2=null;function bqr(){var e=document.createElement("canvas");e.width=1,e.height=1,p2=e.getContext("2d")}var xqr=function(e){yqr(t,e);function t(r){var n=e.call(this)||this;n.tile,n.textures=[],n.handleTileChange_=n.handleTileChange_.bind(n),n.renderSize_=dl(r.grid.getTileSize(r.tile.tileCoord[0])),n.gutter_=r.gutter||0,n.bandCount=NaN,n.helper_=r.helper;var o=new Q9(mD,c2);return o.fromArray([0,1,1,1,1,0,0,0]),n.helper_.flushBufferData(o),n.coords=o,n.setTile(r.tile),n}return t.prototype.setTile=function(r){if(r!==this.tile)if(this.tile&&this.tile.removeEventListener(kr.CHANGE,this.handleTileChange_),this.tile=r,this.textures.length=0,this.loaded=r.getState()===Rr.LOADED,this.loaded)this.uploadTile_();else{if(r instanceof zb){var n=r.getImage();n instanceof Image&&!n.crossOrigin&&(n.crossOrigin="anonymous")}r.addEventListener(kr.CHANGE,this.handleTileChange_)}},t.prototype.uploadTile_=function(){var r=this.helper_,n=r.getGL(),o=this.tile;if(o instanceof zb||o instanceof J9){var i=n.createTexture();this.textures.push(i),this.bandCount=4,_qr(n,i,o.getImage(),o.interpolate);return}var a=o.getSize(),c=[a[0]+2*this.gutter_,a[1]+2*this.gutter_],h=o.getData(),m=h instanceof Float32Array,y=c[0]*c[1],w=m?Float32Array:Uint8Array,E=w.BYTES_PER_ELEMENT,A=h.byteLength/c[1];this.bandCount=Math.floor(A/E/c[0]);var P=Math.ceil(this.bandCount/4);if(P===1){var i=n.createTexture();this.textures.push(i),lct(r,i,h,c,this.bandCount,o.interpolate);return}for(var j=new Array(P),D=0;D<P;++D){var i=n.createTexture();this.textures.push(i);var k=D<P-1?4:this.bandCount%4;j[D]=new w(y*k)}for(var z=0,V=0,G=c[0]*this.bandCount,K=0;K<c[1];++K){for(var Z=0;Z<G;++Z){var te=h[V+Z],se=Math.floor(z/this.bandCount),le=Z%this.bandCount,D=Math.floor(le/4),pe=j[D],k=pe.length/y,me=le%4;pe[se*k+me]=te,++z}V+=A/E}for(var D=0;D<P;++D){var i=this.textures[D],pe=j[D],k=pe.length/y;lct(r,i,pe,c,k,o.interpolate)}},t.prototype.handleTileChange_=function(){this.tile.getState()===Rr.LOADED&&(this.loaded=!0,this.uploadTile_(),this.dispatchEvent(kr.CHANGE))},t.prototype.disposeInternal=function(){var r=this.helper_.getGL();this.helper_.deleteBuffer(this.coords);for(var n=0;n<this.textures.length;++n)r.deleteTexture(this.textures[n]);this.tile.removeEventListener(kr.CHANGE,this.handleTileChange_)},t.prototype.getPixelData=function(r,n){if(!this.loaded)return null;var o=this.renderSize_[0],i=this.renderSize_[1],a=this.gutter_;if(this.tile instanceof Yut){var c=this.tile.getSize(),h=c[0],m=c[1],y=h+2*a,w=m+2*a,E=a+Math.floor(h*(r/o)),A=a+Math.floor(m*(n/i)),P=this.tile.getData();if(P instanceof DataView){var j=P.byteLength/(y*w),D=j*(A*y+E),k=P.buffer.slice(D,D+j);return new DataView(k)}var z=this.bandCount*(A*y+E);return P.slice(z,z+this.bandCount)}p2||bqr(),p2.clearRect(0,0,1,1);var V=this.tile.getImage(),G=V.width,K=V.height,Z=G-2*a,te=K-2*a,se=a+Math.floor(Z*(r/o)),le=a+Math.floor(te*(n/i)),pe;try{p2.drawImage(V,se,le,1,1,0,0,1,1),pe=p2.getImageData(0,0,1,1).data}catch(me){return p2=null,null}return pe},t}(Ff),cct=xqr;u();u();u();var vD={LOST:"webglcontextlost",RESTORED:"webglcontextrestored"};u();var wqr=`
  precision mediump float;
  
  attribute vec2 a_position;
  varying vec2 v_texCoord;
  varying vec2 v_screenCoord;
  
  uniform vec2 u_screenSize;
   
  void main() {
    v_texCoord = a_position * 0.5 + 0.5;
    v_screenCoord = v_texCoord * u_screenSize;
    gl_Position = vec4(a_position, 0.0, 1.0);
  }
`,Eqr=`
  precision mediump float;
   
  uniform sampler2D u_image;
  uniform float u_opacity;
   
  varying vec2 v_texCoord;
   
  void main() {
    gl_FragColor = texture2D(u_image, v_texCoord) * u_opacity;
  }
`,Sqr=function(){function e(t){this.gl_=t.webGlContext;var r=this.gl_;this.scaleRatio_=t.scaleRatio||1,this.renderTargetTexture_=r.createTexture(),this.renderTargetTextureSize_=null,this.frameBuffer_=r.createFramebuffer();var n=r.createShader(r.VERTEX_SHADER);r.shaderSource(n,t.vertexShader||wqr),r.compileShader(n);var o=r.createShader(r.FRAGMENT_SHADER);r.shaderSource(o,t.fragmentShader||Eqr),r.compileShader(o),this.renderTargetProgram_=r.createProgram(),r.attachShader(this.renderTargetProgram_,n),r.attachShader(this.renderTargetProgram_,o),r.linkProgram(this.renderTargetProgram_),this.renderTargetVerticesBuffer_=r.createBuffer();var i=[-1,-1,1,-1,-1,1,1,-1,1,1,-1,1];r.bindBuffer(r.ARRAY_BUFFER,this.renderTargetVerticesBuffer_),r.bufferData(r.ARRAY_BUFFER,new Float32Array(i),r.STATIC_DRAW),this.renderTargetAttribLocation_=r.getAttribLocation(this.renderTargetProgram_,"a_position"),this.renderTargetUniformLocation_=r.getUniformLocation(this.renderTargetProgram_,"u_screenSize"),this.renderTargetOpacityLocation_=r.getUniformLocation(this.renderTargetProgram_,"u_opacity"),this.renderTargetTextureLocation_=r.getUniformLocation(this.renderTargetProgram_,"u_image"),this.uniforms_=[],t.uniforms&&Object.keys(t.uniforms).forEach(function(a){this.uniforms_.push({value:t.uniforms[a],location:r.getUniformLocation(this.renderTargetProgram_,a)})}.bind(this))}return e.prototype.getGL=function(){return this.gl_},e.prototype.init=function(t){var r=this.getGL(),n=[r.drawingBufferWidth*this.scaleRatio_,r.drawingBufferHeight*this.scaleRatio_];if(r.bindFramebuffer(r.FRAMEBUFFER,this.getFrameBuffer()),r.viewport(0,0,n[0],n[1]),!this.renderTargetTextureSize_||this.renderTargetTextureSize_[0]!==n[0]||this.renderTargetTextureSize_[1]!==n[1]){this.renderTargetTextureSize_=n;var o=0,i=r.RGBA,a=0,c=r.RGBA,h=r.UNSIGNED_BYTE,m=null;r.bindTexture(r.TEXTURE_2D,this.renderTargetTexture_),r.texImage2D(r.TEXTURE_2D,o,i,n[0],n[1],a,c,h,m),r.texParameteri(r.TEXTURE_2D,r.TEXTURE_MIN_FILTER,r.LINEAR),r.texParameteri(r.TEXTURE_2D,r.TEXTURE_WRAP_S,r.CLAMP_TO_EDGE),r.texParameteri(r.TEXTURE_2D,r.TEXTURE_WRAP_T,r.CLAMP_TO_EDGE),r.framebufferTexture2D(r.FRAMEBUFFER,r.COLOR_ATTACHMENT0,r.TEXTURE_2D,this.renderTargetTexture_,0)}},e.prototype.apply=function(t,r,n,o){var i=this.getGL(),a=t.size;if(i.bindFramebuffer(i.FRAMEBUFFER,r?r.getFrameBuffer():null),i.activeTexture(i.TEXTURE0),i.bindTexture(i.TEXTURE_2D,this.renderTargetTexture_),!r){var c=es(i.canvas);if(!t.renderTargets[c]){var h=i.getContextAttributes();h&&h.preserveDrawingBuffer&&(i.clearColor(0,0,0,0),i.clear(i.COLOR_BUFFER_BIT)),t.renderTargets[c]=!0}}i.enable(i.BLEND),i.blendFunc(i.ONE,i.ONE_MINUS_SRC_ALPHA),i.viewport(0,0,i.drawingBufferWidth,i.drawingBufferHeight),i.bindBuffer(i.ARRAY_BUFFER,this.renderTargetVerticesBuffer_),i.useProgram(this.renderTargetProgram_),i.enableVertexAttribArray(this.renderTargetAttribLocation_),i.vertexAttribPointer(this.renderTargetAttribLocation_,2,i.FLOAT,!1,0,0),i.uniform2f(this.renderTargetUniformLocation_,a[0],a[1]),i.uniform1i(this.renderTargetTextureLocation_,0);var m=t.layerStatesArray[t.layerIndex].opacity;i.uniform1f(this.renderTargetOpacityLocation_,m),this.applyUniforms(t),n&&n(i,t),i.drawArrays(i.TRIANGLES,0,6),o&&o(i,t)},e.prototype.getFrameBuffer=function(){return this.frameBuffer_},e.prototype.applyUniforms=function(t){var r=this.getGL(),n,o=1;this.uniforms_.forEach(function(i){if(n=typeof i.value=="function"?i.value(t):i.value,n instanceof HTMLCanvasElement||n instanceof ImageData)i.texture||(i.texture=r.createTexture()),r.activeTexture(r["TEXTURE".concat(o)]),r.bindTexture(r.TEXTURE_2D,i.texture),r.texParameteri(r.TEXTURE_2D,r.TEXTURE_MIN_FILTER,r.LINEAR),r.texParameteri(r.TEXTURE_2D,r.TEXTURE_WRAP_S,r.CLAMP_TO_EDGE),r.texParameteri(r.TEXTURE_2D,r.TEXTURE_WRAP_T,r.CLAMP_TO_EDGE),n instanceof ImageData?r.texImage2D(r.TEXTURE_2D,0,r.RGBA,r.RGBA,n.width,n.height,0,r.UNSIGNED_BYTE,new Uint8Array(n.data)):r.texImage2D(r.TEXTURE_2D,0,r.RGBA,r.RGBA,r.UNSIGNED_BYTE,n),r.uniform1i(i.location,o++);else if(Array.isArray(n))switch(n.length){case 2:r.uniform2f(i.location,n[0],n[1]);return;case 3:r.uniform3f(i.location,n[0],n[1],n[2]);return;case 4:r.uniform4f(i.location,n[0],n[1],n[2],n[3]);return;default:return}else typeof n=="number"&&r.uniform1f(i.location,n)})},e}(),upe=Sqr;u();function eU(){return[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1]}function f2(e,t){return e[0]=t[0],e[1]=t[1],e[4]=t[2],e[5]=t[3],e[12]=t[4],e[13]=t[5],e}var Tqr=function(){var e=function(t,r){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,o){n.__proto__=o}||function(n,o){for(var i in o)Object.prototype.hasOwnProperty.call(o,i)&&(n[i]=o[i])},e(t,r)};return function(t,r){if(typeof r!="function"&&r!==null)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");e(t,r);function n(){this.constructor=t}t.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}();var yD={PROJECTION_MATRIX:"u_projectionMatrix",OFFSET_SCALE_MATRIX:"u_offsetScaleMatrix",OFFSET_ROTATION_MATRIX:"u_offsetRotateMatrix",TIME:"u_time",ZOOM:"u_zoom",RESOLUTION:"u_resolution"},d2={UNSIGNED_BYTE:ict,UNSIGNED_SHORT:act,UNSIGNED_INT:sct,FLOAT:ape},tU={};function pct(e){return"shared/"+e}var fct=0;function Iqr(){var e="unique/"+fct;return fct+=1,e}function Mqr(e){var t=tU[e];if(!t){var r=document.createElement("canvas");r.style.position="absolute",r.style.left="0",t={users:0,canvas:r},tU[e]=t}return t.users+=1,t.canvas}function Cqr(e){var t=tU[e];if(t&&(t.users-=1,!(t.users>0))){var r=t.canvas,n=spe(r),o=n.getExtension("WEBGL_lose_context");o&&o.loseContext(),delete tU[e]}}var Aqr=function(e){Tqr(t,e);function t(r){var n=e.call(this)||this,o=r||{};n.boundHandleWebGLContextLost_=n.handleWebGLContextLost.bind(n),n.boundHandleWebGLContextRestored_=n.handleWebGLContextRestored.bind(n),n.canvasCacheKey_=o.canvasCacheKey?pct(o.canvasCacheKey):Iqr(),n.canvas_=Mqr(n.canvasCacheKey_),n.gl_=spe(n.canvas_),n.bufferCache_={},n.extensionCache_={},n.currentProgram_=null,n.canvas_.addEventListener(vD.LOST,n.boundHandleWebGLContextLost_),n.canvas_.addEventListener(vD.RESTORED,n.boundHandleWebGLContextRestored_),n.offsetRotateMatrix_=Bf(),n.offsetScaleMatrix_=Bf(),n.tmpMat4_=eU(),n.uniformLocations_={},n.attribLocations_={},n.uniforms_=[],o.uniforms&&n.setUniforms(o.uniforms);var i=n.getGL();return n.postProcessPasses_=o.postProcesses?o.postProcesses.map(function(a){return new upe({webGlContext:i,scaleRatio:a.scaleRatio,vertexShader:a.vertexShader,fragmentShader:a.fragmentShader,uniforms:a.uniforms})}):[new upe({webGlContext:i})],n.shaderCompileErrors_=null,n.startTime_=Date.now(),n}return t.prototype.setUniforms=function(r){this.uniforms_=[];for(var n in r)this.uniforms_.push({name:n,value:r[n]});this.uniformLocations_={}},t.prototype.canvasCacheKeyMatches=function(r){return this.canvasCacheKey_===pct(r)},t.prototype.getExtension=function(r){if(r in this.extensionCache_)return this.extensionCache_[r];var n=this.gl_.getExtension(r);return this.extensionCache_[r]=n,n},t.prototype.bindBuffer=function(r){var n=this.getGL(),o=es(r),i=this.bufferCache_[o];if(!i){var a=n.createBuffer();i={buffer:r,webGlBuffer:a},this.bufferCache_[o]=i}n.bindBuffer(r.getType(),i.webGlBuffer)},t.prototype.flushBufferData=function(r){var n=this.getGL();this.bindBuffer(r),n.bufferData(r.getType(),r.getArray(),r.getUsage())},t.prototype.deleteBuffer=function(r){var n=this.getGL(),o=es(r),i=this.bufferCache_[o];i&&!n.isContextLost()&&n.deleteBuffer(i.webGlBuffer),delete this.bufferCache_[o]},t.prototype.disposeInternal=function(){this.canvas_.removeEventListener(vD.LOST,this.boundHandleWebGLContextLost_),this.canvas_.removeEventListener(vD.RESTORED,this.boundHandleWebGLContextRestored_),Cqr(this.canvasCacheKey_),delete this.gl_,delete this.canvas_},t.prototype.prepareDraw=function(r,n){var o=this.getGL(),i=this.getCanvas(),a=r.size,c=r.pixelRatio;i.width=a[0]*c,i.height=a[1]*c,i.style.width=a[0]+"px",i.style.height=a[1]+"px",o.useProgram(this.currentProgram_);for(var h=this.postProcessPasses_.length-1;h>=0;h--)this.postProcessPasses_[h].init(r);o.bindTexture(o.TEXTURE_2D,null),o.clearColor(0,0,0,0),o.clear(o.COLOR_BUFFER_BIT),o.enable(o.BLEND),o.blendFunc(o.ONE,n?o.ZERO:o.ONE_MINUS_SRC_ALPHA),o.useProgram(this.currentProgram_),this.applyFrameState(r),this.applyUniforms(r)},t.prototype.prepareDrawToRenderTarget=function(r,n,o){var i=this.getGL(),a=n.getSize();i.bindFramebuffer(i.FRAMEBUFFER,n.getFramebuffer()),i.viewport(0,0,a[0],a[1]),i.bindTexture(i.TEXTURE_2D,n.getTexture()),i.clearColor(0,0,0,0),i.clear(i.COLOR_BUFFER_BIT),i.enable(i.BLEND),i.blendFunc(i.ONE,o?i.ZERO:i.ONE_MINUS_SRC_ALPHA),i.useProgram(this.currentProgram_),this.applyFrameState(r),this.applyUniforms(r)},t.prototype.drawElements=function(r,n){var o=this.getGL();this.getExtension("OES_element_index_uint");var i=o.UNSIGNED_INT,a=4,c=n-r,h=r*a;o.drawElements(o.TRIANGLES,c,i,h)},t.prototype.finalizeDraw=function(r,n,o){for(var i=0,a=this.postProcessPasses_.length;i<a;i++)i===a-1?this.postProcessPasses_[i].apply(r,null,n,o):this.postProcessPasses_[i].apply(r,this.postProcessPasses_[i+1])},t.prototype.getCanvas=function(){return this.canvas_},t.prototype.getGL=function(){return this.gl_},t.prototype.applyFrameState=function(r){var n=r.size,o=r.viewState.rotation,i=r2(this.offsetScaleMatrix_);iD(i,2/n[0],2/n[1]);var a=r2(this.offsetRotateMatrix_);o!==0&&R9(a,-o),this.setUniformMatrixValue(yD.OFFSET_SCALE_MATRIX,f2(this.tmpMat4_,i)),this.setUniformMatrixValue(yD.OFFSET_ROTATION_MATRIX,f2(this.tmpMat4_,a)),this.setUniformFloatValue(yD.TIME,(Date.now()-this.startTime_)*.001),this.setUniformFloatValue(yD.ZOOM,r.viewState.zoom),this.setUniformFloatValue(yD.RESOLUTION,r.viewState.resolution)},t.prototype.applyUniforms=function(r){var n=this.getGL(),o,i=0;this.uniforms_.forEach(function(a){if(o=typeof a.value=="function"?a.value(r):a.value,o instanceof HTMLCanvasElement||o instanceof HTMLImageElement||o instanceof ImageData){a.texture||(a.prevValue=void 0,a.texture=n.createTexture()),n.activeTexture(n["TEXTURE".concat(i)]),n.bindTexture(n.TEXTURE_2D,a.texture),n.texParameteri(n.TEXTURE_2D,n.TEXTURE_MIN_FILTER,n.LINEAR),n.texParameteri(n.TEXTURE_2D,n.TEXTURE_WRAP_S,n.CLAMP_TO_EDGE),n.texParameteri(n.TEXTURE_2D,n.TEXTURE_WRAP_T,n.CLAMP_TO_EDGE);var c=!(o instanceof HTMLImageElement)||o.complete;c&&a.prevValue!==o&&(a.prevValue=o,n.texImage2D(n.TEXTURE_2D,0,n.RGBA,n.RGBA,n.UNSIGNED_BYTE,o)),n.uniform1i(this.getUniformLocation(a.name),i++)}else if(Array.isArray(o)&&o.length===6)this.setUniformMatrixValue(a.name,f2(this.tmpMat4_,o));else if(Array.isArray(o)&&o.length<=4)switch(o.length){case 2:n.uniform2f(this.getUniformLocation(a.name),o[0],o[1]);return;case 3:n.uniform3f(this.getUniformLocation(a.name),o[0],o[1],o[2]);return;case 4:n.uniform4f(this.getUniformLocation(a.name),o[0],o[1],o[2],o[3]);return;default:return}else typeof o=="number"&&n.uniform1f(this.getUniformLocation(a.name),o)}.bind(this))},t.prototype.useProgram=function(r){if(r==this.currentProgram_)return!1;var n=this.getGL();return n.useProgram(r),this.currentProgram_=r,this.uniformLocations_={},this.attribLocations_={},!0},t.prototype.compileShader=function(r,n){var o=this.getGL(),i=o.createShader(n);return o.shaderSource(i,r),o.compileShader(i),i},t.prototype.getProgram=function(r,n){var o=this.getGL(),i=this.compileShader(r,o.FRAGMENT_SHADER),a=this.compileShader(n,o.VERTEX_SHADER),c=o.createProgram();if(o.attachShader(c,i),o.attachShader(c,a),o.linkProgram(c),!o.getShaderParameter(i,o.COMPILE_STATUS)){var h="Fragment shader compliation failed: ".concat(o.getShaderInfoLog(i));throw new Error(h)}if(o.deleteShader(i),!o.getShaderParameter(a,o.COMPILE_STATUS)){var h="Vertex shader compilation failed: ".concat(o.getShaderInfoLog(a));throw new Error(h)}if(o.deleteShader(a),!o.getProgramParameter(c,o.LINK_STATUS)){var h="GL program linking failed: ".concat(o.getShaderInfoLog(a));throw new Error(h)}return c},t.prototype.getUniformLocation=function(r){return this.uniformLocations_[r]===void 0&&(this.uniformLocations_[r]=this.getGL().getUniformLocation(this.currentProgram_,r)),this.uniformLocations_[r]},t.prototype.getAttributeLocation=function(r){return this.attribLocations_[r]===void 0&&(this.attribLocations_[r]=this.getGL().getAttribLocation(this.currentProgram_,r)),this.attribLocations_[r]},t.prototype.makeProjectionTransform=function(r,n){var o=r.size,i=r.viewState.rotation,a=r.viewState.resolution,c=r.viewState.center;return r2(n),K0(n,0,0,2/(a*o[0]),2/(a*o[1]),-i,-c[0],-c[1]),n},t.prototype.setUniformFloatValue=function(r,n){this.getGL().uniform1f(this.getUniformLocation(r),n)},t.prototype.setUniformFloatVec4=function(r,n){this.getGL().uniform4fv(this.getUniformLocation(r),n)},t.prototype.setUniformMatrixValue=function(r,n){this.getGL().uniformMatrix4fv(this.getUniformLocation(r),!1,n)},t.prototype.enableAttributeArray_=function(r,n,o,i,a){var c=this.getAttributeLocation(r);c<0||(this.getGL().enableVertexAttribArray(c),this.getGL().vertexAttribPointer(c,n,o,!1,i,a))},t.prototype.enableAttributes=function(r){for(var n=Oqr(r),o=0,i=0;i<r.length;i++){var a=r[i];this.enableAttributeArray_(a.name,a.size,a.type||ape,n,o),o+=a.size*dct(a.type)}},t.prototype.handleWebGLContextLost=function(){Af(this.bufferCache_),this.currentProgram_=null},t.prototype.handleWebGLContextRestored=function(){},t.prototype.createTexture=function(r,n,o){var i=this.getGL(),a=o||i.createTexture(),c=0,h=i.RGBA,m=0,y=i.RGBA,w=i.UNSIGNED_BYTE;return i.bindTexture(i.TEXTURE_2D,a),n?i.texImage2D(i.TEXTURE_2D,c,h,y,w,n):i.texImage2D(i.TEXTURE_2D,c,h,r[0],r[1],m,y,w,null),i.texParameteri(i.TEXTURE_2D,i.TEXTURE_MIN_FILTER,i.LINEAR),i.texParameteri(i.TEXTURE_2D,i.TEXTURE_WRAP_S,i.CLAMP_TO_EDGE),i.texParameteri(i.TEXTURE_2D,i.TEXTURE_WRAP_T,i.CLAMP_TO_EDGE),a},t}(W0);function Oqr(e){for(var t=0,r=0;r<e.length;r++){var n=e[r];t+=n.size*dct(n.type)}return t}function dct(e){switch(e){case d2.UNSIGNED_BYTE:return Uint8Array.BYTES_PER_ELEMENT;case d2.UNSIGNED_SHORT:return Uint16Array.BYTES_PER_ELEMENT;case d2.UNSIGNED_INT:return Uint32Array.BYTES_PER_ELEMENT;case d2.FLOAT:default:return Float32Array.BYTES_PER_ELEMENT}}var hct=Aqr;var Pqr=function(){var e=function(t,r){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,o){n.__proto__=o}||function(n,o){for(var i in o)Object.prototype.hasOwnProperty.call(o,i)&&(n[i]=o[i])},e(t,r)};return function(t,r){if(typeof r!="function"&&r!==null)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");e(t,r);function n(){this.constructor=t}t.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}();var Dqr=function(e){Pqr(t,e);function t(r,n){var o=e.call(this,r)||this,i=n||{};return o.inversePixelTransform_=Bf(),o.pixelContext_=null,o.postProcesses_=i.postProcesses,o.uniforms_=i.uniforms,o.helper,r.addChangeListener(Oo.MAP,o.removeHelper.bind(o)),o.dispatchPreComposeEvent=o.dispatchPreComposeEvent.bind(o),o.dispatchPostComposeEvent=o.dispatchPostComposeEvent.bind(o),o}return t.prototype.dispatchPreComposeEvent=function(r,n){var o=this.getLayer();if(o.hasListener(xu.PRECOMPOSE)){var i=new l2(xu.PRECOMPOSE,void 0,n,r);o.dispatchEvent(i)}},t.prototype.dispatchPostComposeEvent=function(r,n){var o=this.getLayer();if(o.hasListener(xu.POSTCOMPOSE)){var i=new l2(xu.POSTCOMPOSE,void 0,n,r);o.dispatchEvent(i)}},t.prototype.reset=function(r){this.uniforms_=r.uniforms,this.helper&&this.helper.setUniforms(this.uniforms_)},t.prototype.removeHelper=function(){this.helper&&(this.helper.dispose(),delete this.helper)},t.prototype.prepareFrame=function(r){if(this.getLayer().getRenderSource()){for(var n=!0,o=-1,i=void 0,a=0,c=r.layerStatesArray.length;a<c;a++){var h=r.layerStatesArray[a].layer,m=h.getRenderer();if(!(m instanceof t)){n=!0;continue}var y=h.getClassName();if((n||y!==i)&&(o+=1,n=!1),i=y,m===this)break}var w="map/"+r.mapId+"/group/"+o;(!this.helper||!this.helper.canvasCacheKeyMatches(w))&&(this.removeHelper(),this.helper=new hct({postProcesses:this.postProcesses_,uniforms:this.uniforms_,canvasCacheKey:w}),i&&(this.helper.getCanvas().className=i),this.afterHelperCreated())}return this.prepareFrameInternal(r)},t.prototype.afterHelperCreated=function(){},t.prototype.prepareFrameInternal=function(r){return!0},t.prototype.disposeInternal=function(){this.removeHelper(),e.prototype.disposeInternal.call(this)},t.prototype.dispatchRenderEvent_=function(r,n,o){var i=this.getLayer();if(i.hasListener(r)){K0(this.inversePixelTransform_,0,0,o.pixelRatio,-o.pixelRatio,0,0,-o.size[1]);var a=new l2(r,this.inversePixelTransform_,o,n);i.dispatchEvent(a)}},t.prototype.preRender=function(r,n){this.dispatchRenderEvent_(xu.PRERENDER,r,n)},t.prototype.postRender=function(r,n){this.dispatchRenderEvent_(xu.POSTRENDER,r,n)},t.prototype.getDataAtPixel=function(r,n,o){var i=Z0([n.pixelRatio,0,0,n.pixelRatio,0,0],r.slice()),a=this.helper.getGL();if(!a)return null;var c=this.getLayer(),h=c.getExtent();if(h){var m=Z0(n.pixelToCoordinateTransform,r.slice());if(!Xg(h,m))return null}var y=a.getContextAttributes();if(!y||!y.preserveDrawingBuffer)return new Uint8Array;var w=Math.round(i[0]),E=Math.round(i[1]),A=this.pixelContext_;if(!A){var P=document.createElement("canvas");P.width=1,P.height=1,A=P.getContext("2d"),this.pixelContext_=A}A.clearRect(0,0,1,1);var j;try{A.drawImage(a.canvas,w,E,1,1,0,0,1,1),j=A.getImageData(0,0,1,1).data}catch(D){return j}return j[3]===0?null:j},t}(wut);var mct=Dqr;u();function h2(e,t,r,n){return n!==void 0?(n[0]=e,n[1]=t,n[2]=r,n):[e,t,r]}function Fb(e,t,r){return e+"/"+t+"/"+r}function t1(e){return Fb(e[0],e[1],e[2])}function gct(e){return e.split("/").map(Number)}function vct(e){return(e[1]<<e[0])+e[2]}function yct(e,t){var r=e[0],n=e[1],o=e[2];if(t.getMinZoom()>r||r>t.getMaxZoom())return!1;var i=t.getFullTileRange(r);return i?i.containsXY(n,o):!0}var Nqr=function(){var e=function(t,r){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,o){n.__proto__=o}||function(n,o){for(var i in o)Object.prototype.hasOwnProperty.call(o,i)&&(n[i]=o[i])},e(t,r)};return function(t,r){if(typeof r!="function"&&r!==null)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");e(t,r);function n(){this.constructor=t}t.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),Vn={TILE_TEXTURE_ARRAY:"u_tileTextures",TILE_TRANSFORM:"u_tileTransform",TRANSITION_ALPHA:"u_transitionAlpha",DEPTH:"u_depth",TEXTURE_PIXEL_WIDTH:"u_texturePixelWidth",TEXTURE_PIXEL_HEIGHT:"u_texturePixelHeight",TEXTURE_RESOLUTION:"u_textureResolution",TEXTURE_ORIGIN_X:"u_textureOriginX",TEXTURE_ORIGIN_Y:"u_textureOriginY",RENDER_EXTENT:"u_renderExtent",RESOLUTION:"u_resolution",ZOOM:"u_zoom"},_D={TEXTURE_COORD:"a_textureCoord"},Lqr=[{name:_D.TEXTURE_COORD,size:2,type:d2.FLOAT}],kqr={};function Rqr(e){return 2*(1-1/(e+1))-1}function _ct(e,t,r){r in e||(e[r]=[]),e[r].push(t)}function cpe(e,t){var r=e.layerStatesArray[e.layerIndex];r.extent&&(t=am(t,P0(r.extent,e.viewState.projection)));var n=r.layer.getRenderSource();if(!n.getWrapX()){var o=n.getTileGridForProjection(e.viewState.projection).getExtent();o&&(t=am(t,o))}return t}function ppe(e,t){return"".concat(e.getKey(),",").concat(t1(t))}var jqr=function(e){Nqr(t,e);function t(r,n){var o=e.call(this,r,{uniforms:n.uniforms})||this;o.renderComplete=!1,o.tileTransform_=Bf(),o.tempMat4_=eU(),o.tempTileRange_=new X9(0,0,0,0),o.tempTileCoord_=h2(0,0,0),o.tempSize_=[0,0],o.program_,o.vertexShader_=n.vertexShader,o.fragmentShader_=n.fragmentShader,o.indices_=new Q9(gD,c2),o.indices_.fromArray([0,1,3,1,2,3]);var i=n.cacheSize!==void 0?n.cacheSize:512;return o.tileTextureCache_=new K9(i),o.paletteTextures_=n.paletteTextures||[],o.frameState_=null,o}return t.prototype.reset=function(r){e.prototype.reset.call(this,{uniforms:r.uniforms}),this.vertexShader_=r.vertexShader,this.fragmentShader_=r.fragmentShader,this.paletteTextures_=r.paletteTextures||[],this.helper&&(this.program_=this.helper.getProgram(this.fragmentShader_,this.vertexShader_))},t.prototype.afterHelperCreated=function(){this.program_=this.helper.getProgram(this.fragmentShader_,this.vertexShader_),this.helper.flushBufferData(this.indices_)},t.prototype.isDrawableTile_=function(r){var n=this.getLayer(),o=r.getState(),i=n.getUseInterimTilesOnError();return o==Rr.LOADED||o==Rr.EMPTY||o==Rr.ERROR&&!i},t.prototype.prepareFrameInternal=function(r){var n=this.getLayer(),o=n.getRenderSource();return!o||Eb(cpe(r,r.extent))?!1:o.getState()==="ready"},t.prototype.enqueueTiles=function(r,n,o,i){var a=r.viewState,c=this.getLayer(),h=c.getRenderSource(),m=h.getTileGridForProjection(a.projection),y=h.getGutterForProjection(a.projection),w=es(h);w in r.wantedTiles||(r.wantedTiles[w]={});for(var E=r.wantedTiles[w],A=this.tileTextureCache_,P=Math.max(o-c.getPreload(),m.getMinZoom(),c.getMinZoom()),j=o;j>=P;--j)for(var D=m.getTileRangeForExtentAndZ(n,j,this.tempTileRange_),k=m.getResolution(j),z=D.minX;z<=D.maxX;++z)for(var V=D.minY;V<=D.maxY;++V){var G=h2(j,z,V,this.tempTileCoord_),K=ppe(h,G),Z=void 0,te=void 0;if(A.containsKey(K)&&(Z=A.get(K),te=Z.tile),!Z||Z.tile.key!==h.getKey())if(te=h.getTile(j,z,V,r.pixelRatio,a.projection),!Z)Z=new cct({tile:te,grid:m,helper:this.helper,gutter:y}),A.set(K,Z);else if(this.isDrawableTile_(te))Z.setTile(te);else{var se=te.getInterimTile();Z.setTile(se)}_ct(i,Z,j);var le=te.getKey();E[le]=!0,te.getState()===Rr.IDLE&&(r.tileQueue.isKeyQueued(le)||r.tileQueue.enqueue([te,w,m.getTileCoordCenter(G),k]))}},t.prototype.renderFrame=function(r){this.frameState_=r,this.renderComplete=!0;var n=this.helper.getGL();this.preRender(n,r);var o=r.viewState,i=this.getLayer(),a=i.getRenderSource(),c=a.getTileGridForProjection(o.projection),h=a.getGutterForProjection(o.projection),m=cpe(r,r.extent),y=c.getZForResolution(o.resolution,a.zDirection),w={};if(r.nextExtent){var E=c.getZForResolution(o.nextResolution,a.zDirection),A=cpe(r,r.nextExtent);this.enqueueTiles(r,A,E,w)}this.enqueueTiles(r,m,y,w);for(var P={},j=es(this),D=r.time,k=!1,z=w[y],V=0,G=z.length;V<G;++V){var K=z[V],Z=K.tile,te=Z.tileCoord;if(K.loaded){var se=Z.getAlpha(j,D);if(se===1){Z.endTransition(j);continue}k=!0;var le=t1(te);P[le]=se}this.renderComplete=!1;var pe=this.findAltTiles_(c,te,y+1,w);if(!pe)for(var me=c.getMinZoom(),_e=y-1;_e>=me;--_e){var de=this.findAltTiles_(c,te,_e,w);if(de)break}}this.helper.useProgram(this.program_),this.helper.prepareDraw(r,!k);for(var Ce=Object.keys(w).map(Number).sort(oD),Ye=o.center[0],rt=o.center[1],ct=0,qe=Ce.length;ct<qe;++ct)for(var lt=Ce[ct],bt=c.getResolution(lt),Tt=dl(c.getTileSize(lt),this.tempSize_),et=c.getOrigin(lt),pt=Tt[0]+2*h,ot=Tt[1]+2*h,We=pt/ot,Ne=(Ye-et[0])/(Tt[0]*bt),Ke=(et[1]-rt)/(Tt[1]*bt),Ge=o.resolution/bt,ft=Rqr(lt),mt=w[lt],V=0,G=mt.length;V<G;++V){var K=mt[V];if(K.loaded){var Z=K.tile,te=Z.tileCoord,le=t1(te),Ot=te[1],At=te[2];r2(this.tileTransform_),iD(this.tileTransform_,2/(r.size[0]*Ge/pt),-2/(r.size[1]*Ge/pt)),R9(this.tileTransform_,o.rotation),iD(this.tileTransform_,1,1/We),llt(this.tileTransform_,(Tt[0]*(Ot-Ne)-h)/pt,(Tt[1]*(At-Ke)-h)/ot),this.helper.setUniformMatrixValue(Vn.TILE_TRANSFORM,f2(this.tempMat4_,this.tileTransform_)),this.helper.bindBuffer(K.coords),this.helper.bindBuffer(this.indices_),this.helper.enableAttributes(Lqr);for(var Mt=0;Mt<K.textures.length;){var Yt="TEXTURE"+Mt,qt="".concat(Vn.TILE_TEXTURE_ARRAY,"[").concat(Mt,"]");n.activeTexture(n[Yt]),n.bindTexture(n.TEXTURE_2D,K.textures[Mt]),n.uniform1i(this.helper.getUniformLocation(qt),Mt),++Mt}for(var Ut=0;Ut<this.paletteTextures_.length;++Ut){var sr=this.paletteTextures_[Ut];n.activeTexture(n["TEXTURE"+Mt]);var jr=sr.getTexture(n);n.bindTexture(n.TEXTURE_2D,jr),n.uniform1i(this.helper.getUniformLocation(sr.name),Mt),++Mt}var se=le in P?P[le]:1;se<1&&(r.animate=!0),this.helper.setUniformFloatValue(Vn.TRANSITION_ALPHA,se),this.helper.setUniformFloatValue(Vn.DEPTH,ft),this.helper.setUniformFloatValue(Vn.TEXTURE_PIXEL_WIDTH,pt),this.helper.setUniformFloatValue(Vn.TEXTURE_PIXEL_HEIGHT,ot),this.helper.setUniformFloatValue(Vn.TEXTURE_RESOLUTION,bt),this.helper.setUniformFloatValue(Vn.TEXTURE_ORIGIN_X,et[0]+Ot*Tt[0]*bt-h*bt),this.helper.setUniformFloatValue(Vn.TEXTURE_ORIGIN_Y,et[1]-At*Tt[1]*bt+h*bt);var Pr=m;h>0&&(Pr=c.getTileCoordExtent(te),am(Pr,m,Pr)),this.helper.setUniformFloatVec4(Vn.RENDER_EXTENT,Pr),this.helper.setUniformFloatValue(Vn.RESOLUTION,o.resolution),this.helper.setUniformFloatValue(Vn.ZOOM,o.zoom),this.helper.drawElements(0,this.indices_.getSize())}}this.helper.finalizeDraw(r,this.dispatchPreComposeEvent,this.dispatchPostComposeEvent);for(var br=this.helper.getCanvas(),Dr=this.tileTextureCache_;Dr.canExpireCache();){var K=Dr.pop();K.dispose()}var ke=function(Je,tt){a.expireCache(tt.viewState.projection,kqr)};return r.postRenderFunctions.push(ke),this.postRender(n,r),br},t.prototype.getData=function(r){var n=this.helper.getGL();if(!n)return null;var o=this.frameState_;if(!o)return null;var i=this.getLayer(),a=Z0(o.pixelToCoordinateTransform,r.slice()),c=o.viewState,h=i.getExtent();if(h&&!Xg(P0(h,c.projection),a))return null;var m=i.getSources(n4([a]),c.resolution),y,w,E;for(y=m.length-1;y>=0;--y)if(w=m[y],w.getState()==="ready"){if(E=w.getTileGridForProjection(c.projection),w.getWrapX())break;var A=E.getExtent();if(!A||Xg(A,a))break}if(y<0)return null;for(var P=this.tileTextureCache_,j=E.getZForResolution(c.resolution);j>=E.getMinZoom();--j){var D=E.getTileCoordForCoordAndZ(a,j),k=ppe(w,D);if(P.containsKey(k)){var z=P.get(k);if(z.loaded){var V=E.getOrigin(j),G=dl(E.getTileSize(j)),K=E.getResolution(j),Z=(a[0]-V[0])/K-D[1]*G[0],te=(V[1]-a[1])/K-D[2]*G[1];return z.getPixelData(Z,te)}}}return null},t.prototype.findAltTiles_=function(r,n,o,i){var a=r.getTileRangeForTileCoordAndZ(n,o,this.tempTileRange_);if(!a)return!1;for(var c=!0,h=this.tileTextureCache_,m=this.getLayer().getRenderSource(),y=a.minX;y<=a.maxX;++y)for(var w=a.minY;w<=a.maxY;++w){var E=ppe(m,[o,y,w]),A=!1;if(h.containsKey(E)){var P=h.get(E);P.loaded&&(_ct(i,P,o),A=!0)}A||(c=!1)}return c},t.prototype.removeHelper=function(){if(this.helper){var r=this.tileTextureCache_;r.forEach(function(n){return n.dispose()}),r.clear()}e.prototype.removeHelper.call(this)},t.prototype.disposeInternal=function(){var r=this.helper;if(r){var n=r.getGL();n.deleteProgram(this.program_),delete this.program_,r.deleteBuffer(this.indices_)}e.prototype.disposeInternal.call(this),delete this.indices_,delete this.tileTextureCache_,delete this.frameState_},t}(mct),bct=jqr;u();u();var qqr=function(){function e(t,r){this.name=t,this.data=r,this.texture_=null}return e.prototype.getTexture=function(t){if(!this.texture_){var r=t.createTexture();t.bindTexture(t.TEXTURE_2D,r),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_WRAP_S,t.CLAMP_TO_EDGE),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_WRAP_T,t.CLAMP_TO_EDGE),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_MIN_FILTER,t.NEAREST),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_MAG_FILTER,t.NEAREST),t.texImage2D(t.TEXTURE_2D,0,t.RGBA,this.data.length/4,1,0,t.RGBA,t.UNSIGNED_BYTE,this.data),this.texture_=r}return this.texture_},e}(),xct=qqr;var Cr={NUMBER:1,STRING:2,COLOR:4,BOOLEAN:8,NUMBER_ARRAY:16,ANY:31,NONE:0},oo={};function Cm(e){if(typeof e=="number")return Cr.NUMBER;if(typeof e=="boolean")return Cr.BOOLEAN;if(typeof e=="string")return but(e)?Cr.COLOR|Cr.STRING:Cr.STRING;if(!Array.isArray(e))throw new Error("Unhandled value type: ".concat(JSON.stringify(e)));var t=e,r=t.every(function(o){return typeof o=="number"});if(r)return t.length===3||t.length===4?Cr.COLOR|Cr.NUMBER_ARRAY:Cr.NUMBER_ARRAY;if(typeof t[0]!="string")throw new Error("Expected an expression operator but received: ".concat(JSON.stringify(t)));var n=oo[t[0]];if(n===void 0)throw new Error("Unrecognized expression operator: ".concat(JSON.stringify(t)));return n.getReturnType(t.slice(1))}function zqr(e){return xF(e)%1===0}function rU(e){var t=e.toString();return t.indexOf(".")===-1?t+".0":t}function wct(e){if(e.length<2||e.length>4)throw new Error("`formatArray` can only output `vec2`, `vec3` or `vec4` arrays.");return"vec".concat(e.length,"(").concat(e.map(rU).join(", "),")")}function Fqr(e){var t=_ut(e).slice();return t.length<4&&t.push(1),wct(t.map(function(r,n){return n<3?r/255:r}))}function dpe(e,t){return e.stringLiteralsMap[t]===void 0&&(e.stringLiteralsMap[t]=Object.keys(e.stringLiteralsMap).length),e.stringLiteralsMap[t]}function Uqr(e,t){return rU(dpe(e,t))}function Ur(e,t,r){if(Array.isArray(t)&&typeof t[0]=="string"){var n=oo[t[0]];if(n===void 0)throw new Error("Unrecognized expression operator: ".concat(JSON.stringify(t)));return n.toGlsl(e,t.slice(1),r)}var o=Cm(t);if((o&Cr.NUMBER)>0)return rU(t);if((o&Cr.BOOLEAN)>0)return t.toString();if((o&Cr.STRING)>0&&(r===void 0||r==Cr.STRING))return Uqr(e,t.toString());if((o&Cr.COLOR)>0&&(r===void 0||r==Cr.COLOR))return Fqr(t);if((o&Cr.NUMBER_ARRAY)>0)return wct(t);throw new Error("Unexpected expression ".concat(t," (expected type ").concat(r,")"))}function Ect(e){if(!(Cm(e)&Cr.NUMBER))throw new Error("A numeric value was expected, got ".concat(JSON.stringify(e)," instead"))}function ts(e){for(var t=0;t<e.length;t++)Ect(e[t])}function Sct(e){if(!(Cm(e)&Cr.STRING))throw new Error("A string value was expected, got ".concat(JSON.stringify(e)," instead"))}function hpe(e){if(!(Cm(e)&Cr.BOOLEAN))throw new Error("A boolean value was expected, got ".concat(JSON.stringify(e)," instead"))}function Wi(e,t){if(e.length!==t)throw new Error("Exactly ".concat(t," arguments were expected, got ").concat(e.length," instead"))}function r1(e,t){if(e.length<t)throw new Error("At least ".concat(t," arguments were expected, got ").concat(e.length," instead"))}function nU(e,t){if(e.length>t)throw new Error("At most ".concat(t," arguments were expected, got ").concat(e.length," instead"))}function Tct(e){if(e.length%2!==0)throw new Error("An even amount of arguments was expected, got ".concat(e," instead"))}function Bqr(e){if(e.length%2===0)throw new Error("An odd amount of arguments was expected, got ".concat(e," instead"))}function mpe(e,t){if(!zqr(t))throw new Error("Could not infer only one type from the following expression: ".concat(JSON.stringify(e)))}oo.get={getReturnType:function(e){return Cr.ANY},toGlsl:function(e,t){Wi(t,1),Sct(t[0]);var r=t[0].toString();e.attributes.indexOf(r)===-1&&e.attributes.push(r);var n=e.inFragmentShader?"v_":"a_";return n+r}};function gpe(e){return"u_var_"+e}oo.var={getReturnType:function(e){return Cr.ANY},toGlsl:function(e,t){Wi(t,1),Sct(t[0]);var r=t[0].toString();return e.variables.indexOf(r)===-1&&e.variables.push(r),gpe(r)}};var vpe="u_paletteTextures";oo.palette={getReturnType:function(e){return Cr.COLOR},toGlsl:function(e,t){Wi(t,2),Ect(t[0]);var r=Ur(e,t[0]),n=t[1];if(!Array.isArray(n))throw new Error("The second argument of palette must be an array");for(var o=n.length,i=new Uint8Array(o*4),a=0;a<o;a++){var c=n[a],h=void 0;if(typeof c=="string")h=Hce(c);else{if(!Array.isArray(c))throw new Error("The second argument of palette must be an array of strings or colors");var m=c.length;if(m===4)h=c;else{if(m!==3)throw new Error("Expected palette color to have 3 or 4 values, got ".concat(m));h=[c[0],c[1],c[2],1]}}var y=a*4;i[y]=h[0],i[y+1]=h[1],i[y+2]=h[2],i[y+3]=h[3]*255}e.paletteTextures||(e.paletteTextures=[]);var w="".concat(vpe,"[").concat(e.paletteTextures.length,"]"),E=new xct(w,i);return e.paletteTextures.push(E),"texture2D(".concat(w,", vec2((").concat(r," + 0.5) / ").concat(o,".0, 0.5))")}};var fpe="getBandValue";oo.band={getReturnType:function(e){return Cr.NUMBER},toGlsl:function(e,t){r1(t,1),nU(t,3);var r=t[0];if(!(fpe in e.functions)){for(var n="",o=e.bandCount||1,i=0;i<o;i++){var a=Math.floor(i/4),c=i%4;c===o-1&&c===1&&(c=3);var h="".concat(Vn.TILE_TEXTURE_ARRAY,"[").concat(a,"]");n+=`
          if (band == `.concat(i+1,`.0) {
            return texture2D(`).concat(h,", v_textureCoord + vec2(dx, dy))[").concat(c,`];
          }
        `)}e.functions[fpe]=`
        float getBandValue(float band, float xOffset, float yOffset) {
          float dx = xOffset / `.concat(Vn.TEXTURE_PIXEL_WIDTH,`;
          float dy = yOffset / `).concat(Vn.TEXTURE_PIXEL_HEIGHT,`;
          `).concat(n,`
        }
      `)}var m=Ur(e,r),y=Ur(e,t[1]||0),w=Ur(e,t[2]||0);return"".concat(fpe,"(").concat(m,", ").concat(y,", ").concat(w,")")}};oo.time={getReturnType:function(e){return Cr.NUMBER},toGlsl:function(e,t){return Wi(t,0),"u_time"}};oo.zoom={getReturnType:function(e){return Cr.NUMBER},toGlsl:function(e,t){return Wi(t,0),"u_zoom"}};oo.resolution={getReturnType:function(e){return Cr.NUMBER},toGlsl:function(e,t){return Wi(t,0),"u_resolution"}};oo["*"]={getReturnType:function(e){return Cr.NUMBER},toGlsl:function(e,t){return Wi(t,2),ts(t),"(".concat(Ur(e,t[0])," * ").concat(Ur(e,t[1]),")")}};oo["/"]={getReturnType:function(e){return Cr.NUMBER},toGlsl:function(e,t){return Wi(t,2),ts(t),"(".concat(Ur(e,t[0])," / ").concat(Ur(e,t[1]),")")}};oo["+"]={getReturnType:function(e){return Cr.NUMBER},toGlsl:function(e,t){return Wi(t,2),ts(t),"(".concat(Ur(e,t[0])," + ").concat(Ur(e,t[1]),")")}};oo["-"]={getReturnType:function(e){return Cr.NUMBER},toGlsl:function(e,t){return Wi(t,2),ts(t),"(".concat(Ur(e,t[0])," - ").concat(Ur(e,t[1]),")")}};oo.clamp={getReturnType:function(e){return Cr.NUMBER},toGlsl:function(e,t){Wi(t,3),ts(t);var r=Ur(e,t[1]),n=Ur(e,t[2]);return"clamp(".concat(Ur(e,t[0]),", ").concat(r,", ").concat(n,")")}};oo["%"]={getReturnType:function(e){return Cr.NUMBER},toGlsl:function(e,t){return Wi(t,2),ts(t),"mod(".concat(Ur(e,t[0]),", ").concat(Ur(e,t[1]),")")}};oo["^"]={getReturnType:function(e){return Cr.NUMBER},toGlsl:function(e,t){return Wi(t,2),ts(t),"pow(".concat(Ur(e,t[0]),", ").concat(Ur(e,t[1]),")")}};oo.abs={getReturnType:function(e){return Cr.NUMBER},toGlsl:function(e,t){return Wi(t,1),ts(t),"abs(".concat(Ur(e,t[0]),")")}};oo.floor={getReturnType:function(e){return Cr.NUMBER},toGlsl:function(e,t){return Wi(t,1),ts(t),"floor(".concat(Ur(e,t[0]),")")}};oo.round={getReturnType:function(e){return Cr.NUMBER},toGlsl:function(e,t){return Wi(t,1),ts(t),"floor(".concat(Ur(e,t[0])," + 0.5)")}};oo.ceil={getReturnType:function(e){return Cr.NUMBER},toGlsl:function(e,t){return Wi(t,1),ts(t),"ceil(".concat(Ur(e,t[0]),")")}};oo.sin={getReturnType:function(e){return Cr.NUMBER},toGlsl:function(e,t){return Wi(t,1),ts(t),"sin(".concat(Ur(e,t[0]),")")}};oo.cos={getReturnType:function(e){return Cr.NUMBER},toGlsl:function(e,t){return Wi(t,1),ts(t),"cos(".concat(Ur(e,t[0]),")")}};oo.atan={getReturnType:function(e){return Cr.NUMBER},toGlsl:function(e,t){return r1(t,1),nU(t,2),ts(t),t.length===2?"atan(".concat(Ur(e,t[0]),", ").concat(Ur(e,t[1]),")"):"atan(".concat(Ur(e,t[0]),")")}};oo[">"]={getReturnType:function(e){return Cr.BOOLEAN},toGlsl:function(e,t){return Wi(t,2),ts(t),"(".concat(Ur(e,t[0])," > ").concat(Ur(e,t[1]),")")}};oo[">="]={getReturnType:function(e){return Cr.BOOLEAN},toGlsl:function(e,t){return Wi(t,2),ts(t),"(".concat(Ur(e,t[0])," >= ").concat(Ur(e,t[1]),")")}};oo["<"]={getReturnType:function(e){return Cr.BOOLEAN},toGlsl:function(e,t){return Wi(t,2),ts(t),"(".concat(Ur(e,t[0])," < ").concat(Ur(e,t[1]),")")}};oo["<="]={getReturnType:function(e){return Cr.BOOLEAN},toGlsl:function(e,t){return Wi(t,2),ts(t),"(".concat(Ur(e,t[0])," <= ").concat(Ur(e,t[1]),")")}};function Ict(e){return{getReturnType:function(t){return Cr.BOOLEAN},toGlsl:function(t,r){Wi(r,2);for(var n=Cr.ANY,o=0;o<r.length;o++)n&=Cm(r[o]);if(n===Cr.NONE)throw new Error("All arguments should be of compatible type, got ".concat(JSON.stringify(r)," instead"));return n&=~Cr.COLOR,"(".concat(Ur(t,r[0],n)," ").concat(e," ").concat(Ur(t,r[1],n),")")}}}oo["=="]=Ict("==");oo["!="]=Ict("!=");oo["!"]={getReturnType:function(e){return Cr.BOOLEAN},toGlsl:function(e,t){return Wi(t,1),hpe(t[0]),"(!".concat(Ur(e,t[0]),")")}};function Mct(e){return{getReturnType:function(t){return Cr.BOOLEAN},toGlsl:function(t,r){r1(r,2);for(var n=0;n<r.length;n++)hpe(r[n]);var o="";return o=r.map(function(i){return Ur(t,i)}).join(" ".concat(e," ")),o="(".concat(o,")"),o}}}oo.all=Mct("&&");oo.any=Mct("||");oo.between={getReturnType:function(e){return Cr.BOOLEAN},toGlsl:function(e,t){Wi(t,3),ts(t);var r=Ur(e,t[1]),n=Ur(e,t[2]),o=Ur(e,t[0]);return"(".concat(o," >= ").concat(r," && ").concat(o," <= ").concat(n,")")}};oo.array={getReturnType:function(e){return Cr.NUMBER_ARRAY},toGlsl:function(e,t){r1(t,2),nU(t,4),ts(t);var r=t.map(function(n){return Ur(e,n,Cr.NUMBER)});return"vec".concat(t.length,"(").concat(r.join(", "),")")}};oo.color={getReturnType:function(e){return Cr.COLOR},toGlsl:function(e,t){r1(t,3),nU(t,4),ts(t);var r=t;t.length===3&&r.push(1);var n=t.map(function(o,i){return Ur(e,o,Cr.NUMBER)+(i<3?" / 255.0":"")});return"vec".concat(t.length,"(").concat(n.join(", "),")")}};oo.interpolate={getReturnType:function(e){for(var t=Cr.COLOR|Cr.NUMBER,r=3;r<e.length;r+=2)t=t&Cm(e[r]);return t},toGlsl:function(e,t,r){Tct(t),r1(t,6);var n=t[0],o;switch(n[0]){case"linear":o=1;break;case"exponential":o=n[1];break;default:o=null}if(!o)throw new Error("Invalid interpolation type for \"interpolate\" operator, received: ".concat(JSON.stringify(n)));var i=r!==void 0?r:Cr.ANY,a=oo.interpolate.getReturnType(t)&i;mpe(t,a);for(var c=Ur(e,t[1]),h=rU(o),m="",y=2;y<t.length-2;y+=2){var w=Ur(e,t[y]),E=m||Ur(e,t[y+1],a),A=Ur(e,t[y+2]),P=Ur(e,t[y+3],a);m="mix(".concat(E,", ").concat(P,", pow(clamp((").concat(c," - ").concat(w,") / (").concat(A," - ").concat(w,"), 0.0, 1.0), ").concat(h,"))")}return m}};oo.match={getReturnType:function(e){for(var t=Cr.ANY,r=2;r<e.length;r+=2)t=t&Cm(e[r]);return t=t&Cm(e[e.length-1]),t},toGlsl:function(e,t,r){Tct(t),r1(t,4);var n=r!==void 0?r:Cr.ANY,o=oo.match.getReturnType(t)&n;mpe(t,o);for(var i=Ur(e,t[0]),a=Ur(e,t[t.length-1],o),c=null,h=t.length-3;h>=1;h-=2){var m=Ur(e,t[h]),y=Ur(e,t[h+1],o);c="(".concat(i," == ").concat(m," ? ").concat(y," : ").concat(c||a,")")}return c}};oo.case={getReturnType:function(e){for(var t=Cr.ANY,r=1;r<e.length;r+=2)t=t&Cm(e[r]);return t=t&Cm(e[e.length-1]),t},toGlsl:function(e,t,r){Bqr(t),r1(t,3);var n=r!==void 0?r:Cr.ANY,o=oo.case.getReturnType(t)&n;mpe(t,o);for(var i=0;i<t.length-1;i+=2)hpe(t[i]);for(var a=Ur(e,t[t.length-1],o),c=null,i=t.length-3;i>=0;i-=2){var h=Ur(e,t[i]),m=Ur(e,t[i+1],o);c="(".concat(h," ? ").concat(m," : ").concat(c||a,")")}return c}};var Vqr=function(){var e=function(t,r){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,o){n.__proto__=o}||function(n,o){for(var i in o)Object.prototype.hasOwnProperty.call(o,i)&&(n[i]=o[i])},e(t,r)};return function(t,r){if(typeof r!="function"&&r!==null)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");e(t,r);function n(){this.constructor=t}t.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}();function Cct(e,t){var r=`
    attribute vec2 `.concat(_D.TEXTURE_COORD,`;
    uniform mat4 `).concat(Vn.TILE_TRANSFORM,`;
    uniform float `).concat(Vn.TEXTURE_PIXEL_WIDTH,`;
    uniform float `).concat(Vn.TEXTURE_PIXEL_HEIGHT,`;
    uniform float `).concat(Vn.TEXTURE_RESOLUTION,`;
    uniform float `).concat(Vn.TEXTURE_ORIGIN_X,`;
    uniform float `).concat(Vn.TEXTURE_ORIGIN_Y,`;
    uniform float `).concat(Vn.DEPTH,`;

    varying vec2 v_textureCoord;
    varying vec2 v_mapCoord;

    void main() {
      v_textureCoord = `).concat(_D.TEXTURE_COORD,`;
      v_mapCoord = vec2(
        `).concat(Vn.TEXTURE_ORIGIN_X," + ").concat(Vn.TEXTURE_RESOLUTION," * ").concat(Vn.TEXTURE_PIXEL_WIDTH,` * v_textureCoord[0],
        `).concat(Vn.TEXTURE_ORIGIN_Y," - ").concat(Vn.TEXTURE_RESOLUTION," * ").concat(Vn.TEXTURE_PIXEL_HEIGHT,` * v_textureCoord[1]
      );
      gl_Position = `).concat(Vn.TILE_TRANSFORM," * vec4(").concat(_D.TEXTURE_COORD,", ").concat(Vn.DEPTH,`, 1.0);
    }
  `),n={inFragmentShader:!0,variables:[],attributes:[],stringLiteralsMap:{},functions:{},bandCount:t},o=[];if(e.color!==void 0){var i=Ur(n,e.color,Cr.COLOR);o.push("color = ".concat(i,";"))}if(e.contrast!==void 0){var a=Ur(n,e.contrast,Cr.NUMBER);o.push("color.rgb = clamp((".concat(a," + 1.0) * color.rgb - (").concat(a," / 2.0), vec3(0.0, 0.0, 0.0), vec3(1.0, 1.0, 1.0));"))}if(e.exposure!==void 0){var c=Ur(n,e.exposure,Cr.NUMBER);o.push("color.rgb = clamp((".concat(c," + 1.0) * color.rgb, vec3(0.0, 0.0, 0.0), vec3(1.0, 1.0, 1.0));"))}if(e.saturation!==void 0){var h=Ur(n,e.saturation,Cr.NUMBER);o.push(`
      float saturation = `.concat(h,` + 1.0;
      float sr = (1.0 - saturation) * 0.2126;
      float sg = (1.0 - saturation) * 0.7152;
      float sb = (1.0 - saturation) * 0.0722;
      mat3 saturationMatrix = mat3(
        sr + saturation, sr, sr,
        sg, sg + saturation, sg,
        sb, sb, sb + saturation
      );
      color.rgb = clamp(saturationMatrix * color.rgb, vec3(0.0, 0.0, 0.0), vec3(1.0, 1.0, 1.0));
    `))}if(e.gamma!==void 0){var m=Ur(n,e.gamma,Cr.NUMBER);o.push("color.rgb = pow(color.rgb, vec3(1.0 / ".concat(m,"));"))}if(e.brightness!==void 0){var y=Ur(n,e.brightness,Cr.NUMBER);o.push("color.rgb = clamp(color.rgb + ".concat(y,", vec3(0.0, 0.0, 0.0), vec3(1.0, 1.0, 1.0));"))}var w={},E=n.variables.length;if(E>1&&!e.variables)throw new Error("Missing variables in style (expected ".concat(n.variables,")"));for(var A=function(V){var G=n.variables[V];if(!(G in e.variables))throw new Error("Missing '".concat(G,"' in style variables"));var K=gpe(G);w[K]=function(){var Z=e.variables[G];return typeof Z=="string"&&(Z=dpe(n,Z)),Z!==void 0?Z:-9999999}},P=0;P<E;++P)A(P);var j=Object.keys(w).map(function(V){return"uniform float ".concat(V,";")}),D=Math.ceil(t/4);j.push("uniform sampler2D ".concat(Vn.TILE_TEXTURE_ARRAY,"[").concat(D,"];")),n.paletteTextures&&j.push("uniform sampler2D ".concat(vpe,"[").concat(n.paletteTextures.length,"];"));var k=Object.keys(n.functions).map(function(V){return n.functions[V]}),z=`
    #ifdef GL_FRAGMENT_PRECISION_HIGH
    precision highp float;
    #else
    precision mediump float;
    #endif

    varying vec2 v_textureCoord;
    varying vec2 v_mapCoord;
    uniform vec4 `.concat(Vn.RENDER_EXTENT,`;
    uniform float `).concat(Vn.TRANSITION_ALPHA,`;
    uniform float `).concat(Vn.TEXTURE_PIXEL_WIDTH,`;
    uniform float `).concat(Vn.TEXTURE_PIXEL_HEIGHT,`;
    uniform float `).concat(Vn.RESOLUTION,`;
    uniform float `).concat(Vn.ZOOM,`;

    `).concat(j.join(`
`),`

    `).concat(k.join(`
`),`

    void main() {
      if (
        v_mapCoord[0] < `).concat(Vn.RENDER_EXTENT,`[0] ||
        v_mapCoord[1] < `).concat(Vn.RENDER_EXTENT,`[1] ||
        v_mapCoord[0] > `).concat(Vn.RENDER_EXTENT,`[2] ||
        v_mapCoord[1] > `).concat(Vn.RENDER_EXTENT,`[3]
      ) {
        discard;
      }

      vec4 color = texture2D(`).concat(Vn.TILE_TEXTURE_ARRAY,`[0],  v_textureCoord);

      `).concat(o.join(`
`),`

      if (color.a == 0.0) {
        discard;
      }

      gl_FragColor = color;
      gl_FragColor.rgb *= gl_FragColor.a;
      gl_FragColor *= `).concat(Vn.TRANSITION_ALPHA,`;
    }`);return{vertexShader:r,fragmentShader:z,uniforms:w,paletteTextures:n.paletteTextures}}var Act=function(e){Vqr(t,e);function t(r){var n=this,o=r?Ti({},r):{},i=o.style||{};delete o.style;var a=o.cacheSize;return delete o.cacheSize,n=e.call(this,o)||this,n.sources_=o.sources,n.renderedSource_=null,n.renderedResolution_=NaN,n.style_=i,n.cacheSize_=a,n.styleVariables_=n.style_.variables||{},n.addChangeListener(Oo.SOURCE,n.handleSourceUpdate_),n}return t.prototype.getSources=function(r,n){var o=this.getSource();return this.sources_?typeof this.sources_=="function"?this.sources_(r,n):this.sources_:o?[o]:[]},t.prototype.getRenderSource=function(){return this.renderedSource_||this.getSource()},t.prototype.getSourceState=function(){var r=this.getRenderSource();return r?r.getState():"undefined"},t.prototype.handleSourceUpdate_=function(){this.getSource()&&this.setStyle(this.style_)},t.prototype.getSourceBandCount_=function(){var r=Number.MAX_SAFE_INTEGER,n=this.getSources([-r,-r,r,r],r);return n&&n.length&&"bandCount"in n[0]?n[0].bandCount:4},t.prototype.createRenderer=function(){var r=Cct(this.style_,this.getSourceBandCount_());return new bct(this,{vertexShader:r.vertexShader,fragmentShader:r.fragmentShader,uniforms:r.uniforms,cacheSize:this.cacheSize_,paletteTextures:r.paletteTextures})},t.prototype.renderSources=function(r,n){for(var o=this.getRenderer(),i,a=0,c=n.length;a<c;++a)this.renderedSource_=n[a],o.prepareFrame(r)&&(i=o.renderFrame(r));return i},t.prototype.render=function(r,n){var o=this;this.rendered=!0;for(var i=r.viewState,a=this.getSources(r.extent,i.resolution),c=!0,h=function(A,P){var j=a[A],D=j.getState();if(D=="loading"){var k=function(){j.getState()=="ready"&&(j.removeEventListener("change",k),o.changed())};j.addEventListener("change",k)}c=c&&D=="ready"},m=0,y=a.length;m<y;++m)h(m,y);var w=this.renderSources(r,a);if(this.getRenderer().renderComplete&&c)return this.renderedResolution_=i.resolution,w;if(this.renderedResolution_>.5*i.resolution){var E=this.getSources(r.extent,this.renderedResolution_).filter(function(A){return!a.includes(A)});if(E.length>0)return this.renderSources(r,E)}return w},t.prototype.setStyle=function(r){this.styleVariables_=r.variables||{},this.style_=r;var n=Cct(this.style_,this.getSourceBandCount_()),o=this.getRenderer();o.reset({vertexShader:n.vertexShader,fragmentShader:n.fragmentShader,uniforms:n.uniforms,paletteTextures:n.paletteTextures}),this.changed()},t.prototype.updateStyleVariables=function(r){Ti(this.styleVariables_,r),this.changed()},t}(Wut);Act.prototype.dispose;var Oct=Act;u();u();var Gqr=[0,0,0],n1=5,Hqr=function(){function e(t){this.minZoom=t.minZoom!==void 0?t.minZoom:0,this.resolutions_=t.resolutions,zn(Zst(this.resolutions_,function(a,c){return c-a},!0),17);var r;if(!t.origins){for(var n=0,o=this.resolutions_.length-1;n<o;++n)if(!r)r=this.resolutions_[n]/this.resolutions_[n+1];else if(this.resolutions_[n]/this.resolutions_[n+1]!==r){r=void 0;break}}this.zoomFactor_=r,this.maxZoom=this.resolutions_.length-1,this.origin_=t.origin!==void 0?t.origin:null,this.origins_=null,t.origins!==void 0&&(this.origins_=t.origins,zn(this.origins_.length==this.resolutions_.length,20));var i=t.extent;i!==void 0&&!this.origin_&&!this.origins_&&(this.origin_=A0(i)),zn(!this.origin_&&this.origins_||this.origin_&&!this.origins_,18),this.tileSizes_=null,t.tileSizes!==void 0&&(this.tileSizes_=t.tileSizes,zn(this.tileSizes_.length==this.resolutions_.length,19)),this.tileSize_=t.tileSize!==void 0?t.tileSize:this.tileSizes_?null:e1,zn(!this.tileSize_&&this.tileSizes_||this.tileSize_&&!this.tileSizes_,22),this.extent_=i!==void 0?i:null,this.fullTileRanges_=null,this.tmpSize_=[0,0],this.tmpExtent_=[0,0,0,0],t.sizes!==void 0?this.fullTileRanges_=t.sizes.map(function(a,c){var h=new X9(Math.min(0,a[0]),Math.max(a[0]-1,-1),Math.min(0,a[1]),Math.max(a[1]-1,-1));if(i){var m=this.getTileRangeForExtentAndZ(i,c);h.minX=Math.max(m.minX,h.minX),h.maxX=Math.min(m.maxX,h.maxX),h.minY=Math.max(m.minY,h.minY),h.maxY=Math.min(m.maxY,h.maxY)}return h},this):i&&this.calculateTileRanges_(i)}return e.prototype.forEachTileCoord=function(t,r,n){for(var o=this.getTileRangeForExtentAndZ(t,r),i=o.minX,a=o.maxX;i<=a;++i)for(var c=o.minY,h=o.maxY;c<=h;++c)n([r,i,c])},e.prototype.forEachTileCoordParentTileRange=function(t,r,n,o){var i,a,c,h=null,m=t[0]-1;for(this.zoomFactor_===2?(a=t[1],c=t[2]):h=this.getTileCoordExtent(t,o);m>=this.minZoom;){if(this.zoomFactor_===2?(a=Math.floor(a/2),c=Math.floor(c/2),i=qb(a,a,c,c,n)):i=this.getTileRangeForExtentAndZ(h,m,n),r(m,i))return!0;--m}return!1},e.prototype.getExtent=function(){return this.extent_},e.prototype.getMaxZoom=function(){return this.maxZoom},e.prototype.getMinZoom=function(){return this.minZoom},e.prototype.getOrigin=function(t){return this.origin_?this.origin_:this.origins_[t]},e.prototype.getResolution=function(t){return this.resolutions_[t]},e.prototype.getResolutions=function(){return this.resolutions_},e.prototype.getTileCoordChildTileRange=function(t,r,n){if(t[0]<this.maxZoom){if(this.zoomFactor_===2){var o=t[1]*2,i=t[2]*2;return qb(o,o+1,i,i+1,r)}var a=this.getTileCoordExtent(t,n||this.tmpExtent_);return this.getTileRangeForExtentAndZ(a,t[0]+1,r)}return null},e.prototype.getTileRangeForTileCoordAndZ=function(t,r,n){if(r>this.maxZoom||r<this.minZoom)return null;var o=t[0],i=t[1],a=t[2];if(r===o)return qb(i,a,i,a,n);if(this.zoomFactor_){var c=Math.pow(this.zoomFactor_,r-o),h=Math.floor(i*c),m=Math.floor(a*c);if(r<o)return qb(h,h,m,m,n);var y=Math.floor(c*(i+1))-1,w=Math.floor(c*(a+1))-1;return qb(h,y,m,w,n)}var E=this.getTileCoordExtent(t,this.tmpExtent_);return this.getTileRangeForExtentAndZ(E,r,n)},e.prototype.getTileRangeExtent=function(t,r,n){var o=this.getOrigin(t),i=this.getResolution(t),a=dl(this.getTileSize(t),this.tmpSize_),c=o[0]+r.minX*a[0]*i,h=o[0]+(r.maxX+1)*a[0]*i,m=o[1]+r.minY*a[1]*i,y=o[1]+(r.maxY+1)*a[1]*i;return Jg(c,m,h,y,n)},e.prototype.getTileRangeForExtentAndZ=function(t,r,n){var o=Gqr;this.getTileCoordForXYAndZ_(t[0],t[3],r,!1,o);var i=o[1],a=o[2];return this.getTileCoordForXYAndZ_(t[2],t[1],r,!0,o),qb(i,o[1],a,o[2],n)},e.prototype.getTileCoordCenter=function(t){var r=this.getOrigin(t[0]),n=this.getResolution(t[0]),o=dl(this.getTileSize(t[0]),this.tmpSize_);return[r[0]+(t[1]+.5)*o[0]*n,r[1]-(t[2]+.5)*o[1]*n]},e.prototype.getTileCoordExtent=function(t,r){var n=this.getOrigin(t[0]),o=this.getResolution(t[0]),i=dl(this.getTileSize(t[0]),this.tmpSize_),a=n[0]+t[1]*i[0]*o,c=n[1]-(t[2]+1)*i[1]*o,h=a+i[0]*o,m=c+i[1]*o;return Jg(a,c,h,m,r)},e.prototype.getTileCoordForCoordAndResolution=function(t,r,n){return this.getTileCoordForXYAndResolution_(t[0],t[1],r,!1,n)},e.prototype.getTileCoordForXYAndResolution_=function(t,r,n,o,i){var a=this.getZForResolution(n),c=n/this.getResolution(a),h=this.getOrigin(a),m=dl(this.getTileSize(a),this.tmpSize_),y=c*(t-h[0])/n/m[0],w=c*(h[1]-r)/n/m[1];return o?(y=e4(y,n1)-1,w=e4(w,n1)-1):(y=QP(y,n1),w=QP(w,n1)),h2(a,y,w,i)},e.prototype.getTileCoordForXYAndZ_=function(t,r,n,o,i){var a=this.getOrigin(n),c=this.getResolution(n),h=dl(this.getTileSize(n),this.tmpSize_),m=(t-a[0])/c/h[0],y=(a[1]-r)/c/h[1];return o?(m=e4(m,n1)-1,y=e4(y,n1)-1):(m=QP(m,n1),y=QP(y,n1)),h2(n,m,y,i)},e.prototype.getTileCoordForCoordAndZ=function(t,r,n){return this.getTileCoordForXYAndZ_(t[0],t[1],r,!1,n)},e.prototype.getTileCoordResolution=function(t){return this.resolutions_[t[0]]},e.prototype.getTileSize=function(t){return this.tileSize_?this.tileSize_:this.tileSizes_[t]},e.prototype.getFullTileRange=function(t){return this.fullTileRanges_?this.fullTileRanges_[t]:this.extent_?this.getTileRangeForExtentAndZ(this.extent_,t):null},e.prototype.getZForResolution=function(t,r){var n=JT(this.resolutions_,t,r||0);return Di(n,this.minZoom,this.maxZoom)},e.prototype.tileCoordIntersectsViewport=function(t,r){return jce(r,0,r.length,2,this.getTileCoordExtent(t))},e.prototype.calculateTileRanges_=function(t){for(var r=this.resolutions_.length,n=new Array(r),o=this.minZoom;o<r;++o)n[o]=this.getTileRangeForExtentAndZ(t,o);this.fullTileRanges_=n},e}(),oU=Hqr;u();u();var Wqr=function(){var e=function(t,r){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,o){n.__proto__=o}||function(n,o){for(var i in o)Object.prototype.hasOwnProperty.call(o,i)&&(n[i]=o[i])},e(t,r)};return function(t,r){if(typeof r!="function"&&r!==null)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");e(t,r);function n(){this.constructor=t}t.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),$qr=function(e){Wqr(t,e);function t(){return e!==null&&e.apply(this,arguments)||this}return t.prototype.expireCache=function(r){for(;this.canExpireCache();){var n=this.peekLast();if(n.getKey()in r)break;this.pop().release()}},t.prototype.pruneExceptNewestZ=function(){if(this.getCount()!==0){var r=this.peekFirstKey(),n=gct(r),o=n[0];this.forEach(function(i){i.tileCoord[0]!==o&&(this.remove(t1(i.tileCoord)),i.release())}.bind(this))}},t}(K9),iU=$qr;u();u();var aU={TILELOADSTART:"tileloadstart",TILELOADEND:"tileloadend",TILELOADERROR:"tileloaderror"};u();u();function sU(e){var t=e.getDefaultTileGrid();return t||(t=Kqr(e),e.setDefaultTileGrid(t)),t}function Pct(e,t,r){var n=t[0],o=e.getTileCoordCenter(t),i=Dct(r);if(Xg(i,o))return t;var a=oa(i),c=Math.ceil((i[0]-o[0])/a);return o[0]+=a*c,e.getTileCoordForCoordAndZ(o,n)}function Yqr(e,t,r,n){var o=n!==void 0?n:"top-left",i=Zqr(e,t,r);return new oU({extent:e,origin:ott(e,o),resolutions:i,tileSize:r})}function Zqr(e,t,r,n){for(var o=t!==void 0?t:Lut,i=Bl(e),a=oa(e),c=dl(r!==void 0?r:e1),h=n>0?n:Math.max(a/c[0],i/c[1]),m=o+1,y=new Array(m),w=0;w<m;++w)y[w]=h/Math.pow(2,w);return y}function Kqr(e,t,r,n){var o=Dct(e);return Yqr(o,t,r,n)}function Dct(e){e=qc(e);var t=e.getExtent();if(!t){var r=180*Rc[jc.DEGREES]/e.getMetersPerUnit();t=Jg(-r,-r,r,r)}return t}var Nct=function(){var e=function(t,r){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,o){n.__proto__=o}||function(n,o){for(var i in o)Object.prototype.hasOwnProperty.call(o,i)&&(n[i]=o[i])},e(t,r)};return function(t,r){if(typeof r!="function"&&r!==null)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");e(t,r);function n(){this.constructor=t}t.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),Xqr=function(e){Nct(t,e);function t(r){var n=e.call(this,{attributions:r.attributions,attributionsCollapsible:r.attributionsCollapsible,projection:r.projection,state:r.state,wrapX:r.wrapX,interpolate:r.interpolate})||this;n.on,n.once,n.un,n.opaque_=r.opaque!==void 0?r.opaque:!1,n.tilePixelRatio_=r.tilePixelRatio!==void 0?r.tilePixelRatio:1,n.tileGrid=r.tileGrid!==void 0?r.tileGrid:null;var o=[256,256];return n.tileGrid&&dl(n.tileGrid.getTileSize(n.tileGrid.getMinZoom()),o),n.tileCache=new iU(r.cacheSize||0),n.tmpSize=[0,0],n.key_=r.key||"",n.tileOptions={transition:r.transition,interpolate:r.interpolate},n.zDirection=r.zDirection?r.zDirection:0,n}return t.prototype.canExpireCache=function(){return this.tileCache.canExpireCache()},t.prototype.expireCache=function(r,n){var o=this.getTileCacheForProjection(r);o&&o.expireCache(n)},t.prototype.forEachLoadedTile=function(r,n,o,i){var a=this.getTileCacheForProjection(r);if(!a)return!1;for(var c=!0,h,m,y,w=o.minX;w<=o.maxX;++w)for(var E=o.minY;E<=o.maxY;++E)m=Fb(n,w,E),y=!1,a.containsKey(m)&&(h=a.get(m),y=h.getState()===Rr.LOADED,y&&(y=i(h)!==!1)),y||(c=!1);return c},t.prototype.getGutterForProjection=function(r){return 0},t.prototype.getKey=function(){return this.key_},t.prototype.setKey=function(r){this.key_!==r&&(this.key_=r,this.changed())},t.prototype.getOpaque=function(r){return this.opaque_},t.prototype.getResolutions=function(){return this.tileGrid?this.tileGrid.getResolutions():null},t.prototype.getTile=function(r,n,o,i,a){return Ao()},t.prototype.getTileGrid=function(){return this.tileGrid},t.prototype.getTileGridForProjection=function(r){return this.tileGrid?this.tileGrid:sU(r)},t.prototype.getTileCacheForProjection=function(r){var n=this.getProjection();return zn(n===null||O0(n,r),68),this.tileCache},t.prototype.getTilePixelRatio=function(r){return this.tilePixelRatio_},t.prototype.getTilePixelSize=function(r,n,o){var i=this.getTileGridForProjection(o),a=this.getTilePixelRatio(n),c=dl(i.getTileSize(r),this.tmpSize);return a==1?c:dut(c,a,this.tmpSize)},t.prototype.getTileCoordForTileUrlFunction=function(r,n){var o=n!==void 0?n:this.getProjection(),i=this.getTileGridForProjection(o);return this.getWrapX()&&o.isGlobal()&&(r=Pct(i,r,o)),yct(r,i)?r:null},t.prototype.clear=function(){this.tileCache.clear()},t.prototype.refresh=function(){this.clear(),e.prototype.refresh.call(this)},t.prototype.updateCacheSize=function(r,n){var o=this.getTileCacheForProjection(n);r>o.highWaterMark&&(o.highWaterMark=r)},t.prototype.useTile=function(r,n,o,i){},t}(Iut),Lct=function(e){Nct(t,e);function t(r,n){var o=e.call(this,r)||this;return o.tile=n,o}return t}(_u);var kct=Xqr;u();function Jqr(e,t){var r=/\{z\}/g,n=/\{x\}/g,o=/\{y\}/g,i=/\{-y\}/g;return function(a,c,h){if(a)return e.replace(r,a[0].toString()).replace(n,a[1].toString()).replace(o,a[2].toString()).replace(i,function(){var m=a[0],y=t.getFullTileRange(m);zn(y,55);var w=y.getHeight()-a[2]-1;return w.toString()})}}function Rct(e,t){for(var r=e.length,n=new Array(r),o=0;o<r;++o)n[o]=Jqr(e[o],t);return ype(n)}function ype(e){return e.length===1?e[0]:function(t,r,n){if(t){var o=vct(t),i=Hd(o,e.length);return e[i](t,r,n)}else return}}function lU(e){var t=[],r=/\{([a-z])-([a-z])\}/.exec(e);if(r){var n=r[1].charCodeAt(0),o=r[2].charCodeAt(0),i=void 0;for(i=n;i<=o;++i)t.push(e.replace(r[0],String.fromCharCode(i)));return t}if(r=/\{(\d+)-(\d+)\}/.exec(e),r){for(var a=parseInt(r[2],10),c=parseInt(r[1],10);c<=a;c++)t.push(e.replace(r[0],c.toString()));return t}return t.push(e),t}var Qqr=function(){var e=function(t,r){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,o){n.__proto__=o}||function(n,o){for(var i in o)Object.prototype.hasOwnProperty.call(o,i)&&(n[i]=o[i])},e(t,r)};return function(t,r){if(typeof r!="function"&&r!==null)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");e(t,r);function n(){this.constructor=t}t.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),ezr=function(e){Qqr(t,e);function t(r){var n=e.call(this,{attributions:r.attributions,cacheSize:r.cacheSize,opaque:r.opaque,projection:r.projection,state:r.state,tileGrid:r.tileGrid,tilePixelRatio:r.tilePixelRatio,wrapX:r.wrapX,transition:r.transition,interpolate:r.interpolate,key:r.key,attributionsCollapsible:r.attributionsCollapsible,zDirection:r.zDirection})||this;return n.generateTileUrlFunction_=n.tileUrlFunction===t.prototype.tileUrlFunction,n.tileLoadFunction=r.tileLoadFunction,r.tileUrlFunction&&(n.tileUrlFunction=r.tileUrlFunction),n.urls=null,r.urls?n.setUrls(r.urls):r.url&&n.setUrl(r.url),n.tileLoadingKeys_={},n}return t.prototype.getTileLoadFunction=function(){return this.tileLoadFunction},t.prototype.getTileUrlFunction=function(){return Object.getPrototypeOf(this).tileUrlFunction===this.tileUrlFunction?this.tileUrlFunction.bind(this):this.tileUrlFunction},t.prototype.getUrls=function(){return this.urls},t.prototype.handleTileChange=function(r){var n=r.target,o=es(n),i=n.getState(),a;i==Rr.LOADING?(this.tileLoadingKeys_[o]=!0,a=aU.TILELOADSTART):o in this.tileLoadingKeys_&&(delete this.tileLoadingKeys_[o],a=i==Rr.ERROR?aU.TILELOADERROR:i==Rr.LOADED?aU.TILELOADEND:void 0),a!=null&&this.dispatchEvent(new Lct(a,n))},t.prototype.setTileLoadFunction=function(r){this.tileCache.clear(),this.tileLoadFunction=r,this.changed()},t.prototype.setTileUrlFunction=function(r,n){this.tileUrlFunction=r,this.tileCache.pruneExceptNewestZ(),typeof n!="undefined"?this.setKey(n):this.changed()},t.prototype.setUrl=function(r){var n=lU(r);this.urls=n,this.setUrls(n)},t.prototype.setUrls=function(r){this.urls=r;var n=r.join(`
`);this.generateTileUrlFunction_?this.setTileUrlFunction(Rct(r,this.tileGrid),n):this.setKey(n)},t.prototype.tileUrlFunction=function(r,n,o){},t.prototype.useTile=function(r,n,o){var i=Fb(r,n,o);this.tileCache.containsKey(i)&&this.tileCache.get(i)},t}(kct),jct=ezr;var tzr=function(){var e=function(t,r){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,o){n.__proto__=o}||function(n,o){for(var i in o)Object.prototype.hasOwnProperty.call(o,i)&&(n[i]=o[i])},e(t,r)};return function(t,r){if(typeof r!="function"&&r!==null)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");e(t,r);function n(){this.constructor=t}t.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),rzr=function(e){tzr(t,e);function t(r){var n=this,o=r.imageSmoothing!==void 0?r.imageSmoothing:!0;return r.interpolate!==void 0&&(o=r.interpolate),n=e.call(this,{attributions:r.attributions,cacheSize:r.cacheSize,opaque:r.opaque,projection:r.projection,state:r.state,tileGrid:r.tileGrid,tileLoadFunction:r.tileLoadFunction?r.tileLoadFunction:nzr,tilePixelRatio:r.tilePixelRatio,tileUrlFunction:r.tileUrlFunction,url:r.url,urls:r.urls,wrapX:r.wrapX,transition:r.transition,interpolate:o,key:r.key,attributionsCollapsible:r.attributionsCollapsible,zDirection:r.zDirection})||this,n.crossOrigin=r.crossOrigin!==void 0?r.crossOrigin:null,n.tileClass=r.tileClass!==void 0?r.tileClass:zb,n.tileCacheForProjection={},n.tileGridForProjection={},n.reprojectionErrorThreshold_=r.reprojectionErrorThreshold,n.renderReprojectionEdges_=!1,n}return t.prototype.canExpireCache=function(){if(!Mm)return e.prototype.canExpireCache.call(this);if(this.tileCache.canExpireCache())return!0;for(var r in this.tileCacheForProjection)if(this.tileCacheForProjection[r].canExpireCache())return!0;return!1},t.prototype.expireCache=function(r,n){if(!Mm){e.prototype.expireCache.call(this,r,n);return}var o=this.getTileCacheForProjection(r);this.tileCache.expireCache(this.tileCache==o?n:{});for(var i in this.tileCacheForProjection){var a=this.tileCacheForProjection[i];a.expireCache(a==o?n:{})}},t.prototype.getGutterForProjection=function(r){return Mm&&this.getProjection()&&r&&!O0(this.getProjection(),r)?0:this.getGutter()},t.prototype.getGutter=function(){return 0},t.prototype.getKey=function(){var r=e.prototype.getKey.call(this);return this.getInterpolate()||(r+=":disable-interpolation"),r},t.prototype.getOpaque=function(r){return Mm&&this.getProjection()&&r&&!O0(this.getProjection(),r)?!1:e.prototype.getOpaque.call(this,r)},t.prototype.getTileGridForProjection=function(r){if(!Mm)return e.prototype.getTileGridForProjection.call(this,r);var n=this.getProjection();if(this.tileGrid&&(!n||O0(n,r)))return this.tileGrid;var o=es(r);return o in this.tileGridForProjection||(this.tileGridForProjection[o]=sU(r)),this.tileGridForProjection[o]},t.prototype.getTileCacheForProjection=function(r){if(!Mm)return e.prototype.getTileCacheForProjection.call(this,r);var n=this.getProjection();if(!n||O0(n,r))return this.tileCache;var o=es(r);return o in this.tileCacheForProjection||(this.tileCacheForProjection[o]=new iU(this.tileCache.highWaterMark)),this.tileCacheForProjection[o]},t.prototype.createTile_=function(r,n,o,i,a,c){var h=[r,n,o],m=this.getTileCoordForTileUrlFunction(h,a),y=m?this.tileUrlFunction(m,i,a):void 0,w=new this.tileClass(h,y!==void 0?Rr.IDLE:Rr.EMPTY,y!==void 0?y:"",this.crossOrigin,this.tileLoadFunction,this.tileOptions);return w.key=c,w.addEventListener(kr.CHANGE,this.handleTileChange.bind(this)),w},t.prototype.getTile=function(r,n,o,i,a){var c=this.getProjection();if(!Mm||!c||!a||O0(c,a))return this.getTileInternal(r,n,o,i,c||a);var h=this.getTileCacheForProjection(a),m=[r,n,o],y=void 0,w=t1(m);h.containsKey(w)&&(y=h.get(w));var E=this.getKey();if(y&&y.key==E)return y;var A=this.getTileGridForProjection(c),P=this.getTileGridForProjection(a),j=this.getTileCoordForTileUrlFunction(m,a),D=new J9(c,A,a,P,m,j,this.getTilePixelRatio(i),this.getGutter(),function(k,z,V,G){return this.getTileInternal(k,z,V,G,c)}.bind(this),this.reprojectionErrorThreshold_,this.renderReprojectionEdges_,this.getInterpolate());return D.key=E,y?(D.interimTile=y,D.refreshInterimChain(),h.replace(w,D)):h.set(w,D),D},t.prototype.getTileInternal=function(r,n,o,i,a){var c=null,h=Fb(r,n,o),m=this.getKey();if(!this.tileCache.containsKey(h))c=this.createTile_(r,n,o,i,a,m),this.tileCache.set(h,c);else if(c=this.tileCache.get(h),c.key!=m){var y=c;c=this.createTile_(r,n,o,i,a,m),y.getState()==Rr.IDLE?c.interimTile=y.interimTile:c.interimTile=y,c.refreshInterimChain(),this.tileCache.replace(h,c)}return c},t.prototype.setRenderReprojectionEdges=function(r){if(!(!Mm||this.renderReprojectionEdges_==r)){this.renderReprojectionEdges_=r;for(var n in this.tileCacheForProjection)this.tileCacheForProjection[n].clear();this.changed()}},t.prototype.setTileGridForProjection=function(r,n){if(Mm){var o=qc(r);if(o){var i=es(o);i in this.tileGridForProjection||(this.tileGridForProjection[i]=n)}}},t}(jct);function nzr(e,t){e.getImage().src=t}var qct=rzr;var zct=function(){var e=function(t,r){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,o){n.__proto__=o}||function(n,o){for(var i in o)Object.prototype.hasOwnProperty.call(o,i)&&(n[i]=o[i])},e(t,r)};return function(t,r){if(typeof r!="function"&&r!==null)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");e(t,r);function n(){this.constructor=t}t.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),_pe={DEFAULT:"default",TRUNCATED:"truncated"},ozr=function(e){zct(t,e);function t(r,n,o,i,a,c,h){var m=e.call(this,n,o,i,a,c,h)||this;return m.zoomifyImage_=null,m.tileSize_=r,m}return t.prototype.getImage=function(){if(this.zoomifyImage_)return this.zoomifyImage_;var r=e.prototype.getImage.call(this);if(this.state==Rr.LOADED){var n=this.tileSize_;if(r.width==n[0]&&r.height==n[1])return this.zoomifyImage_=r,r;var o=mv(n[0],n[1]);return o.drawImage(r,0,0),this.zoomifyImage_=o.canvas,o.canvas}else return r},t}(zb);var izr=function(e){zct(t,e);function t(r){var n=this,o=r,i=o.imageSmoothing!==void 0?o.imageSmoothing:!0;o.interpolate!==void 0&&(i=o.interpolate);var a=o.size,c=o.tierSizeCalculation!==void 0?o.tierSizeCalculation:_pe.DEFAULT,h=o.tilePixelRatio||1,m=a[0],y=a[1],w=[],E=o.tileSize||e1,A=E*h;switch(c){case _pe.DEFAULT:for(;m>A||y>A;)w.push([Math.ceil(m/A),Math.ceil(y/A)]),A+=A;break;case _pe.TRUNCATED:for(var P=m,j=y;P>A||j>A;)w.push([Math.ceil(P/A),Math.ceil(j/A)]),P>>=1,j>>=1;break;default:zn(!1,53);break}w.push([1,1]),w.reverse();for(var D=[h],k=[0],z=1,V=w.length;z<V;z++)D.push(h<<z),k.push(w[z-1][0]*w[z-1][1]+k[z-1]);D.reverse();var G=new oU({tileSize:E,extent:o.extent||[0,-y,m,0],resolutions:D}),K=o.url;K&&K.indexOf("{TileGroup}")==-1&&K.indexOf("{tileIndex}")==-1&&(K+="{TileGroup}/{z}-{x}-{y}.jpg");var Z=lU(K),te=E*h;function se(Ce){return function(Ye,rt,ct){if(Ye){var qe=Ye[0],lt=Ye[1],bt=Ye[2],Tt=lt+bt*w[qe][0],et=(Tt+k[qe])/te|0,pt={z:qe,x:lt,y:bt,tileIndex:Tt,TileGroup:"TileGroup"+et};return Ce.replace(/\{(\w+?)\}/g,function(ot,We){return pt[We]})}else return}}var le=ype(Z.map(se)),pe=ozr.bind(null,dl(E*h));n=e.call(this,{attributions:o.attributions,cacheSize:o.cacheSize,crossOrigin:o.crossOrigin,interpolate:i,projection:o.projection,tilePixelRatio:h,reprojectionErrorThreshold:o.reprojectionErrorThreshold,tileClass:pe,tileGrid:G,tileUrlFunction:le,transition:o.transition})||this,n.zDirection=o.zDirection;var me=G.getTileCoordForCoordAndResolution(Wd(G.getExtent()),D[D.length-1]),_e=le(me,1,null),de=new Image;return de.addEventListener("error",function(){te=E,this.changed()}.bind(n)),de.src=_e,n}return t}(qct),Fct=izr;u();var Wc=Q(De(),1),Uct=Q(ba(),1),vv=Q(It(),1);var bD={brightness:0,contrast:0,saturation:0},uU=e=>{let{max:t=1,min:r=0,onChange:n=()=>console.warn("onChange is not implemented."),step:o=.01,type:i="",value:a=.5,tooltip:c}=e,h=m=>{n(i,m)};return Wc.default.createElement("div",{className:"filter-slider",title:c},Wc.default.createElement("span",{className:jt("slider-icon",i),title:c}),Wc.default.createElement("div",null,Wc.default.createElement(a9,{title:c,ariaLabelForHandle:c,max:t,min:r,onChange:h,step:o,value:a})),Wc.default.createElement("span",{className:"slider-tooltip",title:c},a))};uU.propTypes={max:vv.default.number,min:vv.default.number,onChange:vv.default.func,step:vv.default.number,tooltip:vv.default.string,type:vv.default.string,value:vv.default.number};var Bct=e=>{let{layer:t}=e,[r,n]=(0,Wc.useState)(Se({},bD)),o=(a,c)=>{let h=Object.assign({},r,{[a]:c});n(h),t.updateStyleVariables(h)},i=()=>{n(Se({},bD)),t.updateStyleVariables(Se({},bD))};return Wc.default.createElement("div",null,Wc.default.createElement(uU,{max:1,min:-1,onChange:o,step:.01,type:"contrast",value:r.contrast,tooltip:fe("control-imagemanipulation-contrast")}),Wc.default.createElement(uU,{max:1,min:-1,onChange:o,step:.01,type:"saturation",value:r.saturation,tooltip:fe("control-imagemanipulation-saturation")}),Wc.default.createElement(uU,{max:1,min:-1,onChange:o,step:.01,type:"brightness",value:r.brightness,tooltip:fe("control-imagemanipulation-brightness")}),Wc.default.createElement("button",{className:"btn-reset",title:fe("control-imagemanipulation-reset"),onClick:i},fe("control-imagemanipulation-reset")))};Bct.propTypes={layer:vv.default.object};var bpe=class extends Pp{constructor(t){let r="ol-unselectable ol-control image-manipulation",n=document.createElement("div");n.className=r;let o=document.createElement("button");o.title=fe("control-imagemanipulation-open"),o.innerHTML="I",o.type="button",n.appendChild(o);let i=document.createElement("div");i.className="content-container",i.style.display="none",n.appendChild(i);let a=()=>{let c=i.style.display==="block";n.className=c?r:`${r} active`,i.style.display=c?"none":"block"};Uct.default.render(Wc.default.createElement(Bct,{layer:t.layer}),i),o.addEventListener("click",a,!1),o.addEventListener("touchstart",a,!1),super({element:n,target:t.target})}},Vct=bpe;function azr(e){return vt(this,null,function*(){try{let t=yield Ya.get(e);if(t.status===200){let n=new DOMParser().parseFromString(t.data,"text/xml");return{width:parseInt(n.firstChild.attributes.WIDTH.value,0),height:parseInt(n.firstChild.attributes.HEIGHT.value,0),url:e.substring(0,e.lastIndexOf("/")+1)}}else throw new Error("Could not fetch ImageProperties.xml")}catch(t){console.error("Something went wrong while trying to fetch the ImageProperties.xml."),console.error(t)}})}var Gct=e=>{let{className:t="",onLoad:r,urlImageProperties:n,withImageManipulation:o=!1}=e,i=(0,m2.useRef)(null);return(0,m2.useEffect)(()=>{vt(null,null,function*(){let h=yield azr(n),m=new Fct({url:h.url,size:[h.width,h.height],crossOrigin:"anonymous",zDirection:-1}),y=m.getTileGrid().getExtent(),w=new Oct({style:{brightness:["var","brightness"],contrast:["var","contrast"],saturation:["var","saturation"],variables:Se({},bD)},source:m}),E=new Im({resolutions:w.getSource().getTileGrid().getResolutions(),extent:y,constrainOnlyCenter:!0}),A=new Hut({controls:[new Qlt({tipLabel:fe("control-fullscreen-title")}),new Z9({zoomInTipLabel:fe("control-zoom-in"),zoomOutTipLabel:fe("control-zoom-in")})],interactions:$9().extend([new G9]),layers:[w],target:i.current,view:E});E.fit(y,{padding:[50,50,50,50]});let P=A.getSize();A.addControl(new Vut({tipLabel:fe("control-zoomtoextent-title"),extent:E.calculateExtent([P[0]+50,P[1]+50])})),o&&A.addControl(new Vct({layer:w})),r&&r({layer:w,map:A,source:m,zoomifyProps:h})})},[n]),m2.default.createElement("div",{className:jt("vk-mapview-zoomify",t),ref:i})};Gct.propTypes={className:xD.default.string,onLoad:xD.default.func,urlImageProperties:xD.default.string.isRequired,withImageManipulation:xD.default.bool};var Hct=Gct;var Wct=Hct;var $ct=e=>{let{isOpen:t,onClose:r,map_id:n}=e,[o,i]=(0,co.useState)(null),a=()=>{i(null),r()};if((0,co.useEffect)(()=>{n!==void 0&&vt(null,null,function*(){let P=yield HS(n);i(P)})},[n,i]),o===null)return co.default.createElement("div",{className:"vkf-view-original-map container"});let c=o.online_resources,h=c.find(A=>A.type==="Permalink"),m=c.find(A=>A.type==="WMS"),y=c.find(A=>A.type==="WCS"),w=c.find(A=>A.type==="download"),E=o.type==="mosaic";return co.default.createElement(Dc,{key:n,modalClassName:jt("vkf-modal-original-map",o.type),onClose:a,renderContent:()=>co.default.createElement("div",{className:"vkf-view-original-map"},co.default.createElement("div",{className:"title"},co.default.createElement("h1",null,o.title," ",co.default.createElement("small",null,"/ ",o.title_long)),co.default.createElement("div",{className:"header-functions"},!E&&co.default.createElement("a",{href:o.permalink,rel:"noreferrer",className:"btn btn-default",target:"_blank"},fe("originalview-link-slub-label")),w!==void 0&&co.default.createElement("a",{href:w.url,rel:"noreferrer",className:"btn btn-default btn-download",target:"_blank",title:fe("originalview-link-download-label")},fe("originalview-link-download-label")))),o.thumb_url!==void 0&&E&&co.default.createElement("div",null,co.default.createElement("img",{className:"thumbnail",height:200,width:200,src:o.thumb_url})),co.default.createElement("div",{className:"content-metadata"},co.default.createElement("dl",null,co.default.createElement("dt",null,fe("originalview-label-desc")),co.default.createElement("dd",null,o.description),co.default.createElement("dt",null,fe("originalview-label-identifier")),co.default.createElement("dd",null,n),co.default.createElement("dt",null,fe("originalview-label-scale")),co.default.createElement("dd",null,"1:",o.map_scale),h!==void 0&&co.default.createElement(co.default.Fragment,null,co.default.createElement("dt",null,"Permalink"),co.default.createElement("dd",null,co.default.createElement("a",{href:h.url,rel:"noreferrer",target:"_blank"},h.url))),(m!==void 0||y!==void 0)&&co.default.createElement(co.default.Fragment,null,co.default.createElement("dt",null,fe("originalview-label-services")),m!==void 0&&co.default.createElement("dd",null,co.default.createElement("a",{href:m.url,rel:"noreferrer",target:"_blank"},"WMS")),y!==void 0&&co.default.createElement("dd",null,co.default.createElement("a",{href:y.url,rel:"noreferrer",target:"_blank"},"WCS"))))),!E&&co.default.createElement("div",{className:"content-map"},co.default.createElement(Wct,{urlImageProperties:o.zoomify_url,withImageManipulation:!0}))),isOpen:t,title:fe(E?"originalview-title-mosaic":"originalview-title")})};$ct.propTypes={isOpen:cU.default.bool,onClose:cU.default.func,map_id:cU.default.string};var szr=()=>{let[e,t]=mo(Qq);return co.default.createElement($ct,{isOpen:e!==void 0,onClose:()=>t(void 0),map_id:e})},Yct=szr;u();u();var Vb=Q(De(),1),wU=Q(It(),1);u();var $i=Q(De(),1),o1=Q(It(),1);u();var g2=e=>{let t={};for(let r in e.properties)voe.includes(r)||(t[r]=e.properties[r]);return t},lzr=(e,t)=>Object.keys(e).filter(n=>{let o=voe.includes(n),i=!Te(t[n])||t[n]==="";return!o&&i}),Zct=({oldProperties:e,newProperties:t})=>{let r={};for(let[a,c]of Object.entries(t)){let h=c==="",m=a==="";!Te(a)||m||h||(r[a]=c)}let n=lzr(e,t);return{addOrUpdateProperties:Object.entries(r).map(([a,c])=>({key:a,value:c})),removeProperties:n}},nh=e=>{e(xs,Si.NONE),e(Cc,Qs.STANDARD),e($o,null),e(Fg,null),e(nl,null),e(kl,null)},wD=e=>{if(!Te(e))return;let t=structuredClone(e);for(let r of t.features)delete r.id;return t},pU=65535,Kct=(e,t)=>{if(!Te(pU))throw new Error("Cannot generate feature id. MAX_VALUE_UINT_16 is not specified");if(!Te(e)||!Te(t))throw new Error("Cannot generate feature id. Version or index is missing.");if(!Number.isInteger(e)||!Number.isInteger(t))throw new Error("Cannot generate feature id. Version or index is not of type number");if(e>pU||t>pU)throw new Error(`Cannot generate feature id. Version or index is > ${pU}`);let r=new ArrayBuffer(4),n=new DataView(r);return n.setUint16(0,e),n.setUint16(2,t),n.getUint32(0)},Xct=e=>{let t=structuredClone(e);for(let[r,n]of t.features.entries())n.id=Kct(r+1,0);return t},Jct=(e,t,r)=>{let n=structuredClone(t),o=new Set;for(let a of t.features)e.features.find(h=>h.id===a.id)||o.add(a.id);if(o.size===0)return n;let i=n.features.map((a,c)=>o.has(a.id)?Pt(Se({},a),{id:Kct(c+1,r)}):a);return Pt(Se({},n),{features:i})},xpe=(e,t)=>{if(e.response){if(e.response.status===401){t("common-errors-http-401");return}if(e.response.status===403){t("common-errors-http-403");return}if(e.response.status===409){t("common-errors-http-409");return}if(e.response.status===422){t("geojson-draw-error-invalid-input");return}}t("common-errors-unexpected"),console.error(e)},Ub=(e,t)=>{if(e.response){if(e.response.status===401){t("common-errors-http-401");return}if(e.response.status===403){t("common-errors-http-403");return}if(e.response.status===422){t("geojson-external-vector-map-error-invalid-input");return}}t("common-errors-unexpected"),console.error(e)},fU=(e,t)=>{if(!Te(e)||!Te(t)){console.error("Cannot update layer's metadata. Either of the two are not defined.");return}for(let[n,o]of Object.entries(t))e.updateMetadata(n,o);let r=e.getGeoJson();e.updateMetadata(Ue.bounds,MHe(r))};u();u();var wu=Q(De(),1),dU=Q(It(),1),Qct=Q(Xse(),1);var $c={INITIAL:0,IMAGE:1,ERROR:2,PLACEHOLDER:3,LOADING:4},wpe=({imageUrl:e,showPlaceholder:t,imageAsPreview:r})=>{let[n,o]=(0,wu.useState)($c.INITIAL),i=(0,wu.useRef)(e);e!==i.current&&(o($c.INITIAL),i.current=e),n===$c.INITIAL&&(e.length===0&&t?o($c.PLACEHOLDER):o($c.LOADING));let a=n===$c.LOADING||n===$c.IMAGE,c=(0,wu.useMemo)(()=>n===$c.PLACEHOLDER?"placeholder":n===$c.ERROR?"error":"image",[n]);return wu.default.createElement("div",{className:"image-with-fallback-root"},wu.default.createElement("div",{className:`image-container ${c}`},a&&wu.default.createElement(wu.default.Fragment,null,n===$c.LOADING&&wu.default.createElement(Qct.default.default,{height:180}),wu.default.createElement("img",{className:`${r?"preview":""} ${n===$c.LOADING?"loading":""}`,src:e,onLoad:()=>o($c.IMAGE),onError:()=>o($c.ERROR)})),!a&&wu.default.createElement("div",{className:`image-fallback-icon ${c}`},wu.default.createElement(Fr,{name:"image-placeholder"})),n===$c.ERROR&&wu.default.createElement("p",{className:"image-fallback-text"},fe("geojson-image-fallback-p"))))};wpe.defaultPropTypes={imageAsPreview:!1,showPlaceholder:!1,imageUrl:""};wpe.propTypes={imageUrl:dU.default.string,showPlaceholder:dU.default.bool,imageAsPreview:dU.default.bool};var ept=wpe;var Am=ept;u();u();var ED=Q(De(),1);u();u();var Eu=Q(De(),1),hU=Q(It(),1);var tpt=({title:e,onClick:t,value:r})=>{let[n,o]=(0,Eu.useState)(!1),i=(0,Eu.useRef)(),a=(0,Eu.useRef)(),c=(0,Eu.useCallback)(()=>{(t!==void 0&&r===""?t():new Promise(m=>m())).then(m=>{clearTimeout(a.current),navigator.clipboard.writeText(m!==void 0?m:r),o(!0)})},[t,r]);return(0,Eu.useEffect)(()=>(n&&(a.current=setTimeout(()=>{o(!1)},1e3)),()=>{clearTimeout(a.current)}),[n]),Eu.default.createElement(Eu.default.Fragment,null,Eu.default.createElement("button",{className:"copy-button",onClick:c,ref:i,title:e!=null?e:fe("control-permalink-exporter-copy-title")},Eu.default.createElement(Vg,{glyph:"copy"})),Eu.default.createElement(Pae,{placement:"right",target:i.current,show:n},Eu.default.createElement(Uae,{id:"copy-state-indicator"},fe("control-permalink-exporter-copy"))))};tpt.propTypes={title:hU.default.string,onClick:hU.default.func,value:hU.default.string};var rpt=tpt;var v2=rpt;u();u();var mU=e=>{let{center:t,bearing:r,pitch:n,zoom:o}=e;return Object.assign({},t===void 0?null:{c:t},r===void 0?null:{be:r},n===void 0?null:{p:n},o===void 0?null:{z:o})},gU=e=>mr.getBaseMaps().filter(n=>n.id===e).length>0?{b:e}:{},vU=e=>({map_id:e.filter(t=>t.getType()===go.HISTORIC_MAP||t.getMetadata(Ue.vectorMapId)).map(t=>t.getId())}),yU=e=>({v:e?uz["3D"]:uz["2D"]}),npt=({featureId:e,sourceId:t})=>({fid:e,foid:t});var opt=Q(sz(),1);var uzr=()=>ir(({snapshot:e})=>()=>vt(null,null,function*(){let t=yield e.getPromise(Qt),r=yield e.getPromise(el);if(!Te(t)||!Te(r))return;let n=yield e.getPromise(jn),o=yield e.getPromise(xf),i=yU(t.isVkfGlobeModeEnabled()),a=vU(n),c=gU(o),h=mU(VS(t,!0)),m=npt(r),y=(0,opt.stringify)(Object.assign({},h,i,a,m,c),{arrayFormat:"comma"});return Promise.resolve(GS(y))}),[]),ipt=uzr;var czr=()=>{let e=_t(jn),t=_t(el),r=(0,ED.useMemo)(()=>{if(Te(t)&&Te(e)){let{sourceId:o}=t,i=e.find(a=>a.getId()===o);return Te(i==null?void 0:i.getMetadata(Ue.vectorMapId))}return!1},[e,t]),n=ipt();return r?ED.default.createElement("div",{className:"feature-permalink-button-root"},ED.default.createElement(v2,{title:fe("feature-permalink-exporter-copy-title"),onClick:n,value:""})):null},apt=czr;var _U=apt;u();var bU=Q(De(),1);var SD=Q(It(),1),spt=({value:e})=>{let t=`${e}`;return Dd(t)?bU.default.createElement("a",{href:t,target:"_blank",rel:"noreferrer"},bU.default.createElement("p",{className:"geojson-feature-property-link"},t)):bU.default.createElement("p",{className:"geojson-feature-property-text"},t)};spt.propTypes={value:SD.default.oneOfType([SD.default.string,SD.default.number,SD.default.bool]).isRequired};var lpt=spt;var pzr=[...NS],fzr=e=>Te(e)&&e!==""&&typeof e!="object",upt=({feature:e,onClose:t})=>{let r=(0,$i.useMemo)(()=>g2(e),[e]),{defaultTitle:n,defaultDescription:o}=(0,$i.useMemo)(()=>({defaultTitle:fe("geojson-featureview-no-title"),defaultDescription:fe("geojson-featureview-no-description")}),[]),{imageLink:i,title:a,description:c,time:h}=(0,$i.useMemo)(()=>{var A,P;let w=r[Ln.time],E=Te(w)?U0(w):null;return{imageLink:r[Ln.imgLink],title:(A=r[Ln.title])!=null?A:n,description:(P=r[Ln.description])!=null?P:o,time:E}},[r]),m=(0,$i.useMemo)(()=>Te(i)&&i.length>0,[i]),y=(0,$i.useMemo)(()=>Object.entries(r).filter(([w,E])=>!pzr.includes(w)&&fzr(E)),[r]);return $i.default.createElement("div",{className:"geojson-feature-panel-root vkf-feature-panel"},$i.default.createElement(Pf,{extraButton:$i.default.createElement(_U,null),title:fe("geojson-featureview-header-text"),onCloseClick:t}),$i.default.createElement("div",{className:"property-container scrollable"},m&&$i.default.createElement(Am,{imageUrl:i}),$i.default.createElement("div",{className:"predefined-properties-container"},$i.default.createElement("div",{className:"title-section "},$i.default.createElement("span",{className:"geojson-feature-property-label"},fe("geojson-featureview-title")),$i.default.createElement("span",{className:"title"},a)),$i.default.createElement("div",{className:"description-section"},$i.default.createElement("p",{className:"geojson-feature-property-label"},fe("geojson-featureview-description")),$i.default.createElement("p",{className:"geojson-feature-property-text"},c)),h!==null&&$i.default.createElement("div",{className:"time-section"},$i.default.createElement("p",{className:"geojson-feature-property-label"},fe("geojson-featureview-time")),$i.default.createElement("p",{className:"geojson-feature-property-text"},h))),y.length>0&&$i.default.createElement("div",{className:"custom-properties-container"},y.map(([w,E])=>$i.default.createElement("div",{key:w},$i.default.createElement("p",{className:"geojson-feature-property-label"},w),$i.default.createElement(lpt,{value:E}))))))};upt.propTypes={feature:o1.default.shape({id:o1.default.oneOfType([o1.default.number,o1.default.string]).isRequired,geometry:o1.default.object.isRequired,properties:o1.default.object.isRequired}).isRequired,onClose:o1.default.func};var cpt=upt;u();var Po=Q(De(),1),i1=Q(It(),1);u();var Bb=Q(De(),1),Epe=Q(It(),1),ppt=({label:e,value:t=0})=>Bb.default.createElement("div",{className:"certainty-item"},Bb.default.createElement("span",{className:"certainty-label"},e,": "),Bb.default.createElement("span",{className:"value"},`${t*100}%`),Bb.default.createElement("div",{className:"bar"},Bb.default.createElement("div",{className:"track"}),Bb.default.createElement("div",{className:"value",style:{width:`${t*100}%`}})));ppt.propTypes={label:Epe.default.string.isRequired,value:Epe.default.number.isRequired};var xU=ppt;var fpt=({feature:e,onClose:t})=>{let r=(0,Po.useMemo)(()=>g2(e),[e]),{defaultTitle:n,defaultDescription:o}=(0,Po.useMemo)(()=>({defaultTitle:fe("geojson-featureview-no-title"),defaultDescription:fe("geojson-featureview-no-description")}),[]),i=(0,Po.useMemo)(()=>{let P=mr.getSettings().LANGUAGE_CODE===gf.DE?r[ra.timeLabelDe]:r[ra.timeLabelEn];if(Te(P))return P;let j=r[Ln.time];return U0(j)},[r[Ln.time]]),{imageLink:a,title:c,description:h,permalink:m,certainties:y,affiliation:w}=(0,Po.useMemo)(()=>{var j,D,k,z;let A=r[ra.permalink],P=Dd(A)?A:"";return{imageLink:r[Ln.imgLink],title:(j=r[Ln.title])!=null?j:n,description:(D=r[Ln.description])!=null?D:o,tags:(k=r[ra.tags])!=null?k:[],permalink:P,affiliation:(z=r[ra.parentLabel])!=null?z:"",certainties:{spatial:tb(r[ra.spatialCertainty]),content:tb(r[ra.contentCertainty]),temporal:tb(r[ra.temporalCertainty])}}},[r]),E=(0,Po.useMemo)(()=>Te(a)&&a.length>0,[a]);return Po.default.createElement("div",{className:"geojson-feature-panel-root idohist-feature-panel"},Po.default.createElement(Pf,{extraButton:Po.default.createElement(_U,null),title:fe("geojson-featureview-header-text"),onCloseClick:t}),Po.default.createElement("div",{className:"property-container scrollable"},E&&Po.default.createElement(Am,{imageUrl:a}),Po.default.createElement("div",{className:"predefined-properties-container"},Po.default.createElement("div",{className:"title-section "},Po.default.createElement("span",{className:"geojson-feature-property-label"},fe("geojson-featureview-title")),Po.default.createElement("span",{className:"title"},c)),w!==""&&Po.default.createElement("div",{className:"affiliation-section"},Po.default.createElement("p",{className:"geojson-feature-property-label"},fe("idohist-affiliation-label")),Po.default.createElement("p",{className:"affiliation geojson-feature-property-text"},w)),Po.default.createElement("div",{className:"time-section"},Po.default.createElement("p",{className:"geojson-feature-property-label"},fe("idohist-date-label")),Po.default.createElement("p",{className:"time geojson-feature-property-text"},i)),Po.default.createElement("div",{className:"description-section"},Po.default.createElement("p",{className:"geojson-feature-property-label"},fe("geojson-featureview-description")),Po.default.createElement("p",{className:"description geojson-feature-property-text"},h)),m!==""&&Po.default.createElement("div",{className:"permalink-section"},Po.default.createElement("p",{className:"geojson-feature-property-label"},fe("idohist-permalink-label")),Po.default.createElement("a",{href:m,target:"_blank",rel:"noreferrer"},Po.default.createElement("p",{className:"geojson-feature-property-link"},m))),Po.default.createElement("div",{className:"certainties-section"},Po.default.createElement("p",{className:"geojson-feature-property-label"},fe("idohist-certainty-label")),Po.default.createElement("div",{className:"certainty-items"},Po.default.createElement(xU,{label:fe("idohist-certainty-label-spatial"),value:y.spatial}),Po.default.createElement(xU,{label:fe("idohist-certainty-label-temporal"),value:y.temporal}),Po.default.createElement(xU,{label:fe("idohist-certainty-label-content"),value:y.content}))))))};fpt.propTypes={feature:i1.default.shape({id:i1.default.oneOfType([i1.default.number,i1.default.string]).isRequired,geometry:i1.default.object.isRequired,properties:i1.default.object.isRequired}).isRequired,onClose:i1.default.func};var dpt=fpt;var hpt=({contentType:e,geoJsonFeature:t,resetFeature:r})=>{let n=(0,Vb.useCallback)(()=>{r()},[r]);return e===Fu.IDOHIST?Vb.default.createElement(dpt,{feature:t,onClose:n}):Vb.default.createElement(Vb.default.Fragment,null,Vb.default.createElement(cpt,{feature:t,onClose:n}))};hpt.propTypes={geoJsonFeature:wU.default.object.isRequired,resetFeature:wU.default.func.isRequired,contentType:wU.default.string.isRequired};var Spe=hpt;u();u();var TD=Q(It(),1),yv=Q(De(),1);var Tpe=({className:e,Component:t,props:r,onExit:n})=>{let o=(0,yv.useRef)(null),[i,a]=(0,yv.useState)(null),c=Te(r);c&&o.current!==r&&(a(yv.default.createElement(t,Se({},r))),o.current=r);let h=(0,yv.useCallback)(()=>{c||(o.current=null,a(null),n&&n())},[c,n]);return yv.default.createElement("div",{onTransitionEnd:h,className:jt(e,r!==null&&"in")},i)};Tpe.propTypes={className:TD.default.string.isRequired,Component:TD.default.func.isRequired,props:TD.default.object,onExit:TD.default.func};Tpe.defaultPropTypes={props:null};var mpt=Tpe;var a1=mpt;u();var oh=Q(De(),1);var dzr=e=>{var t;return Te((t=e.layer.metadata)==null?void 0:t[_p.id])},EU=(e,t)=>`${e}-${t}`,hzr=(e,t)=>{let{x:r,y:n}=e;return[[r-t,n-t],[r+t,n+t]]},mzr=e=>{let{type:t,id:r,geometry:n}=e,o={};for(let i in e.properties){let a=e.properties[i],c="";try{if(c=JSON.parse(a),typeof c!="object")throw new Error}catch(h){c=a}o[i]=c}return{id:r,geometry:n,properties:o,type:t}},gzr=2;function vzr(){let e=Ir(Rs),t=_t(Qt),r=_t(jn),[n,o]=mo(el),[i,a]=(0,oh.useState)(null),[c,h]=(0,oh.useState)(null),m=(0,oh.useRef)(null),y=(0,oh.useCallback)(()=>{m.current=null,a(null),h(null),o(null)},[]),w=(0,oh.useCallback)(E=>{var D;let{point:A}=E,P=hzr(A,gzr),j=t.queryRenderedFeatures(P).filter(dzr).at(0);if(Te(j)){let{id:k,source:z}=j,{layer:{metadata:V}}=j;if(!Te(k)){e({id:"no-feature-id",type:"warning",text:fe("error-no-feature-id")});return}if(EU(k,z)===m.current)return;o({featureId:k,sourceId:z}),m.current=EU(k,z);let G=(D=V[_p.contentType])!=null?D:Fu.VKF;h(G),a(mzr(j))}else y()},[]);return(0,oh.useEffect)(()=>{if(Te(t))return t.on("click",w),()=>{t.off("click",w)}},[]),(0,oh.useEffect)(()=>{var E;if(!Te(n)){Te(m.current)&&y();return}if(Te(r)&&r.length>0){let{featureId:A,sourceId:P}=n;if(EU(A,P)===m.current)return;let j=r.find(z=>z.getId()===P);if(!Te(j)){console.error(`No layer found with id '${P}'.`),y();return}let D=j.getFeature(A),k=(E=j.getMetadata(Ue.externalContentType))!=null?E:Fu.VKF;if(!Te(D)){console.error(`No feature found with id '${A}'.`),y();return}m.current=EU(A,P),h(k),a(D)}},[r,n]),i===null?null:{contentType:c,geoJsonFeature:i,resetFeature:y}}var gpt=vzr;u();var Sa=Q(De(),1),Gb=Q(It(),1);u();var vpt=Q(De(),1);var ypt=()=>{let{zoomToExtent:e}=k0(),t=ir(({snapshot:n,set:o})=>(i,a)=>vt(null,null,function*(){let c=yield n.getPromise(Qt);if(Te(c)){try{let h={[Ue.title]:i},m=wD(a),y=Wo.fromPersistence({metadata:h,geoJson:m});y.addLayerToMap(c),e(y),o(jn,w=>[...w,y]),o(tl,y.getId())}catch(h){console.log(h),o(Rs,{id:"mapWrapper",type:"danger",text:fe("mapwrapper-geojson-parse-error")})}o(h$e,!1)}}),[e]),r=ir(({set:n})=>(o,i)=>vt(null,null,function*(){let a=wD(i);a=Wo.toApplicationState(a),n(nl,a),n(kl,{[Ue.title]:o}),n($o,{type:Za.REMOTE,id:null,layerRole:"owner"}),n(Cc,Qs.DRAW)}),[]);return(0,vpt.useCallback)((n,o,i)=>i?r(n,o):t(n,o),[t,r])};u();var SU=Q(De(),1);var Ipe=Q(It(),1),_pt=({disabled:e,id:t})=>SU.default.createElement("span",{className:"toggle-switch"},SU.default.createElement("input",{className:"toggle__input",disabled:e,name:t,type:"checkbox",id:t}),SU.default.createElement("div",{className:"toggle__fill"}));_pt.propTypes={disabled:Ipe.default.bool,id:Ipe.default.string.isRequired};var bpt=_pt;var xpt="persistGeoJson",wpt=({onSubmit:e,initialName:t,onClose:r})=>Sa.default.createElement(Sa.default.Fragment,null,Sa.default.createElement("form",{id:"add-geojson-form",onSubmit:e},Sa.default.createElement(f8,null,Sa.default.createElement("p",{className:"adddialog-description"},fe("geojson-adddialog-description")),Sa.default.createElement(Fz,{className:"geojson-label",htmlFor:"title"},fe("geojson-adddialog-layer-title-label")),Sa.default.createElement(Hie,{autoFocus:!0,defaultValue:t!=null?t:"Unknown",name:"title",type:"text",className:"geojson-input"})),Sa.default.createElement(f8,null,Sa.default.createElement(Fz,{className:"switch-label",htmlFor:xpt},Sa.default.createElement(bpt,{disabled:!a7(),id:xpt}),Sa.default.createElement("p",{className:"geojson-label persistent-button-label"},fe("geojson-adddialog-persistent-button-label"))),Sa.default.createElement("div",null,Sa.default.createElement("p",{className:"persistent-button-description"},fe("geojson-adddialog-persistent-description"))))),Sa.default.createElement("div",{className:"add-geojson-buttons"},Sa.default.createElement(rn,{type:"save",form:"add-geojson-form",className:"btn btn-primary confirm-button"},fe("geojson-adddialog-confirm")),Sa.default.createElement(rn,{className:"cancel-button",type:"discard",onClick:r},fe("geojson-adddialog-cancel"))));wpt.propTypes={onSubmit:Gb.default.func.isRequired,initialName:Gb.default.string,onClose:Gb.default.func.isRequired};var Ept=({initialName:e,onClose:t,onSubmit:r})=>Sa.default.createElement(Dc,{isOpen:!0,onClose:t,title:fe("geojson-adddialog-title"),renderContent:()=>Sa.default.createElement(wpt,{initialName:e,onSubmit:r,onClose:t}),modalClassName:"vkf-dialog-add-geojson"});Ept.propTypes={initialName:Gb.default.string,onClose:Gb.default.func.isRequired,onSubmit:Gb.default.func.isRequired};var yzr=()=>{let[e,t]=mo(nz),r=ypt(),n=(0,Sa.useCallback)(()=>{t(null)},[]),o=(0,Sa.useCallback)(i=>{i.preventDefault();let a=new FormData(i.currentTarget),c=a.get("title"),h=a.get("persistGeoJson")==="on";r(c,e.content,h).then(()=>{t(null)})},[r,e,t]);return e?Sa.default.createElement(Ept,{initialName:e.name,onClose:n,onSubmit:o}):null},Spt=yzr;u();var Ms=Q(De(),1),Cpt=Q(It(),1);u();var Tpt=e=>new Promise((t,r)=>{let n=new FileReader;n.onloadend=function(){try{t({content:JSON.parse(this.result),modified:e.lastModified,name:e.name.split(".")[0]})}catch(o){console.log(o),r()}},n.readAsText(e)});u();var s1=Q(De(),1);var Mpe=Q(It(),1),Ipt=({refFileInput:e,onSelectFile:t})=>{let r=(0,s1.useCallback)(o=>{t(o.target.files[0])},[]),n=(0,s1.useCallback)(o=>{o.stopPropagation()},[]);return s1.default.createElement(s1.default.Fragment,null,s1.default.createElement("label",{className:"visually-hidden",htmlFor:"geojson-upload-file"},"GeoJSON Upload"),s1.default.createElement("input",{onClick:n,id:"geojson-upload-file",accept:"application/json, application/geo+json, .geojson",className:"hidden-file-input",type:"file",ref:e,onChange:r}))};Ipt.propTypes={refFileInput:Mpe.default.object.isRequired,onSelectFile:Mpe.default.func.isRequired};var Mpt=Ipt;var Apt=Q(ba(),1),{FILE:_zr}=Xy,bzr={WRONG_FILETYPE:"wrong-filetype"},Opt=()=>{let[e,t]=(0,Ms.useState)(void 0),[r,n]=mo(rz),o=Ir(nz),i=Ir(Rs),a=(0,Ms.useRef)(),c=(0,Ms.useCallback)(P=>{console.error(P),i({id:"mapWrapper",type:"danger",text:fe("mapwrapper-geojson-parse-error")})},[]),h=(0,Ms.useCallback)(()=>{n(!1)},[]),m=(0,Ms.useCallback)(P=>{P.preventDefault(),P.stopPropagation(),a.current!==void 0&&a.current!==null&&(a.current.click(),document.activeElement.blur())},[]),y=(0,Ms.useCallback)(P=>{Tpt(P).then(j=>{o(j),n(!1)}).catch(j=>c(j))},[c]),w=(0,Ms.useMemo)(()=>({accept:_zr,canDrop:()=>r,collect(P){return{canDrop:P.canDrop(),isOver:P.isOver()}},drop:P=>{y(P.files[0])},hover:(P,j)=>{let D=j.getItem();D.items.length>0&&D.items[0].type!=="application/json"&&D.items[0].type!=="application/geo+json"&&t(bzr.WRONG_FILETYPE)}}),[y,r]),[{isOver:E},A]=J6(w);return(0,Ms.useEffect)(()=>{E||t(void 0)},[E]),r?(0,Apt.createPortal)(Ms.default.createElement("div",{className:jt("vkf-dropzone",r&&"animation-show"),ref:A},Ms.default.createElement("div",{className:"dropzone-content-container",onClick:h},Ms.default.createElement("button",{onClick:m,className:"dropzone-content"},Ms.default.createElement(hu,{name:"dropzone-upload"}),Ms.default.createElement("p",{className:jt("dropzone-info",e!==void 0&&"error")},e===void 0?fe("dropzone-drop"):fe(`dropzone-${e}`))),Ms.default.createElement(Mpt,{refFileInput:a,onSelectFile:y}))),document.body):null};Opt.propTypes={children:Cpt.default.node};var Ppt=Opt;var Cpe=()=>{let e=gpt(),{selectedLayer:t}=_t(pu);return Dp.default.createElement(Dp.default.Fragment,null,Dp.default.createElement("div",{className:"vkf-horizontal-layout"},Dp.default.createElement("div",{className:"spatialsearch-container",id:"spatialsearch-container"},Dp.default.createElement($st,null)),Dp.default.createElement(a1,{className:"geojson-feature-panel-container",Component:Spe,props:e}),Dp.default.createElement("div",{className:"layermanagement-container",id:"layermanagement-container"},Dp.default.createElement(m9,null)),Dp.default.createElement(a1,{className:"vkf-geojson-layer-view-root",Component:oat,props:t?{selectedLayer:t}:null})),Dp.default.createElement(Yct,null),Dp.default.createElement(Spt,null),Dp.default.createElement(Ppt,null))};u();var Xf=Q(De(),1);u();u();var Fpe=Q(De(),1);u();u();u();u();var xzr=function(e,t){let r={drag:[],click:[],mousemove:[],mousedown:[],mouseup:[],mouseout:[],keydown:[],keyup:[],touchstart:[],touchmove:[],touchend:[],tap:[]},n={on(i,a,c){if(r[i]===void 0)throw new Error(`Invalid event type: ${i}`);r[i].push({selector:a,fn:c})},render(i){t.store.featureChanged(i)}},o=function(i,a){let c=r[i],h=c.length;for(;h--;){let m=c[h];if(m.selector(a)){m.fn.call(n,a)||t.store.render(),t.ui.updateMapClasses();break}}};return e.start.call(n),{render:e.render,stop(){e.stop&&e.stop()},trash(){e.trash&&(e.trash(),t.store.render())},combineFeatures(){e.combineFeatures&&e.combineFeatures()},uncombineFeatures(){e.uncombineFeatures&&e.uncombineFeatures()},drag(i){o("drag",i)},click(i){o("click",i)},mousemove(i){o("mousemove",i)},mousedown(i){o("mousedown",i)},mouseup(i){o("mouseup",i)},mouseout(i){o("mouseout",i)},keydown(i){o("keydown",i)},keyup(i){o("keyup",i)},touchstart(i){o("touchstart",i)},touchmove(i){o("touchmove",i)},touchend(i){o("touchend",i)},tap(i){o("tap",i)}}},ID=xzr;u();u();u();var qpt=Q(Rpt(),1);var Ii={};uw(Ii,{LAT_MAX:()=>Ezr,LAT_MIN:()=>wzr,LAT_RENDERED_MAX:()=>MU,LAT_RENDERED_MIN:()=>IU,LNG_MAX:()=>Tzr,LNG_MIN:()=>Szr,activeStates:()=>Li,classes:()=>Wl,cursors:()=>ti,events:()=>ja,geojsonTypes:()=>yr,interactions:()=>Dpe,meta:()=>aa,modes:()=>Gn,sources:()=>ec,types:()=>zs,updateActions:()=>l1});u();var Wl={CANVAS:"mapboxgl-canvas",CONTROL_BASE:"mapboxgl-ctrl",CONTROL_PREFIX:"mapboxgl-ctrl-",CONTROL_BUTTON:"mapbox-gl-draw_ctrl-draw-btn",CONTROL_BUTTON_LINE:"mapbox-gl-draw_line",CONTROL_BUTTON_POLYGON:"mapbox-gl-draw_polygon",CONTROL_BUTTON_POINT:"mapbox-gl-draw_point",CONTROL_BUTTON_TRASH:"mapbox-gl-draw_trash",CONTROL_BUTTON_COMBINE_FEATURES:"mapbox-gl-draw_combine",CONTROL_BUTTON_UNCOMBINE_FEATURES:"mapbox-gl-draw_uncombine",CONTROL_GROUP:"mapboxgl-ctrl-group",ATTRIBUTION:"mapboxgl-ctrl-attrib",ACTIVE_BUTTON:"active",BOX_SELECT:"mapbox-gl-draw_boxselect"},ec={HOT:"mapbox-gl-draw-hot",COLD:"mapbox-gl-draw-cold"},ti={ADD:"add",MOVE:"move",DRAG:"drag",POINTER:"pointer",NONE:"none"},zs={POLYGON:"polygon",LINE:"line_string",POINT:"point"},yr={FEATURE:"Feature",POLYGON:"Polygon",LINE_STRING:"LineString",POINT:"Point",FEATURE_COLLECTION:"FeatureCollection",MULTI_PREFIX:"Multi",MULTI_POINT:"MultiPoint",MULTI_LINE_STRING:"MultiLineString",MULTI_POLYGON:"MultiPolygon"},Gn={DRAW_LINE_STRING:"draw_line_string",DRAW_POLYGON:"draw_polygon",DRAW_POINT:"draw_point",SIMPLE_SELECT:"simple_select",DIRECT_SELECT:"direct_select"},ja={CREATE:"draw.create",DELETE:"draw.delete",UPDATE:"draw.update",SELECTION_CHANGE:"draw.selectionchange",MODE_CHANGE:"draw.modechange",ACTIONABLE:"draw.actionable",RENDER:"draw.render",COMBINE_FEATURES:"draw.combine",UNCOMBINE_FEATURES:"draw.uncombine"},l1={MOVE:"move",CHANGE_PROPERTIES:"change_properties",CHANGE_COORDINATES:"change_coordinates"},aa={FEATURE:"feature",MIDPOINT:"midpoint",VERTEX:"vertex"},Li={ACTIVE:"true",INACTIVE:"false"},Dpe=["scrollZoom","boxZoom","dragRotate","dragPan","keyboard","doubleClickZoom","touchZoomRotate"],wzr=-90,IU=-85,Ezr=90,MU=85,Szr=-270,Tzr=270;var jpt={Point:0,LineString:1,MultiLineString:1,Polygon:2};function Izr(e,t){let r=jpt[e.geometry.type]-jpt[t.geometry.type];return r===0&&e.geometry.type===yr.POLYGON?e.area-t.area:r}function Mzr(e){return e.map(t=>(t.geometry.type===yr.POLYGON&&(t.area=qpt.default.geometry({type:yr.FEATURE,property:{},geometry:t.geometry})),t)).sort(Izr).map(t=>(delete t.area,t))}var CU=Mzr;u();function Czr(e,t=0){return[[e.point.x-t,e.point.y-t],[e.point.x+t,e.point.y+t]]}var AU=Czr;u();function y2(e){if(this._items={},this._nums={},this._length=e?e.length:0,!!e)for(let t=0,r=e.length;t<r;t++)this.add(e[t]),e[t]!==void 0&&(typeof e[t]=="string"?this._items[e[t]]=t:this._nums[e[t]]=t)}y2.prototype.add=function(e){return this.has(e)?this:(this._length++,typeof e=="string"?this._items[e]=this._length:this._nums[e]=this._length,this)};y2.prototype.delete=function(e){return this.has(e)===!1?this:(this._length--,delete this._items[e],delete this._nums[e],this)};y2.prototype.has=function(e){return typeof e!="string"&&typeof e!="number"?!1:this._items[e]!==void 0||this._nums[e]!==void 0};y2.prototype.values=function(){let e=[];return Object.keys(this._items).forEach(t=>{e.push({k:t,v:this._items[t]})}),Object.keys(this._nums).forEach(t=>{e.push({k:JSON.parse(t),v:this._nums[t]})}),e.sort((t,r)=>t.v-r.v).map(t=>t.k)};y2.prototype.clear=function(){return this._length=0,this._items={},this._nums={},this};var Hf=y2;var Azr=[aa.FEATURE,aa.MIDPOINT,aa.VERTEX],ih={click:Ozr,touch:Pzr};function Ozr(e,t,r){return zpt(e,t,r,r.options.clickBuffer)}function Pzr(e,t,r){return zpt(e,t,r,r.options.touchBuffer)}function zpt(e,t,r,n){if(r.map===null)return[];let o=e?AU(e,n):t,i={};r.options.styles&&(i.layers=r.options.styles.map(m=>m.id).filter(m=>r.map.getLayer(m)!=null));let a=r.map.queryRenderedFeatures(o,i).filter(m=>Azr.indexOf(m.properties.meta)!==-1),c=new Hf,h=[];return a.forEach(m=>{let y=m.properties.id;c.has(y)||(c.add(y),h.push(m))}),CU(h)}function Hb(e,t){let r=ih.click(e,null,t),n={mouse:ti.NONE};return r[0]&&(n.mouse=r[0].properties.active===Li.ACTIVE?ti.MOVE:ti.POINTER,n.feature=r[0].properties.meta),t.events.currentModeName().indexOf("draw")!==-1&&(n.mouse=ti.ADD),t.ui.queueMapClasses(n),t.ui.updateMapClasses(),r[0]}u();u();function _2(e,t){let r=e.x-t.x,n=e.y-t.y;return Math.sqrt(r*r+n*n)}var Dzr=4,Nzr=12,Lzr=500;function b2(e,t,r={}){let n=r.fineTolerance!=null?r.fineTolerance:Dzr,o=r.grossTolerance!=null?r.grossTolerance:Nzr,i=r.interval!=null?r.interval:Lzr;e.point=e.point||t.point,e.time=e.time||t.time;let a=_2(e.point,t.point);return a<n||a<o&&t.time-e.time<i}u();var kzr=25,Rzr=250;function x2(e,t,r={}){let n=r.tolerance!=null?r.tolerance:kzr,o=r.interval!=null?r.interval:Rzr;return e.point=e.point||t.point,e.time=e.time||t.time,_2(e.point,t.point)<n&&t.time-e.time<o}u();u();u();u();u();u();u();var Fpt=(e,t=21)=>(r=t)=>{let n="",o=r|0;for(;o--;)n+=e[Math.random()*e.length|0];return n};var jzr=Fpt("0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz",32);function w2(){return jzr()}var u1=function(e,t){this.ctx=e,this.properties=t.properties||{},this.coordinates=t.geometry.coordinates,this.id=t.id||w2(),this.type=t.geometry.type};u1.prototype.changed=function(){this.ctx.store.featureChanged(this.id)};u1.prototype.incomingCoords=function(e){this.setCoordinates(e)};u1.prototype.setCoordinates=function(e){this.coordinates=e,this.changed()};u1.prototype.getCoordinates=function(){return JSON.parse(JSON.stringify(this.coordinates))};u1.prototype.setProperty=function(e,t){this.properties[e]=t};u1.prototype.toGeoJSON=function(){return JSON.parse(JSON.stringify({id:this.id,type:yr.FEATURE,properties:this.properties,geometry:{coordinates:this.getCoordinates(),type:this.type}}))};u1.prototype.internal=function(e){let t={id:this.id,meta:aa.FEATURE,"meta:type":this.type,active:Li.INACTIVE,mode:e};if(this.ctx.options.userProperties)for(let r in this.properties)t[`user_${r}`]=this.properties[r];return{type:yr.FEATURE,properties:t,geometry:{coordinates:this.getCoordinates(),type:this.type}}};var Wf=u1;var MD=function(e,t){Wf.call(this,e,t)};MD.prototype=Object.create(Wf.prototype);MD.prototype.isValid=function(){return typeof this.coordinates[0]=="number"&&typeof this.coordinates[1]=="number"};MD.prototype.updateCoordinate=function(e,t,r){arguments.length===3?this.coordinates=[t,r]:this.coordinates=[e,t],this.changed()};MD.prototype.getCoordinate=function(){return this.getCoordinates()};var Wb=MD;u();var $b=function(e,t){Wf.call(this,e,t)};$b.prototype=Object.create(Wf.prototype);$b.prototype.isValid=function(){return this.coordinates.length>1};$b.prototype.addCoordinate=function(e,t,r){this.changed();let n=parseInt(e,10);this.coordinates.splice(n,0,[t,r])};$b.prototype.getCoordinate=function(e){let t=parseInt(e,10);return JSON.parse(JSON.stringify(this.coordinates[t]))};$b.prototype.removeCoordinate=function(e){this.changed(),this.coordinates.splice(parseInt(e,10),1)};$b.prototype.updateCoordinate=function(e,t,r){let n=parseInt(e,10);this.coordinates[n]=[t,r],this.changed()};var Yb=$b;u();var Om=function(e,t){Wf.call(this,e,t),this.coordinates=this.coordinates.map(r=>r.slice(0,-1))};Om.prototype=Object.create(Wf.prototype);Om.prototype.isValid=function(){return this.coordinates.length===0?!1:this.coordinates.every(e=>e.length>2)};Om.prototype.incomingCoords=function(e){this.coordinates=e.map(t=>t.slice(0,-1)),this.changed()};Om.prototype.setCoordinates=function(e){this.coordinates=e,this.changed()};Om.prototype.addCoordinate=function(e,t,r){this.changed();let n=e.split(".").map(i=>parseInt(i,10));this.coordinates[n[0]].splice(n[1],0,[t,r])};Om.prototype.removeCoordinate=function(e){this.changed();let t=e.split(".").map(n=>parseInt(n,10)),r=this.coordinates[t[0]];r&&(r.splice(t[1],1),r.length<3&&this.coordinates.splice(t[0],1))};Om.prototype.getCoordinate=function(e){let t=e.split(".").map(n=>parseInt(n,10)),r=this.coordinates[t[0]];return JSON.parse(JSON.stringify(r[t[1]]))};Om.prototype.getCoordinates=function(){return this.coordinates.map(e=>e.concat([e[0]]))};Om.prototype.updateCoordinate=function(e,t,r){this.changed();let n=e.split("."),o=parseInt(n[0],10),i=parseInt(n[1],10);this.coordinates[o]===void 0&&(this.coordinates[o]=[]),this.coordinates[o][i]=[t,r]};var Zb=Om;u();var qzr={MultiPoint:Wb,MultiLineString:Yb,MultiPolygon:Zb},OU=(e,t,r,n,o)=>{let i=r.split("."),a=parseInt(i[0],10),c=i[1]?i.slice(1).join("."):null;return e[a][t](c,n,o)},ah=function(e,t){if(Wf.call(this,e,t),delete this.coordinates,this.model=qzr[t.geometry.type],this.model===void 0)throw new TypeError(`${t.geometry.type} is not a valid type`);this.features=this._coordinatesToFeatures(t.geometry.coordinates)};ah.prototype=Object.create(Wf.prototype);ah.prototype._coordinatesToFeatures=function(e){let t=this.model.bind(this);return e.map(r=>new t(this.ctx,{id:w2(),type:yr.FEATURE,properties:{},geometry:{coordinates:r,type:this.type.replace("Multi","")}}))};ah.prototype.isValid=function(){return this.features.every(e=>e.isValid())};ah.prototype.setCoordinates=function(e){this.features=this._coordinatesToFeatures(e),this.changed()};ah.prototype.getCoordinate=function(e){return OU(this.features,"getCoordinate",e)};ah.prototype.getCoordinates=function(){return JSON.parse(JSON.stringify(this.features.map(e=>e.type===yr.POLYGON?e.getCoordinates():e.coordinates)))};ah.prototype.updateCoordinate=function(e,t,r){OU(this.features,"updateCoordinate",e,t,r),this.changed()};ah.prototype.addCoordinate=function(e,t,r){OU(this.features,"addCoordinate",e,t,r),this.changed()};ah.prototype.removeCoordinate=function(e){OU(this.features,"removeCoordinate",e),this.changed()};ah.prototype.getFeatures=function(){return this.features};var Kb=ah;function to(e){this.map=e.map,this.drawConfig=JSON.parse(JSON.stringify(e.options||{})),this._ctx=e}to.prototype.setSelected=function(e){return this._ctx.store.setSelected(e)};to.prototype.setSelectedCoordinates=function(e){this._ctx.store.setSelectedCoordinates(e),e.reduce((t,r)=>(t[r.feature_id]===void 0&&(t[r.feature_id]=!0,this._ctx.store.get(r.feature_id).changed()),t),{})};to.prototype.getSelected=function(){return this._ctx.store.getSelected()};to.prototype.getSelectedIds=function(){return this._ctx.store.getSelectedIds()};to.prototype.isSelected=function(e){return this._ctx.store.isSelected(e)};to.prototype.getFeature=function(e){return this._ctx.store.get(e)};to.prototype.select=function(e){return this._ctx.store.select(e)};to.prototype.deselect=function(e){return this._ctx.store.deselect(e)};to.prototype.deleteFeature=function(e,t={}){return this._ctx.store.delete(e,t)};to.prototype.addFeature=function(e,t={}){return this._ctx.store.add(e,t)};to.prototype.clearSelectedFeatures=function(){return this._ctx.store.clearSelected()};to.prototype.clearSelectedCoordinates=function(){return this._ctx.store.clearSelectedCoordinates()};to.prototype.setActionableState=function(e={}){let t={trash:e.trash||!1,combineFeatures:e.combineFeatures||!1,uncombineFeatures:e.uncombineFeatures||!1};return this._ctx.events.actionable(t)};to.prototype.changeMode=function(e,t={},r={}){return this._ctx.events.changeMode(e,t,r)};to.prototype.fire=function(e,t){return this._ctx.events.fire(e,t)};to.prototype.updateUIClasses=function(e){return this._ctx.ui.queueMapClasses(e)};to.prototype.activateUIButton=function(e){return this._ctx.ui.setActiveButton(e)};to.prototype.featuresAt=function(e,t,r="click"){if(r!=="click"&&r!=="touch")throw new Error("invalid buffer type");return ih[r](e,t,this._ctx)};to.prototype.newFeature=function(e){let t=e.geometry.type;return t===yr.POINT?new Wb(this._ctx,e):t===yr.LINE_STRING?new Yb(this._ctx,e):t===yr.POLYGON?new Zb(this._ctx,e):new Kb(this._ctx,e)};to.prototype.isInstanceOf=function(e,t){if(e===yr.POINT)return t instanceof Wb;if(e===yr.LINE_STRING)return t instanceof Yb;if(e===yr.POLYGON)return t instanceof Zb;if(e==="MultiFeature")return t instanceof Kb;throw new Error(`Unknown feature class: ${e}`)};to.prototype.doRender=function(e){return this._ctx.store.featureChanged(e)};var Upt=to;to.prototype.onSetup=function(){};to.prototype.onDrag=function(){};to.prototype.onClick=function(){};to.prototype.onMouseMove=function(){};to.prototype.onMouseDown=function(){};to.prototype.onMouseUp=function(){};to.prototype.onMouseOut=function(){};to.prototype.onKeyUp=function(){};to.prototype.onKeyDown=function(){};to.prototype.onTouchStart=function(){};to.prototype.onTouchMove=function(){};to.prototype.onTouchEnd=function(){};to.prototype.onTap=function(){};to.prototype.onStop=function(){};to.prototype.onTrash=function(){};to.prototype.onCombineFeature=function(){};to.prototype.onUncombineFeature=function(){};to.prototype.toDisplayFeatures=function(){throw new Error("You must overwrite toDisplayFeatures")};var Bpt={drag:"onDrag",click:"onClick",mousemove:"onMouseMove",mousedown:"onMouseDown",mouseup:"onMouseUp",mouseout:"onMouseOut",keyup:"onKeyUp",keydown:"onKeyDown",touchstart:"onTouchStart",touchmove:"onTouchMove",touchend:"onTouchEnd",tap:"onTap"},zzr=Object.keys(Bpt);function Vpt(e){let t=Object.keys(e);return function(r,n={}){let o={},i=t.reduce((c,h)=>(c[h]=e[h],c),new Upt(r));function a(c){return h=>i[c](o,h)}return{start(){o=i.onSetup(n),zzr.forEach(c=>{let h=Bpt[c],m=()=>!1;e[h]&&(m=()=>!0),this.on(c,m,a(h))})},stop(){i.onStop(o)},trash(){i.onTrash(o)},combineFeatures(){i.onCombineFeatures(o)},uncombineFeatures(){i.onUncombineFeatures(o)},render(c,h){i.toDisplayFeatures(o,c,h)}}}}function Gpt(e){let t=Object.keys(e.options.modes).reduce((E,A)=>(E[A]=Vpt(e.options.modes[A]),E),{}),r={},n={},o={},i=null,a=null;o.drag=function(E,A){A({point:E.point,time:new Date().getTime()})?(e.ui.queueMapClasses({mouse:ti.DRAG}),a.drag(E)):E.originalEvent.stopPropagation()},o.mousedrag=function(E){o.drag(E,A=>!b2(r,A))},o.touchdrag=function(E){o.drag(E,A=>!x2(n,A))},o.mousemove=function(E){if((E.originalEvent.buttons!==void 0?E.originalEvent.buttons:E.originalEvent.which)===1)return o.mousedrag(E);let P=Hb(E,e);E.featureTarget=P,a.mousemove(E)},o.mousedown=function(E){r={time:new Date().getTime(),point:E.point};let A=Hb(E,e);E.featureTarget=A,a.mousedown(E)},o.mouseup=function(E){let A=Hb(E,e);E.featureTarget=A,b2(r,{point:E.point,time:new Date().getTime()})?a.click(E):a.mouseup(E)},o.mouseout=function(E){a.mouseout(E)},o.touchstart=function(E){if(!e.options.touchEnabled)return;n={time:new Date().getTime(),point:E.point};let A=ih.touch(E,null,e)[0];E.featureTarget=A,a.touchstart(E)},o.touchmove=function(E){if(e.options.touchEnabled)return a.touchmove(E),o.touchdrag(E)},o.touchend=function(E){if(E.originalEvent.preventDefault(),!e.options.touchEnabled)return;let A=ih.touch(E,null,e)[0];E.featureTarget=A,x2(n,{time:new Date().getTime(),point:E.point})?a.tap(E):a.touchend(E)};let c=E=>!(E===8||E===46||E>=48&&E<=57);o.keydown=function(E){(E.srcElement||E.target).classList.contains(Wl.CANVAS)&&((E.keyCode===8||E.keyCode===46)&&e.options.controls.trash?(E.preventDefault(),a.trash()):c(E.keyCode)?a.keydown(E):E.keyCode===49&&e.options.controls.point?h(Gn.DRAW_POINT):E.keyCode===50&&e.options.controls.line_string?h(Gn.DRAW_LINE_STRING):E.keyCode===51&&e.options.controls.polygon&&h(Gn.DRAW_POLYGON))},o.keyup=function(E){c(E.keyCode)&&a.keyup(E)},o.zoomend=function(){e.store.changeZoom()},o.data=function(E){if(E.dataType==="style"){let{setup:A,map:P,options:j,store:D}=e;j.styles.some(z=>P.getLayer(z.id))||(A.addLayers(),D.setDirty(),D.render())}};function h(E,A,P={}){a.stop();let j=t[E];if(j===void 0)throw new Error(`${E} is not valid`);i=E;let D=j(e,A);a=ID(D,e),P.silent||e.map.fire(ja.MODE_CHANGE,{mode:E}),e.store.setDirty(),e.store.render()}let m={trash:!1,combineFeatures:!1,uncombineFeatures:!1};function y(E){let A=!1;Object.keys(E).forEach(P=>{if(m[P]===void 0)throw new Error("Invalid action type");m[P]!==E[P]&&(A=!0),m[P]=E[P]}),A&&e.map.fire(ja.ACTIONABLE,{actions:m})}return{start(){i=e.options.defaultMode,a=ID(t[i](e),e)},changeMode:h,actionable:y,currentModeName(){return i},currentModeRender(E,A){return a.render(E,A)},fire(E,A){e.map&&e.map.fire(E,A)},addEventListeners(){e.map.on("mousemove",o.mousemove),e.map.on("mousedown",o.mousedown),e.map.on("mouseup",o.mouseup),e.map.on("data",o.data),e.map.on("touchmove",o.touchmove),e.map.on("touchstart",o.touchstart),e.map.on("touchend",o.touchend),e.container.addEventListener("mouseout",o.mouseout),e.options.keybindings&&(e.container.addEventListener("keydown",o.keydown),e.container.addEventListener("keyup",o.keyup))},removeEventListeners(){e.map.off("mousemove",o.mousemove),e.map.off("mousedown",o.mousedown),e.map.off("mouseup",o.mouseup),e.map.off("data",o.data),e.map.off("touchmove",o.touchmove),e.map.off("touchstart",o.touchstart),e.map.off("touchend",o.touchend),e.container.removeEventListener("mouseout",o.mouseout),e.options.keybindings&&(e.container.removeEventListener("keydown",o.keydown),e.container.removeEventListener("keyup",o.keyup))},trash(E){a.trash(E)},combineFeatures(){a.combineFeatures()},uncombineFeatures(){a.uncombineFeatures()},getMode(){return i}}}u();u();function Fzr(e){return[].concat(e).filter(t=>t!==void 0)}var Xb=Fzr;u();function Npe(){let e=this;if(!(e.ctx.map&&e.ctx.map.getSource(ec.HOT)!==void 0))return h();let r=e.ctx.events.currentModeName();e.ctx.ui.queueMapClasses({mode:r});let n=[],o=[];e.isDirty?o=e.getAllIds():(n=e.getChangedIds().filter(m=>e.get(m)!==void 0),o=e.sources.hot.filter(m=>m.properties.id&&n.indexOf(m.properties.id)===-1&&e.get(m.properties.id)!==void 0).map(m=>m.properties.id)),e.sources.hot=[];let i=e.sources.cold.length;e.sources.cold=e.isDirty?[]:e.sources.cold.filter(m=>{let y=m.properties.id||m.properties.parent;return n.indexOf(y)===-1});let a=i!==e.sources.cold.length||o.length>0;n.forEach(m=>c(m,"hot")),o.forEach(m=>c(m,"cold"));function c(m,y){let E=e.get(m).internal(r);e.ctx.events.currentModeRender(E,A=>{A.properties.mode=r,e.sources[y].push(A)})}a&&e.ctx.map.getSource(ec.COLD).setData({type:yr.FEATURE_COLLECTION,features:e.sources.cold}),e.ctx.map.getSource(ec.HOT).setData({type:yr.FEATURE_COLLECTION,features:e.sources.hot}),h();function h(){e.isDirty=!1,e.clearChangedIds()}}function Mi(e){this._features={},this._featureIds=new Hf,this._selectedFeatureIds=new Hf,this._selectedCoordinates=[],this._changedFeatureIds=new Hf,this._emitSelectionChange=!1,this._mapInitialConfig={},this.ctx=e,this.sources={hot:[],cold:[]};let t;this.render=()=>{t||(t=requestAnimationFrame(()=>{t=null,Npe.call(this),this._emitSelectionChange&&(this.ctx.events.fire(ja.SELECTION_CHANGE,{features:this.getSelected().map(r=>r.toGeoJSON()),points:this.getSelectedCoordinates().map(r=>({type:yr.FEATURE,properties:{},geometry:{type:yr.POINT,coordinates:r.coordinates}}))}),this._emitSelectionChange=!1),this.ctx.events.fire(ja.RENDER,{})}))},this.isDirty=!1}Mi.prototype.createRenderBatch=function(){let e=this.render,t=0;return this.render=function(){t++},()=>{this.render=e,t>0&&this.render()}};Mi.prototype.setDirty=function(){return this.isDirty=!0,this};Mi.prototype.featureCreated=function(e,t={}){if(this._changedFeatureIds.add(e),(t.silent!=null?t.silent:this.ctx.options.suppressAPIEvents)!==!0){let n=this.get(e);this.ctx.events.fire(ja.CREATE,{features:[n.toGeoJSON()]})}return this};Mi.prototype.featureChanged=function(e,t={}){return this._changedFeatureIds.add(e),(t.silent!=null?t.silent:this.ctx.options.suppressAPIEvents)!==!0&&this.ctx.events.fire(ja.UPDATE,{action:t.action?t.action:l1.CHANGE_COORDINATES,features:[this.get(e).toGeoJSON()]}),this};Mi.prototype.getChangedIds=function(){return this._changedFeatureIds.values()};Mi.prototype.clearChangedIds=function(){return this._changedFeatureIds.clear(),this};Mi.prototype.getAllIds=function(){return this._featureIds.values()};Mi.prototype.add=function(e,t={}){return this._features[e.id]=e,this._featureIds.add(e.id),this.featureCreated(e.id,{silent:t.silent}),this};Mi.prototype.delete=function(e,t={}){let r=[];return Xb(e).forEach(n=>{this._featureIds.has(n)&&(this._featureIds.delete(n),this._selectedFeatureIds.delete(n),t.silent||r.indexOf(this._features[n])===-1&&r.push(this._features[n].toGeoJSON()),delete this._features[n],this.isDirty=!0)}),r.length&&this.ctx.events.fire(ja.DELETE,{features:r}),Hpt(this,t),this};Mi.prototype.get=function(e){return this._features[e]};Mi.prototype.getAll=function(){return Object.keys(this._features).map(e=>this._features[e])};Mi.prototype.select=function(e,t={}){return Xb(e).forEach(r=>{this._selectedFeatureIds.has(r)||(this._selectedFeatureIds.add(r),this._changedFeatureIds.add(r),t.silent||(this._emitSelectionChange=!0))}),this};Mi.prototype.deselect=function(e,t={}){return Xb(e).forEach(r=>{this._selectedFeatureIds.has(r)&&(this._selectedFeatureIds.delete(r),this._changedFeatureIds.add(r),t.silent||(this._emitSelectionChange=!0))}),Hpt(this,t),this};Mi.prototype.clearSelected=function(e={}){return this.deselect(this._selectedFeatureIds.values(),{silent:e.silent}),this};Mi.prototype.setSelected=function(e,t={}){return e=Xb(e),this.deselect(this._selectedFeatureIds.values().filter(r=>e.indexOf(r)===-1),{silent:t.silent}),this.select(e.filter(r=>!this._selectedFeatureIds.has(r)),{silent:t.silent}),this};Mi.prototype.setSelectedCoordinates=function(e){return this._selectedCoordinates=e,this._emitSelectionChange=!0,this};Mi.prototype.clearSelectedCoordinates=function(){return this._selectedCoordinates=[],this._emitSelectionChange=!0,this};Mi.prototype.getSelectedIds=function(){return this._selectedFeatureIds.values()};Mi.prototype.getSelected=function(){return this.getSelectedIds().map(e=>this.get(e))};Mi.prototype.getSelectedCoordinates=function(){return this._selectedCoordinates.map(t=>({coordinates:this.get(t.feature_id).getCoordinate(t.coord_path)}))};Mi.prototype.isSelected=function(e){return this._selectedFeatureIds.has(e)};Mi.prototype.setFeatureProperty=function(e,t,r,n={}){this.get(e).setProperty(t,r),this.featureChanged(e,{silent:n.silent,action:l1.CHANGE_PROPERTIES})};function Hpt(e,t={}){let r=e._selectedCoordinates.filter(n=>e._selectedFeatureIds.has(n.feature_id));e._selectedCoordinates.length!==r.length&&!t.silent&&(e._emitSelectionChange=!0),e._selectedCoordinates=r}Mi.prototype.storeMapConfig=function(){Dpe.forEach(e=>{this.ctx.map[e]&&(this._mapInitialConfig[e]=this.ctx.map[e].isEnabled())})};Mi.prototype.restoreMapConfig=function(){Object.keys(this._mapInitialConfig).forEach(e=>{this._mapInitialConfig[e]?this.ctx.map[e].enable():this.ctx.map[e].disable()})};Mi.prototype.getInitialConfigValue=function(e){return this._mapInitialConfig[e]!==void 0?this._mapInitialConfig[e]:!0};u();var Uzr=["mode","feature","mouse"];function Wpt(e){let t={},r=null,n={mode:null,feature:null,mouse:null},o={mode:null,feature:null,mouse:null};function i(){a({mode:null,feature:null,mouse:null}),c()}function a(A){o=Object.assign(o,A)}function c(){if(!e.container)return;let A=[],P=[];Uzr.forEach(j=>{o[j]!==n[j]&&(A.push(`${j}-${n[j]}`),o[j]!==null&&P.push(`${j}-${o[j]}`))}),A.length>0&&e.container.classList.remove(...A),P.length>0&&e.container.classList.add(...P),n=Object.assign(n,o)}function h(A,P={}){let j=document.createElement("button");return j.className=`${Wl.CONTROL_BUTTON} ${P.className}`,j.setAttribute("title",P.title),P.container.appendChild(j),j.addEventListener("click",D=>{if(D.preventDefault(),D.stopPropagation(),D.target===r){m(),P.onDeactivate();return}y(A),P.onActivate()},!0),j}function m(){r&&(r.classList.remove(Wl.ACTIVE_BUTTON),r=null)}function y(A){m();let P=t[A];P&&P&&A!=="trash"&&(P.classList.add(Wl.ACTIVE_BUTTON),r=P)}function w(){let A=e.options.controls,P=document.createElement("div");return P.className=`${Wl.CONTROL_GROUP} ${Wl.CONTROL_BASE}`,A&&(A[zs.LINE]&&(t[zs.LINE]=h(zs.LINE,{container:P,className:Wl.CONTROL_BUTTON_LINE,title:`LineString tool ${e.options.keybindings?"(l)":""}`,onActivate:()=>e.events.changeMode(Gn.DRAW_LINE_STRING),onDeactivate:()=>e.events.trash()})),A[zs.POLYGON]&&(t[zs.POLYGON]=h(zs.POLYGON,{container:P,className:Wl.CONTROL_BUTTON_POLYGON,title:`Polygon tool ${e.options.keybindings?"(p)":""}`,onActivate:()=>e.events.changeMode(Gn.DRAW_POLYGON),onDeactivate:()=>e.events.trash()})),A[zs.POINT]&&(t[zs.POINT]=h(zs.POINT,{container:P,className:Wl.CONTROL_BUTTON_POINT,title:`Marker tool ${e.options.keybindings?"(m)":""}`,onActivate:()=>e.events.changeMode(Gn.DRAW_POINT),onDeactivate:()=>e.events.trash()})),A.trash&&(t.trash=h("trash",{container:P,className:Wl.CONTROL_BUTTON_TRASH,title:"Delete",onActivate:()=>{e.events.trash()}})),A.combine_features&&(t.combine_features=h("combineFeatures",{container:P,className:Wl.CONTROL_BUTTON_COMBINE_FEATURES,title:"Combine",onActivate:()=>{e.events.combineFeatures()}})),A.uncombine_features&&(t.uncombine_features=h("uncombineFeatures",{container:P,className:Wl.CONTROL_BUTTON_UNCOMBINE_FEATURES,title:"Uncombine",onActivate:()=>{e.events.uncombineFeatures()}}))),P}function E(){Object.keys(t).forEach(A=>{let P=t[A];P.parentNode&&P.parentNode.removeChild(P),delete t[A]})}return{setActiveButton:y,queueMapClasses:a,updateMapClasses:c,clearMapClasses:i,addButtons:w,removeButtons:E}}function $pt(e){let t=null,r=null,n={onRemove(){return e.map.off("load",n.connect),clearInterval(r),n.removeLayers(),e.store.restoreMapConfig(),e.ui.removeButtons(),e.events.removeEventListeners(),e.ui.clearMapClasses(),e.boxZoomInitial&&e.map.boxZoom.enable(),e.map=null,e.container=null,e.store=null,t&&t.parentNode&&t.parentNode.removeChild(t),t=null,this},connect(){e.map.off("load",n.connect),clearInterval(r),n.addLayers(),e.store.storeMapConfig(),e.events.addEventListeners()},onAdd(o){if(e.map=o,e.events=Gpt(e),e.ui=Wpt(e),e.container=o.getContainer(),e.store=new Mi(e),t=e.ui.addButtons(),e.options.boxSelect){e.boxZoomInitial=o.boxZoom.isEnabled(),o.boxZoom.disable();let i=o.dragPan.isEnabled();o.dragPan.disable(),o.dragPan.enable(),i||o.dragPan.disable()}return o.loaded()?n.connect():(o.on("load",n.connect),r=setInterval(()=>{o.loaded()&&n.connect()},16)),e.events.start(),t},addLayers(){e.map.addSource(ec.COLD,{data:{type:yr.FEATURE_COLLECTION,features:[]},type:"geojson"}),e.map.addSource(ec.HOT,{data:{type:yr.FEATURE_COLLECTION,features:[]},type:"geojson"}),e.options.styles.forEach(o=>{e.map.addLayer(o)}),e.store.setDirty(!0),e.store.render()},removeLayers(){e.options.styles.forEach(o=>{e.map.getLayer(o.id)&&e.map.removeLayer(o.id)}),e.map.getSource(ec.COLD)&&e.map.removeSource(ec.COLD),e.map.getSource(ec.HOT)&&e.map.removeSource(ec.HOT)}};return e.setup=n,n}u();u();var Lpe="#3bb2d0",CD="#fbb03b",Ypt="#fff",PU=[{id:"gl-draw-polygon-fill",type:"fill",filter:["all",["==","$type","Polygon"]],paint:{"fill-color":["case",["==",["get","active"],"true"],CD,Lpe],"fill-opacity":.1}},{id:"gl-draw-lines",type:"line",filter:["any",["==","$type","LineString"],["==","$type","Polygon"]],layout:{"line-cap":"round","line-join":"round"},paint:{"line-color":["case",["==",["get","active"],"true"],CD,Lpe],"line-dasharray":["case",["==",["get","active"],"true"],[.2,2],[2,0]],"line-width":2}},{id:"gl-draw-point-outer",type:"circle",filter:["all",["==","$type","Point"],["==","meta","feature"]],paint:{"circle-radius":["case",["==",["get","active"],"true"],7,5],"circle-color":Ypt}},{id:"gl-draw-point-inner",type:"circle",filter:["all",["==","$type","Point"],["==","meta","feature"]],paint:{"circle-radius":["case",["==",["get","active"],"true"],5,3],"circle-color":["case",["==",["get","active"],"true"],CD,Lpe]}},{id:"gl-draw-vertex-outer",type:"circle",filter:["all",["==","$type","Point"],["==","meta","vertex"],["!=","mode","simple_select"]],paint:{"circle-radius":["case",["==",["get","active"],"true"],7,5],"circle-color":Ypt}},{id:"gl-draw-vertex-inner",type:"circle",filter:["all",["==","$type","Point"],["==","meta","vertex"],["!=","mode","simple_select"]],paint:{"circle-radius":["case",["==",["get","active"],"true"],5,3],"circle-color":CD}},{id:"gl-draw-midpoint",type:"circle",filter:["all",["==","meta","midpoint"]],paint:{"circle-radius":3,"circle-color":CD}}];u();u();var tx={};uw(tx,{isActiveFeature:()=>_v,isEnterKey:()=>ex,isEscapeKey:()=>Qb,isFeature:()=>NU,isInactiveFeature:()=>DU,isOfMetaType:()=>E2,isShiftDown:()=>T2,isShiftMousedown:()=>kpe,isTrue:()=>Bzr,isVertex:()=>Jb,noTarget:()=>S2});u();function E2(e){return function(t){let r=t.featureTarget;return!r||!r.properties?!1:r.properties.meta===e}}function kpe(e){return!e.originalEvent||!e.originalEvent.shiftKey?!1:e.originalEvent.button===0}function _v(e){return!e.featureTarget||!e.featureTarget.properties?!1:e.featureTarget.properties.active===Li.ACTIVE&&e.featureTarget.properties.meta===aa.FEATURE}function DU(e){return!e.featureTarget||!e.featureTarget.properties?!1:e.featureTarget.properties.active===Li.INACTIVE&&e.featureTarget.properties.meta===aa.FEATURE}function S2(e){return e.featureTarget===void 0}function NU(e){return!e.featureTarget||!e.featureTarget.properties?!1:e.featureTarget.properties.meta===aa.FEATURE}function Jb(e){let t=e.featureTarget;return!t||!t.properties?!1:t.properties.meta===aa.VERTEX}function T2(e){return e.originalEvent?e.originalEvent.shiftKey===!0:!1}function Qb(e){return e.keyCode===27}function ex(e){return e.keyCode===13}function Bzr(){return!0}u();u();function Pm(e,t){this.x=e,this.y=t}Pm.prototype={clone(){return new Pm(this.x,this.y)},add(e){return this.clone()._add(e)},sub(e){return this.clone()._sub(e)},multByPoint(e){return this.clone()._multByPoint(e)},divByPoint(e){return this.clone()._divByPoint(e)},mult(e){return this.clone()._mult(e)},div(e){return this.clone()._div(e)},rotate(e){return this.clone()._rotate(e)},rotateAround(e,t){return this.clone()._rotateAround(e,t)},matMult(e){return this.clone()._matMult(e)},unit(){return this.clone()._unit()},perp(){return this.clone()._perp()},round(){return this.clone()._round()},mag(){return Math.sqrt(this.x*this.x+this.y*this.y)},equals(e){return this.x===e.x&&this.y===e.y},dist(e){return Math.sqrt(this.distSqr(e))},distSqr(e){let t=e.x-this.x,r=e.y-this.y;return t*t+r*r},angle(){return Math.atan2(this.y,this.x)},angleTo(e){return Math.atan2(this.y-e.y,this.x-e.x)},angleWith(e){return this.angleWithSep(e.x,e.y)},angleWithSep(e,t){return Math.atan2(this.x*t-this.y*e,this.x*e+this.y*t)},_matMult(e){let t=e[0]*this.x+e[1]*this.y,r=e[2]*this.x+e[3]*this.y;return this.x=t,this.y=r,this},_add(e){return this.x+=e.x,this.y+=e.y,this},_sub(e){return this.x-=e.x,this.y-=e.y,this},_mult(e){return this.x*=e,this.y*=e,this},_div(e){return this.x/=e,this.y/=e,this},_multByPoint(e){return this.x*=e.x,this.y*=e.y,this},_divByPoint(e){return this.x/=e.x,this.y/=e.y,this},_unit(){return this._div(this.mag()),this},_perp(){let e=this.y;return this.y=this.x,this.x=-e,this},_rotate(e){let t=Math.cos(e),r=Math.sin(e),n=t*this.x-r*this.y,o=r*this.x+t*this.y;return this.x=n,this.y=o,this},_rotateAround(e,t){let r=Math.cos(e),n=Math.sin(e),o=t.x+r*(this.x-t.x)-n*(this.y-t.y),i=t.y+n*(this.x-t.x)+r*(this.y-t.y);return this.x=o,this.y=i,this},_round(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this},constructor:Pm};Pm.convert=function(e){if(e instanceof Pm)return e;if(Array.isArray(e))return new Pm(+e[0],+e[1]);if(e.x!==void 0&&e.y!==void 0)return new Pm(+e.x,+e.y);throw new Error("Expected [x, y] or {x, y} point format")};function Vzr(e,t){let r=t.getBoundingClientRect();return new Pm(e.clientX-r.left-(t.clientLeft||0),e.clientY-r.top-(t.clientTop||0))}var LU=Vzr;u();u();function Dm(e,t,r,n){return{type:yr.FEATURE,properties:{meta:aa.VERTEX,parent:e,coord_path:r,active:n?Li.ACTIVE:Li.INACTIVE},geometry:{type:yr.POINT,coordinates:t}}}u();function kU(e,t,r){let n=t.geometry.coordinates,o=r.geometry.coordinates;if(n[1]>MU||n[1]<IU||o[1]>MU||o[1]<IU)return null;let i={lng:(n[0]+o[0])/2,lat:(n[1]+o[1])/2};return{type:yr.FEATURE,properties:{meta:aa.MIDPOINT,parent:e,lng:i.lng,lat:i.lat,coord_path:r.properties.coord_path},geometry:{type:yr.POINT,coordinates:[i.lng,i.lat]}}}function Zpt(e,t={},r=null){let{type:n,coordinates:o}=e.geometry,i=e.properties&&e.properties.id,a=[];n===yr.POINT?a.push(Dm(i,o,r,h(r))):n===yr.POLYGON?o.forEach((y,w)=>{c(y,r!==null?`${r}.${w}`:String(w))}):n===yr.LINE_STRING?c(o,r):n.indexOf(yr.MULTI_PREFIX)===0&&m();function c(y,w){let E="",A=null;y.forEach((P,j)=>{let D=w!=null?`${w}.${j}`:String(j),k=Dm(i,P,D,h(D));if(t.midpoints&&A){let V=kU(i,A,k);V&&a.push(V)}A=k;let z=JSON.stringify(P);E!==z&&a.push(k),j===0&&(E=z)})}function h(y){return t.selectedPaths?t.selectedPaths.indexOf(y)!==-1:!1}function m(){let y=n.replace(yr.MULTI_PREFIX,"");o.forEach((w,E)=>{let A={type:yr.FEATURE,properties:e.properties,geometry:{type:y,coordinates:w}};a=a.concat(Zpt(A,t,E))})}return a}var I2=Zpt;u();var Su={enable(e){setTimeout(()=>{!e.map||!e.map.doubleClickZoom||!e._ctx||!e._ctx.store||!e._ctx.store.getInitialConfigValue||e._ctx.store.getInitialConfigValue("doubleClickZoom")&&e.map.doubleClickZoom.enable()},0)},disable(e){setTimeout(()=>{!e.map||!e.map.doubleClickZoom||e.map.doubleClickZoom.disable()},0)}};u();u();var{LAT_MIN:RU,LAT_MAX:jU,LAT_RENDERED_MIN:Kpt,LAT_RENDERED_MAX:Xpt,LNG_MIN:Jpt,LNG_MAX:Qpt}=Ii;function Gzr(e){let t={Point:0,LineString:1,Polygon:2,MultiPoint:1,MultiLineString:2,MultiPolygon:3}[e.geometry.type],r=[e.geometry.coordinates].flat(t),n=r.map(c=>c[0]),o=r.map(c=>c[1]),i=c=>Math.min.apply(null,c),a=c=>Math.max.apply(null,c);return[i(n),i(o),a(n),a(o)]}function M2(e,t){let r=RU,n=jU,o=RU,i=jU,a=Qpt,c=Jpt;e.forEach(m=>{let y=Gzr(m),w=y[1],E=y[3],A=y[0],P=y[2];w>r&&(r=w),E<n&&(n=E),E>o&&(o=E),w<i&&(i=w),A<a&&(a=A),P>c&&(c=P)});let h=t;return r+h.lat>Xpt&&(h.lat=Xpt-r),o+h.lat>jU&&(h.lat=jU-o),n+h.lat<Kpt&&(h.lat=Kpt-n),i+h.lat<RU&&(h.lat=RU-i),a+h.lng<=Jpt&&(h.lng+=Math.ceil(Math.abs(h.lng)/360)*360),c+h.lng>=Qpt&&(h.lng-=Math.ceil(Math.abs(h.lng)/360)*360),h}function C2(e,t){let r=M2(e.map(n=>n.toGeoJSON()),t);e.forEach(n=>{let o=n.getCoordinates(),i=m=>{let y={lng:m[0]+r.lng,lat:m[1]+r.lat};return[y.lng,y.lat]},a=m=>m.map(y=>i(y)),c=m=>m.map(y=>a(y)),h;n.type===yr.POINT?h=i(o):n.type===yr.LINE_STRING||n.type===yr.MULTI_POINT?h=o.map(i):n.type===yr.POLYGON||n.type===yr.MULTI_LINE_STRING?h=o.map(a):n.type===yr.MULTI_POLYGON&&(h=o.map(c)),n.incomingCoords(h)})}var ki={};ki.onSetup=function(e){let t={dragMoveLocation:null,boxSelectStartLocation:null,boxSelectElement:void 0,boxSelecting:!1,canBoxSelect:!1,dragMoving:!1,canDragMove:!1,initialDragPanState:this.map.dragPan.isEnabled(),initiallySelectedFeatureIds:e.featureIds||[]};return this.setSelected(t.initiallySelectedFeatureIds.filter(r=>this.getFeature(r)!==void 0)),this.fireActionable(),this.setActionableState({combineFeatures:!0,uncombineFeatures:!0,trash:!0}),t};ki.fireUpdate=function(){this.fire(ja.UPDATE,{action:l1.MOVE,features:this.getSelected().map(e=>e.toGeoJSON())})};ki.fireActionable=function(){let e=this.getSelected(),t=e.filter(i=>this.isInstanceOf("MultiFeature",i)),r=!1;if(e.length>1){r=!0;let i=e[0].type.replace("Multi","");e.forEach(a=>{a.type.replace("Multi","")!==i&&(r=!1)})}let n=t.length>0,o=e.length>0;this.setActionableState({combineFeatures:r,uncombineFeatures:n,trash:o})};ki.getUniqueIds=function(e){return e.length?e.map(r=>r.properties.id).filter(r=>r!==void 0).reduce((r,n)=>(r.add(n),r),new Hf).values():[]};ki.stopExtendedInteractions=function(e){e.boxSelectElement&&(e.boxSelectElement.parentNode&&e.boxSelectElement.parentNode.removeChild(e.boxSelectElement),e.boxSelectElement=null),(e.canDragMove||e.canBoxSelect)&&e.initialDragPanState===!0&&this.map.dragPan.enable(),e.boxSelecting=!1,e.canBoxSelect=!1,e.dragMoving=!1,e.canDragMove=!1};ki.onStop=function(){Su.enable(this)};ki.onMouseMove=function(e,t){return NU(t)&&e.dragMoving&&this.fireUpdate(),this.stopExtendedInteractions(e),!0};ki.onMouseOut=function(e){return e.dragMoving?this.fireUpdate():!0};ki.onTap=ki.onClick=function(e,t){if(S2(t))return this.clickAnywhere(e,t);if(E2(aa.VERTEX)(t))return this.clickOnVertex(e,t);if(NU(t))return this.clickOnFeature(e,t)};ki.clickAnywhere=function(e){let t=this.getSelectedIds();t.length&&(this.clearSelectedFeatures(),t.forEach(r=>this.doRender(r))),Su.enable(this),this.stopExtendedInteractions(e)};ki.clickOnVertex=function(e,t){this.changeMode(Gn.DIRECT_SELECT,{featureId:t.featureTarget.properties.parent,coordPath:t.featureTarget.properties.coord_path,startPos:t.lngLat}),this.updateUIClasses({mouse:ti.MOVE})};ki.startOnActiveFeature=function(e,t){this.stopExtendedInteractions(e),this.map.dragPan.disable(),this.doRender(t.featureTarget.properties.id),e.canDragMove=!0,e.dragMoveLocation=t.lngLat};ki.clickOnFeature=function(e,t){Su.disable(this),this.stopExtendedInteractions(e);let r=T2(t),n=this.getSelectedIds(),o=t.featureTarget.properties.id,i=this.isSelected(o);if(!r&&i&&this.getFeature(o).type!==yr.POINT)return this.changeMode(Gn.DIRECT_SELECT,{featureId:o});i&&r?(this.deselect(o),this.updateUIClasses({mouse:ti.POINTER}),n.length===1&&Su.enable(this)):!i&&r?(this.select(o),this.updateUIClasses({mouse:ti.MOVE})):!i&&!r&&(n.forEach(a=>this.doRender(a)),this.setSelected(o),this.updateUIClasses({mouse:ti.MOVE})),this.doRender(o)};ki.onMouseDown=function(e,t){if(e.initialDragPanState=this.map.dragPan.isEnabled(),_v(t))return this.startOnActiveFeature(e,t);if(this.drawConfig.boxSelect&&kpe(t))return this.startBoxSelect(e,t)};ki.startBoxSelect=function(e,t){this.stopExtendedInteractions(e),this.map.dragPan.disable(),e.boxSelectStartLocation=LU(t.originalEvent,this.map.getContainer()),e.canBoxSelect=!0};ki.onTouchStart=function(e,t){if(_v(t))return this.startOnActiveFeature(e,t)};ki.onDrag=function(e,t){if(e.canDragMove)return this.dragMove(e,t);if(this.drawConfig.boxSelect&&e.canBoxSelect)return this.whileBoxSelect(e,t)};ki.whileBoxSelect=function(e,t){e.boxSelecting=!0,this.updateUIClasses({mouse:ti.ADD}),e.boxSelectElement||(e.boxSelectElement=document.createElement("div"),e.boxSelectElement.classList.add(Wl.BOX_SELECT),this.map.getContainer().appendChild(e.boxSelectElement));let r=LU(t.originalEvent,this.map.getContainer()),n=Math.min(e.boxSelectStartLocation.x,r.x),o=Math.max(e.boxSelectStartLocation.x,r.x),i=Math.min(e.boxSelectStartLocation.y,r.y),a=Math.max(e.boxSelectStartLocation.y,r.y),c=`translate(${n}px, ${i}px)`;e.boxSelectElement.style.transform=c,e.boxSelectElement.style.WebkitTransform=c,e.boxSelectElement.style.width=`${o-n}px`,e.boxSelectElement.style.height=`${a-i}px`};ki.dragMove=function(e,t){e.dragMoving=!0,t.originalEvent.stopPropagation();let r={lng:t.lngLat.lng-e.dragMoveLocation.lng,lat:t.lngLat.lat-e.dragMoveLocation.lat};C2(this.getSelected(),r),e.dragMoveLocation=t.lngLat};ki.onTouchEnd=ki.onMouseUp=function(e,t){if(e.dragMoving)this.fireUpdate();else if(e.boxSelecting){let r=[e.boxSelectStartLocation,LU(t.originalEvent,this.map.getContainer())],n=this.featuresAt(null,r,"click"),o=this.getUniqueIds(n).filter(i=>!this.isSelected(i));o.length&&(this.select(o),o.forEach(i=>this.doRender(i)),this.updateUIClasses({mouse:ti.MOVE}))}this.stopExtendedInteractions(e)};ki.toDisplayFeatures=function(e,t,r){t.properties.active=this.isSelected(t.properties.id)?Li.ACTIVE:Li.INACTIVE,r(t),this.fireActionable(),!(t.properties.active!==Li.ACTIVE||t.geometry.type===yr.POINT)&&I2(t).forEach(r)};ki.onTrash=function(){this.deleteFeature(this.getSelectedIds()),this.fireActionable()};ki.onCombineFeatures=function(){let e=this.getSelected();if(e.length===0||e.length<2)return;let t=[],r=[],n=e[0].type.replace("Multi","");for(let o=0;o<e.length;o++){let i=e[o];if(i.type.replace("Multi","")!==n)return;i.type.includes("Multi")?i.getCoordinates().forEach(a=>{t.push(a)}):t.push(i.getCoordinates()),r.push(i.toGeoJSON())}if(r.length>1){let o=this.newFeature({type:yr.FEATURE,properties:r[0].properties,geometry:{type:`Multi${n}`,coordinates:t}});this.addFeature(o),this.deleteFeature(this.getSelectedIds(),{silent:!0}),this.setSelected([o.id]),this.fire(ja.COMBINE_FEATURES,{createdFeatures:[o.toGeoJSON()],deletedFeatures:r})}this.fireActionable()};ki.onUncombineFeatures=function(){let e=this.getSelected();if(e.length===0)return;let t=[],r=[];for(let n=0;n<e.length;n++){let o=e[n];this.isInstanceOf("MultiFeature",o)&&(o.getFeatures().forEach(i=>{this.addFeature(i),i.properties=o.properties,t.push(i.toGeoJSON()),this.select([i.id])}),this.deleteFeature(o.id,{silent:!0}),r.push(o.toGeoJSON()))}t.length>1&&this.fire(ja.UNCOMBINE_FEATURES,{createdFeatures:t,deletedFeatures:r}),this.fireActionable()};var eft=ki;u();var tft=E2(aa.VERTEX),rft=E2(aa.MIDPOINT),Ri={};Ri.fireUpdate=function(){this.fire(ja.UPDATE,{action:l1.CHANGE_COORDINATES,features:this.getSelected().map(e=>e.toGeoJSON())})};Ri.fireActionable=function(e){this.setActionableState({combineFeatures:!1,uncombineFeatures:!1,trash:e.selectedCoordPaths.length>0})};Ri.startDragging=function(e,t){e.initialDragPanState=this.map.dragPan.isEnabled(),this.map.dragPan.disable(),e.canDragMove=!0,e.dragMoveLocation=t.lngLat};Ri.stopDragging=function(e){e.canDragMove&&e.initialDragPanState===!0&&this.map.dragPan.enable(),e.dragMoving=!1,e.canDragMove=!1,e.dragMoveLocation=null};Ri.onVertex=function(e,t){this.startDragging(e,t);let r=t.featureTarget.properties,n=e.selectedCoordPaths.indexOf(r.coord_path);!T2(t)&&n===-1?e.selectedCoordPaths=[r.coord_path]:T2(t)&&n===-1&&e.selectedCoordPaths.push(r.coord_path);let o=this.pathsToCoordinates(e.featureId,e.selectedCoordPaths);this.setSelectedCoordinates(o)};Ri.onMidpoint=function(e,t){this.startDragging(e,t);let r=t.featureTarget.properties;e.feature.addCoordinate(r.coord_path,r.lng,r.lat),this.fireUpdate(),e.selectedCoordPaths=[r.coord_path]};Ri.pathsToCoordinates=function(e,t){return t.map(r=>({feature_id:e,coord_path:r}))};Ri.onFeature=function(e,t){e.selectedCoordPaths.length===0?this.startDragging(e,t):this.stopDragging(e)};Ri.dragFeature=function(e,t,r){C2(this.getSelected(),r),e.dragMoveLocation=t.lngLat};Ri.dragVertex=function(e,t,r){let n=e.selectedCoordPaths.map(a=>e.feature.getCoordinate(a)),o=n.map(a=>({type:yr.FEATURE,properties:{},geometry:{type:yr.POINT,coordinates:a}})),i=M2(o,r);for(let a=0;a<n.length;a++){let c=n[a];e.feature.updateCoordinate(e.selectedCoordPaths[a],c[0]+i.lng,c[1]+i.lat)}};Ri.clickNoTarget=function(){this.changeMode(Gn.SIMPLE_SELECT)};Ri.clickInactive=function(){this.changeMode(Gn.SIMPLE_SELECT)};Ri.clickActiveFeature=function(e){e.selectedCoordPaths=[],this.clearSelectedCoordinates(),e.feature.changed()};Ri.onSetup=function(e){let t=e.featureId,r=this.getFeature(t);if(!r)throw new Error("You must provide a featureId to enter direct_select mode");if(r.type===yr.POINT)throw new TypeError("direct_select mode doesn't handle point features");let n={featureId:t,feature:r,dragMoveLocation:e.startPos||null,dragMoving:!1,canDragMove:!1,selectedCoordPaths:e.coordPath?[e.coordPath]:[]};return this.setSelectedCoordinates(this.pathsToCoordinates(t,n.selectedCoordPaths)),this.setSelected(t),Su.disable(this),this.setActionableState({trash:!0}),n};Ri.onStop=function(){Su.enable(this),this.clearSelectedCoordinates()};Ri.toDisplayFeatures=function(e,t,r){e.featureId===t.properties.id?(t.properties.active=Li.ACTIVE,r(t),I2(t,{map:this.map,midpoints:!0,selectedPaths:e.selectedCoordPaths}).forEach(r)):(t.properties.active=Li.INACTIVE,r(t)),this.fireActionable(e)};Ri.onTrash=function(e){e.selectedCoordPaths.sort((t,r)=>r.localeCompare(t,"en",{numeric:!0})).forEach(t=>e.feature.removeCoordinate(t)),this.fireUpdate(),e.selectedCoordPaths=[],this.clearSelectedCoordinates(),this.fireActionable(e),e.feature.isValid()===!1&&(this.deleteFeature([e.featureId]),this.changeMode(Gn.SIMPLE_SELECT,{}))};Ri.onMouseMove=function(e,t){let r=_v(t),n=tft(t),o=rft(t),i=e.selectedCoordPaths.length===0;return r&&i?this.updateUIClasses({mouse:ti.MOVE}):n&&!i?this.updateUIClasses({mouse:ti.MOVE}):this.updateUIClasses({mouse:ti.NONE}),(n||r||o)&&e.dragMoving&&this.fireUpdate(),this.stopDragging(e),!0};Ri.onMouseOut=function(e){return e.dragMoving&&this.fireUpdate(),!0};Ri.onTouchStart=Ri.onMouseDown=function(e,t){if(tft(t))return this.onVertex(e,t);if(_v(t))return this.onFeature(e,t);if(rft(t))return this.onMidpoint(e,t)};Ri.onDrag=function(e,t){if(e.canDragMove!==!0)return;e.dragMoving=!0,t.originalEvent.stopPropagation();let r={lng:t.lngLat.lng-e.dragMoveLocation.lng,lat:t.lngLat.lat-e.dragMoveLocation.lat};e.selectedCoordPaths.length>0?this.dragVertex(e,t,r):this.dragFeature(e,t,r),e.dragMoveLocation=t.lngLat};Ri.onClick=function(e,t){if(S2(t))return this.clickNoTarget(e,t);if(_v(t))return this.clickActiveFeature(e,t);if(DU(t))return this.clickInactive(e,t);this.stopDragging(e)};Ri.onTap=function(e,t){if(S2(t))return this.clickNoTarget(e,t);if(_v(t))return this.clickActiveFeature(e,t);if(DU(t))return this.clickInactive(e,t)};Ri.onTouchEnd=Ri.onMouseUp=function(e){e.dragMoving&&this.fireUpdate(),this.stopDragging(e)};var nft=Ri;u();var Nm={};Nm.onSetup=function(){let e=this.newFeature({type:yr.FEATURE,properties:{},geometry:{type:yr.POINT,coordinates:[]}});return this.addFeature(e),this.clearSelectedFeatures(),this.updateUIClasses({mouse:ti.ADD}),this.activateUIButton(zs.POINT),this.setActionableState({trash:!0}),{point:e}};Nm.stopDrawingAndRemove=function(e){this.deleteFeature([e.point.id],{silent:!0}),this.changeMode(Gn.SIMPLE_SELECT)};Nm.onTap=Nm.onClick=function(e,t){this.updateUIClasses({mouse:ti.MOVE}),e.point.updateCoordinate("",t.lngLat.lng,t.lngLat.lat),this.fire(ja.CREATE,{features:[e.point.toGeoJSON()]}),this.changeMode(Gn.SIMPLE_SELECT,{featureIds:[e.point.id]})};Nm.onStop=function(e){this.activateUIButton(),e.point.getCoordinate().length||this.deleteFeature([e.point.id],{silent:!0})};Nm.toDisplayFeatures=function(e,t,r){let n=t.properties.id===e.point.id;if(t.properties.active=n?Li.ACTIVE:Li.INACTIVE,!n)return r(t)};Nm.onTrash=Nm.stopDrawingAndRemove;Nm.onKeyUp=function(e,t){if(Qb(t)||ex(t))return this.stopDrawingAndRemove(e,t)};var oft=Nm;u();u();function Hzr(e,t){return e.lngLat?e.lngLat.lng===t[0]&&e.lngLat.lat===t[1]:!1}var rx=Hzr;var sh={};sh.onSetup=function(){let e=this.newFeature({type:yr.FEATURE,properties:{},geometry:{type:yr.POLYGON,coordinates:[[]]}});return this.addFeature(e),this.clearSelectedFeatures(),Su.disable(this),this.updateUIClasses({mouse:ti.ADD}),this.activateUIButton(zs.POLYGON),this.setActionableState({trash:!0}),{polygon:e,currentVertexPosition:0}};sh.clickAnywhere=function(e,t){if(e.currentVertexPosition>0&&rx(t,e.polygon.coordinates[0][e.currentVertexPosition-1]))return this.changeMode(Gn.SIMPLE_SELECT,{featureIds:[e.polygon.id]});this.updateUIClasses({mouse:ti.ADD}),e.polygon.updateCoordinate(`0.${e.currentVertexPosition}`,t.lngLat.lng,t.lngLat.lat),e.currentVertexPosition++,e.polygon.updateCoordinate(`0.${e.currentVertexPosition}`,t.lngLat.lng,t.lngLat.lat)};sh.clickOnVertex=function(e){return this.changeMode(Gn.SIMPLE_SELECT,{featureIds:[e.polygon.id]})};sh.onMouseMove=function(e,t){e.polygon.updateCoordinate(`0.${e.currentVertexPosition}`,t.lngLat.lng,t.lngLat.lat),Jb(t)&&this.updateUIClasses({mouse:ti.POINTER})};sh.onTap=sh.onClick=function(e,t){return Jb(t)?this.clickOnVertex(e,t):this.clickAnywhere(e,t)};sh.onKeyUp=function(e,t){Qb(t)?(this.deleteFeature([e.polygon.id],{silent:!0}),this.changeMode(Gn.SIMPLE_SELECT)):ex(t)&&this.changeMode(Gn.SIMPLE_SELECT,{featureIds:[e.polygon.id]})};sh.onStop=function(e){this.updateUIClasses({mouse:ti.NONE}),Su.enable(this),this.activateUIButton(),this.getFeature(e.polygon.id)!==void 0&&(e.polygon.removeCoordinate(`0.${e.currentVertexPosition}`),e.polygon.isValid()?this.fire(ja.CREATE,{features:[e.polygon.toGeoJSON()]}):(this.deleteFeature([e.polygon.id],{silent:!0}),this.changeMode(Gn.SIMPLE_SELECT,{},{silent:!0})))};sh.toDisplayFeatures=function(e,t,r){let n=t.properties.id===e.polygon.id;if(t.properties.active=n?Li.ACTIVE:Li.INACTIVE,!n)return r(t);if(t.geometry.coordinates.length===0)return;let o=t.geometry.coordinates[0].length;if(!(o<3)){if(t.properties.meta=aa.FEATURE,r(Dm(e.polygon.id,t.geometry.coordinates[0][0],"0.0",!1)),o>3){let i=t.geometry.coordinates[0].length-3;r(Dm(e.polygon.id,t.geometry.coordinates[0][i],`0.${i}`,!1))}if(o<=4){let i=[[t.geometry.coordinates[0][0][0],t.geometry.coordinates[0][0][1]],[t.geometry.coordinates[0][1][0],t.geometry.coordinates[0][1][1]]];if(r({type:yr.FEATURE,properties:t.properties,geometry:{coordinates:i,type:yr.LINE_STRING}}),o===3)return}return r(t)}};sh.onTrash=function(e){this.deleteFeature([e.polygon.id],{silent:!0}),this.changeMode(Gn.SIMPLE_SELECT)};var ift=sh;u();var lh={};lh.onSetup=function(e){e=e||{};let t=e.featureId,r,n,o="forward";if(t){if(r=this.getFeature(t),!r)throw new Error("Could not find a feature with the provided featureId");let i=e.from;if(i&&i.type==="Feature"&&i.geometry&&i.geometry.type==="Point"&&(i=i.geometry),i&&i.type==="Point"&&i.coordinates&&i.coordinates.length===2&&(i=i.coordinates),!i||!Array.isArray(i))throw new Error("Please use the `from` property to indicate which point to continue the line from");let a=r.coordinates.length-1;if(r.coordinates[a][0]===i[0]&&r.coordinates[a][1]===i[1])n=a+1,r.addCoordinate(n,...r.coordinates[a]);else if(r.coordinates[0][0]===i[0]&&r.coordinates[0][1]===i[1])o="backwards",n=0,r.addCoordinate(n,...r.coordinates[0]);else throw new Error("`from` should match the point at either the start or the end of the provided LineString")}else r=this.newFeature({type:yr.FEATURE,properties:{},geometry:{type:yr.LINE_STRING,coordinates:[]}}),n=0,this.addFeature(r);return this.clearSelectedFeatures(),Su.disable(this),this.updateUIClasses({mouse:ti.ADD}),this.activateUIButton(zs.LINE),this.setActionableState({trash:!0}),{line:r,currentVertexPosition:n,direction:o}};lh.clickAnywhere=function(e,t){if(e.currentVertexPosition>0&&rx(t,e.line.coordinates[e.currentVertexPosition-1])||e.direction==="backwards"&&rx(t,e.line.coordinates[e.currentVertexPosition+1]))return this.changeMode(Gn.SIMPLE_SELECT,{featureIds:[e.line.id]});this.updateUIClasses({mouse:ti.ADD}),e.line.updateCoordinate(e.currentVertexPosition,t.lngLat.lng,t.lngLat.lat),e.direction==="forward"?(e.currentVertexPosition++,e.line.updateCoordinate(e.currentVertexPosition,t.lngLat.lng,t.lngLat.lat)):e.line.addCoordinate(0,t.lngLat.lng,t.lngLat.lat)};lh.clickOnVertex=function(e){return this.changeMode(Gn.SIMPLE_SELECT,{featureIds:[e.line.id]})};lh.onMouseMove=function(e,t){e.line.updateCoordinate(e.currentVertexPosition,t.lngLat.lng,t.lngLat.lat),Jb(t)&&this.updateUIClasses({mouse:ti.POINTER})};lh.onTap=lh.onClick=function(e,t){if(Jb(t))return this.clickOnVertex(e,t);this.clickAnywhere(e,t)};lh.onKeyUp=function(e,t){ex(t)?this.changeMode(Gn.SIMPLE_SELECT,{featureIds:[e.line.id]}):Qb(t)&&(this.deleteFeature([e.line.id],{silent:!0}),this.changeMode(Gn.SIMPLE_SELECT))};lh.onStop=function(e){Su.enable(this),this.activateUIButton(),this.getFeature(e.line.id)!==void 0&&(e.line.removeCoordinate(`${e.currentVertexPosition}`),e.line.isValid()?this.fire(ja.CREATE,{features:[e.line.toGeoJSON()]}):(this.deleteFeature([e.line.id],{silent:!0}),this.changeMode(Gn.SIMPLE_SELECT,{},{silent:!0})))};lh.onTrash=function(e){this.deleteFeature([e.line.id],{silent:!0}),this.changeMode(Gn.SIMPLE_SELECT)};lh.toDisplayFeatures=function(e,t,r){let n=t.properties.id===e.line.id;if(t.properties.active=n?Li.ACTIVE:Li.INACTIVE,!n)return r(t);t.geometry.coordinates.length<2||(t.properties.meta=aa.FEATURE,r(Dm(e.line.id,t.geometry.coordinates[e.direction==="forward"?t.geometry.coordinates.length-2:1],`${e.direction==="forward"?t.geometry.coordinates.length-2:1}`,!1)),r(t))};var aft=lh;var qU={simple_select:eft,direct_select:nft,draw_point:oft,draw_polygon:ift,draw_line_string:aft};var Wzr={defaultMode:Gn.SIMPLE_SELECT,keybindings:!0,touchEnabled:!0,clickBuffer:2,touchBuffer:25,boxSelect:!0,displayControlsDefault:!0,styles:PU,modes:qU,controls:{},userProperties:!1,suppressAPIEvents:!0},$zr={point:!0,line_string:!0,polygon:!0,trash:!0,combine_features:!0,uncombine_features:!0},Yzr={point:!1,line_string:!1,polygon:!1,trash:!1,combine_features:!1,uncombine_features:!1};function sft(e,t){return e.map(r=>r.source?r:Object.assign({},r,{id:`${r.id}.${t}`,source:t==="hot"?ec.HOT:ec.COLD}))}function lft(e={}){let t=Object.assign({},e);return e.controls||(t.controls={}),e.displayControlsDefault===!1?t.controls=Object.assign({},Yzr,e.controls):t.controls=Object.assign({},$zr,e.controls),t=Object.assign({},Wzr,t),t.styles=sft(t.styles,"cold").concat(sft(t.styles,"hot")),t}u();var Rpe=Q(wO(),1),pft=Q(cft(),1);u();function zU(e,t){return e.length!==t.length?!1:JSON.stringify(e.map(r=>r).sort())===JSON.stringify(t.map(r=>r).sort())}var Xzr={Polygon:Zb,LineString:Yb,Point:Wb,MultiPolygon:Kb,MultiLineString:Kb,MultiPoint:Kb};function fft(e,t){t.modes=Gn;let r=e.options.suppressAPIEvents!==void 0?!!e.options.suppressAPIEvents:!0;return t.getFeatureIdsAt=function(n){return ih.click({point:n},null,e).map(i=>i.properties.id)},t.getSelectedIds=function(){return e.store.getSelectedIds()},t.getSelected=function(){return{type:yr.FEATURE_COLLECTION,features:e.store.getSelectedIds().map(n=>e.store.get(n)).map(n=>n.toGeoJSON())}},t.getSelectedPoints=function(){return{type:yr.FEATURE_COLLECTION,features:e.store.getSelectedCoordinates().map(n=>({type:yr.FEATURE,properties:{},geometry:{type:yr.POINT,coordinates:n.coordinates}}))}},t.set=function(n){if(n.type===void 0||n.type!==yr.FEATURE_COLLECTION||!Array.isArray(n.features))throw new Error("Invalid FeatureCollection");let o=e.store.createRenderBatch(),i=e.store.getAllIds().slice(),a=t.add(n),c=new Hf(a);return i=i.filter(h=>!c.has(h)),i.length&&t.delete(i),o(),a},t.add=function(n){let i=JSON.parse(JSON.stringify((0,pft.default)(n))).features.map(a=>{if(a.id=a.id||w2(),a.geometry===null)throw new Error("Invalid geometry: null");if(e.store.get(a.id)===void 0||e.store.get(a.id).type!==a.geometry.type){let c=Xzr[a.geometry.type];if(c===void 0)throw new Error(`Invalid geometry type: ${a.geometry.type}.`);let h=new c(e,a);e.store.add(h,{silent:r})}else{let c=e.store.get(a.id),h=c.properties;c.properties=a.properties,(0,Rpe.default)(h,a.properties)||e.store.featureChanged(c.id,{silent:r}),(0,Rpe.default)(c.getCoordinates(),a.geometry.coordinates)||c.incomingCoords(a.geometry.coordinates)}return a.id});return e.store.render(),i},t.get=function(n){let o=e.store.get(n);if(o)return o.toGeoJSON()},t.getAll=function(){return{type:yr.FEATURE_COLLECTION,features:e.store.getAll().map(n=>n.toGeoJSON())}},t.delete=function(n){return e.store.delete(n,{silent:r}),t.getMode()===Gn.DIRECT_SELECT&&!e.store.getSelectedIds().length?e.events.changeMode(Gn.SIMPLE_SELECT,void 0,{silent:r}):e.store.render(),t},t.deleteAll=function(){return e.store.delete(e.store.getAllIds(),{silent:r}),t.getMode()===Gn.DIRECT_SELECT?e.events.changeMode(Gn.SIMPLE_SELECT,void 0,{silent:r}):e.store.render(),t},t.changeMode=function(n,o={}){return n===Gn.SIMPLE_SELECT&&t.getMode()===Gn.SIMPLE_SELECT?(zU(o.featureIds||[],e.store.getSelectedIds())||(e.store.setSelected(o.featureIds,{silent:r}),e.store.render()),t):(n===Gn.DIRECT_SELECT&&t.getMode()===Gn.DIRECT_SELECT&&o.featureId===e.store.getSelectedIds()[0]||e.events.changeMode(n,o,{silent:r}),t)},t.getMode=function(){return e.events.getMode()},t.trash=function(){return e.events.trash({silent:r}),t},t.combineFeatures=function(){return e.events.combineFeatures({silent:r}),t},t.uncombineFeatures=function(){return e.events.uncombineFeatures({silent:r}),t},t.setFeatureProperty=function(n,o,i){return e.store.setFeatureProperty(n,o,i,{silent:r}),t},t}var jpe={};uw(jpe,{CommonSelectors:()=>tx,ModeHandler:()=>ID,StringSet:()=>Hf,constrainFeatureMovement:()=>M2,createMidPoint:()=>kU,createSupplementaryPoints:()=>I2,createVertex:()=>Dm,doubleClickZoom:()=>Su,euclideanDistance:()=>_2,featuresAt:()=>ih,getFeatureAtAndSetCursors:()=>Hb,isClick:()=>b2,isEventAtCoordinates:()=>rx,isTap:()=>x2,mapEventToBoundingBox:()=>AU,moveFeatures:()=>C2,sortFeatures:()=>CU,stringSetsAreEqual:()=>zU,theme:()=>PU,toDenseArray:()=>Xb});u();var Jzr=function(e,t){e=lft(e);let r={options:e};t=fft(r,t),r.api=t;let n=$pt(r);return t.onAdd=n.onAdd,t.onRemove=n.onRemove,t.types=zs,t.options=e,t};function FU(e){Jzr(e,this)}FU.modes=qU;FU.constants=Ii;FU.lib=jpe;var dft=FU;u();var hft=Q(De(),1);var qpe=en({key:"trackingHandlerState",default:null}),uh=en({key:"geoJsonChangeTrackingState",default:null}),UU=()=>{let e=Ir(uh),t=(0,hft.useCallback)(i=>{e(a=>{if(a.addIds.includes(i))return Pt(Se({},a),{addIds:a.addIds.filter(h=>h!==i)});{let h=new Map(a.dirtyMap);return h.delete(i),Pt(Se({},a),{dirtyMap:h,deleteIds:[...a.deleteIds,i]})}})},[]),r=ir(({snapshot:i,set:a})=>c=>vt(null,null,function*(){let m=(yield i.getPromise(nl)).features.find(y=>y.id===c.id);m!==void 0&&(Object.keys(m.properties).length!==Object.keys(c.properties).length||Object.keys(m.properties).some(y=>{let w=m.properties[y],E=c.properties[y];return y===Ln.time?w[0]!==E[0]||w[1]!==E[1]:w!==E})?a(uh,y=>{let w=new Map(y.dirtyMap);return w.set(c.id,!0),Pt(Se({},y),{dirtyMap:w})}):a(uh,y=>{if(y.dirtyMap.has(c.id)&&y.dirtyMap.get(c.id)){let w=new Map(y.dirtyMap);return w.set(c.id,!1),Pt(Se({},y),{dirtyMap:w})}return y}))}),[]),n=ir(({snapshot:i,set:a})=>()=>vt(null,null,function*(){let c=yield i.getPromise(Qt);if(Te(c)){let y={"draw.update":w=>{let E=w.features[0];a(uh,A=>{if(A.dirtyMap.has(E.id)&&!A.dirtyMap.get(E.id)){let P=new Map(A.dirtyMap);return P.set(E.id,!0),Pt(Se({},A),{dirtyMap:P})}return A})},"draw.create":w=>{a(uh,E=>Pt(Se({},E),{addIds:[...E.addIds,w.features[0].id]}))},"draw.delete":w=>{a(uh,E=>{if(E.addIds.includes(w.features[0].id))return Pt(Se({},E),{addIds:E.addIds.filter(P=>P!==w.features[0].id)});{let P=new Map(E.dirtyMap);return P.delete(w.features[0].id),Pt(Se({},E),{dirtyMap:P,deleteIds:[...E.deleteIds,w.features[0].id]})}})}};Object.keys(y).forEach(w=>{c.on(w,y[w])}),a(qpe,y)}let h=yield i.getPromise(nl),m=new Map;h.features.forEach(y=>{m.set(y.id,!1)}),a(uh,{dirtyMap:m,deleteIds:[],addIds:[]})}),[]),o=ir(({snapshot:i,set:a})=>()=>vt(null,null,function*(){let c=yield i.getPromise(Qt);if(Te(c)){let h=yield i.getPromise(qpe);h!==null&&(Object.keys(h).forEach(m=>{c.off(m,h[m])}),a(qpe,null))}}),[]);return{handleDeleteFeature:t,handleUpdateFeature:r,registerMapEventHandler:n,unregisterMapEventHandler:o}};u();var BU="shifted",A2="position-control",bv={topLeft:".maplibregl-ctrl-top-left",topRight:".maplibregl-ctrl-top-right",bottomRight:".maplibregl-ctrl-bottom-right"},mft=(e,t)=>{for(let r of Object.values(e)){let n=t._controlContainer.querySelector(r);n.classList.remove(BU),n.classList.add(BU)}},gft=(e,t)=>{for(let r of Object.values(e))t._controlContainer.querySelector(r).classList.remove(BU)},VU=()=>{let e=ir(({snapshot:i})=>()=>vt(null,null,function*(){let a=yield i.getPromise(Qt);if(Te(a)){let c=[bv.topLeft];mft(c,a)}}),[]),t=ir(({snapshot:i})=>()=>vt(null,null,function*(){let a=yield i.getPromise(Qt);if(Te(a)){let c=[bv.topRight,bv.bottomRight];mft(c,a)}}),[]),r=ir(({snapshot:i})=>()=>vt(null,null,function*(){let a=yield i.getPromise(Qt);if(Te(a)){let c=[bv.topLeft];gft(c,a)}}),[]),n=ir(({snapshot:i})=>()=>vt(null,null,function*(){let a=yield i.getPromise(Qt);if(Te(a)){let c=[bv.topRight,bv.bottomRight];gft(c,a)}}),[]),o=ir(({snapshot:i})=>()=>vt(null,null,function*(){let a=yield i.getPromise(Qt);if(Te(a))for(let c of Object.values(bv))a._controlContainer.querySelector(c).classList.remove(BU)}),[]);return{shiftLeft:e,shiftRight:t,unShiftLeft:r,unShiftRight:n,removeControlShifts:o}};u();var tc="user_",Qzr="rgb(0, 177, 158)",zpe=Qzr,vft=[{id:"polygon-fill",type:"fill",paint:{"fill-color":["coalesce",["get",`${tc}fill`],fn[Mr.FILL].COLOR],"fill-opacity":["coalesce",["get",`${tc}fill-opacity`],fn[Mr.FILL].OPACITY]},filter:["all",["==",["geometry-type"],"Polygon"]]},{id:"polygon-outline-hot",type:"line",layout:{"line-cap":"round","line-join":"round"},paint:{"line-color":["coalesce",["get",`${tc}stroke`],fn[Mr.OUTLINE].COLOR],"line-width":["coalesce",["get",`${tc}stroke-width`],fn[Mr.OUTLINE].WIDTH],"line-opacity":["coalesce",["get",`${tc}stroke-opacity`],fn[Mr.OUTLINE].OPACITY],"line-dasharray":[.2,2]},filter:["all",["==",["get","active"],"true"],["any",["==",["geometry-type"],"Polygon"],["all",["==",["get","mode"],"draw_polygon"],["==",["geometry-type"],"LineString"]]]]},{id:"polygon-outline-cold",type:"line",paint:{"line-color":["coalesce",["get",`${tc}stroke`],fn[Mr.OUTLINE].COLOR],"line-width":["coalesce",["get",`${tc}stroke-width`],fn[Mr.OUTLINE].WIDTH],"line-opacity":["coalesce",["get",`${tc}stroke-opacity`],fn[Mr.OUTLINE].OPACITY]},filter:["all",["==",["get","active"],"false"],["==",["geometry-type"],"Polygon"]]},{id:"line-hot",type:"line",layout:{"line-cap":"round","line-join":"round"},paint:{"line-color":["coalesce",["get",`${tc}stroke`],fn[Mr.LINE].COLOR],"line-width":["coalesce",["get",`${tc}stroke-width`],fn[Mr.LINE].WIDTH],"line-opacity":["coalesce",["get",`${tc}stroke-opacity`],fn[Mr.LINE].OPACITY],"line-dasharray":[.2,2]},filter:["all",["==",["get","active"],"true"],["==",["geometry-type"],"LineString"],["!=",["get","mode"],"draw_polygon"]]},{id:"line-cold",type:"line",paint:{"line-color":["coalesce",["get",`${tc}stroke`],fn[Mr.LINE].COLOR],"line-width":["coalesce",["get",`${tc}stroke-width`],fn[Mr.LINE].WIDTH],"line-opacity":["coalesce",["get",`${tc}stroke-opacity`],fn[Mr.LINE].OPACITY]},filter:["all",["==",["get","active"],"false"],["==",["geometry-type"],"LineString"]]},{id:"point",type:"symbol",layout:{"icon-image":mr.getSettings().MARKER_IMAGE_ID,"icon-size":.5,"icon-anchor":"bottom","icon-allow-overlap":!0},paint:{"icon-color":["to-color",["get",`${tc}marker`],fn[Mr.SYMBOL].COLOR],"icon-halo-color":["case",["==",["get","active"],"true"],zpe,"#fff"],"icon-halo-width":["case",["==",["get","active"],"true"],2,1]},filter:["all",["==",["geometry-type"],"Point"],["==",["get","meta"],"feature"]]},{id:"gl-draw-vertex-outer",type:"circle",filter:["all",["==",["geometry-type"],"Point"],["==",["get","meta"],"vertex"],["!=",["get","mode"],"simple_select"]],paint:{"circle-radius":["case",["==",["get","active"],"true"],7,5],"circle-color":"#fff"}},{id:"gl-draw-vertex-inner",type:"circle",filter:["all",["==",["geometry-type"],"Point"],["==",["get","meta"],"vertex"],["!=",["get","mode"],"simple_select"]],paint:{"circle-radius":["case",["==",["get","active"],"true"],5,3],"circle-color":zpe}},{id:"gl-draw-midpoint",type:"circle",filter:["all",["==",["get","meta"],"midpoint"]],paint:{"circle-radius":3,"circle-color":zpe}}];var e8r={styles:vft,userProperties:!0,controls:{combine_features:!1,uncombine_features:!1}},t8r=e=>{let r=e._controlContainer.querySelector(bv.topRight).querySelectorAll("button");for(let n of r){let o=document.createElement("div");o.classList.add("maplibregl-ctrl","maplibregl-ctrl-group"),n.before(o),o.appendChild(n)}},Upe=()=>{let e=ir(({snapshot:r,set:n})=>()=>vt(null,null,function*(){let o=yield r.getPromise(Qt),i=yield r.getPromise(nl);if(Te(o)&&Te(i)){let a=new dft(e8r);n(rl,a),o.addControl(a,"top-right"),a.add(i),o._controlContainer.classList.add(A2),t8r(o)}}),[]),t=ir(({snapshot:r,set:n})=>()=>vt(null,null,function*(){let o=yield r.getPromise(Qt),i=yield r.getPromise(rl),{selectedLayer:a}=yield r.getPromise(pu);Te(o)&&Te(a)&&!a.isVisible(o)&&a.setVisibility(o,"visible"),Te(o)&&Te(i)&&(o.removeControl(i),n(rl,void 0),o._controlContainer.classList.remove(A2),nh(n))}),[]);return{initializeDraw:e,removeDraw:t}},r8r=()=>{let e=_t(xs),{initializeDraw:t,removeDraw:r}=Upe(),{shiftLeft:n,shiftRight:o,unShiftLeft:i,unShiftRight:a,removeControlShifts:c}=VU(),{registerMapEventHandler:h,unregisterMapEventHandler:m}=UU();return(0,Fpe.useEffect)(()=>(t(),h(),()=>{r(),c(),m()}),[]),(0,Fpe.useEffect)(()=>{let y=e===Si.FEATURE,w=e===Si.METADATA||e===Si.HISTORY;y?(n(),a()):w?(o(),i()):c()},[e]),null},yft=r8r;var _ft=yft;u();u();var Yf=Q(De(),1);u();var Vpe=Q(wO(),1);u();var n8r=({id:e,translationKey:t})=>({id:e,type:"success",text:fe(t)}),o8r=({id:e,translationKey:t})=>({id:e,type:"danger",text:fe(t)}),i8r=(e="mapWrapper")=>{let t=ir(({set:n})=>o=>{let i=n8r({id:e,translationKey:o});n(Rs,i)},[e]),r=ir(({set:n})=>o=>{let i=o8r({id:e,translationKey:o});n(Rs,i)},[e]);return{notifySuccess:t,notifyError:r}},c1=i8r;u();var bft=e=>({[Ue.title]:e[Ue.title],[Ue.description]:e[Ue.description],[Ue.thumbnailUrl]:e[Ue.thumbnailUrl],[Ue.timePeriod]:e[Ue.timePeriod]}),Bpe=e=>{let t={link_thumb:e[Ue.thumbnailUrl],title:e[Ue.title],description:e[Ue.description],time_period:e[Ue.timePeriod]};return Hq(t)},xft=e=>{let{timePeriodStart:t,timePeriodEnd:r}=$q(e),n={[Ue.title]:e[Ue.title],[Jh]:t,[Qh]:r,[Ue.description]:e[Ue.description],[Ue.thumbnailUrl]:e[Ue.thumbnailUrl]};return Wq(n)},wft=e=>{let t=e,r=t[Jh],n=t[Qh],o=Yq(r,n);return{[Ue.title]:t[Ue.title],[Ue.timePeriod]:o,[Ue.description]:t[Ue.description],[Ue.thumbnailUrl]:t[Ue.thumbnailUrl]}};var a8r=()=>{let{notifyError:e}=c1(),t=ir(({snapshot:o,set:i})=>()=>vt(null,null,function*(){let a=yield o.getPromise(rl);if(a){let c=Xct(a.getAll()),h=yield o.getPromise(Qt),m=yield o.getPromise(kl),y=null;try{let w=Wo.toPersistenceState(c);y=yield lrt(w,Bpe(m))}catch(w){xpe(w,e);return}if(Te(y)){let w=Wo.fromApplication({metadata:Pt(Se({},m),{[Ue.id]:y,[Ue.vectorMapId]:y,[Ue.version]:0,[Ue.userRole]:"owner"}),geoJson:c});w.addLayerToMap(h),i(jn,E=>E.concat(w)),i(tl,w.getId())}nh(i)}})),r=ir(({snapshot:o,set:i})=>()=>vt(null,null,function*(){let a=yield o.getPromise(rl);if(a){let{selectedLayer:c}=yield o.getPromise(pu),h=yield o.getPromise(Qt),m=yield o.getPromise(kl),y=yield o.getPromise($o),w=yield o.getPromise(d$e),E=yield o.getPromise(nl),A=bft(c.getMetadata()),P=a.getAll(),j=!(0,Vpe.default)(E,P)||w,k=!(0,Vpe.default)(A,m)&&s7(y);if(!j&&!k){nh(i);return}let z=y.version+1,V=Jct(E,P,z),G=Bpe(m),K=null;try{let Z=Wo.toPersistenceState(V);K=yield urt(y.id,j?Z:null,k?G:null,y.version)}catch(Z){xpe(Z,e);return}Te(h)&&Te(c)&&Te(K)&&(j&&(c.setDataOnMap(h,V),c.updateMetadata(Ue.version,K)),k&&Object.keys(m).forEach(Z=>{c.updateMetadata(Z,m[Z])}),i(d0,Date.now()),nh(i))}})),n=ir(({snapshot:o,set:i})=>()=>vt(null,null,function*(){let a=yield o.getPromise(rl);if(a){let{selectedLayer:c}=yield o.getPromise(pu),h=yield o.getPromise(Qt),m=yield o.getPromise(kl);if(Te(h)&&Te(c)){let y=wD(a.getAll());c.setDataOnMap(h,y),Object.keys(m).forEach(w=>{c.updateMetadata(w,m[w])}),i(d0,Date.now()),nh(i)}}}));return ir(({snapshot:o})=>()=>vt(null,null,function*(){let i=yield o.getPromise($o);i!==null&&(i.type===Za.REMOTE?i.id===null?yield t():yield r():yield n())}))},Eft=a8r;u();var rs=Q(De(),1),WU=Q(It(),1);u();var nx=Q(De(),1);var GU=Q(It(),1),Sft=({count:e,id:t,formatFunction:r})=>{let n=(0,nx.useMemo)(()=>r?r(e):Xit.format(e),[e]),o=(0,nx.useMemo)(()=>Kit.select(e)==="one"?fe(`geojson-control-bar-${t}`):fe(`geojson-control-bar-${t}-plural`),[e,t]);return nx.default.createElement("span",{className:t},nx.default.createElement("span",{className:"bold"},n)," ",nx.default.createElement("span",null,o))};Sft.propTypes={count:GU.default.number,id:GU.default.string,formatFunction:GU.default.func};var HU=Sft;var s8r=e=>`x${e}`,Tft=({onUpdateViewMode:e,formattedFeatureCount:t,viewState:r})=>{let n=_t(uh);(0,rs.useEffect)(()=>{if(n===null)return;let i=n.addIds.length>0||n.deleteIds.length>0||Array.from(n.dirtyMap.values()).some(a=>a);e(i?rc.UNSAVED_FEATURE_CHANGES:rc.INITIAL)},[n]);let o=(0,rs.useMemo)(()=>n?Array.from(n.dirtyMap.values()).filter(i=>i).length:0,[n==null?void 0:n.dirtyMap]);return rs.default.createElement(rs.default.Fragment,null,r===rc.UNSAVED_FEATURE_CHANGES&&rs.default.createElement(rs.default.Fragment,null,rs.default.createElement(HU,{count:n.addIds.length,id:"new"}),rs.default.createElement("span",{className:"separator"}),rs.default.createElement(HU,{count:-n.deleteIds.length,id:"deleted"}),rs.default.createElement("span",{className:"separator"}),rs.default.createElement(HU,{count:o,id:"changed",formatFunction:s8r})),r===rc.SHOW_FEATURE_COUNT&&rs.default.createElement(rs.default.Fragment,null,rs.default.createElement("span",{className:"bold"},t)," ",fe("geojson-control-bar-hint-features-present")),r===rc.NO_TITLE&&rs.default.createElement("span",{className:"bold"},fe("geojson-control-bar-hint-add-title")),r===rc.NO_FEATURES&&rs.default.createElement("span",{className:"bold"},fe("geojson-control-bar-hint-add-feature")))};Tft.propTypes={viewState:WU.default.number.isRequired,onUpdateViewMode:WU.default.func.isRequired,formattedFeatureCount:WU.default.string};var Ift=(0,rs.memo)(Tft);u();var nc=Q(De(),1);u();var $U=Q(De(),1);var Mft=Q(It(),1);var Cft=({onClick:e})=>{let t=_t(Fg),r=_t($o);return(r==null?void 0:r.type)===Za.REMOTE?$U.default.createElement(rn,{disabled:!Mnt(r),className:"control-bar-layer-buttons--button layer-history-button",onClick:e,title:fe("geojson-control-bar-history-btn-title")},$U.default.createElement("span",{className:jt("control-bar-layer-buttons--badge",t!==null&&"in")}),$U.default.createElement(Fr,{name:"clock"})):null};Cft.propTypes={onClick:Mft.default.func.isRequired};var Aft=Cft;u();var AD=Q(De(),1),Oft=Q(It(),1);var Pft=({onClick:e})=>{let t=_t($o),{type:r}=t,n=(0,AD.useMemo)(()=>_4(t)||y4(t),[t]);return r===Za.REMOTE&&n?AD.default.createElement(rn,{className:"control-bar-layer-buttons--button layer-roles-button",onClick:e,title:fe("geojson-control-bar-roles-btn-title")},AD.default.createElement(Fr,{name:"user-roles"})):null};Pft.propTypes={onClick:Oft.default.func.isRequired};var Dft=Pft;u();u();u();var Lm=Q(De(),1);u();var ch=Q(De());var l8r=(0,ch.createContext)(null),Gpe={didCatch:!1,error:null},O2=class extends ch.Component{constructor(t){super(t),this.resetErrorBoundary=this.resetErrorBoundary.bind(this),this.state=Gpe}static getDerivedStateFromError(t){return{didCatch:!0,error:t}}resetErrorBoundary(){let{error:t}=this.state;if(t!==null){for(var r,n,o=arguments.length,i=new Array(o),a=0;a<o;a++)i[a]=arguments[a];(r=(n=this.props).onReset)===null||r===void 0||r.call(n,{args:i,reason:"imperative-api"}),this.setState(Gpe)}}componentDidCatch(t,r){var n,o;(n=(o=this.props).onError)===null||n===void 0||n.call(o,t,r)}componentDidUpdate(t,r){let{didCatch:n}=this.state,{resetKeys:o}=this.props;if(n&&r.error!==null&&u8r(t.resetKeys,o)){var i,a;(i=(a=this.props).onReset)===null||i===void 0||i.call(a,{next:o,prev:t.resetKeys,reason:"keys"}),this.setState(Gpe)}}render(){let{children:t,fallbackRender:r,FallbackComponent:n,fallback:o}=this.props,{didCatch:i,error:a}=this.state,c=t;if(i){let h={error:a,resetErrorBoundary:this.resetErrorBoundary};if(typeof r=="function")c=r(h);else if(n)c=(0,ch.createElement)(n,h);else if(o!==void 0)c=o;else throw a}return(0,ch.createElement)(l8r.Provider,{value:{didCatch:i,error:a,resetErrorBoundary:this.resetErrorBoundary}},c)}};function u8r(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[],t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:[];return e.length!==t.length||e.some((r,n)=>!Object.is(r,t[n]))}var Zpe=Q(It(),1);u();var Nft=Q(De(),1);u();var P2={OWNER:"owner",EDITOR:"editor"},Tu={OWNERS:"owners",EDITORS:"editors"};var Lft=en({key:"vectorMapRolesQueryIdState",default:0}),c8r=vs({key:"vectorMapRolesQuery",get:t=>vt(null,[t],function*({get:e}){e(Lft);let{id:r,type:n}=e($o),o={editors:[],owners:[]};if(n===Za.LOCAL||!Te(r))return o;let i=yield hrt(r);for(let{user_id:a,role:c}of i)c===P2.EDITOR?o.editors.push(a):c===P2.OWNER?o.owners.push(a):console.warn(`Cannot map unknown role '${c}'`);return o})}),Hpe=()=>ir(({set:t})=>()=>{t(Lft,r=>r+1)},[]),p8r=()=>{let e=Hpe(),t=_t(c8r);return(0,Nft.useEffect)(()=>()=>{e()},[]),t},kft=p8r;u();u();var ji=Q(De(),1);var $pe=Q(It(),1);u();u();var ox=Q(It(),1),$f=Q(De(),1);u();u();var OD=Q(De(),1),PD=Q(It(),1);var Rft=({className:e,value:t,onDeleteClick:r,disabled:n})=>OD.default.createElement("div",{className:`vkf-pill-root ${e}`},OD.default.createElement("span",{className:"value"},t," "),!n&&OD.default.createElement(rn,{className:"delete-button",onClick:()=>r(t),disabled:n},OD.default.createElement(Fr,{name:"delete"})));Rft.propTypes={value:PD.default.string.isRequired,onDeleteClick:PD.default.func.isRequired,className:PD.default.string,disabled:PD.default.bool};var jft=Rft;var qft=jft;var zft=(0,$f.forwardRef)(function(t,r){let{name:n,onChange:o=()=>{},onBlur:i=()=>{},value:a=[],disabled:c=!1,placeholder:h=""}=t,[m,y]=(0,$f.useState)(a!=null?a:[]),w=(0,$f.useCallback)(A=>{if(!Te(A))return;let P=[...m];P.splice(A,1),y(P),o(P)},[m]),E=(0,$f.useCallback)(A=>{var k;if(A.key!=="Enter")return;let P=(k=A.target.value)!=null?k:"";if(P===""||m.findIndex(z=>z===P)>-1)return;A.target.value="";let D=[...m,P];y(D),o(D)},[m]);return $f.default.createElement("div",{className:"multi-value-input-root"},$f.default.createElement("div",{className:"input-field"},m.map((A,P)=>$f.default.createElement(qft,{className:"pill",key:A,value:A,onDeleteClick:()=>w(P),disabled:c})),$f.default.createElement("input",{className:"vkf-form-input",ref:r,name:n,onKeyDown:E,onBlur:i,disabled:c,placeholder:c?void 0:h})))});zft.propTypes={name:ox.default.string.isRequired,value:ox.default.array,disabled:ox.default.bool,onChange:ox.default.func,onBlur:ox.default.func,placeholder:ox.default.string};var Fft=zft;var Wpe=Fft;u();var f8r=()=>ir(({snapshot:t})=>r=>vt(null,null,function*(){let{id:n,type:o}=yield t.getPromise($o);return o===Za.LOCAL||!Te(n)?Promise.resolve():mrt(n,r)}),[]),Uft=f8r;u();var d8r={owners:P2.OWNER,editors:P2.EDITOR},Bft=(e,t)=>{let r={remove:[],create_or_update:[]};for(let o of Object.values(Tu)){let i=d8r[o];if(!Te(i)||!Te(e[o]))continue;let a=e[o].filter(h=>!t[o].includes(h)),c=t[o].filter(h=>!e[o].includes(h));a=a.map(h=>({user_id:h,role:i})),c=c.map(h=>({user_id:h,role:i})),r.create_or_update.push(...a),r.remove.push(...c)}let n=r.remove.filter(({user_id:o})=>r.create_or_update.findIndex(({user_id:c})=>c===o)===-1);return r.remove=n,r.remove.length===0&&r.create_or_update.length===0?null:r};var Vft="vkf-geojson-roles-form",h8r="PLACEHOLDER",m8r=(e,t)=>{let r=t[Tu.EDITORS],n=t[Tu.OWNERS];for(let o of r)if(n.findIndex(a=>a===o)!==-1)return fe("geojson-roles-form.error.duplicateRoles").replace(h8r,`"${o}"`);return!0},Gft=e=>{let{onCancelClick:t=()=>{},onSubmitted:r=()=>{}}=e,[n,o]=(0,ji.useState)(""),{handleSubmit:i,trigger:a,control:c,formState:{errors:h}}=Cf(),m=kft(),y=Uft(),w=_t($o),E=(0,ji.useMemo)(()=>!Te(w.id),[w.id]),A=(0,ji.useCallback)(j=>{let D=Bft(j,m);if(!Te(D)){r();return}y(D).then(()=>{r()}).catch(k=>{if(console.log(k),k.response){if(k.response.status===401){o(fe("common-errors-http-401"));return}if(k.response.status===403){o(fe("common-errors-http-403"));return}}o(fe("common-errors-unexpected"))})},[r]),P=(0,ji.useCallback)(j=>{j.key==="Enter"&&Object.values(Tu).includes(j.target.name)&&j.preventDefault()},[]);return ji.default.createElement("div",{className:"vkf-geojson-roles-form-root"},ji.default.createElement("div",{className:"intro-text"},E?fe("geojson-roles-form-intro-unsaved"):fe("geojson-roles-form-intro")),ji.default.createElement("form",{id:Vft,onSubmit:i(A),onKeyDown:P},ji.default.createElement("div",{className:jt("vkf-form-control",h[Tu.OWNERS]&&"error")},ji.default.createElement("label",{className:"vkf-form-label"},fe("geojson-roles-owner")),ji.default.createElement(gT,{name:Tu.OWNERS,control:c,defaultValue:m.owners,rules:{required:fe("geojson-roles-form.error.required")},render:({field:j})=>ji.default.createElement(Wpe,Pt(Se({},j),{onChange:D=>{j.onChange(D),a(Tu.EDITORS),o("")},disabled:!y4(w),placeholder:fe("geojson-roles-insert-username")}))}),h[Tu.OWNERS]&&ji.default.createElement("div",{className:"vkf-form-error"},h[Tu.OWNERS].message)),ji.default.createElement("div",{className:jt("vkf-form-control",h[Tu.EDITORS]&&"error")},ji.default.createElement("label",{className:"vkf-form-label"},fe("geojson-roles-authors")),ji.default.createElement(gT,{name:Tu.EDITORS,control:c,defaultValue:m.editors,rules:{validate:m8r},render:({field:j})=>ji.default.createElement(Wpe,Pt(Se({},j),{onChange:D=>{j.onChange(D),a(Tu.EDITORS),o("")},disabled:!_4(w),placeholder:fe("geojson-roles-insert-username")}))}),h[Tu.EDITORS]&&ji.default.createElement("div",{className:"vkf-form-error"},h[Tu.EDITORS].message))),n.length!==""&&ji.default.createElement("div",{className:"error-message"},n),ji.default.createElement("div",{className:"buttons"},ji.default.createElement(rn,{form:Vft,disabled:!_4(w)&&!y4(w),buttonType:"submit",type:"save",className:"submit-button"},ji.default.createElement(Fr,{name:"save"}),fe("geojson-roles-btn-save")),ji.default.createElement(rn,{className:"cancel-button",type:"discard",onClick:t},ji.default.createElement(Fr,{name:"discard"}),fe("geojson-cancel-btn"))))};Gft.propTypes={onCancelClick:$pe.default.func,onSubmitted:$pe.default.func};var Hft=Gft;var Wft=Hft;u();u();var Ype=Q(It(),1),YU=Q(De(),1),$ft=({className:e,resetErrorBoundary:t})=>((0,YU.useEffect)(()=>()=>{t()},[t]),YU.default.createElement("div",{className:e},fe("common-errors-unexpected")));$ft.propTypes={className:Ype.default.string,resetErrorBoundary:Ype.default.func.isRequired};var Yft=$ft;var ZU=Yft;var Zft=({show:e,onClose:t})=>{let r=Hpe(),n=(0,Lm.useCallback)(()=>{t()},[t]);return Lm.default.createElement(Dc,{isOpen:e,onClose:t,title:fe("geojson-roles-modal-title"),renderContent:()=>Lm.default.createElement(O2,{FallbackComponent:ZU,onReset:r},Lm.default.createElement(Lm.Suspense,{fallback:Lm.default.createElement("div",null,"Loading ...")},Lm.default.createElement(Wft,{onCancelClick:t,onSubmitted:n}))),modalClassName:"vkf-dialog-geojson-roles"})};Zft.propTypes={show:Zpe.default.bool,onClose:Zpe.default.func};var Kft=Zft;var Xft=Kft;var Jft=Xft;var g8r=()=>{let e={NONE:0,ROLES:1},[t,r]=(0,nc.useState)(e.NONE),n=_t($o),o=Ir(xs),i=(0,nc.useCallback)(()=>{r(e.NONE)},[]),a=(0,nc.useCallback)(()=>{o(Si.METADATA)},[]),c=(0,nc.useCallback)(()=>{o(Si.HISTORY)},[]),h=(0,nc.useCallback)(()=>{r(e.ROLES)},[]);return nc.default.createElement(nc.default.Fragment,null,s7(n)&&nc.default.createElement(rn,{className:"control-bar-layer-buttons--button layer-metadata-button",onClick:a,title:fe("geojson-control-bar-metadata-btn-title")},nc.default.createElement(Fr,{name:"metadata-panel"})),nc.default.createElement(Aft,{onClick:c}),nc.default.createElement(Dft,{onClick:h}),nc.default.createElement(Jft,{show:t===e.ROLES,onClose:i}))},Qft=g8r;u();u();var km=Q(De(),1);u();var p1=en({key:"geoJsonFeatureDrawState",default:null}),KU=en({key:"undoStylePropertiesState",default:[]}),v8r=()=>{let[e,t]=mo(p1),{handleDeleteFeature:r,handleUpdateFeature:n}=UU(),o=ir(({snapshot:m})=>(P,j,D)=>vt(null,[P,j,D],function*({addOrUpdateProperties:y,removeProperties:w},E,A){let k=yield m.getPromise(rl),z=yield m.getPromise(p1),V=Object.assign({},z);try{let{properties:G}=V,K=Object.assign({},G);for(let se of w)delete K[se];for(let{key:se,value:le}of y)K[se]=le;V.properties=K;let Z=k.get(V.id),{geometry:te}=Z;V.geometry=te,n(V),k.add(V),Te(E)&&typeof E=="function"&&E()}catch(G){Te(A)&&typeof A=="function"&&A(G)}}),[]),i=ir(({snapshot:m,set:y})=>(w,E)=>vt(null,null,function*(){let A=yield m.getPromise(rl),P=yield m.getPromise(p1),{id:j}=P,D=P.properties[w];y(KU,k=>[...k,[j,w,D]]),A.setFeatureProperty(j,w,E),A.add(A.get(j))}),[]),a=ir(({snapshot:m})=>y=>vt(null,null,function*(){let w=yield m.getPromise(rl),E=yield m.getPromise(p1),{id:A}=E;w.delete(A),r(A),Te(y)&&typeof y=="function"&&y()}),[]),c=ir(({snapshot:m,set:y})=>()=>vt(null,null,function*(){let w=yield m.getPromise(KU),E=yield m.getPromise(rl);for(let A of w)E.setFeatureProperty(...A);y(KU,[])}),[]),h=ir(({snapshot:m,set:y})=>(...P)=>vt(null,[...P],function*({skipPanelState:w,skipResetPreview:E,skipDeselect:A}={skipResetPreview:!1,skipPanelState:!1,skipDeselect:!1}){if(!A){let j=yield m.getPromise(rl);Te(j)&&j.changeMode("simple_select",{featureIds:[]})}E||c(),w||y(xs,Si.NONE),y(KU,[]),y(p1,null)}),[c]);return{geoJsonFeature:e,setFeature:t,resetFeature:h,resetFeaturePreview:c,saveFeature:o,saveFeaturePreview:i,deleteFeature:a}},ix=v8r;var edt="user_",tdt={HOT:"mapbox-gl-draw-hot",COLD:"mapbox-gl-draw-cold"},XU={DIRECT_SELECT:"direct_select",SIMPLE_SELECT:"simple_select",DRAW_POLYGON:"draw_polygon",DRAW_LINE_STRING:"draw_line_string"},y8r=e=>{let{source:t}=e,{properties:r}=e,{meta:n,mode:o}=r,i=(t===tdt.COLD||t===tdt.HOT)&&n==="feature",a=o===XU.DIRECT_SELECT||o===XU.SIMPLE_SELECT;return i&&a},_8r=e=>{let{properties:t,type:r,geometry:n}=e,{id:o}=t,i={};for(let a in t){if(!a.startsWith(edt))continue;let c=a.slice(edt.length),h="";try{if(h=JSON.parse(t[a]),typeof h!="object")throw new Error}catch(m){h=t[a]}i[c]=h}return{id:o,geometry:n,properties:i,type:r}},b8r=(e,t)=>{let{x:r,y:n}=e;return[[r-t,n-t],[r+t,n+t]]},x8r=2,w8r=()=>{let{setFeature:e,resetFeature:t,resetFeaturePreview:r}=ix(),n=_t(xs),o=(0,km.useRef)(!1),i=ir(({snapshot:w,set:E})=>A=>vt(null,null,function*(){let P=yield w.getPromise(Qt),j=yield w.getPromise(rl),D=yield w.getPromise(p1),{point:k}=A,z=b8r(k,x8r),V=P.queryRenderedFeatures(z).filter(y8r).at(0);if(Te(V)){let{id:G}=V.properties;if((D==null?void 0:D.id)===G)return;r(),e(_8r(V)),E(xs,Si.FEATURE)}else Te(D)&&!o.current&&([XU.DRAW_LINE_STRING,XU.DRAW_POLYGON].includes(j.getMode())?t({skipDeselect:!0}):t()),o.current=!1}),[e,t,r]),a=(0,km.useCallback)(()=>{t()},[t]),c=ir(({set:w})=>E=>{o.current=!0;let A=E.features[0];e(A),w(xs,Si.FEATURE)},[e]),h=ir(({snapshot:w})=>()=>vt(null,null,function*(){let E=yield w.getPromise(Qt);Te(E)&&(E.on("click",i),E.on("draw.delete",a),E.on("draw.create",c))}),[]),m=ir(({snapshot:w})=>()=>vt(null,null,function*(){let E=yield w.getPromise(Qt);Te(E)&&(E.off("click",i),E.off("draw.delete",a),E.off("draw.create",c))}),[]),y=ir(({snapshot:w})=>E=>vt(null,null,function*(){let A=yield w.getPromise(p1);Te(A)&&E!==Si.FEATURE&&t({skipPanelState:!0})}),[t]);return(0,km.useEffect)(()=>(h(),()=>{m()}),[]),(0,km.useEffect)(()=>{y(n)},[n,y]),km.default.createElement(km.default.Fragment,null)},rdt=w8r;var ndt=rdt;u();var ax=Q(It(),1),Ta=Q(De(),1);u();var Rm=Q(De(),1),DD=Q(It(),1);var odt=({onClose:e,onSave:t,onDiscard:r,show:n})=>{let o=(0,Rm.useCallback)(()=>{t().finally(()=>{e()})},[t,e]);return Rm.default.createElement(Dc,{isOpen:n,title:fe("geojson-discard-modal-title"),modalClassName:"vkf-discard-dialog",onClose:e,renderContent:()=>Rm.default.createElement(Rm.default.Fragment,null,Rm.default.createElement("p",null,fe("geojson-discard-modal-description")),Rm.default.createElement("div",{className:"discard-modal-buttons"},Rm.default.createElement(rn,{type:"discard",onClick:r},fe("geojson-discard-modal-discard-button")),Rm.default.createElement(rn,{type:"save",onClick:o},fe("geojson-discard-modal-save-button"))))})};odt.propTypes={onClose:DD.default.func.isRequired,onDiscard:DD.default.func.isRequired,onSave:DD.default.func.isRequired,show:DD.default.bool.isRequired};var idt=odt;var JU={NONE:0,DISCARD:1},adt=({title:e,onSave:t=()=>Promise.resolve(),onDiscard:r=()=>null,controls:n,content:o,isSaveButtonDisabled:i})=>{let[a,c]=(0,Ta.useState)(!1),[h,m]=(0,Ta.useState)(JU.NONE),y=(0,Ta.useMemo)(()=>{let j=e!=null?e:"";return j===""?`[${fe("geojson-featureview-no-title")}]`:j},[e]),w=(0,Ta.useCallback)(()=>{m(JU.NONE)},[]),E=(0,Ta.useCallback)(()=>(c(!0),t().finally(()=>c(!1))),[t]),A=(0,Ta.useCallback)(()=>{r(),w()},[r]),P=(0,Ta.useCallback)(()=>{m(JU.DISCARD)},[]);return Ta.default.createElement("div",{className:"vkf-geojson-control-bar-root"},Ta.default.createElement("div",{className:"control-bar-header"},Ta.default.createElement("div",{className:"control-bar-title"},y),Ta.default.createElement("div",{className:"control-bar-layer-buttons"},n)),Ta.default.createElement("div",{className:"control-bar-main"},Ta.default.createElement("div",{className:"control-bar-content"},o)),Ta.default.createElement("div",{className:"control-bar-footer"},Ta.default.createElement(rn,{className:"discard-button",onClick:P,type:"discard"},Ta.default.createElement(Fr,{name:"discard"}),fe("geojson-cancel-btn")),Ta.default.createElement(rn,{disabled:i,className:"save-button",onClick:E,loading:a,type:"save"},Ta.default.createElement(Fr,{name:"save"}),fe("geojson-save-btn"))),Ta.default.createElement(idt,{show:h===JU.DISCARD,onSave:E,onDiscard:A,onClose:w}))};adt.propTypes={title:ax.default.string,onSave:ax.default.func,onDiscard:ax.default.func,content:ax.default.element.isRequired,controls:ax.default.element.isRequired,isSaveButtonDisabled:ax.default.bool};var QU=adt;u();var eB=e=>{var r;if(!Te((r=e==null?void 0:e.features)==null?void 0:r.length))return`${fe("geojson-control-bar-no-features")}`;let t=e.features.length;return t>1?`${t} ${fe("geojson-control-bar-feature-plural")}`:t===1?`1 ${fe("geojson-control-bar-feature")}`:`${fe("geojson-control-bar-no-features")}`};var rc={INITIAL:0,SHOW_FEATURE_COUNT:1,NO_TITLE:2,NO_FEATURES:3,UNSAVED_FEATURE_CHANGES:4},sdt=()=>{let{removeDraw:e}=Upe(),t=Eft(),{resetFeaturePreview:r}=ix(),n=_t(kl),o=_t(nl),[i,a]=(0,Yf.useState)(rc.INITIAL);i===rc.INITIAL?Te(n[Ue.title])?o.features.length===0?a(rc.NO_FEATURES):a(rc.SHOW_FEATURE_COUNT):a(rc.NO_TITLE):i===rc.NO_TITLE&&Te(n[Ue.title])&&(o.features.length===0?a(rc.NO_FEATURES):a(rc.SHOW_FEATURE_COUNT));let c=(0,Yf.useMemo)(()=>!Te(n[Ue.title])||n[Ue.title]==="",[n[Ue.title]]),h=(0,Yf.useMemo)(()=>eB(o),[o]),m=(0,Yf.useCallback)(()=>(r(),t()),[r,t]),y=(0,Yf.useCallback)(()=>{e()},[e]);return Yf.default.createElement(QU,{title:n[Ue.title],onSave:m,onDiscard:y,isSaveButtonDisabled:c,controls:Yf.default.createElement(Qft,null),content:Yf.default.createElement(Ift,{onUpdateViewMode:a,viewState:i,formattedFeatureCount:h})})};sdt.propTypes={};var Kpe=sdt;u();var Zf=Q(De(),1);u();var Xpe=Q(De(),1);var f1=()=>{let e=ir(({set:n,snapshot:o})=>()=>vt(null,null,function*(){let i=yield o.getPromise(Qt),a=yield o.getPromise(Ra),{selectedLayer:c}=yield o.getPromise(pu);!Te(i)||!Te(a)||(Te(c)&&!c.isVisible(i)&&c.setVisibility(i,"visible"),a.removeMapLibreLayers(i),n(Cc,Qs.STANDARD),n(Ra,null),n(Ef,Tc.NONE))}),[]),t=ir(({snapshot:n})=>()=>vt(null,null,function*(){let o=yield n.getPromise(Qt);Te(o)&&o._controlContainer.classList.add(A2)}),[]),r=ir(({snapshot:n})=>()=>vt(null,null,function*(){let o=yield n.getPromise(Qt);Te(o)&&o._controlContainer.classList.remove(A2),e()}),[]);return{initializeVectorMapExternalMode:t,removeVectorMapExternalMode:r,exitExternalVectorLayerMode:e}},E8r=()=>{let e=_t(Ef),{shiftRight:t,unShiftLeft:r,unShiftRight:n,removeControlShifts:o}=VU(),{initializeVectorMapExternalMode:i,removeVectorMapExternalMode:a}=f1();return(0,Xpe.useEffect)(()=>(i(),r(),()=>{o(),a()}),[]),(0,Xpe.useEffect)(()=>{e===Tc.METADATA?t():n()},[e]),null},ldt=E8r;u();var sx=Q(De(),1);var S8r=()=>{let e=Ir(Ef),t=(0,sx.useCallback)(()=>{e(Tc.METADATA)},[]);return sx.default.createElement(sx.default.Fragment,null,Snt()&&sx.default.createElement(rn,{className:"control-bar-layer-buttons--button layer-metadata-button",onClick:t,title:fe("geojson-control-bar-metadata-btn-title")},sx.default.createElement(Fr,{name:"metadata-panel"})))},udt=S8r;u();var jm=Q(De(),1),Jpe=Q(It(),1);var cdt=({formattedFeatureCount:e,viewState:t})=>jm.default.createElement(jm.default.Fragment,null,t===Yc.SHOW_FEATURE_COUNT&&jm.default.createElement(jm.default.Fragment,null,jm.default.createElement("span",{className:"bold"},e)," ",fe("geojson-control-bar-hint-features-present")),t===Yc.NO_TITLE&&jm.default.createElement("span",{className:"bold"},fe("geojson-control-bar-hint-add-title")),t===Yc.NO_FEATURES&&jm.default.createElement("span",{className:"bold"},fe("geojson-control-bar-hint-add-content-url")));cdt.propTypes={viewState:Jpe.default.number.isRequired,formattedFeatureCount:Jpe.default.string};var pdt=(0,jm.memo)(cdt);u();u();var tB="/vector_maps_external",fdt=e=>vt(null,null,function*(){let t=mr.getGeoreferenceApiClient(),r=`${tB}/`;return(yield t.post(r,e)).data.id});var ddt=(e,t)=>vt(null,null,function*(){let r=mr.getGeoreferenceApiClient(),n=`${tB}/${e}`;return(yield r.put(n,t)).data}),hdt=e=>vt(null,null,function*(){let t=mr.getGeoreferenceApiClient(),r=`${tB}/${e}`;return(yield t.delete(r)).data.id}),mdt=e=>vt(null,null,function*(){let t=mr.getGeoreferenceApiClient(),r=`${tB}/refresh_search_index/${e}`;yield t.post(r)});var gdt=Q(wO(),1);var T8r=()=>{let{notifyError:e}=c1(),{exitExternalVectorLayerMode:t}=f1(),r=ir(({set:o,snapshot:i})=>()=>vt(null,null,function*(){let a=yield i.getPromise(Ra),c=yield i.getPromise(Qt);if(!Te(a)||!Te(c)){console.error("State error. Cannot save external vector map to database.");return}let h=qoe(a.getMetadata()),m=a.getGeoJson();try{let y=yield fdt(h),w=Wo.fromApplication({metadata:Pt(Se({},a.getMetadata()),{[Ue.id]:y,[Ue.vectorMapId]:y}),geoJson:m});w.addLayerToMap(c),o(jn,E=>[...E,w])}catch(y){Ub(y,e);return}t()}),[]),n=ir(({snapshot:o,set:i})=>()=>vt(null,null,function*(){let a=yield o.getPromise(Ra),c=yield o.getPromise(Qt),{selectedLayer:h}=yield o.getPromise(pu);if(!Te(a)||!Te(c)||!Te(h)){console.error("State error. Cannot save external vector map to database.");return}let m=a.getGeoJson(),y=a.getMetadata()[Ue.vectorMapId],w=oP(h.getMetadata()),E=oP(a.getMetadata()),A=!(0,gdt.default)(w,E);try{if(A)if(yield ddt(y,qoe(E)),fU(h,E),w[Ue.externalContentType]!==E[Ue.externalContentType]){h.removeMapLibreLayers(c);let P=Wo.fromApplication({geoJson:m,metadata:h.getMetadata()});P.addLayerToMap(c),i(jn,j=>{let D=j.findIndex(k=>k.getId()===h.getId());return j[D]=P,[...j]})}else h.setDataOnMap(c,m),i(d0,Date.now())}catch(P){Ub(P,e);return}t()}),[]);return ir(({snapshot:o})=>()=>vt(null,null,function*(){let i=yield o.getPromise(Ra);if(Te(i))return q4(i.getId())?yield r():yield n()}),[])},vdt=T8r;var Yc={INITIAL:0,SHOW_FEATURE_COUNT:1,NO_TITLE:2,NO_FEATURES:3},I8r=()=>{let e=vdt(),[t,r]=(0,Zf.useState)(Yc.INITIAL),n=_t(iz),o=_t(m$e);t===Yc.INITIAL?Te(n[Ue.title])?o.features.length===0?r(Yc.NO_FEATURES):r(Yc.SHOW_FEATURE_COUNT):r(Yc.NO_TITLE):t===Yc.NO_TITLE?Te(n[Ue.title])&&(o.features.length===0?r(Yc.NO_FEATURES):r(Yc.SHOW_FEATURE_COUNT)):t===Yc.NO_FEATURES&&o.features.length>0&&r(Yc.SHOW_FEATURE_COUNT);let i=(0,Zf.useMemo)(()=>eB(o),[o]),a=(0,Zf.useMemo)(()=>{let y=!Te(n[Ue.title])||n[Ue.title]==="",w=!Te(n[Ue.externalContentUrl]),E=!Te(n[Ue.timePeriod])||n[Ue.timePeriod].length===0;return w||E||y},[n]),{exitExternalVectorLayerMode:c}=f1(),h=(0,Zf.useCallback)(()=>{c()},[]),m=(0,Zf.useCallback)(()=>e(),[]);return Zf.default.createElement(QU,{title:n[Ue.title],onDiscard:h,onSave:m,isSaveButtonDisabled:a,content:Zf.default.createElement(pdt,{formattedFeatureCount:i,viewState:t}),controls:Zf.default.createElement(udt,null)})},Qpe=I8r;u();u();var Lp=Q(De(),1);u();var M8r=()=>{let e=ir(({snapshot:n,set:o})=>()=>vt(null,null,function*(){let{selectedLayer:i}=yield n.getPromise(pu),a=i.getMetadata(Ue.vectorMapId),c=i.getId();yield prt(a),o(el,null),o(tl,null),o(jn,h=>h.filter(m=>m.getId()!==c)),nh(o)})),t=ir(({set:n})=>()=>vt(null,null,function*(){nh(n)})),r=ir(({snapshot:n,set:o})=>()=>vt(null,null,function*(){let{selectedLayer:i}=yield n.getPromise(pu),a=i.getId();o(el,null),o(tl,null),o(jn,c=>c.filter(h=>h.getId()!==a)),nh(o)}));return ir(({snapshot:n})=>()=>vt(null,null,function*(){let o=yield n.getPromise($o);if(!Te(o))return;let{type:i,id:a}=o;i===Za.REMOTE?Te(a)?yield e():yield t():yield r()}))},ydt=M8r;u();var d1=Q(It(),1),Kf=Q(De(),1);var _dt=({title:e,introText:t,submitButton:r,onClose:n,dangerZoneComponent:o,showDangerZone:i,formComponent:a})=>{let c=(0,Kf.useCallback)(()=>{n()},[n]);return Kf.default.createElement("div",{className:"geojson-metadata-panel-root"},Kf.default.createElement(Pf,{title:e,onCloseClick:c}),Kf.default.createElement("div",{className:"geojson-metadata-panel-content"},Kf.default.createElement("div",{className:"introduction-text content-padding"},t),Kf.default.createElement("div",{className:"metadata-form-container content-padding"},a),i&&Kf.default.createElement("div",{className:"danger-zone-container"},o)),Kf.default.createElement("div",{className:"footer-container"},r,Kf.default.createElement(rn,{className:"discard-button",onClick:c,type:"discard"},Kf.default.createElement(Fr,{name:"discard"}),fe("geojson-cancel-btn"))))};_dt.propTypes={introText:d1.default.string.isRequired,title:d1.default.string.isRequired,onClose:d1.default.func.isRequired,showDangerZone:d1.default.bool.isRequired,formComponent:d1.default.element.isRequired,dangerZoneComponent:d1.default.element.isRequired,submitButton:d1.default.element.isRequired};var rB=_dt;u();u();var efe=Q(It(),1),sa=Q(De(),1);u();u();var Zc=Q(De(),1);var ND=Q(It(),1);var bdt=(e,t)=>{let r=Mc(e),n=Mc(t);return r<=n},xdt=({startFieldName:e,endFieldName:t,showLabels:r=!0,required:n=!0})=>{let{trigger:o,control:i,formState:{errors:a}}=mT(),c=(0,Zc.useCallback)((m,{field:y,formState:w})=>{y.onChange(m),w.errors[t]&&o(t)},[]),h=(0,Zc.useCallback)((m,{field:y,formState:w})=>{y.onChange(m),w.errors[e]&&o(e)},[]);return Zc.default.createElement("div",{className:"time-period-field-root"},Zc.default.createElement("div",{className:"time-period-field-container"},Zc.default.createElement("div",{className:jt("vkf-form-control",a[e]&&"error")},r&&Zc.default.createElement("label",{className:"vkf-form-label",htmlFor:e},fe("geojson-label-timePeriod-start")),Zc.default.createElement(gT,{control:i,name:e,render:({field:m,formState:y})=>Zc.default.createElement(WT,Pt(Se({},m),{onChange:w=>c(w,{field:m,formState:y}),className:"vkf-form-input",placeholder:fe("geojson-editfeature-input-placeholder-date")})),rules:{required:n,validate:(m,{[t]:y})=>{let w=doe(m)&&bdt(m,y);return n?w:m===""||w}}})),Zc.default.createElement("div",{className:jt("vkf-form-control",a[t]&&"error")},r&&Zc.default.createElement("label",{className:"vkf-form-label",htmlFor:t},fe("geojson-label-timePeriod-end")),Zc.default.createElement(gT,{control:i,name:t,render:({field:m,formState:y})=>Zc.default.createElement(WT,Pt(Se({},m),{onChange:w=>h(w,{field:m,formState:y}),className:"vkf-form-input",placeholder:fe("geojson-editfeature-input-placeholder-date")})),rules:{required:n,validate:(m,{[e]:y})=>{let w=doe(m)&&bdt(y,m);return n?w:m===""||w}}}))))};xdt.propTypes={startFieldName:ND.default.string.isRequired,endFieldName:ND.default.string.isRequired,showLabels:ND.default.bool,required:ND.default.bool};var wdt=xdt;var D2=wdt;var C8r=e=>e===""||Dd(e),tfe=({formId:e,onValidatedFormSubmit:t})=>{var E;let r=_t(kl),[n,o]=(0,sa.useState)((E=r[Ue.thumbnailUrl])!=null?E:""),i=(0,sa.useMemo)(()=>xft(r),[]),a=Cf({defaultValues:i}),{register:c,handleSubmit:h,formState:{errors:m}}=a,y=(0,sa.useCallback)(A=>o(A.target.value),[]),w=(0,sa.useCallback)(A=>{let P=wft(A);t(P)},[t]);return sa.default.createElement(M0,Se({},a),sa.default.createElement("form",{className:"geojson-metadata-form-root",id:e,onSubmit:h(w)},sa.default.createElement("div",{className:"geojson-metadata-form-fields"},sa.default.createElement("div",{className:jt("vkf-form-control",m[Ue.title]&&"error")},sa.default.createElement("label",{className:"vkf-form-label",htmlFor:Ue.title},fe("geojson-metadata-title")),sa.default.createElement("input",Se({className:"vkf-form-input",placeholder:fe("geojson-placeholder-title")},c(Ue.title,{required:!0})))),sa.default.createElement(D2,{startFieldName:Jh,endFieldName:Qh}),sa.default.createElement("div",{className:jt("vkf-form-control",m[Ue.description]&&"error")},sa.default.createElement("label",{className:"vkf-form-label",htmlFor:Ue.description},fe("geojson-metadata-description")),sa.default.createElement("textarea",Se({className:"vkf-form-textarea",placeholder:fe("geojson-placeholder-description")},c(Ue.description)))),sa.default.createElement("div",{className:jt("vkf-form-control",m[Ue.thumbnailUrl]&&"error")},sa.default.createElement("label",{className:"vkf-form-label",htmlFor:Ue.thumbnailUrl},fe("geojson-metadata-thumbnailUrl")),sa.default.createElement("div",{className:"image-with-fallback-container"},sa.default.createElement(Am,{imageUrl:n,showPlaceholder:!0,imageAsPreview:!0})),sa.default.createElement("input",Se({className:"vkf-form-input",placeholder:fe("geojson-placeholder-thumbnailUrl")},c(Ue.thumbnailUrl,{onBlur:y,validate:C8r})))))))};tfe.defaultPropTypes={};tfe.propTypes={onValidatedFormSubmit:efe.default.func.isRequired,formId:efe.default.string.isRequired};var Edt=(0,sa.memo)(tfe);var Sdt=Edt;u();var Np=Q(De(),1);u();var nB=Q(De(),1),Tdt=Q(It(),1);var Idt=({children:e})=>nB.default.createElement("div",{className:"danger-zone-root"},nB.default.createElement("p",{className:"text text-header"},"danger zone"),nB.default.createElement("div",{className:"danger-zone-content"},e));Idt.propTypes={children:Tdt.default.node};var N2=Idt;u();u();var qm=Q(De(),1),LD=Q(It(),1);var Mdt=({show:e,onClose:t,onDelete:r,description:n})=>qm.default.createElement(Dc,{isOpen:e,onClose:t,title:fe("geojson-deletemodal-title"),renderContent:()=>qm.default.createElement(qm.default.Fragment,null,qm.default.createElement("p",null,n),qm.default.createElement("div",{className:"delete-feature-modal-buttons"},qm.default.createElement(BP,{className:"delete-btn",onClick:r,type:"delete"},qm.default.createElement(Fr,{name:"delete"}),fe("geojson-deletemodal-delete-btn")),qm.default.createElement(BP,{className:"cancel-btn",onClick:t,type:"discard"},qm.default.createElement(Fr,{name:"discard"}),fe("geojson-cancel-btn")))),modalClassName:"vkf-delete-dialog"});Mdt.propTypes={show:LD.default.bool,onClose:LD.default.func,onDelete:LD.default.func,description:LD.default.string};var Cdt=Mdt;var L2=Cdt;var Adt=Q(It(),1),kD={INITIAL:0,DELETE_DIALOG:1},Odt=({onDelete:e})=>{let[t,r]=(0,Np.useState)(kD.INITIAL),n=(0,Np.useCallback)(()=>{t!==kD.DELETE_DIALOG&&r(kD.DELETE_DIALOG)},[t]),o=(0,Np.useCallback)(()=>{r(kD.INITIAL)},[]),i=(0,Np.useCallback)(()=>{e()},[e]);return Np.default.createElement(N2,null,Np.default.createElement("p",{className:"text text-description"},fe("geojson-metadata-panel-delete")),Np.default.createElement(rn,{className:"delete-button",onClick:n,type:"delete"},Np.default.createElement(Fr,{name:"delete"}),Np.default.createElement("p",{className:"text text-button"},fe("geojson-metadata-panel-delete-btn"))),Np.default.createElement(L2,{show:t===kD.DELETE_DIALOG,onClose:o,onDelete:i,description:fe("geojson-metadata-delete-vector")}))};Odt.propTypes={onDelete:Adt.default.func.isRequired};var Pdt=Odt;var Ddt="vkf-geojson-metadata-form",Ndt=()=>{let e=Ir(kl),t=Ir(xs),r=_t($o),n=ydt(),{introText:o,title:i}=(0,Lp.useMemo)(()=>{if(!Te(r))return{introText:"",title:""};let{type:y,id:w}=r,E={introText:fe("geojson-metadata-panel-intro-edit"),title:fe("geojson-metadata-panel-header-edit")},A={introText:fe("geojson-metadata-panel-intro-create"),title:fe("geojson-metadata-panel-header-create")};return y===Za.REMOTE?Te(w)?E:A:E},[r]),a=(0,Lp.useMemo)(()=>{if(!Te(r))return!1;let{type:y,id:w}=r;return y===Za.REMOTE&&Te(w)},[r]),c=(0,Lp.useCallback)(()=>{n()},[n]),h=(0,Lp.useCallback)(()=>{t(Si.NONE)},[]),m=(0,Lp.useCallback)(y=>{e(y),h()},[]);return Lp.default.createElement(rB,{introText:o,title:i,onClose:h,onDelete:c,showDangerZone:a,dangerZoneComponent:Lp.default.createElement(Pdt,{onDelete:c}),formComponent:Lp.default.createElement(Sdt,{onValidatedFormSubmit:m,formId:Ddt}),submitButton:Lp.default.createElement(rn,{className:"save-button",type:"save",buttonType:"submit",form:Ddt},Lp.default.createElement(Fr,{name:"save"}),fe("geojson-apply-btn"))})};Ndt.propTypes={};var rfe=Ndt;u();u();var kp=Q(De(),1);u();var Ldt=Q(It(),1),si=Q(De(),1);var nfe=en({key:"isExternalVectorMapFormLoadingState",default:!1}),kdt=({onValidatedFormSubmit:e})=>{var A;let t=_t(iz),[r,n]=(0,si.useState)((A=t[Ue.thumbnailUrl])!=null?A:""),o=Ir(nfe),i=(0,si.useMemo)(()=>s$e(t),[t]),a=Cf({defaultValues:i}),{register:c,handleSubmit:h,setError:m,formState:{errors:y}}=a,w=(0,si.useCallback)(P=>n(P.target.value),[]),E=ir(({snapshot:P})=>j=>vt(null,null,function*(){o(!0);let k=(yield P.getPromise(Ra)).getMetadata()[Ue.externalContentUrl],z=j[Ue.externalContentUrl],V=k!==z,G=l$e(j);try{if(V){let Z=(yield Ya.get(z,{headers:{accept:"application/json"},timeout:1e4})).data;u$e(Z),e({geoJson:Z,metadata:G})}else e({metadata:G})}catch(K){console.error(K),m(Ue.externalContentUrl,{type:"custom",message:"custom message"},{shouldFocus:!0})}o(!1)}),[e]);return si.default.createElement(M0,Se({},a),si.default.createElement("form",{className:"geojson-metadata-form-root",id:Zq,onSubmit:h(E)},si.default.createElement("div",{className:"geojson-metadata-form-fields"},si.default.createElement("div",{className:jt("vkf-form-control",y[Ue.title]&&"error")},si.default.createElement("label",{className:"vkf-form-label",htmlFor:Ue.title},fe("geojson-metadata-title")),si.default.createElement("input",Se({className:"vkf-form-input",placeholder:fe("geojson-placeholder-title")},c(Ue.title,{required:!0})))),si.default.createElement("div",{className:jt("vkf-form-control",y[Ue.externalContentType]&&"error")},si.default.createElement("label",{className:"vkf-form-label",htmlFor:Ue.externalContentType},fe("geojson-metadata-externalContentType")),si.default.createElement(_F,Pt(Se({className:"vkf-form-input"},c(Ue.externalContentType,{required:!0})),{options:a$e}))),si.default.createElement("div",{className:jt("vkf-form-control",y[Ue.externalContentUrl]&&"error")},si.default.createElement("label",{className:"vkf-form-label",htmlFor:Ue.externalContentUrl},fe("geojson-metadata-externalContentUrl")),si.default.createElement("input",Se({className:"vkf-form-input",placeholder:fe("geojson-placeholder-externalContentUrl")},c(Ue.externalContentUrl,{required:!0,validate:P=>Dd(P)})))),si.default.createElement(D2,{startFieldName:Jh,endFieldName:Qh}),si.default.createElement("div",{className:jt("vkf-form-control",y[Ue.description]&&"error")},si.default.createElement("label",{className:"vkf-form-label",htmlFor:Ue.description},fe("geojson-metadata-description")),si.default.createElement("textarea",Se({className:"vkf-form-textarea",placeholder:fe("geojson-placeholder-description")},c(Ue.description)))),si.default.createElement("div",{className:jt("vkf-form-control",y[Ue.thumbnailUrl]&&"error")},si.default.createElement("label",{className:"vkf-form-label",htmlFor:Ue.thumbnailUrl},fe("geojson-metadata-thumbnailUrl")),si.default.createElement("div",{className:"image-with-fallback-container"},si.default.createElement(Am,{imageUrl:r,showPlaceholder:!0,imageAsPreview:!0})),si.default.createElement("input",Se({className:"vkf-form-input",placeholder:fe("geojson-placeholder-thumbnailUrl")},c(Ue.thumbnailUrl,{onBlur:w,validate:P=>P===""||Dd(P)})))))))};kdt.propTypes={onValidatedFormSubmit:Ldt.default.func.isRequired};var Rdt=(0,si.memo)(kdt);u();var A8r=()=>{let{zoomToExtent:e}=k0();return{updateExternalVectorMapLayer:ir(({snapshot:r,set:n})=>a=>vt(null,[a],function*({metadata:o,geoJson:i}){let c=yield r.getPromise(Qt),h=yield r.getPromise(Ra);if(!Te(c)||!Te(h))return;let m=h.getMetadata(Ue.externalContentType);if(Te(i)){let y=Wo.toApplicationState(i);h.setDataOnMap(c,y),e(h)}if(fU(h,o),o[Ue.externalContentType]!==m){h.removeMapLibreLayers(c);let y=Wo.fromApplication({geoJson:h.getGeoJson(),metadata:h.getMetadata()});y.addLayerToMap(c),n(Ra,y)}else n(oz,y=>y+1)}),[])}},jdt=A8r;u();var O8r=()=>{let{notifyError:e}=c1();return ir(({snapshot:r,set:n})=>()=>vt(null,null,function*(){let o=yield r.getPromise(Qt),i=yield r.getPromise(Ra),{selectedLayer:a}=yield r.getPromise(pu);if(!Te(o)||!Te(i)||!Te(a)){console.error("Undefined state. Cannot delete vector map from database");return}let c=i.getMetadata()[Ue.vectorMapId];try{yield hdt(c),a.removeMapLibreLayers(o),n(jn,h=>h.filter(m=>m.getId()!==c)),n(tl,null)}catch(h){Ub(h,e)}}),[])},qdt=O8r;u();var zdt=ldt;u();var ofe=Q(De(),1);var P8r=()=>{let e=_t(nfe);return ofe.default.createElement(rn,{className:"save-button",type:"save",buttonType:"submit",form:Zq,loading:e},ofe.default.createElement(Fr,{name:"save"}),fe("geojson-apply-btn"))},Fdt=P8r;u();var ns=Q(De(),1);var ife=Q(It(),1);var RD={INITIAL:0,DELETE_DIALOG:1},Udt=({onDelete:e,onRefresh:t})=>{let[r,n]=(0,ns.useState)(!1),[o,i]=(0,ns.useState)(RD.INITIAL),a=(0,ns.useCallback)(()=>vt(null,null,function*(){n(!0);try{yield t()}catch(y){console.error(y)}n(!1)}),[t]),c=(0,ns.useCallback)(()=>{o!==RD.DELETE_DIALOG&&i(RD.DELETE_DIALOG)},[o]),h=(0,ns.useCallback)(()=>{i(RD.INITIAL)},[]),m=(0,ns.useCallback)(()=>{e()},[e]);return ns.default.createElement(N2,null,ns.default.createElement("div",{className:"metadata-external-container"},ns.default.createElement("div",null,ns.default.createElement("p",{className:"text text-description"},fe("geojson-metadata-panel-refresh")),ns.default.createElement(rn,{className:"refresh-button",onClick:a,type:"primary",loading:r},ns.default.createElement("p",{className:"text text-button"},fe("geojson-metadata-panel-refresh-btn")))),ns.default.createElement("div",null,ns.default.createElement("p",{className:"text text-description"},fe("geojson-metadata-panel-delete")),ns.default.createElement(rn,{className:"delete-button",onClick:c,type:"delete"},ns.default.createElement(Fr,{name:"delete"}),ns.default.createElement("p",{className:"text text-button"},fe("geojson-metadata-panel-delete-btn"))))),ns.default.createElement(L2,{show:o===RD.DELETE_DIALOG,onClose:h,onDelete:m,description:fe("geojson-metadata-delete-vector")}))};Udt.propTypes={onDelete:ife.default.func.isRequired,onRefresh:ife.default.func.isRequired};var Bdt=Udt;u();var D8r=()=>{let{notifySuccess:e,notifyError:t}=c1();return ir(({snapshot:r})=>()=>vt(null,null,function*(){let o=(yield r.getPromise(Ra)).getMetadata()[Ue.vectorMapId];try{yield mdt(o),e("geojson-metadata-panel-notify-refresh")}catch(i){Ub(i,t)}}),[])},Vdt=D8r;var N8r=()=>{let e=Vdt(),t=qdt(),{updateExternalVectorMapLayer:r}=jdt(),{exitExternalVectorLayerMode:n}=f1(),o=_t(g$e),i=Ir(Ef),a=(0,kp.useMemo)(()=>Te(o)&&!q4(o),[o]),{introText:c,title:h}=(0,kp.useMemo)(()=>Te(o)?q4(o)?{introText:fe("geojson-metadata-panel-intro-create-external"),title:fe("geojson-metadata-panel-header-create")}:{introText:fe("geojson-metadata-panel-intro-edit-external"),title:fe("geojson-metadata-panel-header-edit")}:{introText:"",title:""},[o]),m=(0,kp.useCallback)(({geoJson:A,metadata:P})=>{r({metadata:P,geoJson:A}),y()},[]),y=(0,kp.useCallback)(()=>i(Tc.NONE),[]),w=(0,kp.useCallback)(()=>{t().then(()=>n())},[]),E=(0,kp.useCallback)(()=>e(),[]);return kp.default.createElement(rB,{onClose:y,onDelete:w,introText:c,title:h,showDangerZone:a,dangerZoneComponent:kp.default.createElement(Bdt,{onDelete:w,onRefresh:E}),formComponent:kp.default.createElement(Rdt,{onValidatedFormSubmit:m}),submitButton:kp.default.createElement(Fdt,null)})},Gdt=N8r;var afe=Gdt;u();u();var qa=Q(De(),1),ph=Q(It(),1);u();u();var k2=Q(De(),1),oB=Q(It(),1);var Hdt=({description:e,onDeleteClick:t,buttonLabel:r})=>k2.default.createElement(N2,null,k2.default.createElement("p",{className:"text text-description"},e),k2.default.createElement(rn,{className:"delete-button",onClick:t,type:"delete"},k2.default.createElement(Fr,{name:"delete"}),k2.default.createElement("p",{className:"text text-button"},r)));Hdt.propTypes={description:oB.default.string.isRequired,onDeleteClick:oB.default.func.isRequired,buttonLabel:oB.default.string.isRequired};var Wdt=Hdt;var $dt=Wdt;u();u();var Bo=Q(De(),1);var xv=Q(It(),1);u();var ux=Q(De(),1),lx=Q(It(),1);var Ydt=(0,ux.forwardRef)(function(h,c){var m=h,{title:t,value:r,onChange:n,onBlur:o,id:i}=m,a=En(m,["title","value","onChange","onBlur","id"]);return ux.default.createElement("div",{className:"style-field-root"},ux.default.createElement("div",{className:"vkf-form-control"},ux.default.createElement("label",{htmlFor:i,className:"vkf-form-label"},t),ux.default.createElement("input",Se({id:i,className:"vkf-form-input",defaultValue:r,onChange:n,onBlur:o,ref:c},a))))});Ydt.propTypes={title:lx.default.string.isRequired,value:lx.default.any,inputProps:lx.default.object,onChange:lx.default.func,onBlur:lx.default.func,id:lx.default.string.isRequired};var Zdt=Ydt;u();u();var sfe="FF",lfe=e=>Number(e.toFixed(0)).toString(16).padStart(2,"0"),L8r=(e,{useAlpha:t}={useAlpha:!1})=>{let r=e.split("(")[1].split(")")[0].split(",").map(n=>parseInt(n,10)).map(lfe).join("");return t?`#${r}${sfe}`:`#${r}`},k8r=(e,{useAlpha:t}={useAlpha:!1})=>{let r=e.split("(")[1].split(")")[0].split(","),n=r.slice(0,3).map(i=>parseInt(i,10)).map(lfe).join(""),o=lfe(parseFloat(r[3])*255);return t?`#${n}${o}`:`#${n}`},R8r=(e,{useAlpha:t}={useAlpha:!1})=>{let r=e.trim();if(r.startsWith("rgba"))return k8r(r,{useAlpha:t});if(r.startsWith("rgb"))return L8r(r,{useAlpha:t});if(r.startsWith("#"))if(e.length===4){let n=e.slice(1,3).map(o=>`${o}${o}`);return t?`#${n}${sfe}`:`#${n}`}else{if(e.length===7)return t?`${e}${sfe}`:e;if(e.length===9)return t?e:e.slice(0,7)}throw new Error("Unknown color format")},j8r=e=>{let t={blue:"#0000ff",green:"#008000",orange:"#ffa500",pink:"#ffc0cb",yellow:"#ffff00"};if(!Te(e)&&typeof e!="string")throw new Error("No input specified");let r=e.trim().toLowerCase();if(!Object.hasOwn(t,r))throw new Error("No matching legacy color found");return t[r]},Kdt=e=>{let t=e;try{t=R8r(e)}catch(r){t=j8r(e)}return t};var q8r=e=>{var n,o;if(!Array.isArray(e))return{timeStart:"",timeEnd:""};let t=(n=Ol(e[0]))!=null?n:"",r=(o=Ol(e[1]))!=null?o:"";return{timeStart:t,timeEnd:r}},z8r=(e,t)=>{if(e===""||t==="")return[];let r=Mc(e).valueOf(),n=Mc(t).valueOf();return Number.isNaN(r)||Number.isNaN(n)?[]:[r,n]},F8r=e=>{var o,i;let t=(o=e==null?void 0:e.geometry)==null?void 0:o.type,r=NHe[t],n=[];for(let a in r){let c=(i=e.properties[a])!=null?i:r[a],h=iB(a,c);n.push({name:a,value:h})}return n},U8r=e=>{var r;let t={};for(let n of NS){let o=(r=e.properties[n])!=null?r:"";t[n]=o}return t},B8r=e=>{let t=g2(e),r=[];for(let n in t){let o=t[n];if(!NS.includes(n)&&typeof o!="object"){if(typeof o=="boolean"){r.push({name:n,value:`${o}`});continue}r.push({name:n,value:o})}}return r},Xdt=e=>{let h=U8r(e),{time:r}=h,n=En(h,["time"]),{timeStart:o,timeEnd:i}=q8r(r),a=B8r(e),c=F8r(e);return Pt(Se({timeStart:o,timeEnd:i},n),{customProps:a,styleProps:c})},Jdt=e=>{let{img_link:t,title:r,description:n,timeStart:o,timeEnd:i,customProps:a,styleProps:c}=e,h=z8r(o,i),m=Object.fromEntries(a.filter(w=>w.name!==""||w.value!=="").map(w=>[w.name,w.value])),y=Object.fromEntries(c.map(w=>{let E=iB(w.name,w.value);return[w.name,E]}));return Se(Se(Pt(Se({},h.length>0&&{time:h}),{title:r,description:n,img_link:t}),m),y)},iB=(e,t)=>{let{type:r,min:n,max:o}=JO[e],i=t;if(r==="number")i=Number.isNaN(Number.parseFloat(i))?1:parseFloat(i),i=Te(n)?Math.max(n,i):i,i=Te(o)?Math.min(o,i):i;else if(r==="color")try{i=Kdt(i)}catch(a){i=fn[Mr.SYMBOL].COLOR}return i},V8r=e=>`${e}`.trim().length!==0,G8r=e=>!Number.isNaN(Number.parseFloat(e)),Qdt=(e,t,r)=>{let n=t.customProps[r].value,o=e,i=t.customProps.filter((c,h)=>h!==r).filter(c=>c.name!=="").map(c=>c.name.toLowerCase()),a=[...NS,...i];return!(o.trim().length===0&&`${n}`.trim().length>0||a.includes(o.toLowerCase().trim()))},eht=(e,t,r,n)=>!(t.customProps[r].name.trim().length>0&&(n&&!G8r(e)||!n&&!V8r(e)));u();u();var oc=Q(De(),1);var ufe=Q(It(),1);var tht=(0,oc.forwardRef)(function(t,r){let[n,o]=(0,oc.useState)(t.defaultValue),i=(0,oc.useCallback)(a=>{o(a.target.value),t.onBlur(a)},[t.onBlur]);return oc.default.createElement(oc.default.Fragment,null,oc.default.createElement("div",{className:"vkf-form-control non-style-property-item"},oc.default.createElement("label",{className:"vkf-form-label with-border"},fe("geojson-featureview-image-title")),oc.default.createElement(Am,{imageUrl:n,showPlaceholder:!0,imageAsPreview:!0})),oc.default.createElement("div",{className:"vkf-form-control non-style-property-item"},oc.default.createElement("label",{className:"vkf-form-label with-border"},"img_link"),oc.default.createElement("input",Pt(Se({className:"vkf-form-input"},t),{onBlur:i,placeholder:fe("geojson-editfeature-input-placeholder"),ref:r}))))});tht.propTypes={defaultValue:ufe.default.string.isRequired,onBlur:ufe.default.func.isRequired};var rht=tht;var nht=rht;u();u();var jD=Q(De(),1);var oht=Q(It(),1);var iht=({onClick:e})=>jD.default.createElement("div",{className:"add-field-button-root"},jD.default.createElement(rn,{className:"add-field-button",buttonType:"button",onClick:e},jD.default.createElement(Fr,{name:"add"}),jD.default.createElement("p",{className:"add-field-button-text"},fe("geojson-editfeature-add-new-field-button"))));iht.propTypes={onClick:oht.default.func.isRequired};var aht=iht;var sht=aht;u();u();var aB=Q(De(),1);var lht=Q(It(),1);var uht=({onClick:e})=>aB.default.createElement(rn,{className:"remove-field-button",type:"discard",onClick:e},aB.default.createElement("p",null,fe("geojson-featureview-delete-field-btn")),aB.default.createElement(Fr,{name:"delete"}));uht.propTypes={onClick:lht.default.func.isRequired};var cht=uht;var pht=cht;var fht=({feature:e,onSavePreview:t,onFormSubmit:r})=>{let n=(0,Bo.useMemo)(()=>Xdt(e),[e.id]),{img_link:o,title:i,description:a}=n,c=Cf({defaultValues:n}),{register:h,handleSubmit:m,formState:{errors:y},control:w}=c,E=(0,Bo.useCallback)(G=>{G=Jdt(G),r(G)},[r]),{fields:A}=ase({name:"styleProps",control:w}),{fields:P,append:j,remove:D}=ase({name:"customProps",control:w}),k=(0,Bo.useCallback)(G=>{D(G)},[D]),z=(0,Bo.useCallback)(()=>{j([{name:"",value:""}])},[j]),V=(0,Bo.useCallback)(G=>{let{key:K,target:Z}=G;K!=="Enter"||Z instanceof HTMLTextAreaElement||G.preventDefault()},[]);return Bo.default.createElement(M0,Se({},c),Bo.default.createElement("form",{id:cfe,onSubmit:m(E),noValidate:!0,onKeyDown:V},Bo.default.createElement("div",{className:"feature-properties-form-root"},Bo.default.createElement("div",{className:"style-property-header"},Bo.default.createElement("p",{className:"header-text"},fe("geojson-editfeature-style-header"))),Bo.default.createElement("div",{className:"style-fields"},A.map((G,K)=>{let Z=G.name,te=JO[Z],pe=h(`styleProps.${K}.value`),{onChange:se}=pe,le=En(pe,["onChange"]);return Bo.default.createElement(Zdt,Se(Pt(Se({},le),{onChange:me=>{let _e=iB(Z,me.target.value);t(Z,_e),se(me)},key:G.id,id:G.id,title:Z}),te))})),Bo.default.createElement("div",{className:"non-style-fields"},Bo.default.createElement(nht,Pt(Se({},h("img_link")),{defaultValue:o})),Bo.default.createElement("div",{className:"vkf-form-control non-style-property-item"},Bo.default.createElement("label",{className:"vkf-form-label with-border",htmlFor:"vkf-props-title"},"title"),Bo.default.createElement("input",Pt(Se({id:"vkf-props-title",className:"vkf-form-input"},h("title")),{defaultValue:i,placeholder:fe("geojson-editfeature-input-placeholder")}))),Bo.default.createElement("div",{className:"vkf-form-control non-style-property-item"},Bo.default.createElement("label",{className:"vkf-form-label with-border",htmlFor:"vkf-props-description"},"description"),Bo.default.createElement("input",Pt(Se({id:"vkf-props-description",className:"vkf-form-input"},h("description")),{defaultValue:a,placeholder:fe("geojson-editfeature-input-placeholder")}))),Bo.default.createElement("div",{className:"time-period-field-wrapper"},Bo.default.createElement("label",{className:"vkf-form-label with-border"},"time"),Bo.default.createElement(D2,{startFieldName:"timeStart",endFieldName:"timeEnd",showLabels:!1,required:!1})),P.map((G,K)=>{var le,pe,me,_e;let Z=typeof G.value=="number",te=h(`customProps.${K}.name`,{validate:(de,Ce)=>Qdt(de,Ce,K)}),se=h(`customProps.${K}.value`,{validate:(de,Ce)=>eht(de,Ce,K,Z),valueAsNumber:Z});return Bo.default.createElement("div",{key:G.id,className:"custom-field-wrapper"},Bo.default.createElement("div",{className:jt("vkf-form-control ",((pe=(le=y==null?void 0:y.customProps)==null?void 0:le[K])==null?void 0:pe.name)&&"error")},Bo.default.createElement("input",Pt(Se({},te),{className:"vkf-form-input as-label",placeholder:fe("geojson-editfeature-label-placeholder")}))),Bo.default.createElement("div",{className:jt("vkf-form-control ",((_e=(me=y==null?void 0:y.customProps)==null?void 0:me[K])==null?void 0:_e.value)&&"error")},Bo.default.createElement("input",Pt(Se({},se),{type:Z?"number":void 0,className:"vkf-form-input",placeholder:fe("geojson-editfeature-input-placeholder")})),Bo.default.createElement(pht,{onClick:()=>k(K)})))}),Bo.default.createElement(sht,{onClick:z})))))};fht.propTypes={feature:xv.default.shape({properties:xv.default.object,geometry:xv.default.object,id:xv.default.oneOfType([xv.default.string,xv.default.number])}).isRequired,onSavePreview:xv.default.func.isRequired,onFormSubmit:xv.default.func.isRequired};var dht=fht;var hht=dht;var cfe="feature-properties-form",pfe=e=>{let{feature:t,onDelete:r,onClose:n,onSave:o,onSavePreview:i}=e,[a,c]=(0,qa.useState)(!1),h=(0,qa.useCallback)(()=>{n({doRemoveFeatureState:!0})},[n]),m=(0,qa.useCallback)(()=>{c(A=>!A)},[]),y=(0,qa.useCallback)(()=>{c(!1)},[c]),w=(0,qa.useCallback)(()=>{r(t),m()},[r,t,m]),E=(0,qa.useCallback)(A=>{let P=Zct({oldProperties:t.properties,newProperties:A});o(P)},[]);return qa.default.createElement("div",{className:"geojson-feature-edit-panel-root vkf-geojson-feature-view-content full-height"},qa.default.createElement(Pf,{title:fe("geojson-editview-header-text"),onCloseClick:n}),qa.default.createElement("div",{className:"geojson-feature-edit-panel-content"},qa.default.createElement("div",{className:"introduction-text"},fe("geojson-editview-intro-text")),qa.default.createElement(hht,{feature:t,onFormSubmit:E,onSavePreview:i}),qa.default.createElement("div",{className:"danger-zone-container"},qa.default.createElement($dt,{description:fe("geojson-editfeature-danger-zone-title"),onDeleteClick:m,buttonLabel:fe("geojson-featureview-delete-btn")}))),qa.default.createElement("div",{className:"footer-container"},qa.default.createElement(rn,{form:cfe,className:"save-button",type:"save"},qa.default.createElement(Fr,{name:"save"}),fe("geojson-apply-btn")),qa.default.createElement(rn,{className:"discard-button",onClick:h,type:"discard"},qa.default.createElement(Fr,{name:"discard"}),fe("geojson-cancel-btn"))),qa.default.createElement(L2,{show:a,onClose:y,onDelete:w,description:fe("geojson-deletemodal-body")}))};pfe.defaultPropTypes={onSavePreview:()=>{}};pfe.propTypes={feature:ph.default.shape({id:ph.default.oneOfType([ph.default.number,ph.default.string]).isRequired,geometry:ph.default.object.isRequired,properties:ph.default.object.isRequired}).isRequired,onClose:ph.default.func.isRequired,onDelete:ph.default.func.isRequired,onSave:ph.default.func.isRequired,onSavePreview:ph.default.func};var mht=pfe;u();var wv=Q(De(),1),R2=Q(It(),1);var ffe=({geoJsonFeature:e,saveFeature:t,saveFeaturePreview:r,deleteFeature:n,resetFeature:o})=>{let i=(0,wv.useCallback)(m=>{o(m)},[o]),a=(0,wv.useCallback)(m=>{t(m,()=>{i({skipResetPreview:!0})},()=>{console.error("The feature could not be saved"),i()})},[t,i]),c=(0,wv.useCallback)((m,y)=>{r(m,y)},[r]),h=(0,wv.useCallback)(()=>{n(()=>i())},[n,i]);return wv.default.createElement(wv.default.Fragment,null,wv.default.createElement(ght,{key:e.id,feature:e,onDelete:h,onClose:i,onSave:a,onSavePreview:c}))};ffe.defaultPropTypes={saveFeaturePreview:()=>{}};ffe.propTypes={geoJsonFeature:R2.default.object.isRequired,resetFeature:R2.default.func.isRequired,saveFeature:R2.default.func.isRequired,deleteFeature:R2.default.func.isRequired,saveFeaturePreview:R2.default.func};var dfe=ffe;var ght=mht;u();var Fs=Q(De(),1);u();var hfe=Q(De(),1);u();var cx=Q(It(),1),fh=Q(De(),1);u();var vht=()=>ir(({snapshot:e,set:t})=>r=>vt(null,null,function*(){let n=yield e.getPromise($o),o=yield e.getPromise(rl),i=yield drt(n.id,r);if(o){o.deleteAll().add(i.geojson);let a=new Map;i.geojson.features.forEach(c=>{a.set(c.id,!1)}),t(nl,i.geojson),t(uh,{dirtyMap:a,deleteIds:[],addIds:[]}),t(Fg,r===n.version?null:r)}}),[]);var yht=({isSelected:e,version:t,isMostRecent:r})=>{let n=vht(),o=(0,fh.useCallback)(()=>{n(t.version)},[n,t]);return fh.default.createElement("li",{className:jt("version-history-entry",r?"current-version":"older-version",e?"selected":""),key:t.version},fh.default.createElement("div",{className:"version-history-entry-content"},fh.default.createElement(fh.default.Fragment,null,fh.default.createElement("span",{className:"time"},Jit(new Date(t.submitted))),fh.default.createElement("span",{className:"author"},t.created_by),!r||r&&!e?fh.default.createElement(rn,{className:"version-history-reset-button",onClick:o},fh.default.createElement(Fr,{name:"clock"})):null)))};yht.propTypes={isSelected:cx.default.bool,isMostRecent:cx.default.bool,version:cx.default.shape({version:cx.default.number,submitted:cx.default.string,created_by:cx.default.string}).isRequired};var _ht=yht;u();var bht=en({key:"vectorMapVersionsQueryIdState",default:0}),H8r=vs({key:"vectorMapVersionsQuery",get:t=>vt(null,[t],function*({get:e}){e(bht);let r=e($o);return!Te(r)||r.type==="local"||r.id===null?null:yield frt(r.id)})}),xht=()=>ir(({set:t})=>()=>{t(bht,r=>r+1)},[]),W8r=()=>_t(H8r),wht=W8r;var $8r=()=>{let e=_t(Fg),t=wht();return t?hfe.default.createElement("ul",{className:"version-history"},t.map((r,n)=>hfe.default.createElement(_ht,{isMostRecent:n===0,isSelected:e===null?n===0:e===r.version,key:r.version,version:r}))):null},Eht=$8r;var Sht=()=>{let e=Ir(xs),t=_t($o),r=xht(),n=(0,Fs.useMemo)(()=>!Te(t.id),[t.id]),o=(0,Fs.useMemo)(()=>n?fe("geojson-metadata-panel-intro-history-unsaved"):fe("geojson-metadata-panel-intro-history"),[n]),i=(0,Fs.useMemo)(()=>fe("geojson-metadata-panel-header-history"),[]),a=(0,Fs.useCallback)(()=>{e(Si.NONE)},[]);return Fs.default.createElement("div",{className:"geojson-history-panel-root"},Fs.default.createElement(Pf,{title:i,onCloseClick:a}),Fs.default.createElement("div",{className:"geojson-history-panel-content"},Fs.default.createElement("div",{className:"introduction-text"},o),Fs.default.createElement("div",{className:"history-list-container"},Fs.default.createElement(O2,{fallbackRender:({resetErrorBoundary:c})=>Fs.default.createElement(ZU,{className:"error-fallback",resetErrorBoundary:c}),onReset:r},Fs.default.createElement(Fs.Suspense,{fallback:Fs.default.createElement("div",{className:"suspense-fallback"},"Loading...")},Fs.default.createElement(Eht,null))))))};Sht.propTypes={};var Tht=Sht;var mfe=()=>{let e=_t(xs),t=ix(),r=(0,Xf.useMemo)(()=>Te(t.geoJsonFeature)?t:null,[t.geoJsonFeature]);return Xf.default.createElement(Xf.default.Fragment,null,Xf.default.createElement("div",{className:"vkf-horizontal-layout-draw"},Xf.default.createElement("div",{className:"geojson-control-bar-container"},Xf.default.createElement(Kpe,null)),Xf.default.createElement(a1,{className:"geojson-metadata-panel-container",Component:e===Si.HISTORY?Tht:rfe,props:e===Si.METADATA||e===Si.HISTORY?{}:null}),Xf.default.createElement(a1,{className:"geojson-feature-edit-panel-container",Component:dfe,props:e===Si.FEATURE?r:null})),Xf.default.createElement(_ft,null),Xf.default.createElement(ndt,null))};mfe.propTypes={};u();u();var h1=Q(De(),1);var Iht=()=>{let e=_t(Ef);return h1.default.createElement(h1.default.Fragment,null,h1.default.createElement("div",{className:"vkf-horizontal-layout-vector-map-external"},h1.default.createElement("div",{className:"geojson-control-bar-container"},h1.default.createElement(Qpe,null)),h1.default.createElement(a1,{className:"geojson-metadata-panel-container",Component:afe,props:e===Tc.METADATA?{}:null})),h1.default.createElement(zdt,null))};Iht.propTypes={};var Mht=Iht;var Cht=Mht;u();var $l=Q(De(),1);u();var za=Q(De(),1),uB=Q(It(),1);u();var gfe=Q(De(),1),vfe=Q(It(),1);var Aht=({onClick:e})=>gfe.default.createElement("button",{className:"vkf-toggle-search-button",onClick:e,title:"toggle search"},gfe.default.createElement(qf,{name:"icon-search"}));Aht.propTypes={isOpen:vfe.default.bool,onClick:vfe.default.func};var Oht=Aht;u();var sB=Q(De(),1),lB=Q(It(),1);var yfe=({disabled:e,onClick:t,isOpen:r})=>sB.default.createElement("button",{className:jt("vkf-toggle-search-result-list",r?"open":"closed",e&&"disabled"),disabled:e,onClick:t},sB.default.createElement("div",{className:"background"}),sB.default.createElement("div",{className:"chevron"}));yfe.propTypes={disabled:lB.default.bool,isOpen:lB.default.bool,onClick:lB.default.func};var Pht=({enableReopenResultList:e=!0,onToggleFacets:t,showFacets:r})=>{let n=_t(US),[o,i]=(0,za.useState)(!1),[a,c]=(0,za.useState)(!1),[h,m]=(0,za.useState)(!1),y=()=>{i(A=>!A)},w=()=>{c(A=>!A)};(0,za.useEffect)(()=>{n===0&&o?(i(!1),m(!0)):e&&n>0&&h&&(i(!0),m(!1))},[n]);let E=o?"show-search-result-list":"hide-search-result-list";return za.default.createElement(za.Fragment,null,za.default.createElement("div",{className:"vkf-search-header"},za.default.createElement("div",{className:"top-container"},za.default.createElement("div",{className:"result-summary"},n===0?fe("mapsearch-found-no-maps"):`${n} ${fe("mapsearch-found-maps")}`),za.default.createElement("div",{className:"controls-container"},za.default.createElement(VF,{onClick:t,isOpen:r}),za.default.createElement(Oht,{onClick:w,isOpen:a}))),a&&za.default.createElement("div",{className:"bottom-container"},za.default.createElement(C9,{searchUrl:mr.getNominatimUrl()}),za.default.createElement(v9,null))),za.default.createElement(yfe,{disabled:n===0,onClick:y,isOpen:o}),za.default.createElement("div",{className:jt("vkf-search-result-container",E)},za.default.createElement(UF,{enableOverlayLayer:!1,DataProvider:XF,direction:"horizontal",itemSize:170,renderHeader:!1})))};Pht.propTypes={enableReopenResultList:uB.default.bool,onToggleFacets:uB.default.func,showFacets:uB.default.bool};var Dht=Pht;u();var cB=Q(De(),1);var _fe=Q(It(),1);var Nht=({buttonState:e,onClick:t})=>{let r=_t(jn),n=r.length===0;return cB.default.createElement("button",{className:jt("vkf-toggle-layermanagement-button",!n&&e&&"opened",n&&"disabled"),disabled:n,onClick:t},!n&&cB.default.createElement("span",{className:"badge"},r.length),cB.default.createElement(qf,{name:"layers"}))};Nht.propTypes={buttonState:_fe.default.bool,onClick:_fe.default.func};var Lht=Nht;u();var kht=m9;u();var Rht=Q(De(),1),jht=Q(It(),1),qht=({onCloseLayerManagement:e})=>{let t=_t(jn);return(0,Rht.useEffect)(()=>{t.length===0&&e()},[t]),null};qht.propTypes={onCloseLayerManagement:jht.default.func.isRequired};var zht=qht;var Y8r=()=>{let[e,t]=(0,$l.useState)(!1),[r,n]=(0,$l.useState)(!1),o=(0,$l.useCallback)(()=>{n(!1)},[]),i=(0,$l.useCallback)(()=>{n(c=>!c)},[]),a=()=>{t(c=>!c)};return $l.default.createElement($l.default.Fragment,null,$l.default.createElement(zht,{onCloseLayerManagement:o}),$l.default.createElement("div",{className:"vkf-vertical-layout"},$l.default.createElement(Dht,{onToggleFacets:a,showFacets:e}),$l.default.createElement(Lht,{buttonState:r,onClick:i}),$l.default.createElement("div",{className:jt("layermanagement-container",!r&&"closed")},$l.default.createElement(kht,{showControls:{showBadge:!1,showDynamicMapVisualization:!1,showHideButton:!0}}))),$l.default.createElement(Dc,{modalClassName:"faceted-search-modal",onClose:a,renderContent:()=>$l.default.createElement(PF,{georeferenceMode:!1}),isOpen:e,title:"Filter"}))},bfe=Y8r;u();var Jf=Q(De(),1),dh=Q(It(),1);u();u();var qD=Q(De(),1),Fht=Q(ba(),1);u();var zm=Q(De(),1);var Z8r=(e,t)=>{let r=_t(Qt),[n,o]=(0,zm.useState)(null),[i,a]=mo(tz),c=(0,zm.useRef)(null),h=jet(),m=(0,zm.useCallback)(w=>vt(null,null,function*(){(yield h())||c.current&&!c.current.contains(w.target)&&a(uu.None)}),[]),y=(0,zm.useCallback)(()=>{a(w=>w===t?uu.None:t)},[t]);return(0,zm.useEffect)(()=>{if(Te(r)){let w=A=>{var P;((P=A.control)==null?void 0:P.id)===e&&o(A.control._container)},E=A=>{var P;((P=A.control)==null?void 0:P.id)===e&&o(null)};return r.on(_s.controlAdded,w),r.on(_s.controlRemoved,E),()=>{r.off(_s.controlAdded,w),r.off(_s.controlRemoved,E)}}},[r]),(0,zm.useEffect)(()=>(i===t?document.addEventListener("mousedown",m):document.removeEventListener("mousedown",m),()=>{document.removeEventListener("mousedown",m)}),[i,t,m]),{baseMapControlEl:n,activeDialog:i,toggleDialog:y,dialogRef:c}},pB=Z8r;var K8r=()=>{let{baseMapControlEl:e,activeDialog:t,toggleDialog:r,dialogRef:n}=pB(toe,uu.BasemapSelector);return e!==null?(0,Fht.createPortal)(qD.default.createElement("div",{ref:n},qD.default.createElement("button",{onClick:r,title:fe("control-basemapselector-open"),className:jt("maplibregl-ctrl-basemap-selector",t===uu.BasemapSelector&&"active")}),t===uu.BasemapSelector&&qD.default.createElement("div",{className:jt("basemap-selector-modal",t===uu.BasemapSelector&&"active")},qD.default.createElement(qet,null))),e):null},Uht=K8r;var Bht=Uht;u();u();var xfe=class extends Ej{addControl(t,r){let n=super.addControl(t,r);return this.fire(_s.controlAdded,{control:t}),n}removeControl(t){let r=super.removeControl(t);return this.fire(_s.controlRemoved,{control:t}),r}setPaintProperty(t,r,n,o){var h;let i=super.setPaintProperty(t,r,n,o),a=this.getLayer(t),c=(h=a==null?void 0:a.metadata)==null?void 0:h[_p.id];return CGe.has(r)&&c&&this.fire(_s.opacityChanged,{layerId:c,property:r,value:n}),i}setLayoutProperty(t,r,n,o){var h;let i=super.setLayoutProperty(t,r,n,o),a=this.getLayer(t),c=(h=a==null?void 0:a.metadata)==null?void 0:h[_p.id];return AGe.has(r)&&c&&this.fire(_s.visibilityChanged,{layerId:c,property:r,value:n}),i}fireVisibilityChanged(t,r){this.fire(_s.visibilityChanged,{layerId:t,property:"visibility",value:r})}},Vht=xfe;var Ght=Vht;u();var zD=Q(De(),1),Zht=Q(ba(),1);u();var Fm=Q(De(),1);u();var Yl=Q(De(),1);var Hht=Q(sz(),1);var X8r=()=>{let e=_t(Qt),t=_t(jn),r=_t(xf),[n,o]=(0,Yl.useState)(""),i=(0,Yl.useRef)(),a=(0,Yl.useCallback)(()=>{if(!Te(e))return;let c=mU(VS(e,!0)),h=yU(e.isVkfGlobeModeEnabled()),m=vU(t),y=gU(r),w=(0,Hht.stringify)(Object.assign({},c,h,m,y),{arrayFormat:"comma"});o(GS(w))},[e]);return(0,Yl.useEffect)(()=>{if(e)return a(),e.on("moveend",a),()=>{e.off("moveend",a)}},[e,a]),Yl.default.createElement(Yl.default.Fragment,null,Yl.default.createElement("div",{className:"action-content"},Yl.default.createElement("label",{htmlFor:"permalink-value",className:"visually-hidden"},"Permalink"),Yl.default.createElement("input",{readOnly:!0,ref:i,value:n,id:"permalink-value"}),Yl.default.createElement(v2,{value:n})),Yl.default.createElement("div",{className:"description"},Yl.default.createElement("p",null,fe("control-permalink-exporter-permalink-description"))))},Wht=X8r;u();var Zl=Q(De(),1);var $ht=()=>{let[e]=zd(xb,[]),[t,r]=(0,Zl.useState)(!1),[n,o]=(0,Zl.useState)(""),i=_t(Kq),a=mr.getGeoreferenceApiClient(),c="/map_view/",h=(0,Zl.useCallback)(()=>{if(i!==void 0){let m=i(),{searchOptions:y}=m,w=En(m,["searchOptions"]),E=e.filter(P=>P.id===w.activeBasemapId),A=Object.assign({},w,E.length>0?{customBasemaps:E}:null);return r(!0),a.post(c,{map_view_json:A}).then(P=>{if(P.status===200&&P.data!==void 0){let{map_view_id:j}=P.data,D=GS(`map_view_id=${j}`);return o(D),r(!1),D}})}},[e,i]);return Zl.default.createElement(Zl.default.Fragment,null,Zl.default.createElement("div",{className:"action-content"},Zl.default.createElement("label",{htmlFor:"permalink-mapview",className:"visually-hidden"},"Permalink"),Zl.default.createElement("input",{placeholder:fe("control-permalink-input-mapview-placeholder"),readOnly:!0,value:n,id:"permalink-mapview"}),Zl.default.createElement(v2,{onClick:h,value:n}),Zl.default.createElement("button",{className:jt("upload-button",t&&"loading"),onClick:h},t?Zl.default.createElement(GF,null):Zl.default.createElement(Vg,{glyph:"upload"}),"Upload")),Zl.default.createElement("div",{className:"description"},Zl.default.createElement("p",null,fe("control-permalink-exporter-mapview-description"))))};var J8r=()=>{let e=!mr.isUserAuthenticated();return Fm.default.createElement("div",{className:"vkf-permalink-exporter"},Fm.default.createElement(zae,{defaultActiveKey:1,id:"permalink-exporter-tabs"},Fm.default.createElement(rF,{eventKey:1,title:fe("control-permalink-title-permalink")},Fm.default.createElement("div",{className:"permalink-exporter-content"},Fm.default.createElement(Wht,null))),Fm.default.createElement(rF,{disabled:e,eventKey:2,title:fe("control-permalink-title-map-view")},Fm.default.createElement("div",{className:"permalink-exporter-content"},!e&&Fm.default.createElement($ht,null)))))},Yht=Fm.default.memo(J8r);var Q8r=()=>{let{baseMapControlEl:e,activeDialog:t,toggleDialog:r,dialogRef:n}=pB(ooe,uu.Permalink);return e!==null?(0,Zht.createPortal)(zD.default.createElement("div",{ref:n},zD.default.createElement("button",{className:jt("maplibregl-ctrl-permalink",t===uu.Permalink&&"active"),onClick:r,title:fe("control-permalink-open")}),t===uu.Permalink&&zD.default.createElement("div",{className:"content-container"},zD.default.createElement(Yht,null))),e):null},Kht=Q8r;u();var fB=Q(De(),1);var eFr=()=>{let e=_t(Qt),t=_t(xf),r=_t(ez),[n]=zd(xb,[]),o=mr.getBaseMaps(),i=(0,fB.useMemo)(()=>[...o,...n],[n,o]);return(0,fB.useEffect)(()=>{if(Te(e)){let a=i.find(h=>h.id===t);if(a===void 0)return;let c=a;if(KP(e),wet(e),c.type==="vector")_et(e,r);else if(c.type==="wms")vet(e,c,r);else if(c.type==="xyz")xet(e,c,r);else throw new Error("Unknown layer type")}},[t,e,r]),null},Xht=eFr;u();function Jht(){return{"NavigationControl.ZoomIn":fe("control-zoom-in"),"NavigationControl.ZoomOut":fe("control-zoom-out"),"FullscreenControl.Enter":fe("control-fullscreen-Enter"),"FullscreenControl.Exit":fe("control-fullscreen-Exit"),"NavigationControl.ResetBearing":fe("control-rotate"),"VkfGlobeModeControl.Enable":fe("control-toggleviewmode-title"),"VkfGlobeModeControl.Disable":fe("control-toggleviewmode-title"),"GeolocateControl.FindMyLocation":fe("control-locateme-title"),"GeolocateControl.LocationNotAvailable":fe("control-locateme-location-not-available")}}var tFr="https://tile-2.kartenforum.slub-dresden.de/styles/maptiler-basic-v2/style.json",Qht=e=>{let{target:t}=e,r=document.getElementsByClassName("map-container")[0];if(!Te(r))return;let n=KWe(t.getZoom());r.style.setProperty("--vkf-idohist-scale-factor",n)},emt=e=>{let{target:t}=e,r=document.getElementsByClassName("map-container")[0];if(!Te(r))return;let n=t.isVkfGlobeModeEnabled()?"#262626":"#ffffff";r.style.setProperty("--vkf-map-background-color",n)};function tmt(e){let{ChildComponent:t,layout:r,mapViewSettings:n={center:[13.5981217,59.562795],projection:"EPSG:3857",zoom:2},loadMarkerIcon:o=!0}=e,[i,a]=mo(Qt),c=Ir(ez),h=(0,Jf.useRef)();return _$e(h,"map"),(0,Jf.useEffect)(()=>{let m=new Ght({container:h.current,center:n.center,zoom:n.zoom,maxZoom:n.maxZoom,style:tFr,locale:Jht(),attributionControl:!1}),y=()=>{if(a(m),c(m.getStyle().layers),o===!0){let{id:w,url:E}=mr.getMarkerSettings();m.loadImage(E).then(A=>{m.addImage(w,A.data,{sdf:!0})})}};return m.on("style.load",y),m.on("zoom",Qht),m.on(a0,emt),()=>{m.off("style.load",y),m.off("zoom",Qht),m.off(a0,emt),a(void 0),m.remove()}},[]),(0,Jf.useEffect)(()=>{if(Te(i)){let m=LGe();return m.forEach(({control:y,position:w})=>{i.addControl(y,w)}),()=>{m.forEach(({control:y})=>{i.removeControl(y)})}}},[i]),Jf.default.createElement("div",{className:"map-container"},Jf.default.createElement("div",{ref:h,className:jt("map-div","olMap",RGe(r)),tabIndex:0},Te(i)&&Jf.default.createElement(t,null),Jf.default.createElement(Bht,null),Jf.default.createElement(Kht,null),Jf.default.createElement(Xht,null)))}var rFr={baseMapUrl:dh.default.arrayOf(dh.default.string),ChildComponent:dh.default.func,layout:dh.default.string,mapViewSettings:dh.default.shape({center:dh.default.arrayOf(dh.default.number),projection:dh.default.string,zoom:dh.default.number}),loadMarkerIcon:dh.default.bool};tmt.propTypes=rFr;var rmt=tmt;var nFr=e=>{switch(e){case Qs.STANDARD:return Cpe;case Qs.DRAW:return mfe;case Qs.VECTOR_MAP_EXTERNAL:return Cht;default:Cpe}},oFr=(e,t)=>{switch(e){case Sc.HORIZONTAL:return nFr(t);case Sc.VERTICAL:return bfe;default:return bfe}},omt=e=>{let{layout:t}=e,r=Ir(FS),n=_t(Cc),o=oFr(t,n);return(0,FD.useEffect)(()=>{r(t)},[t]),FD.default.createElement(rmt,{baseMapUrl:mr.getDefaultBaseMapUrls(),enable3d:!0,enableTerrain:!0,layout:t,mapViewSettings:mr.getDefaultMapView(),ChildComponent:o})};omt.propTypes={layout:nmt.default.oneOf(Object.values(Sc))};var imt=FD.default.memo(omt);var iFr=nne.backends.map(e=>e.id==="touch"?Pt(Se({},e),{options:Pt(Se({},e.options),{scrollAngleRanges:[{start:30,end:150},{start:210,end:330}]})}):e),smt=()=>{let e=h9e(),t=kGe(e),r=(0,Um.useMemo)(()=>Object.assign({},nne,{backends:iFr}),[]);return Um.default.createElement(gne,{options:r},Um.default.createElement(p9e,null,Um.default.createElement(UHe,null),Um.default.createElement("div",{className:"vkf-plugin-map"},Um.default.createElement(E$e,null),Um.default.createElement(imt,{layout:t}),Um.default.createElement(cnt,null))))};smt.propTypes={id:amt.default.string.isRequired};var lmt=smt;var aFr=mr;function sFr(e){cmt.default.render(umt.default.createElement(lmt,{id:e.id}),e)}return fvt(lFr)})();/*! Bundled license information:

object-assign/index.js:
  (*
  object-assign
  (c) Sindre Sorhus
  @license MIT
  *)

react/cjs/react.production.min.js:
  (** @license React v17.0.2
   * react.production.min.js
   *
   * Copyright (c) Facebook, Inc. and its affiliates.
   *
   * This source code is licensed under the MIT license found in the
   * LICENSE file in the root directory of this source tree.
   *)

scheduler/cjs/scheduler.production.min.js:
  (** @license React v0.20.2
   * scheduler.production.min.js
   *
   * Copyright (c) Facebook, Inc. and its affiliates.
   *
   * This source code is licensed under the MIT license found in the
   * LICENSE file in the root directory of this source tree.
   *)

react-dom/cjs/react-dom.production.min.js:
  (** @license React v17.0.2
   * react-dom.production.min.js
   *
   * Copyright (c) Facebook, Inc. and its affiliates.
   *
   * This source code is licensed under the MIT license found in the
   * LICENSE file in the root directory of this source tree.
   *)

react/cjs/react-jsx-runtime.production.min.js:
  (** @license React v17.0.2
   * react-jsx-runtime.production.min.js
   *
   * Copyright (c) Facebook, Inc. and its affiliates.
   *
   * This source code is licensed under the MIT license found in the
   * LICENSE file in the root directory of this source tree.
   *)

maplibre-gl/dist/maplibre-gl.js:
  (**
   * MapLibre GL JS
   * @license 3-Clause BSD. Full text of license: https://github.com/maplibre/maplibre-gl-js/blob/v5.7.1/LICENSE.txt
   *)

classnames/index.js:
  (*!
  	Copyright (c) 2018 Jed Watson.
  	Licensed under the MIT License (MIT), see
  	http://jedwatson.github.io/classnames
  *)

react-is/cjs/react-is.production.min.js:
  (** @license React v16.13.1
   * react-is.production.min.js
   *
   * Copyright (c) Facebook, Inc. and its affiliates.
   *
   * This source code is licensed under the MIT license found in the
   * LICENSE file in the root directory of this source tree.
   *)

keycode/index.js:
  (*!
   * Programatically add the following
   *)

react-is/cjs/react-is.production.min.js:
  (**
   * @license React
   * react-is.production.min.js
   *
   * Copyright (c) Facebook, Inc. and its affiliates.
   *
   * This source code is licensed under the MIT license found in the
   * LICENSE file in the root directory of this source tree.
   *)

react-is/cjs/react-is.production.min.js:
  (** @license React v17.0.2
   * react-is.production.min.js
   *
   * Copyright (c) Facebook, Inc. and its affiliates.
   *
   * This source code is licensed under the MIT license found in the
   * LICENSE file in the root directory of this source tree.
   *)

wms-capabilities/dist/wms-capabilities.mjs:
  (**
   * wms-capabilities @0.6.0
   * @description WMS service Capabilities > JSON, based on openlayers 
   * @license BSD-2-Clause
   * @preserve
   *)

@babel/runtime/helpers/esm/regeneratorRuntime.js:
  (*! regenerator-runtime -- Copyright (c) 2014-present, Facebook, Inc. -- license (MIT): https://github.com/babel/babel/blob/main/packages/babel-helpers/LICENSE *)
*/