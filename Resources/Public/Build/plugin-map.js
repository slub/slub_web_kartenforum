var vk2=(()=>{var Amt=Object.create;var hI=Object.defineProperty,Omt=Object.defineProperties,Pmt=Object.getOwnPropertyDescriptor,Nmt=Object.getOwnPropertyDescriptors,Dmt=Object.getOwnPropertyNames,uD=Object.getOwnPropertySymbols,Lmt=Object.getPrototypeOf,IB=Object.prototype.hasOwnProperty,Gfe=Object.prototype.propertyIsEnumerable;var Hfe=e=>{throw TypeError(e)},jm=Math.pow,TB=(e,t,r)=>t in e?hI(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r,Te=(e,t)=>{for(var r in t||(t={}))IB.call(t,r)&&TB(e,r,t[r]);if(uD)for(var r of uD(t))Gfe.call(t,r)&&TB(e,r,t[r]);return e},Mt=(e,t)=>Omt(e,Nmt(t));var Wfe=e=>typeof e=="symbol"?e:e+"",xn=(e,t)=>{var r={};for(var n in e)IB.call(e,n)&&t.indexOf(n)<0&&(r[n]=e[n]);if(e!=null&&uD)for(var n of uD(e))t.indexOf(n)<0&&Gfe.call(e,n)&&(r[n]=e[n]);return r};var A=(e,t)=>()=>(t||e((t={exports:{}}).exports,t),t.exports),mI=(e,t)=>{for(var r in t)hI(e,r,{get:t[r],enumerable:!0})},$fe=(e,t,r,n)=>{if(t&&typeof t=="object"||typeof t=="function")for(let o of Dmt(t))!IB.call(e,o)&&o!==r&&hI(e,o,{get:()=>t[o],enumerable:!(n=Pmt(t,o))||n.enumerable});return e};var Z=(e,t,r)=>(r=e!=null?Amt(Lmt(e)):{},$fe(t||!e||!e.__esModule?hI(r,"default",{value:e,enumerable:!0}):r,e)),kmt=e=>$fe(hI({},"__esModule",{value:!0}),e);var bt=(e,t,r)=>TB(e,typeof t!="symbol"?t+"":t,r),MB=(e,t,r)=>t.has(e)||Hfe("Cannot "+r);var Dr=(e,t,r)=>(MB(e,t,"read from private field"),r?r.call(e):t.get(e)),Va=(e,t,r)=>t.has(e)?Hfe("Cannot add the same private member more than once"):t instanceof WeakSet?t.add(e):t.set(e,r),Ga=(e,t,r,n)=>(MB(e,t,"write to private field"),n?n.call(e,r):t.set(e,r),r),sa=(e,t,r)=>(MB(e,t,"access private method"),r);var gt=(e,t,r)=>new Promise((n,o)=>{var i=d=>{try{u(r.next(d))}catch(h){o(h)}},a=d=>{try{u(r.throw(d))}catch(h){o(h)}},u=d=>d.done?n(d.value):Promise.resolve(d.value).then(i,a);u((r=r.apply(e,t)).next())});var cD=A((Yqr,Yfe)=>{"use strict";var Zfe=Object.getOwnPropertySymbols,Rmt=Object.prototype.hasOwnProperty,jmt=Object.prototype.propertyIsEnumerable;function qmt(e){if(e==null)throw new TypeError("Object.assign cannot be called with null or undefined");return Object(e)}function zmt(){try{if(!Object.assign)return!1;var e=new String("abc");if(e[5]="de",Object.getOwnPropertyNames(e)[0]==="5")return!1;for(var t={},r=0;r<10;r++)t["_"+String.fromCharCode(r)]=r;var n=Object.getOwnPropertyNames(t).map(function(i){return t[i]});if(n.join("")!=="0123456789")return!1;var o={};return"abcdefghijklmnopqrst".split("").forEach(function(i){o[i]=i}),Object.keys(Object.assign({},o)).join("")==="abcdefghijklmnopqrst"}catch(i){return!1}}Yfe.exports=zmt()?Object.assign:function(e,t){for(var r,n=qmt(e),o,i=1;i<arguments.length;i++){r=Object(arguments[i]);for(var a in r)Rmt.call(r,a)&&(n[a]=r[a]);if(Zfe){o=Zfe(r);for(var u=0;u<o.length;u++)jmt.call(r,o[u])&&(n[o[u]]=r[o[u]])}}return n}});var pde=A(Fo=>{"use strict";var AB=cD(),Fx=60103,Qfe=60106;Fo.Fragment=60107;Fo.StrictMode=60108;Fo.Profiler=60114;var Jfe=60109,ede=60110,tde=60112;Fo.Suspense=60113;var rde=60115,nde=60116;typeof Symbol=="function"&&Symbol.for&&(Cp=Symbol.for,Fx=Cp("react.element"),Qfe=Cp("react.portal"),Fo.Fragment=Cp("react.fragment"),Fo.StrictMode=Cp("react.strict_mode"),Fo.Profiler=Cp("react.profiler"),Jfe=Cp("react.provider"),ede=Cp("react.context"),tde=Cp("react.forward_ref"),Fo.Suspense=Cp("react.suspense"),rde=Cp("react.memo"),nde=Cp("react.lazy"));var Cp,Kfe=typeof Symbol=="function"&&Symbol.iterator;function Fmt(e){return e===null||typeof e!="object"?null:(e=Kfe&&e[Kfe]||e["@@iterator"],typeof e=="function"?e:null)}function gI(e){for(var t="https://reactjs.org/docs/error-decoder.html?invariant="+e,r=1;r<arguments.length;r++)t+="&args[]="+encodeURIComponent(arguments[r]);return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var ode={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},ide={};function Ux(e,t,r){this.props=e,this.context=t,this.refs=ide,this.updater=r||ode}Ux.prototype.isReactComponent={};Ux.prototype.setState=function(e,t){if(typeof e!="object"&&typeof e!="function"&&e!=null)throw Error(gI(85));this.updater.enqueueSetState(this,e,t,"setState")};Ux.prototype.forceUpdate=function(e){this.updater.enqueueForceUpdate(this,e,"forceUpdate")};function ade(){}ade.prototype=Ux.prototype;function OB(e,t,r){this.props=e,this.context=t,this.refs=ide,this.updater=r||ode}var PB=OB.prototype=new ade;PB.constructor=OB;AB(PB,Ux.prototype);PB.isPureReactComponent=!0;var NB={current:null},sde=Object.prototype.hasOwnProperty,lde={key:!0,ref:!0,__self:!0,__source:!0};function ude(e,t,r){var n,o={},i=null,a=null;if(t!=null)for(n in t.ref!==void 0&&(a=t.ref),t.key!==void 0&&(i=""+t.key),t)sde.call(t,n)&&!lde.hasOwnProperty(n)&&(o[n]=t[n]);var u=arguments.length-2;if(u===1)o.children=r;else if(1<u){for(var d=Array(u),h=0;h<u;h++)d[h]=arguments[h+2];o.children=d}if(e&&e.defaultProps)for(n in u=e.defaultProps,u)o[n]===void 0&&(o[n]=u[n]);return{$$typeof:Fx,type:e,key:i,ref:a,props:o,_owner:NB.current}}function Umt(e,t){return{$$typeof:Fx,type:e.type,key:t,ref:e.ref,props:e.props,_owner:e._owner}}function DB(e){return typeof e=="object"&&e!==null&&e.$$typeof===Fx}function Bmt(e){var t={"=":"=0",":":"=2"};return"$"+e.replace(/[=:]/g,function(r){return t[r]})}var Xfe=/\/+/g;function CB(e,t){return typeof e=="object"&&e!==null&&e.key!=null?Bmt(""+e.key):t.toString(36)}function fD(e,t,r,n,o){var i=typeof e;(i==="undefined"||i==="boolean")&&(e=null);var a=!1;if(e===null)a=!0;else switch(i){case"string":case"number":a=!0;break;case"object":switch(e.$$typeof){case Fx:case Qfe:a=!0}}if(a)return a=e,o=o(a),e=n===""?"."+CB(a,0):n,Array.isArray(o)?(r="",e!=null&&(r=e.replace(Xfe,"$&/")+"/"),fD(o,t,r,"",function(h){return h})):o!=null&&(DB(o)&&(o=Umt(o,r+(!o.key||a&&a.key===o.key?"":(""+o.key).replace(Xfe,"$&/")+"/")+e)),t.push(o)),1;if(a=0,n=n===""?".":n+":",Array.isArray(e))for(var u=0;u<e.length;u++){i=e[u];var d=n+CB(i,u);a+=fD(i,t,r,d,o)}else if(d=Fmt(e),typeof d=="function")for(e=d.call(e),u=0;!(i=e.next()).done;)i=i.value,d=n+CB(i,u++),a+=fD(i,t,r,d,o);else if(i==="object")throw t=""+e,Error(gI(31,t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t));return a}function pD(e,t,r){if(e==null)return e;var n=[],o=0;return fD(e,n,"","",function(i){return t.call(r,i,o++)}),n}function Vmt(e){if(e._status===-1){var t=e._result;t=t(),e._status=0,e._result=t,t.then(function(r){e._status===0&&(r=r.default,e._status=1,e._result=r)},function(r){e._status===0&&(e._status=2,e._result=r)})}if(e._status===1)return e._result;throw e._result}var cde={current:null};function qm(){var e=cde.current;if(e===null)throw Error(gI(321));return e}var Gmt={ReactCurrentDispatcher:cde,ReactCurrentBatchConfig:{transition:0},ReactCurrentOwner:NB,IsSomeRendererActing:{current:!1},assign:AB};Fo.Children={map:pD,forEach:function(e,t,r){pD(e,function(){t.apply(this,arguments)},r)},count:function(e){var t=0;return pD(e,function(){t++}),t},toArray:function(e){return pD(e,function(t){return t})||[]},only:function(e){if(!DB(e))throw Error(gI(143));return e}};Fo.Component=Ux;Fo.PureComponent=OB;Fo.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=Gmt;Fo.cloneElement=function(e,t,r){if(e==null)throw Error(gI(267,e));var n=AB({},e.props),o=e.key,i=e.ref,a=e._owner;if(t!=null){if(t.ref!==void 0&&(i=t.ref,a=NB.current),t.key!==void 0&&(o=""+t.key),e.type&&e.type.defaultProps)var u=e.type.defaultProps;for(d in t)sde.call(t,d)&&!lde.hasOwnProperty(d)&&(n[d]=t[d]===void 0&&u!==void 0?u[d]:t[d])}var d=arguments.length-2;if(d===1)n.children=r;else if(1<d){u=Array(d);for(var h=0;h<d;h++)u[h]=arguments[h+2];n.children=u}return{$$typeof:Fx,type:e.type,key:o,ref:i,props:n,_owner:a}};Fo.createContext=function(e,t){return t===void 0&&(t=null),e={$$typeof:ede,_calculateChangedBits:t,_currentValue:e,_currentValue2:e,_threadCount:0,Provider:null,Consumer:null},e.Provider={$$typeof:Jfe,_context:e},e.Consumer=e};Fo.createElement=ude;Fo.createFactory=function(e){var t=ude.bind(null,e);return t.type=e,t};Fo.createRef=function(){return{current:null}};Fo.forwardRef=function(e){return{$$typeof:tde,render:e}};Fo.isValidElement=DB;Fo.lazy=function(e){return{$$typeof:nde,_payload:{_status:-1,_result:e},_init:Vmt}};Fo.memo=function(e,t){return{$$typeof:rde,type:e,compare:t===void 0?null:t}};Fo.useCallback=function(e,t){return qm().useCallback(e,t)};Fo.useContext=function(e,t){return qm().useContext(e,t)};Fo.useDebugValue=function(){};Fo.useEffect=function(e,t){return qm().useEffect(e,t)};Fo.useImperativeHandle=function(e,t,r){return qm().useImperativeHandle(e,t,r)};Fo.useLayoutEffect=function(e,t){return qm().useLayoutEffect(e,t)};Fo.useMemo=function(e,t){return qm().useMemo(e,t)};Fo.useReducer=function(e,t,r){return qm().useReducer(e,t,r)};Fo.useRef=function(e){return qm().useRef(e)};Fo.useState=function(e){return qm().useState(e)};Fo.version="17.0.2"});var Pe=A((Xqr,fde)=>{"use strict";fde.exports=pde()});var yde=A(ri=>{"use strict";var Vx,_I,gD,FB;typeof performance=="object"&&typeof performance.now=="function"?(dde=performance,ri.unstable_now=function(){return dde.now()}):(LB=Date,hde=LB.now(),ri.unstable_now=function(){return LB.now()-hde});var dde,LB,hde;typeof window=="undefined"||typeof MessageChannel!="function"?(Bx=null,kB=null,RB=function(){if(Bx!==null)try{var e=ri.unstable_now();Bx(!0,e),Bx=null}catch(t){throw setTimeout(RB,0),t}},Vx=function(e){Bx!==null?setTimeout(Vx,0,e):(Bx=e,setTimeout(RB,0))},_I=function(e,t){kB=setTimeout(e,t)},gD=function(){clearTimeout(kB)},ri.unstable_shouldYield=function(){return!1},FB=ri.unstable_forceFrameRate=function(){}):(mde=window.setTimeout,gde=window.clearTimeout,typeof console!="undefined"&&(vde=window.cancelAnimationFrame,typeof window.requestAnimationFrame!="function"&&console.error("This browser doesn't support requestAnimationFrame. Make sure that you load a polyfill in older browsers. https://reactjs.org/link/react-polyfills"),typeof vde!="function"&&console.error("This browser doesn't support cancelAnimationFrame. Make sure that you load a polyfill in older browsers. https://reactjs.org/link/react-polyfills")),vI=!1,yI=null,dD=-1,jB=5,qB=0,ri.unstable_shouldYield=function(){return ri.unstable_now()>=qB},FB=function(){},ri.unstable_forceFrameRate=function(e){0>e||125<e?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):jB=0<e?Math.floor(1e3/e):5},zB=new MessageChannel,hD=zB.port2,zB.port1.onmessage=function(){if(yI!==null){var e=ri.unstable_now();qB=e+jB;try{yI(!0,e)?hD.postMessage(null):(vI=!1,yI=null)}catch(t){throw hD.postMessage(null),t}}else vI=!1},Vx=function(e){yI=e,vI||(vI=!0,hD.postMessage(null))},_I=function(e,t){dD=mde(function(){e(ri.unstable_now())},t)},gD=function(){gde(dD),dD=-1});var Bx,kB,RB,mde,gde,vde,vI,yI,dD,jB,qB,zB,hD;function UB(e,t){var r=e.length;e.push(t);e:for(;;){var n=r-1>>>1,o=e[n];if(o!==void 0&&0<mD(o,t))e[n]=t,e[r]=o,r=n;else break e}}function Wf(e){return e=e[0],e===void 0?null:e}function vD(e){var t=e[0];if(t!==void 0){var r=e.pop();if(r!==t){e[0]=r;e:for(var n=0,o=e.length;n<o;){var i=2*(n+1)-1,a=e[i],u=i+1,d=e[u];if(a!==void 0&&0>mD(a,r))d!==void 0&&0>mD(d,a)?(e[n]=d,e[u]=r,n=u):(e[n]=a,e[i]=r,n=i);else if(d!==void 0&&0>mD(d,r))e[n]=d,e[u]=r,n=u;else break e}}return t}return null}function mD(e,t){var r=e.sortIndex-t.sortIndex;return r!==0?r:e.id-t.id}var ih=[],Tv=[],Hmt=1,Ap=null,Zl=3,yD=!1,T1=!1,bI=!1;function BB(e){for(var t=Wf(Tv);t!==null;){if(t.callback===null)vD(Tv);else if(t.startTime<=e)vD(Tv),t.sortIndex=t.expirationTime,UB(ih,t);else break;t=Wf(Tv)}}function VB(e){if(bI=!1,BB(e),!T1)if(Wf(ih)!==null)T1=!0,Vx(GB);else{var t=Wf(Tv);t!==null&&_I(VB,t.startTime-e)}}function GB(e,t){T1=!1,bI&&(bI=!1,gD()),yD=!0;var r=Zl;try{for(BB(t),Ap=Wf(ih);Ap!==null&&(!(Ap.expirationTime>t)||e&&!ri.unstable_shouldYield());){var n=Ap.callback;if(typeof n=="function"){Ap.callback=null,Zl=Ap.priorityLevel;var o=n(Ap.expirationTime<=t);t=ri.unstable_now(),typeof o=="function"?Ap.callback=o:Ap===Wf(ih)&&vD(ih),BB(t)}else vD(ih);Ap=Wf(ih)}if(Ap!==null)var i=!0;else{var a=Wf(Tv);a!==null&&_I(VB,a.startTime-t),i=!1}return i}finally{Ap=null,Zl=r,yD=!1}}var Wmt=FB;ri.unstable_IdlePriority=5;ri.unstable_ImmediatePriority=1;ri.unstable_LowPriority=4;ri.unstable_NormalPriority=3;ri.unstable_Profiling=null;ri.unstable_UserBlockingPriority=2;ri.unstable_cancelCallback=function(e){e.callback=null};ri.unstable_continueExecution=function(){T1||yD||(T1=!0,Vx(GB))};ri.unstable_getCurrentPriorityLevel=function(){return Zl};ri.unstable_getFirstCallbackNode=function(){return Wf(ih)};ri.unstable_next=function(e){switch(Zl){case 1:case 2:case 3:var t=3;break;default:t=Zl}var r=Zl;Zl=t;try{return e()}finally{Zl=r}};ri.unstable_pauseExecution=function(){};ri.unstable_requestPaint=Wmt;ri.unstable_runWithPriority=function(e,t){switch(e){case 1:case 2:case 3:case 4:case 5:break;default:e=3}var r=Zl;Zl=e;try{return t()}finally{Zl=r}};ri.unstable_scheduleCallback=function(e,t,r){var n=ri.unstable_now();switch(typeof r=="object"&&r!==null?(r=r.delay,r=typeof r=="number"&&0<r?n+r:n):r=n,e){case 1:var o=-1;break;case 2:o=250;break;case 5:o=1073741823;break;case 4:o=1e4;break;default:o=5e3}return o=r+o,e={id:Hmt++,callback:t,priorityLevel:e,startTime:r,expirationTime:o,sortIndex:-1},r>n?(e.sortIndex=r,UB(Tv,e),Wf(ih)===null&&e===Wf(Tv)&&(bI?gD():bI=!0,_I(VB,r-n))):(e.sortIndex=o,UB(ih,e),T1||yD||(T1=!0,Vx(GB))),e};ri.unstable_wrapCallback=function(e){var t=Zl;return function(){var r=Zl;Zl=t;try{return e.apply(this,arguments)}finally{Zl=r}}}});var bde=A((Jqr,_de)=>{"use strict";_de.exports=yde()});var age=A(kp=>{"use strict";var p5=Pe(),la=cD(),Us=bde();function nr(e){for(var t="https://reactjs.org/docs/error-decoder.html?invariant="+e,r=1;r<arguments.length;r++)t+="&args[]="+encodeURIComponent(arguments[r]);return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}if(!p5)throw Error(nr(227));var Dhe=new Set,KI={};function R1(e,t){cw(e,t),cw(e+"Capture",t)}function cw(e,t){for(KI[e]=t,e=0;e<t.length;e++)Dhe.add(t[e])}var Gm=!(typeof window=="undefined"||typeof window.document=="undefined"||typeof window.document.createElement=="undefined"),$mt=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,xde=Object.prototype.hasOwnProperty,wde={},Ede={};function Zmt(e){return xde.call(Ede,e)?!0:xde.call(wde,e)?!1:$mt.test(e)?Ede[e]=!0:(wde[e]=!0,!1)}function Ymt(e,t,r,n){if(r!==null&&r.type===0)return!1;switch(typeof t){case"function":case"symbol":return!0;case"boolean":return n?!1:r!==null?!r.acceptsBooleans:(e=e.toLowerCase().slice(0,5),e!=="data-"&&e!=="aria-");default:return!1}}function Kmt(e,t,r,n){if(t===null||typeof t=="undefined"||Ymt(e,t,r,n))return!0;if(n)return!1;if(r!==null)switch(r.type){case 3:return!t;case 4:return t===!1;case 5:return isNaN(t);case 6:return isNaN(t)||1>t}return!1}function Au(e,t,r,n,o,i,a){this.acceptsBooleans=t===2||t===3||t===4,this.attributeName=n,this.attributeNamespace=o,this.mustUseProperty=r,this.propertyName=e,this.type=t,this.sanitizeURL=i,this.removeEmptyString=a}var ml={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(e){ml[e]=new Au(e,0,!1,e,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(e){var t=e[0];ml[t]=new Au(t,1,!1,e[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(e){ml[e]=new Au(e,2,!1,e.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(e){ml[e]=new Au(e,2,!1,e,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(e){ml[e]=new Au(e,3,!1,e.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(e){ml[e]=new Au(e,3,!0,e,null,!1,!1)});["capture","download"].forEach(function(e){ml[e]=new Au(e,4,!1,e,null,!1,!1)});["cols","rows","size","span"].forEach(function(e){ml[e]=new Au(e,6,!1,e,null,!1,!1)});["rowSpan","start"].forEach(function(e){ml[e]=new Au(e,5,!1,e.toLowerCase(),null,!1,!1)});var JV=/[\-:]([a-z])/g;function eG(e){return e[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(e){var t=e.replace(JV,eG);ml[t]=new Au(t,1,!1,e,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(e){var t=e.replace(JV,eG);ml[t]=new Au(t,1,!1,e,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(e){var t=e.replace(JV,eG);ml[t]=new Au(t,1,!1,e,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(e){ml[e]=new Au(e,1,!1,e.toLowerCase(),null,!1,!1)});ml.xlinkHref=new Au("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(e){ml[e]=new Au(e,1,!1,e.toLowerCase(),null,!0,!0)});function tG(e,t,r,n){var o=ml.hasOwnProperty(t)?ml[t]:null,i=o!==null?o.type===0:n?!1:!(!(2<t.length)||t[0]!=="o"&&t[0]!=="O"||t[1]!=="n"&&t[1]!=="N");i||(Kmt(t,r,o,n)&&(r=null),n||o===null?Zmt(t)&&(r===null?e.removeAttribute(t):e.setAttribute(t,""+r)):o.mustUseProperty?e[o.propertyName]=r===null?o.type===3?!1:"":r:(t=o.attributeName,n=o.attributeNamespace,r===null?e.removeAttribute(t):(o=o.type,r=o===3||o===4&&r===!0?"":""+r,n?e.setAttributeNS(n,t,r):e.setAttribute(t,r))))}var j1=p5.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,DI=60103,M1=60106,Mv=60107,rG=60108,qI=60114,nG=60109,oG=60110,f5=60112,zI=60113,BD=60120,d5=60115,iG=60116,aG=60121,sG=60128,Lhe=60129,lG=60130,dV=60131;typeof Symbol=="function"&&Symbol.for&&(Is=Symbol.for,DI=Is("react.element"),M1=Is("react.portal"),Mv=Is("react.fragment"),rG=Is("react.strict_mode"),qI=Is("react.profiler"),nG=Is("react.provider"),oG=Is("react.context"),f5=Is("react.forward_ref"),zI=Is("react.suspense"),BD=Is("react.suspense_list"),d5=Is("react.memo"),iG=Is("react.lazy"),aG=Is("react.block"),Is("react.scope"),sG=Is("react.opaque.id"),Lhe=Is("react.debug_trace_mode"),lG=Is("react.offscreen"),dV=Is("react.legacy_hidden"));var Is,Sde=typeof Symbol=="function"&&Symbol.iterator;function xI(e){return e===null||typeof e!="object"?null:(e=Sde&&e[Sde]||e["@@iterator"],typeof e=="function"?e:null)}var HB;function LI(e){if(HB===void 0)try{throw Error()}catch(r){var t=r.stack.trim().match(/\n( *(at )?)/);HB=t&&t[1]||""}return`
`+HB+e}var WB=!1;function _D(e,t){if(!e||WB)return"";WB=!0;var r=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(t){if(t=function(){throw Error()},Object.defineProperty(t.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(t,[])}catch(d){var n=d}Reflect.construct(e,[],t)}else{try{t.call()}catch(d){n=d}e.call(t.prototype)}}else{try{throw Error()}catch(d){n=d}e()}}catch(d){if(d&&n&&typeof d.stack=="string"){for(var o=d.stack.split(`
`),i=n.stack.split(`
`),a=o.length-1,u=i.length-1;1<=a&&0<=u&&o[a]!==i[u];)u--;for(;1<=a&&0<=u;a--,u--)if(o[a]!==i[u]){if(a!==1||u!==1)do if(a--,u--,0>u||o[a]!==i[u])return`
`+o[a].replace(" at new "," at ");while(1<=a&&0<=u);break}}}finally{WB=!1,Error.prepareStackTrace=r}return(e=e?e.displayName||e.name:"")?LI(e):""}function Xmt(e){switch(e.tag){case 5:return LI(e.type);case 16:return LI("Lazy");case 13:return LI("Suspense");case 19:return LI("SuspenseList");case 0:case 2:case 15:return e=_D(e.type,!1),e;case 11:return e=_D(e.type.render,!1),e;case 22:return e=_D(e.type._render,!1),e;case 1:return e=_D(e.type,!0),e;default:return""}}function ew(e){if(e==null)return null;if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e;switch(e){case Mv:return"Fragment";case M1:return"Portal";case qI:return"Profiler";case rG:return"StrictMode";case zI:return"Suspense";case BD:return"SuspenseList"}if(typeof e=="object")switch(e.$$typeof){case oG:return(e.displayName||"Context")+".Consumer";case nG:return(e._context.displayName||"Context")+".Provider";case f5:var t=e.render;return t=t.displayName||t.name||"",e.displayName||(t!==""?"ForwardRef("+t+")":"ForwardRef");case d5:return ew(e.type);case aG:return ew(e._render);case iG:t=e._payload,e=e._init;try{return ew(e(t))}catch(r){}}return null}function zv(e){switch(typeof e){case"boolean":case"number":case"object":case"string":case"undefined":return e;default:return""}}function khe(e){var t=e.type;return(e=e.nodeName)&&e.toLowerCase()==="input"&&(t==="checkbox"||t==="radio")}function Qmt(e){var t=khe(e)?"checked":"value",r=Object.getOwnPropertyDescriptor(e.constructor.prototype,t),n=""+e[t];if(!e.hasOwnProperty(t)&&typeof r!="undefined"&&typeof r.get=="function"&&typeof r.set=="function"){var o=r.get,i=r.set;return Object.defineProperty(e,t,{configurable:!0,get:function(){return o.call(this)},set:function(a){n=""+a,i.call(this,a)}}),Object.defineProperty(e,t,{enumerable:r.enumerable}),{getValue:function(){return n},setValue:function(a){n=""+a},stopTracking:function(){e._valueTracker=null,delete e[t]}}}}function bD(e){e._valueTracker||(e._valueTracker=Qmt(e))}function Rhe(e){if(!e)return!1;var t=e._valueTracker;if(!t)return!0;var r=t.getValue(),n="";return e&&(n=khe(e)?e.checked?"true":"false":e.value),e=n,e!==r?(t.setValue(e),!0):!1}function VD(e){if(e=e||(typeof document!="undefined"?document:void 0),typeof e=="undefined")return null;try{return e.activeElement||e.body}catch(t){return e.body}}function hV(e,t){var r=t.checked;return la({},t,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:r!=null?r:e._wrapperState.initialChecked})}function Tde(e,t){var r=t.defaultValue==null?"":t.defaultValue,n=t.checked!=null?t.checked:t.defaultChecked;r=zv(t.value!=null?t.value:r),e._wrapperState={initialChecked:n,initialValue:r,controlled:t.type==="checkbox"||t.type==="radio"?t.checked!=null:t.value!=null}}function jhe(e,t){t=t.checked,t!=null&&tG(e,"checked",t,!1)}function mV(e,t){jhe(e,t);var r=zv(t.value),n=t.type;if(r!=null)n==="number"?(r===0&&e.value===""||e.value!=r)&&(e.value=""+r):e.value!==""+r&&(e.value=""+r);else if(n==="submit"||n==="reset"){e.removeAttribute("value");return}t.hasOwnProperty("value")?gV(e,t.type,r):t.hasOwnProperty("defaultValue")&&gV(e,t.type,zv(t.defaultValue)),t.checked==null&&t.defaultChecked!=null&&(e.defaultChecked=!!t.defaultChecked)}function Ide(e,t,r){if(t.hasOwnProperty("value")||t.hasOwnProperty("defaultValue")){var n=t.type;if(!(n!=="submit"&&n!=="reset"||t.value!==void 0&&t.value!==null))return;t=""+e._wrapperState.initialValue,r||t===e.value||(e.value=t),e.defaultValue=t}r=e.name,r!==""&&(e.name=""),e.defaultChecked=!!e._wrapperState.initialChecked,r!==""&&(e.name=r)}function gV(e,t,r){(t!=="number"||VD(e.ownerDocument)!==e)&&(r==null?e.defaultValue=""+e._wrapperState.initialValue:e.defaultValue!==""+r&&(e.defaultValue=""+r))}function Jmt(e){var t="";return p5.Children.forEach(e,function(r){r!=null&&(t+=r)}),t}function vV(e,t){return e=la({children:void 0},t),(t=Jmt(t.children))&&(e.children=t),e}function tw(e,t,r,n){if(e=e.options,t){t={};for(var o=0;o<r.length;o++)t["$"+r[o]]=!0;for(r=0;r<e.length;r++)o=t.hasOwnProperty("$"+e[r].value),e[r].selected!==o&&(e[r].selected=o),o&&n&&(e[r].defaultSelected=!0)}else{for(r=""+zv(r),t=null,o=0;o<e.length;o++){if(e[o].value===r){e[o].selected=!0,n&&(e[o].defaultSelected=!0);return}t!==null||e[o].disabled||(t=e[o])}t!==null&&(t.selected=!0)}}function yV(e,t){if(t.dangerouslySetInnerHTML!=null)throw Error(nr(91));return la({},t,{value:void 0,defaultValue:void 0,children:""+e._wrapperState.initialValue})}function Mde(e,t){var r=t.value;if(r==null){if(r=t.children,t=t.defaultValue,r!=null){if(t!=null)throw Error(nr(92));if(Array.isArray(r)){if(!(1>=r.length))throw Error(nr(93));r=r[0]}t=r}t==null&&(t=""),r=t}e._wrapperState={initialValue:zv(r)}}function qhe(e,t){var r=zv(t.value),n=zv(t.defaultValue);r!=null&&(r=""+r,r!==e.value&&(e.value=r),t.defaultValue==null&&e.defaultValue!==r&&(e.defaultValue=r)),n!=null&&(e.defaultValue=""+n)}function Cde(e){var t=e.textContent;t===e._wrapperState.initialValue&&t!==""&&t!==null&&(e.value=t)}var _V={html:"http://www.w3.org/1999/xhtml",mathml:"http://www.w3.org/1998/Math/MathML",svg:"http://www.w3.org/2000/svg"};function zhe(e){switch(e){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function bV(e,t){return e==null||e==="http://www.w3.org/1999/xhtml"?zhe(t):e==="http://www.w3.org/2000/svg"&&t==="foreignObject"?"http://www.w3.org/1999/xhtml":e}var xD,Fhe=function(e){return typeof MSApp!="undefined"&&MSApp.execUnsafeLocalFunction?function(t,r,n,o){MSApp.execUnsafeLocalFunction(function(){return e(t,r,n,o)})}:e}(function(e,t){if(e.namespaceURI!==_V.svg||"innerHTML"in e)e.innerHTML=t;else{for(xD=xD||document.createElement("div"),xD.innerHTML="<svg>"+t.valueOf().toString()+"</svg>",t=xD.firstChild;e.firstChild;)e.removeChild(e.firstChild);for(;t.firstChild;)e.appendChild(t.firstChild)}});function XI(e,t){if(t){var r=e.firstChild;if(r&&r===e.lastChild&&r.nodeType===3){r.nodeValue=t;return}}e.textContent=t}var FI={animationIterationCount:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},egt=["Webkit","ms","Moz","O"];Object.keys(FI).forEach(function(e){egt.forEach(function(t){t=t+e.charAt(0).toUpperCase()+e.substring(1),FI[t]=FI[e]})});function Uhe(e,t,r){return t==null||typeof t=="boolean"||t===""?"":r||typeof t!="number"||t===0||FI.hasOwnProperty(e)&&FI[e]?(""+t).trim():t+"px"}function Bhe(e,t){e=e.style;for(var r in t)if(t.hasOwnProperty(r)){var n=r.indexOf("--")===0,o=Uhe(r,t[r],n);r==="float"&&(r="cssFloat"),n?e.setProperty(r,o):e[r]=o}}var tgt=la({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function xV(e,t){if(t){if(tgt[e]&&(t.children!=null||t.dangerouslySetInnerHTML!=null))throw Error(nr(137,e));if(t.dangerouslySetInnerHTML!=null){if(t.children!=null)throw Error(nr(60));if(!(typeof t.dangerouslySetInnerHTML=="object"&&"__html"in t.dangerouslySetInnerHTML))throw Error(nr(61))}if(t.style!=null&&typeof t.style!="object")throw Error(nr(62))}}function wV(e,t){if(e.indexOf("-")===-1)return typeof t.is=="string";switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}function uG(e){return e=e.target||e.srcElement||window,e.correspondingUseElement&&(e=e.correspondingUseElement),e.nodeType===3?e.parentNode:e}var EV=null,rw=null,nw=null;function Ade(e){if(e=pM(e)){if(typeof EV!="function")throw Error(nr(280));var t=e.stateNode;t&&(t=_5(t),EV(e.stateNode,e.type,t))}}function Vhe(e){rw?nw?nw.push(e):nw=[e]:rw=e}function Ghe(){if(rw){var e=rw,t=nw;if(nw=rw=null,Ade(e),t)for(e=0;e<t.length;e++)Ade(t[e])}}function cG(e,t){return e(t)}function Hhe(e,t,r,n,o){return e(t,r,n,o)}function pG(){}var Whe=cG,C1=!1,$B=!1;function fG(){(rw!==null||nw!==null)&&(pG(),Ghe())}function rgt(e,t,r){if($B)return e(t,r);$B=!0;try{return Whe(e,t,r)}finally{$B=!1,fG()}}function QI(e,t){var r=e.stateNode;if(r===null)return null;var n=_5(r);if(n===null)return null;r=n[t];e:switch(t){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(n=!n.disabled)||(e=e.type,n=!(e==="button"||e==="input"||e==="select"||e==="textarea")),e=!n;break e;default:e=!1}if(e)return null;if(r&&typeof r!="function")throw Error(nr(231,t,typeof r));return r}var SV=!1;if(Gm)try{Gx={},Object.defineProperty(Gx,"passive",{get:function(){SV=!0}}),window.addEventListener("test",Gx,Gx),window.removeEventListener("test",Gx,Gx)}catch(e){SV=!1}var Gx;function ngt(e,t,r,n,o,i,a,u,d){var h=Array.prototype.slice.call(arguments,3);try{t.apply(r,h)}catch(v){this.onError(v)}}var UI=!1,GD=null,HD=!1,TV=null,ogt={onError:function(e){UI=!0,GD=e}};function igt(e,t,r,n,o,i,a,u,d){UI=!1,GD=null,ngt.apply(ogt,arguments)}function agt(e,t,r,n,o,i,a,u,d){if(igt.apply(this,arguments),UI){if(UI){var h=GD;UI=!1,GD=null}else throw Error(nr(198));HD||(HD=!0,TV=h)}}function q1(e){var t=e,r=e;if(e.alternate)for(;t.return;)t=t.return;else{e=t;do t=e,(t.flags&1026)!==0&&(r=t.return),e=t.return;while(e)}return t.tag===3?r:null}function $he(e){if(e.tag===13){var t=e.memoizedState;if(t===null&&(e=e.alternate,e!==null&&(t=e.memoizedState)),t!==null)return t.dehydrated}return null}function Ode(e){if(q1(e)!==e)throw Error(nr(188))}function sgt(e){var t=e.alternate;if(!t){if(t=q1(e),t===null)throw Error(nr(188));return t!==e?null:e}for(var r=e,n=t;;){var o=r.return;if(o===null)break;var i=o.alternate;if(i===null){if(n=o.return,n!==null){r=n;continue}break}if(o.child===i.child){for(i=o.child;i;){if(i===r)return Ode(o),e;if(i===n)return Ode(o),t;i=i.sibling}throw Error(nr(188))}if(r.return!==n.return)r=o,n=i;else{for(var a=!1,u=o.child;u;){if(u===r){a=!0,r=o,n=i;break}if(u===n){a=!0,n=o,r=i;break}u=u.sibling}if(!a){for(u=i.child;u;){if(u===r){a=!0,r=i,n=o;break}if(u===n){a=!0,n=i,r=o;break}u=u.sibling}if(!a)throw Error(nr(189))}}if(r.alternate!==n)throw Error(nr(190))}if(r.tag!==3)throw Error(nr(188));return r.stateNode.current===r?e:t}function Zhe(e){if(e=sgt(e),!e)return null;for(var t=e;;){if(t.tag===5||t.tag===6)return t;if(t.child)t.child.return=t,t=t.child;else{if(t===e)break;for(;!t.sibling;){if(!t.return||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}}return null}function Pde(e,t){for(var r=e.alternate;t!==null;){if(t===e||t===r)return!0;t=t.return}return!1}var Yhe,dG,Khe,Xhe,IV=!1,ah=[],Pv=null,Nv=null,Dv=null,JI=new Map,eM=new Map,wI=[],Nde="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function MV(e,t,r,n,o){return{blockedOn:e,domEventName:t,eventSystemFlags:r|16,nativeEvent:o,targetContainers:[n]}}function Dde(e,t){switch(e){case"focusin":case"focusout":Pv=null;break;case"dragenter":case"dragleave":Nv=null;break;case"mouseover":case"mouseout":Dv=null;break;case"pointerover":case"pointerout":JI.delete(t.pointerId);break;case"gotpointercapture":case"lostpointercapture":eM.delete(t.pointerId)}}function EI(e,t,r,n,o,i){return e===null||e.nativeEvent!==i?(e=MV(t,r,n,o,i),t!==null&&(t=pM(t),t!==null&&dG(t)),e):(e.eventSystemFlags|=n,t=e.targetContainers,o!==null&&t.indexOf(o)===-1&&t.push(o),e)}function lgt(e,t,r,n,o){switch(t){case"focusin":return Pv=EI(Pv,e,t,r,n,o),!0;case"dragenter":return Nv=EI(Nv,e,t,r,n,o),!0;case"mouseover":return Dv=EI(Dv,e,t,r,n,o),!0;case"pointerover":var i=o.pointerId;return JI.set(i,EI(JI.get(i)||null,e,t,r,n,o)),!0;case"gotpointercapture":return i=o.pointerId,eM.set(i,EI(eM.get(i)||null,e,t,r,n,o)),!0}return!1}function ugt(e){var t=A1(e.target);if(t!==null){var r=q1(t);if(r!==null){if(t=r.tag,t===13){if(t=$he(r),t!==null){e.blockedOn=t,Xhe(e.lanePriority,function(){Us.unstable_runWithPriority(e.priority,function(){Khe(r)})});return}}else if(t===3&&r.stateNode.hydrate){e.blockedOn=r.tag===3?r.stateNode.containerInfo:null;return}}}e.blockedOn=null}function ND(e){if(e.blockedOn!==null)return!1;for(var t=e.targetContainers;0<t.length;){var r=vG(e.domEventName,e.eventSystemFlags,t[0],e.nativeEvent);if(r!==null)return t=pM(r),t!==null&&dG(t),e.blockedOn=r,!1;t.shift()}return!0}function Lde(e,t,r){ND(e)&&r.delete(t)}function cgt(){for(IV=!1;0<ah.length;){var e=ah[0];if(e.blockedOn!==null){e=pM(e.blockedOn),e!==null&&Yhe(e);break}for(var t=e.targetContainers;0<t.length;){var r=vG(e.domEventName,e.eventSystemFlags,t[0],e.nativeEvent);if(r!==null){e.blockedOn=r;break}t.shift()}e.blockedOn===null&&ah.shift()}Pv!==null&&ND(Pv)&&(Pv=null),Nv!==null&&ND(Nv)&&(Nv=null),Dv!==null&&ND(Dv)&&(Dv=null),JI.forEach(Lde),eM.forEach(Lde)}function SI(e,t){e.blockedOn===t&&(e.blockedOn=null,IV||(IV=!0,Us.unstable_scheduleCallback(Us.unstable_NormalPriority,cgt)))}function Qhe(e){function t(o){return SI(o,e)}if(0<ah.length){SI(ah[0],e);for(var r=1;r<ah.length;r++){var n=ah[r];n.blockedOn===e&&(n.blockedOn=null)}}for(Pv!==null&&SI(Pv,e),Nv!==null&&SI(Nv,e),Dv!==null&&SI(Dv,e),JI.forEach(t),eM.forEach(t),r=0;r<wI.length;r++)n=wI[r],n.blockedOn===e&&(n.blockedOn=null);for(;0<wI.length&&(r=wI[0],r.blockedOn===null);)ugt(r),r.blockedOn===null&&wI.shift()}function wD(e,t){var r={};return r[e.toLowerCase()]=t.toLowerCase(),r["Webkit"+e]="webkit"+t,r["Moz"+e]="moz"+t,r}var Zx={animationend:wD("Animation","AnimationEnd"),animationiteration:wD("Animation","AnimationIteration"),animationstart:wD("Animation","AnimationStart"),transitionend:wD("Transition","TransitionEnd")},ZB={},Jhe={};Gm&&(Jhe=document.createElement("div").style,"AnimationEvent"in window||(delete Zx.animationend.animation,delete Zx.animationiteration.animation,delete Zx.animationstart.animation),"TransitionEvent"in window||delete Zx.transitionend.transition);function h5(e){if(ZB[e])return ZB[e];if(!Zx[e])return e;var t=Zx[e],r;for(r in t)if(t.hasOwnProperty(r)&&r in Jhe)return ZB[e]=t[r];return e}var eme=h5("animationend"),tme=h5("animationiteration"),rme=h5("animationstart"),nme=h5("transitionend"),ome=new Map,hG=new Map,pgt=["abort","abort",eme,"animationEnd",tme,"animationIteration",rme,"animationStart","canplay","canPlay","canplaythrough","canPlayThrough","durationchange","durationChange","emptied","emptied","encrypted","encrypted","ended","ended","error","error","gotpointercapture","gotPointerCapture","load","load","loadeddata","loadedData","loadedmetadata","loadedMetadata","loadstart","loadStart","lostpointercapture","lostPointerCapture","playing","playing","progress","progress","seeking","seeking","stalled","stalled","suspend","suspend","timeupdate","timeUpdate",nme,"transitionEnd","waiting","waiting"];function mG(e,t){for(var r=0;r<e.length;r+=2){var n=e[r],o=e[r+1];o="on"+(o[0].toUpperCase()+o.slice(1)),hG.set(n,t),ome.set(n,o),R1(o,[n])}}var fgt=Us.unstable_now;fgt();var Ui=8;function Wx(e){if((1&e)!==0)return Ui=15,1;if((2&e)!==0)return Ui=14,2;if((4&e)!==0)return Ui=13,4;var t=24&e;return t!==0?(Ui=12,t):(e&32)!==0?(Ui=11,32):(t=192&e,t!==0?(Ui=10,t):(e&256)!==0?(Ui=9,256):(t=3584&e,t!==0?(Ui=8,t):(e&4096)!==0?(Ui=7,4096):(t=4186112&e,t!==0?(Ui=6,t):(t=62914560&e,t!==0?(Ui=5,t):e&67108864?(Ui=4,67108864):(e&134217728)!==0?(Ui=3,134217728):(t=805306368&e,t!==0?(Ui=2,t):(1073741824&e)!==0?(Ui=1,1073741824):(Ui=8,e))))))}function dgt(e){switch(e){case 99:return 15;case 98:return 10;case 97:case 96:return 8;case 95:return 2;default:return 0}}function hgt(e){switch(e){case 15:case 14:return 99;case 13:case 12:case 11:case 10:return 98;case 9:case 8:case 7:case 6:case 4:case 5:return 97;case 3:case 2:case 1:return 95;case 0:return 90;default:throw Error(nr(358,e))}}function tM(e,t){var r=e.pendingLanes;if(r===0)return Ui=0;var n=0,o=0,i=e.expiredLanes,a=e.suspendedLanes,u=e.pingedLanes;if(i!==0)n=i,o=Ui=15;else if(i=r&134217727,i!==0){var d=i&~a;d!==0?(n=Wx(d),o=Ui):(u&=i,u!==0&&(n=Wx(u),o=Ui))}else i=r&~a,i!==0?(n=Wx(i),o=Ui):u!==0&&(n=Wx(u),o=Ui);if(n===0)return 0;if(n=31-Fv(n),n=r&((0>n?0:1<<n)<<1)-1,t!==0&&t!==n&&(t&a)===0){if(Wx(t),o<=Ui)return t;Ui=o}if(t=e.entangledLanes,t!==0)for(e=e.entanglements,t&=n;0<t;)r=31-Fv(t),o=1<<r,n|=e[r],t&=~o;return n}function ime(e){return e=e.pendingLanes&-1073741825,e!==0?e:e&1073741824?1073741824:0}function WD(e,t){switch(e){case 15:return 1;case 14:return 2;case 12:return e=$x(24&~t),e===0?WD(10,t):e;case 10:return e=$x(192&~t),e===0?WD(8,t):e;case 8:return e=$x(3584&~t),e===0&&(e=$x(4186112&~t),e===0&&(e=512)),e;case 2:return t=$x(805306368&~t),t===0&&(t=268435456),t}throw Error(nr(358,e))}function $x(e){return e&-e}function YB(e){for(var t=[],r=0;31>r;r++)t.push(e);return t}function m5(e,t,r){e.pendingLanes|=t;var n=t-1;e.suspendedLanes&=n,e.pingedLanes&=n,e=e.eventTimes,t=31-Fv(t),e[t]=r}var Fv=Math.clz32?Math.clz32:vgt,mgt=Math.log,ggt=Math.LN2;function vgt(e){return e===0?32:31-(mgt(e)/ggt|0)|0}var ygt=Us.unstable_UserBlockingPriority,_gt=Us.unstable_runWithPriority,DD=!0;function bgt(e,t,r,n){C1||pG();var o=gG,i=C1;C1=!0;try{Hhe(o,e,t,r,n)}finally{(C1=i)||fG()}}function xgt(e,t,r,n){_gt(ygt,gG.bind(null,e,t,r,n))}function gG(e,t,r,n){if(DD){var o;if((o=(t&4)===0)&&0<ah.length&&-1<Nde.indexOf(e))e=MV(null,e,t,r,n),ah.push(e);else{var i=vG(e,t,r,n);if(i===null)o&&Dde(e,n);else{if(o){if(-1<Nde.indexOf(e)){e=MV(i,e,t,r,n),ah.push(e);return}if(lgt(i,e,t,r,n))return;Dde(e,n)}yme(e,t,n,null,r)}}}}function vG(e,t,r,n){var o=uG(n);if(o=A1(o),o!==null){var i=q1(o);if(i===null)o=null;else{var a=i.tag;if(a===13){if(o=$he(i),o!==null)return o;o=null}else if(a===3){if(i.stateNode.hydrate)return i.tag===3?i.stateNode.containerInfo:null;o=null}else i!==o&&(o=null)}}return yme(e,t,n,o,r),null}var Cv=null,yG=null,LD=null;function ame(){if(LD)return LD;var e,t=yG,r=t.length,n,o="value"in Cv?Cv.value:Cv.textContent,i=o.length;for(e=0;e<r&&t[e]===o[e];e++);var a=r-e;for(n=1;n<=a&&t[r-n]===o[i-n];n++);return LD=o.slice(e,1<n?1-n:void 0)}function kD(e){var t=e.keyCode;return"charCode"in e?(e=e.charCode,e===0&&t===13&&(e=13)):e=t,e===10&&(e=13),32<=e||e===13?e:0}function ED(){return!0}function kde(){return!1}function Jc(e){function t(r,n,o,i,a){this._reactName=r,this._targetInst=o,this.type=n,this.nativeEvent=i,this.target=a,this.currentTarget=null;for(var u in e)e.hasOwnProperty(u)&&(r=e[u],this[u]=r?r(i):i[u]);return this.isDefaultPrevented=(i.defaultPrevented!=null?i.defaultPrevented:i.returnValue===!1)?ED:kde,this.isPropagationStopped=kde,this}return la(t.prototype,{preventDefault:function(){this.defaultPrevented=!0;var r=this.nativeEvent;r&&(r.preventDefault?r.preventDefault():typeof r.returnValue!="unknown"&&(r.returnValue=!1),this.isDefaultPrevented=ED)},stopPropagation:function(){var r=this.nativeEvent;r&&(r.stopPropagation?r.stopPropagation():typeof r.cancelBubble!="unknown"&&(r.cancelBubble=!0),this.isPropagationStopped=ED)},persist:function(){},isPersistent:ED}),t}var hw={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},_G=Jc(hw),cM=la({},hw,{view:0,detail:0}),wgt=Jc(cM),KB,XB,TI,g5=la({},cM,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:bG,button:0,buttons:0,relatedTarget:function(e){return e.relatedTarget===void 0?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==TI&&(TI&&e.type==="mousemove"?(KB=e.screenX-TI.screenX,XB=e.screenY-TI.screenY):XB=KB=0,TI=e),KB)},movementY:function(e){return"movementY"in e?e.movementY:XB}}),Rde=Jc(g5),Egt=la({},g5,{dataTransfer:0}),Sgt=Jc(Egt),Tgt=la({},cM,{relatedTarget:0}),QB=Jc(Tgt),Igt=la({},hw,{animationName:0,elapsedTime:0,pseudoElement:0}),Mgt=Jc(Igt),Cgt=la({},hw,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}}),Agt=Jc(Cgt),Ogt=la({},hw,{data:0}),jde=Jc(Ogt),Pgt={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},Ngt={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},Dgt={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function Lgt(e){var t=this.nativeEvent;return t.getModifierState?t.getModifierState(e):(e=Dgt[e])?!!t[e]:!1}function bG(){return Lgt}var kgt=la({},cM,{key:function(e){if(e.key){var t=Pgt[e.key]||e.key;if(t!=="Unidentified")return t}return e.type==="keypress"?(e=kD(e),e===13?"Enter":String.fromCharCode(e)):e.type==="keydown"||e.type==="keyup"?Ngt[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:bG,charCode:function(e){return e.type==="keypress"?kD(e):0},keyCode:function(e){return e.type==="keydown"||e.type==="keyup"?e.keyCode:0},which:function(e){return e.type==="keypress"?kD(e):e.type==="keydown"||e.type==="keyup"?e.keyCode:0}}),Rgt=Jc(kgt),jgt=la({},g5,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),qde=Jc(jgt),qgt=la({},cM,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:bG}),zgt=Jc(qgt),Fgt=la({},hw,{propertyName:0,elapsedTime:0,pseudoElement:0}),Ugt=Jc(Fgt),Bgt=la({},g5,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0}),Vgt=Jc(Bgt),Ggt=[9,13,27,32],xG=Gm&&"CompositionEvent"in window,BI=null;Gm&&"documentMode"in document&&(BI=document.documentMode);var Hgt=Gm&&"TextEvent"in window&&!BI,sme=Gm&&(!xG||BI&&8<BI&&11>=BI),zde=" ",Fde=!1;function lme(e,t){switch(e){case"keyup":return Ggt.indexOf(t.keyCode)!==-1;case"keydown":return t.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function ume(e){return e=e.detail,typeof e=="object"&&"data"in e?e.data:null}var Yx=!1;function Wgt(e,t){switch(e){case"compositionend":return ume(t);case"keypress":return t.which!==32?null:(Fde=!0,zde);case"textInput":return e=t.data,e===zde&&Fde?null:e;default:return null}}function $gt(e,t){if(Yx)return e==="compositionend"||!xG&&lme(e,t)?(e=ame(),LD=yG=Cv=null,Yx=!1,e):null;switch(e){case"paste":return null;case"keypress":if(!(t.ctrlKey||t.altKey||t.metaKey)||t.ctrlKey&&t.altKey){if(t.char&&1<t.char.length)return t.char;if(t.which)return String.fromCharCode(t.which)}return null;case"compositionend":return sme&&t.locale!=="ko"?null:t.data;default:return null}}var Zgt={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Ude(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t==="input"?!!Zgt[e.type]:t==="textarea"}function cme(e,t,r,n){Vhe(n),t=$D(t,"onChange"),0<t.length&&(r=new _G("onChange","change",null,r,n),e.push({event:r,listeners:t}))}var VI=null,rM=null;function Ygt(e){mme(e,0)}function v5(e){var t=Xx(e);if(Rhe(t))return e}function Kgt(e,t){if(e==="change")return t}var pme=!1;Gm&&(Gm?(TD="oninput"in document,TD||(JB=document.createElement("div"),JB.setAttribute("oninput","return;"),TD=typeof JB.oninput=="function"),SD=TD):SD=!1,pme=SD&&(!document.documentMode||9<document.documentMode));var SD,TD,JB;function Bde(){VI&&(VI.detachEvent("onpropertychange",fme),rM=VI=null)}function fme(e){if(e.propertyName==="value"&&v5(rM)){var t=[];if(cme(t,rM,e,uG(e)),e=Ygt,C1)e(t);else{C1=!0;try{cG(e,t)}finally{C1=!1,fG()}}}}function Xgt(e,t,r){e==="focusin"?(Bde(),VI=t,rM=r,VI.attachEvent("onpropertychange",fme)):e==="focusout"&&Bde()}function Qgt(e){if(e==="selectionchange"||e==="keyup"||e==="keydown")return v5(rM)}function Jgt(e,t){if(e==="click")return v5(t)}function evt(e,t){if(e==="input"||e==="change")return v5(t)}function tvt(e,t){return e===t&&(e!==0||1/e===1/t)||e!==e&&t!==t}var Op=typeof Object.is=="function"?Object.is:tvt,rvt=Object.prototype.hasOwnProperty;function nM(e,t){if(Op(e,t))return!0;if(typeof e!="object"||e===null||typeof t!="object"||t===null)return!1;var r=Object.keys(e),n=Object.keys(t);if(r.length!==n.length)return!1;for(n=0;n<r.length;n++)if(!rvt.call(t,r[n])||!Op(e[r[n]],t[r[n]]))return!1;return!0}function Vde(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function Gde(e,t){var r=Vde(e);e=0;for(var n;r;){if(r.nodeType===3){if(n=e+r.textContent.length,e<=t&&n>=t)return{node:r,offset:t-e};e=n}e:{for(;r;){if(r.nextSibling){r=r.nextSibling;break e}r=r.parentNode}r=void 0}r=Vde(r)}}function dme(e,t){return e&&t?e===t?!0:e&&e.nodeType===3?!1:t&&t.nodeType===3?dme(e,t.parentNode):"contains"in e?e.contains(t):e.compareDocumentPosition?!!(e.compareDocumentPosition(t)&16):!1:!1}function Hde(){for(var e=window,t=VD();t instanceof e.HTMLIFrameElement;){try{var r=typeof t.contentWindow.location.href=="string"}catch(n){r=!1}if(r)e=t.contentWindow;else break;t=VD(e.document)}return t}function CV(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t&&(t==="input"&&(e.type==="text"||e.type==="search"||e.type==="tel"||e.type==="url"||e.type==="password")||t==="textarea"||e.contentEditable==="true")}var nvt=Gm&&"documentMode"in document&&11>=document.documentMode,Kx=null,AV=null,GI=null,OV=!1;function Wde(e,t,r){var n=r.window===r?r.document:r.nodeType===9?r:r.ownerDocument;OV||Kx==null||Kx!==VD(n)||(n=Kx,"selectionStart"in n&&CV(n)?n={start:n.selectionStart,end:n.selectionEnd}:(n=(n.ownerDocument&&n.ownerDocument.defaultView||window).getSelection(),n={anchorNode:n.anchorNode,anchorOffset:n.anchorOffset,focusNode:n.focusNode,focusOffset:n.focusOffset}),GI&&nM(GI,n)||(GI=n,n=$D(AV,"onSelect"),0<n.length&&(t=new _G("onSelect","select",null,t,r),e.push({event:t,listeners:n}),t.target=Kx)))}mG("cancel cancel click click close close contextmenu contextMenu copy copy cut cut auxclick auxClick dblclick doubleClick dragend dragEnd dragstart dragStart drop drop focusin focus focusout blur input input invalid invalid keydown keyDown keypress keyPress keyup keyUp mousedown mouseDown mouseup mouseUp paste paste pause pause play play pointercancel pointerCancel pointerdown pointerDown pointerup pointerUp ratechange rateChange reset reset seeked seeked submit submit touchcancel touchCancel touchend touchEnd touchstart touchStart volumechange volumeChange".split(" "),0);mG("drag drag dragenter dragEnter dragexit dragExit dragleave dragLeave dragover dragOver mousemove mouseMove mouseout mouseOut mouseover mouseOver pointermove pointerMove pointerout pointerOut pointerover pointerOver scroll scroll toggle toggle touchmove touchMove wheel wheel".split(" "),1);mG(pgt,2);for(eV="change selectionchange textInput compositionstart compositionend compositionupdate".split(" "),ID=0;ID<eV.length;ID++)hG.set(eV[ID],0);var eV,ID;cw("onMouseEnter",["mouseout","mouseover"]);cw("onMouseLeave",["mouseout","mouseover"]);cw("onPointerEnter",["pointerout","pointerover"]);cw("onPointerLeave",["pointerout","pointerover"]);R1("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));R1("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));R1("onBeforeInput",["compositionend","keypress","textInput","paste"]);R1("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));R1("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));R1("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var kI="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),hme=new Set("cancel close invalid load scroll toggle".split(" ").concat(kI));function $de(e,t,r){var n=e.type||"unknown-event";e.currentTarget=r,agt(n,t,void 0,e),e.currentTarget=null}function mme(e,t){t=(t&4)!==0;for(var r=0;r<e.length;r++){var n=e[r],o=n.event;n=n.listeners;e:{var i=void 0;if(t)for(var a=n.length-1;0<=a;a--){var u=n[a],d=u.instance,h=u.currentTarget;if(u=u.listener,d!==i&&o.isPropagationStopped())break e;$de(o,u,h),i=d}else for(a=0;a<n.length;a++){if(u=n[a],d=u.instance,h=u.currentTarget,u=u.listener,d!==i&&o.isPropagationStopped())break e;$de(o,u,h),i=d}}}if(HD)throw e=TV,HD=!1,TV=null,e}function Qi(e,t){var r=bme(t),n=e+"__bubble";r.has(n)||(vme(t,e,2,!1),r.add(n))}var Zde="_reactListening"+Math.random().toString(36).slice(2);function gme(e){e[Zde]||(e[Zde]=!0,Dhe.forEach(function(t){hme.has(t)||Yde(t,!1,e,null),Yde(t,!0,e,null)}))}function Yde(e,t,r,n){var o=4<arguments.length&&arguments[4]!==void 0?arguments[4]:0,i=r;if(e==="selectionchange"&&r.nodeType!==9&&(i=r.ownerDocument),n!==null&&!t&&hme.has(e)){if(e!=="scroll")return;o|=2,i=n}var a=bme(i),u=e+"__"+(t?"capture":"bubble");a.has(u)||(t&&(o|=4),vme(i,e,o,t),a.add(u))}function vme(e,t,r,n){var o=hG.get(t);switch(o===void 0?2:o){case 0:o=bgt;break;case 1:o=xgt;break;default:o=gG}r=o.bind(null,t,r,e),o=void 0,!SV||t!=="touchstart"&&t!=="touchmove"&&t!=="wheel"||(o=!0),n?o!==void 0?e.addEventListener(t,r,{capture:!0,passive:o}):e.addEventListener(t,r,!0):o!==void 0?e.addEventListener(t,r,{passive:o}):e.addEventListener(t,r,!1)}function yme(e,t,r,n,o){var i=n;if((t&1)===0&&(t&2)===0&&n!==null)e:for(;;){if(n===null)return;var a=n.tag;if(a===3||a===4){var u=n.stateNode.containerInfo;if(u===o||u.nodeType===8&&u.parentNode===o)break;if(a===4)for(a=n.return;a!==null;){var d=a.tag;if((d===3||d===4)&&(d=a.stateNode.containerInfo,d===o||d.nodeType===8&&d.parentNode===o))return;a=a.return}for(;u!==null;){if(a=A1(u),a===null)return;if(d=a.tag,d===5||d===6){n=i=a;continue e}u=u.parentNode}}n=n.return}rgt(function(){var h=i,v=uG(r),b=[];e:{var x=ome.get(e);if(x!==void 0){var M=_G,O=e;switch(e){case"keypress":if(kD(r)===0)break e;case"keydown":case"keyup":M=Rgt;break;case"focusin":O="focus",M=QB;break;case"focusout":O="blur",M=QB;break;case"beforeblur":case"afterblur":M=QB;break;case"click":if(r.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":M=Rde;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":M=Sgt;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":M=zgt;break;case eme:case tme:case rme:M=Mgt;break;case nme:M=Ugt;break;case"scroll":M=wgt;break;case"wheel":M=Vgt;break;case"copy":case"cut":case"paste":M=Agt;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":M=qde}var D=(t&4)!==0,k=!D&&e==="scroll",R=D?x!==null?x+"Capture":null:x;D=[];for(var q=h,B;q!==null;){B=q;var G=B.stateNode;if(B.tag===5&&G!==null&&(B=G,R!==null&&(G=QI(q,R),G!=null&&D.push(oM(q,G,B)))),k)break;q=q.return}0<D.length&&(x=new M(x,O,null,r,v),b.push({event:x,listeners:D}))}}if((t&7)===0){e:{if(x=e==="mouseover"||e==="pointerover",M=e==="mouseout"||e==="pointerout",x&&(t&16)===0&&(O=r.relatedTarget||r.fromElement)&&(A1(O)||O[mw]))break e;if((M||x)&&(x=v.window===v?v:(x=v.ownerDocument)?x.defaultView||x.parentWindow:window,M?(O=r.relatedTarget||r.toElement,M=h,O=O?A1(O):null,O!==null&&(k=q1(O),O!==k||O.tag!==5&&O.tag!==6)&&(O=null)):(M=null,O=h),M!==O)){if(D=Rde,G="onMouseLeave",R="onMouseEnter",q="mouse",(e==="pointerout"||e==="pointerover")&&(D=qde,G="onPointerLeave",R="onPointerEnter",q="pointer"),k=M==null?x:Xx(M),B=O==null?x:Xx(O),x=new D(G,q+"leave",M,r,v),x.target=k,x.relatedTarget=B,G=null,A1(v)===h&&(D=new D(R,q+"enter",O,r,v),D.target=B,D.relatedTarget=k,G=D),k=G,M&&O)t:{for(D=M,R=O,q=0,B=D;B;B=Hx(B))q++;for(B=0,G=R;G;G=Hx(G))B++;for(;0<q-B;)D=Hx(D),q--;for(;0<B-q;)R=Hx(R),B--;for(;q--;){if(D===R||R!==null&&D===R.alternate)break t;D=Hx(D),R=Hx(R)}D=null}else D=null;M!==null&&Kde(b,x,M,D,!1),O!==null&&k!==null&&Kde(b,k,O,D,!0)}}e:{if(x=h?Xx(h):window,M=x.nodeName&&x.nodeName.toLowerCase(),M==="select"||M==="input"&&x.type==="file")var re=Kgt;else if(Ude(x)){if(pme)re=evt;else{re=Qgt;var Q=Xgt}}else(M=x.nodeName)&&M.toLowerCase()==="input"&&(x.type==="checkbox"||x.type==="radio")&&(re=Jgt);if(re&&(re=re(e,h))){cme(b,re,r,v);break e}Q&&Q(e,x,h),e==="focusout"&&(Q=x._wrapperState)&&Q.controlled&&x.type==="number"&&gV(x,"number",x.value)}switch(Q=h?Xx(h):window,e){case"focusin":(Ude(Q)||Q.contentEditable==="true")&&(Kx=Q,AV=h,GI=null);break;case"focusout":GI=AV=Kx=null;break;case"mousedown":OV=!0;break;case"contextmenu":case"mouseup":case"dragend":OV=!1,Wde(b,r,v);break;case"selectionchange":if(nvt)break;case"keydown":case"keyup":Wde(b,r,v)}var ie;if(xG)e:{switch(e){case"compositionstart":var me="onCompositionStart";break e;case"compositionend":me="onCompositionEnd";break e;case"compositionupdate":me="onCompositionUpdate";break e}me=void 0}else Yx?lme(e,r)&&(me="onCompositionEnd"):e==="keydown"&&r.keyCode===229&&(me="onCompositionStart");me&&(sme&&r.locale!=="ko"&&(Yx||me!=="onCompositionStart"?me==="onCompositionEnd"&&Yx&&(ie=ame()):(Cv=v,yG="value"in Cv?Cv.value:Cv.textContent,Yx=!0)),Q=$D(h,me),0<Q.length&&(me=new jde(me,e,null,r,v),b.push({event:me,listeners:Q}),ie?me.data=ie:(ie=ume(r),ie!==null&&(me.data=ie)))),(ie=Hgt?Wgt(e,r):$gt(e,r))&&(h=$D(h,"onBeforeInput"),0<h.length&&(v=new jde("onBeforeInput","beforeinput",null,r,v),b.push({event:v,listeners:h}),v.data=ie))}mme(b,t)})}function oM(e,t,r){return{instance:e,listener:t,currentTarget:r}}function $D(e,t){for(var r=t+"Capture",n=[];e!==null;){var o=e,i=o.stateNode;o.tag===5&&i!==null&&(o=i,i=QI(e,r),i!=null&&n.unshift(oM(e,i,o)),i=QI(e,t),i!=null&&n.push(oM(e,i,o))),e=e.return}return n}function Hx(e){if(e===null)return null;do e=e.return;while(e&&e.tag!==5);return e||null}function Kde(e,t,r,n,o){for(var i=t._reactName,a=[];r!==null&&r!==n;){var u=r,d=u.alternate,h=u.stateNode;if(d!==null&&d===n)break;u.tag===5&&h!==null&&(u=h,o?(d=QI(r,i),d!=null&&a.unshift(oM(r,d,u))):o||(d=QI(r,i),d!=null&&a.push(oM(r,d,u)))),r=r.return}a.length!==0&&e.push({event:t,listeners:a})}function ZD(){}var tV=null,rV=null;function _me(e,t){switch(e){case"button":case"input":case"select":case"textarea":return!!t.autoFocus}return!1}function PV(e,t){return e==="textarea"||e==="option"||e==="noscript"||typeof t.children=="string"||typeof t.children=="number"||typeof t.dangerouslySetInnerHTML=="object"&&t.dangerouslySetInnerHTML!==null&&t.dangerouslySetInnerHTML.__html!=null}var Xde=typeof setTimeout=="function"?setTimeout:void 0,ovt=typeof clearTimeout=="function"?clearTimeout:void 0;function wG(e){e.nodeType===1?e.textContent="":e.nodeType===9&&(e=e.body,e!=null&&(e.textContent=""))}function ow(e){for(;e!=null;e=e.nextSibling){var t=e.nodeType;if(t===1||t===3)break}return e}function Qde(e){e=e.previousSibling;for(var t=0;e;){if(e.nodeType===8){var r=e.data;if(r==="$"||r==="$!"||r==="$?"){if(t===0)return e;t--}else r==="/$"&&t++}e=e.previousSibling}return null}var nV=0;function ivt(e){return{$$typeof:sG,toString:e,valueOf:e}}var y5=Math.random().toString(36).slice(2),Av="__reactFiber$"+y5,YD="__reactProps$"+y5,mw="__reactContainer$"+y5,Jde="__reactEvents$"+y5;function A1(e){var t=e[Av];if(t)return t;for(var r=e.parentNode;r;){if(t=r[mw]||r[Av]){if(r=t.alternate,t.child!==null||r!==null&&r.child!==null)for(e=Qde(e);e!==null;){if(r=e[Av])return r;e=Qde(e)}return t}e=r,r=e.parentNode}return null}function pM(e){return e=e[Av]||e[mw],!e||e.tag!==5&&e.tag!==6&&e.tag!==13&&e.tag!==3?null:e}function Xx(e){if(e.tag===5||e.tag===6)return e.stateNode;throw Error(nr(33))}function _5(e){return e[YD]||null}function bme(e){var t=e[Jde];return t===void 0&&(t=e[Jde]=new Set),t}var NV=[],Qx=-1;function Gv(e){return{current:e}}function Ji(e){0>Qx||(e.current=NV[Qx],NV[Qx]=null,Qx--)}function Ca(e,t){Qx++,NV[Qx]=e.current,e.current=t}var Uv={},Ql=Gv(Uv),lc=Gv(!1),D1=Uv;function pw(e,t){var r=e.type.contextTypes;if(!r)return Uv;var n=e.stateNode;if(n&&n.__reactInternalMemoizedUnmaskedChildContext===t)return n.__reactInternalMemoizedMaskedChildContext;var o={},i;for(i in r)o[i]=t[i];return n&&(e=e.stateNode,e.__reactInternalMemoizedUnmaskedChildContext=t,e.__reactInternalMemoizedMaskedChildContext=o),o}function uc(e){return e=e.childContextTypes,e!=null}function KD(){Ji(lc),Ji(Ql)}function ehe(e,t,r){if(Ql.current!==Uv)throw Error(nr(168));Ca(Ql,t),Ca(lc,r)}function xme(e,t,r){var n=e.stateNode;if(e=t.childContextTypes,typeof n.getChildContext!="function")return r;n=n.getChildContext();for(var o in n)if(!(o in e))throw Error(nr(108,ew(t)||"Unknown",o));return la({},r,n)}function RD(e){return e=(e=e.stateNode)&&e.__reactInternalMemoizedMergedChildContext||Uv,D1=Ql.current,Ca(Ql,e),Ca(lc,lc.current),!0}function the(e,t,r){var n=e.stateNode;if(!n)throw Error(nr(169));r?(e=xme(e,t,D1),n.__reactInternalMemoizedMergedChildContext=e,Ji(lc),Ji(Ql),Ca(Ql,e)):Ji(lc),Ca(lc,r)}var EG=null,N1=null,avt=Us.unstable_runWithPriority,SG=Us.unstable_scheduleCallback,DV=Us.unstable_cancelCallback,svt=Us.unstable_shouldYield,rhe=Us.unstable_requestPaint,LV=Us.unstable_now,lvt=Us.unstable_getCurrentPriorityLevel,b5=Us.unstable_ImmediatePriority,wme=Us.unstable_UserBlockingPriority,Eme=Us.unstable_NormalPriority,Sme=Us.unstable_LowPriority,Tme=Us.unstable_IdlePriority,oV={},uvt=rhe!==void 0?rhe:function(){},zm=null,jD=null,iV=!1,nhe=LV(),Kl=1e4>nhe?LV:function(){return LV()-nhe};function fw(){switch(lvt()){case b5:return 99;case wme:return 98;case Eme:return 97;case Sme:return 96;case Tme:return 95;default:throw Error(nr(332))}}function Ime(e){switch(e){case 99:return b5;case 98:return wme;case 97:return Eme;case 96:return Sme;case 95:return Tme;default:throw Error(nr(332))}}function L1(e,t){return e=Ime(e),avt(e,t)}function iM(e,t,r){return e=Ime(e),SG(e,t,r)}function ph(){if(jD!==null){var e=jD;jD=null,DV(e)}Mme()}function Mme(){if(!iV&&zm!==null){iV=!0;var e=0;try{var t=zm;L1(99,function(){for(;e<t.length;e++){var r=t[e];do r=r(!0);while(r!==null)}}),zm=null}catch(r){throw zm!==null&&(zm=zm.slice(e+1)),SG(b5,ph),r}finally{iV=!1}}}var cvt=j1.ReactCurrentBatchConfig;function $f(e,t){if(e&&e.defaultProps){t=la({},t),e=e.defaultProps;for(var r in e)t[r]===void 0&&(t[r]=e[r]);return t}return t}var XD=Gv(null),QD=null,Jx=null,JD=null;function TG(){JD=Jx=QD=null}function IG(e){var t=XD.current;Ji(XD),e.type._context._currentValue=t}function Cme(e,t){for(;e!==null;){var r=e.alternate;if((e.childLanes&t)===t){if(r===null||(r.childLanes&t)===t)break;r.childLanes|=t}else e.childLanes|=t,r!==null&&(r.childLanes|=t);e=e.return}}function iw(e,t){QD=e,JD=Jx=null,e=e.dependencies,e!==null&&e.firstContext!==null&&((e.lanes&t)!==0&&(Zf=!0),e.firstContext=null)}function Dp(e,t){if(JD!==e&&t!==!1&&t!==0)if((typeof t!="number"||t===1073741823)&&(JD=e,t=1073741823),t={context:e,observedBits:t,next:null},Jx===null){if(QD===null)throw Error(nr(308));Jx=t,QD.dependencies={lanes:0,firstContext:t,responders:null}}else Jx=Jx.next=t;return e._currentValue}var Iv=!1;function MG(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null},effects:null}}function Ame(e,t){e=e.updateQueue,t.updateQueue===e&&(t.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,effects:e.effects})}function Lv(e,t){return{eventTime:e,lane:t,tag:0,payload:null,callback:null,next:null}}function kv(e,t){if(e=e.updateQueue,e!==null){e=e.shared;var r=e.pending;r===null?t.next=t:(t.next=r.next,r.next=t),e.pending=t}}function ohe(e,t){var r=e.updateQueue,n=e.alternate;if(n!==null&&(n=n.updateQueue,r===n)){var o=null,i=null;if(r=r.firstBaseUpdate,r!==null){do{var a={eventTime:r.eventTime,lane:r.lane,tag:r.tag,payload:r.payload,callback:r.callback,next:null};i===null?o=i=a:i=i.next=a,r=r.next}while(r!==null);i===null?o=i=t:i=i.next=t}else o=i=t;r={baseState:n.baseState,firstBaseUpdate:o,lastBaseUpdate:i,shared:n.shared,effects:n.effects},e.updateQueue=r;return}e=r.lastBaseUpdate,e===null?r.firstBaseUpdate=t:e.next=t,r.lastBaseUpdate=t}function aM(e,t,r,n){var o=e.updateQueue;Iv=!1;var i=o.firstBaseUpdate,a=o.lastBaseUpdate,u=o.shared.pending;if(u!==null){o.shared.pending=null;var d=u,h=d.next;d.next=null,a===null?i=h:a.next=h,a=d;var v=e.alternate;if(v!==null){v=v.updateQueue;var b=v.lastBaseUpdate;b!==a&&(b===null?v.firstBaseUpdate=h:b.next=h,v.lastBaseUpdate=d)}}if(i!==null){b=o.baseState,a=0,v=h=d=null;do{u=i.lane;var x=i.eventTime;if((n&u)===u){v!==null&&(v=v.next={eventTime:x,lane:0,tag:i.tag,payload:i.payload,callback:i.callback,next:null});e:{var M=e,O=i;switch(u=t,x=r,O.tag){case 1:if(M=O.payload,typeof M=="function"){b=M.call(x,b,u);break e}b=M;break e;case 3:M.flags=M.flags&-4097|64;case 0:if(M=O.payload,u=typeof M=="function"?M.call(x,b,u):M,u==null)break e;b=la({},b,u);break e;case 2:Iv=!0}}i.callback!==null&&(e.flags|=32,u=o.effects,u===null?o.effects=[i]:u.push(i))}else x={eventTime:x,lane:u,tag:i.tag,payload:i.payload,callback:i.callback,next:null},v===null?(h=v=x,d=b):v=v.next=x,a|=u;if(i=i.next,i===null){if(u=o.shared.pending,u===null)break;i=u.next,u.next=null,o.lastBaseUpdate=u,o.shared.pending=null}}while(!0);v===null&&(d=b),o.baseState=d,o.firstBaseUpdate=h,o.lastBaseUpdate=v,dM|=a,e.lanes=a,e.memoizedState=b}}function ihe(e,t,r){if(e=t.effects,t.effects=null,e!==null)for(t=0;t<e.length;t++){var n=e[t],o=n.callback;if(o!==null){if(n.callback=null,n=r,typeof o!="function")throw Error(nr(191,o));o.call(n)}}}var Ome=new p5.Component().refs;function e5(e,t,r,n){t=e.memoizedState,r=r(n,t),r=r==null?t:la({},t,r),e.memoizedState=r,e.lanes===0&&(e.updateQueue.baseState=r)}var x5={isMounted:function(e){return(e=e._reactInternals)?q1(e)===e:!1},enqueueSetState:function(e,t,r){e=e._reactInternals;var n=Qc(),o=Rv(e),i=Lv(n,o);i.payload=t,r!=null&&(i.callback=r),kv(e,i),jv(e,o,n)},enqueueReplaceState:function(e,t,r){e=e._reactInternals;var n=Qc(),o=Rv(e),i=Lv(n,o);i.tag=1,i.payload=t,r!=null&&(i.callback=r),kv(e,i),jv(e,o,n)},enqueueForceUpdate:function(e,t){e=e._reactInternals;var r=Qc(),n=Rv(e),o=Lv(r,n);o.tag=2,t!=null&&(o.callback=t),kv(e,o),jv(e,n,r)}};function ahe(e,t,r,n,o,i,a){return e=e.stateNode,typeof e.shouldComponentUpdate=="function"?e.shouldComponentUpdate(n,i,a):t.prototype&&t.prototype.isPureReactComponent?!nM(r,n)||!nM(o,i):!0}function Pme(e,t,r){var n=!1,o=Uv,i=t.contextType;return typeof i=="object"&&i!==null?i=Dp(i):(o=uc(t)?D1:Ql.current,n=t.contextTypes,i=(n=n!=null)?pw(e,o):Uv),t=new t(r,i),e.memoizedState=t.state!==null&&t.state!==void 0?t.state:null,t.updater=x5,e.stateNode=t,t._reactInternals=e,n&&(e=e.stateNode,e.__reactInternalMemoizedUnmaskedChildContext=o,e.__reactInternalMemoizedMaskedChildContext=i),t}function she(e,t,r,n){e=t.state,typeof t.componentWillReceiveProps=="function"&&t.componentWillReceiveProps(r,n),typeof t.UNSAFE_componentWillReceiveProps=="function"&&t.UNSAFE_componentWillReceiveProps(r,n),t.state!==e&&x5.enqueueReplaceState(t,t.state,null)}function kV(e,t,r,n){var o=e.stateNode;o.props=r,o.state=e.memoizedState,o.refs=Ome,MG(e);var i=t.contextType;typeof i=="object"&&i!==null?o.context=Dp(i):(i=uc(t)?D1:Ql.current,o.context=pw(e,i)),aM(e,r,o,n),o.state=e.memoizedState,i=t.getDerivedStateFromProps,typeof i=="function"&&(e5(e,t,i,r),o.state=e.memoizedState),typeof t.getDerivedStateFromProps=="function"||typeof o.getSnapshotBeforeUpdate=="function"||typeof o.UNSAFE_componentWillMount!="function"&&typeof o.componentWillMount!="function"||(t=o.state,typeof o.componentWillMount=="function"&&o.componentWillMount(),typeof o.UNSAFE_componentWillMount=="function"&&o.UNSAFE_componentWillMount(),t!==o.state&&x5.enqueueReplaceState(o,o.state,null),aM(e,r,o,n),o.state=e.memoizedState),typeof o.componentDidMount=="function"&&(e.flags|=4)}var MD=Array.isArray;function II(e,t,r){if(e=r.ref,e!==null&&typeof e!="function"&&typeof e!="object"){if(r._owner){if(r=r._owner,r){if(r.tag!==1)throw Error(nr(309));var n=r.stateNode}if(!n)throw Error(nr(147,e));var o=""+e;return t!==null&&t.ref!==null&&typeof t.ref=="function"&&t.ref._stringRef===o?t.ref:(t=function(i){var a=n.refs;a===Ome&&(a=n.refs={}),i===null?delete a[o]:a[o]=i},t._stringRef=o,t)}if(typeof e!="string")throw Error(nr(284));if(!r._owner)throw Error(nr(290,e))}return e}function CD(e,t){if(e.type!=="textarea")throw Error(nr(31,Object.prototype.toString.call(t)==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":t))}function Nme(e){function t(k,R){if(e){var q=k.lastEffect;q!==null?(q.nextEffect=R,k.lastEffect=R):k.firstEffect=k.lastEffect=R,R.nextEffect=null,R.flags=8}}function r(k,R){if(!e)return null;for(;R!==null;)t(k,R),R=R.sibling;return null}function n(k,R){for(k=new Map;R!==null;)R.key!==null?k.set(R.key,R):k.set(R.index,R),R=R.sibling;return k}function o(k,R){return k=Vv(k,R),k.index=0,k.sibling=null,k}function i(k,R,q){return k.index=q,e?(q=k.alternate,q!==null?(q=q.index,q<R?(k.flags=2,R):q):(k.flags=2,R)):R}function a(k){return e&&k.alternate===null&&(k.flags=2),k}function u(k,R,q,B){return R===null||R.tag!==6?(R=cV(q,k.mode,B),R.return=k,R):(R=o(R,q),R.return=k,R)}function d(k,R,q,B){return R!==null&&R.elementType===q.type?(B=o(R,q.props),B.ref=II(k,R,q),B.return=k,B):(B=UD(q.type,q.key,q.props,null,k.mode,B),B.ref=II(k,R,q),B.return=k,B)}function h(k,R,q,B){return R===null||R.tag!==4||R.stateNode.containerInfo!==q.containerInfo||R.stateNode.implementation!==q.implementation?(R=pV(q,k.mode,B),R.return=k,R):(R=o(R,q.children||[]),R.return=k,R)}function v(k,R,q,B,G){return R===null||R.tag!==7?(R=uw(q,k.mode,B,G),R.return=k,R):(R=o(R,q),R.return=k,R)}function b(k,R,q){if(typeof R=="string"||typeof R=="number")return R=cV(""+R,k.mode,q),R.return=k,R;if(typeof R=="object"&&R!==null){switch(R.$$typeof){case DI:return q=UD(R.type,R.key,R.props,null,k.mode,q),q.ref=II(k,null,R),q.return=k,q;case M1:return R=pV(R,k.mode,q),R.return=k,R}if(MD(R)||xI(R))return R=uw(R,k.mode,q,null),R.return=k,R;CD(k,R)}return null}function x(k,R,q,B){var G=R!==null?R.key:null;if(typeof q=="string"||typeof q=="number")return G!==null?null:u(k,R,""+q,B);if(typeof q=="object"&&q!==null){switch(q.$$typeof){case DI:return q.key===G?q.type===Mv?v(k,R,q.props.children,B,G):d(k,R,q,B):null;case M1:return q.key===G?h(k,R,q,B):null}if(MD(q)||xI(q))return G!==null?null:v(k,R,q,B,null);CD(k,q)}return null}function M(k,R,q,B,G){if(typeof B=="string"||typeof B=="number")return k=k.get(q)||null,u(R,k,""+B,G);if(typeof B=="object"&&B!==null){switch(B.$$typeof){case DI:return k=k.get(B.key===null?q:B.key)||null,B.type===Mv?v(R,k,B.props.children,G,B.key):d(R,k,B,G);case M1:return k=k.get(B.key===null?q:B.key)||null,h(R,k,B,G)}if(MD(B)||xI(B))return k=k.get(q)||null,v(R,k,B,G,null);CD(R,B)}return null}function O(k,R,q,B){for(var G=null,re=null,Q=R,ie=R=0,me=null;Q!==null&&ie<q.length;ie++){Q.index>ie?(me=Q,Q=null):me=Q.sibling;var ve=x(k,Q,q[ie],B);if(ve===null){Q===null&&(Q=me);break}e&&Q&&ve.alternate===null&&t(k,Q),R=i(ve,R,ie),re===null?G=ve:re.sibling=ve,re=ve,Q=me}if(ie===q.length)return r(k,Q),G;if(Q===null){for(;ie<q.length;ie++)Q=b(k,q[ie],B),Q!==null&&(R=i(Q,R,ie),re===null?G=Q:re.sibling=Q,re=Q);return G}for(Q=n(k,Q);ie<q.length;ie++)me=M(Q,k,ie,q[ie],B),me!==null&&(e&&me.alternate!==null&&Q.delete(me.key===null?ie:me.key),R=i(me,R,ie),re===null?G=me:re.sibling=me,re=me);return e&&Q.forEach(function(ye){return t(k,ye)}),G}function D(k,R,q,B){var G=xI(q);if(typeof G!="function")throw Error(nr(150));if(q=G.call(q),q==null)throw Error(nr(151));for(var re=G=null,Q=R,ie=R=0,me=null,ve=q.next();Q!==null&&!ve.done;ie++,ve=q.next()){Q.index>ie?(me=Q,Q=null):me=Q.sibling;var ye=x(k,Q,ve.value,B);if(ye===null){Q===null&&(Q=me);break}e&&Q&&ye.alternate===null&&t(k,Q),R=i(ye,R,ie),re===null?G=ye:re.sibling=ye,re=ye,Q=me}if(ve.done)return r(k,Q),G;if(Q===null){for(;!ve.done;ie++,ve=q.next())ve=b(k,ve.value,B),ve!==null&&(R=i(ve,R,ie),re===null?G=ve:re.sibling=ve,re=ve);return G}for(Q=n(k,Q);!ve.done;ie++,ve=q.next())ve=M(Q,k,ie,ve.value,B),ve!==null&&(e&&ve.alternate!==null&&Q.delete(ve.key===null?ie:ve.key),R=i(ve,R,ie),re===null?G=ve:re.sibling=ve,re=ve);return e&&Q.forEach(function(we){return t(k,we)}),G}return function(k,R,q,B){var G=typeof q=="object"&&q!==null&&q.type===Mv&&q.key===null;G&&(q=q.props.children);var re=typeof q=="object"&&q!==null;if(re)switch(q.$$typeof){case DI:e:{for(re=q.key,G=R;G!==null;){if(G.key===re){switch(G.tag){case 7:if(q.type===Mv){r(k,G.sibling),R=o(G,q.props.children),R.return=k,k=R;break e}break;default:if(G.elementType===q.type){r(k,G.sibling),R=o(G,q.props),R.ref=II(k,G,q),R.return=k,k=R;break e}}r(k,G);break}else t(k,G);G=G.sibling}q.type===Mv?(R=uw(q.props.children,k.mode,B,q.key),R.return=k,k=R):(B=UD(q.type,q.key,q.props,null,k.mode,B),B.ref=II(k,R,q),B.return=k,k=B)}return a(k);case M1:e:{for(G=q.key;R!==null;){if(R.key===G){if(R.tag===4&&R.stateNode.containerInfo===q.containerInfo&&R.stateNode.implementation===q.implementation){r(k,R.sibling),R=o(R,q.children||[]),R.return=k,k=R;break e}else{r(k,R);break}}else t(k,R);R=R.sibling}R=pV(q,k.mode,B),R.return=k,k=R}return a(k)}if(typeof q=="string"||typeof q=="number")return q=""+q,R!==null&&R.tag===6?(r(k,R.sibling),R=o(R,q),R.return=k,k=R):(r(k,R),R=cV(q,k.mode,B),R.return=k,k=R),a(k);if(MD(q))return O(k,R,q,B);if(xI(q))return D(k,R,q,B);if(re&&CD(k,q),typeof q=="undefined"&&!G)switch(k.tag){case 1:case 22:case 0:case 11:case 15:throw Error(nr(152,ew(k.type)||"Component"))}return r(k,R)}}var t5=Nme(!0),Dme=Nme(!1),fM={},uh=Gv(fM),sM=Gv(fM),lM=Gv(fM);function O1(e){if(e===fM)throw Error(nr(174));return e}function RV(e,t){switch(Ca(lM,t),Ca(sM,e),Ca(uh,fM),e=t.nodeType,e){case 9:case 11:t=(t=t.documentElement)?t.namespaceURI:bV(null,"");break;default:e=e===8?t.parentNode:t,t=e.namespaceURI||null,e=e.tagName,t=bV(t,e)}Ji(uh),Ca(uh,t)}function dw(){Ji(uh),Ji(sM),Ji(lM)}function lhe(e){O1(lM.current);var t=O1(uh.current),r=bV(t,e.type);t!==r&&(Ca(sM,e),Ca(uh,r))}function CG(e){sM.current===e&&(Ji(uh),Ji(sM))}var Ma=Gv(0);function r5(e){for(var t=e;t!==null;){if(t.tag===13){var r=t.memoizedState;if(r!==null&&(r=r.dehydrated,r===null||r.data==="$?"||r.data==="$!"))return t}else if(t.tag===19&&t.memoizedProps.revealOrder!==void 0){if((t.flags&64)!==0)return t}else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}return null}var Um=null,Ov=null,ch=!1;function Lme(e,t){var r=Pp(5,null,null,0);r.elementType="DELETED",r.type="DELETED",r.stateNode=t,r.return=e,r.flags=8,e.lastEffect!==null?(e.lastEffect.nextEffect=r,e.lastEffect=r):e.firstEffect=e.lastEffect=r}function uhe(e,t){switch(e.tag){case 5:var r=e.type;return t=t.nodeType!==1||r.toLowerCase()!==t.nodeName.toLowerCase()?null:t,t!==null?(e.stateNode=t,!0):!1;case 6:return t=e.pendingProps===""||t.nodeType!==3?null:t,t!==null?(e.stateNode=t,!0):!1;case 13:return!1;default:return!1}}function jV(e){if(ch){var t=Ov;if(t){var r=t;if(!uhe(e,t)){if(t=ow(r.nextSibling),!t||!uhe(e,t)){e.flags=e.flags&-1025|2,ch=!1,Um=e;return}Lme(Um,r)}Um=e,Ov=ow(t.firstChild)}else e.flags=e.flags&-1025|2,ch=!1,Um=e}}function che(e){for(e=e.return;e!==null&&e.tag!==5&&e.tag!==3&&e.tag!==13;)e=e.return;Um=e}function AD(e){if(e!==Um)return!1;if(!ch)return che(e),ch=!0,!1;var t=e.type;if(e.tag!==5||t!=="head"&&t!=="body"&&!PV(t,e.memoizedProps))for(t=Ov;t;)Lme(e,t),t=ow(t.nextSibling);if(che(e),e.tag===13){if(e=e.memoizedState,e=e!==null?e.dehydrated:null,!e)throw Error(nr(317));e:{for(e=e.nextSibling,t=0;e;){if(e.nodeType===8){var r=e.data;if(r==="/$"){if(t===0){Ov=ow(e.nextSibling);break e}t--}else r!=="$"&&r!=="$!"&&r!=="$?"||t++}e=e.nextSibling}Ov=null}}else Ov=Um?ow(e.stateNode.nextSibling):null;return!0}function aV(){Ov=Um=null,ch=!1}var aw=[];function AG(){for(var e=0;e<aw.length;e++)aw[e]._workInProgressVersionPrimary=null;aw.length=0}var HI=j1.ReactCurrentDispatcher,Np=j1.ReactCurrentBatchConfig,uM=0,Ha=null,Yl=null,dl=null,n5=!1,WI=!1;function ac(){throw Error(nr(321))}function OG(e,t){if(t===null)return!1;for(var r=0;r<t.length&&r<e.length;r++)if(!Op(e[r],t[r]))return!1;return!0}function PG(e,t,r,n,o,i){if(uM=i,Ha=t,t.memoizedState=null,t.updateQueue=null,t.lanes=0,HI.current=e===null||e.memoizedState===null?fvt:dvt,e=r(n,o),WI){i=0;do{if(WI=!1,!(25>i))throw Error(nr(301));i+=1,dl=Yl=null,t.updateQueue=null,HI.current=hvt,e=r(n,o)}while(WI)}if(HI.current=s5,t=Yl!==null&&Yl.next!==null,uM=0,dl=Yl=Ha=null,n5=!1,t)throw Error(nr(300));return e}function P1(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return dl===null?Ha.memoizedState=dl=e:dl=dl.next=e,dl}function z1(){if(Yl===null){var e=Ha.alternate;e=e!==null?e.memoizedState:null}else e=Yl.next;var t=dl===null?Ha.memoizedState:dl.next;if(t!==null)dl=t,Yl=e;else{if(e===null)throw Error(nr(310));Yl=e,e={memoizedState:Yl.memoizedState,baseState:Yl.baseState,baseQueue:Yl.baseQueue,queue:Yl.queue,next:null},dl===null?Ha.memoizedState=dl=e:dl=dl.next=e}return dl}function sh(e,t){return typeof t=="function"?t(e):t}function MI(e){var t=z1(),r=t.queue;if(r===null)throw Error(nr(311));r.lastRenderedReducer=e;var n=Yl,o=n.baseQueue,i=r.pending;if(i!==null){if(o!==null){var a=o.next;o.next=i.next,i.next=a}n.baseQueue=o=i,r.pending=null}if(o!==null){o=o.next,n=n.baseState;var u=a=i=null,d=o;do{var h=d.lane;if((uM&h)===h)u!==null&&(u=u.next={lane:0,action:d.action,eagerReducer:d.eagerReducer,eagerState:d.eagerState,next:null}),n=d.eagerReducer===e?d.eagerState:e(n,d.action);else{var v={lane:h,action:d.action,eagerReducer:d.eagerReducer,eagerState:d.eagerState,next:null};u===null?(a=u=v,i=n):u=u.next=v,Ha.lanes|=h,dM|=h}d=d.next}while(d!==null&&d!==o);u===null?i=n:u.next=a,Op(n,t.memoizedState)||(Zf=!0),t.memoizedState=n,t.baseState=i,t.baseQueue=u,r.lastRenderedState=n}return[t.memoizedState,r.dispatch]}function CI(e){var t=z1(),r=t.queue;if(r===null)throw Error(nr(311));r.lastRenderedReducer=e;var n=r.dispatch,o=r.pending,i=t.memoizedState;if(o!==null){r.pending=null;var a=o=o.next;do i=e(i,a.action),a=a.next;while(a!==o);Op(i,t.memoizedState)||(Zf=!0),t.memoizedState=i,t.baseQueue===null&&(t.baseState=i),r.lastRenderedState=i}return[i,n]}function phe(e,t,r){var n=t._getVersion;n=n(t._source);var o=t._workInProgressVersionPrimary;if(o!==null?e=o===n:(e=e.mutableReadLanes,(e=(uM&e)===e)&&(t._workInProgressVersionPrimary=n,aw.push(t))),e)return r(t._source);throw aw.push(t),Error(nr(350))}function kme(e,t,r,n){var o=Cu;if(o===null)throw Error(nr(349));var i=t._getVersion,a=i(t._source),u=HI.current,d=u.useState(function(){return phe(o,t,r)}),h=d[1],v=d[0];d=dl;var b=e.memoizedState,x=b.refs,M=x.getSnapshot,O=b.source;b=b.subscribe;var D=Ha;return e.memoizedState={refs:x,source:t,subscribe:n},u.useEffect(function(){x.getSnapshot=r,x.setSnapshot=h;var k=i(t._source);if(!Op(a,k)){k=r(t._source),Op(v,k)||(h(k),k=Rv(D),o.mutableReadLanes|=k&o.pendingLanes),k=o.mutableReadLanes,o.entangledLanes|=k;for(var R=o.entanglements,q=k;0<q;){var B=31-Fv(q),G=1<<B;R[B]|=k,q&=~G}}},[r,t,n]),u.useEffect(function(){return n(t._source,function(){var k=x.getSnapshot,R=x.setSnapshot;try{R(k(t._source));var q=Rv(D);o.mutableReadLanes|=q&o.pendingLanes}catch(B){R(function(){throw B})}})},[t,n]),Op(M,r)&&Op(O,t)&&Op(b,n)||(e={pending:null,dispatch:null,lastRenderedReducer:sh,lastRenderedState:v},e.dispatch=h=LG.bind(null,Ha,e),d.queue=e,d.baseQueue=null,v=phe(o,t,r),d.memoizedState=d.baseState=v),v}function Rme(e,t,r){var n=z1();return kme(n,e,t,r)}function AI(e){var t=P1();return typeof e=="function"&&(e=e()),t.memoizedState=t.baseState=e,e=t.queue={pending:null,dispatch:null,lastRenderedReducer:sh,lastRenderedState:e},e=e.dispatch=LG.bind(null,Ha,e),[t.memoizedState,e]}function o5(e,t,r,n){return e={tag:e,create:t,destroy:r,deps:n,next:null},t=Ha.updateQueue,t===null?(t={lastEffect:null},Ha.updateQueue=t,t.lastEffect=e.next=e):(r=t.lastEffect,r===null?t.lastEffect=e.next=e:(n=r.next,r.next=e,e.next=n,t.lastEffect=e)),e}function fhe(e){var t=P1();return e={current:e},t.memoizedState=e}function i5(){return z1().memoizedState}function qV(e,t,r,n){var o=P1();Ha.flags|=e,o.memoizedState=o5(1|t,r,void 0,n===void 0?null:n)}function NG(e,t,r,n){var o=z1();n=n===void 0?null:n;var i=void 0;if(Yl!==null){var a=Yl.memoizedState;if(i=a.destroy,n!==null&&OG(n,a.deps)){o5(t,r,i,n);return}}Ha.flags|=e,o.memoizedState=o5(1|t,r,i,n)}function dhe(e,t){return qV(516,4,e,t)}function a5(e,t){return NG(516,4,e,t)}function jme(e,t){return NG(4,2,e,t)}function qme(e,t){if(typeof t=="function")return e=e(),t(e),function(){t(null)};if(t!=null)return e=e(),t.current=e,function(){t.current=null}}function zme(e,t,r){return r=r!=null?r.concat([e]):null,NG(4,2,qme.bind(null,t,e),r)}function DG(){}function Fme(e,t){var r=z1();t=t===void 0?null:t;var n=r.memoizedState;return n!==null&&t!==null&&OG(t,n[1])?n[0]:(r.memoizedState=[e,t],e)}function Ume(e,t){var r=z1();t=t===void 0?null:t;var n=r.memoizedState;return n!==null&&t!==null&&OG(t,n[1])?n[0]:(e=e(),r.memoizedState=[e,t],e)}function pvt(e,t){var r=fw();L1(98>r?98:r,function(){e(!0)}),L1(97<r?97:r,function(){var n=Np.transition;Np.transition=1;try{e(!1),t()}finally{Np.transition=n}})}function LG(e,t,r){var n=Qc(),o=Rv(e),i={lane:o,action:r,eagerReducer:null,eagerState:null,next:null},a=t.pending;if(a===null?i.next=i:(i.next=a.next,a.next=i),t.pending=i,a=e.alternate,e===Ha||a!==null&&a===Ha)WI=n5=!0;else{if(e.lanes===0&&(a===null||a.lanes===0)&&(a=t.lastRenderedReducer,a!==null))try{var u=t.lastRenderedState,d=a(u,r);if(i.eagerReducer=a,i.eagerState=d,Op(d,u))return}catch(h){}finally{}jv(e,o,n)}}var s5={readContext:Dp,useCallback:ac,useContext:ac,useEffect:ac,useImperativeHandle:ac,useLayoutEffect:ac,useMemo:ac,useReducer:ac,useRef:ac,useState:ac,useDebugValue:ac,useDeferredValue:ac,useTransition:ac,useMutableSource:ac,useOpaqueIdentifier:ac,unstable_isNewReconciler:!1},fvt={readContext:Dp,useCallback:function(e,t){return P1().memoizedState=[e,t===void 0?null:t],e},useContext:Dp,useEffect:dhe,useImperativeHandle:function(e,t,r){return r=r!=null?r.concat([e]):null,qV(4,2,qme.bind(null,t,e),r)},useLayoutEffect:function(e,t){return qV(4,2,e,t)},useMemo:function(e,t){var r=P1();return t=t===void 0?null:t,e=e(),r.memoizedState=[e,t],e},useReducer:function(e,t,r){var n=P1();return t=r!==void 0?r(t):t,n.memoizedState=n.baseState=t,e=n.queue={pending:null,dispatch:null,lastRenderedReducer:e,lastRenderedState:t},e=e.dispatch=LG.bind(null,Ha,e),[n.memoizedState,e]},useRef:fhe,useState:AI,useDebugValue:DG,useDeferredValue:function(e){var t=AI(e),r=t[0],n=t[1];return dhe(function(){var o=Np.transition;Np.transition=1;try{n(e)}finally{Np.transition=o}},[e]),r},useTransition:function(){var e=AI(!1),t=e[0];return e=pvt.bind(null,e[1]),fhe(e),[e,t]},useMutableSource:function(e,t,r){var n=P1();return n.memoizedState={refs:{getSnapshot:t,setSnapshot:null},source:e,subscribe:r},kme(n,e,t,r)},useOpaqueIdentifier:function(){if(ch){var e=!1,t=ivt(function(){throw e||(e=!0,r("r:"+(nV++).toString(36))),Error(nr(355))}),r=AI(t)[1];return(Ha.mode&2)===0&&(Ha.flags|=516,o5(5,function(){r("r:"+(nV++).toString(36))},void 0,null)),t}return t="r:"+(nV++).toString(36),AI(t),t},unstable_isNewReconciler:!1},dvt={readContext:Dp,useCallback:Fme,useContext:Dp,useEffect:a5,useImperativeHandle:zme,useLayoutEffect:jme,useMemo:Ume,useReducer:MI,useRef:i5,useState:function(){return MI(sh)},useDebugValue:DG,useDeferredValue:function(e){var t=MI(sh),r=t[0],n=t[1];return a5(function(){var o=Np.transition;Np.transition=1;try{n(e)}finally{Np.transition=o}},[e]),r},useTransition:function(){var e=MI(sh)[0];return[i5().current,e]},useMutableSource:Rme,useOpaqueIdentifier:function(){return MI(sh)[0]},unstable_isNewReconciler:!1},hvt={readContext:Dp,useCallback:Fme,useContext:Dp,useEffect:a5,useImperativeHandle:zme,useLayoutEffect:jme,useMemo:Ume,useReducer:CI,useRef:i5,useState:function(){return CI(sh)},useDebugValue:DG,useDeferredValue:function(e){var t=CI(sh),r=t[0],n=t[1];return a5(function(){var o=Np.transition;Np.transition=1;try{n(e)}finally{Np.transition=o}},[e]),r},useTransition:function(){var e=CI(sh)[0];return[i5().current,e]},useMutableSource:Rme,useOpaqueIdentifier:function(){return CI(sh)[0]},unstable_isNewReconciler:!1},mvt=j1.ReactCurrentOwner,Zf=!1;function sc(e,t,r,n){t.child=e===null?Dme(t,null,r,n):t5(t,e.child,r,n)}function hhe(e,t,r,n,o){r=r.render;var i=t.ref;return iw(t,o),n=PG(e,t,r,n,i,o),e!==null&&!Zf?(t.updateQueue=e.updateQueue,t.flags&=-517,e.lanes&=~o,Bm(e,t,o)):(t.flags|=1,sc(e,t,n,o),t.child)}function mhe(e,t,r,n,o,i){if(e===null){var a=r.type;return typeof a=="function"&&!FG(a)&&a.defaultProps===void 0&&r.compare===null&&r.defaultProps===void 0?(t.tag=15,t.type=a,Bme(e,t,a,n,o,i)):(e=UD(r.type,null,n,t,t.mode,i),e.ref=t.ref,e.return=t,t.child=e)}return a=e.child,(o&i)===0&&(o=a.memoizedProps,r=r.compare,r=r!==null?r:nM,r(o,n)&&e.ref===t.ref)?Bm(e,t,i):(t.flags|=1,e=Vv(a,n),e.ref=t.ref,e.return=t,t.child=e)}function Bme(e,t,r,n,o,i){if(e!==null&&nM(e.memoizedProps,n)&&e.ref===t.ref)if(Zf=!1,(i&o)!==0)(e.flags&16384)!==0&&(Zf=!0);else return t.lanes=e.lanes,Bm(e,t,i);return zV(e,t,r,n,i)}function sV(e,t,r){var n=t.pendingProps,o=n.children,i=e!==null?e.memoizedState:null;if(n.mode==="hidden"||n.mode==="unstable-defer-without-hiding"){if((t.mode&4)===0)t.memoizedState={baseLanes:0},PD(t,r);else if((r&1073741824)!==0)t.memoizedState={baseLanes:0},PD(t,i!==null?i.baseLanes:r);else return e=i!==null?i.baseLanes|r:r,t.lanes=t.childLanes=1073741824,t.memoizedState={baseLanes:e},PD(t,e),null;}else i!==null?(n=i.baseLanes|r,t.memoizedState=null):n=r,PD(t,n);return sc(e,t,o,r),t.child}function Vme(e,t){var r=t.ref;(e===null&&r!==null||e!==null&&e.ref!==r)&&(t.flags|=128)}function zV(e,t,r,n,o){var i=uc(r)?D1:Ql.current;return i=pw(t,i),iw(t,o),r=PG(e,t,r,n,i,o),e!==null&&!Zf?(t.updateQueue=e.updateQueue,t.flags&=-517,e.lanes&=~o,Bm(e,t,o)):(t.flags|=1,sc(e,t,r,o),t.child)}function ghe(e,t,r,n,o){if(uc(r)){var i=!0;RD(t)}else i=!1;if(iw(t,o),t.stateNode===null)e!==null&&(e.alternate=null,t.alternate=null,t.flags|=2),Pme(t,r,n),kV(t,r,n,o),n=!0;else if(e===null){var a=t.stateNode,u=t.memoizedProps;a.props=u;var d=a.context,h=r.contextType;typeof h=="object"&&h!==null?h=Dp(h):(h=uc(r)?D1:Ql.current,h=pw(t,h));var v=r.getDerivedStateFromProps,b=typeof v=="function"||typeof a.getSnapshotBeforeUpdate=="function";b||typeof a.UNSAFE_componentWillReceiveProps!="function"&&typeof a.componentWillReceiveProps!="function"||(u!==n||d!==h)&&she(t,a,n,h),Iv=!1;var x=t.memoizedState;a.state=x,aM(t,n,a,o),d=t.memoizedState,u!==n||x!==d||lc.current||Iv?(typeof v=="function"&&(e5(t,r,v,n),d=t.memoizedState),(u=Iv||ahe(t,r,u,n,x,d,h))?(b||typeof a.UNSAFE_componentWillMount!="function"&&typeof a.componentWillMount!="function"||(typeof a.componentWillMount=="function"&&a.componentWillMount(),typeof a.UNSAFE_componentWillMount=="function"&&a.UNSAFE_componentWillMount()),typeof a.componentDidMount=="function"&&(t.flags|=4)):(typeof a.componentDidMount=="function"&&(t.flags|=4),t.memoizedProps=n,t.memoizedState=d),a.props=n,a.state=d,a.context=h,n=u):(typeof a.componentDidMount=="function"&&(t.flags|=4),n=!1)}else{a=t.stateNode,Ame(e,t),u=t.memoizedProps,h=t.type===t.elementType?u:$f(t.type,u),a.props=h,b=t.pendingProps,x=a.context,d=r.contextType,typeof d=="object"&&d!==null?d=Dp(d):(d=uc(r)?D1:Ql.current,d=pw(t,d));var M=r.getDerivedStateFromProps;(v=typeof M=="function"||typeof a.getSnapshotBeforeUpdate=="function")||typeof a.UNSAFE_componentWillReceiveProps!="function"&&typeof a.componentWillReceiveProps!="function"||(u!==b||x!==d)&&she(t,a,n,d),Iv=!1,x=t.memoizedState,a.state=x,aM(t,n,a,o);var O=t.memoizedState;u!==b||x!==O||lc.current||Iv?(typeof M=="function"&&(e5(t,r,M,n),O=t.memoizedState),(h=Iv||ahe(t,r,h,n,x,O,d))?(v||typeof a.UNSAFE_componentWillUpdate!="function"&&typeof a.componentWillUpdate!="function"||(typeof a.componentWillUpdate=="function"&&a.componentWillUpdate(n,O,d),typeof a.UNSAFE_componentWillUpdate=="function"&&a.UNSAFE_componentWillUpdate(n,O,d)),typeof a.componentDidUpdate=="function"&&(t.flags|=4),typeof a.getSnapshotBeforeUpdate=="function"&&(t.flags|=256)):(typeof a.componentDidUpdate!="function"||u===e.memoizedProps&&x===e.memoizedState||(t.flags|=4),typeof a.getSnapshotBeforeUpdate!="function"||u===e.memoizedProps&&x===e.memoizedState||(t.flags|=256),t.memoizedProps=n,t.memoizedState=O),a.props=n,a.state=O,a.context=d,n=h):(typeof a.componentDidUpdate!="function"||u===e.memoizedProps&&x===e.memoizedState||(t.flags|=4),typeof a.getSnapshotBeforeUpdate!="function"||u===e.memoizedProps&&x===e.memoizedState||(t.flags|=256),n=!1)}return FV(e,t,r,n,i,o)}function FV(e,t,r,n,o,i){Vme(e,t);var a=(t.flags&64)!==0;if(!n&&!a)return o&&the(t,r,!1),Bm(e,t,i);n=t.stateNode,mvt.current=t;var u=a&&typeof r.getDerivedStateFromError!="function"?null:n.render();return t.flags|=1,e!==null&&a?(t.child=t5(t,e.child,null,i),t.child=t5(t,null,u,i)):sc(e,t,u,i),t.memoizedState=n.state,o&&the(t,r,!0),t.child}function vhe(e){var t=e.stateNode;t.pendingContext?ehe(e,t.pendingContext,t.pendingContext!==t.context):t.context&&ehe(e,t.context,!1),RV(e,t.containerInfo)}var OD={dehydrated:null,retryLane:0};function yhe(e,t,r){var n=t.pendingProps,o=Ma.current,i=!1,a;return(a=(t.flags&64)!==0)||(a=e!==null&&e.memoizedState===null?!1:(o&2)!==0),a?(i=!0,t.flags&=-65):e!==null&&e.memoizedState===null||n.fallback===void 0||n.unstable_avoidThisFallback===!0||(o|=1),Ca(Ma,o&1),e===null?(n.fallback!==void 0&&jV(t),e=n.children,o=n.fallback,i?(e=_he(t,e,o,r),t.child.memoizedState={baseLanes:r},t.memoizedState=OD,e):typeof n.unstable_expectedLoadTime=="number"?(e=_he(t,e,o,r),t.child.memoizedState={baseLanes:r},t.memoizedState=OD,t.lanes=33554432,e):(r=UG({mode:"visible",children:e},t.mode,r,null),r.return=t,t.child=r)):e.memoizedState!==null?i?(n=xhe(e,t,n.children,n.fallback,r),i=t.child,o=e.child.memoizedState,i.memoizedState=o===null?{baseLanes:r}:{baseLanes:o.baseLanes|r},i.childLanes=e.childLanes&~r,t.memoizedState=OD,n):(r=bhe(e,t,n.children,r),t.memoizedState=null,r):i?(n=xhe(e,t,n.children,n.fallback,r),i=t.child,o=e.child.memoizedState,i.memoizedState=o===null?{baseLanes:r}:{baseLanes:o.baseLanes|r},i.childLanes=e.childLanes&~r,t.memoizedState=OD,n):(r=bhe(e,t,n.children,r),t.memoizedState=null,r)}function _he(e,t,r,n){var o=e.mode,i=e.child;return t={mode:"hidden",children:t},(o&2)===0&&i!==null?(i.childLanes=0,i.pendingProps=t):i=UG(t,o,0,null),r=uw(r,o,n,null),i.return=e,r.return=e,i.sibling=r,e.child=i,r}function bhe(e,t,r,n){var o=e.child;return e=o.sibling,r=Vv(o,{mode:"visible",children:r}),(t.mode&2)===0&&(r.lanes=n),r.return=t,r.sibling=null,e!==null&&(e.nextEffect=null,e.flags=8,t.firstEffect=t.lastEffect=e),t.child=r}function xhe(e,t,r,n,o){var i=t.mode,a=e.child;e=a.sibling;var u={mode:"hidden",children:r};return(i&2)===0&&t.child!==a?(r=t.child,r.childLanes=0,r.pendingProps=u,a=r.lastEffect,a!==null?(t.firstEffect=r.firstEffect,t.lastEffect=a,a.nextEffect=null):t.firstEffect=t.lastEffect=null):r=Vv(a,u),e!==null?n=Vv(e,n):(n=uw(n,i,o,null),n.flags|=2),n.return=t,r.return=t,r.sibling=n,t.child=r,n}function whe(e,t){e.lanes|=t;var r=e.alternate;r!==null&&(r.lanes|=t),Cme(e.return,t)}function lV(e,t,r,n,o,i){var a=e.memoizedState;a===null?e.memoizedState={isBackwards:t,rendering:null,renderingStartTime:0,last:n,tail:r,tailMode:o,lastEffect:i}:(a.isBackwards=t,a.rendering=null,a.renderingStartTime=0,a.last=n,a.tail=r,a.tailMode=o,a.lastEffect=i)}function Ehe(e,t,r){var n=t.pendingProps,o=n.revealOrder,i=n.tail;if(sc(e,t,n.children,r),n=Ma.current,(n&2)!==0)n=n&1|2,t.flags|=64;else{if(e!==null&&(e.flags&64)!==0)e:for(e=t.child;e!==null;){if(e.tag===13)e.memoizedState!==null&&whe(e,r);else if(e.tag===19)whe(e,r);else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break e;for(;e.sibling===null;){if(e.return===null||e.return===t)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}n&=1}if(Ca(Ma,n),(t.mode&2)===0)t.memoizedState=null;else switch(o){case"forwards":for(r=t.child,o=null;r!==null;)e=r.alternate,e!==null&&r5(e)===null&&(o=r),r=r.sibling;r=o,r===null?(o=t.child,t.child=null):(o=r.sibling,r.sibling=null),lV(t,!1,o,r,i,t.lastEffect);break;case"backwards":for(r=null,o=t.child,t.child=null;o!==null;){if(e=o.alternate,e!==null&&r5(e)===null){t.child=o;break}e=o.sibling,o.sibling=r,r=o,o=e}lV(t,!0,r,null,i,t.lastEffect);break;case"together":lV(t,!1,null,null,void 0,t.lastEffect);break;default:t.memoizedState=null}return t.child}function Bm(e,t,r){if(e!==null&&(t.dependencies=e.dependencies),dM|=t.lanes,(r&t.childLanes)!==0){if(e!==null&&t.child!==e.child)throw Error(nr(153));if(t.child!==null){for(e=t.child,r=Vv(e,e.pendingProps),t.child=r,r.return=t;e.sibling!==null;)e=e.sibling,r=r.sibling=Vv(e,e.pendingProps),r.return=t;r.sibling=null}return t.child}return null}var Gme,UV,Hme,Wme;Gme=function(e,t){for(var r=t.child;r!==null;){if(r.tag===5||r.tag===6)e.appendChild(r.stateNode);else if(r.tag!==4&&r.child!==null){r.child.return=r,r=r.child;continue}if(r===t)break;for(;r.sibling===null;){if(r.return===null||r.return===t)return;r=r.return}r.sibling.return=r.return,r=r.sibling}};UV=function(){};Hme=function(e,t,r,n){var o=e.memoizedProps;if(o!==n){e=t.stateNode,O1(uh.current);var i=null;switch(r){case"input":o=hV(e,o),n=hV(e,n),i=[];break;case"option":o=vV(e,o),n=vV(e,n),i=[];break;case"select":o=la({},o,{value:void 0}),n=la({},n,{value:void 0}),i=[];break;case"textarea":o=yV(e,o),n=yV(e,n),i=[];break;default:typeof o.onClick!="function"&&typeof n.onClick=="function"&&(e.onclick=ZD)}xV(r,n);var a;r=null;for(h in o)if(!n.hasOwnProperty(h)&&o.hasOwnProperty(h)&&o[h]!=null)if(h==="style"){var u=o[h];for(a in u)u.hasOwnProperty(a)&&(r||(r={}),r[a]="")}else h!=="dangerouslySetInnerHTML"&&h!=="children"&&h!=="suppressContentEditableWarning"&&h!=="suppressHydrationWarning"&&h!=="autoFocus"&&(KI.hasOwnProperty(h)?i||(i=[]):(i=i||[]).push(h,null));for(h in n){var d=n[h];if(u=o!=null?o[h]:void 0,n.hasOwnProperty(h)&&d!==u&&(d!=null||u!=null))if(h==="style"){if(u){for(a in u)!u.hasOwnProperty(a)||d&&d.hasOwnProperty(a)||(r||(r={}),r[a]="");for(a in d)d.hasOwnProperty(a)&&u[a]!==d[a]&&(r||(r={}),r[a]=d[a])}else r||(i||(i=[]),i.push(h,r)),r=d;}else h==="dangerouslySetInnerHTML"?(d=d?d.__html:void 0,u=u?u.__html:void 0,d!=null&&u!==d&&(i=i||[]).push(h,d)):h==="children"?typeof d!="string"&&typeof d!="number"||(i=i||[]).push(h,""+d):h!=="suppressContentEditableWarning"&&h!=="suppressHydrationWarning"&&(KI.hasOwnProperty(h)?(d!=null&&h==="onScroll"&&Qi("scroll",e),i||u===d||(i=[])):typeof d=="object"&&d!==null&&d.$$typeof===sG?d.toString():(i=i||[]).push(h,d))}r&&(i=i||[]).push("style",r);var h=i;(t.updateQueue=h)&&(t.flags|=4)}};Wme=function(e,t,r,n){r!==n&&(t.flags|=4)};function OI(e,t){if(!ch)switch(e.tailMode){case"hidden":t=e.tail;for(var r=null;t!==null;)t.alternate!==null&&(r=t),t=t.sibling;r===null?e.tail=null:r.sibling=null;break;case"collapsed":r=e.tail;for(var n=null;r!==null;)r.alternate!==null&&(n=r),r=r.sibling;n===null?t||e.tail===null?e.tail=null:e.tail.sibling=null:n.sibling=null}}function gvt(e,t,r){var n=t.pendingProps;switch(t.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return null;case 1:return uc(t.type)&&KD(),null;case 3:return dw(),Ji(lc),Ji(Ql),AG(),n=t.stateNode,n.pendingContext&&(n.context=n.pendingContext,n.pendingContext=null),(e===null||e.child===null)&&(AD(t)?t.flags|=4:n.hydrate||(t.flags|=256)),UV(t),null;case 5:CG(t);var o=O1(lM.current);if(r=t.type,e!==null&&t.stateNode!=null)Hme(e,t,r,n,o),e.ref!==t.ref&&(t.flags|=128);else{if(!n){if(t.stateNode===null)throw Error(nr(166));return null}if(e=O1(uh.current),AD(t)){n=t.stateNode,r=t.type;var i=t.memoizedProps;switch(n[Av]=t,n[YD]=i,r){case"dialog":Qi("cancel",n),Qi("close",n);break;case"iframe":case"object":case"embed":Qi("load",n);break;case"video":case"audio":for(e=0;e<kI.length;e++)Qi(kI[e],n);break;case"source":Qi("error",n);break;case"img":case"image":case"link":Qi("error",n),Qi("load",n);break;case"details":Qi("toggle",n);break;case"input":Tde(n,i),Qi("invalid",n);break;case"select":n._wrapperState={wasMultiple:!!i.multiple},Qi("invalid",n);break;case"textarea":Mde(n,i),Qi("invalid",n)}xV(r,i),e=null;for(var a in i)i.hasOwnProperty(a)&&(o=i[a],a==="children"?typeof o=="string"?n.textContent!==o&&(e=["children",o]):typeof o=="number"&&n.textContent!==""+o&&(e=["children",""+o]):KI.hasOwnProperty(a)&&o!=null&&a==="onScroll"&&Qi("scroll",n));switch(r){case"input":bD(n),Ide(n,i,!0);break;case"textarea":bD(n),Cde(n);break;case"select":case"option":break;default:typeof i.onClick=="function"&&(n.onclick=ZD)}n=e,t.updateQueue=n,n!==null&&(t.flags|=4)}else{switch(a=o.nodeType===9?o:o.ownerDocument,e===_V.html&&(e=zhe(r)),e===_V.html?r==="script"?(e=a.createElement("div"),e.innerHTML="<script></script>",e=e.removeChild(e.firstChild)):typeof n.is=="string"?e=a.createElement(r,{is:n.is}):(e=a.createElement(r),r==="select"&&(a=e,n.multiple?a.multiple=!0:n.size&&(a.size=n.size))):e=a.createElementNS(e,r),e[Av]=t,e[YD]=n,Gme(e,t,!1,!1),t.stateNode=e,a=wV(r,n),r){case"dialog":Qi("cancel",e),Qi("close",e),o=n;break;case"iframe":case"object":case"embed":Qi("load",e),o=n;break;case"video":case"audio":for(o=0;o<kI.length;o++)Qi(kI[o],e);o=n;break;case"source":Qi("error",e),o=n;break;case"img":case"image":case"link":Qi("error",e),Qi("load",e),o=n;break;case"details":Qi("toggle",e),o=n;break;case"input":Tde(e,n),o=hV(e,n),Qi("invalid",e);break;case"option":o=vV(e,n);break;case"select":e._wrapperState={wasMultiple:!!n.multiple},o=la({},n,{value:void 0}),Qi("invalid",e);break;case"textarea":Mde(e,n),o=yV(e,n),Qi("invalid",e);break;default:o=n}xV(r,o);var u=o;for(i in u)if(u.hasOwnProperty(i)){var d=u[i];i==="style"?Bhe(e,d):i==="dangerouslySetInnerHTML"?(d=d?d.__html:void 0,d!=null&&Fhe(e,d)):i==="children"?typeof d=="string"?(r!=="textarea"||d!=="")&&XI(e,d):typeof d=="number"&&XI(e,""+d):i!=="suppressContentEditableWarning"&&i!=="suppressHydrationWarning"&&i!=="autoFocus"&&(KI.hasOwnProperty(i)?d!=null&&i==="onScroll"&&Qi("scroll",e):d!=null&&tG(e,i,d,a))}switch(r){case"input":bD(e),Ide(e,n,!1);break;case"textarea":bD(e),Cde(e);break;case"option":n.value!=null&&e.setAttribute("value",""+zv(n.value));break;case"select":e.multiple=!!n.multiple,i=n.value,i!=null?tw(e,!!n.multiple,i,!1):n.defaultValue!=null&&tw(e,!!n.multiple,n.defaultValue,!0);break;default:typeof o.onClick=="function"&&(e.onclick=ZD)}_me(r,n)&&(t.flags|=4)}t.ref!==null&&(t.flags|=128)}return null;case 6:if(e&&t.stateNode!=null)Wme(e,t,e.memoizedProps,n);else{if(typeof n!="string"&&t.stateNode===null)throw Error(nr(166));r=O1(lM.current),O1(uh.current),AD(t)?(n=t.stateNode,r=t.memoizedProps,n[Av]=t,n.nodeValue!==r&&(t.flags|=4)):(n=(r.nodeType===9?r:r.ownerDocument).createTextNode(n),n[Av]=t,t.stateNode=n)}return null;case 13:return Ji(Ma),n=t.memoizedState,(t.flags&64)!==0?(t.lanes=r,t):(n=n!==null,r=!1,e===null?t.memoizedProps.fallback!==void 0&&AD(t):r=e.memoizedState!==null,n&&!r&&(t.mode&2)!==0&&(e===null&&t.memoizedProps.unstable_avoidThisFallback!==!0||(Ma.current&1)!==0?hl===0&&(hl=3):((hl===0||hl===3)&&(hl=4),Cu===null||(dM&134217727)===0&&(vw&134217727)===0||sw(Cu,Xl))),(n||r)&&(t.flags|=4),null);case 4:return dw(),UV(t),e===null&&gme(t.stateNode.containerInfo),null;case 10:return IG(t),null;case 17:return uc(t.type)&&KD(),null;case 19:if(Ji(Ma),n=t.memoizedState,n===null)return null;if(i=(t.flags&64)!==0,a=n.rendering,a===null){if(i)OI(n,!1);else{if(hl!==0||e!==null&&(e.flags&64)!==0)for(e=t.child;e!==null;){if(a=r5(e),a!==null){for(t.flags|=64,OI(n,!1),i=a.updateQueue,i!==null&&(t.updateQueue=i,t.flags|=4),n.lastEffect===null&&(t.firstEffect=null),t.lastEffect=n.lastEffect,n=r,r=t.child;r!==null;)i=r,e=n,i.flags&=2,i.nextEffect=null,i.firstEffect=null,i.lastEffect=null,a=i.alternate,a===null?(i.childLanes=0,i.lanes=e,i.child=null,i.memoizedProps=null,i.memoizedState=null,i.updateQueue=null,i.dependencies=null,i.stateNode=null):(i.childLanes=a.childLanes,i.lanes=a.lanes,i.child=a.child,i.memoizedProps=a.memoizedProps,i.memoizedState=a.memoizedState,i.updateQueue=a.updateQueue,i.type=a.type,e=a.dependencies,i.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext}),r=r.sibling;return Ca(Ma,Ma.current&1|2),t.child}e=e.sibling}n.tail!==null&&Kl()>$V&&(t.flags|=64,i=!0,OI(n,!1),t.lanes=33554432)}}else{if(!i)if(e=r5(a),e!==null){if(t.flags|=64,i=!0,r=e.updateQueue,r!==null&&(t.updateQueue=r,t.flags|=4),OI(n,!0),n.tail===null&&n.tailMode==="hidden"&&!a.alternate&&!ch)return t=t.lastEffect=n.lastEffect,t!==null&&(t.nextEffect=null),null}else 2*Kl()-n.renderingStartTime>$V&&r!==1073741824&&(t.flags|=64,i=!0,OI(n,!1),t.lanes=33554432);n.isBackwards?(a.sibling=t.child,t.child=a):(r=n.last,r!==null?r.sibling=a:t.child=a,n.last=a)}return n.tail!==null?(r=n.tail,n.rendering=r,n.tail=r.sibling,n.lastEffect=t.lastEffect,n.renderingStartTime=Kl(),r.sibling=null,t=Ma.current,Ca(Ma,i?t&1|2:t&1),r):null;case 23:case 24:return zG(),e!==null&&e.memoizedState!==null!=(t.memoizedState!==null)&&n.mode!=="unstable-defer-without-hiding"&&(t.flags|=4),null}throw Error(nr(156,t.tag))}function vvt(e){switch(e.tag){case 1:uc(e.type)&&KD();var t=e.flags;return t&4096?(e.flags=t&-4097|64,e):null;case 3:if(dw(),Ji(lc),Ji(Ql),AG(),t=e.flags,(t&64)!==0)throw Error(nr(285));return e.flags=t&-4097|64,e;case 5:return CG(e),null;case 13:return Ji(Ma),t=e.flags,t&4096?(e.flags=t&-4097|64,e):null;case 19:return Ji(Ma),null;case 4:return dw(),null;case 10:return IG(e),null;case 23:case 24:return zG(),null;default:return null}}function kG(e,t){try{var r="",n=t;do r+=Xmt(n),n=n.return;while(n);var o=r}catch(i){o=`
Error generating stack: `+i.message+`
`+i.stack}return{value:e,source:t,stack:o}}function BV(e,t){try{console.error(t.value)}catch(r){setTimeout(function(){throw r})}}var yvt=typeof WeakMap=="function"?WeakMap:Map;function $me(e,t,r){r=Lv(-1,r),r.tag=3,r.payload={element:null};var n=t.value;return r.callback=function(){u5||(u5=!0,ZV=n),BV(e,t)},r}function Zme(e,t,r){r=Lv(-1,r),r.tag=3;var n=e.type.getDerivedStateFromError;if(typeof n=="function"){var o=t.value;r.payload=function(){return BV(e,t),n(o)}}var i=e.stateNode;return i!==null&&typeof i.componentDidCatch=="function"&&(r.callback=function(){typeof n!="function"&&(lh===null?lh=new Set([this]):lh.add(this),BV(e,t));var a=t.stack;this.componentDidCatch(t.value,{componentStack:a!==null?a:""})}),r}var _vt=typeof WeakSet=="function"?WeakSet:Set;function She(e){var t=e.ref;if(t!==null)if(typeof t=="function")try{t(null)}catch(r){qv(e,r)}else t.current=null}function bvt(e,t){switch(t.tag){case 0:case 11:case 15:case 22:return;case 1:if(t.flags&256&&e!==null){var r=e.memoizedProps,n=e.memoizedState;e=t.stateNode,t=e.getSnapshotBeforeUpdate(t.elementType===t.type?r:$f(t.type,r),n),e.__reactInternalSnapshotBeforeUpdate=t}return;case 3:t.flags&256&&wG(t.stateNode.containerInfo);return;case 5:case 6:case 4:case 17:return}throw Error(nr(163))}function xvt(e,t,r){switch(r.tag){case 0:case 11:case 15:case 22:if(t=r.updateQueue,t=t!==null?t.lastEffect:null,t!==null){e=t=t.next;do{if((e.tag&3)===3){var n=e.create;e.destroy=n()}e=e.next}while(e!==t)}if(t=r.updateQueue,t=t!==null?t.lastEffect:null,t!==null){e=t=t.next;do{var o=e;n=o.next,o=o.tag,(o&4)!==0&&(o&1)!==0&&(nge(r,e),Avt(r,e)),e=n}while(e!==t)}return;case 1:e=r.stateNode,r.flags&4&&(t===null?e.componentDidMount():(n=r.elementType===r.type?t.memoizedProps:$f(r.type,t.memoizedProps),e.componentDidUpdate(n,t.memoizedState,e.__reactInternalSnapshotBeforeUpdate))),t=r.updateQueue,t!==null&&ihe(r,t,e);return;case 3:if(t=r.updateQueue,t!==null){if(e=null,r.child!==null)switch(r.child.tag){case 5:e=r.child.stateNode;break;case 1:e=r.child.stateNode}ihe(r,t,e)}return;case 5:e=r.stateNode,t===null&&r.flags&4&&_me(r.type,r.memoizedProps)&&e.focus();return;case 6:return;case 4:return;case 12:return;case 13:r.memoizedState===null&&(r=r.alternate,r!==null&&(r=r.memoizedState,r!==null&&(r=r.dehydrated,r!==null&&Qhe(r))));return;case 19:case 17:case 20:case 21:case 23:case 24:return}throw Error(nr(163))}function The(e,t){for(var r=e;;){if(r.tag===5){var n=r.stateNode;if(t)n=n.style,typeof n.setProperty=="function"?n.setProperty("display","none","important"):n.display="none";else{n=r.stateNode;var o=r.memoizedProps.style;o=o!=null&&o.hasOwnProperty("display")?o.display:null,n.style.display=Uhe("display",o)}}else if(r.tag===6)r.stateNode.nodeValue=t?"":r.memoizedProps;else if((r.tag!==23&&r.tag!==24||r.memoizedState===null||r===e)&&r.child!==null){r.child.return=r,r=r.child;continue}if(r===e)break;for(;r.sibling===null;){if(r.return===null||r.return===e)return;r=r.return}r.sibling.return=r.return,r=r.sibling}}function Ihe(e,t){if(N1&&typeof N1.onCommitFiberUnmount=="function")try{N1.onCommitFiberUnmount(EG,t)}catch(i){}switch(t.tag){case 0:case 11:case 14:case 15:case 22:if(e=t.updateQueue,e!==null&&(e=e.lastEffect,e!==null)){var r=e=e.next;do{var n=r,o=n.destroy;if(n=n.tag,o!==void 0)if((n&4)!==0)nge(t,r);else{n=t;try{o()}catch(i){qv(n,i)}}r=r.next}while(r!==e)}break;case 1:if(She(t),e=t.stateNode,typeof e.componentWillUnmount=="function")try{e.props=t.memoizedProps,e.state=t.memoizedState,e.componentWillUnmount()}catch(i){qv(t,i)}break;case 5:She(t);break;case 4:Yme(e,t)}}function Mhe(e){e.alternate=null,e.child=null,e.dependencies=null,e.firstEffect=null,e.lastEffect=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.return=null,e.updateQueue=null}function Che(e){return e.tag===5||e.tag===3||e.tag===4}function Ahe(e){e:{for(var t=e.return;t!==null;){if(Che(t))break e;t=t.return}throw Error(nr(160))}var r=t;switch(t=r.stateNode,r.tag){case 5:var n=!1;break;case 3:t=t.containerInfo,n=!0;break;case 4:t=t.containerInfo,n=!0;break;default:throw Error(nr(161))}r.flags&16&&(XI(t,""),r.flags&=-17);e:t:for(r=e;;){for(;r.sibling===null;){if(r.return===null||Che(r.return)){r=null;break e}r=r.return}for(r.sibling.return=r.return,r=r.sibling;r.tag!==5&&r.tag!==6&&r.tag!==18;){if(r.flags&2||r.child===null||r.tag===4)continue t;r.child.return=r,r=r.child}if(!(r.flags&2)){r=r.stateNode;break e}}n?VV(e,r,t):GV(e,r,t)}function VV(e,t,r){var n=e.tag,o=n===5||n===6;if(o)e=o?e.stateNode:e.stateNode.instance,t?r.nodeType===8?r.parentNode.insertBefore(e,t):r.insertBefore(e,t):(r.nodeType===8?(t=r.parentNode,t.insertBefore(e,r)):(t=r,t.appendChild(e)),r=r._reactRootContainer,r!=null||t.onclick!==null||(t.onclick=ZD));else if(n!==4&&(e=e.child,e!==null))for(VV(e,t,r),e=e.sibling;e!==null;)VV(e,t,r),e=e.sibling}function GV(e,t,r){var n=e.tag,o=n===5||n===6;if(o)e=o?e.stateNode:e.stateNode.instance,t?r.insertBefore(e,t):r.appendChild(e);else if(n!==4&&(e=e.child,e!==null))for(GV(e,t,r),e=e.sibling;e!==null;)GV(e,t,r),e=e.sibling}function Yme(e,t){for(var r=t,n=!1,o,i;;){if(!n){n=r.return;e:for(;;){if(n===null)throw Error(nr(160));switch(o=n.stateNode,n.tag){case 5:i=!1;break e;case 3:o=o.containerInfo,i=!0;break e;case 4:o=o.containerInfo,i=!0;break e}n=n.return}n=!0}if(r.tag===5||r.tag===6){e:for(var a=e,u=r,d=u;;)if(Ihe(a,d),d.child!==null&&d.tag!==4)d.child.return=d,d=d.child;else{if(d===u)break e;for(;d.sibling===null;){if(d.return===null||d.return===u)break e;d=d.return}d.sibling.return=d.return,d=d.sibling}i?(a=o,u=r.stateNode,a.nodeType===8?a.parentNode.removeChild(u):a.removeChild(u)):o.removeChild(r.stateNode)}else if(r.tag===4){if(r.child!==null){o=r.stateNode.containerInfo,i=!0,r.child.return=r,r=r.child;continue}}else if(Ihe(e,r),r.child!==null){r.child.return=r,r=r.child;continue}if(r===t)break;for(;r.sibling===null;){if(r.return===null||r.return===t)return;r=r.return,r.tag===4&&(n=!1)}r.sibling.return=r.return,r=r.sibling}}function uV(e,t){switch(t.tag){case 0:case 11:case 14:case 15:case 22:var r=t.updateQueue;if(r=r!==null?r.lastEffect:null,r!==null){var n=r=r.next;do(n.tag&3)===3&&(e=n.destroy,n.destroy=void 0,e!==void 0&&e()),n=n.next;while(n!==r)}return;case 1:return;case 5:if(r=t.stateNode,r!=null){n=t.memoizedProps;var o=e!==null?e.memoizedProps:n;e=t.type;var i=t.updateQueue;if(t.updateQueue=null,i!==null){for(r[YD]=n,e==="input"&&n.type==="radio"&&n.name!=null&&jhe(r,n),wV(e,o),t=wV(e,n),o=0;o<i.length;o+=2){var a=i[o],u=i[o+1];a==="style"?Bhe(r,u):a==="dangerouslySetInnerHTML"?Fhe(r,u):a==="children"?XI(r,u):tG(r,a,u,t)}switch(e){case"input":mV(r,n);break;case"textarea":qhe(r,n);break;case"select":e=r._wrapperState.wasMultiple,r._wrapperState.wasMultiple=!!n.multiple,i=n.value,i!=null?tw(r,!!n.multiple,i,!1):e!==!!n.multiple&&(n.defaultValue!=null?tw(r,!!n.multiple,n.defaultValue,!0):tw(r,!!n.multiple,n.multiple?[]:"",!1))}}}return;case 6:if(t.stateNode===null)throw Error(nr(162));t.stateNode.nodeValue=t.memoizedProps;return;case 3:r=t.stateNode,r.hydrate&&(r.hydrate=!1,Qhe(r.containerInfo));return;case 12:return;case 13:t.memoizedState!==null&&(qG=Kl(),The(t.child,!0)),Ohe(t);return;case 19:Ohe(t);return;case 17:return;case 23:case 24:The(t,t.memoizedState!==null);return}throw Error(nr(163))}function Ohe(e){var t=e.updateQueue;if(t!==null){e.updateQueue=null;var r=e.stateNode;r===null&&(r=e.stateNode=new _vt),t.forEach(function(n){var o=Nvt.bind(null,e,n);r.has(n)||(r.add(n),n.then(o,o))})}}function wvt(e,t){return e!==null&&(e=e.memoizedState,e===null||e.dehydrated!==null)?(t=t.memoizedState,t!==null&&t.dehydrated===null):!1}var Evt=Math.ceil,l5=j1.ReactCurrentDispatcher,RG=j1.ReactCurrentOwner,Pn=0,Cu=null,Ms=null,Xl=0,k1=0,HV=Gv(0),hl=0,w5=null,gw=0,dM=0,vw=0,jG=0,WV=null,qG=0,$V=1/0;function yw(){$V=Kl()+500}var Ar=null,u5=!1,ZV=null,lh=null,Bv=!1,$I=null,RI=90,YV=[],KV=[],Vm=null,ZI=0,XV=null,qD=-1,Fm=0,zD=0,YI=null,FD=!1;function Qc(){return(Pn&48)!==0?Kl():qD!==-1?qD:qD=Kl()}function Rv(e){if(e=e.mode,(e&2)===0)return 1;if((e&4)===0)return fw()===99?1:2;if(Fm===0&&(Fm=gw),cvt.transition!==0){zD!==0&&(zD=WV!==null?WV.pendingLanes:0),e=Fm;var t=4186112&~zD;return t&=-t,t===0&&(e=4186112&~e,t=e&-e,t===0&&(t=8192)),t}return e=fw(),(Pn&4)!==0&&e===98?e=WD(12,Fm):(e=dgt(e),e=WD(e,Fm)),e}function jv(e,t,r){if(50<ZI)throw ZI=0,XV=null,Error(nr(185));if(e=E5(e,t),e===null)return null;m5(e,t,r),e===Cu&&(vw|=t,hl===4&&sw(e,Xl));var n=fw();t===1?(Pn&8)!==0&&(Pn&48)===0?QV(e):(Lp(e,r),Pn===0&&(yw(),ph())):((Pn&4)===0||n!==98&&n!==99||(Vm===null?Vm=new Set([e]):Vm.add(e)),Lp(e,r)),WV=e}function E5(e,t){e.lanes|=t;var r=e.alternate;for(r!==null&&(r.lanes|=t),r=e,e=e.return;e!==null;)e.childLanes|=t,r=e.alternate,r!==null&&(r.childLanes|=t),r=e,e=e.return;return r.tag===3?r.stateNode:null}function Lp(e,t){for(var r=e.callbackNode,n=e.suspendedLanes,o=e.pingedLanes,i=e.expirationTimes,a=e.pendingLanes;0<a;){var u=31-Fv(a),d=1<<u,h=i[u];if(h===-1){if((d&n)===0||(d&o)!==0){h=t,Wx(d);var v=Ui;i[u]=10<=v?h+250:6<=v?h+5e3:-1}}else h<=t&&(e.expiredLanes|=d);a&=~d}if(n=tM(e,e===Cu?Xl:0),t=Ui,n===0)r!==null&&(r!==oV&&DV(r),e.callbackNode=null,e.callbackPriority=0);else{if(r!==null){if(e.callbackPriority===t)return;r!==oV&&DV(r)}t===15?(r=QV.bind(null,e),zm===null?(zm=[r],jD=SG(b5,Mme)):zm.push(r),r=oV):t===14?r=iM(99,QV.bind(null,e)):(r=hgt(t),r=iM(r,Kme.bind(null,e))),e.callbackPriority=t,e.callbackNode=r}}function Kme(e){if(qD=-1,zD=Fm=0,(Pn&48)!==0)throw Error(nr(327));var t=e.callbackNode;if(Hv()&&e.callbackNode!==t)return null;var r=tM(e,e===Cu?Xl:0);if(r===0)return null;var n=r,o=Pn;Pn|=16;var i=ege();(Cu!==e||Xl!==n)&&(yw(),lw(e,n));do try{Ivt();break}catch(u){Jme(e,u)}while(!0);if(TG(),l5.current=i,Pn=o,Ms!==null?n=0:(Cu=null,Xl=0,n=hl),(gw&vw)!==0)lw(e,0);else if(n!==0){if(n===2&&(Pn|=64,e.hydrate&&(e.hydrate=!1,wG(e.containerInfo)),r=ime(e),r!==0&&(n=jI(e,r))),n===1)throw t=w5,lw(e,0),sw(e,r),Lp(e,Kl()),t;switch(e.finishedWork=e.current.alternate,e.finishedLanes=r,n){case 0:case 1:throw Error(nr(345));case 2:I1(e);break;case 3:if(sw(e,r),(r&62914560)===r&&(n=qG+500-Kl(),10<n)){if(tM(e,0)!==0)break;if(o=e.suspendedLanes,(o&r)!==r){Qc(),e.pingedLanes|=e.suspendedLanes&o;break}e.timeoutHandle=Xde(I1.bind(null,e),n);break}I1(e);break;case 4:if(sw(e,r),(r&4186112)===r)break;for(n=e.eventTimes,o=-1;0<r;){var a=31-Fv(r);i=1<<a,a=n[a],a>o&&(o=a),r&=~i}if(r=o,r=Kl()-r,r=(120>r?120:480>r?480:1080>r?1080:1920>r?1920:3e3>r?3e3:4320>r?4320:1960*Evt(r/1960))-r,10<r){e.timeoutHandle=Xde(I1.bind(null,e),r);break}I1(e);break;case 5:I1(e);break;default:throw Error(nr(329))}}return Lp(e,Kl()),e.callbackNode===t?Kme.bind(null,e):null}function sw(e,t){for(t&=~jG,t&=~vw,e.suspendedLanes|=t,e.pingedLanes&=~t,e=e.expirationTimes;0<t;){var r=31-Fv(t),n=1<<r;e[r]=-1,t&=~n}}function QV(e){if((Pn&48)!==0)throw Error(nr(327));if(Hv(),e===Cu&&(e.expiredLanes&Xl)!==0){var t=Xl,r=jI(e,t);(gw&vw)!==0&&(t=tM(e,t),r=jI(e,t))}else t=tM(e,0),r=jI(e,t);if(e.tag!==0&&r===2&&(Pn|=64,e.hydrate&&(e.hydrate=!1,wG(e.containerInfo)),t=ime(e),t!==0&&(r=jI(e,t))),r===1)throw r=w5,lw(e,0),sw(e,t),Lp(e,Kl()),r;return e.finishedWork=e.current.alternate,e.finishedLanes=t,I1(e),Lp(e,Kl()),null}function Svt(){if(Vm!==null){var e=Vm;Vm=null,e.forEach(function(t){t.expiredLanes|=24&t.pendingLanes,Lp(t,Kl())})}ph()}function Xme(e,t){var r=Pn;Pn|=1;try{return e(t)}finally{Pn=r,Pn===0&&(yw(),ph())}}function Qme(e,t){var r=Pn;Pn&=-2,Pn|=8;try{return e(t)}finally{Pn=r,Pn===0&&(yw(),ph())}}function PD(e,t){Ca(HV,k1),k1|=t,gw|=t}function zG(){k1=HV.current,Ji(HV)}function lw(e,t){e.finishedWork=null,e.finishedLanes=0;var r=e.timeoutHandle;if(r!==-1&&(e.timeoutHandle=-1,ovt(r)),Ms!==null)for(r=Ms.return;r!==null;){var n=r;switch(n.tag){case 1:n=n.type.childContextTypes,n!=null&&KD();break;case 3:dw(),Ji(lc),Ji(Ql),AG();break;case 5:CG(n);break;case 4:dw();break;case 13:Ji(Ma);break;case 19:Ji(Ma);break;case 10:IG(n);break;case 23:case 24:zG()}r=r.return}Cu=e,Ms=Vv(e.current,null),Xl=k1=gw=t,hl=0,w5=null,jG=vw=dM=0}function Jme(e,t){do{var r=Ms;try{if(TG(),HI.current=s5,n5){for(var n=Ha.memoizedState;n!==null;){var o=n.queue;o!==null&&(o.pending=null),n=n.next}n5=!1}if(uM=0,dl=Yl=Ha=null,WI=!1,RG.current=null,r===null||r.return===null){hl=1,w5=t,Ms=null;break}e:{var i=e,a=r.return,u=r,d=t;if(t=Xl,u.flags|=2048,u.firstEffect=u.lastEffect=null,d!==null&&typeof d=="object"&&typeof d.then=="function"){var h=d;if((u.mode&2)===0){var v=u.alternate;v?(u.updateQueue=v.updateQueue,u.memoizedState=v.memoizedState,u.lanes=v.lanes):(u.updateQueue=null,u.memoizedState=null)}var b=(Ma.current&1)!==0,x=a;do{var M;if(M=x.tag===13){var O=x.memoizedState;if(O!==null)M=O.dehydrated!==null;else{var D=x.memoizedProps;M=D.fallback===void 0?!1:D.unstable_avoidThisFallback!==!0?!0:!b}}if(M){var k=x.updateQueue;if(k===null){var R=new Set;R.add(h),x.updateQueue=R}else k.add(h);if((x.mode&2)===0){if(x.flags|=64,u.flags|=16384,u.flags&=-2981,u.tag===1)if(u.alternate===null)u.tag=17;else{var q=Lv(-1,1);q.tag=2,kv(u,q)}u.lanes|=1;break e}d=void 0,u=t;var B=i.pingCache;if(B===null?(B=i.pingCache=new yvt,d=new Set,B.set(h,d)):(d=B.get(h),d===void 0&&(d=new Set,B.set(h,d))),!d.has(u)){d.add(u);var G=Pvt.bind(null,i,h,u);h.then(G,G)}x.flags|=4096,x.lanes=t;break e}x=x.return}while(x!==null);d=Error((ew(u.type)||"A React component")+` suspended while rendering, but no fallback UI was specified.

Add a <Suspense fallback=...> component higher in the tree to provide a loading indicator or placeholder to display.`)}hl!==5&&(hl=2),d=kG(d,u),x=a;do{switch(x.tag){case 3:i=d,x.flags|=4096,t&=-t,x.lanes|=t;var re=$me(x,i,t);ohe(x,re);break e;case 1:i=d;var Q=x.type,ie=x.stateNode;if((x.flags&64)===0&&(typeof Q.getDerivedStateFromError=="function"||ie!==null&&typeof ie.componentDidCatch=="function"&&(lh===null||!lh.has(ie)))){x.flags|=4096,t&=-t,x.lanes|=t;var me=Zme(x,i,t);ohe(x,me);break e}}x=x.return}while(x!==null)}rge(r)}catch(ve){t=ve,Ms===r&&r!==null&&(Ms=r=r.return);continue}break}while(!0)}function ege(){var e=l5.current;return l5.current=s5,e===null?s5:e}function jI(e,t){var r=Pn;Pn|=16;var n=ege();Cu===e&&Xl===t||lw(e,t);do try{Tvt();break}catch(o){Jme(e,o)}while(!0);if(TG(),Pn=r,l5.current=n,Ms!==null)throw Error(nr(261));return Cu=null,Xl=0,hl}function Tvt(){for(;Ms!==null;)tge(Ms)}function Ivt(){for(;Ms!==null&&!svt();)tge(Ms)}function tge(e){var t=oge(e.alternate,e,k1);e.memoizedProps=e.pendingProps,t===null?rge(e):Ms=t,RG.current=null}function rge(e){var t=e;do{var r=t.alternate;if(e=t.return,(t.flags&2048)===0){if(r=gvt(r,t,k1),r!==null){Ms=r;return}if(r=t,r.tag!==24&&r.tag!==23||r.memoizedState===null||(k1&1073741824)!==0||(r.mode&4)===0){for(var n=0,o=r.child;o!==null;)n|=o.lanes|o.childLanes,o=o.sibling;r.childLanes=n}e!==null&&(e.flags&2048)===0&&(e.firstEffect===null&&(e.firstEffect=t.firstEffect),t.lastEffect!==null&&(e.lastEffect!==null&&(e.lastEffect.nextEffect=t.firstEffect),e.lastEffect=t.lastEffect),1<t.flags&&(e.lastEffect!==null?e.lastEffect.nextEffect=t:e.firstEffect=t,e.lastEffect=t))}else{if(r=vvt(t),r!==null){r.flags&=2047,Ms=r;return}e!==null&&(e.firstEffect=e.lastEffect=null,e.flags|=2048)}if(t=t.sibling,t!==null){Ms=t;return}Ms=t=e}while(t!==null);hl===0&&(hl=5)}function I1(e){var t=fw();return L1(99,Mvt.bind(null,e,t)),null}function Mvt(e,t){do Hv();while($I!==null);if((Pn&48)!==0)throw Error(nr(327));var r=e.finishedWork;if(r===null)return null;if(e.finishedWork=null,e.finishedLanes=0,r===e.current)throw Error(nr(177));e.callbackNode=null;var n=r.lanes|r.childLanes,o=n,i=e.pendingLanes&~o;e.pendingLanes=o,e.suspendedLanes=0,e.pingedLanes=0,e.expiredLanes&=o,e.mutableReadLanes&=o,e.entangledLanes&=o,o=e.entanglements;for(var a=e.eventTimes,u=e.expirationTimes;0<i;){var d=31-Fv(i),h=1<<d;o[d]=0,a[d]=-1,u[d]=-1,i&=~h}if(Vm!==null&&(n&24)===0&&Vm.has(e)&&Vm.delete(e),e===Cu&&(Ms=Cu=null,Xl=0),1<r.flags?r.lastEffect!==null?(r.lastEffect.nextEffect=r,n=r.firstEffect):n=r:n=r.firstEffect,n!==null){if(o=Pn,Pn|=32,RG.current=null,tV=DD,a=Hde(),CV(a)){if("selectionStart"in a)u={start:a.selectionStart,end:a.selectionEnd};else e:if(u=(u=a.ownerDocument)&&u.defaultView||window,(h=u.getSelection&&u.getSelection())&&h.rangeCount!==0){u=h.anchorNode,i=h.anchorOffset,d=h.focusNode,h=h.focusOffset;try{u.nodeType,d.nodeType}catch(ve){u=null;break e}var v=0,b=-1,x=-1,M=0,O=0,D=a,k=null;t:for(;;){for(var R;D!==u||i!==0&&D.nodeType!==3||(b=v+i),D!==d||h!==0&&D.nodeType!==3||(x=v+h),D.nodeType===3&&(v+=D.nodeValue.length),(R=D.firstChild)!==null;)k=D,D=R;for(;;){if(D===a)break t;if(k===u&&++M===i&&(b=v),k===d&&++O===h&&(x=v),(R=D.nextSibling)!==null)break;D=k,k=D.parentNode}D=R}u=b===-1||x===-1?null:{start:b,end:x}}else u=null;u=u||{start:0,end:0}}else u=null;rV={focusedElem:a,selectionRange:u},DD=!1,YI=null,FD=!1,Ar=n;do try{Cvt()}catch(ve){if(Ar===null)throw Error(nr(330));qv(Ar,ve),Ar=Ar.nextEffect}while(Ar!==null);YI=null,Ar=n;do try{for(a=e;Ar!==null;){var q=Ar.flags;if(q&16&&XI(Ar.stateNode,""),q&128){var B=Ar.alternate;if(B!==null){var G=B.ref;G!==null&&(typeof G=="function"?G(null):G.current=null)}}switch(q&1038){case 2:Ahe(Ar),Ar.flags&=-3;break;case 6:Ahe(Ar),Ar.flags&=-3,uV(Ar.alternate,Ar);break;case 1024:Ar.flags&=-1025;break;case 1028:Ar.flags&=-1025,uV(Ar.alternate,Ar);break;case 4:uV(Ar.alternate,Ar);break;case 8:u=Ar,Yme(a,u);var re=u.alternate;Mhe(u),re!==null&&Mhe(re)}Ar=Ar.nextEffect}}catch(ve){if(Ar===null)throw Error(nr(330));qv(Ar,ve),Ar=Ar.nextEffect}while(Ar!==null);if(G=rV,B=Hde(),q=G.focusedElem,a=G.selectionRange,B!==q&&q&&q.ownerDocument&&dme(q.ownerDocument.documentElement,q)){for(a!==null&&CV(q)&&(B=a.start,G=a.end,G===void 0&&(G=B),"selectionStart"in q?(q.selectionStart=B,q.selectionEnd=Math.min(G,q.value.length)):(G=(B=q.ownerDocument||document)&&B.defaultView||window,G.getSelection&&(G=G.getSelection(),u=q.textContent.length,re=Math.min(a.start,u),a=a.end===void 0?re:Math.min(a.end,u),!G.extend&&re>a&&(u=a,a=re,re=u),u=Gde(q,re),i=Gde(q,a),u&&i&&(G.rangeCount!==1||G.anchorNode!==u.node||G.anchorOffset!==u.offset||G.focusNode!==i.node||G.focusOffset!==i.offset)&&(B=B.createRange(),B.setStart(u.node,u.offset),G.removeAllRanges(),re>a?(G.addRange(B),G.extend(i.node,i.offset)):(B.setEnd(i.node,i.offset),G.addRange(B)))))),B=[],G=q;G=G.parentNode;)G.nodeType===1&&B.push({element:G,left:G.scrollLeft,top:G.scrollTop});for(typeof q.focus=="function"&&q.focus(),q=0;q<B.length;q++)G=B[q],G.element.scrollLeft=G.left,G.element.scrollTop=G.top}DD=!!tV,rV=tV=null,e.current=r,Ar=n;do try{for(q=e;Ar!==null;){var Q=Ar.flags;if(Q&36&&xvt(q,Ar.alternate,Ar),Q&128){B=void 0;var ie=Ar.ref;if(ie!==null){var me=Ar.stateNode;switch(Ar.tag){case 5:B=me;break;default:B=me}typeof ie=="function"?ie(B):ie.current=B}}Ar=Ar.nextEffect}}catch(ve){if(Ar===null)throw Error(nr(330));qv(Ar,ve),Ar=Ar.nextEffect}while(Ar!==null);Ar=null,uvt(),Pn=o}else e.current=r;if(Bv)Bv=!1,$I=e,RI=t;else for(Ar=n;Ar!==null;)t=Ar.nextEffect,Ar.nextEffect=null,Ar.flags&8&&(Q=Ar,Q.sibling=null,Q.stateNode=null),Ar=t;if(n=e.pendingLanes,n===0&&(lh=null),n===1?e===XV?ZI++:(ZI=0,XV=e):ZI=0,r=r.stateNode,N1&&typeof N1.onCommitFiberRoot=="function")try{N1.onCommitFiberRoot(EG,r,void 0,(r.current.flags&64)===64)}catch(ve){}if(Lp(e,Kl()),u5)throw u5=!1,e=ZV,ZV=null,e;return(Pn&8)!==0||ph(),null}function Cvt(){for(;Ar!==null;){var e=Ar.alternate;FD||YI===null||((Ar.flags&8)!==0?Pde(Ar,YI)&&(FD=!0):Ar.tag===13&&wvt(e,Ar)&&Pde(Ar,YI)&&(FD=!0));var t=Ar.flags;(t&256)!==0&&bvt(e,Ar),(t&512)===0||Bv||(Bv=!0,iM(97,function(){return Hv(),null})),Ar=Ar.nextEffect}}function Hv(){if(RI!==90){var e=97<RI?97:RI;return RI=90,L1(e,Ovt)}return!1}function Avt(e,t){YV.push(t,e),Bv||(Bv=!0,iM(97,function(){return Hv(),null}))}function nge(e,t){KV.push(t,e),Bv||(Bv=!0,iM(97,function(){return Hv(),null}))}function Ovt(){if($I===null)return!1;var e=$I;if($I=null,(Pn&48)!==0)throw Error(nr(331));var t=Pn;Pn|=32;var r=KV;KV=[];for(var n=0;n<r.length;n+=2){var o=r[n],i=r[n+1],a=o.destroy;if(o.destroy=void 0,typeof a=="function")try{a()}catch(d){if(i===null)throw Error(nr(330));qv(i,d)}}for(r=YV,YV=[],n=0;n<r.length;n+=2){o=r[n],i=r[n+1];try{var u=o.create;o.destroy=u()}catch(d){if(i===null)throw Error(nr(330));qv(i,d)}}for(u=e.current.firstEffect;u!==null;)e=u.nextEffect,u.nextEffect=null,u.flags&8&&(u.sibling=null,u.stateNode=null),u=e;return Pn=t,ph(),!0}function Phe(e,t,r){t=kG(r,t),t=$me(e,t,1),kv(e,t),t=Qc(),e=E5(e,1),e!==null&&(m5(e,1,t),Lp(e,t))}function qv(e,t){if(e.tag===3)Phe(e,e,t);else for(var r=e.return;r!==null;){if(r.tag===3){Phe(r,e,t);break}else if(r.tag===1){var n=r.stateNode;if(typeof r.type.getDerivedStateFromError=="function"||typeof n.componentDidCatch=="function"&&(lh===null||!lh.has(n))){e=kG(t,e);var o=Zme(r,e,1);if(kv(r,o),o=Qc(),r=E5(r,1),r!==null)m5(r,1,o),Lp(r,o);else if(typeof n.componentDidCatch=="function"&&(lh===null||!lh.has(n)))try{n.componentDidCatch(t,e)}catch(i){}break}}r=r.return}}function Pvt(e,t,r){var n=e.pingCache;n!==null&&n.delete(t),t=Qc(),e.pingedLanes|=e.suspendedLanes&r,Cu===e&&(Xl&r)===r&&(hl===4||hl===3&&(Xl&62914560)===Xl&&500>Kl()-qG?lw(e,0):jG|=r),Lp(e,t)}function Nvt(e,t){var r=e.stateNode;r!==null&&r.delete(t),t=0,t===0&&(t=e.mode,(t&2)===0?t=1:(t&4)===0?t=fw()===99?1:2:(Fm===0&&(Fm=gw),t=$x(62914560&~Fm),t===0&&(t=4194304))),r=Qc(),e=E5(e,t),e!==null&&(m5(e,t,r),Lp(e,r))}var oge;oge=function(e,t,r){var n=t.lanes;if(e!==null){if(e.memoizedProps!==t.pendingProps||lc.current)Zf=!0;else if((r&n)!==0)Zf=(e.flags&16384)!==0;else{switch(Zf=!1,t.tag){case 3:vhe(t),aV();break;case 5:lhe(t);break;case 1:uc(t.type)&&RD(t);break;case 4:RV(t,t.stateNode.containerInfo);break;case 10:n=t.memoizedProps.value;var o=t.type._context;Ca(XD,o._currentValue),o._currentValue=n;break;case 13:if(t.memoizedState!==null)return(r&t.child.childLanes)!==0?yhe(e,t,r):(Ca(Ma,Ma.current&1),t=Bm(e,t,r),t!==null?t.sibling:null);Ca(Ma,Ma.current&1);break;case 19:if(n=(r&t.childLanes)!==0,(e.flags&64)!==0){if(n)return Ehe(e,t,r);t.flags|=64}if(o=t.memoizedState,o!==null&&(o.rendering=null,o.tail=null,o.lastEffect=null),Ca(Ma,Ma.current),n)break;return null;case 23:case 24:return t.lanes=0,sV(e,t,r)}return Bm(e,t,r)}}else Zf=!1;switch(t.lanes=0,t.tag){case 2:if(n=t.type,e!==null&&(e.alternate=null,t.alternate=null,t.flags|=2),e=t.pendingProps,o=pw(t,Ql.current),iw(t,r),o=PG(null,t,n,e,o,r),t.flags|=1,typeof o=="object"&&o!==null&&typeof o.render=="function"&&o.$$typeof===void 0){if(t.tag=1,t.memoizedState=null,t.updateQueue=null,uc(n)){var i=!0;RD(t)}else i=!1;t.memoizedState=o.state!==null&&o.state!==void 0?o.state:null,MG(t);var a=n.getDerivedStateFromProps;typeof a=="function"&&e5(t,n,a,e),o.updater=x5,t.stateNode=o,o._reactInternals=t,kV(t,n,e,r),t=FV(null,t,n,!0,i,r)}else t.tag=0,sc(null,t,o,r),t=t.child;return t;case 16:o=t.elementType;e:{switch(e!==null&&(e.alternate=null,t.alternate=null,t.flags|=2),e=t.pendingProps,i=o._init,o=i(o._payload),t.type=o,i=t.tag=Lvt(o),e=$f(o,e),i){case 0:t=zV(null,t,o,e,r);break e;case 1:t=ghe(null,t,o,e,r);break e;case 11:t=hhe(null,t,o,e,r);break e;case 14:t=mhe(null,t,o,$f(o.type,e),n,r);break e}throw Error(nr(306,o,""))}return t;case 0:return n=t.type,o=t.pendingProps,o=t.elementType===n?o:$f(n,o),zV(e,t,n,o,r);case 1:return n=t.type,o=t.pendingProps,o=t.elementType===n?o:$f(n,o),ghe(e,t,n,o,r);case 3:if(vhe(t),n=t.updateQueue,e===null||n===null)throw Error(nr(282));if(n=t.pendingProps,o=t.memoizedState,o=o!==null?o.element:null,Ame(e,t),aM(t,n,null,r),n=t.memoizedState.element,n===o)aV(),t=Bm(e,t,r);else{if(o=t.stateNode,(i=o.hydrate)&&(Ov=ow(t.stateNode.containerInfo.firstChild),Um=t,i=ch=!0),i){if(e=o.mutableSourceEagerHydrationData,e!=null)for(o=0;o<e.length;o+=2)i=e[o],i._workInProgressVersionPrimary=e[o+1],aw.push(i);for(r=Dme(t,null,n,r),t.child=r;r;)r.flags=r.flags&-3|1024,r=r.sibling}else sc(e,t,n,r),aV();t=t.child}return t;case 5:return lhe(t),e===null&&jV(t),n=t.type,o=t.pendingProps,i=e!==null?e.memoizedProps:null,a=o.children,PV(n,o)?a=null:i!==null&&PV(n,i)&&(t.flags|=16),Vme(e,t),sc(e,t,a,r),t.child;case 6:return e===null&&jV(t),null;case 13:return yhe(e,t,r);case 4:return RV(t,t.stateNode.containerInfo),n=t.pendingProps,e===null?t.child=t5(t,null,n,r):sc(e,t,n,r),t.child;case 11:return n=t.type,o=t.pendingProps,o=t.elementType===n?o:$f(n,o),hhe(e,t,n,o,r);case 7:return sc(e,t,t.pendingProps,r),t.child;case 8:return sc(e,t,t.pendingProps.children,r),t.child;case 12:return sc(e,t,t.pendingProps.children,r),t.child;case 10:e:{n=t.type._context,o=t.pendingProps,a=t.memoizedProps,i=o.value;var u=t.type._context;if(Ca(XD,u._currentValue),u._currentValue=i,a!==null)if(u=a.value,i=Op(u,i)?0:(typeof n._calculateChangedBits=="function"?n._calculateChangedBits(u,i):1073741823)|0,i===0){if(a.children===o.children&&!lc.current){t=Bm(e,t,r);break e}}else for(u=t.child,u!==null&&(u.return=t);u!==null;){var d=u.dependencies;if(d!==null){a=u.child;for(var h=d.firstContext;h!==null;){if(h.context===n&&(h.observedBits&i)!==0){u.tag===1&&(h=Lv(-1,r&-r),h.tag=2,kv(u,h)),u.lanes|=r,h=u.alternate,h!==null&&(h.lanes|=r),Cme(u.return,r),d.lanes|=r;break}h=h.next}}else a=u.tag===10&&u.type===t.type?null:u.child;if(a!==null)a.return=u;else for(a=u;a!==null;){if(a===t){a=null;break}if(u=a.sibling,u!==null){u.return=a.return,a=u;break}a=a.return}u=a}sc(e,t,o.children,r),t=t.child}return t;case 9:return o=t.type,i=t.pendingProps,n=i.children,iw(t,r),o=Dp(o,i.unstable_observedBits),n=n(o),t.flags|=1,sc(e,t,n,r),t.child;case 14:return o=t.type,i=$f(o,t.pendingProps),i=$f(o.type,i),mhe(e,t,o,i,n,r);case 15:return Bme(e,t,t.type,t.pendingProps,n,r);case 17:return n=t.type,o=t.pendingProps,o=t.elementType===n?o:$f(n,o),e!==null&&(e.alternate=null,t.alternate=null,t.flags|=2),t.tag=1,uc(n)?(e=!0,RD(t)):e=!1,iw(t,r),Pme(t,n,o),kV(t,n,o,r),FV(null,t,n,!0,e,r);case 19:return Ehe(e,t,r);case 23:return sV(e,t,r);case 24:return sV(e,t,r)}throw Error(nr(156,t.tag))};function Dvt(e,t,r,n){this.tag=e,this.key=r,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=t,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=n,this.flags=0,this.lastEffect=this.firstEffect=this.nextEffect=null,this.childLanes=this.lanes=0,this.alternate=null}function Pp(e,t,r,n){return new Dvt(e,t,r,n)}function FG(e){return e=e.prototype,!(!e||!e.isReactComponent)}function Lvt(e){if(typeof e=="function")return FG(e)?1:0;if(e!=null){if(e=e.$$typeof,e===f5)return 11;if(e===d5)return 14}return 2}function Vv(e,t){var r=e.alternate;return r===null?(r=Pp(e.tag,t,e.key,e.mode),r.elementType=e.elementType,r.type=e.type,r.stateNode=e.stateNode,r.alternate=e,e.alternate=r):(r.pendingProps=t,r.type=e.type,r.flags=0,r.nextEffect=null,r.firstEffect=null,r.lastEffect=null),r.childLanes=e.childLanes,r.lanes=e.lanes,r.child=e.child,r.memoizedProps=e.memoizedProps,r.memoizedState=e.memoizedState,r.updateQueue=e.updateQueue,t=e.dependencies,r.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext},r.sibling=e.sibling,r.index=e.index,r.ref=e.ref,r}function UD(e,t,r,n,o,i){var a=2;if(n=e,typeof e=="function")FG(e)&&(a=1);else if(typeof e=="string")a=5;else e:switch(e){case Mv:return uw(r.children,o,i,t);case Lhe:a=8,o|=16;break;case rG:a=8,o|=1;break;case qI:return e=Pp(12,r,t,o|8),e.elementType=qI,e.type=qI,e.lanes=i,e;case zI:return e=Pp(13,r,t,o),e.type=zI,e.elementType=zI,e.lanes=i,e;case BD:return e=Pp(19,r,t,o),e.elementType=BD,e.lanes=i,e;case lG:return UG(r,o,i,t);case dV:return e=Pp(24,r,t,o),e.elementType=dV,e.lanes=i,e;default:if(typeof e=="object"&&e!==null)switch(e.$$typeof){case nG:a=10;break e;case oG:a=9;break e;case f5:a=11;break e;case d5:a=14;break e;case iG:a=16,n=null;break e;case aG:a=22;break e}throw Error(nr(130,e==null?e:typeof e,""))}return t=Pp(a,r,t,o),t.elementType=e,t.type=n,t.lanes=i,t}function uw(e,t,r,n){return e=Pp(7,e,n,t),e.lanes=r,e}function UG(e,t,r,n){return e=Pp(23,e,n,t),e.elementType=lG,e.lanes=r,e}function cV(e,t,r){return e=Pp(6,e,null,t),e.lanes=r,e}function pV(e,t,r){return t=Pp(4,e.children!==null?e.children:[],e.key,t),t.lanes=r,t.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},t}function kvt(e,t,r){this.tag=t,this.containerInfo=e,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.pendingContext=this.context=null,this.hydrate=r,this.callbackNode=null,this.callbackPriority=0,this.eventTimes=YB(0),this.expirationTimes=YB(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=YB(0),this.mutableSourceEagerHydrationData=null}function Rvt(e,t,r){var n=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:M1,key:n==null?null:""+n,children:e,containerInfo:t,implementation:r}}function c5(e,t,r,n){var o=t.current,i=Qc(),a=Rv(o);e:if(r){r=r._reactInternals;t:{if(q1(r)!==r||r.tag!==1)throw Error(nr(170));var u=r;do{switch(u.tag){case 3:u=u.stateNode.context;break t;case 1:if(uc(u.type)){u=u.stateNode.__reactInternalMemoizedMergedChildContext;break t}}u=u.return}while(u!==null);throw Error(nr(171))}if(r.tag===1){var d=r.type;if(uc(d)){r=xme(r,d,u);break e}}r=u}else r=Uv;return t.context===null?t.context=r:t.pendingContext=r,t=Lv(i,a),t.payload={element:e},n=n===void 0?null:n,n!==null&&(t.callback=n),kv(o,t),jv(o,a,i),a}function fV(e){if(e=e.current,!e.child)return null;switch(e.child.tag){case 5:return e.child.stateNode;default:return e.child.stateNode}}function Nhe(e,t){if(e=e.memoizedState,e!==null&&e.dehydrated!==null){var r=e.retryLane;e.retryLane=r!==0&&r<t?r:t}}function BG(e,t){Nhe(e,t),(e=e.alternate)&&Nhe(e,t)}function jvt(){return null}function VG(e,t,r){var n=r!=null&&r.hydrationOptions!=null&&r.hydrationOptions.mutableSources||null;if(r=new kvt(e,t,r!=null&&r.hydrate===!0),t=Pp(3,null,null,t===2?7:t===1?3:0),r.current=t,t.stateNode=r,MG(t),e[mw]=r.current,gme(e.nodeType===8?e.parentNode:e),n)for(e=0;e<n.length;e++){t=n[e];var o=t._getVersion;o=o(t._source),r.mutableSourceEagerHydrationData==null?r.mutableSourceEagerHydrationData=[t,o]:r.mutableSourceEagerHydrationData.push(t,o)}this._internalRoot=r}VG.prototype.render=function(e){c5(e,this._internalRoot,null,null)};VG.prototype.unmount=function(){var e=this._internalRoot,t=e.containerInfo;c5(null,e,null,function(){t[mw]=null})};function hM(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11&&(e.nodeType!==8||e.nodeValue!==" react-mount-point-unstable "))}function qvt(e,t){if(t||(t=e?e.nodeType===9?e.documentElement:e.firstChild:null,t=!(!t||t.nodeType!==1||!t.hasAttribute("data-reactroot"))),!t)for(var r;r=e.lastChild;)e.removeChild(r);return new VG(e,0,t?{hydrate:!0}:void 0)}function S5(e,t,r,n,o){var i=r._reactRootContainer;if(i){var a=i._internalRoot;if(typeof o=="function"){var u=o;o=function(){var h=fV(a);u.call(h)}}c5(t,a,e,o)}else{if(i=r._reactRootContainer=qvt(r,n),a=i._internalRoot,typeof o=="function"){var d=o;o=function(){var h=fV(a);d.call(h)}}Qme(function(){c5(t,a,e,o)})}return fV(a)}Yhe=function(e){if(e.tag===13){var t=Qc();jv(e,4,t),BG(e,4)}};dG=function(e){if(e.tag===13){var t=Qc();jv(e,67108864,t),BG(e,67108864)}};Khe=function(e){if(e.tag===13){var t=Qc(),r=Rv(e);jv(e,r,t),BG(e,r)}};Xhe=function(e,t){return t()};EV=function(e,t,r){switch(t){case"input":if(mV(e,r),t=r.name,r.type==="radio"&&t!=null){for(r=e;r.parentNode;)r=r.parentNode;for(r=r.querySelectorAll("input[name="+JSON.stringify(""+t)+"][type=\"radio\"]"),t=0;t<r.length;t++){var n=r[t];if(n!==e&&n.form===e.form){var o=_5(n);if(!o)throw Error(nr(90));Rhe(n),mV(n,o)}}}break;case"textarea":qhe(e,r);break;case"select":t=r.value,t!=null&&tw(e,!!r.multiple,t,!1)}};cG=Xme;Hhe=function(e,t,r,n,o){var i=Pn;Pn|=4;try{return L1(98,e.bind(null,t,r,n,o))}finally{Pn=i,Pn===0&&(yw(),ph())}};pG=function(){(Pn&49)===0&&(Svt(),Hv())};Whe=function(e,t){var r=Pn;Pn|=2;try{return e(t)}finally{Pn=r,Pn===0&&(yw(),ph())}};function ige(e,t){var r=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!hM(t))throw Error(nr(200));return Rvt(e,t,null,r)}var zvt={Events:[pM,Xx,_5,Vhe,Ghe,Hv,{current:!1}]},PI={findFiberByHostInstance:A1,bundleType:0,version:"17.0.2",rendererPackageName:"react-dom"},Fvt={bundleType:PI.bundleType,version:PI.version,rendererPackageName:PI.rendererPackageName,rendererConfig:PI.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:j1.ReactCurrentDispatcher,findHostInstanceByFiber:function(e){return e=Zhe(e),e===null?null:e.stateNode},findFiberByHostInstance:PI.findFiberByHostInstance||jvt,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__!="undefined"&&(NI=__REACT_DEVTOOLS_GLOBAL_HOOK__,!NI.isDisabled&&NI.supportsFiber))try{EG=NI.inject(Fvt),N1=NI}catch(e){}var NI;kp.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=zvt;kp.createPortal=ige;kp.findDOMNode=function(e){if(e==null)return null;if(e.nodeType===1)return e;var t=e._reactInternals;if(t===void 0)throw typeof e.render=="function"?Error(nr(188)):Error(nr(268,Object.keys(e)));return e=Zhe(t),e=e===null?null:e.stateNode,e};kp.flushSync=function(e,t){var r=Pn;if((r&48)!==0)return e(t);Pn|=1;try{if(e)return L1(99,e.bind(null,t))}finally{Pn=r,ph()}};kp.hydrate=function(e,t,r){if(!hM(t))throw Error(nr(200));return S5(null,e,t,!0,r)};kp.render=function(e,t,r){if(!hM(t))throw Error(nr(200));return S5(null,e,t,!1,r)};kp.unmountComponentAtNode=function(e){if(!hM(e))throw Error(nr(40));return e._reactRootContainer?(Qme(function(){S5(null,null,e,!1,function(){e._reactRootContainer=null,e[mw]=null})}),!0):!1};kp.unstable_batchedUpdates=Xme;kp.unstable_createPortal=function(e,t){return ige(e,t,2<arguments.length&&arguments[2]!==void 0?arguments[2]:null)};kp.unstable_renderSubtreeIntoContainer=function(e,t,r,n){if(!hM(r))throw Error(nr(200));if(e==null||e._reactInternals===void 0)throw Error(nr(38));return S5(e,t,r,!1,n)};kp.version="17.0.2"});var va=A((t8r,lge)=>{"use strict";function sge(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__=="undefined"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(sge)}catch(e){console.error(e)}}sge(),lge.exports=age()});var or=A((GG,uge)=>{"use strict";var mM=function(e){return e&&e.Math===Math&&e};uge.exports=mM(typeof globalThis=="object"&&globalThis)||mM(typeof window=="object"&&window)||mM(typeof self=="object"&&self)||mM(typeof global=="object"&&global)||mM(typeof GG=="object"&&GG)||function(){return this}()||Function("return this")()});var Vt=A((r8r,cge)=>{"use strict";cge.exports=function(e){try{return!!e()}catch(t){return!0}}});var Hr=A((n8r,pge)=>{"use strict";var Uvt=Vt();pge.exports=!Uvt(function(){return Object.defineProperty({},1,{get:function(){return 7}})[1]!==7})});var _w=A((o8r,fge)=>{"use strict";var Bvt=Vt();fge.exports=!Bvt(function(){var e=function(){}.bind();return typeof e!="function"||e.hasOwnProperty("prototype")})});var ir=A((i8r,dge)=>{"use strict";var Vvt=_w(),T5=Function.prototype.call;dge.exports=Vvt?T5.bind(T5):function(){return T5.apply(T5,arguments)}});var gM=A(gge=>{"use strict";var hge={}.propertyIsEnumerable,mge=Object.getOwnPropertyDescriptor,Gvt=mge&&!hge.call({1:2},1);gge.f=Gvt?function(t){var r=mge(this,t);return!!r&&r.enumerable}:hge});var cc=A((s8r,vge)=>{"use strict";vge.exports=function(e,t){return{enumerable:!(e&1),configurable:!(e&2),writable:!(e&4),value:t}}});var At=A((l8r,bge)=>{"use strict";var yge=_w(),_ge=Function.prototype,HG=_ge.call,Hvt=yge&&_ge.bind.bind(HG,HG);bge.exports=yge?Hvt:function(e){return function(){return HG.apply(e,arguments)}}});var gl=A((u8r,wge)=>{"use strict";var xge=At(),Wvt=xge({}.toString),$vt=xge("".slice);wge.exports=function(e){return $vt(Wvt(e),8,-1)}});var Hm=A((c8r,Ege)=>{"use strict";var Zvt=At(),Yvt=Vt(),Kvt=gl(),WG=Object,Xvt=Zvt("".split);Ege.exports=Yvt(function(){return!WG("z").propertyIsEnumerable(0)})?function(e){return Kvt(e)==="String"?Xvt(e,""):WG(e)}:WG});var pc=A((p8r,Sge)=>{"use strict";Sge.exports=function(e){return e==null}});var Ci=A((f8r,Tge)=>{"use strict";var Qvt=pc(),Jvt=TypeError;Tge.exports=function(e){if(Qvt(e))throw new Jvt("Can't call method on "+e);return e}});var us=A((d8r,Ige)=>{"use strict";var eyt=Hm(),tyt=Ci();Ige.exports=function(e){return eyt(tyt(e))}});var Nn=A((h8r,Mge)=>{"use strict";var $G=typeof document=="object"&&document.all;Mge.exports=typeof $G=="undefined"&&$G!==void 0?function(e){return typeof e=="function"||e===$G}:function(e){return typeof e=="function"}});var Qr=A((m8r,Cge)=>{"use strict";var ryt=Nn();Cge.exports=function(e){return typeof e=="object"?e!==null:ryt(e)}});var un=A((g8r,Age)=>{"use strict";var ZG=or(),nyt=Nn(),oyt=function(e){return nyt(e)?e:void 0};Age.exports=function(e,t){return arguments.length<2?oyt(ZG[e]):ZG[e]&&ZG[e][t]}});var vl=A((v8r,Oge)=>{"use strict";var iyt=At();Oge.exports=iyt({}.isPrototypeOf)});var Yf=A((y8r,Dge)=>{"use strict";var ayt=or(),Pge=ayt.navigator,Nge=Pge&&Pge.userAgent;Dge.exports=Nge?String(Nge):""});var Xf=A((_8r,zge)=>{"use strict";var qge=or(),YG=Yf(),Lge=qge.process,kge=qge.Deno,Rge=Lge&&Lge.versions||kge&&kge.version,jge=Rge&&Rge.v8,Kf,I5;jge&&(Kf=jge.split("."),I5=Kf[0]>0&&Kf[0]<4?1:+(Kf[0]+Kf[1]));!I5&&YG&&(Kf=YG.match(/Edge\/(\d+)/),(!Kf||Kf[1]>=74)&&(Kf=YG.match(/Chrome\/(\d+)/),Kf&&(I5=+Kf[1])));zge.exports=I5});var Wv=A((b8r,Uge)=>{"use strict";var Fge=Xf(),syt=Vt(),lyt=or(),uyt=lyt.String;Uge.exports=!!Object.getOwnPropertySymbols&&!syt(function(){var e=Symbol("symbol detection");return!uyt(e)||!(Object(e)instanceof Symbol)||!Symbol.sham&&Fge&&Fge<41})});var KG=A((x8r,Bge)=>{"use strict";var cyt=Wv();Bge.exports=cyt&&!Symbol.sham&&typeof Symbol.iterator=="symbol"});var Wm=A((w8r,Vge)=>{"use strict";var pyt=un(),fyt=Nn(),dyt=vl(),hyt=KG(),myt=Object;Vge.exports=hyt?function(e){return typeof e=="symbol"}:function(e){var t=pyt("Symbol");return fyt(t)&&dyt(t.prototype,myt(e))}});var $v=A((E8r,Gge)=>{"use strict";var gyt=String;Gge.exports=function(e){try{return gyt(e)}catch(t){return"Object"}}});var cn=A((S8r,Hge)=>{"use strict";var vyt=Nn(),yyt=$v(),_yt=TypeError;Hge.exports=function(e){if(vyt(e))return e;throw new _yt(yyt(e)+" is not a function")}});var Aa=A((T8r,Wge)=>{"use strict";var byt=cn(),xyt=pc();Wge.exports=function(e,t){var r=e[t];return xyt(r)?void 0:byt(r)}});var eH=A((I8r,$ge)=>{"use strict";var XG=ir(),QG=Nn(),JG=Qr(),wyt=TypeError;$ge.exports=function(e,t){var r,n;if(t==="string"&&QG(r=e.toString)&&!JG(n=XG(r,e))||QG(r=e.valueOf)&&!JG(n=XG(r,e))||t!=="string"&&QG(r=e.toString)&&!JG(n=XG(r,e)))return n;throw new wyt("Can't convert object to primitive value")}});var To=A((M8r,Zge)=>{"use strict";Zge.exports=!1});var M5=A((C8r,Kge)=>{"use strict";var Yge=or(),Eyt=Object.defineProperty;Kge.exports=function(e,t){try{Eyt(Yge,e,{value:t,configurable:!0,writable:!0})}catch(r){Yge[e]=t}return t}});var vM=A((A8r,Jge)=>{"use strict";var Syt=To(),Tyt=or(),Iyt=M5(),Xge="__core-js_shared__",Qge=Jge.exports=Tyt[Xge]||Iyt(Xge,{});(Qge.versions||(Qge.versions=[])).push({version:"3.42.0",mode:Syt?"pure":"global",copyright:"\xA9 2014-2025 Denis Pushkarev (zloirock.ru)",license:"https://github.com/zloirock/core-js/blob/v3.42.0/LICENSE",source:"https://github.com/zloirock/core-js"})});var $m=A((O8r,tve)=>{"use strict";var eve=vM();tve.exports=function(e,t){return eve[e]||(eve[e]=t||{})}});var Zn=A((P8r,rve)=>{"use strict";var Myt=Ci(),Cyt=Object;rve.exports=function(e){return Cyt(Myt(e))}});var Fn=A((N8r,nve)=>{"use strict";var Ayt=At(),Oyt=Zn(),Pyt=Ayt({}.hasOwnProperty);nve.exports=Object.hasOwn||function(t,r){return Pyt(Oyt(t),r)}});var Zv=A((D8r,ove)=>{"use strict";var Nyt=At(),Dyt=0,Lyt=Math.random(),kyt=Nyt(1 .toString);ove.exports=function(e){return"Symbol("+(e===void 0?"":e)+")_"+kyt(++Dyt+Lyt,36)}});var on=A((L8r,ave)=>{"use strict";var Ryt=or(),jyt=$m(),ive=Fn(),qyt=Zv(),zyt=Wv(),Fyt=KG(),bw=Ryt.Symbol,tH=jyt("wks"),Uyt=Fyt?bw.for||bw:bw&&bw.withoutSetter||qyt;ave.exports=function(e){return ive(tH,e)||(tH[e]=zyt&&ive(bw,e)?bw[e]:Uyt("Symbol."+e)),tH[e]}});var yM=A((k8r,uve)=>{"use strict";var Byt=ir(),sve=Qr(),lve=Wm(),Vyt=Aa(),Gyt=eH(),Hyt=on(),Wyt=TypeError,$yt=Hyt("toPrimitive");uve.exports=function(e,t){if(!sve(e)||lve(e))return e;var r=Vyt(e,$yt),n;if(r){if(t===void 0&&(t="default"),n=Byt(r,e,t),!sve(n)||lve(n))return n;throw new Wyt("Can't convert object to primitive value")}return t===void 0&&(t="number"),Gyt(e,t)}});var fh=A((R8r,cve)=>{"use strict";var Zyt=yM(),Yyt=Wm();cve.exports=function(e){var t=Zyt(e,"string");return Yyt(t)?t:t+""}});var _M=A((j8r,fve)=>{"use strict";var Kyt=or(),pve=Qr(),rH=Kyt.document,Xyt=pve(rH)&&pve(rH.createElement);fve.exports=function(e){return Xyt?rH.createElement(e):{}}});var nH=A((q8r,dve)=>{"use strict";var Qyt=Hr(),Jyt=Vt(),e0t=_M();dve.exports=!Qyt&&!Jyt(function(){return Object.defineProperty(e0t("div"),"a",{get:function(){return 7}}).a!==7})});var Bs=A(mve=>{"use strict";var t0t=Hr(),r0t=ir(),n0t=gM(),o0t=cc(),i0t=us(),a0t=fh(),s0t=Fn(),l0t=nH(),hve=Object.getOwnPropertyDescriptor;mve.f=t0t?hve:function(t,r){if(t=i0t(t),r=a0t(r),l0t)try{return hve(t,r)}catch(n){}if(s0t(t,r))return o0t(!r0t(n0t.f,t,r),t[r])}});var oH=A((F8r,gve)=>{"use strict";var u0t=Hr(),c0t=Vt();gve.exports=u0t&&c0t(function(){return Object.defineProperty(function(){},"prototype",{value:42,writable:!1}).prototype!==42})});var ur=A((U8r,vve)=>{"use strict";var p0t=Qr(),f0t=String,d0t=TypeError;vve.exports=function(e){if(p0t(e))return e;throw new d0t(f0t(e)+" is not an object")}});var _i=A(_ve=>{"use strict";var h0t=Hr(),m0t=nH(),g0t=oH(),C5=ur(),yve=fh(),v0t=TypeError,iH=Object.defineProperty,y0t=Object.getOwnPropertyDescriptor,aH="enumerable",sH="configurable",lH="writable";_ve.f=h0t?g0t?function(t,r,n){if(C5(t),r=yve(r),C5(n),typeof t=="function"&&r==="prototype"&&"value"in n&&lH in n&&!n[lH]){var o=y0t(t,r);o&&o[lH]&&(t[r]=n.value,n={configurable:sH in n?n[sH]:o[sH],enumerable:aH in n?n[aH]:o[aH],writable:!1})}return iH(t,r,n)}:iH:function(t,r,n){if(C5(t),r=yve(r),C5(n),m0t)try{return iH(t,r,n)}catch(o){}if("get"in n||"set"in n)throw new v0t("Accessors not supported");return"value"in n&&(t[r]=n.value),t}});var cs=A((V8r,bve)=>{"use strict";var _0t=Hr(),b0t=_i(),x0t=cc();bve.exports=_0t?function(e,t,r){return b0t.f(e,t,x0t(1,r))}:function(e,t,r){return e[t]=r,e}});var F1=A((G8r,wve)=>{"use strict";var uH=Hr(),w0t=Fn(),xve=Function.prototype,E0t=uH&&Object.getOwnPropertyDescriptor,cH=w0t(xve,"name"),S0t=cH&&function(){}.name==="something",T0t=cH&&(!uH||uH&&E0t(xve,"name").configurable);wve.exports={EXISTS:cH,PROPER:S0t,CONFIGURABLE:T0t}});var bM=A((H8r,Eve)=>{"use strict";var I0t=At(),M0t=Nn(),pH=vM(),C0t=I0t(Function.toString);M0t(pH.inspectSource)||(pH.inspectSource=function(e){return C0t(e)});Eve.exports=pH.inspectSource});var fH=A((W8r,Tve)=>{"use strict";var A0t=or(),O0t=Nn(),Sve=A0t.WeakMap;Tve.exports=O0t(Sve)&&/native code/.test(String(Sve))});var xM=A(($8r,Mve)=>{"use strict";var P0t=$m(),N0t=Zv(),Ive=P0t("keys");Mve.exports=function(e){return Ive[e]||(Ive[e]=N0t(e))}});var xw=A((Z8r,Cve)=>{"use strict";Cve.exports={}});var Bo=A((Y8r,Pve)=>{"use strict";var D0t=fH(),Ove=or(),L0t=Qr(),k0t=cs(),dH=Fn(),hH=vM(),R0t=xM(),j0t=xw(),Ave="Object already initialized",mH=Ove.TypeError,q0t=Ove.WeakMap,A5,wM,O5,z0t=function(e){return O5(e)?wM(e):A5(e,{})},F0t=function(e){return function(t){var r;if(!L0t(t)||(r=wM(t)).type!==e)throw new mH("Incompatible receiver, "+e+" required");return r}};D0t||hH.state?(Qf=hH.state||(hH.state=new q0t),Qf.get=Qf.get,Qf.has=Qf.has,Qf.set=Qf.set,A5=function(e,t){if(Qf.has(e))throw new mH(Ave);return t.facade=e,Qf.set(e,t),t},wM=function(e){return Qf.get(e)||{}},O5=function(e){return Qf.has(e)}):(U1=R0t("state"),j0t[U1]=!0,A5=function(e,t){if(dH(e,U1))throw new mH(Ave);return t.facade=e,k0t(e,U1,t),t},wM=function(e){return dH(e,U1)?e[U1]:{}},O5=function(e){return dH(e,U1)});var Qf,U1;Pve.exports={set:A5,get:wM,has:O5,enforce:z0t,getterFor:F0t}});var EM=A((K8r,Lve)=>{"use strict";var vH=At(),U0t=Vt(),B0t=Nn(),P5=Fn(),gH=Hr(),V0t=F1().CONFIGURABLE,G0t=bM(),Dve=Bo(),H0t=Dve.enforce,W0t=Dve.get,Nve=String,N5=Object.defineProperty,$0t=vH("".slice),Z0t=vH("".replace),Y0t=vH([].join),K0t=gH&&!U0t(function(){return N5(function(){},"length",{value:8}).length!==8}),X0t=String(String).split("String"),Q0t=Lve.exports=function(e,t,r){$0t(Nve(t),0,7)==="Symbol("&&(t="["+Z0t(Nve(t),/^Symbol\(([^)]*)\).*$/,"$1")+"]"),r&&r.getter&&(t="get "+t),r&&r.setter&&(t="set "+t),(!P5(e,"name")||V0t&&e.name!==t)&&(gH?N5(e,"name",{value:t,configurable:!0}):e.name=t),K0t&&r&&P5(r,"arity")&&e.length!==r.arity&&N5(e,"length",{value:r.arity});try{r&&P5(r,"constructor")&&r.constructor?gH&&N5(e,"prototype",{writable:!1}):e.prototype&&(e.prototype=void 0)}catch(o){}var n=H0t(e);return P5(n,"source")||(n.source=Y0t(X0t,typeof t=="string"?t:"")),e};Function.prototype.toString=Q0t(function(){return B0t(this)&&W0t(this).source||G0t(this)},"toString")});var Xo=A((X8r,kve)=>{"use strict";var J0t=Nn(),e1t=_i(),t1t=EM(),r1t=M5();kve.exports=function(e,t,r,n){n||(n={});var o=n.enumerable,i=n.name!==void 0?n.name:t;if(J0t(r)&&t1t(r,i,n),n.global)o?e[t]=r:r1t(t,r);else{try{n.unsafe?e[t]&&(o=!0):delete e[t]}catch(a){}o?e[t]=r:e1t.f(e,t,{value:r,enumerable:!1,configurable:!n.nonConfigurable,writable:!n.nonWritable})}return e}});var yH=A((Q8r,Rve)=>{"use strict";var n1t=Math.ceil,o1t=Math.floor;Rve.exports=Math.trunc||function(t){var r=+t;return(r>0?o1t:n1t)(r)}});var Bi=A((J8r,jve)=>{"use strict";var i1t=yH();jve.exports=function(e){var t=+e;return t!==t||t===0?0:i1t(t)}});var Jf=A((ezr,qve)=>{"use strict";var a1t=Bi(),s1t=Math.max,l1t=Math.min;qve.exports=function(e,t){var r=a1t(e);return r<0?s1t(r+t,0):l1t(r,t)}});var fc=A((tzr,zve)=>{"use strict";var u1t=Bi(),c1t=Math.min;zve.exports=function(e){var t=u1t(e);return t>0?c1t(t,9007199254740991):0}});var uo=A((rzr,Fve)=>{"use strict";var p1t=fc();Fve.exports=function(e){return p1t(e.length)}});var ww=A((nzr,Bve)=>{"use strict";var f1t=us(),d1t=Jf(),h1t=uo(),Uve=function(e){return function(t,r,n){var o=f1t(t),i=h1t(o);if(i===0)return!e&&-1;var a=d1t(n,i),u;if(e&&r!==r){for(;i>a;)if(u=o[a++],u!==u)return!0}else for(;i>a;a++)if((e||a in o)&&o[a]===r)return e||a||0;return!e&&-1}};Bve.exports={includes:Uve(!0),indexOf:Uve(!1)}});var bH=A((ozr,Gve)=>{"use strict";var m1t=At(),_H=Fn(),g1t=us(),v1t=ww().indexOf,y1t=xw(),Vve=m1t([].push);Gve.exports=function(e,t){var r=g1t(e),n=0,o=[],i;for(i in r)!_H(y1t,i)&&_H(r,i)&&Vve(o,i);for(;t.length>n;)_H(r,i=t[n++])&&(~v1t(o,i)||Vve(o,i));return o}});var D5=A((izr,Hve)=>{"use strict";Hve.exports=["constructor","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","toLocaleString","toString","valueOf"]});var Yv=A(Wve=>{"use strict";var _1t=bH(),b1t=D5(),x1t=b1t.concat("length","prototype");Wve.f=Object.getOwnPropertyNames||function(t){return _1t(t,x1t)}});var SM=A($ve=>{"use strict";$ve.f=Object.getOwnPropertySymbols});var L5=A((lzr,Zve)=>{"use strict";var w1t=un(),E1t=At(),S1t=Yv(),T1t=SM(),I1t=ur(),M1t=E1t([].concat);Zve.exports=w1t("Reflect","ownKeys")||function(t){var r=S1t.f(I1t(t)),n=T1t.f;return n?M1t(r,n(t)):r}});var B1=A((uzr,Kve)=>{"use strict";var Yve=Fn(),C1t=L5(),A1t=Bs(),O1t=_i();Kve.exports=function(e,t,r){for(var n=C1t(t),o=O1t.f,i=A1t.f,a=0;a<n.length;a++){var u=n[a];!Yve(e,u)&&!(r&&Yve(r,u))&&o(e,u,i(t,u))}}});var Ew=A((czr,Xve)=>{"use strict";var P1t=Vt(),N1t=Nn(),D1t=/#|\.prototype\./,TM=function(e,t){var r=k1t[L1t(e)];return r===j1t?!0:r===R1t?!1:N1t(t)?P1t(t):!!t},L1t=TM.normalize=function(e){return String(e).replace(D1t,".").toLowerCase()},k1t=TM.data={},R1t=TM.NATIVE="N",j1t=TM.POLYFILL="P";Xve.exports=TM});var ce=A((pzr,Qve)=>{"use strict";var k5=or(),q1t=Bs().f,z1t=cs(),F1t=Xo(),U1t=M5(),B1t=B1(),V1t=Ew();Qve.exports=function(e,t){var r=e.target,n=e.global,o=e.stat,i,a,u,d,h,v;if(n?a=k5:o?a=k5[r]||U1t(r,{}):a=k5[r]&&k5[r].prototype,a)for(u in t){if(h=t[u],e.dontCallGetSet?(v=q1t(a,u),d=v&&v.value):d=a[u],i=V1t(n?u:r+(o?".":"#")+u,e.forced),!i&&d!==void 0){if(typeof h==typeof d)continue;B1t(h,d)}(e.sham||d&&d.sham)&&z1t(h,"sham",!0),F1t(a,u,h,e)}}});var R5=A((fzr,eye)=>{"use strict";var G1t=on(),H1t=G1t("toStringTag"),Jve={};Jve[H1t]="z";eye.exports=String(Jve)==="[object z]"});var Ou=A((dzr,tye)=>{"use strict";var W1t=R5(),$1t=Nn(),j5=gl(),Z1t=on(),Y1t=Z1t("toStringTag"),K1t=Object,X1t=j5(function(){return arguments}())==="Arguments",Q1t=function(e,t){try{return e[t]}catch(r){}};tye.exports=W1t?j5:function(e){var t,r,n;return e===void 0?"Undefined":e===null?"Null":typeof(r=Q1t(t=K1t(e),Y1t))=="string"?r:X1t?j5(t):(n=j5(t))==="Object"&&$1t(t.callee)?"Arguments":n}});var wn=A((hzr,rye)=>{"use strict";var J1t=Ou(),e_t=String;rye.exports=function(e){if(J1t(e)==="Symbol")throw new TypeError("Cannot convert a Symbol value to a string");return e_t(e)}});var V1=A((mzr,nye)=>{"use strict";var t_t=bH(),r_t=D5();nye.exports=Object.keys||function(t){return t_t(t,r_t)}});var q5=A(oye=>{"use strict";var n_t=Hr(),o_t=oH(),i_t=_i(),a_t=ur(),s_t=us(),l_t=V1();oye.f=n_t&&!o_t?Object.defineProperties:function(t,r){a_t(t);for(var n=s_t(r),o=l_t(r),i=o.length,a=0,u;i>a;)i_t.f(t,u=o[a++],n[u]);return t}});var xH=A((vzr,iye)=>{"use strict";var u_t=un();iye.exports=u_t("document","documentElement")});var Oa=A((yzr,fye)=>{"use strict";var c_t=ur(),p_t=q5(),aye=D5(),f_t=xw(),d_t=xH(),h_t=_M(),m_t=xM(),sye=">",lye="<",EH="prototype",SH="script",cye=m_t("IE_PROTO"),wH=function(){},pye=function(e){return lye+SH+sye+e+lye+"/"+SH+sye},uye=function(e){e.write(pye("")),e.close();var t=e.parentWindow.Object;return e=null,t},g_t=function(){var e=h_t("iframe"),t="java"+SH+":",r;return e.style.display="none",d_t.appendChild(e),e.src=String(t),r=e.contentWindow.document,r.open(),r.write(pye("document.F=Object")),r.close(),r.F},z5,F5=function(){try{z5=new ActiveXObject("htmlfile")}catch(t){}F5=typeof document!="undefined"?document.domain&&z5?uye(z5):g_t():uye(z5);for(var e=aye.length;e--;)delete F5[EH][aye[e]];return F5()};f_t[cye]=!0;fye.exports=Object.create||function(t,r){var n;return t!==null?(wH[EH]=c_t(t),n=new wH,wH[EH]=null,n[cye]=t):n=F5(),r===void 0?n:p_t.f(n,r)}});var dc=A((_zr,dye)=>{"use strict";var v_t=At();dye.exports=v_t([].slice)});var U5=A((bzr,gye)=>{"use strict";var y_t=gl(),__t=us(),hye=Yv().f,b_t=dc(),mye=typeof window=="object"&&window&&Object.getOwnPropertyNames?Object.getOwnPropertyNames(window):[],x_t=function(e){try{return hye(e)}catch(t){return b_t(mye)}};gye.exports.f=function(t){return mye&&y_t(t)==="Window"?x_t(t):hye(__t(t))}});var Vi=A((xzr,yye)=>{"use strict";var vye=EM(),w_t=_i();yye.exports=function(e,t,r){return r.get&&vye(r.get,t,{getter:!0}),r.set&&vye(r.set,t,{setter:!0}),w_t.f(e,t,r)}});var TH=A(_ye=>{"use strict";var E_t=on();_ye.f=E_t});var B5=A((Ezr,bye)=>{"use strict";var S_t=or();bye.exports=S_t});var ua=A((Szr,wye)=>{"use strict";var xye=B5(),T_t=Fn(),I_t=TH(),M_t=_i().f;wye.exports=function(e){var t=xye.Symbol||(xye.Symbol={});T_t(t,e)||M_t(t,e,{value:I_t.f(e)})}});var IH=A((Tzr,Eye)=>{"use strict";var C_t=ir(),A_t=un(),O_t=on(),P_t=Xo();Eye.exports=function(){var e=A_t("Symbol"),t=e&&e.prototype,r=t&&t.valueOf,n=O_t("toPrimitive");t&&!t[n]&&P_t(t,n,function(o){return C_t(r,this)},{arity:1})}});var Pu=A((Izr,Tye)=>{"use strict";var N_t=_i().f,D_t=Fn(),L_t=on(),Sye=L_t("toStringTag");Tye.exports=function(e,t,r){e&&!r&&(e=e.prototype),e&&!D_t(e,Sye)&&N_t(e,Sye,{configurable:!0,value:t})}});var Kv=A((Mzr,Iye)=>{"use strict";var k_t=gl(),R_t=At();Iye.exports=function(e){if(k_t(e)==="Function")return R_t(e)}});var ai=A((Czr,Cye)=>{"use strict";var Mye=Kv(),j_t=cn(),q_t=_w(),z_t=Mye(Mye.bind);Cye.exports=function(e,t){return j_t(e),t===void 0?e:q_t?z_t(e,t):function(){return e.apply(t,arguments)}}});var ed=A((Azr,Aye)=>{"use strict";var F_t=gl();Aye.exports=Array.isArray||function(t){return F_t(t)==="Array"}});var td=A((Ozr,Lye)=>{"use strict";var U_t=At(),B_t=Vt(),Oye=Nn(),V_t=Ou(),G_t=un(),H_t=bM(),Pye=function(){},Nye=G_t("Reflect","construct"),MH=/^\s*(?:class|function)\b/,W_t=U_t(MH.exec),$_t=!MH.test(Pye),IM=function(t){if(!Oye(t))return!1;try{return Nye(Pye,[],t),!0}catch(r){return!1}},Dye=function(t){if(!Oye(t))return!1;switch(V_t(t)){case"AsyncFunction":case"GeneratorFunction":case"AsyncGeneratorFunction":return!1}try{return $_t||!!W_t(MH,H_t(t))}catch(r){return!0}};Dye.sham=!0;Lye.exports=!Nye||B_t(function(){var e;return IM(IM.call)||!IM(Object)||!IM(function(){e=!0})||e})?Dye:IM});var qye=A((Pzr,jye)=>{"use strict";var kye=ed(),Z_t=td(),Y_t=Qr(),K_t=on(),X_t=K_t("species"),Rye=Array;jye.exports=function(e){var t;return kye(e)&&(t=e.constructor,Z_t(t)&&(t===Rye||kye(t.prototype))?t=void 0:Y_t(t)&&(t=t[X_t],t===null&&(t=void 0))),t===void 0?Rye:t}});var Sw=A((Nzr,zye)=>{"use strict";var Q_t=qye();zye.exports=function(e,t){return new(Q_t(e))(t===0?0:t)}});var Pa=A((Dzr,Uye)=>{"use strict";var J_t=ai(),ebt=At(),tbt=Hm(),rbt=Zn(),nbt=uo(),obt=Sw(),Fye=ebt([].push),Xv=function(e){var t=e===1,r=e===2,n=e===3,o=e===4,i=e===6,a=e===7,u=e===5||i;return function(d,h,v,b){for(var x=rbt(d),M=tbt(x),O=nbt(M),D=J_t(h,v),k=0,R=b||obt,q=t?R(d,O):r||a?R(d,0):void 0,B,G;O>k;k++)if((u||k in M)&&(B=M[k],G=D(B,k,x),e))if(t)q[k]=G;else if(G)switch(e){case 3:return!0;case 5:return B;case 6:return k;case 2:Fye(q,B)}else switch(e){case 4:return!1;case 7:Fye(q,B)}return i?-1:n||o?o:q}};Uye.exports={forEach:Xv(0),map:Xv(1),filter:Xv(2),some:Xv(3),every:Xv(4),find:Xv(5),findIndex:Xv(6),filterReject:Xv(7)}});var o0e=A(()=>{"use strict";var V5=ce(),AM=or(),RH=ir(),ibt=At(),abt=To(),Tw=Hr(),Iw=Wv(),sbt=Vt(),Vs=Fn(),lbt=vl(),PH=ur(),G5=us(),jH=fh(),ubt=wn(),NH=cc(),Mw=Oa(),Gye=V1(),cbt=Yv(),Hye=U5(),pbt=SM(),Wye=Bs(),$ye=_i(),fbt=q5(),Zye=gM(),CH=Xo(),dbt=Vi(),qH=$m(),hbt=xM(),Yye=xw(),Bye=Zv(),mbt=on(),gbt=TH(),vbt=ua(),ybt=IH(),_bt=Pu(),Kye=Bo(),H5=Pa().forEach,hc=hbt("hidden"),W5="Symbol",CM="prototype",bbt=Kye.set,Vye=Kye.getterFor(W5),Rp=Object[CM],G1=AM.Symbol,MM=G1&&G1[CM],xbt=AM.RangeError,wbt=AM.TypeError,AH=AM.QObject,Xye=Wye.f,H1=$ye.f,Qye=Hye.f,Ebt=Zye.f,Jye=ibt([].push),Zm=qH("symbols"),OM=qH("op-symbols"),Sbt=qH("wks"),DH=!AH||!AH[CM]||!AH[CM].findChild,e0e=function(e,t,r){var n=Xye(Rp,t);n&&delete Rp[t],H1(e,t,r),n&&e!==Rp&&H1(Rp,t,n)},LH=Tw&&sbt(function(){return Mw(H1({},"a",{get:function(){return H1(this,"a",{value:7}).a}})).a!==7})?e0e:H1,OH=function(e,t){var r=Zm[e]=Mw(MM);return bbt(r,{type:W5,tag:e,description:t}),Tw||(r.description=t),r},$5=function(t,r,n){t===Rp&&$5(OM,r,n),PH(t);var o=jH(r);return PH(n),Vs(Zm,o)?(n.enumerable?(Vs(t,hc)&&t[hc][o]&&(t[hc][o]=!1),n=Mw(n,{enumerable:NH(0,!1)})):(Vs(t,hc)||H1(t,hc,NH(1,Mw(null))),t[hc][o]=!0),LH(t,o,n)):H1(t,o,n)},zH=function(t,r){PH(t);var n=G5(r),o=Gye(n).concat(n0e(n));return H5(o,function(i){(!Tw||RH(kH,n,i))&&$5(t,i,n[i])}),t},Tbt=function(t,r){return r===void 0?Mw(t):zH(Mw(t),r)},kH=function(t){var r=jH(t),n=RH(Ebt,this,r);return this===Rp&&Vs(Zm,r)&&!Vs(OM,r)?!1:n||!Vs(this,r)||!Vs(Zm,r)||Vs(this,hc)&&this[hc][r]?n:!0},t0e=function(t,r){var n=G5(t),o=jH(r);if(!(n===Rp&&Vs(Zm,o)&&!Vs(OM,o))){var i=Xye(n,o);return i&&Vs(Zm,o)&&!(Vs(n,hc)&&n[hc][o])&&(i.enumerable=!0),i}},r0e=function(t){var r=Qye(G5(t)),n=[];return H5(r,function(o){!Vs(Zm,o)&&!Vs(Yye,o)&&Jye(n,o)}),n},n0e=function(e){var t=e===Rp,r=Qye(t?OM:G5(e)),n=[];return H5(r,function(o){Vs(Zm,o)&&(!t||Vs(Rp,o))&&Jye(n,Zm[o])}),n};Iw||(G1=function(){if(lbt(MM,this))throw new wbt("Symbol is not a constructor");var t=!arguments.length||arguments[0]===void 0?void 0:ubt(arguments[0]),r=Bye(t),n=function(o){var i=this===void 0?AM:this;i===Rp&&RH(n,OM,o),Vs(i,hc)&&Vs(i[hc],r)&&(i[hc][r]=!1);var a=NH(1,o);try{LH(i,r,a)}catch(u){if(!(u instanceof xbt))throw u;e0e(i,r,a)}};return Tw&&DH&&LH(Rp,r,{configurable:!0,set:n}),OH(r,t)},MM=G1[CM],CH(MM,"toString",function(){return Vye(this).tag}),CH(G1,"withoutSetter",function(e){return OH(Bye(e),e)}),Zye.f=kH,$ye.f=$5,fbt.f=zH,Wye.f=t0e,cbt.f=Hye.f=r0e,pbt.f=n0e,gbt.f=function(e){return OH(mbt(e),e)},Tw&&(dbt(MM,"description",{configurable:!0,get:function(){return Vye(this).description}}),abt||CH(Rp,"propertyIsEnumerable",kH,{unsafe:!0})));V5({global:!0,constructor:!0,wrap:!0,forced:!Iw,sham:!Iw},{Symbol:G1});H5(Gye(Sbt),function(e){vbt(e)});V5({target:W5,stat:!0,forced:!Iw},{useSetter:function(){DH=!0},useSimple:function(){DH=!1}});V5({target:"Object",stat:!0,forced:!Iw,sham:!Tw},{create:Tbt,defineProperty:$5,defineProperties:zH,getOwnPropertyDescriptor:t0e});V5({target:"Object",stat:!0,forced:!Iw},{getOwnPropertyNames:r0e});ybt();_bt(G1,W5);Yye[hc]=!0});var FH=A((Rzr,i0e)=>{"use strict";var Ibt=Wv();i0e.exports=Ibt&&!!Symbol.for&&!!Symbol.keyFor});var s0e=A(()=>{"use strict";var Mbt=ce(),Cbt=un(),Abt=Fn(),Obt=wn(),a0e=$m(),Pbt=FH(),UH=a0e("string-to-symbol-registry"),Nbt=a0e("symbol-to-string-registry");Mbt({target:"Symbol",stat:!0,forced:!Pbt},{for:function(e){var t=Obt(e);if(Abt(UH,t))return UH[t];var r=Cbt("Symbol")(t);return UH[t]=r,Nbt[r]=t,r}})});var u0e=A(()=>{"use strict";var Dbt=ce(),Lbt=Fn(),kbt=Wm(),Rbt=$v(),jbt=$m(),qbt=FH(),l0e=jbt("symbol-to-string-registry");Dbt({target:"Symbol",stat:!0,forced:!qbt},{keyFor:function(t){if(!kbt(t))throw new TypeError(Rbt(t)+" is not a symbol");if(Lbt(l0e,t))return l0e[t]}})});var yl=A((Uzr,d0e)=>{"use strict";var zbt=_w(),f0e=Function.prototype,c0e=f0e.apply,p0e=f0e.call;d0e.exports=typeof Reflect=="object"&&Reflect.apply||(zbt?p0e.bind(c0e):function(){return p0e.apply(c0e,arguments)})});var BH=A((Bzr,v0e)=>{"use strict";var Fbt=At(),h0e=ed(),Ubt=Nn(),m0e=gl(),Bbt=wn(),g0e=Fbt([].push);v0e.exports=function(e){if(Ubt(e))return e;if(h0e(e)){for(var t=e.length,r=[],n=0;n<t;n++){var o=e[n];typeof o=="string"?g0e(r,o):(typeof o=="number"||m0e(o)==="Number"||m0e(o)==="String")&&g0e(r,Bbt(o))}var i=r.length,a=!0;return function(u,d){if(a)return a=!1,d;if(h0e(this))return d;for(var h=0;h<i;h++)if(r[h]===u)return d}}}});var VH=A(()=>{"use strict";var Vbt=ce(),T0e=un(),I0e=yl(),Gbt=ir(),PM=At(),M0e=Vt(),y0e=Nn(),_0e=Wm(),C0e=dc(),Hbt=BH(),Wbt=Wv(),$bt=String,Qv=T0e("JSON","stringify"),Z5=PM(/./.exec),b0e=PM("".charAt),Zbt=PM("".charCodeAt),Ybt=PM("".replace),Kbt=PM(1 .toString),Xbt=/[\uD800-\uDFFF]/g,x0e=/^[\uD800-\uDBFF]$/,w0e=/^[\uDC00-\uDFFF]$/,E0e=!Wbt||M0e(function(){var e=T0e("Symbol")("stringify detection");return Qv([e])!=="[null]"||Qv({a:e})!=="{}"||Qv(Object(e))!=="{}"}),S0e=M0e(function(){return Qv("\uDF06\uD834")!=="\"\\udf06\\ud834\""||Qv("\uDEAD")!=="\"\\udead\""}),Qbt=function(e,t){var r=C0e(arguments),n=Hbt(t);if(!(!y0e(n)&&(e===void 0||_0e(e))))return r[1]=function(o,i){if(y0e(n)&&(i=Gbt(n,this,$bt(o),i)),!_0e(i))return i},I0e(Qv,null,r)},Jbt=function(e,t,r){var n=b0e(r,t-1),o=b0e(r,t+1);return Z5(x0e,e)&&!Z5(w0e,o)||Z5(w0e,e)&&!Z5(x0e,n)?"\\u"+Kbt(Zbt(e,0),16):e};Qv&&Vbt({target:"JSON",stat:!0,arity:3,forced:E0e||S0e},{stringify:function(t,r,n){var o=C0e(arguments),i=I0e(E0e?Qbt:Qv,null,o);return S0e&&typeof i=="string"?Ybt(i,Xbt,Jbt):i}})});var O0e=A(()=>{"use strict";var ext=ce(),txt=Wv(),rxt=Vt(),A0e=SM(),nxt=Zn(),oxt=!txt||rxt(function(){A0e.f(1)});ext({target:"Object",stat:!0,forced:oxt},{getOwnPropertySymbols:function(t){var r=A0e.f;return r?r(nxt(t)):[]}})});var P0e=A(()=>{"use strict";o0e();s0e();u0e();VH();O0e()});var q0e=A(()=>{"use strict";var ixt=ce(),axt=Hr(),sxt=or(),Y5=At(),lxt=Fn(),uxt=Nn(),cxt=vl(),pxt=wn(),fxt=Vi(),dxt=B1(),Ym=sxt.Symbol,W1=Ym&&Ym.prototype;axt&&uxt(Ym)&&(!("description"in W1)||Ym().description!==void 0)&&(GH={},NM=function(){var t=arguments.length<1||arguments[0]===void 0?void 0:pxt(arguments[0]),r=cxt(W1,this)?new Ym(t):t===void 0?Ym():Ym(t);return t===""&&(GH[r]=!0),r},dxt(NM,Ym),NM.prototype=W1,W1.constructor=NM,N0e=String(Ym("description detection"))==="Symbol(description detection)",D0e=Y5(W1.valueOf),L0e=Y5(W1.toString),k0e=/^Symbol\((.*)\)[^)]+$/,R0e=Y5("".replace),j0e=Y5("".slice),fxt(W1,"description",{configurable:!0,get:function(){var t=D0e(this);if(lxt(GH,t))return"";var r=L0e(t),n=N0e?j0e(r,7,-1):R0e(r,k0e,"$1");return n===""?void 0:n}}),ixt({global:!0,constructor:!0,forced:!0},{Symbol:NM}));var GH,NM,N0e,D0e,L0e,k0e,R0e,j0e});var z0e=A(()=>{"use strict";var hxt=ua();hxt("asyncIterator")});var F0e=A(()=>{"use strict";var mxt=ua();mxt("hasInstance")});var U0e=A(()=>{"use strict";var gxt=ua();gxt("isConcatSpreadable")});var B0e=A(()=>{"use strict";var vxt=ua();vxt("iterator")});var V0e=A(()=>{"use strict";var yxt=ua();yxt("match")});var G0e=A(()=>{"use strict";var _xt=ua();_xt("matchAll")});var H0e=A(()=>{"use strict";var bxt=ua();bxt("replace")});var W0e=A(()=>{"use strict";var xxt=ua();xxt("search")});var $0e=A(()=>{"use strict";var wxt=ua();wxt("species")});var Z0e=A(()=>{"use strict";var Ext=ua();Ext("split")});var Y0e=A(()=>{"use strict";var Sxt=ua(),Txt=IH();Sxt("toPrimitive");Txt()});var K0e=A(()=>{"use strict";var Ixt=un(),Mxt=ua(),Cxt=Pu();Mxt("toStringTag");Cxt(Ixt("Symbol"),"Symbol")});var X0e=A(()=>{"use strict";var Axt=ua();Axt("unscopables")});var DM=A((EFr,Q0e)=>{"use strict";var Oxt=At(),Pxt=cn();Q0e.exports=function(e,t,r){try{return Oxt(Pxt(Object.getOwnPropertyDescriptor(e,t)[r]))}catch(n){}}});var HH=A((SFr,J0e)=>{"use strict";var Nxt=Qr();J0e.exports=function(e){return Nxt(e)||e===null}});var WH=A((TFr,e1e)=>{"use strict";var Dxt=HH(),Lxt=String,kxt=TypeError;e1e.exports=function(e){if(Dxt(e))return e;throw new kxt("Can't set "+Lxt(e)+" as a prototype")}});var jp=A((IFr,t1e)=>{"use strict";var Rxt=DM(),jxt=Qr(),qxt=Ci(),zxt=WH();t1e.exports=Object.setPrototypeOf||("__proto__"in{}?function(){var e=!1,t={},r;try{r=Rxt(Object.prototype,"__proto__","set"),r(t,[]),e=t instanceof Array}catch(n){}return function(o,i){return qxt(o),zxt(i),jxt(o)&&(e?r(o,i):o.__proto__=i),o}}():void 0)});var $H=A((MFr,r1e)=>{"use strict";var Fxt=_i().f;r1e.exports=function(e,t,r){r in e||Fxt(e,r,{configurable:!0,get:function(){return t[r]},set:function(n){t[r]=n}})}});var Jv=A((CFr,o1e)=>{"use strict";var Uxt=Nn(),Bxt=Qr(),n1e=jp();o1e.exports=function(e,t,r){var n,o;return n1e&&Uxt(n=t.constructor)&&n!==r&&Bxt(o=n.prototype)&&o!==r.prototype&&n1e(e,o),e}});var $1=A((AFr,i1e)=>{"use strict";var Vxt=wn();i1e.exports=function(e,t){return e===void 0?arguments.length<2?"":t:Vxt(e)}});var ZH=A((OFr,a1e)=>{"use strict";var Gxt=Qr(),Hxt=cs();a1e.exports=function(e,t){Gxt(t)&&"cause"in t&&Hxt(e,"cause",t.cause)}});var K5=A((PFr,u1e)=>{"use strict";var Wxt=At(),s1e=Error,$xt=Wxt("".replace),Zxt=function(e){return String(new s1e(e).stack)}("zxcasd"),l1e=/\n\s*at [^:]*:[^\n]*/,Yxt=l1e.test(Zxt);u1e.exports=function(e,t){if(Yxt&&typeof e=="string"&&!s1e.prepareStackTrace)for(;t--;)e=$xt(e,l1e,"");return e}});var YH=A((NFr,c1e)=>{"use strict";var Kxt=Vt(),Xxt=cc();c1e.exports=!Kxt(function(){var e=new Error("a");return"stack"in e?(Object.defineProperty(e,"stack",Xxt(1,7)),e.stack!==7):!0})});var X5=A((DFr,f1e)=>{"use strict";var Qxt=cs(),Jxt=K5(),ewt=YH(),p1e=Error.captureStackTrace;f1e.exports=function(e,t,r,n){ewt&&(p1e?p1e(e,t):Qxt(e,"stack",Jxt(r,n)))}});var KH=A((LFr,_1e)=>{"use strict";var d1e=un(),twt=Fn(),h1e=cs(),rwt=vl(),m1e=jp(),g1e=B1(),v1e=$H(),nwt=Jv(),owt=$1(),iwt=ZH(),awt=X5(),swt=Hr(),y1e=To();_1e.exports=function(e,t,r,n){var o="stackTraceLimit",i=n?2:1,a=e.split("."),u=a[a.length-1],d=d1e.apply(null,a);if(d){var h=d.prototype;if(!y1e&&twt(h,"cause")&&delete h.cause,!r)return d;var v=d1e("Error"),b=t(function(x,M){var O=owt(n?M:x,void 0),D=n?new d(x):new d;return O!==void 0&&h1e(D,"message",O),awt(D,b,D.stack,2),this&&rwt(h,this)&&nwt(D,this,b),arguments.length>i&&iwt(D,arguments[i]),D});if(b.prototype=h,u!=="Error"?m1e?m1e(b,v):g1e(b,v,{name:!0}):swt&&o in d&&(v1e(b,d,o),v1e(b,d,"prepareStackTrace")),g1e(b,d),!y1e)try{h.name!==u&&h1e(h,"name",u),h.constructor=b}catch(x){}return b}}});var E1e=A(()=>{"use strict";var x1e=ce(),lwt=or(),dh=yl(),w1e=KH(),XH="WebAssembly",b1e=lwt[XH],Q5=new Error("e",{cause:7}).cause!==7,Z1=function(e,t){var r={};r[e]=w1e(e,t,Q5),x1e({global:!0,constructor:!0,arity:1,forced:Q5},r)},QH=function(e,t){if(b1e&&b1e[e]){var r={};r[e]=w1e(XH+"."+e,t,Q5),x1e({target:XH,stat:!0,constructor:!0,arity:1,forced:Q5},r)}};Z1("Error",function(e){return function(r){return dh(e,this,arguments)}});Z1("EvalError",function(e){return function(r){return dh(e,this,arguments)}});Z1("RangeError",function(e){return function(r){return dh(e,this,arguments)}});Z1("ReferenceError",function(e){return function(r){return dh(e,this,arguments)}});Z1("SyntaxError",function(e){return function(r){return dh(e,this,arguments)}});Z1("TypeError",function(e){return function(r){return dh(e,this,arguments)}});Z1("URIError",function(e){return function(r){return dh(e,this,arguments)}});QH("CompileError",function(e){return function(r){return dh(e,this,arguments)}});QH("LinkError",function(e){return function(r){return dh(e,this,arguments)}});QH("RuntimeError",function(e){return function(r){return dh(e,this,arguments)}})});var JH=A((jFr,T1e)=>{"use strict";var uwt=Hr(),cwt=Vt(),pwt=ur(),S1e=$1(),J5=Error.prototype.toString,fwt=cwt(function(){if(uwt){var e=Object.create(Object.defineProperty({},"name",{get:function(){return this===e}}));if(J5.call(e)!=="true")return!0}return J5.call({message:1,name:2})!=="2: 1"||J5.call({})!=="Error"});T1e.exports=fwt?function(){var t=pwt(this),r=S1e(t.name,"Error"),n=S1e(t.message);return r?n?r+": "+n:r:n}:J5});var C1e=A(()=>{"use strict";var dwt=Xo(),I1e=JH(),M1e=Error.prototype;M1e.toString!==I1e&&dwt(M1e,"toString",I1e)});var eL=A((FFr,A1e)=>{"use strict";var hwt=Vt();A1e.exports=!hwt(function(){function e(){}return e.prototype.constructor=null,Object.getPrototypeOf(new e)!==e.prototype})});var ps=A((UFr,P1e)=>{"use strict";var mwt=Fn(),gwt=Nn(),vwt=Zn(),ywt=xM(),_wt=eL(),O1e=ywt("IE_PROTO"),eW=Object,bwt=eW.prototype;P1e.exports=_wt?eW.getPrototypeOf:function(e){var t=vwt(e);if(mwt(t,O1e))return t[O1e];var r=t.constructor;return gwt(r)&&t instanceof r?r.prototype:t instanceof eW?bwt:null}});var Y1=A((BFr,N1e)=>{"use strict";N1e.exports={}});var tL=A((VFr,D1e)=>{"use strict";var xwt=on(),wwt=Y1(),Ewt=xwt("iterator"),Swt=Array.prototype;D1e.exports=function(e){return e!==void 0&&(wwt.Array===e||Swt[Ewt]===e)}});var hh=A((GFr,k1e)=>{"use strict";var Twt=Ou(),L1e=Aa(),Iwt=pc(),Mwt=Y1(),Cwt=on(),Awt=Cwt("iterator");k1e.exports=function(e){if(!Iwt(e))return L1e(e,Awt)||L1e(e,"@@iterator")||Mwt[Twt(e)]}});var ey=A((HFr,R1e)=>{"use strict";var Owt=ir(),Pwt=cn(),Nwt=ur(),Dwt=$v(),Lwt=hh(),kwt=TypeError;R1e.exports=function(e,t){var r=arguments.length<2?Lwt(e):t;if(Pwt(r))return Nwt(Owt(r,e));throw new kwt(Dwt(e)+" is not iterable")}});var Gs=A((WFr,q1e)=>{"use strict";var Rwt=ir(),j1e=ur(),jwt=Aa();q1e.exports=function(e,t,r){var n,o;j1e(e);try{if(n=jwt(e,"return"),!n){if(t==="throw")throw r;return r}n=Rwt(n,e)}catch(i){o=!0,n=i}if(t==="throw")throw r;if(o)throw n;return j1e(n),r}});var ca=A(($Fr,B1e)=>{"use strict";var qwt=ai(),zwt=ir(),Fwt=ur(),Uwt=$v(),Bwt=tL(),Vwt=uo(),z1e=vl(),Gwt=ey(),Hwt=hh(),F1e=Gs(),Wwt=TypeError,rL=function(e,t){this.stopped=e,this.result=t},U1e=rL.prototype;B1e.exports=function(e,t,r){var n=r&&r.that,o=!!(r&&r.AS_ENTRIES),i=!!(r&&r.IS_RECORD),a=!!(r&&r.IS_ITERATOR),u=!!(r&&r.INTERRUPTED),d=qwt(t,n),h,v,b,x,M,O,D,k=function(q){return h&&F1e(h,"normal",q),new rL(!0,q)},R=function(q){return o?(Fwt(q),u?d(q[0],q[1],k):d(q[0],q[1])):u?d(q,k):d(q)};if(i)h=e.iterator;else if(a)h=e;else{if(v=Hwt(e),!v)throw new Wwt(Uwt(e)+" is not iterable");if(Bwt(v)){for(b=0,x=Vwt(e);x>b;b++)if(M=R(e[b]),M&&z1e(U1e,M))return M;return new rL(!1)}h=Gwt(e,v)}for(O=i?e.next:h.next;!(D=zwt(O,h)).done;){try{M=R(D.value)}catch(q){F1e(h,"throw",q)}if(typeof M=="object"&&M&&z1e(U1e,M))return M}return new rL(!1)}});var G1e=A(()=>{"use strict";var $wt=ce(),Zwt=vl(),Ywt=ps(),nL=jp(),Kwt=B1(),V1e=Oa(),tW=cs(),rW=cc(),Xwt=ZH(),Qwt=X5(),Jwt=ca(),eEt=$1(),tEt=on(),rEt=tEt("toStringTag"),oL=Error,nEt=[].push,Cw=function(t,r){var n=Zwt(nW,this),o;nL?o=nL(new oL,n?Ywt(this):nW):(o=n?this:V1e(nW),tW(o,rEt,"Error")),r!==void 0&&tW(o,"message",eEt(r)),Qwt(o,Cw,o.stack,1),arguments.length>2&&Xwt(o,arguments[2]);var i=[];return Jwt(t,nEt,{that:i}),tW(o,"errors",i),o};nL?nL(Cw,oL):Kwt(Cw,oL,{name:!0});var nW=Cw.prototype=V1e(oL.prototype,{constructor:rW(1,Cw),message:rW(1,""),name:rW(1,"AggregateError")});$wt({global:!0,constructor:!0,arity:2},{AggregateError:Cw})});var oW=A(()=>{"use strict";G1e()});var Z1e=A(()=>{"use strict";var oEt=ce(),iEt=un(),aEt=yl(),H1e=Vt(),sEt=KH(),iW="AggregateError",W1e=iEt(iW),$1e=!H1e(function(){return W1e([1]).errors[0]!==1})&&H1e(function(){return W1e([1],iW,{cause:7}).cause!==7});oEt({global:!0,constructor:!0,arity:2,forced:$1e},{AggregateError:sEt(iW,function(e){return function(r,n){return aEt(e,this,arguments)}},$1e,!0)})});var pa=A((e7r,Y1e)=>{"use strict";var lEt=on(),uEt=Oa(),cEt=_i().f,aW=lEt("unscopables"),sW=Array.prototype;sW[aW]===void 0&&cEt(sW,aW,{configurable:!0,value:uEt(null)});Y1e.exports=function(e){sW[aW][e]=!0}});var lW=A(()=>{"use strict";var pEt=ce(),fEt=Zn(),dEt=uo(),hEt=Bi(),mEt=pa();pEt({target:"Array",proto:!0},{at:function(t){var r=fEt(this),n=dEt(r),o=hEt(t),i=o>=0?o:n+o;return i<0||i>=n?void 0:r[i]}});mEt("at")});var ty=A((n7r,K1e)=>{"use strict";var gEt=TypeError,vEt=9007199254740991;K1e.exports=function(e){if(e>vEt)throw gEt("Maximum allowed index exceeded");return e}});var qp=A((o7r,X1e)=>{"use strict";var yEt=Hr(),_Et=_i(),bEt=cc();X1e.exports=function(e,t,r){yEt?_Et.f(e,t,bEt(0,r)):e[t]=r}});var Aw=A((i7r,Q1e)=>{"use strict";var xEt=Vt(),wEt=on(),EEt=Xf(),SEt=wEt("species");Q1e.exports=function(e){return EEt>=51||!xEt(function(){var t=[],r=t.constructor={};return r[SEt]=function(){return{foo:1}},t[e](Boolean).foo!==1})}});var r_e=A(()=>{"use strict";var TEt=ce(),IEt=Vt(),MEt=ed(),CEt=Qr(),AEt=Zn(),OEt=uo(),J1e=ty(),e_e=qp(),PEt=Sw(),NEt=Aw(),DEt=on(),LEt=Xf(),t_e=DEt("isConcatSpreadable"),kEt=LEt>=51||!IEt(function(){var e=[];return e[t_e]=!1,e.concat()[0]!==e}),REt=function(e){if(!CEt(e))return!1;var t=e[t_e];return t!==void 0?!!t:MEt(e)},jEt=!kEt||!NEt("concat");TEt({target:"Array",proto:!0,arity:1,forced:jEt},{concat:function(t){var r=AEt(this),n=PEt(r,0),o=0,i,a,u,d,h;for(i=-1,u=arguments.length;i<u;i++)if(h=i===-1?r:arguments[i],REt(h))for(d=OEt(h),J1e(o+d),a=0;a<d;a++,o++)a in h&&e_e(n,o,h[a]);else J1e(o+1),e_e(n,o++,h);return n.length=o,n}})});var LM=A((l7r,o_e)=>{"use strict";var n_e=$v(),qEt=TypeError;o_e.exports=function(e,t){if(!delete e[t])throw new qEt("Cannot delete property "+n_e(t)+" of "+n_e(e))}});var cW=A((u7r,i_e)=>{"use strict";var zEt=Zn(),uW=Jf(),FEt=uo(),UEt=LM(),BEt=Math.min;i_e.exports=[].copyWithin||function(t,r){var n=zEt(this),o=FEt(n),i=uW(t,o),a=uW(r,o),u=arguments.length>2?arguments[2]:void 0,d=BEt((u===void 0?o:uW(u,o))-a,o-i),h=1;for(a<i&&i<a+d&&(h=-1,a+=d-1,i+=d-1);d-->0;)a in n?n[i]=n[a]:UEt(n,i),i+=h,a+=h;return n}});var a_e=A(()=>{"use strict";var VEt=ce(),GEt=cW(),HEt=pa();VEt({target:"Array",proto:!0},{copyWithin:GEt});HEt("copyWithin")});var zp=A((f7r,s_e)=>{"use strict";var WEt=Vt();s_e.exports=function(e,t){var r=[][e];return!!r&&WEt(function(){r.call(null,t||function(){return 1},1)})}});var l_e=A(()=>{"use strict";var $Et=ce(),ZEt=Pa().every,YEt=zp(),KEt=YEt("every");$Et({target:"Array",proto:!0,forced:!KEt},{every:function(t){return ZEt(this,t,arguments.length>1?arguments[1]:void 0)}})});var iL=A((m7r,c_e)=>{"use strict";var XEt=Zn(),u_e=Jf(),QEt=uo();c_e.exports=function(t){for(var r=XEt(this),n=QEt(r),o=arguments.length,i=u_e(o>1?arguments[1]:void 0,n),a=o>2?arguments[2]:void 0,u=a===void 0?n:u_e(a,n);u>i;)r[i++]=t;return r}});var p_e=A(()=>{"use strict";var JEt=ce(),eSt=iL(),tSt=pa();JEt({target:"Array",proto:!0},{fill:eSt});tSt("fill")});var f_e=A(()=>{"use strict";var rSt=ce(),nSt=Pa().filter,oSt=Aw(),iSt=oSt("filter");rSt({target:"Array",proto:!0,forced:!iSt},{filter:function(t){return nSt(this,t,arguments.length>1?arguments[1]:void 0)}})});var h_e=A(()=>{"use strict";var aSt=ce(),sSt=Pa().find,lSt=pa(),pW="find",d_e=!0;pW in[]&&Array(1)[pW](function(){d_e=!1});aSt({target:"Array",proto:!0,forced:d_e},{find:function(t){return sSt(this,t,arguments.length>1?arguments[1]:void 0)}});lSt(pW)});var g_e=A(()=>{"use strict";var uSt=ce(),cSt=Pa().findIndex,pSt=pa(),fW="findIndex",m_e=!0;fW in[]&&Array(1)[fW](function(){m_e=!1});uSt({target:"Array",proto:!0,forced:m_e},{findIndex:function(t){return cSt(this,t,arguments.length>1?arguments[1]:void 0)}});pSt(fW)});var kM=A((S7r,y_e)=>{"use strict";var fSt=ai(),dSt=Hm(),hSt=Zn(),mSt=uo(),v_e=function(e){var t=e===1;return function(r,n,o){for(var i=hSt(r),a=dSt(i),u=mSt(a),d=fSt(n,o),h,v;u-->0;)if(h=a[u],v=d(h,u,i),v)switch(e){case 0:return h;case 1:return u}return t?-1:void 0}};y_e.exports={findLast:v_e(0),findLastIndex:v_e(1)}});var dW=A(()=>{"use strict";var gSt=ce(),vSt=kM().findLast,ySt=pa();gSt({target:"Array",proto:!0},{findLast:function(t){return vSt(this,t,arguments.length>1?arguments[1]:void 0)}});ySt("findLast")});var hW=A(()=>{"use strict";var _St=ce(),bSt=kM().findLastIndex,xSt=pa();_St({target:"Array",proto:!0},{findLastIndex:function(t){return bSt(this,t,arguments.length>1?arguments[1]:void 0)}});xSt("findLastIndex")});var mW=A((A7r,x_e)=>{"use strict";var wSt=ed(),ESt=uo(),SSt=ty(),TSt=ai(),b_e=function(e,t,r,n,o,i,a,u){for(var d=o,h=0,v=a?TSt(a,u):!1,b,x;h<n;)h in r&&(b=v?v(r[h],h,t):r[h],i>0&&wSt(b)?(x=ESt(b),d=b_e(e,t,b,x,d,i-1)-1):(SSt(d+1),e[d]=b),d++),h++;return d};x_e.exports=b_e});var w_e=A(()=>{"use strict";var ISt=ce(),MSt=mW(),CSt=Zn(),ASt=uo(),OSt=Bi(),PSt=Sw();ISt({target:"Array",proto:!0},{flat:function(){var t=arguments.length?arguments[0]:void 0,r=CSt(this),n=ASt(r),o=PSt(r,0);return o.length=MSt(o,r,r,n,0,t===void 0?1:OSt(t)),o}})});var E_e=A(()=>{"use strict";var NSt=ce(),DSt=mW(),LSt=cn(),kSt=Zn(),RSt=uo(),jSt=Sw();NSt({target:"Array",proto:!0},{flatMap:function(t){var r=kSt(this),n=RSt(r),o;return LSt(t),o=jSt(r,0),o.length=DSt(o,r,r,n,0,1,t,arguments.length>1?arguments[1]:void 0),o}})});var gW=A((L7r,S_e)=>{"use strict";var qSt=Pa().forEach,zSt=zp(),FSt=zSt("forEach");S_e.exports=FSt?[].forEach:function(t){return qSt(this,t,arguments.length>1?arguments[1]:void 0)}});var I_e=A(()=>{"use strict";var USt=ce(),T_e=gW();USt({target:"Array",proto:!0,forced:[].forEach!==T_e},{forEach:T_e})});var aL=A((j7r,M_e)=>{"use strict";var BSt=ur(),VSt=Gs();M_e.exports=function(e,t,r,n){try{return n?t(BSt(r)[0],r[1]):t(r)}catch(o){VSt(e,"throw",o)}}});var vW=A((q7r,O_e)=>{"use strict";var GSt=ai(),HSt=ir(),WSt=Zn(),$St=aL(),ZSt=tL(),YSt=td(),KSt=uo(),C_e=qp(),XSt=ey(),QSt=hh(),A_e=Array;O_e.exports=function(t){var r=WSt(t),n=YSt(this),o=arguments.length,i=o>1?arguments[1]:void 0,a=i!==void 0;a&&(i=GSt(i,o>2?arguments[2]:void 0));var u=QSt(r),d=0,h,v,b,x,M,O;if(u&&!(this===A_e&&ZSt(u)))for(v=n?new this:[],x=XSt(r,u),M=x.next;!(b=HSt(M,x)).done;d++)O=a?$St(x,i,[b.value,d],!0):b.value,C_e(v,d,O);else for(h=KSt(r),v=n?new this(h):A_e(h);h>d;d++)O=a?i(r[d],d):r[d],C_e(v,d,O);return v.length=d,v}});var RM=A((z7r,L_e)=>{"use strict";var JSt=on(),N_e=JSt("iterator"),D_e=!1;try{P_e=0,yW={next:function(){return{done:!!P_e++}},return:function(){D_e=!0}},yW[N_e]=function(){return this},Array.from(yW,function(){throw 2})}catch(e){}var P_e,yW;L_e.exports=function(e,t){try{if(!t&&!D_e)return!1}catch(o){return!1}var r=!1;try{var n={};n[N_e]=function(){return{next:function(){return{done:r=!0}}}},e(n)}catch(o){}return r}});var k_e=A(()=>{"use strict";var e2t=ce(),t2t=vW(),r2t=RM(),n2t=!r2t(function(e){Array.from(e)});e2t({target:"Array",stat:!0,forced:n2t},{from:t2t})});var R_e=A(()=>{"use strict";var o2t=ce(),i2t=ww().includes,a2t=Vt(),s2t=pa(),l2t=a2t(function(){return!Array(1).includes()});o2t({target:"Array",proto:!0,forced:l2t},{includes:function(t){return i2t(this,t,arguments.length>1?arguments[1]:void 0)}});s2t("includes")});var q_e=A(()=>{"use strict";var u2t=ce(),c2t=Kv(),p2t=ww().indexOf,f2t=zp(),_W=c2t([].indexOf),j_e=!!_W&&1/_W([1],1,-0)<0,d2t=j_e||!f2t("indexOf");u2t({target:"Array",proto:!0,forced:d2t},{indexOf:function(t){var r=arguments.length>1?arguments[1]:void 0;return j_e?_W(this,t,r)||0:p2t(this,t,r)}})});var z_e=A(()=>{"use strict";var h2t=ce(),m2t=ed();h2t({target:"Array",stat:!0},{isArray:m2t})});var ry=A((Z7r,B_e)=>{"use strict";var g2t=Vt(),v2t=Nn(),y2t=Qr(),_2t=Oa(),F_e=ps(),b2t=Xo(),x2t=on(),w2t=To(),wW=x2t("iterator"),U_e=!1,Km,bW,xW;[].keys&&(xW=[].keys(),"next"in xW?(bW=F_e(F_e(xW)),bW!==Object.prototype&&(Km=bW)):U_e=!0);var E2t=!y2t(Km)||g2t(function(){var e={};return Km[wW].call(e)!==e});E2t?Km={}:w2t&&(Km=_2t(Km));v2t(Km[wW])||b2t(Km,wW,function(){return this});B_e.exports={IteratorPrototype:Km,BUGGY_SAFARI_ITERATORS:U_e}});var ny=A((Y7r,V_e)=>{"use strict";var S2t=ry().IteratorPrototype,T2t=Oa(),I2t=cc(),M2t=Pu(),C2t=Y1(),A2t=function(){return this};V_e.exports=function(e,t,r,n){var o=t+" Iterator";return e.prototype=T2t(S2t,{next:I2t(+!n,r)}),M2t(e,o,!1,!0),C2t[o]=A2t,e}});var uL=A((K7r,J_e)=>{"use strict";var O2t=ce(),P2t=ir(),sL=To(),X_e=F1(),N2t=Nn(),D2t=ny(),G_e=ps(),H_e=jp(),L2t=Pu(),k2t=cs(),EW=Xo(),R2t=on(),W_e=Y1(),Q_e=ry(),j2t=X_e.PROPER,q2t=X_e.CONFIGURABLE,$_e=Q_e.IteratorPrototype,lL=Q_e.BUGGY_SAFARI_ITERATORS,jM=R2t("iterator"),Z_e="keys",qM="values",Y_e="entries",K_e=function(){return this};J_e.exports=function(e,t,r,n,o,i,a){D2t(r,t,n);var u=function(R){if(R===o&&x)return x;if(!lL&&R&&R in v)return v[R];switch(R){case Z_e:return function(){return new r(this,R)};case qM:return function(){return new r(this,R)};case Y_e:return function(){return new r(this,R)}}return function(){return new r(this)}},d=t+" Iterator",h=!1,v=e.prototype,b=v[jM]||v["@@iterator"]||o&&v[o],x=!lL&&b||u(o),M=t==="Array"&&v.entries||b,O,D,k;if(M&&(O=G_e(M.call(new e)),O!==Object.prototype&&O.next&&(!sL&&G_e(O)!==$_e&&(H_e?H_e(O,$_e):N2t(O[jM])||EW(O,jM,K_e)),L2t(O,d,!0,!0),sL&&(W_e[d]=K_e))),j2t&&o===qM&&b&&b.name!==qM&&(!sL&&q2t?k2t(v,"name",qM):(h=!0,x=function(){return P2t(b,this)})),o)if(D={values:u(qM),keys:i?x:u(Z_e),entries:u(Y_e)},a)for(k in D)(lL||h||!(k in v))&&EW(v,k,D[k]);else O2t({target:t,proto:!0,forced:lL||h},D);return(!sL||a)&&v[jM]!==x&&EW(v,jM,x,{name:o}),W_e[t]=x,D}});var Cs=A((X7r,ebe)=>{"use strict";ebe.exports=function(e,t){return{value:e,done:t}}});var zM=A((Q7r,ibe)=>{"use strict";var z2t=us(),SW=pa(),tbe=Y1(),nbe=Bo(),F2t=_i().f,U2t=uL(),cL=Cs(),B2t=To(),V2t=Hr(),obe="Array Iterator",G2t=nbe.set,H2t=nbe.getterFor(obe);ibe.exports=U2t(Array,"Array",function(e,t){G2t(this,{type:obe,target:z2t(e),index:0,kind:t})},function(){var e=H2t(this),t=e.target,r=e.index++;if(!t||r>=t.length)return e.target=null,cL(void 0,!0);switch(e.kind){case"keys":return cL(r,!1);case"values":return cL(t[r],!1)}return cL([r,t[r]],!1)},"values");var rbe=tbe.Arguments=tbe.Array;SW("keys");SW("values");SW("entries");if(!B2t&&V2t&&rbe.name!=="values")try{F2t(rbe,"name",{value:"values"})}catch(e){}});var abe=A(()=>{"use strict";var W2t=ce(),$2t=At(),Z2t=Hm(),Y2t=us(),K2t=zp(),X2t=$2t([].join),Q2t=Z2t!==Object,J2t=Q2t||!K2t("join",",");W2t({target:"Array",proto:!0,forced:J2t},{join:function(t){return X2t(Y2t(this),t===void 0?",":t)}})});var IW=A((t9r,lbe)=>{"use strict";var eTt=yl(),tTt=us(),rTt=Bi(),nTt=uo(),oTt=zp(),iTt=Math.min,TW=[].lastIndexOf,sbe=!!TW&&1/[1].lastIndexOf(1,-0)<0,aTt=oTt("lastIndexOf"),sTt=sbe||!aTt;lbe.exports=sTt?function(t){if(sbe)return eTt(TW,this,arguments)||0;var r=tTt(this),n=nTt(r);if(n===0)return-1;var o=n-1;for(arguments.length>1&&(o=iTt(o,rTt(arguments[1]))),o<0&&(o=n+o);o>=0;o--)if(o in r&&r[o]===t)return o||0;return-1}:TW});var cbe=A(()=>{"use strict";var lTt=ce(),ube=IW();lTt({target:"Array",proto:!0,forced:ube!==[].lastIndexOf},{lastIndexOf:ube})});var pbe=A(()=>{"use strict";var uTt=ce(),cTt=Pa().map,pTt=Aw(),fTt=pTt("map");uTt({target:"Array",proto:!0,forced:!fTt},{map:function(t){return cTt(this,t,arguments.length>1?arguments[1]:void 0)}})});var dbe=A(()=>{"use strict";var dTt=ce(),hTt=Vt(),mTt=td(),gTt=qp(),fbe=Array,vTt=hTt(function(){function e(){}return!(fbe.of.call(e)instanceof e)});dTt({target:"Array",stat:!0,forced:vTt},{of:function(){for(var t=0,r=arguments.length,n=new(mTt(this)?this:fbe)(r);r>t;)gTt(n,t,arguments[t++]);return n.length=r,n}})});var pL=A((l9r,hbe)=>{"use strict";var yTt=Hr(),_Tt=ed(),bTt=TypeError,xTt=Object.getOwnPropertyDescriptor,wTt=yTt&&!function(){if(this!==void 0)return!0;try{Object.defineProperty([],"length",{writable:!1}).length=1}catch(e){return e instanceof TypeError}}();hbe.exports=wTt?function(e,t){if(_Tt(e)&&!xTt(e,"length").writable)throw new bTt("Cannot set read only .length");return e.length=t}:function(e,t){return e.length=t}});var mbe=A(()=>{"use strict";var ETt=ce(),STt=Zn(),TTt=uo(),ITt=pL(),MTt=ty(),CTt=Vt(),ATt=CTt(function(){return[].push.call({length:4294967296},1)!==4294967297}),OTt=function(){try{Object.defineProperty([],"length",{writable:!1}).push()}catch(e){return e instanceof TypeError}},PTt=ATt||!OTt();ETt({target:"Array",proto:!0,arity:1,forced:PTt},{push:function(t){var r=STt(this),n=TTt(r),o=arguments.length;MTt(n+o);for(var i=0;i<o;i++)r[n]=arguments[i],n++;return ITt(r,n),n}})});var FM=A((p9r,_be)=>{"use strict";var NTt=cn(),DTt=Zn(),LTt=Hm(),kTt=uo(),gbe=TypeError,vbe="Reduce of empty array with no initial value",ybe=function(e){return function(t,r,n,o){var i=DTt(t),a=LTt(i),u=kTt(i);if(NTt(r),u===0&&n<2)throw new gbe(vbe);var d=e?u-1:0,h=e?-1:1;if(n<2)for(;;){if(d in a){o=a[d],d+=h;break}if(d+=h,e?d<0:u<=d)throw new gbe(vbe)}for(;e?d>=0:u>d;d+=h)d in a&&(o=r(o,a[d],d,i));return o}};_be.exports={left:ybe(!1),right:ybe(!0)}});var BM=A((f9r,bbe)=>{"use strict";var UM=or(),RTt=Yf(),jTt=gl(),fL=function(e){return RTt.slice(0,e.length)===e};bbe.exports=function(){return fL("Bun/")?"BUN":fL("Cloudflare-Workers")?"CLOUDFLARE":fL("Deno/")?"DENO":fL("Node.js/")?"NODE":UM.Bun&&typeof Bun.version=="string"?"BUN":UM.Deno&&typeof Deno.version=="object"?"DENO":jTt(UM.process)==="process"?"NODE":UM.window&&UM.document?"BROWSER":"REST"}()});var K1=A((d9r,xbe)=>{"use strict";var qTt=BM();xbe.exports=qTt==="NODE"});var Ebe=A(()=>{"use strict";var zTt=ce(),FTt=FM().left,UTt=zp(),wbe=Xf(),BTt=K1(),VTt=!BTt&&wbe>79&&wbe<83,GTt=VTt||!UTt("reduce");zTt({target:"Array",proto:!0,forced:GTt},{reduce:function(t){var r=arguments.length;return FTt(this,t,r,r>1?arguments[1]:void 0)}})});var Tbe=A(()=>{"use strict";var HTt=ce(),WTt=FM().right,$Tt=zp(),Sbe=Xf(),ZTt=K1(),YTt=!ZTt&&Sbe>79&&Sbe<83,KTt=YTt||!$Tt("reduceRight");HTt({target:"Array",proto:!0,forced:KTt},{reduceRight:function(t){return WTt(this,t,arguments.length,arguments.length>1?arguments[1]:void 0)}})});var Mbe=A(()=>{"use strict";var XTt=ce(),QTt=At(),JTt=ed(),eIt=QTt([].reverse),Ibe=[1,2];XTt({target:"Array",proto:!0,forced:String(Ibe)===String(Ibe.reverse())},{reverse:function(){return JTt(this)&&(this.length=this.length),eIt(this)}})});var Obe=A(()=>{"use strict";var tIt=ce(),Cbe=ed(),rIt=td(),nIt=Qr(),Abe=Jf(),oIt=uo(),iIt=us(),aIt=qp(),sIt=on(),lIt=Aw(),uIt=dc(),cIt=lIt("slice"),pIt=sIt("species"),MW=Array,fIt=Math.max;tIt({target:"Array",proto:!0,forced:!cIt},{slice:function(t,r){var n=iIt(this),o=oIt(n),i=Abe(t,o),a=Abe(r===void 0?o:r,o),u,d,h;if(Cbe(n)&&(u=n.constructor,rIt(u)&&(u===MW||Cbe(u.prototype))?u=void 0:nIt(u)&&(u=u[pIt],u===null&&(u=void 0)),u===MW||u===void 0))return uIt(n,i,a);for(d=new(u===void 0?MW:u)(fIt(a-i,0)),h=0;i<a;i++,h++)i in n&&aIt(d,h,n[i]);return d.length=h,d}})});var Pbe=A(()=>{"use strict";var dIt=ce(),hIt=Pa().some,mIt=zp(),gIt=mIt("some");dIt({target:"Array",proto:!0,forced:!gIt},{some:function(t){return hIt(this,t,arguments.length>1?arguments[1]:void 0)}})});var dL=A((S9r,Dbe)=>{"use strict";var Nbe=dc(),vIt=Math.floor,CW=function(e,t){var r=e.length;if(r<8)for(var n=1,o,i;n<r;){for(i=n,o=e[n];i&&t(e[i-1],o)>0;)e[i]=e[--i];i!==n++&&(e[i]=o)}else for(var a=vIt(r/2),u=CW(Nbe(e,0,a),t),d=CW(Nbe(e,a),t),h=u.length,v=d.length,b=0,x=0;b<h||x<v;)e[b+x]=b<h&&x<v?t(u[b],d[x])<=0?u[b++]:d[x++]:b<h?u[b++]:d[x++];return e};Dbe.exports=CW});var AW=A((T9r,kbe)=>{"use strict";var yIt=Yf(),Lbe=yIt.match(/firefox\/(\d+)/i);kbe.exports=!!Lbe&&+Lbe[1]});var OW=A((I9r,Rbe)=>{"use strict";var _It=Yf();Rbe.exports=/MSIE|Trident/.test(_It)});var hL=A((M9r,qbe)=>{"use strict";var bIt=Yf(),jbe=bIt.match(/AppleWebKit\/(\d+)\./);qbe.exports=!!jbe&&+jbe[1]});var $be=A(()=>{"use strict";var xIt=ce(),Hbe=At(),wIt=cn(),EIt=Zn(),zbe=uo(),SIt=LM(),Fbe=wn(),PW=Vt(),TIt=dL(),IIt=zp(),Ube=AW(),MIt=OW(),Bbe=Xf(),Vbe=hL(),oy=[],Gbe=Hbe(oy.sort),CIt=Hbe(oy.push),AIt=PW(function(){oy.sort(void 0)}),OIt=PW(function(){oy.sort(null)}),PIt=IIt("sort"),Wbe=!PW(function(){if(Bbe)return Bbe<70;if(!(Ube&&Ube>3)){if(MIt)return!0;if(Vbe)return Vbe<603;var e="",t,r,n,o;for(t=65;t<76;t++){switch(r=String.fromCharCode(t),t){case 66:case 69:case 70:case 72:n=3;break;case 68:case 71:n=4;break;default:n=2}for(o=0;o<47;o++)oy.push({k:r+o,v:n})}for(oy.sort(function(i,a){return a.v-i.v}),o=0;o<oy.length;o++)r=oy[o].k.charAt(0),e.charAt(e.length-1)!==r&&(e+=r);return e!=="DGBEFHACIJK"}}),NIt=AIt||!OIt||!PIt||!Wbe,DIt=function(e){return function(t,r){return r===void 0?-1:t===void 0?1:e!==void 0?+e(t,r)||0:Fbe(t)>Fbe(r)?1:-1}};xIt({target:"Array",proto:!0,forced:NIt},{sort:function(t){t!==void 0&&wIt(t);var r=EIt(this);if(Wbe)return t===void 0?Gbe(r):Gbe(r,t);var n=[],o=zbe(r),i,a;for(a=0;a<o;a++)a in r&&CIt(n,r[a]);for(TIt(n,DIt(t)),i=zbe(n),a=0;a<i;)r[a]=n[a++];for(;a<o;)SIt(r,a++);return r}})});var iy=A((O9r,Ybe)=>{"use strict";var LIt=un(),kIt=Vi(),RIt=on(),jIt=Hr(),Zbe=RIt("species");Ybe.exports=function(e){var t=LIt(e);jIt&&t&&!t[Zbe]&&kIt(t,Zbe,{configurable:!0,get:function(){return this}})}});var Kbe=A(()=>{"use strict";var qIt=iy();qIt("Array")});var Xbe=A(()=>{"use strict";var zIt=ce(),FIt=Zn(),UIt=Jf(),BIt=Bi(),VIt=uo(),GIt=pL(),HIt=ty(),WIt=Sw(),$It=qp(),NW=LM(),ZIt=Aw(),YIt=ZIt("splice"),KIt=Math.max,XIt=Math.min;zIt({target:"Array",proto:!0,forced:!YIt},{splice:function(t,r){var n=FIt(this),o=VIt(n),i=UIt(t,o),a=arguments.length,u,d,h,v,b,x;for(a===0?u=d=0:a===1?(u=0,d=o-i):(u=a-2,d=XIt(KIt(BIt(r),0),o-i)),HIt(o+u-d),h=WIt(n,d),v=0;v<d;v++)b=i+v,b in n&&$It(h,v,n[b]);if(h.length=d,u<d){for(v=i;v<o-d;v++)b=v+d,x=v+u,b in n?n[x]=n[b]:NW(n,x);for(v=o;v>o-d+u;v--)NW(n,v-1)}else if(u>d)for(v=o-d;v>i;v--)b=v+d-1,x=v+u-1,b in n?n[x]=n[b]:NW(n,x);for(v=0;v<u;v++)n[v+i]=arguments[v+2];return GIt(n,o-d+u),h}})});var DW=A((k9r,Qbe)=>{"use strict";var QIt=uo();Qbe.exports=function(e,t){for(var r=QIt(e),n=new t(r),o=0;o<r;o++)n[o]=e[r-o-1];return n}});var LW=A(()=>{"use strict";var JIt=ce(),eMt=DW(),tMt=us(),rMt=pa(),nMt=Array;JIt({target:"Array",proto:!0},{toReversed:function(){return eMt(tMt(this),nMt)}});rMt("toReversed")});var Xm=A((q9r,Jbe)=>{"use strict";var oMt=uo();Jbe.exports=function(e,t,r){for(var n=0,o=arguments.length>2?r:oMt(t),i=new e(o);o>n;)i[n]=t[n++];return i}});var kW=A((z9r,exe)=>{"use strict";var iMt=or();exe.exports=function(e,t){var r=iMt[e],n=r&&r.prototype;return n&&n[t]}});var RW=A(()=>{"use strict";var aMt=ce(),sMt=At(),lMt=cn(),uMt=us(),cMt=Xm(),pMt=kW(),fMt=pa(),dMt=Array,hMt=sMt(pMt("Array","sort"));aMt({target:"Array",proto:!0},{toSorted:function(t){t!==void 0&&lMt(t);var r=uMt(this),n=cMt(dMt,r);return hMt(n,t)}});fMt("toSorted")});var jW=A(()=>{"use strict";var mMt=ce(),gMt=pa(),vMt=ty(),yMt=uo(),_Mt=Jf(),bMt=us(),xMt=Bi(),wMt=Array,EMt=Math.max,SMt=Math.min;mMt({target:"Array",proto:!0},{toSpliced:function(t,r){var n=bMt(this),o=yMt(n),i=_Mt(t,o),a=arguments.length,u=0,d,h,v,b;for(a===0?d=h=0:a===1?(d=0,h=o-i):(d=a-2,h=SMt(EMt(xMt(r),0),o-i)),v=vMt(o+d-h),b=wMt(v);u<i;u++)b[u]=n[u];for(;u<i+d;u++)b[u]=arguments[u-i+2];for(;u<v;u++)b[u]=n[u+h-d];return b}});gMt("toSpliced")});var txe=A(()=>{"use strict";var TMt=pa();TMt("flat")});var rxe=A(()=>{"use strict";var IMt=pa();IMt("flatMap")});var nxe=A(()=>{"use strict";var MMt=ce(),CMt=Zn(),AMt=uo(),OMt=pL(),PMt=LM(),NMt=ty(),DMt=[].unshift(0)!==1,LMt=function(){try{Object.defineProperty([],"length",{writable:!1}).unshift()}catch(e){return e instanceof TypeError}},kMt=DMt||!LMt();MMt({target:"Array",proto:!0,arity:1,forced:kMt},{unshift:function(t){var r=CMt(this),n=AMt(r),o=arguments.length;if(o){NMt(n+o);for(var i=n;i--;){var a=i+o;i in r?r[a]=r[i]:PMt(r,a)}for(var u=0;u<o;u++)r[u]=arguments[u]}return OMt(r,n+o)}})});var qW=A((K9r,oxe)=>{"use strict";var RMt=uo(),jMt=Bi(),qMt=RangeError;oxe.exports=function(e,t,r,n){var o=RMt(e),i=jMt(r),a=i<0?o+i:i;if(a>=o||a<0)throw new qMt("Incorrect index");for(var u=new t(o),d=0;d<o;d++)u[d]=d===a?n:e[d];return u}});var zW=A(()=>{"use strict";var zMt=ce(),FMt=qW(),UMt=us(),BMt=Array;zMt({target:"Array",proto:!0},{with:function(e,t){return FMt(UMt(this),BMt,e,t)}})});var VM=A((J9r,ixe)=>{"use strict";ixe.exports=typeof ArrayBuffer!="undefined"&&typeof DataView!="undefined"});var Fp=A((eUr,axe)=>{"use strict";var VMt=Xo();axe.exports=function(e,t,r){for(var n in t)VMt(e,n,t[n],r);return e}});var Jl=A((tUr,sxe)=>{"use strict";var GMt=vl(),HMt=TypeError;sxe.exports=function(e,t){if(GMt(t,e))return e;throw new HMt("Incorrect invocation")}});var Ow=A((rUr,lxe)=>{"use strict";var WMt=Bi(),$Mt=fc(),ZMt=RangeError;lxe.exports=function(e){if(e===void 0)return 0;var t=WMt(e),r=$Mt(t);if(t!==r)throw new ZMt("Wrong length or index");return r}});var mL=A((nUr,uxe)=>{"use strict";uxe.exports=Math.sign||function(t){var r=+t;return r===0||r!==r?r:r<0?-1:1}});var FW=A((oUr,pxe)=>{"use strict";var YMt=2220446049250313e-31,cxe=1/YMt;pxe.exports=function(e){return e+cxe-cxe}});var UW=A((iUr,fxe)=>{"use strict";var KMt=mL(),XMt=FW(),QMt=Math.abs,JMt=2220446049250313e-31;fxe.exports=function(e,t,r,n){var o=+e,i=QMt(o),a=KMt(o);if(i<n)return a*XMt(i/n/t)*n*t;var u=(1+t/JMt)*i,d=u-(u-i);return d>r||d!==d?a*(1/0):a*d}});var gL=A((aUr,dxe)=>{"use strict";var eCt=UW(),tCt=1.1920928955078125e-7,rCt=34028234663852886e22,nCt=11754943508222875e-54;dxe.exports=Math.fround||function(t){return eCt(t,tCt,rCt,nCt)}});var mxe=A((sUr,hxe)=>{"use strict";var oCt=Array,iCt=Math.abs,Qm=Math.pow,aCt=Math.floor,sCt=Math.log,lCt=Math.LN2,uCt=function(e,t,r){var n=oCt(r),o=r*8-t-1,i=(1<<o)-1,a=i>>1,u=t===23?Qm(2,-24)-Qm(2,-77):0,d=e<0||e===0&&1/e<0?1:0,h=0,v,b,x;for(e=iCt(e),e!==e||e===1/0?(b=e!==e?1:0,v=i):(v=aCt(sCt(e)/lCt),x=Qm(2,-v),e*x<1&&(v--,x*=2),v+a>=1?e+=u/x:e+=u*Qm(2,1-a),e*x>=2&&(v++,x/=2),v+a>=i?(b=0,v=i):v+a>=1?(b=(e*x-1)*Qm(2,t),v+=a):(b=e*Qm(2,a-1)*Qm(2,t),v=0));t>=8;)n[h++]=b&255,b/=256,t-=8;for(v=v<<t|b,o+=t;o>0;)n[h++]=v&255,v/=256,o-=8;return n[h-1]|=d*128,n},cCt=function(e,t){var r=e.length,n=r*8-t-1,o=(1<<n)-1,i=o>>1,a=n-7,u=r-1,d=e[u--],h=d&127,v;for(d>>=7;a>0;)h=h*256+e[u--],a-=8;for(v=h&(1<<-a)-1,h>>=-a,a+=t;a>0;)v=v*256+e[u--],a-=8;if(h===0)h=1-i;else{if(h===o)return v?NaN:d?-1/0:1/0;v+=Qm(2,t),h-=i}return(d?-1:1)*v*Qm(2,h-t)};hxe.exports={pack:uCt,unpack:cCt}});var WM=A((lUr,Nxe)=>{"use strict";var xL=or(),WW=At(),BW=Hr(),pCt=VM(),Mxe=F1(),fCt=cs(),dCt=Vi(),gxe=Fp(),VW=Vt(),vL=Jl(),hCt=Bi(),mCt=fc(),_L=Ow(),gCt=gL(),Cxe=mxe(),vCt=ps(),vxe=jp(),yCt=iL(),_Ct=dc(),bCt=Jv(),xCt=B1(),Axe=Pu(),$W=Bo(),wCt=Mxe.PROPER,yxe=Mxe.CONFIGURABLE,Nw="ArrayBuffer",wL="DataView",Dw="prototype",ECt="Wrong length",Oxe="Wrong index",_xe=$W.getterFor(Nw),HM=$W.getterFor(wL),bxe=$W.set,rd=xL[Nw],ep=rd,Pw=ep&&ep[Dw],mh=xL[wL],X1=mh&&mh[Dw],xxe=Object.prototype,SCt=xL.Array,bL=xL.RangeError,TCt=WW(yCt),ICt=WW([].reverse),Pxe=Cxe.pack,wxe=Cxe.unpack,Exe=function(e){return[e&255]},Sxe=function(e){return[e&255,e>>8&255]},Txe=function(e){return[e&255,e>>8&255,e>>16&255,e>>24&255]},Ixe=function(e){return e[3]<<24|e[2]<<16|e[1]<<8|e[0]},MCt=function(e){return Pxe(gCt(e),23,4)},CCt=function(e){return Pxe(e,52,8)},yL=function(e,t,r){dCt(e[Dw],t,{configurable:!0,get:function(){return r(this)[t]}})},ay=function(e,t,r,n){var o=HM(e),i=_L(r),a=!!n;if(i+t>o.byteLength)throw new bL(Oxe);var u=o.bytes,d=i+o.byteOffset,h=_Ct(u,d,d+t);return a?h:ICt(h)},sy=function(e,t,r,n,o,i){var a=HM(e),u=_L(r),d=n(+o),h=!!i;if(u+t>a.byteLength)throw new bL(Oxe);for(var v=a.bytes,b=u+a.byteOffset,x=0;x<t;x++)v[b+x]=d[h?x:t-x-1]};pCt?(GW=wCt&&rd.name!==Nw,!VW(function(){rd(1)})||!VW(function(){new rd(-1)})||VW(function(){return new rd,new rd(1.5),new rd(NaN),rd.length!==1||GW&&!yxe})?(ep=function(t){return vL(this,Pw),bCt(new rd(_L(t)),this,ep)},ep[Dw]=Pw,Pw.constructor=ep,xCt(ep,rd)):GW&&yxe&&fCt(rd,"name",Nw),vxe&&vCt(X1)!==xxe&&vxe(X1,xxe),GM=new mh(new ep(2)),HW=WW(X1.setInt8),GM.setInt8(0,2147483648),GM.setInt8(1,2147483649),(GM.getInt8(0)||!GM.getInt8(1))&&gxe(X1,{setInt8:function(t,r){HW(this,t,r<<24>>24)},setUint8:function(t,r){HW(this,t,r<<24>>24)}},{unsafe:!0})):(ep=function(t){vL(this,Pw);var r=_L(t);bxe(this,{type:Nw,bytes:TCt(SCt(r),0),byteLength:r}),BW||(this.byteLength=r,this.detached=!1)},Pw=ep[Dw],mh=function(t,r,n){vL(this,X1),vL(t,Pw);var o=_xe(t),i=o.byteLength,a=hCt(r);if(a<0||a>i)throw new bL("Wrong offset");if(n=n===void 0?i-a:mCt(n),a+n>i)throw new bL(ECt);bxe(this,{type:wL,buffer:t,byteLength:n,byteOffset:a,bytes:o.bytes}),BW||(this.buffer=t,this.byteLength=n,this.byteOffset=a)},X1=mh[Dw],BW&&(yL(ep,"byteLength",_xe),yL(mh,"buffer",HM),yL(mh,"byteLength",HM),yL(mh,"byteOffset",HM)),gxe(X1,{getInt8:function(t){return ay(this,1,t)[0]<<24>>24},getUint8:function(t){return ay(this,1,t)[0]},getInt16:function(t){var r=ay(this,2,t,arguments.length>1?arguments[1]:!1);return(r[1]<<8|r[0])<<16>>16},getUint16:function(t){var r=ay(this,2,t,arguments.length>1?arguments[1]:!1);return r[1]<<8|r[0]},getInt32:function(t){return Ixe(ay(this,4,t,arguments.length>1?arguments[1]:!1))},getUint32:function(t){return Ixe(ay(this,4,t,arguments.length>1?arguments[1]:!1))>>>0},getFloat32:function(t){return wxe(ay(this,4,t,arguments.length>1?arguments[1]:!1),23)},getFloat64:function(t){return wxe(ay(this,8,t,arguments.length>1?arguments[1]:!1),52)},setInt8:function(t,r){sy(this,1,t,Exe,r)},setUint8:function(t,r){sy(this,1,t,Exe,r)},setInt16:function(t,r){sy(this,2,t,Sxe,r,arguments.length>2?arguments[2]:!1)},setUint16:function(t,r){sy(this,2,t,Sxe,r,arguments.length>2?arguments[2]:!1)},setInt32:function(t,r){sy(this,4,t,Txe,r,arguments.length>2?arguments[2]:!1)},setUint32:function(t,r){sy(this,4,t,Txe,r,arguments.length>2?arguments[2]:!1)},setFloat32:function(t,r){sy(this,4,t,MCt,r,arguments.length>2?arguments[2]:!1)},setFloat64:function(t,r){sy(this,8,t,CCt,r,arguments.length>2?arguments[2]:!1)}}));var GW,GM,HW;Axe(ep,Nw);Axe(mh,wL);Nxe.exports={ArrayBuffer:ep,DataView:mh}});var Lxe=A(()=>{"use strict";var ACt=ce(),OCt=or(),PCt=WM(),NCt=iy(),ZW="ArrayBuffer",Dxe=PCt[ZW],DCt=OCt[ZW];ACt({global:!0,constructor:!0,forced:DCt!==Dxe},{ArrayBuffer:Dxe});NCt(ZW)});var Vn=A((pUr,Gxe)=>{"use strict";var LCt=VM(),QW=Hr(),Nu=or(),qxe=Nn(),TL=Qr(),uy=Fn(),JW=Ou(),kCt=$v(),RCt=cs(),YW=Xo(),jCt=Vi(),qCt=vl(),IL=ps(),kw=jp(),zCt=on(),FCt=Zv(),zxe=Bo(),Fxe=zxe.enforce,UCt=zxe.get,EL=Nu.Int8Array,KW=EL&&EL.prototype,kxe=Nu.Uint8ClampedArray,Rxe=kxe&&kxe.prototype,gh=EL&&IL(EL),nd=KW&&IL(KW),BCt=Object.prototype,e$=Nu.TypeError,jxe=zCt("toStringTag"),XW=FCt("TYPED_ARRAY_TAG"),SL="TypedArrayConstructor",Jm=LCt&&!!kw&&JW(Nu.opera)!=="Opera",Uxe=!1,mc,ly,Lw,eg={Int8Array:1,Uint8Array:1,Uint8ClampedArray:1,Int16Array:2,Uint16Array:2,Int32Array:4,Uint32Array:4,Float32Array:4,Float64Array:8},t$={BigInt64Array:8,BigUint64Array:8},VCt=function(t){if(!TL(t))return!1;var r=JW(t);return r==="DataView"||uy(eg,r)||uy(t$,r)},Bxe=function(e){var t=IL(e);if(TL(t)){var r=UCt(t);return r&&uy(r,SL)?r[SL]:Bxe(t)}},Vxe=function(e){if(!TL(e))return!1;var t=JW(e);return uy(eg,t)||uy(t$,t)},GCt=function(e){if(Vxe(e))return e;throw new e$("Target is not a typed array")},HCt=function(e){if(qxe(e)&&(!kw||qCt(gh,e)))return e;throw new e$(kCt(e)+" is not a typed array constructor")},WCt=function(e,t,r,n){if(QW){if(r)for(var o in eg){var i=Nu[o];if(i&&uy(i.prototype,e))try{delete i.prototype[e]}catch(a){try{i.prototype[e]=t}catch(u){}}}(!nd[e]||r)&&YW(nd,e,r?t:Jm&&KW[e]||t,n)}},$Ct=function(e,t,r){var n,o;if(QW){if(kw){if(r){for(n in eg)if(o=Nu[n],o&&uy(o,e))try{delete o[e]}catch(i){}}if(!gh[e]||r)try{return YW(gh,e,r?t:Jm&&gh[e]||t)}catch(i){}else return}for(n in eg)o=Nu[n],o&&(!o[e]||r)&&YW(o,e,t)}};for(mc in eg)ly=Nu[mc],Lw=ly&&ly.prototype,Lw?Fxe(Lw)[SL]=ly:Jm=!1;for(mc in t$)ly=Nu[mc],Lw=ly&&ly.prototype,Lw&&(Fxe(Lw)[SL]=ly);if((!Jm||!qxe(gh)||gh===Function.prototype)&&(gh=function(){throw new e$("Incorrect invocation")},Jm))for(mc in eg)Nu[mc]&&kw(Nu[mc],gh);if((!Jm||!nd||nd===BCt)&&(nd=gh.prototype,Jm))for(mc in eg)Nu[mc]&&kw(Nu[mc].prototype,nd);Jm&&IL(Rxe)!==nd&&kw(Rxe,nd);if(QW&&!uy(nd,jxe)){Uxe=!0,jCt(nd,jxe,{configurable:!0,get:function(){return TL(this)?this[XW]:void 0}});for(mc in eg)Nu[mc]&&RCt(Nu[mc],XW,mc)}Gxe.exports={NATIVE_ARRAY_BUFFER_VIEWS:Jm,TYPED_ARRAY_TAG:Uxe&&XW,aTypedArray:GCt,aTypedArrayConstructor:HCt,exportTypedArrayMethod:WCt,exportTypedArrayStaticMethod:$Ct,getTypedArrayConstructor:Bxe,isView:VCt,isTypedArray:Vxe,TypedArray:gh,TypedArrayPrototype:nd}});var Wxe=A(()=>{"use strict";var ZCt=ce(),Hxe=Vn(),YCt=Hxe.NATIVE_ARRAY_BUFFER_VIEWS;ZCt({target:"ArrayBuffer",stat:!0,forced:!YCt},{isView:Hxe.isView})});var Qxe=A(()=>{"use strict";var KCt=ce(),n$=Kv(),XCt=Vt(),Kxe=WM(),$xe=ur(),Zxe=Jf(),QCt=fc(),o$=Kxe.ArrayBuffer,r$=Kxe.DataView,Xxe=r$.prototype,Yxe=n$(o$.prototype.slice),JCt=n$(Xxe.getUint8),eAt=n$(Xxe.setUint8),tAt=XCt(function(){return!new o$(2).slice(1,void 0).byteLength});KCt({target:"ArrayBuffer",proto:!0,unsafe:!0,forced:tAt},{slice:function(t,r){if(Yxe&&r===void 0)return Yxe($xe(this),t);for(var n=$xe(this).byteLength,o=Zxe(t,n),i=Zxe(r===void 0?n:r,n),a=new o$(QCt(i-o)),u=new r$(this),d=new r$(a),h=0;o<i;)eAt(d,h++,JCt(u,o++));return a}})});var Jxe=A(()=>{"use strict";var rAt=ce(),nAt=WM(),oAt=VM();rAt({global:!0,constructor:!0,forced:!oAt},{DataView:nAt.DataView})});var ewe=A(()=>{"use strict";Jxe()});var i$=A(()=>{"use strict";var iAt=ce(),aAt=At(),owe=Math.pow,twe=31,sAt=1023,rwe=owe(2,-24),nwe=.0009765625,lAt=function(e){var t=e>>>15,r=e>>>10&twe,n=e&sAt;return r===twe?n===0?t===0?1/0:-1/0:NaN:r===0?n*(t===0?rwe:-rwe):owe(2,r-15)*(t===0?1+n*nwe:-1-n*nwe)},uAt=aAt(DataView.prototype.getUint16);iAt({target:"DataView",proto:!0},{getFloat16:function(t){var r=uAt(this,t,arguments.length>1?arguments[1]:!1);return lAt(r)}})});var a$=A((wUr,iwe)=>{"use strict";var cAt=Ou(),pAt=TypeError;iwe.exports=function(e){if(cAt(e)==="DataView")return e;throw new pAt("Argument is not a DataView")}});var s$=A((EUr,awe)=>{"use strict";var fAt=Math.log,dAt=Math.LN2;awe.exports=Math.log2||function(t){return fAt(t)/dAt}});var u$=A(()=>{"use strict";var hAt=ce(),mAt=At(),gAt=a$(),vAt=Ow(),yAt=s$(),swe=FW(),_At=Math.pow,bAt=65520,xAt=61005353927612305e-21,wAt=16777216,l$=1024,EAt=function(e){if(e!==e)return 32256;if(e===0)return(1/e===-1/0)<<15;var t=e<0;if(t&&(e=-e),e>=bAt)return t<<15|31744;if(e<xAt)return t<<15|swe(e*wAt);var r=yAt(e)|0;if(r===-15)return t<<15|l$;var n=swe((e*_At(2,-r)-1)*l$);return n===l$?t<<15|r+16<<10:t<<15|r+15<<10|n},SAt=mAt(DataView.prototype.setUint16);hAt({target:"DataView",proto:!0},{setFloat16:function(t,r){gAt(this);var n=vAt(t),o=EAt(+r);return SAt(this,n,o,arguments.length>2?arguments[2]:!1)}})});var c$=A((IUr,cwe)=>{"use strict";var uwe=or(),TAt=DM(),IAt=gl(),lwe=uwe.ArrayBuffer,MAt=uwe.TypeError;cwe.exports=lwe&&TAt(lwe.prototype,"byteLength","get")||function(e){if(IAt(e)!=="ArrayBuffer")throw new MAt("ArrayBuffer expected");return e.byteLength}});var p$=A((MUr,pwe)=>{"use strict";var CAt=or(),AAt=VM(),OAt=c$(),PAt=CAt.DataView;pwe.exports=function(e){if(!AAt||OAt(e)!==0)return!1;try{return new PAt(e),!1}catch(t){return!0}}});var f$=A(()=>{"use strict";var NAt=Hr(),DAt=Vi(),LAt=p$(),fwe=ArrayBuffer.prototype;NAt&&!("detached"in fwe)&&DAt(fwe,"detached",{configurable:!0,get:function(){return LAt(this)}})});var Rw=A((OUr,dwe)=>{"use strict";var kAt=p$(),RAt=TypeError;dwe.exports=function(e){if(kAt(e))throw new RAt("ArrayBuffer is detached");return e}});var d$=A((PUr,hwe)=>{"use strict";var jAt=or(),qAt=K1();hwe.exports=function(e){if(qAt){try{return jAt.process.getBuiltinModule(e)}catch(t){}try{return Function("return require(\""+e+"\")")()}catch(t){}}}});var ML=A((NUr,gwe)=>{"use strict";var zAt=or(),FAt=Vt(),h$=Xf(),m$=BM(),mwe=zAt.structuredClone;gwe.exports=!!mwe&&!FAt(function(){if(m$==="DENO"&&h$>92||m$==="NODE"&&h$>94||m$==="BROWSER"&&h$>97)return!1;var e=new ArrayBuffer(8),t=mwe(e,{transfer:[e]});return e.byteLength!==0||t.byteLength!==8})});var b$=A((DUr,_we)=>{"use strict";var _$=or(),UAt=d$(),BAt=ML(),VAt=_$.structuredClone,vwe=_$.ArrayBuffer,CL=_$.MessageChannel,y$=!1,g$,ywe,AL,v$;if(BAt)y$=function(e){VAt(e,{transfer:[e]})};else if(vwe)try{CL||(g$=UAt("worker_threads"),g$&&(CL=g$.MessageChannel)),CL&&(ywe=new CL,AL=new vwe(2),v$=function(e){ywe.port1.postMessage(null,[e])},AL.byteLength===2&&(v$(AL),AL.byteLength===0&&(y$=v$)))}catch(e){}_we.exports=y$});var I$=A((LUr,Iwe)=>{"use strict";var E$=or(),S$=At(),Ewe=DM(),GAt=Ow(),HAt=Rw(),WAt=c$(),bwe=b$(),x$=ML(),$At=E$.structuredClone,Swe=E$.ArrayBuffer,w$=E$.DataView,ZAt=Math.min,T$=Swe.prototype,Twe=w$.prototype,YAt=S$(T$.slice),xwe=Ewe(T$,"resizable","get"),wwe=Ewe(T$,"maxByteLength","get"),KAt=S$(Twe.getInt8),XAt=S$(Twe.setInt8);Iwe.exports=(x$||bwe)&&function(e,t,r){var n=WAt(e),o=t===void 0?n:GAt(t),i=!xwe||!xwe(e),a;if(HAt(e),x$&&(e=$At(e,{transfer:[e]}),n===o&&(r||i)))return e;if(n>=o&&(!r||i))a=YAt(e,0,o);else{var u=r&&!i&&wwe?{maxByteLength:wwe(e)}:void 0;a=new Swe(o,u);for(var d=new w$(e),h=new w$(a),v=ZAt(o,n),b=0;b<v;b++)XAt(h,b,KAt(d,b))}return x$||bwe(e),a}});var M$=A(()=>{"use strict";var QAt=ce(),Mwe=I$();Mwe&&QAt({target:"ArrayBuffer",proto:!0},{transfer:function(){return Mwe(this,arguments.length?arguments[0]:void 0,!0)}})});var C$=A(()=>{"use strict";var JAt=ce(),Cwe=I$();Cwe&&JAt({target:"ArrayBuffer",proto:!0},{transferToFixedLength:function(){return Cwe(this,arguments.length?arguments[0]:void 0,!1)}})});var Awe=A(()=>{"use strict";var eOt=ce(),tOt=At(),rOt=Vt(),nOt=rOt(function(){return new Date(16e11).getYear()!==120}),oOt=tOt(Date.prototype.getFullYear);eOt({target:"Date",proto:!0,forced:nOt},{getYear:function(){return oOt(this)-1900}})});var Pwe=A(()=>{"use strict";var iOt=ce(),aOt=At(),Owe=Date,sOt=aOt(Owe.prototype.getTime);iOt({target:"Date",stat:!0},{now:function(){return sOt(new Owe)}})});var Lwe=A(()=>{"use strict";var lOt=ce(),Nwe=At(),uOt=Bi(),Dwe=Date.prototype,cOt=Nwe(Dwe.getTime),pOt=Nwe(Dwe.setFullYear);lOt({target:"Date",proto:!0},{setYear:function(t){cOt(this);var r=uOt(t),n=r>=0&&r<=99?r+1900:r;return pOt(this,n)}})});var kwe=A(()=>{"use strict";var fOt=ce();fOt({target:"Date",proto:!0},{toGMTString:Date.prototype.toUTCString})});var $M=A(($Ur,Rwe)=>{"use strict";var dOt=Bi(),hOt=wn(),mOt=Ci(),gOt=RangeError;Rwe.exports=function(t){var r=hOt(mOt(this)),n="",o=dOt(t);if(o<0||o===1/0)throw new gOt("Wrong number of repetitions");for(;o>0;(o>>>=1)&&(r+=r))o&1&&(n+=r);return n}});var ZM=A((ZUr,Fwe)=>{"use strict";var zwe=At(),vOt=fc(),jwe=wn(),yOt=$M(),_Ot=Ci(),bOt=zwe(yOt),xOt=zwe("".slice),wOt=Math.ceil,qwe=function(e){return function(t,r,n){var o=jwe(_Ot(t)),i=vOt(r),a=o.length,u=n===void 0?" ":jwe(n),d,h;return i<=a||u===""?o:(d=i-a,h=bOt(u,wOt(d/u.length)),h.length>d&&(h=xOt(h,0,d)),e?o+h:h+o)}};Fwe.exports={start:qwe(!1),end:qwe(!0)}});var Vwe=A((YUr,Bwe)=>{"use strict";var cy=At(),Uwe=Vt(),Q1=ZM().start,EOt=RangeError,SOt=isFinite,TOt=Math.abs,tg=Date.prototype,A$=tg.toISOString,IOt=cy(tg.getTime),MOt=cy(tg.getUTCDate),COt=cy(tg.getUTCFullYear),AOt=cy(tg.getUTCHours),OOt=cy(tg.getUTCMilliseconds),POt=cy(tg.getUTCMinutes),NOt=cy(tg.getUTCMonth),DOt=cy(tg.getUTCSeconds);Bwe.exports=Uwe(function(){return A$.call(new Date(-5e13-1))!=="0385-07-25T07:06:39.999Z"})||!Uwe(function(){A$.call(new Date(NaN))})?function(){if(!SOt(IOt(this)))throw new EOt("Invalid time value");var t=this,r=COt(t),n=OOt(t),o=r<0?"-":r>9999?"+":"";return o+Q1(TOt(r),o?6:4,0)+"-"+Q1(NOt(t)+1,2,0)+"-"+Q1(MOt(t),2,0)+"T"+Q1(AOt(t),2,0)+":"+Q1(POt(t),2,0)+":"+Q1(DOt(t),2,0)+"."+Q1(n,3,0)+"Z"}:A$});var Hwe=A(()=>{"use strict";var LOt=ce(),Gwe=Vwe();LOt({target:"Date",proto:!0,forced:Date.prototype.toISOString!==Gwe},{toISOString:Gwe})});var Wwe=A(()=>{"use strict";var kOt=ce(),ROt=Vt(),jOt=Zn(),qOt=yM(),zOt=ROt(function(){return new Date(NaN).toJSON()!==null||Date.prototype.toJSON.call({toISOString:function(){return 1}})!==1});kOt({target:"Date",proto:!0,arity:1,forced:zOt},{toJSON:function(t){var r=jOt(this),n=qOt(r,"number");return typeof n=="number"&&!isFinite(n)?null:r.toISOString()}})});var Zwe=A((eBr,$we)=>{"use strict";var FOt=ur(),UOt=eH(),BOt=TypeError;$we.exports=function(e){if(FOt(this),e==="string"||e==="default")e="string";else if(e!=="number")throw new BOt("Incorrect hint");return UOt(this,e)}});var Xwe=A(()=>{"use strict";var VOt=Fn(),GOt=Xo(),HOt=Zwe(),WOt=on(),Ywe=WOt("toPrimitive"),Kwe=Date.prototype;VOt(Kwe,Ywe)||GOt(Kwe,Ywe,HOt)});var tEe=A(()=>{"use strict";var Jwe=At(),$Ot=Xo(),O$=Date.prototype,Qwe="Invalid Date",eEe="toString",ZOt=Jwe(O$[eEe]),YOt=Jwe(O$.getTime);String(new Date(NaN))!==Qwe&&$Ot(O$,eEe,function(){var t=YOt(this);return t===t?ZOt(this):Qwe})});var nEe=A(()=>{"use strict";var KOt=ce(),YM=At(),XOt=wn(),QOt=YM("".charAt),JOt=YM("".charCodeAt),e4t=YM(/./.exec),t4t=YM(1 .toString),r4t=YM("".toUpperCase),n4t=/[\w*+\-./@]/,rEe=function(e,t){for(var r=t4t(e,16);r.length<t;)r="0"+r;return r};KOt({global:!0},{escape:function(t){for(var r=XOt(t),n="",o=r.length,i=0,a,u;i<o;)a=QOt(r,i++),e4t(n4t,a)?n+=a:(u=JOt(a,0),u<256?n+="%"+rEe(u,2):n+="%u"+r4t(rEe(u,4)));return n}})});var N$=A((sBr,sEe)=>{"use strict";var iEe=At(),o4t=cn(),i4t=Qr(),a4t=Fn(),oEe=dc(),s4t=_w(),aEe=Function,l4t=iEe([].concat),u4t=iEe([].join),P$={},c4t=function(e,t,r){if(!a4t(P$,t)){for(var n=[],o=0;o<t;o++)n[o]="a["+o+"]";P$[t]=aEe("C,a","return new C("+u4t(n,",")+")")}return P$[t](e,r)};sEe.exports=s4t?aEe.bind:function(t){var r=o4t(this),n=r.prototype,o=oEe(arguments,1),i=function(){var u=l4t(o,oEe(arguments));return this instanceof i?c4t(r,u.length,u):r.apply(t,u)};return i4t(n)&&(i.prototype=n),i}});var uEe=A(()=>{"use strict";var p4t=ce(),lEe=N$();p4t({target:"Function",proto:!0,forced:Function.bind!==lEe},{bind:lEe})});var fEe=A(()=>{"use strict";var f4t=Nn(),cEe=Qr(),d4t=_i(),h4t=vl(),m4t=on(),g4t=EM(),D$=m4t("hasInstance"),pEe=Function.prototype;D$ in pEe||d4t.f(pEe,D$,{value:g4t(function(e){if(!f4t(this)||!cEe(e))return!1;var t=this.prototype;return cEe(t)?h4t(t,e):e instanceof this},D$)})});var gEe=A(()=>{"use strict";var v4t=Hr(),y4t=F1().EXISTS,dEe=At(),_4t=Vi(),hEe=Function.prototype,b4t=dEe(hEe.toString),mEe=/function\b(?:\s|\/\*[\S\s]*?\*\/|\/\/[^\n\r]*[\n\r]+)*([^\s(/]*)/,x4t=dEe(mEe.exec),w4t="name";v4t&&!y4t&&_4t(hEe,w4t,{configurable:!0,get:function(){try{return x4t(mEe,b4t(this))[1]}catch(e){return""}}})});var k$=A(()=>{"use strict";var E4t=ce(),L$=or();E4t({global:!0,forced:L$.globalThis!==L$},{globalThis:L$})});var F$=A(()=>{"use strict";var S4t=ce(),T4t=or(),I4t=Jl(),M4t=ur(),C4t=Nn(),A4t=ps(),O4t=Vi(),P4t=qp(),N4t=Vt(),q$=Fn(),D4t=on(),vh=ry().IteratorPrototype,L4t=Hr(),k4t=To(),R$="constructor",yEe="Iterator",vEe=D4t("toStringTag"),_Ee=TypeError,j$=T4t[yEe],bEe=k4t||!C4t(j$)||j$.prototype!==vh||!N4t(function(){j$({})}),z$=function(){if(I4t(this,vh),A4t(this)===vh)throw new _Ee("Abstract class Iterator not directly constructable")},xEe=function(e,t){L4t?O4t(vh,e,{configurable:!0,get:function(){return t},set:function(r){if(M4t(this),this===vh)throw new _Ee("You can't redefine this property");q$(this,e)?this[e]=r:P4t(this,e,r)}}):vh[e]=t};q$(vh,vEe)||xEe(vEe,yEe);(bEe||!q$(vh,R$)||vh[R$]===Object)&&xEe(R$,z$);z$.prototype=vh;S4t({global:!0,constructor:!0,forced:bEe},{Iterator:z$})});var ea=A((yBr,wEe)=>{"use strict";wEe.exports=function(e){return{iterator:e,next:e.next,done:!1}}});var jw=A((_Br,EEe)=>{"use strict";var R4t=RangeError;EEe.exports=function(e){if(e===e)return e;throw new R4t("NaN is not allowed")}});var qw=A((bBr,SEe)=>{"use strict";var j4t=Bi(),q4t=RangeError;SEe.exports=function(e){var t=j4t(e);if(t<0)throw new q4t("The argument can't be less than 0");return t}});var py=A((xBr,OEe)=>{"use strict";var z4t=ir(),F4t=Oa(),U4t=cs(),B4t=Fp(),V4t=on(),TEe=Bo(),G4t=Aa(),H4t=ry().IteratorPrototype,OL=Cs(),U$=Gs(),W4t=V4t("toStringTag"),IEe="IteratorHelper",MEe="WrapForValidIterator",$4t=TEe.set,CEe=function(e){var t=TEe.getterFor(e?MEe:IEe);return B4t(F4t(H4t),{next:function(){var n=t(this);if(e)return n.nextHandler();if(n.done)return OL(void 0,!0);try{var o=n.nextHandler();return n.returnHandlerResult?o:OL(o,n.done)}catch(i){throw n.done=!0,i}},return:function(){var r=t(this),n=r.iterator;if(r.done=!0,e){var o=G4t(n,"return");return o?z4t(o,n):OL(void 0,!0)}if(r.inner)try{U$(r.inner.iterator,"normal")}catch(i){return U$(n,"throw",i)}return n&&U$(n,"normal"),OL(void 0,!0)}})},Z4t=CEe(!0),AEe=CEe(!1);U4t(AEe,W4t,"Iterator Helper");OEe.exports=function(e,t,r){var n=function(i,a){a?(a.iterator=i.iterator,a.next=i.next):a=i,a.type=t?MEe:IEe,a.returnHandlerResult=!!r,a.nextHandler=e,a.counter=0,a.done=!1,$4t(this,a)};return n.prototype=t?Z4t:AEe,n}});var od=A((wBr,PEe)=>{"use strict";var Y4t=or();PEe.exports=function(e,t){var r=Y4t.Iterator,n=r&&r.prototype,o=n&&n[e],i=!1;if(o)try{o.call({next:function(){return{done:!0}},return:function(){i=!0}},-1)}catch(a){a instanceof t||(i=!1)}if(!i)return o}});var H$=A(()=>{"use strict";var K4t=ce(),V$=ir(),G$=ur(),X4t=ea(),Q4t=jw(),J4t=qw(),ePt=Gs(),tPt=py(),rPt=od(),NEe=To(),B$=!NEe&&rPt("drop",RangeError),nPt=tPt(function(){for(var e=this.iterator,t=this.next,r,n;this.remaining;)if(this.remaining--,r=G$(V$(t,e)),n=this.done=!!r.done,n)return;if(r=G$(V$(t,e)),n=this.done=!!r.done,!n)return r.value});K4t({target:"Iterator",proto:!0,real:!0,forced:NEe||B$},{drop:function(t){G$(this);var r;try{r=J4t(Q4t(+t))}catch(n){ePt(this,"throw",n)}return B$?V$(B$,this,r):new nPt(X4t(this),{remaining:r})}})});var $$=A(()=>{"use strict";var oPt=ce(),iPt=ir(),aPt=ca(),sPt=cn(),lPt=ur(),uPt=ea(),cPt=Gs(),pPt=od(),W$=pPt("every",TypeError);oPt({target:"Iterator",proto:!0,real:!0,forced:W$},{every:function(t){lPt(this);try{sPt(t)}catch(o){cPt(this,"throw",o)}if(W$)return iPt(W$,this,t);var r=uPt(this),n=0;return!aPt(r,function(o,i){if(!t(o,n++))return i()},{IS_RECORD:!0,INTERRUPTED:!0}).stopped}})});var Y$=A(()=>{"use strict";var fPt=ce(),DEe=ir(),dPt=cn(),LEe=ur(),hPt=ea(),mPt=py(),gPt=aL(),kEe=To(),vPt=Gs(),yPt=od(),Z$=!kEe&&yPt("filter",TypeError),_Pt=mPt(function(){for(var e=this.iterator,t=this.predicate,r=this.next,n,o,i;;){if(n=LEe(DEe(r,e)),o=this.done=!!n.done,o)return;if(i=n.value,gPt(e,t,[i,this.counter++],!0))return i}});fPt({target:"Iterator",proto:!0,real:!0,forced:kEe||Z$},{filter:function(t){LEe(this);try{dPt(t)}catch(r){vPt(this,"throw",r)}return Z$?DEe(Z$,this,t):new _Pt(hPt(this),{predicate:t})}})});var X$=A(()=>{"use strict";var bPt=ce(),xPt=ir(),wPt=ca(),EPt=cn(),SPt=ur(),TPt=ea(),IPt=Gs(),MPt=od(),K$=MPt("find",TypeError);bPt({target:"Iterator",proto:!0,real:!0,forced:K$},{find:function(t){SPt(this);try{EPt(t)}catch(o){IPt(this,"throw",o)}if(K$)return xPt(K$,this,t);var r=TPt(this),n=0;return wPt(r,function(o,i){if(t(o,n++))return i(o)},{IS_RECORD:!0,INTERRUPTED:!0}).result}})});var Q$=A((PBr,jEe)=>{"use strict";var CPt=ir(),REe=ur(),APt=ea(),OPt=hh();jEe.exports=function(e,t){(!t||typeof e!="string")&&REe(e);var r=OPt(e);return APt(REe(r!==void 0?CPt(r,e):e))}});var nZ=A(()=>{"use strict";var PPt=ce(),eZ=ir(),NPt=cn(),tZ=ur(),DPt=ea(),LPt=Q$(),kPt=py(),rZ=Gs(),qEe=To(),RPt=od(),J$=!qEe&&RPt("flatMap",TypeError),jPt=kPt(function(){for(var e=this.iterator,t=this.mapper,r,n;;){if(n=this.inner)try{if(r=tZ(eZ(n.next,n.iterator)),!r.done)return r.value;this.inner=null}catch(o){rZ(e,"throw",o)}if(r=tZ(eZ(this.next,e)),this.done=!!r.done)return;try{this.inner=LPt(t(r.value,this.counter++),!1)}catch(o){rZ(e,"throw",o)}}});PPt({target:"Iterator",proto:!0,real:!0,forced:qEe||J$},{flatMap:function(t){tZ(this);try{NPt(t)}catch(r){rZ(this,"throw",r)}return J$?eZ(J$,this,t):new jPt(DPt(this),{mapper:t,inner:null})}})});var iZ=A(()=>{"use strict";var qPt=ce(),zPt=ir(),FPt=ca(),UPt=cn(),BPt=ur(),VPt=ea(),GPt=Gs(),HPt=od(),oZ=HPt("forEach",TypeError);qPt({target:"Iterator",proto:!0,real:!0,forced:oZ},{forEach:function(t){BPt(this);try{UPt(t)}catch(o){GPt(this,"throw",o)}if(oZ)return zPt(oZ,this,t);var r=VPt(this),n=0;FPt(r,function(o){t(o,n++)},{IS_RECORD:!0})}})});var aZ=A(()=>{"use strict";var WPt=ce(),$Pt=ir(),ZPt=Zn(),YPt=vl(),KPt=ry().IteratorPrototype,XPt=py(),QPt=Q$(),JPt=To(),eNt=XPt(function(){return $Pt(this.next,this.iterator)},!0);WPt({target:"Iterator",stat:!0,forced:JPt},{from:function(t){var r=QPt(typeof t=="string"?ZPt(t):t,!0);return YPt(KPt,r.iterator)?r.iterator:new eNt(r)}})});var PL=A(()=>{"use strict";var tNt=ce(),zEe=ir(),rNt=cn(),FEe=ur(),nNt=ea(),oNt=py(),iNt=aL(),aNt=Gs(),sNt=od(),UEe=To(),sZ=!UEe&&sNt("map",TypeError),lNt=oNt(function(){var e=this.iterator,t=FEe(zEe(this.next,e)),r=this.done=!!t.done;if(!r)return iNt(e,this.mapper,[t.value,this.counter++],!0)});tNt({target:"Iterator",proto:!0,real:!0,forced:UEe||sZ},{map:function(t){FEe(this);try{rNt(t)}catch(r){aNt(this,"throw",r)}return sZ?zEe(sZ,this,t):new lNt(nNt(this),{mapper:t})}})});var uZ=A(()=>{"use strict";var uNt=ce(),cNt=ca(),pNt=cn(),fNt=ur(),dNt=ea(),hNt=Gs(),mNt=od(),gNt=yl(),vNt=Vt(),BEe=TypeError,VEe=vNt(function(){[].keys().reduce(function(){},void 0)}),lZ=!VEe&&mNt("reduce",BEe);uNt({target:"Iterator",proto:!0,real:!0,forced:VEe||lZ},{reduce:function(t){fNt(this);try{pNt(t)}catch(a){hNt(this,"throw",a)}var r=arguments.length<2,n=r?void 0:arguments[1];if(lZ)return gNt(lZ,this,r?[t]:[t,n]);var o=dNt(this),i=0;if(cNt(o,function(a){r?(r=!1,n=a):n=t(n,a,i),i++},{IS_RECORD:!0}),r)throw new BEe("Reduce of empty iterator with no initial value");return n}})});var pZ=A(()=>{"use strict";var yNt=ce(),_Nt=ir(),bNt=ca(),xNt=cn(),wNt=ur(),ENt=ea(),SNt=Gs(),TNt=od(),cZ=TNt("some",TypeError);yNt({target:"Iterator",proto:!0,real:!0,forced:cZ},{some:function(t){wNt(this);try{xNt(t)}catch(o){SNt(this,"throw",o)}if(cZ)return _Nt(cZ,this,t);var r=ENt(this),n=0;return bNt(r,function(o,i){if(t(o,n++))return i()},{IS_RECORD:!0,INTERRUPTED:!0}).stopped}})});var dZ=A(()=>{"use strict";var INt=ce(),GEe=ir(),HEe=ur(),MNt=ea(),CNt=jw(),ANt=qw(),ONt=py(),WEe=Gs(),PNt=od(),$Ee=To(),fZ=!$Ee&&PNt("take",RangeError),NNt=ONt(function(){var e=this.iterator;if(!this.remaining--)return this.done=!0,WEe(e,"normal",void 0);var t=HEe(GEe(this.next,e)),r=this.done=!!t.done;if(!r)return t.value});INt({target:"Iterator",proto:!0,real:!0,forced:$Ee||fZ},{take:function(t){HEe(this);var r;try{r=ANt(CNt(+t))}catch(n){WEe(this,"throw",n)}return fZ?GEe(fZ,this,r):new NNt(MNt(this),{remaining:r})}})});var hZ=A(()=>{"use strict";var DNt=ce(),LNt=ur(),kNt=ca(),RNt=ea(),jNt=[].push;DNt({target:"Iterator",proto:!0,real:!0},{toArray:function(){var t=[];return kNt(RNt(LNt(this)),jNt,{that:t,IS_RECORD:!0}),t}})});var ZEe=A(()=>{"use strict";var qNt=or(),zNt=Pu();zNt(qNt.JSON,"JSON",!0)});var NL=A((KBr,YEe)=>{"use strict";var FNt=Vt();YEe.exports=FNt(function(){if(typeof ArrayBuffer=="function"){var e=new ArrayBuffer(8);Object.isExtensible(e)&&Object.defineProperty(e,"a",{value:8})}})});var LL=A((XBr,XEe)=>{"use strict";var UNt=Vt(),BNt=Qr(),VNt=gl(),KEe=NL(),DL=Object.isExtensible,GNt=UNt(function(){DL(1)});XEe.exports=GNt||KEe?function(t){return!BNt(t)||KEe&&VNt(t)==="ArrayBuffer"?!1:DL?DL(t):!0}:DL});var rg=A((QBr,QEe)=>{"use strict";var HNt=Vt();QEe.exports=!HNt(function(){return Object.isExtensible(Object.preventExtensions({}))})});var fy=A((JBr,tSe)=>{"use strict";var WNt=ce(),$Nt=At(),ZNt=xw(),YNt=Qr(),mZ=Fn(),KNt=_i().f,JEe=Yv(),XNt=U5(),gZ=LL(),QNt=Zv(),JNt=rg(),eSe=!1,ng=QNt("meta"),eDt=0,vZ=function(e){KNt(e,ng,{value:{objectID:"O"+eDt++,weakData:{}}})},tDt=function(e,t){if(!YNt(e))return typeof e=="symbol"?e:(typeof e=="string"?"S":"P")+e;if(!mZ(e,ng)){if(!gZ(e))return"F";if(!t)return"E";vZ(e)}return e[ng].objectID},rDt=function(e,t){if(!mZ(e,ng)){if(!gZ(e))return!0;if(!t)return!1;vZ(e)}return e[ng].weakData},nDt=function(e){return JNt&&eSe&&gZ(e)&&!mZ(e,ng)&&vZ(e),e},oDt=function(){iDt.enable=function(){},eSe=!0;var e=JEe.f,t=$Nt([].splice),r={};r[ng]=1,e(r).length&&(JEe.f=function(n){for(var o=e(n),i=0,a=o.length;i<a;i++)if(o[i]===ng){t(o,i,1);break}return o},WNt({target:"Object",stat:!0,forced:!0},{getOwnPropertyNames:XNt.f}))},iDt=tSe.exports={enable:oDt,fastKey:tDt,getWeakData:rDt,onFreeze:nDt};ZNt[ng]=!0});var KM=A((eVr,nSe)=>{"use strict";var aDt=ce(),sDt=or(),lDt=At(),rSe=Ew(),uDt=Xo(),cDt=fy(),pDt=ca(),fDt=Jl(),dDt=Nn(),hDt=pc(),yZ=Qr(),_Z=Vt(),mDt=RM(),gDt=Pu(),vDt=Jv();nSe.exports=function(e,t,r){var n=e.indexOf("Map")!==-1,o=e.indexOf("Weak")!==-1,i=n?"set":"add",a=sDt[e],u=a&&a.prototype,d=a,h={},v=function(R){var q=lDt(u[R]);uDt(u,R,R==="add"?function(G){return q(this,G===0?0:G),this}:R==="delete"?function(B){return o&&!yZ(B)?!1:q(this,B===0?0:B)}:R==="get"?function(G){return o&&!yZ(G)?void 0:q(this,G===0?0:G)}:R==="has"?function(G){return o&&!yZ(G)?!1:q(this,G===0?0:G)}:function(G,re){return q(this,G===0?0:G,re),this})},b=rSe(e,!dDt(a)||!(o||u.forEach&&!_Z(function(){new a().entries().next()})));if(b)d=r.getConstructor(t,e,n,i),cDt.enable();else if(rSe(e,!0)){var x=new d,M=x[i](o?{}:-0,1)!==x,O=_Z(function(){x.has(1)}),D=mDt(function(R){new a(R)}),k=!o&&_Z(function(){for(var R=new a,q=5;q--;)R[i](q,q);return!R.has(-0)});D||(d=t(function(R,q){fDt(R,u);var B=vDt(new a,R,d);return hDt(q)||pDt(q,B[i],{that:B,AS_ENTRIES:n}),B}),d.prototype=u,u.constructor=d),(O||k)&&(v("delete"),v("has"),n&&v("get")),(k||M)&&v(i),o&&u.clear&&delete u.clear}return h[e]=d,aDt({global:!0,constructor:!0,forced:d!==a},h),gDt(d,e),o||r.setStrong(d,e,n),d}});var xZ=A((tVr,uSe)=>{"use strict";var oSe=Oa(),yDt=Vi(),iSe=Fp(),_Dt=ai(),bDt=Jl(),xDt=pc(),wDt=ca(),EDt=uL(),kL=Cs(),SDt=iy(),XM=Hr(),aSe=fy().fastKey,lSe=Bo(),sSe=lSe.set,bZ=lSe.getterFor;uSe.exports={getConstructor:function(e,t,r,n){var o=e(function(h,v){bDt(h,i),sSe(h,{type:t,index:oSe(null),first:null,last:null,size:0}),XM||(h.size=0),xDt(v)||wDt(v,h[n],{that:h,AS_ENTRIES:r})}),i=o.prototype,a=bZ(t),u=function(h,v,b){var x=a(h),M=d(h,v),O,D;return M?M.value=b:(x.last=M={index:D=aSe(v,!0),key:v,value:b,previous:O=x.last,next:null,removed:!1},x.first||(x.first=M),O&&(O.next=M),XM?x.size++:h.size++,D!=="F"&&(x.index[D]=M)),h},d=function(h,v){var b=a(h),x=aSe(v),M;if(x!=="F")return b.index[x];for(M=b.first;M;M=M.next)if(M.key===v)return M};return iSe(i,{clear:function(){for(var v=this,b=a(v),x=b.first;x;)x.removed=!0,x.previous&&(x.previous=x.previous.next=null),x=x.next;b.first=b.last=null,b.index=oSe(null),XM?b.size=0:v.size=0},delete:function(h){var v=this,b=a(v),x=d(v,h);if(x){var M=x.next,O=x.previous;delete b.index[x.index],x.removed=!0,O&&(O.next=M),M&&(M.previous=O),b.first===x&&(b.first=M),b.last===x&&(b.last=O),XM?b.size--:v.size--}return!!x},forEach:function(v){for(var b=a(this),x=_Dt(v,arguments.length>1?arguments[1]:void 0),M;M=M?M.next:b.first;)for(x(M.value,M.key,this);M&&M.removed;)M=M.previous},has:function(v){return!!d(this,v)}}),iSe(i,r?{get:function(v){var b=d(this,v);return b&&b.value},set:function(v,b){return u(this,v===0?0:v,b)}}:{add:function(v){return u(this,v=v===0?0:v,v)}}),XM&&yDt(i,"size",{configurable:!0,get:function(){return a(this).size}}),o},setStrong:function(e,t,r){var n=t+" Iterator",o=bZ(t),i=bZ(n);EDt(e,t,function(a,u){sSe(this,{type:n,target:a,state:o(a),kind:u,last:null})},function(){for(var a=i(this),u=a.kind,d=a.last;d&&d.removed;)d=d.previous;return!a.target||!(a.last=d=d?d.next:a.state.first)?(a.target=null,kL(void 0,!0)):kL(u==="keys"?d.key:u==="values"?d.value:[d.key,d.value],!1)},r?"entries":"values",!r,!0),SDt(t)}}});var cSe=A(()=>{"use strict";var TDt=KM(),IDt=xZ();TDt("Map",function(e){return function(){return e(this,arguments.length?arguments[0]:void 0)}},IDt)});var RL=A(()=>{"use strict";cSe()});var As=A((aVr,pSe)=>{"use strict";var jL=At(),QM=Map.prototype;pSe.exports={Map,set:jL(QM.set),get:jL(QM.get),has:jL(QM.has),remove:jL(QM.delete),proto:QM}});var wZ=A(()=>{"use strict";var MDt=ce(),CDt=At(),ADt=cn(),ODt=Ci(),PDt=ca(),qL=As(),fSe=To(),NDt=Vt(),dSe=qL.Map,DDt=qL.has,LDt=qL.get,kDt=qL.set,RDt=CDt([].push),jDt=fSe||NDt(function(){return dSe.groupBy("ab",function(e){return e}).get("a").length!==1});MDt({target:"Map",stat:!0,forced:fSe||jDt},{groupBy:function(t,r){ODt(t),ADt(r);var n=new dSe,o=0;return PDt(t,function(i){var a=r(i,o++);DDt(n,a)?RDt(LDt(n,a),i):kDt(n,a,[i])}),n}})});var EZ=A((uVr,hSe)=>{"use strict";var qDt=Math.log;hSe.exports=Math.log1p||function(t){var r=+t;return r>-1e-8&&r<1e-8?r-r*r/2:qDt(1+r)}});var gSe=A(()=>{"use strict";var zDt=ce(),FDt=EZ(),SZ=Math.acosh,UDt=Math.log,mSe=Math.sqrt,BDt=Math.LN2,VDt=!SZ||Math.floor(SZ(Number.MAX_VALUE))!==710||SZ(1/0)!==1/0;zDt({target:"Math",stat:!0,forced:VDt},{acosh:function(t){var r=+t;return r<1?NaN:r>94906265.62425156?UDt(r)+BDt:FDt(r-1+mSe(r-1)*mSe(r+1))}})});var _Se=A(()=>{"use strict";var GDt=ce(),vSe=Math.asinh,HDt=Math.log,WDt=Math.sqrt;function ySe(e){var t=+e;return!isFinite(t)||t===0?t:t<0?-ySe(-t):HDt(t+WDt(t*t+1))}var $Dt=!(vSe&&1/vSe(0)>0);GDt({target:"Math",stat:!0,forced:$Dt},{asinh:ySe})});var xSe=A(()=>{"use strict";var ZDt=ce(),bSe=Math.atanh,YDt=Math.log,KDt=!(bSe&&1/bSe(-0)<0);ZDt({target:"Math",stat:!0,forced:KDt},{atanh:function(t){var r=+t;return r===0?r:YDt((1+r)/(1-r))/2}})});var wSe=A(()=>{"use strict";var XDt=ce(),QDt=mL(),JDt=Math.abs,e5t=Math.pow;XDt({target:"Math",stat:!0},{cbrt:function(t){var r=+t;return QDt(r)*e5t(JDt(r),1/3)}})});var ESe=A(()=>{"use strict";var t5t=ce(),r5t=Math.floor,n5t=Math.log,o5t=Math.LOG2E;t5t({target:"Math",stat:!0},{clz32:function(t){var r=t>>>0;return r?31-r5t(n5t(r+.5)*o5t):32}})});var eC=A((bVr,SSe)=>{"use strict";var JM=Math.expm1,i5t=Math.exp;SSe.exports=!JM||JM(10)>22025.465794806718||JM(10)<22025.465794806718||JM(-2e-17)!==-2e-17?function(t){var r=+t;return r===0?r:r>-1e-6&&r<1e-6?r+r*r/2:i5t(r)-1}:JM});var ISe=A(()=>{"use strict";var a5t=ce(),s5t=eC(),TSe=Math.cosh,l5t=Math.abs,TZ=Math.E,u5t=!TSe||TSe(710)===1/0;a5t({target:"Math",stat:!0,forced:u5t},{cosh:function(t){var r=s5t(l5t(t)-1)+1;return(r+1/(r*TZ*TZ))*(TZ/2)}})});var CSe=A(()=>{"use strict";var c5t=ce(),MSe=eC();c5t({target:"Math",stat:!0,forced:MSe!==Math.expm1},{expm1:MSe})});var ASe=A(()=>{"use strict";var p5t=ce(),f5t=gL();p5t({target:"Math",stat:!0},{fround:f5t})});var IZ=A(()=>{"use strict";var d5t=ce(),h5t=UW(),m5t=.0009765625,g5t=65504,v5t=6103515625e-14;d5t({target:"Math",stat:!0},{f16round:function(t){return h5t(t,m5t,g5t,v5t)}})});var PSe=A(()=>{"use strict";var y5t=ce(),OSe=Math.hypot,_5t=Math.abs,b5t=Math.sqrt,x5t=!!OSe&&OSe(1/0,NaN)!==1/0;y5t({target:"Math",stat:!0,arity:2,forced:x5t},{hypot:function(t,r){for(var n=0,o=0,i=arguments.length,a=0,u,d;o<i;)u=_5t(arguments[o++]),a<u?(d=a/u,n=n*d*d+1,a=u):u>0?(d=u/a,n+=d*d):n+=u;return a===1/0?1/0:a*b5t(n)}})});var DSe=A(()=>{"use strict";var w5t=ce(),E5t=Vt(),NSe=Math.imul,S5t=E5t(function(){return NSe(4294967295,5)!==-5||NSe.length!==2});w5t({target:"Math",stat:!0,forced:S5t},{imul:function(t,r){var n=65535,o=+t,i=+r,a=n&o,u=n&i;return 0|a*u+((n&o>>>16)*u+a*(n&i>>>16)<<16>>>0)}})});var MZ=A((DVr,LSe)=>{"use strict";var T5t=Math.log,I5t=Math.LOG10E;LSe.exports=Math.log10||function(t){return T5t(t)*I5t}});var kSe=A(()=>{"use strict";var M5t=ce(),C5t=MZ();M5t({target:"Math",stat:!0},{log10:C5t})});var RSe=A(()=>{"use strict";var A5t=ce(),O5t=EZ();A5t({target:"Math",stat:!0},{log1p:O5t})});var jSe=A(()=>{"use strict";var P5t=ce(),N5t=s$();P5t({target:"Math",stat:!0},{log2:N5t})});var qSe=A(()=>{"use strict";var D5t=ce(),L5t=mL();D5t({target:"Math",stat:!0},{sign:L5t})});var USe=A(()=>{"use strict";var k5t=ce(),R5t=Vt(),zSe=eC(),j5t=Math.abs,FSe=Math.exp,q5t=Math.E,z5t=R5t(function(){return Math.sinh(-2e-17)!==-2e-17});k5t({target:"Math",stat:!0,forced:z5t},{sinh:function(t){var r=+t;return j5t(r)<1?(zSe(r)-zSe(-r))/2:(FSe(r-1)-FSe(-r-1))*(q5t/2)}})});var GSe=A(()=>{"use strict";var F5t=ce(),BSe=eC(),VSe=Math.exp;F5t({target:"Math",stat:!0},{tanh:function(t){var r=+t,n=BSe(r),o=BSe(-r);return n===1/0?1:o===1/0?-1:(n-o)/(VSe(r)+VSe(-r))}})});var HSe=A(()=>{"use strict";var U5t=Pu();U5t(Math,"Math",!0)});var WSe=A(()=>{"use strict";var B5t=ce(),V5t=yH();B5t({target:"Math",stat:!0},{trunc:V5t})});var tC=A((KVr,$Se)=>{"use strict";var G5t=At();$Se.exports=G5t(1 .valueOf)});var J1=A((XVr,ZSe)=>{"use strict";ZSe.exports=`	
\v\f\r \xA0\u1680\u2000\u2001\u2002\u2003\u2004\u2005\u2006\u2007\u2008\u2009\u200A\u202F\u205F\u3000\u2028\u2029\uFEFF`});var e_=A((QVr,KSe)=>{"use strict";var H5t=At(),W5t=Ci(),$5t=wn(),AZ=J1(),YSe=H5t("".replace),Z5t=RegExp("^["+AZ+"]+"),Y5t=RegExp("(^|[^"+AZ+"])["+AZ+"]+$"),CZ=function(e){return function(t){var r=$5t(W5t(t));return e&1&&(r=YSe(r,Z5t,"")),e&2&&(r=YSe(r,Y5t,"$1")),r}};KSe.exports={start:CZ(1),end:CZ(2),trim:CZ(3)}});var n2e=A(()=>{"use strict";var K5t=ce(),OZ=To(),X5t=Hr(),JSe=or(),PZ=B5(),e2e=At(),Q5t=Ew(),XSe=Fn(),J5t=Jv(),eLt=vl(),tLt=Wm(),t2e=yM(),rLt=Vt(),nLt=Yv().f,oLt=Bs().f,iLt=_i().f,aLt=tC(),sLt=e_().trim,rC="Number",zw=JSe[rC],QSe=PZ[rC],NZ=zw.prototype,lLt=JSe.TypeError,uLt=e2e("".slice),zL=e2e("".charCodeAt),cLt=function(e){var t=t2e(e,"number");return typeof t=="bigint"?t:pLt(t)},pLt=function(e){var t=t2e(e,"number"),r,n,o,i,a,u,d,h;if(tLt(t))throw new lLt("Cannot convert a Symbol value to a number");if(typeof t=="string"&&t.length>2){if(t=sLt(t),r=zL(t,0),r===43||r===45){if(n=zL(t,2),n===88||n===120)return NaN}else if(r===48){switch(zL(t,1)){case 66:case 98:o=2,i=49;break;case 79:case 111:o=8,i=55;break;default:return+t}for(a=uLt(t,2),u=a.length,d=0;d<u;d++)if(h=zL(a,d),h<48||h>i)return NaN;return parseInt(a,o)}}return+t},DZ=Q5t(rC,!zw(" 0o1")||!zw("0b1")||zw("+0x1")),fLt=function(e){return eLt(NZ,e)&&rLt(function(){aLt(e)})},FL=function(t){var r=arguments.length<1?0:zw(cLt(t));return fLt(this)?J5t(Object(r),this,FL):r};FL.prototype=NZ;DZ&&!OZ&&(NZ.constructor=FL);K5t({global:!0,constructor:!0,wrap:!0,forced:DZ},{Number:FL});var r2e=function(e,t){for(var r=X5t?nLt(t):"MAX_VALUE,MIN_VALUE,NaN,NEGATIVE_INFINITY,POSITIVE_INFINITY,EPSILON,MAX_SAFE_INTEGER,MIN_SAFE_INTEGER,isFinite,isInteger,isNaN,isSafeInteger,parseFloat,parseInt,fromString,range".split(","),n=0,o;r.length>n;n++)XSe(t,o=r[n])&&!XSe(e,o)&&iLt(e,o,oLt(t,o))};OZ&&QSe&&r2e(PZ[rC],QSe);(DZ||OZ)&&r2e(PZ[rC],zw)});var o2e=A(()=>{"use strict";var dLt=ce();dLt({target:"Number",stat:!0,nonConfigurable:!0,nonWritable:!0},{EPSILON:Math.pow(2,-52)})});var LZ=A((nGr,i2e)=>{"use strict";var hLt=or(),mLt=hLt.isFinite;i2e.exports=Number.isFinite||function(t){return typeof t=="number"&&mLt(t)}});var a2e=A(()=>{"use strict";var gLt=ce(),vLt=LZ();gLt({target:"Number",stat:!0},{isFinite:vLt})});var UL=A((aGr,s2e)=>{"use strict";var yLt=Qr(),_Lt=Math.floor;s2e.exports=Number.isInteger||function(t){return!yLt(t)&&isFinite(t)&&_Lt(t)===t}});var l2e=A(()=>{"use strict";var bLt=ce(),xLt=UL();bLt({target:"Number",stat:!0},{isInteger:xLt})});var u2e=A(()=>{"use strict";var wLt=ce();wLt({target:"Number",stat:!0},{isNaN:function(t){return t!==t}})});var c2e=A(()=>{"use strict";var ELt=ce(),SLt=UL(),TLt=Math.abs;ELt({target:"Number",stat:!0},{isSafeInteger:function(t){return SLt(t)&&TLt(t)<=9007199254740991}})});var p2e=A(()=>{"use strict";var ILt=ce();ILt({target:"Number",stat:!0,nonConfigurable:!0,nonWritable:!0},{MAX_SAFE_INTEGER:9007199254740991})});var f2e=A(()=>{"use strict";var MLt=ce();MLt({target:"Number",stat:!0,nonConfigurable:!0,nonWritable:!0},{MIN_SAFE_INTEGER:-9007199254740991})});var kZ=A((vGr,g2e)=>{"use strict";var m2e=or(),CLt=Vt(),ALt=At(),OLt=wn(),PLt=e_().trim,NLt=J1(),DLt=ALt("".charAt),BL=m2e.parseFloat,d2e=m2e.Symbol,h2e=d2e&&d2e.iterator,LLt=1/BL(NLt+"-0")!==-1/0||h2e&&!CLt(function(){BL(Object(h2e))});g2e.exports=LLt?function(t){var r=PLt(OLt(t)),n=BL(r);return n===0&&DLt(r,0)==="-"?-0:n}:BL});var y2e=A(()=>{"use strict";var kLt=ce(),v2e=kZ();kLt({target:"Number",stat:!0,forced:Number.parseFloat!==v2e},{parseFloat:v2e})});var RZ=A((bGr,S2e)=>{"use strict";var w2e=or(),RLt=Vt(),jLt=At(),qLt=wn(),zLt=e_().trim,_2e=J1(),nC=w2e.parseInt,b2e=w2e.Symbol,x2e=b2e&&b2e.iterator,E2e=/^[+-]?0x/i,FLt=jLt(E2e.exec),ULt=nC(_2e+"08")!==8||nC(_2e+"0x16")!==22||x2e&&!RLt(function(){nC(Object(x2e))});S2e.exports=ULt?function(t,r){var n=zLt(qLt(t));return nC(n,r>>>0||(FLt(E2e,n)?16:10))}:nC});var I2e=A(()=>{"use strict";var BLt=ce(),T2e=RZ();BLt({target:"Number",stat:!0,forced:Number.parseInt!==T2e},{parseInt:T2e})});var P2e=A(()=>{"use strict";var VLt=ce(),qZ=At(),GLt=Bi(),HLt=tC(),WLt=$M(),$Lt=MZ(),jZ=Vt(),ZLt=RangeError,M2e=String,YLt=isFinite,KLt=Math.abs,XLt=Math.floor,C2e=Math.pow,QLt=Math.round,yh=qZ(1 .toExponential),JLt=qZ(WLt),A2e=qZ("".slice),O2e=yh(-69e-12,4)==="-6.9000e-11"&&yh(1.255,2)==="1.25e+0"&&yh(12345,3)==="1.235e+4"&&yh(25,0)==="3e+1",e3t=function(){return jZ(function(){yh(1,1/0)})&&jZ(function(){yh(1,-1/0)})},t3t=function(){return!jZ(function(){yh(1/0,1/0),yh(NaN,1/0)})},r3t=!O2e||!e3t()||!t3t();VLt({target:"Number",proto:!0,forced:r3t},{toExponential:function(t){var r=HLt(this);if(t===void 0)return yh(r);var n=GLt(t);if(!YLt(r))return String(r);if(n<0||n>20)throw new ZLt("Incorrect fraction digits");if(O2e)return yh(r,n);var o="",i,a,u,d;if(r<0&&(o="-",r=-r),r===0)a=0,i=JLt("0",n+1);else{var h=$Lt(r);a=XLt(h);var v=C2e(10,a-n),b=QLt(r/v);2*r>=(2*b+1)*v&&(b+=1),b>=C2e(10,n+1)&&(b/=10,a+=1),i=M2e(b)}return n!==0&&(i=A2e(i,0,1)+"."+A2e(i,1)),a===0?(u="+",d="0"):(u=a>0?"+":"-",d=M2e(KLt(a))),i+="e"+u+d,o+i}})});var j2e=A(()=>{"use strict";var n3t=ce(),UZ=At(),o3t=Bi(),i3t=tC(),a3t=$M(),N2e=Vt(),s3t=RangeError,k2e=String,R2e=Math.floor,FZ=UZ(a3t),D2e=UZ("".slice),oC=UZ(1 .toFixed),Uw=function(e,t,r){return t===0?r:t%2===1?Uw(e,t-1,r*e):Uw(e*e,t/2,r)},l3t=function(e){for(var t=0,r=e;r>=4096;)t+=12,r/=4096;for(;r>=2;)t+=1,r/=2;return t},Fw=function(e,t,r){for(var n=-1,o=r;++n<6;)o+=t*e[n],e[n]=o%1e7,o=R2e(o/1e7)},zZ=function(e,t){for(var r=6,n=0;--r>=0;)n+=e[r],e[r]=R2e(n/t),n=n%t*1e7},L2e=function(e){for(var t=6,r="";--t>=0;)if(r!==""||t===0||e[t]!==0){var n=k2e(e[t]);r=r===""?n:r+FZ("0",7-n.length)+n}return r},u3t=N2e(function(){return oC(8e-5,3)!=="0.000"||oC(.9,0)!=="1"||oC(1.255,2)!=="1.25"||oC(0xde0b6b3a7640080,0)!=="1000000000000000128"})||!N2e(function(){oC({})});n3t({target:"Number",proto:!0,forced:u3t},{toFixed:function(t){var r=i3t(this),n=o3t(t),o=[0,0,0,0,0,0],i="",a="0",u,d,h,v;if(n<0||n>20)throw new s3t("Incorrect fraction digits");if(r!==r)return"NaN";if(r<=-1e21||r>=1e21)return k2e(r);if(r<0&&(i="-",r=-r),r>1e-21)if(u=l3t(r*Uw(2,69,1))-69,d=u<0?r*Uw(2,-u,1):r/Uw(2,u,1),d*=4503599627370496,u=52-u,u>0){for(Fw(o,0,d),h=n;h>=7;)Fw(o,1e7,0),h-=7;for(Fw(o,Uw(10,h,1),0),h=u-1;h>=23;)zZ(o,1<<23),h-=23;zZ(o,1<<h),Fw(o,1,1),zZ(o,2),a=L2e(o)}else Fw(o,0,d),Fw(o,1<<-u,0),a=L2e(o)+FZ("0",n);return n>0?(v=a.length,a=i+(v<=n?"0."+FZ("0",n-v)+a:D2e(a,0,v-n)+"."+D2e(a,v-n))):a=i+a,a}})});var F2e=A(()=>{"use strict";var c3t=ce(),p3t=At(),q2e=Vt(),z2e=tC(),VL=p3t(1 .toPrecision),f3t=q2e(function(){return VL(1,void 0)!=="1"})||!q2e(function(){VL({})});c3t({target:"Number",proto:!0,forced:f3t},{toPrecision:function(t){return t===void 0?VL(z2e(this)):VL(z2e(this),t)}})});var VZ=A((AGr,V2e)=>{"use strict";var U2e=Hr(),d3t=At(),h3t=ir(),m3t=Vt(),BZ=V1(),g3t=SM(),v3t=gM(),y3t=Zn(),_3t=Hm(),Bw=Object.assign,B2e=Object.defineProperty,b3t=d3t([].concat);V2e.exports=!Bw||m3t(function(){if(U2e&&Bw({b:1},Bw(B2e({},"a",{enumerable:!0,get:function(){B2e(this,"b",{value:3,enumerable:!1})}}),{b:2})).b!==1)return!0;var e={},t={},r=Symbol("assign detection"),n="abcdefghijklmnopqrst";return e[r]=7,n.split("").forEach(function(o){t[o]=o}),Bw({},e)[r]!==7||BZ(Bw({},t)).join("")!==n})?function(t,r){for(var n=y3t(t),o=arguments.length,i=1,a=g3t.f,u=v3t.f;o>i;)for(var d=_3t(arguments[i++]),h=a?b3t(BZ(d),a(d)):BZ(d),v=h.length,b=0,x;v>b;)x=h[b++],(!U2e||h3t(u,d,x))&&(n[x]=d[x]);return n}:Bw});var H2e=A(()=>{"use strict";var x3t=ce(),G2e=VZ();x3t({target:"Object",stat:!0,arity:2,forced:Object.assign!==G2e},{assign:G2e})});var W2e=A(()=>{"use strict";var w3t=ce(),E3t=Hr(),S3t=Oa();w3t({target:"Object",stat:!0,sham:!E3t},{create:S3t})});var iC=A((LGr,Z2e)=>{"use strict";var T3t=To(),I3t=or(),M3t=Vt(),$2e=hL();Z2e.exports=T3t||!M3t(function(){if(!($2e&&$2e<535)){var e=Math.random();__defineSetter__.call(null,e,function(){}),delete I3t[e]}})});var Y2e=A(()=>{"use strict";var C3t=ce(),A3t=Hr(),O3t=iC(),P3t=cn(),N3t=Zn(),D3t=_i();A3t&&C3t({target:"Object",proto:!0,forced:O3t},{__defineGetter__:function(t,r){D3t.f(N3t(this),t,{get:P3t(r),enumerable:!0,configurable:!0})}})});var X2e=A(()=>{"use strict";var L3t=ce(),k3t=Hr(),K2e=q5().f;L3t({target:"Object",stat:!0,forced:Object.defineProperties!==K2e,sham:!k3t},{defineProperties:K2e})});var J2e=A(()=>{"use strict";var R3t=ce(),j3t=Hr(),Q2e=_i().f;R3t({target:"Object",stat:!0,forced:Object.defineProperty!==Q2e,sham:!j3t},{defineProperty:Q2e})});var eTe=A(()=>{"use strict";var q3t=ce(),z3t=Hr(),F3t=iC(),U3t=cn(),B3t=Zn(),V3t=_i();z3t&&q3t({target:"Object",proto:!0,forced:F3t},{__defineSetter__:function(t,r){V3t.f(B3t(this),t,{set:U3t(r),enumerable:!0,configurable:!0})}})});var GZ=A((VGr,iTe)=>{"use strict";var rTe=Hr(),G3t=Vt(),nTe=At(),H3t=ps(),W3t=V1(),$3t=us(),Z3t=gM().f,oTe=nTe(Z3t),Y3t=nTe([].push),K3t=rTe&&G3t(function(){var e=Object.create(null);return e[2]=2,!oTe(e,2)}),tTe=function(e){return function(t){for(var r=$3t(t),n=W3t(r),o=K3t&&H3t(r)===null,i=n.length,a=0,u=[],d;i>a;)d=n[a++],(!rTe||(o?d in r:oTe(r,d)))&&Y3t(u,e?[d,r[d]]:r[d]);return u}};iTe.exports={entries:tTe(!0),values:tTe(!1)}});var aTe=A(()=>{"use strict";var X3t=ce(),Q3t=GZ().entries;X3t({target:"Object",stat:!0},{entries:function(t){return Q3t(t)}})});var sTe=A(()=>{"use strict";var J3t=ce(),ekt=rg(),tkt=Vt(),rkt=Qr(),nkt=fy().onFreeze,HZ=Object.freeze,okt=tkt(function(){HZ(1)});J3t({target:"Object",stat:!0,forced:okt,sham:!ekt},{freeze:function(t){return HZ&&rkt(t)?HZ(nkt(t)):t}})});var lTe=A(()=>{"use strict";var ikt=ce(),akt=ca(),skt=qp();ikt({target:"Object",stat:!0},{fromEntries:function(t){var r={};return akt(t,function(n,o){skt(r,n,o)},{AS_ENTRIES:!0}),r}})});var pTe=A(()=>{"use strict";var lkt=ce(),ukt=Vt(),ckt=us(),uTe=Bs().f,cTe=Hr(),pkt=!cTe||ukt(function(){uTe(1)});lkt({target:"Object",stat:!0,forced:pkt,sham:!cTe},{getOwnPropertyDescriptor:function(t,r){return uTe(ckt(t),r)}})});var fTe=A(()=>{"use strict";var fkt=ce(),dkt=Hr(),hkt=L5(),mkt=us(),gkt=Bs(),vkt=qp();fkt({target:"Object",stat:!0,sham:!dkt},{getOwnPropertyDescriptors:function(t){for(var r=mkt(t),n=gkt.f,o=hkt(r),i={},a=0,u,d;o.length>a;)d=n(r,u=o[a++]),d!==void 0&&vkt(i,u,d);return i}})});var dTe=A(()=>{"use strict";var ykt=ce(),_kt=Vt(),bkt=U5().f,xkt=_kt(function(){return!Object.getOwnPropertyNames(1)});ykt({target:"Object",stat:!0,forced:xkt},{getOwnPropertyNames:bkt})});var mTe=A(()=>{"use strict";var wkt=ce(),Ekt=Vt(),Skt=Zn(),hTe=ps(),Tkt=eL(),Ikt=Ekt(function(){hTe(1)});wkt({target:"Object",stat:!0,forced:Ikt,sham:!Tkt},{getPrototypeOf:function(t){return hTe(Skt(t))}})});var WZ=A(()=>{"use strict";var Mkt=ce(),Ckt=un(),Akt=At(),Okt=cn(),Pkt=Ci(),Nkt=fh(),Dkt=ca(),Lkt=Vt(),gTe=Object.groupBy,kkt=Ckt("Object","create"),Rkt=Akt([].push),jkt=!gTe||Lkt(function(){return gTe("ab",function(e){return e}).a.length!==1});Mkt({target:"Object",stat:!0,forced:jkt},{groupBy:function(t,r){Pkt(t),Okt(r);var n=kkt(null),o=0;return Dkt(t,function(i){var a=Nkt(r(i,o++));a in n?Rkt(n[a],i):n[a]=[i]}),n}})});var $Z=A(()=>{"use strict";var qkt=ce(),zkt=Fn();qkt({target:"Object",stat:!0},{hasOwn:zkt})});var GL=A((lHr,vTe)=>{"use strict";vTe.exports=Object.is||function(t,r){return t===r?t!==0||1/t===1/r:t!==t&&r!==r}});var yTe=A(()=>{"use strict";var Fkt=ce(),Ukt=GL();Fkt({target:"Object",stat:!0},{is:Ukt})});var bTe=A(()=>{"use strict";var Bkt=ce(),_Te=LL();Bkt({target:"Object",stat:!0,forced:Object.isExtensible!==_Te},{isExtensible:_Te})});var wTe=A(()=>{"use strict";var Vkt=ce(),Gkt=Vt(),Hkt=Qr(),Wkt=gl(),xTe=NL(),ZZ=Object.isFrozen,$kt=xTe||Gkt(function(){ZZ(1)});Vkt({target:"Object",stat:!0,forced:$kt},{isFrozen:function(t){return!Hkt(t)||xTe&&Wkt(t)==="ArrayBuffer"?!0:ZZ?ZZ(t):!1}})});var STe=A(()=>{"use strict";var Zkt=ce(),Ykt=Vt(),Kkt=Qr(),Xkt=gl(),ETe=NL(),YZ=Object.isSealed,Qkt=ETe||Ykt(function(){YZ(1)});Zkt({target:"Object",stat:!0,forced:Qkt},{isSealed:function(t){return!Kkt(t)||ETe&&Xkt(t)==="ArrayBuffer"?!0:YZ?YZ(t):!1}})});var ITe=A(()=>{"use strict";var Jkt=ce(),eRt=Zn(),TTe=V1(),tRt=Vt(),rRt=tRt(function(){TTe(1)});Jkt({target:"Object",stat:!0,forced:rRt},{keys:function(t){return TTe(eRt(t))}})});var MTe=A(()=>{"use strict";var nRt=ce(),oRt=Hr(),iRt=iC(),aRt=Zn(),sRt=fh(),lRt=ps(),uRt=Bs().f;oRt&&nRt({target:"Object",proto:!0,forced:iRt},{__lookupGetter__:function(t){var r=aRt(this),n=sRt(t),o;do if(o=uRt(r,n))return o.get;while(r=lRt(r))}})});var CTe=A(()=>{"use strict";var cRt=ce(),pRt=Hr(),fRt=iC(),dRt=Zn(),hRt=fh(),mRt=ps(),gRt=Bs().f;pRt&&cRt({target:"Object",proto:!0,forced:fRt},{__lookupSetter__:function(t){var r=dRt(this),n=hRt(t),o;do if(o=gRt(r,n))return o.set;while(r=mRt(r))}})});var ATe=A(()=>{"use strict";var vRt=ce(),yRt=Qr(),_Rt=fy().onFreeze,bRt=rg(),xRt=Vt(),KZ=Object.preventExtensions,wRt=xRt(function(){KZ(1)});vRt({target:"Object",stat:!0,forced:wRt,sham:!bRt},{preventExtensions:function(t){return KZ&&yRt(t)?KZ(_Rt(t)):t}})});var LTe=A(()=>{"use strict";var ERt=Hr(),SRt=Vi(),TRt=Qr(),IRt=HH(),MRt=Zn(),CRt=Ci(),OTe=Object.getPrototypeOf,PTe=Object.setPrototypeOf,NTe=Object.prototype,DTe="__proto__";if(ERt&&OTe&&PTe&&!(DTe in NTe))try{SRt(NTe,DTe,{configurable:!0,get:function(){return OTe(MRt(this))},set:function(t){var r=CRt(this);IRt(t)&&TRt(r)&&PTe(r,t)}})}catch(e){}});var kTe=A(()=>{"use strict";var ARt=ce(),ORt=Qr(),PRt=fy().onFreeze,NRt=rg(),DRt=Vt(),XZ=Object.seal,LRt=DRt(function(){XZ(1)});ARt({target:"Object",stat:!0,forced:LRt,sham:!NRt},{seal:function(t){return XZ&&ORt(t)?XZ(PRt(t)):t}})});var RTe=A(()=>{"use strict";var kRt=ce(),RRt=jp();kRt({target:"Object",stat:!0},{setPrototypeOf:RRt})});var qTe=A((PHr,jTe)=>{"use strict";var jRt=R5(),qRt=Ou();jTe.exports=jRt?{}.toString:function(){return"[object "+qRt(this)+"]"}});var zTe=A(()=>{"use strict";var zRt=R5(),FRt=Xo(),URt=qTe();zRt||FRt(Object.prototype,"toString",URt,{unsafe:!0})});var FTe=A(()=>{"use strict";var BRt=ce(),VRt=GZ().values;BRt({target:"Object",stat:!0},{values:function(t){return VRt(t)}})});var BTe=A(()=>{"use strict";var GRt=ce(),UTe=kZ();GRt({global:!0,forced:parseFloat!==UTe},{parseFloat:UTe})});var GTe=A(()=>{"use strict";var HRt=ce(),VTe=RZ();HRt({global:!0,forced:parseInt!==VTe},{parseInt:VTe})});var aC=A((FHr,HTe)=>{"use strict";var WRt=td(),$Rt=$v(),ZRt=TypeError;HTe.exports=function(e){if(WRt(e))return e;throw new ZRt($Rt(e)+" is not a constructor")}});var sC=A((UHr,$Te)=>{"use strict";var WTe=ur(),YRt=aC(),KRt=pc(),XRt=on(),QRt=XRt("species");$Te.exports=function(e,t){var r=WTe(e).constructor,n;return r===void 0||KRt(n=WTe(r)[QRt])?t:YRt(n)}});var tp=A((BHr,ZTe)=>{"use strict";var JRt=TypeError;ZTe.exports=function(e,t){if(e<t)throw new JRt("Not enough arguments");return e}});var QZ=A((VHr,YTe)=>{"use strict";var e6t=Yf();YTe.exports=/(?:ipad|iphone|ipod).*applewebkit/i.test(e6t)});var cC=A((GHr,oIe)=>{"use strict";var rp=or(),t6t=yl(),r6t=ai(),KTe=Nn(),n6t=Fn(),nIe=Vt(),XTe=xH(),o6t=dc(),QTe=_M(),i6t=tp(),a6t=QZ(),s6t=K1(),oY=rp.setImmediate,iY=rp.clearImmediate,l6t=rp.process,JZ=rp.Dispatch,u6t=rp.Function,JTe=rp.MessageChannel,c6t=rp.String,eY=0,lC={},eIe="onreadystatechange",uC,t_,tY,rY;nIe(function(){uC=rp.location});var aY=function(e){if(n6t(lC,e)){var t=lC[e];delete lC[e],t()}},nY=function(e){return function(){aY(e)}},tIe=function(e){aY(e.data)},rIe=function(e){rp.postMessage(c6t(e),uC.protocol+"//"+uC.host)};(!oY||!iY)&&(oY=function(t){i6t(arguments.length,1);var r=KTe(t)?t:u6t(t),n=o6t(arguments,1);return lC[++eY]=function(){t6t(r,void 0,n)},t_(eY),eY},iY=function(t){delete lC[t]},s6t?t_=function(e){l6t.nextTick(nY(e))}:JZ&&JZ.now?t_=function(e){JZ.now(nY(e))}:JTe&&!a6t?(tY=new JTe,rY=tY.port2,tY.port1.onmessage=tIe,t_=r6t(rY.postMessage,rY)):rp.addEventListener&&KTe(rp.postMessage)&&!rp.importScripts&&uC&&uC.protocol!=="file:"&&!nIe(rIe)?(t_=rIe,rp.addEventListener("message",tIe,!1)):eIe in QTe("script")?t_=function(e){XTe.appendChild(QTe("script"))[eIe]=function(){XTe.removeChild(this),aY(e)}}:t_=function(e){setTimeout(nY(e),0)});oIe.exports={set:oY,clear:iY}});var sY=A((HHr,aIe)=>{"use strict";var iIe=or(),p6t=Hr(),f6t=Object.getOwnPropertyDescriptor;aIe.exports=function(e){if(!p6t)return iIe[e];var t=f6t(iIe,e);return t&&t.value}});var lY=A((WHr,lIe)=>{"use strict";var sIe=function(){this.head=null,this.tail=null};sIe.prototype={add:function(e){var t={item:e,next:null},r=this.tail;r?r.next=t:this.head=t,this.tail=t},get:function(){var e=this.head;if(e){var t=this.head=e.next;return t===null&&(this.tail=null),e.item}}};lIe.exports=sIe});var cIe=A(($Hr,uIe)=>{"use strict";var d6t=Yf();uIe.exports=/ipad|iphone|ipod/i.test(d6t)&&typeof Pebble!="undefined"});var fIe=A((ZHr,pIe)=>{"use strict";var h6t=Yf();pIe.exports=/web0s(?!.*chrome)/i.test(h6t)});var hY=A((YHr,yIe)=>{"use strict";var Gw=or(),m6t=sY(),dIe=ai(),uY=cC().set,g6t=lY(),v6t=QZ(),y6t=cIe(),_6t=fIe(),cY=K1(),hIe=Gw.MutationObserver||Gw.WebKitMutationObserver,mIe=Gw.document,gIe=Gw.process,HL=Gw.Promise,dY=m6t("queueMicrotask"),Vw,pY,fY,WL,vIe;dY||(pC=new g6t,fC=function(){var e,t;for(cY&&(e=gIe.domain)&&e.exit();t=pC.get();)try{t()}catch(r){throw pC.head&&Vw(),r}e&&e.enter()},!v6t&&!cY&&!_6t&&hIe&&mIe?(pY=!0,fY=mIe.createTextNode(""),new hIe(fC).observe(fY,{characterData:!0}),Vw=function(){fY.data=pY=!pY}):!y6t&&HL&&HL.resolve?(WL=HL.resolve(void 0),WL.constructor=HL,vIe=dIe(WL.then,WL),Vw=function(){vIe(fC)}):cY?Vw=function(){gIe.nextTick(fC)}:(uY=dIe(uY,Gw),Vw=function(){uY(fC)}),dY=function(e){pC.head||Vw(),pC.add(e)});var pC,fC;yIe.exports=dY});var mY=A((KHr,_Ie)=>{"use strict";_Ie.exports=function(e,t){try{arguments.length===1?console.error(e):console.error(e,t)}catch(r){}}});var dy=A((XHr,bIe)=>{"use strict";bIe.exports=function(e){try{return{error:!1,value:e()}}catch(t){return{error:!0,value:t}}}});var r_=A((QHr,xIe)=>{"use strict";var b6t=or();xIe.exports=b6t.Promise});var Hw=A((JHr,TIe)=>{"use strict";var x6t=or(),dC=r_(),w6t=Nn(),E6t=Ew(),S6t=bM(),T6t=on(),wIe=BM(),I6t=To(),gY=Xf(),EIe=dC&&dC.prototype,M6t=T6t("species"),vY=!1,SIe=w6t(x6t.PromiseRejectionEvent),C6t=E6t("Promise",function(){var e=S6t(dC),t=e!==String(dC);if(!t&&gY===66||I6t&&!(EIe.catch&&EIe.finally))return!0;if(!gY||gY<51||!/native code/.test(e)){var r=new dC(function(i){i(1)}),n=function(i){i(function(){},function(){})},o=r.constructor={};if(o[M6t]=n,vY=r.then(function(){})instanceof n,!vY)return!0}return!t&&(wIe==="BROWSER"||wIe==="DENO")&&!SIe});TIe.exports={CONSTRUCTOR:C6t,REJECTION_EVENT:SIe,SUBCLASSING:vY}});var _h=A((eWr,MIe)=>{"use strict";var IIe=cn(),A6t=TypeError,O6t=function(e){var t,r;this.promise=new e(function(n,o){if(t!==void 0||r!==void 0)throw new A6t("Bad Promise constructor");t=n,r=o}),this.resolve=IIe(t),this.reject=IIe(r)};MIe.exports.f=function(e){return new O6t(e)}});var WIe=A(()=>{"use strict";var P6t=ce(),N6t=To(),KL=K1(),hy=or(),Yw=ir(),CIe=Xo(),AIe=jp(),D6t=Pu(),L6t=iy(),k6t=cn(),YL=Nn(),R6t=Qr(),j6t=Jl(),q6t=sC(),LIe=cC().set,wY=hY(),z6t=mY(),F6t=dy(),U6t=lY(),kIe=Bo(),XL=r_(),EY=Hw(),RIe=_h(),QL="Promise",jIe=EY.CONSTRUCTOR,B6t=EY.REJECTION_EVENT,V6t=EY.SUBCLASSING,yY=kIe.getterFor(QL),G6t=kIe.set,Ww=XL&&XL.prototype,n_=XL,$L=Ww,qIe=hy.TypeError,_Y=hy.document,SY=hy.process,bY=RIe.f,H6t=bY,W6t=!!(_Y&&_Y.createEvent&&hy.dispatchEvent),zIe="unhandledrejection",$6t="rejectionhandled",OIe=0,FIe=1,Z6t=2,TY=1,UIe=2,ZL,PIe,Y6t,NIe,BIe=function(e){var t;return R6t(e)&&YL(t=e.then)?t:!1},VIe=function(e,t){var r=t.value,n=t.state===FIe,o=n?e.ok:e.fail,i=e.resolve,a=e.reject,u=e.domain,d,h,v;try{o?(n||(t.rejection===UIe&&X6t(t),t.rejection=TY),o===!0?d=r:(u&&u.enter(),d=o(r),u&&(u.exit(),v=!0)),d===e.promise?a(new qIe("Promise-chain cycle")):(h=BIe(d))?Yw(h,d,i,a):i(d)):a(r)}catch(b){u&&!v&&u.exit(),a(b)}},GIe=function(e,t){e.notified||(e.notified=!0,wY(function(){for(var r=e.reactions,n;n=r.get();)VIe(n,e);e.notified=!1,t&&!e.rejection&&K6t(e)}))},HIe=function(e,t,r){var n,o;W6t?(n=_Y.createEvent("Event"),n.promise=t,n.reason=r,n.initEvent(e,!1,!0),hy.dispatchEvent(n)):n={promise:t,reason:r},!B6t&&(o=hy["on"+e])?o(n):e===zIe&&z6t("Unhandled promise rejection",r)},K6t=function(e){Yw(LIe,hy,function(){var t=e.facade,r=e.value,n=DIe(e),o;if(n&&(o=F6t(function(){KL?SY.emit("unhandledRejection",r,t):HIe(zIe,t,r)}),e.rejection=KL||DIe(e)?UIe:TY,o.error))throw o.value})},DIe=function(e){return e.rejection!==TY&&!e.parent},X6t=function(e){Yw(LIe,hy,function(){var t=e.facade;KL?SY.emit("rejectionHandled",t):HIe($6t,t,e.value)})},$w=function(e,t,r){return function(n){e(t,n,r)}},Zw=function(e,t,r){e.done||(e.done=!0,r&&(e=r),e.value=t,e.state=Z6t,GIe(e,!0))},xY=function(e,t,r){if(!e.done){e.done=!0,r&&(e=r);try{if(e.facade===t)throw new qIe("Promise can't be resolved itself");var n=BIe(t);n?wY(function(){var o={done:!1};try{Yw(n,t,$w(xY,o,e),$w(Zw,o,e))}catch(i){Zw(o,i,e)}}):(e.value=t,e.state=FIe,GIe(e,!1))}catch(o){Zw({done:!1},o,e)}}};if(jIe&&(n_=function(t){j6t(this,$L),k6t(t),Yw(ZL,this);var r=yY(this);try{t($w(xY,r),$w(Zw,r))}catch(n){Zw(r,n)}},$L=n_.prototype,ZL=function(t){G6t(this,{type:QL,done:!1,notified:!1,parent:!1,reactions:new U6t,rejection:!1,state:OIe,value:null})},ZL.prototype=CIe($L,"then",function(t,r){var n=yY(this),o=bY(q6t(this,n_));return n.parent=!0,o.ok=YL(t)?t:!0,o.fail=YL(r)&&r,o.domain=KL?SY.domain:void 0,n.state===OIe?n.reactions.add(o):wY(function(){VIe(o,n)}),o.promise}),PIe=function(){var e=new ZL,t=yY(e);this.promise=e,this.resolve=$w(xY,t),this.reject=$w(Zw,t)},RIe.f=bY=function(e){return e===n_||e===Y6t?new PIe(e):H6t(e)},!N6t&&YL(XL)&&Ww!==Object.prototype)){NIe=Ww.then,V6t||CIe(Ww,"then",function(t,r){var n=this;return new n_(function(o,i){Yw(NIe,n,o,i)}).then(t,r)},{unsafe:!0});try{delete Ww.constructor}catch(e){}AIe&&AIe(Ww,$L)}P6t({global:!0,constructor:!0,wrap:!0,forced:jIe},{Promise:n_});D6t(n_,QL,!1,!0);L6t(QL)});var hC=A((nWr,$Ie)=>{"use strict";var Q6t=r_(),J6t=RM(),ejt=Hw().CONSTRUCTOR;$Ie.exports=ejt||!J6t(function(e){Q6t.all(e).then(void 0,function(){})})});var ZIe=A(()=>{"use strict";var tjt=ce(),rjt=ir(),njt=cn(),ojt=_h(),ijt=dy(),ajt=ca(),sjt=hC();tjt({target:"Promise",stat:!0,forced:sjt},{all:function(t){var r=this,n=ojt.f(r),o=n.resolve,i=n.reject,a=ijt(function(){var u=njt(r.resolve),d=[],h=0,v=1;ajt(t,function(b){var x=h++,M=!1;v++,rjt(u,r,b).then(function(O){M||(M=!0,d[x]=O,--v||o(d))},i)}),--v||o(d)});return a.error&&i(a.value),n.promise}})});var KIe=A(()=>{"use strict";var ljt=ce(),ujt=To(),cjt=Hw().CONSTRUCTOR,MY=r_(),pjt=un(),fjt=Nn(),djt=Xo(),YIe=MY&&MY.prototype;ljt({target:"Promise",proto:!0,forced:cjt,real:!0},{catch:function(e){return this.then(void 0,e)}});!ujt&&fjt(MY)&&(IY=pjt("Promise").prototype.catch,YIe.catch!==IY&&djt(YIe,"catch",IY,{unsafe:!0}));var IY});var XIe=A(()=>{"use strict";var hjt=ce(),mjt=ir(),gjt=cn(),vjt=_h(),yjt=dy(),_jt=ca(),bjt=hC();hjt({target:"Promise",stat:!0,forced:bjt},{race:function(t){var r=this,n=vjt.f(r),o=n.reject,i=yjt(function(){var a=gjt(r.resolve);_jt(t,function(u){mjt(a,r,u).then(n.resolve,o)})});return i.error&&o(i.value),n.promise}})});var QIe=A(()=>{"use strict";var xjt=ce(),wjt=_h(),Ejt=Hw().CONSTRUCTOR;xjt({target:"Promise",stat:!0,forced:Ejt},{reject:function(t){var r=wjt.f(this),n=r.reject;return n(t),r.promise}})});var CY=A((fWr,JIe)=>{"use strict";var Sjt=ur(),Tjt=Qr(),Ijt=_h();JIe.exports=function(e,t){if(Sjt(e),Tjt(t)&&t.constructor===e)return t;var r=Ijt.f(e),n=r.resolve;return n(t),r.promise}});var rMe=A(()=>{"use strict";var Mjt=ce(),Cjt=un(),eMe=To(),Ajt=r_(),tMe=Hw().CONSTRUCTOR,Ojt=CY(),Pjt=Cjt("Promise"),Njt=eMe&&!tMe;Mjt({target:"Promise",stat:!0,forced:eMe||tMe},{resolve:function(t){return Ojt(Njt&&this===Pjt?Ajt:this,t)}})});var nMe=A(()=>{"use strict";WIe();ZIe();KIe();XIe();QIe();rMe()});var AY=A(()=>{"use strict";var Djt=ce(),Ljt=ir(),kjt=cn(),Rjt=_h(),jjt=dy(),qjt=ca(),zjt=hC();Djt({target:"Promise",stat:!0,forced:zjt},{allSettled:function(t){var r=this,n=Rjt.f(r),o=n.resolve,i=n.reject,a=jjt(function(){var u=kjt(r.resolve),d=[],h=0,v=1;qjt(t,function(b){var x=h++,M=!1;v++,Ljt(u,r,b).then(function(O){M||(M=!0,d[x]={status:"fulfilled",value:O},--v||o(d))},function(O){M||(M=!0,d[x]={status:"rejected",reason:O},--v||o(d))})}),--v||o(d)});return a.error&&i(a.value),n.promise}})});var OY=A(()=>{"use strict";var Fjt=ce(),Ujt=ir(),Bjt=cn(),Vjt=un(),Gjt=_h(),Hjt=dy(),Wjt=ca(),$jt=hC(),oMe="No one promise resolved";Fjt({target:"Promise",stat:!0,forced:$jt},{any:function(t){var r=this,n=Vjt("AggregateError"),o=Gjt.f(r),i=o.resolve,a=o.reject,u=Hjt(function(){var d=Bjt(r.resolve),h=[],v=0,b=1,x=!1;Wjt(t,function(M){var O=v++,D=!1;b++,Ujt(d,r,M).then(function(k){D||x||(x=!0,i(k))},function(k){D||x||(D=!0,h[O]=k,--b||a(new n(h,oMe)))})}),--b||a(new n(h,oMe))});return u.error&&a(u.value),o.promise}})});var lMe=A(()=>{"use strict";var Zjt=ce(),Yjt=To(),JL=r_(),Kjt=Vt(),aMe=un(),sMe=Nn(),Xjt=sC(),iMe=CY(),Qjt=Xo(),NY=JL&&JL.prototype,Jjt=!!JL&&Kjt(function(){NY.finally.call({then:function(){}},function(){})});Zjt({target:"Promise",proto:!0,real:!0,forced:Jjt},{finally:function(e){var t=Xjt(this,aMe("Promise")),r=sMe(e);return this.then(r?function(n){return iMe(t,e()).then(function(){return n})}:e,r?function(n){return iMe(t,e()).then(function(){throw n})}:e)}});!Yjt&&sMe(JL)&&(PY=aMe("Promise").prototype.finally,NY.finally!==PY&&Qjt(NY,"finally",PY,{unsafe:!0}));var PY});var LY=A(()=>{"use strict";var eqt=ce(),tqt=or(),rqt=yl(),nqt=dc(),oqt=_h(),iqt=cn(),cMe=dy(),DY=tqt.Promise,uMe=!1,aqt=!DY||!DY.try||cMe(function(){DY.try(function(e){uMe=e===8},8)}).error||!uMe;eqt({target:"Promise",stat:!0,forced:aqt},{try:function(e){var t=arguments.length>1?nqt(arguments,1):[],r=oqt.f(this),n=cMe(function(){return rqt(iqt(e),void 0,t)});return(n.error?r.reject:r.resolve)(n.value),r.promise}})});var kY=A(()=>{"use strict";var sqt=ce(),lqt=_h();sqt({target:"Promise",stat:!0},{withResolvers:function(){var t=lqt.f(this);return{promise:t.promise,resolve:t.resolve,reject:t.reject}}})});var pMe=A(()=>{"use strict";var uqt=ce(),cqt=yl(),pqt=cn(),fqt=ur(),dqt=Vt(),hqt=!dqt(function(){Reflect.apply(function(){})});uqt({target:"Reflect",stat:!0,forced:hqt},{apply:function(t,r,n){return cqt(pqt(t),r,fqt(n))}})});var yMe=A(()=>{"use strict";var mqt=ce(),gqt=un(),RY=yl(),vqt=N$(),fMe=aC(),yqt=ur(),dMe=Qr(),_qt=Oa(),mMe=Vt(),jY=gqt("Reflect","construct"),bqt=Object.prototype,xqt=[].push,gMe=mMe(function(){function e(){}return!(jY(function(){},[],e)instanceof e)}),vMe=!mMe(function(){jY(function(){})}),hMe=gMe||vMe;mqt({target:"Reflect",stat:!0,forced:hMe,sham:hMe},{construct:function(t,r){fMe(t),yqt(r);var n=arguments.length<3?t:fMe(arguments[2]);if(vMe&&!gMe)return jY(t,r,n);if(t===n){switch(r.length){case 0:return new t;case 1:return new t(r[0]);case 2:return new t(r[0],r[1]);case 3:return new t(r[0],r[1],r[2]);case 4:return new t(r[0],r[1],r[2],r[3])}var o=[null];return RY(xqt,o,r),new(RY(vqt,t,o))}var i=n.prototype,a=_qt(dMe(i)?i:bqt),u=RY(t,a,r);return dMe(u)?u:a}})});var xMe=A(()=>{"use strict";var wqt=ce(),Eqt=Hr(),_Me=ur(),Sqt=fh(),bMe=_i(),Tqt=Vt(),Iqt=Tqt(function(){Reflect.defineProperty(bMe.f({},1,{value:1}),1,{value:2})});wqt({target:"Reflect",stat:!0,forced:Iqt,sham:!Eqt},{defineProperty:function(t,r,n){_Me(t);var o=Sqt(r);_Me(n);try{return bMe.f(t,o,n),!0}catch(i){return!1}}})});var wMe=A(()=>{"use strict";var Mqt=ce(),Cqt=ur(),Aqt=Bs().f;Mqt({target:"Reflect",stat:!0},{deleteProperty:function(t,r){var n=Aqt(Cqt(t),r);return n&&!n.configurable?!1:delete t[r]}})});var qY=A((kWr,SMe)=>{"use strict";var EMe=Fn();SMe.exports=function(e){return e!==void 0&&(EMe(e,"value")||EMe(e,"writable"))}});var IMe=A(()=>{"use strict";var Oqt=ce(),Pqt=ir(),Nqt=Qr(),Dqt=ur(),Lqt=qY(),kqt=Bs(),Rqt=ps();function TMe(e,t){var r=arguments.length<3?e:arguments[2],n,o;if(Dqt(e)===r)return e[t];if(n=kqt.f(e,t),n)return Lqt(n)?n.value:n.get===void 0?void 0:Pqt(n.get,r);if(Nqt(o=Rqt(e)))return TMe(o,t,r)}Oqt({target:"Reflect",stat:!0},{get:TMe})});var MMe=A(()=>{"use strict";var jqt=ce(),qqt=Hr(),zqt=ur(),Fqt=Bs();jqt({target:"Reflect",stat:!0,sham:!qqt},{getOwnPropertyDescriptor:function(t,r){return Fqt.f(zqt(t),r)}})});var CMe=A(()=>{"use strict";var Uqt=ce(),Bqt=ur(),Vqt=ps(),Gqt=eL();Uqt({target:"Reflect",stat:!0,sham:!Gqt},{getPrototypeOf:function(t){return Vqt(Bqt(t))}})});var AMe=A(()=>{"use strict";var Hqt=ce();Hqt({target:"Reflect",stat:!0},{has:function(t,r){return r in t}})});var OMe=A(()=>{"use strict";var Wqt=ce(),$qt=ur(),Zqt=LL();Wqt({target:"Reflect",stat:!0},{isExtensible:function(t){return $qt(t),Zqt(t)}})});var PMe=A(()=>{"use strict";var Yqt=ce(),Kqt=L5();Yqt({target:"Reflect",stat:!0},{ownKeys:Kqt})});var NMe=A(()=>{"use strict";var Xqt=ce(),Qqt=un(),Jqt=ur(),e8t=rg();Xqt({target:"Reflect",stat:!0,sham:!e8t},{preventExtensions:function(t){Jqt(t);try{var r=Qqt("Object","preventExtensions");return r&&r(t),!0}catch(n){return!1}}})});var jMe=A(()=>{"use strict";var t8t=ce(),r8t=ir(),n8t=ur(),DMe=Qr(),o8t=qY(),i8t=Vt(),zY=_i(),LMe=Bs(),a8t=ps(),kMe=cc();function RMe(e,t,r){var n=arguments.length<4?e:arguments[3],o=LMe.f(n8t(e),t),i,a,u;if(!o){if(DMe(a=a8t(e)))return RMe(a,t,r,n);o=kMe(0)}if(o8t(o)){if(o.writable===!1||!DMe(n))return!1;if(i=LMe.f(n,t)){if(i.get||i.set||i.writable===!1)return!1;i.value=r,zY.f(n,t,i)}else zY.f(n,t,kMe(0,r))}else{if(u=o.set,u===void 0)return!1;r8t(u,n,r)}return!0}var s8t=i8t(function(){var e=function(){},t=zY.f(new e,"a",{configurable:!0});return Reflect.set(e.prototype,"a",1,t)!==!1});t8t({target:"Reflect",stat:!0,forced:s8t},{set:RMe})});var zMe=A(()=>{"use strict";var l8t=ce(),u8t=ur(),c8t=WH(),qMe=jp();qMe&&l8t({target:"Reflect",stat:!0},{setPrototypeOf:function(t,r){u8t(t),c8t(r);try{return qMe(t,r),!0}catch(n){return!1}}})});var FMe=A(()=>{"use strict";var p8t=ce(),f8t=or(),d8t=Pu();p8t({global:!0},{Reflect:{}});d8t(f8t.Reflect,"Reflect",!0)});var mC=A((r$r,UMe)=>{"use strict";var h8t=Qr(),m8t=gl(),g8t=on(),v8t=g8t("match");UMe.exports=function(e){var t;return h8t(e)&&((t=e[v8t])!==void 0?!!t:m8t(e)==="RegExp")}});var e3=A((n$r,BMe)=>{"use strict";var y8t=ur();BMe.exports=function(){var e=y8t(this),t="";return e.hasIndices&&(t+="d"),e.global&&(t+="g"),e.ignoreCase&&(t+="i"),e.multiline&&(t+="m"),e.dotAll&&(t+="s"),e.unicode&&(t+="u"),e.unicodeSets&&(t+="v"),e.sticky&&(t+="y"),t}});var Kw=A((o$r,GMe)=>{"use strict";var _8t=ir(),b8t=Fn(),x8t=vl(),w8t=e3(),VMe=RegExp.prototype;GMe.exports=function(e){var t=e.flags;return t===void 0&&!("flags"in VMe)&&!b8t(e,"flags")&&x8t(VMe,e)?_8t(w8t,e):t}});var gC=A((i$r,HMe)=>{"use strict";var FY=Vt(),E8t=or(),UY=E8t.RegExp,BY=FY(function(){var e=UY("a","y");return e.lastIndex=2,e.exec("abcd")!==null}),S8t=BY||FY(function(){return!UY("a","y").sticky}),T8t=BY||FY(function(){var e=UY("^r","gy");return e.lastIndex=2,e.exec("str")!==null});HMe.exports={BROKEN_CARET:T8t,MISSED_STICKY:S8t,UNSUPPORTED_Y:BY}});var t3=A((a$r,WMe)=>{"use strict";var I8t=Vt(),M8t=or(),C8t=M8t.RegExp;WMe.exports=I8t(function(){var e=C8t(".","s");return!(e.dotAll&&e.test(`
`)&&e.flags==="s")})});var VY=A((s$r,$Me)=>{"use strict";var A8t=Vt(),O8t=or(),P8t=O8t.RegExp;$Me.exports=A8t(function(){var e=P8t("(?<a>b)","g");return e.exec("b").groups.a!=="b"||"b".replace(e,"$<a>c")!=="bc"})});var nCe=A(()=>{"use strict";var N8t=Hr(),$Y=or(),vC=At(),D8t=Ew(),L8t=Jv(),k8t=cs(),R8t=Oa(),j8t=Yv().f,ZMe=vl(),q8t=mC(),YMe=wn(),z8t=Kw(),JMe=gC(),F8t=$H(),U8t=Xo(),B8t=Vt(),V8t=Fn(),G8t=Bo().enforce,H8t=iy(),W8t=on(),eCe=t3(),tCe=VY(),$8t=W8t("match"),gy=$Y.RegExp,Xw=gy.prototype,Z8t=$Y.SyntaxError,Y8t=vC(Xw.exec),r3=vC("".charAt),KMe=vC("".replace),XMe=vC("".indexOf),QMe=vC("".slice),K8t=/^\?<[^\s\d!#%&*+<=>@^][^\s!#%&*+<=>@^]*>/,o_=/a/g,GY=/a/g,X8t=new gy(o_)!==o_,rCe=JMe.MISSED_STICKY,Q8t=JMe.UNSUPPORTED_Y,J8t=N8t&&(!X8t||rCe||eCe||tCe||B8t(function(){return GY[$8t]=!1,gy(o_)!==o_||gy(GY)===GY||String(gy(o_,"i"))!=="/a/i"})),ezt=function(e){for(var t=e.length,r=0,n="",o=!1,i;r<=t;r++){if(i=r3(e,r),i==="\\"){n+=i+r3(e,++r);continue}!o&&i==="."?n+="[\\s\\S]":(i==="["?o=!0:i==="]"&&(o=!1),n+=i)}return n},tzt=function(e){for(var t=e.length,r=0,n="",o=[],i=R8t(null),a=!1,u=!1,d=0,h="",v;r<=t;r++){if(v=r3(e,r),v==="\\")v+=r3(e,++r);else if(v==="]")a=!1;else if(!a)switch(!0){case v==="[":a=!0;break;case v==="(":if(n+=v,QMe(e,r+1,r+3)==="?:")continue;Y8t(K8t,QMe(e,r+1))&&(r+=2,u=!0),d++;continue;case v===">"&&u:if(h===""||V8t(i,h))throw new Z8t("Invalid capture group name");i[h]=!0,o[o.length]=[h,d],u=!1,h="";continue}u?h+=v:n+=v}return[n,o]};if(D8t("RegExp",J8t)){for(my=function(t,r){var n=ZMe(Xw,this),o=q8t(t),i=r===void 0,a=[],u=t,d,h,v,b,x,M;if(!n&&o&&i&&t.constructor===my)return t;if((o||ZMe(Xw,t))&&(t=t.source,i&&(r=z8t(u))),t=t===void 0?"":YMe(t),r=r===void 0?"":YMe(r),u=t,eCe&&"dotAll"in o_&&(h=!!r&&XMe(r,"s")>-1,h&&(r=KMe(r,/s/g,""))),d=r,rCe&&"sticky"in o_&&(v=!!r&&XMe(r,"y")>-1,v&&Q8t&&(r=KMe(r,/y/g,""))),tCe&&(b=tzt(t),t=b[0],a=b[1]),x=L8t(gy(t,r),n?this:Xw,my),(h||v||a.length)&&(M=G8t(x),h&&(M.dotAll=!0,M.raw=my(ezt(t),d)),v&&(M.sticky=!0),a.length&&(M.groups=a)),t!==u)try{k8t(x,"source",u===""?"(?:)":u)}catch(O){}return x},HY=j8t(gy),WY=0;HY.length>WY;)F8t(my,gy,HY[WY++]);Xw.constructor=my,my.prototype=Xw,U8t($Y,"RegExp",my,{constructor:!0})}var my,HY,WY;H8t("RegExp")});var yC=A((c$r,oCe)=>{"use strict";var rzt=TypeError;oCe.exports=function(e){if(typeof e=="string")return e;throw new rzt("Argument is not a string")}});var XY=A(()=>{"use strict";var nzt=ce(),_C=At(),ozt=yC(),izt=Fn(),iCe=ZM().start,azt=J1(),szt=Array,aCe=RegExp.escape,sCe=_C("".charAt),KY=_C("".charCodeAt),lzt=_C(1.1.toString),uzt=_C([].join),uCe=/^[0-9a-z]/i,czt=/^[$()*+./?[\\\]^{|}]/,pzt=RegExp("^[!\"#%&',\\-:;<=>@`~"+azt+"]"),ZY=_C(uCe.exec),lCe={"\t":"t","\n":"n","\x0B":"v","\f":"f","\r":"r"},YY=function(e){var t=lzt(KY(e,0),16);return t.length<3?"\\x"+iCe(t,2,"0"):"\\u"+iCe(t,4,"0")},fzt=!aCe||aCe("ab")!=="\\x61b";nzt({target:"RegExp",stat:!0,forced:fzt},{escape:function(t){ozt(t);for(var r=t.length,n=szt(r),o=0;o<r;o++){var i=sCe(t,o);if(o===0&&ZY(uCe,i))n[o]=YY(i);else if(izt(lCe,i))n[o]="\\"+lCe[i];else if(ZY(czt,i))n[o]="\\"+i;else if(ZY(pzt,i))n[o]=YY(i);else{var a=KY(i,0);(a&63488)!==55296?n[o]=i:a>=56320||o+1>=r||(KY(t,o+1)&64512)!==56320?n[o]=YY(i):(n[o]=i,n[++o]=sCe(t,o))}}return uzt(n,"")}})});var pCe=A(()=>{"use strict";var dzt=Hr(),hzt=t3(),mzt=gl(),gzt=Vi(),vzt=Bo().get,cCe=RegExp.prototype,yzt=TypeError;dzt&&hzt&&gzt(cCe,"dotAll",{configurable:!0,get:function(){if(this!==cCe){if(mzt(this)==="RegExp")return!!vzt(this).dotAll;throw new yzt("Incompatible receiver, RegExp required")}}})});var i3=A((m$r,dCe)=>{"use strict";var Qw=ir(),o3=At(),_zt=wn(),bzt=e3(),xzt=gC(),wzt=$m(),Ezt=Oa(),Szt=Bo().get,Tzt=t3(),Izt=VY(),Mzt=wzt("native-string-replace",String.prototype.replace),n3=RegExp.prototype.exec,JY=n3,Czt=o3("".charAt),Azt=o3("".indexOf),Ozt=o3("".replace),QY=o3("".slice),eK=function(){var e=/a/,t=/b*/g;return Qw(n3,e,"a"),Qw(n3,t,"a"),e.lastIndex!==0||t.lastIndex!==0}(),fCe=xzt.BROKEN_CARET,tK=/()??/.exec("")[1]!==void 0,Pzt=eK||tK||fCe||Tzt||Izt;Pzt&&(JY=function(t){var r=this,n=Szt(r),o=_zt(t),i=n.raw,a,u,d,h,v,b,x;if(i)return i.lastIndex=r.lastIndex,a=Qw(JY,i,o),r.lastIndex=i.lastIndex,a;var M=n.groups,O=fCe&&r.sticky,D=Qw(bzt,r),k=r.source,R=0,q=o;if(O&&(D=Ozt(D,"y",""),Azt(D,"g")===-1&&(D+="g"),q=QY(o,r.lastIndex),r.lastIndex>0&&(!r.multiline||r.multiline&&Czt(o,r.lastIndex-1)!==`
`)&&(k="(?: "+k+")",q=" "+q,R++),u=new RegExp("^(?:"+k+")",D)),tK&&(u=new RegExp("^"+k+"$(?!\\s)",D)),eK&&(d=r.lastIndex),h=Qw(n3,O?u:r,q),O?h?(h.input=QY(h.input,R),h[0]=QY(h[0],R),h.index=r.lastIndex,r.lastIndex+=h[0].length):r.lastIndex=0:eK&&h&&(r.lastIndex=r.global?h.index+h[0].length:d),tK&&h&&h.length>1&&Qw(Mzt,h[0],u,function(){for(v=1;v<arguments.length-2;v++)arguments[v]===void 0&&(h[v]=void 0)}),h&&M)for(h.groups=b=Ezt(null),v=0;v<M.length;v++)x=M[v],b[x[0]]=h[x[1]];return h});dCe.exports=JY});var a3=A(()=>{"use strict";var Nzt=ce(),hCe=i3();Nzt({target:"RegExp",proto:!0,forced:/./.exec!==hCe},{exec:hCe})});var vCe=A(()=>{"use strict";var Dzt=or(),Lzt=Hr(),kzt=Vi(),Rzt=e3(),jzt=Vt(),mCe=Dzt.RegExp,gCe=mCe.prototype,qzt=Lzt&&jzt(function(){var e=!0;try{mCe(".","d")}catch(d){e=!1}var t={},r="",n=e?"dgimsy":"gimsy",o=function(d,h){Object.defineProperty(t,d,{get:function(){return r+=h,!0}})},i={dotAll:"s",global:"g",ignoreCase:"i",multiline:"m",sticky:"y"};e&&(i.hasIndices="d");for(var a in i)o(a,i[a]);var u=Object.getOwnPropertyDescriptor(gCe,"flags").get.call(t);return u!==n||r!==n});qzt&&kzt(gCe,"flags",{configurable:!0,get:Rzt})});var _Ce=A(()=>{"use strict";var zzt=Hr(),Fzt=gC().MISSED_STICKY,Uzt=gl(),Bzt=Vi(),Vzt=Bo().get,yCe=RegExp.prototype,Gzt=TypeError;zzt&&Fzt&&Bzt(yCe,"sticky",{configurable:!0,get:function(){if(this!==yCe){if(Uzt(this)==="RegExp")return!!Vzt(this).sticky;throw new Gzt("Incompatible receiver, RegExp required")}}})});var wCe=A(()=>{"use strict";a3();var Hzt=ce(),bCe=ir(),Wzt=Nn(),xCe=ur(),$zt=wn(),Zzt=function(){var e=!1,t=/[ac]/;return t.exec=function(){return e=!0,/./.exec.apply(this,arguments)},t.test("abc")===!0&&e}(),Yzt=/./.test;Hzt({target:"RegExp",proto:!0,forced:!Zzt},{test:function(e){var t=xCe(this),r=$zt(e),n=t.exec;if(!Wzt(n))return bCe(Yzt,t,r);var o=bCe(n,t,r);return o===null?!1:(xCe(o),!0)}})});var ICe=A(()=>{"use strict";var Kzt=F1().PROPER,Xzt=Xo(),Qzt=ur(),ECe=wn(),Jzt=Vt(),eFt=Kw(),rK="toString",SCe=RegExp.prototype,TCe=SCe[rK],tFt=Jzt(function(){return TCe.call({source:"a",flags:"b"})!=="/a/b"}),rFt=Kzt&&TCe.name!==rK;(tFt||rFt)&&Xzt(SCe,rK,function(){var t=Qzt(this),r=ECe(t.source),n=ECe(eFt(t));return"/"+r+"/"+n},{unsafe:!0})});var MCe=A(()=>{"use strict";var nFt=KM(),oFt=xZ();nFt("Set",function(e){return function(){return e(this,arguments.length?arguments[0]:void 0)}},oFt)});var CCe=A(()=>{"use strict";MCe()});var Hs=A((O$r,ACe)=>{"use strict";var nK=At(),s3=Set.prototype;ACe.exports={Set,add:nK(s3.add),has:nK(s3.has),remove:nK(s3.delete),proto:s3}});var _l=A((P$r,OCe)=>{"use strict";var iFt=Hs().has;OCe.exports=function(e){return iFt(e),e}});var og=A((N$r,PCe)=>{"use strict";var aFt=ir();PCe.exports=function(e,t,r){for(var n=r?e:e.iterator,o=e.next,i,a;!(i=aFt(o,n)).done;)if(a=t(i.value),a!==void 0)return a}});var gc=A((D$r,RCe)=>{"use strict";var NCe=At(),sFt=og(),DCe=Hs(),lFt=DCe.Set,LCe=DCe.proto,uFt=NCe(LCe.forEach),kCe=NCe(LCe.keys),cFt=kCe(new lFt).next;RCe.exports=function(e,t,r){return r?sFt({iterator:kCe(e),next:cFt},t):uFt(e,t)}});var l3=A((L$r,qCe)=>{"use strict";var jCe=Hs(),pFt=gc(),fFt=jCe.Set,dFt=jCe.add;qCe.exports=function(e){var t=new fFt;return pFt(e,function(r){dFt(t,r)}),t}});var Jw=A((k$r,zCe)=>{"use strict";var hFt=DM(),mFt=Hs();zCe.exports=hFt(mFt.proto,"size","get")||function(e){return e.size}});var vy=A((R$r,HCe)=>{"use strict";var FCe=cn(),VCe=ur(),UCe=ir(),gFt=Bi(),vFt=ea(),BCe="Invalid size",yFt=RangeError,_Ft=TypeError,bFt=Math.max,GCe=function(e,t){this.set=e,this.size=bFt(t,0),this.has=FCe(e.has),this.keys=FCe(e.keys)};GCe.prototype={getIterator:function(){return vFt(VCe(UCe(this.keys,this.set)))},includes:function(e){return UCe(this.has,this.set,e)}};HCe.exports=function(e){VCe(e);var t=+e.size;if(t!==t)throw new _Ft(BCe);var r=gFt(t);if(r<0)throw new yFt(BCe);return new GCe(e,r)}});var oK=A((j$r,ZCe)=>{"use strict";var xFt=_l(),$Ce=Hs(),wFt=l3(),EFt=Jw(),SFt=vy(),TFt=gc(),IFt=og(),MFt=$Ce.has,WCe=$Ce.remove;ZCe.exports=function(t){var r=xFt(this),n=SFt(t),o=wFt(r);return EFt(r)<=n.size?TFt(r,function(i){n.includes(i)&&WCe(o,i)}):IFt(n.getIterator(),function(i){MFt(r,i)&&WCe(o,i)}),o}});var yy=A((q$r,XCe)=>{"use strict";var CFt=un(),YCe=function(e){return{size:e,has:function(){return!1},keys:function(){return{next:function(){return{done:!0}}}}}},KCe=function(e){return{size:e,has:function(){return!0},keys:function(){throw new Error("e")}}};XCe.exports=function(e,t){var r=CFt("Set");try{new r()[e](YCe(0));try{return new r()[e](YCe(-1)),!1}catch(o){if(!t)return!0;try{return new r()[e](KCe(-1/0)),!1}catch(i){var n=new r;return n.add(1),n.add(2),t(n[e](KCe(1/0)))}}}catch(o){return!1}}});var iK=A(()=>{"use strict";var AFt=ce(),OFt=oK(),PFt=yy(),NFt=!PFt("difference",function(e){return e.size===0});AFt({target:"Set",proto:!0,real:!0,forced:NFt},{difference:OFt})});var sK=A((U$r,JCe)=>{"use strict";var DFt=_l(),aK=Hs(),LFt=Jw(),kFt=vy(),RFt=gc(),jFt=og(),qFt=aK.Set,QCe=aK.add,zFt=aK.has;JCe.exports=function(t){var r=DFt(this),n=kFt(t),o=new qFt;return LFt(r)>n.size?jFt(n.getIterator(),function(i){zFt(r,i)&&QCe(o,i)}):RFt(r,function(i){n.includes(i)&&QCe(o,i)}),o}});var lK=A(()=>{"use strict";var FFt=ce(),UFt=Vt(),BFt=sK(),VFt=yy(),GFt=!VFt("intersection",function(e){return e.size===2&&e.has(1)&&e.has(2)})||UFt(function(){return String(Array.from(new Set([1,2,3]).intersection(new Set([3,2]))))!=="3,2"});FFt({target:"Set",proto:!0,real:!0,forced:GFt},{intersection:BFt})});var uK=A((G$r,eAe)=>{"use strict";var HFt=_l(),WFt=Hs().has,$Ft=Jw(),ZFt=vy(),YFt=gc(),KFt=og(),XFt=Gs();eAe.exports=function(t){var r=HFt(this),n=ZFt(t);if($Ft(r)<=n.size)return YFt(r,function(i){if(n.includes(i))return!1},!0)!==!1;var o=n.getIterator();return KFt(o,function(i){if(WFt(r,i))return XFt(o,"normal",!1)})!==!1}});var cK=A(()=>{"use strict";var QFt=ce(),JFt=uK(),e7t=yy(),t7t=!e7t("isDisjointFrom",function(e){return!e});QFt({target:"Set",proto:!0,real:!0,forced:t7t},{isDisjointFrom:JFt})});var pK=A(($$r,tAe)=>{"use strict";var r7t=_l(),n7t=Jw(),o7t=gc(),i7t=vy();tAe.exports=function(t){var r=r7t(this),n=i7t(t);return n7t(r)>n.size?!1:o7t(r,function(o){if(!n.includes(o))return!1},!0)!==!1}});var fK=A(()=>{"use strict";var a7t=ce(),s7t=pK(),l7t=yy(),u7t=!l7t("isSubsetOf",function(e){return e});a7t({target:"Set",proto:!0,real:!0,forced:u7t},{isSubsetOf:s7t})});var dK=A((K$r,rAe)=>{"use strict";var c7t=_l(),p7t=Hs().has,f7t=Jw(),d7t=vy(),h7t=og(),m7t=Gs();rAe.exports=function(t){var r=c7t(this),n=d7t(t);if(f7t(r)<n.size)return!1;var o=n.getIterator();return h7t(o,function(i){if(!p7t(r,i))return m7t(o,"normal",!1)})!==!1}});var hK=A(()=>{"use strict";var g7t=ce(),v7t=dK(),y7t=yy(),_7t=!y7t("isSupersetOf",function(e){return!e});g7t({target:"Set",proto:!0,real:!0,forced:_7t},{isSupersetOf:v7t})});var gK=A((J$r,nAe)=>{"use strict";var b7t=_l(),mK=Hs(),x7t=l3(),w7t=vy(),E7t=og(),S7t=mK.add,T7t=mK.has,I7t=mK.remove;nAe.exports=function(t){var r=b7t(this),n=w7t(t).getIterator(),o=x7t(r);return E7t(n,function(i){T7t(r,i)?I7t(o,i):S7t(o,i)}),o}});var vK=A(()=>{"use strict";var M7t=ce(),C7t=gK(),A7t=yy();M7t({target:"Set",proto:!0,real:!0,forced:!A7t("symmetricDifference")},{symmetricDifference:C7t})});var yK=A((rZr,oAe)=>{"use strict";var O7t=_l(),P7t=Hs().add,N7t=l3(),D7t=vy(),L7t=og();oAe.exports=function(t){var r=O7t(this),n=D7t(t).getIterator(),o=N7t(r);return L7t(n,function(i){P7t(o,i)}),o}});var _K=A(()=>{"use strict";var k7t=ce(),R7t=yK(),j7t=yy();k7t({target:"Set",proto:!0,real:!0,forced:!j7t("union")},{union:R7t})});var iAe=A(()=>{"use strict";var q7t=ce(),z7t=At(),F7t=Ci(),U7t=Bi(),B7t=wn(),V7t=Vt(),G7t=z7t("".charAt),H7t=V7t(function(){return"\uD842\uDFB7".at(-2)!=="\uD842"});q7t({target:"String",proto:!0,forced:H7t},{at:function(t){var r=B7t(F7t(this)),n=r.length,o=U7t(t),i=o>=0?o:n+o;return i<0||i>=n?void 0:G7t(r,i)}})});var i_=A((sZr,lAe)=>{"use strict";var bK=At(),W7t=Bi(),$7t=wn(),Z7t=Ci(),Y7t=bK("".charAt),aAe=bK("".charCodeAt),K7t=bK("".slice),sAe=function(e){return function(t,r){var n=$7t(Z7t(t)),o=W7t(r),i=n.length,a,u;return o<0||o>=i?e?"":void 0:(a=aAe(n,o),a<55296||a>56319||o+1===i||(u=aAe(n,o+1))<56320||u>57343?e?Y7t(n,o):a:e?K7t(n,o,o+2):(a-55296<<10)+(u-56320)+65536)}};lAe.exports={codeAt:sAe(!1),charAt:sAe(!0)}});var uAe=A(()=>{"use strict";var X7t=ce(),Q7t=i_().codeAt;X7t({target:"String",proto:!0},{codePointAt:function(t){return Q7t(this,t)}})});var u3=A((cZr,cAe)=>{"use strict";var J7t=mC(),e9t=TypeError;cAe.exports=function(e){if(J7t(e))throw new e9t("The method doesn't accept regular expressions");return e}});var c3=A((pZr,pAe)=>{"use strict";var t9t=on(),r9t=t9t("match");pAe.exports=function(e){var t=/./;try{"/./"[e](t)}catch(r){try{return t[r9t]=!1,"/./"[e](t)}catch(n){}}return!1}});var hAe=A(()=>{"use strict";var n9t=ce(),o9t=Kv(),i9t=Bs().f,a9t=fc(),fAe=wn(),s9t=u3(),l9t=Ci(),u9t=c3(),c9t=To(),p9t=o9t("".slice),f9t=Math.min,dAe=u9t("endsWith"),d9t=!c9t&&!dAe&&!!function(){var e=i9t(String.prototype,"endsWith");return e&&!e.writable}();n9t({target:"String",proto:!0,forced:!d9t&&!dAe},{endsWith:function(t){var r=fAe(l9t(this));s9t(t);var n=arguments.length>1?arguments[1]:void 0,o=r.length,i=n===void 0?o:f9t(a9t(n),o),a=fAe(t);return p9t(r,i-a.length,i)===a}})});var xK=A(()=>{"use strict";var h9t=ce(),m9t=At(),g9t=Jf(),v9t=RangeError,mAe=String.fromCharCode,gAe=String.fromCodePoint,y9t=m9t([].join),_9t=!!gAe&&gAe.length!==1;h9t({target:"String",stat:!0,arity:1,forced:_9t},{fromCodePoint:function(t){for(var r=[],n=arguments.length,o=0,i;n>o;){if(i=+arguments[o++],g9t(i,1114111)!==i)throw new v9t(i+" is not a valid code point");r[o]=i<65536?mAe(i):mAe(((i-=65536)>>10)+55296,i%1024+56320)}return y9t(r,"")}})});var yAe=A(()=>{"use strict";var b9t=ce(),x9t=At(),w9t=u3(),E9t=Ci(),vAe=wn(),S9t=c3(),T9t=x9t("".indexOf);b9t({target:"String",proto:!0,forced:!S9t("includes")},{includes:function(t){return!!~T9t(vAe(E9t(this)),vAe(w9t(t)),arguments.length>1?arguments[1]:void 0)}})});var wK=A(()=>{"use strict";var I9t=ce(),M9t=At(),C9t=Ci(),A9t=wn(),_Ae=M9t("".charCodeAt);I9t({target:"String",proto:!0},{isWellFormed:function(){for(var t=A9t(C9t(this)),r=t.length,n=0;n<r;n++){var o=_Ae(t,n);if((o&63488)===55296&&(o>=56320||++n>=r||(_Ae(t,n)&64512)!==56320))return!1}return!0}})});var EK=A(()=>{"use strict";var O9t=i_().charAt,P9t=wn(),xAe=Bo(),N9t=uL(),bAe=Cs(),wAe="String Iterator",D9t=xAe.set,L9t=xAe.getterFor(wAe);N9t(String,"String",function(e){D9t(this,{type:wAe,string:P9t(e),index:0})},function(){var t=L9t(this),r=t.string,n=t.index,o;return n>=r.length?bAe(void 0,!0):(o=O9t(r,n),t.index+=o.length,bAe(o,!1))})});var bC=A((wZr,MAe)=>{"use strict";a3();var EAe=ir(),SAe=Xo(),k9t=i3(),TAe=Vt(),IAe=on(),R9t=cs(),j9t=IAe("species"),SK=RegExp.prototype;MAe.exports=function(e,t,r,n){var o=IAe(e),i=!TAe(function(){var h={};return h[o]=function(){return 7},""[e](h)!==7}),a=i&&!TAe(function(){var h=!1,v=/a/;return e==="split"&&(v={},v.constructor={},v.constructor[j9t]=function(){return v},v.flags="",v[o]=/./[o]),v.exec=function(){return h=!0,null},v[o](""),!h});if(!i||!a||r){var u=/./[o],d=t(o,""[e],function(h,v,b,x,M){var O=v.exec;return O===k9t||O===SK.exec?i&&!M?{done:!0,value:EAe(u,v,b,x)}:{done:!0,value:EAe(h,b,v,x)}:{done:!1}});SAe(String.prototype,e,d[0]),SAe(SK,o,d[1])}n&&R9t(SK[o],"sham",!0)}});var xC=A((EZr,CAe)=>{"use strict";var q9t=i_().charAt;CAe.exports=function(e,t,r){return t+(r?q9t(e,t).length:1)}});var eE=A((SZr,OAe)=>{"use strict";var AAe=ir(),z9t=ur(),F9t=Nn(),U9t=gl(),B9t=i3(),V9t=TypeError;OAe.exports=function(e,t){var r=e.exec;if(F9t(r)){var n=AAe(r,e,t);return n!==null&&z9t(n),n}if(U9t(e)==="RegExp")return AAe(B9t,e,t);throw new V9t("RegExp#exec called on incompatible receiver")}});var NAe=A(()=>{"use strict";var G9t=ir(),H9t=bC(),W9t=ur(),$9t=Qr(),Z9t=fc(),TK=wn(),Y9t=Ci(),K9t=Aa(),X9t=xC(),PAe=eE();H9t("match",function(e,t,r){return[function(o){var i=Y9t(this),a=$9t(o)?K9t(o,e):void 0;return a?G9t(a,o,i):new RegExp(o)[e](TK(i))},function(n){var o=W9t(this),i=TK(n),a=r(t,o,i);if(a.done)return a.value;if(!o.global)return PAe(o,i);var u=o.unicode;o.lastIndex=0;for(var d=[],h=0,v;(v=PAe(o,i))!==null;){var b=TK(v[0]);d[h]=b,b===""&&(o.lastIndex=X9t(i,Z9t(o.lastIndex),u)),h++}return h===0?null:d}]})});var OK=A(()=>{"use strict";var Q9t=ce(),DAe=ir(),RAe=Kv(),J9t=ny(),p3=Cs(),LAe=Ci(),jAe=fc(),wC=wn(),eUt=ur(),tUt=Qr(),rUt=gl(),nUt=mC(),qAe=Kw(),oUt=Aa(),iUt=Xo(),aUt=Vt(),sUt=on(),lUt=sC(),uUt=xC(),cUt=eE(),zAe=Bo(),MK=To(),f3=sUt("matchAll"),FAe="RegExp String",UAe=FAe+" Iterator",pUt=zAe.set,fUt=zAe.getterFor(UAe),kAe=RegExp.prototype,dUt=TypeError,CK=RAe("".indexOf),d3=RAe("".matchAll),IK=!!d3&&!aUt(function(){d3("a",/./)}),hUt=J9t(function(t,r,n,o){pUt(this,{type:UAe,regexp:t,string:r,global:n,unicode:o,done:!1})},FAe,function(){var t=fUt(this);if(t.done)return p3(void 0,!0);var r=t.regexp,n=t.string,o=cUt(r,n);return o===null?(t.done=!0,p3(void 0,!0)):t.global?(wC(o[0])===""&&(r.lastIndex=uUt(n,jAe(r.lastIndex),t.unicode)),p3(o,!1)):(t.done=!0,p3(o,!1))}),AK=function(e){var t=eUt(this),r=wC(e),n=lUt(t,RegExp),o=wC(qAe(t)),i,a,u;return i=new n(n===RegExp?t.source:t,o),a=!!~CK(o,"g"),u=!!~CK(o,"u"),i.lastIndex=jAe(t.lastIndex),new hUt(i,r,a,u)};Q9t({target:"String",proto:!0,forced:IK},{matchAll:function(t){var r=LAe(this),n,o,i,a;if(tUt(t)){if(nUt(t)&&(n=wC(LAe(qAe(t))),!~CK(n,"g")))throw new dUt("`.matchAll` does not allow non-global regexes");if(IK)return d3(r,t);if(i=oUt(t,f3),i===void 0&&MK&&rUt(t)==="RegExp"&&(i=AK),i)return DAe(i,t,r)}else if(IK)return d3(r,t);return o=wC(r),a=new RegExp(t,"g"),MK?DAe(AK,a,o):a[f3](o)}});MK||f3 in kAe||iUt(kAe,f3,AK)});var PK=A((AZr,BAe)=>{"use strict";var mUt=Yf();BAe.exports=/Version\/10(?:\.\d+){1,2}(?: [\w./]+)?(?: Mobile\/\w+)? Safari\//.test(mUt)});var VAe=A(()=>{"use strict";var gUt=ce(),vUt=ZM().end,yUt=PK();gUt({target:"String",proto:!0,forced:yUt},{padEnd:function(t){return vUt(this,t,arguments.length>1?arguments[1]:void 0)}})});var GAe=A(()=>{"use strict";var _Ut=ce(),bUt=ZM().start,xUt=PK();_Ut({target:"String",proto:!0,forced:xUt},{padStart:function(t){return bUt(this,t,arguments.length>1?arguments[1]:void 0)}})});var ZAe=A(()=>{"use strict";var wUt=ce(),$Ae=At(),EUt=us(),SUt=Zn(),HAe=wn(),TUt=uo(),WAe=$Ae([].push),IUt=$Ae([].join);wUt({target:"String",stat:!0},{raw:function(t){var r=EUt(SUt(t).raw),n=TUt(r);if(!n)return"";for(var o=arguments.length,i=[],a=0;;){if(WAe(i,HAe(r[a++])),a===n)return IUt(i,"");a<o&&WAe(i,HAe(arguments[a]))}}})});var YAe=A(()=>{"use strict";var MUt=ce(),CUt=$M();MUt({target:"String",proto:!0},{repeat:CUt})});var kK=A((qZr,KAe)=>{"use strict";var LK=At(),AUt=Zn(),OUt=Math.floor,NK=LK("".charAt),PUt=LK("".replace),DK=LK("".slice),NUt=/\$([$&'`]|\d{1,2}|<[^>]*>)/g,DUt=/\$([$&'`]|\d{1,2})/g;KAe.exports=function(e,t,r,n,o,i){var a=r+e.length,u=n.length,d=DUt;return o!==void 0&&(o=AUt(o),d=NUt),PUt(i,d,function(h,v){var b;switch(NK(v,0)){case"$":return"$";case"&":return e;case"`":return DK(t,0,r);case"'":return DK(t,a);case"<":b=o[DK(v,1,-1)];break;default:var x=+v;if(x===0)return h;if(x>u){var M=OUt(x/10);return M===0?h:M<=u?n[M-1]===void 0?NK(v,1):n[M-1]+NK(v,1):h}b=n[x-1]}return b===void 0?"":b})}});var tOe=A(()=>{"use strict";var LUt=yl(),XAe=ir(),h3=At(),kUt=bC(),RUt=Vt(),jUt=ur(),qUt=Nn(),zUt=Qr(),FUt=Bi(),UUt=fc(),tE=wn(),BUt=Ci(),VUt=xC(),GUt=Aa(),HUt=kK(),WUt=eE(),$Ut=on(),jK=$Ut("replace"),ZUt=Math.max,YUt=Math.min,KUt=h3([].concat),RK=h3([].push),QAe=h3("".indexOf),JAe=h3("".slice),XUt=function(e){return e===void 0?e:String(e)},QUt=function(){return"a".replace(/./,"$0")==="$0"}(),eOe=function(){return /./[jK]?/./[jK]("a","$0")==="":!1}(),JUt=!RUt(function(){var e=/./;return e.exec=function(){var t=[];return t.groups={a:"7"},t},"".replace(e,"$<a>")!=="7"});kUt("replace",function(e,t,r){var n=eOe?"$":"$0";return[function(i,a){var u=BUt(this),d=zUt(i)?GUt(i,jK):void 0;return d?XAe(d,i,u,a):XAe(t,tE(u),i,a)},function(o,i){var a=jUt(this),u=tE(o);if(typeof i=="string"&&QAe(i,n)===-1&&QAe(i,"$<")===-1){var d=r(t,a,u,i);if(d.done)return d.value}var h=qUt(i);h||(i=tE(i));var v=a.global,b;v&&(b=a.unicode,a.lastIndex=0);for(var x=[],M;M=WUt(a,u),!(M===null||(RK(x,M),!v));){var O=tE(M[0]);O===""&&(a.lastIndex=VUt(u,UUt(a.lastIndex),b))}for(var D="",k=0,R=0;R<x.length;R++){M=x[R];for(var q=tE(M[0]),B=ZUt(YUt(FUt(M.index),u.length),0),G=[],re,Q=1;Q<M.length;Q++)RK(G,XUt(M[Q]));var ie=M.groups;if(h){var me=KUt([q],G,B,u);ie!==void 0&&RK(me,ie),re=tE(LUt(i,void 0,me))}else re=HUt(q,u,B,G,ie,i);B>=k&&(D+=JAe(u,k,B)+re,k=B+q.length)}return D+JAe(u,k)}]},!JUt||!QUt||eOe)});var FK=A(()=>{"use strict";var eBt=ce(),tBt=ir(),zK=At(),rOe=Ci(),rBt=Nn(),nBt=Qr(),oBt=mC(),rE=wn(),iBt=Aa(),aBt=Kw(),sBt=kK(),lBt=on(),uBt=To(),cBt=lBt("replace"),pBt=TypeError,qK=zK("".indexOf),fBt=zK("".replace),nOe=zK("".slice),dBt=Math.max;eBt({target:"String",proto:!0},{replaceAll:function(t,r){var n=rOe(this),o,i,a,u,d,h,v,b,x,M,O=0,D="";if(nBt(t)){if(o=oBt(t),o&&(i=rE(rOe(aBt(t))),!~qK(i,"g")))throw new pBt("`.replaceAll` does not allow non-global regexes");if(a=iBt(t,cBt),a)return tBt(a,t,n,r);if(uBt&&o)return fBt(rE(n),t,r)}for(u=rE(n),d=rE(t),h=rBt(r),h||(r=rE(r)),v=d.length,b=dBt(1,v),x=qK(u,d);x!==-1;)M=h?rE(r(d,x,u)):sBt(d,u,x,[],void 0,r),D+=nOe(u,O,x)+M,O=x+v,x=x+b>u.length?-1:qK(u,d,x+b);return O<u.length&&(D+=nOe(u,O)),D}})});var aOe=A(()=>{"use strict";var hBt=ir(),mBt=bC(),gBt=ur(),vBt=Qr(),yBt=Ci(),oOe=GL(),iOe=wn(),_Bt=Aa(),bBt=eE();mBt("search",function(e,t,r){return[function(o){var i=yBt(this),a=vBt(o)?_Bt(o,e):void 0;return a?hBt(a,o,i):new RegExp(o)[e](iOe(i))},function(n){var o=gBt(this),i=iOe(n),a=r(t,o,i);if(a.done)return a.value;var u=o.lastIndex;oOe(u,0)||(o.lastIndex=0);var d=bBt(o,i);return oOe(o.lastIndex,u)||(o.lastIndex=u),d===null?-1:d.index}]})});var pOe=A(()=>{"use strict";var UK=ir(),cOe=At(),xBt=bC(),wBt=ur(),EBt=Qr(),SBt=Ci(),TBt=sC(),IBt=xC(),MBt=fc(),sOe=wn(),CBt=Aa(),lOe=eE(),ABt=gC(),OBt=Vt(),nE=ABt.UNSUPPORTED_Y,PBt=4294967295,NBt=Math.min,BK=cOe([].push),VK=cOe("".slice),DBt=!OBt(function(){var e=/(?:)/,t=e.exec;e.exec=function(){return t.apply(this,arguments)};var r="ab".split(e);return r.length!==2||r[0]!=="a"||r[1]!=="b"}),uOe="abbc".split(/(b)*/)[1]==="c"||"test".split(/(?:)/,-1).length!==4||"ab".split(/(?:ab)*/).length!==2||".".split(/(.?)(.?)/).length!==4||".".split(/()()/).length>1||"".split(/.?/).length;xBt("split",function(e,t,r){var n="0".split(void 0,0).length?function(o,i){return o===void 0&&i===0?[]:UK(t,this,o,i)}:t;return[function(i,a){var u=SBt(this),d=EBt(i)?CBt(i,e):void 0;return d?UK(d,i,u,a):UK(n,sOe(u),i,a)},function(o,i){var a=wBt(this),u=sOe(o);if(!uOe){var d=r(n,a,u,i,n!==t);if(d.done)return d.value}var h=TBt(a,RegExp),v=a.unicode,b=(a.ignoreCase?"i":"")+(a.multiline?"m":"")+(a.unicode?"u":"")+(nE?"g":"y"),x=new h(nE?"^(?:"+a.source+")":a,b),M=i===void 0?PBt:i>>>0;if(M===0)return[];if(u.length===0)return lOe(x,u)===null?[u]:[];for(var O=0,D=0,k=[];D<u.length;){x.lastIndex=nE?0:D;var R=lOe(x,nE?VK(u,D):u),q;if(R===null||(q=NBt(MBt(x.lastIndex+(nE?D:0)),u.length))===O)D=IBt(u,D,v);else{if(BK(k,VK(u,O,D)),k.length===M)return k;for(var B=1;B<=R.length-1;B++)if(BK(k,R[B]),k.length===M)return k;D=O=q}}return BK(k,VK(u,O)),k}]},uOe||!DBt,nE)});var hOe=A(()=>{"use strict";var LBt=ce(),kBt=Kv(),RBt=Bs().f,jBt=fc(),fOe=wn(),qBt=u3(),zBt=Ci(),FBt=c3(),UBt=To(),BBt=kBt("".slice),VBt=Math.min,dOe=FBt("startsWith"),GBt=!UBt&&!dOe&&!!function(){var e=RBt(String.prototype,"startsWith");return e&&!e.writable}();LBt({target:"String",proto:!0,forced:!GBt&&!dOe},{startsWith:function(t){var r=fOe(zBt(this));qBt(t);var n=jBt(VBt(arguments.length>1?arguments[1]:void 0,r.length)),o=fOe(t);return BBt(r,n,n+o.length)===o}})});var gOe=A(()=>{"use strict";var HBt=ce(),WBt=At(),$Bt=Ci(),mOe=Bi(),ZBt=wn(),YBt=WBt("".slice),KBt=Math.max,XBt=Math.min,QBt=!"".substr||"ab".substr(-1)!=="b";HBt({target:"String",proto:!0,forced:QBt},{substr:function(t,r){var n=ZBt($Bt(this)),o=n.length,i=mOe(t),a,u;return i===1/0&&(i=0),i<0&&(i=KBt(o+i,0)),a=r===void 0?o:mOe(r),a<=0||a===1/0?"":(u=XBt(i+a,o),i>=u?"":YBt(n,i,u))}})});var $K=A(()=>{"use strict";var JBt=ce(),_Oe=ir(),WK=At(),eVt=Ci(),tVt=wn(),rVt=Vt(),nVt=Array,GK=WK("".charAt),vOe=WK("".charCodeAt),oVt=WK([].join),HK="".toWellFormed,iVt="\uFFFD",yOe=HK&&rVt(function(){return _Oe(HK,1)!=="1"});JBt({target:"String",proto:!0,forced:yOe},{toWellFormed:function(){var t=tVt(eVt(this));if(yOe)return _Oe(HK,t);for(var r=t.length,n=nVt(r),o=0;o<r;o++){var i=vOe(t,o);(i&63488)!==55296?n[o]=GK(t,o):i>=56320||o+1>=r||(vOe(t,o+1)&64512)!==56320?n[o]=iVt:(n[o]=GK(t,o),n[++o]=GK(t,o))}return oVt(n,"")}})});var m3=A((JZr,wOe)=>{"use strict";var aVt=F1().PROPER,sVt=Vt(),bOe=J1(),xOe="\u200B\x85\u180E";wOe.exports=function(e){return sVt(function(){return!!bOe[e]()||xOe[e]()!==xOe||aVt&&bOe[e].name!==e})}});var EOe=A(()=>{"use strict";var lVt=ce(),uVt=e_().trim,cVt=m3();lVt({target:"String",proto:!0,forced:cVt("trim")},{trim:function(){return uVt(this)}})});var ZK=A((rYr,SOe)=>{"use strict";var pVt=e_().end,fVt=m3();SOe.exports=fVt("trimEnd")?function(){return pVt(this)}:"".trimEnd});var IOe=A(()=>{"use strict";var dVt=ce(),TOe=ZK();dVt({target:"String",proto:!0,name:"trimEnd",forced:"".trimRight!==TOe},{trimRight:TOe})});var COe=A(()=>{"use strict";IOe();var hVt=ce(),MOe=ZK();hVt({target:"String",proto:!0,name:"trimEnd",forced:"".trimEnd!==MOe},{trimEnd:MOe})});var YK=A((sYr,AOe)=>{"use strict";var mVt=e_().start,gVt=m3();AOe.exports=gVt("trimStart")?function(){return mVt(this)}:"".trimStart});var POe=A(()=>{"use strict";var vVt=ce(),OOe=YK();vVt({target:"String",proto:!0,name:"trimStart",forced:"".trimLeft!==OOe},{trimLeft:OOe})});var DOe=A(()=>{"use strict";POe();var yVt=ce(),NOe=YK();yVt({target:"String",proto:!0,name:"trimStart",forced:"".trimStart!==NOe},{trimStart:NOe})});var vc=A((fYr,kOe)=>{"use strict";var _Vt=At(),bVt=Ci(),LOe=wn(),xVt=/"/g,wVt=_Vt("".replace);kOe.exports=function(e,t,r,n){var o=LOe(bVt(e)),i="<"+t;return r!==""&&(i+=" "+r+"=\""+wVt(LOe(n),xVt,"&quot;")+"\""),i+">"+o+"</"+t+">"}});var yc=A((dYr,ROe)=>{"use strict";var EVt=Vt();ROe.exports=function(e){return EVt(function(){var t=""[e]("\"");return t!==t.toLowerCase()||t.split("\"").length>3})}});var jOe=A(()=>{"use strict";var SVt=ce(),TVt=vc(),IVt=yc();SVt({target:"String",proto:!0,forced:IVt("anchor")},{anchor:function(t){return TVt(this,"a","name",t)}})});var qOe=A(()=>{"use strict";var MVt=ce(),CVt=vc(),AVt=yc();MVt({target:"String",proto:!0,forced:AVt("big")},{big:function(){return CVt(this,"big","","")}})});var zOe=A(()=>{"use strict";var OVt=ce(),PVt=vc(),NVt=yc();OVt({target:"String",proto:!0,forced:NVt("blink")},{blink:function(){return PVt(this,"blink","","")}})});var FOe=A(()=>{"use strict";var DVt=ce(),LVt=vc(),kVt=yc();DVt({target:"String",proto:!0,forced:kVt("bold")},{bold:function(){return LVt(this,"b","","")}})});var UOe=A(()=>{"use strict";var RVt=ce(),jVt=vc(),qVt=yc();RVt({target:"String",proto:!0,forced:qVt("fixed")},{fixed:function(){return jVt(this,"tt","","")}})});var BOe=A(()=>{"use strict";var zVt=ce(),FVt=vc(),UVt=yc();zVt({target:"String",proto:!0,forced:UVt("fontcolor")},{fontcolor:function(t){return FVt(this,"font","color",t)}})});var VOe=A(()=>{"use strict";var BVt=ce(),VVt=vc(),GVt=yc();BVt({target:"String",proto:!0,forced:GVt("fontsize")},{fontsize:function(t){return VVt(this,"font","size",t)}})});var GOe=A(()=>{"use strict";var HVt=ce(),WVt=vc(),$Vt=yc();HVt({target:"String",proto:!0,forced:$Vt("italics")},{italics:function(){return WVt(this,"i","","")}})});var HOe=A(()=>{"use strict";var ZVt=ce(),YVt=vc(),KVt=yc();ZVt({target:"String",proto:!0,forced:KVt("link")},{link:function(t){return YVt(this,"a","href",t)}})});var WOe=A(()=>{"use strict";var XVt=ce(),QVt=vc(),JVt=yc();XVt({target:"String",proto:!0,forced:JVt("small")},{small:function(){return QVt(this,"small","","")}})});var $Oe=A(()=>{"use strict";var eGt=ce(),tGt=vc(),rGt=yc();eGt({target:"String",proto:!0,forced:rGt("strike")},{strike:function(){return tGt(this,"strike","","")}})});var ZOe=A(()=>{"use strict";var nGt=ce(),oGt=vc(),iGt=yc();nGt({target:"String",proto:!0,forced:iGt("sub")},{sub:function(){return oGt(this,"sub","","")}})});var YOe=A(()=>{"use strict";var aGt=ce(),sGt=vc(),lGt=yc();aGt({target:"String",proto:!0,forced:lGt("sup")},{sup:function(){return sGt(this,"sup","","")}})});var g3=A((FYr,XOe)=>{"use strict";var KOe=or(),KK=Vt(),uGt=RM(),cGt=Vn().NATIVE_ARRAY_BUFFER_VIEWS,pGt=KOe.ArrayBuffer,a_=KOe.Int8Array;XOe.exports=!cGt||!KK(function(){a_(1)})||!KK(function(){new a_(-1)})||!uGt(function(e){new a_,new a_(null),new a_(1.5),new a_(e)},!0)||KK(function(){return new a_(new pGt(2),1,void 0).length!==1})});var XK=A((UYr,QOe)=>{"use strict";var fGt=qw(),dGt=RangeError;QOe.exports=function(e,t){var r=fGt(e);if(r%t)throw new dGt("Wrong offset");return r}});var QK=A((BYr,JOe)=>{"use strict";var hGt=Math.round;JOe.exports=function(e){var t=hGt(e);return t<0?0:t>255?255:t&255}});var v3=A((VYr,e4e)=>{"use strict";var mGt=Ou();e4e.exports=function(e){var t=mGt(e);return t==="BigInt64Array"||t==="BigUint64Array"}});var EC=A((GYr,t4e)=>{"use strict";var gGt=yM(),vGt=TypeError;t4e.exports=function(e){var t=gGt(e,"number");if(typeof t=="number")throw new vGt("Can't convert number to bigint");return BigInt(t)}});var JK=A((HYr,r4e)=>{"use strict";var yGt=ai(),_Gt=ir(),bGt=aC(),xGt=Zn(),wGt=uo(),EGt=ey(),SGt=hh(),TGt=tL(),IGt=v3(),MGt=Vn().aTypedArrayConstructor,CGt=EC();r4e.exports=function(t){var r=bGt(this),n=xGt(t),o=arguments.length,i=o>1?arguments[1]:void 0,a=i!==void 0,u=SGt(n),d,h,v,b,x,M,O,D;if(u&&!TGt(u))for(O=EGt(n,u),D=O.next,n=[];!(M=_Gt(D,O)).done;)n.push(M.value);for(a&&o>2&&(i=yGt(i,arguments[2])),h=wGt(n),v=new(MGt(r))(h),b=IGt(v),d=0;h>d;d++)x=a?i(n[d],d):n[d],v[d]=b?CGt(x):+x;return v}});var bh=A((WYr,aX)=>{"use strict";var n4e=ce(),h4e=or(),o4e=ir(),AGt=Hr(),OGt=g3(),MC=Vn(),m4e=WM(),i4e=Jl(),PGt=cc(),SC=cs(),NGt=UL(),DGt=fc(),a4e=Ow(),eX=XK(),LGt=QK(),g4e=fh(),TC=Fn(),kGt=Ou(),nX=Qr(),RGt=Wm(),jGt=Oa(),qGt=vl(),y3=jp(),zGt=Yv().f,s4e=JK(),FGt=Pa().forEach,UGt=iy(),BGt=Vi(),v4e=_i(),y4e=Bs(),l4e=Xm(),sX=Bo(),VGt=Jv(),oX=sX.get,GGt=sX.set,HGt=sX.enforce,_4e=v4e.f,WGt=y4e.f,tX=h4e.RangeError,b4e=m4e.ArrayBuffer,$Gt=b4e.prototype,ZGt=m4e.DataView,_3=MC.NATIVE_ARRAY_BUFFER_VIEWS,u4e=MC.TYPED_ARRAY_TAG,c4e=MC.TypedArray,IC=MC.TypedArrayPrototype,iX=MC.isTypedArray,b3="BYTES_PER_ELEMENT",rX="Wrong length",x3=function(e,t){BGt(e,t,{configurable:!0,get:function(){return oX(this)[t]}})},p4e=function(e){var t;return qGt($Gt,e)||(t=kGt(e))==="ArrayBuffer"||t==="SharedArrayBuffer"},x4e=function(e,t){return iX(e)&&!RGt(t)&&t in e&&NGt(+t)&&t>=0},f4e=function(t,r){return r=g4e(r),x4e(t,r)?PGt(2,t[r]):WGt(t,r)},d4e=function(t,r,n){return r=g4e(r),x4e(t,r)&&nX(n)&&TC(n,"value")&&!TC(n,"get")&&!TC(n,"set")&&!n.configurable&&(!TC(n,"writable")||n.writable)&&(!TC(n,"enumerable")||n.enumerable)?(t[r]=n.value,t):_4e(t,r,n)};AGt?(_3||(y4e.f=f4e,v4e.f=d4e,x3(IC,"buffer"),x3(IC,"byteOffset"),x3(IC,"byteLength"),x3(IC,"length")),n4e({target:"Object",stat:!0,forced:!_3},{getOwnPropertyDescriptor:f4e,defineProperty:d4e}),aX.exports=function(e,t,r){var n=e.match(/\d+/)[0]/8,o=e+(r?"Clamped":"")+"Array",i="get"+e,a="set"+e,u=h4e[o],d=u,h=d&&d.prototype,v={},b=function(D,k){var R=oX(D);return R.view[i](k*n+R.byteOffset,!0)},x=function(D,k,R){var q=oX(D);q.view[a](k*n+q.byteOffset,r?LGt(R):R,!0)},M=function(D,k){_4e(D,k,{get:function(){return b(this,k)},set:function(R){return x(this,k,R)},enumerable:!0})};_3?OGt&&(d=t(function(D,k,R,q){return i4e(D,h),VGt(function(){return nX(k)?p4e(k)?q!==void 0?new u(k,eX(R,n),q):R!==void 0?new u(k,eX(R,n)):new u(k):iX(k)?l4e(d,k):o4e(s4e,d,k):new u(a4e(k))}(),D,d)}),y3&&y3(d,c4e),FGt(zGt(u),function(D){D in d||SC(d,D,u[D])}),d.prototype=h):(d=t(function(D,k,R,q){i4e(D,h);var B=0,G=0,re,Q,ie;if(!nX(k))ie=a4e(k),Q=ie*n,re=new b4e(Q);else if(p4e(k)){re=k,G=eX(R,n);var me=k.byteLength;if(q===void 0){if(me%n)throw new tX(rX);if(Q=me-G,Q<0)throw new tX(rX)}else if(Q=DGt(q)*n,Q+G>me)throw new tX(rX);ie=Q/n}else return iX(k)?l4e(d,k):o4e(s4e,d,k);for(GGt(D,{buffer:re,byteOffset:G,byteLength:Q,length:ie,view:new ZGt(re)});B<ie;)M(D,B++)}),y3&&y3(d,c4e),h=d.prototype=jGt(IC)),h.constructor!==d&&SC(h,"constructor",d),HGt(h).TypedArrayConstructor=d,u4e&&SC(h,u4e,o);var O=d!==u;v[o]=d,n4e({global:!0,constructor:!0,forced:O,sham:!_3},v),b3 in d||SC(d,b3,n),b3 in h||SC(h,b3,n),UGt(o)}):aX.exports=function(){}});var w4e=A(()=>{"use strict";var YGt=bh();YGt("Float32",function(e){return function(r,n,o){return e(this,r,n,o)}})});var E4e=A(()=>{"use strict";var KGt=bh();KGt("Float64",function(e){return function(r,n,o){return e(this,r,n,o)}})});var S4e=A(()=>{"use strict";var XGt=bh();XGt("Int8",function(e){return function(r,n,o){return e(this,r,n,o)}})});var T4e=A(()=>{"use strict";var QGt=bh();QGt("Int16",function(e){return function(r,n,o){return e(this,r,n,o)}})});var I4e=A(()=>{"use strict";var JGt=bh();JGt("Int32",function(e){return function(r,n,o){return e(this,r,n,o)}})});var M4e=A(()=>{"use strict";var eHt=bh();eHt("Uint8",function(e){return function(r,n,o){return e(this,r,n,o)}})});var C4e=A(()=>{"use strict";var tHt=bh();tHt("Uint8",function(e){return function(r,n,o){return e(this,r,n,o)}},!0)});var A4e=A(()=>{"use strict";var rHt=bh();rHt("Uint16",function(e){return function(r,n,o){return e(this,r,n,o)}})});var O4e=A(()=>{"use strict";var nHt=bh();nHt("Uint32",function(e){return function(r,n,o){return e(this,r,n,o)}})});var lX=A(()=>{"use strict";var P4e=Vn(),oHt=uo(),iHt=Bi(),aHt=P4e.aTypedArray,sHt=P4e.exportTypedArrayMethod;sHt("at",function(t){var r=aHt(this),n=oHt(r),o=iHt(t),i=o>=0?o:n+o;return i<0||i>=n?void 0:r[i]})});var D4e=A(()=>{"use strict";var lHt=At(),N4e=Vn(),uHt=cW(),cHt=lHt(uHt),pHt=N4e.aTypedArray,fHt=N4e.exportTypedArrayMethod;fHt("copyWithin",function(t,r){return cHt(pHt(this),t,r,arguments.length>2?arguments[2]:void 0)})});var k4e=A(()=>{"use strict";var L4e=Vn(),dHt=Pa().every,hHt=L4e.aTypedArray,mHt=L4e.exportTypedArrayMethod;mHt("every",function(t){return dHt(hHt(this),t,arguments.length>1?arguments[1]:void 0)})});var j4e=A(()=>{"use strict";var R4e=Vn(),gHt=iL(),vHt=EC(),yHt=Ou(),_Ht=ir(),bHt=At(),xHt=Vt(),wHt=R4e.aTypedArray,EHt=R4e.exportTypedArrayMethod,SHt=bHt("".slice),THt=xHt(function(){var e=0;return new Int8Array(2).fill({valueOf:function(){return e++}}),e!==1});EHt("fill",function(t){var r=arguments.length;wHt(this);var n=SHt(yHt(this),0,3)==="Big"?vHt(t):+t;return _Ht(gHt,this,n,r>1?arguments[1]:void 0,r>2?arguments[2]:void 0)},THt)});var w3=A((_Kr,q4e)=>{"use strict";var IHt=Xm(),MHt=Vn().getTypedArrayConstructor;q4e.exports=function(e,t){return IHt(MHt(e),t)}});var F4e=A(()=>{"use strict";var z4e=Vn(),CHt=Pa().filter,AHt=w3(),OHt=z4e.aTypedArray,PHt=z4e.exportTypedArrayMethod;PHt("filter",function(t){var r=CHt(OHt(this),t,arguments.length>1?arguments[1]:void 0);return AHt(this,r)})});var B4e=A(()=>{"use strict";var U4e=Vn(),NHt=Pa().find,DHt=U4e.aTypedArray,LHt=U4e.exportTypedArrayMethod;LHt("find",function(t){return NHt(DHt(this),t,arguments.length>1?arguments[1]:void 0)})});var G4e=A(()=>{"use strict";var V4e=Vn(),kHt=Pa().findIndex,RHt=V4e.aTypedArray,jHt=V4e.exportTypedArrayMethod;jHt("findIndex",function(t){return kHt(RHt(this),t,arguments.length>1?arguments[1]:void 0)})});var uX=A(()=>{"use strict";var H4e=Vn(),qHt=kM().findLast,zHt=H4e.aTypedArray,FHt=H4e.exportTypedArrayMethod;FHt("findLast",function(t){return qHt(zHt(this),t,arguments.length>1?arguments[1]:void 0)})});var cX=A(()=>{"use strict";var W4e=Vn(),UHt=kM().findLastIndex,BHt=W4e.aTypedArray,VHt=W4e.exportTypedArrayMethod;VHt("findLastIndex",function(t){return UHt(BHt(this),t,arguments.length>1?arguments[1]:void 0)})});var Z4e=A(()=>{"use strict";var $4e=Vn(),GHt=Pa().forEach,HHt=$4e.aTypedArray,WHt=$4e.exportTypedArrayMethod;WHt("forEach",function(t){GHt(HHt(this),t,arguments.length>1?arguments[1]:void 0)})});var Y4e=A(()=>{"use strict";var $Ht=g3(),ZHt=Vn().exportTypedArrayStaticMethod,YHt=JK();ZHt("from",YHt,$Ht)});var X4e=A(()=>{"use strict";var K4e=Vn(),KHt=ww().includes,XHt=K4e.aTypedArray,QHt=K4e.exportTypedArrayMethod;QHt("includes",function(t){return KHt(XHt(this),t,arguments.length>1?arguments[1]:void 0)})});var J4e=A(()=>{"use strict";var Q4e=Vn(),JHt=ww().indexOf,eWt=Q4e.aTypedArray,tWt=Q4e.exportTypedArrayMethod;tWt("indexOf",function(t){return JHt(eWt(this),t,arguments.length>1?arguments[1]:void 0)})});var oPe=A(()=>{"use strict";var rWt=or(),nWt=Vt(),pX=At(),tPe=Vn(),fX=zM(),oWt=on(),dX=oWt("iterator"),ePe=rWt.Uint8Array,iWt=pX(fX.values),aWt=pX(fX.keys),sWt=pX(fX.entries),hX=tPe.aTypedArray,E3=tPe.exportTypedArrayMethod,oE=ePe&&ePe.prototype,S3=!nWt(function(){oE[dX].call([1])}),rPe=!!oE&&oE.values&&oE[dX]===oE.values&&oE.values.name==="values",nPe=function(){return iWt(hX(this))};E3("entries",function(){return sWt(hX(this))},S3);E3("keys",function(){return aWt(hX(this))},S3);E3("values",nPe,S3||!rPe,{name:"values"});E3(dX,nPe,S3||!rPe,{name:"values"})});var aPe=A(()=>{"use strict";var iPe=Vn(),lWt=At(),uWt=iPe.aTypedArray,cWt=iPe.exportTypedArrayMethod,pWt=lWt([].join);cWt("join",function(t){return pWt(uWt(this),t)})});var lPe=A(()=>{"use strict";var sPe=Vn(),fWt=yl(),dWt=IW(),hWt=sPe.aTypedArray,mWt=sPe.exportTypedArrayMethod;mWt("lastIndexOf",function(t){var r=arguments.length;return fWt(dWt,hWt(this),r>1?[t,arguments[1]]:[t])})});var uPe=A(()=>{"use strict";var mX=Vn(),gWt=Pa().map,vWt=mX.aTypedArray,yWt=mX.getTypedArrayConstructor,_Wt=mX.exportTypedArrayMethod;_Wt("map",function(t){return gWt(vWt(this),t,arguments.length>1?arguments[1]:void 0,function(r,n){return new(yWt(r))(n)})})});var pPe=A(()=>{"use strict";var cPe=Vn(),bWt=g3(),xWt=cPe.aTypedArrayConstructor,wWt=cPe.exportTypedArrayStaticMethod;wWt("of",function(){for(var t=0,r=arguments.length,n=new(xWt(this))(r);r>t;)n[t]=arguments[t++];return n},bWt)});var dPe=A(()=>{"use strict";var fPe=Vn(),EWt=FM().left,SWt=fPe.aTypedArray,TWt=fPe.exportTypedArrayMethod;TWt("reduce",function(t){var r=arguments.length;return EWt(SWt(this),t,r,r>1?arguments[1]:void 0)})});var mPe=A(()=>{"use strict";var hPe=Vn(),IWt=FM().right,MWt=hPe.aTypedArray,CWt=hPe.exportTypedArrayMethod;CWt("reduceRight",function(t){var r=arguments.length;return IWt(MWt(this),t,r,r>1?arguments[1]:void 0)})});var vPe=A(()=>{"use strict";var gPe=Vn(),AWt=gPe.aTypedArray,OWt=gPe.exportTypedArrayMethod,PWt=Math.floor;OWt("reverse",function(){for(var t=this,r=AWt(t).length,n=PWt(r/2),o=0,i;o<n;)i=t[o],t[o++]=t[--r],t[r]=i;return t})});var EPe=A(()=>{"use strict";var _Pe=or(),bPe=ir(),yX=Vn(),NWt=uo(),DWt=XK(),LWt=Zn(),xPe=Vt(),kWt=_Pe.RangeError,gX=_Pe.Int8Array,yPe=gX&&gX.prototype,wPe=yPe&&yPe.set,RWt=yX.aTypedArray,jWt=yX.exportTypedArrayMethod,vX=!xPe(function(){var e=new Uint8ClampedArray(2);return bPe(wPe,e,{length:1,0:3},1),e[1]!==3}),qWt=vX&&yX.NATIVE_ARRAY_BUFFER_VIEWS&&xPe(function(){var e=new gX(2);return e.set(1),e.set("2",1),e[0]!==0||e[1]!==2});jWt("set",function(t){RWt(this);var r=DWt(arguments.length>1?arguments[1]:void 0,1),n=LWt(t);if(vX)return bPe(wPe,this,n,r);var o=this.length,i=NWt(n),a=0;if(i+r>o)throw new kWt("Wrong length");for(;a<i;)this[r+a]=n[a++]},!vX||qWt)});var SPe=A(()=>{"use strict";var _X=Vn(),zWt=Vt(),FWt=dc(),UWt=_X.aTypedArray,BWt=_X.getTypedArrayConstructor,VWt=_X.exportTypedArrayMethod,GWt=zWt(function(){new Int8Array(1).slice()});VWt("slice",function(t,r){for(var n=FWt(UWt(this),t,r),o=BWt(this),i=0,a=n.length,u=new o(a);a>i;)u[i]=n[i++];return u},GWt)});var IPe=A(()=>{"use strict";var TPe=Vn(),HWt=Pa().some,WWt=TPe.aTypedArray,$Wt=TPe.exportTypedArrayMethod;$Wt("some",function(t){return HWt(WWt(this),t,arguments.length>1?arguments[1]:void 0)})});var NPe=A(()=>{"use strict";var ZWt=or(),YWt=Kv(),bX=Vt(),KWt=cn(),XWt=dL(),PPe=Vn(),MPe=AW(),QWt=OW(),CPe=Xf(),APe=hL(),JWt=PPe.aTypedArray,e$t=PPe.exportTypedArrayMethod,CC=ZWt.Uint16Array,iE=CC&&YWt(CC.prototype.sort),t$t=!!iE&&!(bX(function(){iE(new CC(2),null)})&&bX(function(){iE(new CC(2),{})})),OPe=!!iE&&!bX(function(){if(CPe)return CPe<74;if(MPe)return MPe<67;if(QWt)return!0;if(APe)return APe<602;var e=new CC(516),t=Array(516),r,n;for(r=0;r<516;r++)n=r%4,e[r]=515-r,t[r]=r-2*n+3;for(iE(e,function(o,i){return(o/4|0)-(i/4|0)}),r=0;r<516;r++)if(e[r]!==t[r])return!0}),r$t=function(e){return function(t,r){return e!==void 0?+e(t,r)||0:r!==r?-1:t!==t?1:t===0&&r===0?1/t>0&&1/r<0?1:-1:t>r}};e$t("sort",function(t){return t!==void 0&&KWt(t),OPe?iE(this,t):XWt(JWt(this),r$t(t))},!OPe||t$t)});var LPe=A(()=>{"use strict";var xX=Vn(),n$t=fc(),DPe=Jf(),o$t=xX.aTypedArray,i$t=xX.getTypedArrayConstructor,a$t=xX.exportTypedArrayMethod;a$t("subarray",function(t,r){var n=o$t(this),o=n.length,i=DPe(t,o),a=i$t(n);return new a(n.buffer,n.byteOffset+i*n.BYTES_PER_ELEMENT,n$t((r===void 0?o:DPe(r,o))-i))})});var zPe=A(()=>{"use strict";var s$t=or(),l$t=yl(),jPe=Vn(),wX=Vt(),kPe=dc(),T3=s$t.Int8Array,RPe=jPe.aTypedArray,u$t=jPe.exportTypedArrayMethod,qPe=[].toLocaleString,c$t=!!T3&&wX(function(){qPe.call(new T3(1))}),p$t=wX(function(){return[1,2].toLocaleString()!==new T3([1,2]).toLocaleString()})||!wX(function(){T3.prototype.toLocaleString.call([1,2])});u$t("toLocaleString",function(){return l$t(qPe,c$t?kPe(RPe(this)):RPe(this),kPe(arguments))},p$t)});var SX=A(()=>{"use strict";var f$t=DW(),EX=Vn(),d$t=EX.aTypedArray,h$t=EX.exportTypedArrayMethod,m$t=EX.getTypedArrayConstructor;h$t("toReversed",function(){return f$t(d$t(this),m$t(this))})});var TX=A(()=>{"use strict";var I3=Vn(),g$t=At(),v$t=cn(),y$t=Xm(),_$t=I3.aTypedArray,b$t=I3.getTypedArrayConstructor,x$t=I3.exportTypedArrayMethod,w$t=g$t(I3.TypedArrayPrototype.sort);x$t("toSorted",function(t){t!==void 0&&v$t(t);var r=_$t(this),n=y$t(b$t(r),r);return w$t(n,t)})});var UPe=A(()=>{"use strict";var E$t=Vn().exportTypedArrayMethod,S$t=Vt(),T$t=or(),I$t=At(),FPe=T$t.Uint8Array,M$t=FPe&&FPe.prototype||{},M3=[].toString,C$t=I$t([].join);S$t(function(){M3.call({})})&&(M3=function(){return C$t(this)});var A$t=M$t.toString!==M3;E$t("toString",M3,A$t)});var MX=A(()=>{"use strict";var O$t=qW(),IX=Vn(),P$t=v3(),N$t=Bi(),D$t=EC(),L$t=IX.aTypedArray,k$t=IX.getTypedArrayConstructor,R$t=IX.exportTypedArrayMethod,j$t=!!function(){try{new Int8Array(1).with(2,{valueOf:function(){throw 8}})}catch(e){return e===8}}();R$t("with",function(e,t){var r=L$t(this),n=N$t(e),o=P$t(r)?D$t(t):+t;return O$t(r,k$t(r),n,o)},!j$t)});var WPe=A(()=>{"use strict";var q$t=ce(),CX=At(),z$t=wn(),BPe=String.fromCharCode,VPe=CX("".charAt),GPe=CX(/./.exec),HPe=CX("".slice),F$t=/^[\da-f]{2}$/i,U$t=/^[\da-f]{4}$/i;q$t({global:!0},{unescape:function(t){for(var r=z$t(t),n="",o=r.length,i=0,a,u;i<o;){if(a=VPe(r,i++),a==="%"){if(VPe(r,i)==="u"){if(u=HPe(r,i+1,i+5),GPe(U$t,u)){n+=BPe(parseInt(u,16)),i+=5;continue}}else if(u=HPe(r,i,i+2),GPe(F$t,u)){n+=BPe(parseInt(u,16)),i+=2;continue}}n+=a}return n}})});var PX=A((wXr,QPe)=>{"use strict";var B$t=At(),$Pe=Fp(),C3=fy().getWeakData,V$t=Jl(),G$t=ur(),H$t=pc(),AX=Qr(),W$t=ca(),YPe=Pa(),ZPe=Fn(),KPe=Bo(),$$t=KPe.set,Z$t=KPe.getterFor,Y$t=YPe.find,K$t=YPe.findIndex,X$t=B$t([].splice),Q$t=0,A3=function(e){return e.frozen||(e.frozen=new XPe)},XPe=function(){this.entries=[]},OX=function(e,t){return Y$t(e.entries,function(r){return r[0]===t})};XPe.prototype={get:function(e){var t=OX(this,e);if(t)return t[1]},has:function(e){return!!OX(this,e)},set:function(e,t){var r=OX(this,e);r?r[1]=t:this.entries.push([e,t])},delete:function(e){var t=K$t(this.entries,function(r){return r[0]===e});return~t&&X$t(this.entries,t,1),!!~t}};QPe.exports={getConstructor:function(e,t,r,n){var o=e(function(d,h){V$t(d,i),$$t(d,{type:t,id:Q$t++,frozen:null}),H$t(h)||W$t(h,d[n],{that:d,AS_ENTRIES:r})}),i=o.prototype,a=Z$t(t),u=function(d,h,v){var b=a(d),x=C3(G$t(h),!0);return x===!0?A3(b).set(h,v):x[b.id]=v,d};return $Pe(i,{delete:function(d){var h=a(this);if(!AX(d))return!1;var v=C3(d);return v===!0?A3(h).delete(d):v&&ZPe(v,h.id)&&delete v[h.id]},has:function(h){var v=a(this);if(!AX(h))return!1;var b=C3(h);return b===!0?A3(v).has(h):b&&ZPe(b,v.id)}}),$Pe(i,r?{get:function(h){var v=a(this);if(AX(h)){var b=C3(h);if(b===!0)return A3(v).get(h);if(b)return b[v.id]}},set:function(h,v){return u(this,h,v)}}:{add:function(h){return u(this,h,!0)}}),o}}});var aNe=A(()=>{"use strict";var J$t=rg(),JPe=or(),D3=At(),eNe=Fp(),eZt=fy(),tZt=KM(),tNe=PX(),O3=Qr(),P3=Bo().enforce,rZt=Vt(),nZt=fH(),PC=Object,oZt=Array.isArray,N3=PC.isExtensible,rNe=PC.isFrozen,iZt=PC.isSealed,nNe=PC.freeze,aZt=PC.seal,sZt=!JPe.ActiveXObject&&"ActiveXObject"in JPe,AC,oNe=function(e){return function(){return e(this,arguments.length?arguments[0]:void 0)}},iNe=tZt("WeakMap",oNe,tNe),aE=iNe.prototype,L3=D3(aE.set),lZt=function(){return J$t&&rZt(function(){var e=nNe([]);return L3(new iNe,e,1),!rNe(e)})};nZt&&(sZt?(AC=tNe.getConstructor(oNe,"WeakMap",!0),eZt.enable(),NX=D3(aE.delete),OC=D3(aE.has),DX=D3(aE.get),eNe(aE,{delete:function(e){if(O3(e)&&!N3(e)){var t=P3(this);return t.frozen||(t.frozen=new AC),NX(this,e)||t.frozen.delete(e)}return NX(this,e)},has:function(t){if(O3(t)&&!N3(t)){var r=P3(this);return r.frozen||(r.frozen=new AC),OC(this,t)||r.frozen.has(t)}return OC(this,t)},get:function(t){if(O3(t)&&!N3(t)){var r=P3(this);return r.frozen||(r.frozen=new AC),OC(this,t)?DX(this,t):r.frozen.get(t)}return DX(this,t)},set:function(t,r){if(O3(t)&&!N3(t)){var n=P3(this);n.frozen||(n.frozen=new AC),OC(this,t)?L3(this,t,r):n.frozen.set(t,r)}else L3(this,t,r);return this}})):lZt()&&eNe(aE,{set:function(t,r){var n;return oZt(t)&&(rNe(t)?n=nNe:iZt(t)&&(n=aZt)),L3(this,t,r),n&&n(t),this}}));var NX,OC,DX});var k3=A(()=>{"use strict";aNe()});var sNe=A(()=>{"use strict";var uZt=KM(),cZt=PX();uZt("WeakSet",function(e){return function(){return e(this,arguments.length?arguments[0]:void 0)}},cZt)});var lNe=A(()=>{"use strict";sNe()});var uNe=A(()=>{"use strict";oW()});var fNe=A(()=>{"use strict";var pZt=ce(),fZt=or(),dZt=vl(),cNe=ps(),j3=jp(),hZt=B1(),pNe=Oa(),R3=cs(),LX=cc(),mZt=X5(),gZt=$1(),vZt=on(),yZt=Vt(),_Zt=To(),sE=fZt.SuppressedError,bZt=vZt("toStringTag"),q3=Error,xZt=!!sE&&sE.length!==3,wZt=!!sE&&yZt(function(){return new sE(1,2,3,{cause:4}).cause===4}),z3=xZt||wZt,s_=function(t,r,n){var o=dZt(NC,this),i;return j3?i=z3&&(!o||cNe(this)===NC)?new sE:j3(new q3,o?cNe(this):NC):(i=o?this:pNe(NC),R3(i,bZt,"Error")),n!==void 0&&R3(i,"message",gZt(n)),mZt(i,s_,i.stack,1),R3(i,"error",t),R3(i,"suppressed",r),i};j3?j3(s_,q3):hZt(s_,q3,{name:!0});var NC=s_.prototype=z3?sE.prototype:pNe(q3.prototype,{constructor:LX(1,s_),message:LX(1,""),name:LX(1,"SuppressedError")});z3&&!_Zt&&(NC.constructor=s_);pZt({global:!0,constructor:!0,arity:3,forced:z3},{SuppressedError:s_})});var lE=A((kXr,bNe)=>{"use strict";var vNe=or(),yNe=vM(),_Ne=Nn(),EZt=Oa(),F3=ps(),SZt=Xo(),TZt=on(),IZt=To(),dNe="USE_FUNCTION_CONSTRUCTOR",hNe=TZt("asyncIterator"),mNe=vNe.AsyncIterator,gNe=yNe.AsyncIteratorPrototype,xh,kX;if(gNe)xh=gNe;else if(_Ne(mNe))xh=mNe.prototype;else if(yNe[dNe]||vNe[dNe])try{kX=F3(F3(F3(Function("return async function*(){}()")()))),F3(kX)===Object.prototype&&(xh=kX)}catch(e){}xh?IZt&&(xh=EZt(xh)):xh={};_Ne(xh[hNe])||SZt(xh,hNe,function(){return this});bNe.exports=xh});var DC=A((RXr,ANe)=>{"use strict";var xNe=ir(),wNe=ur(),MZt=Oa(),CZt=Aa(),AZt=Fp(),TNe=Bo(),OZt=Gs(),PZt=un(),NZt=lE(),INe=Cs(),RX=PZt("Promise"),MNe="AsyncFromSyncIterator",DZt=TNe.set,ENe=TNe.getterFor(MNe),SNe=function(e,t,r,n,o){var i=e.done;RX.resolve(e.value).then(function(a){t(INe(a,i))},function(a){if(!i&&o)try{OZt(n,"throw",a)}catch(u){a=u}r(a)})},CNe=function(t){t.type=MNe,DZt(this,t)};CNe.prototype=AZt(MZt(NZt),{next:function(){var t=ENe(this);return new RX(function(r,n){var o=wNe(xNe(t.next,t.iterator));SNe(o,r,n,t.iterator,!0)})},return:function(){var e=ENe(this).iterator;return new RX(function(t,r){var n=CZt(e,"return");if(n===void 0)return t(INe(void 0,!0));var o=wNe(xNe(n,e));SNe(o,t,r,e)})}});ANe.exports=CNe});var PNe=A((jXr,ONe)=>{"use strict";var LZt=ir(),kZt=DC(),RZt=ur(),jZt=ey(),qZt=ea(),zZt=Aa(),FZt=on(),UZt=FZt("asyncIterator");ONe.exports=function(e,t){var r=arguments.length<2?zZt(e,UZt):t;return r?RZt(LZt(r,e)):new kZt(qZt(jZt(e)))}});var uE=A((qXr,NNe)=>{"use strict";var BZt=ir(),VZt=un(),GZt=Aa();NNe.exports=function(e,t,r,n){try{var o=GZt(e,"return");if(o)return VZt("Promise").resolve(BZt(o,e)).then(function(){t(r)},function(i){n(i)})}catch(i){return n(i)}t(r)}});var l_=A((zXr,DNe)=>{"use strict";var HZt=ir(),WZt=cn(),jX=ur(),$Zt=Qr(),ZZt=ty(),YZt=un(),KZt=ea(),qX=uE(),LC=function(e){var t=e===0,r=e===1,n=e===2,o=e===3;return function(i,a,u){jX(i);var d=a!==void 0;(d||!t)&&WZt(a);var h=KZt(i),v=YZt("Promise"),b=h.iterator,x=h.next,M=0;return new v(function(O,D){var k=function(q){qX(b,D,q,D)},R=function(){try{if(d)try{ZZt(M)}catch(q){k(q)}v.resolve(jX(HZt(x,b))).then(function(q){try{if(jX(q).done)t?(u.length=M,O(u)):O(o?!1:n||void 0);else{var B=q.value;try{if(d){var G=a(B,M),re=function(Q){if(r)R();else if(n)Q?R():qX(b,O,!1,D);else if(t)try{u[M++]=Q,R()}catch(ie){k(ie)}else Q?qX(b,O,o||B,D):R()};$Zt(G)?v.resolve(G).then(re,k):re(G)}else u[M++]=B,R()}catch(Q){k(Q)}}}catch(Q){D(Q)}},D)}catch(q){D(q)}};R()})}};DNe.exports={toArray:LC(0),forEach:LC(1),every:LC(2),some:LC(3),find:LC(4)}});var zX=A((FXr,jNe)=>{"use strict";var XZt=ai(),LNe=At(),QZt=Zn(),JZt=td(),eYt=PNe(),tYt=ey(),rYt=ea(),nYt=hh(),oYt=Aa(),iYt=un(),aYt=kW(),sYt=on(),lYt=DC(),uYt=l_().toArray,cYt=sYt("asyncIterator"),kNe=LNe(aYt("Array","values")),pYt=LNe(kNe([]).next),fYt=function(){return new RNe(this)},RNe=function(e){this.iterator=kNe(e)};RNe.prototype.next=function(){return pYt(this.iterator)};jNe.exports=function(t){var r=this,n=arguments.length,o=n>1?arguments[1]:void 0,i=n>2?arguments[2]:void 0;return new(iYt("Promise"))(function(a){var u=QZt(t);o!==void 0&&(o=XZt(o,i));var d=oYt(u,cYt),h=d?void 0:nYt(u)||fYt,v=JZt(r)?new r:[],b=d?eYt(u,d):new lYt(rYt(tYt(u,h)));a(uYt(b,o,v))})}});var zNe=A(()=>{"use strict";var dYt=ce(),hYt=zX(),mYt=Vt(),qNe=Array.fromAsync,gYt=!qNe||mYt(function(){var e=0;return qNe.call(function(){return e++,[]},{length:0}),e!==1});dYt({target:"Array",stat:!0,forced:gYt},{fromAsync:hYt})});var FNe=A(()=>{"use strict";lW()});var UNe=A(()=>{"use strict";var vYt=ce(),yYt=Pa().filterReject,_Yt=pa();vYt({target:"Array",proto:!0,forced:!0},{filterOut:function(t){return yYt(this,t,arguments.length>1?arguments[1]:void 0)}});_Yt("filterOut")});var BNe=A(()=>{"use strict";var bYt=ce(),xYt=Pa().filterReject,wYt=pa();bYt({target:"Array",proto:!0,forced:!0},{filterReject:function(t){return xYt(this,t,arguments.length>1?arguments[1]:void 0)}});wYt("filterReject")});var VNe=A(()=>{"use strict";dW()});var GNe=A(()=>{"use strict";hW()});var U3=A((JXr,HNe)=>{"use strict";var EYt=ai(),SYt=At(),TYt=Hm(),IYt=Zn(),MYt=fh(),CYt=uo(),AYt=Oa(),OYt=Xm(),PYt=Array,NYt=SYt([].push);HNe.exports=function(e,t,r,n){for(var o=IYt(e),i=TYt(o),a=EYt(t,r),u=AYt(null),d=CYt(i),h=0,v,b,x;d>h;h++)x=i[h],b=MYt(a(x,h,o)),b in u?NYt(u[b],x):u[b]=[x];if(n&&(v=n(o),v!==PYt))for(b in u)u[b]=OYt(v,u[b]);return u}});var WNe=A(()=>{"use strict";var DYt=ce(),LYt=U3(),kYt=pa();DYt({target:"Array",proto:!0},{group:function(t){var r=arguments.length>1?arguments[1]:void 0;return LYt(this,t,r)}});kYt("group")});var $Ne=A(()=>{"use strict";var RYt=ce(),jYt=U3(),qYt=zp(),zYt=pa();RYt({target:"Array",proto:!0,forced:!qYt("groupBy")},{groupBy:function(t){var r=arguments.length>1?arguments[1]:void 0;return jYt(this,t,r)}});zYt("groupBy")});var FX=A((oQr,ZNe)=>{"use strict";var FYt=ai(),UYt=At(),BYt=Hm(),VYt=Zn(),GYt=uo(),B3=As(),HYt=B3.Map,WYt=B3.get,$Yt=B3.has,ZYt=B3.set,YYt=UYt([].push);ZNe.exports=function(t){for(var r=VYt(this),n=BYt(r),o=FYt(t,arguments.length>1?arguments[1]:void 0),i=new HYt,a=GYt(n),u=0,d,h;a>u;u++)h=n[u],d=o(h,u,r),$Yt(i,d)?YYt(WYt(i,d),h):ZYt(i,d,[h]);return i}});var YNe=A(()=>{"use strict";var KYt=ce(),XYt=zp(),QYt=pa(),JYt=FX(),eKt=To();KYt({target:"Array",proto:!0,name:"groupToMap",forced:eKt||!XYt("groupByToMap")},{groupByToMap:JYt});QYt("groupByToMap")});var KNe=A(()=>{"use strict";var tKt=ce(),rKt=pa(),nKt=FX(),oKt=To();tKt({target:"Array",proto:!0,forced:oKt},{groupToMap:nKt});rKt("groupToMap")});var JNe=A(()=>{"use strict";var iKt=ce(),aKt=ed(),XNe=Object.isFrozen,QNe=function(e,t){if(!XNe||!aKt(e)||!XNe(e))return!1;for(var r=0,n=e.length,o;r<n;)if(o=e[r++],!(typeof o=="string"||t&&o===void 0))return!1;return n!==0};iKt({target:"Array",stat:!0,sham:!0,forced:!0},{isTemplateObject:function(t){if(!QNe(t,!0))return!1;var r=t.raw;return r.length===t.length&&QNe(r,!1)}})});var eDe=A(()=>{"use strict";var sKt=Hr(),lKt=pa(),uKt=Zn(),cKt=uo(),pKt=Vi();sKt&&(pKt(Array.prototype,"lastIndex",{configurable:!0,get:function(){var t=uKt(this),r=cKt(t);return r===0?0:r-1}}),lKt("lastIndex"))});var nDe=A(()=>{"use strict";var fKt=Hr(),dKt=pa(),tDe=Zn(),rDe=uo(),hKt=Vi();fKt&&(hKt(Array.prototype,"lastItem",{configurable:!0,get:function(){var t=tDe(this),r=rDe(t);return r===0?void 0:t[r-1]},set:function(t){var r=tDe(this),n=rDe(r);return r[n===0?0:n-1]=t}}),dKt("lastItem"))});var oDe=A(()=>{"use strict";LW()});var iDe=A(()=>{"use strict";RW()});var aDe=A(()=>{"use strict";jW()});var Up=A((xQr,pDe)=>{"use strict";var sDe=At(),mKt=og(),lDe=As(),gKt=lDe.Map,uDe=lDe.proto,vKt=sDe(uDe.forEach),cDe=sDe(uDe.entries),yKt=cDe(new gKt).next;pDe.exports=function(e,t,r){return r?mKt({iterator:cDe(e),next:yKt},function(n){return t(n[1],n[0])}):vKt(e,t)}});var V3=A((wQr,fDe)=>{"use strict";var _Kt=At(),bKt=cn(),xKt=pc(),wKt=uo(),EKt=Zn(),UX=As(),SKt=Up(),TKt=UX.Map,IKt=UX.has,MKt=UX.set,CKt=_Kt([].push);fDe.exports=function(t){var r=EKt(this),n=wKt(r),o=[],i=new TKt,a=xKt(t)?function(v){return v}:bKt(t),u,d,h;for(u=0;u<n;u++)d=r[u],h=a(d),IKt(i,h)||MKt(i,h,d);return SKt(i,function(v){CKt(o,v)}),o}});var dDe=A(()=>{"use strict";var AKt=ce(),OKt=pa(),PKt=V3();AKt({target:"Array",proto:!0,forced:!0},{uniqueBy:PKt});OKt("uniqueBy")});var hDe=A(()=>{"use strict";zW()});var mDe=A(()=>{"use strict";f$()});var gDe=A(()=>{"use strict";M$()});var vDe=A(()=>{"use strict";C$()});var VX=A((DQr,wDe)=>{"use strict";var NKt=un(),DKt=ir(),LKt=At(),kKt=ai(),RKt=ur(),jKt=cn(),bDe=pc(),BX=Aa(),xDe=on(),qKt=xDe("asyncDispose"),yDe=xDe("dispose"),zKt=LKt([].push),FKt=function(e,t){if(t==="async-dispose"){var r=BX(e,qKt);return r!==void 0||(r=BX(e,yDe),r===void 0)?r:function(){var n=this,o=NKt("Promise");return new o(function(i){DKt(r,n),i(void 0)})}}return BX(e,yDe)},_De=function(e,t,r){return arguments.length<3&&!bDe(e)&&(r=jKt(FKt(RKt(e),t))),r===void 0?function(){}:kKt(r,e)};wDe.exports=function(e,t,r,n){var o;if(arguments.length<4){if(bDe(t)&&r==="sync-dispose")return;o=_De(t,r)}else o=_De(void 0,r,n);zKt(e.stack,o)}});var ODe=A(()=>{"use strict";var UKt=ce(),H3=Hr(),IDe=un(),EDe=cn(),BKt=Jl(),MDe=Xo(),VKt=Fp(),GKt=Vi(),CDe=on(),ADe=Bo(),GX=VX(),SDe=Xf(),TDe=IDe("Promise"),HKt=IDe("SuppressedError"),WKt=ReferenceError,$Kt=CDe("asyncDispose"),ZKt=CDe("toStringTag"),$3="AsyncDisposableStack",YKt=ADe.set,W3=ADe.getterFor($3),HX="async-dispose",kC="disposed",KKt="pending",G3=function(e){var t=W3(e);if(t.state===kC)throw new WKt($3+" already disposed");return t},WX=function(){YKt(BKt(this,cE),{type:$3,state:KKt,stack:[]}),H3||(this.disposed=!1)},cE=WX.prototype;VKt(cE,{disposeAsync:function(){var t=this;return new TDe(function(r,n){var o=W3(t);if(o.state===kC)return r(void 0);o.state=kC,H3||(t.disposed=!0);var i=o.stack,a=i.length,u=!1,d,h=function(b){u?d=new HKt(b,d):(u=!0,d=b),v()},v=function(){if(a){var b=i[--a];i[a]=null;try{TDe.resolve(b()).then(v,h)}catch(x){h(x)}}else o.stack=null,u?n(d):r(void 0)};v()})},use:function(t){return GX(G3(this),t,HX),t},adopt:function(t,r){var n=G3(this);return EDe(r),GX(n,void 0,HX,function(){return r(t)}),t},defer:function(t){var r=G3(this);EDe(t),GX(r,void 0,HX,t)},move:function(){var t=G3(this),r=new WX;return W3(r).stack=t.stack,t.stack=[],t.state=kC,H3||(this.disposed=!0),r}});H3&&GKt(cE,"disposed",{configurable:!0,get:function(){return W3(this).state===kC}});MDe(cE,$Kt,cE.disposeAsync,{name:"disposeAsync"});MDe(cE,ZKt,$3,{nonWritable:!0});var XKt=SDe&&SDe<136;UKt({global:!0,constructor:!0,forced:XKt},{AsyncDisposableStack:WX})});var kDe=A(()=>{"use strict";var QKt=ce(),JKt=Jl(),eXt=ps(),NDe=cs(),DDe=Fn(),tXt=on(),_y=lE(),LDe=To(),PDe=tXt("toStringTag"),rXt=TypeError,$X=function(){if(JKt(this,_y),eXt(this)===_y)throw new rXt("Abstract class AsyncIterator not directly constructable")};$X.prototype=_y;DDe(_y,PDe)||NDe(_y,PDe,"AsyncIterator");(LDe||!DDe(_y,"constructor")||_y.constructor===Object)&&NDe(_y,"constructor",$X);QKt({global:!0,constructor:!0,forced:LDe},{AsyncIterator:$X})});var u_=A((qQr,VDe)=>{"use strict";var nXt=ir(),Z3=dy(),RDe=ur(),oXt=Oa(),iXt=cs(),aXt=Fp(),sXt=on(),qDe=Bo(),lXt=un(),uXt=Aa(),cXt=lE(),ZX=Cs(),jDe=Gs(),wh=lXt("Promise"),pXt=sXt("toStringTag"),zDe="AsyncIteratorHelper",FDe="WrapForValidAsyncIterator",fXt=qDe.set,UDe=function(e){var t=!e,r=qDe.getterFor(e?FDe:zDe),n=function(o){var i=Z3(function(){return r(o)}),a=i.error,u=i.value;return a||t&&u.done?{exit:!0,value:a?wh.reject(u):wh.resolve(ZX(void 0,!0))}:{exit:!1,value:u}};return aXt(oXt(cXt),{next:function(){var i=n(this),a=i.value;if(i.exit)return a;var u=Z3(function(){return RDe(a.nextHandler(wh))}),d=u.error,h=u.value;return d&&(a.done=!0),d?wh.reject(h):wh.resolve(h)},return:function(){var o=n(this),i=o.value;if(o.exit)return i;i.done=!0;var a=i.iterator,u,d,h=Z3(function(){if(i.inner)try{jDe(i.inner.iterator,"normal")}catch(v){return jDe(a,"throw",v)}return uXt(a,"return")});return u=d=h.value,h.error?wh.reject(d):u===void 0?wh.resolve(ZX(void 0,!0)):(h=Z3(function(){return nXt(u,a)}),d=h.value,h.error?wh.reject(d):e?wh.resolve(d):wh.resolve(d).then(function(v){return RDe(v),ZX(void 0,!0)}))}})},dXt=UDe(!0),BDe=UDe(!1);iXt(BDe,pXt,"Async Iterator Helper");VDe.exports=function(e,t){var r=function(o,i){i?(i.iterator=o.iterator,i.next=o.next):i=o,i.type=t?FDe:zDe,i.nextHandler=e,i.counter=0,i.done=!1,fXt(this,i)};return r.prototype=t?dXt:BDe,r}});var KX=A((zQr,HDe)=>{"use strict";var hXt=ir(),mXt=cn(),YX=ur(),gXt=Qr(),vXt=ea(),yXt=u_(),GDe=Cs(),_Xt=uE(),bXt=yXt(function(e){var t=this,r=t.iterator,n=t.mapper;return new e(function(o,i){var a=function(d){t.done=!0,i(d)},u=function(d){_Xt(r,a,d,a)};e.resolve(YX(hXt(t.next,r))).then(function(d){try{if(YX(d).done)t.done=!0,o(GDe(void 0,!0));else{var h=d.value;try{var v=n(h,t.counter++),b=function(x){o(GDe(x,!1))};gXt(v)?e.resolve(v).then(b,u):b(v)}catch(x){u(x)}}}catch(x){a(x)}},a)})});HDe.exports=function(t){return YX(this),mXt(t),new bXt(vXt(this),{mapper:t})}});var XX=A((FQr,WDe)=>{"use strict";var xXt=ir(),wXt=KX(),EXt=function(e,t){return[t,e]};WDe.exports=function(){return xXt(wXt,this,EXt)}});var $De=A(()=>{"use strict";var SXt=ce(),TXt=XX();SXt({target:"AsyncIterator",name:"indexed",proto:!0,real:!0,forced:!0},{asIndexedPairs:TXt})});var XDe=A(()=>{"use strict";var IXt=ir(),MXt=Xo(),CXt=un(),AXt=Aa(),OXt=Fn(),PXt=on(),ZDe=lE(),YDe=PXt("asyncDispose"),KDe=CXt("Promise");OXt(ZDe,YDe)||MXt(ZDe,YDe,function(){var e=this;return new KDe(function(t,r){var n=AXt(e,"return");n?KDe.resolve(IXt(n,e)).then(function(){t(void 0)},r):t(void 0)})})});var JDe=A(()=>{"use strict";var NXt=ce(),DXt=ir(),QX=ur(),LXt=ea(),kXt=jw(),RXt=qw(),jXt=u_(),QDe=Cs(),qXt=jXt(function(e){var t=this;return new e(function(r,n){var o=function(a){t.done=!0,n(a)},i=function(){try{e.resolve(QX(DXt(t.next,t.iterator))).then(function(a){try{QX(a).done?(t.done=!0,r(QDe(void 0,!0))):t.remaining?(t.remaining--,i()):r(QDe(a.value,!1))}catch(u){o(u)}},o)}catch(a){o(a)}};i()})});NXt({target:"AsyncIterator",proto:!0,real:!0,forced:!0},{drop:function(t){QX(this);var r=RXt(kXt(+t));return new qXt(LXt(this),{remaining:r})}})});var e5e=A(()=>{"use strict";var zXt=ce(),FXt=l_().every;zXt({target:"AsyncIterator",proto:!0,real:!0,forced:!0},{every:function(t){return FXt(this,t)}})});var r5e=A(()=>{"use strict";var UXt=ce(),BXt=ir(),VXt=cn(),JX=ur(),GXt=Qr(),HXt=ea(),WXt=u_(),t5e=Cs(),$Xt=uE(),ZXt=WXt(function(e){var t=this,r=t.iterator,n=t.predicate;return new e(function(o,i){var a=function(h){t.done=!0,i(h)},u=function(h){$Xt(r,a,h,a)},d=function(){try{e.resolve(JX(BXt(t.next,r))).then(function(h){try{if(JX(h).done)t.done=!0,o(t5e(void 0,!0));else{var v=h.value;try{var b=n(v,t.counter++),x=function(M){M?o(t5e(v,!1)):d()};GXt(b)?e.resolve(b).then(x,u):x(b)}catch(M){u(M)}}}catch(M){a(M)}},a)}catch(h){a(h)}};d()})});UXt({target:"AsyncIterator",proto:!0,real:!0,forced:!0},{filter:function(t){return JX(this),VXt(t),new ZXt(HXt(this),{predicate:t})}})});var n5e=A(()=>{"use strict";var YXt=ce(),KXt=l_().find;YXt({target:"AsyncIterator",proto:!0,real:!0,forced:!0},{find:function(t){return KXt(this,t)}})});var eQ=A((JQr,a5e)=>{"use strict";var XXt=ir(),QXt=Nn(),o5e=ur(),i5e=ea(),JXt=hh(),eQt=Aa(),tQt=on(),rQt=DC(),nQt=tQt("asyncIterator");a5e.exports=function(e){var t=o5e(e),r=!0,n=eQt(t,nQt),o;return QXt(n)||(n=JXt(t),r=!1),n!==void 0?o=XXt(n,t):(o=t,r=!0),o5e(o),i5e(r?o:new rQt(i5e(o)))}});var u5e=A(()=>{"use strict";var oQt=ce(),s5e=ir(),iQt=cn(),RC=ur(),aQt=Qr(),sQt=ea(),lQt=u_(),l5e=Cs(),uQt=eQ(),cQt=uE(),pQt=lQt(function(e){var t=this,r=t.iterator,n=t.mapper;return new e(function(o,i){var a=function(v){t.done=!0,i(v)},u=function(v){cQt(r,a,v,a)},d=function(){try{e.resolve(RC(s5e(t.next,r))).then(function(v){try{if(RC(v).done)t.done=!0,o(l5e(void 0,!0));else{var b=v.value;try{var x=n(b,t.counter++),M=function(O){try{t.inner=uQt(O),h()}catch(D){u(D)}};aQt(x)?e.resolve(x).then(M,u):M(x)}catch(O){u(O)}}}catch(O){a(O)}},a)}catch(v){a(v)}},h=function(){var v=t.inner;if(v)try{e.resolve(RC(s5e(v.next,v.iterator))).then(function(b){try{RC(b).done?(t.inner=null,d()):o(l5e(b.value,!1))}catch(x){u(x)}},u)}catch(b){u(b)}else d()};h()})});oQt({target:"AsyncIterator",proto:!0,real:!0,forced:!0},{flatMap:function(t){return RC(this),iQt(t),new pQt(sQt(this),{mapper:t,inner:null})}})});var c5e=A(()=>{"use strict";var fQt=ce(),dQt=l_().forEach;fQt({target:"AsyncIterator",proto:!0,real:!0,forced:!0},{forEach:function(t){return dQt(this,t)}})});var tQ=A((oJr,p5e)=>{"use strict";var hQt=ir(),mQt=u_();p5e.exports=mQt(function(){return hQt(this.next,this.iterator)},!0)});var f5e=A(()=>{"use strict";var gQt=ce(),vQt=Zn(),yQt=vl(),_Qt=eQ(),bQt=lE(),xQt=tQ();gQt({target:"AsyncIterator",stat:!0,forced:!0},{from:function(t){var r=_Qt(typeof t=="string"?vQt(t):t);return yQt(bQt,r.iterator)?r.iterator:new xQt(r)}})});var d5e=A(()=>{"use strict";var wQt=ce(),EQt=XX();wQt({target:"AsyncIterator",proto:!0,real:!0,forced:!0},{indexed:EQt})});var h5e=A(()=>{"use strict";var SQt=ce(),TQt=KX();SQt({target:"AsyncIterator",proto:!0,real:!0,forced:!0},{map:TQt})});var m5e=A(()=>{"use strict";var IQt=ce(),MQt=ir(),CQt=cn(),rQ=ur(),AQt=Qr(),OQt=un(),PQt=ea(),NQt=uE(),nQ=OQt("Promise"),DQt=TypeError;IQt({target:"AsyncIterator",proto:!0,real:!0,forced:!0},{reduce:function(t){rQ(this),CQt(t);var r=PQt(this),n=r.iterator,o=r.next,i=arguments.length<2,a=i?void 0:arguments[1],u=0;return new nQ(function(d,h){var v=function(x){NQt(n,h,x,h)},b=function(){try{nQ.resolve(rQ(MQt(o,n))).then(function(x){try{if(rQ(x).done)i?h(new DQt("Reduce of empty iterator with no initial value")):d(a);else{var M=x.value;if(i)i=!1,a=M,b();else try{var O=t(a,M,u),D=function(k){a=k,b()};AQt(O)?nQ.resolve(O).then(D,v):D(O)}catch(k){v(k)}}u++}catch(k){h(k)}},h)}catch(x){h(x)}};b()})}})});var g5e=A(()=>{"use strict";var LQt=ce(),kQt=l_().some;LQt({target:"AsyncIterator",proto:!0,real:!0,forced:!0},{some:function(t){return kQt(this,t)}})});var _5e=A(()=>{"use strict";var RQt=ce(),v5e=ir(),y5e=ur(),jQt=ea(),qQt=jw(),zQt=qw(),FQt=u_(),oQ=Cs(),UQt=FQt(function(e){var t=this,r=t.iterator,n;if(!t.remaining--){var o=oQ(void 0,!0);return t.done=!0,n=r.return,n!==void 0?e.resolve(v5e(n,r,void 0)).then(function(){return o}):o}return e.resolve(v5e(t.next,r)).then(function(i){return y5e(i).done?(t.done=!0,oQ(void 0,!0)):oQ(i.value,!1)}).then(null,function(i){throw t.done=!0,i})});RQt({target:"AsyncIterator",proto:!0,real:!0,forced:!0},{take:function(t){y5e(this);var r=zQt(qQt(+t));return new UQt(jQt(this),{remaining:r})}})});var b5e=A(()=>{"use strict";var BQt=ce(),VQt=l_().toArray;BQt({target:"AsyncIterator",proto:!0,real:!0,forced:!0},{toArray:function(){return VQt(this,void 0,[])}})});var K3=A((_Jr,I5e)=>{"use strict";var w5e=Bo(),GQt=ny(),iQ=Cs(),HQt=pc(),WQt=Qr(),$Qt=Vi(),E5e=Hr(),jC="Incorrect Iterator.range arguments",sQ="NumericRangeIterator",ZQt=w5e.set,S5e=w5e.getterFor(sQ),x5e=RangeError,aQ=TypeError,T5e=GQt(function(t,r,n,o,i,a){if(typeof t!=o||r!==1/0&&r!==-1/0&&typeof r!=o)throw new aQ(jC);if(t===1/0||t===-1/0)throw new x5e(jC);var u=r>t,d=!1,h;if(n===void 0)h=void 0;else if(WQt(n))h=n.step,d=!!n.inclusive;else if(typeof n==o)h=n;else throw new aQ(jC);if(HQt(h)&&(h=u?a:-a),typeof h!=o)throw new aQ(jC);if(h===1/0||h===-1/0||h===i&&t!==r)throw new x5e(jC);var v=t!==t||r!==r||h!==h||r>t!=h>i;ZQt(this,{type:sQ,start:t,end:r,step:h,inclusive:d,hitsEnd:v,currentCount:i,zero:i}),E5e||(this.start=t,this.end=r,this.step=h,this.inclusive=d)},sQ,function(){var t=S5e(this);if(t.hitsEnd)return iQ(void 0,!0);var r=t.start,n=t.end,o=t.step,i=r+o*t.currentCount++;i===n&&(t.hitsEnd=!0);var a=t.inclusive,u;return n>r?u=a?i>n:i>=n:u=a?n>i:n>=i,u?(t.hitsEnd=!0,iQ(void 0,!0)):iQ(i,!1)}),Y3=function(e){$Qt(T5e.prototype,e,{get:function(){return S5e(this)[e]},set:function(){},configurable:!0,enumerable:!1})};E5e&&(Y3("start"),Y3("end"),Y3("inclusive"),Y3("step"));I5e.exports=T5e});var M5e=A(()=>{"use strict";var YQt=ce(),KQt=K3();typeof BigInt=="function"&&YQt({target:"BigInt",stat:!0,forced:!0},{range:function(t,r,n){return new KQt(t,r,n,"bigint",BigInt(0),BigInt(1))}})});var lQ=A((wJr,P5e)=>{"use strict";RL();k3();var O5e=un(),XQt=Oa(),C5e=Qr(),QQt=Object,JQt=TypeError,eJt=O5e("Map"),tJt=O5e("WeakMap"),X3=function(){this.object=null,this.symbol=null,this.primitives=null,this.objectsByIndex=XQt(null)};X3.prototype.get=function(e,t){return this[e]||(this[e]=t())};X3.prototype.next=function(e,t,r){var n=r?this.objectsByIndex[e]||(this.objectsByIndex[e]=new tJt):this.primitives||(this.primitives=new eJt),o=n.get(t);return o||n.set(t,o=new X3),o};var A5e=new X3;P5e.exports=function(){var e=A5e,t=arguments.length,r,n;for(r=0;r<t;r++)C5e(n=arguments[r])&&(e=e.next(r,n,!0));if(this===QQt&&e===A5e)throw new JQt("Composite keys must contain a non-primitive component");for(r=0;r<t;r++)C5e(n=arguments[r])||(e=e.next(r,n,!1));return e}});var D5e=A(()=>{"use strict";var rJt=ce(),nJt=yl(),oJt=lQ(),iJt=un(),N5e=Oa(),aJt=Object,sJt=function(){var e=iJt("Object","freeze");return e?e(N5e(null)):N5e(null)};rJt({global:!0,forced:!0},{compositeKey:function(){return nJt(oJt,aJt,arguments).get("object",sJt)}})});var k5e=A(()=>{"use strict";var lJt=ce(),uJt=lQ(),L5e=un(),cJt=yl();lJt({global:!0,forced:!0},{compositeSymbol:function(){return arguments.length===1&&typeof arguments[0]=="string"?L5e("Symbol").for(arguments[0]):cJt(uJt,null,arguments).get("symbol",L5e("Symbol"))}})});var R5e=A(()=>{"use strict";i$()});var j5e=A(()=>{"use strict";var pJt=ce(),fJt=At(),dJt=fJt(DataView.prototype.getUint8);pJt({target:"DataView",proto:!0,forced:!0},{getUint8Clamped:function(t){return dJt(this,t)}})});var q5e=A(()=>{"use strict";u$()});var z5e=A(()=>{"use strict";var hJt=ce(),mJt=At(),gJt=a$(),vJt=Ow(),yJt=QK(),_Jt=mJt(DataView.prototype.setUint8);hJt({target:"DataView",proto:!0,forced:!0},{setUint8Clamped:function(t,r){gJt(this);var n=vJt(t);return _Jt(this,n,yJt(r))}})});var G5e=A(()=>{"use strict";var bJt=ce(),J3=Hr(),xJt=un(),F5e=cn(),wJt=Jl(),U5e=Xo(),EJt=Fp(),SJt=Vi(),B5e=on(),V5e=Bo(),uQ=VX(),TJt=xJt("SuppressedError"),IJt=ReferenceError,MJt=B5e("dispose"),CJt=B5e("toStringTag"),tk="DisposableStack",AJt=V5e.set,ek=V5e.getterFor(tk),cQ="sync-dispose",qC="disposed",OJt="pending",Q3=function(e){var t=ek(e);if(t.state===qC)throw new IJt(tk+" already disposed");return t},pQ=function(){AJt(wJt(this,pE),{type:tk,state:OJt,stack:[]}),J3||(this.disposed=!1)},pE=pQ.prototype;EJt(pE,{dispose:function(){var t=ek(this);if(t.state!==qC){t.state=qC,J3||(this.disposed=!0);for(var r=t.stack,n=r.length,o=!1,i;n;){var a=r[--n];r[n]=null;try{a()}catch(u){o?i=new TJt(u,i):(o=!0,i=u)}}if(t.stack=null,o)throw i}},use:function(t){return uQ(Q3(this),t,cQ),t},adopt:function(t,r){var n=Q3(this);return F5e(r),uQ(n,void 0,cQ,function(){r(t)}),t},defer:function(t){var r=Q3(this);F5e(t),uQ(r,void 0,cQ,t)},move:function(){var t=Q3(this),r=new pQ;return ek(r).stack=t.stack,t.stack=[],t.state=qC,J3||(this.disposed=!0),r}});J3&&SJt(pE,"disposed",{configurable:!0,get:function(){return ek(this).state===qC}});U5e(pE,MJt,pE.dispose,{name:"dispose"});U5e(pE,CJt,tk,{nonWritable:!0});bJt({global:!0,constructor:!0},{DisposableStack:pQ})});var Z5e=A(()=>{"use strict";var PJt=ce(),W5e=un(),NJt=Qr(),DJt=Ou(),LJt=Vt(),$5e="Error",dQ="DOMException",kJt=Object.setPrototypeOf||{}.__proto__,H5e=W5e(dQ),fQ=Error,rk=fQ.isError,RJt=!rk||!kJt||LJt(function(){return H5e&&!rk(new H5e(dQ))||!rk(new fQ($5e,{cause:function(){}}))||rk(W5e("Object","create")(fQ.prototype))});PJt({target:"Error",stat:!0,sham:!0,forced:RJt},{isError:function(t){if(!NJt(t))return!1;var r=DJt(t);return r===$5e||r===dQ}})});var hQ=A((zJr,Y5e)=>{"use strict";var jJt=At(),qJt=cn();Y5e.exports=function(){return jJt(qJt(this))}});var K5e=A(()=>{"use strict";var zJt=ce(),FJt=hQ();zJt({target:"Function",proto:!0,forced:!0},{demethodize:FJt})});var Q5e=A(()=>{"use strict";var UJt=ce(),BJt=At(),VJt=Nn(),GJt=bM(),HJt=Fn(),WJt=Hr(),$Jt=Object.getOwnPropertyDescriptor,X5e=/^\s*class\b/,ZJt=BJt(X5e.exec),YJt=function(e){try{if(!WJt||!ZJt(X5e,GJt(e)))return!1}catch(r){}var t=$Jt(e,"prototype");return!!t&&HJt(t,"writable")&&!t.writable};UJt({target:"Function",stat:!0,sham:!0,forced:!0},{isCallable:function(t){return VJt(t)&&!YJt(t)}})});var J5e=A(()=>{"use strict";var KJt=ce(),XJt=td();KJt({target:"Function",stat:!0,forced:!0},{isConstructor:XJt})});var rLe=A(()=>{"use strict";var QJt=on(),JJt=_i().f,eLe=QJt("metadata"),tLe=Function.prototype;tLe[eLe]===void 0&&JJt(tLe,eLe,{value:null})});var nLe=A(()=>{"use strict";var eer=ce(),ter=hQ();eer({target:"Function",proto:!0,forced:!0,name:"demethodize"},{unThis:ter})});var oLe=A(()=>{"use strict";k$()});var iLe=A(()=>{"use strict";F$()});var mQ=A((een,aLe)=>{"use strict";PL();var rer=ir(),ner=ry().IteratorPrototype.map,oer=function(e,t){return[t,e]};aLe.exports=function(){return rer(ner,this,oer)}});var sLe=A(()=>{"use strict";var ier=ce(),aer=mQ();ier({target:"Iterator",name:"indexed",proto:!0,real:!0,forced:!0},{asIndexedPairs:aer})});var cLe=A(()=>{"use strict";var ser=ce(),lLe=ir(),ler=cn(),uLe=ur(),uer=hh(),cer=py(),per=Cs(),fer=Array,der=cer(function(){for(;;){var e=this.iterator;if(!e){var t=this.nextIterableIndex++,r=this.iterables;if(t>=r.length)return this.done=!0,per(void 0,!0);var n=r[t];this.iterables[t]=null,e=this.iterator=lLe(n.method,n.iterable),this.next=e.next}var o=uLe(lLe(this.next,e));if(o.done){this.iterator=null,this.next=null;continue}return o}},!1,!0);ser({target:"Iterator",stat:!0,forced:!0},{concat:function(){for(var t=arguments.length,r=fer(t),n=0;n<t;n++){var o=uLe(arguments[n]);r[n]={iterable:o,method:ler(uer(o))}}return new der({iterables:r,nextIterableIndex:0,iterator:null,next:null})}})});var dLe=A(()=>{"use strict";var her=ir(),mer=Xo(),ger=Aa(),ver=Fn(),yer=on(),pLe=ry().IteratorPrototype,fLe=yer("dispose");ver(pLe,fLe)||mer(pLe,fLe,function(){var e=ger(this,"return");e&&her(e,this)})});var hLe=A(()=>{"use strict";H$()});var mLe=A(()=>{"use strict";$$()});var gLe=A(()=>{"use strict";Y$()});var vLe=A(()=>{"use strict";X$()});var yLe=A(()=>{"use strict";nZ()});var _Le=A(()=>{"use strict";iZ()});var bLe=A(()=>{"use strict";aZ()});var xLe=A(()=>{"use strict";var _er=ce(),ber=mQ();_er({target:"Iterator",proto:!0,real:!0,forced:!0},{indexed:ber})});var wLe=A(()=>{"use strict";PL()});var SLe=A(()=>{"use strict";var xer=ce(),ELe=K3(),wer=TypeError;xer({target:"Iterator",stat:!0,forced:!0},{range:function(t,r,n){if(typeof t=="number")return new ELe(t,r,n,"number",0,1);if(typeof t=="bigint")return new ELe(t,r,n,"bigint",BigInt(0),BigInt(1));throw new wer("Incorrect Iterator.range arguments")}})});var TLe=A(()=>{"use strict";uZ()});var ILe=A(()=>{"use strict";pZ()});var MLe=A(()=>{"use strict";dZ()});var CLe=A(()=>{"use strict";hZ()});var OLe=A(()=>{"use strict";var Eer=ce(),Ser=ur(),Ter=DC(),Ier=tQ(),ALe=ea();Eer({target:"Iterator",proto:!0,real:!0,forced:!0},{toAsync:function(){return new Ier(ALe(new Ter(ALe(Ser(this)))))}})});var gQ=A((jen,PLe)=>{"use strict";var Mer=Vt();PLe.exports=!Mer(function(){var e="9007199254740993",t=JSON.rawJSON(e);return!JSON.isRawJSON(t)||JSON.stringify(t)!==e})});var vQ=A((qen,NLe)=>{"use strict";var Cer=Qr(),Aer=Bo().get;NLe.exports=function(t){if(!Cer(t))return!1;var r=Aer(t);return!!r&&r.type==="RawJSON"}});var DLe=A(()=>{"use strict";var Oer=ce(),Per=gQ(),Ner=vQ();Oer({target:"JSON",stat:!0,forced:!Per},{isRawJSON:Ner})});var _Q=A((Uen,jLe)=>{"use strict";var yQ=At(),Der=Fn(),nk=SyntaxError,Ler=parseInt,ker=String.fromCharCode,Rer=yQ("".charAt),LLe=yQ("".slice),kLe=yQ(/./.exec),RLe={"\\\"":"\"","\\\\":"\\","\\/":"/","\\b":"\b","\\f":"\f","\\n":`
`,"\\r":"\r","\\t":"\t"},jer=/^[\da-f]{4}$/i,qer=/^[\u0000-\u001F]$/;jLe.exports=function(e,t){for(var r=!0,n="";t<e.length;){var o=Rer(e,t);if(o==="\\"){var i=LLe(e,t,t+2);if(Der(RLe,i))n+=RLe[i],t+=2;else if(i==="\\u"){t+=2;var a=LLe(e,t,t+4);if(!kLe(jer,a))throw new nk("Bad Unicode escape at: "+t);n+=ker(Ler(a,16)),t+=4}else throw new nk("Unknown escape sequence: \""+i+"\"")}else if(o==="\""){r=!1,t++;break}else{if(kLe(qer,o))throw new nk("Bad control character in string literal at: "+t);n+=o,t++}}if(r)throw new nk("Unterminated string at: "+t);return{value:n,end:t}}});var HLe=A(()=>{"use strict";var zer=ce(),Fer=Hr(),MQ=or(),Uer=un(),ok=At(),Ber=ir(),VLe=Nn(),Ver=Qr(),Ger=ed(),Her=Fn(),Wer=wn(),qLe=uo(),SQ=qp(),GLe=Vt(),$er=_Q(),Zer=Wv(),zLe=MQ.JSON,Yer=MQ.Number,fE=MQ.SyntaxError,CQ=zLe&&zLe.parse,Ker=Uer("Object","keys"),Xer=Object.getOwnPropertyDescriptor,bl=ok("".charAt),bQ=ok("".slice),xQ=ok(/./.exec),FLe=ok([].push),wQ=/^\d$/,Qer=/^[1-9]$/,Jer=/^[\d-]$/,zC=/^[\t\n\r ]$/,EQ=0,ULe=1,etr=function(e,t){e=Wer(e);var r=new IQ(e,0,""),n=r.parse(),o=n.value,i=r.skip(zC,n.end);if(i<e.length)throw new fE("Unexpected extra character: \""+bl(e,i)+"\" after the parsed data at: "+i);return VLe(t)?TQ({"":o},"",t,n):o},TQ=function(e,t,r,n){var o=e[t],i=n&&o===n.value,a=i&&typeof n.source=="string"?{source:n.source}:{},u,d,h,v,b;if(Ver(o)){var x=Ger(o),M=i?n.nodes:x?[]:{};if(x)for(u=M.length,h=qLe(o),v=0;v<h;v++)BLe(o,v,TQ(o,""+v,r,v<u?M[v]:void 0));else for(d=Ker(o),h=qLe(d),v=0;v<h;v++)b=d[v],BLe(o,b,TQ(o,b,r,Her(M,b)?M[b]:void 0))}return Ber(r,e,t,o,a)},BLe=function(e,t,r){if(Fer){var n=Xer(e,t);if(n&&!n.configurable)return}r===void 0?delete e[t]:SQ(e,t,r)},ttr=function(e,t,r,n){this.value=e,this.end=t,this.source=r,this.nodes=n},IQ=function(e,t){this.source=e,this.index=t};IQ.prototype={fork:function(e){return new IQ(this.source,e)},parse:function(){var e=this.source,t=this.skip(zC,this.index),r=this.fork(t),n=bl(e,t);if(xQ(Jer,n))return r.number();switch(n){case"{":return r.object();case"[":return r.array();case"\"":return r.string();case"t":return r.keyword(!0);case"f":return r.keyword(!1);case"n":return r.keyword(null)}throw new fE("Unexpected character: \""+n+"\" at: "+t)},node:function(e,t,r,n,o){return new ttr(t,n,e?null:bQ(this.source,r,n),o)},object:function(){for(var e=this.source,t=this.index+1,r=!1,n={},o={};t<e.length;){if(t=this.until(["\"","}"],t),bl(e,t)==="}"&&!r){t++;break}var i=this.fork(t).string(),a=i.value;t=i.end,t=this.until([":"],t)+1,t=this.skip(zC,t),i=this.fork(t).parse(),SQ(o,a,i),SQ(n,a,i.value),t=this.until([",","}"],i.end);var u=bl(e,t);if(u===",")r=!0,t++;else if(u==="}"){t++;break}}return this.node(ULe,n,this.index,t,o)},array:function(){for(var e=this.source,t=this.index+1,r=!1,n=[],o=[];t<e.length;){if(t=this.skip(zC,t),bl(e,t)==="]"&&!r){t++;break}var i=this.fork(t).parse();if(FLe(o,i),FLe(n,i.value),t=this.until([",","]"],i.end),bl(e,t)===",")r=!0,t++;else if(bl(e,t)==="]"){t++;break}}return this.node(ULe,n,this.index,t,o)},string:function(){var e=this.index,t=$er(this.source,this.index+1);return this.node(EQ,t.value,e,t.end)},number:function(){var e=this.source,t=this.index,r=t;if(bl(e,r)==="-"&&r++,bl(e,r)==="0")r++;else if(xQ(Qer,bl(e,r)))r=this.skip(wQ,r+1);else throw new fE("Failed to parse number at: "+r);if(bl(e,r)==="."&&(r=this.skip(wQ,r+1)),bl(e,r)==="e"||bl(e,r)==="E"){r++,(bl(e,r)==="+"||bl(e,r)==="-")&&r++;var n=r;if(r=this.skip(wQ,r),n===r)throw new fE("Failed to parse number's exponent value at: "+r)}return this.node(EQ,Yer(bQ(e,t,r)),t,r)},keyword:function(e){var t=""+e,r=this.index,n=r+t.length;if(bQ(this.source,r,n)!==t)throw new fE("Failed to parse value at: "+r);return this.node(EQ,e,r,n)},skip:function(e,t){for(var r=this.source;t<r.length&&xQ(e,bl(r,t));t++);return t},until:function(e,t){t=this.skip(zC,t);for(var r=bl(this.source,t),n=0;n<e.length;n++)if(e[n]===r)return t;throw new fE("Unexpected character: \""+r+"\" at: "+t)}};var rtr=GLe(function(){var e="9007199254740993",t;return CQ(e,function(r,n,o){t=o.source}),t!==e}),ntr=Zer&&!GLe(function(){return 1/CQ("-0 \t")!==-1/0});zer({target:"JSON",stat:!0,forced:rtr},{parse:function(t,r){return ntr&&!VLe(r)?CQ(t):etr(t,r)}})});var JLe=A(()=>{"use strict";var XLe=ce(),otr=rg(),QLe=gQ(),ik=un(),itr=ir(),NQ=At(),atr=Nn(),str=vQ(),ltr=wn(),utr=qp(),ctr=_Q(),ptr=BH(),ftr=Zv(),dtr=Bo().set,htr=String,WLe=SyntaxError,mtr=ik("JSON","parse"),$Le=ik("JSON","stringify"),gtr=ik("Object","create"),vtr=ik("Object","freeze"),OQ=NQ("".charAt),AQ=NQ("".slice),ytr=NQ([].push),PQ=ftr(),ZLe=PQ.length,YLe="Unacceptable as raw JSON",KLe=function(e){return e===" "||e==="\t"||e===`
`||e==="\r"};XLe({target:"JSON",stat:!0,forced:!QLe},{rawJSON:function(t){var r=ltr(t);if(r===""||KLe(OQ(r,0))||KLe(OQ(r,r.length-1)))throw new WLe(YLe);var n=mtr(r);if(typeof n=="object"&&n!==null)throw new WLe(YLe);var o=gtr(null);return dtr(o,{type:"RawJSON"}),utr(o,"rawJSON",r),otr?vtr(o):o}});$Le&&XLe({target:"JSON",stat:!0,arity:3,forced:!QLe},{stringify:function(t,r,n){var o=ptr(r),i=[],a=$Le(t,function(M,O){var D=atr(o)?itr(o,this,htr(M),O):O;return str(D)?PQ+(ytr(i,D.rawJSON)-1):D},n);if(typeof a!="string")return a;for(var u="",d=a.length,h=0;h<d;h++){var v=OQ(a,h);if(v==="\""){var b=ctr(a,++h).end-1,x=AQ(a,h,b);u+=AQ(x,0,ZLe)===PQ?i[AQ(x,ZLe)]:"\""+x+"\"",h=b}else u+=v}return u}})});var xl=A((Wen,e3e)=>{"use strict";var _tr=As().has;e3e.exports=function(e){return _tr(e),e}});var t3e=A(()=>{"use strict";var btr=ce(),xtr=xl(),wtr=As().remove;btr({target:"Map",proto:!0,real:!0,forced:!0},{deleteAll:function(){for(var t=xtr(this),r=!0,n,o=0,i=arguments.length;o<i;o++)n=wtr(t,arguments[o]),r=r&&n;return!!r}})});var n3e=A(()=>{"use strict";var Etr=ce(),Str=xl(),DQ=As(),Ttr=DQ.get,Itr=DQ.has,r3e=DQ.set;Etr({target:"Map",proto:!0,real:!0,forced:!0},{emplace:function(t,r){var n=Str(this),o,i;return Itr(n,t)?(o=Ttr(n,t),"update"in r&&(o=r.update(o,t,n),r3e(n,t,o)),o):(i=r.insert(t,n),r3e(n,t,i),i)}})});var o3e=A(()=>{"use strict";var Mtr=ce(),Ctr=ai(),Atr=xl(),Otr=Up();Mtr({target:"Map",proto:!0,real:!0,forced:!0},{every:function(t){var r=Atr(this),n=Ctr(t,arguments.length>1?arguments[1]:void 0);return Otr(r,function(o,i){if(!n(o,i,r))return!1},!0)!==!1}})});var a3e=A(()=>{"use strict";var Ptr=ce(),Ntr=ai(),Dtr=xl(),i3e=As(),Ltr=Up(),ktr=i3e.Map,Rtr=i3e.set;Ptr({target:"Map",proto:!0,real:!0,forced:!0},{filter:function(t){var r=Dtr(this),n=Ntr(t,arguments.length>1?arguments[1]:void 0),o=new ktr;return Ltr(r,function(i,a){n(i,a,r)&&Rtr(o,a,i)}),o}})});var s3e=A(()=>{"use strict";var jtr=ce(),qtr=ai(),ztr=xl(),Ftr=Up();jtr({target:"Map",proto:!0,real:!0,forced:!0},{find:function(t){var r=ztr(this),n=qtr(t,arguments.length>1?arguments[1]:void 0),o=Ftr(r,function(i,a){if(n(i,a,r))return{value:i}},!0);return o&&o.value}})});var l3e=A(()=>{"use strict";var Utr=ce(),Btr=ai(),Vtr=xl(),Gtr=Up();Utr({target:"Map",proto:!0,real:!0,forced:!0},{findKey:function(t){var r=Vtr(this),n=Btr(t,arguments.length>1?arguments[1]:void 0),o=Gtr(r,function(i,a){if(n(i,a,r))return{key:a}},!0);return o&&o.key}})});var FC=A((itn,u3e)=>{"use strict";var Htr=ai(),Wtr=ur(),$tr=Zn(),Ztr=ca();u3e.exports=function(e,t,r){return function(o){var i=$tr(o),a=arguments.length,u=a>1?arguments[1]:void 0,d=u!==void 0,h=d?Htr(u,a>2?arguments[2]:void 0):void 0,v=new e,b=0;return Ztr(i,function(x){var M=d?h(x,b++):x;r?t(v,Wtr(M)[0],M[1]):t(v,M)}),v}}});var p3e=A(()=>{"use strict";var Ytr=ce(),c3e=As(),Ktr=FC();Ytr({target:"Map",stat:!0,forced:!0},{from:Ktr(c3e.Map,c3e.set,!0)})});var f3e=A(()=>{"use strict";var Xtr=ce(),Qtr=xl(),LQ=As(),Jtr=LQ.get,err=LQ.has,trr=LQ.set;Xtr({target:"Map",proto:!0,real:!0,forced:!0},{getOrInsert:function(t,r){return err(Qtr(this),t)?Jtr(this,t):(trr(this,t,r),r)}})});var d3e=A(()=>{"use strict";var rrr=ce(),nrr=cn(),orr=xl(),kQ=As(),irr=kQ.get,arr=kQ.has,srr=kQ.set;rrr({target:"Map",proto:!0,real:!0,forced:!0},{getOrInsertComputed:function(t,r){if(orr(this),nrr(r),arr(this,t))return irr(this,t);t===0&&1/t===-1/0&&(t=0);var n=r(t);return srr(this,t,n),n}})});var h3e=A(()=>{"use strict";wZ()});var g3e=A((htn,m3e)=>{"use strict";m3e.exports=function(e,t){return e===t||e!==e&&t!==t}});var v3e=A(()=>{"use strict";var lrr=ce(),urr=g3e(),crr=xl(),prr=Up();lrr({target:"Map",proto:!0,real:!0,forced:!0},{includes:function(t){return prr(crr(this),function(r){if(urr(r,t))return!0},!0)===!0}})});var _3e=A(()=>{"use strict";var frr=ce(),drr=ir(),hrr=ca(),mrr=Nn(),y3e=cn(),grr=As().Map;frr({target:"Map",stat:!0,forced:!0},{keyBy:function(t,r){var n=mrr(this)?this:grr,o=new n;y3e(r);var i=y3e(o.set);return hrr(t,function(a){drr(i,o,r(a),a)}),o}})});var b3e=A(()=>{"use strict";var vrr=ce(),yrr=xl(),_rr=Up();vrr({target:"Map",proto:!0,real:!0,forced:!0},{keyOf:function(t){var r=_rr(yrr(this),function(n,o){if(n===t)return{key:o}},!0);return r&&r.key}})});var w3e=A(()=>{"use strict";var brr=ce(),xrr=ai(),wrr=xl(),x3e=As(),Err=Up(),Srr=x3e.Map,Trr=x3e.set;brr({target:"Map",proto:!0,real:!0,forced:!0},{mapKeys:function(t){var r=wrr(this),n=xrr(t,arguments.length>1?arguments[1]:void 0),o=new Srr;return Err(r,function(i,a){Trr(o,n(i,a,r),i)}),o}})});var S3e=A(()=>{"use strict";var Irr=ce(),Mrr=ai(),Crr=xl(),E3e=As(),Arr=Up(),Orr=E3e.Map,Prr=E3e.set;Irr({target:"Map",proto:!0,real:!0,forced:!0},{mapValues:function(t){var r=Crr(this),n=Mrr(t,arguments.length>1?arguments[1]:void 0),o=new Orr;return Arr(r,function(i,a){Prr(o,a,n(i,a,r))}),o}})});var T3e=A(()=>{"use strict";var Nrr=ce(),Drr=xl(),Lrr=ca(),krr=As().set;Nrr({target:"Map",proto:!0,real:!0,arity:1,forced:!0},{merge:function(t){for(var r=Drr(this),n=arguments.length,o=0;o<n;)Lrr(arguments[o++],function(i,a){krr(r,i,a)},{AS_ENTRIES:!0});return r}})});var UC=A((Mtn,I3e)=>{"use strict";var Rrr=ur();I3e.exports=function(e,t,r){return function(){for(var o=new e,i=arguments.length,a=0;a<i;a++){var u=arguments[a];r?t(o,Rrr(u)[0],u[1]):t(o,u)}return o}}});var C3e=A(()=>{"use strict";var jrr=ce(),M3e=As(),qrr=UC();jrr({target:"Map",stat:!0,forced:!0},{of:qrr(M3e.Map,M3e.set,!0)})});var A3e=A(()=>{"use strict";var zrr=ce(),Frr=cn(),Urr=xl(),Brr=Up(),Vrr=TypeError;zrr({target:"Map",proto:!0,real:!0,forced:!0},{reduce:function(t){var r=Urr(this),n=arguments.length<2,o=n?void 0:arguments[1];if(Frr(t),Brr(r,function(i,a){n?(n=!1,o=i):o=t(o,i,a,r)}),n)throw new Vrr("Reduce of empty map with no initial value");return o}})});var O3e=A(()=>{"use strict";var Grr=ce(),Hrr=ai(),Wrr=xl(),$rr=Up();Grr({target:"Map",proto:!0,real:!0,forced:!0},{some:function(t){var r=Wrr(this),n=Hrr(t,arguments.length>1?arguments[1]:void 0);return $rr(r,function(o,i){if(n(o,i,r))return!0},!0)===!0}})});var N3e=A(()=>{"use strict";var Zrr=ce(),P3e=cn(),Yrr=xl(),RQ=As(),Krr=TypeError,Xrr=RQ.get,Qrr=RQ.has,Jrr=RQ.set;Zrr({target:"Map",proto:!0,real:!0,forced:!0},{update:function(t,r){var n=Yrr(this),o=arguments.length;P3e(r);var i=Qrr(n,t);if(!i&&o<3)throw new Krr("Updating absent value");var a=i?Xrr(n,t):P3e(o>2?arguments[2]:void 0)(t,n);return Jrr(n,t,r(a,t,n)),n}})});var lk=A((Rtn,D3e)=>{"use strict";var ak=ir(),jQ=cn(),sk=Nn(),enr=ur(),tnr=TypeError;D3e.exports=function(t,r){var n=enr(this),o=jQ(n.get),i=jQ(n.has),a=jQ(n.set),u=arguments.length>2?arguments[2]:void 0,d;if(!sk(r)&&!sk(u))throw new tnr("At least one callback required");return ak(i,n,t)?(d=ak(o,n,t),sk(r)&&(d=r(d),ak(a,n,t,d))):sk(u)&&(d=u(),ak(a,n,t,d)),d}});var L3e=A(()=>{"use strict";var rnr=ce(),nnr=lk();rnr({target:"Map",proto:!0,real:!0,name:"upsert",forced:!0},{updateOrInsert:nnr})});var k3e=A(()=>{"use strict";var onr=ce(),inr=lk();onr({target:"Map",proto:!0,real:!0,forced:!0},{upsert:inr})});var j3e=A((Utn,R3e)=>{"use strict";var anr=TypeError;R3e.exports=function(e){if(typeof e=="number")return e;throw new anr("Argument is not a number")}});var F3e=A(()=>{"use strict";var snr=ce(),qQ=j3e(),q3e=jw(),z3e=GL(),lnr=RangeError,unr=Math.min,cnr=Math.max;snr({target:"Math",stat:!0,forced:!0},{clamp:function(t,r,n){if(qQ(t),q3e(qQ(r)),q3e(qQ(n)),z3e(r,0)&&z3e(n,-0)||r>n)throw new lnr("`min` should be smaller than `max`");return unr(n,cnr(r,t))}})});var U3e=A(()=>{"use strict";var pnr=ce();pnr({target:"Math",stat:!0,nonConfigurable:!0,nonWritable:!0},{DEG_PER_RAD:Math.PI/180})});var B3e=A(()=>{"use strict";var fnr=ce(),dnr=180/Math.PI;fnr({target:"Math",stat:!0,forced:!0},{degrees:function(t){return t*dnr}})});var zQ=A((Ztn,V3e)=>{"use strict";V3e.exports=function(t,r,n,o,i){var a=+t,u=+r,d=+n,h=+o,v=+i;return a!==a||u!==u||d!==d||h!==h||v!==v?NaN:a===1/0||a===-1/0?a:(a-u)*(v-h)/(d-u)+h}});var G3e=A(()=>{"use strict";var hnr=ce(),mnr=zQ(),gnr=gL();hnr({target:"Math",stat:!0,forced:!0},{fscale:function(t,r,n,o,i){return gnr(mnr(t,r,n,o,i))}})});var H3e=A(()=>{"use strict";IZ()});var W3e=A(()=>{"use strict";var vnr=ce();vnr({target:"Math",stat:!0,forced:!0},{iaddh:function(t,r,n,o){var i=t>>>0,a=r>>>0,u=n>>>0;return a+(o>>>0)+((i&u|(i|u)&~(i+u>>>0))>>>31)|0}})});var $3e=A(()=>{"use strict";var ynr=ce();ynr({target:"Math",stat:!0,forced:!0},{imulh:function(t,r){var n=65535,o=+t,i=+r,a=o&n,u=i&n,d=o>>16,h=i>>16,v=(d*u>>>0)+(a*u>>>16);return d*h+(v>>16)+((a*h>>>0)+(v&n)>>16)}})});var Z3e=A(()=>{"use strict";var _nr=ce();_nr({target:"Math",stat:!0,forced:!0},{isubh:function(t,r,n,o){var i=t>>>0,a=r>>>0,u=n>>>0;return a-(o>>>0)-((~i&u|~(i^u)&i-u>>>0)>>>31)|0}})});var Y3e=A(()=>{"use strict";var bnr=ce();bnr({target:"Math",stat:!0,nonConfigurable:!0,nonWritable:!0},{RAD_PER_DEG:180/Math.PI})});var K3e=A(()=>{"use strict";var xnr=ce(),wnr=Math.PI/180;xnr({target:"Math",stat:!0,forced:!0},{radians:function(t){return t*wnr}})});var X3e=A(()=>{"use strict";var Enr=ce(),Snr=zQ();Enr({target:"Math",stat:!0,forced:!0},{scale:Snr})});var tke=A(()=>{"use strict";var Tnr=ce(),Inr=ur(),Mnr=LZ(),Cnr=ny(),Anr=Cs(),Q3e=Bo(),J3e="Seeded Random",eke=J3e+" Generator",Onr="Math.seededPRNG() argument should have a \"seed\" field with a finite value.",Pnr=Q3e.set,Nnr=Q3e.getterFor(eke),Dnr=TypeError,Lnr=Cnr(function(t){Pnr(this,{type:eke,seed:t%2147483647})},J3e,function(){var t=Nnr(this),r=t.seed=(t.seed*1103515245+12345)%2147483647;return Anr((r&1073741823)/1073741823,!1)});Tnr({target:"Math",stat:!0,forced:!0},{seededPRNG:function(t){var r=Inr(t).seed;if(!Mnr(r))throw new Dnr(Onr);return new Lnr(r)}})});var rke=A(()=>{"use strict";var knr=ce();knr({target:"Math",stat:!0,forced:!0},{signbit:function(t){var r=+t;return r===r&&r===0?1/r===-1/0:r<0}})});var ske=A(()=>{"use strict";var Rnr=ce(),jnr=At(),qnr=ca(),znr=RangeError,Fnr=TypeError,Bp=1/0,Unr=NaN,c_=Math.abs,VQ=Math.pow,nke=jnr([].push),BC=VQ(2,1023),Bnr=VQ(2,53)-1,oke=Number.MAX_VALUE,ike=VQ(2,971),VC={},FQ={},UQ={},BQ={},ake={},uk=function(e,t){var r=e+t,n=t-(r-e);return{hi:r,lo:n}};Rnr({target:"Math",stat:!0},{sumPrecise:function(t){var r=[],n=0,o=BQ;switch(qnr(t,function(B){if(++n>=Bnr)throw new znr("Maximum allowed index exceeded");if(typeof B!="number")throw new Fnr("Value is not a number");o!==VC&&(B!==B?o=VC:B===Bp?o=o===FQ?VC:UQ:B===-Bp?o=o===UQ?VC:FQ:(B!==0||1/B===Bp)&&(o===BQ||o===ake)&&(o=ake,nke(r,B)))}),o){case VC:return Unr;case FQ:return-Bp;case UQ:return Bp;case BQ:return-0}for(var i=[],a=0,u,d,h,v,b,x,M=0;M<r.length;M++){u=r[M];for(var O=0,D=0;D<i.length;D++){if(d=i[D],c_(u)<c_(d)&&(x=u,u=d,d=x),h=uk(u,d),v=h.hi,b=h.lo,c_(v)===Bp){var k=v===Bp?1:-1;a+=k,u=u-k*BC-k*BC,c_(u)<c_(d)&&(x=u,u=d,d=x),h=uk(u,d),v=h.hi,b=h.lo}b!==0&&(i[O++]=b),u=v}i.length=O,u!==0&&nke(i,u)}var R=i.length-1;if(v=0,b=0,a!==0){var q=R>=0?i[R]:0;if(R--,c_(a)>1||a>0&&q>0||a<0&&q<0)return a>0?Bp:-Bp;if(h=uk(a*BC,q/2),v=h.hi,b=h.lo,b*=2,c_(2*v)===Bp)return v>0?v===BC&&b===-(ike/2)&&R>=0&&i[R]<0?oke:Bp:v===-BC&&b===ike/2&&R>=0&&i[R]>0?-oke:-Bp;b!==0&&(i[++R]=b,b=0),v*=2}for(;R>=0&&(h=uk(v,i[R--]),v=h.hi,b=h.lo,b===0););return R>=0&&(b<0&&i[R]<0||b>0&&i[R]>0)&&(d=b*2,u=v+d,d===u-v&&(v=u)),v}})});var lke=A(()=>{"use strict";var Vnr=ce();Vnr({target:"Math",stat:!0,forced:!0},{umulh:function(t,r){var n=65535,o=+t,i=+r,a=o&n,u=i&n,d=o>>>16,h=i>>>16,v=(d*u>>>0)+(a*u>>>16);return d*h+(v>>>16)+((a*h>>>0)+(v&n)>>>16)}})});var pke=A(()=>{"use strict";var Gnr=ce(),HC=At(),Hnr=Bi(),GC="Invalid number representation",Wnr="Invalid radix",$nr=RangeError,ck=SyntaxError,Znr=TypeError,uke=parseInt,Ynr=Math.pow,cke=/^[\d.a-z]+$/,Knr=HC("".charAt),Xnr=HC(cke.exec),Qnr=HC(1 .toString),Jnr=HC("".slice),eor=HC("".split);Gnr({target:"Number",stat:!0,forced:!0},{fromString:function(t,r){var n=1;if(typeof t!="string")throw new Znr(GC);if(!t.length)throw new ck(GC);if(Knr(t,0)==="-"&&(n=-1,t=Jnr(t,1),!t.length))throw new ck(GC);var o=r===void 0?10:Hnr(r);if(o<2||o>36)throw new $nr(Wnr);if(!Xnr(cke,t))throw new ck(GC);var i=eor(t,"."),a=uke(i[0],o);if(i.length>1&&(a+=uke(i[1],o)/Ynr(o,i[1].length)),o===10&&Qnr(a,o)!==t)throw new ck(GC);return n*a}})});var fke=A(()=>{"use strict";var tor=ce(),ror=K3();tor({target:"Number",stat:!0,forced:!0},{range:function(t,r,n){return new ror(t,r,n,"number",0,1)}})});var dke=A(()=>{"use strict";$Z()});var fk=A((Trn,gke)=>{"use strict";var hke=Bo(),nor=ny(),pk=Cs(),oor=Fn(),ior=V1(),aor=Zn(),mke="Object Iterator",sor=hke.set,lor=hke.getterFor(mke);gke.exports=nor(function(t,r){var n=aor(t);sor(this,{type:mke,mode:r,object:n,keys:ior(n),index:0})},"Object",function(){for(var t=lor(this),r=t.keys;;){if(r===null||t.index>=r.length)return t.object=t.keys=null,pk(void 0,!0);var n=r[t.index++],o=t.object;if(oor(o,n)){switch(t.mode){case"keys":return pk(n,!1);case"values":return pk(o[n],!1)}return pk([n,o[n]],!1)}}})});var vke=A(()=>{"use strict";var uor=ce(),cor=fk();uor({target:"Object",stat:!0,forced:!0},{iterateEntries:function(t){return new cor(t,"entries")}})});var yke=A(()=>{"use strict";var por=ce(),dor=fk();por({target:"Object",stat:!0,forced:!0},{iterateKeys:function(t){return new dor(t,"keys")}})});var _ke=A(()=>{"use strict";var hor=ce(),mor=fk();hor({target:"Object",stat:!0,forced:!0},{iterateValues:function(t){return new mor(t,"values")}})});var bke=A(()=>{"use strict";WZ()});var Oke=A(()=>{"use strict";var gor=ce(),dk=ir(),WC=Hr(),vor=iy(),xke=cn(),yor=ur(),_or=Jl(),wke=Nn(),bor=pc(),xor=Qr(),hk=Aa(),wor=Xo(),GQ=Fp(),Eke=Vi(),dE=mY(),Eor=on(),Ske=Bo(),Sor=Eor("observable"),HQ="Observable",Tke="Subscription",Ike="SubscriptionObserver",WQ=Ske.getterFor,$Q=Ske.set,Tor=WQ(HQ),Mke=WQ(Tke),mk=WQ(Ike),Cke=function(e){this.observer=yor(e),this.cleanup=null,this.subscriptionObserver=null};Cke.prototype={type:Tke,clean:function(){var e=this.cleanup;if(e){this.cleanup=null;try{e()}catch(t){dE(t)}}},close:function(){if(!WC){var e=this.facade,t=this.subscriptionObserver;e.closed=!0,t&&(t.closed=!0)}this.observer=null},isClosed:function(){return this.observer===null}};var ZQ=function(e,t){var r=$Q(this,new Cke(e)),n;WC||(this.closed=!1);try{(n=hk(e,"start"))&&dk(n,e,this)}catch(u){dE(u)}if(!r.isClosed()){var o=r.subscriptionObserver=new YQ(r);try{var i=t(o),a=i;bor(i)||(r.cleanup=wke(i.unsubscribe)?function(){a.unsubscribe()}:xke(i))}catch(u){o.error(u);return}r.isClosed()&&r.clean()}};ZQ.prototype=GQ({},{unsubscribe:function(){var t=Mke(this);t.isClosed()||(t.close(),t.clean())}});WC&&Eke(ZQ.prototype,"closed",{configurable:!0,get:function(){return Mke(this).isClosed()}});var YQ=function(e){$Q(this,{type:Ike,subscriptionState:e}),WC||(this.closed=!1)};YQ.prototype=GQ({},{next:function(t){var r=mk(this).subscriptionState;if(!r.isClosed()){var n=r.observer;try{var o=hk(n,"next");o&&dk(o,n,t)}catch(i){dE(i)}}},error:function(t){var r=mk(this).subscriptionState;if(!r.isClosed()){var n=r.observer;r.close();try{var o=hk(n,"error");o?dk(o,n,t):dE(t)}catch(i){dE(i)}r.clean()}},complete:function(){var t=mk(this).subscriptionState;if(!t.isClosed()){var r=t.observer;t.close();try{var n=hk(r,"complete");n&&dk(n,r)}catch(o){dE(o)}t.clean()}}});WC&&Eke(YQ.prototype,"closed",{configurable:!0,get:function(){return mk(this).subscriptionState.isClosed()}});var Ake=function(t){_or(this,KQ),$Q(this,{type:HQ,subscriber:xke(t)})},KQ=Ake.prototype;GQ(KQ,{subscribe:function(t){var r=arguments.length;return new ZQ(wke(t)?{next:t,error:r>1?arguments[1]:void 0,complete:r>2?arguments[2]:void 0}:xor(t)?t:{},Tor(this).subscriber)}});wor(KQ,Sor,function(){return this});gor({global:!0,constructor:!0,forced:!0},{Observable:Ake});vor(HQ)});var Nke=A(()=>{"use strict";var Ior=ce(),Mor=un(),Cor=ir(),Pke=ur(),Aor=td(),Oor=ey(),Por=Aa(),Nor=ca(),Dor=on(),Lor=Dor("observable");Ior({target:"Observable",stat:!0,forced:!0},{from:function(t){var r=Aor(this)?this:Mor("Observable"),n=Por(Pke(t),Lor);if(n){var o=Pke(Cor(n,t));return o.constructor===r?o:new r(function(a){return o.subscribe(a)})}var i=Oor(t);return new r(function(a){Nor(i,function(u,d){if(a.next(u),a.closed)return d()},{IS_ITERATOR:!0,INTERRUPTED:!0}),a.complete()})}})});var Lke=A(()=>{"use strict";var kor=ce(),Dke=un(),Ror=td(),jor=Dke("Array");kor({target:"Observable",stat:!0,forced:!0},{of:function(){for(var t=Ror(this)?this:Dke("Observable"),r=arguments.length,n=jor(r),o=0;o<r;)n[o]=arguments[o++];return new t(function(i){for(var a=0;a<r;a++)if(i.next(n[a]),i.closed)return;i.complete()})}})});var kke=A(()=>{"use strict";Oke();Nke();Lke()});var Rke=A(()=>{"use strict";AY()});var jke=A(()=>{"use strict";OY()});var qke=A(()=>{"use strict";LY()});var zke=A(()=>{"use strict";kY()});var Eh=A((Krn,Vke)=>{"use strict";RL();k3();var Bke=un(),qor=At(),zor=$m(),Fke=Bke("Map"),For=Bke("WeakMap"),Uor=qor([].push),Uke=zor("metadata"),XQ=Uke.store||(Uke.store=new For),$C=function(e,t,r){var n=XQ.get(e);if(!n){if(!r)return;XQ.set(e,n=new Fke)}var o=n.get(t);if(!o){if(!r)return;n.set(t,o=new Fke)}return o},Bor=function(e,t,r){var n=$C(t,r,!1);return n===void 0?!1:n.has(e)},Vor=function(e,t,r){var n=$C(t,r,!1);return n===void 0?void 0:n.get(e)},Gor=function(e,t,r,n){$C(r,n,!0).set(e,t)},Hor=function(e,t){var r=$C(e,t,!1),n=[];return r&&r.forEach(function(o,i){Uor(n,i)}),n},Wor=function(e){return e===void 0||typeof e=="symbol"?e:String(e)};Vke.exports={store:XQ,getMap:$C,has:Bor,get:Vor,set:Gor,keys:Hor,toKey:Wor}});var Hke=A(()=>{"use strict";var $or=ce(),Gke=Eh(),Zor=ur(),Yor=Gke.toKey,Kor=Gke.set;$or({target:"Reflect",stat:!0},{defineMetadata:function(t,r,n){var o=arguments.length<4?void 0:Yor(arguments[3]);Kor(t,r,Zor(n),o)}})});var $ke=A(()=>{"use strict";var Xor=ce(),QQ=Eh(),Qor=ur(),Jor=QQ.toKey,eir=QQ.getMap,Wke=QQ.store;Xor({target:"Reflect",stat:!0},{deleteMetadata:function(t,r){var n=arguments.length<3?void 0:Jor(arguments[2]),o=eir(Qor(r),n,!1);if(o===void 0||!o.delete(t))return!1;if(o.size)return!0;var i=Wke.get(r);return i.delete(n),!!i.size||Wke.delete(r)}})});var Yke=A(()=>{"use strict";var tir=ce(),JQ=Eh(),rir=ur(),nir=ps(),oir=JQ.has,iir=JQ.get,air=JQ.toKey,Zke=function(e,t,r){var n=oir(e,t,r);if(n)return iir(e,t,r);var o=nir(t);return o!==null?Zke(e,o,r):void 0};tir({target:"Reflect",stat:!0},{getMetadata:function(t,r){var n=arguments.length<3?void 0:air(arguments[2]);return Zke(t,rir(r),n)}})});var Jke=A(()=>{"use strict";var sir=ce(),Kke=At(),Xke=Eh(),lir=ur(),uir=ps(),cir=V3(),pir=Kke(cir),fir=Kke([].concat),dir=Xke.keys,hir=Xke.toKey,Qke=function(e,t){var r=dir(e,t),n=uir(e);if(n===null)return r;var o=Qke(n,t);return o.length?r.length?pir(fir(r,o)):o:r};sir({target:"Reflect",stat:!0},{getMetadataKeys:function(t){var r=arguments.length<2?void 0:hir(arguments[1]);return Qke(lir(t),r)}})});var tRe=A(()=>{"use strict";var mir=ce(),eRe=Eh(),gir=ur(),vir=eRe.get,yir=eRe.toKey;mir({target:"Reflect",stat:!0},{getOwnMetadata:function(t,r){var n=arguments.length<3?void 0:yir(arguments[2]);return vir(t,gir(r),n)}})});var nRe=A(()=>{"use strict";var _ir=ce(),rRe=Eh(),bir=ur(),xir=rRe.keys,wir=rRe.toKey;_ir({target:"Reflect",stat:!0},{getOwnMetadataKeys:function(t){var r=arguments.length<2?void 0:wir(arguments[1]);return xir(bir(t),r)}})});var aRe=A(()=>{"use strict";var Eir=ce(),oRe=Eh(),Sir=ur(),Tir=ps(),Iir=oRe.has,Mir=oRe.toKey,iRe=function(e,t,r){var n=Iir(e,t,r);if(n)return!0;var o=Tir(t);return o!==null?iRe(e,o,r):!1};Eir({target:"Reflect",stat:!0},{hasMetadata:function(t,r){var n=arguments.length<3?void 0:Mir(arguments[2]);return iRe(t,Sir(r),n)}})});var lRe=A(()=>{"use strict";var Cir=ce(),sRe=Eh(),Air=ur(),Oir=sRe.has,Pir=sRe.toKey;Cir({target:"Reflect",stat:!0},{hasOwnMetadata:function(t,r){var n=arguments.length<3?void 0:Pir(arguments[2]);return Oir(t,Air(r),n)}})});var cRe=A(()=>{"use strict";var Nir=ce(),uRe=Eh(),Dir=ur(),Lir=uRe.toKey,kir=uRe.set;Nir({target:"Reflect",stat:!0},{metadata:function(t,r){return function(o,i){kir(t,r,Dir(o),Lir(i))}}})});var pRe=A(()=>{"use strict";XY()});var fRe=A(()=>{"use strict";var Rir=ce(),jir=_l(),qir=Hs().add;Rir({target:"Set",proto:!0,real:!0,forced:!0},{addAll:function(){for(var t=jir(this),r=0,n=arguments.length;r<n;r++)qir(t,arguments[r]);return t}})});var dRe=A(()=>{"use strict";var zir=ce(),Fir=_l(),Uir=Hs().remove;zir({target:"Set",proto:!0,real:!0,forced:!0},{deleteAll:function(){for(var t=Fir(this),r=!0,n,o=0,i=arguments.length;o<i;o++)n=Uir(t,arguments[o]),r=r&&n;return!!r}})});var hRe=A(()=>{"use strict";iK()});var gRe=A((Enn,mRe)=>{"use strict";var Bir=Ou(),Vir=Fn(),Gir=pc(),Hir=on(),Wir=Y1(),$ir=Hir("iterator"),Zir=Object;mRe.exports=function(e){if(Gir(e))return!1;var t=Zir(e);return t[$ir]!==void 0||"@@iterator"in t||Vir(Wir,Bir(t))}});var by=A((Snn,yRe)=>{"use strict";var Yir=un(),vRe=Nn(),Kir=gRe(),Xir=Qr(),Qir=Yir("Set"),Jir=function(e){return Xir(e)&&typeof e.size=="number"&&vRe(e.has)&&vRe(e.keys)};yRe.exports=function(e){return Jir(e)?e:Kir(e)?new Qir(e):e}});var _Re=A(()=>{"use strict";var ear=ce(),tar=ir(),rar=by(),nar=oK();ear({target:"Set",proto:!0,real:!0,forced:!0},{difference:function(t){return tar(nar,this,rar(t))}})});var bRe=A(()=>{"use strict";var oar=ce(),iar=ai(),aar=_l(),sar=gc();oar({target:"Set",proto:!0,real:!0,forced:!0},{every:function(t){var r=aar(this),n=iar(t,arguments.length>1?arguments[1]:void 0);return sar(r,function(o){if(!n(o,o,r))return!1},!0)!==!1}})});var wRe=A(()=>{"use strict";var lar=ce(),uar=ai(),car=_l(),xRe=Hs(),par=gc(),far=xRe.Set,dar=xRe.add;lar({target:"Set",proto:!0,real:!0,forced:!0},{filter:function(t){var r=car(this),n=uar(t,arguments.length>1?arguments[1]:void 0),o=new far;return par(r,function(i){n(i,i,r)&&dar(o,i)}),o}})});var ERe=A(()=>{"use strict";var har=ce(),mar=ai(),gar=_l(),yar=gc();har({target:"Set",proto:!0,real:!0,forced:!0},{find:function(t){var r=gar(this),n=mar(t,arguments.length>1?arguments[1]:void 0),o=yar(r,function(i){if(n(i,i,r))return{value:i}},!0);return o&&o.value}})});var TRe=A(()=>{"use strict";var _ar=ce(),SRe=Hs(),bar=FC();_ar({target:"Set",stat:!0,forced:!0},{from:bar(SRe.Set,SRe.add,!1)})});var IRe=A(()=>{"use strict";lK()});var MRe=A(()=>{"use strict";var xar=ce(),war=ir(),Ear=by(),Sar=sK();xar({target:"Set",proto:!0,real:!0,forced:!0},{intersection:function(t){return war(Sar,this,Ear(t))}})});var CRe=A(()=>{"use strict";cK()});var ARe=A(()=>{"use strict";var Tar=ce(),Iar=ir(),Mar=by(),Car=uK();Tar({target:"Set",proto:!0,real:!0,forced:!0},{isDisjointFrom:function(t){return Iar(Car,this,Mar(t))}})});var ORe=A(()=>{"use strict";fK()});var PRe=A(()=>{"use strict";var Aar=ce(),Oar=ir(),Par=by(),Nar=pK();Aar({target:"Set",proto:!0,real:!0,forced:!0},{isSubsetOf:function(t){return Oar(Nar,this,Par(t))}})});var NRe=A(()=>{"use strict";hK()});var DRe=A(()=>{"use strict";var Dar=ce(),Lar=ir(),kar=by(),Rar=dK();Dar({target:"Set",proto:!0,real:!0,forced:!0},{isSupersetOf:function(t){return Lar(Rar,this,kar(t))}})});var kRe=A(()=>{"use strict";var jar=ce(),LRe=At(),qar=_l(),zar=gc(),Far=wn(),Uar=LRe([].join),Bar=LRe([].push);jar({target:"Set",proto:!0,real:!0,forced:!0},{join:function(t){var r=qar(this),n=t===void 0?",":Far(t),o=[];return zar(r,function(i){Bar(o,i)}),Uar(o,n)}})});var jRe=A(()=>{"use strict";var Var=ce(),Gar=ai(),Har=_l(),RRe=Hs(),War=gc(),$ar=RRe.Set,Zar=RRe.add;Var({target:"Set",proto:!0,real:!0,forced:!0},{map:function(t){var r=Har(this),n=Gar(t,arguments.length>1?arguments[1]:void 0),o=new $ar;return War(r,function(i){Zar(o,n(i,i,r))}),o}})});var zRe=A(()=>{"use strict";var Yar=ce(),qRe=Hs(),Kar=UC();Yar({target:"Set",stat:!0,forced:!0},{of:Kar(qRe.Set,qRe.add,!1)})});var FRe=A(()=>{"use strict";var Xar=ce(),Qar=cn(),Jar=_l(),esr=gc(),tsr=TypeError;Xar({target:"Set",proto:!0,real:!0,forced:!0},{reduce:function(t){var r=Jar(this),n=arguments.length<2,o=n?void 0:arguments[1];if(Qar(t),esr(r,function(i){n?(n=!1,o=i):o=t(o,i,i,r)}),n)throw new tsr("Reduce of empty set with no initial value");return o}})});var URe=A(()=>{"use strict";var rsr=ce(),nsr=ai(),osr=_l(),isr=gc();rsr({target:"Set",proto:!0,real:!0,forced:!0},{some:function(t){var r=osr(this),n=nsr(t,arguments.length>1?arguments[1]:void 0);return isr(r,function(o){if(n(o,o,r))return!0},!0)===!0}})});var BRe=A(()=>{"use strict";vK()});var VRe=A(()=>{"use strict";var asr=ce(),ssr=ir(),lsr=by(),usr=gK();asr({target:"Set",proto:!0,real:!0,forced:!0},{symmetricDifference:function(t){return ssr(usr,this,lsr(t))}})});var GRe=A(()=>{"use strict";_K()});var HRe=A(()=>{"use strict";var csr=ce(),psr=ir(),fsr=by(),dsr=yK();csr({target:"Set",proto:!0,real:!0,forced:!0},{union:function(t){return psr(dsr,this,fsr(t))}})});var WRe=A(()=>{"use strict";var hsr=ce(),msr=i_().charAt,gsr=Ci(),vsr=Bi(),ysr=wn();hsr({target:"String",proto:!0,forced:!0},{at:function(t){var r=ysr(gsr(this)),n=r.length,o=vsr(t),i=o>=0?o:n+o;return i<0||i>=n?void 0:msr(r,i)}})});var eJ=A((von,KRe)=>{"use strict";var YRe=At(),_sr=us(),$Re=wn(),bsr=uo(),xsr=TypeError,ZRe=YRe([].push),wsr=YRe([].join);KRe.exports=function(t){var r=_sr(t),n=bsr(r);if(!n)return"";for(var o=arguments.length,i=[],a=0;;){var u=r[a++];if(u===void 0)throw new xsr("Incorrect template");if(ZRe(i,$Re(u)),a===n)return wsr(i,"");a<o&&ZRe(i,$Re(arguments[a]))}}});var XRe=A(()=>{"use strict";var Esr=ce(),Ssr=eJ();Esr({target:"String",stat:!0,forced:!0},{cooked:Ssr})});var r6e=A(()=>{"use strict";var Tsr=ce(),Isr=ny(),QRe=Cs(),Msr=Ci(),Csr=wn(),JRe=Bo(),e6e=i_(),Asr=e6e.codeAt,Osr=e6e.charAt,t6e="String Iterator",Psr=JRe.set,Nsr=JRe.getterFor(t6e),Dsr=Isr(function(t){Psr(this,{type:t6e,string:t,index:0})},"String",function(){var t=Nsr(this),r=t.string,n=t.index,o;return n>=r.length?QRe(void 0,!0):(o=Osr(r,n),t.index+=o.length,QRe({codePoint:Asr(o,0),position:n},!1))});Tsr({target:"String",proto:!0,forced:!0},{codePoints:function(){return new Dsr(Csr(Msr(this)))}})});var Sh=A((won,n6e)=>{"use strict";var gk=At(),vk=WeakMap.prototype;n6e.exports={WeakMap,set:gk(vk.set),get:gk(vk.get),has:gk(vk.has),remove:gk(vk.delete)}});var f6e=A((Eon,p6e)=>{"use strict";var Lsr=un(),yk=At(),ksr=String.fromCharCode,Rsr=Lsr("String","fromCodePoint"),tJ=yk("".charAt),u6e=yk("".charCodeAt),o6e=yk("".indexOf),i6e=yk("".slice),nJ=48,c6e=57,a6e=97,jsr=102,s6e=65,qsr=70,l6e=function(e,t){var r=u6e(e,t);return r>=nJ&&r<=c6e},rJ=function(e,t,r){if(r>=e.length)return-1;for(var n=0;t<r;t++){var o=zsr(u6e(e,t));if(o===-1)return-1;n=n*16+o}return n},zsr=function(e){return e>=nJ&&e<=c6e?e-nJ:e>=a6e&&e<=jsr?e-a6e+10:e>=s6e&&e<=qsr?e-s6e+10:-1};p6e.exports=function(e){for(var t="",r=0,n=0,o;(n=o6e(e,"\\",n))>-1;){if(t+=i6e(e,r,n),++n===e.length)return;var i=tJ(e,n++);switch(i){case"b":t+="\b";break;case"t":t+="\t";break;case"n":t+=`
`;break;case"v":t+="\x0B";break;case"f":t+="\f";break;case"r":t+="\r";break;case"\r":n<e.length&&tJ(e,n)===`
`&&++n;case`
`:case"\u2028":case"\u2029":break;case"0":if(l6e(e,n))return;t+="\0";break;case"x":if(o=rJ(e,n,n+2),o===-1)return;n+=2,t+=ksr(o);break;case"u":if(n<e.length&&tJ(e,n)==="{"){var a=o6e(e,"}",++n);if(a===-1)return;o=rJ(e,n,a),n=a+1}else o=rJ(e,n,n+4),n+=4;if(o===-1||o>1114111)return;t+=Rsr(o);break;default:if(l6e(i,0))return;t+=i}r=n}return t+i6e(e,r)}});var w6e=A(()=>{"use strict";var Fsr=rg(),Usr=ce(),Bsr=EM(),_k=At(),v6e=yl(),y6e=ur(),Vsr=Zn(),Gsr=Nn(),Hsr=uo(),Wsr=_i().f,$sr=dc(),bk=Sh(),Zsr=eJ(),Ysr=f6e(),_6e=J1(),oJ=new bk.WeakMap,Ksr=bk.get,Xsr=bk.has,Qsr=bk.set,iJ=Array,ZC=TypeError,d6e=Object.freeze||Object,Jsr=Object.isFrozen,elr=Math.min,h6e=_k("".charAt),b6e=_k("".slice),tlr=_k("".split),m6e=_k(/./.exec),rlr=/([\n\u2028\u2029]|\r\n?)/g,nlr=RegExp("^["+_6e+"]*"),olr=RegExp("[^"+_6e+"]"),g6e="Invalid tag",ilr="Invalid opening line",alr="Invalid closing line",slr=function(e){var t=e.raw;if(Fsr&&!Jsr(t))throw new ZC("Raw template should be frozen");if(Xsr(oJ,t))return Ksr(oJ,t);var r=llr(t),n=clr(r);return Wsr(n,"raw",{value:d6e(r)}),d6e(n),Qsr(oJ,t,n),n},llr=function(e){var t=Vsr(e),r=Hsr(t),n=iJ(r),o=iJ(r),i=0,a,u,d,h;if(!r)throw new ZC(g6e);for(;i<r;i++){var v=t[i];if(typeof v=="string")n[i]=tlr(v,rlr);else throw new ZC(g6e)}for(i=0;i<r;i++){var b=i+1===r;if(a=n[i],i===0){if(a.length===1||a[0].length>0)throw new ZC(ilr);a[1]=""}if(b){if(a.length===1||m6e(olr,a[a.length-1]))throw new ZC(alr);a[a.length-2]="",a[a.length-1]=""}for(var x=2;x<a.length;x+=2){var M=a[x],O=x+1===a.length&&!b,D=m6e(nlr,M)[0];if(!O&&D.length===M.length){a[x]="";continue}u=ulr(D,u)}}var k=u?u.length:0;for(i=0;i<r;i++){for(a=n[i],d=a[0],h=1;h<a.length;h+=2)d+=a[h]+b6e(a[h+1],k);o[i]=d}return o},ulr=function(e,t){if(t===void 0||e===t)return e;for(var r=0,n=elr(e.length,t.length);r<n&&h6e(e,r)===h6e(t,r);r++);return b6e(e,0,r)},clr=function(e){for(var t=0,r=e.length,n=iJ(r);t<r;t++)n[t]=Ysr(e[t]);return n},x6e=function(e){return Bsr(function(t){var r=$sr(arguments);return r[0]=slr(y6e(t)),v6e(e,this,r)},"")},plr=x6e(Zsr);Usr({target:"String",stat:!0,forced:!0},{dedent:function(t){return y6e(t),Gsr(t)?x6e(t):v6e(plr,this,arguments)}})});var E6e=A(()=>{"use strict";wK()});var S6e=A(()=>{"use strict";OK()});var T6e=A(()=>{"use strict";FK()});var I6e=A(()=>{"use strict";$K()});var M6e=A(()=>{"use strict";var flr=or(),dlr=ua(),hlr=_i().f,mlr=Bs().f,aJ=flr.Symbol;dlr("asyncDispose");aJ&&(YC=mlr(aJ,"asyncDispose"),YC.enumerable&&YC.configurable&&YC.writable&&hlr(aJ,"asyncDispose",{value:YC.value,enumerable:!1,configurable:!1,writable:!1}));var YC});var C6e=A(()=>{"use strict";var glr=ua();glr("customMatcher")});var A6e=A(()=>{"use strict";var vlr=or(),ylr=ua(),_lr=_i().f,blr=Bs().f,sJ=vlr.Symbol;ylr("dispose");sJ&&(KC=blr(sJ,"dispose"),KC.enumerable&&KC.configurable&&KC.writable&&_lr(sJ,"dispose",{value:KC.value,enumerable:!1,configurable:!1,writable:!1}));var KC});var uJ=A((Fon,O6e)=>{"use strict";var xlr=un(),wlr=At(),lJ=xlr("Symbol"),Elr=lJ.keyFor,Slr=wlr(lJ.prototype.valueOf);O6e.exports=lJ.isRegisteredSymbol||function(t){try{return Elr(Slr(t))!==void 0}catch(r){return!1}}});var P6e=A(()=>{"use strict";var Tlr=ce(),Ilr=uJ();Tlr({target:"Symbol",stat:!0},{isRegisteredSymbol:Ilr})});var N6e=A(()=>{"use strict";var Mlr=ce(),Clr=uJ();Mlr({target:"Symbol",stat:!0,name:"isRegisteredSymbol"},{isRegistered:Clr})});var fJ=A((Hon,q6e)=>{"use strict";var Alr=$m(),R6e=un(),Olr=At(),Plr=Wm(),Nlr=on(),wk=R6e("Symbol"),D6e=wk.isWellKnownSymbol,j6e=R6e("Object","getOwnPropertyNames"),Dlr=Olr(wk.prototype.valueOf),L6e=Alr("wks");for(xk=0,cJ=j6e(wk),k6e=cJ.length;xk<k6e;xk++)try{pJ=cJ[xk],Plr(wk[pJ])&&Nlr(pJ)}catch(e){}var pJ,xk,cJ,k6e;q6e.exports=function(t){if(D6e&&D6e(t))return!0;try{for(var r=Dlr(t),n=0,o=j6e(L6e),i=o.length;n<i;n++)if(L6e[o[n]]==r)return!0}catch(a){}return!1}});var z6e=A(()=>{"use strict";var Llr=ce(),klr=fJ();Llr({target:"Symbol",stat:!0,forced:!0},{isWellKnownSymbol:klr})});var F6e=A(()=>{"use strict";var Rlr=ce(),jlr=fJ();Rlr({target:"Symbol",stat:!0,name:"isWellKnownSymbol",forced:!0},{isWellKnown:jlr})});var U6e=A(()=>{"use strict";var qlr=ua();qlr("matcher")});var B6e=A(()=>{"use strict";var zlr=ua();zlr("metadata")});var V6e=A(()=>{"use strict";var Flr=ua();Flr("metadataKey")});var G6e=A(()=>{"use strict";var Ulr=ua();Ulr("observable")});var H6e=A(()=>{"use strict";var Blr=ua();Blr("patternMatch")});var W6e=A(()=>{"use strict";var Vlr=ua();Vlr("replaceAll")});var Z6e=A(()=>{"use strict";var Glr=un(),Hlr=aC(),Wlr=zX(),$6e=Vn(),$lr=Xm(),Zlr=$6e.aTypedArrayConstructor,Ylr=$6e.exportTypedArrayStaticMethod;Ylr("fromAsync",function(t){var r=this,n=arguments.length,o=n>1?arguments[1]:void 0,i=n>2?arguments[2]:void 0;return new(Glr("Promise"))(function(a){Hlr(r),a(Wlr(t,o,i))}).then(function(a){return $lr(Zlr(r),a)})},!0)});var Y6e=A(()=>{"use strict";lX()});var X6e=A(()=>{"use strict";var K6e=Vn(),Klr=Pa().filterReject,Xlr=w3(),Qlr=K6e.aTypedArray,Jlr=K6e.exportTypedArrayMethod;Jlr("filterOut",function(t){var r=Klr(Qlr(this),t,arguments.length>1?arguments[1]:void 0);return Xlr(this,r)},!0)});var J6e=A(()=>{"use strict";var Q6e=Vn(),eur=Pa().filterReject,tur=w3(),rur=Q6e.aTypedArray,nur=Q6e.exportTypedArrayMethod;nur("filterReject",function(t){var r=eur(rur(this),t,arguments.length>1?arguments[1]:void 0);return tur(this,r)},!0)});var eje=A(()=>{"use strict";uX()});var tje=A(()=>{"use strict";cX()});var rje=A(()=>{"use strict";var dJ=Vn(),our=U3(),iur=dJ.aTypedArray,aur=dJ.getTypedArrayConstructor,sur=dJ.exportTypedArrayMethod;sur("groupBy",function(t){var r=arguments.length>1?arguments[1]:void 0;return our(iur(this),t,r,aur)},!0)});var nje=A(()=>{"use strict";SX()});var oje=A(()=>{"use strict";TX()});var ije=A(()=>{"use strict";var hJ=Vn(),lur=uo(),uur=v3(),cur=Jf(),pur=EC(),fur=Bi(),dur=hJ.aTypedArray,hur=hJ.getTypedArrayConstructor,mur=hJ.exportTypedArrayMethod,gur=Math.max,vur=Math.min;mur("toSpliced",function(t,r){var n=dur(this),o=hur(n),i=lur(n),a=cur(t,i),u=arguments.length,d=0,h,v,b,x,M,O,D;if(u===0)h=v=0;else if(u===1)h=0,v=i-a;else if(v=vur(gur(fur(r),0),i-a),h=u-2,h){x=new o(h),b=uur(x);for(var k=2;k<u;k++)M=arguments[k],x[k-2]=b?pur(M):+M}for(O=i+h-v,D=new o(O);d<a;d++)D[d]=n[d];for(;d<a+h;d++)D[d]=x[d-a];for(;d<O;d++)D[d]=n[d+v-h];return D},!0)});var aje=A(()=>{"use strict";var yur=At(),mJ=Vn(),_ur=Xm(),bur=V3(),xur=mJ.aTypedArray,wur=mJ.getTypedArrayConstructor,Eur=mJ.exportTypedArrayMethod,Sur=yur(bur);Eur("uniqueBy",function(t){return xur(this),_ur(wur(this),Sur(this,t))},!0)});var sje=A(()=>{"use strict";MX()});var gJ=A((Nin,lje)=>{"use strict";var Tur=Qr(),Iur=String,Mur=TypeError;lje.exports=function(e){if(e===void 0||Tur(e))return e;throw new Mur(Iur(e)+" is not an object or undefined")}});var XC=A((Din,dje)=>{"use strict";var fje="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",uje=fje+"+/",cje=fje+"-_",pje=function(e){for(var t={},r=0;r<64;r++)t[e.charAt(r)]=r;return t};dje.exports={i2c:uje,c2i:pje(uje),i2cUrl:cje,c2iUrl:pje(cje)}});var vJ=A((Lin,hje)=>{"use strict";var Cur=TypeError;hje.exports=function(e){var t=e&&e.alphabet;if(t===void 0||t==="base64"||t==="base64url")return t||"base64";throw new Cur("Incorrect `alphabet` option")}});var xJ=A((kin,vje)=>{"use strict";var mje=or(),Aur=At(),Our=gJ(),Pur=yC(),Nur=Fn(),gje=XC(),Dur=vJ(),Lur=Rw(),kur=gje.c2i,Rur=gje.c2iUrl,xy=mje.SyntaxError,jur=mje.TypeError,p_=Aur("".charAt),yJ=function(e,t){for(var r=e.length;t<r;t++){var n=p_(e,t);if(n!==" "&&n!=="\t"&&n!==`
`&&n!=="\f"&&n!=="\r")break}return t},_J=function(e,t,r){var n=e.length;n<4&&(e+=n===2?"AA":"A");var o=(t[p_(e,0)]<<18)+(t[p_(e,1)]<<12)+(t[p_(e,2)]<<6)+t[p_(e,3)],i=[o>>16&255,o>>8&255,o&255];if(n===2){if(r&&i[1]!==0)throw new xy("Extra bits");return[i[0]]}if(n===3){if(r&&i[2]!==0)throw new xy("Extra bits");return[i[0],i[1]]}return i},bJ=function(e,t,r){for(var n=t.length,o=0;o<n;o++)e[r+o]=t[o];return r+n};vje.exports=function(e,t,r,n){Pur(e),Our(t);var o=Dur(t)==="base64"?kur:Rur,i=t?t.lastChunkHandling:void 0;if(i===void 0&&(i="loose"),i!=="loose"&&i!=="strict"&&i!=="stop-before-partial")throw new jur("Incorrect `lastChunkHandling` option");r&&Lur(r.buffer);var a=r||[],u=0,d=0,h="",v=0;if(n)for(;;){if(v=yJ(e,v),v===e.length){if(h.length>0){if(i==="stop-before-partial")break;if(i==="loose"){if(h.length===1)throw new xy("Malformed padding: exactly one additional character");u=bJ(a,_J(h,o,!1),u)}else throw new xy("Missing padding")}d=e.length;break}var b=p_(e,v);if(++v,b==="="){if(h.length<2)throw new xy("Padding is too early");if(v=yJ(e,v),h.length===2){if(v===e.length){if(i==="stop-before-partial")break;throw new xy("Malformed padding: only one =")}p_(e,v)==="="&&(++v,v=yJ(e,v))}if(v<e.length)throw new xy("Unexpected character after padding");u=bJ(a,_J(h,o,i==="strict"),u),d=e.length;break}if(!Nur(o,b))throw new xy("Unexpected character");var x=n-u;if(x===1&&h.length===2||x===2&&h.length===3||(h+=b,h.length===4&&(u=bJ(a,_J(h,o,!1),u),h="",d=v,u===n)))break}return{bytes:a,read:d,written:u}}});var _je=A(()=>{"use strict";var qur=ce(),zur=or(),Fur=Xm(),Uur=xJ(),yje=zur.Uint8Array;yje&&qur({target:"Uint8Array",stat:!0},{fromBase64:function(t){var r=Uur(t,arguments.length>1?arguments[1]:void 0,null,9007199254740991);return Fur(yje,r.bytes)}})});var EJ=A((qin,Eje)=>{"use strict";var wJ=or(),xje=At(),Bur=wJ.Uint8Array,bje=wJ.SyntaxError,Vur=wJ.parseInt,Gur=Math.min,wje=/[^\da-f]/i,Hur=xje(wje.exec),Wur=xje("".slice);Eje.exports=function(e,t){var r=e.length;if(r%2!==0)throw new bje("String should be an even number of characters");for(var n=t?Gur(t.length,r/2):r/2,o=t||new Bur(n),i=0,a=0;a<n;){var u=Wur(e,i,i+=2);if(Hur(wje,u))throw new bje("String should only contain hex characters");o[a++]=Vur(u,16)}return{bytes:o,read:i}}});var Sje=A(()=>{"use strict";var $ur=ce(),Zur=or(),Yur=yC(),Kur=EJ();Zur.Uint8Array&&$ur({target:"Uint8Array",stat:!0},{fromHex:function(t){return Kur(Yur(t)).bytes}})});var QC=A((Uin,Tje)=>{"use strict";var Xur=Ou(),Qur=TypeError;Tje.exports=function(e){if(Xur(e)==="Uint8Array")return e;throw new Qur("Argument is not an Uint8Array")}});var Ije=A(()=>{"use strict";var Jur=ce(),ecr=or(),tcr=xJ(),rcr=QC(),Ek=ecr.Uint8Array,ncr=!Ek||!Ek.prototype.setFromBase64||!function(){var e=new Ek([255,255,255,255,255]);try{e.setFromBase64("MjYyZg===")}catch(t){return e[0]===50&&e[1]===54&&e[2]===50&&e[3]===255&&e[4]===255}}();Ek&&Jur({target:"Uint8Array",proto:!0,forced:ncr},{setFromBase64:function(t){rcr(this);var r=tcr(t,arguments.length>1?arguments[1]:void 0,this,this.length);return{read:r.read,written:r.written}}})});var Mje=A(()=>{"use strict";var ocr=ce(),icr=or(),acr=yC(),scr=QC(),lcr=Rw(),ucr=EJ();icr.Uint8Array&&ocr({target:"Uint8Array",proto:!0},{setFromHex:function(t){scr(this),acr(t),lcr(this.buffer);var r=ucr(t,this).read;return{read:r,written:r/2}}})});var Aje=A(()=>{"use strict";var ccr=ce(),pcr=or(),fcr=At(),dcr=gJ(),hcr=QC(),mcr=Rw(),Cje=XC(),gcr=vJ(),vcr=Cje.i2c,ycr=Cje.i2cUrl,_cr=fcr("".charAt);pcr.Uint8Array&&ccr({target:"Uint8Array",proto:!0},{toBase64:function(){var t=hcr(this),r=arguments.length?dcr(arguments[0]):void 0,n=gcr(r)==="base64"?vcr:ycr,o=!!r&&!!r.omitPadding;mcr(this.buffer);for(var i="",a=0,u=t.length,d,h=function(v){return _cr(n,d>>6*v&63)};a+2<u;a+=3)d=(t[a]<<16)+(t[a+1]<<8)+t[a+2],i+=h(3)+h(2)+h(1)+h(0);return a+2===u?(d=(t[a]<<16)+(t[a+1]<<8),i+=h(3)+h(2)+h(1)+(o?"":"=")):a+1===u&&(d=t[a]<<16,i+=h(3)+h(2)+(o?"":"==")),i}})});var Oje=A(()=>{"use strict";var bcr=ce(),xcr=or(),wcr=At(),Ecr=QC(),Scr=Rw(),Tcr=wcr(1 .toString);xcr.Uint8Array&&bcr({target:"Uint8Array",proto:!0},{toHex:function(){Ecr(this),Scr(this.buffer);for(var t="",r=0,n=this.length;r<n;r++){var o=Tcr(this[r],16);t+=o.length===1?"0"+o:o}return t}})});var JC=A((Kin,Pje)=>{"use strict";var Icr=Sh().has;Pje.exports=function(e){return Icr(e),e}});var Nje=A(()=>{"use strict";var Mcr=ce(),Ccr=JC(),Acr=Sh().remove;Mcr({target:"WeakMap",proto:!0,real:!0,forced:!0},{deleteAll:function(){for(var t=Ccr(this),r=!0,n,o=0,i=arguments.length;o<i;o++)n=Acr(t,arguments[o]),r=r&&n;return!!r}})});var Lje=A(()=>{"use strict";var Ocr=ce(),Dje=Sh(),Pcr=FC();Ocr({target:"WeakMap",stat:!0,forced:!0},{from:Pcr(Dje.WeakMap,Dje.set,!0)})});var Rje=A(()=>{"use strict";var Ncr=ce(),kje=Sh(),Dcr=UC();Ncr({target:"WeakMap",stat:!0,forced:!0},{of:Dcr(kje.WeakMap,kje.set,!0)})});var qje=A(()=>{"use strict";var Lcr=ce(),kcr=JC(),SJ=Sh(),Rcr=SJ.get,jcr=SJ.has,jje=SJ.set;Lcr({target:"WeakMap",proto:!0,real:!0,forced:!0},{emplace:function(t,r){var n=kcr(this),o,i;return jcr(n,t)?(o=Rcr(n,t),"update"in r&&(o=r.update(o,t,n),jje(n,t,o)),o):(i=r.insert(t,n),jje(n,t,i),i)}})});var zje=A(()=>{"use strict";var qcr=ce(),zcr=JC(),TJ=Sh(),Fcr=TJ.get,Ucr=TJ.has,Bcr=TJ.set;qcr({target:"WeakMap",proto:!0,real:!0,forced:!0},{getOrInsert:function(t,r){return Ucr(zcr(this),t)?Fcr(this,t):(Bcr(this,t,r),r)}})});var Bje=A((san,Uje)=>{"use strict";var IJ=Sh(),Fje=new IJ.WeakMap,Vcr=IJ.set,Gcr=IJ.remove;Uje.exports=function(e){return Vcr(Fje,e,1),Gcr(Fje,e),e}});var Vje=A(()=>{"use strict";var Hcr=ce(),Wcr=cn(),$cr=JC(),Zcr=Bje(),MJ=Sh(),Ycr=MJ.get,Kcr=MJ.has,Xcr=MJ.set;Hcr({target:"WeakMap",proto:!0,real:!0,forced:!0},{getOrInsertComputed:function(t,r){if($cr(this),Zcr(t),Wcr(r),Kcr(this,t))return Ycr(this,t);var n=r(t);return Xcr(this,t,n),n}})});var Gje=A(()=>{"use strict";var Qcr=ce(),Jcr=lk();Qcr({target:"WeakMap",proto:!0,real:!0,forced:!0},{upsert:Jcr})});var hE=A((fan,Hje)=>{"use strict";var CJ=At(),AJ=WeakSet.prototype;Hje.exports={WeakSet,add:CJ(AJ.add),has:CJ(AJ.has),remove:CJ(AJ.delete)}});var OJ=A((dan,Wje)=>{"use strict";var epr=hE().has;Wje.exports=function(e){return epr(e),e}});var $je=A(()=>{"use strict";var tpr=ce(),rpr=OJ(),npr=hE().add;tpr({target:"WeakSet",proto:!0,real:!0,forced:!0},{addAll:function(){for(var t=rpr(this),r=0,n=arguments.length;r<n;r++)npr(t,arguments[r]);return t}})});var Zje=A(()=>{"use strict";var opr=ce(),ipr=OJ(),apr=hE().remove;opr({target:"WeakSet",proto:!0,real:!0,forced:!0},{deleteAll:function(){for(var t=ipr(this),r=!0,n,o=0,i=arguments.length;o<i;o++)n=apr(t,arguments[o]),r=r&&n;return!!r}})});var Kje=A(()=>{"use strict";var spr=ce(),Yje=hE(),lpr=FC();spr({target:"WeakSet",stat:!0,forced:!0},{from:lpr(Yje.WeakSet,Yje.add,!1)})});var Qje=A(()=>{"use strict";var upr=ce(),Xje=hE(),cpr=UC();upr({target:"WeakSet",stat:!0,forced:!0},{of:cpr(Xje.WeakSet,Xje.add,!1)})});var iqe=A(()=>{"use strict";var ppr=ce(),fpr=or(),tqe=un(),PJ=At(),dpr=ir(),Sk=Vt(),hpr=wn(),mpr=tp(),Jje=XC().c2i,rqe=/[^\d+/a-z]/i,gpr=/[\t\n\f\r ]+/g,vpr=/[=]{1,2}$/,f_=tqe("atob"),ypr=String.fromCharCode,_pr=PJ("".charAt),eqe=PJ("".replace),bpr=PJ(rqe.exec),mE=!!f_&&!Sk(function(){return f_("aGk=")!=="hi"}),nqe=mE&&Sk(function(){return f_(" ")!==""}),oqe=mE&&!Sk(function(){f_("a")}),xpr=mE&&!Sk(function(){f_()}),wpr=mE&&f_.length!==1,Epr=!mE||nqe||oqe||xpr||wpr;ppr({global:!0,bind:!0,enumerable:!0,forced:Epr},{atob:function(t){if(mpr(arguments.length,1),mE&&!nqe&&!oqe)return dpr(f_,fpr,t);var r=eqe(hpr(t),gpr,""),n="",o=0,i=0,a,u,d;if(r.length%4===0&&(r=eqe(r,vpr,"")),a=r.length,a%4===1||bpr(rqe,r))throw new(tqe("DOMException"))("The string is not correctly encoded","InvalidCharacterError");for(;o<a;)u=_pr(r,o++),d=i%4?d*64+Jje[u]:Jje[u],i++%4&&(n+=ypr(255&d>>(-2*i&6)));return n}})});var cqe=A(()=>{"use strict";var Spr=ce(),Tpr=or(),lqe=un(),uqe=At(),Ipr=ir(),NJ=Vt(),aqe=wn(),Mpr=tp(),Cpr=XC().i2c,gE=lqe("btoa"),sqe=uqe("".charAt),Apr=uqe("".charCodeAt),eA=!!gE&&!NJ(function(){return gE("hi")!=="aGk="}),Opr=eA&&!NJ(function(){gE()}),Ppr=eA&&NJ(function(){return gE(null)!=="bnVsbA=="}),Npr=eA&&gE.length!==1;Spr({global:!0,bind:!0,enumerable:!0,forced:!eA||Opr||Ppr||Npr},{btoa:function(t){if(Mpr(arguments.length,1),eA)return Ipr(gE,Tpr,aqe(t));for(var r=aqe(t),n="",o=0,i=Cpr,a,u;sqe(r,o)||(i="=",o%1);){if(u=Apr(r,o+=3/4),u>255)throw new(lqe("DOMException"))("The string contains characters outside of the Latin1 range","InvalidCharacterError");a=a<<8|u,n+=sqe(i,63&a>>8-o%1*8)}return n}})});var DJ=A((Ian,pqe)=>{"use strict";pqe.exports={CSSRuleList:0,CSSStyleDeclaration:0,CSSValueList:0,ClientRectList:0,DOMRectList:0,DOMStringList:0,DOMTokenList:1,DataTransferItemList:0,FileList:0,HTMLAllCollection:0,HTMLCollection:0,HTMLFormElement:0,HTMLSelectElement:0,MediaList:0,MimeTypeArray:0,NamedNodeMap:0,NodeList:1,PaintRequestList:0,Plugin:0,PluginArray:0,SVGLengthList:0,SVGNumberList:0,SVGPathSegList:0,SVGPointList:0,SVGStringList:0,SVGTransformList:0,SourceBufferList:0,StyleSheetList:0,TextTrackCueList:0,TextTrackList:0,TouchList:0}});var kJ=A((Man,dqe)=>{"use strict";var Dpr=_M(),LJ=Dpr("span").classList,fqe=LJ&&LJ.constructor&&LJ.constructor.prototype;dqe.exports=fqe===Object.prototype?void 0:fqe});var vqe=A(()=>{"use strict";var hqe=or(),mqe=DJ(),Lpr=kJ(),RJ=gW(),kpr=cs(),gqe=function(e){if(e&&e.forEach!==RJ)try{kpr(e,"forEach",RJ)}catch(t){e.forEach=RJ}};for(Tk in mqe)mqe[Tk]&&gqe(hqe[Tk]&&hqe[Tk].prototype);var Tk;gqe(Lpr)});var wqe=A(()=>{"use strict";var yqe=or(),bqe=DJ(),Rpr=kJ(),tA=zM(),_qe=cs(),jpr=Pu(),qpr=on(),jJ=qpr("iterator"),qJ=tA.values,xqe=function(e,t){if(e){if(e[jJ]!==qJ)try{_qe(e,jJ,qJ)}catch(n){e[jJ]=qJ}if(jpr(e,t,!0),bqe[t]){for(var r in tA)if(e[r]!==tA[r])try{_qe(e,r,tA[r])}catch(n){e[r]=tA[r]}}}};for(Ik in bqe)xqe(yqe[Ik]&&yqe[Ik].prototype,Ik);var Ik;xqe(Rpr,"DOMTokenList")});var zJ=A((Nan,Eqe)=>{"use strict";Eqe.exports={IndexSizeError:{s:"INDEX_SIZE_ERR",c:1,m:1},DOMStringSizeError:{s:"DOMSTRING_SIZE_ERR",c:2,m:0},HierarchyRequestError:{s:"HIERARCHY_REQUEST_ERR",c:3,m:1},WrongDocumentError:{s:"WRONG_DOCUMENT_ERR",c:4,m:1},InvalidCharacterError:{s:"INVALID_CHARACTER_ERR",c:5,m:1},NoDataAllowedError:{s:"NO_DATA_ALLOWED_ERR",c:6,m:0},NoModificationAllowedError:{s:"NO_MODIFICATION_ALLOWED_ERR",c:7,m:1},NotFoundError:{s:"NOT_FOUND_ERR",c:8,m:1},NotSupportedError:{s:"NOT_SUPPORTED_ERR",c:9,m:1},InUseAttributeError:{s:"INUSE_ATTRIBUTE_ERR",c:10,m:1},InvalidStateError:{s:"INVALID_STATE_ERR",c:11,m:1},SyntaxError:{s:"SYNTAX_ERR",c:12,m:1},InvalidModificationError:{s:"INVALID_MODIFICATION_ERR",c:13,m:1},NamespaceError:{s:"NAMESPACE_ERR",c:14,m:1},InvalidAccessError:{s:"INVALID_ACCESS_ERR",c:15,m:1},ValidationError:{s:"VALIDATION_ERR",c:16,m:0},TypeMismatchError:{s:"TYPE_MISMATCH_ERR",c:17,m:1},SecurityError:{s:"SECURITY_ERR",c:18,m:1},NetworkError:{s:"NETWORK_ERR",c:19,m:1},AbortError:{s:"ABORT_ERR",c:20,m:1},URLMismatchError:{s:"URL_MISMATCH_ERR",c:21,m:1},QuotaExceededError:{s:"QUOTA_EXCEEDED_ERR",c:22,m:1},TimeoutError:{s:"TIMEOUT_ERR",c:23,m:1},InvalidNodeTypeError:{s:"INVALID_NODE_TYPE_ERR",c:24,m:1},DataCloneError:{s:"DATA_CLONE_ERR",c:25,m:1}}});var Lqe=A(()=>{"use strict";var zpr=ce(),Ak=un(),Fpr=d$(),HJ=Vt(),Upr=Oa(),WJ=cc(),Ok=_i().f,Bpr=Xo(),Mk=Vi(),Ck=Fn(),Vpr=Jl(),Gpr=ur(),Iqe=JH(),Sqe=$1(),vE=zJ(),Hpr=K5(),Mqe=Bo(),$J=Hr(),Cqe=To(),yE="DOMException",GJ="DATA_CLONE_ERR",Nk=Ak("Error"),ig=Ak(yE)||function(){try{var e=Ak("MessageChannel")||Fpr("worker_threads").MessageChannel;new e().port1.postMessage(new WeakMap)}catch(t){if(t.name===GJ&&t.code===25)return t.constructor}}(),Wpr=ig&&ig.prototype,Aqe=Nk.prototype,$pr=Mqe.set,Zpr=Mqe.getterFor(yE),Ypr="stack"in new Nk(yE),Oqe=function(e){return Ck(vE,e)&&vE[e].m?vE[e].c:0},ZJ=function(){Vpr(this,nA);var t=arguments.length,r=Sqe(t<1?void 0:arguments[0]),n=Sqe(t<2?void 0:arguments[1],"Error"),o=Oqe(n);if($pr(this,{type:yE,name:n,message:r,code:o}),$J||(this.name=n,this.message=r,this.code=o),Ypr){var i=new Nk(r);i.name=yE,Ok(this,"stack",WJ(1,Hpr(i.stack,1)))}},nA=ZJ.prototype=Upr(Aqe),Pqe=function(e){return{enumerable:!0,configurable:!0,get:e}},FJ=function(e){return Pqe(function(){return Zpr(this)[e]})};$J&&(Mk(nA,"code",FJ("code")),Mk(nA,"message",FJ("message")),Mk(nA,"name",FJ("name")));Ok(nA,"constructor",WJ(1,ZJ));var Dk=HJ(function(){return!(new ig instanceof Nk)}),Nqe=Dk||HJ(function(){return Aqe.toString!==Iqe||String(new ig(1,2))!=="2: 1"}),Dqe=Dk||HJ(function(){return new ig(1,"DataCloneError").code!==25}),Kpr=Dk||ig[GJ]!==25||Wpr[GJ]!==25,Tqe=Cqe?Nqe||Dqe||Kpr:Dk;zpr({global:!0,constructor:!0,forced:Tqe},{DOMException:Tqe?ZJ:ig});var oA=Ak(yE),Pk=oA.prototype;Nqe&&(Cqe||ig===oA)&&Bpr(Pk,"toString",Iqe);Dqe&&$J&&ig===oA&&Mk(Pk,"code",Pqe(function(){return Oqe(Gpr(this).name)}));for(UJ in vE)Ck(vE,UJ)&&(BJ=vE[UJ],rA=BJ.s,VJ=WJ(6,BJ.c),Ck(oA,rA)||Ok(oA,rA,VJ),Ck(Pk,rA)||Ok(Pk,rA,VJ));var BJ,rA,VJ,UJ});var Uqe=A(()=>{"use strict";var Xpr=ce(),Qpr=or(),ree=un(),eee=cc(),tee=_i().f,kqe=Fn(),Jpr=Jl(),efr=Jv(),Rqe=$1(),YJ=zJ(),tfr=K5(),rfr=Hr(),zqe=To(),aA="DOMException",Fqe=ree("Error"),sA=ree(aA),nee=function(){Jpr(this,nfr);var t=arguments.length,r=Rqe(t<1?void 0:arguments[0]),n=Rqe(t<2?void 0:arguments[1],"Error"),o=new sA(r,n),i=new Fqe(r);return i.name=aA,tee(o,"stack",eee(1,tfr(i.stack,1))),efr(o,this,nee),o},nfr=nee.prototype=sA.prototype,ofr="stack"in new Fqe(aA),ifr="stack"in new sA(1,2),KJ=sA&&rfr&&Object.getOwnPropertyDescriptor(Qpr,aA),afr=!!KJ&&!(KJ.writable&&KJ.configurable),jqe=ofr&&!afr&&!ifr;Xpr({global:!0,constructor:!0,forced:zqe||jqe},{DOMException:jqe?nee:sA});var iA=ree(aA),qqe=iA.prototype;if(qqe.constructor!==iA){zqe||tee(qqe,"constructor",eee(1,iA));for(XJ in YJ)kqe(YJ,XJ)&&(QJ=YJ[XJ],JJ=QJ.s,kqe(iA,JJ)||tee(iA,JJ,eee(6,QJ.c)))}var QJ,JJ,XJ});var Vqe=A(()=>{"use strict";var sfr=un(),lfr=Pu(),Bqe="DOMException";lfr(sfr(Bqe),Bqe)});var Hqe=A(()=>{"use strict";var ufr=ce(),cfr=or(),Gqe=cC().clear;ufr({global:!0,bind:!0,enumerable:!0,forced:cfr.clearImmediate!==Gqe},{clearImmediate:Gqe})});var Lk=A((Uan,$qe)=>{"use strict";var Wqe=or(),pfr=yl(),ffr=Nn(),dfr=BM(),hfr=Yf(),mfr=dc(),gfr=tp(),vfr=Wqe.Function,yfr=/MSIE .\./.test(hfr)||dfr==="BUN"&&function(){var e=Wqe.Bun.version.split(".");return e.length<3||e[0]==="0"&&(e[1]<3||e[1]==="3"&&e[2]==="0")}();$qe.exports=function(e,t){var r=t?2:1;return yfr?function(n,o){var i=gfr(arguments.length,1)>r,a=ffr(n)?n:vfr(n),u=i?mfr(arguments,r):[],d=i?function(){pfr(a,this,u)}:a;return t?e(d,o):e(d)}:e}});var Xqe=A(()=>{"use strict";var _fr=ce(),Kqe=or(),Zqe=cC().set,bfr=Lk(),Yqe=Kqe.setImmediate?bfr(Zqe,!1):Zqe;_fr({global:!0,bind:!0,enumerable:!0,forced:Kqe.setImmediate!==Yqe},{setImmediate:Yqe})});var Qqe=A(()=>{"use strict";Hqe();Xqe()});var Jqe=A(()=>{"use strict";var xfr=ce(),wfr=or(),Efr=hY(),Sfr=cn(),Tfr=tp(),Ifr=Vt(),Mfr=Hr(),Cfr=Ifr(function(){return Mfr&&Object.getOwnPropertyDescriptor(wfr,"queueMicrotask").value.length!==1});xfr({global:!0,enumerable:!0,dontCallGetSet:!0,forced:Cfr},{queueMicrotask:function(t){Tfr(arguments.length,1),Efr(Sfr(t))}})});var t8e=A(()=>{"use strict";var Afr=ce(),wy=or(),Ofr=Vi(),Pfr=Hr(),Nfr=TypeError,Dfr=Object.defineProperty,e8e=wy.self!==wy;try{Pfr?(kk=Object.getOwnPropertyDescriptor(wy,"self"),(e8e||!kk||!kk.get||!kk.enumerable)&&Ofr(wy,"self",{get:function(){return wy},set:function(t){if(this!==wy)throw new Nfr("Illegal invocation");Dfr(wy,"self",{value:t,writable:!0,configurable:!0,enumerable:!0})},configurable:!0,enumerable:!0})):Afr({global:!0,simple:!0,forced:e8e},{self:wy})}catch(e){}var kk});var f8e=A(()=>{"use strict";var Lfr=To(),kfr=ce(),El=or(),uA=un(),pA=At(),uee=Vt(),Rfr=Zv(),bE=Nn(),jfr=td(),qfr=pc(),Fk=Qr(),zfr=Wm(),Ffr=ca(),o8e=ur(),qk=Ou(),Ufr=Fn(),Bfr=qp(),oee=cs(),Rk=uo(),Vfr=tp(),Gfr=Kw(),Uk=As(),cee=Hs(),Hfr=gc(),r8e=b$(),Wfr=YH(),pee=ML(),lA=El.Object,$fr=El.Array,i8e=El.Date,a8e=El.Error,Zfr=El.TypeError,Yfr=El.PerformanceMark,d_=uA("DOMException"),see=Uk.Map,fee=Uk.has,s8e=Uk.get,zk=Uk.set,l8e=cee.Set,u8e=cee.add,Kfr=cee.has,Xfr=uA("Object","keys"),Qfr=pA([].push),Jfr=pA((!0).valueOf),edr=pA(1 .valueOf),tdr=pA("".valueOf),rdr=pA(i8e.prototype.getTime),lee=Rfr("structuredClone"),cA="DataCloneError",jk="Transferring",c8e=function(e){return!uee(function(){var t=new El.Set([7]),r=e(t),n=e(lA(7));return r===t||!r.has(7)||!Fk(n)||+n!=7})&&e},n8e=function(e,t){return!uee(function(){var r=new t,n=e({a:r,b:r});return!(n&&n.a===n.b&&n.a instanceof t&&n.a.stack===r.stack)})},ndr=function(e){return!uee(function(){var t=e(new El.AggregateError([1],lee,{cause:3}));return t.name!=="AggregateError"||t.errors[0]!==1||t.message!==lee||t.cause!==3})},_E=El.structuredClone,odr=Lfr||!n8e(_E,a8e)||!n8e(_E,d_)||!ndr(_E),idr=!_E&&c8e(function(e){return new Yfr(lee,{detail:e}).detail}),ag=c8e(_E)||idr,iee=function(e){throw new d_("Uncloneable type: "+e,cA)},_c=function(e,t){throw new d_((t||"Cloning")+" of "+e+" cannot be properly polyfilled in this engine",cA)},aee=function(e,t){return ag||_c(t),ag(e)},adr=function(){var e;try{e=new El.DataTransfer}catch(t){try{e=new El.ClipboardEvent("").clipboardData}catch(r){}}return e&&e.items&&e.files?e:null},p8e=function(e,t,r){if(fee(t,e))return s8e(t,e);var n=r||qk(e),o,i,a,u,d,h;if(n==="SharedArrayBuffer")ag?o=ag(e):o=e;else{var v=El.DataView;!v&&!bE(e.slice)&&_c("ArrayBuffer");try{if(bE(e.slice)&&!e.resizable)o=e.slice(0);else for(i=e.byteLength,a=("maxByteLength"in e)?{maxByteLength:e.maxByteLength}:void 0,o=new ArrayBuffer(i,a),u=new v(e),d=new v(o),h=0;h<i;h++)d.setUint8(h,u.getUint8(h))}catch(b){throw new d_("ArrayBuffer is detached",cA)}}return zk(t,e,o),o},sdr=function(e,t,r,n,o){var i=El[t];return Fk(i)||_c(t),new i(p8e(e.buffer,o),r,n)},wl=function(e,t){if(zfr(e)&&iee("Symbol"),!Fk(e))return e;if(t){if(fee(t,e))return s8e(t,e)}else t=new see;var r=qk(e),n,o,i,a,u,d,h,v;switch(r){case"Array":i=$fr(Rk(e));break;case"Object":i={};break;case"Map":i=new see;break;case"Set":i=new l8e;break;case"RegExp":i=new RegExp(e.source,Gfr(e));break;case"Error":switch(o=e.name,o){case"AggregateError":i=new(uA(o))([]);break;case"EvalError":case"RangeError":case"ReferenceError":case"SuppressedError":case"SyntaxError":case"TypeError":case"URIError":i=new(uA(o));break;case"CompileError":case"LinkError":case"RuntimeError":i=new(uA("WebAssembly",o));break;default:i=new a8e}break;case"DOMException":i=new d_(e.message,e.name);break;case"ArrayBuffer":case"SharedArrayBuffer":i=p8e(e,t,r);break;case"DataView":case"Int8Array":case"Uint8Array":case"Uint8ClampedArray":case"Int16Array":case"Uint16Array":case"Int32Array":case"Uint32Array":case"Float16Array":case"Float32Array":case"Float64Array":case"BigInt64Array":case"BigUint64Array":d=r==="DataView"?e.byteLength:e.length,i=sdr(e,r,e.byteOffset,d,t);break;case"DOMQuad":try{i=new DOMQuad(wl(e.p1,t),wl(e.p2,t),wl(e.p3,t),wl(e.p4,t))}catch(b){i=aee(e,r)}break;case"File":if(ag)try{i=ag(e),qk(i)!==r&&(i=void 0)}catch(b){}if(!i)try{i=new File([e],e.name,e)}catch(b){}i||_c(r);break;case"FileList":if(a=adr(),a){for(u=0,d=Rk(e);u<d;u++)a.items.add(wl(e[u],t));i=a.files}else i=aee(e,r);break;case"ImageData":try{i=new ImageData(wl(e.data,t),e.width,e.height,{colorSpace:e.colorSpace})}catch(b){i=aee(e,r)}break;default:if(ag)i=ag(e);else switch(r){case"BigInt":i=lA(e.valueOf());break;case"Boolean":i=lA(Jfr(e));break;case"Number":i=lA(edr(e));break;case"String":i=lA(tdr(e));break;case"Date":i=new i8e(rdr(e));break;case"Blob":try{i=e.slice(0,e.size,e.type)}catch(b){_c(r)}break;case"DOMPoint":case"DOMPointReadOnly":n=El[r];try{i=n.fromPoint?n.fromPoint(e):new n(e.x,e.y,e.z,e.w)}catch(b){_c(r)}break;case"DOMRect":case"DOMRectReadOnly":n=El[r];try{i=n.fromRect?n.fromRect(e):new n(e.x,e.y,e.width,e.height)}catch(b){_c(r)}break;case"DOMMatrix":case"DOMMatrixReadOnly":n=El[r];try{i=n.fromMatrix?n.fromMatrix(e):new n(e)}catch(b){_c(r)}break;case"AudioData":case"VideoFrame":bE(e.clone)||_c(r);try{i=e.clone()}catch(b){iee(r)}break;case"CropTarget":case"CryptoKey":case"FileSystemDirectoryHandle":case"FileSystemFileHandle":case"FileSystemHandle":case"GPUCompilationInfo":case"GPUCompilationMessage":case"ImageBitmap":case"RTCCertificate":case"WebAssembly.Module":_c(r);default:iee(r)}}switch(zk(t,e,i),r){case"Array":case"Object":for(h=Xfr(e),u=0,d=Rk(h);u<d;u++)v=h[u],Bfr(i,v,wl(e[v],t));break;case"Map":e.forEach(function(b,x){zk(i,wl(x,t),wl(b,t))});break;case"Set":e.forEach(function(b){u8e(i,wl(b,t))});break;case"Error":oee(i,"message",wl(e.message,t)),Ufr(e,"cause")&&oee(i,"cause",wl(e.cause,t)),o==="AggregateError"?i.errors=wl(e.errors,t):o==="SuppressedError"&&(i.error=wl(e.error,t),i.suppressed=wl(e.suppressed,t));case"DOMException":Wfr&&oee(i,"stack",wl(e.stack,t))}return i},ldr=function(e,t){if(!Fk(e))throw new Zfr("Transfer option cannot be converted to a sequence");var r=[];Ffr(e,function(x){Qfr(r,o8e(x))});for(var n=0,o=Rk(r),i=new l8e,a,u,d,h,v,b;n<o;){if(a=r[n++],u=qk(a),u==="ArrayBuffer"?Kfr(i,a):fee(t,a))throw new d_("Duplicate transferable",cA);if(u==="ArrayBuffer"){u8e(i,a);continue}if(pee)h=_E(a,{transfer:[a]});else switch(u){case"ImageBitmap":d=El.OffscreenCanvas,jfr(d)||_c(u,jk);try{v=new d(a.width,a.height),b=v.getContext("bitmaprenderer"),b.transferFromImageBitmap(a),h=v.transferToImageBitmap()}catch(x){}break;case"AudioData":case"VideoFrame":(!bE(a.clone)||!bE(a.close))&&_c(u,jk);try{h=a.clone(),a.close()}catch(x){}break;case"MediaSourceHandle":case"MessagePort":case"MIDIAccess":case"OffscreenCanvas":case"ReadableStream":case"RTCDataChannel":case"TransformStream":case"WebTransportReceiveStream":case"WebTransportSendStream":case"WritableStream":_c(u,jk)}if(h===void 0)throw new d_("This object cannot be transferred: "+u,cA);zk(t,a,h)}return i},udr=function(e){Hfr(e,function(t){pee?ag(t,{transfer:[t]}):bE(t.transfer)?t.transfer():r8e?r8e(t):_c("ArrayBuffer",jk)})};kfr({global:!0,enumerable:!0,sham:!pee,forced:odr},{structuredClone:function(t){var r=Vfr(arguments.length,1)>1&&!qfr(arguments[1])?o8e(arguments[1]):void 0,n=r?r.transfer:void 0,o,i;n!==void 0&&(o=new see,i=ldr(n,o));var a=wl(t,o);return i&&udr(i),a}})});var m8e=A(()=>{"use strict";var cdr=ce(),h8e=or(),pdr=Lk(),d8e=pdr(h8e.setInterval,!0);cdr({global:!0,bind:!0,forced:h8e.setInterval!==d8e},{setInterval:d8e})});var y8e=A(()=>{"use strict";var fdr=ce(),v8e=or(),ddr=Lk(),g8e=ddr(v8e.setTimeout,!0);fdr({global:!0,bind:!0,forced:v8e.setTimeout!==g8e},{setTimeout:g8e})});var _8e=A(()=>{"use strict";m8e();y8e()});var fA=A((osn,x8e)=>{"use strict";var hdr=Vt(),mdr=on(),gdr=Hr(),b8e=To(),vdr=mdr("iterator");x8e.exports=!hdr(function(){var e=new URL("b?a=1&b=2&c=3","https://a"),t=e.searchParams,r=new URLSearchParams("a=1&a=2&b=3"),n="";return e.pathname="c%20d",t.forEach(function(o,i){t.delete("b"),n+=i+o}),r.delete("a",2),r.delete("b",void 0),b8e&&(!e.toJSON||!r.has("a",1)||r.has("a",2)||!r.has("a",void 0)||r.has("b"))||!t.size&&(b8e||!gdr)||!t.sort||e.href!=="https://a/c%20d?a=1&c=3"||t.get("c")!=="3"||String(new URLSearchParams("?a=1"))!=="a=1"||!t[vdr]||new URL("https://a@b").username!=="a"||new URLSearchParams(new URLSearchParams("a=b")).get("a")!=="b"||new URL("https://\u0442\u0435\u0441\u0442").host!=="xn--e1aybc"||new URL("https://a#\u0431").hash!=="#%D0%B1"||n!=="a1c3"||new URL("https://x",void 0).host!=="x"})});var O8e=A((isn,A8e)=>{"use strict";var h_=At(),dee=2147483647,dA=36,I8e=1,gee=26,ydr=38,_dr=700,bdr=72,xdr=128,wdr="-",Edr=/[^\0-\u007E]/,M8e=/[.\u3002\uFF0E\uFF61]/g,w8e="Overflow: input needs wider integers to process",hee=dA-I8e,E8e=RangeError,Sdr=h_(M8e.exec),xE=Math.floor,mee=String.fromCharCode,S8e=h_("".charCodeAt),C8e=h_([].join),Ey=h_([].push),Tdr=h_("".replace),Idr=h_("".split),Mdr=h_("".toLowerCase),Cdr=function(e){for(var t=[],r=0,n=e.length;r<n;){var o=S8e(e,r++);if(o>=55296&&o<=56319&&r<n){var i=S8e(e,r++);(i&64512)===56320?Ey(t,((o&1023)<<10)+(i&1023)+65536):(Ey(t,o),r--)}else Ey(t,o)}return t},T8e=function(e){return e+22+75*(e<26)},Adr=function(e,t,r){var n=0;for(e=r?xE(e/_dr):e>>1,e+=xE(e/t);e>hee*gee>>1;)e=xE(e/hee),n+=dA;return xE(n+(hee+1)*e/(e+ydr))},Odr=function(e){var t=[];e=Cdr(e);var r=e.length,n=xdr,o=0,i=bdr,a,u;for(a=0;a<e.length;a++)u=e[a],u<128&&Ey(t,mee(u));var d=t.length,h=d;for(d&&Ey(t,wdr);h<r;){var v=dee;for(a=0;a<e.length;a++)u=e[a],u>=n&&u<v&&(v=u);var b=h+1;if(v-n>xE((dee-o)/b))throw new E8e(w8e);for(o+=(v-n)*b,n=v,a=0;a<e.length;a++){if(u=e[a],u<n&&++o>dee)throw new E8e(w8e);if(u===n){for(var x=o,M=dA;;){var O=M<=i?I8e:M>=i+gee?gee:M-i;if(x<O)break;var D=x-O,k=dA-O;Ey(t,mee(T8e(O+D%k))),x=xE(D/k),M+=dA}Ey(t,mee(T8e(x))),i=Adr(o,b,h===d),o=0,h++}}o++,n++}return C8e(t,"")};A8e.exports=function(e){var t=[],r=Idr(Tdr(Mdr(e),M8e,"."),"."),n,o;for(n=0;n<r.length;n++)o=r[n],Ey(t,Sdr(Edr,o)?"xn--"+Odr(o):o);return C8e(t,".")}});var Tee=A((asn,J8e)=>{"use strict";zM();xK();var wee=ce(),V8e=or(),Eee=sY(),Pdr=un(),Bk=ir(),id=At(),hA=Hr(),G8e=fA(),H8e=Xo(),Ndr=Vi(),Ddr=Fp(),Ldr=Pu(),kdr=ny(),See=Bo(),W8e=Jl(),vee=Nn(),Rdr=Fn(),jdr=ai(),qdr=Ou(),zdr=ur(),$8e=Qr(),Du=wn(),Fdr=Oa(),P8e=cc(),N8e=ey(),Udr=hh(),Vk=Cs(),wE=tp(),Bdr=on(),Vdr=dL(),Gdr=Bdr("iterator"),SE="URLSearchParams",Z8e=SE+"Iterator",Y8e=See.set,Vp=See.getterFor(SE),Hdr=See.getterFor(Z8e),D8e=Eee("fetch"),Wk=Eee("Request"),mA=Eee("Headers"),yee=Wk&&Wk.prototype,L8e=mA&&mA.prototype,Wdr=V8e.TypeError,$dr=V8e.encodeURIComponent,Zdr=String.fromCharCode,Ydr=Pdr("String","fromCodePoint"),Kdr=parseInt,Hk=id("".charAt),k8e=id([].join),Sy=id([].push),K8e=id("".replace),Xdr=id([].shift),R8e=id([].splice),j8e=id("".split),X8e=id("".slice),Qdr=id(/./.exec),Jdr=/\+/g,_ee="\uFFFD",ehr=/^[0-9a-f]+$/i,q8e=function(e,t){var r=X8e(e,t,t+2);return Qdr(ehr,r)?Kdr(r,16):NaN},thr=function(e){for(var t=0,r=128;r>0&&(e&r)!==0;r>>=1)t++;return t},rhr=function(e){var t=null;switch(e.length){case 1:t=e[0];break;case 2:t=(e[0]&31)<<6|e[1]&63;break;case 3:t=(e[0]&15)<<12|(e[1]&63)<<6|e[2]&63;break;case 4:t=(e[0]&7)<<18|(e[1]&63)<<12|(e[2]&63)<<6|e[3]&63;break}return t>1114111?null:t},z8e=function(e){e=K8e(e,Jdr," ");for(var t=e.length,r="",n=0;n<t;){var o=Hk(e,n);if(o==="%"){if(Hk(e,n+1)==="%"||n+3>t){r+="%",n++;continue}var i=q8e(e,n+1);if(i!==i){r+=o,n++;continue}n+=2;var a=thr(i);if(a===0)o=Zdr(i);else{if(a===1||a>4){r+=_ee,n++;continue}for(var u=[i],d=1;d<a&&(n++,!(n+3>t||Hk(e,n)!=="%"));){var h=q8e(e,n+1);if(h!==h){n+=3;break}if(h>191||h<128)break;Sy(u,h),n+=2,d++}if(u.length!==a){r+=_ee;continue}var v=rhr(u);v===null?r+=_ee:o=Ydr(v)}}r+=o,n++}return r},nhr=/[!'()~]|%20/g,ohr={"!":"%21","'":"%27","(":"%28",")":"%29","~":"%7E","%20":"+"},ihr=function(e){return ohr[e]},F8e=function(e){return K8e($dr(e),nhr,ihr)},bee=kdr(function(t,r){Y8e(this,{type:Z8e,target:Vp(t).entries,index:0,kind:r})},SE,function(){var t=Hdr(this),r=t.target,n=t.index++;if(!r||n>=r.length)return t.target=null,Vk(void 0,!0);var o=r[n];switch(t.kind){case"keys":return Vk(o.key,!1);case"values":return Vk(o.value,!1)}return Vk([o.key,o.value],!1)},!0),Q8e=function(e){this.entries=[],this.url=null,e!==void 0&&($8e(e)?this.parseObject(e):this.parseQuery(typeof e=="string"?Hk(e,0)==="?"?X8e(e,1):e:Du(e)))};Q8e.prototype={type:SE,bindURL:function(e){this.url=e,this.update()},parseObject:function(e){var t=this.entries,r=Udr(e),n,o,i,a,u,d,h;if(r)for(n=N8e(e,r),o=n.next;!(i=Bk(o,n)).done;){if(a=N8e(zdr(i.value)),u=a.next,(d=Bk(u,a)).done||(h=Bk(u,a)).done||!Bk(u,a).done)throw new Wdr("Expected sequence with length 2");Sy(t,{key:Du(d.value),value:Du(h.value)})}else for(var v in e)Rdr(e,v)&&Sy(t,{key:v,value:Du(e[v])})},parseQuery:function(e){if(e)for(var t=this.entries,r=j8e(e,"&"),n=0,o,i;n<r.length;)o=r[n++],o.length&&(i=j8e(o,"="),Sy(t,{key:z8e(Xdr(i)),value:z8e(k8e(i,"="))}))},serialize:function(){for(var e=this.entries,t=[],r=0,n;r<e.length;)n=e[r++],Sy(t,F8e(n.key)+"="+F8e(n.value));return k8e(t,"&")},update:function(){this.entries.length=0,this.parseQuery(this.url.query)},updateURL:function(){this.url&&this.url.update()}};var $k=function(){W8e(this,EE);var t=arguments.length>0?arguments[0]:void 0,r=Y8e(this,new Q8e(t));hA||(this.size=r.entries.length)},EE=$k.prototype;Ddr(EE,{append:function(t,r){var n=Vp(this);wE(arguments.length,2),Sy(n.entries,{key:Du(t),value:Du(r)}),hA||this.length++,n.updateURL()},delete:function(e){for(var t=Vp(this),r=wE(arguments.length,1),n=t.entries,o=Du(e),i=r<2?void 0:arguments[1],a=i===void 0?i:Du(i),u=0;u<n.length;){var d=n[u];if(d.key===o&&(a===void 0||d.value===a)){if(R8e(n,u,1),a!==void 0)break}else u++}hA||(this.size=n.length),t.updateURL()},get:function(t){var r=Vp(this).entries;wE(arguments.length,1);for(var n=Du(t),o=0;o<r.length;o++)if(r[o].key===n)return r[o].value;return null},getAll:function(t){var r=Vp(this).entries;wE(arguments.length,1);for(var n=Du(t),o=[],i=0;i<r.length;i++)r[i].key===n&&Sy(o,r[i].value);return o},has:function(t){for(var r=Vp(this).entries,n=wE(arguments.length,1),o=Du(t),i=n<2?void 0:arguments[1],a=i===void 0?i:Du(i),u=0;u<r.length;){var d=r[u++];if(d.key===o&&(a===void 0||d.value===a))return!0}return!1},set:function(t,r){var n=Vp(this);wE(arguments.length,1);for(var o=n.entries,i=!1,a=Du(t),u=Du(r),d=0,h;d<o.length;d++)h=o[d],h.key===a&&(i?R8e(o,d--,1):(i=!0,h.value=u));i||Sy(o,{key:a,value:u}),hA||(this.size=o.length),n.updateURL()},sort:function(){var t=Vp(this);Vdr(t.entries,function(r,n){return r.key>n.key?1:-1}),t.updateURL()},forEach:function(t){for(var r=Vp(this).entries,n=jdr(t,arguments.length>1?arguments[1]:void 0),o=0,i;o<r.length;)i=r[o++],n(i.value,i.key,this)},keys:function(){return new bee(this,"keys")},values:function(){return new bee(this,"values")},entries:function(){return new bee(this,"entries")}},{enumerable:!0});H8e(EE,Gdr,EE.entries,{name:"entries"});H8e(EE,"toString",function(){return Vp(this).serialize()},{enumerable:!0});hA&&Ndr(EE,"size",{get:function(){return Vp(this).entries.length},configurable:!0,enumerable:!0});Ldr($k,SE);wee({global:!0,constructor:!0,forced:!G8e},{URLSearchParams:$k});!G8e&&vee(mA)&&(U8e=id(L8e.has),B8e=id(L8e.set),xee=function(e){if($8e(e)){var t=e.body,r;if(qdr(t)===SE)return r=e.headers?new mA(e.headers):new mA,U8e(r,"content-type")||B8e(r,"content-type","application/x-www-form-urlencoded;charset=UTF-8"),Fdr(e,{body:P8e(0,Du(t)),headers:P8e(0,r)})}return e},vee(D8e)&&wee({global:!0,enumerable:!0,dontCallGetSet:!0,forced:!0},{fetch:function(t){return D8e(t,arguments.length>1?xee(arguments[1]):{})}}),vee(Wk)&&(Gk=function(t){return W8e(this,yee),new Wk(t,arguments.length>1?xee(arguments[1]):{})},yee.constructor=Gk,Gk.prototype=yee,wee({global:!0,constructor:!0,dontCallGetSet:!0,forced:!0},{Request:Gk})));var U8e,B8e,xee,Gk;J8e.exports={URLSearchParams:$k,getState:Vp}});var vze=A(()=>{"use strict";EK();var ahr=ce(),Bee=Hr(),shr=fA(),Vee=or(),eze=ai(),Zp=At(),Qk=Xo(),Gp=Vi(),lhr=Jl(),zee=Fn(),Gee=VZ(),TE=vW(),ad=dc(),uhr=i_().codeAt,chr=O8e(),lg=wn(),phr=Pu(),fhr=tp(),pze=Tee(),fze=Bo(),dhr=fze.set,Jk=fze.getterFor("URL"),hhr=pze.URLSearchParams,mhr=pze.getState,gA=Vee.URL,Fee=Vee.TypeError,eR=Vee.parseInt,ghr=Math.floor,tze=Math.pow,$p=Zp("".charAt),sd=Zp(/./.exec),yA=Zp([].join),vhr=Zp(1 .toString),yhr=Zp([].pop),ME=Zp([].push),Iee=Zp("".replace),_hr=Zp([].shift),bhr=Zp("".split),bA=Zp("".slice),tR=Zp("".toLowerCase),xhr=Zp([].unshift),whr="Invalid authority",Mee="Invalid scheme",m_="Invalid host",rze="Invalid port",dze=/[a-z]/i,Ehr=/[\d+-.a-z]/i,Uee=/\d/,Shr=/^0x/i,Thr=/^[0-7]+$/,Ihr=/^\d+$/,hze=/^[\da-f]+$/i,Mhr=/[\0\t\n\r #%/:<>?@[\\\]^|]/,Chr=/[\0\t\n\r #/:<>?@[\\\]^|]/,Ahr=/^[\u0000-\u0020]+/,Ohr=/(^|[^\u0000-\u0020])[\u0000-\u0020]+$/,Phr=/[\t\n\r]/g,Hp,Nhr=function(e){var t=bhr(e,"."),r,n,o,i,a,u,d;if(t.length&&t[t.length-1]===""&&t.length--,r=t.length,r>4)return e;for(n=[],o=0;o<r;o++){if(i=t[o],i==="")return e;if(a=10,i.length>1&&$p(i,0)==="0"&&(a=sd(Shr,i)?16:8,i=bA(i,a===8?1:2)),i==="")u=0;else{if(!sd(a===10?Ihr:a===8?Thr:hze,i))return e;u=eR(i,a)}ME(n,u)}for(o=0;o<r;o++)if(u=n[o],o===r-1){if(u>=tze(256,5-r))return null}else if(u>255)return null;for(d=yhr(n),o=0;o<n.length;o++)d+=n[o]*tze(256,3-o);return d},Dhr=function(e){var t=[0,0,0,0,0,0,0,0],r=0,n=null,o=0,i,a,u,d,h,v,b,x=function(){return $p(e,o)};if(x()===":"){if($p(e,1)!==":")return;o+=2,r++,n=r}for(;x();){if(r===8)return;if(x()===":"){if(n!==null)return;o++,r++,n=r;continue}for(i=a=0;a<4&&sd(hze,x());)i=i*16+eR(x(),16),o++,a++;if(x()==="."){if(a===0||(o-=a,r>6))return;for(u=0;x();){if(d=null,u>0)if(x()==="."&&u<4)o++;else return;if(!sd(Uee,x()))return;for(;sd(Uee,x());){if(h=eR(x(),10),d===null)d=h;else{if(d===0)return;d=d*10+h}if(d>255)return;o++}t[r]=t[r]*256+d,u++,(u===2||u===4)&&r++}if(u!==4)return;break}else if(x()===":"){if(o++,!x())return}else if(x())return;t[r++]=i}if(n!==null)for(v=r-n,r=7;r!==0&&v>0;)b=t[r],t[r--]=t[n+v-1],t[n+--v]=b;else if(r!==8)return;return t},Lhr=function(e){for(var t=null,r=1,n=null,o=0,i=0;i<8;i++)e[i]!==0?(o>r&&(t=n,r=o),n=null,o=0):(n===null&&(n=i),++o);return o>r?n:t},vA=function(e){var t,r,n,o;if(typeof e=="number"){for(t=[],r=0;r<4;r++)xhr(t,e%256),e=ghr(e/256);return yA(t,".")}if(typeof e=="object"){for(t="",n=Lhr(e),r=0;r<8;r++)o&&e[r]===0||(o&&(o=!1),n===r?(t+=r?":":"::",o=!0):(t+=vhr(e[r],16),r<7&&(t+=":")));return"["+t+"]"}return e},Xk={},mze=Gee({},Xk,{" ":1,"\"":1,"<":1,">":1,"`":1}),gze=Gee({},mze,{"#":1,"?":1,"{":1,"}":1}),Cee=Gee({},gze,{"/":1,":":1,";":1,"=":1,"@":1,"[":1,"\\":1,"]":1,"^":1,"|":1}),Ty=function(e,t){var r=uhr(e,0);return r>32&&r<127&&!zee(t,e)?e:encodeURIComponent(e)},Zk={ftp:21,file:null,http:80,https:443,ws:80,wss:443},_A=function(e,t){var r;return e.length===2&&sd(dze,$p(e,0))&&((r=$p(e,1))===":"||!t&&r==="|")},nze=function(e){var t;return e.length>1&&_A(bA(e,0,2))&&(e.length===2||(t=$p(e,2))==="/"||t==="\\"||t==="?"||t==="#")},khr=function(e){return e==="."||tR(e)==="%2e"},Rhr=function(e){return e=tR(e),e===".."||e==="%2e."||e===".%2e"||e==="%2e%2e"},Aee={},oze={},Oee={},ize={},aze={},Pee={},sze={},lze={},Yk={},Kk={},Nee={},Dee={},Lee={},kee={},uze={},Ree={},IE={},Th={},cze={},g_={},sg={},Hee=function(e,t,r){var n=lg(e),o,i,a;if(t){if(i=this.parse(n),i)throw new Fee(i);this.searchParams=null}else{if(r!==void 0&&(o=new Hee(r,!0)),i=this.parse(n,null,o),i)throw new Fee(i);a=mhr(new hhr),a.bindURL(this),this.searchParams=a}};Hee.prototype={type:"URL",parse:function(e,t,r){var n=this,o=t||Aee,i=0,a="",u=!1,d=!1,h=!1,v,b,x,M;for(e=lg(e),t||(n.scheme="",n.username="",n.password="",n.host=null,n.port=null,n.path=[],n.query=null,n.fragment=null,n.cannotBeABaseURL=!1,e=Iee(e,Ahr,""),e=Iee(e,Ohr,"$1")),e=Iee(e,Phr,""),v=TE(e);i<=v.length;){switch(b=v[i],o){case Aee:if(b&&sd(dze,b))a+=tR(b),o=oze;else{if(t)return Mee;o=Oee;continue}break;case oze:if(b&&(sd(Ehr,b)||b==="+"||b==="-"||b==="."))a+=tR(b);else if(b===":"){if(t&&(n.isSpecial()!==zee(Zk,a)||a==="file"&&(n.includesCredentials()||n.port!==null)||n.scheme==="file"&&!n.host))return;if(n.scheme=a,t){n.isSpecial()&&Zk[n.scheme]===n.port&&(n.port=null);return}a="",n.scheme==="file"?o=kee:n.isSpecial()&&r&&r.scheme===n.scheme?o=ize:n.isSpecial()?o=lze:v[i+1]==="/"?(o=aze,i++):(n.cannotBeABaseURL=!0,ME(n.path,""),o=cze)}else{if(t)return Mee;a="",o=Oee,i=0;continue}break;case Oee:if(!r||r.cannotBeABaseURL&&b!=="#")return Mee;if(r.cannotBeABaseURL&&b==="#"){n.scheme=r.scheme,n.path=ad(r.path),n.query=r.query,n.fragment="",n.cannotBeABaseURL=!0,o=sg;break}o=r.scheme==="file"?kee:Pee;continue;case ize:if(b==="/"&&v[i+1]==="/")o=Yk,i++;else{o=Pee;continue}break;case aze:if(b==="/"){o=Kk;break}else{o=Th;continue}case Pee:if(n.scheme=r.scheme,b===Hp)n.username=r.username,n.password=r.password,n.host=r.host,n.port=r.port,n.path=ad(r.path),n.query=r.query;else if(b==="/"||b==="\\"&&n.isSpecial())o=sze;else if(b==="?")n.username=r.username,n.password=r.password,n.host=r.host,n.port=r.port,n.path=ad(r.path),n.query="",o=g_;else if(b==="#")n.username=r.username,n.password=r.password,n.host=r.host,n.port=r.port,n.path=ad(r.path),n.query=r.query,n.fragment="",o=sg;else{n.username=r.username,n.password=r.password,n.host=r.host,n.port=r.port,n.path=ad(r.path),n.path.length--,o=Th;continue}break;case sze:if(n.isSpecial()&&(b==="/"||b==="\\"))o=Yk;else if(b==="/")o=Kk;else{n.username=r.username,n.password=r.password,n.host=r.host,n.port=r.port,o=Th;continue}break;case lze:if(o=Yk,b!=="/"||$p(a,i+1)!=="/")continue;i++;break;case Yk:if(b!=="/"&&b!=="\\"){o=Kk;continue}break;case Kk:if(b==="@"){u&&(a="%40"+a),u=!0,x=TE(a);for(var O=0;O<x.length;O++){var D=x[O];if(D===":"&&!h){h=!0;continue}var k=Ty(D,Cee);h?n.password+=k:n.username+=k}a=""}else if(b===Hp||b==="/"||b==="?"||b==="#"||b==="\\"&&n.isSpecial()){if(u&&a==="")return whr;i-=TE(a).length+1,a="",o=Nee}else a+=b;break;case Nee:case Dee:if(t&&n.scheme==="file"){o=Ree;continue}else if(b===":"&&!d){if(a==="")return m_;if(M=n.parseHost(a),M)return M;if(a="",o=Lee,t===Dee)return}else if(b===Hp||b==="/"||b==="?"||b==="#"||b==="\\"&&n.isSpecial()){if(n.isSpecial()&&a==="")return m_;if(t&&a===""&&(n.includesCredentials()||n.port!==null))return;if(M=n.parseHost(a),M)return M;if(a="",o=IE,t)return;continue}else b==="["?d=!0:b==="]"&&(d=!1),a+=b;break;case Lee:if(sd(Uee,b))a+=b;else if(b===Hp||b==="/"||b==="?"||b==="#"||b==="\\"&&n.isSpecial()||t){if(a!==""){var R=eR(a,10);if(R>65535)return rze;n.port=n.isSpecial()&&R===Zk[n.scheme]?null:R,a=""}if(t)return;o=IE;continue}else return rze;break;case kee:if(n.scheme="file",b==="/"||b==="\\")o=uze;else if(r&&r.scheme==="file")switch(b){case Hp:n.host=r.host,n.path=ad(r.path),n.query=r.query;break;case"?":n.host=r.host,n.path=ad(r.path),n.query="",o=g_;break;case"#":n.host=r.host,n.path=ad(r.path),n.query=r.query,n.fragment="",o=sg;break;default:nze(yA(ad(v,i),""))||(n.host=r.host,n.path=ad(r.path),n.shortenPath()),o=Th;continue}else{o=Th;continue}break;case uze:if(b==="/"||b==="\\"){o=Ree;break}r&&r.scheme==="file"&&!nze(yA(ad(v,i),""))&&(_A(r.path[0],!0)?ME(n.path,r.path[0]):n.host=r.host),o=Th;continue;case Ree:if(b===Hp||b==="/"||b==="\\"||b==="?"||b==="#"){if(!t&&_A(a))o=Th;else if(a===""){if(n.host="",t)return;o=IE}else{if(M=n.parseHost(a),M)return M;if(n.host==="localhost"&&(n.host=""),t)return;a="",o=IE}continue}else a+=b;break;case IE:if(n.isSpecial()){if(o=Th,b!=="/"&&b!=="\\")continue}else if(!t&&b==="?")n.query="",o=g_;else if(!t&&b==="#")n.fragment="",o=sg;else if(b!==Hp&&(o=Th,b!=="/"))continue;break;case Th:if(b===Hp||b==="/"||b==="\\"&&n.isSpecial()||!t&&(b==="?"||b==="#")){if(Rhr(a)?(n.shortenPath(),b!=="/"&&!(b==="\\"&&n.isSpecial())&&ME(n.path,"")):khr(a)?b!=="/"&&!(b==="\\"&&n.isSpecial())&&ME(n.path,""):(n.scheme==="file"&&!n.path.length&&_A(a)&&(n.host&&(n.host=""),a=$p(a,0)+":"),ME(n.path,a)),a="",n.scheme==="file"&&(b===Hp||b==="?"||b==="#"))for(;n.path.length>1&&n.path[0]==="";)_hr(n.path);b==="?"?(n.query="",o=g_):b==="#"&&(n.fragment="",o=sg)}else a+=Ty(b,gze);break;case cze:b==="?"?(n.query="",o=g_):b==="#"?(n.fragment="",o=sg):b!==Hp&&(n.path[0]+=Ty(b,Xk));break;case g_:!t&&b==="#"?(n.fragment="",o=sg):b!==Hp&&(b==="'"&&n.isSpecial()?n.query+="%27":b==="#"?n.query+="%23":n.query+=Ty(b,Xk));break;case sg:b!==Hp&&(n.fragment+=Ty(b,mze));break}i++}},parseHost:function(e){var t,r,n;if($p(e,0)==="["){if($p(e,e.length-1)!=="]"||(t=Dhr(bA(e,1,-1)),!t))return m_;this.host=t}else if(this.isSpecial()){if(e=chr(e),sd(Mhr,e)||(t=Nhr(e),t===null))return m_;this.host=t}else{if(sd(Chr,e))return m_;for(t="",r=TE(e),n=0;n<r.length;n++)t+=Ty(r[n],Xk);this.host=t}},cannotHaveUsernamePasswordPort:function(){return!this.host||this.cannotBeABaseURL||this.scheme==="file"},includesCredentials:function(){return this.username!==""||this.password!==""},isSpecial:function(){return zee(Zk,this.scheme)},shortenPath:function(){var e=this.path,t=e.length;t&&(this.scheme!=="file"||t!==1||!_A(e[0],!0))&&e.length--},serialize:function(){var e=this,t=e.scheme,r=e.username,n=e.password,o=e.host,i=e.port,a=e.path,u=e.query,d=e.fragment,h=t+":";return o!==null?(h+="//",e.includesCredentials()&&(h+=r+(n?":"+n:"")+"@"),h+=vA(o),i!==null&&(h+=":"+i)):t==="file"&&(h+="//"),h+=e.cannotBeABaseURL?a[0]:a.length?"/"+yA(a,"/"):"",u!==null&&(h+="?"+u),d!==null&&(h+="#"+d),h},setHref:function(e){var t=this.parse(e);if(t)throw new Fee(t);this.searchParams.update()},getOrigin:function(){var e=this.scheme,t=this.port;if(e==="blob")try{return new CE(e.path[0]).origin}catch(r){return"null"}return e==="file"||!this.isSpecial()?"null":e+"://"+vA(this.host)+(t!==null?":"+t:"")},getProtocol:function(){return this.scheme+":"},setProtocol:function(e){this.parse(lg(e)+":",Aee)},getUsername:function(){return this.username},setUsername:function(e){var t=TE(lg(e));if(!this.cannotHaveUsernamePasswordPort()){this.username="";for(var r=0;r<t.length;r++)this.username+=Ty(t[r],Cee)}},getPassword:function(){return this.password},setPassword:function(e){var t=TE(lg(e));if(!this.cannotHaveUsernamePasswordPort()){this.password="";for(var r=0;r<t.length;r++)this.password+=Ty(t[r],Cee)}},getHost:function(){var e=this.host,t=this.port;return e===null?"":t===null?vA(e):vA(e)+":"+t},setHost:function(e){this.cannotBeABaseURL||this.parse(e,Nee)},getHostname:function(){var e=this.host;return e===null?"":vA(e)},setHostname:function(e){this.cannotBeABaseURL||this.parse(e,Dee)},getPort:function(){var e=this.port;return e===null?"":lg(e)},setPort:function(e){this.cannotHaveUsernamePasswordPort()||(e=lg(e),e===""?this.port=null:this.parse(e,Lee))},getPathname:function(){var e=this.path;return this.cannotBeABaseURL?e[0]:e.length?"/"+yA(e,"/"):""},setPathname:function(e){this.cannotBeABaseURL||(this.path=[],this.parse(e,IE))},getSearch:function(){var e=this.query;return e?"?"+e:""},setSearch:function(e){e=lg(e),e===""?this.query=null:($p(e,0)==="?"&&(e=bA(e,1)),this.query="",this.parse(e,g_)),this.searchParams.update()},getSearchParams:function(){return this.searchParams.facade},getHash:function(){var e=this.fragment;return e?"#"+e:""},setHash:function(e){if(e=lg(e),e===""){this.fragment=null;return}$p(e,0)==="#"&&(e=bA(e,1)),this.fragment="",this.parse(e,sg)},update:function(){this.query=this.searchParams.serialize()||null}};var CE=function(t){var r=lhr(this,Lu),n=fhr(arguments.length,1)>1?arguments[1]:void 0,o=dhr(r,new Hee(t,!1,n));Bee||(r.href=o.serialize(),r.origin=o.getOrigin(),r.protocol=o.getProtocol(),r.username=o.getUsername(),r.password=o.getPassword(),r.host=o.getHost(),r.hostname=o.getHostname(),r.port=o.getPort(),r.pathname=o.getPathname(),r.search=o.getSearch(),r.searchParams=o.getSearchParams(),r.hash=o.getHash())},Lu=CE.prototype,Wp=function(e,t){return{get:function(){return Jk(this)[e]()},set:t&&function(r){return Jk(this)[t](r)},configurable:!0,enumerable:!0}};Bee&&(Gp(Lu,"href",Wp("serialize","setHref")),Gp(Lu,"origin",Wp("getOrigin")),Gp(Lu,"protocol",Wp("getProtocol","setProtocol")),Gp(Lu,"username",Wp("getUsername","setUsername")),Gp(Lu,"password",Wp("getPassword","setPassword")),Gp(Lu,"host",Wp("getHost","setHost")),Gp(Lu,"hostname",Wp("getHostname","setHostname")),Gp(Lu,"port",Wp("getPort","setPort")),Gp(Lu,"pathname",Wp("getPathname","setPathname")),Gp(Lu,"search",Wp("getSearch","setSearch")),Gp(Lu,"searchParams",Wp("getSearchParams")),Gp(Lu,"hash",Wp("getHash","setHash")));Qk(Lu,"toJSON",function(){return Jk(this).serialize()},{enumerable:!0});Qk(Lu,"toString",function(){return Jk(this).serialize()},{enumerable:!0});gA&&(jee=gA.createObjectURL,qee=gA.revokeObjectURL,jee&&Qk(CE,"createObjectURL",eze(jee,gA)),qee&&Qk(CE,"revokeObjectURL",eze(qee,gA)));var jee,qee;phr(CE,"URL");ahr({global:!0,constructor:!0,forced:!shr,sham:!Bee},{URL:CE})});var yze=A(()=>{"use strict";vze()});var xze=A(()=>{"use strict";var jhr=ce(),qhr=un(),bze=Vt(),zhr=tp(),_ze=wn(),Fhr=fA(),Wee=qhr("URL"),Uhr=Fhr&&bze(function(){Wee.canParse()}),Bhr=bze(function(){return Wee.canParse.length!==1});jhr({target:"URL",stat:!0,forced:!Uhr||Bhr},{canParse:function(t){var r=zhr(arguments.length,1),n=_ze(t),o=r<2||arguments[1]===void 0?void 0:_ze(arguments[1]);try{return!!new Wee(n,o)}catch(i){return!1}}})});var Eze=A(()=>{"use strict";var Vhr=ce(),Ghr=un(),Hhr=tp(),wze=wn(),Whr=fA(),$hr=Ghr("URL");Vhr({target:"URL",stat:!0,forced:!Whr},{parse:function(t){var r=Hhr(arguments.length,1),n=wze(t),o=r<2||arguments[1]===void 0?void 0:wze(arguments[1]);try{return new $hr(n,o)}catch(i){return null}}})});var Sze=A(()=>{"use strict";var Zhr=ce(),Yhr=ir();Zhr({target:"URL",proto:!0,enumerable:!0},{toJSON:function(){return Yhr(URL.prototype.toString,this)}})});var Tze=A(()=>{"use strict";Tee()});var Aze=A(()=>{"use strict";var Khr=Xo(),rR=At(),Ize=wn(),Xhr=tp(),Cze=URLSearchParams,nR=Cze.prototype,Qhr=rR(nR.append),Mze=rR(nR.delete),Jhr=rR(nR.forEach),emr=rR([].push),$ee=new Cze("a=1&a=2&b=3");$ee.delete("a",1);$ee.delete("b",void 0);$ee+""!="a=2"&&Khr(nR,"delete",function(e){var t=arguments.length,r=t<2?void 0:arguments[1];if(t&&r===void 0)return Mze(this,e);var n=[];Jhr(this,function(b,x){emr(n,{key:x,value:b})}),Xhr(t,1);for(var o=Ize(e),i=Ize(r),a=0,u=0,d=!1,h=n.length,v;a<h;)v=n[a++],d||v.key===o?(d=!0,Mze(this,v.key)):u++;for(;u<h;)v=n[u++],v.key===o&&v.value===i||Qhr(this,v.key,v.value)},{enumerable:!0,unsafe:!0})});var Dze=A(()=>{"use strict";var tmr=Xo(),Pze=At(),rmr=wn(),nmr=tp(),Nze=URLSearchParams,Zee=Nze.prototype,omr=Pze(Zee.getAll),imr=Pze(Zee.has),Oze=new Nze("a=1");(Oze.has("a",2)||!Oze.has("a",void 0))&&tmr(Zee,"has",function(t){var r=arguments.length,n=r<2?void 0:arguments[1];if(r&&n===void 0)return imr(this,t);var o=omr(this,t);nmr(r,1);for(var i=rmr(n),a=0;a<o.length;)if(o[a++]===i)return!0;return!1},{enumerable:!0,unsafe:!0})});var Lze=A(()=>{"use strict";var amr=Hr(),smr=At(),lmr=Vi(),Yee=URLSearchParams.prototype,umr=smr(Yee.forEach);amr&&!("size"in Yee)&&lmr(Yee,"size",{get:function(){var t=0;return umr(this,function(){t++}),t},configurable:!0,enumerable:!0})});var Rze=A((Tsn,kze)=>{"use strict";P0e();q0e();z0e();F0e();U0e();B0e();V0e();G0e();H0e();W0e();$0e();Z0e();Y0e();K0e();X0e();E1e();C1e();oW();Z1e();lW();r_e();a_e();l_e();p_e();f_e();h_e();g_e();dW();hW();w_e();E_e();I_e();k_e();R_e();q_e();z_e();zM();abe();cbe();pbe();dbe();mbe();Ebe();Tbe();Mbe();Obe();Pbe();$be();Kbe();Xbe();LW();RW();jW();txe();rxe();nxe();zW();Lxe();Wxe();Qxe();ewe();i$();u$();f$();M$();C$();Awe();Pwe();Lwe();kwe();Hwe();Wwe();Xwe();tEe();nEe();uEe();fEe();gEe();k$();F$();H$();$$();Y$();X$();nZ();iZ();aZ();PL();uZ();pZ();dZ();hZ();VH();ZEe();RL();wZ();gSe();_Se();xSe();wSe();ESe();ISe();CSe();ASe();IZ();PSe();DSe();kSe();RSe();jSe();qSe();USe();GSe();HSe();WSe();n2e();o2e();a2e();l2e();u2e();c2e();p2e();f2e();y2e();I2e();P2e();j2e();F2e();H2e();W2e();Y2e();X2e();J2e();eTe();aTe();sTe();lTe();pTe();fTe();dTe();mTe();WZ();$Z();yTe();bTe();wTe();STe();ITe();MTe();CTe();ATe();LTe();kTe();RTe();zTe();FTe();BTe();GTe();nMe();AY();OY();lMe();LY();kY();pMe();yMe();xMe();wMe();IMe();MMe();CMe();AMe();OMe();PMe();NMe();jMe();zMe();FMe();nCe();XY();pCe();a3();vCe();_Ce();wCe();ICe();CCe();iK();lK();cK();fK();hK();vK();_K();iAe();uAe();hAe();xK();yAe();wK();EK();NAe();OK();VAe();GAe();ZAe();YAe();tOe();FK();aOe();pOe();hOe();gOe();$K();EOe();COe();DOe();jOe();qOe();zOe();FOe();UOe();BOe();VOe();GOe();HOe();WOe();$Oe();ZOe();YOe();w4e();E4e();S4e();T4e();I4e();M4e();C4e();A4e();O4e();lX();D4e();k4e();j4e();F4e();B4e();G4e();uX();cX();Z4e();Y4e();X4e();J4e();oPe();aPe();lPe();uPe();pPe();dPe();mPe();vPe();EPe();SPe();IPe();NPe();LPe();zPe();SX();TX();UPe();MX();WPe();k3();lNe();uNe();fNe();zNe();FNe();UNe();BNe();VNe();GNe();WNe();$Ne();YNe();KNe();JNe();eDe();nDe();oDe();iDe();aDe();dDe();hDe();mDe();gDe();vDe();ODe();kDe();$De();XDe();JDe();e5e();r5e();n5e();u5e();c5e();f5e();d5e();h5e();m5e();g5e();_5e();b5e();M5e();D5e();k5e();R5e();j5e();q5e();z5e();G5e();Z5e();K5e();Q5e();J5e();rLe();nLe();oLe();iLe();sLe();cLe();dLe();hLe();mLe();gLe();vLe();yLe();_Le();bLe();xLe();wLe();SLe();TLe();ILe();MLe();CLe();OLe();DLe();HLe();JLe();t3e();n3e();o3e();a3e();s3e();l3e();p3e();f3e();d3e();h3e();v3e();_3e();b3e();w3e();S3e();T3e();C3e();A3e();O3e();N3e();L3e();k3e();F3e();U3e();B3e();G3e();H3e();W3e();$3e();Z3e();Y3e();K3e();X3e();tke();rke();ske();lke();pke();fke();dke();vke();yke();_ke();bke();kke();Rke();jke();qke();zke();Hke();$ke();Yke();Jke();tRe();nRe();aRe();lRe();cRe();pRe();fRe();dRe();hRe();_Re();bRe();wRe();ERe();TRe();IRe();MRe();CRe();ARe();ORe();PRe();NRe();DRe();kRe();jRe();zRe();FRe();URe();BRe();VRe();GRe();HRe();WRe();XRe();r6e();w6e();E6e();S6e();T6e();I6e();M6e();C6e();A6e();P6e();N6e();z6e();F6e();U6e();B6e();V6e();G6e();H6e();W6e();Z6e();Y6e();X6e();J6e();eje();tje();rje();nje();oje();ije();aje();sje();_je();Sje();Ije();Mje();Aje();Oje();Nje();Lje();Rje();qje();zje();Vje();Gje();$je();Zje();Kje();Qje();iqe();cqe();vqe();wqe();Lqe();Uqe();Vqe();Qqe();Jqe();t8e();f8e();_8e();yze();xze();Eze();Sze();Tze();Aze();Dze();Lze();kze.exports=B5()});var Kee=A((Isn,jze)=>{"use strict";jze.exports=Rze()});var o7e=A((hln,n7e)=>{"use strict";var k1r="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED";n7e.exports=k1r});var l7e=A((mln,s7e)=>{"use strict";var R1r=o7e();function i7e(){}function a7e(){}a7e.resetWarningCache=i7e;s7e.exports=function(){function e(n,o,i,a,u,d){if(d!==R1r){var h=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw h.name="Invariant Violation",h}}e.isRequired=e;function t(){return e}var r={array:e,bigint:e,bool:e,func:e,number:e,object:e,string:e,symbol:e,any:e,arrayOf:t,element:e,elementType:e,instanceOf:t,node:e,objectOf:t,oneOf:t,oneOfType:t,shape:t,exact:t,checkPropTypes:a7e,resetWarningCache:i7e};return r.PropTypes=r,r}});var xt=A((yln,u7e)=>{u7e.exports=l7e()();var gln,vln});var V7e=A(BA=>{"use strict";cD();var p_r=Pe(),U7e=60103;BA.Fragment=60107;typeof Symbol=="function"&&Symbol.for&&(nre=Symbol.for,U7e=nre("react.element"),BA.Fragment=nre("react.fragment"));var nre,f_r=p_r.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,d_r=Object.prototype.hasOwnProperty,h_r={key:!0,ref:!0,__self:!0,__source:!0};function B7e(e,t,r){var n,o={},i=null,a=null;r!==void 0&&(i=""+r),t.key!==void 0&&(i=""+t.key),t.ref!==void 0&&(a=t.ref);for(n in t)d_r.call(t,n)&&!h_r.hasOwnProperty(n)&&(o[n]=t[n]);if(e&&e.defaultProps)for(n in t=e.defaultProps,t)o[n]===void 0&&(o[n]=t[n]);return{$$typeof:U7e,type:e,key:i,ref:a,props:o,_owner:f_r.current}}BA.jsx=B7e;BA.jsxs=B7e});var H7e=A((Iun,G7e)=>{"use strict";G7e.exports=V7e()});var XA=A((yfn,IUe)=>{"use strict";IUe.exports=function e(t,r){if(t===r)return!0;if(t&&r&&typeof t=="object"&&typeof r=="object"){if(t.constructor!==r.constructor)return!1;var n,o,i;if(Array.isArray(t)){if(n=t.length,n!=r.length)return!1;for(o=n;o--!==0;)if(!e(t[o],r[o]))return!1;return!0}if(t.constructor===RegExp)return t.source===r.source&&t.flags===r.flags;if(t.valueOf!==Object.prototype.valueOf)return t.valueOf()===r.valueOf();if(t.toString!==Object.prototype.toString)return t.toString()===r.toString();if(i=Object.keys(t),n=i.length,n!==Object.keys(r).length)return!1;for(o=n;o--!==0;)if(!Object.prototype.hasOwnProperty.call(r,i[o]))return!1;for(o=n;o--!==0;){var a=i[o];if(!e(t[a],r[a]))return!1}return!0}return t!==t&&r!==r}});var Mre=A((Dhn,mBe)=>{"use strict";mBe.exports=function(t,r){return function(){for(var o=new Array(arguments.length),i=0;i<o.length;i++)o[i]=arguments[i];return t.apply(r,o)}}});var bc=A((Lhn,yBe)=>{"use strict";var cxr=Mre(),S_=Object.prototype.toString;function Ore(e){return S_.call(e)==="[object Array]"}function Cre(e){return typeof e=="undefined"}function pxr(e){return e!==null&&!Cre(e)&&e.constructor!==null&&!Cre(e.constructor)&&typeof e.constructor.isBuffer=="function"&&e.constructor.isBuffer(e)}function fxr(e){return S_.call(e)==="[object ArrayBuffer]"}function dxr(e){return typeof FormData!="undefined"&&e instanceof FormData}function hxr(e){var t;return typeof ArrayBuffer!="undefined"&&ArrayBuffer.isView?t=ArrayBuffer.isView(e):t=e&&e.buffer&&e.buffer instanceof ArrayBuffer,t}function mxr(e){return typeof e=="string"}function gxr(e){return typeof e=="number"}function gBe(e){return e!==null&&typeof e=="object"}function E6(e){if(S_.call(e)!=="[object Object]")return!1;var t=Object.getPrototypeOf(e);return t===null||t===Object.prototype}function vxr(e){return S_.call(e)==="[object Date]"}function yxr(e){return S_.call(e)==="[object File]"}function _xr(e){return S_.call(e)==="[object Blob]"}function vBe(e){return S_.call(e)==="[object Function]"}function bxr(e){return gBe(e)&&vBe(e.pipe)}function xxr(e){return typeof URLSearchParams!="undefined"&&e instanceof URLSearchParams}function wxr(e){return e.trim?e.trim():e.replace(/^\s+|\s+$/g,"")}function Exr(){return typeof navigator!="undefined"&&(navigator.product==="ReactNative"||navigator.product==="NativeScript"||navigator.product==="NS")?!1:typeof window!="undefined"&&typeof document!="undefined"}function Pre(e,t){if(!(e===null||typeof e=="undefined"))if(typeof e!="object"&&(e=[e]),Ore(e))for(var r=0,n=e.length;r<n;r++)t.call(null,e[r],r,e);else for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&t.call(null,e[o],o,e)}function Are(){var e={};function t(o,i){E6(e[i])&&E6(o)?e[i]=Are(e[i],o):E6(o)?e[i]=Are({},o):Ore(o)?e[i]=o.slice():e[i]=o}for(var r=0,n=arguments.length;r<n;r++)Pre(arguments[r],t);return e}function Sxr(e,t,r){return Pre(t,function(o,i){r&&typeof o=="function"?e[i]=cxr(o,r):e[i]=o}),e}function Txr(e){return e.charCodeAt(0)===65279&&(e=e.slice(1)),e}yBe.exports={isArray:Ore,isArrayBuffer:fxr,isBuffer:pxr,isFormData:dxr,isArrayBufferView:hxr,isString:mxr,isNumber:gxr,isObject:gBe,isPlainObject:E6,isUndefined:Cre,isDate:vxr,isFile:yxr,isBlob:_xr,isFunction:vBe,isStream:bxr,isURLSearchParams:xxr,isStandardBrowserEnv:Exr,forEach:Pre,merge:Are,extend:Sxr,trim:wxr,stripBOM:Txr}});var Nre=A((khn,bBe)=>{"use strict";var GE=bc();function _Be(e){return encodeURIComponent(e).replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%20/g,"+").replace(/%5B/gi,"[").replace(/%5D/gi,"]")}bBe.exports=function(t,r,n){if(!r)return t;var o;if(n)o=n(r);else if(GE.isURLSearchParams(r))o=r.toString();else{var i=[];GE.forEach(r,function(d,h){d===null||typeof d=="undefined"||(GE.isArray(d)?h=h+"[]":d=[d],GE.forEach(d,function(b){GE.isDate(b)?b=b.toISOString():GE.isObject(b)&&(b=JSON.stringify(b)),i.push(_Be(h)+"="+_Be(b))}))}),o=i.join("&")}if(o){var a=t.indexOf("#");a!==-1&&(t=t.slice(0,a)),t+=(t.indexOf("?")===-1?"?":"&")+o}return t}});var wBe=A((Rhn,xBe)=>{"use strict";var Ixr=bc();function S6(){this.handlers=[]}S6.prototype.use=function(t,r,n){return this.handlers.push({fulfilled:t,rejected:r,synchronous:n?n.synchronous:!1,runWhen:n?n.runWhen:null}),this.handlers.length-1};S6.prototype.eject=function(t){this.handlers[t]&&(this.handlers[t]=null)};S6.prototype.forEach=function(t){Ixr.forEach(this.handlers,function(n){n!==null&&t(n)})};xBe.exports=S6});var SBe=A((jhn,EBe)=>{"use strict";var Mxr=bc();EBe.exports=function(t,r){Mxr.forEach(t,function(o,i){i!==r&&i.toUpperCase()===r.toUpperCase()&&(t[r]=o,delete t[i])})}});var Dre=A((qhn,TBe)=>{"use strict";TBe.exports=function(t,r,n,o,i){return t.config=r,n&&(t.code=n),t.request=o,t.response=i,t.isAxiosError=!0,t.toJSON=function(){return{message:this.message,name:this.name,description:this.description,number:this.number,fileName:this.fileName,lineNumber:this.lineNumber,columnNumber:this.columnNumber,stack:this.stack,config:this.config,code:this.code,status:this.response&&this.response.status?this.response.status:null}},t}});var Lre=A((zhn,IBe)=>{"use strict";var Cxr=Dre();IBe.exports=function(t,r,n,o,i){var a=new Error(t);return Cxr(a,r,n,o,i)}});var CBe=A((Fhn,MBe)=>{"use strict";var Axr=Lre();MBe.exports=function(t,r,n){var o=n.config.validateStatus;!n.status||!o||o(n.status)?t(n):r(Axr("Request failed with status code "+n.status,n.config,null,n.request,n))}});var OBe=A((Uhn,ABe)=>{"use strict";var T6=bc();ABe.exports=T6.isStandardBrowserEnv()?function(){return{write:function(r,n,o,i,a,u){var d=[];d.push(r+"="+encodeURIComponent(n)),T6.isNumber(o)&&d.push("expires="+new Date(o).toGMTString()),T6.isString(i)&&d.push("path="+i),T6.isString(a)&&d.push("domain="+a),u===!0&&d.push("secure"),document.cookie=d.join("; ")},read:function(r){var n=document.cookie.match(new RegExp("(^|;\\s*)("+r+")=([^;]*)"));return n?decodeURIComponent(n[3]):null},remove:function(r){this.write(r,"",Date.now()-864e5)}}}():function(){return{write:function(){},read:function(){return null},remove:function(){}}}()});var NBe=A((Bhn,PBe)=>{"use strict";PBe.exports=function(t){return /^([a-z][a-z\d\+\-\.]*:)?\/\//i.test(t)}});var LBe=A((Vhn,DBe)=>{"use strict";DBe.exports=function(t,r){return r?t.replace(/\/+$/,"")+"/"+r.replace(/^\/+/,""):t}});var RBe=A((Ghn,kBe)=>{"use strict";var Oxr=NBe(),Pxr=LBe();kBe.exports=function(t,r){return t&&!Oxr(r)?Pxr(t,r):r}});var qBe=A((Hhn,jBe)=>{"use strict";var kre=bc(),Nxr=["age","authorization","content-length","content-type","etag","expires","from","host","if-modified-since","if-unmodified-since","last-modified","location","max-forwards","proxy-authorization","referer","retry-after","user-agent"];jBe.exports=function(t){var r={},n,o,i;return t&&kre.forEach(t.split(`
`),function(u){if(i=u.indexOf(":"),n=kre.trim(u.substr(0,i)).toLowerCase(),o=kre.trim(u.substr(i+1)),n){if(r[n]&&Nxr.indexOf(n)>=0)return;n==="set-cookie"?r[n]=(r[n]?r[n]:[]).concat([o]):r[n]=r[n]?r[n]+", "+o:o}}),r}});var UBe=A((Whn,FBe)=>{"use strict";var zBe=bc();FBe.exports=zBe.isStandardBrowserEnv()?function(){var t=/(msie|trident)/i.test(navigator.userAgent),r=document.createElement("a"),n;function o(i){var a=i;return t&&(r.setAttribute("href",a),a=r.href),r.setAttribute("href",a),{href:r.href,protocol:r.protocol?r.protocol.replace(/:$/,""):"",host:r.host,search:r.search?r.search.replace(/^\?/,""):"",hash:r.hash?r.hash.replace(/^#/,""):"",hostname:r.hostname,port:r.port,pathname:r.pathname.charAt(0)==="/"?r.pathname:"/"+r.pathname}}return n=o(window.location.href),function(a){var u=zBe.isString(a)?o(a):a;return u.protocol===n.protocol&&u.host===n.host}}():function(){return function(){return!0}}()});var eO=A(($hn,BBe)=>{"use strict";function Rre(e){this.message=e}Rre.prototype.toString=function(){return"Cancel"+(this.message?": "+this.message:"")};Rre.prototype.__CANCEL__=!0;BBe.exports=Rre});var qre=A((Zhn,VBe)=>{"use strict";var I6=bc(),Dxr=CBe(),Lxr=OBe(),kxr=Nre(),Rxr=RBe(),jxr=qBe(),qxr=UBe(),jre=Lre(),zxr=tO(),Fxr=eO();VBe.exports=function(t){return new Promise(function(n,o){var i=t.data,a=t.headers,u=t.responseType,d;function h(){t.cancelToken&&t.cancelToken.unsubscribe(d),t.signal&&t.signal.removeEventListener("abort",d)}I6.isFormData(i)&&delete a["Content-Type"];var v=new XMLHttpRequest;if(t.auth){var b=t.auth.username||"",x=t.auth.password?unescape(encodeURIComponent(t.auth.password)):"";a.Authorization="Basic "+btoa(b+":"+x)}var M=Rxr(t.baseURL,t.url);v.open(t.method.toUpperCase(),kxr(M,t.params,t.paramsSerializer),!0),v.timeout=t.timeout;function O(){if(v){var k="getAllResponseHeaders"in v?jxr(v.getAllResponseHeaders()):null,R=!u||u==="text"||u==="json"?v.responseText:v.response,q={data:R,status:v.status,statusText:v.statusText,headers:k,config:t,request:v};Dxr(function(G){n(G),h()},function(G){o(G),h()},q),v=null}}if("onloadend"in v?v.onloadend=O:v.onreadystatechange=function(){!v||v.readyState!==4||v.status===0&&!(v.responseURL&&v.responseURL.indexOf("file:")===0)||setTimeout(O)},v.onabort=function(){v&&(o(jre("Request aborted",t,"ECONNABORTED",v)),v=null)},v.onerror=function(){o(jre("Network Error",t,null,v)),v=null},v.ontimeout=function(){var R=t.timeout?"timeout of "+t.timeout+"ms exceeded":"timeout exceeded",q=t.transitional||zxr.transitional;t.timeoutErrorMessage&&(R=t.timeoutErrorMessage),o(jre(R,t,q.clarifyTimeoutError?"ETIMEDOUT":"ECONNABORTED",v)),v=null},I6.isStandardBrowserEnv()){var D=(t.withCredentials||qxr(M))&&t.xsrfCookieName?Lxr.read(t.xsrfCookieName):void 0;D&&(a[t.xsrfHeaderName]=D)}"setRequestHeader"in v&&I6.forEach(a,function(R,q){typeof i=="undefined"&&q.toLowerCase()==="content-type"?delete a[q]:v.setRequestHeader(q,R)}),I6.isUndefined(t.withCredentials)||(v.withCredentials=!!t.withCredentials),u&&u!=="json"&&(v.responseType=t.responseType),typeof t.onDownloadProgress=="function"&&v.addEventListener("progress",t.onDownloadProgress),typeof t.onUploadProgress=="function"&&v.upload&&v.upload.addEventListener("progress",t.onUploadProgress),(t.cancelToken||t.signal)&&(d=function(k){v&&(o(!k||k&&k.type?new Fxr("canceled"):k),v.abort(),v=null)},t.cancelToken&&t.cancelToken.subscribe(d),t.signal&&(t.signal.aborted?d():t.signal.addEventListener("abort",d))),i||(i=null),v.send(i)})}});var tO=A((Yhn,WBe)=>{"use strict";var Sl=bc(),GBe=SBe(),Uxr=Dre(),Bxr={"Content-Type":"application/x-www-form-urlencoded"};function HBe(e,t){!Sl.isUndefined(e)&&Sl.isUndefined(e["Content-Type"])&&(e["Content-Type"]=t)}function Vxr(){var e;return typeof XMLHttpRequest!="undefined"?e=qre():typeof process!="undefined"&&Object.prototype.toString.call(process)==="[object process]"&&(e=qre()),e}function Gxr(e,t,r){if(Sl.isString(e))try{return(t||JSON.parse)(e),Sl.trim(e)}catch(n){if(n.name!=="SyntaxError")throw n}return(r||JSON.stringify)(e)}var M6={transitional:{silentJSONParsing:!0,forcedJSONParsing:!0,clarifyTimeoutError:!1},adapter:Vxr(),transformRequest:[function(t,r){return GBe(r,"Accept"),GBe(r,"Content-Type"),Sl.isFormData(t)||Sl.isArrayBuffer(t)||Sl.isBuffer(t)||Sl.isStream(t)||Sl.isFile(t)||Sl.isBlob(t)?t:Sl.isArrayBufferView(t)?t.buffer:Sl.isURLSearchParams(t)?(HBe(r,"application/x-www-form-urlencoded;charset=utf-8"),t.toString()):Sl.isObject(t)||r&&r["Content-Type"]==="application/json"?(HBe(r,"application/json"),Gxr(t)):t}],transformResponse:[function(t){var r=this.transitional||M6.transitional,n=r&&r.silentJSONParsing,o=r&&r.forcedJSONParsing,i=!n&&this.responseType==="json";if(i||o&&Sl.isString(t)&&t.length)try{return JSON.parse(t)}catch(a){if(i)throw a.name==="SyntaxError"?Uxr(a,this,"E_JSON_PARSE"):a}return t}],timeout:0,xsrfCookieName:"XSRF-TOKEN",xsrfHeaderName:"X-XSRF-TOKEN",maxContentLength:-1,maxBodyLength:-1,validateStatus:function(t){return t>=200&&t<300},headers:{common:{Accept:"application/json, text/plain, */*"}}};Sl.forEach(["delete","get","head"],function(t){M6.headers[t]={}});Sl.forEach(["post","put","patch"],function(t){M6.headers[t]=Sl.merge(Bxr)});WBe.exports=M6});var ZBe=A((Khn,$Be)=>{"use strict";var Hxr=bc(),Wxr=tO();$Be.exports=function(t,r,n){var o=this||Wxr;return Hxr.forEach(n,function(a){t=a.call(o,t,r)}),t}});var zre=A((Xhn,YBe)=>{"use strict";YBe.exports=function(t){return!!(t&&t.__CANCEL__)}});var QBe=A((Qhn,XBe)=>{"use strict";var KBe=bc(),Fre=ZBe(),$xr=zre(),Zxr=tO(),Yxr=eO();function Ure(e){if(e.cancelToken&&e.cancelToken.throwIfRequested(),e.signal&&e.signal.aborted)throw new Yxr("canceled")}XBe.exports=function(t){Ure(t),t.headers=t.headers||{},t.data=Fre.call(t,t.data,t.headers,t.transformRequest),t.headers=KBe.merge(t.headers.common||{},t.headers[t.method]||{},t.headers),KBe.forEach(["delete","get","head","post","put","patch","common"],function(o){delete t.headers[o]});var r=t.adapter||Zxr.adapter;return r(t).then(function(o){return Ure(t),o.data=Fre.call(t,o.data,o.headers,t.transformResponse),o},function(o){return $xr(o)||(Ure(t),o&&o.response&&(o.response.data=Fre.call(t,o.response.data,o.response.headers,t.transformResponse))),Promise.reject(o)})}});var Bre=A((Jhn,JBe)=>{"use strict";var ap=bc();JBe.exports=function(t,r){r=r||{};var n={};function o(v,b){return ap.isPlainObject(v)&&ap.isPlainObject(b)?ap.merge(v,b):ap.isPlainObject(b)?ap.merge({},b):ap.isArray(b)?b.slice():b}function i(v){if(ap.isUndefined(r[v])){if(!ap.isUndefined(t[v]))return o(void 0,t[v])}else return o(t[v],r[v])}function a(v){if(!ap.isUndefined(r[v]))return o(void 0,r[v])}function u(v){if(ap.isUndefined(r[v])){if(!ap.isUndefined(t[v]))return o(void 0,t[v])}else return o(void 0,r[v])}function d(v){if(v in r)return o(t[v],r[v]);if(v in t)return o(void 0,t[v])}var h={url:a,method:a,data:a,baseURL:u,transformRequest:u,transformResponse:u,paramsSerializer:u,timeout:u,timeoutMessage:u,withCredentials:u,adapter:u,responseType:u,xsrfCookieName:u,xsrfHeaderName:u,onUploadProgress:u,onDownloadProgress:u,decompress:u,maxContentLength:u,maxBodyLength:u,transport:u,httpAgent:u,httpsAgent:u,cancelToken:u,socketPath:u,responseEncoding:u,validateStatus:d};return ap.forEach(Object.keys(t).concat(Object.keys(r)),function(b){var x=h[b]||i,M=x(b);ap.isUndefined(M)&&x!==d||(n[b]=M)}),n}});var Vre=A((emn,eVe)=>{eVe.exports={version:"0.24.0"}});var nVe=A((tmn,rVe)=>{"use strict";var Kxr=Vre().version,Gre={};["object","boolean","number","function","string","symbol"].forEach(function(e,t){Gre[e]=function(n){return typeof n===e||"a"+(t<1?"n ":" ")+e}});var tVe={};Gre.transitional=function(t,r,n){function o(i,a){return"[Axios v"+Kxr+"] Transitional option '"+i+"'"+a+(n?". "+n:"")}return function(i,a,u){if(t===!1)throw new Error(o(a," has been removed"+(r?" in "+r:"")));return r&&!tVe[a]&&(tVe[a]=!0,console.warn(o(a," has been deprecated since v"+r+" and will be removed in the near future"))),t?t(i,a,u):!0}};function Xxr(e,t,r){if(typeof e!="object")throw new TypeError("options must be an object");for(var n=Object.keys(e),o=n.length;o-->0;){var i=n[o],a=t[i];if(a){var u=e[i],d=u===void 0||a(u,i,e);if(d!==!0)throw new TypeError("option "+i+" must be "+d);continue}if(r!==!0)throw Error("Unknown option "+i)}}rVe.exports={assertOptions:Xxr,validators:Gre}});var uVe=A((rmn,lVe)=>{"use strict";var aVe=bc(),Qxr=Nre(),oVe=wBe(),iVe=QBe(),C6=Bre(),sVe=nVe(),HE=sVe.validators;function rO(e){this.defaults=e,this.interceptors={request:new oVe,response:new oVe}}rO.prototype.request=function(t){typeof t=="string"?(t=arguments[1]||{},t.url=arguments[0]):t=t||{},t=C6(this.defaults,t),t.method?t.method=t.method.toLowerCase():this.defaults.method?t.method=this.defaults.method.toLowerCase():t.method="get";var r=t.transitional;r!==void 0&&sVe.assertOptions(r,{silentJSONParsing:HE.transitional(HE.boolean),forcedJSONParsing:HE.transitional(HE.boolean),clarifyTimeoutError:HE.transitional(HE.boolean)},!1);var n=[],o=!0;this.interceptors.request.forEach(function(x){typeof x.runWhen=="function"&&x.runWhen(t)===!1||(o=o&&x.synchronous,n.unshift(x.fulfilled,x.rejected))});var i=[];this.interceptors.response.forEach(function(x){i.push(x.fulfilled,x.rejected)});var a;if(!o){var u=[iVe,void 0];for(Array.prototype.unshift.apply(u,n),u=u.concat(i),a=Promise.resolve(t);u.length;)a=a.then(u.shift(),u.shift());return a}for(var d=t;n.length;){var h=n.shift(),v=n.shift();try{d=h(d)}catch(b){v(b);break}}try{a=iVe(d)}catch(b){return Promise.reject(b)}for(;i.length;)a=a.then(i.shift(),i.shift());return a};rO.prototype.getUri=function(t){return t=C6(this.defaults,t),Qxr(t.url,t.params,t.paramsSerializer).replace(/^\?/,"")};aVe.forEach(["delete","get","head","options"],function(t){rO.prototype[t]=function(r,n){return this.request(C6(n||{},{method:t,url:r,data:(n||{}).data}))}});aVe.forEach(["post","put","patch"],function(t){rO.prototype[t]=function(r,n,o){return this.request(C6(o||{},{method:t,url:r,data:n}))}});lVe.exports=rO});var pVe=A((nmn,cVe)=>{"use strict";var Jxr=eO();function WE(e){if(typeof e!="function")throw new TypeError("executor must be a function.");var t;this.promise=new Promise(function(o){t=o});var r=this;this.promise.then(function(n){if(r._listeners){var o,i=r._listeners.length;for(o=0;o<i;o++)r._listeners[o](n);r._listeners=null}}),this.promise.then=function(n){var o,i=new Promise(function(a){r.subscribe(a),o=a}).then(n);return i.cancel=function(){r.unsubscribe(o)},i},e(function(o){r.reason||(r.reason=new Jxr(o),t(r.reason))})}WE.prototype.throwIfRequested=function(){if(this.reason)throw this.reason};WE.prototype.subscribe=function(t){if(this.reason){t(this.reason);return}this._listeners?this._listeners.push(t):this._listeners=[t]};WE.prototype.unsubscribe=function(t){if(this._listeners){var r=this._listeners.indexOf(t);r!==-1&&this._listeners.splice(r,1)}};WE.source=function(){var t,r=new WE(function(o){t=o});return{token:r,cancel:t}};cVe.exports=WE});var dVe=A((omn,fVe)=>{"use strict";fVe.exports=function(t){return function(n){return t.apply(null,n)}}});var mVe=A((imn,hVe)=>{"use strict";hVe.exports=function(t){return typeof t=="object"&&t.isAxiosError===!0}});var yVe=A((amn,Hre)=>{"use strict";var gVe=bc(),ewr=Mre(),A6=uVe(),twr=Bre(),rwr=tO();function vVe(e){var t=new A6(e),r=ewr(A6.prototype.request,t);return gVe.extend(r,A6.prototype,t),gVe.extend(r,t),r.create=function(o){return vVe(twr(e,o))},r}var Oh=vVe(rwr);Oh.Axios=A6;Oh.Cancel=eO();Oh.CancelToken=pVe();Oh.isCancel=zre();Oh.VERSION=Vre().version;Oh.all=function(t){return Promise.all(t)};Oh.spread=dVe();Oh.isAxiosError=mVe();Hre.exports=Oh;Hre.exports.default=Oh});var Ph=A((smn,_Ve)=>{_Ve.exports=yVe()});var $E=A((Wre,$re)=>{(function(e,t){typeof Wre=="object"&&typeof $re!="undefined"?$re.exports=t():typeof define=="function"&&define.amd?define(t):(e=typeof globalThis!="undefined"?globalThis:e||self,e.maplibregl=t())})(Wre,function(){"use strict";var e={},t={};function r(o,i,a){if(t[o]=a,o==="index"){var u="var sharedModule = {}; ("+t.shared+")(sharedModule); ("+t.worker+")(sharedModule);",d={};return t.shared(d),t.index(e,d),typeof window!="undefined"&&e.setWorkerUrl(window.URL.createObjectURL(new Blob([u],{type:"text/javascript"}))),e}}r("shared",["exports"],function(o){"use strict";function i(f,l,p,m){return new(p||(p=Promise))(function(_,S){function T(j){try{N(m.next(j))}catch(F){S(F)}}function C(j){try{N(m.throw(j))}catch(F){S(F)}}function N(j){var F;j.done?_(j.value):(F=j.value,F instanceof p?F:new p(function(V){V(F)})).then(T,C)}N((m=m.apply(f,l||[])).next())})}function a(f){return f&&f.__esModule&&Object.prototype.hasOwnProperty.call(f,"default")?f.default:f}var u,d;function h(){if(d)return u;function f(l,p){this.x=l,this.y=p}return d=1,u=f,f.prototype={clone:function(){return new f(this.x,this.y)},add:function(l){return this.clone()._add(l)},sub:function(l){return this.clone()._sub(l)},multByPoint:function(l){return this.clone()._multByPoint(l)},divByPoint:function(l){return this.clone()._divByPoint(l)},mult:function(l){return this.clone()._mult(l)},div:function(l){return this.clone()._div(l)},rotate:function(l){return this.clone()._rotate(l)},rotateAround:function(l,p){return this.clone()._rotateAround(l,p)},matMult:function(l){return this.clone()._matMult(l)},unit:function(){return this.clone()._unit()},perp:function(){return this.clone()._perp()},round:function(){return this.clone()._round()},mag:function(){return Math.sqrt(this.x*this.x+this.y*this.y)},equals:function(l){return this.x===l.x&&this.y===l.y},dist:function(l){return Math.sqrt(this.distSqr(l))},distSqr:function(l){var p=l.x-this.x,m=l.y-this.y;return p*p+m*m},angle:function(){return Math.atan2(this.y,this.x)},angleTo:function(l){return Math.atan2(this.y-l.y,this.x-l.x)},angleWith:function(l){return this.angleWithSep(l.x,l.y)},angleWithSep:function(l,p){return Math.atan2(this.x*p-this.y*l,this.x*l+this.y*p)},_matMult:function(l){var p=l[2]*this.x+l[3]*this.y;return this.x=l[0]*this.x+l[1]*this.y,this.y=p,this},_add:function(l){return this.x+=l.x,this.y+=l.y,this},_sub:function(l){return this.x-=l.x,this.y-=l.y,this},_mult:function(l){return this.x*=l,this.y*=l,this},_div:function(l){return this.x/=l,this.y/=l,this},_multByPoint:function(l){return this.x*=l.x,this.y*=l.y,this},_divByPoint:function(l){return this.x/=l.x,this.y/=l.y,this},_unit:function(){return this._div(this.mag()),this},_perp:function(){var l=this.y;return this.y=this.x,this.x=-l,this},_rotate:function(l){var p=Math.cos(l),m=Math.sin(l),_=m*this.x+p*this.y;return this.x=p*this.x-m*this.y,this.y=_,this},_rotateAround:function(l,p){var m=Math.cos(l),_=Math.sin(l),S=p.y+_*(this.x-p.x)+m*(this.y-p.y);return this.x=p.x+m*(this.x-p.x)-_*(this.y-p.y),this.y=S,this},_round:function(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this}},f.convert=function(l){return l instanceof f?l:Array.isArray(l)?new f(l[0],l[1]):l},u}typeof SuppressedError=="function"&&SuppressedError;var v,b,x=a(h()),M=function(){if(b)return v;function f(l,p,m,_){this.cx=3*l,this.bx=3*(m-l)-this.cx,this.ax=1-this.cx-this.bx,this.cy=3*p,this.by=3*(_-p)-this.cy,this.ay=1-this.cy-this.by,this.p1x=l,this.p1y=p,this.p2x=m,this.p2y=_}return b=1,v=f,f.prototype={sampleCurveX:function(l){return((this.ax*l+this.bx)*l+this.cx)*l},sampleCurveY:function(l){return((this.ay*l+this.by)*l+this.cy)*l},sampleCurveDerivativeX:function(l){return(3*this.ax*l+2*this.bx)*l+this.cx},solveCurveX:function(l,p){if(p===void 0&&(p=1e-6),l<0)return 0;if(l>1)return 1;for(var m=l,_=0;_<8;_++){var S=this.sampleCurveX(m)-l;if(Math.abs(S)<p)return m;var T=this.sampleCurveDerivativeX(m);if(Math.abs(T)<1e-6)break;m-=S/T}var C=0,N=1;for(m=l,_=0;_<20&&(S=this.sampleCurveX(m),!(Math.abs(S-l)<p));_++)l>S?C=m:N=m,m=.5*(N-C)+C;return m},solve:function(l,p){return this.sampleCurveY(this.solveCurveX(l,p))}},v}(),O=a(M);let D,k;function R(){return D==null&&(D=typeof OffscreenCanvas!="undefined"&&new OffscreenCanvas(1,1).getContext("2d")&&typeof createImageBitmap=="function"),D}function q(){if(k==null&&(k=!1,R())){let l=new OffscreenCanvas(5,5).getContext("2d",{willReadFrequently:!0});if(l){for(let m=0;m<5*5;m++){let _=4*m;l.fillStyle=`rgb(${_},${_+1},${_+2})`,l.fillRect(m%5,Math.floor(m/5),1,1)}let p=l.getImageData(0,0,5,5).data;for(let m=0;m<5*5*4;m++)if(m%4!=3&&p[m]!==m){k=!0;break}}}return k||!1}var B=1e-6,G=typeof Float32Array!="undefined"?Float32Array:Array;function re(){var f=new G(9);return G!=Float32Array&&(f[1]=0,f[2]=0,f[3]=0,f[5]=0,f[6]=0,f[7]=0),f[0]=1,f[4]=1,f[8]=1,f}function Q(f){return f[0]=1,f[1]=0,f[2]=0,f[3]=0,f[4]=0,f[5]=1,f[6]=0,f[7]=0,f[8]=0,f[9]=0,f[10]=1,f[11]=0,f[12]=0,f[13]=0,f[14]=0,f[15]=1,f}function ie(){var f=new G(3);return G!=Float32Array&&(f[0]=0,f[1]=0,f[2]=0),f}function me(f){return Math.hypot(f[0],f[1],f[2])}function ve(f,l,p){var m=new G(3);return m[0]=f,m[1]=l,m[2]=p,m}Math.hypot||(Math.hypot=function(){for(var f=0,l=arguments.length;l--;)f+=arguments[l]*arguments[l];return Math.sqrt(f)});var ye,we=me;function Se(f,l,p){var m=l[0],_=l[1],S=l[2],T=l[3];return f[0]=p[0]*m+p[4]*_+p[8]*S+p[12]*T,f[1]=p[1]*m+p[5]*_+p[9]*S+p[13]*T,f[2]=p[2]*m+p[6]*_+p[10]*S+p[14]*T,f[3]=p[3]*m+p[7]*_+p[11]*S+p[15]*T,f}function ge(){var f=new G(4);return G!=Float32Array&&(f[0]=0,f[1]=0,f[2]=0),f[3]=1,f}function Re(){var f=new G(2);return G!=Float32Array&&(f[0]=0,f[1]=0),f}function Je(f,l){var p=new G(2);return p[0]=f,p[1]=l,p}ie(),ye=new G(4),G!=Float32Array&&(ye[0]=0,ye[1]=0,ye[2]=0,ye[3]=0),ie(),ve(1,0,0),ve(0,1,0),ge(),ge(),re(),Re();let tt=8192;function Et(f,l,p){return l*(tt/(f.tileSize*Math.pow(2,p-f.tileID.overscaledZ)))}function Xe(f,l){return(f%l+l)%l}function Pt(f,l,p){return f*(1-p)+l*p}function Lt(f){if(f<=0)return 0;if(f>=1)return 1;let l=f*f,p=l*f;return 4*(f<.5?p:3*(f-l)+p-.75)}function Gt(f,l,p,m){let _=new O(f,l,p,m);return S=>_.solve(S)}let nt=Gt(.25,.1,.25,1);function ct(f,l,p){return Math.min(p,Math.max(l,f))}function _t(f,l,p){let m=p-l,_=((f-l)%m+m)%m+l;return _===l?p:_}function We(f,...l){for(let p of l)for(let m in p)f[m]=p[m];return f}let De=1;function Qe(f,l,p){let m={};for(let _ in f)m[_]=l.call(this,f[_],_,f);return m}function Ge(f,l,p){let m={};for(let _ in f)l.call(this,f[_],_,f)&&(m[_]=f[_]);return m}function st(f){return Array.isArray(f)?f.map(st):typeof f=="object"&&f?Qe(f,st):f}let pt={};function Rt(f){pt[f]||(typeof console!="undefined"&&console.warn(f),pt[f]=!0)}function St(f,l,p){return(p.y-f.y)*(l.x-f.x)>(l.y-f.y)*(p.x-f.x)}function Ot(f){return typeof WorkerGlobalScope!="undefined"&&f!==void 0&&f instanceof WorkerGlobalScope}let sr=null;function Ft(f){return typeof ImageBitmap!="undefined"&&f instanceof ImageBitmap}let Jt="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAAC0lEQVQYV2NgAAIAAAUAAarVyFEAAAAASUVORK5CYII=";function dr(f,l,p,m,_){return i(this,void 0,void 0,function*(){if(typeof VideoFrame=="undefined")throw new Error("VideoFrame not supported");let S=new VideoFrame(f,{timestamp:0});try{let T=S==null?void 0:S.format;if(!T||!T.startsWith("BGR")&&!T.startsWith("RGB"))throw new Error(`Unrecognized format ${T}`);let C=T.startsWith("BGR"),N=new Uint8ClampedArray(m*_*4);if(yield S.copyTo(N,function(j,F,V,$,X){let ee=4*Math.max(1,0),se=(Math.max(0,V)-V)*$*4+ee,he=4*$,Ee=Math.max(0,F),Ve=Math.max(0,V);return{rect:{x:Ee,y:Ve,width:Math.min(j.width,F+$)-Ee,height:Math.min(j.height,V+X)-Ve},layout:[{offset:se,stride:he}]}}(f,l,p,m,_)),C)for(let j=0;j<N.length;j+=4){let F=N[j];N[j]=N[j+2],N[j+2]=F}return N}finally{S.close()}})}let Er,Cr;function Tr(f,l,p,m){return f.addEventListener(l,p,m),{unsubscribe:()=>{f.removeEventListener(l,p,m)}}}function qr(f){return f*Math.PI/180}function Ce(f){return f/Math.PI*180}let Ze={touchstart:!0,touchmove:!0,touchmoveWindow:!0,touchend:!0,touchcancel:!0},et={dblclick:!0,click:!0,mouseover:!0,mouseout:!0,mousedown:!0,mousemove:!0,mousemoveWindow:!0,mouseup:!0,mouseupWindow:!0,contextmenu:!0,wheel:!0},qt="AbortError";function Bt(){return new Error(qt)}let jt={MAX_PARALLEL_IMAGE_REQUESTS:16,MAX_PARALLEL_IMAGE_REQUESTS_PER_FRAME:8,MAX_TILE_CACHE_ZOOM_LEVELS:5,REGISTERED_PROTOCOLS:{},WORKER_URL:""};function $t(f){return jt.REGISTERED_PROTOCOLS[f.substring(0,f.indexOf("://"))]}let an="global-dispatcher";class gn extends Error{constructor(l,p,m,_){super(`AJAXError: ${p} (${l}): ${m}`),this.status=l,this.statusText=p,this.url=m,this.body=_}}let Rn=()=>Ot(self)?self.worker&&self.worker.referrer:(window.location.protocol==="blob:"?window.parent:window).location.href,wa=function(f,l){if(/:\/\//.test(f.url)&&!/^https?:|^file:/.test(f.url)){let m=$t(f.url);if(m)return m(f,l);if(Ot(self)&&self.worker&&self.worker.actor)return self.worker.actor.sendAsync({type:"GR",data:f,targetMapId:an},l)}if(!(/^file:/.test(p=f.url)||/^file:/.test(Rn())&&!/^\w+:/.test(p))){if(fetch&&Request&&AbortController&&Object.prototype.hasOwnProperty.call(Request.prototype,"signal"))return function(m,_){return i(this,void 0,void 0,function*(){let S=new Request(m.url,{method:m.method||"GET",body:m.body,credentials:m.credentials,headers:m.headers,cache:m.cache,referrer:Rn(),signal:_.signal}),T,C;m.type!=="json"||S.headers.has("Accept")||S.headers.set("Accept","application/json");try{T=yield fetch(S)}catch(j){throw new gn(0,j.message,m.url,new Blob())}if(!T.ok){let j=yield T.blob();throw new gn(T.status,T.statusText,m.url,j)}C=m.type==="arrayBuffer"||m.type==="image"?T.arrayBuffer():m.type==="json"?T.json():T.text();let N=yield C;if(_.signal.aborted)throw Bt();return{data:N,cacheControl:T.headers.get("Cache-Control"),expires:T.headers.get("Expires")}})}(f,l);if(Ot(self)&&self.worker&&self.worker.actor)return self.worker.actor.sendAsync({type:"GR",data:f,mustQueue:!0,targetMapId:an},l)}var p;return function(m,_){return new Promise((S,T)=>{var C;let N=new XMLHttpRequest;N.open(m.method||"GET",m.url,!0),m.type!=="arrayBuffer"&&m.type!=="image"||(N.responseType="arraybuffer");for(let j in m.headers)N.setRequestHeader(j,m.headers[j]);m.type==="json"&&(N.responseType="text",!((C=m.headers)===null||C===void 0)&&C.Accept||N.setRequestHeader("Accept","application/json")),N.withCredentials=m.credentials==="include",N.onerror=()=>{T(new Error(N.statusText))},N.onload=()=>{if(!_.signal.aborted)if((N.status>=200&&N.status<300||N.status===0)&&N.response!==null){let j=N.response;if(m.type==="json")try{j=JSON.parse(N.response)}catch(F){return void T(F)}S({data:j,cacheControl:N.getResponseHeader("Cache-Control"),expires:N.getResponseHeader("Expires")})}else{let j=new Blob([N.response],{type:N.getResponseHeader("Content-Type")});T(new gn(N.status,N.statusText,m.url,j))}},_.signal.addEventListener("abort",()=>{N.abort(),T(Bt())}),N.send(m.body)})}(f,l)};function Ye(f){if(!f||f.indexOf("://")<=0||f.indexOf("data:image/")===0||f.indexOf("blob:")===0)return!0;let l=new URL(f),p=window.location;return l.protocol===p.protocol&&l.host===p.host}function le(f,l,p){p[f]&&p[f].indexOf(l)!==-1||(p[f]=p[f]||[],p[f].push(l))}function ue(f,l,p){if(p&&p[f]){let m=p[f].indexOf(l);m!==-1&&p[f].splice(m,1)}}class Y{constructor(l,p={}){We(this,p),this.type=l}}class J extends Y{constructor(l,p={}){super("error",We({error:l},p))}}class de{on(l,p){return this._listeners=this._listeners||{},le(l,p,this._listeners),{unsubscribe:()=>{this.off(l,p)}}}off(l,p){return ue(l,p,this._listeners),ue(l,p,this._oneTimeListeners),this}once(l,p){return p?(this._oneTimeListeners=this._oneTimeListeners||{},le(l,p,this._oneTimeListeners),this):new Promise(m=>this.once(l,m))}fire(l,p){typeof l=="string"&&(l=new Y(l,p||{}));let m=l.type;if(this.listens(m)){l.target=this;let _=this._listeners&&this._listeners[m]?this._listeners[m].slice():[];for(let C of _)C.call(this,l);let S=this._oneTimeListeners&&this._oneTimeListeners[m]?this._oneTimeListeners[m].slice():[];for(let C of S)ue(m,C,this._oneTimeListeners),C.call(this,l);let T=this._eventedParent;T&&(We(l,typeof this._eventedParentData=="function"?this._eventedParentData():this._eventedParentData),T.fire(l))}else l instanceof J&&console.error(l.error);return this}listens(l){return this._listeners&&this._listeners[l]&&this._listeners[l].length>0||this._oneTimeListeners&&this._oneTimeListeners[l]&&this._oneTimeListeners[l].length>0||this._eventedParent&&this._eventedParent.listens(l)}setEventedParent(l,p){return this._eventedParent=l,this._eventedParentData=p,this}}var ne={$version:8,$root:{version:{required:!0,type:"enum",values:[8]},name:{type:"string"},metadata:{type:"*"},center:{type:"array",value:"number"},centerAltitude:{type:"number"},zoom:{type:"number"},bearing:{type:"number",default:0,period:360,units:"degrees"},pitch:{type:"number",default:0,units:"degrees"},roll:{type:"number",default:0,units:"degrees"},state:{type:"state",default:{}},light:{type:"light"},sky:{type:"sky"},projection:{type:"projection"},terrain:{type:"terrain"},sources:{required:!0,type:"sources"},sprite:{type:"sprite"},glyphs:{type:"string"},transition:{type:"transition"},layers:{required:!0,type:"array",value:"layer"}},sources:{"*":{type:"source"}},source:["source_vector","source_raster","source_raster_dem","source_geojson","source_video","source_image"],source_vector:{type:{required:!0,type:"enum",values:{vector:{}}},url:{type:"string"},tiles:{type:"array",value:"string"},bounds:{type:"array",value:"number",length:4,default:[-180,-85.051129,180,85.051129]},scheme:{type:"enum",values:{xyz:{},tms:{}},default:"xyz"},minzoom:{type:"number",default:0},maxzoom:{type:"number",default:22},attribution:{type:"string"},promoteId:{type:"promoteId"},volatile:{type:"boolean",default:!1},"*":{type:"*"}},source_raster:{type:{required:!0,type:"enum",values:{raster:{}}},url:{type:"string"},tiles:{type:"array",value:"string"},bounds:{type:"array",value:"number",length:4,default:[-180,-85.051129,180,85.051129]},minzoom:{type:"number",default:0},maxzoom:{type:"number",default:22},tileSize:{type:"number",default:512,units:"pixels"},scheme:{type:"enum",values:{xyz:{},tms:{}},default:"xyz"},attribution:{type:"string"},volatile:{type:"boolean",default:!1},"*":{type:"*"}},source_raster_dem:{type:{required:!0,type:"enum",values:{"raster-dem":{}}},url:{type:"string"},tiles:{type:"array",value:"string"},bounds:{type:"array",value:"number",length:4,default:[-180,-85.051129,180,85.051129]},minzoom:{type:"number",default:0},maxzoom:{type:"number",default:22},tileSize:{type:"number",default:512,units:"pixels"},attribution:{type:"string"},encoding:{type:"enum",values:{terrarium:{},mapbox:{},custom:{}},default:"mapbox"},redFactor:{type:"number",default:1},blueFactor:{type:"number",default:1},greenFactor:{type:"number",default:1},baseShift:{type:"number",default:0},volatile:{type:"boolean",default:!1},"*":{type:"*"}},source_geojson:{type:{required:!0,type:"enum",values:{geojson:{}}},data:{required:!0,type:"*"},maxzoom:{type:"number",default:18},attribution:{type:"string"},buffer:{type:"number",default:128,maximum:512,minimum:0},filter:{type:"*"},tolerance:{type:"number",default:.375},cluster:{type:"boolean",default:!1},clusterRadius:{type:"number",default:50,minimum:0},clusterMaxZoom:{type:"number"},clusterMinPoints:{type:"number"},clusterProperties:{type:"*"},lineMetrics:{type:"boolean",default:!1},generateId:{type:"boolean",default:!1},promoteId:{type:"promoteId"}},source_video:{type:{required:!0,type:"enum",values:{video:{}}},urls:{required:!0,type:"array",value:"string"},coordinates:{required:!0,type:"array",length:4,value:{type:"array",length:2,value:"number"}}},source_image:{type:{required:!0,type:"enum",values:{image:{}}},url:{required:!0,type:"string"},coordinates:{required:!0,type:"array",length:4,value:{type:"array",length:2,value:"number"}}},layer:{id:{type:"string",required:!0},type:{type:"enum",values:{fill:{},line:{},symbol:{},circle:{},heatmap:{},"fill-extrusion":{},raster:{},hillshade:{},background:{}},required:!0},metadata:{type:"*"},source:{type:"string"},"source-layer":{type:"string"},minzoom:{type:"number",minimum:0,maximum:24},maxzoom:{type:"number",minimum:0,maximum:24},filter:{type:"filter"},layout:{type:"layout"},paint:{type:"paint"}},layout:["layout_fill","layout_line","layout_circle","layout_heatmap","layout_fill-extrusion","layout_symbol","layout_raster","layout_hillshade","layout_background"],layout_background:{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_fill:{"fill-sort-key":{type:"number",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_circle:{"circle-sort-key":{type:"number",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_heatmap:{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},"layout_fill-extrusion":{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_line:{"line-cap":{type:"enum",values:{butt:{},round:{},square:{}},default:"butt",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"line-join":{type:"enum",values:{bevel:{},round:{},miter:{}},default:"miter",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"line-miter-limit":{type:"number",default:2,requires:[{"line-join":"miter"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"line-round-limit":{type:"number",default:1.05,requires:[{"line-join":"round"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"line-sort-key":{type:"number",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_symbol:{"symbol-placement":{type:"enum",values:{point:{},line:{},"line-center":{}},default:"point",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"symbol-spacing":{type:"number",default:250,minimum:1,units:"pixels",requires:[{"symbol-placement":"line"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"symbol-avoid-edges":{type:"boolean",default:!1,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"symbol-sort-key":{type:"number",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"symbol-z-order":{type:"enum",values:{auto:{},"viewport-y":{},source:{}},default:"auto",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-allow-overlap":{type:"boolean",default:!1,requires:["icon-image",{"!":"icon-overlap"}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-overlap":{type:"enum",values:{never:{},always:{},cooperative:{}},requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-ignore-placement":{type:"boolean",default:!1,requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-optional":{type:"boolean",default:!1,requires:["icon-image","text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-rotation-alignment":{type:"enum",values:{map:{},viewport:{},auto:{}},default:"auto",requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-size":{type:"number",default:1,minimum:0,units:"factor of the original icon size",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-text-fit":{type:"enum",values:{none:{},width:{},height:{},both:{}},default:"none",requires:["icon-image","text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-text-fit-padding":{type:"array",value:"number",length:4,default:[0,0,0,0],units:"pixels",requires:["icon-image","text-field",{"icon-text-fit":["both","width","height"]}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"icon-image":{type:"resolvedImage",tokens:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-rotate":{type:"number",default:0,period:360,units:"degrees",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-padding":{type:"padding",default:[2],units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-keep-upright":{type:"boolean",default:!1,requires:["icon-image",{"icon-rotation-alignment":"map"},{"symbol-placement":["line","line-center"]}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-offset":{type:"array",value:"number",length:2,default:[0,0],requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-anchor":{type:"enum",values:{center:{},left:{},right:{},top:{},bottom:{},"top-left":{},"top-right":{},"bottom-left":{},"bottom-right":{}},default:"center",requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-pitch-alignment":{type:"enum",values:{map:{},viewport:{},auto:{}},default:"auto",requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-pitch-alignment":{type:"enum",values:{map:{},viewport:{},auto:{}},default:"auto",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-rotation-alignment":{type:"enum",values:{map:{},viewport:{},"viewport-glyph":{},auto:{}},default:"auto",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-field":{type:"formatted",default:"",tokens:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-font":{type:"array",value:"string",default:["Open Sans Regular","Arial Unicode MS Regular"],requires:["text-field"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-size":{type:"number",default:16,minimum:0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-max-width":{type:"number",default:10,minimum:0,units:"ems",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-line-height":{type:"number",default:1.2,units:"ems",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-letter-spacing":{type:"number",default:0,units:"ems",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-justify":{type:"enum",values:{auto:{},left:{},center:{},right:{}},default:"center",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-radial-offset":{type:"number",units:"ems",default:0,requires:["text-field"],"property-type":"data-driven",expression:{interpolated:!0,parameters:["zoom","feature"]}},"text-variable-anchor":{type:"array",value:"enum",values:{center:{},left:{},right:{},top:{},bottom:{},"top-left":{},"top-right":{},"bottom-left":{},"bottom-right":{}},requires:["text-field",{"symbol-placement":["point"]}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-variable-anchor-offset":{type:"variableAnchorOffsetCollection",requires:["text-field",{"symbol-placement":["point"]}],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-anchor":{type:"enum",values:{center:{},left:{},right:{},top:{},bottom:{},"top-left":{},"top-right":{},"bottom-left":{},"bottom-right":{}},default:"center",requires:["text-field",{"!":"text-variable-anchor"}],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-max-angle":{type:"number",default:45,units:"degrees",requires:["text-field",{"symbol-placement":["line","line-center"]}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-writing-mode":{type:"array",value:"enum",values:{horizontal:{},vertical:{}},requires:["text-field",{"symbol-placement":["point"]}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-rotate":{type:"number",default:0,period:360,units:"degrees",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-padding":{type:"number",default:2,minimum:0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-keep-upright":{type:"boolean",default:!0,requires:["text-field",{"text-rotation-alignment":"map"},{"symbol-placement":["line","line-center"]}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-transform":{type:"enum",values:{none:{},uppercase:{},lowercase:{}},default:"none",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-offset":{type:"array",value:"number",units:"ems",length:2,default:[0,0],requires:["text-field",{"!":"text-radial-offset"}],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-allow-overlap":{type:"boolean",default:!1,requires:["text-field",{"!":"text-overlap"}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-overlap":{type:"enum",values:{never:{},always:{},cooperative:{}},requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-ignore-placement":{type:"boolean",default:!1,requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-optional":{type:"boolean",default:!1,requires:["text-field","icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_raster:{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_hillshade:{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},filter:{type:"array",value:"*"},filter_operator:{type:"enum",values:{"==":{},"!=":{},">":{},">=":{},"<":{},"<=":{},in:{},"!in":{},all:{},any:{},none:{},has:{},"!has":{}}},geometry_type:{type:"enum",values:{Point:{},LineString:{},Polygon:{}}},function:{expression:{type:"expression"},stops:{type:"array",value:"function_stop"},base:{type:"number",default:1,minimum:0},property:{type:"string",default:"$zoom"},type:{type:"enum",values:{identity:{},exponential:{},interval:{},categorical:{}},default:"exponential"},colorSpace:{type:"enum",values:{rgb:{},lab:{},hcl:{}},default:"rgb"},default:{type:"*",required:!1}},function_stop:{type:"array",minimum:0,maximum:24,value:["number","color"],length:2},expression:{type:"array",value:"*",minimum:1},light:{anchor:{type:"enum",default:"viewport",values:{map:{},viewport:{}},"property-type":"data-constant",transition:!1,expression:{interpolated:!1,parameters:["zoom"]}},position:{type:"array",default:[1.15,210,30],length:3,value:"number","property-type":"data-constant",transition:!0,expression:{interpolated:!0,parameters:["zoom"]}},color:{type:"color","property-type":"data-constant",default:"#ffffff",expression:{interpolated:!0,parameters:["zoom"]},transition:!0},intensity:{type:"number","property-type":"data-constant",default:.5,minimum:0,maximum:1,expression:{interpolated:!0,parameters:["zoom"]},transition:!0}},sky:{"sky-color":{type:"color","property-type":"data-constant",default:"#88C6FC",expression:{interpolated:!0,parameters:["zoom"]},transition:!0},"horizon-color":{type:"color","property-type":"data-constant",default:"#ffffff",expression:{interpolated:!0,parameters:["zoom"]},transition:!0},"fog-color":{type:"color","property-type":"data-constant",default:"#ffffff",expression:{interpolated:!0,parameters:["zoom"]},transition:!0},"fog-ground-blend":{type:"number","property-type":"data-constant",default:.5,minimum:0,maximum:1,expression:{interpolated:!0,parameters:["zoom"]},transition:!0},"horizon-fog-blend":{type:"number","property-type":"data-constant",default:.8,minimum:0,maximum:1,expression:{interpolated:!0,parameters:["zoom"]},transition:!0},"sky-horizon-blend":{type:"number","property-type":"data-constant",default:.8,minimum:0,maximum:1,expression:{interpolated:!0,parameters:["zoom"]},transition:!0},"atmosphere-blend":{type:"number","property-type":"data-constant",default:.8,minimum:0,maximum:1,expression:{interpolated:!0,parameters:["zoom"]},transition:!0}},terrain:{source:{type:"string",required:!0},exaggeration:{type:"number",minimum:0,default:1}},projection:{type:{type:"projectionDefinition",default:"mercator","property-type":"data-constant",transition:!1,expression:{interpolated:!0,parameters:["zoom"]}}},paint:["paint_fill","paint_line","paint_circle","paint_heatmap","paint_fill-extrusion","paint_symbol","paint_raster","paint_hillshade","paint_background"],paint_fill:{"fill-antialias":{type:"boolean",default:!0,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"fill-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"fill-pattern"}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-outline-color":{type:"color",transition:!0,requires:[{"!":"fill-pattern"},{"fill-antialias":!0}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"fill-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["fill-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"fill-pattern":{type:"resolvedImage",transition:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"cross-faded-data-driven"}},"paint_fill-extrusion":{"fill-extrusion-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"fill-extrusion-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"fill-extrusion-pattern"}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-extrusion-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"fill-extrusion-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["fill-extrusion-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"fill-extrusion-pattern":{type:"resolvedImage",transition:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"cross-faded-data-driven"},"fill-extrusion-height":{type:"number",default:0,minimum:0,units:"meters",transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-extrusion-base":{type:"number",default:0,minimum:0,units:"meters",transition:!0,requires:["fill-extrusion-height"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-extrusion-vertical-gradient":{type:"boolean",default:!0,transition:!1,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"}},paint_line:{"line-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"line-pattern"}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"line-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["line-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"line-width":{type:"number",default:1,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-gap-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-offset":{type:"number",default:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-blur":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-dasharray":{type:"array",value:"number",minimum:0,transition:!0,units:"line widths",requires:[{"!":"line-pattern"}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"cross-faded"},"line-pattern":{type:"resolvedImage",transition:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"cross-faded-data-driven"},"line-gradient":{type:"color",transition:!1,requires:[{"!":"line-dasharray"},{"!":"line-pattern"},{source:"geojson",has:{lineMetrics:!0}}],expression:{interpolated:!0,parameters:["line-progress"]},"property-type":"color-ramp"}},paint_circle:{"circle-radius":{type:"number",default:5,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-color":{type:"color",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-blur":{type:"number",default:0,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"circle-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["circle-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"circle-pitch-scale":{type:"enum",values:{map:{},viewport:{}},default:"map",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"circle-pitch-alignment":{type:"enum",values:{map:{},viewport:{}},default:"viewport",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"circle-stroke-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-stroke-color":{type:"color",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-stroke-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"}},paint_heatmap:{"heatmap-radius":{type:"number",default:30,minimum:1,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"heatmap-weight":{type:"number",default:1,minimum:0,transition:!1,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"heatmap-intensity":{type:"number",default:1,minimum:0,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"heatmap-color":{type:"color",default:["interpolate",["linear"],["heatmap-density"],0,"rgba(0, 0, 255, 0)",.1,"royalblue",.3,"cyan",.5,"lime",.7,"yellow",1,"red"],transition:!1,expression:{interpolated:!0,parameters:["heatmap-density"]},"property-type":"color-ramp"},"heatmap-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},paint_symbol:{"icon-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-color":{type:"color",default:"#000000",transition:!0,requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-halo-color":{type:"color",default:"rgba(0, 0, 0, 0)",transition:!0,requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-halo-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-halo-blur":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"icon-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["icon-image","icon-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-color":{type:"color",default:"#000000",transition:!0,overridable:!0,requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-halo-color":{type:"color",default:"rgba(0, 0, 0, 0)",transition:!0,requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-halo-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-halo-blur":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["text-field","text-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"}},paint_raster:{"raster-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-hue-rotate":{type:"number",default:0,period:360,transition:!0,units:"degrees",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-brightness-min":{type:"number",default:0,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-brightness-max":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-saturation":{type:"number",default:0,minimum:-1,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-contrast":{type:"number",default:0,minimum:-1,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-resampling":{type:"enum",values:{linear:{},nearest:{}},default:"linear",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"raster-fade-duration":{type:"number",default:300,minimum:0,transition:!1,units:"milliseconds",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},paint_hillshade:{"hillshade-illumination-direction":{type:"numberArray",default:335,minimum:0,maximum:359,transition:!1,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-illumination-altitude":{type:"numberArray",default:45,minimum:0,maximum:90,transition:!1,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-illumination-anchor":{type:"enum",values:{map:{},viewport:{}},default:"viewport",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-exaggeration":{type:"number",default:.5,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-shadow-color":{type:"colorArray",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-highlight-color":{type:"colorArray",default:"#FFFFFF",transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-accent-color":{type:"color",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-method":{type:"enum",values:{standard:{},basic:{},combined:{},igor:{},multidirectional:{}},default:"standard",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"}},paint_background:{"background-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"background-pattern"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"background-pattern":{type:"resolvedImage",transition:!0,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"cross-faded"},"background-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},transition:{duration:{type:"number",default:300,minimum:0,units:"milliseconds"},delay:{type:"number",default:0,minimum:0,units:"milliseconds"}},"property-type":{"data-driven":{type:"property-type"},"cross-faded":{type:"property-type"},"cross-faded-data-driven":{type:"property-type"},"color-ramp":{type:"property-type"},"data-constant":{type:"property-type"},constant:{type:"property-type"}},promoteId:{"*":{type:"string"}}};let je=["type","source","source-layer","minzoom","maxzoom","filter","layout"];function Ie(f,l){let p={};for(let m in f)m!=="ref"&&(p[m]=f[m]);return je.forEach(m=>{m in l&&(p[m]=l[m])}),p}function oe(f,l){if(Array.isArray(f)){if(!Array.isArray(l)||f.length!==l.length)return!1;for(let p=0;p<f.length;p++)if(!oe(f[p],l[p]))return!1;return!0}if(typeof f=="object"&&f!==null&&l!==null){if(typeof l!="object"||Object.keys(f).length!==Object.keys(l).length)return!1;for(let p in f)if(!oe(f[p],l[p]))return!1;return!0}return f===l}function Ue(f,l){f.push(l)}function ze(f,l,p){Ue(p,{command:"addSource",args:[f,l[f]]})}function it(f,l,p){Ue(l,{command:"removeSource",args:[f]}),p[f]=!0}function wt(f,l,p,m){it(f,p,m),ze(f,l,p)}function $e(f,l,p){let m;for(m in f[p])if(Object.prototype.hasOwnProperty.call(f[p],m)&&m!=="data"&&!oe(f[p][m],l[p][m]))return!1;for(m in l[p])if(Object.prototype.hasOwnProperty.call(l[p],m)&&m!=="data"&&!oe(f[p][m],l[p][m]))return!1;return!0}function Xt(f,l,p,m,_,S){f=f||{},l=l||{};for(let T in f)Object.prototype.hasOwnProperty.call(f,T)&&(oe(f[T],l[T])||p.push({command:S,args:[m,T,l[T],_]}));for(let T in l)Object.prototype.hasOwnProperty.call(l,T)&&!Object.prototype.hasOwnProperty.call(f,T)&&(oe(f[T],l[T])||p.push({command:S,args:[m,T,l[T],_]}))}function yr(f){return f.id}function zt(f,l){return f[l.id]=l,f}class Ke{constructor(l,p,m,_){this.message=(l?`${l}: `:"")+m,_&&(this.identifier=_),p!=null&&p.__line__&&(this.line=p.__line__)}}function Tn(f,...l){for(let p of l)for(let m in p)f[m]=p[m];return f}class rn extends Error{constructor(l,p){super(p),this.message=p,this.key=l}}class Gn{constructor(l,p=[]){this.parent=l,this.bindings={};for(let[m,_]of p)this.bindings[m]=_}concat(l){return new Gn(this,l)}get(l){if(this.bindings[l])return this.bindings[l];if(this.parent)return this.parent.get(l);throw new Error(`${l} not found in scope.`)}has(l){return!!this.bindings[l]||!!this.parent&&this.parent.has(l)}}let Qt={kind:"null"},mt={kind:"number"},fr={kind:"string"},wr={kind:"boolean"},Vr={kind:"color"},en={kind:"projectionDefinition"},Yr={kind:"object"},lr={kind:"value"},In={kind:"collator"},sn={kind:"formatted"},_n={kind:"padding"},tn={kind:"colorArray"},ln={kind:"numberArray"},Rr={kind:"resolvedImage"},Ur={kind:"variableAnchorOffsetCollection"};function Kr(f,l){return{kind:"array",itemType:f,N:l}}function Zr(f){if(f.kind==="array"){let l=Zr(f.itemType);return typeof f.N=="number"?`array<${l}, ${f.N}>`:f.itemType.kind==="value"?"array":`array<${l}>`}return f.kind}let Nt=[Qt,mt,fr,wr,Vr,en,sn,Yr,Kr(lr),_n,ln,tn,Rr,Ur];function Zt(f,l){if(l.kind==="error")return null;if(f.kind==="array"){if(l.kind==="array"&&(l.N===0&&l.itemType.kind==="value"||!Zt(f.itemType,l.itemType))&&(typeof f.N!="number"||f.N===l.N))return null}else{if(f.kind===l.kind)return null;if(f.kind==="value"){for(let p of Nt)if(!Zt(p,l))return null}}return`Expected ${Zr(f)} but found ${Zr(l)} instead.`}function Ii(f,l){return l.some(p=>p.kind===f.kind)}function Zo(f,l){return l.some(p=>p==="null"?f===null:p==="array"?Array.isArray(f):p==="object"?f&&!Array.isArray(f)&&typeof f=="object":p===typeof f)}function io(f,l){return f.kind==="array"&&l.kind==="array"?f.itemType.kind===l.itemType.kind&&typeof f.N=="number":f.kind===l.kind}let qo=.96422,Hl=.82521,Ls=4/29,ll=6/29,Yo=3*ll*ll,Qn=ll*ll*ll,ei=Math.PI/180,lo=180/Math.PI;function Gr(f){return(f%=360)<0&&(f+=360),f}function hn([f,l,p,m]){let _,S,T=bn((.2225045*(f=Xr(f))+.7168786*(l=Xr(l))+.0606169*(p=Xr(p)))/1);f===l&&l===p?_=S=T:(_=bn((.4360747*f+.3850649*l+.1430804*p)/qo),S=bn((.0139322*f+.0971045*l+.7141733*p)/Hl));let C=116*T-16;return[C<0?0:C,500*(_-T),200*(T-S),m]}function Xr(f){return f<=.04045?f/12.92:Math.pow((f+.055)/1.055,2.4)}function bn(f){return f>Qn?Math.pow(f,1/3):f/Yo+Ls}function zn([f,l,p,m]){let _=(f+16)/116,S=isNaN(l)?_:_+l/500,T=isNaN(p)?_:_-p/200;return _=1*ao(_),S=qo*ao(S),T=Hl*ao(T),[Nr(3.1338561*S-1.6168667*_-.4906146*T),Nr(-.9787684*S+1.9161415*_+.033454*T),Nr(.0719453*S-.2289914*_+1.4052427*T),m]}function Nr(f){return(f=f<=.00304?12.92*f:1.055*Math.pow(f,1/2.4)-.055)<0?0:f>1?1:f}function ao(f){return f>ll?f*f*f:Yo*(f-Ls)}let Hn=Object.hasOwn||function(f,l){return Object.prototype.hasOwnProperty.call(f,l)};function ho(f,l){return Hn(f,l)?f[l]:void 0}function Bn(f){return parseInt(f.padEnd(2,f),16)/255}function ha(f,l){return bo(l?f/100:f,0,1)}function bo(f,l,p){return Math.min(Math.max(l,f),p)}function nn(f){return!f.some(Number.isNaN)}let ki={aliceblue:[240,248,255],antiquewhite:[250,235,215],aqua:[0,255,255],aquamarine:[127,255,212],azure:[240,255,255],beige:[245,245,220],bisque:[255,228,196],black:[0,0,0],blanchedalmond:[255,235,205],blue:[0,0,255],blueviolet:[138,43,226],brown:[165,42,42],burlywood:[222,184,135],cadetblue:[95,158,160],chartreuse:[127,255,0],chocolate:[210,105,30],coral:[255,127,80],cornflowerblue:[100,149,237],cornsilk:[255,248,220],crimson:[220,20,60],cyan:[0,255,255],darkblue:[0,0,139],darkcyan:[0,139,139],darkgoldenrod:[184,134,11],darkgray:[169,169,169],darkgreen:[0,100,0],darkgrey:[169,169,169],darkkhaki:[189,183,107],darkmagenta:[139,0,139],darkolivegreen:[85,107,47],darkorange:[255,140,0],darkorchid:[153,50,204],darkred:[139,0,0],darksalmon:[233,150,122],darkseagreen:[143,188,143],darkslateblue:[72,61,139],darkslategray:[47,79,79],darkslategrey:[47,79,79],darkturquoise:[0,206,209],darkviolet:[148,0,211],deeppink:[255,20,147],deepskyblue:[0,191,255],dimgray:[105,105,105],dimgrey:[105,105,105],dodgerblue:[30,144,255],firebrick:[178,34,34],floralwhite:[255,250,240],forestgreen:[34,139,34],fuchsia:[255,0,255],gainsboro:[220,220,220],ghostwhite:[248,248,255],gold:[255,215,0],goldenrod:[218,165,32],gray:[128,128,128],green:[0,128,0],greenyellow:[173,255,47],grey:[128,128,128],honeydew:[240,255,240],hotpink:[255,105,180],indianred:[205,92,92],indigo:[75,0,130],ivory:[255,255,240],khaki:[240,230,140],lavender:[230,230,250],lavenderblush:[255,240,245],lawngreen:[124,252,0],lemonchiffon:[255,250,205],lightblue:[173,216,230],lightcoral:[240,128,128],lightcyan:[224,255,255],lightgoldenrodyellow:[250,250,210],lightgray:[211,211,211],lightgreen:[144,238,144],lightgrey:[211,211,211],lightpink:[255,182,193],lightsalmon:[255,160,122],lightseagreen:[32,178,170],lightskyblue:[135,206,250],lightslategray:[119,136,153],lightslategrey:[119,136,153],lightsteelblue:[176,196,222],lightyellow:[255,255,224],lime:[0,255,0],limegreen:[50,205,50],linen:[250,240,230],magenta:[255,0,255],maroon:[128,0,0],mediumaquamarine:[102,205,170],mediumblue:[0,0,205],mediumorchid:[186,85,211],mediumpurple:[147,112,219],mediumseagreen:[60,179,113],mediumslateblue:[123,104,238],mediumspringgreen:[0,250,154],mediumturquoise:[72,209,204],mediumvioletred:[199,21,133],midnightblue:[25,25,112],mintcream:[245,255,250],mistyrose:[255,228,225],moccasin:[255,228,181],navajowhite:[255,222,173],navy:[0,0,128],oldlace:[253,245,230],olive:[128,128,0],olivedrab:[107,142,35],orange:[255,165,0],orangered:[255,69,0],orchid:[218,112,214],palegoldenrod:[238,232,170],palegreen:[152,251,152],paleturquoise:[175,238,238],palevioletred:[219,112,147],papayawhip:[255,239,213],peachpuff:[255,218,185],peru:[205,133,63],pink:[255,192,203],plum:[221,160,221],powderblue:[176,224,230],purple:[128,0,128],rebeccapurple:[102,51,153],red:[255,0,0],rosybrown:[188,143,143],royalblue:[65,105,225],saddlebrown:[139,69,19],salmon:[250,128,114],sandybrown:[244,164,96],seagreen:[46,139,87],seashell:[255,245,238],sienna:[160,82,45],silver:[192,192,192],skyblue:[135,206,235],slateblue:[106,90,205],slategray:[112,128,144],slategrey:[112,128,144],snow:[255,250,250],springgreen:[0,255,127],steelblue:[70,130,180],tan:[210,180,140],teal:[0,128,128],thistle:[216,191,216],tomato:[255,99,71],turquoise:[64,224,208],violet:[238,130,238],wheat:[245,222,179],white:[255,255,255],whitesmoke:[245,245,245],yellow:[255,255,0],yellowgreen:[154,205,50]};function wo(f,l,p){return f+p*(l-f)}function Wl(f,l,p){return f.map((m,_)=>wo(m,l[_],p))}class mn{constructor(l,p,m,_=1,S=!0){this.r=l,this.g=p,this.b=m,this.a=_,S||(this.r*=_,this.g*=_,this.b*=_,_||this.overwriteGetter("rgb",[l,p,m,_]))}static parse(l){if(l instanceof mn)return l;if(typeof l!="string")return;let p=function(m){if((m=m.toLowerCase().trim())==="transparent")return[0,0,0,0];let _=ho(ki,m);if(_){let[T,C,N]=_;return[T/255,C/255,N/255,1]}if(m.startsWith("#")&&/^#(?:[0-9a-f]{3,4}|[0-9a-f]{6}|[0-9a-f]{8})$/.test(m)){let T=m.length<6?1:2,C=1;return[Bn(m.slice(C,C+=T)),Bn(m.slice(C,C+=T)),Bn(m.slice(C,C+=T)),Bn(m.slice(C,C+T)||"ff")]}if(m.startsWith("rgb")){let T=m.match(/^rgba?\(\s*([\de.+-]+)(%)?(?:\s+|\s*(,)\s*)([\de.+-]+)(%)?(?:\s+|\s*(,)\s*)([\de.+-]+)(%)?(?:\s*([,\/])\s*([\de.+-]+)(%)?)?\s*\)$/);if(T){let[C,N,j,F,V,$,X,ee,se,he,Ee,Ve]=T,Oe=[F||" ",X||" ",he].join("");if(Oe==="  "||Oe==="  /"||Oe===",,"||Oe===",,,"){let K=[j,$,se].join(""),pe=K==="%%%"?100:K===""?255:0;if(pe){let Ne=[bo(+N/pe,0,1),bo(+V/pe,0,1),bo(+ee/pe,0,1),Ee?ha(+Ee,Ve):1];if(nn(Ne))return Ne}}return}}let S=m.match(/^hsla?\(\s*([\de.+-]+)(?:deg)?(?:\s+|\s*(,)\s*)([\de.+-]+)%(?:\s+|\s*(,)\s*)([\de.+-]+)%(?:\s*([,\/])\s*([\de.+-]+)(%)?)?\s*\)$/);if(S){let[T,C,N,j,F,V,$,X,ee]=S,se=[N||" ",F||" ",$].join("");if(se==="  "||se==="  /"||se===",,"||se===",,,"){let he=[+C,bo(+j,0,100),bo(+V,0,100),X?ha(+X,ee):1];if(nn(he))return function([Ee,Ve,Oe,K]){function pe(Ne){let ot=(Ne+Ee/30)%12,Tt=Ve*Math.min(Oe,1-Oe);return Oe-Tt*Math.max(-1,Math.min(ot-3,9-ot,1))}return Ee=Gr(Ee),Ve/=100,Oe/=100,[pe(0),pe(8),pe(4),K]}(he)}}}(l);return p?new mn(...p,!1):void 0}get rgb(){let{r:l,g:p,b:m,a:_}=this,S=_||1/0;return this.overwriteGetter("rgb",[l/S,p/S,m/S,_])}get hcl(){return this.overwriteGetter("hcl",function(l){let[p,m,_,S]=hn(l),T=Math.sqrt(m*m+_*_);return[Math.round(1e4*T)?Gr(Math.atan2(_,m)*lo):NaN,T,p,S]}(this.rgb))}get lab(){return this.overwriteGetter("lab",hn(this.rgb))}overwriteGetter(l,p){return Object.defineProperty(this,l,{value:p}),p}toString(){let[l,p,m,_]=this.rgb;return`rgba(${[l,p,m].map(S=>Math.round(255*S)).join(",")},${_})`}static interpolate(l,p,m,_="rgb"){switch(_){case"rgb":{let[S,T,C,N]=Wl(l.rgb,p.rgb,m);return new mn(S,T,C,N,!1)}case"hcl":{let[S,T,C,N]=l.hcl,[j,F,V,$]=p.hcl,X,ee;if(isNaN(S)||isNaN(j))isNaN(S)?isNaN(j)?X=NaN:(X=j,C!==1&&C!==0||(ee=F)):(X=S,V!==1&&V!==0||(ee=T));else{let Oe=j-S;j>S&&Oe>180?Oe-=360:j<S&&S-j>180&&(Oe+=360),X=S+m*Oe}let[se,he,Ee,Ve]=function([Oe,K,pe,Ne]){return Oe=isNaN(Oe)?0:Oe*ei,zn([pe,Math.cos(Oe)*K,Math.sin(Oe)*K,Ne])}([X,ee!=null?ee:wo(T,F,m),wo(C,V,m),wo(N,$,m)]);return new mn(se,he,Ee,Ve,!1)}case"lab":{let[S,T,C,N]=zn(Wl(l.lab,p.lab,m));return new mn(S,T,C,N,!1)}}}}mn.black=new mn(0,0,0,1),mn.white=new mn(1,1,1,1),mn.transparent=new mn(0,0,0,0),mn.red=new mn(1,0,0,1);class xu{constructor(l,p,m){this.sensitivity=l?p?"variant":"case":p?"accent":"base",this.locale=m,this.collator=new Intl.Collator(this.locale?this.locale:[],{sensitivity:this.sensitivity,usage:"search"})}compare(l,p){return this.collator.compare(l,p)}resolvedLocale(){return new Intl.Collator(this.locale?this.locale:[]).resolvedOptions().locale}}let ks=["bottom","center","top"];class ul{constructor(l,p,m,_,S,T){this.text=l,this.image=p,this.scale=m,this.fontStack=_,this.textColor=S,this.verticalAlign=T}}class ja{constructor(l){this.sections=l}static fromString(l){return new ja([new ul(l,null,null,null,null,null)])}isEmpty(){return this.sections.length===0||!this.sections.some(l=>l.text.length!==0||l.image&&l.image.name.length!==0)}static factory(l){return l instanceof ja?l:ja.fromString(l)}toString(){return this.sections.length===0?"":this.sections.map(l=>l.text).join("")}}class Zi{constructor(l){this.values=l.slice()}static parse(l){if(l instanceof Zi)return l;if(typeof l=="number")return new Zi([l,l,l,l]);if(Array.isArray(l)&&!(l.length<1||l.length>4)){for(let p of l)if(typeof p!="number")return;switch(l.length){case 1:l=[l[0],l[0],l[0],l[0]];break;case 2:l=[l[0],l[1],l[0],l[1]];break;case 3:l=[l[0],l[1],l[2],l[1]]}return new Zi(l)}}toString(){return JSON.stringify(this.values)}static interpolate(l,p,m){return new Zi(Wl(l.values,p.values,m))}}class ma{constructor(l){this.values=l.slice()}static parse(l){if(l instanceof ma)return l;if(typeof l=="number")return new ma([l]);if(Array.isArray(l)){for(let p of l)if(typeof p!="number")return;return new ma(l)}}toString(){return JSON.stringify(this.values)}static interpolate(l,p,m){return new ma(Wl(l.values,p.values,m))}}class Mi{constructor(l){this.values=l.slice()}static parse(l){if(l instanceof Mi)return l;if(typeof l=="string"){let m=mn.parse(l);return m?new Mi([m]):void 0}if(!Array.isArray(l))return;let p=[];for(let m of l){if(typeof m!="string")return;let _=mn.parse(m);if(!_)return;p.push(_)}return new Mi(p)}toString(){return JSON.stringify(this.values)}static interpolate(l,p,m,_="rgb"){let S=[];if(l.values.length!=p.values.length)throw new Error(`colorArray: Arrays have mismatched length (${l.values.length} vs. ${p.values.length}), cannot interpolate.`);for(let T=0;T<l.values.length;T++)S.push(mn.interpolate(l.values[T],p.values[T],m,_));return new Mi(S)}}class zo extends Error{constructor(l){super(l),this.name="RuntimeError"}toJSON(){return this.message}}let jf=new Set(["center","left","right","top","bottom","top-left","top-right","bottom-left","bottom-right"]);class bs{constructor(l){this.values=l.slice()}static parse(l){if(l instanceof bs)return l;if(Array.isArray(l)&&!(l.length<1)&&l.length%2==0){for(let p=0;p<l.length;p+=2){let m=l[p],_=l[p+1];if(typeof m!="string"||!jf.has(m)||!Array.isArray(_)||_.length!==2||typeof _[0]!="number"||typeof _[1]!="number")return}return new bs(l)}}toString(){return JSON.stringify(this.values)}static interpolate(l,p,m){let _=l.values,S=p.values;if(_.length!==S.length)throw new zo(`Cannot interpolate values of different length. from: ${l.toString()}, to: ${p.toString()}`);let T=[];for(let C=0;C<_.length;C+=2){if(_[C]!==S[C])throw new zo(`Cannot interpolate values containing mismatched anchors. from[${C}]: ${_[C]}, to[${C}]: ${S[C]}`);T.push(_[C]);let[N,j]=_[C+1],[F,V]=S[C+1];T.push([wo(N,F,m),wo(j,V,m)])}return new bs(T)}}class wu{constructor(l){this.name=l.name,this.available=l.available}toString(){return this.name}static fromString(l){return l?new wu({name:l,available:!1}):null}}class xs{constructor(l,p,m){this.from=l,this.to=p,this.transition=m}static interpolate(l,p,m){return new xs(l,p,m)}static parse(l){return l instanceof xs?l:Array.isArray(l)&&l.length===3&&typeof l[0]=="string"&&typeof l[1]=="string"&&typeof l[2]=="number"?new xs(l[0],l[1],l[2]):typeof l=="object"&&typeof l.from=="string"&&typeof l.to=="string"&&typeof l.transition=="number"?new xs(l.from,l.to,l.transition):typeof l=="string"?new xs(l,l,1):void 0}}function V0(f,l,p,m){return typeof f=="number"&&f>=0&&f<=255&&typeof l=="number"&&l>=0&&l<=255&&typeof p=="number"&&p>=0&&p<=255?m===void 0||typeof m=="number"&&m>=0&&m<=1?null:`Invalid rgba value [${[f,l,p,m].join(", ")}]: 'a' must be between 0 and 1.`:`Invalid rgba value [${(typeof m=="number"?[f,l,p,m]:[f,l,p]).join(", ")}]: 'r', 'g', and 'b' must be between 0 and 255.`}function Ko(f){if(f===null||typeof f=="string"||typeof f=="boolean"||typeof f=="number"||f instanceof xs||f instanceof mn||f instanceof xu||f instanceof ja||f instanceof Zi||f instanceof ma||f instanceof Mi||f instanceof bs||f instanceof wu)return!0;if(Array.isArray(f)){for(let l of f)if(!Ko(l))return!1;return!0}if(typeof f=="object"){for(let l in f)if(!Ko(f[l]))return!1;return!0}return!1}function Yi(f){if(f===null)return Qt;if(typeof f=="string")return fr;if(typeof f=="boolean")return wr;if(typeof f=="number")return mt;if(f instanceof mn)return Vr;if(f instanceof xs)return en;if(f instanceof xu)return In;if(f instanceof ja)return sn;if(f instanceof Zi)return _n;if(f instanceof ma)return ln;if(f instanceof Mi)return tn;if(f instanceof bs)return Ur;if(f instanceof wu)return Rr;if(Array.isArray(f)){let l=f.length,p;for(let m of f){let _=Yi(m);if(p){if(p===_)continue;p=lr;break}p=_}return Kr(p||lr,l)}return Yr}function to(f){let l=typeof f;return f===null?"":l==="string"||l==="number"||l==="boolean"?String(f):f instanceof mn||f instanceof xs||f instanceof ja||f instanceof Zi||f instanceof ma||f instanceof Mi||f instanceof bs||f instanceof wu?f.toString():JSON.stringify(f)}class vn{constructor(l,p){this.type=l,this.value=p}static parse(l,p){if(l.length!==2)return p.error(`'literal' expression requires exactly one argument, but found ${l.length-1} instead.`);if(!Ko(l[1]))return p.error("invalid value");let m=l[1],_=Yi(m),S=p.expectedType;return _.kind!=="array"||_.N!==0||!S||S.kind!=="array"||typeof S.N=="number"&&S.N!==0||(_=S),new vn(_,m)}evaluate(){return this.value}eachChild(){}outputDefined(){return!0}}let rv={string:fr,number:mt,boolean:wr,object:Yr};class An{constructor(l,p){this.type=l,this.args=p}static parse(l,p){if(l.length<2)return p.error("Expected at least one argument.");let m,_=1,S=l[0];if(S==="array"){let C,N;if(l.length>2){let j=l[1];if(typeof j!="string"||!(j in rv)||j==="object")return p.error("The item type argument of \"array\" must be one of string, number, boolean",1);C=rv[j],_++}else C=lr;if(l.length>3){if(l[2]!==null&&(typeof l[2]!="number"||l[2]<0||l[2]!==Math.floor(l[2])))return p.error("The length argument to \"array\" must be a positive integer literal",2);N=l[2],_++}m=Kr(C,N)}else{if(!rv[S])throw new Error(`Types doesn't contain name = ${S}`);m=rv[S]}let T=[];for(;_<l.length;_++){let C=p.parse(l[_],_,lr);if(!C)return null;T.push(C)}return new An(m,T)}evaluate(l){for(let p=0;p<this.args.length;p++){let m=this.args[p].evaluate(l);if(!Zt(this.type,Yi(m)))return m;if(p===this.args.length-1)throw new zo(`Expected value to be of type ${Zr(this.type)}, but found ${Zr(Yi(m))} instead.`)}throw new Error}eachChild(l){this.args.forEach(l)}outputDefined(){return this.args.every(l=>l.outputDefined())}}let Bb={"to-boolean":wr,"to-color":Vr,"to-number":mt,"to-string":fr};class Rs{constructor(l,p){this.type=l,this.args=p}static parse(l,p){if(l.length<2)return p.error("Expected at least one argument.");let m=l[0];if(!Bb[m])throw new Error(`Can't parse ${m} as it is not part of the known types`);if((m==="to-boolean"||m==="to-string")&&l.length!==2)return p.error("Expected one argument.");let _=Bb[m],S=[];for(let T=1;T<l.length;T++){let C=p.parse(l[T],T,lr);if(!C)return null;S.push(C)}return new Rs(_,S)}evaluate(l){switch(this.type.kind){case"boolean":return!!this.args[0].evaluate(l);case"color":{let p,m;for(let _ of this.args){if(p=_.evaluate(l),m=null,p instanceof mn)return p;if(typeof p=="string"){let S=l.parseColor(p);if(S)return S}else if(Array.isArray(p)&&(m=p.length<3||p.length>4?`Invalid rgba value ${JSON.stringify(p)}: expected an array containing either three or four numeric values.`:V0(p[0],p[1],p[2],p[3]),!m))return new mn(p[0]/255,p[1]/255,p[2]/255,p[3])}throw new zo(m||`Could not parse color from value '${typeof p=="string"?p:JSON.stringify(p)}'`)}case"padding":{let p;for(let m of this.args){p=m.evaluate(l);let _=Zi.parse(p);if(_)return _}throw new zo(`Could not parse padding from value '${typeof p=="string"?p:JSON.stringify(p)}'`)}case"numberArray":{let p;for(let m of this.args){p=m.evaluate(l);let _=ma.parse(p);if(_)return _}throw new zo(`Could not parse numberArray from value '${typeof p=="string"?p:JSON.stringify(p)}'`)}case"colorArray":{let p;for(let m of this.args){p=m.evaluate(l);let _=Mi.parse(p);if(_)return _}throw new zo(`Could not parse colorArray from value '${typeof p=="string"?p:JSON.stringify(p)}'`)}case"variableAnchorOffsetCollection":{let p;for(let m of this.args){p=m.evaluate(l);let _=bs.parse(p);if(_)return _}throw new zo(`Could not parse variableAnchorOffsetCollection from value '${typeof p=="string"?p:JSON.stringify(p)}'`)}case"number":{let p=null;for(let m of this.args){if(p=m.evaluate(l),p===null)return 0;let _=Number(p);if(!isNaN(_))return _}throw new zo(`Could not convert ${JSON.stringify(p)} to number.`)}case"formatted":return ja.fromString(to(this.args[0].evaluate(l)));case"resolvedImage":return wu.fromString(to(this.args[0].evaluate(l)));case"projectionDefinition":return this.args[0].evaluate(l);default:return to(this.args[0].evaluate(l))}}eachChild(l){this.args.forEach(l)}outputDefined(){return this.args.every(l=>l.outputDefined())}}let cT=["Unknown","Point","LineString","Polygon"];class pT{constructor(){this.globals=null,this.feature=null,this.featureState=null,this.formattedSection=null,this._parseColorCache=new Map,this.availableImages=null,this.canonical=null}id(){return this.feature&&"id"in this.feature?this.feature.id:null}geometryType(){return this.feature?typeof this.feature.type=="number"?cT[this.feature.type]:this.feature.type:null}geometry(){return this.feature&&"geometry"in this.feature?this.feature.geometry:null}canonicalID(){return this.canonical}properties(){return this.feature&&this.feature.properties||{}}parseColor(l){let p=this._parseColorCache.get(l);return p||(p=mn.parse(l),this._parseColorCache.set(l,p)),p}}class G0{constructor(l,p,m=[],_,S=new Gn,T=[]){this.registry=l,this.path=m,this.key=m.map(C=>`[${C}]`).join(""),this.scope=S,this.errors=T,this.expectedType=_,this._isConstant=p}parse(l,p,m,_,S={}){return p?this.concat(p,m,_)._parse(l,S):this._parse(l,S)}_parse(l,p){function m(_,S,T){return T==="assert"?new An(S,[_]):T==="coerce"?new Rs(S,[_]):_}if(l!==null&&typeof l!="string"&&typeof l!="boolean"&&typeof l!="number"||(l=["literal",l]),Array.isArray(l)){if(l.length===0)return this.error("Expected an array with at least one element. If you wanted a literal array, use [\"literal\", []].");let _=l[0];if(typeof _!="string")return this.error(`Expression name must be a string, but found ${typeof _} instead. If you wanted a literal array, use ["literal", [...]].`,0),null;let S=this.registry[_];if(S){let T=S.parse(l,this);if(!T)return null;if(this.expectedType){let C=this.expectedType,N=T.type;if(C.kind!=="string"&&C.kind!=="number"&&C.kind!=="boolean"&&C.kind!=="object"&&C.kind!=="array"||N.kind!=="value"){if(C.kind==="projectionDefinition"&&["string","array"].includes(N.kind)||["color","formatted","resolvedImage"].includes(C.kind)&&["value","string"].includes(N.kind)||["padding","numberArray"].includes(C.kind)&&["value","number","array"].includes(N.kind)||C.kind==="colorArray"&&["value","string","array"].includes(N.kind)||C.kind==="variableAnchorOffsetCollection"&&["value","array"].includes(N.kind))T=m(T,C,p.typeAnnotation||"coerce");else if(this.checkSubtype(C,N))return null}else T=m(T,C,p.typeAnnotation||"assert")}if(!(T instanceof vn)&&T.type.kind!=="resolvedImage"&&this._isConstant(T)){let C=new pT;try{T=new vn(T.type,T.evaluate(C))}catch(N){return this.error(N.message),null}}return T}return this.error(`Unknown expression "${_}". If you wanted a literal array, use ["literal", [...]].`,0)}return this.error(l===void 0?"'undefined' value invalid. Use null instead.":typeof l=="object"?"Bare objects invalid. Use [\"literal\", {...}] instead.":`Expected an array, but found ${typeof l} instead.`)}concat(l,p,m){let _=typeof l=="number"?this.path.concat(l):this.path,S=m?this.scope.concat(m):this.scope;return new G0(this.registry,this._isConstant,_,p||null,S,this.errors)}error(l,...p){let m=`${this.key}${p.map(_=>`[${_}]`).join("")}`;this.errors.push(new rn(m,l))}checkSubtype(l,p){let m=Zt(l,p);return m&&this.error(m),m}}class nv{constructor(l,p){this.type=p.type,this.bindings=[].concat(l),this.result=p}evaluate(l){return this.result.evaluate(l)}eachChild(l){for(let p of this.bindings)l(p[1]);l(this.result)}static parse(l,p){if(l.length<4)return p.error(`Expected at least 3 arguments, but found ${l.length-1} instead.`);let m=[];for(let S=1;S<l.length-1;S+=2){let T=l[S];if(typeof T!="string")return p.error(`Expected string, but found ${typeof T} instead.`,S);if(/[^a-zA-Z0-9_]/.test(T))return p.error("Variable names must contain only alphanumeric characters or '_'.",S);let C=p.parse(l[S+1],S+1);if(!C)return null;m.push([T,C])}let _=p.parse(l[l.length-1],l.length-1,p.expectedType,m);return _?new nv(m,_):null}outputDefined(){return this.result.outputDefined()}}class H0{constructor(l,p){this.type=p.type,this.name=l,this.boundExpression=p}static parse(l,p){if(l.length!==2||typeof l[1]!="string")return p.error("'var' expression requires exactly one string literal argument.");let m=l[1];return p.scope.has(m)?new H0(m,p.scope.get(m)):p.error(`Unknown variable "${m}". Make sure "${m}" has been bound in an enclosing "let" expression before using it.`,1)}evaluate(l){return this.boundExpression.evaluate(l)}eachChild(){}outputDefined(){return!1}}class fT{constructor(l,p,m){this.type=l,this.index=p,this.input=m}static parse(l,p){if(l.length!==3)return p.error(`Expected 2 arguments, but found ${l.length-1} instead.`);let m=p.parse(l[1],1,mt),_=p.parse(l[2],2,Kr(p.expectedType||lr));return m&&_?new fT(_.type.itemType,m,_):null}evaluate(l){let p=this.index.evaluate(l),m=this.input.evaluate(l);if(p<0)throw new zo(`Array index out of bounds: ${p} < 0.`);if(p>=m.length)throw new zo(`Array index out of bounds: ${p} > ${m.length-1}.`);if(p!==Math.floor(p))throw new zo(`Array index must be an integer, but found ${p} instead.`);return m[p]}eachChild(l){l(this.index),l(this.input)}outputDefined(){return!1}}class Vb{constructor(l,p){this.type=wr,this.needle=l,this.haystack=p}static parse(l,p){if(l.length!==3)return p.error(`Expected 2 arguments, but found ${l.length-1} instead.`);let m=p.parse(l[1],1,lr),_=p.parse(l[2],2,lr);return m&&_?Ii(m.type,[wr,fr,mt,Qt,lr])?new Vb(m,_):p.error(`Expected first argument to be of type boolean, string, number or null, but found ${Zr(m.type)} instead`):null}evaluate(l){let p=this.needle.evaluate(l),m=this.haystack.evaluate(l);if(!m)return!1;if(!Zo(p,["boolean","string","number","null"]))throw new zo(`Expected first argument to be of type boolean, string, number or null, but found ${Zr(Yi(p))} instead.`);if(!Zo(m,["string","array"]))throw new zo(`Expected second argument to be of type array or string, but found ${Zr(Yi(m))} instead.`);return m.indexOf(p)>=0}eachChild(l){l(this.needle),l(this.haystack)}outputDefined(){return!0}}class W0{constructor(l,p,m){this.type=mt,this.needle=l,this.haystack=p,this.fromIndex=m}static parse(l,p){if(l.length<=2||l.length>=5)return p.error(`Expected 3 or 4 arguments, but found ${l.length-1} instead.`);let m=p.parse(l[1],1,lr),_=p.parse(l[2],2,lr);if(!m||!_)return null;if(!Ii(m.type,[wr,fr,mt,Qt,lr]))return p.error(`Expected first argument to be of type boolean, string, number or null, but found ${Zr(m.type)} instead`);if(l.length===4){let S=p.parse(l[3],3,mt);return S?new W0(m,_,S):null}return new W0(m,_)}evaluate(l){let p=this.needle.evaluate(l),m=this.haystack.evaluate(l);if(!Zo(p,["boolean","string","number","null"]))throw new zo(`Expected first argument to be of type boolean, string, number or null, but found ${Zr(Yi(p))} instead.`);let _;if(this.fromIndex&&(_=this.fromIndex.evaluate(l)),Zo(m,["string"])){let S=m.indexOf(p,_);return S===-1?-1:[...m.slice(0,S)].length}if(Zo(m,["array"]))return m.indexOf(p,_);throw new zo(`Expected second argument to be of type array or string, but found ${Zr(Yi(m))} instead.`)}eachChild(l){l(this.needle),l(this.haystack),this.fromIndex&&l(this.fromIndex)}outputDefined(){return!1}}class Sm{constructor(l,p,m,_,S,T){this.inputType=l,this.type=p,this.input=m,this.cases=_,this.outputs=S,this.otherwise=T}static parse(l,p){if(l.length<5)return p.error(`Expected at least 4 arguments, but found only ${l.length-1}.`);if(l.length%2!=1)return p.error("Expected an even number of arguments.");let m,_;p.expectedType&&p.expectedType.kind!=="value"&&(_=p.expectedType);let S={},T=[];for(let j=2;j<l.length-1;j+=2){let F=l[j],V=l[j+1];Array.isArray(F)||(F=[F]);let $=p.concat(j);if(F.length===0)return $.error("Expected at least one branch label.");for(let ee of F){if(typeof ee!="number"&&typeof ee!="string")return $.error("Branch labels must be numbers or strings.");if(typeof ee=="number"&&Math.abs(ee)>Number.MAX_SAFE_INTEGER)return $.error(`Branch labels must be integers no larger than ${Number.MAX_SAFE_INTEGER}.`);if(typeof ee=="number"&&Math.floor(ee)!==ee)return $.error("Numeric branch labels must be integer values.");if(m){if($.checkSubtype(m,Yi(ee)))return null}else m=Yi(ee);if(S[String(ee)]!==void 0)return $.error("Branch labels must be unique.");S[String(ee)]=T.length}let X=p.parse(V,j,_);if(!X)return null;_=_||X.type,T.push(X)}let C=p.parse(l[1],1,lr);if(!C)return null;let N=p.parse(l[l.length-1],l.length-1,_);return N?C.type.kind!=="value"&&p.concat(1).checkSubtype(m,C.type)?null:new Sm(m,_,C,S,T,N):null}evaluate(l){let p=this.input.evaluate(l);return(Yi(p)===this.inputType&&this.outputs[this.cases[p]]||this.otherwise).evaluate(l)}eachChild(l){l(this.input),this.outputs.forEach(l),l(this.otherwise)}outputDefined(){return this.outputs.every(l=>l.outputDefined())&&this.otherwise.outputDefined()}}class rs{constructor(l,p,m){this.type=l,this.branches=p,this.otherwise=m}static parse(l,p){if(l.length<4)return p.error(`Expected at least 3 arguments, but found only ${l.length-1}.`);if(l.length%2!=0)return p.error("Expected an odd number of arguments.");let m;p.expectedType&&p.expectedType.kind!=="value"&&(m=p.expectedType);let _=[];for(let T=1;T<l.length-1;T+=2){let C=p.parse(l[T],T,wr);if(!C)return null;let N=p.parse(l[T+1],T+1,m);if(!N)return null;_.push([C,N]),m=m||N.type}let S=p.parse(l[l.length-1],l.length-1,m);if(!S)return null;if(!m)throw new Error("Can't infer output type");return new rs(m,_,S)}evaluate(l){for(let[p,m]of this.branches)if(p.evaluate(l))return m.evaluate(l);return this.otherwise.evaluate(l)}eachChild(l){for(let[p,m]of this.branches)l(p),l(m);l(this.otherwise)}outputDefined(){return this.branches.every(([l,p])=>p.outputDefined())&&this.otherwise.outputDefined()}}class Tm{constructor(l,p,m,_){this.type=l,this.input=p,this.beginIndex=m,this.endIndex=_}static parse(l,p){if(l.length<=2||l.length>=5)return p.error(`Expected 3 or 4 arguments, but found ${l.length-1} instead.`);let m=p.parse(l[1],1,lr),_=p.parse(l[2],2,mt);if(!m||!_)return null;if(!Ii(m.type,[Kr(lr),fr,lr]))return p.error(`Expected first argument to be of type array or string, but found ${Zr(m.type)} instead`);if(l.length===4){let S=p.parse(l[3],3,mt);return S?new Tm(m.type,m,_,S):null}return new Tm(m.type,m,_)}evaluate(l){let p=this.input.evaluate(l),m=this.beginIndex.evaluate(l),_;if(this.endIndex&&(_=this.endIndex.evaluate(l)),Zo(p,["string"]))return[...p].slice(m,_).join("");if(Zo(p,["array"]))return p.slice(m,_);throw new zo(`Expected first argument to be of type array or string, but found ${Zr(Yi(p))} instead.`)}eachChild(l){l(this.input),l(this.beginIndex),this.endIndex&&l(this.endIndex)}outputDefined(){return!1}}function $0(f,l){let p=f.length-1,m,_,S=0,T=p,C=0;for(;S<=T;)if(C=Math.floor((S+T)/2),m=f[C],_=f[C+1],m<=l){if(C===p||l<_)return C;S=C+1}else{if(!(m>l))throw new zo("Input is not a number.");T=C-1}return 0}class Zd{constructor(l,p,m){this.type=l,this.input=p,this.labels=[],this.outputs=[];for(let[_,S]of m)this.labels.push(_),this.outputs.push(S)}static parse(l,p){if(l.length-1<4)return p.error(`Expected at least 4 arguments, but found only ${l.length-1}.`);if((l.length-1)%2!=0)return p.error("Expected an even number of arguments.");let m=p.parse(l[1],1,mt);if(!m)return null;let _=[],S=null;p.expectedType&&p.expectedType.kind!=="value"&&(S=p.expectedType);for(let T=1;T<l.length;T+=2){let C=T===1?-1/0:l[T],N=l[T+1],j=T,F=T+1;if(typeof C!="number")return p.error("Input/output pairs for \"step\" expressions must be defined using literal numeric values (not computed expressions) for the input values.",j);if(_.length&&_[_.length-1][0]>=C)return p.error("Input/output pairs for \"step\" expressions must be arranged with input values in strictly ascending order.",j);let V=p.parse(N,F,S);if(!V)return null;S=S||V.type,_.push([C,V])}return new Zd(S,m,_)}evaluate(l){let p=this.labels,m=this.outputs;if(p.length===1)return m[0].evaluate(l);let _=this.input.evaluate(l);if(_<=p[0])return m[0].evaluate(l);let S=p.length;return _>=p[S-1]?m[S-1].evaluate(l):m[$0(p,_)].evaluate(l)}eachChild(l){l(this.input);for(let p of this.outputs)l(p)}outputDefined(){return this.outputs.every(l=>l.outputDefined())}}function ns(f){return f&&f.__esModule&&Object.prototype.hasOwnProperty.call(f,"default")?f.default:f}var Gb,Hb,nN=function(){if(Hb)return Gb;function f(l,p,m,_){this.cx=3*l,this.bx=3*(m-l)-this.cx,this.ax=1-this.cx-this.bx,this.cy=3*p,this.by=3*(_-p)-this.cy,this.ay=1-this.cy-this.by,this.p1x=l,this.p1y=p,this.p2x=m,this.p2y=_}return Hb=1,Gb=f,f.prototype={sampleCurveX:function(l){return((this.ax*l+this.bx)*l+this.cx)*l},sampleCurveY:function(l){return((this.ay*l+this.by)*l+this.cy)*l},sampleCurveDerivativeX:function(l){return(3*this.ax*l+2*this.bx)*l+this.cx},solveCurveX:function(l,p){if(p===void 0&&(p=1e-6),l<0)return 0;if(l>1)return 1;for(var m=l,_=0;_<8;_++){var S=this.sampleCurveX(m)-l;if(Math.abs(S)<p)return m;var T=this.sampleCurveDerivativeX(m);if(Math.abs(T)<1e-6)break;m-=S/T}var C=0,N=1;for(m=l,_=0;_<20&&(S=this.sampleCurveX(m),!(Math.abs(S-l)<p));_++)l>S?C=m:N=m,m=.5*(N-C)+C;return m},solve:function(l,p){return this.sampleCurveY(this.solveCurveX(l,p))}},Gb}(),pU=ns(nN);class js{constructor(l,p,m,_,S){this.type=l,this.operator=p,this.interpolation=m,this.input=_,this.labels=[],this.outputs=[];for(let[T,C]of S)this.labels.push(T),this.outputs.push(C)}static interpolationFactor(l,p,m,_){let S=0;if(l.name==="exponential")S=Z0(p,l.base,m,_);else if(l.name==="linear")S=Z0(p,1,m,_);else if(l.name==="cubic-bezier"){let T=l.controlPoints;S=new pU(T[0],T[1],T[2],T[3]).solve(Z0(p,1,m,_))}return S}static parse(l,p){let[m,_,S,...T]=l;if(!Array.isArray(_)||_.length===0)return p.error("Expected an interpolation type expression.",1);if(_[0]==="linear")_={name:"linear"};else if(_[0]==="exponential"){let j=_[1];if(typeof j!="number")return p.error("Exponential interpolation requires a numeric base.",1,1);_={name:"exponential",base:j}}else{if(_[0]!=="cubic-bezier")return p.error(`Unknown interpolation type ${String(_[0])}`,1,0);{let j=_.slice(1);if(j.length!==4||j.some(F=>typeof F!="number"||F<0||F>1))return p.error("Cubic bezier interpolation requires four numeric arguments with values between 0 and 1.",1);_={name:"cubic-bezier",controlPoints:j}}}if(l.length-1<4)return p.error(`Expected at least 4 arguments, but found only ${l.length-1}.`);if((l.length-1)%2!=0)return p.error("Expected an even number of arguments.");if(S=p.parse(S,2,mt),!S)return null;let C=[],N=null;m!=="interpolate-hcl"&&m!=="interpolate-lab"||p.expectedType==tn?p.expectedType&&p.expectedType.kind!=="value"&&(N=p.expectedType):N=Vr;for(let j=0;j<T.length;j+=2){let F=T[j],V=T[j+1],$=j+3,X=j+4;if(typeof F!="number")return p.error("Input/output pairs for \"interpolate\" expressions must be defined using literal numeric values (not computed expressions) for the input values.",$);if(C.length&&C[C.length-1][0]>=F)return p.error("Input/output pairs for \"interpolate\" expressions must be arranged with input values in strictly ascending order.",$);let ee=p.parse(V,X,N);if(!ee)return null;N=N||ee.type,C.push([F,ee])}return io(N,mt)||io(N,en)||io(N,Vr)||io(N,_n)||io(N,ln)||io(N,tn)||io(N,Ur)||io(N,Kr(mt))?new js(N,m,_,S,C):p.error(`Type ${Zr(N)} is not interpolatable.`)}evaluate(l){let p=this.labels,m=this.outputs;if(p.length===1)return m[0].evaluate(l);let _=this.input.evaluate(l);if(_<=p[0])return m[0].evaluate(l);let S=p.length;if(_>=p[S-1])return m[S-1].evaluate(l);let T=$0(p,_),C=js.interpolationFactor(this.interpolation,_,p[T],p[T+1]),N=m[T].evaluate(l),j=m[T+1].evaluate(l);switch(this.operator){case"interpolate":switch(this.type.kind){case"number":return wo(N,j,C);case"color":return mn.interpolate(N,j,C);case"padding":return Zi.interpolate(N,j,C);case"colorArray":return Mi.interpolate(N,j,C);case"numberArray":return ma.interpolate(N,j,C);case"variableAnchorOffsetCollection":return bs.interpolate(N,j,C);case"array":return Wl(N,j,C);case"projectionDefinition":return xs.interpolate(N,j,C)}case"interpolate-hcl":switch(this.type.kind){case"color":return mn.interpolate(N,j,C,"hcl");case"colorArray":return Mi.interpolate(N,j,C,"hcl")}case"interpolate-lab":switch(this.type.kind){case"color":return mn.interpolate(N,j,C,"lab");case"colorArray":return Mi.interpolate(N,j,C,"lab")}}}eachChild(l){l(this.input);for(let p of this.outputs)l(p)}outputDefined(){return this.outputs.every(l=>l.outputDefined())}}function Z0(f,l,p,m){let _=m-p,S=f-p;return _===0?0:l===1?S/_:(Math.pow(l,S)-1)/(Math.pow(l,_)-1)}let wp={color:mn.interpolate,number:wo,padding:Zi.interpolate,numberArray:ma.interpolate,colorArray:Mi.interpolate,variableAnchorOffsetCollection:bs.interpolate,array:Wl};class Im{constructor(l,p){this.type=l,this.args=p}static parse(l,p){if(l.length<2)return p.error("Expected at least one argument.");let m=null,_=p.expectedType;_&&_.kind!=="value"&&(m=_);let S=[];for(let C of l.slice(1)){let N=p.parse(C,1+S.length,m,void 0,{typeAnnotation:"omit"});if(!N)return null;m=m||N.type,S.push(N)}if(!m)throw new Error("No output type");let T=_&&S.some(C=>Zt(_,C.type));return new Im(T?lr:m,S)}evaluate(l){let p,m=null,_=0;for(let S of this.args)if(_++,m=S.evaluate(l),m&&m instanceof wu&&!m.available&&(p||(p=m.name),m=null,_===this.args.length&&(m=p)),m!==null)break;return m}eachChild(l){this.args.forEach(l)}outputDefined(){return this.args.every(l=>l.outputDefined())}}function Y0(f,l){return f==="=="||f==="!="?l.kind==="boolean"||l.kind==="string"||l.kind==="number"||l.kind==="null"||l.kind==="value":l.kind==="string"||l.kind==="number"||l.kind==="value"}function tc(f,l,p,m){return m.compare(l,p)===0}function Mm(f,l,p){let m=f!=="=="&&f!=="!=";return class bVe{constructor(S,T,C){this.type=wr,this.lhs=S,this.rhs=T,this.collator=C,this.hasUntypedArgument=S.type.kind==="value"||T.type.kind==="value"}static parse(S,T){if(S.length!==3&&S.length!==4)return T.error("Expected two or three arguments.");let C=S[0],N=T.parse(S[1],1,lr);if(!N)return null;if(!Y0(C,N.type))return T.concat(1).error(`"${C}" comparisons are not supported for type '${Zr(N.type)}'.`);let j=T.parse(S[2],2,lr);if(!j)return null;if(!Y0(C,j.type))return T.concat(2).error(`"${C}" comparisons are not supported for type '${Zr(j.type)}'.`);if(N.type.kind!==j.type.kind&&N.type.kind!=="value"&&j.type.kind!=="value")return T.error(`Cannot compare types '${Zr(N.type)}' and '${Zr(j.type)}'.`);m&&(N.type.kind==="value"&&j.type.kind!=="value"?N=new An(j.type,[N]):N.type.kind!=="value"&&j.type.kind==="value"&&(j=new An(N.type,[j])));let F=null;if(S.length===4){if(N.type.kind!=="string"&&j.type.kind!=="string"&&N.type.kind!=="value"&&j.type.kind!=="value")return T.error("Cannot use collator to compare non-string types.");if(F=T.parse(S[3],3,In),!F)return null}return new bVe(N,j,F)}evaluate(S){let T=this.lhs.evaluate(S),C=this.rhs.evaluate(S);if(m&&this.hasUntypedArgument){let N=Yi(T),j=Yi(C);if(N.kind!==j.kind||N.kind!=="string"&&N.kind!=="number")throw new zo(`Expected arguments for "${f}" to be (string, string) or (number, number), but found (${N.kind}, ${j.kind}) instead.`)}if(this.collator&&!m&&this.hasUntypedArgument){let N=Yi(T),j=Yi(C);if(N.kind!=="string"||j.kind!=="string")return l(S,T,C)}return this.collator?p(S,T,C,this.collator.evaluate(S)):l(S,T,C)}eachChild(S){S(this.lhs),S(this.rhs),this.collator&&S(this.collator)}outputDefined(){return!0}}}let Wb=Mm("==",function(f,l,p){return l===p},tc),fU=Mm("!=",function(f,l,p){return l!==p},function(f,l,p,m){return!tc(0,l,p,m)}),dT=Mm("<",function(f,l,p){return l<p},function(f,l,p,m){return m.compare(l,p)<0}),dU=Mm(">",function(f,l,p){return l>p},function(f,l,p,m){return m.compare(l,p)>0}),hU=Mm("<=",function(f,l,p){return l<=p},function(f,l,p,m){return m.compare(l,p)<=0}),mU=Mm(">=",function(f,l,p){return l>=p},function(f,l,p,m){return m.compare(l,p)>=0});class $b{constructor(l,p,m){this.type=In,this.locale=m,this.caseSensitive=l,this.diacriticSensitive=p}static parse(l,p){if(l.length!==2)return p.error("Expected one argument.");let m=l[1];if(typeof m!="object"||Array.isArray(m))return p.error("Collator options argument must be an object.");let _=p.parse(m["case-sensitive"]!==void 0&&m["case-sensitive"],1,wr);if(!_)return null;let S=p.parse(m["diacritic-sensitive"]!==void 0&&m["diacritic-sensitive"],1,wr);if(!S)return null;let T=null;return m.locale&&(T=p.parse(m.locale,1,fr),!T)?null:new $b(_,S,T)}evaluate(l){return new xu(this.caseSensitive.evaluate(l),this.diacriticSensitive.evaluate(l),this.locale?this.locale.evaluate(l):null)}eachChild(l){l(this.caseSensitive),l(this.diacriticSensitive),this.locale&&l(this.locale)}outputDefined(){return!1}}class ov{constructor(l,p,m,_,S){this.type=fr,this.number=l,this.locale=p,this.currency=m,this.minFractionDigits=_,this.maxFractionDigits=S}static parse(l,p){if(l.length!==3)return p.error("Expected two arguments.");let m=p.parse(l[1],1,mt);if(!m)return null;let _=l[2];if(typeof _!="object"||Array.isArray(_))return p.error("NumberFormat options argument must be an object.");let S=null;if(_.locale&&(S=p.parse(_.locale,1,fr),!S))return null;let T=null;if(_.currency&&(T=p.parse(_.currency,1,fr),!T))return null;let C=null;if(_["min-fraction-digits"]&&(C=p.parse(_["min-fraction-digits"],1,mt),!C))return null;let N=null;return _["max-fraction-digits"]&&(N=p.parse(_["max-fraction-digits"],1,mt),!N)?null:new ov(m,S,T,C,N)}evaluate(l){return new Intl.NumberFormat(this.locale?this.locale.evaluate(l):[],{style:this.currency?"currency":"decimal",currency:this.currency?this.currency.evaluate(l):void 0,minimumFractionDigits:this.minFractionDigits?this.minFractionDigits.evaluate(l):void 0,maximumFractionDigits:this.maxFractionDigits?this.maxFractionDigits.evaluate(l):void 0}).format(this.number.evaluate(l))}eachChild(l){l(this.number),this.locale&&l(this.locale),this.currency&&l(this.currency),this.minFractionDigits&&l(this.minFractionDigits),this.maxFractionDigits&&l(this.maxFractionDigits)}outputDefined(){return!1}}class Zb{constructor(l){this.type=sn,this.sections=l}static parse(l,p){if(l.length<2)return p.error("Expected at least one argument.");let m=l[1];if(!Array.isArray(m)&&typeof m=="object")return p.error("First argument must be an image or text section.");let _=[],S=!1;for(let T=1;T<=l.length-1;++T){let C=l[T];if(S&&typeof C=="object"&&!Array.isArray(C)){S=!1;let N=null;if(C["font-scale"]&&(N=p.parse(C["font-scale"],1,mt),!N))return null;let j=null;if(C["text-font"]&&(j=p.parse(C["text-font"],1,Kr(fr)),!j))return null;let F=null;if(C["text-color"]&&(F=p.parse(C["text-color"],1,Vr),!F))return null;let V=null;if(C["vertical-align"]){if(typeof C["vertical-align"]=="string"&&!ks.includes(C["vertical-align"]))return p.error(`'vertical-align' must be one of: 'bottom', 'center', 'top' but found '${C["vertical-align"]}' instead.`);if(V=p.parse(C["vertical-align"],1,fr),!V)return null}let $=_[_.length-1];$.scale=N,$.font=j,$.textColor=F,$.verticalAlign=V}else{let N=p.parse(l[T],1,lr);if(!N)return null;let j=N.type.kind;if(j!=="string"&&j!=="value"&&j!=="null"&&j!=="resolvedImage")return p.error("Formatted text type must be 'string', 'value', 'image' or 'null'.");S=!0,_.push({content:N,scale:null,font:null,textColor:null,verticalAlign:null})}}return new Zb(_)}evaluate(l){return new ja(this.sections.map(p=>{let m=p.content.evaluate(l);return Yi(m)===Rr?new ul("",m,null,null,null,p.verticalAlign?p.verticalAlign.evaluate(l):null):new ul(to(m),null,p.scale?p.scale.evaluate(l):null,p.font?p.font.evaluate(l).join(","):null,p.textColor?p.textColor.evaluate(l):null,p.verticalAlign?p.verticalAlign.evaluate(l):null)}))}eachChild(l){for(let p of this.sections)l(p.content),p.scale&&l(p.scale),p.font&&l(p.font),p.textColor&&l(p.textColor),p.verticalAlign&&l(p.verticalAlign)}outputDefined(){return!1}}class Yb{constructor(l){this.type=Rr,this.input=l}static parse(l,p){if(l.length!==2)return p.error("Expected two arguments.");let m=p.parse(l[1],1,fr);return m?new Yb(m):p.error("No image name provided.")}evaluate(l){let p=this.input.evaluate(l),m=wu.fromString(p);return m&&l.availableImages&&(m.available=l.availableImages.indexOf(p)>-1),m}eachChild(l){l(this.input)}outputDefined(){return!1}}class Kb{constructor(l){this.type=mt,this.input=l}static parse(l,p){if(l.length!==2)return p.error(`Expected 1 argument, but found ${l.length-1} instead.`);let m=p.parse(l[1],1);return m?m.type.kind!=="array"&&m.type.kind!=="string"&&m.type.kind!=="value"?p.error(`Expected argument of type string or array, but found ${Zr(m.type)} instead.`):new Kb(m):null}evaluate(l){let p=this.input.evaluate(l);if(typeof p=="string")return[...p].length;if(Array.isArray(p))return p.length;throw new zo(`Expected value to be of type string or array, but found ${Zr(Yi(p))} instead.`)}eachChild(l){l(this.input)}outputDefined(){return!1}}let Ep=8192;function oN(f,l){let p=(180+f[0])/360,m=(180-180/Math.PI*Math.log(Math.tan(Math.PI/4+f[1]*Math.PI/360)))/360,_=Math.pow(2,l.z);return[Math.round(p*_*Ep),Math.round(m*_*Ep)]}function hT(f,l){let p=Math.pow(2,l.z);return[(_=(f[0]/Ep+l.x)/p,360*_-180),(m=(f[1]/Ep+l.y)/p,360/Math.PI*Math.atan(Math.exp((180-360*m)*Math.PI/180))-90)];var m,_}function K0(f,l){f[0]=Math.min(f[0],l[0]),f[1]=Math.min(f[1],l[1]),f[2]=Math.max(f[2],l[0]),f[3]=Math.max(f[3],l[1])}function X0(f,l){return!(f[0]<=l[0]||f[2]>=l[2]||f[1]<=l[1]||f[3]>=l[3])}function gU(f,l,p){let m=f[0]-l[0],_=f[1]-l[1],S=f[0]-p[0],T=f[1]-p[1];return m*T-S*_==0&&m*S<=0&&_*T<=0}function Xb(f,l,p,m){return(_=[m[0]-p[0],m[1]-p[1]])[0]*(S=[l[0]-f[0],l[1]-f[1]])[1]-_[1]*S[0]!=0&&!(!lN(f,l,p,m)||!lN(p,m,f,l));var _,S}function iN(f,l,p){for(let m of p)for(let _=0;_<m.length-1;++_)if(Xb(f,l,m[_],m[_+1]))return!0;return!1}function Cm(f,l,p=!1){let m=!1;for(let C of l)for(let N=0;N<C.length-1;N++){if(gU(f,C[N],C[N+1]))return p;(S=C[N])[1]>(_=f)[1]!=(T=C[N+1])[1]>_[1]&&_[0]<(T[0]-S[0])*(_[1]-S[1])/(T[1]-S[1])+S[0]&&(m=!m)}var _,S,T;return m}function aN(f,l){for(let p of l)if(Cm(f,p))return!0;return!1}function sN(f,l){for(let p of f)if(!Cm(p,l))return!1;for(let p=0;p<f.length-1;++p)if(iN(f[p],f[p+1],l))return!1;return!0}function vU(f,l){for(let p of l)if(sN(f,p))return!0;return!1}function lN(f,l,p,m){let _=m[0]-p[0],S=m[1]-p[1],T=(f[0]-p[0])*S-_*(f[1]-p[1]),C=(l[0]-p[0])*S-_*(l[1]-p[1]);return T>0&&C<0||T<0&&C>0}function Q0(f,l,p){let m=[];for(let _=0;_<f.length;_++){let S=[];for(let T=0;T<f[_].length;T++){let C=oN(f[_][T],p);K0(l,C),S.push(C)}m.push(S)}return m}function uN(f,l,p){let m=[];for(let _=0;_<f.length;_++){let S=Q0(f[_],l,p);m.push(S)}return m}function cN(f,l,p,m){if(f[0]<p[0]||f[0]>p[2]){let _=.5*m,S=f[0]-p[0]>_?-m:p[0]-f[0]>_?m:0;S===0&&(S=f[0]-p[2]>_?-m:p[2]-f[0]>_?m:0),f[0]+=S}K0(l,f)}function pN(f,l,p,m){let _=Math.pow(2,m.z)*Ep,S=[m.x*Ep,m.y*Ep],T=[];for(let C of f)for(let N of C){let j=[N.x+S[0],N.y+S[1]];cN(j,l,p,_),T.push(j)}return T}function mT(f,l,p,m){let _=Math.pow(2,m.z)*Ep,S=[m.x*Ep,m.y*Ep],T=[];for(let N of f){let j=[];for(let F of N){let V=[F.x+S[0],F.y+S[1]];K0(l,V),j.push(V)}T.push(j)}if(l[2]-l[0]<=_/2){(C=l)[0]=C[1]=1/0,C[2]=C[3]=-1/0;for(let N of T)for(let j of N)cN(j,l,p,_)}var C;return T}class Yd{constructor(l,p){this.type=wr,this.geojson=l,this.geometries=p}static parse(l,p){if(l.length!==2)return p.error(`'within' expression requires exactly one argument, but found ${l.length-1} instead.`);if(Ko(l[1])){let m=l[1];if(m.type==="FeatureCollection"){let _=[];for(let S of m.features){let{type:T,coordinates:C}=S.geometry;T==="Polygon"&&_.push(C),T==="MultiPolygon"&&_.push(...C)}if(_.length)return new Yd(m,{type:"MultiPolygon",coordinates:_})}else if(m.type==="Feature"){let _=m.geometry.type;if(_==="Polygon"||_==="MultiPolygon")return new Yd(m,m.geometry)}else if(m.type==="Polygon"||m.type==="MultiPolygon")return new Yd(m,m)}return p.error("'within' expression requires valid geojson object that contains polygon geometry type.")}evaluate(l){if(l.geometry()!=null&&l.canonicalID()!=null){if(l.geometryType()==="Point")return function(p,m){let _=[1/0,1/0,-1/0,-1/0],S=[1/0,1/0,-1/0,-1/0],T=p.canonicalID();if(m.type==="Polygon"){let C=Q0(m.coordinates,S,T),N=pN(p.geometry(),_,S,T);if(!X0(_,S))return!1;for(let j of N)if(!Cm(j,C))return!1}if(m.type==="MultiPolygon"){let C=uN(m.coordinates,S,T),N=pN(p.geometry(),_,S,T);if(!X0(_,S))return!1;for(let j of N)if(!aN(j,C))return!1}return!0}(l,this.geometries);if(l.geometryType()==="LineString")return function(p,m){let _=[1/0,1/0,-1/0,-1/0],S=[1/0,1/0,-1/0,-1/0],T=p.canonicalID();if(m.type==="Polygon"){let C=Q0(m.coordinates,S,T),N=mT(p.geometry(),_,S,T);if(!X0(_,S))return!1;for(let j of N)if(!sN(j,C))return!1}if(m.type==="MultiPolygon"){let C=uN(m.coordinates,S,T),N=mT(p.geometry(),_,S,T);if(!X0(_,S))return!1;for(let j of N)if(!vU(j,C))return!1}return!0}(l,this.geometries)}return!1}eachChild(){}outputDefined(){return!0}}let fN=class{constructor(f=[],l=(p,m)=>p<m?-1:p>m?1:0){if(this.data=f,this.length=this.data.length,this.compare=l,this.length>0)for(let p=(this.length>>1)-1;p>=0;p--)this._down(p)}push(f){this.data.push(f),this._up(this.length++)}pop(){if(this.length===0)return;let f=this.data[0],l=this.data.pop();return--this.length>0&&(this.data[0]=l,this._down(0)),f}peek(){return this.data[0]}_up(f){let{data:l,compare:p}=this,m=l[f];for(;f>0;){let _=f-1>>1,S=l[_];if(p(m,S)>=0)break;l[f]=S,f=_}l[f]=m}_down(f){let{data:l,compare:p}=this,m=this.length>>1,_=l[f];for(;f<m;){let S=1+(f<<1),T=S+1;if(T<this.length&&p(l[T],l[S])<0&&(S=T),p(l[S],_)>=0)break;l[f]=l[S],f=S}l[f]=_}};function dN(f,l,p=0,m=f.length-1,_=hN){for(;m>p;){if(m-p>600){let N=m-p+1,j=l-p+1,F=Math.log(N),V=.5*Math.exp(2*F/3),$=.5*Math.sqrt(F*V*(N-V)/N)*(j-N/2<0?-1:1);dN(f,l,Math.max(p,Math.floor(l-j*V/N+$)),Math.min(m,Math.floor(l+(N-j)*V/N+$)),_)}let S=f[l],T=p,C=m;for(iv(f,p,l),_(f[m],S)>0&&iv(f,p,m);T<C;){for(iv(f,T,C),T++,C--;_(f[T],S)<0;)T++;for(;_(f[C],S)>0;)C--}_(f[p],S)===0?iv(f,p,C):(C++,iv(f,C,m)),C<=l&&(p=C+1),l<=C&&(m=C-1)}}function iv(f,l,p){let m=f[l];f[l]=f[p],f[p]=m}function hN(f,l){return f<l?-1:f>l?1:0}function Qb(f,l){if(f.length<=1)return[f];let p=[],m,_;for(let S of f){let T=_U(S);T!==0&&(S.area=Math.abs(T),_===void 0&&(_=T<0),_===T<0?(m&&p.push(m),m=[S]):m.push(S))}if(m&&p.push(m),l>1)for(let S=0;S<p.length;S++)p[S].length<=l||(dN(p[S],l,1,p[S].length-1,yU),p[S]=p[S].slice(0,l));return p}function yU(f,l){return l.area-f.area}function _U(f){let l=0;for(let p,m,_=0,S=f.length,T=S-1;_<S;T=_++)p=f[_],m=f[T],l+=(m.x-p.x)*(p.y+m.y);return l}let gT=1/298.257223563,mN=gT*(2-gT),gN=Math.PI/180;class vT{constructor(l){let p=6378.137*gN*1e3,m=Math.cos(l*gN),_=1/(1-mN*(1-m*m)),S=Math.sqrt(_);this.kx=p*S*m,this.ky=p*S*_*(1-mN)}distance(l,p){let m=this.wrap(l[0]-p[0])*this.kx,_=(l[1]-p[1])*this.ky;return Math.sqrt(m*m+_*_)}pointOnLine(l,p){let m,_,S,T,C=1/0;for(let N=0;N<l.length-1;N++){let j=l[N][0],F=l[N][1],V=this.wrap(l[N+1][0]-j)*this.kx,$=(l[N+1][1]-F)*this.ky,X=0;V===0&&$===0||(X=(this.wrap(p[0]-j)*this.kx*V+(p[1]-F)*this.ky*$)/(V*V+$*$),X>1?(j=l[N+1][0],F=l[N+1][1]):X>0&&(j+=V/this.kx*X,F+=$/this.ky*X)),V=this.wrap(p[0]-j)*this.kx,$=(p[1]-F)*this.ky;let ee=V*V+$*$;ee<C&&(C=ee,m=j,_=F,S=N,T=X)}return{point:[m,_],index:S,t:Math.max(0,Math.min(1,T))}}wrap(l){for(;l<-180;)l+=360;for(;l>180;)l-=360;return l}}function vN(f,l){return l[0]-f[0]}function mo(f){return f[1]-f[0]+1}function qf(f,l){return f[1]>=f[0]&&f[1]<l}function yT(f,l){if(f[0]>f[1])return[null,null];let p=mo(f);if(l){if(p===2)return[f,null];let _=Math.floor(p/2);return[[f[0],f[0]+_],[f[0]+_,f[1]]]}if(p===1)return[f,null];let m=Math.floor(p/2)-1;return[[f[0],f[0]+m],[f[0]+m+1,f[1]]]}function _T(f,l){if(!qf(l,f.length))return[1/0,1/0,-1/0,-1/0];let p=[1/0,1/0,-1/0,-1/0];for(let m=l[0];m<=l[1];++m)K0(p,f[m]);return p}function bT(f){let l=[1/0,1/0,-1/0,-1/0];for(let p of f)for(let m of p)K0(l,m);return l}function yN(f){return f[0]!==-1/0&&f[1]!==-1/0&&f[2]!==1/0&&f[3]!==1/0}function xT(f,l,p){if(!yN(f)||!yN(l))return NaN;let m=0,_=0;return f[2]<l[0]&&(m=l[0]-f[2]),f[0]>l[2]&&(m=f[0]-l[2]),f[1]>l[3]&&(_=f[1]-l[3]),f[3]<l[1]&&(_=l[1]-f[3]),p.distance([0,0],[m,_])}function Am(f,l,p){let m=p.pointOnLine(l,f);return p.distance(f,m.point)}function wT(f,l,p,m,_){let S=Math.min(Am(f,[p,m],_),Am(l,[p,m],_)),T=Math.min(Am(p,[f,l],_),Am(m,[f,l],_));return Math.min(S,T)}function bU(f,l,p,m,_){if(!qf(l,f.length)||!qf(m,p.length))return 1/0;let S=1/0;for(let T=l[0];T<l[1];++T){let C=f[T],N=f[T+1];for(let j=m[0];j<m[1];++j){let F=p[j],V=p[j+1];if(Xb(C,N,F,V))return 0;S=Math.min(S,wT(C,N,F,V,_))}}return S}function xU(f,l,p,m,_){if(!qf(l,f.length)||!qf(m,p.length))return NaN;let S=1/0;for(let T=l[0];T<=l[1];++T)for(let C=m[0];C<=m[1];++C)if(S=Math.min(S,_.distance(f[T],p[C])),S===0)return S;return S}function wU(f,l,p){if(Cm(f,l,!0))return 0;let m=1/0;for(let _ of l){let S=_[0],T=_[_.length-1];if(S!==T&&(m=Math.min(m,Am(f,[T,S],p)),m===0))return m;let C=p.pointOnLine(_,f);if(m=Math.min(m,p.distance(f,C.point)),m===0)return m}return m}function EU(f,l,p,m){if(!qf(l,f.length))return NaN;for(let S=l[0];S<=l[1];++S)if(Cm(f[S],p,!0))return 0;let _=1/0;for(let S=l[0];S<l[1];++S){let T=f[S],C=f[S+1];for(let N of p)for(let j=0,F=N.length,V=F-1;j<F;V=j++){let $=N[V],X=N[j];if(Xb(T,C,$,X))return 0;_=Math.min(_,wT(T,C,$,X,m))}}return _}function _N(f,l){for(let p of f)for(let m of p)if(Cm(m,l,!0))return!0;return!1}function SU(f,l,p,m=1/0){let _=bT(f),S=bT(l);if(m!==1/0&&xT(_,S,p)>=m)return m;if(X0(_,S)){if(_N(f,l))return 0}else if(_N(l,f))return 0;let T=1/0;for(let C of f)for(let N=0,j=C.length,F=j-1;N<j;F=N++){let V=C[F],$=C[N];for(let X of l)for(let ee=0,se=X.length,he=se-1;ee<se;he=ee++){let Ee=X[he],Ve=X[ee];if(Xb(V,$,Ee,Ve))return 0;T=Math.min(T,wT(V,$,Ee,Ve,p))}}return T}function bN(f,l,p,m,_,S){if(!S)return;let T=xT(_T(m,S),_,p);T<l&&f.push([T,S,[0,0]])}function Jb(f,l,p,m,_,S,T){if(!S||!T)return;let C=xT(_T(m,S),_T(_,T),p);C<l&&f.push([C,S,T])}function ex(f,l,p,m,_=1/0){let S=Math.min(m.distance(f[0],p[0][0]),_);if(S===0)return S;let T=new fN([[0,[0,f.length-1],[0,0]]],vN),C=bT(p);for(;T.length>0;){let N=T.pop();if(N[0]>=S)continue;let j=N[1],F=l?50:100;if(mo(j)<=F){if(!qf(j,f.length))return NaN;if(l){let V=EU(f,j,p,m);if(isNaN(V)||V===0)return V;S=Math.min(S,V)}else for(let V=j[0];V<=j[1];++V){let $=wU(f[V],p,m);if(S=Math.min(S,$),S===0)return 0}}else{let V=yT(j,l);bN(T,S,m,f,C,V[0]),bN(T,S,m,f,C,V[1])}}return S}function tx(f,l,p,m,_,S=1/0){let T=Math.min(S,_.distance(f[0],p[0]));if(T===0)return T;let C=new fN([[0,[0,f.length-1],[0,p.length-1]]],vN);for(;C.length>0;){let N=C.pop();if(N[0]>=T)continue;let j=N[1],F=N[2],V=l?50:100,$=m?50:100;if(mo(j)<=V&&mo(F)<=$){if(!qf(j,f.length)&&qf(F,p.length))return NaN;let X;if(l&&m)X=bU(f,j,p,F,_),T=Math.min(T,X);else if(l&&!m){let ee=f.slice(j[0],j[1]+1);for(let se=F[0];se<=F[1];++se)if(X=Am(p[se],ee,_),T=Math.min(T,X),T===0)return T}else if(!l&&m){let ee=p.slice(F[0],F[1]+1);for(let se=j[0];se<=j[1];++se)if(X=Am(f[se],ee,_),T=Math.min(T,X),T===0)return T}else X=xU(f,j,p,F,_),T=Math.min(T,X)}else{let X=yT(j,l),ee=yT(F,m);Jb(C,T,_,f,p,X[0],ee[0]),Jb(C,T,_,f,p,X[0],ee[1]),Jb(C,T,_,f,p,X[1],ee[0]),Jb(C,T,_,f,p,X[1],ee[1])}}return T}function ET(f){return f.type==="MultiPolygon"?f.coordinates.map(l=>({type:"Polygon",coordinates:l})):f.type==="MultiLineString"?f.coordinates.map(l=>({type:"LineString",coordinates:l})):f.type==="MultiPoint"?f.coordinates.map(l=>({type:"Point",coordinates:l})):[f]}class Om{constructor(l,p){this.type=mt,this.geojson=l,this.geometries=p}static parse(l,p){if(l.length!==2)return p.error(`'distance' expression requires exactly one argument, but found ${l.length-1} instead.`);if(Ko(l[1])){let m=l[1];if(m.type==="FeatureCollection")return new Om(m,m.features.map(_=>ET(_.geometry)).flat());if(m.type==="Feature")return new Om(m,ET(m.geometry));if("type"in m&&"coordinates"in m)return new Om(m,ET(m))}return p.error("'distance' expression requires valid geojson object that contains polygon geometry type.")}evaluate(l){if(l.geometry()!=null&&l.canonicalID()!=null){if(l.geometryType()==="Point")return function(p,m){let _=p.geometry(),S=_.flat().map(N=>hT([N.x,N.y],p.canonical));if(_.length===0)return NaN;let T=new vT(S[0][1]),C=1/0;for(let N of m){switch(N.type){case"Point":C=Math.min(C,tx(S,!1,[N.coordinates],!1,T,C));break;case"LineString":C=Math.min(C,tx(S,!1,N.coordinates,!0,T,C));break;case"Polygon":C=Math.min(C,ex(S,!1,N.coordinates,T,C))}if(C===0)return C}return C}(l,this.geometries);if(l.geometryType()==="LineString")return function(p,m){let _=p.geometry(),S=_.flat().map(N=>hT([N.x,N.y],p.canonical));if(_.length===0)return NaN;let T=new vT(S[0][1]),C=1/0;for(let N of m){switch(N.type){case"Point":C=Math.min(C,tx(S,!0,[N.coordinates],!1,T,C));break;case"LineString":C=Math.min(C,tx(S,!0,N.coordinates,!0,T,C));break;case"Polygon":C=Math.min(C,ex(S,!0,N.coordinates,T,C))}if(C===0)return C}return C}(l,this.geometries);if(l.geometryType()==="Polygon")return function(p,m){let _=p.geometry();if(_.length===0||_[0].length===0)return NaN;let S=Qb(_,0).map(N=>N.map(j=>j.map(F=>hT([F.x,F.y],p.canonical)))),T=new vT(S[0][0][0][1]),C=1/0;for(let N of m)for(let j of S){switch(N.type){case"Point":C=Math.min(C,ex([N.coordinates],!1,j,T,C));break;case"LineString":C=Math.min(C,ex(N.coordinates,!0,j,T,C));break;case"Polygon":C=Math.min(C,SU(j,N.coordinates,T,C))}if(C===0)return C}return C}(l,this.geometries)}return NaN}eachChild(){}outputDefined(){return!0}}class rx{constructor(l){this.type=lr,this.key=l}static parse(l,p){if(l.length!==2)return p.error(`Expected 1 argument, but found ${l.length-1} instead.`);let m=l[1];return m==null?p.error("Global state property must be defined."):typeof m!="string"?p.error(`Global state property must be string, but found ${typeof l[1]} instead.`):new rx(m)}evaluate(l){var p;let m=(p=l.globals)===null||p===void 0?void 0:p.globalState;return m&&Object.keys(m).length!==0?ho(m,this.key):null}eachChild(){}outputDefined(){return!1}}let av={"==":Wb,"!=":fU,">":dU,"<":dT,">=":mU,"<=":hU,array:An,at:fT,boolean:An,case:rs,coalesce:Im,collator:$b,format:Zb,image:Yb,in:Vb,"index-of":W0,interpolate:js,"interpolate-hcl":js,"interpolate-lab":js,length:Kb,let:nv,literal:vn,match:Sm,number:An,"number-format":ov,object:An,slice:Tm,step:Zd,string:An,"to-boolean":Rs,"to-color":Rs,"to-number":Rs,"to-string":Rs,var:H0,within:Yd,distance:Om,"global-state":rx};class rc{constructor(l,p,m,_){this.name=l,this.type=p,this._evaluate=m,this.args=_}evaluate(l){return this._evaluate(l,this.args)}eachChild(l){this.args.forEach(l)}outputDefined(){return!1}static parse(l,p){let m=l[0],_=rc.definitions[m];if(!_)return p.error(`Unknown expression "${m}". If you wanted a literal array, use ["literal", [...]].`,0);let S=Array.isArray(_)?_[0]:_.type,T=Array.isArray(_)?[[_[1],_[2]]]:_.overloads,C=T.filter(([j])=>!Array.isArray(j)||j.length===l.length-1),N=null;for(let[j,F]of C){N=new G0(p.registry,nx,p.path,null,p.scope);let V=[],$=!1;for(let X=1;X<l.length;X++){let ee=l[X],se=Array.isArray(j)?j[X-1]:j.type,he=N.parse(ee,1+V.length,se);if(!he){$=!0;break}V.push(he)}if(!$)if(Array.isArray(j)&&j.length!==V.length)N.error(`Expected ${j.length} arguments, but found ${V.length} instead.`);else{for(let X=0;X<V.length;X++){let ee=Array.isArray(j)?j[X]:j.type,se=V[X];N.concat(X+1).checkSubtype(ee,se.type)}if(N.errors.length===0)return new rc(m,S,F,V)}}if(C.length===1)p.errors.push(...N.errors);else{let j=(C.length?C:T).map(([V])=>{return $=V,Array.isArray($)?`(${$.map(Zr).join(", ")})`:`(${Zr($.type)}...)`;var $}).join(" | "),F=[];for(let V=1;V<l.length;V++){let $=p.parse(l[V],1+F.length);if(!$)return null;F.push(Zr($.type))}p.error(`Expected arguments of type ${j}, but found (${F.join(", ")}) instead.`)}return null}static register(l,p){rc.definitions=p;for(let m in p)l[m]=rc}}function xN(f,[l,p,m,_]){l=l.evaluate(f),p=p.evaluate(f),m=m.evaluate(f);let S=_?_.evaluate(f):1,T=V0(l,p,m,S);if(T)throw new zo(T);return new mn(l/255,p/255,m/255,S,!1)}function wN(f,l){return f in l}function ST(f,l){let p=l[f];return p===void 0?null:p}function Pm(f){return{type:f}}function nx(f){if(f instanceof H0)return nx(f.boundExpression);if(f instanceof rc&&f.name==="error"||f instanceof $b||f instanceof Yd||f instanceof Om||f instanceof rx)return!1;let l=f instanceof Rs||f instanceof An,p=!0;return f.eachChild(m=>{p=l?p&&nx(m):p&&m instanceof vn}),!!p&&ox(f)&&ix(f,["zoom","heatmap-density","line-progress","accumulated","is-supported-script"])}function ox(f){if(f instanceof rc&&(f.name==="get"&&f.args.length===1||f.name==="feature-state"||f.name==="has"&&f.args.length===1||f.name==="properties"||f.name==="geometry-type"||f.name==="id"||/^filter-/.test(f.name))||f instanceof Yd||f instanceof Om)return!1;let l=!0;return f.eachChild(p=>{l&&!ox(p)&&(l=!1)}),l}function J0(f){if(f instanceof rc&&f.name==="feature-state")return!1;let l=!0;return f.eachChild(p=>{l&&!J0(p)&&(l=!1)}),l}function ix(f,l){if(f instanceof rc&&l.indexOf(f.name)>=0)return!1;let p=!0;return f.eachChild(m=>{p&&!ix(m,l)&&(p=!1)}),p}function ax(f){return{result:"success",value:f}}function sv(f){return{result:"error",value:f}}function lv(f){return f["property-type"]==="data-driven"||f["property-type"]==="cross-faded-data-driven"}function EN(f){return!!f.expression&&f.expression.parameters.indexOf("zoom")>-1}function sx(f){return!!f.expression&&f.expression.interpolated}function Wn(f){return f instanceof Number?"number":f instanceof String?"string":f instanceof Boolean?"boolean":Array.isArray(f)?"array":f===null?"null":typeof f}function lx(f){return typeof f=="object"&&f!==null&&!Array.isArray(f)&&Yi(f)===Yr}function ux(f){return f}function TT(f,l){let p=f.stops&&typeof f.stops[0][0]=="object",m=p||!(p||f.property!==void 0),_=f.type||(sx(l)?"exponential":"interval"),S=function(F){switch(F.type){case"color":return mn.parse;case"padding":return Zi.parse;case"numberArray":return ma.parse;case"colorArray":return Mi.parse;default:return null}}(l);if(S&&((f=Tn({},f)).stops&&(f.stops=f.stops.map(F=>[F[0],S(F[1])])),f.default=S(f.default?f.default:l.default)),f.colorSpace&&(T=f.colorSpace)!=="rgb"&&T!=="hcl"&&T!=="lab")throw new Error(`Unknown color space: "${f.colorSpace}"`);var T;let C=function(F){switch(F){case"exponential":return SN;case"interval":return IU;case"categorical":return TU;case"identity":return MU;default:throw new Error(`Unknown function type "${F}"`)}}(_),N,j;if(_==="categorical"){N=Object.create(null);for(let F of f.stops)N[F[0]]=F[1];j=typeof f.stops[0][0]}if(p){let F={},V=[];for(let ee=0;ee<f.stops.length;ee++){let se=f.stops[ee],he=se[0].zoom;F[he]===void 0&&(F[he]={zoom:he,type:f.type,property:f.property,default:f.default,stops:[]},V.push(he)),F[he].stops.push([se[0].value,se[1]])}let $=[];for(let ee of V)$.push([F[ee].zoom,TT(F[ee],l)]);let X={name:"linear"};return{kind:"composite",interpolationType:X,interpolationFactor:js.interpolationFactor.bind(void 0,X),zoomStops:$.map(ee=>ee[0]),evaluate:({zoom:ee},se)=>SN({stops:$,base:f.base},l,ee).evaluate(ee,se)}}if(m){let F=_==="exponential"?{name:"exponential",base:f.base!==void 0?f.base:1}:null;return{kind:"camera",interpolationType:F,interpolationFactor:js.interpolationFactor.bind(void 0,F),zoomStops:f.stops.map(V=>V[0]),evaluate:({zoom:V})=>C(f,l,V,N,j)}}return{kind:"source",evaluate(F,V){let $=V&&V.properties?V.properties[f.property]:void 0;return $===void 0?e1(f.default,l.default):C(f,l,$,N,j)}}}function e1(f,l,p){return f!==void 0?f:l!==void 0?l:p!==void 0?p:void 0}function TU(f,l,p,m,_){return e1(typeof p===_?m[p]:void 0,f.default,l.default)}function IU(f,l,p){if(Wn(p)!=="number")return e1(f.default,l.default);let m=f.stops.length;if(m===1||p<=f.stops[0][0])return f.stops[0][1];if(p>=f.stops[m-1][0])return f.stops[m-1][1];let _=$0(f.stops.map(S=>S[0]),p);return f.stops[_][1]}function SN(f,l,p){let m=f.base!==void 0?f.base:1;if(Wn(p)!=="number")return e1(f.default,l.default);let _=f.stops.length;if(_===1||p<=f.stops[0][0])return f.stops[0][1];if(p>=f.stops[_-1][0])return f.stops[_-1][1];let S=$0(f.stops.map(F=>F[0]),p),T=function(F,V,$,X){let ee=X-$,se=F-$;return ee===0?0:V===1?se/ee:(Math.pow(V,se)-1)/(Math.pow(V,ee)-1)}(p,m,f.stops[S][0],f.stops[S+1][0]),C=f.stops[S][1],N=f.stops[S+1][1],j=wp[l.type]||ux;return typeof C.evaluate=="function"?{evaluate(...F){let V=C.evaluate.apply(void 0,F),$=N.evaluate.apply(void 0,F);if(V!==void 0&&$!==void 0)return j(V,$,T,f.colorSpace)}}:j(C,N,T,f.colorSpace)}function MU(f,l,p){switch(l.type){case"color":p=mn.parse(p);break;case"formatted":p=ja.fromString(p.toString());break;case"resolvedImage":p=wu.fromString(p.toString());break;case"padding":p=Zi.parse(p);break;case"colorArray":p=Mi.parse(p);break;case"numberArray":p=ma.parse(p);break;default:Wn(p)===l.type||l.type==="enum"&&l.values[p]||(p=void 0)}return e1(p,f.default,l.default)}rc.register(av,{error:[{kind:"error"},[fr],(f,[l])=>{throw new zo(l.evaluate(f))}],typeof:[fr,[lr],(f,[l])=>Zr(Yi(l.evaluate(f)))],"to-rgba":[Kr(mt,4),[Vr],(f,[l])=>{let[p,m,_,S]=l.evaluate(f).rgb;return[255*p,255*m,255*_,S]}],rgb:[Vr,[mt,mt,mt],xN],rgba:[Vr,[mt,mt,mt,mt],xN],has:{type:wr,overloads:[[[fr],(f,[l])=>wN(l.evaluate(f),f.properties())],[[fr,Yr],(f,[l,p])=>wN(l.evaluate(f),p.evaluate(f))]]},get:{type:lr,overloads:[[[fr],(f,[l])=>ST(l.evaluate(f),f.properties())],[[fr,Yr],(f,[l,p])=>ST(l.evaluate(f),p.evaluate(f))]]},"feature-state":[lr,[fr],(f,[l])=>ST(l.evaluate(f),f.featureState||{})],properties:[Yr,[],f=>f.properties()],"geometry-type":[fr,[],f=>f.geometryType()],id:[lr,[],f=>f.id()],zoom:[mt,[],f=>f.globals.zoom],"heatmap-density":[mt,[],f=>f.globals.heatmapDensity||0],"line-progress":[mt,[],f=>f.globals.lineProgress||0],accumulated:[lr,[],f=>f.globals.accumulated===void 0?null:f.globals.accumulated],"+":[mt,Pm(mt),(f,l)=>{let p=0;for(let m of l)p+=m.evaluate(f);return p}],"*":[mt,Pm(mt),(f,l)=>{let p=1;for(let m of l)p*=m.evaluate(f);return p}],"-":{type:mt,overloads:[[[mt,mt],(f,[l,p])=>l.evaluate(f)-p.evaluate(f)],[[mt],(f,[l])=>-l.evaluate(f)]]},"/":[mt,[mt,mt],(f,[l,p])=>l.evaluate(f)/p.evaluate(f)],"%":[mt,[mt,mt],(f,[l,p])=>l.evaluate(f)%p.evaluate(f)],ln2:[mt,[],()=>Math.LN2],pi:[mt,[],()=>Math.PI],e:[mt,[],()=>Math.E],"^":[mt,[mt,mt],(f,[l,p])=>Math.pow(l.evaluate(f),p.evaluate(f))],sqrt:[mt,[mt],(f,[l])=>Math.sqrt(l.evaluate(f))],log10:[mt,[mt],(f,[l])=>Math.log(l.evaluate(f))/Math.LN10],ln:[mt,[mt],(f,[l])=>Math.log(l.evaluate(f))],log2:[mt,[mt],(f,[l])=>Math.log(l.evaluate(f))/Math.LN2],sin:[mt,[mt],(f,[l])=>Math.sin(l.evaluate(f))],cos:[mt,[mt],(f,[l])=>Math.cos(l.evaluate(f))],tan:[mt,[mt],(f,[l])=>Math.tan(l.evaluate(f))],asin:[mt,[mt],(f,[l])=>Math.asin(l.evaluate(f))],acos:[mt,[mt],(f,[l])=>Math.acos(l.evaluate(f))],atan:[mt,[mt],(f,[l])=>Math.atan(l.evaluate(f))],min:[mt,Pm(mt),(f,l)=>Math.min(...l.map(p=>p.evaluate(f)))],max:[mt,Pm(mt),(f,l)=>Math.max(...l.map(p=>p.evaluate(f)))],abs:[mt,[mt],(f,[l])=>Math.abs(l.evaluate(f))],round:[mt,[mt],(f,[l])=>{let p=l.evaluate(f);return p<0?-Math.round(-p):Math.round(p)}],floor:[mt,[mt],(f,[l])=>Math.floor(l.evaluate(f))],ceil:[mt,[mt],(f,[l])=>Math.ceil(l.evaluate(f))],"filter-==":[wr,[fr,lr],(f,[l,p])=>f.properties()[l.value]===p.value],"filter-id-==":[wr,[lr],(f,[l])=>f.id()===l.value],"filter-type-==":[wr,[fr],(f,[l])=>f.geometryType()===l.value],"filter-<":[wr,[fr,lr],(f,[l,p])=>{let m=f.properties()[l.value],_=p.value;return typeof m==typeof _&&m<_}],"filter-id-<":[wr,[lr],(f,[l])=>{let p=f.id(),m=l.value;return typeof p==typeof m&&p<m}],"filter->":[wr,[fr,lr],(f,[l,p])=>{let m=f.properties()[l.value],_=p.value;return typeof m==typeof _&&m>_}],"filter-id->":[wr,[lr],(f,[l])=>{let p=f.id(),m=l.value;return typeof p==typeof m&&p>m}],"filter-<=":[wr,[fr,lr],(f,[l,p])=>{let m=f.properties()[l.value],_=p.value;return typeof m==typeof _&&m<=_}],"filter-id-<=":[wr,[lr],(f,[l])=>{let p=f.id(),m=l.value;return typeof p==typeof m&&p<=m}],"filter->=":[wr,[fr,lr],(f,[l,p])=>{let m=f.properties()[l.value],_=p.value;return typeof m==typeof _&&m>=_}],"filter-id->=":[wr,[lr],(f,[l])=>{let p=f.id(),m=l.value;return typeof p==typeof m&&p>=m}],"filter-has":[wr,[lr],(f,[l])=>l.value in f.properties()],"filter-has-id":[wr,[],f=>f.id()!==null&&f.id()!==void 0],"filter-type-in":[wr,[Kr(fr)],(f,[l])=>l.value.indexOf(f.geometryType())>=0],"filter-id-in":[wr,[Kr(lr)],(f,[l])=>l.value.indexOf(f.id())>=0],"filter-in-small":[wr,[fr,Kr(lr)],(f,[l,p])=>p.value.indexOf(f.properties()[l.value])>=0],"filter-in-large":[wr,[fr,Kr(lr)],(f,[l,p])=>function(m,_,S,T){for(;S<=T;){let C=S+T>>1;if(_[C]===m)return!0;_[C]>m?T=C-1:S=C+1}return!1}(f.properties()[l.value],p.value,0,p.value.length-1)],all:{type:wr,overloads:[[[wr,wr],(f,[l,p])=>l.evaluate(f)&&p.evaluate(f)],[Pm(wr),(f,l)=>{for(let p of l)if(!p.evaluate(f))return!1;return!0}]]},any:{type:wr,overloads:[[[wr,wr],(f,[l,p])=>l.evaluate(f)||p.evaluate(f)],[Pm(wr),(f,l)=>{for(let p of l)if(p.evaluate(f))return!0;return!1}]]},"!":[wr,[wr],(f,[l])=>!l.evaluate(f)],"is-supported-script":[wr,[fr],(f,[l])=>{let p=f.globals&&f.globals.isSupportedScript;return!p||p(l.evaluate(f))}],upcase:[fr,[fr],(f,[l])=>l.evaluate(f).toUpperCase()],downcase:[fr,[fr],(f,[l])=>l.evaluate(f).toLowerCase()],concat:[fr,Pm(lr),(f,l)=>l.map(p=>to(p.evaluate(f))).join("")],"resolved-locale":[fr,[In],(f,[l])=>l.evaluate(f).resolvedLocale()]});class cx{constructor(l,p){this.expression=l,this._warningHistory={},this._evaluator=new pT,this._defaultValue=p?function(m){if(m.type==="color"&&lx(m.default))return new mn(0,0,0,0);switch(m.type){case"color":return mn.parse(m.default)||null;case"padding":return Zi.parse(m.default)||null;case"numberArray":return ma.parse(m.default)||null;case"colorArray":return Mi.parse(m.default)||null;case"variableAnchorOffsetCollection":return bs.parse(m.default)||null;case"projectionDefinition":return xs.parse(m.default)||null;default:return m.default===void 0?null:m.default}}(p):null,this._enumValues=p&&p.type==="enum"?p.values:null}evaluateWithoutErrorHandling(l,p,m,_,S,T){return this._evaluator.globals=l,this._evaluator.feature=p,this._evaluator.featureState=m,this._evaluator.canonical=_,this._evaluator.availableImages=S||null,this._evaluator.formattedSection=T,this.expression.evaluate(this._evaluator)}evaluate(l,p,m,_,S,T){this._evaluator.globals=l,this._evaluator.feature=p||null,this._evaluator.featureState=m||null,this._evaluator.canonical=_,this._evaluator.availableImages=S||null,this._evaluator.formattedSection=T||null;try{let C=this.expression.evaluate(this._evaluator);if(C==null||typeof C=="number"&&C!=C)return this._defaultValue;if(this._enumValues&&!(C in this._enumValues))throw new zo(`Expected value to be one of ${Object.keys(this._enumValues).map(N=>JSON.stringify(N)).join(", ")}, but found ${JSON.stringify(C)} instead.`);return C}catch(C){return this._warningHistory[C.message]||(this._warningHistory[C.message]=!0,typeof console!="undefined"&&console.warn(C.message)),this._defaultValue}}}function t1(f){return Array.isArray(f)&&f.length>0&&typeof f[0]=="string"&&f[0]in av}function px(f,l){let p=new G0(av,nx,[],l?function(_){let S={color:Vr,string:fr,number:mt,enum:fr,boolean:wr,formatted:sn,padding:_n,numberArray:ln,colorArray:tn,projectionDefinition:en,resolvedImage:Rr,variableAnchorOffsetCollection:Ur};return _.type==="array"?Kr(S[_.value]||lr,_.length):S[_.type]}(l):void 0),m=p.parse(f,void 0,void 0,void 0,l&&l.type==="string"?{typeAnnotation:"coerce"}:void 0);return m?ax(new cx(m,l)):sv(p.errors)}class IT{constructor(l,p){this.kind=l,this._styleExpression=p,this.isStateDependent=l!=="constant"&&!J0(p.expression)}evaluateWithoutErrorHandling(l,p,m,_,S,T){return this._styleExpression.evaluateWithoutErrorHandling(l,p,m,_,S,T)}evaluate(l,p,m,_,S,T){return this._styleExpression.evaluate(l,p,m,_,S,T)}}class fx{constructor(l,p,m,_){this.kind=l,this.zoomStops=m,this._styleExpression=p,this.isStateDependent=l!=="camera"&&!J0(p.expression),this.interpolationType=_}evaluateWithoutErrorHandling(l,p,m,_,S,T){return this._styleExpression.evaluateWithoutErrorHandling(l,p,m,_,S,T)}evaluate(l,p,m,_,S,T){return this._styleExpression.evaluate(l,p,m,_,S,T)}interpolationFactor(l,p,m){return this.interpolationType?js.interpolationFactor(this.interpolationType,l,p,m):0}}function MT(f,l){let p=px(f,l);if(p.result==="error")return p;let m=p.value.expression,_=ox(m);if(!_&&!lv(l))return sv([new rn("","data expressions not supported")]);let S=ix(m,["zoom"]);if(!S&&!EN(l))return sv([new rn("","zoom expressions not supported")]);let T=n1(m);return T||S?T instanceof rn?sv([T]):T instanceof js&&!sx(l)?sv([new rn("","\"interpolate\" expressions cannot be used with this property")]):ax(T?new fx(_?"camera":"composite",p.value,T.labels,T instanceof js?T.interpolation:void 0):new IT(_?"constant":"source",p.value)):sv([new rn("","\"zoom\" expression may only be used as input to a top-level \"step\" or \"interpolate\" expression.")])}class r1{constructor(l,p){this._parameters=l,this._specification=p,Tn(this,TT(this._parameters,this._specification))}static deserialize(l){return new r1(l._parameters,l._specification)}static serialize(l){return{_parameters:l._parameters,_specification:l._specification}}}function n1(f){let l=null;if(f instanceof nv)l=n1(f.result);else if(f instanceof Im){for(let p of f.args)if(l=n1(p),l)break}else(f instanceof Zd||f instanceof js)&&f.input instanceof rc&&f.input.name==="zoom"&&(l=f);return l instanceof rn||f.eachChild(p=>{let m=n1(p);m instanceof rn?l=m:!l&&m?l=new rn("","\"zoom\" expression may only be used as input to a top-level \"step\" or \"interpolate\" expression."):l&&m&&l!==m&&(l=new rn("","Only one zoom-based \"step\" or \"interpolate\" subexpression may be used in an expression."))}),l}function o1(f){if(f===!0||f===!1)return!0;if(!Array.isArray(f)||f.length===0)return!1;switch(f[0]){case"has":return f.length>=2&&f[1]!=="$id"&&f[1]!=="$type";case"in":return f.length>=3&&(typeof f[1]!="string"||Array.isArray(f[2]));case"!in":case"!has":case"none":return!1;case"==":case"!=":case">":case">=":case"<":case"<=":return f.length!==3||Array.isArray(f[1])||Array.isArray(f[2]);case"any":case"all":for(let l of f.slice(1))if(!o1(l)&&typeof l!="boolean")return!1;return!0;default:return!0}}let CT={type:"boolean",default:!1,transition:!1,"property-type":"data-driven",expression:{interpolated:!1,parameters:["zoom","feature"]}};function i1(f){if(f==null)return{filter:()=>!0,needGeometry:!1};o1(f)||(f=hx(f));let l=px(f,CT);if(l.result==="error")throw new Error(l.value.map(p=>`${p.key}: ${p.message}`).join(", "));return{filter:(p,m,_)=>l.value.evaluate(p,m,{},_),needGeometry:TN(f)}}function dx(f,l){return f<l?-1:f>l?1:0}function TN(f){if(!Array.isArray(f))return!1;if(f[0]==="within"||f[0]==="distance")return!0;for(let l=1;l<f.length;l++)if(TN(f[l]))return!0;return!1}function hx(f){if(!f)return!0;let l=f[0];return f.length<=1?l!=="any":l==="=="?AT(f[1],f[2],"=="):l==="!="?mx(AT(f[1],f[2],"==")):l==="<"||l===">"||l==="<="||l===">="?AT(f[1],f[2],l):l==="any"?(p=f.slice(1),["any"].concat(p.map(hx))):l==="all"?["all"].concat(f.slice(1).map(hx)):l==="none"?["all"].concat(f.slice(1).map(hx).map(mx)):l==="in"?IN(f[1],f.slice(2)):l==="!in"?mx(IN(f[1],f.slice(2))):l==="has"?MN(f[1]):l!=="!has"||mx(MN(f[1]));var p}function AT(f,l,p){switch(f){case"$type":return[`filter-type-${p}`,l];case"$id":return[`filter-id-${p}`,l];default:return[`filter-${p}`,f,l]}}function IN(f,l){if(l.length===0)return!1;switch(f){case"$type":return["filter-type-in",["literal",l]];case"$id":return["filter-id-in",["literal",l]];default:return l.length>200&&!l.some(p=>typeof p!=typeof l[0])?["filter-in-large",f,["literal",l.sort(dx)]]:["filter-in-small",f,["literal",l]]}}function MN(f){switch(f){case"$type":return!0;case"$id":return["filter-has-id"];default:return["filter-has",f]}}function mx(f){return["!",f]}function gx(f){let l=typeof f;if(l==="number"||l==="boolean"||l==="string"||f==null)return JSON.stringify(f);if(Array.isArray(f)){let _="[";for(let S of f)_+=`${gx(S)},`;return`${_}]`}let p=Object.keys(f).sort(),m="{";for(let _=0;_<p.length;_++)m+=`${JSON.stringify(p[_])}:${gx(f[p[_]])},`;return`${m}}`}function CN(f){let l="";for(let p of je)l+=`/${gx(f[p])}`;return l}function a1(f){let l=f.value;return l?[new Ke(f.key,l,"constants have been deprecated as of v8")]:[]}function aa(f){return f instanceof Number||f instanceof String||f instanceof Boolean?f.valueOf():f}function Kd(f){if(Array.isArray(f))return f.map(Kd);if(f instanceof Object&&!(f instanceof Number||f instanceof String||f instanceof Boolean)){let l={};for(let p in f)l[p]=Kd(f[p]);return l}return aa(f)}function Eu(f){let l=f.key,p=f.value,m=f.valueSpec||{},_=f.objectElementValidators||{},S=f.style,T=f.styleSpec,C=f.validateSpec,N=[],j=Wn(p);if(j!=="object")return[new Ke(l,p,`object expected, ${j} found`)];for(let F in p){let V=F.split(".")[0],$=ho(m,V)||m["*"],X;if(ho(_,V))X=_[V];else if(ho(m,V))X=C;else if(_["*"])X=_["*"];else{if(!m["*"]){N.push(new Ke(l,p[F],`unknown property "${F}"`));continue}X=C}N=N.concat(X({key:(l&&`${l}.`)+F,value:p[F],valueSpec:$,style:S,styleSpec:T,object:p,objectKey:F,validateSpec:C},p))}for(let F in m)_[F]||m[F].required&&m[F].default===void 0&&p[F]===void 0&&N.push(new Ke(l,p,`missing required property "${F}"`));return N}function OT(f){let l=f.value,p=f.valueSpec,m=f.style,_=f.styleSpec,S=f.key,T=f.arrayElementValidator||f.validateSpec;if(Wn(l)!=="array")return[new Ke(S,l,`array expected, ${Wn(l)} found`)];if(p.length&&l.length!==p.length)return[new Ke(S,l,`array length ${p.length} expected, length ${l.length} found`)];if(p["min-length"]&&l.length<p["min-length"])return[new Ke(S,l,`array length at least ${p["min-length"]} expected, length ${l.length} found`)];let C={type:p.value,values:p.values};_.$version<7&&(C.function=p.function),Wn(p.value)==="object"&&(C=p.value);let N=[];for(let j=0;j<l.length;j++)N=N.concat(T({array:l,arrayIndex:j,value:l[j],valueSpec:C,validateSpec:f.validateSpec,style:m,styleSpec:_,key:`${S}[${j}]`}));return N}function s1(f){let l=f.key,p=f.value,m=f.valueSpec,_=Wn(p);return _==="number"&&p!=p&&(_="NaN"),_!=="number"?[new Ke(l,p,`number expected, ${_} found`)]:"minimum"in m&&p<m.minimum?[new Ke(l,p,`${p} is less than the minimum value ${m.minimum}`)]:"maximum"in m&&p>m.maximum?[new Ke(l,p,`${p} is greater than the maximum value ${m.maximum}`)]:[]}function PT(f){let l=f.valueSpec,p=aa(f.value.type),m,_,S,T={},C=p!=="categorical"&&f.value.property===void 0,N=!C,j=Wn(f.value.stops)==="array"&&Wn(f.value.stops[0])==="array"&&Wn(f.value.stops[0][0])==="object",F=Eu({key:f.key,value:f.value,valueSpec:f.styleSpec.function,validateSpec:f.validateSpec,style:f.style,styleSpec:f.styleSpec,objectElementValidators:{stops:function(X){if(p==="identity")return[new Ke(X.key,X.value,"identity function may not have a \"stops\" property")];let ee=[],se=X.value;return ee=ee.concat(OT({key:X.key,value:se,valueSpec:X.valueSpec,validateSpec:X.validateSpec,style:X.style,styleSpec:X.styleSpec,arrayElementValidator:V})),Wn(se)==="array"&&se.length===0&&ee.push(new Ke(X.key,se,"array must have at least one stop")),ee},default:function(X){return X.validateSpec({key:X.key,value:X.value,valueSpec:l,validateSpec:X.validateSpec,style:X.style,styleSpec:X.styleSpec})}}});return p==="identity"&&C&&F.push(new Ke(f.key,f.value,"missing required property \"property\"")),p==="identity"||f.value.stops||F.push(new Ke(f.key,f.value,"missing required property \"stops\"")),p==="exponential"&&f.valueSpec.expression&&!sx(f.valueSpec)&&F.push(new Ke(f.key,f.value,"exponential functions not supported")),f.styleSpec.$version>=8&&(N&&!lv(f.valueSpec)?F.push(new Ke(f.key,f.value,"property functions not supported")):C&&!EN(f.valueSpec)&&F.push(new Ke(f.key,f.value,"zoom functions not supported"))),p!=="categorical"&&!j||f.value.property!==void 0||F.push(new Ke(f.key,f.value,"\"property\" property is required")),F;function V(X){let ee=[],se=X.value,he=X.key;if(Wn(se)!=="array")return[new Ke(he,se,`array expected, ${Wn(se)} found`)];if(se.length!==2)return[new Ke(he,se,`array length 2 expected, length ${se.length} found`)];if(j){if(Wn(se[0])!=="object")return[new Ke(he,se,`object expected, ${Wn(se[0])} found`)];if(se[0].zoom===void 0)return[new Ke(he,se,"object stop key must have zoom")];if(se[0].value===void 0)return[new Ke(he,se,"object stop key must have value")];if(S&&S>aa(se[0].zoom))return[new Ke(he,se[0].zoom,"stop zoom values must appear in ascending order")];aa(se[0].zoom)!==S&&(S=aa(se[0].zoom),_=void 0,T={}),ee=ee.concat(Eu({key:`${he}[0]`,value:se[0],valueSpec:{zoom:{}},validateSpec:X.validateSpec,style:X.style,styleSpec:X.styleSpec,objectElementValidators:{zoom:s1,value:$}}))}else ee=ee.concat($({key:`${he}[0]`,value:se[0],validateSpec:X.validateSpec,style:X.style,styleSpec:X.styleSpec},se));return t1(Kd(se[1]))?ee.concat([new Ke(`${he}[1]`,se[1],"expressions are not allowed in function stops.")]):ee.concat(X.validateSpec({key:`${he}[1]`,value:se[1],valueSpec:l,validateSpec:X.validateSpec,style:X.style,styleSpec:X.styleSpec}))}function $(X,ee){let se=Wn(X.value),he=aa(X.value),Ee=X.value!==null?X.value:ee;if(m){if(se!==m)return[new Ke(X.key,Ee,`${se} stop domain type must match previous stop domain type ${m}`)]}else m=se;if(se!=="number"&&se!=="string"&&se!=="boolean")return[new Ke(X.key,Ee,"stop domain value must be a number, string, or boolean")];if(se!=="number"&&p!=="categorical"){let Ve=`number expected, ${se} found`;return lv(l)&&p===void 0&&(Ve+="\nIf you intended to use a categorical function, specify `\"type\": \"categorical\"`."),[new Ke(X.key,Ee,Ve)]}return p!=="categorical"||se!=="number"||isFinite(he)&&Math.floor(he)===he?p!=="categorical"&&se==="number"&&_!==void 0&&he<_?[new Ke(X.key,Ee,"stop domain values must appear in ascending order")]:(_=he,p==="categorical"&&he in T?[new Ke(X.key,Ee,"stop domain values must be unique")]:(T[he]=!0,[])):[new Ke(X.key,Ee,`integer expected, found ${he}`)]}}function Sp(f){let l=(f.expressionContext==="property"?MT:px)(Kd(f.value),f.valueSpec);if(l.result==="error")return l.value.map(m=>new Ke(`${f.key}${m.key}`,f.value,m.message));let p=l.value.expression||l.value._styleExpression.expression;if(f.expressionContext==="property"&&f.propertyKey==="text-font"&&!p.outputDefined())return[new Ke(f.key,f.value,`Invalid data expression for "${f.propertyKey}". Output values must be contained as literals within the expression.`)];if(f.expressionContext==="property"&&f.propertyType==="layout"&&!J0(p))return[new Ke(f.key,f.value,"\"feature-state\" data expressions are not supported with layout properties.")];if(f.expressionContext==="filter"&&!J0(p))return[new Ke(f.key,f.value,"\"feature-state\" data expressions are not supported with filters.")];if(f.expressionContext&&f.expressionContext.indexOf("cluster")===0){if(!ix(p,["zoom","feature-state"]))return[new Ke(f.key,f.value,"\"zoom\" and \"feature-state\" expressions are not supported with cluster properties.")];if(f.expressionContext==="cluster-initial"&&!ox(p))return[new Ke(f.key,f.value,"Feature data expressions are not supported with initial expression part of cluster properties.")]}return[]}function NT(f){let l=f.key,p=f.value,m=Wn(p);return m!=="string"?[new Ke(l,p,`color expected, ${m} found`)]:mn.parse(String(p))?[]:[new Ke(l,p,`color expected, "${p}" found`)]}function l1(f){let l=f.key,p=f.value,m=f.valueSpec,_=[];return Array.isArray(m.values)?m.values.indexOf(aa(p))===-1&&_.push(new Ke(l,p,`expected one of [${m.values.join(", ")}], ${JSON.stringify(p)} found`)):Object.keys(m.values).indexOf(aa(p))===-1&&_.push(new Ke(l,p,`expected one of [${Object.keys(m.values).join(", ")}], ${JSON.stringify(p)} found`)),_}function DT(f){return o1(Kd(f.value))?Sp(Tn({},f,{expressionContext:"filter",valueSpec:{value:"boolean"}})):AN(f)}function AN(f){let l=f.value,p=f.key;if(Wn(l)!=="array")return[new Ke(p,l,`array expected, ${Wn(l)} found`)];let m=f.styleSpec,_,S=[];if(l.length<1)return[new Ke(p,l,"filter array must have at least 1 element")];switch(S=S.concat(l1({key:`${p}[0]`,value:l[0],valueSpec:m.filter_operator,style:f.style,styleSpec:f.styleSpec})),aa(l[0])){case"<":case"<=":case">":case">=":l.length>=2&&aa(l[1])==="$type"&&S.push(new Ke(p,l,`"$type" cannot be use with operator "${l[0]}"`));case"==":case"!=":l.length!==3&&S.push(new Ke(p,l,`filter array for operator "${l[0]}" must have 3 elements`));case"in":case"!in":l.length>=2&&(_=Wn(l[1]),_!=="string"&&S.push(new Ke(`${p}[1]`,l[1],`string expected, ${_} found`)));for(let T=2;T<l.length;T++)_=Wn(l[T]),aa(l[1])==="$type"?S=S.concat(l1({key:`${p}[${T}]`,value:l[T],valueSpec:m.geometry_type,style:f.style,styleSpec:f.styleSpec})):_!=="string"&&_!=="number"&&_!=="boolean"&&S.push(new Ke(`${p}[${T}]`,l[T],`string, number, or boolean expected, ${_} found`));break;case"any":case"all":case"none":for(let T=1;T<l.length;T++)S=S.concat(AN({key:`${p}[${T}]`,value:l[T],style:f.style,styleSpec:f.styleSpec}));break;case"has":case"!has":_=Wn(l[1]),l.length!==2?S.push(new Ke(p,l,`filter array for "${l[0]}" operator must have 2 elements`)):_!=="string"&&S.push(new Ke(`${p}[1]`,l[1],`string expected, ${_} found`))}return S}function ON(f,l){let p=f.key,m=f.validateSpec,_=f.style,S=f.styleSpec,T=f.value,C=f.objectKey,N=S[`${l}_${f.layerType}`];if(!N)return[];let j=C.match(/^(.*)-transition$/);if(l==="paint"&&j&&N[j[1]]&&N[j[1]].transition)return m({key:p,value:T,valueSpec:S.transition,style:_,styleSpec:S});let F=f.valueSpec||N[C];if(!F)return[new Ke(p,T,`unknown property "${C}"`)];let V;if(Wn(T)==="string"&&lv(F)&&!F.tokens&&(V=/^{([^}]+)}$/.exec(T)))return[new Ke(p,T,`"${C}" does not support interpolation syntax
Use an identity property function instead: \`{ "type": "identity", "property": ${JSON.stringify(V[1])} }\`.`)];let $=[];return f.layerType==="symbol"&&(C==="text-field"&&_&&!_.glyphs&&$.push(new Ke(p,T,"use of \"text-field\" requires a style \"glyphs\" property")),C==="text-font"&&lx(Kd(T))&&aa(T.type)==="identity"&&$.push(new Ke(p,T,"\"text-font\" does not support identity functions"))),$.concat(m({key:f.key,value:T,valueSpec:F,style:_,styleSpec:S,expressionContext:"property",propertyType:l,propertyKey:C}))}function PN(f){return ON(f,"paint")}function uv(f){return ON(f,"layout")}function cv(f){let l=[],p=f.value,m=f.key,_=f.style,S=f.styleSpec;if(Wn(p)!=="object")return[new Ke(m,p,`object expected, ${Wn(p)} found`)];p.type||p.ref||l.push(new Ke(m,p,"either \"type\" or \"ref\" is required"));let T=aa(p.type),C=aa(p.ref);if(p.id){let N=aa(p.id);for(let j=0;j<f.arrayIndex;j++){let F=_.layers[j];aa(F.id)===N&&l.push(new Ke(m,p.id,`duplicate layer id "${p.id}", previously used at line ${F.id.__line__}`))}}if("ref"in p){let N;["type","source","source-layer","filter","layout"].forEach(j=>{j in p&&l.push(new Ke(m,p[j],`"${j}" is prohibited for ref layers`))}),_.layers.forEach(j=>{aa(j.id)===C&&(N=j)}),N?N.ref?l.push(new Ke(m,p.ref,"ref cannot reference another ref layer")):T=aa(N.type):l.push(new Ke(m,p.ref,`ref layer "${C}" not found`))}else if(T!=="background")if(p.source){let N=_.sources&&_.sources[p.source],j=N&&aa(N.type);N?j==="vector"&&T==="raster"?l.push(new Ke(m,p.source,`layer "${p.id}" requires a raster source`)):j!=="raster-dem"&&T==="hillshade"?l.push(new Ke(m,p.source,`layer "${p.id}" requires a raster-dem source`)):j==="raster"&&T!=="raster"?l.push(new Ke(m,p.source,`layer "${p.id}" requires a vector source`)):j!=="vector"||p["source-layer"]?j==="raster-dem"&&T!=="hillshade"?l.push(new Ke(m,p.source,"raster-dem source can only be used with layer type 'hillshade'.")):T!=="line"||!p.paint||!p.paint["line-gradient"]||j==="geojson"&&N.lineMetrics||l.push(new Ke(m,p,`layer "${p.id}" specifies a line-gradient, which requires a GeoJSON source with \`lineMetrics\` enabled.`)):l.push(new Ke(m,p,`layer "${p.id}" must specify a "source-layer"`)):l.push(new Ke(m,p.source,`source "${p.source}" not found`))}else l.push(new Ke(m,p,"missing required property \"source\""));return l=l.concat(Eu({key:m,value:p,valueSpec:S.layer,style:f.style,styleSpec:f.styleSpec,validateSpec:f.validateSpec,objectElementValidators:{"*":()=>[],type:()=>f.validateSpec({key:`${m}.type`,value:p.type,valueSpec:S.layer.type,style:f.style,styleSpec:f.styleSpec,validateSpec:f.validateSpec,object:p,objectKey:"type"}),filter:DT,layout:N=>Eu({layer:p,key:N.key,value:N.value,style:N.style,styleSpec:N.styleSpec,validateSpec:N.validateSpec,objectElementValidators:{"*":j=>uv(Tn({layerType:T},j))}}),paint:N=>Eu({layer:p,key:N.key,value:N.value,style:N.style,styleSpec:N.styleSpec,validateSpec:N.validateSpec,objectElementValidators:{"*":j=>PN(Tn({layerType:T},j))}})}})),l}function qa(f){let l=f.value,p=f.key,m=Wn(l);return m!=="string"?[new Ke(p,l,`string expected, ${m} found`)]:[]}let pv={promoteId:function({key:f,value:l}){if(Wn(l)==="string")return qa({key:f,value:l});{let p=[];for(let m in l)p.push(...qa({key:`${f}.${m}`,value:l[m]}));return p}}};function LT(f){let l=f.value,p=f.key,m=f.styleSpec,_=f.style,S=f.validateSpec;if(!l.type)return[new Ke(p,l,"\"type\" is required")];let T=aa(l.type),C;switch(T){case"vector":case"raster":return C=Eu({key:p,value:l,valueSpec:m[`source_${T.replace("-","_")}`],style:f.style,styleSpec:m,objectElementValidators:pv,validateSpec:S}),C;case"raster-dem":return C=function(N){var j;let F=(j=N.sourceName)!==null&&j!==void 0?j:"",V=N.value,$=N.styleSpec,X=$.source_raster_dem,ee=N.style,se=[],he=Wn(V);if(V===void 0)return se;if(he!=="object")return se.push(new Ke("source_raster_dem",V,`object expected, ${he} found`)),se;let Ee=aa(V.encoding)==="custom",Ve=["redFactor","greenFactor","blueFactor","baseShift"],Oe=N.value.encoding?`"${N.value.encoding}"`:"Default";for(let K in V)!Ee&&Ve.includes(K)?se.push(new Ke(K,V[K],`In "${F}": "${K}" is only valid when "encoding" is set to "custom". ${Oe} encoding found`)):X[K]?se=se.concat(N.validateSpec({key:K,value:V[K],valueSpec:X[K],validateSpec:N.validateSpec,style:ee,styleSpec:$})):se.push(new Ke(K,V[K],`unknown property "${K}"`));return se}({sourceName:p,value:l,style:f.style,styleSpec:m,validateSpec:S}),C;case"geojson":if(C=Eu({key:p,value:l,valueSpec:m.source_geojson,style:_,styleSpec:m,validateSpec:S,objectElementValidators:pv}),l.cluster)for(let N in l.clusterProperties){let[j,F]=l.clusterProperties[N],V=typeof j=="string"?[j,["accumulated"],["get",N]]:j;C.push(...Sp({key:`${p}.${N}.map`,value:F,expressionContext:"cluster-map"})),C.push(...Sp({key:`${p}.${N}.reduce`,value:V,expressionContext:"cluster-reduce"}))}return C;case"video":return Eu({key:p,value:l,valueSpec:m.source_video,style:_,validateSpec:S,styleSpec:m});case"image":return Eu({key:p,value:l,valueSpec:m.source_image,style:_,validateSpec:S,styleSpec:m});case"canvas":return[new Ke(p,null,"Please use runtime APIs to add canvas sources, rather than including them in stylesheets.","source.canvas")];default:return l1({key:`${p}.type`,value:l.type,valueSpec:{values:["vector","raster","raster-dem","geojson","video","image"]}})}}function NN(f){let l=f.value,p=f.styleSpec,m=p.light,_=f.style,S=[],T=Wn(l);if(l===void 0)return S;if(T!=="object")return S=S.concat([new Ke("light",l,`object expected, ${T} found`)]),S;for(let C in l){let N=C.match(/^(.*)-transition$/);S=S.concat(N&&m[N[1]]&&m[N[1]].transition?f.validateSpec({key:C,value:l[C],valueSpec:p.transition,validateSpec:f.validateSpec,style:_,styleSpec:p}):m[C]?f.validateSpec({key:C,value:l[C],valueSpec:m[C],validateSpec:f.validateSpec,style:_,styleSpec:p}):[new Ke(C,l[C],`unknown property "${C}"`)])}return S}function DN(f){let l=f.value,p=f.styleSpec,m=p.sky,_=f.style,S=Wn(l);if(l===void 0)return[];if(S!=="object")return[new Ke("sky",l,`object expected, ${S} found`)];let T=[];for(let C in l)T=T.concat(m[C]?f.validateSpec({key:C,value:l[C],valueSpec:m[C],style:_,styleSpec:p}):[new Ke(C,l[C],`unknown property "${C}"`)]);return T}function fv(f){let l=f.value,p=f.styleSpec,m=p.terrain,_=f.style,S=[],T=Wn(l);if(l===void 0)return S;if(T!=="object")return S=S.concat([new Ke("terrain",l,`object expected, ${T} found`)]),S;for(let C in l)S=S.concat(m[C]?f.validateSpec({key:C,value:l[C],valueSpec:m[C],validateSpec:f.validateSpec,style:_,styleSpec:p}):[new Ke(C,l[C],`unknown property "${C}"`)]);return S}function kT(f){let l=[],p=f.value,m=f.key;if(Array.isArray(p)){let _=[],S=[];for(let T in p)p[T].id&&_.includes(p[T].id)&&l.push(new Ke(m,p,`all the sprites' ids must be unique, but ${p[T].id} is duplicated`)),_.push(p[T].id),p[T].url&&S.includes(p[T].url)&&l.push(new Ke(m,p,`all the sprites' URLs must be unique, but ${p[T].url} is duplicated`)),S.push(p[T].url),l=l.concat(Eu({key:`${m}[${T}]`,value:p[T],valueSpec:{id:{type:"string",required:!0},url:{type:"string",required:!0}},validateSpec:f.validateSpec}));return l}return qa({key:m,value:p})}function vx(f){return l=f.value,l&&l.constructor===Object?[]:[new Ke(f.key,f.value,`object expected, ${Wn(f.value)} found`)];var l}let LN={"*":()=>[],array:OT,boolean:function(f){let l=f.value,p=f.key,m=Wn(l);return m!=="boolean"?[new Ke(p,l,`boolean expected, ${m} found`)]:[]},number:s1,color:NT,constants:a1,enum:l1,filter:DT,function:PT,layer:cv,object:Eu,source:LT,light:NN,sky:DN,terrain:fv,projection:function(f){let l=f.value,p=f.styleSpec,m=p.projection,_=f.style,S=Wn(l);if(l===void 0)return[];if(S!=="object")return[new Ke("projection",l,`object expected, ${S} found`)];let T=[];for(let C in l)T=T.concat(m[C]?f.validateSpec({key:C,value:l[C],valueSpec:m[C],style:_,styleSpec:p}):[new Ke(C,l[C],`unknown property "${C}"`)]);return T},projectionDefinition:function(f){let l=f.key,p=f.value;p=p instanceof String?p.valueOf():p;let m=Wn(p);return m!=="array"||function(_){return Array.isArray(_)&&_.length===3&&typeof _[0]=="string"&&typeof _[1]=="string"&&typeof _[2]=="number"}(p)||function(_){return!!["interpolate","step","literal"].includes(_[0])}(p)?["array","string"].includes(m)?[]:[new Ke(l,p,`projection expected, invalid type "${m}" found`)]:[new Ke(l,p,`projection expected, invalid array ${JSON.stringify(p)} found`)]},string:qa,formatted:function(f){return qa(f).length===0?[]:Sp(f)},resolvedImage:function(f){return qa(f).length===0?[]:Sp(f)},padding:function(f){let l=f.key,p=f.value;if(Wn(p)==="array"){if(p.length<1||p.length>4)return[new Ke(l,p,`padding requires 1 to 4 values; ${p.length} values found`)];let m={type:"number"},_=[];for(let S=0;S<p.length;S++)_=_.concat(f.validateSpec({key:`${l}[${S}]`,value:p[S],validateSpec:f.validateSpec,valueSpec:m}));return _}return s1({key:l,value:p,valueSpec:{}})},numberArray:function(f){let l=f.key,p=f.value;if(Wn(p)==="array"){let m={type:"number"};if(p.length<1)return[new Ke(l,p,"array length at least 1 expected, length 0 found")];let _=[];for(let S=0;S<p.length;S++)_=_.concat(f.validateSpec({key:`${l}[${S}]`,value:p[S],validateSpec:f.validateSpec,valueSpec:m}));return _}return s1({key:l,value:p,valueSpec:{}})},colorArray:function(f){let l=f.key,p=f.value;if(Wn(p)==="array"){if(p.length<1)return[new Ke(l,p,"array length at least 1 expected, length 0 found")];let m=[];for(let _=0;_<p.length;_++)m=m.concat(NT({key:`${l}[${_}]`,value:p[_]}));return m}return NT({key:l,value:p})},variableAnchorOffsetCollection:function(f){let l=f.key,p=f.value,m=Wn(p),_=f.styleSpec;if(m!=="array"||p.length<1||p.length%2!=0)return[new Ke(l,p,"variableAnchorOffsetCollection requires a non-empty array of even length")];let S=[];for(let T=0;T<p.length;T+=2)S=S.concat(l1({key:`${l}[${T}]`,value:p[T],valueSpec:_.layout_symbol["text-anchor"]})),S=S.concat(OT({key:`${l}[${T+1}]`,value:p[T+1],valueSpec:{length:2,value:"number"},validateSpec:f.validateSpec,style:f.style,styleSpec:_}));return S},sprite:kT,state:vx};function dv(f){let l=f.value,p=f.valueSpec,m=f.styleSpec;return f.validateSpec=dv,p.expression&&lx(aa(l))?PT(f):p.expression&&t1(Kd(l))?Sp(f):p.type&&LN[p.type]?LN[p.type](f):Eu(Tn({},f,{valueSpec:p.type?m[p.type]:p}))}function kN(f){let l=f.value,p=f.key,m=qa(f);return m.length||(l.indexOf("{fontstack}")===-1&&m.push(new Ke(p,l,"\"glyphs\" url must include a \"{fontstack}\" token")),l.indexOf("{range}")===-1&&m.push(new Ke(p,l,"\"glyphs\" url must include a \"{range}\" token"))),m}function qs(f,l=ne){let p=[];return p=p.concat(dv({key:"",value:f,valueSpec:l.$root,styleSpec:l,style:f,validateSpec:dv,objectElementValidators:{glyphs:kN,"*":()=>[]}})),f.constants&&(p=p.concat(a1({key:"constants",value:f.constants}))),hv(p)}function Hc(f){return function(l){return f(Mt(Te({},l),{validateSpec:dv}))}}function hv(f){return[].concat(f).sort((l,p)=>l.line-p.line)}function Wc(f){return function(...l){return hv(f.apply(this,l))}}qs.source=Wc(Hc(LT)),qs.sprite=Wc(Hc(kT)),qs.glyphs=Wc(Hc(kN)),qs.light=Wc(Hc(NN)),qs.sky=Wc(Hc(DN)),qs.terrain=Wc(Hc(fv)),qs.state=Wc(Hc(vx)),qs.layer=Wc(Hc(cv)),qs.filter=Wc(Hc(DT)),qs.paintProperty=Wc(Hc(PN)),qs.layoutProperty=Wc(Hc(uv));let mv=qs,yx=mv.light,CU=mv.sky,RT=mv.paintProperty,_x=mv.layoutProperty;function jT(f,l){let p=!1;if(l&&l.length)for(let m of l)f.fire(new J(new Error(m.message))),p=!0;return p}class gv{constructor(l,p,m){let _=this.cells=[];if(l instanceof ArrayBuffer){this.arrayBuffer=l;let T=new Int32Array(this.arrayBuffer);l=T[0],this.d=(p=T[1])+2*(m=T[2]);for(let N=0;N<this.d*this.d;N++){let j=T[3+N],F=T[3+N+1];_.push(j===F?null:T.subarray(j,F))}let C=T[3+_.length+1];this.keys=T.subarray(T[3+_.length],C),this.bboxes=T.subarray(C),this.insert=this._insertReadonly}else{this.d=p+2*m;for(let T=0;T<this.d*this.d;T++)_.push([]);this.keys=[],this.bboxes=[]}this.n=p,this.extent=l,this.padding=m,this.scale=p/l,this.uid=0;let S=m/p*l;this.min=-S,this.max=l+S}insert(l,p,m,_,S){this._forEachCell(p,m,_,S,this._insertCell,this.uid++,void 0,void 0),this.keys.push(l),this.bboxes.push(p),this.bboxes.push(m),this.bboxes.push(_),this.bboxes.push(S)}_insertReadonly(){throw new Error("Cannot insert into a GridIndex created from an ArrayBuffer.")}_insertCell(l,p,m,_,S,T){this.cells[S].push(T)}query(l,p,m,_,S){let T=this.min,C=this.max;if(l<=T&&p<=T&&C<=m&&C<=_&&!S)return Array.prototype.slice.call(this.keys);{let N=[];return this._forEachCell(l,p,m,_,this._queryCell,N,{},S),N}}_queryCell(l,p,m,_,S,T,C,N){let j=this.cells[S];if(j!==null){let F=this.keys,V=this.bboxes;for(let $=0;$<j.length;$++){let X=j[$];if(C[X]===void 0){let ee=4*X;(N?N(V[ee+0],V[ee+1],V[ee+2],V[ee+3]):l<=V[ee+2]&&p<=V[ee+3]&&m>=V[ee+0]&&_>=V[ee+1])?(C[X]=!0,T.push(F[X])):C[X]=!1}}}}_forEachCell(l,p,m,_,S,T,C,N){let j=this._convertToCellCoord(l),F=this._convertToCellCoord(p),V=this._convertToCellCoord(m),$=this._convertToCellCoord(_);for(let X=j;X<=V;X++)for(let ee=F;ee<=$;ee++){let se=this.d*ee+X;if((!N||N(this._convertFromCellCoord(X),this._convertFromCellCoord(ee),this._convertFromCellCoord(X+1),this._convertFromCellCoord(ee+1)))&&S.call(this,l,p,m,_,se,T,C,N))return}}_convertFromCellCoord(l){return(l-this.padding)/this.scale}_convertToCellCoord(l){return Math.max(0,Math.min(this.d-1,Math.floor(l*this.scale)+this.padding))}toArrayBuffer(){if(this.arrayBuffer)return this.arrayBuffer;let l=this.cells,p=3+this.cells.length+1+1,m=0;for(let T=0;T<this.cells.length;T++)m+=this.cells[T].length;let _=new Int32Array(p+m+this.keys.length+this.bboxes.length);_[0]=this.extent,_[1]=this.n,_[2]=this.padding;let S=p;for(let T=0;T<l.length;T++){let C=l[T];_[3+T]=S,_.set(C,S),S+=C.length}return _[3+l.length]=S,_.set(this.keys,S),S+=this.keys.length,_[3+l.length+1]=S,_.set(this.bboxes,S),S+=this.bboxes.length,_.buffer}static serialize(l,p){let m=l.toArrayBuffer();return p&&p.push(m),{buffer:m}}static deserialize(l){return new gv(l.buffer)}}let Tp={};function cr(f,l,p={}){if(Tp[f])throw new Error(`${f} is already registered.`);Object.defineProperty(l,"_classRegistryKey",{value:f,writeable:!1}),Tp[f]={klass:l,omit:p.omit||[],shallow:p.shallow||[]}}cr("Object",Object),cr("TransferableGridIndex",gv),cr("Color",mn),cr("Error",Error),cr("AJAXError",gn),cr("ResolvedImage",wu),cr("StylePropertyFunction",r1),cr("StyleExpression",cx,{omit:["_evaluator"]}),cr("ZoomDependentExpression",fx),cr("ZoomConstantExpression",IT),cr("CompoundExpression",rc,{omit:["_evaluate"]});for(let f in av)av[f]._classRegistryKey||cr(`Expression_${f}`,av[f]);function bx(f){return f&&typeof ArrayBuffer!="undefined"&&(f instanceof ArrayBuffer||f.constructor&&f.constructor.name==="ArrayBuffer")}function xx(f){return f.$name||f.constructor._classRegistryKey}function RN(f){return!function(l){if(l===null||typeof l!="object")return!1;let p=xx(l);return!(!p||p==="Object")}(f)&&(f==null||typeof f=="boolean"||typeof f=="number"||typeof f=="string"||f instanceof Boolean||f instanceof Number||f instanceof String||f instanceof Date||f instanceof RegExp||f instanceof Blob||f instanceof Error||bx(f)||Ft(f)||ArrayBuffer.isView(f)||f instanceof ImageData)}function vv(f,l){if(RN(f))return(bx(f)||Ft(f))&&l&&l.push(f),ArrayBuffer.isView(f)&&l&&l.push(f.buffer),f instanceof ImageData&&l&&l.push(f.data.buffer),f;if(Array.isArray(f)){let S=[];for(let T of f)S.push(vv(T,l));return S}if(typeof f!="object")throw new Error("can't serialize object of type "+typeof f);let p=xx(f);if(!p)throw new Error(`can't serialize object of unregistered class ${f.constructor.name}`);if(!Tp[p])throw new Error(`${p} is not registered.`);let{klass:m}=Tp[p],_=m.serialize?m.serialize(f,l):{};if(m.serialize){if(l&&_===l[l.length-1])throw new Error("statically serialized object won't survive transfer of $name property")}else{for(let S in f){if(!f.hasOwnProperty(S)||Tp[p].omit.indexOf(S)>=0)continue;let T=f[S];_[S]=Tp[p].shallow.indexOf(S)>=0?T:vv(T,l)}f instanceof Error&&(_.message=f.message)}if(_.$name)throw new Error("$name property is reserved for worker serialization logic.");return p!=="Object"&&(_.$name=p),_}function u1(f){if(RN(f))return f;if(Array.isArray(f))return f.map(u1);if(typeof f!="object")throw new Error("can't deserialize object of type "+typeof f);let l=xx(f)||"Object";if(!Tp[l])throw new Error(`can't deserialize unregistered class ${l}`);let{klass:p}=Tp[l];if(!p)throw new Error(`can't deserialize unregistered class ${l}`);if(p.deserialize)return p.deserialize(f);let m=Object.create(p.prototype);for(let _ of Object.keys(f)){if(_==="$name")continue;let S=f[_];m[_]=Tp[l].shallow.indexOf(_)>=0?S:u1(S)}return m}class qT{constructor(){this.first=!0}update(l,p){let m=Math.floor(l);return this.first?(this.first=!1,this.lastIntegerZoom=m,this.lastIntegerZoomTime=0,this.lastZoom=l,this.lastFloorZoom=m,!0):(this.lastFloorZoom>m?(this.lastIntegerZoom=m+1,this.lastIntegerZoomTime=p):this.lastFloorZoom<m&&(this.lastIntegerZoom=m,this.lastIntegerZoomTime=p),l!==this.lastZoom&&(this.lastZoom=l,this.lastFloorZoom=m,!0))}}let $n={"Latin-1 Supplement":f=>f>=128&&f<=255,"Hangul Jamo":f=>f>=4352&&f<=4607,Khmer:f=>f>=6016&&f<=6143,"General Punctuation":f=>f>=8192&&f<=8303,"Letterlike Symbols":f=>f>=8448&&f<=8527,"Number Forms":f=>f>=8528&&f<=8591,"Miscellaneous Technical":f=>f>=8960&&f<=9215,"Control Pictures":f=>f>=9216&&f<=9279,"Optical Character Recognition":f=>f>=9280&&f<=9311,"Enclosed Alphanumerics":f=>f>=9312&&f<=9471,"Geometric Shapes":f=>f>=9632&&f<=9727,"Miscellaneous Symbols":f=>f>=9728&&f<=9983,"Miscellaneous Symbols and Arrows":f=>f>=11008&&f<=11263,"Ideographic Description Characters":f=>f>=12272&&f<=12287,"CJK Symbols and Punctuation":f=>f>=12288&&f<=12351,Hiragana:f=>f>=12352&&f<=12447,Katakana:f=>f>=12448&&f<=12543,Kanbun:f=>f>=12688&&f<=12703,"CJK Strokes":f=>f>=12736&&f<=12783,"Enclosed CJK Letters and Months":f=>f>=12800&&f<=13055,"CJK Compatibility":f=>f>=13056&&f<=13311,"Yijing Hexagram Symbols":f=>f>=19904&&f<=19967,"CJK Unified Ideographs":f=>f>=19968&&f<=40959,"Hangul Syllables":f=>f>=44032&&f<=55215,"Private Use Area":f=>f>=57344&&f<=63743,"Vertical Forms":f=>f>=65040&&f<=65055,"CJK Compatibility Forms":f=>f>=65072&&f<=65103,"Small Form Variants":f=>f>=65104&&f<=65135,"Halfwidth and Fullwidth Forms":f=>f>=65280&&f<=65519};function wx(f){for(let l of f)if(Ex(l.charCodeAt(0)))return!0;return!1}function AU(f){for(let l of f)if(!qN(l.charCodeAt(0)))return!1;return!0}function zT(f){let l=f.map(p=>{try{return new RegExp(`\\p{sc=${p}}`,"u").source}catch(m){return null}}).filter(p=>p);return new RegExp(l.join("|"),"u")}let jN=zT(["Arab","Dupl","Mong","Ougr","Syrc"]);function qN(f){return!jN.test(String.fromCodePoint(f))}let FT=zT(["Bopo","Hani","Hira","Kana","Kits","Nshu","Tang","Yiii"]);function Ex(f){return!(f!==746&&f!==747&&(f<4352||!($n["CJK Compatibility Forms"](f)&&!(f>=65097&&f<=65103)||$n["CJK Compatibility"](f)||$n["CJK Strokes"](f)||!(!$n["CJK Symbols and Punctuation"](f)||f>=12296&&f<=12305||f>=12308&&f<=12319||f===12336)||$n["Enclosed CJK Letters and Months"](f)||$n["Ideographic Description Characters"](f)||$n.Kanbun(f)||$n.Katakana(f)&&f!==12540||!(!$n["Halfwidth and Fullwidth Forms"](f)||f===65288||f===65289||f===65293||f>=65306&&f<=65310||f===65339||f===65341||f===65343||f>=65371&&f<=65503||f===65507||f>=65512&&f<=65519)||!(!$n["Small Form Variants"](f)||f>=65112&&f<=65118||f>=65123&&f<=65126)||$n["Vertical Forms"](f)||$n["Yijing Hexagram Symbols"](f)||new RegExp("\\p{sc=Cans}","u").test(String.fromCodePoint(f))||new RegExp("\\p{sc=Hang}","u").test(String.fromCodePoint(f))||FT.test(String.fromCodePoint(f)))))}function c1(f){return!(Ex(f)||function(l){return!!($n["Latin-1 Supplement"](l)&&(l===167||l===169||l===174||l===177||l===188||l===189||l===190||l===215||l===247)||$n["General Punctuation"](l)&&(l===8214||l===8224||l===8225||l===8240||l===8241||l===8251||l===8252||l===8258||l===8263||l===8264||l===8265||l===8273)||$n["Letterlike Symbols"](l)||$n["Number Forms"](l)||$n["Miscellaneous Technical"](l)&&(l>=8960&&l<=8967||l>=8972&&l<=8991||l>=8996&&l<=9e3||l===9003||l>=9085&&l<=9114||l>=9150&&l<=9165||l===9167||l>=9169&&l<=9179||l>=9186&&l<=9215)||$n["Control Pictures"](l)&&l!==9251||$n["Optical Character Recognition"](l)||$n["Enclosed Alphanumerics"](l)||$n["Geometric Shapes"](l)||$n["Miscellaneous Symbols"](l)&&!(l>=9754&&l<=9759)||$n["Miscellaneous Symbols and Arrows"](l)&&(l>=11026&&l<=11055||l>=11088&&l<=11097||l>=11192&&l<=11243)||$n["CJK Symbols and Punctuation"](l)||$n.Katakana(l)||$n["Private Use Area"](l)||$n["CJK Compatibility Forms"](l)||$n["Small Form Variants"](l)||$n["Halfwidth and Fullwidth Forms"](l)||l===8734||l===8756||l===8757||l>=9984&&l<=10087||l>=10102&&l<=10131||l===65532||l===65533)}(f))}let OU=zT(["Adlm","Arab","Armi","Avst","Chrs","Cprt","Egyp","Elym","Gara","Hatr","Hebr","Hung","Khar","Lydi","Mand","Mani","Mend","Merc","Mero","Narb","Nbat","Nkoo","Orkh","Palm","Phli","Phlp","Phnx","Prti","Rohg","Samr","Sarb","Sogo","Syrc","Thaa","Todr","Yezi"]);function Sx(f){return OU.test(String.fromCodePoint(f))}function PU(f,l){return!(!l&&Sx(f)||f>=2304&&f<=3583||f>=3840&&f<=4255||$n.Khmer(f))}function NU(f){for(let l of f)if(Sx(l.charCodeAt(0)))return!0;return!1}let zf=new class{constructor(){this.TIMEOUT=5e3,this.applyArabicShaping=null,this.processBidirectionalText=null,this.processStyledBidirectionalText=null,this.pluginStatus="unavailable",this.pluginURL=null,this.loadScriptResolve=()=>{}}setState(f){this.pluginStatus=f.pluginStatus,this.pluginURL=f.pluginURL}getState(){return{pluginStatus:this.pluginStatus,pluginURL:this.pluginURL}}setMethods(f){if(zf.isParsed())throw new Error("RTL text plugin already registered.");this.applyArabicShaping=f.applyArabicShaping,this.processBidirectionalText=f.processBidirectionalText,this.processStyledBidirectionalText=f.processStyledBidirectionalText,this.loadScriptResolve()}isParsed(){return this.applyArabicShaping!=null&&this.processBidirectionalText!=null&&this.processStyledBidirectionalText!=null}getRTLTextPluginStatus(){return this.pluginStatus}syncState(f,l){return i(this,void 0,void 0,function*(){if(this.isParsed())return this.getState();if(f.pluginStatus!=="loading")return this.setState(f),f;let p=f.pluginURL,m=new Promise(S=>{this.loadScriptResolve=S});l(p);let _=new Promise(S=>setTimeout(()=>S(),this.TIMEOUT));if(yield Promise.race([m,_]),this.isParsed()){let S={pluginStatus:"loaded",pluginURL:p};return this.setState(S),S}throw this.setState({pluginStatus:"error",pluginURL:""}),new Error(`RTL Text Plugin failed to import scripts from ${p}`)})}};class gi{constructor(l,p){this.zoom=l,p?(this.now=p.now,this.fadeDuration=p.fadeDuration,this.zoomHistory=p.zoomHistory,this.transition=p.transition):(this.now=0,this.fadeDuration=0,this.zoomHistory=new qT,this.transition={})}isSupportedScript(l){return function(p,m){for(let _ of p)if(!PU(_.charCodeAt(0),m))return!1;return!0}(l,zf.getRTLTextPluginStatus()==="loaded")}crossFadingFactor(){return this.fadeDuration===0?1:Math.min((this.now-this.zoomHistory.lastIntegerZoomTime)/this.fadeDuration,1)}getCrossfadeParameters(){let l=this.zoom,p=l-Math.floor(l),m=this.crossFadingFactor();return l>this.zoomHistory.lastIntegerZoom?{fromScale:2,toScale:1,t:p+(1-p)*m}:{fromScale:.5,toScale:1,t:1-(1-m)*p}}}class p1{constructor(l,p){this.property=l,this.value=p,this.expression=function(m,_){if(lx(m))return new r1(m,_);if(t1(m)){let S=MT(m,_);if(S.result==="error")throw new Error(S.value.map(T=>`${T.key}: ${T.message}`).join(", "));return S.value}{let S=m;return _.type==="color"&&typeof m=="string"?S=mn.parse(m):_.type!=="padding"||typeof m!="number"&&!Array.isArray(m)?_.type!=="numberArray"||typeof m!="number"&&!Array.isArray(m)?_.type!=="colorArray"||typeof m!="string"&&!Array.isArray(m)?_.type==="variableAnchorOffsetCollection"&&Array.isArray(m)?S=bs.parse(m):_.type==="projectionDefinition"&&typeof m=="string"&&(S=xs.parse(m)):S=Mi.parse(m):S=ma.parse(m):S=Zi.parse(m),{kind:"constant",evaluate:()=>S}}}(p===void 0?l.specification.default:p,l.specification)}isDataDriven(){return this.expression.kind==="source"||this.expression.kind==="composite"}possiblyEvaluate(l,p,m){return this.property.possiblyEvaluate(this,l,p,m)}}class UT{constructor(l){this.property=l,this.value=new p1(l,void 0)}transitioned(l,p){return new FN(this.property,this.value,p,We({},l.transition,this.transition),l.now)}untransitioned(){return new FN(this.property,this.value,null,{},0)}}class zN{constructor(l){this._properties=l,this._values=Object.create(l.defaultTransitionablePropertyValues)}getValue(l){return st(this._values[l].value.value)}setValue(l,p){Object.prototype.hasOwnProperty.call(this._values,l)||(this._values[l]=new UT(this._values[l].property)),this._values[l].value=new p1(this._values[l].property,p===null?void 0:st(p))}getTransition(l){return st(this._values[l].transition)}setTransition(l,p){Object.prototype.hasOwnProperty.call(this._values,l)||(this._values[l]=new UT(this._values[l].property)),this._values[l].transition=st(p)||void 0}serialize(){let l={};for(let p of Object.keys(this._values)){let m=this.getValue(p);m!==void 0&&(l[p]=m);let _=this.getTransition(p);_!==void 0&&(l[`${p}-transition`]=_)}return l}transitioned(l,p){let m=new UN(this._properties);for(let _ of Object.keys(this._values))m._values[_]=this._values[_].transitioned(l,p._values[_]);return m}untransitioned(){let l=new UN(this._properties);for(let p of Object.keys(this._values))l._values[p]=this._values[p].untransitioned();return l}}class FN{constructor(l,p,m,_,S){this.property=l,this.value=p,this.begin=S+_.delay||0,this.end=this.begin+_.duration||0,l.specification.transition&&(_.delay||_.duration)&&(this.prior=m)}possiblyEvaluate(l,p,m){let _=l.now||0,S=this.value.possiblyEvaluate(l,p,m),T=this.prior;if(T){if(_>this.end)return this.prior=null,S;if(this.value.isDataDriven())return this.prior=null,S;if(_<this.begin)return T.possiblyEvaluate(l,p,m);{let C=(_-this.begin)/(this.end-this.begin);return this.property.interpolate(T.possiblyEvaluate(l,p,m),S,Lt(C))}}return S}}class UN{constructor(l){this._properties=l,this._values=Object.create(l.defaultTransitioningPropertyValues)}possiblyEvaluate(l,p,m){let _=new Tx(this._properties);for(let S of Object.keys(this._values))_._values[S]=this._values[S].possiblyEvaluate(l,p,m);return _}hasTransition(){for(let l of Object.keys(this._values))if(this._values[l].prior)return!0;return!1}}class DU{constructor(l){this._properties=l,this._values=Object.create(l.defaultPropertyValues)}hasValue(l){return this._values[l].value!==void 0}getValue(l){return st(this._values[l].value)}setValue(l,p){this._values[l]=new p1(this._values[l].property,p===null?void 0:st(p))}serialize(){let l={};for(let p of Object.keys(this._values)){let m=this.getValue(p);m!==void 0&&(l[p]=m)}return l}possiblyEvaluate(l,p,m){let _=new Tx(this._properties);for(let S of Object.keys(this._values))_._values[S]=this._values[S].possiblyEvaluate(l,p,m);return _}}class cl{constructor(l,p,m){this.property=l,this.value=p,this.parameters=m}isConstant(){return this.value.kind==="constant"}constantOr(l){return this.value.kind==="constant"?this.value.value:l}evaluate(l,p,m,_){return this.property.evaluate(this.value,this.parameters,l,p,m,_)}}class Tx{constructor(l){this._properties=l,this._values=Object.create(l.defaultPossiblyEvaluatedValues)}get(l){return this._values[l]}}class Sr{constructor(l){this.specification=l}possiblyEvaluate(l,p){if(l.isDataDriven())throw new Error("Value should not be data driven");return l.expression.evaluate(p)}interpolate(l,p,m){let _=wp[this.specification.type];return _?_(l,p,m):l}}class $r{constructor(l,p){this.specification=l,this.overrides=p}possiblyEvaluate(l,p,m,_){return new cl(this,l.expression.kind==="constant"||l.expression.kind==="camera"?{kind:"constant",value:l.expression.evaluate(p,null,{},m,_)}:l.expression,p)}interpolate(l,p,m){if(l.value.kind!=="constant"||p.value.kind!=="constant")return l;if(l.value.value===void 0||p.value.value===void 0)return new cl(this,{kind:"constant",value:void 0},l.parameters);let _=wp[this.specification.type];if(_){let S=_(l.value.value,p.value.value,m);return new cl(this,{kind:"constant",value:S},l.parameters)}return l}evaluate(l,p,m,_,S,T){return l.kind==="constant"?l.value:l.evaluate(p,m,_,S,T)}}class f1 extends $r{possiblyEvaluate(l,p,m,_){if(l.value===void 0)return new cl(this,{kind:"constant",value:void 0},p);if(l.expression.kind==="constant"){let S=l.expression.evaluate(p,null,{},m,_),T=l.property.specification.type==="resolvedImage"&&typeof S!="string"?S.name:S,C=this._calculate(T,T,T,p);return new cl(this,{kind:"constant",value:C},p)}if(l.expression.kind==="camera"){let S=this._calculate(l.expression.evaluate({zoom:p.zoom-1}),l.expression.evaluate({zoom:p.zoom}),l.expression.evaluate({zoom:p.zoom+1}),p);return new cl(this,{kind:"constant",value:S},p)}return new cl(this,l.expression,p)}evaluate(l,p,m,_,S,T){if(l.kind==="source"){let C=l.evaluate(p,m,_,S,T);return this._calculate(C,C,C,p)}return l.kind==="composite"?this._calculate(l.evaluate({zoom:Math.floor(p.zoom)-1},m,_),l.evaluate({zoom:Math.floor(p.zoom)},m,_),l.evaluate({zoom:Math.floor(p.zoom)+1},m,_),p):l.value}_calculate(l,p,m,_){return _.zoom>_.zoomHistory.lastIntegerZoom?{from:l,to:p}:{from:m,to:p}}interpolate(l){return l}}class BT{constructor(l){this.specification=l}possiblyEvaluate(l,p,m,_){if(l.value!==void 0){if(l.expression.kind==="constant"){let S=l.expression.evaluate(p,null,{},m,_);return this._calculate(S,S,S,p)}return this._calculate(l.expression.evaluate(new gi(Math.floor(p.zoom-1),p)),l.expression.evaluate(new gi(Math.floor(p.zoom),p)),l.expression.evaluate(new gi(Math.floor(p.zoom+1),p)),p)}}_calculate(l,p,m,_){return _.zoom>_.zoomHistory.lastIntegerZoom?{from:l,to:p}:{from:m,to:p}}interpolate(l){return l}}class VT{constructor(l){this.specification=l}possiblyEvaluate(l,p,m,_){return!!l.expression.evaluate(p,null,{},m,_)}interpolate(){return!1}}class Ea{constructor(l){this.properties=l,this.defaultPropertyValues={},this.defaultTransitionablePropertyValues={},this.defaultTransitioningPropertyValues={},this.defaultPossiblyEvaluatedValues={},this.overridableProperties=[];for(let p in l){let m=l[p];m.specification.overridable&&this.overridableProperties.push(p);let _=this.defaultPropertyValues[p]=new p1(m,void 0),S=this.defaultTransitionablePropertyValues[p]=new UT(m);this.defaultTransitioningPropertyValues[p]=S.untransitioned(),this.defaultPossiblyEvaluatedValues[p]=_.possiblyEvaluate({})}}}cr("DataDrivenProperty",$r),cr("DataConstantProperty",Sr),cr("CrossFadedDataDrivenProperty",f1),cr("CrossFadedProperty",BT),cr("ColorRampProperty",VT);let GT="-transition";class nc extends de{constructor(l,p){if(super(),this.id=l.id,this.type=l.type,this._featureFilter={filter:()=>!0,needGeometry:!1},l.type!=="custom"&&(this.metadata=l.metadata,this.minzoom=l.minzoom,this.maxzoom=l.maxzoom,l.type!=="background"&&(this.source=l.source,this.sourceLayer=l["source-layer"],this.filter=l.filter),p.layout&&(this._unevaluatedLayout=new DU(p.layout)),p.paint)){this._transitionablePaint=new zN(p.paint);for(let m in l.paint)this.setPaintProperty(m,l.paint[m],{validate:!1});for(let m in l.layout)this.setLayoutProperty(m,l.layout[m],{validate:!1});this._transitioningPaint=this._transitionablePaint.untransitioned(),this.paint=new Tx(p.paint)}}getCrossfadeParameters(){return this._crossfadeParameters}getLayoutProperty(l){return l==="visibility"?this.visibility:this._unevaluatedLayout.getValue(l)}setLayoutProperty(l,p,m={}){p!=null&&this._validate(_x,`layers.${this.id}.layout.${l}`,l,p,m)||(l!=="visibility"?this._unevaluatedLayout.setValue(l,p):this.visibility=p)}getPaintProperty(l){return l.endsWith(GT)?this._transitionablePaint.getTransition(l.slice(0,-11)):this._transitionablePaint.getValue(l)}setPaintProperty(l,p,m={}){if(p!=null&&this._validate(RT,`layers.${this.id}.paint.${l}`,l,p,m))return!1;if(l.endsWith(GT))return this._transitionablePaint.setTransition(l.slice(0,-11),p||void 0),!1;{let _=this._transitionablePaint._values[l],S=_.property.specification["property-type"]==="cross-faded-data-driven",T=_.value.isDataDriven(),C=_.value;this._transitionablePaint.setValue(l,p),this._handleSpecialPaintPropertyUpdate(l);let N=this._transitionablePaint._values[l].value;return N.isDataDriven()||T||S||this._handleOverridablePaintPropertyUpdate(l,C,N)}}_handleSpecialPaintPropertyUpdate(l){}_handleOverridablePaintPropertyUpdate(l,p,m){return!1}isHidden(l){return!!(this.minzoom&&l<this.minzoom)||!!(this.maxzoom&&l>=this.maxzoom)||this.visibility==="none"}updateTransitions(l){this._transitioningPaint=this._transitionablePaint.transitioned(l,this._transitioningPaint)}hasTransition(){return this._transitioningPaint.hasTransition()}recalculate(l,p){l.getCrossfadeParameters&&(this._crossfadeParameters=l.getCrossfadeParameters()),this._unevaluatedLayout&&(this.layout=this._unevaluatedLayout.possiblyEvaluate(l,void 0,p)),this.paint=this._transitioningPaint.possiblyEvaluate(l,void 0,p)}serialize(){let l={id:this.id,type:this.type,source:this.source,"source-layer":this.sourceLayer,metadata:this.metadata,minzoom:this.minzoom,maxzoom:this.maxzoom,filter:this.filter,layout:this._unevaluatedLayout&&this._unevaluatedLayout.serialize(),paint:this._transitionablePaint&&this._transitionablePaint.serialize()};return this.visibility&&(l.layout=l.layout||{},l.layout.visibility=this.visibility),Ge(l,(p,m)=>!(p===void 0||m==="layout"&&!Object.keys(p).length||m==="paint"&&!Object.keys(p).length))}_validate(l,p,m,_,S={}){return(!S||S.validate!==!1)&&jT(this,l.call(mv,{key:p,layerType:this.type,objectKey:m,value:_,styleSpec:ne,style:{glyphs:!0,sprite:!0}}))}is3D(){return!1}isTileClipped(){return!1}hasOffscreenPass(){return!1}resize(){}isStateDependent(){for(let l in this.paint._values){let p=this.paint.get(l);if(p instanceof cl&&lv(p.property.specification)&&(p.value.kind==="source"||p.value.kind==="composite")&&p.value.isStateDependent)return!0}return!1}}let BN={Int8:Int8Array,Uint8:Uint8Array,Int16:Int16Array,Uint16:Uint16Array,Int32:Int32Array,Uint32:Uint32Array,Float32:Float32Array};class Nm{constructor(l,p){this._structArray=l,this._pos1=p*this.size,this._pos2=this._pos1/2,this._pos4=this._pos1/4,this._pos8=this._pos1/8}}class Ki{constructor(){this.isTransferred=!1,this.capacity=-1,this.resize(0)}static serialize(l,p){return l._trim(),p&&(l.isTransferred=!0,p.push(l.arrayBuffer)),{length:l.length,arrayBuffer:l.arrayBuffer}}static deserialize(l){let p=Object.create(this.prototype);return p.arrayBuffer=l.arrayBuffer,p.length=l.length,p.capacity=l.arrayBuffer.byteLength/p.bytesPerElement,p._refreshViews(),p}_trim(){this.length!==this.capacity&&(this.capacity=this.length,this.arrayBuffer=this.arrayBuffer.slice(0,this.length*this.bytesPerElement),this._refreshViews())}clear(){this.length=0}resize(l){this.reserve(l),this.length=l}reserve(l){if(l>this.capacity){this.capacity=Math.max(l,Math.floor(5*this.capacity),128),this.arrayBuffer=new ArrayBuffer(this.capacity*this.bytesPerElement);let p=this.uint8;this._refreshViews(),p&&this.uint8.set(p)}}_refreshViews(){throw new Error("_refreshViews() must be implemented by each concrete StructArray layout")}}function Ri(f,l=1){let p=0,m=0;return{members:f.map(_=>{let S=BN[_.type].BYTES_PER_ELEMENT,T=p=yv(p,Math.max(l,S)),C=_.components||1;return m=Math.max(m,S),p+=S*C,{name:_.name,type:_.type,components:C,offset:T}}),size:yv(p,Math.max(m,l)),alignment:l}}function yv(f,l){return Math.ceil(f/l)*l}class d1 extends Ki{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(l,p){let m=this.length;return this.resize(m+1),this.emplace(m,l,p)}emplace(l,p,m){let _=2*l;return this.int16[_+0]=p,this.int16[_+1]=m,l}}d1.prototype.bytesPerElement=4,cr("StructArrayLayout2i4",d1);class h1 extends Ki{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(l,p,m){let _=this.length;return this.resize(_+1),this.emplace(_,l,p,m)}emplace(l,p,m,_){let S=3*l;return this.int16[S+0]=p,this.int16[S+1]=m,this.int16[S+2]=_,l}}h1.prototype.bytesPerElement=6,cr("StructArrayLayout3i6",h1);class Dm extends Ki{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(l,p,m,_){let S=this.length;return this.resize(S+1),this.emplace(S,l,p,m,_)}emplace(l,p,m,_,S){let T=4*l;return this.int16[T+0]=p,this.int16[T+1]=m,this.int16[T+2]=_,this.int16[T+3]=S,l}}Dm.prototype.bytesPerElement=8,cr("StructArrayLayout4i8",Dm);class HT extends Ki{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(l,p,m,_,S,T){let C=this.length;return this.resize(C+1),this.emplace(C,l,p,m,_,S,T)}emplace(l,p,m,_,S,T,C){let N=6*l;return this.int16[N+0]=p,this.int16[N+1]=m,this.int16[N+2]=_,this.int16[N+3]=S,this.int16[N+4]=T,this.int16[N+5]=C,l}}HT.prototype.bytesPerElement=12,cr("StructArrayLayout2i4i12",HT);class WT extends Ki{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(l,p,m,_,S,T){let C=this.length;return this.resize(C+1),this.emplace(C,l,p,m,_,S,T)}emplace(l,p,m,_,S,T,C){let N=4*l,j=8*l;return this.int16[N+0]=p,this.int16[N+1]=m,this.uint8[j+4]=_,this.uint8[j+5]=S,this.uint8[j+6]=T,this.uint8[j+7]=C,l}}WT.prototype.bytesPerElement=8,cr("StructArrayLayout2i4ub8",WT);class _v extends Ki{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(l,p){let m=this.length;return this.resize(m+1),this.emplace(m,l,p)}emplace(l,p,m){let _=2*l;return this.float32[_+0]=p,this.float32[_+1]=m,l}}_v.prototype.bytesPerElement=8,cr("StructArrayLayout2f8",_v);class $T extends Ki{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(l,p,m,_,S,T,C,N,j,F){let V=this.length;return this.resize(V+1),this.emplace(V,l,p,m,_,S,T,C,N,j,F)}emplace(l,p,m,_,S,T,C,N,j,F,V){let $=10*l;return this.uint16[$+0]=p,this.uint16[$+1]=m,this.uint16[$+2]=_,this.uint16[$+3]=S,this.uint16[$+4]=T,this.uint16[$+5]=C,this.uint16[$+6]=N,this.uint16[$+7]=j,this.uint16[$+8]=F,this.uint16[$+9]=V,l}}$T.prototype.bytesPerElement=20,cr("StructArrayLayout10ui20",$T);class w extends Ki{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(l,p,m,_,S,T,C,N,j,F,V,$){let X=this.length;return this.resize(X+1),this.emplace(X,l,p,m,_,S,T,C,N,j,F,V,$)}emplace(l,p,m,_,S,T,C,N,j,F,V,$,X){let ee=12*l;return this.int16[ee+0]=p,this.int16[ee+1]=m,this.int16[ee+2]=_,this.int16[ee+3]=S,this.uint16[ee+4]=T,this.uint16[ee+5]=C,this.uint16[ee+6]=N,this.uint16[ee+7]=j,this.int16[ee+8]=F,this.int16[ee+9]=V,this.int16[ee+10]=$,this.int16[ee+11]=X,l}}w.prototype.bytesPerElement=24,cr("StructArrayLayout4i4ui4i24",w);class s extends Ki{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(l,p,m){let _=this.length;return this.resize(_+1),this.emplace(_,l,p,m)}emplace(l,p,m,_){let S=3*l;return this.float32[S+0]=p,this.float32[S+1]=m,this.float32[S+2]=_,l}}s.prototype.bytesPerElement=12,cr("StructArrayLayout3f12",s);class c extends Ki{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer)}emplaceBack(l){let p=this.length;return this.resize(p+1),this.emplace(p,l)}emplace(l,p){return this.uint32[1*l+0]=p,l}}c.prototype.bytesPerElement=4,cr("StructArrayLayout1ul4",c);class g extends Ki{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(l,p,m,_,S,T,C,N,j){let F=this.length;return this.resize(F+1),this.emplace(F,l,p,m,_,S,T,C,N,j)}emplace(l,p,m,_,S,T,C,N,j,F){let V=10*l,$=5*l;return this.int16[V+0]=p,this.int16[V+1]=m,this.int16[V+2]=_,this.int16[V+3]=S,this.int16[V+4]=T,this.int16[V+5]=C,this.uint32[$+3]=N,this.uint16[V+8]=j,this.uint16[V+9]=F,l}}g.prototype.bytesPerElement=20,cr("StructArrayLayout6i1ul2ui20",g);class y extends Ki{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(l,p,m,_,S,T){let C=this.length;return this.resize(C+1),this.emplace(C,l,p,m,_,S,T)}emplace(l,p,m,_,S,T,C){let N=6*l;return this.int16[N+0]=p,this.int16[N+1]=m,this.int16[N+2]=_,this.int16[N+3]=S,this.int16[N+4]=T,this.int16[N+5]=C,l}}y.prototype.bytesPerElement=12,cr("StructArrayLayout2i2i2i12",y);class E extends Ki{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(l,p,m,_,S){let T=this.length;return this.resize(T+1),this.emplace(T,l,p,m,_,S)}emplace(l,p,m,_,S,T){let C=4*l,N=8*l;return this.float32[C+0]=p,this.float32[C+1]=m,this.float32[C+2]=_,this.int16[N+6]=S,this.int16[N+7]=T,l}}E.prototype.bytesPerElement=16,cr("StructArrayLayout2f1f2i16",E);class I extends Ki{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(l,p,m,_,S,T){let C=this.length;return this.resize(C+1),this.emplace(C,l,p,m,_,S,T)}emplace(l,p,m,_,S,T,C){let N=16*l,j=4*l,F=8*l;return this.uint8[N+0]=p,this.uint8[N+1]=m,this.float32[j+1]=_,this.float32[j+2]=S,this.int16[F+6]=T,this.int16[F+7]=C,l}}I.prototype.bytesPerElement=16,cr("StructArrayLayout2ub2f2i16",I);class P extends Ki{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(l,p,m){let _=this.length;return this.resize(_+1),this.emplace(_,l,p,m)}emplace(l,p,m,_){let S=3*l;return this.uint16[S+0]=p,this.uint16[S+1]=m,this.uint16[S+2]=_,l}}P.prototype.bytesPerElement=6,cr("StructArrayLayout3ui6",P);class L extends Ki{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(l,p,m,_,S,T,C,N,j,F,V,$,X,ee,se,he,Ee){let Ve=this.length;return this.resize(Ve+1),this.emplace(Ve,l,p,m,_,S,T,C,N,j,F,V,$,X,ee,se,he,Ee)}emplace(l,p,m,_,S,T,C,N,j,F,V,$,X,ee,se,he,Ee,Ve){let Oe=24*l,K=12*l,pe=48*l;return this.int16[Oe+0]=p,this.int16[Oe+1]=m,this.uint16[Oe+2]=_,this.uint16[Oe+3]=S,this.uint32[K+2]=T,this.uint32[K+3]=C,this.uint32[K+4]=N,this.uint16[Oe+10]=j,this.uint16[Oe+11]=F,this.uint16[Oe+12]=V,this.float32[K+7]=$,this.float32[K+8]=X,this.uint8[pe+36]=ee,this.uint8[pe+37]=se,this.uint8[pe+38]=he,this.uint32[K+10]=Ee,this.int16[Oe+22]=Ve,l}}L.prototype.bytesPerElement=48,cr("StructArrayLayout2i2ui3ul3ui2f3ub1ul1i48",L);class z extends Ki{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(l,p,m,_,S,T,C,N,j,F,V,$,X,ee,se,he,Ee,Ve,Oe,K,pe,Ne,ot,Tt,at,dt,kt,It){let Ut=this.length;return this.resize(Ut+1),this.emplace(Ut,l,p,m,_,S,T,C,N,j,F,V,$,X,ee,se,he,Ee,Ve,Oe,K,pe,Ne,ot,Tt,at,dt,kt,It)}emplace(l,p,m,_,S,T,C,N,j,F,V,$,X,ee,se,he,Ee,Ve,Oe,K,pe,Ne,ot,Tt,at,dt,kt,It,Ut){let vt=32*l,hr=16*l;return this.int16[vt+0]=p,this.int16[vt+1]=m,this.int16[vt+2]=_,this.int16[vt+3]=S,this.int16[vt+4]=T,this.int16[vt+5]=C,this.int16[vt+6]=N,this.int16[vt+7]=j,this.uint16[vt+8]=F,this.uint16[vt+9]=V,this.uint16[vt+10]=$,this.uint16[vt+11]=X,this.uint16[vt+12]=ee,this.uint16[vt+13]=se,this.uint16[vt+14]=he,this.uint16[vt+15]=Ee,this.uint16[vt+16]=Ve,this.uint16[vt+17]=Oe,this.uint16[vt+18]=K,this.uint16[vt+19]=pe,this.uint16[vt+20]=Ne,this.uint16[vt+21]=ot,this.uint16[vt+22]=Tt,this.uint32[hr+12]=at,this.float32[hr+13]=dt,this.float32[hr+14]=kt,this.uint16[vt+30]=It,this.uint16[vt+31]=Ut,l}}z.prototype.bytesPerElement=64,cr("StructArrayLayout8i15ui1ul2f2ui64",z);class U extends Ki{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(l){let p=this.length;return this.resize(p+1),this.emplace(p,l)}emplace(l,p){return this.float32[1*l+0]=p,l}}U.prototype.bytesPerElement=4,cr("StructArrayLayout1f4",U);class W extends Ki{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(l,p,m){let _=this.length;return this.resize(_+1),this.emplace(_,l,p,m)}emplace(l,p,m,_){let S=3*l;return this.uint16[6*l+0]=p,this.float32[S+1]=m,this.float32[S+2]=_,l}}W.prototype.bytesPerElement=12,cr("StructArrayLayout1ui2f12",W);class H extends Ki{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(l,p,m){let _=this.length;return this.resize(_+1),this.emplace(_,l,p,m)}emplace(l,p,m,_){let S=4*l;return this.uint32[2*l+0]=p,this.uint16[S+2]=m,this.uint16[S+3]=_,l}}H.prototype.bytesPerElement=8,cr("StructArrayLayout1ul2ui8",H);class te extends Ki{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(l,p){let m=this.length;return this.resize(m+1),this.emplace(m,l,p)}emplace(l,p,m){let _=2*l;return this.uint16[_+0]=p,this.uint16[_+1]=m,l}}te.prototype.bytesPerElement=4,cr("StructArrayLayout2ui4",te);class ae extends Ki{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(l){let p=this.length;return this.resize(p+1),this.emplace(p,l)}emplace(l,p){return this.uint16[1*l+0]=p,l}}ae.prototype.bytesPerElement=2,cr("StructArrayLayout1ui2",ae);class be extends Ki{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(l,p,m,_){let S=this.length;return this.resize(S+1),this.emplace(S,l,p,m,_)}emplace(l,p,m,_,S){let T=4*l;return this.float32[T+0]=p,this.float32[T+1]=m,this.float32[T+2]=_,this.float32[T+3]=S,l}}be.prototype.bytesPerElement=16,cr("StructArrayLayout4f16",be);class _e extends Nm{get anchorPointX(){return this._structArray.int16[this._pos2+0]}get anchorPointY(){return this._structArray.int16[this._pos2+1]}get x1(){return this._structArray.int16[this._pos2+2]}get y1(){return this._structArray.int16[this._pos2+3]}get x2(){return this._structArray.int16[this._pos2+4]}get y2(){return this._structArray.int16[this._pos2+5]}get featureIndex(){return this._structArray.uint32[this._pos4+3]}get sourceLayerIndex(){return this._structArray.uint16[this._pos2+8]}get bucketIndex(){return this._structArray.uint16[this._pos2+9]}get anchorPoint(){return new x(this.anchorPointX,this.anchorPointY)}}_e.prototype.size=20;class xe extends g{get(l){return new _e(this,l)}}cr("CollisionBoxArray",xe);class Ae extends Nm{get anchorX(){return this._structArray.int16[this._pos2+0]}get anchorY(){return this._structArray.int16[this._pos2+1]}get glyphStartIndex(){return this._structArray.uint16[this._pos2+2]}get numGlyphs(){return this._structArray.uint16[this._pos2+3]}get vertexStartIndex(){return this._structArray.uint32[this._pos4+2]}get lineStartIndex(){return this._structArray.uint32[this._pos4+3]}get lineLength(){return this._structArray.uint32[this._pos4+4]}get segment(){return this._structArray.uint16[this._pos2+10]}get lowerSize(){return this._structArray.uint16[this._pos2+11]}get upperSize(){return this._structArray.uint16[this._pos2+12]}get lineOffsetX(){return this._structArray.float32[this._pos4+7]}get lineOffsetY(){return this._structArray.float32[this._pos4+8]}get writingMode(){return this._structArray.uint8[this._pos1+36]}get placedOrientation(){return this._structArray.uint8[this._pos1+37]}set placedOrientation(l){this._structArray.uint8[this._pos1+37]=l}get hidden(){return this._structArray.uint8[this._pos1+38]}set hidden(l){this._structArray.uint8[this._pos1+38]=l}get crossTileID(){return this._structArray.uint32[this._pos4+10]}set crossTileID(l){this._structArray.uint32[this._pos4+10]=l}get associatedIconIndex(){return this._structArray.int16[this._pos2+22]}}Ae.prototype.size=48;class ke extends L{get(l){return new Ae(this,l)}}cr("PlacedSymbolArray",ke);class Le extends Nm{get anchorX(){return this._structArray.int16[this._pos2+0]}get anchorY(){return this._structArray.int16[this._pos2+1]}get rightJustifiedTextSymbolIndex(){return this._structArray.int16[this._pos2+2]}get centerJustifiedTextSymbolIndex(){return this._structArray.int16[this._pos2+3]}get leftJustifiedTextSymbolIndex(){return this._structArray.int16[this._pos2+4]}get verticalPlacedTextSymbolIndex(){return this._structArray.int16[this._pos2+5]}get placedIconSymbolIndex(){return this._structArray.int16[this._pos2+6]}get verticalPlacedIconSymbolIndex(){return this._structArray.int16[this._pos2+7]}get key(){return this._structArray.uint16[this._pos2+8]}get textBoxStartIndex(){return this._structArray.uint16[this._pos2+9]}get textBoxEndIndex(){return this._structArray.uint16[this._pos2+10]}get verticalTextBoxStartIndex(){return this._structArray.uint16[this._pos2+11]}get verticalTextBoxEndIndex(){return this._structArray.uint16[this._pos2+12]}get iconBoxStartIndex(){return this._structArray.uint16[this._pos2+13]}get iconBoxEndIndex(){return this._structArray.uint16[this._pos2+14]}get verticalIconBoxStartIndex(){return this._structArray.uint16[this._pos2+15]}get verticalIconBoxEndIndex(){return this._structArray.uint16[this._pos2+16]}get featureIndex(){return this._structArray.uint16[this._pos2+17]}get numHorizontalGlyphVertices(){return this._structArray.uint16[this._pos2+18]}get numVerticalGlyphVertices(){return this._structArray.uint16[this._pos2+19]}get numIconVertices(){return this._structArray.uint16[this._pos2+20]}get numVerticalIconVertices(){return this._structArray.uint16[this._pos2+21]}get useRuntimeCollisionCircles(){return this._structArray.uint16[this._pos2+22]}get crossTileID(){return this._structArray.uint32[this._pos4+12]}set crossTileID(l){this._structArray.uint32[this._pos4+12]=l}get textBoxScale(){return this._structArray.float32[this._pos4+13]}get collisionCircleDiameter(){return this._structArray.float32[this._pos4+14]}get textAnchorOffsetStartIndex(){return this._structArray.uint16[this._pos2+30]}get textAnchorOffsetEndIndex(){return this._structArray.uint16[this._pos2+31]}}Le.prototype.size=64;class Fe extends z{get(l){return new Le(this,l)}}cr("SymbolInstanceArray",Fe);class He extends U{getoffsetX(l){return this.float32[1*l+0]}}cr("GlyphOffsetArray",He);class Be extends h1{getx(l){return this.int16[3*l+0]}gety(l){return this.int16[3*l+1]}gettileUnitDistanceFromAnchor(l){return this.int16[3*l+2]}}cr("SymbolLineVertexArray",Be);class rt extends Nm{get textAnchor(){return this._structArray.uint16[this._pos2+0]}get textOffset0(){return this._structArray.float32[this._pos4+1]}get textOffset1(){return this._structArray.float32[this._pos4+2]}}rt.prototype.size=12;class ht extends W{get(l){return new rt(this,l)}}cr("TextAnchorOffsetArray",ht);class lt extends Nm{get featureIndex(){return this._structArray.uint32[this._pos4+0]}get sourceLayerIndex(){return this._structArray.uint16[this._pos2+2]}get bucketIndex(){return this._structArray.uint16[this._pos2+3]}}lt.prototype.size=8;class ut extends H{get(l){return new lt(this,l)}}cr("FeatureIndexArray",ut);class ft extends d1{}class Yt extends d1{}class Ht extends d1{}class Ct extends HT{}class br extends WT{}class On extends _v{}class ro extends $T{}class ji extends w{}class ti extends s{}class qi extends c{}class zi extends y{}class ii extends I{}class Eo extends P{}class za extends te{}let os=Ri([{name:"a_pos",components:2,type:"Int16"}],4),{members:ws}=os;class So{constructor(l=[]){this._forceNewSegmentOnNextPrepare=!1,this.segments=l}prepareSegment(l,p,m,_){let S=this.segments[this.segments.length-1];return l>So.MAX_VERTEX_ARRAY_LENGTH&&Rt(`Max vertices per segment is ${So.MAX_VERTEX_ARRAY_LENGTH}: bucket requested ${l}. Consider using the \`fillLargeMeshArrays\` function if you require meshes with more than ${So.MAX_VERTEX_ARRAY_LENGTH} vertices.`),this._forceNewSegmentOnNextPrepare||!S||S.vertexLength+l>So.MAX_VERTEX_ARRAY_LENGTH||S.sortKey!==_?this.createNewSegment(p,m,_):S}createNewSegment(l,p,m){let _={vertexOffset:l.length,primitiveOffset:p.length,vertexLength:0,primitiveLength:0,vaos:{}};return m!==void 0&&(_.sortKey=m),this._forceNewSegmentOnNextPrepare=!1,this.segments.push(_),_}getOrCreateLatestSegment(l,p,m){return this.prepareSegment(0,l,p,m)}forceNewSegmentOnNextPrepare(){this._forceNewSegmentOnNextPrepare=!0}get(){return this.segments}destroy(){for(let l of this.segments)for(let p in l.vaos)l.vaos[p].destroy()}static simpleSegment(l,p,m,_){return new So([{vertexOffset:l,primitiveOffset:p,vertexLength:m,primitiveLength:_,vaos:{},sortKey:0}])}}function Xd(f,l){return 256*(f=ct(Math.floor(f),0,255))+ct(Math.floor(l),0,255)}So.MAX_VERTEX_ARRAY_LENGTH=Math.pow(2,16)-1,cr("SegmentVector",So);let Ip=Ri([{name:"a_pattern_from",components:4,type:"Uint16"},{name:"a_pattern_to",components:4,type:"Uint16"},{name:"a_pixel_ratio_from",components:1,type:"Uint16"},{name:"a_pixel_ratio_to",components:1,type:"Uint16"}]);var Qd,Lm,m1,Jd={exports:{}},km={exports:{}},Su={exports:{}},eh=function(){if(m1)return Jd.exports;m1=1;var f=(Qd||(Qd=1,km.exports=function(p,m){var _,S,T,C,N,j,F,V;for(S=p.length-(_=3&p.length),T=m,N=3432918353,j=461845907,V=0;V<S;)F=255&p.charCodeAt(V)|(255&p.charCodeAt(++V))<<8|(255&p.charCodeAt(++V))<<16|(255&p.charCodeAt(++V))<<24,++V,T=27492+(65535&(C=5*(65535&(T=(T^=F=(65535&(F=(F=(65535&F)*N+(((F>>>16)*N&65535)<<16)&4294967295)<<15|F>>>17))*j+(((F>>>16)*j&65535)<<16)&4294967295)<<13|T>>>19))+((5*(T>>>16)&65535)<<16)&4294967295))+((58964+(C>>>16)&65535)<<16);switch(F=0,_){case 3:F^=(255&p.charCodeAt(V+2))<<16;case 2:F^=(255&p.charCodeAt(V+1))<<8;case 1:T^=F=(65535&(F=(F=(65535&(F^=255&p.charCodeAt(V)))*N+(((F>>>16)*N&65535)<<16)&4294967295)<<15|F>>>17))*j+(((F>>>16)*j&65535)<<16)&4294967295}return T^=p.length,T=2246822507*(65535&(T^=T>>>16))+((2246822507*(T>>>16)&65535)<<16)&4294967295,T=3266489909*(65535&(T^=T>>>13))+((3266489909*(T>>>16)&65535)<<16)&4294967295,(T^=T>>>16)>>>0}),km.exports),l=(Lm||(Lm=1,Su.exports=function(p,m){for(var _,S=p.length,T=m^S,C=0;S>=4;)_=1540483477*(65535&(_=255&p.charCodeAt(C)|(255&p.charCodeAt(++C))<<8|(255&p.charCodeAt(++C))<<16|(255&p.charCodeAt(++C))<<24))+((1540483477*(_>>>16)&65535)<<16),T=1540483477*(65535&T)+((1540483477*(T>>>16)&65535)<<16)^(_=1540483477*(65535&(_^=_>>>24))+((1540483477*(_>>>16)&65535)<<16)),S-=4,++C;switch(S){case 3:T^=(255&p.charCodeAt(C+2))<<16;case 2:T^=(255&p.charCodeAt(C+1))<<8;case 1:T=1540483477*(65535&(T^=255&p.charCodeAt(C)))+((1540483477*(T>>>16)&65535)<<16)}return T=1540483477*(65535&(T^=T>>>13))+((1540483477*(T>>>16)&65535)<<16),(T^=T>>>15)>>>0}),Su.exports);return Jd.exports=f,Jd.exports.murmur3=f,Jd.exports.murmur2=l,Jd.exports}(),Ff=a(eh);class th{constructor(){this.ids=[],this.positions=[],this.indexed=!1}add(l,p,m,_){this.ids.push(Sa(l)),this.positions.push(p,m,_)}getPositions(l){if(!this.indexed)throw new Error("Trying to get index, but feature positions are not indexed");let p=Sa(l),m=0,_=this.ids.length-1;for(;m<_;){let T=m+_>>1;this.ids[T]>=p?_=T:m=T+1}let S=[];for(;this.ids[m]===p;)S.push({index:this.positions[3*m],start:this.positions[3*m+1],end:this.positions[3*m+2]}),m++;return S}static serialize(l,p){let m=new Float64Array(l.ids),_=new Uint32Array(l.positions);return Ta(m,_,0,m.length-1),p&&p.push(m.buffer,_.buffer),{ids:m,positions:_}}static deserialize(l){let p=new th;return p.ids=l.ids,p.positions=l.positions,p.indexed=!0,p}}function Sa(f){let l=+f;return!isNaN(l)&&l<=Number.MAX_SAFE_INTEGER?l:Ff(String(f))}function Ta(f,l,p,m){for(;p<m;){let _=f[p+m>>1],S=p-1,T=m+1;for(;;){do S++;while(f[S]<_);do T--;while(f[T]>_);if(S>=T)break;pl(f,S,T),pl(l,3*S,3*T),pl(l,3*S+1,3*T+1),pl(l,3*S+2,3*T+2)}T-p<m-T?(Ta(f,l,p,T),p=T+1):(Ta(f,l,T+1,m),m=T)}}function pl(f,l,p){let m=f[l];f[l]=f[p],f[p]=m}cr("FeaturePositionMap",th);class vi{constructor(l,p){this.gl=l.gl,this.location=p}}class Ix extends vi{constructor(l,p){super(l,p),this.current=0}set(l){this.current!==l&&(this.current=l,this.gl.uniform1f(this.location,l))}}class VN extends vi{constructor(l,p){super(l,p),this.current=[0,0,0,0]}set(l){l[0]===this.current[0]&&l[1]===this.current[1]&&l[2]===this.current[2]&&l[3]===this.current[3]||(this.current=l,this.gl.uniform4f(this.location,l[0],l[1],l[2],l[3]))}}class GN extends vi{constructor(l,p){super(l,p),this.current=mn.transparent}set(l){l.r===this.current.r&&l.g===this.current.g&&l.b===this.current.b&&l.a===this.current.a||(this.current=l,this.gl.uniform4f(this.location,l.r,l.g,l.b,l.a))}}let LU=new Float32Array(16);function ZT(f){return[Xd(255*f.r,255*f.g),Xd(255*f.b,255*f.a)]}class g1{constructor(l,p,m){this.value=l,this.uniformNames=p.map(_=>`u_${_}`),this.type=m}setUniform(l,p,m){l.set(m.constantOr(this.value))}getBinding(l,p,m){return this.type==="color"?new GN(l,p):new Ix(l,p)}}class oc{constructor(l,p){this.uniformNames=p.map(m=>`u_${m}`),this.patternFrom=null,this.patternTo=null,this.pixelRatioFrom=1,this.pixelRatioTo=1}setConstantPatternPositions(l,p){this.pixelRatioFrom=p.pixelRatio,this.pixelRatioTo=l.pixelRatio,this.patternFrom=p.tlbr,this.patternTo=l.tlbr}setUniform(l,p,m,_){let S=_==="u_pattern_to"?this.patternTo:_==="u_pattern_from"?this.patternFrom:_==="u_pixel_ratio_to"?this.pixelRatioTo:_==="u_pixel_ratio_from"?this.pixelRatioFrom:null;S&&l.set(S)}getBinding(l,p,m){return m.substr(0,9)==="u_pattern"?new VN(l,p):new Ix(l,p)}}class Mp{constructor(l,p,m,_){this.expression=l,this.type=m,this.maxValue=0,this.paintVertexAttributes=p.map(S=>({name:`a_${S}`,type:"Float32",components:m==="color"?2:1,offset:0})),this.paintVertexArray=new _}populatePaintArray(l,p,m,_,S){let T=this.paintVertexArray.length,C=this.expression.evaluate(new gi(0),p,{},_,[],S);this.paintVertexArray.resize(l),this._setPaintValue(T,l,C)}updatePaintArray(l,p,m,_){let S=this.expression.evaluate({zoom:0},m,_);this._setPaintValue(l,p,S)}_setPaintValue(l,p,m){if(this.type==="color"){let _=ZT(m);for(let S=l;S<p;S++)this.paintVertexArray.emplace(S,_[0],_[1])}else{for(let _=l;_<p;_++)this.paintVertexArray.emplace(_,m);this.maxValue=Math.max(this.maxValue,Math.abs(m))}}upload(l){this.paintVertexArray&&this.paintVertexArray.arrayBuffer&&(this.paintVertexBuffer&&this.paintVertexBuffer.buffer?this.paintVertexBuffer.updateData(this.paintVertexArray):this.paintVertexBuffer=l.createVertexBuffer(this.paintVertexArray,this.paintVertexAttributes,this.expression.isStateDependent))}destroy(){this.paintVertexBuffer&&this.paintVertexBuffer.destroy()}}class ic{constructor(l,p,m,_,S,T){this.expression=l,this.uniformNames=p.map(C=>`u_${C}_t`),this.type=m,this.useIntegerZoom=_,this.zoom=S,this.maxValue=0,this.paintVertexAttributes=p.map(C=>({name:`a_${C}`,type:"Float32",components:m==="color"?4:2,offset:0})),this.paintVertexArray=new T}populatePaintArray(l,p,m,_,S){let T=this.expression.evaluate(new gi(this.zoom),p,{},_,[],S),C=this.expression.evaluate(new gi(this.zoom+1),p,{},_,[],S),N=this.paintVertexArray.length;this.paintVertexArray.resize(l),this._setPaintValue(N,l,T,C)}updatePaintArray(l,p,m,_){let S=this.expression.evaluate({zoom:this.zoom},m,_),T=this.expression.evaluate({zoom:this.zoom+1},m,_);this._setPaintValue(l,p,S,T)}_setPaintValue(l,p,m,_){if(this.type==="color"){let S=ZT(m),T=ZT(_);for(let C=l;C<p;C++)this.paintVertexArray.emplace(C,S[0],S[1],T[0],T[1])}else{for(let S=l;S<p;S++)this.paintVertexArray.emplace(S,m,_);this.maxValue=Math.max(this.maxValue,Math.abs(m),Math.abs(_))}}upload(l){this.paintVertexArray&&this.paintVertexArray.arrayBuffer&&(this.paintVertexBuffer&&this.paintVertexBuffer.buffer?this.paintVertexBuffer.updateData(this.paintVertexArray):this.paintVertexBuffer=l.createVertexBuffer(this.paintVertexArray,this.paintVertexAttributes,this.expression.isStateDependent))}destroy(){this.paintVertexBuffer&&this.paintVertexBuffer.destroy()}setUniform(l,p){let m=this.useIntegerZoom?Math.floor(p.zoom):p.zoom,_=ct(this.expression.interpolationFactor(m,this.zoom,this.zoom+1),0,1);l.set(_)}getBinding(l,p,m){return new Ix(l,p)}}class Uf{constructor(l,p,m,_,S,T){this.expression=l,this.type=p,this.useIntegerZoom=m,this.zoom=_,this.layerId=T,this.zoomInPaintVertexArray=new S,this.zoomOutPaintVertexArray=new S}populatePaintArray(l,p,m){let _=this.zoomInPaintVertexArray.length;this.zoomInPaintVertexArray.resize(l),this.zoomOutPaintVertexArray.resize(l),this._setPaintValues(_,l,p.patterns&&p.patterns[this.layerId],m)}updatePaintArray(l,p,m,_,S){this._setPaintValues(l,p,m.patterns&&m.patterns[this.layerId],S)}_setPaintValues(l,p,m,_){if(!_||!m)return;let{min:S,mid:T,max:C}=m,N=_[S],j=_[T],F=_[C];if(N&&j&&F)for(let V=l;V<p;V++)this.zoomInPaintVertexArray.emplace(V,j.tl[0],j.tl[1],j.br[0],j.br[1],N.tl[0],N.tl[1],N.br[0],N.br[1],j.pixelRatio,N.pixelRatio),this.zoomOutPaintVertexArray.emplace(V,j.tl[0],j.tl[1],j.br[0],j.br[1],F.tl[0],F.tl[1],F.br[0],F.br[1],j.pixelRatio,F.pixelRatio)}upload(l){this.zoomInPaintVertexArray&&this.zoomInPaintVertexArray.arrayBuffer&&this.zoomOutPaintVertexArray&&this.zoomOutPaintVertexArray.arrayBuffer&&(this.zoomInPaintVertexBuffer=l.createVertexBuffer(this.zoomInPaintVertexArray,Ip.members,this.expression.isStateDependent),this.zoomOutPaintVertexBuffer=l.createVertexBuffer(this.zoomOutPaintVertexArray,Ip.members,this.expression.isStateDependent))}destroy(){this.zoomOutPaintVertexBuffer&&this.zoomOutPaintVertexBuffer.destroy(),this.zoomInPaintVertexBuffer&&this.zoomInPaintVertexBuffer.destroy()}}class Mx{constructor(l,p,m){this.binders={},this._buffers=[];let _=[];for(let S in l.paint._values){if(!m(S))continue;let T=l.paint.get(S);if(!(T instanceof cl&&lv(T.property.specification)))continue;let C=YT(S,l.type),N=T.value,j=T.property.specification.type,F=T.property.useIntegerZoom,V=T.property.specification["property-type"],$=V==="cross-faded"||V==="cross-faded-data-driven";if(N.kind==="constant")this.binders[S]=$?new oc(N.value,C):new g1(N.value,C,j),_.push(`/u_${S}`);else if(N.kind==="source"||$){let X=ope(S,j,"source");this.binders[S]=$?new Uf(N,j,F,p,X,l.id):new Mp(N,C,j,X),_.push(`/a_${S}`)}else{let X=ope(S,j,"composite");this.binders[S]=new ic(N,C,j,F,p,X),_.push(`/z_${S}`)}}this.cacheKey=_.sort().join("")}getMaxValue(l){let p=this.binders[l];return p instanceof Mp||p instanceof ic?p.maxValue:0}populatePaintArrays(l,p,m,_,S){for(let T in this.binders){let C=this.binders[T];(C instanceof Mp||C instanceof ic||C instanceof Uf)&&C.populatePaintArray(l,p,m,_,S)}}setConstantPatternPositions(l,p){for(let m in this.binders){let _=this.binders[m];_ instanceof oc&&_.setConstantPatternPositions(l,p)}}updatePaintArrays(l,p,m,_,S){let T=!1;for(let C in l){let N=p.getPositions(C);for(let j of N){let F=m.feature(j.index);for(let V in this.binders){let $=this.binders[V];if(($ instanceof Mp||$ instanceof ic||$ instanceof Uf)&&$.expression.isStateDependent===!0){let X=_.paint.get(V);$.expression=X.value,$.updatePaintArray(j.start,j.end,F,l[C],S),T=!0}}}}return T}defines(){let l=[];for(let p in this.binders){let m=this.binders[p];(m instanceof g1||m instanceof oc)&&l.push(...m.uniformNames.map(_=>`#define HAS_UNIFORM_${_}`))}return l}getBinderAttributes(){let l=[];for(let p in this.binders){let m=this.binders[p];if(m instanceof Mp||m instanceof ic)for(let _=0;_<m.paintVertexAttributes.length;_++)l.push(m.paintVertexAttributes[_].name);else if(m instanceof Uf)for(let _=0;_<Ip.members.length;_++)l.push(Ip.members[_].name)}return l}getBinderUniforms(){let l=[];for(let p in this.binders){let m=this.binders[p];if(m instanceof g1||m instanceof oc||m instanceof ic)for(let _ of m.uniformNames)l.push(_)}return l}getPaintVertexBuffers(){return this._buffers}getUniforms(l,p){let m=[];for(let _ in this.binders){let S=this.binders[_];if(S instanceof g1||S instanceof oc||S instanceof ic){for(let T of S.uniformNames)if(p[T]){let C=S.getBinding(l,p[T],T);m.push({name:T,property:_,binding:C})}}}return m}setUniforms(l,p,m,_){for(let{name:S,property:T,binding:C}of p)this.binders[T].setUniform(C,_,m.get(T),S)}updatePaintBuffers(l){this._buffers=[];for(let p in this.binders){let m=this.binders[p];if(l&&m instanceof Uf){let _=l.fromScale===2?m.zoomInPaintVertexBuffer:m.zoomOutPaintVertexBuffer;_&&this._buffers.push(_)}else(m instanceof Mp||m instanceof ic)&&m.paintVertexBuffer&&this._buffers.push(m.paintVertexBuffer)}}upload(l){for(let p in this.binders){let m=this.binders[p];(m instanceof Mp||m instanceof ic||m instanceof Uf)&&m.upload(l)}this.updatePaintBuffers()}destroy(){for(let l in this.binders){let p=this.binders[l];(p instanceof Mp||p instanceof ic||p instanceof Uf)&&p.destroy()}}}class rh{constructor(l,p,m=()=>!0){this.programConfigurations={};for(let _ of l)this.programConfigurations[_.id]=new Mx(_,p,m);this.needsUpload=!1,this._featureMap=new th,this._bufferOffset=0}populatePaintArrays(l,p,m,_,S,T){for(let C in this.programConfigurations)this.programConfigurations[C].populatePaintArrays(l,p,_,S,T);p.id!==void 0&&this._featureMap.add(p.id,m,this._bufferOffset,l),this._bufferOffset=l,this.needsUpload=!0}updatePaintArrays(l,p,m,_){for(let S of m)this.needsUpload=this.programConfigurations[S.id].updatePaintArrays(l,this._featureMap,p,S,_)||this.needsUpload}get(l){return this.programConfigurations[l]}upload(l){if(this.needsUpload){for(let p in this.programConfigurations)this.programConfigurations[p].upload(l);this.needsUpload=!1}}destroy(){for(let l in this.programConfigurations)this.programConfigurations[l].destroy()}}function YT(f,l){return{"text-opacity":["opacity"],"icon-opacity":["opacity"],"text-color":["fill_color"],"icon-color":["fill_color"],"text-halo-color":["halo_color"],"icon-halo-color":["halo_color"],"text-halo-blur":["halo_blur"],"icon-halo-blur":["halo_blur"],"text-halo-width":["halo_width"],"icon-halo-width":["halo_width"],"line-gap-width":["gapwidth"],"line-pattern":["pattern_to","pattern_from","pixel_ratio_to","pixel_ratio_from"],"fill-pattern":["pattern_to","pattern_from","pixel_ratio_to","pixel_ratio_from"],"fill-extrusion-pattern":["pattern_to","pattern_from","pixel_ratio_to","pixel_ratio_from"]}[f]||[f.replace(`${l}-`,"").replace(/-/g,"_")]}function ope(f,l,p){let m={color:{source:_v,composite:be},number:{source:U,composite:_v}},_=function(S){return{"line-pattern":{source:ro,composite:ro},"fill-pattern":{source:ro,composite:ro},"fill-extrusion-pattern":{source:ro,composite:ro}}[S]}(f);return _&&_[p]||m[l][p]}cr("ConstantBinder",g1),cr("CrossFadedConstantBinder",oc),cr("SourceExpressionBinder",Mp),cr("CrossFadedCompositeBinder",Uf),cr("CompositeExpressionBinder",ic),cr("ProgramConfiguration",Mx,{omit:["_buffers"]}),cr("ProgramConfigurationSet",rh);let kU=Math.pow(2,14)-1,ipe=-kU-1;function v1(f){let l=tt/f.extent,p=f.loadGeometry();for(let m=0;m<p.length;m++){let _=p[m];for(let S=0;S<_.length;S++){let T=_[S],C=Math.round(T.x*l),N=Math.round(T.y*l);T.x=ct(C,ipe,kU),T.y=ct(N,ipe,kU),(C<T.x||C>T.x+1||N<T.y||N>T.y+1)&&Rt("Geometry exceeds allowed extent, reduce your vector tile buffer size")}}return p}function y1(f,l){return{type:f.type,id:f.id,properties:f.properties,geometry:l?v1(f):[]}}let ape=-32768;function Hdt(f,l,p,m,_){f.emplaceBack(ape+8*l+m,ape+8*p+_)}class RU{constructor(l){this.zoom=l.zoom,this.overscaling=l.overscaling,this.layers=l.layers,this.layerIds=this.layers.map(p=>p.id),this.index=l.index,this.hasPattern=!1,this.layoutVertexArray=new Yt,this.indexArray=new Eo,this.segments=new So,this.programConfigurations=new rh(l.layers,l.zoom),this.stateDependentLayerIds=this.layers.filter(p=>p.isStateDependent()).map(p=>p.id)}populate(l,p,m){let _=this.layers[0],S=[],T=null,C=!1,N=_.type==="heatmap";if(_.type==="circle"){let F=_;T=F.layout.get("circle-sort-key"),C=!T.isConstant(),N=N||F.paint.get("circle-pitch-alignment")==="map"}let j=N?p.subdivisionGranularity.circle:1;for(let{feature:F,id:V,index:$,sourceLayerIndex:X}of l){let ee=this.layers[0]._featureFilter.needGeometry,se=y1(F,ee);if(!this.layers[0]._featureFilter.filter(new gi(this.zoom),se,m))continue;let he=C?T.evaluate(se,{},m):void 0,Ee={id:V,properties:F.properties,type:F.type,sourceLayerIndex:X,index:$,geometry:ee?se.geometry:v1(F),patterns:{},sortKey:he};S.push(Ee)}C&&S.sort((F,V)=>F.sortKey-V.sortKey);for(let F of S){let{geometry:V,index:$,sourceLayerIndex:X}=F,ee=l[$].feature;this.addFeature(F,V,$,m,j),p.featureIndex.insert(ee,V,$,X,this.index)}}update(l,p,m){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(l,p,this.stateDependentLayers,m)}isEmpty(){return this.layoutVertexArray.length===0}uploadPending(){return!this.uploaded||this.programConfigurations.needsUpload}upload(l){this.uploaded||(this.layoutVertexBuffer=l.createVertexBuffer(this.layoutVertexArray,ws),this.indexBuffer=l.createIndexBuffer(this.indexArray)),this.programConfigurations.upload(l),this.uploaded=!0}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy())}addFeature(l,p,m,_,S=1){let T;switch(S){case 1:T=[0,7];break;case 3:T=[0,2,5,7];break;case 5:T=[0,1,3,4,6,7];break;case 7:T=[0,1,2,3,4,5,6,7];break;default:throw new Error(`Invalid circle bucket granularity: ${S}; valid values are 1, 3, 5, 7.`)}let C=T.length;for(let N of p)for(let j of N){let F=j.x,V=j.y;if(F<0||F>=tt||V<0||V>=tt)continue;let $=this.segments.prepareSegment(C*C,this.layoutVertexArray,this.indexArray,l.sortKey),X=$.vertexLength;for(let ee=0;ee<C;ee++)for(let se=0;se<C;se++)Hdt(this.layoutVertexArray,F,V,T[se],T[ee]);for(let ee=0;ee<C-1;ee++)for(let se=0;se<C-1;se++){let he=X+ee*C+se,Ee=X+(ee+1)*C+se;this.indexArray.emplaceBack(he,Ee+1,he+1),this.indexArray.emplaceBack(he,Ee,Ee+1)}$.vertexLength+=C*C,$.primitiveLength+=(C-1)*(C-1)*2}this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,l,m,{},_)}}function spe(f,l){for(let p=0;p<f.length;p++)if(_1(l,f[p]))return!0;for(let p=0;p<l.length;p++)if(_1(f,l[p]))return!0;return!!jU(f,l)}function Wdt(f,l,p){return!!_1(f,l)||!!qU(l,f,p)}function lpe(f,l){if(f.length===1)return cpe(l,f[0]);for(let p=0;p<l.length;p++){let m=l[p];for(let _=0;_<m.length;_++)if(_1(f,m[_]))return!0}for(let p=0;p<f.length;p++)if(cpe(l,f[p]))return!0;for(let p=0;p<l.length;p++)if(jU(f,l[p]))return!0;return!1}function $dt(f,l,p){if(f.length>1){if(jU(f,l))return!0;for(let m=0;m<l.length;m++)if(qU(l[m],f,p))return!0}for(let m=0;m<f.length;m++)if(qU(f[m],l,p))return!0;return!1}function jU(f,l){if(f.length===0||l.length===0)return!1;for(let p=0;p<f.length-1;p++){let m=f[p],_=f[p+1];for(let S=0;S<l.length-1;S++)if(Zdt(m,_,l[S],l[S+1]))return!0}return!1}function Zdt(f,l,p,m){return St(f,p,m)!==St(l,p,m)&&St(f,l,p)!==St(f,l,m)}function qU(f,l,p){let m=p*p;if(l.length===1)return f.distSqr(l[0])<m;for(let _=1;_<l.length;_++)if(upe(f,l[_-1],l[_])<m)return!0;return!1}function upe(f,l,p){let m=l.distSqr(p);if(m===0)return f.distSqr(l);let _=((f.x-l.x)*(p.x-l.x)+(f.y-l.y)*(p.y-l.y))/m;return f.distSqr(_<0?l:_>1?p:p.sub(l)._mult(_)._add(l))}function cpe(f,l){for(let p=0;p<f.length;p++)if(_1(f[p],l))return!0;return!1}function _1(f,l){let p=!1;for(let m=0,_=f.length-1;m<f.length;_=m++){let S=f[m],T=f[_];S.y>l.y!=T.y>l.y&&l.x<(T.x-S.x)*(l.y-S.y)/(T.y-S.y)+S.x&&(p=!p)}return p}function Ydt(f,l,p){let m=p[0],_=p[2];if(f.x<m.x&&l.x<m.x||f.x>_.x&&l.x>_.x||f.y<m.y&&l.y<m.y||f.y>_.y&&l.y>_.y)return!1;let S=St(f,l,p[0]);return S!==St(f,l,p[1])||S!==St(f,l,p[2])||S!==St(f,l,p[3])}function KT(f,l,p){let m=l.paint.get(f).value;return m.kind==="constant"?m.value:p.programConfigurations.get(l.id).getMaxValue(f)}function HN(f){return Math.sqrt(f[0]*f[0]+f[1]*f[1])}function WN(f,l,p,m,_){if(!l[0]&&!l[1])return f;let S=x.convert(l)._mult(_);p==="viewport"&&S._rotate(-m);let T=[];for(let C=0;C<f.length;C++)T.push(f[C].sub(S));return T}let ppe,fpe;cr("CircleBucket",RU,{omit:["layers"]});var Kdt={get paint(){return fpe=fpe||new Ea({"circle-radius":new $r(ne.paint_circle["circle-radius"]),"circle-color":new $r(ne.paint_circle["circle-color"]),"circle-blur":new $r(ne.paint_circle["circle-blur"]),"circle-opacity":new $r(ne.paint_circle["circle-opacity"]),"circle-translate":new Sr(ne.paint_circle["circle-translate"]),"circle-translate-anchor":new Sr(ne.paint_circle["circle-translate-anchor"]),"circle-pitch-scale":new Sr(ne.paint_circle["circle-pitch-scale"]),"circle-pitch-alignment":new Sr(ne.paint_circle["circle-pitch-alignment"]),"circle-stroke-width":new $r(ne.paint_circle["circle-stroke-width"]),"circle-stroke-color":new $r(ne.paint_circle["circle-stroke-color"]),"circle-stroke-opacity":new $r(ne.paint_circle["circle-stroke-opacity"])})},get layout(){return ppe=ppe||new Ea({"circle-sort-key":new $r(ne.layout_circle["circle-sort-key"])})}};class Xdt extends nc{constructor(l){super(l,Kdt)}createBucket(l){return new RU(l)}queryRadius(l){let p=l;return KT("circle-radius",this,p)+KT("circle-stroke-width",this,p)+HN(this.paint.get("circle-translate"))}queryIntersectsFeature({queryGeometry:l,feature:p,featureState:m,geometry:_,transform:S,pixelsToTileUnits:T,unwrappedTileID:C,getElevation:N}){let j=WN(l,this.paint.get("circle-translate"),this.paint.get("circle-translate-anchor"),-S.bearingInRadians,T),F=this.paint.get("circle-radius").evaluate(p,m)+this.paint.get("circle-stroke-width").evaluate(p,m),V=this.paint.get("circle-pitch-alignment")==="map",$=V?j:function(ee,se,he,Ee){return ee.map(Ve=>dpe(Ve,se,he,Ee))}(j,S,C,N),X=V?F*T:F;for(let ee of _)for(let se of ee){let he=V?se:dpe(se,S,C,N),Ee=X,Ve=S.projectTileCoordinates(se.x,se.y,C,N).signedDistanceFromCamera;if(this.paint.get("circle-pitch-scale")==="viewport"&&this.paint.get("circle-pitch-alignment")==="map"?Ee*=Ve/S.cameraToCenterDistance:this.paint.get("circle-pitch-scale")==="map"&&this.paint.get("circle-pitch-alignment")==="viewport"&&(Ee*=S.cameraToCenterDistance/Ve),Wdt($,he,Ee))return!0}return!1}}function dpe(f,l,p,m){let _=l.projectTileCoordinates(f.x,f.y,p,m).point;return new x((.5*_.x+.5)*l.width,(.5*-_.y+.5)*l.height)}class hpe extends RU{}let mpe;cr("HeatmapBucket",hpe,{omit:["layers"]});var Qdt={get paint(){return mpe=mpe||new Ea({"heatmap-radius":new $r(ne.paint_heatmap["heatmap-radius"]),"heatmap-weight":new $r(ne.paint_heatmap["heatmap-weight"]),"heatmap-intensity":new Sr(ne.paint_heatmap["heatmap-intensity"]),"heatmap-color":new VT(ne.paint_heatmap["heatmap-color"]),"heatmap-opacity":new Sr(ne.paint_heatmap["heatmap-opacity"])})}};function zU(f,{width:l,height:p},m,_){if(_){if(_ instanceof Uint8ClampedArray)_=new Uint8Array(_.buffer);else if(_.length!==l*p*m)throw new RangeError(`mismatched image size. expected: ${_.length} but got: ${l*p*m}`)}else _=new Uint8Array(l*p*m);return f.width=l,f.height=p,f.data=_,f}function gpe(f,{width:l,height:p},m){if(l===f.width&&p===f.height)return;let _=zU({},{width:l,height:p},m);FU(f,_,{x:0,y:0},{x:0,y:0},{width:Math.min(f.width,l),height:Math.min(f.height,p)},m),f.width=l,f.height=p,f.data=_.data}function FU(f,l,p,m,_,S){if(_.width===0||_.height===0)return l;if(_.width>f.width||_.height>f.height||p.x>f.width-_.width||p.y>f.height-_.height)throw new RangeError("out of range source coordinates for image copy");if(_.width>l.width||_.height>l.height||m.x>l.width-_.width||m.y>l.height-_.height)throw new RangeError("out of range destination coordinates for image copy");let T=f.data,C=l.data;if(T===C)throw new Error("srcData equals dstData, so image is already copied");for(let N=0;N<_.height;N++){let j=((p.y+N)*f.width+p.x)*S,F=((m.y+N)*l.width+m.x)*S;for(let V=0;V<_.width*S;V++)C[F+V]=T[j+V]}return l}class XT{constructor(l,p){zU(this,l,1,p)}resize(l){gpe(this,l,1)}clone(){return new XT({width:this.width,height:this.height},new Uint8Array(this.data))}static copy(l,p,m,_,S){FU(l,p,m,_,S,1)}}class $c{constructor(l,p){zU(this,l,4,p)}resize(l){gpe(this,l,4)}replace(l,p){p?this.data.set(l):this.data=l instanceof Uint8ClampedArray?new Uint8Array(l.buffer):l}clone(){return new $c({width:this.width,height:this.height},new Uint8Array(this.data))}static copy(l,p,m,_,S){FU(l,p,m,_,S,4)}}function vpe(f){let l={},p=f.resolution||256,m=f.clips?f.clips.length:1,_=f.image||new $c({width:p,height:m});if(Math.log(p)/Math.LN2%1!=0)throw new Error(`width is not a power of 2 - ${p}`);let S=(T,C,N)=>{l[f.evaluationKey]=N;let j=f.expression.evaluate(l);_.data[T+C+0]=Math.floor(255*j.r/j.a),_.data[T+C+1]=Math.floor(255*j.g/j.a),_.data[T+C+2]=Math.floor(255*j.b/j.a),_.data[T+C+3]=Math.floor(255*j.a)};if(f.clips)for(let T=0,C=0;T<m;++T,C+=4*p)for(let N=0,j=0;N<p;N++,j+=4){let F=N/(p-1),{start:V,end:$}=f.clips[T];S(C,j,V*(1-F)+$*F)}else for(let T=0,C=0;T<p;T++,C+=4)S(0,C,T/(p-1));return _}cr("AlphaImage",XT),cr("RGBAImage",$c);let UU="big-fb";class Jdt extends nc{createBucket(l){return new hpe(l)}constructor(l){super(l,Qdt),this.heatmapFbos=new Map,this._updateColorRamp()}_handleSpecialPaintPropertyUpdate(l){l==="heatmap-color"&&this._updateColorRamp()}_updateColorRamp(){this.colorRamp=vpe({expression:this._transitionablePaint._values["heatmap-color"].value.expression,evaluationKey:"heatmapDensity",image:this.colorRamp}),this.colorRampTexture=null}resize(){this.heatmapFbos.has(UU)&&this.heatmapFbos.delete(UU)}queryRadius(){return 0}queryIntersectsFeature(){return!1}hasOffscreenPass(){return this.paint.get("heatmap-opacity")!==0&&this.visibility!=="none"}}let ype;var eht={get paint(){return ype=ype||new Ea({"hillshade-illumination-direction":new Sr(ne.paint_hillshade["hillshade-illumination-direction"]),"hillshade-illumination-altitude":new Sr(ne.paint_hillshade["hillshade-illumination-altitude"]),"hillshade-illumination-anchor":new Sr(ne.paint_hillshade["hillshade-illumination-anchor"]),"hillshade-exaggeration":new Sr(ne.paint_hillshade["hillshade-exaggeration"]),"hillshade-shadow-color":new Sr(ne.paint_hillshade["hillshade-shadow-color"]),"hillshade-highlight-color":new Sr(ne.paint_hillshade["hillshade-highlight-color"]),"hillshade-accent-color":new Sr(ne.paint_hillshade["hillshade-accent-color"]),"hillshade-method":new Sr(ne.paint_hillshade["hillshade-method"])})}};class tht extends nc{constructor(l){super(l,eht),this.recalculate({zoom:0,zoomHistory:{}},void 0)}getIlluminationProperties(){let l=this.paint.get("hillshade-illumination-direction").values,p=this.paint.get("hillshade-illumination-altitude").values,m=this.paint.get("hillshade-highlight-color").values,_=this.paint.get("hillshade-shadow-color").values,S=Math.max(l.length,p.length,m.length,_.length);l=l.concat(Array(S-l.length).fill(l.at(-1))),p=p.concat(Array(S-p.length).fill(p.at(-1))),m=m.concat(Array(S-m.length).fill(m.at(-1))),_=_.concat(Array(S-_.length).fill(_.at(-1)));let T=p.map(qr);return{directionRadians:l.map(qr),altitudeRadians:T,shadowColor:_,highlightColor:m}}hasOffscreenPass(){return this.paint.get("hillshade-exaggeration")!==0&&this.visibility!=="none"}}let rht=Ri([{name:"a_pos",components:2,type:"Int16"}],4),{members:nht}=rht;function BU(f,l,p){let m=p.patternDependencies,_=!1;for(let S of l){let T=S.paint.get(`${f}-pattern`);T.isConstant()||(_=!0);let C=T.constantOr(null);C&&(_=!0,m[C.to]=!0,m[C.from]=!0)}return _}function VU(f,l,p,m,_){let S=_.patternDependencies;for(let T of l){let C=T.paint.get(`${f}-pattern`).value;if(C.kind!=="constant"){let N=C.evaluate({zoom:m-1},p,{},_.availableImages),j=C.evaluate({zoom:m},p,{},_.availableImages),F=C.evaluate({zoom:m+1},p,{},_.availableImages);N=N&&N.name?N.name:N,j=j&&j.name?j.name:j,F=F&&F.name?F.name:F,S[N]=!0,S[j]=!0,S[F]=!0,p.patterns[T.id]={min:N,mid:j,max:F}}}return p}function _pe(f,l,p,m,_){let S;if(_===function(T,C,N,j){let F=0;for(let V=C,$=N-j;V<N;V+=j)F+=(T[$]-T[V])*(T[V+1]+T[$+1]),$=V;return F}(f,l,p,m)>0)for(let T=l;T<p;T+=m)S=Epe(T/m|0,f[T],f[T+1],S);else for(let T=p-m;T>=l;T-=m)S=Epe(T/m|0,f[T],f[T+1],S);return S&&Cx(S,S.next)&&(tI(S),S=S.next),S}function b1(f,l){if(!f)return f;l||(l=f);let p,m=f;do if(p=!1,m.steiner||!Cx(m,m.next)&&ga(m.prev,m,m.next)!==0)m=m.next;else{if(tI(m),m=l=m.prev,m===m.next)break;p=!0}while(p||m!==l);return l}function QT(f,l,p,m,_,S,T){if(!f)return;!T&&S&&function(N,j,F,V){let $=N;do $.z===0&&($.z=GU($.x,$.y,j,F,V)),$.prevZ=$.prev,$.nextZ=$.next,$=$.next;while($!==N);$.prevZ.nextZ=null,$.prevZ=null,function(X){let ee,se=1;do{let he,Ee=X;X=null;let Ve=null;for(ee=0;Ee;){ee++;let Oe=Ee,K=0;for(let Ne=0;Ne<se&&(K++,Oe=Oe.nextZ,Oe);Ne++);let pe=se;for(;K>0||pe>0&&Oe;)K!==0&&(pe===0||!Oe||Ee.z<=Oe.z)?(he=Ee,Ee=Ee.nextZ,K--):(he=Oe,Oe=Oe.nextZ,pe--),Ve?Ve.nextZ=he:X=he,he.prevZ=Ve,Ve=he;Ee=Oe}Ve.nextZ=null,se*=2}while(ee>1)}($)}(f,m,_,S);let C=f;for(;f.prev!==f.next;){let N=f.prev,j=f.next;if(S?iht(f,m,_,S):oht(f))l.push(N.i,f.i,j.i),tI(f),f=j.next,C=j.next;else if((f=j)===C){T?T===1?QT(f=aht(b1(f),l),l,p,m,_,S,2):T===2&&sht(f,l,p,m,_,S):QT(b1(f),l,p,m,_,S,1);break}}}function oht(f){let l=f.prev,p=f,m=f.next;if(ga(l,p,m)>=0)return!1;let _=l.x,S=p.x,T=m.x,C=l.y,N=p.y,j=m.y,F=Math.min(_,S,T),V=Math.min(C,N,j),$=Math.max(_,S,T),X=Math.max(C,N,j),ee=m.next;for(;ee!==l;){if(ee.x>=F&&ee.x<=$&&ee.y>=V&&ee.y<=X&&JT(_,C,S,N,T,j,ee.x,ee.y)&&ga(ee.prev,ee,ee.next)>=0)return!1;ee=ee.next}return!0}function iht(f,l,p,m){let _=f.prev,S=f,T=f.next;if(ga(_,S,T)>=0)return!1;let C=_.x,N=S.x,j=T.x,F=_.y,V=S.y,$=T.y,X=Math.min(C,N,j),ee=Math.min(F,V,$),se=Math.max(C,N,j),he=Math.max(F,V,$),Ee=GU(X,ee,l,p,m),Ve=GU(se,he,l,p,m),Oe=f.prevZ,K=f.nextZ;for(;Oe&&Oe.z>=Ee&&K&&K.z<=Ve;){if(Oe.x>=X&&Oe.x<=se&&Oe.y>=ee&&Oe.y<=he&&Oe!==_&&Oe!==T&&JT(C,F,N,V,j,$,Oe.x,Oe.y)&&ga(Oe.prev,Oe,Oe.next)>=0||(Oe=Oe.prevZ,K.x>=X&&K.x<=se&&K.y>=ee&&K.y<=he&&K!==_&&K!==T&&JT(C,F,N,V,j,$,K.x,K.y)&&ga(K.prev,K,K.next)>=0))return!1;K=K.nextZ}for(;Oe&&Oe.z>=Ee;){if(Oe.x>=X&&Oe.x<=se&&Oe.y>=ee&&Oe.y<=he&&Oe!==_&&Oe!==T&&JT(C,F,N,V,j,$,Oe.x,Oe.y)&&ga(Oe.prev,Oe,Oe.next)>=0)return!1;Oe=Oe.prevZ}for(;K&&K.z<=Ve;){if(K.x>=X&&K.x<=se&&K.y>=ee&&K.y<=he&&K!==_&&K!==T&&JT(C,F,N,V,j,$,K.x,K.y)&&ga(K.prev,K,K.next)>=0)return!1;K=K.nextZ}return!0}function aht(f,l){let p=f;do{let m=p.prev,_=p.next.next;!Cx(m,_)&&xpe(m,p,p.next,_)&&eI(m,_)&&eI(_,m)&&(l.push(m.i,p.i,_.i),tI(p),tI(p.next),p=f=_),p=p.next}while(p!==f);return b1(p)}function sht(f,l,p,m,_,S){let T=f;do{let C=T.next.next;for(;C!==T.prev;){if(T.i!==C.i&&fht(T,C)){let N=wpe(T,C);return T=b1(T,T.next),N=b1(N,N.next),QT(T,l,p,m,_,S,0),void QT(N,l,p,m,_,S,0)}C=C.next}T=T.next}while(T!==f)}function lht(f,l){let p=f.x-l.x;return p===0&&(p=f.y-l.y,p===0)&&(p=(f.next.y-f.y)/(f.next.x-f.x)-(l.next.y-l.y)/(l.next.x-l.x)),p}function uht(f,l){let p=function(_,S){let T=S,C=_.x,N=_.y,j,F=-1/0;if(Cx(_,T))return T;do{if(Cx(_,T.next))return T.next;if(N<=T.y&&N>=T.next.y&&T.next.y!==T.y){let se=T.x+(N-T.y)*(T.next.x-T.x)/(T.next.y-T.y);if(se<=C&&se>F&&(F=se,j=T.x<T.next.x?T:T.next,se===C))return j}T=T.next}while(T!==S);if(!j)return null;let V=j,$=j.x,X=j.y,ee=1/0;T=j;do{if(C>=T.x&&T.x>=$&&C!==T.x&&bpe(N<X?C:F,N,$,X,N<X?F:C,N,T.x,T.y)){let se=Math.abs(N-T.y)/(C-T.x);eI(T,_)&&(se<ee||se===ee&&(T.x>j.x||T.x===j.x&&cht(j,T)))&&(j=T,ee=se)}T=T.next}while(T!==V);return j}(f,l);if(!p)return l;let m=wpe(p,f);return b1(m,m.next),b1(p,p.next)}function cht(f,l){return ga(f.prev,f,l.prev)<0&&ga(l.next,f,f.next)<0}function GU(f,l,p,m,_){return(f=1431655765&((f=858993459&((f=252645135&((f=16711935&((f=(f-p)*_|0)|f<<8))|f<<4))|f<<2))|f<<1))|(l=1431655765&((l=858993459&((l=252645135&((l=16711935&((l=(l-m)*_|0)|l<<8))|l<<4))|l<<2))|l<<1))<<1}function pht(f){let l=f,p=f;do(l.x<p.x||l.x===p.x&&l.y<p.y)&&(p=l),l=l.next;while(l!==f);return p}function bpe(f,l,p,m,_,S,T,C){return(_-T)*(l-C)>=(f-T)*(S-C)&&(f-T)*(m-C)>=(p-T)*(l-C)&&(p-T)*(S-C)>=(_-T)*(m-C)}function JT(f,l,p,m,_,S,T,C){return!(f===T&&l===C)&&bpe(f,l,p,m,_,S,T,C)}function fht(f,l){return f.next.i!==l.i&&f.prev.i!==l.i&&!function(p,m){let _=p;do{if(_.i!==p.i&&_.next.i!==p.i&&_.i!==m.i&&_.next.i!==m.i&&xpe(_,_.next,p,m))return!0;_=_.next}while(_!==p);return!1}(f,l)&&(eI(f,l)&&eI(l,f)&&function(p,m){let _=p,S=!1,T=(p.x+m.x)/2,C=(p.y+m.y)/2;do _.y>C!=_.next.y>C&&_.next.y!==_.y&&T<(_.next.x-_.x)*(C-_.y)/(_.next.y-_.y)+_.x&&(S=!S),_=_.next;while(_!==p);return S}(f,l)&&(ga(f.prev,f,l.prev)||ga(f,l.prev,l))||Cx(f,l)&&ga(f.prev,f,f.next)>0&&ga(l.prev,l,l.next)>0)}function ga(f,l,p){return(l.y-f.y)*(p.x-l.x)-(l.x-f.x)*(p.y-l.y)}function Cx(f,l){return f.x===l.x&&f.y===l.y}function xpe(f,l,p,m){let _=ZN(ga(f,l,p)),S=ZN(ga(f,l,m)),T=ZN(ga(p,m,f)),C=ZN(ga(p,m,l));return _!==S&&T!==C||!(_!==0||!$N(f,p,l))||!(S!==0||!$N(f,m,l))||!(T!==0||!$N(p,f,m))||!(C!==0||!$N(p,l,m))}function $N(f,l,p){return l.x<=Math.max(f.x,p.x)&&l.x>=Math.min(f.x,p.x)&&l.y<=Math.max(f.y,p.y)&&l.y>=Math.min(f.y,p.y)}function ZN(f){return f>0?1:f<0?-1:0}function eI(f,l){return ga(f.prev,f,f.next)<0?ga(f,l,f.next)>=0&&ga(f,f.prev,l)>=0:ga(f,l,f.prev)<0||ga(f,f.next,l)<0}function wpe(f,l){let p=HU(f.i,f.x,f.y),m=HU(l.i,l.x,l.y),_=f.next,S=l.prev;return f.next=l,l.prev=f,p.next=_,_.prev=p,m.next=p,p.prev=m,S.next=m,m.prev=S,m}function Epe(f,l,p,m){let _=HU(f,l,p);return m?(_.next=m.next,_.prev=m,m.next.prev=_,m.next=_):(_.prev=_,_.next=_),_}function tI(f){f.next.prev=f.prev,f.prev.next=f.next,f.prevZ&&(f.prevZ.nextZ=f.nextZ),f.nextZ&&(f.nextZ.prevZ=f.prevZ)}function HU(f,l,p){return{i:f,x:l,y:p,prev:null,next:null,z:0,prevZ:null,nextZ:null,steiner:!1}}class Ax{constructor(l,p){if(p>l)throw new Error("Min granularity must not be greater than base granularity.");this._baseZoomGranularity=l,this._minGranularity=p}getGranularityForZoomLevel(l){return Math.max(Math.floor(this._baseZoomGranularity/(1<<l)),this._minGranularity,1)}}class YN{constructor(l){this.fill=l.fill,this.line=l.line,this.tile=l.tile,this.stencil=l.stencil,this.circle=l.circle}}YN.noSubdivision=new YN({fill:new Ax(0,0),line:new Ax(0,0),tile:new Ax(0,0),stencil:new Ax(0,0),circle:1}),cr("SubdivisionGranularityExpression",Ax),cr("SubdivisionGranularitySetting",YN);let Ox=-32768,rI=32767;class dht{constructor(l,p){this._vertexBuffer=[],this._vertexDictionary=new Map,this._used=!1,this._granularity=l,this._granularityCellSize=tt/l,this._canonical=p}_getKey(l,p){return(l+=32768)<<16|(p+=32768)<<0}_vertexToIndex(l,p){if(l<-32768||p<-32768||l>32767||p>32767)throw new Error("Vertex coordinates are out of signed 16 bit integer range.");let m=0|Math.round(l),_=0|Math.round(p),S=this._getKey(m,_);if(this._vertexDictionary.has(S))return this._vertexDictionary.get(S);let T=this._vertexBuffer.length/2;return this._vertexDictionary.set(S,T),this._vertexBuffer.push(m,_),T}_subdivideTrianglesScanline(l){if(this._granularity<2)return function(_,S){let T=[];for(let C=0;C<S.length;C+=3){let N=S[C],j=S[C+1],F=S[C+2],V=_[2*N],$=_[2*N+1];(_[2*j]-V)*(_[2*F+1]-$)-(_[2*j+1]-$)*(_[2*F]-V)>0?(T.push(N),T.push(F),T.push(j)):(T.push(N),T.push(j),T.push(F))}return T}(this._vertexBuffer,l);let p=[],m=l.length;for(let _=0;_<m;_+=3){let S=[l[_+0],l[_+1],l[_+2]],T=[this._vertexBuffer[2*l[_+0]+0],this._vertexBuffer[2*l[_+0]+1],this._vertexBuffer[2*l[_+1]+0],this._vertexBuffer[2*l[_+1]+1],this._vertexBuffer[2*l[_+2]+0],this._vertexBuffer[2*l[_+2]+1]],C=1/0,N=1/0,j=-1/0,F=-1/0;for(let se=0;se<3;se++){let he=T[2*se],Ee=T[2*se+1];C=Math.min(C,he),j=Math.max(j,he),N=Math.min(N,Ee),F=Math.max(F,Ee)}if(C===j||N===F)continue;let V=Math.floor(C/this._granularityCellSize),$=Math.ceil(j/this._granularityCellSize),X=Math.floor(N/this._granularityCellSize),ee=Math.ceil(F/this._granularityCellSize);if(V!==$||X!==ee)for(let se=X;se<ee;se++){let he=this._scanlineGenerateVertexRingForCellRow(se,T,S);hht(this._vertexBuffer,he,p)}else p.push(...S)}return p}_scanlineGenerateVertexRingForCellRow(l,p,m){let _=l*this._granularityCellSize,S=_+this._granularityCellSize,T=[];for(let C=0;C<3;C++){let N=p[2*C],j=p[2*C+1],F=p[2*(C+1)%6],V=p[(2*(C+1)+1)%6],$=p[2*(C+2)%6],X=p[(2*(C+2)+1)%6],ee=F-N,se=V-j,he=ee===0,Ee=se===0,Ve=(_-j)/se,Oe=(S-j)/se,K=Math.min(Ve,Oe),pe=Math.max(Ve,Oe);if(!Ee&&(K>=1||pe<=0)||Ee&&(j<_||j>S)){V>=_&&V<=S&&T.push(m[(C+1)%3]);continue}!Ee&&K>0&&T.push(this._vertexToIndex(N+ee*K,j+se*K));let Ne=N+ee*Math.max(K,0),ot=N+ee*Math.min(pe,1);he||this._generateIntraEdgeVertices(T,N,j,F,V,Ne,ot),!Ee&&pe<1&&T.push(this._vertexToIndex(N+ee*pe,j+se*pe)),(Ee||V>=_&&V<=S)&&T.push(m[(C+1)%3]),!Ee&&(V<=_||V>=S)&&this._generateInterEdgeVertices(T,N,j,F,V,$,X,ot,_,S)}return T}_generateIntraEdgeVertices(l,p,m,_,S,T,C){let N=_-p,j=S-m,F=j===0,V=F?Math.min(p,_):Math.min(T,C),$=F?Math.max(p,_):Math.max(T,C),X=Math.floor(V/this._granularityCellSize)+1,ee=Math.ceil($/this._granularityCellSize)-1;if(F?p<_:T<C)for(let se=X;se<=ee;se++){let he=se*this._granularityCellSize;l.push(this._vertexToIndex(he,m+j*(he-p)/N))}else for(let se=ee;se>=X;se--){let he=se*this._granularityCellSize;l.push(this._vertexToIndex(he,m+j*(he-p)/N))}}_generateInterEdgeVertices(l,p,m,_,S,T,C,N,j,F){let V=S-m,$=T-_,X=C-S,ee=(j-S)/X,se=(F-S)/X,he=Math.min(ee,se),Ee=Math.max(ee,se),Ve=_+$*he,Oe=Math.floor(Math.min(Ve,N)/this._granularityCellSize)+1,K=Math.ceil(Math.max(Ve,N)/this._granularityCellSize)-1,pe=N<Ve,Ne=X===0;if(Ne&&(C===j||C===F))return;if(Ne||he>=1||Ee<=0){let Tt=m-C,at=T+(p-T)*Math.min((j-C)/Tt,(F-C)/Tt);Oe=Math.floor(Math.min(at,N)/this._granularityCellSize)+1,K=Math.ceil(Math.max(at,N)/this._granularityCellSize)-1,pe=N<at}let ot=V>0?F:j;if(pe)for(let Tt=Oe;Tt<=K;Tt++)l.push(this._vertexToIndex(Tt*this._granularityCellSize,ot));else for(let Tt=K;Tt>=Oe;Tt--)l.push(this._vertexToIndex(Tt*this._granularityCellSize,ot))}_generateOutline(l){let p=[];for(let m of l){let _=x1(m,this._granularity,!0),S=this._pointArrayToIndices(_),T=[];for(let C=1;C<S.length;C++)T.push(S[C-1]),T.push(S[C]);p.push(T)}return p}_handlePoles(l){let p=!1,m=!1;this._canonical&&(this._canonical.y===0&&(p=!0),this._canonical.y===(1<<this._canonical.z)-1&&(m=!0)),(p||m)&&this._fillPoles(l,p,m)}_ensureNoPoleVertices(){let l=this._vertexBuffer;for(let p=0;p<l.length;p+=2){let m=l[p+1];m===Ox&&(l[p+1]=-32767),m===rI&&(l[p+1]=32766)}}_generatePoleQuad(l,p,m,_,S,T){_>S!=(T===Ox)?(l.push(p),l.push(m),l.push(this._vertexToIndex(_,T)),l.push(m),l.push(this._vertexToIndex(S,T)),l.push(this._vertexToIndex(_,T))):(l.push(m),l.push(p),l.push(this._vertexToIndex(_,T)),l.push(this._vertexToIndex(S,T)),l.push(m),l.push(this._vertexToIndex(_,T)))}_fillPoles(l,p,m){let _=this._vertexBuffer,S=tt,T=l.length;for(let C=2;C<T;C+=3){let N=l[C-2],j=l[C-1],F=l[C],V=_[2*N],$=_[2*N+1],X=_[2*j],ee=_[2*j+1],se=_[2*F],he=_[2*F+1];p&&($===0&&ee===0&&this._generatePoleQuad(l,N,j,V,X,Ox),ee===0&&he===0&&this._generatePoleQuad(l,j,F,X,se,Ox),he===0&&$===0&&this._generatePoleQuad(l,F,N,se,V,Ox)),m&&($===S&&ee===S&&this._generatePoleQuad(l,N,j,V,X,rI),ee===S&&he===S&&this._generatePoleQuad(l,j,F,X,se,rI),he===S&&$===S&&this._generatePoleQuad(l,F,N,se,V,rI))}}_initializeVertices(l){for(let p=0;p<l.length;p+=2)this._vertexToIndex(l[p],l[p+1])}subdividePolygonInternal(l,p){if(this._used)throw new Error("Subdivision: multiple use not allowed.");this._used=!0;let{flattened:m,holeIndices:_}=function(C){let N=[],j=[];for(let F of C)if(F.length!==0){F!==C[0]&&N.push(j.length/2);for(let V=0;V<F.length;V++)j.push(F[V].x),j.push(F[V].y)}return{flattened:j,holeIndices:N}}(l),S;this._initializeVertices(m);try{let C=function(j,F,V=2){let $=F&&F.length,X=$?F[0]*V:j.length,ee=_pe(j,0,X,V,!0),se=[];if(!ee||ee.next===ee.prev)return se;let he,Ee,Ve;if($&&(ee=function(Oe,K,pe,Ne){let ot=[];for(let Tt=0,at=K.length;Tt<at;Tt++){let dt=_pe(Oe,K[Tt]*Ne,Tt<at-1?K[Tt+1]*Ne:Oe.length,Ne,!1);dt===dt.next&&(dt.steiner=!0),ot.push(pht(dt))}ot.sort(lht);for(let Tt=0;Tt<ot.length;Tt++)pe=uht(ot[Tt],pe);return pe}(j,F,ee,V)),j.length>80*V){he=1/0,Ee=1/0;let Oe=-1/0,K=-1/0;for(let pe=V;pe<X;pe+=V){let Ne=j[pe],ot=j[pe+1];Ne<he&&(he=Ne),ot<Ee&&(Ee=ot),Ne>Oe&&(Oe=Ne),ot>K&&(K=ot)}Ve=Math.max(Oe-he,K-Ee),Ve=Ve!==0?32767/Ve:0}return QT(ee,se,V,he,Ee,Ve,0),se}(m,_),N=this._convertIndices(m,C);S=this._subdivideTrianglesScanline(N)}catch(C){console.error(C)}let T=[];return p&&(T=this._generateOutline(l)),this._ensureNoPoleVertices(),this._handlePoles(S),{verticesFlattened:this._vertexBuffer,indicesTriangles:S,indicesLineList:T}}_convertIndices(l,p){let m=[];for(let _=0;_<p.length;_++)m.push(this._vertexToIndex(l[2*p[_]],l[2*p[_]+1]));return m}_pointArrayToIndices(l){let p=[];for(let m=0;m<l.length;m++){let _=l[m];p.push(this._vertexToIndex(_.x,_.y))}return p}}function Spe(f,l,p,m=!0){return new dht(p,l).subdividePolygonInternal(f,m)}function x1(f,l,p=!1){if(!f||f.length<1)return[];if(f.length<2)return[];let m=f[0],_=f[f.length-1],S=p&&(m.x!==_.x||m.y!==_.y);if(l<2)return S?[...f,f[0]]:[...f];let T=Math.floor(tt/l),C=[];C.push(new x(f[0].x,f[0].y));let N=f.length,j=S?N:N-1;for(let F=0;F<j;F++){let V=f[F],$=F<N-1?f[F+1]:f[0],X=V.x,ee=V.y,se=$.x,he=$.y,Ee=X!==se,Ve=ee!==he;if(!Ee&&!Ve)continue;let Oe=se-X,K=he-ee,pe=Math.abs(Oe),Ne=Math.abs(K),ot=X,Tt=ee;for(;;){let dt=Oe>0?(Math.floor(ot/T)+1)*T:(Math.ceil(ot/T)-1)*T,kt=K>0?(Math.floor(Tt/T)+1)*T:(Math.ceil(Tt/T)-1)*T,It=Math.abs(ot-dt),Ut=Math.abs(Tt-kt),vt=Math.abs(ot-se),hr=Math.abs(Tt-he),Br=Ee?It/pe:Number.POSITIVE_INFINITY,jr=Ve?Ut/Ne:Number.POSITIVE_INFINITY;if((vt<=It||!Ee)&&(hr<=Ut||!Ve))break;if(Br<jr&&Ee||!Ve){ot=dt,Tt+=K*Br;let xr=new x(ot,Math.round(Tt));C[C.length-1].x===xr.x&&C[C.length-1].y===xr.y||C.push(xr)}else{ot+=Oe*jr,Tt=kt;let xr=new x(Math.round(ot),Tt);C[C.length-1].x===xr.x&&C[C.length-1].y===xr.y||C.push(xr)}}let at=new x(se,he);C[C.length-1].x===at.x&&C[C.length-1].y===at.y||C.push(at)}return C}function hht(f,l,p){if(l.length===0)throw new Error("Subdivision vertex ring is empty.");let m=0,_=f[2*l[0]];for(let N=1;N<l.length;N++){let j=f[2*l[N]];j<_&&(_=j,m=N)}let S=l.length,T=m,C=(T+1)%S;for(;;){let N=T-1>=0?T-1:S-1,j=(C+1)%S,F=f[2*l[N]],V=f[2*l[j]],$=f[2*l[T]],X=f[2*l[T]+1],ee=f[2*l[C]+1],se=!1;if(F<V)se=!0;else if(F>V)se=!1;else{let he=ee-X,Ee=-(f[2*l[C]]-$),Ve=X<ee?1:-1;((F-$)*he+(f[2*l[N]+1]-X)*Ee)*Ve>((V-$)*he+(f[2*l[j]+1]-X)*Ee)*Ve&&(se=!0)}if(se){let he=l[N],Ee=l[T],Ve=l[C];he!==Ee&&he!==Ve&&Ee!==Ve&&p.push(Ve,Ee,he),T--,T<0&&(T=S-1)}else{let he=l[j],Ee=l[T],Ve=l[C];he!==Ee&&he!==Ve&&Ee!==Ve&&p.push(Ve,Ee,he),C++,C>=S&&(C=0)}if(N===j)break}}function Tpe(f,l,p,m,_,S,T,C,N){let j=_.length/2,F=T&&C&&N;if(j<So.MAX_VERTEX_ARRAY_LENGTH){let V=l.prepareSegment(j,p,m),$=V.vertexLength;for(let se=0;se<S.length;se+=3)m.emplaceBack($+S[se],$+S[se+1],$+S[se+2]);let X,ee;V.vertexLength+=j,V.primitiveLength+=S.length/3,F&&(ee=T.prepareSegment(j,p,C),X=ee.vertexLength,ee.vertexLength+=j);for(let se=0;se<_.length;se+=2)f(_[se],_[se+1]);if(F)for(let se=0;se<N.length;se++){let he=N[se];for(let Ee=1;Ee<he.length;Ee+=2)C.emplaceBack(X+he[Ee-1],X+he[Ee]);ee.primitiveLength+=he.length/2}}else(function(V,$,X,ee,se,he){let Ee=[];for(let Ne=0;Ne<ee.length/2;Ne++)Ee.push(-1);let Ve={count:0},Oe=0,K=V.getOrCreateLatestSegment($,X),pe=K.vertexLength;for(let Ne=2;Ne<se.length;Ne+=3){let ot=se[Ne-2],Tt=se[Ne-1],at=se[Ne],dt=Ee[ot]<Oe,kt=Ee[Tt]<Oe,It=Ee[at]<Oe;K.vertexLength+((dt?1:0)+(kt?1:0)+(It?1:0))>So.MAX_VERTEX_ARRAY_LENGTH&&(K=V.createNewSegment($,X),Oe=Ve.count,dt=!0,kt=!0,It=!0,pe=0);let Ut=nI(Ee,ee,he,Ve,ot,dt,K),vt=nI(Ee,ee,he,Ve,Tt,kt,K),hr=nI(Ee,ee,he,Ve,at,It,K);X.emplaceBack(pe+Ut-Oe,pe+vt-Oe,pe+hr-Oe),K.primitiveLength++}})(l,p,m,_,S,f),F&&function(V,$,X,ee,se,he){let Ee=[];for(let Ne=0;Ne<ee.length/2;Ne++)Ee.push(-1);let Ve={count:0},Oe=0,K=V.getOrCreateLatestSegment($,X),pe=K.vertexLength;for(let Ne=0;Ne<se.length;Ne++){let ot=se[Ne];for(let Tt=1;Tt<se[Ne].length;Tt+=2){let at=ot[Tt-1],dt=ot[Tt],kt=Ee[at]<Oe,It=Ee[dt]<Oe;K.vertexLength+((kt?1:0)+(It?1:0))>So.MAX_VERTEX_ARRAY_LENGTH&&(K=V.createNewSegment($,X),Oe=Ve.count,kt=!0,It=!0,pe=0);let Ut=nI(Ee,ee,he,Ve,at,kt,K),vt=nI(Ee,ee,he,Ve,dt,It,K);X.emplaceBack(pe+Ut-Oe,pe+vt-Oe),K.primitiveLength++}}}(T,p,C,_,N,f),l.forceNewSegmentOnNextPrepare(),T==null||T.forceNewSegmentOnNextPrepare()}function nI(f,l,p,m,_,S,T){if(S){let C=m.count;return p(l[2*_],l[2*_+1]),f[_]=m.count,m.count++,T.vertexLength++,C}return f[_]}class WU{constructor(l){this.zoom=l.zoom,this.overscaling=l.overscaling,this.layers=l.layers,this.layerIds=this.layers.map(p=>p.id),this.index=l.index,this.hasPattern=!1,this.patternFeatures=[],this.layoutVertexArray=new Ht,this.indexArray=new Eo,this.indexArray2=new za,this.programConfigurations=new rh(l.layers,l.zoom),this.segments=new So,this.segments2=new So,this.stateDependentLayerIds=this.layers.filter(p=>p.isStateDependent()).map(p=>p.id)}populate(l,p,m){this.hasPattern=BU("fill",this.layers,p);let _=this.layers[0].layout.get("fill-sort-key"),S=!_.isConstant(),T=[];for(let{feature:C,id:N,index:j,sourceLayerIndex:F}of l){let V=this.layers[0]._featureFilter.needGeometry,$=y1(C,V);if(!this.layers[0]._featureFilter.filter(new gi(this.zoom),$,m))continue;let X=S?_.evaluate($,{},m,p.availableImages):void 0,ee={id:N,properties:C.properties,type:C.type,sourceLayerIndex:F,index:j,geometry:V?$.geometry:v1(C),patterns:{},sortKey:X};T.push(ee)}S&&T.sort((C,N)=>C.sortKey-N.sortKey);for(let C of T){let{geometry:N,index:j,sourceLayerIndex:F}=C;if(this.hasPattern){let V=VU("fill",this.layers,C,this.zoom,p);this.patternFeatures.push(V)}else this.addFeature(C,N,j,m,{},p.subdivisionGranularity);p.featureIndex.insert(l[j].feature,N,j,F,this.index)}}update(l,p,m){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(l,p,this.stateDependentLayers,m)}addFeatures(l,p,m){for(let _ of this.patternFeatures)this.addFeature(_,_.geometry,_.index,p,m,l.subdivisionGranularity)}isEmpty(){return this.layoutVertexArray.length===0}uploadPending(){return!this.uploaded||this.programConfigurations.needsUpload}upload(l){this.uploaded||(this.layoutVertexBuffer=l.createVertexBuffer(this.layoutVertexArray,nht),this.indexBuffer=l.createIndexBuffer(this.indexArray),this.indexBuffer2=l.createIndexBuffer(this.indexArray2)),this.programConfigurations.upload(l),this.uploaded=!0}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.indexBuffer2.destroy(),this.programConfigurations.destroy(),this.segments.destroy(),this.segments2.destroy())}addFeature(l,p,m,_,S,T){for(let C of Qb(p,500)){let N=Spe(C,_,T.fill.getGranularityForZoomLevel(_.z)),j=this.layoutVertexArray;Tpe((F,V)=>{j.emplaceBack(F,V)},this.segments,this.layoutVertexArray,this.indexArray,N.verticesFlattened,N.indicesTriangles,this.segments2,this.indexArray2,N.indicesLineList)}this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,l,m,S,_)}}let Ipe,Mpe;cr("FillBucket",WU,{omit:["layers","patternFeatures"]});var mht={get paint(){return Mpe=Mpe||new Ea({"fill-antialias":new Sr(ne.paint_fill["fill-antialias"]),"fill-opacity":new $r(ne.paint_fill["fill-opacity"]),"fill-color":new $r(ne.paint_fill["fill-color"]),"fill-outline-color":new $r(ne.paint_fill["fill-outline-color"]),"fill-translate":new Sr(ne.paint_fill["fill-translate"]),"fill-translate-anchor":new Sr(ne.paint_fill["fill-translate-anchor"]),"fill-pattern":new f1(ne.paint_fill["fill-pattern"])})},get layout(){return Ipe=Ipe||new Ea({"fill-sort-key":new $r(ne.layout_fill["fill-sort-key"])})}};class ght extends nc{constructor(l){super(l,mht)}recalculate(l,p){super.recalculate(l,p);let m=this.paint._values["fill-outline-color"];m.value.kind==="constant"&&m.value.value===void 0&&(this.paint._values["fill-outline-color"]=this.paint._values["fill-color"])}createBucket(l){return new WU(l)}queryRadius(){return HN(this.paint.get("fill-translate"))}queryIntersectsFeature({queryGeometry:l,geometry:p,transform:m,pixelsToTileUnits:_}){return lpe(WN(l,this.paint.get("fill-translate"),this.paint.get("fill-translate-anchor"),-m.bearingInRadians,_),p)}isTileClipped(){return!0}}let vht=Ri([{name:"a_pos",components:2,type:"Int16"},{name:"a_normal_ed",components:4,type:"Int16"}],4),yht=Ri([{name:"a_centroid",components:2,type:"Int16"}],4),{members:_ht}=vht;var $U,Cpe,ZU,Ape,YU,Ope,Ppe,KN={};function Npe(){if(Cpe)return $U;Cpe=1;var f=h();function l(_,S,T,C,N){this.properties={},this.extent=T,this.type=0,this._pbf=_,this._geometry=-1,this._keys=C,this._values=N,_.readFields(p,this,S)}function p(_,S,T){_==1?S.id=T.readVarint():_==2?function(C,N){for(var j=C.readVarint()+C.pos;C.pos<j;){var F=N._keys[C.readVarint()],V=N._values[C.readVarint()];N.properties[F]=V}}(T,S):_==3?S.type=T.readVarint():_==4&&(S._geometry=T.pos)}function m(_){for(var S,T,C=0,N=0,j=_.length,F=j-1;N<j;F=N++)C+=((T=_[F]).x-(S=_[N]).x)*(S.y+T.y);return C}return $U=l,l.types=["Unknown","Point","LineString","Polygon"],l.prototype.loadGeometry=function(){var _=this._pbf;_.pos=this._geometry;for(var S,T=_.readVarint()+_.pos,C=1,N=0,j=0,F=0,V=[];_.pos<T;){if(N<=0){var $=_.readVarint();C=7&$,N=$>>3}if(N--,C===1||C===2)j+=_.readSVarint(),F+=_.readSVarint(),C===1&&(S&&V.push(S),S=[]),S.push(new f(j,F));else{if(C!==7)throw new Error("unknown command "+C);S&&S.push(S[0].clone())}}return S&&V.push(S),V},l.prototype.bbox=function(){var _=this._pbf;_.pos=this._geometry;for(var S=_.readVarint()+_.pos,T=1,C=0,N=0,j=0,F=1/0,V=-1/0,$=1/0,X=-1/0;_.pos<S;){if(C<=0){var ee=_.readVarint();T=7&ee,C=ee>>3}if(C--,T===1||T===2)(N+=_.readSVarint())<F&&(F=N),N>V&&(V=N),(j+=_.readSVarint())<$&&($=j),j>X&&(X=j);else if(T!==7)throw new Error("unknown command "+T)}return[F,$,V,X]},l.prototype.toGeoJSON=function(_,S,T){var C,N,j=this.extent*Math.pow(2,T),F=this.extent*_,V=this.extent*S,$=this.loadGeometry(),X=l.types[this.type];function ee(Ee){for(var Ve=0;Ve<Ee.length;Ve++){var Oe=Ee[Ve];Ee[Ve]=[360*(Oe.x+F)/j-180,360/Math.PI*Math.atan(Math.exp((180-360*(Oe.y+V)/j)*Math.PI/180))-90]}}switch(this.type){case 1:var se=[];for(C=0;C<$.length;C++)se[C]=$[C][0];ee($=se);break;case 2:for(C=0;C<$.length;C++)ee($[C]);break;case 3:for($=function(Ee){var Ve=Ee.length;if(Ve<=1)return[Ee];for(var Oe,K,pe=[],Ne=0;Ne<Ve;Ne++){var ot=m(Ee[Ne]);ot!==0&&(K===void 0&&(K=ot<0),K===ot<0?(Oe&&pe.push(Oe),Oe=[Ee[Ne]]):Oe.push(Ee[Ne]))}return Oe&&pe.push(Oe),pe}($),C=0;C<$.length;C++)for(N=0;N<$[C].length;N++)ee($[C][N])}$.length===1?$=$[0]:X="Multi"+X;var he={type:"Feature",geometry:{type:X,coordinates:$},properties:this.properties};return"id"in this&&(he.id=this.id),he},$U}function Dpe(){if(Ape)return ZU;Ape=1;var f=Npe();function l(m,_){this.version=1,this.name=null,this.extent=4096,this.length=0,this._pbf=m,this._keys=[],this._values=[],this._features=[],m.readFields(p,this,_),this.length=this._features.length}function p(m,_,S){m===15?_.version=S.readVarint():m===1?_.name=S.readString():m===5?_.extent=S.readVarint():m===2?_._features.push(S.pos):m===3?_._keys.push(S.readString()):m===4&&_._values.push(function(T){for(var C=null,N=T.readVarint()+T.pos;T.pos<N;){var j=T.readVarint()>>3;C=j===1?T.readString():j===2?T.readFloat():j===3?T.readDouble():j===4?T.readVarint64():j===5?T.readVarint():j===6?T.readSVarint():j===7?T.readBoolean():null}return C}(S))}return ZU=l,l.prototype.feature=function(m){if(m<0||m>=this._features.length)throw new Error("feature index out of bounds");this._pbf.pos=this._features[m];var _=this._pbf.readVarint()+this._pbf.pos;return new f(this._pbf,_,this.extent,this._keys,this._values)},ZU}function Lpe(){return Ppe||(Ppe=1,KN.VectorTile=function(){if(Ope)return YU;Ope=1;var f=Dpe();function l(p,m,_){if(p===3){var S=new f(_,_.readVarint()+_.pos);S.length&&(m[S.name]=S)}}return YU=function(p,m){this.layers=p.readFields(l,{},m)},YU}(),KN.VectorTileFeature=Npe(),KN.VectorTileLayer=Dpe()),KN}var oI=a(Lpe());let bht=oI.VectorTileFeature.types,KU=Math.pow(2,13);function iI(f,l,p,m,_,S,T,C){f.emplaceBack(l,p,2*Math.floor(m*KU)+T,_*KU*2,S*KU*2,Math.round(C))}class XU{constructor(l){this.zoom=l.zoom,this.overscaling=l.overscaling,this.layers=l.layers,this.layerIds=this.layers.map(p=>p.id),this.index=l.index,this.hasPattern=!1,this.layoutVertexArray=new Ct,this.centroidVertexArray=new ft,this.indexArray=new Eo,this.programConfigurations=new rh(l.layers,l.zoom),this.segments=new So,this.stateDependentLayerIds=this.layers.filter(p=>p.isStateDependent()).map(p=>p.id)}populate(l,p,m){this.features=[],this.hasPattern=BU("fill-extrusion",this.layers,p);for(let{feature:_,id:S,index:T,sourceLayerIndex:C}of l){let N=this.layers[0]._featureFilter.needGeometry,j=y1(_,N);if(!this.layers[0]._featureFilter.filter(new gi(this.zoom),j,m))continue;let F={id:S,sourceLayerIndex:C,index:T,geometry:N?j.geometry:v1(_),properties:_.properties,type:_.type,patterns:{}};this.hasPattern?this.features.push(VU("fill-extrusion",this.layers,F,this.zoom,p)):this.addFeature(F,F.geometry,T,m,{},p.subdivisionGranularity),p.featureIndex.insert(_,F.geometry,T,C,this.index,!0)}}addFeatures(l,p,m){for(let _ of this.features){let{geometry:S}=_;this.addFeature(_,S,_.index,p,m,l.subdivisionGranularity)}}update(l,p,m){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(l,p,this.stateDependentLayers,m)}isEmpty(){return this.layoutVertexArray.length===0&&this.centroidVertexArray.length===0}uploadPending(){return!this.uploaded||this.programConfigurations.needsUpload}upload(l){this.uploaded||(this.layoutVertexBuffer=l.createVertexBuffer(this.layoutVertexArray,_ht),this.centroidVertexBuffer=l.createVertexBuffer(this.centroidVertexArray,yht.members,!0),this.indexBuffer=l.createIndexBuffer(this.indexArray)),this.programConfigurations.upload(l),this.uploaded=!0}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy(),this.centroidVertexBuffer.destroy())}addFeature(l,p,m,_,S,T){for(let C of Qb(p,500)){let N={x:0,y:0,sampleCount:0},j=this.layoutVertexArray.length;this.processPolygon(N,_,l,C,T);let F=this.layoutVertexArray.length-j,V=Math.floor(N.x/N.sampleCount),$=Math.floor(N.y/N.sampleCount);for(let X=0;X<F;X++)this.centroidVertexArray.emplaceBack(V,$)}this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,l,m,S,_)}processPolygon(l,p,m,_,S){if(_.length<1||kpe(_[0]))return;for(let V of _)V.length!==0&&xht(l,V);let T={segment:this.segments.prepareSegment(4,this.layoutVertexArray,this.indexArray)},C=S.fill.getGranularityForZoomLevel(p.z),N=bht[m.type]==="Polygon";for(let V of _){if(V.length===0||kpe(V))continue;let $=x1(V,C,N);this._generateSideFaces($,T)}if(!N)return;let j=Spe(_,p,C,!1),F=this.layoutVertexArray;Tpe((V,$)=>{iI(F,V,$,0,0,1,1,0)},this.segments,this.layoutVertexArray,this.indexArray,j.verticesFlattened,j.indicesTriangles)}_generateSideFaces(l,p){let m=0;for(let _=1;_<l.length;_++){let S=l[_],T=l[_-1];if(wht(S,T))continue;p.segment.vertexLength+4>So.MAX_VERTEX_ARRAY_LENGTH&&(p.segment=this.segments.prepareSegment(4,this.layoutVertexArray,this.indexArray));let C=S.sub(T)._perp()._unit(),N=T.dist(S);m+N>32768&&(m=0),iI(this.layoutVertexArray,S.x,S.y,C.x,C.y,0,0,m),iI(this.layoutVertexArray,S.x,S.y,C.x,C.y,0,1,m),m+=N,iI(this.layoutVertexArray,T.x,T.y,C.x,C.y,0,0,m),iI(this.layoutVertexArray,T.x,T.y,C.x,C.y,0,1,m);let j=p.segment.vertexLength;this.indexArray.emplaceBack(j,j+2,j+1),this.indexArray.emplaceBack(j+1,j+2,j+3),p.segment.vertexLength+=4,p.segment.primitiveLength+=2}}}function xht(f,l){for(let p=0;p<l.length;p++){let m=l[p];p===l.length-1&&l[0].x===m.x&&l[0].y===m.y||(f.x+=m.x,f.y+=m.y,f.sampleCount++)}}function wht(f,l){return f.x===l.x&&(f.x<0||f.x>tt)||f.y===l.y&&(f.y<0||f.y>tt)}function kpe(f){return f.every(l=>l.x<0)||f.every(l=>l.x>tt)||f.every(l=>l.y<0)||f.every(l=>l.y>tt)}let Rpe;cr("FillExtrusionBucket",XU,{omit:["layers","features"]});var Eht={get paint(){return Rpe=Rpe||new Ea({"fill-extrusion-opacity":new Sr(ne["paint_fill-extrusion"]["fill-extrusion-opacity"]),"fill-extrusion-color":new $r(ne["paint_fill-extrusion"]["fill-extrusion-color"]),"fill-extrusion-translate":new Sr(ne["paint_fill-extrusion"]["fill-extrusion-translate"]),"fill-extrusion-translate-anchor":new Sr(ne["paint_fill-extrusion"]["fill-extrusion-translate-anchor"]),"fill-extrusion-pattern":new f1(ne["paint_fill-extrusion"]["fill-extrusion-pattern"]),"fill-extrusion-height":new $r(ne["paint_fill-extrusion"]["fill-extrusion-height"]),"fill-extrusion-base":new $r(ne["paint_fill-extrusion"]["fill-extrusion-base"]),"fill-extrusion-vertical-gradient":new Sr(ne["paint_fill-extrusion"]["fill-extrusion-vertical-gradient"])})}};class Sht extends nc{constructor(l){super(l,Eht)}createBucket(l){return new XU(l)}queryRadius(){return HN(this.paint.get("fill-extrusion-translate"))}is3D(){return!0}queryIntersectsFeature({queryGeometry:l,feature:p,featureState:m,geometry:_,transform:S,pixelsToTileUnits:T,pixelPosMatrix:C}){let N=WN(l,this.paint.get("fill-extrusion-translate"),this.paint.get("fill-extrusion-translate-anchor"),-S.bearingInRadians,T),j=this.paint.get("fill-extrusion-height").evaluate(p,m),F=this.paint.get("fill-extrusion-base").evaluate(p,m),V=function(X,ee,se){let he=[];for(let Ee of X){let Ve=[Ee.x,Ee.y,0,1];Se(Ve,Ve,ee),he.push(new x(Ve[0]/Ve[3],Ve[1]/Ve[3]))}return he}(N,C),$=function(X,ee,se,he){let Ee=[],Ve=[],Oe=he[8]*ee,K=he[9]*ee,pe=he[10]*ee,Ne=he[11]*ee,ot=he[8]*se,Tt=he[9]*se,at=he[10]*se,dt=he[11]*se;for(let kt of X){let It=[],Ut=[];for(let vt of kt){let hr=vt.x,Br=vt.y,jr=he[0]*hr+he[4]*Br+he[12],xr=he[1]*hr+he[5]*Br+he[13],Jn=he[2]*hr+he[6]*Br+he[14],Xi=he[3]*hr+he[7]*Br+he[15],Ua=Jn+pe,Fs=Xi+Ne,Yc=jr+ot,Iu=xr+Tt,Es=Jn+at,Fi=Xi+dt,is=new x((jr+Oe)/Fs,(xr+K)/Fs);is.z=Ua/Fs,It.push(is);let Ss=new x(Yc/Fi,Iu/Fi);Ss.z=Es/Fi,Ut.push(Ss)}Ee.push(It),Ve.push(Ut)}return[Ee,Ve]}(_,F,j,C);return function(X,ee,se){let he=1/0;lpe(se,ee)&&(he=jpe(se,ee[0]));for(let Ee=0;Ee<ee.length;Ee++){let Ve=ee[Ee],Oe=X[Ee];for(let K=0;K<Ve.length-1;K++){let pe=Ve[K],Ne=[pe,Ve[K+1],Oe[K+1],Oe[K],pe];spe(se,Ne)&&(he=Math.min(he,jpe(se,Ne)))}}return he!==1/0&&he}($[0],$[1],V)}}function aI(f,l){return f.x*l.x+f.y*l.y}function jpe(f,l){if(f.length===1){let p=0,m=l[p++],_;for(;!_||m.equals(_);)if(_=l[p++],!_)return 1/0;for(;p<l.length;p++){let S=l[p],T=f[0],C=_.sub(m),N=S.sub(m),j=T.sub(m),F=aI(C,C),V=aI(C,N),$=aI(N,N),X=aI(j,C),ee=aI(j,N),se=F*$-V*V,he=($*X-V*ee)/se,Ee=(F*ee-V*X)/se,Ve=m.z*(1-he-Ee)+_.z*he+S.z*Ee;if(isFinite(Ve))return Ve}return 1/0}{let p=1/0;for(let m of l)p=Math.min(p,m.z);return p}}let Tht=Ri([{name:"a_pos_normal",components:2,type:"Int16"},{name:"a_data",components:4,type:"Uint8"}],4),{members:Iht}=Tht,Mht=Ri([{name:"a_uv_x",components:1,type:"Float32"},{name:"a_split_index",components:1,type:"Float32"}]),{members:Cht}=Mht,Aht=oI.VectorTileFeature.types,Oht=Math.cos(Math.PI/180*37.5),qpe=Math.pow(2,14)/.5;class QU{constructor(l){this.zoom=l.zoom,this.overscaling=l.overscaling,this.layers=l.layers,this.layerIds=this.layers.map(p=>p.id),this.index=l.index,this.hasPattern=!1,this.patternFeatures=[],this.lineClipsArray=[],this.gradients={},this.layers.forEach(p=>{this.gradients[p.id]={}}),this.layoutVertexArray=new br,this.layoutVertexArray2=new On,this.indexArray=new Eo,this.programConfigurations=new rh(l.layers,l.zoom),this.segments=new So,this.maxLineLength=0,this.stateDependentLayerIds=this.layers.filter(p=>p.isStateDependent()).map(p=>p.id)}populate(l,p,m){this.hasPattern=BU("line",this.layers,p);let _=this.layers[0].layout.get("line-sort-key"),S=!_.isConstant(),T=[];for(let{feature:C,id:N,index:j,sourceLayerIndex:F}of l){let V=this.layers[0]._featureFilter.needGeometry,$=y1(C,V);if(!this.layers[0]._featureFilter.filter(new gi(this.zoom),$,m))continue;let X=S?_.evaluate($,{},m):void 0,ee={id:N,properties:C.properties,type:C.type,sourceLayerIndex:F,index:j,geometry:V?$.geometry:v1(C),patterns:{},sortKey:X};T.push(ee)}S&&T.sort((C,N)=>C.sortKey-N.sortKey);for(let C of T){let{geometry:N,index:j,sourceLayerIndex:F}=C;if(this.hasPattern){let V=VU("line",this.layers,C,this.zoom,p);this.patternFeatures.push(V)}else this.addFeature(C,N,j,m,{},p.subdivisionGranularity);p.featureIndex.insert(l[j].feature,N,j,F,this.index)}}update(l,p,m){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(l,p,this.stateDependentLayers,m)}addFeatures(l,p,m){for(let _ of this.patternFeatures)this.addFeature(_,_.geometry,_.index,p,m,l.subdivisionGranularity)}isEmpty(){return this.layoutVertexArray.length===0}uploadPending(){return!this.uploaded||this.programConfigurations.needsUpload}upload(l){this.uploaded||(this.layoutVertexArray2.length!==0&&(this.layoutVertexBuffer2=l.createVertexBuffer(this.layoutVertexArray2,Cht)),this.layoutVertexBuffer=l.createVertexBuffer(this.layoutVertexArray,Iht),this.indexBuffer=l.createIndexBuffer(this.indexArray)),this.programConfigurations.upload(l),this.uploaded=!0}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy())}lineFeatureClips(l){if(l.properties&&Object.prototype.hasOwnProperty.call(l.properties,"mapbox_clip_start")&&Object.prototype.hasOwnProperty.call(l.properties,"mapbox_clip_end"))return{start:+l.properties.mapbox_clip_start,end:+l.properties.mapbox_clip_end}}addFeature(l,p,m,_,S,T){let C=this.layers[0].layout,N=C.get("line-join").evaluate(l,{}),j=C.get("line-cap"),F=C.get("line-miter-limit"),V=C.get("line-round-limit");this.lineClips=this.lineFeatureClips(l);for(let $ of p)this.addLine($,l,N,j,F,V,_,T);this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,l,m,S,_)}addLine(l,p,m,_,S,T,C,N){if(this.distance=0,this.scaledDistance=0,this.totalDistance=0,l=x1(l,C?N.line.getGranularityForZoomLevel(C.z):1),this.lineClips){this.lineClipsArray.push(this.lineClips);for(let Oe=0;Oe<l.length-1;Oe++)this.totalDistance+=l[Oe].dist(l[Oe+1]);this.updateScaledDistance(),this.maxLineLength=Math.max(this.maxLineLength,this.totalDistance)}let j=Aht[p.type]==="Polygon",F=l.length;for(;F>=2&&l[F-1].equals(l[F-2]);)F--;let V=0;for(;V<F-1&&l[V].equals(l[V+1]);)V++;if(F<(j?3:2))return;m==="bevel"&&(S=1.05);let $=this.overscaling<=16?15*tt/(512*this.overscaling):0,X=this.segments.prepareSegment(10*F,this.layoutVertexArray,this.indexArray),ee,se,he,Ee,Ve;this.e1=this.e2=-1,j&&(ee=l[F-2],Ve=l[V].sub(ee)._unit()._perp());for(let Oe=V;Oe<F;Oe++){if(he=Oe===F-1?j?l[V+1]:void 0:l[Oe+1],he&&l[Oe].equals(he))continue;Ve&&(Ee=Ve),ee&&(se=ee),ee=l[Oe],Ve=he?he.sub(ee)._unit()._perp():Ee,Ee=Ee||Ve;let K=Ee.add(Ve);K.x===0&&K.y===0||K._unit();let pe=Ee.x*Ve.x+Ee.y*Ve.y,Ne=K.x*Ve.x+K.y*Ve.y,ot=Ne!==0?1/Ne:1/0,Tt=2*Math.sqrt(2-2*Ne),at=Ne<Oht&&se&&he,dt=Ee.x*Ve.y-Ee.y*Ve.x>0;if(at&&Oe>V){let Ut=ee.dist(se);if(Ut>2*$){let vt=ee.sub(ee.sub(se)._mult($/Ut)._round());this.updateDistance(se,vt),this.addCurrentVertex(vt,Ee,0,0,X),se=vt}}let kt=se&&he,It=kt?m:j?"butt":_;if(kt&&It==="round"&&(ot<T?It="miter":ot<=2&&(It="fakeround")),It==="miter"&&ot>S&&(It="bevel"),It==="bevel"&&(ot>2&&(It="flipbevel"),ot<S&&(It="miter")),se&&this.updateDistance(se,ee),It==="miter")K._mult(ot),this.addCurrentVertex(ee,K,0,0,X);else if(It==="flipbevel"){if(ot>100)K=Ve.mult(-1);else{let Ut=ot*Ee.add(Ve).mag()/Ee.sub(Ve).mag();K._perp()._mult(Ut*(dt?-1:1))}this.addCurrentVertex(ee,K,0,0,X),this.addCurrentVertex(ee,K.mult(-1),0,0,X)}else if(It==="bevel"||It==="fakeround"){let Ut=-Math.sqrt(ot*ot-1),vt=dt?Ut:0,hr=dt?0:Ut;if(se&&this.addCurrentVertex(ee,Ee,vt,hr,X),It==="fakeround"){let Br=Math.round(180*Tt/Math.PI/20);for(let jr=1;jr<Br;jr++){let xr=jr/Br;if(xr!==.5){let Xi=xr-.5;xr+=xr*Xi*(xr-1)*((1.0904+pe*(pe*(3.55645-1.43519*pe)-3.2452))*Xi*Xi+(.848013+pe*(.215638*pe-1.06021)))}let Jn=Ve.sub(Ee)._mult(xr)._add(Ee)._unit()._mult(dt?-1:1);this.addHalfVertex(ee,Jn.x,Jn.y,!1,dt,0,X)}}he&&this.addCurrentVertex(ee,Ve,-vt,-hr,X)}else if(It==="butt")this.addCurrentVertex(ee,K,0,0,X);else if(It==="square"){let Ut=se?1:-1;this.addCurrentVertex(ee,K,Ut,Ut,X)}else It==="round"&&(se&&(this.addCurrentVertex(ee,Ee,0,0,X),this.addCurrentVertex(ee,Ee,1,1,X,!0)),he&&(this.addCurrentVertex(ee,Ve,-1,-1,X,!0),this.addCurrentVertex(ee,Ve,0,0,X)));if(at&&Oe<F-1){let Ut=ee.dist(he);if(Ut>2*$){let vt=ee.add(he.sub(ee)._mult($/Ut)._round());this.updateDistance(ee,vt),this.addCurrentVertex(vt,Ve,0,0,X),ee=vt}}}}addCurrentVertex(l,p,m,_,S,T=!1){let C=p.y*_-p.x,N=-p.y-p.x*_;this.addHalfVertex(l,p.x+p.y*m,p.y-p.x*m,T,!1,m,S),this.addHalfVertex(l,C,N,T,!0,-_,S),this.distance>qpe/2&&this.totalDistance===0&&(this.distance=0,this.updateScaledDistance(),this.addCurrentVertex(l,p,m,_,S,T))}addHalfVertex({x:l,y:p},m,_,S,T,C,N){let j=.5*(this.lineClips?this.scaledDistance*(qpe-1):this.scaledDistance);this.layoutVertexArray.emplaceBack((l<<1)+(S?1:0),(p<<1)+(T?1:0),Math.round(63*m)+128,Math.round(63*_)+128,1+(C===0?0:C<0?-1:1)|(63&j)<<2,j>>6),this.lineClips&&this.layoutVertexArray2.emplaceBack((this.scaledDistance-this.lineClips.start)/(this.lineClips.end-this.lineClips.start),this.lineClipsArray.length);let F=N.vertexLength++;this.e1>=0&&this.e2>=0&&(this.indexArray.emplaceBack(this.e1,F,this.e2),N.primitiveLength++),T?this.e2=F:this.e1=F}updateScaledDistance(){this.scaledDistance=this.lineClips?this.lineClips.start+(this.lineClips.end-this.lineClips.start)*this.distance/this.totalDistance:this.distance}updateDistance(l,p){this.distance+=l.dist(p),this.updateScaledDistance()}}let zpe,Fpe;cr("LineBucket",QU,{omit:["layers","patternFeatures"]});var Upe={get paint(){return Fpe=Fpe||new Ea({"line-opacity":new $r(ne.paint_line["line-opacity"]),"line-color":new $r(ne.paint_line["line-color"]),"line-translate":new Sr(ne.paint_line["line-translate"]),"line-translate-anchor":new Sr(ne.paint_line["line-translate-anchor"]),"line-width":new $r(ne.paint_line["line-width"]),"line-gap-width":new $r(ne.paint_line["line-gap-width"]),"line-offset":new $r(ne.paint_line["line-offset"]),"line-blur":new $r(ne.paint_line["line-blur"]),"line-dasharray":new BT(ne.paint_line["line-dasharray"]),"line-pattern":new f1(ne.paint_line["line-pattern"]),"line-gradient":new VT(ne.paint_line["line-gradient"])})},get layout(){return zpe=zpe||new Ea({"line-cap":new Sr(ne.layout_line["line-cap"]),"line-join":new $r(ne.layout_line["line-join"]),"line-miter-limit":new Sr(ne.layout_line["line-miter-limit"]),"line-round-limit":new Sr(ne.layout_line["line-round-limit"]),"line-sort-key":new $r(ne.layout_line["line-sort-key"])})}};class Pht extends $r{possiblyEvaluate(l,p){return p=new gi(Math.floor(p.zoom),{now:p.now,fadeDuration:p.fadeDuration,zoomHistory:p.zoomHistory,transition:p.transition}),super.possiblyEvaluate(l,p)}evaluate(l,p,m,_){return p=We({},p,{zoom:Math.floor(p.zoom)}),super.evaluate(l,p,m,_)}}let XN;class Nht extends nc{constructor(l){super(l,Upe),this.gradientVersion=0,XN||(XN=new Pht(Upe.paint.properties["line-width"].specification),XN.useIntegerZoom=!0)}_handleSpecialPaintPropertyUpdate(l){if(l==="line-gradient"){let p=this.gradientExpression();this.stepInterpolant=!!function(m){return m._styleExpression!==void 0}(p)&&p._styleExpression.expression instanceof Zd,this.gradientVersion=(this.gradientVersion+1)%Number.MAX_SAFE_INTEGER}}gradientExpression(){return this._transitionablePaint._values["line-gradient"].value.expression}recalculate(l,p){super.recalculate(l,p),this.paint._values["line-floorwidth"]=XN.possiblyEvaluate(this._transitioningPaint._values["line-width"].value,l)}createBucket(l){return new QU(l)}queryRadius(l){let p=l,m=Bpe(KT("line-width",this,p),KT("line-gap-width",this,p)),_=KT("line-offset",this,p);return m/2+Math.abs(_)+HN(this.paint.get("line-translate"))}queryIntersectsFeature({queryGeometry:l,feature:p,featureState:m,geometry:_,transform:S,pixelsToTileUnits:T}){let C=WN(l,this.paint.get("line-translate"),this.paint.get("line-translate-anchor"),-S.bearingInRadians,T),N=T/2*Bpe(this.paint.get("line-width").evaluate(p,m),this.paint.get("line-gap-width").evaluate(p,m)),j=this.paint.get("line-offset").evaluate(p,m);return j&&(_=function(F,V){let $=[];for(let X=0;X<F.length;X++){let ee=F[X],se=[];for(let he=0;he<ee.length;he++){let Ee=ee[he-1],Ve=ee[he],Oe=ee[he+1],K=he===0?new x(0,0):Ve.sub(Ee)._unit()._perp(),pe=he===ee.length-1?new x(0,0):Oe.sub(Ve)._unit()._perp(),Ne=K._add(pe)._unit(),ot=Ne.x*pe.x+Ne.y*pe.y;ot!==0&&Ne._mult(1/ot),se.push(Ne._mult(V)._add(Ve))}$.push(se)}return $}(_,j*T)),function(F,V,$){for(let X=0;X<V.length;X++){let ee=V[X];if(F.length>=3){for(let se=0;se<ee.length;se++)if(_1(F,ee[se]))return!0}if($dt(F,ee,$))return!0}return!1}(C,_,N)}isTileClipped(){return!0}}function Bpe(f,l){return l>0?l+2*f:f}let Dht=Ri([{name:"a_pos_offset",components:4,type:"Int16"},{name:"a_data",components:4,type:"Uint16"},{name:"a_pixeloffset",components:4,type:"Int16"}],4),Lht=Ri([{name:"a_projected_pos",components:3,type:"Float32"}],4);Ri([{name:"a_fade_opacity",components:1,type:"Uint32"}],4);let kht=Ri([{name:"a_placed",components:2,type:"Uint8"},{name:"a_shift",components:2,type:"Float32"},{name:"a_box_real",components:2,type:"Int16"}]);Ri([{type:"Int16",name:"anchorPointX"},{type:"Int16",name:"anchorPointY"},{type:"Int16",name:"x1"},{type:"Int16",name:"y1"},{type:"Int16",name:"x2"},{type:"Int16",name:"y2"},{type:"Uint32",name:"featureIndex"},{type:"Uint16",name:"sourceLayerIndex"},{type:"Uint16",name:"bucketIndex"}]);let Vpe=Ri([{name:"a_pos",components:2,type:"Int16"},{name:"a_anchor_pos",components:2,type:"Int16"},{name:"a_extrude",components:2,type:"Int16"}],4),Rht=Ri([{name:"a_pos",components:2,type:"Float32"},{name:"a_radius",components:1,type:"Float32"},{name:"a_flags",components:2,type:"Int16"}],4);function jht(f,l,p){return f.sections.forEach(m=>{m.text=function(_,S,T){let C=S.layout.get("text-transform").evaluate(T,{});return C==="uppercase"?_=_.toLocaleUpperCase():C==="lowercase"&&(_=_.toLocaleLowerCase()),zf.applyArabicShaping&&(_=zf.applyArabicShaping(_)),_}(m.text,l,p)}),f}Ri([{name:"triangle",components:3,type:"Uint16"}]),Ri([{type:"Int16",name:"anchorX"},{type:"Int16",name:"anchorY"},{type:"Uint16",name:"glyphStartIndex"},{type:"Uint16",name:"numGlyphs"},{type:"Uint32",name:"vertexStartIndex"},{type:"Uint32",name:"lineStartIndex"},{type:"Uint32",name:"lineLength"},{type:"Uint16",name:"segment"},{type:"Uint16",name:"lowerSize"},{type:"Uint16",name:"upperSize"},{type:"Float32",name:"lineOffsetX"},{type:"Float32",name:"lineOffsetY"},{type:"Uint8",name:"writingMode"},{type:"Uint8",name:"placedOrientation"},{type:"Uint8",name:"hidden"},{type:"Uint32",name:"crossTileID"},{type:"Int16",name:"associatedIconIndex"}]),Ri([{type:"Int16",name:"anchorX"},{type:"Int16",name:"anchorY"},{type:"Int16",name:"rightJustifiedTextSymbolIndex"},{type:"Int16",name:"centerJustifiedTextSymbolIndex"},{type:"Int16",name:"leftJustifiedTextSymbolIndex"},{type:"Int16",name:"verticalPlacedTextSymbolIndex"},{type:"Int16",name:"placedIconSymbolIndex"},{type:"Int16",name:"verticalPlacedIconSymbolIndex"},{type:"Uint16",name:"key"},{type:"Uint16",name:"textBoxStartIndex"},{type:"Uint16",name:"textBoxEndIndex"},{type:"Uint16",name:"verticalTextBoxStartIndex"},{type:"Uint16",name:"verticalTextBoxEndIndex"},{type:"Uint16",name:"iconBoxStartIndex"},{type:"Uint16",name:"iconBoxEndIndex"},{type:"Uint16",name:"verticalIconBoxStartIndex"},{type:"Uint16",name:"verticalIconBoxEndIndex"},{type:"Uint16",name:"featureIndex"},{type:"Uint16",name:"numHorizontalGlyphVertices"},{type:"Uint16",name:"numVerticalGlyphVertices"},{type:"Uint16",name:"numIconVertices"},{type:"Uint16",name:"numVerticalIconVertices"},{type:"Uint16",name:"useRuntimeCollisionCircles"},{type:"Uint32",name:"crossTileID"},{type:"Float32",name:"textBoxScale"},{type:"Float32",name:"collisionCircleDiameter"},{type:"Uint16",name:"textAnchorOffsetStartIndex"},{type:"Uint16",name:"textAnchorOffsetEndIndex"}]),Ri([{type:"Float32",name:"offsetX"}]),Ri([{type:"Int16",name:"x"},{type:"Int16",name:"y"},{type:"Int16",name:"tileUnitDistanceFromAnchor"}]),Ri([{type:"Uint16",name:"textAnchor"},{type:"Float32",components:2,name:"textOffset"}]);let sI={"!":"\uFE15","#":"\uFF03",$:"\uFF04","%":"\uFF05","&":"\uFF06","(":"\uFE35",")":"\uFE36","*":"\uFF0A","+":"\uFF0B",",":"\uFE10","-":"\uFE32",".":"\u30FB","/":"\uFF0F",":":"\uFE13",";":"\uFE14","<":"\uFE3F","=":"\uFF1D",">":"\uFE40","?":"\uFE16","@":"\uFF20","[":"\uFE47","\\":"\uFF3C","]":"\uFE48","^":"\uFF3E",_:"\uFE33","`":"\uFF40","{":"\uFE37","|":"\u2015","}":"\uFE38","~":"\uFF5E","\xA2":"\uFFE0","\xA3":"\uFFE1","\xA5":"\uFFE5","\xA6":"\uFFE4","\xAC":"\uFFE2","\xAF":"\uFFE3","\u2013":"\uFE32","\u2014":"\uFE31","\u2018":"\uFE43","\u2019":"\uFE44","\u201C":"\uFE41","\u201D":"\uFE42","\u2026":"\uFE19","\u2027":"\u30FB","\u20A9":"\uFFE6","\u3001":"\uFE11","\u3002":"\uFE12","\u3008":"\uFE3F","\u3009":"\uFE40","\u300A":"\uFE3D","\u300B":"\uFE3E","\u300C":"\uFE41","\u300D":"\uFE42","\u300E":"\uFE43","\u300F":"\uFE44","\u3010":"\uFE3B","\u3011":"\uFE3C","\u3014":"\uFE39","\u3015":"\uFE3A","\u3016":"\uFE17","\u3017":"\uFE18","\uFF01":"\uFE15","\uFF08":"\uFE35","\uFF09":"\uFE36","\uFF0C":"\uFE10","\uFF0D":"\uFE32","\uFF0E":"\u30FB","\uFF1A":"\uFE13","\uFF1B":"\uFE14","\uFF1C":"\uFE3F","\uFF1E":"\uFE40","\uFF1F":"\uFE16","\uFF3B":"\uFE47","\uFF3D":"\uFE48","\uFF3F":"\uFE33","\uFF5B":"\uFE37","\uFF5C":"\u2015","\uFF5D":"\uFE38","\uFF5F":"\uFE35","\uFF60":"\uFE36","\uFF61":"\uFE12","\uFF62":"\uFE41","\uFF63":"\uFE42"};var Gpe,JU,Hpe,Fa=24,eB={};function qht(){return Gpe||(Gpe=1,eB.read=function(f,l,p,m,_){var S,T,C=8*_-m-1,N=(1<<C)-1,j=N>>1,F=-7,V=p?_-1:0,$=p?-1:1,X=f[l+V];for(V+=$,S=X&(1<<-F)-1,X>>=-F,F+=C;F>0;S=256*S+f[l+V],V+=$,F-=8);for(T=S&(1<<-F)-1,S>>=-F,F+=m;F>0;T=256*T+f[l+V],V+=$,F-=8);if(S===0)S=1-j;else{if(S===N)return T?NaN:1/0*(X?-1:1);T+=Math.pow(2,m),S-=j}return(X?-1:1)*T*Math.pow(2,S-m)},eB.write=function(f,l,p,m,_,S){var T,C,N,j=8*S-_-1,F=(1<<j)-1,V=F>>1,$=_===23?Math.pow(2,-24)-Math.pow(2,-77):0,X=m?0:S-1,ee=m?1:-1,se=l<0||l===0&&1/l<0?1:0;for(l=Math.abs(l),isNaN(l)||l===1/0?(C=isNaN(l)?1:0,T=F):(T=Math.floor(Math.log(l)/Math.LN2),l*(N=Math.pow(2,-T))<1&&(T--,N*=2),(l+=T+V>=1?$/N:$*Math.pow(2,1-V))*N>=2&&(T++,N/=2),T+V>=F?(C=0,T=F):T+V>=1?(C=(l*N-1)*Math.pow(2,_),T+=V):(C=l*Math.pow(2,V-1)*Math.pow(2,_),T=0));_>=8;f[p+X]=255&C,X+=ee,C/=256,_-=8);for(T=T<<_|C,j+=_;j>0;f[p+X]=255&T,X+=ee,T/=256,j-=8);f[p+X-ee]|=128*se}),eB}function Wpe(){if(Hpe)return JU;Hpe=1,JU=l;var f=qht();function l(K){this.buf=ArrayBuffer.isView&&ArrayBuffer.isView(K)?K:new Uint8Array(K||0),this.pos=0,this.type=0,this.length=this.buf.length}l.Varint=0,l.Fixed64=1,l.Bytes=2,l.Fixed32=5;var p=4294967296,m=1/p,_=typeof TextDecoder=="undefined"?null:new TextDecoder("utf-8");function S(K){return K.type===l.Bytes?K.readVarint()+K.pos:K.pos+1}function T(K,pe,Ne){return Ne?4294967296*pe+(K>>>0):4294967296*(pe>>>0)+(K>>>0)}function C(K,pe,Ne){var ot=pe<=16383?1:pe<=2097151?2:pe<=268435455?3:Math.floor(Math.log(pe)/(7*Math.LN2));Ne.realloc(ot);for(var Tt=Ne.pos-1;Tt>=K;Tt--)Ne.buf[Tt+ot]=Ne.buf[Tt]}function N(K,pe){for(var Ne=0;Ne<K.length;Ne++)pe.writeVarint(K[Ne])}function j(K,pe){for(var Ne=0;Ne<K.length;Ne++)pe.writeSVarint(K[Ne])}function F(K,pe){for(var Ne=0;Ne<K.length;Ne++)pe.writeFloat(K[Ne])}function V(K,pe){for(var Ne=0;Ne<K.length;Ne++)pe.writeDouble(K[Ne])}function $(K,pe){for(var Ne=0;Ne<K.length;Ne++)pe.writeBoolean(K[Ne])}function X(K,pe){for(var Ne=0;Ne<K.length;Ne++)pe.writeFixed32(K[Ne])}function ee(K,pe){for(var Ne=0;Ne<K.length;Ne++)pe.writeSFixed32(K[Ne])}function se(K,pe){for(var Ne=0;Ne<K.length;Ne++)pe.writeFixed64(K[Ne])}function he(K,pe){for(var Ne=0;Ne<K.length;Ne++)pe.writeSFixed64(K[Ne])}function Ee(K,pe){return(K[pe]|K[pe+1]<<8|K[pe+2]<<16)+16777216*K[pe+3]}function Ve(K,pe,Ne){K[Ne]=pe,K[Ne+1]=pe>>>8,K[Ne+2]=pe>>>16,K[Ne+3]=pe>>>24}function Oe(K,pe){return(K[pe]|K[pe+1]<<8|K[pe+2]<<16)+(K[pe+3]<<24)}return l.prototype={destroy:function(){this.buf=null},readFields:function(K,pe,Ne){for(Ne=Ne||this.length;this.pos<Ne;){var ot=this.readVarint(),Tt=ot>>3,at=this.pos;this.type=7&ot,K(Tt,pe,this),this.pos===at&&this.skip(ot)}return pe},readMessage:function(K,pe){return this.readFields(K,pe,this.readVarint()+this.pos)},readFixed32:function(){var K=Ee(this.buf,this.pos);return this.pos+=4,K},readSFixed32:function(){var K=Oe(this.buf,this.pos);return this.pos+=4,K},readFixed64:function(){var K=Ee(this.buf,this.pos)+Ee(this.buf,this.pos+4)*p;return this.pos+=8,K},readSFixed64:function(){var K=Ee(this.buf,this.pos)+Oe(this.buf,this.pos+4)*p;return this.pos+=8,K},readFloat:function(){var K=f.read(this.buf,this.pos,!0,23,4);return this.pos+=4,K},readDouble:function(){var K=f.read(this.buf,this.pos,!0,52,8);return this.pos+=8,K},readVarint:function(K){var pe,Ne,ot=this.buf;return pe=127&(Ne=ot[this.pos++]),Ne<128?pe:(pe|=(127&(Ne=ot[this.pos++]))<<7,Ne<128?pe:(pe|=(127&(Ne=ot[this.pos++]))<<14,Ne<128?pe:(pe|=(127&(Ne=ot[this.pos++]))<<21,Ne<128?pe:function(Tt,at,dt){var kt,It,Ut=dt.buf;if(kt=(112&(It=Ut[dt.pos++]))>>4,It<128||(kt|=(127&(It=Ut[dt.pos++]))<<3,It<128)||(kt|=(127&(It=Ut[dt.pos++]))<<10,It<128)||(kt|=(127&(It=Ut[dt.pos++]))<<17,It<128)||(kt|=(127&(It=Ut[dt.pos++]))<<24,It<128)||(kt|=(1&(It=Ut[dt.pos++]))<<31,It<128))return T(Tt,kt,at);throw new Error("Expected varint not more than 10 bytes")}(pe|=(15&(Ne=ot[this.pos]))<<28,K,this))))},readVarint64:function(){return this.readVarint(!0)},readSVarint:function(){var K=this.readVarint();return K%2==1?(K+1)/-2:K/2},readBoolean:function(){return!!this.readVarint()},readString:function(){var K=this.readVarint()+this.pos,pe=this.pos;return this.pos=K,K-pe>=12&&_?function(Ne,ot,Tt){return _.decode(Ne.subarray(ot,Tt))}(this.buf,pe,K):function(Ne,ot,Tt){for(var at="",dt=ot;dt<Tt;){var kt,It,Ut,vt=Ne[dt],hr=null,Br=vt>239?4:vt>223?3:vt>191?2:1;if(dt+Br>Tt)break;Br===1?vt<128&&(hr=vt):Br===2?(192&(kt=Ne[dt+1]))==128&&(hr=(31&vt)<<6|63&kt)<=127&&(hr=null):Br===3?(It=Ne[dt+2],(192&(kt=Ne[dt+1]))==128&&(192&It)==128&&((hr=(15&vt)<<12|(63&kt)<<6|63&It)<=2047||hr>=55296&&hr<=57343)&&(hr=null)):Br===4&&(It=Ne[dt+2],Ut=Ne[dt+3],(192&(kt=Ne[dt+1]))==128&&(192&It)==128&&(192&Ut)==128&&((hr=(15&vt)<<18|(63&kt)<<12|(63&It)<<6|63&Ut)<=65535||hr>=1114112)&&(hr=null)),hr===null?(hr=65533,Br=1):hr>65535&&(hr-=65536,at+=String.fromCharCode(hr>>>10&1023|55296),hr=56320|1023&hr),at+=String.fromCharCode(hr),dt+=Br}return at}(this.buf,pe,K)},readBytes:function(){var K=this.readVarint()+this.pos,pe=this.buf.subarray(this.pos,K);return this.pos=K,pe},readPackedVarint:function(K,pe){if(this.type!==l.Bytes)return K.push(this.readVarint(pe));var Ne=S(this);for(K=K||[];this.pos<Ne;)K.push(this.readVarint(pe));return K},readPackedSVarint:function(K){if(this.type!==l.Bytes)return K.push(this.readSVarint());var pe=S(this);for(K=K||[];this.pos<pe;)K.push(this.readSVarint());return K},readPackedBoolean:function(K){if(this.type!==l.Bytes)return K.push(this.readBoolean());var pe=S(this);for(K=K||[];this.pos<pe;)K.push(this.readBoolean());return K},readPackedFloat:function(K){if(this.type!==l.Bytes)return K.push(this.readFloat());var pe=S(this);for(K=K||[];this.pos<pe;)K.push(this.readFloat());return K},readPackedDouble:function(K){if(this.type!==l.Bytes)return K.push(this.readDouble());var pe=S(this);for(K=K||[];this.pos<pe;)K.push(this.readDouble());return K},readPackedFixed32:function(K){if(this.type!==l.Bytes)return K.push(this.readFixed32());var pe=S(this);for(K=K||[];this.pos<pe;)K.push(this.readFixed32());return K},readPackedSFixed32:function(K){if(this.type!==l.Bytes)return K.push(this.readSFixed32());var pe=S(this);for(K=K||[];this.pos<pe;)K.push(this.readSFixed32());return K},readPackedFixed64:function(K){if(this.type!==l.Bytes)return K.push(this.readFixed64());var pe=S(this);for(K=K||[];this.pos<pe;)K.push(this.readFixed64());return K},readPackedSFixed64:function(K){if(this.type!==l.Bytes)return K.push(this.readSFixed64());var pe=S(this);for(K=K||[];this.pos<pe;)K.push(this.readSFixed64());return K},skip:function(K){var pe=7&K;if(pe===l.Varint)for(;this.buf[this.pos++]>127;);else if(pe===l.Bytes)this.pos=this.readVarint()+this.pos;else if(pe===l.Fixed32)this.pos+=4;else{if(pe!==l.Fixed64)throw new Error("Unimplemented type: "+pe);this.pos+=8}},writeTag:function(K,pe){this.writeVarint(K<<3|pe)},realloc:function(K){for(var pe=this.length||16;pe<this.pos+K;)pe*=2;if(pe!==this.length){var Ne=new Uint8Array(pe);Ne.set(this.buf),this.buf=Ne,this.length=pe}},finish:function(){return this.length=this.pos,this.pos=0,this.buf.subarray(0,this.length)},writeFixed32:function(K){this.realloc(4),Ve(this.buf,K,this.pos),this.pos+=4},writeSFixed32:function(K){this.realloc(4),Ve(this.buf,K,this.pos),this.pos+=4},writeFixed64:function(K){this.realloc(8),Ve(this.buf,-1&K,this.pos),Ve(this.buf,Math.floor(K*m),this.pos+4),this.pos+=8},writeSFixed64:function(K){this.realloc(8),Ve(this.buf,-1&K,this.pos),Ve(this.buf,Math.floor(K*m),this.pos+4),this.pos+=8},writeVarint:function(K){(K=+K||0)>268435455||K<0?function(pe,Ne){var ot,Tt;if(pe>=0?(ot=pe%4294967296|0,Tt=pe/4294967296|0):(Tt=~(-pe/4294967296),4294967295^(ot=~(-pe%4294967296))?ot=ot+1|0:(ot=0,Tt=Tt+1|0)),pe>=18446744073709552e3||pe<-18446744073709552e3)throw new Error("Given varint doesn't fit into 10 bytes");Ne.realloc(10),function(at,dt,kt){kt.buf[kt.pos++]=127&at|128,at>>>=7,kt.buf[kt.pos++]=127&at|128,at>>>=7,kt.buf[kt.pos++]=127&at|128,at>>>=7,kt.buf[kt.pos++]=127&at|128,kt.buf[kt.pos]=127&(at>>>=7)}(ot,0,Ne),function(at,dt){var kt=(7&at)<<4;dt.buf[dt.pos++]|=kt|((at>>>=3)?128:0),at&&(dt.buf[dt.pos++]=127&at|((at>>>=7)?128:0),at&&(dt.buf[dt.pos++]=127&at|((at>>>=7)?128:0),at&&(dt.buf[dt.pos++]=127&at|((at>>>=7)?128:0),at&&(dt.buf[dt.pos++]=127&at|((at>>>=7)?128:0),at&&(dt.buf[dt.pos++]=127&at)))))}(Tt,Ne)}(K,this):(this.realloc(4),this.buf[this.pos++]=127&K|(K>127?128:0),K<=127||(this.buf[this.pos++]=127&(K>>>=7)|(K>127?128:0),K<=127||(this.buf[this.pos++]=127&(K>>>=7)|(K>127?128:0),K<=127||(this.buf[this.pos++]=K>>>7&127))))},writeSVarint:function(K){this.writeVarint(K<0?2*-K-1:2*K)},writeBoolean:function(K){this.writeVarint(!!K)},writeString:function(K){K=String(K),this.realloc(4*K.length),this.pos++;var pe=this.pos;this.pos=function(ot,Tt,at){for(var dt,kt,It=0;It<Tt.length;It++){if((dt=Tt.charCodeAt(It))>55295&&dt<57344){if(!kt){dt>56319||It+1===Tt.length?(ot[at++]=239,ot[at++]=191,ot[at++]=189):kt=dt;continue}if(dt<56320){ot[at++]=239,ot[at++]=191,ot[at++]=189,kt=dt;continue}dt=kt-55296<<10|dt-56320|65536,kt=null}else kt&&(ot[at++]=239,ot[at++]=191,ot[at++]=189,kt=null);dt<128?ot[at++]=dt:(dt<2048?ot[at++]=dt>>6|192:(dt<65536?ot[at++]=dt>>12|224:(ot[at++]=dt>>18|240,ot[at++]=dt>>12&63|128),ot[at++]=dt>>6&63|128),ot[at++]=63&dt|128)}return at}(this.buf,K,this.pos);var Ne=this.pos-pe;Ne>=128&&C(pe,Ne,this),this.pos=pe-1,this.writeVarint(Ne),this.pos+=Ne},writeFloat:function(K){this.realloc(4),f.write(this.buf,K,this.pos,!0,23,4),this.pos+=4},writeDouble:function(K){this.realloc(8),f.write(this.buf,K,this.pos,!0,52,8),this.pos+=8},writeBytes:function(K){var pe=K.length;this.writeVarint(pe),this.realloc(pe);for(var Ne=0;Ne<pe;Ne++)this.buf[this.pos++]=K[Ne]},writeRawMessage:function(K,pe){this.pos++;var Ne=this.pos;K(pe,this);var ot=this.pos-Ne;ot>=128&&C(Ne,ot,this),this.pos=Ne-1,this.writeVarint(ot),this.pos+=ot},writeMessage:function(K,pe,Ne){this.writeTag(K,l.Bytes),this.writeRawMessage(pe,Ne)},writePackedVarint:function(K,pe){pe.length&&this.writeMessage(K,N,pe)},writePackedSVarint:function(K,pe){pe.length&&this.writeMessage(K,j,pe)},writePackedBoolean:function(K,pe){pe.length&&this.writeMessage(K,$,pe)},writePackedFloat:function(K,pe){pe.length&&this.writeMessage(K,F,pe)},writePackedDouble:function(K,pe){pe.length&&this.writeMessage(K,V,pe)},writePackedFixed32:function(K,pe){pe.length&&this.writeMessage(K,X,pe)},writePackedSFixed32:function(K,pe){pe.length&&this.writeMessage(K,ee,pe)},writePackedFixed64:function(K,pe){pe.length&&this.writeMessage(K,se,pe)},writePackedSFixed64:function(K,pe){pe.length&&this.writeMessage(K,he,pe)},writeBytesField:function(K,pe){this.writeTag(K,l.Bytes),this.writeBytes(pe)},writeFixed32Field:function(K,pe){this.writeTag(K,l.Fixed32),this.writeFixed32(pe)},writeSFixed32Field:function(K,pe){this.writeTag(K,l.Fixed32),this.writeSFixed32(pe)},writeFixed64Field:function(K,pe){this.writeTag(K,l.Fixed64),this.writeFixed64(pe)},writeSFixed64Field:function(K,pe){this.writeTag(K,l.Fixed64),this.writeSFixed64(pe)},writeVarintField:function(K,pe){this.writeTag(K,l.Varint),this.writeVarint(pe)},writeSVarintField:function(K,pe){this.writeTag(K,l.Varint),this.writeSVarint(pe)},writeStringField:function(K,pe){this.writeTag(K,l.Bytes),this.writeString(pe)},writeFloatField:function(K,pe){this.writeTag(K,l.Fixed32),this.writeFloat(pe)},writeDoubleField:function(K,pe){this.writeTag(K,l.Fixed64),this.writeDouble(pe)},writeBooleanField:function(K,pe){this.writeVarintField(K,!!pe)}},JU}var tB=a(Wpe());let rB=3;function zht(f,l,p){f===1&&p.readMessage(Fht,l)}function Fht(f,l,p){if(f===3){let{id:m,bitmap:_,width:S,height:T,left:C,top:N,advance:j}=p.readMessage(Uht,{});l.push({id:m,bitmap:new XT({width:S+2*rB,height:T+2*rB},_),metrics:{width:S,height:T,left:C,top:N,advance:j}})}}function Uht(f,l,p){f===1?l.id=p.readVarint():f===2?l.bitmap=p.readBytes():f===3?l.width=p.readVarint():f===4?l.height=p.readVarint():f===5?l.left=p.readSVarint():f===6?l.top=p.readSVarint():f===7&&(l.advance=p.readVarint())}let Bht=rB;function $pe(f){let l=0,p=0;for(let T of f)l+=T.w*T.h,p=Math.max(p,T.w);f.sort((T,C)=>C.h-T.h);let m=[{x:0,y:0,w:Math.max(Math.ceil(Math.sqrt(l/.95)),p),h:1/0}],_=0,S=0;for(let T of f)for(let C=m.length-1;C>=0;C--){let N=m[C];if(!(T.w>N.w||T.h>N.h)){if(T.x=N.x,T.y=N.y,S=Math.max(S,T.y+T.h),_=Math.max(_,T.x+T.w),T.w===N.w&&T.h===N.h){let j=m.pop();C<m.length&&(m[C]=j)}else T.h===N.h?(N.x+=T.w,N.w-=T.w):T.w===N.w?(N.y+=T.h,N.h-=T.h):(m.push({x:N.x+T.w,y:N.y,w:N.w-T.w,h:T.h}),N.y+=T.h,N.h-=T.h);break}}return{w:_,h:S,fill:l/(_*S)||0}}let Tu=1;class nB{constructor(l,{pixelRatio:p,version:m,stretchX:_,stretchY:S,content:T,textFitWidth:C,textFitHeight:N}){this.paddedRect=l,this.pixelRatio=p,this.stretchX=_,this.stretchY=S,this.content=T,this.version=m,this.textFitWidth=C,this.textFitHeight=N}get tl(){return[this.paddedRect.x+Tu,this.paddedRect.y+Tu]}get br(){return[this.paddedRect.x+this.paddedRect.w-Tu,this.paddedRect.y+this.paddedRect.h-Tu]}get tlbr(){return this.tl.concat(this.br)}get displaySize(){return[(this.paddedRect.w-2*Tu)/this.pixelRatio,(this.paddedRect.h-2*Tu)/this.pixelRatio]}}class Zpe{constructor(l,p){let m={},_={};this.haveRenderCallbacks=[];let S=[];this.addImages(l,m,S),this.addImages(p,_,S);let{w:T,h:C}=$pe(S),N=new $c({width:T||1,height:C||1});for(let j in l){let F=l[j],V=m[j].paddedRect;$c.copy(F.data,N,{x:0,y:0},{x:V.x+Tu,y:V.y+Tu},F.data)}for(let j in p){let F=p[j],V=_[j].paddedRect,$=V.x+Tu,X=V.y+Tu,ee=F.data.width,se=F.data.height;$c.copy(F.data,N,{x:0,y:0},{x:$,y:X},F.data),$c.copy(F.data,N,{x:0,y:se-1},{x:$,y:X-1},{width:ee,height:1}),$c.copy(F.data,N,{x:0,y:0},{x:$,y:X+se},{width:ee,height:1}),$c.copy(F.data,N,{x:ee-1,y:0},{x:$-1,y:X},{width:1,height:se}),$c.copy(F.data,N,{x:0,y:0},{x:$+ee,y:X},{width:1,height:se})}this.image=N,this.iconPositions=m,this.patternPositions=_}addImages(l,p,m){for(let _ in l){let S=l[_],T={x:0,y:0,w:S.data.width+2*Tu,h:S.data.height+2*Tu};m.push(T),p[_]=new nB(T,S),S.hasRenderCallback&&this.haveRenderCallbacks.push(_)}}patchUpdatedImages(l,p){l.dispatchRenderCallbacks(this.haveRenderCallbacks);for(let m in l.updatedImages)this.patchUpdatedImage(this.iconPositions[m],l.getImage(m),p),this.patchUpdatedImage(this.patternPositions[m],l.getImage(m),p)}patchUpdatedImage(l,p,m){if(!l||!p||l.version===p.version)return;l.version=p.version;let[_,S]=l.tl;m.update(p.data,void 0,{x:_,y:S})}}var bv;cr("ImagePosition",nB),cr("ImageAtlas",Zpe),o.al=void 0,(bv=o.al||(o.al={}))[bv.none=0]="none",bv[bv.horizontal=1]="horizontal",bv[bv.vertical=2]="vertical",bv[bv.horizontalOnly=3]="horizontalOnly";let QN=-17;class lI{constructor(){this.scale=1,this.fontStack="",this.imageName=null,this.verticalAlign="bottom"}static forText(l,p,m){let _=new lI;return _.scale=l||1,_.fontStack=p,_.verticalAlign=m||"bottom",_}static forImage(l,p){let m=new lI;return m.imageName=l,m.verticalAlign=p||"bottom",m}}class Px{constructor(){this.text="",this.sectionIndex=[],this.sections=[],this.imageSectionID=null}static fromFeature(l,p){let m=new Px;for(let _=0;_<l.sections.length;_++){let S=l.sections[_];S.image?m.addImageSection(S):m.addTextSection(S,p)}return m}length(){return this.text.length}getSection(l){return this.sections[this.sectionIndex[l]]}getSectionIndex(l){return this.sectionIndex[l]}getCharCode(l){return this.text.charCodeAt(l)}verticalizePunctuation(){this.text=function(l){let p="";for(let m=0;m<l.length;m++){let _=l.charCodeAt(m+1)||null,S=l.charCodeAt(m-1)||null;p+=_&&c1(_)&&!sI[l[m+1]]||S&&c1(S)&&!sI[l[m-1]]||!sI[l[m]]?l[m]:sI[l[m]]}return p}(this.text)}trim(){let l=0;for(let m=0;m<this.text.length&&eD[this.text.charCodeAt(m)];m++)l++;let p=this.text.length;for(let m=this.text.length-1;m>=0&&m>=l&&eD[this.text.charCodeAt(m)];m--)p--;this.text=this.text.substring(l,p),this.sectionIndex=this.sectionIndex.slice(l,p)}substring(l,p){let m=new Px;return m.text=this.text.substring(l,p),m.sectionIndex=this.sectionIndex.slice(l,p),m.sections=this.sections,m}toString(){return this.text}getMaxScale(){return this.sectionIndex.reduce((l,p)=>Math.max(l,this.sections[p].scale),0)}getMaxImageSize(l){let p=0,m=0;for(let _=0;_<this.length();_++){let S=this.getSection(_);if(S.imageName){let T=l[S.imageName];if(!T)continue;let C=T.displaySize;p=Math.max(p,C[0]),m=Math.max(m,C[1])}}return{maxImageWidth:p,maxImageHeight:m}}addTextSection(l,p){this.text+=l.text,this.sections.push(lI.forText(l.scale,l.fontStack||p,l.verticalAlign));let m=this.sections.length-1;for(let _=0;_<l.text.length;++_)this.sectionIndex.push(m)}addImageSection(l){let p=l.image?l.image.name:"";if(p.length===0)return void Rt("Can't add FormattedSection with an empty image.");let m=this.getNextImageSectionCharCode();m?(this.text+=String.fromCharCode(m),this.sections.push(lI.forImage(p,l.verticalAlign)),this.sectionIndex.push(this.sections.length-1)):Rt("Reached maximum number of images 6401")}getNextImageSectionCharCode(){return this.imageSectionID?this.imageSectionID>=63743?null:++this.imageSectionID:(this.imageSectionID=57344,this.imageSectionID)}}function JN(f,l,p,m,_,S,T,C,N,j,F,V,$,X,ee){let se=Px.fromFeature(f,_),he;V===o.al.vertical&&se.verticalizePunctuation();let{processBidirectionalText:Ee,processStyledBidirectionalText:Ve}=zf;if(Ee&&se.sections.length===1){he=[];let pe=Ee(se.toString(),oB(se,j,S,l,m,X));for(let Ne of pe){let ot=new Px;ot.text=Ne,ot.sections=se.sections;for(let Tt=0;Tt<Ne.length;Tt++)ot.sectionIndex.push(0);he.push(ot)}}else if(Ve){he=[];let pe=Ve(se.text,se.sectionIndex,oB(se,j,S,l,m,X));for(let Ne of pe){let ot=new Px;ot.text=Ne[0],ot.sectionIndex=Ne[1],ot.sections=se.sections,he.push(ot)}}else he=function(pe,Ne){let ot=[],Tt=pe.text,at=0;for(let dt of Ne)ot.push(pe.substring(at,dt)),at=dt;return at<Tt.length&&ot.push(pe.substring(at,Tt.length)),ot}(se,oB(se,j,S,l,m,X));let Oe=[],K={positionedLines:Oe,text:se.toString(),top:F[1],bottom:F[1],left:F[0],right:F[0],writingMode:V,iconsInText:!1,verticalizable:!1};return function(pe,Ne,ot,Tt,at,dt,kt,It,Ut,vt,hr,Br){let jr=0,xr=0,Jn=0,Xi=0,Ua=It==="right"?1:It==="left"?0:.5,Fs=Fa/Br,Yc=0;for(let Fi of at){Fi.trim();let is=Fi.getMaxScale(),Ss={positionedGlyphs:[],lineOffset:0};pe.positionedLines[Yc]=Ss;let Ts=Ss.positionedGlyphs,$l=0;if(!Fi.length()){xr+=dt,++Yc;continue}let Kc=Wht(Tt,Fi,Fs);for(let Mu=0;Mu<Fi.length();Mu++){let Ba=Fi.getSection(Mu),ss=Fi.getSectionIndex(Mu),ls=Fi.getCharCode(Mu),Ia=$ht(Ut,hr,ls),yi;if(Ba.imageName){if(pe.iconsInText=!0,Ba.scale=Ba.scale*Fs,yi=Yht(Ba,Ia,is,Kc,Tt),!yi)continue;$l=Math.max($l,yi.imageOffset)}else if(yi=Zht(Ba,ls,Ia,Kc,Ne,ot),!yi)continue;let{rect:Bf,metrics:kx,baselineOffset:Vf}=yi;Ts.push({glyph:ls,imageName:Ba.imageName,x:jr,y:xr+Vf+QN,vertical:Ia,scale:Ba.scale,fontStack:Ba.fontStack,sectionIndex:ss,metrics:kx,rect:Bf}),Ia?(pe.verticalizable=!0,jr+=(Ba.imageName?kx.advance:Fa)*Ba.scale+vt):jr+=kx.advance*Ba.scale+vt}Ts.length!==0&&(Jn=Math.max(jr-vt,Jn),Kht(Ts,0,Ts.length-1,Ua)),jr=0,Ss.lineOffset=Math.max($l,(is-1)*Fa);let as=dt*is+$l;xr+=as,Xi=Math.max(as,Xi),++Yc}let{horizontalAlign:Iu,verticalAlign:Es}=iB(kt);(function(Fi,is,Ss,Ts,$l,Kc,as,Mu,Ba){let ss=(is-Ss)*$l,ls=0;ls=Kc!==as?-Mu*Ts-QN:-Ts*Ba*as+.5*as;for(let Ia of Fi)for(let yi of Ia.positionedGlyphs)yi.x+=ss,yi.y+=ls})(pe.positionedLines,Ua,Iu,Es,Jn,Xi,dt,xr,at.length),pe.top+=-Es*xr,pe.bottom=pe.top+xr,pe.left+=-Iu*Jn,pe.right=pe.left+Jn}(K,l,p,m,he,T,C,N,V,j,$,ee),!function(pe){for(let Ne of pe)if(Ne.positionedGlyphs.length!==0)return!1;return!0}(Oe)&&K}let eD={9:!0,10:!0,11:!0,12:!0,13:!0,32:!0},Vht={10:!0,32:!0,38:!0,41:!0,43:!0,45:!0,47:!0,173:!0,183:!0,8203:!0,8208:!0,8211:!0,8231:!0},Ght={40:!0};function Ype(f,l,p,m,_,S){if(l.imageName){let T=m[l.imageName];return T?T.displaySize[0]*l.scale*Fa/S+_:0}{let T=p[l.fontStack],C=T&&T[f];return C?C.metrics.advance*l.scale+_:0}}function Kpe(f,l,p,m){let _=Math.pow(f-l,2);return m?f<l?_/2:2*_:_+Math.abs(p)*p}function Hht(f,l,p){let m=0;return f===10&&(m-=1e4),p&&(m+=150),f!==40&&f!==65288||(m+=50),l!==41&&l!==65289||(m+=50),m}function Xpe(f,l,p,m,_,S){let T=null,C=Kpe(l,p,_,S);for(let N of m){let j=Kpe(l-N.x,p,_,S)+N.badness;j<=C&&(T=N,C=j)}return{index:f,x:l,priorBreak:T,badness:C}}function Qpe(f){return f?Qpe(f.priorBreak).concat(f.index):[]}function oB(f,l,p,m,_,S){if(!f)return[];let T=[],C=function(V,$,X,ee,se,he){let Ee=0;for(let Ve=0;Ve<V.length();Ve++){let Oe=V.getSection(Ve);Ee+=Ype(V.getCharCode(Ve),Oe,ee,se,$,he)}return Ee/Math.max(1,Math.ceil(Ee/X))}(f,l,p,m,_,S),N=f.text.indexOf("\u200B")>=0,j=0;for(let V=0;V<f.length();V++){let $=f.getSection(V),X=f.getCharCode(V);if(eD[X]||(j+=Ype(X,$,m,_,l,S)),V<f.length()-1){let ee=!((F=X)<11904)&&(!!$n["CJK Compatibility Forms"](F)||!!$n["CJK Compatibility"](F)||!!$n["CJK Strokes"](F)||!!$n["CJK Symbols and Punctuation"](F)||!!$n["Enclosed CJK Letters and Months"](F)||!!$n["Halfwidth and Fullwidth Forms"](F)||!!$n["Ideographic Description Characters"](F)||!!$n["Vertical Forms"](F)||FT.test(String.fromCodePoint(F)));(Vht[X]||ee||$.imageName||V!==f.length()-2&&Ght[f.getCharCode(V+1)])&&T.push(Xpe(V+1,j,C,T,Hht(X,f.getCharCode(V+1),ee&&N),!1))}}var F;return Qpe(Xpe(f.length(),j,C,T,0,!0))}function iB(f){let l=.5,p=.5;switch(f){case"right":case"top-right":case"bottom-right":l=1;break;case"left":case"top-left":case"bottom-left":l=0}switch(f){case"bottom":case"bottom-right":case"bottom-left":p=1;break;case"top":case"top-right":case"top-left":p=0}return{horizontalAlign:l,verticalAlign:p}}function Wht(f,l,p){let m=l.getMaxScale()*Fa,{maxImageWidth:_,maxImageHeight:S}=l.getMaxImageSize(f),T=Math.max(m,S*p);return{verticalLineContentWidth:Math.max(m,_*p),horizontalLineContentHeight:T}}function Jpe(f){switch(f){case"top":return 0;case"center":return .5;default:return 1}}function $ht(f,l,p){return!(f===o.al.horizontal||!l&&!Ex(p)||l&&(eD[p]||(m=p,new RegExp("\\p{sc=Arab}","u").test(String.fromCodePoint(m)))));var m}function Zht(f,l,p,m,_,S){let T=S[f.fontStack],C=function(j,F,V,$){if(j&&j.rect)return j;let X=F[V.fontStack],ee=X&&X[$];return ee?{rect:null,metrics:ee.metrics}:null}(T&&T[l],_,f,l);if(C===null)return null;let N;if(p)N=m.verticalLineContentWidth-f.scale*Fa;else{let j=Jpe(f.verticalAlign);N=(m.horizontalLineContentHeight-f.scale*Fa)*j}return{rect:C.rect,metrics:C.metrics,baselineOffset:N}}function Yht(f,l,p,m,_){let S=_[f.imageName];if(!S)return null;let T=S.paddedRect,C=S.displaySize,N={width:C[0],height:C[1],left:Tu,top:-3,advance:l?C[1]:C[0]},j;if(l)j=m.verticalLineContentWidth-C[1]*f.scale;else{let F=Jpe(f.verticalAlign);j=(m.horizontalLineContentHeight-C[1]*f.scale)*F}return{rect:T,metrics:N,baselineOffset:j,imageOffset:(l?C[0]:C[1])*f.scale-Fa*p}}function Kht(f,l,p,m){if(m===0)return;let _=f[p],S=(f[p].x+_.metrics.advance*_.scale)*m;for(let T=l;T<=p;T++)f[T].x-=S}function Xht(f,l,p){let{horizontalAlign:m,verticalAlign:_}=iB(p),S=l[0]-f.displaySize[0]*m,T=l[1]-f.displaySize[1]*_;return{image:f,top:T,bottom:T+f.displaySize[1],left:S,right:S+f.displaySize[0]}}function efe(f){var l,p;let m=f.left,_=f.top,S=f.right-m,T=f.bottom-_,C=(l=f.image.textFitWidth)!==null&&l!==void 0?l:"stretchOrShrink",N=(p=f.image.textFitHeight)!==null&&p!==void 0?p:"stretchOrShrink",j=(f.image.content[2]-f.image.content[0])/(f.image.content[3]-f.image.content[1]);if(N==="proportional"){if(C==="stretchOnly"&&S/T<j||C==="proportional"){let F=Math.ceil(T*j);m*=F/S,S=F}}else if(C==="proportional"&&N==="stretchOnly"&&j!==0&&S/T>j){let F=Math.ceil(S/j);_*=F/T,T=F}return{x1:m,y1:_,x2:m+S,y2:_+T}}function tfe(f,l,p,m,_,S){let T=f.image,C;if(T.content){let he=T.content,Ee=T.pixelRatio||1;C=[he[0]/Ee,he[1]/Ee,T.displaySize[0]-he[2]/Ee,T.displaySize[1]-he[3]/Ee]}let N=l.left*S,j=l.right*S,F,V,$,X;p==="width"||p==="both"?(X=_[0]+N-m[3],V=_[0]+j+m[1]):(X=_[0]+(N+j-T.displaySize[0])/2,V=X+T.displaySize[0]);let ee=l.top*S,se=l.bottom*S;return p==="height"||p==="both"?(F=_[1]+ee-m[0],$=_[1]+se+m[2]):(F=_[1]+(ee+se-T.displaySize[1])/2,$=F+T.displaySize[1]),{image:T,top:F,right:V,bottom:$,left:X,collisionPadding:C}}let uI=255,nh=128,xv=uI*nh;function rfe(f,l){let{expression:p}=l;if(p.kind==="constant")return{kind:"constant",layoutSize:p.evaluate(new gi(f+1))};if(p.kind==="source")return{kind:"source"};{let{zoomStops:m,interpolationType:_}=p,S=0;for(;S<m.length&&m[S]<=f;)S++;S=Math.max(0,S-1);let T=S;for(;T<m.length&&m[T]<f+1;)T++;T=Math.min(m.length-1,T);let C=m[S],N=m[T];return p.kind==="composite"?{kind:"composite",minZoom:C,maxZoom:N,interpolationType:_}:{kind:"camera",minZoom:C,maxZoom:N,minSize:p.evaluate(new gi(C)),maxSize:p.evaluate(new gi(N)),interpolationType:_}}}function aB(f,l,p){let m="never",_=f.get(l);return _?m=_:f.get(p)&&(m="always"),m}let Qht=oI.VectorTileFeature.types,Jht=[{name:"a_fade_opacity",components:1,type:"Uint8",offset:0}];function tD(f,l,p,m,_,S,T,C,N,j,F,V,$){let X=C?Math.min(xv,Math.round(C[0])):0,ee=C?Math.min(xv,Math.round(C[1])):0;f.emplaceBack(l,p,Math.round(32*m),Math.round(32*_),S,T,(X<<1)+(N?1:0),ee,16*j,16*F,256*V,256*$)}function sB(f,l,p){f.emplaceBack(l.x,l.y,p),f.emplaceBack(l.x,l.y,p),f.emplaceBack(l.x,l.y,p),f.emplaceBack(l.x,l.y,p)}function emt(f){for(let l of f.sections)if(NU(l.text))return!0;return!1}class lB{constructor(l){this.layoutVertexArray=new ji,this.indexArray=new Eo,this.programConfigurations=l,this.segments=new So,this.dynamicLayoutVertexArray=new ti,this.opacityVertexArray=new qi,this.hasVisibleVertices=!1,this.placedSymbolArray=new ke}isEmpty(){return this.layoutVertexArray.length===0&&this.indexArray.length===0&&this.dynamicLayoutVertexArray.length===0&&this.opacityVertexArray.length===0}upload(l,p,m,_){this.isEmpty()||(m&&(this.layoutVertexBuffer=l.createVertexBuffer(this.layoutVertexArray,Dht.members),this.indexBuffer=l.createIndexBuffer(this.indexArray,p),this.dynamicLayoutVertexBuffer=l.createVertexBuffer(this.dynamicLayoutVertexArray,Lht.members,!0),this.opacityVertexBuffer=l.createVertexBuffer(this.opacityVertexArray,Jht,!0),this.opacityVertexBuffer.itemSize=1),(m||_)&&this.programConfigurations.upload(l))}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy(),this.dynamicLayoutVertexBuffer.destroy(),this.opacityVertexBuffer.destroy())}}cr("SymbolBuffers",lB);class uB{constructor(l,p,m){this.layoutVertexArray=new l,this.layoutAttributes=p,this.indexArray=new m,this.segments=new So,this.collisionVertexArray=new ii}upload(l){this.layoutVertexBuffer=l.createVertexBuffer(this.layoutVertexArray,this.layoutAttributes),this.indexBuffer=l.createIndexBuffer(this.indexArray),this.collisionVertexBuffer=l.createVertexBuffer(this.collisionVertexArray,kht.members,!0)}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.segments.destroy(),this.collisionVertexBuffer.destroy())}}cr("CollisionBuffers",uB);class Nx{constructor(l){this.collisionBoxArray=l.collisionBoxArray,this.zoom=l.zoom,this.overscaling=l.overscaling,this.layers=l.layers,this.layerIds=this.layers.map(T=>T.id),this.index=l.index,this.pixelRatio=l.pixelRatio,this.sourceLayerIndex=l.sourceLayerIndex,this.hasPattern=!1,this.hasRTLText=!1,this.sortKeyRanges=[],this.collisionCircleArray=[];let p=this.layers[0]._unevaluatedLayout._values;this.textSizeData=rfe(this.zoom,p["text-size"]),this.iconSizeData=rfe(this.zoom,p["icon-size"]);let m=this.layers[0].layout,_=m.get("symbol-sort-key"),S=m.get("symbol-z-order");this.canOverlap=aB(m,"text-overlap","text-allow-overlap")!=="never"||aB(m,"icon-overlap","icon-allow-overlap")!=="never"||m.get("text-ignore-placement")||m.get("icon-ignore-placement"),this.sortFeaturesByKey=S!=="viewport-y"&&!_.isConstant(),this.sortFeaturesByY=(S==="viewport-y"||S==="auto"&&!this.sortFeaturesByKey)&&this.canOverlap,m.get("symbol-placement")==="point"&&(this.writingModes=m.get("text-writing-mode").map(T=>o.al[T])),this.stateDependentLayerIds=this.layers.filter(T=>T.isStateDependent()).map(T=>T.id),this.sourceID=l.sourceID}createArrays(){this.text=new lB(new rh(this.layers,this.zoom,l=>/^text/.test(l))),this.icon=new lB(new rh(this.layers,this.zoom,l=>/^icon/.test(l))),this.glyphOffsetArray=new He,this.lineVertexArray=new Be,this.symbolInstances=new Fe,this.textAnchorOffsets=new ht}calculateGlyphDependencies(l,p,m,_,S){for(let T=0;T<l.length;T++)if(p[l.charCodeAt(T)]=!0,(m||_)&&S){let C=sI[l.charAt(T)];C&&(p[C.charCodeAt(0)]=!0)}}populate(l,p,m){let _=this.layers[0],S=_.layout,T=S.get("text-font"),C=S.get("text-field"),N=S.get("icon-image"),j=(C.value.kind!=="constant"||C.value.value instanceof ja&&!C.value.value.isEmpty()||C.value.value.toString().length>0)&&(T.value.kind!=="constant"||T.value.value.length>0),F=N.value.kind!=="constant"||!!N.value.value||Object.keys(N.parameters).length>0,V=S.get("symbol-sort-key");if(this.features=[],!j&&!F)return;let $=p.iconDependencies,X=p.glyphDependencies,ee=p.availableImages,se=new gi(this.zoom);for(let{feature:he,id:Ee,index:Ve,sourceLayerIndex:Oe}of l){let K=_._featureFilter.needGeometry,pe=y1(he,K);if(!_._featureFilter.filter(se,pe,m))continue;let Ne,ot;if(K||(pe.geometry=v1(he)),j){let at=_.getValueAndResolveTokens("text-field",pe,m,ee),dt=ja.factory(at),kt=this.hasRTLText=this.hasRTLText||emt(dt);(!kt||zf.getRTLTextPluginStatus()==="unavailable"||kt&&zf.isParsed())&&(Ne=jht(dt,_,pe))}if(F){let at=_.getValueAndResolveTokens("icon-image",pe,m,ee);ot=at instanceof wu?at:wu.fromString(at)}if(!Ne&&!ot)continue;let Tt=this.sortFeaturesByKey?V.evaluate(pe,{},m):void 0;if(this.features.push({id:Ee,text:Ne,icon:ot,index:Ve,sourceLayerIndex:Oe,geometry:pe.geometry,properties:he.properties,type:Qht[he.type],sortKey:Tt}),ot&&($[ot.name]=!0),Ne){let at=T.evaluate(pe,{},m).join(","),dt=S.get("text-rotation-alignment")!=="viewport"&&S.get("symbol-placement")!=="point";this.allowVerticalPlacement=this.writingModes&&this.writingModes.indexOf(o.al.vertical)>=0;for(let kt of Ne.sections)if(kt.image)$[kt.image.name]=!0;else{let It=wx(Ne.toString()),Ut=kt.fontStack||at,vt=X[Ut]=X[Ut]||{};this.calculateGlyphDependencies(kt.text,vt,dt,this.allowVerticalPlacement,It)}}}S.get("symbol-placement")==="line"&&(this.features=function(he){let Ee={},Ve={},Oe=[],K=0;function pe(at){Oe.push(he[at]),K++}function Ne(at,dt,kt){let It=Ve[at];return delete Ve[at],Ve[dt]=It,Oe[It].geometry[0].pop(),Oe[It].geometry[0]=Oe[It].geometry[0].concat(kt[0]),It}function ot(at,dt,kt){let It=Ee[dt];return delete Ee[dt],Ee[at]=It,Oe[It].geometry[0].shift(),Oe[It].geometry[0]=kt[0].concat(Oe[It].geometry[0]),It}function Tt(at,dt,kt){let It=kt?dt[0][dt[0].length-1]:dt[0][0];return`${at}:${It.x}:${It.y}`}for(let at=0;at<he.length;at++){let dt=he[at],kt=dt.geometry,It=dt.text?dt.text.toString():null;if(!It){pe(at);continue}let Ut=Tt(It,kt),vt=Tt(It,kt,!0);if(Ut in Ve&&vt in Ee&&Ve[Ut]!==Ee[vt]){let hr=ot(Ut,vt,kt),Br=Ne(Ut,vt,Oe[hr].geometry);delete Ee[Ut],delete Ve[vt],Ve[Tt(It,Oe[Br].geometry,!0)]=Br,Oe[hr].geometry=null}else Ut in Ve?Ne(Ut,vt,kt):vt in Ee?ot(Ut,vt,kt):(pe(at),Ee[Ut]=K-1,Ve[vt]=K-1)}return Oe.filter(at=>at.geometry)}(this.features)),this.sortFeaturesByKey&&this.features.sort((he,Ee)=>he.sortKey-Ee.sortKey)}update(l,p,m){this.stateDependentLayers.length&&(this.text.programConfigurations.updatePaintArrays(l,p,this.layers,m),this.icon.programConfigurations.updatePaintArrays(l,p,this.layers,m))}isEmpty(){return this.symbolInstances.length===0&&!this.hasRTLText}uploadPending(){return!this.uploaded||this.text.programConfigurations.needsUpload||this.icon.programConfigurations.needsUpload}upload(l){!this.uploaded&&this.hasDebugData()&&(this.textCollisionBox.upload(l),this.iconCollisionBox.upload(l)),this.text.upload(l,this.sortFeaturesByY,!this.uploaded,this.text.programConfigurations.needsUpload),this.icon.upload(l,this.sortFeaturesByY,!this.uploaded,this.icon.programConfigurations.needsUpload),this.uploaded=!0}destroyDebugData(){this.textCollisionBox.destroy(),this.iconCollisionBox.destroy()}destroy(){this.text.destroy(),this.icon.destroy(),this.hasDebugData()&&this.destroyDebugData()}addToLineVertexArray(l,p){let m=this.lineVertexArray.length;if(l.segment!==void 0){let _=l.dist(p[l.segment+1]),S=l.dist(p[l.segment]),T={};for(let C=l.segment+1;C<p.length;C++)T[C]={x:p[C].x,y:p[C].y,tileUnitDistanceFromAnchor:_},C<p.length-1&&(_+=p[C+1].dist(p[C]));for(let C=l.segment||0;C>=0;C--)T[C]={x:p[C].x,y:p[C].y,tileUnitDistanceFromAnchor:S},C>0&&(S+=p[C-1].dist(p[C]));for(let C=0;C<p.length;C++){let N=T[C];this.lineVertexArray.emplaceBack(N.x,N.y,N.tileUnitDistanceFromAnchor)}}return{lineStartIndex:m,lineLength:this.lineVertexArray.length-m}}addSymbols(l,p,m,_,S,T,C,N,j,F,V,$){let X=l.indexArray,ee=l.layoutVertexArray,se=l.segments.prepareSegment(4*p.length,ee,X,this.canOverlap?T.sortKey:void 0),he=this.glyphOffsetArray.length,Ee=se.vertexLength,Ve=this.allowVerticalPlacement&&C===o.al.vertical?Math.PI/2:0,Oe=T.text&&T.text.sections;for(let K=0;K<p.length;K++){let{tl:pe,tr:Ne,bl:ot,br:Tt,tex:at,pixelOffsetTL:dt,pixelOffsetBR:kt,minFontScaleX:It,minFontScaleY:Ut,glyphOffset:vt,isSDF:hr,sectionIndex:Br}=p[K],jr=se.vertexLength,xr=vt[1];tD(ee,N.x,N.y,pe.x,xr+pe.y,at.x,at.y,m,hr,dt.x,dt.y,It,Ut),tD(ee,N.x,N.y,Ne.x,xr+Ne.y,at.x+at.w,at.y,m,hr,kt.x,dt.y,It,Ut),tD(ee,N.x,N.y,ot.x,xr+ot.y,at.x,at.y+at.h,m,hr,dt.x,kt.y,It,Ut),tD(ee,N.x,N.y,Tt.x,xr+Tt.y,at.x+at.w,at.y+at.h,m,hr,kt.x,kt.y,It,Ut),sB(l.dynamicLayoutVertexArray,N,Ve),X.emplaceBack(jr,jr+2,jr+1),X.emplaceBack(jr+1,jr+2,jr+3),se.vertexLength+=4,se.primitiveLength+=2,this.glyphOffsetArray.emplaceBack(vt[0]),K!==p.length-1&&Br===p[K+1].sectionIndex||l.programConfigurations.populatePaintArrays(ee.length,T,T.index,{},$,Oe&&Oe[Br])}l.placedSymbolArray.emplaceBack(N.x,N.y,he,this.glyphOffsetArray.length-he,Ee,j,F,N.segment,m?m[0]:0,m?m[1]:0,_[0],_[1],C,0,!1,0,V)}_addCollisionDebugVertex(l,p,m,_,S,T){return p.emplaceBack(0,0),l.emplaceBack(m.x,m.y,_,S,Math.round(T.x),Math.round(T.y))}addCollisionDebugVertices(l,p,m,_,S,T,C){let N=S.segments.prepareSegment(4,S.layoutVertexArray,S.indexArray),j=N.vertexLength,F=S.layoutVertexArray,V=S.collisionVertexArray,$=C.anchorX,X=C.anchorY;this._addCollisionDebugVertex(F,V,T,$,X,new x(l,p)),this._addCollisionDebugVertex(F,V,T,$,X,new x(m,p)),this._addCollisionDebugVertex(F,V,T,$,X,new x(m,_)),this._addCollisionDebugVertex(F,V,T,$,X,new x(l,_)),N.vertexLength+=4;let ee=S.indexArray;ee.emplaceBack(j,j+1),ee.emplaceBack(j+1,j+2),ee.emplaceBack(j+2,j+3),ee.emplaceBack(j+3,j),N.primitiveLength+=4}addDebugCollisionBoxes(l,p,m,_){for(let S=l;S<p;S++){let T=this.collisionBoxArray.get(S);this.addCollisionDebugVertices(T.x1,T.y1,T.x2,T.y2,_?this.textCollisionBox:this.iconCollisionBox,T.anchorPoint,m)}}generateCollisionDebugBuffers(){this.hasDebugData()&&this.destroyDebugData(),this.textCollisionBox=new uB(zi,Vpe.members,za),this.iconCollisionBox=new uB(zi,Vpe.members,za);for(let l=0;l<this.symbolInstances.length;l++){let p=this.symbolInstances.get(l);this.addDebugCollisionBoxes(p.textBoxStartIndex,p.textBoxEndIndex,p,!0),this.addDebugCollisionBoxes(p.verticalTextBoxStartIndex,p.verticalTextBoxEndIndex,p,!0),this.addDebugCollisionBoxes(p.iconBoxStartIndex,p.iconBoxEndIndex,p,!1),this.addDebugCollisionBoxes(p.verticalIconBoxStartIndex,p.verticalIconBoxEndIndex,p,!1)}}_deserializeCollisionBoxesForSymbol(l,p,m,_,S,T,C,N,j){let F={};for(let V=p;V<m;V++){let $=l.get(V);F.textBox={x1:$.x1,y1:$.y1,x2:$.x2,y2:$.y2,anchorPointX:$.anchorPointX,anchorPointY:$.anchorPointY},F.textFeatureIndex=$.featureIndex;break}for(let V=_;V<S;V++){let $=l.get(V);F.verticalTextBox={x1:$.x1,y1:$.y1,x2:$.x2,y2:$.y2,anchorPointX:$.anchorPointX,anchorPointY:$.anchorPointY},F.verticalTextFeatureIndex=$.featureIndex;break}for(let V=T;V<C;V++){let $=l.get(V);F.iconBox={x1:$.x1,y1:$.y1,x2:$.x2,y2:$.y2,anchorPointX:$.anchorPointX,anchorPointY:$.anchorPointY},F.iconFeatureIndex=$.featureIndex;break}for(let V=N;V<j;V++){let $=l.get(V);F.verticalIconBox={x1:$.x1,y1:$.y1,x2:$.x2,y2:$.y2,anchorPointX:$.anchorPointX,anchorPointY:$.anchorPointY},F.verticalIconFeatureIndex=$.featureIndex;break}return F}deserializeCollisionBoxes(l){this.collisionArrays=[];for(let p=0;p<this.symbolInstances.length;p++){let m=this.symbolInstances.get(p);this.collisionArrays.push(this._deserializeCollisionBoxesForSymbol(l,m.textBoxStartIndex,m.textBoxEndIndex,m.verticalTextBoxStartIndex,m.verticalTextBoxEndIndex,m.iconBoxStartIndex,m.iconBoxEndIndex,m.verticalIconBoxStartIndex,m.verticalIconBoxEndIndex))}}hasTextData(){return this.text.segments.get().length>0}hasIconData(){return this.icon.segments.get().length>0}hasDebugData(){return this.textCollisionBox&&this.iconCollisionBox}hasTextCollisionBoxData(){return this.hasDebugData()&&this.textCollisionBox.segments.get().length>0}hasIconCollisionBoxData(){return this.hasDebugData()&&this.iconCollisionBox.segments.get().length>0}addIndicesForPlacedSymbol(l,p){let m=l.placedSymbolArray.get(p),_=m.vertexStartIndex+4*m.numGlyphs;for(let S=m.vertexStartIndex;S<_;S+=4)l.indexArray.emplaceBack(S,S+2,S+1),l.indexArray.emplaceBack(S+1,S+2,S+3)}getSortedSymbolIndexes(l){if(this.sortedAngle===l&&this.symbolInstanceIndexes!==void 0)return this.symbolInstanceIndexes;let p=Math.sin(l),m=Math.cos(l),_=[],S=[],T=[];for(let C=0;C<this.symbolInstances.length;++C){T.push(C);let N=this.symbolInstances.get(C);_.push(0|Math.round(p*N.anchorX+m*N.anchorY)),S.push(N.featureIndex)}return T.sort((C,N)=>_[C]-_[N]||S[N]-S[C]),T}addToSortKeyRanges(l,p){let m=this.sortKeyRanges[this.sortKeyRanges.length-1];m&&m.sortKey===p?m.symbolInstanceEnd=l+1:this.sortKeyRanges.push({sortKey:p,symbolInstanceStart:l,symbolInstanceEnd:l+1})}sortFeatures(l){if(this.sortFeaturesByY&&this.sortedAngle!==l&&!(this.text.segments.get().length>1||this.icon.segments.get().length>1)){this.symbolInstanceIndexes=this.getSortedSymbolIndexes(l),this.sortedAngle=l,this.text.indexArray.clear(),this.icon.indexArray.clear(),this.featureSortOrder=[];for(let p of this.symbolInstanceIndexes){let m=this.symbolInstances.get(p);this.featureSortOrder.push(m.featureIndex),[m.rightJustifiedTextSymbolIndex,m.centerJustifiedTextSymbolIndex,m.leftJustifiedTextSymbolIndex].forEach((_,S,T)=>{_>=0&&T.indexOf(_)===S&&this.addIndicesForPlacedSymbol(this.text,_)}),m.verticalPlacedTextSymbolIndex>=0&&this.addIndicesForPlacedSymbol(this.text,m.verticalPlacedTextSymbolIndex),m.placedIconSymbolIndex>=0&&this.addIndicesForPlacedSymbol(this.icon,m.placedIconSymbolIndex),m.verticalPlacedIconSymbolIndex>=0&&this.addIndicesForPlacedSymbol(this.icon,m.verticalPlacedIconSymbolIndex)}this.text.indexBuffer&&this.text.indexBuffer.updateData(this.text.indexArray),this.icon.indexBuffer&&this.icon.indexBuffer.updateData(this.icon.indexArray)}}}let nfe,ofe;cr("SymbolBucket",Nx,{omit:["layers","collisionBoxArray","features","compareText"]}),Nx.MAX_GLYPHS=65535,Nx.addDynamicAttributes=sB;var cB={get paint(){return ofe=ofe||new Ea({"icon-opacity":new $r(ne.paint_symbol["icon-opacity"]),"icon-color":new $r(ne.paint_symbol["icon-color"]),"icon-halo-color":new $r(ne.paint_symbol["icon-halo-color"]),"icon-halo-width":new $r(ne.paint_symbol["icon-halo-width"]),"icon-halo-blur":new $r(ne.paint_symbol["icon-halo-blur"]),"icon-translate":new Sr(ne.paint_symbol["icon-translate"]),"icon-translate-anchor":new Sr(ne.paint_symbol["icon-translate-anchor"]),"text-opacity":new $r(ne.paint_symbol["text-opacity"]),"text-color":new $r(ne.paint_symbol["text-color"],{runtimeType:Vr,getOverride:f=>f.textColor,hasOverride:f=>!!f.textColor}),"text-halo-color":new $r(ne.paint_symbol["text-halo-color"]),"text-halo-width":new $r(ne.paint_symbol["text-halo-width"]),"text-halo-blur":new $r(ne.paint_symbol["text-halo-blur"]),"text-translate":new Sr(ne.paint_symbol["text-translate"]),"text-translate-anchor":new Sr(ne.paint_symbol["text-translate-anchor"])})},get layout(){return nfe=nfe||new Ea({"symbol-placement":new Sr(ne.layout_symbol["symbol-placement"]),"symbol-spacing":new Sr(ne.layout_symbol["symbol-spacing"]),"symbol-avoid-edges":new Sr(ne.layout_symbol["symbol-avoid-edges"]),"symbol-sort-key":new $r(ne.layout_symbol["symbol-sort-key"]),"symbol-z-order":new Sr(ne.layout_symbol["symbol-z-order"]),"icon-allow-overlap":new Sr(ne.layout_symbol["icon-allow-overlap"]),"icon-overlap":new Sr(ne.layout_symbol["icon-overlap"]),"icon-ignore-placement":new Sr(ne.layout_symbol["icon-ignore-placement"]),"icon-optional":new Sr(ne.layout_symbol["icon-optional"]),"icon-rotation-alignment":new Sr(ne.layout_symbol["icon-rotation-alignment"]),"icon-size":new $r(ne.layout_symbol["icon-size"]),"icon-text-fit":new Sr(ne.layout_symbol["icon-text-fit"]),"icon-text-fit-padding":new Sr(ne.layout_symbol["icon-text-fit-padding"]),"icon-image":new $r(ne.layout_symbol["icon-image"]),"icon-rotate":new $r(ne.layout_symbol["icon-rotate"]),"icon-padding":new $r(ne.layout_symbol["icon-padding"]),"icon-keep-upright":new Sr(ne.layout_symbol["icon-keep-upright"]),"icon-offset":new $r(ne.layout_symbol["icon-offset"]),"icon-anchor":new $r(ne.layout_symbol["icon-anchor"]),"icon-pitch-alignment":new Sr(ne.layout_symbol["icon-pitch-alignment"]),"text-pitch-alignment":new Sr(ne.layout_symbol["text-pitch-alignment"]),"text-rotation-alignment":new Sr(ne.layout_symbol["text-rotation-alignment"]),"text-field":new $r(ne.layout_symbol["text-field"]),"text-font":new $r(ne.layout_symbol["text-font"]),"text-size":new $r(ne.layout_symbol["text-size"]),"text-max-width":new $r(ne.layout_symbol["text-max-width"]),"text-line-height":new Sr(ne.layout_symbol["text-line-height"]),"text-letter-spacing":new $r(ne.layout_symbol["text-letter-spacing"]),"text-justify":new $r(ne.layout_symbol["text-justify"]),"text-radial-offset":new $r(ne.layout_symbol["text-radial-offset"]),"text-variable-anchor":new Sr(ne.layout_symbol["text-variable-anchor"]),"text-variable-anchor-offset":new $r(ne.layout_symbol["text-variable-anchor-offset"]),"text-anchor":new $r(ne.layout_symbol["text-anchor"]),"text-max-angle":new Sr(ne.layout_symbol["text-max-angle"]),"text-writing-mode":new Sr(ne.layout_symbol["text-writing-mode"]),"text-rotate":new $r(ne.layout_symbol["text-rotate"]),"text-padding":new Sr(ne.layout_symbol["text-padding"]),"text-keep-upright":new Sr(ne.layout_symbol["text-keep-upright"]),"text-transform":new $r(ne.layout_symbol["text-transform"]),"text-offset":new $r(ne.layout_symbol["text-offset"]),"text-allow-overlap":new Sr(ne.layout_symbol["text-allow-overlap"]),"text-overlap":new Sr(ne.layout_symbol["text-overlap"]),"text-ignore-placement":new Sr(ne.layout_symbol["text-ignore-placement"]),"text-optional":new Sr(ne.layout_symbol["text-optional"])})}};class ife{constructor(l){if(l.property.overrides===void 0)throw new Error("overrides must be provided to instantiate FormatSectionOverride class");this.type=l.property.overrides?l.property.overrides.runtimeType:Qt,this.defaultValue=l}evaluate(l){if(l.formattedSection){let p=this.defaultValue.property.overrides;if(p&&p.hasOverride(l.formattedSection))return p.getOverride(l.formattedSection)}return l.feature&&l.featureState?this.defaultValue.evaluate(l.feature,l.featureState):this.defaultValue.property.specification.default}eachChild(l){this.defaultValue.isConstant()||l(this.defaultValue.value._styleExpression.expression)}outputDefined(){return!1}serialize(){return null}}cr("FormatSectionOverride",ife,{omit:["defaultValue"]});class rD extends nc{constructor(l){super(l,cB)}recalculate(l,p){if(super.recalculate(l,p),this.layout.get("icon-rotation-alignment")==="auto"&&(this.layout._values["icon-rotation-alignment"]=this.layout.get("symbol-placement")!=="point"?"map":"viewport"),this.layout.get("text-rotation-alignment")==="auto"&&(this.layout._values["text-rotation-alignment"]=this.layout.get("symbol-placement")!=="point"?"map":"viewport"),this.layout.get("text-pitch-alignment")==="auto"&&(this.layout._values["text-pitch-alignment"]=this.layout.get("text-rotation-alignment")==="map"?"map":"viewport"),this.layout.get("icon-pitch-alignment")==="auto"&&(this.layout._values["icon-pitch-alignment"]=this.layout.get("icon-rotation-alignment")),this.layout.get("symbol-placement")==="point"){let m=this.layout.get("text-writing-mode");if(m){let _=[];for(let S of m)_.indexOf(S)<0&&_.push(S);this.layout._values["text-writing-mode"]=_}else this.layout._values["text-writing-mode"]=["horizontal"]}this._setPaintOverrides()}getValueAndResolveTokens(l,p,m,_){let S=this.layout.get(l).evaluate(p,{},m,_),T=this._unevaluatedLayout._values[l];return T.isDataDriven()||t1(T.value)||!S?S:function(C,N){return N.replace(/{([^{}]+)}/g,(j,F)=>C&&F in C?String(C[F]):"")}(p.properties,S)}createBucket(l){return new Nx(l)}queryRadius(){return 0}queryIntersectsFeature(){throw new Error("Should take a different path in FeatureIndex")}_setPaintOverrides(){for(let l of cB.paint.overridableProperties){if(!rD.hasPaintOverride(this.layout,l))continue;let p=this.paint.get(l),m=new ife(p),_=new cx(m,p.property.specification),S=null;S=p.value.kind==="constant"||p.value.kind==="source"?new IT("source",_):new fx("composite",_,p.value.zoomStops),this.paint._values[l]=new cl(p.property,S,p.parameters)}}_handleOverridablePaintPropertyUpdate(l,p,m){return!(!this.layout||p.isDataDriven()||m.isDataDriven())&&rD.hasPaintOverride(this.layout,l)}static hasPaintOverride(l,p){let m=l.get("text-field"),_=cB.paint.properties[p],S=!1,T=C=>{for(let N of C)if(_.overrides&&_.overrides.hasOverride(N))return void(S=!0)};if(m.value.kind==="constant"&&m.value.value instanceof ja)T(m.value.value.sections);else if(m.value.kind==="source"){let C=j=>{S||(j instanceof vn&&Yi(j.value)===sn?T(j.value.sections):j instanceof Zb?T(j.sections):j.eachChild(C))},N=m.value;N._styleExpression&&C(N._styleExpression.expression)}return S}}let afe;var tmt={get paint(){return afe=afe||new Ea({"background-color":new Sr(ne.paint_background["background-color"]),"background-pattern":new BT(ne.paint_background["background-pattern"]),"background-opacity":new Sr(ne.paint_background["background-opacity"])})}};class rmt extends nc{constructor(l){super(l,tmt)}}let sfe;var nmt={get paint(){return sfe=sfe||new Ea({"raster-opacity":new Sr(ne.paint_raster["raster-opacity"]),"raster-hue-rotate":new Sr(ne.paint_raster["raster-hue-rotate"]),"raster-brightness-min":new Sr(ne.paint_raster["raster-brightness-min"]),"raster-brightness-max":new Sr(ne.paint_raster["raster-brightness-max"]),"raster-saturation":new Sr(ne.paint_raster["raster-saturation"]),"raster-contrast":new Sr(ne.paint_raster["raster-contrast"]),"raster-resampling":new Sr(ne.paint_raster["raster-resampling"]),"raster-fade-duration":new Sr(ne.paint_raster["raster-fade-duration"])})}};class omt extends nc{constructor(l){super(l,nmt)}}class imt extends nc{constructor(l){super(l,{}),this.onAdd=p=>{this.implementation.onAdd&&this.implementation.onAdd(p,p.painter.context.gl)},this.onRemove=p=>{this.implementation.onRemove&&this.implementation.onRemove(p,p.painter.context.gl)},this.implementation=l}is3D(){return this.implementation.renderingMode==="3d"}hasOffscreenPass(){return this.implementation.prerender!==void 0}recalculate(){}updateTransitions(){}hasTransition(){return!1}serialize(){throw new Error("Custom layers cannot be serialized")}}class amt{constructor(l){this._methodToThrottle=l,this._triggered=!1,typeof MessageChannel!="undefined"&&(this._channel=new MessageChannel,this._channel.port2.onmessage=()=>{this._triggered=!1,this._methodToThrottle()})}trigger(){this._triggered||(this._triggered=!0,this._channel?this._channel.port1.postMessage(!0):setTimeout(()=>{this._triggered=!1,this._methodToThrottle()},0))}remove(){delete this._channel,this._methodToThrottle=()=>{}}}let smt={once:!0},pB=6371008.8;class wv{constructor(l,p){if(isNaN(l)||isNaN(p))throw new Error(`Invalid LngLat object: (${l}, ${p})`);if(this.lng=+l,this.lat=+p,this.lat>90||this.lat<-90)throw new Error("Invalid LngLat latitude value: must be between -90 and 90")}wrap(){return new wv(_t(this.lng,-180,180),this.lat)}toArray(){return[this.lng,this.lat]}toString(){return`LngLat(${this.lng}, ${this.lat})`}distanceTo(l){let p=Math.PI/180,m=this.lat*p,_=l.lat*p,S=Math.sin(m)*Math.sin(_)+Math.cos(m)*Math.cos(_)*Math.cos((l.lng-this.lng)*p);return pB*Math.acos(Math.min(S,1))}static convert(l){if(l instanceof wv)return l;if(Array.isArray(l)&&(l.length===2||l.length===3))return new wv(Number(l[0]),Number(l[1]));if(!Array.isArray(l)&&typeof l=="object"&&l!==null)return new wv(Number("lng"in l?l.lng:l.lon),Number(l.lat));throw new Error("`LngLatLike` argument must be specified as a LngLat instance, an object {lng: <lng>, lat: <lat>}, an object {lon: <lng>, lat: <lat>}, or an array of [<lng>, <lat>]")}}let lfe=2*Math.PI*pB;function ufe(f){return lfe*Math.cos(f*Math.PI/180)}function cfe(f){return(180+f)/360}function pfe(f){return(180-180/Math.PI*Math.log(Math.tan(Math.PI/4+f*Math.PI/360)))/360}function ffe(f,l){return f/ufe(l)}function fB(f){return 360/Math.PI*Math.atan(Math.exp((180-360*f)*Math.PI/180))-90}function dfe(f,l){return f*ufe(fB(l))}class cI{constructor(l,p,m=0){this.x=+l,this.y=+p,this.z=+m}static fromLngLat(l,p=0){let m=wv.convert(l);return new cI(cfe(m.lng),pfe(m.lat),ffe(p,m.lat))}toLngLat(){return new wv(360*this.x-180,fB(this.y))}toAltitude(){return dfe(this.z,this.y)}meterInMercatorCoordinateUnits(){return 1/lfe*(l=fB(this.y),1/Math.cos(l*Math.PI/180));var l}}function hfe(f,l,p){var m=2*Math.PI*6378137/256/Math.pow(2,p);return[f*m-2*Math.PI*6378137/2,l*m-2*Math.PI*6378137/2]}class dB{constructor(l,p,m){if(!function(_,S,T){return!(_<0||_>25||T<0||T>=Math.pow(2,_)||S<0||S>=Math.pow(2,_))}(l,p,m))throw new Error(`x=${p}, y=${m}, z=${l} outside of bounds. 0<=x<${Math.pow(2,l)}, 0<=y<${Math.pow(2,l)} 0<=z<=25 `);this.z=l,this.x=p,this.y=m,this.key=Dx(0,l,l,p,m)}equals(l){return this.z===l.z&&this.x===l.x&&this.y===l.y}url(l,p,m){let _=(T=this.y,C=this.z,N=hfe(256*(S=this.x),256*(T=Math.pow(2,C)-T-1),C),j=hfe(256*(S+1),256*(T+1),C),N[0]+","+N[1]+","+j[0]+","+j[1]);var S,T,C,N,j;let F=function(V,$,X){let ee,se="";for(let he=V;he>0;he--)ee=1<<he-1,se+=($&ee?1:0)+(X&ee?2:0);return se}(this.z,this.x,this.y);return l[(this.x+this.y)%l.length].replace(/{prefix}/g,(this.x%16).toString(16)+(this.y%16).toString(16)).replace(/{z}/g,String(this.z)).replace(/{x}/g,String(this.x)).replace(/{y}/g,String(m==="tms"?Math.pow(2,this.z)-this.y-1:this.y)).replace(/{ratio}/g,p>1?"@2x":"").replace(/{quadkey}/g,F).replace(/{bbox-epsg-3857}/g,_)}isChildOf(l){let p=this.z-l.z;return p>0&&l.x===this.x>>p&&l.y===this.y>>p}getTilePoint(l){let p=Math.pow(2,this.z);return new x((l.x*p-this.x)*tt,(l.y*p-this.y)*tt)}toString(){return`${this.z}/${this.x}/${this.y}`}}class mfe{constructor(l,p){this.wrap=l,this.canonical=p,this.key=Dx(l,p.z,p.z,p.x,p.y)}}class Zc{constructor(l,p,m,_,S){if(this.terrainRttPosMatrix32f=null,l<m)throw new Error(`overscaledZ should be >= z; overscaledZ = ${l}; z = ${m}`);this.overscaledZ=l,this.wrap=p,this.canonical=new dB(m,+_,+S),this.key=Dx(p,l,m,_,S)}clone(){return new Zc(this.overscaledZ,this.wrap,this.canonical.z,this.canonical.x,this.canonical.y)}equals(l){return this.overscaledZ===l.overscaledZ&&this.wrap===l.wrap&&this.canonical.equals(l.canonical)}scaledTo(l){if(l>this.overscaledZ)throw new Error(`targetZ > this.overscaledZ; targetZ = ${l}; overscaledZ = ${this.overscaledZ}`);let p=this.canonical.z-l;return l>this.canonical.z?new Zc(l,this.wrap,this.canonical.z,this.canonical.x,this.canonical.y):new Zc(l,this.wrap,l,this.canonical.x>>p,this.canonical.y>>p)}calculateScaledKey(l,p){if(l>this.overscaledZ)throw new Error(`targetZ > this.overscaledZ; targetZ = ${l}; overscaledZ = ${this.overscaledZ}`);let m=this.canonical.z-l;return l>this.canonical.z?Dx(this.wrap*+p,l,this.canonical.z,this.canonical.x,this.canonical.y):Dx(this.wrap*+p,l,l,this.canonical.x>>m,this.canonical.y>>m)}isChildOf(l){if(l.wrap!==this.wrap)return!1;let p=this.canonical.z-l.canonical.z;return l.overscaledZ===0||l.overscaledZ<this.overscaledZ&&l.canonical.x===this.canonical.x>>p&&l.canonical.y===this.canonical.y>>p}children(l){if(this.overscaledZ>=l)return[new Zc(this.overscaledZ+1,this.wrap,this.canonical.z,this.canonical.x,this.canonical.y)];let p=this.canonical.z+1,m=2*this.canonical.x,_=2*this.canonical.y;return[new Zc(p,this.wrap,p,m,_),new Zc(p,this.wrap,p,m+1,_),new Zc(p,this.wrap,p,m,_+1),new Zc(p,this.wrap,p,m+1,_+1)]}isLessThan(l){return this.wrap<l.wrap||!(this.wrap>l.wrap)&&(this.overscaledZ<l.overscaledZ||!(this.overscaledZ>l.overscaledZ)&&(this.canonical.x<l.canonical.x||!(this.canonical.x>l.canonical.x)&&this.canonical.y<l.canonical.y))}wrapped(){return new Zc(this.overscaledZ,0,this.canonical.z,this.canonical.x,this.canonical.y)}unwrapTo(l){return new Zc(this.overscaledZ,l,this.canonical.z,this.canonical.x,this.canonical.y)}overscaleFactor(){return Math.pow(2,this.overscaledZ-this.canonical.z)}toUnwrapped(){return new mfe(this.wrap,this.canonical)}toString(){return`${this.overscaledZ}/${this.canonical.x}/${this.canonical.y}`}getTilePoint(l){return this.canonical.getTilePoint(new cI(l.x-this.wrap,l.y))}}function Dx(f,l,p,m,_){(f*=2)<0&&(f=-1*f-1);let S=1<<p;return(S*S*f+S*_+m).toString(36)+p.toString(36)+l.toString(36)}cr("CanonicalTileID",dB),cr("OverscaledTileID",Zc,{omit:["terrainRttPosMatrix32f"]});class gfe{constructor(l,p,m,_=1,S=1,T=1,C=0){if(this.uid=l,p.height!==p.width)throw new RangeError("DEM tiles must be square");if(m&&!["mapbox","terrarium","custom"].includes(m))return void Rt(`"${m}" is not a valid encoding type. Valid types include "mapbox", "terrarium" and "custom".`);this.stride=p.height;let N=this.dim=p.height-2;switch(this.data=new Uint32Array(p.data.buffer),m){case"terrarium":this.redFactor=256,this.greenFactor=1,this.blueFactor=1/256,this.baseShift=32768;break;case"custom":this.redFactor=_,this.greenFactor=S,this.blueFactor=T,this.baseShift=C;break;default:this.redFactor=6553.6,this.greenFactor=25.6,this.blueFactor=.1,this.baseShift=1e4}for(let j=0;j<N;j++)this.data[this._idx(-1,j)]=this.data[this._idx(0,j)],this.data[this._idx(N,j)]=this.data[this._idx(N-1,j)],this.data[this._idx(j,-1)]=this.data[this._idx(j,0)],this.data[this._idx(j,N)]=this.data[this._idx(j,N-1)];this.data[this._idx(-1,-1)]=this.data[this._idx(0,0)],this.data[this._idx(N,-1)]=this.data[this._idx(N-1,0)],this.data[this._idx(-1,N)]=this.data[this._idx(0,N-1)],this.data[this._idx(N,N)]=this.data[this._idx(N-1,N-1)],this.min=Number.MAX_SAFE_INTEGER,this.max=Number.MIN_SAFE_INTEGER;for(let j=0;j<N;j++)for(let F=0;F<N;F++){let V=this.get(j,F);V>this.max&&(this.max=V),V<this.min&&(this.min=V)}}get(l,p){let m=new Uint8Array(this.data.buffer),_=4*this._idx(l,p);return this.unpack(m[_],m[_+1],m[_+2])}getUnpackVector(){return[this.redFactor,this.greenFactor,this.blueFactor,this.baseShift]}_idx(l,p){if(l<-1||l>=this.dim+1||p<-1||p>=this.dim+1)throw new RangeError("out of range source coordinates for DEM data");return(p+1)*this.stride+(l+1)}unpack(l,p,m){return l*this.redFactor+p*this.greenFactor+m*this.blueFactor-this.baseShift}getPixels(){return new $c({width:this.stride,height:this.stride},new Uint8Array(this.data.buffer))}backfillBorder(l,p,m){if(this.dim!==l.dim)throw new Error("dem dimension mismatch");let _=p*this.dim,S=p*this.dim+this.dim,T=m*this.dim,C=m*this.dim+this.dim;switch(p){case-1:_=S-1;break;case 1:S=_+1}switch(m){case-1:T=C-1;break;case 1:C=T+1}let N=-p*this.dim,j=-m*this.dim;for(let F=T;F<C;F++)for(let V=_;V<S;V++)this.data[this._idx(V,F)]=l.data[this._idx(V+N,F+j)]}}cr("DEMData",gfe);class vfe{constructor(l){this._stringToNumber={},this._numberToString=[];for(let p=0;p<l.length;p++){let m=l[p];this._stringToNumber[m]=p,this._numberToString[p]=m}}encode(l){return this._stringToNumber[l]}decode(l){if(l>=this._numberToString.length)throw new Error(`Out of bounds. Index requested n=${l} can't be >= this._numberToString.length ${this._numberToString.length}`);return this._numberToString[l]}}class yfe{constructor(l,p,m,_,S){this.type="Feature",this._vectorTileFeature=l,l._z=p,l._x=m,l._y=_,this.properties=l.properties,this.id=S}get geometry(){return this._geometry===void 0&&(this._geometry=this._vectorTileFeature.toGeoJSON(this._vectorTileFeature._x,this._vectorTileFeature._y,this._vectorTileFeature._z).geometry),this._geometry}set geometry(l){this._geometry=l}toJSON(){let l={geometry:this.geometry};for(let p in this)p!=="_geometry"&&p!=="_vectorTileFeature"&&(l[p]=this[p]);return l}}class _fe{constructor(l,p){this.tileID=l,this.x=l.canonical.x,this.y=l.canonical.y,this.z=l.canonical.z,this.grid=new gv(tt,16,0),this.grid3D=new gv(tt,16,0),this.featureIndexArray=new ut,this.promoteId=p}insert(l,p,m,_,S,T){let C=this.featureIndexArray.length;this.featureIndexArray.emplaceBack(m,_,S);let N=T?this.grid3D:this.grid;for(let j=0;j<p.length;j++){let F=p[j],V=[1/0,1/0,-1/0,-1/0];for(let $=0;$<F.length;$++){let X=F[$];V[0]=Math.min(V[0],X.x),V[1]=Math.min(V[1],X.y),V[2]=Math.max(V[2],X.x),V[3]=Math.max(V[3],X.y)}V[0]<tt&&V[1]<tt&&V[2]>=0&&V[3]>=0&&N.insert(C,V[0],V[1],V[2],V[3])}}loadVTLayers(){return this.vtLayers||(this.vtLayers=new oI.VectorTile(new tB(this.rawTileData)).layers,this.sourceLayerCoder=new vfe(this.vtLayers?Object.keys(this.vtLayers).sort():["_geojsonTileLayer"])),this.vtLayers}query(l,p,m,_){this.loadVTLayers();let S=l.params,T=tt/l.tileSize/l.scale,C=i1(S.filter),N=l.queryGeometry,j=l.queryPadding*T,F=xfe(N),V=this.grid.query(F.minX-j,F.minY-j,F.maxX+j,F.maxY+j),$=xfe(l.cameraQueryGeometry),X=this.grid3D.query($.minX-j,$.minY-j,$.maxX+j,$.maxY+j,(he,Ee,Ve,Oe)=>function(K,pe,Ne,ot,Tt){for(let dt of K)if(pe<=dt.x&&Ne<=dt.y&&ot>=dt.x&&Tt>=dt.y)return!0;let at=[new x(pe,Ne),new x(pe,Tt),new x(ot,Tt),new x(ot,Ne)];if(K.length>2){for(let dt of at)if(_1(K,dt))return!0}for(let dt=0;dt<K.length-1;dt++)if(Ydt(K[dt],K[dt+1],at))return!0;return!1}(l.cameraQueryGeometry,he-j,Ee-j,Ve+j,Oe+j));for(let he of X)V.push(he);V.sort(lmt);let ee={},se;for(let he=0;he<V.length;he++){let Ee=V[he];if(Ee===se)continue;se=Ee;let Ve=this.featureIndexArray.get(Ee),Oe=null;this.loadMatchingFeature(ee,Ve.bucketIndex,Ve.sourceLayerIndex,Ve.featureIndex,C,S.layers,S.availableImages,p,m,_,(K,pe,Ne)=>(Oe||(Oe=v1(K)),pe.queryIntersectsFeature({queryGeometry:N,feature:K,featureState:Ne,geometry:Oe,zoom:this.z,transform:l.transform,pixelsToTileUnits:T,pixelPosMatrix:l.pixelPosMatrix,unwrappedTileID:this.tileID.toUnwrapped(),getElevation:l.getElevation})))}return ee}loadMatchingFeature(l,p,m,_,S,T,C,N,j,F,V){let $=this.bucketLayerIDs[p];if(T&&!$.some(he=>T.has(he)))return;let X=this.sourceLayerCoder.decode(m),ee=this.vtLayers[X].feature(_);if(S.needGeometry){let he=y1(ee,!0);if(!S.filter(new gi(this.tileID.overscaledZ),he,this.tileID.canonical))return}else if(!S.filter(new gi(this.tileID.overscaledZ),ee))return;let se=this.getId(ee,X);for(let he=0;he<$.length;he++){let Ee=$[he];if(T&&!T.has(Ee))continue;let Ve=N[Ee];if(!Ve)continue;let Oe={};se&&F&&(Oe=F.getState(Ve.sourceLayer||"_geojsonTileLayer",se));let K=We({},j[Ee]);K.paint=bfe(K.paint,Ve.paint,ee,Oe,C),K.layout=bfe(K.layout,Ve.layout,ee,Oe,C);let pe=!V||V(ee,Ve,Oe);if(!pe)continue;let Ne=new yfe(ee,this.z,this.x,this.y,se);Ne.layer=K;let ot=l[Ee];ot===void 0&&(ot=l[Ee]=[]),ot.push({featureIndex:_,feature:Ne,intersectionZ:pe})}}lookupSymbolFeatures(l,p,m,_,S,T,C,N){let j={};this.loadVTLayers();let F=i1(S);for(let V of l)this.loadMatchingFeature(j,m,_,V,F,T,C,N,p);return j}hasLayer(l){for(let p of this.bucketLayerIDs)for(let m of p)if(l===m)return!0;return!1}getId(l,p){var m;let _=l.id;return this.promoteId&&(_=l.properties[typeof this.promoteId=="string"?this.promoteId:this.promoteId[p]],typeof _=="boolean"&&(_=Number(_)),_===void 0&&!((m=l.properties)===null||m===void 0)&&m.cluster&&this.promoteId&&(_=Number(l.properties.cluster_id))),_}}function bfe(f,l,p,m,_){return Qe(f,(S,T)=>{let C=l instanceof Tx?l.get(T):null;return C&&C.evaluate?C.evaluate(p,m,_):C})}function xfe(f){let l=1/0,p=1/0,m=-1/0,_=-1/0;for(let S of f)l=Math.min(l,S.x),p=Math.min(p,S.y),m=Math.max(m,S.x),_=Math.max(_,S.y);return{minX:l,minY:p,maxX:m,maxY:_}}function lmt(f,l){return l-f}function wfe(f,l,p,m,_){let S=[];for(let T=0;T<f.length;T++){let C=f[T],N;for(let j=0;j<C.length-1;j++){let F=C[j],V=C[j+1];F.x<l&&V.x<l||(F.x<l?F=new x(l,F.y+(l-F.x)/(V.x-F.x)*(V.y-F.y))._round():V.x<l&&(V=new x(l,F.y+(l-F.x)/(V.x-F.x)*(V.y-F.y))._round()),F.y<p&&V.y<p||(F.y<p?F=new x(F.x+(p-F.y)/(V.y-F.y)*(V.x-F.x),p)._round():V.y<p&&(V=new x(F.x+(p-F.y)/(V.y-F.y)*(V.x-F.x),p)._round()),F.x>=m&&V.x>=m||(F.x>=m?F=new x(m,F.y+(m-F.x)/(V.x-F.x)*(V.y-F.y))._round():V.x>=m&&(V=new x(m,F.y+(m-F.x)/(V.x-F.x)*(V.y-F.y))._round()),F.y>=_&&V.y>=_||(F.y>=_?F=new x(F.x+(_-F.y)/(V.y-F.y)*(V.x-F.x),_)._round():V.y>=_&&(V=new x(F.x+(_-F.y)/(V.y-F.y)*(V.x-F.x),_)._round()),N&&F.equals(N[N.length-1])||(N=[F],S.push(N)),N.push(V)))))}}return S}cr("FeatureIndex",_fe,{omit:["rawTileData","sourceLayerCoder"]});class Ev extends x{constructor(l,p,m,_){super(l,p),this.angle=m,_!==void 0&&(this.segment=_)}clone(){return new Ev(this.x,this.y,this.angle,this.segment)}}function Efe(f,l,p,m,_){if(l.segment===void 0||p===0)return!0;let S=l,T=l.segment+1,C=0;for(;C>-p/2;){if(T--,T<0)return!1;C-=f[T].dist(S),S=f[T]}C+=f[T].dist(f[T+1]),T++;let N=[],j=0;for(;C<p/2;){let F=f[T],V=f[T+1];if(!V)return!1;let $=f[T-1].angleTo(F)-F.angleTo(V);for($=Math.abs(($+3*Math.PI)%(2*Math.PI)-Math.PI),N.push({distance:C,angleDelta:$}),j+=$;C-N[0].distance>m;)j-=N.shift().angleDelta;if(j>_)return!1;T++,C+=F.dist(V)}return!0}function Sfe(f){let l=0;for(let p=0;p<f.length-1;p++)l+=f[p].dist(f[p+1]);return l}function Tfe(f,l,p){return f?.6*l*p:0}function Ife(f,l){return Math.max(f?f.right-f.left:0,l?l.right-l.left:0)}function umt(f,l,p,m,_,S){let T=Tfe(p,_,S),C=Ife(p,m)*S,N=0,j=Sfe(f)/2;for(let F=0;F<f.length-1;F++){let V=f[F],$=f[F+1],X=V.dist($);if(N+X>j){let ee=(j-N)/X,se=wp.number(V.x,$.x,ee),he=wp.number(V.y,$.y,ee),Ee=new Ev(se,he,$.angleTo(V),F);return Ee._round(),!T||Efe(f,Ee,C,T,l)?Ee:void 0}N+=X}}function cmt(f,l,p,m,_,S,T,C,N){let j=Tfe(m,S,T),F=Ife(m,_),V=F*T,$=f[0].x===0||f[0].x===N||f[0].y===0||f[0].y===N;return l-V<l/4&&(l=V+l/4),Mfe(f,$?l/2*C%l:(F/2+2*S)*T*C%l,l,j,p,V,$,!1,N)}function Mfe(f,l,p,m,_,S,T,C,N){let j=S/2,F=Sfe(f),V=0,$=l-p,X=[];for(let ee=0;ee<f.length-1;ee++){let se=f[ee],he=f[ee+1],Ee=se.dist(he),Ve=he.angleTo(se);for(;$+p<V+Ee;){$+=p;let Oe=($-V)/Ee,K=wp.number(se.x,he.x,Oe),pe=wp.number(se.y,he.y,Oe);if(K>=0&&K<N&&pe>=0&&pe<N&&$-j>=0&&$+j<=F){let Ne=new Ev(K,pe,Ve,ee);Ne._round(),m&&!Efe(f,Ne,S,m,_)||X.push(Ne)}}V+=Ee}return C||X.length||T||(X=Mfe(f,V/2,p,m,_,S,T,!0,N)),X}cr("Anchor",Ev);let pI=Tu;function Cfe(f,l,p,m){let _=[],S=f.image,T=S.pixelRatio,C=S.paddedRect.w-2*pI,N=S.paddedRect.h-2*pI,j={x1:f.left,y1:f.top,x2:f.right,y2:f.bottom},F=S.stretchX||[[0,C]],V=S.stretchY||[[0,N]],$=(vt,hr)=>vt+hr[1]-hr[0],X=F.reduce($,0),ee=V.reduce($,0),se=C-X,he=N-ee,Ee=0,Ve=X,Oe=0,K=ee,pe=0,Ne=se,ot=0,Tt=he;if(S.content&&m){let vt=S.content,hr=vt[2]-vt[0],Br=vt[3]-vt[1];(S.textFitWidth||S.textFitHeight)&&(j=efe(f)),Ee=nD(F,0,vt[0]),Oe=nD(V,0,vt[1]),Ve=nD(F,vt[0],vt[2]),K=nD(V,vt[1],vt[3]),pe=vt[0]-Ee,ot=vt[1]-Oe,Ne=hr-Ve,Tt=Br-K}let at=j.x1,dt=j.y1,kt=j.x2-at,It=j.y2-dt,Ut=(vt,hr,Br,jr)=>{let xr=oD(vt.stretch-Ee,Ve,kt,at),Jn=iD(vt.fixed-pe,Ne,vt.stretch,X),Xi=oD(hr.stretch-Oe,K,It,dt),Ua=iD(hr.fixed-ot,Tt,hr.stretch,ee),Fs=oD(Br.stretch-Ee,Ve,kt,at),Yc=iD(Br.fixed-pe,Ne,Br.stretch,X),Iu=oD(jr.stretch-Oe,K,It,dt),Es=iD(jr.fixed-ot,Tt,jr.stretch,ee),Fi=new x(xr,Xi),is=new x(Fs,Xi),Ss=new x(Fs,Iu),Ts=new x(xr,Iu),$l=new x(Jn/T,Ua/T),Kc=new x(Yc/T,Es/T),as=l*Math.PI/180;if(as){let ss=Math.sin(as),ls=Math.cos(as),Ia=[ls,-ss,ss,ls];Fi._matMult(Ia),is._matMult(Ia),Ts._matMult(Ia),Ss._matMult(Ia)}let Mu=vt.stretch+vt.fixed,Ba=hr.stretch+hr.fixed;return{tl:Fi,tr:is,bl:Ts,br:Ss,tex:{x:S.paddedRect.x+pI+Mu,y:S.paddedRect.y+pI+Ba,w:Br.stretch+Br.fixed-Mu,h:jr.stretch+jr.fixed-Ba},writingMode:void 0,glyphOffset:[0,0],sectionIndex:0,pixelOffsetTL:$l,pixelOffsetBR:Kc,minFontScaleX:Ne/T/kt,minFontScaleY:Tt/T/It,isSDF:p}};if(m&&(S.stretchX||S.stretchY)){let vt=Afe(F,se,X),hr=Afe(V,he,ee);for(let Br=0;Br<vt.length-1;Br++){let jr=vt[Br],xr=vt[Br+1];for(let Jn=0;Jn<hr.length-1;Jn++)_.push(Ut(jr,hr[Jn],xr,hr[Jn+1]))}}else _.push(Ut({fixed:0,stretch:-1},{fixed:0,stretch:-1},{fixed:0,stretch:C+1},{fixed:0,stretch:N+1}));return _}function nD(f,l,p){let m=0;for(let _ of f)m+=Math.max(l,Math.min(p,_[1]))-Math.max(l,Math.min(p,_[0]));return m}function Afe(f,l,p){let m=[{fixed:-1,stretch:0}];for(let[_,S]of f){let T=m[m.length-1];m.push({fixed:_-T.stretch,stretch:T.stretch}),m.push({fixed:_-T.stretch,stretch:T.stretch+(S-_)})}return m.push({fixed:l+pI,stretch:p}),m}function oD(f,l,p,m){return f/l*p+m}function iD(f,l,p,m){return f-l*p/m}class aD{constructor(l,p,m,_,S,T,C,N,j,F){var V;if(this.boxStartIndex=l.length,j){let $=T.top,X=T.bottom,ee=T.collisionPadding;ee&&($-=ee[1],X+=ee[3]);let se=X-$;se>0&&(se=Math.max(10,se),this.circleDiameter=se)}else{let $=!((V=T.image)===null||V===void 0)&&V.content&&(T.image.textFitWidth||T.image.textFitHeight)?efe(T):{x1:T.left,y1:T.top,x2:T.right,y2:T.bottom};$.y1=$.y1*C-N[0],$.y2=$.y2*C+N[2],$.x1=$.x1*C-N[3],$.x2=$.x2*C+N[1];let X=T.collisionPadding;if(X&&($.x1-=X[0]*C,$.y1-=X[1]*C,$.x2+=X[2]*C,$.y2+=X[3]*C),F){let ee=new x($.x1,$.y1),se=new x($.x2,$.y1),he=new x($.x1,$.y2),Ee=new x($.x2,$.y2),Ve=F*Math.PI/180;ee._rotate(Ve),se._rotate(Ve),he._rotate(Ve),Ee._rotate(Ve),$.x1=Math.min(ee.x,se.x,he.x,Ee.x),$.x2=Math.max(ee.x,se.x,he.x,Ee.x),$.y1=Math.min(ee.y,se.y,he.y,Ee.y),$.y2=Math.max(ee.y,se.y,he.y,Ee.y)}l.emplaceBack(p.x,p.y,$.x1,$.y1,$.x2,$.y2,m,_,S)}this.boxEndIndex=l.length}}class pmt{constructor(l=[],p=(m,_)=>m<_?-1:m>_?1:0){if(this.data=l,this.length=this.data.length,this.compare=p,this.length>0)for(let m=(this.length>>1)-1;m>=0;m--)this._down(m)}push(l){this.data.push(l),this._up(this.length++)}pop(){if(this.length===0)return;let l=this.data[0],p=this.data.pop();return--this.length>0&&(this.data[0]=p,this._down(0)),l}peek(){return this.data[0]}_up(l){let{data:p,compare:m}=this,_=p[l];for(;l>0;){let S=l-1>>1,T=p[S];if(m(_,T)>=0)break;p[l]=T,l=S}p[l]=_}_down(l){let{data:p,compare:m}=this,_=this.length>>1,S=p[l];for(;l<_;){let T=1+(l<<1),C=T+1;if(C<this.length&&m(p[C],p[T])<0&&(T=C),m(p[T],S)>=0)break;p[l]=p[T],l=T}p[l]=S}}function fmt(f,l=1,p=!1){let m=1/0,_=1/0,S=-1/0,T=-1/0,C=f[0];for(let X=0;X<C.length;X++){let ee=C[X];(!X||ee.x<m)&&(m=ee.x),(!X||ee.y<_)&&(_=ee.y),(!X||ee.x>S)&&(S=ee.x),(!X||ee.y>T)&&(T=ee.y)}let N=Math.min(S-m,T-_),j=N/2,F=new pmt([],dmt);if(N===0)return new x(m,_);for(let X=m;X<S;X+=N)for(let ee=_;ee<T;ee+=N)F.push(new Lx(X+j,ee+j,j,f));let V=function(X){let ee=0,se=0,he=0,Ee=X[0];for(let Ve=0,Oe=Ee.length,K=Oe-1;Ve<Oe;K=Ve++){let pe=Ee[Ve],Ne=Ee[K],ot=pe.x*Ne.y-Ne.x*pe.y;se+=(pe.x+Ne.x)*ot,he+=(pe.y+Ne.y)*ot,ee+=3*ot}return new Lx(se/ee,he/ee,0,X)}(f),$=F.length;for(;F.length;){let X=F.pop();(X.d>V.d||!V.d)&&(V=X,p&&console.log("found best %d after %d probes",Math.round(1e4*X.d)/1e4,$)),X.max-V.d<=l||(j=X.h/2,F.push(new Lx(X.p.x-j,X.p.y-j,j,f)),F.push(new Lx(X.p.x+j,X.p.y-j,j,f)),F.push(new Lx(X.p.x-j,X.p.y+j,j,f)),F.push(new Lx(X.p.x+j,X.p.y+j,j,f)),$+=4)}return p&&(console.log(`num probes: ${$}`),console.log(`best distance: ${V.d}`)),V.p}function dmt(f,l){return l.max-f.max}function Lx(f,l,p,m){this.p=new x(f,l),this.h=p,this.d=function(_,S){let T=!1,C=1/0;for(let N=0;N<S.length;N++){let j=S[N];for(let F=0,V=j.length,$=V-1;F<V;$=F++){let X=j[F],ee=j[$];X.y>_.y!=ee.y>_.y&&_.x<(ee.x-X.x)*(_.y-X.y)/(ee.y-X.y)+X.x&&(T=!T),C=Math.min(C,upe(_,X,ee))}}return(T?1:-1)*Math.sqrt(C)}(this.p,m),this.max=this.d+this.h*Math.SQRT2}var zs;o.aB=void 0,(zs=o.aB||(o.aB={}))[zs.center=1]="center",zs[zs.left=2]="left",zs[zs.right=3]="right",zs[zs.top=4]="top",zs[zs.bottom=5]="bottom",zs[zs["top-left"]=6]="top-left",zs[zs["top-right"]=7]="top-right",zs[zs["bottom-left"]=8]="bottom-left",zs[zs["bottom-right"]=9]="bottom-right";let Sv=7,hB=Number.POSITIVE_INFINITY;function Ofe(f,l){return l[1]!==hB?function(p,m,_){let S=0,T=0;switch(m=Math.abs(m),_=Math.abs(_),p){case"top-right":case"top-left":case"top":T=_-Sv;break;case"bottom-right":case"bottom-left":case"bottom":T=-_+Sv}switch(p){case"top-right":case"bottom-right":case"right":S=-m;break;case"top-left":case"bottom-left":case"left":S=m}return[S,T]}(f,l[0],l[1]):function(p,m){let _=0,S=0;m<0&&(m=0);let T=m/Math.SQRT2;switch(p){case"top-right":case"top-left":S=T-Sv;break;case"bottom-right":case"bottom-left":S=-T+Sv;break;case"bottom":S=-m+Sv;break;case"top":S=m-Sv}switch(p){case"top-right":case"bottom-right":_=-T;break;case"top-left":case"bottom-left":_=T;break;case"left":_=m;break;case"right":_=-m}return[_,S]}(f,l[0])}function Pfe(f,l,p){var m;let _=f.layout,S=(m=_.get("text-variable-anchor-offset"))===null||m===void 0?void 0:m.evaluate(l,{},p);if(S){let C=S.values,N=[];for(let j=0;j<C.length;j+=2){let F=N[j]=C[j],V=C[j+1].map($=>$*Fa);F.startsWith("top")?V[1]-=Sv:F.startsWith("bottom")&&(V[1]+=Sv),N[j+1]=V}return new bs(N)}let T=_.get("text-variable-anchor");if(T){let C;C=f._unevaluatedLayout.getValue("text-radial-offset")!==void 0?[_.get("text-radial-offset").evaluate(l,{},p)*Fa,hB]:_.get("text-offset").evaluate(l,{},p).map(j=>j*Fa);let N=[];for(let j of T)N.push(j,Ofe(j,C));return new bs(N)}return null}function mB(f){switch(f){case"right":case"top-right":case"bottom-right":return"right";case"left":case"top-left":case"bottom-left":return"left"}return"center"}function hmt(f,l,p,m,_,S,T,C,N,j,F,V){let $=S.textMaxSize.evaluate(l,{});$===void 0&&($=T);let X=f.layers[0].layout,ee=X.get("icon-offset").evaluate(l,{},F),se=Dfe(p.horizontal),he=T/24,Ee=f.tilePixelRatio*he,Ve=f.tilePixelRatio*$/24,Oe=f.tilePixelRatio*C,K=f.tilePixelRatio*X.get("symbol-spacing"),pe=X.get("text-padding")*f.tilePixelRatio,Ne=function(Br,jr,xr,Jn=1){let Xi=Br.get("icon-padding").evaluate(jr,{},xr),Ua=Xi&&Xi.values;return[Ua[0]*Jn,Ua[1]*Jn,Ua[2]*Jn,Ua[3]*Jn]}(X,l,F,f.tilePixelRatio),ot=X.get("text-max-angle")/180*Math.PI,Tt=X.get("text-rotation-alignment")!=="viewport"&&X.get("symbol-placement")!=="point",at=X.get("icon-rotation-alignment")==="map"&&X.get("symbol-placement")!=="point",dt=X.get("symbol-placement"),kt=K/2,It=X.get("icon-text-fit"),Ut;m&&It!=="none"&&(f.allowVerticalPlacement&&p.vertical&&(Ut=tfe(m,p.vertical,It,X.get("icon-text-fit-padding"),ee,he)),se&&(m=tfe(m,se,It,X.get("icon-text-fit-padding"),ee,he)));let vt=F?V.line.getGranularityForZoomLevel(F.z):1,hr=(Br,jr)=>{jr.x<0||jr.x>=tt||jr.y<0||jr.y>=tt||function(xr,Jn,Xi,Ua,Fs,Yc,Iu,Es,Fi,is,Ss,Ts,$l,Kc,as,Mu,Ba,ss,ls,Ia,yi,Bf,kx,Vf,vmt){let Rx=xr.addToLineVertexArray(Jn,Xi),w1,jx,qx,zx,jfe=0,qfe=0,zfe=0,Ffe=0,EB=-1,SB=-1,Rm={},Ufe=Ff("");if(xr.allowVerticalPlacement&&Ua.vertical){let fl=Es.layout.get("text-rotate").evaluate(yi,{},Vf)+90;qx=new aD(Fi,Jn,is,Ss,Ts,Ua.vertical,$l,Kc,as,fl),Iu&&(zx=new aD(Fi,Jn,is,Ss,Ts,Iu,Ba,ss,as,fl))}if(Fs){let fl=Es.layout.get("icon-rotate").evaluate(yi,{}),Xc=Es.layout.get("icon-text-fit")!=="none",E1=Cfe(Fs,fl,kx,Xc),Hf=Iu?Cfe(Iu,fl,kx,Xc):void 0;jx=new aD(Fi,Jn,is,Ss,Ts,Fs,Ba,ss,!1,fl),jfe=4*E1.length;let S1=xr.iconSizeData,oh=null;S1.kind==="source"?(oh=[nh*Es.layout.get("icon-size").evaluate(yi,{})],oh[0]>xv&&Rt(`${xr.layerIds[0]}: Value for "icon-size" is >= ${uI}. Reduce your "icon-size".`)):S1.kind==="composite"&&(oh=[nh*Bf.compositeIconSizes[0].evaluate(yi,{},Vf),nh*Bf.compositeIconSizes[1].evaluate(yi,{},Vf)],(oh[0]>xv||oh[1]>xv)&&Rt(`${xr.layerIds[0]}: Value for "icon-size" is >= ${uI}. Reduce your "icon-size".`)),xr.addSymbols(xr.icon,E1,oh,Ia,ls,yi,o.al.none,Jn,Rx.lineStartIndex,Rx.lineLength,-1,Vf),EB=xr.icon.placedSymbolArray.length-1,Hf&&(qfe=4*Hf.length,xr.addSymbols(xr.icon,Hf,oh,Ia,ls,yi,o.al.vertical,Jn,Rx.lineStartIndex,Rx.lineLength,-1,Vf),SB=xr.icon.placedSymbolArray.length-1)}let Bfe=Object.keys(Ua.horizontal);for(let fl of Bfe){let Xc=Ua.horizontal[fl];if(!w1){Ufe=Ff(Xc.text);let Hf=Es.layout.get("text-rotate").evaluate(yi,{},Vf);w1=new aD(Fi,Jn,is,Ss,Ts,Xc,$l,Kc,as,Hf)}let E1=Xc.positionedLines.length===1;if(zfe+=Nfe(xr,Jn,Xc,Yc,Es,as,yi,Mu,Rx,Ua.vertical?o.al.horizontal:o.al.horizontalOnly,E1?Bfe:[fl],Rm,EB,Bf,Vf),E1)break}Ua.vertical&&(Ffe+=Nfe(xr,Jn,Ua.vertical,Yc,Es,as,yi,Mu,Rx,o.al.vertical,["vertical"],Rm,SB,Bf,Vf));let ymt=w1?w1.boxStartIndex:xr.collisionBoxArray.length,_mt=w1?w1.boxEndIndex:xr.collisionBoxArray.length,bmt=qx?qx.boxStartIndex:xr.collisionBoxArray.length,xmt=qx?qx.boxEndIndex:xr.collisionBoxArray.length,wmt=jx?jx.boxStartIndex:xr.collisionBoxArray.length,Emt=jx?jx.boxEndIndex:xr.collisionBoxArray.length,Smt=zx?zx.boxStartIndex:xr.collisionBoxArray.length,Tmt=zx?zx.boxEndIndex:xr.collisionBoxArray.length,Gf=-1,lD=(fl,Xc)=>fl&&fl.circleDiameter?Math.max(fl.circleDiameter,Xc):Xc;Gf=lD(w1,Gf),Gf=lD(qx,Gf),Gf=lD(jx,Gf),Gf=lD(zx,Gf);let Vfe=Gf>-1?1:0;Vfe&&(Gf*=vmt/Fa),xr.glyphOffsetArray.length>=Nx.MAX_GLYPHS&&Rt("Too many glyphs being rendered in a tile. See https://github.com/mapbox/mapbox-gl-js/issues/2907"),yi.sortKey!==void 0&&xr.addToSortKeyRanges(xr.symbolInstances.length,yi.sortKey);let Imt=Pfe(Es,yi,Vf),[Mmt,Cmt]=function(fl,Xc){let E1=fl.length,Hf=Xc==null?void 0:Xc.values;if((Hf==null?void 0:Hf.length)>0)for(let S1=0;S1<Hf.length;S1+=2){let oh=Hf[S1+1];fl.emplaceBack(o.aB[Hf[S1]],oh[0],oh[1])}return[E1,fl.length]}(xr.textAnchorOffsets,Imt);xr.symbolInstances.emplaceBack(Jn.x,Jn.y,Rm.right>=0?Rm.right:-1,Rm.center>=0?Rm.center:-1,Rm.left>=0?Rm.left:-1,Rm.vertical||-1,EB,SB,Ufe,ymt,_mt,bmt,xmt,wmt,Emt,Smt,Tmt,is,zfe,Ffe,jfe,qfe,Vfe,0,$l,Gf,Mmt,Cmt)}(f,jr,Br,p,m,_,Ut,f.layers[0],f.collisionBoxArray,l.index,l.sourceLayerIndex,f.index,Ee,[pe,pe,pe,pe],Tt,N,Oe,Ne,at,ee,l,S,j,F,T)};if(dt==="line")for(let Br of wfe(l.geometry,0,0,tt,tt)){let jr=x1(Br,vt),xr=cmt(jr,K,ot,p.vertical||se,m,24,Ve,f.overscaling,tt);for(let Jn of xr)se&&mmt(f,se.text,kt,Jn)||hr(jr,Jn)}else if(dt==="line-center"){for(let Br of l.geometry)if(Br.length>1){let jr=x1(Br,vt),xr=umt(jr,ot,p.vertical||se,m,24,Ve);xr&&hr(jr,xr)}}else if(l.type==="Polygon")for(let Br of Qb(l.geometry,0)){let jr=fmt(Br,16);hr(x1(Br[0],vt,!0),new Ev(jr.x,jr.y,0))}else if(l.type==="LineString")for(let Br of l.geometry){let jr=x1(Br,vt);hr(jr,new Ev(jr[0].x,jr[0].y,0))}else if(l.type==="Point")for(let Br of l.geometry)for(let jr of Br)hr([jr],new Ev(jr.x,jr.y,0))}function Nfe(f,l,p,m,_,S,T,C,N,j,F,V,$,X,ee){let se=function(Ve,Oe,K,pe,Ne,ot,Tt,at){let dt=pe.layout.get("text-rotate").evaluate(ot,{})*Math.PI/180,kt=[];for(let It of Oe.positionedLines)for(let Ut of It.positionedGlyphs){if(!Ut.rect)continue;let vt=Ut.rect||{},hr=Bht+1,Br=!0,jr=1,xr=0,Jn=(Ne||at)&&Ut.vertical,Xi=Ut.metrics.advance*Ut.scale/2;if(at&&Oe.verticalizable&&(xr=It.lineOffset/2-(Ut.imageName?-(Fa-Ut.metrics.width*Ut.scale)/2:(Ut.scale-1)*Fa)),Ut.imageName){let ss=Tt[Ut.imageName];Br=ss.sdf,jr=ss.pixelRatio,hr=Tu/jr}let Ua=Ne?[Ut.x+Xi,Ut.y]:[0,0],Fs=Ne?[0,0]:[Ut.x+Xi+K[0],Ut.y+K[1]-xr],Yc=[0,0];Jn&&(Yc=Fs,Fs=[0,0]);let Iu=Ut.metrics.isDoubleResolution?2:1,Es=(Ut.metrics.left-hr)*Ut.scale-Xi+Fs[0],Fi=(-Ut.metrics.top-hr)*Ut.scale+Fs[1],is=Es+vt.w/Iu*Ut.scale/jr,Ss=Fi+vt.h/Iu*Ut.scale/jr,Ts=new x(Es,Fi),$l=new x(is,Fi),Kc=new x(Es,Ss),as=new x(is,Ss);if(Jn){let ss=new x(-Xi,Xi-QN),ls=-Math.PI/2,Ia=Fa/2-Xi,yi=new x(5-QN-Ia,-(Ut.imageName?Ia:0)),Bf=new x(...Yc);Ts._rotateAround(ls,ss)._add(yi)._add(Bf),$l._rotateAround(ls,ss)._add(yi)._add(Bf),Kc._rotateAround(ls,ss)._add(yi)._add(Bf),as._rotateAround(ls,ss)._add(yi)._add(Bf)}if(dt){let ss=Math.sin(dt),ls=Math.cos(dt),Ia=[ls,-ss,ss,ls];Ts._matMult(Ia),$l._matMult(Ia),Kc._matMult(Ia),as._matMult(Ia)}let Mu=new x(0,0),Ba=new x(0,0);kt.push({tl:Ts,tr:$l,bl:Kc,br:as,tex:vt,writingMode:Oe.writingMode,glyphOffset:Ua,sectionIndex:Ut.sectionIndex,isSDF:Br,pixelOffsetTL:Mu,pixelOffsetBR:Ba,minFontScaleX:0,minFontScaleY:0})}return kt}(0,p,C,_,S,T,m,f.allowVerticalPlacement),he=f.textSizeData,Ee=null;he.kind==="source"?(Ee=[nh*_.layout.get("text-size").evaluate(T,{})],Ee[0]>xv&&Rt(`${f.layerIds[0]}: Value for "text-size" is >= ${uI}. Reduce your "text-size".`)):he.kind==="composite"&&(Ee=[nh*X.compositeTextSizes[0].evaluate(T,{},ee),nh*X.compositeTextSizes[1].evaluate(T,{},ee)],(Ee[0]>xv||Ee[1]>xv)&&Rt(`${f.layerIds[0]}: Value for "text-size" is >= ${uI}. Reduce your "text-size".`)),f.addSymbols(f.text,se,Ee,C,S,T,j,l,N.lineStartIndex,N.lineLength,$,ee);for(let Ve of F)V[Ve]=f.text.placedSymbolArray.length-1;return 4*se.length}function Dfe(f){for(let l in f)return f[l];return null}function mmt(f,l,p,m){let _=f.compareText;if(l in _){let S=_[l];for(let T=S.length-1;T>=0;T--)if(m.dist(S[T])<p)return!0}else _[l]=[];return _[l].push(m),!1}let Lfe=[Int8Array,Uint8Array,Uint8ClampedArray,Int16Array,Uint16Array,Int32Array,Uint32Array,Float32Array,Float64Array];class gB{static from(l){if(!(l instanceof ArrayBuffer))throw new Error("Data must be an instance of ArrayBuffer.");let[p,m]=new Uint8Array(l,0,2);if(p!==219)throw new Error("Data does not appear to be in a KDBush format.");let _=m>>4;if(_!==1)throw new Error(`Got v${_} data when expected v1.`);let S=Lfe[15&m];if(!S)throw new Error("Unrecognized array type.");let[T]=new Uint16Array(l,2,1),[C]=new Uint32Array(l,4,1);return new gB(C,T,S,l)}constructor(l,p=64,m=Float64Array,_){if(isNaN(l)||l<0)throw new Error(`Unpexpected numItems value: ${l}.`);this.numItems=+l,this.nodeSize=Math.min(Math.max(+p,2),65535),this.ArrayType=m,this.IndexArrayType=l<65536?Uint16Array:Uint32Array;let S=Lfe.indexOf(this.ArrayType),T=2*l*this.ArrayType.BYTES_PER_ELEMENT,C=l*this.IndexArrayType.BYTES_PER_ELEMENT,N=(8-C%8)%8;if(S<0)throw new Error(`Unexpected typed array class: ${m}.`);_&&_ instanceof ArrayBuffer?(this.data=_,this.ids=new this.IndexArrayType(this.data,8,l),this.coords=new this.ArrayType(this.data,8+C+N,2*l),this._pos=2*l,this._finished=!0):(this.data=new ArrayBuffer(8+T+C+N),this.ids=new this.IndexArrayType(this.data,8,l),this.coords=new this.ArrayType(this.data,8+C+N,2*l),this._pos=0,this._finished=!1,new Uint8Array(this.data,0,2).set([219,16+S]),new Uint16Array(this.data,2,1)[0]=p,new Uint32Array(this.data,4,1)[0]=l)}add(l,p){let m=this._pos>>1;return this.ids[m]=m,this.coords[this._pos++]=l,this.coords[this._pos++]=p,m}finish(){let l=this._pos>>1;if(l!==this.numItems)throw new Error(`Added ${l} items when expected ${this.numItems}.`);return vB(this.ids,this.coords,this.nodeSize,0,this.numItems-1,0),this._finished=!0,this}range(l,p,m,_){if(!this._finished)throw new Error("Data not yet indexed - call index.finish().");let{ids:S,coords:T,nodeSize:C}=this,N=[0,S.length-1,0],j=[];for(;N.length;){let F=N.pop()||0,V=N.pop()||0,$=N.pop()||0;if(V-$<=C){for(let he=$;he<=V;he++){let Ee=T[2*he],Ve=T[2*he+1];Ee>=l&&Ee<=m&&Ve>=p&&Ve<=_&&j.push(S[he])}continue}let X=$+V>>1,ee=T[2*X],se=T[2*X+1];ee>=l&&ee<=m&&se>=p&&se<=_&&j.push(S[X]),(F===0?l<=ee:p<=se)&&(N.push($),N.push(X-1),N.push(1-F)),(F===0?m>=ee:_>=se)&&(N.push(X+1),N.push(V),N.push(1-F))}return j}within(l,p,m){if(!this._finished)throw new Error("Data not yet indexed - call index.finish().");let{ids:_,coords:S,nodeSize:T}=this,C=[0,_.length-1,0],N=[],j=m*m;for(;C.length;){let F=C.pop()||0,V=C.pop()||0,$=C.pop()||0;if(V-$<=T){for(let he=$;he<=V;he++)Rfe(S[2*he],S[2*he+1],l,p)<=j&&N.push(_[he]);continue}let X=$+V>>1,ee=S[2*X],se=S[2*X+1];Rfe(ee,se,l,p)<=j&&N.push(_[X]),(F===0?l-m<=ee:p-m<=se)&&(C.push($),C.push(X-1),C.push(1-F)),(F===0?l+m>=ee:p+m>=se)&&(C.push(X+1),C.push(V),C.push(1-F))}return N}}function vB(f,l,p,m,_,S){if(_-m<=p)return;let T=m+_>>1;kfe(f,l,T,m,_,S),vB(f,l,p,m,T-1,1-S),vB(f,l,p,T+1,_,1-S)}function kfe(f,l,p,m,_,S){for(;_>m;){if(_-m>600){let j=_-m+1,F=p-m+1,V=Math.log(j),$=.5*Math.exp(2*V/3),X=.5*Math.sqrt(V*$*(j-$)/j)*(F-j/2<0?-1:1);kfe(f,l,p,Math.max(m,Math.floor(p-F*$/j+X)),Math.min(_,Math.floor(p+(j-F)*$/j+X)),S)}let T=l[2*p+S],C=m,N=_;for(fI(f,l,m,p),l[2*_+S]>T&&fI(f,l,m,_);C<N;){for(fI(f,l,C,N),C++,N--;l[2*C+S]<T;)C++;for(;l[2*N+S]>T;)N--}l[2*m+S]===T?fI(f,l,m,N):(N++,fI(f,l,N,_)),N<=p&&(m=N+1),p<=N&&(_=N-1)}}function fI(f,l,p,m){yB(f,p,m),yB(l,2*p,2*m),yB(l,2*p+1,2*m+1)}function yB(f,l,p){let m=f[l];f[l]=f[p],f[p]=m}function Rfe(f,l,p,m){let _=f-p,S=l-m;return _*_+S*S}var _B;o.co=void 0,(_B=o.co||(o.co={})).create="create",_B.load="load",_B.fullLoad="fullLoad";let sD=null,dI=[],bB=1e3/60,xB="loadTime",wB="fullLoadTime",gmt={mark(f){performance.mark(f)},frame(f){let l=f;sD!=null&&dI.push(l-sD),sD=l},clearMetrics(){sD=null,dI=[],performance.clearMeasures(xB),performance.clearMeasures(wB);for(let f in o.co)performance.clearMarks(o.co[f])},getPerformanceMetrics(){performance.measure(xB,o.co.create,o.co.load),performance.measure(wB,o.co.create,o.co.fullLoad);let f=performance.getEntriesByName(xB)[0].duration,l=performance.getEntriesByName(wB)[0].duration,p=dI.length,m=1/(dI.reduce((S,T)=>S+T,0)/p/1e3),_=dI.filter(S=>S>bB).reduce((S,T)=>S+(T-bB)/bB,0);return{loadTime:f,fullLoadTime:l,fps:m,percentDroppedFrames:_/(p+_)*100,totalFrames:p}}};o.$=cI,o.A=G,o.B=wp,o.C=gi,o.D=Sr,o.E=de,o.F=CU,o.G=function(f){if(sr==null){let l=f.navigator?f.navigator.userAgent:null;sr=!!f.safari||!(!l||!(/\b(iPad|iPhone|iPod)\b/.test(l)||l.match("Safari")&&!l.match("Chrome")))}return sr},o.H=class{constructor(f,l){this.target=f,this.mapId=l,this.resolveRejects={},this.tasks={},this.taskQueue=[],this.abortControllers={},this.messageHandlers={},this.invoker=new amt(()=>this.process()),this.subscription=Tr(this.target,"message",p=>this.receive(p),!1),this.globalScope=Ot(self)?f:window}registerMessageHandler(f,l){this.messageHandlers[f]=l}sendAsync(f,l){return new Promise((p,m)=>{let _=Math.round(1e18*Math.random()).toString(36).substring(0,10),S=l?Tr(l.signal,"abort",()=>{S==null||S.unsubscribe(),delete this.resolveRejects[_];let N={id:_,type:"<cancel>",origin:location.origin,targetMapId:f.targetMapId,sourceMapId:this.mapId};this.target.postMessage(N)},smt):null;this.resolveRejects[_]={resolve:N=>{S==null||S.unsubscribe(),p(N)},reject:N=>{S==null||S.unsubscribe(),m(N)}};let T=[],C=Object.assign(Object.assign({},f),{id:_,sourceMapId:this.mapId,origin:location.origin,data:vv(f.data,T)});this.target.postMessage(C,{transfer:T})})}receive(f){let l=f.data,p=l.id;if(!(l.origin!=="file://"&&location.origin!=="file://"&&l.origin!=="resource://android"&&location.origin!=="resource://android"&&l.origin!==location.origin||l.targetMapId&&this.mapId!==l.targetMapId)){if(l.type==="<cancel>"){delete this.tasks[p];let m=this.abortControllers[p];return delete this.abortControllers[p],void(m&&m.abort())}if(Ot(self)||l.mustQueue)return this.tasks[p]=l,this.taskQueue.push(p),void this.invoker.trigger();this.processTask(p,l)}}process(){if(this.taskQueue.length===0)return;let f=this.taskQueue.shift(),l=this.tasks[f];delete this.tasks[f],this.taskQueue.length>0&&this.invoker.trigger(),l&&this.processTask(f,l)}processTask(f,l){return i(this,void 0,void 0,function*(){if(l.type==="<response>"){let _=this.resolveRejects[f];return delete this.resolveRejects[f],_?void(l.error?_.reject(u1(l.error)):_.resolve(u1(l.data))):void 0}if(!this.messageHandlers[l.type])return void this.completeTask(f,new Error(`Could not find a registered handler for ${l.type}, map ID: ${this.mapId}, available handlers: ${Object.keys(this.messageHandlers).join(", ")}`));let p=u1(l.data),m=new AbortController;this.abortControllers[f]=m;try{let _=yield this.messageHandlers[l.type](l.sourceMapId,p,m);this.completeTask(f,null,_)}catch(_){this.completeTask(f,_)}})}completeTask(f,l,p){let m=[];delete this.abortControllers[f];let _={id:f,type:"<response>",sourceMapId:this.mapId,origin:location.origin,error:l?vv(l):null,data:vv(p,m)};this.target.postMessage(_,{transfer:m})}remove(){this.invoker.remove(),this.subscription.unsubscribe()}},o.I=nB,o.J=an,o.K=function(){var f=new G(16);return G!=Float32Array&&(f[1]=0,f[2]=0,f[3]=0,f[4]=0,f[6]=0,f[7]=0,f[8]=0,f[9]=0,f[11]=0,f[12]=0,f[13]=0,f[14]=0),f[0]=1,f[5]=1,f[10]=1,f[15]=1,f},o.L=function(f,l,p){var m,_,S,T,C,N,j,F,V,$,X,ee,se=p[0],he=p[1],Ee=p[2];return l===f?(f[12]=l[0]*se+l[4]*he+l[8]*Ee+l[12],f[13]=l[1]*se+l[5]*he+l[9]*Ee+l[13],f[14]=l[2]*se+l[6]*he+l[10]*Ee+l[14],f[15]=l[3]*se+l[7]*he+l[11]*Ee+l[15]):(_=l[1],S=l[2],T=l[3],C=l[4],N=l[5],j=l[6],F=l[7],V=l[8],$=l[9],X=l[10],ee=l[11],f[0]=m=l[0],f[1]=_,f[2]=S,f[3]=T,f[4]=C,f[5]=N,f[6]=j,f[7]=F,f[8]=V,f[9]=$,f[10]=X,f[11]=ee,f[12]=m*se+C*he+V*Ee+l[12],f[13]=_*se+N*he+$*Ee+l[13],f[14]=S*se+j*he+X*Ee+l[14],f[15]=T*se+F*he+ee*Ee+l[15]),f},o.M=function(f,l,p){var m=p[0],_=p[1],S=p[2];return f[0]=l[0]*m,f[1]=l[1]*m,f[2]=l[2]*m,f[3]=l[3]*m,f[4]=l[4]*_,f[5]=l[5]*_,f[6]=l[6]*_,f[7]=l[7]*_,f[8]=l[8]*S,f[9]=l[9]*S,f[10]=l[10]*S,f[11]=l[11]*S,f[12]=l[12],f[13]=l[13],f[14]=l[14],f[15]=l[15],f},o.N=function(f,l,p){var m=l[0],_=l[1],S=l[2],T=l[3],C=l[4],N=l[5],j=l[6],F=l[7],V=l[8],$=l[9],X=l[10],ee=l[11],se=l[12],he=l[13],Ee=l[14],Ve=l[15],Oe=p[0],K=p[1],pe=p[2],Ne=p[3];return f[0]=Oe*m+K*C+pe*V+Ne*se,f[1]=Oe*_+K*N+pe*$+Ne*he,f[2]=Oe*S+K*j+pe*X+Ne*Ee,f[3]=Oe*T+K*F+pe*ee+Ne*Ve,f[4]=(Oe=p[4])*m+(K=p[5])*C+(pe=p[6])*V+(Ne=p[7])*se,f[5]=Oe*_+K*N+pe*$+Ne*he,f[6]=Oe*S+K*j+pe*X+Ne*Ee,f[7]=Oe*T+K*F+pe*ee+Ne*Ve,f[8]=(Oe=p[8])*m+(K=p[9])*C+(pe=p[10])*V+(Ne=p[11])*se,f[9]=Oe*_+K*N+pe*$+Ne*he,f[10]=Oe*S+K*j+pe*X+Ne*Ee,f[11]=Oe*T+K*F+pe*ee+Ne*Ve,f[12]=(Oe=p[12])*m+(K=p[13])*C+(pe=p[14])*V+(Ne=p[15])*se,f[13]=Oe*_+K*N+pe*$+Ne*he,f[14]=Oe*S+K*j+pe*X+Ne*Ee,f[15]=Oe*T+K*F+pe*ee+Ne*Ve,f},o.O=function(f,l){let p={};for(let m=0;m<l.length;m++){let _=l[m];_ in f&&(p[_]=f[_])}return p},o.P=x,o.Q=wv,o.R=$c,o.S=pfe,o.T=zN,o.U=cfe,o.V=R,o.W=q,o.X=dr,o.Y=Zc,o.Z=tt,o._=i,o.a=jt,o.a$=function(f,l,p){var m=Math.sin(p),_=Math.cos(p),S=l[4],T=l[5],C=l[6],N=l[7],j=l[8],F=l[9],V=l[10],$=l[11];return l!==f&&(f[0]=l[0],f[1]=l[1],f[2]=l[2],f[3]=l[3],f[12]=l[12],f[13]=l[13],f[14]=l[14],f[15]=l[15]),f[4]=S*_+j*m,f[5]=T*_+F*m,f[6]=C*_+V*m,f[7]=N*_+$*m,f[8]=j*_-S*m,f[9]=F*_-T*m,f[10]=V*_-C*m,f[11]=$*_-N*m,f},o.a0=25,o.a1=dB,o.a2=f=>{let l=window.document.createElement("video");return l.muted=!0,new Promise(p=>{l.onloadstart=()=>{p(l)};for(let m of f){let _=window.document.createElement("source");Ye(m)||(l.crossOrigin="Anonymous"),_.src=m,l.appendChild(_)}})},o.a3=Ke,o.a4=function(){return De++},o.a5=xe,o.a6=Nx,o.a7=i1,o.a8=y1,o.a9=yfe,o.aA=function(f,l,p,m,_=!1){if(!p[0]&&!p[1])return[0,0];let S=_?m==="map"?-f.bearingInRadians:0:m==="viewport"?f.bearingInRadians:0;if(S){let T=Math.sin(S),C=Math.cos(S);p=[p[0]*C-p[1]*T,p[0]*T+p[1]*C]}return[_?p[0]:Et(l,p[0],f.zoom),_?p[1]:Et(l,p[1],f.zoom)]},o.aC=aB,o.aD=mB,o.aE=iB,o.aF=gB,o.aG=Ri,o.aH=YN,o.aI=ft,o.aJ=So,o.aK=Eo,o.aL=_t,o.aM=Ce,o.aN=dfe,o.aO=function(f,l,p){return f[0]=l[0]*p,f[1]=l[1]*p,f[2]=l[2]*p,f},o.aP=function(f,l,p){return f[0]=l[0]+p[0],f[1]=l[1]+p[1],f[2]=l[2]+p[2],f},o.aQ=function(f){var l=new G(3);return l[0]=f[0],l[1]=f[1],l[2]=f[2],l},o.aR=function(f,l,p){return f[0]=l[0]*p[0],f[1]=l[1]*p[1],f[2]=l[2]*p[2],f[3]=l[3]*p[3],f},o.aS=function(f,l,p){return f[0]=l[0]-p[0],f[1]=l[1]-p[1],f[2]=l[2]-p[2],f},o.aT=function(f,l){var p=l[0],m=l[1],_=l[2],S=p*p+m*m+_*_;return S>0&&(S=1/Math.sqrt(S)),f[0]=l[0]*S,f[1]=l[1]*S,f[2]=l[2]*S,f},o.aU=function(f,l,p){var m=l[0],_=l[1],S=l[2],T=p[0],C=p[1],N=p[2];return f[0]=_*N-S*C,f[1]=S*T-m*N,f[2]=m*C-_*T,f},o.aV=function(f,l){return f[0]*l[0]+f[1]*l[1]+f[2]*l[2]},o.aW=mfe,o.aX=Dx,o.aY=function(f,l,p,m,_){var S,T=1/Math.tan(l/2);return f[0]=T/p,f[1]=0,f[2]=0,f[3]=0,f[4]=0,f[5]=T,f[6]=0,f[7]=0,f[8]=0,f[9]=0,f[11]=-1,f[12]=0,f[13]=0,f[15]=0,_!=null&&_!==1/0?(f[10]=(_+m)*(S=1/(m-_)),f[14]=2*_*m*S):(f[10]=-1,f[14]=-2*m),f},o.aZ=function(f){var l=new G(16);return l[0]=f[0],l[1]=f[1],l[2]=f[2],l[3]=f[3],l[4]=f[4],l[5]=f[5],l[6]=f[6],l[7]=f[7],l[8]=f[8],l[9]=f[9],l[10]=f[10],l[11]=f[11],l[12]=f[12],l[13]=f[13],l[14]=f[14],l[15]=f[15],l},o.a_=function(f,l,p){var m=Math.sin(p),_=Math.cos(p),S=l[0],T=l[1],C=l[2],N=l[3],j=l[4],F=l[5],V=l[6],$=l[7];return l!==f&&(f[8]=l[8],f[9]=l[9],f[10]=l[10],f[11]=l[11],f[12]=l[12],f[13]=l[13],f[14]=l[14],f[15]=l[15]),f[0]=S*_+j*m,f[1]=T*_+F*m,f[2]=C*_+V*m,f[3]=N*_+$*m,f[4]=j*_-S*m,f[5]=F*_-T*m,f[6]=V*_-C*m,f[7]=$*_-N*m,f},o.aa=function(f){let l={};if(f.replace(/(?:^|(?:\s*\,\s*))([^\x00-\x20\(\)<>@\,;\:\\"\/\[\]\?\=\{\}\x7F]+)(?:\=(?:([^\x00-\x20\(\)<>@\,;\:\\"\/\[\]\?\=\{\}\x7F]+)|(?:\"((?:[^"\\]|\\.)*)\")))?/g,(p,m,_,S)=>{let T=_||S;return l[m]=!T||T.toLowerCase(),""}),l["max-age"]){let p=parseInt(l["max-age"],10);isNaN(p)?delete l["max-age"]:l["max-age"]=p}return l},o.ab=qr,o.ac=function(f){return Math.pow(2,f)},o.ad=Q,o.ae=ct,o.af=85.051129,o.ag=ffe,o.ah=function(f){return Math.log(f)/Math.LN2},o.ai=function(f){var l=f[0],p=f[1];return l*l+p*p},o.aj=function(f,l){let p=[];for(let m in f)m in l||p.push(m);return p},o.ak=function(f,l){let p=0,m=0;if(f.kind==="constant")m=f.layoutSize;else if(f.kind!=="source"){let{interpolationType:_,minZoom:S,maxZoom:T}=f,C=_?ct(js.interpolationFactor(_,l,S,T),0,1):0;f.kind==="camera"?m=wp.number(f.minSize,f.maxSize,C):p=C}return{uSizeT:p,uSize:m}},o.am=function(f,{uSize:l,uSizeT:p},{lowerSize:m,upperSize:_}){return f.kind==="source"?m/nh:f.kind==="composite"?wp.number(m/nh,_/nh,p):l},o.an=function(f,l){var p=l[0],m=l[1],_=l[2],S=l[3],T=l[4],C=l[5],N=l[6],j=l[7],F=l[8],V=l[9],$=l[10],X=l[11],ee=l[12],se=l[13],he=l[14],Ee=l[15],Ve=p*C-m*T,Oe=p*N-_*T,K=p*j-S*T,pe=m*N-_*C,Ne=m*j-S*C,ot=_*j-S*N,Tt=F*se-V*ee,at=F*he-$*ee,dt=F*Ee-X*ee,kt=V*he-$*se,It=V*Ee-X*se,Ut=$*Ee-X*he,vt=Ve*Ut-Oe*It+K*kt+pe*dt-Ne*at+ot*Tt;return vt?(f[0]=(C*Ut-N*It+j*kt)*(vt=1/vt),f[1]=(_*It-m*Ut-S*kt)*vt,f[2]=(se*ot-he*Ne+Ee*pe)*vt,f[3]=($*Ne-V*ot-X*pe)*vt,f[4]=(N*dt-T*Ut-j*at)*vt,f[5]=(p*Ut-_*dt+S*at)*vt,f[6]=(he*K-ee*ot-Ee*Oe)*vt,f[7]=(F*ot-$*K+X*Oe)*vt,f[8]=(T*It-C*dt+j*Tt)*vt,f[9]=(m*dt-p*It-S*Tt)*vt,f[10]=(ee*Ne-se*K+Ee*Ve)*vt,f[11]=(V*K-F*Ne-X*Ve)*vt,f[12]=(C*at-T*kt-N*Tt)*vt,f[13]=(p*kt-m*at+_*Tt)*vt,f[14]=(se*Oe-ee*pe-he*Ve)*vt,f[15]=(F*pe-V*Oe+$*Ve)*vt,f):null},o.ao=Re,o.ap=function(f){return Math.hypot(f[0],f[1])},o.aq=function(f){return f[0]=0,f[1]=0,f},o.ar=function(f,l,p){return f[0]=l[0]*p,f[1]=l[1]*p,f},o.as=sB,o.at=Se,o.au=function(f,l,p,m){let _=l.y-f.y,S=l.x-f.x,T=m.y-p.y,C=m.x-p.x,N=T*S-C*_;if(N===0)return null;let j=(C*(f.y-p.y)-T*(f.x-p.x))/N;return new x(f.x+j*S,f.y+j*_)},o.av=wfe,o.aw=spe,o.ax=function(f){let l=1/0,p=1/0,m=-1/0,_=-1/0;for(let S of f)l=Math.min(l,S.x),p=Math.min(p,S.y),m=Math.max(m,S.x),_=Math.max(_,S.y);return[l,p,m,_]},o.ay=Fa,o.az=Et,o.b=Ft,o.b$=class extends ae{},o.b0=function(){let f=new Float32Array(16);return Q(f),f},o.b1=function(){let f=new Float64Array(16);return Q(f),f},o.b2=function(){return new Float64Array(16)},o.b3=function(f,l,p){let m=new Float64Array(4);return function(_,S,T,C){var N=.5*Math.PI/180;S*=N,T*=N,C*=N;var j=Math.sin(S),F=Math.cos(S),V=Math.sin(T),$=Math.cos(T),X=Math.sin(C),ee=Math.cos(C);_[0]=j*$*ee-F*V*X,_[1]=F*V*ee+j*$*X,_[2]=F*$*X-j*V*ee,_[3]=F*$*ee+j*V*X}(m,f,l-90,p),m},o.b4=function(f,l,p,m){var _,S,T,C,N,j=l[0],F=l[1],V=l[2],$=l[3],X=p[0],ee=p[1],se=p[2],he=p[3];return(S=j*X+F*ee+V*se+$*he)<0&&(S=-S,X=-X,ee=-ee,se=-se,he=-he),1-S>B?(_=Math.acos(S),T=Math.sin(_),C=Math.sin((1-m)*_)/T,N=Math.sin(m*_)/T):(C=1-m,N=m),f[0]=C*j+N*X,f[1]=C*F+N*ee,f[2]=C*V+N*se,f[3]=C*$+N*he,f},o.b5=function(f){let l=new Float64Array(9);var p,m,_,S,T,C,N,j,F,V,$,X,ee,se,he,Ee,Ve,Oe;V=(_=(m=f)[0])*(N=_+_),$=(S=m[1])*N,ee=(T=m[2])*N,se=T*(j=S+S),Ee=(C=m[3])*N,Ve=C*j,Oe=C*(F=T+T),(p=l)[0]=1-(X=S*j)-(he=T*F),p[3]=$-Oe,p[6]=ee+Ve,p[1]=$+Oe,p[4]=1-V-he,p[7]=se-Ee,p[2]=ee-Ve,p[5]=se+Ee,p[8]=1-V-X;let K=Ce(-Math.asin(ct(l[2],-1,1))),pe,Ne;return Math.hypot(l[5],l[8])<.001?(pe=0,Ne=-Ce(Math.atan2(l[3],l[4]))):(pe=Ce(l[5]===0&&l[8]===0?0:Math.atan2(l[5],l[8])),Ne=Ce(l[1]===0&&l[0]===0?0:Math.atan2(l[1],l[0]))),{roll:pe,pitch:K+90,bearing:Ne}},o.b6=function(f,l){return f.roll==l.roll&&f.pitch==l.pitch&&f.bearing==l.bearing},o.b7=mn,o.b8=Ix,o.b9=Ox,o.bA=function(f){if(f.type==="custom")return new imt(f);switch(f.type){case"background":return new rmt(f);case"circle":return new Xdt(f);case"fill":return new ght(f);case"fill-extrusion":return new Sht(f);case"heatmap":return new Jdt(f);case"hillshade":return new tht(f);case"line":return new Nht(f);case"raster":return new omt(f);case"symbol":return new rD(f)}},o.bB=st,o.bC=function(f,l){if(!f)return[{command:"setStyle",args:[l]}];let p=[];try{if(!oe(f.version,l.version))return[{command:"setStyle",args:[l]}];oe(f.center,l.center)||p.push({command:"setCenter",args:[l.center]}),oe(f.state,l.state)||p.push({command:"setGlobalState",args:[l.state]}),oe(f.centerAltitude,l.centerAltitude)||p.push({command:"setCenterAltitude",args:[l.centerAltitude]}),oe(f.zoom,l.zoom)||p.push({command:"setZoom",args:[l.zoom]}),oe(f.bearing,l.bearing)||p.push({command:"setBearing",args:[l.bearing]}),oe(f.pitch,l.pitch)||p.push({command:"setPitch",args:[l.pitch]}),oe(f.roll,l.roll)||p.push({command:"setRoll",args:[l.roll]}),oe(f.sprite,l.sprite)||p.push({command:"setSprite",args:[l.sprite]}),oe(f.glyphs,l.glyphs)||p.push({command:"setGlyphs",args:[l.glyphs]}),oe(f.transition,l.transition)||p.push({command:"setTransition",args:[l.transition]}),oe(f.light,l.light)||p.push({command:"setLight",args:[l.light]}),oe(f.terrain,l.terrain)||p.push({command:"setTerrain",args:[l.terrain]}),oe(f.sky,l.sky)||p.push({command:"setSky",args:[l.sky]}),oe(f.projection,l.projection)||p.push({command:"setProjection",args:[l.projection]});let m={},_=[];(function(T,C,N,j){let F;for(F in C=C||{},T=T||{})Object.prototype.hasOwnProperty.call(T,F)&&(Object.prototype.hasOwnProperty.call(C,F)||it(F,N,j));for(F in C)Object.prototype.hasOwnProperty.call(C,F)&&(Object.prototype.hasOwnProperty.call(T,F)?oe(T[F],C[F])||(T[F].type==="geojson"&&C[F].type==="geojson"&&$e(T,C,F)?Ue(N,{command:"setGeoJSONSourceData",args:[F,C[F].data]}):wt(F,C,N,j)):ze(F,C,N))})(f.sources,l.sources,_,m);let S=[];f.layers&&f.layers.forEach(T=>{"source"in T&&m[T.source]?p.push({command:"removeLayer",args:[T.id]}):S.push(T)}),p=p.concat(_),function(T,C,N){C=C||[];let j=(T=T||[]).map(yr),F=C.map(yr),V=T.reduce(zt,{}),$=C.reduce(zt,{}),X=j.slice(),ee=Object.create(null),se,he,Ee,Ve,Oe;for(let K=0,pe=0;K<j.length;K++)se=j[K],Object.prototype.hasOwnProperty.call($,se)?pe++:(Ue(N,{command:"removeLayer",args:[se]}),X.splice(X.indexOf(se,pe),1));for(let K=0,pe=0;K<F.length;K++)se=F[F.length-1-K],X[X.length-1-K]!==se&&(Object.prototype.hasOwnProperty.call(V,se)?(Ue(N,{command:"removeLayer",args:[se]}),X.splice(X.lastIndexOf(se,X.length-pe),1)):pe++,Ve=X[X.length-K],Ue(N,{command:"addLayer",args:[$[se],Ve]}),X.splice(X.length-K,0,se),ee[se]=!0);for(let K=0;K<F.length;K++)if(se=F[K],he=V[se],Ee=$[se],!ee[se]&&!oe(he,Ee))if(oe(he.source,Ee.source)&&oe(he["source-layer"],Ee["source-layer"])&&oe(he.type,Ee.type)){for(Oe in Xt(he.layout,Ee.layout,N,se,null,"setLayoutProperty"),Xt(he.paint,Ee.paint,N,se,null,"setPaintProperty"),oe(he.filter,Ee.filter)||Ue(N,{command:"setFilter",args:[se,Ee.filter]}),oe(he.minzoom,Ee.minzoom)&&oe(he.maxzoom,Ee.maxzoom)||Ue(N,{command:"setLayerZoomRange",args:[se,Ee.minzoom,Ee.maxzoom]}),he)Object.prototype.hasOwnProperty.call(he,Oe)&&Oe!=="layout"&&Oe!=="paint"&&Oe!=="filter"&&Oe!=="metadata"&&Oe!=="minzoom"&&Oe!=="maxzoom"&&(Oe.indexOf("paint.")===0?Xt(he[Oe],Ee[Oe],N,se,Oe.slice(6),"setPaintProperty"):oe(he[Oe],Ee[Oe])||Ue(N,{command:"setLayerProperty",args:[se,Oe,Ee[Oe]]}));for(Oe in Ee)Object.prototype.hasOwnProperty.call(Ee,Oe)&&!Object.prototype.hasOwnProperty.call(he,Oe)&&Oe!=="layout"&&Oe!=="paint"&&Oe!=="filter"&&Oe!=="metadata"&&Oe!=="minzoom"&&Oe!=="maxzoom"&&(Oe.indexOf("paint.")===0?Xt(he[Oe],Ee[Oe],N,se,Oe.slice(6),"setPaintProperty"):oe(he[Oe],Ee[Oe])||Ue(N,{command:"setLayerProperty",args:[se,Oe,Ee[Oe]]}))}else Ue(N,{command:"removeLayer",args:[se]}),Ve=X[X.lastIndexOf(se)+1],Ue(N,{command:"addLayer",args:[Ee,Ve]})}(S,l.layers,p)}catch(m){console.warn("Unable to compute style diff:",m),p=[{command:"setStyle",args:[l]}]}return p},o.bD=function(f){let l=[],p=f.id;return p===void 0&&l.push({message:`layers.${p}: missing required property "id"`}),f.render===void 0&&l.push({message:`layers.${p}: missing required method "render"`}),f.renderingMode&&f.renderingMode!=="2d"&&f.renderingMode!=="3d"&&l.push({message:`layers.${p}: property "renderingMode" must be either "2d" or "3d"`}),l},o.bE=function f(l,p){if(Array.isArray(l)){if(!Array.isArray(p)||l.length!==p.length)return!1;for(let m=0;m<l.length;m++)if(!f(l[m],p[m]))return!1;return!0}if(typeof l=="object"&&l!==null&&p!==null){if(typeof p!="object"||Object.keys(l).length!==Object.keys(p).length)return!1;for(let m in l)if(!f(l[m],p[m]))return!1;return!0}return l===p},o.bF=Qe,o.bG=Ge,o.bH=class extends vi{constructor(f,l){super(f,l),this.current=0}set(f){this.current!==f&&(this.current=f,this.gl.uniform1i(this.location,f))}},o.bI=GN,o.bJ=class extends vi{constructor(f,l){super(f,l),this.current=LU}set(f){if(f[12]!==this.current[12]||f[0]!==this.current[0])return this.current=f,void this.gl.uniformMatrix4fv(this.location,!1,f);for(let l=1;l<16;l++)if(f[l]!==this.current[l]){this.current=f,this.gl.uniformMatrix4fv(this.location,!1,f);break}}},o.bK=VN,o.bL=class extends vi{constructor(f,l){super(f,l),this.current=[0,0,0]}set(f){f[0]===this.current[0]&&f[1]===this.current[1]&&f[2]===this.current[2]||(this.current=f,this.gl.uniform3f(this.location,f[0],f[1],f[2]))}},o.bM=class extends vi{constructor(f,l){super(f,l),this.current=[0,0]}set(f){f[0]===this.current[0]&&f[1]===this.current[1]||(this.current=f,this.gl.uniform2f(this.location,f[0],f[1]))}},o.bN=re,o.bO=function(f,l){var p=Math.sin(l),m=Math.cos(l);return f[0]=m,f[1]=p,f[2]=0,f[3]=-p,f[4]=m,f[5]=0,f[6]=0,f[7]=0,f[8]=1,f},o.bP=function(f,l,p){var m=l[0],_=l[1],S=l[2];return f[0]=m*p[0]+_*p[3]+S*p[6],f[1]=m*p[1]+_*p[4]+S*p[7],f[2]=m*p[2]+_*p[5]+S*p[8],f},o.bQ=function(f,l,p,m,_,S,T){var C=1/(l-p),N=1/(m-_),j=1/(S-T);return f[0]=-2*C,f[1]=0,f[2]=0,f[3]=0,f[4]=0,f[5]=-2*N,f[6]=0,f[7]=0,f[8]=0,f[9]=0,f[10]=2*j,f[11]=0,f[12]=(l+p)*C,f[13]=(_+m)*N,f[14]=(T+S)*j,f[15]=1,f},o.bR=class extends vi{constructor(f,l){super(f,l),this.current=new Array}set(f){if(f!=this.current){this.current=f;let l=new Float32Array(4*f.length);for(let p=0;p<f.length;p++)l[4*p]=f[p].r,l[4*p+1]=f[p].g,l[4*p+2]=f[p].b,l[4*p+3]=f[p].a;this.gl.uniform4fv(this.location,l)}}},o.bS=class extends vi{constructor(f,l){super(f,l),this.current=new Array}set(f){if(f!=this.current){this.current=f;let l=new Float32Array(f);this.gl.uniform1fv(this.location,l)}}},o.bT=class extends E{},o.bU=Rht,o.bV=class extends P{},o.bW=UU,o.bX=function(f){return f<=1?1:Math.pow(2,Math.ceil(Math.log(f)/Math.LN2))},o.bY=vpe,o.bZ=function(f,l,p){var m=l[0],_=l[1],S=l[2],T=p[3]*m+p[7]*_+p[11]*S+p[15];return f[0]=(p[0]*m+p[4]*_+p[8]*S+p[12])/(T=T||1),f[1]=(p[1]*m+p[5]*_+p[9]*S+p[13])/T,f[2]=(p[2]*m+p[6]*_+p[10]*S+p[14])/T,f},o.b_=class extends Dm{},o.ba=rI,o.bb=Ax,o.bc=Pt,o.bd=Lt,o.be=xs,o.bf=function(f,l,p,m,_){return Pt(m,_,ct((f-l)/(p-l),0,1))},o.bg=Xe,o.bh=function(){return new Float64Array(3)},o.bi=function(f,l,p,m){return f[0]=l[0]+p[0]*m,f[1]=l[1]+p[1]*m,f[2]=l[2]+p[2]*m,f},o.bj=we,o.bk=function(){return new Float64Array(4)},o.bl=function(f,l,p,m){var _=[],S=[];return _[0]=l[0]-p[0],_[1]=l[1]-p[1],_[2]=l[2]-p[2],S[0]=_[0]*Math.cos(m)-_[1]*Math.sin(m),S[1]=_[0]*Math.sin(m)+_[1]*Math.cos(m),S[2]=_[2],f[0]=S[0]+p[0],f[1]=S[1]+p[1],f[2]=S[2]+p[2],f},o.bm=function(f,l,p,m){var _=[],S=[];return _[0]=l[0]-p[0],_[1]=l[1]-p[1],_[2]=l[2]-p[2],S[0]=_[0],S[1]=_[1]*Math.cos(m)-_[2]*Math.sin(m),S[2]=_[1]*Math.sin(m)+_[2]*Math.cos(m),f[0]=S[0]+p[0],f[1]=S[1]+p[1],f[2]=S[2]+p[2],f},o.bn=function(f,l,p,m){var _=[],S=[];return _[0]=l[0]-p[0],_[1]=l[1]-p[1],_[2]=l[2]-p[2],S[0]=_[2]*Math.sin(m)+_[0]*Math.cos(m),S[1]=_[1],S[2]=_[2]*Math.cos(m)-_[0]*Math.sin(m),f[0]=S[0]+p[0],f[1]=S[1]+p[1],f[2]=S[2]+p[2],f},o.bo=me,o.bp=function(f,l,p){var m=Math.sin(p),_=Math.cos(p),S=l[0],T=l[1],C=l[2],N=l[3],j=l[8],F=l[9],V=l[10],$=l[11];return l!==f&&(f[4]=l[4],f[5]=l[5],f[6]=l[6],f[7]=l[7],f[12]=l[12],f[13]=l[13],f[14]=l[14],f[15]=l[15]),f[0]=S*_-j*m,f[1]=T*_-F*m,f[2]=C*_-V*m,f[3]=N*_-$*m,f[8]=S*m+j*_,f[9]=T*m+F*_,f[10]=C*m+V*_,f[11]=N*m+$*_,f},o.bq=function(f,l){let p=Xe(f,360),m=Xe(l,360),_=m-p,S=m>p?_-360:_+360;return Math.abs(_)<Math.abs(S)?_:S},o.br=function(f){return f[0]=0,f[1]=0,f[2]=0,f},o.bs=function(f,l,p,m){let _=Math.sqrt(f*f+l*l),S=Math.sqrt(p*p+m*m);f/=_,l/=_,p/=S,m/=S;let T=Math.acos(f*p+l*m);return-l*p+f*m>0?T:-T},o.bt=function(f,l){return f[0]*l[0]+f[1]*l[1]+f[2]*l[2]+f[3]},o.bu=pB,o.bv=function(f,l){let p=Xe(f,2*Math.PI),m=Xe(l,2*Math.PI);return Math.min(Math.abs(p-m),Math.abs(p-m+2*Math.PI),Math.abs(p-m-2*Math.PI))},o.bw=function(){let f={},l=ne.$version;for(let p in ne.$root){let m=ne.$root[p];if(m.required){let _=null;_=p==="version"?l:m.type==="array"?[]:{},_!=null&&(f[p]=_)}}return f},o.bx=qT,o.by=Rn,o.bz=function(f){f=f.slice();let l=Object.create(null);for(let p=0;p<f.length;p++)l[f[p].id]=f[p];for(let p=0;p<f.length;p++)"ref"in f[p]&&(f[p]=Ie(f[p],l[f[p].ref]));return f},o.c=Bt,o.c0=function(f,l){return f[0]===l[0]&&f[1]===l[1]&&f[2]===l[2]&&f[3]===l[3]&&f[4]===l[4]&&f[5]===l[5]&&f[6]===l[6]&&f[7]===l[7]&&f[8]===l[8]&&f[9]===l[9]&&f[10]===l[10]&&f[11]===l[11]&&f[12]===l[12]&&f[13]===l[13]&&f[14]===l[14]&&f[15]===l[15]},o.c1=function(f,l){var p=f[0],m=f[1],_=f[2],S=f[3],T=f[4],C=f[5],N=f[6],j=f[7],F=f[8],V=f[9],$=f[10],X=f[11],ee=f[12],se=f[13],he=f[14],Ee=f[15],Ve=l[0],Oe=l[1],K=l[2],pe=l[3],Ne=l[4],ot=l[5],Tt=l[6],at=l[7],dt=l[8],kt=l[9],It=l[10],Ut=l[11],vt=l[12],hr=l[13],Br=l[14],jr=l[15];return Math.abs(p-Ve)<=B*Math.max(1,Math.abs(p),Math.abs(Ve))&&Math.abs(m-Oe)<=B*Math.max(1,Math.abs(m),Math.abs(Oe))&&Math.abs(_-K)<=B*Math.max(1,Math.abs(_),Math.abs(K))&&Math.abs(S-pe)<=B*Math.max(1,Math.abs(S),Math.abs(pe))&&Math.abs(T-Ne)<=B*Math.max(1,Math.abs(T),Math.abs(Ne))&&Math.abs(C-ot)<=B*Math.max(1,Math.abs(C),Math.abs(ot))&&Math.abs(N-Tt)<=B*Math.max(1,Math.abs(N),Math.abs(Tt))&&Math.abs(j-at)<=B*Math.max(1,Math.abs(j),Math.abs(at))&&Math.abs(F-dt)<=B*Math.max(1,Math.abs(F),Math.abs(dt))&&Math.abs(V-kt)<=B*Math.max(1,Math.abs(V),Math.abs(kt))&&Math.abs($-It)<=B*Math.max(1,Math.abs($),Math.abs(It))&&Math.abs(X-Ut)<=B*Math.max(1,Math.abs(X),Math.abs(Ut))&&Math.abs(ee-vt)<=B*Math.max(1,Math.abs(ee),Math.abs(vt))&&Math.abs(se-hr)<=B*Math.max(1,Math.abs(se),Math.abs(hr))&&Math.abs(he-Br)<=B*Math.max(1,Math.abs(he),Math.abs(Br))&&Math.abs(Ee-jr)<=B*Math.max(1,Math.abs(Ee),Math.abs(jr))},o.c2=function(f,l){return f[0]=l[0],f[1]=l[1],f[2]=l[2],f[3]=l[3],f[4]=l[4],f[5]=l[5],f[6]=l[6],f[7]=l[7],f[8]=l[8],f[9]=l[9],f[10]=l[10],f[11]=l[11],f[12]=l[12],f[13]=l[13],f[14]=l[14],f[15]=l[15],f},o.c3=f=>f.type==="symbol",o.c4=f=>f.type==="circle",o.c5=f=>f.type==="heatmap",o.c6=f=>f.type==="line",o.c7=f=>f.type==="fill",o.c8=f=>f.type==="fill-extrusion",o.c9=f=>f.type==="hillshade",o.cA=WU,o.cB=XU,o.cC=oI,o.cD=tB,o.cE=class{constructor(f){this._marks={start:[f.url,"start"].join("#"),end:[f.url,"end"].join("#"),measure:f.url.toString()},performance.mark(this._marks.start)}finish(){performance.mark(this._marks.end);let f=performance.getEntriesByName(this._marks.measure);return f.length===0&&(performance.measure(this._marks.measure,this._marks.start,this._marks.end),f=performance.getEntriesByName(this._marks.measure),performance.clearMarks(this._marks.start),performance.clearMarks(this._marks.end),performance.clearMeasures(this._marks.measure)),f}},o.cF=function(f,l,p,m,_){return i(this,void 0,void 0,function*(){if(q())try{return yield dr(f,l,p,m,_)}catch(S){}return function(S,T,C,N,j){let F=S.width,V=S.height;Er&&Cr||(Er=new OffscreenCanvas(F,V),Cr=Er.getContext("2d",{willReadFrequently:!0})),Er.width=F,Er.height=V,Cr.drawImage(S,0,0,F,V);let $=Cr.getImageData(T,C,N,j);return Cr.clearRect(0,0,F,V),$.data}(f,l,p,m,_)})},o.cG=gfe,o.cH=a,o.cI=h,o.cJ=Lpe,o.cK=Wpe,o.cL=px,o.cM=zf,o.ca=f=>f.type==="raster",o.cb=f=>f.type==="background",o.cc=f=>f.type==="custom",o.cd=Gt,o.ce=function(f,l,p){let m=Je(l.x-p.x,l.y-p.y),_=Je(f.x-p.x,f.y-p.y);var S,T;return Ce(Math.atan2(m[0]*_[1]-m[1]*_[0],(S=m)[0]*(T=_)[0]+S[1]*T[1]))},o.cf=nt,o.cg=function(f,l){return et[l]&&(f instanceof MouseEvent||f instanceof WheelEvent)},o.ch=function(f,l){return Ze[l]&&"touches"in f},o.ci=function(f){return Ze[f]||et[f]},o.cj=function(f,l,p){var m=l[0],_=l[1];return f[0]=p[0]*m+p[4]*_+p[12],f[1]=p[1]*m+p[5]*_+p[13],f},o.ck=function(f,l){let{x:p,y:m}=cI.fromLngLat(l);return!(f<0||f>25||m<0||m>=1||p<0||p>=1)},o.cl=function(f,l){return f[0]=l[0],f[1]=0,f[2]=0,f[3]=0,f[4]=0,f[5]=l[1],f[6]=0,f[7]=0,f[8]=0,f[9]=0,f[10]=l[2],f[11]=0,f[12]=0,f[13]=0,f[14]=0,f[15]=1,f},o.cm=class extends h1{},o.cn=gmt,o.cp=function(f){return f.message===qt},o.cq=gn,o.cr=function(f,l){jt.REGISTERED_PROTOCOLS[f]=l},o.cs=function(f){delete jt.REGISTERED_PROTOCOLS[f]},o.ct=function(f,l){let p={};for(let _=0;_<f.length;_++){let S=l&&l[f[_].id]||CN(f[_]);l&&(l[f[_].id]=S);let T=p[S];T||(T=p[S]=[]),T.push(f[_])}let m=[];for(let _ in p)m.push(p[_]);return m},o.cu=cr,o.cv=vfe,o.cw=_fe,o.cx=Zpe,o.cy=function(f){f.bucket.createArrays(),f.bucket.tilePixelRatio=tt/(512*f.bucket.overscaling),f.bucket.compareText={},f.bucket.iconsNeedLinear=!1;let l=f.bucket.layers[0],p=l.layout,m=l._unevaluatedLayout._values,_={layoutIconSize:m["icon-size"].possiblyEvaluate(new gi(f.bucket.zoom+1),f.canonical),layoutTextSize:m["text-size"].possiblyEvaluate(new gi(f.bucket.zoom+1),f.canonical),textMaxSize:m["text-size"].possiblyEvaluate(new gi(18))};if(f.bucket.textSizeData.kind==="composite"){let{minZoom:j,maxZoom:F}=f.bucket.textSizeData;_.compositeTextSizes=[m["text-size"].possiblyEvaluate(new gi(j),f.canonical),m["text-size"].possiblyEvaluate(new gi(F),f.canonical)]}if(f.bucket.iconSizeData.kind==="composite"){let{minZoom:j,maxZoom:F}=f.bucket.iconSizeData;_.compositeIconSizes=[m["icon-size"].possiblyEvaluate(new gi(j),f.canonical),m["icon-size"].possiblyEvaluate(new gi(F),f.canonical)]}let S=p.get("text-line-height")*Fa,T=p.get("text-rotation-alignment")!=="viewport"&&p.get("symbol-placement")!=="point",C=p.get("text-keep-upright"),N=p.get("text-size");for(let j of f.bucket.features){let F=p.get("text-font").evaluate(j,{},f.canonical).join(","),V=N.evaluate(j,{},f.canonical),$=_.layoutTextSize.evaluate(j,{},f.canonical),X=_.layoutIconSize.evaluate(j,{},f.canonical),ee={horizontal:{},vertical:void 0},se=j.text,he,Ee=[0,0];if(se){let K=se.toString(),pe=p.get("text-letter-spacing").evaluate(j,{},f.canonical)*Fa,Ne=AU(K)?pe:0,ot=p.get("text-anchor").evaluate(j,{},f.canonical),Tt=Pfe(l,j,f.canonical);if(!Tt){let It=p.get("text-radial-offset").evaluate(j,{},f.canonical);Ee=It?Ofe(ot,[It*Fa,hB]):p.get("text-offset").evaluate(j,{},f.canonical).map(Ut=>Ut*Fa)}let at=T?"center":p.get("text-justify").evaluate(j,{},f.canonical),dt=p.get("symbol-placement")==="point"?p.get("text-max-width").evaluate(j,{},f.canonical)*Fa:1/0,kt=()=>{f.bucket.allowVerticalPlacement&&wx(K)&&(ee.vertical=JN(se,f.glyphMap,f.glyphPositions,f.imagePositions,F,dt,S,ot,"left",Ne,Ee,o.al.vertical,!0,$,V))};if(!T&&Tt){let It=new Set;if(at==="auto")for(let vt=0;vt<Tt.values.length;vt+=2)It.add(mB(Tt.values[vt]));else It.add(at);let Ut=!1;for(let vt of It)if(!ee.horizontal[vt])if(Ut)ee.horizontal[vt]=ee.horizontal[0];else{let hr=JN(se,f.glyphMap,f.glyphPositions,f.imagePositions,F,dt,S,"center",vt,Ne,Ee,o.al.horizontal,!1,$,V);hr&&(ee.horizontal[vt]=hr,Ut=hr.positionedLines.length===1)}kt()}else{at==="auto"&&(at=mB(ot));let It=JN(se,f.glyphMap,f.glyphPositions,f.imagePositions,F,dt,S,ot,at,Ne,Ee,o.al.horizontal,!1,$,V);It&&(ee.horizontal[at]=It),kt(),wx(K)&&T&&C&&(ee.vertical=JN(se,f.glyphMap,f.glyphPositions,f.imagePositions,F,dt,S,ot,at,Ne,Ee,o.al.vertical,!1,$,V))}}let Ve=!1;if(j.icon&&j.icon.name){let K=f.imageMap[j.icon.name];K&&(he=Xht(f.imagePositions[j.icon.name],p.get("icon-offset").evaluate(j,{},f.canonical),p.get("icon-anchor").evaluate(j,{},f.canonical)),Ve=!!K.sdf,f.bucket.sdfIcons===void 0?f.bucket.sdfIcons=Ve:f.bucket.sdfIcons!==Ve&&Rt("Style sheet warning: Cannot mix SDF and non-SDF icons in one buffer"),(K.pixelRatio!==f.bucket.pixelRatio||p.get("icon-rotate").constantOr(1)!==0)&&(f.bucket.iconsNeedLinear=!0))}let Oe=Dfe(ee.horizontal)||ee.vertical;f.bucket.iconsInText=!!Oe&&Oe.iconsInText,(Oe||he)&&hmt(f.bucket,j,ee,he,f.imageMap,_,$,X,Ee,Ve,f.canonical,f.subdivisionGranularity)}f.showCollisionBoxes&&f.bucket.generateCollisionDebugBuffers()},o.cz=QU,o.d=Ye,o.e=We,o.f=f=>i(void 0,void 0,void 0,function*(){if(f.byteLength===0)return createImageBitmap(new ImageData(1,1));let l=new Blob([new Uint8Array(f)],{type:"image/png"});try{return createImageBitmap(l)}catch(p){throw new Error(`Could not load image because of ${p.message}. Please make sure to use a supported image type such as PNG or JPEG. Note that SVGs are not supported.`)}}),o.g=$t,o.h=f=>new Promise((l,p)=>{let m=new Image;m.onload=()=>{l(m),URL.revokeObjectURL(m.src),m.onload=null,window.requestAnimationFrame(()=>{m.src=Jt})},m.onerror=()=>p(new Error("Could not load image. Please make sure to use a supported image type such as PNG or JPEG. Note that SVGs are not supported."));let _=new Blob([new Uint8Array(f)],{type:"image/png"});m.src=f.byteLength?URL.createObjectURL(_):Jt}),o.i=Ot,o.j=(f,l)=>wa(We(f,{type:"json"}),l),o.k=J,o.l=Y,o.m=wa,o.n=(f,l)=>wa(We(f,{type:"arrayBuffer"}),l),o.o=function(f){return new tB(f).readFields(zht,[])},o.p=$pe,o.q=XT,o.r=Ea,o.s=Tr,o.t=yx,o.u=$n,o.v=ne,o.w=Rt,o.x=jT,o.y=mv,o.z=function([f,l,p]){return l+=90,l*=Math.PI/180,p*=Math.PI/180,{x:f*Math.cos(l)*Math.sin(p),y:f*Math.sin(l)*Math.sin(p),z:f*Math.cos(p)}}}),r("worker",["./shared"],function(o){"use strict";class i{constructor(le){this.keyCache={},le&&this.replace(le)}replace(le){this._layerConfigs={},this._layers={},this.update(le,[])}update(le,ue){for(let J of le){this._layerConfigs[J.id]=J;let de=this._layers[J.id]=o.bA(J);de._featureFilter=o.a7(de.filter),this.keyCache[J.id]&&delete this.keyCache[J.id]}for(let J of ue)delete this.keyCache[J],delete this._layerConfigs[J],delete this._layers[J];this.familiesBySource={};let Y=o.ct(Object.values(this._layerConfigs),this.keyCache);for(let J of Y){let de=J.map(ze=>this._layers[ze.id]),ne=de[0];if(ne.visibility==="none")continue;let je=ne.source||"",Ie=this.familiesBySource[je];Ie||(Ie=this.familiesBySource[je]={});let oe=ne.sourceLayer||"_geojsonTileLayer",Ue=Ie[oe];Ue||(Ue=Ie[oe]=[]),Ue.push(de)}}}class a{constructor(le){let ue={},Y=[];for(let je in le){let Ie=le[je],oe=ue[je]={};for(let Ue in Ie){let ze=Ie[+Ue];if(!ze||ze.bitmap.width===0||ze.bitmap.height===0)continue;let it={x:0,y:0,w:ze.bitmap.width+2,h:ze.bitmap.height+2};Y.push(it),oe[Ue]={rect:it,metrics:ze.metrics}}}let{w:J,h:de}=o.p(Y),ne=new o.q({width:J||1,height:de||1});for(let je in le){let Ie=le[je];for(let oe in Ie){let Ue=Ie[+oe];if(!Ue||Ue.bitmap.width===0||Ue.bitmap.height===0)continue;let ze=ue[je][oe].rect;o.q.copy(Ue.bitmap,ne,{x:0,y:0},{x:ze.x+1,y:ze.y+1},Ue.bitmap)}}this.image=ne,this.positions=ue}}o.cu("GlyphAtlas",a);class u{constructor(le){this.tileID=new o.Y(le.tileID.overscaledZ,le.tileID.wrap,le.tileID.canonical.z,le.tileID.canonical.x,le.tileID.canonical.y),this.uid=le.uid,this.zoom=le.zoom,this.pixelRatio=le.pixelRatio,this.tileSize=le.tileSize,this.source=le.source,this.overscaling=this.tileID.overscaleFactor(),this.showCollisionBoxes=le.showCollisionBoxes,this.collectResourceTiming=!!le.collectResourceTiming,this.returnDependencies=!!le.returnDependencies,this.promoteId=le.promoteId,this.inFlightDependencies=[]}parse(le,ue,Y,J,de){return o._(this,void 0,void 0,function*(){this.status="parsing",this.data=le,this.collisionBoxArray=new o.a5;let ne=new o.cv(Object.keys(le.layers).sort()),je=new o.cw(this.tileID,this.promoteId);je.bucketLayerIDs=[];let Ie={},oe={featureIndex:je,iconDependencies:{},patternDependencies:{},glyphDependencies:{},availableImages:Y,subdivisionGranularity:de},Ue=ue.familiesBySource[this.source];for(let Qt in Ue){let mt=le.layers[Qt];if(!mt)continue;mt.version===1&&o.w(`Vector tile source "${this.source}" layer "${Qt}" does not use vector tile spec v2 and therefore may have some rendering errors.`);let fr=ne.encode(Qt),wr=[];for(let Vr=0;Vr<mt.length;Vr++){let en=mt.feature(Vr),Yr=je.getId(en,Qt);wr.push({feature:en,id:Yr,index:Vr,sourceLayerIndex:fr})}for(let Vr of Ue[Qt]){let en=Vr[0];en.source!==this.source&&o.w(`layer.source = ${en.source} does not equal this.source = ${this.source}`),en.minzoom&&this.zoom<Math.floor(en.minzoom)||en.maxzoom&&this.zoom>=en.maxzoom||en.visibility!=="none"&&(d(Vr,this.zoom,Y),(Ie[en.id]=en.createBucket({index:je.bucketLayerIDs.length,layers:Vr,zoom:this.zoom,pixelRatio:this.pixelRatio,overscaling:this.overscaling,collisionBoxArray:this.collisionBoxArray,sourceLayerIndex:fr,sourceID:this.source})).populate(wr,oe,this.tileID.canonical),je.bucketLayerIDs.push(Vr.map(Yr=>Yr.id)))}}let ze=o.bF(oe.glyphDependencies,Qt=>Object.keys(Qt).map(Number));this.inFlightDependencies.forEach(Qt=>Qt==null?void 0:Qt.abort()),this.inFlightDependencies=[];let it=Promise.resolve({});if(Object.keys(ze).length){let Qt=new AbortController;this.inFlightDependencies.push(Qt),it=J.sendAsync({type:"GG",data:{stacks:ze,source:this.source,tileID:this.tileID,type:"glyphs"}},Qt)}let wt=Object.keys(oe.iconDependencies),$e=Promise.resolve({});if(wt.length){let Qt=new AbortController;this.inFlightDependencies.push(Qt),$e=J.sendAsync({type:"GI",data:{icons:wt,source:this.source,tileID:this.tileID,type:"icons"}},Qt)}let Xt=Object.keys(oe.patternDependencies),yr=Promise.resolve({});if(Xt.length){let Qt=new AbortController;this.inFlightDependencies.push(Qt),yr=J.sendAsync({type:"GI",data:{icons:Xt,source:this.source,tileID:this.tileID,type:"patterns"}},Qt)}let[zt,Ke,Tn]=yield Promise.all([it,$e,yr]),rn=new a(zt),Gn=new o.cx(Ke,Tn);for(let Qt in Ie){let mt=Ie[Qt];mt instanceof o.a6?(d(mt.layers,this.zoom,Y),o.cy({bucket:mt,glyphMap:zt,glyphPositions:rn.positions,imageMap:Ke,imagePositions:Gn.iconPositions,showCollisionBoxes:this.showCollisionBoxes,canonical:this.tileID.canonical,subdivisionGranularity:oe.subdivisionGranularity})):mt.hasPattern&&(mt instanceof o.cz||mt instanceof o.cA||mt instanceof o.cB)&&(d(mt.layers,this.zoom,Y),mt.addFeatures(oe,this.tileID.canonical,Gn.patternPositions))}return this.status="done",{buckets:Object.values(Ie).filter(Qt=>!Qt.isEmpty()),featureIndex:je,collisionBoxArray:this.collisionBoxArray,glyphAtlasImage:rn.image,imageAtlas:Gn,glyphMap:this.returnDependencies?zt:null,iconMap:this.returnDependencies?Ke:null,glyphPositions:this.returnDependencies?rn.positions:null}})}}function d(Ye,le,ue){let Y=new o.C(le);for(let J of Ye)J.recalculate(Y,ue)}class h{constructor(le,ue,Y){this.actor=le,this.layerIndex=ue,this.availableImages=Y,this.fetching={},this.loading={},this.loaded={}}loadVectorTile(le,ue){return o._(this,void 0,void 0,function*(){let Y=yield o.n(le.request,ue);try{return{vectorTile:new o.cC.VectorTile(new o.cD(Y.data)),rawData:Y.data,cacheControl:Y.cacheControl,expires:Y.expires}}catch(J){let de=new Uint8Array(Y.data),ne=`Unable to parse the tile at ${le.request.url}, `;throw ne+=de[0]===31&&de[1]===139?"please make sure the data is not gzipped and that you have configured the relevant header in the server":`got error: ${J.message}`,new Error(ne)}})}loadTile(le){return o._(this,void 0,void 0,function*(){let ue=le.uid,Y=!!(le&&le.request&&le.request.collectResourceTiming)&&new o.cE(le.request),J=new u(le);this.loading[ue]=J;let de=new AbortController;J.abort=de;try{let ne=yield this.loadVectorTile(le,de);if(delete this.loading[ue],!ne)return null;let je=ne.rawData,Ie={};ne.expires&&(Ie.expires=ne.expires),ne.cacheControl&&(Ie.cacheControl=ne.cacheControl);let oe={};if(Y){let ze=Y.finish();ze&&(oe.resourceTiming=JSON.parse(JSON.stringify(ze)))}J.vectorTile=ne.vectorTile;let Ue=J.parse(ne.vectorTile,this.layerIndex,this.availableImages,this.actor,le.subdivisionGranularity);this.loaded[ue]=J,this.fetching[ue]={rawTileData:je,cacheControl:Ie,resourceTiming:oe};try{let ze=yield Ue;return o.e({rawTileData:je.slice(0)},ze,Ie,oe)}finally{delete this.fetching[ue]}}catch(ne){throw delete this.loading[ue],J.status="done",this.loaded[ue]=J,ne}})}reloadTile(le){return o._(this,void 0,void 0,function*(){let ue=le.uid;if(!this.loaded||!this.loaded[ue])throw new Error("Should not be trying to reload a tile that was never loaded or has been removed");let Y=this.loaded[ue];if(Y.showCollisionBoxes=le.showCollisionBoxes,Y.status==="parsing"){let J=yield Y.parse(Y.vectorTile,this.layerIndex,this.availableImages,this.actor,le.subdivisionGranularity),de;if(this.fetching[ue]){let{rawTileData:ne,cacheControl:je,resourceTiming:Ie}=this.fetching[ue];delete this.fetching[ue],de=o.e({rawTileData:ne.slice(0)},J,je,Ie)}else de=J;return de}if(Y.status==="done"&&Y.vectorTile)return Y.parse(Y.vectorTile,this.layerIndex,this.availableImages,this.actor,le.subdivisionGranularity)})}abortTile(le){return o._(this,void 0,void 0,function*(){let ue=this.loading,Y=le.uid;ue&&ue[Y]&&ue[Y].abort&&(ue[Y].abort.abort(),delete ue[Y])})}removeTile(le){return o._(this,void 0,void 0,function*(){this.loaded&&this.loaded[le.uid]&&delete this.loaded[le.uid]})}}class v{constructor(){this.loaded={}}loadTile(le){return o._(this,void 0,void 0,function*(){let{uid:ue,encoding:Y,rawImageData:J,redFactor:de,greenFactor:ne,blueFactor:je,baseShift:Ie}=le,oe=J.width+2,Ue=J.height+2,ze=o.b(J)?new o.R({width:oe,height:Ue},yield o.cF(J,-1,-1,oe,Ue)):J,it=new o.cG(ue,ze,Y,de,ne,je,Ie);return this.loaded=this.loaded||{},this.loaded[ue]=it,it})}removeTile(le){let ue=this.loaded,Y=le.uid;ue&&ue[Y]&&delete ue[Y]}}var b,x,M=function(){if(x)return b;function Ye(ue,Y){if(ue.length!==0){le(ue[0],Y);for(var J=1;J<ue.length;J++)le(ue[J],!Y)}}function le(ue,Y){for(var J=0,de=0,ne=0,je=ue.length,Ie=je-1;ne<je;Ie=ne++){var oe=(ue[ne][0]-ue[Ie][0])*(ue[Ie][1]+ue[ne][1]),Ue=J+oe;de+=Math.abs(J)>=Math.abs(oe)?J-Ue+oe:oe-Ue+J,J=Ue}J+de>=0!=!!Y&&ue.reverse()}return x=1,b=function ue(Y,J){var de,ne=Y&&Y.type;if(ne==="FeatureCollection")for(de=0;de<Y.features.length;de++)ue(Y.features[de],J);else if(ne==="GeometryCollection")for(de=0;de<Y.geometries.length;de++)ue(Y.geometries[de],J);else if(ne==="Feature")ue(Y.geometry,J);else if(ne==="Polygon")Ye(Y.coordinates,J);else if(ne==="MultiPolygon")for(de=0;de<Y.coordinates.length;de++)Ye(Y.coordinates[de],J);return Y}}(),O=o.cH(M);let D=o.cC.VectorTileFeature.prototype.toGeoJSON;class k{constructor(le){this._feature=le,this.extent=o.Z,this.type=le.type,this.properties=le.tags,"id"in le&&!isNaN(le.id)&&(this.id=parseInt(le.id,10))}loadGeometry(){if(this._feature.type===1){let le=[];for(let ue of this._feature.geometry)le.push([new o.P(ue[0],ue[1])]);return le}{let le=[];for(let ue of this._feature.geometry){let Y=[];for(let J of ue)Y.push(new o.P(J[0],J[1]));le.push(Y)}return le}}toGeoJSON(le,ue,Y){return D.call(this,le,ue,Y)}}class R{constructor(le){this.layers={_geojsonTileLayer:this},this.name="_geojsonTileLayer",this.extent=o.Z,this.length=le.length,this._features=le}feature(le){return new k(this._features[le])}}var q,B,G,re={exports:{}},Q=function(){if(G)return re.exports;G=1;var Ye=o.cK(),le=function(){if(B)return q;B=1;var Ue=o.cI(),ze=o.cJ().VectorTileFeature;function it($e,Xt){this.options=Xt||{},this.features=$e,this.length=$e.length}function wt($e,Xt){this.id=typeof $e.id=="number"?$e.id:void 0,this.type=$e.type,this.rawGeometry=$e.type===1?[$e.geometry]:$e.geometry,this.properties=$e.tags,this.extent=Xt||4096}return q=it,it.prototype.feature=function($e){return new wt(this.features[$e],this.options.extent)},wt.prototype.loadGeometry=function(){var $e=this.rawGeometry;this.geometry=[];for(var Xt=0;Xt<$e.length;Xt++){for(var yr=$e[Xt],zt=[],Ke=0;Ke<yr.length;Ke++)zt.push(new Ue(yr[Ke][0],yr[Ke][1]));this.geometry.push(zt)}return this.geometry},wt.prototype.bbox=function(){this.geometry||this.loadGeometry();for(var $e=this.geometry,Xt=1/0,yr=-1/0,zt=1/0,Ke=-1/0,Tn=0;Tn<$e.length;Tn++)for(var rn=$e[Tn],Gn=0;Gn<rn.length;Gn++){var Qt=rn[Gn];Xt=Math.min(Xt,Qt.x),yr=Math.max(yr,Qt.x),zt=Math.min(zt,Qt.y),Ke=Math.max(Ke,Qt.y)}return[Xt,zt,yr,Ke]},wt.prototype.toGeoJSON=ze.prototype.toGeoJSON,q}();function ue(Ue){var ze=new Ye;return function(it,wt){for(var $e in it.layers)wt.writeMessage(3,Y,it.layers[$e])}(Ue,ze),ze.finish()}function Y(Ue,ze){var it;ze.writeVarintField(15,Ue.version||1),ze.writeStringField(1,Ue.name||""),ze.writeVarintField(5,Ue.extent||4096);var wt={keys:[],values:[],keycache:{},valuecache:{}};for(it=0;it<Ue.length;it++)wt.feature=Ue.feature(it),ze.writeMessage(2,J,wt);var $e=wt.keys;for(it=0;it<$e.length;it++)ze.writeStringField(3,$e[it]);var Xt=wt.values;for(it=0;it<Xt.length;it++)ze.writeMessage(4,oe,Xt[it])}function J(Ue,ze){var it=Ue.feature;it.id!==void 0&&ze.writeVarintField(1,it.id),ze.writeMessage(2,de,Ue),ze.writeVarintField(3,it.type),ze.writeMessage(4,Ie,it)}function de(Ue,ze){var it=Ue.feature,wt=Ue.keys,$e=Ue.values,Xt=Ue.keycache,yr=Ue.valuecache;for(var zt in it.properties){var Ke=it.properties[zt],Tn=Xt[zt];if(Ke!==null){Tn===void 0&&(wt.push(zt),Xt[zt]=Tn=wt.length-1),ze.writeVarint(Tn);var rn=typeof Ke;rn!=="string"&&rn!=="boolean"&&rn!=="number"&&(Ke=JSON.stringify(Ke));var Gn=rn+":"+Ke,Qt=yr[Gn];Qt===void 0&&($e.push(Ke),yr[Gn]=Qt=$e.length-1),ze.writeVarint(Qt)}}}function ne(Ue,ze){return(ze<<3)+(7&Ue)}function je(Ue){return Ue<<1^Ue>>31}function Ie(Ue,ze){for(var it=Ue.loadGeometry(),wt=Ue.type,$e=0,Xt=0,yr=it.length,zt=0;zt<yr;zt++){var Ke=it[zt],Tn=1;wt===1&&(Tn=Ke.length),ze.writeVarint(ne(1,Tn));for(var rn=wt===3?Ke.length-1:Ke.length,Gn=0;Gn<rn;Gn++){Gn===1&&wt!==1&&ze.writeVarint(ne(2,rn-1));var Qt=Ke[Gn].x-$e,mt=Ke[Gn].y-Xt;ze.writeVarint(je(Qt)),ze.writeVarint(je(mt)),$e+=Qt,Xt+=mt}wt===3&&ze.writeVarint(ne(7,1))}}function oe(Ue,ze){var it=typeof Ue;it==="string"?ze.writeStringField(1,Ue):it==="boolean"?ze.writeBooleanField(7,Ue):it==="number"&&(Ue%1!=0?ze.writeDoubleField(3,Ue):Ue<0?ze.writeSVarintField(6,Ue):ze.writeVarintField(5,Ue))}return re.exports=ue,re.exports.fromVectorTileJs=ue,re.exports.fromGeojsonVt=function(Ue,ze){ze=ze||{};var it={};for(var wt in Ue)it[wt]=new le(Ue[wt].features,ze),it[wt].name=wt,it[wt].version=ze.version,it[wt].extent=ze.extent;return ue({layers:it})},re.exports.GeoJSONWrapper=le,re.exports}(),ie=o.cH(Q);let me={minZoom:0,maxZoom:16,minPoints:2,radius:40,extent:512,nodeSize:64,log:!1,generateId:!1,reduce:null,map:Ye=>Ye},ve=Math.fround||(ye=new Float32Array(1),Ye=>(ye[0]=+Ye,ye[0]));var ye;let we=3,Se=5,ge=6;class Re{constructor(le){this.options=Object.assign(Object.create(me),le),this.trees=new Array(this.options.maxZoom+1),this.stride=this.options.reduce?7:6,this.clusterProps=[]}load(le){let{log:ue,minZoom:Y,maxZoom:J}=this.options;ue&&console.time("total time");let de=`prepare ${le.length} points`;ue&&console.time(de),this.points=le;let ne=[];for(let Ie=0;Ie<le.length;Ie++){let oe=le[Ie];if(!oe.geometry)continue;let[Ue,ze]=oe.geometry.coordinates,it=ve(Et(Ue)),wt=ve(Xe(ze));ne.push(it,wt,1/0,Ie,-1,1),this.options.reduce&&ne.push(0)}let je=this.trees[J+1]=this._createTree(ne);ue&&console.timeEnd(de);for(let Ie=J;Ie>=Y;Ie--){let oe=+Date.now();je=this.trees[Ie]=this._createTree(this._cluster(je,Ie)),ue&&console.log("z%d: %d clusters in %dms",Ie,je.numItems,+Date.now()-oe)}return ue&&console.timeEnd("total time"),this}getClusters(le,ue){let Y=((le[0]+180)%360+360)%360-180,J=Math.max(-90,Math.min(90,le[1])),de=le[2]===180?180:((le[2]+180)%360+360)%360-180,ne=Math.max(-90,Math.min(90,le[3]));if(le[2]-le[0]>=360)Y=-180,de=180;else if(Y>de){let ze=this.getClusters([Y,J,180,ne],ue),it=this.getClusters([-180,J,de,ne],ue);return ze.concat(it)}let je=this.trees[this._limitZoom(ue)],Ie=je.range(Et(Y),Xe(ne),Et(de),Xe(J)),oe=je.data,Ue=[];for(let ze of Ie){let it=this.stride*ze;Ue.push(oe[it+Se]>1?Je(oe,it,this.clusterProps):this.points[oe[it+we]])}return Ue}getChildren(le){let ue=this._getOriginId(le),Y=this._getOriginZoom(le),J="No cluster with the specified id.",de=this.trees[Y];if(!de)throw new Error(J);let ne=de.data;if(ue*this.stride>=ne.length)throw new Error(J);let je=this.options.radius/(this.options.extent*Math.pow(2,Y-1)),Ie=de.within(ne[ue*this.stride],ne[ue*this.stride+1],je),oe=[];for(let Ue of Ie){let ze=Ue*this.stride;ne[ze+4]===le&&oe.push(ne[ze+Se]>1?Je(ne,ze,this.clusterProps):this.points[ne[ze+we]])}if(oe.length===0)throw new Error(J);return oe}getLeaves(le,ue,Y){let J=[];return this._appendLeaves(J,le,ue=ue||10,Y=Y||0,0),J}getTile(le,ue,Y){let J=this.trees[this._limitZoom(le)],de=Math.pow(2,le),{extent:ne,radius:je}=this.options,Ie=je/ne,oe=(Y-Ie)/de,Ue=(Y+1+Ie)/de,ze={features:[]};return this._addTileFeatures(J.range((ue-Ie)/de,oe,(ue+1+Ie)/de,Ue),J.data,ue,Y,de,ze),ue===0&&this._addTileFeatures(J.range(1-Ie/de,oe,1,Ue),J.data,de,Y,de,ze),ue===de-1&&this._addTileFeatures(J.range(0,oe,Ie/de,Ue),J.data,-1,Y,de,ze),ze.features.length?ze:null}getClusterExpansionZoom(le){let ue=this._getOriginZoom(le)-1;for(;ue<=this.options.maxZoom;){let Y=this.getChildren(le);if(ue++,Y.length!==1)break;le=Y[0].properties.cluster_id}return ue}_appendLeaves(le,ue,Y,J,de){let ne=this.getChildren(ue);for(let je of ne){let Ie=je.properties;if(Ie&&Ie.cluster?de+Ie.point_count<=J?de+=Ie.point_count:de=this._appendLeaves(le,Ie.cluster_id,Y,J,de):de<J?de++:le.push(je),le.length===Y)break}return de}_createTree(le){let ue=new o.aF(le.length/this.stride|0,this.options.nodeSize,Float32Array);for(let Y=0;Y<le.length;Y+=this.stride)ue.add(le[Y],le[Y+1]);return ue.finish(),ue.data=le,ue}_addTileFeatures(le,ue,Y,J,de,ne){for(let je of le){let Ie=je*this.stride,oe=ue[Ie+Se]>1,Ue,ze,it;if(oe)Ue=tt(ue,Ie,this.clusterProps),ze=ue[Ie],it=ue[Ie+1];else{let Xt=this.points[ue[Ie+we]];Ue=Xt.properties;let[yr,zt]=Xt.geometry.coordinates;ze=Et(yr),it=Xe(zt)}let wt={type:1,geometry:[[Math.round(this.options.extent*(ze*de-Y)),Math.round(this.options.extent*(it*de-J))]],tags:Ue},$e;$e=oe||this.options.generateId?ue[Ie+we]:this.points[ue[Ie+we]].id,$e!==void 0&&(wt.id=$e),ne.features.push(wt)}}_limitZoom(le){return Math.max(this.options.minZoom,Math.min(Math.floor(+le),this.options.maxZoom+1))}_cluster(le,ue){let{radius:Y,extent:J,reduce:de,minPoints:ne}=this.options,je=Y/(J*Math.pow(2,ue)),Ie=le.data,oe=[],Ue=this.stride;for(let ze=0;ze<Ie.length;ze+=Ue){if(Ie[ze+2]<=ue)continue;Ie[ze+2]=ue;let it=Ie[ze],wt=Ie[ze+1],$e=le.within(Ie[ze],Ie[ze+1],je),Xt=Ie[ze+Se],yr=Xt;for(let zt of $e){let Ke=zt*Ue;Ie[Ke+2]>ue&&(yr+=Ie[Ke+Se])}if(yr>Xt&&yr>=ne){let zt,Ke=it*Xt,Tn=wt*Xt,rn=-1,Gn=((ze/Ue|0)<<5)+(ue+1)+this.points.length;for(let Qt of $e){let mt=Qt*Ue;if(Ie[mt+2]<=ue)continue;Ie[mt+2]=ue;let fr=Ie[mt+Se];Ke+=Ie[mt]*fr,Tn+=Ie[mt+1]*fr,Ie[mt+4]=Gn,de&&(zt||(zt=this._map(Ie,ze,!0),rn=this.clusterProps.length,this.clusterProps.push(zt)),de(zt,this._map(Ie,mt)))}Ie[ze+4]=Gn,oe.push(Ke/yr,Tn/yr,1/0,Gn,-1,yr),de&&oe.push(rn)}else{for(let zt=0;zt<Ue;zt++)oe.push(Ie[ze+zt]);if(yr>1)for(let zt of $e){let Ke=zt*Ue;if(!(Ie[Ke+2]<=ue)){Ie[Ke+2]=ue;for(let Tn=0;Tn<Ue;Tn++)oe.push(Ie[Ke+Tn])}}}}return oe}_getOriginId(le){return le-this.points.length>>5}_getOriginZoom(le){return(le-this.points.length)%32}_map(le,ue,Y){if(le[ue+Se]>1){let ne=this.clusterProps[le[ue+ge]];return Y?Object.assign({},ne):ne}let J=this.points[le[ue+we]].properties,de=this.options.map(J);return Y&&de===J?Object.assign({},de):de}}function Je(Ye,le,ue){return{type:"Feature",id:Ye[le+we],properties:tt(Ye,le,ue),geometry:{type:"Point",coordinates:[(Y=Ye[le],360*(Y-.5)),Pt(Ye[le+1])]}};var Y}function tt(Ye,le,ue){let Y=Ye[le+Se],J=Y>=1e4?`${Math.round(Y/1e3)}k`:Y>=1e3?Math.round(Y/100)/10+"k":Y,de=Ye[le+ge],ne=de===-1?{}:Object.assign({},ue[de]);return Object.assign(ne,{cluster:!0,cluster_id:Ye[le+we],point_count:Y,point_count_abbreviated:J})}function Et(Ye){return Ye/360+.5}function Xe(Ye){let le=Math.sin(Ye*Math.PI/180),ue=.5-.25*Math.log((1+le)/(1-le))/Math.PI;return ue<0?0:ue>1?1:ue}function Pt(Ye){let le=(180-360*Ye)*Math.PI/180;return 360*Math.atan(Math.exp(le))/Math.PI-90}function Lt(Ye,le,ue,Y){let J=Y,de=le+(ue-le>>1),ne,je=ue-le,Ie=Ye[le],oe=Ye[le+1],Ue=Ye[ue],ze=Ye[ue+1];for(let it=le+3;it<ue;it+=3){let wt=Gt(Ye[it],Ye[it+1],Ie,oe,Ue,ze);if(wt>J)ne=it,J=wt;else if(wt===J){let $e=Math.abs(it-de);$e<je&&(ne=it,je=$e)}}J>Y&&(ne-le>3&&Lt(Ye,le,ne,Y),Ye[ne+2]=J,ue-ne>3&&Lt(Ye,ne,ue,Y))}function Gt(Ye,le,ue,Y,J,de){let ne=J-ue,je=de-Y;if(ne!==0||je!==0){let Ie=((Ye-ue)*ne+(le-Y)*je)/(ne*ne+je*je);Ie>1?(ue=J,Y=de):Ie>0&&(ue+=ne*Ie,Y+=je*Ie)}return ne=Ye-ue,je=le-Y,ne*ne+je*je}function nt(Ye,le,ue,Y){let J={id:Ye==null?null:Ye,type:le,geometry:ue,tags:Y,minX:1/0,minY:1/0,maxX:-1/0,maxY:-1/0};if(le==="Point"||le==="MultiPoint"||le==="LineString")ct(J,ue);else if(le==="Polygon")ct(J,ue[0]);else if(le==="MultiLineString")for(let de of ue)ct(J,de);else if(le==="MultiPolygon")for(let de of ue)ct(J,de[0]);return J}function ct(Ye,le){for(let ue=0;ue<le.length;ue+=3)Ye.minX=Math.min(Ye.minX,le[ue]),Ye.minY=Math.min(Ye.minY,le[ue+1]),Ye.maxX=Math.max(Ye.maxX,le[ue]),Ye.maxY=Math.max(Ye.maxY,le[ue+1])}function _t(Ye,le,ue,Y){if(!le.geometry)return;let J=le.geometry.coordinates;if(J&&J.length===0)return;let de=le.geometry.type,ne=Math.pow(ue.tolerance/((1<<ue.maxZoom)*ue.extent),2),je=[],Ie=le.id;if(ue.promoteId?Ie=le.properties[ue.promoteId]:ue.generateId&&(Ie=Y||0),de==="Point")We(J,je);else if(de==="MultiPoint")for(let oe of J)We(oe,je);else if(de==="LineString")De(J,je,ne,!1);else if(de==="MultiLineString"){if(ue.lineMetrics){for(let oe of J)je=[],De(oe,je,ne,!1),Ye.push(nt(Ie,"LineString",je,le.properties));return}Qe(J,je,ne,!1)}else if(de==="Polygon")Qe(J,je,ne,!0);else{if(de!=="MultiPolygon"){if(de==="GeometryCollection"){for(let oe of le.geometry.geometries)_t(Ye,{id:Ie,geometry:oe,properties:le.properties},ue,Y);return}throw new Error("Input data is not a valid GeoJSON object.")}for(let oe of J){let Ue=[];Qe(oe,Ue,ne,!0),je.push(Ue)}}Ye.push(nt(Ie,de,je,le.properties))}function We(Ye,le){le.push(Ge(Ye[0]),st(Ye[1]),0)}function De(Ye,le,ue,Y){let J,de,ne=0;for(let Ie=0;Ie<Ye.length;Ie++){let oe=Ge(Ye[Ie][0]),Ue=st(Ye[Ie][1]);le.push(oe,Ue,0),Ie>0&&(ne+=Y?(J*Ue-oe*de)/2:Math.sqrt(Math.pow(oe-J,2)+Math.pow(Ue-de,2))),J=oe,de=Ue}let je=le.length-3;le[2]=1,Lt(le,0,je,ue),le[je+2]=1,le.size=Math.abs(ne),le.start=0,le.end=le.size}function Qe(Ye,le,ue,Y){for(let J=0;J<Ye.length;J++){let de=[];De(Ye[J],de,ue,Y),le.push(de)}}function Ge(Ye){return Ye/360+.5}function st(Ye){let le=Math.sin(Ye*Math.PI/180),ue=.5-.25*Math.log((1+le)/(1-le))/Math.PI;return ue<0?0:ue>1?1:ue}function pt(Ye,le,ue,Y,J,de,ne,je){if(Y/=le,de>=(ue/=le)&&ne<Y)return Ye;if(ne<ue||de>=Y)return null;let Ie=[];for(let oe of Ye){let Ue=oe.geometry,ze=oe.type,it=J===0?oe.minX:oe.minY,wt=J===0?oe.maxX:oe.maxY;if(it>=ue&&wt<Y){Ie.push(oe);continue}if(wt<ue||it>=Y)continue;let $e=[];if(ze==="Point"||ze==="MultiPoint")Rt(Ue,$e,ue,Y,J);else if(ze==="LineString")St(Ue,$e,ue,Y,J,!1,je.lineMetrics);else if(ze==="MultiLineString")sr(Ue,$e,ue,Y,J,!1);else if(ze==="Polygon")sr(Ue,$e,ue,Y,J,!0);else if(ze==="MultiPolygon")for(let Xt of Ue){let yr=[];sr(Xt,yr,ue,Y,J,!0),yr.length&&$e.push(yr)}if($e.length){if(je.lineMetrics&&ze==="LineString"){for(let Xt of $e)Ie.push(nt(oe.id,ze,Xt,oe.tags));continue}ze!=="LineString"&&ze!=="MultiLineString"||($e.length===1?(ze="LineString",$e=$e[0]):ze="MultiLineString"),ze!=="Point"&&ze!=="MultiPoint"||(ze=$e.length===3?"Point":"MultiPoint"),Ie.push(nt(oe.id,ze,$e,oe.tags))}}return Ie.length?Ie:null}function Rt(Ye,le,ue,Y,J){for(let de=0;de<Ye.length;de+=3){let ne=Ye[de+J];ne>=ue&&ne<=Y&&Ft(le,Ye[de],Ye[de+1],Ye[de+2])}}function St(Ye,le,ue,Y,J,de,ne){let je=Ot(Ye),Ie=J===0?Jt:dr,oe,Ue,ze=Ye.start;for(let yr=0;yr<Ye.length-3;yr+=3){let zt=Ye[yr],Ke=Ye[yr+1],Tn=Ye[yr+2],rn=Ye[yr+3],Gn=Ye[yr+4],Qt=J===0?zt:Ke,mt=J===0?rn:Gn,fr=!1;ne&&(oe=Math.sqrt(Math.pow(zt-rn,2)+Math.pow(Ke-Gn,2))),Qt<ue?mt>ue&&(Ue=Ie(je,zt,Ke,rn,Gn,ue),ne&&(je.start=ze+oe*Ue)):Qt>Y?mt<Y&&(Ue=Ie(je,zt,Ke,rn,Gn,Y),ne&&(je.start=ze+oe*Ue)):Ft(je,zt,Ke,Tn),mt<ue&&Qt>=ue&&(Ue=Ie(je,zt,Ke,rn,Gn,ue),fr=!0),mt>Y&&Qt<=Y&&(Ue=Ie(je,zt,Ke,rn,Gn,Y),fr=!0),!de&&fr&&(ne&&(je.end=ze+oe*Ue),le.push(je),je=Ot(Ye)),ne&&(ze+=oe)}let it=Ye.length-3,wt=Ye[it],$e=Ye[it+1],Xt=J===0?wt:$e;Xt>=ue&&Xt<=Y&&Ft(je,wt,$e,Ye[it+2]),it=je.length-3,de&&it>=3&&(je[it]!==je[0]||je[it+1]!==je[1])&&Ft(je,je[0],je[1],je[2]),je.length&&le.push(je)}function Ot(Ye){let le=[];return le.size=Ye.size,le.start=Ye.start,le.end=Ye.end,le}function sr(Ye,le,ue,Y,J,de){for(let ne of Ye)St(ne,le,ue,Y,J,de,!1)}function Ft(Ye,le,ue,Y){Ye.push(le,ue,Y)}function Jt(Ye,le,ue,Y,J,de){let ne=(de-le)/(Y-le);return Ft(Ye,de,ue+(J-ue)*ne,1),ne}function dr(Ye,le,ue,Y,J,de){let ne=(de-ue)/(J-ue);return Ft(Ye,le+(Y-le)*ne,de,1),ne}function Er(Ye,le){let ue=[];for(let Y=0;Y<Ye.length;Y++){let J=Ye[Y],de=J.type,ne;if(de==="Point"||de==="MultiPoint"||de==="LineString")ne=Cr(J.geometry,le);else if(de==="MultiLineString"||de==="Polygon"){ne=[];for(let je of J.geometry)ne.push(Cr(je,le))}else if(de==="MultiPolygon"){ne=[];for(let je of J.geometry){let Ie=[];for(let oe of je)Ie.push(Cr(oe,le));ne.push(Ie)}}ue.push(nt(J.id,de,ne,J.tags))}return ue}function Cr(Ye,le){let ue=[];ue.size=Ye.size,Ye.start!==void 0&&(ue.start=Ye.start,ue.end=Ye.end);for(let Y=0;Y<Ye.length;Y+=3)ue.push(Ye[Y]+le,Ye[Y+1],Ye[Y+2]);return ue}function Tr(Ye,le){if(Ye.transformed)return Ye;let ue=1<<Ye.z,Y=Ye.x,J=Ye.y;for(let de of Ye.features){let ne=de.geometry,je=de.type;if(de.geometry=[],je===1)for(let Ie=0;Ie<ne.length;Ie+=2)de.geometry.push(qr(ne[Ie],ne[Ie+1],le,ue,Y,J));else for(let Ie=0;Ie<ne.length;Ie++){let oe=[];for(let Ue=0;Ue<ne[Ie].length;Ue+=2)oe.push(qr(ne[Ie][Ue],ne[Ie][Ue+1],le,ue,Y,J));de.geometry.push(oe)}}return Ye.transformed=!0,Ye}function qr(Ye,le,ue,Y,J,de){return[Math.round(ue*(Ye*Y-J)),Math.round(ue*(le*Y-de))]}function Ce(Ye,le,ue,Y,J){let de=le===J.maxZoom?0:J.tolerance/((1<<le)*J.extent),ne={features:[],numPoints:0,numSimplified:0,numFeatures:Ye.length,source:null,x:ue,y:Y,z:le,transformed:!1,minX:2,minY:1,maxX:-1,maxY:0};for(let je of Ye)Ze(ne,je,de,J);return ne}function Ze(Ye,le,ue,Y){let J=le.geometry,de=le.type,ne=[];if(Ye.minX=Math.min(Ye.minX,le.minX),Ye.minY=Math.min(Ye.minY,le.minY),Ye.maxX=Math.max(Ye.maxX,le.maxX),Ye.maxY=Math.max(Ye.maxY,le.maxY),de==="Point"||de==="MultiPoint")for(let je=0;je<J.length;je+=3)ne.push(J[je],J[je+1]),Ye.numPoints++,Ye.numSimplified++;else if(de==="LineString")et(ne,J,Ye,ue,!1,!1);else if(de==="MultiLineString"||de==="Polygon")for(let je=0;je<J.length;je++)et(ne,J[je],Ye,ue,de==="Polygon",je===0);else if(de==="MultiPolygon")for(let je=0;je<J.length;je++){let Ie=J[je];for(let oe=0;oe<Ie.length;oe++)et(ne,Ie[oe],Ye,ue,!0,oe===0)}if(ne.length){let je=le.tags||null;if(de==="LineString"&&Y.lineMetrics){je={};for(let oe in le.tags)je[oe]=le.tags[oe];je.mapbox_clip_start=J.start/J.size,je.mapbox_clip_end=J.end/J.size}let Ie={geometry:ne,type:de==="Polygon"||de==="MultiPolygon"?3:de==="LineString"||de==="MultiLineString"?2:1,tags:je};le.id!==null&&(Ie.id=le.id),Ye.features.push(Ie)}}function et(Ye,le,ue,Y,J,de){let ne=Y*Y;if(Y>0&&le.size<(J?ne:Y))return void(ue.numPoints+=le.length/3);let je=[];for(let Ie=0;Ie<le.length;Ie+=3)(Y===0||le[Ie+2]>ne)&&(ue.numSimplified++,je.push(le[Ie],le[Ie+1])),ue.numPoints++;J&&function(Ie,oe){let Ue=0;for(let ze=0,it=Ie.length,wt=it-2;ze<it;wt=ze,ze+=2)Ue+=(Ie[ze]-Ie[wt])*(Ie[ze+1]+Ie[wt+1]);if(Ue>0===oe)for(let ze=0,it=Ie.length;ze<it/2;ze+=2){let wt=Ie[ze],$e=Ie[ze+1];Ie[ze]=Ie[it-2-ze],Ie[ze+1]=Ie[it-1-ze],Ie[it-2-ze]=wt,Ie[it-1-ze]=$e}}(je,de),Ye.push(je)}let qt={maxZoom:14,indexMaxZoom:5,indexMaxPoints:1e5,tolerance:3,extent:4096,buffer:64,lineMetrics:!1,promoteId:null,generateId:!1,debug:0};class Bt{constructor(le,ue){let Y=(ue=this.options=function(de,ne){for(let je in ne)de[je]=ne[je];return de}(Object.create(qt),ue)).debug;if(Y&&console.time("preprocess data"),ue.maxZoom<0||ue.maxZoom>24)throw new Error("maxZoom should be in the 0-24 range");if(ue.promoteId&&ue.generateId)throw new Error("promoteId and generateId cannot be used together.");let J=function(de,ne){let je=[];if(de.type==="FeatureCollection")for(let Ie=0;Ie<de.features.length;Ie++)_t(je,de.features[Ie],ne,Ie);else _t(je,de.type==="Feature"?de:{geometry:de},ne);return je}(le,ue);this.tiles={},this.tileCoords=[],Y&&(console.timeEnd("preprocess data"),console.log("index: maxZoom: %d, maxPoints: %d",ue.indexMaxZoom,ue.indexMaxPoints),console.time("generate tiles"),this.stats={},this.total=0),J=function(de,ne){let je=ne.buffer/ne.extent,Ie=de,oe=pt(de,1,-1-je,je,0,-1,2,ne),Ue=pt(de,1,1-je,2+je,0,-1,2,ne);return(oe||Ue)&&(Ie=pt(de,1,-je,1+je,0,-1,2,ne)||[],oe&&(Ie=Er(oe,1).concat(Ie)),Ue&&(Ie=Ie.concat(Er(Ue,-1)))),Ie}(J,ue),J.length&&this.splitTile(J,0,0,0),Y&&(J.length&&console.log("features: %d, points: %d",this.tiles[0].numFeatures,this.tiles[0].numPoints),console.timeEnd("generate tiles"),console.log("tiles generated:",this.total,JSON.stringify(this.stats)))}splitTile(le,ue,Y,J,de,ne,je){let Ie=[le,ue,Y,J],oe=this.options,Ue=oe.debug;for(;Ie.length;){J=Ie.pop(),Y=Ie.pop(),ue=Ie.pop(),le=Ie.pop();let ze=1<<ue,it=jt(ue,Y,J),wt=this.tiles[it];if(!wt&&(Ue>1&&console.time("creation"),wt=this.tiles[it]=Ce(le,ue,Y,J,oe),this.tileCoords.push({z:ue,x:Y,y:J}),Ue)){Ue>1&&(console.log("tile z%d-%d-%d (features: %d, points: %d, simplified: %d)",ue,Y,J,wt.numFeatures,wt.numPoints,wt.numSimplified),console.timeEnd("creation"));let fr=`z${ue}`;this.stats[fr]=(this.stats[fr]||0)+1,this.total++}if(wt.source=le,de==null){if(ue===oe.indexMaxZoom||wt.numPoints<=oe.indexMaxPoints)continue}else{if(ue===oe.maxZoom||ue===de)continue;if(de!=null){let fr=de-ue;if(Y!==ne>>fr||J!==je>>fr)continue}}if(wt.source=null,le.length===0)continue;Ue>1&&console.time("clipping");let $e=.5*oe.buffer/oe.extent,Xt=.5-$e,yr=.5+$e,zt=1+$e,Ke=null,Tn=null,rn=null,Gn=null,Qt=pt(le,ze,Y-$e,Y+yr,0,wt.minX,wt.maxX,oe),mt=pt(le,ze,Y+Xt,Y+zt,0,wt.minX,wt.maxX,oe);le=null,Qt&&(Ke=pt(Qt,ze,J-$e,J+yr,1,wt.minY,wt.maxY,oe),Tn=pt(Qt,ze,J+Xt,J+zt,1,wt.minY,wt.maxY,oe),Qt=null),mt&&(rn=pt(mt,ze,J-$e,J+yr,1,wt.minY,wt.maxY,oe),Gn=pt(mt,ze,J+Xt,J+zt,1,wt.minY,wt.maxY,oe),mt=null),Ue>1&&console.timeEnd("clipping"),Ie.push(Ke||[],ue+1,2*Y,2*J),Ie.push(Tn||[],ue+1,2*Y,2*J+1),Ie.push(rn||[],ue+1,2*Y+1,2*J),Ie.push(Gn||[],ue+1,2*Y+1,2*J+1)}}getTile(le,ue,Y){le=+le,ue=+ue,Y=+Y;let J=this.options,{extent:de,debug:ne}=J;if(le<0||le>24)return null;let je=1<<le,Ie=jt(le,ue=ue+je&je-1,Y);if(this.tiles[Ie])return Tr(this.tiles[Ie],de);ne>1&&console.log("drilling down to z%d-%d-%d",le,ue,Y);let oe,Ue=le,ze=ue,it=Y;for(;!oe&&Ue>0;)Ue--,ze>>=1,it>>=1,oe=this.tiles[jt(Ue,ze,it)];return oe&&oe.source?(ne>1&&(console.log("found parent tile z%d-%d-%d",Ue,ze,it),console.time("drilling down")),this.splitTile(oe.source,Ue,ze,it,le,ue,Y),ne>1&&console.timeEnd("drilling down"),this.tiles[Ie]?Tr(this.tiles[Ie],de):null):null}}function jt(Ye,le,ue){return 32*((1<<Ye)*ue+le)+Ye}function $t(Ye,le){return le?Ye.properties[le]:Ye.id}function an(Ye,le){if(Ye==null)return!0;if(Ye.type==="Feature")return $t(Ye,le)!=null;if(Ye.type==="FeatureCollection"){let ue=new Set;for(let Y of Ye.features){let J=$t(Y,le);if(J==null||ue.has(J))return!1;ue.add(J)}return!0}return!1}function gn(Ye,le){let ue=new Map;if(Ye!=null)if(Ye.type==="Feature")ue.set($t(Ye,le),Ye);else for(let Y of Ye.features)ue.set($t(Y,le),Y);return ue}class Rn extends h{constructor(){super(...arguments),this._dataUpdateable=new Map}loadVectorTile(le,ue){return o._(this,void 0,void 0,function*(){let Y=le.tileID.canonical;if(!this._geoJSONIndex)throw new Error("Unable to parse the data into a cluster or geojson");let J=this._geoJSONIndex.getTile(Y.z,Y.x,Y.y);if(!J)return null;let de=new R(J.features),ne=ie(de);return ne.byteOffset===0&&ne.byteLength===ne.buffer.byteLength||(ne=new Uint8Array(ne)),{vectorTile:de,rawData:ne.buffer}})}loadData(le){return o._(this,void 0,void 0,function*(){var ue;(ue=this._pendingRequest)===null||ue===void 0||ue.abort();let Y=!!(le&&le.request&&le.request.collectResourceTiming)&&new o.cE(le.request);this._pendingRequest=new AbortController;try{this._pendingData=this.loadAndProcessGeoJSON(le,this._pendingRequest),this._geoJSONIndex=le.cluster?new Re(function({superclusterOptions:ne,clusterProperties:je}){if(!je||!ne)return ne;let Ie={},oe={},Ue={accumulated:null,zoom:0},ze={properties:null},it=Object.keys(je);for(let wt of it){let[$e,Xt]=je[wt],yr=o.cL(Xt),zt=o.cL(typeof $e=="string"?[$e,["accumulated"],["get",wt]]:$e);Ie[wt]=yr.value,oe[wt]=zt.value}return ne.map=wt=>{ze.properties=wt;let $e={};for(let Xt of it)$e[Xt]=Ie[Xt].evaluate(Ue,ze);return $e},ne.reduce=(wt,$e)=>{ze.properties=$e;for(let Xt of it)Ue.accumulated=wt[Xt],wt[Xt]=oe[Xt].evaluate(Ue,ze)},ne}(le)).load((yield this._pendingData).features):(J=yield this._pendingData,new Bt(J,le.geojsonVtOptions)),this.loaded={};let de={};if(Y){let ne=Y.finish();ne&&(de.resourceTiming={},de.resourceTiming[le.source]=JSON.parse(JSON.stringify(ne)))}return de}catch(de){if(delete this._pendingRequest,o.cp(de))return{abandoned:!0};throw de}var J})}getData(){return o._(this,void 0,void 0,function*(){return this._pendingData})}reloadTile(le){let ue=this.loaded;return ue&&ue[le.uid]?super.reloadTile(le):this.loadTile(le)}loadAndProcessGeoJSON(le,ue){return o._(this,void 0,void 0,function*(){let Y=yield this.loadGeoJSON(le,ue);if(delete this._pendingRequest,typeof Y!="object")throw new Error(`Input data given to '${le.source}' is not a valid GeoJSON object.`);if(O(Y,!0),le.filter){let J=o.cL(le.filter,{type:"boolean","property-type":"data-driven",overridable:!1,transition:!1});if(J.result==="error")throw new Error(J.value.map(ne=>`${ne.key}: ${ne.message}`).join(", "));Y={type:"FeatureCollection",features:Y.features.filter(ne=>J.value.evaluate({zoom:0},ne))}}return Y})}loadGeoJSON(le,ue){return o._(this,void 0,void 0,function*(){let{promoteId:Y}=le;if(le.request){let J=yield o.j(le.request,ue);return this._dataUpdateable=an(J.data,Y)?gn(J.data,Y):void 0,J.data}if(typeof le.data=="string")try{let J=JSON.parse(le.data);return this._dataUpdateable=an(J,Y)?gn(J,Y):void 0,J}catch(J){throw new Error(`Input data given to '${le.source}' is not a valid GeoJSON object.`)}if(!le.dataDiff)throw new Error(`Input data given to '${le.source}' is not a valid GeoJSON object.`);if(!this._dataUpdateable)throw new Error(`Cannot update existing geojson data in ${le.source}`);return function(J,de,ne){var je,Ie,oe,Ue;if(de.removeAll&&J.clear(),de.remove)for(let ze of de.remove)J.delete(ze);if(de.add)for(let ze of de.add){let it=$t(ze,ne);it!=null&&J.set(it,ze)}if(de.update)for(let ze of de.update){let it=J.get(ze.id);if(it==null)continue;let wt=!ze.removeAllProperties&&(((je=ze.removeProperties)===null||je===void 0?void 0:je.length)>0||((Ie=ze.addOrUpdateProperties)===null||Ie===void 0?void 0:Ie.length)>0);if((ze.newGeometry||ze.removeAllProperties||wt)&&(it=Object.assign({},it),J.set(ze.id,it),wt&&(it.properties=Object.assign({},it.properties))),ze.newGeometry&&(it.geometry=ze.newGeometry),ze.removeAllProperties)it.properties={};else if(((oe=ze.removeProperties)===null||oe===void 0?void 0:oe.length)>0)for(let $e of ze.removeProperties)Object.prototype.hasOwnProperty.call(it.properties,$e)&&delete it.properties[$e];if(((Ue=ze.addOrUpdateProperties)===null||Ue===void 0?void 0:Ue.length)>0)for(let{key:$e,value:Xt}of ze.addOrUpdateProperties)it.properties[$e]=Xt}}(this._dataUpdateable,le.dataDiff,Y),{type:"FeatureCollection",features:Array.from(this._dataUpdateable.values())}})}removeSource(le){return o._(this,void 0,void 0,function*(){this._pendingRequest&&this._pendingRequest.abort()})}getClusterExpansionZoom(le){return this._geoJSONIndex.getClusterExpansionZoom(le.clusterId)}getClusterChildren(le){return this._geoJSONIndex.getChildren(le.clusterId)}getClusterLeaves(le){return this._geoJSONIndex.getLeaves(le.clusterId,le.limit,le.offset)}}class wa{constructor(le){this.self=le,this.actor=new o.H(le),this.layerIndexes={},this.availableImages={},this.workerSources={},this.demWorkerSources={},this.externalWorkerSourceTypes={},this.self.registerWorkerSource=(ue,Y)=>{if(this.externalWorkerSourceTypes[ue])throw new Error(`Worker source with name "${ue}" already registered.`);this.externalWorkerSourceTypes[ue]=Y},this.self.addProtocol=o.cr,this.self.removeProtocol=o.cs,this.self.registerRTLTextPlugin=ue=>{o.cM.setMethods(ue)},this.actor.registerMessageHandler("LDT",(ue,Y)=>this._getDEMWorkerSource(ue,Y.source).loadTile(Y)),this.actor.registerMessageHandler("RDT",(ue,Y)=>o._(this,void 0,void 0,function*(){this._getDEMWorkerSource(ue,Y.source).removeTile(Y)})),this.actor.registerMessageHandler("GCEZ",(ue,Y)=>o._(this,void 0,void 0,function*(){return this._getWorkerSource(ue,Y.type,Y.source).getClusterExpansionZoom(Y)})),this.actor.registerMessageHandler("GCC",(ue,Y)=>o._(this,void 0,void 0,function*(){return this._getWorkerSource(ue,Y.type,Y.source).getClusterChildren(Y)})),this.actor.registerMessageHandler("GCL",(ue,Y)=>o._(this,void 0,void 0,function*(){return this._getWorkerSource(ue,Y.type,Y.source).getClusterLeaves(Y)})),this.actor.registerMessageHandler("LD",(ue,Y)=>this._getWorkerSource(ue,Y.type,Y.source).loadData(Y)),this.actor.registerMessageHandler("GD",(ue,Y)=>this._getWorkerSource(ue,Y.type,Y.source).getData()),this.actor.registerMessageHandler("LT",(ue,Y)=>this._getWorkerSource(ue,Y.type,Y.source).loadTile(Y)),this.actor.registerMessageHandler("RT",(ue,Y)=>this._getWorkerSource(ue,Y.type,Y.source).reloadTile(Y)),this.actor.registerMessageHandler("AT",(ue,Y)=>this._getWorkerSource(ue,Y.type,Y.source).abortTile(Y)),this.actor.registerMessageHandler("RMT",(ue,Y)=>this._getWorkerSource(ue,Y.type,Y.source).removeTile(Y)),this.actor.registerMessageHandler("RS",(ue,Y)=>o._(this,void 0,void 0,function*(){if(!this.workerSources[ue]||!this.workerSources[ue][Y.type]||!this.workerSources[ue][Y.type][Y.source])return;let J=this.workerSources[ue][Y.type][Y.source];delete this.workerSources[ue][Y.type][Y.source],J.removeSource!==void 0&&J.removeSource(Y)})),this.actor.registerMessageHandler("RM",ue=>o._(this,void 0,void 0,function*(){delete this.layerIndexes[ue],delete this.availableImages[ue],delete this.workerSources[ue],delete this.demWorkerSources[ue]})),this.actor.registerMessageHandler("SR",(ue,Y)=>o._(this,void 0,void 0,function*(){this.referrer=Y})),this.actor.registerMessageHandler("SRPS",(ue,Y)=>this._syncRTLPluginState(ue,Y)),this.actor.registerMessageHandler("IS",(ue,Y)=>o._(this,void 0,void 0,function*(){this.self.importScripts(Y)})),this.actor.registerMessageHandler("SI",(ue,Y)=>this._setImages(ue,Y)),this.actor.registerMessageHandler("UL",(ue,Y)=>o._(this,void 0,void 0,function*(){this._getLayerIndex(ue).update(Y.layers,Y.removedIds)})),this.actor.registerMessageHandler("SL",(ue,Y)=>o._(this,void 0,void 0,function*(){this._getLayerIndex(ue).replace(Y)}))}_setImages(le,ue){return o._(this,void 0,void 0,function*(){this.availableImages[le]=ue;for(let Y in this.workerSources[le]){let J=this.workerSources[le][Y];for(let de in J)J[de].availableImages=ue}})}_syncRTLPluginState(le,ue){return o._(this,void 0,void 0,function*(){return yield o.cM.syncState(ue,this.self.importScripts)})}_getAvailableImages(le){let ue=this.availableImages[le];return ue||(ue=[]),ue}_getLayerIndex(le){let ue=this.layerIndexes[le];return ue||(ue=this.layerIndexes[le]=new i),ue}_getWorkerSource(le,ue,Y){if(this.workerSources[le]||(this.workerSources[le]={}),this.workerSources[le][ue]||(this.workerSources[le][ue]={}),!this.workerSources[le][ue][Y]){let J={sendAsync:(de,ne)=>(de.targetMapId=le,this.actor.sendAsync(de,ne))};switch(ue){case"vector":this.workerSources[le][ue][Y]=new h(J,this._getLayerIndex(le),this._getAvailableImages(le));break;case"geojson":this.workerSources[le][ue][Y]=new Rn(J,this._getLayerIndex(le),this._getAvailableImages(le));break;default:this.workerSources[le][ue][Y]=new this.externalWorkerSourceTypes[ue](J,this._getLayerIndex(le),this._getAvailableImages(le))}}return this.workerSources[le][ue][Y]}_getDEMWorkerSource(le,ue){return this.demWorkerSources[le]||(this.demWorkerSources[le]={}),this.demWorkerSources[le][ue]||(this.demWorkerSources[le][ue]=new v),this.demWorkerSources[le][ue]}}return o.i(self)&&(self.worker=new wa(self)),wa}),r("index",["exports","./shared"],function(o,i){"use strict";var a="5.5.0";function u(){var w=new i.A(4);return i.A!=Float32Array&&(w[1]=0,w[2]=0),w[0]=1,w[3]=1,w}let d,h,v={now:typeof performance!="undefined"&&performance&&performance.now?performance.now.bind(performance):Date.now.bind(Date),frame(w,s,c){let g=requestAnimationFrame(E=>{y(),s(E)}),{unsubscribe:y}=i.s(w.signal,"abort",()=>{y(),cancelAnimationFrame(g),c(i.c())},!1)},frameAsync(w){return new Promise((s,c)=>{this.frame(w,s,c)})},getImageData(w,s=0){return this.getImageCanvasContext(w).getImageData(-s,-s,w.width+2*s,w.height+2*s)},getImageCanvasContext(w){let s=window.document.createElement("canvas"),c=s.getContext("2d",{willReadFrequently:!0});if(!c)throw new Error("failed to create canvas 2d context");return s.width=w.width,s.height=w.height,c.drawImage(w,0,0,w.width,w.height),c},resolveURL:w=>(d||(d=document.createElement("a")),d.href=w,d.href),hardwareConcurrency:typeof navigator!="undefined"&&navigator.hardwareConcurrency||4,get prefersReducedMotion(){return!!matchMedia&&(h==null&&(h=matchMedia("(prefers-reduced-motion: reduce)")),h.matches)}};class b{static testProp(s){if(!b.docStyle)return s[0];for(let c=0;c<s.length;c++)if(s[c]in b.docStyle)return s[c];return s[0]}static create(s,c,g){let y=window.document.createElement(s);return c!==void 0&&(y.className=c),g&&g.appendChild(y),y}static createNS(s,c){return window.document.createElementNS(s,c)}static disableDrag(){b.docStyle&&b.selectProp&&(b.userSelect=b.docStyle[b.selectProp],b.docStyle[b.selectProp]="none")}static enableDrag(){b.docStyle&&b.selectProp&&(b.docStyle[b.selectProp]=b.userSelect)}static setTransform(s,c){s.style[b.transformProp]=c}static addEventListener(s,c,g,y={}){s.addEventListener(c,g,"passive"in y?y:y.capture)}static removeEventListener(s,c,g,y={}){s.removeEventListener(c,g,"passive"in y?y:y.capture)}static suppressClickInternal(s){s.preventDefault(),s.stopPropagation(),window.removeEventListener("click",b.suppressClickInternal,!0)}static suppressClick(){window.addEventListener("click",b.suppressClickInternal,!0),window.setTimeout(()=>{window.removeEventListener("click",b.suppressClickInternal,!0)},0)}static getScale(s){let c=s.getBoundingClientRect();return{x:c.width/s.offsetWidth||1,y:c.height/s.offsetHeight||1,boundingClientRect:c}}static getPoint(s,c,g){let y=c.boundingClientRect;return new i.P((g.clientX-y.left)/c.x-s.clientLeft,(g.clientY-y.top)/c.y-s.clientTop)}static mousePos(s,c){let g=b.getScale(s);return b.getPoint(s,g,c)}static touchPos(s,c){let g=[],y=b.getScale(s);for(let E=0;E<c.length;E++)g.push(b.getPoint(s,y,c[E]));return g}static mouseButton(s){return s.button}static remove(s){s.parentNode&&s.parentNode.removeChild(s)}static sanitize(s){let c=new DOMParser().parseFromString(s,"text/html").body||document.createElement("body"),g=c.querySelectorAll("script");for(let y of g)y.remove();return b.clean(c),c.innerHTML}static isPossiblyDangerous(s,c){let g=c.replace(/\s+/g,"").toLowerCase();return!(!["src","href","xlink:href"].includes(s)||!g.includes("javascript:")&&!g.includes("data:"))||!!s.startsWith("on")||void 0}static clean(s){let c=s.children;for(let g of c)b.removeAttributes(g),b.clean(g)}static removeAttributes(s){for(let{name:c,value:g}of s.attributes)b.isPossiblyDangerous(c,g)&&s.removeAttribute(c)}}b.docStyle=typeof window!="undefined"&&window.document&&window.document.documentElement.style,b.selectProp=b.testProp(["userSelect","MozUserSelect","WebkitUserSelect","msUserSelect"]),b.transformProp=b.testProp(["transform","WebkitTransform"]);let x={supported:!1,testSupport:function(w){!D&&O&&(k?R(w):M=w)}},M,O,D=!1,k=!1;function R(w){let s=w.createTexture();w.bindTexture(w.TEXTURE_2D,s);try{if(w.texImage2D(w.TEXTURE_2D,0,w.RGBA,w.RGBA,w.UNSIGNED_BYTE,O),w.isContextLost())return;x.supported=!0}catch(c){}w.deleteTexture(s),D=!0}var q;typeof document!="undefined"&&(O=document.createElement("img"),O.onload=()=>{M&&R(M),M=null,k=!0},O.onerror=()=>{D=!0,M=null},O.src="data:image/webp;base64,UklGRh4AAABXRUJQVlA4TBEAAAAvAQAAAAfQ//73v/+BiOh/AAA="),function(w){let s,c,g,y;w.resetRequestQueue=()=>{s=[],c=0,g=0,y={}},w.addThrottleControl=L=>{let z=g++;return y[z]=L,z},w.removeThrottleControl=L=>{delete y[L],I()},w.getImage=(L,z,U=!0)=>new Promise((W,H)=>{x.supported&&(L.headers||(L.headers={}),L.headers.accept="image/webp,*/*"),i.e(L,{type:"image"}),s.push({abortController:z,requestParameters:L,supportImageRefresh:U,state:"queued",onError:te=>{H(te)},onSuccess:te=>{W(te)}}),I()});let E=L=>i._(this,void 0,void 0,function*(){L.state="running";let{requestParameters:z,supportImageRefresh:U,onError:W,onSuccess:H,abortController:te}=L,ae=U===!1&&!i.i(self)&&!i.g(z.url)&&(!z.headers||Object.keys(z.headers).reduce((xe,Ae)=>xe&&Ae==="accept",!0));c++;let be=ae?P(z,te):i.m(z,te);try{let xe=yield be;delete L.abortController,L.state="completed",xe.data instanceof HTMLImageElement||i.b(xe.data)?H(xe):xe.data&&H({data:yield(_e=xe.data,typeof createImageBitmap=="function"?i.f(_e):i.h(_e)),cacheControl:xe.cacheControl,expires:xe.expires})}catch(xe){delete L.abortController,W(xe)}finally{c--,I()}var _e}),I=()=>{let L=(()=>{for(let z of Object.keys(y))if(y[z]())return!0;return!1})()?i.a.MAX_PARALLEL_IMAGE_REQUESTS_PER_FRAME:i.a.MAX_PARALLEL_IMAGE_REQUESTS;for(let z=c;z<L&&s.length>0;z++){let U=s.shift();U.abortController.signal.aborted?z--:E(U)}},P=(L,z)=>new Promise((U,W)=>{let H=new Image,te=L.url,ae=L.credentials;ae&&ae==="include"?H.crossOrigin="use-credentials":(ae&&ae==="same-origin"||!i.d(te))&&(H.crossOrigin="anonymous"),z.signal.addEventListener("abort",()=>{H.src="",W(i.c())}),H.fetchPriority="high",H.onload=()=>{H.onerror=H.onload=null,U({data:H})},H.onerror=()=>{H.onerror=H.onload=null,z.signal.aborted||W(new Error("Could not load image. Please make sure to use a supported image type such as PNG or JPEG. Note that SVGs are not supported."))},H.src=te})}(q||(q={})),q.resetRequestQueue();class B{constructor(s){this._transformRequestFn=s}transformRequest(s,c){return this._transformRequestFn&&this._transformRequestFn(s,c)||{url:s}}setTransformRequest(s){this._transformRequestFn=s}}function G(w){let s=[];if(typeof w=="string")s.push({id:"default",url:w});else if(w&&w.length>0){let c=[];for(let{id:g,url:y}of w){let E=`${g}${y}`;c.indexOf(E)===-1&&(c.push(E),s.push({id:g,url:y}))}}return s}function re(w,s,c){try{let g=new URL(w);return g.pathname+=`${s}${c}`,g.toString()}catch(g){throw new Error(`Invalid sprite URL "${w}", must be absolute. Modify style specification directly or use TransformStyleFunction to correct the issue dynamically`)}}class Q{constructor(s,c,g,y){this.context=s,this.format=g,this.texture=s.gl.createTexture(),this.update(c,y)}update(s,c,g){let{width:y,height:E}=s,I=!(this.size&&this.size[0]===y&&this.size[1]===E||g),{context:P}=this,{gl:L}=P;if(this.useMipmap=!!(c&&c.useMipmap),L.bindTexture(L.TEXTURE_2D,this.texture),P.pixelStoreUnpackFlipY.set(!1),P.pixelStoreUnpack.set(1),P.pixelStoreUnpackPremultiplyAlpha.set(this.format===L.RGBA&&(!c||c.premultiply!==!1)),I)this.size=[y,E],s instanceof HTMLImageElement||s instanceof HTMLCanvasElement||s instanceof HTMLVideoElement||s instanceof ImageData||i.b(s)?L.texImage2D(L.TEXTURE_2D,0,this.format,this.format,L.UNSIGNED_BYTE,s):L.texImage2D(L.TEXTURE_2D,0,this.format,y,E,0,this.format,L.UNSIGNED_BYTE,s.data);else{let{x:z,y:U}=g||{x:0,y:0};s instanceof HTMLImageElement||s instanceof HTMLCanvasElement||s instanceof HTMLVideoElement||s instanceof ImageData||i.b(s)?L.texSubImage2D(L.TEXTURE_2D,0,z,U,L.RGBA,L.UNSIGNED_BYTE,s):L.texSubImage2D(L.TEXTURE_2D,0,z,U,y,E,L.RGBA,L.UNSIGNED_BYTE,s.data)}this.useMipmap&&this.isSizePowerOfTwo()&&L.generateMipmap(L.TEXTURE_2D),P.pixelStoreUnpackFlipY.setDefault(),P.pixelStoreUnpack.setDefault(),P.pixelStoreUnpackPremultiplyAlpha.setDefault()}bind(s,c,g){let{context:y}=this,{gl:E}=y;E.bindTexture(E.TEXTURE_2D,this.texture),g!==E.LINEAR_MIPMAP_NEAREST||this.isSizePowerOfTwo()||(g=E.LINEAR),s!==this.filter&&(E.texParameteri(E.TEXTURE_2D,E.TEXTURE_MAG_FILTER,s),E.texParameteri(E.TEXTURE_2D,E.TEXTURE_MIN_FILTER,g||s),this.filter=s),c!==this.wrap&&(E.texParameteri(E.TEXTURE_2D,E.TEXTURE_WRAP_S,c),E.texParameteri(E.TEXTURE_2D,E.TEXTURE_WRAP_T,c),this.wrap=c)}isSizePowerOfTwo(){return this.size[0]===this.size[1]&&Math.log(this.size[0])/Math.LN2%1==0}destroy(){let{gl:s}=this.context;s.deleteTexture(this.texture),this.texture=null}}function ie(w){let{userImage:s}=w;return!!(s&&s.render&&s.render())&&(w.data.replace(new Uint8Array(s.data.buffer)),!0)}class me extends i.E{constructor(){super(),this.images={},this.updatedImages={},this.callbackDispatchedThisFrame={},this.loaded=!1,this.requestors=[],this.patterns={},this.atlasImage=new i.R({width:1,height:1}),this.dirty=!0}isLoaded(){return this.loaded}setLoaded(s){if(this.loaded!==s&&(this.loaded=s,s)){for(let{ids:c,promiseResolve:g}of this.requestors)g(this._getImagesForIds(c));this.requestors=[]}}getImage(s){let c=this.images[s];if(c&&!c.data&&c.spriteData){let g=c.spriteData;c.data=new i.R({width:g.width,height:g.height},g.context.getImageData(g.x,g.y,g.width,g.height).data),c.spriteData=null}return c}addImage(s,c){if(this.images[s])throw new Error(`Image id ${s} already exist, use updateImage instead`);this._validate(s,c)&&(this.images[s]=c)}_validate(s,c){let g=!0,y=c.data||c.spriteData;return this._validateStretch(c.stretchX,y&&y.width)||(this.fire(new i.k(new Error(`Image "${s}" has invalid "stretchX" value`))),g=!1),this._validateStretch(c.stretchY,y&&y.height)||(this.fire(new i.k(new Error(`Image "${s}" has invalid "stretchY" value`))),g=!1),this._validateContent(c.content,c)||(this.fire(new i.k(new Error(`Image "${s}" has invalid "content" value`))),g=!1),g}_validateStretch(s,c){if(!s)return!0;let g=0;for(let y of s){if(y[0]<g||y[1]<y[0]||c<y[1])return!1;g=y[1]}return!0}_validateContent(s,c){if(!s)return!0;if(s.length!==4)return!1;let g=c.spriteData,y=g&&g.width||c.data.width,E=g&&g.height||c.data.height;return!(s[0]<0||y<s[0]||s[1]<0||E<s[1]||s[2]<0||y<s[2]||s[3]<0||E<s[3]||s[2]<s[0]||s[3]<s[1])}updateImage(s,c,g=!0){let y=this.getImage(s);if(g&&(y.data.width!==c.data.width||y.data.height!==c.data.height))throw new Error(`size mismatch between old image (${y.data.width}x${y.data.height}) and new image (${c.data.width}x${c.data.height}).`);c.version=y.version+1,this.images[s]=c,this.updatedImages[s]=!0}removeImage(s){let c=this.images[s];delete this.images[s],delete this.patterns[s],c.userImage&&c.userImage.onRemove&&c.userImage.onRemove()}listImages(){return Object.keys(this.images)}getImages(s){return new Promise((c,g)=>{let y=!0;if(!this.isLoaded())for(let E of s)this.images[E]||(y=!1);this.isLoaded()||y?c(this._getImagesForIds(s)):this.requestors.push({ids:s,promiseResolve:c})})}_getImagesForIds(s){let c={};for(let g of s){let y=this.getImage(g);y||(this.fire(new i.l("styleimagemissing",{id:g})),y=this.getImage(g)),y?c[g]={data:y.data.clone(),pixelRatio:y.pixelRatio,sdf:y.sdf,version:y.version,stretchX:y.stretchX,stretchY:y.stretchY,content:y.content,textFitWidth:y.textFitWidth,textFitHeight:y.textFitHeight,hasRenderCallback:!!(y.userImage&&y.userImage.render)}:i.w(`Image "${g}" could not be loaded. Please make sure you have added the image with map.addImage() or a "sprite" property in your style. You can provide missing images by listening for the "styleimagemissing" map event.`)}return c}getPixelSize(){let{width:s,height:c}=this.atlasImage;return{width:s,height:c}}getPattern(s){let c=this.patterns[s],g=this.getImage(s);if(!g)return null;if(c&&c.position.version===g.version)return c.position;if(c)c.position.version=g.version;else{let y={w:g.data.width+2,h:g.data.height+2,x:0,y:0},E=new i.I(y,g);this.patterns[s]={bin:y,position:E}}return this._updatePatternAtlas(),this.patterns[s].position}bind(s){let c=s.gl;this.atlasTexture?this.dirty&&(this.atlasTexture.update(this.atlasImage),this.dirty=!1):this.atlasTexture=new Q(s,this.atlasImage,c.RGBA),this.atlasTexture.bind(c.LINEAR,c.CLAMP_TO_EDGE)}_updatePatternAtlas(){let s=[];for(let E in this.patterns)s.push(this.patterns[E].bin);let{w:c,h:g}=i.p(s),y=this.atlasImage;y.resize({width:c||1,height:g||1});for(let E in this.patterns){let{bin:I}=this.patterns[E],P=I.x+1,L=I.y+1,z=this.getImage(E).data,U=z.width,W=z.height;i.R.copy(z,y,{x:0,y:0},{x:P,y:L},{width:U,height:W}),i.R.copy(z,y,{x:0,y:W-1},{x:P,y:L-1},{width:U,height:1}),i.R.copy(z,y,{x:0,y:0},{x:P,y:L+W},{width:U,height:1}),i.R.copy(z,y,{x:U-1,y:0},{x:P-1,y:L},{width:1,height:W}),i.R.copy(z,y,{x:0,y:0},{x:P+U,y:L},{width:1,height:W})}this.dirty=!0}beginFrame(){this.callbackDispatchedThisFrame={}}dispatchRenderCallbacks(s){for(let c of s){if(this.callbackDispatchedThisFrame[c])continue;this.callbackDispatchedThisFrame[c]=!0;let g=this.getImage(c);g||i.w(`Image with ID: "${c}" was not found`),ie(g)&&this.updateImage(c,g)}}}let ve=1e20;function ye(w,s,c,g,y,E,I,P,L){for(let z=s;z<s+g;z++)we(w,c*E+z,E,y,I,P,L);for(let z=c;z<c+y;z++)we(w,z*E+s,1,g,I,P,L)}function we(w,s,c,g,y,E,I){E[0]=0,I[0]=-1e20,I[1]=ve,y[0]=w[s];for(let P=1,L=0,z=0;P<g;P++){y[P]=w[s+P*c];let U=P*P;do{let W=E[L];z=(y[P]-y[W]+U-W*W)/(P-W)/2}while(z<=I[L]&&--L>-1);L++,E[L]=P,I[L]=z,I[L+1]=ve}for(let P=0,L=0;P<g;P++){for(;I[L+1]<P;)L++;let z=E[L],U=P-z;w[s+P*c]=y[z]+U*U}}class Se{constructor(s,c){this.requestManager=s,this.localIdeographFontFamily=c,this.entries={}}setURL(s){this.url=s}getGlyphs(s){return i._(this,void 0,void 0,function*(){let c=[];for(let E in s)for(let I of s[E])c.push(this._getAndCacheGlyphsPromise(E,I));let g=yield Promise.all(c),y={};for(let{stack:E,id:I,glyph:P}of g)y[E]||(y[E]={}),y[E][I]=P&&{id:P.id,bitmap:P.bitmap.clone(),metrics:P.metrics};return y})}_getAndCacheGlyphsPromise(s,c){return i._(this,void 0,void 0,function*(){let g=this.entries[s];g||(g=this.entries[s]={glyphs:{},requests:{},ranges:{}});let y=g.glyphs[c];if(y!==void 0)return{stack:s,id:c,glyph:y};if(y=this._tinySDF(g,s,c),y)return g.glyphs[c]=y,{stack:s,id:c,glyph:y};let E=Math.floor(c/256);if(256*E>65535)throw new Error("glyphs > 65535 not supported");if(g.ranges[E])return{stack:s,id:c,glyph:y};if(!this.url)throw new Error("glyphsUrl is not set");if(!g.requests[E]){let P=Se.loadGlyphRange(s,E,this.url,this.requestManager);g.requests[E]=P}let I=yield g.requests[E];for(let P in I)this._doesCharSupportLocalGlyph(+P)||(g.glyphs[+P]=I[+P]);return g.ranges[E]=!0,{stack:s,id:c,glyph:I[c]||null}})}_doesCharSupportLocalGlyph(s){return!!this.localIdeographFontFamily&&(new RegExp("\\p{Ideo}|\\p{sc=Hang}|\\p{sc=Hira}|\\p{sc=Kana}","u").test(String.fromCodePoint(s))||i.u["CJK Unified Ideographs"](s)||i.u["Hangul Syllables"](s)||i.u.Hiragana(s)||i.u.Katakana(s)||i.u["CJK Symbols and Punctuation"](s)||i.u["Halfwidth and Fullwidth Forms"](s))}_tinySDF(s,c,g){let y=this.localIdeographFontFamily;if(!y||!this._doesCharSupportLocalGlyph(g))return;let E=s.tinySDF;if(!E){let P="400";/bold/i.test(c)?P="900":/medium/i.test(c)?P="500":/light/i.test(c)&&(P="200"),E=s.tinySDF=new Se.TinySDF({fontSize:48,buffer:6,radius:16,cutoff:.25,fontFamily:y,fontWeight:P})}let I=E.draw(String.fromCharCode(g));return{id:g,bitmap:new i.q({width:I.width||60,height:I.height||60},I.data),metrics:{width:I.glyphWidth/2||24,height:I.glyphHeight/2||24,left:I.glyphLeft/2+.5||0,top:I.glyphTop/2-27.5||-8,advance:I.glyphAdvance/2||24,isDoubleResolution:!0}}}}Se.loadGlyphRange=function(w,s,c,g){return i._(this,void 0,void 0,function*(){let y=256*s,E=y+255,I=g.transformRequest(c.replace("{fontstack}",w).replace("{range}",`${y}-${E}`),"Glyphs"),P=yield i.n(I,new AbortController);if(!P||!P.data)throw new Error(`Could not load glyph range. range: ${s}, ${y}-${E}`);let L={};for(let z of i.o(P.data))L[z.id]=z;return L})},Se.TinySDF=class{constructor({fontSize:w=24,buffer:s=3,radius:c=8,cutoff:g=.25,fontFamily:y="sans-serif",fontWeight:E="normal",fontStyle:I="normal"}={}){this.buffer=s,this.cutoff=g,this.radius=c;let P=this.size=w+4*s,L=this._createCanvas(P),z=this.ctx=L.getContext("2d",{willReadFrequently:!0});z.font=`${I} ${E} ${w}px ${y}`,z.textBaseline="alphabetic",z.textAlign="left",z.fillStyle="black",this.gridOuter=new Float64Array(P*P),this.gridInner=new Float64Array(P*P),this.f=new Float64Array(P),this.z=new Float64Array(P+1),this.v=new Uint16Array(P)}_createCanvas(w){let s=document.createElement("canvas");return s.width=s.height=w,s}draw(w){let{width:s,actualBoundingBoxAscent:c,actualBoundingBoxDescent:g,actualBoundingBoxLeft:y,actualBoundingBoxRight:E}=this.ctx.measureText(w),I=Math.ceil(c),P=Math.max(0,Math.min(this.size-this.buffer,Math.ceil(E-y))),L=Math.min(this.size-this.buffer,I+Math.ceil(g)),z=P+2*this.buffer,U=L+2*this.buffer,W=Math.max(z*U,0),H=new Uint8ClampedArray(W),te={data:H,width:z,height:U,glyphWidth:P,glyphHeight:L,glyphTop:I,glyphLeft:0,glyphAdvance:s};if(P===0||L===0)return te;let{ctx:ae,buffer:be,gridInner:_e,gridOuter:xe}=this;ae.clearRect(be,be,P,L),ae.fillText(w,be,be+I);let Ae=ae.getImageData(be,be,P,L);xe.fill(ve,0,W),_e.fill(0,0,W);for(let ke=0;ke<L;ke++)for(let Le=0;Le<P;Le++){let Fe=Ae.data[4*(ke*P+Le)+3]/255;if(Fe===0)continue;let He=(ke+be)*z+Le+be;if(Fe===1)xe[He]=0,_e[He]=ve;else{let Be=.5-Fe;xe[He]=Be>0?Be*Be:0,_e[He]=Be<0?Be*Be:0}}ye(xe,0,0,z,U,z,this.f,this.v,this.z),ye(_e,be,be,P,L,z,this.f,this.v,this.z);for(let ke=0;ke<W;ke++){let Le=Math.sqrt(xe[ke])-Math.sqrt(_e[ke]);H[ke]=Math.round(255-255*(Le/this.radius+this.cutoff))}return te}};class ge{constructor(){this.specification=i.v.light.position}possiblyEvaluate(s,c){return i.z(s.expression.evaluate(c))}interpolate(s,c,g){return{x:i.B.number(s.x,c.x,g),y:i.B.number(s.y,c.y,g),z:i.B.number(s.z,c.z,g)}}}let Re;class Je extends i.E{constructor(s){super(),Re=Re||new i.r({anchor:new i.D(i.v.light.anchor),position:new ge,color:new i.D(i.v.light.color),intensity:new i.D(i.v.light.intensity)}),this._transitionable=new i.T(Re),this.setLight(s),this._transitioning=this._transitionable.untransitioned()}getLight(){return this._transitionable.serialize()}setLight(s,c={}){if(!this._validate(i.t,s,c))for(let g in s){let y=s[g];g.endsWith("-transition")?this._transitionable.setTransition(g.slice(0,-11),y):this._transitionable.setValue(g,y)}}updateTransitions(s){this._transitioning=this._transitionable.transitioned(s,this._transitioning)}hasTransition(){return this._transitioning.hasTransition()}recalculate(s){this.properties=this._transitioning.possiblyEvaluate(s)}_validate(s,c,g){return(!g||g.validate!==!1)&&i.x(this,s.call(i.y,{value:c,style:{glyphs:!0,sprite:!0},styleSpec:i.v}))}}let tt=new i.r({"sky-color":new i.D(i.v.sky["sky-color"]),"horizon-color":new i.D(i.v.sky["horizon-color"]),"fog-color":new i.D(i.v.sky["fog-color"]),"fog-ground-blend":new i.D(i.v.sky["fog-ground-blend"]),"horizon-fog-blend":new i.D(i.v.sky["horizon-fog-blend"]),"sky-horizon-blend":new i.D(i.v.sky["sky-horizon-blend"]),"atmosphere-blend":new i.D(i.v.sky["atmosphere-blend"])});class Et extends i.E{constructor(s){super(),this._transitionable=new i.T(tt),this.setSky(s),this._transitioning=this._transitionable.untransitioned(),this.recalculate(new i.C(0))}setSky(s,c={}){if(!this._validate(i.F,s,c)){s||(s={"sky-color":"transparent","horizon-color":"transparent","fog-color":"transparent","fog-ground-blend":1,"atmosphere-blend":0});for(let g in s){let y=s[g];g.endsWith("-transition")?this._transitionable.setTransition(g.slice(0,-11),y):this._transitionable.setValue(g,y)}}}getSky(){return this._transitionable.serialize()}updateTransitions(s){this._transitioning=this._transitionable.transitioned(s,this._transitioning)}hasTransition(){return this._transitioning.hasTransition()}recalculate(s){this.properties=this._transitioning.possiblyEvaluate(s)}_validate(s,c,g={}){return(g==null?void 0:g.validate)!==!1&&i.x(this,s.call(i.y,i.e({value:c,style:{glyphs:!0,sprite:!0},styleSpec:i.v})))}calculateFogBlendOpacity(s){return s<60?0:s<70?(s-60)/10:1}}class Xe{constructor(s,c){this.width=s,this.height=c,this.nextRow=0,this.data=new Uint8Array(this.width*this.height),this.dashEntry={}}getDash(s,c){let g=s.join(",")+String(c);return this.dashEntry[g]||(this.dashEntry[g]=this.addDash(s,c)),this.dashEntry[g]}getDashRanges(s,c,g){let y=[],E=s.length%2==1?-s[s.length-1]*g:0,I=s[0]*g,P=!0;y.push({left:E,right:I,isDash:P,zeroLength:s[0]===0});let L=s[0];for(let z=1;z<s.length;z++){P=!P;let U=s[z];E=L*g,L+=U,I=L*g,y.push({left:E,right:I,isDash:P,zeroLength:U===0})}return y}addRoundDash(s,c,g){let y=c/2;for(let E=-g;E<=g;E++){let I=this.width*(this.nextRow+g+E),P=0,L=s[P];for(let z=0;z<this.width;z++){z/L.right>1&&(L=s[++P]);let U=Math.abs(z-L.left),W=Math.abs(z-L.right),H=Math.min(U,W),te,ae=E/g*(y+1);if(L.isDash){let be=y-Math.abs(ae);te=Math.sqrt(H*H+be*be)}else te=y-Math.sqrt(H*H+ae*ae);this.data[I+z]=Math.max(0,Math.min(255,te+128))}}}addRegularDash(s){for(let P=s.length-1;P>=0;--P){let L=s[P],z=s[P+1];L.zeroLength?s.splice(P,1):z&&z.isDash===L.isDash&&(z.left=L.left,s.splice(P,1))}let c=s[0],g=s[s.length-1];c.isDash===g.isDash&&(c.left=g.left-this.width,g.right=c.right+this.width);let y=this.width*this.nextRow,E=0,I=s[E];for(let P=0;P<this.width;P++){P/I.right>1&&(I=s[++E]);let L=Math.abs(P-I.left),z=Math.abs(P-I.right),U=Math.min(L,z);this.data[y+P]=Math.max(0,Math.min(255,(I.isDash?U:-U)+128))}}addDash(s,c){let g=c?7:0,y=2*g+1;if(this.nextRow+y>this.height)return i.w("LineAtlas out of space"),null;let E=0;for(let P=0;P<s.length;P++)E+=s[P];if(E!==0){let P=this.width/E,L=this.getDashRanges(s,this.width,P);c?this.addRoundDash(L,P,g):this.addRegularDash(L)}let I={y:(this.nextRow+g+.5)/this.height,height:2*g/this.height,width:E};return this.nextRow+=y,this.dirty=!0,I}bind(s){let c=s.gl;this.texture?(c.bindTexture(c.TEXTURE_2D,this.texture),this.dirty&&(this.dirty=!1,c.texSubImage2D(c.TEXTURE_2D,0,0,0,this.width,this.height,c.ALPHA,c.UNSIGNED_BYTE,this.data))):(this.texture=c.createTexture(),c.bindTexture(c.TEXTURE_2D,this.texture),c.texParameteri(c.TEXTURE_2D,c.TEXTURE_WRAP_S,c.REPEAT),c.texParameteri(c.TEXTURE_2D,c.TEXTURE_WRAP_T,c.REPEAT),c.texParameteri(c.TEXTURE_2D,c.TEXTURE_MIN_FILTER,c.LINEAR),c.texParameteri(c.TEXTURE_2D,c.TEXTURE_MAG_FILTER,c.LINEAR),c.texImage2D(c.TEXTURE_2D,0,c.ALPHA,this.width,this.height,0,c.ALPHA,c.UNSIGNED_BYTE,this.data))}}let Pt="maplibre_preloaded_worker_pool";class Lt{constructor(){this.active={}}acquire(s){if(!this.workers)for(this.workers=[];this.workers.length<Lt.workerCount;)this.workers.push(new Worker(i.a.WORKER_URL));return this.active[s]=!0,this.workers.slice()}release(s){delete this.active[s],this.numActive()===0&&(this.workers.forEach(c=>{c.terminate()}),this.workers=null)}isPreloaded(){return!!this.active[Pt]}numActive(){return Object.keys(this.active).length}}let Gt=Math.floor(v.hardwareConcurrency/2),nt,ct;function _t(){return nt||(nt=new Lt),nt}Lt.workerCount=i.G(globalThis)?Math.max(Math.min(Gt,3),1):1;class We{constructor(s,c){this.workerPool=s,this.actors=[],this.currentActor=0,this.id=c;let g=this.workerPool.acquire(c);for(let y=0;y<g.length;y++){let E=new i.H(g[y],c);E.name=`Worker ${y}`,this.actors.push(E)}if(!this.actors.length)throw new Error("No actors found")}broadcast(s,c){let g=[];for(let y of this.actors)g.push(y.sendAsync({type:s,data:c}));return Promise.all(g)}getActor(){return this.currentActor=(this.currentActor+1)%this.actors.length,this.actors[this.currentActor]}remove(s=!0){this.actors.forEach(c=>{c.remove()}),this.actors=[],s&&this.workerPool.release(this.id)}registerMessageHandler(s,c){for(let g of this.actors)g.registerMessageHandler(s,c)}}function De(){return ct||(ct=new We(_t(),i.J),ct.registerMessageHandler("GR",(w,s,c)=>i.m(s,c))),ct}function Qe(w,s){let c=i.K();return i.L(c,c,[1,1,0]),i.M(c,c,[.5*w.width,.5*w.height,1]),w.calculatePosMatrix?i.N(c,c,w.calculatePosMatrix(s.toUnwrapped())):c}function Ge(w,s,c,g,y,E,I){var P;let L=function(H,te,ae){if(H)for(let be of H){let _e=te[be];if(_e&&_e.source===ae&&_e.type==="fill-extrusion")return!0}else for(let be in te){let _e=te[be];if(_e.source===ae&&_e.type==="fill-extrusion")return!0}return!1}((P=y==null?void 0:y.layers)!==null&&P!==void 0?P:null,s,w.id),z=E.maxPitchScaleFactor(),U=w.tilesIn(g,z,L);U.sort(st);let W=[];for(let H of U)W.push({wrappedTileID:H.tileID.wrapped().key,queryResults:H.tile.queryRenderedFeatures(s,c,w._state,H.queryGeometry,H.cameraQueryGeometry,H.scale,y,E,z,Qe(w.transform,H.tileID),I?(te,ae)=>I(H.tileID,te,ae):void 0)});return function(H,te){for(let ae in H)for(let be of H[ae])pt(be,te);return H}(function(H){let te={},ae={};for(let be of H){let _e=be.queryResults,xe=be.wrappedTileID,Ae=ae[xe]=ae[xe]||{};for(let ke in _e){let Le=_e[ke],Fe=Ae[ke]=Ae[ke]||{},He=te[ke]=te[ke]||[];for(let Be of Le)Fe[Be.featureIndex]||(Fe[Be.featureIndex]=!0,He.push(Be))}}return te}(W),w)}function st(w,s){let c=w.tileID,g=s.tileID;return c.overscaledZ-g.overscaledZ||c.canonical.y-g.canonical.y||c.wrap-g.wrap||c.canonical.x-g.canonical.x}function pt(w,s){let c=w.feature,g=s.getFeatureState(c.layer["source-layer"],c.id);c.source=c.layer.source,c.layer["source-layer"]&&(c.sourceLayer=c.layer["source-layer"]),c.state=g}function Rt(w,s,c){return i._(this,void 0,void 0,function*(){let g=w;if(w.url?g=(yield i.j(s.transformRequest(w.url,"Source"),c)).data:yield v.frameAsync(c),!g)return null;let y=i.O(i.e(g,w),["tiles","minzoom","maxzoom","attribution","bounds","scheme","tileSize","encoding"]);return"vector_layers"in g&&g.vector_layers&&(y.vectorLayerIds=g.vector_layers.map(E=>E.id)),y})}class St{constructor(s,c){s&&(c?this.setSouthWest(s).setNorthEast(c):Array.isArray(s)&&(s.length===4?this.setSouthWest([s[0],s[1]]).setNorthEast([s[2],s[3]]):this.setSouthWest(s[0]).setNorthEast(s[1])))}setNorthEast(s){return this._ne=s instanceof i.Q?new i.Q(s.lng,s.lat):i.Q.convert(s),this}setSouthWest(s){return this._sw=s instanceof i.Q?new i.Q(s.lng,s.lat):i.Q.convert(s),this}extend(s){let c=this._sw,g=this._ne,y,E;if(s instanceof i.Q)y=s,E=s;else{if(!(s instanceof St))return Array.isArray(s)?s.length===4||s.every(Array.isArray)?this.extend(St.convert(s)):this.extend(i.Q.convert(s)):s&&("lng"in s||"lon"in s)&&"lat"in s?this.extend(i.Q.convert(s)):this;if(y=s._sw,E=s._ne,!y||!E)return this}return c||g?(c.lng=Math.min(y.lng,c.lng),c.lat=Math.min(y.lat,c.lat),g.lng=Math.max(E.lng,g.lng),g.lat=Math.max(E.lat,g.lat)):(this._sw=new i.Q(y.lng,y.lat),this._ne=new i.Q(E.lng,E.lat)),this}getCenter(){return new i.Q((this._sw.lng+this._ne.lng)/2,(this._sw.lat+this._ne.lat)/2)}getSouthWest(){return this._sw}getNorthEast(){return this._ne}getNorthWest(){return new i.Q(this.getWest(),this.getNorth())}getSouthEast(){return new i.Q(this.getEast(),this.getSouth())}getWest(){return this._sw.lng}getSouth(){return this._sw.lat}getEast(){return this._ne.lng}getNorth(){return this._ne.lat}toArray(){return[this._sw.toArray(),this._ne.toArray()]}toString(){return`LngLatBounds(${this._sw.toString()}, ${this._ne.toString()})`}isEmpty(){return!(this._sw&&this._ne)}contains(s){let{lng:c,lat:g}=i.Q.convert(s),y=this._sw.lng<=c&&c<=this._ne.lng;return this._sw.lng>this._ne.lng&&(y=this._sw.lng>=c&&c>=this._ne.lng),this._sw.lat<=g&&g<=this._ne.lat&&y}static convert(s){return s instanceof St?s:s&&new St(s)}static fromLngLat(s,c=0){let g=360*c/40075017,y=g/Math.cos(Math.PI/180*s.lat);return new St(new i.Q(s.lng-y,s.lat-g),new i.Q(s.lng+y,s.lat+g))}adjustAntiMeridian(){let s=new i.Q(this._sw.lng,this._sw.lat),c=new i.Q(this._ne.lng,this._ne.lat);return new St(s,s.lng>c.lng?new i.Q(c.lng+360,c.lat):c)}}class Ot{constructor(s,c,g){this.bounds=St.convert(this.validateBounds(s)),this.minzoom=c||0,this.maxzoom=g||24}validateBounds(s){return Array.isArray(s)&&s.length===4?[Math.max(-180,s[0]),Math.max(-90,s[1]),Math.min(180,s[2]),Math.min(90,s[3])]:[-180,-90,180,90]}contains(s){let c=Math.pow(2,s.z),g=Math.floor(i.U(this.bounds.getWest())*c),y=Math.floor(i.S(this.bounds.getNorth())*c),E=Math.ceil(i.U(this.bounds.getEast())*c),I=Math.ceil(i.S(this.bounds.getSouth())*c);return s.x>=g&&s.x<E&&s.y>=y&&s.y<I}}class sr extends i.E{constructor(s,c,g,y){if(super(),this.id=s,this.dispatcher=g,this.type="vector",this.minzoom=0,this.maxzoom=22,this.scheme="xyz",this.tileSize=512,this.reparseOverscaled=!0,this.isTileClipped=!0,this._loaded=!1,i.e(this,i.O(c,["url","scheme","tileSize","promoteId"])),this._options=i.e({type:"vector"},c),this._collectResourceTiming=c.collectResourceTiming,this.tileSize!==512)throw new Error("vector tile sources must have a tileSize of 512");this.setEventedParent(y)}load(){return i._(this,void 0,void 0,function*(){this._loaded=!1,this.fire(new i.l("dataloading",{dataType:"source"})),this._tileJSONRequest=new AbortController;try{let s=yield Rt(this._options,this.map._requestManager,this._tileJSONRequest);this._tileJSONRequest=null,this._loaded=!0,this.map.style.sourceCaches[this.id].clearTiles(),s&&(i.e(this,s),s.bounds&&(this.tileBounds=new Ot(s.bounds,this.minzoom,this.maxzoom)),this.fire(new i.l("data",{dataType:"source",sourceDataType:"metadata"})),this.fire(new i.l("data",{dataType:"source",sourceDataType:"content"})))}catch(s){this._tileJSONRequest=null,this.fire(new i.k(s))}})}loaded(){return this._loaded}hasTile(s){return!this.tileBounds||this.tileBounds.contains(s.canonical)}onAdd(s){this.map=s,this.load()}setSourceProperty(s){this._tileJSONRequest&&this._tileJSONRequest.abort(),s(),this.load()}setTiles(s){return this.setSourceProperty(()=>{this._options.tiles=s}),this}setUrl(s){return this.setSourceProperty(()=>{this.url=s,this._options.url=s}),this}onRemove(){this._tileJSONRequest&&(this._tileJSONRequest.abort(),this._tileJSONRequest=null)}serialize(){return i.e({},this._options)}loadTile(s){return i._(this,void 0,void 0,function*(){let c=s.tileID.canonical.url(this.tiles,this.map.getPixelRatio(),this.scheme),g={request:this.map._requestManager.transformRequest(c,"Tile"),uid:s.uid,tileID:s.tileID,zoom:s.tileID.overscaledZ,tileSize:this.tileSize*s.tileID.overscaleFactor(),type:this.type,source:this.id,pixelRatio:this.map.getPixelRatio(),showCollisionBoxes:this.map.showCollisionBoxes,promoteId:this.promoteId,subdivisionGranularity:this.map.style.projection.subdivisionGranularity};g.request.collectResourceTiming=this._collectResourceTiming;let y="RT";if(s.actor&&s.state!=="expired"){if(s.state==="loading")return new Promise((E,I)=>{s.reloadPromise={resolve:E,reject:I}})}else s.actor=this.dispatcher.getActor(),y="LT";s.abortController=new AbortController;try{let E=yield s.actor.sendAsync({type:y,data:g},s.abortController);if(delete s.abortController,s.aborted)return;this._afterTileLoadWorkerResponse(s,E)}catch(E){if(delete s.abortController,s.aborted)return;if(E&&E.status!==404)throw E;this._afterTileLoadWorkerResponse(s,null)}})}_afterTileLoadWorkerResponse(s,c){if(c&&c.resourceTiming&&(s.resourceTiming=c.resourceTiming),c&&this.map._refreshExpiredTiles&&s.setExpiryData(c),s.loadVectorData(c,this.map.painter),s.reloadPromise){let g=s.reloadPromise;s.reloadPromise=null,this.loadTile(s).then(g.resolve).catch(g.reject)}}abortTile(s){return i._(this,void 0,void 0,function*(){s.abortController&&(s.abortController.abort(),delete s.abortController),s.actor&&(yield s.actor.sendAsync({type:"AT",data:{uid:s.uid,type:this.type,source:this.id}}))})}unloadTile(s){return i._(this,void 0,void 0,function*(){s.unloadVectorData(),s.actor&&(yield s.actor.sendAsync({type:"RMT",data:{uid:s.uid,type:this.type,source:this.id}}))})}hasTransition(){return!1}}class Ft extends i.E{constructor(s,c,g,y){super(),this.id=s,this.dispatcher=g,this.setEventedParent(y),this.type="raster",this.minzoom=0,this.maxzoom=22,this.roundZoom=!0,this.scheme="xyz",this.tileSize=512,this._loaded=!1,this._options=i.e({type:"raster"},c),i.e(this,i.O(c,["url","scheme","tileSize"]))}load(){return i._(this,arguments,void 0,function*(s=!1){this._loaded=!1,this.fire(new i.l("dataloading",{dataType:"source"})),this._tileJSONRequest=new AbortController;try{let c=yield Rt(this._options,this.map._requestManager,this._tileJSONRequest);this._tileJSONRequest=null,this._loaded=!0,c&&(i.e(this,c),c.bounds&&(this.tileBounds=new Ot(c.bounds,this.minzoom,this.maxzoom)),this.fire(new i.l("data",{dataType:"source",sourceDataType:"metadata"})),this.fire(new i.l("data",{dataType:"source",sourceDataType:"content",sourceDataChanged:s})))}catch(c){this._tileJSONRequest=null,this.fire(new i.k(c))}})}loaded(){return this._loaded}onAdd(s){this.map=s,this.load()}onRemove(){this._tileJSONRequest&&(this._tileJSONRequest.abort(),this._tileJSONRequest=null)}setSourceProperty(s){this._tileJSONRequest&&(this._tileJSONRequest.abort(),this._tileJSONRequest=null),s(),this.load(!0)}setTiles(s){return this.setSourceProperty(()=>{this._options.tiles=s}),this}setUrl(s){return this.setSourceProperty(()=>{this.url=s,this._options.url=s}),this}serialize(){return i.e({},this._options)}hasTile(s){return!this.tileBounds||this.tileBounds.contains(s.canonical)}loadTile(s){return i._(this,void 0,void 0,function*(){let c=s.tileID.canonical.url(this.tiles,this.map.getPixelRatio(),this.scheme);s.abortController=new AbortController;try{let g=yield q.getImage(this.map._requestManager.transformRequest(c,"Tile"),s.abortController,this.map._refreshExpiredTiles);if(delete s.abortController,s.aborted)return void(s.state="unloaded");if(g&&g.data){this.map._refreshExpiredTiles&&(g.cacheControl||g.expires)&&s.setExpiryData({cacheControl:g.cacheControl,expires:g.expires});let y=this.map.painter.context,E=y.gl,I=g.data;s.texture=this.map.painter.getTileTexture(I.width),s.texture?s.texture.update(I,{useMipmap:!0}):(s.texture=new Q(y,I,E.RGBA,{useMipmap:!0}),s.texture.bind(E.LINEAR,E.CLAMP_TO_EDGE,E.LINEAR_MIPMAP_NEAREST)),s.state="loaded"}}catch(g){if(delete s.abortController,s.aborted)s.state="unloaded";else if(g)throw s.state="errored",g}})}abortTile(s){return i._(this,void 0,void 0,function*(){s.abortController&&(s.abortController.abort(),delete s.abortController)})}unloadTile(s){return i._(this,void 0,void 0,function*(){s.texture&&this.map.painter.saveTileTexture(s.texture)})}hasTransition(){return!1}}class Jt extends Ft{constructor(s,c,g,y){super(s,c,g,y),this.type="raster-dem",this.maxzoom=22,this._options=i.e({type:"raster-dem"},c),this.encoding=c.encoding||"mapbox",this.redFactor=c.redFactor,this.greenFactor=c.greenFactor,this.blueFactor=c.blueFactor,this.baseShift=c.baseShift}loadTile(s){return i._(this,void 0,void 0,function*(){let c=s.tileID.canonical.url(this.tiles,this.map.getPixelRatio(),this.scheme),g=this.map._requestManager.transformRequest(c,"Tile");s.neighboringTiles=this._getNeighboringTiles(s.tileID),s.abortController=new AbortController;try{let y=yield q.getImage(g,s.abortController,this.map._refreshExpiredTiles);if(delete s.abortController,s.aborted)return void(s.state="unloaded");if(y&&y.data){let E=y.data;this.map._refreshExpiredTiles&&(y.cacheControl||y.expires)&&s.setExpiryData({cacheControl:y.cacheControl,expires:y.expires});let I=i.b(E)&&i.V()?E:yield this.readImageNow(E),P={type:this.type,uid:s.uid,source:this.id,rawImageData:I,encoding:this.encoding,redFactor:this.redFactor,greenFactor:this.greenFactor,blueFactor:this.blueFactor,baseShift:this.baseShift};if(!s.actor||s.state==="expired"){s.actor=this.dispatcher.getActor();let L=yield s.actor.sendAsync({type:"LDT",data:P});s.dem=L,s.needsHillshadePrepare=!0,s.needsTerrainPrepare=!0,s.state="loaded"}}}catch(y){if(delete s.abortController,s.aborted)s.state="unloaded";else if(y)throw s.state="errored",y}})}readImageNow(s){return i._(this,void 0,void 0,function*(){if(typeof VideoFrame!="undefined"&&i.W()){let c=s.width+2,g=s.height+2;try{return new i.R({width:c,height:g},yield i.X(s,-1,-1,c,g))}catch(y){}}return v.getImageData(s,1)})}_getNeighboringTiles(s){let c=s.canonical,g=Math.pow(2,c.z),y=(c.x-1+g)%g,E=c.x===0?s.wrap-1:s.wrap,I=(c.x+1+g)%g,P=c.x+1===g?s.wrap+1:s.wrap,L={};return L[new i.Y(s.overscaledZ,E,c.z,y,c.y).key]={backfilled:!1},L[new i.Y(s.overscaledZ,P,c.z,I,c.y).key]={backfilled:!1},c.y>0&&(L[new i.Y(s.overscaledZ,E,c.z,y,c.y-1).key]={backfilled:!1},L[new i.Y(s.overscaledZ,s.wrap,c.z,c.x,c.y-1).key]={backfilled:!1},L[new i.Y(s.overscaledZ,P,c.z,I,c.y-1).key]={backfilled:!1}),c.y+1<g&&(L[new i.Y(s.overscaledZ,E,c.z,y,c.y+1).key]={backfilled:!1},L[new i.Y(s.overscaledZ,s.wrap,c.z,c.x,c.y+1).key]={backfilled:!1},L[new i.Y(s.overscaledZ,P,c.z,I,c.y+1).key]={backfilled:!1}),L}unloadTile(s){return i._(this,void 0,void 0,function*(){s.demTexture&&this.map.painter.saveTileTexture(s.demTexture),s.fbo&&(s.fbo.destroy(),delete s.fbo),s.dem&&delete s.dem,delete s.neighboringTiles,s.state="unloaded",s.actor&&(yield s.actor.sendAsync({type:"RDT",data:{type:this.type,uid:s.uid,source:this.id}}))})}}class dr extends i.E{constructor(s,c,g,y){super(),this.id=s,this.type="geojson",this.minzoom=0,this.maxzoom=18,this.tileSize=512,this.isTileClipped=!0,this.reparseOverscaled=!0,this._removed=!1,this._pendingLoads=0,this.actor=g.getActor(),this.setEventedParent(y),this._data=c.data,this._options=i.e({},c),this._collectResourceTiming=c.collectResourceTiming,c.maxzoom!==void 0&&(this.maxzoom=c.maxzoom),c.type&&(this.type=c.type),c.attribution&&(this.attribution=c.attribution),this.promoteId=c.promoteId,c.clusterMaxZoom!==void 0&&this.maxzoom<=c.clusterMaxZoom&&i.w(`The maxzoom value "${this.maxzoom}" is expected to be greater than the clusterMaxZoom value "${c.clusterMaxZoom}".`),this.workerOptions=i.e({source:this.id,cluster:c.cluster||!1,geojsonVtOptions:{buffer:this._pixelsToTileUnits(c.buffer!==void 0?c.buffer:128),tolerance:this._pixelsToTileUnits(c.tolerance!==void 0?c.tolerance:.375),extent:i.Z,maxZoom:this.maxzoom,lineMetrics:c.lineMetrics||!1,generateId:c.generateId||!1},superclusterOptions:{maxZoom:c.clusterMaxZoom!==void 0?c.clusterMaxZoom:this.maxzoom-1,minPoints:Math.max(2,c.clusterMinPoints||2),extent:i.Z,radius:this._pixelsToTileUnits(c.clusterRadius||50),log:!1,generateId:c.generateId||!1},clusterProperties:c.clusterProperties,filter:c.filter},c.workerOptions),typeof this.promoteId=="string"&&(this.workerOptions.promoteId=this.promoteId)}_pixelsToTileUnits(s){return s*(i.Z/this.tileSize)}load(){return i._(this,void 0,void 0,function*(){yield this._updateWorkerData()})}onAdd(s){this.map=s,this.load()}setData(s){return this._data=s,this._updateWorkerData(),this}updateData(s){return this._updateWorkerData(s),this}getData(){return i._(this,void 0,void 0,function*(){let s=i.e({type:this.type},this.workerOptions);return this.actor.sendAsync({type:"GD",data:s})})}getCoordinatesFromGeometry(s){return s.type==="GeometryCollection"?s.geometries.map(c=>c.coordinates).flat(1/0):s.coordinates.flat(1/0)}getBounds(){return i._(this,void 0,void 0,function*(){let s=new St,c=yield this.getData(),g;switch(c.type){case"FeatureCollection":g=c.features.map(y=>this.getCoordinatesFromGeometry(y.geometry)).flat(1/0);break;case"Feature":g=this.getCoordinatesFromGeometry(c.geometry);break;default:g=this.getCoordinatesFromGeometry(c)}if(g.length==0)return s;for(let y=0;y<g.length-1;y+=2)s.extend([g[y],g[y+1]]);return s})}setClusterOptions(s){return this.workerOptions.cluster=s.cluster,s&&(s.clusterRadius!==void 0&&(this.workerOptions.superclusterOptions.radius=this._pixelsToTileUnits(s.clusterRadius)),s.clusterMaxZoom!==void 0&&(this.workerOptions.superclusterOptions.maxZoom=s.clusterMaxZoom)),this._updateWorkerData(),this}getClusterExpansionZoom(s){return this.actor.sendAsync({type:"GCEZ",data:{type:this.type,clusterId:s,source:this.id}})}getClusterChildren(s){return this.actor.sendAsync({type:"GCC",data:{type:this.type,clusterId:s,source:this.id}})}getClusterLeaves(s,c,g){return this.actor.sendAsync({type:"GCL",data:{type:this.type,source:this.id,clusterId:s,limit:c,offset:g}})}_updateWorkerData(s){return i._(this,void 0,void 0,function*(){let c=i.e({type:this.type},this.workerOptions);s?c.dataDiff=s:typeof this._data=="string"?(c.request=this.map._requestManager.transformRequest(v.resolveURL(this._data),"Source"),c.request.collectResourceTiming=this._collectResourceTiming):c.data=JSON.stringify(this._data),this._pendingLoads++,this.fire(new i.l("dataloading",{dataType:"source"}));try{let g=yield this.actor.sendAsync({type:"LD",data:c});if(this._pendingLoads--,this._removed||g.abandoned)return void this.fire(new i.l("dataabort",{dataType:"source"}));let y=null;g.resourceTiming&&g.resourceTiming[this.id]&&(y=g.resourceTiming[this.id].slice(0));let E={dataType:"source"};this._collectResourceTiming&&y&&y.length>0&&i.e(E,{resourceTiming:y}),this.fire(new i.l("data",Object.assign(Object.assign({},E),{sourceDataType:"metadata"}))),this.fire(new i.l("data",Object.assign(Object.assign({},E),{sourceDataType:"content"})))}catch(g){if(this._pendingLoads--,this._removed)return void this.fire(new i.l("dataabort",{dataType:"source"}));this.fire(new i.k(g))}})}loaded(){return this._pendingLoads===0}loadTile(s){return i._(this,void 0,void 0,function*(){let c=s.actor?"RT":"LT";s.actor=this.actor;let g={type:this.type,uid:s.uid,tileID:s.tileID,zoom:s.tileID.overscaledZ,maxZoom:this.maxzoom,tileSize:this.tileSize,source:this.id,pixelRatio:this.map.getPixelRatio(),showCollisionBoxes:this.map.showCollisionBoxes,promoteId:this.promoteId,subdivisionGranularity:this.map.style.projection.subdivisionGranularity};s.abortController=new AbortController;let y=yield this.actor.sendAsync({type:c,data:g},s.abortController);delete s.abortController,s.unloadVectorData(),s.aborted||s.loadVectorData(y,this.map.painter,c==="RT")})}abortTile(s){return i._(this,void 0,void 0,function*(){s.abortController&&(s.abortController.abort(),delete s.abortController),s.aborted=!0})}unloadTile(s){return i._(this,void 0,void 0,function*(){s.unloadVectorData(),yield this.actor.sendAsync({type:"RMT",data:{uid:s.uid,type:this.type,source:this.id}})})}onRemove(){this._removed=!0,this.actor.sendAsync({type:"RS",data:{type:this.type,source:this.id}})}serialize(){return i.e({},this._options,{type:this.type,data:this._data})}hasTransition(){return!1}}class Er extends i.E{constructor(s,c,g,y){super(),this.flippedWindingOrder=!1,this.id=s,this.dispatcher=g,this.coordinates=c.coordinates,this.type="image",this.minzoom=0,this.maxzoom=22,this.tileSize=512,this.tiles={},this._loaded=!1,this.setEventedParent(y),this.options=c}load(s){return i._(this,void 0,void 0,function*(){this._loaded=!1,this.fire(new i.l("dataloading",{dataType:"source"})),this.url=this.options.url,this._request=new AbortController;try{let c=yield q.getImage(this.map._requestManager.transformRequest(this.url,"Image"),this._request);this._request=null,this._loaded=!0,c&&c.data&&(this.image=c.data,s&&(this.coordinates=s),this._finishLoading())}catch(c){this._request=null,this._loaded=!0,this.fire(new i.k(c))}})}loaded(){return this._loaded}updateImage(s){return s.url?(this._request&&(this._request.abort(),this._request=null),this.options.url=s.url,this.load(s.coordinates).finally(()=>{this.texture=null}),this):this}_finishLoading(){this.map&&(this.setCoordinates(this.coordinates),this.fire(new i.l("data",{dataType:"source",sourceDataType:"metadata"})))}onAdd(s){this.map=s,this.load()}onRemove(){this._request&&(this._request.abort(),this._request=null)}setCoordinates(s){this.coordinates=s;let c=s.map(i.$.fromLngLat);var g;return this.tileID=function(y){let E=1/0,I=1/0,P=-1/0,L=-1/0;for(let H of y)E=Math.min(E,H.x),I=Math.min(I,H.y),P=Math.max(P,H.x),L=Math.max(L,H.y);let z=Math.max(P-E,L-I),U=Math.max(0,Math.floor(-Math.log(z)/Math.LN2)),W=Math.pow(2,U);return new i.a1(U,Math.floor((E+P)/2*W),Math.floor((I+L)/2*W))}(c),this.terrainTileRanges=this._getOverlappingTileRanges(c),this.minzoom=this.maxzoom=this.tileID.z,this.tileCoords=c.map(y=>this.tileID.getTilePoint(y)._round()),this.flippedWindingOrder=((g=this.tileCoords)[1].x-g[0].x)*(g[2].y-g[0].y)-(g[1].y-g[0].y)*(g[2].x-g[0].x)<0,this.fire(new i.l("data",{dataType:"source",sourceDataType:"content"})),this}prepare(){if(Object.keys(this.tiles).length===0||!this.image)return;let s=this.map.painter.context,c=s.gl;this.texture||(this.texture=new Q(s,this.image,c.RGBA),this.texture.bind(c.LINEAR,c.CLAMP_TO_EDGE));let g=!1;for(let y in this.tiles){let E=this.tiles[y];E.state!=="loaded"&&(E.state="loaded",E.texture=this.texture,g=!0)}g&&this.fire(new i.l("data",{dataType:"source",sourceDataType:"idle",sourceId:this.id}))}loadTile(s){return i._(this,void 0,void 0,function*(){this.tileID&&this.tileID.equals(s.tileID.canonical)?(this.tiles[String(s.tileID.wrap)]=s,s.buckets={}):s.state="errored"})}serialize(){return{type:"image",url:this.options.url,coordinates:this.coordinates}}hasTransition(){return!1}_getOverlappingTileRanges(s){let c=1/0,g=1/0,y=-1/0,E=-1/0;for(let P of s)c=Math.min(c,P.x),g=Math.min(g,P.y),y=Math.max(y,P.x),E=Math.max(E,P.y);let I={};for(let P=0;P<=i.a0;P++){let L=Math.pow(2,P),z=Math.floor(c*L),U=Math.floor(g*L),W=Math.floor(y*L),H=Math.floor(E*L);I[P]={minTileX:z,minTileY:U,maxTileX:W,maxTileY:H}}return I}}class Cr extends Er{constructor(s,c,g,y){super(s,c,g,y),this.roundZoom=!0,this.type="video",this.options=c}load(){return i._(this,void 0,void 0,function*(){this._loaded=!1;let s=this.options;this.urls=[];for(let c of s.urls)this.urls.push(this.map._requestManager.transformRequest(c,"Source").url);try{let c=yield i.a2(this.urls);if(this._loaded=!0,!c)return;this.video=c,this.video.loop=!0,this.video.addEventListener("playing",()=>{this.map.triggerRepaint()}),this.map&&this.video.play(),this._finishLoading()}catch(c){this.fire(new i.k(c))}})}pause(){this.video&&this.video.pause()}play(){this.video&&this.video.play()}seek(s){if(this.video){let c=this.video.seekable;s<c.start(0)||s>c.end(0)?this.fire(new i.k(new i.a3(`sources.${this.id}`,null,`Playback for this video can be set only between the ${c.start(0)} and ${c.end(0)}-second mark.`))):this.video.currentTime=s}}getVideo(){return this.video}onAdd(s){this.map||(this.map=s,this.load(),this.video&&(this.video.play(),this.setCoordinates(this.coordinates)))}prepare(){if(Object.keys(this.tiles).length===0||this.video.readyState<2)return;let s=this.map.painter.context,c=s.gl;this.texture?this.video.paused||(this.texture.bind(c.LINEAR,c.CLAMP_TO_EDGE),c.texSubImage2D(c.TEXTURE_2D,0,0,0,c.RGBA,c.UNSIGNED_BYTE,this.video)):(this.texture=new Q(s,this.video,c.RGBA),this.texture.bind(c.LINEAR,c.CLAMP_TO_EDGE));let g=!1;for(let y in this.tiles){let E=this.tiles[y];E.state!=="loaded"&&(E.state="loaded",E.texture=this.texture,g=!0)}g&&this.fire(new i.l("data",{dataType:"source",sourceDataType:"idle",sourceId:this.id}))}serialize(){return{type:"video",urls:this.urls,coordinates:this.coordinates}}hasTransition(){return this.video&&!this.video.paused}}class Tr extends Er{constructor(s,c,g,y){super(s,c,g,y),c.coordinates?Array.isArray(c.coordinates)&&c.coordinates.length===4&&!c.coordinates.some(E=>!Array.isArray(E)||E.length!==2||E.some(I=>typeof I!="number"))||this.fire(new i.k(new i.a3(`sources.${s}`,null,"\"coordinates\" property must be an array of 4 longitude/latitude array pairs"))):this.fire(new i.k(new i.a3(`sources.${s}`,null,"missing required property \"coordinates\""))),c.animate&&typeof c.animate!="boolean"&&this.fire(new i.k(new i.a3(`sources.${s}`,null,"optional \"animate\" property must be a boolean value"))),c.canvas?typeof c.canvas=="string"||c.canvas instanceof HTMLCanvasElement||this.fire(new i.k(new i.a3(`sources.${s}`,null,"\"canvas\" must be either a string representing the ID of the canvas element from which to read, or an HTMLCanvasElement instance"))):this.fire(new i.k(new i.a3(`sources.${s}`,null,"missing required property \"canvas\""))),this.options=c,this.animate=c.animate===void 0||c.animate}load(){return i._(this,void 0,void 0,function*(){this._loaded=!0,this.canvas||(this.canvas=this.options.canvas instanceof HTMLCanvasElement?this.options.canvas:document.getElementById(this.options.canvas)),this.width=this.canvas.width,this.height=this.canvas.height,this._hasInvalidDimensions()?this.fire(new i.k(new Error("Canvas dimensions cannot be less than or equal to zero."))):(this.play=function(){this._playing=!0,this.map.triggerRepaint()},this.pause=function(){this._playing&&(this.prepare(),this._playing=!1)},this._finishLoading())})}getCanvas(){return this.canvas}onAdd(s){this.map=s,this.load(),this.canvas&&this.animate&&this.play()}onRemove(){this.pause()}prepare(){let s=!1;if(this.canvas.width!==this.width&&(this.width=this.canvas.width,s=!0),this.canvas.height!==this.height&&(this.height=this.canvas.height,s=!0),this._hasInvalidDimensions()||Object.keys(this.tiles).length===0)return;let c=this.map.painter.context,g=c.gl;this.texture?(s||this._playing)&&this.texture.update(this.canvas,{premultiply:!0}):this.texture=new Q(c,this.canvas,g.RGBA,{premultiply:!0});let y=!1;for(let E in this.tiles){let I=this.tiles[E];I.state!=="loaded"&&(I.state="loaded",I.texture=this.texture,y=!0)}y&&this.fire(new i.l("data",{dataType:"source",sourceDataType:"idle",sourceId:this.id}))}serialize(){return{type:"canvas",coordinates:this.coordinates}}hasTransition(){return this._playing}_hasInvalidDimensions(){for(let s of[this.canvas.width,this.canvas.height])if(isNaN(s)||s<=0)return!0;return!1}}let qr={},Ce=w=>{switch(w){case"geojson":return dr;case"image":return Er;case"raster":return Ft;case"raster-dem":return Jt;case"vector":return sr;case"video":return Cr;case"canvas":return Tr}return qr[w]},Ze="RTLPluginLoaded";class et extends i.E{constructor(){super(...arguments),this.status="unavailable",this.url=null,this.dispatcher=De()}_syncState(s){return this.status=s,this.dispatcher.broadcast("SRPS",{pluginStatus:s,pluginURL:this.url}).catch(c=>{throw this.status="error",c})}getRTLTextPluginStatus(){return this.status}clearRTLTextPlugin(){this.status="unavailable",this.url=null}setRTLTextPlugin(s){return i._(this,arguments,void 0,function*(c,g=!1){if(this.url)throw new Error("setRTLTextPlugin cannot be called multiple times.");if(this.url=v.resolveURL(c),!this.url)throw new Error(`requested url ${c} is invalid`);if(this.status==="unavailable"){if(!g)return this._requestImport();this.status="deferred",this._syncState(this.status)}else if(this.status==="requested")return this._requestImport()})}_requestImport(){return i._(this,void 0,void 0,function*(){yield this._syncState("loading"),this.status="loaded",this.fire(new i.l(Ze))})}lazyLoad(){this.status==="unavailable"?this.status="requested":this.status==="deferred"&&this._requestImport()}}let qt=null;function Bt(){return qt||(qt=new et),qt}class jt{constructor(s,c){this.timeAdded=0,this.fadeEndTime=0,this.tileID=s,this.uid=i.a4(),this.uses=0,this.tileSize=c,this.buckets={},this.expirationTime=null,this.queryPadding=0,this.hasSymbolBuckets=!1,this.hasRTLText=!1,this.dependencies={},this.rtt=[],this.rttCoords={},this.expiredRequestCount=0,this.state="loading"}registerFadeDuration(s){let c=s+this.timeAdded;c<this.fadeEndTime||(this.fadeEndTime=c)}wasRequested(){return this.state==="errored"||this.state==="loaded"||this.state==="reloading"}clearTextures(s){this.demTexture&&s.saveTileTexture(this.demTexture),this.demTexture=null}loadVectorData(s,c,g){if(this.hasData()&&this.unloadVectorData(),this.state="loaded",s){s.featureIndex&&(this.latestFeatureIndex=s.featureIndex,s.rawTileData?(this.latestRawTileData=s.rawTileData,this.latestFeatureIndex.rawTileData=s.rawTileData):this.latestRawTileData&&(this.latestFeatureIndex.rawTileData=this.latestRawTileData)),this.collisionBoxArray=s.collisionBoxArray,this.buckets=function(y,E){let I={};if(!E)return I;for(let P of y){let L=P.layerIds.map(z=>E.getLayer(z)).filter(Boolean);if(L.length!==0){P.layers=L,P.stateDependentLayerIds&&(P.stateDependentLayers=P.stateDependentLayerIds.map(z=>L.filter(U=>U.id===z)[0]));for(let z of L)I[z.id]=P}}return I}(s.buckets,c==null?void 0:c.style),this.hasSymbolBuckets=!1;for(let y in this.buckets){let E=this.buckets[y];if(E instanceof i.a6){if(this.hasSymbolBuckets=!0,!g)break;E.justReloaded=!0}}if(this.hasRTLText=!1,this.hasSymbolBuckets)for(let y in this.buckets){let E=this.buckets[y];if(E instanceof i.a6&&E.hasRTLText){this.hasRTLText=!0,Bt().lazyLoad();break}}this.queryPadding=0;for(let y in this.buckets){let E=this.buckets[y];this.queryPadding=Math.max(this.queryPadding,c.style.getLayer(y).queryRadius(E))}s.imageAtlas&&(this.imageAtlas=s.imageAtlas),s.glyphAtlasImage&&(this.glyphAtlasImage=s.glyphAtlasImage)}else this.collisionBoxArray=new i.a5}unloadVectorData(){for(let s in this.buckets)this.buckets[s].destroy();this.buckets={},this.imageAtlasTexture&&this.imageAtlasTexture.destroy(),this.imageAtlas&&(this.imageAtlas=null),this.glyphAtlasTexture&&this.glyphAtlasTexture.destroy(),this.latestFeatureIndex=null,this.state="unloaded"}getBucket(s){return this.buckets[s.id]}upload(s){for(let g in this.buckets){let y=this.buckets[g];y.uploadPending()&&y.upload(s)}let c=s.gl;this.imageAtlas&&!this.imageAtlas.uploaded&&(this.imageAtlasTexture=new Q(s,this.imageAtlas.image,c.RGBA),this.imageAtlas.uploaded=!0),this.glyphAtlasImage&&(this.glyphAtlasTexture=new Q(s,this.glyphAtlasImage,c.ALPHA),this.glyphAtlasImage=null)}prepare(s){this.imageAtlas&&this.imageAtlas.patchUpdatedImages(s,this.imageAtlasTexture)}queryRenderedFeatures(s,c,g,y,E,I,P,L,z,U,W){return this.latestFeatureIndex&&this.latestFeatureIndex.rawTileData?this.latestFeatureIndex.query({queryGeometry:y,cameraQueryGeometry:E,scale:I,tileSize:this.tileSize,pixelPosMatrix:U,transform:L,params:P,queryPadding:this.queryPadding*z,getElevation:W},s,c,g):{}}querySourceFeatures(s,c){let g=this.latestFeatureIndex;if(!g||!g.rawTileData)return;let y=g.loadVTLayers(),E=c&&c.sourceLayer?c.sourceLayer:"",I=y._geojsonTileLayer||y[E];if(!I)return;let P=i.a7(c&&c.filter),{z:L,x:z,y:U}=this.tileID.canonical,W={z:L,x:z,y:U};for(let H=0;H<I.length;H++){let te=I.feature(H);if(P.needGeometry){let _e=i.a8(te,!0);if(!P.filter(new i.C(this.tileID.overscaledZ),_e,this.tileID.canonical))continue}else if(!P.filter(new i.C(this.tileID.overscaledZ),te))continue;let ae=g.getId(te,E),be=new i.a9(te,L,z,U,ae);be.tile=W,s.push(be)}}hasData(){return this.state==="loaded"||this.state==="reloading"||this.state==="expired"}patternsLoaded(){return this.imageAtlas&&!!Object.keys(this.imageAtlas.patternPositions).length}setExpiryData(s){let c=this.expirationTime;if(s.cacheControl){let g=i.aa(s.cacheControl);g["max-age"]&&(this.expirationTime=Date.now()+1e3*g["max-age"])}else s.expires&&(this.expirationTime=new Date(s.expires).getTime());if(this.expirationTime){let g=Date.now(),y=!1;if(this.expirationTime>g)y=!1;else if(c){if(this.expirationTime<c)y=!0;else{let E=this.expirationTime-c;E?this.expirationTime=g+Math.max(E,3e4):y=!0}}else y=!0;y?(this.expiredRequestCount++,this.state="expired"):this.expiredRequestCount=0}}getExpiryTimeout(){if(this.expirationTime)return this.expiredRequestCount?1e3*(1<<Math.min(this.expiredRequestCount-1,31)):Math.min(this.expirationTime-new Date().getTime(),Math.pow(2,31)-1)}setFeatureState(s,c){if(!this.latestFeatureIndex||!this.latestFeatureIndex.rawTileData||Object.keys(s).length===0)return;let g=this.latestFeatureIndex.loadVTLayers();for(let y in this.buckets){if(!c.style.hasLayer(y))continue;let E=this.buckets[y],I=E.layers[0].sourceLayer||"_geojsonTileLayer",P=g[I],L=s[I];if(!P||!L||Object.keys(L).length===0)continue;E.update(L,P,this.imageAtlas&&this.imageAtlas.patternPositions||{});let z=c&&c.style&&c.style.getLayer(y);z&&(this.queryPadding=Math.max(this.queryPadding,z.queryRadius(E)))}}holdingForFade(){return this.symbolFadeHoldUntil!==void 0}symbolFadeFinished(){return!this.symbolFadeHoldUntil||this.symbolFadeHoldUntil<v.now()}clearFadeHold(){this.symbolFadeHoldUntil=void 0}setHoldDuration(s){this.symbolFadeHoldUntil=v.now()+s}setDependencies(s,c){let g={};for(let y of c)g[y]=!0;this.dependencies[s]=g}hasDependency(s,c){for(let g of s){let y=this.dependencies[g];if(y){for(let E of c)if(y[E])return!0}}return!1}}class $t{constructor(s,c){this.max=s,this.onRemove=c,this.reset()}reset(){for(let s in this.data)for(let c of this.data[s])c.timeout&&clearTimeout(c.timeout),this.onRemove(c.value);return this.data={},this.order=[],this}add(s,c,g){let y=s.wrapped().key;this.data[y]===void 0&&(this.data[y]=[]);let E={value:c,timeout:void 0};if(g!==void 0&&(E.timeout=setTimeout(()=>{this.remove(s,E)},g)),this.data[y].push(E),this.order.push(y),this.order.length>this.max){let I=this._getAndRemoveByKey(this.order[0]);I&&this.onRemove(I)}return this}has(s){return s.wrapped().key in this.data}getAndRemove(s){return this.has(s)?this._getAndRemoveByKey(s.wrapped().key):null}_getAndRemoveByKey(s){let c=this.data[s].shift();return c.timeout&&clearTimeout(c.timeout),this.data[s].length===0&&delete this.data[s],this.order.splice(this.order.indexOf(s),1),c.value}getByKey(s){let c=this.data[s];return c?c[0].value:null}get(s){return this.has(s)?this.data[s.wrapped().key][0].value:null}remove(s,c){if(!this.has(s))return this;let g=s.wrapped().key,y=c===void 0?0:this.data[g].indexOf(c),E=this.data[g][y];return this.data[g].splice(y,1),E.timeout&&clearTimeout(E.timeout),this.data[g].length===0&&delete this.data[g],this.onRemove(E.value),this.order.splice(this.order.indexOf(g),1),this}setMaxSize(s){for(this.max=s;this.order.length>this.max;){let c=this._getAndRemoveByKey(this.order[0]);c&&this.onRemove(c)}return this}filter(s){let c=[];for(let g in this.data)for(let y of this.data[g])s(y.value)||c.push(y);for(let g of c)this.remove(g.value.tileID,g)}}class an{constructor(){this.state={},this.stateChanges={},this.deletedStates={}}updateState(s,c,g){let y=String(c);if(this.stateChanges[s]=this.stateChanges[s]||{},this.stateChanges[s][y]=this.stateChanges[s][y]||{},i.e(this.stateChanges[s][y],g),this.deletedStates[s]===null){this.deletedStates[s]={};for(let E in this.state[s])E!==y&&(this.deletedStates[s][E]=null)}else if(this.deletedStates[s]&&this.deletedStates[s][y]===null){this.deletedStates[s][y]={};for(let E in this.state[s][y])g[E]||(this.deletedStates[s][y][E]=null)}else for(let E in g)this.deletedStates[s]&&this.deletedStates[s][y]&&this.deletedStates[s][y][E]===null&&delete this.deletedStates[s][y][E]}removeFeatureState(s,c,g){if(this.deletedStates[s]===null)return;let y=String(c);if(this.deletedStates[s]=this.deletedStates[s]||{},g&&c!==void 0)this.deletedStates[s][y]!==null&&(this.deletedStates[s][y]=this.deletedStates[s][y]||{},this.deletedStates[s][y][g]=null);else if(c!==void 0){if(this.stateChanges[s]&&this.stateChanges[s][y])for(g in this.deletedStates[s][y]={},this.stateChanges[s][y])this.deletedStates[s][y][g]=null;else this.deletedStates[s][y]=null;}else this.deletedStates[s]=null}getState(s,c){let g=String(c),y=i.e({},(this.state[s]||{})[g],(this.stateChanges[s]||{})[g]);if(this.deletedStates[s]===null)return{};if(this.deletedStates[s]){let E=this.deletedStates[s][c];if(E===null)return{};for(let I in E)delete y[I]}return y}initializeTileState(s,c){s.setFeatureState(this.state,c)}coalesceChanges(s,c){let g={};for(let y in this.stateChanges){this.state[y]=this.state[y]||{};let E={};for(let I in this.stateChanges[y])this.state[y][I]||(this.state[y][I]={}),i.e(this.state[y][I],this.stateChanges[y][I]),E[I]=this.state[y][I];g[y]=E}for(let y in this.deletedStates){this.state[y]=this.state[y]||{};let E={};if(this.deletedStates[y]===null)for(let I in this.state[y])E[I]={},this.state[y][I]={};else for(let I in this.deletedStates[y]){if(this.deletedStates[y][I]===null)this.state[y][I]={};else for(let P of Object.keys(this.deletedStates[y][I]))delete this.state[y][I][P];E[I]=this.state[y][I]}g[y]=g[y]||{},i.e(g[y],E)}if(this.stateChanges={},this.deletedStates={},Object.keys(g).length!==0)for(let y in s)s[y].setFeatureState(g,c)}}let gn=89.25;function Rn(w,s){let c=i.ae(s.lat,-85.051129,i.af);return new i.P(i.U(s.lng)*w,i.S(c)*w)}function wa(w,s){return new i.$(s.x/w,s.y/w).toLngLat()}function Ye(w){return w.cameraToCenterDistance*Math.min(.85*Math.tan(i.ab(90-w.pitch)),Math.tan(i.ab(gn-w.pitch)))}function le(w,s){let c=w.canonical,g=s/i.ac(c.z),y=c.x+Math.pow(2,c.z)*w.wrap,E=i.ad(new Float64Array(16));return i.L(E,E,[y*g,c.y*g,0]),i.M(E,E,[g/i.Z,g/i.Z,1]),E}function ue(w,s,c,g,y){let E=i.$.fromLngLat(w,s),I=y*i.ag(1,w.lat),P=I*Math.cos(i.ab(c)),L=Math.sqrt(I*I-P*P),z=L*Math.sin(i.ab(-g)),U=L*Math.cos(i.ab(-g));return new i.$(E.x+z,E.y+U,E.z+P)}function Y(w,s,c){let g=s.intersectsFrustum(w);if(!c)return g;let y=s.intersectsPlane(c);return g===0||y===0?0:g===2&&y===2?2:1}function J(w,s,c){let g=0,y=(c-s)/10;for(let E=0;E<10;E++)g+=y*Math.pow(Math.cos(s+(E+.5)/10*(c-s)),w);return g}function de(w,s){return function(c,g,y,E,I){let P=2*((w-1)/i.ah(Math.cos(i.ab(gn-I))/Math.cos(i.ab(gn)))-1),L=Math.acos(y/E),z=2*J(P-1,0,i.ab(I/2)),U=Math.min(i.ab(gn),L+i.ab(I/2)),W=J(P-1,Math.min(U,L-i.ab(I/2)),U),H=Math.atan(g/y),te=Math.hypot(g,y),ae=c;return ae+=i.ah(E/te/Math.max(.5,Math.cos(i.ab(I/2)))),ae+=P*i.ah(Math.cos(H))/2,ae-=i.ah(Math.max(1,W/z/s))/2,ae}}let ne=de(9.314,3);function je(w,s){let c=(s.roundZoom?Math.round:Math.floor)(w.zoom+i.ah(w.tileSize/s.tileSize));return Math.max(0,c)}function Ie(w,s){let c=w.getCameraFrustum(),g=w.getClippingPlane(),y=w.screenPointToMercatorCoordinate(w.getCameraPoint()),E=i.$.fromLngLat(w.center,w.elevation);y.z=E.z+Math.cos(w.pitchInRadians)*w.cameraToCenterDistance/w.worldSize;let I=w.getCoveringTilesDetailsProvider(),P=I.allowVariableZoom(w,s),L=je(w,s),z=s.minzoom||0,U=s.maxzoom!==void 0?s.maxzoom:w.maxZoom,W=Math.min(Math.max(0,L),U),H=Math.pow(2,W),te=[H*y.x,H*y.y,0],ae=[H*E.x,H*E.y,0],be=Math.hypot(E.x-y.x,E.y-y.y),_e=Math.abs(E.z-y.z),xe=Math.hypot(be,_e),Ae=Fe=>({zoom:0,x:0,y:0,wrap:Fe,fullyVisible:!1}),ke=[],Le=[];if(w.renderWorldCopies&&I.allowWorldCopies())for(let Fe=1;Fe<=3;Fe++)ke.push(Ae(-Fe)),ke.push(Ae(Fe));for(ke.push(Ae(0));ke.length>0;){let Fe=ke.pop(),He=Fe.x,Be=Fe.y,rt=Fe.fullyVisible,ht={x:He,y:Be,z:Fe.zoom},lt=I.getTileAABB(ht,Fe.wrap,w.elevation,s);if(!rt){let Ht=Y(c,lt,g);if(Ht===0)continue;rt=Ht===2}let ut=I.distanceToTile2d(y.x,y.y,ht,lt),ft=L;P&&(ft=(s.calculateTileZoom||ne)(w.zoom+i.ah(w.tileSize/s.tileSize),ut,_e,xe,w.fov)),ft=(s.roundZoom?Math.round:Math.floor)(ft),ft=Math.max(0,ft);let Yt=Math.min(ft,U);if(Fe.wrap=I.getWrap(E,ht,Fe.wrap),Fe.zoom>=Yt){if(Fe.zoom<z)continue;let Ht=W-Fe.zoom,Ct=te[0]-.5-(He<<Ht),br=te[1]-.5-(Be<<Ht),On=s.reparseOverscaled?Math.max(Fe.zoom,ft):Fe.zoom;Le.push({tileID:new i.Y(Fe.zoom===U?On:Fe.zoom,Fe.wrap,Fe.zoom,He,Be),distanceSq:i.ai([ae[0]-.5-He,ae[1]-.5-Be]),tileDistanceToCamera:Math.sqrt(Ct*Ct+br*br)})}else for(let Ht=0;Ht<4;Ht++)ke.push({zoom:Fe.zoom+1,x:(He<<1)+Ht%2,y:(Be<<1)+(Ht>>1),wrap:Fe.wrap,fullyVisible:rt})}return Le.sort((Fe,He)=>Fe.distanceSq-He.distanceSq).map(Fe=>Fe.tileID)}class oe extends i.E{constructor(s,c,g){super(),this.id=s,this.dispatcher=g,this.on("data",y=>this._dataHandler(y)),this.on("dataloading",()=>{this._sourceErrored=!1}),this.on("error",()=>{this._sourceErrored=this._source.loaded()}),this._source=((y,E,I,P)=>{let L=new(Ce(E.type))(y,E,I,P);if(L.id!==y)throw new Error(`Expected Source id to be ${y} instead of ${L.id}`);return L})(s,c,g,this),this._tiles={},this._cache=new $t(0,y=>this._unloadTile(y)),this._timers={},this._cacheTimers={},this._maxTileCacheSize=null,this._maxTileCacheZoomLevels=null,this._loadedParentTiles={},this._coveredTiles={},this._state=new an,this._didEmitContent=!1,this._updated=!1}onAdd(s){this.map=s,this._maxTileCacheSize=s?s._maxTileCacheSize:null,this._maxTileCacheZoomLevels=s?s._maxTileCacheZoomLevels:null,this._source&&this._source.onAdd&&this._source.onAdd(s)}onRemove(s){this.clearTiles(),this._source&&this._source.onRemove&&this._source.onRemove(s)}loaded(){if(this._sourceErrored)return!0;if(!this._sourceLoaded||!this._source.loaded())return!1;if(!(this.used===void 0&&this.usedForTerrain===void 0||this.used||this.usedForTerrain))return!0;if(!this._updated)return!1;for(let s in this._tiles){let c=this._tiles[s];if(c.state!=="loaded"&&c.state!=="errored")return!1}return!0}getSource(){return this._source}pause(){this._paused=!0}resume(){if(!this._paused)return;let s=this._shouldReloadOnResume;this._paused=!1,this._shouldReloadOnResume=!1,s&&this.reload(),this.transform&&this.update(this.transform,this.terrain)}_loadTile(s,c,g){return i._(this,void 0,void 0,function*(){try{yield this._source.loadTile(s),this._tileLoaded(s,c,g)}catch(y){s.state="errored",y.status!==404?this._source.fire(new i.k(y,{tile:s})):this.update(this.transform,this.terrain)}})}_unloadTile(s){this._source.unloadTile&&this._source.unloadTile(s)}_abortTile(s){this._source.abortTile&&this._source.abortTile(s),this._source.fire(new i.l("dataabort",{tile:s,coord:s.tileID,dataType:"source"}))}serialize(){return this._source.serialize()}prepare(s){this._source.prepare&&this._source.prepare(),this._state.coalesceChanges(this._tiles,this.map?this.map.painter:null);for(let c in this._tiles){let g=this._tiles[c];g.upload(s),g.prepare(this.map.style.imageManager)}}getIds(){return Object.values(this._tiles).map(s=>s.tileID).sort(Ue).map(s=>s.key)}getRenderableIds(s){let c=[];for(let g in this._tiles)this._isIdRenderable(g,s)&&c.push(this._tiles[g]);return s?c.sort((g,y)=>{let E=g.tileID,I=y.tileID,P=new i.P(E.canonical.x,E.canonical.y)._rotate(-this.transform.bearingInRadians),L=new i.P(I.canonical.x,I.canonical.y)._rotate(-this.transform.bearingInRadians);return E.overscaledZ-I.overscaledZ||L.y-P.y||L.x-P.x}).map(g=>g.tileID.key):c.map(g=>g.tileID).sort(Ue).map(g=>g.key)}hasRenderableParent(s){let c=this.findLoadedParent(s,0);return!!c&&this._isIdRenderable(c.tileID.key)}_isIdRenderable(s,c){return this._tiles[s]&&this._tiles[s].hasData()&&!this._coveredTiles[s]&&(c||!this._tiles[s].holdingForFade())}reload(s){if(this._paused)this._shouldReloadOnResume=!0;else{this._cache.reset();for(let c in this._tiles)(s||this._tiles[c].state!=="errored")&&this._reloadTile(c,"reloading")}}_reloadTile(s,c){return i._(this,void 0,void 0,function*(){let g=this._tiles[s];g&&(g.state!=="loading"&&(g.state=c),yield this._loadTile(g,s,c))})}_tileLoaded(s,c,g){s.timeAdded=v.now(),g==="expired"&&(s.refreshedUponExpiration=!0),this._setTileReloadTimer(c,s),this.getSource().type==="raster-dem"&&s.dem&&this._backfillDEM(s),this._state.initializeTileState(s,this.map?this.map.painter:null),s.aborted||this._source.fire(new i.l("data",{dataType:"source",tile:s,coord:s.tileID}))}_backfillDEM(s){let c=this.getRenderableIds();for(let y=0;y<c.length;y++){let E=c[y];if(s.neighboringTiles&&s.neighboringTiles[E]){let I=this.getTileByID(E);g(s,I),g(I,s)}}function g(y,E){y.needsHillshadePrepare=!0,y.needsTerrainPrepare=!0;let I=E.tileID.canonical.x-y.tileID.canonical.x,P=E.tileID.canonical.y-y.tileID.canonical.y,L=Math.pow(2,y.tileID.canonical.z),z=E.tileID.key;I===0&&P===0||Math.abs(P)>1||(Math.abs(I)>1&&(Math.abs(I+L)===1?I+=L:Math.abs(I-L)===1&&(I-=L)),E.dem&&y.dem&&(y.dem.backfillBorder(E.dem,I,P),y.neighboringTiles&&y.neighboringTiles[z]&&(y.neighboringTiles[z].backfilled=!0)))}}getTile(s){return this.getTileByID(s.key)}getTileByID(s){return this._tiles[s]}_retainLoadedChildren(s,c,g,y){for(let E in this._tiles){let I=this._tiles[E];if(y[E]||!I.hasData()||I.tileID.overscaledZ<=c||I.tileID.overscaledZ>g)continue;let P=I.tileID;for(;I&&I.tileID.overscaledZ>c+1;){let z=I.tileID.scaledTo(I.tileID.overscaledZ-1);I=this._tiles[z.key],I&&I.hasData()&&(P=z)}let L=P;for(;L.overscaledZ>c;)if(L=L.scaledTo(L.overscaledZ-1),s[L.key]||s[L.canonical.key]){y[P.key]=P;break}}}findLoadedParent(s,c){if(s.key in this._loadedParentTiles){let g=this._loadedParentTiles[s.key];return g&&g.tileID.overscaledZ>=c?g:null}for(let g=s.overscaledZ-1;g>=c;g--){let y=s.scaledTo(g),E=this._getLoadedTile(y);if(E)return E}}findLoadedSibling(s){return this._getLoadedTile(s)}_getLoadedTile(s){let c=this._tiles[s.key];return c&&c.hasData()?c:this._cache.getByKey(s.wrapped().key)}updateCacheSize(s){let c=Math.ceil(s.width/this._source.tileSize)+1,g=Math.ceil(s.height/this._source.tileSize)+1,y=Math.floor(c*g*(this._maxTileCacheZoomLevels===null?i.a.MAX_TILE_CACHE_ZOOM_LEVELS:this._maxTileCacheZoomLevels)),E=typeof this._maxTileCacheSize=="number"?Math.min(this._maxTileCacheSize,y):y;this._cache.setMaxSize(E)}handleWrapJump(s){let c=Math.round((s-(this._prevLng===void 0?s:this._prevLng))/360);if(this._prevLng=s,c){let g={};for(let y in this._tiles){let E=this._tiles[y];E.tileID=E.tileID.unwrapTo(E.tileID.wrap+c),g[E.tileID.key]=E}this._tiles=g;for(let y in this._timers)clearTimeout(this._timers[y]),delete this._timers[y];for(let y in this._tiles)this._setTileReloadTimer(y,this._tiles[y])}}_updateCoveredAndRetainedTiles(s,c,g,y,E,I){let P={},L={},z=Object.keys(s),U=v.now();for(let W of z){let H=s[W],te=this._tiles[W];if(!te||te.fadeEndTime!==0&&te.fadeEndTime<=U)continue;let ae=this.findLoadedParent(H,c),be=this.findLoadedSibling(H),_e=ae||be||null;_e&&(this._addTile(_e.tileID),P[_e.tileID.key]=_e.tileID),L[W]=H}this._retainLoadedChildren(L,y,g,s);for(let W in P)s[W]||(this._coveredTiles[W]=!0,s[W]=P[W]);if(I){let W={},H={};for(let te of E)this._tiles[te.key].hasData()?W[te.key]=te:H[te.key]=te;for(let te in H){let ae=H[te].children(this._source.maxzoom);this._tiles[ae[0].key]&&this._tiles[ae[1].key]&&this._tiles[ae[2].key]&&this._tiles[ae[3].key]&&(W[ae[0].key]=s[ae[0].key]=ae[0],W[ae[1].key]=s[ae[1].key]=ae[1],W[ae[2].key]=s[ae[2].key]=ae[2],W[ae[3].key]=s[ae[3].key]=ae[3],delete H[te])}for(let te in H){let ae=H[te],be=this.findLoadedParent(ae,this._source.minzoom),_e=this.findLoadedSibling(ae),xe=be||_e||null;if(xe){W[xe.tileID.key]=s[xe.tileID.key]=xe.tileID;for(let Ae in W)W[Ae].isChildOf(xe.tileID)&&delete W[Ae]}}for(let te in this._tiles)W[te]||(this._coveredTiles[te]=!0)}}update(s,c){if(!this._sourceLoaded||this._paused)return;let g;this.transform=s,this.terrain=c,this.updateCacheSize(s),this.handleWrapJump(this.transform.center.lng),this._coveredTiles={},this.used||this.usedForTerrain?this._source.tileID?g=s.getVisibleUnwrappedCoordinates(this._source.tileID).map(U=>new i.Y(U.canonical.z,U.wrap,U.canonical.z,U.canonical.x,U.canonical.y)):(g=Ie(s,{tileSize:this.usedForTerrain?this.tileSize:this._source.tileSize,minzoom:this._source.minzoom,maxzoom:this._source.maxzoom,roundZoom:!this.usedForTerrain&&this._source.roundZoom,reparseOverscaled:this._source.reparseOverscaled,terrain:c,calculateTileZoom:this._source.calculateTileZoom}),this._source.hasTile&&(g=g.filter(U=>this._source.hasTile(U)))):g=[];let y=je(s,this._source),E=Math.max(y-oe.maxOverzooming,this._source.minzoom),I=Math.max(y+oe.maxUnderzooming,this._source.minzoom);if(this.usedForTerrain){let U={};for(let W of g)if(W.canonical.z>this._source.minzoom){let H=W.scaledTo(W.canonical.z-1);U[H.key]=H;let te=W.scaledTo(Math.max(this._source.minzoom,Math.min(W.canonical.z,5)));U[te.key]=te}g=g.concat(Object.values(U))}let P=g.length===0&&!this._updated&&this._didEmitContent;this._updated=!0,P&&this.fire(new i.l("data",{sourceDataType:"idle",dataType:"source",sourceId:this.id}));let L=this._updateRetainedTiles(g,y);ze(this._source.type)&&this._updateCoveredAndRetainedTiles(L,E,I,y,g,c);for(let U in L)this._tiles[U].clearFadeHold();let z=i.aj(this._tiles,L);for(let U of z){let W=this._tiles[U];W.hasSymbolBuckets&&!W.holdingForFade()?W.setHoldDuration(this.map._fadeDuration):W.hasSymbolBuckets&&!W.symbolFadeFinished()||this._removeTile(U)}this._updateLoadedParentTileCache(),this._updateLoadedSiblingTileCache()}releaseSymbolFadeTiles(){for(let s in this._tiles)this._tiles[s].holdingForFade()&&this._removeTile(s)}_updateRetainedTiles(s,c){var g;let y={},E={},I=Math.max(c-oe.maxOverzooming,this._source.minzoom),P=Math.max(c+oe.maxUnderzooming,this._source.minzoom),L={};for(let z of s){let U=this._addTile(z);y[z.key]=z,U.hasData()||c<this._source.maxzoom&&(L[z.key]=z)}this._retainLoadedChildren(L,c,P,y);for(let z of s){let U=this._tiles[z.key];if(U.hasData())continue;if(c+1>this._source.maxzoom){let H=z.children(this._source.maxzoom)[0],te=this.getTile(H);if(te&&te.hasData()){y[H.key]=H;continue}}else{let H=z.children(this._source.maxzoom);if(y[H[0].key]&&y[H[1].key]&&y[H[2].key]&&y[H[3].key])continue}let W=U.wasRequested();for(let H=z.overscaledZ-1;H>=I;--H){let te=z.scaledTo(H);if(E[te.key])break;if(E[te.key]=!0,U=this.getTile(te),!U&&W&&(U=this._addTile(te)),U){let ae=U.hasData();if((ae||!(!((g=this.map)===null||g===void 0)&&g.cancelPendingTileRequestsWhileZooming)||W)&&(y[te.key]=te),W=U.wasRequested(),ae)break}}}return y}_updateLoadedParentTileCache(){this._loadedParentTiles={};for(let s in this._tiles){let c=[],g,y=this._tiles[s].tileID;for(;y.overscaledZ>0;){if(y.key in this._loadedParentTiles){g=this._loadedParentTiles[y.key];break}c.push(y.key);let E=y.scaledTo(y.overscaledZ-1);if(g=this._getLoadedTile(E),g)break;y=E}for(let E of c)this._loadedParentTiles[E]=g}}_updateLoadedSiblingTileCache(){this._loadedSiblingTiles={};for(let s in this._tiles){let c=this._tiles[s].tileID,g=this._getLoadedTile(c);this._loadedSiblingTiles[c.key]=g}}_addTile(s){let c=this._tiles[s.key];if(c)return c;c=this._cache.getAndRemove(s),c&&(this._setTileReloadTimer(s.key,c),c.tileID=s,this._state.initializeTileState(c,this.map?this.map.painter:null),this._cacheTimers[s.key]&&(clearTimeout(this._cacheTimers[s.key]),delete this._cacheTimers[s.key],this._setTileReloadTimer(s.key,c)));let g=c;return c||(c=new jt(s,this._source.tileSize*s.overscaleFactor()),this._loadTile(c,s.key,c.state)),c.uses++,this._tiles[s.key]=c,g||this._source.fire(new i.l("dataloading",{tile:c,coord:c.tileID,dataType:"source"})),c}_setTileReloadTimer(s,c){s in this._timers&&(clearTimeout(this._timers[s]),delete this._timers[s]);let g=c.getExpiryTimeout();g&&(this._timers[s]=setTimeout(()=>{this._reloadTile(s,"expired"),delete this._timers[s]},g))}refreshTiles(s){for(let c in this._tiles)this._isIdRenderable(c)&&s.some(g=>g.equals(this._tiles[c].tileID.canonical))&&this._reloadTile(c,"expired")}_removeTile(s){let c=this._tiles[s];c&&(c.uses--,delete this._tiles[s],this._timers[s]&&(clearTimeout(this._timers[s]),delete this._timers[s]),c.uses>0||(c.hasData()&&c.state!=="reloading"?this._cache.add(c.tileID,c,c.getExpiryTimeout()):(c.aborted=!0,this._abortTile(c),this._unloadTile(c))))}_dataHandler(s){let c=s.sourceDataType;s.dataType==="source"&&c==="metadata"&&(this._sourceLoaded=!0),this._sourceLoaded&&!this._paused&&s.dataType==="source"&&c==="content"&&(this.reload(s.sourceDataChanged),this.transform&&this.update(this.transform,this.terrain),this._didEmitContent=!0)}clearTiles(){this._shouldReloadOnResume=!1,this._paused=!1;for(let s in this._tiles)this._removeTile(s);this._cache.reset()}tilesIn(s,c,g){let y=[],E=this.transform;if(!E)return y;let I=g?E.getCameraQueryGeometry(s):s,P=s.map(ae=>E.screenPointToMercatorCoordinate(ae,this.terrain)),L=I.map(ae=>E.screenPointToMercatorCoordinate(ae,this.terrain)),z=this.getIds(),U=1/0,W=1/0,H=-1/0,te=-1/0;for(let ae of L)U=Math.min(U,ae.x),W=Math.min(W,ae.y),H=Math.max(H,ae.x),te=Math.max(te,ae.y);for(let ae=0;ae<z.length;ae++){let be=this._tiles[z[ae]];if(be.holdingForFade())continue;let _e=E.getCoveringTilesDetailsProvider().allowWorldCopies()?be.tileID:be.tileID.unwrapTo(0),xe=Math.pow(2,E.zoom-be.tileID.overscaledZ),Ae=c*be.queryPadding*i.Z/be.tileSize/xe,ke=[_e.getTilePoint(new i.$(U,W)),_e.getTilePoint(new i.$(H,te))];if(ke[0].x-Ae<i.Z&&ke[0].y-Ae<i.Z&&ke[1].x+Ae>=0&&ke[1].y+Ae>=0){let Le=P.map(He=>_e.getTilePoint(He)),Fe=L.map(He=>_e.getTilePoint(He));y.push({tile:be,tileID:_e,queryGeometry:Le,cameraQueryGeometry:Fe,scale:xe})}}return y}getVisibleCoordinates(s){let c=this.getRenderableIds(s).map(g=>this._tiles[g].tileID);return this.transform&&this.transform.populateCache(c),c}hasTransition(){if(this._source.hasTransition())return!0;if(ze(this._source.type)){let s=v.now();for(let c in this._tiles)if(this._tiles[c].fadeEndTime>=s)return!0}return!1}setFeatureState(s,c,g){this._state.updateState(s=s||"_geojsonTileLayer",c,g)}removeFeatureState(s,c,g){this._state.removeFeatureState(s=s||"_geojsonTileLayer",c,g)}getFeatureState(s,c){return this._state.getState(s=s||"_geojsonTileLayer",c)}setDependencies(s,c,g){let y=this._tiles[s];y&&y.setDependencies(c,g)}reloadTilesForDependencies(s,c){for(let g in this._tiles)this._tiles[g].hasDependency(s,c)&&this._reloadTile(g,"reloading");this._cache.filter(g=>!g.hasDependency(s,c))}}function Ue(w,s){let c=Math.abs(2*w.wrap)-+(w.wrap<0),g=Math.abs(2*s.wrap)-+(s.wrap<0);return w.overscaledZ-s.overscaledZ||g-c||s.canonical.y-w.canonical.y||s.canonical.x-w.canonical.x}function ze(w){return w==="raster"||w==="image"||w==="video"}oe.maxOverzooming=10,oe.maxUnderzooming=3;class it{constructor(s,c){this.reset(s,c)}reset(s,c){this.points=s||[],this._distances=[0];for(let g=1;g<this.points.length;g++)this._distances[g]=this._distances[g-1]+this.points[g].dist(this.points[g-1]);this.length=this._distances[this._distances.length-1],this.padding=Math.min(c||0,.5*this.length),this.paddedLength=this.length-2*this.padding}lerp(s){if(this.points.length===1)return this.points[0];s=i.ae(s,0,1);let c=1,g=this._distances[c],y=s*this.paddedLength+this.padding;for(;g<y&&c<this._distances.length;)g=this._distances[++c];let E=c-1,I=this._distances[E],P=g-I,L=P>0?(y-I)/P:0;return this.points[E].mult(1-L).add(this.points[c].mult(L))}}function wt(w,s){let c=!0;return w==="always"||w!=="never"&&s!=="never"||(c=!1),c}class $e{constructor(s,c,g){let y=this.boxCells=[],E=this.circleCells=[];this.xCellCount=Math.ceil(s/g),this.yCellCount=Math.ceil(c/g);for(let I=0;I<this.xCellCount*this.yCellCount;I++)y.push([]),E.push([]);this.circleKeys=[],this.boxKeys=[],this.bboxes=[],this.circles=[],this.width=s,this.height=c,this.xScale=this.xCellCount/s,this.yScale=this.yCellCount/c,this.boxUid=0,this.circleUid=0}keysLength(){return this.boxKeys.length+this.circleKeys.length}insert(s,c,g,y,E){this._forEachCell(c,g,y,E,this._insertBoxCell,this.boxUid++),this.boxKeys.push(s),this.bboxes.push(c),this.bboxes.push(g),this.bboxes.push(y),this.bboxes.push(E)}insertCircle(s,c,g,y){this._forEachCell(c-y,g-y,c+y,g+y,this._insertCircleCell,this.circleUid++),this.circleKeys.push(s),this.circles.push(c),this.circles.push(g),this.circles.push(y)}_insertBoxCell(s,c,g,y,E,I){this.boxCells[E].push(I)}_insertCircleCell(s,c,g,y,E,I){this.circleCells[E].push(I)}_query(s,c,g,y,E,I,P){if(g<0||s>this.width||y<0||c>this.height)return[];let L=[];if(s<=0&&c<=0&&this.width<=g&&this.height<=y){if(E)return[{key:null,x1:s,y1:c,x2:g,y2:y}];for(let z=0;z<this.boxKeys.length;z++)L.push({key:this.boxKeys[z],x1:this.bboxes[4*z],y1:this.bboxes[4*z+1],x2:this.bboxes[4*z+2],y2:this.bboxes[4*z+3]});for(let z=0;z<this.circleKeys.length;z++){let U=this.circles[3*z],W=this.circles[3*z+1],H=this.circles[3*z+2];L.push({key:this.circleKeys[z],x1:U-H,y1:W-H,x2:U+H,y2:W+H})}}else this._forEachCell(s,c,g,y,this._queryCell,L,{hitTest:E,overlapMode:I,seenUids:{box:{},circle:{}}},P);return L}query(s,c,g,y){return this._query(s,c,g,y,!1,null)}hitTest(s,c,g,y,E,I){return this._query(s,c,g,y,!0,E,I).length>0}hitTestCircle(s,c,g,y,E){let I=s-g,P=s+g,L=c-g,z=c+g;if(P<0||I>this.width||z<0||L>this.height)return!1;let U=[];return this._forEachCell(I,L,P,z,this._queryCellCircle,U,{hitTest:!0,overlapMode:y,circle:{x:s,y:c,radius:g},seenUids:{box:{},circle:{}}},E),U.length>0}_queryCell(s,c,g,y,E,I,P,L){let{seenUids:z,hitTest:U,overlapMode:W}=P,H=this.boxCells[E];if(H!==null){let ae=this.bboxes;for(let be of H)if(!z.box[be]){z.box[be]=!0;let _e=4*be,xe=this.boxKeys[be];if(s<=ae[_e+2]&&c<=ae[_e+3]&&g>=ae[_e+0]&&y>=ae[_e+1]&&(!L||L(xe))&&(!U||!wt(W,xe.overlapMode))&&(I.push({key:xe,x1:ae[_e],y1:ae[_e+1],x2:ae[_e+2],y2:ae[_e+3]}),U))return!0}}let te=this.circleCells[E];if(te!==null){let ae=this.circles;for(let be of te)if(!z.circle[be]){z.circle[be]=!0;let _e=3*be,xe=this.circleKeys[be];if(this._circleAndRectCollide(ae[_e],ae[_e+1],ae[_e+2],s,c,g,y)&&(!L||L(xe))&&(!U||!wt(W,xe.overlapMode))){let Ae=ae[_e],ke=ae[_e+1],Le=ae[_e+2];if(I.push({key:xe,x1:Ae-Le,y1:ke-Le,x2:Ae+Le,y2:ke+Le}),U)return!0}}}return!1}_queryCellCircle(s,c,g,y,E,I,P,L){let{circle:z,seenUids:U,overlapMode:W}=P,H=this.boxCells[E];if(H!==null){let ae=this.bboxes;for(let be of H)if(!U.box[be]){U.box[be]=!0;let _e=4*be,xe=this.boxKeys[be];if(this._circleAndRectCollide(z.x,z.y,z.radius,ae[_e+0],ae[_e+1],ae[_e+2],ae[_e+3])&&(!L||L(xe))&&!wt(W,xe.overlapMode))return I.push(!0),!0}}let te=this.circleCells[E];if(te!==null){let ae=this.circles;for(let be of te)if(!U.circle[be]){U.circle[be]=!0;let _e=3*be,xe=this.circleKeys[be];if(this._circlesCollide(ae[_e],ae[_e+1],ae[_e+2],z.x,z.y,z.radius)&&(!L||L(xe))&&!wt(W,xe.overlapMode))return I.push(!0),!0}}}_forEachCell(s,c,g,y,E,I,P,L){let z=this._convertToXCellCoord(s),U=this._convertToYCellCoord(c),W=this._convertToXCellCoord(g),H=this._convertToYCellCoord(y);for(let te=z;te<=W;te++)for(let ae=U;ae<=H;ae++)if(E.call(this,s,c,g,y,this.xCellCount*ae+te,I,P,L))return}_convertToXCellCoord(s){return Math.max(0,Math.min(this.xCellCount-1,Math.floor(s*this.xScale)))}_convertToYCellCoord(s){return Math.max(0,Math.min(this.yCellCount-1,Math.floor(s*this.yScale)))}_circlesCollide(s,c,g,y,E,I){let P=y-s,L=E-c,z=g+I;return z*z>P*P+L*L}_circleAndRectCollide(s,c,g,y,E,I,P){let L=(I-y)/2,z=Math.abs(s-(y+L));if(z>L+g)return!1;let U=(P-E)/2,W=Math.abs(c-(E+U));if(W>U+g)return!1;if(z<=L||W<=U)return!0;let H=z-L,te=W-U;return H*H+te*te<=g*g}}function Xt(w,s,c){let g=i.K();if(!w){let{vecSouth:W,vecEast:H}=zt(s),te=u();te[0]=H[0],te[1]=H[1],te[2]=W[0],te[3]=W[1],y=te,(U=(I=(E=te)[0])*(z=E[3])-(L=E[2])*(P=E[1]))&&(y[0]=z*(U=1/U),y[1]=-P*U,y[2]=-L*U,y[3]=I*U),g[0]=te[0],g[1]=te[1],g[4]=te[2],g[5]=te[3]}var y,E,I,P,L,z,U;return i.M(g,g,[1/c,1/c,1]),g}function yr(w,s,c,g){if(w){let y=i.K();if(!s){let{vecSouth:E,vecEast:I}=zt(c);y[0]=I[0],y[1]=I[1],y[4]=E[0],y[5]=E[1]}return i.M(y,y,[g,g,1]),y}return c.pixelsToClipSpaceMatrix}function zt(w){let s=Math.cos(w.rollInRadians),c=Math.sin(w.rollInRadians),g=Math.cos(w.pitchInRadians),y=Math.cos(w.bearingInRadians),E=Math.sin(w.bearingInRadians),I=i.ao();I[0]=-y*g*c-E*s,I[1]=-E*g*c+y*s;let P=i.ap(I);P<1e-9?i.aq(I):i.ar(I,I,1/P);let L=i.ao();L[0]=y*g*s-E*c,L[1]=E*g*s+y*c;let z=i.ap(L);return z<1e-9?i.aq(L):i.ar(L,L,1/z),{vecEast:L,vecSouth:I}}function Ke(w,s,c,g){let y;g?(y=[w,s,g(w,s),1],i.at(y,y,c)):(y=[w,s,0,1],Rr(y,y,c));let E=y[3];return{point:new i.P(y[0]/E,y[1]/E),signedDistanceFromCamera:E,isOccluded:!1}}function Tn(w,s){return .5+w/s*.5}function rn(w,s){return w.x>=-s[0]&&w.x<=s[0]&&w.y>=-s[1]&&w.y<=s[1]}function Gn(w,s,c,g,y,E,I,P,L,z,U,W,H){let te=c?w.textSizeData:w.iconSizeData,ae=i.ak(te,s.transform.zoom),be=[256/s.width*2+1,256/s.height*2+1],_e=c?w.text.dynamicLayoutVertexArray:w.icon.dynamicLayoutVertexArray;_e.clear();let xe=w.lineVertexArray,Ae=c?w.text.placedSymbolArray:w.icon.placedSymbolArray,ke=s.transform.width/s.transform.height,Le=!1;for(let Fe=0;Fe<Ae.length;Fe++){let He=Ae.get(Fe);if(He.hidden||He.writingMode===i.al.vertical&&!Le){ln(He.numGlyphs,_e);continue}Le=!1;let Be=new i.P(He.anchorX,He.anchorY),rt={getElevation:H,pitchedLabelPlaneMatrix:g,lineVertexArray:xe,pitchWithMap:E,projectionCache:{projections:{},offsets:{},cachedAnchorPoint:void 0,anyProjectionOccluded:!1},transform:s.transform,tileAnchorPoint:Be,unwrappedTileID:L,width:z,height:U,translation:W},ht=lr(He.anchorX,He.anchorY,rt);if(!rn(ht.point,be)){ln(He.numGlyphs,_e);continue}let lt=Tn(s.transform.cameraToCenterDistance,ht.signedDistanceFromCamera),ut=i.am(te,ae,He),ft=E?ut*s.transform.getPitchedTextCorrection(He.anchorX,He.anchorY,L)/lt:ut*lt,Yt=fr({projectionContext:rt,pitchedLabelPlaneMatrixInverse:y,symbol:He,fontSize:ft,flip:!1,keepUpright:I,glyphOffsetArray:w.glyphOffsetArray,dynamicLayoutVertexArray:_e,aspectRatio:ke,rotateToLine:P});Le=Yt.useVertical,(Yt.notEnoughRoom||Le||Yt.needsFlipping&&fr({projectionContext:rt,pitchedLabelPlaneMatrixInverse:y,symbol:He,fontSize:ft,flip:!0,keepUpright:I,glyphOffsetArray:w.glyphOffsetArray,dynamicLayoutVertexArray:_e,aspectRatio:ke,rotateToLine:P}).notEnoughRoom)&&ln(He.numGlyphs,_e)}c?w.text.dynamicLayoutVertexBuffer.updateData(_e):w.icon.dynamicLayoutVertexBuffer.updateData(_e)}function Qt(w,s,c,g,y,E,I,P){let L=E.glyphStartIndex+E.numGlyphs,z=E.lineStartIndex,U=E.lineStartIndex+E.lineLength,W=s.getoffsetX(E.glyphStartIndex),H=s.getoffsetX(L-1),te=_n(w*W,c,g,y,E.segment,z,U,P,I);if(!te)return null;let ae=_n(w*H,c,g,y,E.segment,z,U,P,I);return ae?P.projectionCache.anyProjectionOccluded?null:{first:te,last:ae}:null}function mt(w,s,c,g){return w===i.al.horizontal&&Math.abs(c.y-s.y)>Math.abs(c.x-s.x)*g?{useVertical:!0}:(w===i.al.vertical?s.y<c.y:s.x>c.x)?{needsFlipping:!0}:null}function fr(w){let{projectionContext:s,pitchedLabelPlaneMatrixInverse:c,symbol:g,fontSize:y,flip:E,keepUpright:I,glyphOffsetArray:P,dynamicLayoutVertexArray:L,aspectRatio:z,rotateToLine:U}=w,W=y/24,H=g.lineOffsetX*W,te=g.lineOffsetY*W,ae;if(g.numGlyphs>1){let be=g.glyphStartIndex+g.numGlyphs,_e=g.lineStartIndex,xe=g.lineStartIndex+g.lineLength,Ae=Qt(W,P,H,te,E,g,U,s);if(!Ae)return{notEnoughRoom:!0};let ke=Yr(Ae.first.point.x,Ae.first.point.y,s,c),Le=Yr(Ae.last.point.x,Ae.last.point.y,s,c);if(I&&!E){let Fe=mt(g.writingMode,ke,Le,z);if(Fe)return Fe}ae=[Ae.first];for(let Fe=g.glyphStartIndex+1;Fe<be-1;Fe++)ae.push(_n(W*P.getoffsetX(Fe),H,te,E,g.segment,_e,xe,s,U));ae.push(Ae.last)}else{if(I&&!E){let _e=en(s.tileAnchorPoint.x,s.tileAnchorPoint.y,s).point,xe=g.lineStartIndex+g.segment+1,Ae=new i.P(s.lineVertexArray.getx(xe),s.lineVertexArray.gety(xe)),ke=en(Ae.x,Ae.y,s),Le=ke.signedDistanceFromCamera>0?ke.point:wr(s.tileAnchorPoint,Ae,_e,1,s),Fe=Yr(_e.x,_e.y,s,c),He=Yr(Le.x,Le.y,s,c),Be=mt(g.writingMode,Fe,He,z);if(Be)return Be}let be=_n(W*P.getoffsetX(g.glyphStartIndex),H,te,E,g.segment,g.lineStartIndex,g.lineStartIndex+g.lineLength,s,U);if(!be||s.projectionCache.anyProjectionOccluded)return{notEnoughRoom:!0};ae=[be]}for(let be of ae)i.as(L,be.point,be.angle);return{}}function wr(w,s,c,g,y){let E=w.add(w.sub(s)._unit()),I=en(E.x,E.y,y).point,P=c.sub(I);return c.add(P._mult(g/P.mag()))}function Vr(w,s,c){let g=s.projectionCache;if(g.projections[w])return g.projections[w];let y=new i.P(s.lineVertexArray.getx(w),s.lineVertexArray.gety(w)),E=en(y.x,y.y,s);if(E.signedDistanceFromCamera>0)return g.projections[w]=E.point,g.anyProjectionOccluded=g.anyProjectionOccluded||E.isOccluded,E.point;let I=w-c.direction;return wr(c.distanceFromAnchor===0?s.tileAnchorPoint:new i.P(s.lineVertexArray.getx(I),s.lineVertexArray.gety(I)),y,c.previousVertex,c.absOffsetX-c.distanceFromAnchor+1,s)}function en(w,s,c){let g=w+c.translation[0],y=s+c.translation[1],E;return c.pitchWithMap?(E=Ke(g,y,c.pitchedLabelPlaneMatrix,c.getElevation),E.isOccluded=!1):(E=c.transform.projectTileCoordinates(g,y,c.unwrappedTileID,c.getElevation),E.point.x=(.5*E.point.x+.5)*c.width,E.point.y=(.5*-E.point.y+.5)*c.height),E}function Yr(w,s,c,g){if(c.pitchWithMap){let y=[w,s,0,1];return i.at(y,y,g),c.transform.projectTileCoordinates(y[0]/y[3],y[1]/y[3],c.unwrappedTileID,c.getElevation).point}return{x:w/c.width*2-1,y:s/c.height*2-1}}function lr(w,s,c){return c.transform.projectTileCoordinates(w,s,c.unwrappedTileID,c.getElevation)}function In(w,s,c){return w._unit()._perp()._mult(s*c)}function sn(w,s,c,g,y,E,I,P,L){if(P.projectionCache.offsets[w])return P.projectionCache.offsets[w];let z=c.add(s);if(w+L.direction<g||w+L.direction>=y)return P.projectionCache.offsets[w]=z,z;let U=Vr(w+L.direction,P,L),W=In(U.sub(c),I,L.direction),H=c.add(W),te=U.add(W);return P.projectionCache.offsets[w]=i.au(E,z,H,te)||z,P.projectionCache.offsets[w]}function _n(w,s,c,g,y,E,I,P,L){let z=g?w-s:w+s,U=z>0?1:-1,W=0;g&&(U*=-1,W=Math.PI),U<0&&(W+=Math.PI);let H,te=U>0?E+y:E+y+1;P.projectionCache.cachedAnchorPoint?H=P.projectionCache.cachedAnchorPoint:(H=en(P.tileAnchorPoint.x,P.tileAnchorPoint.y,P).point,P.projectionCache.cachedAnchorPoint=H);let ae,be,_e=H,xe=H,Ae=0,ke=0,Le=Math.abs(z),Fe=[],He;for(;Ae+ke<=Le;){if(te+=U,te<E||te>=I)return null;Ae+=ke,xe=_e,be=ae;let ht={absOffsetX:Le,direction:U,distanceFromAnchor:Ae,previousVertex:xe};if(_e=Vr(te,P,ht),c===0)Fe.push(xe),He=_e.sub(xe);else{let lt,ut=_e.sub(xe);lt=ut.mag()===0?In(Vr(te+U,P,ht).sub(_e),c,U):In(ut,c,U),be||(be=xe.add(lt)),ae=sn(te,lt,_e,E,I,be,c,P,ht),Fe.push(be),He=ae.sub(be)}ke=He.mag()}let Be=He._mult((Le-Ae)/ke)._add(be||xe),rt=W+Math.atan2(_e.y-xe.y,_e.x-xe.x);return Fe.push(Be),{point:Be,angle:L?rt:0,path:Fe}}let tn=new Float32Array([-1/0,-1/0,0,-1/0,-1/0,0,-1/0,-1/0,0,-1/0,-1/0,0]);function ln(w,s){for(let c=0;c<w;c++){let g=s.length;s.resize(g+4),s.float32.set(tn,3*g)}}function Rr(w,s,c){let g=s[0],y=s[1];return w[0]=c[0]*g+c[4]*y+c[12],w[1]=c[1]*g+c[5]*y+c[13],w[3]=c[3]*g+c[7]*y+c[15],w}let Ur=100;class Kr{constructor(s,c=new $e(s.width+200,s.height+200,25),g=new $e(s.width+200,s.height+200,25)){this.transform=s,this.grid=c,this.ignoredGrid=g,this.pitchFactor=Math.cos(s.pitch*Math.PI/180)*s.cameraToCenterDistance,this.screenRightBoundary=s.width+Ur,this.screenBottomBoundary=s.height+Ur,this.gridRightBoundary=s.width+200,this.gridBottomBoundary=s.height+200,this.perspectiveRatioCutoff=.6}placeCollisionBox(s,c,g,y,E,I,P,L,z,U,W,H){let te=this.projectAndGetPerspectiveRatio(s.anchorPointX+L[0],s.anchorPointY+L[1],E,U,H),ae=g*te.perspectiveRatio,be;if(I||P)be=this._projectCollisionBox(s,ae,y,E,I,P,L,te,U,W,H);else{let He=te.x+(W?W.x*ae:0),Be=te.y+(W?W.y*ae:0);be={allPointsOccluded:!1,box:[He+s.x1*ae,Be+s.y1*ae,He+s.x2*ae,Be+s.y2*ae]}}let[_e,xe,Ae,ke]=be.box,Le=I?be.allPointsOccluded:te.isOccluded,Fe=Le;return Fe||(Fe=te.perspectiveRatio<this.perspectiveRatioCutoff),Fe||(Fe=!this.isInsideGrid(_e,xe,Ae,ke)),Fe||c!=="always"&&this.grid.hitTest(_e,xe,Ae,ke,c,z)?{box:[_e,xe,Ae,ke],placeable:!1,offscreen:!1,occluded:Le}:{box:[_e,xe,Ae,ke],placeable:!0,offscreen:this.isOffscreen(_e,xe,Ae,ke),occluded:Le}}placeCollisionCircles(s,c,g,y,E,I,P,L,z,U,W,H,te,ae){let be=[],_e=new i.P(c.anchorX,c.anchorY),xe=this.getPerspectiveRatio(_e.x,_e.y,I,ae),Ae=(z?E*this.transform.getPitchedTextCorrection(c.anchorX,c.anchorY,I)/xe:E*xe)/i.ay,ke={getElevation:ae,pitchedLabelPlaneMatrix:P,lineVertexArray:g,pitchWithMap:z,projectionCache:{projections:{},offsets:{},cachedAnchorPoint:void 0,anyProjectionOccluded:!1},transform:this.transform,tileAnchorPoint:_e,unwrappedTileID:I,width:this.transform.width,height:this.transform.height,translation:te},Le=Qt(Ae,y,c.lineOffsetX*Ae,c.lineOffsetY*Ae,!1,c,!1,ke),Fe=!1,He=!1,Be=!0;if(Le){let rt=.5*W*xe+H,ht=new i.P(-100,-100),lt=new i.P(this.screenRightBoundary,this.screenBottomBoundary),ut=new it,ft=Le.first,Yt=Le.last,Ht=[];for(let On=ft.path.length-1;On>=1;On--)Ht.push(ft.path[On]);for(let On=1;On<Yt.path.length;On++)Ht.push(Yt.path[On]);let Ct=2.5*rt;if(z){let On=this.projectPathToScreenSpace(Ht,ke);Ht=On.some(ro=>ro.signedDistanceFromCamera<=0)?[]:On.map(ro=>ro.point)}let br=[];if(Ht.length>0){let On=Ht[0].clone(),ro=Ht[0].clone();for(let ji=1;ji<Ht.length;ji++)On.x=Math.min(On.x,Ht[ji].x),On.y=Math.min(On.y,Ht[ji].y),ro.x=Math.max(ro.x,Ht[ji].x),ro.y=Math.max(ro.y,Ht[ji].y);br=On.x>=ht.x&&ro.x<=lt.x&&On.y>=ht.y&&ro.y<=lt.y?[Ht]:ro.x<ht.x||On.x>lt.x||ro.y<ht.y||On.y>lt.y?[]:i.av([Ht],ht.x,ht.y,lt.x,lt.y)}for(let On of br){ut.reset(On,.25*rt);let ro=0;ro=ut.length<=.5*rt?1:Math.ceil(ut.paddedLength/Ct)+1;for(let ji=0;ji<ro;ji++){let ti=ji/Math.max(ro-1,1),qi=ut.lerp(ti),zi=qi.x+Ur,ii=qi.y+Ur;be.push(zi,ii,rt,0);let Eo=zi-rt,za=ii-rt,os=zi+rt,ws=ii+rt;if(Be=Be&&this.isOffscreen(Eo,za,os,ws),He=He||this.isInsideGrid(Eo,za,os,ws),s!=="always"&&this.grid.hitTestCircle(zi,ii,rt,s,U)&&(Fe=!0,!L))return{circles:[],offscreen:!1,collisionDetected:Fe}}}}return{circles:!L&&Fe||!He||xe<this.perspectiveRatioCutoff?[]:be,offscreen:Be,collisionDetected:Fe}}projectPathToScreenSpace(s,c){let g=function(y,E){let I=i.K();return i.an(I,E.pitchedLabelPlaneMatrix),y.map(P=>{let L=Ke(P.x,P.y,I,E.getElevation),z=E.transform.projectTileCoordinates(L.point.x,L.point.y,E.unwrappedTileID,E.getElevation);return z.point.x=(.5*z.point.x+.5)*E.width,z.point.y=(.5*-z.point.y+.5)*E.height,z})}(s,c);return function(y){let E=0,I=0,P=0,L=0;for(let z=0;z<y.length;z++)y[z].isOccluded?(P=z+1,L=0):(L++,L>I&&(I=L,E=P));return y.slice(E,E+I)}(g)}queryRenderedSymbols(s){if(s.length===0||this.grid.keysLength()===0&&this.ignoredGrid.keysLength()===0)return{};let c=[],g=1/0,y=1/0,E=-1/0,I=-1/0;for(let U of s){let W=new i.P(U.x+Ur,U.y+Ur);g=Math.min(g,W.x),y=Math.min(y,W.y),E=Math.max(E,W.x),I=Math.max(I,W.y),c.push(W)}let P=this.grid.query(g,y,E,I).concat(this.ignoredGrid.query(g,y,E,I)),L={},z={};for(let U of P){let W=U.key;if(L[W.bucketInstanceId]===void 0&&(L[W.bucketInstanceId]={}),L[W.bucketInstanceId][W.featureIndex])continue;let H=[new i.P(U.x1,U.y1),new i.P(U.x2,U.y1),new i.P(U.x2,U.y2),new i.P(U.x1,U.y2)];i.aw(c,H)&&(L[W.bucketInstanceId][W.featureIndex]=!0,z[W.bucketInstanceId]===void 0&&(z[W.bucketInstanceId]=[]),z[W.bucketInstanceId].push(W.featureIndex))}return z}insertCollisionBox(s,c,g,y,E,I){(g?this.ignoredGrid:this.grid).insert({bucketInstanceId:y,featureIndex:E,collisionGroupID:I,overlapMode:c},s[0],s[1],s[2],s[3])}insertCollisionCircles(s,c,g,y,E,I){let P=g?this.ignoredGrid:this.grid,L={bucketInstanceId:y,featureIndex:E,collisionGroupID:I,overlapMode:c};for(let z=0;z<s.length;z+=4)P.insertCircle(L,s[z],s[z+1],s[z+2])}projectAndGetPerspectiveRatio(s,c,g,y,E){if(E){let I;y?(I=[s,c,y(s,c),1],i.at(I,I,E)):(I=[s,c,0,1],Rr(I,I,E));let P=I[3];return{x:(I[0]/P+1)/2*this.transform.width+Ur,y:(-I[1]/P+1)/2*this.transform.height+Ur,perspectiveRatio:.5+this.transform.cameraToCenterDistance/P*.5,isOccluded:!1,signedDistanceFromCamera:P}}{let I=this.transform.projectTileCoordinates(s,c,g,y);return{x:(I.point.x+1)/2*this.transform.width+Ur,y:(1-I.point.y)/2*this.transform.height+Ur,perspectiveRatio:.5+this.transform.cameraToCenterDistance/I.signedDistanceFromCamera*.5,isOccluded:I.isOccluded,signedDistanceFromCamera:I.signedDistanceFromCamera}}}getPerspectiveRatio(s,c,g,y){let E=this.transform.projectTileCoordinates(s,c,g,y);return .5+this.transform.cameraToCenterDistance/E.signedDistanceFromCamera*.5}isOffscreen(s,c,g,y){return g<Ur||s>=this.screenRightBoundary||y<Ur||c>this.screenBottomBoundary}isInsideGrid(s,c,g,y){return g>=0&&s<this.gridRightBoundary&&y>=0&&c<this.gridBottomBoundary}getViewportMatrix(){let s=i.ad([]);return i.L(s,s,[-100,-100,0]),s}_projectCollisionBox(s,c,g,y,E,I,P,L,z,U,W){let H=1,te=0,ae=0,be=1,_e=s.anchorPointX+P[0],xe=s.anchorPointY+P[1];if(I&&!E){let Ht=this.projectAndGetPerspectiveRatio(_e+1,xe,y,z,W),Ct=Ht.x-L.x,br=Math.atan((Ht.y-L.y)/Ct)+(Ct<0?Math.PI:0),On=Math.sin(br),ro=Math.cos(br);H=ro,te=On,ae=-On,be=ro}else if(!I&&E){let Ht=zt(this.transform);H=Ht.vecEast[0],te=Ht.vecEast[1],ae=Ht.vecSouth[0],be=Ht.vecSouth[1]}let Ae=L.x,ke=L.y,Le=c;E&&(Ae=_e,ke=xe,Le=Math.pow(2,-(this.transform.zoom-g.overscaledZ)),Le*=this.transform.getPitchedTextCorrection(_e,xe,y),U||(Le*=i.ae(.5+L.signedDistanceFromCamera/this.transform.cameraToCenterDistance*.5,0,4))),U&&(Ae+=H*U.x*Le+ae*U.y*Le,ke+=te*U.x*Le+be*U.y*Le);let Fe=s.x1*Le,He=s.x2*Le,Be=(Fe+He)/2,rt=s.y1*Le,ht=s.y2*Le,lt=(rt+ht)/2,ut=[{offsetX:Fe,offsetY:rt},{offsetX:Be,offsetY:rt},{offsetX:He,offsetY:rt},{offsetX:He,offsetY:lt},{offsetX:He,offsetY:ht},{offsetX:Be,offsetY:ht},{offsetX:Fe,offsetY:ht},{offsetX:Fe,offsetY:lt}],ft=[];for(let{offsetX:Ht,offsetY:Ct}of ut)ft.push(new i.P(Ae+H*Ht+ae*Ct,ke+te*Ht+be*Ct));let Yt=!1;if(E){let Ht=ft.map(Ct=>this.projectAndGetPerspectiveRatio(Ct.x,Ct.y,y,z,W));Yt=Ht.some(Ct=>!Ct.isOccluded),ft=Ht.map(Ct=>new i.P(Ct.x,Ct.y))}else Yt=!0;return{box:i.ax(ft),allPointsOccluded:!Yt}}}class Zr{constructor(s,c,g,y){this.opacity=s?Math.max(0,Math.min(1,s.opacity+(s.placed?c:-c))):y&&g?1:0,this.placed=g}isHidden(){return this.opacity===0&&!this.placed}}class Nt{constructor(s,c,g,y,E){this.text=new Zr(s?s.text:null,c,g,E),this.icon=new Zr(s?s.icon:null,c,y,E)}isHidden(){return this.text.isHidden()&&this.icon.isHidden()}}class Zt{constructor(s,c,g){this.text=s,this.icon=c,this.skipFade=g}}class Ii{constructor(s,c,g,y,E){this.bucketInstanceId=s,this.featureIndex=c,this.sourceLayerIndex=g,this.bucketIndex=y,this.tileID=E}}class Zo{constructor(s){this.crossSourceCollisions=s,this.maxGroupID=0,this.collisionGroups={}}get(s){if(this.crossSourceCollisions)return{ID:0,predicate:null};if(!this.collisionGroups[s]){let c=++this.maxGroupID;this.collisionGroups[s]={ID:c,predicate:g=>g.collisionGroupID===c}}return this.collisionGroups[s]}}function io(w,s,c,g,y){let{horizontalAlign:E,verticalAlign:I}=i.aE(w);return new i.P(-(E-.5)*s+g[0]*y,-(I-.5)*c+g[1]*y)}class qo{constructor(s,c,g,y,E){this.transform=s.clone(),this.terrain=c,this.collisionIndex=new Kr(this.transform),this.placements={},this.opacities={},this.variableOffsets={},this.stale=!1,this.commitTime=0,this.fadeDuration=g,this.retainedQueryData={},this.collisionGroups=new Zo(y),this.collisionCircleArrays={},this.collisionBoxArrays=new Map,this.prevPlacement=E,E&&(E.prevPlacement=void 0),this.placedOrientations={}}_getTerrainElevationFunc(s){let c=this.terrain;return c?(g,y)=>c.getElevation(s,g,y):null}getBucketParts(s,c,g,y){let E=g.getBucket(c),I=g.latestFeatureIndex;if(!E||!I||c.id!==E.layerIds[0])return;let P=g.collisionBoxArray,L=E.layers[0].layout,z=E.layers[0].paint,U=Math.pow(2,this.transform.zoom-g.tileID.overscaledZ),W=g.tileSize/i.Z,H=g.tileID.toUnwrapped(),te=L.get("text-rotation-alignment")==="map",ae=i.az(g,1,this.transform.zoom),be=i.aA(this.collisionIndex.transform,g,z.get("text-translate"),z.get("text-translate-anchor")),_e=i.aA(this.collisionIndex.transform,g,z.get("icon-translate"),z.get("icon-translate-anchor")),xe=Xt(te,this.transform,ae);this.retainedQueryData[E.bucketInstanceId]=new Ii(E.bucketInstanceId,I,E.sourceLayerIndex,E.index,g.tileID);let Ae={bucket:E,layout:L,translationText:be,translationIcon:_e,unwrappedTileID:H,pitchedLabelPlaneMatrix:xe,scale:U,textPixelRatio:W,holdingForFade:g.holdingForFade(),collisionBoxArray:P,partiallyEvaluatedTextSize:i.ak(E.textSizeData,this.transform.zoom),collisionGroup:this.collisionGroups.get(E.sourceID)};if(y)for(let ke of E.sortKeyRanges){let{sortKey:Le,symbolInstanceStart:Fe,symbolInstanceEnd:He}=ke;s.push({sortKey:Le,symbolInstanceStart:Fe,symbolInstanceEnd:He,parameters:Ae})}else s.push({symbolInstanceStart:0,symbolInstanceEnd:E.symbolInstances.length,parameters:Ae})}attemptAnchorPlacement(s,c,g,y,E,I,P,L,z,U,W,H,te,ae,be,_e,xe,Ae,ke,Le){let Fe=i.aB[s.textAnchor],He=[s.textOffset0,s.textOffset1],Be=io(Fe,g,y,He,E),rt=this.collisionIndex.placeCollisionBox(c,H,L,z,U,P,I,_e,W.predicate,ke,Be,Le);if((!Ae||this.collisionIndex.placeCollisionBox(Ae,H,L,z,U,P,I,xe,W.predicate,ke,Be,Le).placeable)&&rt.placeable){let ht;if(this.prevPlacement&&this.prevPlacement.variableOffsets[te.crossTileID]&&this.prevPlacement.placements[te.crossTileID]&&this.prevPlacement.placements[te.crossTileID].text&&(ht=this.prevPlacement.variableOffsets[te.crossTileID].anchor),te.crossTileID===0)throw new Error("symbolInstance.crossTileID can't be 0");return this.variableOffsets[te.crossTileID]={textOffset:He,width:g,height:y,anchor:Fe,textBoxScale:E,prevAnchor:ht},this.markUsedJustification(ae,Fe,te,be),ae.allowVerticalPlacement&&(this.markUsedOrientation(ae,be,te),this.placedOrientations[te.crossTileID]=be),{shift:Be,placedGlyphBoxes:rt}}}placeLayerBucketPart(s,c,g){let{bucket:y,layout:E,translationText:I,translationIcon:P,unwrappedTileID:L,pitchedLabelPlaneMatrix:z,textPixelRatio:U,holdingForFade:W,collisionBoxArray:H,partiallyEvaluatedTextSize:te,collisionGroup:ae}=s.parameters,be=E.get("text-optional"),_e=E.get("icon-optional"),xe=i.aC(E,"text-overlap","text-allow-overlap"),Ae=xe==="always",ke=i.aC(E,"icon-overlap","icon-allow-overlap"),Le=ke==="always",Fe=E.get("text-rotation-alignment")==="map",He=E.get("text-pitch-alignment")==="map",Be=E.get("icon-text-fit")!=="none",rt=E.get("symbol-z-order")==="viewport-y",ht=Ae&&(Le||!y.hasIconData()||_e),lt=Le&&(Ae||!y.hasTextData()||be);!y.collisionArrays&&H&&y.deserializeCollisionBoxes(H);let ut=this.retainedQueryData[y.bucketInstanceId].tileID,ft=this._getTerrainElevationFunc(ut),Yt=this.transform.getFastPathSimpleProjectionMatrix(ut),Ht=(Ct,br,On)=>{var ro,ji;if(c[Ct.crossTileID])return;if(W)return void(this.placements[Ct.crossTileID]=new Zt(!1,!1,!1));let ti=!1,qi=!1,zi=!0,ii=null,Eo={box:null,placeable:!1,offscreen:null,occluded:!1},za={placeable:!1},os=null,ws=null,So=null,Xd=0,Ip=0,Qd=0;br.textFeatureIndex?Xd=br.textFeatureIndex:Ct.useRuntimeCollisionCircles&&(Xd=Ct.featureIndex),br.verticalTextFeatureIndex&&(Ip=br.verticalTextFeatureIndex);let Lm=br.textBox;if(Lm){let Su=Sa=>{let Ta=i.al.horizontal;if(y.allowVerticalPlacement&&!Sa&&this.prevPlacement){let pl=this.prevPlacement.placedOrientations[Ct.crossTileID];pl&&(this.placedOrientations[Ct.crossTileID]=pl,Ta=pl,this.markUsedOrientation(y,Ta,Ct))}return Ta},eh=(Sa,Ta)=>{if(y.allowVerticalPlacement&&Ct.numVerticalGlyphVertices>0&&br.verticalTextBox){for(let pl of y.writingModes)if(pl===i.al.vertical?(Eo=Ta(),za=Eo):Eo=Sa(),Eo&&Eo.placeable)break}else Eo=Sa()},Ff=Ct.textAnchorOffsetStartIndex,th=Ct.textAnchorOffsetEndIndex;if(th===Ff){let Sa=(Ta,pl)=>{let vi=this.collisionIndex.placeCollisionBox(Ta,xe,U,ut,L,He,Fe,I,ae.predicate,ft,void 0,Yt);return vi&&vi.placeable&&(this.markUsedOrientation(y,pl,Ct),this.placedOrientations[Ct.crossTileID]=pl),vi};eh(()=>Sa(Lm,i.al.horizontal),()=>{let Ta=br.verticalTextBox;return y.allowVerticalPlacement&&Ct.numVerticalGlyphVertices>0&&Ta?Sa(Ta,i.al.vertical):{box:null,offscreen:null}}),Su(Eo&&Eo.placeable)}else{let Sa=i.aB[(ji=(ro=this.prevPlacement)===null||ro===void 0?void 0:ro.variableOffsets[Ct.crossTileID])===null||ji===void 0?void 0:ji.anchor],Ta=(vi,Ix,VN)=>{let GN=vi.x2-vi.x1,LU=vi.y2-vi.y1,ZT=Ct.textBoxScale,g1=Be&&ke==="never"?Ix:null,oc=null,Mp=xe==="never"?1:2,ic="never";Sa&&Mp++;for(let Uf=0;Uf<Mp;Uf++){for(let Mx=Ff;Mx<th;Mx++){let rh=y.textAnchorOffsets.get(Mx);if(Sa&&rh.textAnchor!==Sa)continue;let YT=this.attemptAnchorPlacement(rh,vi,GN,LU,ZT,Fe,He,U,ut,L,ae,ic,Ct,y,VN,I,P,g1,ft);if(YT&&(oc=YT.placedGlyphBoxes,oc&&oc.placeable))return ti=!0,ii=YT.shift,oc}Sa?Sa=null:ic=xe}return g&&!oc&&(oc={box:this.collisionIndex.placeCollisionBox(Lm,"always",U,ut,L,He,Fe,I,ae.predicate,ft,void 0,Yt).box,offscreen:!1,placeable:!1,occluded:!1}),oc};eh(()=>Ta(Lm,br.iconBox,i.al.horizontal),()=>{let vi=br.verticalTextBox;return y.allowVerticalPlacement&&(!Eo||!Eo.placeable)&&Ct.numVerticalGlyphVertices>0&&vi?Ta(vi,br.verticalIconBox,i.al.vertical):{box:null,occluded:!0,offscreen:null}}),Eo&&(ti=Eo.placeable,zi=Eo.offscreen);let pl=Su(Eo&&Eo.placeable);if(!ti&&this.prevPlacement){let vi=this.prevPlacement.variableOffsets[Ct.crossTileID];vi&&(this.variableOffsets[Ct.crossTileID]=vi,this.markUsedJustification(y,vi.anchor,Ct,pl))}}}if(os=Eo,ti=os&&os.placeable,zi=os&&os.offscreen,Ct.useRuntimeCollisionCircles){let Su=y.text.placedSymbolArray.get(Ct.centerJustifiedTextSymbolIndex),eh=i.am(y.textSizeData,te,Su),Ff=E.get("text-padding");ws=this.collisionIndex.placeCollisionCircles(xe,Su,y.lineVertexArray,y.glyphOffsetArray,eh,L,z,g,He,ae.predicate,Ct.collisionCircleDiameter,Ff,I,ft),ws.circles.length&&ws.collisionDetected&&!g&&i.w("Collisions detected, but collision boxes are not shown"),ti=Ae||ws.circles.length>0&&!ws.collisionDetected,zi=zi&&ws.offscreen}if(br.iconFeatureIndex&&(Qd=br.iconFeatureIndex),br.iconBox){let Su=eh=>this.collisionIndex.placeCollisionBox(eh,ke,U,ut,L,He,Fe,P,ae.predicate,ft,Be&&ii?ii:void 0,Yt);za&&za.placeable&&br.verticalIconBox?(So=Su(br.verticalIconBox),qi=So.placeable):(So=Su(br.iconBox),qi=So.placeable),zi=zi&&So.offscreen}let m1=be||Ct.numHorizontalGlyphVertices===0&&Ct.numVerticalGlyphVertices===0,Jd=_e||Ct.numIconVertices===0;m1||Jd?Jd?m1||(qi=qi&&ti):ti=qi&&ti:qi=ti=qi&&ti;let km=qi&&So.placeable;if(ti&&os.placeable&&this.collisionIndex.insertCollisionBox(os.box,xe,E.get("text-ignore-placement"),y.bucketInstanceId,za&&za.placeable&&Ip?Ip:Xd,ae.ID),km&&this.collisionIndex.insertCollisionBox(So.box,ke,E.get("icon-ignore-placement"),y.bucketInstanceId,Qd,ae.ID),ws&&ti&&this.collisionIndex.insertCollisionCircles(ws.circles,xe,E.get("text-ignore-placement"),y.bucketInstanceId,Xd,ae.ID),g&&this.storeCollisionData(y.bucketInstanceId,On,br,os,So,ws),Ct.crossTileID===0)throw new Error("symbolInstance.crossTileID can't be 0");if(y.bucketInstanceId===0)throw new Error("bucket.bucketInstanceId can't be 0");this.placements[Ct.crossTileID]=new Zt((ti||ht)&&!(os!=null&&os.occluded),(qi||lt)&&!(So!=null&&So.occluded),zi||y.justReloaded),c[Ct.crossTileID]=!0};if(rt){if(s.symbolInstanceStart!==0)throw new Error("bucket.bucketInstanceId should be 0");let Ct=y.getSortedSymbolIndexes(-this.transform.bearingInRadians);for(let br=Ct.length-1;br>=0;--br){let On=Ct[br];Ht(y.symbolInstances.get(On),y.collisionArrays[On],On)}}else for(let Ct=s.symbolInstanceStart;Ct<s.symbolInstanceEnd;Ct++)Ht(y.symbolInstances.get(Ct),y.collisionArrays[Ct],Ct);y.justReloaded=!1}storeCollisionData(s,c,g,y,E,I){if(g.textBox||g.iconBox){let P,L;this.collisionBoxArrays.has(s)?P=this.collisionBoxArrays.get(s):(P=new Map,this.collisionBoxArrays.set(s,P)),P.has(c)?L=P.get(c):(L={text:null,icon:null},P.set(c,L)),g.textBox&&(L.text=y.box),g.iconBox&&(L.icon=E.box)}if(I){let P=this.collisionCircleArrays[s];P===void 0&&(P=this.collisionCircleArrays[s]=[]);for(let L=0;L<I.circles.length;L+=4)P.push(I.circles[L+0]-Ur),P.push(I.circles[L+1]-Ur),P.push(I.circles[L+2]),P.push(I.collisionDetected?1:0)}}markUsedJustification(s,c,g,y){let E;E=y===i.al.vertical?g.verticalPlacedTextSymbolIndex:{left:g.leftJustifiedTextSymbolIndex,center:g.centerJustifiedTextSymbolIndex,right:g.rightJustifiedTextSymbolIndex}[i.aD(c)];let I=[g.leftJustifiedTextSymbolIndex,g.centerJustifiedTextSymbolIndex,g.rightJustifiedTextSymbolIndex,g.verticalPlacedTextSymbolIndex];for(let P of I)P>=0&&(s.text.placedSymbolArray.get(P).crossTileID=E>=0&&P!==E?0:g.crossTileID)}markUsedOrientation(s,c,g){let y=c===i.al.horizontal||c===i.al.horizontalOnly?c:0,E=c===i.al.vertical?c:0,I=[g.leftJustifiedTextSymbolIndex,g.centerJustifiedTextSymbolIndex,g.rightJustifiedTextSymbolIndex];for(let P of I)s.text.placedSymbolArray.get(P).placedOrientation=y;g.verticalPlacedTextSymbolIndex&&(s.text.placedSymbolArray.get(g.verticalPlacedTextSymbolIndex).placedOrientation=E)}commit(s){this.commitTime=s,this.zoomAtLastRecencyCheck=this.transform.zoom;let c=this.prevPlacement,g=!1;this.prevZoomAdjustment=c?c.zoomAdjustment(this.transform.zoom):0;let y=c?c.symbolFadeChange(s):1,E=c?c.opacities:{},I=c?c.variableOffsets:{},P=c?c.placedOrientations:{};for(let L in this.placements){let z=this.placements[L],U=E[L];U?(this.opacities[L]=new Nt(U,y,z.text,z.icon),g=g||z.text!==U.text.placed||z.icon!==U.icon.placed):(this.opacities[L]=new Nt(null,y,z.text,z.icon,z.skipFade),g=g||z.text||z.icon)}for(let L in E){let z=E[L];if(!this.opacities[L]){let U=new Nt(z,y,!1,!1);U.isHidden()||(this.opacities[L]=U,g=g||z.text.placed||z.icon.placed)}}for(let L in I)this.variableOffsets[L]||!this.opacities[L]||this.opacities[L].isHidden()||(this.variableOffsets[L]=I[L]);for(let L in P)this.placedOrientations[L]||!this.opacities[L]||this.opacities[L].isHidden()||(this.placedOrientations[L]=P[L]);if(c&&c.lastPlacementChangeTime===void 0)throw new Error("Last placement time for previous placement is not defined");g?this.lastPlacementChangeTime=s:typeof this.lastPlacementChangeTime!="number"&&(this.lastPlacementChangeTime=c?c.lastPlacementChangeTime:s)}updateLayerOpacities(s,c){let g={};for(let y of c){let E=y.getBucket(s);E&&y.latestFeatureIndex&&s.id===E.layerIds[0]&&this.updateBucketOpacities(E,y.tileID,g,y.collisionBoxArray)}}updateBucketOpacities(s,c,g,y){s.hasTextData()&&(s.text.opacityVertexArray.clear(),s.text.hasVisibleVertices=!1),s.hasIconData()&&(s.icon.opacityVertexArray.clear(),s.icon.hasVisibleVertices=!1),s.hasIconCollisionBoxData()&&s.iconCollisionBox.collisionVertexArray.clear(),s.hasTextCollisionBoxData()&&s.textCollisionBox.collisionVertexArray.clear();let E=s.layers[0],I=E.layout,P=new Nt(null,0,!1,!1,!0),L=I.get("text-allow-overlap"),z=I.get("icon-allow-overlap"),U=E._unevaluatedLayout.hasValue("text-variable-anchor")||E._unevaluatedLayout.hasValue("text-variable-anchor-offset"),W=I.get("text-rotation-alignment")==="map",H=I.get("text-pitch-alignment")==="map",te=I.get("icon-text-fit")!=="none",ae=new Nt(null,0,L&&(z||!s.hasIconData()||I.get("icon-optional")),z&&(L||!s.hasTextData()||I.get("text-optional")),!0);!s.collisionArrays&&y&&(s.hasIconCollisionBoxData()||s.hasTextCollisionBoxData())&&s.deserializeCollisionBoxes(y);let be=(xe,Ae,ke)=>{for(let Le=0;Le<Ae/4;Le++)xe.opacityVertexArray.emplaceBack(ke);xe.hasVisibleVertices=xe.hasVisibleVertices||ke!==Xr},_e=this.collisionBoxArrays.get(s.bucketInstanceId);for(let xe=0;xe<s.symbolInstances.length;xe++){let Ae=s.symbolInstances.get(xe),{numHorizontalGlyphVertices:ke,numVerticalGlyphVertices:Le,crossTileID:Fe}=Ae,He=this.opacities[Fe];g[Fe]?He=P:He||(He=ae,this.opacities[Fe]=He),g[Fe]=!0;let Be=Ae.numIconVertices>0,rt=this.placedOrientations[Ae.crossTileID],ht=rt===i.al.vertical,lt=rt===i.al.horizontal||rt===i.al.horizontalOnly;if(ke>0||Le>0){let ft=hn(He.text);be(s.text,ke,ht?Xr:ft),be(s.text,Le,lt?Xr:ft);let Yt=He.text.isHidden();[Ae.rightJustifiedTextSymbolIndex,Ae.centerJustifiedTextSymbolIndex,Ae.leftJustifiedTextSymbolIndex].forEach(br=>{br>=0&&(s.text.placedSymbolArray.get(br).hidden=Yt||ht?1:0)}),Ae.verticalPlacedTextSymbolIndex>=0&&(s.text.placedSymbolArray.get(Ae.verticalPlacedTextSymbolIndex).hidden=Yt||lt?1:0);let Ht=this.variableOffsets[Ae.crossTileID];Ht&&this.markUsedJustification(s,Ht.anchor,Ae,rt);let Ct=this.placedOrientations[Ae.crossTileID];Ct&&(this.markUsedJustification(s,"left",Ae,Ct),this.markUsedOrientation(s,Ct,Ae))}if(Be){let ft=hn(He.icon),Yt=!(te&&Ae.verticalPlacedIconSymbolIndex&&ht);Ae.placedIconSymbolIndex>=0&&(be(s.icon,Ae.numIconVertices,Yt?ft:Xr),s.icon.placedSymbolArray.get(Ae.placedIconSymbolIndex).hidden=He.icon.isHidden()),Ae.verticalPlacedIconSymbolIndex>=0&&(be(s.icon,Ae.numVerticalIconVertices,Yt?Xr:ft),s.icon.placedSymbolArray.get(Ae.verticalPlacedIconSymbolIndex).hidden=He.icon.isHidden())}let ut=_e&&_e.has(xe)?_e.get(xe):{text:null,icon:null};if(s.hasIconCollisionBoxData()||s.hasTextCollisionBoxData()){let ft=s.collisionArrays[xe];if(ft){let Yt=new i.P(0,0);if(ft.textBox||ft.verticalTextBox){let Ht=!0;if(U){let Ct=this.variableOffsets[Fe];Ct?(Yt=io(Ct.anchor,Ct.width,Ct.height,Ct.textOffset,Ct.textBoxScale),W&&Yt._rotate(H?-this.transform.bearingInRadians:this.transform.bearingInRadians)):Ht=!1}if(ft.textBox||ft.verticalTextBox){let Ct;ft.textBox&&(Ct=ht),ft.verticalTextBox&&(Ct=lt),Hl(s.textCollisionBox.collisionVertexArray,He.text.placed,!Ht||Ct,ut.text,Yt.x,Yt.y)}}if(ft.iconBox||ft.verticalIconBox){let Ht=!!(!lt&&ft.verticalIconBox),Ct;ft.iconBox&&(Ct=Ht),ft.verticalIconBox&&(Ct=!Ht),Hl(s.iconCollisionBox.collisionVertexArray,He.icon.placed,Ct,ut.icon,te?Yt.x:0,te?Yt.y:0)}}}}if(s.sortFeatures(-this.transform.bearingInRadians),this.retainedQueryData[s.bucketInstanceId]&&(this.retainedQueryData[s.bucketInstanceId].featureSortOrder=s.featureSortOrder),s.hasTextData()&&s.text.opacityVertexBuffer&&s.text.opacityVertexBuffer.updateData(s.text.opacityVertexArray),s.hasIconData()&&s.icon.opacityVertexBuffer&&s.icon.opacityVertexBuffer.updateData(s.icon.opacityVertexArray),s.hasIconCollisionBoxData()&&s.iconCollisionBox.collisionVertexBuffer&&s.iconCollisionBox.collisionVertexBuffer.updateData(s.iconCollisionBox.collisionVertexArray),s.hasTextCollisionBoxData()&&s.textCollisionBox.collisionVertexBuffer&&s.textCollisionBox.collisionVertexBuffer.updateData(s.textCollisionBox.collisionVertexArray),s.text.opacityVertexArray.length!==s.text.layoutVertexArray.length/4)throw new Error(`bucket.text.opacityVertexArray.length (= ${s.text.opacityVertexArray.length}) !== bucket.text.layoutVertexArray.length (= ${s.text.layoutVertexArray.length}) / 4`);if(s.icon.opacityVertexArray.length!==s.icon.layoutVertexArray.length/4)throw new Error(`bucket.icon.opacityVertexArray.length (= ${s.icon.opacityVertexArray.length}) !== bucket.icon.layoutVertexArray.length (= ${s.icon.layoutVertexArray.length}) / 4`);s.bucketInstanceId in this.collisionCircleArrays&&(s.collisionCircleArray=this.collisionCircleArrays[s.bucketInstanceId],delete this.collisionCircleArrays[s.bucketInstanceId])}symbolFadeChange(s){return this.fadeDuration===0?1:(s-this.commitTime)/this.fadeDuration+this.prevZoomAdjustment}zoomAdjustment(s){return Math.max(0,(this.transform.zoom-s)/1.5)}hasTransitions(s){return this.stale||s-this.lastPlacementChangeTime<this.fadeDuration}stillRecent(s,c){let g=this.zoomAtLastRecencyCheck===c?1-this.zoomAdjustment(c):1;return this.zoomAtLastRecencyCheck=c,this.commitTime+this.fadeDuration*g>s}setStale(){this.stale=!0}}function Hl(w,s,c,g,y,E){g&&g.length!==0||(g=[0,0,0,0]);let I=g[0]-Ur,P=g[1]-Ur,L=g[2]-Ur,z=g[3]-Ur;w.emplaceBack(s?1:0,c?1:0,y||0,E||0,I,P),w.emplaceBack(s?1:0,c?1:0,y||0,E||0,L,P),w.emplaceBack(s?1:0,c?1:0,y||0,E||0,L,z),w.emplaceBack(s?1:0,c?1:0,y||0,E||0,I,z)}let Ls=Math.pow(2,25),ll=Math.pow(2,24),Yo=Math.pow(2,17),Qn=Math.pow(2,16),ei=Math.pow(2,9),lo=Math.pow(2,8),Gr=Math.pow(2,1);function hn(w){if(w.opacity===0&&!w.placed)return 0;if(w.opacity===1&&w.placed)return 4294967295;let s=w.placed?1:0,c=Math.floor(127*w.opacity);return c*Ls+s*ll+c*Yo+s*Qn+c*ei+s*lo+c*Gr+s}let Xr=0;class bn{constructor(s){this._sortAcrossTiles=s.layout.get("symbol-z-order")!=="viewport-y"&&!s.layout.get("symbol-sort-key").isConstant(),this._currentTileIndex=0,this._currentPartIndex=0,this._seenCrossTileIDs={},this._bucketParts=[]}continuePlacement(s,c,g,y,E){let I=this._bucketParts;for(;this._currentTileIndex<s.length;)if(c.getBucketParts(I,y,s[this._currentTileIndex],this._sortAcrossTiles),this._currentTileIndex++,E())return!0;for(this._sortAcrossTiles&&(this._sortAcrossTiles=!1,I.sort((P,L)=>P.sortKey-L.sortKey));this._currentPartIndex<I.length;)if(c.placeLayerBucketPart(I[this._currentPartIndex],this._seenCrossTileIDs,g),this._currentPartIndex++,E())return!0;return!1}}class zn{constructor(s,c,g,y,E,I,P,L){this.placement=new qo(s,c,I,P,L),this._currentPlacementIndex=g.length-1,this._forceFullPlacement=y,this._showCollisionBoxes=E,this._done=!1}isDone(){return this._done}continuePlacement(s,c,g){let y=v.now(),E=()=>!this._forceFullPlacement&&v.now()-y>2;for(;this._currentPlacementIndex>=0;){let I=c[s[this._currentPlacementIndex]],P=this.placement.collisionIndex.transform.zoom;if(I.type==="symbol"&&(!I.minzoom||I.minzoom<=P)&&(!I.maxzoom||I.maxzoom>P)){if(this._inProgressLayer||(this._inProgressLayer=new bn(I)),this._inProgressLayer.continuePlacement(g[I.source],this.placement,this._showCollisionBoxes,I,E))return;delete this._inProgressLayer}this._currentPlacementIndex--}this._done=!0}commit(s){return this.placement.commit(s),this.placement}}let Nr=512/i.Z/2;class ao{constructor(s,c,g){this.tileID=s,this.bucketInstanceId=g,this._symbolsByKey={};let y=new Map;for(let E=0;E<c.length;E++){let I=c.get(E),P=I.key,L=y.get(P);L?L.push(I):y.set(P,[I])}for(let[E,I]of y){let P={positions:I.map(L=>({x:Math.floor(L.anchorX*Nr),y:Math.floor(L.anchorY*Nr)})),crossTileIDs:I.map(L=>L.crossTileID)};if(P.positions.length>128){let L=new i.aF(P.positions.length,16,Uint16Array);for(let{x:z,y:U}of P.positions)L.add(z,U);L.finish(),delete P.positions,P.index=L}this._symbolsByKey[E]=P}}getScaledCoordinates(s,c){let{x:g,y,z:E}=this.tileID.canonical,{x:I,y:P,z:L}=c.canonical,z=Nr/Math.pow(2,L-E),U=(P*i.Z+s.anchorY)*z,W=y*i.Z*Nr;return{x:Math.floor((I*i.Z+s.anchorX)*z-g*i.Z*Nr),y:Math.floor(U-W)}}findMatches(s,c,g){let y=this.tileID.canonical.z<c.canonical.z?1:Math.pow(2,this.tileID.canonical.z-c.canonical.z);for(let E=0;E<s.length;E++){let I=s.get(E);if(I.crossTileID)continue;let P=this._symbolsByKey[I.key];if(!P)continue;let L=this.getScaledCoordinates(I,c);if(P.index){let z=P.index.range(L.x-y,L.y-y,L.x+y,L.y+y).sort();for(let U of z){let W=P.crossTileIDs[U];if(!g[W]){g[W]=!0,I.crossTileID=W;break}}}else if(P.positions)for(let z=0;z<P.positions.length;z++){let U=P.positions[z],W=P.crossTileIDs[z];if(Math.abs(U.x-L.x)<=y&&Math.abs(U.y-L.y)<=y&&!g[W]){g[W]=!0,I.crossTileID=W;break}}}}getCrossTileIDsLists(){return Object.values(this._symbolsByKey).map(({crossTileIDs:s})=>s)}}class Hn{constructor(){this.maxCrossTileID=0}generate(){return++this.maxCrossTileID}}class ho{constructor(){this.indexes={},this.usedCrossTileIDs={},this.lng=0}handleWrapJump(s){let c=Math.round((s-this.lng)/360);if(c!==0)for(let g in this.indexes){let y=this.indexes[g],E={};for(let I in y){let P=y[I];P.tileID=P.tileID.unwrapTo(P.tileID.wrap+c),E[P.tileID.key]=P}this.indexes[g]=E}this.lng=s}addBucket(s,c,g){if(this.indexes[s.overscaledZ]&&this.indexes[s.overscaledZ][s.key]){if(this.indexes[s.overscaledZ][s.key].bucketInstanceId===c.bucketInstanceId)return!1;this.removeBucketCrossTileIDs(s.overscaledZ,this.indexes[s.overscaledZ][s.key])}for(let E=0;E<c.symbolInstances.length;E++)c.symbolInstances.get(E).crossTileID=0;this.usedCrossTileIDs[s.overscaledZ]||(this.usedCrossTileIDs[s.overscaledZ]={});let y=this.usedCrossTileIDs[s.overscaledZ];for(let E in this.indexes){let I=this.indexes[E];if(Number(E)>s.overscaledZ)for(let P in I){let L=I[P];L.tileID.isChildOf(s)&&L.findMatches(c.symbolInstances,s,y)}else{let P=I[s.scaledTo(Number(E)).key];P&&P.findMatches(c.symbolInstances,s,y)}}for(let E=0;E<c.symbolInstances.length;E++){let I=c.symbolInstances.get(E);I.crossTileID||(I.crossTileID=g.generate(),y[I.crossTileID]=!0)}return this.indexes[s.overscaledZ]===void 0&&(this.indexes[s.overscaledZ]={}),this.indexes[s.overscaledZ][s.key]=new ao(s,c.symbolInstances,c.bucketInstanceId),!0}removeBucketCrossTileIDs(s,c){for(let g of c.getCrossTileIDsLists())for(let y of g)delete this.usedCrossTileIDs[s][y]}removeStaleBuckets(s){let c=!1;for(let g in this.indexes){let y=this.indexes[g];for(let E in y)s[y[E].bucketInstanceId]||(this.removeBucketCrossTileIDs(g,y[E]),delete y[E],c=!0)}return c}}class Bn{constructor(){this.layerIndexes={},this.crossTileIDs=new Hn,this.maxBucketInstanceId=0,this.bucketsInCurrentPlacement={}}addLayer(s,c,g){let y=this.layerIndexes[s.id];y===void 0&&(y=this.layerIndexes[s.id]=new ho);let E=!1,I={};y.handleWrapJump(g);for(let P of c){let L=P.getBucket(s);L&&s.id===L.layerIds[0]&&(L.bucketInstanceId||(L.bucketInstanceId=++this.maxBucketInstanceId),y.addBucket(P.tileID,L,this.crossTileIDs)&&(E=!0),I[L.bucketInstanceId]=!0)}return y.removeStaleBuckets(I)&&(E=!0),E}pruneUnusedLayers(s){let c={};s.forEach(g=>{c[g]=!0});for(let g in this.layerIndexes)c[g]||delete this.layerIndexes[g]}}var ha="void main() {fragColor=vec4(1.0);}";let bo={prelude:nn(`#ifdef GL_ES
precision mediump float;
#else
#if !defined(lowp)
#define lowp
#endif
#if !defined(mediump)
#define mediump
#endif
#if !defined(highp)
#define highp
#endif
#endif
out highp vec4 fragColor;`,`#ifdef GL_ES
precision highp float;
#else
#if !defined(lowp)
#define lowp
#endif
#if !defined(mediump)
#define mediump
#endif
#if !defined(highp)
#define highp
#endif
#endif
vec2 unpack_float(const float packedValue) {int packedIntValue=int(packedValue);int v0=packedIntValue/256;return vec2(v0,packedIntValue-v0*256);}vec2 unpack_opacity(const float packedOpacity) {int intOpacity=int(packedOpacity)/2;return vec2(float(intOpacity)/127.0,mod(packedOpacity,2.0));}vec4 decode_color(const vec2 encodedColor) {return vec4(unpack_float(encodedColor[0])/255.0,unpack_float(encodedColor[1])/255.0
);}float unpack_mix_vec2(const vec2 packedValue,const float t) {return mix(packedValue[0],packedValue[1],t);}vec4 unpack_mix_color(const vec4 packedColors,const float t) {vec4 minColor=decode_color(vec2(packedColors[0],packedColors[1]));vec4 maxColor=decode_color(vec2(packedColors[2],packedColors[3]));return mix(minColor,maxColor,t);}vec2 get_pattern_pos(const vec2 pixel_coord_upper,const vec2 pixel_coord_lower,const vec2 pattern_size,const float tile_units_to_pixels,const vec2 pos) {vec2 offset=mod(mod(mod(pixel_coord_upper,pattern_size)*256.0,pattern_size)*256.0+pixel_coord_lower,pattern_size);return (tile_units_to_pixels*pos+offset)/pattern_size;}mat3 rotationMatrixFromAxisAngle(vec3 u,float angle) {float c=cos(angle);float s=sin(angle);float c2=1.0-c;return mat3(u.x*u.x*c2+      c,u.x*u.y*c2-u.z*s,u.x*u.z*c2+u.y*s,u.y*u.x*c2+u.z*s,u.y*u.y*c2+    c,u.y*u.z*c2-u.x*s,u.z*u.x*c2-u.y*s,u.z*u.y*c2+u.x*s,u.z*u.z*c2+    c
);}
#ifdef TERRAIN3D
uniform sampler2D u_terrain;uniform float u_terrain_dim;uniform mat4 u_terrain_matrix;uniform vec4 u_terrain_unpack;uniform float u_terrain_exaggeration;uniform highp sampler2D u_depth;
#endif
const highp vec4 bitSh=vec4(256.*256.*256.,256.*256.,256.,1.);const highp vec4 bitShifts=vec4(1.)/bitSh;highp float unpack(highp vec4 color) {return dot(color,bitShifts);}highp float depthOpacity(vec3 frag) {
#ifdef TERRAIN3D
highp float d=unpack(texture(u_depth,frag.xy*0.5+0.5))+0.0001-frag.z;return 1.0-max(0.0,min(1.0,-d*500.0));
#else
return 1.0;
#endif
}float calculate_visibility(vec4 pos) {
#ifdef TERRAIN3D
vec3 frag=pos.xyz/pos.w;highp float d=depthOpacity(frag);if (d > 0.95) return 1.0;return (d+depthOpacity(frag+vec3(0.0,0.01,0.0)))/2.0;
#else
return 1.0;
#endif
}float ele(vec2 pos) {
#ifdef TERRAIN3D
vec4 rgb=(texture(u_terrain,pos)*255.0)*u_terrain_unpack;return rgb.r+rgb.g+rgb.b-u_terrain_unpack.a;
#else
return 0.0;
#endif
}float get_elevation(vec2 pos) {
#ifdef TERRAIN3D
#ifdef GLOBE
if ((pos.y <-32767.5) || (pos.y > 32766.5)) {return 0.0;}
#endif
vec2 coord=(u_terrain_matrix*vec4(pos,0.0,1.0)).xy*u_terrain_dim+1.0;vec2 f=fract(coord);vec2 c=(floor(coord)+0.5)/(u_terrain_dim+2.0);float d=1.0/(u_terrain_dim+2.0);float tl=ele(c);float tr=ele(c+vec2(d,0.0));float bl=ele(c+vec2(0.0,d));float br=ele(c+vec2(d,d));float elevation=mix(mix(tl,tr,f.x),mix(bl,br,f.x),f.y);return elevation*u_terrain_exaggeration;
#else
return 0.0;
#endif
}const float PI=3.141592653589793;uniform mat4 u_projection_matrix;`),projectionMercator:nn("","float projectLineThickness(float tileY) {return 1.0;}float projectCircleRadius(float tileY) {return 1.0;}vec4 projectTile(vec2 p) {vec4 result=u_projection_matrix*vec4(p,0.0,1.0);return result;}vec4 projectTile(vec2 p,vec2 rawPos) {vec4 result=u_projection_matrix*vec4(p,0.0,1.0);if (rawPos.y <-32767.5 || rawPos.y > 32766.5) {result.z=-10000000.0;}return result;}vec4 projectTileWithElevation(vec2 posInTile,float elevation) {return u_projection_matrix*vec4(posInTile,elevation,1.0);}vec4 projectTileFor3D(vec2 posInTile,float elevation) {return projectTileWithElevation(posInTile,elevation);}"),projectionGlobe:nn("",`#define GLOBE_RADIUS 6371008.8
uniform highp vec4 u_projection_tile_mercator_coords;uniform highp vec4 u_projection_clipping_plane;uniform highp float u_projection_transition;uniform mat4 u_projection_fallback_matrix;vec3 globeRotateVector(vec3 vec,vec2 angles) {vec3 axisRight=vec3(vec.z,0.0,-vec.x);vec3 axisUp=cross(axisRight,vec);axisRight=normalize(axisRight);axisUp=normalize(axisUp);vec2 t=tan(angles);return normalize(vec+axisRight*t.x+axisUp*t.y);}mat3 globeGetRotationMatrix(vec3 spherePos) {vec3 axisRight=vec3(spherePos.z,0.0,-spherePos.x);vec3 axisDown=cross(axisRight,spherePos);axisRight=normalize(axisRight);axisDown=normalize(axisDown);return mat3(axisRight,axisDown,spherePos
);}float circumferenceRatioAtTileY(float tileY) {float mercator_pos_y=u_projection_tile_mercator_coords.y+u_projection_tile_mercator_coords.w*tileY;float spherical_y=2.0*atan(exp(PI-(mercator_pos_y*PI*2.0)))-PI*0.5;return cos(spherical_y);}float projectLineThickness(float tileY) {float thickness=1.0/circumferenceRatioAtTileY(tileY); 
if (u_projection_transition < 0.999) {return mix(1.0,thickness,u_projection_transition);} else {return thickness;}}vec3 projectToSphere(vec2 translatedPos,vec2 rawPos) {vec2 mercator_pos=u_projection_tile_mercator_coords.xy+u_projection_tile_mercator_coords.zw*translatedPos;vec2 spherical;spherical.x=mercator_pos.x*PI*2.0+PI;spherical.y=2.0*atan(exp(PI-(mercator_pos.y*PI*2.0)))-PI*0.5;float len=cos(spherical.y);vec3 pos=vec3(sin(spherical.x)*len,sin(spherical.y),cos(spherical.x)*len
);if (rawPos.y <-32767.5) {pos=vec3(0.0,1.0,0.0);}if (rawPos.y > 32766.5) {pos=vec3(0.0,-1.0,0.0);}return pos;}vec3 projectToSphere(vec2 posInTile) {return projectToSphere(posInTile,vec2(0.0,0.0));}float globeComputeClippingZ(vec3 spherePos) {return (1.0-(dot(spherePos,u_projection_clipping_plane.xyz)+u_projection_clipping_plane.w));}vec4 interpolateProjection(vec2 posInTile,vec3 spherePos,float elevation) {vec3 elevatedPos=spherePos*(1.0+elevation/GLOBE_RADIUS);vec4 globePosition=u_projection_matrix*vec4(elevatedPos,1.0);globePosition.z=globeComputeClippingZ(elevatedPos)*globePosition.w;if (u_projection_transition > 0.999) {return globePosition;}vec4 flatPosition=u_projection_fallback_matrix*vec4(posInTile,elevation,1.0);const float z_globeness_threshold=0.2;vec4 result=globePosition;result.z=mix(0.0,globePosition.z,clamp((u_projection_transition-z_globeness_threshold)/(1.0-z_globeness_threshold),0.0,1.0));result.xyw=mix(flatPosition.xyw,globePosition.xyw,u_projection_transition);if ((posInTile.y <-32767.5) || (posInTile.y > 32766.5)) {result=globePosition;const float poles_hidden_anim_percentage=0.02;result.z=mix(globePosition.z,100.0,pow(max((1.0-u_projection_transition)/poles_hidden_anim_percentage,0.0),8.0));}return result;}vec4 interpolateProjectionFor3D(vec2 posInTile,vec3 spherePos,float elevation) {vec3 elevatedPos=spherePos*(1.0+elevation/GLOBE_RADIUS);vec4 globePosition=u_projection_matrix*vec4(elevatedPos,1.0);if (u_projection_transition > 0.999) {return globePosition;}vec4 fallbackPosition=u_projection_fallback_matrix*vec4(posInTile,elevation,1.0);return mix(fallbackPosition,globePosition,u_projection_transition);}vec4 projectTile(vec2 posInTile) {return interpolateProjection(posInTile,projectToSphere(posInTile),0.0);}vec4 projectTile(vec2 posInTile,vec2 rawPos) {return interpolateProjection(posInTile,projectToSphere(posInTile,rawPos),0.0);}vec4 projectTileWithElevation(vec2 posInTile,float elevation) {return interpolateProjection(posInTile,projectToSphere(posInTile),elevation);}vec4 projectTileFor3D(vec2 posInTile,float elevation) {vec3 spherePos=projectToSphere(posInTile,posInTile);return interpolateProjectionFor3D(posInTile,spherePos,elevation);}`),background:nn(`uniform vec4 u_color;uniform float u_opacity;void main() {fragColor=u_color*u_opacity;
#ifdef OVERDRAW_INSPECTOR
fragColor=vec4(1.0);
#endif
}`,"in vec2 a_pos;void main() {gl_Position=projectTile(a_pos);}"),backgroundPattern:nn(`uniform vec2 u_pattern_tl_a;uniform vec2 u_pattern_br_a;uniform vec2 u_pattern_tl_b;uniform vec2 u_pattern_br_b;uniform vec2 u_texsize;uniform float u_mix;uniform float u_opacity;uniform sampler2D u_image;in vec2 v_pos_a;in vec2 v_pos_b;void main() {vec2 imagecoord=mod(v_pos_a,1.0);vec2 pos=mix(u_pattern_tl_a/u_texsize,u_pattern_br_a/u_texsize,imagecoord);vec4 color1=texture(u_image,pos);vec2 imagecoord_b=mod(v_pos_b,1.0);vec2 pos2=mix(u_pattern_tl_b/u_texsize,u_pattern_br_b/u_texsize,imagecoord_b);vec4 color2=texture(u_image,pos2);fragColor=mix(color1,color2,u_mix)*u_opacity;
#ifdef OVERDRAW_INSPECTOR
fragColor=vec4(1.0);
#endif
}`,"uniform vec2 u_pattern_size_a;uniform vec2 u_pattern_size_b;uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform float u_scale_a;uniform float u_scale_b;uniform float u_tile_units_to_pixels;in vec2 a_pos;out vec2 v_pos_a;out vec2 v_pos_b;void main() {gl_Position=projectTile(a_pos);v_pos_a=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,u_scale_a*u_pattern_size_a,u_tile_units_to_pixels,a_pos);v_pos_b=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,u_scale_b*u_pattern_size_b,u_tile_units_to_pixels,a_pos);}"),circle:nn(`in vec3 v_data;in float v_visibility;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define mediump float radius
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define highp vec4 stroke_color
#pragma mapbox: define mediump float stroke_width
#pragma mapbox: define lowp float stroke_opacity
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize mediump float radius
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize highp vec4 stroke_color
#pragma mapbox: initialize mediump float stroke_width
#pragma mapbox: initialize lowp float stroke_opacity
vec2 extrude=v_data.xy;float extrude_length=length(extrude);float antialiased_blur=v_data.z;float opacity_t=smoothstep(0.0,antialiased_blur,extrude_length-1.0);float color_t=stroke_width < 0.01 ? 0.0 : smoothstep(antialiased_blur,0.0,extrude_length-radius/(radius+stroke_width));fragColor=v_visibility*opacity_t*mix(color*opacity,stroke_color*stroke_opacity,color_t);const float epsilon=0.5/255.0;if (fragColor.r < epsilon && fragColor.g < epsilon && fragColor.b < epsilon && fragColor.a < epsilon) {discard;}
#ifdef OVERDRAW_INSPECTOR
fragColor=vec4(1.0);
#endif
}`,`uniform bool u_scale_with_map;uniform bool u_pitch_with_map;uniform vec2 u_extrude_scale;uniform highp float u_globe_extrude_scale;uniform lowp float u_device_pixel_ratio;uniform highp float u_camera_to_center_distance;uniform vec2 u_translate;in vec2 a_pos;out vec3 v_data;out float v_visibility;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define mediump float radius
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define highp vec4 stroke_color
#pragma mapbox: define mediump float stroke_width
#pragma mapbox: define lowp float stroke_opacity
void main(void) {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize mediump float radius
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize highp vec4 stroke_color
#pragma mapbox: initialize mediump float stroke_width
#pragma mapbox: initialize lowp float stroke_opacity
vec2 pos_raw=a_pos+32768.0;vec2 extrude=vec2(mod(pos_raw,8.0)/7.0*2.0-1.0);vec2 circle_center=floor(pos_raw/8.0)+u_translate;float ele=get_elevation(circle_center);v_visibility=calculate_visibility(projectTileWithElevation(circle_center,ele));if (u_pitch_with_map) {
#ifdef GLOBE
vec3 center_vector=projectToSphere(circle_center);
#endif
float angle_scale=u_globe_extrude_scale;vec2 corner_position=circle_center;if (u_scale_with_map) {angle_scale*=(radius+stroke_width);corner_position+=extrude*u_extrude_scale*(radius+stroke_width);} else {
#ifdef GLOBE
vec4 projected_center=interpolateProjection(circle_center,center_vector,ele);
#else
vec4 projected_center=projectTileWithElevation(circle_center,ele);
#endif
corner_position+=extrude*u_extrude_scale*(radius+stroke_width)*(projected_center.w/u_camera_to_center_distance);angle_scale*=(radius+stroke_width)*(projected_center.w/u_camera_to_center_distance);}
#ifdef GLOBE
vec2 angles=extrude*angle_scale;vec3 corner_vector=globeRotateVector(center_vector,angles);gl_Position=interpolateProjection(corner_position,corner_vector,ele);
#else
gl_Position=projectTileWithElevation(corner_position,ele);
#endif
} else {gl_Position=projectTileWithElevation(circle_center,ele);if (gl_Position.z/gl_Position.w > 1.0) {gl_Position.xy=vec2(10000.0);}if (u_scale_with_map) {gl_Position.xy+=extrude*(radius+stroke_width)*u_extrude_scale*u_camera_to_center_distance;} else {gl_Position.xy+=extrude*(radius+stroke_width)*u_extrude_scale*gl_Position.w;}}float antialiasblur=-max(1.0/u_device_pixel_ratio/(radius+stroke_width),blur);v_data=vec3(extrude.x,extrude.y,antialiasblur);}`),clippingMask:nn(ha,"in vec2 a_pos;void main() {gl_Position=projectTile(a_pos);}"),heatmap:nn(`uniform highp float u_intensity;in vec2 v_extrude;
#pragma mapbox: define highp float weight
#define GAUSS_COEF 0.3989422804014327
void main() {
#pragma mapbox: initialize highp float weight
float d=-0.5*3.0*3.0*dot(v_extrude,v_extrude);float val=weight*u_intensity*GAUSS_COEF*exp(d);fragColor=vec4(val,1.0,1.0,1.0);
#ifdef OVERDRAW_INSPECTOR
fragColor=vec4(1.0);
#endif
}`,`uniform float u_extrude_scale;uniform float u_opacity;uniform float u_intensity;uniform highp float u_globe_extrude_scale;in vec2 a_pos;out vec2 v_extrude;
#pragma mapbox: define highp float weight
#pragma mapbox: define mediump float radius
const highp float ZERO=1.0/255.0/16.0;
#define GAUSS_COEF 0.3989422804014327
void main(void) {
#pragma mapbox: initialize highp float weight
#pragma mapbox: initialize mediump float radius
vec2 pos_raw=a_pos+32768.0;vec2 unscaled_extrude=vec2(mod(pos_raw,8.0)/7.0*2.0-1.0);float S=sqrt(-2.0*log(ZERO/weight/u_intensity/GAUSS_COEF))/3.0;v_extrude=S*unscaled_extrude;vec2 extrude=v_extrude*radius*u_extrude_scale;vec2 circle_center=floor(pos_raw/8.0);
#ifdef GLOBE
vec2 angles=v_extrude*radius*u_globe_extrude_scale;vec3 center_vector=projectToSphere(circle_center);vec3 corner_vector=globeRotateVector(center_vector,angles);gl_Position=interpolateProjection(circle_center+extrude,corner_vector,0.0);
#else
gl_Position=projectTileFor3D(circle_center+extrude,get_elevation(circle_center));
#endif
}`),heatmapTexture:nn(`uniform sampler2D u_image;uniform sampler2D u_color_ramp;uniform float u_opacity;in vec2 v_pos;void main() {float t=texture(u_image,v_pos).r;vec4 color=texture(u_color_ramp,vec2(t,0.5));fragColor=color*u_opacity;
#ifdef OVERDRAW_INSPECTOR
fragColor=vec4(0.0);
#endif
}`,"uniform mat4 u_matrix;uniform vec2 u_world;in vec2 a_pos;out vec2 v_pos;void main() {gl_Position=u_matrix*vec4(a_pos*u_world,0,1);v_pos.x=a_pos.x;v_pos.y=1.0-a_pos.y;}"),collisionBox:nn("in float v_placed;in float v_notUsed;void main() {float alpha=0.5;fragColor=vec4(1.0,0.0,0.0,1.0)*alpha;if (v_placed > 0.5) {fragColor=vec4(0.0,0.0,1.0,0.5)*alpha;}if (v_notUsed > 0.5) {fragColor*=.1;}}","in vec2 a_anchor_pos;in vec2 a_placed;in vec2 a_box_real;uniform vec2 u_pixel_extrude_scale;out float v_placed;out float v_notUsed;void main() {gl_Position=projectTileWithElevation(a_anchor_pos,get_elevation(a_anchor_pos));gl_Position.xy=((a_box_real+0.5)*u_pixel_extrude_scale*2.0-1.0)*vec2(1.0,-1.0)*gl_Position.w;if (gl_Position.z/gl_Position.w < 1.1) {gl_Position.z=0.5;}v_placed=a_placed.x;v_notUsed=a_placed.y;}"),collisionCircle:nn("in float v_radius;in vec2 v_extrude;in float v_collision;void main() {float alpha=0.5;float stroke_radius=0.9;float distance_to_center=length(v_extrude);float distance_to_edge=abs(distance_to_center-v_radius);float opacity_t=smoothstep(-stroke_radius,0.0,-distance_to_edge);vec4 color=mix(vec4(0.0,0.0,1.0,0.5),vec4(1.0,0.0,0.0,1.0),v_collision);fragColor=color*alpha*opacity_t;}","in vec2 a_pos;in float a_radius;in vec2 a_flags;uniform vec2 u_viewport_size;out float v_radius;out vec2 v_extrude;out float v_collision;void main() {float radius=a_radius;float collision=a_flags.x;float vertexIdx=a_flags.y;vec2 quadVertexOffset=vec2(mix(-1.0,1.0,float(vertexIdx >=2.0)),mix(-1.0,1.0,float(vertexIdx >=1.0 && vertexIdx <=2.0)));vec2 quadVertexExtent=quadVertexOffset*radius;float padding_factor=1.2;v_radius=radius;v_extrude=quadVertexExtent*padding_factor;v_collision=collision;gl_Position=vec4((a_pos/u_viewport_size*2.0-1.0)*vec2(1.0,-1.0),0.0,1.0)+vec4(quadVertexExtent*padding_factor/u_viewport_size*2.0,0.0,0.0);}"),debug:nn("uniform highp vec4 u_color;uniform sampler2D u_overlay;in vec2 v_uv;void main() {vec4 overlay_color=texture(u_overlay,v_uv);fragColor=mix(u_color,overlay_color,overlay_color.a);}","in vec2 a_pos;out vec2 v_uv;uniform float u_overlay_scale;void main() {v_uv=a_pos/8192.0;gl_Position=projectTileWithElevation(a_pos*u_overlay_scale,get_elevation(a_pos));}"),depth:nn(ha,`in vec2 a_pos;void main() {
#ifdef GLOBE
gl_Position=projectTileFor3D(a_pos,0.0);
#else
gl_Position=u_projection_matrix*vec4(a_pos,0.0,1.0);
#endif
}`),fill:nn(`#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float opacity
fragColor=color*opacity;
#ifdef OVERDRAW_INSPECTOR
fragColor=vec4(1.0);
#endif
}`,`uniform vec2 u_fill_translate;in vec2 a_pos;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float opacity
gl_Position=projectTile(a_pos+u_fill_translate,a_pos);}`),fillOutline:nn(`in vec2 v_pos;
#ifdef GLOBE
in float v_depth;
#endif
#pragma mapbox: define highp vec4 outline_color
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize highp vec4 outline_color
#pragma mapbox: initialize lowp float opacity
float dist=length(v_pos-gl_FragCoord.xy);float alpha=1.0-smoothstep(0.0,1.0,dist);fragColor=outline_color*(alpha*opacity);
#ifdef GLOBE
if (v_depth > 1.0) {discard;}
#endif
#ifdef OVERDRAW_INSPECTOR
fragColor=vec4(1.0);
#endif
}`,`uniform vec2 u_world;uniform vec2 u_fill_translate;in vec2 a_pos;out vec2 v_pos;
#ifdef GLOBE
out float v_depth;
#endif
#pragma mapbox: define highp vec4 outline_color
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize highp vec4 outline_color
#pragma mapbox: initialize lowp float opacity
gl_Position=projectTile(a_pos+u_fill_translate,a_pos);v_pos=(gl_Position.xy/gl_Position.w+1.0)/2.0*u_world;
#ifdef GLOBE
v_depth=gl_Position.z/gl_Position.w;
#endif
}`),fillOutlinePattern:nn(`uniform vec2 u_texsize;uniform sampler2D u_image;uniform float u_fade;in vec2 v_pos_a;in vec2 v_pos_b;in vec2 v_pos;
#ifdef GLOBE
in float v_depth;
#endif
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
void main() {
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;vec2 imagecoord=mod(v_pos_a,1.0);vec2 pos=mix(pattern_tl_a/u_texsize,pattern_br_a/u_texsize,imagecoord);vec4 color1=texture(u_image,pos);vec2 imagecoord_b=mod(v_pos_b,1.0);vec2 pos2=mix(pattern_tl_b/u_texsize,pattern_br_b/u_texsize,imagecoord_b);vec4 color2=texture(u_image,pos2);float dist=length(v_pos-gl_FragCoord.xy);float alpha=1.0-smoothstep(0.0,1.0,dist);fragColor=mix(color1,color2,u_fade)*alpha*opacity;
#ifdef GLOBE
if (v_depth > 1.0) {discard;}
#endif
#ifdef OVERDRAW_INSPECTOR
fragColor=vec4(1.0);
#endif
}`,`uniform vec2 u_world;uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform vec3 u_scale;uniform vec2 u_fill_translate;in vec2 a_pos;out vec2 v_pos_a;out vec2 v_pos_b;out vec2 v_pos;
#ifdef GLOBE
out float v_depth;
#endif
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
#pragma mapbox: define lowp float pixel_ratio_from
#pragma mapbox: define lowp float pixel_ratio_to
void main() {
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
#pragma mapbox: initialize lowp float pixel_ratio_from
#pragma mapbox: initialize lowp float pixel_ratio_to
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;float tileRatio=u_scale.x;float fromScale=u_scale.y;float toScale=u_scale.z;gl_Position=projectTile(a_pos+u_fill_translate,a_pos);vec2 display_size_a=(pattern_br_a-pattern_tl_a)/pixel_ratio_from;vec2 display_size_b=(pattern_br_b-pattern_tl_b)/pixel_ratio_to;v_pos_a=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,fromScale*display_size_a,tileRatio,a_pos);v_pos_b=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,toScale*display_size_b,tileRatio,a_pos);v_pos=(gl_Position.xy/gl_Position.w+1.0)/2.0*u_world;
#ifdef GLOBE
v_depth=gl_Position.z/gl_Position.w;
#endif
}`),fillPattern:nn(`#ifdef GL_ES
precision highp float;
#endif
uniform vec2 u_texsize;uniform float u_fade;uniform sampler2D u_image;in vec2 v_pos_a;in vec2 v_pos_b;
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
void main() {
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;vec2 imagecoord=mod(v_pos_a,1.0);vec2 pos=mix(pattern_tl_a/u_texsize,pattern_br_a/u_texsize,imagecoord);vec4 color1=texture(u_image,pos);vec2 imagecoord_b=mod(v_pos_b,1.0);vec2 pos2=mix(pattern_tl_b/u_texsize,pattern_br_b/u_texsize,imagecoord_b);vec4 color2=texture(u_image,pos2);fragColor=mix(color1,color2,u_fade)*opacity;
#ifdef OVERDRAW_INSPECTOR
fragColor=vec4(1.0);
#endif
}`,`uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform vec3 u_scale;uniform vec2 u_fill_translate;in vec2 a_pos;out vec2 v_pos_a;out vec2 v_pos_b;
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
#pragma mapbox: define lowp float pixel_ratio_from
#pragma mapbox: define lowp float pixel_ratio_to
void main() {
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
#pragma mapbox: initialize lowp float pixel_ratio_from
#pragma mapbox: initialize lowp float pixel_ratio_to
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;float tileZoomRatio=u_scale.x;float fromScale=u_scale.y;float toScale=u_scale.z;vec2 display_size_a=(pattern_br_a-pattern_tl_a)/pixel_ratio_from;vec2 display_size_b=(pattern_br_b-pattern_tl_b)/pixel_ratio_to;gl_Position=projectTile(a_pos+u_fill_translate,a_pos);v_pos_a=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,fromScale*display_size_a,tileZoomRatio,a_pos);v_pos_b=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,toScale*display_size_b,tileZoomRatio,a_pos);}`),fillExtrusion:nn(`in vec4 v_color;void main() {fragColor=v_color;
#ifdef OVERDRAW_INSPECTOR
fragColor=vec4(1.0);
#endif
}`,`uniform vec3 u_lightcolor;uniform lowp vec3 u_lightpos;uniform lowp vec3 u_lightpos_globe;uniform lowp float u_lightintensity;uniform float u_vertical_gradient;uniform lowp float u_opacity;uniform vec2 u_fill_translate;in vec2 a_pos;in vec4 a_normal_ed;
#ifdef TERRAIN3D
in vec2 a_centroid;
#endif
out vec4 v_color;
#pragma mapbox: define highp float base
#pragma mapbox: define highp float height
#pragma mapbox: define highp vec4 color
void main() {
#pragma mapbox: initialize highp float base
#pragma mapbox: initialize highp float height
#pragma mapbox: initialize highp vec4 color
vec3 normal=a_normal_ed.xyz;
#ifdef TERRAIN3D
float height_terrain3d_offset=get_elevation(a_centroid);float base_terrain3d_offset=height_terrain3d_offset-(base > 0.0 ? 0.0 : 10.0);
#else
float height_terrain3d_offset=0.0;float base_terrain3d_offset=0.0;
#endif
base=max(0.0,base)+base_terrain3d_offset;height=max(0.0,height)+height_terrain3d_offset;float t=mod(normal.x,2.0);float elevation=t > 0.0 ? height : base;vec2 posInTile=a_pos+u_fill_translate;
#ifdef GLOBE
vec3 spherePos=projectToSphere(posInTile,a_pos);gl_Position=interpolateProjectionFor3D(posInTile,spherePos,elevation);
#else
gl_Position=u_projection_matrix*vec4(posInTile,elevation,1.0);
#endif
float colorvalue=color.r*0.2126+color.g*0.7152+color.b*0.0722;v_color=vec4(0.0,0.0,0.0,1.0);vec4 ambientlight=vec4(0.03,0.03,0.03,1.0);color+=ambientlight;vec3 normalForLighting=normal/16384.0;float directional=clamp(dot(normalForLighting,u_lightpos),0.0,1.0);
#ifdef GLOBE
mat3 rotMatrix=globeGetRotationMatrix(spherePos);normalForLighting=rotMatrix*normalForLighting;directional=mix(directional,clamp(dot(normalForLighting,u_lightpos_globe),0.0,1.0),u_projection_transition);
#endif
directional=mix((1.0-u_lightintensity),max((1.0-colorvalue+u_lightintensity),1.0),directional);if (normal.y !=0.0) {directional*=((1.0-u_vertical_gradient)+(u_vertical_gradient*clamp((t+base)*pow(height/150.0,0.5),mix(0.7,0.98,1.0-u_lightintensity),1.0)));}v_color.r+=clamp(color.r*directional*u_lightcolor.r,mix(0.0,0.3,1.0-u_lightcolor.r),1.0);v_color.g+=clamp(color.g*directional*u_lightcolor.g,mix(0.0,0.3,1.0-u_lightcolor.g),1.0);v_color.b+=clamp(color.b*directional*u_lightcolor.b,mix(0.0,0.3,1.0-u_lightcolor.b),1.0);v_color*=u_opacity;}`),fillExtrusionPattern:nn(`uniform vec2 u_texsize;uniform float u_fade;uniform sampler2D u_image;in vec2 v_pos_a;in vec2 v_pos_b;in vec4 v_lighting;
#pragma mapbox: define lowp float base
#pragma mapbox: define lowp float height
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
#pragma mapbox: define lowp float pixel_ratio_from
#pragma mapbox: define lowp float pixel_ratio_to
void main() {
#pragma mapbox: initialize lowp float base
#pragma mapbox: initialize lowp float height
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
#pragma mapbox: initialize lowp float pixel_ratio_from
#pragma mapbox: initialize lowp float pixel_ratio_to
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;vec2 imagecoord=mod(v_pos_a,1.0);vec2 pos=mix(pattern_tl_a/u_texsize,pattern_br_a/u_texsize,imagecoord);vec4 color1=texture(u_image,pos);vec2 imagecoord_b=mod(v_pos_b,1.0);vec2 pos2=mix(pattern_tl_b/u_texsize,pattern_br_b/u_texsize,imagecoord_b);vec4 color2=texture(u_image,pos2);vec4 mixedColor=mix(color1,color2,u_fade);fragColor=mixedColor*v_lighting;
#ifdef OVERDRAW_INSPECTOR
fragColor=vec4(1.0);
#endif
}`,`uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform float u_height_factor;uniform vec3 u_scale;uniform float u_vertical_gradient;uniform lowp float u_opacity;uniform vec2 u_fill_translate;uniform vec3 u_lightcolor;uniform lowp vec3 u_lightpos;uniform lowp vec3 u_lightpos_globe;uniform lowp float u_lightintensity;in vec2 a_pos;in vec4 a_normal_ed;
#ifdef TERRAIN3D
in vec2 a_centroid;
#endif
#ifdef GLOBE
out vec3 v_sphere_pos;
#endif
out vec2 v_pos_a;out vec2 v_pos_b;out vec4 v_lighting;
#pragma mapbox: define lowp float base
#pragma mapbox: define lowp float height
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
#pragma mapbox: define lowp float pixel_ratio_from
#pragma mapbox: define lowp float pixel_ratio_to
void main() {
#pragma mapbox: initialize lowp float base
#pragma mapbox: initialize lowp float height
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
#pragma mapbox: initialize lowp float pixel_ratio_from
#pragma mapbox: initialize lowp float pixel_ratio_to
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;float tileRatio=u_scale.x;float fromScale=u_scale.y;float toScale=u_scale.z;vec3 normal=a_normal_ed.xyz;float edgedistance=a_normal_ed.w;vec2 display_size_a=(pattern_br_a-pattern_tl_a)/pixel_ratio_from;vec2 display_size_b=(pattern_br_b-pattern_tl_b)/pixel_ratio_to;
#ifdef TERRAIN3D
float height_terrain3d_offset=get_elevation(a_centroid);float base_terrain3d_offset=height_terrain3d_offset-(base > 0.0 ? 0.0 : 10.0);
#else
float height_terrain3d_offset=0.0;float base_terrain3d_offset=0.0;
#endif
base=max(0.0,base)+base_terrain3d_offset;height=max(0.0,height)+height_terrain3d_offset;float t=mod(normal.x,2.0);float elevation=t > 0.0 ? height : base;vec2 posInTile=a_pos+u_fill_translate;
#ifdef GLOBE
vec3 spherePos=projectToSphere(posInTile,a_pos);vec3 elevatedPos=spherePos*(1.0+elevation/GLOBE_RADIUS);v_sphere_pos=elevatedPos;gl_Position=interpolateProjectionFor3D(posInTile,spherePos,elevation);
#else
gl_Position=u_projection_matrix*vec4(posInTile,elevation,1.0);
#endif
vec2 pos=normal.x==1.0 && normal.y==0.0 && normal.z==16384.0
? a_pos
: vec2(edgedistance,elevation*u_height_factor);v_pos_a=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,fromScale*display_size_a,tileRatio,pos);v_pos_b=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,toScale*display_size_b,tileRatio,pos);v_lighting=vec4(0.0,0.0,0.0,1.0);float directional=clamp(dot(normal/16383.0,u_lightpos),0.0,1.0);directional=mix((1.0-u_lightintensity),max((0.5+u_lightintensity),1.0),directional);if (normal.y !=0.0) {directional*=((1.0-u_vertical_gradient)+(u_vertical_gradient*clamp((t+base)*pow(height/150.0,0.5),mix(0.7,0.98,1.0-u_lightintensity),1.0)));}v_lighting.rgb+=clamp(directional*u_lightcolor,mix(vec3(0.0),vec3(0.3),1.0-u_lightcolor),vec3(1.0));v_lighting*=u_opacity;}`),hillshadePrepare:nn(`#ifdef GL_ES
precision highp float;
#endif
uniform sampler2D u_image;in vec2 v_pos;uniform vec2 u_dimension;uniform float u_zoom;uniform vec4 u_unpack;float getElevation(vec2 coord,float bias) {vec4 data=texture(u_image,coord)*255.0;data.a=-1.0;return dot(data,u_unpack);}void main() {vec2 epsilon=1.0/u_dimension;float tileSize=u_dimension.x-2.0;float a=getElevation(v_pos+vec2(-epsilon.x,-epsilon.y),0.0);float b=getElevation(v_pos+vec2(0,-epsilon.y),0.0);float c=getElevation(v_pos+vec2(epsilon.x,-epsilon.y),0.0);float d=getElevation(v_pos+vec2(-epsilon.x,0),0.0);float e=getElevation(v_pos,0.0);float f=getElevation(v_pos+vec2(epsilon.x,0),0.0);float g=getElevation(v_pos+vec2(-epsilon.x,epsilon.y),0.0);float h=getElevation(v_pos+vec2(0,epsilon.y),0.0);float i=getElevation(v_pos+vec2(epsilon.x,epsilon.y),0.0);float exaggerationFactor=u_zoom < 2.0 ? 0.4 : u_zoom < 4.5 ? 0.35 : 0.3;float exaggeration=u_zoom < 15.0 ? (u_zoom-15.0)*exaggerationFactor : 0.0;vec2 deriv=vec2((c+f+f+i)-(a+d+d+g),(g+h+h+i)-(a+b+b+c))*tileSize/pow(2.0,exaggeration+(28.2562-u_zoom));fragColor=clamp(vec4(deriv.x/8.0+0.5,deriv.y/8.0+0.5,1.0,1.0),0.0,1.0);
#ifdef OVERDRAW_INSPECTOR
fragColor=vec4(1.0);
#endif
}`,"uniform mat4 u_matrix;uniform vec2 u_dimension;in vec2 a_pos;in vec2 a_texture_pos;out vec2 v_pos;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);highp vec2 epsilon=1.0/u_dimension;float scale=(u_dimension.x-2.0)/u_dimension.x;v_pos=(a_texture_pos/8192.0)*scale+epsilon;}"),hillshade:nn(`uniform sampler2D u_image;in vec2 v_pos;uniform vec2 u_latrange;uniform float u_exaggeration;uniform vec4 u_accent;uniform int u_method;uniform float u_altitudes[NUM_ILLUMINATION_SOURCES];uniform float u_azimuths[NUM_ILLUMINATION_SOURCES];uniform vec4 u_shadows[NUM_ILLUMINATION_SOURCES];uniform vec4 u_highlights[NUM_ILLUMINATION_SOURCES];
#define PI 3.141592653589793
#define STANDARD 0
#define COMBINED 1
#define IGOR 2
#define MULTIDIRECTIONAL 3
#define BASIC 4
float get_aspect(vec2 deriv){return deriv.x !=0.0 ? atan(deriv.y,-deriv.x) : PI/2.0*(deriv.y > 0.0 ? 1.0 :-1.0);}void igor_hillshade(vec2 deriv){deriv=deriv*u_exaggeration*2.0;float aspect=get_aspect(deriv);float azimuth=u_azimuths[0]+PI;float slope_stength=atan(length(deriv))*2.0/PI;float aspect_strength=1.0-abs(mod((aspect+azimuth)/PI+0.5,2.0)-1.0);float shadow_strength=slope_stength*aspect_strength;float highlight_strength=slope_stength*(1.0-aspect_strength);fragColor=u_shadows[0]*shadow_strength+u_highlights[0]*highlight_strength;}void standard_hillshade(vec2 deriv){float azimuth=u_azimuths[0]+PI;float slope=atan(0.625*length(deriv));float aspect=get_aspect(deriv);float intensity=u_exaggeration;float base=1.875-intensity*1.75;float maxValue=0.5*PI;float scaledSlope=intensity !=0.5 ? ((pow(base,slope)-1.0)/(pow(base,maxValue)-1.0))*maxValue : slope;float accent=cos(scaledSlope);vec4 accent_color=(1.0-accent)*u_accent*clamp(intensity*2.0,0.0,1.0);float shade=abs(mod((aspect+azimuth)/PI+0.5,2.0)-1.0);vec4 shade_color=mix(u_shadows[0],u_highlights[0],shade)*sin(scaledSlope)*clamp(intensity*2.0,0.0,1.0);fragColor=accent_color*(1.0-shade_color.a)+shade_color;}void basic_hillshade(vec2 deriv){deriv=deriv*u_exaggeration*2.0;float azimuth=u_azimuths[0]+PI;float cos_az=cos(azimuth);float sin_az=sin(azimuth);float cos_alt=cos(u_altitudes[0]);float sin_alt=sin(u_altitudes[0]);float cang=(sin_alt-(deriv.y*cos_az*cos_alt-deriv.x*sin_az*cos_alt))/sqrt(1.0+dot(deriv,deriv));float shade=clamp(cang,0.0,1.0);if(shade > 0.5){fragColor=u_highlights[0]*(2.0*shade-1.0);}else
{fragColor=u_shadows[0]*(1.0-2.0*shade);}}void multidirectional_hillshade(vec2 deriv){deriv=deriv*u_exaggeration*2.0;fragColor=vec4(0,0,0,0);for(int i=0; i < NUM_ILLUMINATION_SOURCES; i++){float cos_alt=cos(u_altitudes[i]);float sin_alt=sin(u_altitudes[i]);float cos_az=-cos(u_azimuths[i]);float sin_az=-sin(u_azimuths[i]);float cang=(sin_alt-(deriv.y*cos_az*cos_alt-deriv.x*sin_az*cos_alt))/sqrt(1.0+dot(deriv,deriv));float shade=clamp(cang,0.0,1.0);if(shade > 0.5){fragColor+=u_highlights[i]*(2.0*shade-1.0)/float(NUM_ILLUMINATION_SOURCES);}else
{fragColor+=u_shadows[i]*(1.0-2.0*shade)/float(NUM_ILLUMINATION_SOURCES);}}}void combined_hillshade(vec2 deriv){deriv=deriv*u_exaggeration*2.0;float azimuth=u_azimuths[0]+PI;float cos_az=cos(azimuth);float sin_az=sin(azimuth);float cos_alt=cos(u_altitudes[0]);float sin_alt=sin(u_altitudes[0]);float cang=acos((sin_alt-(deriv.y*cos_az*cos_alt-deriv.x*sin_az*cos_alt))/sqrt(1.0+dot(deriv,deriv)));cang=clamp(cang,0.0,PI/2.0);float shade=cang*atan(length(deriv))*4.0/PI/PI;float highlight=(PI/2.0-cang)*atan(length(deriv))*4.0/PI/PI;fragColor=u_shadows[0]*shade+u_highlights[0]*highlight;}void main() {vec4 pixel=texture(u_image,v_pos);float scaleFactor=cos(radians((u_latrange[0]-u_latrange[1])*(1.0-v_pos.y)+u_latrange[1]));vec2 deriv=((pixel.rg*8.0)-4.0)/scaleFactor;switch(u_method){case BASIC:
basic_hillshade(deriv);break;case COMBINED:
combined_hillshade(deriv);break;case IGOR:
igor_hillshade(deriv);break;case MULTIDIRECTIONAL:
multidirectional_hillshade(deriv);break;case STANDARD:
default:
standard_hillshade(deriv);break;}
#ifdef OVERDRAW_INSPECTOR
fragColor=vec4(1.0);
#endif
}`,"uniform mat4 u_matrix;in vec2 a_pos;out vec2 v_pos;void main() {gl_Position=projectTile(a_pos,a_pos);v_pos=a_pos/8192.0;if (a_pos.y <-32767.5) {v_pos.y=0.0;}if (a_pos.y > 32766.5) {v_pos.y=1.0;}}"),line:nn(`uniform lowp float u_device_pixel_ratio;in vec2 v_width2;in vec2 v_normal;in float v_gamma_scale;
#ifdef GLOBE
in float v_depth;
#endif
#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
float dist=length(v_normal)*v_width2.s;float blur2=(blur+1.0/u_device_pixel_ratio)*v_gamma_scale;float alpha=clamp(min(dist-(v_width2.t-blur2),v_width2.s-dist)/blur2,0.0,1.0);fragColor=color*(alpha*opacity);
#ifdef GLOBE
if (v_depth > 1.0) {discard;}
#endif
#ifdef OVERDRAW_INSPECTOR
fragColor=vec4(1.0);
#endif
}`,`
#define scale 0.015873016
in vec2 a_pos_normal;in vec4 a_data;uniform vec2 u_translation;uniform mediump float u_ratio;uniform vec2 u_units_to_pixels;uniform lowp float u_device_pixel_ratio;out vec2 v_normal;out vec2 v_width2;out float v_gamma_scale;out highp float v_linesofar;
#ifdef GLOBE
out float v_depth;
#endif
#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define mediump float gapwidth
#pragma mapbox: define lowp float offset
#pragma mapbox: define mediump float width
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump float gapwidth
#pragma mapbox: initialize lowp float offset
#pragma mapbox: initialize mediump float width
float ANTIALIASING=1.0/u_device_pixel_ratio/2.0;vec2 a_extrude=a_data.xy-128.0;float a_direction=mod(a_data.z,4.0)-1.0;v_linesofar=(floor(a_data.z/4.0)+a_data.w*64.0)*2.0;vec2 pos=floor(a_pos_normal*0.5);mediump vec2 normal=a_pos_normal-2.0*pos;normal.y=normal.y*2.0-1.0;v_normal=normal;gapwidth=gapwidth/2.0;float halfwidth=width/2.0;offset=-1.0*offset;float inset=gapwidth+(gapwidth > 0.0 ? ANTIALIASING : 0.0);float outset=gapwidth+halfwidth*(gapwidth > 0.0 ? 2.0 : 1.0)+(halfwidth==0.0 ? 0.0 : ANTIALIASING);mediump vec2 dist=outset*a_extrude*scale;mediump float u=0.5*a_direction;mediump float t=1.0-abs(u);mediump vec2 offset2=offset*a_extrude*scale*normal.y*mat2(t,-u,u,t);float adjustedThickness=projectLineThickness(pos.y);vec4 projected_no_extrude=projectTile(pos+offset2/u_ratio*adjustedThickness+u_translation);vec4 projected_with_extrude=projectTile(pos+offset2/u_ratio*adjustedThickness+u_translation+dist/u_ratio*adjustedThickness);gl_Position=projected_with_extrude;
#ifdef GLOBE
v_depth=gl_Position.z/gl_Position.w;
#endif
#ifdef TERRAIN3D
v_gamma_scale=1.0;
#else
float extrude_length_without_perspective=length(dist);float extrude_length_with_perspective=length((projected_with_extrude.xy-projected_no_extrude.xy)/projected_with_extrude.w*u_units_to_pixels);v_gamma_scale=extrude_length_without_perspective/extrude_length_with_perspective;
#endif
v_width2=vec2(outset,inset);}`),lineGradient:nn(`uniform lowp float u_device_pixel_ratio;uniform sampler2D u_image;in vec2 v_width2;in vec2 v_normal;in float v_gamma_scale;in highp vec2 v_uv;
#ifdef GLOBE
in float v_depth;
#endif
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
float dist=length(v_normal)*v_width2.s;float blur2=(blur+1.0/u_device_pixel_ratio)*v_gamma_scale;float alpha=clamp(min(dist-(v_width2.t-blur2),v_width2.s-dist)/blur2,0.0,1.0);vec4 color=texture(u_image,v_uv);fragColor=color*(alpha*opacity);
#ifdef GLOBE
if (v_depth > 1.0) {discard;}
#endif
#ifdef OVERDRAW_INSPECTOR
fragColor=vec4(1.0);
#endif
}`,`
#define scale 0.015873016
in vec2 a_pos_normal;in vec4 a_data;in float a_uv_x;in float a_split_index;uniform vec2 u_translation;uniform mediump float u_ratio;uniform lowp float u_device_pixel_ratio;uniform vec2 u_units_to_pixels;uniform float u_image_height;out vec2 v_normal;out vec2 v_width2;out float v_gamma_scale;out highp vec2 v_uv;
#ifdef GLOBE
out float v_depth;
#endif
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define mediump float gapwidth
#pragma mapbox: define lowp float offset
#pragma mapbox: define mediump float width
void main() {
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump float gapwidth
#pragma mapbox: initialize lowp float offset
#pragma mapbox: initialize mediump float width
float ANTIALIASING=1.0/u_device_pixel_ratio/2.0;vec2 a_extrude=a_data.xy-128.0;float a_direction=mod(a_data.z,4.0)-1.0;highp float texel_height=1.0/u_image_height;highp float half_texel_height=0.5*texel_height;v_uv=vec2(a_uv_x,a_split_index*texel_height-half_texel_height);vec2 pos=floor(a_pos_normal*0.5);mediump vec2 normal=a_pos_normal-2.0*pos;normal.y=normal.y*2.0-1.0;v_normal=normal;gapwidth=gapwidth/2.0;float halfwidth=width/2.0;offset=-1.0*offset;float inset=gapwidth+(gapwidth > 0.0 ? ANTIALIASING : 0.0);float outset=gapwidth+halfwidth*(gapwidth > 0.0 ? 2.0 : 1.0)+(halfwidth==0.0 ? 0.0 : ANTIALIASING);mediump vec2 dist=outset*a_extrude*scale;mediump float u=0.5*a_direction;mediump float t=1.0-abs(u);mediump vec2 offset2=offset*a_extrude*scale*normal.y*mat2(t,-u,u,t);float adjustedThickness=projectLineThickness(pos.y);vec4 projected_no_extrude=projectTile(pos+offset2/u_ratio*adjustedThickness+u_translation);vec4 projected_with_extrude=projectTile(pos+offset2/u_ratio*adjustedThickness+u_translation+dist/u_ratio*adjustedThickness);gl_Position=projected_with_extrude;
#ifdef GLOBE
v_depth=gl_Position.z/gl_Position.w;
#endif
#ifdef TERRAIN3D
v_gamma_scale=1.0;
#else
float extrude_length_without_perspective=length(dist);float extrude_length_with_perspective=length((projected_with_extrude.xy-projected_no_extrude.xy)/projected_with_extrude.w*u_units_to_pixels);v_gamma_scale=extrude_length_without_perspective/extrude_length_with_perspective;
#endif
v_width2=vec2(outset,inset);}`),linePattern:nn(`#ifdef GL_ES
precision highp float;
#endif
uniform lowp float u_device_pixel_ratio;uniform vec2 u_texsize;uniform float u_fade;uniform mediump vec3 u_scale;uniform sampler2D u_image;in vec2 v_normal;in vec2 v_width2;in float v_linesofar;in float v_gamma_scale;in float v_width;
#ifdef GLOBE
in float v_depth;
#endif
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
#pragma mapbox: define lowp float pixel_ratio_from
#pragma mapbox: define lowp float pixel_ratio_to
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
#pragma mapbox: initialize lowp float pixel_ratio_from
#pragma mapbox: initialize lowp float pixel_ratio_to
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;float tileZoomRatio=u_scale.x;float fromScale=u_scale.y;float toScale=u_scale.z;vec2 display_size_a=(pattern_br_a-pattern_tl_a)/pixel_ratio_from;vec2 display_size_b=(pattern_br_b-pattern_tl_b)/pixel_ratio_to;vec2 pattern_size_a=vec2(display_size_a.x*fromScale/tileZoomRatio,display_size_a.y);vec2 pattern_size_b=vec2(display_size_b.x*toScale/tileZoomRatio,display_size_b.y);float aspect_a=display_size_a.y/v_width;float aspect_b=display_size_b.y/v_width;float dist=length(v_normal)*v_width2.s;float blur2=(blur+1.0/u_device_pixel_ratio)*v_gamma_scale;float alpha=clamp(min(dist-(v_width2.t-blur2),v_width2.s-dist)/blur2,0.0,1.0);float x_a=mod(v_linesofar/pattern_size_a.x*aspect_a,1.0);float x_b=mod(v_linesofar/pattern_size_b.x*aspect_b,1.0);float y=0.5*v_normal.y+0.5;vec2 texel_size=1.0/u_texsize;vec2 pos_a=mix(pattern_tl_a*texel_size-texel_size,pattern_br_a*texel_size+texel_size,vec2(x_a,y));vec2 pos_b=mix(pattern_tl_b*texel_size-texel_size,pattern_br_b*texel_size+texel_size,vec2(x_b,y));vec4 color=mix(texture(u_image,pos_a),texture(u_image,pos_b),u_fade);fragColor=color*alpha*opacity;
#ifdef GLOBE
if (v_depth > 1.0) {discard;}
#endif
#ifdef OVERDRAW_INSPECTOR
fragColor=vec4(1.0);
#endif
}`,`
#define scale 0.015873016
#define LINE_DISTANCE_SCALE 2.0
in vec2 a_pos_normal;in vec4 a_data;uniform vec2 u_translation;uniform vec2 u_units_to_pixels;uniform mediump float u_ratio;uniform lowp float u_device_pixel_ratio;out vec2 v_normal;out vec2 v_width2;out float v_linesofar;out float v_gamma_scale;out float v_width;
#ifdef GLOBE
out float v_depth;
#endif
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp float offset
#pragma mapbox: define mediump float gapwidth
#pragma mapbox: define mediump float width
#pragma mapbox: define lowp float floorwidth
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
#pragma mapbox: define lowp float pixel_ratio_from
#pragma mapbox: define lowp float pixel_ratio_to
void main() {
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize lowp float offset
#pragma mapbox: initialize mediump float gapwidth
#pragma mapbox: initialize mediump float width
#pragma mapbox: initialize lowp float floorwidth
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
#pragma mapbox: initialize lowp float pixel_ratio_from
#pragma mapbox: initialize lowp float pixel_ratio_to
float ANTIALIASING=1.0/u_device_pixel_ratio/2.0;vec2 a_extrude=a_data.xy-128.0;float a_direction=mod(a_data.z,4.0)-1.0;float a_linesofar=(floor(a_data.z/4.0)+a_data.w*64.0)*LINE_DISTANCE_SCALE;vec2 pos=floor(a_pos_normal*0.5);mediump vec2 normal=a_pos_normal-2.0*pos;normal.y=normal.y*2.0-1.0;v_normal=normal;gapwidth=gapwidth/2.0;float halfwidth=width/2.0;offset=-1.0*offset;float inset=gapwidth+(gapwidth > 0.0 ? ANTIALIASING : 0.0);float outset=gapwidth+halfwidth*(gapwidth > 0.0 ? 2.0 : 1.0)+(halfwidth==0.0 ? 0.0 : ANTIALIASING);mediump vec2 dist=outset*a_extrude*scale;mediump float u=0.5*a_direction;mediump float t=1.0-abs(u);mediump vec2 offset2=offset*a_extrude*scale*normal.y*mat2(t,-u,u,t);float adjustedThickness=projectLineThickness(pos.y);vec4 projected_no_extrude=projectTile(pos+offset2/u_ratio*adjustedThickness+u_translation);vec4 projected_with_extrude=projectTile(pos+offset2/u_ratio*adjustedThickness+u_translation+dist/u_ratio*adjustedThickness);gl_Position=projected_with_extrude;
#ifdef GLOBE
v_depth=gl_Position.z/gl_Position.w;
#endif
#ifdef TERRAIN3D
v_gamma_scale=1.0;
#else
float extrude_length_without_perspective=length(dist);float extrude_length_with_perspective=length((projected_with_extrude.xy-projected_no_extrude.xy)/projected_with_extrude.w*u_units_to_pixels);v_gamma_scale=extrude_length_without_perspective/extrude_length_with_perspective;
#endif
v_linesofar=a_linesofar;v_width2=vec2(outset,inset);v_width=floorwidth;}`),lineSDF:nn(`uniform lowp float u_device_pixel_ratio;uniform sampler2D u_image;uniform float u_sdfgamma;uniform float u_mix;in vec2 v_normal;in vec2 v_width2;in vec2 v_tex_a;in vec2 v_tex_b;in float v_gamma_scale;
#ifdef GLOBE
in float v_depth;
#endif
#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define mediump float width
#pragma mapbox: define lowp float floorwidth
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump float width
#pragma mapbox: initialize lowp float floorwidth
float dist=length(v_normal)*v_width2.s;float blur2=(blur+1.0/u_device_pixel_ratio)*v_gamma_scale;float alpha=clamp(min(dist-(v_width2.t-blur2),v_width2.s-dist)/blur2,0.0,1.0);float sdfdist_a=texture(u_image,v_tex_a).a;float sdfdist_b=texture(u_image,v_tex_b).a;float sdfdist=mix(sdfdist_a,sdfdist_b,u_mix);alpha*=smoothstep(0.5-u_sdfgamma/floorwidth,0.5+u_sdfgamma/floorwidth,sdfdist);fragColor=color*(alpha*opacity);
#ifdef GLOBE
if (v_depth > 1.0) {discard;}
#endif
#ifdef OVERDRAW_INSPECTOR
fragColor=vec4(1.0);
#endif
}`,`
#define scale 0.015873016
#define LINE_DISTANCE_SCALE 2.0
in vec2 a_pos_normal;in vec4 a_data;uniform vec2 u_translation;uniform mediump float u_ratio;uniform lowp float u_device_pixel_ratio;uniform vec2 u_patternscale_a;uniform float u_tex_y_a;uniform vec2 u_patternscale_b;uniform float u_tex_y_b;uniform vec2 u_units_to_pixels;out vec2 v_normal;out vec2 v_width2;out vec2 v_tex_a;out vec2 v_tex_b;out float v_gamma_scale;
#ifdef GLOBE
out float v_depth;
#endif
#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define mediump float gapwidth
#pragma mapbox: define lowp float offset
#pragma mapbox: define mediump float width
#pragma mapbox: define lowp float floorwidth
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump float gapwidth
#pragma mapbox: initialize lowp float offset
#pragma mapbox: initialize mediump float width
#pragma mapbox: initialize lowp float floorwidth
float ANTIALIASING=1.0/u_device_pixel_ratio/2.0;vec2 a_extrude=a_data.xy-128.0;float a_direction=mod(a_data.z,4.0)-1.0;float a_linesofar=(floor(a_data.z/4.0)+a_data.w*64.0)*LINE_DISTANCE_SCALE;vec2 pos=floor(a_pos_normal*0.5);mediump vec2 normal=a_pos_normal-2.0*pos;normal.y=normal.y*2.0-1.0;v_normal=normal;gapwidth=gapwidth/2.0;float halfwidth=width/2.0;offset=-1.0*offset;float inset=gapwidth+(gapwidth > 0.0 ? ANTIALIASING : 0.0);float outset=gapwidth+halfwidth*(gapwidth > 0.0 ? 2.0 : 1.0)+(halfwidth==0.0 ? 0.0 : ANTIALIASING);mediump vec2 dist=outset*a_extrude*scale;mediump float u=0.5*a_direction;mediump float t=1.0-abs(u);mediump vec2 offset2=offset*a_extrude*scale*normal.y*mat2(t,-u,u,t);float adjustedThickness=projectLineThickness(pos.y);vec4 projected_no_extrude=projectTile(pos+offset2/u_ratio*adjustedThickness+u_translation);vec4 projected_with_extrude=projectTile(pos+offset2/u_ratio*adjustedThickness+u_translation+dist/u_ratio*adjustedThickness);gl_Position=projected_with_extrude;
#ifdef GLOBE
v_depth=gl_Position.z/gl_Position.w;
#endif
#ifdef TERRAIN3D
v_gamma_scale=1.0;
#else
float extrude_length_without_perspective=length(dist);float extrude_length_with_perspective=length((projected_with_extrude.xy-projected_no_extrude.xy)/projected_with_extrude.w*u_units_to_pixels);v_gamma_scale=extrude_length_without_perspective/extrude_length_with_perspective;
#endif
v_tex_a=vec2(a_linesofar*u_patternscale_a.x/floorwidth,normal.y*u_patternscale_a.y+u_tex_y_a);v_tex_b=vec2(a_linesofar*u_patternscale_b.x/floorwidth,normal.y*u_patternscale_b.y+u_tex_y_b);v_width2=vec2(outset,inset);}`),raster:nn(`uniform float u_fade_t;uniform float u_opacity;uniform sampler2D u_image0;uniform sampler2D u_image1;in vec2 v_pos0;in vec2 v_pos1;uniform float u_brightness_low;uniform float u_brightness_high;uniform float u_saturation_factor;uniform float u_contrast_factor;uniform vec3 u_spin_weights;void main() {vec4 color0=texture(u_image0,v_pos0);vec4 color1=texture(u_image1,v_pos1);if (color0.a > 0.0) {color0.rgb=color0.rgb/color0.a;}if (color1.a > 0.0) {color1.rgb=color1.rgb/color1.a;}vec4 color=mix(color0,color1,u_fade_t);color.a*=u_opacity;vec3 rgb=color.rgb;rgb=vec3(dot(rgb,u_spin_weights.xyz),dot(rgb,u_spin_weights.zxy),dot(rgb,u_spin_weights.yzx));float average=(color.r+color.g+color.b)/3.0;rgb+=(average-rgb)*u_saturation_factor;rgb=(rgb-0.5)*u_contrast_factor+0.5;vec3 u_high_vec=vec3(u_brightness_low,u_brightness_low,u_brightness_low);vec3 u_low_vec=vec3(u_brightness_high,u_brightness_high,u_brightness_high);fragColor=vec4(mix(u_high_vec,u_low_vec,rgb)*color.a,color.a);
#ifdef OVERDRAW_INSPECTOR
fragColor=vec4(1.0);
#endif
}`,`uniform vec2 u_tl_parent;uniform float u_scale_parent;uniform float u_buffer_scale;uniform vec4 u_coords_top;uniform vec4 u_coords_bottom;in vec2 a_pos;out vec2 v_pos0;out vec2 v_pos1;void main() {vec2 fractionalPos=a_pos/8192.0;vec2 position=mix(mix(u_coords_top.xy,u_coords_top.zw,fractionalPos.x),mix(u_coords_bottom.xy,u_coords_bottom.zw,fractionalPos.x),fractionalPos.y);gl_Position=projectTile(position,position);v_pos0=((fractionalPos-0.5)/u_buffer_scale)+0.5;
#ifdef GLOBE
if (a_pos.y <-32767.5) {v_pos0.y=0.0;}if (a_pos.y > 32766.5) {v_pos0.y=1.0;}
#endif
v_pos1=(v_pos0*u_scale_parent)+u_tl_parent;}`),symbolIcon:nn(`uniform sampler2D u_texture;in vec2 v_tex;in float v_fade_opacity;
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize lowp float opacity
lowp float alpha=opacity*v_fade_opacity;fragColor=texture(u_texture,v_tex)*alpha;
#ifdef OVERDRAW_INSPECTOR
fragColor=vec4(1.0);
#endif
}`,`in vec4 a_pos_offset;in vec4 a_data;in vec4 a_pixeloffset;in vec3 a_projected_pos;in float a_fade_opacity;uniform bool u_is_size_zoom_constant;uniform bool u_is_size_feature_constant;uniform highp float u_size_t;uniform highp float u_size;uniform highp float u_camera_to_center_distance;uniform highp float u_pitch;uniform bool u_rotate_symbol;uniform highp float u_aspect_ratio;uniform float u_fade_change;uniform mat4 u_label_plane_matrix;uniform mat4 u_coord_matrix;uniform bool u_is_text;uniform bool u_pitch_with_map;uniform vec2 u_texsize;uniform bool u_is_along_line;uniform bool u_is_variable_anchor;uniform vec2 u_translation;uniform float u_pitched_scale;out vec2 v_tex;out float v_fade_opacity;
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize lowp float opacity
vec2 a_pos=a_pos_offset.xy;vec2 a_offset=a_pos_offset.zw;vec2 a_tex=a_data.xy;vec2 a_size=a_data.zw;float a_size_min=floor(a_size[0]*0.5);vec2 a_pxoffset=a_pixeloffset.xy;vec2 a_minFontScale=a_pixeloffset.zw/256.0;float ele=get_elevation(a_pos);highp float segment_angle=-a_projected_pos[2];float size;if (!u_is_size_zoom_constant && !u_is_size_feature_constant) {size=mix(a_size_min,a_size[1],u_size_t)/128.0;} else if (u_is_size_zoom_constant && !u_is_size_feature_constant) {size=a_size_min/128.0;} else {size=u_size;}vec2 translated_a_pos=a_pos+u_translation;vec4 projectedPoint=projectTileWithElevation(translated_a_pos,ele);highp float camera_to_anchor_distance=projectedPoint.w;highp float distance_ratio=u_pitch_with_map ?
camera_to_anchor_distance/u_camera_to_center_distance :
u_camera_to_center_distance/camera_to_anchor_distance;highp float perspective_ratio=clamp(0.5+0.5*distance_ratio,0.0,4.0);size*=perspective_ratio;float fontScale=u_is_text ? size/24.0 : size;highp float symbol_rotation=0.0;if (u_rotate_symbol) {vec4 offsetProjectedPoint=projectTileWithElevation(translated_a_pos+vec2(1,0),ele);vec2 a=projectedPoint.xy/projectedPoint.w;vec2 b=offsetProjectedPoint.xy/offsetProjectedPoint.w;symbol_rotation=atan((b.y-a.y)/u_aspect_ratio,b.x-a.x);}highp float angle_sin=sin(segment_angle+symbol_rotation);highp float angle_cos=cos(segment_angle+symbol_rotation);mat2 rotation_matrix=mat2(angle_cos,-1.0*angle_sin,angle_sin,angle_cos);vec4 projected_pos;if (u_is_along_line || u_is_variable_anchor) {projected_pos=vec4(a_projected_pos.xy,ele,1.0);} else if (u_pitch_with_map) {projected_pos=u_label_plane_matrix*vec4(a_projected_pos.xy+u_translation,ele,1.0);} else {projected_pos=u_label_plane_matrix*projectTileWithElevation(a_projected_pos.xy+u_translation,ele);}float z=float(u_pitch_with_map)*projected_pos.z/projected_pos.w;float projectionScaling=1.0;
#ifdef GLOBE
if(u_pitch_with_map) {float anchor_pos_tile_y=(u_coord_matrix*vec4(projected_pos.xy/projected_pos.w,z,1.0)).y;projectionScaling=mix(projectionScaling,1.0/circumferenceRatioAtTileY(anchor_pos_tile_y)*u_pitched_scale,u_projection_transition);}
#endif
vec4 finalPos=u_coord_matrix*vec4(projected_pos.xy/projected_pos.w+rotation_matrix*(a_offset/32.0*max(a_minFontScale,fontScale)+a_pxoffset/16.0)*projectionScaling,z,1.0);if(u_pitch_with_map) {finalPos=projectTileWithElevation(finalPos.xy,finalPos.z);}gl_Position=finalPos;v_tex=a_tex/u_texsize;vec2 fade_opacity=unpack_opacity(a_fade_opacity);float fade_change=fade_opacity[1] > 0.5 ? u_fade_change :-u_fade_change;float visibility=calculate_visibility(projectedPoint);v_fade_opacity=max(0.0,min(visibility,fade_opacity[0]+fade_change));}`),symbolSDF:nn(`#define SDF_PX 8.0
uniform bool u_is_halo;uniform sampler2D u_texture;uniform highp float u_gamma_scale;uniform lowp float u_device_pixel_ratio;uniform bool u_is_text;in vec2 v_data0;in vec3 v_data1;
#pragma mapbox: define highp vec4 fill_color
#pragma mapbox: define highp vec4 halo_color
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp float halo_width
#pragma mapbox: define lowp float halo_blur
void main() {
#pragma mapbox: initialize highp vec4 fill_color
#pragma mapbox: initialize highp vec4 halo_color
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize lowp float halo_width
#pragma mapbox: initialize lowp float halo_blur
float EDGE_GAMMA=0.105/u_device_pixel_ratio;vec2 tex=v_data0.xy;float gamma_scale=v_data1.x;float size=v_data1.y;float fade_opacity=v_data1[2];float fontScale=u_is_text ? size/24.0 : size;lowp vec4 color=fill_color;highp float gamma=EDGE_GAMMA/(fontScale*u_gamma_scale);lowp float inner_edge=(256.0-64.0)/256.0;if (u_is_halo) {color=halo_color;gamma=(halo_blur*1.19/SDF_PX+EDGE_GAMMA)/(fontScale*u_gamma_scale);inner_edge=inner_edge+gamma*gamma_scale;}lowp float dist=texture(u_texture,tex).a;highp float gamma_scaled=gamma*gamma_scale;highp float alpha=smoothstep(inner_edge-gamma_scaled,inner_edge+gamma_scaled,dist);if (u_is_halo) {lowp float halo_edge=(6.0-halo_width/fontScale)/SDF_PX;alpha=min(smoothstep(halo_edge-gamma_scaled,halo_edge+gamma_scaled,dist),1.0-alpha);}fragColor=color*(alpha*opacity*fade_opacity);
#ifdef OVERDRAW_INSPECTOR
fragColor=vec4(1.0);
#endif
}`,`in vec4 a_pos_offset;in vec4 a_data;in vec4 a_pixeloffset;in vec3 a_projected_pos;in float a_fade_opacity;uniform bool u_is_size_zoom_constant;uniform bool u_is_size_feature_constant;uniform highp float u_size_t;uniform highp float u_size;uniform mat4 u_label_plane_matrix;uniform mat4 u_coord_matrix;uniform bool u_is_text;uniform bool u_pitch_with_map;uniform bool u_is_along_line;uniform bool u_is_variable_anchor;uniform highp float u_pitch;uniform bool u_rotate_symbol;uniform highp float u_aspect_ratio;uniform highp float u_camera_to_center_distance;uniform float u_fade_change;uniform vec2 u_texsize;uniform vec2 u_translation;uniform float u_pitched_scale;out vec2 v_data0;out vec3 v_data1;
#pragma mapbox: define highp vec4 fill_color
#pragma mapbox: define highp vec4 halo_color
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp float halo_width
#pragma mapbox: define lowp float halo_blur
void main() {
#pragma mapbox: initialize highp vec4 fill_color
#pragma mapbox: initialize highp vec4 halo_color
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize lowp float halo_width
#pragma mapbox: initialize lowp float halo_blur
vec2 a_pos=a_pos_offset.xy;vec2 a_offset=a_pos_offset.zw;vec2 a_tex=a_data.xy;vec2 a_size=a_data.zw;float a_size_min=floor(a_size[0]*0.5);vec2 a_pxoffset=a_pixeloffset.xy;float ele=get_elevation(a_pos);highp float segment_angle=-a_projected_pos[2];float size;if (!u_is_size_zoom_constant && !u_is_size_feature_constant) {size=mix(a_size_min,a_size[1],u_size_t)/128.0;} else if (u_is_size_zoom_constant && !u_is_size_feature_constant) {size=a_size_min/128.0;} else {size=u_size;}vec2 translated_a_pos=a_pos+u_translation;vec4 projectedPoint=projectTileWithElevation(translated_a_pos,ele);highp float camera_to_anchor_distance=projectedPoint.w;highp float distance_ratio=u_pitch_with_map ?
camera_to_anchor_distance/u_camera_to_center_distance :
u_camera_to_center_distance/camera_to_anchor_distance;highp float perspective_ratio=clamp(0.5+0.5*distance_ratio,0.0,4.0);size*=perspective_ratio;float fontScale=u_is_text ? size/24.0 : size;highp float symbol_rotation=0.0;if (u_rotate_symbol) {vec4 offsetProjectedPoint=projectTileWithElevation(translated_a_pos+vec2(1,0),ele);vec2 a=projectedPoint.xy/projectedPoint.w;vec2 b=offsetProjectedPoint.xy/offsetProjectedPoint.w;symbol_rotation=atan((b.y-a.y)/u_aspect_ratio,b.x-a.x);}highp float angle_sin=sin(segment_angle+symbol_rotation);highp float angle_cos=cos(segment_angle+symbol_rotation);mat2 rotation_matrix=mat2(angle_cos,-1.0*angle_sin,angle_sin,angle_cos);vec4 projected_pos;if (u_is_along_line || u_is_variable_anchor) {projected_pos=vec4(a_projected_pos.xy,ele,1.0);} else if (u_pitch_with_map) {projected_pos=u_label_plane_matrix*vec4(a_projected_pos.xy+u_translation,ele,1.0);} else {projected_pos=u_label_plane_matrix*projectTileWithElevation(a_projected_pos.xy+u_translation,ele);}float z=float(u_pitch_with_map)*projected_pos.z/projected_pos.w;float projectionScaling=1.0;
#ifdef GLOBE
if(u_pitch_with_map) {float anchor_pos_tile_y=(u_coord_matrix*vec4(projected_pos.xy/projected_pos.w,z,1.0)).y;projectionScaling=mix(projectionScaling,1.0/circumferenceRatioAtTileY(anchor_pos_tile_y)*u_pitched_scale,u_projection_transition);}
#endif
vec4 finalPos=u_coord_matrix*vec4(projected_pos.xy/projected_pos.w+rotation_matrix*(a_offset/32.0*fontScale+a_pxoffset)*projectionScaling,z,1.0);if(u_pitch_with_map) {finalPos=projectTileWithElevation(finalPos.xy,finalPos.z);}float gamma_scale=finalPos.w;gl_Position=finalPos;vec2 fade_opacity=unpack_opacity(a_fade_opacity);float visibility=calculate_visibility(projectedPoint);float fade_change=fade_opacity[1] > 0.5 ? u_fade_change :-u_fade_change;float interpolated_fade_opacity=max(0.0,min(visibility,fade_opacity[0]+fade_change));v_data0=a_tex/u_texsize;v_data1=vec3(gamma_scale,size,interpolated_fade_opacity);}`),symbolTextAndIcon:nn(`#define SDF_PX 8.0
#define SDF 1.0
#define ICON 0.0
uniform bool u_is_halo;uniform sampler2D u_texture;uniform sampler2D u_texture_icon;uniform highp float u_gamma_scale;uniform lowp float u_device_pixel_ratio;in vec4 v_data0;in vec4 v_data1;
#pragma mapbox: define highp vec4 fill_color
#pragma mapbox: define highp vec4 halo_color
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp float halo_width
#pragma mapbox: define lowp float halo_blur
void main() {
#pragma mapbox: initialize highp vec4 fill_color
#pragma mapbox: initialize highp vec4 halo_color
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize lowp float halo_width
#pragma mapbox: initialize lowp float halo_blur
float fade_opacity=v_data1[2];if (v_data1.w==ICON) {vec2 tex_icon=v_data0.zw;lowp float alpha=opacity*fade_opacity;fragColor=texture(u_texture_icon,tex_icon)*alpha;
#ifdef OVERDRAW_INSPECTOR
fragColor=vec4(1.0);
#endif
return;}vec2 tex=v_data0.xy;float EDGE_GAMMA=0.105/u_device_pixel_ratio;float gamma_scale=v_data1.x;float size=v_data1.y;float fontScale=size/24.0;lowp vec4 color=fill_color;highp float gamma=EDGE_GAMMA/(fontScale*u_gamma_scale);lowp float buff=(256.0-64.0)/256.0;if (u_is_halo) {color=halo_color;gamma=(halo_blur*1.19/SDF_PX+EDGE_GAMMA)/(fontScale*u_gamma_scale);buff=(6.0-halo_width/fontScale)/SDF_PX;}lowp float dist=texture(u_texture,tex).a;highp float gamma_scaled=gamma*gamma_scale;highp float alpha=smoothstep(buff-gamma_scaled,buff+gamma_scaled,dist);fragColor=color*(alpha*opacity*fade_opacity);
#ifdef OVERDRAW_INSPECTOR
fragColor=vec4(1.0);
#endif
}`,`in vec4 a_pos_offset;in vec4 a_data;in vec3 a_projected_pos;in float a_fade_opacity;uniform bool u_is_size_zoom_constant;uniform bool u_is_size_feature_constant;uniform highp float u_size_t;uniform highp float u_size;uniform mat4 u_label_plane_matrix;uniform mat4 u_coord_matrix;uniform bool u_is_text;uniform bool u_pitch_with_map;uniform highp float u_pitch;uniform bool u_rotate_symbol;uniform highp float u_aspect_ratio;uniform highp float u_camera_to_center_distance;uniform float u_fade_change;uniform vec2 u_texsize;uniform vec2 u_texsize_icon;uniform bool u_is_along_line;uniform bool u_is_variable_anchor;uniform vec2 u_translation;uniform float u_pitched_scale;out vec4 v_data0;out vec4 v_data1;
#pragma mapbox: define highp vec4 fill_color
#pragma mapbox: define highp vec4 halo_color
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp float halo_width
#pragma mapbox: define lowp float halo_blur
void main() {
#pragma mapbox: initialize highp vec4 fill_color
#pragma mapbox: initialize highp vec4 halo_color
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize lowp float halo_width
#pragma mapbox: initialize lowp float halo_blur
vec2 a_pos=a_pos_offset.xy;vec2 a_offset=a_pos_offset.zw;vec2 a_tex=a_data.xy;vec2 a_size=a_data.zw;float a_size_min=floor(a_size[0]*0.5);float is_sdf=a_size[0]-2.0*a_size_min;float ele=get_elevation(a_pos);highp float segment_angle=-a_projected_pos[2];float size;if (!u_is_size_zoom_constant && !u_is_size_feature_constant) {size=mix(a_size_min,a_size[1],u_size_t)/128.0;} else if (u_is_size_zoom_constant && !u_is_size_feature_constant) {size=a_size_min/128.0;} else {size=u_size;}vec2 translated_a_pos=a_pos+u_translation;vec4 projectedPoint=projectTileWithElevation(translated_a_pos,ele);highp float camera_to_anchor_distance=projectedPoint.w;highp float distance_ratio=u_pitch_with_map ?
camera_to_anchor_distance/u_camera_to_center_distance :
u_camera_to_center_distance/camera_to_anchor_distance;highp float perspective_ratio=clamp(0.5+0.5*distance_ratio,0.0,4.0);size*=perspective_ratio;float fontScale=size/24.0;highp float symbol_rotation=0.0;if (u_rotate_symbol) {vec4 offsetProjectedPoint=projectTileWithElevation(translated_a_pos+vec2(1,0),ele);vec2 a=projectedPoint.xy/projectedPoint.w;vec2 b=offsetProjectedPoint.xy/offsetProjectedPoint.w;symbol_rotation=atan((b.y-a.y)/u_aspect_ratio,b.x-a.x);}highp float angle_sin=sin(segment_angle+symbol_rotation);highp float angle_cos=cos(segment_angle+symbol_rotation);mat2 rotation_matrix=mat2(angle_cos,-1.0*angle_sin,angle_sin,angle_cos);vec4 projected_pos;if (u_is_along_line || u_is_variable_anchor) {projected_pos=vec4(a_projected_pos.xy,ele,1.0);} else if (u_pitch_with_map) {projected_pos=u_label_plane_matrix*vec4(a_projected_pos.xy+u_translation,ele,1.0);} else {projected_pos=u_label_plane_matrix*projectTileWithElevation(a_projected_pos.xy+u_translation,ele);}float z=float(u_pitch_with_map)*projected_pos.z/projected_pos.w;float projectionScaling=1.0;
#ifdef GLOBE
if(u_pitch_with_map && !u_is_along_line) {float anchor_pos_tile_y=(u_coord_matrix*vec4(projected_pos.xy/projected_pos.w,z,1.0)).y;projectionScaling=mix(projectionScaling,1.0/circumferenceRatioAtTileY(anchor_pos_tile_y)*u_pitched_scale,u_projection_transition);}
#endif
vec4 finalPos=u_coord_matrix*vec4(projected_pos.xy/projected_pos.w+rotation_matrix*(a_offset/32.0*fontScale)*projectionScaling,z,1.0);if(u_pitch_with_map) {finalPos=projectTileWithElevation(finalPos.xy,finalPos.z);}float gamma_scale=finalPos.w;gl_Position=finalPos;vec2 fade_opacity=unpack_opacity(a_fade_opacity);float visibility=calculate_visibility(projectedPoint);float fade_change=fade_opacity[1] > 0.5 ? u_fade_change :-u_fade_change;float interpolated_fade_opacity=max(0.0,min(visibility,fade_opacity[0]+fade_change));v_data0.xy=a_tex/u_texsize;v_data0.zw=a_tex/u_texsize_icon;v_data1=vec4(gamma_scale,size,interpolated_fade_opacity,is_sdf);}`),terrain:nn("uniform sampler2D u_texture;uniform vec4 u_fog_color;uniform vec4 u_horizon_color;uniform float u_fog_ground_blend;uniform float u_fog_ground_blend_opacity;uniform float u_horizon_fog_blend;uniform bool u_is_globe_mode;in vec2 v_texture_pos;in float v_fog_depth;const float gamma=2.2;vec4 gammaToLinear(vec4 color) {return pow(color,vec4(gamma));}vec4 linearToGamma(vec4 color) {return pow(color,vec4(1.0/gamma));}void main() {vec4 surface_color=texture(u_texture,vec2(v_texture_pos.x,1.0-v_texture_pos.y));if (!u_is_globe_mode && v_fog_depth > u_fog_ground_blend) {vec4 surface_color_linear=gammaToLinear(surface_color);float blend_color=smoothstep(0.0,1.0,max((v_fog_depth-u_horizon_fog_blend)/(1.0-u_horizon_fog_blend),0.0));vec4 fog_horizon_color_linear=mix(gammaToLinear(u_fog_color),gammaToLinear(u_horizon_color),blend_color);float factor_fog=max(v_fog_depth-u_fog_ground_blend,0.0)/(1.0-u_fog_ground_blend);fragColor=linearToGamma(mix(surface_color_linear,fog_horizon_color_linear,pow(factor_fog,2.0)*u_fog_ground_blend_opacity));} else {fragColor=surface_color;}}","in vec3 a_pos3d;uniform mat4 u_fog_matrix;uniform float u_ele_delta;out vec2 v_texture_pos;out float v_fog_depth;void main() {float ele=get_elevation(a_pos3d.xy);float ele_delta=a_pos3d.z==1.0 ? u_ele_delta : 0.0;v_texture_pos=a_pos3d.xy/8192.0;gl_Position=projectTileFor3D(a_pos3d.xy,get_elevation(a_pos3d.xy)-ele_delta);vec4 pos=u_fog_matrix*vec4(a_pos3d.xy,ele,1.0);v_fog_depth=pos.z/pos.w*0.5+0.5;}"),terrainDepth:nn("in float v_depth;const highp vec4 bitSh=vec4(256.*256.*256.,256.*256.,256.,1.);const highp vec4 bitMsk=vec4(0.,vec3(1./256.0));highp vec4 pack(highp float value) {highp vec4 comp=fract(value*bitSh);comp-=comp.xxyz*bitMsk;return comp;}void main() {fragColor=pack(v_depth);}","in vec3 a_pos3d;uniform float u_ele_delta;out float v_depth;void main() {float ele=get_elevation(a_pos3d.xy);float ele_delta=a_pos3d.z==1.0 ? u_ele_delta : 0.0;gl_Position=projectTileFor3D(a_pos3d.xy,ele-ele_delta);v_depth=gl_Position.z/gl_Position.w;}"),terrainCoords:nn("precision mediump float;uniform sampler2D u_texture;uniform float u_terrain_coords_id;in vec2 v_texture_pos;void main() {vec4 rgba=texture(u_texture,v_texture_pos);fragColor=vec4(rgba.r,rgba.g,rgba.b,u_terrain_coords_id);}","in vec3 a_pos3d;uniform float u_ele_delta;out vec2 v_texture_pos;void main() {float ele=get_elevation(a_pos3d.xy);float ele_delta=a_pos3d.z==1.0 ? u_ele_delta : 0.0;v_texture_pos=a_pos3d.xy/8192.0;gl_Position=projectTileFor3D(a_pos3d.xy,ele-ele_delta);}"),projectionErrorMeasurement:nn("in vec4 v_output_error_encoded;void main() {fragColor=v_output_error_encoded;}","in vec2 a_pos;uniform highp float u_input;uniform highp float u_output_expected;out vec4 v_output_error_encoded;void main() {float real_output=2.0*atan(exp(PI-(u_input*PI*2.0)))-PI*0.5;float error=real_output-u_output_expected;float abs_error=abs(error)*128.0;v_output_error_encoded.x=min(floor(abs_error*256.0),255.0)/255.0;abs_error-=v_output_error_encoded.x;v_output_error_encoded.y=min(floor(abs_error*65536.0),255.0)/255.0;abs_error-=v_output_error_encoded.x/255.0;v_output_error_encoded.z=min(floor(abs_error*16777216.0),255.0)/255.0;v_output_error_encoded.w=error >=0.0 ? 1.0 : 0.0;gl_Position=vec4(a_pos,0.0,1.0);}"),atmosphere:nn(`in vec3 view_direction;uniform vec3 u_sun_pos;uniform vec3 u_globe_position;uniform float u_globe_radius;uniform float u_atmosphere_blend;/**Shader use from https:*Made some change to adapt to MapLibre Globe geometry*/const float PI=3.141592653589793;const int iSteps=5;const int jSteps=3;/*radius of the planet*/const float EARTH_RADIUS=6371e3;/*radius of the atmosphere*/const float ATMOS_RADIUS=6471e3;vec2 rsi(vec3 r0,vec3 rd,float sr) {float a=dot(rd,rd);float b=2.0*dot(rd,r0);float c=dot(r0,r0)-(sr*sr);float d=(b*b)-4.0*a*c;if (d < 0.0) return vec2(1e5,-1e5);return vec2((-b-sqrt(d))/(2.0*a),(-b+sqrt(d))/(2.0*a));}vec4 atmosphere(vec3 r,vec3 r0,vec3 pSun,float iSun,float rPlanet,float rAtmos,vec3 kRlh,float kMie,float shRlh,float shMie,float g) {pSun=normalize(pSun);r=normalize(r);vec2 p=rsi(r0,r,rAtmos);if (p.x > p.y) {return vec4(0.0,0.0,0.0,1.0);}if (p.x < 0.0) {p.x=0.0;}vec3 pos=r0+r*p.x;vec2 p2=rsi(r0,r,rPlanet);if (p2.x <=p2.y && p2.x > 0.0) {p.y=min(p.y,p2.x);}float iStepSize=(p.y-p.x)/float(iSteps);float iTime=p.x+iStepSize*0.5;vec3 totalRlh=vec3(0,0,0);vec3 totalMie=vec3(0,0,0);float iOdRlh=0.0;float iOdMie=0.0;float mu=dot(r,pSun);float mumu=mu*mu;float gg=g*g;float pRlh=3.0/(16.0*PI)*(1.0+mumu);float pMie=3.0/(8.0*PI)*((1.0-gg)*(mumu+1.0))/(pow(1.0+gg-2.0*mu*g,1.5)*(2.0+gg));for (int i=0; i < iSteps; i++) {vec3 iPos=r0+r*iTime;float iHeight=length(iPos)-rPlanet;float odStepRlh=exp(-iHeight/shRlh)*iStepSize;float odStepMie=exp(-iHeight/shMie)*iStepSize;iOdRlh+=odStepRlh;iOdMie+=odStepMie;float jStepSize=rsi(iPos,pSun,rAtmos).y/float(jSteps);float jTime=jStepSize*0.5;float jOdRlh=0.0;float jOdMie=0.0;for (int j=0; j < jSteps; j++) {vec3 jPos=iPos+pSun*jTime;float jHeight=length(jPos)-rPlanet;jOdRlh+=exp(-jHeight/shRlh)*jStepSize;jOdMie+=exp(-jHeight/shMie)*jStepSize;jTime+=jStepSize;}vec3 attn=exp(-(kMie*(iOdMie+jOdMie)+kRlh*(iOdRlh+jOdRlh)));totalRlh+=odStepRlh*attn;totalMie+=odStepMie*attn;iTime+=iStepSize;}float opacity=exp(-(length(kRlh)*length(totalRlh)+kMie*length(totalMie)));vec3 color=iSun*(pRlh*kRlh*totalRlh+pMie*kMie*totalMie);return vec4(color,opacity);}void main() {vec3 scale_camera_pos=-u_globe_position*EARTH_RADIUS/u_globe_radius;vec4 color=atmosphere(normalize(view_direction),scale_camera_pos,u_sun_pos,22.0,EARTH_RADIUS,ATMOS_RADIUS,vec3(5.5e-6,13.0e-6,22.4e-6),21e-6,8e3,1.2e3,0.758
);color.rgb=1.0-exp(-1.0*color.rgb);color=pow(color,vec4(1.0/2.2));fragColor=vec4(color.rgb,1.0-color.a)*u_atmosphere_blend;}`,"in vec2 a_pos;uniform mat4 u_inv_proj_matrix;out vec3 view_direction;void main() {view_direction=(u_inv_proj_matrix*vec4(a_pos,0.0,1.0)).xyz;gl_Position=vec4(a_pos,0.0,1.0);}"),sky:nn("uniform vec4 u_sky_color;uniform vec4 u_horizon_color;uniform vec2 u_horizon;uniform vec2 u_horizon_normal;uniform float u_sky_horizon_blend;uniform float u_sky_blend;void main() {float x=gl_FragCoord.x;float y=gl_FragCoord.y;float blend=(y-u_horizon.y)*u_horizon_normal.y+(x-u_horizon.x)*u_horizon_normal.x;if (blend > 0.0) {if (blend < u_sky_horizon_blend) {fragColor=mix(u_sky_color,u_horizon_color,pow(1.0-blend/u_sky_horizon_blend,2.0));} else {fragColor=u_sky_color;}}fragColor=mix(fragColor,vec4(vec3(0.0),0.0),u_sky_blend);}","in vec2 a_pos;void main() {gl_Position=vec4(a_pos,1.0,1.0);}")};function nn(w,s){let c=/#pragma mapbox: ([\w]+) ([\w]+) ([\w]+) ([\w]+)/g,g=s.match(/in ([\w]+) ([\w]+)/g),y=w.match(/uniform ([\w]+) ([\w]+)([\s]*)([\w]*)/g),E=s.match(/uniform ([\w]+) ([\w]+)([\s]*)([\w]*)/g),I=E?E.concat(y):y,P={};return{fragmentSource:w=w.replace(c,(L,z,U,W,H)=>(P[H]=!0,z==="define"?`
#ifndef HAS_UNIFORM_u_${H}
in ${U} ${W} ${H};
#else
uniform ${U} ${W} u_${H};
#endif
`:`
#ifdef HAS_UNIFORM_u_${H}
    ${U} ${W} ${H} = u_${H};
#endif
`)),vertexSource:s=s.replace(c,(L,z,U,W,H)=>{let te=W==="float"?"vec2":"vec4",ae=H.match(/color/)?"color":te;return P[H]?z==="define"?`
#ifndef HAS_UNIFORM_u_${H}
uniform lowp float u_${H}_t;
in ${U} ${te} a_${H};
out ${U} ${W} ${H};
#else
uniform ${U} ${W} u_${H};
#endif
`:ae==="vec4"?`
#ifndef HAS_UNIFORM_u_${H}
    ${H} = a_${H};
#else
    ${U} ${W} ${H} = u_${H};
#endif
`:`
#ifndef HAS_UNIFORM_u_${H}
    ${H} = unpack_mix_${ae}(a_${H}, u_${H}_t);
#else
    ${U} ${W} ${H} = u_${H};
#endif
`:z==="define"?`
#ifndef HAS_UNIFORM_u_${H}
uniform lowp float u_${H}_t;
in ${U} ${te} a_${H};
#else
uniform ${U} ${W} u_${H};
#endif
`:ae==="vec4"?`
#ifndef HAS_UNIFORM_u_${H}
    ${U} ${W} ${H} = a_${H};
#else
    ${U} ${W} ${H} = u_${H};
#endif
`:`
#ifndef HAS_UNIFORM_u_${H}
    ${U} ${W} ${H} = unpack_mix_${ae}(a_${H}, u_${H}_t);
#else
    ${U} ${W} ${H} = u_${H};
#endif
`}),staticAttributes:g,staticUniforms:I}}class ki{constructor(s,c,g){this.vertexBuffer=s,this.indexBuffer=c,this.segments=g}destroy(){this.vertexBuffer.destroy(),this.indexBuffer.destroy(),this.segments.destroy(),this.vertexBuffer=null,this.indexBuffer=null,this.segments=null}}var wo=i.aG([{name:"a_pos",type:"Int16",components:2}]);let Wl="#define PROJECTION_MERCATOR",mn="mercator";class xu{constructor(){this._cachedMesh=null}get name(){return"mercator"}get useSubdivision(){return!1}get shaderVariantName(){return mn}get shaderDefine(){return Wl}get shaderPreludeCode(){return bo.projectionMercator}get vertexShaderPreludeCode(){return bo.projectionMercator.vertexSource}get subdivisionGranularity(){return i.aH.noSubdivision}get useGlobeControls(){return!1}get transitionState(){return 0}get latitudeErrorCorrectionRadians(){return 0}destroy(){}updateGPUdependent(s){}getMeshFromTileID(s,c,g,y,E){if(this._cachedMesh)return this._cachedMesh;let I=new i.aI;I.emplaceBack(0,0),I.emplaceBack(i.Z,0),I.emplaceBack(0,i.Z),I.emplaceBack(i.Z,i.Z);let P=s.createVertexBuffer(I,wo.members),L=i.aJ.simpleSegment(0,0,4,2),z=new i.aK;z.emplaceBack(1,0,2),z.emplaceBack(1,2,3);let U=s.createIndexBuffer(z);return this._cachedMesh=new ki(P,U,L),this._cachedMesh}recalculate(){}hasTransition(){return!1}setErrorQueryLatitudeDegrees(s){}}class ks{constructor(s=0,c=0,g=0,y=0){if(isNaN(s)||s<0||isNaN(c)||c<0||isNaN(g)||g<0||isNaN(y)||y<0)throw new Error("Invalid value for edge-insets, top, bottom, left and right must all be numbers");this.top=s,this.bottom=c,this.left=g,this.right=y}interpolate(s,c,g){return c.top!=null&&s.top!=null&&(this.top=i.B.number(s.top,c.top,g)),c.bottom!=null&&s.bottom!=null&&(this.bottom=i.B.number(s.bottom,c.bottom,g)),c.left!=null&&s.left!=null&&(this.left=i.B.number(s.left,c.left,g)),c.right!=null&&s.right!=null&&(this.right=i.B.number(s.right,c.right,g)),this}getCenter(s,c){let g=i.ae((this.left+s-this.right)/2,0,s),y=i.ae((this.top+c-this.bottom)/2,0,c);return new i.P(g,y)}equals(s){return this.top===s.top&&this.bottom===s.bottom&&this.left===s.left&&this.right===s.right}clone(){return new ks(this.top,this.bottom,this.left,this.right)}toJSON(){return{top:this.top,bottom:this.bottom,left:this.left,right:this.right}}}function ul(w,s){if(!w.renderWorldCopies||w.lngRange)return;let c=s.lng-w.center.lng;s.lng+=c>180?-360:c<-180?360:0}function ja(w){return Math.max(0,Math.floor(w))}class Zi{constructor(s,c,g,y,E,I){this._callbacks=s,this._tileSize=512,this._renderWorldCopies=I===void 0||!!I,this._minZoom=c||0,this._maxZoom=g||22,this._minPitch=y==null?0:y,this._maxPitch=E==null?60:E,this.setMaxBounds(),this._width=0,this._height=0,this._center=new i.Q(0,0),this._elevation=0,this._zoom=0,this._tileZoom=ja(this._zoom),this._scale=i.ac(this._zoom),this._bearingInRadians=0,this._fovInRadians=.6435011087932844,this._pitchInRadians=0,this._rollInRadians=0,this._unmodified=!0,this._edgeInsets=new ks,this._minElevationForCurrentTile=0,this._autoCalculateNearFarZ=!0}apply(s,c,g){this._latRange=s.latRange,this._lngRange=s.lngRange,this._width=s.width,this._height=s.height,this._center=s.center,this._elevation=s.elevation,this._minElevationForCurrentTile=s.minElevationForCurrentTile,this._zoom=s.zoom,this._tileZoom=ja(this._zoom),this._scale=i.ac(this._zoom),this._bearingInRadians=s.bearingInRadians,this._fovInRadians=s.fovInRadians,this._pitchInRadians=s.pitchInRadians,this._rollInRadians=s.rollInRadians,this._unmodified=s.unmodified,this._edgeInsets=new ks(s.padding.top,s.padding.bottom,s.padding.left,s.padding.right),this._minZoom=s.minZoom,this._maxZoom=s.maxZoom,this._minPitch=s.minPitch,this._maxPitch=s.maxPitch,this._renderWorldCopies=s.renderWorldCopies,this._cameraToCenterDistance=s.cameraToCenterDistance,this._nearZ=s.nearZ,this._farZ=s.farZ,this._autoCalculateNearFarZ=!g&&s.autoCalculateNearFarZ,c&&this._constrain(),this._calcMatrices()}get pixelsToClipSpaceMatrix(){return this._pixelsToClipSpaceMatrix}get clipSpaceToPixelsMatrix(){return this._clipSpaceToPixelsMatrix}get minElevationForCurrentTile(){return this._minElevationForCurrentTile}setMinElevationForCurrentTile(s){this._minElevationForCurrentTile=s}get tileSize(){return this._tileSize}get tileZoom(){return this._tileZoom}get scale(){return this._scale}get width(){return this._width}get height(){return this._height}get bearingInRadians(){return this._bearingInRadians}get lngRange(){return this._lngRange}get latRange(){return this._latRange}get pixelsToGLUnits(){return this._pixelsToGLUnits}get minZoom(){return this._minZoom}setMinZoom(s){this._minZoom!==s&&(this._minZoom=s,this.setZoom(this.getConstrained(this._center,this.zoom).zoom))}get maxZoom(){return this._maxZoom}setMaxZoom(s){this._maxZoom!==s&&(this._maxZoom=s,this.setZoom(this.getConstrained(this._center,this.zoom).zoom))}get minPitch(){return this._minPitch}setMinPitch(s){this._minPitch!==s&&(this._minPitch=s,this.setPitch(Math.max(this.pitch,s)))}get maxPitch(){return this._maxPitch}setMaxPitch(s){this._maxPitch!==s&&(this._maxPitch=s,this.setPitch(Math.min(this.pitch,s)))}get renderWorldCopies(){return this._renderWorldCopies}setRenderWorldCopies(s){s===void 0?s=!0:s===null&&(s=!1),this._renderWorldCopies=s}get worldSize(){return this._tileSize*this._scale}get centerOffset(){return this.centerPoint._sub(this.size._div(2))}get size(){return new i.P(this._width,this._height)}get bearing(){return this._bearingInRadians/Math.PI*180}setBearing(s){let c=i.aL(s,-180,180)*Math.PI/180;var g,y,E,I,P,L,z,U,W;this._bearingInRadians!==c&&(this._unmodified=!1,this._bearingInRadians=c,this._calcMatrices(),this._rotationMatrix=u(),g=this._rotationMatrix,E=-this._bearingInRadians,I=(y=this._rotationMatrix)[0],P=y[1],L=y[2],z=y[3],U=Math.sin(E),W=Math.cos(E),g[0]=I*W+L*U,g[1]=P*W+z*U,g[2]=I*-U+L*W,g[3]=P*-U+z*W)}get rotationMatrix(){return this._rotationMatrix}get pitchInRadians(){return this._pitchInRadians}get pitch(){return this._pitchInRadians/Math.PI*180}setPitch(s){let c=i.ae(s,this.minPitch,this.maxPitch)/180*Math.PI;this._pitchInRadians!==c&&(this._unmodified=!1,this._pitchInRadians=c,this._calcMatrices())}get rollInRadians(){return this._rollInRadians}get roll(){return this._rollInRadians/Math.PI*180}setRoll(s){let c=s/180*Math.PI;this._rollInRadians!==c&&(this._unmodified=!1,this._rollInRadians=c,this._calcMatrices())}get fovInRadians(){return this._fovInRadians}get fov(){return i.aM(this._fovInRadians)}setFov(s){s=i.ae(s,.1,150),this.fov!==s&&(this._unmodified=!1,this._fovInRadians=i.ab(s),this._calcMatrices())}get zoom(){return this._zoom}setZoom(s){let c=this.getConstrained(this._center,s).zoom;this._zoom!==c&&(this._unmodified=!1,this._zoom=c,this._tileZoom=Math.max(0,Math.floor(c)),this._scale=i.ac(c),this._constrain(),this._calcMatrices())}get center(){return this._center}setCenter(s){s.lat===this._center.lat&&s.lng===this._center.lng||(this._unmodified=!1,this._center=s,this._constrain(),this._calcMatrices())}get elevation(){return this._elevation}setElevation(s){s!==this._elevation&&(this._elevation=s,this._constrain(),this._calcMatrices())}get padding(){return this._edgeInsets.toJSON()}setPadding(s){this._edgeInsets.equals(s)||(this._unmodified=!1,this._edgeInsets.interpolate(this._edgeInsets,s,1),this._calcMatrices())}get centerPoint(){return this._edgeInsets.getCenter(this._width,this._height)}get pixelsPerMeter(){return this._pixelPerMeter}get unmodified(){return this._unmodified}get cameraToCenterDistance(){return this._cameraToCenterDistance}get nearZ(){return this._nearZ}get farZ(){return this._farZ}get autoCalculateNearFarZ(){return this._autoCalculateNearFarZ}overrideNearFarZ(s,c){this._autoCalculateNearFarZ=!1,this._nearZ=s,this._farZ=c,this._calcMatrices()}clearNearFarZOverride(){this._autoCalculateNearFarZ=!0,this._calcMatrices()}isPaddingEqual(s){return this._edgeInsets.equals(s)}interpolatePadding(s,c,g){this._unmodified=!1,this._edgeInsets.interpolate(s,c,g),this._constrain(),this._calcMatrices()}resize(s,c,g=!0){this._width=s,this._height=c,g&&this._constrain(),this._calcMatrices()}getMaxBounds(){return this._latRange&&this._latRange.length===2&&this._lngRange&&this._lngRange.length===2?new St([this._lngRange[0],this._latRange[0]],[this._lngRange[1],this._latRange[1]]):null}setMaxBounds(s){s?(this._lngRange=[s.getWest(),s.getEast()],this._latRange=[s.getSouth(),s.getNorth()],this._constrain()):(this._lngRange=null,this._latRange=[-85.051129,i.af])}getConstrained(s,c){return this._callbacks.getConstrained(s,c)}getCameraQueryGeometry(s,c){if(c.length===1)return[c[0],s];{let g=s.x,y=s.y,E=s.x,I=s.y;for(let P of c)g=Math.min(g,P.x),y=Math.min(y,P.y),E=Math.max(E,P.x),I=Math.max(I,P.y);return[new i.P(g,y),new i.P(E,y),new i.P(E,I),new i.P(g,I),new i.P(g,y)]}}_constrain(){if(!this.center||!this._width||!this._height||this._constraining)return;this._constraining=!0;let s=this._unmodified,{center:c,zoom:g}=this.getConstrained(this.center,this.zoom);this.setCenter(c),this.setZoom(g),this._unmodified=s,this._constraining=!1}_calcMatrices(){if(this._width&&this._height){this._pixelsToGLUnits=[2/this._width,-2/this._height];let s=i.ad(new Float64Array(16));i.M(s,s,[this._width/2,-this._height/2,1]),i.L(s,s,[1,-1,0]),this._clipSpaceToPixelsMatrix=s,s=i.ad(new Float64Array(16)),i.M(s,s,[1,-1,1]),i.L(s,s,[-1,-1,0]),i.M(s,s,[2/this._width,2/this._height,1]),this._pixelsToClipSpaceMatrix=s,this._cameraToCenterDistance=.5/Math.tan(this.fovInRadians/2)*this._height}this._callbacks.calcMatrices()}calculateCenterFromCameraLngLatAlt(s,c,g,y){let E=g!==void 0?g:this.bearing,I=y=y!==void 0?y:this.pitch,P=i.$.fromLngLat(s,c),L=-Math.cos(i.ab(I)),z=Math.sin(i.ab(I)),U=z*Math.sin(i.ab(E)),W=-z*Math.cos(i.ab(E)),H=this.elevation,te=c-H,ae;L*te>=0||Math.abs(L)<.1?(ae=1e4,H=c+ae*L):ae=-te/L;let be,_e,xe=i.aN(1,P.y),Ae=0;do{if(Ae+=1,Ae>10)break;_e=ae/xe,be=new i.$(P.x+U*_e,P.y+W*_e),xe=1/be.meterInMercatorCoordinateUnits()}while(Math.abs(ae-_e*xe)>1e-12);return{center:be.toLngLat(),elevation:H,zoom:i.ah(this.height/2/Math.tan(this.fovInRadians/2)/_e/this.tileSize)}}recalculateZoomAndCenter(s){if(this.elevation-s==0)return;let c=i.ag(1,this.center.lat)*this.worldSize,g=this.cameraToCenterDistance/c,y=i.$.fromLngLat(this.center,this.elevation),E=ue(this.center,this.elevation,this.pitch,this.bearing,g);this._elevation=s;let I=this.calculateCenterFromCameraLngLatAlt(E.toLngLat(),i.aN(E.z,y.y),this.bearing,this.pitch);this._elevation=I.elevation,this._center=I.center,this.setZoom(I.zoom)}getCameraPoint(){let s=Math.tan(this.pitchInRadians)*(this.cameraToCenterDistance||1);return this.centerPoint.add(new i.P(s*Math.sin(this.rollInRadians),s*Math.cos(this.rollInRadians)))}getCameraAltitude(){return Math.cos(this.pitchInRadians)*this._cameraToCenterDistance/this._pixelPerMeter+this.elevation}getCameraLngLat(){let s=i.ag(1,this.center.lat)*this.worldSize;return ue(this.center,this.elevation,this.pitch,this.bearing,this.cameraToCenterDistance/s).toLngLat()}getMercatorTileCoordinates(s){if(!s)return[0,0,1,1];let c=s.canonical.z>=0?1<<s.canonical.z:Math.pow(2,s.canonical.z);return[s.canonical.x/c,s.canonical.y/c,1/c/i.Z,1/c/i.Z]}}class ma{constructor(s,c){this.min=s,this.max=c,this.center=i.aO([],i.aP([],this.min,this.max),.5)}quadrant(s){let c=[s%2==0,s<2],g=i.aQ(this.min),y=i.aQ(this.max);for(let E=0;E<c.length;E++)g[E]=c[E]?this.min[E]:this.center[E],y[E]=c[E]?this.center[E]:this.max[E];return y[2]=this.max[2],new ma(g,y)}distanceX(s){return Math.max(Math.min(this.max[0],s[0]),this.min[0])-s[0]}distanceY(s){return Math.max(Math.min(this.max[1],s[1]),this.min[1])-s[1]}intersectsFrustum(s){let c=!0;for(let g=0;g<s.planes.length;g++){let y=this.intersectsPlane(s.planes[g]);if(y===0)return 0;y===1&&(c=!1)}return c?2:s.aabb.min[0]>this.max[0]||s.aabb.min[1]>this.max[1]||s.aabb.min[2]>this.max[2]||s.aabb.max[0]<this.min[0]||s.aabb.max[1]<this.min[1]||s.aabb.max[2]<this.min[2]?0:1}intersectsPlane(s){let c=s[3],g=s[3];for(let y=0;y<3;y++)s[y]>0?(c+=s[y]*this.min[y],g+=s[y]*this.max[y]):(g+=s[y]*this.min[y],c+=s[y]*this.max[y]);return c>=0?2:g<0?0:1}}class Mi{distanceToTile2d(s,c,g,y){let E=y.distanceX([s,c]),I=y.distanceY([s,c]);return Math.hypot(E,I)}getWrap(s,c,g){return g}getTileAABB(s,c,g,y){var E,I;let P=g,L=g;if(y.terrain){let U=new i.Y(s.z,c,s.z,s.x,s.y),W=y.terrain.getMinMaxElevation(U);P=(E=W.minElevation)!==null&&E!==void 0?E:g,L=(I=W.maxElevation)!==null&&I!==void 0?I:g}let z=1<<s.z;return new ma([c+s.x/z,s.y/z,P],[c+(s.x+1)/z,(s.y+1)/z,L])}allowVariableZoom(s,c){let g=s.fov*(Math.abs(Math.cos(s.rollInRadians))*s.height+Math.abs(Math.sin(s.rollInRadians))*s.width)/s.height,y=i.ae(78.5-g/2,0,60);return!!c.terrain||s.pitch>y}allowWorldCopies(){return!0}recalculateCache(){}}class zo{constructor(s,c,g){this.points=s,this.planes=c,this.aabb=g}static fromInvProjectionMatrix(s,c=1,g=0){let y=Math.pow(2,g),E=[[-1,1,-1,1],[1,1,-1,1],[1,-1,-1,1],[-1,-1,-1,1],[-1,1,1,1],[1,1,1,1],[1,-1,1,1],[-1,-1,1,1]].map(z=>{let U=1/(z=i.at([],z,s))[3]/c*y;return i.aR(z,z,[U,U,1/z[3],U])}),I=[[0,1,2],[6,5,4],[0,3,7],[2,1,5],[3,2,6],[0,4,5]].map(z=>{let U=i.aS([],E[z[0]],E[z[1]]),W=i.aS([],E[z[2]],E[z[1]]),H=i.aT([],i.aU([],U,W)),te=-i.aV(H,E[z[1]]);return H.concat(te)}),P=[Number.POSITIVE_INFINITY,Number.POSITIVE_INFINITY,Number.POSITIVE_INFINITY],L=[Number.NEGATIVE_INFINITY,Number.NEGATIVE_INFINITY,Number.NEGATIVE_INFINITY];for(let z of E)for(let U=0;U<3;U++)P[U]=Math.min(P[U],z[U]),L[U]=Math.max(L[U],z[U]);return new zo(E,I,new ma(P,L))}}class jf{get pixelsToClipSpaceMatrix(){return this._helper.pixelsToClipSpaceMatrix}get clipSpaceToPixelsMatrix(){return this._helper.clipSpaceToPixelsMatrix}get pixelsToGLUnits(){return this._helper.pixelsToGLUnits}get centerOffset(){return this._helper.centerOffset}get size(){return this._helper.size}get rotationMatrix(){return this._helper.rotationMatrix}get centerPoint(){return this._helper.centerPoint}get pixelsPerMeter(){return this._helper.pixelsPerMeter}setMinZoom(s){this._helper.setMinZoom(s)}setMaxZoom(s){this._helper.setMaxZoom(s)}setMinPitch(s){this._helper.setMinPitch(s)}setMaxPitch(s){this._helper.setMaxPitch(s)}setRenderWorldCopies(s){this._helper.setRenderWorldCopies(s)}setBearing(s){this._helper.setBearing(s)}setPitch(s){this._helper.setPitch(s)}setRoll(s){this._helper.setRoll(s)}setFov(s){this._helper.setFov(s)}setZoom(s){this._helper.setZoom(s)}setCenter(s){this._helper.setCenter(s)}setElevation(s){this._helper.setElevation(s)}setMinElevationForCurrentTile(s){this._helper.setMinElevationForCurrentTile(s)}setPadding(s){this._helper.setPadding(s)}interpolatePadding(s,c,g){return this._helper.interpolatePadding(s,c,g)}isPaddingEqual(s){return this._helper.isPaddingEqual(s)}resize(s,c,g=!0){this._helper.resize(s,c,g)}getMaxBounds(){return this._helper.getMaxBounds()}setMaxBounds(s){this._helper.setMaxBounds(s)}overrideNearFarZ(s,c){this._helper.overrideNearFarZ(s,c)}clearNearFarZOverride(){this._helper.clearNearFarZOverride()}getCameraQueryGeometry(s){return this._helper.getCameraQueryGeometry(this.getCameraPoint(),s)}get tileSize(){return this._helper.tileSize}get tileZoom(){return this._helper.tileZoom}get scale(){return this._helper.scale}get worldSize(){return this._helper.worldSize}get width(){return this._helper.width}get height(){return this._helper.height}get lngRange(){return this._helper.lngRange}get latRange(){return this._helper.latRange}get minZoom(){return this._helper.minZoom}get maxZoom(){return this._helper.maxZoom}get zoom(){return this._helper.zoom}get center(){return this._helper.center}get minPitch(){return this._helper.minPitch}get maxPitch(){return this._helper.maxPitch}get pitch(){return this._helper.pitch}get pitchInRadians(){return this._helper.pitchInRadians}get roll(){return this._helper.roll}get rollInRadians(){return this._helper.rollInRadians}get bearing(){return this._helper.bearing}get bearingInRadians(){return this._helper.bearingInRadians}get fov(){return this._helper.fov}get fovInRadians(){return this._helper.fovInRadians}get elevation(){return this._helper.elevation}get minElevationForCurrentTile(){return this._helper.minElevationForCurrentTile}get padding(){return this._helper.padding}get unmodified(){return this._helper.unmodified}get renderWorldCopies(){return this._helper.renderWorldCopies}get cameraToCenterDistance(){return this._helper.cameraToCenterDistance}get nearZ(){return this._helper.nearZ}get farZ(){return this._helper.farZ}get autoCalculateNearFarZ(){return this._helper.autoCalculateNearFarZ}setTransitionState(s,c){}constructor(s,c,g,y,E){this._posMatrixCache=new Map,this._alignedPosMatrixCache=new Map,this._fogMatrixCacheF32=new Map,this._helper=new Zi({calcMatrices:()=>{this._calcMatrices()},getConstrained:(I,P)=>this.getConstrained(I,P)},s,c,g,y,E),this._coveringTilesDetailsProvider=new Mi}clone(){let s=new jf;return s.apply(this),s}apply(s,c,g){this._helper.apply(s,c,g)}get cameraPosition(){return this._cameraPosition}get projectionMatrix(){return this._projectionMatrix}get modelViewProjectionMatrix(){return this._viewProjMatrix}get inverseProjectionMatrix(){return this._invProjMatrix}get mercatorMatrix(){return this._mercatorMatrix}getVisibleUnwrappedCoordinates(s){let c=[new i.aW(0,s)];if(this._helper._renderWorldCopies){let g=this.screenPointToMercatorCoordinate(new i.P(0,0)),y=this.screenPointToMercatorCoordinate(new i.P(this._helper._width,0)),E=this.screenPointToMercatorCoordinate(new i.P(this._helper._width,this._helper._height)),I=this.screenPointToMercatorCoordinate(new i.P(0,this._helper._height)),P=Math.floor(Math.min(g.x,y.x,E.x,I.x)),L=Math.floor(Math.max(g.x,y.x,E.x,I.x)),z=1;for(let U=P-z;U<=L+z;U++)U!==0&&c.push(new i.aW(U,s))}return c}getCameraFrustum(){return zo.fromInvProjectionMatrix(this._invViewProjMatrix,this.worldSize)}getClippingPlane(){return null}getCoveringTilesDetailsProvider(){return this._coveringTilesDetailsProvider}recalculateZoomAndCenter(s){let c=this.screenPointToLocation(this.centerPoint,s),g=s?s.getElevationForLngLatZoom(c,this._helper._tileZoom):0;this._helper.recalculateZoomAndCenter(g)}setLocationAtPoint(s,c){let g=i.ag(this.elevation,this.center.lat),y=this.screenPointToMercatorCoordinateAtZ(c,g),E=this.screenPointToMercatorCoordinateAtZ(this.centerPoint,g),I=i.$.fromLngLat(s),P=new i.$(I.x-(y.x-E.x),I.y-(y.y-E.y));this.setCenter(P==null?void 0:P.toLngLat()),this._helper._renderWorldCopies&&this.setCenter(this.center.wrap())}locationToScreenPoint(s,c){return c?this.coordinatePoint(i.$.fromLngLat(s),c.getElevationForLngLatZoom(s,this._helper._tileZoom),this._pixelMatrix3D):this.coordinatePoint(i.$.fromLngLat(s))}screenPointToLocation(s,c){var g;return(g=this.screenPointToMercatorCoordinate(s,c))===null||g===void 0?void 0:g.toLngLat()}screenPointToMercatorCoordinate(s,c){if(c){let g=c.pointCoordinate(s);if(g!=null)return g}return this.screenPointToMercatorCoordinateAtZ(s)}screenPointToMercatorCoordinateAtZ(s,c){let g=c||0,y=[s.x,s.y,0,1],E=[s.x,s.y,1,1];i.at(y,y,this._pixelMatrixInverse),i.at(E,E,this._pixelMatrixInverse);let I=y[3],P=E[3],L=y[1]/I,z=E[1]/P,U=y[2]/I,W=E[2]/P,H=U===W?0:(g-U)/(W-U);return new i.$(i.B.number(y[0]/I,E[0]/P,H)/this.worldSize,i.B.number(L,z,H)/this.worldSize,g)}coordinatePoint(s,c=0,g=this._pixelMatrix){let y=[s.x*this.worldSize,s.y*this.worldSize,c,1];return i.at(y,y,g),new i.P(y[0]/y[3],y[1]/y[3])}getBounds(){let s=Math.max(0,this._helper._height/2-Ye(this));return new St().extend(this.screenPointToLocation(new i.P(0,s))).extend(this.screenPointToLocation(new i.P(this._helper._width,s))).extend(this.screenPointToLocation(new i.P(this._helper._width,this._helper._height))).extend(this.screenPointToLocation(new i.P(0,this._helper._height)))}isPointOnMapSurface(s,c){return c?c.pointCoordinate(s)!=null:s.y>this.height/2-Ye(this)}calculatePosMatrix(s,c=!1,g){var y;let E=(y=s.key)!==null&&y!==void 0?y:i.aX(s.wrap,s.canonical.z,s.canonical.z,s.canonical.x,s.canonical.y),I=c?this._alignedPosMatrixCache:this._posMatrixCache;if(I.has(E)){let z=I.get(E);return g?z.f32:z.f64}let P=le(s,this.worldSize);i.N(P,c?this._alignedProjMatrix:this._viewProjMatrix,P);let L={f64:P,f32:new Float32Array(P)};return I.set(E,L),g?L.f32:L.f64}calculateFogMatrix(s){let c=s.key,g=this._fogMatrixCacheF32;if(g.has(c))return g.get(c);let y=le(s,this.worldSize);return i.N(y,this._fogMatrix,y),g.set(c,new Float32Array(y)),g.get(c)}getConstrained(s,c){c=i.ae(+c,this.minZoom,this.maxZoom);let g={center:new i.Q(s.lng,s.lat),zoom:c},y=this._helper._lngRange;this._helper._renderWorldCopies||y!==null||(y=[-179.9999999999,180-1e-10]);let E=this.tileSize*i.ac(g.zoom),I=0,P=E,L=0,z=E,U=0,W=0,{x:H,y:te}=this.size;if(this._helper._latRange){let ke=this._helper._latRange;I=i.S(ke[1])*E,P=i.S(ke[0])*E,P-I<te&&(U=te/(P-I))}y&&(L=i.aL(i.U(y[0])*E,0,E),z=i.aL(i.U(y[1])*E,0,E),z<L&&(z+=E),z-L<H&&(W=H/(z-L)));let{x:ae,y:be}=Rn(E,s),_e,xe,Ae=Math.max(W||0,U||0);if(Ae){let ke=new i.P(W?(z+L)/2:ae,U?(P+I)/2:be);return g.center=wa(E,ke).wrap(),g.zoom+=i.ah(Ae),g}if(this._helper._latRange){let ke=te/2;be-ke<I&&(xe=I+ke),be+ke>P&&(xe=P-ke)}if(y){let ke=(L+z)/2,Le=ae;this._helper._renderWorldCopies&&(Le=i.aL(ae,ke-E/2,ke+E/2));let Fe=H/2;Le-Fe<L&&(_e=L+Fe),Le+Fe>z&&(_e=z-Fe)}if(_e!==void 0||xe!==void 0){let ke=new i.P(_e!=null?_e:ae,xe!=null?xe:be);g.center=wa(E,ke).wrap()}return g}calculateCenterFromCameraLngLatAlt(s,c,g,y){return this._helper.calculateCenterFromCameraLngLatAlt(s,c,g,y)}_calculateNearFarZIfNeeded(s,c,g){if(!this._helper.autoCalculateNearFarZ)return;let y=Math.min(this.elevation,this.minElevationForCurrentTile,this.getCameraAltitude()-100),E=s-y*this._helper._pixelPerMeter/Math.cos(c),I=y<0?E:s,P=Math.PI/2+this.pitchInRadians,L=i.ab(this.fov)*(Math.abs(Math.cos(i.ab(this.roll)))*this.height+Math.abs(Math.sin(i.ab(this.roll)))*this.width)/this.height*(.5+g.y/this.height),z=Math.sin(L)*I/Math.sin(i.ae(Math.PI-P-L,.01,Math.PI-.01)),U=Ye(this),W=Math.atan(U/this._helper.cameraToCenterDistance),H=i.ab(.75),te=W>H?2*W*(.5+g.y/(2*U)):H,ae=Math.sin(te)*I/Math.sin(i.ae(Math.PI-P-te,.01,Math.PI-.01)),be=Math.min(z,ae);this._helper._farZ=1.01*(Math.cos(Math.PI/2-c)*be+I),this._helper._nearZ=this._helper._height/50}_calcMatrices(){if(!this._helper._height)return;let s=this.centerOffset,c=Rn(this.worldSize,this.center),g=c.x,y=c.y;this._helper._pixelPerMeter=i.ag(1,this.center.lat)*this.worldSize;let E=i.ab(Math.min(this.pitch,gn)),I=Math.max(this._helper.cameraToCenterDistance/2,this._helper.cameraToCenterDistance+this._helper._elevation*this._helper._pixelPerMeter/Math.cos(E)),P;this._calculateNearFarZIfNeeded(I,E,s),P=new Float64Array(16),i.aY(P,this.fovInRadians,this._helper._width/this._helper._height,this._helper._nearZ,this._helper._farZ),this._invProjMatrix=new Float64Array(16),i.an(this._invProjMatrix,P),P[8]=2*-s.x/this._helper._width,P[9]=2*s.y/this._helper._height,this._projectionMatrix=i.aZ(P),i.M(P,P,[1,-1,1]),i.L(P,P,[0,0,-this._helper.cameraToCenterDistance]),i.a_(P,P,-this.rollInRadians),i.a$(P,P,this.pitchInRadians),i.a_(P,P,-this.bearingInRadians),i.L(P,P,[-g,-y,0]),this._mercatorMatrix=i.M([],P,[this.worldSize,this.worldSize,this.worldSize]),i.M(P,P,[1,1,this._helper._pixelPerMeter]),this._pixelMatrix=i.N(new Float64Array(16),this.clipSpaceToPixelsMatrix,P),i.L(P,P,[0,0,-this.elevation]),this._viewProjMatrix=P,this._invViewProjMatrix=i.an([],P);let L=[0,0,-1,1];i.at(L,L,this._invViewProjMatrix),this._cameraPosition=[L[0]/L[3],L[1]/L[3],L[2]/L[3]],this._fogMatrix=new Float64Array(16),i.aY(this._fogMatrix,this.fovInRadians,this.width/this.height,I,this._helper._farZ),this._fogMatrix[8]=2*-s.x/this.width,this._fogMatrix[9]=2*s.y/this.height,i.M(this._fogMatrix,this._fogMatrix,[1,-1,1]),i.L(this._fogMatrix,this._fogMatrix,[0,0,-this.cameraToCenterDistance]),i.a_(this._fogMatrix,this._fogMatrix,-this.rollInRadians),i.a$(this._fogMatrix,this._fogMatrix,this.pitchInRadians),i.a_(this._fogMatrix,this._fogMatrix,-this.bearingInRadians),i.L(this._fogMatrix,this._fogMatrix,[-g,-y,0]),i.M(this._fogMatrix,this._fogMatrix,[1,1,this._helper._pixelPerMeter]),i.L(this._fogMatrix,this._fogMatrix,[0,0,-this.elevation]),this._pixelMatrix3D=i.N(new Float64Array(16),this.clipSpaceToPixelsMatrix,P);let z=this._helper._width%2/2,U=this._helper._height%2/2,W=Math.cos(this.bearingInRadians),H=Math.sin(-this.bearingInRadians),te=g-Math.round(g)+W*z+H*U,ae=y-Math.round(y)+W*U+H*z,be=new Float64Array(P);if(i.L(be,be,[te>.5?te-1:te,ae>.5?ae-1:ae,0]),this._alignedProjMatrix=be,P=i.an(new Float64Array(16),this._pixelMatrix),!P)throw new Error("failed to invert matrix");this._pixelMatrixInverse=P,this._clearMatrixCaches()}_clearMatrixCaches(){this._posMatrixCache.clear(),this._alignedPosMatrixCache.clear(),this._fogMatrixCacheF32.clear()}maxPitchScaleFactor(){if(!this._pixelMatrixInverse)return 1;let s=this.screenPointToMercatorCoordinate(new i.P(0,0)),c=[s.x*this.worldSize,s.y*this.worldSize,0,1];return i.at(c,c,this._pixelMatrix)[3]/this._helper.cameraToCenterDistance}getCameraPoint(){return this._helper.getCameraPoint()}getCameraAltitude(){return this._helper.getCameraAltitude()}getCameraLngLat(){let s=i.ag(1,this.center.lat)*this.worldSize;return ue(this.center,this.elevation,this.pitch,this.bearing,this._helper.cameraToCenterDistance/s).toLngLat()}lngLatToCameraDepth(s,c){let g=i.$.fromLngLat(s),y=[g.x*this.worldSize,g.y*this.worldSize,c,1];return i.at(y,y,this._viewProjMatrix),y[2]/y[3]}getProjectionData(s){let{overscaledTileID:c,aligned:g,applyTerrainMatrix:y}=s,E=this._helper.getMercatorTileCoordinates(c),I=c?this.calculatePosMatrix(c,g,!0):null,P;return P=c&&c.terrainRttPosMatrix32f&&y?c.terrainRttPosMatrix32f:I||i.b0(),{mainMatrix:P,tileMercatorCoords:E,clippingPlane:[0,0,0,0],projectionTransition:0,fallbackMatrix:P}}isLocationOccluded(s){return!1}getPixelScale(){return 1}getCircleRadiusCorrection(){return 1}getPitchedTextCorrection(s,c,g){return 1}transformLightDirection(s){return i.aQ(s)}getRayDirectionFromPixel(s){throw new Error("Not implemented.")}projectTileCoordinates(s,c,g,y){let E=this.calculatePosMatrix(g),I;y?(I=[s,c,y(s,c),1],i.at(I,I,E)):(I=[s,c,0,1],Rr(I,I,E));let P=I[3];return{point:new i.P(I[0]/P,I[1]/P),signedDistanceFromCamera:P,isOccluded:!1}}populateCache(s){for(let c of s)this.calculatePosMatrix(c)}getMatrixForModel(s,c){let g=i.$.fromLngLat(s,c),y=g.meterInMercatorCoordinateUnits(),E=i.b1();return i.L(E,E,[g.x,g.y,g.z]),i.a_(E,E,Math.PI),i.a$(E,E,Math.PI/2),i.M(E,E,[-y,y,y]),E}getProjectionDataForCustomLayer(s=!0){let c=new i.Y(0,0,0,0,0),g=this.getProjectionData({overscaledTileID:c,applyGlobeMatrix:s}),y=le(c,this.worldSize);i.N(y,this._viewProjMatrix,y),g.tileMercatorCoords=[0,0,1,1];let E=[i.Z,i.Z,this.worldSize/this._helper.pixelsPerMeter],I=i.b2();return i.M(I,y,E),g.fallbackMatrix=I,g.mainMatrix=I,g}getFastPathSimpleProjectionMatrix(s){return this.calculatePosMatrix(s)}}function bs(){i.w("Map cannot fit within canvas with the given bounds, padding, and/or offset.")}function wu(w){if(w.useSlerp){if(w.k<1){let s=i.b3(w.startEulerAngles.roll,w.startEulerAngles.pitch,w.startEulerAngles.bearing),c=i.b3(w.endEulerAngles.roll,w.endEulerAngles.pitch,w.endEulerAngles.bearing),g=new Float64Array(4);i.b4(g,s,c,w.k);let y=i.b5(g);w.tr.setRoll(y.roll),w.tr.setPitch(y.pitch),w.tr.setBearing(y.bearing)}else w.tr.setRoll(w.endEulerAngles.roll),w.tr.setPitch(w.endEulerAngles.pitch),w.tr.setBearing(w.endEulerAngles.bearing);}else w.tr.setRoll(i.B.number(w.startEulerAngles.roll,w.endEulerAngles.roll,w.k)),w.tr.setPitch(i.B.number(w.startEulerAngles.pitch,w.endEulerAngles.pitch,w.k)),w.tr.setBearing(i.B.number(w.startEulerAngles.bearing,w.endEulerAngles.bearing,w.k))}function xs(w,s,c,g,y){let E=y.padding,I=Rn(y.worldSize,c.getNorthWest()),P=Rn(y.worldSize,c.getNorthEast()),L=Rn(y.worldSize,c.getSouthEast()),z=Rn(y.worldSize,c.getSouthWest()),U=i.ab(-g),W=I.rotate(U),H=P.rotate(U),te=L.rotate(U),ae=z.rotate(U),be=new i.P(Math.max(W.x,H.x,ae.x,te.x),Math.max(W.y,H.y,ae.y,te.y)),_e=new i.P(Math.min(W.x,H.x,ae.x,te.x),Math.min(W.y,H.y,ae.y,te.y)),xe=be.sub(_e),Ae=(y.width-(E.left+E.right+s.left+s.right))/xe.x,ke=(y.height-(E.top+E.bottom+s.top+s.bottom))/xe.y;if(ke<0||Ae<0)return void bs();let Le=Math.min(i.ah(y.scale*Math.min(Ae,ke)),w.maxZoom),Fe=i.P.convert(w.offset),He=new i.P((s.left-s.right)/2,(s.top-s.bottom)/2).rotate(i.ab(g)),Be=Fe.add(He).mult(y.scale/i.ac(Le));return{center:wa(y.worldSize,I.add(L).div(2).sub(Be)),zoom:Le,bearing:g}}class V0{get useGlobeControls(){return!1}handlePanInertia(s,c){return{easingOffset:s,easingCenter:c.center}}handleMapControlsRollPitchBearingZoom(s,c){s.bearingDelta&&c.setBearing(c.bearing+s.bearingDelta),s.pitchDelta&&c.setPitch(c.pitch+s.pitchDelta),s.rollDelta&&c.setRoll(c.roll+s.rollDelta),s.zoomDelta&&c.setZoom(c.zoom+s.zoomDelta)}handleMapControlsPan(s,c,g){s.around.distSqr(c.centerPoint)<.01||c.setLocationAtPoint(g,s.around)}cameraForBoxAndBearing(s,c,g,y,E){return xs(s,c,g,y,E)}handleJumpToCenterZoom(s,c){s.zoom!==(c.zoom!==void 0?+c.zoom:s.zoom)&&s.setZoom(+c.zoom),c.center!==void 0&&s.setCenter(i.Q.convert(c.center))}handleEaseTo(s,c){let g=s.zoom,y=s.padding,E={roll:s.roll,pitch:s.pitch,bearing:s.bearing},I={roll:c.roll===void 0?s.roll:c.roll,pitch:c.pitch===void 0?s.pitch:c.pitch,bearing:c.bearing===void 0?s.bearing:c.bearing},P=c.zoom!==void 0,L=!s.isPaddingEqual(c.padding),z=!1,U=P?+c.zoom:s.zoom,W=s.centerPoint.add(c.offsetAsPoint),H=s.screenPointToLocation(W),{center:te,zoom:ae}=s.getConstrained(i.Q.convert(c.center||H),U!=null?U:g);ul(s,te);let be=Rn(s.worldSize,H),_e=Rn(s.worldSize,te).sub(be),xe=i.ac(ae-g);return z=ae!==g,{easeFunc:Ae=>{if(z&&s.setZoom(i.B.number(g,ae,Ae)),i.b6(E,I)||wu({startEulerAngles:E,endEulerAngles:I,tr:s,k:Ae,useSlerp:E.roll!=I.roll}),L&&(s.interpolatePadding(y,c.padding,Ae),W=s.centerPoint.add(c.offsetAsPoint)),c.around)s.setLocationAtPoint(c.around,c.aroundPoint);else{let ke=i.ac(s.zoom-g),Le=ae>g?Math.min(2,xe):Math.max(.5,xe),Fe=Math.pow(Le,1-Ae),He=wa(s.worldSize,be.add(_e.mult(Ae*Fe)).mult(ke));s.setLocationAtPoint(s.renderWorldCopies?He.wrap():He,W)}},isZooming:z,elevationCenter:te}}handleFlyTo(s,c){let g=c.zoom!==void 0,y=s.zoom,E=s.getConstrained(i.Q.convert(c.center||c.locationAtOffset),g?+c.zoom:y),I=E.center,P=E.zoom;ul(s,I);let L=Rn(s.worldSize,c.locationAtOffset),z=Rn(s.worldSize,I).sub(L),U=z.mag(),W=i.ac(P-y),H;if(c.minZoom!==void 0){let te=Math.min(+c.minZoom,y,P),ae=s.getConstrained(I,te).zoom;H=i.ac(ae-y)}return{easeFunc:(te,ae,be,_e)=>{s.setZoom(te===1?P:y+i.ah(ae));let xe=te===1?I:wa(s.worldSize,L.add(z.mult(be)).mult(ae));s.setLocationAtPoint(s.renderWorldCopies?xe.wrap():xe,_e)},scaleOfZoom:W,targetCenter:I,scaleOfMinZoom:H,pixelPathLength:U}}}class Ko{constructor(s,c,g){this.blendFunction=s,this.blendColor=c,this.mask=g}}Ko.Replace=[1,0],Ko.disabled=new Ko(Ko.Replace,i.b7.transparent,[!1,!1,!1,!1]),Ko.unblended=new Ko(Ko.Replace,i.b7.transparent,[!0,!0,!0,!0]),Ko.alphaBlended=new Ko([1,771],i.b7.transparent,[!0,!0,!0,!0]);let Yi=2305;class to{constructor(s,c,g){this.enable=s,this.mode=c,this.frontFace=g}}to.disabled=new to(!1,1029,Yi),to.backCCW=new to(!0,1029,Yi),to.frontCCW=new to(!0,1028,Yi);class vn{constructor(s,c,g){this.func=s,this.mask=c,this.range=g}}vn.ReadOnly=!1,vn.ReadWrite=!0,vn.disabled=new vn(519,vn.ReadOnly,[0,1]);let rv=7680;class An{constructor(s,c,g,y,E,I){this.test=s,this.ref=c,this.mask=g,this.fail=y,this.depthFail=E,this.pass=I}}An.disabled=new An({func:519,mask:0},0,0,rv,rv,rv);let Bb=new WeakMap;function Rs(w){var s;if(Bb.has(w))return Bb.get(w);{let c=(s=w.getParameter(w.VERSION))===null||s===void 0?void 0:s.startsWith("WebGL 2.0");return Bb.set(w,c),c}}class cT{get awaitingQuery(){return!!this._readbackQueue}constructor(s){this._readbackWaitFrames=4,this._measureWaitFrames=6,this._texWidth=1,this._texHeight=1,this._measuredError=0,this._updateCount=0,this._lastReadbackFrame=-1e3,this._readbackQueue=null,this._cachedRenderContext=s;let c=s.context,g=c.gl;this._texFormat=g.RGBA,this._texType=g.UNSIGNED_BYTE;let y=new i.aI;y.emplaceBack(-1,-1),y.emplaceBack(2,-1),y.emplaceBack(-1,2);let E=new i.aK;E.emplaceBack(0,1,2),this._fullscreenTriangle=new ki(c.createVertexBuffer(y,wo.members),c.createIndexBuffer(E),i.aJ.simpleSegment(0,0,y.length,E.length)),this._resultBuffer=new Uint8Array(4),c.activeTexture.set(g.TEXTURE1);let I=g.createTexture();g.bindTexture(g.TEXTURE_2D,I),g.texParameteri(g.TEXTURE_2D,g.TEXTURE_WRAP_S,g.CLAMP_TO_EDGE),g.texParameteri(g.TEXTURE_2D,g.TEXTURE_WRAP_T,g.CLAMP_TO_EDGE),g.texParameteri(g.TEXTURE_2D,g.TEXTURE_MIN_FILTER,g.NEAREST),g.texParameteri(g.TEXTURE_2D,g.TEXTURE_MAG_FILTER,g.NEAREST),g.texImage2D(g.TEXTURE_2D,0,this._texFormat,this._texWidth,this._texHeight,0,this._texFormat,this._texType,null),this._fbo=c.createFramebuffer(this._texWidth,this._texHeight,!1,!1),this._fbo.colorAttachment.set(I),Rs(g)&&(this._pbo=g.createBuffer(),g.bindBuffer(g.PIXEL_PACK_BUFFER,this._pbo),g.bufferData(g.PIXEL_PACK_BUFFER,4,g.STREAM_READ),g.bindBuffer(g.PIXEL_PACK_BUFFER,null))}destroy(){let s=this._cachedRenderContext.context.gl;this._fullscreenTriangle.destroy(),this._fbo.destroy(),s.deleteBuffer(this._pbo),this._fullscreenTriangle=null,this._fbo=null,this._pbo=null,this._resultBuffer=null}updateErrorLoop(s,c){let g=this._updateCount;return this._readbackQueue?g>=this._readbackQueue.frameNumberIssued+this._readbackWaitFrames&&this._tryReadback():g>=this._lastReadbackFrame+this._measureWaitFrames&&this._renderErrorTexture(s,c),this._updateCount++,this._measuredError}_bindFramebuffer(){let s=this._cachedRenderContext.context,c=s.gl;s.activeTexture.set(c.TEXTURE1),c.bindTexture(c.TEXTURE_2D,this._fbo.colorAttachment.get()),s.bindFramebuffer.set(this._fbo.framebuffer)}_renderErrorTexture(s,c){let g=this._cachedRenderContext.context,y=g.gl;if(this._bindFramebuffer(),g.viewport.set([0,0,this._texWidth,this._texHeight]),g.clear({color:i.b7.transparent}),this._cachedRenderContext.useProgram("projectionErrorMeasurement").draw(g,y.TRIANGLES,vn.disabled,An.disabled,Ko.unblended,to.disabled,((E,I)=>({u_input:E,u_output_expected:I}))(s,c),null,null,"$clipping",this._fullscreenTriangle.vertexBuffer,this._fullscreenTriangle.indexBuffer,this._fullscreenTriangle.segments),this._pbo&&Rs(y)){y.bindBuffer(y.PIXEL_PACK_BUFFER,this._pbo),y.readBuffer(y.COLOR_ATTACHMENT0),y.readPixels(0,0,this._texWidth,this._texHeight,this._texFormat,this._texType,0),y.bindBuffer(y.PIXEL_PACK_BUFFER,null);let E=y.fenceSync(y.SYNC_GPU_COMMANDS_COMPLETE,0);y.flush(),this._readbackQueue={frameNumberIssued:this._updateCount,sync:E}}else this._readbackQueue={frameNumberIssued:this._updateCount,sync:null}}_tryReadback(){let s=this._cachedRenderContext.context.gl;if(this._pbo&&this._readbackQueue&&Rs(s)){let c=s.clientWaitSync(this._readbackQueue.sync,0,0);if(c===s.WAIT_FAILED)return i.w("WebGL2 clientWaitSync failed."),this._readbackQueue=null,void(this._lastReadbackFrame=this._updateCount);if(c===s.TIMEOUT_EXPIRED)return;s.bindBuffer(s.PIXEL_PACK_BUFFER,this._pbo),s.getBufferSubData(s.PIXEL_PACK_BUFFER,0,this._resultBuffer,0,4),s.bindBuffer(s.PIXEL_PACK_BUFFER,null)}else this._bindFramebuffer(),s.readPixels(0,0,this._texWidth,this._texHeight,this._texFormat,this._texType,this._resultBuffer);this._readbackQueue=null,this._measuredError=cT._parseRGBA8float(this._resultBuffer),this._lastReadbackFrame=this._updateCount}static _parseRGBA8float(s){let c=0;return c+=s[0]/256,c+=s[1]/65536,c+=s[2]/16777216,s[3]<127&&(c=-c),c/128}}let pT=i.Z/128;function G0(w,s){let c=w.granularity!==void 0?Math.max(w.granularity,1):1,g=c+(w.generateBorders?2:0),y=c+(w.extendToNorthPole||w.generateBorders?1:0)+(w.extendToSouthPole||w.generateBorders?1:0),E=g+1,I=y+1,P=w.generateBorders?-1:0,L=w.generateBorders||w.extendToNorthPole?-1:0,z=c+(w.generateBorders?1:0),U=c+(w.generateBorders||w.extendToSouthPole?1:0),W=E*I,H=g*y*6,te=E*I>65536;if(te&&s==="16bit")throw new Error("Granularity is too large and meshes would not fit inside 16 bit vertex indices.");let ae=te||s==="32bit",be=new Int16Array(2*W),_e=0;for(let ke=L;ke<=U;ke++)for(let Le=P;Le<=z;Le++){let Fe=Le/c*i.Z;Le===-1&&(Fe=-64),Le===c+1&&(Fe=i.Z+pT);let He=ke/c*i.Z;ke===-1&&(He=w.extendToNorthPole?i.b9:-64),ke===c+1&&(He=w.extendToSouthPole?i.ba:i.Z+pT),be[_e++]=Fe,be[_e++]=He}let xe=ae?new Uint32Array(H):new Uint16Array(H),Ae=0;for(let ke=0;ke<y;ke++)for(let Le=0;Le<g;Le++){let Fe=Le+1+ke*E,He=Le+(ke+1)*E,Be=Le+1+(ke+1)*E;xe[Ae++]=Le+ke*E,xe[Ae++]=He,xe[Ae++]=Fe,xe[Ae++]=Fe,xe[Ae++]=He,xe[Ae++]=Be}return{vertices:be.buffer.slice(0),indices:xe.buffer.slice(0),uses32bitIndices:ae}}let nv=new i.aH({fill:new i.bb(128,2),line:new i.bb(512,0),tile:new i.bb(128,32),stencil:new i.bb(128,1),circle:3});class H0{constructor(){this._tileMeshCache={},this._errorCorrectionUsable=0,this._errorMeasurementLastValue=0,this._errorCorrectionPreviousValue=0,this._errorMeasurementLastChangeTime=-1e3}get name(){return"vertical-perspective"}get transitionState(){return 1}get useSubdivision(){return!0}get shaderVariantName(){return"globe"}get shaderDefine(){return"#define GLOBE"}get shaderPreludeCode(){return bo.projectionGlobe}get vertexShaderPreludeCode(){return bo.projectionMercator.vertexSource}get subdivisionGranularity(){return nv}get useGlobeControls(){return!0}get latitudeErrorCorrectionRadians(){return this._errorCorrectionUsable}destroy(){this._errorMeasurement&&this._errorMeasurement.destroy()}updateGPUdependent(s){this._errorMeasurement||(this._errorMeasurement=new cT(s));let c=i.S(this._errorQueryLatitudeDegrees),g=2*Math.atan(Math.exp(Math.PI-c*Math.PI*2))-.5*Math.PI,y=this._errorMeasurement.updateErrorLoop(c,g),E=v.now();y!==this._errorMeasurementLastValue&&(this._errorCorrectionPreviousValue=this._errorCorrectionUsable,this._errorMeasurementLastValue=y,this._errorMeasurementLastChangeTime=E);let I=Math.min(Math.max((E-this._errorMeasurementLastChangeTime)/1e3/.5,0),1);this._errorCorrectionUsable=i.bc(this._errorCorrectionPreviousValue,-this._errorMeasurementLastValue,i.bd(I))}_getMeshKey(s){return`${s.granularity.toString(36)}_${s.generateBorders?"b":""}${s.extendToNorthPole?"n":""}${s.extendToSouthPole?"s":""}`}getMeshFromTileID(s,c,g,y,E){let I=(E==="stencil"?nv.stencil:nv.tile).getGranularityForZoomLevel(c.z);return this._getMesh(s,{granularity:I,generateBorders:g,extendToNorthPole:c.y===0&&y,extendToSouthPole:c.y===(1<<c.z)-1&&y})}_getMesh(s,c){let g=this._getMeshKey(c);if(g in this._tileMeshCache)return this._tileMeshCache[g];let y=function(E,I){let P=G0(I,"16bit"),L=i.aI.deserialize({arrayBuffer:P.vertices,length:P.vertices.byteLength/2/2}),z=i.aK.deserialize({arrayBuffer:P.indices,length:P.indices.byteLength/2/3});return new ki(E.createVertexBuffer(L,wo.members),E.createIndexBuffer(z),i.aJ.simpleSegment(0,0,L.length,z.length))}(s,c);return this._tileMeshCache[g]=y,y}recalculate(s){}hasTransition(){let s=v.now(),c=!1;return c=c||(s-this._errorMeasurementLastChangeTime)/1e3<.7,c=c||this._errorMeasurement&&this._errorMeasurement.awaitingQuery,c}setErrorQueryLatitudeDegrees(s){this._errorQueryLatitudeDegrees=s}}let fT=new i.r({type:new i.D(i.v.projection.type)});class Vb extends i.E{constructor(s){super(),this._transitionable=new i.T(fT),this.setProjection(s),this._transitioning=this._transitionable.untransitioned(),this.recalculate(new i.C(0)),this._mercatorProjection=new xu,this._verticalPerspectiveProjection=new H0}get transitionState(){let s=this.properties.get("type");if(typeof s=="string"&&s==="mercator")return 0;if(typeof s=="string"&&s==="vertical-perspective")return 1;if(s instanceof i.be){if(s.from==="vertical-perspective"&&s.to==="mercator")return 1-s.transition;if(s.from==="mercator"&&s.to==="vertical-perspective")return s.transition}return 1}get useGlobeRendering(){return this.transitionState>0}get latitudeErrorCorrectionRadians(){return this._verticalPerspectiveProjection.latitudeErrorCorrectionRadians}get currentProjection(){return this.useGlobeRendering?this._verticalPerspectiveProjection:this._mercatorProjection}get name(){return"globe"}get useSubdivision(){return this.currentProjection.useSubdivision}get shaderVariantName(){return this.currentProjection.shaderVariantName}get shaderDefine(){return this.currentProjection.shaderDefine}get shaderPreludeCode(){return this.currentProjection.shaderPreludeCode}get vertexShaderPreludeCode(){return this.currentProjection.vertexShaderPreludeCode}get subdivisionGranularity(){return this.currentProjection.subdivisionGranularity}get useGlobeControls(){return this.transitionState>0}destroy(){this._mercatorProjection.destroy(),this._verticalPerspectiveProjection.destroy()}updateGPUdependent(s){this._mercatorProjection.updateGPUdependent(s),this._verticalPerspectiveProjection.updateGPUdependent(s)}getMeshFromTileID(s,c,g,y,E){return this.currentProjection.getMeshFromTileID(s,c,g,y,E)}setProjection(s){this._transitionable.setValue("type",(s==null?void 0:s.type)||"mercator")}updateTransitions(s){this._transitioning=this._transitionable.transitioned(s,this._transitioning)}hasTransition(){return this._transitioning.hasTransition()||this.currentProjection.hasTransition()}recalculate(s){this.properties=this._transitioning.possiblyEvaluate(s)}setErrorQueryLatitudeDegrees(s){this._verticalPerspectiveProjection.setErrorQueryLatitudeDegrees(s),this._mercatorProjection.setErrorQueryLatitudeDegrees(s)}}function W0(w){let s=Tm(w.worldSize,w.center.lat);return 2*Math.PI*s}function Sm(w,s,c,g,y){let E=1/(1<<y),I=s/i.Z*E+g*E,P=i.bg((w/i.Z*E+c*E)*Math.PI*2+Math.PI,2*Math.PI),L=2*Math.atan(Math.exp(Math.PI-I*Math.PI*2))-.5*Math.PI,z=Math.cos(L),U=new Float64Array(3);return U[0]=Math.sin(P)*z,U[1]=Math.sin(L),U[2]=Math.cos(P)*z,U}function rs(w){return function(s,c){let g=Math.cos(c),y=new Float64Array(3);return y[0]=Math.sin(s)*g,y[1]=Math.sin(c),y[2]=Math.cos(s)*g,y}(w.lng*Math.PI/180,w.lat*Math.PI/180)}function Tm(w,s){return w/(2*Math.PI)/Math.cos(s*Math.PI/180)}function $0(w){let s=Math.asin(w[1])/Math.PI*180,c=Math.sqrt(w[0]*w[0]+w[2]*w[2]);if(c>1e-6){let g=w[0]/c,y=Math.acos(w[2]/c),E=(g>0?y:-y)/Math.PI*180;return new i.Q(i.aL(E,-180,180),s)}return new i.Q(0,s)}function Zd(w){return Math.cos(w*Math.PI/180)}function ns(w,s){let c=Zd(w),g=Zd(s);return i.ah(g/c)}function Gb(w,s){let c=w.rotate(s.bearingInRadians),g=s.zoom+ns(s.center.lat,0),y=i.bc(1/Zd(s.center.lat),1/Zd(Math.min(Math.abs(s.center.lat),60)),i.bf(g,7,3,0,1)),E=360/W0({worldSize:s.worldSize,center:{lat:s.center.lat}});return new i.Q(s.center.lng-c.x*E*y,i.ae(s.center.lat+c.y*E,-85.051129,i.af))}function Hb(w){let s=.5*w,c=Math.sin(s),g=Math.cos(s);return Math.log(c+g)-Math.log(g-c)}function nN(w,s,c,g){let y=w.lat+c*g;if(Math.abs(c)>1){let E=(Math.sign(w.lat+c)!==Math.sign(w.lat)?-Math.abs(w.lat):Math.abs(w.lat))*Math.PI/180,I=Math.abs(w.lat+c)*Math.PI/180,P=Hb(E+g*(I-E)),L=Hb(E),z=Hb(I);return new i.Q(w.lng+s*((P-L)/(z-L)),y)}return new i.Q(w.lng+s*g,y)}class pU{constructor(s){this._cachePrevious=new Map,this._cache=new Map,this._hadAnyChanges=!1,this._aabbFactory=s}recalculateCache(){if(!this._hadAnyChanges)return;let s=this._cachePrevious;this._cachePrevious=this._cache,this._cache=s,this._cache.clear(),this._hadAnyChanges=!1}getTileAABB(s,c,g,y){let E=`${s.z}_${s.x}_${s.y}`,I=this._cache.get(E);if(I)return I;let P=this._cachePrevious.get(E);if(P)return this._cache.set(E,P),P;let L=this._aabbFactory(s,c,g,y);return this._cache.set(E,L),this._hadAnyChanges=!0,L}}function js(w,s,c){let g=w-s;return g<0?-g:Math.max(0,g-c)}function Z0(w,s,c,g,y){let E=w-c,I;return I=E<0?Math.min(-E,1+E-y):E>1?Math.min(Math.max(E-y,0),1-E):0,Math.max(I,js(s,g,y))}class wp{constructor(){this._aabbCache=new pU(this._computeTileAABB)}recalculateCache(){this._aabbCache.recalculateCache()}distanceToTile2d(s,c,g,y){let E=1<<g.z,I=1/E,P=g.x/E,L=g.y/E,z=2;return z=Math.min(z,Z0(s,c,P,L,I)),z=Math.min(z,Z0(s,c,P+.5,-L-I,I)),z=Math.min(z,Z0(s,c,P+.5,2-L-I,I)),z}getWrap(s,c,g){let y=1<<c.z,E=1/y,I=c.x/y,P=js(s.x,I,E),L=js(s.x,I-1,E),z=js(s.x,I+1,E),U=Math.min(P,L,z);return U===z?1:U===L?-1:0}allowVariableZoom(s,c){return je(s,c)>4}allowWorldCopies(){return!1}getTileAABB(s,c,g,y){return this._aabbCache.getTileAABB(s,c,g,y)}_computeTileAABB(s,c,g,y){if(s.z<=0)return new ma([-1,-1,-1],[1,1,1]);if(s.z===1)return new ma([s.x===0?-1:0,s.y===0?0:-1,-1],[s.x===0?0:1,s.y===0?1:0,1]);{let E=[Sm(0,0,s.x,s.y,s.z),Sm(i.Z,0,s.x,s.y,s.z),Sm(i.Z,i.Z,s.x,s.y,s.z),Sm(0,i.Z,s.x,s.y,s.z)],I=[1,1,1],P=[-1,-1,-1];for(let L of E)for(let z=0;z<3;z++)I[z]=Math.min(I[z],L[z]),P[z]=Math.max(P[z],L[z]);if(s.y===0||s.y===(1<<s.z)-1){let L=[0,s.y===0?1:-1,0];for(let z=0;z<3;z++)I[z]=Math.min(I[z],L[z]),P[z]=Math.max(P[z],L[z])}return new ma(I,P)}}}class Im{get pixelsToClipSpaceMatrix(){return this._helper.pixelsToClipSpaceMatrix}get clipSpaceToPixelsMatrix(){return this._helper.clipSpaceToPixelsMatrix}get pixelsToGLUnits(){return this._helper.pixelsToGLUnits}get centerOffset(){return this._helper.centerOffset}get size(){return this._helper.size}get rotationMatrix(){return this._helper.rotationMatrix}get centerPoint(){return this._helper.centerPoint}get pixelsPerMeter(){return this._helper.pixelsPerMeter}setMinZoom(s){this._helper.setMinZoom(s)}setMaxZoom(s){this._helper.setMaxZoom(s)}setMinPitch(s){this._helper.setMinPitch(s)}setMaxPitch(s){this._helper.setMaxPitch(s)}setRenderWorldCopies(s){this._helper.setRenderWorldCopies(s)}setBearing(s){this._helper.setBearing(s)}setPitch(s){this._helper.setPitch(s)}setRoll(s){this._helper.setRoll(s)}setFov(s){this._helper.setFov(s)}setZoom(s){this._helper.setZoom(s)}setCenter(s){this._helper.setCenter(s)}setElevation(s){this._helper.setElevation(s)}setMinElevationForCurrentTile(s){this._helper.setMinElevationForCurrentTile(s)}setPadding(s){this._helper.setPadding(s)}interpolatePadding(s,c,g){return this._helper.interpolatePadding(s,c,g)}isPaddingEqual(s){return this._helper.isPaddingEqual(s)}resize(s,c){this._helper.resize(s,c)}getMaxBounds(){return this._helper.getMaxBounds()}setMaxBounds(s){this._helper.setMaxBounds(s)}overrideNearFarZ(s,c){this._helper.overrideNearFarZ(s,c)}clearNearFarZOverride(){this._helper.clearNearFarZOverride()}getCameraQueryGeometry(s){return this._helper.getCameraQueryGeometry(this.getCameraPoint(),s)}get tileSize(){return this._helper.tileSize}get tileZoom(){return this._helper.tileZoom}get scale(){return this._helper.scale}get worldSize(){return this._helper.worldSize}get width(){return this._helper.width}get height(){return this._helper.height}get lngRange(){return this._helper.lngRange}get latRange(){return this._helper.latRange}get minZoom(){return this._helper.minZoom}get maxZoom(){return this._helper.maxZoom}get zoom(){return this._helper.zoom}get center(){return this._helper.center}get minPitch(){return this._helper.minPitch}get maxPitch(){return this._helper.maxPitch}get pitch(){return this._helper.pitch}get pitchInRadians(){return this._helper.pitchInRadians}get roll(){return this._helper.roll}get rollInRadians(){return this._helper.rollInRadians}get bearing(){return this._helper.bearing}get bearingInRadians(){return this._helper.bearingInRadians}get fov(){return this._helper.fov}get fovInRadians(){return this._helper.fovInRadians}get elevation(){return this._helper.elevation}get minElevationForCurrentTile(){return this._helper.minElevationForCurrentTile}get padding(){return this._helper.padding}get unmodified(){return this._helper.unmodified}get renderWorldCopies(){return this._helper.renderWorldCopies}get nearZ(){return this._helper.nearZ}get farZ(){return this._helper.farZ}get autoCalculateNearFarZ(){return this._helper.autoCalculateNearFarZ}setTransitionState(s){}constructor(){this._cachedClippingPlane=i.bk(),this._projectionMatrix=i.b1(),this._globeViewProjMatrix32f=i.b0(),this._globeViewProjMatrixNoCorrection=i.b1(),this._globeViewProjMatrixNoCorrectionInverted=i.b1(),this._globeProjMatrixInverted=i.b1(),this._cameraPosition=i.bh(),this._globeLatitudeErrorCorrectionRadians=0,this._helper=new Zi({calcMatrices:()=>{this._calcMatrices()},getConstrained:(s,c)=>this.getConstrained(s,c)}),this._coveringTilesDetailsProvider=new wp}clone(){let s=new Im;return s.apply(this),s}apply(s,c){this._globeLatitudeErrorCorrectionRadians=c||0,this._helper.apply(s)}get projectionMatrix(){return this._projectionMatrix}get modelViewProjectionMatrix(){return this._globeViewProjMatrixNoCorrection}get inverseProjectionMatrix(){return this._globeProjMatrixInverted}get cameraPosition(){let s=i.bh();return s[0]=this._cameraPosition[0],s[1]=this._cameraPosition[1],s[2]=this._cameraPosition[2],s}get cameraToCenterDistance(){return this._helper.cameraToCenterDistance}getProjectionData(s){let{overscaledTileID:c,applyGlobeMatrix:g}=s,y=this._helper.getMercatorTileCoordinates(c);return{mainMatrix:this._globeViewProjMatrix32f,tileMercatorCoords:y,clippingPlane:this._cachedClippingPlane,projectionTransition:g?1:0,fallbackMatrix:this._globeViewProjMatrix32f}}_computeClippingPlane(s){let c=this.pitchInRadians,g=this.cameraToCenterDistance/s,y=Math.sin(c)*g,E=Math.cos(c)*g+1,I=1/Math.sqrt(y*y+E*E)*1,P=-y,L=E,z=Math.sqrt(P*P+L*L);P/=z,L/=z;let U=[0,P,L];i.bl(U,U,[0,0,0],-this.bearingInRadians),i.bm(U,U,[0,0,0],-1*this.center.lat*Math.PI/180),i.bn(U,U,[0,0,0],this.center.lng*Math.PI/180);let W=1/i.bo(U);return i.aO(U,U,W),[...U,-I*W]}isLocationOccluded(s){return!this.isSurfacePointVisible(rs(s))}transformLightDirection(s){let c=this._helper._center.lng*Math.PI/180,g=this._helper._center.lat*Math.PI/180,y=Math.cos(g),E=[Math.sin(c)*y,Math.sin(g),Math.cos(c)*y],I=[E[2],0,-E[0]],P=[0,0,0];i.aU(P,I,E),i.aT(I,I),i.aT(P,P);let L=[0,0,0];return i.aT(L,[I[0]*s[0]+P[0]*s[1]+E[0]*s[2],I[1]*s[0]+P[1]*s[1]+E[1]*s[2],I[2]*s[0]+P[2]*s[1]+E[2]*s[2]]),L}getPixelScale(){return 1/Math.cos(this._helper._center.lat*Math.PI/180)}getCircleRadiusCorrection(){return Math.cos(this._helper._center.lat*Math.PI/180)}getPitchedTextCorrection(s,c,g){let y=function(P,L,z){let U=1/(1<<z.z);return new i.$(P/i.Z*U+z.x*U,L/i.Z*U+z.y*U)}(s,c,g.canonical),E=(I=y.y,[i.bg(y.x*Math.PI*2+Math.PI,2*Math.PI),2*Math.atan(Math.exp(Math.PI-I*Math.PI*2))-.5*Math.PI]);var I;return this.getCircleRadiusCorrection()/Math.cos(E[1])}projectTileCoordinates(s,c,g,y){let E=g.canonical,I=Sm(s,c,E.x,E.y,E.z),P=1+(y?y(s,c):0)/i.bu,L=[I[0]*P,I[1]*P,I[2]*P,1];i.at(L,L,this._globeViewProjMatrixNoCorrection);let z=this._cachedClippingPlane,U=z[0]*I[0]+z[1]*I[1]+z[2]*I[2]+z[3]<0;return{point:new i.P(L[0]/L[3],L[1]/L[3]),signedDistanceFromCamera:L[3],isOccluded:U}}_calcMatrices(){if(!this._helper._width||!this._helper._height)return;let s=Tm(this.worldSize,this.center.lat),c=i.b2(),g=i.b2();this._helper.autoCalculateNearFarZ&&(this._helper._nearZ=.5,this._helper._farZ=this.cameraToCenterDistance+2*s),i.aY(c,this.fovInRadians,this.width/this.height,this._helper._nearZ,this._helper._farZ);let y=this.centerOffset;c[8]=2*-y.x/this._helper._width,c[9]=2*y.y/this._helper._height,this._projectionMatrix=i.aZ(c),this._globeProjMatrixInverted=i.b2(),i.an(this._globeProjMatrixInverted,c),i.L(c,c,[0,0,-this.cameraToCenterDistance]),i.a_(c,c,this.rollInRadians),i.a$(c,c,-this.pitchInRadians),i.a_(c,c,this.bearingInRadians),i.L(c,c,[0,0,-s]);let E=i.bh();E[0]=s,E[1]=s,E[2]=s,i.a$(g,c,this.center.lat*Math.PI/180),i.bp(g,g,-this.center.lng*Math.PI/180),i.M(g,g,E),this._globeViewProjMatrixNoCorrection=g,i.a$(c,c,this.center.lat*Math.PI/180-this._globeLatitudeErrorCorrectionRadians),i.bp(c,c,-this.center.lng*Math.PI/180),i.M(c,c,E),this._globeViewProjMatrix32f=new Float32Array(c),this._globeViewProjMatrixNoCorrectionInverted=i.b2(),i.an(this._globeViewProjMatrixNoCorrectionInverted,g);let I=i.bh();this._cameraPosition=i.bh(),this._cameraPosition[2]=this.cameraToCenterDistance/s,i.bl(this._cameraPosition,this._cameraPosition,I,-this.rollInRadians),i.bm(this._cameraPosition,this._cameraPosition,I,this.pitchInRadians),i.bl(this._cameraPosition,this._cameraPosition,I,-this.bearingInRadians),i.aP(this._cameraPosition,this._cameraPosition,[0,0,1]),i.bm(this._cameraPosition,this._cameraPosition,I,-this.center.lat*Math.PI/180),i.bn(this._cameraPosition,this._cameraPosition,I,this.center.lng*Math.PI/180),this._cachedClippingPlane=this._computeClippingPlane(s);let P=i.aZ(this._globeViewProjMatrixNoCorrectionInverted);i.M(P,P,[1,1,-1]),this._cachedFrustum=zo.fromInvProjectionMatrix(P)}calculateFogMatrix(s){i.w("calculateFogMatrix is not supported on globe projection.");let c=i.b2();return i.ad(c),c}getVisibleUnwrappedCoordinates(s){return[new i.aW(0,s)]}getCameraFrustum(){return this._cachedFrustum}getClippingPlane(){return this._cachedClippingPlane}getCoveringTilesDetailsProvider(){return this._coveringTilesDetailsProvider}recalculateZoomAndCenter(s){s&&i.w("terrain is not fully supported on vertical perspective projection."),this._helper.recalculateZoomAndCenter(0)}maxPitchScaleFactor(){return 1}getCameraPoint(){return this._helper.getCameraPoint()}getCameraAltitude(){return this._helper.getCameraAltitude()}getCameraLngLat(){return this._helper.getCameraLngLat()}lngLatToCameraDepth(s,c){if(!this._globeViewProjMatrixNoCorrection)return 1;let g=rs(s);i.aO(g,g,1+c/i.bu);let y=i.bk();return i.at(y,[g[0],g[1],g[2],1],this._globeViewProjMatrixNoCorrection),y[2]/y[3]}populateCache(s){}getBounds(){let s=.5*this.width,c=.5*this.height,g=[new i.P(0,0),new i.P(s,0),new i.P(this.width,0),new i.P(this.width,c),new i.P(this.width,this.height),new i.P(s,this.height),new i.P(0,this.height),new i.P(0,c)],y=[];for(let W of g)y.push(this.unprojectScreenPoint(W));let E=0,I=0,P=0,L=0,z=this.center;for(let W of y){let H=i.bq(z.lng,W.lng),te=i.bq(z.lat,W.lat);H<I&&(I=H),H>E&&(E=H),te<L&&(L=te),te>P&&(P=te)}let U=[z.lng+I,z.lat+L,z.lng+E,z.lat+P];return this.isSurfacePointOnScreen([0,1,0])&&(U[3]=90,U[0]=-180,U[2]=180),this.isSurfacePointOnScreen([0,-1,0])&&(U[1]=-90,U[0]=-180,U[2]=180),new St(U)}getConstrained(s,c){let g=i.ae(s.lat,-85.051129,i.af),y=i.ae(+c,this.minZoom+ns(0,g),this.maxZoom);return{center:new i.Q(s.lng,g),zoom:y}}calculateCenterFromCameraLngLatAlt(s,c,g,y){return this._helper.calculateCenterFromCameraLngLatAlt(s,c,g,y)}setLocationAtPoint(s,c){let g=rs(this.unprojectScreenPoint(c)),y=rs(s),E=i.bh();i.br(E);let I=i.bh();i.bn(I,g,E,-this.center.lng*Math.PI/180),i.bm(I,I,E,this.center.lat*Math.PI/180);let P=y[0]*y[0]+y[2]*y[2],L=I[0]*I[0];if(P<L)return;let z=Math.sqrt(P-L),U=-z,W=i.bs(y[0],y[2],I[0],z),H=i.bs(y[0],y[2],I[0],U),te=i.bh();i.bn(te,y,E,-W);let ae=i.bs(te[1],te[2],I[1],I[2]),be=i.bh();i.bn(be,y,E,-H);let _e=i.bs(be[1],be[2],I[1],I[2]),xe=.5*Math.PI,Ae=ae>=-xe&&ae<=xe,ke=_e>=-xe&&_e<=xe,Le,Fe;if(Ae&&ke){let ht=this.center.lng*Math.PI/180,lt=this.center.lat*Math.PI/180;i.bv(W,ht)+i.bv(ae,lt)<i.bv(H,ht)+i.bv(_e,lt)?(Le=W,Fe=ae):(Le=H,Fe=_e)}else if(Ae)Le=W,Fe=ae;else{if(!ke)return;Le=H,Fe=_e}let He=Le/Math.PI*180,Be=Fe/Math.PI*180,rt=this.center.lat;this.setCenter(new i.Q(He,i.ae(Be,-90,90))),this.setZoom(this.zoom+ns(rt,this.center.lat))}locationToScreenPoint(s,c){let g=rs(s);if(c){let y=c.getElevationForLngLatZoom(s,this._helper._tileZoom);i.aO(g,g,1+y/i.bu)}return this._projectSurfacePointToScreen(g)}_projectSurfacePointToScreen(s){let c=i.bk();return i.at(c,[...s,1],this._globeViewProjMatrixNoCorrection),c[0]/=c[3],c[1]/=c[3],new i.P((.5*c[0]+.5)*this.width,(.5*-c[1]+.5)*this.height)}screenPointToMercatorCoordinate(s,c){if(c){let g=c.pointCoordinate(s);if(g)return g}return i.$.fromLngLat(this.unprojectScreenPoint(s))}screenPointToLocation(s,c){var g;return(g=this.screenPointToMercatorCoordinate(s,c))===null||g===void 0?void 0:g.toLngLat()}isPointOnMapSurface(s,c){let g=this._cameraPosition,y=this.getRayDirectionFromPixel(s);return!!this.rayPlanetIntersection(g,y)}getRayDirectionFromPixel(s){let c=i.bk();c[0]=s.x/this.width*2-1,c[1]=-1*(s.y/this.height*2-1),c[2]=1,c[3]=1,i.at(c,c,this._globeViewProjMatrixNoCorrectionInverted),c[0]/=c[3],c[1]/=c[3],c[2]/=c[3];let g=i.bh();g[0]=c[0]-this._cameraPosition[0],g[1]=c[1]-this._cameraPosition[1],g[2]=c[2]-this._cameraPosition[2];let y=i.bh();return i.aT(y,g),y}isSurfacePointVisible(s){let c=this._cachedClippingPlane;return c[0]*s[0]+c[1]*s[1]+c[2]*s[2]+c[3]>=0}isSurfacePointOnScreen(s){if(!this.isSurfacePointVisible(s))return!1;let c=i.bk();return i.at(c,[...s,1],this._globeViewProjMatrixNoCorrection),c[0]/=c[3],c[1]/=c[3],c[2]/=c[3],c[0]>-1&&c[0]<1&&c[1]>-1&&c[1]<1&&c[2]>-1&&c[2]<1}rayPlanetIntersection(s,c){let g=i.aV(s,c),y=i.bh(),E=i.bh();i.aO(E,c,g),i.aS(y,s,E);let I=1-i.aV(y,y);if(I<0)return null;let P=i.aV(s,s)-1,L=-g+(g<0?1:-1)*Math.sqrt(I),z=P/L,U=L;return{tMin:Math.min(z,U),tMax:Math.max(z,U)}}unprojectScreenPoint(s){let c=this._cameraPosition,g=this.getRayDirectionFromPixel(s),y=this.rayPlanetIntersection(c,g);if(y){let U=i.bh();i.aP(U,c,[g[0]*y.tMin,g[1]*y.tMin,g[2]*y.tMin]);let W=i.bh();return i.aT(W,U),$0(W)}let E=this._cachedClippingPlane,I=E[0]*g[0]+E[1]*g[1]+E[2]*g[2],P=-i.bt(E,c)/I,L=i.bh();if(P>0)i.aP(L,c,[g[0]*P,g[1]*P,g[2]*P]);else{let U=i.bh();i.aP(U,c,[2*g[0],2*g[1],2*g[2]]);let W=i.bt(this._cachedClippingPlane,U);i.aS(L,U,[this._cachedClippingPlane[0]*W,this._cachedClippingPlane[1]*W,this._cachedClippingPlane[2]*W])}let z=function(U){let W=i.bh();return W[0]=U[0]*-U[3],W[1]=U[1]*-U[3],W[2]=U[2]*-U[3],{center:W,radius:Math.sqrt(1-U[3]*U[3])}}(E);return $0(function(U,W,H){let te=i.bh();i.aS(te,H,U);let ae=i.bh();return i.bi(ae,U,te,W/i.bj(te)),ae}(z.center,z.radius,L))}getMatrixForModel(s,c){let g=i.Q.convert(s),y=1/i.bu,E=i.b1();return i.bp(E,E,g.lng/180*Math.PI),i.a$(E,E,-g.lat/180*Math.PI),i.L(E,E,[0,0,1+c/i.bu]),i.a$(E,E,.5*Math.PI),i.M(E,E,[y,y,y]),E}getProjectionDataForCustomLayer(s=!0){let c=this.getProjectionData({overscaledTileID:new i.Y(0,0,0,0,0),applyGlobeMatrix:s});return c.tileMercatorCoords=[0,0,1,1],c}getFastPathSimpleProjectionMatrix(s){}}class Y0{get pixelsToClipSpaceMatrix(){return this._helper.pixelsToClipSpaceMatrix}get clipSpaceToPixelsMatrix(){return this._helper.clipSpaceToPixelsMatrix}get pixelsToGLUnits(){return this._helper.pixelsToGLUnits}get centerOffset(){return this._helper.centerOffset}get size(){return this._helper.size}get rotationMatrix(){return this._helper.rotationMatrix}get centerPoint(){return this._helper.centerPoint}get pixelsPerMeter(){return this._helper.pixelsPerMeter}setMinZoom(s){this._helper.setMinZoom(s)}setMaxZoom(s){this._helper.setMaxZoom(s)}setMinPitch(s){this._helper.setMinPitch(s)}setMaxPitch(s){this._helper.setMaxPitch(s)}setRenderWorldCopies(s){this._helper.setRenderWorldCopies(s)}setBearing(s){this._helper.setBearing(s)}setPitch(s){this._helper.setPitch(s)}setRoll(s){this._helper.setRoll(s)}setFov(s){this._helper.setFov(s)}setZoom(s){this._helper.setZoom(s)}setCenter(s){this._helper.setCenter(s)}setElevation(s){this._helper.setElevation(s)}setMinElevationForCurrentTile(s){this._helper.setMinElevationForCurrentTile(s)}setPadding(s){this._helper.setPadding(s)}interpolatePadding(s,c,g){return this._helper.interpolatePadding(s,c,g)}isPaddingEqual(s){return this._helper.isPaddingEqual(s)}resize(s,c,g=!0){this._helper.resize(s,c,g)}getMaxBounds(){return this._helper.getMaxBounds()}setMaxBounds(s){this._helper.setMaxBounds(s)}overrideNearFarZ(s,c){this._helper.overrideNearFarZ(s,c)}clearNearFarZOverride(){this._helper.clearNearFarZOverride()}getCameraQueryGeometry(s){return this._helper.getCameraQueryGeometry(this.getCameraPoint(),s)}get tileSize(){return this._helper.tileSize}get tileZoom(){return this._helper.tileZoom}get scale(){return this._helper.scale}get worldSize(){return this._helper.worldSize}get width(){return this._helper.width}get height(){return this._helper.height}get lngRange(){return this._helper.lngRange}get latRange(){return this._helper.latRange}get minZoom(){return this._helper.minZoom}get maxZoom(){return this._helper.maxZoom}get zoom(){return this._helper.zoom}get center(){return this._helper.center}get minPitch(){return this._helper.minPitch}get maxPitch(){return this._helper.maxPitch}get pitch(){return this._helper.pitch}get pitchInRadians(){return this._helper.pitchInRadians}get roll(){return this._helper.roll}get rollInRadians(){return this._helper.rollInRadians}get bearing(){return this._helper.bearing}get bearingInRadians(){return this._helper.bearingInRadians}get fov(){return this._helper.fov}get fovInRadians(){return this._helper.fovInRadians}get elevation(){return this._helper.elevation}get minElevationForCurrentTile(){return this._helper.minElevationForCurrentTile}get padding(){return this._helper.padding}get unmodified(){return this._helper.unmodified}get renderWorldCopies(){return this._helper.renderWorldCopies}get cameraToCenterDistance(){return this._helper.cameraToCenterDistance}get nearZ(){return this._helper.nearZ}get farZ(){return this._helper.farZ}get autoCalculateNearFarZ(){return this._helper.autoCalculateNearFarZ}get isGlobeRendering(){return this._globeness>0}setTransitionState(s,c){this._globeness=s,this._globeLatitudeErrorCorrectionRadians=c,this._calcMatrices(),this._verticalPerspectiveTransform.getCoveringTilesDetailsProvider().recalculateCache(),this._mercatorTransform.getCoveringTilesDetailsProvider().recalculateCache()}get currentTransform(){return this.isGlobeRendering?this._verticalPerspectiveTransform:this._mercatorTransform}constructor(){this._globeLatitudeErrorCorrectionRadians=0,this._globeness=1,this._helper=new Zi({calcMatrices:()=>{this._calcMatrices()},getConstrained:(s,c)=>this.getConstrained(s,c)}),this._globeness=1,this._mercatorTransform=new jf,this._verticalPerspectiveTransform=new Im}clone(){let s=new Y0;return s._globeness=this._globeness,s._globeLatitudeErrorCorrectionRadians=this._globeLatitudeErrorCorrectionRadians,s.apply(this),s}apply(s){this._helper.apply(s),this._mercatorTransform.apply(this),this._verticalPerspectiveTransform.apply(this,this._globeLatitudeErrorCorrectionRadians)}get projectionMatrix(){return this.currentTransform.projectionMatrix}get modelViewProjectionMatrix(){return this.currentTransform.modelViewProjectionMatrix}get inverseProjectionMatrix(){return this.currentTransform.inverseProjectionMatrix}get cameraPosition(){return this.currentTransform.cameraPosition}getProjectionData(s){let c=this._mercatorTransform.getProjectionData(s),g=this._verticalPerspectiveTransform.getProjectionData(s);return{mainMatrix:this.isGlobeRendering?g.mainMatrix:c.mainMatrix,clippingPlane:g.clippingPlane,tileMercatorCoords:g.tileMercatorCoords,projectionTransition:s.applyGlobeMatrix?this._globeness:0,fallbackMatrix:c.fallbackMatrix}}isLocationOccluded(s){return this.currentTransform.isLocationOccluded(s)}transformLightDirection(s){return this.currentTransform.transformLightDirection(s)}getPixelScale(){return i.bc(this._mercatorTransform.getPixelScale(),this._verticalPerspectiveTransform.getPixelScale(),this._globeness)}getCircleRadiusCorrection(){return i.bc(this._mercatorTransform.getCircleRadiusCorrection(),this._verticalPerspectiveTransform.getCircleRadiusCorrection(),this._globeness)}getPitchedTextCorrection(s,c,g){let y=this._mercatorTransform.getPitchedTextCorrection(s,c,g),E=this._verticalPerspectiveTransform.getPitchedTextCorrection(s,c,g);return i.bc(y,E,this._globeness)}projectTileCoordinates(s,c,g,y){return this.currentTransform.projectTileCoordinates(s,c,g,y)}_calcMatrices(){this._helper._width&&this._helper._height&&(this._verticalPerspectiveTransform.apply(this,this._globeLatitudeErrorCorrectionRadians),this._helper._nearZ=this._verticalPerspectiveTransform.nearZ,this._helper._farZ=this._verticalPerspectiveTransform.farZ,this._mercatorTransform.apply(this,!0,this.isGlobeRendering),this._helper._nearZ=this._mercatorTransform.nearZ,this._helper._farZ=this._mercatorTransform.farZ)}calculateFogMatrix(s){return this.currentTransform.calculateFogMatrix(s)}getVisibleUnwrappedCoordinates(s){return this.currentTransform.getVisibleUnwrappedCoordinates(s)}getCameraFrustum(){return this.currentTransform.getCameraFrustum()}getClippingPlane(){return this.currentTransform.getClippingPlane()}getCoveringTilesDetailsProvider(){return this.currentTransform.getCoveringTilesDetailsProvider()}recalculateZoomAndCenter(s){this._mercatorTransform.recalculateZoomAndCenter(s),this._verticalPerspectiveTransform.recalculateZoomAndCenter(s)}maxPitchScaleFactor(){return this._mercatorTransform.maxPitchScaleFactor()}getCameraPoint(){return this._helper.getCameraPoint()}getCameraAltitude(){return this._helper.getCameraAltitude()}getCameraLngLat(){return this._helper.getCameraLngLat()}lngLatToCameraDepth(s,c){return this.currentTransform.lngLatToCameraDepth(s,c)}populateCache(s){this._mercatorTransform.populateCache(s),this._verticalPerspectiveTransform.populateCache(s)}getBounds(){return this.currentTransform.getBounds()}getConstrained(s,c){return this.currentTransform.getConstrained(s,c)}calculateCenterFromCameraLngLatAlt(s,c,g,y){return this._helper.calculateCenterFromCameraLngLatAlt(s,c,g,y)}setLocationAtPoint(s,c){if(!this.isGlobeRendering)return this._mercatorTransform.setLocationAtPoint(s,c),void this.apply(this._mercatorTransform);this._verticalPerspectiveTransform.setLocationAtPoint(s,c),this.apply(this._verticalPerspectiveTransform)}locationToScreenPoint(s,c){return this.currentTransform.locationToScreenPoint(s,c)}screenPointToMercatorCoordinate(s,c){return this.currentTransform.screenPointToMercatorCoordinate(s,c)}screenPointToLocation(s,c){return this.currentTransform.screenPointToLocation(s,c)}isPointOnMapSurface(s,c){return this.currentTransform.isPointOnMapSurface(s,c)}getRayDirectionFromPixel(s){return this._verticalPerspectiveTransform.getRayDirectionFromPixel(s)}getMatrixForModel(s,c){return this.currentTransform.getMatrixForModel(s,c)}getProjectionDataForCustomLayer(s=!0){let c=this._mercatorTransform.getProjectionDataForCustomLayer(s);if(!this.isGlobeRendering)return c;let g=this._verticalPerspectiveTransform.getProjectionDataForCustomLayer(s);return g.fallbackMatrix=c.mainMatrix,g}getFastPathSimpleProjectionMatrix(s){return this.currentTransform.getFastPathSimpleProjectionMatrix(s)}}class tc{get useGlobeControls(){return!0}handlePanInertia(s,c){let g=Gb(s,c);return Math.abs(g.lng-c.center.lng)>180&&(g.lng=c.center.lng+179.5*Math.sign(g.lng-c.center.lng)),{easingCenter:g,easingOffset:new i.P(0,0)}}handleMapControlsRollPitchBearingZoom(s,c){let g=s.around,y=c.screenPointToLocation(g);s.bearingDelta&&c.setBearing(c.bearing+s.bearingDelta),s.pitchDelta&&c.setPitch(c.pitch+s.pitchDelta),s.rollDelta&&c.setRoll(c.roll+s.rollDelta);let E=c.zoom;s.zoomDelta&&c.setZoom(c.zoom+s.zoomDelta);let I=c.zoom-E;if(I===0)return;let P=i.bq(c.center.lng,y.lng),L=P/(Math.abs(P/180)+1),z=i.bq(c.center.lat,y.lat),U=c.getRayDirectionFromPixel(g),W=c.cameraPosition,H=-1*i.aV(W,U),te=i.bh();i.aP(te,W,[U[0]*H,U[1]*H,U[2]*H]);let ae=i.bo(te)-1,be=Math.exp(.5*-Math.max(ae-.3,0)),_e=Tm(c.worldSize,c.center.lat)/Math.min(c.width,c.height),xe=i.bf(_e,.9,.5,1,.25),Ae=(1-i.ac(-I))*Math.min(be,xe),ke=c.center.lat,Le=c.zoom,Fe=new i.Q(c.center.lng+L*Ae,i.ae(c.center.lat+z*Ae,-85.051129,i.af));c.setLocationAtPoint(y,g);let He=c.center,Be=i.bf(Math.abs(P),45,85,0,1),rt=i.bf(_e,.75,.35,0,1),ht=Math.pow(Math.max(Be,rt),.25),lt=i.bq(He.lng,Fe.lng),ut=i.bq(He.lat,Fe.lat);c.setCenter(new i.Q(He.lng+lt*ht,He.lat+ut*ht).wrap()),c.setZoom(Le+ns(ke,c.center.lat))}handleMapControlsPan(s,c,g){if(!s.panDelta)return;let y=c.center.lat,E=c.zoom;c.setCenter(Gb(s.panDelta,c).wrap()),c.setZoom(E+ns(y,c.center.lat))}cameraForBoxAndBearing(s,c,g,y,E){let I=xs(s,c,g,y,E),P=c.left/E.width*2-1,L=(E.width-c.right)/E.width*2-1,z=c.top/E.height*-2+1,U=(E.height-c.bottom)/E.height*-2+1,W=i.bq(g.getWest(),g.getEast())<0,H=W?g.getEast():g.getWest(),te=W?g.getWest():g.getEast(),ae=Math.max(g.getNorth(),g.getSouth()),be=Math.min(g.getNorth(),g.getSouth()),_e=H+.5*i.bq(H,te),xe=ae+.5*i.bq(ae,be),Ae=E.clone();Ae.setCenter(I.center),Ae.setBearing(I.bearing),Ae.setPitch(0),Ae.setRoll(0),Ae.setZoom(I.zoom);let ke=Ae.modelViewProjectionMatrix,Le=[rs(g.getNorthWest()),rs(g.getNorthEast()),rs(g.getSouthWest()),rs(g.getSouthEast()),rs(new i.Q(te,xe)),rs(new i.Q(H,xe)),rs(new i.Q(_e,ae)),rs(new i.Q(_e,be))],Fe=rs(I.center),He=Number.POSITIVE_INFINITY;for(let Be of Le)P<0&&(He=tc.getLesserNonNegativeNonNull(He,tc.solveVectorScale(Be,Fe,ke,"x",P))),L>0&&(He=tc.getLesserNonNegativeNonNull(He,tc.solveVectorScale(Be,Fe,ke,"x",L))),z>0&&(He=tc.getLesserNonNegativeNonNull(He,tc.solveVectorScale(Be,Fe,ke,"y",z))),U<0&&(He=tc.getLesserNonNegativeNonNull(He,tc.solveVectorScale(Be,Fe,ke,"y",U)));if(Number.isFinite(He)&&He!==0)return I.zoom=Ae.zoom+i.ah(He),I;bs()}handleJumpToCenterZoom(s,c){let g=s.center.lat,y=s.getConstrained(c.center?i.Q.convert(c.center):s.center,s.zoom).center;s.setCenter(y.wrap());let E=c.zoom!==void 0?+c.zoom:s.zoom+ns(g,y.lat);s.zoom!==E&&s.setZoom(E)}handleEaseTo(s,c){let g=s.zoom,y=s.center,E=s.padding,I={roll:s.roll,pitch:s.pitch,bearing:s.bearing},P={roll:c.roll===void 0?s.roll:c.roll,pitch:c.pitch===void 0?s.pitch:c.pitch,bearing:c.bearing===void 0?s.bearing:c.bearing},L=c.zoom!==void 0,z=!s.isPaddingEqual(c.padding),U=!1,W=c.center?i.Q.convert(c.center):y,H=s.getConstrained(W,g).center;ul(s,H);let te=s.clone();te.setCenter(H),te.setZoom(L?+c.zoom:g+ns(y.lat,W.lat)),te.setBearing(c.bearing);let ae=new i.P(i.ae(s.centerPoint.x+c.offsetAsPoint.x,0,s.width),i.ae(s.centerPoint.y+c.offsetAsPoint.y,0,s.height));te.setLocationAtPoint(H,ae);let be=(c.offset&&c.offsetAsPoint.mag())>0?te.center:H,_e=L?+c.zoom:g+ns(y.lat,be.lat),xe=g+ns(y.lat,0),Ae=_e+ns(be.lat,0),ke=i.bq(y.lng,be.lng),Le=i.bq(y.lat,be.lat),Fe=i.ac(Ae-xe);return U=_e!==g,{easeFunc:He=>{if(i.b6(I,P)||wu({startEulerAngles:I,endEulerAngles:P,tr:s,k:He,useSlerp:I.roll!=P.roll}),z&&s.interpolatePadding(E,c.padding,He),c.around)i.w("Easing around a point is not supported under globe projection."),s.setLocationAtPoint(c.around,c.aroundPoint);else{let Be=Ae>xe?Math.min(2,Fe):Math.max(.5,Fe),rt=Math.pow(Be,1-He),ht=nN(y,ke,Le,He*rt);s.setCenter(ht.wrap())}if(U){let Be=i.B.number(xe,Ae,He)+ns(0,s.center.lat);s.setZoom(Be)}},isZooming:U,elevationCenter:be}}handleFlyTo(s,c){let g=c.zoom!==void 0,y=s.center,E=s.zoom,I=s.padding,P=!s.isPaddingEqual(c.padding),L=s.getConstrained(i.Q.convert(c.center||c.locationAtOffset),E).center,z=g?+c.zoom:s.zoom+ns(s.center.lat,L.lat),U=s.clone();U.setCenter(L),U.setZoom(z),U.setBearing(c.bearing);let W=new i.P(i.ae(s.centerPoint.x+c.offsetAsPoint.x,0,s.width),i.ae(s.centerPoint.y+c.offsetAsPoint.y,0,s.height));U.setLocationAtPoint(L,W);let H=U.center;ul(s,H);let te=function(Le,Fe,He){let Be=rs(Fe),rt=rs(He),ht=i.aV(Be,rt),lt=Math.acos(ht),ut=W0(Le);return lt/(2*Math.PI)*ut}(s,y,H),ae=E+ns(y.lat,0),be=z+ns(H.lat,0),_e=i.ac(be-ae),xe;if(typeof c.minZoom=="number"){let Le=+c.minZoom+ns(H.lat,0),Fe=Math.min(Le,ae,be)+ns(0,H.lat),He=s.getConstrained(H,Fe).zoom+ns(H.lat,0);xe=i.ac(He-ae)}let Ae=i.bq(y.lng,H.lng),ke=i.bq(y.lat,H.lat);return{easeFunc:(Le,Fe,He,Be)=>{let rt=nN(y,Ae,ke,He);P&&s.interpolatePadding(I,c.padding,Le);let ht=Le===1?H:rt;s.setCenter(ht.wrap());let lt=ae+i.ah(Fe);s.setZoom(Le===1?z:lt+ns(0,ht.lat))},scaleOfZoom:_e,targetCenter:H,scaleOfMinZoom:xe,pixelPathLength:te}}static solveVectorScale(s,c,g,y,E){let I=y==="x"?[g[0],g[4],g[8],g[12]]:[g[1],g[5],g[9],g[13]],P=[g[3],g[7],g[11],g[15]],L=s[0]*I[0]+s[1]*I[1]+s[2]*I[2],z=s[0]*P[0]+s[1]*P[1]+s[2]*P[2],U=c[0]*I[0]+c[1]*I[1]+c[2]*I[2],W=c[0]*P[0]+c[1]*P[1]+c[2]*P[2];return U+E*z===L+E*W||P[3]*(L-U)+I[3]*(W-z)+L*W==U*z?null:(U+I[3]-E*W-E*P[3])/(U-L-E*W+E*z)}static getLesserNonNegativeNonNull(s,c){return c!==null&&c>=0&&c<s?c:s}}class Mm{constructor(s){this._globe=s,this._mercatorCameraHelper=new V0,this._verticalPerspectiveCameraHelper=new tc}get useGlobeControls(){return this._globe.useGlobeRendering}get currentHelper(){return this.useGlobeControls?this._verticalPerspectiveCameraHelper:this._mercatorCameraHelper}handlePanInertia(s,c){return this.currentHelper.handlePanInertia(s,c)}handleMapControlsRollPitchBearingZoom(s,c){return this.currentHelper.handleMapControlsRollPitchBearingZoom(s,c)}handleMapControlsPan(s,c,g){this.currentHelper.handleMapControlsPan(s,c,g)}cameraForBoxAndBearing(s,c,g,y,E){return this.currentHelper.cameraForBoxAndBearing(s,c,g,y,E)}handleJumpToCenterZoom(s,c){this.currentHelper.handleJumpToCenterZoom(s,c)}handleEaseTo(s,c){return this.currentHelper.handleEaseTo(s,c)}handleFlyTo(s,c){return this.currentHelper.handleFlyTo(s,c)}}let Wb=(w,s)=>i.x(w,s&&s.filter(c=>c.identifier!=="source.canvas")),fU=i.bw();class dT extends i.E{constructor(s,c={}){super(),this._rtlPluginLoaded=()=>{for(let g in this.sourceCaches){let y=this.sourceCaches[g].getSource().type;y!=="vector"&&y!=="geojson"||this.sourceCaches[g].reload()}},this.map=s,this.dispatcher=new We(_t(),s._getMapId()),this.dispatcher.registerMessageHandler("GG",(g,y)=>this.getGlyphs(g,y)),this.dispatcher.registerMessageHandler("GI",(g,y)=>this.getImages(g,y)),this.imageManager=new me,this.imageManager.setEventedParent(this),this.glyphManager=new Se(s._requestManager,c.localIdeographFontFamily),this.lineAtlas=new Xe(256,512),this.crossTileSymbolIndex=new Bn,this._spritesImagesIds={},this._layers={},this._order=[],this.sourceCaches={},this.zoomHistory=new i.bx,this._loaded=!1,this._availableImages=[],this._resetUpdates(),this.dispatcher.broadcast("SR",i.by()),Bt().on(Ze,this._rtlPluginLoaded),this.on("data",g=>{if(g.dataType!=="source"||g.sourceDataType!=="metadata")return;let y=this.sourceCaches[g.sourceId];if(!y)return;let E=y.getSource();if(E&&E.vectorLayerIds)for(let I in this._layers){let P=this._layers[I];P.source===E.id&&this._validateLayer(P)}})}loadURL(s,c={},g){this.fire(new i.l("dataloading",{dataType:"style"})),c.validate=typeof c.validate!="boolean"||c.validate;let y=this.map._requestManager.transformRequest(s,"Style");this._loadStyleRequest=new AbortController;let E=this._loadStyleRequest;i.j(y,this._loadStyleRequest).then(I=>{this._loadStyleRequest=null,this._load(I.data,c,g)}).catch(I=>{this._loadStyleRequest=null,I&&!E.signal.aborted&&this.fire(new i.k(I))})}loadJSON(s,c={},g){this.fire(new i.l("dataloading",{dataType:"style"})),this._frameRequest=new AbortController,v.frameAsync(this._frameRequest).then(()=>{this._frameRequest=null,c.validate=c.validate!==!1,this._load(s,c,g)}).catch(()=>{})}loadEmpty(){this.fire(new i.l("dataloading",{dataType:"style"})),this._load(fU,{validate:!1})}_load(s,c,g){var y,E;let I=c.transformStyle?c.transformStyle(g,s):s;if(!c.validate||!Wb(this,i.y(I))){this._loaded=!0,this.stylesheet=I;for(let P in I.sources)this.addSource(P,I.sources[P],{validate:!1});I.sprite?this._loadSprite(I.sprite):this.imageManager.setLoaded(!0),this.glyphManager.setURL(I.glyphs),this._createLayers(),this.light=new Je(this.stylesheet.light),this._setProjectionInternal(((y=this.stylesheet.projection)===null||y===void 0?void 0:y.type)||"mercator"),this.sky=new Et(this.stylesheet.sky),this.map.setTerrain((E=this.stylesheet.terrain)!==null&&E!==void 0?E:null),this.fire(new i.l("data",{dataType:"style"})),this.fire(new i.l("style.load"))}}_createLayers(){let s=i.bz(this.stylesheet.layers);this.dispatcher.broadcast("SL",s),this._order=s.map(c=>c.id),this._layers={},this._serializedLayers=null;for(let c of s){let g=i.bA(c);g.setEventedParent(this,{layer:{id:c.id}}),this._layers[c.id]=g}}_loadSprite(s,c=!1,g=void 0){let y;this.imageManager.setLoaded(!1),this._spriteRequest=new AbortController,function(E,I,P,L){return i._(this,void 0,void 0,function*(){let z=G(E),U=P>1?"@2x":"",W={},H={};for(let{id:te,url:ae}of z){let be=I.transformRequest(re(ae,U,".json"),"SpriteJSON");W[te]=i.j(be,L);let _e=I.transformRequest(re(ae,U,".png"),"SpriteImage");H[te]=q.getImage(_e,L)}return yield Promise.all([...Object.values(W),...Object.values(H)]),function(te,ae){return i._(this,void 0,void 0,function*(){let be={};for(let _e in te){be[_e]={};let xe=v.getImageCanvasContext((yield ae[_e]).data),Ae=(yield te[_e]).data;for(let ke in Ae){let{width:Le,height:Fe,x:He,y:Be,sdf:rt,pixelRatio:ht,stretchX:lt,stretchY:ut,content:ft,textFitWidth:Yt,textFitHeight:Ht}=Ae[ke];be[_e][ke]={data:null,pixelRatio:ht,sdf:rt,stretchX:lt,stretchY:ut,content:ft,textFitWidth:Yt,textFitHeight:Ht,spriteData:{width:Le,height:Fe,x:He,y:Be,context:xe}}}}return be})}(W,H)})}(s,this.map._requestManager,this.map.getPixelRatio(),this._spriteRequest).then(E=>{if(this._spriteRequest=null,E)for(let I in E){this._spritesImagesIds[I]=[];let P=this._spritesImagesIds[I]?this._spritesImagesIds[I].filter(L=>!(L in E)):[];for(let L of P)this.imageManager.removeImage(L),this._changedImages[L]=!0;for(let L in E[I]){let z=I==="default"?L:`${I}:${L}`;this._spritesImagesIds[I].push(z),z in this.imageManager.images?this.imageManager.updateImage(z,E[I][L],!1):this.imageManager.addImage(z,E[I][L]),c&&(this._changedImages[z]=!0)}}}).catch(E=>{this._spriteRequest=null,y=E,this.fire(new i.k(y))}).finally(()=>{this.imageManager.setLoaded(!0),this._availableImages=this.imageManager.listImages(),c&&(this._changed=!0),this.dispatcher.broadcast("SI",this._availableImages),this.fire(new i.l("data",{dataType:"style"})),g&&g(y)})}_unloadSprite(){for(let s of Object.values(this._spritesImagesIds).flat())this.imageManager.removeImage(s),this._changedImages[s]=!0;this._spritesImagesIds={},this._availableImages=this.imageManager.listImages(),this._changed=!0,this.dispatcher.broadcast("SI",this._availableImages),this.fire(new i.l("data",{dataType:"style"}))}_validateLayer(s){let c=this.sourceCaches[s.source];if(!c)return;let g=s.sourceLayer;if(!g)return;let y=c.getSource();(y.type==="geojson"||y.vectorLayerIds&&y.vectorLayerIds.indexOf(g)===-1)&&this.fire(new i.k(new Error(`Source layer "${g}" does not exist on source "${y.id}" as specified by style layer "${s.id}".`)))}loaded(){if(!this._loaded||Object.keys(this._updatedSources).length)return!1;for(let s in this.sourceCaches)if(!this.sourceCaches[s].loaded())return!1;return!!this.imageManager.isLoaded()}_serializeByIds(s,c=!1){let g=this._serializedAllLayers();if(!s||s.length===0)return Object.values(c?i.bB(g):g);let y=[];for(let E of s)if(g[E]){let I=c?i.bB(g[E]):g[E];y.push(I)}return y}_serializedAllLayers(){let s=this._serializedLayers;if(s)return s;s=this._serializedLayers={};let c=Object.keys(this._layers);for(let g of c){let y=this._layers[g];y.type!=="custom"&&(s[g]=y.serialize())}return s}hasTransitions(){var s,c,g;if(!((s=this.light)===null||s===void 0)&&s.hasTransition()||!((c=this.sky)===null||c===void 0)&&c.hasTransition()||!((g=this.projection)===null||g===void 0)&&g.hasTransition())return!0;for(let y in this.sourceCaches)if(this.sourceCaches[y].hasTransition())return!0;for(let y in this._layers)if(this._layers[y].hasTransition())return!0;return!1}_checkLoaded(){if(!this._loaded)throw new Error("Style is not done loading.")}update(s){if(!this._loaded)return;let c=this._changed;if(c){let y=Object.keys(this._updatedLayers),E=Object.keys(this._removedLayers);(y.length||E.length)&&this._updateWorkerLayers(y,E);for(let I in this._updatedSources){let P=this._updatedSources[I];if(P==="reload")this._reloadSource(I);else{if(P!=="clear")throw new Error(`Invalid action ${P}`);this._clearSource(I)}}this._updateTilesForChangedImages(),this._updateTilesForChangedGlyphs();for(let I in this._updatedPaintProps)this._layers[I].updateTransitions(s);this.light.updateTransitions(s),this.sky.updateTransitions(s),this._resetUpdates()}let g={};for(let y in this.sourceCaches){let E=this.sourceCaches[y];g[y]=E.used,E.used=!1}for(let y of this._order){let E=this._layers[y];E.recalculate(s,this._availableImages),!E.isHidden(s.zoom)&&E.source&&(this.sourceCaches[E.source].used=!0)}for(let y in g){let E=this.sourceCaches[y];!!g[y]!=!!E.used&&E.fire(new i.l("data",{sourceDataType:"visibility",dataType:"source",sourceId:y}))}this.light.recalculate(s),this.sky.recalculate(s),this.projection.recalculate(s),this.z=s.zoom,c&&this.fire(new i.l("data",{dataType:"style"}))}_updateTilesForChangedImages(){let s=Object.keys(this._changedImages);if(s.length){for(let c in this.sourceCaches)this.sourceCaches[c].reloadTilesForDependencies(["icons","patterns"],s);this._changedImages={}}}_updateTilesForChangedGlyphs(){if(this._glyphsDidChange){for(let s in this.sourceCaches)this.sourceCaches[s].reloadTilesForDependencies(["glyphs"],[""]);this._glyphsDidChange=!1}}_updateWorkerLayers(s,c){this.dispatcher.broadcast("UL",{layers:this._serializeByIds(s,!1),removedIds:c})}_resetUpdates(){this._changed=!1,this._updatedLayers={},this._removedLayers={},this._updatedSources={},this._updatedPaintProps={},this._changedImages={},this._glyphsDidChange=!1}setState(s,c={}){var g;this._checkLoaded();let y=this.serialize();if(s=c.transformStyle?c.transformStyle(y,s):s,((g=c.validate)===null||g===void 0||g)&&Wb(this,i.y(s)))return!1;(s=i.bB(s)).layers=i.bz(s.layers);let E=i.bC(y,s),I=this._getOperationsToPerform(E);if(I.unimplemented.length>0)throw new Error(`Unimplemented: ${I.unimplemented.join(", ")}.`);if(I.operations.length===0)return!1;for(let P of I.operations)P();return this.stylesheet=s,this._serializedLayers=null,!0}_getOperationsToPerform(s){let c=[],g=[];for(let y of s)switch(y.command){case"setCenter":case"setZoom":case"setBearing":case"setPitch":case"setRoll":continue;case"addLayer":c.push(()=>this.addLayer.apply(this,y.args));break;case"removeLayer":c.push(()=>this.removeLayer.apply(this,y.args));break;case"setPaintProperty":c.push(()=>this.setPaintProperty.apply(this,y.args));break;case"setLayoutProperty":c.push(()=>this.setLayoutProperty.apply(this,y.args));break;case"setFilter":c.push(()=>this.setFilter.apply(this,y.args));break;case"addSource":c.push(()=>this.addSource.apply(this,y.args));break;case"removeSource":c.push(()=>this.removeSource.apply(this,y.args));break;case"setLayerZoomRange":c.push(()=>this.setLayerZoomRange.apply(this,y.args));break;case"setLight":c.push(()=>this.setLight.apply(this,y.args));break;case"setGeoJSONSourceData":c.push(()=>this.setGeoJSONSourceData.apply(this,y.args));break;case"setGlyphs":c.push(()=>this.setGlyphs.apply(this,y.args));break;case"setSprite":c.push(()=>this.setSprite.apply(this,y.args));break;case"setTerrain":c.push(()=>this.map.setTerrain.apply(this,y.args));break;case"setSky":c.push(()=>this.setSky.apply(this,y.args));break;case"setProjection":this.setProjection.apply(this,y.args);break;case"setTransition":c.push(()=>{});break;default:g.push(y.command)}return{operations:c,unimplemented:g}}addImage(s,c){if(this.getImage(s))return this.fire(new i.k(new Error(`An image named "${s}" already exists.`)));this.imageManager.addImage(s,c),this._afterImageUpdated(s)}updateImage(s,c){this.imageManager.updateImage(s,c)}getImage(s){return this.imageManager.getImage(s)}removeImage(s){if(!this.getImage(s))return this.fire(new i.k(new Error(`An image named "${s}" does not exist.`)));this.imageManager.removeImage(s),this._afterImageUpdated(s)}_afterImageUpdated(s){this._availableImages=this.imageManager.listImages(),this._changedImages[s]=!0,this._changed=!0,this.dispatcher.broadcast("SI",this._availableImages),this.fire(new i.l("data",{dataType:"style"}))}listImages(){return this._checkLoaded(),this.imageManager.listImages()}addSource(s,c,g={}){if(this._checkLoaded(),this.sourceCaches[s]!==void 0)throw new Error(`Source "${s}" already exists.`);if(!c.type)throw new Error(`The type property must be defined, but only the following properties were given: ${Object.keys(c).join(", ")}.`);if(["vector","raster","geojson","video","image"].indexOf(c.type)>=0&&this._validate(i.y.source,`sources.${s}`,c,null,g))return;this.map&&this.map._collectResourceTiming&&(c.collectResourceTiming=!0);let y=this.sourceCaches[s]=new oe(s,c,this.dispatcher);y.style=this,y.setEventedParent(this,()=>({isSourceLoaded:y.loaded(),source:y.serialize(),sourceId:s})),y.onAdd(this.map),this._changed=!0}removeSource(s){if(this._checkLoaded(),this.sourceCaches[s]===void 0)throw new Error("There is no source with this ID");for(let g in this._layers)if(this._layers[g].source===s)return this.fire(new i.k(new Error(`Source "${s}" cannot be removed while layer "${g}" is using it.`)));let c=this.sourceCaches[s];delete this.sourceCaches[s],delete this._updatedSources[s],c.fire(new i.l("data",{sourceDataType:"metadata",dataType:"source",sourceId:s})),c.setEventedParent(null),c.onRemove(this.map),this._changed=!0}setGeoJSONSourceData(s,c){if(this._checkLoaded(),this.sourceCaches[s]===void 0)throw new Error(`There is no source with this ID=${s}`);let g=this.sourceCaches[s].getSource();if(g.type!=="geojson")throw new Error(`geojsonSource.type is ${g.type}, which is !== 'geojson`);g.setData(c),this._changed=!0}getSource(s){return this.sourceCaches[s]&&this.sourceCaches[s].getSource()}addLayer(s,c,g={}){this._checkLoaded();let y=s.id;if(this.getLayer(y))return void this.fire(new i.k(new Error(`Layer "${y}" already exists on this map.`)));let E;if(s.type==="custom"){if(Wb(this,i.bD(s)))return;E=i.bA(s)}else{if("source"in s&&typeof s.source=="object"&&(this.addSource(y,s.source),s=i.bB(s),s=i.e(s,{source:y})),this._validate(i.y.layer,`layers.${y}`,s,{arrayIndex:-1},g))return;E=i.bA(s),this._validateLayer(E),E.setEventedParent(this,{layer:{id:y}})}let I=c?this._order.indexOf(c):this._order.length;if(c&&I===-1)this.fire(new i.k(new Error(`Cannot add layer "${y}" before non-existing layer "${c}".`)));else{if(this._order.splice(I,0,y),this._layerOrderChanged=!0,this._layers[y]=E,this._removedLayers[y]&&E.source&&E.type!=="custom"){let P=this._removedLayers[y];delete this._removedLayers[y],P.type!==E.type?this._updatedSources[E.source]="clear":(this._updatedSources[E.source]="reload",this.sourceCaches[E.source].pause())}this._updateLayer(E),E.onAdd&&E.onAdd(this.map)}}moveLayer(s,c){if(this._checkLoaded(),this._changed=!0,!this._layers[s])return void this.fire(new i.k(new Error(`The layer '${s}' does not exist in the map's style and cannot be moved.`)));if(s===c)return;let g=this._order.indexOf(s);this._order.splice(g,1);let y=c?this._order.indexOf(c):this._order.length;c&&y===-1?this.fire(new i.k(new Error(`Cannot move layer "${s}" before non-existing layer "${c}".`))):(this._order.splice(y,0,s),this._layerOrderChanged=!0)}removeLayer(s){this._checkLoaded();let c=this._layers[s];if(!c)return void this.fire(new i.k(new Error(`Cannot remove non-existing layer "${s}".`)));c.setEventedParent(null);let g=this._order.indexOf(s);this._order.splice(g,1),this._layerOrderChanged=!0,this._changed=!0,this._removedLayers[s]=c,delete this._layers[s],this._serializedLayers&&delete this._serializedLayers[s],delete this._updatedLayers[s],delete this._updatedPaintProps[s],c.onRemove&&c.onRemove(this.map)}getLayer(s){return this._layers[s]}getLayersOrder(){return[...this._order]}hasLayer(s){return s in this._layers}setLayerZoomRange(s,c,g){this._checkLoaded();let y=this.getLayer(s);y?y.minzoom===c&&y.maxzoom===g||(c!=null&&(y.minzoom=c),g!=null&&(y.maxzoom=g),this._updateLayer(y)):this.fire(new i.k(new Error(`Cannot set the zoom range of non-existing layer "${s}".`)))}setFilter(s,c,g={}){this._checkLoaded();let y=this.getLayer(s);if(y){if(!i.bE(y.filter,c))return c==null?(y.filter=void 0,void this._updateLayer(y)):void(this._validate(i.y.filter,`layers.${y.id}.filter`,c,null,g)||(y.filter=i.bB(c),this._updateLayer(y)))}else this.fire(new i.k(new Error(`Cannot filter non-existing layer "${s}".`)))}getFilter(s){return i.bB(this.getLayer(s).filter)}setLayoutProperty(s,c,g,y={}){this._checkLoaded();let E=this.getLayer(s);E?i.bE(E.getLayoutProperty(c),g)||(E.setLayoutProperty(c,g,y),this._updateLayer(E)):this.fire(new i.k(new Error(`Cannot style non-existing layer "${s}".`)))}getLayoutProperty(s,c){let g=this.getLayer(s);if(g)return g.getLayoutProperty(c);this.fire(new i.k(new Error(`Cannot get style of non-existing layer "${s}".`)))}setPaintProperty(s,c,g,y={}){this._checkLoaded();let E=this.getLayer(s);E?i.bE(E.getPaintProperty(c),g)||(E.setPaintProperty(c,g,y)&&this._updateLayer(E),this._changed=!0,this._updatedPaintProps[s]=!0,this._serializedLayers=null):this.fire(new i.k(new Error(`Cannot style non-existing layer "${s}".`)))}getPaintProperty(s,c){return this.getLayer(s).getPaintProperty(c)}setFeatureState(s,c){this._checkLoaded();let g=s.source,y=s.sourceLayer,E=this.sourceCaches[g];if(E===void 0)return void this.fire(new i.k(new Error(`The source '${g}' does not exist in the map's style.`)));let I=E.getSource().type;I==="geojson"&&y?this.fire(new i.k(new Error("GeoJSON sources cannot have a sourceLayer parameter."))):I!=="vector"||y?(s.id===void 0&&this.fire(new i.k(new Error("The feature id parameter must be provided."))),E.setFeatureState(y,s.id,c)):this.fire(new i.k(new Error("The sourceLayer parameter must be provided for vector source types.")))}removeFeatureState(s,c){this._checkLoaded();let g=s.source,y=this.sourceCaches[g];if(y===void 0)return void this.fire(new i.k(new Error(`The source '${g}' does not exist in the map's style.`)));let E=y.getSource().type,I=E==="vector"?s.sourceLayer:void 0;E!=="vector"||I?c&&typeof s.id!="string"&&typeof s.id!="number"?this.fire(new i.k(new Error("A feature id is required to remove its specific state property."))):y.removeFeatureState(I,s.id,c):this.fire(new i.k(new Error("The sourceLayer parameter must be provided for vector source types.")))}getFeatureState(s){this._checkLoaded();let c=s.source,g=s.sourceLayer,y=this.sourceCaches[c];if(y!==void 0)return y.getSource().type!=="vector"||g?(s.id===void 0&&this.fire(new i.k(new Error("The feature id parameter must be provided."))),y.getFeatureState(g,s.id)):void this.fire(new i.k(new Error("The sourceLayer parameter must be provided for vector source types.")));this.fire(new i.k(new Error(`The source '${c}' does not exist in the map's style.`)))}getTransition(){return i.e({duration:300,delay:0},this.stylesheet&&this.stylesheet.transition)}serialize(){if(!this._loaded)return;let s=i.bF(this.sourceCaches,E=>E.serialize()),c=this._serializeByIds(this._order,!0),g=this.map.getTerrain()||void 0,y=this.stylesheet;return i.bG({version:y.version,name:y.name,metadata:y.metadata,light:y.light,sky:y.sky,center:y.center,zoom:y.zoom,bearing:y.bearing,pitch:y.pitch,sprite:y.sprite,glyphs:y.glyphs,transition:y.transition,projection:y.projection,sources:s,layers:c,terrain:g},E=>E!==void 0)}_updateLayer(s){this._updatedLayers[s.id]=!0,s.source&&!this._updatedSources[s.source]&&this.sourceCaches[s.source].getSource().type!=="raster"&&(this._updatedSources[s.source]="reload",this.sourceCaches[s.source].pause()),this._serializedLayers=null,this._changed=!0}_flattenAndSortRenderedFeatures(s){let c=I=>this._layers[I].type==="fill-extrusion",g={},y=[];for(let I=this._order.length-1;I>=0;I--){let P=this._order[I];if(c(P)){g[P]=I;for(let L of s){let z=L[P];if(z)for(let U of z)y.push(U)}}}y.sort((I,P)=>P.intersectionZ-I.intersectionZ);let E=[];for(let I=this._order.length-1;I>=0;I--){let P=this._order[I];if(c(P))for(let L=y.length-1;L>=0;L--){let z=y[L].feature;if(g[z.layer.id]<I)break;E.push(z),y.pop()}else for(let L of s){let z=L[P];if(z)for(let U of z)E.push(U.feature)}}return E}queryRenderedFeatures(s,c,g){c&&c.filter&&this._validate(i.y.filter,"queryRenderedFeatures.filter",c.filter,null,c);let y={};if(c&&c.layers){if(!(Array.isArray(c.layers)||c.layers instanceof Set))return this.fire(new i.k(new Error("parameters.layers must be an Array or a Set of strings"))),[];for(let z of c.layers){let U=this._layers[z];if(!U)return this.fire(new i.k(new Error(`The layer '${z}' does not exist in the map's style and cannot be queried for features.`))),[];y[U.source]=!0}}let E=[];c.availableImages=this._availableImages;let I=this._serializedAllLayers(),P=c.layers instanceof Set?c.layers:Array.isArray(c.layers)?new Set(c.layers):null,L=Object.assign(Object.assign({},c),{layers:P});for(let z in this.sourceCaches)c.layers&&!y[z]||E.push(Ge(this.sourceCaches[z],this._layers,I,s,L,g,this.map.terrain?(U,W,H)=>this.map.terrain.getElevation(U,W,H):void 0));return this.placement&&E.push(function(z,U,W,H,te,ae,be){let _e={},xe=ae.queryRenderedSymbols(H),Ae=[];for(let ke of Object.keys(xe).map(Number))Ae.push(be[ke]);Ae.sort(st);for(let ke of Ae){let Le=ke.featureIndex.lookupSymbolFeatures(xe[ke.bucketInstanceId],U,ke.bucketIndex,ke.sourceLayerIndex,te.filter,te.layers,te.availableImages,z);for(let Fe in Le){let He=_e[Fe]=_e[Fe]||[],Be=Le[Fe];Be.sort((rt,ht)=>{let lt=ke.featureSortOrder;if(lt){let ut=lt.indexOf(rt.featureIndex);return lt.indexOf(ht.featureIndex)-ut}return ht.featureIndex-rt.featureIndex});for(let rt of Be)He.push(rt)}}return function(ke,Le,Fe){for(let He in ke)for(let Be of ke[He])pt(Be,Fe[Le[He].source]);return ke}(_e,z,W)}(this._layers,I,this.sourceCaches,s,L,this.placement.collisionIndex,this.placement.retainedQueryData)),this._flattenAndSortRenderedFeatures(E)}querySourceFeatures(s,c){c&&c.filter&&this._validate(i.y.filter,"querySourceFeatures.filter",c.filter,null,c);let g=this.sourceCaches[s];return g?function(y,E){let I=y.getRenderableIds().map(z=>y.getTileByID(z)),P=[],L={};for(let z=0;z<I.length;z++){let U=I[z],W=U.tileID.canonical.key;L[W]||(L[W]=!0,U.querySourceFeatures(P,E))}return P}(g,c):[]}getLight(){return this.light.getLight()}setLight(s,c={}){this._checkLoaded();let g=this.light.getLight(),y=!1;for(let I in s)if(!i.bE(s[I],g[I])){y=!0;break}if(!y)return;let E={now:v.now(),transition:i.e({duration:300,delay:0},this.stylesheet.transition)};this.light.setLight(s,c),this.light.updateTransitions(E)}getProjection(){var s;return(s=this.stylesheet)===null||s===void 0?void 0:s.projection}setProjection(s){if(this._checkLoaded(),this.projection){if(this.projection.name===s.type)return;this.projection.destroy(),delete this.projection}this.stylesheet.projection=s,this._setProjectionInternal(s.type)}getSky(){var s;return(s=this.stylesheet)===null||s===void 0?void 0:s.sky}setSky(s,c={}){this._checkLoaded();let g=this.getSky(),y=!1;if(!s&&!g)return;if(s&&!g)y=!0;else if(!s&&g)y=!0;else for(let I in s)if(!i.bE(s[I],g[I])){y=!0;break}if(!y)return;let E={now:v.now(),transition:i.e({duration:300,delay:0},this.stylesheet.transition)};this.stylesheet.sky=s,this.sky.setSky(s,c),this.sky.updateTransitions(E)}_setProjectionInternal(s){let c=function(g){if(Array.isArray(g)){let y=new Vb({type:g});return{projection:y,transform:new Y0,cameraHelper:new Mm(y)}}switch(g){case"mercator":return{projection:new xu,transform:new jf,cameraHelper:new V0};case"globe":{let y=new Vb({type:["interpolate",["linear"],["zoom"],11,"vertical-perspective",12,"mercator"]});return{projection:y,transform:new Y0,cameraHelper:new Mm(y)}}case"vertical-perspective":return{projection:new H0,transform:new Im,cameraHelper:new tc};default:return i.w(`Unknown projection name: ${g}. Falling back to mercator projection.`),{projection:new xu,transform:new jf,cameraHelper:new V0}}}(s);this.projection=c.projection,this.map.migrateProjection(c.transform,c.cameraHelper);for(let g in this.sourceCaches)this.sourceCaches[g].reload()}_validate(s,c,g,y,E={}){return(!E||E.validate!==!1)&&Wb(this,s.call(i.y,i.e({key:c,style:this.serialize(),value:g,styleSpec:i.v},y)))}_remove(s=!0){this._frameRequest&&(this._frameRequest.abort(),this._frameRequest=null),this._loadStyleRequest&&(this._loadStyleRequest.abort(),this._loadStyleRequest=null),this._spriteRequest&&(this._spriteRequest.abort(),this._spriteRequest=null),Bt().off(Ze,this._rtlPluginLoaded);for(let c in this._layers)this._layers[c].setEventedParent(null);for(let c in this.sourceCaches){let g=this.sourceCaches[c];g.setEventedParent(null),g.onRemove(this.map)}this.imageManager.setEventedParent(null),this.setEventedParent(null),s&&this.dispatcher.broadcast("RM",void 0),this.dispatcher.remove(s)}_clearSource(s){this.sourceCaches[s].clearTiles()}_reloadSource(s){this.sourceCaches[s].resume(),this.sourceCaches[s].reload()}_updateSources(s){for(let c in this.sourceCaches)this.sourceCaches[c].update(s,this.map.terrain)}_generateCollisionBoxes(){for(let s in this.sourceCaches)this._reloadSource(s)}_updatePlacement(s,c,g,y,E=!1){let I=!1,P=!1,L={};for(let z of this._order){let U=this._layers[z];if(U.type!=="symbol")continue;if(!L[U.source]){let H=this.sourceCaches[U.source];L[U.source]=H.getRenderableIds(!0).map(te=>H.getTileByID(te)).sort((te,ae)=>ae.tileID.overscaledZ-te.tileID.overscaledZ||(te.tileID.isLessThan(ae.tileID)?-1:1))}let W=this.crossTileSymbolIndex.addLayer(U,L[U.source],s.center.lng);I=I||W}if(this.crossTileSymbolIndex.pruneUnusedLayers(this._order),((E=E||this._layerOrderChanged||g===0)||!this.pauseablePlacement||this.pauseablePlacement.isDone()&&!this.placement.stillRecent(v.now(),s.zoom))&&(this.pauseablePlacement=new zn(s,this.map.terrain,this._order,E,c,g,y,this.placement),this._layerOrderChanged=!1),this.pauseablePlacement.isDone()?this.placement.setStale():(this.pauseablePlacement.continuePlacement(this._order,this._layers,L),this.pauseablePlacement.isDone()&&(this.placement=this.pauseablePlacement.commit(v.now()),P=!0),I&&this.pauseablePlacement.placement.setStale()),P||I)for(let z of this._order){let U=this._layers[z];U.type==="symbol"&&this.placement.updateLayerOpacities(U,L[U.source])}return!this.pauseablePlacement.isDone()||this.placement.hasTransitions(v.now())}_releaseSymbolFadeTiles(){for(let s in this.sourceCaches)this.sourceCaches[s].releaseSymbolFadeTiles()}getImages(s,c){return i._(this,void 0,void 0,function*(){let g=yield this.imageManager.getImages(c.icons);this._updateTilesForChangedImages();let y=this.sourceCaches[c.source];return y&&y.setDependencies(c.tileID.key,c.type,c.icons),g})}getGlyphs(s,c){return i._(this,void 0,void 0,function*(){let g=yield this.glyphManager.getGlyphs(c.stacks),y=this.sourceCaches[c.source];return y&&y.setDependencies(c.tileID.key,c.type,[""]),g})}getGlyphsUrl(){return this.stylesheet.glyphs||null}setGlyphs(s,c={}){this._checkLoaded(),s&&this._validate(i.y.glyphs,"glyphs",s,null,c)||(this._glyphsDidChange=!0,this.stylesheet.glyphs=s,this.glyphManager.entries={},this.glyphManager.setURL(s))}addSprite(s,c,g={},y){this._checkLoaded();let E=[{id:s,url:c}],I=[...G(this.stylesheet.sprite),...E];this._validate(i.y.sprite,"sprite",I,null,g)||(this.stylesheet.sprite=I,this._loadSprite(E,!0,y))}removeSprite(s){this._checkLoaded();let c=G(this.stylesheet.sprite);if(c.find(g=>g.id===s)){if(this._spritesImagesIds[s])for(let g of this._spritesImagesIds[s])this.imageManager.removeImage(g),this._changedImages[g]=!0;c.splice(c.findIndex(g=>g.id===s),1),this.stylesheet.sprite=c.length>0?c:void 0,delete this._spritesImagesIds[s],this._availableImages=this.imageManager.listImages(),this._changed=!0,this.dispatcher.broadcast("SI",this._availableImages),this.fire(new i.l("data",{dataType:"style"}))}else this.fire(new i.k(new Error(`Sprite "${s}" doesn't exists on this map.`)))}getSprite(){return G(this.stylesheet.sprite)}setSprite(s,c={},g){this._checkLoaded(),s&&this._validate(i.y.sprite,"sprite",s,null,c)||(this.stylesheet.sprite=s,s?this._loadSprite(s,!0,g):(this._unloadSprite(),g&&g(null)))}}var dU=i.aG([{name:"a_pos",type:"Int16",components:2},{name:"a_texture_pos",type:"Int16",components:2}]);class hU{constructor(){this.boundProgram=null,this.boundLayoutVertexBuffer=null,this.boundPaintVertexBuffers=[],this.boundIndexBuffer=null,this.boundVertexOffset=null,this.boundDynamicVertexBuffer=null,this.vao=null}bind(s,c,g,y,E,I,P,L,z){this.context=s;let U=this.boundPaintVertexBuffers.length!==y.length;for(let W=0;!U&&W<y.length;W++)this.boundPaintVertexBuffers[W]!==y[W]&&(U=!0);!this.vao||this.boundProgram!==c||this.boundLayoutVertexBuffer!==g||U||this.boundIndexBuffer!==E||this.boundVertexOffset!==I||this.boundDynamicVertexBuffer!==P||this.boundDynamicVertexBuffer2!==L||this.boundDynamicVertexBuffer3!==z?this.freshBind(c,g,y,E,I,P,L,z):(s.bindVertexArray.set(this.vao),P&&P.bind(),E&&E.dynamicDraw&&E.bind(),L&&L.bind(),z&&z.bind())}freshBind(s,c,g,y,E,I,P,L){let z=s.numAttributes,U=this.context,W=U.gl;this.vao&&this.destroy(),this.vao=U.createVertexArray(),U.bindVertexArray.set(this.vao),this.boundProgram=s,this.boundLayoutVertexBuffer=c,this.boundPaintVertexBuffers=g,this.boundIndexBuffer=y,this.boundVertexOffset=E,this.boundDynamicVertexBuffer=I,this.boundDynamicVertexBuffer2=P,this.boundDynamicVertexBuffer3=L,c.enableAttributes(W,s);for(let H of g)H.enableAttributes(W,s);I&&I.enableAttributes(W,s),P&&P.enableAttributes(W,s),L&&L.enableAttributes(W,s),c.bind(),c.setVertexAttribPointers(W,s,E);for(let H of g)H.bind(),H.setVertexAttribPointers(W,s,E);I&&(I.bind(),I.setVertexAttribPointers(W,s,E)),y&&y.bind(),P&&(P.bind(),P.setVertexAttribPointers(W,s,E)),L&&(L.bind(),L.setVertexAttribPointers(W,s,E)),U.currentNumAttributes=z}destroy(){this.vao&&(this.context.deleteVertexArray(this.vao),this.vao=null)}}let mU=(w,s,c,g,y)=>({u_texture:0,u_ele_delta:w,u_fog_matrix:s,u_fog_color:c?c.properties.get("fog-color"):i.b7.white,u_fog_ground_blend:c?c.properties.get("fog-ground-blend"):1,u_fog_ground_blend_opacity:y?0:c?c.calculateFogBlendOpacity(g):0,u_horizon_color:c?c.properties.get("horizon-color"):i.b7.white,u_horizon_fog_blend:c?c.properties.get("horizon-fog-blend"):1,u_is_globe_mode:y?1:0}),$b={mainMatrix:"u_projection_matrix",tileMercatorCoords:"u_projection_tile_mercator_coords",clippingPlane:"u_projection_clipping_plane",projectionTransition:"u_projection_transition",fallbackMatrix:"u_projection_fallback_matrix"};function ov(w){let s=[];for(let c=0;c<w.length;c++){if(w[c]===null)continue;let g=w[c].split(" ");s.push(g.pop())}return s}class Zb{constructor(s,c,g,y,E,I,P,L,z=[]){let U=s.gl;this.program=U.createProgram();let W=ov(c.staticAttributes),H=g?g.getBinderAttributes():[],te=W.concat(H),ae=bo.prelude.staticUniforms?ov(bo.prelude.staticUniforms):[],be=P.staticUniforms?ov(P.staticUniforms):[],_e=c.staticUniforms?ov(c.staticUniforms):[],xe=g?g.getBinderUniforms():[],Ae=ae.concat(be).concat(_e).concat(xe),ke=[];for(let lt of Ae)ke.indexOf(lt)<0&&ke.push(lt);let Le=g?g.defines():[];Rs(U)&&Le.unshift("#version 300 es"),E&&Le.push("#define OVERDRAW_INSPECTOR;"),I&&Le.push("#define TERRAIN3D;"),L&&Le.push(L),z&&Le.push(...z);let Fe=Le.concat(bo.prelude.fragmentSource,P.fragmentSource,c.fragmentSource).join(`
`),He=Le.concat(bo.prelude.vertexSource,P.vertexSource,c.vertexSource).join(`
`);Rs(U)||(Fe=function(lt){return lt.replace(/\bin\s/g,"varying ").replace("out highp vec4 fragColor;","").replace(/fragColor/g,"gl_FragColor").replace(/texture\(/g,"texture2D(")}(Fe),He=function(lt){return lt.replace(/\bin\s/g,"attribute ").replace(/\bout\s/g,"varying ").replace(/texture\(/g,"texture2D(")}(He));let Be=U.createShader(U.FRAGMENT_SHADER);if(U.isContextLost())return void(this.failedToCreate=!0);if(U.shaderSource(Be,Fe),U.compileShader(Be),!U.getShaderParameter(Be,U.COMPILE_STATUS))throw new Error(`Could not compile fragment shader: ${U.getShaderInfoLog(Be)}`);U.attachShader(this.program,Be);let rt=U.createShader(U.VERTEX_SHADER);if(U.isContextLost())return void(this.failedToCreate=!0);if(U.shaderSource(rt,He),U.compileShader(rt),!U.getShaderParameter(rt,U.COMPILE_STATUS))throw new Error(`Could not compile vertex shader: ${U.getShaderInfoLog(rt)}`);U.attachShader(this.program,rt),this.attributes={};let ht={};this.numAttributes=te.length;for(let lt=0;lt<this.numAttributes;lt++)te[lt]&&(U.bindAttribLocation(this.program,lt,te[lt]),this.attributes[te[lt]]=lt);if(U.linkProgram(this.program),!U.getProgramParameter(this.program,U.LINK_STATUS))throw new Error(`Program failed to link: ${U.getProgramInfoLog(this.program)}`);U.deleteShader(rt),U.deleteShader(Be);for(let lt=0;lt<ke.length;lt++){let ut=ke[lt];if(ut&&!ht[ut]){let ft=U.getUniformLocation(this.program,ut);ft&&(ht[ut]=ft)}}this.fixedUniforms=y(s,ht),this.terrainUniforms=((lt,ut)=>({u_depth:new i.bH(lt,ut.u_depth),u_terrain:new i.bH(lt,ut.u_terrain),u_terrain_dim:new i.b8(lt,ut.u_terrain_dim),u_terrain_matrix:new i.bJ(lt,ut.u_terrain_matrix),u_terrain_unpack:new i.bK(lt,ut.u_terrain_unpack),u_terrain_exaggeration:new i.b8(lt,ut.u_terrain_exaggeration)}))(s,ht),this.projectionUniforms=((lt,ut)=>({u_projection_matrix:new i.bJ(lt,ut.u_projection_matrix),u_projection_tile_mercator_coords:new i.bK(lt,ut.u_projection_tile_mercator_coords),u_projection_clipping_plane:new i.bK(lt,ut.u_projection_clipping_plane),u_projection_transition:new i.b8(lt,ut.u_projection_transition),u_projection_fallback_matrix:new i.bJ(lt,ut.u_projection_fallback_matrix)}))(s,ht),this.binderUniforms=g?g.getUniforms(s,ht):[]}draw(s,c,g,y,E,I,P,L,z,U,W,H,te,ae,be,_e,xe,Ae,ke){let Le=s.gl;if(this.failedToCreate)return;if(s.program.set(this.program),s.setDepthMode(g),s.setStencilMode(y),s.setColorMode(E),s.setCullFace(I),L){s.activeTexture.set(Le.TEXTURE2),Le.bindTexture(Le.TEXTURE_2D,L.depthTexture),s.activeTexture.set(Le.TEXTURE3),Le.bindTexture(Le.TEXTURE_2D,L.texture);for(let He in this.terrainUniforms)this.terrainUniforms[He].set(L[He])}if(z)for(let He in z)this.projectionUniforms[$b[He]].set(z[He]);if(P)for(let He in this.fixedUniforms)this.fixedUniforms[He].set(P[He]);_e&&_e.setUniforms(s,this.binderUniforms,ae,{zoom:be});let Fe=0;switch(c){case Le.LINES:Fe=2;break;case Le.TRIANGLES:Fe=3;break;case Le.LINE_STRIP:Fe=1}for(let He of te.get()){let Be=He.vaos||(He.vaos={});(Be[U]||(Be[U]=new hU)).bind(s,this,W,_e?_e.getPaintVertexBuffers():[],H,He.vertexOffset,xe,Ae,ke),Le.drawElements(c,He.primitiveLength*Fe,Le.UNSIGNED_SHORT,He.primitiveOffset*Fe*2)}}}function Yb(w,s,c){let g=1/i.az(c,1,s.transform.tileZoom),y=Math.pow(2,c.tileID.overscaledZ),E=c.tileSize*Math.pow(2,s.transform.tileZoom)/y,I=E*(c.tileID.canonical.x+c.tileID.wrap*y),P=E*c.tileID.canonical.y;return{u_image:0,u_texsize:c.imageAtlasTexture.size,u_scale:[g,w.fromScale,w.toScale],u_fade:w.t,u_pixel_coord_upper:[I>>16,P>>16],u_pixel_coord_lower:[65535&I,65535&P]}}let Kb=(w,s,c,g)=>{let y=w.style.light,E=y.properties.get("position"),I=[E.x,E.y,E.z],P=i.bN();y.properties.get("anchor")==="viewport"&&i.bO(P,w.transform.bearingInRadians),i.bP(I,I,P);let L=w.transform.transformLightDirection(I),z=y.properties.get("color");return{u_lightpos:I,u_lightpos_globe:L,u_lightintensity:y.properties.get("intensity"),u_lightcolor:[z.r,z.g,z.b],u_vertical_gradient:+s,u_opacity:c,u_fill_translate:g}},Ep=(w,s,c,g,y,E,I)=>i.e(Kb(w,s,c,g),Yb(E,w,I),{u_height_factor:-Math.pow(2,y.overscaledZ)/I.tileSize/8}),oN=(w,s,c,g)=>i.e(Yb(s,w,c),{u_fill_translate:g}),hT=(w,s)=>({u_world:w,u_fill_translate:s}),K0=(w,s,c,g,y)=>i.e(oN(w,s,c,y),{u_world:g}),X0=(w,s,c,g,y)=>{let E=w.transform,I,P,L=0;if(c.paint.get("circle-pitch-alignment")==="map"){let z=i.az(s,1,E.zoom);I=!0,P=[z,z],L=z/(i.Z*Math.pow(2,s.tileID.overscaledZ))*2*Math.PI*y}else I=!1,P=E.pixelsToGLUnits;return{u_camera_to_center_distance:E.cameraToCenterDistance,u_scale_with_map:+(c.paint.get("circle-pitch-scale")==="map"),u_pitch_with_map:+I,u_device_pixel_ratio:w.pixelRatio,u_extrude_scale:P,u_globe_extrude_scale:L,u_translate:g}},gU=w=>({u_pixel_extrude_scale:[1/w.width,1/w.height]}),Xb=w=>({u_viewport_size:[w.width,w.height]}),iN=(w,s=1)=>({u_color:w,u_overlay:0,u_overlay_scale:s}),Cm=(w,s,c,g)=>{let y=i.az(w,1,s)/(i.Z*Math.pow(2,w.tileID.overscaledZ))*2*Math.PI*g;return{u_extrude_scale:i.az(w,1,s),u_intensity:c,u_globe_extrude_scale:y}},aN=(w,s,c,g)=>{let y=i.K();i.bQ(y,0,w.width,w.height,0,0,1);let E=w.context.gl;return{u_matrix:y,u_world:[E.drawingBufferWidth,E.drawingBufferHeight],u_image:c,u_color_ramp:g,u_opacity:s.paint.get("heatmap-opacity")}},sN=(w,s,c)=>{let g=c.paint.get("hillshade-accent-color"),y;switch(c.paint.get("hillshade-method")){case"basic":y=4;break;case"combined":y=1;break;case"igor":y=2;break;case"multidirectional":y=3;break;default:y=0}let E=c.getIlluminationProperties();for(let I=0;I<E.directionRadians.length;I++)c.paint.get("hillshade-illumination-anchor")==="viewport"&&(E.directionRadians[I]+=w.transform.bearingInRadians);return{u_image:0,u_latrange:lN(0,s.tileID),u_exaggeration:c.paint.get("hillshade-exaggeration"),u_altitudes:E.altitudeRadians,u_azimuths:E.directionRadians,u_accent:g,u_method:y,u_highlights:E.highlightColor,u_shadows:E.shadowColor}},vU=(w,s)=>{let c=s.stride,g=i.K();return i.bQ(g,0,i.Z,-8192,0,0,1),i.L(g,g,[0,-8192,0]),{u_matrix:g,u_image:1,u_dimension:[c,c],u_zoom:w.overscaledZ,u_unpack:s.getUnpackVector()}};function lN(w,s){let c=Math.pow(2,s.canonical.z),g=s.canonical.y;return[new i.$(0,g/c).toLngLat().lat,new i.$(0,(g+1)/c).toLngLat().lat]}let Q0=(w,s,c,g)=>{let y=w.transform;return{u_translation:Yd(w,s,c),u_ratio:g/i.az(s,1,y.zoom),u_device_pixel_ratio:w.pixelRatio,u_units_to_pixels:[1/y.pixelsToGLUnits[0],1/y.pixelsToGLUnits[1]]}},uN=(w,s,c,g,y)=>i.e(Q0(w,s,c,g),{u_image:0,u_image_height:y}),cN=(w,s,c,g,y)=>{let E=w.transform,I=mT(s,E);return{u_translation:Yd(w,s,c),u_texsize:s.imageAtlasTexture.size,u_ratio:g/i.az(s,1,E.zoom),u_device_pixel_ratio:w.pixelRatio,u_image:0,u_scale:[I,y.fromScale,y.toScale],u_fade:y.t,u_units_to_pixels:[1/E.pixelsToGLUnits[0],1/E.pixelsToGLUnits[1]]}},pN=(w,s,c,g,y,E)=>{let I=w.lineAtlas,P=mT(s,w.transform),L=c.layout.get("line-cap")==="round",z=I.getDash(y.from,L),U=I.getDash(y.to,L),W=z.width*E.fromScale,H=U.width*E.toScale;return i.e(Q0(w,s,c,g),{u_patternscale_a:[P/W,-z.height/2],u_patternscale_b:[P/H,-U.height/2],u_sdfgamma:I.width/(256*Math.min(W,H)*w.pixelRatio)/2,u_image:0,u_tex_y_a:z.y,u_tex_y_b:U.y,u_mix:E.t})};function mT(w,s){return 1/i.az(w,1,s.tileZoom)}function Yd(w,s,c){return i.aA(w.transform,s,c.paint.get("line-translate"),c.paint.get("line-translate-anchor"))}let fN=(w,s,c,g,y)=>{return{u_tl_parent:w,u_scale_parent:s,u_buffer_scale:1,u_fade_t:c.mix,u_opacity:c.opacity*g.paint.get("raster-opacity"),u_image0:0,u_image1:1,u_brightness_low:g.paint.get("raster-brightness-min"),u_brightness_high:g.paint.get("raster-brightness-max"),u_saturation_factor:(I=g.paint.get("raster-saturation"),I>0?1-1/(1.001-I):-I),u_contrast_factor:(E=g.paint.get("raster-contrast"),E>0?1/(1-E):1+E),u_spin_weights:dN(g.paint.get("raster-hue-rotate")),u_coords_top:[y[0].x,y[0].y,y[1].x,y[1].y],u_coords_bottom:[y[3].x,y[3].y,y[2].x,y[2].y]};var E,I};function dN(w){w*=Math.PI/180;let s=Math.sin(w),c=Math.cos(w);return[(2*c+1)/3,(-Math.sqrt(3)*s-c+1)/3,(Math.sqrt(3)*s-c+1)/3]}let iv=(w,s,c,g,y,E,I,P,L,z,U,W,H)=>{let te=I.transform;return{u_is_size_zoom_constant:+(w==="constant"||w==="source"),u_is_size_feature_constant:+(w==="constant"||w==="camera"),u_size_t:s?s.uSizeT:0,u_size:s?s.uSize:0,u_camera_to_center_distance:te.cameraToCenterDistance,u_pitch:te.pitch/360*2*Math.PI,u_rotate_symbol:+c,u_aspect_ratio:te.width/te.height,u_fade_change:I.options.fadeDuration?I.symbolFadeChange:1,u_label_plane_matrix:P,u_coord_matrix:L,u_is_text:+U,u_pitch_with_map:+g,u_is_along_line:y,u_is_variable_anchor:E,u_texsize:W,u_texture:0,u_translation:z,u_pitched_scale:H}},hN=(w,s,c,g,y,E,I,P,L,z,U,W,H,te)=>{let ae=I.transform;return i.e(iv(w,s,c,g,y,E,I,P,L,z,U,W,te),{u_gamma_scale:g?Math.cos(ae.pitch*Math.PI/180)*ae.cameraToCenterDistance:1,u_device_pixel_ratio:I.pixelRatio,u_is_halo:1})},Qb=(w,s,c,g,y,E,I,P,L,z,U,W,H)=>i.e(hN(w,s,c,g,y,E,I,P,L,z,!0,U,0,H),{u_texsize_icon:W,u_texture_icon:1}),yU=(w,s)=>({u_opacity:w,u_color:s}),_U=(w,s,c,g,y)=>i.e(function(E,I,P,L){let z=P.imageManager.getPattern(E.from.toString()),U=P.imageManager.getPattern(E.to.toString()),{width:W,height:H}=P.imageManager.getPixelSize(),te=Math.pow(2,L.tileID.overscaledZ),ae=L.tileSize*Math.pow(2,P.transform.tileZoom)/te,be=ae*(L.tileID.canonical.x+L.tileID.wrap*te),_e=ae*L.tileID.canonical.y;return{u_image:0,u_pattern_tl_a:z.tl,u_pattern_br_a:z.br,u_pattern_tl_b:U.tl,u_pattern_br_b:U.br,u_texsize:[W,H],u_mix:I.t,u_pattern_size_a:z.displaySize,u_pattern_size_b:U.displaySize,u_scale_a:I.fromScale,u_scale_b:I.toScale,u_tile_units_to_pixels:1/i.az(L,1,P.transform.tileZoom),u_pixel_coord_upper:[be>>16,_e>>16],u_pixel_coord_lower:[65535&be,65535&_e]}}(c,y,s,g),{u_opacity:w}),gT=(w,s)=>{},mN={fillExtrusion:(w,s)=>({u_lightpos:new i.bL(w,s.u_lightpos),u_lightpos_globe:new i.bL(w,s.u_lightpos_globe),u_lightintensity:new i.b8(w,s.u_lightintensity),u_lightcolor:new i.bL(w,s.u_lightcolor),u_vertical_gradient:new i.b8(w,s.u_vertical_gradient),u_opacity:new i.b8(w,s.u_opacity),u_fill_translate:new i.bM(w,s.u_fill_translate)}),fillExtrusionPattern:(w,s)=>({u_lightpos:new i.bL(w,s.u_lightpos),u_lightpos_globe:new i.bL(w,s.u_lightpos_globe),u_lightintensity:new i.b8(w,s.u_lightintensity),u_lightcolor:new i.bL(w,s.u_lightcolor),u_vertical_gradient:new i.b8(w,s.u_vertical_gradient),u_height_factor:new i.b8(w,s.u_height_factor),u_opacity:new i.b8(w,s.u_opacity),u_fill_translate:new i.bM(w,s.u_fill_translate),u_image:new i.bH(w,s.u_image),u_texsize:new i.bM(w,s.u_texsize),u_pixel_coord_upper:new i.bM(w,s.u_pixel_coord_upper),u_pixel_coord_lower:new i.bM(w,s.u_pixel_coord_lower),u_scale:new i.bL(w,s.u_scale),u_fade:new i.b8(w,s.u_fade)}),fill:(w,s)=>({u_fill_translate:new i.bM(w,s.u_fill_translate)}),fillPattern:(w,s)=>({u_image:new i.bH(w,s.u_image),u_texsize:new i.bM(w,s.u_texsize),u_pixel_coord_upper:new i.bM(w,s.u_pixel_coord_upper),u_pixel_coord_lower:new i.bM(w,s.u_pixel_coord_lower),u_scale:new i.bL(w,s.u_scale),u_fade:new i.b8(w,s.u_fade),u_fill_translate:new i.bM(w,s.u_fill_translate)}),fillOutline:(w,s)=>({u_world:new i.bM(w,s.u_world),u_fill_translate:new i.bM(w,s.u_fill_translate)}),fillOutlinePattern:(w,s)=>({u_world:new i.bM(w,s.u_world),u_image:new i.bH(w,s.u_image),u_texsize:new i.bM(w,s.u_texsize),u_pixel_coord_upper:new i.bM(w,s.u_pixel_coord_upper),u_pixel_coord_lower:new i.bM(w,s.u_pixel_coord_lower),u_scale:new i.bL(w,s.u_scale),u_fade:new i.b8(w,s.u_fade),u_fill_translate:new i.bM(w,s.u_fill_translate)}),circle:(w,s)=>({u_camera_to_center_distance:new i.b8(w,s.u_camera_to_center_distance),u_scale_with_map:new i.bH(w,s.u_scale_with_map),u_pitch_with_map:new i.bH(w,s.u_pitch_with_map),u_extrude_scale:new i.bM(w,s.u_extrude_scale),u_device_pixel_ratio:new i.b8(w,s.u_device_pixel_ratio),u_globe_extrude_scale:new i.b8(w,s.u_globe_extrude_scale),u_translate:new i.bM(w,s.u_translate)}),collisionBox:(w,s)=>({u_pixel_extrude_scale:new i.bM(w,s.u_pixel_extrude_scale)}),collisionCircle:(w,s)=>({u_viewport_size:new i.bM(w,s.u_viewport_size)}),debug:(w,s)=>({u_color:new i.bI(w,s.u_color),u_overlay:new i.bH(w,s.u_overlay),u_overlay_scale:new i.b8(w,s.u_overlay_scale)}),depth:gT,clippingMask:gT,heatmap:(w,s)=>({u_extrude_scale:new i.b8(w,s.u_extrude_scale),u_intensity:new i.b8(w,s.u_intensity),u_globe_extrude_scale:new i.b8(w,s.u_globe_extrude_scale)}),heatmapTexture:(w,s)=>({u_matrix:new i.bJ(w,s.u_matrix),u_world:new i.bM(w,s.u_world),u_image:new i.bH(w,s.u_image),u_color_ramp:new i.bH(w,s.u_color_ramp),u_opacity:new i.b8(w,s.u_opacity)}),hillshade:(w,s)=>({u_image:new i.bH(w,s.u_image),u_latrange:new i.bM(w,s.u_latrange),u_exaggeration:new i.b8(w,s.u_exaggeration),u_altitudes:new i.bS(w,s.u_altitudes),u_azimuths:new i.bS(w,s.u_azimuths),u_accent:new i.bI(w,s.u_accent),u_method:new i.bH(w,s.u_method),u_shadows:new i.bR(w,s.u_shadows),u_highlights:new i.bR(w,s.u_highlights)}),hillshadePrepare:(w,s)=>({u_matrix:new i.bJ(w,s.u_matrix),u_image:new i.bH(w,s.u_image),u_dimension:new i.bM(w,s.u_dimension),u_zoom:new i.b8(w,s.u_zoom),u_unpack:new i.bK(w,s.u_unpack)}),line:(w,s)=>({u_translation:new i.bM(w,s.u_translation),u_ratio:new i.b8(w,s.u_ratio),u_device_pixel_ratio:new i.b8(w,s.u_device_pixel_ratio),u_units_to_pixels:new i.bM(w,s.u_units_to_pixels)}),lineGradient:(w,s)=>({u_translation:new i.bM(w,s.u_translation),u_ratio:new i.b8(w,s.u_ratio),u_device_pixel_ratio:new i.b8(w,s.u_device_pixel_ratio),u_units_to_pixels:new i.bM(w,s.u_units_to_pixels),u_image:new i.bH(w,s.u_image),u_image_height:new i.b8(w,s.u_image_height)}),linePattern:(w,s)=>({u_translation:new i.bM(w,s.u_translation),u_texsize:new i.bM(w,s.u_texsize),u_ratio:new i.b8(w,s.u_ratio),u_device_pixel_ratio:new i.b8(w,s.u_device_pixel_ratio),u_image:new i.bH(w,s.u_image),u_units_to_pixels:new i.bM(w,s.u_units_to_pixels),u_scale:new i.bL(w,s.u_scale),u_fade:new i.b8(w,s.u_fade)}),lineSDF:(w,s)=>({u_translation:new i.bM(w,s.u_translation),u_ratio:new i.b8(w,s.u_ratio),u_device_pixel_ratio:new i.b8(w,s.u_device_pixel_ratio),u_units_to_pixels:new i.bM(w,s.u_units_to_pixels),u_patternscale_a:new i.bM(w,s.u_patternscale_a),u_patternscale_b:new i.bM(w,s.u_patternscale_b),u_sdfgamma:new i.b8(w,s.u_sdfgamma),u_image:new i.bH(w,s.u_image),u_tex_y_a:new i.b8(w,s.u_tex_y_a),u_tex_y_b:new i.b8(w,s.u_tex_y_b),u_mix:new i.b8(w,s.u_mix)}),raster:(w,s)=>({u_tl_parent:new i.bM(w,s.u_tl_parent),u_scale_parent:new i.b8(w,s.u_scale_parent),u_buffer_scale:new i.b8(w,s.u_buffer_scale),u_fade_t:new i.b8(w,s.u_fade_t),u_opacity:new i.b8(w,s.u_opacity),u_image0:new i.bH(w,s.u_image0),u_image1:new i.bH(w,s.u_image1),u_brightness_low:new i.b8(w,s.u_brightness_low),u_brightness_high:new i.b8(w,s.u_brightness_high),u_saturation_factor:new i.b8(w,s.u_saturation_factor),u_contrast_factor:new i.b8(w,s.u_contrast_factor),u_spin_weights:new i.bL(w,s.u_spin_weights),u_coords_top:new i.bK(w,s.u_coords_top),u_coords_bottom:new i.bK(w,s.u_coords_bottom)}),symbolIcon:(w,s)=>({u_is_size_zoom_constant:new i.bH(w,s.u_is_size_zoom_constant),u_is_size_feature_constant:new i.bH(w,s.u_is_size_feature_constant),u_size_t:new i.b8(w,s.u_size_t),u_size:new i.b8(w,s.u_size),u_camera_to_center_distance:new i.b8(w,s.u_camera_to_center_distance),u_pitch:new i.b8(w,s.u_pitch),u_rotate_symbol:new i.bH(w,s.u_rotate_symbol),u_aspect_ratio:new i.b8(w,s.u_aspect_ratio),u_fade_change:new i.b8(w,s.u_fade_change),u_label_plane_matrix:new i.bJ(w,s.u_label_plane_matrix),u_coord_matrix:new i.bJ(w,s.u_coord_matrix),u_is_text:new i.bH(w,s.u_is_text),u_pitch_with_map:new i.bH(w,s.u_pitch_with_map),u_is_along_line:new i.bH(w,s.u_is_along_line),u_is_variable_anchor:new i.bH(w,s.u_is_variable_anchor),u_texsize:new i.bM(w,s.u_texsize),u_texture:new i.bH(w,s.u_texture),u_translation:new i.bM(w,s.u_translation),u_pitched_scale:new i.b8(w,s.u_pitched_scale)}),symbolSDF:(w,s)=>({u_is_size_zoom_constant:new i.bH(w,s.u_is_size_zoom_constant),u_is_size_feature_constant:new i.bH(w,s.u_is_size_feature_constant),u_size_t:new i.b8(w,s.u_size_t),u_size:new i.b8(w,s.u_size),u_camera_to_center_distance:new i.b8(w,s.u_camera_to_center_distance),u_pitch:new i.b8(w,s.u_pitch),u_rotate_symbol:new i.bH(w,s.u_rotate_symbol),u_aspect_ratio:new i.b8(w,s.u_aspect_ratio),u_fade_change:new i.b8(w,s.u_fade_change),u_label_plane_matrix:new i.bJ(w,s.u_label_plane_matrix),u_coord_matrix:new i.bJ(w,s.u_coord_matrix),u_is_text:new i.bH(w,s.u_is_text),u_pitch_with_map:new i.bH(w,s.u_pitch_with_map),u_is_along_line:new i.bH(w,s.u_is_along_line),u_is_variable_anchor:new i.bH(w,s.u_is_variable_anchor),u_texsize:new i.bM(w,s.u_texsize),u_texture:new i.bH(w,s.u_texture),u_gamma_scale:new i.b8(w,s.u_gamma_scale),u_device_pixel_ratio:new i.b8(w,s.u_device_pixel_ratio),u_is_halo:new i.bH(w,s.u_is_halo),u_translation:new i.bM(w,s.u_translation),u_pitched_scale:new i.b8(w,s.u_pitched_scale)}),symbolTextAndIcon:(w,s)=>({u_is_size_zoom_constant:new i.bH(w,s.u_is_size_zoom_constant),u_is_size_feature_constant:new i.bH(w,s.u_is_size_feature_constant),u_size_t:new i.b8(w,s.u_size_t),u_size:new i.b8(w,s.u_size),u_camera_to_center_distance:new i.b8(w,s.u_camera_to_center_distance),u_pitch:new i.b8(w,s.u_pitch),u_rotate_symbol:new i.bH(w,s.u_rotate_symbol),u_aspect_ratio:new i.b8(w,s.u_aspect_ratio),u_fade_change:new i.b8(w,s.u_fade_change),u_label_plane_matrix:new i.bJ(w,s.u_label_plane_matrix),u_coord_matrix:new i.bJ(w,s.u_coord_matrix),u_is_text:new i.bH(w,s.u_is_text),u_pitch_with_map:new i.bH(w,s.u_pitch_with_map),u_is_along_line:new i.bH(w,s.u_is_along_line),u_is_variable_anchor:new i.bH(w,s.u_is_variable_anchor),u_texsize:new i.bM(w,s.u_texsize),u_texsize_icon:new i.bM(w,s.u_texsize_icon),u_texture:new i.bH(w,s.u_texture),u_texture_icon:new i.bH(w,s.u_texture_icon),u_gamma_scale:new i.b8(w,s.u_gamma_scale),u_device_pixel_ratio:new i.b8(w,s.u_device_pixel_ratio),u_is_halo:new i.bH(w,s.u_is_halo),u_translation:new i.bM(w,s.u_translation),u_pitched_scale:new i.b8(w,s.u_pitched_scale)}),background:(w,s)=>({u_opacity:new i.b8(w,s.u_opacity),u_color:new i.bI(w,s.u_color)}),backgroundPattern:(w,s)=>({u_opacity:new i.b8(w,s.u_opacity),u_image:new i.bH(w,s.u_image),u_pattern_tl_a:new i.bM(w,s.u_pattern_tl_a),u_pattern_br_a:new i.bM(w,s.u_pattern_br_a),u_pattern_tl_b:new i.bM(w,s.u_pattern_tl_b),u_pattern_br_b:new i.bM(w,s.u_pattern_br_b),u_texsize:new i.bM(w,s.u_texsize),u_mix:new i.b8(w,s.u_mix),u_pattern_size_a:new i.bM(w,s.u_pattern_size_a),u_pattern_size_b:new i.bM(w,s.u_pattern_size_b),u_scale_a:new i.b8(w,s.u_scale_a),u_scale_b:new i.b8(w,s.u_scale_b),u_pixel_coord_upper:new i.bM(w,s.u_pixel_coord_upper),u_pixel_coord_lower:new i.bM(w,s.u_pixel_coord_lower),u_tile_units_to_pixels:new i.b8(w,s.u_tile_units_to_pixels)}),terrain:(w,s)=>({u_texture:new i.bH(w,s.u_texture),u_ele_delta:new i.b8(w,s.u_ele_delta),u_fog_matrix:new i.bJ(w,s.u_fog_matrix),u_fog_color:new i.bI(w,s.u_fog_color),u_fog_ground_blend:new i.b8(w,s.u_fog_ground_blend),u_fog_ground_blend_opacity:new i.b8(w,s.u_fog_ground_blend_opacity),u_horizon_color:new i.bI(w,s.u_horizon_color),u_horizon_fog_blend:new i.b8(w,s.u_horizon_fog_blend),u_is_globe_mode:new i.b8(w,s.u_is_globe_mode)}),terrainDepth:(w,s)=>({u_ele_delta:new i.b8(w,s.u_ele_delta)}),terrainCoords:(w,s)=>({u_texture:new i.bH(w,s.u_texture),u_terrain_coords_id:new i.b8(w,s.u_terrain_coords_id),u_ele_delta:new i.b8(w,s.u_ele_delta)}),projectionErrorMeasurement:(w,s)=>({u_input:new i.b8(w,s.u_input),u_output_expected:new i.b8(w,s.u_output_expected)}),atmosphere:(w,s)=>({u_sun_pos:new i.bL(w,s.u_sun_pos),u_atmosphere_blend:new i.b8(w,s.u_atmosphere_blend),u_globe_position:new i.bL(w,s.u_globe_position),u_globe_radius:new i.b8(w,s.u_globe_radius),u_inv_proj_matrix:new i.bJ(w,s.u_inv_proj_matrix)}),sky:(w,s)=>({u_sky_color:new i.bI(w,s.u_sky_color),u_horizon_color:new i.bI(w,s.u_horizon_color),u_horizon:new i.bM(w,s.u_horizon),u_horizon_normal:new i.bM(w,s.u_horizon_normal),u_sky_horizon_blend:new i.b8(w,s.u_sky_horizon_blend),u_sky_blend:new i.b8(w,s.u_sky_blend)})};class gN{constructor(s,c,g){this.context=s;let y=s.gl;this.buffer=y.createBuffer(),this.dynamicDraw=!!g,this.context.unbindVAO(),s.bindElementBuffer.set(this.buffer),y.bufferData(y.ELEMENT_ARRAY_BUFFER,c.arrayBuffer,this.dynamicDraw?y.DYNAMIC_DRAW:y.STATIC_DRAW),this.dynamicDraw||delete c.arrayBuffer}bind(){this.context.bindElementBuffer.set(this.buffer)}updateData(s){let c=this.context.gl;if(!this.dynamicDraw)throw new Error("Attempted to update data while not in dynamic mode.");this.context.unbindVAO(),this.bind(),c.bufferSubData(c.ELEMENT_ARRAY_BUFFER,0,s.arrayBuffer)}destroy(){this.buffer&&(this.context.gl.deleteBuffer(this.buffer),delete this.buffer)}}let vT={Int8:"BYTE",Uint8:"UNSIGNED_BYTE",Int16:"SHORT",Uint16:"UNSIGNED_SHORT",Int32:"INT",Uint32:"UNSIGNED_INT",Float32:"FLOAT"};class vN{constructor(s,c,g,y){this.length=c.length,this.attributes=g,this.itemSize=c.bytesPerElement,this.dynamicDraw=y,this.context=s;let E=s.gl;this.buffer=E.createBuffer(),s.bindVertexBuffer.set(this.buffer),E.bufferData(E.ARRAY_BUFFER,c.arrayBuffer,this.dynamicDraw?E.DYNAMIC_DRAW:E.STATIC_DRAW),this.dynamicDraw||delete c.arrayBuffer}bind(){this.context.bindVertexBuffer.set(this.buffer)}updateData(s){if(s.length!==this.length)throw new Error(`Length of new data is ${s.length}, which doesn't match current length of ${this.length}`);let c=this.context.gl;this.bind(),c.bufferSubData(c.ARRAY_BUFFER,0,s.arrayBuffer)}enableAttributes(s,c){for(let g=0;g<this.attributes.length;g++){let y=c.attributes[this.attributes[g].name];y!==void 0&&s.enableVertexAttribArray(y)}}setVertexAttribPointers(s,c,g){for(let y=0;y<this.attributes.length;y++){let E=this.attributes[y],I=c.attributes[E.name];I!==void 0&&s.vertexAttribPointer(I,E.components,s[vT[E.type]],!1,this.itemSize,E.offset+this.itemSize*(g||0))}}destroy(){this.buffer&&(this.context.gl.deleteBuffer(this.buffer),delete this.buffer)}}class mo{constructor(s){this.gl=s.gl,this.default=this.getDefault(),this.current=this.default,this.dirty=!1}get(){return this.current}set(s){}getDefault(){return this.default}setDefault(){this.set(this.default)}}class qf extends mo{getDefault(){return i.b7.transparent}set(s){let c=this.current;(s.r!==c.r||s.g!==c.g||s.b!==c.b||s.a!==c.a||this.dirty)&&(this.gl.clearColor(s.r,s.g,s.b,s.a),this.current=s,this.dirty=!1)}}class yT extends mo{getDefault(){return 1}set(s){(s!==this.current||this.dirty)&&(this.gl.clearDepth(s),this.current=s,this.dirty=!1)}}class _T extends mo{getDefault(){return 0}set(s){(s!==this.current||this.dirty)&&(this.gl.clearStencil(s),this.current=s,this.dirty=!1)}}class bT extends mo{getDefault(){return[!0,!0,!0,!0]}set(s){let c=this.current;(s[0]!==c[0]||s[1]!==c[1]||s[2]!==c[2]||s[3]!==c[3]||this.dirty)&&(this.gl.colorMask(s[0],s[1],s[2],s[3]),this.current=s,this.dirty=!1)}}class yN extends mo{getDefault(){return!0}set(s){(s!==this.current||this.dirty)&&(this.gl.depthMask(s),this.current=s,this.dirty=!1)}}class xT extends mo{getDefault(){return 255}set(s){(s!==this.current||this.dirty)&&(this.gl.stencilMask(s),this.current=s,this.dirty=!1)}}class Am extends mo{getDefault(){return{func:this.gl.ALWAYS,ref:0,mask:255}}set(s){let c=this.current;(s.func!==c.func||s.ref!==c.ref||s.mask!==c.mask||this.dirty)&&(this.gl.stencilFunc(s.func,s.ref,s.mask),this.current=s,this.dirty=!1)}}class wT extends mo{getDefault(){let s=this.gl;return[s.KEEP,s.KEEP,s.KEEP]}set(s){let c=this.current;(s[0]!==c[0]||s[1]!==c[1]||s[2]!==c[2]||this.dirty)&&(this.gl.stencilOp(s[0],s[1],s[2]),this.current=s,this.dirty=!1)}}class bU extends mo{getDefault(){return!1}set(s){if(s===this.current&&!this.dirty)return;let c=this.gl;s?c.enable(c.STENCIL_TEST):c.disable(c.STENCIL_TEST),this.current=s,this.dirty=!1}}class xU extends mo{getDefault(){return[0,1]}set(s){let c=this.current;(s[0]!==c[0]||s[1]!==c[1]||this.dirty)&&(this.gl.depthRange(s[0],s[1]),this.current=s,this.dirty=!1)}}class wU extends mo{getDefault(){return!1}set(s){if(s===this.current&&!this.dirty)return;let c=this.gl;s?c.enable(c.DEPTH_TEST):c.disable(c.DEPTH_TEST),this.current=s,this.dirty=!1}}class EU extends mo{getDefault(){return this.gl.LESS}set(s){(s!==this.current||this.dirty)&&(this.gl.depthFunc(s),this.current=s,this.dirty=!1)}}class _N extends mo{getDefault(){return!1}set(s){if(s===this.current&&!this.dirty)return;let c=this.gl;s?c.enable(c.BLEND):c.disable(c.BLEND),this.current=s,this.dirty=!1}}class SU extends mo{getDefault(){let s=this.gl;return[s.ONE,s.ZERO]}set(s){let c=this.current;(s[0]!==c[0]||s[1]!==c[1]||this.dirty)&&(this.gl.blendFunc(s[0],s[1]),this.current=s,this.dirty=!1)}}class bN extends mo{getDefault(){return i.b7.transparent}set(s){let c=this.current;(s.r!==c.r||s.g!==c.g||s.b!==c.b||s.a!==c.a||this.dirty)&&(this.gl.blendColor(s.r,s.g,s.b,s.a),this.current=s,this.dirty=!1)}}class Jb extends mo{getDefault(){return this.gl.FUNC_ADD}set(s){(s!==this.current||this.dirty)&&(this.gl.blendEquation(s),this.current=s,this.dirty=!1)}}class ex extends mo{getDefault(){return!1}set(s){if(s===this.current&&!this.dirty)return;let c=this.gl;s?c.enable(c.CULL_FACE):c.disable(c.CULL_FACE),this.current=s,this.dirty=!1}}class tx extends mo{getDefault(){return this.gl.BACK}set(s){(s!==this.current||this.dirty)&&(this.gl.cullFace(s),this.current=s,this.dirty=!1)}}class ET extends mo{getDefault(){return this.gl.CCW}set(s){(s!==this.current||this.dirty)&&(this.gl.frontFace(s),this.current=s,this.dirty=!1)}}class Om extends mo{getDefault(){return null}set(s){(s!==this.current||this.dirty)&&(this.gl.useProgram(s),this.current=s,this.dirty=!1)}}class rx extends mo{getDefault(){return this.gl.TEXTURE0}set(s){(s!==this.current||this.dirty)&&(this.gl.activeTexture(s),this.current=s,this.dirty=!1)}}class av extends mo{getDefault(){let s=this.gl;return[0,0,s.drawingBufferWidth,s.drawingBufferHeight]}set(s){let c=this.current;(s[0]!==c[0]||s[1]!==c[1]||s[2]!==c[2]||s[3]!==c[3]||this.dirty)&&(this.gl.viewport(s[0],s[1],s[2],s[3]),this.current=s,this.dirty=!1)}}class rc extends mo{getDefault(){return null}set(s){if(s===this.current&&!this.dirty)return;let c=this.gl;c.bindFramebuffer(c.FRAMEBUFFER,s),this.current=s,this.dirty=!1}}class xN extends mo{getDefault(){return null}set(s){if(s===this.current&&!this.dirty)return;let c=this.gl;c.bindRenderbuffer(c.RENDERBUFFER,s),this.current=s,this.dirty=!1}}class wN extends mo{getDefault(){return null}set(s){if(s===this.current&&!this.dirty)return;let c=this.gl;c.bindTexture(c.TEXTURE_2D,s),this.current=s,this.dirty=!1}}class ST extends mo{getDefault(){return null}set(s){if(s===this.current&&!this.dirty)return;let c=this.gl;c.bindBuffer(c.ARRAY_BUFFER,s),this.current=s,this.dirty=!1}}class Pm extends mo{getDefault(){return null}set(s){let c=this.gl;c.bindBuffer(c.ELEMENT_ARRAY_BUFFER,s),this.current=s,this.dirty=!1}}class nx extends mo{getDefault(){return null}set(s){var c;if(s===this.current&&!this.dirty)return;let g=this.gl;Rs(g)?g.bindVertexArray(s):(c=g.getExtension("OES_vertex_array_object"))===null||c===void 0||c.bindVertexArrayOES(s),this.current=s,this.dirty=!1}}class ox extends mo{getDefault(){return 4}set(s){if(s===this.current&&!this.dirty)return;let c=this.gl;c.pixelStorei(c.UNPACK_ALIGNMENT,s),this.current=s,this.dirty=!1}}class J0 extends mo{getDefault(){return!1}set(s){if(s===this.current&&!this.dirty)return;let c=this.gl;c.pixelStorei(c.UNPACK_PREMULTIPLY_ALPHA_WEBGL,s),this.current=s,this.dirty=!1}}class ix extends mo{getDefault(){return!1}set(s){if(s===this.current&&!this.dirty)return;let c=this.gl;c.pixelStorei(c.UNPACK_FLIP_Y_WEBGL,s),this.current=s,this.dirty=!1}}class ax extends mo{constructor(s,c){super(s),this.context=s,this.parent=c}getDefault(){return null}}class sv extends ax{setDirty(){this.dirty=!0}set(s){if(s===this.current&&!this.dirty)return;this.context.bindFramebuffer.set(this.parent);let c=this.gl;c.framebufferTexture2D(c.FRAMEBUFFER,c.COLOR_ATTACHMENT0,c.TEXTURE_2D,s,0),this.current=s,this.dirty=!1}}class lv extends ax{set(s){if(s===this.current&&!this.dirty)return;this.context.bindFramebuffer.set(this.parent);let c=this.gl;c.framebufferRenderbuffer(c.FRAMEBUFFER,c.DEPTH_ATTACHMENT,c.RENDERBUFFER,s),this.current=s,this.dirty=!1}}class EN extends ax{set(s){if(s===this.current&&!this.dirty)return;this.context.bindFramebuffer.set(this.parent);let c=this.gl;c.framebufferRenderbuffer(c.FRAMEBUFFER,c.DEPTH_STENCIL_ATTACHMENT,c.RENDERBUFFER,s),this.current=s,this.dirty=!1}}let sx="Framebuffer is not complete";class Wn{constructor(s,c,g,y,E){this.context=s,this.width=c,this.height=g;let I=s.gl,P=this.framebuffer=I.createFramebuffer();if(this.colorAttachment=new sv(s,P),y)this.depthAttachment=E?new EN(s,P):new lv(s,P);else if(E)throw new Error("Stencil cannot be set without depth");if(I.checkFramebufferStatus(I.FRAMEBUFFER)!==I.FRAMEBUFFER_COMPLETE)throw new Error(sx)}destroy(){let s=this.context.gl,c=this.colorAttachment.get();if(c&&s.deleteTexture(c),this.depthAttachment){let g=this.depthAttachment.get();g&&s.deleteRenderbuffer(g)}s.deleteFramebuffer(this.framebuffer)}}class lx{constructor(s){var c,g;if(this.gl=s,this.clearColor=new qf(this),this.clearDepth=new yT(this),this.clearStencil=new _T(this),this.colorMask=new bT(this),this.depthMask=new yN(this),this.stencilMask=new xT(this),this.stencilFunc=new Am(this),this.stencilOp=new wT(this),this.stencilTest=new bU(this),this.depthRange=new xU(this),this.depthTest=new wU(this),this.depthFunc=new EU(this),this.blend=new _N(this),this.blendFunc=new SU(this),this.blendColor=new bN(this),this.blendEquation=new Jb(this),this.cullFace=new ex(this),this.cullFaceSide=new tx(this),this.frontFace=new ET(this),this.program=new Om(this),this.activeTexture=new rx(this),this.viewport=new av(this),this.bindFramebuffer=new rc(this),this.bindRenderbuffer=new xN(this),this.bindTexture=new wN(this),this.bindVertexBuffer=new ST(this),this.bindElementBuffer=new Pm(this),this.bindVertexArray=new nx(this),this.pixelStoreUnpack=new ox(this),this.pixelStoreUnpackPremultiplyAlpha=new J0(this),this.pixelStoreUnpackFlipY=new ix(this),this.extTextureFilterAnisotropic=s.getExtension("EXT_texture_filter_anisotropic")||s.getExtension("MOZ_EXT_texture_filter_anisotropic")||s.getExtension("WEBKIT_EXT_texture_filter_anisotropic"),this.extTextureFilterAnisotropic&&(this.extTextureFilterAnisotropicMax=s.getParameter(this.extTextureFilterAnisotropic.MAX_TEXTURE_MAX_ANISOTROPY_EXT)),this.maxTextureSize=s.getParameter(s.MAX_TEXTURE_SIZE),Rs(s)){this.HALF_FLOAT=s.HALF_FLOAT;let y=s.getExtension("EXT_color_buffer_half_float");this.RGBA16F=(c=s.RGBA16F)!==null&&c!==void 0?c:y==null?void 0:y.RGBA16F_EXT,this.RGB16F=(g=s.RGB16F)!==null&&g!==void 0?g:y==null?void 0:y.RGB16F_EXT,s.getExtension("EXT_color_buffer_float")}else{s.getExtension("EXT_color_buffer_half_float"),s.getExtension("OES_texture_half_float_linear");let y=s.getExtension("OES_texture_half_float");this.HALF_FLOAT=y==null?void 0:y.HALF_FLOAT_OES}}setDefault(){this.unbindVAO(),this.clearColor.setDefault(),this.clearDepth.setDefault(),this.clearStencil.setDefault(),this.colorMask.setDefault(),this.depthMask.setDefault(),this.stencilMask.setDefault(),this.stencilFunc.setDefault(),this.stencilOp.setDefault(),this.stencilTest.setDefault(),this.depthRange.setDefault(),this.depthTest.setDefault(),this.depthFunc.setDefault(),this.blend.setDefault(),this.blendFunc.setDefault(),this.blendColor.setDefault(),this.blendEquation.setDefault(),this.cullFace.setDefault(),this.cullFaceSide.setDefault(),this.frontFace.setDefault(),this.program.setDefault(),this.activeTexture.setDefault(),this.bindFramebuffer.setDefault(),this.pixelStoreUnpack.setDefault(),this.pixelStoreUnpackPremultiplyAlpha.setDefault(),this.pixelStoreUnpackFlipY.setDefault()}setDirty(){this.clearColor.dirty=!0,this.clearDepth.dirty=!0,this.clearStencil.dirty=!0,this.colorMask.dirty=!0,this.depthMask.dirty=!0,this.stencilMask.dirty=!0,this.stencilFunc.dirty=!0,this.stencilOp.dirty=!0,this.stencilTest.dirty=!0,this.depthRange.dirty=!0,this.depthTest.dirty=!0,this.depthFunc.dirty=!0,this.blend.dirty=!0,this.blendFunc.dirty=!0,this.blendColor.dirty=!0,this.blendEquation.dirty=!0,this.cullFace.dirty=!0,this.cullFaceSide.dirty=!0,this.frontFace.dirty=!0,this.program.dirty=!0,this.activeTexture.dirty=!0,this.viewport.dirty=!0,this.bindFramebuffer.dirty=!0,this.bindRenderbuffer.dirty=!0,this.bindTexture.dirty=!0,this.bindVertexBuffer.dirty=!0,this.bindElementBuffer.dirty=!0,this.bindVertexArray.dirty=!0,this.pixelStoreUnpack.dirty=!0,this.pixelStoreUnpackPremultiplyAlpha.dirty=!0,this.pixelStoreUnpackFlipY.dirty=!0}createIndexBuffer(s,c){return new gN(this,s,c)}createVertexBuffer(s,c,g){return new vN(this,s,c,g)}createRenderbuffer(s,c,g){let y=this.gl,E=y.createRenderbuffer();return this.bindRenderbuffer.set(E),y.renderbufferStorage(y.RENDERBUFFER,s,c,g),this.bindRenderbuffer.set(null),E}createFramebuffer(s,c,g,y){return new Wn(this,s,c,g,y)}clear({color:s,depth:c,stencil:g}){let y=this.gl,E=0;s&&(E|=y.COLOR_BUFFER_BIT,this.clearColor.set(s),this.colorMask.set([!0,!0,!0,!0])),c!==void 0&&(E|=y.DEPTH_BUFFER_BIT,this.depthRange.set([0,1]),this.clearDepth.set(c),this.depthMask.set(!0)),g!==void 0&&(E|=y.STENCIL_BUFFER_BIT,this.clearStencil.set(g),this.stencilMask.set(255)),y.clear(E)}setCullFace(s){s.enable===!1?this.cullFace.set(!1):(this.cullFace.set(!0),this.cullFaceSide.set(s.mode),this.frontFace.set(s.frontFace))}setDepthMode(s){s.func!==this.gl.ALWAYS||s.mask?(this.depthTest.set(!0),this.depthFunc.set(s.func),this.depthMask.set(s.mask),this.depthRange.set(s.range)):this.depthTest.set(!1)}setStencilMode(s){s.test.func!==this.gl.ALWAYS||s.mask?(this.stencilTest.set(!0),this.stencilMask.set(s.mask),this.stencilOp.set([s.fail,s.depthFail,s.pass]),this.stencilFunc.set({func:s.test.func,ref:s.ref,mask:s.test.mask})):this.stencilTest.set(!1)}setColorMode(s){i.bE(s.blendFunction,Ko.Replace)?this.blend.set(!1):(this.blend.set(!0),this.blendFunc.set(s.blendFunction),this.blendColor.set(s.blendColor)),this.colorMask.set(s.mask)}createVertexArray(){var s;return Rs(this.gl)?this.gl.createVertexArray():(s=this.gl.getExtension("OES_vertex_array_object"))===null||s===void 0?void 0:s.createVertexArrayOES()}deleteVertexArray(s){var c;return Rs(this.gl)?this.gl.deleteVertexArray(s):(c=this.gl.getExtension("OES_vertex_array_object"))===null||c===void 0?void 0:c.deleteVertexArrayOES(s)}unbindVAO(){this.bindVertexArray.set(null)}}let ux;function TT(w,s,c,g,y){let E=w.context,I=w.transform,P=E.gl,L=w.useProgram("collisionBox"),z=[],U=0,W=0;for(let xe=0;xe<g.length;xe++){let Ae=g[xe],ke=s.getTile(Ae).getBucket(c);if(!ke)continue;let Le=y?ke.textCollisionBox:ke.iconCollisionBox,Fe=ke.collisionCircleArray;Fe.length>0&&(z.push({circleArray:Fe,circleOffset:W,coord:Ae}),U+=Fe.length/4,W=U),Le&&L.draw(E,P.LINES,vn.disabled,An.disabled,w.colorModeForRenderPass(),to.disabled,gU(w.transform),w.style.map.terrain&&w.style.map.terrain.getTerrainData(Ae),I.getProjectionData({overscaledTileID:Ae,applyGlobeMatrix:!0,applyTerrainMatrix:!0}),c.id,Le.layoutVertexBuffer,Le.indexBuffer,Le.segments,null,w.transform.zoom,null,null,Le.collisionVertexBuffer)}if(!y||!z.length)return;let H=w.useProgram("collisionCircle"),te=new i.bT;te.resize(4*U),te._trim();let ae=0;for(let xe of z)for(let Ae=0;Ae<xe.circleArray.length/4;Ae++){let ke=4*Ae,Le=xe.circleArray[ke+0],Fe=xe.circleArray[ke+1],He=xe.circleArray[ke+2],Be=xe.circleArray[ke+3];te.emplace(ae++,Le,Fe,He,Be,0),te.emplace(ae++,Le,Fe,He,Be,1),te.emplace(ae++,Le,Fe,He,Be,2),te.emplace(ae++,Le,Fe,He,Be,3)}(!ux||ux.length<2*U)&&(ux=function(xe){let Ae=2*xe,ke=new i.bV;ke.resize(Ae),ke._trim();for(let Le=0;Le<Ae;Le++){let Fe=6*Le;ke.uint16[Fe+0]=4*Le+0,ke.uint16[Fe+1]=4*Le+1,ke.uint16[Fe+2]=4*Le+2,ke.uint16[Fe+3]=4*Le+2,ke.uint16[Fe+4]=4*Le+3,ke.uint16[Fe+5]=4*Le+0}return ke}(U));let be=E.createIndexBuffer(ux,!0),_e=E.createVertexBuffer(te,i.bU.members,!0);for(let xe of z){let Ae=Xb(w.transform);H.draw(E,P.TRIANGLES,vn.disabled,An.disabled,w.colorModeForRenderPass(),to.disabled,Ae,w.style.map.terrain&&w.style.map.terrain.getTerrainData(xe.coord),null,c.id,_e,be,i.aJ.simpleSegment(0,2*xe.circleOffset,xe.circleArray.length,xe.circleArray.length/2),null,w.transform.zoom,null,null,null)}_e.destroy(),be.destroy()}let e1=i.ad(new Float32Array(16));function TU(w,s,c,g,y,E){let{horizontalAlign:I,verticalAlign:P}=i.aE(w);return new i.P((-(I-.5)*s/y+g[0])*E,(-(P-.5)*c/y+g[1])*E)}function IU(w,s,c,g,y,E){let I=s.tileAnchorPoint.add(new i.P(s.translation[0],s.translation[1]));if(s.pitchWithMap){let P=g.mult(E);c||(P=P.rotate(-y));let L=I.add(P);return Ke(L.x,L.y,s.pitchedLabelPlaneMatrix,s.getElevation).point}if(c){let P=en(s.tileAnchorPoint.x+1,s.tileAnchorPoint.y,s).point.sub(w),L=Math.atan(P.y/P.x)+(P.x<0?Math.PI:0);return w.add(g.rotate(L))}return w.add(g)}function SN(w,s,c,g,y,E,I,P,L,z,U,W){let H=w.text.placedSymbolArray,te=w.text.dynamicLayoutVertexArray,ae=w.icon.dynamicLayoutVertexArray,be={};te.clear();for(let _e=0;_e<H.length;_e++){let xe=H.get(_e),Ae=xe.hidden||!xe.crossTileID||w.allowVerticalPlacement&&!xe.placedOrientation?null:g[xe.crossTileID];if(Ae){let ke=new i.P(xe.anchorX,xe.anchorY),Le={getElevation:W,width:y.width,height:y.height,pitchedLabelPlaneMatrix:E,pitchWithMap:c,transform:y,tileAnchorPoint:ke,translation:z,unwrappedTileID:U},Fe=c?lr(ke.x,ke.y,Le):en(ke.x,ke.y,Le),He=Tn(y.cameraToCenterDistance,Fe.signedDistanceFromCamera),Be=i.am(w.textSizeData,P,xe)*He/i.ay;c&&(Be*=w.tilePixelRatio/I);let{width:rt,height:ht,anchor:lt,textOffset:ut,textBoxScale:ft}=Ae,Yt=TU(lt,rt,ht,ut,ft,Be),Ht=y.getPitchedTextCorrection(ke.x+z[0],ke.y+z[1],U),Ct=IU(Fe.point,Le,s,Yt,-y.bearingInRadians,Ht),br=w.allowVerticalPlacement&&xe.placedOrientation===i.al.vertical?Math.PI/2:0;for(let On=0;On<xe.numGlyphs;On++)i.as(te,Ct,br);L&&xe.associatedIconIndex>=0&&(be[xe.associatedIconIndex]={shiftedAnchor:Ct,angle:br})}else ln(xe.numGlyphs,te)}if(L){ae.clear();let _e=w.icon.placedSymbolArray;for(let xe=0;xe<_e.length;xe++){let Ae=_e.get(xe);if(Ae.hidden)ln(Ae.numGlyphs,ae);else{let ke=be[xe];if(ke)for(let Le=0;Le<Ae.numGlyphs;Le++)i.as(ae,ke.shiftedAnchor,ke.angle);else ln(Ae.numGlyphs,ae)}}w.icon.dynamicLayoutVertexBuffer.updateData(ae)}w.text.dynamicLayoutVertexBuffer.updateData(te)}function MU(w,s,c){return c.iconsInText&&s?"symbolTextAndIcon":w?"symbolSDF":"symbolIcon"}function cx(w,s,c,g,y,E,I,P,L,z,U,W,H){let te=w.context,ae=te.gl,be=w.transform,_e=P==="map",xe=L==="map",Ae=P!=="viewport"&&c.layout.get("symbol-placement")!=="point",ke=_e&&!xe&&!Ae,Le=!c.layout.get("symbol-sort-key").isConstant(),Fe=!1,He=w.getDepthModeForSublayer(0,vn.ReadOnly),Be=c._unevaluatedLayout.hasValue("text-variable-anchor")||c._unevaluatedLayout.hasValue("text-variable-anchor-offset"),rt=[],ht=be.getCircleRadiusCorrection();for(let lt of g){let ut=s.getTile(lt),ft=ut.getBucket(c);if(!ft)continue;let Yt=y?ft.text:ft.icon;if(!Yt||!Yt.segments.get().length||!Yt.hasVisibleVertices)continue;let Ht=Yt.programConfigurations.get(c.id),Ct=y||ft.sdfIcons,br=y?ft.textSizeData:ft.iconSizeData,On=xe||be.pitch!==0,ro=w.useProgram(MU(Ct,y,ft),Ht),ji=i.ak(br,be.zoom),ti=w.style.map.terrain&&w.style.map.terrain.getTerrainData(lt),qi,zi,ii,Eo,za=[0,0],os=null;if(y)zi=ut.glyphAtlasTexture,ii=ae.LINEAR,qi=ut.glyphAtlasTexture.size,ft.iconsInText&&(za=ut.imageAtlasTexture.size,os=ut.imageAtlasTexture,Eo=On||w.options.rotating||w.options.zooming||br.kind==="composite"||br.kind==="camera"?ae.LINEAR:ae.NEAREST);else{let Sa=c.layout.get("icon-size").constantOr(0)!==1||ft.iconsNeedLinear;zi=ut.imageAtlasTexture,ii=Ct||w.options.rotating||w.options.zooming||Sa||On?ae.LINEAR:ae.NEAREST,qi=ut.imageAtlasTexture.size}let ws=i.az(ut,1,w.transform.zoom),So=Xt(_e,w.transform,ws),Xd=i.K();i.an(Xd,So);let Ip=yr(xe,_e,w.transform,ws),Qd=i.aA(be,ut,E,I),Lm=be.getProjectionData({overscaledTileID:lt,applyGlobeMatrix:!H,applyTerrainMatrix:!0}),m1=Be&&ft.hasTextData(),Jd=c.layout.get("icon-text-fit")!=="none"&&m1&&ft.hasIconData();if(Ae){let Sa=w.style.map.terrain?(pl,vi)=>w.style.map.terrain.getElevation(lt,pl,vi):null,Ta=c.layout.get("text-rotation-alignment")==="map";Gn(ft,w,y,So,Xd,xe,z,Ta,lt.toUnwrapped(),be.width,be.height,Qd,Sa)}let km=y&&Be||Jd,Su=Ae||km?e1:xe?So:w.transform.clipSpaceToPixelsMatrix,eh=Ct&&c.paint.get(y?"text-halo-width":"icon-halo-width").constantOr(1)!==0,Ff;Ff=Ct?ft.iconsInText?Qb(br.kind,ji,ke,xe,Ae,km,w,Su,Ip,Qd,qi,za,ht):hN(br.kind,ji,ke,xe,Ae,km,w,Su,Ip,Qd,y,qi,0,ht):iv(br.kind,ji,ke,xe,Ae,km,w,Su,Ip,Qd,y,qi,ht);let th={program:ro,buffers:Yt,uniformValues:Ff,projectionData:Lm,atlasTexture:zi,atlasTextureIcon:os,atlasInterpolation:ii,atlasInterpolationIcon:Eo,isSDF:Ct,hasHalo:eh};if(Le&&ft.canOverlap){Fe=!0;let Sa=Yt.segments.get();for(let Ta of Sa)rt.push({segments:new i.aJ([Ta]),sortKey:Ta.sortKey,state:th,terrainData:ti})}else rt.push({segments:Yt.segments,sortKey:0,state:th,terrainData:ti})}Fe&&rt.sort((lt,ut)=>lt.sortKey-ut.sortKey);for(let lt of rt){let ut=lt.state;if(te.activeTexture.set(ae.TEXTURE0),ut.atlasTexture.bind(ut.atlasInterpolation,ae.CLAMP_TO_EDGE),ut.atlasTextureIcon&&(te.activeTexture.set(ae.TEXTURE1),ut.atlasTextureIcon&&ut.atlasTextureIcon.bind(ut.atlasInterpolationIcon,ae.CLAMP_TO_EDGE)),ut.isSDF){let ft=ut.uniformValues;ut.hasHalo&&(ft.u_is_halo=1,t1(ut.buffers,lt.segments,c,w,ut.program,He,U,W,ft,ut.projectionData,lt.terrainData)),ft.u_is_halo=0}t1(ut.buffers,lt.segments,c,w,ut.program,He,U,W,ut.uniformValues,ut.projectionData,lt.terrainData)}}function t1(w,s,c,g,y,E,I,P,L,z,U){let W=g.context;y.draw(W,W.gl.TRIANGLES,E,I,P,to.backCCW,L,U,z,c.id,w.layoutVertexBuffer,w.indexBuffer,s,c.paint,g.transform.zoom,w.programConfigurations.get(c.id),w.dynamicLayoutVertexBuffer,w.opacityVertexBuffer)}function px(w,s,c,g,y){let E=w.context,I=E.gl,P=An.disabled,L=new Ko([I.ONE,I.ONE],i.b7.transparent,[!0,!0,!0,!0]),z=s.getBucket(c);if(!z)return;let U=g.key,W=c.heatmapFbos.get(U);W||(W=fx(E,s.tileSize,s.tileSize),c.heatmapFbos.set(U,W)),E.bindFramebuffer.set(W.framebuffer),E.viewport.set([0,0,s.tileSize,s.tileSize]),E.clear({color:i.b7.transparent});let H=z.programConfigurations.get(c.id),te=w.useProgram("heatmap",H,!y),ae=w.transform.getProjectionData({overscaledTileID:s.tileID,applyGlobeMatrix:!0,applyTerrainMatrix:!0}),be=w.style.map.terrain.getTerrainData(g);te.draw(E,I.TRIANGLES,vn.disabled,P,L,to.disabled,Cm(s,w.transform.zoom,c.paint.get("heatmap-intensity"),1),be,ae,c.id,z.layoutVertexBuffer,z.indexBuffer,z.segments,c.paint,w.transform.zoom,H)}function IT(w,s,c,g,y){let E=w.context,I=E.gl,P=w.transform;E.setColorMode(w.colorModeForRenderPass());let L=MT(E,s),z=c.key,U=s.heatmapFbos.get(z);if(!U)return;E.activeTexture.set(I.TEXTURE0),I.bindTexture(I.TEXTURE_2D,U.colorAttachment.get()),E.activeTexture.set(I.TEXTURE1),L.bind(I.LINEAR,I.CLAMP_TO_EDGE);let W=P.getProjectionData({overscaledTileID:c,applyTerrainMatrix:y,applyGlobeMatrix:!g});w.useProgram("heatmapTexture").draw(E,I.TRIANGLES,vn.disabled,An.disabled,w.colorModeForRenderPass(),to.disabled,aN(w,s,0,1),null,W,s.id,w.rasterBoundsBuffer,w.quadTriangleIndexBuffer,w.rasterBoundsSegments,s.paint,P.zoom),U.destroy(),s.heatmapFbos.delete(z)}function fx(w,s,c){var g,y;let E=w.gl,I=E.createTexture();E.bindTexture(E.TEXTURE_2D,I),E.texParameteri(E.TEXTURE_2D,E.TEXTURE_WRAP_S,E.CLAMP_TO_EDGE),E.texParameteri(E.TEXTURE_2D,E.TEXTURE_WRAP_T,E.CLAMP_TO_EDGE),E.texParameteri(E.TEXTURE_2D,E.TEXTURE_MIN_FILTER,E.LINEAR),E.texParameteri(E.TEXTURE_2D,E.TEXTURE_MAG_FILTER,E.LINEAR);let P=(g=w.HALF_FLOAT)!==null&&g!==void 0?g:E.UNSIGNED_BYTE,L=(y=w.RGBA16F)!==null&&y!==void 0?y:E.RGBA;E.texImage2D(E.TEXTURE_2D,0,L,s,c,0,E.RGBA,P,null);let z=w.createFramebuffer(s,c,!1,!1);return z.colorAttachment.set(I),z}function MT(w,s){return s.colorRampTexture||(s.colorRampTexture=new Q(w,s.colorRamp,w.gl.RGBA)),s.colorRampTexture}function r1(w,s,c,g,y){if(!c||!g||!g.imageAtlas)return;let E=g.imageAtlas.patternPositions,I=E[c.to.toString()],P=E[c.from.toString()];if(!I&&P&&(I=P),!P&&I&&(P=I),!I||!P){let L=y.getPaintProperty(s);I=E[L],P=E[L]}I&&P&&w.setConstantPatternPositions(I,P)}function n1(w,s,c,g,y,E,I,P){let L=w.context.gl,z="fill-pattern",U=c.paint.get(z),W=U&&U.constantOr(1),H=c.getCrossfadeParameters(),te,ae,be,_e,xe,Ae=w.transform,ke=c.paint.get("fill-translate"),Le=c.paint.get("fill-translate-anchor");I?(ae=W&&!c.getPaintProperty("fill-outline-color")?"fillOutlinePattern":"fillOutline",te=L.LINES):(ae=W?"fillPattern":"fill",te=L.TRIANGLES);let Fe=U.constantOr(null);for(let He of g){let Be=s.getTile(He);if(W&&!Be.patternsLoaded())continue;let rt=Be.getBucket(c);if(!rt)continue;let ht=rt.programConfigurations.get(c.id),lt=w.useProgram(ae,ht),ut=w.style.map.terrain&&w.style.map.terrain.getTerrainData(He);W&&(w.context.activeTexture.set(L.TEXTURE0),Be.imageAtlasTexture.bind(L.LINEAR,L.CLAMP_TO_EDGE),ht.updatePaintBuffers(H)),r1(ht,z,Fe,Be,c);let ft=Ae.getProjectionData({overscaledTileID:He,applyGlobeMatrix:!P,applyTerrainMatrix:!0}),Yt=i.aA(Ae,Be,ke,Le);if(I){_e=rt.indexBuffer2,xe=rt.segments2;let Ct=[L.drawingBufferWidth,L.drawingBufferHeight];be=ae==="fillOutlinePattern"&&W?K0(w,H,Be,Ct,Yt):hT(Ct,Yt)}else _e=rt.indexBuffer,xe=rt.segments,be=W?oN(w,H,Be,Yt):{u_fill_translate:Yt};let Ht=w.stencilModeForClipping(He);lt.draw(w.context,te,y,Ht,E,to.backCCW,be,ut,ft,c.id,rt.layoutVertexBuffer,_e,xe,c.paint,w.transform.zoom,ht)}}function o1(w,s,c,g,y,E,I,P){let L=w.context,z=L.gl,U="fill-extrusion-pattern",W=c.paint.get(U),H=W.constantOr(1),te=c.getCrossfadeParameters(),ae=c.paint.get("fill-extrusion-opacity"),be=W.constantOr(null),_e=w.transform;for(let xe of g){let Ae=s.getTile(xe),ke=Ae.getBucket(c);if(!ke)continue;let Le=w.style.map.terrain&&w.style.map.terrain.getTerrainData(xe),Fe=ke.programConfigurations.get(c.id),He=w.useProgram(H?"fillExtrusionPattern":"fillExtrusion",Fe);H&&(w.context.activeTexture.set(z.TEXTURE0),Ae.imageAtlasTexture.bind(z.LINEAR,z.CLAMP_TO_EDGE),Fe.updatePaintBuffers(te));let Be=_e.getProjectionData({overscaledTileID:xe,applyGlobeMatrix:!P,applyTerrainMatrix:!0});r1(Fe,U,be,Ae,c);let rt=i.aA(_e,Ae,c.paint.get("fill-extrusion-translate"),c.paint.get("fill-extrusion-translate-anchor")),ht=c.paint.get("fill-extrusion-vertical-gradient"),lt=H?Ep(w,ht,ae,rt,xe,te,Ae):Kb(w,ht,ae,rt);He.draw(L,L.gl.TRIANGLES,y,E,I,to.backCCW,lt,Le,Be,c.id,ke.layoutVertexBuffer,ke.indexBuffer,ke.segments,c.paint,w.transform.zoom,Fe,w.style.map.terrain&&ke.centroidVertexBuffer)}}function CT(w,s,c,g,y,E,I,P,L){var z;let U=w.style.projection,W=w.context,H=w.transform,te=W.gl,ae=[`#define NUM_ILLUMINATION_SOURCES ${c.paint.get("hillshade-highlight-color").values.length}`],be=w.useProgram("hillshade",null,!1,ae),_e=!w.options.moving;for(let xe of g){let Ae=s.getTile(xe),ke=Ae.fbo;if(!ke)continue;let Le=U.getMeshFromTileID(W,xe.canonical,P,!0,"raster"),Fe=(z=w.style.map.terrain)===null||z===void 0?void 0:z.getTerrainData(xe);W.activeTexture.set(te.TEXTURE0),te.bindTexture(te.TEXTURE_2D,ke.colorAttachment.get());let He=H.getProjectionData({overscaledTileID:xe,aligned:_e,applyGlobeMatrix:!L,applyTerrainMatrix:!0});be.draw(W,te.TRIANGLES,E,y[xe.overscaledZ],I,to.backCCW,sN(w,Ae,c),Fe,He,c.id,Le.vertexBuffer,Le.indexBuffer,Le.segments)}}let i1=[new i.P(0,0),new i.P(i.Z,0),new i.P(i.Z,i.Z),new i.P(0,i.Z)];function dx(w,s,c,g,y,E,I,P,L=!1,z=!1){let U=g[g.length-1].overscaledZ,W=w.context,H=W.gl,te=w.useProgram("raster"),ae=w.transform,be=w.style.projection,_e=w.colorModeForRenderPass(),xe=!w.options.moving;for(let Ae of g){let ke=w.getDepthModeForSublayer(Ae.overscaledZ-U,c.paint.get("raster-opacity")===1?vn.ReadWrite:vn.ReadOnly,H.LESS),Le=s.getTile(Ae);Le.registerFadeDuration(c.paint.get("raster-fade-duration"));let Fe=s.findLoadedParent(Ae,0),He=s.findLoadedSibling(Ae),Be=TN(Le,Fe||He||null,s,c,w.transform,w.style.map.terrain),rt,ht,lt=c.paint.get("raster-resampling")==="nearest"?H.NEAREST:H.LINEAR;W.activeTexture.set(H.TEXTURE0),Le.texture.bind(lt,H.CLAMP_TO_EDGE,H.LINEAR_MIPMAP_NEAREST),W.activeTexture.set(H.TEXTURE1),Fe?(Fe.texture.bind(lt,H.CLAMP_TO_EDGE,H.LINEAR_MIPMAP_NEAREST),rt=Math.pow(2,Fe.tileID.overscaledZ-Le.tileID.overscaledZ),ht=[Le.tileID.canonical.x*rt%1,Le.tileID.canonical.y*rt%1]):Le.texture.bind(lt,H.CLAMP_TO_EDGE,H.LINEAR_MIPMAP_NEAREST),Le.texture.useMipmap&&W.extTextureFilterAnisotropic&&w.transform.pitch>20&&H.texParameterf(H.TEXTURE_2D,W.extTextureFilterAnisotropic.TEXTURE_MAX_ANISOTROPY_EXT,W.extTextureFilterAnisotropicMax);let ut=w.style.map.terrain&&w.style.map.terrain.getTerrainData(Ae),ft=ae.getProjectionData({overscaledTileID:Ae,aligned:xe,applyGlobeMatrix:!z,applyTerrainMatrix:!0}),Yt=fN(ht||[0,0],rt||1,Be,c,P),Ht=be.getMeshFromTileID(W,Ae.canonical,E,I,"raster");te.draw(W,H.TRIANGLES,ke,y?y[Ae.overscaledZ]:An.disabled,_e,L?to.frontCCW:to.backCCW,Yt,ut,ft,c.id,Ht.vertexBuffer,Ht.indexBuffer,Ht.segments)}}function TN(w,s,c,g,y,E){let I=g.paint.get("raster-fade-duration");if(!E&&I>0){let P=v.now(),L=(P-w.timeAdded)/I,z=s?(P-s.timeAdded)/I:-1,U=c.getSource(),W=je(y,{tileSize:U.tileSize,roundZoom:U.roundZoom}),H=!s||Math.abs(s.tileID.overscaledZ-W)>Math.abs(w.tileID.overscaledZ-W),te=H&&w.refreshedUponExpiration?1:i.ae(H?L:1-z,0,1);return w.refreshedUponExpiration&&L>=1&&(w.refreshedUponExpiration=!1),s?{opacity:1,mix:1-te}:{opacity:te,mix:0}}return{opacity:1,mix:0}}let hx=new i.b7(1,0,0,1),AT=new i.b7(0,1,0,1),IN=new i.b7(0,0,1,1),MN=new i.b7(1,0,1,1),mx=new i.b7(0,1,1,1);function gx(w,s,c,g){a1(w,0,s+c/2,w.transform.width,c,g)}function CN(w,s,c,g){a1(w,s-c/2,0,c,w.transform.height,g)}function a1(w,s,c,g,y,E){let I=w.context,P=I.gl;P.enable(P.SCISSOR_TEST),P.scissor(s*w.pixelRatio,c*w.pixelRatio,g*w.pixelRatio,y*w.pixelRatio),I.clear({color:E}),P.disable(P.SCISSOR_TEST)}function aa(w,s,c){let g=w.context,y=g.gl,E=w.useProgram("debug"),I=vn.disabled,P=An.disabled,L=w.colorModeForRenderPass(),z="$debug",U=w.style.map.terrain&&w.style.map.terrain.getTerrainData(c);g.activeTexture.set(y.TEXTURE0);let W=s.getTileByID(c.key).latestRawTileData,H=Math.floor((W&&W.byteLength||0)/1024),te=s.getTile(c).tileSize,ae=512/Math.min(te,512)*(c.overscaledZ/w.transform.zoom)*.5,be=c.canonical.toString();c.overscaledZ!==c.canonical.z&&(be+=` => ${c.overscaledZ}`),function(xe,Ae){xe.initDebugOverlayCanvas();let ke=xe.debugOverlayCanvas,Le=xe.context.gl,Fe=xe.debugOverlayCanvas.getContext("2d");Fe.clearRect(0,0,ke.width,ke.height),Fe.shadowColor="white",Fe.shadowBlur=2,Fe.lineWidth=1.5,Fe.strokeStyle="white",Fe.textBaseline="top",Fe.font="bold 36px Open Sans, sans-serif",Fe.fillText(Ae,5,5),Fe.strokeText(Ae,5,5),xe.debugOverlayTexture.update(ke),xe.debugOverlayTexture.bind(Le.LINEAR,Le.CLAMP_TO_EDGE)}(w,`${be} ${H}kB`);let _e=w.transform.getProjectionData({overscaledTileID:c,applyGlobeMatrix:!0,applyTerrainMatrix:!0});E.draw(g,y.TRIANGLES,I,P,Ko.alphaBlended,to.disabled,iN(i.b7.transparent,ae),null,_e,z,w.debugBuffer,w.quadTriangleIndexBuffer,w.debugSegments),E.draw(g,y.LINE_STRIP,I,P,L,to.disabled,iN(i.b7.red),U,_e,z,w.debugBuffer,w.tileBorderIndexBuffer,w.debugSegments)}function Kd(w,s,c,g){let{isRenderingGlobe:y}=g,E=w.context,I=E.gl,P=w.transform,L=w.colorModeForRenderPass(),z=w.getDepthModeFor3D(),U=w.useProgram("terrain");E.bindFramebuffer.set(null),E.viewport.set([0,0,w.width,w.height]);for(let W of c){let H=s.getTerrainMesh(W.tileID),te=w.renderToTexture.getTexture(W),ae=s.getTerrainData(W.tileID);E.activeTexture.set(I.TEXTURE0),I.bindTexture(I.TEXTURE_2D,te.texture);let be=s.getMeshFrameDelta(P.zoom),_e=P.calculateFogMatrix(W.tileID.toUnwrapped()),xe=mU(be,_e,w.style.sky,P.pitch,y),Ae=P.getProjectionData({overscaledTileID:W.tileID,applyTerrainMatrix:!1,applyGlobeMatrix:!0});U.draw(E,I.TRIANGLES,z,An.disabled,L,to.backCCW,xe,ae,Ae,"terrain",H.vertexBuffer,H.indexBuffer,H.segments)}}function Eu(w,s){if(!s.mesh){let c=new i.aI;c.emplaceBack(-1,-1),c.emplaceBack(1,-1),c.emplaceBack(1,1),c.emplaceBack(-1,1);let g=new i.aK;g.emplaceBack(0,1,2),g.emplaceBack(0,2,3),s.mesh=new ki(w.createVertexBuffer(c,wo.members),w.createIndexBuffer(g),i.aJ.simpleSegment(0,0,c.length,g.length))}return s.mesh}class OT{constructor(s,c){this.context=new lx(s),this.transform=c,this._tileTextures={},this.terrainFacilitator={dirty:!0,matrix:i.ad(new Float64Array(16)),renderTime:0},this.setup(),this.numSublayers=oe.maxUnderzooming+oe.maxOverzooming+1,this.depthEpsilon=1/Math.pow(2,16),this.crossTileSymbolIndex=new Bn}resize(s,c,g){if(this.width=Math.floor(s*g),this.height=Math.floor(c*g),this.pixelRatio=g,this.context.viewport.set([0,0,this.width,this.height]),this.style)for(let y of this.style._order)this.style._layers[y].resize()}setup(){let s=this.context,c=new i.aI;c.emplaceBack(0,0),c.emplaceBack(i.Z,0),c.emplaceBack(0,i.Z),c.emplaceBack(i.Z,i.Z),this.tileExtentBuffer=s.createVertexBuffer(c,wo.members),this.tileExtentSegments=i.aJ.simpleSegment(0,0,4,2);let g=new i.aI;g.emplaceBack(0,0),g.emplaceBack(i.Z,0),g.emplaceBack(0,i.Z),g.emplaceBack(i.Z,i.Z),this.debugBuffer=s.createVertexBuffer(g,wo.members),this.debugSegments=i.aJ.simpleSegment(0,0,4,5);let y=new i.b_;y.emplaceBack(0,0,0,0),y.emplaceBack(i.Z,0,i.Z,0),y.emplaceBack(0,i.Z,0,i.Z),y.emplaceBack(i.Z,i.Z,i.Z,i.Z),this.rasterBoundsBuffer=s.createVertexBuffer(y,dU.members),this.rasterBoundsSegments=i.aJ.simpleSegment(0,0,4,2);let E=new i.aI;E.emplaceBack(0,0),E.emplaceBack(i.Z,0),E.emplaceBack(0,i.Z),E.emplaceBack(i.Z,i.Z),this.rasterBoundsBufferPosOnly=s.createVertexBuffer(E,wo.members),this.rasterBoundsSegmentsPosOnly=i.aJ.simpleSegment(0,0,4,5);let I=new i.aI;I.emplaceBack(0,0),I.emplaceBack(1,0),I.emplaceBack(0,1),I.emplaceBack(1,1),this.viewportBuffer=s.createVertexBuffer(I,wo.members),this.viewportSegments=i.aJ.simpleSegment(0,0,4,2);let P=new i.b$;P.emplaceBack(0),P.emplaceBack(1),P.emplaceBack(3),P.emplaceBack(2),P.emplaceBack(0),this.tileBorderIndexBuffer=s.createIndexBuffer(P);let L=new i.aK;L.emplaceBack(1,0,2),L.emplaceBack(1,2,3),this.quadTriangleIndexBuffer=s.createIndexBuffer(L);let z=this.context.gl;this.stencilClearMode=new An({func:z.ALWAYS,mask:0},0,255,z.ZERO,z.ZERO,z.ZERO),this.tileExtentMesh=new ki(this.tileExtentBuffer,this.quadTriangleIndexBuffer,this.tileExtentSegments)}clearStencil(){let s=this.context,c=s.gl;this.nextStencilID=1,this.currentStencilSource=void 0;let g=i.K();i.bQ(g,0,this.width,this.height,0,0,1),i.M(g,g,[c.drawingBufferWidth,c.drawingBufferHeight,0]);let y={mainMatrix:g,tileMercatorCoords:[0,0,1,1],clippingPlane:[0,0,0,0],projectionTransition:0,fallbackMatrix:g};this.useProgram("clippingMask",null,!0).draw(s,c.TRIANGLES,vn.disabled,this.stencilClearMode,Ko.disabled,to.disabled,null,null,y,"$clipping",this.viewportBuffer,this.quadTriangleIndexBuffer,this.viewportSegments)}_renderTileClippingMasks(s,c,g){if(this.currentStencilSource===s.source||!s.isTileClipped()||!c||!c.length)return;this.currentStencilSource=s.source,this.nextStencilID+c.length>256&&this.clearStencil();let y=this.context;y.setColorMode(Ko.disabled),y.setDepthMode(vn.disabled);let E={};for(let I of c)E[I.key]=this.nextStencilID++;this._renderTileMasks(E,c,g,!0),this._renderTileMasks(E,c,g,!1),this._tileClippingMaskIDs=E}_renderTileMasks(s,c,g,y){let E=this.context,I=E.gl,P=this.style.projection,L=this.transform,z=this.useProgram("clippingMask");for(let U of c){let W=s[U.key],H=this.style.map.terrain&&this.style.map.terrain.getTerrainData(U),te=P.getMeshFromTileID(this.context,U.canonical,y,!0,"stencil"),ae=L.getProjectionData({overscaledTileID:U,applyGlobeMatrix:!g,applyTerrainMatrix:!0});z.draw(E,I.TRIANGLES,vn.disabled,new An({func:I.ALWAYS,mask:0},W,255,I.KEEP,I.KEEP,I.REPLACE),Ko.disabled,g?to.disabled:to.backCCW,null,H,ae,"$clipping",te.vertexBuffer,te.indexBuffer,te.segments)}}_renderTilesDepthBuffer(){let s=this.context,c=s.gl,g=this.style.projection,y=this.transform,E=this.useProgram("depth"),I=this.getDepthModeFor3D(),P=Ie(y,{tileSize:y.tileSize});for(let L of P){let z=this.style.map.terrain&&this.style.map.terrain.getTerrainData(L),U=g.getMeshFromTileID(this.context,L.canonical,!0,!0,"raster"),W=y.getProjectionData({overscaledTileID:L,applyGlobeMatrix:!0,applyTerrainMatrix:!0});E.draw(s,c.TRIANGLES,I,An.disabled,Ko.disabled,to.backCCW,null,z,W,"$clipping",U.vertexBuffer,U.indexBuffer,U.segments)}}stencilModeFor3D(){this.currentStencilSource=void 0,this.nextStencilID+1>256&&this.clearStencil();let s=this.nextStencilID++,c=this.context.gl;return new An({func:c.NOTEQUAL,mask:255},s,255,c.KEEP,c.KEEP,c.REPLACE)}stencilModeForClipping(s){let c=this.context.gl;return new An({func:c.EQUAL,mask:255},this._tileClippingMaskIDs[s.key],0,c.KEEP,c.KEEP,c.REPLACE)}getStencilConfigForOverlapAndUpdateStencilID(s){let c=this.context.gl,g=s.sort((I,P)=>P.overscaledZ-I.overscaledZ),y=g[g.length-1].overscaledZ,E=g[0].overscaledZ-y+1;if(E>1){this.currentStencilSource=void 0,this.nextStencilID+E>256&&this.clearStencil();let I={};for(let P=0;P<E;P++)I[P+y]=new An({func:c.GEQUAL,mask:255},P+this.nextStencilID,255,c.KEEP,c.KEEP,c.REPLACE);return this.nextStencilID+=E,[I,g]}return[{[y]:An.disabled},g]}stencilConfigForOverlapTwoPass(s){let c=this.context.gl,g=s.sort((I,P)=>P.overscaledZ-I.overscaledZ),y=g[g.length-1].overscaledZ,E=g[0].overscaledZ-y+1;if(this.clearStencil(),E>1){let I={},P={};for(let L=0;L<E;L++)I[L+y]=new An({func:c.GREATER,mask:255},E+1+L,255,c.KEEP,c.KEEP,c.REPLACE),P[L+y]=new An({func:c.GREATER,mask:255},1+L,255,c.KEEP,c.KEEP,c.REPLACE);return this.nextStencilID=2*E+1,[I,P,g]}return this.nextStencilID=3,[{[y]:new An({func:c.GREATER,mask:255},2,255,c.KEEP,c.KEEP,c.REPLACE)},{[y]:new An({func:c.GREATER,mask:255},1,255,c.KEEP,c.KEEP,c.REPLACE)},g]}colorModeForRenderPass(){let s=this.context.gl;return this._showOverdrawInspector?new Ko([s.CONSTANT_COLOR,s.ONE],new i.b7(.125,.125,.125,0),[!0,!0,!0,!0]):this.renderPass==="opaque"?Ko.unblended:Ko.alphaBlended}getDepthModeForSublayer(s,c,g){if(!this.opaquePassEnabledForLayer())return vn.disabled;let y=1-((1+this.currentLayer)*this.numSublayers+s)*this.depthEpsilon;return new vn(g||this.context.gl.LEQUAL,c,[y,y])}getDepthModeFor3D(){return new vn(this.context.gl.LEQUAL,vn.ReadWrite,this.depthRangeFor3D)}opaquePassEnabledForLayer(){return this.currentLayer<this.opaquePassCutoff}render(s,c){var g,y;this.style=s,this.options=c,this.lineAtlas=s.lineAtlas,this.imageManager=s.imageManager,this.glyphManager=s.glyphManager,this.symbolFadeChange=s.placement.symbolFadeChange(v.now()),this.imageManager.beginFrame();let E=this.style._order,I=this.style.sourceCaches,P={},L={},z={},U={isRenderingToTexture:!1,isRenderingGlobe:((g=s.projection)===null||g===void 0?void 0:g.transitionState)>0};for(let H in I){let te=I[H];te.used&&te.prepare(this.context),P[H]=te.getVisibleCoordinates(!1),L[H]=P[H].slice().reverse(),z[H]=te.getVisibleCoordinates(!0).reverse()}this.opaquePassCutoff=1/0;for(let H=0;H<E.length;H++)if(this.style._layers[E[H]].is3D()){this.opaquePassCutoff=H;break}this.maybeDrawDepthAndCoords(!1),this.renderToTexture&&(this.renderToTexture.prepareForRender(this.style,this.transform.zoom),this.opaquePassCutoff=0),this.renderPass="offscreen";for(let H of E){let te=this.style._layers[H];if(!te.hasOffscreenPass()||te.isHidden(this.transform.zoom))continue;let ae=L[te.source];(te.type==="custom"||ae.length)&&this.renderLayer(this,I[te.source],te,ae,U)}if((y=this.style.projection)===null||y===void 0||y.updateGPUdependent({context:this.context,useProgram:H=>this.useProgram(H)}),this.context.viewport.set([0,0,this.width,this.height]),this.context.bindFramebuffer.set(null),this.context.clear({color:c.showOverdrawInspector?i.b7.black:i.b7.transparent,depth:1}),this.clearStencil(),this.style.sky&&function(H,te){let ae=H.context,be=ae.gl,_e=((He,Be,rt)=>{let ht=Math.cos(Be.rollInRadians),lt=Math.sin(Be.rollInRadians),ut=Ye(Be),ft=Be.getProjectionData({overscaledTileID:null,applyGlobeMatrix:!0,applyTerrainMatrix:!0}).projectionTransition;return{u_sky_color:He.properties.get("sky-color"),u_horizon_color:He.properties.get("horizon-color"),u_horizon:[(Be.width/2-ut*lt)*rt,(Be.height/2+ut*ht)*rt],u_horizon_normal:[-lt,ht],u_sky_horizon_blend:He.properties.get("sky-horizon-blend")*Be.height/2*rt,u_sky_blend:ft}})(te,H.style.map.transform,H.pixelRatio),xe=new vn(be.LEQUAL,vn.ReadWrite,[0,1]),Ae=An.disabled,ke=H.colorModeForRenderPass(),Le=H.useProgram("sky"),Fe=Eu(ae,te);Le.draw(ae,be.TRIANGLES,xe,Ae,ke,to.disabled,_e,null,void 0,"sky",Fe.vertexBuffer,Fe.indexBuffer,Fe.segments)}(this,this.style.sky),this._showOverdrawInspector=c.showOverdrawInspector,this.depthRangeFor3D=[0,1-(s._order.length+2)*this.numSublayers*this.depthEpsilon],!this.renderToTexture)for(this.renderPass="opaque",this.currentLayer=E.length-1;this.currentLayer>=0;this.currentLayer--){let H=this.style._layers[E[this.currentLayer]],te=I[H.source],ae=P[H.source];this._renderTileClippingMasks(H,ae,!1),this.renderLayer(this,te,H,ae,U)}this.renderPass="translucent";let W=!1;for(this.currentLayer=0;this.currentLayer<E.length;this.currentLayer++){let H=this.style._layers[E[this.currentLayer]],te=I[H.source];if(this.renderToTexture&&this.renderToTexture.renderLayer(H,U))continue;this.opaquePassEnabledForLayer()||W||(W=!0,U.isRenderingGlobe&&!this.style.map.terrain&&this._renderTilesDepthBuffer());let ae=(H.type==="symbol"?z:L)[H.source];this._renderTileClippingMasks(H,P[H.source],!!this.renderToTexture),this.renderLayer(this,te,H,ae,U)}if(U.isRenderingGlobe&&function(H,te,ae){let be=H.context,_e=be.gl,xe=H.useProgram("atmosphere"),Ae=new vn(_e.LEQUAL,vn.ReadOnly,[0,1]),ke=H.transform,Le=function(ft,Yt){let Ht=ft.properties.get("position"),Ct=[-Ht.x,-Ht.y,-Ht.z],br=i.ad(new Float64Array(16));return ft.properties.get("anchor")==="map"&&(i.a_(br,br,Yt.rollInRadians),i.a$(br,br,-Yt.pitchInRadians),i.a_(br,br,Yt.bearingInRadians),i.a$(br,br,Yt.center.lat*Math.PI/180),i.bp(br,br,-Yt.center.lng*Math.PI/180)),i.bZ(Ct,Ct,br),Ct}(ae,H.transform),Fe=ke.getProjectionData({overscaledTileID:null,applyGlobeMatrix:!0,applyTerrainMatrix:!0}),He=te.properties.get("atmosphere-blend")*Fe.projectionTransition;if(He===0)return;let Be=Tm(ke.worldSize,ke.center.lat),rt=ke.inverseProjectionMatrix,ht=new Float64Array(4);ht[3]=1,i.at(ht,ht,ke.modelViewProjectionMatrix),ht[0]/=ht[3],ht[1]/=ht[3],ht[2]/=ht[3],ht[3]=1,i.at(ht,ht,rt),ht[0]/=ht[3],ht[1]/=ht[3],ht[2]/=ht[3],ht[3]=1;let lt=((ft,Yt,Ht,Ct,br)=>({u_sun_pos:ft,u_atmosphere_blend:Yt,u_globe_position:Ht,u_globe_radius:Ct,u_inv_proj_matrix:br}))(Le,He,[ht[0],ht[1],ht[2]],Be,rt),ut=Eu(be,te);xe.draw(be,_e.TRIANGLES,Ae,An.disabled,Ko.alphaBlended,to.disabled,lt,null,null,"atmosphere",ut.vertexBuffer,ut.indexBuffer,ut.segments)}(this,this.style.sky,this.style.light),this.options.showTileBoundaries){let H=function(te,ae){let be=null,_e=Object.values(te._layers).flatMap(Le=>Le.source&&!Le.isHidden(ae)?[te.sourceCaches[Le.source]]:[]),xe=_e.filter(Le=>Le.getSource().type==="vector"),Ae=_e.filter(Le=>Le.getSource().type!=="vector"),ke=Le=>{(!be||be.getSource().maxzoom<Le.getSource().maxzoom)&&(be=Le)};return xe.forEach(Le=>ke(Le)),be||Ae.forEach(Le=>ke(Le)),be}(this.style,this.transform.zoom);H&&function(te,ae,be){for(let _e=0;_e<be.length;_e++)aa(te,ae,be[_e])}(this,H,H.getVisibleCoordinates())}this.options.showPadding&&function(H){let te=H.transform.padding;gx(H,H.transform.height-(te.top||0),3,hx),gx(H,te.bottom||0,3,AT),CN(H,te.left||0,3,IN),CN(H,H.transform.width-(te.right||0),3,MN);let ae=H.transform.centerPoint;(function(be,_e,xe,Ae){a1(be,_e-1,xe-10,2,20,Ae),a1(be,_e-10,xe-1,20,2,Ae)})(H,ae.x,H.transform.height-ae.y,mx)}(this),this.context.setDefault()}maybeDrawDepthAndCoords(s){if(!this.style||!this.style.map||!this.style.map.terrain)return;let c=this.terrainFacilitator.matrix,g=this.transform.modelViewProjectionMatrix,y=this.terrainFacilitator.dirty;y||(y=s?!i.c0(c,g):!i.c1(c,g)),y||(y=this.style.map.terrain.sourceCache.anyTilesAfterTime(this.terrainFacilitator.renderTime)),y&&(i.c2(c,g),this.terrainFacilitator.renderTime=Date.now(),this.terrainFacilitator.dirty=!1,function(E,I){let P=E.context,L=P.gl,z=E.transform,U=Ko.unblended,W=new vn(L.LEQUAL,vn.ReadWrite,[0,1]),H=I.sourceCache.getRenderableTiles(),te=E.useProgram("terrainDepth");P.bindFramebuffer.set(I.getFramebuffer("depth").framebuffer),P.viewport.set([0,0,E.width/devicePixelRatio,E.height/devicePixelRatio]),P.clear({color:i.b7.transparent,depth:1});for(let ae of H){let be=I.getTerrainMesh(ae.tileID),_e=I.getTerrainData(ae.tileID),xe=z.getProjectionData({overscaledTileID:ae.tileID,applyTerrainMatrix:!1,applyGlobeMatrix:!0}),Ae={u_ele_delta:I.getMeshFrameDelta(z.zoom)};te.draw(P,L.TRIANGLES,W,An.disabled,U,to.backCCW,Ae,_e,xe,"terrain",be.vertexBuffer,be.indexBuffer,be.segments)}P.bindFramebuffer.set(null),P.viewport.set([0,0,E.width,E.height])}(this,this.style.map.terrain),function(E,I){let P=E.context,L=P.gl,z=E.transform,U=Ko.unblended,W=new vn(L.LEQUAL,vn.ReadWrite,[0,1]),H=I.getCoordsTexture(),te=I.sourceCache.getRenderableTiles(),ae=E.useProgram("terrainCoords");P.bindFramebuffer.set(I.getFramebuffer("coords").framebuffer),P.viewport.set([0,0,E.width/devicePixelRatio,E.height/devicePixelRatio]),P.clear({color:i.b7.transparent,depth:1}),I.coordsIndex=[];for(let be of te){let _e=I.getTerrainMesh(be.tileID),xe=I.getTerrainData(be.tileID);P.activeTexture.set(L.TEXTURE0),L.bindTexture(L.TEXTURE_2D,H.texture);let Ae={u_terrain_coords_id:(255-I.coordsIndex.length)/255,u_texture:0,u_ele_delta:I.getMeshFrameDelta(z.zoom)},ke=z.getProjectionData({overscaledTileID:be.tileID,applyTerrainMatrix:!1,applyGlobeMatrix:!0});ae.draw(P,L.TRIANGLES,W,An.disabled,U,to.backCCW,Ae,xe,ke,"terrain",_e.vertexBuffer,_e.indexBuffer,_e.segments),I.coordsIndex.push(be.tileID.key)}P.bindFramebuffer.set(null),P.viewport.set([0,0,E.width,E.height])}(this,this.style.map.terrain))}renderLayer(s,c,g,y,E){g.isHidden(this.transform.zoom)||(g.type==="background"||g.type==="custom"||(y||[]).length)&&(this.id=g.id,i.c3(g)?function(I,P,L,z,U,W){if(I.renderPass!=="translucent")return;let{isRenderingToTexture:H}=W,te=An.disabled,ae=I.colorModeForRenderPass();(L._unevaluatedLayout.hasValue("text-variable-anchor")||L._unevaluatedLayout.hasValue("text-variable-anchor-offset"))&&function(be,_e,xe,Ae,ke,Le,Fe,He,Be){let rt=_e.transform,ht=_e.style.map.terrain,lt=ke==="map",ut=Le==="map";for(let ft of be){let Yt=Ae.getTile(ft),Ht=Yt.getBucket(xe);if(!Ht||!Ht.text||!Ht.text.segments.get().length)continue;let Ct=i.ak(Ht.textSizeData,rt.zoom),br=i.az(Yt,1,_e.transform.zoom),On=Xt(lt,_e.transform,br),ro=xe.layout.get("icon-text-fit")!=="none"&&Ht.hasIconData();if(Ct){let ji=Math.pow(2,rt.zoom-Yt.tileID.overscaledZ),ti=ht?(qi,zi)=>ht.getElevation(ft,qi,zi):null;SN(Ht,lt,ut,Be,rt,On,ji,Ct,ro,i.aA(rt,Yt,Fe,He),ft.toUnwrapped(),ti)}}}(z,I,L,P,L.layout.get("text-rotation-alignment"),L.layout.get("text-pitch-alignment"),L.paint.get("text-translate"),L.paint.get("text-translate-anchor"),U),L.paint.get("icon-opacity").constantOr(1)!==0&&cx(I,P,L,z,!1,L.paint.get("icon-translate"),L.paint.get("icon-translate-anchor"),L.layout.get("icon-rotation-alignment"),L.layout.get("icon-pitch-alignment"),L.layout.get("icon-keep-upright"),te,ae,H),L.paint.get("text-opacity").constantOr(1)!==0&&cx(I,P,L,z,!0,L.paint.get("text-translate"),L.paint.get("text-translate-anchor"),L.layout.get("text-rotation-alignment"),L.layout.get("text-pitch-alignment"),L.layout.get("text-keep-upright"),te,ae,H),P.map.showCollisionBoxes&&(TT(I,P,L,z,!0),TT(I,P,L,z,!1))}(s,c,g,y,this.style.placement.variableOffsets,E):i.c4(g)?function(I,P,L,z,U){if(I.renderPass!=="translucent")return;let{isRenderingToTexture:W}=U,H=L.paint.get("circle-opacity"),te=L.paint.get("circle-stroke-width"),ae=L.paint.get("circle-stroke-opacity"),be=!L.layout.get("circle-sort-key").isConstant();if(H.constantOr(1)===0&&(te.constantOr(1)===0||ae.constantOr(1)===0))return;let _e=I.context,xe=_e.gl,Ae=I.transform,ke=I.getDepthModeForSublayer(0,vn.ReadOnly),Le=An.disabled,Fe=I.colorModeForRenderPass(),He=[],Be=Ae.getCircleRadiusCorrection();for(let rt=0;rt<z.length;rt++){let ht=z[rt],lt=P.getTile(ht),ut=lt.getBucket(L);if(!ut)continue;let ft=L.paint.get("circle-translate"),Yt=L.paint.get("circle-translate-anchor"),Ht=i.aA(Ae,lt,ft,Yt),Ct=ut.programConfigurations.get(L.id),br=I.useProgram("circle",Ct),On=ut.layoutVertexBuffer,ro=ut.indexBuffer,ji=I.style.map.terrain&&I.style.map.terrain.getTerrainData(ht),ti={programConfiguration:Ct,program:br,layoutVertexBuffer:On,indexBuffer:ro,uniformValues:X0(I,lt,L,Ht,Be),terrainData:ji,projectionData:Ae.getProjectionData({overscaledTileID:ht,applyGlobeMatrix:!W,applyTerrainMatrix:!0})};if(be){let qi=ut.segments.get();for(let zi of qi)He.push({segments:new i.aJ([zi]),sortKey:zi.sortKey,state:ti})}else He.push({segments:ut.segments,sortKey:0,state:ti})}be&&He.sort((rt,ht)=>rt.sortKey-ht.sortKey);for(let rt of He){let{programConfiguration:ht,program:lt,layoutVertexBuffer:ut,indexBuffer:ft,uniformValues:Yt,terrainData:Ht,projectionData:Ct}=rt.state;lt.draw(_e,xe.TRIANGLES,ke,Le,Fe,to.backCCW,Yt,Ht,Ct,L.id,ut,ft,rt.segments,L.paint,I.transform.zoom,ht)}}(s,c,g,y,E):i.c5(g)?function(I,P,L,z,U){if(L.paint.get("heatmap-opacity")===0)return;let W=I.context,{isRenderingToTexture:H,isRenderingGlobe:te}=U;if(I.style.map.terrain){for(let ae of z){let be=P.getTile(ae);P.hasRenderableParent(ae)||(I.renderPass==="offscreen"?px(I,be,L,ae,te):I.renderPass==="translucent"&&IT(I,L,ae,H,te))}W.viewport.set([0,0,I.width,I.height])}else I.renderPass==="offscreen"?function(ae,be,_e,xe){let Ae=ae.context,ke=Ae.gl,Le=ae.transform,Fe=An.disabled,He=new Ko([ke.ONE,ke.ONE],i.b7.transparent,[!0,!0,!0,!0]);(function(Be,rt,ht){let lt=Be.gl;Be.activeTexture.set(lt.TEXTURE1),Be.viewport.set([0,0,rt.width/4,rt.height/4]);let ut=ht.heatmapFbos.get(i.bW);ut?(lt.bindTexture(lt.TEXTURE_2D,ut.colorAttachment.get()),Be.bindFramebuffer.set(ut.framebuffer)):(ut=fx(Be,rt.width/4,rt.height/4),ht.heatmapFbos.set(i.bW,ut))})(Ae,ae,_e),Ae.clear({color:i.b7.transparent});for(let Be=0;Be<xe.length;Be++){let rt=xe[Be];if(be.hasRenderableParent(rt))continue;let ht=be.getTile(rt),lt=ht.getBucket(_e);if(!lt)continue;let ut=lt.programConfigurations.get(_e.id),ft=ae.useProgram("heatmap",ut),Yt=Le.getProjectionData({overscaledTileID:rt,applyGlobeMatrix:!0,applyTerrainMatrix:!1}),Ht=Le.getCircleRadiusCorrection();ft.draw(Ae,ke.TRIANGLES,vn.disabled,Fe,He,to.backCCW,Cm(ht,Le.zoom,_e.paint.get("heatmap-intensity"),Ht),null,Yt,_e.id,lt.layoutVertexBuffer,lt.indexBuffer,lt.segments,_e.paint,Le.zoom,ut)}Ae.viewport.set([0,0,ae.width,ae.height])}(I,P,L,z):I.renderPass==="translucent"&&function(ae,be){let _e=ae.context,xe=_e.gl;_e.setColorMode(ae.colorModeForRenderPass());let Ae=be.heatmapFbos.get(i.bW);Ae&&(_e.activeTexture.set(xe.TEXTURE0),xe.bindTexture(xe.TEXTURE_2D,Ae.colorAttachment.get()),_e.activeTexture.set(xe.TEXTURE1),MT(_e,be).bind(xe.LINEAR,xe.CLAMP_TO_EDGE),ae.useProgram("heatmapTexture").draw(_e,xe.TRIANGLES,vn.disabled,An.disabled,ae.colorModeForRenderPass(),to.disabled,aN(ae,be,0,1),null,null,be.id,ae.viewportBuffer,ae.quadTriangleIndexBuffer,ae.viewportSegments,be.paint,ae.transform.zoom))}(I,L)}(s,c,g,y,E):i.c6(g)?function(I,P,L,z,U){if(I.renderPass!=="translucent")return;let{isRenderingToTexture:W}=U,H=L.paint.get("line-opacity"),te=L.paint.get("line-width");if(H.constantOr(1)===0||te.constantOr(1)===0)return;let ae=I.getDepthModeForSublayer(0,vn.ReadOnly),be=I.colorModeForRenderPass(),_e=L.paint.get("line-dasharray"),xe=L.paint.get("line-pattern"),Ae=xe.constantOr(1),ke=L.paint.get("line-gradient"),Le=L.getCrossfadeParameters(),Fe=Ae?"linePattern":_e?"lineSDF":ke?"lineGradient":"line",He=I.context,Be=He.gl,rt=I.transform,ht=!0;for(let lt of z){let ut=P.getTile(lt);if(Ae&&!ut.patternsLoaded())continue;let ft=ut.getBucket(L);if(!ft)continue;let Yt=ft.programConfigurations.get(L.id),Ht=I.context.program.get(),Ct=I.useProgram(Fe,Yt),br=ht||Ct.program!==Ht,On=I.style.map.terrain&&I.style.map.terrain.getTerrainData(lt),ro=xe.constantOr(null);if(ro&&ut.imageAtlas){let ii=ut.imageAtlas,Eo=ii.patternPositions[ro.to.toString()],za=ii.patternPositions[ro.from.toString()];Eo&&za&&Yt.setConstantPatternPositions(Eo,za)}let ji=rt.getProjectionData({overscaledTileID:lt,applyGlobeMatrix:!W,applyTerrainMatrix:!0}),ti=rt.getPixelScale(),qi=Ae?cN(I,ut,L,ti,Le):_e?pN(I,ut,L,ti,_e,Le):ke?uN(I,ut,L,ti,ft.lineClipsArray.length):Q0(I,ut,L,ti);if(Ae)He.activeTexture.set(Be.TEXTURE0),ut.imageAtlasTexture.bind(Be.LINEAR,Be.CLAMP_TO_EDGE),Yt.updatePaintBuffers(Le);else if(_e&&(br||I.lineAtlas.dirty))He.activeTexture.set(Be.TEXTURE0),I.lineAtlas.bind(He);else if(ke){let ii=ft.gradients[L.id],Eo=ii.texture;if(L.gradientVersion!==ii.version){let za=256;if(L.stepInterpolant){let os=P.getSource().maxzoom,ws=lt.canonical.z===os?Math.ceil(1<<I.transform.maxZoom-lt.canonical.z):1;za=i.ae(i.bX(ft.maxLineLength/i.Z*1024*ws),256,He.maxTextureSize)}ii.gradient=i.bY({expression:L.gradientExpression(),evaluationKey:"lineProgress",resolution:za,image:ii.gradient||void 0,clips:ft.lineClipsArray}),ii.texture?ii.texture.update(ii.gradient):ii.texture=new Q(He,ii.gradient,Be.RGBA),ii.version=L.gradientVersion,Eo=ii.texture}He.activeTexture.set(Be.TEXTURE0),Eo.bind(L.stepInterpolant?Be.NEAREST:Be.LINEAR,Be.CLAMP_TO_EDGE)}let zi=I.stencilModeForClipping(lt);Ct.draw(He,Be.TRIANGLES,ae,zi,be,to.disabled,qi,On,ji,L.id,ft.layoutVertexBuffer,ft.indexBuffer,ft.segments,L.paint,I.transform.zoom,Yt,ft.layoutVertexBuffer2),ht=!1}}(s,c,g,y,E):i.c7(g)?function(I,P,L,z,U){let W=L.paint.get("fill-color"),H=L.paint.get("fill-opacity");if(H.constantOr(1)===0)return;let{isRenderingToTexture:te}=U,ae=I.colorModeForRenderPass(),be=L.paint.get("fill-pattern"),_e=I.opaquePassEnabledForLayer()&&!be.constantOr(1)&&W.constantOr(i.b7.transparent).a===1&&H.constantOr(0)===1?"opaque":"translucent";if(I.renderPass===_e){let xe=I.getDepthModeForSublayer(1,I.renderPass==="opaque"?vn.ReadWrite:vn.ReadOnly);n1(I,P,L,z,xe,ae,!1,te)}if(I.renderPass==="translucent"&&L.paint.get("fill-antialias")){let xe=I.getDepthModeForSublayer(L.getPaintProperty("fill-outline-color")?2:0,vn.ReadOnly);n1(I,P,L,z,xe,ae,!0,te)}}(s,c,g,y,E):i.c8(g)?function(I,P,L,z,U){let W=L.paint.get("fill-extrusion-opacity");if(W===0)return;let{isRenderingToTexture:H}=U;if(I.renderPass==="translucent"){let te=new vn(I.context.gl.LEQUAL,vn.ReadWrite,I.depthRangeFor3D);if(W!==1||L.paint.get("fill-extrusion-pattern").constantOr(1))o1(I,P,L,z,te,An.disabled,Ko.disabled,H),o1(I,P,L,z,te,I.stencilModeFor3D(),I.colorModeForRenderPass(),H);else{let ae=I.colorModeForRenderPass();o1(I,P,L,z,te,An.disabled,ae,H)}}}(s,c,g,y,E):i.c9(g)?function(I,P,L,z,U){if(I.renderPass!=="offscreen"&&I.renderPass!=="translucent")return;let{isRenderingToTexture:W}=U,H=I.context,te=I.style.projection.useSubdivision,ae=I.getDepthModeForSublayer(0,vn.ReadOnly),be=I.colorModeForRenderPass();if(I.renderPass==="offscreen")(function(_e,xe,Ae,ke,Le,Fe,He){let Be=_e.context,rt=Be.gl;for(let ht of Ae){let lt=xe.getTile(ht),ut=lt.dem;if(!ut||!ut.data||!lt.needsHillshadePrepare)continue;let ft=ut.dim,Yt=ut.stride,Ht=ut.getPixels();if(Be.activeTexture.set(rt.TEXTURE1),Be.pixelStoreUnpackPremultiplyAlpha.set(!1),lt.demTexture=lt.demTexture||_e.getTileTexture(Yt),lt.demTexture){let br=lt.demTexture;br.update(Ht,{premultiply:!1}),br.bind(rt.NEAREST,rt.CLAMP_TO_EDGE)}else lt.demTexture=new Q(Be,Ht,rt.RGBA,{premultiply:!1}),lt.demTexture.bind(rt.NEAREST,rt.CLAMP_TO_EDGE);Be.activeTexture.set(rt.TEXTURE0);let Ct=lt.fbo;if(!Ct){let br=new Q(Be,{width:ft,height:ft,data:null},rt.RGBA);br.bind(rt.LINEAR,rt.CLAMP_TO_EDGE),Ct=lt.fbo=Be.createFramebuffer(ft,ft,!0,!1),Ct.colorAttachment.set(br.texture)}Be.bindFramebuffer.set(Ct.framebuffer),Be.viewport.set([0,0,ft,ft]),_e.useProgram("hillshadePrepare").draw(Be,rt.TRIANGLES,Le,Fe,He,to.disabled,vU(lt.tileID,ut),null,null,ke.id,_e.rasterBoundsBuffer,_e.quadTriangleIndexBuffer,_e.rasterBoundsSegments),lt.needsHillshadePrepare=!1}})(I,P,z,L,ae,An.disabled,be),H.viewport.set([0,0,I.width,I.height]);else if(I.renderPass==="translucent")if(te){let[_e,xe,Ae]=I.stencilConfigForOverlapTwoPass(z);CT(I,P,L,Ae,_e,ae,be,!1,W),CT(I,P,L,Ae,xe,ae,be,!0,W)}else{let[_e,xe]=I.getStencilConfigForOverlapAndUpdateStencilID(z);CT(I,P,L,xe,_e,ae,be,!1,W)}}(s,c,g,y,E):i.ca(g)?function(I,P,L,z,U){if(I.renderPass!=="translucent"||L.paint.get("raster-opacity")===0||!z.length)return;let{isRenderingToTexture:W}=U,H=P.getSource(),te=I.style.projection.useSubdivision;if(H instanceof Er)dx(I,P,L,z,null,!1,!1,H.tileCoords,H.flippedWindingOrder,W);else if(te){let[ae,be,_e]=I.stencilConfigForOverlapTwoPass(z);dx(I,P,L,_e,ae,!1,!0,i1,!1,W),dx(I,P,L,_e,be,!0,!0,i1,!1,W)}else{let[ae,be]=I.getStencilConfigForOverlapAndUpdateStencilID(z);dx(I,P,L,be,ae,!1,!0,i1,!1,W)}}(s,c,g,y,E):i.cb(g)?function(I,P,L,z,U){let W=L.paint.get("background-color"),H=L.paint.get("background-opacity");if(H===0)return;let{isRenderingToTexture:te}=U,ae=I.context,be=ae.gl,_e=I.style.projection,xe=I.transform,Ae=xe.tileSize,ke=L.paint.get("background-pattern");if(I.isPatternMissing(ke))return;let Le=!ke&&W.a===1&&H===1&&I.opaquePassEnabledForLayer()?"opaque":"translucent";if(I.renderPass!==Le)return;let Fe=An.disabled,He=I.getDepthModeForSublayer(0,Le==="opaque"?vn.ReadWrite:vn.ReadOnly),Be=I.colorModeForRenderPass(),rt=I.useProgram(ke?"backgroundPattern":"background"),ht=z||Ie(xe,{tileSize:Ae,terrain:I.style.map.terrain});ke&&(ae.activeTexture.set(be.TEXTURE0),I.imageManager.bind(I.context));let lt=L.getCrossfadeParameters();for(let ut of ht){let ft=xe.getProjectionData({overscaledTileID:ut,applyGlobeMatrix:!te,applyTerrainMatrix:!0}),Yt=ke?_U(H,I,ke,{tileID:ut,tileSize:Ae},lt):yU(H,W),Ht=I.style.map.terrain&&I.style.map.terrain.getTerrainData(ut),Ct=_e.getMeshFromTileID(ae,ut.canonical,!1,!0,"raster");rt.draw(ae,be.TRIANGLES,He,Fe,Be,to.backCCW,Yt,Ht,ft,L.id,Ct.vertexBuffer,Ct.indexBuffer,Ct.segments)}}(s,0,g,y,E):i.cc(g)&&function(I,P,L,z){let{isRenderingGlobe:U}=z,W=I.context,H=L.implementation,te=I.style.projection,ae=I.transform,be=ae.getProjectionDataForCustomLayer(U),_e={farZ:ae.farZ,nearZ:ae.nearZ,fov:ae.fov*Math.PI/180,modelViewProjectionMatrix:ae.modelViewProjectionMatrix,projectionMatrix:ae.projectionMatrix,shaderData:{variantName:te.shaderVariantName,vertexShaderPrelude:`const float PI = 3.141592653589793;
uniform mat4 u_projection_matrix;
${te.shaderPreludeCode.vertexSource}`,define:te.shaderDefine},defaultProjectionData:be},xe=H.renderingMode?H.renderingMode:"2d";if(I.renderPass==="offscreen"){let Ae=H.prerender;Ae&&(I.setCustomLayerDefaults(),W.setColorMode(I.colorModeForRenderPass()),Ae.call(H,W.gl,_e),W.setDirty(),I.setBaseState())}else if(I.renderPass==="translucent"){I.setCustomLayerDefaults(),W.setColorMode(I.colorModeForRenderPass()),W.setStencilMode(An.disabled);let Ae=xe==="3d"?I.getDepthModeFor3D():I.getDepthModeForSublayer(0,vn.ReadOnly);W.setDepthMode(Ae),H.render(W.gl,_e),W.setDirty(),I.setBaseState(),W.bindFramebuffer.set(null)}}(s,0,g,E))}saveTileTexture(s){let c=this._tileTextures[s.size[0]];c?c.push(s):this._tileTextures[s.size[0]]=[s]}getTileTexture(s){let c=this._tileTextures[s];return c&&c.length>0?c.pop():null}isPatternMissing(s){if(!s)return!1;if(!s.from||!s.to)return!0;let c=this.imageManager.getPattern(s.from.toString()),g=this.imageManager.getPattern(s.to.toString());return!c||!g}useProgram(s,c,g=!1,y=[]){this.cache=this.cache||{};let E=!!this.style.map.terrain,I=this.style.projection,P=g?bo.projectionMercator:I.shaderPreludeCode,L=g?Wl:I.shaderDefine,z=s+(c?c.cacheKey:"")+`/${g?mn:I.shaderVariantName}`+(this._showOverdrawInspector?"/overdraw":"")+(E?"/terrain":"")+(y?`/${y.join("/")}`:"");return this.cache[z]||(this.cache[z]=new Zb(this.context,bo[s],c,mN[s],this._showOverdrawInspector,E,P,L,y)),this.cache[z]}setCustomLayerDefaults(){this.context.unbindVAO(),this.context.cullFace.setDefault(),this.context.activeTexture.setDefault(),this.context.pixelStoreUnpack.setDefault(),this.context.pixelStoreUnpackPremultiplyAlpha.setDefault(),this.context.pixelStoreUnpackFlipY.setDefault()}setBaseState(){let s=this.context.gl;this.context.cullFace.set(!1),this.context.viewport.set([0,0,this.width,this.height]),this.context.blendEquation.set(s.FUNC_ADD)}initDebugOverlayCanvas(){this.debugOverlayCanvas==null&&(this.debugOverlayCanvas=document.createElement("canvas"),this.debugOverlayCanvas.width=512,this.debugOverlayCanvas.height=512,this.debugOverlayTexture=new Q(this.context,this.debugOverlayCanvas,this.context.gl.RGBA))}destroy(){this.debugOverlayTexture&&this.debugOverlayTexture.destroy()}overLimit(){let{drawingBufferWidth:s,drawingBufferHeight:c}=this.context.gl;return this.width!==s||this.height!==c}}function s1(w,s){let c,g=!1,y=null,E=null,I=()=>{y=null,g&&(w.apply(E,c),y=setTimeout(I,s),g=!1)};return(...P)=>(g=!0,E=this,c=P,y||I(),y)}class PT{constructor(s){this._getCurrentHash=()=>{let c=window.location.hash.replace("#","");if(this._hashName){let g;return c.split("&").map(y=>y.split("=")).forEach(y=>{y[0]===this._hashName&&(g=y)}),(g&&g[1]||"").split("/")}return c.split("/")},this._onHashChange=()=>{let c=this._getCurrentHash();if(!this._isValidHash(c))return!1;let g=this._map.dragRotate.isEnabled()&&this._map.touchZoomRotate.isEnabled()?+(c[3]||0):this._map.getBearing();return this._map.jumpTo({center:[+c[2],+c[1]],zoom:+c[0],bearing:g,pitch:+(c[4]||0)}),!0},this._updateHashUnthrottled=()=>{let c=window.location.href.replace(/(#.*)?$/,this.getHashString());window.history.replaceState(window.history.state,null,c)},this._removeHash=()=>{let c=this._getCurrentHash();if(c.length===0)return;let g=c.join("/"),y=g;y.split("&").length>0&&(y=y.split("&")[0]),this._hashName&&(y=`${this._hashName}=${g}`);let E=window.location.hash.replace(y,"");E.startsWith("#&")?E=E.slice(0,1)+E.slice(2):E==="#"&&(E="");let I=window.location.href.replace(/(#.+)?$/,E);I=I.replace("&&","&"),window.history.replaceState(window.history.state,null,I)},this._updateHash=s1(this._updateHashUnthrottled,300),this._hashName=s&&encodeURIComponent(s)}addTo(s){return this._map=s,addEventListener("hashchange",this._onHashChange,!1),this._map.on("moveend",this._updateHash),this}remove(){return removeEventListener("hashchange",this._onHashChange,!1),this._map.off("moveend",this._updateHash),clearTimeout(this._updateHash()),this._removeHash(),delete this._map,this}getHashString(s){let c=this._map.getCenter(),g=Math.round(100*this._map.getZoom())/100,y=Math.ceil((g*Math.LN2+Math.log(512/360/.5))/Math.LN10),E=Math.pow(10,y),I=Math.round(c.lng*E)/E,P=Math.round(c.lat*E)/E,L=this._map.getBearing(),z=this._map.getPitch(),U="";if(U+=s?`/${I}/${P}/${g}`:`${g}/${P}/${I}`,(L||z)&&(U+="/"+Math.round(10*L)/10),z&&(U+=`/${Math.round(z)}`),this._hashName){let W=this._hashName,H=!1,te=window.location.hash.slice(1).split("&").map(ae=>{let be=ae.split("=")[0];return be===W?(H=!0,`${be}=${U}`):ae}).filter(ae=>ae);return H||te.push(`${W}=${U}`),`#${te.join("&")}`}return`#${U}`}_isValidHash(s){if(s.length<3||s.some(isNaN))return!1;try{new i.Q(+s[2],+s[1])}catch(E){return!1}let c=+s[0],g=+(s[3]||0),y=+(s[4]||0);return c>=this._map.getMinZoom()&&c<=this._map.getMaxZoom()&&g>=-180&&g<=180&&y>=this._map.getMinPitch()&&y<=this._map.getMaxPitch()}}let Sp={linearity:.3,easing:i.cd(0,0,.3,1)},NT=i.e({deceleration:2500,maxSpeed:1400},Sp),l1=i.e({deceleration:20,maxSpeed:1400},Sp),DT=i.e({deceleration:1e3,maxSpeed:360},Sp),AN=i.e({deceleration:1e3,maxSpeed:90},Sp),ON=i.e({deceleration:1e3,maxSpeed:360},Sp);class PN{constructor(s){this._map=s,this.clear()}clear(){this._inertiaBuffer=[]}record(s){this._drainInertiaBuffer(),this._inertiaBuffer.push({time:v.now(),settings:s})}_drainInertiaBuffer(){let s=this._inertiaBuffer,c=v.now();for(;s.length>0&&c-s[0].time>160;)s.shift()}_onMoveEnd(s){if(this._drainInertiaBuffer(),this._inertiaBuffer.length<2)return;let c={zoom:0,bearing:0,pitch:0,roll:0,pan:new i.P(0,0),pinchAround:void 0,around:void 0};for(let{settings:E}of this._inertiaBuffer)c.zoom+=E.zoomDelta||0,c.bearing+=E.bearingDelta||0,c.pitch+=E.pitchDelta||0,c.roll+=E.rollDelta||0,E.panDelta&&c.pan._add(E.panDelta),E.around&&(c.around=E.around),E.pinchAround&&(c.pinchAround=E.pinchAround);let g=this._inertiaBuffer[this._inertiaBuffer.length-1].time-this._inertiaBuffer[0].time,y={};if(c.pan.mag()){let E=cv(c.pan.mag(),g,i.e({},NT,s||{})),I=c.pan.mult(E.amount/c.pan.mag()),P=this._map.cameraHelper.handlePanInertia(I,this._map.transform);y.center=P.easingCenter,y.offset=P.easingOffset,uv(y,E)}if(c.zoom){let E=cv(c.zoom,g,l1);y.zoom=this._map.transform.zoom+E.amount,uv(y,E)}if(c.bearing){let E=cv(c.bearing,g,DT);y.bearing=this._map.transform.bearing+i.ae(E.amount,-179,179),uv(y,E)}if(c.pitch){let E=cv(c.pitch,g,AN);y.pitch=this._map.transform.pitch+E.amount,uv(y,E)}if(c.roll){let E=cv(c.roll,g,ON);y.roll=this._map.transform.roll+i.ae(E.amount,-179,179),uv(y,E)}if(y.zoom||y.bearing){let E=c.pinchAround===void 0?c.around:c.pinchAround;y.around=E?this._map.unproject(E):this._map.getCenter()}return this.clear(),i.e(y,{noMoveStart:!0})}}function uv(w,s){(!w.duration||w.duration<s.duration)&&(w.duration=s.duration,w.easing=s.easing)}function cv(w,s,c){let{maxSpeed:g,linearity:y,deceleration:E}=c,I=i.ae(w*y/(s/1e3),-g,g),P=Math.abs(I)/(E*y);return{easing:c.easing,duration:1e3*P,amount:I*(P/2)}}class qa extends i.l{preventDefault(){this._defaultPrevented=!0}get defaultPrevented(){return this._defaultPrevented}constructor(s,c,g,y={}){g=g instanceof MouseEvent?g:new MouseEvent(s,g);let E=b.mousePos(c.getCanvas(),g),I=c.unproject(E);super(s,i.e({point:E,lngLat:I,originalEvent:g},y)),this._defaultPrevented=!1,this.target=c}}class pv extends i.l{preventDefault(){this._defaultPrevented=!0}get defaultPrevented(){return this._defaultPrevented}constructor(s,c,g){let y=s==="touchend"?g.changedTouches:g.touches,E=b.touchPos(c.getCanvasContainer(),y),I=E.map(L=>c.unproject(L)),P=E.reduce((L,z,U,W)=>L.add(z.div(W.length)),new i.P(0,0));super(s,{points:E,point:P,lngLats:I,lngLat:c.unproject(P),originalEvent:g}),this._defaultPrevented=!1}}class LT extends i.l{preventDefault(){this._defaultPrevented=!0}get defaultPrevented(){return this._defaultPrevented}constructor(s,c,g){super(s,{originalEvent:g}),this._defaultPrevented=!1}}class NN{constructor(s,c){this._map=s,this._clickTolerance=c.clickTolerance}reset(){delete this._mousedownPos}wheel(s){return this._firePreventable(new LT(s.type,this._map,s))}mousedown(s,c){return this._mousedownPos=c,this._firePreventable(new qa(s.type,this._map,s))}mouseup(s){this._map.fire(new qa(s.type,this._map,s))}click(s,c){this._mousedownPos&&this._mousedownPos.dist(c)>=this._clickTolerance||this._map.fire(new qa(s.type,this._map,s))}dblclick(s){return this._firePreventable(new qa(s.type,this._map,s))}mouseover(s){this._map.fire(new qa(s.type,this._map,s))}mouseout(s){this._map.fire(new qa(s.type,this._map,s))}touchstart(s){return this._firePreventable(new pv(s.type,this._map,s))}touchmove(s){this._map.fire(new pv(s.type,this._map,s))}touchend(s){this._map.fire(new pv(s.type,this._map,s))}touchcancel(s){this._map.fire(new pv(s.type,this._map,s))}_firePreventable(s){if(this._map.fire(s),s.defaultPrevented)return{}}isEnabled(){return!0}isActive(){return!1}enable(){}disable(){}}class DN{constructor(s){this._map=s}reset(){this._delayContextMenu=!1,this._ignoreContextMenu=!0,delete this._contextMenuEvent}mousemove(s){this._map.fire(new qa(s.type,this._map,s))}mousedown(){this._delayContextMenu=!0,this._ignoreContextMenu=!1}mouseup(){this._delayContextMenu=!1,this._contextMenuEvent&&(this._map.fire(new qa("contextmenu",this._map,this._contextMenuEvent)),delete this._contextMenuEvent)}contextmenu(s){this._delayContextMenu?this._contextMenuEvent=s:this._ignoreContextMenu||this._map.fire(new qa(s.type,this._map,s)),this._map.listens("contextmenu")&&s.preventDefault()}isEnabled(){return!0}isActive(){return!1}enable(){}disable(){}}class fv{constructor(s){this._map=s}get transform(){return this._map._requestedCameraState||this._map.transform}get center(){return{lng:this.transform.center.lng,lat:this.transform.center.lat}}get zoom(){return this.transform.zoom}get pitch(){return this.transform.pitch}get bearing(){return this.transform.bearing}unproject(s){return this.transform.screenPointToLocation(i.P.convert(s),this._map.terrain)}}class kT{constructor(s,c){this._map=s,this._tr=new fv(s),this._el=s.getCanvasContainer(),this._container=s.getContainer(),this._clickTolerance=c.clickTolerance||1}isEnabled(){return!!this._enabled}isActive(){return!!this._active}enable(){this.isEnabled()||(this._enabled=!0)}disable(){this.isEnabled()&&(this._enabled=!1)}mousedown(s,c){this.isEnabled()&&s.shiftKey&&s.button===0&&(b.disableDrag(),this._startPos=this._lastPos=c,this._active=!0)}mousemoveWindow(s,c){if(!this._active)return;let g=c;if(this._lastPos.equals(g)||!this._box&&g.dist(this._startPos)<this._clickTolerance)return;let y=this._startPos;this._lastPos=g,this._box||(this._box=b.create("div","maplibregl-boxzoom",this._container),this._container.classList.add("maplibregl-crosshair"),this._fireEvent("boxzoomstart",s));let E=Math.min(y.x,g.x),I=Math.max(y.x,g.x),P=Math.min(y.y,g.y),L=Math.max(y.y,g.y);b.setTransform(this._box,`translate(${E}px,${P}px)`),this._box.style.width=I-E+"px",this._box.style.height=L-P+"px"}mouseupWindow(s,c){if(!this._active||s.button!==0)return;let g=this._startPos,y=c;if(this.reset(),b.suppressClick(),g.x!==y.x||g.y!==y.y)return this._map.fire(new i.l("boxzoomend",{originalEvent:s})),{cameraAnimation:E=>E.fitScreenCoordinates(g,y,this._tr.bearing,{linear:!0})};this._fireEvent("boxzoomcancel",s)}keydown(s){this._active&&s.keyCode===27&&(this.reset(),this._fireEvent("boxzoomcancel",s))}reset(){this._active=!1,this._container.classList.remove("maplibregl-crosshair"),this._box&&(b.remove(this._box),this._box=null),b.enableDrag(),delete this._startPos,delete this._lastPos}_fireEvent(s,c){return this._map.fire(new i.l(s,{originalEvent:c}))}}function vx(w,s){if(w.length!==s.length)throw new Error(`The number of touches and points are not equal - touches ${w.length}, points ${s.length}`);let c={};for(let g=0;g<w.length;g++)c[w[g].identifier]=s[g];return c}class LN{constructor(s){this.reset(),this.numTouches=s.numTouches}reset(){delete this.centroid,delete this.startTime,delete this.touches,this.aborted=!1}touchstart(s,c,g){(this.centroid||g.length>this.numTouches)&&(this.aborted=!0),this.aborted||(this.startTime===void 0&&(this.startTime=s.timeStamp),g.length===this.numTouches&&(this.centroid=function(y){let E=new i.P(0,0);for(let I of y)E._add(I);return E.div(y.length)}(c),this.touches=vx(g,c)))}touchmove(s,c,g){if(this.aborted||!this.centroid)return;let y=vx(g,c);for(let E in this.touches){let I=y[E];(!I||I.dist(this.touches[E])>30)&&(this.aborted=!0)}}touchend(s,c,g){if((!this.centroid||s.timeStamp-this.startTime>500)&&(this.aborted=!0),g.length===0){let y=!this.aborted&&this.centroid;if(this.reset(),y)return y}}}class dv{constructor(s){this.singleTap=new LN(s),this.numTaps=s.numTaps,this.reset()}reset(){this.lastTime=1/0,delete this.lastTap,this.count=0,this.singleTap.reset()}touchstart(s,c,g){this.singleTap.touchstart(s,c,g)}touchmove(s,c,g){this.singleTap.touchmove(s,c,g)}touchend(s,c,g){let y=this.singleTap.touchend(s,c,g);if(y){let E=s.timeStamp-this.lastTime<500,I=!this.lastTap||this.lastTap.dist(y)<30;if(E&&I||this.reset(),this.count++,this.lastTime=s.timeStamp,this.lastTap=y,this.count===this.numTaps)return this.reset(),y}}}class kN{constructor(s){this._tr=new fv(s),this._zoomIn=new dv({numTouches:1,numTaps:2}),this._zoomOut=new dv({numTouches:2,numTaps:1}),this.reset()}reset(){this._active=!1,this._zoomIn.reset(),this._zoomOut.reset()}touchstart(s,c,g){this._zoomIn.touchstart(s,c,g),this._zoomOut.touchstart(s,c,g)}touchmove(s,c,g){this._zoomIn.touchmove(s,c,g),this._zoomOut.touchmove(s,c,g)}touchend(s,c,g){let y=this._zoomIn.touchend(s,c,g),E=this._zoomOut.touchend(s,c,g),I=this._tr;return y?(this._active=!0,s.preventDefault(),setTimeout(()=>this.reset(),0),{cameraAnimation:P=>P.easeTo({duration:300,zoom:I.zoom+1,around:I.unproject(y)},{originalEvent:s})}):E?(this._active=!0,s.preventDefault(),setTimeout(()=>this.reset(),0),{cameraAnimation:P=>P.easeTo({duration:300,zoom:I.zoom-1,around:I.unproject(E)},{originalEvent:s})}):void 0}touchcancel(){this.reset()}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}}class qs{constructor(s){this._enabled=!!s.enable,this._moveStateManager=s.moveStateManager,this._clickTolerance=s.clickTolerance||1,this._moveFunction=s.move,this._activateOnStart=!!s.activateOnStart,s.assignEvents(this),this.reset()}reset(s){this._active=!1,this._moved=!1,delete this._lastPoint,this._moveStateManager.endMove(s)}_move(...s){let c=this._moveFunction(...s);if(c.bearingDelta||c.pitchDelta||c.rollDelta||c.around||c.panDelta)return this._active=!0,c}dragStart(s,c){this.isEnabled()&&!this._lastPoint&&this._moveStateManager.isValidStartEvent(s)&&(this._moveStateManager.startMove(s),this._lastPoint=Array.isArray(c)?c[0]:c,this._activateOnStart&&this._lastPoint&&(this._active=!0))}dragMove(s,c){if(!this.isEnabled())return;let g=this._lastPoint;if(!g)return;if(s.preventDefault(),!this._moveStateManager.isValidMoveEvent(s))return void this.reset(s);let y=Array.isArray(c)?c[0]:c;return!this._moved&&y.dist(g)<this._clickTolerance?void 0:(this._moved=!0,this._lastPoint=y,this._move(g,y))}dragEnd(s){this.isEnabled()&&this._lastPoint&&this._moveStateManager.isValidEndEvent(s)&&(this._moved&&b.suppressClick(),this.reset(s))}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}getClickTolerance(){return this._clickTolerance}}let Hc={0:1,2:2};class hv{constructor(s){this._correctEvent=s.checkCorrectEvent}startMove(s){let c=b.mouseButton(s);this._eventButton=c}endMove(s){delete this._eventButton}isValidStartEvent(s){return this._correctEvent(s)}isValidMoveEvent(s){return!function(c,g){let y=Hc[g];return c.buttons===void 0||(c.buttons&y)!==y}(s,this._eventButton)}isValidEndEvent(s){return b.mouseButton(s)===this._eventButton}}class Wc{constructor(){this._firstTouch=void 0}_isOneFingerTouch(s){return s.targetTouches.length===1}_isSameTouchEvent(s){return s.targetTouches[0].identifier===this._firstTouch}startMove(s){this._firstTouch=s.targetTouches[0].identifier}endMove(s){delete this._firstTouch}isValidStartEvent(s){return this._isOneFingerTouch(s)}isValidMoveEvent(s){return this._isOneFingerTouch(s)&&this._isSameTouchEvent(s)}isValidEndEvent(s){return this._isOneFingerTouch(s)&&this._isSameTouchEvent(s)}}class mv{constructor(s=new hv({checkCorrectEvent:()=>!0}),c=new Wc){this.mouseMoveStateManager=s,this.oneFingerTouchMoveStateManager=c}_executeRelevantHandler(s,c,g){return s instanceof MouseEvent?c(s):typeof TouchEvent!="undefined"&&s instanceof TouchEvent?g(s):void 0}startMove(s){this._executeRelevantHandler(s,c=>this.mouseMoveStateManager.startMove(c),c=>this.oneFingerTouchMoveStateManager.startMove(c))}endMove(s){this._executeRelevantHandler(s,c=>this.mouseMoveStateManager.endMove(c),c=>this.oneFingerTouchMoveStateManager.endMove(c))}isValidStartEvent(s){return this._executeRelevantHandler(s,c=>this.mouseMoveStateManager.isValidStartEvent(c),c=>this.oneFingerTouchMoveStateManager.isValidStartEvent(c))}isValidMoveEvent(s){return this._executeRelevantHandler(s,c=>this.mouseMoveStateManager.isValidMoveEvent(c),c=>this.oneFingerTouchMoveStateManager.isValidMoveEvent(c))}isValidEndEvent(s){return this._executeRelevantHandler(s,c=>this.mouseMoveStateManager.isValidEndEvent(c),c=>this.oneFingerTouchMoveStateManager.isValidEndEvent(c))}}let yx=w=>{w.mousedown=w.dragStart,w.mousemoveWindow=w.dragMove,w.mouseup=w.dragEnd,w.contextmenu=s=>{s.preventDefault()}};class CU{constructor(s,c){this._clickTolerance=s.clickTolerance||1,this._map=c,this.reset()}reset(){this._active=!1,this._touches={},this._sum=new i.P(0,0)}_shouldBePrevented(s){return s<(this._map.cooperativeGestures.isEnabled()?2:1)}touchstart(s,c,g){return this._calculateTransform(s,c,g)}touchmove(s,c,g){if(this._active){if(!this._shouldBePrevented(g.length))return s.preventDefault(),this._calculateTransform(s,c,g);this._map.cooperativeGestures.notifyGestureBlocked("touch_pan",s)}}touchend(s,c,g){this._calculateTransform(s,c,g),this._active&&this._shouldBePrevented(g.length)&&this.reset()}touchcancel(){this.reset()}_calculateTransform(s,c,g){g.length>0&&(this._active=!0);let y=vx(g,c),E=new i.P(0,0),I=new i.P(0,0),P=0;for(let z in y){let U=y[z],W=this._touches[z];W&&(E._add(U),I._add(U.sub(W)),P++,y[z]=U)}if(this._touches=y,this._shouldBePrevented(P)||!I.mag())return;let L=I.div(P);return this._sum._add(L),this._sum.mag()<this._clickTolerance?void 0:{around:E.div(P),panDelta:L}}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}}class RT{constructor(){this.reset()}reset(){this._active=!1,delete this._firstTwoTouches}touchstart(s,c,g){this._firstTwoTouches||g.length<2||(this._firstTwoTouches=[g[0].identifier,g[1].identifier],this._start([c[0],c[1]]))}touchmove(s,c,g){if(!this._firstTwoTouches)return;s.preventDefault();let[y,E]=this._firstTwoTouches,I=_x(g,c,y),P=_x(g,c,E);if(!I||!P)return;let L=this._aroundCenter?null:I.add(P).div(2);return this._move([I,P],L,s)}touchend(s,c,g){if(!this._firstTwoTouches)return;let[y,E]=this._firstTwoTouches,I=_x(g,c,y),P=_x(g,c,E);I&&P||(this._active&&b.suppressClick(),this.reset())}touchcancel(){this.reset()}enable(s){this._enabled=!0,this._aroundCenter=!!s&&s.around==="center"}disable(){this._enabled=!1,this.reset()}isEnabled(){return!!this._enabled}isActive(){return!!this._active}}function _x(w,s,c){for(let g=0;g<w.length;g++)if(w[g].identifier===c)return s[g]}function jT(w,s){return Math.log(w/s)/Math.LN2}class gv extends RT{reset(){super.reset(),delete this._distance,delete this._startDistance}_start(s){this._startDistance=this._distance=s[0].dist(s[1])}_move(s,c){let g=this._distance;if(this._distance=s[0].dist(s[1]),this._active||!(Math.abs(jT(this._distance,this._startDistance))<.1))return this._active=!0,{zoomDelta:jT(this._distance,g),pinchAround:c}}}function Tp(w,s){return 180*w.angleWith(s)/Math.PI}class cr extends RT{reset(){super.reset(),delete this._minDiameter,delete this._startVector,delete this._vector}_start(s){this._startVector=this._vector=s[0].sub(s[1]),this._minDiameter=s[0].dist(s[1])}_move(s,c,g){let y=this._vector;if(this._vector=s[0].sub(s[1]),this._active||!this._isBelowThreshold(this._vector))return this._active=!0,{bearingDelta:Tp(this._vector,y),pinchAround:c}}_isBelowThreshold(s){this._minDiameter=Math.min(this._minDiameter,s.mag());let c=25/(Math.PI*this._minDiameter)*360,g=Tp(s,this._startVector);return Math.abs(g)<c}}function bx(w){return Math.abs(w.y)>Math.abs(w.x)}class xx extends RT{constructor(s){super(),this._currentTouchCount=0,this._map=s}reset(){super.reset(),this._valid=void 0,delete this._firstMove,delete this._lastPoints}touchstart(s,c,g){super.touchstart(s,c,g),this._currentTouchCount=g.length}_start(s){this._lastPoints=s,bx(s[0].sub(s[1]))&&(this._valid=!1)}_move(s,c,g){if(this._map.cooperativeGestures.isEnabled()&&this._currentTouchCount<3)return;let y=s[0].sub(this._lastPoints[0]),E=s[1].sub(this._lastPoints[1]);return this._valid=this.gestureBeginsVertically(y,E,g.timeStamp),this._valid?(this._lastPoints=s,this._active=!0,{pitchDelta:(y.y+E.y)/2*-.5}):void 0}gestureBeginsVertically(s,c,g){if(this._valid!==void 0)return this._valid;let y=s.mag()>=2,E=c.mag()>=2;if(!y&&!E)return;if(!y||!E)return this._firstMove===void 0&&(this._firstMove=g),g-this._firstMove<100&&void 0;let I=s.y>0==c.y>0;return bx(s)&&bx(c)&&I}}let RN={panStep:100,bearingStep:15,pitchStep:10};class vv{constructor(s){this._tr=new fv(s);let c=RN;this._panStep=c.panStep,this._bearingStep=c.bearingStep,this._pitchStep=c.pitchStep,this._rotationDisabled=!1}reset(){this._active=!1}keydown(s){if(s.altKey||s.ctrlKey||s.metaKey)return;let c=0,g=0,y=0,E=0,I=0;switch(s.keyCode){case 61:case 107:case 171:case 187:c=1;break;case 189:case 109:case 173:c=-1;break;case 37:s.shiftKey?g=-1:(s.preventDefault(),E=-1);break;case 39:s.shiftKey?g=1:(s.preventDefault(),E=1);break;case 38:s.shiftKey?y=1:(s.preventDefault(),I=-1);break;case 40:s.shiftKey?y=-1:(s.preventDefault(),I=1);break;default:return}return this._rotationDisabled&&(g=0,y=0),{cameraAnimation:P=>{let L=this._tr;P.easeTo({duration:300,easeId:"keyboardHandler",easing:u1,zoom:c?Math.round(L.zoom)+c*(s.shiftKey?2:1):L.zoom,bearing:L.bearing+g*this._bearingStep,pitch:L.pitch+y*this._pitchStep,offset:[-E*this._panStep,-I*this._panStep],center:L.center},{originalEvent:s})}}}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}disableRotation(){this._rotationDisabled=!0}enableRotation(){this._rotationDisabled=!1}}function u1(w){return w*(2-w)}let qT=4.000244140625;class $n{constructor(s,c){this._onTimeout=g=>{this._type="wheel",this._delta-=this._lastValue,this._active||this._start(g)},this._map=s,this._tr=new fv(s),this._triggerRenderFrame=c,this._delta=0,this._defaultZoomRate=.01,this._wheelZoomRate=.0022222222222222222}setZoomRate(s){this._defaultZoomRate=s}setWheelZoomRate(s){this._wheelZoomRate=s}isEnabled(){return!!this._enabled}isActive(){return!!this._active||this._finishTimeout!==void 0}isZooming(){return!!this._zooming}enable(s){this.isEnabled()||(this._enabled=!0,this._aroundCenter=!!s&&s.around==="center")}disable(){this.isEnabled()&&(this._enabled=!1)}_shouldBePrevented(s){return!!this._map.cooperativeGestures.isEnabled()&&!(s.ctrlKey||this._map.cooperativeGestures.isBypassed(s))}wheel(s){if(!this.isEnabled())return;if(this._shouldBePrevented(s))return void this._map.cooperativeGestures.notifyGestureBlocked("wheel_zoom",s);let c=s.deltaMode===WheelEvent.DOM_DELTA_LINE?40*s.deltaY:s.deltaY,g=v.now(),y=g-(this._lastWheelEventTime||0);this._lastWheelEventTime=g,c!==0&&c%qT==0?this._type="wheel":c!==0&&Math.abs(c)<4?this._type="trackpad":y>400?(this._type=null,this._lastValue=c,this._timeout=setTimeout(this._onTimeout,40,s)):this._type||(this._type=Math.abs(y*c)<200?"trackpad":"wheel",this._timeout&&(clearTimeout(this._timeout),this._timeout=null,c+=this._lastValue)),s.shiftKey&&c&&(c/=4),this._type&&(this._lastWheelEvent=s,this._delta-=c,this._active||this._start(s)),s.preventDefault()}_start(s){if(!this._delta)return;this._frameId&&(this._frameId=null),this._active=!0,this.isZooming()||(this._zooming=!0),this._finishTimeout&&(clearTimeout(this._finishTimeout),delete this._finishTimeout);let c=b.mousePos(this._map.getCanvas(),s),g=this._tr;this._aroundPoint=this._aroundCenter?g.transform.locationToScreenPoint(i.Q.convert(g.center)):c,this._frameId||(this._frameId=!0,this._triggerRenderFrame())}renderFrame(){if(!this._frameId||(this._frameId=null,!this.isActive()))return;let s=this._tr.transform;if(typeof this._lastExpectedZoom=="number"){let P=s.zoom-this._lastExpectedZoom;typeof this._startZoom=="number"&&(this._startZoom+=P),typeof this._targetZoom=="number"&&(this._targetZoom+=P)}if(this._delta!==0){let P=this._type==="wheel"&&Math.abs(this._delta)>qT?this._wheelZoomRate:this._defaultZoomRate,L=2/(1+Math.exp(-Math.abs(this._delta*P)));this._delta<0&&L!==0&&(L=1/L);let z=typeof this._targetZoom!="number"?s.scale:i.ac(this._targetZoom);this._targetZoom=s.getConstrained(s.getCameraLngLat(),i.ah(z*L)).zoom,this._type==="wheel"&&(this._startZoom=s.zoom,this._easing=this._smoothOutEasing(200)),this._delta=0}let c=typeof this._targetZoom!="number"?s.zoom:this._targetZoom,g=this._startZoom,y=this._easing,E,I=!1;if(this._type==="wheel"&&g&&y){let P=v.now()-this._lastWheelEventTime,L=Math.min((P+5)/200,1),z=y(L);E=i.B.number(g,c,z),L<1?this._frameId||(this._frameId=!0):I=!0}else E=c,I=!0;return this._active=!0,I&&(this._active=!1,this._finishTimeout=setTimeout(()=>{this._zooming=!1,this._triggerRenderFrame(),delete this._targetZoom,delete this._lastExpectedZoom,delete this._finishTimeout},200)),this._lastExpectedZoom=E,{noInertia:!0,needsRenderFrame:!I,zoomDelta:E-s.zoom,around:this._aroundPoint,originalEvent:this._lastWheelEvent}}_smoothOutEasing(s){let c=i.cf;if(this._prevEase){let g=this._prevEase,y=(v.now()-g.start)/g.duration,E=g.easing(y+.01)-g.easing(y),I=.27/Math.sqrt(E*E+1e-4)*.01,P=Math.sqrt(.0729-I*I);c=i.cd(I,P,.25,1)}return this._prevEase={start:v.now(),duration:s,easing:c},c}reset(){this._active=!1,this._zooming=!1,delete this._targetZoom,delete this._lastExpectedZoom,this._finishTimeout&&(clearTimeout(this._finishTimeout),delete this._finishTimeout)}}class wx{constructor(s,c){this._clickZoom=s,this._tapZoom=c}enable(){this._clickZoom.enable(),this._tapZoom.enable()}disable(){this._clickZoom.disable(),this._tapZoom.disable()}isEnabled(){return this._clickZoom.isEnabled()&&this._tapZoom.isEnabled()}isActive(){return this._clickZoom.isActive()||this._tapZoom.isActive()}}class AU{constructor(s){this._tr=new fv(s),this.reset()}reset(){this._active=!1}dblclick(s,c){return s.preventDefault(),{cameraAnimation:g=>{g.easeTo({duration:300,zoom:this._tr.zoom+(s.shiftKey?-1:1),around:this._tr.unproject(c)},{originalEvent:s})}}}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}}class zT{constructor(){this._tap=new dv({numTouches:1,numTaps:1}),this.reset()}reset(){this._active=!1,delete this._swipePoint,delete this._swipeTouch,delete this._tapTime,delete this._tapPoint,this._tap.reset()}touchstart(s,c,g){if(!this._swipePoint)if(this._tapTime){let y=c[0],E=s.timeStamp-this._tapTime<500,I=this._tapPoint.dist(y)<30;E&&I?g.length>0&&(this._swipePoint=y,this._swipeTouch=g[0].identifier):this.reset()}else this._tap.touchstart(s,c,g)}touchmove(s,c,g){if(this._tapTime){if(this._swipePoint){if(g[0].identifier!==this._swipeTouch)return;let y=c[0],E=y.y-this._swipePoint.y;return this._swipePoint=y,s.preventDefault(),this._active=!0,{zoomDelta:E/128}}}else this._tap.touchmove(s,c,g)}touchend(s,c,g){if(this._tapTime)this._swipePoint&&g.length===0&&this.reset();else{let y=this._tap.touchend(s,c,g);y&&(this._tapTime=s.timeStamp,this._tapPoint=y)}}touchcancel(){this.reset()}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}}class jN{constructor(s,c,g){this._el=s,this._mousePan=c,this._touchPan=g}enable(s){this._inertiaOptions=s||{},this._mousePan.enable(),this._touchPan.enable(),this._el.classList.add("maplibregl-touch-drag-pan")}disable(){this._mousePan.disable(),this._touchPan.disable(),this._el.classList.remove("maplibregl-touch-drag-pan")}isEnabled(){return this._mousePan.isEnabled()&&this._touchPan.isEnabled()}isActive(){return this._mousePan.isActive()||this._touchPan.isActive()}}class qN{constructor(s,c,g,y){this._pitchWithRotate=s.pitchWithRotate,this._rollEnabled=s.rollEnabled,this._mouseRotate=c,this._mousePitch=g,this._mouseRoll=y}enable(){this._mouseRotate.enable(),this._pitchWithRotate&&this._mousePitch.enable(),this._rollEnabled&&this._mouseRoll.enable()}disable(){this._mouseRotate.disable(),this._mousePitch.disable(),this._mouseRoll.disable()}isEnabled(){return this._mouseRotate.isEnabled()&&(!this._pitchWithRotate||this._mousePitch.isEnabled())&&(!this._rollEnabled||this._mouseRoll.isEnabled())}isActive(){return this._mouseRotate.isActive()||this._mousePitch.isActive()||this._mouseRoll.isActive()}}class FT{constructor(s,c,g,y){this._el=s,this._touchZoom=c,this._touchRotate=g,this._tapDragZoom=y,this._rotationDisabled=!1,this._enabled=!0}enable(s){this._touchZoom.enable(s),this._rotationDisabled||this._touchRotate.enable(s),this._tapDragZoom.enable(),this._el.classList.add("maplibregl-touch-zoom-rotate")}disable(){this._touchZoom.disable(),this._touchRotate.disable(),this._tapDragZoom.disable(),this._el.classList.remove("maplibregl-touch-zoom-rotate")}isEnabled(){return this._touchZoom.isEnabled()&&(this._rotationDisabled||this._touchRotate.isEnabled())&&this._tapDragZoom.isEnabled()}isActive(){return this._touchZoom.isActive()||this._touchRotate.isActive()||this._tapDragZoom.isActive()}disableRotation(){this._rotationDisabled=!0,this._touchRotate.disable()}enableRotation(){this._rotationDisabled=!1,this._touchZoom.isEnabled()&&this._touchRotate.enable()}}class Ex{constructor(s,c){this._bypassKey=navigator.userAgent.indexOf("Mac")!==-1?"metaKey":"ctrlKey",this._map=s,this._options=c,this._enabled=!1}isActive(){return!1}reset(){}_setupUI(){if(this._container)return;let s=this._map.getCanvasContainer();s.classList.add("maplibregl-cooperative-gestures"),this._container=b.create("div","maplibregl-cooperative-gesture-screen",s);let c=this._map._getUIString("CooperativeGesturesHandler.WindowsHelpText");this._bypassKey==="metaKey"&&(c=this._map._getUIString("CooperativeGesturesHandler.MacHelpText"));let g=this._map._getUIString("CooperativeGesturesHandler.MobileHelpText"),y=document.createElement("div");y.className="maplibregl-desktop-message",y.textContent=c,this._container.appendChild(y);let E=document.createElement("div");E.className="maplibregl-mobile-message",E.textContent=g,this._container.appendChild(E),this._container.setAttribute("aria-hidden","true")}_destroyUI(){this._container&&(b.remove(this._container),this._map.getCanvasContainer().classList.remove("maplibregl-cooperative-gestures")),delete this._container}enable(){this._setupUI(),this._enabled=!0}disable(){this._enabled=!1,this._destroyUI()}isEnabled(){return this._enabled}isBypassed(s){return s[this._bypassKey]}notifyGestureBlocked(s,c){this._enabled&&(this._map.fire(new i.l("cooperativegestureprevented",{gestureType:s,originalEvent:c})),this._container.classList.add("maplibregl-show"),setTimeout(()=>{this._container.classList.remove("maplibregl-show")},100))}}let c1=w=>w.zoom||w.drag||w.roll||w.pitch||w.rotate;class OU extends i.l{}function Sx(w){return w.panDelta&&w.panDelta.mag()||w.zoomDelta||w.bearingDelta||w.pitchDelta||w.rollDelta}class PU{constructor(s,c){this.handleWindowEvent=y=>{this.handleEvent(y,`${y.type}Window`)},this.handleEvent=(y,E)=>{if(y.type==="blur")return void this.stop(!0);this._updatingCamera=!0;let I=y.type==="renderFrame"?void 0:y,P={needsRenderFrame:!1},L={},z={};for(let{handlerName:H,handler:te,allowed:ae}of this._handlers){if(!te.isEnabled())continue;let be;if(this._blockedByActive(z,ae,H))te.reset();else if(te[E||y.type]){if(i.cg(y,E||y.type)){let _e=b.mousePos(this._map.getCanvas(),y);be=te[E||y.type](y,_e)}else if(i.ch(y,E||y.type)){let _e=this._getMapTouches(y.touches),xe=b.touchPos(this._map.getCanvas(),_e);be=te[E||y.type](y,xe,_e)}else i.ci(E||y.type)||(be=te[E||y.type](y));this.mergeHandlerResult(P,L,be,H,I),be&&be.needsRenderFrame&&this._triggerRenderFrame()}(be||te.isActive())&&(z[H]=te)}let U={};for(let H in this._previousActiveHandlers)z[H]||(U[H]=I);this._previousActiveHandlers=z,(Object.keys(U).length||Sx(P))&&(this._changes.push([P,L,U]),this._triggerRenderFrame()),(Object.keys(z).length||Sx(P))&&this._map._stop(!0),this._updatingCamera=!1;let{cameraAnimation:W}=P;W&&(this._inertia.clear(),this._fireEvents({},{},!0),this._changes=[],W(this._map))},this._map=s,this._el=this._map.getCanvasContainer(),this._handlers=[],this._handlersById={},this._changes=[],this._inertia=new PN(s),this._bearingSnap=c.bearingSnap,this._previousActiveHandlers={},this._eventsInProgress={},this._addDefaultHandlers(c);let g=this._el;this._listeners=[[g,"touchstart",{passive:!0}],[g,"touchmove",{passive:!1}],[g,"touchend",void 0],[g,"touchcancel",void 0],[g,"mousedown",void 0],[g,"mousemove",void 0],[g,"mouseup",void 0],[document,"mousemove",{capture:!0}],[document,"mouseup",void 0],[g,"mouseover",void 0],[g,"mouseout",void 0],[g,"dblclick",void 0],[g,"click",void 0],[g,"keydown",{capture:!1}],[g,"keyup",void 0],[g,"wheel",{passive:!1}],[g,"contextmenu",void 0],[window,"blur",void 0]];for(let[y,E,I]of this._listeners)b.addEventListener(y,E,y===document?this.handleWindowEvent:this.handleEvent,I)}destroy(){for(let[s,c,g]of this._listeners)b.removeEventListener(s,c,s===document?this.handleWindowEvent:this.handleEvent,g)}_addDefaultHandlers(s){let c=this._map,g=c.getCanvasContainer();this._add("mapEvent",new NN(c,s));let y=c.boxZoom=new kT(c,s);this._add("boxZoom",y),s.interactive&&s.boxZoom&&y.enable();let E=c.cooperativeGestures=new Ex(c,s.cooperativeGestures);this._add("cooperativeGestures",E),s.cooperativeGestures&&E.enable();let I=new kN(c),P=new AU(c);c.doubleClickZoom=new wx(P,I),this._add("tapZoom",I),this._add("clickZoom",P),s.interactive&&s.doubleClickZoom&&c.doubleClickZoom.enable();let L=new zT;this._add("tapDragZoom",L);let z=c.touchPitch=new xx(c);this._add("touchPitch",z),s.interactive&&s.touchPitch&&c.touchPitch.enable(s.touchPitch);let U=()=>c.project(c.getCenter()),W=function({enable:Le,clickTolerance:Fe,aroundCenter:He=!0,minPixelCenterThreshold:Be=100,rotateDegreesPerPixelMoved:rt=.8},ht){let lt=new hv({checkCorrectEvent:ut=>b.mouseButton(ut)===0&&ut.ctrlKey||b.mouseButton(ut)===2&&!ut.ctrlKey});return new qs({clickTolerance:Fe,move:(ut,ft)=>{let Yt=ht();if(He&&Math.abs(Yt.y-ut.y)>Be)return{bearingDelta:i.ce(new i.P(ut.x,ft.y),ft,Yt)};let Ht=(ft.x-ut.x)*rt;return He&&ft.y<Yt.y&&(Ht=-Ht),{bearingDelta:Ht}},moveStateManager:lt,enable:Le,assignEvents:yx})}(s,U),H=function({enable:Le,clickTolerance:Fe,pitchDegreesPerPixelMoved:He=-.5}){let Be=new hv({checkCorrectEvent:rt=>b.mouseButton(rt)===0&&rt.ctrlKey||b.mouseButton(rt)===2});return new qs({clickTolerance:Fe,move:(rt,ht)=>({pitchDelta:(ht.y-rt.y)*He}),moveStateManager:Be,enable:Le,assignEvents:yx})}(s),te=function({enable:Le,clickTolerance:Fe,rollDegreesPerPixelMoved:He=.3},Be){let rt=new hv({checkCorrectEvent:ht=>b.mouseButton(ht)===2&&ht.ctrlKey});return new qs({clickTolerance:Fe,move:(ht,lt)=>{let ut=Be(),ft=(lt.x-ht.x)*He;return lt.y<ut.y&&(ft=-ft),{rollDelta:ft}},moveStateManager:rt,enable:Le,assignEvents:yx})}(s,U);c.dragRotate=new qN(s,W,H,te),this._add("mouseRotate",W,["mousePitch"]),this._add("mousePitch",H,["mouseRotate","mouseRoll"]),this._add("mouseRoll",te,["mousePitch"]),s.interactive&&s.dragRotate&&c.dragRotate.enable();let ae=function({enable:Le,clickTolerance:Fe}){let He=new hv({checkCorrectEvent:Be=>b.mouseButton(Be)===0&&!Be.ctrlKey});return new qs({clickTolerance:Fe,move:(Be,rt)=>({around:rt,panDelta:rt.sub(Be)}),activateOnStart:!0,moveStateManager:He,enable:Le,assignEvents:yx})}(s),be=new CU(s,c);c.dragPan=new jN(g,ae,be),this._add("mousePan",ae),this._add("touchPan",be,["touchZoom","touchRotate"]),s.interactive&&s.dragPan&&c.dragPan.enable(s.dragPan);let _e=new cr,xe=new gv;c.touchZoomRotate=new FT(g,xe,_e,L),this._add("touchRotate",_e,["touchPan","touchZoom"]),this._add("touchZoom",xe,["touchPan","touchRotate"]),s.interactive&&s.touchZoomRotate&&c.touchZoomRotate.enable(s.touchZoomRotate);let Ae=c.scrollZoom=new $n(c,()=>this._triggerRenderFrame());this._add("scrollZoom",Ae,["mousePan"]),s.interactive&&s.scrollZoom&&c.scrollZoom.enable(s.scrollZoom);let ke=c.keyboard=new vv(c);this._add("keyboard",ke),s.interactive&&s.keyboard&&c.keyboard.enable(),this._add("blockableMapEvent",new DN(c))}_add(s,c,g){this._handlers.push({handlerName:s,handler:c,allowed:g}),this._handlersById[s]=c}stop(s){if(!this._updatingCamera){for(let{handler:c}of this._handlers)c.reset();this._inertia.clear(),this._fireEvents({},{},s),this._changes=[]}}isActive(){for(let{handler:s}of this._handlers)if(s.isActive())return!0;return!1}isZooming(){return!!this._eventsInProgress.zoom||this._map.scrollZoom.isZooming()}isRotating(){return!!this._eventsInProgress.rotate}isMoving(){return!!c1(this._eventsInProgress)||this.isZooming()}_blockedByActive(s,c,g){for(let y in s)if(y!==g&&(!c||c.indexOf(y)<0))return!0;return!1}_getMapTouches(s){let c=[];for(let g of s)this._el.contains(g.target)&&c.push(g);return c}mergeHandlerResult(s,c,g,y,E){if(!g)return;i.e(s,g);let I={handlerName:y,originalEvent:g.originalEvent||E};g.zoomDelta!==void 0&&(c.zoom=I),g.panDelta!==void 0&&(c.drag=I),g.rollDelta!==void 0&&(c.roll=I),g.pitchDelta!==void 0&&(c.pitch=I),g.bearingDelta!==void 0&&(c.rotate=I)}_applyChanges(){let s={},c={},g={};for(let[y,E,I]of this._changes)y.panDelta&&(s.panDelta=(s.panDelta||new i.P(0,0))._add(y.panDelta)),y.zoomDelta&&(s.zoomDelta=(s.zoomDelta||0)+y.zoomDelta),y.bearingDelta&&(s.bearingDelta=(s.bearingDelta||0)+y.bearingDelta),y.pitchDelta&&(s.pitchDelta=(s.pitchDelta||0)+y.pitchDelta),y.rollDelta&&(s.rollDelta=(s.rollDelta||0)+y.rollDelta),y.around!==void 0&&(s.around=y.around),y.pinchAround!==void 0&&(s.pinchAround=y.pinchAround),y.noInertia&&(s.noInertia=y.noInertia),i.e(c,E),i.e(g,I);this._updateMapTransform(s,c,g),this._changes=[]}_updateMapTransform(s,c,g){let y=this._map,E=y._getTransformForUpdate(),I=y.terrain;if(!(Sx(s)||I&&this._terrainMovement))return this._fireEvents(c,g,!0);y._stop(!0);let{panDelta:P,zoomDelta:L,bearingDelta:z,pitchDelta:U,rollDelta:W,around:H,pinchAround:te}=s;te!==void 0&&(H=te),H=H||y.transform.centerPoint,I&&!E.isPointOnMapSurface(H)&&(H=E.centerPoint);let ae={panDelta:P,zoomDelta:L,rollDelta:W,pitchDelta:U,bearingDelta:z,around:H};this._map.cameraHelper.useGlobeControls&&!E.isPointOnMapSurface(H)&&(H=E.centerPoint);let be=H.distSqr(E.centerPoint)<.01?E.center:E.screenPointToLocation(P?H.sub(P):H);I?(this._map.cameraHelper.handleMapControlsRollPitchBearingZoom(ae,E),this._terrainMovement||!c.drag&&!c.zoom?c.drag&&this._terrainMovement?E.setCenter(E.screenPointToLocation(E.centerPoint.sub(P))):this._map.cameraHelper.handleMapControlsPan(ae,E,be):(this._terrainMovement=!0,this._map._elevationFreeze=!0,this._map.cameraHelper.handleMapControlsPan(ae,E,be))):(this._map.cameraHelper.handleMapControlsRollPitchBearingZoom(ae,E),this._map.cameraHelper.handleMapControlsPan(ae,E,be)),y._applyUpdatedTransform(E),this._map._update(),s.noInertia||this._inertia.record(s),this._fireEvents(c,g,!0)}_fireEvents(s,c,g){let y=c1(this._eventsInProgress),E=c1(s),I={};for(let W in s){let{originalEvent:H}=s[W];this._eventsInProgress[W]||(I[`${W}start`]=H),this._eventsInProgress[W]=s[W]}!y&&E&&this._fireEvent("movestart",E.originalEvent);for(let W in I)this._fireEvent(W,I[W]);E&&this._fireEvent("move",E.originalEvent);for(let W in s){let{originalEvent:H}=s[W];this._fireEvent(W,H)}let P={},L;for(let W in this._eventsInProgress){let{handlerName:H,originalEvent:te}=this._eventsInProgress[W];this._handlersById[H].isActive()||(delete this._eventsInProgress[W],L=c[H]||te,P[`${W}end`]=L)}for(let W in P)this._fireEvent(W,P[W]);let z=c1(this._eventsInProgress),U=(y||E)&&!z;if(U&&this._terrainMovement){this._map._elevationFreeze=!1,this._terrainMovement=!1;let W=this._map._getTransformForUpdate();this._map.getCenterClampedToGround()&&W.recalculateZoomAndCenter(this._map.terrain),this._map._applyUpdatedTransform(W)}if(g&&U){this._updatingCamera=!0;let W=this._inertia._onMoveEnd(this._map.dragPan._inertiaOptions),H=te=>te!==0&&-this._bearingSnap<te&&te<this._bearingSnap;!W||!W.essential&&v.prefersReducedMotion?(this._map.fire(new i.l("moveend",{originalEvent:L})),H(this._map.getBearing())&&this._map.resetNorth()):(H(W.bearing||this._map.getBearing())&&(W.bearing=0),W.freezeElevation=!0,this._map.easeTo(W,{originalEvent:L})),this._updatingCamera=!1}}_fireEvent(s,c){this._map.fire(new i.l(s,c?{originalEvent:c}:{}))}_requestFrame(){return this._map.triggerRepaint(),this._map._renderTaskQueue.add(s=>{delete this._frameId,this.handleEvent(new OU("renderFrame",{timeStamp:s})),this._applyChanges()})}_triggerRenderFrame(){this._frameId===void 0&&(this._frameId=this._requestFrame())}}class NU extends i.E{constructor(s,c,g){super(),this._renderFrameCallback=()=>{let y=Math.min((v.now()-this._easeStart)/this._easeOptions.duration,1);this._onEaseFrame(this._easeOptions.easing(y)),y<1&&this._easeFrameId?this._easeFrameId=this._requestRenderFrame(this._renderFrameCallback):this.stop()},this._moving=!1,this._zooming=!1,this.transform=s,this._bearingSnap=g.bearingSnap,this.cameraHelper=c,this.on("moveend",()=>{delete this._requestedCameraState})}migrateProjection(s,c){s.apply(this.transform),this.transform=s,this.cameraHelper=c}getCenter(){return new i.Q(this.transform.center.lng,this.transform.center.lat)}setCenter(s,c){return this.jumpTo({center:s},c)}getCenterElevation(){return this.transform.elevation}setCenterElevation(s,c){return this.jumpTo({elevation:s},c),this}getCenterClampedToGround(){return this._centerClampedToGround}setCenterClampedToGround(s){this._centerClampedToGround=s}panBy(s,c,g){return s=i.P.convert(s).mult(-1),this.panTo(this.transform.center,i.e({offset:s},c),g)}panTo(s,c,g){return this.easeTo(i.e({center:s},c),g)}getZoom(){return this.transform.zoom}setZoom(s,c){return this.jumpTo({zoom:s},c),this}zoomTo(s,c,g){return this.easeTo(i.e({zoom:s},c),g)}zoomIn(s,c){return this.zoomTo(this.getZoom()+1,s,c),this}zoomOut(s,c){return this.zoomTo(this.getZoom()-1,s,c),this}getVerticalFieldOfView(){return this.transform.fov}setVerticalFieldOfView(s,c){return s!=this.transform.fov&&(this.transform.setFov(s),this.fire(new i.l("movestart",c)).fire(new i.l("move",c)).fire(new i.l("moveend",c))),this}getBearing(){return this.transform.bearing}setBearing(s,c){return this.jumpTo({bearing:s},c),this}getPadding(){return this.transform.padding}setPadding(s,c){return this.jumpTo({padding:s},c),this}rotateTo(s,c,g){return this.easeTo(i.e({bearing:s},c),g)}resetNorth(s,c){return this.rotateTo(0,i.e({duration:1e3},s),c),this}resetNorthPitch(s,c){return this.easeTo(i.e({bearing:0,pitch:0,roll:0,duration:1e3},s),c),this}snapToNorth(s,c){return Math.abs(this.getBearing())<this._bearingSnap?this.resetNorth(s,c):this}getPitch(){return this.transform.pitch}setPitch(s,c){return this.jumpTo({pitch:s},c),this}getRoll(){return this.transform.roll}setRoll(s,c){return this.jumpTo({roll:s},c),this}cameraForBounds(s,c){s=St.convert(s).adjustAntiMeridian();let g=c&&c.bearing||0;return this._cameraForBoxAndBearing(s.getNorthWest(),s.getSouthEast(),g,c)}_cameraForBoxAndBearing(s,c,g,y){let E={top:0,bottom:0,right:0,left:0};if(typeof(y=i.e({padding:E,offset:[0,0],maxZoom:this.transform.maxZoom},y)).padding=="number"){let z=y.padding;y.padding={top:z,bottom:z,right:z,left:z}}let I=i.e(E,y.padding);y.padding=I;let P=this.transform,L=new St(s,c);return this.cameraHelper.cameraForBoxAndBearing(y,I,L,g,P)}fitBounds(s,c,g){return this._fitInternal(this.cameraForBounds(s,c),c,g)}fitScreenCoordinates(s,c,g,y,E){return this._fitInternal(this._cameraForBoxAndBearing(this.transform.screenPointToLocation(i.P.convert(s)),this.transform.screenPointToLocation(i.P.convert(c)),g,y),y,E)}_fitInternal(s,c,g){return s?(delete(c=i.e(s,c)).padding,c.linear?this.easeTo(c,g):this.flyTo(c,g)):this}jumpTo(s,c){this.stop();let g=this._getTransformForUpdate(),y=!1,E=!1,I=!1,P=g.zoom;this.cameraHelper.handleJumpToCenterZoom(g,s);let L=g.zoom!==P;return"elevation"in s&&g.elevation!==+s.elevation&&g.setElevation(+s.elevation),"bearing"in s&&g.bearing!==+s.bearing&&(y=!0,g.setBearing(+s.bearing)),"pitch"in s&&g.pitch!==+s.pitch&&(E=!0,g.setPitch(+s.pitch)),"roll"in s&&g.roll!==+s.roll&&(I=!0,g.setRoll(+s.roll)),s.padding==null||g.isPaddingEqual(s.padding)||g.setPadding(s.padding),this._applyUpdatedTransform(g),this.fire(new i.l("movestart",c)).fire(new i.l("move",c)),L&&this.fire(new i.l("zoomstart",c)).fire(new i.l("zoom",c)).fire(new i.l("zoomend",c)),y&&this.fire(new i.l("rotatestart",c)).fire(new i.l("rotate",c)).fire(new i.l("rotateend",c)),E&&this.fire(new i.l("pitchstart",c)).fire(new i.l("pitch",c)).fire(new i.l("pitchend",c)),I&&this.fire(new i.l("rollstart",c)).fire(new i.l("roll",c)).fire(new i.l("rollend",c)),this.fire(new i.l("moveend",c))}calculateCameraOptionsFromTo(s,c,g,y=0){let E=i.$.fromLngLat(s,c),I=i.$.fromLngLat(g,y),P=I.x-E.x,L=I.y-E.y,z=I.z-E.z,U=Math.hypot(P,L,z);if(U===0)throw new Error("Can't calculate camera options with same From and To");let W=Math.hypot(P,L),H=i.ah(this.transform.cameraToCenterDistance/U/this.transform.tileSize),te=180*Math.atan2(P,-L)/Math.PI,ae=180*Math.acos(W/U)/Math.PI;return ae=z<0?90-ae:90+ae,{center:I.toLngLat(),elevation:y,zoom:H,pitch:ae,bearing:te}}calculateCameraOptionsFromCameraLngLatAltRotation(s,c,g,y,E){let I=this.transform.calculateCenterFromCameraLngLatAlt(s,c,g,y);return{center:I.center,elevation:I.elevation,zoom:I.zoom,bearing:g,pitch:y,roll:E}}easeTo(s,c){this._stop(!1,s.easeId),((s=i.e({offset:[0,0],duration:500,easing:i.cf},s)).animate===!1||!s.essential&&v.prefersReducedMotion)&&(s.duration=0);let g=this._getTransformForUpdate(),y=this.getBearing(),E=g.pitch,I=g.roll,P="bearing"in s?this._normalizeBearing(s.bearing,y):y,L="pitch"in s?+s.pitch:E,z="roll"in s?this._normalizeBearing(s.roll,I):I,U="padding"in s?s.padding:g.padding,W=i.P.convert(s.offset),H,te;s.around&&(H=i.Q.convert(s.around),te=g.locationToScreenPoint(H));let ae={moving:this._moving,zooming:this._zooming,rotating:this._rotating,pitching:this._pitching,rolling:this._rolling},be=this.cameraHelper.handleEaseTo(g,{bearing:P,pitch:L,roll:z,padding:U,around:H,aroundPoint:te,offsetAsPoint:W,offset:s.offset,zoom:s.zoom,center:s.center});return this._rotating=this._rotating||y!==P,this._pitching=this._pitching||L!==E,this._rolling=this._rolling||z!==I,this._padding=!g.isPaddingEqual(U),this._zooming=this._zooming||be.isZooming,this._easeId=s.easeId,this._prepareEase(c,s.noMoveStart,ae),this.terrain&&this._prepareElevation(be.elevationCenter),this._ease(_e=>{be.easeFunc(_e),this.terrain&&!s.freezeElevation&&this._updateElevation(_e),this._applyUpdatedTransform(g),this._fireMoveEvents(c)},_e=>{this.terrain&&s.freezeElevation&&this._finalizeElevation(),this._afterEase(c,_e)},s),this}_prepareEase(s,c,g={}){this._moving=!0,c||g.moving||this.fire(new i.l("movestart",s)),this._zooming&&!g.zooming&&this.fire(new i.l("zoomstart",s)),this._rotating&&!g.rotating&&this.fire(new i.l("rotatestart",s)),this._pitching&&!g.pitching&&this.fire(new i.l("pitchstart",s)),this._rolling&&!g.rolling&&this.fire(new i.l("rollstart",s))}_prepareElevation(s){this._elevationCenter=s,this._elevationStart=this.transform.elevation,this._elevationTarget=this.terrain.getElevationForLngLatZoom(s,this.transform.tileZoom),this._elevationFreeze=!0}_updateElevation(s){this.transform.setMinElevationForCurrentTile(this.terrain.getMinTileElevationForLngLatZoom(this._elevationCenter,this.transform.tileZoom));let c=this.terrain.getElevationForLngLatZoom(this._elevationCenter,this.transform.tileZoom);if(s<1&&c!==this._elevationTarget){let g=this._elevationTarget-this._elevationStart;this._elevationStart+=s*(g-(c-(g*s+this._elevationStart))/(1-s)),this._elevationTarget=c}this.transform.setElevation(i.B.number(this._elevationStart,this._elevationTarget,s))}_finalizeElevation(){this._elevationFreeze=!1,this.getCenterClampedToGround()&&this.transform.recalculateZoomAndCenter(this.terrain)}_getTransformForUpdate(){return this.transformCameraUpdate||this.terrain?(this._requestedCameraState||(this._requestedCameraState=this.transform.clone()),this._requestedCameraState):this.transform}_elevateCameraIfInsideTerrain(s){if(!this.terrain&&s.elevation>=0&&s.pitch<=90)return{};let c=s.getCameraLngLat(),g=s.getCameraAltitude(),y=this.terrain?this.terrain.getElevationForLngLatZoom(c,s.zoom):0;if(g<y){let E=this.calculateCameraOptionsFromTo(c,y,s.center,s.elevation);return{pitch:E.pitch,zoom:E.zoom}}return{}}_applyUpdatedTransform(s){let c=[];if(c.push(y=>this._elevateCameraIfInsideTerrain(y)),this.transformCameraUpdate&&c.push(y=>this.transformCameraUpdate(y)),!c.length)return;let g=s.clone();for(let y of c){let E=g.clone(),{center:I,zoom:P,roll:L,pitch:z,bearing:U,elevation:W}=y(E);I&&E.setCenter(I),W!==void 0&&E.setElevation(W),P!==void 0&&E.setZoom(P),L!==void 0&&E.setRoll(L),z!==void 0&&E.setPitch(z),U!==void 0&&E.setBearing(U),g.apply(E)}this.transform.apply(g)}_fireMoveEvents(s){this.fire(new i.l("move",s)),this._zooming&&this.fire(new i.l("zoom",s)),this._rotating&&this.fire(new i.l("rotate",s)),this._pitching&&this.fire(new i.l("pitch",s)),this._rolling&&this.fire(new i.l("roll",s))}_afterEase(s,c){if(this._easeId&&c&&this._easeId===c)return;delete this._easeId;let g=this._zooming,y=this._rotating,E=this._pitching,I=this._rolling;this._moving=!1,this._zooming=!1,this._rotating=!1,this._pitching=!1,this._rolling=!1,this._padding=!1,g&&this.fire(new i.l("zoomend",s)),y&&this.fire(new i.l("rotateend",s)),E&&this.fire(new i.l("pitchend",s)),I&&this.fire(new i.l("rollend",s)),this.fire(new i.l("moveend",s))}flyTo(s,c){if(!s.essential&&v.prefersReducedMotion){let ft=i.O(s,["center","zoom","bearing","pitch","roll","elevation"]);return this.jumpTo(ft,c)}this.stop(),s=i.e({offset:[0,0],speed:1.2,curve:1.42,easing:i.cf},s);let g=this._getTransformForUpdate(),y=g.bearing,E=g.pitch,I=g.roll,P=g.padding,L="bearing"in s?this._normalizeBearing(s.bearing,y):y,z="pitch"in s?+s.pitch:E,U="roll"in s?this._normalizeBearing(s.roll,I):I,W="padding"in s?s.padding:g.padding,H=i.P.convert(s.offset),te=g.centerPoint.add(H),ae=g.screenPointToLocation(te),be=this.cameraHelper.handleFlyTo(g,{bearing:L,pitch:z,roll:U,padding:W,locationAtOffset:ae,offsetAsPoint:H,center:s.center,minZoom:s.minZoom,zoom:s.zoom}),_e=s.curve,xe=Math.max(g.width,g.height),Ae=xe/be.scaleOfZoom,ke=be.pixelPathLength;typeof be.scaleOfMinZoom=="number"&&(_e=Math.sqrt(xe/be.scaleOfMinZoom/ke*2));let Le=_e*_e;function Fe(ft){let Yt=(Ae*Ae-xe*xe+(ft?-1:1)*Le*Le*ke*ke)/(2*(ft?Ae:xe)*Le*ke);return Math.log(Math.sqrt(Yt*Yt+1)-Yt)}function He(ft){return(Math.exp(ft)-Math.exp(-ft))/2}function Be(ft){return(Math.exp(ft)+Math.exp(-ft))/2}let rt=Fe(!1),ht=function(ft){return Be(rt)/Be(rt+_e*ft)},lt=function(ft){return xe*((Be(rt)*(He(Yt=rt+_e*ft)/Be(Yt))-He(rt))/Le)/ke;var Yt},ut=(Fe(!0)-rt)/_e;if(Math.abs(ke)<2e-6||!isFinite(ut)){if(Math.abs(xe-Ae)<1e-6)return this.easeTo(s,c);let ft=Ae<xe?-1:1;ut=Math.abs(Math.log(Ae/xe))/_e,lt=()=>0,ht=Yt=>Math.exp(ft*_e*Yt)}return s.duration="duration"in s?+s.duration:1e3*ut/("screenSpeed"in s?+s.screenSpeed/_e:+s.speed),s.maxDuration&&s.duration>s.maxDuration&&(s.duration=0),this._zooming=!0,this._rotating=y!==L,this._pitching=z!==E,this._rolling=U!==I,this._padding=!g.isPaddingEqual(W),this._prepareEase(c,!1),this.terrain&&this._prepareElevation(be.targetCenter),this._ease(ft=>{let Yt=ft*ut,Ht=1/ht(Yt),Ct=lt(Yt);this._rotating&&g.setBearing(i.B.number(y,L,ft)),this._pitching&&g.setPitch(i.B.number(E,z,ft)),this._rolling&&g.setRoll(i.B.number(I,U,ft)),this._padding&&(g.interpolatePadding(P,W,ft),te=g.centerPoint.add(H)),be.easeFunc(ft,Ht,Ct,te),this.terrain&&!s.freezeElevation&&this._updateElevation(ft),this._applyUpdatedTransform(g),this._fireMoveEvents(c)},()=>{this.terrain&&s.freezeElevation&&this._finalizeElevation(),this._afterEase(c)},s),this}isEasing(){return!!this._easeFrameId}stop(){return this._stop()}_stop(s,c){var g;if(this._easeFrameId&&(this._cancelRenderFrame(this._easeFrameId),delete this._easeFrameId,delete this._onEaseFrame),this._onEaseEnd){let y=this._onEaseEnd;delete this._onEaseEnd,y.call(this,c)}return s||(g=this.handlers)===null||g===void 0||g.stop(!1),this}_ease(s,c,g){g.animate===!1||g.duration===0?(s(1),c()):(this._easeStart=v.now(),this._easeOptions=g,this._onEaseFrame=s,this._onEaseEnd=c,this._easeFrameId=this._requestRenderFrame(this._renderFrameCallback))}_normalizeBearing(s,c){s=i.aL(s,-180,180);let g=Math.abs(s-c);return Math.abs(s-360-c)<g&&(s-=360),Math.abs(s+360-c)<g&&(s+=360),s}queryTerrainElevation(s){return this.terrain?this.terrain.getElevationForLngLatZoom(i.Q.convert(s),this.transform.tileZoom):null}}let zf={compact:!0,customAttribution:"<a href=\"https://maplibre.org/\" target=\"_blank\">MapLibre</a>"};class gi{constructor(s=zf){this._toggleAttribution=()=>{this._container.classList.contains("maplibregl-compact")&&(this._container.classList.contains("maplibregl-compact-show")?(this._container.setAttribute("open",""),this._container.classList.remove("maplibregl-compact-show")):(this._container.classList.add("maplibregl-compact-show"),this._container.removeAttribute("open")))},this._updateData=c=>{!c||c.sourceDataType!=="metadata"&&c.sourceDataType!=="visibility"&&c.dataType!=="style"&&c.type!=="terrain"||this._updateAttributions()},this._updateCompact=()=>{this._map.getCanvasContainer().offsetWidth<=640||this._compact?this._compact===!1?this._container.setAttribute("open",""):this._container.classList.contains("maplibregl-compact")||this._container.classList.contains("maplibregl-attrib-empty")||(this._container.setAttribute("open",""),this._container.classList.add("maplibregl-compact","maplibregl-compact-show")):(this._container.setAttribute("open",""),this._container.classList.contains("maplibregl-compact")&&this._container.classList.remove("maplibregl-compact","maplibregl-compact-show"))},this._updateCompactMinimize=()=>{this._container.classList.contains("maplibregl-compact")&&this._container.classList.contains("maplibregl-compact-show")&&this._container.classList.remove("maplibregl-compact-show")},this.options=s}getDefaultPosition(){return"bottom-right"}onAdd(s){return this._map=s,this._compact=this.options.compact,this._container=b.create("details","maplibregl-ctrl maplibregl-ctrl-attrib"),this._compactButton=b.create("summary","maplibregl-ctrl-attrib-button",this._container),this._compactButton.addEventListener("click",this._toggleAttribution),this._setElementTitle(this._compactButton,"ToggleAttribution"),this._innerContainer=b.create("div","maplibregl-ctrl-attrib-inner",this._container),this._updateAttributions(),this._updateCompact(),this._map.on("styledata",this._updateData),this._map.on("sourcedata",this._updateData),this._map.on("terrain",this._updateData),this._map.on("resize",this._updateCompact),this._map.on("drag",this._updateCompactMinimize),this._container}onRemove(){b.remove(this._container),this._map.off("styledata",this._updateData),this._map.off("sourcedata",this._updateData),this._map.off("terrain",this._updateData),this._map.off("resize",this._updateCompact),this._map.off("drag",this._updateCompactMinimize),this._map=void 0,this._compact=void 0,this._attribHTML=void 0}_setElementTitle(s,c){let g=this._map._getUIString(`AttributionControl.${c}`);s.title=g,s.setAttribute("aria-label",g)}_updateAttributions(){if(!this._map.style)return;let s=[];if(this.options.customAttribution&&(Array.isArray(this.options.customAttribution)?s=s.concat(this.options.customAttribution.map(y=>typeof y!="string"?"":y)):typeof this.options.customAttribution=="string"&&s.push(this.options.customAttribution)),this._map.style.stylesheet){let y=this._map.style.stylesheet;this.styleOwner=y.owner,this.styleId=y.id}let c=this._map.style.sourceCaches;for(let y in c){let E=c[y];if(E.used||E.usedForTerrain){let I=E.getSource();I.attribution&&s.indexOf(I.attribution)<0&&s.push(I.attribution)}}s=s.filter(y=>String(y).trim()),s.sort((y,E)=>y.length-E.length),s=s.filter((y,E)=>{for(let I=E+1;I<s.length;I++)if(s[I].indexOf(y)>=0)return!1;return!0});let g=s.join(" | ");g!==this._attribHTML&&(this._attribHTML=g,s.length?(this._innerContainer.innerHTML=b.sanitize(g),this._container.classList.remove("maplibregl-attrib-empty")):this._container.classList.add("maplibregl-attrib-empty"),this._updateCompact(),this._editLink=null)}}class p1{constructor(s={}){this._updateCompact=()=>{let c=this._container.children;if(c.length){let g=c[0];this._map.getCanvasContainer().offsetWidth<=640||this._compact?this._compact!==!1&&g.classList.add("maplibregl-compact"):g.classList.remove("maplibregl-compact")}},this.options=s}getDefaultPosition(){return"bottom-left"}onAdd(s){this._map=s,this._compact=this.options&&this.options.compact,this._container=b.create("div","maplibregl-ctrl");let c=b.create("a","maplibregl-ctrl-logo");return c.target="_blank",c.rel="noopener nofollow",c.href="https://maplibre.org/",c.setAttribute("aria-label",this._map._getUIString("LogoControl.Title")),c.setAttribute("rel","noopener nofollow"),this._container.appendChild(c),this._container.style.display="block",this._map.on("resize",this._updateCompact),this._updateCompact(),this._container}onRemove(){b.remove(this._container),this._map.off("resize",this._updateCompact),this._map=void 0,this._compact=void 0}}class UT{constructor(){this._queue=[],this._id=0,this._cleared=!1,this._currentlyRunning=!1}add(s){let c=++this._id;return this._queue.push({callback:s,id:c,cancelled:!1}),c}remove(s){let c=this._currentlyRunning,g=c?this._queue.concat(c):this._queue;for(let y of g)if(y.id===s)return void(y.cancelled=!0)}run(s=0){if(this._currentlyRunning)throw new Error("Attempting to run(), but is already running.");let c=this._currentlyRunning=this._queue;this._queue=[];for(let g of c)if(!g.cancelled&&(g.callback(s),this._cleared))break;this._cleared=!1,this._currentlyRunning=!1}clear(){this._currentlyRunning&&(this._cleared=!0),this._queue=[]}}var zN=i.aG([{name:"a_pos3d",type:"Int16",components:3}]);class FN extends i.E{constructor(s){super(),this._lastTilesetChange=v.now(),this.sourceCache=s,this._tiles={},this._renderableTilesKeys=[],this._sourceTileCache={},this.minzoom=0,this.maxzoom=22,this.deltaZoom=1,this.tileSize=s._source.tileSize*jm(2,this.deltaZoom),s.usedForTerrain=!0,s.tileSize=this.tileSize}destruct(){this.sourceCache.usedForTerrain=!1,this.sourceCache.tileSize=null}update(s,c){this.sourceCache.update(s,c),this._renderableTilesKeys=[];let g={};for(let y of Ie(s,{tileSize:this.tileSize,minzoom:this.minzoom,maxzoom:this.maxzoom,reparseOverscaled:!1,terrain:c,calculateTileZoom:this.sourceCache._source.calculateTileZoom}))g[y.key]=!0,this._renderableTilesKeys.push(y.key),this._tiles[y.key]||(y.terrainRttPosMatrix32f=new Float64Array(16),i.bQ(y.terrainRttPosMatrix32f,0,i.Z,i.Z,0,0,1),this._tiles[y.key]=new jt(y,this.tileSize),this._lastTilesetChange=v.now());for(let y in this._tiles)g[y]||delete this._tiles[y]}freeRtt(s){for(let c in this._tiles){let g=this._tiles[c];(!s||g.tileID.equals(s)||g.tileID.isChildOf(s)||s.isChildOf(g.tileID))&&(g.rtt=[])}}getRenderableTiles(){return this._renderableTilesKeys.map(s=>this.getTileByID(s))}getTileByID(s){return this._tiles[s]}getTerrainCoords(s,c){return c?this._getTerrainCoordsForTileRanges(s,c):this._getTerrainCoordsForRegularTile(s)}_getTerrainCoordsForRegularTile(s){let c={};for(let g of this._renderableTilesKeys){let y=this._tiles[g].tileID,E=s.clone(),I=i.b2();if(y.canonical.equals(s.canonical))i.bQ(I,0,i.Z,i.Z,0,0,1);else if(y.canonical.isChildOf(s.canonical)){let P=y.canonical.z-s.canonical.z,L=y.canonical.x-(y.canonical.x>>P<<P),z=y.canonical.y-(y.canonical.y>>P<<P),U=i.Z>>P;i.bQ(I,0,U,U,0,0,1),i.L(I,I,[-L*U,-z*U,0])}else{if(!s.canonical.isChildOf(y.canonical))continue;{let P=s.canonical.z-y.canonical.z,L=s.canonical.x-(s.canonical.x>>P<<P),z=s.canonical.y-(s.canonical.y>>P<<P),U=i.Z>>P;i.bQ(I,0,i.Z,i.Z,0,0,1),i.L(I,I,[L*U,z*U,0]),i.M(I,I,[1/jm(2,P),1/jm(2,P),0])}}E.terrainRttPosMatrix32f=new Float32Array(I),c[g]=E}return c}_getTerrainCoordsForTileRanges(s,c){let g={};for(let y of this._renderableTilesKeys){let E=this._tiles[y].tileID;if(!this._isWithinTileRanges(E,c))continue;let I=s.clone(),P=i.b2();if(E.canonical.z===s.canonical.z){let L=s.canonical.x-E.canonical.x,z=s.canonical.y-E.canonical.y;i.bQ(P,0,i.Z,i.Z,0,0,1),i.L(P,P,[L*i.Z,z*i.Z,0])}else if(E.canonical.z>s.canonical.z){let L=E.canonical.z-s.canonical.z,z=E.canonical.x-(E.canonical.x>>L<<L),U=E.canonical.y-(E.canonical.y>>L<<L),W=s.canonical.x-(E.canonical.x>>L),H=s.canonical.y-(E.canonical.y>>L),te=i.Z>>L;i.bQ(P,0,te,te,0,0,1),i.L(P,P,[-z*te+W*i.Z,-U*te+H*i.Z,0])}else{let L=s.canonical.z-E.canonical.z,z=s.canonical.x-(s.canonical.x>>L<<L),U=s.canonical.y-(s.canonical.y>>L<<L),W=(s.canonical.x>>L)-E.canonical.x,H=(s.canonical.y>>L)-E.canonical.y,te=i.Z<<L;i.bQ(P,0,te,te,0,0,1),i.L(P,P,[z*i.Z+W*te,U*i.Z+H*te,0])}I.terrainRttPosMatrix32f=new Float32Array(P),g[y]=I}return g}getSourceTile(s,c){let g=this.sourceCache._source,y=s.overscaledZ-this.deltaZoom;if(y>g.maxzoom&&(y=g.maxzoom),y<g.minzoom)return null;this._sourceTileCache[s.key]||(this._sourceTileCache[s.key]=s.scaledTo(y).key);let E=this.sourceCache.getTileByID(this._sourceTileCache[s.key]);if((!E||!E.dem)&&c)for(;y>=g.minzoom&&(!E||!E.dem);)E=this.sourceCache.getTileByID(s.scaledTo(y--).key);return E}anyTilesAfterTime(s=Date.now()){return this._lastTilesetChange>=s}_isWithinTileRanges(s,c){return c[s.canonical.z]&&s.canonical.x>=c[s.canonical.z].minTileX&&s.canonical.x<=c[s.canonical.z].maxTileX&&s.canonical.y>=c[s.canonical.z].minTileY&&s.canonical.y<=c[s.canonical.z].maxTileY}}class UN{constructor(s,c,g){this._meshCache={},this.painter=s,this.sourceCache=new FN(c),this.options=g,this.exaggeration=typeof g.exaggeration=="number"?g.exaggeration:1,this.qualityFactor=2,this.meshSize=128,this._demMatrixCache={},this.coordsIndex=[],this._coordsTextureSize=1024}getDEMElevation(s,c,g,y=i.Z){var E;if(!(c>=0&&c<y&&g>=0&&g<y))return 0;let I=this.getTerrainData(s),P=(E=I.tile)===null||E===void 0?void 0:E.dem;if(!P)return 0;let L=i.cj([],[c/y*i.Z,g/y*i.Z],I.u_terrain_matrix),z=[L[0]*P.dim,L[1]*P.dim],U=Math.floor(z[0]),W=Math.floor(z[1]),H=z[0]-U,te=z[1]-W;return P.get(U,W)*(1-H)*(1-te)+P.get(U+1,W)*H*(1-te)+P.get(U,W+1)*(1-H)*te+P.get(U+1,W+1)*H*te}getElevationForLngLatZoom(s,c){if(!i.ck(c,s.wrap()))return 0;let{tileID:g,mercatorX:y,mercatorY:E}=this._getOverscaledTileIDFromLngLatZoom(s,c);return this.getElevation(g,y%i.Z,E%i.Z,i.Z)}getElevation(s,c,g,y=i.Z){return this.getDEMElevation(s,c,g,y)*this.exaggeration}getTerrainData(s){if(!this._emptyDemTexture){let y=this.painter.context,E=new i.R({width:1,height:1},new Uint8Array(4));this._emptyDepthTexture=new Q(y,E,y.gl.RGBA,{premultiply:!1}),this._emptyDemUnpack=[0,0,0,0],this._emptyDemTexture=new Q(y,new i.R({width:1,height:1}),y.gl.RGBA,{premultiply:!1}),this._emptyDemTexture.bind(y.gl.NEAREST,y.gl.CLAMP_TO_EDGE),this._emptyDemMatrix=i.ad([])}let c=this.sourceCache.getSourceTile(s,!0);if(c&&c.dem&&(!c.demTexture||c.needsTerrainPrepare)){let y=this.painter.context;c.demTexture=this.painter.getTileTexture(c.dem.stride),c.demTexture?c.demTexture.update(c.dem.getPixels(),{premultiply:!1}):c.demTexture=new Q(y,c.dem.getPixels(),y.gl.RGBA,{premultiply:!1}),c.demTexture.bind(y.gl.NEAREST,y.gl.CLAMP_TO_EDGE),c.needsTerrainPrepare=!1}let g=c&&c+c.tileID.key+s.key;if(g&&!this._demMatrixCache[g]){let y=this.sourceCache.sourceCache._source.maxzoom,E=s.canonical.z-c.tileID.canonical.z;s.overscaledZ>s.canonical.z&&(s.canonical.z>=y?E=s.canonical.z-y:i.w("cannot calculate elevation if elevation maxzoom > source.maxzoom"));let I=s.canonical.x-(s.canonical.x>>E<<E),P=s.canonical.y-(s.canonical.y>>E<<E),L=i.cl(new Float64Array(16),[1/(i.Z<<E),1/(i.Z<<E),0]);i.L(L,L,[I*i.Z,P*i.Z,0]),this._demMatrixCache[s.key]={matrix:L,coord:s}}return{u_depth:2,u_terrain:3,u_terrain_dim:c&&c.dem&&c.dem.dim||1,u_terrain_matrix:g?this._demMatrixCache[s.key].matrix:this._emptyDemMatrix,u_terrain_unpack:c&&c.dem&&c.dem.getUnpackVector()||this._emptyDemUnpack,u_terrain_exaggeration:this.exaggeration,texture:(c&&c.demTexture||this._emptyDemTexture).texture,depthTexture:(this._fboDepthTexture||this._emptyDepthTexture).texture,tile:c}}getFramebuffer(s){let c=this.painter,g=c.width/devicePixelRatio,y=c.height/devicePixelRatio;return!this._fbo||this._fbo.width===g&&this._fbo.height===y||(this._fbo.destroy(),this._fboCoordsTexture.destroy(),this._fboDepthTexture.destroy(),delete this._fbo,delete this._fboDepthTexture,delete this._fboCoordsTexture),this._fboCoordsTexture||(this._fboCoordsTexture=new Q(c.context,{width:g,height:y,data:null},c.context.gl.RGBA,{premultiply:!1}),this._fboCoordsTexture.bind(c.context.gl.NEAREST,c.context.gl.CLAMP_TO_EDGE)),this._fboDepthTexture||(this._fboDepthTexture=new Q(c.context,{width:g,height:y,data:null},c.context.gl.RGBA,{premultiply:!1}),this._fboDepthTexture.bind(c.context.gl.NEAREST,c.context.gl.CLAMP_TO_EDGE)),this._fbo||(this._fbo=c.context.createFramebuffer(g,y,!0,!1),this._fbo.depthAttachment.set(c.context.createRenderbuffer(c.context.gl.DEPTH_COMPONENT16,g,y))),this._fbo.colorAttachment.set(s==="coords"?this._fboCoordsTexture.texture:this._fboDepthTexture.texture),this._fbo}getCoordsTexture(){let s=this.painter.context;if(this._coordsTexture)return this._coordsTexture;let c=new Uint8Array(this._coordsTextureSize*this._coordsTextureSize*4);for(let E=0,I=0;E<this._coordsTextureSize;E++)for(let P=0;P<this._coordsTextureSize;P++,I+=4)c[I+0]=255&P,c[I+1]=255&E,c[I+2]=P>>8<<4|E>>8,c[I+3]=0;let g=new i.R({width:this._coordsTextureSize,height:this._coordsTextureSize},new Uint8Array(c.buffer)),y=new Q(s,g,s.gl.RGBA,{premultiply:!1});return y.bind(s.gl.NEAREST,s.gl.CLAMP_TO_EDGE),this._coordsTexture=y,y}pointCoordinate(s){this.painter.maybeDrawDepthAndCoords(!0);let c=new Uint8Array(4),g=this.painter.context,y=g.gl,E=Math.round(s.x*this.painter.pixelRatio/devicePixelRatio),I=Math.round(s.y*this.painter.pixelRatio/devicePixelRatio),P=Math.round(this.painter.height/devicePixelRatio);g.bindFramebuffer.set(this.getFramebuffer("coords").framebuffer),y.readPixels(E,P-I-1,1,1,y.RGBA,y.UNSIGNED_BYTE,c),g.bindFramebuffer.set(null);let L=c[0]+(c[2]>>4<<8),z=c[1]+((15&c[2])<<8),U=this.coordsIndex[255-c[3]],W=U&&this.sourceCache.getTileByID(U);if(!W)return null;let H=this._coordsTextureSize,te=(1<<W.tileID.canonical.z)*H;return new i.$((W.tileID.canonical.x*H+L)/te+W.tileID.wrap,(W.tileID.canonical.y*H+z)/te,this.getElevation(W.tileID,L,z,H))}depthAtPoint(s){let c=new Uint8Array(4),g=this.painter.context,y=g.gl;return g.bindFramebuffer.set(this.getFramebuffer("depth").framebuffer),y.readPixels(s.x,this.painter.height/devicePixelRatio-s.y-1,1,1,y.RGBA,y.UNSIGNED_BYTE,c),g.bindFramebuffer.set(null),(c[0]/16777216+c[1]/65536+c[2]/256+c[3])/256}getTerrainMesh(s){var c;let g=((c=this.painter.style.projection)===null||c===void 0?void 0:c.transitionState)>0,y=g&&s.canonical.y===0,E=g&&s.canonical.y===(1<<s.canonical.z)-1,I=`m_${y?"n":""}_${E?"s":""}`;if(this._meshCache[I])return this._meshCache[I];let P=this.painter.context,L=new i.cm,z=new i.aK,U=this.meshSize,W=i.Z/U,H=U*U;for(let Be=0;Be<=U;Be++)for(let rt=0;rt<=U;rt++)L.emplaceBack(rt*W,Be*W,0);for(let Be=0;Be<H;Be+=U+1)for(let rt=0;rt<U;rt++)z.emplaceBack(rt+Be,U+rt+Be+1,U+rt+Be+2),z.emplaceBack(rt+Be,U+rt+Be+2,rt+Be+1);let te=L.length,ae=te+(U+1),be=(U+1)*U,_e=y?i.b9:0,xe=y?0:1,Ae=E?i.ba:i.Z,ke=E?0:1;for(let Be=0;Be<=U;Be++)L.emplaceBack(Be*W,_e,xe);for(let Be=0;Be<=U;Be++)L.emplaceBack(Be*W,Ae,ke);for(let Be=0;Be<U;Be++)z.emplaceBack(be+Be,ae+Be,ae+Be+1),z.emplaceBack(be+Be,ae+Be+1,be+Be+1),z.emplaceBack(0+Be,te+Be+1,te+Be),z.emplaceBack(0+Be,0+Be+1,te+Be+1);let Le=L.length,Fe=Le+2*(U+1);for(let Be of[0,1])for(let rt=0;rt<=U;rt++)for(let ht of[0,1])L.emplaceBack(Be*i.Z,rt*W,ht);for(let Be=0;Be<2*U;Be+=2)z.emplaceBack(Le+Be,Le+Be+1,Le+Be+3),z.emplaceBack(Le+Be,Le+Be+3,Le+Be+2),z.emplaceBack(Fe+Be,Fe+Be+3,Fe+Be+1),z.emplaceBack(Fe+Be,Fe+Be+2,Fe+Be+3);let He=new ki(P.createVertexBuffer(L,zN.members),P.createIndexBuffer(z),i.aJ.simpleSegment(0,0,L.length,z.length));return this._meshCache[I]=He,He}getMeshFrameDelta(s){return 2*Math.PI*i.bu/Math.pow(2,Math.max(s,0))/5}getMinTileElevationForLngLatZoom(s,c){var g;let{tileID:y}=this._getOverscaledTileIDFromLngLatZoom(s,c);return(g=this.getMinMaxElevation(y).minElevation)!==null&&g!==void 0?g:0}getMinMaxElevation(s){let c=this.getTerrainData(s).tile,g={minElevation:null,maxElevation:null};return c&&c.dem&&(g.minElevation=c.dem.min*this.exaggeration,g.maxElevation=c.dem.max*this.exaggeration),g}_getOverscaledTileIDFromLngLatZoom(s,c){let g=i.$.fromLngLat(s.wrap()),y=(1<<c)*i.Z,E=g.x*y,I=g.y*y,P=Math.floor(E/i.Z),L=Math.floor(I/i.Z);return{tileID:new i.Y(c,0,c,P,L),mercatorX:E,mercatorY:I}}}class DU{constructor(s,c,g){this._context=s,this._size=c,this._tileSize=g,this._objects=[],this._recentlyUsed=[],this._stamp=0}destruct(){for(let s of this._objects)s.texture.destroy(),s.fbo.destroy()}_createObject(s){let c=this._context.createFramebuffer(this._tileSize,this._tileSize,!0,!0),g=new Q(this._context,{width:this._tileSize,height:this._tileSize,data:null},this._context.gl.RGBA);return g.bind(this._context.gl.LINEAR,this._context.gl.CLAMP_TO_EDGE),this._context.extTextureFilterAnisotropic&&this._context.gl.texParameterf(this._context.gl.TEXTURE_2D,this._context.extTextureFilterAnisotropic.TEXTURE_MAX_ANISOTROPY_EXT,this._context.extTextureFilterAnisotropicMax),c.depthAttachment.set(this._context.createRenderbuffer(this._context.gl.DEPTH_STENCIL,this._tileSize,this._tileSize)),c.colorAttachment.set(g.texture),{id:s,fbo:c,texture:g,stamp:-1,inUse:!1}}getObjectForId(s){return this._objects[s]}useObject(s){s.inUse=!0,this._recentlyUsed=this._recentlyUsed.filter(c=>s.id!==c),this._recentlyUsed.push(s.id)}stampObject(s){s.stamp=++this._stamp}getOrCreateFreeObject(){for(let c of this._recentlyUsed)if(!this._objects[c].inUse)return this._objects[c];if(this._objects.length>=this._size)throw new Error("No free RenderPool available, call freeAllObjects() required!");let s=this._createObject(this._objects.length);return this._objects.push(s),s}freeObject(s){s.inUse=!1}freeAllObjects(){for(let s of this._objects)this.freeObject(s)}isFull(){return!(this._objects.length<this._size)&&this._objects.some(s=>!s.inUse)===!1}}let cl={background:!0,fill:!0,line:!0,raster:!0,hillshade:!0};class Tx{constructor(s,c){this.painter=s,this.terrain=c,this.pool=new DU(s.context,30,c.sourceCache.tileSize*c.qualityFactor)}destruct(){this.pool.destruct()}getTexture(s){return this.pool.getObjectForId(s.rtt[this._stacks.length-1].id).texture}prepareForRender(s,c){this._stacks=[],this._prevType=null,this._rttTiles=[],this._renderableTiles=this.terrain.sourceCache.getRenderableTiles(),this._renderableLayerIds=s._order.filter(g=>!s._layers[g].isHidden(c)),this._coordsAscending={};for(let g in s.sourceCaches){this._coordsAscending[g]={};let y=s.sourceCaches[g].getVisibleCoordinates(),E=s.sourceCaches[g].getSource(),I=E instanceof Er?E.terrainTileRanges:null;for(let P of y){let L=this.terrain.sourceCache.getTerrainCoords(P,I);for(let z in L)this._coordsAscending[g][z]||(this._coordsAscending[g][z]=[]),this._coordsAscending[g][z].push(L[z])}}this._coordsAscendingStr={};for(let g of s._order){let y=s._layers[g],E=y.source;if(cl[y.type]&&!this._coordsAscendingStr[E]){this._coordsAscendingStr[E]={};for(let I in this._coordsAscending[E])this._coordsAscendingStr[E][I]=this._coordsAscending[E][I].map(P=>P.key).sort().join()}}for(let g of this._renderableTiles)for(let y in this._coordsAscendingStr){let E=this._coordsAscendingStr[y][g.tileID.key];E&&E!==g.rttCoords[y]&&(g.rtt=[])}}renderLayer(s,c){if(s.isHidden(this.painter.transform.zoom))return!1;let g=Object.assign(Object.assign({},c),{isRenderingToTexture:!0}),y=s.type,E=this.painter,I=this._renderableLayerIds[this._renderableLayerIds.length-1]===s.id;if(cl[y]&&(this._prevType&&cl[this._prevType]||this._stacks.push([]),this._prevType=y,this._stacks[this._stacks.length-1].push(s.id),!I))return!0;if(cl[this._prevType]||cl[y]&&I){this._prevType=y;let P=this._stacks.length-1,L=this._stacks[P]||[];for(let z of this._renderableTiles){if(this.pool.isFull()&&(Kd(this.painter,this.terrain,this._rttTiles,g),this._rttTiles=[],this.pool.freeAllObjects()),this._rttTiles.push(z),z.rtt[P]){let W=this.pool.getObjectForId(z.rtt[P].id);if(W.stamp===z.rtt[P].stamp){this.pool.useObject(W);continue}}let U=this.pool.getOrCreateFreeObject();this.pool.useObject(U),this.pool.stampObject(U),z.rtt[P]={id:U.id,stamp:U.stamp},E.context.bindFramebuffer.set(U.fbo.framebuffer),E.context.clear({color:i.b7.transparent,stencil:0}),E.currentStencilSource=void 0;for(let W=0;W<L.length;W++){let H=E.style._layers[L[W]],te=H.source?this._coordsAscending[H.source][z.tileID.key]:[z.tileID];E.context.viewport.set([0,0,U.fbo.width,U.fbo.height]),E._renderTileClippingMasks(H,te,!0),E.renderLayer(E,E.style.sourceCaches[H.source],H,te,g),H.source&&(z.rttCoords[H.source]=this._coordsAscendingStr[H.source][z.tileID.key])}}return Kd(this.painter,this.terrain,this._rttTiles,g),this._rttTiles=[],this.pool.freeAllObjects(),cl[y]}return!1}}let Sr={"AttributionControl.ToggleAttribution":"Toggle attribution","AttributionControl.MapFeedback":"Map feedback","FullscreenControl.Enter":"Enter fullscreen","FullscreenControl.Exit":"Exit fullscreen","GeolocateControl.FindMyLocation":"Find my location","GeolocateControl.LocationNotAvailable":"Location not available","LogoControl.Title":"MapLibre logo","Map.Title":"Map","Marker.Title":"Map marker","NavigationControl.ResetBearing":"Reset bearing to north","NavigationControl.ZoomIn":"Zoom in","NavigationControl.ZoomOut":"Zoom out","Popup.Close":"Close popup","ScaleControl.Feet":"ft","ScaleControl.Meters":"m","ScaleControl.Kilometers":"km","ScaleControl.Miles":"mi","ScaleControl.NauticalMiles":"nm","GlobeControl.Enable":"Enable globe","GlobeControl.Disable":"Disable globe","TerrainControl.Enable":"Enable terrain","TerrainControl.Disable":"Disable terrain","CooperativeGesturesHandler.WindowsHelpText":"Use Ctrl + scroll to zoom the map","CooperativeGesturesHandler.MacHelpText":"Use \u2318 + scroll to zoom the map","CooperativeGesturesHandler.MobileHelpText":"Use two fingers to move the map"},$r=a,f1={hash:!1,interactive:!0,bearingSnap:7,attributionControl:zf,maplibreLogo:!1,refreshExpiredTiles:!0,canvasContextAttributes:{antialias:!1,preserveDrawingBuffer:!1,powerPreference:"high-performance",failIfMajorPerformanceCaveat:!1,desynchronized:!1,contextType:void 0},scrollZoom:!0,minZoom:-2,maxZoom:22,minPitch:0,maxPitch:60,boxZoom:!0,dragRotate:!0,dragPan:!0,keyboard:!0,doubleClickZoom:!0,touchZoomRotate:!0,touchPitch:!0,cooperativeGestures:!1,trackResize:!0,center:[0,0],elevation:0,zoom:0,bearing:0,pitch:0,roll:0,renderWorldCopies:!0,maxTileCacheSize:null,maxTileCacheZoomLevels:i.a.MAX_TILE_CACHE_ZOOM_LEVELS,transformRequest:null,transformCameraUpdate:null,fadeDuration:300,crossSourceCollisions:!0,clickTolerance:3,localIdeographFontFamily:"sans-serif",pitchWithRotate:!0,rollEnabled:!1,validateStyle:!0,maxCanvasSize:[4096,4096],cancelPendingTileRequestsWhileZooming:!0,centerClampedToGround:!0},BT={showCompass:!0,showZoom:!0,visualizePitch:!1,visualizeRoll:!0};class VT{constructor(s,c,g=!1){this.mousedown=E=>{this.startMove(E,b.mousePos(this.element,E)),b.addEventListener(window,"mousemove",this.mousemove),b.addEventListener(window,"mouseup",this.mouseup)},this.mousemove=E=>{this.move(E,b.mousePos(this.element,E))},this.mouseup=E=>{this._rotatePitchHanlder.dragEnd(E),this.offTemp()},this.touchstart=E=>{E.targetTouches.length!==1?this.reset():(this._startPos=this._lastPos=b.touchPos(this.element,E.targetTouches)[0],this.startMove(E,this._startPos),b.addEventListener(window,"touchmove",this.touchmove,{passive:!1}),b.addEventListener(window,"touchend",this.touchend))},this.touchmove=E=>{E.targetTouches.length!==1?this.reset():(this._lastPos=b.touchPos(this.element,E.targetTouches)[0],this.move(E,this._lastPos))},this.touchend=E=>{E.targetTouches.length===0&&this._startPos&&this._lastPos&&this._startPos.dist(this._lastPos)<this._clickTolerance&&this.element.click(),delete this._startPos,delete this._lastPos,this.offTemp()},this.reset=()=>{this._rotatePitchHanlder.reset(),delete this._startPos,delete this._lastPos,this.offTemp()},this._clickTolerance=10,this.element=c;let y=new mv;this._rotatePitchHanlder=new qs({clickTolerance:3,move:(E,I)=>{let P=c.getBoundingClientRect(),L=new i.P((P.bottom-P.top)/2,(P.right-P.left)/2);return{bearingDelta:i.ce(new i.P(E.x,I.y),I,L),pitchDelta:g?-.5*(I.y-E.y):void 0}},moveStateManager:y,enable:!0,assignEvents:()=>{}}),this.map=s,b.addEventListener(c,"mousedown",this.mousedown),b.addEventListener(c,"touchstart",this.touchstart,{passive:!1}),b.addEventListener(c,"touchcancel",this.reset)}startMove(s,c){this._rotatePitchHanlder.dragStart(s,c),b.disableDrag()}move(s,c){let g=this.map,{bearingDelta:y,pitchDelta:E}=this._rotatePitchHanlder.dragMove(s,c)||{};y&&g.setBearing(g.getBearing()+y),E&&g.setPitch(g.getPitch()+E)}off(){let s=this.element;b.removeEventListener(s,"mousedown",this.mousedown),b.removeEventListener(s,"touchstart",this.touchstart,{passive:!1}),b.removeEventListener(window,"touchmove",this.touchmove,{passive:!1}),b.removeEventListener(window,"touchend",this.touchend),b.removeEventListener(s,"touchcancel",this.reset),this.offTemp()}offTemp(){b.enableDrag(),b.removeEventListener(window,"mousemove",this.mousemove),b.removeEventListener(window,"mouseup",this.mouseup),b.removeEventListener(window,"touchmove",this.touchmove,{passive:!1}),b.removeEventListener(window,"touchend",this.touchend)}}let Ea;function GT(w,s,c,g=!1){if(g||!c.getCoveringTilesDetailsProvider().allowWorldCopies())return w==null?void 0:w.wrap();let y=new i.Q(w.lng,w.lat);if(w=new i.Q(w.lng,w.lat),s){let E=new i.Q(w.lng-360,w.lat),I=new i.Q(w.lng+360,w.lat),P=c.locationToScreenPoint(w).distSqr(s);c.locationToScreenPoint(E).distSqr(s)<P?w=E:c.locationToScreenPoint(I).distSqr(s)<P&&(w=I)}for(;Math.abs(w.lng-c.center.lng)>180;){let E=c.locationToScreenPoint(w);if(E.x>=0&&E.y>=0&&E.x<=c.width&&E.y<=c.height)break;w.lng>c.center.lng?w.lng-=360:w.lng+=360}return w.lng!==y.lng&&c.isPointOnMapSurface(c.locationToScreenPoint(w))?w:y}let nc={center:"translate(-50%,-50%)",top:"translate(-50%,0)","top-left":"translate(0,0)","top-right":"translate(-100%,0)",bottom:"translate(-50%,-100%)","bottom-left":"translate(0,-100%)","bottom-right":"translate(-100%,-100%)",left:"translate(0,-50%)",right:"translate(-100%,-50%)"};function BN(w,s,c){let g=w.classList;for(let y in nc)g.remove(`maplibregl-${c}-anchor-${y}`);g.add(`maplibregl-${c}-anchor-${s}`)}class Nm extends i.E{constructor(s){if(super(),this._onKeyPress=c=>{let g=c.code,y=c.charCode||c.keyCode;g!=="Space"&&g!=="Enter"&&y!==32&&y!==13||this.togglePopup()},this._onMapClick=c=>{let g=c.originalEvent.target,y=this._element;this._popup&&(g===y||y.contains(g))&&this.togglePopup()},this._update=c=>{if(!this._map)return;let g=this._map.loaded()&&!this._map.isMoving();((c==null?void 0:c.type)==="terrain"||(c==null?void 0:c.type)==="render"&&!g)&&this._map.once("render",this._update),this._lngLat=GT(this._lngLat,this._flatPos,this._map.transform),this._flatPos=this._pos=this._map.project(this._lngLat)._add(this._offset),this._map.terrain&&(this._flatPos=this._map.transform.locationToScreenPoint(this._lngLat)._add(this._offset));let y="";this._rotationAlignment==="viewport"||this._rotationAlignment==="auto"?y=`rotateZ(${this._rotation}deg)`:this._rotationAlignment==="map"&&(y=`rotateZ(${this._rotation-this._map.getBearing()}deg)`);let E="";this._pitchAlignment==="viewport"||this._pitchAlignment==="auto"?E="rotateX(0deg)":this._pitchAlignment==="map"&&(E=`rotateX(${this._map.getPitch()}deg)`),this._subpixelPositioning||c&&c.type!=="moveend"||(this._pos=this._pos.round()),b.setTransform(this._element,`${nc[this._anchor]} translate(${this._pos.x}px, ${this._pos.y}px) ${E} ${y}`),v.frameAsync(new AbortController).then(()=>{this._updateOpacity(c&&c.type==="moveend")}).catch(()=>{})},this._onMove=c=>{if(!this._isDragging){let g=this._clickTolerance||this._map._clickTolerance;this._isDragging=c.point.dist(this._pointerdownPos)>=g}this._isDragging&&(this._pos=c.point.sub(this._positionDelta),this._lngLat=this._map.unproject(this._pos),this.setLngLat(this._lngLat),this._element.style.pointerEvents="none",this._state==="pending"&&(this._state="active",this.fire(new i.l("dragstart"))),this.fire(new i.l("drag")))},this._onUp=()=>{this._element.style.pointerEvents="auto",this._positionDelta=null,this._pointerdownPos=null,this._isDragging=!1,this._map.off("mousemove",this._onMove),this._map.off("touchmove",this._onMove),this._state==="active"&&this.fire(new i.l("dragend")),this._state="inactive"},this._addDragHandler=c=>{this._element.contains(c.originalEvent.target)&&(c.preventDefault(),this._positionDelta=c.point.sub(this._pos).add(this._offset),this._pointerdownPos=c.point,this._state="pending",this._map.on("mousemove",this._onMove),this._map.on("touchmove",this._onMove),this._map.once("mouseup",this._onUp),this._map.once("touchend",this._onUp))},this._anchor=s&&s.anchor||"center",this._color=s&&s.color||"#3FB1CE",this._scale=s&&s.scale||1,this._draggable=s&&s.draggable||!1,this._clickTolerance=s&&s.clickTolerance||0,this._subpixelPositioning=s&&s.subpixelPositioning||!1,this._isDragging=!1,this._state="inactive",this._rotation=s&&s.rotation||0,this._rotationAlignment=s&&s.rotationAlignment||"auto",this._pitchAlignment=s&&s.pitchAlignment&&s.pitchAlignment!=="auto"?s.pitchAlignment:this._rotationAlignment,this.setOpacity(s==null?void 0:s.opacity,s==null?void 0:s.opacityWhenCovered),s&&s.element)this._element=s.element,this._offset=i.P.convert(s&&s.offset||[0,0]);else{this._defaultMarker=!0,this._element=b.create("div");let c=b.createNS("http://www.w3.org/2000/svg","svg"),g=41,y=27;c.setAttributeNS(null,"display","block"),c.setAttributeNS(null,"height",`${g}px`),c.setAttributeNS(null,"width",`${y}px`),c.setAttributeNS(null,"viewBox",`0 0 ${y} ${g}`);let E=b.createNS("http://www.w3.org/2000/svg","g");E.setAttributeNS(null,"stroke","none"),E.setAttributeNS(null,"stroke-width","1"),E.setAttributeNS(null,"fill","none"),E.setAttributeNS(null,"fill-rule","evenodd");let I=b.createNS("http://www.w3.org/2000/svg","g");I.setAttributeNS(null,"fill-rule","nonzero");let P=b.createNS("http://www.w3.org/2000/svg","g");P.setAttributeNS(null,"transform","translate(3.0, 29.0)"),P.setAttributeNS(null,"fill","#000000");let L=[{rx:"10.5",ry:"5.25002273"},{rx:"10.5",ry:"5.25002273"},{rx:"9.5",ry:"4.77275007"},{rx:"8.5",ry:"4.29549936"},{rx:"7.5",ry:"3.81822308"},{rx:"6.5",ry:"3.34094679"},{rx:"5.5",ry:"2.86367051"},{rx:"4.5",ry:"2.38636864"}];for(let xe of L){let Ae=b.createNS("http://www.w3.org/2000/svg","ellipse");Ae.setAttributeNS(null,"opacity","0.04"),Ae.setAttributeNS(null,"cx","10.5"),Ae.setAttributeNS(null,"cy","5.80029008"),Ae.setAttributeNS(null,"rx",xe.rx),Ae.setAttributeNS(null,"ry",xe.ry),P.appendChild(Ae)}let z=b.createNS("http://www.w3.org/2000/svg","g");z.setAttributeNS(null,"fill",this._color);let U=b.createNS("http://www.w3.org/2000/svg","path");U.setAttributeNS(null,"d","M27,13.5 C27,19.074644 20.250001,27.000002 14.75,34.500002 C14.016665,35.500004 12.983335,35.500004 12.25,34.500002 C6.7499993,27.000002 0,19.222562 0,13.5 C0,6.0441559 6.0441559,0 13.5,0 C20.955844,0 27,6.0441559 27,13.5 Z"),z.appendChild(U);let W=b.createNS("http://www.w3.org/2000/svg","g");W.setAttributeNS(null,"opacity","0.25"),W.setAttributeNS(null,"fill","#000000");let H=b.createNS("http://www.w3.org/2000/svg","path");H.setAttributeNS(null,"d","M13.5,0 C6.0441559,0 0,6.0441559 0,13.5 C0,19.222562 6.7499993,27 12.25,34.5 C13,35.522727 14.016664,35.500004 14.75,34.5 C20.250001,27 27,19.074644 27,13.5 C27,6.0441559 20.955844,0 13.5,0 Z M13.5,1 C20.415404,1 26,6.584596 26,13.5 C26,15.898657 24.495584,19.181431 22.220703,22.738281 C19.945823,26.295132 16.705119,30.142167 13.943359,33.908203 C13.743445,34.180814 13.612715,34.322738 13.5,34.441406 C13.387285,34.322738 13.256555,34.180814 13.056641,33.908203 C10.284481,30.127985 7.4148684,26.314159 5.015625,22.773438 C2.6163816,19.232715 1,15.953538 1,13.5 C1,6.584596 6.584596,1 13.5,1 Z"),W.appendChild(H);let te=b.createNS("http://www.w3.org/2000/svg","g");te.setAttributeNS(null,"transform","translate(6.0, 7.0)"),te.setAttributeNS(null,"fill","#FFFFFF");let ae=b.createNS("http://www.w3.org/2000/svg","g");ae.setAttributeNS(null,"transform","translate(8.0, 8.0)");let be=b.createNS("http://www.w3.org/2000/svg","circle");be.setAttributeNS(null,"fill","#000000"),be.setAttributeNS(null,"opacity","0.25"),be.setAttributeNS(null,"cx","5.5"),be.setAttributeNS(null,"cy","5.5"),be.setAttributeNS(null,"r","5.4999962");let _e=b.createNS("http://www.w3.org/2000/svg","circle");_e.setAttributeNS(null,"fill","#FFFFFF"),_e.setAttributeNS(null,"cx","5.5"),_e.setAttributeNS(null,"cy","5.5"),_e.setAttributeNS(null,"r","5.4999962"),ae.appendChild(be),ae.appendChild(_e),I.appendChild(P),I.appendChild(z),I.appendChild(W),I.appendChild(te),I.appendChild(ae),c.appendChild(I),c.setAttributeNS(null,"height",g*this._scale+"px"),c.setAttributeNS(null,"width",y*this._scale+"px"),this._element.appendChild(c),this._offset=i.P.convert(s&&s.offset||[0,-14])}if(this._element.classList.add("maplibregl-marker"),this._element.addEventListener("dragstart",c=>{c.preventDefault()}),this._element.addEventListener("mousedown",c=>{c.preventDefault()}),BN(this._element,this._anchor,"marker"),s&&s.className)for(let c of s.className.split(" "))this._element.classList.add(c);this._popup=null}addTo(s){return this.remove(),this._map=s,this._element.hasAttribute("aria-label")||this._element.setAttribute("aria-label",s._getUIString("Marker.Title")),s.getCanvasContainer().appendChild(this._element),s.on("move",this._update),s.on("moveend",this._update),s.on("terrain",this._update),s.on("projectiontransition",this._update),this.setDraggable(this._draggable),this._update(),this._map.on("click",this._onMapClick),this}remove(){return this._opacityTimeout&&(clearTimeout(this._opacityTimeout),delete this._opacityTimeout),this._map&&(this._map.off("click",this._onMapClick),this._map.off("move",this._update),this._map.off("moveend",this._update),this._map.off("terrain",this._update),this._map.off("projectiontransition",this._update),this._map.off("mousedown",this._addDragHandler),this._map.off("touchstart",this._addDragHandler),this._map.off("mouseup",this._onUp),this._map.off("touchend",this._onUp),this._map.off("mousemove",this._onMove),this._map.off("touchmove",this._onMove),delete this._map),b.remove(this._element),this._popup&&this._popup.remove(),this}getLngLat(){return this._lngLat}setLngLat(s){return this._lngLat=i.Q.convert(s),this._pos=null,this._popup&&this._popup.setLngLat(this._lngLat),this._update(),this}getElement(){return this._element}setPopup(s){if(this._popup&&(this._popup.remove(),this._popup=null,this._element.removeEventListener("keypress",this._onKeyPress),this._originalTabIndex||this._element.removeAttribute("tabindex")),s){if(!("offset"in s.options)){let y=Math.abs(13.5)/Math.SQRT2;s.options.offset=this._defaultMarker?{top:[0,0],"top-left":[0,0],"top-right":[0,0],bottom:[0,-38.1],"bottom-left":[y,-1*(38.1-13.5+y)],"bottom-right":[-y,-1*(38.1-13.5+y)],left:[13.5,-1*(38.1-13.5)],right:[-13.5,-1*(38.1-13.5)]}:this._offset}this._popup=s,this._originalTabIndex=this._element.getAttribute("tabindex"),this._originalTabIndex||this._element.setAttribute("tabindex","0"),this._element.addEventListener("keypress",this._onKeyPress)}return this}setSubpixelPositioning(s){return this._subpixelPositioning=s,this}getPopup(){return this._popup}togglePopup(){let s=this._popup;return this._element.style.opacity===this._opacityWhenCovered?this:s?(s.isOpen()?s.remove():(s.setLngLat(this._lngLat),s.addTo(this._map)),this):this}_updateOpacity(s=!1){var c,g;let y=(c=this._map)===null||c===void 0?void 0:c.terrain,E=this._map.transform.isLocationOccluded(this._lngLat);if(!y||E){let te=E?this._opacityWhenCovered:this._opacity;return void(this._element.style.opacity!==te&&(this._element.style.opacity=te))}if(s)this._opacityTimeout=null;else{if(this._opacityTimeout)return;this._opacityTimeout=setTimeout(()=>{this._opacityTimeout=null},100)}let I=this._map,P=I.terrain.depthAtPoint(this._pos),L=I.terrain.getElevationForLngLatZoom(this._lngLat,I.transform.tileZoom);if(I.transform.lngLatToCameraDepth(this._lngLat,L)-P<.006)return void(this._element.style.opacity=this._opacity);let z=-this._offset.y/I.transform.pixelsPerMeter,U=Math.sin(I.getPitch()*Math.PI/180)*z,W=I.terrain.depthAtPoint(new i.P(this._pos.x,this._pos.y-this._offset.y)),H=I.transform.lngLatToCameraDepth(this._lngLat,L+U)-W>.006;!((g=this._popup)===null||g===void 0)&&g.isOpen()&&H&&this._popup.remove(),this._element.style.opacity=H?this._opacityWhenCovered:this._opacity}getOffset(){return this._offset}setOffset(s){return this._offset=i.P.convert(s),this._update(),this}addClassName(s){this._element.classList.add(s)}removeClassName(s){this._element.classList.remove(s)}toggleClassName(s){return this._element.classList.toggle(s)}setDraggable(s){return this._draggable=!!s,this._map&&(s?(this._map.on("mousedown",this._addDragHandler),this._map.on("touchstart",this._addDragHandler)):(this._map.off("mousedown",this._addDragHandler),this._map.off("touchstart",this._addDragHandler))),this}isDraggable(){return this._draggable}setRotation(s){return this._rotation=s||0,this._update(),this}getRotation(){return this._rotation}setRotationAlignment(s){return this._rotationAlignment=s||"auto",this._update(),this}getRotationAlignment(){return this._rotationAlignment}setPitchAlignment(s){return this._pitchAlignment=s&&s!=="auto"?s:this._rotationAlignment,this._update(),this}getPitchAlignment(){return this._pitchAlignment}setOpacity(s,c){return(this._opacity===void 0||s===void 0&&c===void 0)&&(this._opacity="1",this._opacityWhenCovered="0.2"),s!==void 0&&(this._opacity=s),c!==void 0&&(this._opacityWhenCovered=c),this._map&&this._updateOpacity(!0),this}}let Ki={positionOptions:{enableHighAccuracy:!1,maximumAge:0,timeout:6e3},fitBoundsOptions:{maxZoom:15},trackUserLocation:!1,showAccuracyCircle:!0,showUserLocation:!0},Ri=0,yv=!1,d1={maxWidth:100,unit:"metric"};function h1(w,s,c){let g=c&&c.maxWidth||100,y=w._container.clientHeight/2,E=w._container.clientWidth/2,I=w.unproject([E-g/2,y]),P=w.unproject([E+g/2,y]),L=Math.round(w.project(P).x-w.project(I).x),z=Math.min(g,L,w._container.clientWidth),U=I.distanceTo(P);if(c&&c.unit==="imperial"){let W=3.2808*U;W>5280?Dm(s,z,W/5280,w._getUIString("ScaleControl.Miles")):Dm(s,z,W,w._getUIString("ScaleControl.Feet"))}else c&&c.unit==="nautical"?Dm(s,z,U/1852,w._getUIString("ScaleControl.NauticalMiles")):U>=1e3?Dm(s,z,U/1e3,w._getUIString("ScaleControl.Kilometers")):Dm(s,z,U,w._getUIString("ScaleControl.Meters"))}function Dm(w,s,c,g){let y=function(E){let I=Math.pow(10,`${Math.floor(E)}`.length-1),P=E/I;return P=P>=10?10:P>=5?5:P>=3?3:P>=2?2:P>=1?1:function(L){let z=Math.pow(10,Math.ceil(-Math.log(L)/Math.LN10));return Math.round(L*z)/z}(P),I*P}(c);w.style.width=s*(y/c)+"px",w.innerHTML=`${y}&nbsp;${g}`}let HT={closeButton:!0,closeOnClick:!0,focusAfterOpen:!0,className:"",maxWidth:"240px",subpixelPositioning:!1,locationOccludedOpacity:void 0},WT=["a[href]","[tabindex]:not([tabindex='-1'])","[contenteditable]:not([contenteditable='false'])","button:not([disabled])","input:not([disabled])","select:not([disabled])","textarea:not([disabled])"].join(", ");function _v(w){if(w){if(typeof w=="number"){let s=Math.round(Math.abs(w)/Math.SQRT2);return{center:new i.P(0,0),top:new i.P(0,w),"top-left":new i.P(s,s),"top-right":new i.P(-s,s),bottom:new i.P(0,-w),"bottom-left":new i.P(s,-s),"bottom-right":new i.P(-s,-s),left:new i.P(w,0),right:new i.P(-w,0)}}if(w instanceof i.P||Array.isArray(w)){let s=i.P.convert(w);return{center:s,top:s,"top-left":s,"top-right":s,bottom:s,"bottom-left":s,"bottom-right":s,left:s,right:s}}return{center:i.P.convert(w.center||[0,0]),top:i.P.convert(w.top||[0,0]),"top-left":i.P.convert(w["top-left"]||[0,0]),"top-right":i.P.convert(w["top-right"]||[0,0]),bottom:i.P.convert(w.bottom||[0,0]),"bottom-left":i.P.convert(w["bottom-left"]||[0,0]),"bottom-right":i.P.convert(w["bottom-right"]||[0,0]),left:i.P.convert(w.left||[0,0]),right:i.P.convert(w.right||[0,0])}}return _v(new i.P(0,0))}let $T=a;o.AJAXError=i.cq,o.Event=i.l,o.Evented=i.E,o.LngLat=i.Q,o.MercatorCoordinate=i.$,o.Point=i.P,o.addProtocol=i.cr,o.config=i.a,o.removeProtocol=i.cs,o.AttributionControl=gi,o.BoxZoomHandler=kT,o.CanvasSource=Tr,o.CooperativeGesturesHandler=Ex,o.DoubleClickZoomHandler=wx,o.DragPanHandler=jN,o.DragRotateHandler=qN,o.EdgeInsets=ks,o.FullscreenControl=class extends i.E{constructor(w={}){super(),this._onFullscreenChange=()=>{var s;let c=window.document.fullscreenElement||window.document.mozFullScreenElement||window.document.webkitFullscreenElement||window.document.msFullscreenElement;for(;!((s=c==null?void 0:c.shadowRoot)===null||s===void 0)&&s.fullscreenElement;)c=c.shadowRoot.fullscreenElement;c===this._container!==this._fullscreen&&this._handleFullscreenChange()},this._onClickFullscreen=()=>{this._isFullscreen()?this._exitFullscreen():this._requestFullscreen()},this._fullscreen=!1,w&&w.container&&(w.container instanceof HTMLElement?this._container=w.container:i.w("Full screen control 'container' must be a DOM element.")),"onfullscreenchange"in document?this._fullscreenchange="fullscreenchange":"onmozfullscreenchange"in document?this._fullscreenchange="mozfullscreenchange":"onwebkitfullscreenchange"in document?this._fullscreenchange="webkitfullscreenchange":"onmsfullscreenchange"in document&&(this._fullscreenchange="MSFullscreenChange")}onAdd(w){return this._map=w,this._container||(this._container=this._map.getContainer()),this._controlContainer=b.create("div","maplibregl-ctrl maplibregl-ctrl-group"),this._setupUI(),this._controlContainer}onRemove(){b.remove(this._controlContainer),this._map=null,window.document.removeEventListener(this._fullscreenchange,this._onFullscreenChange)}_setupUI(){let w=this._fullscreenButton=b.create("button","maplibregl-ctrl-fullscreen",this._controlContainer);b.create("span","maplibregl-ctrl-icon",w).setAttribute("aria-hidden","true"),w.type="button",this._updateTitle(),this._fullscreenButton.addEventListener("click",this._onClickFullscreen),window.document.addEventListener(this._fullscreenchange,this._onFullscreenChange)}_updateTitle(){let w=this._getTitle();this._fullscreenButton.setAttribute("aria-label",w),this._fullscreenButton.title=w}_getTitle(){return this._map._getUIString(this._isFullscreen()?"FullscreenControl.Exit":"FullscreenControl.Enter")}_isFullscreen(){return this._fullscreen}_handleFullscreenChange(){this._fullscreen=!this._fullscreen,this._fullscreenButton.classList.toggle("maplibregl-ctrl-shrink"),this._fullscreenButton.classList.toggle("maplibregl-ctrl-fullscreen"),this._updateTitle(),this._fullscreen?(this.fire(new i.l("fullscreenstart")),this._prevCooperativeGesturesEnabled=this._map.cooperativeGestures.isEnabled(),this._map.cooperativeGestures.disable()):(this.fire(new i.l("fullscreenend")),this._prevCooperativeGesturesEnabled&&this._map.cooperativeGestures.enable())}_exitFullscreen(){window.document.exitFullscreen?window.document.exitFullscreen():window.document.mozCancelFullScreen?window.document.mozCancelFullScreen():window.document.msExitFullscreen?window.document.msExitFullscreen():window.document.webkitCancelFullScreen?window.document.webkitCancelFullScreen():this._togglePseudoFullScreen()}_requestFullscreen(){this._container.requestFullscreen?this._container.requestFullscreen():this._container.mozRequestFullScreen?this._container.mozRequestFullScreen():this._container.msRequestFullscreen?this._container.msRequestFullscreen():this._container.webkitRequestFullscreen?this._container.webkitRequestFullscreen():this._togglePseudoFullScreen()}_togglePseudoFullScreen(){this._container.classList.toggle("maplibregl-pseudo-fullscreen"),this._handleFullscreenChange(),this._map.resize()}},o.GeoJSONSource=dr,o.GeolocateControl=class extends i.E{constructor(w){super(),this._onSuccess=s=>{if(this._map){if(this._isOutOfMapMaxBounds(s))return this._setErrorState(),this.fire(new i.l("outofmaxbounds",s)),this._updateMarker(),void this._finish();if(this.options.trackUserLocation)switch(this._lastKnownPosition=s,this._watchState){case"WAITING_ACTIVE":case"ACTIVE_LOCK":case"ACTIVE_ERROR":this._watchState="ACTIVE_LOCK",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active-error"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-active");break;case"BACKGROUND":case"BACKGROUND_ERROR":this._watchState="BACKGROUND",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-background-error"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-background");break;default:throw new Error(`Unexpected watchState ${this._watchState}`)}this.options.showUserLocation&&this._watchState!=="OFF"&&this._updateMarker(s),this.options.trackUserLocation&&this._watchState!=="ACTIVE_LOCK"||this._updateCamera(s),this.options.showUserLocation&&this._dotElement.classList.remove("maplibregl-user-location-dot-stale"),this.fire(new i.l("geolocate",s)),this._finish()}},this._updateCamera=s=>{let c=new i.Q(s.coords.longitude,s.coords.latitude),g=s.coords.accuracy,y=this._map.getBearing(),E=i.e({bearing:y},this.options.fitBoundsOptions),I=St.fromLngLat(c,g);this._map.fitBounds(I,E,{geolocateSource:!0})},this._updateMarker=s=>{if(s){let c=new i.Q(s.coords.longitude,s.coords.latitude);this._accuracyCircleMarker.setLngLat(c).addTo(this._map),this._userLocationDotMarker.setLngLat(c).addTo(this._map),this._accuracy=s.coords.accuracy,this.options.showUserLocation&&this.options.showAccuracyCircle&&this._updateCircleRadius()}else this._userLocationDotMarker.remove(),this._accuracyCircleMarker.remove()},this._onZoom=()=>{this.options.showUserLocation&&this.options.showAccuracyCircle&&this._updateCircleRadius()},this._onError=s=>{if(this._map){if(s.code===1){this._watchState="OFF",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active-error"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-background"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-background-error"),this._geolocateButton.disabled=!0;let c=this._map._getUIString("GeolocateControl.LocationNotAvailable");this._geolocateButton.title=c,this._geolocateButton.setAttribute("aria-label",c),this._geolocationWatchID!==void 0&&this._clearWatch()}else{if(s.code===3&&yv)return;this.options.trackUserLocation&&this._setErrorState()}this._watchState!=="OFF"&&this.options.showUserLocation&&this._dotElement.classList.add("maplibregl-user-location-dot-stale"),this.fire(new i.l("error",s)),this._finish()}},this._finish=()=>{this._timeoutId&&clearTimeout(this._timeoutId),this._timeoutId=void 0},this._setupUI=()=>{this._map&&(this._container.addEventListener("contextmenu",s=>s.preventDefault()),this._geolocateButton=b.create("button","maplibregl-ctrl-geolocate",this._container),b.create("span","maplibregl-ctrl-icon",this._geolocateButton).setAttribute("aria-hidden","true"),this._geolocateButton.type="button",this._geolocateButton.disabled=!0)},this._finishSetupUI=s=>{if(this._map){if(s===!1){i.w("Geolocation support is not available so the GeolocateControl will be disabled.");let c=this._map._getUIString("GeolocateControl.LocationNotAvailable");this._geolocateButton.disabled=!0,this._geolocateButton.title=c,this._geolocateButton.setAttribute("aria-label",c)}else{let c=this._map._getUIString("GeolocateControl.FindMyLocation");this._geolocateButton.disabled=!1,this._geolocateButton.title=c,this._geolocateButton.setAttribute("aria-label",c)}this.options.trackUserLocation&&(this._geolocateButton.setAttribute("aria-pressed","false"),this._watchState="OFF"),this.options.showUserLocation&&(this._dotElement=b.create("div","maplibregl-user-location-dot"),this._userLocationDotMarker=new Nm({element:this._dotElement}),this._circleElement=b.create("div","maplibregl-user-location-accuracy-circle"),this._accuracyCircleMarker=new Nm({element:this._circleElement,pitchAlignment:"map"}),this.options.trackUserLocation&&(this._watchState="OFF"),this._map.on("zoom",this._onZoom)),this._geolocateButton.addEventListener("click",()=>this.trigger()),this._setup=!0,this.options.trackUserLocation&&this._map.on("movestart",c=>{c.geolocateSource||this._watchState!=="ACTIVE_LOCK"||c.originalEvent&&c.originalEvent.type==="resize"||(this._watchState="BACKGROUND",this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-background"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active"),this.fire(new i.l("trackuserlocationend")),this.fire(new i.l("userlocationlostfocus")))})}},this.options=i.e({},Ki,w)}onAdd(w){return this._map=w,this._container=b.create("div","maplibregl-ctrl maplibregl-ctrl-group"),this._setupUI(),function(){return i._(this,arguments,void 0,function*(s=!1){if(Ea!==void 0&&!s)return Ea;if(window.navigator.permissions===void 0)return Ea=!!window.navigator.geolocation,Ea;try{Ea=(yield window.navigator.permissions.query({name:"geolocation"})).state!=="denied"}catch(c){Ea=!!window.navigator.geolocation}return Ea})}().then(s=>this._finishSetupUI(s)),this._container}onRemove(){this._geolocationWatchID!==void 0&&(window.navigator.geolocation.clearWatch(this._geolocationWatchID),this._geolocationWatchID=void 0),this.options.showUserLocation&&this._userLocationDotMarker&&this._userLocationDotMarker.remove(),this.options.showAccuracyCircle&&this._accuracyCircleMarker&&this._accuracyCircleMarker.remove(),b.remove(this._container),this._map.off("zoom",this._onZoom),this._map=void 0,Ri=0,yv=!1}_isOutOfMapMaxBounds(w){let s=this._map.getMaxBounds(),c=w.coords;return s&&(c.longitude<s.getWest()||c.longitude>s.getEast()||c.latitude<s.getSouth()||c.latitude>s.getNorth())}_setErrorState(){switch(this._watchState){case"WAITING_ACTIVE":this._watchState="ACTIVE_ERROR",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-active-error");break;case"ACTIVE_LOCK":this._watchState="ACTIVE_ERROR",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-active-error"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-waiting");break;case"BACKGROUND":this._watchState="BACKGROUND_ERROR",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-background"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-background-error"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-waiting");break;case"ACTIVE_ERROR":break;default:throw new Error(`Unexpected watchState ${this._watchState}`)}}_updateCircleRadius(){let w=this._map.getBounds(),s=w.getSouthEast(),c=w.getNorthEast(),g=s.distanceTo(c),y=Math.ceil(this._accuracy/(g/this._map._container.clientHeight)*2);this._circleElement.style.width=`${y}px`,this._circleElement.style.height=`${y}px`}trigger(){if(!this._setup)return i.w("Geolocate control triggered before added to a map"),!1;if(this.options.trackUserLocation){switch(this._watchState){case"OFF":this._watchState="WAITING_ACTIVE",this.fire(new i.l("trackuserlocationstart"));break;case"WAITING_ACTIVE":case"ACTIVE_LOCK":case"ACTIVE_ERROR":case"BACKGROUND_ERROR":Ri--,yv=!1,this._watchState="OFF",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active-error"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-background"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-background-error"),this.fire(new i.l("trackuserlocationend"));break;case"BACKGROUND":this._watchState="ACTIVE_LOCK",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-background"),this._lastKnownPosition&&this._updateCamera(this._lastKnownPosition),this.fire(new i.l("trackuserlocationstart")),this.fire(new i.l("userlocationfocus"));break;default:throw new Error(`Unexpected watchState ${this._watchState}`)}switch(this._watchState){case"WAITING_ACTIVE":this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-waiting"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-active");break;case"ACTIVE_LOCK":this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-active");break;case"OFF":break;default:throw new Error(`Unexpected watchState ${this._watchState}`)}if(this._watchState==="OFF"&&this._geolocationWatchID!==void 0)this._clearWatch();else if(this._geolocationWatchID===void 0){let w;this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-waiting"),this._geolocateButton.setAttribute("aria-pressed","true"),Ri++,Ri>1?(w={maximumAge:6e5,timeout:0},yv=!0):(w=this.options.positionOptions,yv=!1),this._geolocationWatchID=window.navigator.geolocation.watchPosition(this._onSuccess,this._onError,w)}}else window.navigator.geolocation.getCurrentPosition(this._onSuccess,this._onError,this.options.positionOptions),this._timeoutId=setTimeout(this._finish,1e4);return!0}_clearWatch(){window.navigator.geolocation.clearWatch(this._geolocationWatchID),this._geolocationWatchID=void 0,this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-waiting"),this._geolocateButton.setAttribute("aria-pressed","false"),this.options.showUserLocation&&this._updateMarker(null)}},o.GlobeControl=class{constructor(){this._toggleProjection=()=>{var w;let s=(w=this._map.getProjection())===null||w===void 0?void 0:w.type;this._map.setProjection(s!=="mercator"&&s?{type:"mercator"}:{type:"globe"}),this._updateGlobeIcon()},this._updateGlobeIcon=()=>{var w;this._globeButton.classList.remove("maplibregl-ctrl-globe"),this._globeButton.classList.remove("maplibregl-ctrl-globe-enabled"),((w=this._map.getProjection())===null||w===void 0?void 0:w.type)==="globe"?(this._globeButton.classList.add("maplibregl-ctrl-globe-enabled"),this._globeButton.title=this._map._getUIString("GlobeControl.Disable")):(this._globeButton.classList.add("maplibregl-ctrl-globe"),this._globeButton.title=this._map._getUIString("GlobeControl.Enable"))}}onAdd(w){return this._map=w,this._container=b.create("div","maplibregl-ctrl maplibregl-ctrl-group"),this._globeButton=b.create("button","maplibregl-ctrl-globe",this._container),b.create("span","maplibregl-ctrl-icon",this._globeButton).setAttribute("aria-hidden","true"),this._globeButton.type="button",this._globeButton.addEventListener("click",this._toggleProjection),this._updateGlobeIcon(),this._map.on("styledata",this._updateGlobeIcon),this._container}onRemove(){b.remove(this._container),this._map.off("styledata",this._updateGlobeIcon),this._globeButton.removeEventListener("click",this._toggleProjection),this._map=void 0}},o.Hash=PT,o.ImageSource=Er,o.KeyboardHandler=vv,o.LngLatBounds=St,o.LogoControl=p1,o.Map=class extends NU{constructor(w){var s,c;i.cn.mark(i.co.create);let g=Object.assign(Object.assign(Object.assign({},f1),w),{canvasContextAttributes:Object.assign(Object.assign({},f1.canvasContextAttributes),w.canvasContextAttributes)});if(g.minZoom!=null&&g.maxZoom!=null&&g.minZoom>g.maxZoom)throw new Error("maxZoom must be greater than or equal to minZoom");if(g.minPitch!=null&&g.maxPitch!=null&&g.minPitch>g.maxPitch)throw new Error("maxPitch must be greater than or equal to minPitch");if(g.minPitch!=null&&g.minPitch<0)throw new Error("minPitch must be greater than or equal to 0");if(g.maxPitch!=null&&g.maxPitch>180)throw new Error("maxPitch must be less than or equal to 180");let y=new jf,E=new V0;if(g.minZoom!==void 0&&y.setMinZoom(g.minZoom),g.maxZoom!==void 0&&y.setMaxZoom(g.maxZoom),g.minPitch!==void 0&&y.setMinPitch(g.minPitch),g.maxPitch!==void 0&&y.setMaxPitch(g.maxPitch),g.renderWorldCopies!==void 0&&y.setRenderWorldCopies(g.renderWorldCopies),super(y,E,{bearingSnap:g.bearingSnap}),this._idleTriggered=!1,this._crossFadingFactor=1,this._renderTaskQueue=new UT,this._controls=[],this._mapId=i.a4(),this._contextLost=P=>{P.preventDefault(),this._frameRequest&&(this._frameRequest.abort(),this._frameRequest=null),this.fire(new i.l("webglcontextlost",{originalEvent:P}))},this._contextRestored=P=>{this._setupPainter(),this.resize(),this._update(),this.fire(new i.l("webglcontextrestored",{originalEvent:P}))},this._onMapScroll=P=>{if(P.target===this._container)return this._container.scrollTop=0,this._container.scrollLeft=0,!1},this._onWindowOnline=()=>{this._update()},this._interactive=g.interactive,this._maxTileCacheSize=g.maxTileCacheSize,this._maxTileCacheZoomLevels=g.maxTileCacheZoomLevels,this._canvasContextAttributes=Object.assign({},g.canvasContextAttributes),this._trackResize=g.trackResize===!0,this._bearingSnap=g.bearingSnap,this._centerClampedToGround=g.centerClampedToGround,this._refreshExpiredTiles=g.refreshExpiredTiles===!0,this._fadeDuration=g.fadeDuration,this._crossSourceCollisions=g.crossSourceCollisions===!0,this._collectResourceTiming=g.collectResourceTiming===!0,this._locale=Object.assign(Object.assign({},Sr),g.locale),this._clickTolerance=g.clickTolerance,this._overridePixelRatio=g.pixelRatio,this._maxCanvasSize=g.maxCanvasSize,this.transformCameraUpdate=g.transformCameraUpdate,this.cancelPendingTileRequestsWhileZooming=g.cancelPendingTileRequestsWhileZooming===!0,this._imageQueueHandle=q.addThrottleControl(()=>this.isMoving()),this._requestManager=new B(g.transformRequest),typeof g.container=="string"){if(this._container=document.getElementById(g.container),!this._container)throw new Error(`Container '${g.container}' not found.`)}else{if(!(g.container instanceof HTMLElement))throw new Error("Invalid type: 'container' must be a String or HTMLElement.");this._container=g.container}if(g.maxBounds&&this.setMaxBounds(g.maxBounds),this._setupContainer(),this._setupPainter(),this.on("move",()=>this._update(!1)),this.on("moveend",()=>this._update(!1)),this.on("zoom",()=>this._update(!0)),this.on("terrain",()=>{this.painter.terrainFacilitator.dirty=!0,this._update(!0)}),this.once("idle",()=>{this._idleTriggered=!0}),typeof window!="undefined"){addEventListener("online",this._onWindowOnline,!1);let P=!1,L=s1(z=>{this._trackResize&&!this._removed&&(this.resize(z),this.redraw())},50);this._resizeObserver=new ResizeObserver(z=>{P?L(z):P=!0}),this._resizeObserver.observe(this._container)}this.handlers=new PU(this,g),this._hash=g.hash&&new PT(typeof g.hash=="string"&&g.hash||void 0).addTo(this),this._hash&&this._hash._onHashChange()||(this.jumpTo({center:g.center,elevation:g.elevation,zoom:g.zoom,bearing:g.bearing,pitch:g.pitch,roll:g.roll}),g.bounds&&(this.resize(),this.fitBounds(g.bounds,i.e({},g.fitBoundsOptions,{duration:0}))));let I=typeof g.style=="string"||((c=(s=g.style)===null||s===void 0?void 0:s.projection)===null||c===void 0?void 0:c.type)!=="globe";this.resize(null,I),this._localIdeographFontFamily=g.localIdeographFontFamily,this._validateStyle=g.validateStyle,g.style&&this.setStyle(g.style,{localIdeographFontFamily:g.localIdeographFontFamily}),g.attributionControl&&this.addControl(new gi(typeof g.attributionControl=="boolean"?void 0:g.attributionControl)),g.maplibreLogo&&this.addControl(new p1,g.logoPosition),this.on("style.load",()=>{if(I||this._resizeTransform(),this.transform.unmodified){let P=i.O(this.style.stylesheet,["center","zoom","bearing","pitch","roll"]);this.jumpTo(P)}}),this.on("data",P=>{this._update(P.dataType==="style"),this.fire(new i.l(`${P.dataType}data`,P))}),this.on("dataloading",P=>{this.fire(new i.l(`${P.dataType}dataloading`,P))}),this.on("dataabort",P=>{this.fire(new i.l("sourcedataabort",P))})}_getMapId(){return this._mapId}addControl(w,s){if(s===void 0&&(s=w.getDefaultPosition?w.getDefaultPosition():"top-right"),!w||!w.onAdd)return this.fire(new i.k(new Error("Invalid argument to map.addControl(). Argument must be a control with onAdd and onRemove methods.")));let c=w.onAdd(this);this._controls.push(w);let g=this._controlPositions[s];return s.indexOf("bottom")!==-1?g.insertBefore(c,g.firstChild):g.appendChild(c),this}removeControl(w){if(!w||!w.onRemove)return this.fire(new i.k(new Error("Invalid argument to map.removeControl(). Argument must be a control with onAdd and onRemove methods.")));let s=this._controls.indexOf(w);return s>-1&&this._controls.splice(s,1),w.onRemove(this),this}hasControl(w){return this._controls.indexOf(w)>-1}calculateCameraOptionsFromTo(w,s,c,g){return g==null&&this.terrain&&(g=this.terrain.getElevationForLngLatZoom(c,this.transform.tileZoom)),super.calculateCameraOptionsFromTo(w,s,c,g)}resize(w,s=!0){let[c,g]=this._containerDimensions(),y=this._getClampedPixelRatio(c,g);if(this._resizeCanvas(c,g,y),this.painter.resize(c,g,y),this.painter.overLimit()){let I=this.painter.context.gl;this._maxCanvasSize=[I.drawingBufferWidth,I.drawingBufferHeight];let P=this._getClampedPixelRatio(c,g);this._resizeCanvas(c,g,P),this.painter.resize(c,g,P)}this._resizeTransform(s);let E=!this._moving;return E&&(this.stop(),this.fire(new i.l("movestart",w)).fire(new i.l("move",w))),this.fire(new i.l("resize",w)),E&&this.fire(new i.l("moveend",w)),this}_resizeTransform(w=!0){var s;let[c,g]=this._containerDimensions();this.transform.resize(c,g,w),(s=this._requestedCameraState)===null||s===void 0||s.resize(c,g,w)}_getClampedPixelRatio(w,s){let{0:c,1:g}=this._maxCanvasSize,y=this.getPixelRatio(),E=w*y,I=s*y;return Math.min(E>c?c/E:1,I>g?g/I:1)*y}getPixelRatio(){var w;return(w=this._overridePixelRatio)!==null&&w!==void 0?w:devicePixelRatio}setPixelRatio(w){this._overridePixelRatio=w,this.resize()}getBounds(){return this.transform.getBounds()}getMaxBounds(){return this.transform.getMaxBounds()}setMaxBounds(w){return this.transform.setMaxBounds(St.convert(w)),this._update()}setMinZoom(w){if((w=w==null?-2:w)>=-2&&w<=this.transform.maxZoom)return this.transform.setMinZoom(w),this._update(),this.getZoom()<w&&this.setZoom(w),this;throw new Error("minZoom must be between -2 and the current maxZoom, inclusive")}getMinZoom(){return this.transform.minZoom}setMaxZoom(w){if((w=w==null?22:w)>=this.transform.minZoom)return this.transform.setMaxZoom(w),this._update(),this.getZoom()>w&&this.setZoom(w),this;throw new Error("maxZoom must be greater than the current minZoom")}getMaxZoom(){return this.transform.maxZoom}setMinPitch(w){if((w=w==null?0:w)<0)throw new Error("minPitch must be greater than or equal to 0");if(w>=0&&w<=this.transform.maxPitch)return this.transform.setMinPitch(w),this._update(),this.getPitch()<w&&this.setPitch(w),this;throw new Error("minPitch must be between 0 and the current maxPitch, inclusive")}getMinPitch(){return this.transform.minPitch}setMaxPitch(w){if((w=w==null?60:w)>180)throw new Error("maxPitch must be less than or equal to 180");if(w>=this.transform.minPitch)return this.transform.setMaxPitch(w),this._update(),this.getPitch()>w&&this.setPitch(w),this;throw new Error("maxPitch must be greater than the current minPitch")}getMaxPitch(){return this.transform.maxPitch}getRenderWorldCopies(){return this.transform.renderWorldCopies}setRenderWorldCopies(w){return this.transform.setRenderWorldCopies(w),this._update()}project(w){return this.transform.locationToScreenPoint(i.Q.convert(w),this.style&&this.terrain)}unproject(w){return this.transform.screenPointToLocation(i.P.convert(w),this.terrain)}isMoving(){var w;return this._moving||((w=this.handlers)===null||w===void 0?void 0:w.isMoving())}isZooming(){var w;return this._zooming||((w=this.handlers)===null||w===void 0?void 0:w.isZooming())}isRotating(){var w;return this._rotating||((w=this.handlers)===null||w===void 0?void 0:w.isRotating())}_createDelegatedListener(w,s,c){if(w==="mouseenter"||w==="mouseover"){let g=!1;return{layers:s,listener:c,delegates:{mousemove:E=>{let I=s.filter(L=>this.getLayer(L)),P=I.length!==0?this.queryRenderedFeatures(E.point,{layers:I}):[];P.length?g||(g=!0,c.call(this,new qa(w,this,E.originalEvent,{features:P}))):g=!1},mouseout:()=>{g=!1}}}}if(w==="mouseleave"||w==="mouseout"){let g=!1;return{layers:s,listener:c,delegates:{mousemove:I=>{let P=s.filter(L=>this.getLayer(L));(P.length!==0?this.queryRenderedFeatures(I.point,{layers:P}):[]).length?g=!0:g&&(g=!1,c.call(this,new qa(w,this,I.originalEvent)))},mouseout:I=>{g&&(g=!1,c.call(this,new qa(w,this,I.originalEvent)))}}}}{let g=y=>{let E=s.filter(P=>this.getLayer(P)),I=E.length!==0?this.queryRenderedFeatures(y.point,{layers:E}):[];I.length&&(y.features=I,c.call(this,y),delete y.features)};return{layers:s,listener:c,delegates:{[w]:g}}}}_saveDelegatedListener(w,s){this._delegatedListeners=this._delegatedListeners||{},this._delegatedListeners[w]=this._delegatedListeners[w]||[],this._delegatedListeners[w].push(s)}_removeDelegatedListener(w,s,c){if(!this._delegatedListeners||!this._delegatedListeners[w])return;let g=this._delegatedListeners[w];for(let y=0;y<g.length;y++){let E=g[y];if(E.listener===c&&E.layers.length===s.length&&E.layers.every(I=>s.includes(I))){for(let I in E.delegates)this.off(I,E.delegates[I]);return void g.splice(y,1)}}}on(w,s,c){if(c===void 0)return super.on(w,s);let g=typeof s=="string"?[s]:s,y=this._createDelegatedListener(w,g,c);this._saveDelegatedListener(w,y);for(let E in y.delegates)this.on(E,y.delegates[E]);return{unsubscribe:()=>{this._removeDelegatedListener(w,g,c)}}}once(w,s,c){if(c===void 0)return super.once(w,s);let g=typeof s=="string"?[s]:s,y=this._createDelegatedListener(w,g,c);for(let E in y.delegates){let I=y.delegates[E];y.delegates[E]=(...P)=>{this._removeDelegatedListener(w,g,c),I(...P)}}this._saveDelegatedListener(w,y);for(let E in y.delegates)this.once(E,y.delegates[E]);return this}off(w,s,c){return c===void 0?super.off(w,s):(this._removeDelegatedListener(w,typeof s=="string"?[s]:s,c),this)}queryRenderedFeatures(w,s){if(!this.style)return[];let c,g=w instanceof i.P||Array.isArray(w),y=g?w:[[0,0],[this.transform.width,this.transform.height]];if(s=s||(g?{}:w)||{},y instanceof i.P||typeof y[0]=="number")c=[i.P.convert(y)];else{let E=i.P.convert(y[0]),I=i.P.convert(y[1]);c=[E,new i.P(I.x,E.y),I,new i.P(E.x,I.y),E]}return this.style.queryRenderedFeatures(c,s,this.transform)}querySourceFeatures(w,s){return this.style.querySourceFeatures(w,s)}setStyle(w,s){return(s=i.e({},{localIdeographFontFamily:this._localIdeographFontFamily,validate:this._validateStyle},s)).diff!==!1&&s.localIdeographFontFamily===this._localIdeographFontFamily&&this.style&&w?(this._diffStyle(w,s),this):(this._localIdeographFontFamily=s.localIdeographFontFamily,this._updateStyle(w,s))}setTransformRequest(w){return this._requestManager.setTransformRequest(w),this}_getUIString(w){let s=this._locale[w];if(s==null)throw new Error(`Missing UI string '${w}'`);return s}_updateStyle(w,s){var c,g;if(s.transformStyle&&this.style&&!this.style._loaded)return void this.style.once("style.load",()=>this._updateStyle(w,s));let y=this.style&&s.transformStyle?this.style.serialize():void 0;return this.style&&(this.style.setEventedParent(null),this.style._remove(!w)),w?(this.style=new dT(this,s||{}),this.style.setEventedParent(this,{style:this.style}),typeof w=="string"?this.style.loadURL(w,s,y):this.style.loadJSON(w,s,y),this):((g=(c=this.style)===null||c===void 0?void 0:c.projection)===null||g===void 0||g.destroy(),delete this.style,this)}_lazyInitEmptyStyle(){this.style||(this.style=new dT(this,{}),this.style.setEventedParent(this,{style:this.style}),this.style.loadEmpty())}_diffStyle(w,s){if(typeof w=="string"){let c=this._requestManager.transformRequest(w,"Style");i.j(c,new AbortController).then(g=>{this._updateDiff(g.data,s)}).catch(g=>{g&&this.fire(new i.k(g))})}else typeof w=="object"&&this._updateDiff(w,s)}_updateDiff(w,s){try{this.style.setState(w,s)&&this._update(!0)}catch(c){i.w(`Unable to perform style diff: ${c.message||c.error||c}.  Rebuilding the style from scratch.`),this._updateStyle(w,s)}}getStyle(){if(this.style)return this.style.serialize()}isStyleLoaded(){return this.style?this.style.loaded():i.w("There is no style added to the map.")}addSource(w,s){return this._lazyInitEmptyStyle(),this.style.addSource(w,s),this._update(!0)}isSourceLoaded(w){let s=this.style&&this.style.sourceCaches[w];if(s!==void 0)return s.loaded();this.fire(new i.k(new Error(`There is no source with ID '${w}'`)))}setTerrain(w){if(this.style._checkLoaded(),this._terrainDataCallback&&this.style.off("data",this._terrainDataCallback),w){let s=this.style.sourceCaches[w.source];if(!s)throw new Error(`cannot load terrain, because there exists no source with ID: ${w.source}`);this.terrain===null&&s.reload();for(let c in this.style._layers){let g=this.style._layers[c];g.type==="hillshade"&&g.source===w.source&&i.w("You are using the same source for a hillshade layer and for 3D terrain. Please consider using two separate sources to improve rendering quality.")}this.terrain=new UN(this.painter,s,w),this.painter.renderToTexture=new Tx(this.painter,this.terrain),this.transform.setMinElevationForCurrentTile(this.terrain.getMinTileElevationForLngLatZoom(this.transform.center,this.transform.tileZoom)),this.transform.setElevation(this.terrain.getElevationForLngLatZoom(this.transform.center,this.transform.tileZoom)),this._terrainDataCallback=c=>{var g;c.dataType==="style"?this.terrain.sourceCache.freeRtt():c.dataType==="source"&&c.tile&&(c.sourceId!==w.source||this._elevationFreeze||(this.transform.setMinElevationForCurrentTile(this.terrain.getMinTileElevationForLngLatZoom(this.transform.center,this.transform.tileZoom)),this._centerClampedToGround&&this.transform.setElevation(this.terrain.getElevationForLngLatZoom(this.transform.center,this.transform.tileZoom))),((g=c.source)===null||g===void 0?void 0:g.type)==="image"?this.terrain.sourceCache.freeRtt():this.terrain.sourceCache.freeRtt(c.tile.tileID))},this.style.on("data",this._terrainDataCallback)}else this.terrain&&this.terrain.sourceCache.destruct(),this.terrain=null,this.painter.renderToTexture&&this.painter.renderToTexture.destruct(),this.painter.renderToTexture=null,this.transform.setMinElevationForCurrentTile(0),this._centerClampedToGround&&this.transform.setElevation(0);return this.fire(new i.l("terrain",{terrain:w})),this}getTerrain(){var w,s;return(s=(w=this.terrain)===null||w===void 0?void 0:w.options)!==null&&s!==void 0?s:null}areTilesLoaded(){let w=this.style&&this.style.sourceCaches;for(let s in w){let c=w[s]._tiles;for(let g in c){let y=c[g];if(y.state!=="loaded"&&y.state!=="errored")return!1}}return!0}removeSource(w){return this.style.removeSource(w),this._update(!0)}getSource(w){return this.style.getSource(w)}setSourceTileLodParams(w,s,c){if(c){let g=this.getSource(c);if(!g)throw new Error(`There is no source with ID "${c}", cannot set LOD parameters`);g.calculateTileZoom=de(Math.max(1,w),Math.max(1,s))}else for(let g in this.style.sourceCaches)this.style.sourceCaches[g].getSource().calculateTileZoom=de(Math.max(1,w),Math.max(1,s));return this._update(!0),this}refreshTiles(w,s){let c=this.style.sourceCaches[w];if(!c)throw new Error(`There is no source cache with ID "${w}", cannot refresh tile`);s===void 0?c.reload():c.refreshTiles(s.map(g=>new i.a1(g.z,g.x,g.y)))}addImage(w,s,c={}){let{pixelRatio:g=1,sdf:y=!1,stretchX:E,stretchY:I,content:P,textFitWidth:L,textFitHeight:z}=c;if(this._lazyInitEmptyStyle(),!(s instanceof HTMLImageElement||i.b(s))){if(s.width===void 0||s.height===void 0)return this.fire(new i.k(new Error("Invalid arguments to map.addImage(). The second argument must be an `HTMLImageElement`, `ImageData`, `ImageBitmap`, or object with `width`, `height`, and `data` properties with the same format as `ImageData`")));{let{width:U,height:W,data:H}=s,te=s;return this.style.addImage(w,{data:new i.R({width:U,height:W},new Uint8Array(H)),pixelRatio:g,stretchX:E,stretchY:I,content:P,textFitWidth:L,textFitHeight:z,sdf:y,version:0,userImage:te}),te.onAdd&&te.onAdd(this,w),this}}{let{width:U,height:W,data:H}=v.getImageData(s);this.style.addImage(w,{data:new i.R({width:U,height:W},H),pixelRatio:g,stretchX:E,stretchY:I,content:P,textFitWidth:L,textFitHeight:z,sdf:y,version:0})}}updateImage(w,s){let c=this.style.getImage(w);if(!c)return this.fire(new i.k(new Error("The map has no image with that id. If you are adding a new image use `map.addImage(...)` instead.")));let g=s instanceof HTMLImageElement||i.b(s)?v.getImageData(s):s,{width:y,height:E,data:I}=g;if(y===void 0||E===void 0)return this.fire(new i.k(new Error("Invalid arguments to map.updateImage(). The second argument must be an `HTMLImageElement`, `ImageData`, `ImageBitmap`, or object with `width`, `height`, and `data` properties with the same format as `ImageData`")));if(y!==c.data.width||E!==c.data.height)return this.fire(new i.k(new Error("The width and height of the updated image must be that same as the previous version of the image")));let P=!(s instanceof HTMLImageElement||i.b(s));return c.data.replace(I,P),this.style.updateImage(w,c),this}getImage(w){return this.style.getImage(w)}hasImage(w){return w?!!this.style.getImage(w):(this.fire(new i.k(new Error("Missing required image id"))),!1)}removeImage(w){this.style.removeImage(w)}loadImage(w){return q.getImage(this._requestManager.transformRequest(w,"Image"),new AbortController)}listImages(){return this.style.listImages()}addLayer(w,s){return this._lazyInitEmptyStyle(),this.style.addLayer(w,s),this._update(!0)}moveLayer(w,s){return this.style.moveLayer(w,s),this._update(!0)}removeLayer(w){return this.style.removeLayer(w),this._update(!0)}getLayer(w){return this.style.getLayer(w)}getLayersOrder(){return this.style.getLayersOrder()}setLayerZoomRange(w,s,c){return this.style.setLayerZoomRange(w,s,c),this._update(!0)}setFilter(w,s,c={}){return this.style.setFilter(w,s,c),this._update(!0)}getFilter(w){return this.style.getFilter(w)}setPaintProperty(w,s,c,g={}){return this.style.setPaintProperty(w,s,c,g),this._update(!0)}getPaintProperty(w,s){return this.style.getPaintProperty(w,s)}setLayoutProperty(w,s,c,g={}){return this.style.setLayoutProperty(w,s,c,g),this._update(!0)}getLayoutProperty(w,s){return this.style.getLayoutProperty(w,s)}setGlyphs(w,s={}){return this._lazyInitEmptyStyle(),this.style.setGlyphs(w,s),this._update(!0)}getGlyphs(){return this.style.getGlyphsUrl()}addSprite(w,s,c={}){return this._lazyInitEmptyStyle(),this.style.addSprite(w,s,c,g=>{g||this._update(!0)}),this}removeSprite(w){return this._lazyInitEmptyStyle(),this.style.removeSprite(w),this._update(!0)}getSprite(){return this.style.getSprite()}setSprite(w,s={}){return this._lazyInitEmptyStyle(),this.style.setSprite(w,s,c=>{c||this._update(!0)}),this}setLight(w,s={}){return this._lazyInitEmptyStyle(),this.style.setLight(w,s),this._update(!0)}getLight(){return this.style.getLight()}setSky(w,s={}){return this._lazyInitEmptyStyle(),this.style.setSky(w,s),this._update(!0)}getSky(){return this.style.getSky()}setFeatureState(w,s){return this.style.setFeatureState(w,s),this._update()}removeFeatureState(w,s){return this.style.removeFeatureState(w,s),this._update()}getFeatureState(w){return this.style.getFeatureState(w)}getContainer(){return this._container}getCanvasContainer(){return this._canvasContainer}getCanvas(){return this._canvas}_containerDimensions(){let w=0,s=0;return this._container&&(w=this._container.clientWidth||400,s=this._container.clientHeight||300),[w,s]}_setupContainer(){let w=this._container;w.classList.add("maplibregl-map");let s=this._canvasContainer=b.create("div","maplibregl-canvas-container",w);this._interactive&&s.classList.add("maplibregl-interactive"),this._canvas=b.create("canvas","maplibregl-canvas",s),this._canvas.addEventListener("webglcontextlost",this._contextLost,!1),this._canvas.addEventListener("webglcontextrestored",this._contextRestored,!1),this._canvas.setAttribute("tabindex",this._interactive?"0":"-1"),this._canvas.setAttribute("aria-label",this._getUIString("Map.Title")),this._canvas.setAttribute("role","region");let c=this._containerDimensions(),g=this._getClampedPixelRatio(c[0],c[1]);this._resizeCanvas(c[0],c[1],g);let y=this._controlContainer=b.create("div","maplibregl-control-container",w),E=this._controlPositions={};["top-left","top-right","bottom-left","bottom-right"].forEach(I=>{E[I]=b.create("div",`maplibregl-ctrl-${I} `,y)}),this._container.addEventListener("scroll",this._onMapScroll,!1)}_resizeCanvas(w,s,c){this._canvas.width=Math.floor(c*w),this._canvas.height=Math.floor(c*s),this._canvas.style.width=`${w}px`,this._canvas.style.height=`${s}px`}_setupPainter(){let w=Object.assign(Object.assign({},this._canvasContextAttributes),{alpha:!0,depth:!0,stencil:!0,premultipliedAlpha:!0}),s=null;this._canvas.addEventListener("webglcontextcreationerror",g=>{s={requestedAttributes:w},g&&(s.statusMessage=g.statusMessage,s.type=g.type)},{once:!0});let c=null;if(c=this._canvasContextAttributes.contextType?this._canvas.getContext(this._canvasContextAttributes.contextType,w):this._canvas.getContext("webgl2",w)||this._canvas.getContext("webgl",w),!c){let g="Failed to initialize WebGL";throw s?(s.message=g,new Error(JSON.stringify(s))):new Error(g)}this.painter=new OT(c,this.transform),x.testSupport(c)}migrateProjection(w,s){super.migrateProjection(w,s),this.painter.transform=w,this.fire(new i.l("projectiontransition",{newProjection:this.style.projection.name}))}loaded(){return!this._styleDirty&&!this._sourcesDirty&&!!this.style&&this.style.loaded()}_update(w){return this.style&&this.style._loaded?(this._styleDirty=this._styleDirty||w,this._sourcesDirty=!0,this.triggerRepaint(),this):this}_requestRenderFrame(w){return this._update(),this._renderTaskQueue.add(w)}_cancelRenderFrame(w){this._renderTaskQueue.remove(w)}_render(w){var s,c,g,y,E;let I=this._idleTriggered?this._fadeDuration:0,P=((s=this.style.projection)===null||s===void 0?void 0:s.transitionState)>0;if(this.painter.context.setDirty(),this.painter.setBaseState(),this._renderTaskQueue.run(w),this._removed)return;let L=!1;if(this.style&&this._styleDirty){this._styleDirty=!1;let W=this.transform.zoom,H=v.now();this.style.zoomHistory.update(W,H);let te=new i.C(W,{now:H,fadeDuration:I,zoomHistory:this.style.zoomHistory,transition:this.style.getTransition()}),ae=te.crossFadingFactor();ae===1&&ae===this._crossFadingFactor||(L=!0,this._crossFadingFactor=ae),this.style.update(te)}let z=((c=this.style.projection)===null||c===void 0?void 0:c.transitionState)>0!==P;(g=this.style.projection)===null||g===void 0||g.setErrorQueryLatitudeDegrees(this.transform.center.lat),this.transform.setTransitionState((y=this.style.projection)===null||y===void 0?void 0:y.transitionState,(E=this.style.projection)===null||E===void 0?void 0:E.latitudeErrorCorrectionRadians),this.style&&(this._sourcesDirty||z)&&(this._sourcesDirty=!1,this.style._updateSources(this.transform)),this.terrain?(this.terrain.sourceCache.update(this.transform,this.terrain),this.transform.setMinElevationForCurrentTile(this.terrain.getMinTileElevationForLngLatZoom(this.transform.center,this.transform.tileZoom)),!this._elevationFreeze&&this._centerClampedToGround&&this.transform.setElevation(this.terrain.getElevationForLngLatZoom(this.transform.center,this.transform.tileZoom))):(this.transform.setMinElevationForCurrentTile(0),this._centerClampedToGround&&this.transform.setElevation(0)),this._placementDirty=this.style&&this.style._updatePlacement(this.transform,this.showCollisionBoxes,I,this._crossSourceCollisions,z),this.painter.render(this.style,{showTileBoundaries:this.showTileBoundaries,showOverdrawInspector:this._showOverdrawInspector,rotating:this.isRotating(),zooming:this.isZooming(),moving:this.isMoving(),fadeDuration:I,showPadding:this.showPadding}),this.fire(new i.l("render")),this.loaded()&&!this._loaded&&(this._loaded=!0,i.cn.mark(i.co.load),this.fire(new i.l("load"))),this.style&&(this.style.hasTransitions()||L)&&(this._styleDirty=!0),this.style&&!this._placementDirty&&this.style._releaseSymbolFadeTiles();let U=this._sourcesDirty||this._styleDirty||this._placementDirty;return U||this._repaint?this.triggerRepaint():!this.isMoving()&&this.loaded()&&this.fire(new i.l("idle")),!this._loaded||this._fullyLoaded||U||(this._fullyLoaded=!0,i.cn.mark(i.co.fullLoad)),this}redraw(){return this.style&&(this._frameRequest&&(this._frameRequest.abort(),this._frameRequest=null),this._render(0)),this}remove(){var w;this._hash&&this._hash.remove();for(let c of this._controls)c.onRemove(this);this._controls=[],this._frameRequest&&(this._frameRequest.abort(),this._frameRequest=null),this._renderTaskQueue.clear(),this.painter.destroy(),this.handlers.destroy(),delete this.handlers,this.setStyle(null),typeof window!="undefined"&&removeEventListener("online",this._onWindowOnline,!1),q.removeThrottleControl(this._imageQueueHandle),(w=this._resizeObserver)===null||w===void 0||w.disconnect();let s=this.painter.context.gl.getExtension("WEBGL_lose_context");s!=null&&s.loseContext&&s.loseContext(),this._canvas.removeEventListener("webglcontextrestored",this._contextRestored,!1),this._canvas.removeEventListener("webglcontextlost",this._contextLost,!1),b.remove(this._canvasContainer),b.remove(this._controlContainer),this._container.removeEventListener("scroll",this._onMapScroll,!1),this._container.classList.remove("maplibregl-map"),i.cn.clearMetrics(),this._removed=!0,this.fire(new i.l("remove"))}triggerRepaint(){this.style&&!this._frameRequest&&(this._frameRequest=new AbortController,v.frame(this._frameRequest,w=>{i.cn.frame(w),this._frameRequest=null;try{this._render(w)}catch(s){if(!i.cp(s)&&!function(c){return c.message===sx}(s))throw s}},()=>{}))}get showTileBoundaries(){return!!this._showTileBoundaries}set showTileBoundaries(w){this._showTileBoundaries!==w&&(this._showTileBoundaries=w,this._update())}get showPadding(){return!!this._showPadding}set showPadding(w){this._showPadding!==w&&(this._showPadding=w,this._update())}get showCollisionBoxes(){return!!this._showCollisionBoxes}set showCollisionBoxes(w){this._showCollisionBoxes!==w&&(this._showCollisionBoxes=w,w?this.style._generateCollisionBoxes():this._update())}get showOverdrawInspector(){return!!this._showOverdrawInspector}set showOverdrawInspector(w){this._showOverdrawInspector!==w&&(this._showOverdrawInspector=w,this._update())}get repaint(){return!!this._repaint}set repaint(w){this._repaint!==w&&(this._repaint=w,this.triggerRepaint())}get vertices(){return!!this._vertices}set vertices(w){this._vertices=w,this._update()}get version(){return $r}getCameraTargetElevation(){return this.transform.elevation}getProjection(){return this.style.getProjection()}setProjection(w){return this._lazyInitEmptyStyle(),this.style.setProjection(w),this._update(!0)}},o.MapMouseEvent=qa,o.MapTouchEvent=pv,o.MapWheelEvent=LT,o.Marker=Nm,o.NavigationControl=class{constructor(w){this._updateZoomButtons=()=>{let s=this._map.getZoom(),c=s===this._map.getMaxZoom(),g=s===this._map.getMinZoom();this._zoomInButton.disabled=c,this._zoomOutButton.disabled=g,this._zoomInButton.setAttribute("aria-disabled",c.toString()),this._zoomOutButton.setAttribute("aria-disabled",g.toString())},this._rotateCompassArrow=()=>{this._compassIcon.style.transform=this.options.visualizePitch&&this.options.visualizeRoll?`scale(${1/Math.pow(Math.cos(this._map.transform.pitchInRadians),.5)}) rotateZ(${-this._map.transform.roll}deg) rotateX(${this._map.transform.pitch}deg) rotateZ(${-this._map.transform.bearing}deg)`:this.options.visualizePitch?`scale(${1/Math.pow(Math.cos(this._map.transform.pitchInRadians),.5)}) rotateX(${this._map.transform.pitch}deg) rotateZ(${-this._map.transform.bearing}deg)`:this.options.visualizeRoll?`rotate(${-this._map.transform.bearing-this._map.transform.roll}deg)`:`rotate(${-this._map.transform.bearing}deg)`},this._setButtonTitle=(s,c)=>{let g=this._map._getUIString(`NavigationControl.${c}`);s.title=g,s.setAttribute("aria-label",g)},this.options=i.e({},BT,w),this._container=b.create("div","maplibregl-ctrl maplibregl-ctrl-group"),this._container.addEventListener("contextmenu",s=>s.preventDefault()),this.options.showZoom&&(this._zoomInButton=this._createButton("maplibregl-ctrl-zoom-in",s=>this._map.zoomIn({},{originalEvent:s})),b.create("span","maplibregl-ctrl-icon",this._zoomInButton).setAttribute("aria-hidden","true"),this._zoomOutButton=this._createButton("maplibregl-ctrl-zoom-out",s=>this._map.zoomOut({},{originalEvent:s})),b.create("span","maplibregl-ctrl-icon",this._zoomOutButton).setAttribute("aria-hidden","true")),this.options.showCompass&&(this._compass=this._createButton("maplibregl-ctrl-compass",s=>{this.options.visualizePitch?this._map.resetNorthPitch({},{originalEvent:s}):this._map.resetNorth({},{originalEvent:s})}),this._compassIcon=b.create("span","maplibregl-ctrl-icon",this._compass),this._compassIcon.setAttribute("aria-hidden","true"))}onAdd(w){return this._map=w,this.options.showZoom&&(this._setButtonTitle(this._zoomInButton,"ZoomIn"),this._setButtonTitle(this._zoomOutButton,"ZoomOut"),this._map.on("zoom",this._updateZoomButtons),this._updateZoomButtons()),this.options.showCompass&&(this._setButtonTitle(this._compass,"ResetBearing"),this.options.visualizePitch&&this._map.on("pitch",this._rotateCompassArrow),this.options.visualizeRoll&&this._map.on("roll",this._rotateCompassArrow),this._map.on("rotate",this._rotateCompassArrow),this._rotateCompassArrow(),this._handler=new VT(this._map,this._compass,this.options.visualizePitch)),this._container}onRemove(){b.remove(this._container),this.options.showZoom&&this._map.off("zoom",this._updateZoomButtons),this.options.showCompass&&(this.options.visualizePitch&&this._map.off("pitch",this._rotateCompassArrow),this.options.visualizeRoll&&this._map.off("roll",this._rotateCompassArrow),this._map.off("rotate",this._rotateCompassArrow),this._handler.off(),delete this._handler),delete this._map}_createButton(w,s){let c=b.create("button",w,this._container);return c.type="button",c.addEventListener("click",s),c}},o.Popup=class extends i.E{constructor(w){super(),this._updateOpacity=()=>{this.options.locationOccludedOpacity!==void 0&&(this._container.style.opacity=this._map.transform.isLocationOccluded(this.getLngLat())?`${this.options.locationOccludedOpacity}`:void 0)},this.remove=()=>(this._content&&b.remove(this._content),this._container&&(b.remove(this._container),delete this._container),this._map&&(this._map.off("move",this._update),this._map.off("move",this._onClose),this._map.off("click",this._onClose),this._map.off("remove",this.remove),this._map.off("mousemove",this._onMouseMove),this._map.off("mouseup",this._onMouseUp),this._map.off("drag",this._onDrag),this._map._canvasContainer.classList.remove("maplibregl-track-pointer"),delete this._map,this.fire(new i.l("close"))),this),this._onMouseUp=s=>{this._update(s.point)},this._onMouseMove=s=>{this._update(s.point)},this._onDrag=s=>{this._update(s.point)},this._update=s=>{if(!this._map||!this._lngLat&&!this._trackPointer||!this._content)return;if(!this._container){if(this._container=b.create("div","maplibregl-popup",this._map.getContainer()),this._tip=b.create("div","maplibregl-popup-tip",this._container),this._container.appendChild(this._content),this.options.className)for(let I of this.options.className.split(" "))this._container.classList.add(I);this._closeButton&&this._closeButton.setAttribute("aria-label",this._map._getUIString("Popup.Close")),this._trackPointer&&this._container.classList.add("maplibregl-popup-track-pointer")}if(this.options.maxWidth&&this._container.style.maxWidth!==this.options.maxWidth&&(this._container.style.maxWidth=this.options.maxWidth),this._lngLat=GT(this._lngLat,this._flatPos,this._map.transform,this._trackPointer),this._trackPointer&&!s)return;let c=this._flatPos=this._pos=this._trackPointer&&s?s:this._map.project(this._lngLat);this._map.terrain&&(this._flatPos=this._trackPointer&&s?s:this._map.transform.locationToScreenPoint(this._lngLat));let g=this.options.anchor,y=_v(this.options.offset);if(!g){let I=this._container.offsetWidth,P=this._container.offsetHeight,L;L=c.y+y.bottom.y<P?["top"]:c.y>this._map.transform.height-P?["bottom"]:[],c.x<I/2?L.push("left"):c.x>this._map.transform.width-I/2&&L.push("right"),g=L.length===0?"bottom":L.join("-")}let E=c.add(y[g]);this.options.subpixelPositioning||(E=E.round()),b.setTransform(this._container,`${nc[g]} translate(${E.x}px,${E.y}px)`),BN(this._container,g,"popup"),this._updateOpacity()},this._onClose=()=>{this.remove()},this.options=i.e(Object.create(HT),w)}addTo(w){return this._map&&this.remove(),this._map=w,this.options.closeOnClick&&this._map.on("click",this._onClose),this.options.closeOnMove&&this._map.on("move",this._onClose),this._map.on("remove",this.remove),this._update(),this._focusFirstElement(),this._trackPointer?(this._map.on("mousemove",this._onMouseMove),this._map.on("mouseup",this._onMouseUp),this._container&&this._container.classList.add("maplibregl-popup-track-pointer"),this._map._canvasContainer.classList.add("maplibregl-track-pointer")):this._map.on("move",this._update),this.fire(new i.l("open")),this}isOpen(){return!!this._map}getLngLat(){return this._lngLat}setLngLat(w){return this._lngLat=i.Q.convert(w),this._pos=null,this._flatPos=null,this._trackPointer=!1,this._update(),this._map&&(this._map.on("move",this._update),this._map.off("mousemove",this._onMouseMove),this._container&&this._container.classList.remove("maplibregl-popup-track-pointer"),this._map._canvasContainer.classList.remove("maplibregl-track-pointer")),this}trackPointer(){return this._trackPointer=!0,this._pos=null,this._flatPos=null,this._update(),this._map&&(this._map.off("move",this._update),this._map.on("mousemove",this._onMouseMove),this._map.on("drag",this._onDrag),this._container&&this._container.classList.add("maplibregl-popup-track-pointer"),this._map._canvasContainer.classList.add("maplibregl-track-pointer")),this}getElement(){return this._container}setText(w){return this.setDOMContent(document.createTextNode(w))}setHTML(w){let s=document.createDocumentFragment(),c=document.createElement("body"),g;for(c.innerHTML=w;g=c.firstChild,g;)s.appendChild(g);return this.setDOMContent(s)}getMaxWidth(){var w;return(w=this._container)===null||w===void 0?void 0:w.style.maxWidth}setMaxWidth(w){return this.options.maxWidth=w,this._update(),this}setDOMContent(w){if(this._content)for(;this._content.hasChildNodes();)this._content.firstChild&&this._content.removeChild(this._content.firstChild);else this._content=b.create("div","maplibregl-popup-content",this._container);return this._content.appendChild(w),this._createCloseButton(),this._update(),this._focusFirstElement(),this}addClassName(w){return this._container&&this._container.classList.add(w),this}removeClassName(w){return this._container&&this._container.classList.remove(w),this}setOffset(w){return this.options.offset=w,this._update(),this}toggleClassName(w){if(this._container)return this._container.classList.toggle(w)}setSubpixelPositioning(w){this.options.subpixelPositioning=w}_createCloseButton(){this.options.closeButton&&(this._closeButton=b.create("button","maplibregl-popup-close-button",this._content),this._closeButton.type="button",this._closeButton.innerHTML="&#215;",this._closeButton.addEventListener("click",this._onClose))}_focusFirstElement(){if(!this.options.focusAfterOpen||!this._container)return;let w=this._container.querySelector(WT);w&&w.focus()}},o.RasterDEMTileSource=Jt,o.RasterTileSource=Ft,o.ScaleControl=class{constructor(w){this._onMove=()=>{h1(this._map,this._container,this.options)},this.setUnit=s=>{this.options.unit=s,h1(this._map,this._container,this.options)},this.options=Object.assign(Object.assign({},d1),w)}getDefaultPosition(){return"bottom-left"}onAdd(w){return this._map=w,this._container=b.create("div","maplibregl-ctrl maplibregl-ctrl-scale",w.getContainer()),this._map.on("move",this._onMove),this._onMove(),this._container}onRemove(){b.remove(this._container),this._map.off("move",this._onMove),this._map=void 0}},o.ScrollZoomHandler=$n,o.Style=dT,o.TerrainControl=class{constructor(w){this._toggleTerrain=()=>{this._map.getTerrain()?this._map.setTerrain(null):this._map.setTerrain(this.options),this._updateTerrainIcon()},this._updateTerrainIcon=()=>{this._terrainButton.classList.remove("maplibregl-ctrl-terrain"),this._terrainButton.classList.remove("maplibregl-ctrl-terrain-enabled"),this._map.terrain?(this._terrainButton.classList.add("maplibregl-ctrl-terrain-enabled"),this._terrainButton.title=this._map._getUIString("TerrainControl.Disable")):(this._terrainButton.classList.add("maplibregl-ctrl-terrain"),this._terrainButton.title=this._map._getUIString("TerrainControl.Enable"))},this.options=w}onAdd(w){return this._map=w,this._container=b.create("div","maplibregl-ctrl maplibregl-ctrl-group"),this._terrainButton=b.create("button","maplibregl-ctrl-terrain",this._container),b.create("span","maplibregl-ctrl-icon",this._terrainButton).setAttribute("aria-hidden","true"),this._terrainButton.type="button",this._terrainButton.addEventListener("click",this._toggleTerrain),this._updateTerrainIcon(),this._map.on("terrain",this._updateTerrainIcon),this._container}onRemove(){b.remove(this._container),this._map.off("terrain",this._updateTerrainIcon),this._map=void 0}},o.TwoFingersTouchPitchHandler=xx,o.TwoFingersTouchRotateHandler=cr,o.TwoFingersTouchZoomHandler=gv,o.TwoFingersTouchZoomRotateHandler=FT,o.VectorTileSource=sr,o.VideoSource=Cr,o.addSourceType=(w,s)=>i._(void 0,void 0,void 0,function*(){if(Ce(w))throw new Error(`A source type called "${w}" already exists.`);((c,g)=>{qr[c]=g})(w,s)}),o.clearPrewarmedResources=function(){let w=nt;w&&(w.isPreloaded()&&w.numActive()===1?(w.release(Pt),nt=null):console.warn("Could not clear WebWorkers since there are active Map instances that still reference it. The pre-warmed WebWorker pool can only be cleared when all map instances have been removed with map.remove()"))},o.createTileMesh=G0,o.getMaxParallelImageRequests=function(){return i.a.MAX_PARALLEL_IMAGE_REQUESTS},o.getRTLTextPluginStatus=function(){return Bt().getRTLTextPluginStatus()},o.getVersion=function(){return $T},o.getWorkerCount=function(){return Lt.workerCount},o.getWorkerUrl=function(){return i.a.WORKER_URL},o.importScriptInWorkers=function(w){return De().broadcast("IS",w)},o.prewarm=function(){_t().acquire(Pt)},o.setMaxParallelImageRequests=function(w){i.a.MAX_PARALLEL_IMAGE_REQUESTS=w},o.setRTLTextPlugin=function(w,s){return Bt().setRTLTextPlugin(w,s)},o.setWorkerCount=function(w){Lt.workerCount=w},o.setWorkerUrl=function(w){i.a.WORKER_URL=w}});var n=e;return n})});var PVe=A((kmn,OVe)=>{var Kre=1/0,owr=17976931348623157e292,wVe=NaN,iwr="[object Symbol]",awr=/^\s+|\s+$/g,swr=/^[-+]0x[0-9a-f]+$/i,lwr=/^0b[01]+$/i,uwr=/^0o[0-7]+$/i,cwr=parseInt,pwr=typeof global=="object"&&global&&global.Object===Object&&global,fwr=typeof self=="object"&&self&&self.Object===Object&&self,dwr=pwr||fwr||Function("return this")(),hwr=Object.prototype,mwr=hwr.toString,EVe=dwr.Symbol,gwr=Math.min,SVe=EVe?EVe.prototype:void 0,TVe=SVe?SVe.toString:void 0;function vwr(e){if(typeof e=="string")return e;if(CVe(e))return TVe?TVe.call(e):"";var t=e+"";return t=="0"&&1/e==-Kre?"-0":t}function ywr(e){var t=Math[e];return function(r,n){if(r=AVe(r),n=gwr(xwr(n),292),n){var o=(MVe(r)+"e").split("e"),i=t(o[0]+"e"+(+o[1]+n));return o=(MVe(i)+"e").split("e"),+(o[0]+"e"+(+o[1]-n))}return t(r)}}function IVe(e){var t=typeof e;return!!e&&(t=="object"||t=="function")}function _wr(e){return!!e&&typeof e=="object"}function CVe(e){return typeof e=="symbol"||_wr(e)&&mwr.call(e)==iwr}function bwr(e){if(!e)return e===0?e:0;if(e=AVe(e),e===Kre||e===-Kre){var t=e<0?-1:1;return t*owr}return e===e?e:0}function xwr(e){var t=bwr(e),r=t%1;return t===t?r?t-r:t:0}function AVe(e){if(typeof e=="number")return e;if(CVe(e))return wVe;if(IVe(e)){var t=typeof e.valueOf=="function"?e.valueOf():e;e=IVe(t)?t+"":t}if(typeof e!="string")return e===0?e:+e;e=e.replace(awr,"");var r=lwr.test(e);return r||uwr.test(e)?cwr(e.slice(2),r?2:8):swr.test(e)?wVe:+e}function MVe(e){return e==null?"":vwr(e)}var wwr=ywr("round");OVe.exports=wwr});var MWe=A((Y2n,IWe)=>{"use strict";IWe.exports=e=>encodeURIComponent(e).replace(/[!'()*]/g,t=>`%${t.charCodeAt(0).toString(16).toUpperCase()}`)});var NWe=A((K2n,PWe)=>{"use strict";var OWe="%[a-f0-9]{2}",CWe=new RegExp("("+OWe+")|([^%]+?)","gi"),AWe=new RegExp("("+OWe+")+","gi");function kne(e,t){try{return[decodeURIComponent(e.join(""))]}catch(o){}if(e.length===1)return e;t=t||1;var r=e.slice(0,t),n=e.slice(t);return Array.prototype.concat.call([],kne(r),kne(n))}function c2r(e){try{return decodeURIComponent(e)}catch(n){for(var t=e.match(CWe)||[],r=1;r<t.length;r++)e=kne(t,r).join(""),t=e.match(CWe)||[];return e}}function p2r(e){for(var t={"%FE%FF":"\uFFFD\uFFFD","%FF%FE":"\uFFFD\uFFFD"},r=AWe.exec(e);r;){try{t[r[0]]=decodeURIComponent(r[0])}catch(u){var n=c2r(r[0]);n!==r[0]&&(t[r[0]]=n)}r=AWe.exec(e)}t["%C2"]="\uFFFD";for(var o=Object.keys(t),i=0;i<o.length;i++){var a=o[i];e=e.replace(new RegExp(a,"g"),t[a])}return e}PWe.exports=function(e){if(typeof e!="string")throw new TypeError("Expected `encodedURI` to be of type `string`, got `"+typeof e+"`");try{return e=e.replace(/\+/g," "),decodeURIComponent(e)}catch(t){return p2r(e)}}});var LWe=A((X2n,DWe)=>{"use strict";DWe.exports=(e,t)=>{if(!(typeof e=="string"&&typeof t=="string"))throw new TypeError("Expected the arguments to be of type `string`");if(t==="")return[e];let r=e.indexOf(t);return r===-1?[e]:[e.slice(0,r),e.slice(r+t.length)]}});var RWe=A((Q2n,kWe)=>{"use strict";kWe.exports=function(e,t){for(var r={},n=Object.keys(e),o=Array.isArray(t),i=0;i<n.length;i++){var a=n[i],u=e[a];(o?t.indexOf(a)!==-1:t(a,u,e))&&(r[a]=u)}return r}});var dq=A(Mc=>{"use strict";var f2r=MWe(),d2r=NWe(),qWe=LWe(),h2r=RWe(),m2r=e=>e==null,Rne=Symbol("encodeFragmentIdentifier");function g2r(e){switch(e.arrayFormat){case"index":return t=>(r,n)=>{let o=r.length;return n===void 0||e.skipNull&&n===null||e.skipEmptyString&&n===""?r:n===null?[...r,[Za(t,e),"[",o,"]"].join("")]:[...r,[Za(t,e),"[",Za(o,e),"]=",Za(n,e)].join("")]};case"bracket":return t=>(r,n)=>n===void 0||e.skipNull&&n===null||e.skipEmptyString&&n===""?r:n===null?[...r,[Za(t,e),"[]"].join("")]:[...r,[Za(t,e),"[]=",Za(n,e)].join("")];case"colon-list-separator":return t=>(r,n)=>n===void 0||e.skipNull&&n===null||e.skipEmptyString&&n===""?r:n===null?[...r,[Za(t,e),":list="].join("")]:[...r,[Za(t,e),":list=",Za(n,e)].join("")];case"comma":case"separator":case"bracket-separator":{let t=e.arrayFormat==="bracket-separator"?"[]=":"=";return r=>(n,o)=>o===void 0||e.skipNull&&o===null||e.skipEmptyString&&o===""?n:(o=o===null?"":o,n.length===0?[[Za(r,e),t,Za(o,e)].join("")]:[[n,Za(o,e)].join(e.arrayFormatSeparator)])}default:return t=>(r,n)=>n===void 0||e.skipNull&&n===null||e.skipEmptyString&&n===""?r:n===null?[...r,Za(t,e)]:[...r,[Za(t,e),"=",Za(n,e)].join("")]}}function v2r(e){let t;switch(e.arrayFormat){case"index":return(r,n,o)=>{if(t=/\[(\d*)\]$/.exec(r),r=r.replace(/\[\d*\]$/,""),!t){o[r]=n;return}o[r]===void 0&&(o[r]={}),o[r][t[1]]=n};case"bracket":return(r,n,o)=>{if(t=/(\[\])$/.exec(r),r=r.replace(/\[\]$/,""),!t){o[r]=n;return}if(o[r]===void 0){o[r]=[n];return}o[r]=[].concat(o[r],n)};case"colon-list-separator":return(r,n,o)=>{if(t=/(:list)$/.exec(r),r=r.replace(/:list$/,""),!t){o[r]=n;return}if(o[r]===void 0){o[r]=[n];return}o[r]=[].concat(o[r],n)};case"comma":case"separator":return(r,n,o)=>{let i=typeof n=="string"&&n.includes(e.arrayFormatSeparator),a=typeof n=="string"&&!i&&yg(n,e).includes(e.arrayFormatSeparator);n=a?yg(n,e):n;let u=i||a?n.split(e.arrayFormatSeparator).map(d=>yg(d,e)):n===null?n:yg(n,e);o[r]=u};case"bracket-separator":return(r,n,o)=>{let i=/(\[\])$/.test(r);if(r=r.replace(/\[\]$/,""),!i){o[r]=n&&yg(n,e);return}let a=n===null?[]:n.split(e.arrayFormatSeparator).map(u=>yg(u,e));if(o[r]===void 0){o[r]=a;return}o[r]=[].concat(o[r],a)};default:return(r,n,o)=>{if(o[r]===void 0){o[r]=n;return}o[r]=[].concat(o[r],n)}}}function zWe(e){if(typeof e!="string"||e.length!==1)throw new TypeError("arrayFormatSeparator must be single character string")}function Za(e,t){return t.encode?t.strict?f2r(e):encodeURIComponent(e):e}function yg(e,t){return t.decode?d2r(e):e}function FWe(e){return Array.isArray(e)?e.sort():typeof e=="object"?FWe(Object.keys(e)).sort((t,r)=>Number(t)-Number(r)).map(t=>e[t]):e}function UWe(e){let t=e.indexOf("#");return t!==-1&&(e=e.slice(0,t)),e}function y2r(e){let t="",r=e.indexOf("#");return r!==-1&&(t=e.slice(r)),t}function BWe(e){e=UWe(e);let t=e.indexOf("?");return t===-1?"":e.slice(t+1)}function jWe(e,t){return t.parseNumbers&&!Number.isNaN(Number(e))&&typeof e=="string"&&e.trim()!==""?e=Number(e):t.parseBooleans&&e!==null&&(e.toLowerCase()==="true"||e.toLowerCase()==="false")&&(e=e.toLowerCase()==="true"),e}function VWe(e,t){t=Object.assign({decode:!0,sort:!0,arrayFormat:"none",arrayFormatSeparator:",",parseNumbers:!1,parseBooleans:!1},t),zWe(t.arrayFormatSeparator);let r=v2r(t),n=Object.create(null);if(typeof e!="string"||(e=e.trim().replace(/^[?#&]/,""),!e))return n;for(let o of e.split("&")){if(o==="")continue;let[i,a]=qWe(t.decode?o.replace(/\+/g," "):o,"=");a=a===void 0?null:["comma","separator","bracket-separator"].includes(t.arrayFormat)?a:yg(a,t),r(yg(i,t),a,n)}for(let o of Object.keys(n)){let i=n[o];if(typeof i=="object"&&i!==null)for(let a of Object.keys(i))i[a]=jWe(i[a],t);else n[o]=jWe(i,t)}return t.sort===!1?n:(t.sort===!0?Object.keys(n).sort():Object.keys(n).sort(t.sort)).reduce((o,i)=>{let a=n[i];return a&&typeof a=="object"&&!Array.isArray(a)?o[i]=FWe(a):o[i]=a,o},Object.create(null))}Mc.extract=BWe;Mc.parse=VWe;Mc.stringify=(e,t)=>{if(!e)return"";t=Object.assign({encode:!0,strict:!0,arrayFormat:"none",arrayFormatSeparator:","},t),zWe(t.arrayFormatSeparator);let r=a=>t.skipNull&&m2r(e[a])||t.skipEmptyString&&e[a]==="",n=g2r(t),o={};for(let a of Object.keys(e))r(a)||(o[a]=e[a]);let i=Object.keys(o);return t.sort!==!1&&i.sort(t.sort),i.map(a=>{let u=e[a];return u===void 0?"":u===null?Za(a,t):Array.isArray(u)?u.length===0&&t.arrayFormat==="bracket-separator"?Za(a,t)+"[]":u.reduce(n(a),[]).join("&"):Za(a,t)+"="+Za(u,t)}).filter(a=>a.length>0).join("&")};Mc.parseUrl=(e,t)=>{t=Object.assign({decode:!0},t);let[r,n]=qWe(e,"#");return Object.assign({url:r.split("?")[0]||"",query:VWe(BWe(e),t)},t&&t.parseFragmentIdentifier&&n?{fragmentIdentifier:yg(n,t)}:{})};Mc.stringifyUrl=(e,t)=>{t=Object.assign({encode:!0,strict:!0,[Rne]:!0},t);let r=UWe(e.url).split("?")[0]||"",n=Mc.extract(e.url),o=Mc.parse(n,{sort:!1}),i=Object.assign(o,e.query),a=Mc.stringify(i,t);a&&(a=`?${a}`);let u=y2r(e.url);return e.fragmentIdentifier&&(u=`#${t[Rne]?Za(e.fragmentIdentifier,t):e.fragmentIdentifier}`),`${r}${a}${u}`};Mc.pick=(e,t,r)=>{r=Object.assign({parseFragmentIdentifier:!0,[Rne]:!1},r);let{url:n,query:o,fragmentIdentifier:i}=Mc.parseUrl(e,r);return Mc.stringifyUrl({url:n,query:h2r(o,t),fragmentIdentifier:i},r)};Mc.exclude=(e,t,r)=>{let n=Array.isArray(t)?o=>!t.includes(o):(o,i)=>!t(o,i);return Mc.pick(e,n,r)}});var SO=A((STn,s$e)=>{var T2r=s$e.exports=typeof window!="undefined"&&window.Math==Math?window:typeof self!="undefined"&&self.Math==Math?self:Function("return this")();typeof __g=="number"&&(__g=T2r)});var Zy=A((TTn,l$e)=>{var I2r=l$e.exports={version:"2.6.12"};typeof __e=="number"&&(__e=I2r)});var c$e=A((ITn,u$e)=>{u$e.exports=function(e){if(typeof e!="function")throw TypeError(e+" is not a function!");return e}});var Fne=A((MTn,p$e)=>{var M2r=c$e();p$e.exports=function(e,t,r){if(M2r(e),t===void 0)return e;switch(r){case 1:return function(n){return e.call(t,n)};case 2:return function(n,o){return e.call(t,n,o)};case 3:return function(n,o,i){return e.call(t,n,o,i)}}return function(){return e.apply(t,arguments)}}});var TO=A((CTn,f$e)=>{f$e.exports=function(e){return typeof e=="object"?e!==null:typeof e=="function"}});var IO=A((ATn,d$e)=>{var C2r=TO();d$e.exports=function(e){if(!C2r(e))throw TypeError(e+" is not an object!");return e}});var gq=A((OTn,h$e)=>{h$e.exports=function(e){try{return!!e()}catch(t){return!0}}});var Yy=A((PTn,m$e)=>{m$e.exports=!gq()(function(){return Object.defineProperty({},"a",{get:function(){return 7}}).a!=7})});var Bne=A((NTn,v$e)=>{var g$e=TO(),Une=SO().document,A2r=g$e(Une)&&g$e(Une.createElement);v$e.exports=function(e){return A2r?Une.createElement(e):{}}});var Vne=A((DTn,y$e)=>{y$e.exports=!Yy()&&!gq()(function(){return Object.defineProperty(Bne()("div"),"a",{get:function(){return 7}}).a!=7})});var Gne=A((LTn,_$e)=>{var vq=TO();_$e.exports=function(e,t){if(!vq(e))return e;var r,n;if(t&&typeof(r=e.toString)=="function"&&!vq(n=r.call(e))||typeof(r=e.valueOf)=="function"&&!vq(n=r.call(e))||!t&&typeof(r=e.toString)=="function"&&!vq(n=r.call(e)))return n;throw TypeError("Can't convert object to primitive value")}});var Hne=A(x$e=>{var b$e=IO(),O2r=Vne(),P2r=Gne(),N2r=Object.defineProperty;x$e.f=Yy()?Object.defineProperty:function(t,r,n){if(b$e(t),r=P2r(r,!0),b$e(n),O2r)try{return N2r(t,r,n)}catch(o){}if("get"in n||"set"in n)throw TypeError("Accessors not supported!");return"value"in n&&(t[r]=n.value),t}});var Wne=A((RTn,w$e)=>{w$e.exports=function(e,t){return{enumerable:!(e&1),configurable:!(e&2),writable:!(e&4),value:t}}});var S$e=A((jTn,E$e)=>{var D2r=Hne(),L2r=Wne();E$e.exports=Yy()?function(e,t,r){return D2r.f(e,t,L2r(1,r))}:function(e,t,r){return e[t]=r,e}});var yq=A((qTn,T$e)=>{var k2r={}.hasOwnProperty;T$e.exports=function(e,t){return k2r.call(e,t)}});var _S=A((zTn,M$e)=>{var _q=SO(),$ne=Zy(),I$e=Fne(),R2r=S$e(),j2r=yq(),bq="prototype",ou=function(e,t,r){var n=e&ou.F,o=e&ou.G,i=e&ou.S,a=e&ou.P,u=e&ou.B,d=e&ou.W,h=o?$ne:$ne[t]||($ne[t]={}),v=h[bq],b=o?_q:i?_q[t]:(_q[t]||{})[bq],x,M,O;o&&(r=t);for(x in r)M=!n&&b&&b[x]!==void 0,!(M&&j2r(h,x))&&(O=M?b[x]:r[x],h[x]=o&&typeof b[x]!="function"?r[x]:u&&M?I$e(O,_q):d&&b[x]==O?function(D){var k=function(R,q,B){if(this instanceof D){switch(arguments.length){case 0:return new D;case 1:return new D(R);case 2:return new D(R,q)}return new D(R,q,B)}return D.apply(this,arguments)};return k[bq]=D[bq],k}(O):a&&typeof O=="function"?I$e(Function.call,O):O,a&&((h.virtual||(h.virtual={}))[x]=O,e&ou.R&&v&&!v[x]&&R2r(v,x,O)))};ou.F=1;ou.G=2;ou.S=4;ou.P=8;ou.B=16;ou.W=32;ou.U=64;ou.R=128;M$e.exports=ou});var A$e=A((FTn,C$e)=>{var q2r={}.toString;C$e.exports=function(e){return q2r.call(e).slice(8,-1)}});var Zne=A((UTn,O$e)=>{var z2r=A$e();O$e.exports=Object("z").propertyIsEnumerable(0)?Object:function(e){return z2r(e)=="String"?e.split(""):Object(e)}});var Yne=A((BTn,P$e)=>{P$e.exports=function(e){if(e==null)throw TypeError("Can't call method on  "+e);return e}});var MO=A((VTn,N$e)=>{var F2r=Zne(),U2r=Yne();N$e.exports=function(e){return F2r(U2r(e))}});var Kne=A((GTn,D$e)=>{var B2r=Math.ceil,V2r=Math.floor;D$e.exports=function(e){return isNaN(e=+e)?0:(e>0?V2r:B2r)(e)}});var k$e=A((HTn,L$e)=>{var G2r=Kne(),H2r=Math.min;L$e.exports=function(e){return e>0?H2r(G2r(e),9007199254740991):0}});var j$e=A((WTn,R$e)=>{var W2r=Kne(),$2r=Math.max,Z2r=Math.min;R$e.exports=function(e,t){return e=W2r(e),e<0?$2r(e+t,0):Z2r(e,t)}});var z$e=A(($Tn,q$e)=>{var Y2r=MO(),K2r=k$e(),X2r=j$e();q$e.exports=function(e){return function(t,r,n){var o=Y2r(t),i=K2r(o.length),a=X2r(n,i),u;if(e&&r!=r){for(;i>a;)if(u=o[a++],u!=u)return!0}else for(;i>a;a++)if((e||a in o)&&o[a]===r)return e||a||0;return!e&&-1}}});var U$e=A((ZTn,F$e)=>{F$e.exports=!0});var W$e=A((YTn,H$e)=>{var Q2r=Zy(),B$e=SO(),V$e="__core-js_shared__",G$e=B$e[V$e]||(B$e[V$e]={});(H$e.exports=function(e,t){return G$e[e]||(G$e[e]=t!==void 0?t:{})})("versions",[]).push({version:Q2r.version,mode:U$e()?"pure":"global",copyright:"\xA9 2020 Denis Pushkarev (zloirock.ru)"})});var Z$e=A((KTn,$$e)=>{var J2r=0,eTr=Math.random();$$e.exports=function(e){return"Symbol(".concat(e===void 0?"":e,")_",(++J2r+eTr).toString(36))}});var Xne=A((XTn,K$e)=>{var Y$e=W$e()("keys"),tTr=Z$e();K$e.exports=function(e){return Y$e[e]||(Y$e[e]=tTr(e))}});var J$e=A((QTn,Q$e)=>{var X$e=yq(),rTr=MO(),nTr=z$e()(!1),oTr=Xne()("IE_PROTO");Q$e.exports=function(e,t){var r=rTr(e),n=0,o=[],i;for(i in r)i!=oTr&&X$e(r,i)&&o.push(i);for(;t.length>n;)X$e(r,i=t[n++])&&(~nTr(o,i)||o.push(i));return o}});var Qne=A((JTn,eZe)=>{eZe.exports="constructor,hasOwnProperty,isPrototypeOf,propertyIsEnumerable,toLocaleString,toString,valueOf".split(",")});var xq=A((eIn,tZe)=>{var iTr=J$e(),aTr=Qne();tZe.exports=Object.keys||function(t){return iTr(t,aTr)}});var nZe=A(rZe=>{rZe.f=Object.getOwnPropertySymbols});var wq=A(oZe=>{oZe.f={}.propertyIsEnumerable});var aZe=A((nIn,iZe)=>{var sTr=Yne();iZe.exports=function(e){return Object(sTr(e))}});var uZe=A((oIn,lZe)=>{"use strict";var lTr=Yy(),sZe=xq(),uTr=nZe(),cTr=wq(),pTr=aZe(),fTr=Zne(),Eq=Object.assign;lZe.exports=!Eq||gq()(function(){var e={},t={},r=Symbol(),n="abcdefghijklmnopqrst";return e[r]=7,n.split("").forEach(function(o){t[o]=o}),Eq({},e)[r]!=7||Object.keys(Eq({},t)).join("")!=n})?function(t,r){for(var n=pTr(t),o=arguments.length,i=1,a=uTr.f,u=cTr.f;o>i;)for(var d=fTr(arguments[i++]),h=a?sZe(d).concat(a(d)):sZe(d),v=h.length,b=0,x;v>b;)x=h[b++],(!lTr||u.call(d,x))&&(n[x]=d[x]);return n}:Eq});var cZe=A(()=>{var Jne=_S();Jne(Jne.S+Jne.F,"Object",{assign:uZe()})});var fZe=A((sIn,pZe)=>{cZe();pZe.exports=Zy().Object.assign});var hZe=A((uIn,dZe)=>{var dTr=Hne(),hTr=IO(),mTr=xq();dZe.exports=Yy()?Object.defineProperties:function(t,r){hTr(t);for(var n=mTr(r),o=n.length,i=0,a;o>i;)dTr.f(t,a=n[i++],r[a]);return t}});var vZe=A((cIn,gZe)=>{var mZe=SO().document;gZe.exports=mZe&&mZe.documentElement});var bZe=A((pIn,_Ze)=>{var gTr=IO(),vTr=hZe(),yZe=Qne(),yTr=Xne()("IE_PROTO"),toe=function(){},roe="prototype",Sq=function(){var e=Bne()("iframe"),t=yZe.length,r="<",n=">",o;for(e.style.display="none",vZe().appendChild(e),e.src="javascript:",o=e.contentWindow.document,o.open(),o.write(r+"script"+n+"document.F=Object"+r+"/script"+n),o.close(),Sq=o.F;t--;)delete Sq[roe][yZe[t]];return Sq()};_Ze.exports=Object.create||function(t,r){var n;return t!==null?(toe[roe]=gTr(t),n=new toe,toe[roe]=null,n[yTr]=t):n=Sq(),r===void 0?n:vTr(n,r)}});var wZe=A(()=>{var xZe=_S();xZe(xZe.S,"Object",{create:bZe()})});var SZe=A((hIn,EZe)=>{wZe();var _Tr=Zy().Object;EZe.exports=function(t,r){return _Tr.create(t,r)}});var MZe=A(IZe=>{var bTr=wq(),xTr=Wne(),wTr=MO(),ETr=Gne(),STr=yq(),TTr=Vne(),TZe=Object.getOwnPropertyDescriptor;IZe.f=Yy()?TZe:function(t,r){if(t=wTr(t),r=ETr(r,!0),TTr)try{return TZe(t,r)}catch(n){}if(STr(t,r))return xTr(!bTr.f.call(t,r),t[r])}});var OZe=A((gIn,AZe)=>{var ITr=TO(),MTr=IO(),CZe=function(e,t){if(MTr(e),!ITr(t)&&t!==null)throw TypeError(t+": can't set as prototype!")};AZe.exports={set:Object.setPrototypeOf||("__proto__"in{}?function(e,t,r){try{r=Fne()(Function.call,MZe().f(Object.prototype,"__proto__").set,2),r(e,[]),t=!(e instanceof Array)}catch(n){t=!0}return function(o,i){return CZe(o,i),t?o.__proto__=i:r(o,i),o}}({},!1):void 0),check:CZe}});var NZe=A(()=>{var PZe=_S();PZe(PZe.S,"Object",{setPrototypeOf:OZe().set})});var LZe=A((_In,DZe)=>{NZe();DZe.exports=Zy().Object.setPrototypeOf});var ko=A((SIn,Iq)=>{(function(){"use strict";var e={}.hasOwnProperty;function t(){for(var o="",i=0;i<arguments.length;i++){var a=arguments[i];a&&(o=n(o,r(a)))}return o}function r(o){if(typeof o=="string"||typeof o=="number")return o;if(typeof o!="object")return"";if(Array.isArray(o))return t.apply(null,o);if(o.toString!==Object.prototype.toString&&!o.toString.toString().includes("[native code]"))return o.toString();var i="";for(var a in o)e.call(o,a)&&o[a]&&(i=n(i,a));return i}function n(o,i){return i?o?o+" "+i:o+i:o}typeof Iq!="undefined"&&Iq.exports?(t.default=t,Iq.exports=t):typeof define=="function"&&typeof define.amd=="object"&&define.amd?define("classnames",[],function(){return t}):window.classNames=t})()});var Mq=A((MIn,RZe)=>{"use strict";var CTr=function(e,t,r,n,o,i,a,u){if(!e){var d;if(t===void 0)d=new Error("Minified exception occurred; use the non-minified dev environment for the full error message and additional helpful warnings.");else{var h=[r,n,o,i,a,u],v=0;d=new Error(t.replace(/%s/g,function(){return h[v++]})),d.name="Invariant Violation"}throw d.framesToPop=1,d}};RZe.exports=CTr});var soe=A(aoe=>{"use strict";Object.defineProperty(aoe,"__esModule",{value:!0});function FZe(){var e=this.constructor.getDerivedStateFromProps(this.props,this.state);e!=null&&this.setState(e)}function UZe(e){function t(r){var n=this.constructor.getDerivedStateFromProps(e,r);return n!=null?n:null}this.setState(t.bind(this))}function BZe(e,t){try{var r=this.props,n=this.state;this.props=e,this.state=t,this.__reactInternalSnapshotFlag=!0,this.__reactInternalSnapshot=this.getSnapshotBeforeUpdate(r,n)}finally{this.props=r,this.state=n}}FZe.__suppressDeprecationWarning=!0;UZe.__suppressDeprecationWarning=!0;BZe.__suppressDeprecationWarning=!0;function OTr(e){var t=e.prototype;if(!t||!t.isReactComponent)throw new Error("Can only polyfill class components");if(typeof e.getDerivedStateFromProps!="function"&&typeof t.getSnapshotBeforeUpdate!="function")return e;var r=null,n=null,o=null;if(typeof t.componentWillMount=="function"?r="componentWillMount":typeof t.UNSAFE_componentWillMount=="function"&&(r="UNSAFE_componentWillMount"),typeof t.componentWillReceiveProps=="function"?n="componentWillReceiveProps":typeof t.UNSAFE_componentWillReceiveProps=="function"&&(n="UNSAFE_componentWillReceiveProps"),typeof t.componentWillUpdate=="function"?o="componentWillUpdate":typeof t.UNSAFE_componentWillUpdate=="function"&&(o="UNSAFE_componentWillUpdate"),r!==null||n!==null||o!==null){var i=e.displayName||e.name,a=typeof e.getDerivedStateFromProps=="function"?"getDerivedStateFromProps()":"getSnapshotBeforeUpdate()";throw Error(`Unsafe legacy lifecycles will not be called for components using new component APIs.

`+i+" uses "+a+" but also contains the following legacy lifecycles:"+(r!==null?`
  `+r:"")+(n!==null?`
  `+n:"")+(o!==null?`
  `+o:"")+`

The above lifecycles should be removed. Learn more about this warning here:
https://fb.me/react-async-component-lifecycle-hooks`)}if(typeof e.getDerivedStateFromProps=="function"&&(t.componentWillMount=FZe,t.componentWillReceiveProps=UZe),typeof t.getSnapshotBeforeUpdate=="function"){if(typeof t.componentDidUpdate!="function")throw new Error("Cannot polyfill getSnapshotBeforeUpdate() for components that do not define componentDidUpdate() on the prototype");t.componentWillUpdate=BZe;var u=t.componentDidUpdate;t.componentDidUpdate=function(h,v,b){var x=this.__reactInternalSnapshotFlag?this.__reactInternalSnapshot:b;u.call(this,h,v,x)}}return e}aoe.polyfill=OTr});var loe=A((WIn,HZe)=>{var NTr=Yy(),DTr=xq(),LTr=MO(),kTr=wq().f;HZe.exports=function(e){return function(t){for(var r=LTr(t),n=DTr(r),o=n.length,i=0,a=[],u;o>i;)u=n[i++],(!NTr||kTr.call(r,u))&&a.push(e?[u,r[u]]:r[u]);return a}}});var $Ze=A(()=>{var WZe=_S(),RTr=loe()(!0);WZe(WZe.S,"Object",{entries:function(t){return RTr(t)}})});var YZe=A((YIn,ZZe)=>{$Ze();ZZe.exports=Zy().Object.entries});var uoe=A((KIn,KZe)=>{KZe.exports=YZe()});var Nq=A((Pq,tYe)=>{"use strict";Object.defineProperty(Pq,"__esModule",{value:!0});Pq.default=HTr;function HTr(e){function t(n,o,i,a,u,d){var h=a||"<<anonymous>>",v=d||i;if(o[i]==null)return n?new Error("Required "+u+" `"+v+"` was not specified "+("in `"+h+"`.")):null;for(var b=arguments.length,x=Array(b>6?b-6:0),M=6;M<b;M++)x[M-6]=arguments[M];return e.apply(void 0,[o,i,h,u,v].concat(x))}var r=t.bind(null,!1);return r.isRequired=t.bind(null,!0),r}tYe.exports=Pq.default});var nYe=A(()=>{var rYe=_S(),WTr=loe()(!1);rYe(rYe.S,"Object",{values:function(t){return WTr(t)}})});var iYe=A((oMn,oYe)=>{nYe();oYe.exports=Zy().Object.values});var sYe=A((iMn,aYe)=>{aYe.exports=iYe()});var cYe=A(ui=>{"use strict";var Qs=typeof Symbol=="function"&&Symbol.for,hoe=Qs?Symbol.for("react.element"):60103,moe=Qs?Symbol.for("react.portal"):60106,Dq=Qs?Symbol.for("react.fragment"):60107,Lq=Qs?Symbol.for("react.strict_mode"):60108,kq=Qs?Symbol.for("react.profiler"):60114,Rq=Qs?Symbol.for("react.provider"):60109,jq=Qs?Symbol.for("react.context"):60110,goe=Qs?Symbol.for("react.async_mode"):60111,qq=Qs?Symbol.for("react.concurrent_mode"):60111,zq=Qs?Symbol.for("react.forward_ref"):60112,Fq=Qs?Symbol.for("react.suspense"):60113,YTr=Qs?Symbol.for("react.suspense_list"):60120,Uq=Qs?Symbol.for("react.memo"):60115,Bq=Qs?Symbol.for("react.lazy"):60116,KTr=Qs?Symbol.for("react.block"):60121,XTr=Qs?Symbol.for("react.fundamental"):60117,QTr=Qs?Symbol.for("react.responder"):60118,JTr=Qs?Symbol.for("react.scope"):60119;function up(e){if(typeof e=="object"&&e!==null){var t=e.$$typeof;switch(t){case hoe:switch(e=e.type,e){case goe:case qq:case Dq:case kq:case Lq:case Fq:return e;default:switch(e=e&&e.$$typeof,e){case jq:case zq:case Bq:case Uq:case Rq:return e;default:return t}}case moe:return t}}}function uYe(e){return up(e)===qq}ui.AsyncMode=goe;ui.ConcurrentMode=qq;ui.ContextConsumer=jq;ui.ContextProvider=Rq;ui.Element=hoe;ui.ForwardRef=zq;ui.Fragment=Dq;ui.Lazy=Bq;ui.Memo=Uq;ui.Portal=moe;ui.Profiler=kq;ui.StrictMode=Lq;ui.Suspense=Fq;ui.isAsyncMode=function(e){return uYe(e)||up(e)===goe};ui.isConcurrentMode=uYe;ui.isContextConsumer=function(e){return up(e)===jq};ui.isContextProvider=function(e){return up(e)===Rq};ui.isElement=function(e){return typeof e=="object"&&e!==null&&e.$$typeof===hoe};ui.isForwardRef=function(e){return up(e)===zq};ui.isFragment=function(e){return up(e)===Dq};ui.isLazy=function(e){return up(e)===Bq};ui.isMemo=function(e){return up(e)===Uq};ui.isPortal=function(e){return up(e)===moe};ui.isProfiler=function(e){return up(e)===kq};ui.isStrictMode=function(e){return up(e)===Lq};ui.isSuspense=function(e){return up(e)===Fq};ui.isValidElementType=function(e){return typeof e=="string"||typeof e=="function"||e===Dq||e===qq||e===kq||e===Lq||e===Fq||e===YTr||typeof e=="object"&&e!==null&&(e.$$typeof===Bq||e.$$typeof===Uq||e.$$typeof===Rq||e.$$typeof===jq||e.$$typeof===zq||e.$$typeof===XTr||e.$$typeof===QTr||e.$$typeof===JTr||e.$$typeof===KTr)};ui.typeOf=up});var fYe=A((cMn,pYe)=>{"use strict";pYe.exports=cYe()});var Uu=A((Vq,hYe)=>{"use strict";Object.defineProperty(Vq,"__esModule",{value:!0});var eIr=Pe(),tIr=dYe(eIr),rIr=fYe(),nIr=Nq(),oIr=dYe(nIr);function dYe(e){return e&&e.__esModule?e:{default:e}}function iIr(e,t,r,n,o){var i=e[t];return tIr.default.isValidElement(i)?new Error("Invalid "+n+" `"+o+"` of type ReactElement "+("supplied to `"+r+"`,expected an element type (a string ")+", component class, or function component)."):(0,rIr.isValidElementType)(i)?null:new Error("Invalid "+n+" `"+o+"` of value `"+i+"` "+("supplied to `"+r+"`, expected an element type (a string ")+", component class, or function component).")}Vq.default=(0,oIr.default)(iIr);hYe.exports=Vq.default});var bYe=A(($q,_Ye)=>{"use strict";Object.defineProperty($q,"__esModule",{value:!0});$q.default=hIr;var pIr=Nq(),fIr=dIr(pIr);function dIr(e){return e&&e.__esModule?e:{default:e}}function hIr(){for(var e=arguments.length,t=Array(e),r=0;r<e;r++)t[r]=arguments[r];function n(){for(var o=arguments.length,i=Array(o),a=0;a<o;a++)i[a]=arguments[a];var u=null;return t.forEach(function(d){if(u==null){var h=d.apply(void 0,i);h!=null&&(u=h)}}),u}return(0,fIr.default)(n)}_Ye.exports=$q.default});var j_=A((OMn,SYe)=>{"use strict";var gIr=function(){};SYe.exports=gIr});var Ya=A((qMn,PO)=>{function bIr(e){return e&&e.__esModule?e:{default:e}}PO.exports=bIr,PO.exports.__esModule=!0,PO.exports.default=PO.exports});var MYe=A((Xq,IYe)=>{"use strict";Xq.__esModule=!0;Xq.default=wIr;var xIr=/-(.)/g;function wIr(e){return e.replace(xIr,function(t,r){return r.toUpperCase()})}IYe.exports=Xq.default});var Eoe=A((Qq,CYe)=>{"use strict";var EIr=Ya();Qq.__esModule=!0;Qq.default=IIr;var SIr=EIr(MYe()),TIr=/^-ms-/;function IIr(e){return(0,SIr.default)(e.replace(TIr,"ms-"))}CYe.exports=Qq.default});var OYe=A((Jq,AYe)=>{"use strict";Jq.__esModule=!0;Jq.default=CIr;var MIr=/([A-Z])/g;function CIr(e){return e.replace(MIr,"-$1").toLowerCase()}AYe.exports=Jq.default});var NYe=A((e8,PYe)=>{"use strict";var AIr=Ya();e8.__esModule=!0;e8.default=NIr;var OIr=AIr(OYe()),PIr=/^ms-/;function NIr(e){return(0,OIr.default)(e).replace(PIr,"-ms-")}PYe.exports=e8.default});var LYe=A((t8,DYe)=>{"use strict";var DIr=Ya();t8.__esModule=!0;t8.default=jIr;var LIr=DIr(Eoe()),kIr=/^(top|right|bottom|left)$/,RIr=/^([+-]?(?:\d*\.|)\d+(?:[eE][+-]?\d+|))(?!px)[a-z%]+$/i;function jIr(e){if(!e)throw new TypeError("No Element passed to `getComputedStyle()`");var t=e.ownerDocument;return"defaultView"in t?t.defaultView.opener?e.ownerDocument.defaultView.getComputedStyle(e,null):window.getComputedStyle(e,null):{getPropertyValue:function(n){var o=e.style;n=(0,LIr.default)(n),n=="float"&&(n="styleFloat");var i=e.currentStyle[n]||null;if(i==null&&o&&o[n]&&(i=o[n]),RIr.test(i)&&!kIr.test(n)){var a=o.left,u=e.runtimeStyle,d=u&&u.left;d&&(u.left=e.currentStyle.left),o.left=n==="fontSize"?"1em":i,i=o.pixelLeft+"px",o.left=a,d&&(u.left=d)}return i}}}DYe.exports=t8.default});var RYe=A((r8,kYe)=>{"use strict";r8.__esModule=!0;r8.default=qIr;function qIr(e,t){return"removeProperty"in e.style?e.style.removeProperty(t):e.style.removeAttribute(t)}kYe.exports=r8.default});var jh=A((NO,jYe)=>{"use strict";NO.__esModule=!0;NO.default=void 0;var zIr=!!(typeof window!="undefined"&&window.document&&window.document.createElement);NO.default=zIr;jYe.exports=NO.default});var VYe=A(yo=>{"use strict";var FIr=Ya();yo.__esModule=!0;yo.default=yo.animationEnd=yo.animationDelay=yo.animationTiming=yo.animationDuration=yo.animationName=yo.transitionEnd=yo.transitionDuration=yo.transitionDelay=yo.transitionTiming=yo.transitionProperty=yo.transform=void 0;var UIr=FIr(jh()),o8="transform";yo.transform=o8;var qh,Soe,qYe;yo.animationEnd=qYe;yo.transitionEnd=Soe;var Toe,Ioe,Moe,Coe;yo.transitionDelay=Coe;yo.transitionTiming=Moe;yo.transitionDuration=Ioe;yo.transitionProperty=Toe;var zYe,FYe,UYe,BYe;yo.animationDelay=BYe;yo.animationTiming=UYe;yo.animationDuration=FYe;yo.animationName=zYe;UIr.default&&(n8=VIr(),qh=n8.prefix,yo.transitionEnd=Soe=n8.transitionEnd,yo.animationEnd=qYe=n8.animationEnd,yo.transform=o8=qh+"-"+o8,yo.transitionProperty=Toe=qh+"-transition-property",yo.transitionDuration=Ioe=qh+"-transition-duration",yo.transitionDelay=Coe=qh+"-transition-delay",yo.transitionTiming=Moe=qh+"-transition-timing-function",yo.animationName=zYe=qh+"-animation-name",yo.animationDuration=FYe=qh+"-animation-duration",yo.animationTiming=UYe=qh+"-animation-delay",yo.animationDelay=BYe=qh+"-animation-timing-function");var n8,BIr={transform:o8,end:Soe,property:Toe,timing:Moe,delay:Coe,duration:Ioe};yo.default=BIr;function VIr(){for(var e=document.createElement("div").style,t={O:function(h){return"o"+h.toLowerCase()},Moz:function(h){return h.toLowerCase()},Webkit:function(h){return"webkit"+h},ms:function(h){return"MS"+h}},r=Object.keys(t),n,o,i="",a=0;a<r.length;a++){var u=r[a];if(u+"TransitionProperty"in e){i="-"+u.toLowerCase(),n=t[u]("TransitionEnd"),o=t[u]("AnimationEnd");break}}return!n&&"transitionProperty"in e&&(n="transitionend"),!o&&"animationName"in e&&(o="animationend"),e=null,{animationEnd:o,transitionEnd:n,prefix:i}}});var HYe=A((i8,GYe)=>{"use strict";i8.__esModule=!0;i8.default=HIr;var GIr=/^((translate|rotate|scale)(X|Y|Z|3d)?|matrix(3d)?|perspective|skew(X|Y)?)$/i;function HIr(e){return!!(e&&GIr.test(e))}GYe.exports=i8.default});var s8=A((a8,WYe)=>{"use strict";var DO=Ya();a8.__esModule=!0;a8.default=XIr;var WIr=DO(Eoe()),Aoe=DO(NYe()),$Ir=DO(LYe()),ZIr=DO(RYe()),YIr=VYe(),KIr=DO(HYe());function XIr(e,t,r){var n="",o="",i=t;if(typeof t=="string"){if(r===void 0)return e.style[(0,WIr.default)(t)]||(0,$Ir.default)(e).getPropertyValue((0,Aoe.default)(t));(i={})[t]=r}Object.keys(i).forEach(function(a){var u=i[a];!u&&u!==0?(0,ZIr.default)(e,(0,Aoe.default)(a)):(0,KIr.default)(a)?o+=a+"("+u+") ":n+=(0,Aoe.default)(a)+": "+u+";"}),o&&(n+=YIr.transform+": "+o+";"),e.style.cssText+=";"+n}WYe.exports=a8.default});var $Ye=A(TS=>{"use strict";TS.__esModule=!0;TS.classNamesShape=TS.timeoutsShape=void 0;var FMn=QIr(xt());function QIr(e){return e&&e.__esModule?e:{default:e}}var JIr=null;TS.timeoutsShape=JIr;var eMr=null;TS.classNamesShape=eMr});var YYe=A(Cc=>{"use strict";Cc.__esModule=!0;Cc.default=Cc.EXITING=Cc.ENTERED=Cc.ENTERING=Cc.EXITED=Cc.UNMOUNTED=void 0;var tMr=oMr(xt()),Ooe=ZYe(Pe()),rMr=ZYe(va()),nMr=soe(),BMn=$Ye();function ZYe(e){return e&&e.__esModule?e:{default:e}}function oMr(e){if(e&&e.__esModule)return e;var t={};if(e!=null){for(var r in e)if(Object.prototype.hasOwnProperty.call(e,r)){var n=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(e,r):{};n.get||n.set?Object.defineProperty(t,r,n):t[r]=e[r]}}return t.default=e,t}function iMr(e,t){if(e==null)return{};var r={},n=Object.keys(e),o,i;for(i=0;i<n.length;i++)o=n[i],!(t.indexOf(o)>=0)&&(r[o]=e[o]);return r}function aMr(e,t){e.prototype=Object.create(t.prototype),e.prototype.constructor=e,e.__proto__=t}var LO="unmounted";Cc.UNMOUNTED=LO;var q_="exited";Cc.EXITED=q_;var z_="entering";Cc.ENTERING=z_;var MS="entered";Cc.ENTERED=MS;var Poe="exiting";Cc.EXITING=Poe;var zh=function(e){aMr(t,e);function t(n,o){var i;i=e.call(this,n,o)||this;var a=o.transitionGroup,u=a&&!a.isMounting?n.enter:n.appear,d;return i.appearStatus=null,n.in?u?(d=q_,i.appearStatus=z_):d=MS:n.unmountOnExit||n.mountOnEnter?d=LO:d=q_,i.state={status:d},i.nextCallback=null,i}var r=t.prototype;return r.getChildContext=function(){return{transitionGroup:null}},t.getDerivedStateFromProps=function(o,i){var a=o.in;return a&&i.status===LO?{status:q_}:null},r.componentDidMount=function(){this.updateStatus(!0,this.appearStatus)},r.componentDidUpdate=function(o){var i=null;if(o!==this.props){var a=this.state.status;this.props.in?a!==z_&&a!==MS&&(i=z_):(a===z_||a===MS)&&(i=Poe)}this.updateStatus(!1,i)},r.componentWillUnmount=function(){this.cancelNextCallback()},r.getTimeouts=function(){var o=this.props.timeout,i,a,u;return i=a=u=o,o!=null&&typeof o!="number"&&(i=o.exit,a=o.enter,u=o.appear!==void 0?o.appear:a),{exit:i,enter:a,appear:u}},r.updateStatus=function(o,i){if(o===void 0&&(o=!1),i!==null){this.cancelNextCallback();var a=rMr.default.findDOMNode(this);i===z_?this.performEnter(a,o):this.performExit(a)}else this.props.unmountOnExit&&this.state.status===q_&&this.setState({status:LO})},r.performEnter=function(o,i){var a=this,u=this.props.enter,d=this.context.transitionGroup?this.context.transitionGroup.isMounting:i,h=this.getTimeouts(),v=d?h.appear:h.enter;if(!i&&!u){this.safeSetState({status:MS},function(){a.props.onEntered(o)});return}this.props.onEnter(o,d),this.safeSetState({status:z_},function(){a.props.onEntering(o,d),a.onTransitionEnd(o,v,function(){a.safeSetState({status:MS},function(){a.props.onEntered(o,d)})})})},r.performExit=function(o){var i=this,a=this.props.exit,u=this.getTimeouts();if(!a){this.safeSetState({status:q_},function(){i.props.onExited(o)});return}this.props.onExit(o),this.safeSetState({status:Poe},function(){i.props.onExiting(o),i.onTransitionEnd(o,u.exit,function(){i.safeSetState({status:q_},function(){i.props.onExited(o)})})})},r.cancelNextCallback=function(){this.nextCallback!==null&&(this.nextCallback.cancel(),this.nextCallback=null)},r.safeSetState=function(o,i){i=this.setNextCallback(i),this.setState(o,i)},r.setNextCallback=function(o){var i=this,a=!0;return this.nextCallback=function(u){a&&(a=!1,i.nextCallback=null,o(u))},this.nextCallback.cancel=function(){a=!1},this.nextCallback},r.onTransitionEnd=function(o,i,a){this.setNextCallback(a);var u=i==null&&!this.props.addEndListener;if(!o||u){setTimeout(this.nextCallback,0);return}this.props.addEndListener&&this.props.addEndListener(o,this.nextCallback),i!=null&&setTimeout(this.nextCallback,i)},r.render=function(){var o=this.state.status;if(o===LO)return null;var i=this.props,a=i.children,u=iMr(i,["children"]);if(delete u.in,delete u.mountOnEnter,delete u.unmountOnExit,delete u.appear,delete u.enter,delete u.exit,delete u.timeout,delete u.addEndListener,delete u.onEnter,delete u.onEntering,delete u.onEntered,delete u.onExit,delete u.onExiting,delete u.onExited,typeof a=="function")return a(o,u);var d=Ooe.default.Children.only(a);return Ooe.default.cloneElement(d,u)},t}(Ooe.default.Component);zh.contextTypes={transitionGroup:tMr.object};zh.childContextTypes={transitionGroup:function(){}};zh.propTypes={};function IS(){}zh.defaultProps={in:!1,mountOnEnter:!1,unmountOnExit:!1,appear:!1,enter:!0,exit:!0,onEnter:IS,onEntering:IS,onEntered:IS,onExit:IS,onExiting:IS,onExited:IS};zh.UNMOUNTED=0;zh.EXITED=1;zh.ENTERING=2;zh.ENTERED=3;zh.EXITING=4;var sMr=(0,nMr.polyfill)(zh);Cc.default=sMr});var F_=A((l8,KYe)=>{"use strict";l8.__esModule=!0;l8.default=lMr;function lMr(e){return e&&e.ownerDocument||document}KYe.exports=l8.default});var QYe=A((u8,XYe)=>{"use strict";var uMr=Ya();u8.__esModule=!0;u8.default=pMr;var cMr=uMr(F_());function pMr(e){e===void 0&&(e=(0,cMr.default)());try{return e.activeElement}catch(t){}}XYe.exports=u8.default});var RO=A((kO,eKe)=>{"use strict";var fMr=Ya();kO.__esModule=!0;kO.default=void 0;var dMr=fMr(jh()),hMr=function(){return dMr.default?function(e,t){return e.contains?e.contains(t):e.compareDocumentPosition?e===t||!!(e.compareDocumentPosition(t)&16):JYe(e,t)}:JYe}();kO.default=hMr;function JYe(e,t){if(t)do if(t===e)return!0;while(t=t.parentNode);return!1}eKe.exports=kO.default});var oKe=A((U_,nKe)=>{function tKe(e){if(e&&typeof e=="object"){var t=e.which||e.keyCode||e.charCode;t&&(e=t)}if(typeof e=="number")return rKe[e];var r=String(e),n=xg[r.toLowerCase()];if(n)return n;var n=c8[r.toLowerCase()];if(n)return n;if(r.length===1)return r.charCodeAt(0)}tKe.isEventKey=function(t,r){if(t&&typeof t=="object"){var n=t.which||t.keyCode||t.charCode;if(n==null)return!1;if(typeof r=="string"){var o=xg[r.toLowerCase()];if(o)return o===n;var o=c8[r.toLowerCase()];if(o)return o===n}else if(typeof r=="number")return r===n;return!1}};U_=nKe.exports=tKe;var xg=U_.code=U_.codes={backspace:8,tab:9,enter:13,shift:16,ctrl:17,alt:18,"pause/break":19,"caps lock":20,esc:27,space:32,"page up":33,"page down":34,end:35,home:36,left:37,up:38,right:39,down:40,insert:45,delete:46,command:91,"left command":91,"right command":93,"numpad *":106,"numpad +":107,"numpad -":109,"numpad .":110,"numpad /":111,"num lock":144,"scroll lock":145,"my computer":182,"my calculator":183,";":186,"=":187,",":188,"-":189,".":190,"/":191,"`":192,"[":219,"\\":220,"]":221,"'":222},c8=U_.aliases={windows:91,"\u21E7":16,"\u2325":18,"\u2303":17,"\u2318":91,ctl:17,control:17,option:18,pause:19,break:19,caps:20,return:13,escape:27,spc:32,spacebar:32,pgup:33,pgdn:34,ins:45,del:46,cmd:91};for(ya=97;ya<123;ya++)xg[String.fromCharCode(ya)]=ya-32;for(ya=48;ya<58;ya++)xg[ya-48]=ya;var ya;for(ya=1;ya<13;ya++)xg["f"+ya]=ya+111;for(ya=0;ya<10;ya++)xg["numpad "+ya]=ya+96;var rKe=U_.names=U_.title={};for(ya in xg)rKe[xg[ya]]=ya;for(Noe in c8)xg[Noe]=c8[Noe];var Noe});var Doe=A((p8,iKe)=>{"use strict";Object.defineProperty(p8,"__esModule",{value:!0});p8.default=mMr;function mMr(e){return function(r,n,o,i,a){var u=o||"<<anonymous>>",d=a||n;if(r[n]==null)return new Error("The "+i+" `"+d+"` is required to make "+("`"+u+"` accessible for users of assistive ")+"technologies such as screen readers.");for(var h=arguments.length,v=Array(h>5?h-5:0),b=5;b<h;b++)v[b-5]=arguments[b];return e.apply(void 0,[r,n,o,i,a].concat(v))}}iKe.exports=p8.default});var f8=A((jO,sKe)=>{"use strict";var gMr=Ya();jO.__esModule=!0;jO.default=void 0;var vMr=gMr(jh()),aKe=function(){};vMr.default&&(aKe=function(){if(document.addEventListener)return function(e,t,r,n){return e.addEventListener(t,r,n||!1)};if(document.attachEvent)return function(e,t,r){return e.attachEvent("on"+t,function(n){n=n||window.event,n.target=n.target||n.srcElement,n.currentTarget=e,r.call(e,n)})}}());var yMr=aKe;jO.default=yMr;sKe.exports=jO.default});var d8=A((qO,uKe)=>{"use strict";var _Mr=Ya();qO.__esModule=!0;qO.default=void 0;var bMr=_Mr(jh()),lKe=function(){};bMr.default&&(lKe=function(){if(document.addEventListener)return function(e,t,r,n){return e.removeEventListener(t,r,n||!1)};if(document.attachEvent)return function(e,t,r){return e.detachEvent("on"+t,r)}}());var xMr=lKe;qO.default=xMr;uKe.exports=qO.default});var Loe=A((h8,pKe)=>{"use strict";h8.__esModule=!0;h8.default=function(e,t,r,n){return(0,EMr.default)(e,t,r,n),{remove:function(){(0,TMr.default)(e,t,r,n)}}};var wMr=f8(),EMr=cKe(wMr),SMr=d8(),TMr=cKe(SMr);function cKe(e){return e&&e.__esModule?e:{default:e}}pKe.exports=h8.default});var B_=A((m8,dKe)=>{"use strict";m8.__esModule=!0;m8.default=function(e){return(0,AMr.default)(MMr.default.findDOMNode(e))};var IMr=va(),MMr=fKe(IMr),CMr=F_(),AMr=fKe(CMr);function fKe(e){return e&&e.__esModule?e:{default:e}}dKe.exports=m8.default});var mKe=A((y8,hKe)=>{"use strict";y8.__esModule=!0;var OMr=RO(),PMr=CS(OMr),NMr=xt(),g8=CS(NMr),DMr=Pe(),LMr=CS(DMr),kMr=va(),RMr=CS(kMr),jMr=Loe(),koe=CS(jMr),qMr=B_(),zMr=CS(qMr);function CS(e){return e&&e.__esModule?e:{default:e}}function FMr(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function UMr(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t&&(typeof t=="object"||typeof t=="function")?t:e}function BMr(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var VMr=27;function GMr(e){return e.button===0}function HMr(e){return!!(e.metaKey||e.altKey||e.ctrlKey||e.shiftKey)}var v8=function(e){BMr(t,e);function t(r,n){FMr(this,t);var o=UMr(this,e.call(this,r,n));return o.addEventListeners=function(){o.currentEvent=window.event;var i=o.props.event,a=(0,zMr.default)(o);o.documentMouseCaptureListener=(0,koe.default)(a,i,o.handleMouseCapture,!0),o.documentMouseListener=(0,koe.default)(a,i,o.handleMouse),o.documentKeyupListener=(0,koe.default)(a,"keyup",o.handleKeyUp)},o.removeEventListeners=function(){o.documentMouseCaptureListener&&o.documentMouseCaptureListener.remove(),o.documentMouseListener&&o.documentMouseListener.remove(),o.documentKeyupListener&&o.documentKeyupListener.remove()},o.handleMouseCapture=function(i){o.preventMouseRootClose=HMr(i)||!GMr(i)||(0,PMr.default)(RMr.default.findDOMNode(o),i.target)},o.handleMouse=function(i){if(i===o.currentEvent){o.currentEvent=void 0;return}!o.preventMouseRootClose&&o.props.onRootClose&&o.props.onRootClose(i)},o.handleKeyUp=function(i){if(i===o.currentEvent){o.currentEvent=void 0;return}i.keyCode===VMr&&o.props.onRootClose&&o.props.onRootClose(i)},o.preventMouseRootClose=!1,o}return t.prototype.componentDidMount=function(){this.props.disabled||this.addEventListeners()},t.prototype.componentDidUpdate=function(n){!this.props.disabled&&n.disabled?this.addEventListeners():this.props.disabled&&!n.disabled&&this.removeEventListeners()},t.prototype.componentWillUnmount=function(){this.props.disabled||this.removeEventListeners()},t.prototype.render=function(){return this.props.children},t}(LMr.default.Component);v8.displayName="RootCloseWrapper";v8.propTypes={onRootClose:g8.default.func,children:g8.default.element,disabled:g8.default.bool,event:g8.default.oneOf(["click","mousedown"])};v8.defaultProps={event:"click"};y8.default=v8;hKe.exports=y8.default});var MKe=A((E8,IKe)=>{"use strict";E8.__esModule=!0;E8.default=iCr;var oCr=/^[\w-]*$/,Woe=Function.prototype.bind.call(Function.prototype.call,[].slice);function iCr(e,t){var r=t[0]==="#",n=t[0]===".",o=r||n?t.slice(1):t,i=oCr.test(o),a;return i?r?(e=e.getElementById?e:document,(a=e.getElementById(o))?[a]:[]):e.getElementsByClassName&&n?Woe(e.getElementsByClassName(o)):Woe(e.getElementsByTagName(t)):Woe(e.querySelectorAll(t))}IKe.exports=E8.default});var OKe=A((S8,AKe)=>{"use strict";var CKe=Ya();S8.__esModule=!0;S8.default=lCr;var aCr=CKe(RO()),sCr=CKe(MKe());function lCr(e,t){return function(n){var o=n.currentTarget,i=n.target,a=(0,sCr.default)(o,e);a.some(function(u){return(0,aCr.default)(u,i)})&&t.call(this,n)}}AKe.exports=S8.default});var DKe=A((UO,NKe)=>{"use strict";var $oe=Ya();UO.__esModule=!0;UO.default=void 0;var uCr=$oe(jh()),cCr=$oe(f8()),pCr=$oe(d8()),PKe=function(){};uCr.default&&(PKe=function(t,r,n,o){return(0,cCr.default)(t,r,n,o),function(){(0,pCr.default)(t,r,n,o)}});var fCr=PKe;UO.default=fCr;NKe.exports=UO.default});var qKe=A(Xy=>{"use strict";var T8=Ya();Xy.__esModule=!0;Xy.default=void 0;var LKe=T8(f8());Xy.on=LKe.default;var kKe=T8(d8());Xy.off=kKe.default;var RKe=T8(OKe());Xy.filter=RKe.default;var jKe=T8(DKe());Xy.listen=jKe.default;var dCr={on:LKe.default,off:kKe.default,filter:RKe.default,listen:jKe.default};Xy.default=dCr});var Zoe=A((M8,zKe)=>{"use strict";var hCr=Ya();M8.__esModule=!0;M8.default=gCr;var mCr=hCr(jh()),I8;function gCr(e){if((!I8&&I8!==0||e)&&mCr.default){var t=document.createElement("div");t.style.position="absolute",t.style.top="-9999px",t.style.width="50px",t.style.height="50px",t.style.overflow="scroll",document.body.appendChild(t),I8=t.offsetWidth-t.clientWidth,document.body.removeChild(t)}return I8}zKe.exports=M8.default});var BO=A((C8,UKe)=>{"use strict";Object.defineProperty(C8,"__esModule",{value:!0});var vCr=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},yCr=Pe(),_Cr=FKe(yCr),bCr=Nq(),xCr=FKe(bCr);function FKe(e){return e&&e.__esModule?e:{default:e}}function wCr(e,t,r,n,o){var i=e[t],a=typeof i=="undefined"?"undefined":vCr(i);return _Cr.default.isValidElement(i)?new Error("Invalid "+n+" `"+o+"` of type ReactElement "+("supplied to `"+r+"`, expected a ReactComponent or a ")+"DOMElement. You can usually obtain a ReactComponent or DOMElement from a ReactElement by attaching a ref to it."):(a!=="object"||typeof i.render!="function")&&i.nodeType!==1?new Error("Invalid "+n+" `"+o+"` of value `"+i+"` "+("supplied to `"+r+"`, expected a ReactComponent or a ")+"DOMElement."):null}C8.default=(0,xCr.default)(wCr);UKe.exports=C8.default});var HKe=A((SCn,GKe)=>{"use strict";var ECr=!1,VKe=function(){};ECr&&(BKe=function(t,r){var n=arguments.length;r=new Array(n>1?n-1:0);for(var o=1;o<n;o++)r[o-1]=arguments[o];var i=0,a="Warning: "+t.replace(/%s/g,function(){return r[i++]});typeof console!="undefined"&&console.error(a);try{throw new Error(a)}catch(u){}},VKe=function(e,t,r){var n=arguments.length;r=new Array(n>2?n-2:0);for(var o=2;o<n;o++)r[o-2]=arguments[o];if(t===void 0)throw new Error("`warning(condition, format, ...args)` requires a warning message argument");e||BKe.apply(null,[t].concat(r))});var BKe;GKe.exports=VKe});var ZKe=A((A8,$Ke)=>{"use strict";Object.defineProperty(A8,"__esModule",{value:!0});A8.default=WKe;var SCr=HKe(),TCr=ICr(SCr);function ICr(e){return e&&e.__esModule?e:{default:e}}var Yoe={};function WKe(e,t){return function(n,o,i,a,u){var d=i||"<<anonymous>>",h=u||o;if(n[o]!=null){var v=i+"."+o;(0,TCr.default)(Yoe[v],"The "+a+" `"+h+"` of "+("`"+d+"` is deprecated. "+t+".")),Yoe[v]=!0}for(var b=arguments.length,x=Array(b>5?b-5:0),M=5;M<b;M++)x[M-5]=arguments[M];return e.apply(void 0,[n,o,i,a,u].concat(x))}}function MCr(){Yoe={}}WKe._resetWarned=MCr;$Ke.exports=A8.default});var Koe=A((O8,YKe)=>{"use strict";O8.__esModule=!0;O8.default=CCr;function CCr(e,t){return e.classList?!!t&&e.classList.contains(t):(" "+(e.className.baseVal||e.className)+" ").indexOf(" "+t+" ")!==-1}YKe.exports=O8.default});var XKe=A((P8,KKe)=>{"use strict";var ACr=Ya();P8.__esModule=!0;P8.default=PCr;var OCr=ACr(Koe());function PCr(e,t){e.classList?e.classList.add(t):(0,OCr.default)(e,t)||(typeof e.className=="string"?e.className=e.className+" "+t:e.setAttribute("class",(e.className&&e.className.baseVal||"")+" "+t))}KKe.exports=P8.default});var eXe=A((TCn,JKe)=>{"use strict";function QKe(e,t){return e.replace(new RegExp("(^|\\s)"+t+"(?:\\s|$)","g"),"$1").replace(/\s+/g," ").replace(/^\s*|\s*$/g,"")}JKe.exports=function(t,r){t.classList?t.classList.remove(r):typeof t.className=="string"?t.className=QKe(t.className,r):t.setAttribute("class",QKe(t.className&&t.className.baseVal||"",r))}});var oXe=A(V_=>{"use strict";var Xoe=Ya();V_.__esModule=!0;V_.default=void 0;var tXe=Xoe(XKe());V_.addClass=tXe.default;var rXe=Xoe(eXe());V_.removeClass=rXe.default;var nXe=Xoe(Koe());V_.hasClass=nXe.default;var NCr={addClass:tXe.default,removeClass:rXe.default,hasClass:nXe.default};V_.default=NCr});var VO=A((N8,iXe)=>{"use strict";N8.__esModule=!0;N8.default=DCr;function DCr(e){return e===e.window?e:e.nodeType===9?e.defaultView||e.parentWindow:!1}iXe.exports=N8.default});var Qoe=A((D8,lXe)=>{"use strict";D8.__esModule=!0;D8.default=zCr;var LCr=VO(),aXe=sXe(LCr),kCr=F_(),RCr=sXe(kCr);function sXe(e){return e&&e.__esModule?e:{default:e}}function jCr(e){return e&&e.tagName.toLowerCase()==="body"}function qCr(e){var t=(0,RCr.default)(e),r=(0,aXe.default)(t),n=r.innerWidth;if(!n){var o=t.documentElement.getBoundingClientRect();n=o.right-Math.abs(o.left)}return t.body.clientWidth<n}function zCr(e){var t=(0,aXe.default)(e);return t||jCr(e)?qCr(e):e.scrollHeight>e.clientHeight}lXe.exports=D8.default});var cXe=A(GO=>{"use strict";GO.__esModule=!0;GO.ariaHidden=Joe;GO.hideSiblings=BCr;GO.showSiblings=VCr;var FCr=["template","script","style"],UCr=function(t){var r=t.nodeType,n=t.tagName;return r===1&&FCr.indexOf(n.toLowerCase())===-1},uXe=function(t,r,n){r=[].concat(r),[].forEach.call(t.children,function(o){r.indexOf(o)===-1&&UCr(o)&&n(o)})};function Joe(e,t){t&&(e?t.setAttribute("aria-hidden","true"):t.removeAttribute("aria-hidden"))}function BCr(e,t){uXe(e,t,function(r){return Joe(!0,r)})}function VCr(e,t){uXe(e,t,function(r){return Joe(!1,r)})}});var hXe=A((k8,dXe)=>{"use strict";k8.__esModule=!0;var GCr=oXe(),pXe=L8(GCr),HCr=s8(),fXe=L8(HCr),WCr=Zoe(),$Cr=L8(WCr),ZCr=Qoe(),YCr=L8(ZCr),eie=cXe();function L8(e){return e&&e.__esModule?e:{default:e}}function KCr(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function XCr(e,t){var r=-1;return e.some(function(n,o){if(t(n,o))return r=o,!0}),r}function QCr(e,t){return XCr(e,function(r){return r.modals.indexOf(t)!==-1})}function JCr(e,t){var r={overflow:"hidden"};e.style={overflow:t.style.overflow,paddingRight:t.style.paddingRight},e.overflowing&&(r.paddingRight=parseInt((0,fXe.default)(t,"paddingRight")||0,10)+(0,$Cr.default)()+"px"),(0,fXe.default)(t,r)}function eAr(e,t){var r=e.style;Object.keys(r).forEach(function(n){return t.style[n]=r[n]})}var tAr=function e(){var t=this,r=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},n=r.hideSiblingNodes,o=n===void 0?!0:n,i=r.handleContainerOverflow,a=i===void 0?!0:i;KCr(this,e),this.add=function(u,d,h){var v=t.modals.indexOf(u),b=t.containers.indexOf(d);if(v!==-1)return v;if(v=t.modals.length,t.modals.push(u),t.hideSiblingNodes&&(0,eie.hideSiblings)(d,u.modalNode),b!==-1)return t.data[b].modals.push(u),v;var x={modals:[u],classes:h?h.split(/\s+/):[],overflowing:(0,YCr.default)(d)};return t.handleContainerOverflow&&JCr(x,d),x.classes.forEach(pXe.default.addClass.bind(null,d)),t.containers.push(d),t.data.push(x),v},this.remove=function(u){var d=t.modals.indexOf(u);if(d!==-1){var h=QCr(t.data,u),v=t.data[h],b=t.containers[h];v.modals.splice(v.modals.indexOf(u),1),t.modals.splice(d,1),v.modals.length===0?(v.classes.forEach(pXe.default.removeClass.bind(null,b)),t.handleContainerOverflow&&eAr(v,b),t.hideSiblingNodes&&(0,eie.showSiblings)(b,u.modalNode),t.containers.splice(h,1),t.data.splice(h,1)):t.hideSiblingNodes&&(0,eie.ariaHidden)(!1,v.modals[v.modals.length-1].modalNode)}},this.isTopModal=function(u){return!!t.modals.length&&t.modals[t.modals.length-1]===u},this.hideSiblingNodes=o,this.handleContainerOverflow=a,this.modals=[],this.containers=[],this.data=[]};k8.default=tAr;dXe.exports=k8.default});var HO=A((R8,mXe)=>{"use strict";R8.__esModule=!0;R8.default=iAr;var rAr=va(),nAr=oAr(rAr);function oAr(e){return e&&e.__esModule?e:{default:e}}function iAr(e,t){return e=typeof e=="function"?e():e,nAr.default.findDOMNode(e)||t}mXe.exports=R8.default});var wXe=A((j8,xXe)=>{"use strict";j8.__esModule=!0;var aAr=xt(),tie=PS(aAr),sAr=BO(),lAr=PS(sAr),uAr=Pe(),gXe=PS(uAr),cAr=va(),vXe=PS(cAr),pAr=HO(),yXe=PS(pAr),fAr=B_(),_Xe=PS(fAr);function PS(e){return e&&e.__esModule?e:{default:e}}function dAr(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function bXe(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t&&(typeof t=="object"||typeof t=="function")?t:e}function hAr(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var rie=function(e){hAr(t,e);function t(){var r,n,o;dAr(this,t);for(var i=arguments.length,a=Array(i),u=0;u<i;u++)a[u]=arguments[u];return o=(r=(n=bXe(this,e.call.apply(e,[this].concat(a))),n),n._mountOverlayTarget=function(){n._overlayTarget||(n._overlayTarget=document.createElement("div"),n._portalContainerNode=(0,yXe.default)(n.props.container,(0,_Xe.default)(n).body),n._portalContainerNode.appendChild(n._overlayTarget))},n._unmountOverlayTarget=function(){n._overlayTarget&&(n._portalContainerNode.removeChild(n._overlayTarget),n._overlayTarget=null),n._portalContainerNode=null},n._renderOverlay=function(){var d=n.props.children?gXe.default.Children.only(n.props.children):null;if(d!==null){n._mountOverlayTarget();var h=!n._overlayInstance;n._overlayInstance=vXe.default.unstable_renderSubtreeIntoContainer(n,d,n._overlayTarget,function(){h&&n.props.onRendered&&n.props.onRendered()})}else n._unrenderOverlay(),n._unmountOverlayTarget()},n._unrenderOverlay=function(){n._overlayTarget&&(vXe.default.unmountComponentAtNode(n._overlayTarget),n._overlayInstance=null)},n.getMountNode=function(){return n._overlayTarget},r),bXe(n,o)}return t.prototype.componentDidMount=function(){this._isMounted=!0,this._renderOverlay()},t.prototype.componentDidUpdate=function(){this._renderOverlay()},t.prototype.UNSAFE_componentWillReceiveProps=function(n){this._overlayTarget&&n.container!==this.props.container&&(this._portalContainerNode.removeChild(this._overlayTarget),this._portalContainerNode=(0,yXe.default)(n.container,(0,_Xe.default)(this).body),this._portalContainerNode.appendChild(this._overlayTarget))},t.prototype.componentWillUnmount=function(){this._isMounted=!1,this._unrenderOverlay(),this._unmountOverlayTarget()},t.prototype.render=function(){return null},t}(gXe.default.Component);rie.displayName="Portal";rie.propTypes={container:tie.default.oneOfType([lAr.default,tie.default.func]),onRendered:tie.default.func};j8.default=rie;xXe.exports=j8.default});var aie=A((q8,SXe)=>{"use strict";q8.__esModule=!0;var mAr=jh(),gAr=Qy(mAr),vAr=xt(),nie=Qy(vAr),yAr=BO(),_Ar=Qy(yAr),bAr=Pe(),xAr=Qy(bAr),wAr=va(),oie=Qy(wAr),EAr=HO(),SAr=Qy(EAr),TAr=B_(),IAr=Qy(TAr),MAr=wXe(),CAr=Qy(MAr);function Qy(e){return e&&e.__esModule?e:{default:e}}function AAr(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function EXe(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t&&(typeof t=="object"||typeof t=="function")?t:e}function OAr(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var iie=function(e){OAr(t,e);function t(){var r,n,o;AAr(this,t);for(var i=arguments.length,a=Array(i),u=0;u<i;u++)a[u]=arguments[u];return o=(r=(n=EXe(this,e.call.apply(e,[this].concat(a))),n),n.getMountNode=function(){return n._portalContainerNode},r),EXe(n,o)}return t.prototype.UNSAFE_componentWillMount=function(){if(gAr.default){var n=this.props.container;typeof n=="function"&&(n=n()),!(n&&!oie.default.findDOMNode(n))&&this.setContainer(n)}},t.prototype.componentDidMount=function(){this._portalContainerNode?this.props.onRendered&&this.props.onRendered():(this.setContainer(this.props.container),this.forceUpdate(this.props.onRendered))},t.prototype.UNSAFE_componentWillReceiveProps=function(n){n.container!==this.props.container&&this.setContainer(n.container)},t.prototype.componentWillUnmount=function(){this._portalContainerNode=null},t.prototype.setContainer=function(n){this._portalContainerNode=(0,SAr.default)(n,(0,IAr.default)(this).body)},t.prototype.render=function(){return this.props.children&&this._portalContainerNode?oie.default.createPortal(this.props.children,this._portalContainerNode):null},t}(xAr.default.Component);iie.displayName="Portal";iie.propTypes={container:nie.default.oneOfType([_Ar.default,nie.default.func]),onRendered:nie.default.func};q8.default=oie.default.createPortal?iie:CAr.default;SXe.exports=q8.default});var CXe=A((z8,MXe)=>{"use strict";z8.__esModule=!0;var PAr=xt(),NAr=TXe(PAr),DAr=Pe(),LAr=TXe(DAr);function TXe(e){return e&&e.__esModule?e:{default:e}}function kAr(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function RAr(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t&&(typeof t=="object"||typeof t=="function")?t:e}function jAr(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var qAr={children:NAr.default.node},IXe=function(e){jAr(t,e);function t(){return kAr(this,t),RAr(this,e.apply(this,arguments))}return t.prototype.render=function(){return this.props.children},t}(LAr.default.Component);IXe.propTypes=qAr;z8.default=IXe;MXe.exports=z8.default});var OXe=A((F8,AXe)=>{"use strict";F8.__esModule=!0;F8.default=zAr;function zAr(e){var t=!document.addEventListener,r=void 0;return t?(document.attachEvent("onfocusin",e),r=function(){return document.detachEvent("onfocusin",e)}):(document.addEventListener("focus",e,!0),r=function(){return document.removeEventListener("focus",e,!0)}),{remove:r}}AXe.exports=F8.default});var FXe=A((B8,zXe)=>{"use strict";B8.__esModule=!0;var LXe=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},FAr=QYe(),sie=Dl(FAr),UAr=RO(),kXe=Dl(UAr),BAr=jh(),VAr=Dl(BAr),GAr=xt(),Gi=Dl(GAr),HAr=BO(),WAr=Dl(HAr),$Ar=ZKe(),ZAr=Dl($Ar),YAr=Uu(),PXe=Dl(YAr),RXe=Pe(),Jy=Dl(RXe),KAr=va(),XAr=Dl(KAr),QAr=j_(),JAr=Dl(QAr),eOr=hXe(),jXe=Dl(eOr),tOr=aie(),qXe=Dl(tOr),rOr=CXe(),nOr=Dl(rOr),oOr=Loe(),NXe=Dl(oOr),iOr=OXe(),aOr=Dl(iOr),sOr=HO(),lOr=Dl(sOr),uOr=B_(),lie=Dl(uOr);function Dl(e){return e&&e.__esModule?e:{default:e}}function cOr(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function DXe(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t&&(typeof t=="object"||typeof t=="function")?t:e}function pOr(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var fOr=new jXe.default,U8=function(e){pOr(t,e);function t(){var r,n,o;cOr(this,t);for(var i=arguments.length,a=Array(i),u=0;u<i;u++)a[u]=arguments[u];return o=(r=(n=DXe(this,e.call.apply(e,[this].concat(a))),n),dOr.call(n),r),DXe(n,o)}return t.prototype.omitProps=function(n,o){var i=Object.keys(n),a={};return i.map(function(u){Object.prototype.hasOwnProperty.call(o,u)||(a[u]=n[u])}),a},t.prototype.render=function(){var n=this.props,o=n.show,i=n.container,a=n.children,u=n.transition,d=n.backdrop,h=n.className,v=n.style,b=n.onExit,x=n.onExiting,M=n.onEnter,O=n.onEntering,D=n.onEntered,k=Jy.default.Children.only(a),R=this.omitProps(this.props,t.propTypes),q=o||u&&!this.state.exited;if(!q)return null;var B=k.props,G=B.role,re=B.tabIndex;return(G===void 0||re===void 0)&&(k=(0,RXe.cloneElement)(k,{role:G===void 0?"document":G,tabIndex:re==null?"-1":re})),u&&(k=Jy.default.createElement(u,{appear:!0,unmountOnExit:!0,in:o,onExit:b,onExiting:x,onExited:this.handleHidden,onEnter:M,onEntering:O,onEntered:D},k)),Jy.default.createElement(qXe.default,{ref:this.setMountNode,container:i,onRendered:this.onPortalRendered},Jy.default.createElement("div",LXe({ref:this.setModalNodeRef,role:G||"dialog"},R,{style:v,className:h}),d&&this.renderBackdrop(),Jy.default.createElement(nOr.default,{ref:this.setDialogRef},k)))},t.prototype.UNSAFE_componentWillReceiveProps=function(n){n.show?this.setState({exited:!1}):n.transition||this.setState({exited:!0})},t.prototype.UNSAFE_componentWillUpdate=function(n){!this.props.show&&n.show&&this.checkForFocus()},t.prototype.componentDidMount=function(){this._isMounted=!0,this.props.show&&this.onShow()},t.prototype.componentDidUpdate=function(n){var o=this.props.transition;n.show&&!this.props.show&&!o?this.onHide():!n.show&&this.props.show&&this.onShow()},t.prototype.componentWillUnmount=function(){var n=this.props,o=n.show,i=n.transition;this._isMounted=!1,(o||i&&!this.state.exited)&&this.onHide()},t.prototype.autoFocus=function(){if(this.props.autoFocus){var n=this.getDialogElement(),o=(0,sie.default)((0,lie.default)(this));n&&!(0,kXe.default)(n,o)&&(this.lastFocus=o,n.hasAttribute("tabIndex")||((0,JAr.default)(!1,"The modal content node does not accept focus. For the benefit of assistive technologies, the tabIndex of the node is being set to \"-1\"."),n.setAttribute("tabIndex",-1)),n.focus())}},t.prototype.restoreLastFocus=function(){this.lastFocus&&this.lastFocus.focus&&(this.lastFocus.focus(),this.lastFocus=null)},t.prototype.getDialogElement=function(){return XAr.default.findDOMNode(this.dialog)},t.prototype.isTopModal=function(){return this.props.manager.isTopModal(this)},t}(Jy.default.Component);U8.propTypes=LXe({},qXe.default.propTypes,{show:Gi.default.bool,container:Gi.default.oneOfType([WAr.default,Gi.default.func]),onShow:Gi.default.func,onHide:Gi.default.func,backdrop:Gi.default.oneOfType([Gi.default.bool,Gi.default.oneOf(["static"])]),renderBackdrop:Gi.default.func,onEscapeKeyDown:Gi.default.func,onEscapeKeyUp:(0,ZAr.default)(Gi.default.func,"Please use onEscapeKeyDown instead for consistency"),onBackdropClick:Gi.default.func,backdropStyle:Gi.default.object,backdropClassName:Gi.default.string,containerClassName:Gi.default.string,keyboard:Gi.default.bool,transition:PXe.default,backdropTransition:PXe.default,autoFocus:Gi.default.bool,enforceFocus:Gi.default.bool,restoreFocus:Gi.default.bool,onEnter:Gi.default.func,onEntering:Gi.default.func,onEntered:Gi.default.func,onExit:Gi.default.func,onExiting:Gi.default.func,onExited:Gi.default.func,manager:Gi.default.object.isRequired});U8.defaultProps={show:!1,backdrop:!0,keyboard:!0,autoFocus:!0,enforceFocus:!0,restoreFocus:!0,onHide:function(){},manager:fOr,renderBackdrop:function(t){return Jy.default.createElement("div",t)}};var dOr=function(){var t=this;this.state={exited:!this.props.show},this.renderBackdrop=function(){var r=t.props,n=r.backdropStyle,o=r.backdropClassName,i=r.renderBackdrop,a=r.backdropTransition,u=function(v){return t.backdrop=v},d=i({ref:u,style:n,className:o,onClick:t.handleBackdropClick});return a&&(d=Jy.default.createElement(a,{appear:!0,in:t.props.show},d)),d},this.onPortalRendered=function(){t.autoFocus(),t.props.onShow&&t.props.onShow()},this.onShow=function(){var r=(0,lie.default)(t),n=(0,lOr.default)(t.props.container,r.body);t.props.manager.add(t,n,t.props.containerClassName),t._onDocumentKeydownListener=(0,NXe.default)(r,"keydown",t.handleDocumentKeyDown),t._onDocumentKeyupListener=(0,NXe.default)(r,"keyup",t.handleDocumentKeyUp),t._onFocusinListener=(0,aOr.default)(t.enforceFocus)},this.onHide=function(){t.props.manager.remove(t),t._onDocumentKeydownListener.remove(),t._onDocumentKeyupListener.remove(),t._onFocusinListener.remove(),t.props.restoreFocus&&t.restoreLastFocus()},this.setMountNode=function(r){t.mountNode=r&&r.getMountNode()},this.setModalNodeRef=function(r){t.modalNode=r},this.setDialogRef=function(r){t.dialog=r},this.handleHidden=function(){if(t.setState({exited:!0}),t.onHide(),t.props.onExited){var r;(r=t.props).onExited.apply(r,arguments)}},this.handleBackdropClick=function(r){r.target===r.currentTarget&&(t.props.onBackdropClick&&t.props.onBackdropClick(r),t.props.backdrop===!0&&t.props.onHide())},this.handleDocumentKeyDown=function(r){t.props.keyboard&&r.keyCode===27&&t.isTopModal()&&(t.props.onEscapeKeyDown&&t.props.onEscapeKeyDown(r),t.props.onHide())},this.handleDocumentKeyUp=function(r){t.props.keyboard&&r.keyCode===27&&t.isTopModal()&&t.props.onEscapeKeyUp&&t.props.onEscapeKeyUp(r)},this.checkForFocus=function(){VAr.default&&(t.lastFocus=(0,sie.default)())},this.enforceFocus=function(){if(!(!t.props.enforceFocus||!t._isMounted||!t.isTopModal())){var r=t.getDialogElement(),n=(0,sie.default)((0,lie.default)(t));r&&!(0,kXe.default)(r,n)&&r.focus()}}};U8.Manager=jXe.default;B8.default=U8;zXe.exports=B8.default});var xie=A((Z8,sQe)=>{"use strict";var bie=Ya();Z8.__esModule=!0;Z8.default=jOr;var LOr=bie(RO()),kOr=bie(VO()),ROr=bie(F_());function jOr(e){var t=(0,ROr.default)(e),r=(0,kOr.default)(t),n=t&&t.documentElement,o={top:0,left:0,height:0,width:0};if(t)return(0,LOr.default)(n,e)&&(e.getBoundingClientRect!==void 0&&(o=e.getBoundingClientRect()),o={top:o.top+(r.pageYOffset||n.scrollTop)-(n.clientTop||0),left:o.left+(r.pageXOffset||n.scrollLeft)-(n.clientLeft||0),width:(o.width==null?e.offsetWidth:o.width)||0,height:(o.height==null?e.offsetHeight:o.height)||0}),o}sQe.exports=Z8.default});var lQe=A((DAn,Eg)=>{function wie(){return Eg.exports=wie=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},Eg.exports.__esModule=!0,Eg.exports.default=Eg.exports,wie.apply(null,arguments)}Eg.exports=wie,Eg.exports.__esModule=!0,Eg.exports.default=Eg.exports});var pQe=A((Y8,cQe)=>{"use strict";var uQe=Ya();Y8.__esModule=!0;Y8.default=UOr;var qOr=uQe(F_()),zOr=uQe(s8());function FOr(e){return e.nodeName&&e.nodeName.toLowerCase()}function UOr(e){for(var t=(0,qOr.default)(e),r=e&&e.offsetParent;r&&FOr(e)!=="html"&&(0,zOr.default)(r,"position")==="static";)r=r.offsetParent;return r||t.documentElement}cQe.exports=Y8.default});var Eie=A((K8,fQe)=>{"use strict";var BOr=Ya();K8.__esModule=!0;K8.default=GOr;var VOr=BOr(VO());function GOr(e,t){var r=(0,VOr.default)(e);if(t===void 0)return r?"pageYOffset"in r?r.pageYOffset:r.document.documentElement.scrollTop:e.scrollTop;r?r.scrollTo("pageXOffset"in r?r.pageXOffset:r.document.documentElement.scrollLeft,t):e.scrollTop=t}fQe.exports=K8.default});var hQe=A((X8,dQe)=>{"use strict";var HOr=Ya();X8.__esModule=!0;X8.default=$Or;var WOr=HOr(VO());function $Or(e,t){var r=(0,WOr.default)(e);if(t===void 0)return r?"pageXOffset"in r?r.pageXOffset:r.document.documentElement.scrollLeft:e.scrollLeft;r?r.scrollTo(t,"pageYOffset"in r?r.pageYOffset:r.document.documentElement.scrollTop):e.scrollLeft=t}dQe.exports=X8.default});var vQe=A((Q8,gQe)=>{"use strict";var kS=Ya();Q8.__esModule=!0;Q8.default=JOr;var ZOr=kS(lQe()),mQe=kS(xie()),YOr=kS(pQe()),KOr=kS(Eie()),XOr=kS(hQe()),JO=kS(s8());function QOr(e){return e.nodeName&&e.nodeName.toLowerCase()}function JOr(e,t){var r={top:0,left:0},n;return(0,JO.default)(e,"position")==="fixed"?n=e.getBoundingClientRect():(t=t||(0,YOr.default)(e),n=(0,mQe.default)(e),QOr(t)!=="html"&&(r=(0,mQe.default)(t)),r.top+=parseInt((0,JO.default)(t,"borderTopWidth"),10)-(0,KOr.default)(t)||0,r.left+=parseInt((0,JO.default)(t,"borderLeftWidth"),10)-(0,XOr.default)(t)||0),(0,ZOr.default)({},n,{top:n.top-r.top-(parseInt((0,JO.default)(e,"marginTop"),10)||0),left:n.left-r.left-(parseInt((0,JO.default)(e,"marginLeft"),10)||0)})}gQe.exports=Q8.default});var bQe=A((ez,_Qe)=>{"use strict";ez.__esModule=!0;ez.default=l4r;var e4r=xie(),Tie=J8(e4r),t4r=vQe(),r4r=J8(t4r),n4r=Eie(),Sie=J8(n4r),o4r=B_(),i4r=J8(o4r);function J8(e){return e&&e.__esModule?e:{default:e}}function yQe(e){var t=void 0,r=void 0,n=void 0;if(e.tagName==="BODY")t=window.innerWidth,r=window.innerHeight,n=(0,Sie.default)((0,i4r.default)(e).documentElement)||(0,Sie.default)(e);else{var o=(0,Tie.default)(e);t=o.width,r=o.height,n=(0,Sie.default)(e)}return{width:t,height:r,scroll:n}}function a4r(e,t,r,n){var o=yQe(r),i=o.scroll,a=o.height,u=e-n-i,d=e+n-i+t;return u<0?-u:d>a?a-d:0}function s4r(e,t,r,n){var o=yQe(r),i=o.width,a=e-n,u=e+n+t;return a<0?-a:u>i?i-u:0}function l4r(e,t,r,n,o){var i=n.tagName==="BODY"?(0,Tie.default)(r):(0,r4r.default)(r,n),a=(0,Tie.default)(t),u=a.height,d=a.width,h=void 0,v=void 0,b=void 0,x=void 0;if(e==="left"||e==="right"){v=i.top+(i.height-u)/2,e==="left"?h=i.left-d:h=i.left+i.width;var M=a4r(v,u,n,o);v+=M,x=50*(1-2*M/u)+"%",b=void 0}else if(e==="top"||e==="bottom"){h=i.left+(i.width-d)/2,e==="top"?v=i.top-u:v=i.top+i.height;var O=s4r(h,d,n,o);h+=O,b=50*(1-2*O/d)+"%",x=void 0}else throw new Error("calcOverlayPosition(): No such placement of \""+e+"\" found.");return{positionLeft:h,positionTop:v,arrowOffsetLeft:b,arrowOffsetTop:x}}_Qe.exports=ez.default});var CQe=A((rz,MQe)=>{"use strict";rz.__esModule=!0;var xQe=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},u4r=ko(),c4r=t0(u4r),p4r=xt(),G_=t0(p4r),f4r=BO(),wQe=t0(f4r),IQe=Pe(),EQe=t0(IQe),d4r=va(),SQe=t0(d4r),h4r=bQe(),m4r=t0(h4r),g4r=HO(),v4r=t0(g4r),y4r=B_(),_4r=t0(y4r);function t0(e){return e&&e.__esModule?e:{default:e}}function TQe(e,t){var r={};for(var n in e)t.indexOf(n)>=0||Object.prototype.hasOwnProperty.call(e,n)&&(r[n]=e[n]);return r}function b4r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function x4r(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t&&(typeof t=="object"||typeof t=="function")?t:e}function w4r(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var tz=function(e){w4r(t,e);function t(r,n){b4r(this,t);var o=x4r(this,e.call(this,r,n));return o.getTarget=function(){var i=o.props.target,a=typeof i=="function"?i():i;return a&&SQe.default.findDOMNode(a)||null},o.maybeUpdatePosition=function(i){var a=o.getTarget();!o.props.shouldUpdatePosition&&a===o._lastTarget&&!i||o.updatePosition(a)},o.state={positionLeft:0,positionTop:0,arrowOffsetLeft:null,arrowOffsetTop:null},o._needsFlush=!1,o._lastTarget=null,o}return t.prototype.componentDidMount=function(){this.updatePosition(this.getTarget())},t.prototype.UNSAFE_componentWillReceiveProps=function(){this._needsFlush=!0},t.prototype.componentDidUpdate=function(n){this._needsFlush&&(this._needsFlush=!1,this.maybeUpdatePosition(this.props.placement!==n.placement))},t.prototype.render=function(){var n=this.props,o=n.children,i=n.className,a=TQe(n,["children","className"]),u=this.state,d=u.positionLeft,h=u.positionTop,v=TQe(u,["positionLeft","positionTop"]);delete a.target,delete a.container,delete a.containerPadding,delete a.shouldUpdatePosition;var b=EQe.default.Children.only(o);return(0,IQe.cloneElement)(b,xQe({},a,v,{positionLeft:d,positionTop:h,className:(0,c4r.default)(i,b.props.className),style:xQe({},b.props.style,{left:d,top:h})}))},t.prototype.updatePosition=function(n){if(this._lastTarget=n,!n){this.setState({positionLeft:0,positionTop:0,arrowOffsetLeft:null,arrowOffsetTop:null});return}var o=SQe.default.findDOMNode(this),i=(0,v4r.default)(this.props.container,(0,_4r.default)(this).body);this.setState((0,m4r.default)(this.props.placement,o,n,i,this.props.containerPadding))},t}(EQe.default.Component);tz.propTypes={target:G_.default.oneOfType([wQe.default,G_.default.func]),container:G_.default.oneOfType([wQe.default,G_.default.func]),containerPadding:G_.default.number,placement:G_.default.oneOf(["top","right","bottom","left"]),shouldUpdatePosition:G_.default.bool};tz.displayName="Position";tz.defaultProps={containerPadding:0,placement:"right",shouldUpdatePosition:!1};rz.default=tz;MQe.exports=rz.default});var LQe=A((nz,DQe)=>{"use strict";nz.__esModule=!0;var E4r=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},S4r=xt(),Sg=RS(S4r),T4r=Uu(),I4r=RS(T4r),M4r=Pe(),e4=RS(M4r),C4r=aie(),AQe=RS(C4r),A4r=CQe(),OQe=RS(A4r),O4r=mKe(),PQe=RS(O4r);function RS(e){return e&&e.__esModule?e:{default:e}}function P4r(e,t){var r={};for(var n in e)t.indexOf(n)>=0||Object.prototype.hasOwnProperty.call(e,n)&&(r[n]=e[n]);return r}function N4r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function D4r(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t&&(typeof t=="object"||typeof t=="function")?t:e}function L4r(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var NQe=function(e){L4r(t,e);function t(r,n){N4r(this,t);var o=D4r(this,e.call(this,r,n));return o.handleHidden=function(){if(o.setState({exited:!0}),o.props.onExited){var i;(i=o.props).onExited.apply(i,arguments)}},o.state={exited:!r.show},o.onHiddenListener=o.handleHidden.bind(o),o}return t.prototype.UNSAFE_componentWillReceiveProps=function(n){n.show?this.setState({exited:!1}):n.transition||this.setState({exited:!0})},t.prototype.render=function(){var n=this.props,o=n.container,i=n.containerPadding,a=n.target,u=n.placement,d=n.shouldUpdatePosition,h=n.rootClose,v=n.children,b=n.transition,x=P4r(n,["container","containerPadding","target","placement","shouldUpdatePosition","rootClose","children","transition"]),M=x.show||b&&!this.state.exited;if(!M)return null;var O=v;if(O=e4.default.createElement(OQe.default,{container:o,containerPadding:i,target:a,placement:u,shouldUpdatePosition:d},O),b){var D=x.onExit,k=x.onExiting,R=x.onEnter,q=x.onEntering,B=x.onEntered;O=e4.default.createElement(b,{in:x.show,appear:!0,onExit:D,onExiting:k,onExited:this.onHiddenListener,onEnter:R,onEntering:q,onEntered:B},O)}return h&&(O=e4.default.createElement(PQe.default,{onRootClose:x.onHide,event:x.rootCloseEvent},O)),e4.default.createElement(AQe.default,{container:o},O)},t}(e4.default.Component);NQe.propTypes=E4r({},AQe.default.propTypes,OQe.default.propTypes,{show:Sg.default.bool,rootClose:Sg.default.bool,rootCloseEvent:PQe.default.propTypes.event,onHide:function(t){var r=Sg.default.func;t.rootClose&&(r=r.isRequired);for(var n=arguments.length,o=Array(n>1?n-1:0),i=1;i<n;i++)o[i-1]=arguments[i];return r.apply(void 0,[t].concat(o))},transition:I4r.default,onEnter:Sg.default.func,onEntering:Sg.default.func,onEntered:Sg.default.func,onExit:Sg.default.func,onExiting:Sg.default.func,onExited:Sg.default.func});nz.default=NQe;DQe.exports=nz.default});var ret=A((zPn,Pg)=>{function nae(e,t){return Pg.exports=nae=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(r,n){return r.__proto__=n,r},Pg.exports.__esModule=!0,Pg.exports.default=Pg.exports,nae(e,t)}Pg.exports=nae,Pg.exports.__esModule=!0,Pg.exports.default=Pg.exports});var oae=A((FPn,w4)=>{var ONr=ret();function PNr(e,t){e.prototype=Object.create(t.prototype),e.prototype.constructor=e,ONr(e,t)}w4.exports=PNr,w4.exports.__esModule=!0,w4.exports.default=w4.exports});var aae=A(iae=>{"use strict";Object.defineProperty(iae,"__esModule",{value:!0});function NNr(e){if(e.sheet)return e.sheet;for(var t=0;t<document.styleSheets.length;t++)if(document.styleSheets[t].ownerNode===e)return document.styleSheets[t]}function DNr(e){var t=document.createElement("style");return t.setAttribute("data-emotion",e.key),e.nonce!==void 0&&t.setAttribute("nonce",e.nonce),t.appendChild(document.createTextNode("")),t}var LNr=function(){function e(r){this.isSpeedy=r.speedy===void 0?!0:r.speedy,this.tags=[],this.ctr=0,this.nonce=r.nonce,this.key=r.key,this.container=r.container,this.before=null}var t=e.prototype;return t.insert=function(n){if(this.ctr%(this.isSpeedy?65e3:1)===0){var o=DNr(this),i;this.tags.length===0?i=this.before:i=this.tags[this.tags.length-1].nextSibling,this.container.insertBefore(o,i),this.tags.push(o)}var a=this.tags[this.tags.length-1];if(this.isSpeedy){var u=NNr(a);try{var d=n.charCodeAt(1)===105&&n.charCodeAt(0)===64;u.insertRule(n,d?0:u.cssRules.length)}catch(h){}}else a.appendChild(document.createTextNode(n));this.ctr++},t.flush=function(){this.tags.forEach(function(n){return n.parentNode.removeChild(n)}),this.tags=[],this.ctr=0},e}();iae.StyleSheet=LNr});var net=A(sae=>{"use strict";Object.defineProperty(sae,"__esModule",{value:!0});function kNr(e){function t(nt,ct,_t,We,De){for(var Qe=0,Ge=0,st=0,pt=0,Rt,St,Ot=0,sr=0,Ft,Jt=Ft=Rt=0,dr=0,Er=0,Cr=0,Tr=0,qr=_t.length,Ce=qr-1,Ze,et="",qt="",Bt="",jt="",$t;dr<qr;){if(St=_t.charCodeAt(dr),dr===Ce&&Ge+pt+st+Qe!==0&&(Ge!==0&&(St=Ge===47?10:47),pt=st=Qe=0,qr++,Ce++),Ge+pt+st+Qe===0){if(dr===Ce&&(0<Er&&(et=et.replace(x,"")),0<et.trim().length)){switch(St){case 32:case 9:case 59:case 13:case 10:break;default:et+=_t.charAt(dr)}St=59}switch(St){case 123:for(et=et.trim(),Rt=et.charCodeAt(0),Ft=1,Tr=++dr;dr<qr;){switch(St=_t.charCodeAt(dr)){case 123:Ft++;break;case 125:Ft--;break;case 47:switch(St=_t.charCodeAt(dr+1)){case 42:case 47:e:{for(Jt=dr+1;Jt<Ce;++Jt)switch(_t.charCodeAt(Jt)){case 47:if(St===42&&_t.charCodeAt(Jt-1)===42&&dr+2!==Jt){dr=Jt+1;break e}break;case 10:if(St===47){dr=Jt+1;break e}}dr=Jt}}break;case 91:St++;case 40:St++;case 34:case 39:for(;dr++<Ce&&_t.charCodeAt(dr)!==St;);}if(Ft===0)break;dr++}switch(Ft=_t.substring(Tr,dr),Rt===0&&(Rt=(et=et.replace(b,"").trim()).charCodeAt(0)),Rt){case 64:switch(0<Er&&(et=et.replace(x,"")),St=et.charCodeAt(1),St){case 100:case 109:case 115:case 45:Er=ct;break;default:Er=tt}if(Ft=t(ct,Er,Ft,St,De+1),Tr=Ft.length,0<Xe&&(Er=r(tt,et,Cr),$t=u(3,Ft,Er,ct,ge,Se,Tr,St,De,We),et=Er.join(""),$t!==void 0&&(Tr=(Ft=$t.trim()).length)===0&&(St=0,Ft="")),0<Tr)switch(St){case 115:et=et.replace(Q,a);case 100:case 109:case 45:Ft=et+"{"+Ft+"}";break;case 107:et=et.replace(q,"$1 $2"),Ft=et+"{"+Ft+"}",Ft=Je===1||Je===2&&i("@"+Ft,3)?"@-webkit-"+Ft+"@"+Ft:"@"+Ft;break;default:Ft=et+Ft,We===112&&(Ft=(qt+=Ft,""))}else Ft="";break;default:Ft=t(ct,r(ct,et,Cr),Ft,We,De+1)}Bt+=Ft,Ft=Cr=Er=Jt=Rt=0,et="",St=_t.charCodeAt(++dr);break;case 125:case 59:if(et=(0<Er?et.replace(x,""):et).trim(),1<(Tr=et.length))switch(Jt===0&&(Rt=et.charCodeAt(0),Rt===45||96<Rt&&123>Rt)&&(Tr=(et=et.replace(" ",":")).length),0<Xe&&($t=u(1,et,ct,nt,ge,Se,qt.length,We,De,We))!==void 0&&(Tr=(et=$t.trim()).length)===0&&(et="\0\0"),Rt=et.charCodeAt(0),St=et.charCodeAt(1),Rt){case 0:break;case 64:if(St===105||St===99){jt+=et+_t.charAt(dr);break}default:et.charCodeAt(Tr-1)!==58&&(qt+=o(et,Rt,St,et.charCodeAt(2)))}Cr=Er=Jt=Rt=0,et="",St=_t.charCodeAt(++dr)}}switch(St){case 13:case 10:Ge===47?Ge=0:1+Rt===0&&We!==107&&0<et.length&&(Er=1,et+="\0"),0<Xe*Lt&&u(0,et,ct,nt,ge,Se,qt.length,We,De,We),Se=1,ge++;break;case 59:case 125:if(Ge+pt+st+Qe===0){Se++;break}default:switch(Se++,Ze=_t.charAt(dr),St){case 9:case 32:if(pt+Qe+Ge===0)switch(Ot){case 44:case 58:case 9:case 32:Ze="";break;default:St!==32&&(Ze=" ")}break;case 0:Ze="\\0";break;case 12:Ze="\\f";break;case 11:Ze="\\v";break;case 38:pt+Ge+Qe===0&&(Er=Cr=1,Ze="\f"+Ze);break;case 108:if(pt+Ge+Qe+Re===0&&0<Jt)switch(dr-Jt){case 2:Ot===112&&_t.charCodeAt(dr-3)===58&&(Re=Ot);case 8:sr===111&&(Re=sr)}break;case 58:pt+Ge+Qe===0&&(Jt=dr);break;case 44:Ge+st+pt+Qe===0&&(Er=1,Ze+="\r");break;case 34:case 39:Ge===0&&(pt=pt===St?0:pt===0?St:pt);break;case 91:pt+Ge+st===0&&Qe++;break;case 93:pt+Ge+st===0&&Qe--;break;case 41:pt+Ge+Qe===0&&st--;break;case 40:if(pt+Ge+Qe===0){if(Rt===0)switch(2*Ot+3*sr){case 533:break;default:Rt=1}st++}break;case 64:Ge+st+pt+Qe+Jt+Ft===0&&(Ft=1);break;case 42:case 47:if(!(0<pt+Qe+st))switch(Ge){case 0:switch(2*St+3*_t.charCodeAt(dr+1)){case 235:Ge=47;break;case 220:Tr=dr,Ge=42}break;case 42:St===47&&Ot===42&&Tr+2!==dr&&(_t.charCodeAt(Tr+2)===33&&(qt+=_t.substring(Tr,dr+1)),Ze="",Ge=0)}}Ge===0&&(et+=Ze)}sr=Ot,Ot=St,dr++}if(Tr=qt.length,0<Tr){if(Er=ct,0<Xe&&($t=u(2,qt,Er,nt,ge,Se,Tr,We,De,We),$t!==void 0&&(qt=$t).length===0))return jt+qt+Bt;if(qt=Er.join(",")+"{"+qt+"}",Je*Re!==0){switch(Je!==2||i(qt,2)||(Re=0),Re){case 111:qt=qt.replace(G,":-moz-$1")+qt;break;case 112:qt=qt.replace(B,"::-webkit-input-$1")+qt.replace(B,"::-moz-$1")+qt.replace(B,":-ms-input-$1")+qt}Re=0}}return jt+qt+Bt}function r(nt,ct,_t){var We=ct.trim().split(k);ct=We;var De=We.length,Qe=nt.length;switch(Qe){case 0:case 1:var Ge=0;for(nt=Qe===0?"":nt[0]+" ";Ge<De;++Ge)ct[Ge]=n(nt,ct[Ge],_t).trim();break;default:var st=Ge=0;for(ct=[];Ge<De;++Ge)for(var pt=0;pt<Qe;++pt)ct[st++]=n(nt[pt]+" ",We[Ge],_t).trim()}return ct}function n(nt,ct,_t){var We=ct.charCodeAt(0);switch(33>We&&(We=(ct=ct.trim()).charCodeAt(0)),We){case 38:return ct.replace(R,"$1"+nt.trim());case 58:return nt.trim()+ct.replace(R,"$1"+nt.trim());default:if(0<1*_t&&0<ct.indexOf("\f"))return ct.replace(R,(nt.charCodeAt(0)===58?"":"$1")+nt.trim())}return nt+ct}function o(nt,ct,_t,We){var De=nt+";",Qe=2*ct+3*_t+4*We;if(Qe===944){nt=De.indexOf(":",9)+1;var Ge=De.substring(nt,De.length-1).trim();return Ge=De.substring(0,nt).trim()+Ge+";",Je===1||Je===2&&i(Ge,1)?"-webkit-"+Ge+Ge:Ge}if(Je===0||Je===2&&!i(De,1))return De;switch(Qe){case 1015:return De.charCodeAt(10)===97?"-webkit-"+De+De:De;case 951:return De.charCodeAt(3)===116?"-webkit-"+De+De:De;case 963:return De.charCodeAt(5)===110?"-webkit-"+De+De:De;case 1009:if(De.charCodeAt(4)!==100)break;case 969:case 942:return"-webkit-"+De+De;case 978:return"-webkit-"+De+"-moz-"+De+De;case 1019:case 983:return"-webkit-"+De+"-moz-"+De+"-ms-"+De+De;case 883:if(De.charCodeAt(8)===45)return"-webkit-"+De+De;if(0<De.indexOf("image-set(",11))return De.replace(we,"$1-webkit-$2")+De;break;case 932:if(De.charCodeAt(4)===45)switch(De.charCodeAt(5)){case 103:return"-webkit-box-"+De.replace("-grow","")+"-webkit-"+De+"-ms-"+De.replace("grow","positive")+De;case 115:return"-webkit-"+De+"-ms-"+De.replace("shrink","negative")+De;case 98:return"-webkit-"+De+"-ms-"+De.replace("basis","preferred-size")+De}return"-webkit-"+De+"-ms-"+De+De;case 964:return"-webkit-"+De+"-ms-flex-"+De+De;case 1023:if(De.charCodeAt(8)!==99)break;return Ge=De.substring(De.indexOf(":",15)).replace("flex-","").replace("space-between","justify"),"-webkit-box-pack"+Ge+"-webkit-"+De+"-ms-flex-pack"+Ge+De;case 1005:return O.test(De)?De.replace(M,":-webkit-")+De.replace(M,":-moz-")+De:De;case 1e3:switch(Ge=De.substring(13).trim(),ct=Ge.indexOf("-")+1,Ge.charCodeAt(0)+Ge.charCodeAt(ct)){case 226:Ge=De.replace(re,"tb");break;case 232:Ge=De.replace(re,"tb-rl");break;case 220:Ge=De.replace(re,"lr");break;default:return De}return"-webkit-"+De+"-ms-"+Ge+De;case 1017:if(De.indexOf("sticky",9)===-1)break;case 975:switch(ct=(De=nt).length-10,Ge=(De.charCodeAt(ct)===33?De.substring(0,ct):De).substring(nt.indexOf(":",7)+1).trim(),Qe=Ge.charCodeAt(0)+(Ge.charCodeAt(7)|0)){case 203:if(111>Ge.charCodeAt(8))break;case 115:De=De.replace(Ge,"-webkit-"+Ge)+";"+De;break;case 207:case 102:De=De.replace(Ge,"-webkit-"+(102<Qe?"inline-":"")+"box")+";"+De.replace(Ge,"-webkit-"+Ge)+";"+De.replace(Ge,"-ms-"+Ge+"box")+";"+De}return De+";";case 938:if(De.charCodeAt(5)===45)switch(De.charCodeAt(6)){case 105:return Ge=De.replace("-items",""),"-webkit-"+De+"-webkit-box-"+Ge+"-ms-flex-"+Ge+De;case 115:return"-webkit-"+De+"-ms-flex-item-"+De.replace(me,"")+De;default:return"-webkit-"+De+"-ms-flex-line-pack"+De.replace("align-content","").replace(me,"")+De}break;case 973:case 989:if(De.charCodeAt(3)!==45||De.charCodeAt(4)===122)break;case 931:case 953:if(ye.test(nt)===!0)return(Ge=nt.substring(nt.indexOf(":")+1)).charCodeAt(0)===115?o(nt.replace("stretch","fill-available"),ct,_t,We).replace(":fill-available",":stretch"):De.replace(Ge,"-webkit-"+Ge)+De.replace(Ge,"-moz-"+Ge.replace("fill-",""))+De;break;case 962:if(De="-webkit-"+De+(De.charCodeAt(5)===102?"-ms-"+De:"")+De,_t+We===211&&De.charCodeAt(13)===105&&0<De.indexOf("transform",10))return De.substring(0,De.indexOf(";",27)+1).replace(D,"$1-webkit-$2")+De}return De}function i(nt,ct){var _t=nt.indexOf(ct===1?":":"{"),We=nt.substring(0,ct!==3?_t:10);return _t=nt.substring(_t+1,nt.length-1),Pt(ct!==2?We:We.replace(ve,"$1"),_t,ct)}function a(nt,ct){var _t=o(ct,ct.charCodeAt(0),ct.charCodeAt(1),ct.charCodeAt(2));return _t!==ct+";"?_t.replace(ie," or ($1)").substring(4):"("+ct+")"}function u(nt,ct,_t,We,De,Qe,Ge,st,pt,Rt){for(var St=0,Ot=ct,sr;St<Xe;++St)switch(sr=Et[St].call(v,nt,Ot,_t,We,De,Qe,Ge,st,pt,Rt)){case void 0:case!1:case!0:case null:break;default:Ot=sr}if(Ot!==ct)return Ot}function d(nt){switch(nt){case void 0:case null:Xe=Et.length=0;break;default:if(typeof nt=="function")Et[Xe++]=nt;else if(typeof nt=="object")for(var ct=0,_t=nt.length;ct<_t;++ct)d(nt[ct]);else Lt=!!nt|0}return d}function h(nt){return nt=nt.prefix,nt!==void 0&&(Pt=null,nt?typeof nt!="function"?Je=1:(Je=2,Pt=nt):Je=0),h}function v(nt,ct){var _t=nt;if(33>_t.charCodeAt(0)&&(_t=_t.trim()),Gt=_t,_t=[Gt],0<Xe){var We=u(-1,ct,_t,_t,ge,Se,0,0,0,0);We!==void 0&&typeof We=="string"&&(ct=We)}var De=t(tt,_t,ct,0,0);return 0<Xe&&(We=u(-2,De,_t,_t,ge,Se,De.length,0,0,0),We!==void 0&&(De=We)),Gt="",Re=0,Se=ge=1,De}var b=/^\0+/g,x=/[\0\r\f]/g,M=/: */g,O=/zoo|gra/,D=/([,: ])(transform)/g,k=/,\r+?/g,R=/([\t\r\n ])*\f?&/g,q=/@(k\w+)\s*(\S*)\s*/,B=/::(place)/g,G=/:(read-only)/g,re=/[svh]\w+-[tblr]{2}/,Q=/\(\s*(.*)\s*\)/g,ie=/([\s\S]*?);/g,me=/-self|flex-/g,ve=/[^]*?(:[rp][el]a[\w-]+)[^]*/,ye=/stretch|:\s*\w+\-(?:conte|avail)/,we=/([^-])(image-set\()/,Se=1,ge=1,Re=0,Je=1,tt=[],Et=[],Xe=0,Pt=null,Lt=0,Gt="";return v.use=d,v.set=h,e!==void 0&&h(e),v}sae.default=kNr});var oet=A(lae=>{"use strict";Object.defineProperty(lae,"__esModule",{value:!0});var RNr=function(t){var r=new WeakMap;return function(n){if(r.has(n))return r.get(n);var o=t(n);return r.set(n,o),o}};lae.default=RNr});var pae=A(cae=>{"use strict";Object.defineProperty(cae,"__esModule",{value:!0});function jNr(e){return e&&typeof e=="object"&&"default"in e?e.default:e}var qNr=aae(),zNr=jNr(net());oet();var uae="/*|*/",FNr=uae+"}";function UNr(e){e&&kz.current.insert(e+"}")}var kz={current:null},BNr=function(t,r,n,o,i,a,u,d,h,v){switch(t){case 1:{switch(r.charCodeAt(0)){case 64:return kz.current.insert(r+";"),"";case 108:if(r.charCodeAt(2)===98)return""}break}case 2:{if(d===0)return r+uae;break}case 3:switch(d){case 102:case 112:return kz.current.insert(n[0]+r),"";default:return r+(v===0?uae:"")}case-2:r.split(FNr).forEach(UNr)}},VNr=function(t){t===void 0&&(t={});var r=t.key||"css",n;t.prefix!==void 0&&(n={prefix:t.prefix});var o=new zNr(n),i={},a;{a=t.container||document.head;var u=document.querySelectorAll("style[data-emotion-"+r+"]");Array.prototype.forEach.call(u,function(x){var M=x.getAttribute("data-emotion-"+r);M.split(" ").forEach(function(O){i[O]=!0}),x.parentNode!==a&&a.appendChild(x)})}var d;if(o.use(t.stylisPlugins)(BNr),d=function(M,O,D,k){var R=O.name;if(kz.current=D,0)var q;o(M,O.styles),k&&(b.inserted[R]=!0)},0)var h,v;var b={key:r,sheet:new qNr.StyleSheet({key:r,container:a,nonce:t.nonce,speedy:t.speedy}),nonce:t.nonce,inserted:i,registered:{},insert:d};return b};cae.default=VNr});var fae=A(Rz=>{"use strict";Object.defineProperty(Rz,"__esModule",{value:!0});var GNr=!0;function HNr(e,t,r){var n="";return r.split(" ").forEach(function(o){e[o]!==void 0?t.push(e[o]):n+=o+" "}),n}var WNr=function(t,r,n){var o=t.key+"-"+r.name;if((n===!1||GNr===!1&&t.compat!==void 0)&&t.registered[o]===void 0&&(t.registered[o]=r.styles),t.inserted[r.name]===void 0){var i=r;do{var a=t.insert("."+o,i,t.sheet,!0);i=i.next}while(i!==void 0)}};Rz.getRegisteredStyles=HNr;Rz.insertStyles=WNr});var iet=A(dae=>{"use strict";Object.defineProperty(dae,"__esModule",{value:!0});function $Nr(e){for(var t=0,r,n=0,o=e.length;o>=4;++n,o-=4)r=e.charCodeAt(n)&255|(e.charCodeAt(++n)&255)<<8|(e.charCodeAt(++n)&255)<<16|(e.charCodeAt(++n)&255)<<24,r=(r&65535)*1540483477+((r>>>16)*59797<<16),r^=r>>>24,t=(r&65535)*1540483477+((r>>>16)*59797<<16)^(t&65535)*1540483477+((t>>>16)*59797<<16);switch(o){case 3:t^=(e.charCodeAt(n+2)&255)<<16;case 2:t^=(e.charCodeAt(n+1)&255)<<8;case 1:t^=e.charCodeAt(n)&255,t=(t&65535)*1540483477+((t>>>16)*59797<<16)}return t^=t>>>13,t=(t&65535)*1540483477+((t>>>16)*59797<<16),((t^t>>>15)>>>0).toString(36)}dae.default=$Nr});var aet=A(hae=>{"use strict";Object.defineProperty(hae,"__esModule",{value:!0});var ZNr={animationIterationCount:1,borderImageOutset:1,borderImageSlice:1,borderImageWidth:1,boxFlex:1,boxFlexGroup:1,boxOrdinalGroup:1,columnCount:1,columns:1,flex:1,flexGrow:1,flexPositive:1,flexShrink:1,flexNegative:1,flexOrder:1,gridRow:1,gridRowEnd:1,gridRowSpan:1,gridRowStart:1,gridColumn:1,gridColumnEnd:1,gridColumnSpan:1,gridColumnStart:1,msGridRow:1,msGridRowSpan:1,msGridColumn:1,msGridColumnSpan:1,fontWeight:1,lineHeight:1,opacity:1,order:1,orphans:1,tabSize:1,widows:1,zIndex:1,zoom:1,WebkitLineClamp:1,fillOpacity:1,floodOpacity:1,stopOpacity:1,strokeDasharray:1,strokeDashoffset:1,strokeMiterlimit:1,strokeOpacity:1,strokeWidth:1};hae.default=ZNr});var set=A(mae=>{"use strict";Object.defineProperty(mae,"__esModule",{value:!0});function YNr(e){var t={};return function(r){return t[r]===void 0&&(t[r]=e(r)),t[r]}}mae.default=YNr});var jz=A(yae=>{"use strict";Object.defineProperty(yae,"__esModule",{value:!0});function vae(e){return e&&typeof e=="object"&&"default"in e?e.default:e}var KNr=vae(iet()),XNr=vae(aet()),QNr=vae(set()),JNr=/[A-Z]|^ms/g,eDr=/_EMO_([^_]+?)_([^]*?)_EMO_/g,fet=function(t){return t.charCodeAt(1)===45},uet=function(t){return t!=null&&typeof t!="boolean"},gae=QNr(function(e){return fet(e)?e:e.replace(JNr,"-$&").toLowerCase()}),cet=function(t,r){switch(t){case"animation":case"animationName":if(typeof r=="string")return r.replace(eDr,function(n,o,i){return Bh={name:o,styles:i,next:Bh},o})}return XNr[t]!==1&&!fet(t)&&typeof r=="number"&&r!==0?r+"px":r};function E4(e,t,r,n){if(r==null)return"";if(r.__emotion_styles!==void 0)return r;switch(typeof r){case"boolean":return"";case"object":{if(r.anim===1)return Bh={name:r.name,styles:r.styles,next:Bh},r.name;if(r.styles!==void 0){var o=r.next;if(o!==void 0)for(;o!==void 0;)Bh={name:o.name,styles:o.styles,next:Bh},o=o.next;var i=r.styles+";";return i}return tDr(e,t,r)}case"function":{if(e!==void 0){var a=Bh,u=r(e);return Bh=a,E4(e,t,u,n)}break}case"string":if(0)var d,h;break}if(t==null)return r;var v=t[r];return v!==void 0&&!n?v:r}function tDr(e,t,r){var n="";if(Array.isArray(r))for(var o=0;o<r.length;o++)n+=E4(e,t,r[o],!1);else for(var i in r){var a=r[i];if(typeof a!="object")t!=null&&t[a]!==void 0?n+=i+"{"+t[a]+"}":uet(a)&&(n+=gae(i)+":"+cet(i,a)+";");else if(Array.isArray(a)&&typeof a[0]=="string"&&(t==null||t[a[0]]===void 0))for(var u=0;u<a.length;u++)uet(a[u])&&(n+=gae(i)+":"+cet(i,a[u])+";");else{var d=E4(e,t,a,!1);switch(i){case"animation":case"animationName":{n+=gae(i)+":"+d+";";break}default:n+=i+"{"+d+"}"}}}return n}var pet=/label:\s*([^\s;\n{]+)\s*;/g,Bh,rDr=function(t,r,n){if(t.length===1&&typeof t[0]=="object"&&t[0]!==null&&t[0].styles!==void 0)return t[0];var o=!0,i="";Bh=void 0;var a=t[0];a==null||a.raw===void 0?(o=!1,i+=E4(n,r,a,!1)):i+=a[0];for(var u=1;u<t.length;u++)i+=E4(n,r,t[u],i.charCodeAt(i.length-1)===46),o&&(i+=a[u]);var d;pet.lastIndex=0;for(var h="",v;(v=pet.exec(i))!==null;)h+="-"+v[1];var b=KNr(i)+h;return{name:b,styles:i,next:Bh}};yae.serializeStyles=rDr});var yet=A(eb=>{"use strict";oae();var Ng=Pe(),nDr=pae(),det=fae(),oDr=jz();function iDr(e){return e&&e.__esModule?e:{default:e}}var aDr=iDr(nDr),bae=Object.prototype.hasOwnProperty,met=Ng.createContext(typeof HTMLElement!="undefined"?aDr.default():null),get=Ng.createContext({}),sDr=met.Provider,vet=function(t){var r=function(o,i){return Ng.createElement(met.Consumer,null,function(a){return t(o,a,i)})};return Ng.forwardRef(r)},_ae="__EMOTION_TYPE_PLEASE_DO_NOT_USE__",lDr=function(t,r){var n={};for(var o in r)bae.call(r,o)&&(n[o]=r[o]);if(n[_ae]=t,0){var i;if(i.stack)var a}return n},uDr=function(){return null},het=function(t,r,n,o){var i=n===null?r.css:r.css(n);typeof i=="string"&&t.registered[i]!==void 0&&(i=t.registered[i]);var a=r[_ae],u=[i],d="";typeof r.className=="string"?d=det.getRegisteredStyles(t.registered,u,r.className):r.className!=null&&(d=r.className+" ");var h=oDr.serializeStyles(u);if(0)var v;var b=det.insertStyles(t,h,typeof a=="string");d+=t.key+"-"+h.name;var x={};for(var M in r)bae.call(r,M)&&M!=="css"&&M!==_ae&&(x[M]=r[M]);x.ref=o,x.className=d;var O=Ng.createElement(a,x),D=Ng.createElement(uDr,null);return Ng.createElement(Ng.Fragment,null,D,O)},cDr=vet(function(e,t,r){return typeof e.css=="function"?Ng.createElement(get.Consumer,null,function(n){return het(t,e,n,r)}):het(t,e,null,r)});eb.CacheProvider=sDr;eb.Emotion=cDr;eb.ThemeContext=get;eb.createEmotionProps=lDr;eb.hasOwnProperty=bae;eb.withEmotionCache=vet});var _et=A(xae=>{"use strict";Object.defineProperty(xae,"__esModule",{value:!0});var pDr=jz();function fDr(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];return pDr.serializeStyles(t)}xae.default=fDr});var Tet=A(Md=>{"use strict";Object.defineProperty(Md,"__esModule",{value:!0});var dDr=oae(),Vh=Pe();pae();var Gh=yet(),Eae=fae(),wae=jz(),hDr=aae(),mDr=_et();function xet(e){return e&&e.__esModule?e:{default:e}}var gDr=xet(dDr),wet=xet(mDr),Eet=function(t,r){var n=arguments;if(r==null||!Gh.hasOwnProperty.call(r,"css"))return Vh.createElement.apply(void 0,n);var o=n.length,i=new Array(o);i[0]=Gh.Emotion,i[1]=Gh.createEmotionProps(t,r);for(var a=2;a<o;a++)i[a]=n[a];return Vh.createElement.apply(null,i)},vDr=Gh.withEmotionCache(function(e,t){var r=e.styles;if(typeof r=="function")return Vh.createElement(Gh.ThemeContext.Consumer,null,function(o){var i=wae.serializeStyles([r(o)]);return Vh.createElement(bet,{serialized:i,cache:t})});var n=wae.serializeStyles([r]);return Vh.createElement(bet,{serialized:n,cache:t})}),bet=function(e){gDr.default(t,e);function t(n,o,i){return e.call(this,n,o,i)||this}var r=t.prototype;return r.componentDidMount=function(){this.sheet=new hDr.StyleSheet({key:this.props.cache.key+"-global",nonce:this.props.cache.sheet.nonce,container:this.props.cache.sheet.container});var o=document.querySelector("style[data-emotion-"+this.props.cache.key+"=\""+this.props.serialized.name+"\"]");o!==null&&this.sheet.tags.push(o),this.props.cache.sheet.tags.length&&(this.sheet.before=this.props.cache.sheet.tags[0]),this.insertStyles()},r.componentDidUpdate=function(o){o.serialized.name!==this.props.serialized.name&&this.insertStyles()},r.insertStyles=function(){if(this.props.serialized.next!==void 0&&Eae.insertStyles(this.props.cache,this.props.serialized.next,!0),this.sheet.tags.length){var o=this.sheet.tags[this.sheet.tags.length-1].nextElementSibling;this.sheet.before=o,this.sheet.flush()}this.props.cache.insert("",this.props.serialized,this.sheet,!1)},r.componentWillUnmount=function(){this.sheet.flush()},r.render=function(){return null},t}(Vh.Component),yDr=function(){var t=wet.default.apply(void 0,arguments),r="animation-"+t.name;return{name:r,styles:"@keyframes "+r+"{"+t.styles+"}",anim:1,toString:function(){return"_EMO_"+this.name+"_"+this.styles+"_EMO_"}}},_Dr=function e(t){for(var r=t.length,n=0,o="";n<r;n++){var i=t[n];if(i!=null){var a=void 0;switch(typeof i){case"boolean":break;case"object":{if(Array.isArray(i))a=e(i);else{a="";for(var u in i)i[u]&&u&&(a&&(a+=" "),a+=u)}break}default:a=i}a&&(o&&(o+=" "),o+=a)}}return o};function bDr(e,t,r){var n=[],o=Eae.getRegisteredStyles(e,n,r);return n.length<2?r:o+t(n)}var xDr=function(){return null},wDr=Gh.withEmotionCache(function(e,t){return Vh.createElement(Gh.ThemeContext.Consumer,null,function(r){var n=!1,o=function(){for(var v=arguments.length,b=new Array(v),x=0;x<v;x++)b[x]=arguments[x];var M=wae.serializeStyles(b,t.registered);return Eae.insertStyles(t,M,!1),t.key+"-"+M.name},i=function(){for(var v=arguments.length,b=new Array(v),x=0;x<v;x++)b[x]=arguments[x];return bDr(t.registered,o,_Dr(b))},a={css:o,cx:i,theme:r},u=e.children(a);n=!0;var d=Vh.createElement(xDr,null);return Vh.createElement(Vh.Fragment,null,d,u)})});Md.CacheProvider=Gh.CacheProvider;Md.ThemeContext=Gh.ThemeContext;Md.withEmotionCache=Gh.withEmotionCache;Object.defineProperty(Md,"css",{enumerable:!0,get:function(){return wet.default}});Md.ClassNames=wDr;Md.Global=vDr;Md.createElement=Eet;Md.jsx=Eet;Md.keyframes=yDr});var Sae=A(Cd=>{"use strict";Object.defineProperty(Cd,"__esModule",{value:!0});Cd.default=Pet;Cd.skeletonStyles=Cd.skeletonKeyframes=Cd.defaultHighlightColor=Cd.defaultBaseColor=void 0;var JPn=EDr(Pe()),KS=Tet();function EDr(e){return e&&e.__esModule?e:{default:e}}function Iet(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(o){return Object.getOwnPropertyDescriptor(e,o).enumerable})),r.push.apply(r,n)}return r}function SDr(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?Iet(r,!0).forEach(function(n){TDr(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Iet(r).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function TDr(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function Met(){var e=IDr([`
  0% {
    background-position: -200px 0;
  }
  `,`
  100% {
    background-position: calc(200px + 100%) 0;
  }
`]);return Met=function(){return e},e}function IDr(e,t){return t||(t=e.slice(0)),Object.freeze(Object.defineProperties(e,{raw:{value:Object.freeze(t)}}))}var qz="#eee";Cd.defaultBaseColor=qz;var Cet="#f5f5f5";Cd.defaultHighlightColor=Cet;var Aet=function(t,r){return(0,KS.keyframes)(Met(),r>0?"".concat(Math.floor(1/(t+r)*t*100),`% {
    background-position: calc(200px + 100%) 0;
  }`):void 0)};Cd.skeletonKeyframes=Aet;var Oet=(0,KS.css)("background-color:",qz,";background-image:linear-gradient( 90deg,",qz,",",Cet,",",qz," );background-size:200px 100%;background-repeat:no-repeat;border-radius:4px;display:inline-block;line-height:1;width:100%;;label:skeletonStyles;");Cd.skeletonStyles=Oet;function Pet(e){for(var t=e.count,r=e.duration,n=e.width,o=e.wrapper,i=e.height,a=e.circle,u=e.delay,d=e.style,h=e.className,v=[],b=0;b<t;b++){var x={};n!==null&&(x.width=n),i!==null&&(x.height=i),n!==null&&i!==null&&a&&(x.borderRadius="50%");var M="react-loading-skeleton";h&&(M+=" "+h),v.push((0,KS.jsx)("span",{key:b,className:M,css:(0,KS.css)(Oet," animation:",Aet(r,u)," ",r+u,"s ease-in-out infinite;label:Skeleton;"),style:SDr({},d,{},x)},"\u200C"))}return(0,KS.jsx)("span",null,o?v.map(function(O,D){return(0,KS.jsx)(o,{key:D},O,"\u200C")}):v)}Pet.defaultProps={count:1,duration:1.2,width:null,wrapper:null,height:null,circle:!1,delay:0}});var rrt=A(fi=>{"use strict";var tse=Symbol.for("react.element"),rse=Symbol.for("react.portal"),lF=Symbol.for("react.fragment"),uF=Symbol.for("react.strict_mode"),cF=Symbol.for("react.profiler"),pF=Symbol.for("react.provider"),fF=Symbol.for("react.context"),r5r=Symbol.for("react.server_context"),dF=Symbol.for("react.forward_ref"),hF=Symbol.for("react.suspense"),mF=Symbol.for("react.suspense_list"),gF=Symbol.for("react.memo"),vF=Symbol.for("react.lazy"),n5r=Symbol.for("react.offscreen"),trt;trt=Symbol.for("react.module.reference");function mf(e){if(typeof e=="object"&&e!==null){var t=e.$$typeof;switch(t){case tse:switch(e=e.type,e){case lF:case cF:case uF:case hF:case mF:return e;default:switch(e=e&&e.$$typeof,e){case r5r:case fF:case dF:case vF:case gF:case pF:return e;default:return t}}case rse:return t}}}fi.ContextConsumer=fF;fi.ContextProvider=pF;fi.Element=tse;fi.ForwardRef=dF;fi.Fragment=lF;fi.Lazy=vF;fi.Memo=gF;fi.Portal=rse;fi.Profiler=cF;fi.StrictMode=uF;fi.Suspense=hF;fi.SuspenseList=mF;fi.isAsyncMode=function(){return!1};fi.isConcurrentMode=function(){return!1};fi.isContextConsumer=function(e){return mf(e)===fF};fi.isContextProvider=function(e){return mf(e)===pF};fi.isElement=function(e){return typeof e=="object"&&e!==null&&e.$$typeof===tse};fi.isForwardRef=function(e){return mf(e)===dF};fi.isFragment=function(e){return mf(e)===lF};fi.isLazy=function(e){return mf(e)===vF};fi.isMemo=function(e){return mf(e)===gF};fi.isPortal=function(e){return mf(e)===rse};fi.isProfiler=function(e){return mf(e)===cF};fi.isStrictMode=function(e){return mf(e)===uF};fi.isSuspense=function(e){return mf(e)===hF};fi.isSuspenseList=function(e){return mf(e)===mF};fi.isValidElementType=function(e){return typeof e=="string"||typeof e=="function"||e===lF||e===cF||e===uF||e===hF||e===mF||e===n5r||typeof e=="object"&&e!==null&&(e.$$typeof===vF||e.$$typeof===gF||e.$$typeof===pF||e.$$typeof===fF||e.$$typeof===dF||e.$$typeof===trt||e.getModuleId!==void 0)};fi.typeOf=mf});var ort=A(($kn,nrt)=>{"use strict";nrt.exports=rrt()});var eit=A(Oi=>{"use strict";var c7=60103,p7=60106,rP=60107,nP=60108,oP=60114,iP=60109,aP=60110,sP=60112,lP=60113,Kse=60120,uP=60115,cP=60116,Yot=60121,Kot=60122,Xot=60117,Qot=60129,Jot=60131;typeof Symbol=="function"&&Symbol.for&&(il=Symbol.for,c7=il("react.element"),p7=il("react.portal"),rP=il("react.fragment"),nP=il("react.strict_mode"),oP=il("react.profiler"),iP=il("react.provider"),aP=il("react.context"),sP=il("react.forward_ref"),lP=il("react.suspense"),Kse=il("react.suspense_list"),uP=il("react.memo"),cP=il("react.lazy"),Yot=il("react.block"),Kot=il("react.server.block"),Xot=il("react.fundamental"),Qot=il("react.debug_trace_mode"),Jot=il("react.legacy_hidden"));var il;function Ld(e){if(typeof e=="object"&&e!==null){var t=e.$$typeof;switch(t){case c7:switch(e=e.type,e){case rP:case oP:case nP:case lP:case Kse:return e;default:switch(e=e&&e.$$typeof,e){case aP:case sP:case cP:case uP:case iP:return e;default:return t}}case p7:return t}}}var RLr=iP,jLr=c7,qLr=sP,zLr=rP,FLr=cP,ULr=uP,BLr=p7,VLr=oP,GLr=nP,HLr=lP;Oi.ContextConsumer=aP;Oi.ContextProvider=RLr;Oi.Element=jLr;Oi.ForwardRef=qLr;Oi.Fragment=zLr;Oi.Lazy=FLr;Oi.Memo=ULr;Oi.Portal=BLr;Oi.Profiler=VLr;Oi.StrictMode=GLr;Oi.Suspense=HLr;Oi.isAsyncMode=function(){return!1};Oi.isConcurrentMode=function(){return!1};Oi.isContextConsumer=function(e){return Ld(e)===aP};Oi.isContextProvider=function(e){return Ld(e)===iP};Oi.isElement=function(e){return typeof e=="object"&&e!==null&&e.$$typeof===c7};Oi.isForwardRef=function(e){return Ld(e)===sP};Oi.isFragment=function(e){return Ld(e)===rP};Oi.isLazy=function(e){return Ld(e)===cP};Oi.isMemo=function(e){return Ld(e)===uP};Oi.isPortal=function(e){return Ld(e)===p7};Oi.isProfiler=function(e){return Ld(e)===oP};Oi.isStrictMode=function(e){return Ld(e)===nP};Oi.isSuspense=function(e){return Ld(e)===lP};Oi.isValidElementType=function(e){return typeof e=="string"||typeof e=="function"||e===rP||e===oP||e===Qot||e===nP||e===lP||e===Kse||e===Jot||typeof e=="object"&&e!==null&&(e.$$typeof===cP||e.$$typeof===uP||e.$$typeof===iP||e.$$typeof===aP||e.$$typeof===sP||e.$$typeof===Xot||e.$$typeof===Yot||e[0]===Kot)};Oi.typeOf=Ld});var rit=A((mUn,tit)=>{"use strict";tit.exports=eit()});var qut=A((Sro,g9)=>{g9.exports.RADIUS=6378137;g9.exports.FLATTENING=1/298.257223563;g9.exports.POLAR_RADIUS=6356752.3142});var But=A((Tro,Zue)=>{var zut=qut();Zue.exports.geometry=Uut;Zue.exports.ring=$ue;function Uut(e){var t=0,r;switch(e.type){case"Polygon":return Fut(e.coordinates);case"MultiPolygon":for(r=0;r<e.coordinates.length;r++)t+=Fut(e.coordinates[r]);return t;case"Point":case"MultiPoint":case"LineString":case"MultiLineString":return 0;case"GeometryCollection":for(r=0;r<e.geometries.length;r++)t+=Uut(e.geometries[r]);return t}}function Fut(e){var t=0;if(e&&e.length>0){t+=Math.abs($ue(e[0]));for(var r=1;r<e.length;r++)t-=Math.abs($ue(e[r]))}return t}function $ue(e){var t,r,n,o,i,a,u,d=0,h=e.length;if(h>2){for(u=0;u<h;u++)u===h-2?(o=h-2,i=h-1,a=0):u===h-1?(o=h-1,i=0,a=1):(o=u,i=u+1,a=u+2),t=e[o],r=e[i],n=e[a],d+=(Wue(n[0])-Wue(t[0]))*Math.sin(Wue(r[1]));d=d*zut.RADIUS*zut.RADIUS/2}return d}function Wue(e){return e*Math.PI/180}});var gct=A((xoo,mct)=>{mct.exports=gjr;var mjr={Point:"geometry",MultiPoint:"geometry",LineString:"geometry",MultiLineString:"geometry",Polygon:"geometry",MultiPolygon:"geometry",GeometryCollection:"geometry",Feature:"feature",FeatureCollection:"featurecollection"};function gjr(e){if(!e||!e.type)return null;var t=mjr[e.type];if(!t)return null;if(t==="geometry")return{type:"FeatureCollection",features:[{type:"Feature",properties:{},geometry:e}]};if(t==="feature")return{type:"FeatureCollection",features:[e]};if(t==="featurecollection")return e}});var $qr={};mI($qr,{SettingsProvider:()=>Hqr,renderApp:()=>Wqr});var Vdt=Z(Pe(),1),Gdt=Z(va(),1),Fyo=Z(Kee(),1);var Em=Z(Pe(),1);var eu=Z(Pe()),tFe=Z(va());function cmr(e){return!!e&&typeof e.then=="function"}var Wa=cmr;function pmr(e,t){if(e!=null)return e;throw new Error(t!=null?t:"Got unexpected null or undefined")}var ni=pmr,lR=class{},fmr=new lR,vte={valueMaybe(){},valueOrThrow(){throw new Error(`Loadable expected value, but in "${this.state}" state`)},errorMaybe(){},errorOrThrow(){throw new Error(`Loadable expected error, but in "${this.state}" state`)},promiseMaybe(){},promiseOrThrow(){throw new Error(`Loadable expected promise, but in "${this.state}" state`)},is(e){return e.state===this.state&&e.contents===this.contents},map(e){if(this.state==="hasError")return this;if(this.state==="hasValue")try{let r=e(this.contents);return Wa(r)?OE(r.then(n=>({__value:n}))):yte(r)}catch(r){return Wa(r)?OE(r.next(()=>e(this.contents))):_te(r)}if(this.state==="loading")return OE(this.contents.then(r=>({__value:e(r.__value)})).catch(r=>{if(Wa(r))return r.then(()=>e(this.contents));throw r}));throw new Error("Invalid Loadable state")}};function yte(e){return Object.freeze(Mt(Te({state:"hasValue",contents:e},vte),{getValue(){return this.contents},toPromise(){return Promise.resolve(this.contents)},valueMaybe(){return this.contents},valueOrThrow(){return this.contents}}))}function _te(e){return Object.freeze(Mt(Te({state:"hasError",contents:e},vte),{getValue(){throw this.contents},toPromise(){return Promise.reject(this.contents)},errorMaybe(){return this.contents},errorOrThrow(){return this.contents}}))}function OE(e){return Object.freeze(Mt(Te({state:"loading",contents:e},vte),{getValue(){throw this.contents.then(({__value:t})=>t)},toPromise(){return this.contents.then(({__value:t})=>t)},promiseMaybe(){return this.contents.then(({__value:t})=>t)},promiseOrThrow(){return this.contents.then(({__value:t})=>t)}}))}function dmr(){return OE(new Promise(()=>{}))}function hmr(e){return e.every(t=>t.state==="hasValue")?yte(e.map(t=>t.contents)):e.some(t=>t.state==="hasError")?_te(ni(e.find(t=>t.state==="hasError"),"Invalid loadable passed to loadableAll").contents):OE(Promise.all(e.map(t=>t.contents)).then(t=>({__value:t})))}var NA={loadableWithValue:yte,loadableWithError:_te,loadableWithPromise:OE,loadableLoading:dmr,loadableAll:hmr,Canceled:lR,CANCELED:fmr},Xee,rFe=(Xee=eu.default.useMutableSource)!==null&&Xee!==void 0?Xee:eu.default.unstable_useMutableSource;function mmr(){return rFe&&!(typeof window!="undefined"&&window.$disableRecoilValueMutableSource_TEMP_HACK_DO_NOT_USE)}var nFe={mutableSourceExists:mmr,useMutableSource:rFe},{mutableSourceExists:gmr}=nFe,bte=new Map().set("recoil_hamt_2020",!0).set("recoil_memory_managament_2020",!0).set("recoil_suppress_rerender_in_callback",!0);function xte(e){var t;return e==="recoil_early_rendering_2021"&&!gmr()?!1:(t=bte.get(e))!==null&&t!==void 0?t:!1}xte.setPass=e=>{bte.set(e,!0)};xte.setFail=e=>{bte.set(e,!1)};var bi=xte;function vmr(e,t,{error:r}={}){return null}var ymr=vmr,Ih=ymr;function _mr(e,t){let r=new Set(e);return r.add(t),r}function bmr(e,t){let r=new Set(e);return r.delete(t),r}function xmr(e,t,r){let n=new Map(e);return n.set(t,r),n}function wmr(e,t,r){let n=new Map(e);return n.set(t,r(n.get(t))),n}function Emr(e,t){let r=new Map(e);return r.delete(t),r}function Smr(e,t){let r=new Map(e);return t.forEach(n=>r.delete(n)),r}var oFe={setByAddingToSet:_mr,setByDeletingFromSet:bmr,mapBySettingInMap:xmr,mapByUpdatingInMap:wmr,mapByDeletingFromMap:Emr,mapByDeletingMultipleFromMap:Smr};function*Tmr(e,t){let r=0;for(let n of e)t(n,r++)&&(yield n)}var iFe=Tmr;function Imr(e,t){return function*(){let r=0;for(let n of e)yield t(n,r++)}()}var aFe=Imr;function Mmr(e,...t){}var Cmr=Mmr,wte=Cmr;function No(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var AA=class{constructor(t){No(this,"key",void 0),this.key=t}},uR=class extends AA{},cR=class extends AA{};function Amr(e){return e instanceof uR||e instanceof cR}var xR={AbstractRecoilValue:AA,RecoilState:uR,RecoilValueReadOnly:cR,isRecoilValue:Amr},Omr=xR.AbstractRecoilValue,Pmr=xR.RecoilState,Nmr=xR.RecoilValueReadOnly,Dmr=xR.isRecoilValue,My=Object.freeze({__proto__:null,AbstractRecoilValue:Omr,RecoilState:Pmr,RecoilValueReadOnly:Nmr,isRecoilValue:Dmr}),pR=class{},Lmr=new pR,tte=class extends Error{constructor(t){super(`Tried to set the value of Recoil selector ${t} using an updater function, but it is an async selector in a pending or error state; this is not supported.`)}},y_=new Map,Ete=new Map;function kmr(e){return aFe(e,t=>ni(Ete.get(t)))}function Rmr(e){if(y_.has(e.key)){let r=`Duplicate atom key "${e.key}". This is a FATAL ERROR in
      production. But it is safe to ignore this warning if it occurred because of
      hot module replacement.`;console.warn(r)}y_.set(e.key,e);let t=e.set==null?new My.RecoilValueReadOnly(e.key):new My.RecoilState(e.key);return Ete.set(e.key,t),t}var fR=class extends Error{};function jmr(e){let t=y_.get(e);if(t==null)throw new fR(`Missing definition for RecoilValue: "${e}""`);return t}function qmr(e){return y_.get(e)}var dR=new Map;function zmr(e){var t;if(!bi("recoil_memory_managament_2020"))return;let r=y_.get(e);if(!(r==null||(t=r.shouldDeleteConfigOnRelease)===null||t===void 0)&&t.call(r)){var n;y_.delete(e),(n=sFe(e))===null||n===void 0||n(),dR.delete(e)}}function Fmr(e,t){bi("recoil_memory_managament_2020")&&(t===void 0?dR.delete(e):dR.set(e,t))}function sFe(e){return dR.get(e)}var Yp={nodes:y_,recoilValues:Ete,registerNode:Rmr,getNode:jmr,getNodeMaybe:qmr,deleteNodeConfigIfPossible:zmr,setConfigDeletionHandler:Fmr,getConfigDeletionHandler:sFe,recoilValuesForKeys:kmr,NodeMissingError:fR,DefaultValue:pR,DEFAULT_VALUE:Lmr,RecoilValueNotReady:tte},hR=class{};function Umr(){return new hR}var wR={RetentionZone:hR,retentionZone:Umr},{setByAddingToSet:Bmr}=oFe,{getNode:ER,getNodeMaybe:Vmr,recoilValuesForKeys:qze}=Yp,{RetentionZone:zze}=wR,Gmr=Object.freeze(new Set),rte=class extends Error{};function Hmr(e,t,r){if(!bi("recoil_memory_managament_2020"))return()=>{};let{nodesRetainedByZone:n}=e.getState().retention;function o(i){let a=n.get(i);a||n.set(i,a=new Set),a.add(t)}if(r instanceof zze)o(r);else if(Array.isArray(r))for(let i of r)o(i);return()=>{if(!bi("recoil_memory_managament_2020"))return;let i=e.getState().retention.nodesRetainedByZone;function a(u){let d=i.get(u);d&&d.delete(t),d&&d.size===0&&i.delete(u)}if(r instanceof zze)a(r);else if(Array.isArray(r))for(let u of r)a(u)}}function Ste(e,t,r,n){let o=e.getState();if(o.nodeCleanupFunctions.has(r))return;let i=ER(r),a=Hmr(e,r,i.retainedBy),u=i.init(e,t,n);o.nodeCleanupFunctions.set(r,()=>{u(),a()})}function Wmr(e,t){var r;let n=e.getState();(r=n.nodeCleanupFunctions.get(t))===null||r===void 0||r(),n.nodeCleanupFunctions.delete(t)}function $mr(e,t,r){return Ste(e,t,r,"get"),ER(r).get(e,t)}function lFe(e,t,r){return ER(r).peek(e,t)}function Zmr(e,t,r){var n;let o=Vmr(t);return o==null||(n=o.invalidate)===null||n===void 0||n.call(o,e),Mt(Te({},e),{atomValues:e.atomValues.clone().delete(t),nonvalidatedAtoms:e.nonvalidatedAtoms.clone().set(t,r),dirtyAtoms:Bmr(e.dirtyAtoms,t)})}function Ymr(e,t,r,n){let o=ER(r);if(o.set==null)throw new rte(`Attempt to set read-only RecoilValue: ${r}`);let i=o.set;return Ste(e,t,r,"set"),i(e,t,n)}function Kmr(e,t,r){var n,o,i;let a=e.getState(),u=e.getGraph(t.version),d=a.knownAtoms.has(r)?"atom":a.knownSelectors.has(r)?"selector":void 0,h=iFe(uFe(e,t,new Set([r])),v=>v!==r);return{loadable:lFe(e,t,r),isActive:a.knownAtoms.has(r)||a.knownSelectors.has(r),isSet:d==="selector"?!1:t.atomValues.has(r),isModified:t.dirtyAtoms.has(r),type:d,deps:qze((n=u.nodeDeps.get(r))!==null&&n!==void 0?n:[]),subscribers:{nodes:qze(h),components:aFe((o=(i=a.nodeToComponentSubscriptions.get(r))===null||i===void 0?void 0:i.values())!==null&&o!==void 0?o:[],([v])=>({name:v}))}}}function uFe(e,t,r){let n=new Set,o=Array.from(r),i=e.getGraph(t.version);for(let u=o.pop();u;u=o.pop()){var a;n.add(u);let d=(a=i.nodeToNodeSubscriptions.get(u))!==null&&a!==void 0?a:Gmr;for(let h of d)n.has(h)||o.push(h)}return n}var LE={getNodeLoadable:$mr,peekNodeLoadable:lFe,setNodeValue:Ymr,cleanUpNode:Wmr,setUnvalidatedAtomValue_DEPRECATED:Zmr,peekNodeInfo:Kmr,getDownstreamNodes:uFe,initializeNodeIfNewToStore:Ste},{CANCELED:Xmr}=NA,{getDownstreamNodes:Qmr,getNodeLoadable:cFe,setNodeValue:Jmr}=LE,{getNodeMaybe:pFe}=Yp,{DefaultValue:Tte,RecoilValueNotReady:egr}=Yp,{AbstractRecoilValue:tgr,RecoilState:rgr,RecoilValueReadOnly:ngr,isRecoilValue:ogr}=My;function igr(e,{key:t},r=e.getState().currentTree){var n,o;let i=e.getState();r.version===i.currentTree.version||r.version===((n=i.nextTree)===null||n===void 0?void 0:n.version)||r.version===((o=i.previousTree)===null||o===void 0?void 0:o.version)||Ih("Tried to read from a discarded tree");let a=cFe(e,r,t);return a.state==="loading"&&a.contents.catch(()=>Xmr),a}function agr(e,t){let r=e.clone();return t.forEach((n,o)=>{n.state==="hasValue"&&n.contents instanceof Tte?r.delete(o):r.set(o,n)}),r}function sgr(e,t,{key:r},n){if(typeof n=="function"){let o=cFe(e,t,r);if(o.state==="loading")throw new egr(r);if(o.state==="hasError")throw o.contents;return n(o.contents)}else return n}function lgr(e,t,r){if(r.type==="set"){let{recoilValue:o,valueOrUpdater:i}=r,a=sgr(e,t,o,i),u=Jmr(e,t,o.key,a);for(let[d,h]of u.entries())nte(t,d,h)}else if(r.type==="setLoadable"){let{recoilValue:{key:o},loadable:i}=r;nte(t,o,i)}else if(r.type==="markModified"){let{recoilValue:{key:o}}=r;t.dirtyAtoms.add(o)}else if(r.type==="setUnvalidated"){var n;let{recoilValue:{key:o},unvalidatedValue:i}=r,a=pFe(o);a==null||(n=a.invalidate)===null||n===void 0||n.call(a,t),t.atomValues.delete(o),t.nonvalidatedAtoms.set(o,i),t.dirtyAtoms.add(o)}else Ih(`Unknown action ${r.type}`)}function nte(e,t,r){r.state==="hasValue"&&r.contents instanceof Tte?e.atomValues.delete(t):e.atomValues.set(t,r),e.dirtyAtoms.add(t),e.nonvalidatedAtoms.delete(t)}function fFe(e,t){e.replaceState(r=>{let n=dFe(r);for(let o of t)lgr(e,n,o);return ote(e,n),n})}function SR(e,t){if(MA.length){let r=MA[MA.length-1],n=r.get(e);n||r.set(e,n=[]),n.push(t)}else fFe(e,[t])}var MA=[];function ugr(){let e=new Map;return MA.push(e),()=>{for(let[r,n]of e)fFe(r,n);MA.pop()!==e&&Ih("Incorrect order of batch popping")}}function dFe(e){return Mt(Te({},e),{atomValues:e.atomValues.clone(),nonvalidatedAtoms:e.nonvalidatedAtoms.clone(),dirtyAtoms:new Set(e.dirtyAtoms)})}function ote(e,t){let r=Qmr(e,t,t.dirtyAtoms);for(let i of r){var n,o;(n=pFe(i))===null||n===void 0||(o=n.invalidate)===null||o===void 0||o.call(n,t)}}function hFe(e,t,r){SR(e,{type:"set",recoilValue:t,valueOrUpdater:r})}function cgr(e,t,r){if(r instanceof Tte)return hFe(e,t,r);SR(e,{type:"setLoadable",recoilValue:t,loadable:r})}function pgr(e,t){SR(e,{type:"markModified",recoilValue:t})}function fgr(e,t,r){SR(e,{type:"setUnvalidated",recoilValue:t,unvalidatedValue:r})}var dgr=0;function hgr(e,{key:t},r,n=null){let o=dgr++,i=e.getState();if(i.nodeToComponentSubscriptions.has(t)||i.nodeToComponentSubscriptions.set(t,new Map),ni(i.nodeToComponentSubscriptions.get(t)).set(o,[n!=null?n:"<not captured>",r]),bi("recoil_early_rendering_2021")){let a=e.getState().nextTree;a&&a.dirtyAtoms.has(t)&&r(a)}return{release:()=>{let a=e.getState(),u=a.nodeToComponentSubscriptions.get(t);if(u===void 0||!u.has(o)){Ih(`Subscription missing at release time for atom ${t}. This is a bug in Recoil.`);return}u.delete(o),u.size===0&&a.nodeToComponentSubscriptions.delete(t)}}}var __={RecoilValueReadOnly:ngr,AbstractRecoilValue:tgr,RecoilState:rgr,getRecoilValueAsLoadable:igr,setRecoilValue:hFe,setRecoilValueLoadable:cgr,markRecoilValueModified:pgr,setUnvalidatedRecoilValue:fgr,subscribeToRecoilValue:hgr,isRecoilValue:ogr,applyAtomValueWrites:agr,batchStart:ugr,writeLoadableToTreeState:nte,invalidateDownstreams:ote,copyTreeState:dFe,invalidateDownstreams_FOR_TESTING:ote},{unstable_batchedUpdates:mgr}=tFe.default,ggr={unstable_batchedUpdates:mgr},{unstable_batchedUpdates:vgr}=ggr,ygr={unstable_batchedUpdates:vgr},{batchStart:_gr}=__,{unstable_batchedUpdates:bgr}=ygr,Ite=bgr,xgr=e=>{Ite=e},wgr=()=>Ite,Egr=e=>{Ite(()=>{let t=()=>{};try{t=_gr(),e()}finally{t()}})},Mte={getBatcher:wgr,setBatcher:xgr,batchUpdates:Egr};function Sgr(e,t){t()}var Tgr={enqueueExecution:Sgr};function Igr(e,...t){let r=new Set;e:for(let n of e){for(let o of t)if(o.has(n))continue e;r.add(n)}return r}var mR=Igr;function Mgr(e,t){let r=new Map;return e.forEach((n,o)=>{r.set(o,t(n,o))}),r}var gR=Mgr;function Cgr(){return{nodeDeps:new Map,nodeToNodeSubscriptions:new Map}}function Agr(e){return{nodeDeps:gR(e.nodeDeps,t=>new Set(t)),nodeToNodeSubscriptions:gR(e.nodeToNodeSubscriptions,t=>new Set(t))}}function Qee(e,t,r){let{nodeDeps:n,nodeToNodeSubscriptions:o}=t;e.forEach((i,a)=>{let u=n.get(a);if(u&&r&&u!==r.nodeDeps.get(a))return;n.set(a,new Set(i)),(u==null?i:mR(i,u)).forEach(h=>{o.has(h)||o.set(h,new Set),ni(o.get(h)).add(a)}),u&&mR(u,i).forEach(v=>{if(!o.has(v))return;let b=ni(o.get(v));b.delete(a),b.size===0&&o.delete(v)})})}function Ogr(e,t,r){var n,o,i,a;let u=t.getState();r===u.currentTree.version||r===((n=u.nextTree)===null||n===void 0?void 0:n.version)||r===((o=u.previousTree)===null||o===void 0?void 0:o.version)||Ih("Tried to save dependencies to a discarded tree");let d=t.getGraph(r);if(Qee(e,d),r===((i=u.previousTree)===null||i===void 0?void 0:i.version)){let v=t.getGraph(u.currentTree.version);Qee(e,v,d)}if(r===((a=u.previousTree)===null||a===void 0?void 0:a.version)||r===u.currentTree.version){var h;let v=(h=u.nextTree)===null||h===void 0?void 0:h.version;if(v!==void 0){let b=t.getGraph(v);Qee(e,b,d)}}}function Pgr(e,t){e.forEach((r,n)=>{t.has(n)||t.set(n,new Set);let o=ni(t.get(n));r.forEach(i=>o.add(i))})}function Ngr(e,t,r){r.has(e)||r.set(e,new Set),ni(r.get(e)).add(t)}var DA={addToDependencyMap:Ngr,cloneGraph:Agr,graph:Cgr,mergeDepsIntoDependencyMap:Pgr,saveDependencyMapToStore:Ogr};function Dgr(e,t){return t={exports:{}},e(t,t.exports),t.exports}var Lgr=Dgr(function(e){var t=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(Y){return typeof Y}:function(Y){return Y&&typeof Symbol=="function"&&Y.constructor===Symbol&&Y!==Symbol.prototype?"symbol":typeof Y},r={},n=5,o=Math.pow(2,n),i=o-1,a=o/2,u=o/4,d={},h=function(J){return function(){return J}},v=r.hash=function(Y){var J=typeof Y=="undefined"?"undefined":t(Y);if(J==="number")return Y;J!=="string"&&(Y+="");for(var de=0,ne=0,je=Y.length;ne<je;++ne){var Ie=Y.charCodeAt(ne);de=(de<<5)-de+Ie|0}return de},b=function(J){return J-=J>>1&1431655765,J=(J&858993459)+(J>>2&858993459),J=J+(J>>4)&252645135,J+=J>>8,J+=J>>16,J&127},x=function(J,de){return de>>>J&i},M=function(J){return 1<<J},O=function(J,de){return b(J&de-1)},D=function(J,de,ne,je){var Ie=je;if(!J){var oe=je.length;Ie=new Array(oe);for(var Ue=0;Ue<oe;++Ue)Ie[Ue]=je[Ue]}return Ie[de]=ne,Ie},k=function(J,de,ne){var je=ne.length-1,Ie=0,oe=0,Ue=ne;if(J)Ie=oe=de;else for(Ue=new Array(je);Ie<de;)Ue[oe++]=ne[Ie++];for(++Ie;Ie<=je;)Ue[oe++]=ne[Ie++];return J&&(Ue.length=je),Ue},R=function(J,de,ne,je){var Ie=je.length;if(J){for(var oe=Ie;oe>=de;)je[oe--]=je[oe];return je[de]=ne,je}for(var Ue=0,ze=0,it=new Array(Ie+1);Ue<de;)it[ze++]=je[Ue++];for(it[de]=ne;Ue<Ie;)it[++ze]=je[Ue++];return it},q=1,B=2,G=3,re=4,Q={__hamt_isEmpty:!0},ie=function(J){return J===Q||J&&J.__hamt_isEmpty},me=function(J,de,ne,je){return{type:q,edit:J,hash:de,key:ne,value:je,_modify:Xe}},ve=function(J,de,ne){return{type:B,edit:J,hash:de,children:ne,_modify:Pt}},ye=function(J,de,ne){return{type:G,edit:J,mask:de,children:ne,_modify:Lt}},we=function(J,de,ne){return{type:re,edit:J,size:de,children:ne,_modify:Gt}},Se=function(J){return J===Q||J.type===q||J.type===B},ge=function(J,de,ne,je,Ie){for(var oe=[],Ue=je,ze=0,it=0;Ue;++it)Ue&1&&(oe[it]=Ie[ze++]),Ue>>>=1;return oe[de]=ne,we(J,ze+1,oe)},Re=function(J,de,ne,je){for(var Ie=new Array(de-1),oe=0,Ue=0,ze=0,it=je.length;ze<it;++ze)if(ze!==ne){var wt=je[ze];wt&&!ie(wt)&&(Ie[oe++]=wt,Ue|=1<<ze)}return ye(J,Ue,Ie)},Je=function Y(J,de,ne,je,Ie,oe){if(ne===Ie)return ve(J,ne,[oe,je]);var Ue=x(de,ne),ze=x(de,Ie);return ye(J,M(Ue)|M(ze),Ue===ze?[Y(J,de+n,ne,je,Ie,oe)]:Ue<ze?[je,oe]:[oe,je])},tt=function(J,de,ne,je,Ie,oe,Ue,ze){for(var it=Ie.length,wt=0;wt<it;++wt){var $e=Ie[wt];if(ne(Ue,$e.key)){var Xt=$e.value,yr=oe(Xt);return yr===Xt?Ie:yr===d?(--ze.value,k(J,wt,Ie)):D(J,wt,me(de,je,Ue,yr),Ie)}}var zt=oe();return zt===d?Ie:(++ze.value,D(J,it,me(de,je,Ue,zt),Ie))},Et=function(J,de){return J===de.edit},Xe=function(J,de,ne,je,Ie,oe,Ue){if(de(oe,this.key)){var ze=je(this.value);return ze===this.value?this:ze===d?(--Ue.value,Q):Et(J,this)?(this.value=ze,this):me(J,Ie,oe,ze)}var it=je();return it===d?this:(++Ue.value,Je(J,ne,this.hash,this,Ie,me(J,Ie,oe,it)))},Pt=function(J,de,ne,je,Ie,oe,Ue){if(Ie===this.hash){var ze=Et(J,this),it=tt(ze,J,de,this.hash,this.children,je,oe,Ue);return it===this.children?this:it.length>1?ve(J,this.hash,it):it[0]}var wt=je();return wt===d?this:(++Ue.value,Je(J,ne,this.hash,this,Ie,me(J,Ie,oe,wt)))},Lt=function(J,de,ne,je,Ie,oe,Ue){var ze=this.mask,it=this.children,wt=x(ne,Ie),$e=M(wt),Xt=O(ze,$e),yr=ze&$e,zt=yr?it[Xt]:Q,Ke=zt._modify(J,de,ne+n,je,Ie,oe,Ue);if(zt===Ke)return this;var Tn=Et(J,this),rn=ze,Gn=void 0;if(yr&&ie(Ke)){if(rn&=~$e,!rn)return Q;if(it.length<=2&&Se(it[Xt^1]))return it[Xt^1];Gn=k(Tn,Xt,it)}else if(!yr&&!ie(Ke)){if(it.length>=a)return ge(J,wt,Ke,ze,it);rn|=$e,Gn=R(Tn,Xt,Ke,it)}else Gn=D(Tn,Xt,Ke,it);return Tn?(this.mask=rn,this.children=Gn,this):ye(J,rn,Gn)},Gt=function(J,de,ne,je,Ie,oe,Ue){var ze=this.size,it=this.children,wt=x(ne,Ie),$e=it[wt],Xt=($e||Q)._modify(J,de,ne+n,je,Ie,oe,Ue);if($e===Xt)return this;var yr=Et(J,this),zt=void 0;if(ie($e)&&!ie(Xt))++ze,zt=D(yr,wt,Xt,it);else if(!ie($e)&&ie(Xt)){if(--ze,ze<=u)return Re(J,ze,wt,it);zt=D(yr,wt,Q,it)}else zt=D(yr,wt,Xt,it);return yr?(this.size=ze,this.children=zt,this):we(J,ze,zt)};Q._modify=function(Y,J,de,ne,je,Ie,oe){var Ue=ne();return Ue===d?Q:(++oe.value,me(Y,je,Ie,Ue))};function nt(Y,J,de,ne,je){this._editable=Y,this._edit=J,this._config=de,this._root=ne,this._size=je}nt.prototype.setTree=function(Y,J){return this._editable?(this._root=Y,this._size=J,this):Y===this._root?this:new nt(this._editable,this._edit,this._config,Y,J)};var ct=r.tryGetHash=function(Y,J,de,ne){for(var je=ne._root,Ie=0,oe=ne._config.keyEq;;)switch(je.type){case q:return oe(de,je.key)?je.value:Y;case B:{if(J===je.hash)for(var Ue=je.children,ze=0,it=Ue.length;ze<it;++ze){var wt=Ue[ze];if(oe(de,wt.key))return wt.value}return Y}case G:{var $e=x(Ie,J),Xt=M($e);if(je.mask&Xt){je=je.children[O(je.mask,Xt)],Ie+=n;break}return Y}case re:{if(je=je.children[x(Ie,J)],je){Ie+=n;break}return Y}default:return Y}};nt.prototype.tryGetHash=function(Y,J,de){return ct(Y,J,de,this)};var _t=r.tryGet=function(Y,J,de){return ct(Y,de._config.hash(J),J,de)};nt.prototype.tryGet=function(Y,J){return _t(Y,J,this)};var We=r.getHash=function(Y,J,de){return ct(void 0,Y,J,de)};nt.prototype.getHash=function(Y,J){return We(Y,J,this)};var De=r.get=function(Y,J){return ct(void 0,J._config.hash(Y),Y,J)};nt.prototype.get=function(Y,J){return _t(J,Y,this)};var Qe=r.has=function(Y,J,de){return ct(d,Y,J,de)!==d};nt.prototype.hasHash=function(Y,J){return Qe(Y,J,this)};var Ge=r.has=function(Y,J){return Qe(J._config.hash(Y),Y,J)};nt.prototype.has=function(Y){return Ge(Y,this)};var st=function(J,de){return J===de};r.make=function(Y){return new nt(0,0,{keyEq:Y&&Y.keyEq||st,hash:Y&&Y.hash||v},Q,0)},r.empty=r.make();var pt=r.isEmpty=function(Y){return Y&&!!ie(Y._root)};nt.prototype.isEmpty=function(){return pt(this)};var Rt=r.modifyHash=function(Y,J,de,ne){var je={value:ne._size},Ie=ne._root._modify(ne._editable?ne._edit:NaN,ne._config.keyEq,0,Y,J,de,je);return ne.setTree(Ie,je.value)};nt.prototype.modifyHash=function(Y,J,de){return Rt(de,Y,J,this)};var St=r.modify=function(Y,J,de){return Rt(Y,de._config.hash(J),J,de)};nt.prototype.modify=function(Y,J){return St(J,Y,this)};var Ot=r.setHash=function(Y,J,de,ne){return Rt(h(de),Y,J,ne)};nt.prototype.setHash=function(Y,J,de){return Ot(Y,J,de,this)};var sr=r.set=function(Y,J,de){return Ot(de._config.hash(Y),Y,J,de)};nt.prototype.set=function(Y,J){return sr(Y,J,this)};var Ft=h(d),Jt=r.removeHash=function(Y,J,de){return Rt(Ft,Y,J,de)};nt.prototype.removeHash=nt.prototype.deleteHash=function(Y,J){return Jt(Y,J,this)};var dr=r.remove=function(Y,J){return Jt(J._config.hash(Y),Y,J)};nt.prototype.remove=nt.prototype.delete=function(Y){return dr(Y,this)};var Er=r.beginMutation=function(Y){return new nt(Y._editable+1,Y._edit+1,Y._config,Y._root,Y._size)};nt.prototype.beginMutation=function(){return Er(this)};var Cr=r.endMutation=function(Y){return Y._editable=Y._editable&&Y._editable-1,Y};nt.prototype.endMutation=function(){return Cr(this)};var Tr=r.mutate=function(Y,J){var de=Er(J);return Y(de),Cr(de)};nt.prototype.mutate=function(Y){return Tr(Y,this)};var qr=function(J){return J&&Ce(J[0],J[1],J[2],J[3],J[4])},Ce=function(J,de,ne,je,Ie){for(;ne<J;){var oe=de[ne++];if(oe&&!ie(oe))return Ze(oe,je,[J,de,ne,je,Ie])}return qr(Ie)},Ze=function(J,de,ne){switch(J.type){case q:return{value:de(J),rest:ne};case B:case re:case G:var je=J.children;return Ce(je.length,je,0,de,ne);default:return qr(ne)}},et={done:!0};function qt(Y){this.v=Y}qt.prototype.next=function(){if(!this.v)return et;var Y=this.v;return this.v=qr(Y.rest),Y},qt.prototype[Symbol.iterator]=function(){return this};var Bt=function(J,de){return new qt(Ze(J._root,de))},jt=function(J){return[J.key,J.value]},$t=r.entries=function(Y){return Bt(Y,jt)};nt.prototype.entries=nt.prototype[Symbol.iterator]=function(){return $t(this)};var an=function(J){return J.key},gn=r.keys=function(Y){return Bt(Y,an)};nt.prototype.keys=function(){return gn(this)};var Rn=function(J){return J.value},wa=r.values=nt.prototype.values=function(Y){return Bt(Y,Rn)};nt.prototype.values=function(){return wa(this)};var Ye=r.fold=function(Y,J,de){var ne=de._root;if(ne.type===q)return Y(J,ne.value,ne.key);for(var je=[ne.children],Ie=void 0;Ie=je.pop();)for(var oe=0,Ue=Ie.length;oe<Ue;){var ze=Ie[oe++];ze&&ze.type&&(ze.type===q?J=Y(J,ze.value,ze.key):je.push(ze.children))}return J};nt.prototype.fold=function(Y,J){return Ye(Y,J,this)};var le=r.forEach=function(Y,J){return Ye(function(de,ne,je){return Y(ne,je,J)},null,J)};nt.prototype.forEach=function(Y){return le(Y,this)};var ue=r.count=function(Y){return Y._size};nt.prototype.count=function(){return ue(this)},Object.defineProperty(nt.prototype,"size",{get:nt.prototype.count}),e.exports?e.exports=r:(void 0).hamt=r}),ite=class{constructor(t){No(this,"_map",void 0),this._map=new Map(t==null?void 0:t.entries())}keys(){return this._map.keys()}entries(){return this._map.entries()}get(t){return this._map.get(t)}has(t){return this._map.has(t)}set(t,r){return this._map.set(t,r),this}delete(t){return this._map.delete(t),this}clone(){return Cte(this)}toMap(){return new Map(this._map)}},ate=class e{constructor(t){if(No(this,"_hamt",Lgr.empty.beginMutation()),t instanceof e){let r=t._hamt.endMutation();t._hamt=r.beginMutation(),this._hamt=r.beginMutation()}else if(t)for(let[r,n]of t.entries())this._hamt.set(r,n)}keys(){return this._hamt.keys()}entries(){return this._hamt.entries()}get(t){return this._hamt.get(t)}has(t){return this._hamt.has(t)}set(t,r){return this._hamt.set(t,r),this}delete(t){return this._hamt.delete(t),this}clone(){return Cte(this)}toMap(){return new Map(this._hamt)}};function Cte(e){return bi("recoil_hamt_2020")?new ate(e):new ite(e)}var kgr={persistentMap:Cte},Rgr=kgr.persistentMap,jgr=Object.freeze({__proto__:null,persistentMap:Rgr}),{graph:qgr}=DA,{persistentMap:Fze}=jgr,zgr=0,mFe=()=>zgr++;function gFe(){let e=mFe();return{version:e,stateID:e,transactionMetadata:{},dirtyAtoms:new Set,atomValues:Fze(),nonvalidatedAtoms:Fze()}}function Fgr(){let e=gFe();return{currentTree:e,nextTree:null,previousTree:null,commitDepth:0,knownAtoms:new Set,knownSelectors:new Set,transactionSubscriptions:new Map,nodeTransactionSubscriptions:new Map,nodeToComponentSubscriptions:new Map,queuedComponentCallbacks_DEPRECATED:[],suspendedComponentResolvers:new Set,graphsByVersion:new Map().set(e.version,qgr()),versionsUsedByComponent:new Map,retention:{referenceCounts:new Map,nodesRetainedByZone:new Map,retainablesToCheckForRelease:new Set},nodeCleanupFunctions:new Map}}var vFe={makeEmptyTreeState:gFe,makeEmptyStoreState:Fgr,getNextTreeStateVersion:mFe};function Ugr(...e){let t=new Set;for(let r of e)for(let n of r)t.add(n);return t}var Bgr=Ugr;function Vgr(e,t,r){let n=e.entries(),o=n.next();for(;!o.done;){let i=o.value;if(t.call(r,i[1],i[0],e))return!0;o=n.next()}return!1}var Ggr=Vgr,{cleanUpNode:Hgr}=LE,{deleteNodeConfigIfPossible:Wgr,getNode:yFe}=Yp,{RetentionZone:_Fe}=wR,bFe=new Set;function xFe(e,t){let r=e.getState(),n=r.currentTree;if(r.nextTree){Ih("releaseNodesNowOnCurrentTree should only be called at the end of a batch");return}let o=new Set;for(let a of t)if(a instanceof _Fe)for(let u of Kgr(r,a))o.add(u);else o.add(a);let i=$gr(e,o);for(let a of i)Ygr(e,n,a)}function $gr(e,t){let r=e.getState(),n=r.currentTree,o=e.getGraph(n.version),i=new Set,a=new Set;return u(t),i;function u(d){let h=new Set,v=Zgr(e,n,d,i,a);for(let O of v){var b;if(yFe(O).retainedBy==="recoilRoot"){a.add(O);continue}if(((b=r.retention.referenceCounts.get(O))!==null&&b!==void 0?b:0)>0){a.add(O);continue}if(wFe(O).some(k=>r.retention.referenceCounts.get(k))){a.add(O);continue}let D=o.nodeToNodeSubscriptions.get(O);if(D&&Ggr(D,k=>a.has(k))){a.add(O);continue}i.add(O),h.add(O)}let x=new Set;for(let O of h)for(let D of(M=o.nodeDeps.get(O))!==null&&M!==void 0?M:bFe){var M;i.has(D)||x.add(D)}x.size&&u(x)}}function Zgr(e,t,r,n,o){let i=e.getGraph(t.version),a=[],u=new Set;for(;r.size>0;)d(ni(r.values().next().value));return a;function d(h){if(n.has(h)||o.has(h)){r.delete(h);return}if(u.has(h))return;let v=i.nodeToNodeSubscriptions.get(h);if(v)for(let b of v)d(b);u.add(h),r.delete(h),a.push(h)}}function Ygr(e,t,r){if(!bi("recoil_memory_managament_2020"))return;Hgr(e,r);let n=e.getState();n.knownAtoms.delete(r),n.knownSelectors.delete(r),n.nodeTransactionSubscriptions.delete(r),n.retention.referenceCounts.delete(r);let o=wFe(r);for(let d of o){var i;(i=n.retention.nodesRetainedByZone.get(d))===null||i===void 0||i.delete(r)}t.atomValues.delete(r),t.dirtyAtoms.delete(r),t.nonvalidatedAtoms.delete(r);let a=n.graphsByVersion.get(t.version);if(a){let d=a.nodeDeps.get(r);if(d!==void 0){a.nodeDeps.delete(r);for(let h of d){var u;(u=a.nodeToNodeSubscriptions.get(h))===null||u===void 0||u.delete(r)}}a.nodeToNodeSubscriptions.delete(r)}Wgr(r)}function Kgr(e,t){var r;return(r=e.retention.nodesRetainedByZone.get(t))!==null&&r!==void 0?r:bFe}function wFe(e){let t=yFe(e).retainedBy;return t===void 0||t==="components"||t==="recoilRoot"?[]:t instanceof _Fe?[t]:t}function Xgr(e,t){let r=e.getState();r.nextTree?r.retention.retainablesToCheckForRelease.add(t):xFe(e,new Set([t]))}function Qgr(e,t,r){var n;if(!bi("recoil_memory_managament_2020"))return;let o=e.getState().retention.referenceCounts,i=((n=o.get(t))!==null&&n!==void 0?n:0)+r;i===0?EFe(e,t):o.set(t,i)}function EFe(e,t){if(!bi("recoil_memory_managament_2020"))return;e.getState().retention.referenceCounts.delete(t),Xgr(e,t)}function Jgr(e){if(!bi("recoil_memory_managament_2020"))return;let t=e.getState();xFe(e,t.retention.retainablesToCheckForRelease),t.retention.retainablesToCheckForRelease.clear()}function evr(e){return e===void 0?"recoilRoot":e}var LA={updateRetainCount:Qgr,updateRetainCountToZero:EFe,releaseScheduledRetainablesNow:Jgr,retainedByOptionWithDefault:evr};function*tvr(e){for(let t of e)for(let r of t)yield r}var rvr=tvr,nvr=typeof window=="undefined",ovr=typeof navigator!="undefined"&&navigator.product==="ReactNative",Ate={isSSR:nvr,isReactNative:ovr},{isSSR:ivr}=Ate,{batchUpdates:ste}=Mte,{initializeNodeIfNewToStore:avr,peekNodeInfo:svr}=LE,{graph:lvr}=DA,{DEFAULT_VALUE:uvr,recoilValues:Uze,recoilValuesForKeys:Bze}=Yp,{AbstractRecoilValue:cvr,getRecoilValueAsLoadable:pvr,setRecoilValue:Vze,setUnvalidatedRecoilValue:fvr}=__,{updateRetainCount:sR}=LA,{getNextTreeStateVersion:dvr,makeEmptyStoreState:hvr}=vFe;var NE=class{constructor(t){No(this,"_store",void 0),No(this,"_refCount",0),No(this,"getLoadable",r=>(this.checkRefCount_INTERNAL(),pvr(this._store,r))),No(this,"getPromise",r=>(this.checkRefCount_INTERNAL(),this.getLoadable(r).toPromise())),No(this,"getNodes_UNSTABLE",r=>{if(this.checkRefCount_INTERNAL(),(r==null?void 0:r.isModified)===!0){if((r==null?void 0:r.isInitialized)===!1)return[];let i=this._store.getState().currentTree;return Bze(i.dirtyAtoms)}let n=this._store.getState().knownAtoms,o=this._store.getState().knownSelectors;return(r==null?void 0:r.isInitialized)==null?Uze.values():r.isInitialized===!0?Bze(rvr([this._store.getState().knownAtoms,this._store.getState().knownSelectors])):iFe(Uze.values(),({key:i})=>!n.has(i)&&!o.has(i))}),No(this,"getInfo_UNSTABLE",({key:r})=>(this.checkRefCount_INTERNAL(),svr(this._store,this._store.getState().currentTree,r))),No(this,"map",r=>{this.checkRefCount_INTERNAL();let n=new OA(this,ste);return r(n),lte(n.getStore_INTERNAL())}),No(this,"asyncMap",r=>gt(this,null,function*(){this.checkRefCount_INTERNAL();let n=new OA(this,ste);return yield r(n),lte(n.getStore_INTERNAL())})),this._store={getState:()=>t,replaceState:r=>{t.currentTree=r(t.currentTree)},getGraph:r=>{let n=t.graphsByVersion;if(n.has(r))return ni(n.get(r));let o=lvr();return n.set(r,o),o},subscribeToTransactions:()=>({release:()=>{}}),addTransactionMetadata:()=>{throw new Error("Cannot subscribe to Snapshots")}};for(let r of this._store.getState().nodeCleanupFunctions.keys())avr(this._store,t.currentTree,r,"get"),sR(this._store,r,1);this.retain(),this.autorelease_INTERNAL()}retain(){if(!bi("recoil_memory_managament_2020"))return()=>{};this._refCount++;let t=!1;return()=>{t||(t=!0,this.release_INTERNAL())}}autorelease_INTERNAL(){bi("recoil_memory_managament_2020")&&(ivr||window.setTimeout(()=>this.release_INTERNAL(),0))}release_INTERNAL(){bi("recoil_memory_managament_2020")&&(this._refCount--,this._refCount)}checkRefCount_INTERNAL(){bi("recoil_memory_managament_2020")&&this._refCount<=0}getStore_INTERNAL(){return this.checkRefCount_INTERNAL(),this._store}getID(){return this.checkRefCount_INTERNAL(),this.getID_INTERNAL()}getID_INTERNAL(){return this.checkRefCount_INTERNAL(),this._store.getState().currentTree.stateID}};function SFe(e,t,r=!1){let n=e.getState(),o=r?dvr():t.version;return{currentTree:r?{version:o,stateID:o,transactionMetadata:Te({},t.transactionMetadata),dirtyAtoms:new Set(t.dirtyAtoms),atomValues:t.atomValues.clone(),nonvalidatedAtoms:t.nonvalidatedAtoms.clone()}:t,commitDepth:0,nextTree:null,previousTree:null,knownAtoms:new Set(n.knownAtoms),knownSelectors:new Set(n.knownSelectors),transactionSubscriptions:new Map,nodeTransactionSubscriptions:new Map,nodeToComponentSubscriptions:new Map,queuedComponentCallbacks_DEPRECATED:[],suspendedComponentResolvers:new Set,graphsByVersion:new Map().set(o,e.getGraph(t.version)),versionsUsedByComponent:new Map,retention:{referenceCounts:new Map,nodesRetainedByZone:new Map,retainablesToCheckForRelease:new Set},nodeCleanupFunctions:new Map}}function mvr(e){let t=new NE(hvr());return e!=null?t.map(e):t}function lte(e,t="current"){let r=e.getState(),n=t==="current"?r.currentTree:ni(r.previousTree);return new NE(SFe(e,n))}var OA=class extends NE{constructor(t,r){super(SFe(t.getStore_INTERNAL(),t.getStore_INTERNAL().getState().currentTree,!0)),No(this,"_batch",void 0),No(this,"set",(n,o)=>{this.checkRefCount_INTERNAL();let i=this.getStore_INTERNAL();this._batch(()=>{sR(i,n.key,1),Vze(this.getStore_INTERNAL(),n,o)})}),No(this,"reset",n=>{this.checkRefCount_INTERNAL();let o=this.getStore_INTERNAL();this._batch(()=>{sR(o,n.key,1),Vze(this.getStore_INTERNAL(),n,uvr)})}),No(this,"setUnvalidatedAtomValues_DEPRECATED",n=>{this.checkRefCount_INTERNAL();let o=this.getStore_INTERNAL();ste(()=>{for(let[i,a]of n.entries())sR(o,i,1),fvr(o,new cvr(i),a)})}),this._batch=r}},TR={Snapshot:NE,MutableSnapshot:OA,freshSnapshot:mvr,cloneSnapshot:lte},gvr=TR.Snapshot,vvr=TR.MutableSnapshot,yvr=TR.freshSnapshot,_vr=TR.cloneSnapshot,IR=Object.freeze({__proto__:null,Snapshot:gvr,MutableSnapshot:vvr,freshSnapshot:yvr,cloneSnapshot:_vr}),{getNextTreeStateVersion:bvr,makeEmptyStoreState:TFe}=vFe,{cleanUpNode:xvr,getDownstreamNodes:wvr,setNodeValue:Evr,setUnvalidatedAtomValue_DEPRECATED:Svr}=LE,{graph:Tvr}=DA,{cloneGraph:Ivr}=DA,{applyAtomValueWrites:Mvr}=__,{releaseScheduledRetainablesNow:IFe}=LA,{freshSnapshot:Cvr}=IR,{useCallback:Avr,useContext:MFe,useEffect:ute,useMemo:Ovr,useRef:Jee,useState:Pvr}=eu.default;function xA(){throw new Error("This component must be used inside a <RecoilRoot> component.")}var CFe=Object.freeze({getState:xA,replaceState:xA,getGraph:xA,subscribeToTransactions:xA,addTransactionMetadata:xA}),cte=!1;function Gze(e){if(cte)throw new Error("An atom update was triggered within the execution of a state updater function. State updater functions provided to Recoil must be pure functions.");let t=e.getState();if(t.nextTree===null){bi("recoil_memory_managament_2020")&&bi("recoil_release_on_cascading_update_killswitch_2021")&&t.commitDepth>0&&IFe(e);let r=t.currentTree.version,n=bvr();t.nextTree=Mt(Te({},t.currentTree),{version:n,stateID:n,dirtyAtoms:new Set,transactionMetadata:{}}),t.graphsByVersion.set(n,Ivr(ni(t.graphsByVersion.get(r))))}}var AFe=eu.default.createContext({current:CFe}),Ote=()=>MFe(AFe),OFe=eu.default.createContext(null);function Nvr(){let e=MFe(OFe);return e==null&&wte("Attempted to use a Recoil hook outside of a <RecoilRoot>. <RecoilRoot> must be an ancestor of any component that uses Recoil hooks."),e}function Pte(e,t,r){let n=wvr(e,r,r.dirtyAtoms);for(let o of n){let i=t.nodeToComponentSubscriptions.get(o);if(i)for(let[a,[u,d]]of i)d(r)}}function PFe(e){let t=e.getState(),r=t.currentTree,n=r.dirtyAtoms;if(n.size){for(let[o,i]of t.nodeTransactionSubscriptions)if(n.has(o))for(let[a,u]of i)u(e);for(let[o,i]of t.transactionSubscriptions)i(e);(!bi("recoil_early_rendering_2021")||t.suspendedComponentResolvers.size)&&(Pte(e,t,r),t.suspendedComponentResolvers.forEach(o=>o()),t.suspendedComponentResolvers.clear())}t.queuedComponentCallbacks_DEPRECATED.forEach(o=>o(r)),t.queuedComponentCallbacks_DEPRECATED.splice(0,t.queuedComponentCallbacks_DEPRECATED.length)}function Dvr(e){let t=e.current.getState();t.commitDepth++;try{let{nextTree:r}=t;if(r===null)return;t.previousTree=t.currentTree,t.currentTree=r,t.nextTree=null,PFe(e.current),t.previousTree!=null?t.graphsByVersion.delete(t.previousTree.version):Ih("Ended batch with no previous state, which is unexpected","recoil"),t.previousTree=null,bi("recoil_memory_managament_2020")&&IFe(e.current)}finally{t.commitDepth--}}function Lvr({setNotifyBatcherOfChange:e}){let t=Ote(),[r,n]=Pvr([]);return e(()=>n({})),ute(()=>{Tgr.enqueueExecution("Batcher",()=>{Dvr(t)})}),ute(()=>()=>{e(()=>{})},[e]),null}function kvr(e,t){let r=TFe();return t({set:(n,o)=>{let i=r.currentTree,a=Evr(e,i,n.key,o),u=new Set(a.keys()),d=i.nonvalidatedAtoms.clone();for(let h of u)d.delete(h);r.currentTree=Mt(Te({},i),{dirtyAtoms:Bgr(i.dirtyAtoms,u),atomValues:Mvr(i.atomValues,a),nonvalidatedAtoms:d})},setUnvalidatedAtomValues:n=>{n.forEach((o,i)=>{r.currentTree=Svr(r.currentTree,i,o)})}}),r}function Rvr(e){return Cvr().map(e).getStore_INTERNAL().getState()}var Hze=0;function jvr({initializeState_DEPRECATED:e,initializeState:t,store_INTERNAL:r,children:n}){var o;let i,a=k=>{let R=i.current.graphsByVersion;if(R.has(k))return ni(R.get(k));let q=Tvr();return R.set(k,q),q},u=(k,R)=>{if(R==null){let{transactionSubscriptions:q}=O.current.getState(),B=Hze++;return q.set(B,k),{release:()=>{q.delete(B)}}}else{let{nodeTransactionSubscriptions:q}=O.current.getState();q.has(R)||q.set(R,new Map);let B=Hze++;return ni(q.get(R)).set(B,k),{release:()=>{let G=q.get(R);G&&(G.delete(B),G.size===0&&q.delete(R))}}}},d=k=>{Gze(O.current);for(let R of Object.keys(k))ni(O.current.getState().nextTree).transactionMetadata[R]=k[R]},h=k=>{let R=O.current.getState();Gze(O.current);let q=ni(R.nextTree),B;try{cte=!0,B=k(q)}finally{cte=!1}B!==q&&(R.nextTree=B,bi("recoil_early_rendering_2021")&&Pte(M,R,B),ni(v.current)())},v=Jee(null),b=Avr(k=>{v.current=k},[v]),x=(o=eu.default.createMutableSource)!==null&&o!==void 0?o:eu.default.unstable_createMutableSource,M=r!=null?r:{getState:()=>i.current,replaceState:h,getGraph:a,subscribeToTransactions:u,addTransactionMetadata:d},O=Jee(M);i=Jee(e!=null?kvr(M,e):t!=null?Rvr(t):TFe());let D=Ovr(()=>x?x(i,()=>i.current.currentTree.version):null,[x,i]);return ute(()=>()=>{for(let k of O.current.getState().knownAtoms)xvr(O.current,k)},[]),eu.default.createElement(AFe.Provider,{value:O},eu.default.createElement(OFe.Provider,{value:D},eu.default.createElement(Lvr,{setNotifyBatcherOfChange:b}),n))}function qvr(e){let o=e,{override:t}=o,r=xn(o,["override"]),n=Ote();return t===!1&&n.current!==CFe?e.children:eu.default.createElement(jvr,r)}var MR={useStoreRef:Ote,useRecoilMutableSource:Nvr,RecoilRoot:qvr,notifyComponents_FOR_TESTING:Pte,sendEndOfBatchNotifications_FOR_TESTING:PFe},{loadableWithValue:zvr}=NA,{DEFAULT_VALUE:Fvr,getNode:Uvr}=Yp,{copyTreeState:Bvr,getRecoilValueAsLoadable:Vvr,invalidateDownstreams:Gvr,writeLoadableToTreeState:Hvr}=__;function Wze(e){return Uvr(e.key).nodeType==="atom"}var pte=class{constructor(t,r){No(this,"_store",void 0),No(this,"_treeState",void 0),No(this,"_changes",void 0),No(this,"get",n=>{if(this._changes.has(n.key))return this._changes.get(n.key);if(!Wze(n))throw new Error("Reading selectors within atomicUpdate is not supported");let o=Vvr(this._store,n,this._treeState);if(o.state==="hasValue")return o.contents;throw o.state==="hasError"?o.contents:new Error(`Expected Recoil atom ${n.key} to have a value, but it is in a loading state.`)}),No(this,"set",(n,o)=>{if(!Wze(n))throw new Error("Setting selectors within atomicUpdate is not supported");if(typeof o=="function"){let i=this.get(n);this._changes.set(n.key,o(i))}else this._changes.set(n.key,o)}),No(this,"reset",n=>{this.set(n,Fvr)}),this._store=t,this._treeState=r,this._changes=new Map}newTreeState_INTERNAL(){if(this._changes.size===0)return this._treeState;let t=Bvr(this._treeState);for(let[r,n]of this._changes)Hvr(t,r,zvr(n));return Gvr(this._store,t),t}};function Wvr(e){return t=>{e.replaceState(r=>{let n=new pte(e,r);return t(n),n.newTreeState_INTERNAL()})}}var $vr={atomicUpdater:Wvr},Zvr=$vr.atomicUpdater,Yvr=Object.freeze({__proto__:null,atomicUpdater:Zvr});function Kvr(e,t){let r=new Map;for(let[n,o]of e)t(o,n)&&r.set(n,o);return r}var Xvr=Kvr;function Qvr(e,t){let r=new Set;for(let n of e)t(n)&&r.add(n);return r}var Jvr=Qvr;function eyr(e,t){if(!e)throw new Error(t)}var tyr=eyr,vR=tyr;function ryr(...e){let t=new Map;for(let r=0;r<e.length;r++){let n=e[r].keys(),o;for(;!(o=n.next()).done;)t.set(o.value,e[r].get(o.value))}return t}var nyr=ryr;function oyr(e,t){if(e===t)return!0;if(e.length!==t.length)return!1;for(let r=0,n=e.length;r<n;r++)if(e[r]!==t[r])return!1;return!0}var iyr=oyr;var{useRef:ayr}=eu.default;function syr(){let e=ayr();if(0&&bi("recoil_infer_component_names"))var t;return"<component name not available>"}var Nte=syr,{atomicUpdater:NFe}=Yvr,{batchUpdates:Dte}=Mte,{DEFAULT_VALUE:CR,getNode:DFe,nodes:lyr}=Yp,{useRecoilMutableSource:uyr,useStoreRef:np}=MR,{isRecoilValue:Msn}=My,{AbstractRecoilValue:Lte,getRecoilValueAsLoadable:CA,setRecoilValue:DE,setRecoilValueLoadable:cyr,setUnvalidatedRecoilValue:pyr,subscribeToRecoilValue:kte}=__,{updateRetainCount:wA}=LA,{RetentionZone:fyr}=wR,{Snapshot:Csn,cloneSnapshot:PA}=IR,{setByAddingToSet:dyr}=oFe,{isSSR:yR}=Ate,{mutableSourceExists:hyr,useMutableSource:myr}=nFe,{useCallback:ud,useEffect:ug,useMemo:LFe,useRef:Iy,useState:Rte}=eu.default,kFe=12e4;function RFe(e,t,r){if(e.state==="hasValue")return e.contents;throw e.state==="loading"?new Promise(o=>{r.current.getState().suspendedComponentResolvers.add(o)}):e.state==="hasError"?e.contents:new Error(`Invalid value of loadable atom "${t.key}"`)}function gyr(){let e=np(),[t,r]=Rte([]),n=Iy(new Set);n.current=new Set;let o=Iy(new Set),i=Iy(new Map),a=ud(d=>{let h=i.current.get(d);h&&(h.release(),i.current.delete(d))},[i]),u=Nte();return ug(()=>{let d=e.current;function h(v,b){i.current.has(b)&&r([])}mR(n.current,o.current).forEach(v=>{if(i.current.has(v)){wte(`Double subscription to RecoilValue "${v}"`);return}let b=kte(d,new Lte(v),M=>{h(M,v)},u);i.current.set(v,b),d.getState().nextTree?d.getState().queuedComponentCallbacks_DEPRECATED.push(()=>{h(d.getState(),v)}):h(d.getState(),v)}),mR(o.current,n.current).forEach(v=>{a(v)}),o.current=n.current}),ug(()=>{let d=i.current;return()=>d.forEach((h,v)=>a(v))},[a]),LFe(()=>{function d(O){return D=>{DE(e.current,O,D)}}function h(O){return()=>DE(e.current,O,CR)}function v(O){var D;n.current.has(O.key)||(n.current=dyr(n.current,O.key));let k=e.current.getState();return CA(e.current,O,bi("recoil_early_rendering_2021")&&(D=k.nextTree)!==null&&D!==void 0?D:k.currentTree)}function b(O){let D=v(O);return RFe(D,O,e)}function x(O){return[b(O),d(O)]}function M(O){return[v(O),d(O)]}return{getRecoilValue:b,getRecoilValueLoadable:v,getRecoilState:x,getRecoilStateLoadable:M,getSetRecoilState:d,getResetRecoilState:h}},[n,e])}var vyr={current:0};function yyr(e){let t=np(),r=ud(()=>{var h;let v=t.current,b=v.getState(),x=bi("recoil_early_rendering_2021")&&(h=b.nextTree)!==null&&h!==void 0?h:b.currentTree;return CA(v,e,x)},[t,e]),n=ud(()=>r(),[r]),o=Nte(),i=ud((h,v)=>{let b=t.current;return kte(b,e,()=>{if(!bi("recoil_suppress_rerender_in_callback"))return v();let M=r();d.current.is(M)||v(),d.current=M},o).release},[t,e,o,r]),a=uyr(),u=myr(a,n,i),d=Iy(u);return ug(()=>{d.current=u}),u}function _yr(e){let t=np(),[r,n]=Rte([]),o=Nte();ug(()=>{let u=t.current,d=u.getState(),h=kte(u,e,b=>{var x;if(!bi("recoil_suppress_rerender_in_callback"))return n([]);let M=CA(u,e,u.getState().currentTree);!((x=a.current)===null||x===void 0)&&x.is(M)||n(M),a.current=M},o);if(d.nextTree)u.getState().queuedComponentCallbacks_DEPRECATED.push(()=>{a.current=null,n([])});else{var v;if(!bi("recoil_suppress_rerender_in_callback"))return n([]);let b=CA(u,e,u.getState().currentTree);!((v=a.current)===null||v===void 0)&&v.is(b)||n(b),a.current=b}return h.release},[o,e,t]);let i=CA(t.current,e),a=Iy(i);return ug(()=>{a.current=i}),i}function jte(e){return bi("recoil_memory_managament_2020")&&FFe(e),hyr()?yyr(e):_yr(e)}function jFe(e){let t=np(),r=jte(e);return RFe(r,e,t)}function qte(e){let t=np();return ud(r=>{DE(t.current,e,r)},[t,e])}function byr(e){let t=np();return ud(()=>{DE(t.current,e,CR)},[t,e])}function xyr(e){return[jFe(e),qte(e)]}function wyr(e){return[jte(e),qte(e)]}function AR(e){let t=np();ug(()=>t.current.subscribeToTransactions(e).release,[e,t])}function $ze(e){let t=e.atomValues.toMap(),r=gR(Xvr(t,(n,o)=>{let a=DFe(o).persistence_UNSTABLE;return a!=null&&a.type!=="none"&&n.state==="hasValue"}),n=>n.contents);return nyr(e.nonvalidatedAtoms.toMap(),r)}function Eyr(e){AR(ud(t=>{let r=t.getState().previousTree,n=t.getState().currentTree;r||(Ih("Transaction subscribers notified without a previous tree being present -- this is a bug in Recoil"),r=t.getState().currentTree);let o=$ze(n),i=$ze(r),a=gR(lyr,d=>{var h,v,b,x;return{persistence_UNSTABLE:{type:(h=(v=d.persistence_UNSTABLE)===null||v===void 0?void 0:v.type)!==null&&h!==void 0?h:"none",backButton:(b=(x=d.persistence_UNSTABLE)===null||x===void 0?void 0:x.backButton)!==null&&b!==void 0?b:!1}}}),u=Jvr(n.dirtyAtoms,d=>o.has(d)||i.has(d));e({atomValues:o,previousAtomValues:i,atomInfo:a,modifiedAtoms:u,transactionMetadata:Te({},n.transactionMetadata)})},[e]))}function Syr(e){AR(ud(t=>{let r=PA(t,"current"),n=PA(t,"previous");e({snapshot:r,previousSnapshot:n})},[e]))}function qFe(e){let t=Iy();return ug(()=>{t.current=e}),t.current}function Tyr(){let e=np(),[t,r]=Rte(()=>PA(e.current)),n=qFe(t),o=Iy();return ug(()=>(o.current&&!yR&&window.clearTimeout(o.current),t.retain()),[t]),AR(ud(i=>r(PA(i)),[])),n!==t&&!yR&&(o.current&&(n==null||n.release_INTERNAL(),window.clearTimeout(o.current)),t.retain(),o.current=window.setTimeout(()=>{t.release_INTERNAL(),o.current=null},kFe)),t}function zFe(){let e=np();return ud(t=>{var r;let n=e.current.getState(),o=(r=n.nextTree)!==null&&r!==void 0?r:n.currentTree,i=t.getStore_INTERNAL().getState().currentTree;Dte(()=>{let a=new Set;for(let h of[o.atomValues.keys(),i.atomValues.keys()])for(let v of h){var u,d;((u=o.atomValues.get(v))===null||u===void 0?void 0:u.contents)!==((d=i.atomValues.get(v))===null||d===void 0?void 0:d.contents)&&DFe(v).shouldRestoreFromSnapshots&&a.add(v)}a.forEach(h=>{cyr(e.current,new Lte(h),i.atomValues.has(h)?ni(i.atomValues.get(h)):CR)}),e.current.replaceState(h=>Mt(Te({},h),{stateID:t.getID_INTERNAL()}))})},[e])}function Iyr(){let e=np();return(t,r={})=>{Dte(()=>{e.current.addTransactionMetadata(r),t.forEach((n,o)=>pyr(e.current,new Lte(o),n))})}}var _R=class{},Myr=new _R;function Cyr(e,t){let r=np(),n=zFe();return ud((...o)=>{function i(v,b){DE(r.current,v,b)}function a(v){DE(r.current,v,CR)}let u=PA(r.current),d=NFe(r.current),h=Myr;return Dte(()=>{let v="useRecoilCallback expects a function that returns a function: it accepts a function of the type (RecoilInterface) => T = R and returns a callback function T => R, where RecoilInterface is an object {snapshot, set, ...} and T and R are the argument and return types of the callback you want to create.  Please see the docs at recoiljs.org for details.";if(typeof e!="function")throw new Error(v);let b=e({set:i,reset:a,snapshot:u,gotoSnapshot:n,transact_UNSTABLE:d});if(typeof b!="function")throw new Error(v);h=b(...o)}),h instanceof _R&&vR(!1),h},t!=null?[...t,r]:void 0)}function FFe(e){if(bi("recoil_memory_managament_2020"))return Ayr(e)}function Ayr(e){let r=(Array.isArray(e)?e:[e]).map(a=>a instanceof fyr?a:a.key),n=np();ug(()=>{if(!bi("recoil_memory_managament_2020"))return;let a=n.current;if(o.current&&!yR)window.clearTimeout(o.current),o.current=null;else for(let u of r)wA(a,u,1);return()=>{for(let u of r)wA(a,u,-1)}},[n,...r]);let o=Iy(),i=qFe(r);if(!yR&&(i===void 0||!iyr(i,r))){let a=n.current;for(let u of r)wA(a,u,1);if(i)for(let u of i)wA(a,u,-1);o.current&&window.clearTimeout(o.current),o.current=window.setTimeout(()=>{o.current=null;for(let u of r)wA(a,u,-1)},kFe)}}function Oyr(e,t){let r=np();return LFe(()=>(...n)=>{NFe(r.current)(i=>{e(i)(...n)})},t!=null?[...t,r]:void 0)}var Pyr={recoilComponentGetRecoilValueCount_FOR_TESTING:vyr,useGotoRecoilSnapshot:zFe,useRecoilCallback:Cyr,useRecoilInterface:gyr,useRecoilSnapshot:Tyr,useRecoilState:xyr,useRecoilStateLoadable:wyr,useRecoilTransaction:Oyr,useRecoilTransactionObserver:Syr,useRecoilValue:jFe,useRecoilValueLoadable:jte,useRetain:FFe,useResetRecoilState:byr,useSetRecoilState:qte,useSetUnvalidatedAtomValues:Iyr,useTransactionObservation_DEPRECATED:Eyr,useTransactionSubscription_DEPRECATED:AR},{peekNodeInfo:Nyr}=LE,{useStoreRef:Dyr}=MR;function Lyr(){let e=Dyr();return({key:t})=>Nyr(e.current,e.current.getState().currentTree,t)}var kyr=Lyr,{RecoilRoot:Ryr,useStoreRef:jyr}=MR,{useMemo:qyr}=eu.default;function zyr(){let e=jyr().current;return qyr(()=>{function t({children:r}){return eu.default.createElement(Ryr,{store_INTERNAL:e},r)}return t},[e])}var Fyr=zyr;var{isReactNative:Asn,isSSR:Osn}=Ate;function ld(e,t,r){if(typeof e=="string"&&!e.includes("\"")&&!e.includes("\\"))return`"${e}"`;switch(typeof e){case"undefined":return"";case"boolean":return e?"true":"false";case"number":case"symbol":return String(e);case"string":return JSON.stringify(e);case"function":if((t==null?void 0:t.allowFunctions)!==!0)throw new Error("Attempt to serialize function in a Recoil cache key");return`__FUNCTION(${e.name})__`}if(e===null)return"null";if(typeof e!="object"){var n;return(n=JSON.stringify(e))!==null&&n!==void 0?n:""}if(Wa(e))return"__PROMISE__";if(Array.isArray(e))return`[${e.map((o,i)=>ld(o,t,i.toString()))}]`;if(typeof e.toJSON=="function")return ld(e.toJSON(r),t,r);if(e instanceof Map){let o={};for(let[i,a]of e)o[typeof i=="string"?i:ld(i,t)]=a;return ld(o,t,r)}return e instanceof Set?ld(Array.from(e).sort((o,i)=>ld(o,t).localeCompare(ld(i,t))),t,r):Symbol!==void 0&&e[Symbol.iterator]!=null&&typeof e[Symbol.iterator]=="function"?ld(Array.from(e),t,r):`{${Object.keys(e).filter(o=>e[o]!==void 0).sort().map(o=>`${ld(o,t)}:${ld(e[o],t,o)}`).join(",")}}`}function Uyr(e,t={allowFunctions:!1}){return ld(e,t)}var OR=Uyr,fte=class{constructor(t){var r,n,o;No(this,"_numLeafs",void 0),No(this,"_root",void 0),No(this,"_onHit",void 0),No(this,"_onSet",void 0),No(this,"_mapNodeValue",void 0),this._numLeafs=0,this._root=null,this._onHit=(r=t==null?void 0:t.onHit)!==null&&r!==void 0?r:()=>{},this._onSet=(n=t==null?void 0:t.onSet)!==null&&n!==void 0?n:()=>{},this._mapNodeValue=(o=t==null?void 0:t.mapNodeValue)!==null&&o!==void 0?o:i=>i}size(){return this._numLeafs}root(){return this._root}get(t,r){var n;return(n=this.getLeafNode(t,r))===null||n===void 0?void 0:n.value}getLeafNode(t,r){return UFe(this.root(),n=>this._mapNodeValue(t(n)),{onNodeVisit:n=>{r==null||r.onNodeVisit(n),n.type==="leaf"&&this._onHit(n)}})}set(t,r,n){let o,i=dte(this.root(),t.map(([a,u])=>[a,this._mapNodeValue(u)]),null,r,null,{onNodeVisit:a=>{n==null||n.onNodeVisit(a),a.type==="leaf"&&(o=a)}});this.root()||(this._root=i),this._numLeafs++,this._onSet(ni(o))}delete(t){if(!this.root())return!1;let r=ni(this.root());return Byr(r,t,t.parent)?t===r||r.type==="branch"&&!r.branches.size?(this._root=null,this._numLeafs=0,!0):(this._numLeafs-=VFe(t),!0):!1}clear(){this._numLeafs=0,this._root=null}},UFe=(e,t,r)=>{var n;if(e==null)return;if(r==null||(n=r.onNodeVisit)===null||n===void 0||n.call(r,e),e.type==="leaf")return e;let o=t(e.nodeKey);return UFe(e.branches.get(o),t,r)},dte=(e,t,r,n,o,i)=>{var a;let u;if(e==null){if(t.length===0)u={type:"leaf",value:n,parent:r,branchKey:o};else{let[d,...h]=t,[v,b]=d;u={type:"branch",nodeKey:v,parent:r,branches:new Map,branchKey:o},u.branches.set(b,dte(null,h,u,n,b,i))}}else if(u=e,t.length){let[d,...h]=t,[v,b]=d;e.type==="branch"&&e.nodeKey===v||vR(!1),e.branches.set(b,dte(e.branches.get(b),h,e,n,b,i))}return i==null||(a=i.onNodeVisit)===null||a===void 0||a.call(i,u),u},Byr=(e,t,r)=>r?(r.branches.delete(t.branchKey),BFe(e,r,r.parent)):e===t,BFe=(e,t,r)=>r?(t.branches.size===0&&r.branches.delete(t.branchKey),BFe(e,r,r.parent)):e===t,VFe=e=>e.type==="leaf"?1:Array.from(e.branches.values()).reduce((t,r)=>t+VFe(r),0),Vyr={TreeCache:fte},Gyr=Vyr.TreeCache,GFe=Object.freeze({__proto__:null,TreeCache:Gyr}),hte=class{constructor(t){var r;No(this,"_maxSize",void 0),No(this,"_size",void 0),No(this,"_head",void 0),No(this,"_tail",void 0),No(this,"_map",void 0),No(this,"_keyMapper",void 0),this._maxSize=t.maxSize,this._size=0,this._head=null,this._tail=null,this._map=new Map,this._keyMapper=(r=t.mapKey)!==null&&r!==void 0?r:n=>n}head(){return this._head}tail(){return this._tail}size(){return this._size}maxSize(){return this._maxSize}has(t){return this._map.has(this._keyMapper(t))}get(t){let r=this._keyMapper(t),n=this._map.get(r);if(n)return this.set(t,n.value),n.value}set(t,r){let n=this._keyMapper(t);this._map.get(n)&&this.delete(t);let i=this.head(),a={key:t,right:i,left:null,value:r};i?i.left=a:this._tail=a,this._map.set(n,a),this._head=a,this._size++,this._maybeDeleteLRU()}_maybeDeleteLRU(){this.size()>this.maxSize()&&this.deleteLru()}deleteLru(){let t=this.tail();t&&this.delete(t.key)}delete(t){let r=this._keyMapper(t);if(!this._size||!this._map.has(r))return;let n=ni(this._map.get(r)),o=n.right,i=n.left;o&&(o.left=n.left),i&&(i.right=n.right),n===this.head()&&(this._head=o),n===this.tail()&&(this._tail=i),this._map.delete(r),this._size--}clear(){this._size=0,this._head=null,this._tail=null,this._map=new Map}},Hyr={LRUCache:hte},Wyr=Hyr.LRUCache,HFe=Object.freeze({__proto__:null,LRUCache:Wyr}),{LRUCache:$yr}=HFe,{TreeCache:Zyr}=GFe;function Yyr(e,t=r=>r){let r=new $yr({maxSize:e}),n=new Zyr({mapNodeValue:t,onHit:o=>{r.set(o,!0)},onSet:o=>{let i=r.tail();r.set(o,!0),i&&n.size()>e&&n.delete(i.key)}});return n}var Zze=Yyr,{TreeCache:Kyr}=GFe,oR={equality:"reference",eviction:"keep-all",maxSize:1/0};function Xyr({equality:e=oR.equality,eviction:t=oR.eviction,maxSize:r=oR.maxSize}=oR){let n=Qyr(e);return Jyr(t,r,n)}function Qyr(e){switch(e){case"reference":return t=>t;case"value":return t=>OR(t)}throw new Error(`Unrecognized equality policy ${e}`)}function Jyr(e,t,r){switch(e){case"keep-all":return new Kyr({mapNodeValue:r});case"lru":return Zze(ni(t),r);case"most-recent":return Zze(1,r)}throw new Error(`Unrecognized eviction policy ${e}`)}var e0r=Xyr;function t0r(e){return()=>null}var r0r={startPerfBlock:t0r},{CANCELED:EA,Canceled:n0r,loadableWithError:SA,loadableWithPromise:o0r,loadableWithValue:ete}=NA,{getNodeLoadable:Yze,peekNodeLoadable:i0r,setNodeValue:a0r}=LE,{saveDependencyMapToStore:s0r}=DA,{DEFAULT_VALUE:l0r,RecoilValueNotReady:u0r,getConfigDeletionHandler:c0r,registerNode:Kze}=Yp,{isRecoilValue:p0r}=My,{AbstractRecoilValue:f0r}=My,{setRecoilValueLoadable:d0r}=__,{retainedByOptionWithDefault:h0r}=LA,{cloneSnapshot:m0r}=IR,{startPerfBlock:g0r}=r0r,TA=[],iR=new Map,v0r=(()=>{let e=0;return()=>e++})();function y0r(){return{depValuesDiscoveredSoFarDuringAsyncWork:null,latestLoadable:null,latestExecutionId:null,stateVersion:null}}function _0r(e){let{key:t,get:r,cachePolicy_UNSTABLE:n}=e,o=e.set!=null?e.set:void 0,i=e0r(n!=null?n:{equality:"reference",eviction:"keep-all"}),a=h0r(e.retainedBy_UNSTABLE),u=new Map,d=0;function h(){return!bi("recoil_memory_managament_2020")||d>0}function v(We){return u.has(We)||u.set(We,y0r()),ni(u.get(We))}function b(We){return d++,We.getState().knownSelectors.add(t),()=>{d--,We.getState().knownSelectors.delete(t),u.delete(We)}}function x(){return c0r(t)!==void 0&&!h()}function M(We,De,Qe){if(De.state==="loading"){let Ge=iR.get(Qe);Ge==null&&iR.set(Qe,Ge=new Set),Ge.add(We)}}function O(We,De){let Qe=iR.get(De);if(Qe!==void 0){for(let Ge of Qe)d0r(Ge,new f0r(t),We);iR.delete(De)}}function D(We,De,Qe){let Ge=We.getState().knownSelectors.has(Qe);if(Ge&&De.atomValues.has(Qe))return ni(De.atomValues.get(Qe));let st=Yze(We,De,Qe);return st.state!=="loading"&&Ge&&De.atomValues.set(Qe,st),st}function k(We,De,Qe,Ge,st){return De.then(pt=>{if(!h())return tt(We,st),EA;let Rt=ete(pt);return Lt(Qe,ie(Ge),Rt),B(We,Qe,new Set(Ge.keys()),st),q(We,Rt,st),{__value:pt,__key:t}}).catch(pt=>{if(!h())return tt(We,st),EA;if(Et(We,st)&&Je(Ge,We,st),Wa(pt))return R(We,pt,Qe,Ge,st);let Rt=SA(pt);throw Lt(Qe,ie(Ge),Rt),B(We,Qe,new Set(Ge.keys()),st),q(We,Rt,st),pt})}function R(We,De,Qe,Ge,st){return De.then(pt=>{if(!h())return tt(We,st),EA;if(pt instanceof n0r)return Ih("Selector was released while it had dependencies"),EA;let{__key:Rt,__value:St}=pt!=null?pt:{},Ot=!0;Rt!=null&&(Qe.atomValues.set(Rt,ete(St)),Ot=!1);let sr=Q(We,Qe);if(sr&&sr.state==="hasValue")return ge(sr,We),{__value:sr.contents,__key:t};if(!Et(We,st)){var Ft;let Er=ye(Qe);if((Er==null||(Ft=Er.latestLoadable)===null||Ft===void 0?void 0:Ft.state)==="loading")return Er.latestLoadable.contents}let[Jt,dr]=re(We,Qe,st,Ot);if(Et(We,st)&&Je(dr,We,st),Xe(Jt),Jt.state!=="loading"&&(Lt(Qe,ie(dr),Jt),B(We,Qe,new Set(dr.keys()),st),q(We,Jt,st)),Jt.state==="hasError")throw Jt.contents;return Jt.state==="hasValue"?{__value:Jt.contents,__key:t}:Jt.contents}).catch(pt=>{if(!h())return tt(We,st),EA;let Rt=SA(pt);throw Lt(Qe,ie(Ge),SA(pt)),B(We,Qe,new Set(Ge.keys()),st),q(We,Rt,st),pt})}function q(We,De,Qe){Et(We,Qe)&&(ge(De,We),O(De,Qe))}function B(We,De,Qe,Ge){var st,pt,Rt,St;if(Et(We,Ge)||De.version===((st=We.getState())===null||st===void 0||(pt=st.currentTree)===null||pt===void 0?void 0:pt.version)||De.version===((Rt=We.getState())===null||Rt===void 0||(St=Rt.nextTree)===null||St===void 0?void 0:St.version)){var Ot,sr,Ft;s0r(new Map([[t,Qe]]),We,(Ot=(sr=We.getState())===null||sr===void 0||(Ft=sr.nextTree)===null||Ft===void 0?void 0:Ft.version)!==null&&Ot!==void 0?Ot:We.getState().currentTree.version)}}function G(We,De,Qe,Ge,st){Qe.add(Ge),B(We,De,Qe,st)}function re(We,De,Qe,Ge=!1){let st=g0r(t),pt,Rt=!1,St,Ot=new Map,sr=new Set;B(We,De,sr,Qe);function Ft(Er){let{key:Cr}=Er;G(We,De,sr,Cr,Qe);let Tr=Ge?Yze(We,De,Cr):D(We,De,Cr);if(Xe(Tr),Ot.set(Cr,Tr),Tr.state==="hasValue")return Tr.contents;throw Tr.contents}let Jt=!1,dr=Er=>(...Cr)=>{if(!Jt)throw new Error("getCallback() should only be called asynchronously after the selector is evalutated.  It can be used for selectors to return objects with callbacks that can obtain the current Recoil state without a subscription.");let Tr=m0r(We),qr=Er({snapshot:Tr});if(typeof qr!="function")throw new Error("getCallback() expects a function that returns a function.");return qr(...Cr)};try{pt=r({get:Ft,getCallback:dr}),pt=p0r(pt)?Ft(pt):pt,Jt=!0,Wa(pt)?pt=k(We,pt,De,Ot,Qe).finally(st):st()}catch(Er){pt=Er,Wa(pt)?pt=R(We,pt,De,Ot,Qe).finally(st):(Rt=!0,st())}return Rt?St=SA(pt):Wa(pt)?St=o0r(pt):St=ete(pt),Xe(St),[St,Ot]}function Q(We,De){let Qe=new Set,Ge=v(We),st=i.get(pt=>(typeof pt!="string"&&vR(!1),D(We,De,pt).contents),{onNodeVisit:pt=>{pt.type==="branch"&&pt.nodeKey!==t&&typeof pt.nodeKey=="string"&&Qe.add(pt.nodeKey)}});return st&&B(We,De,Qe,Ge.latestExecutionId),st}function ie(We){return Array.from(We.entries()).map(([De,Qe])=>[De,Qe.contents])}function me(We,De){let Qe=v0r(),[Ge,st]=re(We,De,Qe);return ge(Ge,We,st,Qe,De),Re(De,ie(st),Ge),M(We,Ge,Qe),Ge}function ve(We,De){let Qe=Q(We,De);if(Qe!=null)return ge(Qe,We),Qe;let Ge=ye(De);if(Ge){let st=Ge;return M(We,ni(st.latestLoadable),ni(st.latestExecutionId)),ni(st.latestLoadable)}return me(We,De)}function ye(We){var De;let[,Qe]=(De=Array.from(u.entries()).find(([Ge,st])=>st.latestLoadable!=null&&st.latestExecutionId!=null&&!Se(Ge,We)))!==null&&De!==void 0?De:[];return Qe}let we=new Map;function Se(We,De){var Qe,Ge;let st=v(We),pt=(Qe=st.depValuesDiscoveredSoFarDuringAsyncWork)!==null&&Qe!==void 0?Qe:new Map,Rt=Array(((Ge=we.get(De.version))!==null&&Ge!==void 0?Ge:new Map).entries()),St=we.has(De.version)&&Rt.length===pt.size&&Rt.every(([Ot,sr])=>pt.get(Ot)===sr);return pt==null||De.version===st.stateVersion||St?!1:(we.set(De.version,new Map(pt)),Array.from(pt).some(([Ot,sr])=>D(We,De,Ot).contents!==sr.contents))}function ge(We,De,Qe,Ge,st){let pt=v(De);We.state==="loading"?(pt.depValuesDiscoveredSoFarDuringAsyncWork=Qe,pt.latestExecutionId=Ge,pt.latestLoadable=We,pt.stateVersion=st==null?void 0:st.version):(pt.depValuesDiscoveredSoFarDuringAsyncWork=null,pt.latestExecutionId=null,pt.latestLoadable=null,pt.stateVersion=null)}function Re(We,De,Qe){Qe.state!=="loading"&&Lt(We,De,Qe)}function Je(We,De,Qe){let Ge=v(De);Et(De,Qe)&&(Ge.depValuesDiscoveredSoFarDuringAsyncWork=We)}function tt(We,De){Et(We,De)&&u.delete(We)}function Et(We,De){let Qe=v(We);return De===Qe.latestExecutionId}function Xe(We){We.state!=="loading"&&(We.contents,void 0)}function Pt(We){}function Lt(We,De,Qe){We.atomValues.set(t,Qe),i.set(De,Qe)}function Gt(We){if(TA.includes(t)){let De=`Recoil selector has circular dependencies: ${TA.slice(TA.indexOf(t)).join(" \u2192 ")}`;return SA(new Error(De))}TA.push(t);try{return We()}finally{TA.pop()}}function nt(We,De){return i.get(Ge=>{typeof Ge!="string"&&vR(!1);let st=i0r(We,De,Ge);return st==null?void 0:st.contents})}function ct(We,De){return Gt(()=>ve(We,De))}function _t(We){We.atomValues.delete(t)}return o!=null?Kze({key:t,nodeType:"selector",peek:nt,get:ct,set:(De,Qe,Ge)=>{let st=!1,pt=new Map;function Rt({key:Ft}){if(st)throw new Error("Recoil: Async selector sets are not currently supported.");let Jt=D(De,Qe,Ft);if(Xe(Jt),Jt.state==="hasValue")return Jt.contents;throw Jt.state==="loading"?new u0r(Ft):Jt.contents}function St(Ft,Jt){if(st)throw new Error("Recoil: Async selector sets are not currently supported.");let dr=typeof Jt=="function"?Jt(Rt(Ft)):Jt;a0r(De,Qe,Ft.key,dr).forEach((Cr,Tr)=>pt.set(Tr,Cr))}function Ot(Ft){St(Ft,l0r)}let sr=o({set:St,get:Rt,reset:Ot},Ge);if(sr!==void 0)throw Wa(sr)?new Error("Recoil: Async selector sets are not currently supported."):new Error("Recoil: selector set should be a void function.");return st=!0,pt},init:b,invalidate:_t,shouldDeleteConfigOnRelease:x,dangerouslyAllowMutability:e.dangerouslyAllowMutability,shouldRestoreFromSnapshots:!1,retainedBy:a}):Kze({key:t,nodeType:"selector",peek:nt,get:ct,init:b,invalidate:_t,shouldDeleteConfigOnRelease:x,dangerouslyAllowMutability:e.dangerouslyAllowMutability,shouldRestoreFromSnapshots:!1,retainedBy:a})}var bR=_0r,{loadableWithError:Xze,loadableWithPromise:Qze,loadableWithValue:IA}=NA,{DEFAULT_VALUE:v_,DefaultValue:AE,getConfigDeletionHandler:WFe,registerNode:b0r,setConfigDeletionHandler:x0r}=Yp,{isRecoilValue:w0r}=My,{markRecoilValueModified:E0r,setRecoilValue:Jze,setRecoilValueLoadable:S0r}=__,{retainedByOptionWithDefault:T0r}=LA;function I0r(e){let{key:t,persistence_UNSTABLE:r}=e,n=T0r(e.retainedBy_UNSTABLE),o=0,i=Wa(e.default)?Qze(e.default.then(k=>(i=IA(k),{__key:t,__value:k})).catch(k=>{throw i=Xze(k),k})):IA(e.default),a,u=new Map;function d(k,R){let q=R.then(B=>{var G,re;return((re=((G=k.getState().nextTree)!==null&&G!==void 0?G:k.getState().currentTree).atomValues.get(t))===null||re===void 0?void 0:re.contents)===q&&Jze(k,D,B),{__key:t,__value:B}}).catch(B=>{var G,re;throw((re=((G=k.getState().nextTree)!==null&&G!==void 0?G:k.getState().currentTree).atomValues.get(t))===null||re===void 0?void 0:re.contents)===q&&S0r(k,D,Xze(B)),B});return q}function h(k,R,q){o++;let B=k.getState().knownAtoms.has(t);if(k.getState().knownAtoms.add(t),i.state==="loading"){let ve=()=>{var ye;((ye=k.getState().nextTree)!==null&&ye!==void 0?ye:k.getState().currentTree).atomValues.has(t)||E0r(k,D)};i.contents.then(ve).catch(ve)}let G=v_,re=null;if(e.effects_UNSTABLE!=null&&!B){let ve=!0,ye=ge=>Re=>{if(ve){let Je=G instanceof AE||Wa(G)?i.state==="hasValue"?i.contents:v_:G;G=typeof Re=="function"?Re(Je):Re,Wa(G)&&(G=G.then(tt=>(re={effect:ge,value:tt},tt)))}else{if(Wa(Re))throw new Error("Setting atoms to async values is not implemented.");typeof Re!="function"&&(re={effect:ge,value:Re}),Jze(k,D,typeof Re=="function"?Je=>{let tt=Re(Je);return re={effect:ge,value:tt},tt}:Re)}},we=ge=>()=>ye(ge)(v_),Se=ge=>Re=>{k.subscribeToTransactions(Je=>{var tt;let{currentTree:Et,previousTree:Xe}=Je.getState();Xe||(Ih("Transaction subscribers notified without a next tree being present -- this is a bug in Recoil"),Xe=Et);let Pt=(tt=Et.atomValues.get(t))!==null&&tt!==void 0?tt:i;if(Pt.state==="hasValue"){var Lt,Gt,nt,ct;let _t=Pt.contents,We=(Lt=Xe.atomValues.get(t))!==null&&Lt!==void 0?Lt:i,De=We.state==="hasValue"?We.contents:v_;((Gt=re)===null||Gt===void 0?void 0:Gt.effect)!==ge||((nt=re)===null||nt===void 0?void 0:nt.value)!==_t?Re(_t,De):((ct=re)===null||ct===void 0?void 0:ct.effect)===ge&&(re=null)}},t)};for(let ge of(Q=e.effects_UNSTABLE)!==null&&Q!==void 0?Q:[]){var Q;let Re=ge({node:D,trigger:q,setSelf:ye(ge),resetSelf:we(ge),onSet:Se(ge)});if(Re!=null){var ie;u.set(k,[...((ie=u.get(k))!==null&&ie!==void 0?ie:[]),Re])}}ve=!1}if(!(G instanceof AE)){var me;let ve=Wa(G)?Qze(d(k,G)):IA(G);R.atomValues.set(t,ve),(me=k.getState().nextTree)===null||me===void 0||me.atomValues.set(t,ve)}return()=>{var ve;o--,(ve=u.get(k))===null||ve===void 0||ve.forEach(ye=>ye()),u.delete(k),k.getState().knownAtoms.delete(t)}}function v(k,R){var q,B,G;return(q=(B=R.atomValues.get(t))!==null&&B!==void 0?B:(G=a)===null||G===void 0?void 0:G[1])!==null&&q!==void 0?q:i}function b(k,R){if(R.atomValues.has(t))return ni(R.atomValues.get(t));if(R.nonvalidatedAtoms.has(t)){if(a!=null)return a;if(r==null)return wte(`Tried to restore a persisted value for atom ${t} but it has no persistence settings.`),i;let q=R.nonvalidatedAtoms.get(t),B=r.validator(q,v_);return a=B instanceof AE?i:IA(B),a}else return i}function x(){a=void 0}function M(k,R,q){if(R.atomValues.has(t)){let B=ni(R.atomValues.get(t));if(B.state==="hasValue"&&q===B.contents)return new Map}else if(!R.nonvalidatedAtoms.has(t)&&q instanceof AE)return new Map;return a=void 0,new Map().set(t,IA(q))}function O(){return WFe(t)!==void 0&&o<=0}let D=b0r({key:t,nodeType:"atom",peek:v,get:b,set:M,init:h,invalidate:x,shouldDeleteConfigOnRelease:O,dangerouslyAllowMutability:e.dangerouslyAllowMutability,persistence_UNSTABLE:e.persistence_UNSTABLE?{type:e.persistence_UNSTABLE.type,backButton:e.persistence_UNSTABLE.backButton}:void 0,shouldRestoreFromSnapshots:!0,retainedBy:n});return D}function $Fe(e){let n=e,{default:t}=n,r=xn(n,["default"]);return w0r(t)?M0r(Mt(Te({},r),{default:t})):I0r(Mt(Te({},r),{default:t}))}function M0r(e){let t=$Fe(Mt(Te({},e),{default:v_,persistence_UNSTABLE:e.persistence_UNSTABLE===void 0?void 0:Mt(Te({},e.persistence_UNSTABLE),{validator:n=>n instanceof AE?n:ni(e.persistence_UNSTABLE).validator(n,v_)}),effects_UNSTABLE:e.effects_UNSTABLE})),r=bR({key:`${e.key}__withFallback`,get:({get:n})=>{let o=n(t);return o instanceof AE?e.default:o},set:({set:n},o)=>n(t,o),dangerouslyAllowMutability:e.dangerouslyAllowMutability});return x0r(r.key,WFe(e.key)),r}var ZFe=$Fe,mte=class{constructor(t){var r;No(this,"_map",void 0),No(this,"_keyMapper",void 0),this._map=new Map,this._keyMapper=(r=t==null?void 0:t.mapKey)!==null&&r!==void 0?r:n=>n}size(){return this._map.size}has(t){return this._map.has(this._keyMapper(t))}get(t){return this._map.get(this._keyMapper(t))}set(t,r){this._map.set(this._keyMapper(t),r)}delete(t){this._map.delete(this._keyMapper(t))}clear(){this._map.clear()}},C0r={MapCache:mte},A0r=C0r.MapCache,O0r=Object.freeze({__proto__:null,MapCache:A0r}),{LRUCache:eFe}=HFe,{MapCache:P0r}=O0r,aR={equality:"reference",eviction:"none",maxSize:1/0};function N0r({equality:e=aR.equality,eviction:t=aR.eviction,maxSize:r=aR.maxSize}=aR){let n=D0r(e);return L0r(t,r,n)}function D0r(e){switch(e){case"reference":return t=>t;case"value":return t=>OR(t)}throw new Error(`Unrecognized equality policy ${e}`)}function L0r(e,t,r){switch(e){case"keep-all":return new P0r({mapKey:r});case"lru":return new eFe({mapKey:r,maxSize:ni(t)});case"most-recent":return new eFe({mapKey:r,maxSize:1})}throw new Error(`Unrecognized eviction policy ${e}`)}var YFe=N0r,{setConfigDeletionHandler:k0r}=Yp;function R0r(e){var t,r;let n=YFe({equality:(t=(r=e.cachePolicyForParams_UNSTABLE)===null||r===void 0?void 0:r.equality)!==null&&t!==void 0?t:"value",eviction:"keep-all"});return o=>{var i;let a=n.get(o);if(a!=null)return a;let v=e,{cachePolicyForParams_UNSTABLE:u}=v,d=xn(v,["cachePolicyForParams_UNSTABLE"]),h=ZFe(Mt(Te({},d),{key:`${e.key}__${(i=OR(o))!==null&&i!==void 0?i:"void"}`,default:typeof e.default=="function"?e.default(o):e.default,retainedBy_UNSTABLE:typeof e.retainedBy_UNSTABLE=="function"?e.retainedBy_UNSTABLE(o):e.retainedBy_UNSTABLE,effects_UNSTABLE:typeof e.effects_UNSTABLE=="function"?e.effects_UNSTABLE(o):e.effects_UNSTABLE}));return n.set(o,h),k0r(h.key,()=>{n.delete(o)}),h}}var j0r=R0r,{setConfigDeletionHandler:q0r}=Yp,z0r=0;function F0r(e){var t,r;let n=YFe({equality:(t=(r=e.cachePolicyForParams_UNSTABLE)===null||r===void 0?void 0:r.equality)!==null&&t!==void 0?t:"value",eviction:"keep-all"});return o=>{var i;let a=n.get(o);if(a!=null)return a;let u=`${e.key}__selectorFamily/${(i=OR(o,{allowFunctions:!0}))!==null&&i!==void 0?i:"void"}/${z0r++}`,d=x=>e.get(o)(x),h=e.cachePolicy_UNSTABLE,v=typeof e.retainedBy_UNSTABLE=="function"?e.retainedBy_UNSTABLE(o):e.retainedBy_UNSTABLE,b;if(e.set!=null){let x=e.set;b=bR({key:u,get:d,set:(O,D)=>x(o)(O,D),cachePolicy_UNSTABLE:h,dangerouslyAllowMutability:e.dangerouslyAllowMutability,retainedBy_UNSTABLE:v})}else b=bR({key:u,get:d,cachePolicy_UNSTABLE:h,dangerouslyAllowMutability:e.dangerouslyAllowMutability,retainedBy_UNSTABLE:v});return n.set(o,b),q0r(b.key,()=>{n.delete(o)}),b}}var Cy=F0r,U0r=Cy({key:"__constant",get:e=>()=>e,cachePolicyForParams_UNSTABLE:{equality:"reference"}});function B0r(e){return U0r(e)}var V0r=B0r,G0r=Cy({key:"__error",get:e=>()=>{throw new Error(e)},cachePolicyForParams_UNSTABLE:{equality:"reference"}});function H0r(e){return G0r(e)}var W0r=H0r;function $0r(e){return e}var Z0r=$0r,{loadableWithError:KFe,loadableWithPromise:XFe,loadableWithValue:QFe}=NA;function PR(e,t){let r=Array(t.length).fill(void 0),n=Array(t.length).fill(void 0);for(let[o,i]of t.entries())try{r[o]=e(i)}catch(a){n[o]=a}return[r,n]}function Y0r(e){return e!=null&&!Wa(e)}function NR(e){return Array.isArray(e)?e:Object.getOwnPropertyNames(e).map(t=>e[t])}function zte(e){return e!=null&&typeof e=="object"&&e.hasOwnProperty("__value")?e.__value:e}function gte(e,t){return Array.isArray(e)?t:Object.getOwnPropertyNames(e).reduce((r,n,o)=>Mt(Te({},r),{[n]:t[o]}),{})}function PE(e,t,r){let n=r.map((o,i)=>o==null?QFe(t[i]):Wa(o)?XFe(o):KFe(o));return gte(e,n)}function K0r(e,t){return t.map((r,n)=>r===void 0?e[n]:r)}var X0r=Cy({key:"__waitForNone",get:e=>({get:t})=>{let r=NR(e),[n,o]=PR(t,r);return PE(e,n,o)},dangerouslyAllowMutability:!0}),Q0r=Cy({key:"__waitForAny",get:e=>({get:t})=>{let r=NR(e),[n,o]=PR(t,r);return o.some(i=>!Wa(i))?PE(e,n,o):new Promise(i=>{for(let[a,u]of o.entries())Wa(u)&&u.then(d=>{n[a]=zte(d),o[a]=void 0,i(PE(e,n,o))}).catch(d=>{o[a]=d,i(PE(e,n,o))})})},dangerouslyAllowMutability:!0}),J0r=Cy({key:"__waitForAll",get:e=>({get:t})=>{let r=NR(e),[n,o]=PR(t,r);if(o.every(a=>a==null))return gte(e,n);let i=o.find(Y0r);if(i!=null)throw i;return Promise.all(o).then(a=>gte(e,K0r(n,a).map(zte)))},dangerouslyAllowMutability:!0}),e1r=Cy({key:"__waitForAllSettled",get:e=>({get:t})=>{let r=NR(e),[n,o]=PR(t,r);return o.every(i=>!Wa(i))?PE(e,n,o):Promise.all(o.map((i,a)=>Wa(i)?i.then(u=>{n[a]=zte(u),o[a]=void 0}).catch(u=>{n[a]=void 0,o[a]=u}):null)).then(()=>PE(e,n,o))},dangerouslyAllowMutability:!0}),t1r=Cy({key:"__noWait",get:e=>({get:t})=>{try{return QFe(t(e))}catch(r){return Wa(r)?XFe(r):KFe(r)}},dangerouslyAllowMutability:!0}),r1r={waitForNone:X0r,waitForAny:Q0r,waitForAll:J0r,waitForAllSettled:e1r,noWait:t1r},{batchUpdates:n1r,setBatcher:o1r}=Mte,{DefaultValue:i1r}=Yp,{RecoilRoot:a1r}=MR,{isRecoilValue:s1r}=My,{retentionZone:l1r}=wR,{freshSnapshot:u1r}=IR,{useGotoRecoilSnapshot:c1r,useRecoilCallback:p1r,useRecoilSnapshot:f1r,useRecoilState:d1r,useRecoilStateLoadable:h1r,useRecoilTransaction:m1r,useRecoilTransactionObserver:g1r,useRecoilValue:v1r,useRecoilValueLoadable:y1r,useResetRecoilState:_1r,useRetain:b1r,useSetRecoilState:x1r,useSetUnvalidatedAtomValues:w1r,useTransactionObservation_DEPRECATED:E1r}=Pyr,{noWait:S1r,waitForAll:T1r,waitForAllSettled:I1r,waitForAny:M1r,waitForNone:C1r}=r1r,Io={DefaultValue:i1r,RecoilRoot:a1r,useRecoilBridgeAcrossReactRoots_UNSTABLE:Fyr,atom:ZFe,selector:bR,retentionZone:l1r,atomFamily:j0r,selectorFamily:Cy,constSelector:V0r,errorSelector:W0r,readOnlySelector:Z0r,useRecoilValue:v1r,useRecoilValueLoadable:y1r,useRecoilState:d1r,useRecoilStateLoadable:h1r,useSetRecoilState:x1r,useResetRecoilState:_1r,useGetRecoilValueInfo_UNSTABLE:kyr,useRetain:b1r,useRecoilCallback:p1r,useRecoilTransaction_UNSTABLE:m1r,useGotoRecoilSnapshot:c1r,useRecoilSnapshot:f1r,useRecoilTransactionObserver_UNSTABLE:g1r,useTransactionObservation_UNSTABLE:E1r,useSetUnvalidatedAtomValues_UNSTABLE:w1r,noWait:S1r,waitForNone:C1r,waitForAny:M1r,waitForAll:T1r,waitForAllSettled:I1r,isRecoilValue:s1r,batchUpdates:n1r,setBatcher:o1r,snapshot_UNSTABLE:u1r},Psn=Io.DefaultValue,JFe=Io.RecoilRoot,Nsn=Io.useRecoilBridgeAcrossReactRoots_UNSTABLE,yn=Io.atom,Ws=Io.selector,Dsn=Io.retentionZone,Lsn=Io.atomFamily,ksn=Io.selectorFamily,Rsn=Io.constSelector,jsn=Io.errorSelector,qsn=Io.readOnlySelector,yt=Io.useRecoilValue,zsn=Io.useRecoilValueLoadable,Mo=Io.useRecoilState,Fsn=Io.useRecoilStateLoadable,zr=Io.useSetRecoilState,Usn=Io.useResetRecoilState,Bsn=Io.useGetRecoilValueInfo_UNSTABLE,Vsn=Io.useRetain,ar=Io.useRecoilCallback,Gsn=Io.useRecoilTransaction_UNSTABLE,Hsn=Io.useGotoRecoilSnapshot,Wsn=Io.useRecoilSnapshot,$sn=Io.useRecoilTransactionObserver_UNSTABLE,Zsn=Io.useTransactionObservation_UNSTABLE,Ysn=Io.useSetUnvalidatedAtomValues_UNSTABLE,Ksn=Io.noWait,Xsn=Io.waitForNone,Qsn=Io.waitForAny,Jsn=Io.waitForAll,eln=Io.waitForAllSettled,tln=Io.isRecoilValue,rln=Io.batchUpdates,nln=Io.setBatcher,oln=Io.snapshot_UNSTABLE;var Ay=Z(Pe());var DR=Z(Pe()),A1r=e=>{let t=DR.useRef(e);return DR.useEffect(()=>{t.current=e}),t},LR=A1r;var O1r=(e,t=100,r=!1)=>{let n=LR(e),o=Ay.useRef(),i=[t,r,n];function a(){o.current&&clearTimeout(o.current),o.current=void 0}Ay.useEffect(()=>a,i);function u(){o.current=void 0}return Ay.useCallback(function(){let d=arguments,{current:h}=o;if(h===void 0&&r)return o.current=setTimeout(u,t),n.current.apply(null,d);h&&clearTimeout(h),o.current=setTimeout(()=>{o.current=void 0,n.current.apply(null,d)},t)},i)},e7e=(e,t,r)=>{let n=Ay.useState(e);return[n[0],O1r(n[1],t,r)]};var kE=Z(Pe());function P1r(e,t,r,n){let o=kE.useRef(r),i=kE.useRef(n);kE.useEffect(()=>{o.current=r,i.current=n}),kE.useEffect(()=>{let a=e&&"current"in e?e.current:e;if(!a)return;let u=0;function d(...v){u||o.current.apply(this,v)}a.addEventListener(t,d);let h=i.current;return()=>{u=1,a.removeEventListener(t,d),h&&h()}},[e,t])}var kR=P1r;var N1r={},kA=typeof window=="undefined"?null:window,D1r=kA&&typeof kA.visualViewport!="undefined"?kA.visualViewport:null,t7e=()=>[document.documentElement.clientWidth,document.documentElement.clientHeight],L1r=function(e){e===void 0&&(e=N1r);let{wait:t,leading:r,initialWidth:n=0,initialHeight:o=0}=e,[i,a]=e7e(typeof document=="undefined"?[n,o]:t7e,t,r),u=()=>a(t7e);return kR(kA,"resize",u),kR(D1r,"resize",u),kR(kA,"orientationchange",u),i};var r7e=e=>L1r(e)[0];var Fdt=Z(xt(),1);function Fte(e){var t=null,r=function(){return t==null&&(t=e()),t};return r}function c7e(e,t){return e.filter(function(r){return r!==t})}function p7e(e,t){var r=new Set,n=function(a){return r.add(a)};e.forEach(n),t.forEach(n);var o=[];return r.forEach(function(i){return o.push(i)}),o}function j1r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function f7e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function q1r(e,t,r){return t&&f7e(e.prototype,t),r&&f7e(e,r),e}function d7e(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var h7e=function(){function e(t){j1r(this,e),d7e(this,"entered",[]),d7e(this,"isNodeInDocument",void 0),this.isNodeInDocument=t}return q1r(e,[{key:"enter",value:function(r){var n=this,o=this.entered.length,i=function(u){return n.isNodeInDocument(u)&&(!u.contains||u.contains(r))};return this.entered=p7e(this.entered.filter(i),[r]),o===0&&this.entered.length>0}},{key:"leave",value:function(r){var n=this.entered.length;return this.entered=c7e(this.entered.filter(this.isNodeInDocument),r),n>0&&this.entered.length===0}},{key:"reset",value:function(){this.entered=[]}}]),e}();var m7e=Fte(function(){return /firefox/i.test(navigator.userAgent)}),Ute=Fte(function(){return!!window.safari});function z1r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function g7e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function F1r(e,t,r){return t&&g7e(e.prototype,t),r&&g7e(e,r),e}function RA(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var Bte=function(){function e(t,r){z1r(this,e),RA(this,"xs",void 0),RA(this,"ys",void 0),RA(this,"c1s",void 0),RA(this,"c2s",void 0),RA(this,"c3s",void 0);for(var n=t.length,o=[],i=0;i<n;i++)o.push(i);o.sort(function(ve,ye){return t[ve]<t[ye]?-1:1});for(var a=[],u=[],d=[],h,v,b=0;b<n-1;b++)h=t[b+1]-t[b],v=r[b+1]-r[b],u.push(h),a.push(v),d.push(v/h);for(var x=[d[0]],M=0;M<u.length-1;M++){var O=d[M],D=d[M+1];if(O*D<=0)x.push(0);else{h=u[M];var k=u[M+1],R=h+k;x.push(3*R/((R+k)/O+(R+h)/D))}}x.push(d[d.length-1]);for(var q=[],B=[],G,re=0;re<x.length-1;re++){G=d[re];var Q=x[re],ie=1/u[re],me=Q+x[re+1]-G-G;q.push((G-Q-me)*ie),B.push(me*ie*ie)}this.xs=t,this.ys=r,this.c1s=x,this.c2s=q,this.c3s=B}return F1r(e,[{key:"interpolate",value:function(r){var n=this.xs,o=this.ys,i=this.c1s,a=this.c2s,u=this.c3s,d=n.length-1;if(r===n[d])return o[d];for(var h=0,v=u.length-1,b;h<=v;){b=Math.floor(.5*(h+v));var x=n[b];if(x<r)h=b+1;else if(x>r)v=b-1;else return o[b]}d=Math.max(0,v);var M=r-n[d],O=M*M;return o[d]+i[d]*M+a[d]*O+u[d]*M*O}}]),e}();var U1r=1;function Vte(e){var t=e.nodeType===U1r?e:e.parentElement;if(!t)return null;var r=t.getBoundingClientRect(),n=r.top,o=r.left;return{x:o,y:n}}function jA(e){return{x:e.clientX,y:e.clientY}}function B1r(e){var t;return e.nodeName==="IMG"&&(m7e()||!((t=document.documentElement)!==null&&t!==void 0&&t.contains(e)))}function V1r(e,t,r,n){var o=e?t.width:r,i=e?t.height:n;return Ute()&&e&&(i/=window.devicePixelRatio,o/=window.devicePixelRatio),{dragPreviewWidth:o,dragPreviewHeight:i}}function v7e(e,t,r,n,o){var i=B1r(t),a=i?e:t,u=Vte(a),d={x:r.x-u.x,y:r.y-u.y},h=e.offsetWidth,v=e.offsetHeight,b=n.anchorX,x=n.anchorY,M=V1r(i,t,h,v),O=M.dragPreviewWidth,D=M.dragPreviewHeight,k=function(){var ie=new Bte([0,.5,1],[d.y,d.y/v*D,d.y+D-v]),me=ie.interpolate(x);return Ute()&&i&&(me+=(window.devicePixelRatio-1)*D),me},R=function(){var ie=new Bte([0,.5,1],[d.x,d.x/h*O,d.x+O-h]);return ie.interpolate(b)},q=o.offsetX,B=o.offsetY,G=q===0||q,re=B===0||B;return{x:G?q:R(),y:re?B:k()}}var Oy={};mI(Oy,{FILE:()=>Gte,HTML:()=>$te,TEXT:()=>Wte,URL:()=>Hte});var Gte="__NATIVE_FILE__",Hte="__NATIVE_URL__",Wte="__NATIVE_TEXT__",$te="__NATIVE_HTML__";function RR(e,t,r){var n=t.reduce(function(o,i){return o||e.getData(i)},"");return n!=null?n:r}var RE;function jR(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var qR=(RE={},jR(RE,Gte,{exposeProperties:{files:function(t){return Array.prototype.slice.call(t.files)},items:function(t){return t.items},dataTransfer:function(t){return t}},matchesTypes:["Files"]}),jR(RE,$te,{exposeProperties:{html:function(t,r){return RR(t,r,"")},dataTransfer:function(t){return t}},matchesTypes:["Html","text/html"]}),jR(RE,Hte,{exposeProperties:{urls:function(t,r){return RR(t,r,"").split(`
`)},dataTransfer:function(t){return t}},matchesTypes:["Url","text/uri-list"]}),jR(RE,Wte,{exposeProperties:{text:function(t,r){return RR(t,r,"")},dataTransfer:function(t){return t}},matchesTypes:["Text","text/plain"]}),RE);function G1r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function y7e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function H1r(e,t,r){return t&&y7e(e.prototype,t),r&&y7e(e,r),e}function _7e(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var b7e=function(){function e(t){G1r(this,e),_7e(this,"item",void 0),_7e(this,"config",void 0),this.config=t,this.item={},this.initializeExposedProperties()}return H1r(e,[{key:"initializeExposedProperties",value:function(){var r=this;Object.keys(this.config.exposeProperties).forEach(function(n){Object.defineProperty(r.item,n,{configurable:!0,enumerable:!0,get:function(){return console.warn(`Browser doesn't allow reading "`.concat(n,"\" until the drop event.")),null}})})}},{key:"loadDataTransfer",value:function(r){var n=this;if(r){var o={};Object.keys(this.config.exposeProperties).forEach(function(i){o[i]={value:n.config.exposeProperties[i](r,n.config.matchesTypes),configurable:!0,enumerable:!0}}),Object.defineProperties(this.item,o)}}},{key:"canDrag",value:function(){return!0}},{key:"beginDrag",value:function(){return this.item}},{key:"isDragging",value:function(r,n){return n===r.getSourceId()}},{key:"endDrag",value:function(){}}]),e}();function x7e(e,t){var r=new b7e(qR[e]);return r.loadDataTransfer(t),r}function zR(e){if(!e)return null;var t=Array.prototype.slice.call(e.types||[]);return Object.keys(qR).filter(function(r){var n=qR[r].matchesTypes;return n.some(function(o){return t.indexOf(o)>-1})})[0]||null}function W1r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function w7e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function $1r(e,t,r){return t&&w7e(e.prototype,t),r&&w7e(e,r),e}function Zte(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var E7e=function(){function e(t,r){W1r(this,e),Zte(this,"ownerDocument",null),Zte(this,"globalContext",void 0),Zte(this,"optionsArgs",void 0),this.globalContext=t,this.optionsArgs=r}return $1r(e,[{key:"window",get:function(){if(this.globalContext)return this.globalContext;if(typeof window!="undefined")return window}},{key:"document",get:function(){var r;return(r=this.globalContext)!==null&&r!==void 0&&r.document?this.globalContext.document:this.window?this.window.document:void 0}},{key:"rootElement",get:function(){var r;return((r=this.optionsArgs)===null||r===void 0?void 0:r.rootElement)||this.window}}]),e}();function S7e(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(o){return Object.getOwnPropertyDescriptor(e,o).enumerable})),r.push.apply(r,n)}return r}function T7e(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?S7e(Object(r),!0).forEach(function(n){go(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):S7e(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function Z1r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function I7e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function Y1r(e,t,r){return t&&I7e(e.prototype,t),r&&I7e(e,r),e}function go(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var M7e=function(){function e(t,r,n){var o=this;Z1r(this,e),go(this,"options",void 0),go(this,"actions",void 0),go(this,"monitor",void 0),go(this,"registry",void 0),go(this,"enterLeaveCounter",void 0),go(this,"sourcePreviewNodes",new Map),go(this,"sourcePreviewNodeOptions",new Map),go(this,"sourceNodes",new Map),go(this,"sourceNodeOptions",new Map),go(this,"dragStartSourceIds",null),go(this,"dropTargetIds",[]),go(this,"dragEnterTargetIds",[]),go(this,"currentNativeSource",null),go(this,"currentNativeHandle",null),go(this,"currentDragSourceNode",null),go(this,"altKeyPressed",!1),go(this,"mouseMoveTimeoutTimer",null),go(this,"asyncEndDragFrameId",null),go(this,"dragOverTargetIds",null),go(this,"lastClientOffset",null),go(this,"hoverRafId",null),go(this,"getSourceClientOffset",function(i){var a=o.sourceNodes.get(i);return a&&Vte(a)||null}),go(this,"endDragNativeItem",function(){o.isDraggingNativeItem()&&(o.actions.endDrag(),o.currentNativeHandle&&o.registry.removeSource(o.currentNativeHandle),o.currentNativeHandle=null,o.currentNativeSource=null)}),go(this,"isNodeInDocument",function(i){return!!(i&&o.document&&o.document.body&&o.document.body.contains(i))}),go(this,"endDragIfSourceWasRemovedFromDOM",function(){var i=o.currentDragSourceNode;i==null||o.isNodeInDocument(i)||o.clearCurrentDragSourceNode()&&o.monitor.isDragging()&&o.actions.endDrag()}),go(this,"handleTopDragStartCapture",function(){o.clearCurrentDragSourceNode(),o.dragStartSourceIds=[]}),go(this,"handleTopDragStart",function(i){if(!i.defaultPrevented){var a=o.dragStartSourceIds;o.dragStartSourceIds=null;var u=jA(i);o.monitor.isDragging()&&o.actions.endDrag(),o.actions.beginDrag(a||[],{publishSource:!1,getSourceClientOffset:o.getSourceClientOffset,clientOffset:u});var d=i.dataTransfer,h=zR(d);if(o.monitor.isDragging()){if(d&&typeof d.setDragImage=="function"){var v=o.monitor.getSourceId(),b=o.sourceNodes.get(v),x=o.sourcePreviewNodes.get(v)||b;if(x){var M=o.getCurrentSourcePreviewNodeOptions(),O=M.anchorX,D=M.anchorY,k=M.offsetX,R=M.offsetY,q={anchorX:O,anchorY:D},B={offsetX:k,offsetY:R},G=v7e(b,x,u,q,B);d.setDragImage(x,G.x,G.y)}}try{d==null||d.setData("application/json",{})}catch(ie){}o.setCurrentDragSourceNode(i.target);var re=o.getCurrentSourcePreviewNodeOptions(),Q=re.captureDraggingState;Q?o.actions.publishDragSource():setTimeout(function(){return o.actions.publishDragSource()},0)}else if(h)o.beginDragNativeItem(h);else{if(d&&!d.types&&(i.target&&!i.target.hasAttribute||!i.target.hasAttribute("draggable")))return;i.preventDefault()}}}),go(this,"handleTopDragEndCapture",function(){o.clearCurrentDragSourceNode()&&o.monitor.isDragging()&&o.actions.endDrag()}),go(this,"handleTopDragEnterCapture",function(i){o.dragEnterTargetIds=[];var a=o.enterLeaveCounter.enter(i.target);if(!(!a||o.monitor.isDragging())){var u=i.dataTransfer,d=zR(u);d&&o.beginDragNativeItem(d,u)}}),go(this,"handleTopDragEnter",function(i){var a=o.dragEnterTargetIds;if(o.dragEnterTargetIds=[],!!o.monitor.isDragging()){o.altKeyPressed=i.altKey,a.length>0&&o.actions.hover(a,{clientOffset:jA(i)});var u=a.some(function(d){return o.monitor.canDropOnTarget(d)});u&&(i.preventDefault(),i.dataTransfer&&(i.dataTransfer.dropEffect=o.getCurrentDropEffect()))}}),go(this,"handleTopDragOverCapture",function(){o.dragOverTargetIds=[]}),go(this,"handleTopDragOver",function(i){var a=o.dragOverTargetIds;if(o.dragOverTargetIds=[],!o.monitor.isDragging()){i.preventDefault(),i.dataTransfer&&(i.dataTransfer.dropEffect="none");return}o.altKeyPressed=i.altKey,o.lastClientOffset=jA(i),o.hoverRafId===null&&typeof requestAnimationFrame!="undefined"&&(o.hoverRafId=requestAnimationFrame(function(){o.monitor.isDragging()&&o.actions.hover(a||[],{clientOffset:o.lastClientOffset}),o.hoverRafId=null}));var u=(a||[]).some(function(d){return o.monitor.canDropOnTarget(d)});u?(i.preventDefault(),i.dataTransfer&&(i.dataTransfer.dropEffect=o.getCurrentDropEffect())):o.isDraggingNativeItem()?i.preventDefault():(i.preventDefault(),i.dataTransfer&&(i.dataTransfer.dropEffect="none"))}),go(this,"handleTopDragLeaveCapture",function(i){o.isDraggingNativeItem()&&i.preventDefault();var a=o.enterLeaveCounter.leave(i.target);a&&o.isDraggingNativeItem()&&setTimeout(function(){return o.endDragNativeItem()},0)}),go(this,"handleTopDropCapture",function(i){if(o.dropTargetIds=[],o.isDraggingNativeItem()){var a;i.preventDefault(),(a=o.currentNativeSource)===null||a===void 0||a.loadDataTransfer(i.dataTransfer)}else zR(i.dataTransfer)&&i.preventDefault();o.enterLeaveCounter.reset()}),go(this,"handleTopDrop",function(i){var a=o.dropTargetIds;o.dropTargetIds=[],o.actions.hover(a,{clientOffset:jA(i)}),o.actions.drop({dropEffect:o.getCurrentDropEffect()}),o.isDraggingNativeItem()?o.endDragNativeItem():o.monitor.isDragging()&&o.actions.endDrag()}),go(this,"handleSelectStart",function(i){var a=i.target;typeof a.dragDrop=="function"&&(a.tagName==="INPUT"||a.tagName==="SELECT"||a.tagName==="TEXTAREA"||a.isContentEditable||(i.preventDefault(),a.dragDrop()))}),this.options=new E7e(r,n),this.actions=t.getActions(),this.monitor=t.getMonitor(),this.registry=t.getRegistry(),this.enterLeaveCounter=new h7e(this.isNodeInDocument)}return Y1r(e,[{key:"profile",value:function(){var r,n;return{sourcePreviewNodes:this.sourcePreviewNodes.size,sourcePreviewNodeOptions:this.sourcePreviewNodeOptions.size,sourceNodeOptions:this.sourceNodeOptions.size,sourceNodes:this.sourceNodes.size,dragStartSourceIds:((r=this.dragStartSourceIds)===null||r===void 0?void 0:r.length)||0,dropTargetIds:this.dropTargetIds.length,dragEnterTargetIds:this.dragEnterTargetIds.length,dragOverTargetIds:((n=this.dragOverTargetIds)===null||n===void 0?void 0:n.length)||0}}},{key:"window",get:function(){return this.options.window}},{key:"document",get:function(){return this.options.document}},{key:"rootElement",get:function(){return this.options.rootElement}},{key:"setup",value:function(){var r=this.rootElement;if(r!==void 0){if(r.__isReactDndBackendSetUp)throw new Error("Cannot have two HTML5 backends at the same time.");r.__isReactDndBackendSetUp=!0,this.addEventListeners(r)}}},{key:"teardown",value:function(){var r=this.rootElement;if(r!==void 0&&(r.__isReactDndBackendSetUp=!1,this.removeEventListeners(this.rootElement),this.clearCurrentDragSourceNode(),this.asyncEndDragFrameId)){var n;(n=this.window)===null||n===void 0||n.cancelAnimationFrame(this.asyncEndDragFrameId)}}},{key:"connectDragPreview",value:function(r,n,o){var i=this;return this.sourcePreviewNodeOptions.set(r,o),this.sourcePreviewNodes.set(r,n),function(){i.sourcePreviewNodes.delete(r),i.sourcePreviewNodeOptions.delete(r)}}},{key:"connectDragSource",value:function(r,n,o){var i=this;this.sourceNodes.set(r,n),this.sourceNodeOptions.set(r,o);var a=function(h){return i.handleDragStart(h,r)},u=function(h){return i.handleSelectStart(h)};return n.setAttribute("draggable","true"),n.addEventListener("dragstart",a),n.addEventListener("selectstart",u),function(){i.sourceNodes.delete(r),i.sourceNodeOptions.delete(r),n.removeEventListener("dragstart",a),n.removeEventListener("selectstart",u),n.setAttribute("draggable","false")}}},{key:"connectDropTarget",value:function(r,n){var o=this,i=function(h){return o.handleDragEnter(h,r)},a=function(h){return o.handleDragOver(h,r)},u=function(h){return o.handleDrop(h,r)};return n.addEventListener("dragenter",i),n.addEventListener("dragover",a),n.addEventListener("drop",u),function(){n.removeEventListener("dragenter",i),n.removeEventListener("dragover",a),n.removeEventListener("drop",u)}}},{key:"addEventListeners",value:function(r){r.addEventListener&&(r.addEventListener("dragstart",this.handleTopDragStart),r.addEventListener("dragstart",this.handleTopDragStartCapture,!0),r.addEventListener("dragend",this.handleTopDragEndCapture,!0),r.addEventListener("dragenter",this.handleTopDragEnter),r.addEventListener("dragenter",this.handleTopDragEnterCapture,!0),r.addEventListener("dragleave",this.handleTopDragLeaveCapture,!0),r.addEventListener("dragover",this.handleTopDragOver),r.addEventListener("dragover",this.handleTopDragOverCapture,!0),r.addEventListener("drop",this.handleTopDrop),r.addEventListener("drop",this.handleTopDropCapture,!0))}},{key:"removeEventListeners",value:function(r){r.removeEventListener&&(r.removeEventListener("dragstart",this.handleTopDragStart),r.removeEventListener("dragstart",this.handleTopDragStartCapture,!0),r.removeEventListener("dragend",this.handleTopDragEndCapture,!0),r.removeEventListener("dragenter",this.handleTopDragEnter),r.removeEventListener("dragenter",this.handleTopDragEnterCapture,!0),r.removeEventListener("dragleave",this.handleTopDragLeaveCapture,!0),r.removeEventListener("dragover",this.handleTopDragOver),r.removeEventListener("dragover",this.handleTopDragOverCapture,!0),r.removeEventListener("drop",this.handleTopDrop),r.removeEventListener("drop",this.handleTopDropCapture,!0))}},{key:"getCurrentSourceNodeOptions",value:function(){var r=this.monitor.getSourceId(),n=this.sourceNodeOptions.get(r);return T7e({dropEffect:this.altKeyPressed?"copy":"move"},n||{})}},{key:"getCurrentDropEffect",value:function(){return this.isDraggingNativeItem()?"copy":this.getCurrentSourceNodeOptions().dropEffect}},{key:"getCurrentSourcePreviewNodeOptions",value:function(){var r=this.monitor.getSourceId(),n=this.sourcePreviewNodeOptions.get(r);return T7e({anchorX:.5,anchorY:.5,captureDraggingState:!1},n||{})}},{key:"isDraggingNativeItem",value:function(){var r=this.monitor.getItemType();return Object.keys(Oy).some(function(n){return Oy[n]===r})}},{key:"beginDragNativeItem",value:function(r,n){this.clearCurrentDragSourceNode(),this.currentNativeSource=x7e(r,n),this.currentNativeHandle=this.registry.addSource(r,this.currentNativeSource),this.actions.beginDrag([this.currentNativeHandle])}},{key:"setCurrentDragSourceNode",value:function(r){var n=this;this.clearCurrentDragSourceNode(),this.currentDragSourceNode=r;var o=1e3;this.mouseMoveTimeoutTimer=setTimeout(function(){var i;return(i=n.rootElement)===null||i===void 0?void 0:i.addEventListener("mousemove",n.endDragIfSourceWasRemovedFromDOM,!0)},o)}},{key:"clearCurrentDragSourceNode",value:function(){if(this.currentDragSourceNode){if(this.currentDragSourceNode=null,this.rootElement){var r;(r=this.window)===null||r===void 0||r.clearTimeout(this.mouseMoveTimeoutTimer||void 0),this.rootElement.removeEventListener("mousemove",this.endDragIfSourceWasRemovedFromDOM,!0)}return this.mouseMoveTimeoutTimer=null,!0}return!1}},{key:"handleDragStart",value:function(r,n){r.defaultPrevented||(this.dragStartSourceIds||(this.dragStartSourceIds=[]),this.dragStartSourceIds.unshift(n))}},{key:"handleDragEnter",value:function(r,n){this.dragEnterTargetIds.unshift(n)}},{key:"handleDragOver",value:function(r,n){this.dragOverTargetIds===null&&(this.dragOverTargetIds=[]),this.dragOverTargetIds.unshift(n)}},{key:"handleDrop",value:function(r,n){this.dropTargetIds.unshift(n)}}]),e}();var C7e=function(t,r,n){return new M7e(t,r,n)};function A7e(e,t,...r){if(K1r()&&t===void 0)throw new Error("invariant requires an error message argument");if(!e){let n;if(t===void 0)n=new Error("Minified exception occurred; use the non-minified dev environment for the full error message and additional helpful warnings.");else{let o=0;n=new Error(t.replace(/%s/g,function(){return r[o++]})),n.name="Invariant Violation"}throw n.framesToPop=1,n}}function K1r(){return typeof process!="undefined"&&!0}var cg;(function(e){e.mouse="mouse",e.touch="touch",e.keyboard="keyboard"})(cg||(cg={}));var X1r={Left:1,Right:2,Center:4},Q1r={Left:0,Center:1,Right:2};function FR(e){return e.button===void 0||e.button===Q1r.Left}function O7e(e){return e.buttons===void 0||(e.buttons&X1r.Left)===0}function UR(e){return!!e.targetTouches}var J1r=1;function P7e(e){let t=e.nodeType===J1r?e:e.parentElement;if(!t)return;let{top:r,left:n}=t.getBoundingClientRect();return{x:n,y:r}}function e_r(e,t){if(e.targetTouches.length===1)return qA(e.targetTouches[0]);if(t&&e.touches.length===1&&e.touches[0].target===t.target)return qA(e.touches[0])}function qA(e,t){return UR(e)?e_r(e,t):{x:e.clientX,y:e.clientY}}function N7e(e,t,r,n){return Math.sqrt(Math.pow(Math.abs(r-e),2)+Math.pow(Math.abs(n-t),2))}function D7e(e,t,r,n,o){if(!o)return!1;let i=Math.atan2(n-t,r-e)*180/Math.PI+180;for(let a=0;a<o.length;++a){let u=o[a];if(u&&(u.start==null||i>=u.start)&&(u.end==null||i<=u.end))return!0}return!1}var Yte=(()=>{let e=!1;try{addEventListener("test",()=>{},Object.defineProperty({},"passive",{get(){return e=!0,!0}}))}catch(t){}return e})();var BR=class{get delay(){var t;return(t=this.args.delay)!==null&&t!==void 0?t:0}get scrollAngleRanges(){return this.args.scrollAngleRanges}get getDropTargetElementsAtPoint(){return this.args.getDropTargetElementsAtPoint}get ignoreContextMenu(){var t;return(t=this.args.ignoreContextMenu)!==null&&t!==void 0?t:!1}get enableHoverOutsideTarget(){var t;return(t=this.args.enableHoverOutsideTarget)!==null&&t!==void 0?t:!1}get enableKeyboardEvents(){var t;return(t=this.args.enableKeyboardEvents)!==null&&t!==void 0?t:!1}get enableMouseEvents(){var t;return(t=this.args.enableMouseEvents)!==null&&t!==void 0?t:!1}get enableTouchEvents(){var t;return(t=this.args.enableTouchEvents)!==null&&t!==void 0?t:!0}get touchSlop(){return this.args.touchSlop||0}get delayTouchStart(){var t,r,n,o;return(o=(n=(t=this.args)===null||t===void 0?void 0:t.delayTouchStart)!==null&&n!==void 0?n:(r=this.args)===null||r===void 0?void 0:r.delay)!==null&&o!==void 0?o:0}get delayMouseStart(){var t,r,n,o;return(o=(n=(t=this.args)===null||t===void 0?void 0:t.delayMouseStart)!==null&&n!==void 0?n:(r=this.args)===null||r===void 0?void 0:r.delay)!==null&&o!==void 0?o:0}get window(){if(this.context&&this.context.window)return this.context.window;if(typeof window!="undefined")return window}get document(){var t;if(!((t=this.context)===null||t===void 0)&&t.document)return this.context.document;if(this.window)return this.window.document}get rootElement(){var t;return((t=this.args)===null||t===void 0?void 0:t.rootElement)||this.document}constructor(t,r){this.args=t,this.context=r}};var zA={[cg.mouse]:{start:"mousedown",move:"mousemove",end:"mouseup",contextmenu:"contextmenu"},[cg.touch]:{start:"touchstart",move:"touchmove",end:"touchend"},[cg.keyboard]:{keydown:"keydown"}},VR=class e{profile(){var t;return{sourceNodes:this.sourceNodes.size,sourcePreviewNodes:this.sourcePreviewNodes.size,sourcePreviewNodeOptions:this.sourcePreviewNodeOptions.size,targetNodes:this.targetNodes.size,dragOverTargetIds:((t=this.dragOverTargetIds)===null||t===void 0?void 0:t.length)||0}}get document(){return this.options.document}setup(){let t=this.options.rootElement;t&&(A7e(!e.isSetUp,"Cannot have two Touch backends at the same time."),e.isSetUp=!0,this.addEventListener(t,"start",this.getTopMoveStartHandler()),this.addEventListener(t,"start",this.handleTopMoveStartCapture,!0),this.addEventListener(t,"move",this.handleTopMove),this.addEventListener(t,"move",this.handleTopMoveCapture,!0),this.addEventListener(t,"end",this.handleTopMoveEndCapture,!0),this.options.enableMouseEvents&&!this.options.ignoreContextMenu&&this.addEventListener(t,"contextmenu",this.handleTopMoveEndCapture),this.options.enableKeyboardEvents&&this.addEventListener(t,"keydown",this.handleCancelOnEscape,!0))}teardown(){let t=this.options.rootElement;t&&(e.isSetUp=!1,this._mouseClientOffset={},this.removeEventListener(t,"start",this.handleTopMoveStartCapture,!0),this.removeEventListener(t,"start",this.handleTopMoveStart),this.removeEventListener(t,"move",this.handleTopMoveCapture,!0),this.removeEventListener(t,"move",this.handleTopMove),this.removeEventListener(t,"end",this.handleTopMoveEndCapture,!0),this.options.enableMouseEvents&&!this.options.ignoreContextMenu&&this.removeEventListener(t,"contextmenu",this.handleTopMoveEndCapture),this.options.enableKeyboardEvents&&this.removeEventListener(t,"keydown",this.handleCancelOnEscape,!0),this.uninstallSourceNodeRemovalObserver())}addEventListener(t,r,n,o=!1){let i=Yte?{capture:o,passive:!1}:o;this.listenerTypes.forEach(function(a){let u=zA[a][r];u&&t.addEventListener(u,n,i)})}removeEventListener(t,r,n,o=!1){let i=Yte?{capture:o,passive:!1}:o;this.listenerTypes.forEach(function(a){let u=zA[a][r];u&&t.removeEventListener(u,n,i)})}connectDragSource(t,r){let n=this.handleMoveStart.bind(this,t);return this.sourceNodes.set(t,r),this.addEventListener(r,"start",n),()=>{this.sourceNodes.delete(t),this.removeEventListener(r,"start",n)}}connectDragPreview(t,r,n){return this.sourcePreviewNodeOptions.set(t,n),this.sourcePreviewNodes.set(t,r),()=>{this.sourcePreviewNodes.delete(t),this.sourcePreviewNodeOptions.delete(t)}}connectDropTarget(t,r){let n=this.options.rootElement;if(!this.document||!n)return()=>{};let o=i=>{if(!this.document||!n||!this.monitor.isDragging())return;let a;switch(i.type){case zA.mouse.move:a={x:i.clientX,y:i.clientY};break;case zA.touch.move:var u,d;a={x:((u=i.touches[0])===null||u===void 0?void 0:u.clientX)||0,y:((d=i.touches[0])===null||d===void 0?void 0:d.clientY)||0};break}let h=a!=null?this.document.elementFromPoint(a.x,a.y):void 0,v=h&&r.contains(h);if(h===r||v)return this.handleMove(i,t)};return this.addEventListener(this.document.body,"move",o),this.targetNodes.set(t,r),()=>{this.document&&(this.targetNodes.delete(t),this.removeEventListener(this.document.body,"move",o))}}getTopMoveStartHandler(){return!this.options.delayTouchStart&&!this.options.delayMouseStart?this.handleTopMoveStart:this.handleTopMoveStartDelay}installSourceNodeRemovalObserver(t){this.uninstallSourceNodeRemovalObserver(),this.draggedSourceNode=t,this.draggedSourceNodeRemovalObserver=new MutationObserver(()=>{t&&!t.parentElement&&(this.resurrectSourceNode(),this.uninstallSourceNodeRemovalObserver())}),!(!t||!t.parentElement)&&this.draggedSourceNodeRemovalObserver.observe(t.parentElement,{childList:!0})}resurrectSourceNode(){this.document&&this.draggedSourceNode&&(this.draggedSourceNode.style.display="none",this.draggedSourceNode.removeAttribute("data-reactid"),this.document.body.appendChild(this.draggedSourceNode))}uninstallSourceNodeRemovalObserver(){this.draggedSourceNodeRemovalObserver&&this.draggedSourceNodeRemovalObserver.disconnect(),this.draggedSourceNodeRemovalObserver=void 0,this.draggedSourceNode=void 0}constructor(t,r,n){this.getSourceClientOffset=o=>{let i=this.sourceNodes.get(o);return i&&P7e(i)},this.handleTopMoveStartCapture=o=>{FR(o)&&(this.moveStartSourceIds=[])},this.handleMoveStart=o=>{Array.isArray(this.moveStartSourceIds)&&this.moveStartSourceIds.unshift(o)},this.handleTopMoveStart=o=>{if(!FR(o))return;let i=qA(o);i&&(UR(o)&&(this.lastTargetTouchFallback=o.targetTouches[0]),this._mouseClientOffset=i),this.waitingForDelay=!1},this.handleTopMoveStartDelay=o=>{if(!FR(o))return;let i=o.type===zA.touch.start?this.options.delayTouchStart:this.options.delayMouseStart;this.timeout=setTimeout(this.handleTopMoveStart.bind(this,o),i),this.waitingForDelay=!0},this.handleTopMoveCapture=()=>{this.dragOverTargetIds=[]},this.handleMove=(o,i)=>{this.dragOverTargetIds&&this.dragOverTargetIds.unshift(i)},this.handleTopMove=o=>{if(this.timeout&&clearTimeout(this.timeout),!this.document||this.waitingForDelay)return;let{moveStartSourceIds:i,dragOverTargetIds:a}=this,u=this.options.enableHoverOutsideTarget,d=qA(o,this.lastTargetTouchFallback);if(!d)return;if(this._isScrolling||!this.monitor.isDragging()&&D7e(this._mouseClientOffset.x||0,this._mouseClientOffset.y||0,d.x,d.y,this.options.scrollAngleRanges)){this._isScrolling=!0;return}if(!this.monitor.isDragging()&&this._mouseClientOffset.hasOwnProperty("x")&&i&&N7e(this._mouseClientOffset.x||0,this._mouseClientOffset.y||0,d.x,d.y)>(this.options.touchSlop?this.options.touchSlop:0)&&(this.moveStartSourceIds=void 0,this.actions.beginDrag(i,{clientOffset:this._mouseClientOffset,getSourceClientOffset:this.getSourceClientOffset,publishSource:!1})),!this.monitor.isDragging())return;let h=this.sourceNodes.get(this.monitor.getSourceId());this.installSourceNodeRemovalObserver(h),this.actions.publishDragSource(),o.cancelable&&o.preventDefault();let v=(a||[]).map(O=>this.targetNodes.get(O)).filter(O=>!!O),b=this.options.getDropTargetElementsAtPoint?this.options.getDropTargetElementsAtPoint(d.x,d.y,v):this.document.elementsFromPoint(d.x,d.y),x=[];for(let O in b){if(!b.hasOwnProperty(O))continue;let D=b[O];for(D!=null&&x.push(D);D;)D=D.parentElement,D&&x.indexOf(D)===-1&&x.push(D)}let M=x.filter(O=>v.indexOf(O)>-1).map(O=>this._getDropTargetId(O)).filter(O=>!!O).filter((O,D,k)=>k.indexOf(O)===D);if(u)for(let O in this.targetNodes){let D=this.targetNodes.get(O);if(h&&D&&D.contains(h)&&M.indexOf(O)===-1){M.unshift(O);break}}M.reverse(),this.actions.hover(M,{clientOffset:d})},this._getDropTargetId=o=>{let i=this.targetNodes.keys(),a=i.next();for(;a.done===!1;){let u=a.value;if(o===this.targetNodes.get(u))return u;a=i.next()}},this.handleTopMoveEndCapture=o=>{if(this._isScrolling=!1,this.lastTargetTouchFallback=void 0,!!O7e(o)){if(!this.monitor.isDragging()||this.monitor.didDrop()){this.moveStartSourceIds=void 0;return}o.cancelable&&o.preventDefault(),this._mouseClientOffset={},this.uninstallSourceNodeRemovalObserver(),this.actions.drop(),this.actions.endDrag()}},this.handleCancelOnEscape=o=>{o.key==="Escape"&&this.monitor.isDragging()&&(this._mouseClientOffset={},this.uninstallSourceNodeRemovalObserver(),this.actions.endDrag())},this.options=new BR(n,r),this.actions=t.getActions(),this.monitor=t.getMonitor(),this.sourceNodes=new Map,this.sourcePreviewNodes=new Map,this.sourcePreviewNodeOptions=new Map,this.targetNodes=new Map,this.listenerTypes=[],this._mouseClientOffset={},this._isScrolling=!1,this.options.enableMouseEvents&&this.listenerTypes.push(cg.mouse),this.options.enableTouchEvents&&this.listenerTypes.push(cg.touch),this.options.enableKeyboardEvents&&this.listenerTypes.push(cg.keyboard)}};var L7e=function(t,r={},n={}){return new VR(t,r,n)};function Kte(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function t_r(e,t,r){r_r(e,t),t.set(e,r)}function r_r(e,t){if(t.has(e))throw new TypeError("Cannot initialize the same private elements twice on an object")}function GR(e,t){var r=k7e(e,t,"get");return n_r(e,r)}function n_r(e,t){return t.get?t.get.call(e):t.value}function o_r(e,t,r){var n=k7e(e,t,"set");return i_r(e,n,r),r}function k7e(e,t,r){if(!t.has(e))throw new TypeError("attempted to "+r+" private field on non-instance");return t.get(e)}function i_r(e,t,r){if(t.set)t.set.call(e,r);else{if(!t.writable)throw new TypeError("attempted to set read only private field");t.value=r}}var jE=new WeakMap,HR=class{constructor(){t_r(this,jE,{writable:!0,value:void 0}),Kte(this,"register",t=>{GR(this,jE).push(t)}),Kte(this,"unregister",t=>{let r;for(;(r=GR(this,jE).indexOf(t))!==-1;)GR(this,jE).splice(r,1)}),Kte(this,"backendChanged",t=>{for(let r of GR(this,jE))r.backendChanged(t)}),o_r(this,jE,[])}};function cd(e,t,r){a_r(e,t),t.set(e,r)}function a_r(e,t){if(t.has(e))throw new TypeError("Cannot initialize the same private elements twice on an object")}function Mh(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function Yn(e,t){var r=z7e(e,t,"get");return s_r(e,r)}function s_r(e,t){return t.get?t.get.call(e):t.value}function qE(e,t,r){var n=z7e(e,t,"set");return l_r(e,n,r),r}function z7e(e,t,r){if(!t.has(e))throw new TypeError("attempted to "+r+" private field on non-instance");return t.get(e)}function l_r(e,t,r){if(t.set)t.set.call(e,r);else{if(!t.writable)throw new TypeError("attempted to set read only private field");t.value=r}}var Kp=new WeakMap,WR=new WeakMap,Xp=new WeakMap,Py=new WeakMap,b_=new WeakMap,R7e=new WeakMap,j7e=new WeakMap,q7e=new WeakMap,Xte=new WeakMap,Qte=new WeakMap,$R=new WeakMap,FA=class e{constructor(t,r,n){if(cd(this,Kp,{writable:!0,value:void 0}),cd(this,WR,{writable:!0,value:void 0}),cd(this,Xp,{writable:!0,value:void 0}),cd(this,Py,{writable:!0,value:void 0}),cd(this,b_,{writable:!0,value:void 0}),cd(this,R7e,{writable:!0,value:(o,i,a)=>{var u,d;if(!a.backend)throw new Error("You must specify a 'backend' property in your Backend entry: ".concat(JSON.stringify(a)));let h=a.backend(o,i,a.options),v=a.id,b=!a.id&&h&&h.constructor;if(b&&(v=h.constructor.name),v)b&&console.warn(`Deprecation notice: You are using a pipeline which doesn't include backends' 'id'.
        This might be unsupported in the future, please specify 'id' explicitely for every backend.`);else throw new Error("You must specify an 'id' property in your Backend entry: ".concat(JSON.stringify(a),`
        see this guide: https://github.com/louisbrunner/dnd-multi-backend/tree/master/packages/react-dnd-multi-backend#migrating-from-5xx`));if(Yn(this,Xp)[v])throw new Error(`You must specify a unique 'id' property in your Backend entry:
        `.concat(JSON.stringify(a)," (conflicts with: ").concat(JSON.stringify(Yn(this,Xp)[v]),")"));return{id:v,instance:h,preview:(u=a.preview)!==null&&u!==void 0?u:!1,transition:a.transition,skipDispatchOnTransition:(d=a.skipDispatchOnTransition)!==null&&d!==void 0?d:!1}}}),Mh(this,"setup",()=>{if(typeof window!="undefined"){if(e.isSetUp)throw new Error("Cannot have two MultiBackends at the same time.");e.isSetUp=!0,Yn(this,j7e).call(this,window),Yn(this,Xp)[Yn(this,Kp)].instance.setup()}}),Mh(this,"teardown",()=>{typeof window!="undefined"&&(e.isSetUp=!1,Yn(this,q7e).call(this,window),Yn(this,Xp)[Yn(this,Kp)].instance.teardown())}),Mh(this,"connectDragSource",(o,i,a)=>Yn(this,$R).call(this,"connectDragSource",o,i,a)),Mh(this,"connectDragPreview",(o,i,a)=>Yn(this,$R).call(this,"connectDragPreview",o,i,a)),Mh(this,"connectDropTarget",(o,i,a)=>Yn(this,$R).call(this,"connectDropTarget",o,i,a)),Mh(this,"profile",()=>Yn(this,Xp)[Yn(this,Kp)].instance.profile()),Mh(this,"previewEnabled",()=>Yn(this,Xp)[Yn(this,Kp)].preview),Mh(this,"previewsList",()=>Yn(this,WR)),Mh(this,"backendsList",()=>Yn(this,Py)),cd(this,j7e,{writable:!0,value:o=>{Yn(this,Py).forEach(i=>{i.transition&&o.addEventListener(i.transition.event,Yn(this,Xte))})}}),cd(this,q7e,{writable:!0,value:o=>{Yn(this,Py).forEach(i=>{i.transition&&o.removeEventListener(i.transition.event,Yn(this,Xte))})}}),cd(this,Xte,{writable:!0,value:o=>{let i=Yn(this,Kp);if(Yn(this,Py).some(u=>u.id!==Yn(this,Kp)&&u.transition&&u.transition.check(o)?(qE(this,Kp,u.id),!0):!1),Yn(this,Kp)!==i){var a;Yn(this,Xp)[i].instance.teardown(),Object.keys(Yn(this,b_)).forEach(v=>{let b=Yn(this,b_)[v];b.unsubscribe(),b.unsubscribe=Yn(this,Qte).call(this,b.func,...b.args)}),Yn(this,WR).backendChanged(this);let u=Yn(this,Xp)[Yn(this,Kp)];if(u.instance.setup(),u.skipDispatchOnTransition)return;let d=o.constructor,h=new d(o.type,o);(a=o.target)===null||a===void 0||a.dispatchEvent(h)}}}),cd(this,Qte,{writable:!0,value:(o,i,a,u)=>Yn(this,Xp)[Yn(this,Kp)].instance[o](i,a,u)}),cd(this,$R,{writable:!0,value:(o,i,a,u)=>{let d="".concat(o,"_").concat(i),h=Yn(this,Qte).call(this,o,i,a,u);return Yn(this,b_)[d]={func:o,args:[i,a,u],unsubscribe:h},()=>{Yn(this,b_)[d].unsubscribe(),delete Yn(this,b_)[d]}}}),!n||!n.backends||n.backends.length<1)throw new Error(`You must specify at least one Backend, if you are coming from 2.x.x (or don't understand this error)
        see this guide: https://github.com/louisbrunner/dnd-multi-backend/tree/master/packages/react-dnd-multi-backend#migrating-from-2xx`);qE(this,WR,new HR),qE(this,Xp,{}),qE(this,Py,[]),n.backends.forEach(o=>{let i=Yn(this,R7e).call(this,t,r,o);Yn(this,Xp)[i.id]=i,Yn(this,Py).push(i)}),qE(this,Kp,Yn(this,Py)[0].id),qE(this,b_,{})}};Mh(FA,"isSetUp",!1);var Jte=(e,t,r)=>new FA(e,t,r);var UA=(e,t)=>({event:e,check:t});var ere=UA("touchstart",e=>{let t=e;return t.touches!==null&&t.touches!==void 0}),u_r=UA("dragstart",e=>e.type.indexOf("drag")!==-1||e.type.indexOf("drop")!==-1),c_r=UA("mousedown",e=>e.type.indexOf("touch")===-1&&e.type.indexOf("mouse")!==-1),tre=UA("pointerdown",e=>e.pointerType=="mouse");var rre={backends:[{id:"html5",backend:C7e,transition:tre},{id:"touch",backend:L7e,options:{enableMouseEvents:!0},preview:!0,transition:ere}]};var Ry=Z(Pe());var F7e=Z(Pe()),ZR=(0,F7e.createContext)({dragDropManager:void 0});var X9e=Z(H7e()),i6=Z(Pe());var op;(function(e){e.SOURCE="SOURCE",e.TARGET="TARGET"})(op||(op={}));function Jr(e,t){for(var r=arguments.length,n=new Array(r>2?r-2:0),o=2;o<r;o++)n[o-2]=arguments[o];if(!e){var i;if(t===void 0)i=new Error("Minified exception occurred; use the non-minified dev environment for the full error message and additional helpful warnings.");else{var a=0;i=new Error(t.replace(/%s/g,function(){return n[a++]})),i.name="Invariant Violation"}throw i.framesToPop=1,i}}var zE="dnd-core/INIT_COORDS",Ny="dnd-core/BEGIN_DRAG",FE="dnd-core/PUBLISH_DRAG_SOURCE",Dy="dnd-core/HOVER",Ly="dnd-core/DROP",ky="dnd-core/END_DRAG";function ore(e,t){return{type:zE,payload:{sourceClientOffset:t||null,clientOffset:e||null}}}function YR(e){"@babel/helpers - typeof";return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?YR=function(r){return typeof r}:YR=function(r){return r&&typeof Symbol=="function"&&r.constructor===Symbol&&r!==Symbol.prototype?"symbol":typeof r},YR(e)}function W7e(e,t,r){return t.split(".").reduce(function(n,o){return n&&n[o]?n[o]:r||null},e)}function $7e(e,t){return e.filter(function(r){return r!==t})}function KR(e){return YR(e)==="object"}function Z7e(e,t){var r=new Map,n=function(a){r.set(a,r.has(a)?r.get(a)+1:1)};e.forEach(n),t.forEach(n);var o=[];return r.forEach(function(i,a){i===1&&o.push(a)}),o}function Y7e(e,t){return e.filter(function(r){return t.indexOf(r)>-1})}var m_r={type:zE,payload:{clientOffset:null,sourceClientOffset:null}};function K7e(e){return function(){var r=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[],n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{publishSource:!0},o=n.publishSource,i=o===void 0?!0:o,a=n.clientOffset,u=n.getSourceClientOffset,d=e.getMonitor(),h=e.getRegistry();e.dispatch(ore(a)),g_r(r,d,h);var v=__r(r,d);if(v===null){e.dispatch(m_r);return}var b=null;if(a){if(!u)throw new Error("getSourceClientOffset must be defined");v_r(u),b=u(v)}e.dispatch(ore(a,b));var x=h.getSource(v),M=x.beginDrag(d,v);if(M!=null){y_r(M),h.pinSource(v);var O=h.getSourceType(v);return{type:Ny,payload:{itemType:O,item:M,sourceId:v,clientOffset:a||null,sourceClientOffset:b||null,isSourcePublic:!!i}}}}}function g_r(e,t,r){Jr(!t.isDragging(),"Cannot call beginDrag while dragging."),e.forEach(function(n){Jr(r.getSource(n),"Expected sourceIds to be registered.")})}function v_r(e){Jr(typeof e=="function","When clientOffset is provided, getSourceClientOffset must be a function.")}function y_r(e){Jr(KR(e),"Item must be an object.")}function __r(e,t){for(var r=null,n=e.length-1;n>=0;n--)if(t.canDragSource(e[n])){r=e[n];break}return r}function X7e(e){return function(){var r=e.getMonitor();if(r.isDragging())return{type:FE}}}function VA(e,t){return t===null?e===null:Array.isArray(e)?e.some(function(r){return r===t}):e===t}function Q7e(e){return function(r){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},o=n.clientOffset;b_r(r);var i=r.slice(0),a=e.getMonitor(),u=e.getRegistry();x_r(i,a,u);var d=a.getItemType();return w_r(i,u,d),E_r(i,a,u),{type:Dy,payload:{targetIds:i,clientOffset:o||null}}}}function b_r(e){Jr(Array.isArray(e),"Expected targetIds to be an array.")}function x_r(e,t,r){Jr(t.isDragging(),"Cannot call hover while not dragging."),Jr(!t.didDrop(),"Cannot call hover after drop.");for(var n=0;n<e.length;n++){var o=e[n];Jr(e.lastIndexOf(o)===n,"Expected targetIds to be unique in the passed array.");var i=r.getTarget(o);Jr(i,"Expected targetIds to be registered.")}}function w_r(e,t,r){for(var n=e.length-1;n>=0;n--){var o=e[n],i=t.getTargetType(o);VA(i,r)||e.splice(n,1)}}function E_r(e,t,r){e.forEach(function(n){var o=r.getTarget(n);o.hover(t,n)})}function J7e(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(o){return Object.getOwnPropertyDescriptor(e,o).enumerable})),r.push.apply(r,n)}return r}function e9e(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?J7e(Object(r),!0).forEach(function(n){S_r(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):J7e(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function S_r(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function t9e(e){return function(){var r=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},n=e.getMonitor(),o=e.getRegistry();T_r(n);var i=C_r(n);i.forEach(function(a,u){var d=I_r(a,u,o,n),h={type:Ly,payload:{dropResult:e9e(e9e({},r),d)}};e.dispatch(h)})}}function T_r(e){Jr(e.isDragging(),"Cannot call drop while not dragging."),Jr(!e.didDrop(),"Cannot call drop twice during one drag operation.")}function I_r(e,t,r,n){var o=r.getTarget(e),i=o?o.drop(n,e):void 0;return M_r(i),typeof i=="undefined"&&(i=t===0?{}:n.getDropResult()),i}function M_r(e){Jr(typeof e=="undefined"||KR(e),"Drop result must either be an object or undefined.")}function C_r(e){var t=e.getTargetIds().filter(e.canDropOnTarget,e);return t.reverse(),t}function r9e(e){return function(){var r=e.getMonitor(),n=e.getRegistry();A_r(r);var o=r.getSourceId();if(o!=null){var i=n.getSource(o,!0);i.endDrag(r,o),n.unpinSource()}return{type:ky}}}function A_r(e){Jr(e.isDragging(),"Cannot call endDrag while not dragging.")}function n9e(e){return{beginDrag:K7e(e),publishDragSource:X7e(e),hover:Q7e(e),drop:t9e(e),endDrag:r9e(e)}}function O_r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o9e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function P_r(e,t,r){return t&&o9e(e.prototype,t),r&&o9e(e,r),e}function GA(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var i9e=function(){function e(t,r){var n=this;O_r(this,e),GA(this,"store",void 0),GA(this,"monitor",void 0),GA(this,"backend",void 0),GA(this,"isSetUp",!1),GA(this,"handleRefCountChange",function(){var o=n.store.getState().refCount>0;n.backend&&(o&&!n.isSetUp?(n.backend.setup(),n.isSetUp=!0):!o&&n.isSetUp&&(n.backend.teardown(),n.isSetUp=!1))}),this.store=t,this.monitor=r,t.subscribe(this.handleRefCountChange)}return P_r(e,[{key:"receiveBackend",value:function(r){this.backend=r}},{key:"getMonitor",value:function(){return this.monitor}},{key:"getBackend",value:function(){return this.backend}},{key:"getRegistry",value:function(){return this.monitor.registry}},{key:"getActions",value:function(){var r=this,n=this.store.dispatch;function o(a){return function(){for(var u=arguments.length,d=new Array(u),h=0;h<u;h++)d[h]=arguments[h];var v=a.apply(r,d);typeof v!="undefined"&&n(v)}}var i=n9e(this);return Object.keys(i).reduce(function(a,u){var d=i[u];return a[u]=o(d),a},{})}},{key:"dispatch",value:function(r){this.store.dispatch(r)}}]),e}();function Do(e){"@babel/helpers - typeof";return Do=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Do(e)}function a9e(e,t){if(Do(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t||"default");if(Do(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function XR(e){var t=a9e(e,"string");return Do(t)=="symbol"?t:t+""}function Wt(e,t,r){return(t=XR(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function s9e(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(o){return Object.getOwnPropertyDescriptor(e,o).enumerable})),r.push.apply(r,n)}return r}function er(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?s9e(Object(r),!0).forEach(function(n){Wt(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):s9e(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function Qp(e){return"Minified Redux error #"+e+"; visit https://redux.js.org/Errors?code="+e+" for the full message or use the non-minified dev environment for full errors. "}var l9e=function(){return typeof Symbol=="function"&&Symbol.observable||"@@observable"}(),ire=function(){return Math.random().toString(36).substring(7).split("").join(".")},u9e={INIT:"@@redux/INIT"+ire(),REPLACE:"@@redux/REPLACE"+ire(),PROBE_UNKNOWN_ACTION:function(){return"@@redux/PROBE_UNKNOWN_ACTION"+ire()}};function N_r(e){if(typeof e!="object"||e===null)return!1;for(var t=e;Object.getPrototypeOf(t)!==null;)t=Object.getPrototypeOf(t);return Object.getPrototypeOf(e)===t}function are(e,t,r){var n;if(typeof t=="function"&&typeof r=="function"||typeof r=="function"&&typeof arguments[3]=="function")throw new Error(Qp(0));if(typeof t=="function"&&typeof r=="undefined"&&(r=t,t=void 0),typeof r!="undefined"){if(typeof r!="function")throw new Error(Qp(1));return r(are)(e,t)}if(typeof e!="function")throw new Error(Qp(2));var o=e,i=t,a=[],u=a,d=!1;function h(){u===a&&(u=a.slice())}function v(){if(d)throw new Error(Qp(3));return i}function b(D){if(typeof D!="function")throw new Error(Qp(4));if(d)throw new Error(Qp(5));var k=!0;return h(),u.push(D),function(){if(k){if(d)throw new Error(Qp(6));k=!1,h();var q=u.indexOf(D);u.splice(q,1),a=null}}}function x(D){if(!N_r(D))throw new Error(Qp(7));if(typeof D.type=="undefined")throw new Error(Qp(8));if(d)throw new Error(Qp(9));try{d=!0,i=o(i,D)}finally{d=!1}for(var k=a=u,R=0;R<k.length;R++){var q=k[R];q()}return D}function M(D){if(typeof D!="function")throw new Error(Qp(10));o=D,x({type:u9e.REPLACE})}function O(){var D,k=b;return D={subscribe:function(q){if(typeof q!="object"||q===null)throw new Error(Qp(11));function B(){q.next&&q.next(v())}B();var G=k(B);return{unsubscribe:G}}},D[l9e]=function(){return this},D}return x({type:u9e.INIT}),n={dispatch:x,subscribe:b,getState:v,replaceReducer:M},n[l9e]=O,n}var D_r=function(t,r){return t===r};function c9e(e,t){return!e&&!t?!0:!e||!t?!1:e.x===t.x&&e.y===t.y}function p9e(e,t){var r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:D_r;if(e.length!==t.length)return!1;for(var n=0;n<e.length;++n)if(!r(e[n],t[n]))return!1;return!0}function f9e(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(o){return Object.getOwnPropertyDescriptor(e,o).enumerable})),r.push.apply(r,n)}return r}function d9e(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?f9e(Object(r),!0).forEach(function(n){L_r(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):f9e(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function L_r(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var h9e={initialSourceClientOffset:null,initialClientOffset:null,clientOffset:null};function m9e(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:h9e,t=arguments.length>1?arguments[1]:void 0,r=t.payload;switch(t.type){case zE:case Ny:return{initialSourceClientOffset:r.sourceClientOffset,initialClientOffset:r.clientOffset,clientOffset:r.clientOffset};case Dy:return c9e(e.clientOffset,r.clientOffset)?e:d9e(d9e({},e),{},{clientOffset:r.clientOffset});case ky:case Ly:return h9e;default:return e}}var HA="dnd-core/ADD_SOURCE",WA="dnd-core/ADD_TARGET",$A="dnd-core/REMOVE_SOURCE",x_="dnd-core/REMOVE_TARGET";function g9e(e){return{type:HA,payload:{sourceId:e}}}function v9e(e){return{type:WA,payload:{targetId:e}}}function y9e(e){return{type:$A,payload:{sourceId:e}}}function _9e(e){return{type:x_,payload:{targetId:e}}}function b9e(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(o){return Object.getOwnPropertyDescriptor(e,o).enumerable})),r.push.apply(r,n)}return r}function Jp(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?b9e(Object(r),!0).forEach(function(n){k_r(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):b9e(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function k_r(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var R_r={itemType:null,item:null,sourceId:null,targetIds:[],dropResult:null,didDrop:!1,isSourcePublic:null};function x9e(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:R_r,t=arguments.length>1?arguments[1]:void 0,r=t.payload;switch(t.type){case Ny:return Jp(Jp({},e),{},{itemType:r.itemType,item:r.item,sourceId:r.sourceId,isSourcePublic:r.isSourcePublic,dropResult:null,didDrop:!1});case FE:return Jp(Jp({},e),{},{isSourcePublic:!0});case Dy:return Jp(Jp({},e),{},{targetIds:r.targetIds});case x_:return e.targetIds.indexOf(r.targetId)===-1?e:Jp(Jp({},e),{},{targetIds:$7e(e.targetIds,r.targetId)});case Ly:return Jp(Jp({},e),{},{dropResult:r.dropResult,didDrop:!0,targetIds:[]});case ky:return Jp(Jp({},e),{},{itemType:null,item:null,sourceId:null,dropResult:null,didDrop:!1,isSourcePublic:null,targetIds:[]});default:return e}}function w9e(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:0,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case HA:case WA:return e+1;case $A:case x_:return e-1;default:return e}}var UE=[],QR=[];UE.__IS_NONE__=!0;QR.__IS_ALL__=!0;function E9e(e,t){if(e===UE)return!1;if(e===QR||typeof t=="undefined")return!0;var r=Y7e(t,e);return r.length>0}function S9e(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:UE,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case Dy:break;case HA:case WA:case x_:case $A:return UE;case Ny:case FE:case ky:case Ly:default:return QR}var r=t.payload,n=r.targetIds,o=n===void 0?[]:n,i=r.prevTargetIds,a=i===void 0?[]:i,u=Z7e(o,a),d=u.length>0||!p9e(o,a);if(!d)return UE;var h=a[a.length-1],v=o[o.length-1];return h!==v&&(h&&u.push(h),v&&u.push(v)),u}function T9e(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:0;return e+1}function I9e(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(o){return Object.getOwnPropertyDescriptor(e,o).enumerable})),r.push.apply(r,n)}return r}function M9e(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?I9e(Object(r),!0).forEach(function(n){j_r(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):I9e(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function j_r(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function C9e(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0;return{dirtyHandlerIds:S9e(e.dirtyHandlerIds,{type:t.type,payload:M9e(M9e({},t.payload),{},{prevTargetIds:W7e(e,"dragOperation.targetIds",[])})}),dragOffset:m9e(e.dragOffset,t),refCount:w9e(e.refCount,t),dragOperation:x9e(e.dragOperation,t),stateId:T9e(e.stateId)}}function q_r(e,t){return{x:e.x+t.x,y:e.y+t.y}}function A9e(e,t){return{x:e.x-t.x,y:e.y-t.y}}function O9e(e){var t=e.clientOffset,r=e.initialClientOffset,n=e.initialSourceClientOffset;return!t||!r||!n?null:A9e(q_r(t,n),r)}function P9e(e){var t=e.clientOffset,r=e.initialClientOffset;return!t||!r?null:A9e(t,r)}function z_r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function N9e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function F_r(e,t,r){return t&&N9e(e.prototype,t),r&&N9e(e,r),e}function D9e(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var L9e=function(){function e(t,r){z_r(this,e),D9e(this,"store",void 0),D9e(this,"registry",void 0),this.store=t,this.registry=r}return F_r(e,[{key:"subscribeToStateChange",value:function(r){var n=this,o=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{handlerIds:void 0},i=o.handlerIds;Jr(typeof r=="function","listener must be a function."),Jr(typeof i=="undefined"||Array.isArray(i),"handlerIds, when specified, must be an array of strings.");var a=this.store.getState().stateId,u=function(){var h=n.store.getState(),v=h.stateId;try{var b=v===a||v===a+1&&!E9e(h.dirtyHandlerIds,i);b||r()}finally{a=v}};return this.store.subscribe(u)}},{key:"subscribeToOffsetChange",value:function(r){var n=this;Jr(typeof r=="function","listener must be a function.");var o=this.store.getState().dragOffset,i=function(){var u=n.store.getState().dragOffset;u!==o&&(o=u,r())};return this.store.subscribe(i)}},{key:"canDragSource",value:function(r){if(!r)return!1;var n=this.registry.getSource(r);return Jr(n,"Expected to find a valid source. sourceId=".concat(r)),this.isDragging()?!1:n.canDrag(this,r)}},{key:"canDropOnTarget",value:function(r){if(!r)return!1;var n=this.registry.getTarget(r);if(Jr(n,"Expected to find a valid target. targetId=".concat(r)),!this.isDragging()||this.didDrop())return!1;var o=this.registry.getTargetType(r),i=this.getItemType();return VA(o,i)&&n.canDrop(this,r)}},{key:"isDragging",value:function(){return!!this.getItemType()}},{key:"isDraggingSource",value:function(r){if(!r)return!1;var n=this.registry.getSource(r,!0);if(Jr(n,"Expected to find a valid source. sourceId=".concat(r)),!this.isDragging()||!this.isSourcePublic())return!1;var o=this.registry.getSourceType(r),i=this.getItemType();return o!==i?!1:n.isDragging(this,r)}},{key:"isOverTarget",value:function(r){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{shallow:!1};if(!r)return!1;var o=n.shallow;if(!this.isDragging())return!1;var i=this.registry.getTargetType(r),a=this.getItemType();if(a&&!VA(i,a))return!1;var u=this.getTargetIds();if(!u.length)return!1;var d=u.indexOf(r);return o?d===u.length-1:d>-1}},{key:"getItemType",value:function(){return this.store.getState().dragOperation.itemType}},{key:"getItem",value:function(){return this.store.getState().dragOperation.item}},{key:"getSourceId",value:function(){return this.store.getState().dragOperation.sourceId}},{key:"getTargetIds",value:function(){return this.store.getState().dragOperation.targetIds}},{key:"getDropResult",value:function(){return this.store.getState().dragOperation.dropResult}},{key:"didDrop",value:function(){return this.store.getState().dragOperation.didDrop}},{key:"isSourcePublic",value:function(){return!!this.store.getState().dragOperation.isSourcePublic}},{key:"getInitialClientOffset",value:function(){return this.store.getState().dragOffset.initialClientOffset}},{key:"getInitialSourceClientOffset",value:function(){return this.store.getState().dragOffset.initialSourceClientOffset}},{key:"getClientOffset",value:function(){return this.store.getState().dragOffset.clientOffset}},{key:"getSourceClientOffset",value:function(){return O9e(this.store.getState().dragOffset)}},{key:"getDifferenceFromInitialOffset",value:function(){return P9e(this.store.getState().dragOffset)}}]),e}();var U_r=0;function k9e(){return U_r++}function JR(e){"@babel/helpers - typeof";return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?JR=function(r){return typeof r}:JR=function(r){return r&&typeof Symbol=="function"&&r.constructor===Symbol&&r!==Symbol.prototype?"symbol":typeof r},JR(e)}function R9e(e){Jr(typeof e.canDrag=="function","Expected canDrag to be a function."),Jr(typeof e.beginDrag=="function","Expected beginDrag to be a function."),Jr(typeof e.endDrag=="function","Expected endDrag to be a function.")}function j9e(e){Jr(typeof e.canDrop=="function","Expected canDrop to be a function."),Jr(typeof e.hover=="function","Expected hover to be a function."),Jr(typeof e.drop=="function","Expected beginDrag to be a function.")}function e6(e,t){if(t&&Array.isArray(e)){e.forEach(function(r){return e6(r,!1)});return}Jr(typeof e=="string"||JR(e)==="symbol",t?"Type can only be a string, a symbol, or an array of either.":"Type can only be a string or a symbol.")}var q9e=typeof global!="undefined"?global:self,z9e=q9e.MutationObserver||q9e.WebKitMutationObserver;function sre(e){return function(){let r=setTimeout(o,0),n=setInterval(o,50);function o(){clearTimeout(r),clearInterval(n),e()}}}function B_r(e){let t=1,r=new z9e(e),n=document.createTextNode("");return r.observe(n,{characterData:!0}),function(){t=-t,n.data=t}}var F9e=typeof z9e=="function"?B_r:sre;var t6=class{enqueueTask(t){let{queue:r,requestFlush:n}=this;r.length||(n(),this.flushing=!0),r[r.length]=t}constructor(){this.queue=[],this.pendingErrors=[],this.flushing=!1,this.index=0,this.capacity=1024,this.flush=()=>{let{queue:t}=this;for(;this.index<t.length;){let r=this.index;if(this.index++,t[r].call(),this.index>this.capacity){for(let n=0,o=t.length-this.index;n<o;n++)t[n]=t[n+this.index];t.length-=this.index,this.index=0}}t.length=0,this.index=0,this.flushing=!1},this.registerPendingError=t=>{this.pendingErrors.push(t),this.requestErrorThrow()},this.requestFlush=F9e(this.flush),this.requestErrorThrow=sre(()=>{if(this.pendingErrors.length)throw this.pendingErrors.shift()})}};var r6=class{call(){try{this.task&&this.task()}catch(t){this.onError(t)}finally{this.task=null,this.release(this)}}constructor(t,r){this.onError=t,this.release=r,this.task=null}};var n6=class{create(t){let r=this.freeTasks,n=r.length?r.pop():new r6(this.onError,o=>r[r.length]=o);return n.task=t,n}constructor(t){this.onError=t,this.freeTasks=[]}};var U9e=new t6,V_r=new n6(U9e.registerPendingError);function B9e(e){U9e.enqueueTask(V_r.create(e))}function G_r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function V9e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function H_r(e,t,r){return t&&V9e(e.prototype,t),r&&V9e(e,r),e}function BE(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function W_r(e,t){return K_r(e)||Y_r(e,t)||Z_r(e,t)||$_r()}function $_r(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Z_r(e,t){if(e){if(typeof e=="string")return G9e(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if(r==="Object"&&e.constructor&&(r=e.constructor.name),r==="Map"||r==="Set")return Array.from(e);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return G9e(e,t)}}function G9e(e,t){(t==null||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function Y_r(e,t){var r=e==null?null:typeof Symbol!="undefined"&&e[Symbol.iterator]||e["@@iterator"];if(r!=null){var n=[],o=!0,i=!1,a,u;try{for(r=r.call(e);!(o=(a=r.next()).done)&&(n.push(a.value),!(t&&n.length===t));o=!0);}catch(d){i=!0,u=d}finally{try{!o&&r.return!=null&&r.return()}finally{if(i)throw u}}return n}}function K_r(e){if(Array.isArray(e))return e}function X_r(e){var t=k9e().toString();switch(e){case op.SOURCE:return"S".concat(t);case op.TARGET:return"T".concat(t);default:throw new Error("Unknown Handler Role: ".concat(e))}}function H9e(e){switch(e[0]){case"S":return op.SOURCE;case"T":return op.TARGET;default:Jr(!1,"Cannot parse handler ID: ".concat(e))}}function W9e(e,t){var r=e.entries(),n=!1;do{var o=r.next(),i=o.done,a=W_r(o.value,2),u=a[1];if(u===t)return!0;n=!!i}while(!n);return!1}var $9e=function(){function e(t){G_r(this,e),BE(this,"types",new Map),BE(this,"dragSources",new Map),BE(this,"dropTargets",new Map),BE(this,"pinnedSourceId",null),BE(this,"pinnedSource",null),BE(this,"store",void 0),this.store=t}return H_r(e,[{key:"addSource",value:function(r,n){e6(r),R9e(n);var o=this.addHandler(op.SOURCE,r,n);return this.store.dispatch(g9e(o)),o}},{key:"addTarget",value:function(r,n){e6(r,!0),j9e(n);var o=this.addHandler(op.TARGET,r,n);return this.store.dispatch(v9e(o)),o}},{key:"containsHandler",value:function(r){return W9e(this.dragSources,r)||W9e(this.dropTargets,r)}},{key:"getSource",value:function(r){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1;Jr(this.isSourceId(r),"Expected a valid source ID.");var o=n&&r===this.pinnedSourceId,i=o?this.pinnedSource:this.dragSources.get(r);return i}},{key:"getTarget",value:function(r){return Jr(this.isTargetId(r),"Expected a valid target ID."),this.dropTargets.get(r)}},{key:"getSourceType",value:function(r){return Jr(this.isSourceId(r),"Expected a valid source ID."),this.types.get(r)}},{key:"getTargetType",value:function(r){return Jr(this.isTargetId(r),"Expected a valid target ID."),this.types.get(r)}},{key:"isSourceId",value:function(r){var n=H9e(r);return n===op.SOURCE}},{key:"isTargetId",value:function(r){var n=H9e(r);return n===op.TARGET}},{key:"removeSource",value:function(r){var n=this;Jr(this.getSource(r),"Expected an existing source."),this.store.dispatch(y9e(r)),B9e(function(){n.dragSources.delete(r),n.types.delete(r)})}},{key:"removeTarget",value:function(r){Jr(this.getTarget(r),"Expected an existing target."),this.store.dispatch(_9e(r)),this.dropTargets.delete(r),this.types.delete(r)}},{key:"pinSource",value:function(r){var n=this.getSource(r);Jr(n,"Expected an existing source."),this.pinnedSourceId=r,this.pinnedSource=n}},{key:"unpinSource",value:function(){Jr(this.pinnedSource,"No source is pinned at the time."),this.pinnedSourceId=null,this.pinnedSource=null}},{key:"addHandler",value:function(r,n,o){var i=X_r(r);return this.types.set(i,n),r===op.SOURCE?this.dragSources.set(i,o):r===op.TARGET&&this.dropTargets.set(i,o),i}}]),e}();function Z9e(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:void 0,r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},n=arguments.length>3&&arguments[3]!==void 0?arguments[3]:!1,o=Q_r(n),i=new L9e(o,new $9e(o)),a=new i9e(o,i),u=e(a,t,r);return a.receiveBackend(u),a}function Q_r(e){var t=typeof window!="undefined"&&window.__REDUX_DEVTOOLS_EXTENSION__;return are(C9e,e&&t&&t({name:"dnd-core",instanceId:"dnd-core"}))}var J_r=["children"];function ebr(e,t){return obr(e)||nbr(e,t)||rbr(e,t)||tbr()}function tbr(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function rbr(e,t){if(e){if(typeof e=="string")return Y9e(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if(r==="Object"&&e.constructor&&(r=e.constructor.name),r==="Map"||r==="Set")return Array.from(e);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return Y9e(e,t)}}function Y9e(e,t){(t==null||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function nbr(e,t){var r=e==null?null:typeof Symbol!="undefined"&&e[Symbol.iterator]||e["@@iterator"];if(r!=null){var n=[],o=!0,i=!1,a,u;try{for(r=r.call(e);!(o=(a=r.next()).done)&&(n.push(a.value),!(t&&n.length===t));o=!0);}catch(d){i=!0,u=d}finally{try{!o&&r.return!=null&&r.return()}finally{if(i)throw u}}return n}}function obr(e){if(Array.isArray(e))return e}function ibr(e,t){if(e==null)return{};var r=abr(e,t),n,o;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(o=0;o<i.length;o++)n=i[o],!(t.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}function abr(e,t){if(e==null)return{};var r={},n=Object.keys(e),o,i;for(i=0;i<n.length;i++)o=n[i],!(t.indexOf(o)>=0)&&(r[o]=e[o]);return r}var K9e=0,o6=Symbol.for("__REACT_DND_CONTEXT_INSTANCE__"),Q9e=(0,i6.memo)(function(t){var r=t.children,n=ibr(t,J_r),o=sbr(n),i=ebr(o,2),a=i[0],u=i[1];return(0,i6.useEffect)(function(){if(u){var d=J9e();return++K9e,function(){--K9e===0&&(d[o6]=null)}}},[]),(0,X9e.jsx)(ZR.Provider,Object.assign({value:a},{children:r}),void 0)});function sbr(e){if("manager"in e){var t={dragDropManager:e.manager};return[t,!1]}var r=lbr(e.backend,e.context,e.options,e.debugMode),n=!e.context;return[r,n]}function lbr(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:J9e(),r=arguments.length>2?arguments[2]:void 0,n=arguments.length>3?arguments[3]:void 0,o=t;return o[o6]||(o[o6]={dragDropManager:Z9e(e,t,r,n)}),o[o6]}function J9e(){return typeof global!="undefined"?global:window}function ubr(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function eUe(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function cbr(e,t,r){return t&&eUe(e.prototype,t),r&&eUe(e,r),e}function tUe(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var lre=!1,ure=!1,rUe=function(){function e(t){ubr(this,e),tUe(this,"internalMonitor",void 0),tUe(this,"sourceId",null),this.internalMonitor=t.getMonitor()}return cbr(e,[{key:"receiveHandlerId",value:function(r){this.sourceId=r}},{key:"getHandlerId",value:function(){return this.sourceId}},{key:"canDrag",value:function(){Jr(!lre,"You may not call monitor.canDrag() inside your canDrag() implementation. Read more: http://react-dnd.github.io/react-dnd/docs/api/drag-source-monitor");try{return lre=!0,this.internalMonitor.canDragSource(this.sourceId)}finally{lre=!1}}},{key:"isDragging",value:function(){if(!this.sourceId)return!1;Jr(!ure,"You may not call monitor.isDragging() inside your isDragging() implementation. Read more: http://react-dnd.github.io/react-dnd/docs/api/drag-source-monitor");try{return ure=!0,this.internalMonitor.isDraggingSource(this.sourceId)}finally{ure=!1}}},{key:"subscribeToStateChange",value:function(r,n){return this.internalMonitor.subscribeToStateChange(r,n)}},{key:"isDraggingSource",value:function(r){return this.internalMonitor.isDraggingSource(r)}},{key:"isOverTarget",value:function(r,n){return this.internalMonitor.isOverTarget(r,n)}},{key:"getTargetIds",value:function(){return this.internalMonitor.getTargetIds()}},{key:"isSourcePublic",value:function(){return this.internalMonitor.isSourcePublic()}},{key:"getSourceId",value:function(){return this.internalMonitor.getSourceId()}},{key:"subscribeToOffsetChange",value:function(r){return this.internalMonitor.subscribeToOffsetChange(r)}},{key:"canDragSource",value:function(r){return this.internalMonitor.canDragSource(r)}},{key:"canDropOnTarget",value:function(r){return this.internalMonitor.canDropOnTarget(r)}},{key:"getItemType",value:function(){return this.internalMonitor.getItemType()}},{key:"getItem",value:function(){return this.internalMonitor.getItem()}},{key:"getDropResult",value:function(){return this.internalMonitor.getDropResult()}},{key:"didDrop",value:function(){return this.internalMonitor.didDrop()}},{key:"getInitialClientOffset",value:function(){return this.internalMonitor.getInitialClientOffset()}},{key:"getInitialSourceClientOffset",value:function(){return this.internalMonitor.getInitialSourceClientOffset()}},{key:"getSourceClientOffset",value:function(){return this.internalMonitor.getSourceClientOffset()}},{key:"getClientOffset",value:function(){return this.internalMonitor.getClientOffset()}},{key:"getDifferenceFromInitialOffset",value:function(){return this.internalMonitor.getDifferenceFromInitialOffset()}}]),e}();function pbr(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function nUe(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function fbr(e,t,r){return t&&nUe(e.prototype,t),r&&nUe(e,r),e}function oUe(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var cre=!1,iUe=function(){function e(t){pbr(this,e),oUe(this,"internalMonitor",void 0),oUe(this,"targetId",null),this.internalMonitor=t.getMonitor()}return fbr(e,[{key:"receiveHandlerId",value:function(r){this.targetId=r}},{key:"getHandlerId",value:function(){return this.targetId}},{key:"subscribeToStateChange",value:function(r,n){return this.internalMonitor.subscribeToStateChange(r,n)}},{key:"canDrop",value:function(){if(!this.targetId)return!1;Jr(!cre,"You may not call monitor.canDrop() inside your canDrop() implementation. Read more: http://react-dnd.github.io/react-dnd/docs/api/drop-target-monitor");try{return cre=!0,this.internalMonitor.canDropOnTarget(this.targetId)}finally{cre=!1}}},{key:"isOver",value:function(r){return this.targetId?this.internalMonitor.isOverTarget(this.targetId,r):!1}},{key:"getItemType",value:function(){return this.internalMonitor.getItemType()}},{key:"getItem",value:function(){return this.internalMonitor.getItem()}},{key:"getDropResult",value:function(){return this.internalMonitor.getDropResult()}},{key:"didDrop",value:function(){return this.internalMonitor.didDrop()}},{key:"getInitialClientOffset",value:function(){return this.internalMonitor.getInitialClientOffset()}},{key:"getInitialSourceClientOffset",value:function(){return this.internalMonitor.getInitialSourceClientOffset()}},{key:"getSourceClientOffset",value:function(){return this.internalMonitor.getSourceClientOffset()}},{key:"getClientOffset",value:function(){return this.internalMonitor.getClientOffset()}},{key:"getDifferenceFromInitialOffset",value:function(){return this.internalMonitor.getDifferenceFromInitialOffset()}}]),e}();var ZA=Z(Pe());function dbr(e){if(typeof e.type!="string"){var t=e.type.displayName||e.type.name||"the component";throw new Error("Only native element nodes can now be passed to React DnD connectors."+"You can either wrap ".concat(t," into a <div>, or turn it into a ")+"drag source or a drop target itself.")}}function hbr(e){return function(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:null,r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:null;if(!(0,ZA.isValidElement)(t)){var n=t;return e(n,r),n}var o=t;dbr(o);var i=r?function(a){return e(a,r)}:e;return mbr(o,i)}}function a6(e){var t={};return Object.keys(e).forEach(function(r){var n=e[r];if(r.endsWith("Ref"))t[r]=e[r];else{var o=hbr(n);t[r]=function(){return o}}}),t}function aUe(e,t){typeof e=="function"?e(t):e.current=t}function mbr(e,t){var r=e.ref;return Jr(typeof r!="string","Cannot connect React DnD to an element with an existing string ref. Please convert it to use a callback ref instead, or wrap it into a <span> or <div>. Read more: https://reactjs.org/docs/refs-and-the-dom.html#callback-refs"),r?(0,ZA.cloneElement)(e,{ref:function(o){aUe(r,o),aUe(t,o)}}):(0,ZA.cloneElement)(e,{ref:t})}function s6(e){"@babel/helpers - typeof";return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?s6=function(r){return typeof r}:s6=function(r){return r&&typeof Symbol=="function"&&r.constructor===Symbol&&r!==Symbol.prototype?"symbol":typeof r},s6(e)}function YA(e){return e!==null&&s6(e)==="object"&&Object.prototype.hasOwnProperty.call(e,"current")}function KA(e,t,r,n){var o=r?r.call(n,e,t):void 0;if(o!==void 0)return!!o;if(e===t)return!0;if(typeof e!="object"||!e||typeof t!="object"||!t)return!1;var i=Object.keys(e),a=Object.keys(t);if(i.length!==a.length)return!1;for(var u=Object.prototype.hasOwnProperty.bind(t),d=0;d<i.length;d++){var h=i[d];if(!u(h))return!1;var v=e[h],b=t[h];if(o=r?r.call(n,v,b,h):void 0,o===!1||o===void 0&&v!==b)return!1}return!0}function gbr(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function sUe(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function vbr(e,t,r){return t&&sUe(e.prototype,t),r&&sUe(e,r),e}function tu(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var lUe=function(){function e(t){var r=this;gbr(this,e),tu(this,"hooks",a6({dragSource:function(o,i){r.clearDragSource(),r.dragSourceOptions=i||null,YA(o)?r.dragSourceRef=o:r.dragSourceNode=o,r.reconnectDragSource()},dragPreview:function(o,i){r.clearDragPreview(),r.dragPreviewOptions=i||null,YA(o)?r.dragPreviewRef=o:r.dragPreviewNode=o,r.reconnectDragPreview()}})),tu(this,"handlerId",null),tu(this,"dragSourceRef",null),tu(this,"dragSourceNode",void 0),tu(this,"dragSourceOptionsInternal",null),tu(this,"dragSourceUnsubscribe",void 0),tu(this,"dragPreviewRef",null),tu(this,"dragPreviewNode",void 0),tu(this,"dragPreviewOptionsInternal",null),tu(this,"dragPreviewUnsubscribe",void 0),tu(this,"lastConnectedHandlerId",null),tu(this,"lastConnectedDragSource",null),tu(this,"lastConnectedDragSourceOptions",null),tu(this,"lastConnectedDragPreview",null),tu(this,"lastConnectedDragPreviewOptions",null),tu(this,"backend",void 0),this.backend=t}return vbr(e,[{key:"receiveHandlerId",value:function(r){this.handlerId!==r&&(this.handlerId=r,this.reconnect())}},{key:"connectTarget",get:function(){return this.dragSource}},{key:"dragSourceOptions",get:function(){return this.dragSourceOptionsInternal},set:function(r){this.dragSourceOptionsInternal=r}},{key:"dragPreviewOptions",get:function(){return this.dragPreviewOptionsInternal},set:function(r){this.dragPreviewOptionsInternal=r}},{key:"reconnect",value:function(){this.reconnectDragSource(),this.reconnectDragPreview()}},{key:"reconnectDragSource",value:function(){var r=this.dragSource,n=this.didHandlerIdChange()||this.didConnectedDragSourceChange()||this.didDragSourceOptionsChange();if(n&&this.disconnectDragSource(),!!this.handlerId){if(!r){this.lastConnectedDragSource=r;return}n&&(this.lastConnectedHandlerId=this.handlerId,this.lastConnectedDragSource=r,this.lastConnectedDragSourceOptions=this.dragSourceOptions,this.dragSourceUnsubscribe=this.backend.connectDragSource(this.handlerId,r,this.dragSourceOptions))}}},{key:"reconnectDragPreview",value:function(){var r=this.dragPreview,n=this.didHandlerIdChange()||this.didConnectedDragPreviewChange()||this.didDragPreviewOptionsChange();if(n&&this.disconnectDragPreview(),!!this.handlerId){if(!r){this.lastConnectedDragPreview=r;return}n&&(this.lastConnectedHandlerId=this.handlerId,this.lastConnectedDragPreview=r,this.lastConnectedDragPreviewOptions=this.dragPreviewOptions,this.dragPreviewUnsubscribe=this.backend.connectDragPreview(this.handlerId,r,this.dragPreviewOptions))}}},{key:"didHandlerIdChange",value:function(){return this.lastConnectedHandlerId!==this.handlerId}},{key:"didConnectedDragSourceChange",value:function(){return this.lastConnectedDragSource!==this.dragSource}},{key:"didConnectedDragPreviewChange",value:function(){return this.lastConnectedDragPreview!==this.dragPreview}},{key:"didDragSourceOptionsChange",value:function(){return!KA(this.lastConnectedDragSourceOptions,this.dragSourceOptions)}},{key:"didDragPreviewOptionsChange",value:function(){return!KA(this.lastConnectedDragPreviewOptions,this.dragPreviewOptions)}},{key:"disconnectDragSource",value:function(){this.dragSourceUnsubscribe&&(this.dragSourceUnsubscribe(),this.dragSourceUnsubscribe=void 0)}},{key:"disconnectDragPreview",value:function(){this.dragPreviewUnsubscribe&&(this.dragPreviewUnsubscribe(),this.dragPreviewUnsubscribe=void 0,this.dragPreviewNode=null,this.dragPreviewRef=null)}},{key:"dragSource",get:function(){return this.dragSourceNode||this.dragSourceRef&&this.dragSourceRef.current}},{key:"dragPreview",get:function(){return this.dragPreviewNode||this.dragPreviewRef&&this.dragPreviewRef.current}},{key:"clearDragSource",value:function(){this.dragSourceNode=null,this.dragSourceRef=null}},{key:"clearDragPreview",value:function(){this.dragPreviewNode=null,this.dragPreviewRef=null}}]),e}();function ybr(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function uUe(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function _br(e,t,r){return t&&uUe(e.prototype,t),r&&uUe(e,r),e}function Ch(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var cUe=function(){function e(t){var r=this;ybr(this,e),Ch(this,"hooks",a6({dropTarget:function(o,i){r.clearDropTarget(),r.dropTargetOptions=i,YA(o)?r.dropTargetRef=o:r.dropTargetNode=o,r.reconnect()}})),Ch(this,"handlerId",null),Ch(this,"dropTargetRef",null),Ch(this,"dropTargetNode",void 0),Ch(this,"dropTargetOptionsInternal",null),Ch(this,"unsubscribeDropTarget",void 0),Ch(this,"lastConnectedHandlerId",null),Ch(this,"lastConnectedDropTarget",null),Ch(this,"lastConnectedDropTargetOptions",null),Ch(this,"backend",void 0),this.backend=t}return _br(e,[{key:"connectTarget",get:function(){return this.dropTarget}},{key:"reconnect",value:function(){var r=this.didHandlerIdChange()||this.didDropTargetChange()||this.didOptionsChange();r&&this.disconnectDropTarget();var n=this.dropTarget;if(this.handlerId){if(!n){this.lastConnectedDropTarget=n;return}r&&(this.lastConnectedHandlerId=this.handlerId,this.lastConnectedDropTarget=n,this.lastConnectedDropTargetOptions=this.dropTargetOptions,this.unsubscribeDropTarget=this.backend.connectDropTarget(this.handlerId,n,this.dropTargetOptions))}}},{key:"receiveHandlerId",value:function(r){r!==this.handlerId&&(this.handlerId=r,this.reconnect())}},{key:"dropTargetOptions",get:function(){return this.dropTargetOptionsInternal},set:function(r){this.dropTargetOptionsInternal=r}},{key:"didHandlerIdChange",value:function(){return this.lastConnectedHandlerId!==this.handlerId}},{key:"didDropTargetChange",value:function(){return this.lastConnectedDropTarget!==this.dropTarget}},{key:"didOptionsChange",value:function(){return!KA(this.lastConnectedDropTargetOptions,this.dropTargetOptions)}},{key:"disconnectDropTarget",value:function(){this.unsubscribeDropTarget&&(this.unsubscribeDropTarget(),this.unsubscribeDropTarget=void 0)}},{key:"dropTarget",get:function(){return this.dropTargetNode||this.dropTargetRef&&this.dropTargetRef.current}},{key:"clearDropTarget",value:function(){this.dropTargetRef=null,this.dropTargetNode=null}}]),e}();function pUe(e,t,r){var n=r.getRegistry(),o=n.addTarget(e,t);return[o,function(){return n.removeTarget(o)}]}function fUe(e,t,r){var n=r.getRegistry(),o=n.addSource(e,t);return[o,function(){return n.removeSource(o)}]}var l6=Z(Pe()),ip=typeof window!="undefined"?l6.useLayoutEffect:l6.useEffect;var c6=Z(Pe());function u6(e){"@babel/helpers - typeof";return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?u6=function(r){return typeof r}:u6=function(r){return r&&typeof Symbol=="function"&&r.constructor===Symbol&&r!==Symbol.prototype?"symbol":typeof r},u6(e)}function bbr(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function dUe(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function xbr(e,t,r){return t&&dUe(e.prototype,t),r&&dUe(e,r),e}function pre(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var hUe=function(){function e(t,r,n){bbr(this,e),pre(this,"spec",void 0),pre(this,"monitor",void 0),pre(this,"connector",void 0),this.spec=t,this.monitor=r,this.connector=n}return xbr(e,[{key:"beginDrag",value:function(){var r,n=this.spec,o=this.monitor,i=null;return u6(n.item)==="object"?i=n.item:typeof n.item=="function"?i=n.item(o):i={},(r=i)!==null&&r!==void 0?r:null}},{key:"canDrag",value:function(){var r=this.spec,n=this.monitor;return typeof r.canDrag=="boolean"?r.canDrag:typeof r.canDrag=="function"?r.canDrag(n):!0}},{key:"isDragging",value:function(r,n){var o=this.spec,i=this.monitor,a=o.isDragging;return a?a(i):n===r.getSourceId()}},{key:"endDrag",value:function(){var r=this.spec,n=this.monitor,o=this.connector,i=r.end;i&&i(n.getItem(),n),o.reconnect()}}]),e}();function mUe(e,t,r){var n=(0,c6.useMemo)(function(){return new hUe(e,t,r)},[t,r]);return(0,c6.useEffect)(function(){n.spec=e},[e]),n}var gUe=Z(Pe());function ef(){var e=(0,gUe.useContext)(ZR),t=e.dragDropManager;return Jr(t!=null,"Expected drag drop context"),t}var vUe=Z(Pe());function yUe(e){return(0,vUe.useMemo)(function(){var t=e.type;return Jr(t!=null,"spec.type must be defined"),t},[e])}function wbr(e,t){return Ibr(e)||Tbr(e,t)||Sbr(e,t)||Ebr()}function Ebr(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Sbr(e,t){if(e){if(typeof e=="string")return _Ue(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if(r==="Object"&&e.constructor&&(r=e.constructor.name),r==="Map"||r==="Set")return Array.from(e);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return _Ue(e,t)}}function _Ue(e,t){(t==null||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function Tbr(e,t){var r=e==null?null:typeof Symbol!="undefined"&&e[Symbol.iterator]||e["@@iterator"];if(r!=null){var n=[],o=!0,i=!1,a,u;try{for(r=r.call(e);!(o=(a=r.next()).done)&&(n.push(a.value),!(t&&n.length===t));o=!0);}catch(d){i=!0,u=d}finally{try{!o&&r.return!=null&&r.return()}finally{if(i)throw u}}return n}}function Ibr(e){if(Array.isArray(e))return e}function bUe(e,t,r){var n=ef(),o=mUe(e,t,r),i=yUe(e);ip(function(){if(i!=null){var u=fUe(i,o,n),d=wbr(u,2),h=d[0],v=d[1];return t.receiveHandlerId(h),r.receiveHandlerId(h),v}},[n,t,r,o,i])}var xUe=Z(Pe());function Mbr(e){return Pbr(e)||Obr(e)||Abr(e)||Cbr()}function Cbr(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Abr(e,t){if(e){if(typeof e=="string")return fre(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if(r==="Object"&&e.constructor&&(r=e.constructor.name),r==="Map"||r==="Set")return Array.from(e);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return fre(e,t)}}function Obr(e){if(typeof Symbol!="undefined"&&e[Symbol.iterator]!=null||e["@@iterator"]!=null)return Array.from(e)}function Pbr(e){if(Array.isArray(e))return fre(e)}function fre(e,t){(t==null||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function p6(e,t){var r=Mbr(t||[]);return t==null&&typeof e!="function"&&r.push(e),(0,xUe.useMemo)(function(){return typeof e=="function"?e():e},r)}var wUe=Z(Pe());function EUe(){var e=ef();return(0,wUe.useMemo)(function(){return new rUe(e)},[e])}var SUe=Z(Pe());function TUe(e,t){var r=ef(),n=(0,SUe.useMemo)(function(){return new lUe(r.getBackend())},[r]);return ip(function(){return n.dragSourceOptions=e||null,n.reconnect(),function(){return n.disconnectDragSource()}},[n,e]),ip(function(){return n.dragPreviewOptions=t||null,n.reconnect(),function(){return n.disconnectDragPreview()}},[n,t]),n}var CUe=Z(XA()),f6=Z(Pe());function Nbr(e,t){return Rbr(e)||kbr(e,t)||Lbr(e,t)||Dbr()}function Dbr(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Lbr(e,t){if(e){if(typeof e=="string")return MUe(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if(r==="Object"&&e.constructor&&(r=e.constructor.name),r==="Map"||r==="Set")return Array.from(e);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return MUe(e,t)}}function MUe(e,t){(t==null||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function kbr(e,t){var r=e==null?null:typeof Symbol!="undefined"&&e[Symbol.iterator]||e["@@iterator"];if(r!=null){var n=[],o=!0,i=!1,a,u;try{for(r=r.call(e);!(o=(a=r.next()).done)&&(n.push(a.value),!(t&&n.length===t));o=!0);}catch(d){i=!0,u=d}finally{try{!o&&r.return!=null&&r.return()}finally{if(i)throw u}}return n}}function Rbr(e){if(Array.isArray(e))return e}function AUe(e,t,r){var n=(0,f6.useState)(function(){return t(e)}),o=Nbr(n,2),i=o[0],a=o[1],u=(0,f6.useCallback)(function(){var d=t(e);(0,CUe.default)(i,d)||(a(d),r&&r())},[i,e,r]);return ip(u),[i,u]}function jbr(e,t){return Ubr(e)||Fbr(e,t)||zbr(e,t)||qbr()}function qbr(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function zbr(e,t){if(e){if(typeof e=="string")return OUe(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if(r==="Object"&&e.constructor&&(r=e.constructor.name),r==="Map"||r==="Set")return Array.from(e);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return OUe(e,t)}}function OUe(e,t){(t==null||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function Fbr(e,t){var r=e==null?null:typeof Symbol!="undefined"&&e[Symbol.iterator]||e["@@iterator"];if(r!=null){var n=[],o=!0,i=!1,a,u;try{for(r=r.call(e);!(o=(a=r.next()).done)&&(n.push(a.value),!(t&&n.length===t));o=!0);}catch(d){i=!0,u=d}finally{try{!o&&r.return!=null&&r.return()}finally{if(i)throw u}}return n}}function Ubr(e){if(Array.isArray(e))return e}function PUe(e,t,r){var n=AUe(e,t,r),o=jbr(n,2),i=o[0],a=o[1];return ip(function(){var d=e.getHandlerId();if(d!=null)return e.subscribeToStateChange(a,{handlerIds:[d]})},[e,a]),i}function d6(e,t,r){return PUe(t,e||function(){return{}},function(){return r.reconnect()})}var dre=Z(Pe());function NUe(e){return(0,dre.useMemo)(function(){return e.hooks.dragSource()},[e])}function DUe(e){return(0,dre.useMemo)(function(){return e.hooks.dragPreview()},[e])}function LUe(e,t){var r=p6(e,t);Jr(!r.begin,"useDrag::spec.begin was deprecated in v14. Replace spec.begin() with spec.item(). (see more here - https://react-dnd.github.io/react-dnd/docs/api/use-drag)");var n=EUe(),o=TUe(r.options,r.previewOptions);return bUe(r,n,o),[d6(r.collect,n,o),NUe(o),DUe(o)]}var kUe=Z(Pe());function RUe(e){var t=e.accept;return(0,kUe.useMemo)(function(){return Jr(e.accept!=null,"accept must be defined"),Array.isArray(t)?t:[t]},[t])}var h6=Z(Pe());function Bbr(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function jUe(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function Vbr(e,t,r){return t&&jUe(e.prototype,t),r&&jUe(e,r),e}function qUe(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var zUe=function(){function e(t,r){Bbr(this,e),qUe(this,"spec",void 0),qUe(this,"monitor",void 0),this.spec=t,this.monitor=r}return Vbr(e,[{key:"canDrop",value:function(){var r=this.spec,n=this.monitor;return r.canDrop?r.canDrop(n.getItem(),n):!0}},{key:"hover",value:function(){var r=this.spec,n=this.monitor;r.hover&&r.hover(n.getItem(),n)}},{key:"drop",value:function(){var r=this.spec,n=this.monitor;if(r.drop)return r.drop(n.getItem(),n)}}]),e}();function FUe(e,t){var r=(0,h6.useMemo)(function(){return new zUe(e,t)},[t]);return(0,h6.useEffect)(function(){r.spec=e},[e]),r}function Gbr(e,t){return Zbr(e)||$br(e,t)||Wbr(e,t)||Hbr()}function Hbr(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Wbr(e,t){if(e){if(typeof e=="string")return UUe(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if(r==="Object"&&e.constructor&&(r=e.constructor.name),r==="Map"||r==="Set")return Array.from(e);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return UUe(e,t)}}function UUe(e,t){(t==null||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function $br(e,t){var r=e==null?null:typeof Symbol!="undefined"&&e[Symbol.iterator]||e["@@iterator"];if(r!=null){var n=[],o=!0,i=!1,a,u;try{for(r=r.call(e);!(o=(a=r.next()).done)&&(n.push(a.value),!(t&&n.length===t));o=!0);}catch(d){i=!0,u=d}finally{try{!o&&r.return!=null&&r.return()}finally{if(i)throw u}}return n}}function Zbr(e){if(Array.isArray(e))return e}function BUe(e,t,r){var n=ef(),o=FUe(e,t),i=RUe(e);ip(function(){var u=pUe(i,o,n),d=Gbr(u,2),h=d[0],v=d[1];return t.receiveHandlerId(h),r.receiveHandlerId(h),v},[n,t,o,r,i.map(function(a){return a.toString()}).join("|")])}var VUe=Z(Pe());function GUe(){var e=ef();return(0,VUe.useMemo)(function(){return new iUe(e)},[e])}var HUe=Z(Pe());function WUe(e){var t=ef(),r=(0,HUe.useMemo)(function(){return new cUe(t.getBackend())},[t]);return ip(function(){return r.dropTargetOptions=e||null,r.reconnect(),function(){return r.disconnectDropTarget()}},[e]),r}var $Ue=Z(Pe());function ZUe(e){return(0,$Ue.useMemo)(function(){return e.hooks.dropTarget()},[e])}function m6(e,t){var r=p6(e,t),n=GUe(),o=WUe(r.options);return BUe(r,n,o),[d6(r.collect,n,o),ZUe(o)]}function hre(){return hre=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},hre.apply(this,arguments)}var Ybr=(0,Ry.createContext)(null),mre=e=>{let i=e,{portal:t}=i,r=xn(i,["portal"]),[n,o]=(0,Ry.useState)(null);return Ry.default.createElement(Ybr.Provider,{value:t!=null?t:n},Ry.default.createElement(Q9e,hre({backend:Jte},r)),t?null:Ry.default.createElement("div",{ref:o}))};var lp=Z(Pe(),1);var fq=Z(xt(),1);var Os=yn({key:"notificationState",default:null});var _d=Z(Pe(),1);var tf=[];var YUe=function(){return tf.some(function(e){return e.activeTargets.length>0})};var KUe=function(){return tf.some(function(e){return e.skippedTargets.length>0})};var XUe="ResizeObserver loop completed with undelivered notifications.",QUe=function(){var e;typeof ErrorEvent=="function"?e=new ErrorEvent("error",{message:XUe}):(e=document.createEvent("Event"),e.initEvent("error",!1,!1),e.message=XUe),window.dispatchEvent(e)};var w_;(function(e){e.BORDER_BOX="border-box",e.CONTENT_BOX="content-box",e.DEVICE_PIXEL_CONTENT_BOX="device-pixel-content-box"})(w_||(w_={}));var pd=function(e){return Object.freeze(e)};var gre=function(){function e(t,r){this.inlineSize=t,this.blockSize=r,pd(this)}return e}();var vre=function(){function e(t,r,n,o){return this.x=t,this.y=r,this.width=n,this.height=o,this.top=this.y,this.left=this.x,this.bottom=this.top+this.height,this.right=this.left+this.width,pd(this)}return e.prototype.toJSON=function(){var t=this,r=t.x,n=t.y,o=t.top,i=t.right,a=t.bottom,u=t.left,d=t.width,h=t.height;return{x:r,y:n,top:o,right:i,bottom:a,left:u,width:d,height:h}},e.fromRect=function(t){return new e(t.x,t.y,t.width,t.height)},e}();var QA=function(e){return e instanceof SVGElement&&"getBBox"in e},g6=function(e){if(QA(e)){var t=e.getBBox(),r=t.width,n=t.height;return!r&&!n}var o=e,i=o.offsetWidth,a=o.offsetHeight;return!(i||a||e.getClientRects().length)},yre=function(e){var t;if(e instanceof Element)return!0;var r=(t=e==null?void 0:e.ownerDocument)===null||t===void 0?void 0:t.defaultView;return!!(r&&e instanceof r.Element)},JUe=function(e){switch(e.tagName){case"INPUT":if(e.type!=="image")break;case"VIDEO":case"AUDIO":case"EMBED":case"OBJECT":case"CANVAS":case"IFRAME":case"IMG":return!0}return!1};var E_=typeof window!="undefined"?window:{};var v6=new WeakMap,eBe=/auto|scroll/,Kbr=/^tb|vertical/,Xbr=/msie|trident/i.test(E_.navigator&&E_.navigator.userAgent),Ah=function(e){return parseFloat(e||"0")},VE=function(e,t,r){return e===void 0&&(e=0),t===void 0&&(t=0),r===void 0&&(r=!1),new gre((r?t:e)||0,(r?e:t)||0)},tBe=pd({devicePixelContentBoxSize:VE(),borderBoxSize:VE(),contentBoxSize:VE(),contentRect:new vre(0,0,0,0)}),_re=function(e,t){if(t===void 0&&(t=!1),v6.has(e)&&!t)return v6.get(e);if(g6(e))return v6.set(e,tBe),tBe;var r=getComputedStyle(e),n=QA(e)&&e.ownerSVGElement&&e.getBBox(),o=!Xbr&&r.boxSizing==="border-box",i=Kbr.test(r.writingMode||""),a=!n&&eBe.test(r.overflowY||""),u=!n&&eBe.test(r.overflowX||""),d=n?0:Ah(r.paddingTop),h=n?0:Ah(r.paddingRight),v=n?0:Ah(r.paddingBottom),b=n?0:Ah(r.paddingLeft),x=n?0:Ah(r.borderTopWidth),M=n?0:Ah(r.borderRightWidth),O=n?0:Ah(r.borderBottomWidth),D=n?0:Ah(r.borderLeftWidth),k=b+h,R=d+v,q=D+M,B=x+O,G=u?e.offsetHeight-B-e.clientHeight:0,re=a?e.offsetWidth-q-e.clientWidth:0,Q=o?k+q:0,ie=o?R+B:0,me=n?n.width:Ah(r.width)-Q-re,ve=n?n.height:Ah(r.height)-ie-G,ye=me+k+re+q,we=ve+R+G+B,Se=pd({devicePixelContentBoxSize:VE(Math.round(me*devicePixelRatio),Math.round(ve*devicePixelRatio),i),borderBoxSize:VE(ye,we,i),contentBoxSize:VE(me,ve,i),contentRect:new vre(b,d,me,ve)});return v6.set(e,Se),Se},y6=function(e,t,r){var n=_re(e,r),o=n.borderBoxSize,i=n.contentBoxSize,a=n.devicePixelContentBoxSize;switch(t){case w_.DEVICE_PIXEL_CONTENT_BOX:return a;case w_.BORDER_BOX:return o;default:return i}};var bre=function(){function e(t){var r=_re(t);this.target=t,this.contentRect=r.contentRect,this.borderBoxSize=pd([r.borderBoxSize]),this.contentBoxSize=pd([r.contentBoxSize]),this.devicePixelContentBoxSize=pd([r.devicePixelContentBoxSize])}return e}();var _6=function(e){if(g6(e))return 1/0;for(var t=0,r=e.parentNode;r;)t+=1,r=r.parentNode;return t};var rBe=function(){var e=1/0,t=[];tf.forEach(function(a){if(a.activeTargets.length!==0){var u=[];a.activeTargets.forEach(function(h){var v=new bre(h.target),b=_6(h.target);u.push(v),h.lastReportedSize=y6(h.target,h.observedBox),b<e&&(e=b)}),t.push(function(){a.callback.call(a.observer,u,a.observer)}),a.activeTargets.splice(0,a.activeTargets.length)}});for(var r=0,n=t;r<n.length;r++){var o=n[r];o()}return e};var xre=function(e){tf.forEach(function(r){r.activeTargets.splice(0,r.activeTargets.length),r.skippedTargets.splice(0,r.skippedTargets.length),r.observationTargets.forEach(function(o){o.isActive()&&(_6(o.target)>e?r.activeTargets.push(o):r.skippedTargets.push(o))})})};var nBe=function(){var e=0;for(xre(e);YUe();)e=rBe(),xre(e);return KUe()&&QUe(),e>0};var wre,oBe=[],Qbr=function(){return oBe.splice(0).forEach(function(e){return e()})},iBe=function(e){if(!wre){var t=0,r=document.createTextNode(""),n={characterData:!0};new MutationObserver(function(){return Qbr()}).observe(r,n),wre=function(){r.textContent="".concat(t?t--:t++)}}oBe.push(e),wre()};var aBe=function(e){iBe(function(){requestAnimationFrame(e)})};var b6=0,Jbr=function(){return!!b6},exr=250,txr={attributes:!0,characterData:!0,childList:!0,subtree:!0},sBe=["resize","load","transitionend","animationend","animationstart","animationiteration","keyup","keydown","mouseup","mousedown","mouseover","mouseout","blur","focus"],lBe=function(e){return e===void 0&&(e=0),Date.now()+e},Ere=!1,rxr=function(){function e(){var t=this;this.stopped=!0,this.listener=function(){return t.schedule()}}return e.prototype.run=function(t){var r=this;if(t===void 0&&(t=exr),!Ere){Ere=!0;var n=lBe(t);aBe(function(){var o=!1;try{o=nBe()}finally{if(Ere=!1,t=n-lBe(),!Jbr())return;o?r.run(1e3):t>0?r.run(t):r.start()}})}},e.prototype.schedule=function(){this.stop(),this.run()},e.prototype.observe=function(){var t=this,r=function(){return t.observer&&t.observer.observe(document.body,txr)};document.body?r():E_.addEventListener("DOMContentLoaded",r)},e.prototype.start=function(){var t=this;this.stopped&&(this.stopped=!1,this.observer=new MutationObserver(this.listener),this.observe(),sBe.forEach(function(r){return E_.addEventListener(r,t.listener,!0)}))},e.prototype.stop=function(){var t=this;this.stopped||(this.observer&&this.observer.disconnect(),sBe.forEach(function(r){return E_.removeEventListener(r,t.listener,!0)}),this.stopped=!0)},e}(),x6=new rxr,Sre=function(e){!b6&&e>0&&x6.start(),b6+=e,!b6&&x6.stop()};var nxr=function(e){return!QA(e)&&!JUe(e)&&getComputedStyle(e).display==="inline"},uBe=function(){function e(t,r){this.target=t,this.observedBox=r||w_.CONTENT_BOX,this.lastReportedSize={inlineSize:0,blockSize:0}}return e.prototype.isActive=function(){var t=y6(this.target,this.observedBox,!0);return nxr(this.target)&&(this.lastReportedSize=t),this.lastReportedSize.inlineSize!==t.inlineSize||this.lastReportedSize.blockSize!==t.blockSize},e}();var cBe=function(){function e(t,r){this.activeTargets=[],this.skippedTargets=[],this.observationTargets=[],this.observer=t,this.callback=r}return e}();var w6=new WeakMap,pBe=function(e,t){for(var r=0;r<e.length;r+=1)if(e[r].target===t)return r;return-1},JA=function(){function e(){}return e.connect=function(t,r){var n=new cBe(t,r);w6.set(t,n)},e.observe=function(t,r,n){var o=w6.get(t),i=o.observationTargets.length===0;pBe(o.observationTargets,r)<0&&(i&&tf.push(o),o.observationTargets.push(new uBe(r,n&&n.box)),Sre(1),x6.schedule())},e.unobserve=function(t,r){var n=w6.get(t),o=pBe(n.observationTargets,r),i=n.observationTargets.length===1;o>=0&&(i&&tf.splice(tf.indexOf(n),1),n.observationTargets.splice(o,1),Sre(-1))},e.disconnect=function(t){var r=this,n=w6.get(t);n.observationTargets.slice().forEach(function(o){return r.unobserve(t,o.target)}),n.activeTargets.splice(0,n.activeTargets.length)},e}();var Tre=function(){function e(t){if(arguments.length===0)throw new TypeError("Failed to construct 'ResizeObserver': 1 argument required, but only 0 present.");if(typeof t!="function")throw new TypeError("Failed to construct 'ResizeObserver': The callback provided as parameter 1 is not a function.");JA.connect(this,t)}return e.prototype.observe=function(t,r){if(arguments.length===0)throw new TypeError("Failed to execute 'observe' on 'ResizeObserver': 1 argument required, but only 0 present.");if(!yre(t))throw new TypeError("Failed to execute 'observe' on 'ResizeObserver': parameter 1 is not of type 'Element");JA.observe(this,t,r)},e.prototype.unobserve=function(t){if(arguments.length===0)throw new TypeError("Failed to execute 'unobserve' on 'ResizeObserver': 1 argument required, but only 0 present.");if(!yre(t))throw new TypeError("Failed to execute 'unobserve' on 'ResizeObserver': parameter 1 is not of type 'Element");JA.unobserve(this,t)},e.prototype.disconnect=function(){JA.disconnect(this)},e.toString=function(){return"function ResizeObserver () { [polyfill code] }"},e}();var fBe=Z(Pe()),oxr=fBe.default[typeof document!="undefined"&&document.createElement!==void 0?"useLayoutEffect":"useEffect"],dBe=oxr;var ixr=typeof window!="undefined"&&"ResizeObserver"in window?window.ResizeObserver:Tre;function axr(){}function sxr(e,t){let r=uxr(),n=LR(t);return dBe(()=>{let o=!1,i=e&&"current"in e?e.current:e;if(!i)return axr;function a(u,d){o||n.current(u,d)}return r.subscribe(i,a),()=>{o=!0,r.unsubscribe(i,a)}},[e,r,n]),r.observer}function lxr(){let e=!1,t=[],r=new Map,n=new ixr((o,i)=>{t=t.concat(o);function a(){let u=new Set;for(let d=0;d<t.length;d++){if(u.has(t[d].target))continue;u.add(t[d].target);let h=r.get(t[d].target);h==null||h.forEach(v=>v(t[d],i))}t=[],e=!1}e||window.requestAnimationFrame(a),e=!0});return{observer:n,subscribe(o,i){var a;n.observe(o);let u=(a=r.get(o))!==null&&a!==void 0?a:[];u.push(i),r.set(o,u)},unsubscribe(o,i){var a;let u=(a=r.get(o))!==null&&a!==void 0?a:[];if(u.length===1){n.unobserve(o),r.delete(o);return}let d=u.indexOf(i);d!==-1&&u.splice(d,1),r.set(o,u)}}}var Ire,uxr=()=>Ire||(Ire=lxr()),hBe=sxr;var qVe=Z(Ph(),1);var fd=Z($E(),1);var nwr="vkf-unique-control-panel",Yre="basemap-selector",Zre=class{constructor(){bt(this,"id",Yre)}onAdd(t){this._map=t;let r=`maplibregl-ctrl maplibregl-ctrl-group basemap-selector ${nwr}`,n=document.createElement("div");return n.className=r,this._container=n,n}onRemove(){this._container.parentNode.removeChild(this._container),this._map=void 0}},xVe=Zre;var T_=Z(PVe(),1);var NVe=(e,t="control-feedback-container")=>{let r=document.getElementById(t);if(r===null){let n=e.getCanvasContainer();r=document.createElement("div"),r.id=t,n.appendChild(r)}return r};var O6=3,DVe=e=>`${(0,T_.default)(e[0],7)},${(0,T_.default)(e[1],7)}`,P6=class{constructor(){bt(this,"buttonCopyPosition");bt(this,"textElCurrentPosition");bt(this,"textElSavedPosition");bt(this,"targetEl");bt(this,"_container");bt(this,"_button");bt(this,"savedPosition");bt(this,"generateSavedText",()=>{if(this.savedPosition===void 0)return this.buttonCopyPosition!==void 0&&(this.buttonCopyPosition.style.display="none"),fe("control-mouseposition-save-helper");{let t=fe("control-mouseposition-saved-label");return this.buttonCopyPosition!==void 0&&(this.buttonCopyPosition.style.display="block"),t+": Lon: "+(0,T_.default)(this.savedPosition[0],O6)+" Lat: "+(0,T_.default)(this.savedPosition[1],O6)}});bt(this,"savePosition",t=>{if(this._map){let r=t.lngLat.toArray();this.savedPosition=r.slice(),navigator.clipboard.writeText(DVe(r)),this.updatePosition(t)}});bt(this,"updatePosition",t=>{let r=this.textElCurrentPosition,n=this.textElSavedPosition,{lngLat:o}=t;r.innerHTML="Lon: "+(0,T_.default)(o.lng,O6)+", Lat: "+(0,T_.default)(o.lat,O6),n.innerHTML=this.generateSavedText()});bt(this,"handleCopyButtonClick",t=>{t.preventDefault(),t.stopPropagation();let r=this.savedPosition;r!==void 0&&navigator.clipboard.writeText(DVe(r)),t.target.blur()});bt(this,"toggleMousePosition",t=>{t.preventDefault();let r="active",n=this._button.classList.contains(r),o=this._map;if(!o)return;this._button.classList.toggle(r);let i=this.targetEl,a=NVe(o);if(this.targetEl===void 0){i=document.createElement("div"),i.className="ol-control ol-mouse-position-box";let u=document.createElement("p");this.textElCurrentPosition=u;let d=document.createElement("p");this.textElSavedPosition=d;let h=document.createElement("button");h.id="position-copy-to-clipboard",h.innerHTML="<span class=\"glyphicon glyphicon-copy\"></span>",h.title=fe("control-mouseposition-button-title"),this.buttonCopyPosition=h,h.addEventListener("click",this.handleCopyButtonClick);let v=document.createElement("div");v.className="saved-position-container",v.appendChild(d),v.appendChild(h),i.appendChild(u),i.appendChild(v),a.appendChild(i),this.targetEl=i}else this.textElCurrentPosition.innerHTML="",this.textElSavedPosition.innerHTML="";n?(o.off("mousemove",this.updatePosition),o.off("click",this.savePosition)):(this.savedPosition=void 0,o.on("mousemove",this.updatePosition),o.on("click",this.savePosition)),this.updatePosition({lngLat:o.unproject([t.clientX,t.clientY])}),i.classList.toggle(r),a.classList.toggle(`mouseposition-${r}`)})}onAdd(t){this._map=t;let r=document.createElement("div");r.className="maplibregl-ctrl maplibregl-ctrl-group";let n=document.createElement("button");return n.title=fe("control-mouseposition-title"),n.className="maplibregl-ctrl-mouse-position",n.type="button",r.appendChild(n),this._container=r,this._button=n,n.addEventListener("click",this.toggleMousePosition,!1),this._container}onRemove(){this._map.off("mousemove",this.updatePosition),this._map.off("click",this.savePosition),this._map=null,this._container.parentNode.removeChild(this._container)}};function LVe(e,t){for(let r of e)typeof t[r]=="function"&&(t[r]=t[r].bind(t))}function ZE(e,t,r){let n=window.document.createElement(e);return t!==void 0&&(n.className=t),r&&r.appendChild(n),n}function kVe(e){e.parentNode&&e.parentNode.removeChild(e)}var Qre="permalink-control",Xre=class{constructor(){bt(this,"id",Qre)}onAdd(t){return this._map=t,this._container=ZE("div","maplibregl-ctrl maplibregl-ctrl-group permalink-control"),this._container}onRemove(){this._container.parentNode.removeChild(this._container),this._map=void 0}},RVe=Xre;var N6=class{constructor(){bt(this,"_map");bt(this,"_container");bt(this,"_terrainButton");LVe(["_toggleTerrain","_updateTerrainIcon"],this)}onAdd(t){return this._map=t,this._container=ZE("div","maplibregl-ctrl maplibregl-ctrl-group"),this._terrainButton=ZE("button","maplibregl-ctrl-terrain",this._container),ZE("span","maplibregl-ctrl-icon",this._terrainButton).setAttribute("aria-hidden","true"),this._terrainButton.type="button",this._terrainButton.addEventListener("click",this._toggleTerrain),this._updateTerrainIcon(),this._map.on("terrain",this._updateTerrainIcon),this._container}onRemove(){kVe(this._container),this._map.off("terrain",this._updateTerrainIcon),this._map=void 0}_toggleTerrain(){this._map.hasTerrain()?this._map.disableTerrain():this._map.enableTerrain(),this._updateTerrainIcon()}_updateTerrainIcon(){this._terrainButton.classList.remove("maplibregl-ctrl-terrain"),this._terrainButton.classList.remove("maplibregl-ctrl-terrain-enabled"),this._map.hasTerrain()?(this._terrainButton.classList.add("maplibregl-ctrl-terrain-enabled"),this._terrainButton.title=this._map._getUIString("TerrainControl.Disable")):(this._terrainButton.classList.add("maplibregl-ctrl-terrain"),this._terrainButton.title=this._map._getUIString("TerrainControl.Enable"))}};function Me(e){return e!=null}function YE(e){return typeof e=="string"||e instanceof String}function dd(e){let t;try{t=new URL(e)}catch(r){return!1}return t.protocol==="http:"||t.protocol==="https:"}function fe(e){let t=vr.getLanguageDict();if(t===void 0)throw new Error("Dictionary is undefined.");let r=t[e];return r===void 0?(console.warn(`Translation for key "${e}" was not found in dictionary.`),""):r}var jVe=()=>[{position:"top-left",control:new fd.NavigationControl({showZoom:!0,showCompass:!1,visualizePitch:!1})},{position:"top-left",control:new fd.FullscreenControl},{position:"top-left",control:new fd.NavigationControl({showZoom:!1,showCompass:!0,visualizePitch:!0})},{position:"top-left",control:new P6},{position:"top-left",control:new N6},{position:"top-left",control:new xVe},{position:"top-left",control:new fd.GeolocateControl({trackUserLocation:!0})},{position:"top-left",control:new RVe},{position:"bottom-right",control:new fd.AttributionControl({compact:!0})},{position:"bottom-right",control:new fd.ScaleControl({maxWidth:137})}];var jy={EN:"en",DE:"de"},Ewr=typeof process!="undefined"&&Me(process.env.DEV_MODE_SECRET)&&process.env.DEV_MODE_SECRET!==""&&Me(process.env.DEV_MODE_NAME)&&process.env.DEV_MODE_NAME!=="",D6=()=>({"Dev-Mode-Secret":process.env.DEV_MODE_SECRET,"Dev-Mode-Name":process.env.DEV_MODE_NAME}),ku={BASEMAPS:[{id:"slub-osm",label:"SLUB OSM",urls:["https://tile-2.kartenforum.slub-dresden.de/styles/maptiler-basic-v2/style.json"],type:"vector",tileSize:512},{id:"bkg-topoplus",label:"BKG TopPlusOpen",urls:["https://sgx.geodatenzentrum.de/wms_topplus_open"],type:"wms",layers:"web",tileSize:512}],ENABLE_TILE_PRELOADING:!1,LANGUAGE_CODE:jy.EN,MARKER_IMAGE_ID:"marker",USERNAME:"anonymous",USER_ISAUTHENTICATED:!1,USER_ROLE:null},vr={axiosApiInstance:null,appendSettings(e){ku=Object.assign({},ku,e)},getSettings(){return ku},getBaseMaps(){return ku.BASEMAPS},getDefaultBaseMapUrls(){return["https://tile-1.kartenforum.slub-dresden.de/styles/maptiler-basic-v2/{z}/{x}/{y}.png","https://tile-2.kartenforum.slub-dresden.de/styles/maptiler-basic-v2/{z}/{x}/{y}.png"]},getDefaultMapView(){return Object.assign({center:[14.9928,51.1463],zoom:6.3,maxZoom:19,minZoom:0},ku.MAPVIEW_PARAMS)},getLanguageDict(){return ku.dictionary},getMin3DZoomLevel(){return 9},getNominatimUrl(){return ku.NOMINATIM_URL},getTerrain(){return Object.assign({url:"https://terrain.kartenforum.slub-dresden.de/v2/{z}/{x}/{y}.png",attribution:"<a href='https://kartenforum.slub-dresden.de/attribution' target='_blank'>\xA9 U.S. Geological Survey and others</a>",exaggeration:1,minZoom:0,maxZoom:12},ku.TERRAIN_TILES)},getUsername(){return ku.USERNAME},isUserAuthenticated(){return ku.USER_ISAUTHENTICATED===!0},updateSettings(e){ku=e},_initAxiosApiInstance(){let e=ku.API_GEOREFERENCE_BASEURL,t=YE(e)&&e.length===0;if(!Me(e)||t)throw new Error("The URL for the georeference service is not set.");let r=Object.assign({baseURL:e,withCredentials:!0},Ewr?{headers:{get:D6(),post:D6(),put:D6(),delete:D6()}}:{});this.axiosApiInstance=qVe.default.create(r)},getGeoreferenceApiClient(){return Me(this.axiosApiInstance)?this.axiosApiInstance:(this._initAxiosApiInstance(),this.axiosApiInstance)},getMarkerSettings(){let e=ku.MARKER_URL;if(!Me(e))throw new Error("The marker icon url is not set.");return{id:ku.MARKER_IMAGE_ID,url:e}},getUserRole(){return ku.USER_ROLE}};var qy="vkf-terrain";var zVe=new Set(["fill-opacity","line-opacity","circle-opacity","icon-opacity","text-opacity","raster-opacity"]),FVe=new Set(["visibility"]),xc={None:"NONE",BasemapSelector:"BASEMAP_SELECTOR",Permalink:"PERMALINK"},fs={controlAdded:"controlAdded",controlRemoved:"controlRemoved",opacityChanged:"opacityChanged",visibilityChanged:"visibilityChanged"};var xi={NONE:0,FEATURE:1,METADATA:2,HISTORY:3},Ec={NONE:0,METADATA:1},wc={HORIZONTAL:"HORIZONTAL",VERTICAL:"VERTICAL"},$s={STANDARD:"STANDARD",DRAW:"DRAW",VECTOR_MAP_EXTERNAL:"VECTOR_MAP_EXTERNAL"},Swr={EXTRA_SMALL:600,SMALL:600,MEDIUM:768,LARGE:992},UVe=e=>e>=Swr.LARGE?wc.HORIZONTAL:wc.VERTICAL,BVe=e=>{switch(e){case wc.HORIZONTAL:default:return"ol-map-large";case wc.VERTICAL:return"ol-map-small"}};var qe={id:"id",timeChanged:"time_changed",title:"title",thumbnailUrl:"thumb_url",bounds:"bounds",hasGeoReference:"has_georeference",tmsUrls:"tms_urls",onlineResources:"online_resources",mapScale:"map_scale",rawMapIds:"raw_map_ids",name:"name",description:"description",timePeriod:"time_period",externalContentUrl:"external_content_url",externalContentType:"external_content_type",type:"type",vectorMapId:"vector_map_id",version:"version",userRole:"user_role"},sp={id:"vkf:layer_id",contentType:"vkf:content_type"},Ru={VKF:"vkf:geojson-spec-v1",IDOHIST:"idohist:idohist-v1"},co={HISTORIC_MAP:"historic_map",MOSAIC_MAP:"mosaic",VECTOR_MAP:"vector",LEGACY_GEOJSON:"geojson"},pg={VISIBLE:"visible",NONE:"none"};var Twr=Math.pow(10,8)*24*60*60*1e3,lgn=-Twr,L6=6048e5,VVe=864e5,nO=6e4,oO=36e5,GVe=1e3;var Iwr=3600;var HVe=Iwr*24,ugn=HVe*7,Mwr=HVe*365.2425,Cwr=Mwr/12,cgn=Cwr*3,Jre=Symbol.for("constructDateFrom");function Co(e,t){return typeof e=="function"?e(t):e&&typeof e=="object"&&Jre in e?e[Jre](t):e instanceof Date?new e.constructor(t):new Date(t)}function Cn(e,t){return Co(t||e,e)}function k6(e,t,r){let n=Cn(e,r==null?void 0:r.in);return isNaN(t)?Co((r==null?void 0:r.in)||e,NaN):(t&&n.setDate(n.getDate()+t),n)}var Awr={};function rf(){return Awr}function Sc(e,t){var u,d,h,v,b,x,M,O;let r=rf(),n=(O=(M=(v=(h=t==null?void 0:t.weekStartsOn)!=null?h:(d=(u=t==null?void 0:t.locale)==null?void 0:u.options)==null?void 0:d.weekStartsOn)!=null?v:r.weekStartsOn)!=null?M:(x=(b=r.locale)==null?void 0:b.options)==null?void 0:x.weekStartsOn)!=null?O:0,o=Cn(e,t==null?void 0:t.in),i=o.getDay(),a=(i<n?7:0)+i-n;return o.setDate(o.getDate()-a),o.setHours(0,0,0,0),o}function hd(e,t){return Sc(e,Mt(Te({},t),{weekStartsOn:1}))}function R6(e,t){let r=Cn(e,t==null?void 0:t.in),n=r.getFullYear(),o=Co(r,0);o.setFullYear(n+1,0,4),o.setHours(0,0,0,0);let i=hd(o),a=Co(r,0);a.setFullYear(n,0,4),a.setHours(0,0,0,0);let u=hd(a);return r.getTime()>=i.getTime()?n+1:r.getTime()>=u.getTime()?n:n-1}function I_(e){let t=Cn(e),r=new Date(Date.UTC(t.getFullYear(),t.getMonth(),t.getDate(),t.getHours(),t.getMinutes(),t.getSeconds(),t.getMilliseconds()));return r.setUTCFullYear(t.getFullYear()),+e-+r}function j6(e,...t){let r=Co.bind(null,e||t.find(n=>typeof n=="object"));return t.map(r)}function iO(e,t){let r=Cn(e,t==null?void 0:t.in);return r.setHours(0,0,0,0),r}function WVe(e,t,r){let[n,o]=j6(r==null?void 0:r.in,e,t),i=iO(n),a=iO(o),u=+i-I_(i),d=+a-I_(a);return Math.round((u-d)/VVe)}function $Ve(e,t){let r=R6(e,t),n=Co((t==null?void 0:t.in)||e,0);return n.setFullYear(r,0,4),n.setHours(0,0,0,0),hd(n)}function ZVe(e){return e instanceof Date||typeof e=="object"&&Object.prototype.toString.call(e)==="[object Date]"}function q6(e){return!(!ZVe(e)&&typeof e!="number"||isNaN(+Cn(e)))}function YVe(e,t){let r=Cn(e,t==null?void 0:t.in);return r.setFullYear(r.getFullYear(),0,1),r.setHours(0,0,0,0),r}var Owr={lessThanXSeconds:{one:"less than a second",other:"less than {{count}} seconds"},xSeconds:{one:"1 second",other:"{{count}} seconds"},halfAMinute:"half a minute",lessThanXMinutes:{one:"less than a minute",other:"less than {{count}} minutes"},xMinutes:{one:"1 minute",other:"{{count}} minutes"},aboutXHours:{one:"about 1 hour",other:"about {{count}} hours"},xHours:{one:"1 hour",other:"{{count}} hours"},xDays:{one:"1 day",other:"{{count}} days"},aboutXWeeks:{one:"about 1 week",other:"about {{count}} weeks"},xWeeks:{one:"1 week",other:"{{count}} weeks"},aboutXMonths:{one:"about 1 month",other:"about {{count}} months"},xMonths:{one:"1 month",other:"{{count}} months"},aboutXYears:{one:"about 1 year",other:"about {{count}} years"},xYears:{one:"1 year",other:"{{count}} years"},overXYears:{one:"over 1 year",other:"over {{count}} years"},almostXYears:{one:"almost 1 year",other:"almost {{count}} years"}},KVe=(e,t,r)=>{let n,o=Owr[e];return typeof o=="string"?n=o:t===1?n=o.one:n=o.other.replace("{{count}}",t.toString()),r!=null&&r.addSuffix?r.comparison&&r.comparison>0?"in "+n:n+" ago":n};function z6(e){return(t={})=>{let r=t.width?String(t.width):e.defaultWidth;return e.formats[r]||e.formats[e.defaultWidth]}}var Pwr={full:"EEEE, MMMM do, y",long:"MMMM do, y",medium:"MMM d, y",short:"MM/dd/yyyy"},Nwr={full:"h:mm:ss a zzzz",long:"h:mm:ss a z",medium:"h:mm:ss a",short:"h:mm a"},Dwr={full:"{{date}} 'at' {{time}}",long:"{{date}} 'at' {{time}}",medium:"{{date}}, {{time}}",short:"{{date}}, {{time}}"},XVe={date:z6({formats:Pwr,defaultWidth:"full"}),time:z6({formats:Nwr,defaultWidth:"full"}),dateTime:z6({formats:Dwr,defaultWidth:"full"})};var Lwr={lastWeek:"'last' eeee 'at' p",yesterday:"'yesterday at' p",today:"'today at' p",tomorrow:"'tomorrow at' p",nextWeek:"eeee 'at' p",other:"P"},QVe=(e,t,r,n)=>Lwr[e];function KE(e){return(t,r)=>{let n=r!=null&&r.context?String(r.context):"standalone",o;if(n==="formatting"&&e.formattingValues){let a=e.defaultFormattingWidth||e.defaultWidth,u=r!=null&&r.width?String(r.width):a;o=e.formattingValues[u]||e.formattingValues[a]}else{let a=e.defaultWidth,u=r!=null&&r.width?String(r.width):e.defaultWidth;o=e.values[u]||e.values[a]}let i=e.argumentCallback?e.argumentCallback(t):t;return o[i]}}var kwr={narrow:["B","A"],abbreviated:["BC","AD"],wide:["Before Christ","Anno Domini"]},Rwr={narrow:["1","2","3","4"],abbreviated:["Q1","Q2","Q3","Q4"],wide:["1st quarter","2nd quarter","3rd quarter","4th quarter"]},jwr={narrow:["J","F","M","A","M","J","J","A","S","O","N","D"],abbreviated:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],wide:["January","February","March","April","May","June","July","August","September","October","November","December"]},qwr={narrow:["S","M","T","W","T","F","S"],short:["Su","Mo","Tu","We","Th","Fr","Sa"],abbreviated:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],wide:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"]},zwr={narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"}},Fwr={narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"}},Uwr=(e,t)=>{let r=Number(e),n=r%100;if(n>20||n<10)switch(n%10){case 1:return r+"st";case 2:return r+"nd";case 3:return r+"rd"}return r+"th"},JVe={ordinalNumber:Uwr,era:KE({values:kwr,defaultWidth:"wide"}),quarter:KE({values:Rwr,defaultWidth:"wide",argumentCallback:e=>e-1}),month:KE({values:jwr,defaultWidth:"wide"}),day:KE({values:qwr,defaultWidth:"wide"}),dayPeriod:KE({values:zwr,defaultWidth:"wide",formattingValues:Fwr,defaultFormattingWidth:"wide"})};function XE(e){return(t,r={})=>{let n=r.width,o=n&&e.matchPatterns[n]||e.matchPatterns[e.defaultMatchWidth],i=t.match(o);if(!i)return null;let a=i[0],u=n&&e.parsePatterns[n]||e.parsePatterns[e.defaultParseWidth],d=Array.isArray(u)?Vwr(u,b=>b.test(a)):Bwr(u,b=>b.test(a)),h;h=e.valueCallback?e.valueCallback(d):d,h=r.valueCallback?r.valueCallback(h):h;let v=t.slice(a.length);return{value:h,rest:v}}}function Bwr(e,t){for(let r in e)if(Object.prototype.hasOwnProperty.call(e,r)&&t(e[r]))return r}function Vwr(e,t){for(let r=0;r<e.length;r++)if(t(e[r]))return r}function eGe(e){return(t,r={})=>{let n=t.match(e.matchPattern);if(!n)return null;let o=n[0],i=t.match(e.parsePattern);if(!i)return null;let a=e.valueCallback?e.valueCallback(i[0]):i[0];a=r.valueCallback?r.valueCallback(a):a;let u=t.slice(o.length);return{value:a,rest:u}}}var Gwr=/^(\d+)(th|st|nd|rd)?/i,Hwr=/\d+/i,Wwr={narrow:/^(b|a)/i,abbreviated:/^(b\.?\s?c\.?|b\.?\s?c\.?\s?e\.?|a\.?\s?d\.?|c\.?\s?e\.?)/i,wide:/^(before christ|before common era|anno domini|common era)/i},$wr={any:[/^b/i,/^(a|c)/i]},Zwr={narrow:/^[1234]/i,abbreviated:/^q[1234]/i,wide:/^[1234](th|st|nd|rd)? quarter/i},Ywr={any:[/1/i,/2/i,/3/i,/4/i]},Kwr={narrow:/^[jfmasond]/i,abbreviated:/^(jan|feb|mar|apr|may|jun|jul|aug|sep|oct|nov|dec)/i,wide:/^(january|february|march|april|may|june|july|august|september|october|november|december)/i},Xwr={narrow:[/^j/i,/^f/i,/^m/i,/^a/i,/^m/i,/^j/i,/^j/i,/^a/i,/^s/i,/^o/i,/^n/i,/^d/i],any:[/^ja/i,/^f/i,/^mar/i,/^ap/i,/^may/i,/^jun/i,/^jul/i,/^au/i,/^s/i,/^o/i,/^n/i,/^d/i]},Qwr={narrow:/^[smtwf]/i,short:/^(su|mo|tu|we|th|fr|sa)/i,abbreviated:/^(sun|mon|tue|wed|thu|fri|sat)/i,wide:/^(sunday|monday|tuesday|wednesday|thursday|friday|saturday)/i},Jwr={narrow:[/^s/i,/^m/i,/^t/i,/^w/i,/^t/i,/^f/i,/^s/i],any:[/^su/i,/^m/i,/^tu/i,/^w/i,/^th/i,/^f/i,/^sa/i]},eEr={narrow:/^(a|p|mi|n|(in the|at) (morning|afternoon|evening|night))/i,any:/^([ap]\.?\s?m\.?|midnight|noon|(in the|at) (morning|afternoon|evening|night))/i},tEr={any:{am:/^a/i,pm:/^p/i,midnight:/^mi/i,noon:/^no/i,morning:/morning/i,afternoon:/afternoon/i,evening:/evening/i,night:/night/i}},tGe={ordinalNumber:eGe({matchPattern:Gwr,parsePattern:Hwr,valueCallback:e=>parseInt(e,10)}),era:XE({matchPatterns:Wwr,defaultMatchWidth:"wide",parsePatterns:$wr,defaultParseWidth:"any"}),quarter:XE({matchPatterns:Zwr,defaultMatchWidth:"wide",parsePatterns:Ywr,defaultParseWidth:"any",valueCallback:e=>e+1}),month:XE({matchPatterns:Kwr,defaultMatchWidth:"wide",parsePatterns:Xwr,defaultParseWidth:"any"}),day:XE({matchPatterns:Qwr,defaultMatchWidth:"wide",parsePatterns:Jwr,defaultParseWidth:"any"}),dayPeriod:XE({matchPatterns:eEr,defaultMatchWidth:"any",parsePatterns:tEr,defaultParseWidth:"any"})};var aO={code:"en-US",formatDistance:KVe,formatLong:XVe,formatRelative:QVe,localize:JVe,match:tGe,options:{weekStartsOn:0,firstWeekContainsDate:1}};function rGe(e,t){let r=Cn(e,t==null?void 0:t.in);return WVe(r,YVe(r))+1}function F6(e,t){let r=Cn(e,t==null?void 0:t.in),n=+hd(r)-+$Ve(r);return Math.round(n/L6)+1}function QE(e,t){var v,b,x,M,O,D,k,R;let r=Cn(e,t==null?void 0:t.in),n=r.getFullYear(),o=rf(),i=(R=(k=(M=(x=t==null?void 0:t.firstWeekContainsDate)!=null?x:(b=(v=t==null?void 0:t.locale)==null?void 0:v.options)==null?void 0:b.firstWeekContainsDate)!=null?M:o.firstWeekContainsDate)!=null?k:(D=(O=o.locale)==null?void 0:O.options)==null?void 0:D.firstWeekContainsDate)!=null?R:1,a=Co((t==null?void 0:t.in)||e,0);a.setFullYear(n+1,0,i),a.setHours(0,0,0,0);let u=Sc(a,t),d=Co((t==null?void 0:t.in)||e,0);d.setFullYear(n,0,i),d.setHours(0,0,0,0);let h=Sc(d,t);return+r>=+u?n+1:+r>=+h?n:n-1}function nGe(e,t){var u,d,h,v,b,x,M,O;let r=rf(),n=(O=(M=(v=(h=t==null?void 0:t.firstWeekContainsDate)!=null?h:(d=(u=t==null?void 0:t.locale)==null?void 0:u.options)==null?void 0:d.firstWeekContainsDate)!=null?v:r.firstWeekContainsDate)!=null?M:(x=(b=r.locale)==null?void 0:b.options)==null?void 0:x.firstWeekContainsDate)!=null?O:1,o=QE(e,t),i=Co((t==null?void 0:t.in)||e,0);return i.setFullYear(o,0,n),i.setHours(0,0,0,0),Sc(i,t)}function U6(e,t){let r=Cn(e,t==null?void 0:t.in),n=+Sc(r,t)-+nGe(r,t);return Math.round(n/L6)+1}function no(e,t){let r=e<0?"-":"",n=Math.abs(e).toString().padStart(t,"0");return r+n}var fg={y(e,t){let r=e.getFullYear(),n=r>0?r:1-r;return no(t==="yy"?n%100:n,t.length)},M(e,t){let r=e.getMonth();return t==="M"?String(r+1):no(r+1,2)},d(e,t){return no(e.getDate(),t.length)},a(e,t){let r=e.getHours()/12>=1?"pm":"am";switch(t){case"a":case"aa":return r.toUpperCase();case"aaa":return r;case"aaaaa":return r[0];case"aaaa":default:return r==="am"?"a.m.":"p.m."}},h(e,t){return no(e.getHours()%12||12,t.length)},H(e,t){return no(e.getHours(),t.length)},m(e,t){return no(e.getMinutes(),t.length)},s(e,t){return no(e.getSeconds(),t.length)},S(e,t){let r=t.length,n=e.getMilliseconds(),o=Math.trunc(n*Math.pow(10,r-3));return no(o,t.length)}};var JE={am:"am",pm:"pm",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},ene={G:function(e,t,r){let n=e.getFullYear()>0?1:0;switch(t){case"G":case"GG":case"GGG":return r.era(n,{width:"abbreviated"});case"GGGGG":return r.era(n,{width:"narrow"});case"GGGG":default:return r.era(n,{width:"wide"})}},y:function(e,t,r){if(t==="yo"){let n=e.getFullYear(),o=n>0?n:1-n;return r.ordinalNumber(o,{unit:"year"})}return fg.y(e,t)},Y:function(e,t,r,n){let o=QE(e,n),i=o>0?o:1-o;if(t==="YY"){let a=i%100;return no(a,2)}return t==="Yo"?r.ordinalNumber(i,{unit:"year"}):no(i,t.length)},R:function(e,t){let r=R6(e);return no(r,t.length)},u:function(e,t){let r=e.getFullYear();return no(r,t.length)},Q:function(e,t,r){let n=Math.ceil((e.getMonth()+1)/3);switch(t){case"Q":return String(n);case"QQ":return no(n,2);case"Qo":return r.ordinalNumber(n,{unit:"quarter"});case"QQQ":return r.quarter(n,{width:"abbreviated",context:"formatting"});case"QQQQQ":return r.quarter(n,{width:"narrow",context:"formatting"});case"QQQQ":default:return r.quarter(n,{width:"wide",context:"formatting"})}},q:function(e,t,r){let n=Math.ceil((e.getMonth()+1)/3);switch(t){case"q":return String(n);case"qq":return no(n,2);case"qo":return r.ordinalNumber(n,{unit:"quarter"});case"qqq":return r.quarter(n,{width:"abbreviated",context:"standalone"});case"qqqqq":return r.quarter(n,{width:"narrow",context:"standalone"});case"qqqq":default:return r.quarter(n,{width:"wide",context:"standalone"})}},M:function(e,t,r){let n=e.getMonth();switch(t){case"M":case"MM":return fg.M(e,t);case"Mo":return r.ordinalNumber(n+1,{unit:"month"});case"MMM":return r.month(n,{width:"abbreviated",context:"formatting"});case"MMMMM":return r.month(n,{width:"narrow",context:"formatting"});case"MMMM":default:return r.month(n,{width:"wide",context:"formatting"})}},L:function(e,t,r){let n=e.getMonth();switch(t){case"L":return String(n+1);case"LL":return no(n+1,2);case"Lo":return r.ordinalNumber(n+1,{unit:"month"});case"LLL":return r.month(n,{width:"abbreviated",context:"standalone"});case"LLLLL":return r.month(n,{width:"narrow",context:"standalone"});case"LLLL":default:return r.month(n,{width:"wide",context:"standalone"})}},w:function(e,t,r,n){let o=U6(e,n);return t==="wo"?r.ordinalNumber(o,{unit:"week"}):no(o,t.length)},I:function(e,t,r){let n=F6(e);return t==="Io"?r.ordinalNumber(n,{unit:"week"}):no(n,t.length)},d:function(e,t,r){return t==="do"?r.ordinalNumber(e.getDate(),{unit:"date"}):fg.d(e,t)},D:function(e,t,r){let n=rGe(e);return t==="Do"?r.ordinalNumber(n,{unit:"dayOfYear"}):no(n,t.length)},E:function(e,t,r){let n=e.getDay();switch(t){case"E":case"EE":case"EEE":return r.day(n,{width:"abbreviated",context:"formatting"});case"EEEEE":return r.day(n,{width:"narrow",context:"formatting"});case"EEEEEE":return r.day(n,{width:"short",context:"formatting"});case"EEEE":default:return r.day(n,{width:"wide",context:"formatting"})}},e:function(e,t,r,n){let o=e.getDay(),i=(o-n.weekStartsOn+8)%7||7;switch(t){case"e":return String(i);case"ee":return no(i,2);case"eo":return r.ordinalNumber(i,{unit:"day"});case"eee":return r.day(o,{width:"abbreviated",context:"formatting"});case"eeeee":return r.day(o,{width:"narrow",context:"formatting"});case"eeeeee":return r.day(o,{width:"short",context:"formatting"});case"eeee":default:return r.day(o,{width:"wide",context:"formatting"})}},c:function(e,t,r,n){let o=e.getDay(),i=(o-n.weekStartsOn+8)%7||7;switch(t){case"c":return String(i);case"cc":return no(i,t.length);case"co":return r.ordinalNumber(i,{unit:"day"});case"ccc":return r.day(o,{width:"abbreviated",context:"standalone"});case"ccccc":return r.day(o,{width:"narrow",context:"standalone"});case"cccccc":return r.day(o,{width:"short",context:"standalone"});case"cccc":default:return r.day(o,{width:"wide",context:"standalone"})}},i:function(e,t,r){let n=e.getDay(),o=n===0?7:n;switch(t){case"i":return String(o);case"ii":return no(o,t.length);case"io":return r.ordinalNumber(o,{unit:"day"});case"iii":return r.day(n,{width:"abbreviated",context:"formatting"});case"iiiii":return r.day(n,{width:"narrow",context:"formatting"});case"iiiiii":return r.day(n,{width:"short",context:"formatting"});case"iiii":default:return r.day(n,{width:"wide",context:"formatting"})}},a:function(e,t,r){let o=e.getHours()/12>=1?"pm":"am";switch(t){case"a":case"aa":return r.dayPeriod(o,{width:"abbreviated",context:"formatting"});case"aaa":return r.dayPeriod(o,{width:"abbreviated",context:"formatting"}).toLowerCase();case"aaaaa":return r.dayPeriod(o,{width:"narrow",context:"formatting"});case"aaaa":default:return r.dayPeriod(o,{width:"wide",context:"formatting"})}},b:function(e,t,r){let n=e.getHours(),o;switch(n===12?o=JE.noon:n===0?o=JE.midnight:o=n/12>=1?"pm":"am",t){case"b":case"bb":return r.dayPeriod(o,{width:"abbreviated",context:"formatting"});case"bbb":return r.dayPeriod(o,{width:"abbreviated",context:"formatting"}).toLowerCase();case"bbbbb":return r.dayPeriod(o,{width:"narrow",context:"formatting"});case"bbbb":default:return r.dayPeriod(o,{width:"wide",context:"formatting"})}},B:function(e,t,r){let n=e.getHours(),o;switch(n>=17?o=JE.evening:n>=12?o=JE.afternoon:n>=4?o=JE.morning:o=JE.night,t){case"B":case"BB":case"BBB":return r.dayPeriod(o,{width:"abbreviated",context:"formatting"});case"BBBBB":return r.dayPeriod(o,{width:"narrow",context:"formatting"});case"BBBB":default:return r.dayPeriod(o,{width:"wide",context:"formatting"})}},h:function(e,t,r){if(t==="ho"){let n=e.getHours()%12;return n===0&&(n=12),r.ordinalNumber(n,{unit:"hour"})}return fg.h(e,t)},H:function(e,t,r){return t==="Ho"?r.ordinalNumber(e.getHours(),{unit:"hour"}):fg.H(e,t)},K:function(e,t,r){let n=e.getHours()%12;return t==="Ko"?r.ordinalNumber(n,{unit:"hour"}):no(n,t.length)},k:function(e,t,r){let n=e.getHours();return n===0&&(n=24),t==="ko"?r.ordinalNumber(n,{unit:"hour"}):no(n,t.length)},m:function(e,t,r){return t==="mo"?r.ordinalNumber(e.getMinutes(),{unit:"minute"}):fg.m(e,t)},s:function(e,t,r){return t==="so"?r.ordinalNumber(e.getSeconds(),{unit:"second"}):fg.s(e,t)},S:function(e,t){return fg.S(e,t)},X:function(e,t,r){let n=e.getTimezoneOffset();if(n===0)return"Z";switch(t){case"X":return iGe(n);case"XXXX":case"XX":return M_(n);case"XXXXX":case"XXX":default:return M_(n,":")}},x:function(e,t,r){let n=e.getTimezoneOffset();switch(t){case"x":return iGe(n);case"xxxx":case"xx":return M_(n);case"xxxxx":case"xxx":default:return M_(n,":")}},O:function(e,t,r){let n=e.getTimezoneOffset();switch(t){case"O":case"OO":case"OOO":return"GMT"+oGe(n,":");case"OOOO":default:return"GMT"+M_(n,":")}},z:function(e,t,r){let n=e.getTimezoneOffset();switch(t){case"z":case"zz":case"zzz":return"GMT"+oGe(n,":");case"zzzz":default:return"GMT"+M_(n,":")}},t:function(e,t,r){let n=Math.trunc(+e/1e3);return no(n,t.length)},T:function(e,t,r){return no(+e,t.length)}};function oGe(e,t=""){let r=e>0?"-":"+",n=Math.abs(e),o=Math.trunc(n/60),i=n%60;return i===0?r+String(o):r+String(o)+t+no(i,2)}function iGe(e,t){return e%60===0?(e>0?"-":"+")+no(Math.abs(e)/60,2):M_(e,t)}function M_(e,t=""){let r=e>0?"-":"+",n=Math.abs(e),o=no(Math.trunc(n/60),2),i=no(n%60,2);return r+o+t+i}var aGe=(e,t)=>{switch(e){case"P":return t.date({width:"short"});case"PP":return t.date({width:"medium"});case"PPP":return t.date({width:"long"});case"PPPP":default:return t.date({width:"full"})}},sGe=(e,t)=>{switch(e){case"p":return t.time({width:"short"});case"pp":return t.time({width:"medium"});case"ppp":return t.time({width:"long"});case"pppp":default:return t.time({width:"full"})}},rEr=(e,t)=>{let r=e.match(/(P+)(p+)?/)||[],n=r[1],o=r[2];if(!o)return aGe(e,t);let i;switch(n){case"P":i=t.dateTime({width:"short"});break;case"PP":i=t.dateTime({width:"medium"});break;case"PPP":i=t.dateTime({width:"long"});break;case"PPPP":default:i=t.dateTime({width:"full"});break}return i.replace("{{date}}",aGe(n,t)).replace("{{time}}",sGe(o,t))},sO={p:sGe,P:rEr};var nEr=/^D+$/,oEr=/^Y+$/,iEr=["D","DD","YY","YYYY"];function B6(e){return nEr.test(e)}function V6(e){return oEr.test(e)}function lO(e,t,r){let n=aEr(e,t,r);if(console.warn(n),iEr.includes(e))throw new RangeError(n)}function aEr(e,t,r){let n=e[0]==="Y"?"years":"days of the month";return`Use \`${e.toLowerCase()}\` instead of \`${e}\` (in \`${t}\`) for formatting ${n} to the input \`${r}\`; see: https://github.com/date-fns/date-fns/blob/master/docs/unicodeTokens.md`}var sEr=/[yYQqMLwIdDecihHKkms]o|(\w)\1*|''|'(''|[^'])+('|$)|./g,lEr=/P+p+|P+|p+|''|'(''|[^'])+('|$)|./g,uEr=/^'([^]*?)'?$/,cEr=/''/g,pEr=/[a-zA-Z]/;function tne(e,t,r){var v,b,x,M,O,D,k,R,q,B,G,re,Q,ie,me,ve,ye,we;let n=rf(),o=(b=(v=r==null?void 0:r.locale)!=null?v:n.locale)!=null?b:aO,i=(B=(q=(D=(O=r==null?void 0:r.firstWeekContainsDate)!=null?O:(M=(x=r==null?void 0:r.locale)==null?void 0:x.options)==null?void 0:M.firstWeekContainsDate)!=null?D:n.firstWeekContainsDate)!=null?q:(R=(k=n.locale)==null?void 0:k.options)==null?void 0:R.firstWeekContainsDate)!=null?B:1,a=(we=(ye=(ie=(Q=r==null?void 0:r.weekStartsOn)!=null?Q:(re=(G=r==null?void 0:r.locale)==null?void 0:G.options)==null?void 0:re.weekStartsOn)!=null?ie:n.weekStartsOn)!=null?ye:(ve=(me=n.locale)==null?void 0:me.options)==null?void 0:ve.weekStartsOn)!=null?we:0,u=Cn(e,r==null?void 0:r.in);if(!q6(u))throw new RangeError("Invalid time value");let d=t.match(lEr).map(Se=>{let ge=Se[0];if(ge==="p"||ge==="P"){let Re=sO[ge];return Re(Se,o.formatLong)}return Se}).join("").match(sEr).map(Se=>{if(Se==="''")return{isToken:!1,value:"'"};let ge=Se[0];if(ge==="'")return{isToken:!1,value:fEr(Se)};if(ene[ge])return{isToken:!0,value:Se};if(ge.match(pEr))throw new RangeError("Format string contains an unescaped latin alphabet character `"+ge+"`");return{isToken:!1,value:Se}});o.localize.preprocessor&&(d=o.localize.preprocessor(u,d));let h={firstWeekContainsDate:i,weekStartsOn:a,locale:o};return d.map(Se=>{if(!Se.isToken)return Se.value;let ge=Se.value;(!(r!=null&&r.useAdditionalWeekYearTokens)&&V6(ge)||!(r!=null&&r.useAdditionalDayOfYearTokens)&&B6(ge))&&lO(ge,t,String(e));let Re=ene[ge[0]];return Re(u,ge,o.localize,h)}).join("")}function fEr(e){let t=e.match(uEr);return t?t[1].replace(cEr,"'"):e}function lGe(e,t){var h,v;let r=Cn(e,t==null?void 0:t.in);if(isNaN(+r))throw new RangeError("Invalid time value");let n=(h=t==null?void 0:t.format)!=null?h:"extended",o=(v=t==null?void 0:t.representation)!=null?v:"complete",i="",a="",u=n==="extended"?"-":"",d=n==="extended"?":":"";if(o!=="time"){let b=no(r.getDate(),2),x=no(r.getMonth()+1,2);i=`${no(r.getFullYear(),4)}${u}${x}${u}${b}`}if(o!=="date"){let b=r.getTimezoneOffset();if(b!==0){let R=Math.abs(b),q=no(Math.trunc(R/60),2),B=no(R%60,2);a=`${b<0?"+":"-"}${q}:${B}`}else a="Z";let x=no(r.getHours(),2),M=no(r.getMinutes(),2),O=no(r.getSeconds(),2),D=i===""?"":"T",k=[x,M,O].join(d);i=`${i}${D}${k}${a}`}return i}function uGe(){return Object.assign({},rf())}function cGe(e,t){let r=Cn(e,t==null?void 0:t.in).getDay();return r===0?7:r}function pGe(e){return Math.trunc(+Cn(e)/1e3)}function uO(e,t){return Cn(e,t==null?void 0:t.in).getFullYear()}function fGe(e,t){let r=dEr(t)?new t(0):Co(t,0);return r.setFullYear(e.getFullYear(),e.getMonth(),e.getDate()),r.setHours(e.getHours(),e.getMinutes(),e.getSeconds(),e.getMilliseconds()),r}function dEr(e){var t;return typeof e=="function"&&((t=e.prototype)==null?void 0:t.constructor)===e}var hEr=10,G6=class{constructor(){bt(this,"subPriority",0)}validate(t,r){return!0}},H6=class extends G6{constructor(t,r,n,o,i){super(),this.value=t,this.validateValue=r,this.setValue=n,this.priority=o,i&&(this.subPriority=i)}validate(t,r){return this.validateValue(t,this.value,r)}set(t,r,n){return this.setValue(t,r,this.value,n)}},W6=class extends G6{constructor(r,n){super();bt(this,"priority",hEr);bt(this,"subPriority",-1);this.context=r||(o=>Co(n,o))}set(r,n){return n.timestampIsSet?r:Co(r,fGe(r,this.context))}};var Lr=class{run(t,r,n,o){let i=this.parse(t,r,n,o);return i?{setter:new H6(i.value,this.validate,this.set,this.priority,this.subPriority),rest:i.rest}:null}validate(t,r,n){return!0}};var $6=class extends Lr{constructor(){super(...arguments);bt(this,"priority",140);bt(this,"incompatibleTokens",["R","u","t","T"])}parse(r,n,o){switch(n){case"G":case"GG":case"GGG":return o.era(r,{width:"abbreviated"})||o.era(r,{width:"narrow"});case"GGGGG":return o.era(r,{width:"narrow"});case"GGGG":default:return o.era(r,{width:"wide"})||o.era(r,{width:"abbreviated"})||o.era(r,{width:"narrow"})}}set(r,n,o){return n.era=o,r.setFullYear(o,0,1),r.setHours(0,0,0,0),r}};var Lo={month:/^(1[0-2]|0?\d)/,date:/^(3[0-1]|[0-2]?\d)/,dayOfYear:/^(36[0-6]|3[0-5]\d|[0-2]?\d?\d)/,week:/^(5[0-3]|[0-4]?\d)/,hour23h:/^(2[0-3]|[0-1]?\d)/,hour24h:/^(2[0-4]|[0-1]?\d)/,hour11h:/^(1[0-1]|0?\d)/,hour12h:/^(1[0-2]|0?\d)/,minute:/^[0-5]?\d/,second:/^[0-5]?\d/,singleDigit:/^\d/,twoDigits:/^\d{1,2}/,threeDigits:/^\d{1,3}/,fourDigits:/^\d{1,4}/,anyDigitsSigned:/^-?\d+/,singleDigitSigned:/^-?\d/,twoDigitsSigned:/^-?\d{1,2}/,threeDigitsSigned:/^-?\d{1,3}/,fourDigitsSigned:/^-?\d{1,4}/},nf={basicOptionalMinutes:/^([+-])(\d{2})(\d{2})?|Z/,basic:/^([+-])(\d{2})(\d{2})|Z/,basicOptionalSeconds:/^([+-])(\d{2})(\d{2})((\d{2}))?|Z/,extended:/^([+-])(\d{2}):(\d{2})|Z/,extendedOptionalSeconds:/^([+-])(\d{2}):(\d{2})(:(\d{2}))?|Z/};function si(e,t){return e&&{value:t(e.value),rest:e.rest}}function Ao(e,t){let r=t.match(e);return r?{value:parseInt(r[0],10),rest:t.slice(r[0].length)}:null}function of(e,t){let r=t.match(e);if(!r)return null;if(r[0]==="Z")return{value:0,rest:t.slice(1)};let n=r[1]==="+"?1:-1,o=r[2]?parseInt(r[2],10):0,i=r[3]?parseInt(r[3],10):0,a=r[5]?parseInt(r[5],10):0;return{value:n*(o*oO+i*nO+a*GVe),rest:t.slice(r[0].length)}}function Z6(e){return Ao(Lo.anyDigitsSigned,e)}function Kn(e,t){switch(e){case 1:return Ao(Lo.singleDigit,t);case 2:return Ao(Lo.twoDigits,t);case 3:return Ao(Lo.threeDigits,t);case 4:return Ao(Lo.fourDigits,t);default:return Ao(new RegExp("^\\d{1,"+e+"}"),t)}}function eS(e,t){switch(e){case 1:return Ao(Lo.singleDigitSigned,t);case 2:return Ao(Lo.twoDigitsSigned,t);case 3:return Ao(Lo.threeDigitsSigned,t);case 4:return Ao(Lo.fourDigitsSigned,t);default:return Ao(new RegExp("^-?\\d{1,"+e+"}"),t)}}function tS(e){switch(e){case"morning":return 4;case"evening":return 17;case"pm":case"noon":case"afternoon":return 12;case"am":case"midnight":case"night":default:return 0}}function Y6(e,t){let r=t>0,n=r?t:1-t,o;if(n<=50)o=e||100;else{let i=n+50,a=Math.trunc(i/100)*100,u=e>=i%100;o=e+a-(u?100:0)}return r?o:1-o}function K6(e){return e%400===0||e%4===0&&e%100!==0}var X6=class extends Lr{constructor(){super(...arguments);bt(this,"priority",130);bt(this,"incompatibleTokens",["Y","R","u","w","I","i","e","c","t","T"])}parse(r,n,o){let i=a=>({year:a,isTwoDigitYear:n==="yy"});switch(n){case"y":return si(Kn(4,r),i);case"yo":return si(o.ordinalNumber(r,{unit:"year"}),i);default:return si(Kn(n.length,r),i)}}validate(r,n){return n.isTwoDigitYear||n.year>0}set(r,n,o){let i=r.getFullYear();if(o.isTwoDigitYear){let u=Y6(o.year,i);return r.setFullYear(u,0,1),r.setHours(0,0,0,0),r}let a=!("era"in n)||n.era===1?o.year:1-o.year;return r.setFullYear(a,0,1),r.setHours(0,0,0,0),r}};var Q6=class extends Lr{constructor(){super(...arguments);bt(this,"priority",130);bt(this,"incompatibleTokens",["y","R","u","Q","q","M","L","I","d","D","i","t","T"])}parse(r,n,o){let i=a=>({year:a,isTwoDigitYear:n==="YY"});switch(n){case"Y":return si(Kn(4,r),i);case"Yo":return si(o.ordinalNumber(r,{unit:"year"}),i);default:return si(Kn(n.length,r),i)}}validate(r,n){return n.isTwoDigitYear||n.year>0}set(r,n,o,i){let a=QE(r,i);if(o.isTwoDigitYear){let d=Y6(o.year,a);return r.setFullYear(d,0,i.firstWeekContainsDate),r.setHours(0,0,0,0),Sc(r,i)}let u=!("era"in n)||n.era===1?o.year:1-o.year;return r.setFullYear(u,0,i.firstWeekContainsDate),r.setHours(0,0,0,0),Sc(r,i)}};var J6=class extends Lr{constructor(){super(...arguments);bt(this,"priority",130);bt(this,"incompatibleTokens",["G","y","Y","u","Q","q","M","L","w","d","D","e","c","t","T"])}parse(r,n){return n==="R"?eS(4,r):eS(n.length,r)}set(r,n,o){let i=Co(r,0);return i.setFullYear(o,0,4),i.setHours(0,0,0,0),hd(i)}};var ej=class extends Lr{constructor(){super(...arguments);bt(this,"priority",130);bt(this,"incompatibleTokens",["G","y","Y","R","w","I","i","e","c","t","T"])}parse(r,n){return n==="u"?eS(4,r):eS(n.length,r)}set(r,n,o){return r.setFullYear(o,0,1),r.setHours(0,0,0,0),r}};var tj=class extends Lr{constructor(){super(...arguments);bt(this,"priority",120);bt(this,"incompatibleTokens",["Y","R","q","M","L","w","I","d","D","i","e","c","t","T"])}parse(r,n,o){switch(n){case"Q":case"QQ":return Kn(n.length,r);case"Qo":return o.ordinalNumber(r,{unit:"quarter"});case"QQQ":return o.quarter(r,{width:"abbreviated",context:"formatting"})||o.quarter(r,{width:"narrow",context:"formatting"});case"QQQQQ":return o.quarter(r,{width:"narrow",context:"formatting"});case"QQQQ":default:return o.quarter(r,{width:"wide",context:"formatting"})||o.quarter(r,{width:"abbreviated",context:"formatting"})||o.quarter(r,{width:"narrow",context:"formatting"})}}validate(r,n){return n>=1&&n<=4}set(r,n,o){return r.setMonth((o-1)*3,1),r.setHours(0,0,0,0),r}};var rj=class extends Lr{constructor(){super(...arguments);bt(this,"priority",120);bt(this,"incompatibleTokens",["Y","R","Q","M","L","w","I","d","D","i","e","c","t","T"])}parse(r,n,o){switch(n){case"q":case"qq":return Kn(n.length,r);case"qo":return o.ordinalNumber(r,{unit:"quarter"});case"qqq":return o.quarter(r,{width:"abbreviated",context:"standalone"})||o.quarter(r,{width:"narrow",context:"standalone"});case"qqqqq":return o.quarter(r,{width:"narrow",context:"standalone"});case"qqqq":default:return o.quarter(r,{width:"wide",context:"standalone"})||o.quarter(r,{width:"abbreviated",context:"standalone"})||o.quarter(r,{width:"narrow",context:"standalone"})}}validate(r,n){return n>=1&&n<=4}set(r,n,o){return r.setMonth((o-1)*3,1),r.setHours(0,0,0,0),r}};var nj=class extends Lr{constructor(){super(...arguments);bt(this,"incompatibleTokens",["Y","R","q","Q","L","w","I","D","i","e","c","t","T"]);bt(this,"priority",110)}parse(r,n,o){let i=a=>a-1;switch(n){case"M":return si(Ao(Lo.month,r),i);case"MM":return si(Kn(2,r),i);case"Mo":return si(o.ordinalNumber(r,{unit:"month"}),i);case"MMM":return o.month(r,{width:"abbreviated",context:"formatting"})||o.month(r,{width:"narrow",context:"formatting"});case"MMMMM":return o.month(r,{width:"narrow",context:"formatting"});case"MMMM":default:return o.month(r,{width:"wide",context:"formatting"})||o.month(r,{width:"abbreviated",context:"formatting"})||o.month(r,{width:"narrow",context:"formatting"})}}validate(r,n){return n>=0&&n<=11}set(r,n,o){return r.setMonth(o,1),r.setHours(0,0,0,0),r}};var oj=class extends Lr{constructor(){super(...arguments);bt(this,"priority",110);bt(this,"incompatibleTokens",["Y","R","q","Q","M","w","I","D","i","e","c","t","T"])}parse(r,n,o){let i=a=>a-1;switch(n){case"L":return si(Ao(Lo.month,r),i);case"LL":return si(Kn(2,r),i);case"Lo":return si(o.ordinalNumber(r,{unit:"month"}),i);case"LLL":return o.month(r,{width:"abbreviated",context:"standalone"})||o.month(r,{width:"narrow",context:"standalone"});case"LLLLL":return o.month(r,{width:"narrow",context:"standalone"});case"LLLL":default:return o.month(r,{width:"wide",context:"standalone"})||o.month(r,{width:"abbreviated",context:"standalone"})||o.month(r,{width:"narrow",context:"standalone"})}}validate(r,n){return n>=0&&n<=11}set(r,n,o){return r.setMonth(o,1),r.setHours(0,0,0,0),r}};function dGe(e,t,r){let n=Cn(e,r==null?void 0:r.in),o=U6(n,r)-t;return n.setDate(n.getDate()-o*7),Cn(n,r==null?void 0:r.in)}var ij=class extends Lr{constructor(){super(...arguments);bt(this,"priority",100);bt(this,"incompatibleTokens",["y","R","u","q","Q","M","L","I","d","D","i","t","T"])}parse(r,n,o){switch(n){case"w":return Ao(Lo.week,r);case"wo":return o.ordinalNumber(r,{unit:"week"});default:return Kn(n.length,r)}}validate(r,n){return n>=1&&n<=53}set(r,n,o,i){return Sc(dGe(r,o,i),i)}};function hGe(e,t,r){let n=Cn(e,r==null?void 0:r.in),o=F6(n,r)-t;return n.setDate(n.getDate()-o*7),n}var aj=class extends Lr{constructor(){super(...arguments);bt(this,"priority",100);bt(this,"incompatibleTokens",["y","Y","u","q","Q","M","L","w","d","D","e","c","t","T"])}parse(r,n,o){switch(n){case"I":return Ao(Lo.week,r);case"Io":return o.ordinalNumber(r,{unit:"week"});default:return Kn(n.length,r)}}validate(r,n){return n>=1&&n<=53}set(r,n,o){return hd(hGe(r,o))}};var mEr=[31,28,31,30,31,30,31,31,30,31,30,31],gEr=[31,29,31,30,31,30,31,31,30,31,30,31],sj=class extends Lr{constructor(){super(...arguments);bt(this,"priority",90);bt(this,"subPriority",1);bt(this,"incompatibleTokens",["Y","R","q","Q","w","I","D","i","e","c","t","T"])}parse(r,n,o){switch(n){case"d":return Ao(Lo.date,r);case"do":return o.ordinalNumber(r,{unit:"date"});default:return Kn(n.length,r)}}validate(r,n){let o=r.getFullYear(),i=K6(o),a=r.getMonth();return i?n>=1&&n<=gEr[a]:n>=1&&n<=mEr[a]}set(r,n,o){return r.setDate(o),r.setHours(0,0,0,0),r}};var lj=class extends Lr{constructor(){super(...arguments);bt(this,"priority",90);bt(this,"subpriority",1);bt(this,"incompatibleTokens",["Y","R","q","Q","M","L","w","I","d","E","i","e","c","t","T"])}parse(r,n,o){switch(n){case"D":case"DD":return Ao(Lo.dayOfYear,r);case"Do":return o.ordinalNumber(r,{unit:"date"});default:return Kn(n.length,r)}}validate(r,n){let o=r.getFullYear();return K6(o)?n>=1&&n<=366:n>=1&&n<=365}set(r,n,o){return r.setMonth(0,o),r.setHours(0,0,0,0),r}};function rS(e,t,r){var b,x,M,O,D,k,R,q;let n=rf(),o=(q=(R=(O=(M=r==null?void 0:r.weekStartsOn)!=null?M:(x=(b=r==null?void 0:r.locale)==null?void 0:b.options)==null?void 0:x.weekStartsOn)!=null?O:n.weekStartsOn)!=null?R:(k=(D=n.locale)==null?void 0:D.options)==null?void 0:k.weekStartsOn)!=null?q:0,i=Cn(e,r==null?void 0:r.in),a=i.getDay(),d=(t%7+7)%7,h=7-o,v=t<0||t>6?t-(a+h)%7:(d+h)%7-(a+h)%7;return k6(i,v,r)}var uj=class extends Lr{constructor(){super(...arguments);bt(this,"priority",90);bt(this,"incompatibleTokens",["D","i","e","c","t","T"])}parse(r,n,o){switch(n){case"E":case"EE":case"EEE":return o.day(r,{width:"abbreviated",context:"formatting"})||o.day(r,{width:"short",context:"formatting"})||o.day(r,{width:"narrow",context:"formatting"});case"EEEEE":return o.day(r,{width:"narrow",context:"formatting"});case"EEEEEE":return o.day(r,{width:"short",context:"formatting"})||o.day(r,{width:"narrow",context:"formatting"});case"EEEE":default:return o.day(r,{width:"wide",context:"formatting"})||o.day(r,{width:"abbreviated",context:"formatting"})||o.day(r,{width:"short",context:"formatting"})||o.day(r,{width:"narrow",context:"formatting"})}}validate(r,n){return n>=0&&n<=6}set(r,n,o,i){return r=rS(r,o,i),r.setHours(0,0,0,0),r}};var cj=class extends Lr{constructor(){super(...arguments);bt(this,"priority",90);bt(this,"incompatibleTokens",["y","R","u","q","Q","M","L","I","d","D","E","i","c","t","T"])}parse(r,n,o,i){let a=u=>{let d=Math.floor((u-1)/7)*7;return(u+i.weekStartsOn+6)%7+d};switch(n){case"e":case"ee":return si(Kn(n.length,r),a);case"eo":return si(o.ordinalNumber(r,{unit:"day"}),a);case"eee":return o.day(r,{width:"abbreviated",context:"formatting"})||o.day(r,{width:"short",context:"formatting"})||o.day(r,{width:"narrow",context:"formatting"});case"eeeee":return o.day(r,{width:"narrow",context:"formatting"});case"eeeeee":return o.day(r,{width:"short",context:"formatting"})||o.day(r,{width:"narrow",context:"formatting"});case"eeee":default:return o.day(r,{width:"wide",context:"formatting"})||o.day(r,{width:"abbreviated",context:"formatting"})||o.day(r,{width:"short",context:"formatting"})||o.day(r,{width:"narrow",context:"formatting"})}}validate(r,n){return n>=0&&n<=6}set(r,n,o,i){return r=rS(r,o,i),r.setHours(0,0,0,0),r}};var pj=class extends Lr{constructor(){super(...arguments);bt(this,"priority",90);bt(this,"incompatibleTokens",["y","R","u","q","Q","M","L","I","d","D","E","i","e","t","T"])}parse(r,n,o,i){let a=u=>{let d=Math.floor((u-1)/7)*7;return(u+i.weekStartsOn+6)%7+d};switch(n){case"c":case"cc":return si(Kn(n.length,r),a);case"co":return si(o.ordinalNumber(r,{unit:"day"}),a);case"ccc":return o.day(r,{width:"abbreviated",context:"standalone"})||o.day(r,{width:"short",context:"standalone"})||o.day(r,{width:"narrow",context:"standalone"});case"ccccc":return o.day(r,{width:"narrow",context:"standalone"});case"cccccc":return o.day(r,{width:"short",context:"standalone"})||o.day(r,{width:"narrow",context:"standalone"});case"cccc":default:return o.day(r,{width:"wide",context:"standalone"})||o.day(r,{width:"abbreviated",context:"standalone"})||o.day(r,{width:"short",context:"standalone"})||o.day(r,{width:"narrow",context:"standalone"})}}validate(r,n){return n>=0&&n<=6}set(r,n,o,i){return r=rS(r,o,i),r.setHours(0,0,0,0),r}};function mGe(e,t,r){let n=Cn(e,r==null?void 0:r.in),o=cGe(n,r),i=t-o;return k6(n,i,r)}var fj=class extends Lr{constructor(){super(...arguments);bt(this,"priority",90);bt(this,"incompatibleTokens",["y","Y","u","q","Q","M","L","w","d","D","E","e","c","t","T"])}parse(r,n,o){let i=a=>a===0?7:a;switch(n){case"i":case"ii":return Kn(n.length,r);case"io":return o.ordinalNumber(r,{unit:"day"});case"iii":return si(o.day(r,{width:"abbreviated",context:"formatting"})||o.day(r,{width:"short",context:"formatting"})||o.day(r,{width:"narrow",context:"formatting"}),i);case"iiiii":return si(o.day(r,{width:"narrow",context:"formatting"}),i);case"iiiiii":return si(o.day(r,{width:"short",context:"formatting"})||o.day(r,{width:"narrow",context:"formatting"}),i);case"iiii":default:return si(o.day(r,{width:"wide",context:"formatting"})||o.day(r,{width:"abbreviated",context:"formatting"})||o.day(r,{width:"short",context:"formatting"})||o.day(r,{width:"narrow",context:"formatting"}),i)}}validate(r,n){return n>=1&&n<=7}set(r,n,o){return r=mGe(r,o),r.setHours(0,0,0,0),r}};var dj=class extends Lr{constructor(){super(...arguments);bt(this,"priority",80);bt(this,"incompatibleTokens",["b","B","H","k","t","T"])}parse(r,n,o){switch(n){case"a":case"aa":case"aaa":return o.dayPeriod(r,{width:"abbreviated",context:"formatting"})||o.dayPeriod(r,{width:"narrow",context:"formatting"});case"aaaaa":return o.dayPeriod(r,{width:"narrow",context:"formatting"});case"aaaa":default:return o.dayPeriod(r,{width:"wide",context:"formatting"})||o.dayPeriod(r,{width:"abbreviated",context:"formatting"})||o.dayPeriod(r,{width:"narrow",context:"formatting"})}}set(r,n,o){return r.setHours(tS(o),0,0,0),r}};var hj=class extends Lr{constructor(){super(...arguments);bt(this,"priority",80);bt(this,"incompatibleTokens",["a","B","H","k","t","T"])}parse(r,n,o){switch(n){case"b":case"bb":case"bbb":return o.dayPeriod(r,{width:"abbreviated",context:"formatting"})||o.dayPeriod(r,{width:"narrow",context:"formatting"});case"bbbbb":return o.dayPeriod(r,{width:"narrow",context:"formatting"});case"bbbb":default:return o.dayPeriod(r,{width:"wide",context:"formatting"})||o.dayPeriod(r,{width:"abbreviated",context:"formatting"})||o.dayPeriod(r,{width:"narrow",context:"formatting"})}}set(r,n,o){return r.setHours(tS(o),0,0,0),r}};var mj=class extends Lr{constructor(){super(...arguments);bt(this,"priority",80);bt(this,"incompatibleTokens",["a","b","t","T"])}parse(r,n,o){switch(n){case"B":case"BB":case"BBB":return o.dayPeriod(r,{width:"abbreviated",context:"formatting"})||o.dayPeriod(r,{width:"narrow",context:"formatting"});case"BBBBB":return o.dayPeriod(r,{width:"narrow",context:"formatting"});case"BBBB":default:return o.dayPeriod(r,{width:"wide",context:"formatting"})||o.dayPeriod(r,{width:"abbreviated",context:"formatting"})||o.dayPeriod(r,{width:"narrow",context:"formatting"})}}set(r,n,o){return r.setHours(tS(o),0,0,0),r}};var gj=class extends Lr{constructor(){super(...arguments);bt(this,"priority",70);bt(this,"incompatibleTokens",["H","K","k","t","T"])}parse(r,n,o){switch(n){case"h":return Ao(Lo.hour12h,r);case"ho":return o.ordinalNumber(r,{unit:"hour"});default:return Kn(n.length,r)}}validate(r,n){return n>=1&&n<=12}set(r,n,o){let i=r.getHours()>=12;return i&&o<12?r.setHours(o+12,0,0,0):!i&&o===12?r.setHours(0,0,0,0):r.setHours(o,0,0,0),r}};var vj=class extends Lr{constructor(){super(...arguments);bt(this,"priority",70);bt(this,"incompatibleTokens",["a","b","h","K","k","t","T"])}parse(r,n,o){switch(n){case"H":return Ao(Lo.hour23h,r);case"Ho":return o.ordinalNumber(r,{unit:"hour"});default:return Kn(n.length,r)}}validate(r,n){return n>=0&&n<=23}set(r,n,o){return r.setHours(o,0,0,0),r}};var yj=class extends Lr{constructor(){super(...arguments);bt(this,"priority",70);bt(this,"incompatibleTokens",["h","H","k","t","T"])}parse(r,n,o){switch(n){case"K":return Ao(Lo.hour11h,r);case"Ko":return o.ordinalNumber(r,{unit:"hour"});default:return Kn(n.length,r)}}validate(r,n){return n>=0&&n<=11}set(r,n,o){return r.getHours()>=12&&o<12?r.setHours(o+12,0,0,0):r.setHours(o,0,0,0),r}};var _j=class extends Lr{constructor(){super(...arguments);bt(this,"priority",70);bt(this,"incompatibleTokens",["a","b","h","H","K","t","T"])}parse(r,n,o){switch(n){case"k":return Ao(Lo.hour24h,r);case"ko":return o.ordinalNumber(r,{unit:"hour"});default:return Kn(n.length,r)}}validate(r,n){return n>=1&&n<=24}set(r,n,o){let i=o<=24?o%24:o;return r.setHours(i,0,0,0),r}};var bj=class extends Lr{constructor(){super(...arguments);bt(this,"priority",60);bt(this,"incompatibleTokens",["t","T"])}parse(r,n,o){switch(n){case"m":return Ao(Lo.minute,r);case"mo":return o.ordinalNumber(r,{unit:"minute"});default:return Kn(n.length,r)}}validate(r,n){return n>=0&&n<=59}set(r,n,o){return r.setMinutes(o,0,0),r}};var xj=class extends Lr{constructor(){super(...arguments);bt(this,"priority",50);bt(this,"incompatibleTokens",["t","T"])}parse(r,n,o){switch(n){case"s":return Ao(Lo.second,r);case"so":return o.ordinalNumber(r,{unit:"second"});default:return Kn(n.length,r)}}validate(r,n){return n>=0&&n<=59}set(r,n,o){return r.setSeconds(o,0),r}};var wj=class extends Lr{constructor(){super(...arguments);bt(this,"priority",30);bt(this,"incompatibleTokens",["t","T"])}parse(r,n){let o=i=>Math.trunc(i*Math.pow(10,-n.length+3));return si(Kn(n.length,r),o)}set(r,n,o){return r.setMilliseconds(o),r}};var Ej=class extends Lr{constructor(){super(...arguments);bt(this,"priority",10);bt(this,"incompatibleTokens",["t","T","x"])}parse(r,n){switch(n){case"X":return of(nf.basicOptionalMinutes,r);case"XX":return of(nf.basic,r);case"XXXX":return of(nf.basicOptionalSeconds,r);case"XXXXX":return of(nf.extendedOptionalSeconds,r);case"XXX":default:return of(nf.extended,r)}}set(r,n,o){return n.timestampIsSet?r:Co(r,r.getTime()-I_(r)-o)}};var Sj=class extends Lr{constructor(){super(...arguments);bt(this,"priority",10);bt(this,"incompatibleTokens",["t","T","X"])}parse(r,n){switch(n){case"x":return of(nf.basicOptionalMinutes,r);case"xx":return of(nf.basic,r);case"xxxx":return of(nf.basicOptionalSeconds,r);case"xxxxx":return of(nf.extendedOptionalSeconds,r);case"xxx":default:return of(nf.extended,r)}}set(r,n,o){return n.timestampIsSet?r:Co(r,r.getTime()-I_(r)-o)}};var Tj=class extends Lr{constructor(){super(...arguments);bt(this,"priority",40);bt(this,"incompatibleTokens","*")}parse(r){return Z6(r)}set(r,n,o){return[Co(r,o*1e3),{timestampIsSet:!0}]}};var Ij=class extends Lr{constructor(){super(...arguments);bt(this,"priority",20);bt(this,"incompatibleTokens","*")}parse(r){return Z6(r)}set(r,n,o){return[Co(r,o),{timestampIsSet:!0}]}};var gGe={G:new $6,y:new X6,Y:new Q6,R:new J6,u:new ej,Q:new tj,q:new rj,M:new nj,L:new oj,w:new ij,I:new aj,d:new sj,D:new lj,E:new uj,e:new cj,c:new pj,i:new fj,a:new dj,b:new hj,B:new mj,h:new gj,H:new vj,K:new yj,k:new _j,m:new bj,s:new xj,S:new wj,X:new Ej,x:new Sj,t:new Tj,T:new Ij};var vEr=/[yYQqMLwIdDecihHKkms]o|(\w)\1*|''|'(''|[^'])+('|$)|./g,yEr=/P+p+|P+|p+|''|'(''|[^'])+('|$)|./g,_Er=/^'([^]*?)'?$/,bEr=/''/g,xEr=/\S/,wEr=/[a-zA-Z]/;function rne(e,t,r,n){var k,R,q,B,G,re,Q,ie,me,ve,ye,we,Se,ge,Re,Je,tt,Et;let o=()=>Co((n==null?void 0:n.in)||r,NaN),i=uGe(),a=(R=(k=n==null?void 0:n.locale)!=null?k:i.locale)!=null?R:aO,u=(ve=(me=(re=(G=n==null?void 0:n.firstWeekContainsDate)!=null?G:(B=(q=n==null?void 0:n.locale)==null?void 0:q.options)==null?void 0:B.firstWeekContainsDate)!=null?re:i.firstWeekContainsDate)!=null?me:(ie=(Q=i.locale)==null?void 0:Q.options)==null?void 0:ie.firstWeekContainsDate)!=null?ve:1,d=(Et=(tt=(ge=(Se=n==null?void 0:n.weekStartsOn)!=null?Se:(we=(ye=n==null?void 0:n.locale)==null?void 0:ye.options)==null?void 0:we.weekStartsOn)!=null?ge:i.weekStartsOn)!=null?tt:(Je=(Re=i.locale)==null?void 0:Re.options)==null?void 0:Je.weekStartsOn)!=null?Et:0;if(!t)return e?o():Cn(r,n==null?void 0:n.in);let h={firstWeekContainsDate:u,weekStartsOn:d,locale:a},v=[new W6(n==null?void 0:n.in,r)],b=t.match(yEr).map(Xe=>{let Pt=Xe[0];if(Pt in sO){let Lt=sO[Pt];return Lt(Xe,a.formatLong)}return Xe}).join("").match(vEr),x=[];for(let Xe of b){!(n!=null&&n.useAdditionalWeekYearTokens)&&V6(Xe)&&lO(Xe,t,e),!(n!=null&&n.useAdditionalDayOfYearTokens)&&B6(Xe)&&lO(Xe,t,e);let Pt=Xe[0],Lt=gGe[Pt];if(Lt){let{incompatibleTokens:Gt}=Lt;if(Array.isArray(Gt)){let ct=x.find(_t=>Gt.includes(_t.token)||_t.token===Pt);if(ct)throw new RangeError(`The format string mustn't contain \`${ct.fullToken}\` and \`${Xe}\` at the same time`)}else if(Lt.incompatibleTokens==="*"&&x.length>0)throw new RangeError(`The format string mustn't contain \`${Xe}\` and any other token at the same time`);x.push({token:Pt,fullToken:Xe});let nt=Lt.run(e,Xe,a.match,h);if(!nt)return o();v.push(nt.setter),e=nt.rest}else{if(Pt.match(wEr))throw new RangeError("Format string contains an unescaped latin alphabet character `"+Pt+"`");if(Xe==="''"?Xe="'":Pt==="'"&&(Xe=EEr(Xe)),e.indexOf(Xe)===0)e=e.slice(Xe.length);else return o()}}if(e.length>0&&xEr.test(e))return o();let M=v.map(Xe=>Xe.priority).sort((Xe,Pt)=>Pt-Xe).filter((Xe,Pt,Lt)=>Lt.indexOf(Xe)===Pt).map(Xe=>v.filter(Pt=>Pt.priority===Xe).sort((Pt,Lt)=>Lt.subPriority-Pt.subPriority)).map(Xe=>Xe[0]),O=Cn(r,n==null?void 0:n.in);if(isNaN(+O))return o();let D={};for(let Xe of M){if(!Xe.validate(O,h))return o();let Pt=Xe.set(O,D,h);Array.isArray(Pt)?(O=Pt[0],Object.assign(D,Pt[1])):O=Pt}return O}function EEr(e){return e.match(_Er)[1].replace(bEr,"'")}function vGe(e,t,r){let[n,o]=j6(r==null?void 0:r.in,e,t);return n.getFullYear()===o.getFullYear()}function yGe(e,t){var h;let r=()=>Co(t==null?void 0:t.in,NaN),n=(h=t==null?void 0:t.additionalDigits)!=null?h:2,o=MEr(e),i;if(o.date){let v=CEr(o.date,n);i=AEr(v.restDateString,v.year)}if(!i||isNaN(+i))return r();let a=+i,u=0,d;if(o.time&&(u=OEr(o.time),isNaN(u)))return r();if(o.timezone){if(d=PEr(o.timezone),isNaN(d))return r()}else{let v=new Date(a+u),b=Cn(0,t==null?void 0:t.in);return b.setFullYear(v.getUTCFullYear(),v.getUTCMonth(),v.getUTCDate()),b.setHours(v.getUTCHours(),v.getUTCMinutes(),v.getUTCSeconds(),v.getUTCMilliseconds()),b}return Cn(a+u+d,t==null?void 0:t.in)}var Mj={dateTimeDelimiter:/[T ]/,timeZoneDelimiter:/[Z ]/i,timezone:/([Z+-].*)$/},SEr=/^-?(?:(\d{3})|(\d{2})(?:-?(\d{2}))?|W(\d{2})(?:-?(\d{1}))?|)$/,TEr=/^(\d{2}(?:[.,]\d*)?)(?::?(\d{2}(?:[.,]\d*)?))?(?::?(\d{2}(?:[.,]\d*)?))?$/,IEr=/^([+-])(\d{2})(?::?(\d{2}))?$/;function MEr(e){let t={},r=e.split(Mj.dateTimeDelimiter),n;if(r.length>2)return t;if(/:/.test(r[0])?n=r[0]:(t.date=r[0],n=r[1],Mj.timeZoneDelimiter.test(t.date)&&(t.date=e.split(Mj.timeZoneDelimiter)[0],n=e.substr(t.date.length,e.length))),n){let o=Mj.timezone.exec(n);o?(t.time=n.replace(o[1],""),t.timezone=o[1]):t.time=n}return t}function CEr(e,t){let r=new RegExp("^(?:(\\d{4}|[+-]\\d{"+(4+t)+"})|(\\d{2}|[+-]\\d{"+(2+t)+"})$)"),n=e.match(r);if(!n)return{year:NaN,restDateString:""};let o=n[1]?parseInt(n[1]):null,i=n[2]?parseInt(n[2]):null;return{year:i===null?o:i*100,restDateString:e.slice((n[1]||n[2]).length)}}function AEr(e,t){if(t===null)return new Date(NaN);let r=e.match(SEr);if(!r)return new Date(NaN);let n=!!r[4],o=cO(r[1]),i=cO(r[2])-1,a=cO(r[3]),u=cO(r[4]),d=cO(r[5])-1;if(n)return REr(t,u,d)?NEr(t,u,d):new Date(NaN);{let h=new Date(0);return!LEr(t,i,a)||!kEr(t,o)?new Date(NaN):(h.setUTCFullYear(t,i,Math.max(o,a)),h)}}function cO(e){return e?parseInt(e):1}function OEr(e){let t=e.match(TEr);if(!t)return NaN;let r=nne(t[1]),n=nne(t[2]),o=nne(t[3]);return jEr(r,n,o)?r*oO+n*nO+o*1e3:NaN}function nne(e){return e&&parseFloat(e.replace(",","."))||0}function PEr(e){if(e==="Z")return 0;let t=e.match(IEr);if(!t)return 0;let r=t[1]==="+"?-1:1,n=parseInt(t[2]),o=t[3]&&parseInt(t[3])||0;return qEr(n,o)?r*(n*oO+o*nO):NaN}function NEr(e,t,r){let n=new Date(0);n.setUTCFullYear(e,0,4);let o=n.getUTCDay()||7,i=(t-1)*7+r+1-o;return n.setUTCDate(n.getUTCDate()+i),n}var DEr=[31,null,31,30,31,30,31,31,30,31,30,31];function _Ge(e){return e%400===0||e%4===0&&e%100!==0}function LEr(e,t,r){return t>=0&&t<=11&&r>=1&&r<=(DEr[t]||(_Ge(e)?29:28))}function kEr(e,t){return t>=1&&t<=(_Ge(e)?366:365)}function REr(e,t,r){return t>=1&&t<=53&&r>=0&&r<=6}function jEr(e,t,r){return e===24?t===0&&r===0:r>=0&&r<60&&t>=0&&t<60&&e>=0&&e<25}function qEr(e,t){return t>=0&&t<=59}var nS=class e{constructor({metadata:t,geometry:r}){bt(this,"metadata",{});bt(this,"geometry",{});if(this.constructor===e)throw new Error(`Abstract class '${this.constructor}' cannot be instantiated.`);this.metadata=t,this.geometry=r}getGeometry(){return this.geometry}getId(){return this.metadata.id}getMetadata(t){return Me(t)?this.metadata[t]:this.metadata}updateMetadata(t,r){if(!Me(t)){console.error("Cannot update metadata without key");return}if(!Object.values(qe).includes(t)){console.error(`Cannot update metadata with invalid key '${t}'`);return}this.metadata[t]=r}getSortTime(){let t=this.metadata[qe.timePeriod][0];return uO(t)}getDisplayTime(){let[t,r]=this.metadata[qe.timePeriod];return vGe(t,r)?uO(t):`${uO(t)} \u2013 ${uO(r)}`}addLayerToMap(){throw new Error("Method 'addLayerToMap' must be implemented.")}isDisplayedInMap(){throw new Error("Method 'isDisplayedInMap' must be implemented.")}getType(){throw new Error("Method 'getType' must be implemented.")}setOpacity(){throw new Error("Method 'setOpacity' must be implemented.")}getOpacity(){throw new Error("Method 'getOpacity' must be implemented.")}moveToTop(){throw new Error("Method 'moveToTop' must be implemented.")}move(){throw new Error("Method 'move' must be implemented.")}getMapLibreLayerId(){throw new Error("Method 'getMapLibreLayerId' must be implemented.")}removeLayer(){throw new Error("Method 'removeLayer' must be implemented.")}setVisibility(){throw new Error("Method 'setVisibility' must be implemented.")}isVisible(){throw new Error("Method 'isVisible' must be implemented.")}serialize(){throw new Error("Method 'serialize' must be implemented.")}};var Aj=Z(Pe(),1);var pO=Z(Pe(),1);var Cj=Z(xt(),1);var bGe=(e,{sourceId:t,fillId:r,outlineId:n})=>{e.addSource(t,{type:"geojson",data:{type:"FeatureCollection",features:[]}}),e.addLayer({id:r,type:"fill",source:t,paint:{"fill-color":"#ff0000","fill-opacity":.2}}),e.addLayer({id:n,type:"line",source:t,paint:{"line-color":"#ff0000","line-width":1}})},zEr=(e,{sourceId:t,fillId:r,outlineId:n})=>{e.getLayer(r)&&e.removeLayer(r),e.getLayer(n)&&e.removeLayer(n),e.getSource(t)&&e.removeSource(t)},xGe=e=>{let t=yt(tr);return(0,pO.useEffect)(()=>{if(Me(t)){let r=()=>{bGe(t,Te({},e))};return t._loaded?bGe(t,Te({},e)):t.once("load",r),()=>{zEr(t,Te({},e)),t.off("load",r)}}},[t]),pO.default.createElement(pO.default.Fragment,null)};xGe.propTypes={sourceId:Cj.default.string.isRequired,fillId:Cj.default.string.isRequired,outlineId:Cj.default.string.isRequired};var wGe=xGe;var EGe=wGe;var SGe="vkf-map-overlay-source",ju="vkf-map-overlay-fill",FEr="vkf-map-overlay-outline",one=(e,t)=>{let r=e.getSource(SGe);r&&r.setData(t)},TGe=()=>Aj.default.createElement(Aj.default.Fragment,null,Aj.default.createElement(EGe,{sourceId:SGe,fillId:ju,outlineId:FEr}));TGe.propTypes={};var IGe=TGe;var MGe=(e,t,r,n)=>{var a,u;let o=e.getId();t.addSource(o,Mt(Te({type:"raster"},r),{bounds:e.getMetadata(qe.bounds)}));let i=t.getLayer(ju)!==void 0?ju:void 0;t.addLayer({id:o,type:"raster",metadata:{[sp.id]:o},source:o,layout:{visibility:(a=n==null?void 0:n.visibility)!=null?a:"visible"},paint:{"raster-opacity":(u=n==null?void 0:n.opacity)!=null?u:1}},i)};function ine(e,t,r){if(e!==null)for(var n,o,i,a,u,d,h,v=0,b=0,x,M=e.type,O=M==="FeatureCollection",D=M==="Feature",k=O?e.features.length:1,R=0;R<k;R++){h=O?e.features[R].geometry:D?e.geometry:e,x=h?h.type==="GeometryCollection":!1,u=x?h.geometries.length:1;for(var q=0;q<u;q++){var B=0,G=0;if(a=x?h.geometries[q]:h,a!==null){d=a.coordinates;var re=a.type;switch(v=r&&(re==="Polygon"||re==="MultiPolygon")?1:0,re){case null:break;case"Point":if(t(d,b,R,B,G)===!1)return!1;b++,B++;break;case"LineString":case"MultiPoint":for(n=0;n<d.length;n++){if(t(d[n],b,R,B,G)===!1)return!1;b++,re==="MultiPoint"&&B++}re==="LineString"&&B++;break;case"Polygon":case"MultiLineString":for(n=0;n<d.length;n++){for(o=0;o<d[n].length-v;o++){if(t(d[n][o],b,R,B,G)===!1)return!1;b++}re==="MultiLineString"&&B++,re==="Polygon"&&G++}re==="Polygon"&&B++;break;case"MultiPolygon":for(n=0;n<d.length;n++){for(G=0,o=0;o<d[n].length;o++){for(i=0;i<d[n][o].length-v;i++){if(t(d[n][o][i],b,R,B,G)===!1)return!1;b++}G++}B++}break;case"GeometryCollection":for(n=0;n<a.geometries.length;n++)if(ine(a.geometries[n],t,r)===!1)return!1;break;default:throw new Error("Unknown Geometry Type")}}}}}function oS(e,t={}){if(e.bbox!=null&&t.recompute!==!0)return e.bbox;let r=[1/0,1/0,-1/0,-1/0];return ine(e,n=>{r[0]>n[0]&&(r[0]=n[0]),r[1]>n[1]&&(r[1]=n[1]),r[2]<n[0]&&(r[2]=n[0]),r[3]<n[1]&&(r[3]=n[1])}),r}var CGe=oS;var fO,Oj,AGe,ane=class extends nS{constructor({metadata:r,geometry:n}){super({metadata:r,geometry:n});Va(this,Oj);Va(this,fO,!1);sa(this,Oj,AGe).call(this)}addLayerToMap(r,{sourceSettings:n,layerSettings:o}){if(r.getSource(this.getId())){console.error(`Source with id '${this.getId()}' exists already in map.`);return}return MGe(this,r,n,o)}addToOverlay(r,n){let o=r.getSource(n);if(o){let i=this.getPreviewFeature();i.id=this.getId();let a=[i];o.updateData({add:a})}}removeFromOverlay(r,n){let o=r.getSource(n);if(o){let i=[this.getId()];o.updateData({remove:i})}}getPreviewFeature(){return{type:"Feature",properties:{},geometry:this.geometry}}isDisplayedInMap(r){return r.getSource(this.getId())!==void 0&&r.getLayer(this.getId())!==void 0}getType(){return co.HISTORIC_MAP}setOpacity(r,n){r.getLayer(this.getId())&&r.setPaintProperty(this.getId(),"raster-opacity",n)}getOpacity(r){var n;return r.getLayer(this.getId())?(n=r.getPaintProperty(this.getId(),"raster-opacity"))!=null?n:1:null}moveToTop(r){this.move(r,null)}move(r,n){let o=n;Me(n)||(Me(r.getLayer(ju))?o=ju:o=null),r.moveLayer(this.getId(),o)}getMapLibreLayerId(){return this.getId()}removeMapLibreLayers(r){r.getLayer(this.getMapLibreLayerId())&&r.removeLayer(this.getMapLibreLayerId()),r.getSource(this.getId())&&r.removeSource(this.getId())}setVisibility(r,n){r.setLayoutProperty(this.getMapLibreLayerId(),"visibility",n)}isVisible(r){return r.getLayoutProperty(this.getMapLibreLayerId(),"visibility")==="visible"}isMissing(){return Dr(this,fO)}setIsMissing(r){Ga(this,fO,r)}};fO=new WeakMap,Oj=new WeakSet,AGe=function(){let r=this.geometry?oS(this.geometry):void 0;this.metadata[qe.bounds]=r};var OGe=ane;var dg=OGe;var dO=class extends Date{constructor(){super(),this.setTime(arguments.length===0?Date.now():arguments.length===1?typeof arguments[0]=="string"?+new Date(arguments[0]):arguments[0]:Date.UTC(...arguments))}getTimezoneOffset(){return 0}},PGe=/^(get|set)(?!UTC)/;Object.getOwnPropertyNames(Date.prototype).forEach(e=>{if(PGe.test(e)){let t=Date.prototype[e.replace(PGe,"$1UTC")];t&&(dO.prototype[e]=t)}});var Pj=class extends dO{toString(){let t=this.toDateString(),r=this.toTimeString();return`${t} ${r}`}toDateString(){let t=UEr.format(this),r=BEr.format(this),n=this.getFullYear();return`${t} ${r} ${n}`}toTimeString(){return`${VEr.format(this)} GMT+0000 (Coordinated Universal Time)`}toLocaleString(t,r){return Date.prototype.toLocaleString.call(this,t,Te({timeZone:"UTC"},r))}toLocaleDateString(t,r){return Date.prototype.toLocaleDateString.call(this,t,Te({timeZone:"UTC"},r))}toLocaleTimeString(t,r){return Date.prototype.toLocaleTimeString.call(this,t,Te({timeZone:"UTC"},r))}},UEr=new Intl.DateTimeFormat("en-US",{weekday:"short",timeZone:"UTC"}),BEr=new Intl.DateTimeFormat("en-US",{month:"short",day:"numeric",timeZone:"UTC"}),VEr=new Intl.DateTimeFormat("en-GB",{hour12:!1,hour:"numeric",minute:"numeric",second:"numeric",timeZone:"UTC"});var zy=e=>new Pj(+new Date(e));var iS={en:"MM/dd/yyyy",de:"dd.MM.yyyy"},NGe={en:/^[0-9]{2}\/[0-9]{2}\/[0-9]{4}$/,de:/^[0-9]{2}\.[0-9]{2}\.[0-9]{4}$/};function Tl(e){let t=vr.getSettings().LANGUAGE_CODE,r=new Date(e);return Nh(r)?Object.hasOwn(iS,t)?tne(r,iS[t],{in:zy}):tne(r,iS[jy.EN],{in:zy}):e}function Tc(e){let t=vr.getSettings().LANGUAGE_CODE,r=new Date;return Object.hasOwn(iS,t)?rne(e,iS[t],r,{in:zy}):rne(e,iS[jy.EN],r,{in:zy})}function Fy(e,t={}){let r="";try{r=lGe(e,Mt(Te({},t),{in:zy}))}catch(n){r=""}return r}function Nj(e){return!Me(e)||!YE(e)?new Date("invalid"):yGe(e,{in:zy})}function Nh(e){return q6(e)}function sne(e){let t=vr.getSettings().LANGUAGE_CODE;return Object.hasOwn(NGe,t)?NGe[t].test(e)&&!Number.isNaN(Tc(e).valueOf()):!Number.isNaN(Tc(e).valueOf())}function hg(e){return iO(e,{in:zy})}function hO(e){return Me(e)?pGe(e):Number.NaN}function DGe(){return[Fy(Date.now(),{representation:"date"}),Fy(Date.now(),{representation:"date"})]}var Ir={SYMBOL:"symbol",LINE:"line",FILL:"fill",OUTLINE:"outline"},mO={[Ir.LINE]:"line-opacity",[Ir.FILL]:"fill-opacity",[Ir.OUTLINE]:"outline-opacity"},lne={[Ir.LINE]:"stroke-opacity",[Ir.FILL]:"fill-opacity",[Ir.OUTLINE]:"stroke-opacity"},une=e=>Object.keys(lne).includes(e),pn={[Ir.SYMBOL]:{COLOR:"#0000FF"},[Ir.LINE]:{COLOR:"#00FF00",WIDTH:3,OPACITY:1},[Ir.OUTLINE]:{COLOR:"#0000FF",WIDTH:1,OPACITY:1},[Ir.FILL]:{COLOR:"#FFFF00",OPACITY:.27}},cne={[Ir.SYMBOL]:{type:"symbol",layout:{"icon-image":vr.getSettings().MARKER_IMAGE_ID,"icon-size":.5,"icon-anchor":"bottom","icon-allow-overlap":!0},paint:{"icon-color":["to-color",["feature-state","marker"],["get","marker"],pn[Ir.SYMBOL].COLOR],"icon-halo-color":"#FFF","icon-halo-width":1},filter:["==",["geometry-type"],"Point"]},[Ir.LINE]:{type:"line",paint:{"line-color":["coalesce",["feature-state","stroke"],["get","stroke"],pn[Ir.LINE].COLOR],"line-width":["coalesce",["feature-state","stroke-width"],["get","stroke-width"],pn[Ir.LINE].WIDTH],"line-opacity":["coalesce",["feature-state","stroke-opacity"],["get","stroke-opacity"],pn[Ir.LINE].OPACITY]},filter:["==",["geometry-type"],"LineString"]},[Ir.OUTLINE]:{type:"line",paint:{"line-color":["coalesce",["feature-state","stroke"],["get","stroke"],pn[Ir.OUTLINE].COLOR],"line-width":["coalesce",["feature-state","stroke-width"],["get","stroke-width"],pn[Ir.OUTLINE].WIDTH],"line-opacity":["coalesce",["feature-state","stroke-opacity"],["get","stroke-opacity"],pn[Ir.OUTLINE].OPACITY]},filter:["==",["geometry-type"],"Polygon"]},[Ir.FILL]:{type:"fill",paint:{"fill-color":["coalesce",["feature-state","fill"],["get","fill"],pn[Ir.FILL].COLOR],"fill-opacity":["coalesce",["feature-state","fill-opacity"],["get","fill-opacity"],pn[Ir.FILL].OPACITY]},filter:["==",["geometry-type"],"Polygon"]}};var po={imgLink:"img_link",title:"title",description:"description",time:"time",marker:"marker",fill:"fill",fillOpacity:"fill-opacity",stroke:"stroke",strokeWidth:"stroke-width",strokeOpacity:"stroke-opacity"},Uy={type:"FeatureCollection",features:[]},LGe={Point:{marker:pn[Ir.SYMBOL].COLOR},MultiPoint:{marker:pn[Ir.SYMBOL].COLOR},Polygon:{fill:pn[Ir.FILL].COLOR,"fill-opacity":pn[Ir.FILL].OPACITY,stroke:pn[Ir.OUTLINE].COLOR,"stroke-opacity":pn[Ir.OUTLINE].OPACITY,"stroke-width":pn[Ir.OUTLINE].WIDTH},MultiPolygon:{fill:pn[Ir.FILL].COLOR,"fill-opacity":pn[Ir.FILL].OPACITY,stroke:pn[Ir.OUTLINE].COLOR,"stroke-opacity":pn[Ir.OUTLINE].OPACITY,"stroke-width":pn[Ir.OUTLINE].WIDTH},LineString:{stroke:pn[Ir.LINE].COLOR,"stroke-opacity":pn[Ir.LINE].OPACITY,"stroke-width":pn[Ir.LINE].WIDTH},MultiLineString:{stroke:pn[Ir.LINE].COLOR,"stroke-opacity":pn[Ir.LINE].OPACITY,"stroke-width":pn[Ir.LINE].WIDTH},GeometryCollection:{fill:pn[Ir.FILL].COLOR,"fill-opacity":pn[Ir.FILL].OPACITY,stroke:pn[Ir.LINE].COLOR,"stroke-opacity":pn[Ir.LINE].OPACITY,"stroke-width":pn[Ir.LINE].WIDTH}},gO={marker:{type:"color"},fill:{type:"color"},"fill-opacity":{step:.05,min:0,max:1,type:"number"},stroke:{type:"color"},"stroke-opacity":{max:1,min:0,step:.05,type:"number"},"stroke-width":{step:.1,min:0,max:20,type:"number"}},pne=Object.keys(gO),aS=[po.time,po.title,po.imgLink,po.description],qu={POINT:"Point",MULTI_POINT:"MultiPoint",POLYGON:"Polygon",MULTI_POLYGON:"MultiPolygon",LINE_STRING:"LineString",MULTI_LINE_STRING:"MultiLineString",GEOMETRY_COLLECTION:"GeometryCollection"},$a={LOCAL:"local",REMOTE:"remote"};var kGe=e=>({type:"Polygon",coordinates:[[[e[0],e[1]],[e[2],e[1]],[e[2],e[3]],[e[0],e[3]],[e[0],e[1]]]]}),fne=e=>{let{properties:t}=e,r=HEr(t);return Mt(Te({},e),{properties:r})},dne=e=>{Object.hasOwn(e,"properties")||(e.properties={});let{properties:t}=e,r=GEr(t);return Mt(Te({},e),{properties:r})},GEr=e=>{let t=e[po.time],r=WEr(t);return r.length===0?(delete e[po.time],e):Mt(Te({},e),{[po.time]:r})},HEr=e=>{let t=e[po.time],r=$Er(t);return r.length===0?(delete e[po.time],e):Mt(Te({},e),{[po.time]:r})},WEr=e=>{if(Array.isArray(e)){if(e.length!==2)return[];let t=hg(Nj(e[0])).valueOf(),r=hg(Nj(e[1])).valueOf();return Number.isNaN(t)||Number.isNaN(r)?[]:t>r?[r,t]:[t,r]}if(YE(e)){let t=hg(Nj(e)).valueOf();return Number.isNaN(e)?[]:[t,t]}return[]},$Er=e=>{if(!Array.isArray(e))return[];if(e.length!==2)return[];let t=Fy(e[0]),r=Fy(e[1]);return t===""||r===""?[]:[t,r]},Dj=e=>{if(!Me(e))return[];let[t,r]=e;return!Me(t)||!Me(r)?[]:["any",["!",["has",po.time]],["all",["<=",["at",0,["get",po.time]],r*1e3],[">=",["at",1,["get",po.time]],t*1e3]]]};var RGe=e=>{let t={};for(let r of Object.keys(Ir)){let n=Ir[r],o=`${e}-${n}`;t[o]=Mt(Te({id:o,source:e,metadata:{[sp.id]:e}},cne[n]),{layout:Mt(Te({},cne[n].layout),{visibility:"visible"})})}return t};var hne=class e{constructor(){if(this.constructor===e)throw new Error(`Abstract class '${this.constructor}' cannot be instantiated.`)}addLayerToMap(){throw new Error("Method 'addLayerToMap' must be implemented.")}removeLayerFromMap(){throw new Error("Method 'removeLayerFromMap' must be implemented.")}setDataOnMap(){throw new Error("Method 'setDataOnMap' must be implemented.")}getOpacity(){throw new Error("Method 'getOpacity' must be implemented.")}setOpacity(){throw new Error("Method 'setOpacity' must be implemented.")}isVisible(){throw new Error("Method 'isVisible' must be implemented.")}setVisibility(){throw new Error("Method 'setVisibility' must be implemented.")}isDisplayedInMap(){throw new Error("Method 'isDisplayedInMap' must be implemented.")}getLayerId(){throw new Error("Method 'getLayerId' must be implemented.")}move(){throw new Error("Method 'move' must be implemented.")}setFilters(){throw new Error("Method 'setFilters' must be implemented.")}resetFilters(){throw new Error("Method 'resetFilters' must be implemented.")}},Lj=hne;var jGe=[{type:"mousemove",handler:e=>e.target.getCanvas().style.cursor="pointer"},{type:"mouseleave",handler:e=>e.target.getCanvas().style.cursor=""}],By,Vy,sS,ru,qGe,zGe,Dh,mne=class extends Lj{constructor(r){super();Va(this,ru);Va(this,By,null);Va(this,Vy,[]);Va(this,sS,{});Ga(this,By,r)}addLayerToMap(r,n,o){var d,h;if(!Me(r))return;let i=Dr(this,By),a=RGe(i);r.addSource(i,{type:"geojson",data:o});let u=r.getLayer(ju)!==void 0?ju:void 0;for(let[v,b]of Object.entries(a))r.addLayer(b,u),Dr(this,Vy).push(v),Dr(this,sS)[v]=b.filter;if(Me(n)){let{layerSettings:v}=n,b=(d=v==null?void 0:v.opacity)!=null?d:1,x=(h=v==null?void 0:v.visibility)!=null?h:"visible";this.setOpacity(r,b),this.setVisibility(r,x)}sa(this,ru,qGe).call(this,r)}removeLayerFromMap(r){if(Me(r)){for(let{id:n}of sa(this,ru,Dh).call(this,r))sa(this,ru,zGe).call(this,r,n),r.removeLayer(n);r.removeSource(Dr(this,By)),Ga(this,Vy,[])}}setDataOnMap(r,n){let o=r.getSource(Dr(this,By));if(!Me(o)){console.error("Cannot update geojson on map. Source layer not found");return}o.setData(n)}getOpacity(r){let n=sa(this,ru,Dh).call(this,r),o=1,i=1;if(n.length===0)return null;for(let{id:a,type:u}of n){if(!une(u))continue;let d=mO[u];o=r.getPaintProperty(a,d);break}if(typeof o=="number")return o;if(Array.isArray(o)&&o.length>0){if(o[0]==="*")return o[2];if(o[0]==="coalesce")return o[3]}return i}setOpacity(r,n){let o=sa(this,ru,Dh).call(this,r);if(!(o.length===0||!Me(n)))for(let{id:i,type:a}of o){if(!une(a))continue;let u=pn[a].OPACITY,d=mO[a],h=lne[a];r.setPaintProperty(i,d,["*",["coalesce",["feature-state",h],["get",h],u],n])}}isVisible(r){let n=sa(this,ru,Dh).call(this,r);return n.length===0?!1:r.getLayoutProperty(n[0].id,"visibility")==="visible"}setVisibility(r,n){let o=sa(this,ru,Dh).call(this,r);if(!(o.length===0||!Me(n)))for(let{id:i}of o)r.setLayoutProperty(i,"visibility",n)}isDisplayedInMap(r){return r.getSource(Dr(this,By))!==void 0}getLayerId(){return Dr(this,Vy).length>0?Dr(this,Vy)[0]:null}move(r,n){let o=sa(this,ru,Dh).call(this,r),i=n;Me(n)||(Me(r.getLayer(ju))?i=ju:i=null),o.forEach(({id:a})=>{r.moveLayer(a,i)})}setFilters(r,n){let o=sa(this,ru,Dh).call(this,r);if(o.length===0)return;let i=n==null?void 0:n.timeExtent,a=Dj(i);for(let u of o){let{id:d}=u,v=["all",Dr(this,sS)[d]];Me(a)&&a.length>0&&v.push(a),r.setFilter(d,v)}}resetFilters(r){let n=sa(this,ru,Dh).call(this,r);if(n.length!==0)for(let o of n){let{id:i}=o,a=Dr(this,sS)[i];r.setFilter(i,a)}}};By=new WeakMap,Vy=new WeakMap,sS=new WeakMap,ru=new WeakSet,qGe=function(r){for(let{id:n}of sa(this,ru,Dh).call(this,r))for(let{type:o,handler:i}of jGe)r.on(o,n,i)},zGe=function(r,n){for(let{type:o,handler:i}of jGe)r.off(o,n,i)},Dh=function(r){let n=Dr(this,Vy).map(o=>r.getLayer(o));return n[0]===void 0?[]:n};var FGe=mne;var VHe=Z($E(),1);var kj={},ZEr=()=>{let e=ar(({set:r})=>(n,o)=>{r(n,o)},[]),t=ar(({snapshot:r})=>n=>gt(null,null,function*(){return r.getPromise(n)}),[]);return kj.setState=e,kj.getStateAsync=t,null},gne=(e,t)=>kj.setState(e,t),Rj=e=>gt(null,null,function*(){return kj.getStateAsync(e)}),UGe=ZEr;var BGe=UGe;var Il={hoverPolygon:"hover_polygon",contentCertainty:"content_certainty",temporalCertainty:"temporal_certainty",spatialCertainty:"spatial_certainty",permalink:"permanent_link",parentLabel:"parent_label",tags:"tag"},VGe="#00b19e",vne="#00927E",C_={fill:.4,line:1},vO=["all",["==",["geometry-type"],"Polygon"],["==",["id"],"NON_EXISTING_ID"]],jj={fill:{type:"fill",paint:{"fill-color":VGe,"fill-opacity":C_.fill},filter:vO},outline:{type:"line",paint:{"line-color":vne,"line-width":2,"line-opacity":C_.line},filter:vO}},GGe={line:{type:"line",paint:{"line-color":vne,"line-width":2,"line-opacity":C_.line},filter:["==",["geometry-type"],"LineString"]},fill:{type:"fill",paint:{"fill-color":VGe,"fill-opacity":C_.fill},filter:["==",["geometry-type"],"Polygon"]},outline:{type:"line",paint:{"line-color":vne,"line-width":2,"line-opacity":C_.line},filter:["==",["geometry-type"],"Polygon"]}};function Ml(e){return function(){return e}}var yne=Math.abs,Cl=Math.atan2,Gy=Math.cos,HGe=Math.max,qj=Math.min,md=Math.sin,A_=Math.sqrt,zu=1e-12,lS=Math.PI,yO=lS/2,uS=2*lS;function WGe(e){return e>1?0:e<-1?lS:Math.acos(e)}function _ne(e){return e>=1?yO:e<=-1?-yO:Math.asin(e)}var bne=Math.PI,xne=2*bne,O_=1e-6,YEr=xne-O_;function $Ge(e){this._+=e[0];for(let t=1,r=e.length;t<r;++t)this._+=arguments[t]+e[t]}function KEr(e){let t=Math.floor(e);if(!(t>=0))throw new Error(`invalid digits: ${e}`);if(t>15)return $Ge;let r=jm(10,t);return function(n){this._+=n[0];for(let o=1,i=n.length;o<i;++o)this._+=Math.round(arguments[o]*r)/r+n[o]}}var P_=class{constructor(t){this._x0=this._y0=this._x1=this._y1=null,this._="",this._append=t==null?$Ge:KEr(t)}moveTo(t,r){this._append`M${this._x0=this._x1=+t},${this._y0=this._y1=+r}`}closePath(){this._x1!==null&&(this._x1=this._x0,this._y1=this._y0,this._append`Z`)}lineTo(t,r){this._append`L${this._x1=+t},${this._y1=+r}`}quadraticCurveTo(t,r,n,o){this._append`Q${+t},${+r},${this._x1=+n},${this._y1=+o}`}bezierCurveTo(t,r,n,o,i,a){this._append`C${+t},${+r},${+n},${+o},${this._x1=+i},${this._y1=+a}`}arcTo(t,r,n,o,i){if(t=+t,r=+r,n=+n,o=+o,i=+i,i<0)throw new Error(`negative radius: ${i}`);let a=this._x1,u=this._y1,d=n-t,h=o-r,v=a-t,b=u-r,x=v*v+b*b;if(this._x1===null)this._append`M${this._x1=t},${this._y1=r}`;else if(x>O_)if(!(Math.abs(b*d-h*v)>O_)||!i)this._append`L${this._x1=t},${this._y1=r}`;else{let M=n-a,O=o-u,D=d*d+h*h,k=M*M+O*O,R=Math.sqrt(D),q=Math.sqrt(x),B=i*Math.tan((bne-Math.acos((D+x-k)/(2*R*q)))/2),G=B/q,re=B/R;Math.abs(G-1)>O_&&this._append`L${t+G*v},${r+G*b}`,this._append`A${i},${i},0,0,${+(b*M>v*O)},${this._x1=t+re*d},${this._y1=r+re*h}`}}arc(t,r,n,o,i,a){if(t=+t,r=+r,n=+n,a=!!a,n<0)throw new Error(`negative radius: ${n}`);let u=n*Math.cos(o),d=n*Math.sin(o),h=t+u,v=r+d,b=1^a,x=a?o-i:i-o;this._x1===null?this._append`M${h},${v}`:(Math.abs(this._x1-h)>O_||Math.abs(this._y1-v)>O_)&&this._append`L${h},${v}`,n&&(x<0&&(x=x%xne+xne),x>YEr?this._append`A${n},${n},0,1,${b},${t-u},${r-d}A${n},${n},0,1,${b},${this._x1=h},${this._y1=v}`:x>O_&&this._append`A${n},${n},0,${+(x>=bne)},${b},${this._x1=t+n*Math.cos(i)},${this._y1=r+n*Math.sin(i)}`)}rect(t,r,n,o){this._append`M${this._x0=this._x1=+t},${this._y0=this._y1=+r}h${n=+n}v${+o}h${-n}Z`}toString(){return this._}};function ZGe(){return new P_}ZGe.prototype=P_.prototype;function YGe(e){let t=3;return e.digits=function(r){if(!arguments.length)return t;if(r==null)t=null;else{let n=Math.floor(r);if(!(n>=0))throw new RangeError(`invalid digits: ${r}`);t=n}return e},()=>new P_(t)}function XEr(e){return e.innerRadius}function QEr(e){return e.outerRadius}function JEr(e){return e.startAngle}function eSr(e){return e.endAngle}function tSr(e){return e&&e.padAngle}function rSr(e,t,r,n,o,i,a,u){var d=r-e,h=n-t,v=a-o,b=u-i,x=b*d-v*h;if(!(x*x<zu))return x=(v*(t-i)-b*(e-o))/x,[e+x*d,t+x*h]}function zj(e,t,r,n,o,i,a){var u=e-r,d=t-n,h=(a?i:-i)/A_(u*u+d*d),v=h*d,b=-h*u,x=e+v,M=t+b,O=r+v,D=n+b,k=(x+O)/2,R=(M+D)/2,q=O-x,B=D-M,G=q*q+B*B,re=o-i,Q=x*D-O*M,ie=(B<0?-1:1)*A_(HGe(0,re*re*G-Q*Q)),me=(Q*B-q*ie)/G,ve=(-Q*q-B*ie)/G,ye=(Q*B+q*ie)/G,we=(-Q*q+B*ie)/G,Se=me-k,ge=ve-R,Re=ye-k,Je=we-R;return Se*Se+ge*ge>Re*Re+Je*Je&&(me=ye,ve=we),{cx:me,cy:ve,x01:-v,y01:-b,x11:me*(o/re-1),y11:ve*(o/re-1)}}function Fj(){var e=XEr,t=QEr,r=Ml(0),n=null,o=JEr,i=eSr,a=tSr,u=null,d=YGe(h);function h(){var v,b,x=+e.apply(this,arguments),M=+t.apply(this,arguments),O=o.apply(this,arguments)-yO,D=i.apply(this,arguments)-yO,k=yne(D-O),R=D>O;if(u||(u=v=d()),M<x&&(b=M,M=x,x=b),!(M>zu))u.moveTo(0,0);else if(k>uS-zu)u.moveTo(M*Gy(O),M*md(O)),u.arc(0,0,M,O,D,!R),x>zu&&(u.moveTo(x*Gy(D),x*md(D)),u.arc(0,0,x,D,O,R));else{var q=O,B=D,G=O,re=D,Q=k,ie=k,me=a.apply(this,arguments)/2,ve=me>zu&&(n?+n.apply(this,arguments):A_(x*x+M*M)),ye=qj(yne(M-x)/2,+r.apply(this,arguments)),we=ye,Se=ye,ge,Re;if(ve>zu){var Je=_ne(ve/x*md(me)),tt=_ne(ve/M*md(me));(Q-=Je*2)>zu?(Je*=R?1:-1,G+=Je,re-=Je):(Q=0,G=re=(O+D)/2),(ie-=tt*2)>zu?(tt*=R?1:-1,q+=tt,B-=tt):(ie=0,q=B=(O+D)/2)}var Et=M*Gy(q),Xe=M*md(q),Pt=x*Gy(re),Lt=x*md(re);if(ye>zu){var Gt=M*Gy(B),nt=M*md(B),ct=x*Gy(G),_t=x*md(G),We;if(k<lS)if(We=rSr(Et,Xe,ct,_t,Gt,nt,Pt,Lt)){var De=Et-We[0],Qe=Xe-We[1],Ge=Gt-We[0],st=nt-We[1],pt=1/md(WGe((De*Ge+Qe*st)/(A_(De*De+Qe*Qe)*A_(Ge*Ge+st*st)))/2),Rt=A_(We[0]*We[0]+We[1]*We[1]);we=qj(ye,(x-Rt)/(pt-1)),Se=qj(ye,(M-Rt)/(pt+1))}else we=Se=0}ie>zu?Se>zu?(ge=zj(ct,_t,Et,Xe,M,Se,R),Re=zj(Gt,nt,Pt,Lt,M,Se,R),u.moveTo(ge.cx+ge.x01,ge.cy+ge.y01),Se<ye?u.arc(ge.cx,ge.cy,Se,Cl(ge.y01,ge.x01),Cl(Re.y01,Re.x01),!R):(u.arc(ge.cx,ge.cy,Se,Cl(ge.y01,ge.x01),Cl(ge.y11,ge.x11),!R),u.arc(0,0,M,Cl(ge.cy+ge.y11,ge.cx+ge.x11),Cl(Re.cy+Re.y11,Re.cx+Re.x11),!R),u.arc(Re.cx,Re.cy,Se,Cl(Re.y11,Re.x11),Cl(Re.y01,Re.x01),!R))):(u.moveTo(Et,Xe),u.arc(0,0,M,q,B,!R)):u.moveTo(Et,Xe),!(x>zu)||!(Q>zu)?u.lineTo(Pt,Lt):we>zu?(ge=zj(Pt,Lt,Gt,nt,x,-we,R),Re=zj(Et,Xe,ct,_t,x,-we,R),u.lineTo(ge.cx+ge.x01,ge.cy+ge.y01),we<ye?u.arc(ge.cx,ge.cy,we,Cl(ge.y01,ge.x01),Cl(Re.y01,Re.x01),!R):(u.arc(ge.cx,ge.cy,we,Cl(ge.y01,ge.x01),Cl(ge.y11,ge.x11),!R),u.arc(0,0,x,Cl(ge.cy+ge.y11,ge.cx+ge.x11),Cl(Re.cy+Re.y11,Re.cx+Re.x11),R),u.arc(Re.cx,Re.cy,we,Cl(Re.y11,Re.x11),Cl(Re.y01,Re.x01),!R))):u.arc(0,0,x,re,G,R)}if(u.closePath(),v)return u=null,v+""||null}return h.centroid=function(){var v=(+e.apply(this,arguments)+ +t.apply(this,arguments))/2,b=(+o.apply(this,arguments)+ +i.apply(this,arguments))/2-lS/2;return[Gy(b)*v,md(b)*v]},h.innerRadius=function(v){return arguments.length?(e=typeof v=="function"?v:Ml(+v),h):e},h.outerRadius=function(v){return arguments.length?(t=typeof v=="function"?v:Ml(+v),h):t},h.cornerRadius=function(v){return arguments.length?(r=typeof v=="function"?v:Ml(+v),h):r},h.padRadius=function(v){return arguments.length?(n=v==null?null:typeof v=="function"?v:Ml(+v),h):n},h.startAngle=function(v){return arguments.length?(o=typeof v=="function"?v:Ml(+v),h):o},h.endAngle=function(v){return arguments.length?(i=typeof v=="function"?v:Ml(+v),h):i},h.padAngle=function(v){return arguments.length?(a=typeof v=="function"?v:Ml(+v),h):a},h.context=function(v){return arguments.length?(u=v==null?null:v,h):u},h}var fwn=Array.prototype.slice;function KGe(e){return typeof e=="object"&&"length"in e?e:Array.from(e)}function XGe(e,t){return t<e?-1:t>e?1:t>=e?0:NaN}function QGe(e){return e}function wne(){var e=QGe,t=XGe,r=null,n=Ml(0),o=Ml(uS),i=Ml(0);function a(u){var d,h=(u=KGe(u)).length,v,b,x=0,M=new Array(h),O=new Array(h),D=+n.apply(this,arguments),k=Math.min(uS,Math.max(-uS,o.apply(this,arguments)-D)),R,q=Math.min(Math.abs(k)/h,i.apply(this,arguments)),B=q*(k<0?-1:1),G;for(d=0;d<h;++d)(G=O[M[d]=d]=+e(u[d],d,u))>0&&(x+=G);for(t!=null?M.sort(function(re,Q){return t(O[re],O[Q])}):r!=null&&M.sort(function(re,Q){return r(u[re],u[Q])}),d=0,b=x?(k-h*B)/x:0;d<h;++d,D=R)v=M[d],G=O[v],R=D+(G>0?G*b:0)+B,O[v]={data:u[v],index:d,value:G,startAngle:D,endAngle:R,padAngle:q};return O}return a.value=function(u){return arguments.length?(e=typeof u=="function"?u:Ml(+u),a):e},a.sortValues=function(u){return arguments.length?(t=u,r=null,a):t},a.sort=function(u){return arguments.length?(r=u,t=null,a):r},a.startAngle=function(u){return arguments.length?(n=typeof u=="function"?u:Ml(+u),a):n},a.endAngle=function(u){return arguments.length?(o=typeof u=="function"?u:Ml(+u),a):o},a.padAngle=function(u){return arguments.length?(i=typeof u=="function"?u:Ml(+u),a):i},a}var Uj="http://www.w3.org/1999/xhtml",Ene={svg:"http://www.w3.org/2000/svg",xhtml:Uj,xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"};function Bj(e){var t=e+="",r=t.indexOf(":");return r>=0&&(t=e.slice(0,r))!=="xmlns"&&(e=e.slice(r+1)),Ene.hasOwnProperty(t)?{space:Ene[t],local:e}:e}function nSr(e){return function(){var t=this.ownerDocument,r=this.namespaceURI;return r===Uj&&t.documentElement.namespaceURI===Uj?t.createElement(e):t.createElementNS(r,e)}}function oSr(e){return function(){return this.ownerDocument.createElementNS(e.space,e.local)}}function Vj(e){var t=Bj(e);return(t.local?oSr:nSr)(t)}function iSr(){}function Gj(e){return e==null?iSr:function(){return this.querySelector(e)}}function JGe(e){typeof e!="function"&&(e=Gj(e));for(var t=this._groups,r=t.length,n=new Array(r),o=0;o<r;++o)for(var i=t[o],a=i.length,u=n[o]=new Array(a),d,h,v=0;v<a;++v)(d=i[v])&&(h=e.call(d,d.__data__,v,i))&&("__data__"in d&&(h.__data__=d.__data__),u[v]=h);return new Na(n,this._parents)}function Sne(e){return e==null?[]:Array.isArray(e)?e:Array.from(e)}function aSr(){return[]}function eHe(e){return e==null?aSr:function(){return this.querySelectorAll(e)}}function sSr(e){return function(){return Sne(e.apply(this,arguments))}}function tHe(e){typeof e=="function"?e=sSr(e):e=eHe(e);for(var t=this._groups,r=t.length,n=[],o=[],i=0;i<r;++i)for(var a=t[i],u=a.length,d,h=0;h<u;++h)(d=a[h])&&(n.push(e.call(d,d.__data__,h,a)),o.push(d));return new Na(n,o)}function rHe(e){return function(){return this.matches(e)}}function Hj(e){return function(t){return t.matches(e)}}var lSr=Array.prototype.find;function uSr(e){return function(){return lSr.call(this.children,e)}}function cSr(){return this.firstElementChild}function nHe(e){return this.select(e==null?cSr:uSr(typeof e=="function"?e:Hj(e)))}var pSr=Array.prototype.filter;function fSr(){return Array.from(this.children)}function dSr(e){return function(){return pSr.call(this.children,e)}}function oHe(e){return this.selectAll(e==null?fSr:dSr(typeof e=="function"?e:Hj(e)))}function iHe(e){typeof e!="function"&&(e=rHe(e));for(var t=this._groups,r=t.length,n=new Array(r),o=0;o<r;++o)for(var i=t[o],a=i.length,u=n[o]=[],d,h=0;h<a;++h)(d=i[h])&&e.call(d,d.__data__,h,i)&&u.push(d);return new Na(n,this._parents)}function Wj(e){return new Array(e.length)}function aHe(){return new Na(this._enter||this._groups.map(Wj),this._parents)}function _O(e,t){this.ownerDocument=e.ownerDocument,this.namespaceURI=e.namespaceURI,this._next=null,this._parent=e,this.__data__=t}_O.prototype={constructor:_O,appendChild:function(e){return this._parent.insertBefore(e,this._next)},insertBefore:function(e,t){return this._parent.insertBefore(e,t)},querySelector:function(e){return this._parent.querySelector(e)},querySelectorAll:function(e){return this._parent.querySelectorAll(e)}};function sHe(e){return function(){return e}}function hSr(e,t,r,n,o,i){for(var a=0,u,d=t.length,h=i.length;a<h;++a)(u=t[a])?(u.__data__=i[a],n[a]=u):r[a]=new _O(e,i[a]);for(;a<d;++a)(u=t[a])&&(o[a]=u)}function mSr(e,t,r,n,o,i,a){var u,d,h=new Map,v=t.length,b=i.length,x=new Array(v),M;for(u=0;u<v;++u)(d=t[u])&&(x[u]=M=a.call(d,d.__data__,u,t)+"",h.has(M)?o[u]=d:h.set(M,d));for(u=0;u<b;++u)M=a.call(e,i[u],u,i)+"",(d=h.get(M))?(n[u]=d,d.__data__=i[u],h.delete(M)):r[u]=new _O(e,i[u]);for(u=0;u<v;++u)(d=t[u])&&h.get(x[u])===d&&(o[u]=d)}function gSr(e){return e.__data__}function lHe(e,t){if(!arguments.length)return Array.from(this,gSr);var r=t?mSr:hSr,n=this._parents,o=this._groups;typeof e!="function"&&(e=sHe(e));for(var i=o.length,a=new Array(i),u=new Array(i),d=new Array(i),h=0;h<i;++h){var v=n[h],b=o[h],x=b.length,M=vSr(e.call(v,v&&v.__data__,h,n)),O=M.length,D=u[h]=new Array(O),k=a[h]=new Array(O),R=d[h]=new Array(x);r(v,b,D,k,R,M,t);for(var q=0,B=0,G,re;q<O;++q)if(G=D[q]){for(q>=B&&(B=q+1);!(re=k[B])&&++B<O;);G._next=re||null}}return a=new Na(a,n),a._enter=u,a._exit=d,a}function vSr(e){return typeof e=="object"&&"length"in e?e:Array.from(e)}function uHe(){return new Na(this._exit||this._groups.map(Wj),this._parents)}function cHe(e,t,r){var n=this.enter(),o=this,i=this.exit();return typeof e=="function"?(n=e(n),n&&(n=n.selection())):n=n.append(e+""),t!=null&&(o=t(o),o&&(o=o.selection())),r==null?i.remove():r(i),n&&o?n.merge(o).order():o}function pHe(e){for(var t=e.selection?e.selection():e,r=this._groups,n=t._groups,o=r.length,i=n.length,a=Math.min(o,i),u=new Array(o),d=0;d<a;++d)for(var h=r[d],v=n[d],b=h.length,x=u[d]=new Array(b),M,O=0;O<b;++O)(M=h[O]||v[O])&&(x[O]=M);for(;d<o;++d)u[d]=r[d];return new Na(u,this._parents)}function fHe(){for(var e=this._groups,t=-1,r=e.length;++t<r;)for(var n=e[t],o=n.length-1,i=n[o],a;--o>=0;)(a=n[o])&&(i&&a.compareDocumentPosition(i)^4&&i.parentNode.insertBefore(a,i),i=a);return this}function dHe(e){e||(e=ySr);function t(b,x){return b&&x?e(b.__data__,x.__data__):!b-!x}for(var r=this._groups,n=r.length,o=new Array(n),i=0;i<n;++i){for(var a=r[i],u=a.length,d=o[i]=new Array(u),h,v=0;v<u;++v)(h=a[v])&&(d[v]=h);d.sort(t)}return new Na(o,this._parents).order()}function ySr(e,t){return e<t?-1:e>t?1:e>=t?0:NaN}function hHe(){var e=arguments[0];return arguments[0]=this,e.apply(null,arguments),this}function mHe(){return Array.from(this)}function gHe(){for(var e=this._groups,t=0,r=e.length;t<r;++t)for(var n=e[t],o=0,i=n.length;o<i;++o){var a=n[o];if(a)return a}return null}function vHe(){let e=0;for(let t of this)++e;return e}function yHe(){return!this.node()}function _He(e){for(var t=this._groups,r=0,n=t.length;r<n;++r)for(var o=t[r],i=0,a=o.length,u;i<a;++i)(u=o[i])&&e.call(u,u.__data__,i,o);return this}function _Sr(e){return function(){this.removeAttribute(e)}}function bSr(e){return function(){this.removeAttributeNS(e.space,e.local)}}function xSr(e,t){return function(){this.setAttribute(e,t)}}function wSr(e,t){return function(){this.setAttributeNS(e.space,e.local,t)}}function ESr(e,t){return function(){var r=t.apply(this,arguments);r==null?this.removeAttribute(e):this.setAttribute(e,r)}}function SSr(e,t){return function(){var r=t.apply(this,arguments);r==null?this.removeAttributeNS(e.space,e.local):this.setAttributeNS(e.space,e.local,r)}}function bHe(e,t){var r=Bj(e);if(arguments.length<2){var n=this.node();return r.local?n.getAttributeNS(r.space,r.local):n.getAttribute(r)}return this.each((t==null?r.local?bSr:_Sr:typeof t=="function"?r.local?SSr:ESr:r.local?wSr:xSr)(r,t))}function $j(e){return e.ownerDocument&&e.ownerDocument.defaultView||e.document&&e||e.defaultView}function TSr(e){return function(){this.style.removeProperty(e)}}function ISr(e,t,r){return function(){this.style.setProperty(e,t,r)}}function MSr(e,t,r){return function(){var n=t.apply(this,arguments);n==null?this.style.removeProperty(e):this.style.setProperty(e,n,r)}}function xHe(e,t,r){return arguments.length>1?this.each((t==null?TSr:typeof t=="function"?MSr:ISr)(e,t,r==null?"":r)):CSr(this.node(),e)}function CSr(e,t){return e.style.getPropertyValue(t)||$j(e).getComputedStyle(e,null).getPropertyValue(t)}function ASr(e){return function(){delete this[e]}}function OSr(e,t){return function(){this[e]=t}}function PSr(e,t){return function(){var r=t.apply(this,arguments);r==null?delete this[e]:this[e]=r}}function wHe(e,t){return arguments.length>1?this.each((t==null?ASr:typeof t=="function"?PSr:OSr)(e,t)):this.node()[e]}function EHe(e){return e.trim().split(/^|\s+/)}function Tne(e){return e.classList||new SHe(e)}function SHe(e){this._node=e,this._names=EHe(e.getAttribute("class")||"")}SHe.prototype={add:function(e){var t=this._names.indexOf(e);t<0&&(this._names.push(e),this._node.setAttribute("class",this._names.join(" ")))},remove:function(e){var t=this._names.indexOf(e);t>=0&&(this._names.splice(t,1),this._node.setAttribute("class",this._names.join(" ")))},contains:function(e){return this._names.indexOf(e)>=0}};function THe(e,t){for(var r=Tne(e),n=-1,o=t.length;++n<o;)r.add(t[n])}function IHe(e,t){for(var r=Tne(e),n=-1,o=t.length;++n<o;)r.remove(t[n])}function NSr(e){return function(){THe(this,e)}}function DSr(e){return function(){IHe(this,e)}}function LSr(e,t){return function(){(t.apply(this,arguments)?THe:IHe)(this,e)}}function MHe(e,t){var r=EHe(e+"");if(arguments.length<2){for(var n=Tne(this.node()),o=-1,i=r.length;++o<i;)if(!n.contains(r[o]))return!1;return!0}return this.each((typeof t=="function"?LSr:t?NSr:DSr)(r,t))}function kSr(){this.textContent=""}function RSr(e){return function(){this.textContent=e}}function jSr(e){return function(){var t=e.apply(this,arguments);this.textContent=t==null?"":t}}function CHe(e){return arguments.length?this.each(e==null?kSr:(typeof e=="function"?jSr:RSr)(e)):this.node().textContent}function qSr(){this.innerHTML=""}function zSr(e){return function(){this.innerHTML=e}}function FSr(e){return function(){var t=e.apply(this,arguments);this.innerHTML=t==null?"":t}}function AHe(e){return arguments.length?this.each(e==null?qSr:(typeof e=="function"?FSr:zSr)(e)):this.node().innerHTML}function USr(){this.nextSibling&&this.parentNode.appendChild(this)}function OHe(){return this.each(USr)}function BSr(){this.previousSibling&&this.parentNode.insertBefore(this,this.parentNode.firstChild)}function PHe(){return this.each(BSr)}function NHe(e){var t=typeof e=="function"?e:Vj(e);return this.select(function(){return this.appendChild(t.apply(this,arguments))})}function VSr(){return null}function DHe(e,t){var r=typeof e=="function"?e:Vj(e),n=t==null?VSr:typeof t=="function"?t:Gj(t);return this.select(function(){return this.insertBefore(r.apply(this,arguments),n.apply(this,arguments)||null)})}function GSr(){var e=this.parentNode;e&&e.removeChild(this)}function LHe(){return this.each(GSr)}function HSr(){var e=this.cloneNode(!1),t=this.parentNode;return t?t.insertBefore(e,this.nextSibling):e}function WSr(){var e=this.cloneNode(!0),t=this.parentNode;return t?t.insertBefore(e,this.nextSibling):e}function kHe(e){return this.select(e?WSr:HSr)}function RHe(e){return arguments.length?this.property("__data__",e):this.node().__data__}function $Sr(e){return function(t){e.call(this,t,this.__data__)}}function ZSr(e){return e.trim().split(/^|\s+/).map(function(t){var r="",n=t.indexOf(".");return n>=0&&(r=t.slice(n+1),t=t.slice(0,n)),{type:t,name:r}})}function YSr(e){return function(){var t=this.__on;if(t){for(var r=0,n=-1,o=t.length,i;r<o;++r)i=t[r],(!e.type||i.type===e.type)&&i.name===e.name?this.removeEventListener(i.type,i.listener,i.options):t[++n]=i;++n?t.length=n:delete this.__on}}}function KSr(e,t,r){return function(){var n=this.__on,o,i=$Sr(t);if(n){for(var a=0,u=n.length;a<u;++a)if((o=n[a]).type===e.type&&o.name===e.name){this.removeEventListener(o.type,o.listener,o.options),this.addEventListener(o.type,o.listener=i,o.options=r),o.value=t;return}}this.addEventListener(e.type,i,r),o={type:e.type,name:e.name,value:t,listener:i,options:r},n?n.push(o):this.__on=[o]}}function jHe(e,t,r){var n=ZSr(e+""),o,i=n.length,a;if(arguments.length<2){var u=this.node().__on;if(u){for(var d=0,h=u.length,v;d<h;++d)for(o=0,v=u[d];o<i;++o)if((a=n[o]).type===v.type&&a.name===v.name)return v.value}return}for(u=t?KSr:YSr,o=0;o<i;++o)this.each(u(n[o],t,r));return this}function qHe(e,t,r){var n=$j(e),o=n.CustomEvent;typeof o=="function"?o=new o(t,r):(o=n.document.createEvent("Event"),r?(o.initEvent(t,r.bubbles,r.cancelable),o.detail=r.detail):o.initEvent(t,!1,!1)),e.dispatchEvent(o)}function XSr(e,t){return function(){return qHe(this,e,t)}}function QSr(e,t){return function(){return qHe(this,e,t.apply(this,arguments))}}function zHe(e,t){return this.each((typeof t=="function"?QSr:XSr)(e,t))}function*FHe(){for(var e=this._groups,t=0,r=e.length;t<r;++t)for(var n=e[t],o=0,i=n.length,a;o<i;++o)(a=n[o])&&(yield a)}var Ine=[null];function Na(e,t){this._groups=e,this._parents=t}function JSr(){return new Na([[document.documentElement]],Ine)}function e2r(){return this}Na.prototype=JSr.prototype={constructor:Na,select:JGe,selectAll:tHe,selectChild:nHe,selectChildren:oHe,filter:iHe,data:lHe,enter:aHe,exit:uHe,join:cHe,merge:pHe,selection:e2r,order:fHe,sort:dHe,call:hHe,nodes:mHe,node:gHe,size:vHe,empty:yHe,each:_He,attr:bHe,style:xHe,property:wHe,classed:MHe,text:CHe,html:AHe,raise:OHe,lower:PHe,append:NHe,insert:DHe,remove:LHe,clone:kHe,datum:RHe,on:jHe,dispatch:zHe,[Symbol.iterator]:FHe};function Zj(e){return typeof e=="string"?new Na([[document.querySelector(e)]],[document.documentElement]):new Na([[e]],Ine)}var gd={},Mne="http://www.w3.org/2000/svg";typeof document!="undefined"&&(gd.svg=document.createElementNS(Mne,"svg"),gd.arcs=document.createElementNS(Mne,"g"),gd.arcs.classList.add("arcs"),gd.circle=document.createElementNS(Mne,"circle"),gd.circle.classList.add("circle"));var Cne=45,t2r=(e,t)=>{let n=t-7-4,o=7+(1-e)*n,i=Math.round((1-e)*7),a=gd.circle.cloneNode();return a.setAttribute("r",o),a.style.setProperty("--idohist-spatial-blur",`${i}px`),a.classList.add("spatial-certainty"),a},r2r=()=>{let e=gd.circle.cloneNode();return e.setAttribute("r",Cne),e.classList.add("background"),e},UHe=e=>{let t=gd.circle.cloneNode();return t.setAttribute("r",e),t.classList.add("track"),t},BHe=({spatialCertainty:e,temporalCertainty:t,contentCertainty:r})=>{let n=Cne*2,o=5,i=3,a=6,u=Cne-o,d=u-a,h=d-i,v=h-a,b=UHe(h-(h-v)/2),x=UHe(u-(u-d)/2),M=t2r(e,v),O=r2r(),D=gd.svg.cloneNode(),k=gd.arcs.cloneNode();k.classList.add("temporal");let R=gd.arcs.cloneNode();R.classList.add("content");let q={content:[{value:r,cssClass:"certainty"},{value:1-r,cssClass:"uncertainty"}],temporal:[{value:t,cssClass:"certainty"},{value:1-t,cssClass:"uncertainty"}]},B=Fj().innerRadius(u).outerRadius(d),G=Fj().innerRadius(v).outerRadius(h),re=wne().sort(null).value(me=>me.value),Q=Zj(R),ie=Zj(k);return Q.selectAll().data(re(q.content)).enter().append("path").attr("d",B).attr("class",me=>me.data.cssClass),ie.selectAll().data(re(q.temporal)).enter().append("path").attr("d",G).attr("class",me=>me.data.cssClass),D.setAttribute("viewBox",`${-n/2}, ${-n/2}, ${n}, ${n}`),D.append(O,M,b,x,k,R),D};var GHe="marker-idohist",HHe="data-vkf-feature-id",WHe="data-vkf-source-id",$He="data-vkf-source-id-hover",Kj="data-vkf-visibility",Ane=Symbol("vkf:feature-properties"),n2r={type:"Polygon",coordinates:[]},o2r=typeof document!="undefined"?document.createElement("div"):{},One=e=>{if(!Me(e))return;let t=e.closest(`div.${GHe}`),r=parseInt(t.getAttribute(HHe),10),n=t.getAttribute(WHe),o=t.getAttribute($He),i=t.getAttribute(Kj);return{featureId:r,sourceId:n,sourceIdHover:o,visibility:i}},ZHe=(e,t,r)=>{if(!Me(e))return;let n=Object.keys(jj).map(o=>`${t}-${o}`);for(let o of n){if(!Me(r)){e.setFilter(o,vO);continue}let i=["all",vO[1],["==",["id"],r]];e.setFilter(o,i)}},i2r=e=>{e.stopPropagation();let{target:t}=e,{featureId:r,sourceId:n,visibility:o}=One(t);o!==pg.NONE&&gne(Zs,{featureId:r,sourceId:n})},a2r=e=>{e.stopPropagation();let{target:t}=e,{featureId:r,sourceIdHover:n,visibility:o}=One(t);o!==pg.NONE&&Rj(tr).then(i=>{ZHe(i,n,r)})},s2r=e=>{e.stopPropagation();let{target:t}=e,{sourceIdHover:r,visibility:n}=One(t);n!==pg.NONE&&Rj(tr).then(o=>{ZHe(o,r,null)})},YHe=(e,{sourceId:t,sourceIdHover:r})=>{let n=e.geometry.coordinates,o=e.id,{properties:i}=e,a=N_(i[Il.contentCertainty]),u=N_(i[Il.temporalCertainty]),d=N_(i[Il.spatialCertainty]),h=o2r.cloneNode();h.classList.add(GHe),h.setAttribute(HHe,o),h.setAttribute(WHe,t),h.setAttribute($He,r);let v=BHe({spatialCertainty:d,temporalCertainty:u,contentCertainty:a});h.appendChild(v),h.addEventListener("click",i2r),h.addEventListener("mouseenter",a2r),h.addEventListener("mouseleave",s2r);let b=new VHe.Marker({element:h});return b.isVisible=!0,b.setLngLat(n),b[Ane]=e.properties,b},KHe=e=>{let{properties:t}=e,r=n2r;return Object.hasOwn(t,Il.hoverPolygon)&&t[Il.hoverPolygon].type==="Polygon"&&(r=t[Il.hoverPolygon]),{type:"Feature",geometry:r,id:e.id}},XHe=(e,t,r)=>{let n={};for(let o of Object.keys(t)){let i=`${e}-${o}`;n[i]=Te(Mt(Te({id:i,source:e},t[o]),{layout:Mt(Te({},t[o].layout),{visibility:"visible"})}),r&&{metadata:{[sp.id]:e,[sp.contentType]:Ru.IDOHIST}})}return n},Yj={largeZoom:{slope:.04,intercept:.24},smallZoom:{slope:.038,intercept:.06}},QHe=e=>e>14?Yj.largeZoom.slope*e+Yj.largeZoom.intercept:Yj.smallZoom.slope*e+Yj.smallZoom.intercept,N_=e=>Number.isNaN(Number.parseFloat(e))||e<0?0:e>1?1:e;var JHe=[{type:"mousemove",handler:e=>e.target.getCanvas().style.cursor="pointer"},{type:"mouseleave",handler:e=>e.target.getCanvas().style.cursor=""}],eWe=(e,{sourceId:t,sourceIdHover:r})=>{let n={type:"FeatureCollection",features:[]},o=[];for(let i of e.features){if(i.geometry.type!=="Point")continue;let a=YHe(i,{sourceIdHover:r,sourceId:t});o.push(a);let u=KHe(i);n.features.push(u)}return{markers:o,geoJsonHoverPolygons:n}},Al,vd,yd,pS,bO,mg,fS,af,cS,tWe,rWe,Pne=class extends Lj{constructor(r){super();Va(this,af);Va(this,Al,[]);Va(this,vd,null);Va(this,yd,null);Va(this,pS,!0);Va(this,bO,1);Va(this,mg,[]);Va(this,fS,{});Ga(this,vd,r),Ga(this,yd,`${r}-hover`)}addLayerToMap(r,n,o){var h,v;if(!Me(r))return;let{markers:i,geoJsonHoverPolygons:a}=eWe(o,{sourceId:Dr(this,vd),sourceIdHover:Dr(this,yd)});Ga(this,Al,i),Dr(this,Al).forEach(b=>b.addTo(r));let u=r.getLayer(ju)!==void 0?ju:void 0,d=[{sourceId:Dr(this,vd),definition:GGe,data:o,hasPopup:!0},{sourceId:Dr(this,yd),definition:jj,data:a,hasPopup:!1}];for(let{sourceId:b,definition:x,data:M,hasPopup:O}of d){r.addSource(b,{type:"geojson",data:M});let D=XHe(b,x,O);for(let[k,R]of Object.entries(D))r.addLayer(R,u),Dr(this,mg).push(k),Dr(this,fS)[k]=R.filter}if(Me(n)){let{layerSettings:b}=n,x=(h=b==null?void 0:b.opacity)!=null?h:1,M=(v=b==null?void 0:b.visibility)!=null?v:"visible";this.setVisibility(r,M),this.setOpacity(r,x)}sa(this,af,tWe).call(this,r)}removeLayerFromMap(r){Dr(this,Al).forEach(n=>n.remove()),Ga(this,Al,[]);for(let n of Dr(this,mg))sa(this,af,rWe).call(this,r,n),r.removeLayer(n);r.removeSource(Dr(this,vd)),r.removeSource(Dr(this,yd)),Ga(this,mg,[])}setDataOnMap(r,n){let{markers:o,geoJsonHoverPolygons:i}=eWe(n,{sourceId:Dr(this,vd),sourceIdHover:Dr(this,yd)});Dr(this,Al).forEach(d=>d.remove()),Ga(this,Al,o),Dr(this,Al).forEach(d=>d.addTo(r));let a=r.getSource(Dr(this,vd)),u=r.getSource(Dr(this,yd));if(!Me(a)||!Me(u)){console.error("Cannot update geojson on map. Source layer not found");return}a.setData(n),u.setData(i)}getOpacity(){return Dr(this,bO)}setOpacity(r,n){if(!Me(n))return;Ga(this,bO,n),Dr(this,Al).forEach(i=>i.setOpacity(n));let o=sa(this,af,cS).call(this,r);for(let{id:i,type:a}of o){let u=C_[a],d=mO[a];r.setPaintProperty(i,d,["*",u,n])}}isVisible(){return Dr(this,Al).length===0?!1:Dr(this,pS)}setVisibility(r,n){let o=sa(this,af,cS).call(this,r);if(!(o.length===0||!Me(n))){for(let{id:i}of o)r.setLayoutProperty(i,"visibility",n);if(n===pg.VISIBLE){for(let i of Dr(this,Al)){let a=i.getElement();a.setAttribute(Kj,pg.VISIBLE),a.style.setProperty("display","block")}Ga(this,pS,!0),r.fireVisibilityChanged(Dr(this,vd),n),r.fireVisibilityChanged(Dr(this,yd),n);return}if(n===pg.NONE){for(let i of Dr(this,Al)){let a=i.getElement();a.setAttribute(Kj,pg.NONE),a.style.setProperty("display","none")}Ga(this,pS,!1),r.fireVisibilityChanged(Dr(this,vd),n),r.fireVisibilityChanged(Dr(this,yd),n);return}}}isDisplayedInMap(){return Dr(this,Al).length>0}getLayerId(){return Dr(this,mg).length>0?Dr(this,mg)[0]:null}move(){}setFilters(r,n){let o=n==null?void 0:n.timeExtent,i=Dj(o),a=sa(this,af,cS).call(this,r);for(let u of a){let{id:d}=u,v=["all",Dr(this,fS)[d]];Me(i)&&i.length>0&&v.push(i),r.setFilter(d,v)}for(let u of Dr(this,Al)){let[d,h]=u[Ane][po.time],{timeExtent:v}=n;d<=v[1]*1e3&&h>=v[0]*1e3?u.addTo(r):u.remove()}}resetFilters(r){let n=sa(this,af,cS).call(this,r);Dr(this,Al).forEach(o=>o.addTo(r));for(let o of n){let{id:i}=o,a=Dr(this,fS)[i];r.setFilter(i,a)}}};Al=new WeakMap,vd=new WeakMap,yd=new WeakMap,pS=new WeakMap,bO=new WeakMap,mg=new WeakMap,fS=new WeakMap,af=new WeakSet,cS=function(r){let n=Dr(this,mg).map(o=>r.getLayer(o));return n[0]===void 0?[]:n},tWe=function(r){for(let{id:n}of sa(this,af,cS).call(this,r))for(let{type:o,handler:i}of JHe)r.on(o,n,i)},rWe=function(r,n){for(let{type:o,handler:i}of JHe)r.off(o,n,i)};var nWe=Pne;var D_,Ol,Xj,oWe,gg=class gg extends nS{constructor({metadata:r,geometry:n,geoJson:o}){if(!Dr(gg,D_))throw new TypeError("Constructor is private. Use GeoJsonLayer.fromApplication() or GeoJsonLayer.fromPersistence() instead.");Ga(gg,D_,!1);super({metadata:r,geometry:n});Va(this,Xj);bt(this,"geoJSON",{});Va(this,Ol,null);sa(this,Xj,oWe).call(this,o),this.metadata[qe.externalContentType]===Ru.IDOHIST?Ga(this,Ol,new nWe(this.getId())):Ga(this,Ol,new FGe(this.getId()))}static fromApplication(r){return Ga(gg,D_,!0),new gg(r)}static fromPersistence({metadata:r,geometry:n,geoJson:o}){Ga(gg,D_,!0);let i=o.features.map(dne),a=Mt(Te({},o),{features:i});return new gg({metadata:r,geometry:n,geoJson:a})}getGeoJson(){return this.geoJSON}getGeoJsonForPersistence(){var o;let r=structuredClone(this.getGeoJson()),n=(o=r.features)!=null?o:[];return n=n.map(fne),r.features=n,r}setGeoJson(r){let n=r.features.map((i,a)=>(Object.hasOwn(i,"properties")||(i.properties={}),Me(i.id)?Te({},i):Mt(Te({},i),{id:a+1}))),o=Mt(Te({},r),{features:n});this.geoJSON=o}getFeature(r){let n=this.geoJSON.features.find(o=>o.id===r);return Me(n)?n:(console.warn(`No feature found for id '${r}'`),null)}getType(){return co.VECTOR_MAP}isRemote(){return Me(this.metadata[qe.vectorMapId])}isLocal(){return!this.isRemote()}isExternalVectorMap(){let r=this.metadata[qe.externalContentUrl];return Me(r)&&dd(r)}getPreviewFeature(){let r=this.getMetadata(qe.bounds);return{type:"Feature",properties:{},geometry:kGe(r)}}addLayerToMap(r,n){Dr(this,Ol).addLayerToMap(r,n,this.geoJSON)}removeMapLibreLayers(r){Dr(this,Ol).removeLayerFromMap(r)}setDataOnMap(r,n){!Me(r)||!Me(n)||(this.setGeoJson(n),Dr(this,Ol).setDataOnMap(r,this.geoJSON))}getMapLibreLayerId(){return Dr(this,Ol).getLayerId()}getOpacity(r){return Dr(this,Ol).getOpacity(r)}setOpacity(r,n){Dr(this,Ol).setOpacity(r,n)}isVisible(r){return Dr(this,Ol).isVisible(r)}setVisibility(r,n){Dr(this,Ol).setVisibility(r,n)}isDisplayedInMap(r){return Dr(this,Ol).isDisplayedInMap(r)}move(r,n){Dr(this,Ol).move(r,n)}moveToTop(r){this.move(r,null)}setFilters(r,n){if(!Me(n)||(n==null?void 0:n.length)===0){Dr(this,Ol).resetFilters(r);return}Dr(this,Ol).setFilters(r,n)}static toApplicationState(r){var i;if(!Me(r))return r;let n=structuredClone(r),o=(i=n.features)!=null?i:[];return o=o.map(dne),n.features=o,n}static toPersistenceState(r){var i;if(!Me(r))return r;let n=structuredClone(r),o=(i=n.features)!=null?i:[];return o=o.map(fne),n.features=o,n}};D_=new WeakMap,Ol=new WeakMap,Xj=new WeakSet,oWe=function(r){var o,i;this.setGeoJson(r);let n=this.geometry?oS(this.geometry):oS(this.geoJSON);this.metadata[qe.bounds]=n,this.metadata[qe.id]=(o=this.metadata[qe.id])!=null?o:crypto.randomUUID(),this.metadata[qe.timePeriod]=(i=this.metadata[qe.timePeriod])!=null?i:DGe(),this.metadata[qe.hasGeoReference]=!0},Va(gg,D_,!1);var Nne=gg,iWe=Nne;var Vo=iWe;var aWe=ds,Fu={$schema:"http://json-schema.org/draft-07/schema#",$id:"https://geojson.org/schema/FeatureCollection.json",title:"GeoJSON FeatureCollection",type:"object",required:["type","features"],properties:{type:{type:"string",enum:["FeatureCollection"]},features:{type:"array",items:{title:"GeoJSON Feature",type:"object",required:["type","properties","geometry"],properties:{type:{type:"string",enum:["Feature"]},id:{oneOf:[{type:"number"},{type:"string"}]},properties:{oneOf:[{type:"null"},{type:"object"}]},geometry:{oneOf:[{type:"null"},{title:"GeoJSON Point",type:"object",required:["type","coordinates"],properties:{type:{type:"string",enum:["Point"]},coordinates:{type:"array",minItems:2,items:{type:"number"}},bbox:{type:"array",minItems:4,items:{type:"number"}}}},{title:"GeoJSON LineString",type:"object",required:["type","coordinates"],properties:{type:{type:"string",enum:["LineString"]},coordinates:{type:"array",minItems:2,items:{type:"array",minItems:2,items:{type:"number"}}},bbox:{type:"array",minItems:4,items:{type:"number"}}}},{title:"GeoJSON Polygon",type:"object",required:["type","coordinates"],properties:{type:{type:"string",enum:["Polygon"]},coordinates:{type:"array",items:{type:"array",minItems:4,items:{type:"array",minItems:2,items:{type:"number"}}}},bbox:{type:"array",minItems:4,items:{type:"number"}}}},{title:"GeoJSON MultiPoint",type:"object",required:["type","coordinates"],properties:{type:{type:"string",enum:["MultiPoint"]},coordinates:{type:"array",items:{type:"array",minItems:2,items:{type:"number"}}},bbox:{type:"array",minItems:4,items:{type:"number"}}}},{title:"GeoJSON MultiLineString",type:"object",required:["type","coordinates"],properties:{type:{type:"string",enum:["MultiLineString"]},coordinates:{type:"array",items:{type:"array",minItems:2,items:{type:"array",minItems:2,items:{type:"number"}}}},bbox:{type:"array",minItems:4,items:{type:"number"}}}},{title:"GeoJSON MultiPolygon",type:"object",required:["type","coordinates"],properties:{type:{type:"string",enum:["MultiPolygon"]},coordinates:{type:"array",items:{type:"array",items:{type:"array",minItems:4,items:{type:"array",minItems:2,items:{type:"number"}}}}},bbox:{type:"array",minItems:4,items:{type:"number"}}}},{title:"GeoJSON GeometryCollection",type:"object",required:["type","geometries"],properties:{type:{type:"string",enum:["GeometryCollection"]},geometries:{type:"array",items:{oneOf:[{title:"GeoJSON Point",type:"object",required:["type","coordinates"],properties:{type:{type:"string",enum:["Point"]},coordinates:{type:"array",minItems:2,items:{type:"number"}},bbox:{type:"array",minItems:4,items:{type:"number"}}}},{title:"GeoJSON LineString",type:"object",required:["type","coordinates"],properties:{type:{type:"string",enum:["LineString"]},coordinates:{type:"array",minItems:2,items:{type:"array",minItems:2,items:{type:"number"}}},bbox:{type:"array",minItems:4,items:{type:"number"}}}},{title:"GeoJSON Polygon",type:"object",required:["type","coordinates"],properties:{type:{type:"string",enum:["Polygon"]},coordinates:{type:"array",items:{type:"array",minItems:4,items:{type:"array",minItems:2,items:{type:"number"}}}},bbox:{type:"array",minItems:4,items:{type:"number"}}}},{title:"GeoJSON MultiPoint",type:"object",required:["type","coordinates"],properties:{type:{type:"string",enum:["MultiPoint"]},coordinates:{type:"array",items:{type:"array",minItems:2,items:{type:"number"}}},bbox:{type:"array",minItems:4,items:{type:"number"}}}},{title:"GeoJSON MultiLineString",type:"object",required:["type","coordinates"],properties:{type:{type:"string",enum:["MultiLineString"]},coordinates:{type:"array",items:{type:"array",minItems:2,items:{type:"array",minItems:2,items:{type:"number"}}}},bbox:{type:"array",minItems:4,items:{type:"number"}}}},{title:"GeoJSON MultiPolygon",type:"object",required:["type","coordinates"],properties:{type:{type:"string",enum:["MultiPolygon"]},coordinates:{type:"array",items:{type:"array",items:{type:"array",minItems:4,items:{type:"array",minItems:2,items:{type:"number"}}}}},bbox:{type:"array",minItems:4,items:{type:"number"}}}}]}},bbox:{type:"array",minItems:4,items:{type:"number"}}}}]},bbox:{type:"array",minItems:4,items:{type:"number"}}}}},bbox:{type:"array",minItems:4,items:{type:"number"}}}};function ds(e,{instancePath:t="",parentData:r,parentDataProperty:n,rootData:o=e}={}){let i=null,a=0;if(a===0)if(e&&typeof e=="object"&&!Array.isArray(e)){let J;if(e.type===void 0&&(J="type")||e.features===void 0&&(J="features"))return ds.errors=[{instancePath:t,schemaPath:"#/required",keyword:"required",params:{missingProperty:J},message:"must have required property '"+J+"'"}],!1;if(e.type!==void 0){let de=e.type,ne=a;if(typeof de!="string")return ds.errors=[{instancePath:t+"/type",schemaPath:"#/properties/type/type",keyword:"type",params:{type:"string"},message:"must be string"}],!1;if(de!=="FeatureCollection")return ds.errors=[{instancePath:t+"/type",schemaPath:"#/properties/type/enum",keyword:"enum",params:{allowedValues:Fu.properties.type.enum},message:"must be equal to one of the allowed values"}],!1;var u=ne===a}else var u=!0;if(u){if(e.features!==void 0){let de=e.features,ne=a;if(a===ne)if(Array.isArray(de)){var d=!0;let Ie=de.length;for(let oe=0;oe<Ie;oe++){let Ue=de[oe],ze=a;if(a===ze)if(Ue&&typeof Ue=="object"&&!Array.isArray(Ue)){let wt;if(Ue.type===void 0&&(wt="type")||Ue.properties===void 0&&(wt="properties")||Ue.geometry===void 0&&(wt="geometry"))return ds.errors=[{instancePath:t+"/features/"+oe,schemaPath:"#/properties/features/items/required",keyword:"required",params:{missingProperty:wt},message:"must have required property '"+wt+"'"}],!1;if(Ue.type!==void 0){let $e=Ue.type,Xt=a;if(typeof $e!="string")return ds.errors=[{instancePath:t+"/features/"+oe+"/type",schemaPath:"#/properties/features/items/properties/type/type",keyword:"type",params:{type:"string"},message:"must be string"}],!1;if($e!=="Feature")return ds.errors=[{instancePath:t+"/features/"+oe+"/type",schemaPath:"#/properties/features/items/properties/type/enum",keyword:"enum",params:{allowedValues:Fu.properties.features.items.properties.type.enum},message:"must be equal to one of the allowed values"}],!1;var h=Xt===a}else var h=!0;if(h){if(Ue.id!==void 0){let $e=Ue.id,Xt=a,yr=a,zt=!1,Ke=null,Tn=a;if(!(typeof $e=="number"&&isFinite($e))){let Qt={instancePath:t+"/features/"+oe+"/id",schemaPath:"#/properties/features/items/properties/id/oneOf/0/type",keyword:"type",params:{type:"number"},message:"must be number"};i===null?i=[Qt]:i.push(Qt),a++}var v=Tn===a;v&&(zt=!0,Ke=0);let rn=a;if(typeof $e!="string"){let Qt={instancePath:t+"/features/"+oe+"/id",schemaPath:"#/properties/features/items/properties/id/oneOf/1/type",keyword:"type",params:{type:"string"},message:"must be string"};i===null?i=[Qt]:i.push(Qt),a++}var v=rn===a;if(v&&zt?(zt=!1,Ke=[Ke,1]):v&&(zt=!0,Ke=1),zt)a=yr,i!==null&&(yr?i.length=yr:i=null);else{let Qt={instancePath:t+"/features/"+oe+"/id",schemaPath:"#/properties/features/items/properties/id/oneOf",keyword:"oneOf",params:{passingSchemas:Ke},message:"must match exactly one schema in oneOf"};return i===null?i=[Qt]:i.push(Qt),a++,ds.errors=i,!1}var h=Xt===a}else var h=!0;if(h){if(Ue.properties!==void 0){let $e=Ue.properties,Xt=a,yr=a,zt=!1,Ke=null,Tn=a;if($e!==null){let Qt={instancePath:t+"/features/"+oe+"/properties",schemaPath:"#/properties/features/items/properties/properties/oneOf/0/type",keyword:"type",params:{type:"null"},message:"must be null"};i===null?i=[Qt]:i.push(Qt),a++}var b=Tn===a;b&&(zt=!0,Ke=0);let rn=a;if(!($e&&typeof $e=="object"&&!Array.isArray($e))){let Qt={instancePath:t+"/features/"+oe+"/properties",schemaPath:"#/properties/features/items/properties/properties/oneOf/1/type",keyword:"type",params:{type:"object"},message:"must be object"};i===null?i=[Qt]:i.push(Qt),a++}var b=rn===a;if(b&&zt?(zt=!1,Ke=[Ke,1]):b&&(zt=!0,Ke=1),zt)a=yr,i!==null&&(yr?i.length=yr:i=null);else{let Qt={instancePath:t+"/features/"+oe+"/properties",schemaPath:"#/properties/features/items/properties/properties/oneOf",keyword:"oneOf",params:{passingSchemas:Ke},message:"must match exactly one schema in oneOf"};return i===null?i=[Qt]:i.push(Qt),a++,ds.errors=i,!1}var h=Xt===a}else var h=!0;if(h){if(Ue.geometry!==void 0){let $e=Ue.geometry,Xt=a,yr=a,zt=!1,Ke=null,Tn=a;if($e!==null){let Qt={instancePath:t+"/features/"+oe+"/geometry",schemaPath:"#/properties/features/items/properties/geometry/oneOf/0/type",keyword:"type",params:{type:"null"},message:"must be null"};i===null?i=[Qt]:i.push(Qt),a++}var D=Tn===a;D&&(zt=!0,Ke=0);let rn=a;if(a===rn)if($e&&typeof $e=="object"&&!Array.isArray($e)){let Qt;if($e.type===void 0&&(Qt="type")||$e.coordinates===void 0&&(Qt="coordinates")){let mt={instancePath:t+"/features/"+oe+"/geometry",schemaPath:"#/properties/features/items/properties/geometry/oneOf/1/required",keyword:"required",params:{missingProperty:Qt},message:"must have required property '"+Qt+"'"};i===null?i=[mt]:i.push(mt),a++}else{if($e.type!==void 0){let mt=$e.type,fr=a;if(typeof mt!="string"){let wr={instancePath:t+"/features/"+oe+"/geometry/type",schemaPath:"#/properties/features/items/properties/geometry/oneOf/1/properties/type/type",keyword:"type",params:{type:"string"},message:"must be string"};i===null?i=[wr]:i.push(wr),a++}if(mt!=="Point"){let wr={instancePath:t+"/features/"+oe+"/geometry/type",schemaPath:"#/properties/features/items/properties/geometry/oneOf/1/properties/type/enum",keyword:"enum",params:{allowedValues:Fu.properties.features.items.properties.geometry.oneOf[1].properties.type.enum},message:"must be equal to one of the allowed values"};i===null?i=[wr]:i.push(wr),a++}var x=fr===a}else var x=!0;if(x){if($e.coordinates!==void 0){let mt=$e.coordinates,fr=a;if(a===fr)if(Array.isArray(mt)){if(mt.length<2){let Vr={instancePath:t+"/features/"+oe+"/geometry/coordinates",schemaPath:"#/properties/features/items/properties/geometry/oneOf/1/properties/coordinates/minItems",keyword:"minItems",params:{limit:2},message:"must NOT have fewer than 2 items"};i===null?i=[Vr]:i.push(Vr),a++}else{var M=!0;let Vr=mt.length;for(let en=0;en<Vr;en++){let Yr=mt[en],lr=a;if(!(typeof Yr=="number"&&isFinite(Yr))){let sn={instancePath:t+"/features/"+oe+"/geometry/coordinates/"+en,schemaPath:"#/properties/features/items/properties/geometry/oneOf/1/properties/coordinates/items/type",keyword:"type",params:{type:"number"},message:"must be number"};i===null?i=[sn]:i.push(sn),a++}var M=lr===a;if(!M)break}}}else{let Vr={instancePath:t+"/features/"+oe+"/geometry/coordinates",schemaPath:"#/properties/features/items/properties/geometry/oneOf/1/properties/coordinates/type",keyword:"type",params:{type:"array"},message:"must be array"};i===null?i=[Vr]:i.push(Vr),a++}var x=fr===a}else var x=!0;if(x)if($e.bbox!==void 0){let mt=$e.bbox,fr=a;if(a===fr)if(Array.isArray(mt)){if(mt.length<4){let Vr={instancePath:t+"/features/"+oe+"/geometry/bbox",schemaPath:"#/properties/features/items/properties/geometry/oneOf/1/properties/bbox/minItems",keyword:"minItems",params:{limit:4},message:"must NOT have fewer than 4 items"};i===null?i=[Vr]:i.push(Vr),a++}else{var O=!0;let Vr=mt.length;for(let en=0;en<Vr;en++){let Yr=mt[en],lr=a;if(!(typeof Yr=="number"&&isFinite(Yr))){let sn={instancePath:t+"/features/"+oe+"/geometry/bbox/"+en,schemaPath:"#/properties/features/items/properties/geometry/oneOf/1/properties/bbox/items/type",keyword:"type",params:{type:"number"},message:"must be number"};i===null?i=[sn]:i.push(sn),a++}var O=lr===a;if(!O)break}}}else{let Vr={instancePath:t+"/features/"+oe+"/geometry/bbox",schemaPath:"#/properties/features/items/properties/geometry/oneOf/1/properties/bbox/type",keyword:"type",params:{type:"array"},message:"must be array"};i===null?i=[Vr]:i.push(Vr),a++}var x=fr===a}else var x=!0}}}else{let Qt={instancePath:t+"/features/"+oe+"/geometry",schemaPath:"#/properties/features/items/properties/geometry/oneOf/1/type",keyword:"type",params:{type:"object"},message:"must be object"};i===null?i=[Qt]:i.push(Qt),a++}var D=rn===a;if(D&&zt)zt=!1,Ke=[Ke,1];else{D&&(zt=!0,Ke=1);let Qt=a;if(a===Qt)if($e&&typeof $e=="object"&&!Array.isArray($e)){let fr;if($e.type===void 0&&(fr="type")||$e.coordinates===void 0&&(fr="coordinates")){let wr={instancePath:t+"/features/"+oe+"/geometry",schemaPath:"#/properties/features/items/properties/geometry/oneOf/2/required",keyword:"required",params:{missingProperty:fr},message:"must have required property '"+fr+"'"};i===null?i=[wr]:i.push(wr),a++}else{if($e.type!==void 0){let wr=$e.type,Vr=a;if(typeof wr!="string"){let en={instancePath:t+"/features/"+oe+"/geometry/type",schemaPath:"#/properties/features/items/properties/geometry/oneOf/2/properties/type/type",keyword:"type",params:{type:"string"},message:"must be string"};i===null?i=[en]:i.push(en),a++}if(wr!=="LineString"){let en={instancePath:t+"/features/"+oe+"/geometry/type",schemaPath:"#/properties/features/items/properties/geometry/oneOf/2/properties/type/enum",keyword:"enum",params:{allowedValues:Fu.properties.features.items.properties.geometry.oneOf[2].properties.type.enum},message:"must be equal to one of the allowed values"};i===null?i=[en]:i.push(en),a++}var k=Vr===a}else var k=!0;if(k){if($e.coordinates!==void 0){let wr=$e.coordinates,Vr=a;if(a===Vr)if(Array.isArray(wr)){if(wr.length<2){let Yr={instancePath:t+"/features/"+oe+"/geometry/coordinates",schemaPath:"#/properties/features/items/properties/geometry/oneOf/2/properties/coordinates/minItems",keyword:"minItems",params:{limit:2},message:"must NOT have fewer than 2 items"};i===null?i=[Yr]:i.push(Yr),a++}else{var R=!0;let Yr=wr.length;for(let lr=0;lr<Yr;lr++){let In=wr[lr],sn=a;if(a===sn)if(Array.isArray(In)){if(In.length<2){let tn={instancePath:t+"/features/"+oe+"/geometry/coordinates/"+lr,schemaPath:"#/properties/features/items/properties/geometry/oneOf/2/properties/coordinates/items/minItems",keyword:"minItems",params:{limit:2},message:"must NOT have fewer than 2 items"};i===null?i=[tn]:i.push(tn),a++}else{var q=!0;let tn=In.length;for(let ln=0;ln<tn;ln++){let Rr=In[ln],Ur=a;if(!(typeof Rr=="number"&&isFinite(Rr))){let Zr={instancePath:t+"/features/"+oe+"/geometry/coordinates/"+lr+"/"+ln,schemaPath:"#/properties/features/items/properties/geometry/oneOf/2/properties/coordinates/items/items/type",keyword:"type",params:{type:"number"},message:"must be number"};i===null?i=[Zr]:i.push(Zr),a++}var q=Ur===a;if(!q)break}}}else{let tn={instancePath:t+"/features/"+oe+"/geometry/coordinates/"+lr,schemaPath:"#/properties/features/items/properties/geometry/oneOf/2/properties/coordinates/items/type",keyword:"type",params:{type:"array"},message:"must be array"};i===null?i=[tn]:i.push(tn),a++}var R=sn===a;if(!R)break}}}else{let Yr={instancePath:t+"/features/"+oe+"/geometry/coordinates",schemaPath:"#/properties/features/items/properties/geometry/oneOf/2/properties/coordinates/type",keyword:"type",params:{type:"array"},message:"must be array"};i===null?i=[Yr]:i.push(Yr),a++}var k=Vr===a}else var k=!0;if(k)if($e.bbox!==void 0){let wr=$e.bbox,Vr=a;if(a===Vr)if(Array.isArray(wr)){if(wr.length<4){let Yr={instancePath:t+"/features/"+oe+"/geometry/bbox",schemaPath:"#/properties/features/items/properties/geometry/oneOf/2/properties/bbox/minItems",keyword:"minItems",params:{limit:4},message:"must NOT have fewer than 4 items"};i===null?i=[Yr]:i.push(Yr),a++}else{var B=!0;let Yr=wr.length;for(let lr=0;lr<Yr;lr++){let In=wr[lr],sn=a;if(!(typeof In=="number"&&isFinite(In))){let tn={instancePath:t+"/features/"+oe+"/geometry/bbox/"+lr,schemaPath:"#/properties/features/items/properties/geometry/oneOf/2/properties/bbox/items/type",keyword:"type",params:{type:"number"},message:"must be number"};i===null?i=[tn]:i.push(tn),a++}var B=sn===a;if(!B)break}}}else{let Yr={instancePath:t+"/features/"+oe+"/geometry/bbox",schemaPath:"#/properties/features/items/properties/geometry/oneOf/2/properties/bbox/type",keyword:"type",params:{type:"array"},message:"must be array"};i===null?i=[Yr]:i.push(Yr),a++}var k=Vr===a}else var k=!0}}}else{let fr={instancePath:t+"/features/"+oe+"/geometry",schemaPath:"#/properties/features/items/properties/geometry/oneOf/2/type",keyword:"type",params:{type:"object"},message:"must be object"};i===null?i=[fr]:i.push(fr),a++}var D=Qt===a;if(D&&zt)zt=!1,Ke=[Ke,2];else{D&&(zt=!0,Ke=2);let fr=a;if(a===fr)if($e&&typeof $e=="object"&&!Array.isArray($e)){let Vr;if($e.type===void 0&&(Vr="type")||$e.coordinates===void 0&&(Vr="coordinates")){let en={instancePath:t+"/features/"+oe+"/geometry",schemaPath:"#/properties/features/items/properties/geometry/oneOf/3/required",keyword:"required",params:{missingProperty:Vr},message:"must have required property '"+Vr+"'"};i===null?i=[en]:i.push(en),a++}else{if($e.type!==void 0){let en=$e.type,Yr=a;if(typeof en!="string"){let lr={instancePath:t+"/features/"+oe+"/geometry/type",schemaPath:"#/properties/features/items/properties/geometry/oneOf/3/properties/type/type",keyword:"type",params:{type:"string"},message:"must be string"};i===null?i=[lr]:i.push(lr),a++}if(en!=="Polygon"){let lr={instancePath:t+"/features/"+oe+"/geometry/type",schemaPath:"#/properties/features/items/properties/geometry/oneOf/3/properties/type/enum",keyword:"enum",params:{allowedValues:Fu.properties.features.items.properties.geometry.oneOf[3].properties.type.enum},message:"must be equal to one of the allowed values"};i===null?i=[lr]:i.push(lr),a++}var G=Yr===a}else var G=!0;if(G){if($e.coordinates!==void 0){let en=$e.coordinates,Yr=a;if(a===Yr)if(Array.isArray(en)){var re=!0;let In=en.length;for(let sn=0;sn<In;sn++){let _n=en[sn],tn=a;if(a===tn)if(Array.isArray(_n)){if(_n.length<4){let Rr={instancePath:t+"/features/"+oe+"/geometry/coordinates/"+sn,schemaPath:"#/properties/features/items/properties/geometry/oneOf/3/properties/coordinates/items/minItems",keyword:"minItems",params:{limit:4},message:"must NOT have fewer than 4 items"};i===null?i=[Rr]:i.push(Rr),a++}else{var Q=!0;let Rr=_n.length;for(let Ur=0;Ur<Rr;Ur++){let Kr=_n[Ur],Zr=a;if(a===Zr)if(Array.isArray(Kr)){if(Kr.length<2){let Zt={instancePath:t+"/features/"+oe+"/geometry/coordinates/"+sn+"/"+Ur,schemaPath:"#/properties/features/items/properties/geometry/oneOf/3/properties/coordinates/items/items/minItems",keyword:"minItems",params:{limit:2},message:"must NOT have fewer than 2 items"};i===null?i=[Zt]:i.push(Zt),a++}else{var ie=!0;let Zt=Kr.length;for(let Ii=0;Ii<Zt;Ii++){let Zo=Kr[Ii],io=a;if(!(typeof Zo=="number"&&isFinite(Zo))){let Hl={instancePath:t+"/features/"+oe+"/geometry/coordinates/"+sn+"/"+Ur+"/"+Ii,schemaPath:"#/properties/features/items/properties/geometry/oneOf/3/properties/coordinates/items/items/items/type",keyword:"type",params:{type:"number"},message:"must be number"};i===null?i=[Hl]:i.push(Hl),a++}var ie=io===a;if(!ie)break}}}else{let Zt={instancePath:t+"/features/"+oe+"/geometry/coordinates/"+sn+"/"+Ur,schemaPath:"#/properties/features/items/properties/geometry/oneOf/3/properties/coordinates/items/items/type",keyword:"type",params:{type:"array"},message:"must be array"};i===null?i=[Zt]:i.push(Zt),a++}var Q=Zr===a;if(!Q)break}}}else{let Rr={instancePath:t+"/features/"+oe+"/geometry/coordinates/"+sn,schemaPath:"#/properties/features/items/properties/geometry/oneOf/3/properties/coordinates/items/type",keyword:"type",params:{type:"array"},message:"must be array"};i===null?i=[Rr]:i.push(Rr),a++}var re=tn===a;if(!re)break}}else{let In={instancePath:t+"/features/"+oe+"/geometry/coordinates",schemaPath:"#/properties/features/items/properties/geometry/oneOf/3/properties/coordinates/type",keyword:"type",params:{type:"array"},message:"must be array"};i===null?i=[In]:i.push(In),a++}var G=Yr===a}else var G=!0;if(G)if($e.bbox!==void 0){let en=$e.bbox,Yr=a;if(a===Yr)if(Array.isArray(en)){if(en.length<4){let In={instancePath:t+"/features/"+oe+"/geometry/bbox",schemaPath:"#/properties/features/items/properties/geometry/oneOf/3/properties/bbox/minItems",keyword:"minItems",params:{limit:4},message:"must NOT have fewer than 4 items"};i===null?i=[In]:i.push(In),a++}else{var me=!0;let In=en.length;for(let sn=0;sn<In;sn++){let _n=en[sn],tn=a;if(!(typeof _n=="number"&&isFinite(_n))){let Rr={instancePath:t+"/features/"+oe+"/geometry/bbox/"+sn,schemaPath:"#/properties/features/items/properties/geometry/oneOf/3/properties/bbox/items/type",keyword:"type",params:{type:"number"},message:"must be number"};i===null?i=[Rr]:i.push(Rr),a++}var me=tn===a;if(!me)break}}}else{let In={instancePath:t+"/features/"+oe+"/geometry/bbox",schemaPath:"#/properties/features/items/properties/geometry/oneOf/3/properties/bbox/type",keyword:"type",params:{type:"array"},message:"must be array"};i===null?i=[In]:i.push(In),a++}var G=Yr===a}else var G=!0}}}else{let Vr={instancePath:t+"/features/"+oe+"/geometry",schemaPath:"#/properties/features/items/properties/geometry/oneOf/3/type",keyword:"type",params:{type:"object"},message:"must be object"};i===null?i=[Vr]:i.push(Vr),a++}var D=fr===a;if(D&&zt)zt=!1,Ke=[Ke,3];else{D&&(zt=!0,Ke=3);let Vr=a;if(a===Vr)if($e&&typeof $e=="object"&&!Array.isArray($e)){let Yr;if($e.type===void 0&&(Yr="type")||$e.coordinates===void 0&&(Yr="coordinates")){let lr={instancePath:t+"/features/"+oe+"/geometry",schemaPath:"#/properties/features/items/properties/geometry/oneOf/4/required",keyword:"required",params:{missingProperty:Yr},message:"must have required property '"+Yr+"'"};i===null?i=[lr]:i.push(lr),a++}else{if($e.type!==void 0){let lr=$e.type,In=a;if(typeof lr!="string"){let sn={instancePath:t+"/features/"+oe+"/geometry/type",schemaPath:"#/properties/features/items/properties/geometry/oneOf/4/properties/type/type",keyword:"type",params:{type:"string"},message:"must be string"};i===null?i=[sn]:i.push(sn),a++}if(lr!=="MultiPoint"){let sn={instancePath:t+"/features/"+oe+"/geometry/type",schemaPath:"#/properties/features/items/properties/geometry/oneOf/4/properties/type/enum",keyword:"enum",params:{allowedValues:Fu.properties.features.items.properties.geometry.oneOf[4].properties.type.enum},message:"must be equal to one of the allowed values"};i===null?i=[sn]:i.push(sn),a++}var ve=In===a}else var ve=!0;if(ve){if($e.coordinates!==void 0){let lr=$e.coordinates,In=a;if(a===In)if(Array.isArray(lr)){var ye=!0;let _n=lr.length;for(let tn=0;tn<_n;tn++){let ln=lr[tn],Rr=a;if(a===Rr)if(Array.isArray(ln)){if(ln.length<2){let Kr={instancePath:t+"/features/"+oe+"/geometry/coordinates/"+tn,schemaPath:"#/properties/features/items/properties/geometry/oneOf/4/properties/coordinates/items/minItems",keyword:"minItems",params:{limit:2},message:"must NOT have fewer than 2 items"};i===null?i=[Kr]:i.push(Kr),a++}else{var we=!0;let Kr=ln.length;for(let Zr=0;Zr<Kr;Zr++){let Nt=ln[Zr],Zt=a;if(!(typeof Nt=="number"&&isFinite(Nt))){let Zo={instancePath:t+"/features/"+oe+"/geometry/coordinates/"+tn+"/"+Zr,schemaPath:"#/properties/features/items/properties/geometry/oneOf/4/properties/coordinates/items/items/type",keyword:"type",params:{type:"number"},message:"must be number"};i===null?i=[Zo]:i.push(Zo),a++}var we=Zt===a;if(!we)break}}}else{let Kr={instancePath:t+"/features/"+oe+"/geometry/coordinates/"+tn,schemaPath:"#/properties/features/items/properties/geometry/oneOf/4/properties/coordinates/items/type",keyword:"type",params:{type:"array"},message:"must be array"};i===null?i=[Kr]:i.push(Kr),a++}var ye=Rr===a;if(!ye)break}}else{let _n={instancePath:t+"/features/"+oe+"/geometry/coordinates",schemaPath:"#/properties/features/items/properties/geometry/oneOf/4/properties/coordinates/type",keyword:"type",params:{type:"array"},message:"must be array"};i===null?i=[_n]:i.push(_n),a++}var ve=In===a}else var ve=!0;if(ve)if($e.bbox!==void 0){let lr=$e.bbox,In=a;if(a===In)if(Array.isArray(lr)){if(lr.length<4){let _n={instancePath:t+"/features/"+oe+"/geometry/bbox",schemaPath:"#/properties/features/items/properties/geometry/oneOf/4/properties/bbox/minItems",keyword:"minItems",params:{limit:4},message:"must NOT have fewer than 4 items"};i===null?i=[_n]:i.push(_n),a++}else{var Se=!0;let _n=lr.length;for(let tn=0;tn<_n;tn++){let ln=lr[tn],Rr=a;if(!(typeof ln=="number"&&isFinite(ln))){let Kr={instancePath:t+"/features/"+oe+"/geometry/bbox/"+tn,schemaPath:"#/properties/features/items/properties/geometry/oneOf/4/properties/bbox/items/type",keyword:"type",params:{type:"number"},message:"must be number"};i===null?i=[Kr]:i.push(Kr),a++}var Se=Rr===a;if(!Se)break}}}else{let _n={instancePath:t+"/features/"+oe+"/geometry/bbox",schemaPath:"#/properties/features/items/properties/geometry/oneOf/4/properties/bbox/type",keyword:"type",params:{type:"array"},message:"must be array"};i===null?i=[_n]:i.push(_n),a++}var ve=In===a}else var ve=!0}}}else{let Yr={instancePath:t+"/features/"+oe+"/geometry",schemaPath:"#/properties/features/items/properties/geometry/oneOf/4/type",keyword:"type",params:{type:"object"},message:"must be object"};i===null?i=[Yr]:i.push(Yr),a++}var D=Vr===a;if(D&&zt)zt=!1,Ke=[Ke,4];else{D&&(zt=!0,Ke=4);let Yr=a;if(a===Yr)if($e&&typeof $e=="object"&&!Array.isArray($e)){let In;if($e.type===void 0&&(In="type")||$e.coordinates===void 0&&(In="coordinates")){let sn={instancePath:t+"/features/"+oe+"/geometry",schemaPath:"#/properties/features/items/properties/geometry/oneOf/5/required",keyword:"required",params:{missingProperty:In},message:"must have required property '"+In+"'"};i===null?i=[sn]:i.push(sn),a++}else{if($e.type!==void 0){let sn=$e.type,_n=a;if(typeof sn!="string"){let tn={instancePath:t+"/features/"+oe+"/geometry/type",schemaPath:"#/properties/features/items/properties/geometry/oneOf/5/properties/type/type",keyword:"type",params:{type:"string"},message:"must be string"};i===null?i=[tn]:i.push(tn),a++}if(sn!=="MultiLineString"){let tn={instancePath:t+"/features/"+oe+"/geometry/type",schemaPath:"#/properties/features/items/properties/geometry/oneOf/5/properties/type/enum",keyword:"enum",params:{allowedValues:Fu.properties.features.items.properties.geometry.oneOf[5].properties.type.enum},message:"must be equal to one of the allowed values"};i===null?i=[tn]:i.push(tn),a++}var ge=_n===a}else var ge=!0;if(ge){if($e.coordinates!==void 0){let sn=$e.coordinates,_n=a;if(a===_n)if(Array.isArray(sn)){var Re=!0;let ln=sn.length;for(let Rr=0;Rr<ln;Rr++){let Ur=sn[Rr],Kr=a;if(a===Kr)if(Array.isArray(Ur)){if(Ur.length<2){let Nt={instancePath:t+"/features/"+oe+"/geometry/coordinates/"+Rr,schemaPath:"#/properties/features/items/properties/geometry/oneOf/5/properties/coordinates/items/minItems",keyword:"minItems",params:{limit:2},message:"must NOT have fewer than 2 items"};i===null?i=[Nt]:i.push(Nt),a++}else{var Je=!0;let Nt=Ur.length;for(let Zt=0;Zt<Nt;Zt++){let Ii=Ur[Zt],Zo=a;if(a===Zo)if(Array.isArray(Ii)){if(Ii.length<2){let qo={instancePath:t+"/features/"+oe+"/geometry/coordinates/"+Rr+"/"+Zt,schemaPath:"#/properties/features/items/properties/geometry/oneOf/5/properties/coordinates/items/items/minItems",keyword:"minItems",params:{limit:2},message:"must NOT have fewer than 2 items"};i===null?i=[qo]:i.push(qo),a++}else{var tt=!0;let qo=Ii.length;for(let Hl=0;Hl<qo;Hl++){let Ls=Ii[Hl],ll=a;if(!(typeof Ls=="number"&&isFinite(Ls))){let Qn={instancePath:t+"/features/"+oe+"/geometry/coordinates/"+Rr+"/"+Zt+"/"+Hl,schemaPath:"#/properties/features/items/properties/geometry/oneOf/5/properties/coordinates/items/items/items/type",keyword:"type",params:{type:"number"},message:"must be number"};i===null?i=[Qn]:i.push(Qn),a++}var tt=ll===a;if(!tt)break}}}else{let qo={instancePath:t+"/features/"+oe+"/geometry/coordinates/"+Rr+"/"+Zt,schemaPath:"#/properties/features/items/properties/geometry/oneOf/5/properties/coordinates/items/items/type",keyword:"type",params:{type:"array"},message:"must be array"};i===null?i=[qo]:i.push(qo),a++}var Je=Zo===a;if(!Je)break}}}else{let Nt={instancePath:t+"/features/"+oe+"/geometry/coordinates/"+Rr,schemaPath:"#/properties/features/items/properties/geometry/oneOf/5/properties/coordinates/items/type",keyword:"type",params:{type:"array"},message:"must be array"};i===null?i=[Nt]:i.push(Nt),a++}var Re=Kr===a;if(!Re)break}}else{let ln={instancePath:t+"/features/"+oe+"/geometry/coordinates",schemaPath:"#/properties/features/items/properties/geometry/oneOf/5/properties/coordinates/type",keyword:"type",params:{type:"array"},message:"must be array"};i===null?i=[ln]:i.push(ln),a++}var ge=_n===a}else var ge=!0;if(ge)if($e.bbox!==void 0){let sn=$e.bbox,_n=a;if(a===_n)if(Array.isArray(sn)){if(sn.length<4){let ln={instancePath:t+"/features/"+oe+"/geometry/bbox",schemaPath:"#/properties/features/items/properties/geometry/oneOf/5/properties/bbox/minItems",keyword:"minItems",params:{limit:4},message:"must NOT have fewer than 4 items"};i===null?i=[ln]:i.push(ln),a++}else{var Et=!0;let ln=sn.length;for(let Rr=0;Rr<ln;Rr++){let Ur=sn[Rr],Kr=a;if(!(typeof Ur=="number"&&isFinite(Ur))){let Nt={instancePath:t+"/features/"+oe+"/geometry/bbox/"+Rr,schemaPath:"#/properties/features/items/properties/geometry/oneOf/5/properties/bbox/items/type",keyword:"type",params:{type:"number"},message:"must be number"};i===null?i=[Nt]:i.push(Nt),a++}var Et=Kr===a;if(!Et)break}}}else{let ln={instancePath:t+"/features/"+oe+"/geometry/bbox",schemaPath:"#/properties/features/items/properties/geometry/oneOf/5/properties/bbox/type",keyword:"type",params:{type:"array"},message:"must be array"};i===null?i=[ln]:i.push(ln),a++}var ge=_n===a}else var ge=!0}}}else{let In={instancePath:t+"/features/"+oe+"/geometry",schemaPath:"#/properties/features/items/properties/geometry/oneOf/5/type",keyword:"type",params:{type:"object"},message:"must be object"};i===null?i=[In]:i.push(In),a++}var D=Yr===a;if(D&&zt)zt=!1,Ke=[Ke,5];else{D&&(zt=!0,Ke=5);let In=a;if(a===In)if($e&&typeof $e=="object"&&!Array.isArray($e)){let _n;if($e.type===void 0&&(_n="type")||$e.coordinates===void 0&&(_n="coordinates")){let tn={instancePath:t+"/features/"+oe+"/geometry",schemaPath:"#/properties/features/items/properties/geometry/oneOf/6/required",keyword:"required",params:{missingProperty:_n},message:"must have required property '"+_n+"'"};i===null?i=[tn]:i.push(tn),a++}else{if($e.type!==void 0){let tn=$e.type,ln=a;if(typeof tn!="string"){let Rr={instancePath:t+"/features/"+oe+"/geometry/type",schemaPath:"#/properties/features/items/properties/geometry/oneOf/6/properties/type/type",keyword:"type",params:{type:"string"},message:"must be string"};i===null?i=[Rr]:i.push(Rr),a++}if(tn!=="MultiPolygon"){let Rr={instancePath:t+"/features/"+oe+"/geometry/type",schemaPath:"#/properties/features/items/properties/geometry/oneOf/6/properties/type/enum",keyword:"enum",params:{allowedValues:Fu.properties.features.items.properties.geometry.oneOf[6].properties.type.enum},message:"must be equal to one of the allowed values"};i===null?i=[Rr]:i.push(Rr),a++}var Xe=ln===a}else var Xe=!0;if(Xe){if($e.coordinates!==void 0){let tn=$e.coordinates,ln=a;if(a===ln)if(Array.isArray(tn)){var Pt=!0;let Ur=tn.length;for(let Kr=0;Kr<Ur;Kr++){let Zr=tn[Kr],Nt=a;if(a===Nt)if(Array.isArray(Zr)){var Lt=!0;let Ii=Zr.length;for(let Zo=0;Zo<Ii;Zo++){let io=Zr[Zo],qo=a;if(a===qo)if(Array.isArray(io)){if(io.length<4){let Ls={instancePath:t+"/features/"+oe+"/geometry/coordinates/"+Kr+"/"+Zo,schemaPath:"#/properties/features/items/properties/geometry/oneOf/6/properties/coordinates/items/items/minItems",keyword:"minItems",params:{limit:4},message:"must NOT have fewer than 4 items"};i===null?i=[Ls]:i.push(Ls),a++}else{var Gt=!0;let Ls=io.length;for(let ll=0;ll<Ls;ll++){let Yo=io[ll],Qn=a;if(a===Qn)if(Array.isArray(Yo)){if(Yo.length<2){let lo={instancePath:t+"/features/"+oe+"/geometry/coordinates/"+Kr+"/"+Zo+"/"+ll,schemaPath:"#/properties/features/items/properties/geometry/oneOf/6/properties/coordinates/items/items/items/minItems",keyword:"minItems",params:{limit:2},message:"must NOT have fewer than 2 items"};i===null?i=[lo]:i.push(lo),a++}else{var nt=!0;let lo=Yo.length;for(let Gr=0;Gr<lo;Gr++){let hn=Yo[Gr],Xr=a;if(!(typeof hn=="number"&&isFinite(hn))){let zn={instancePath:t+"/features/"+oe+"/geometry/coordinates/"+Kr+"/"+Zo+"/"+ll+"/"+Gr,schemaPath:"#/properties/features/items/properties/geometry/oneOf/6/properties/coordinates/items/items/items/items/type",keyword:"type",params:{type:"number"},message:"must be number"};i===null?i=[zn]:i.push(zn),a++}var nt=Xr===a;if(!nt)break}}}else{let lo={instancePath:t+"/features/"+oe+"/geometry/coordinates/"+Kr+"/"+Zo+"/"+ll,schemaPath:"#/properties/features/items/properties/geometry/oneOf/6/properties/coordinates/items/items/items/type",keyword:"type",params:{type:"array"},message:"must be array"};i===null?i=[lo]:i.push(lo),a++}var Gt=Qn===a;if(!Gt)break}}}else{let Ls={instancePath:t+"/features/"+oe+"/geometry/coordinates/"+Kr+"/"+Zo,schemaPath:"#/properties/features/items/properties/geometry/oneOf/6/properties/coordinates/items/items/type",keyword:"type",params:{type:"array"},message:"must be array"};i===null?i=[Ls]:i.push(Ls),a++}var Lt=qo===a;if(!Lt)break}}else{let Ii={instancePath:t+"/features/"+oe+"/geometry/coordinates/"+Kr,schemaPath:"#/properties/features/items/properties/geometry/oneOf/6/properties/coordinates/items/type",keyword:"type",params:{type:"array"},message:"must be array"};i===null?i=[Ii]:i.push(Ii),a++}var Pt=Nt===a;if(!Pt)break}}else{let Ur={instancePath:t+"/features/"+oe+"/geometry/coordinates",schemaPath:"#/properties/features/items/properties/geometry/oneOf/6/properties/coordinates/type",keyword:"type",params:{type:"array"},message:"must be array"};i===null?i=[Ur]:i.push(Ur),a++}var Xe=ln===a}else var Xe=!0;if(Xe)if($e.bbox!==void 0){let tn=$e.bbox,ln=a;if(a===ln)if(Array.isArray(tn)){if(tn.length<4){let Ur={instancePath:t+"/features/"+oe+"/geometry/bbox",schemaPath:"#/properties/features/items/properties/geometry/oneOf/6/properties/bbox/minItems",keyword:"minItems",params:{limit:4},message:"must NOT have fewer than 4 items"};i===null?i=[Ur]:i.push(Ur),a++}else{var ct=!0;let Ur=tn.length;for(let Kr=0;Kr<Ur;Kr++){let Zr=tn[Kr],Nt=a;if(!(typeof Zr=="number"&&isFinite(Zr))){let Ii={instancePath:t+"/features/"+oe+"/geometry/bbox/"+Kr,schemaPath:"#/properties/features/items/properties/geometry/oneOf/6/properties/bbox/items/type",keyword:"type",params:{type:"number"},message:"must be number"};i===null?i=[Ii]:i.push(Ii),a++}var ct=Nt===a;if(!ct)break}}}else{let Ur={instancePath:t+"/features/"+oe+"/geometry/bbox",schemaPath:"#/properties/features/items/properties/geometry/oneOf/6/properties/bbox/type",keyword:"type",params:{type:"array"},message:"must be array"};i===null?i=[Ur]:i.push(Ur),a++}var Xe=ln===a}else var Xe=!0}}}else{let _n={instancePath:t+"/features/"+oe+"/geometry",schemaPath:"#/properties/features/items/properties/geometry/oneOf/6/type",keyword:"type",params:{type:"object"},message:"must be object"};i===null?i=[_n]:i.push(_n),a++}var D=In===a;if(D&&zt)zt=!1,Ke=[Ke,6];else{D&&(zt=!0,Ke=6);let _n=a;if(a===_n)if($e&&typeof $e=="object"&&!Array.isArray($e)){let ln;if($e.type===void 0&&(ln="type")||$e.geometries===void 0&&(ln="geometries")){let Rr={instancePath:t+"/features/"+oe+"/geometry",schemaPath:"#/properties/features/items/properties/geometry/oneOf/7/required",keyword:"required",params:{missingProperty:ln},message:"must have required property '"+ln+"'"};i===null?i=[Rr]:i.push(Rr),a++}else{if($e.type!==void 0){let Rr=$e.type,Ur=a;if(typeof Rr!="string"){let Kr={instancePath:t+"/features/"+oe+"/geometry/type",schemaPath:"#/properties/features/items/properties/geometry/oneOf/7/properties/type/type",keyword:"type",params:{type:"string"},message:"must be string"};i===null?i=[Kr]:i.push(Kr),a++}if(Rr!=="GeometryCollection"){let Kr={instancePath:t+"/features/"+oe+"/geometry/type",schemaPath:"#/properties/features/items/properties/geometry/oneOf/7/properties/type/enum",keyword:"enum",params:{allowedValues:Fu.properties.features.items.properties.geometry.oneOf[7].properties.type.enum},message:"must be equal to one of the allowed values"};i===null?i=[Kr]:i.push(Kr),a++}var _t=Ur===a}else var _t=!0;if(_t){if($e.geometries!==void 0){let Rr=$e.geometries,Ur=a;if(a===Ur)if(Array.isArray(Rr)){var We=!0;let Zr=Rr.length;for(let Nt=0;Nt<Zr;Nt++){let Zt=Rr[Nt],Ii=a,Zo=a,io=!1,qo=null,Hl=a;if(a===Hl)if(Zt&&typeof Zt=="object"&&!Array.isArray(Zt)){let Yo;if(Zt.type===void 0&&(Yo="type")||Zt.coordinates===void 0&&(Yo="coordinates")){let Qn={instancePath:t+"/features/"+oe+"/geometry/geometries/"+Nt,schemaPath:"#/properties/features/items/properties/geometry/oneOf/7/properties/geometries/items/oneOf/0/required",keyword:"required",params:{missingProperty:Yo},message:"must have required property '"+Yo+"'"};i===null?i=[Qn]:i.push(Qn),a++}else{if(Zt.type!==void 0){let Qn=Zt.type,ei=a;if(typeof Qn!="string"){let lo={instancePath:t+"/features/"+oe+"/geometry/geometries/"+Nt+"/type",schemaPath:"#/properties/features/items/properties/geometry/oneOf/7/properties/geometries/items/oneOf/0/properties/type/type",keyword:"type",params:{type:"string"},message:"must be string"};i===null?i=[lo]:i.push(lo),a++}if(Qn!=="Point"){let lo={instancePath:t+"/features/"+oe+"/geometry/geometries/"+Nt+"/type",schemaPath:"#/properties/features/items/properties/geometry/oneOf/7/properties/geometries/items/oneOf/0/properties/type/enum",keyword:"enum",params:{allowedValues:Fu.properties.features.items.properties.geometry.oneOf[7].properties.geometries.items.oneOf[0].properties.type.enum},message:"must be equal to one of the allowed values"};i===null?i=[lo]:i.push(lo),a++}var De=ei===a}else var De=!0;if(De){if(Zt.coordinates!==void 0){let Qn=Zt.coordinates,ei=a;if(a===ei)if(Array.isArray(Qn)){if(Qn.length<2){let Gr={instancePath:t+"/features/"+oe+"/geometry/geometries/"+Nt+"/coordinates",schemaPath:"#/properties/features/items/properties/geometry/oneOf/7/properties/geometries/items/oneOf/0/properties/coordinates/minItems",keyword:"minItems",params:{limit:2},message:"must NOT have fewer than 2 items"};i===null?i=[Gr]:i.push(Gr),a++}else{var Qe=!0;let Gr=Qn.length;for(let hn=0;hn<Gr;hn++){let Xr=Qn[hn],bn=a;if(!(typeof Xr=="number"&&isFinite(Xr))){let Nr={instancePath:t+"/features/"+oe+"/geometry/geometries/"+Nt+"/coordinates/"+hn,schemaPath:"#/properties/features/items/properties/geometry/oneOf/7/properties/geometries/items/oneOf/0/properties/coordinates/items/type",keyword:"type",params:{type:"number"},message:"must be number"};i===null?i=[Nr]:i.push(Nr),a++}var Qe=bn===a;if(!Qe)break}}}else{let Gr={instancePath:t+"/features/"+oe+"/geometry/geometries/"+Nt+"/coordinates",schemaPath:"#/properties/features/items/properties/geometry/oneOf/7/properties/geometries/items/oneOf/0/properties/coordinates/type",keyword:"type",params:{type:"array"},message:"must be array"};i===null?i=[Gr]:i.push(Gr),a++}var De=ei===a}else var De=!0;if(De)if(Zt.bbox!==void 0){let Qn=Zt.bbox,ei=a;if(a===ei)if(Array.isArray(Qn)){if(Qn.length<4){let Gr={instancePath:t+"/features/"+oe+"/geometry/geometries/"+Nt+"/bbox",schemaPath:"#/properties/features/items/properties/geometry/oneOf/7/properties/geometries/items/oneOf/0/properties/bbox/minItems",keyword:"minItems",params:{limit:4},message:"must NOT have fewer than 4 items"};i===null?i=[Gr]:i.push(Gr),a++}else{var Ge=!0;let Gr=Qn.length;for(let hn=0;hn<Gr;hn++){let Xr=Qn[hn],bn=a;if(!(typeof Xr=="number"&&isFinite(Xr))){let Nr={instancePath:t+"/features/"+oe+"/geometry/geometries/"+Nt+"/bbox/"+hn,schemaPath:"#/properties/features/items/properties/geometry/oneOf/7/properties/geometries/items/oneOf/0/properties/bbox/items/type",keyword:"type",params:{type:"number"},message:"must be number"};i===null?i=[Nr]:i.push(Nr),a++}var Ge=bn===a;if(!Ge)break}}}else{let Gr={instancePath:t+"/features/"+oe+"/geometry/geometries/"+Nt+"/bbox",schemaPath:"#/properties/features/items/properties/geometry/oneOf/7/properties/geometries/items/oneOf/0/properties/bbox/type",keyword:"type",params:{type:"array"},message:"must be array"};i===null?i=[Gr]:i.push(Gr),a++}var De=ei===a}else var De=!0}}}else{let Yo={instancePath:t+"/features/"+oe+"/geometry/geometries/"+Nt,schemaPath:"#/properties/features/items/properties/geometry/oneOf/7/properties/geometries/items/oneOf/0/type",keyword:"type",params:{type:"object"},message:"must be object"};i===null?i=[Yo]:i.push(Yo),a++}var Ot=Hl===a;Ot&&(io=!0,qo=0);let Ls=a;if(a===Ls)if(Zt&&typeof Zt=="object"&&!Array.isArray(Zt)){let Yo;if(Zt.type===void 0&&(Yo="type")||Zt.coordinates===void 0&&(Yo="coordinates")){let Qn={instancePath:t+"/features/"+oe+"/geometry/geometries/"+Nt,schemaPath:"#/properties/features/items/properties/geometry/oneOf/7/properties/geometries/items/oneOf/1/required",keyword:"required",params:{missingProperty:Yo},message:"must have required property '"+Yo+"'"};i===null?i=[Qn]:i.push(Qn),a++}else{if(Zt.type!==void 0){let Qn=Zt.type,ei=a;if(typeof Qn!="string"){let lo={instancePath:t+"/features/"+oe+"/geometry/geometries/"+Nt+"/type",schemaPath:"#/properties/features/items/properties/geometry/oneOf/7/properties/geometries/items/oneOf/1/properties/type/type",keyword:"type",params:{type:"string"},message:"must be string"};i===null?i=[lo]:i.push(lo),a++}if(Qn!=="LineString"){let lo={instancePath:t+"/features/"+oe+"/geometry/geometries/"+Nt+"/type",schemaPath:"#/properties/features/items/properties/geometry/oneOf/7/properties/geometries/items/oneOf/1/properties/type/enum",keyword:"enum",params:{allowedValues:Fu.properties.features.items.properties.geometry.oneOf[7].properties.geometries.items.oneOf[1].properties.type.enum},message:"must be equal to one of the allowed values"};i===null?i=[lo]:i.push(lo),a++}var st=ei===a}else var st=!0;if(st){if(Zt.coordinates!==void 0){let Qn=Zt.coordinates,ei=a;if(a===ei)if(Array.isArray(Qn)){if(Qn.length<2){let Gr={instancePath:t+"/features/"+oe+"/geometry/geometries/"+Nt+"/coordinates",schemaPath:"#/properties/features/items/properties/geometry/oneOf/7/properties/geometries/items/oneOf/1/properties/coordinates/minItems",keyword:"minItems",params:{limit:2},message:"must NOT have fewer than 2 items"};i===null?i=[Gr]:i.push(Gr),a++}else{var pt=!0;let Gr=Qn.length;for(let hn=0;hn<Gr;hn++){let Xr=Qn[hn],bn=a;if(a===bn)if(Array.isArray(Xr)){if(Xr.length<2){let Nr={instancePath:t+"/features/"+oe+"/geometry/geometries/"+Nt+"/coordinates/"+hn,schemaPath:"#/properties/features/items/properties/geometry/oneOf/7/properties/geometries/items/oneOf/1/properties/coordinates/items/minItems",keyword:"minItems",params:{limit:2},message:"must NOT have fewer than 2 items"};i===null?i=[Nr]:i.push(Nr),a++}else{var Rt=!0;let Nr=Xr.length;for(let ao=0;ao<Nr;ao++){let Hn=Xr[ao],ho=a;if(!(typeof Hn=="number"&&isFinite(Hn))){let ha={instancePath:t+"/features/"+oe+"/geometry/geometries/"+Nt+"/coordinates/"+hn+"/"+ao,schemaPath:"#/properties/features/items/properties/geometry/oneOf/7/properties/geometries/items/oneOf/1/properties/coordinates/items/items/type",keyword:"type",params:{type:"number"},message:"must be number"};i===null?i=[ha]:i.push(ha),a++}var Rt=ho===a;if(!Rt)break}}}else{let Nr={instancePath:t+"/features/"+oe+"/geometry/geometries/"+Nt+"/coordinates/"+hn,schemaPath:"#/properties/features/items/properties/geometry/oneOf/7/properties/geometries/items/oneOf/1/properties/coordinates/items/type",keyword:"type",params:{type:"array"},message:"must be array"};i===null?i=[Nr]:i.push(Nr),a++}var pt=bn===a;if(!pt)break}}}else{let Gr={instancePath:t+"/features/"+oe+"/geometry/geometries/"+Nt+"/coordinates",schemaPath:"#/properties/features/items/properties/geometry/oneOf/7/properties/geometries/items/oneOf/1/properties/coordinates/type",keyword:"type",params:{type:"array"},message:"must be array"};i===null?i=[Gr]:i.push(Gr),a++}var st=ei===a}else var st=!0;if(st)if(Zt.bbox!==void 0){let Qn=Zt.bbox,ei=a;if(a===ei)if(Array.isArray(Qn)){if(Qn.length<4){let Gr={instancePath:t+"/features/"+oe+"/geometry/geometries/"+Nt+"/bbox",schemaPath:"#/properties/features/items/properties/geometry/oneOf/7/properties/geometries/items/oneOf/1/properties/bbox/minItems",keyword:"minItems",params:{limit:4},message:"must NOT have fewer than 4 items"};i===null?i=[Gr]:i.push(Gr),a++}else{var St=!0;let Gr=Qn.length;for(let hn=0;hn<Gr;hn++){let Xr=Qn[hn],bn=a;if(!(typeof Xr=="number"&&isFinite(Xr))){let Nr={instancePath:t+"/features/"+oe+"/geometry/geometries/"+Nt+"/bbox/"+hn,schemaPath:"#/properties/features/items/properties/geometry/oneOf/7/properties/geometries/items/oneOf/1/properties/bbox/items/type",keyword:"type",params:{type:"number"},message:"must be number"};i===null?i=[Nr]:i.push(Nr),a++}var St=bn===a;if(!St)break}}}else{let Gr={instancePath:t+"/features/"+oe+"/geometry/geometries/"+Nt+"/bbox",schemaPath:"#/properties/features/items/properties/geometry/oneOf/7/properties/geometries/items/oneOf/1/properties/bbox/type",keyword:"type",params:{type:"array"},message:"must be array"};i===null?i=[Gr]:i.push(Gr),a++}var st=ei===a}else var st=!0}}}else{let Yo={instancePath:t+"/features/"+oe+"/geometry/geometries/"+Nt,schemaPath:"#/properties/features/items/properties/geometry/oneOf/7/properties/geometries/items/oneOf/1/type",keyword:"type",params:{type:"object"},message:"must be object"};i===null?i=[Yo]:i.push(Yo),a++}var Ot=Ls===a;if(Ot&&io)io=!1,qo=[qo,1];else{Ot&&(io=!0,qo=1);let Yo=a;if(a===Yo)if(Zt&&typeof Zt=="object"&&!Array.isArray(Zt)){let ei;if(Zt.type===void 0&&(ei="type")||Zt.coordinates===void 0&&(ei="coordinates")){let lo={instancePath:t+"/features/"+oe+"/geometry/geometries/"+Nt,schemaPath:"#/properties/features/items/properties/geometry/oneOf/7/properties/geometries/items/oneOf/2/required",keyword:"required",params:{missingProperty:ei},message:"must have required property '"+ei+"'"};i===null?i=[lo]:i.push(lo),a++}else{if(Zt.type!==void 0){let lo=Zt.type,Gr=a;if(typeof lo!="string"){let hn={instancePath:t+"/features/"+oe+"/geometry/geometries/"+Nt+"/type",schemaPath:"#/properties/features/items/properties/geometry/oneOf/7/properties/geometries/items/oneOf/2/properties/type/type",keyword:"type",params:{type:"string"},message:"must be string"};i===null?i=[hn]:i.push(hn),a++}if(lo!=="Polygon"){let hn={instancePath:t+"/features/"+oe+"/geometry/geometries/"+Nt+"/type",schemaPath:"#/properties/features/items/properties/geometry/oneOf/7/properties/geometries/items/oneOf/2/properties/type/enum",keyword:"enum",params:{allowedValues:Fu.properties.features.items.properties.geometry.oneOf[7].properties.geometries.items.oneOf[2].properties.type.enum},message:"must be equal to one of the allowed values"};i===null?i=[hn]:i.push(hn),a++}var sr=Gr===a}else var sr=!0;if(sr){if(Zt.coordinates!==void 0){let lo=Zt.coordinates,Gr=a;if(a===Gr)if(Array.isArray(lo)){var Ft=!0;let Xr=lo.length;for(let bn=0;bn<Xr;bn++){let zn=lo[bn],Nr=a;if(a===Nr)if(Array.isArray(zn)){if(zn.length<4){let Hn={instancePath:t+"/features/"+oe+"/geometry/geometries/"+Nt+"/coordinates/"+bn,schemaPath:"#/properties/features/items/properties/geometry/oneOf/7/properties/geometries/items/oneOf/2/properties/coordinates/items/minItems",keyword:"minItems",params:{limit:4},message:"must NOT have fewer than 4 items"};i===null?i=[Hn]:i.push(Hn),a++}else{var Jt=!0;let Hn=zn.length;for(let ho=0;ho<Hn;ho++){let Bn=zn[ho],ha=a;if(a===ha)if(Array.isArray(Bn)){if(Bn.length<2){let nn={instancePath:t+"/features/"+oe+"/geometry/geometries/"+Nt+"/coordinates/"+bn+"/"+ho,schemaPath:"#/properties/features/items/properties/geometry/oneOf/7/properties/geometries/items/oneOf/2/properties/coordinates/items/items/minItems",keyword:"minItems",params:{limit:2},message:"must NOT have fewer than 2 items"};i===null?i=[nn]:i.push(nn),a++}else{var dr=!0;let nn=Bn.length;for(let ki=0;ki<nn;ki++){let wo=Bn[ki],Wl=a;if(!(typeof wo=="number"&&isFinite(wo))){let xu={instancePath:t+"/features/"+oe+"/geometry/geometries/"+Nt+"/coordinates/"+bn+"/"+ho+"/"+ki,schemaPath:"#/properties/features/items/properties/geometry/oneOf/7/properties/geometries/items/oneOf/2/properties/coordinates/items/items/items/type",keyword:"type",params:{type:"number"},message:"must be number"};i===null?i=[xu]:i.push(xu),a++}var dr=Wl===a;if(!dr)break}}}else{let nn={instancePath:t+"/features/"+oe+"/geometry/geometries/"+Nt+"/coordinates/"+bn+"/"+ho,schemaPath:"#/properties/features/items/properties/geometry/oneOf/7/properties/geometries/items/oneOf/2/properties/coordinates/items/items/type",keyword:"type",params:{type:"array"},message:"must be array"};i===null?i=[nn]:i.push(nn),a++}var Jt=ha===a;if(!Jt)break}}}else{let Hn={instancePath:t+"/features/"+oe+"/geometry/geometries/"+Nt+"/coordinates/"+bn,schemaPath:"#/properties/features/items/properties/geometry/oneOf/7/properties/geometries/items/oneOf/2/properties/coordinates/items/type",keyword:"type",params:{type:"array"},message:"must be array"};i===null?i=[Hn]:i.push(Hn),a++}var Ft=Nr===a;if(!Ft)break}}else{let Xr={instancePath:t+"/features/"+oe+"/geometry/geometries/"+Nt+"/coordinates",schemaPath:"#/properties/features/items/properties/geometry/oneOf/7/properties/geometries/items/oneOf/2/properties/coordinates/type",keyword:"type",params:{type:"array"},message:"must be array"};i===null?i=[Xr]:i.push(Xr),a++}var sr=Gr===a}else var sr=!0;if(sr)if(Zt.bbox!==void 0){let lo=Zt.bbox,Gr=a;if(a===Gr)if(Array.isArray(lo)){if(lo.length<4){let Xr={instancePath:t+"/features/"+oe+"/geometry/geometries/"+Nt+"/bbox",schemaPath:"#/properties/features/items/properties/geometry/oneOf/7/properties/geometries/items/oneOf/2/properties/bbox/minItems",keyword:"minItems",params:{limit:4},message:"must NOT have fewer than 4 items"};i===null?i=[Xr]:i.push(Xr),a++}else{var Er=!0;let Xr=lo.length;for(let bn=0;bn<Xr;bn++){let zn=lo[bn],Nr=a;if(!(typeof zn=="number"&&isFinite(zn))){let Hn={instancePath:t+"/features/"+oe+"/geometry/geometries/"+Nt+"/bbox/"+bn,schemaPath:"#/properties/features/items/properties/geometry/oneOf/7/properties/geometries/items/oneOf/2/properties/bbox/items/type",keyword:"type",params:{type:"number"},message:"must be number"};i===null?i=[Hn]:i.push(Hn),a++}var Er=Nr===a;if(!Er)break}}}else{let Xr={instancePath:t+"/features/"+oe+"/geometry/geometries/"+Nt+"/bbox",schemaPath:"#/properties/features/items/properties/geometry/oneOf/7/properties/geometries/items/oneOf/2/properties/bbox/type",keyword:"type",params:{type:"array"},message:"must be array"};i===null?i=[Xr]:i.push(Xr),a++}var sr=Gr===a}else var sr=!0}}}else{let ei={instancePath:t+"/features/"+oe+"/geometry/geometries/"+Nt,schemaPath:"#/properties/features/items/properties/geometry/oneOf/7/properties/geometries/items/oneOf/2/type",keyword:"type",params:{type:"object"},message:"must be object"};i===null?i=[ei]:i.push(ei),a++}var Ot=Yo===a;if(Ot&&io)io=!1,qo=[qo,2];else{Ot&&(io=!0,qo=2);let ei=a;if(a===ei)if(Zt&&typeof Zt=="object"&&!Array.isArray(Zt)){let Gr;if(Zt.type===void 0&&(Gr="type")||Zt.coordinates===void 0&&(Gr="coordinates")){let hn={instancePath:t+"/features/"+oe+"/geometry/geometries/"+Nt,schemaPath:"#/properties/features/items/properties/geometry/oneOf/7/properties/geometries/items/oneOf/3/required",keyword:"required",params:{missingProperty:Gr},message:"must have required property '"+Gr+"'"};i===null?i=[hn]:i.push(hn),a++}else{if(Zt.type!==void 0){let hn=Zt.type,Xr=a;if(typeof hn!="string"){let bn={instancePath:t+"/features/"+oe+"/geometry/geometries/"+Nt+"/type",schemaPath:"#/properties/features/items/properties/geometry/oneOf/7/properties/geometries/items/oneOf/3/properties/type/type",keyword:"type",params:{type:"string"},message:"must be string"};i===null?i=[bn]:i.push(bn),a++}if(hn!=="MultiPoint"){let bn={instancePath:t+"/features/"+oe+"/geometry/geometries/"+Nt+"/type",schemaPath:"#/properties/features/items/properties/geometry/oneOf/7/properties/geometries/items/oneOf/3/properties/type/enum",keyword:"enum",params:{allowedValues:Fu.properties.features.items.properties.geometry.oneOf[7].properties.geometries.items.oneOf[3].properties.type.enum},message:"must be equal to one of the allowed values"};i===null?i=[bn]:i.push(bn),a++}var Cr=Xr===a}else var Cr=!0;if(Cr){if(Zt.coordinates!==void 0){let hn=Zt.coordinates,Xr=a;if(a===Xr)if(Array.isArray(hn)){var Tr=!0;let zn=hn.length;for(let Nr=0;Nr<zn;Nr++){let ao=hn[Nr],Hn=a;if(a===Hn)if(Array.isArray(ao)){if(ao.length<2){let Bn={instancePath:t+"/features/"+oe+"/geometry/geometries/"+Nt+"/coordinates/"+Nr,schemaPath:"#/properties/features/items/properties/geometry/oneOf/7/properties/geometries/items/oneOf/3/properties/coordinates/items/minItems",keyword:"minItems",params:{limit:2},message:"must NOT have fewer than 2 items"};i===null?i=[Bn]:i.push(Bn),a++}else{var qr=!0;let Bn=ao.length;for(let ha=0;ha<Bn;ha++){let bo=ao[ha],nn=a;if(!(typeof bo=="number"&&isFinite(bo))){let wo={instancePath:t+"/features/"+oe+"/geometry/geometries/"+Nt+"/coordinates/"+Nr+"/"+ha,schemaPath:"#/properties/features/items/properties/geometry/oneOf/7/properties/geometries/items/oneOf/3/properties/coordinates/items/items/type",keyword:"type",params:{type:"number"},message:"must be number"};i===null?i=[wo]:i.push(wo),a++}var qr=nn===a;if(!qr)break}}}else{let Bn={instancePath:t+"/features/"+oe+"/geometry/geometries/"+Nt+"/coordinates/"+Nr,schemaPath:"#/properties/features/items/properties/geometry/oneOf/7/properties/geometries/items/oneOf/3/properties/coordinates/items/type",keyword:"type",params:{type:"array"},message:"must be array"};i===null?i=[Bn]:i.push(Bn),a++}var Tr=Hn===a;if(!Tr)break}}else{let zn={instancePath:t+"/features/"+oe+"/geometry/geometries/"+Nt+"/coordinates",schemaPath:"#/properties/features/items/properties/geometry/oneOf/7/properties/geometries/items/oneOf/3/properties/coordinates/type",keyword:"type",params:{type:"array"},message:"must be array"};i===null?i=[zn]:i.push(zn),a++}var Cr=Xr===a}else var Cr=!0;if(Cr)if(Zt.bbox!==void 0){let hn=Zt.bbox,Xr=a;if(a===Xr)if(Array.isArray(hn)){if(hn.length<4){let zn={instancePath:t+"/features/"+oe+"/geometry/geometries/"+Nt+"/bbox",schemaPath:"#/properties/features/items/properties/geometry/oneOf/7/properties/geometries/items/oneOf/3/properties/bbox/minItems",keyword:"minItems",params:{limit:4},message:"must NOT have fewer than 4 items"};i===null?i=[zn]:i.push(zn),a++}else{var Ce=!0;let zn=hn.length;for(let Nr=0;Nr<zn;Nr++){let ao=hn[Nr],Hn=a;if(!(typeof ao=="number"&&isFinite(ao))){let Bn={instancePath:t+"/features/"+oe+"/geometry/geometries/"+Nt+"/bbox/"+Nr,schemaPath:"#/properties/features/items/properties/geometry/oneOf/7/properties/geometries/items/oneOf/3/properties/bbox/items/type",keyword:"type",params:{type:"number"},message:"must be number"};i===null?i=[Bn]:i.push(Bn),a++}var Ce=Hn===a;if(!Ce)break}}}else{let zn={instancePath:t+"/features/"+oe+"/geometry/geometries/"+Nt+"/bbox",schemaPath:"#/properties/features/items/properties/geometry/oneOf/7/properties/geometries/items/oneOf/3/properties/bbox/type",keyword:"type",params:{type:"array"},message:"must be array"};i===null?i=[zn]:i.push(zn),a++}var Cr=Xr===a}else var Cr=!0}}}else{let Gr={instancePath:t+"/features/"+oe+"/geometry/geometries/"+Nt,schemaPath:"#/properties/features/items/properties/geometry/oneOf/7/properties/geometries/items/oneOf/3/type",keyword:"type",params:{type:"object"},message:"must be object"};i===null?i=[Gr]:i.push(Gr),a++}var Ot=ei===a;if(Ot&&io)io=!1,qo=[qo,3];else{Ot&&(io=!0,qo=3);let Gr=a;if(a===Gr)if(Zt&&typeof Zt=="object"&&!Array.isArray(Zt)){let Xr;if(Zt.type===void 0&&(Xr="type")||Zt.coordinates===void 0&&(Xr="coordinates")){let bn={instancePath:t+"/features/"+oe+"/geometry/geometries/"+Nt,schemaPath:"#/properties/features/items/properties/geometry/oneOf/7/properties/geometries/items/oneOf/4/required",keyword:"required",params:{missingProperty:Xr},message:"must have required property '"+Xr+"'"};i===null?i=[bn]:i.push(bn),a++}else{if(Zt.type!==void 0){let bn=Zt.type,zn=a;if(typeof bn!="string"){let Nr={instancePath:t+"/features/"+oe+"/geometry/geometries/"+Nt+"/type",schemaPath:"#/properties/features/items/properties/geometry/oneOf/7/properties/geometries/items/oneOf/4/properties/type/type",keyword:"type",params:{type:"string"},message:"must be string"};i===null?i=[Nr]:i.push(Nr),a++}if(bn!=="MultiLineString"){let Nr={instancePath:t+"/features/"+oe+"/geometry/geometries/"+Nt+"/type",schemaPath:"#/properties/features/items/properties/geometry/oneOf/7/properties/geometries/items/oneOf/4/properties/type/enum",keyword:"enum",params:{allowedValues:Fu.properties.features.items.properties.geometry.oneOf[7].properties.geometries.items.oneOf[4].properties.type.enum},message:"must be equal to one of the allowed values"};i===null?i=[Nr]:i.push(Nr),a++}var Ze=zn===a}else var Ze=!0;if(Ze){if(Zt.coordinates!==void 0){let bn=Zt.coordinates,zn=a;if(a===zn)if(Array.isArray(bn)){var et=!0;let ao=bn.length;for(let Hn=0;Hn<ao;Hn++){let ho=bn[Hn],Bn=a;if(a===Bn)if(Array.isArray(ho)){if(ho.length<2){let bo={instancePath:t+"/features/"+oe+"/geometry/geometries/"+Nt+"/coordinates/"+Hn,schemaPath:"#/properties/features/items/properties/geometry/oneOf/7/properties/geometries/items/oneOf/4/properties/coordinates/items/minItems",keyword:"minItems",params:{limit:2},message:"must NOT have fewer than 2 items"};i===null?i=[bo]:i.push(bo),a++}else{var qt=!0;let bo=ho.length;for(let nn=0;nn<bo;nn++){let ki=ho[nn],wo=a;if(a===wo)if(Array.isArray(ki)){if(ki.length<2){let mn={instancePath:t+"/features/"+oe+"/geometry/geometries/"+Nt+"/coordinates/"+Hn+"/"+nn,schemaPath:"#/properties/features/items/properties/geometry/oneOf/7/properties/geometries/items/oneOf/4/properties/coordinates/items/items/minItems",keyword:"minItems",params:{limit:2},message:"must NOT have fewer than 2 items"};i===null?i=[mn]:i.push(mn),a++}else{var Bt=!0;let mn=ki.length;for(let xu=0;xu<mn;xu++){let ks=ki[xu],ul=a;if(!(typeof ks=="number"&&isFinite(ks))){let Zi={instancePath:t+"/features/"+oe+"/geometry/geometries/"+Nt+"/coordinates/"+Hn+"/"+nn+"/"+xu,schemaPath:"#/properties/features/items/properties/geometry/oneOf/7/properties/geometries/items/oneOf/4/properties/coordinates/items/items/items/type",keyword:"type",params:{type:"number"},message:"must be number"};i===null?i=[Zi]:i.push(Zi),a++}var Bt=ul===a;if(!Bt)break}}}else{let mn={instancePath:t+"/features/"+oe+"/geometry/geometries/"+Nt+"/coordinates/"+Hn+"/"+nn,schemaPath:"#/properties/features/items/properties/geometry/oneOf/7/properties/geometries/items/oneOf/4/properties/coordinates/items/items/type",keyword:"type",params:{type:"array"},message:"must be array"};i===null?i=[mn]:i.push(mn),a++}var qt=wo===a;if(!qt)break}}}else{let bo={instancePath:t+"/features/"+oe+"/geometry/geometries/"+Nt+"/coordinates/"+Hn,schemaPath:"#/properties/features/items/properties/geometry/oneOf/7/properties/geometries/items/oneOf/4/properties/coordinates/items/type",keyword:"type",params:{type:"array"},message:"must be array"};i===null?i=[bo]:i.push(bo),a++}var et=Bn===a;if(!et)break}}else{let ao={instancePath:t+"/features/"+oe+"/geometry/geometries/"+Nt+"/coordinates",schemaPath:"#/properties/features/items/properties/geometry/oneOf/7/properties/geometries/items/oneOf/4/properties/coordinates/type",keyword:"type",params:{type:"array"},message:"must be array"};i===null?i=[ao]:i.push(ao),a++}var Ze=zn===a}else var Ze=!0;if(Ze)if(Zt.bbox!==void 0){let bn=Zt.bbox,zn=a;if(a===zn)if(Array.isArray(bn)){if(bn.length<4){let ao={instancePath:t+"/features/"+oe+"/geometry/geometries/"+Nt+"/bbox",schemaPath:"#/properties/features/items/properties/geometry/oneOf/7/properties/geometries/items/oneOf/4/properties/bbox/minItems",keyword:"minItems",params:{limit:4},message:"must NOT have fewer than 4 items"};i===null?i=[ao]:i.push(ao),a++}else{var jt=!0;let ao=bn.length;for(let Hn=0;Hn<ao;Hn++){let ho=bn[Hn],Bn=a;if(!(typeof ho=="number"&&isFinite(ho))){let bo={instancePath:t+"/features/"+oe+"/geometry/geometries/"+Nt+"/bbox/"+Hn,schemaPath:"#/properties/features/items/properties/geometry/oneOf/7/properties/geometries/items/oneOf/4/properties/bbox/items/type",keyword:"type",params:{type:"number"},message:"must be number"};i===null?i=[bo]:i.push(bo),a++}var jt=Bn===a;if(!jt)break}}}else{let ao={instancePath:t+"/features/"+oe+"/geometry/geometries/"+Nt+"/bbox",schemaPath:"#/properties/features/items/properties/geometry/oneOf/7/properties/geometries/items/oneOf/4/properties/bbox/type",keyword:"type",params:{type:"array"},message:"must be array"};i===null?i=[ao]:i.push(ao),a++}var Ze=zn===a}else var Ze=!0}}}else{let Xr={instancePath:t+"/features/"+oe+"/geometry/geometries/"+Nt,schemaPath:"#/properties/features/items/properties/geometry/oneOf/7/properties/geometries/items/oneOf/4/type",keyword:"type",params:{type:"object"},message:"must be object"};i===null?i=[Xr]:i.push(Xr),a++}var Ot=Gr===a;if(Ot&&io)io=!1,qo=[qo,4];else{Ot&&(io=!0,qo=4);let Xr=a;if(a===Xr)if(Zt&&typeof Zt=="object"&&!Array.isArray(Zt)){let zn;if(Zt.type===void 0&&(zn="type")||Zt.coordinates===void 0&&(zn="coordinates")){let Nr={instancePath:t+"/features/"+oe+"/geometry/geometries/"+Nt,schemaPath:"#/properties/features/items/properties/geometry/oneOf/7/properties/geometries/items/oneOf/5/required",keyword:"required",params:{missingProperty:zn},message:"must have required property '"+zn+"'"};i===null?i=[Nr]:i.push(Nr),a++}else{if(Zt.type!==void 0){let Nr=Zt.type,ao=a;if(typeof Nr!="string"){let Hn={instancePath:t+"/features/"+oe+"/geometry/geometries/"+Nt+"/type",schemaPath:"#/properties/features/items/properties/geometry/oneOf/7/properties/geometries/items/oneOf/5/properties/type/type",keyword:"type",params:{type:"string"},message:"must be string"};i===null?i=[Hn]:i.push(Hn),a++}if(Nr!=="MultiPolygon"){let Hn={instancePath:t+"/features/"+oe+"/geometry/geometries/"+Nt+"/type",schemaPath:"#/properties/features/items/properties/geometry/oneOf/7/properties/geometries/items/oneOf/5/properties/type/enum",keyword:"enum",params:{allowedValues:Fu.properties.features.items.properties.geometry.oneOf[7].properties.geometries.items.oneOf[5].properties.type.enum},message:"must be equal to one of the allowed values"};i===null?i=[Hn]:i.push(Hn),a++}var $t=ao===a}else var $t=!0;if($t){if(Zt.coordinates!==void 0){let Nr=Zt.coordinates,ao=a;if(a===ao)if(Array.isArray(Nr)){var an=!0;let ho=Nr.length;for(let Bn=0;Bn<ho;Bn++){let ha=Nr[Bn],bo=a;if(a===bo)if(Array.isArray(ha)){var gn=!0;let ki=ha.length;for(let wo=0;wo<ki;wo++){let Wl=ha[wo],mn=a;if(a===mn)if(Array.isArray(Wl)){if(Wl.length<4){let ks={instancePath:t+"/features/"+oe+"/geometry/geometries/"+Nt+"/coordinates/"+Bn+"/"+wo,schemaPath:"#/properties/features/items/properties/geometry/oneOf/7/properties/geometries/items/oneOf/5/properties/coordinates/items/items/minItems",keyword:"minItems",params:{limit:4},message:"must NOT have fewer than 4 items"};i===null?i=[ks]:i.push(ks),a++}else{var Rn=!0;let ks=Wl.length;for(let ul=0;ul<ks;ul++){let ja=Wl[ul],Zi=a;if(a===Zi)if(Array.isArray(ja)){if(ja.length<2){let Mi={instancePath:t+"/features/"+oe+"/geometry/geometries/"+Nt+"/coordinates/"+Bn+"/"+wo+"/"+ul,schemaPath:"#/properties/features/items/properties/geometry/oneOf/7/properties/geometries/items/oneOf/5/properties/coordinates/items/items/items/minItems",keyword:"minItems",params:{limit:2},message:"must NOT have fewer than 2 items"};i===null?i=[Mi]:i.push(Mi),a++}else{var wa=!0;let Mi=ja.length;for(let zo=0;zo<Mi;zo++){let jf=ja[zo],bs=a;if(!(typeof jf=="number"&&isFinite(jf))){let xs={instancePath:t+"/features/"+oe+"/geometry/geometries/"+Nt+"/coordinates/"+Bn+"/"+wo+"/"+ul+"/"+zo,schemaPath:"#/properties/features/items/properties/geometry/oneOf/7/properties/geometries/items/oneOf/5/properties/coordinates/items/items/items/items/type",keyword:"type",params:{type:"number"},message:"must be number"};i===null?i=[xs]:i.push(xs),a++}var wa=bs===a;if(!wa)break}}}else{let Mi={instancePath:t+"/features/"+oe+"/geometry/geometries/"+Nt+"/coordinates/"+Bn+"/"+wo+"/"+ul,schemaPath:"#/properties/features/items/properties/geometry/oneOf/7/properties/geometries/items/oneOf/5/properties/coordinates/items/items/items/type",keyword:"type",params:{type:"array"},message:"must be array"};i===null?i=[Mi]:i.push(Mi),a++}var Rn=Zi===a;if(!Rn)break}}}else{let ks={instancePath:t+"/features/"+oe+"/geometry/geometries/"+Nt+"/coordinates/"+Bn+"/"+wo,schemaPath:"#/properties/features/items/properties/geometry/oneOf/7/properties/geometries/items/oneOf/5/properties/coordinates/items/items/type",keyword:"type",params:{type:"array"},message:"must be array"};i===null?i=[ks]:i.push(ks),a++}var gn=mn===a;if(!gn)break}}else{let ki={instancePath:t+"/features/"+oe+"/geometry/geometries/"+Nt+"/coordinates/"+Bn,schemaPath:"#/properties/features/items/properties/geometry/oneOf/7/properties/geometries/items/oneOf/5/properties/coordinates/items/type",keyword:"type",params:{type:"array"},message:"must be array"};i===null?i=[ki]:i.push(ki),a++}var an=bo===a;if(!an)break}}else{let ho={instancePath:t+"/features/"+oe+"/geometry/geometries/"+Nt+"/coordinates",schemaPath:"#/properties/features/items/properties/geometry/oneOf/7/properties/geometries/items/oneOf/5/properties/coordinates/type",keyword:"type",params:{type:"array"},message:"must be array"};i===null?i=[ho]:i.push(ho),a++}var $t=ao===a}else var $t=!0;if($t)if(Zt.bbox!==void 0){let Nr=Zt.bbox,ao=a;if(a===ao)if(Array.isArray(Nr)){if(Nr.length<4){let ho={instancePath:t+"/features/"+oe+"/geometry/geometries/"+Nt+"/bbox",schemaPath:"#/properties/features/items/properties/geometry/oneOf/7/properties/geometries/items/oneOf/5/properties/bbox/minItems",keyword:"minItems",params:{limit:4},message:"must NOT have fewer than 4 items"};i===null?i=[ho]:i.push(ho),a++}else{var Ye=!0;let ho=Nr.length;for(let Bn=0;Bn<ho;Bn++){let ha=Nr[Bn],bo=a;if(!(typeof ha=="number"&&isFinite(ha))){let ki={instancePath:t+"/features/"+oe+"/geometry/geometries/"+Nt+"/bbox/"+Bn,schemaPath:"#/properties/features/items/properties/geometry/oneOf/7/properties/geometries/items/oneOf/5/properties/bbox/items/type",keyword:"type",params:{type:"number"},message:"must be number"};i===null?i=[ki]:i.push(ki),a++}var Ye=bo===a;if(!Ye)break}}}else{let ho={instancePath:t+"/features/"+oe+"/geometry/geometries/"+Nt+"/bbox",schemaPath:"#/properties/features/items/properties/geometry/oneOf/7/properties/geometries/items/oneOf/5/properties/bbox/type",keyword:"type",params:{type:"array"},message:"must be array"};i===null?i=[ho]:i.push(ho),a++}var $t=ao===a}else var $t=!0}}}else{let zn={instancePath:t+"/features/"+oe+"/geometry/geometries/"+Nt,schemaPath:"#/properties/features/items/properties/geometry/oneOf/7/properties/geometries/items/oneOf/5/type",keyword:"type",params:{type:"object"},message:"must be object"};i===null?i=[zn]:i.push(zn),a++}var Ot=Xr===a;Ot&&io?(io=!1,qo=[qo,5]):Ot&&(io=!0,qo=5)}}}}if(io)a=Zo,i!==null&&(Zo?i.length=Zo:i=null);else{let Yo={instancePath:t+"/features/"+oe+"/geometry/geometries/"+Nt,schemaPath:"#/properties/features/items/properties/geometry/oneOf/7/properties/geometries/items/oneOf",keyword:"oneOf",params:{passingSchemas:qo},message:"must match exactly one schema in oneOf"};i===null?i=[Yo]:i.push(Yo),a++}var We=Ii===a;if(!We)break}}else{let Zr={instancePath:t+"/features/"+oe+"/geometry/geometries",schemaPath:"#/properties/features/items/properties/geometry/oneOf/7/properties/geometries/type",keyword:"type",params:{type:"array"},message:"must be array"};i===null?i=[Zr]:i.push(Zr),a++}var _t=Ur===a}else var _t=!0;if(_t)if($e.bbox!==void 0){let Rr=$e.bbox,Ur=a;if(a===Ur)if(Array.isArray(Rr)){if(Rr.length<4){let Zr={instancePath:t+"/features/"+oe+"/geometry/bbox",schemaPath:"#/properties/features/items/properties/geometry/oneOf/7/properties/bbox/minItems",keyword:"minItems",params:{limit:4},message:"must NOT have fewer than 4 items"};i===null?i=[Zr]:i.push(Zr),a++}else{var le=!0;let Zr=Rr.length;for(let Nt=0;Nt<Zr;Nt++){let Zt=Rr[Nt],Ii=a;if(!(typeof Zt=="number"&&isFinite(Zt))){let io={instancePath:t+"/features/"+oe+"/geometry/bbox/"+Nt,schemaPath:"#/properties/features/items/properties/geometry/oneOf/7/properties/bbox/items/type",keyword:"type",params:{type:"number"},message:"must be number"};i===null?i=[io]:i.push(io),a++}var le=Ii===a;if(!le)break}}}else{let Zr={instancePath:t+"/features/"+oe+"/geometry/bbox",schemaPath:"#/properties/features/items/properties/geometry/oneOf/7/properties/bbox/type",keyword:"type",params:{type:"array"},message:"must be array"};i===null?i=[Zr]:i.push(Zr),a++}var _t=Ur===a}else var _t=!0}}}else{let ln={instancePath:t+"/features/"+oe+"/geometry",schemaPath:"#/properties/features/items/properties/geometry/oneOf/7/type",keyword:"type",params:{type:"object"},message:"must be object"};i===null?i=[ln]:i.push(ln),a++}var D=_n===a;D&&zt?(zt=!1,Ke=[Ke,7]):D&&(zt=!0,Ke=7)}}}}}}if(zt)a=yr,i!==null&&(yr?i.length=yr:i=null);else{let Qt={instancePath:t+"/features/"+oe+"/geometry",schemaPath:"#/properties/features/items/properties/geometry/oneOf",keyword:"oneOf",params:{passingSchemas:Ke},message:"must match exactly one schema in oneOf"};return i===null?i=[Qt]:i.push(Qt),a++,ds.errors=i,!1}var h=Xt===a}else var h=!0;if(h)if(Ue.bbox!==void 0){let $e=Ue.bbox,Xt=a;if(a===Xt)if(Array.isArray($e)){if($e.length<4)return ds.errors=[{instancePath:t+"/features/"+oe+"/bbox",schemaPath:"#/properties/features/items/properties/bbox/minItems",keyword:"minItems",params:{limit:4},message:"must NOT have fewer than 4 items"}],!1;{var ue=!0;let zt=$e.length;for(let Ke=0;Ke<zt;Ke++){let Tn=$e[Ke],rn=a;if(!(typeof Tn=="number"&&isFinite(Tn)))return ds.errors=[{instancePath:t+"/features/"+oe+"/bbox/"+Ke,schemaPath:"#/properties/features/items/properties/bbox/items/type",keyword:"type",params:{type:"number"},message:"must be number"}],!1;var ue=rn===a;if(!ue)break}}}else return ds.errors=[{instancePath:t+"/features/"+oe+"/bbox",schemaPath:"#/properties/features/items/properties/bbox/type",keyword:"type",params:{type:"array"},message:"must be array"}],!1;var h=Xt===a}else var h=!0}}}}else return ds.errors=[{instancePath:t+"/features/"+oe,schemaPath:"#/properties/features/items/type",keyword:"type",params:{type:"object"},message:"must be object"}],!1;var d=ze===a;if(!d)break}}else return ds.errors=[{instancePath:t+"/features",schemaPath:"#/properties/features/type",keyword:"type",params:{type:"array"},message:"must be array"}],!1;var u=ne===a}else var u=!0;if(u)if(e.bbox!==void 0){let de=e.bbox,ne=a;if(a===ne)if(Array.isArray(de)){if(de.length<4)return ds.errors=[{instancePath:t+"/bbox",schemaPath:"#/properties/bbox/minItems",keyword:"minItems",params:{limit:4},message:"must NOT have fewer than 4 items"}],!1;{var Y=!0;let Ie=de.length;for(let oe=0;oe<Ie;oe++){let Ue=de[oe],ze=a;if(!(typeof Ue=="number"&&isFinite(Ue)))return ds.errors=[{instancePath:t+"/bbox/"+oe,schemaPath:"#/properties/bbox/items/type",keyword:"type",params:{type:"number"},message:"must be number"}],!1;var Y=ze===a;if(!Y)break}}}else return ds.errors=[{instancePath:t+"/bbox",schemaPath:"#/properties/bbox/type",keyword:"type",params:{type:"array"},message:"must be array"}],!1;var u=ne===a}else var u=!0}}else return ds.errors=[{instancePath:t,schemaPath:"#/type",keyword:"type",params:{type:"object"},message:"must be object"}],!1;return ds.errors=i,a===0}var Lh=`${qe.timePeriod}_start`,kh=`${qe.timePeriod}_end`,Qj=e=>Object.fromEntries(Object.entries(e).map(([t,r])=>!Me(r)||r===""?[t,null]:[t,r])),Jj=e=>Object.fromEntries(Object.entries(e).map(([t,r])=>Me(r)?[t,r]:[t,""])),eq=e=>{let t=e[qe.timePeriod]?Tl(e[qe.timePeriod][0]):"",r=e[qe.timePeriod]?Tl(e[qe.timePeriod][1]):"";return{timePeriodStart:t,timePeriodEnd:r}},tq=(e,t)=>{let r=Fy(Tc(e),{representation:"date"}),n=Fy(Tc(t),{representation:"date"});return[r,n]};var rq="vkf-geojson-metadata-form-external-vector-map",sWe=[{label:"VKF",value:Ru.VKF},{label:"IDOHIST",value:Ru.IDOHIST}],xO=e=>({[qe.title]:e[qe.title],[qe.timePeriod]:e[qe.timePeriod],[qe.description]:e[qe.description],[qe.externalContentUrl]:e[qe.externalContentUrl],[qe.externalContentType]:e[qe.externalContentType],[qe.thumbnailUrl]:e[qe.thumbnailUrl]}),Dne=e=>{let t={title:e[qe.title],link_content:e[qe.externalContentUrl],content_type:e[qe.externalContentType],time_period:e[qe.timePeriod],description:e[qe.description],link_thumb:e[qe.thumbnailUrl]};return Qj(t)},lWe=e=>{let{timePeriodStart:t,timePeriodEnd:r}=eq(e),n=e[qe.externalContentType],o=Me(n)&&n!==""?n:Ru.VKF,i={[qe.title]:e[qe.title],[qe.externalContentUrl]:e[qe.externalContentUrl],[qe.externalContentType]:o,[Lh]:t,[kh]:r,[qe.description]:e[qe.description],[qe.thumbnailUrl]:e[qe.thumbnailUrl]};return Jj(i)},uWe=e=>{let t=e,r=t[Lh],n=t[kh],o=tq(r,n);return{[qe.title]:t[qe.title],[qe.externalContentUrl]:t[qe.externalContentUrl],[qe.externalContentType]:t[qe.externalContentType],[qe.timePeriod]:o,[qe.description]:t[qe.description],[qe.thumbnailUrl]:t[qe.thumbnailUrl]}},cWe=e=>{let t=aWe(e);if(!t)throw new Error("The GeoJson is not a valid FeatureCollection");if(e.features.length===0)throw new Error("The GeoJson is an empty FeatureCollection");return t};var sf=yn({key:"activeBasemapId",default:vr.getSettings().BASEMAPS[0].id}),nq=yn({key:"currentApplicationState",default:void 0}),oq=yn({key:"elementScreenSize",default:{map:{height:0,width:0}}}),pWe={facets:[],georeference:!1},lf=yn({key:"facetState",default:{facets:[],georeference:!1}}),dS=yn({key:"layoutState",default:wc.VERTICAL}),Ic=yn({key:"horizontalLayoutModeState",default:$s.STANDARD}),tr=yn({key:"mapState",default:void 0,dangerouslyAllowMutability:!0}),fWe=yn({key:"map3dState",default:!1}),hS=yn({key:"mapCountState",default:10}),iq=yn({key:"searchIsLoadingState",default:!1}),Dn=yn({key:"selectedLayersState",default:[],dangerouslyAllowMutability:!0}),aq=yn({key:"selectedOriginalMapIdState",default:void 0}),Ys=yn({key:"selectedGeoJsonLayerIdState",default:void 0}),Hy=yn({key:"selectedGeoJsonLayerLastUpdatedState",default:0}),nu=Ws({key:"selectedGeoJsonLayerState",get:({get:e})=>{let t=e(Ys),r=e(Dn),n=e(Hy);return{selectedLayer:r.find(i=>i.getId()===t),lastUpdated:n}},dangerouslyAllowMutability:!0}),Zs=yn({key:"selectedGeoJsonFeatureIdentifierState",default:null}),dWe=Ws({key:"isGeoJsonFeatureSelectedState",get:({get:e})=>{let t=e(Zs);if(!Me(t))return!1;let{featureId:r,sourceId:n}=t;return Me(r)&&Me(n)}}),Wy=yn({key:"timeExtentState",default:[1850,1970]}),Lne=[1850,1970],$y=yn({key:"timeRangeState",default:Lne}),sq=yn({key:"baseMapStyleLayersState",default:[]}),hWe=yn({key:"activeDialogState",default:xc.None}),Ks=yn({key:"drawState",default:void 0}),Xs=yn({key:"editedGeojsonState",default:null}),Pl=yn({key:"metadataDrawState",default:null}),Go=yn({key:"vectorMapState",default:null}),vg=yn({key:"vectorMapActiveVersionDrawState",default:null}),mWe=Ws({key:"isActiveVectorMapVersionDifferentState",get:({get:e})=>e(vg)!==null}),lq=yn({key:"showDropZoneState",default:!1}),uq=yn({key:"addedFileState",default:null}),gWe=yn({key:"addGeoJsonDialogState",default:!1}),hs=yn({key:"drawModePanelState",default:xi.NONE}),uf=yn({key:"vectorMapExternalModePanelState",default:Ec.NONE}),Da=yn({key:"layerExternalVectorMapState",default:null,dangerouslyAllowMutability:!0}),cq=yn({key:"forceUpdateLayerExternalVectorMapState",default:0}),pq=Ws({key:"metadataExternalVectorMapState",get:({get:e})=>{e(cq);let t=e(Da);return Me(t)?xO(t.getMetadata()):null},dangerouslyAllowMutability:!0}),vWe=Ws({key:"geojsonExternalVectorMapState",get:({get:e})=>{e(cq);let t=e(Da);return Me(t)?t.getGeoJson():null},dangerouslyAllowMutability:!0}),yWe=Ws({key:"layerIdExternalVectorMapState",get:({get:e})=>{let t=e(Da);return Me(t)?t.getId():null},dangerouslyAllowMutability:!0});function _We(e,t=250){let r=(0,_d.useRef)();return(0,_d.useEffect)(()=>{clearTimeout(r.current)},[e]),(...n)=>{r.current=window.setTimeout(()=>{e.apply(this,n)},t)}}function bWe(e){let[t,r]=(0,_d.useState)(e);return(0,_d.useEffect)(()=>{r(e)},[e]),t}function xWe(e,t){let r=zr(oq),n=wO(e);(0,_d.useEffect)(()=>{let{height:o,width:i}=n;r(a=>Object.assign({},a,{[t]:{height:o,width:i}}))},[n])}var wO=e=>{let[t,r]=(0,_d.useState)({height:0,width:0});return(0,_d.useLayoutEffect)(()=>{r(e.current.getBoundingClientRect())},[e]),hBe(e,n=>r(n.contentRect)),t};function wWe(e){var t,r,n="";if(typeof e=="string"||typeof e=="number")n+=e;else if(typeof e=="object")if(Array.isArray(e))for(t=0;t<e.length;t++)e[t]&&(r=wWe(e[t]))&&(n&&(n+=" "),n+=r);else for(t in e)e[t]&&(n&&(n+=" "),n+=t);return n}function l2r(){for(var e,t,r=0,n="";r<arguments.length;)(e=arguments[r++])&&(t=wWe(e))&&(n&&(n+=" "),n+=t);return n}var Dt=l2r;var EWe=e=>{let{onClose:t,text:r,type:n}=e;return lp.default.createElement("div",{className:"notification-item"},lp.default.createElement("div",{className:Dt("alert","alert-"+n),role:"alert"},lp.default.createElement("div",{className:"close"},lp.default.createElement("button",{type:"button",className:"close","aria-label":"Close",onClick:t},lp.default.createElement("span",{"aria-hidden":"true"},"\xD7"))),lp.default.createElement("div",{className:"text"},r)))};EWe.propTypes={onClose:fq.default.func,text:fq.default.string,type:fq.default.string};var u2r=()=>{let e=yt(Os),t=bWe(e),[r,n]=(0,lp.useState)([]);return(0,lp.useEffect)(()=>{if(e!==null&&e.id!==null&&e!==t){let o=[...r],i=r.findIndex(a=>a.id===e.id);i>-1?o.splice(i,1,e.text!==null?e:void 0):o.splice(0,0,e),n(o.filter(a=>a!==void 0))}},[e,r,t]),lp.default.createElement("div",{className:Dt("vkf-notifications",r.length===0?"hide":"")},r.map(({type:o,text:i},a)=>lp.default.createElement(EWe,{key:a,onClose:()=>{let u=[...r];u.splice(a,1),n(u)},type:o,text:i})))},SWe=u2r;var TWe=SWe;var a0=Z(Pe(),1);var ptt=Z(dq(),1);var mS=Z(Pe(),1);var GWe=Z($E(),1);var HWe=e=>Object.values(e).every(t=>t===void 0||Object.entries(t).length===0),jne=(e,t=4)=>{if(Array.isArray(e))return e.map(r=>jne(r,t));if(typeof e=="object"&&e!==null){let r={};return Object.entries(e).forEach(([n,o])=>{r[n]=jne(o)}),r}else return isNaN(e)||e===null?e:e.toFixed(Math.min(b2r(e),t))},_2r=(e,t=4)=>{let r={};return Object.entries(e).forEach(([n,o])=>{r[n]=jne(o,t)}),r},b2r=e=>Math.floor(e)===e?0:e.toString().split(".")[1].length||0,qne=({geojson:e,properties:t})=>Vo.fromPersistence({metadata:t,geoJson:e!=null?e:structuredClone(Uy)}),WWe=(e,t)=>{let r;t.forEach(n=>{let o=n.getMetadata(qe.bounds);r=r===void 0?new GWe.LngLatBounds(o):r.extend(o)}),r!==void 0&&e.fitBounds(r,{animate:!1,padding:{left:350,right:350,top:50,bottom:50}})},$We=(e,t)=>{let r;if(e===void 0)r=t;else if(t===void 0)r=e;else{let n=Array.isArray(e),o=Array.isArray(t),i=n?e:[e],a=o?t:[t];r=Array.from(new Set([...i,...a]))}return r},ZWe=(e,t)=>{let r=e.isVisible(t),n=e.getOpacity(t),o=e.getType(),i={isVisible:r,opacity:n};return o===co.VECTOR_MAP&&e.isLocal()?Object.assign(i,{geojson:e.getGeoJsonForPersistence(),type:co.VECTOR_MAP,properties:e.getMetadata()}):Object.assign(i,{id:e.getId(),type:o===co.HISTORIC_MAP?co.HISTORIC_MAP:co.VECTOR_MAP})},gS=(e,t=!1)=>{let r={center:e.getCenter().toArray(),bearing:e.getBearing(),pitch:e.getPitch(),zoom:e.getZoom()};return t?_2r(r,5):r};function bd(e,t){let r=()=>{if(typeof window=="undefined")return t;try{let a=window.localStorage.getItem(e);return a?JSON.parse(a):t}catch(a){return console.warn(`Error reading localStorage key \u201C${e}\u201D:`,a),t}},[n,o]=(0,mS.useState)(r),i=a=>{typeof window=="undefined"&&console.warn(`Tried setting localStorage key \u201C${e}\u201D even though environment is not a client`);try{let u=a instanceof Function?a(n):a;window.localStorage.setItem(e,JSON.stringify(u)),o(u),window.dispatchEvent(new Event("local-storage"))}catch(u){console.warn(`Error setting localStorage key \u201C${e}\u201D:`,u)}};return(0,mS.useEffect)(()=>{o(r())},[]),(0,mS.useEffect)(()=>{let a=()=>{o(r())};return window.addEventListener("storage",a),window.addEventListener("local-storage",a),()=>{window.removeEventListener("storage",a),window.removeEventListener("local-storage",a)}},[]),[n,i]}var YWe=e=>{(0,mS.useEffect)(()=>{let t="onpagehide"in window.self?"pagehide":"unload";return window.addEventListener(t,e,{capture:!0}),()=>{window.removeEventListener(t,e,{capture:!0})}},[e])},vS=e=>`${window.location.origin}${window.location.pathname}?${e}`;var KWe=e=>e.r!==void 0||e.d!==void 0||e.ri!==void 0||e.u!==void 0,XWe=e=>e.rotation!==void 0||e.direction!==void 0||e.right!==void 0||e.up!==void 0,QWe=e=>{let{c:t,r,d:n,u:o,p:i,z:a}=e;return Object.assign({},t===void 0?null:{center:t},r===void 0?null:{rotation:r},a===void 0?null:{zoom:a},i===void 0?null:{position:i},n===void 0?null:{direction:n},o===void 0?null:{up:o})},x2r=e=>{let[t,r,n]=e,o=Math.log2(6378137/n)+6;return{center:[t,r],pitch:50,zoom:o}},w2r=(e,t)=>({bearing:E2r(t),legacy3dMapView:!0}),JWe=e=>e*(180/Math.PI),E2r=e=>{let t=Math.PI+(Math.atan2(e[0],e[1])-Math.PI/2);return JWe(t)};function hq(e){let{center:t,rotation:r,direction:n,position:o,zoom:i}=e;return Object.assign({},t===void 0?null:{center:t},r===void 0?null:{pitch:JWe(r)},i===void 0?null:{zoom:i},o===void 0?null:x2r(o),n===void 0||o===void 0?null:w2r(o,n))}var mq={"2D":0,"3D":1},e$e=e=>{if(e!==void 0)return e===mq["3D"]},t$e=e=>{if(KWe(e)){let i=QWe(e);return hq(i)}let{c:t,be:r,p:n,z:o}=e;return Object.assign({},t===void 0?null:{center:t},r===void 0?null:{bearing:r},n===void 0?null:{pitch:n},o===void 0?null:{zoom:o})},r$e=e=>{let{fid:t,foid:r}=e;if(!Me(t)||!Me(r))return;let n=/^[0-9]+$/.test(t),o=Number.parseInt(t,10);if(!n||!Number.isFinite(o)){console.error(`The feature id cannot be parsed from url params. The id '${t}' cannot be coerced to type number.`);return}return{featureId:o,sourceId:r}};var L_=Z(Pe(),1);var S2r=function(){let e=yt(sf),t=yt(lf),r=yt(tr),n=yt(Wy),o=yt($y),i=yt(Dn),a=zr(nq),[,u]=bd(zne,{operationalLayers:[],is3dEnabled:!1}),d=(0,L_.useCallback)(()=>{if(r!==void 0){let h=r.hasTerrain(),v={activeBasemapId:e,is3dEnabled:h,operationalLayers:i.map(b=>ZWe(b,r)).filter(b=>b!==null),searchOptions:{facets:t,timeExtent:n,timeRange:o}};return v.cameraOptions=gS(r),u(v),v}},[e,r,t,i,n,o]);return YWe(d),(0,L_.useEffect)(()=>{a(()=>d)},[d]),L_.default.createElement(L_.default.Fragment,null)},n$e=S2r;var o$e=Z(Ph(),1);function yS(e){return gt(this,null,function*(){let t=vr.getSettings().API_SEARCH;if(t===void 0)throw new Error("The url for the search endpoint is not set.");let r=yield o$e.default.get(`${t}/_doc/${e}`);if(r.status===200)return r.data._source;console.error("Something went wrong while trying to fetch search document.")})}var EO=function(e,t){let r="geometry"in t?t.geometry:void 0,n=[t.time_period_start,t.time_period_end];delete t.geometry,delete t.time_period_start,delete t.time_period_end;let o=Te({},t);return o.id=e,o[qe.timePeriod]=n,o.type===co.VECTOR_MAP?(o[qe.vectorMapId]=e,Vo.fromPersistence({geometry:r,metadata:o,geoJson:structuredClone(Uy)})):new dg({metadata:o,geometry:r})},i$e=function(e){let t=[];for(let r=0,n=e.length;r<n;r++)t.push(EO(e[r]._id,e[r]._source));return t};var a$e=e=>yS(e).then(t=>EO(e,t)).catch(()=>{let t=new dg({metadata:{id:e,has_georeference:!1}});return t.setIsMissing(!0),t});var au=Z(Pe(),1);var eoe=Z(fZe(),1);function mr(){return mr=eoe.default?eoe.default.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},mr.apply(null,arguments)}var kZe=Z(SZe(),1);var noe=Z(LZe(),1);function Tq(e,t){return Tq=noe.default?noe.default.bind():function(r,n){return r.__proto__=n,r},Tq(e,t)}function fn(e,t){e.prototype=(0,kZe.default)(t.prototype),e.prototype.constructor=e,Tq(e,t)}function En(e,t){if(e==null)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(t.indexOf(n)!==-1)continue;r[n]=e[n]}return r}function vo(){return vo=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},vo.apply(null,arguments)}function bS(e,t){if(e==null)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(t.indexOf(n)!==-1)continue;r[n]=e[n]}return r}var ioe=Z(Pe());var CIn=Z(Mq()),ATr=function(){};function jZe(e,t){var r={};return Object.keys(e).forEach(function(n){if(r[xS(n)]=ATr,0)var o}),r}function ooe(e,t){return e[t]!==void 0}function xS(e){return"default"+e.charAt(0).toUpperCase()+e.substr(1)}function qZe(e){return!!e&&(typeof e!="function"||e.prototype&&e.prototype.isReactComponent)}function wS(e,t){return wS=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(r,n){return r.__proto__=n,r},wS(e,t)}function Cq(e,t){e.prototype=Object.create(t.prototype),e.prototype.constructor=e,wS(e,t)}var ES=Z(Pe()),VZe=Z(soe()),GZe=Z(Mq());var PTr="/Users/jquense/src/uncontrollable/src/uncontrollable.js";function k_(e,t,r){r===void 0&&(r=[]);var n=e.displayName||e.name||"Component",o=qZe(e),i=Object.keys(t),a=i.map(xS);o||!r.length||(0,GZe.default)(!1);var u=function(h){Cq(v,h);function v(){for(var x,M=arguments.length,O=new Array(M),D=0;D<M;D++)O[D]=arguments[D];x=h.call.apply(h,[this].concat(O))||this,x.handlers=Object.create(null),i.forEach(function(R){var q=t[R],B=function(re){if(x.props[q]){var Q;x._notifying=!0;for(var ie=arguments.length,me=new Array(ie>1?ie-1:0),ve=1;ve<ie;ve++)me[ve-1]=arguments[ve];(Q=x.props)[q].apply(Q,[re].concat(me)),x._notifying=!1}x.unmounted||x.setState(function(ye){var we,Se=ye.values;return{values:vo(Object.create(null),Se,(we={},we[R]=re,we))}})};x.handlers[q]=B}),r.length&&(x.attachRef=function(R){x.inner=R});var k=Object.create(null);return i.forEach(function(R){k[R]=x.props[xS(R)]}),x.state={values:k,prevProps:{}},x}var b=v.prototype;return b.shouldComponentUpdate=function(){return!this._notifying},v.getDerivedStateFromProps=function(M,O){var D=O.values,k=O.prevProps,R={values:vo(Object.create(null),D),prevProps:{}};return i.forEach(function(q){R.prevProps[q]=M[q],!ooe(M,q)&&ooe(k,q)&&(R.values[q]=M[xS(q)])}),R},b.componentWillUnmount=function(){this.unmounted=!0},b.render=function(){var M=this,O=this.props,D=O.innerRef,k=bS(O,["innerRef"]);a.forEach(function(q){delete k[q]});var R={};return i.forEach(function(q){var B=M.props[q];R[q]=B!==void 0?B:M.state.values[q]}),ES.default.createElement(e,vo({},k,R,this.handlers,{ref:D||this.attachRef}))},v}(ES.default.Component);(0,VZe.polyfill)(u),u.displayName="Uncontrolled("+n+")",u.propTypes=vo({innerRef:function(){}},jZe(t,n)),r.forEach(function(h){u.prototype[h]=function(){var b;return(b=this.inner)[h].apply(b,arguments)}});var d=u;return ES.default.forwardRef&&(d=ES.default.forwardRef(function(h,v){return ES.default.createElement(u,vo({},h,{innerRef:v,__source:{fileName:PTr,lineNumber:128},__self:this}))}),d.propTypes=u.propTypes),d.ControlledComponent=e,d.deferControlTo=function(h,v,b){return v===void 0&&(v={}),k_(h,vo({},t,v),b)},d}var coe=Z(uoe());var QZe=Z(Mq()),Aq=Z(xt());var iu={LARGE:"large",SMALL:"small",XSMALL:"xsmall"},CO={large:"lg",medium:"md",small:"sm",xsmall:"xs",lg:"lg",md:"md",sm:"sm",xs:"xs"};var XZe={SUCCESS:"success",WARNING:"warning",DANGER:"danger",INFO:"info"},AO={DEFAULT:"default",PRIMARY:"primary",LINK:"link",INVERSE:"inverse"};function poe(e){return function(){for(var t=arguments.length,r=new Array(t),n=0;n<t;n++)r[n]=arguments[n];var o=r[r.length-1];return typeof o=="function"?e.apply(void 0,r):function(i){return e.apply(void 0,r.concat([i]))}}}function Qo(e,t){var r=(e.bsClass||"").trim();return r==null&&(0,QZe.default)(!1),r+(t?"-"+t:"")}var fo=poe(function(e,t){var r=t.propTypes||(t.propTypes={}),n=t.defaultProps||(t.defaultProps={});return r.bsClass=Aq.default.string,n.bsClass=e,t}),Oq=poe(function(e,t,r){typeof t!="string"&&(r=t,t=void 0);var n=r.STYLES||[],o=r.propTypes||{};e.forEach(function(u){n.indexOf(u)===-1&&n.push(u)});var i=Aq.default.oneOf(n);if(r.STYLES=n,i._values=n,r.propTypes=mr({},o,{bsStyle:i}),t!==void 0){var a=r.defaultProps||(r.defaultProps={});a.bsStyle=t}return r}),Rh=poe(function(e,t,r){typeof t!="string"&&(r=t,t=void 0);var n=r.SIZES||[],o=r.propTypes||{};e.forEach(function(u){n.indexOf(u)===-1&&n.push(u)});var i=[];n.forEach(function(u){var d=CO[u];d&&d!==u&&i.push(d),i.push(u)});var a=Aq.default.oneOf(i);return a._values=i,r.SIZES=n,r.propTypes=mr({},o,{bsSize:a}),t!==void 0&&(r.defaultProps||(r.defaultProps={}),r.defaultProps.bsSize=t),r});function Ho(e){var t,r=(t={},t[Qo(e)]=!0,t);if(e.bsSize){var n=CO[e.bsSize]||e.bsSize;r[Qo(e,n)]=!0}return e.bsStyle&&(r[Qo(e,e.bsStyle)]=!0),r}function JZe(e){return{bsClass:e.bsClass,bsSize:e.bsSize,bsStyle:e.bsStyle,bsRole:e.bsRole}}function eYe(e){return e==="bsClass"||e==="bsSize"||e==="bsStyle"||e==="bsRole"}function wi(e){var t={};return(0,coe.default)(e).forEach(function(r){var n=r[0],o=r[1];eYe(n)||(t[n]=o)}),[JZe(e),t]}function SS(e,t){var r={};t.forEach(function(o){r[o]=!0});var n={};return(0,coe.default)(e).forEach(function(o){var i=o[0],a=o[1];!eYe(i)&&!r[i]&&(n[i]=a)}),[JZe(e),n]}var Nl=Z(Pe());function jTr(e,t,r){var n=0;return Nl.default.Children.map(e,function(o){return Nl.default.isValidElement(o)?t.call(r,o,n++):o})}function qTr(e,t,r){var n=0;Nl.default.Children.forEach(e,function(o){Nl.default.isValidElement(o)&&t.call(r,o,n++)})}function zTr(e){var t=0;return Nl.default.Children.forEach(e,function(r){Nl.default.isValidElement(r)&&++t}),t}function FTr(e,t,r){var n=0,o=[];return Nl.default.Children.forEach(e,function(i){Nl.default.isValidElement(i)&&t.call(r,i,n++)&&o.push(i)}),o}function UTr(e,t,r){var n=0,o;return Nl.default.Children.forEach(e,function(i){o||Nl.default.isValidElement(i)&&t.call(r,i,n++)&&(o=i)}),o}function BTr(e,t,r){var n=0,o=!0;return Nl.default.Children.forEach(e,function(i){o&&Nl.default.isValidElement(i)&&(t.call(r,i,n++)||(o=!1))}),o}function VTr(e,t,r){var n=0,o=!1;return Nl.default.Children.forEach(e,function(i){o||Nl.default.isValidElement(i)&&t.call(r,i,n++)&&(o=!0)}),o}function GTr(e){var t=[];return Nl.default.Children.forEach(e,function(r){Nl.default.isValidElement(r)&&t.push(r)}),t}var xd={map:jTr,forEach:qTr,count:zTr,find:UTr,filter:FTr,every:BTr,some:VTr,toArray:GTr};var foe=Z(xt()),OO=Z(Pe()),$Tr={label:foe.default.string.isRequired,onClick:foe.default.func},ZTr={label:"Close"},doe=function(e){fn(t,e);function t(){return e.apply(this,arguments)||this}var r=t.prototype;return r.render=function(){var o=this.props,i=o.label,a=o.onClick;return OO.default.createElement("button",{type:"button",className:"close",onClick:a},OO.default.createElement("span",{"aria-hidden":"true"},"\xD7"),OO.default.createElement("span",{className:"sr-only"},i))},t}(OO.default.Component);doe.propTypes=$Tr;doe.defaultProps=ZTr;var lYe=doe;function li(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}var voe=Z(Pe()),_g=Z(xt()),gYe=Z(Uu());function aIr(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];return t.filter(function(n){return n!=null}).reduce(function(n,o){if(typeof o!="function")throw new Error("Invalid Argument Type, must only provide functions, undefined, or null.");return n===null?o:function(){for(var a=arguments.length,u=new Array(a),d=0;d<a;d++)u[d]=arguments[d];n.apply(this,u),o.apply(this,u)}},null)}var Bu=aIr;var sIr={href:_g.default.string,onClick:_g.default.func,onKeyDown:_g.default.func,disabled:_g.default.bool,role:_g.default.string,tabIndex:_g.default.oneOfType([_g.default.number,_g.default.string]),componentClass:gYe.default},lIr={componentClass:"a"};function mYe(e){return!e||e.trim()==="#"}var yoe=function(e){fn(t,e);function t(n,o){var i;return i=e.call(this,n,o)||this,i.handleClick=i.handleClick.bind(li(li(i))),i.handleKeyDown=i.handleKeyDown.bind(li(li(i))),i}var r=t.prototype;return r.handleClick=function(o){var i=this.props,a=i.disabled,u=i.href,d=i.onClick;if((a||mYe(u))&&o.preventDefault(),a){o.stopPropagation();return}d&&d(o)},r.handleKeyDown=function(o){o.key===" "&&(o.preventDefault(),this.handleClick(o))},r.render=function(){var o=this.props,i=o.componentClass,a=o.disabled,u=o.onKeyDown,d=En(o,["componentClass","disabled","onKeyDown"]);return mYe(d.href)&&(d.role=d.role||"button",d.href=d.href||"#"),a&&(d.tabIndex=-1,d.style=mr({pointerEvents:"none"},d.style)),voe.default.createElement(i,mr({},d,{onClick:this.handleClick,onKeyDown:Bu(this.handleKeyDown,u)}))},t}(voe.default.Component);yoe.propTypes=sIr;yoe.defaultProps=lIr;var Gq=yoe;var vYe=Z(sYe());var _oe=Z(ko()),Hq=Z(Pe()),R_=Z(xt()),yYe=Z(Uu());var uIr={active:R_.default.bool,disabled:R_.default.bool,block:R_.default.bool,onClick:R_.default.func,componentClass:yYe.default,href:R_.default.string,type:R_.default.oneOf(["button","reset","submit"])},cIr={active:!1,block:!1,disabled:!1},boe=function(e){fn(t,e);function t(){return e.apply(this,arguments)||this}var r=t.prototype;return r.renderAnchor=function(o,i){return Hq.default.createElement(Gq,mr({},o,{className:(0,_oe.default)(i,o.disabled&&"disabled")}))},r.renderButton=function(o,i){var a=o.componentClass,u=En(o,["componentClass"]),d=a||"button";return Hq.default.createElement(d,mr({},u,{type:u.type||"button",className:i}))},r.render=function(){var o,i=this.props,a=i.active,u=i.block,d=i.className,h=En(i,["active","block","className"]),v=wi(h),b=v[0],x=v[1],M=mr({},Ho(b),(o={active:a},o[Qo(b,"block")]=u,o)),O=(0,_oe.default)(d,M);return x.href?this.renderAnchor(x,O):this.renderButton(x,O)},t}(Hq.default.Component);boe.propTypes=uIr;boe.defaultProps=cIr;var Wq=fo("btn",Rh([iu.LARGE,iu.SMALL,iu.XSMALL],Oq((0,vYe.default)(XZe).concat([AO.DEFAULT,AO.PRIMARY,AO.LINK]),AO.DEFAULT,boe)));var xYe=Z(ko()),xoe=Z(Pe()),wYe=Z(xt());var mIr={glyph:wYe.default.string.isRequired},EYe=function(e){fn(t,e);function t(){return e.apply(this,arguments)||this}var r=t.prototype;return r.render=function(){var o,i=this.props,a=i.glyph,u=i.className,d=En(i,["glyph","className"]),h=wi(d),v=h[0],b=h[1],x=mr({},Ho(v),(o={},o[Qo(v,a)]=!0,o));return xoe.default.createElement("span",mr({},b,{className:(0,xYe.default)(u,x)}))},t}(xoe.default.Component);EYe.propTypes=mIr;var bg=fo("glyphicon",EYe);var TYe=Z(ko()),woe=Z(Pe()),Zq=Z(xt()),LMn=Z(j_());var vIr={htmlFor:Zq.default.string,srOnly:Zq.default.bool},yIr={srOnly:!1},_Ir={$bs_formGroup:Zq.default.object},Yq=function(e){fn(t,e);function t(){return e.apply(this,arguments)||this}var r=t.prototype;return r.render=function(){var o=this.context.$bs_formGroup,i=o&&o.controlId,a=this.props,u=a.htmlFor,d=u===void 0?i:u,h=a.srOnly,v=a.className,b=En(a,["htmlFor","srOnly","className"]),x=wi(b),M=x[0],O=x[1],D=mr({},Ho(M),{"sr-only":h});return woe.default.createElement("label",mr({},O,{htmlFor:d,className:(0,TYe.default)(v,D)}))},t}(woe.default.Component);Yq.propTypes=vIr;Yq.defaultProps=yIr;Yq.contextTypes=_Ir;var Kq=fo("control-label",Yq);var gKe=Z(uoe());function Roe(e,t){var r=t.propTypes,n={},o={};return(0,gKe.default)(e).forEach(function(i){var a=i[0],u=i[1];r[a]?n[a]=u:o[a]=u}),[n,o]}var vKe=Z(ko()),b8=Z(Pe()),cf=Z(xt()),AS=Z(YYe()),_8,WMr={in:cf.default.bool,mountOnEnter:cf.default.bool,unmountOnExit:cf.default.bool,appear:cf.default.bool,timeout:cf.default.number,onEnter:cf.default.func,onEntering:cf.default.func,onEntered:cf.default.func,onExit:cf.default.func,onExiting:cf.default.func,onExited:cf.default.func},$Mr={in:!1,timeout:300,mountOnEnter:!1,unmountOnExit:!1,appear:!1},ZMr=(_8={},_8[AS.ENTERING]="in",_8[AS.ENTERED]="in",_8),joe=function(e){fn(t,e);function t(){return e.apply(this,arguments)||this}var r=t.prototype;return r.render=function(){var o=this.props,i=o.className,a=o.children,u=En(o,["className","children"]);return b8.default.createElement(AS.default,u,function(d,h){return b8.default.cloneElement(a,mr({},h,{className:(0,vKe.default)("fade",i,a.props.className,ZMr[d])}))})},t}(b8.default.Component);joe.propTypes=WMr;joe.defaultProps=$Mr;var Ky=joe;var EKe=Z(ko()),Boe=Z(Pe()),FO=Z(xt()),SKe=Z(Uu()),uCn=Z(j_());var qoe=Z(ko()),zO=Z(Pe()),yKe=Z(xt());var YMr={bsRole:"feedback"},KMr={$bs_formGroup:yKe.default.object},zoe=function(e){fn(t,e);function t(){return e.apply(this,arguments)||this}var r=t.prototype;return r.getGlyph=function(o){switch(o){case"success":return"ok";case"warning":return"warning-sign";case"error":return"remove";default:return null}},r.renderDefaultFeedback=function(o,i,a,u){var d=this.getGlyph(o&&o.validationState);return d?zO.default.createElement(bg,mr({},u,{glyph:d,className:(0,qoe.default)(i,a)})):null},r.render=function(){var o=this.props,i=o.className,a=o.children,u=En(o,["className","children"]),d=wi(u),h=d[0],v=d[1],b=Ho(h);if(!a)return this.renderDefaultFeedback(this.context.$bs_formGroup,i,b,v);var x=zO.default.Children.only(a);return zO.default.cloneElement(x,mr({},v,{className:(0,qoe.default)(x.props.className,i,b)}))},t}(zO.default.Component);zoe.defaultProps=YMr;zoe.contextTypes=KMr;var _Ke=fo("form-control-feedback",zoe);var bKe=Z(ko()),Foe=Z(Pe()),xKe=Z(Uu());var XMr={componentClass:xKe.default},QMr={componentClass:"p"},Uoe=function(e){fn(t,e);function t(){return e.apply(this,arguments)||this}var r=t.prototype;return r.render=function(){var o=this.props,i=o.componentClass,a=o.className,u=En(o,["componentClass","className"]),d=wi(u),h=d[0],v=d[1],b=Ho(h);return Foe.default.createElement(i,mr({},v,{className:(0,bKe.default)(a,b)}))},t}(Foe.default.Component);Uoe.propTypes=XMr;Uoe.defaultProps=QMr;var wKe=fo("form-control-static",Uoe);var JMr={componentClass:SKe.default,type:FO.default.string,id:FO.default.string,inputRef:FO.default.func},eCr={componentClass:"input"},tCr={$bs_formGroup:FO.default.object},OS=function(e){fn(t,e);function t(){return e.apply(this,arguments)||this}var r=t.prototype;return r.render=function(){var o=this.context.$bs_formGroup,i=o&&o.controlId,a=this.props,u=a.componentClass,d=a.type,h=a.id,v=h===void 0?i:h,b=a.inputRef,x=a.className,M=a.bsSize,O=En(a,["componentClass","type","id","inputRef","className","bsSize"]),D=wi(O),k=D[0],R=D[1],q;if(d!=="file"&&(q=Ho(k)),M){var B=CO[M]||M;q[Qo({bsClass:"input"},B)]=!0}return Boe.default.createElement(u,mr({},R,{type:d,id:v,ref:b,className:(0,EKe.default)(x,q)}))},t}(Boe.default.Component);OS.propTypes=JMr;OS.defaultProps=eCr;OS.contextTypes=tCr;OS.Feedback=_Ke;OS.Static=wKe;var Voe=fo("form-control",Rh([iu.SMALL,iu.LARGE],OS));var TKe=Z(ko()),Goe=Z(Pe()),x8=Z(xt());var rCr={controlId:x8.default.string,validationState:x8.default.oneOf(["success","warning","error",null])},nCr={$bs_formGroup:x8.default.object.isRequired},Hoe=function(e){fn(t,e);function t(){return e.apply(this,arguments)||this}var r=t.prototype;return r.getChildContext=function(){var o=this.props,i=o.controlId,a=o.validationState;return{$bs_formGroup:{controlId:i,validationState:a}}},r.hasFeedback=function(o){var i=this;return xd.some(o,function(a){return a.props.bsRole==="feedback"||a.props.children&&i.hasFeedback(a.props.children)})},r.render=function(){var o=this.props,i=o.validationState,a=o.className,u=o.children,d=En(o,["validationState","className","children"]),h=SS(d,["controlId"]),v=h[0],b=h[1],x=mr({},Ho(v),{"has-feedback":this.hasFeedback(u)});return i&&(x["has-"+i]=!0),Goe.default.createElement("div",mr({},b,{className:(0,TKe.default)(a,x)}),u)},t}(Goe.default.Component);Hoe.propTypes=rCr;Hoe.childContextTypes=nCr;var w8=fo("form-group",Rh([iu.LARGE,iu.SMALL],Hoe));var gie=Z(ko()),vie=Z(qKe()),KXe=Z(F_()),XXe=Z(jh()),yie=Z(Zoe()),DS=Z(Pe()),Js=Z(xt()),QXe=Z(va()),LS=Z(FXe()),JXe=Z(Qoe()),eQe=Z(Uu());var UXe=Z(ko()),uie=Z(Pe()),BXe=Z(Uu());var hOr={componentClass:BXe.default},mOr={componentClass:"div"},cie=function(e){fn(t,e);function t(){return e.apply(this,arguments)||this}var r=t.prototype;return r.render=function(){var o=this.props,i=o.componentClass,a=o.className,u=En(o,["componentClass","className"]),d=wi(u),h=d[0],v=d[1],b=Ho(h);return uie.default.createElement(i,mr({},v,{className:(0,UXe.default)(a,b)}))},t}(uie.default.Component);cie.propTypes=hOr;cie.defaultProps=mOr;var WO=fo("modal-body",cie);var pie=Z(ko()),$O=Z(Pe()),VXe=Z(xt());var gOr={dialogClassName:VXe.default.string},GXe=function(e){fn(t,e);function t(){return e.apply(this,arguments)||this}var r=t.prototype;return r.render=function(){var o,i=this.props,a=i.dialogClassName,u=i.className,d=i.style,h=i.children,v=i.onMouseDownDialog,b=En(i,["dialogClassName","className","style","children","onMouseDownDialog"]),x=wi(b),M=x[0],O=x[1],D=Qo(M),k=mr({display:"block"},d),R=mr({},Ho(M),(o={},o[D]=!1,o[Qo(M,"dialog")]=!0,o));return $O.default.createElement("div",mr({},O,{tabIndex:"-1",role:"dialog",style:k,className:(0,pie.default)(u,D)}),$O.default.createElement("div",{className:(0,pie.default)(a,R),onMouseDown:v},$O.default.createElement("div",{className:Qo(M,"content"),role:"document"},h)))},t}($O.default.Component);GXe.propTypes=gOr;var V8=fo("modal",Rh([iu.LARGE,iu.SMALL],GXe));var HXe=Z(ko()),fie=Z(Pe()),WXe=Z(Uu());var vOr={componentClass:WXe.default},yOr={componentClass:"div"},die=function(e){fn(t,e);function t(){return e.apply(this,arguments)||this}var r=t.prototype;return r.render=function(){var o=this.props,i=o.componentClass,a=o.className,u=En(o,["componentClass","className"]),d=wi(u),h=d[0],v=d[1],b=Ho(h);return fie.default.createElement(i,mr({},v,{className:(0,HXe.default)(a,b)}))},t}(fie.default.Component);die.propTypes=vOr;die.defaultProps=yOr;var ZO=fo("modal-footer",die);var $Xe=Z(ko()),NS=Z(xt()),G8=Z(Pe());var _Or={closeLabel:NS.default.string,closeButton:NS.default.bool,onHide:NS.default.func},bOr={closeLabel:"Close",closeButton:!1},xOr={$bs_modal:NS.default.shape({onHide:NS.default.func})},H8=function(e){fn(t,e);function t(){return e.apply(this,arguments)||this}var r=t.prototype;return r.render=function(){var o=this.props,i=o.closeLabel,a=o.closeButton,u=o.onHide,d=o.className,h=o.children,v=En(o,["closeLabel","closeButton","onHide","className","children"]),b=this.context.$bs_modal,x=wi(v),M=x[0],O=x[1],D=Ho(M);return G8.default.createElement("div",mr({},O,{className:(0,$Xe.default)(d,D)}),a&&G8.default.createElement(lYe,{label:i,onClick:Bu(b&&b.onHide,u)}),h)},t}(G8.default.Component);H8.propTypes=_Or;H8.defaultProps=bOr;H8.contextTypes=xOr;var YO=fo("modal-header",H8);var ZXe=Z(ko()),hie=Z(Pe()),YXe=Z(Uu());var wOr={componentClass:YXe.default},EOr={componentClass:"h4"},mie=function(e){fn(t,e);function t(){return e.apply(this,arguments)||this}var r=t.prototype;return r.render=function(){var o=this.props,i=o.componentClass,a=o.className,u=En(o,["componentClass","className"]),d=wi(u),h=d[0],v=d[1],b=Ho(h);return hie.default.createElement(i,mr({},v,{className:(0,ZXe.default)(a,b)}))},t}(hie.default.Component);mie.propTypes=wOr;mie.defaultProps=EOr;var KO=fo("modal-title",mie);var SOr=mr({},LS.default.propTypes,V8.propTypes,{backdrop:Js.default.oneOf(["static",!0,!1]),backdropClassName:Js.default.string,keyboard:Js.default.bool,animation:Js.default.bool,dialogComponentClass:eQe.default,autoFocus:Js.default.bool,enforceFocus:Js.default.bool,restoreFocus:Js.default.bool,show:Js.default.bool,onHide:Js.default.func,onEnter:Js.default.func,onEntering:Js.default.func,onEntered:Js.default.func,onExit:Js.default.func,onExiting:Js.default.func,onExited:Js.default.func,container:LS.default.propTypes.container}),TOr=mr({},LS.default.defaultProps,{animation:!0,dialogComponentClass:V8}),IOr={$bs_modal:Js.default.shape({onHide:Js.default.func})};function MOr(e){return DS.default.createElement(Ky,mr({},e,{timeout:cp.TRANSITION_DURATION}))}function COr(e){return DS.default.createElement(Ky,mr({},e,{timeout:cp.BACKDROP_TRANSITION_DURATION}))}var cp=function(e){fn(t,e);function t(n,o){var i;return i=e.call(this,n,o)||this,i.handleDialogBackdropMouseDown=function(){i._waitingForMouseUp=!0},i.handleMouseUp=function(a){var u=i._modal.getDialogElement();i._waitingForMouseUp&&a.target===u&&(i._ignoreBackdropClick=!0),i._waitingForMouseUp=!1},i.handleEntering=i.handleEntering.bind(li(li(i))),i.handleExited=i.handleExited.bind(li(li(i))),i.handleWindowResize=i.handleWindowResize.bind(li(li(i))),i.handleDialogClick=i.handleDialogClick.bind(li(li(i))),i.setModalRef=i.setModalRef.bind(li(li(i))),i.state={style:{}},i}var r=t.prototype;return r.getChildContext=function(){return{$bs_modal:{onHide:this.props.onHide}}},r.componentWillUnmount=function(){this.handleExited()},r.setModalRef=function(o){this._modal=o},r.handleDialogClick=function(o){if(this._ignoreBackdropClick||o.target!==o.currentTarget){this._ignoreBackdropClick=!1;return}this.props.onHide()},r.handleEntering=function(){vie.default.on(window,"resize",this.handleWindowResize),this.updateStyle()},r.handleExited=function(){vie.default.off(window,"resize",this.handleWindowResize)},r.handleWindowResize=function(){this.updateStyle()},r.updateStyle=function(){if(XXe.default){var o=this._modal.getDialogElement(),i=o.scrollHeight,a=(0,KXe.default)(o),u=(0,JXe.default)(QXe.default.findDOMNode(this.props.container||a.body)),d=i>a.documentElement.clientHeight;this.setState({style:{paddingRight:u&&!d?(0,yie.default)():void 0,paddingLeft:!u&&d?(0,yie.default)():void 0}})}},r.render=function(){var o=this.props,i=o.backdrop,a=o.backdropClassName,u=o.animation,d=o.show,h=o.dialogComponentClass,v=o.className,b=o.style,x=o.children,M=o.onEntering,O=o.onExited,D=En(o,["backdrop","backdropClassName","animation","show","dialogComponentClass","className","style","children","onEntering","onExited"]),k=Roe(D,LS.default),R=k[0],q=k[1],B=d&&!u&&"in";return DS.default.createElement(LS.default,mr({},R,{ref:this.setModalRef,show:d,containerClassName:Qo(D,"open"),transition:u?MOr:void 0,backdrop:i,backdropTransition:u?COr:void 0,backdropClassName:(0,gie.default)(Qo(D,"backdrop"),a,B),onEntering:Bu(M,this.handleEntering),onExited:Bu(O,this.handleExited),onMouseUp:this.handleMouseUp}),DS.default.createElement(h,mr({},q,{style:mr({},this.state.style,b),className:(0,gie.default)(v,B),onClick:i===!0?this.handleDialogClick:null,onMouseDownDialog:this.handleDialogBackdropMouseDown}),x))},t}(DS.default.Component);cp.propTypes=SOr;cp.defaultProps=TOr;cp.childContextTypes=IOr;cp.Body=WO;cp.Header=YO;cp.Title=KO;cp.Footer=ZO;cp.Dialog=V8;cp.TRANSITION_DURATION=300;cp.BACKDROP_TRANSITION_DURATION=150;var wg=fo("modal",Rh([iu.LARGE,iu.SMALL],cp));var tQe=Z(ko()),XO=Z(oKe()),QO=Z(Pe()),el=Z(xt()),rQe=Z(va()),nQe=Z(bYe()),bAn=Z(j_());var AOr={activeKey:el.default.any,activeHref:el.default.string,stacked:el.default.bool,justified:(0,nQe.default)(el.default.bool,function(e){var t=e.justified,r=e.navbar;return t&&r?Error("justified navbar `Nav`s are not supported"):null}),onSelect:el.default.func,role:el.default.string,navbar:el.default.bool,pullRight:el.default.bool,pullLeft:el.default.bool},OOr={justified:!1,pullRight:!1,pullLeft:!1,stacked:!1},POr={$bs_navbar:el.default.shape({bsClass:el.default.string,onSelect:el.default.func}),$bs_tabContainer:el.default.shape({activeKey:el.default.any,onSelect:el.default.func.isRequired,getTabId:el.default.func.isRequired,getPaneId:el.default.func.isRequired})},W8=function(e){fn(t,e);function t(){return e.apply(this,arguments)||this}var r=t.prototype;return r.componentDidUpdate=function(){var o=this;if(this._needsRefocus){this._needsRefocus=!1;var i=this.props.children,a=this.getActiveProps(),u=a.activeKey,d=a.activeHref,h=xd.find(i,function(O){return o.isActive(O,u,d)}),v=xd.toArray(i),b=v.indexOf(h),x=rQe.default.findDOMNode(this).children,M=x&&x[b];!M||!M.firstChild||M.firstChild.focus()}},r.getActiveProps=function(){var o=this.context.$bs_tabContainer;return o||this.props},r.getNextActiveChild=function(o){var i=this,a=this.props.children,u=xd.filter(a,function(D){return D.props.eventKey!=null&&!D.props.disabled}),d=this.getActiveProps(),h=d.activeKey,v=d.activeHref,b=xd.find(a,function(D){return i.isActive(D,h,v)}),x=u.indexOf(b);if(x===-1)return u[0];var M=x+o,O=u.length;return M>=O?M=0:M<0&&(M=O-1),u[M]},r.getTabProps=function(o,i,a,u,d){var h=this;if(!i&&a!=="tablist")return null;var v=o.props,b=v.id,x=v["aria-controls"],M=v.eventKey,O=v.role,D=v.onKeyDown,k=v.tabIndex;return i&&(b=i.getTabId(M),x=i.getPaneId(M)),a==="tablist"&&(O=O||"tab",D=Bu(function(R){return h.handleTabKeyDown(d,R)},D),k=u?k:-1),{id:b,role:O,onKeyDown:D,"aria-controls":x,tabIndex:k}},r.handleTabKeyDown=function(o,i){var a;switch(i.keyCode){case XO.default.codes.left:case XO.default.codes.up:a=this.getNextActiveChild(-1);break;case XO.default.codes.right:case XO.default.codes.down:a=this.getNextActiveChild(1);break;default:return}i.preventDefault(),o&&a&&a.props.eventKey!=null&&o(a.props.eventKey),this._needsRefocus=!0},r.isActive=function(o,i,a){var u=o.props;return u.active||i!=null&&u.eventKey===i||a&&u.href===a?!0:u.active},r.render=function(){var o,i=this,a=this.props,u=a.stacked,d=a.justified,h=a.onSelect,v=a.role,b=a.navbar,x=a.pullRight,M=a.pullLeft,O=a.className,D=a.children,k=En(a,["stacked","justified","onSelect","role","navbar","pullRight","pullLeft","className","children"]),R=this.context.$bs_tabContainer,q=v||(R?"tablist":null),B=this.getActiveProps(),G=B.activeKey,re=B.activeHref;delete k.activeKey,delete k.activeHref;var Q=wi(k),ie=Q[0],me=Q[1],ve=mr({},Ho(ie),(o={},o[Qo(ie,"stacked")]=u,o[Qo(ie,"justified")]=d,o)),ye=b!=null?b:this.context.$bs_navbar,we,Se;if(ye){var ge=this.context.$bs_navbar||{bsClass:"navbar"};ve[Qo(ge,"nav")]=!0,Se=Qo(ge,"right"),we=Qo(ge,"left")}else Se="pull-right",we="pull-left";return ve[Se]=x,ve[we]=M,QO.default.createElement("ul",mr({},me,{role:q,className:(0,tQe.default)(O,ve)}),xd.map(D,function(Re){var Je=i.isActive(Re,G,re),tt=Bu(Re.props.onSelect,h,ye&&ye.onSelect,R&&R.onSelect);return(0,QO.cloneElement)(Re,mr({},i.getTabProps(Re,R,q,Je,tt),{active:Je,activeKey:G,activeHref:re,onSelect:tt}))}))},t}(QO.default.Component);W8.propTypes=AOr;W8.defaultProps=OOr;W8.contextTypes=POr;var oQe=fo("nav",Oq(["tabs","pills"],W8));var iQe=Z(ko()),$8=Z(Pe()),e0=Z(xt());var NOr={active:e0.default.bool,disabled:e0.default.bool,role:e0.default.string,href:e0.default.string,onClick:e0.default.func,onSelect:e0.default.func,eventKey:e0.default.any},DOr={active:!1,disabled:!1},_ie=function(e){fn(t,e);function t(n,o){var i;return i=e.call(this,n,o)||this,i.handleClick=i.handleClick.bind(li(li(i))),i}var r=t.prototype;return r.handleClick=function(o){if(this.props.disabled){o.preventDefault();return}this.props.onSelect&&this.props.onSelect(this.props.eventKey,o)},r.render=function(){var o=this.props,i=o.active,a=o.disabled,u=o.onClick,d=o.className,h=o.style,v=En(o,["active","disabled","onClick","className","style"]);return delete v.onSelect,delete v.eventKey,delete v.activeKey,delete v.activeHref,v.role?v.role==="tab"&&(v["aria-selected"]=i):v.href==="#"&&(v.role="button"),$8.default.createElement("li",{role:"presentation",className:(0,iQe.default)(d,{active:i,disabled:a}),style:h},$8.default.createElement(Gq,mr({},v,{disabled:a,onClick:Bu(u,this.handleClick)})))},t}($8.default.Component);_ie.propTypes=NOr;_ie.defaultProps=DOr;var aQe=_ie;var kQe=Z(ko()),t4=Z(Pe()),pp=Z(xt()),Iie=Z(LQe()),RQe=Z(Uu());var k4r=mr({},Iie.default.propTypes,{show:pp.default.bool,rootClose:pp.default.bool,onHide:pp.default.func,animation:pp.default.oneOfType([pp.default.bool,RQe.default]),onEnter:pp.default.func,onEntering:pp.default.func,onEntered:pp.default.func,onExit:pp.default.func,onExiting:pp.default.func,onExited:pp.default.func,placement:pp.default.oneOf(["top","right","bottom","left"])}),R4r={animation:Ky,rootClose:!1,show:!1,placement:"right"},Mie=function(e){fn(t,e);function t(){return e.apply(this,arguments)||this}var r=t.prototype;return r.render=function(){var o=this.props,i=o.animation,a=o.children,u=En(o,["animation","children"]),d=i===!0?Ky:i||null,h;return d?h=a:h=(0,t4.cloneElement)(a,{className:(0,kQe.default)(a.props.className,"in")}),t4.default.createElement(Iie.default,mr({},u,{transition:d}),h)},t}(t4.default.Component);Mie.propTypes=k4r;Mie.defaultProps=R4r;var Cie=Mie;var Aie=Z(ko()),jS=Z(Pe()),qS=Z(xt()),BAn=Z(j_());var j4r={inline:qS.default.bool,disabled:qS.default.bool,title:qS.default.string,validationState:qS.default.oneOf(["success","warning","error",null]),inputRef:qS.default.func},q4r={inline:!1,disabled:!1,title:""},Oie=function(e){fn(t,e);function t(){return e.apply(this,arguments)||this}var r=t.prototype;return r.render=function(){var o=this.props,i=o.inline,a=o.disabled,u=o.validationState,d=o.inputRef,h=o.className,v=o.style,b=o.title,x=o.children,M=En(o,["inline","disabled","validationState","inputRef","className","style","title","children"]),O=wi(M),D=O[0],k=O[1],R=jS.default.createElement("input",mr({},k,{ref:d,type:"radio",disabled:a}));if(i){var q,B=(q={},q[Qo(D,"inline")]=!0,q.disabled=a,q);return jS.default.createElement("label",{className:(0,Aie.default)(h,B),style:v,title:b},R,x)}var G=mr({},Ho(D),{disabled:a});return u&&(G["has-"+u]=!0),jS.default.createElement("div",{className:(0,Aie.default)(h,G),style:v},jS.default.createElement("label",{title:b},R,x))},t}(jS.default.Component);Oie.propTypes=j4r;Oie.defaultProps=q4r;var Pie=fo("radio",Oie);var kie=Z(Pe()),pz=Z(xt());var oz=Z(Pe()),pf=Z(xt());var z4r="tab",F4r="pane",U4r=pf.default.oneOfType([pf.default.string,pf.default.number]),B4r={id:function(t){var r=null;if(!t.generateChildId){for(var n=arguments.length,o=new Array(n>1?n-1:0),i=1;i<n;i++)o[i-1]=arguments[i];r=U4r.apply(void 0,[t].concat(o)),!r&&!t.id&&(r=new Error("In order to properly initialize Tabs in a way that is accessible to assistive technologies (such as screen readers) an `id` or a `generateChildId` prop to TabContainer is required"))}return r},generateChildId:pf.default.func,onSelect:pf.default.func,activeKey:pf.default.any},V4r={$bs_tabContainer:pf.default.shape({activeKey:pf.default.any,onSelect:pf.default.func.isRequired,getTabId:pf.default.func.isRequired,getPaneId:pf.default.func.isRequired})},Nie=function(e){fn(t,e);function t(){return e.apply(this,arguments)||this}var r=t.prototype;return r.getChildContext=function(){var o=this.props,i=o.activeKey,a=o.onSelect,u=o.generateChildId,d=o.id,h=u||function(v,b){return d?d+"-"+b+"-"+v:null};return{$bs_tabContainer:{activeKey:i,onSelect:a,getTabId:function(b){return h(b,z4r)},getPaneId:function(b){return h(b,F4r)}}}},r.render=function(){var o=this.props,i=o.children,a=En(o,["children"]);return delete a.generateChildId,delete a.onSelect,delete a.activeKey,oz.default.cloneElement(oz.default.Children.only(i),a)},t}(oz.default.Component);Nie.propTypes=B4r;Nie.childContextTypes=V4r;var iz=k_(Nie,{activeKey:"onSelect"});var jQe=Z(ko()),Die=Z(Pe()),Ll=Z(xt()),az=Z(Uu());var G4r={componentClass:az.default,animation:Ll.default.oneOfType([Ll.default.bool,az.default]),mountOnEnter:Ll.default.bool,unmountOnExit:Ll.default.bool},H4r={componentClass:"div",animation:!0,mountOnEnter:!1,unmountOnExit:!1},W4r={$bs_tabContainer:Ll.default.shape({activeKey:Ll.default.any})},$4r={$bs_tabContent:Ll.default.shape({bsClass:Ll.default.string,animation:Ll.default.oneOfType([Ll.default.bool,az.default]),activeKey:Ll.default.any,mountOnEnter:Ll.default.bool,unmountOnExit:Ll.default.bool,onPaneEnter:Ll.default.func.isRequired,onPaneExited:Ll.default.func.isRequired,exiting:Ll.default.bool.isRequired})},r4=function(e){fn(t,e);function t(n,o){var i;return i=e.call(this,n,o)||this,i.handlePaneEnter=i.handlePaneEnter.bind(li(li(i))),i.handlePaneExited=i.handlePaneExited.bind(li(li(i))),i.state={activeKey:null,activeChild:null},i}var r=t.prototype;return r.getChildContext=function(){var o=this.props,i=o.bsClass,a=o.animation,u=o.mountOnEnter,d=o.unmountOnExit,h=this.state.activeKey,v=this.getContainerActiveKey(),b=h!=null?h:v,x=h!=null&&h!==v;return{$bs_tabContent:{bsClass:i,animation:a,activeKey:b,mountOnEnter:u,unmountOnExit:d,onPaneEnter:this.handlePaneEnter,onPaneExited:this.handlePaneExited,exiting:x}}},r.UNSAFE_componentWillReceiveProps=function(o){!o.animation&&this.state.activeChild&&this.setState({activeKey:null,activeChild:null})},r.componentWillUnmount=function(){this.isUnmounted=!0},r.getContainerActiveKey=function(){var o=this.context.$bs_tabContainer;return o&&o.activeKey},r.handlePaneEnter=function(o,i){return!this.props.animation||i!==this.getContainerActiveKey()?!1:(this.setState({activeKey:i,activeChild:o}),!0)},r.handlePaneExited=function(o){this.isUnmounted||this.setState(function(i){var a=i.activeChild;return a!==o?null:{activeKey:null,activeChild:null}})},r.render=function(){var o=this.props,i=o.componentClass,a=o.className,u=En(o,["componentClass","className"]),d=SS(u,["animation","mountOnEnter","unmountOnExit"]),h=d[0],v=d[1];return Die.default.createElement(i,mr({},v,{className:(0,jQe.default)(a,Qo(h,"content"))}))},t}(Die.default.Component);r4.propTypes=G4r;r4.defaultProps=H4r;r4.contextTypes=W4r;r4.childContextTypes=$4r;var sz=fo("tab",r4);var qQe=Z(ko()),lz=Z(Pe()),ci=Z(xt()),Lie=Z(Uu()),aOn=Z(j_());var Z4r={eventKey:ci.default.any,animation:ci.default.oneOfType([ci.default.bool,Lie.default]),id:ci.default.string,"aria-labelledby":ci.default.string,bsClass:ci.default.string,onEnter:ci.default.func,onEntering:ci.default.func,onEntered:ci.default.func,onExit:ci.default.func,onExiting:ci.default.func,onExited:ci.default.func,mountOnEnter:ci.default.bool,unmountOnExit:ci.default.bool},Y4r={$bs_tabContainer:ci.default.shape({getTabId:ci.default.func,getPaneId:ci.default.func}),$bs_tabContent:ci.default.shape({bsClass:ci.default.string,animation:ci.default.oneOfType([ci.default.bool,Lie.default]),activeKey:ci.default.any,mountOnEnter:ci.default.bool,unmountOnExit:ci.default.bool,onPaneEnter:ci.default.func.isRequired,onPaneExited:ci.default.func.isRequired,exiting:ci.default.bool.isRequired})},K4r={$bs_tabContainer:ci.default.oneOf([null])},uz=function(e){fn(t,e);function t(n,o){var i;return i=e.call(this,n,o)||this,i.handleEnter=i.handleEnter.bind(li(li(i))),i.handleExited=i.handleExited.bind(li(li(i))),i.in=!1,i}var r=t.prototype;return r.getChildContext=function(){return{$bs_tabContainer:null}},r.componentDidMount=function(){this.shouldBeIn()&&this.handleEnter()},r.componentDidUpdate=function(){this.in?this.shouldBeIn()||this.handleExited():this.shouldBeIn()&&this.handleEnter()},r.componentWillUnmount=function(){this.in&&this.handleExited()},r.getAnimation=function(){if(this.props.animation!=null)return this.props.animation;var o=this.context.$bs_tabContent;return o&&o.animation},r.handleEnter=function(){var o=this.context.$bs_tabContent;o&&(this.in=o.onPaneEnter(this,this.props.eventKey))},r.handleExited=function(){var o=this.context.$bs_tabContent;o&&(o.onPaneExited(this),this.in=!1)},r.isActive=function(){var o=this.context.$bs_tabContent,i=o&&o.activeKey;return this.props.eventKey===i},r.shouldBeIn=function(){return this.getAnimation()&&this.isActive()},r.render=function(){var o=this.props,i=o.eventKey,a=o.className,u=o.onEnter,d=o.onEntering,h=o.onEntered,v=o.onExit,b=o.onExiting,x=o.onExited,M=o.mountOnEnter,O=o.unmountOnExit,D=En(o,["eventKey","className","onEnter","onEntering","onEntered","onExit","onExiting","onExited","mountOnEnter","unmountOnExit"]),k=this.context,R=k.$bs_tabContent,q=k.$bs_tabContainer,B=SS(D,["animation"]),G=B[0],re=B[1],Q=this.isActive(),ie=this.getAnimation(),me=M!=null?M:R&&R.mountOnEnter,ve=O!=null?O:R&&R.unmountOnExit;if(!Q&&!ie&&ve)return null;var ye=ie===!0?Ky:ie||null;R&&(G.bsClass=Qo(R,"pane"));var we=mr({},Ho(G),{active:Q});q&&(re.id=q.getPaneId(i),re["aria-labelledby"]=q.getTabId(i));var Se=lz.default.createElement("div",mr({},re,{role:"tabpanel","aria-hidden":!Q,className:(0,qQe.default)(a,we)}));if(ye){var ge=R&&R.exiting;return lz.default.createElement(ye,{in:Q&&!ge,onEnter:Bu(this.handleEnter,u),onEntering:d,onEntered:h,onExit:v,onExiting:b,onExited:Bu(this.handleExited,x),mountOnEnter:me,unmountOnExit:ve},Se)}return Se},t}(lz.default.Component);uz.propTypes=Z4r;uz.contextTypes=Y4r;uz.childContextTypes=K4r;var cz=fo("tab-pane",uz);var X4r=mr({},cz.propTypes,{disabled:pz.default.bool,title:pz.default.node,tabClassName:pz.default.string}),n4=function(e){fn(t,e);function t(){return e.apply(this,arguments)||this}var r=t.prototype;return r.render=function(){var o=mr({},this.props);return delete o.title,delete o.disabled,delete o.tabClassName,kie.default.createElement(cz,o)},t}(kie.default.Component);n4.propTypes=X4r;n4.Container=iz;n4.Content=sz;n4.Pane=cz;var fz=n4;var H_=Z(Pe()),wd=Z(xt()),zQe=Z(Doe());var FQe=Z(Uu());var Q4r=iz.ControlledComponent,J4r={activeKey:wd.default.any,bsStyle:wd.default.oneOf(["tabs","pills"]),animation:wd.default.oneOfType([wd.default.bool,FQe.default]),id:(0,zQe.default)(wd.default.oneOfType([wd.default.string,wd.default.number])),onSelect:wd.default.func,mountOnEnter:wd.default.bool,unmountOnExit:wd.default.bool},ePr={bsStyle:"tabs",animation:!0,mountOnEnter:!1,unmountOnExit:!1};function tPr(e){var t;return xd.forEach(e,function(r){t==null&&(t=r.props.eventKey)}),t}var dz=function(e){fn(t,e);function t(){return e.apply(this,arguments)||this}var r=t.prototype;return r.renderTab=function(o){var i=o.props,a=i.title,u=i.eventKey,d=i.disabled,h=i.tabClassName;return a==null?null:H_.default.createElement(aQe,{eventKey:u,disabled:d,className:h},a)},r.render=function(){var o=this.props,i=o.id,a=o.onSelect,u=o.animation,d=o.mountOnEnter,h=o.unmountOnExit,v=o.bsClass,b=o.className,x=o.style,M=o.children,O=o.activeKey,D=O===void 0?tPr(M):O,k=En(o,["id","onSelect","animation","mountOnEnter","unmountOnExit","bsClass","className","style","children","activeKey"]);return H_.default.createElement(Q4r,{id:i,activeKey:D,onSelect:a,className:b,style:x},H_.default.createElement("div",null,H_.default.createElement(oQe,mr({},k,{role:"tablist"}),xd.map(M,this.renderTab)),H_.default.createElement(sz,{bsClass:v,animation:u,mountOnEnter:d,unmountOnExit:h},M)))},t}(H_.default.Component);dz.propTypes=J4r;dz.defaultProps=ePr;fo("tab",dz);var Rie=k_(dz,{activeKey:"onSelect"});var UQe=Z(ko()),o4=Z(Pe()),kl=Z(xt()),BQe=Z(Doe());var rPr={id:(0,BQe.default)(kl.default.oneOfType([kl.default.string,kl.default.number])),placement:kl.default.oneOf(["top","right","bottom","left"]),positionTop:kl.default.oneOfType([kl.default.number,kl.default.string]),positionLeft:kl.default.oneOfType([kl.default.number,kl.default.string]),arrowOffsetTop:kl.default.oneOfType([kl.default.number,kl.default.string]),arrowOffsetLeft:kl.default.oneOfType([kl.default.number,kl.default.string])},nPr={placement:"right"},jie=function(e){fn(t,e);function t(){return e.apply(this,arguments)||this}var r=t.prototype;return r.render=function(){var o,i=this.props,a=i.placement,u=i.positionTop,d=i.positionLeft,h=i.arrowOffsetTop,v=i.arrowOffsetLeft,b=i.className,x=i.style,M=i.children,O=En(i,["placement","positionTop","positionLeft","arrowOffsetTop","arrowOffsetLeft","className","style","children"]),D=wi(O),k=D[0],R=D[1],q=mr({},Ho(k),(o={},o[a]=!0,o)),B=mr({top:u,left:d},x),G={top:h,left:v};return o4.default.createElement("div",mr({},R,{role:"tooltip",className:(0,UQe.default)(b,q),style:B}),o4.default.createElement("div",{className:Qo(k,"arrow"),style:G}),o4.default.createElement("div",{className:Qo(k,"inner")},M))},t}(o4.default.Component);jie.propTypes=rPr;jie.defaultProps=nPr;var qie=fo("tooltip",jie);var u4=Z(xt(),1);var pi=Z(Pe(),1);var Vie=Z(xt(),1);var XQe=Z(Ph(),1);var _o=e=>e!==void 0,VQe=(e,t,r)=>t in e?e[t]:e[t]=r,i4={ELEMENT:1,ATTRIBUTE:2,TEXT:3,CDATA_SECTION:4,ENTITY_REFERENCE:5,ENTITY:6,PROCESSING_INSTRUCTION:7,COMMENT:8,DOCUMENT:9,DOCUMENT_TYPE:10,DOCUMENT_FRAGMENT:11,NOTATION:12},Uie=class{constructor(t){this._parser=new t}toDocument(t){return this._parser.parseFromString(t,"application/xml")}getAllTextContent(t,r){return gz(t,r).join("")}};function gz(e,t){return GQe(e,t,[]).join("")}function GQe(e,t,r){if(e.nodeType===i4.CDATA_SECTION||e.nodeType===i4.TEXT)t?r.push(String(e.nodeValue).replace(/(\r\n|\r|\n)/g,"")):r.push(e.nodeValue);else{var n;for(n=e.firstChild;n;n=n.nextSibling)GQe(n,t,r)}return r}function oPr(e,t,r,n){for(var o=iPr(t);o;o=aPr(o)){var i=o.namespaceURI||null,a=e[i];if(_o(a)){var u=a[o.localName];_o(u)&&u.call(n,o,r)}}}function iPr(e){let t=e.firstElementChild||e.firstChild;for(;t&&t.nodeType!==i4.ELEMENT;)t=t.nextSibling;return t}function aPr(e){let t=e.nextElementSibling||e.nextSibling;for(;t&&t.nodeType!==i4.ELEMENT;)t=t.nextSibling;return t}function Rl(e,t,r){return sPr(e,t,r)}function sPr(e,t,r){var n=_o(r)?r:{},o,i;for(o=0,i=e.length;o<i;++o)n[e[o]]=t;return n}function HQe(e,t){return function(r,n){var o=e.call(_o(t)?t:this,r,n);if(_o(o)){var i=n[n.length-1];i.push(o)}}}function tl(e,t,r,n,o){return n.push(e),oPr(t,r,n,o),n.pop()}function Wr(e,t,r){return function(n,o){let i=e.call(_o(r)?r:this,n,o);if(_o(i)){var a=o[o.length-1],u=_o(t)?t:n.localName;a[u]=i}}}function Ac(e,t,r){return function(n,o){var i=e.call(_o(r)?r:this,n,o);if(_o(i)){var a=o[o.length-1],u=_o(t)?t:n.localName,d=VQe(a,u,[]);d.push(i)}}}var lPr=/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g;function uPr(e){return e.replace(lPr,"")}function W_(e){let t=/^\s*(true|1)|(false|0)\s*$/.exec(e);if(t)return _o(t[1])||!1}function zS(e){return Tg(gz(e,!1))}function Tg(e){let t=/^\s*([+\-]?\d*\.?\d+(?:e[+\-]?\d+)?)\s*$/i.exec(e);if(t)return parseFloat(t[1])}function zie(e){return hz(gz(e,!1))}function hz(e){let t=/^\s*(\d+)\s*$/.exec(e);if(t)return parseInt(t[1],10)}function Wo(e){return uPr(gz(e,!1))}var cPr="http://www.w3.org/1999/xlink";function Bie(e){return e.getAttributeNS(cPr,"href")}function pPr(e,t){return tl({},qPr,e,t)}function WQe(e){return[Tg(e.getAttribute("minx")),Tg(e.getAttribute("miny")),Tg(e.getAttribute("maxx")),Tg(e.getAttribute("maxy"))]}function fPr(e,t){let r=WQe(e),n=[Tg(e.getAttribute("resx")),Tg(e.getAttribute("resy"))];return{crs:e.getAttribute("CRS")||e.getAttribute("SRS"),extent:r,res:n}}function dPr(e,t){let r=WQe(e);if(!(!_o(r[0])||!_o(r[1])||!_o(r[2])||!_o(r[3])))return r}function hPr(e,t){let r=parseFloat(e.getAttribute("min")),n=parseFloat(e.getAttribute("max"));return{min:r,max:n}}function mPr(e,t){let r=tl({},zPr,e,t);if(!_o(r))return;let n=r.westBoundLongitude,o=r.southBoundLatitude,i=r.eastBoundLongitude,a=r.northBoundLatitude;if(!(!_o(n)||!_o(o)||!_o(i)||!_o(a)))return[n,o,i,a]}function gPr(e,t){return tl({},NPr,e,t)}function vPr(e,t){return tl({},DPr,e,t)}function yPr(e,t){return tl({},LPr,e,t)}function _Pr(e,t){return tl({},kPr,e,t)}function bPr(e,t){return tl({},RPr,e,t)}function xPr(e,t){return tl([],jPr,e,t)}function wPr(e,t){let r=W_(e.getAttribute("queryable"));return tl({queryable:_o(r)?r:!1},YQe,e,t)}function EPr(e,t){var r=t[t.length-1];let n=tl({},YQe,e,t);if(!_o(n))return;let o=W_(e.getAttribute("queryable"));_o(o)||(o=r.queryable),n.queryable=_o(o)?o:!1;let i=hz(e.getAttribute("cascaded"));_o(i)||(i=r.cascaded),n.cascaded=i;let a=W_(e.getAttribute("opaque"));_o(a)||(a=r.opaque),n.opaque=_o(a)?a:!1;let u=W_(e.getAttribute("noSubsets"));_o(u)||(u=r.noSubsets),n.noSubsets=_o(u)?u:!1;let d=Tg(e.getAttribute("fixedWidth"));_o(d)||(d=r.fixedWidth),n.fixedWidth=d;let h=Tg(e.getAttribute("fixedHeight"));_o(h)||(h=r.fixedHeight),n.fixedHeight=h;let v=["Style","CRS","AuthorityURL"];for(let x=0,M=v.length;x<M;x++){let O=v[x],D=r[O];if(_o(D)){let k=VQe(n,O,[]);k=k.concat(D),n[O]=k}}let b=["EX_GeographicBoundingBox","BoundingBox","Dimension","Attribution","MinScaleDenominator","MaxScaleDenominator"];for(let x=0,M=b.length;x<M;x++){let O=b[x],D=n[O];if(!_o(D)){let k=r[O];n[O]=k}}return n}function SPr(e,t){return{name:e.getAttribute("name"),units:e.getAttribute("units"),unitSymbol:e.getAttribute("unitSymbol"),default:e.getAttribute("default"),multipleValues:W_(e.getAttribute("multipleValues")),nearestValue:W_(e.getAttribute("nearestValue")),current:W_(e.getAttribute("current")),values:Wo(e)}}function Ig(e,t){return tl({},HPr,e,t)}function TPr(e,t){return tl({},FPr,e,t)}function IPr(e,t){return tl({},BPr,e,t)}function MPr(e,t){return tl({},VPr,e,t)}function Fie(e,t){return tl({},UPr,e,t)}function $Qe(e,t){var r=Ig(e,t);if(_o(r)){let n=[hz(e.getAttribute("width")),hz(e.getAttribute("height"))];return r.size=n,r}}function CPr(e,t){var r=Ig(e,t);if(_o(r))return r.name=e.getAttribute("name"),r}function APr(e,t){var r=Ig(e,t);if(_o(r))return r.type=e.getAttribute("type"),r}function OPr(e,t){return tl({},GPr,e,t)}function ZQe(e,t){return tl([],WPr,e,t)}var jl=[null,"http://www.opengis.net/wms"],PPr=Rl(jl,{Service:Wr(vPr),Capability:Wr(gPr)}),NPr=Rl(jl,{Request:Wr(TPr),Exception:Wr(xPr),Layer:Wr(wPr)}),DPr=Rl(jl,{Name:Wr(Wo),Title:Wr(Wo),Abstract:Wr(Wo),KeywordList:Wr(ZQe),OnlineResource:Wr(Bie),ContactInformation:Wr(yPr),Fees:Wr(Wo),AccessConstraints:Wr(Wo),LayerLimit:Wr(zie),MaxWidth:Wr(zie),MaxHeight:Wr(zie)}),LPr=Rl(jl,{ContactPersonPrimary:Wr(_Pr),ContactPosition:Wr(Wo),ContactAddress:Wr(bPr),ContactVoiceTelephone:Wr(Wo),ContactFacsimileTelephone:Wr(Wo),ContactElectronicMailAddress:Wr(Wo)}),kPr=Rl(jl,{ContactPerson:Wr(Wo),ContactOrganization:Wr(Wo)}),RPr=Rl(jl,{AddressType:Wr(Wo),Address:Wr(Wo),City:Wr(Wo),StateOrProvince:Wr(Wo),PostCode:Wr(Wo),Country:Wr(Wo)}),jPr=Rl(jl,{Format:HQe(Wo)}),YQe=Rl(jl,{Name:Wr(Wo),Title:Wr(Wo),Abstract:Wr(Wo),KeywordList:Wr(ZQe),CRS:Ac(Wo),SRS:Ac(Wo),EX_GeographicBoundingBox:Wr(mPr),LatLonBoundingBox:Wr(dPr),BoundingBox:Ac(fPr),Dimension:Ac(SPr),Attribution:Wr(pPr),AuthorityURL:Ac(CPr),Identifier:Ac(Wo),MetadataURL:Ac(APr),DataURL:Ac(Ig),FeatureListURL:Ac(Ig),Style:Ac(OPr),MinScaleDenominator:Wr(zS),MaxScaleDenominator:Wr(zS),ScaleHint:Wr(hPr),Layer:Ac(EPr)}),qPr=Rl(jl,{Title:Wr(Wo),OnlineResource:Wr(Bie),LogoURL:Wr($Qe)}),zPr=Rl(jl,{westBoundLongitude:Wr(zS),eastBoundLongitude:Wr(zS),southBoundLatitude:Wr(zS),northBoundLatitude:Wr(zS)}),FPr=Rl(jl,{GetCapabilities:Wr(Fie),GetMap:Wr(Fie),GetFeatureInfo:Wr(Fie)}),UPr=Rl(jl,{Format:Ac(Wo),DCPType:Ac(IPr)}),BPr=Rl(jl,{HTTP:Wr(MPr)}),VPr=Rl(jl,{Get:Wr(Ig),Post:Wr(Ig)}),GPr=Rl(jl,{Name:Wr(Wo),Title:Wr(Wo),Abstract:Wr(Wo),LegendURL:Ac($Qe),StyleSheetURL:Wr(Ig),StyleURL:Wr(Ig)}),HPr=Rl(jl,{Format:Wr(Wo),OnlineResource:Wr(Bie)}),WPr=Rl(jl,{Keyword:HQe(Wo)}),mz=class{constructor(t,r){!r&&typeof window!="undefined"&&(r=window.DOMParser),this.version=void 0,this._parser=new Uie(r),this._data=t}data(t){return this._data=t,this}toJSON(t){return t=t||this._data,this.parse(t)}parse(t){return this.readFromDocument(this._parser.toDocument(t))}readFromDocument(t){for(let r=t.firstChild;r;r=r.nextSibling)if(r.nodeType==i4.ELEMENT)return this.readFromNode(r);return null}readFromNode(t){return this.version=t.getAttribute("version"),tl({version:this.version},PPr,t,[])||null}};var vz="wms-base-map-layer",a4="wms-base-map-source",s4="xyz-base-map-layer",yz="xyz-base-map-source";function KQe(e,t){return t.Capability.Layer.Layer.filter(r=>r.CRS.includes("EPSG:3857")).map(r=>{let o=r.Name;return{id:r.Title,label:r.Title,urls:[`${e}?bbox={bbox-epsg-3857}&format=image/png&service=WMS&version=1.1.0&request=GetMap&srs=EPSG:3857&transparent=true&width=512&height=512&layers=${o}`],type:"wms",layers:o,tileSize:512}})}function _z(e){return gt(this,null,function*(){let t=yield XQe.default.get(e);if(t.status===200){let r=new mz().parse(t.data);return console.log("parse",KQe(e.split("?")[0],r)),KQe(e.split("?")[0],r)}else throw new Error(`Could not fetch wms capabilities document at ${e}`)})}var QQe=(e,t,r)=>{if(!t)return!1;if(tJe(e,r),!e.getSource(a4)){let n={type:"raster",tiles:[`${t.urls[0]}?bbox={bbox-epsg-3857}&format=image/png&service=WMS&version=2.0.0&request=GetMap&CRS=EPSG:3857&transparent=true&width=512&height=512&layers=${t.layers}&STYLES=`]};t.attribution&&(n.attribution=t.attribution),e.addSource(a4,n);let o=e.getStyle().layers[0].id;e.addLayer({id:vz,type:"raster",source:a4,paint:{}},o)}},JQe=e=>{for(let{id:t}of e.getStyle().layers)(t===vz||t===s4)&&e.setLayoutProperty(t,"visibility","visible")},l4=e=>{JQe(e),e.getLayer(vz)&&e.removeLayer(vz),e.getSource(a4)&&e.removeSource(a4)},eJe=(e,t)=>{t.forEach(r=>{e.setLayoutProperty(r.id,"visibility","visible")})},tJe=(e,t)=>{t.forEach(r=>{e.setLayoutProperty(r.id,"visibility","none")})},rJe=(e,t,r)=>{if(!t)return!1;if(tJe(e,r),l4(e),!e.getSource(s4)){e.addSource(yz,{type:"raster",tiles:[t.urls[0]],attribution:t.attribution});let n=e.getStyle().layers[0].id;e.addLayer({id:s4,type:"raster",source:yz,paint:{}},n)}},nJe=e=>{JQe(e),e.getLayer(s4)&&e.removeLayer(s4),e.getSource(yz)&&e.removeSource(yz)};var oJe=e=>{let{onClose:t,onSubmit:r}=e,[n,o]=(0,pi.useState)(""),[i,a]=(0,pi.useState)(!1),[u,d]=(0,pi.useState)([]),[h,v]=(0,pi.useState)(null),b=zr(Os),x=(0,pi.useRef)(),M=(0,pi.useRef)(),O=re=>{d([]),v(null),b({id:"dialog-add-wms",type:"danger",text:re})},D=()=>{t()},k=()=>{r(h),D()},R=()=>gt(null,null,function*(){if(!dd(n)){a(!0);return}try{let re=yield _z(n);re.length!==0&&(d(re),v(re[0]))}catch(re){O(fe("dialog.add-wms.error.invalid-url"))}}),q=re=>{o(re.target.value)},B=re=>{re.code==="Enter"&&R()},G=re=>{let Q=u.find(ie=>ie.id===re.target.value);v(Q)};return pi.default.createElement("div",null,pi.default.createElement(wg,{className:"vkf-dialog-addwms",show:!0,onHide:D},pi.default.createElement(wg.Header,null,pi.default.createElement(wg.Title,null,fe("control-basemapselector-addwms-title"))),pi.default.createElement(wg.Body,null,pi.default.createElement("div",{className:"dialog-content"},pi.default.createElement("div",{className:Dt("form-group","set-url",i?"has-warning":"")},pi.default.createElement("label",{htmlFor:x.current},fe("control-basemapselector-addwms-input-label")),pi.default.createElement("div",{className:"form-group-capabilities"},pi.default.createElement("input",{type:"url",className:"form-control",ref:x,placeholder:"https://meinwms.de?Request=GetCapabilities&Service=WMS&Version=1.3.0",value:n,onChange:q,onKeyDown:B}),pi.default.createElement("button",{type:"submit",className:"btn",onClick:R},fe("control-basemapselector-addwms-btn-load-capabilities"))),pi.default.createElement("p",{className:"help-block"},fe("control-basemapselector-addwms-input-description"))),u.length>0&&h!==null&&pi.default.createElement("div",{className:Dt("form-group","set-layer")},pi.default.createElement("label",{htmlFor:M.current},fe("control-basemapselector-addwms-select-label")),pi.default.createElement("select",{ref:M,value:h.id,onChange:G,className:"form-control"},u.map(re=>pi.default.createElement("option",{key:re.id,value:re.id},re.label))),pi.default.createElement("p",{className:"help-block"},fe("control-basemapselector-addwms-select-description"))))),pi.default.createElement(wg.Footer,null,pi.default.createElement(Wq,{onClick:D},fe("control-basemapselector-addwms-btn-canel")),pi.default.createElement(Wq,{onClick:k,bsStyle:"primary",className:Dt(h===null?"disabled":"")},fe("control-basemapselector-addwms-btn-submit")))))};oJe.propTypes={onClose:Vie.default.func.isRequired,onSubmit:Vie.default.func.isRequired};var iJe=oJe;var $_="vkf-custom-basemaps",aJe=e=>{let{map:t}=e,[r,n]=Mo(sf),[o,i]=bd($_,[]),a=vr.getBaseMaps(),u=zr(Os),[d,h]=(0,au.useState)(!1),v=O=>{n(O.id)},b=()=>{h(!0)},x=O=>{O.type==="wms"&&l4(t,O),r===O.id&&n(a[0].id),i(D=>D.filter(k=>k.id!==O.id))},M=O=>{if([...a,...o].find(k=>k.id===O.id||k.label===O.label))u({id:"basemapSelector",type:"danger",text:fe("control-basemapselector-error-initializiation")});else{let k=Mt(Te({},O),{allowDeletion:!0});i(R=>[...R,k])}};return au.default.createElement(au.default.Fragment,null,r!==void 0&&au.default.createElement(au.default.Fragment,null,au.default.createElement("h2",null,fe("control-basemapselector-label"),":"),au.default.createElement("ul",{className:"wms-entries"},[...a,...o].map(O=>au.default.createElement("li",{key:O.id,className:"basemap-selector-entry"},au.default.createElement(Pie,{onChange:()=>v(O),name:O.id,value:O.id,checked:r===O.id},O.label),O.allowDeletion&&au.default.createElement("button",{className:"delete-basemap-button",onClick:D=>{D.preventDefault(),D.stopPropagation(),x(O)},title:"Remove basemap"},au.default.createElement(bg,{glyph:"remove"}))))),au.default.createElement("div",{className:"controls-container"},au.default.createElement("button",{className:"add-wms-button",onClick:b},fe("control-basemapselector-btn-addwms")))),d&&au.default.createElement(iJe,{onClose:()=>h(!1),onSubmit:M}))};aJe.propTypes={map:u4.default.object,onBasemapChange:u4.default.func,onSetNotification:u4.default.func,activeBasemapId:u4.default.string};var sJe=aJe;var Ed={RADIANS:"radians",DEGREES:"degrees",FEET:"ft",METERS:"m",PIXELS:"pixels",TILE_PIXELS:"tile-pixels",USFEET:"us-ft"},I4n={9001:Ed.METERS,9002:Ed.FEET,9003:Ed.USFEET,9101:Ed.RADIANS,9102:Ed.DEGREES};var Oc={};Oc[Ed.RADIANS]=6370997/(2*Math.PI);Oc[Ed.DEGREES]=2*Math.PI*6370997/360;Oc[Ed.FEET]=.3048;Oc[Ed.METERS]=1;Oc[Ed.USFEET]=1200/3937;var Pc=Ed;var $Pr=function(){function e(t){this.code_=t.code,this.units_=t.units,this.extent_=t.extent!==void 0?t.extent:null,this.worldExtent_=t.worldExtent!==void 0?t.worldExtent:null,this.axisOrientation_=t.axisOrientation!==void 0?t.axisOrientation:"enu",this.global_=t.global!==void 0?t.global:!1,this.canWrapX_=!!(this.global_&&this.extent_),this.getPointResolutionFunc_=t.getPointResolution,this.defaultTileGrid_=null,this.metersPerUnit_=t.metersPerUnit}return e.prototype.canWrapX=function(){return this.canWrapX_},e.prototype.getCode=function(){return this.code_},e.prototype.getExtent=function(){return this.extent_},e.prototype.getUnits=function(){return this.units_},e.prototype.getMetersPerUnit=function(){return this.metersPerUnit_||Oc[this.units_]},e.prototype.getWorldExtent=function(){return this.worldExtent_},e.prototype.getAxisOrientation=function(){return this.axisOrientation_},e.prototype.isGlobal=function(){return this.global_},e.prototype.setGlobal=function(t){this.global_=t,this.canWrapX_=!!(t&&this.extent_)},e.prototype.getDefaultTileGrid=function(){return this.defaultTileGrid_},e.prototype.setDefaultTileGrid=function(t){this.defaultTileGrid_=t},e.prototype.setExtent=function(t){this.extent_=t,this.canWrapX_=!!(this.global_&&t)},e.prototype.setWorldExtent=function(t){this.worldExtent_=t},e.prototype.setGetPointResolution=function(t){this.getPointResolutionFunc_=t},e.prototype.getPointResolutionFunc=function(){return this.getPointResolutionFunc_},e}(),bz=$Pr;function Ai(e,t,r){return Math.min(Math.max(e,t),r)}var lJe=function(){var e;return"cosh"in Math?e=Math.cosh:e=function(t){var r=Math.exp(t);return(r+1/r)/2},e}(),xz=function(){var e;return"log2"in Math?e=Math.log2:e=function(t){return Math.log(t)*Math.LOG2E},e}();function uJe(e,t,r,n,o,i){var a=o-r,u=i-n;if(a!==0||u!==0){var d=((e-r)*a+(t-n)*u)/(a*a+u*u);d>1?(r=o,n=i):d>0&&(r+=a*d,n+=u*d)}return Mg(e,t,r,n)}function Mg(e,t,r,n){var o=r-e,i=n-t;return o*o+i*i}function cJe(e){for(var t=e.length,r=0;r<t;r++){for(var n=r,o=Math.abs(e[r][r]),i=r+1;i<t;i++){var a=Math.abs(e[i][r]);a>o&&(o=a,n=i)}if(o===0)return null;var u=e[n];e[n]=e[r],e[r]=u;for(var d=r+1;d<t;d++)for(var h=-e[d][r]/e[r][r],v=r;v<t+1;v++)r==v?e[d][v]=0:e[d][v]+=h*e[r][v]}for(var b=new Array(t),x=t-1;x>=0;x--){b[x]=e[x][t]/e[x][x];for(var M=x-1;M>=0;M--)e[M][t]-=e[M][x]*b[x]}return b}function FS(e){return e*Math.PI/180}function Sd(e,t){var r=e%t;return r*t<0?r+t:r}function pJe(e,t,r){return e+r*(t-e)}function fJe(e,t){var r=Math.pow(10,t);return Math.round(e*r)/r}function c4(e,t){return Math.floor(fJe(e,t))}function p4(e,t){return Math.ceil(fJe(e,t))}var ZPr=function(){var e=function(t,r){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,o){n.__proto__=o}||function(n,o){for(var i in o)Object.prototype.hasOwnProperty.call(o,i)&&(n[i]=o[i])},e(t,r)};return function(t,r){if(typeof r!="function"&&r!==null)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");e(t,r);function n(){this.constructor=t}t.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),f4=6378137,BS=Math.PI*f4,YPr=[-BS,-BS,BS,BS],KPr=[-180,-85,180,85],wz=f4*Math.log(Math.tan(Math.PI/2)),US=function(e){ZPr(t,e);function t(r){return e.call(this,{code:r,units:Pc.METERS,extent:YPr,global:!0,worldExtent:KPr,getPointResolution:function(n,o){return n/lJe(o[1]/f4)}})||this}return t}(bz),Gie=[new US("EPSG:3857"),new US("EPSG:102100"),new US("EPSG:102113"),new US("EPSG:900913"),new US("http://www.opengis.net/def/crs/EPSG/0/3857"),new US("http://www.opengis.net/gml/srs/epsg.xml#3857")];function dJe(e,t,r){var n=e.length,o=r>1?r:2,i=t;i===void 0&&(o>2?i=e.slice():i=new Array(n));for(var a=0;a<n;a+=o){i[a]=BS*e[a]/180;var u=f4*Math.log(Math.tan(Math.PI*(+e[a+1]+90)/360));u>wz?u=wz:u<-wz&&(u=-wz),i[a+1]=u}return i}function hJe(e,t,r){var n=e.length,o=r>1?r:2,i=t;i===void 0&&(o>2?i=e.slice():i=new Array(n));for(var a=0;a<n;a+=o)i[a]=180*e[a]/BS,i[a+1]=360*Math.atan(Math.exp(e[a+1]/f4))/Math.PI-90;return i}var XPr=function(){var e=function(t,r){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,o){n.__proto__=o}||function(n,o){for(var i in o)Object.prototype.hasOwnProperty.call(o,i)&&(n[i]=o[i])},e(t,r)};return function(t,r){if(typeof r!="function"&&r!==null)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");e(t,r);function n(){this.constructor=t}t.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),QPr=6378137,mJe=[-180,-90,180,90],JPr=Math.PI*QPr/180,Z_=function(e){XPr(t,e);function t(r,n){return e.call(this,{code:r,units:Pc.DEGREES,extent:mJe,axisOrientation:n,global:!0,metersPerUnit:JPr,worldExtent:mJe})||this}return t}(bz),Hie=[new Z_("CRS:84"),new Z_("EPSG:4326","neu"),new Z_("urn:ogc:def:crs:OGC:1.3:CRS84"),new Z_("urn:ogc:def:crs:OGC:2:84"),new Z_("http://www.opengis.net/def/crs/OGC/1.3/CRS84"),new Z_("http://www.opengis.net/gml/srs/epsg.xml#4326","neu"),new Z_("http://www.opengis.net/def/crs/EPSG/0/4326","neu")];var Wie={};function gJe(e){return Wie[e]||Wie[e.replace(/urn:(x-)?ogc:def:crs:EPSG:(.*:)?(\w+)$/,"EPSG:$3")]||null}function vJe(e,t){Wie[e]=t}var Ei=typeof Object.assign=="function"?Object.assign:function(e,t){if(e==null)throw new TypeError("Cannot convert undefined or null to object");for(var r=Object(e),n=1,o=arguments.length;n<o;++n){var i=arguments[n];if(i!=null)for(var a in i)i.hasOwnProperty(a)&&(r[a]=i[a])}return r};function ff(e){for(var t in e)delete e[t]}var yJe=typeof Object.values=="function"?Object.values:function(e){var t=[];for(var r in e)t.push(e[r]);return t};function _Je(e){var t;for(t in e)return!1;return!t}var VS={};function d4(e,t,r){var n=e.getCode(),o=t.getCode();n in VS||(VS[n]={}),VS[n][o]=r}function bJe(e,t){var r;return e in VS&&t in VS[e]&&(r=VS[e][t]),r}var rl={UNKNOWN:0,INTERSECTING:1,ABOVE:2,RIGHT:4,BELOW:8,LEFT:16};function Oo(){return function(){throw new Error("Unimplemented abstract method.")}()}var eNr=0;function Ka(e){return e.ol_uid||(e.ol_uid=String(++eNr))}var Ez="6.15.1";var tNr=function(){var e=function(t,r){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,o){n.__proto__=o}||function(n,o){for(var i in o)Object.prototype.hasOwnProperty.call(o,i)&&(n[i]=o[i])},e(t,r)};return function(t,r){if(typeof r!="function"&&r!==null)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");e(t,r);function n(){this.constructor=t}t.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),rNr=function(e){tNr(t,e);function t(r){var n=this,o=Ez==="latest"?Ez:"v"+Ez.split("-")[0],i="Assertion failed. See https://openlayers.org/en/"+o+"/doc/errors/#"+r+" for details.";return n=e.call(this,i)||this,n.code=r,n.name="AssertionError",n.message=i,n}return t}(Error),Sz=rNr;function Ln(e,t){if(!e)throw new Sz(t)}function h4(e){for(var t=Fh(),r=0,n=e.length;r<n;++r)g4(t,e[r]);return t}function nNr(e,t,r){var n=Math.min.apply(null,e),o=Math.min.apply(null,t),i=Math.max.apply(null,e),a=Math.max.apply(null,t);return Ag(n,o,i,a,r)}function wJe(e,t){return t?(t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t):e.slice()}function Tz(e,t,r){var n,o;return t<e[0]?n=e[0]-t:e[2]<t?n=t-e[2]:n=0,r<e[1]?o=e[1]-r:e[3]<r?o=r-e[3]:o=0,n*n+o*o}function Cg(e,t){return $ie(e,t[0],t[1])}function EJe(e,t){return e[0]<=t[0]&&t[2]<=e[2]&&e[1]<=t[1]&&t[3]<=e[3]}function $ie(e,t,r){return e[0]<=t&&t<=e[2]&&e[1]<=r&&r<=e[3]}function xJe(e,t){var r=e[0],n=e[1],o=e[2],i=e[3],a=t[0],u=t[1],d=rl.UNKNOWN;return a<r?d=d|rl.LEFT:a>o&&(d=d|rl.RIGHT),u<n?d=d|rl.BELOW:u>i&&(d=d|rl.ABOVE),d===rl.UNKNOWN&&(d=rl.INTERSECTING),d}function Fh(){return[1/0,1/0,-1/0,-1/0]}function Ag(e,t,r,n,o){return o?(o[0]=e,o[1]=t,o[2]=r,o[3]=n,o):[e,t,r,n]}function GS(e){return Ag(1/0,1/0,-1/0,-1/0,e)}function SJe(e,t){var r=e[0],n=e[1];return Ag(r,n,r,n,t)}function TJe(e,t,r,n,o){var i=GS(o);return Zie(i,e,t,r,n)}function m4(e,t){return e[0]==t[0]&&e[2]==t[2]&&e[1]==t[1]&&e[3]==t[3]}function IJe(e,t){return t[0]<e[0]&&(e[0]=t[0]),t[2]>e[2]&&(e[2]=t[2]),t[1]<e[1]&&(e[1]=t[1]),t[3]>e[3]&&(e[3]=t[3]),e}function g4(e,t){t[0]<e[0]&&(e[0]=t[0]),t[0]>e[2]&&(e[2]=t[0]),t[1]<e[1]&&(e[1]=t[1]),t[1]>e[3]&&(e[3]=t[1])}function Zie(e,t,r,n,o){for(;r<n;r+=o)oNr(e,t[r],t[r+1]);return e}function oNr(e,t,r){e[0]=Math.min(e[0],t),e[1]=Math.min(e[1],r),e[2]=Math.max(e[2],t),e[3]=Math.max(e[3],r)}function Iz(e,t){var r;return r=t(Mz(e)),r||(r=t(Cz(e)),r)||(r=t(Az(e)),r)||(r=t(r0(e)),r)?r:!1}function v4(e){var t=0;return Y_(e)||(t=ta(e)*ql(e)),t}function Mz(e){return[e[0],e[1]]}function Cz(e){return[e[2],e[1]]}function Td(e){return[(e[0]+e[2])/2,(e[1]+e[3])/2]}function MJe(e,t){var r;return t==="bottom-left"?r=Mz(e):t==="bottom-right"?r=Cz(e):t==="top-left"?r=r0(e):t==="top-right"?r=Az(e):Ln(!1,13),r}function y4(e,t,r,n,o){var i=iNr(e,t,r,n),a=i[0],u=i[1],d=i[2],h=i[3],v=i[4],b=i[5],x=i[6],M=i[7];return Ag(Math.min(a,d,v,x),Math.min(u,h,b,M),Math.max(a,d,v,x),Math.max(u,h,b,M),o)}function iNr(e,t,r,n){var o=t*n[0]/2,i=t*n[1]/2,a=Math.cos(r),u=Math.sin(r),d=o*a,h=o*u,v=i*a,b=i*u,x=e[0],M=e[1];return[x-d+b,M-h-v,x-d-b,M-h+v,x+d-b,M+h+v,x+d+b,M+h-v,x-d+b,M-h-v]}function ql(e){return e[3]-e[1]}function Uh(e,t,r){var n=r||Fh();return _4(e,t)?(e[0]>t[0]?n[0]=e[0]:n[0]=t[0],e[1]>t[1]?n[1]=e[1]:n[1]=t[1],e[2]<t[2]?n[2]=e[2]:n[2]=t[2],e[3]<t[3]?n[3]=e[3]:n[3]=t[3]):GS(n),n}function r0(e){return[e[0],e[3]]}function Az(e){return[e[2],e[3]]}function ta(e){return e[2]-e[0]}function _4(e,t){return e[0]<=t[2]&&e[2]>=t[0]&&e[1]<=t[3]&&e[3]>=t[1]}function Y_(e){return e[2]<e[0]||e[3]<e[1]}function CJe(e,t){return t?(t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t):e}function AJe(e,t,r){var n=!1,o=xJe(e,t),i=xJe(e,r);if(o===rl.INTERSECTING||i===rl.INTERSECTING)n=!0;else{var a=e[0],u=e[1],d=e[2],h=e[3],v=t[0],b=t[1],x=r[0],M=r[1],O=(M-b)/(x-v),D=void 0,k=void 0;i&rl.ABOVE&&!(o&rl.ABOVE)&&(D=x-(M-h)/O,n=D>=a&&D<=d),!n&&i&rl.RIGHT&&!(o&rl.RIGHT)&&(k=M-(x-d)*O,n=k>=u&&k<=h),!n&&i&rl.BELOW&&!(o&rl.BELOW)&&(D=x-(M-u)/O,n=D>=a&&D<=d),!n&&i&rl.LEFT&&!(o&rl.LEFT)&&(k=M-(x-a)*O,n=k>=u&&k<=h)}return n}function OJe(e,t,r,n){var o=[];if(n>1)for(var i=e[2]-e[0],a=e[3]-e[1],u=0;u<n;++u)o.push(e[0]+i*u/n,e[1],e[2],e[1]+a*u/n,e[2]-i*u/n,e[3],e[0],e[3]-a*u/n);else o=[e[0],e[1],e[2],e[1],e[2],e[3],e[0],e[3]];t(o,o,2);for(var d=[],h=[],u=0,v=o.length;u<v;u+=2)d.push(o[u]),h.push(o[u+1]);return nNr(d,h,r)}function PJe(e,t){return e[0]+=+t[0],e[1]+=+t[1],e}function K_(e,t){for(var r=!0,n=e.length-1;n>=0;--n)if(e[n]!=t[n]){r=!1;break}return r}function HS(e,t){var r=Math.cos(t),n=Math.sin(t),o=e[0]*r-e[1]*n,i=e[1]*r+e[0]*n;return e[0]=o,e[1]=i,e}function NJe(e,t){return e[0]*=t,e[1]*=t,e}function DJe(e,t){if(t.canWrapX()){var r=ta(t.getExtent()),n=LJe(e,t,r);n&&(e[0]-=n*r)}return e}function LJe(e,t,r){var n=t.getExtent(),o=0;if(t.canWrapX()&&(e[0]<n[0]||e[0]>n[2])){var i=r||ta(n);o=Math.floor((e[0]-n[0])/i)}return o}var aNr=6371008.8;function Yie(e,t,r){var n=r||aNr,o=FS(e[1]),i=FS(t[1]),a=(i-o)/2,u=FS(t[0]-e[0])/2,d=Math.sin(a)*Math.sin(a)+Math.sin(u)*Math.sin(u)*Math.cos(o)*Math.cos(i);return 2*n*Math.atan2(Math.sqrt(d),Math.sqrt(1-d))}var Kie=!0;function RJe(e){var t=e===void 0?!0:e;Kie=!t}function Xie(e,t,r){var n;if(t!==void 0){for(var o=0,i=e.length;o<i;++o)t[o]=e[o];n=t}else n=e.slice();return n}function jJe(e,t,r){if(t!==void 0&&e!==t){for(var n=0,o=e.length;n<o;++n)t[n]=e[n];e=t}return e}function sNr(e){vJe(e.getCode(),e),d4(e,e,Xie)}function lNr(e){e.forEach(sNr)}function Nc(e){return typeof e=="string"?gJe(e):e||null}function Qie(e,t,r,n){e=Nc(e);var o,i=e.getPointResolutionFunc();if(i){if(o=i(t,r),n&&n!==e.getUnits()){var a=e.getMetersPerUnit();a&&(o=o*a/Oc[n])}}else{var u=e.getUnits();if(u==Pc.DEGREES&&!n||n==Pc.DEGREES)o=t;else{var d=Jie(e,Nc("EPSG:4326"));if(d===jJe&&u!==Pc.DEGREES)o=t*e.getMetersPerUnit();else{var h=[r[0]-t/2,r[1],r[0]+t/2,r[1],r[0],r[1]-t/2,r[0],r[1]+t/2];h=d(h,h,2);var v=Yie(h.slice(0,2),h.slice(2,4)),b=Yie(h.slice(4,6),h.slice(6,8));o=(v+b)/2}var a=n?Oc[n]:e.getMetersPerUnit();a!==void 0&&(o/=a)}}return o}function kJe(e){lNr(e),e.forEach(function(t){e.forEach(function(r){t!==r&&d4(t,r,Xie)})})}function uNr(e,t,r,n){e.forEach(function(o){t.forEach(function(i){d4(o,i,r),d4(i,o,n)})})}function Oz(e,t){return e?typeof e=="string"?Nc(e):e:Nc(t)}function qJe(e,t){var r=b4(e,t!==void 0?t:"EPSG:3857","EPSG:4326"),n=r[0];return(n<-180||n>180)&&(r[0]=Sd(n+180,360)-180),r}function n0(e,t){if(e===t)return!0;var r=e.getUnits()===t.getUnits();if(e.getCode()===t.getCode())return r;var n=Jie(e,t);return n===Xie&&r}function Jie(e,t){var r=e.getCode(),n=t.getCode(),o=bJe(r,n);return o||(o=jJe),o}function X_(e,t){var r=Nc(e),n=Nc(t);return Jie(r,n)}function b4(e,t,r){var n=X_(t,r);return n(e,void 0,e.length)}function zJe(e,t,r,n){var o=X_(t,r);return OJe(e,o,void 0,n)}var Og=null;function FJe(){return Og}function x4(e,t){return Og?b4(e,t,Og):e}function Id(e,t){return Og?b4(e,Og,t):(Kie&&!K_(e,[0,0])&&e[0]>=-180&&e[0]<=180&&e[1]>=-90&&e[1]<=90&&(Kie=!1,console.warn("Call useGeographic() from ol/proj once to work with [longitude, latitude] coordinates.")),e)}function UJe(e,t){return Og?zJe(e,t,Og):e}function o0(e,t){return Og?zJe(e,Og,t):e}function cNr(){kJe(Gie),kJe(Hie),uNr(Hie,Gie,dJe,hJe)}cNr();var ms=Z(Pe(),1);var $S=Z(Pe(),1),eae=Z(xt(),1);var Q_=Z(Pe(),1),WS=Z(xt(),1),BJe=({checked:e,georeferenceMode:t,id:r,onClick:n,title:o})=>r!=="ToGeoref"||r==="toGeoref"&&t?Q_.default.createElement("li",null,Q_.default.createElement("label",{htmlFor:r},Q_.default.createElement("input",{checked:e,className:"facet-search-el",onChange:()=>{n(r)},id:r,title:o,type:"checkbox"}),Q_.default.createElement("span",{dangerouslySetInnerHTML:{__html:o}}))):Q_.default.createElement(Q_.default.Fragment,null);BJe.propTypes={checked:WS.default.bool,georeferenceMode:WS.default.bool,id:WS.default.string,onClick:WS.default.func,title:WS.default.string};var VJe=BJe;var tae={AE:"map_type-ae",AK:"map_type-ak",CM:"map_type-cm",GL:"map_type-gl",MB:"map_type-mb",MTB:"map_type-mtb",TK:"map_type-tk",TKX:"map_type-tkx",MM:"type-mosaic",VM:"type-vector"},pNr=(e,t)=>e.title>t.title?1:e.title<t.title?-1:0,fNr=()=>{let e=Object.keys(tae).map(t=>({key:t,title:fe(`facet-${t.toLowerCase()}`)}));return e.sort(pNr),e},dNr={};Object.keys(tae).forEach(e=>{dNr[e]=!1});var GJe=({georeferenceMode:e,mosaicMode:t})=>{let[r,n]=Mo(lf),o=(0,$S.useMemo)(()=>{let u=Te({},tae);return t&&(delete u.MM,delete u.VM),u},[t]),i=(0,$S.useMemo)(()=>fNr(),[]),a=u=>{n(d=>{let{facets:h,georeference:v}=d;if(u==="ToGeoref")return{facets:h,georeference:!v};{let b=h.slice(),x=b.findIndex(M=>M.id===u);if(x>-1)b.splice(x,1);else{let[M,O]=o[u].split("-");b.push({key:M,value:O,id:u})}return{facets:b,georeference:v}}})};return $S.default.createElement("ul",{className:"search-facet"},i.map(({key:u,title:d})=>$S.default.createElement(VJe,{checked:r.facets.findIndex(h=>h.id===u)!==-1,key:u,georeferenceMode:e,onClick:a,id:u,title:d})))};GJe.propTypes={georeferenceMode:eae.default.bool,mosaicMode:eae.default.bool};var HJe=GJe;var Pz=HJe;var Dg=Z(Pe(),1);var Mae=Z(xt(),1);var Xa=Z(Pe(),1),Dc=Z(xt(),1);function kn(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}var WJe=Number.isNaN||function(t){return typeof t=="number"&&t!==t};function hNr(e,t){return!!(e===t||WJe(e)&&WJe(t))}function mNr(e,t){if(e.length!==t.length)return!1;for(var r=0;r<e.length;r++)if(!hNr(e[r],t[r]))return!1;return!0}function gNr(e,t){t===void 0&&(t=mNr);var r,n=[],o,i=!1;function a(){for(var u=[],d=0;d<arguments.length;d++)u[d]=arguments[d];return i&&r===this&&t(u,n)||(o=e.apply(this,u),i=!0,r=this,n=u),o}return a}var Nz=gNr;var YS=Z(Pe());var vNr=typeof performance=="object"&&typeof performance.now=="function",$Je=vNr?function(){return performance.now()}:function(){return Date.now()};function ZJe(e){cancelAnimationFrame(e.id)}function yNr(e,t){var r=$Je();function n(){$Je()-r>=t?e.call(null):o.id=requestAnimationFrame(n)}var o={id:requestAnimationFrame(n)};return o}var rae=-1;function YJe(e){if(e===void 0&&(e=!1),rae===-1||e){var t=document.createElement("div"),r=t.style;r.width="50px",r.height="50px",r.overflow="scroll",document.body.appendChild(t),rae=t.offsetWidth-t.clientWidth,document.body.removeChild(t)}return rae}var ZS=null;function KJe(e){if(e===void 0&&(e=!1),ZS===null||e){var t=document.createElement("div"),r=t.style;r.width="50px",r.height="50px",r.overflow="scroll",r.direction="rtl";var n=document.createElement("div"),o=n.style;return o.width="100px",o.height="100px",t.appendChild(n),document.body.appendChild(t),t.scrollLeft>0?ZS="positive-descending":(t.scrollLeft=1,t.scrollLeft===0?ZS="negative":ZS="positive-ascending"),document.body.removeChild(t),ZS}return ZS}var _Nr=150,bNr=function(t,r){return t};function xNr(e){var t,r=e.getItemOffset,n=e.getEstimatedTotalSize,o=e.getItemSize,i=e.getOffsetForIndexAndAlignment,a=e.getStartIndexForOffset,u=e.getStopIndexForStartIndex,d=e.initInstanceProps,h=e.shouldResetStyleCacheOnItemSizeChange,v=e.validateProps;return t=function(b){Cq(x,b);function x(O){var D;return D=b.call(this,O)||this,D._instanceProps=d(D.props,kn(D)),D._outerRef=void 0,D._resetIsScrollingTimeoutId=null,D.state={instance:kn(D),isScrolling:!1,scrollDirection:"forward",scrollOffset:typeof D.props.initialScrollOffset=="number"?D.props.initialScrollOffset:0,scrollUpdateWasRequested:!1},D._callOnItemsRendered=void 0,D._callOnItemsRendered=Nz(function(k,R,q,B){return D.props.onItemsRendered({overscanStartIndex:k,overscanStopIndex:R,visibleStartIndex:q,visibleStopIndex:B})}),D._callOnScroll=void 0,D._callOnScroll=Nz(function(k,R,q){return D.props.onScroll({scrollDirection:k,scrollOffset:R,scrollUpdateWasRequested:q})}),D._getItemStyle=void 0,D._getItemStyle=function(k){var R=D.props,q=R.direction,B=R.itemSize,G=R.layout,re=D._getItemStyleCache(h&&B,h&&G,h&&q),Q;if(re.hasOwnProperty(k))Q=re[k];else{var ie=r(D.props,k,D._instanceProps),me=o(D.props,k,D._instanceProps),ve=q==="horizontal"||G==="horizontal",ye=q==="rtl",we=ve?ie:0;re[k]=Q={position:"absolute",left:ye?void 0:we,right:ye?we:void 0,top:ve?0:ie,height:ve?"100%":me,width:ve?me:"100%"}}return Q},D._getItemStyleCache=void 0,D._getItemStyleCache=Nz(function(k,R,q){return{}}),D._onScrollHorizontal=function(k){var R=k.currentTarget,q=R.clientWidth,B=R.scrollLeft,G=R.scrollWidth;D.setState(function(re){if(re.scrollOffset===B)return null;var Q=D.props.direction,ie=B;if(Q==="rtl")switch(KJe()){case"negative":ie=-B;break;case"positive-descending":ie=G-q-B;break}return ie=Math.max(0,Math.min(ie,G-q)),{isScrolling:!0,scrollDirection:re.scrollOffset<ie?"forward":"backward",scrollOffset:ie,scrollUpdateWasRequested:!1}},D._resetIsScrollingDebounced)},D._onScrollVertical=function(k){var R=k.currentTarget,q=R.clientHeight,B=R.scrollHeight,G=R.scrollTop;D.setState(function(re){if(re.scrollOffset===G)return null;var Q=Math.max(0,Math.min(G,B-q));return{isScrolling:!0,scrollDirection:re.scrollOffset<Q?"forward":"backward",scrollOffset:Q,scrollUpdateWasRequested:!1}},D._resetIsScrollingDebounced)},D._outerRefSetter=function(k){var R=D.props.outerRef;D._outerRef=k,typeof R=="function"?R(k):R!=null&&typeof R=="object"&&R.hasOwnProperty("current")&&(R.current=k)},D._resetIsScrollingDebounced=function(){D._resetIsScrollingTimeoutId!==null&&ZJe(D._resetIsScrollingTimeoutId),D._resetIsScrollingTimeoutId=yNr(D._resetIsScrolling,_Nr)},D._resetIsScrolling=function(){D._resetIsScrollingTimeoutId=null,D.setState({isScrolling:!1},function(){D._getItemStyleCache(-1,null)})},D}x.getDerivedStateFromProps=function(D,k){return wNr(D,k),v(D),null};var M=x.prototype;return M.scrollTo=function(D){D=Math.max(0,D),this.setState(function(k){return k.scrollOffset===D?null:{scrollDirection:k.scrollOffset<D?"forward":"backward",scrollOffset:D,scrollUpdateWasRequested:!0}},this._resetIsScrollingDebounced)},M.scrollToItem=function(D,k){k===void 0&&(k="auto");var R=this.props,q=R.itemCount,B=R.layout,G=this.state.scrollOffset;D=Math.max(0,Math.min(D,q-1));var re=0;if(this._outerRef){var Q=this._outerRef;B==="vertical"?re=Q.scrollWidth>Q.clientWidth?YJe():0:re=Q.scrollHeight>Q.clientHeight?YJe():0}this.scrollTo(i(this.props,D,k,G,this._instanceProps,re))},M.componentDidMount=function(){var D=this.props,k=D.direction,R=D.initialScrollOffset,q=D.layout;if(typeof R=="number"&&this._outerRef!=null){var B=this._outerRef;k==="horizontal"||q==="horizontal"?B.scrollLeft=R:B.scrollTop=R}this._callPropsCallbacks()},M.componentDidUpdate=function(){var D=this.props,k=D.direction,R=D.layout,q=this.state,B=q.scrollOffset,G=q.scrollUpdateWasRequested;if(G&&this._outerRef!=null){var re=this._outerRef;if(k==="horizontal"||R==="horizontal"){if(k==="rtl")switch(KJe()){case"negative":re.scrollLeft=-B;break;case"positive-ascending":re.scrollLeft=B;break;default:var Q=re.clientWidth,ie=re.scrollWidth;re.scrollLeft=ie-Q-B;break}else re.scrollLeft=B;}else re.scrollTop=B}this._callPropsCallbacks()},M.componentWillUnmount=function(){this._resetIsScrollingTimeoutId!==null&&ZJe(this._resetIsScrollingTimeoutId)},M.render=function(){var D=this.props,k=D.children,R=D.className,q=D.direction,B=D.height,G=D.innerRef,re=D.innerElementType,Q=D.innerTagName,ie=D.itemCount,me=D.itemData,ve=D.itemKey,ye=ve===void 0?bNr:ve,we=D.layout,Se=D.outerElementType,ge=D.outerTagName,Re=D.style,Je=D.useIsScrolling,tt=D.width,Et=this.state.isScrolling,Xe=q==="horizontal"||we==="horizontal",Pt=Xe?this._onScrollHorizontal:this._onScrollVertical,Lt=this._getRangeToRender(),Gt=Lt[0],nt=Lt[1],ct=[];if(ie>0)for(var _t=Gt;_t<=nt;_t++)ct.push((0,YS.createElement)(k,{data:me,key:ye(_t,me),index:_t,isScrolling:Je?Et:void 0,style:this._getItemStyle(_t)}));var We=n(this.props,this._instanceProps);return(0,YS.createElement)(Se||ge||"div",{className:R,onScroll:Pt,ref:this._outerRefSetter,style:vo({position:"relative",height:B,width:tt,overflow:"auto",WebkitOverflowScrolling:"touch",willChange:"transform",direction:q},Re)},(0,YS.createElement)(re||Q||"div",{children:ct,ref:G,style:{height:Xe?"100%":We,pointerEvents:Et?"none":void 0,width:Xe?We:"100%"}}))},M._callPropsCallbacks=function(){if(typeof this.props.onItemsRendered=="function"){var D=this.props.itemCount;if(D>0){var k=this._getRangeToRender(),R=k[0],q=k[1],B=k[2],G=k[3];this._callOnItemsRendered(R,q,B,G)}}if(typeof this.props.onScroll=="function"){var re=this.state,Q=re.scrollDirection,ie=re.scrollOffset,me=re.scrollUpdateWasRequested;this._callOnScroll(Q,ie,me)}},M._getRangeToRender=function(){var D=this.props,k=D.itemCount,R=D.overscanCount,q=this.state,B=q.isScrolling,G=q.scrollDirection,re=q.scrollOffset;if(k===0)return[0,0,0,0];var Q=a(this.props,re,this._instanceProps),ie=u(this.props,Q,re,this._instanceProps),me=!B||G==="backward"?Math.max(1,R):1,ve=!B||G==="forward"?Math.max(1,R):1;return[Math.max(0,Q-me),Math.max(0,Math.min(k-1,ie+ve)),Q,ie]},x}(YS.PureComponent),t.defaultProps={direction:"ltr",itemData:void 0,layout:"vertical",overscanCount:2,useIsScrolling:!1},t}var wNr=function(t,r){var n=t.children,o=t.direction,i=t.height,a=t.layout,u=t.innerTagName,d=t.outerTagName,h=t.width,v=r.instance;if(0)var b};var Dz=xNr({getItemOffset:function(t,r){var n=t.itemSize;return r*n},getItemSize:function(t,r){var n=t.itemSize;return n},getEstimatedTotalSize:function(t){var r=t.itemCount,n=t.itemSize;return n*r},getOffsetForIndexAndAlignment:function(t,r,n,o,i,a){var u=t.direction,d=t.height,h=t.itemCount,v=t.itemSize,b=t.layout,x=t.width,M=u==="horizontal"||b==="horizontal",O=M?x:d,D=Math.max(0,h*v-O),k=Math.min(D,r*v),R=Math.max(0,r*v-O+v+a);switch(n==="smart"&&(o>=R-O&&o<=k+O?n="auto":n="center"),n){case"start":return k;case"end":return R;case"center":{var q=Math.round(R+(k-R)/2);return q<Math.ceil(O/2)?0:q>D+Math.floor(O/2)?D:q}case"auto":default:return o>=R&&o<=k?o:o<R?R:k}},getStartIndexForOffset:function(t,r){var n=t.itemCount,o=t.itemSize;return Math.max(0,Math.min(n-1,Math.floor(r/o)))},getStopIndexForStartIndex:function(t,r,n){var o=t.direction,i=t.height,a=t.itemCount,u=t.itemSize,d=t.layout,h=t.width,v=o==="horizontal"||d==="horizontal",b=r*u,x=v?h:i,M=Math.ceil((x+n-b)/u);return Math.max(0,Math.min(a-1,r+M-1))},initInstanceProps:function(t){},shouldResetStyleCacheOnItemSizeChange:!0,validateProps:function(t){var r=t.itemSize}});var QJe=Z(Pe());function ENr(e){var t=e.lastRenderedStartIndex,r=e.lastRenderedStopIndex,n=e.startIndex,o=e.stopIndex;return!(n>r||o<t)}function SNr(e){for(var t=e.isItemLoaded,r=e.itemCount,n=e.minimumBatchSize,o=e.startIndex,i=e.stopIndex,a=[],u=null,d=null,h=o;h<=i;h++){var v=t(h);v?d!==null&&(a.push(u,d),u=d=null):(d=h,u===null&&(u=h))}if(d!==null){for(var b=Math.min(Math.max(d,u+n-1),r-1),x=d+1;x<=b&&!t(x);x++)d=x;a.push(u,d)}if(a.length)for(;a[1]-a[0]+1<n&&a[0]>0;){var M=a[0]-1;if(!t(M))a[0]=M;else break}return a}var TNr=function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")},INr=function(){function e(t,r){for(var n=0;n<r.length;n++){var o=r[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),MNr=function(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)},XJe=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t&&(typeof t=="object"||typeof t=="function")?t:e},CNr=function(e){MNr(t,e);function t(){var r,n,o,i;TNr(this,t);for(var a=arguments.length,u=Array(a),d=0;d<a;d++)u[d]=arguments[d];return i=(n=(o=XJe(this,(r=t.__proto__||Object.getPrototypeOf(t)).call.apply(r,[this].concat(u))),o),o._lastRenderedStartIndex=-1,o._lastRenderedStopIndex=-1,o._memoizedUnloadedRanges=[],o._onItemsRendered=function(h){var v=h.visibleStartIndex,b=h.visibleStopIndex;o._lastRenderedStartIndex=v,o._lastRenderedStopIndex=b,o._ensureRowsLoaded(v,b)},o._setRef=function(h){o._listRef=h},n),XJe(o,i)}return INr(t,[{key:"resetloadMoreItemsCache",value:function(){var n=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!1;this._memoizedUnloadedRanges=[],n&&this._ensureRowsLoaded(this._lastRenderedStartIndex,this._lastRenderedStopIndex)}},{key:"componentDidMount",value:function(){}},{key:"render",value:function(){var n=this.props.children;return n({onItemsRendered:this._onItemsRendered,ref:this._setRef})}},{key:"_ensureRowsLoaded",value:function(n,o){var i=this.props,a=i.isItemLoaded,u=i.itemCount,d=i.minimumBatchSize,h=d===void 0?10:d,v=i.threshold,b=v===void 0?15:v,x=SNr({isItemLoaded:a,itemCount:u,minimumBatchSize:h,startIndex:Math.max(0,n-b),stopIndex:Math.min(u-1,o+b)});(this._memoizedUnloadedRanges.length!==x.length||this._memoizedUnloadedRanges.some(function(M,O){return x[O]!==M}))&&(this._memoizedUnloadedRanges=x,this._loadUnloadedRanges(x))}},{key:"_loadUnloadedRanges",value:function(n){for(var o=this,i=this.props.loadMoreItems||this.props.loadMoreRows,a=function(h){var v=n[h],b=n[h+1],x=i(v,b);x!=null&&x.then(function(){if(ENr({lastRenderedStartIndex:o._lastRenderedStartIndex,lastRenderedStopIndex:o._lastRenderedStopIndex,startIndex:v,stopIndex:b})){if(o._listRef==null)return;typeof o._listRef.resetAfterIndex=="function"?o._listRef.resetAfterIndex(v,!0):(typeof o._listRef._getItemStyleCache=="function"&&o._listRef._getItemStyleCache(-1),o._listRef.forceUpdate())}})},u=0;u<n.length;u+=2)a(u)}}]),t}(QJe.PureComponent),JJe=CNr;var J_=Z(Pe(),1);var Lz=Z(xt(),1);var ANr={time_period_start:"mapsearch-time",title:"mapsearch-title",map_scale:"mapsearch-map_scale",georeference:"mapsearch-georeference"},eet=({onClick:e,sortOrder:t,type:r})=>{let n=()=>{e(r)},o=a=>{a.keyCode===13&&n()},i=(0,J_.useMemo)(()=>{let a=ANr[r];return fe(a)},[r]);return J_.default.createElement("div",{className:Dt("inner-col",r)},J_.default.createElement("div",{className:Dt("sort-element",r,t),onClick:n,onKeyDown:o,tabIndex:0},i,J_.default.createElement("span",{className:"caret-container"},J_.default.createElement("span",{className:"caret caret-reversed"}))))};eet.propTypes={onClick:Lz.default.func,sortOrder:Lz.default.string,type:Lz.default.string};var tet=eet;var Het=Z(Pe(),1);var I4=Z(Pe(),1);var Ro=Z(Pe(),1),fp=Z(xt(),1);var T4=Z(Sae(),1);var Net=(e,t)=>e.findIndex(r=>r.getId()===t.getId())!==-1,MDr="http://www.deutschefotothek.de/images/noimage/image120.jpg",S4=e=>e.getType()===co.VECTOR_MAP?vr.getSettings().FALLBACK_THUMBNAIL:MDr,zz=e=>{let t=e.getMetadata(qe.thumbnailUrl);return!Me(t)||t===""?S4(e):t.replace("http:","")};var Det=({children:e,data:t,index:r,onClick:n,onMouseEnter:o,onMouseLeave:i,style:a})=>{var ve;let{direction:u,maps:d}=t,h=(ve=d[r])!=null?ve:tb,v=yt(Dn),[b,x]=(0,Ro.useState)(!1),{displayTime:M,sortTime:O}=(0,Ro.useMemo)(()=>({displayTime:h.getDisplayTime(),sortTime:h.getSortTime()}),[h]),D=(0,Ro.useMemo)(()=>zz(h),[h]),k=(0,Ro.useMemo)(()=>S4(h),[h]),R=()=>{n(h)},q=ye=>{ye.key==="Enter"&&R()},B=(0,Ro.useCallback)(()=>{D!==""&&D!==k&&x(!0)},[D,k]);(0,Ro.useEffect)(()=>{x(!1)},[h.getId()]);let G=h===tb,re=Net(v,h)&&!G,Q=h.getMetadata(qe.mapScale)==="0"||h.getMetadata(qe.mapScale)===0?fe("mapsearch-listelement-unknown"):`1:${h.getMetadata(qe.mapScale)}`,ie=h.getMetadata(qe.type)===co.MOSAIC_MAP,me=h.getMetadata(qe.type)===co.VECTOR_MAP;return Ro.default.createElement("li",{tabIndex:0,style:a,className:Dt("vkf-mapsearch-record",h.getMetadata(qe.type),re&&"selected",u,G&&"loading"),id:h.getMetadata(qe.id),onClick:G?void 0:R,onKeyDown:G?void 0:q,onMouseEnter:o,onMouseLeave:i},e,Ro.default.createElement("span",{className:"data-col time"},isNaN(O)?"":O),Ro.default.createElement("span",{className:"data-col title"},h.getMetadata(qe.title)),Ro.default.createElement("span",{className:"data-col time"},"1"),Ro.default.createElement("div",{className:"view-item"},Ro.default.createElement("span",{className:"thumbnail",href:"#"},G?Ro.default.createElement(T4.default.default,{height:"calc(100% - 6px)"}):Ro.default.createElement(Ro.default.Fragment,null,Ro.default.createElement("img",{alt:`Thumbnail Image of Map ${h.getMetadata(qe.title)} ${M}`,onError:B,src:b?k:D}),ie&&Ro.default.createElement("span",{className:Dt("mosaic-badge",re&&"selected")},fe("mosaic-badge-title")),me&&Ro.default.createElement("span",{className:Dt("vector-badge",re&&"selected")},fe("vector-badge-title"))),re&&Ro.default.createElement("span",{className:"badge selected-badge"},Ro.default.createElement("span",{className:"glyphicon glyphicon-ok"})," ")),Ro.default.createElement("div",{className:"overview"},Ro.default.createElement("h2",null,G?Ro.default.createElement(T4.default.default,null):h.getMetadata(qe.title)),Ro.default.createElement("div",{className:"details"},Ro.default.createElement("div",{className:"timestamp"},G?Ro.default.createElement(T4.default.default,null):`${fe("mapsearch-listelement-time")} ${M}`),!me&&Ro.default.createElement("div",{className:"scale"},G?Ro.default.createElement(T4.default.default,null):`${fe("mapsearch-listelement-scale")} ${Q}`),!h.getMetadata(qe.hasGeoReference)&&Ro.default.createElement("div",{className:"georeference"},fe("mapsearch-listelement-no-georef"))))))};Det.propTypes={children:fp.default.element,data:fp.default.shape({direction:fp.default.oneOf(["horizontal","vertical"]),feature:fp.default.object,is3d:fp.default.bool,maps:fp.default.object,selected:fp.default.bool}),onClick:fp.default.func,onMouseEnter:fp.default.func,onMouseLeave:fp.default.func,index:fp.default.number,style:fp.default.object};var Tae=Det;var Let=e=>{var d;let{data:t,index:r}=e,{maps:n}=t,o=yt(tr),i=(d=n[r])!=null?d:tb,a=(0,I4.useCallback)(()=>{Me(o)&&one(o,i.getPreviewFeature())},[o,i]),u=(0,I4.useCallback)(()=>{Me(o)&&one(o,{type:"FeatureCollection",features:[]})},[o,i]);return I4.default.createElement(Tae,Te({onMouseEnter:a,onMouseLeave:u},e))};Let.propTypes=Te({},Tae.propTypes);var Iae=Let;var ket=Z(Ph(),1);var CDr=e=>gt(null,null,function*(){var t;try{let r=yield ket.default.get(`${e}/tilemapresource.xml`),n=new DOMParser().parseFromString(r.data,"text/xml"),o=n.getElementsByTagName("BoundingBox")[0],i=[o.getAttribute("minx"),o.getAttribute("miny"),o.getAttribute("maxx"),o.getAttribute("maxy")].map(parseFloat),a=n.getElementsByTagName("TileSet"),u=(t=parseInt(n.getElementsByTagName("TileFormat")[0].getAttribute("width")))!=null?t:256;return{bounds:i,maxZoom:a.length-1,tileSize:u}}catch(r){return console.error("Error fetching or parsing XML:",r),null}}),XS=e=>gt(null,null,function*(){let t=e.getMetadata(qe.tmsUrls),r=e.getMetadata(qe.onlineResources).find(i=>i.type==="WMS").url,n=Array.isArray(t)&&t.length>0,o;if(n){let{maxZoom:i,bounds:a,tileSize:u}=yield CDr(t[0]);o={bounds:a,tileSize:u,maxzoom:i,tiles:t.map(d=>`${d}/{z}/{x}/{y}.png`),scheme:"tms"}}else o={tiles:(yield _z(r))[0].urls};return o});var Ret=(e,t)=>gt(null,null,function*(){return(yield vr.getGeoreferenceApiClient().post("/vector_maps/",Te({geojson:e},t))).data.id}),jet=(e,t,r,n)=>gt(null,null,function*(){let o=vr.getGeoreferenceApiClient(),i=`/vector_maps/${e}`;return(yield o.patch(i,{geojson:t,metadata:r,current_version:n})).data.version}),qet=e=>gt(null,null,function*(){let t=vr.getGeoreferenceApiClient(),r=`/vector_maps/${e}`;return(yield t.get(r)).data}),zet=e=>gt(null,null,function*(){let t=vr.getGeoreferenceApiClient(),r=`/vector_maps/${e}`;return(yield t.delete(r)).data}),Fet=e=>gt(null,null,function*(){let t=vr.getGeoreferenceApiClient(),r=`/vector_maps/${e}/versions`;return(yield t.get(r)).data}),Uet=(e,t)=>gt(null,null,function*(){let r=vr.getGeoreferenceApiClient(),n=`/vector_maps/${e}/versions/${t}`;return(yield r.get(n)).data}),Bet=e=>gt(null,null,function*(){let t=vr.getGeoreferenceApiClient(),r=`/vector_maps/${e}/roles`;return(yield t.get(r)).data}),Vet=(e,t)=>gt(null,null,function*(){let r=vr.getGeoreferenceApiClient(),n=`/vector_maps/${e}/roles`;return(yield r.patch(n,Te({},t))).data});var Get=Z(Ph(),1);var ADr=e=>gt(null,null,function*(){let t=e.getMetadata(qe.externalContentUrl),r={accept:"application/json"},n=yield Get.default.get(t,{headers:r}),o=Vo.toApplicationState(n.data);e.setGeoJson(o)}),ODr=e=>gt(null,null,function*(){let t=yield qet(e.getMetadata(qe.vectorMapId));e.updateMetadata(qe.userRole,t[qe.userRole]),e.updateMetadata(qe.version,t[qe.version]);let r=Vo.toApplicationState(t.geojson);e.setGeoJson(r)}),QS=e=>gt(null,null,function*(){if(e.isExternalVectorMap()){yield ADr(e);return}yield ODr(e)});var PDr=()=>ar(({snapshot:e,set:t})=>r=>gt(null,null,function*(){let n=yield e.getPromise(Dn),o=yield e.getPromise(tr);t(Ys,void 0);let i=n.find(u=>u.getId()===r.getId());if(i){t(Dn,n.filter(u=>u.getId()!==r.getId())),i.removeMapLibreLayers(o);return}if(r.getMetadata(qe.type)===co.VECTOR_MAP)yield QS(r),r.addLayerToMap(o),t(Dn,u=>u.concat(r));else{let u=yield XS(r);r.addLayerToMap(o,{sourceSettings:u}),t(Dn,d=>d.concat(r))}})),Wet=e=>{let t=PDr();return Het.default.createElement(Iae,Te({onClick:t},e))};Wet.propTypes=Te({},Iae.propTypes);var $et=Wet;var NDr=["map_scale","time_period_start","title","georeference"],tb=new dg({metadata:{has_georeference:!0,map_scale:"0",thumb_url:"",[qe.timePeriod]:[],title:"Loading"}}),Fz=({direction:e="vertical",itemSize:t=110,ListItemComponent:r=$et,minimumBatchSize:n,onFetchResults:o,onUpdateSortType:i,renderHeader:a=!0,searchResultDescriptor:{itemCount:u,id:d},sortSettings:h})=>{let{activeType:v,sortOrder:b}=h,x=yt(fWe),[M,O]=(0,Xa.useState)({}),D=(0,Xa.useRef)(!1),k=(0,Xa.useRef)(),R=(0,Xa.useRef)(),{height:q,width:B}=wO(R),G=(0,Xa.useCallback)(Q=>!D.current&&M[Q]!==void 0&&M[Q]!==tb,[M]),re=(0,Xa.useCallback)((Q,ie)=>{if(Q!==void 0&&ie!==void 0){let me=ie-Q+1;return o(Q,me).then(ve=>{ve&&O(ye=>{let we=D.current?{}:Object.assign({},ye);return D.current=!1,ve.forEach((Se,ge)=>{we[Q+ge]=Se}),we})})}},[o]);return(0,Xa.useEffect)(()=>{tb.updateMetadata("title",fe("mapsearch-listelement-loading"))},[]),(0,Xa.useEffect)(()=>{D.current=!0,k.current.resetloadMoreItemsCache(!0)},[d]),Xa.default.createElement("div",{className:Dt("vkf-mapsearch-result-list",e)},a&&Xa.default.createElement("div",{className:"list-header"},Xa.default.createElement("strong",{className:"list-label"},fe("mapsearch-sorting"),":"),Xa.default.createElement("div",{className:"inner-columns"},NDr.map(Q=>Xa.default.createElement(tet,{key:Q,onClick:i,sortOrder:v===Q?b:"",type:Q})))),Xa.default.createElement("div",{className:"mapsearch-contentlist-container",ref:R},Xa.default.createElement(JJe,{isItemLoaded:G,itemCount:u,loadMoreItems:re,minimumBatchSize:n,ref:k},({onItemsRendered:Q,ref:ie})=>Xa.default.createElement(Dz,{height:q,innerElementType:"ul",itemCount:u,itemSize:t,itemData:{direction:e,maps:M,is3d:x},layout:e,onItemsRendered:Q,ref:ie,width:B},r))))};Fz.propTypes={direction:Dc.default.oneOf(["horizontal","vertical"]),itemSize:Dc.default.number,minimumBatchSize:Dc.default.number,ListItemComponent:Dc.default.elementType,renderHeader:Dc.default.bool,onFetchResults:Dc.default.func,onUpdateSortType:Dc.default.func,searchResultDescriptor:Dc.default.shape({id:Dc.default.number,itemCount:Dc.default.number}),sortSettings:Dc.default.shape({activeType:Dc.default.string,sortOrder:Dc.default.string})};var DDr="title",M4={ASCENDING:"ascending",DESCENDING:"descending"},Zet=o=>{var i=o,{customQuery:e,DataProvider:t,enableOverlayLayer:r=!0}=i,n=xn(i,["customQuery","DataProvider","enableOverlayLayer"]);let[a,u]=(0,Dg.useState)({activeType:DDr,sortOrder:M4.ASCENDING}),{activeType:d,sortOrder:h}=a,v=x=>{let M=x===d&&h===M4.ASCENDING?M4.DESCENDING:M4.ASCENDING;u({sortOrder:M,activeType:x})};return Dg.default.createElement(Dg.Fragment,null,r&&Dg.default.createElement(IGe,{sortSettings:a}),Dg.default.createElement(t,{customQuery:e,renderConsumer:x=>Dg.default.createElement(Fz,Te(Te({onUpdateSortType:v,sortSettings:a},n),x)),sortSettings:a}))};Zet.propTypes=Te({DataProvider:Mae.default.elementType.isRequired,enableOverlayLayer:Mae.default.bool},Fz.propTypes);var Uz=Zet;var Aae=Z(Pe(),1),Oae=Z(xt(),1);var Cae=Z(Pe(),1),Bz=Z(xt(),1);var Yet=({name:e,color:t,size:r})=>Cae.default.createElement("svg",{viewBox:"0 0 24 24",className:`icon ${e}`,fill:t,width:r,height:r},Cae.default.createElement("use",{xlinkHref:`${vr.getSettings().ICON_SPRITE}#${e}`}));Yet.propTypes={name:Bz.default.string.isRequired,color:Bz.default.string,size:Bz.default.number};var su=Yet;var Ket=({onClick:e,isOpen:t})=>{let r=yt(lf);return Aae.default.createElement("button",{className:Dt("vkf-toggle-facets",r.facets.length>0&&"active"),onClick:e,title:fe(`mapsearch-facetedsearch-${t?"close":"open"}`)},Aae.default.createElement(su,{name:"icon-filter"}))};Ket.propTypes={isOpen:Oae.default.bool,onClick:Oae.default.func};var Vz=Ket;var Hh=Z(Pe(),1);var LDr=()=>Hh.default.createElement("div",{className:"lds-roller"},Hh.default.createElement("div",null),Hh.default.createElement("div",null),Hh.default.createElement("div",null),Hh.default.createElement("div",null),Hh.default.createElement("div",null),Hh.default.createElement("div",null),Hh.default.createElement("div",null),Hh.default.createElement("div",null)),Gz=LDr;var lu=Z(Pe(),1),i0=Z(xt(),1);var Dae=Z(Ph(),1);var kDr=function(e){let t=[],r={bool:{should:t}};for(let n=0;n<e.length;n++){let o=e[n],i={term:{}};i.term[o.key]=o.value.toLowerCase(),t.push(i)}return r},Xet=function(e,t){return{aggs:{minYear:{min:{field:e}},maxYear:{max:{field:t}}}}},Qet=function({timePeriodStartFieldName:e,timePeriodEndFieldName:t,timeValues:r,bboxFieldName:n,bboxPolygon:o,sortFieldName:i,sortValue:a,facets:u,customQueryExtension:d}){let[h,v]=r;return{query:{bool:{filter:[{range:{[e]:{lte:v}}},{range:{[t]:{gte:h}}},{geo_shape:{[n]:{relation:"intersects",shape:{type:"envelope",coordinates:o}}}},kDr(u),{term:{has_georeference:!0}},...(d||[])],must:[{match_all:{}}]}},sort:{[i]:{order:a}}}};var Hz={height:15,width:15},Jet={height:15,width:0},Pae={width:340},Nae={width:340},ett=(e,t)=>{let{map:r}=e,n,o,i,a;return t===wc.VERTICAL?(n=0,o=r.height,i=r.width,a=0):(n=0+Pae.width+Hz.width,o=r.height-Jet.height-Hz.height,i=r.width-Nae.width-Hz.width,a=Jet.height+Hz.height),[[n,o],[n,a],[i,o],[i,a]]},ttt=(e,t=[[-180,85.06],[180,-85.06]])=>{let[[r,n],[o,i]]=e,[[a,u],[d,h]]=t;return[[Math.max(a,r),Math.min(n,u)],[Math.min(d,o),Math.max(i,h)]]};var rtt=Z($E(),1),ntt=({customQuery:e,minimumBatchSize:t=20,renderConsumer:r,sortSettings:n})=>{let{activeType:o,sortOrder:i}=n,a=yt(oq),{facets:u}=yt(lf),d=yt(dS),h=yt(tr),[v,b]=(0,lu.useState)(void 0),x=zr(iq),M=zr(hS),[O,D]=Mo($y),[k,R]=Mo(Wy),[q,B]=(0,lu.useState)({itemCount:10,id:Date.now()}),re=vr.getSettings().API_SEARCH,Q=(0,lu.useCallback)(we=>{let Se=i==="ascending"?"asc":"desc",ge=ttt([[we[0],we[3]],[we[2],we[1]]]);return Qet({timePeriodStartFieldName:"time_period_start",timePeriodEndFieldName:"time_period_end",timeValues:[`${k[0]}-01-01`,`${k[1]}-12-31`],bboxFieldName:"geometry",bboxPolygon:ge,sortFieldName:o,sortValue:Se,facets:u,customQueryExtension:e})},[u,o,i,k]),ie=(0,lu.useCallback)((we,Se,ge=!1)=>{if(v===void 0)return x(!1),new Promise(tt=>tt([]));let Re=Q(v,"ESPG:4326"),Je=re+"/_search?from="+we+"&size="+Se;return x(!0),Dae.default.post(Je,Re).then(tt=>{if(tt.status===200){let Et=tt.data;return ge?Et:i$e(Et.hits.hits)}}).catch(tt=>{console.warn(tt)}).finally(()=>{x(!1)})},[Q,v]),me=(0,lu.useCallback)(()=>{ie(0,0,!0).then(we=>{let Se=we.hits.total.value;M(Se),B({itemCount:Se,id:Date.now()})})},[ie]),ve=_We(me,30),ye=(0,lu.useCallback)(()=>{if(Me(h)){let we=ett(a,d),Se=new rtt.LngLatBounds;we.forEach(Re=>{let Je=h.unproject(Re);Se.extend(Je)});let ge=Se.toArray().flat();(v===void 0||!m4(ge,v))&&b(ge)}},[h,v,a]);return(0,lu.useEffect)(()=>{if(Me(h))return h.on("moveend",ye),()=>{h.off("moveend",ye)}},[h,ye]),(0,lu.useEffect)(()=>{ve()},[u,me,v,o,i,k]),(0,lu.useEffect)(()=>{ye()},[a,h]),(0,lu.useEffect)(()=>{let we=`${re}/_search?`,Se=Xet("time_period_start","time_period_end");Dae.default.post(we,Se,{}).then(ge=>{if(ge.status===200){let Re=ge.data,Je=new Date(Re.aggregations.maxYear.value),Et=[new Date(Re.aggregations.minYear.value).getUTCFullYear(),Je.getUTCFullYear()];(O===void 0||Lne===O||Et[0]!==O[0]||Et[1]!==O[1])&&(D(Et),R(Et))}})},[]),lu.default.createElement(lu.default.Fragment,null,r({minimumBatchSize:t,onRefresh:me,onFetchResults:ie,searchResultDescriptor:q}))};ntt.propTypes={customQuery:i0.default.array,minimumBatchSize:i0.default.number,projection:i0.default.string,renderConsumer:i0.default.func,sortSettings:i0.default.shape({activeType:i0.default.string,sortOrder:i0.default.string})};var Wz=ntt;var $z=Z(xt(),1),ott="EPSG:3857",itt=({customQuery:e,MapSearchListItemComponent:t,mosaicMode:r})=>{let[n,o]=Mo(lf),[i,a]=(0,ms.useState)(!1),[u,d]=(0,ms.useState)(!1),h=yt(iq),v=yt(hS),b=()=>{a(M=>!M)},x=()=>{o(pWe)};return(0,ms.useEffect)(()=>{d(h)},[h]),ms.default.createElement("div",{className:Dt("mapsearch-container",i&&"facetedsearch-open")},ms.default.createElement("div",{className:"panel panel-default searchTablePanel"},ms.default.createElement("div",{className:"panel-heading"},ms.default.createElement("div",{className:"content"},ms.default.createElement("div",null,v===0?fe("mapsearch-found-no-maps"):`${v} ${fe("mapsearch-found-maps")}`),n.facets.length>0&&ms.default.createElement("button",{className:"remove-filter",onClick:x},ms.default.createElement(su,{name:"icon-filter"})),u&&ms.default.createElement("div",{className:"loading-spinner"},ms.default.createElement(Gz,null)),ms.default.createElement(Vz,{onClick:b,isOpen:i})),ms.default.createElement("div",{className:"facet-container"},ms.default.createElement(Pz,{georeferenceMode:!1,mosaicMode:r}))),ms.default.createElement("div",{className:"panel-body"},ms.default.createElement(Uz,{customQuery:e,DataProvider:Wz,ListItemComponent:t}))))};itt.propTypes={customQuery:$z.default.array,MapSearchListItemComponent:$z.default.elementType,mosaicMode:$z.default.bool};var att=itt;var stt=e=>typeof e=="string"||e instanceof String,RDr=e=>{if(e===void 0||!Array.isArray(e)||e.length<2)return!1;let[t,r,...n]=e;if(isNaN(t)||isNaN(r)||n.some(o=>isNaN(o)))return!1;if(!ltt(t,r)){let[o,i]=qJe([t,r],ott);return ltt(o,i)}return!0},ltt=(e,t)=>e<=180&&e>=-180&&t<=90&&t>=-90,utt=e=>{let{activeBasemapId:t,is3dEnabled:r,oid:n,operationalLayers:o,mapView:i}=e,a=!0;return a&&(a=t===void 0||stt(t)),a&&(a=r===void 0||typeof r=="boolean"),a&&(a=n===void 0||stt(n)||Array.isArray(n)),a&&(a=o===void 0||Array.isArray(o)),a&&(a=i===void 0||jDr(i,r)),a},jDr=e=>{let t,{bearing:r,center:n,pitch:o,zoom:i}=e;return t=n===void 0||RDr(n),t&&(t=o===void 0||!isNaN(o)&&o>=0),t&&(t=r===void 0||!isNaN(r)),t&&(t=i===void 0||!isNaN(i)),t};var qDr=Object.values(co);function ctt(e){return gt(this,null,function*(){let b=e,{id:t,type:r,isVisible:n,opacity:o}=b,i=xn(b,["id","type","isVisible","opacity"]),u={visibility:n?"visible":"none",opacity:o};if(!qDr.includes(r))throw console.error("Unknown layer type: ",r),new Error(`Layer type "${r}" not supported`);if(r===co.LEGACY_GEOJSON)return{layer:qne(i),settings:{layerSettings:u}};if(r===co.VECTOR_MAP&&!Me(t)){if(!Me(i.properties)||!Me(i.geojson))throw new Error("Cannot restore local vector map layer without geojson or properties");return{layer:qne(i),settings:{layerSettings:u}}}if(!Me(t))throw new Error("Cannot restore remote layers with missing id");let d=yield yS(t),h=EO(t,d),v={layer:h,settings:{layerSettings:u}};return r===co.HISTORIC_MAP&&(v.settings.sourceSettings=yield XS(h)),r===co.VECTOR_MAP&&(yield QS(h)),v})}var zne="vk_persistence_container",ftt=()=>{let e=yt(tr),[t,r]=(0,a0.useState)(void 0),n=zr(sf),o=zr(lf),i=zr(Os),a=zr(Dn),u=zr($y),d=zr(Wy),h=zr(Zs),v=vr.getGeoreferenceApiClient(),[b]=bd(zne,{operationalLayers:[],is3dEnabled:!1}),[x,M]=bd($_,[]),O=(D,k="danger")=>{i({id:"persistence-controller",type:k,text:D})};return(0,a0.useEffect)(()=>{let re=(0,ptt.parse)(location.search,{arrayFormat:"comma",parseNumbers:!0}),{b:D,v:k,oid:R,map_id:q,map_view_id:B}=re,G=xn(re,["b","v","oid","map_id","map_view_id"]);if(B!==void 0){let ie=`/map_view/${B}`;v.get(ie).then(me=>{let{map_view_json:ve}=me.data,Se=JSON.parse(ve),{customBasemaps:ye}=Se,we=xn(Se,["customBasemaps"]);ye!==void 0&&ye.length>0&&M(ye.concat(x).filter((ge,Re,Je)=>Je.findIndex(tt=>tt.id===ge.id)===Re)),we.mapView&&XWe(we.mapView)&&(we.mapView=hq(we.mapView)),r(we)})}else{let Q=e$e(k),ie={activeBasemapId:D,is3dEnabled:Q,cameraOptions:t$e(G),oid:$We(R,q),featureIdentifier:r$e(G)},me=!HWe(ie)||R!==void 0;r(me?ie:b)}},[]),(0,a0.useEffect)(()=>{if(t!==void 0){let{activeBasemapId:D,is3dEnabled:k,oid:R,operationalLayers:q,cameraOptions:B={},featureIdentifier:G}=t;if(!utt(t)){O(fe("persistencecontroller-error-persistence-object"));return}try{if(D!==void 0&&n(D),e!==void 0){let re=Object.assign({},vr.getDefaultMapView(),B);if(e.jumpTo(re),re.legacy3dMapView){let Q=e.getCanvas(),ie=Q.height,me=Q.width,ve=e.unproject([me/2,ie*.3]);e.setCenter(ve),O(fe("persistencecontroller-deprecated-3d-map-view"),"warning")}if(k&&e.enableTerrain(),q!==void 0&&q.length>0&&R===void 0)try{let Q=[];for(let ie of q){let me=ctt(ie);Q.push(me)}Promise.all(Q).then(ie=>{for(let{layer:ve,settings:ye}of ie)ve.addLayerToMap(e,ye);let me=ie.map(({layer:ve})=>ve);a(me)}).catch(ie=>{throw new Error(ie)})}catch(Q){console.error(Q),O(fe("persistencecontroller-error-persistence-object"))}else if(R!==void 0){let ie=(Array.isArray(R)?R:[R]).map(me=>a$e(me));Promise.all(ie).then(me=>{Promise.all(me.map(ve=>ve.getType()===co.VECTOR_MAP?QS(ve).then(()=>({layer:ve})):new Promise(ye=>XS(ve).then(we=>ye({layer:ve,sourceSettings:we}))))).then(ve=>{for(let{layer:ye,sourceSettings:we}of ve)ye.addLayerToMap(e,{sourceSettings:we});a(me),Me(G)&&h(G)}),(B===void 0||Object.entries(B).length===0)&&WWe(e,me)}).catch(me=>{console.error(me),O(fe("persistencecontroller-error-single-map"),"warning")})}}}catch(re){console.error(re),O(fe("persistencecontroller-error-persistence-object"))}}},[e,t]),(0,a0.useEffect)(()=>{if(t!==void 0){let{searchOptions:D}=t;if(D!==void 0){let{facets:k,timeExtent:R,timeRange:q}=D;k!==void 0&&o(k),q!==void 0&&u(q),R!==void 0&&d(R)}}},[t]),a0.default.createElement(n$e,null)};var rN=Z(Pe(),1),jdt=Z(xt(),1);var vp=Z(Pe(),1);var fa=Z(Pe(),1);var Ad=Z(Pe(),1),Yz=Z(xt(),1);var gs={INITIAL:1,FILTER:2,EDIT:3},s0=yn({key:"geoJsonLayerViewViewModeState",default:gs.INITIAL}),l0=yn({key:"geoJsonLayerViewLayerState",default:null,dangerouslyAllowMutability:!0}),dtt=Ws({key:"geoJsonLayerViewFeaturesState",get:({get:e})=>{var r,n;let t=e(l0);return e(Hy),(n=(r=t==null?void 0:t.getGeoJson())==null?void 0:r.features)!=null?n:[]},dangerouslyAllowMutability:!0}),JS=yn({key:"geoJsonLayerViewTimeExtentFilterState",default:null}),Lae=Ws({key:"geoJsonLayerViewTimeRangeState",get:({get:e})=>{var o;let t=e(dtt),r=Number.NaN,n=Number.NaN;for(let i of t){let a=(o=i.properties.time)!=null?o:[],[u,d]=a;!Nh(u)||!Nh(d)||(Number.isNaN(r)&&(r=u),Number.isNaN(n)&&(n=d),u<r&&(r=u),d>n&&(n=d))}return r===n?[]:Number.isNaN(r)||Number.isNaN(n)?[]:(r=hO(hg(r)),n=hO(hg(n)),[r,n])}}),Zz=Ws({key:"geoJsonLayerViewIsValidTimeRangeState",get:({get:e})=>e(Lae).length===2}),C4=Ws({key:"geoJsonLayerViewFilteredFeaturesState",get:({get:e})=>{let t=e(s0),r=e(dtt);if(t!==gs.FILTER)return r;let n=r,o=e(JS);if(o!==null){let[i,a]=o;n=n.filter(({properties:u})=>{var x;let[d,h]=(x=u==null?void 0:u.time)!=null?x:[],v=hO(hg(d)),b=hO(hg(h));return Number.isNaN(v)||Number.isNaN(b)?!0:v<=a&&b>=i})}return n}}),htt=Ws({key:"geoJsonLayerViewExistFilteredFeaturesState",get:({get:e})=>e(C4).length>0}),mtt=Ws({key:"geoJsonLayerViewMapFilters",get:({get:e})=>{let t=e(s0),r=e(JS);return t!==gs.FILTER||r===null?null:{timeExtent:r}}});var gtt=({className:e,onFeatureClick:t,FeatureItem:r})=>{let n=yt(C4),o=(0,Ad.useMemo)(()=>({features:n,onFeatureClick:t}),[n,t]),i=(0,Ad.useRef)(null),{height:a}=wO(i);return Ad.default.createElement(Ad.default.Fragment,null,Ad.default.createElement("div",{className:e,ref:i},Ad.default.createElement("div",{className:"geojson-layer-feature-list-container"},n.length===0&&Ad.default.createElement("div",{className:"no-feature-container"},fe("geojsonlayerpanel-no-features")),n.length>0&&Ad.default.createElement(Dz,{height:a,overscanCount:3,innerElementType:"ul",itemData:o,itemCount:n.length,width:340,itemSize:110},r))))};gtt.propTypes={className:Yz.default.string,onFeatureClick:Yz.default.func.isRequired,FeatureItem:Yz.default.object.isRequired};var vtt=gtt;var ytt=vtt;var Od=Z(Pe(),1),e2=Z(xt(),1);var rb=Z(Pe(),1),Wh=Z(xt(),1);var _tt=(0,rb.forwardRef)(function(t,r){let{children:n,className:o="",onClick:i,type:a="default",disabled:u=!1,loading:d=!1,title:h,buttonType:v,form:b}=t;return rb.default.createElement("button",{className:`vkf-button-${a} ${o} ${Dt(d&&"loading")}`,disabled:u,onClick:i,ref:r,title:h,type:v,form:b},d===!0&&rb.default.createElement(rb.default.Fragment,null,rb.default.createElement("div",{className:"loading-animation"}),n),d===!1&&n)});_tt.propTypes={children:Wh.default.node,className:Wh.default.string,onClick:Wh.default.func,disabled:Wh.default.bool,loading:Wh.default.bool,title:Wh.default.string,type:Wh.default.oneOf(["primary","default","delete","discard","edit","save"]),buttonType:Wh.default.string,form:Wh.default.string};var A4=_tt;var dn=A4;var gr=Z(Pe(),1),btt=Z(xt(),1);var zDr={addVectorMap:gr.default.createElement("svg",{width:"20",height:"16",viewBox:"0 0 20 16",fill:"none",xmlns:"http://www.w3.org/2000/svg"},gr.default.createElement("path",{d:"M5.3888 13.0958C5.31376 12.9926 5.21482 12.9091 5.10047 12.8525C4.19363 12.4067 3.42983 11.7158 2.89568 10.8581C2.36152 10.0003 2.0784 9.01005 2.0784 7.99957C2.0784 6.9891 2.36152 5.99884 2.89568 5.14109C3.42983 4.28334 4.19363 3.59241 5.10047 3.14666C5.21477 3.09032 5.3137 3.00711 5.3888 2.90416L5.4063 2.87916C5.51654 2.73062 5.57378 2.54941 5.56886 2.3645C5.56394 2.17959 5.49715 2.00167 5.37917 1.85921C5.26118 1.71674 5.09883 1.61797 4.91808 1.57868C4.73732 1.53939 4.54861 1.56186 4.38214 1.64249C3.19133 2.22398 2.18778 3.12823 1.48579 4.25223C0.783811 5.37623 0.411621 6.67479 0.411621 7.99999C0.411621 9.32519 0.783811 10.6237 1.48579 11.7477C2.18778 12.8717 3.19133 13.776 4.38214 14.3575C4.54869 14.4376 4.73726 14.4596 4.9178 14.4201C5.09833 14.3805 5.26043 14.2817 5.37826 14.1393C5.4961 13.997 5.56288 13.8192 5.56796 13.6345C5.57304 13.4498 5.51613 13.2686 5.4063 13.12L5.3888 13.0958Z",fill:"currentColor"}),gr.default.createElement("path",{d:"M12.4946 0.5C11.0113 0.5 9.56122 0.939867 8.32785 1.76398C7.09449 2.58809 6.13319 3.75943 5.56554 5.12987C4.99788 6.50032 4.84935 8.00832 5.13874 9.46318C5.42813 10.918 6.14244 12.2544 7.19133 13.3033C8.24022 14.3522 9.5766 15.0665 11.0315 15.3559C12.4863 15.6453 13.9943 15.4968 15.3648 14.9291C16.7352 14.3614 17.9065 13.4001 18.7307 12.1668C19.5548 10.9334 19.9946 9.48336 19.9946 8C19.9924 6.01155 19.2015 4.10518 17.7955 2.69914C16.3895 1.29309 14.4831 0.502206 12.4946 0.5ZM12.4946 13.8333C11.3409 13.8333 10.2131 13.4912 9.25381 12.8502C8.29452 12.2093 7.54685 11.2982 7.10533 10.2323C6.66382 9.16642 6.5483 7.99353 6.77338 6.86197C6.99846 5.73042 7.55404 4.69102 8.36984 3.87521C9.18565 3.0594 10.225 2.50383 11.3566 2.27875C12.4882 2.05367 13.661 2.16919 14.727 2.6107C15.7929 3.05221 16.7039 3.79989 17.3449 4.75917C17.9858 5.71846 18.328 6.84628 18.328 8C18.3262 9.54655 17.7111 11.0293 16.6175 12.1228C15.5239 13.2164 14.0412 13.8316 12.4946 13.8333Z",fill:"currentColor"}),gr.default.createElement("path",{d:"M15.6321 6.9583H13.7446C13.6893 6.9583 13.6364 6.93635 13.5973 6.89728C13.5582 6.85821 13.5363 6.80522 13.5363 6.74997V4.86247C13.5363 4.5862 13.4265 4.32125 13.2312 4.1259C13.0358 3.93055 12.7709 3.8208 12.4946 3.8208C12.2183 3.8208 11.9534 3.93055 11.758 4.1259C11.5627 4.32125 11.4529 4.5862 11.4529 4.86247V6.74997C11.4529 6.80522 11.431 6.85821 11.3919 6.89728C11.3528 6.93635 11.2999 6.9583 11.2446 6.9583H9.3571C9.08083 6.9583 8.81588 7.06805 8.62053 7.2634C8.42518 7.45875 8.31543 7.7237 8.31543 7.99997C8.31543 8.27623 8.42518 8.54119 8.62053 8.73654C8.81588 8.93189 9.08083 9.04163 9.3571 9.04163H11.2446C11.2999 9.04163 11.3528 9.06358 11.3919 9.10265C11.431 9.14172 11.4529 9.19471 11.4529 9.24997V11.1366C11.4529 11.4129 11.5627 11.6779 11.758 11.8732C11.9534 12.0686 12.2183 12.1783 12.4946 12.1783C12.7709 12.1783 13.0358 12.0686 13.2312 11.8732C13.4265 11.6779 13.5363 11.4129 13.5363 11.1366V9.24997C13.5363 9.19471 13.5582 9.14172 13.5973 9.10265C13.6364 9.06358 13.6893 9.04163 13.7446 9.04163H15.6321C15.9084 9.04163 16.1733 8.93189 16.3687 8.73654C16.564 8.54119 16.6738 8.27623 16.6738 7.99997C16.6738 7.7237 16.564 7.45875 16.3687 7.2634C16.1733 7.06805 15.9084 6.9583 15.6321 6.9583Z",fill:"currentColor"})),uploadVectorMap:gr.default.createElement("svg",{width:"25",height:"24",viewBox:"0 0 25 24",fill:"none",xmlns:"http://www.w3.org/2000/svg"},gr.default.createElement("path",{d:"M17.6616 10.5C13.9366 10.5 10.9116 13.525 10.9116 17.25C10.9116 20.975 13.9366 24 17.6616 24C21.3866 24 24.4116 20.975 24.4116 17.25C24.4116 13.525 21.3866 10.5 17.6616 10.5ZM17.6616 12C20.5596 12 22.9116 14.352 22.9116 17.25C22.9116 20.148 20.5596 22.5 17.6616 22.5C14.7636 22.5 12.4116 20.148 12.4116 17.25C12.4116 14.352 14.7636 12 17.6616 12ZM8.66162 19.5H2.66162C2.25062 19.5 1.91162 19.161 1.91162 18.75V2.25C1.91162 1.839 2.25062 1.5 2.66162 1.5H13.2896C13.4886 1.5 13.6796 1.579 13.8206 1.719L16.6936 4.591C16.8346 4.731 16.9136 4.922 16.9136 5.121V8.25C16.9136 8.664 17.2496 9 17.6636 9C18.0776 9 18.4136 8.664 18.4136 8.25V5.121C18.4136 4.524 18.1756 3.951 17.7536 3.529L14.8806 0.658C14.4586 0.237 13.8856 0 13.2896 0H2.66162C1.42762 0 0.411621 1.016 0.411621 2.25V18.75C0.411621 19.984 1.42762 21 2.66162 21H8.66162C9.07562 21 9.41162 20.664 9.41162 20.25C9.41162 19.836 9.07562 19.5 8.66162 19.5ZM8.88162 6.53L10.6006 8.25L8.88162 9.97C8.58862 10.262 8.58862 10.738 8.88162 11.03C9.17362 11.323 9.64962 11.323 9.94162 11.03L12.1916 8.78C12.4846 8.487 12.4846 8.013 12.1916 7.72L9.94162 5.47C9.64962 5.177 9.17362 5.177 8.88162 5.47C8.58862 5.762 8.58862 6.238 8.88162 6.53ZM5.88162 5.47L3.63162 7.72C3.33862 8.013 3.33862 8.487 3.63162 8.78L5.88162 11.03C6.17362 11.323 6.64962 11.323 6.94162 11.03C7.23462 10.738 7.23462 10.262 6.94162 9.97L5.22262 8.25L6.94162 6.53C7.23462 6.238 7.23462 5.762 6.94162 5.47C6.64962 5.177 6.17362 5.177 5.88162 5.47Z",fill:"currentColor"}),gr.default.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M17.7167 13.6361C18.2138 13.6361 18.6167 14.0391 18.6167 14.5361V19.8171C18.6167 20.3141 18.2138 20.7171 17.7167 20.7171C17.2197 20.7171 16.8167 20.3141 16.8167 19.8171L16.8167 14.5361C16.8167 14.0391 17.2197 13.6361 17.7167 13.6361Z",fill:"currentColor"}),gr.default.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M21.2572 17.1766C21.2572 17.6736 20.8543 18.0766 20.3572 18.0766H15.0763C14.5792 18.0766 14.1763 17.6736 14.1763 17.1766C14.1763 16.6795 14.5792 16.2766 15.0763 16.2766L20.3572 16.2766C20.8543 16.2766 21.2572 16.6795 21.2572 17.1766Z",fill:"currentColor"})),edit:gr.default.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20"},gr.default.createElement("path",{d:"M16.667 9.573a.833.833 0 0 0-.834.834v7.083a.834.834 0 0 1-.833.833H2.5a.833.833 0 0 1-.833-.833V3.323A.833.833 0 0 1 2.5 2.49h8.333a.833.833 0 0 0 0-1.667H2.5a2.5 2.5 0 0 0-2.5 2.5V17.49a2.5 2.5 0 0 0 2.5 2.5H15a2.5 2.5 0 0 0 2.5-2.5v-7.083a.833.833 0 0 0-.833-.834ZM19.513.482a1.706 1.706 0 0 0-2.357 0l-.884.884a.417.417 0 0 0 0 .589l1.767 1.767a.417.417 0 0 0 .59 0l.884-.884a1.666 1.666 0 0 0 0-2.356Z"}),gr.default.createElement("path",{d:"m9.466 8.762 1.767 1.767a.417.417 0 0 0 .59 0l5.303-5.303a.417.417 0 0 0 0-.59l-1.769-1.769a.43.43 0 0 0-.589 0L9.466 8.172a.417.417 0 0 0 0 .59ZM8.624 9.363a.422.422 0 0 0-.303.25l-1.01 2.529a.416.416 0 0 0 .092.449.44.44 0 0 0 .45.092l2.525-1.01a.417.417 0 0 0 .14-.681L9 9.477a.417.417 0 0 0-.376-.114Z"})),"edit-inverse":gr.default.createElement("svg",{viewBox:"0 0 14 14",xmlns:"http://www.w3.org/2000/svg"},gr.default.createElement("path",{d:"M7.98408 8.41697C7.87252 8.52907 7.73909 8.61704 7.59208 8.67538L5.53 9.50197C5.31774 9.58487 5.08603 9.60464 4.86279 9.5589C4.63955 9.51315 4.4343 9.40384 4.27175 9.24413C4.11028 9.0827 3.99972 8.87744 3.95379 8.65377C3.90785 8.43011 3.92856 8.19789 4.01333 7.98588L4.83758 5.92497C4.89649 5.77794 4.9846 5.64439 5.09658 5.53238L8.53067 2.09772C8.55074 2.07732 8.56439 2.05149 8.56994 2.02342C8.57549 1.99535 8.57269 1.96627 8.5619 1.93977C8.5511 1.91327 8.53277 1.89052 8.50918 1.87432C8.48559 1.85812 8.45778 1.84919 8.42917 1.84863H1.81883C1.33645 1.84863 0.873821 2.04026 0.532724 2.38136C0.191627 2.72245 0 3.18508 0 3.66747V11.6971C-1.22907e-08 11.9359 0.0470497 12.1724 0.138462 12.393C0.229874 12.6136 0.363857 12.8141 0.532759 12.983C0.701661 13.1518 0.902173 13.2857 1.12284 13.3771C1.34351 13.4684 1.58001 13.5154 1.81883 13.5153H9.84842C10.0872 13.5154 10.3237 13.4684 10.5443 13.3771C10.765 13.2857 10.9654 13.1518 11.1343 12.9829C11.3031 12.8141 11.4371 12.6136 11.5284 12.393C11.6198 12.1723 11.6667 11.9358 11.6667 11.6971V5.08847C11.6666 5.05971 11.658 5.03161 11.642 5.0077C11.6261 4.98379 11.6033 4.96515 11.5768 4.95412C11.5502 4.94308 11.521 4.94014 11.4928 4.94568C11.4646 4.95121 11.4386 4.96497 11.4182 4.98522L7.98408 8.41697Z"}),gr.default.createElement("path",{d:"M10.8312 1.77357C10.7755 1.72081 10.7017 1.69141 10.625 1.69141C10.5483 1.69141 10.4745 1.72081 10.4188 1.77357L5.8612 6.33174C5.83328 6.35975 5.81127 6.39307 5.79645 6.42974L4.97162 8.49241C4.95035 8.54548 4.94514 8.60363 4.95666 8.65964C4.96817 8.71564 4.99589 8.76703 5.03637 8.80741C5.0775 8.84649 5.12878 8.87323 5.18437 8.88457C5.23997 8.89592 5.29763 8.89142 5.35078 8.87157L7.41287 8.04674C7.44959 8.03203 7.48293 8.01 7.51087 7.98199L12.069 3.42441C12.1237 3.36971 12.1544 3.29554 12.1544 3.2182C12.1544 3.14086 12.1237 3.06669 12.069 3.01199L10.8312 1.77357Z"}),gr.default.createElement("path",{d:"M13.513 1.98011C13.7317 1.76133 13.8546 1.46464 13.8546 1.15528C13.8546 0.845921 13.7317 0.549228 13.513 0.330445C13.2908 0.118342 12.9954 0 12.6882 0C12.381 0 12.0856 0.118342 11.8634 0.330445L11.2444 0.949362C11.2354 0.961013 11.2272 0.973295 11.2199 0.986112C11.1818 1.03444 11.1604 1.09377 11.1587 1.15528C11.1587 1.19365 11.1663 1.23164 11.181 1.26707C11.1957 1.30251 11.2173 1.33469 11.2444 1.36178L12.4834 2.59903C12.5324 2.64926 12.5983 2.67943 12.6683 2.68364C12.7383 2.68785 12.8074 2.66579 12.862 2.62178C12.8739 2.61508 12.8852 2.60747 12.8959 2.59903L13.513 1.98011Z"})),close:gr.default.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 30 30"},gr.default.createElement("path",{d:"M0 0h30v30H0z"}),gr.default.createElement("path",{stroke:"#fff",strokeWidth:"2",d:"M0-1h15.582",transform:"scale(.98773 1.01212) rotate(45 -7.565 16.188)"}),gr.default.createElement("path",{stroke:"#fff",strokeWidth:"2",d:"M0-1h15.582",transform:"matrix(-.69843 .71568 -.69843 -.71568 19.883 9)"})),add:gr.default.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 19 19"},gr.default.createElement("path",{d:"M.875 9A8.625 8.625 0 1 0 9.5.375 8.635 8.635 0 0 0 .875 9Zm3.75-.375a.75.75 0 0 1 .75-.75h2.813a.187.187 0 0 0 .187-.188V4.876a.75.75 0 0 1 .75-.75h.75a.75.75 0 0 1 .75.75v2.813a.188.188 0 0 0 .188.187h2.812a.75.75 0 0 1 .75.75v.75a.75.75 0 0 1-.75.75h-2.813a.188.188 0 0 0-.187.188v2.812a.75.75 0 0 1-.75.75h-.75a.75.75 0 0 1-.75-.75v-2.813a.188.188 0 0 0-.188-.187H5.376a.75.75 0 0 1-.75-.75v-.75Z"})),delete:gr.default.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 18 18"},gr.default.createElement("path",{d:"M14.354 6.748H3.103a.375.375 0 0 0-.375.375V16.5a1.5 1.5 0 0 0 1.5 1.5h9.001a1.5 1.5 0 0 0 1.5-1.5V7.123a.375.375 0 0 0-.375-.375Zm-6.938 8.627a.563.563 0 1 1-1.125 0V9.749a.563.563 0 1 1 1.125 0v5.626Zm3.75 0a.563.563 0 1 1-1.125 0V9.749a.563.563 0 0 1 1.125 0v5.626ZM15.337 1.912l-3.498.675a.188.188 0 0 1-.22-.15l-.178-.92A1.875 1.875 0 0 0 9.244.033l-3.68.714A1.875 1.875 0 0 0 4.08 2.945l.178.92a.187.187 0 0 1-.15.22l-3.498.676a.75.75 0 0 0-.596.878.774.774 0 0 0 .88.595l14.729-2.85a.75.75 0 1 0-.285-1.474v.002Zm-9.788.75a.375.375 0 0 1 .3-.44l3.683-.712a.375.375 0 0 1 .438.3l.179.922a.188.188 0 0 1-.15.22l-4.052.776a.187.187 0 0 1-.22-.15l-.178-.916Z"})),discard:gr.default.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 16 16"},gr.default.createElement("path",{d:"m5 5 4.125 4.125M11 5l-6 6"}),gr.default.createElement("path",{d:"M14.667 0H1.333A1.333 1.333 0 0 0 0 1.333v13.334A1.333 1.333 0 0 0 1.333 16h9.334c.177 0 .346-.07.471-.195l4.667-4.667a.667.667 0 0 0 .195-.471V1.333A1.334 1.334 0 0 0 14.667 0ZM1.333 1.667a.333.333 0 0 1 .334-.334h12.666a.333.333 0 0 1 .334.334V10a.333.333 0 0 1-.334.333h-2.666a1.333 1.333 0 0 0-1.334 1.334v2.666a.333.333 0 0 1-.333.334H1.667a.333.333 0 0 1-.334-.334V1.667Z"})),save:gr.default.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 16 16"},gr.default.createElement("path",{d:"M12.0122 5.20332C12.0936 5.10023 12.154 4.98212 12.1897 4.85572C12.2255 4.72932 12.236 4.59711 12.2207 4.46665C12.2054 4.33618 12.1645 4.21001 12.1004 4.09534C12.0364 3.98067 11.9503 3.87974 11.8472 3.79832C11.7441 3.7169 11.626 3.65658 11.4996 3.62081C11.3732 3.58504 11.241 3.57451 11.1106 3.58984C10.9801 3.60516 10.8539 3.64603 10.7392 3.71011C10.6246 3.77419 10.5236 3.86023 10.4422 3.96332L6.71356 8.68665C6.69905 8.70522 6.68075 8.72048 6.65989 8.73143C6.63902 8.74238 6.61606 8.74876 6.59254 8.75015C6.56902 8.75153 6.54547 8.7479 6.52346 8.73948C6.50145 8.73106 6.48149 8.71805 6.46489 8.70132L5.04823 7.28465C4.85963 7.1025 4.60702 7.0017 4.34483 7.00398C4.08263 7.00626 3.83182 7.11143 3.64641 7.29684C3.461 7.48224 3.35583 7.73306 3.35355 7.99525C3.35128 8.25745 3.45207 8.51005 3.63423 8.69865L5.44823 10.5133C5.61595 10.6772 5.81604 10.8042 6.0357 10.8863C6.25536 10.9684 6.48974 11.0037 6.72383 10.99C6.95792 10.9762 7.18656 10.9137 7.3951 10.8065C7.60365 10.6993 7.7875 10.5497 7.93489 10.3673L12.0122 5.20332Z"}),gr.default.createElement("path",{d:"M14.6667 0H1.33333C0.979711 0 0.640573 0.140476 0.390524 0.390524C0.140476 0.640573 0 0.979711 0 1.33333L0 14.6667C0 15.0203 0.140476 15.3594 0.390524 15.6095C0.640573 15.8595 0.979711 16 1.33333 16H10.6667C10.8435 16 11.013 15.9297 11.138 15.8047L15.8047 11.138C15.9297 11.013 16 10.8435 16 10.6667V1.33333C16 0.979711 15.8595 0.640573 15.6095 0.390524C15.3594 0.140476 15.0203 0 14.6667 0ZM1.33333 1.66667C1.33333 1.57826 1.36845 1.49348 1.43096 1.43096C1.49348 1.36845 1.57826 1.33333 1.66667 1.33333H14.3333C14.4217 1.33333 14.5065 1.36845 14.569 1.43096C14.6315 1.49348 14.6667 1.57826 14.6667 1.66667V10C14.6667 10.0884 14.6315 10.1732 14.569 10.2357C14.5065 10.2982 14.4217 10.3333 14.3333 10.3333H11.6667C11.313 10.3333 10.9739 10.4738 10.7239 10.7239C10.4738 10.9739 10.3333 11.313 10.3333 11.6667V14.3333C10.3333 14.4217 10.2982 14.5065 10.2357 14.569C10.1732 14.6315 10.0884 14.6667 10 14.6667H1.66667C1.57826 14.6667 1.49348 14.6315 1.43096 14.569C1.36845 14.5065 1.33333 14.4217 1.33333 14.3333V1.66667Z"})),caret:gr.default.createElement("svg",{viewBox:"0 0 28 14",fill:"none",xmlns:"http://www.w3.org/2000/svg"},gr.default.createElement("path",{d:"M12.9393 10.0607L14 11.1213L15.0607 10.0607L21.0607 4.06066L23.6213 1.5H20H8H4.37868L6.93934 4.06066L12.9393 10.0607Z",fill:"#00655A",stroke:"white",strokeWidth:"3"})),"export-geojson":gr.default.createElement("svg",{viewBox:"0 0 21 25",fill:"none",xmlns:"http://www.w3.org/2000/svg"},gr.default.createElement("path",{d:"M10.4136 1V16",stroke:"#666666",strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round"}),gr.default.createElement("path",{d:"M5.91357 11.5L10.4136 16L14.9136 11.5",stroke:"#666666",strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round"}),gr.default.createElement("path",{d:"M14.1636 4.74902H16.4116C17.2073 4.74902 17.9703 5.06509 18.5329 5.6277C19.0956 6.19031 19.4116 6.95337 19.4116 7.74902V20.499C19.4116 21.2947 19.0956 22.0577 18.5329 22.6203C17.9703 23.183 17.2073 23.499 16.4116 23.499H4.41162C3.61597 23.499 2.85291 23.183 2.2903 22.6203C1.72769 22.0577 1.41162 21.2947 1.41162 20.499V7.74902C1.41162 6.95337 1.72769 6.19031 2.2903 5.6277C2.85291 5.06509 3.61597 4.74902 4.41162 4.74902H6.66162",stroke:"#666666",strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round"})),"user-roles":gr.default.createElement("svg",{viewBox:"0 0 17 16",fill:"none",xmlns:"http://www.w3.org/2000/svg"},gr.default.createElement("g",{clipPath:"url(#clip0_1491_11619)"},gr.default.createElement("path",{d:"M5.66626 2.74115C6.15948 3.25291 6.75085 3.65994 7.40499 3.9379C8.05913 4.21586 8.76261 4.35905 9.47336 4.35889C10.1932 4.3591 10.9056 4.2125 11.5668 3.92806",stroke:"currentColor",strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round"}),gr.default.createElement("path",{d:"M8.41156 7.54465C10.171 7.54465 11.5973 6.11835 11.5973 4.35892C11.5973 2.59949 10.171 1.17319 8.41156 1.17319C6.65213 1.17319 5.22583 2.59949 5.22583 4.35892C5.22583 6.11835 6.65213 7.54465 8.41156 7.54465Z",stroke:"currentColor",strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round"}),gr.default.createElement("path",{d:"M2.49536 14.8263C2.49536 13.2572 3.11869 11.7524 4.22822 10.6428C5.33776 9.5333 6.8426 8.90997 8.41172 8.90997C9.98084 8.90997 11.4857 9.5333 12.5952 10.6428C13.7048 11.7524 14.3281 13.2572 14.3281 14.8263",stroke:"currentColor",strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round"})),gr.default.createElement("defs",null,gr.default.createElement("clipPath",{id:"clip0_1491_11619"},gr.default.createElement("rect",{width:"16",height:"16",fill:"currentColor",transform:"translate(0.411621 -0.000244141)"})))),filter:gr.default.createElement("svg",{viewBox:"0 0 22 24",fill:"none",xmlns:"http://www.w3.org/2000/svg"},gr.default.createElement("path",{d:"M10.75 9.75C16.1348 9.75 20.5 7.73528 20.5 5.25C20.5 2.76472 16.1348 0.75 10.75 0.75C5.36522 0.75 1 2.76472 1 5.25C1 7.73528 5.36522 9.75 10.75 9.75Z",strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round"}),gr.default.createElement("path",{d:"M1 5.25C1.00123 7.44343 1.74225 9.57232 3.10325 11.2924C4.46425 13.0126 6.36565 14.2233 8.5 14.729V21C8.5 21.5967 8.73705 22.169 9.15901 22.591C9.58097 23.0129 10.1533 23.25 10.75 23.25C11.3467 23.25 11.919 23.0129 12.341 22.591C12.7629 22.169 13 21.5967 13 21V14.729C15.1343 14.2233 17.0358 13.0126 18.3967 11.2924C19.7577 9.57232 20.4988 7.44343 20.5 5.25",strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round"})),"metadata-panel":gr.default.createElement("svg",{viewBox:"0 0 17 18",fill:"none",xmlns:"http://www.w3.org/2000/svg"},gr.default.createElement("g",{clipPath:"url(#clip0_1419_7239)"},gr.default.createElement("path",{d:"M12.2444 13.3538C12.7967 13.3538 13.2444 12.906 13.2444 12.3538C13.2444 11.8015 12.7967 11.3538 12.2444 11.3538C11.6921 11.3538 11.2444 11.8015 11.2444 12.3538C11.2444 12.906 11.6921 13.3538 12.2444 13.3538Z",fill:"currentColor"}),gr.default.createElement("path",{d:"M16.0896 11.4357C16.263 11.2498 16.3723 11.0132 16.4013 10.7606C16.4303 10.508 16.3774 10.2528 16.2506 10.0324C16.1237 9.8121 15.9296 9.63826 15.6966 9.53649C15.4636 9.43471 15.2041 9.41037 14.9562 9.46705L14.0155 9.68438C13.9412 9.70131 13.8631 9.6894 13.7972 9.65104C13.7312 9.61268 13.6823 9.55074 13.6602 9.47771L13.3775 8.54905C13.3044 8.30537 13.1546 8.09176 12.9505 7.93991C12.7463 7.78806 12.4986 7.70605 12.2442 7.70605C11.9898 7.70605 11.7421 7.78806 11.538 7.93991C11.3338 8.09176 11.1841 8.30537 11.1109 8.54905L10.8282 9.47771C10.806 9.55065 10.757 9.6125 10.6911 9.65083C10.6252 9.68916 10.5473 9.70115 10.4729 9.68438L9.53288 9.46638C9.28515 9.40991 9.02585 9.43436 8.79304 9.53613C8.56023 9.6379 8.36617 9.81162 8.23938 10.0318C8.11258 10.252 8.05971 10.507 8.08854 10.7595C8.11737 11.0119 8.22637 11.2485 8.39955 11.4344L9.05822 12.145C9.11026 12.2019 9.13913 12.2763 9.13913 12.3534C9.13913 12.4305 9.11026 12.5048 9.05822 12.5617L8.39955 13.271C8.22608 13.4569 8.11682 13.6936 8.08783 13.9461C8.05884 14.1987 8.11165 14.454 8.2385 14.6743C8.36535 14.8947 8.55955 15.0685 8.79254 15.1703C9.02553 15.272 9.28503 15.2964 9.53288 15.2397L10.4735 15.0224C10.548 15.0058 10.626 15.018 10.6919 15.0564C10.7577 15.0948 10.8067 15.1567 10.8289 15.2297L11.1115 16.157C11.1843 16.4011 11.334 16.6151 11.5382 16.7673C11.7423 16.9195 11.9902 17.0017 12.2449 17.0017C12.4996 17.0017 12.7474 16.9195 12.9516 16.7673C13.1558 16.6151 13.3054 16.4011 13.3782 16.157L13.6609 15.229C13.6827 15.1558 13.7315 15.0936 13.7975 15.0551C13.8635 15.0166 13.9417 15.0046 14.0162 15.0217L14.9569 15.239C15.2046 15.2955 15.4639 15.2711 15.6967 15.1693C15.9295 15.0675 16.1236 14.8938 16.2504 14.6736C16.3772 14.4534 16.4301 14.1984 16.4012 13.946C16.3724 13.6935 16.2634 13.457 16.0902 13.271L15.4316 12.561C15.3795 12.5041 15.3506 12.4298 15.3506 12.3527C15.3506 12.2756 15.3795 12.2013 15.4316 12.1444L16.0896 11.4357ZM12.2442 14.3537C11.8487 14.3537 11.462 14.2364 11.1331 14.0167C10.8042 13.7969 10.5478 13.4845 10.3965 13.1191C10.2451 12.7536 10.2055 12.3515 10.2826 11.9635C10.3598 11.5756 10.5503 11.2192 10.83 10.9395C11.1097 10.6598 11.4661 10.4693 11.854 10.3921C12.242 10.315 12.6441 10.3546 13.0096 10.506C13.375 10.6573 13.6874 10.9137 13.9072 11.2426C14.1269 11.5715 14.2442 11.9581 14.2442 12.3537C14.2442 12.8841 14.0335 13.3929 13.6584 13.7679C13.2834 14.143 12.7746 14.3537 12.2442 14.3537Z",fill:"currentColor"}),gr.default.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M7.09017 13.782C7.0974 13.8043 7.09994 13.8278 7.09762 13.8511C7.06412 14.1643 7.09939 14.481 7.20095 14.7791C7.2097 14.8042 7.2123 14.831 7.20855 14.8572C7.20479 14.8835 7.19479 14.9085 7.17938 14.9301C7.16396 14.9517 7.14359 14.9693 7.11997 14.9815C7.09635 14.9936 7.07017 14.9999 7.04362 14.9998H2.41162C1.88119 14.9998 1.37248 14.789 0.997407 14.414C0.622335 14.0389 0.411621 13.5302 0.411621 12.9998V3.99976C0.411621 3.46932 0.622335 2.96062 0.997407 2.58554C1.37248 2.21047 1.88119 1.99976 2.41162 1.99976H11.745C12.2754 1.99976 12.7841 2.21047 13.1592 2.58554C13.5342 2.96062 13.745 3.46932 13.745 3.99976V6.95976C13.745 6.99007 13.7368 7.01983 13.7212 7.0458C13.7056 7.07177 13.6831 7.09297 13.6563 7.10709C13.6293 7.12109 13.599 7.12756 13.5686 7.1258C13.5382 7.12404 13.5088 7.11412 13.4836 7.09709C13.4779 7.09315 13.4721 7.08924 13.4664 7.08536C13.1685 6.74277 12.7022 6.52222 12.178 6.52222C11.6135 6.52222 11.1161 6.77796 10.824 7.16642H9.74495C9.70075 7.16642 9.65836 7.18398 9.6271 7.21524C9.59585 7.24649 9.57829 7.28889 9.57829 7.33309V8.28442C9.57831 8.30728 9.57364 8.32989 9.56458 8.35087C9.55553 8.37186 9.54226 8.39076 9.52562 8.40642C9.50904 8.42206 9.48941 8.4341 9.46795 8.44178C9.4465 8.44947 9.42369 8.45264 9.40095 8.45109C9.19328 8.43777 8.98476 8.45393 8.78162 8.49909C8.75723 8.50469 8.73189 8.50466 8.70751 8.499C8.68314 8.49334 8.66038 8.4822 8.64095 8.46642C8.62099 8.45049 8.60495 8.43018 8.59409 8.40706C8.58322 8.38394 8.57782 8.35863 8.57829 8.33309V7.33309C8.57829 7.28889 8.56073 7.24649 8.52947 7.21524C8.49822 7.18398 8.45582 7.16642 8.41162 7.16642H5.74495C5.70075 7.16642 5.65836 7.18398 5.6271 7.21524C5.59585 7.24649 5.57829 7.28889 5.57829 7.33309V9.66842C5.57829 9.71263 5.59585 9.75502 5.6271 9.78627C5.65836 9.81753 5.70075 9.83509 5.74495 9.83509H6.99562C7.02151 9.83498 7.04707 9.84096 7.07023 9.85254C7.09339 9.86412 7.1135 9.88098 7.12895 9.90176C7.1445 9.92219 7.15511 9.94593 7.15997 9.97114C7.16483 9.99635 7.1638 10.0223 7.15695 10.0471C7.10109 10.2487 7.07459 10.4573 7.07829 10.6664C7.07847 10.7102 7.06133 10.7523 7.03061 10.7835C6.99989 10.8147 6.95808 10.8326 6.91429 10.8331H5.74495C5.70075 10.8331 5.65836 10.8506 5.6271 10.8819C5.59585 10.9132 5.57829 10.9556 5.57829 10.9998V13.4998C5.57829 13.544 5.59585 13.5864 5.6271 13.6176C5.65836 13.6489 5.70075 13.6664 5.74495 13.6664H6.93162C6.95502 13.6664 6.97815 13.6714 6.99951 13.6809C7.02088 13.6904 7.03999 13.7043 7.05562 13.7218C7.07118 13.7392 7.08294 13.7598 7.09017 13.782ZM4.52881 9.78427C4.56006 9.75302 4.57762 9.71063 4.57762 9.66642L4.57829 7.33309C4.57829 7.28889 4.56073 7.24649 4.52947 7.21524C4.49822 7.18398 4.45582 7.16642 4.41162 7.16642H1.91162C1.86742 7.16642 1.82503 7.18398 1.79377 7.21524C1.76251 7.24649 1.74495 7.28889 1.74495 7.33309V9.66642C1.74495 9.71051 1.76242 9.7528 1.79353 9.78404C1.82465 9.81528 1.86687 9.83291 1.91095 9.83309H4.41095C4.45516 9.83309 4.49755 9.81553 4.52881 9.78427ZM5.68097 6.15393C5.70127 6.16226 5.72301 6.16651 5.74495 6.16642H8.41162C8.45582 6.16642 8.49822 6.14886 8.52947 6.11761C8.56073 6.08635 8.57829 6.04396 8.57829 5.99976V3.49976C8.57829 3.45555 8.56073 3.41316 8.52947 3.3819C8.49822 3.35065 8.45582 3.33309 8.41162 3.33309H5.74495C5.72301 3.333 5.70127 3.33725 5.68097 3.34558C5.66067 3.35392 5.64222 3.36618 5.62667 3.38167C5.61112 3.39715 5.59879 3.41556 5.59037 3.43582C5.58195 3.45609 5.57762 3.47781 5.57762 3.49976V5.99976C5.57762 6.0217 5.58195 6.04343 5.59037 6.06369C5.59879 6.08396 5.61112 6.10236 5.62667 6.11784C5.64222 6.13333 5.66067 6.14559 5.68097 6.15393ZM12.2164 3.52835C12.0913 3.40333 11.9218 3.33309 11.745 3.33309H9.74495C9.70075 3.33309 9.65836 3.35065 9.6271 3.3819C9.59585 3.41316 9.57829 3.45555 9.57829 3.49976V5.99976C9.57829 6.04396 9.59585 6.08635 9.6271 6.11761C9.65836 6.14886 9.70075 6.16642 9.74495 6.16642H12.245C12.2892 6.16642 12.3315 6.14886 12.3628 6.11761C12.3941 6.08635 12.4116 6.04396 12.4116 5.99976V3.99976C12.4116 3.82294 12.3414 3.65338 12.2164 3.52835ZM4.41162 3.33309H2.41162C2.23481 3.33309 2.06524 3.40333 1.94022 3.52835C1.81519 3.65338 1.74495 3.82294 1.74495 3.99976V5.99976C1.74495 6.04384 1.76242 6.08613 1.79353 6.11737C1.82465 6.14861 1.86687 6.16625 1.91095 6.16642H4.41162C4.45582 6.16642 4.49822 6.14886 4.52947 6.11761C4.56073 6.08635 4.57829 6.04396 4.57829 5.99976V3.49976C4.57829 3.45555 4.56073 3.41316 4.52947 3.3819C4.49822 3.35065 4.45582 3.33309 4.41162 3.33309ZM1.74495 10.9998V12.9998C1.74495 13.1766 1.81519 13.3461 1.94022 13.4712C2.06524 13.5962 2.23481 13.6664 2.41162 13.6664H4.41162C4.45582 13.6664 4.49822 13.6489 4.52947 13.6176C4.56073 13.5864 4.57829 13.544 4.57829 13.4998V10.9998C4.57829 10.9556 4.56073 10.9132 4.52947 10.8819C4.49822 10.8506 4.45582 10.8331 4.41162 10.8331H1.91162C1.86742 10.8331 1.82503 10.8506 1.79377 10.8819C1.76251 10.9132 1.74495 10.9556 1.74495 10.9998Z",fill:"currentColor"})),gr.default.createElement("defs",null,gr.default.createElement("clipPath",{id:"clip0_1419_7239"},gr.default.createElement("rect",{width:"16",height:"18",fill:"currentColor",transform:"translate(0.411621 -0.000244141)"})))),clock:gr.default.createElement("svg",{viewBox:"0 0 18 15",fill:"none",xmlns:"http://www.w3.org/2000/svg"},gr.default.createElement("path",{d:"M5.71093 8.93449L3.56128 6.79363L1.41162 8.93449M3.42462 7.6044C3.46047 9.22172 4.09697 10.7684 5.21112 11.9456C6.32527 13.1228 7.838 13.847 9.45702 13.9782C11.076 14.1094 12.6864 13.6383 13.977 12.656C15.2676 11.6736 16.1468 10.2498 16.4447 8.6595C16.7427 7.06923 16.4382 5.42542 15.5901 4.04569C14.742 2.66597 13.4105 1.64826 11.8529 1.18921C10.2953 0.730155 8.62218 0.862343 7.15674 1.56023",strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round",stroke:"currentColor"}),gr.default.createElement("path",{d:"M9.04295 8.08988L10.7639 5.10907",strokeWidth:"1.5",strokeLinecap:"round",stroke:"currentColor"}),gr.default.createElement("path",{d:"M9.04288 8.0901L12.0237 9.81107",strokeWidth:"1.5",strokeLinecap:"round",stroke:"currentColor"})),"image-placeholder":gr.default.createElement("svg",{viewBox:"0 0 66 66",fill:"none",xmlns:"http://www.w3.org/2000/svg"},gr.default.createElement("path",{d:"M59.7357 1.99231H14.2691C11.9863 1.99231 10.1357 3.84287 10.1357 6.12564V51.5923C10.1357 53.8751 11.9863 55.7256 14.2691 55.7256H59.7357C62.0185 55.7256 63.8691 53.8751 63.8691 51.5923V6.12564C63.8691 3.84287 62.0185 1.99231 59.7357 1.99231Z",stroke:"#cccccc",strokeWidth:"3",strokeLinecap:"round",strokeLinejoin:"round"}),gr.default.createElement("path",{d:"M55.6025 63.9924H6.00247C4.90625 63.9924 3.85492 63.5569 3.07977 62.7817C2.30462 62.0066 1.86914 60.9553 1.86914 59.859V10.259",stroke:"#cccccc",strokeWidth:"3",strokeLinecap:"round",strokeLinejoin:"round"}),gr.default.createElement("path",{d:"M23.5662 18.5256C23.362 18.5262 23.1625 18.5872 22.9929 18.7011C22.8233 18.815 22.6913 18.9766 22.6135 19.1654C22.5357 19.3543 22.5157 19.562 22.5558 19.7622C22.596 19.9625 22.6947 20.1464 22.8393 20.2906C22.9839 20.4349 23.168 20.533 23.3684 20.5726C23.5688 20.6123 23.7764 20.5917 23.965 20.5134C24.1537 20.4351 24.3149 20.3026 24.4284 20.1328C24.5418 19.9629 24.6023 19.7632 24.6023 19.559C24.6023 19.2849 24.4934 19.0221 24.2997 18.8283C24.1059 18.6345 23.843 18.5256 23.569 18.5256",stroke:"#cccccc",strokeWidth:"3",strokeLinecap:"round",strokeLinejoin:"round"}),gr.default.createElement("path",{d:"M55.6022 43.3257L44.9382 27.2443C44.7512 26.9648 44.4986 26.7353 44.2026 26.5757C43.9066 26.4161 43.5761 26.3313 43.2398 26.3286C42.9036 26.3258 42.5717 26.4053 42.2732 26.5601C41.9746 26.7149 41.7184 26.9403 41.5269 27.2167L36.0295 35.07L32.6209 32.3448C32.3972 32.1661 32.1387 32.0359 31.862 31.9624C31.5853 31.8889 31.2963 31.8736 31.0134 31.9177C30.7305 31.9617 30.4598 32.0641 30.2186 32.2182C29.9773 32.3724 29.7707 32.575 29.6118 32.8132L22.5962 43.3257H55.6022Z",stroke:"#cccccc",strokeWidth:"3",strokeLinecap:"round",strokeLinejoin:"round"})),[qu.POINT]:gr.default.createElement("svg",{viewBox:"0 0 10 13",fill:"none",xmlns:"http://www.w3.org/2000/svg"},gr.default.createElement("path",{d:"M5 0C3.67439 0.001577 2.40351 0.54425 1.46616 1.50897C0.528809 2.47369 0.00153226 3.78169 0 5.14601C0 8.69242 3.44105 11.9106 4.49526 12.8125C4.637 12.9337 4.81547 13 4.99974 13C5.18401 13 5.36247 12.9337 5.50421 12.8125C6.55684 11.9106 10 8.69134 10 5.14547C9.99833 3.78124 9.47099 2.47339 8.53366 1.50878C7.59632 0.544176 6.32552 0.00157672 5 0ZM5 7.85443C4.47952 7.85443 3.97073 7.69559 3.53797 7.39798C3.10521 7.10037 2.76792 6.67738 2.56874 6.18248C2.36956 5.68758 2.31745 5.143 2.41899 4.61762C2.52053 4.09224 2.77116 3.60964 3.13919 3.23086C3.50723 2.85208 3.97613 2.59413 4.4866 2.48962C4.99708 2.38512 5.5262 2.43875 6.00706 2.64375C6.48792 2.84874 6.89892 3.19589 7.18808 3.64129C7.47724 4.08669 7.63158 4.61033 7.63158 5.14601C7.63158 5.50168 7.56351 5.85388 7.43126 6.18248C7.29901 6.51108 7.10517 6.80965 6.86081 7.06115C6.61644 7.31265 6.32634 7.51216 6.00706 7.64827C5.68778 7.78438 5.34558 7.85443 5 7.85443Z",fill:"#999999"})),[qu.LINE_STRING]:gr.default.createElement("svg",{viewBox:"0 0 12 12",fill:"none",xmlns:"http://www.w3.org/2000/svg"},gr.default.createElement("path",{d:"M10 2L2 10",stroke:"#999999",strokeWidth:"1.5"}),gr.default.createElement("circle",{cx:"2",cy:"10",r:"2",fill:"#999999"}),gr.default.createElement("circle",{cx:"10",cy:"2",r:"2",fill:"#999999"})),[qu.POLYGON]:gr.default.createElement("svg",{viewBox:"0 0 13 14",fill:"none",xmlns:"http://www.w3.org/2000/svg"},gr.default.createElement("path",{d:"M1.50439 12.282L4.13685 5.51279L10.53 2.50427L9.77783 7.39312L9.0257 11.5298L1.50439 12.282Z",stroke:"#999999",strokeWidth:"1.5"}),gr.default.createElement("circle",{cx:"11",cy:"2",r:"2",fill:"#999999"}),gr.default.createElement("circle",{cx:"9",cy:"11",r:"2",fill:"#999999"}),gr.default.createElement("path",{d:"M4 12C4 13.1046 3.10457 14 2 14C0.89543 14 0 13.1046 0 12C0 10.8954 0.89543 10 2 10C3.10457 10 4 10.8954 4 12Z",fill:"#999999"}),gr.default.createElement("path",{d:"M6 5C6 6.10457 5.10457 7 4 7C2.89543 7 2 6.10457 2 5C2 3.89543 2.89543 3 4 3C5.10457 3 6 3.89543 6 5Z",fill:"#999999"}))},xtt=({name:e})=>{var t;return(t=zDr[e])!=null?t:""};xtt.propTypes={name:btt.default.string.isRequired};var wtt=xtt;var Fr=wtt;var Ett=({extraButton:e,isEditAllowed:t=!0,title:r,onCloseClick:n,onEditClick:o})=>{let i=(0,Od.useMemo)(()=>!Me(o),[o]);return Od.default.createElement("div",{className:"geojson-panel-header-root"},Od.default.createElement("div",{className:"header-buttons"},Me(e)&&e,!i&&Od.default.createElement(dn,{disabled:!t,className:"edit-button",onClick:o,type:"edit"},Od.default.createElement(Fr,{name:"edit"})),Od.default.createElement(dn,{className:"close-button",onClick:n},Od.default.createElement(Fr,{name:"close"}))),Od.default.createElement("div",{className:"header-info"},Od.default.createElement("span",{className:"header-title"},r)))};Ett.propTypes={extraButton:e2.default.node,isEditAllowed:e2.default.bool,title:e2.default.string.isRequired,onCloseClick:e2.default.func.isRequired,onEditClick:e2.default.func};var Stt=Ett;var df=Stt;var UDr=Z(Pe(),1),BDr=Z(va(),1),GLn=Z(Kee(),1);var kae=Z(Pe(),1);var Rae=Z(Pe(),1);var Kz=Z(Pe(),1);var jae=Z(Pe(),1);var $h=vr;var Lg="vk2-admin",O4="vk2-editor",Xz="owner",Ttt="editor",Itt=()=>$h.getUserRole()===Lg,Mtt=()=>$h.getUserRole()===Lg,Ctt=()=>$h.getUserRole()===Lg,Qz=()=>{let e=$h.getUserRole();return e===Lg||e===O4},Att=e=>{if(!Me(e.getMetadata(qe.vectorMapId)))return!0;let r=e.getMetadata(qe.userRole),n=$h.getUserRole();return n===Lg?!0:n===O4?r===Ttt||r===Xz:!1},Jz=e=>{if(e===null)return!0;let{type:t,layerRole:r,id:n}=e;if(t===$a.LOCAL)return!0;let i=$h.getUserRole();return i===Lg?!0:i===O4?r===Xz||!Me(n):!1},Ott=e=>{if(e===null)return!0;let{layerRole:t,id:r}=e,n=$h.getUserRole();return n===Lg?!0:n===O4?(t===Ttt||t===Xz)&&Me(r):!1},P4=e=>{if(e===null)return!0;let{id:t}=e;return!!($h.getUserRole()===Lg&&Me(t))},N4=e=>{if(e===null)return!0;let{layerRole:t,id:r}=e,n=$h.getUserRole();return n===Lg&&Me(r)?!0:n===O4?t===Xz&&Me(r):!1};var di=Z(Pe(),1),Jh=Z(xt(),1);function uu(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function Ptt(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,XR(n.key),n)}}function cu(e,t,r){return t&&Ptt(e.prototype,t),r&&Ptt(e,r),Object.defineProperty(e,"prototype",{writable:!1}),e}function pu(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&wS(e,t)}function Pd(e){return Pd=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},Pd(e)}function qae(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(t){}return(qae=function(){return!!e})()}function Ntt(e,t){if(t&&(Do(t)=="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return kn(e)}function fu(e){var t=qae();return function(){var r,n=Pd(e);if(t){var o=Pd(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return Ntt(this,r)}}var Yae=Z(Pe());var zae={},VDr=[],GDr=function(t){VDr.push(t)};function HDr(e,t){if(0)var r}function WDr(e,t){if(0)var r}function $Dr(){zae={}}function Dtt(e,t,r){!t&&!zae[r]&&(e(!1,r),zae[r]=!0)}function eF(e,t){Dtt(HDr,e,t)}function ZDr(e,t){Dtt(WDr,e,t)}eF.preMessage=GDr;eF.resetWarned=$Dr;eF.noteOnce=ZDr;var Zh=eF;var Ltt=Z(Pe()),YDr=function(t){var r,n,o=t.className,i=t.included,a=t.vertical,u=t.style,d=t.length,h=t.offset,v=t.reverse;d<0&&(v=!v,d=Math.abs(d),h=100-h);var b=a?(r={},Wt(r,v?"top":"bottom","".concat(h,"%")),Wt(r,v?"bottom":"top","auto"),Wt(r,"height","".concat(d,"%")),r):(n={},Wt(n,v?"right":"left","".concat(h,"%")),Wt(n,v?"left":"right","auto"),Wt(n,"width","".concat(d,"%")),n),x=er(er({},u),b);return i?Ltt.default.createElement("div",{className:o,style:x}):null},tF=YDr;function Vu(e,t){if(e==null)return{};var r,n,o=bS(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(n=0;n<i.length;n++)r=i[n],t.indexOf(r)===-1&&{}.propertyIsEnumerable.call(e,r)&&(o[r]=e[r])}return o}function D4(e,t){(t==null||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}function ktt(e){if(Array.isArray(e))return D4(e)}function Fae(e){if(typeof Symbol!="undefined"&&e[Symbol.iterator]!=null||e["@@iterator"]!=null)return Array.from(e)}function L4(e,t){if(e){if(typeof e=="string")return D4(e,t);var r={}.toString.call(e).slice(8,-1);return r==="Object"&&e.constructor&&(r=e.constructor.name),r==="Map"||r==="Set"?Array.from(e):r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?D4(e,t):void 0}}function Rtt(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function hf(e){return ktt(e)||Fae(e)||L4(e)||Rtt()}function jtt(e,t){for(;!{}.hasOwnProperty.call(e,t)&&(e=Pd(e))!==null;);return e}function t2(){return t2=typeof Reflect!="undefined"&&Reflect.get?Reflect.get.bind():function(e,t,r){var n=jtt(e,t);if(n){var o=Object.getOwnPropertyDescriptor(n,t);return o.get?o.get.call(arguments.length<3?e:r):o.value}},t2.apply(null,arguments)}var n2=Z(Pe());var Uae=Z(va());function Gu(e,t,r,n){var o=Uae.default.unstable_batchedUpdates?function(a){Uae.default.unstable_batchedUpdates(r,a)}:r;return e!=null&&e.addEventListener&&e.addEventListener(t,o,n),{remove:function(){e!=null&&e.removeEventListener&&e.removeEventListener(t,o,n)}}}var Wtt=Z(ko());var Bae=Z(Pe()),qtt=Z(ko());var KDr=function(t,r,n,o,i,a){Zh(n?o>0:!0,"`Slider[step]` should be a positive number in order to make Slider[dots] work.");var u=Object.keys(r).map(parseFloat).sort(function(h,v){return h-v});if(n&&o)for(var d=i;d<=a;d+=o)u.indexOf(d)===-1&&u.push(d);return u},XDr=function(t){var r=t.prefixCls,n=t.vertical,o=t.reverse,i=t.marks,a=t.dots,u=t.step,d=t.included,h=t.lowerBound,v=t.upperBound,b=t.max,x=t.min,M=t.dotStyle,O=t.activeDotStyle,D=b-x,k=KDr(n,i,a,u,x,b).map(function(R){var q,B="".concat(Math.abs(R-x)/D*100,"%"),G=!d&&R===v||d&&R<=v&&R>=h,re=n?er(er({},M),{},Wt({},o?"top":"bottom",B)):er(er({},M),{},Wt({},o?"right":"left",B));G&&(re=er(er({},re),O));var Q=(0,qtt.default)((q={},Wt(q,"".concat(r,"-dot"),!0),Wt(q,"".concat(r,"-dot-active"),G),Wt(q,"".concat(r,"-dot-reverse"),o),q));return Bae.default.createElement("span",{className:Q,style:re,key:R})});return Bae.default.createElement("div",{className:"".concat(r,"-step")},k)},ztt=XDr;var rF=Z(Pe()),Ftt=Z(ko()),QDr=function(t){var r=t.className,n=t.vertical,o=t.reverse,i=t.marks,a=t.included,u=t.upperBound,d=t.lowerBound,h=t.max,v=t.min,b=t.onClickLabel,x=Object.keys(i),M=h-v,O=x.map(parseFloat).sort(function(D,k){return D-k}).map(function(D){var k,R=i[D],q=Do(R)==="object"&&!rF.default.isValidElement(R),B=q?R.label:R;if(!B&&B!==0)return null;var G=!a&&D===u||a&&D<=u&&D>=d,re=(0,Ftt.default)((k={},Wt(k,"".concat(r,"-text"),!0),Wt(k,"".concat(r,"-text-active"),G),k)),Q=Wt({marginBottom:"-50%"},o?"top":"bottom","".concat((D-v)/M*100,"%")),ie=Wt({transform:"translateX(".concat(o?"50%":"-50%",")"),msTransform:"translateX(".concat(o?"50%":"-50%",")")},o?"right":"left","".concat((D-v)/M*100,"%")),me=n?Q:ie,ve=q?er(er({},me),R.style):me;return rF.default.createElement("span",{className:re,style:ve,key:D,onMouseDown:function(we){return b(we,D)},onTouchStart:function(we){return b(we,D)}},B)});return rF.default.createElement("div",{className:r},O)},Utt=QDr;var Vae=Z(Pe()),Btt=Z(ko());var r2=function(e){pu(r,e);var t=fu(r);function r(){var n;return uu(this,r),n=t.apply(this,arguments),n.state={clickFocused:!1},n.setHandleRef=function(o){n.handle=o},n.handleMouseUp=function(){document.activeElement===n.handle&&n.setClickFocus(!0)},n.handleMouseDown=function(o){o.preventDefault(),n.focus()},n.handleBlur=function(){n.setClickFocus(!1)},n.handleKeyDown=function(){n.setClickFocus(!1)},n}return cu(r,[{key:"componentDidMount",value:function(){this.onMouseUpListener=Gu(document,"mouseup",this.handleMouseUp)}},{key:"componentWillUnmount",value:function(){this.onMouseUpListener&&this.onMouseUpListener.remove()}},{key:"setClickFocus",value:function(o){this.setState({clickFocused:o})}},{key:"clickFocus",value:function(){this.setClickFocus(!0),this.focus()}},{key:"focus",value:function(){this.handle.focus()}},{key:"blur",value:function(){this.handle.blur()}},{key:"render",value:function(){var o,i,a=this.props,u=a.prefixCls,d=a.vertical,h=a.reverse,v=a.offset,b=a.style,x=a.disabled,M=a.min,O=a.max,D=a.value,k=a.tabIndex,R=a.ariaLabel,q=a.ariaLabelledBy,B=a.ariaValueTextFormatter,G=Vu(a,["prefixCls","vertical","reverse","offset","style","disabled","min","max","value","tabIndex","ariaLabel","ariaLabelledBy","ariaValueTextFormatter"]),re=(0,Btt.default)(this.props.className,Wt({},"".concat(u,"-handle-click-focused"),this.state.clickFocused)),Q=d?(o={},Wt(o,h?"top":"bottom","".concat(v,"%")),Wt(o,h?"bottom":"top","auto"),Wt(o,"transform",h?null:"translateY(+50%)"),o):(i={},Wt(i,h?"right":"left","".concat(v,"%")),Wt(i,h?"left":"right","auto"),Wt(i,"transform","translateX(".concat(h?"+":"-","50%)")),i),ie=er(er({},b),Q),me=k||0;(x||k===null)&&(me=null);var ve;return B&&(ve=B(D)),Vae.default.createElement("div",vo({ref:this.setHandleRef,tabIndex:me},G,{className:re,style:ie,onBlur:this.handleBlur,onKeyDown:this.handleKeyDown,onMouseDown:this.handleMouseDown,role:"slider","aria-valuemin":M,"aria-valuemax":O,"aria-valuenow":D,"aria-disabled":!!x,"aria-label":R,"aria-labelledby":q,"aria-valuetext":ve}))}}]),r}(Vae.default.Component);var Gtt=Z(va());var Sn={MAC_ENTER:3,BACKSPACE:8,TAB:9,NUM_CENTER:12,ENTER:13,SHIFT:16,CTRL:17,ALT:18,PAUSE:19,CAPS_LOCK:20,ESC:27,SPACE:32,PAGE_UP:33,PAGE_DOWN:34,END:35,HOME:36,LEFT:37,UP:38,RIGHT:39,DOWN:40,PRINT_SCREEN:44,INSERT:45,DELETE:46,ZERO:48,ONE:49,TWO:50,THREE:51,FOUR:52,FIVE:53,SIX:54,SEVEN:55,EIGHT:56,NINE:57,QUESTION_MARK:63,A:65,B:66,C:67,D:68,E:69,F:70,G:71,H:72,I:73,J:74,K:75,L:76,M:77,N:78,O:79,P:80,Q:81,R:82,S:83,T:84,U:85,V:86,W:87,X:88,Y:89,Z:90,META:91,WIN_KEY_RIGHT:92,CONTEXT_MENU:93,NUM_ZERO:96,NUM_ONE:97,NUM_TWO:98,NUM_THREE:99,NUM_FOUR:100,NUM_FIVE:101,NUM_SIX:102,NUM_SEVEN:103,NUM_EIGHT:104,NUM_NINE:105,NUM_MULTIPLY:106,NUM_PLUS:107,NUM_MINUS:109,NUM_PERIOD:110,NUM_DIVISION:111,F1:112,F2:113,F3:114,F4:115,F5:116,F6:117,F7:118,F8:119,F9:120,F10:121,F11:122,F12:123,NUMLOCK:144,SEMICOLON:186,DASH:189,EQUALS:187,COMMA:188,PERIOD:190,SLASH:191,APOSTROPHE:192,SINGLE_QUOTE:222,OPEN_SQUARE_BRACKET:219,BACKSLASH:220,CLOSE_SQUARE_BRACKET:221,WIN_KEY:224,MAC_FF_META:224,WIN_IME:229,isTextModifyingKeyEvent:function(t){var r=t.keyCode;if(t.altKey&&!t.ctrlKey||t.metaKey||r>=Sn.F1&&r<=Sn.F12)return!1;switch(r){case Sn.ALT:case Sn.CAPS_LOCK:case Sn.CONTEXT_MENU:case Sn.CTRL:case Sn.DOWN:case Sn.END:case Sn.ESC:case Sn.HOME:case Sn.INSERT:case Sn.LEFT:case Sn.MAC_FF_META:case Sn.META:case Sn.NUMLOCK:case Sn.NUM_CENTER:case Sn.PAGE_DOWN:case Sn.PAGE_UP:case Sn.PAUSE:case Sn.PRINT_SCREEN:case Sn.RIGHT:case Sn.SHIFT:case Sn.UP:case Sn.WIN_KEY:case Sn.WIN_KEY_RIGHT:return!1;default:return!0}},isCharacterKey:function(t){if(t>=Sn.ZERO&&t<=Sn.NINE||t>=Sn.NUM_ZERO&&t<=Sn.NUM_MULTIPLY||t>=Sn.A&&t<=Sn.Z||window.navigator.userAgent.indexOf("WebKit")!==-1&&t===0)return!0;switch(t){case Sn.SPACE:case Sn.QUESTION_MARK:case Sn.NUM_PLUS:case Sn.NUM_MINUS:case Sn.NUM_PERIOD:case Sn.NUM_DIVISION:case Sn.SEMICOLON:case Sn.DASH:case Sn.EQUALS:case Sn.COMMA:case Sn.PERIOD:case Sn.SLASH:case Sn.APOSTROPHE:case Sn.SINGLE_QUOTE:case Sn.OPEN_SQUARE_BRACKET:case Sn.BACKSLASH:case Sn.CLOSE_SQUARE_BRACKET:return!0;default:return!1}}},kg=Sn;function nF(e,t){try{return Object.keys(t).some(function(r){return e.target===(0,Gtt.findDOMNode)(t[r])})}catch(r){return!1}}function oF(e,t){var r=t.min,n=t.max;return e<r||e>n}function Gae(e){return e.touches.length>1||e.type.toLowerCase()==="touchend"&&e.touches.length>0}function Vtt(e,t){var r=t.marks,n=t.step,o=t.min,i=t.max,a=Object.keys(r).map(parseFloat);if(n!==null){var u=Math.pow(10,Htt(n)),d=Math.floor((i*u-o*u)/(n*u)),h=Math.min((e-o)/n,d),v=Math.round(h)*n+o;a.push(v)}var b=a.map(function(x){return Math.abs(e-x)});return a[b.indexOf(Math.min.apply(Math,hf(b)))]}function Htt(e){var t=e.toString(),r=0;return t.indexOf(".")>=0&&(r=t.length-t.indexOf(".")-1),r}function Hae(e,t){return e?t.clientY:t.pageX}function Wae(e,t){return e?t.touches[0].clientY:t.touches[0].pageX}function $ae(e,t){var r=t.getBoundingClientRect();return e?r.top+r.height*.5:window.pageXOffset+r.left+r.width*.5}function k4(e,t){var r=t.max,n=t.min;return e<=n?n:e>=r?r:e}function iF(e,t){var r=t.step,n=isFinite(Vtt(e,t))?Vtt(e,t):0;return r===null?n:parseFloat(n.toFixed(Htt(r)))}function Rg(e){e.stopPropagation(),e.preventDefault()}function JDr(e,t,r){var n={increase:function(u,d){return u+d},decrease:function(u,d){return u-d}},o=n[e](Object.keys(r.marks).indexOf(JSON.stringify(t)),1),i=Object.keys(r.marks)[o];return r.step?n[e](t,r.step):Object.keys(r.marks).length&&r.marks[i]?r.marks[i]:t}function aF(e,t,r){var n="increase",o="decrease",i=n;switch(e.keyCode){case kg.UP:i=t&&r?o:n;break;case kg.RIGHT:i=!t&&r?o:n;break;case kg.DOWN:i=t&&r?n:o;break;case kg.LEFT:i=!t&&r?n:o;break;case kg.END:return function(a,u){return u.max};case kg.HOME:return function(a,u){return u.min};case kg.PAGE_UP:return function(a,u){return a+u.step*2};case kg.PAGE_DOWN:return function(a,u){return a-u.step*2};default:return}return function(a,u){return JDr(i,a,u)}}function Yh(){}function R4(e){var t;return t=function(r){pu(o,r);var n=fu(o);function o(i){var a;uu(this,o),a=n.call(this,i),a.onDown=function(b,x){var M=x,O=a.props,D=O.draggableTrack,k=O.vertical,R=a.state.bounds,q=D&&a.positionGetValue?a.positionGetValue(M)||[]:[],B=nF(b,a.handlesRefs);if(a.dragTrack=D&&R.length>=2&&!B&&!q.map(function(re,Q){var ie=Q?!0:re>=R[Q];return Q===q.length-1?re<=R[Q]:ie}).some(function(re){return!re}),a.dragTrack)a.dragOffset=M,a.startBounds=hf(R);else{if(!B)a.dragOffset=0;else{var G=$ae(k,b.target);a.dragOffset=M-G,M=G}a.onStart(M)}},a.onMouseDown=function(b){if(b.button===0){a.removeDocumentEvents();var x=a.props.vertical,M=Hae(x,b);a.onDown(b,M),a.addDocumentMouseEvents()}},a.onTouchStart=function(b){if(!Gae(b)){var x=a.props.vertical,M=Wae(x,b);a.onDown(b,M),a.addDocumentTouchEvents(),Rg(b)}},a.onFocus=function(b){var x=a.props,M=x.onFocus,O=x.vertical;if(nF(b,a.handlesRefs)&&!a.dragTrack){var D=$ae(O,b.target);a.dragOffset=0,a.onStart(D),Rg(b),M&&M(b)}},a.onBlur=function(b){var x=a.props.onBlur;a.dragTrack||a.onEnd(),x&&x(b)},a.onMouseUp=function(){a.handlesRefs[a.prevMovedHandleIndex]&&a.handlesRefs[a.prevMovedHandleIndex].clickFocus()},a.onMouseMove=function(b){if(!a.sliderRef){a.onEnd();return}var x=Hae(a.props.vertical,b);a.onMove(b,x-a.dragOffset,a.dragTrack,a.startBounds)},a.onTouchMove=function(b){if(Gae(b)||!a.sliderRef){a.onEnd();return}var x=Wae(a.props.vertical,b);a.onMove(b,x-a.dragOffset,a.dragTrack,a.startBounds)},a.onKeyDown=function(b){a.sliderRef&&nF(b,a.handlesRefs)&&a.onKeyboard(b)},a.onClickMarkLabel=function(b,x){b.stopPropagation(),a.onChange({value:x}),a.setState({value:x},function(){return a.onEnd(!0)})},a.saveSlider=function(b){a.sliderRef=b};var u=i.step,d=i.max,h=i.min,v=isFinite(d-h)?(d-h)%u===0:!0;return Zh(u&&Math.floor(u)===u?v:!0,"Slider[max] - Slider[min] (".concat(d-h,") should be a multiple of Slider[step] (").concat(u,")")),a.handlesRefs={},a}return cu(o,[{key:"componentDidMount",value:function(){this.document=this.sliderRef&&this.sliderRef.ownerDocument;var a=this.props,u=a.autoFocus,d=a.disabled;u&&!d&&this.focus()}},{key:"componentWillUnmount",value:function(){t2(Pd(o.prototype),"componentWillUnmount",this)&&t2(Pd(o.prototype),"componentWillUnmount",this).call(this),this.removeDocumentEvents()}},{key:"getSliderStart",value:function(){var a=this.sliderRef,u=this.props,d=u.vertical,h=u.reverse,v=a.getBoundingClientRect();return d?h?v.bottom:v.top:window.pageXOffset+(h?v.right:v.left)}},{key:"getSliderLength",value:function(){var a=this.sliderRef;if(!a)return 0;var u=a.getBoundingClientRect();return this.props.vertical?u.height:u.width}},{key:"addDocumentTouchEvents",value:function(){this.onTouchMoveListener=Gu(this.document,"touchmove",this.onTouchMove),this.onTouchUpListener=Gu(this.document,"touchend",this.onEnd)}},{key:"addDocumentMouseEvents",value:function(){this.onMouseMoveListener=Gu(this.document,"mousemove",this.onMouseMove),this.onMouseUpListener=Gu(this.document,"mouseup",this.onEnd)}},{key:"removeDocumentEvents",value:function(){this.onTouchMoveListener&&this.onTouchMoveListener.remove(),this.onTouchUpListener&&this.onTouchUpListener.remove(),this.onMouseMoveListener&&this.onMouseMoveListener.remove(),this.onMouseUpListener&&this.onMouseUpListener.remove()}},{key:"focus",value:function(){var a;this.props.disabled||(a=this.handlesRefs[0])===null||a===void 0||a.focus()}},{key:"blur",value:function(){var a=this;this.props.disabled||Object.keys(this.handlesRefs).forEach(function(u){var d,h;(d=a.handlesRefs[u])===null||d===void 0||(h=d.blur)===null||h===void 0||h.call(d)})}},{key:"calcValue",value:function(a){var u=this.props,d=u.vertical,h=u.min,v=u.max,b=Math.abs(Math.max(a,0)/this.getSliderLength()),x=d?(1-b)*(v-h)+h:b*(v-h)+h;return x}},{key:"calcValueByPos",value:function(a){var u=this.props.reverse?-1:1,d=u*(a-this.getSliderStart()),h=this.trimAlignValue(this.calcValue(d));return h}},{key:"calcOffset",value:function(a){var u=this.props,d=u.min,h=u.max,v=(a-d)/(h-d);return Math.max(0,v*100)}},{key:"saveHandle",value:function(a,u){this.handlesRefs[a]=u}},{key:"render",value:function(){var a,u=this.props,d=u.prefixCls,h=u.className,v=u.marks,b=u.dots,x=u.step,M=u.included,O=u.disabled,D=u.vertical,k=u.reverse,R=u.min,q=u.max,B=u.children,G=u.maximumTrackStyle,re=u.style,Q=u.railStyle,ie=u.dotStyle,me=u.activeDotStyle,ve=t2(Pd(o.prototype),"render",this).call(this),ye=ve.tracks,we=ve.handles,Se=(0,Wtt.default)(d,(a={},Wt(a,"".concat(d,"-with-marks"),Object.keys(v).length),Wt(a,"".concat(d,"-disabled"),O),Wt(a,"".concat(d,"-vertical"),D),Wt(a,h,h),a));return n2.default.createElement("div",{ref:this.saveSlider,className:Se,onTouchStart:O?Yh:this.onTouchStart,onMouseDown:O?Yh:this.onMouseDown,onMouseUp:O?Yh:this.onMouseUp,onKeyDown:O?Yh:this.onKeyDown,onFocus:O?Yh:this.onFocus,onBlur:O?Yh:this.onBlur,style:re},n2.default.createElement("div",{className:"".concat(d,"-rail"),style:er(er({},G),Q)}),ye,n2.default.createElement(ztt,{prefixCls:d,vertical:D,reverse:k,marks:v,dots:b,step:x,included:M,lowerBound:this.getLowerBound(),upperBound:this.getUpperBound(),max:q,min:R,dotStyle:ie,activeDotStyle:me}),we,n2.default.createElement(Utt,{className:"".concat(d,"-mark"),onClickLabel:O?Yh:this.onClickMarkLabel,vertical:D,marks:v,included:M,lowerBound:this.getLowerBound(),upperBound:this.getUpperBound(),max:q,min:R,reverse:k}),B)}}]),o}(e),t.displayName="ComponentEnhancer(".concat(e.displayName,")"),t.defaultProps=er(er({},e.defaultProps),{},{prefixCls:"rc-slider",className:"",min:0,max:100,step:1,marks:{},handle:function(n){var o=n.index,i=Vu(n,["index"]);return delete i.dragging,i.value===null?null:n2.default.createElement(r2,vo({},i,{key:o}))},onBeforeChange:Yh,onChange:Yh,onAfterChange:Yh,included:!0,disabled:!1,dots:!1,vertical:!1,reverse:!1,trackStyle:[{}],handleStyle:[{}],railStyle:{},dotStyle:{},activeDotStyle:{}}),t}var e5r=function(e){pu(r,e);var t=fu(r);function r(n){var o;uu(this,r),o=t.call(this,n),o.positionGetValue=function(u){return[]},o.onEnd=function(u){var d=o.state.dragging;o.removeDocumentEvents(),(d||u)&&o.props.onAfterChange(o.getValue()),o.setState({dragging:!1})};var i=n.defaultValue!==void 0?n.defaultValue:n.min,a=n.value!==void 0?n.value:i;return o.state={value:o.trimAlignValue(a),dragging:!1},Zh(!("minimumTrackStyle"in n),"minimumTrackStyle will be deprecated, please use trackStyle instead."),Zh(!("maximumTrackStyle"in n),"maximumTrackStyle will be deprecated, please use railStyle instead."),o}return cu(r,[{key:"calcValueByPos",value:function(o){return 0}},{key:"calcOffset",value:function(o){return 0}},{key:"saveHandle",value:function(o,i){}},{key:"removeDocumentEvents",value:function(){}},{key:"componentDidUpdate",value:function(o,i){var a=this.props,u=a.min,d=a.max,h=a.value,v=a.onChange;if("min"in this.props||"max"in this.props){var b=h!==void 0?h:i.value,x=this.trimAlignValue(b,this.props);x!==i.value&&(this.setState({value:x}),!(u===o.min&&d===o.max)&&oF(b,this.props)&&v(x))}}},{key:"onChange",value:function(o){var i=this.props,a=!("value"in i),u=o.value>this.props.max?er(er({},o),{},{value:this.props.max}):o;a&&this.setState(u);var d=u.value;i.onChange(d)}},{key:"onStart",value:function(o){this.setState({dragging:!0});var i=this.props,a=this.getValue();i.onBeforeChange(a);var u=this.calcValueByPos(o);this.startValue=u,this.startPosition=o,u!==a&&(this.prevMovedHandleIndex=0,this.onChange({value:u}))}},{key:"onMove",value:function(o,i){Rg(o);var a=this.state.value,u=this.calcValueByPos(i);u!==a&&this.onChange({value:u})}},{key:"onKeyboard",value:function(o){var i=this.props,a=i.reverse,u=i.vertical,d=aF(o,u,a);if(d){Rg(o);var h=this.state,v=h.value,b=d(v,this.props),x=this.trimAlignValue(b);if(x===v)return;this.onChange({value:x}),this.props.onAfterChange(x),this.onEnd()}}},{key:"getValue",value:function(){return this.state.value}},{key:"getLowerBound",value:function(){var o=this.props.startPoint||this.props.min;return this.state.value>o?o:this.state.value}},{key:"getUpperBound",value:function(){return this.state.value<this.props.startPoint?this.props.startPoint:this.state.value}},{key:"trimAlignValue",value:function(o){var i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(o===null)return null;var a=er(er({},this.props),i),u=k4(o,a);return iF(u,a)}},{key:"render",value:function(){var o=this,i=this.props,a=i.prefixCls,u=i.vertical,d=i.included,h=i.disabled,v=i.minimumTrackStyle,b=i.trackStyle,x=i.handleStyle,M=i.tabIndex,O=i.ariaLabelForHandle,D=i.ariaLabelledByForHandle,k=i.ariaValueTextFormatterForHandle,R=i.min,q=i.max,B=i.startPoint,G=i.reverse,re=i.handle,Q=this.state,ie=Q.value,me=Q.dragging,ve=this.calcOffset(ie),ye=re({className:"".concat(a,"-handle"),prefixCls:a,vertical:u,offset:ve,value:ie,dragging:me,disabled:h,min:R,max:q,reverse:G,index:0,tabIndex:M,ariaLabel:O,ariaLabelledBy:D,ariaValueTextFormatter:k,style:x[0]||x,ref:function(Je){return o.saveHandle(0,Je)}}),we=B!==void 0?this.calcOffset(B):0,Se=b[0]||b,ge=Yae.default.createElement(tF,{className:"".concat(a,"-track"),vertical:u,included:d,offset:we,reverse:G,length:ve-we,style:er(er({},v),Se)});return{tracks:ge,handles:ye}}}]),r}(Yae.default.Component),$tt=R4(e5r);var Kae=Z(Pe()),Xae=Z(ko());var j4=function(t){var r=t.value,n=t.handle,o=t.bounds,i=t.props,a=i.allowCross,u=i.pushable,d=Number(u),h=k4(r,i),v=h;return!a&&n!=null&&o!==void 0&&(n>0&&h<=o[n-1]+d&&(v=o[n-1]+d),n<o.length-1&&h>=o[n+1]-d&&(v=o[n+1]-d)),iF(v,i)},Qae=function(e){pu(r,e);var t=fu(r);function r(n){var o;uu(this,r),o=t.call(this,n),o.positionGetValue=function(M){var O=o.getValue(),D=o.calcValueByPos(M),k=o.getClosestBound(D),R=o.getBoundNeedMoving(D,k),q=O[R];if(D===q)return null;var B=hf(O);return B[R]=D,B},o.onEnd=function(M){var O=o.state.handle;o.removeDocumentEvents(),O||(o.dragTrack=!1),(O!==null||M)&&o.props.onAfterChange(o.getValue()),o.setState({handle:null})};var i=n.count,a=n.min,u=n.max,d=Array.apply(void 0,hf(Array(i+1))).map(function(){return a}),h="defaultValue"in n?n.defaultValue:d,v=n.value!==void 0?n.value:h,b=v.map(function(M,O){return j4({value:M,handle:O,props:n})}),x=b[0]===u?0:b.length-1;return o.state={handle:null,recent:x,bounds:b},o}return cu(r,[{key:"calcValueByPos",value:function(o){return 0}},{key:"getSliderLength",value:function(){return 0}},{key:"calcOffset",value:function(o){return 0}},{key:"saveHandle",value:function(o,i){}},{key:"removeDocumentEvents",value:function(){}},{key:"componentDidUpdate",value:function(o,i){var a=this,u=this.props,d=u.onChange,h=u.value,v=u.min,b=u.max;if(("min"in this.props||"max"in this.props)&&!(v===o.min&&b===o.max)){var x=h||i.bounds;if(x.some(function(O){return oF(O,a.props)})){var M=x.map(function(O){return k4(O,a.props)});d(M)}}}},{key:"onChange",value:function(o){var i=this.props,a=!("value"in i);if(a)this.setState(o);else{var u={};["handle","recent"].forEach(function(v){o[v]!==void 0&&(u[v]=o[v])}),Object.keys(u).length&&this.setState(u)}var d=er(er({},this.state),o),h=d.bounds;i.onChange(h)}},{key:"onStart",value:function(o){var i=this.props,a=this.state,u=this.getValue();i.onBeforeChange(u);var d=this.calcValueByPos(o);this.startValue=d,this.startPosition=o;var h=this.getClosestBound(d);this.prevMovedHandleIndex=this.getBoundNeedMoving(d,h),this.setState({handle:this.prevMovedHandleIndex,recent:this.prevMovedHandleIndex});var v=u[this.prevMovedHandleIndex];if(d!==v){var b=hf(a.bounds);b[this.prevMovedHandleIndex]=d,this.onChange({bounds:b})}}},{key:"onMove",value:function(o,i,a,u){Rg(o);var d=this.state,h=this.props,v=h.max||100,b=h.min||0;if(a){var x=h.vertical?-i:i;x=h.reverse?-x:x;var M=v-Math.max.apply(Math,hf(u)),O=b-Math.min.apply(Math,hf(u)),D=Math.min(Math.max(x/(this.getSliderLength()/(v-b)),O),M),k=u.map(function(B){return Math.floor(Math.max(Math.min(B+D,v),b))});d.bounds.map(function(B,G){return B===k[G]}).some(function(B){return!B})&&this.onChange({bounds:k});return}var R=this.calcValueByPos(i),q=d.bounds[d.handle];R!==q&&this.moveTo(R)}},{key:"onKeyboard",value:function(o){var i=this.props,a=i.reverse,u=i.vertical,d=aF(o,u,a);if(d){Rg(o);var h=this.state,v=this.props,b=h.bounds,x=h.handle,M=b[x===null?h.recent:x],O=d(M,v),D=j4({value:O,handle:x,bounds:h.bounds,props:v});if(D===M)return;var k=!0;this.moveTo(D,k)}}},{key:"getValue",value:function(){return this.state.bounds}},{key:"getClosestBound",value:function(o){for(var i=this.state.bounds,a=0,u=1;u<i.length-1;u+=1)o>=i[u]&&(a=u);return Math.abs(i[a+1]-o)<Math.abs(i[a]-o)&&(a+=1),a}},{key:"getBoundNeedMoving",value:function(o,i){var a=this.state,u=a.bounds,d=a.recent,h=i,v=u[i+1]===u[i];return v&&u[d]===u[i]&&(h=d),v&&o!==u[i+1]&&(h=o<u[i+1]?i:i+1),h}},{key:"getLowerBound",value:function(){return this.state.bounds[0]}},{key:"getUpperBound",value:function(){var o=this.state.bounds;return o[o.length-1]}},{key:"getPoints",value:function(){var o=this.props,i=o.marks,a=o.step,u=o.min,d=o.max,h=this.internalPointsCache;if(!h||h.marks!==i||h.step!==a){var v=er({},i);if(a!==null)for(var b=u;b<=d;b+=a)v[b]=b;var x=Object.keys(v).map(parseFloat);x.sort(function(M,O){return M-O}),this.internalPointsCache={marks:i,step:a,points:x}}return this.internalPointsCache.points}},{key:"moveTo",value:function(o,i){var a=this,u=this.state,d=this.props,h=hf(u.bounds),v=u.handle===null?u.recent:u.handle;h[v]=o;var b=v;d.pushable!==!1?this.pushSurroundingHandles(h,b):d.allowCross&&(h.sort(function(x,M){return x-M}),b=h.indexOf(o)),this.onChange({recent:b,handle:b,bounds:h}),i&&(this.props.onAfterChange(h),this.setState({},function(){a.handlesRefs[b].focus()}),this.onEnd())}},{key:"pushSurroundingHandles",value:function(o,i){var a=o[i],u=this.props.pushable,d=Number(u),h=0;if(o[i+1]-a<d&&(h=1),a-o[i-1]<d&&(h=-1),h!==0){var v=i+h,b=h*(o[v]-a);this.pushHandle(o,v,h,d-b)||(o[i]=o[v]-h*d)}}},{key:"pushHandle",value:function(o,i,a,u){for(var d=o[i],h=o[i];a*(h-d)<u;){if(!this.pushHandleOnePoint(o,i,a))return o[i]=d,!1;h=o[i]}return!0}},{key:"pushHandleOnePoint",value:function(o,i,a){var u=this.getPoints(),d=u.indexOf(o[i]),h=d+a;if(h>=u.length||h<0)return!1;var v=i+a,b=u[h],x=this.props.pushable,M=Number(x),O=a*(o[v]-b);return this.pushHandle(o,v,a,M-O)?(o[i]=b,!0):!1}},{key:"trimAlignValue",value:function(o){var i=this.state,a=i.handle,u=i.bounds;return j4({value:o,handle:a,bounds:u,props:this.props})}},{key:"render",value:function(){var o=this,i=this.state,a=i.handle,u=i.bounds,d=this.props,h=d.prefixCls,v=d.vertical,b=d.included,x=d.disabled,M=d.min,O=d.max,D=d.reverse,k=d.handle,R=d.trackStyle,q=d.handleStyle,B=d.tabIndex,G=d.ariaLabelGroupForHandles,re=d.ariaLabelledByGroupForHandles,Q=d.ariaValueTextFormatterGroupForHandles,ie=u.map(function(we){return o.calcOffset(we)}),me="".concat(h,"-handle"),ve=u.map(function(we,Se){var ge,Re=B[Se]||0;(x||B[Se]===null)&&(Re=null);var Je=a===Se;return k({className:(0,Xae.default)((ge={},Wt(ge,me,!0),Wt(ge,"".concat(me,"-").concat(Se+1),!0),Wt(ge,"".concat(me,"-dragging"),Je),ge)),prefixCls:h,vertical:v,dragging:Je,offset:ie[Se],value:we,index:Se,tabIndex:Re,min:M,max:O,reverse:D,disabled:x,style:q[Se],ref:function(Et){return o.saveHandle(Se,Et)},ariaLabel:G[Se],ariaLabelledBy:re[Se],ariaValueTextFormatter:Q[Se]})}),ye=u.slice(0,-1).map(function(we,Se){var ge,Re=Se+1,Je=(0,Xae.default)((ge={},Wt(ge,"".concat(h,"-track"),!0),Wt(ge,"".concat(h,"-track-").concat(Re),!0),ge));return Kae.default.createElement(tF,{className:Je,vertical:v,reverse:D,included:b,offset:ie[Re-1],length:ie[Re]-ie[Re-1],style:R[Se],key:Re})});return{tracks:ye,handles:ve}}}],[{key:"getDerivedStateFromProps",value:function(o,i){if(!("value"in o||"min"in o||"max"in o))return null;var a=o.value||i.bounds,u=a.map(function(d,h){return j4({value:d,handle:h,bounds:i.bounds,props:o})});if(i.bounds.length===u.length){if(u.every(function(d,h){return d===i.bounds[h]}))return null}else u=a.map(function(d,h){return j4({value:d,handle:h,props:o})});return er(er({},i),{},{bounds:u})}}]),r}(Kae.default.Component);Qae.displayName="Range";Qae.defaultProps={count:1,allowCross:!0,pushable:!1,draggableTrack:!1,tabIndex:[],ariaLabelGroupForHandles:[],ariaLabelledByGroupForHandles:[],ariaValueTextFormatterGroupForHandles:[]};var sF=R4(Qae);var K4=Z(Pe());var Fg=Z(Pe());var kse=Z(Pe()),p2=Z(Pe());var hp=Z(Pe()),Dnt=Z(va());var Ytt=function(t){return+setTimeout(t,16)},Ktt=function(t){return clearTimeout(t)};typeof window!="undefined"&&"requestAnimationFrame"in window&&(Ytt=function(t){return window.requestAnimationFrame(t)},Ktt=function(t){return window.cancelAnimationFrame(t)});var Ztt=0,Jae=new Map;function Xtt(e){Jae.delete(e)}var Qtt=function(t){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:1;Ztt+=1;var n=Ztt;function o(i){if(i===0)Xtt(n),t();else{var a=Ytt(function(){o(i-1)});Jae.set(n,a)}}return o(r),n};Qtt.cancel=function(e){var t=Jae.get(e);return Xtt(e),Ktt(t)};var Lc=Qtt;function nb(e,t){if(!e)return!1;if(e.contains)return e.contains(t);for(var r=t;r;){if(r===e)return!0;r=r.parentNode}return!1}var ert=Z(Pe()),ese=Z(va());function Jtt(e){return e instanceof HTMLElement||e instanceof SVGElement}function t5r(e){return e&&Do(e)==="object"&&Jtt(e.nativeElement)?e.nativeElement:Jtt(e)?e:null}function q4(e){var t=t5r(e);if(t)return t;if(e instanceof ert.default.Component){var r;return(r=ese.default.findDOMNode)===null||r===void 0?void 0:r.call(ese.default,e)}return null}var yF=Z(Pe()),z4=Z(ort());var o5r=Z(Pe());var i5r=Symbol.for("react.element"),a5r=Symbol.for("react.transitional.element"),s5r=Symbol.for("react.fragment");function nse(e){return e&&Do(e)==="object"&&(e.$$typeof===i5r||e.$$typeof===a5r)&&e.type===s5r}var l5r=Number(yF.version.split(".")[0]),ose=function(t,r){typeof t=="function"?t(r):Do(t)==="object"&&t&&"current"in t&&(t.current=r)},o2=function(){for(var t=arguments.length,r=new Array(t),n=0;n<t;n++)r[n]=arguments[n];var o=r.filter(Boolean);return o.length<=1?o[0]:function(i){r.forEach(function(a){ose(a,i)})}};var F4=function(t){var r,n;if(!t)return!1;if(irt(t)&&l5r>=19)return!0;var o=(0,z4.isMemo)(t)?t.type.type:t.type;return!(typeof o=="function"&&!((r=o.prototype)!==null&&r!==void 0&&r.render)&&o.$$typeof!==z4.ForwardRef||typeof t=="function"&&!((n=t.prototype)!==null&&n!==void 0&&n.render)&&t.$$typeof!==z4.ForwardRef)};function irt(e){return(0,yF.isValidElement)(e)&&!nse(e)}var art=function(t){if(t&&irt(t)){var r=t;return r.props.propertyIsEnumerable("ref")?r.props.ref:r.ref}return null};var Nd=Z(Pe()),srt=Z(va());function Kh(){return!!(typeof window!="undefined"&&window.document&&window.document.createElement)}var u5r=(0,Nd.forwardRef)(function(e,t){var r=e.didUpdate,n=e.getContainer,o=e.children,i=(0,Nd.useRef)(),a=(0,Nd.useRef)();(0,Nd.useImperativeHandle)(t,function(){return{}});var u=(0,Nd.useRef)(!1);return!u.current&&Kh()&&(a.current=n(),i.current=a.current.parentNode,u.current=!0),(0,Nd.useEffect)(function(){r==null||r(e)}),(0,Nd.useEffect)(function(){return a.current.parentNode===null&&i.current!==null&&i.current.appendChild(a.current),function(){var d;(d=a.current)===null||d===void 0||(d=d.parentNode)===null||d===void 0||d.removeChild(a.current)}},[]),a.current?srt.default.createPortal(o,a.current):null}),lrt=u5r;var Lnt=Z(ko());function c5r(e,t,r){return r?e[0]===t[0]:e[0]===t[0]&&e[1]===t[1]}function urt(e,t,r){var n=e[t]||{};return er(er({},n),r)}function crt(e,t,r,n){for(var o=r.points,i=Object.keys(e),a=0;a<i.length;a+=1){var u=i[a];if(c5r(e[u].points,o,n))return"".concat(t,"-placement-").concat(u)}return""}function ise(e){if(Array.isArray(e))return e}function prt(e,t){var r=e==null?null:typeof Symbol!="undefined"&&e[Symbol.iterator]||e["@@iterator"];if(r!=null){var n,o,i,a,u=[],d=!0,h=!1;try{if(i=(r=r.call(e)).next,t===0){if(Object(r)!==r)return;d=!1}else for(;!(d=(n=i.call(r)).done)&&(u.push(n.value),u.length!==t);d=!0);}catch(v){h=!0,o=v}finally{try{if(!d&&r.return!=null&&(a=r.return(),Object(a)!==a))return}finally{if(h)throw o}}return u}}function ase(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function jo(e,t){return ise(e)||prt(e,t)||L4(e,t)||ase()}var sb=Z(Pe()),Y4=Z(Pe());var frt=function(){if(typeof navigator=="undefined"||typeof window=="undefined")return!1;var e=navigator.userAgent||navigator.vendor||window.opera;return /(android|bb\d+|meego).+mobile|avantgo|bada\/|blackberry|blazer|compal|elaine|fennec|hiptop|iemobile|ip(hone|od)|iris|kindle|lge |maemo|midp|mmp|mobile.+firefox|netfront|opera m(ob|in)i|palm( os)?|phone|p(ixi|re)\/|plucker|pocket|psp|series(4|6)0|symbian|treo|up\.(browser|link)|vodafone|wap|windows ce|xda|xiino|android|ipad|playbook|silk/i.test(e)||/1207|6310|6590|3gso|4thp|50[1-6]i|770s|802s|a wa|abac|ac(er|oo|s-)|ai(ko|rn)|al(av|ca|co)|amoi|an(ex|ny|yw)|aptu|ar(ch|go)|as(te|us)|attw|au(di|-m|r |s )|avan|be(ck|ll|nq)|bi(lb|rd)|bl(ac|az)|br(e|v)w|bumb|bw-(n|u)|c55\/|capi|ccwa|cdm-|cell|chtm|cldc|cmd-|co(mp|nd)|craw|da(it|ll|ng)|dbte|dc-s|devi|dica|dmob|do(c|p)o|ds(12|-d)|el(49|ai)|em(l2|ul)|er(ic|k0)|esl8|ez([4-7]0|os|wa|ze)|fetc|fly(-|_)|g1 u|g560|gene|gf-5|g-mo|go(\.w|od)|gr(ad|un)|haie|hcit|hd-(m|p|t)|hei-|hi(pt|ta)|hp( i|ip)|hs-c|ht(c(-| |_|a|g|p|s|t)|tp)|hu(aw|tc)|i-(20|go|ma)|i230|iac( |-|\/)|ibro|idea|ig01|ikom|im1k|inno|ipaq|iris|ja(t|v)a|jbro|jemu|jigs|kddi|keji|kgt( |\/)|klon|kpt |kwc-|kyo(c|k)|le(no|xi)|lg( g|\/(k|l|u)|50|54|-[a-w])|libw|lynx|m1-w|m3ga|m50\/|ma(te|ui|xo)|mc(01|21|ca)|m-cr|me(rc|ri)|mi(o8|oa|ts)|mmef|mo(01|02|bi|de|do|t(-| |o|v)|zz)|mt(50|p1|v )|mwbp|mywa|n10[0-2]|n20[2-3]|n30(0|2)|n50(0|2|5)|n7(0(0|1)|10)|ne((c|m)-|on|tf|wf|wg|wt)|nok(6|i)|nzph|o2im|op(ti|wv)|oran|owg1|p800|pan(a|d|t)|pdxg|pg(13|-([1-8]|c))|phil|pire|pl(ay|uc)|pn-2|po(ck|rt|se)|prox|psio|pt-g|qa-a|qc(07|12|21|32|60|-[2-7]|i-)|qtek|r380|r600|raks|rim9|ro(ve|zo)|s55\/|sa(ge|ma|mm|ms|ny|va)|sc(01|h-|oo|p-)|sdk\/|se(c(-|0|1)|47|mc|nd|ri)|sgh-|shar|sie(-|m)|sk-0|sl(45|id)|sm(al|ar|b3|it|t5)|so(ft|ny)|sp(01|h-|v-|v )|sy(01|mb)|t2(18|50)|t6(00|10|18)|ta(gt|lk)|tcl-|tdg-|tel(i|m)|tim-|t-mo|to(pl|sh)|ts(70|m-|m3|m5)|tx-9|up(\.b|g1|si)|utst|v400|v750|veri|vi(rg|te)|vk(40|5[0-3]|-v)|vm40|voda|vulc|vx(52|53|60|61|70|80|81|83|85|98)|w3c(-| )|webc|whit|wi(g |nc|nw)|wmlb|wonu|x700|yas-|your|zeto|zte-/i.test(e==null?void 0:e.substr(0,4))};var gse=Z(Pe()),Nrt=Z(ko());var Ort=Z(ko());var Rc=Z(Pe()),mse=Z(Pe());var sse=Z(Pe());var drt=sse.createContext({});var hrt=Z(Pe()),p5r=function(e){pu(r,e);var t=fu(r);function r(){return uu(this,r),t.apply(this,arguments)}return cu(r,[{key:"render",value:function(){return this.props.children}}]),r}(hrt.Component),mrt=p5r;var _F=Z(Pe());function u0(e){var t=_F.useRef();t.current=e;var r=_F.useCallback(function(){for(var n,o=arguments.length,i=new Array(o),a=0;a<o;a++)i[a]=arguments[a];return(n=t.current)===null||n===void 0?void 0:n.call.apply(n,[t].concat(i))},[]);return r}var i2=Z(Pe());var grt=Kh()?i2.useLayoutEffect:i2.useEffect,f5r=function(t,r){var n=i2.useRef(!0);grt(function(){return t(n.current)},r),grt(function(){return n.current=!1,function(){n.current=!0}},[])};var U4=f5r;var a2=Z(Pe());function jg(e){var t=a2.useRef(!1),r=a2.useState(e),n=jo(r,2),o=n[0],i=n[1];a2.useEffect(function(){return t.current=!1,function(){t.current=!0}},[]);function a(u,d){d&&t.current||i(u)}return[o,a]}var bF=Z(Pe());function lse(e){var t=bF.useReducer(function(u){return u+1},0),r=jo(t,2),n=r[1],o=bF.useRef(e),i=u0(function(){return o.current}),a=u0(function(u){o.current=typeof u=="function"?u(o.current):u,n()});return[i,a]}var AF=Z(Pe()),zg=Z(Pe());var Xh="none",B4="appear",V4="enter",G4="leave",use="none",kc="prepare",qg="start",c0="active",xF="end",wF="prepared";var Ert=Z(Pe()),Srt=Z(Pe());function vrt(e,t){var r={};return r[e.toLowerCase()]=t.toLowerCase(),r["Webkit".concat(e)]="webkit".concat(t),r["Moz".concat(e)]="moz".concat(t),r["ms".concat(e)]="MS".concat(t),r["O".concat(e)]="o".concat(t.toLowerCase()),r}function h5r(e,t){var r={animationend:vrt("Animation","AnimationEnd"),transitionend:vrt("Transition","TransitionEnd")};return e&&("AnimationEvent"in t||delete r.animationend.animation,"TransitionEvent"in t||delete r.transitionend.transition),r}var m5r=h5r(Kh(),typeof window!="undefined"?window:{}),_rt={};Kh()&&(yrt=document.createElement("div"),_rt=yrt.style);var yrt,EF={};function brt(e){if(EF[e])return EF[e];var t=m5r[e];if(t)for(var r=Object.keys(t),n=r.length,o=0;o<n;o+=1){var i=r[o];if(Object.prototype.hasOwnProperty.call(t,i)&&i in _rt)return EF[e]=t[i],EF[e]}return""}var xrt=brt("animationend"),wrt=brt("transitionend"),SF=!!(xrt&&wrt),cse=xrt||"animationend",pse=wrt||"transitionend";function fse(e,t){if(!e)return null;if(Do(e)==="object"){var r=t.replace(/-\w/g,function(n){return n[1].toUpperCase()});return e[r]}return"".concat(e,"-").concat(t)}var Trt=function(e){var t=(0,Srt.useRef)();function r(o){o&&(o.removeEventListener(pse,e),o.removeEventListener(cse,e))}function n(o){t.current&&t.current!==o&&r(t.current),o&&o!==t.current&&(o.addEventListener(pse,e),o.addEventListener(cse,e),t.current=o)}return Ert.useEffect(function(){return function(){r(t.current)}},[]),[n,r]};var TF=Z(Pe()),g5r=Kh()?TF.useLayoutEffect:TF.useEffect,IF=g5r;var Mrt=Z(Pe());var MF=Z(Pe()),Irt=function(){var e=MF.useRef(null);function t(){Lc.cancel(e.current)}function r(n){var o=arguments.length>1&&arguments[1]!==void 0?arguments[1]:2;t();var i=Lc(function(){o<=1?n({isCanceled:function(){return i!==e.current}}):r(n,o-1)});e.current=i}return MF.useEffect(function(){return function(){t()}},[]),[r,t]};var v5r=[kc,qg,c0,xF],y5r=[kc,wF],dse=!1,Crt=!0;function CF(e){return e===c0||e===xF}var Art=function(e,t,r){var n=jg(use),o=jo(n,2),i=o[0],a=o[1],u=Irt(),d=jo(u,2),h=d[0],v=d[1];function b(){a(kc,!0)}var x=t?y5r:v5r;return IF(function(){if(i!==use&&i!==xF){var M=x.indexOf(i),O=x[M+1],D=r(i);D===dse?a(O,!0):O&&h(function(k){function R(){k.isCanceled()||a(O,!0)}D===!0?R():Promise.resolve(D).then(R)})}},[e,i]),Mrt.useEffect(function(){return function(){v()}},[]),[b,i]};function hse(e,t,r,n){var o=n.motionEnter,i=o===void 0?!0:o,a=n.motionAppear,u=a===void 0?!0:a,d=n.motionLeave,h=d===void 0?!0:d,v=n.motionDeadline,b=n.motionLeaveImmediately,x=n.onAppearPrepare,M=n.onEnterPrepare,O=n.onLeavePrepare,D=n.onAppearStart,k=n.onEnterStart,R=n.onLeaveStart,q=n.onAppearActive,B=n.onEnterActive,G=n.onLeaveActive,re=n.onAppearEnd,Q=n.onEnterEnd,ie=n.onLeaveEnd,me=n.onVisibleChanged,ve=jg(),ye=jo(ve,2),we=ye[0],Se=ye[1],ge=lse(Xh),Re=jo(ge,2),Je=Re[0],tt=Re[1],Et=jg(null),Xe=jo(Et,2),Pt=Xe[0],Lt=Xe[1],Gt=Je(),nt=(0,zg.useRef)(!1),ct=(0,zg.useRef)(null);function _t(){return r()}var We=(0,zg.useRef)(!1);function De(){tt(Xh),Lt(null,!0)}var Qe=u0(function(qr){var Ce=Je();if(Ce!==Xh){var Ze=_t();if(!(qr&&!qr.deadline&&qr.target!==Ze)){var et=We.current,qt;Ce===B4&&et?qt=re==null?void 0:re(Ze,qr):Ce===V4&&et?qt=Q==null?void 0:Q(Ze,qr):Ce===G4&&et&&(qt=ie==null?void 0:ie(Ze,qr)),et&&qt!==!1&&De()}}}),Ge=Trt(Qe),st=jo(Ge,1),pt=st[0],Rt=function(Ce){switch(Ce){case B4:return Wt(Wt(Wt({},kc,x),qg,D),c0,q);case V4:return Wt(Wt(Wt({},kc,M),qg,k),c0,B);case G4:return Wt(Wt(Wt({},kc,O),qg,R),c0,G);default:return{}}},St=AF.useMemo(function(){return Rt(Gt)},[Gt]),Ot=Art(Gt,!e,function(qr){if(qr===kc){var Ce=St[kc];return Ce?Ce(_t()):dse}if(Jt in St){var Ze;Lt(((Ze=St[Jt])===null||Ze===void 0?void 0:Ze.call(St,_t(),null))||null)}return Jt===c0&&Gt!==Xh&&(pt(_t()),v>0&&(clearTimeout(ct.current),ct.current=setTimeout(function(){Qe({deadline:!0})},v))),Jt===wF&&De(),Crt}),sr=jo(Ot,2),Ft=sr[0],Jt=sr[1],dr=CF(Jt);We.current=dr;var Er=(0,zg.useRef)(null);IF(function(){if(!(nt.current&&Er.current===t)){Se(t);var qr=nt.current;nt.current=!0;var Ce;!qr&&t&&u&&(Ce=B4),qr&&t&&i&&(Ce=V4),(qr&&!t&&h||!qr&&b&&!t&&h)&&(Ce=G4);var Ze=Rt(Ce);Ce&&(e||Ze[kc])?(tt(Ce),Ft()):tt(Xh),Er.current=t}},[t]),(0,zg.useEffect)(function(){(Gt===B4&&!u||Gt===V4&&!i||Gt===G4&&!h)&&tt(Xh)},[u,i,h]),(0,zg.useEffect)(function(){return function(){nt.current=!1,clearTimeout(ct.current)}},[]);var Cr=AF.useRef(!1);(0,zg.useEffect)(function(){we&&(Cr.current=!0),we!==void 0&&Gt===Xh&&((Cr.current||we)&&(me==null||me(we)),Cr.current=!0)},[we,Gt]);var Tr=Pt;return St[kc]&&Jt===qg&&(Tr=er({transition:"none"},Tr)),[Gt,Jt,Tr,we!=null?we:t]}function _5r(e){var t=e;Do(e)==="object"&&(t=e.transitionSupport);function r(o,i){return!!(o.motionName&&t&&i!==!1)}var n=Rc.forwardRef(function(o,i){var a=o.visible,u=a===void 0?!0:a,d=o.removeOnLeave,h=d===void 0?!0:d,v=o.forceRender,b=o.children,x=o.motionName,M=o.leavedClassName,O=o.eventProps,D=Rc.useContext(drt),k=D.motion,R=r(o,k),q=(0,mse.useRef)(),B=(0,mse.useRef)();function G(){try{return q.current instanceof HTMLElement?q.current:q4(B.current)}catch(Xe){return null}}var re=hse(R,u,G,o),Q=jo(re,4),ie=Q[0],me=Q[1],ve=Q[2],ye=Q[3],we=Rc.useRef(ye);ye&&(we.current=!0);var Se=Rc.useCallback(function(Xe){q.current=Xe,ose(i,Xe)},[i]),ge,Re=er(er({},O),{},{visible:u});if(!b)ge=null;else if(ie===Xh)ye?ge=b(er({},Re),Se):!h&&we.current&&M?ge=b(er(er({},Re),{},{className:M}),Se):v||!h&&!M?ge=b(er(er({},Re),{},{style:{display:"none"}}),Se):ge=null;else{var Je;me===kc?Je="prepare":CF(me)?Je="active":me===qg&&(Je="start");var tt=fse(x,"".concat(ie,"-").concat(Je));ge=b(er(er({},Re),{},{className:(0,Ort.default)(fse(x,ie),Wt(Wt({},tt,tt&&Je),x,typeof x=="string")),style:ve}),Se)}if(Rc.isValidElement(ge)&&F4(ge)){var Et=art(ge);Et||(ge=Rc.cloneElement(ge,{ref:Se}))}return Rc.createElement(mrt,{ref:B},ge)});return n.displayName="CSSMotion",n}var OF=_5r(SF);var ob=Z(Pe());var PF="add",NF="keep",DF="remove",kF="removed";function b5r(e){var t;return e&&Do(e)==="object"&&"key"in e?t=e:t={key:e},er(er({},t),{},{key:String(t.key)})}function LF(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[];return e.map(b5r)}function Prt(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[],t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:[],r=[],n=0,o=t.length,i=LF(e),a=LF(t);i.forEach(function(h){for(var v=!1,b=n;b<o;b+=1){var x=a[b];if(x.key===h.key){n<b&&(r=r.concat(a.slice(n,b).map(function(M){return er(er({},M),{},{status:PF})})),n=b),r.push(er(er({},x),{},{status:NF})),n+=1,v=!0;break}}v||r.push(er(er({},h),{},{status:DF}))}),n<o&&(r=r.concat(a.slice(n).map(function(h){return er(er({},h),{},{status:PF})})));var u={};r.forEach(function(h){var v=h.key;u[v]=(u[v]||0)+1});var d=Object.keys(u).filter(function(h){return u[h]>1});return d.forEach(function(h){r=r.filter(function(v){var b=v.key,x=v.status;return b!==h||x!==DF}),r.forEach(function(v){v.key===h&&(v.status=NF)})}),r}var x5r=["component","children","onVisibleChanged","onAllRemoved"],w5r=["status"],E5r=["eventProps","visible","children","motionName","motionAppear","motionEnter","motionLeave","motionLeaveImmediately","motionDeadline","removeOnLeave","leavedClassName","onAppearPrepare","onAppearStart","onAppearActive","onAppearEnd","onEnterStart","onEnterActive","onEnterEnd","onLeaveStart","onLeaveActive","onLeaveEnd"];function S5r(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:OF,r=function(n){pu(i,n);var o=fu(i);function i(){var a;uu(this,i);for(var u=arguments.length,d=new Array(u),h=0;h<u;h++)d[h]=arguments[h];return a=o.call.apply(o,[this].concat(d)),Wt(kn(a),"state",{keyEntities:[]}),Wt(kn(a),"removeKey",function(v){a.setState(function(b){var x=b.keyEntities.map(function(M){return M.key!==v?M:er(er({},M),{},{status:kF})});return{keyEntities:x}},function(){var b=a.state.keyEntities,x=b.filter(function(M){var O=M.status;return O!==kF}).length;x===0&&a.props.onAllRemoved&&a.props.onAllRemoved()})}),a}return cu(i,[{key:"render",value:function(){var u=this,d=this.state.keyEntities,h=this.props,v=h.component,b=h.children,x=h.onVisibleChanged,M=h.onAllRemoved,O=Vu(h,x5r),D=v||ob.Fragment,k={};return E5r.forEach(function(R){k[R]=O[R],delete O[R]}),delete O.keys,ob.createElement(D,O,d.map(function(R,q){var B=R.status,G=Vu(R,w5r),re=B===PF||B===NF;return ob.createElement(t,vo({},k,{key:G.key,visible:re,eventProps:G,onVisibleChanged:function(ie){x==null||x(ie,{key:G.key}),ie||u.removeKey(G.key)}}),function(Q,ie){return b(er(er({},Q),{},{index:q}),ie)})}))}}],[{key:"getDerivedStateFromProps",value:function(u,d){var h=u.keys,v=d.keyEntities,b=LF(h),x=Prt(v,b);return{keyEntities:x.filter(function(M){var O=v.find(function(D){var k=D.key;return M.key===k});return!(O&&O.status===kF&&M.status===DF)})}}}]),i}(ob.Component);return Wt(r,"defaultProps",{component:"div"}),r}var T5r=S5r(SF);var s2=OF;function RF(e){var t=e.prefixCls,r=e.motion,n=e.animation,o=e.transitionName;return r||(n?{motionName:"".concat(t,"-").concat(n)}:o?{motionName:o}:null)}function vse(e){var t=e.prefixCls,r=e.visible,n=e.zIndex,o=e.mask,i=e.maskMotion,a=e.maskAnimation,u=e.maskTransitionName;if(!o)return null;var d={};return(i||u||a)&&(d=er({motionAppear:!0},RF({motion:i,prefixCls:t,transitionName:u,animation:a}))),gse.createElement(s2,vo({},d,{visible:r,removeOnLeave:!0}),function(h){var v=h.className;return gse.createElement("div",{style:{zIndex:n},className:(0,Nrt.default)("".concat(t,"-mask"),v)})})}var dp=Z(Pe()),ab=Z(Pe());function Drt(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(o){return Object.getOwnPropertyDescriptor(e,o).enumerable})),r.push.apply(r,n)}return r}function Lrt(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?Drt(Object(r),!0).forEach(function(n){I5r(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Drt(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function wse(e){"@babel/helpers - typeof";return wse=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},wse(e)}function I5r(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var H4,M5r={Webkit:"-webkit-",Moz:"-moz-",ms:"-ms-",O:"-o-"};function UF(){if(H4!==void 0)return H4;H4="";var e=document.createElement("p").style,t="Transform";for(var r in M5r)r+t in e&&(H4=r);return H4}function $rt(){return UF()?"".concat(UF(),"TransitionProperty"):"transitionProperty"}function BF(){return UF()?"".concat(UF(),"Transform"):"transform"}function krt(e,t){var r=$rt();r&&(e.style[r]=t,r!=="transitionProperty"&&(e.style.transitionProperty=t))}function yse(e,t){var r=BF();r&&(e.style[r]=t,r!=="transform"&&(e.style.transform=t))}function C5r(e){return e.style.transitionProperty||e.style[$rt()]}function A5r(e){var t=window.getComputedStyle(e,null),r=t.getPropertyValue("transform")||t.getPropertyValue(BF());if(r&&r!=="none"){var n=r.replace(/[^0-9\-.,]/g,"").split(",");return{x:parseFloat(n[12]||n[4],0),y:parseFloat(n[13]||n[5],0)}}return{x:0,y:0}}var O5r=/matrix\((.*)\)/,P5r=/matrix3d\((.*)\)/;function N5r(e,t){var r=window.getComputedStyle(e,null),n=r.getPropertyValue("transform")||r.getPropertyValue(BF());if(n&&n!=="none"){var o,i=n.match(O5r);if(i)i=i[1],o=i.split(",").map(function(u){return parseFloat(u,10)}),o[4]=t.x,o[5]=t.y,yse(e,"matrix(".concat(o.join(","),")"));else{var a=n.match(P5r)[1];o=a.split(",").map(function(u){return parseFloat(u,10)}),o[12]=t.x,o[13]=t.y,yse(e,"matrix3d(".concat(o.join(","),")"))}}else yse(e,"translateX(".concat(t.x,"px) translateY(").concat(t.y,"px) translateZ(0)"))}var D5r=/[\-+]?(?:\d*\.|)\d+(?:[eE][\-+]?\d+|)/.source,Z4;function Rrt(e){var t=e.style.display;e.style.display="none",e.offsetHeight,e.style.display=t}function l2(e,t,r){var n=r;if(wse(t)==="object"){for(var o in t)t.hasOwnProperty(o)&&l2(e,o,t[o]);return}if(typeof n!="undefined"){typeof n=="number"&&(n="".concat(n,"px")),e.style[t]=n;return}return Z4(e,t)}function L5r(e){var t,r,n,o=e.ownerDocument,i=o.body,a=o&&o.documentElement;return t=e.getBoundingClientRect(),r=Math.floor(t.left),n=Math.floor(t.top),r-=a.clientLeft||i.clientLeft||0,n-=a.clientTop||i.clientTop||0,{left:r,top:n}}function Zrt(e,t){var r=e["page".concat(t?"Y":"X","Offset")],n="scroll".concat(t?"Top":"Left");if(typeof r!="number"){var o=e.document;r=o.documentElement[n],typeof r!="number"&&(r=o.body[n])}return r}function Yrt(e){return Zrt(e)}function Krt(e){return Zrt(e,!0)}function $4(e){var t=L5r(e),r=e.ownerDocument,n=r.defaultView||r.parentWindow;return t.left+=Yrt(n),t.top+=Krt(n),t}function Ise(e){return e!=null&&e==e.window}function Xrt(e){return Ise(e)?e.document:e.nodeType===9?e:e.ownerDocument}function k5r(e,t,r){var n=r,o="",i=Xrt(e);return n=n||i.defaultView.getComputedStyle(e,null),n&&(o=n.getPropertyValue(t)||n[t]),o}var R5r=new RegExp("^(".concat(D5r,")(?!px)[a-z%]+$"),"i"),j5r=/^(top|right|bottom|left)$/,_se="currentStyle",bse="runtimeStyle",ib="left",q5r="px";function z5r(e,t){var r=e[_se]&&e[_se][t];if(R5r.test(r)&&!j5r.test(t)){var n=e.style,o=n[ib],i=e[bse][ib];e[bse][ib]=e[_se][ib],n[ib]=t==="fontSize"?"1em":r||0,r=n.pixelLeft+q5r,n[ib]=o,e[bse][ib]=i}return r===""?"auto":r}typeof window!="undefined"&&(Z4=window.getComputedStyle?k5r:z5r);function jF(e,t){return e==="left"?t.useCssRight?"right":e:t.useCssBottom?"bottom":e}function jrt(e){if(e==="left")return"right";if(e==="right")return"left";if(e==="top")return"bottom";if(e==="bottom")return"top"}function qrt(e,t,r){l2(e,"position")==="static"&&(e.style.position="relative");var n=-999,o=-999,i=jF("left",r),a=jF("top",r),u=jrt(i),d=jrt(a);i!=="left"&&(n=999),a!=="top"&&(o=999);var h="",v=$4(e);("left"in t||"top"in t)&&(h=C5r(e)||"",krt(e,"none")),"left"in t&&(e.style[u]="",e.style[i]="".concat(n,"px")),"top"in t&&(e.style[d]="",e.style[a]="".concat(o,"px")),Rrt(e);var b=$4(e),x={};for(var M in t)if(t.hasOwnProperty(M)){var O=jF(M,r),D=M==="left"?n:o,k=v[M]-b[M];O===M?x[O]=D+k:x[O]=D-k}l2(e,x),Rrt(e),("left"in t||"top"in t)&&krt(e,h);var R={};for(var q in t)if(t.hasOwnProperty(q)){var B=jF(q,r),G=t[q]-v[q];q===B?R[B]=x[B]+G:R[B]=x[B]-G}l2(e,R)}function F5r(e,t){var r=$4(e),n=A5r(e),o={x:n.x,y:n.y};"left"in t&&(o.x=n.x+t.left-r.left),"top"in t&&(o.y=n.y+t.top-r.top),N5r(e,o)}function U5r(e,t,r){if(r.ignoreShake){var n=$4(e),o=n.left.toFixed(0),i=n.top.toFixed(0),a=t.left.toFixed(0),u=t.top.toFixed(0);if(o===a&&i===u)return}r.useCssRight||r.useCssBottom?qrt(e,t,r):r.useCssTransform&&BF()in document.body.style?F5r(e,t):qrt(e,t,r)}function Mse(e,t){for(var r=0;r<e.length;r++)t(e[r])}function Qrt(e){return Z4(e,"boxSizing")==="border-box"}var B5r=["margin","border","padding"],Ese=-1,V5r=2,Sse=1,G5r=0;function H5r(e,t,r){var n={},o=e.style,i;for(i in t)t.hasOwnProperty(i)&&(n[i]=o[i],o[i]=t[i]);r.call(e);for(i in t)t.hasOwnProperty(i)&&(o[i]=n[i])}function W4(e,t,r){var n=0,o,i,a;for(i=0;i<t.length;i++)if(o=t[i],o)for(a=0;a<r.length;a++){var u=void 0;o==="border"?u="".concat(o).concat(r[a],"Width"):u=o+r[a],n+=parseFloat(Z4(e,u))||0}return n}var Qh={getParent:function(t){var r=t;do r.nodeType===11&&r.host?r=r.host:r=r.parentNode;while(r&&r.nodeType!==1&&r.nodeType!==9);return r}};Mse(["Width","Height"],function(e){Qh["doc".concat(e)]=function(t){var r=t.document;return Math.max(r.documentElement["scroll".concat(e)],r.body["scroll".concat(e)],Qh["viewport".concat(e)](r))},Qh["viewport".concat(e)]=function(t){var r="client".concat(e),n=t.document,o=n.body,i=n.documentElement,a=i[r];return n.compatMode==="CSS1Compat"&&a||o&&o[r]||a}});function zrt(e,t,r){var n=r;if(Ise(e))return t==="width"?Qh.viewportWidth(e):Qh.viewportHeight(e);if(e.nodeType===9)return t==="width"?Qh.docWidth(e):Qh.docHeight(e);var o=t==="width"?["Left","Right"]:["Top","Bottom"],i=Math.floor(t==="width"?e.getBoundingClientRect().width:e.getBoundingClientRect().height),a=Qrt(e),u=0;(i==null||i<=0)&&(i=void 0,u=Z4(e,t),(u==null||Number(u)<0)&&(u=e.style[t]||0),u=Math.floor(parseFloat(u))||0),n===void 0&&(n=a?Sse:Ese);var d=i!==void 0||a,h=i||u;return n===Ese?d?h-W4(e,["border","padding"],o):u:d?n===Sse?h:h+(n===V5r?-W4(e,["border"],o):W4(e,["margin"],o)):u+W4(e,B5r.slice(n),o)}var W5r={position:"absolute",visibility:"hidden",display:"block"};function Frt(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];var n,o=t[0];return o.offsetWidth!==0?n=zrt.apply(void 0,t):H5r(o,W5r,function(){n=zrt.apply(void 0,t)}),n}Mse(["width","height"],function(e){var t=e.charAt(0).toUpperCase()+e.slice(1);Qh["outer".concat(t)]=function(n,o){return n&&Frt(n,e,o?G5r:Sse)};var r=e==="width"?["Left","Right"]:["Top","Bottom"];Qh[e]=function(n,o){var i=o;if(i!==void 0){if(n){var a=Qrt(n);return a&&(i+=W4(n,["padding","border"],r)),l2(n,e,i)}return}return n&&Frt(n,e,Ese)}});function Jrt(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r]);return e}var Un={getWindow:function(t){if(t&&t.document&&t.setTimeout)return t;var r=t.ownerDocument||t;return r.defaultView||r.parentWindow},getDocument:Xrt,offset:function(t,r,n){if(typeof r!="undefined")U5r(t,r,n||{});else return $4(t)},isWindow:Ise,each:Mse,css:l2,clone:function(t){var r,n={};for(r in t)t.hasOwnProperty(r)&&(n[r]=t[r]);var o=t.overflow;if(o)for(r in t)t.hasOwnProperty(r)&&(n.overflow[r]=t.overflow[r]);return n},mix:Jrt,getWindowScrollLeft:function(t){return Yrt(t)},getWindowScrollTop:function(t){return Krt(t)},merge:function(){for(var t={},r=0;r<arguments.length;r++)Un.mix(t,r<0||arguments.length<=r?void 0:arguments[r]);return t},viewportWidth:0,viewportHeight:0};Jrt(Un,Qh);var xse=Un.getParent;function Tse(e){if(Un.isWindow(e)||e.nodeType===9)return null;var t=Un.getDocument(e),r=t.body,n,o=Un.css(e,"position"),i=o==="fixed"||o==="absolute";if(!i)return e.nodeName.toLowerCase()==="html"?null:xse(e);for(n=xse(e);n&&n!==r&&n.nodeType!==9;n=xse(n))if(o=Un.css(n,"position"),o!=="static")return n;return null}var Urt=Un.getParent;function $5r(e){if(Un.isWindow(e)||e.nodeType===9)return!1;var t=Un.getDocument(e),r=t.body,n=null;for(n=Urt(e);n&&n!==r&&n!==t;n=Urt(n)){var o=Un.css(n,"position");if(o==="fixed")return!0}return!1}function Cse(e,t){for(var r={left:0,right:1/0,top:0,bottom:1/0},n=Tse(e),o=Un.getDocument(e),i=o.defaultView||o.parentWindow,a=o.body,u=o.documentElement;n;){if((navigator.userAgent.indexOf("MSIE")===-1||n.clientWidth!==0)&&n!==a&&n!==u&&Un.css(n,"overflow")!=="visible"){var d=Un.offset(n);d.left+=n.clientLeft,d.top+=n.clientTop,r.top=Math.max(r.top,d.top),r.right=Math.min(r.right,d.left+n.clientWidth),r.bottom=Math.min(r.bottom,d.top+n.clientHeight),r.left=Math.max(r.left,d.left)}else if(n===a||n===u)break;n=Tse(n)}var h=null;if(!Un.isWindow(e)&&e.nodeType!==9){h=e.style.position;var v=Un.css(e,"position");v==="absolute"&&(e.style.position="fixed")}var b=Un.getWindowScrollLeft(i),x=Un.getWindowScrollTop(i),M=Un.viewportWidth(i),O=Un.viewportHeight(i),D=u.scrollWidth,k=u.scrollHeight,R=window.getComputedStyle(a);if(R.overflowX==="hidden"&&(D=i.innerWidth),R.overflowY==="hidden"&&(k=i.innerHeight),e.style&&(e.style.position=h),t||$5r(e))r.left=Math.max(r.left,b),r.top=Math.max(r.top,x),r.right=Math.min(r.right,b+M),r.bottom=Math.min(r.bottom,x+O);else{var q=Math.max(D,b+M);r.right=Math.min(r.right,q);var B=Math.max(k,x+O);r.bottom=Math.min(r.bottom,B)}return r.top>=0&&r.left>=0&&r.bottom>r.top&&r.right>r.left?r:null}function Z5r(e,t,r,n){var o=Un.clone(e),i={width:t.width,height:t.height};return n.adjustX&&o.left<r.left&&(o.left=r.left),n.resizeWidth&&o.left>=r.left&&o.left+i.width>r.right&&(i.width-=o.left+i.width-r.right),n.adjustX&&o.left+i.width>r.right&&(o.left=Math.max(r.right-i.width,r.left)),n.adjustY&&o.top<r.top&&(o.top=r.top),n.resizeHeight&&o.top>=r.top&&o.top+i.height>r.bottom&&(i.height-=o.top+i.height-r.bottom),n.adjustY&&o.top+i.height>r.bottom&&(o.top=Math.max(r.bottom-i.height,r.top)),Un.mix(o,i)}function Ase(e){var t,r,n;if(!Un.isWindow(e)&&e.nodeType!==9)t=Un.offset(e),r=Un.outerWidth(e),n=Un.outerHeight(e);else{var o=Un.getWindow(e);t={left:Un.getWindowScrollLeft(o),top:Un.getWindowScrollTop(o)},r=Un.viewportWidth(o),n=Un.viewportHeight(o)}return t.width=r,t.height=n,t}function Brt(e,t){var r=t.charAt(0),n=t.charAt(1),o=e.width,i=e.height,a=e.left,u=e.top;return r==="c"?u+=i/2:r==="b"&&(u+=i),n==="c"?a+=o/2:n==="r"&&(a+=o),{left:a,top:u}}function qF(e,t,r,n,o){var i=Brt(t,r[1]),a=Brt(e,r[0]),u=[a.left-i.left,a.top-i.top];return{left:Math.round(e.left-u[0]+n[0]-o[0]),top:Math.round(e.top-u[1]+n[1]-o[1])}}function Vrt(e,t,r){return e.left<r.left||e.left+t.width>r.right}function Grt(e,t,r){return e.top<r.top||e.top+t.height>r.bottom}function Y5r(e,t,r){return e.left>r.right||e.left+t.width<r.left}function K5r(e,t,r){return e.top>r.bottom||e.top+t.height<r.top}function zF(e,t,r){var n=[];return Un.each(e,function(o){n.push(o.replace(t,function(i){return r[i]}))}),n}function FF(e,t){return e[t]=-e[t],e}function Hrt(e,t){var r;return /%$/.test(e)?r=parseInt(e.substring(0,e.length-1),10)/100*t:r=parseInt(e,10),r||0}function Wrt(e,t){e[0]=Hrt(e[0],t.width),e[1]=Hrt(e[1],t.height)}function ent(e,t,r,n){var o=r.points,i=r.offset||[0,0],a=r.targetOffset||[0,0],u=r.overflow,d=r.source||e;i=[].concat(i),a=[].concat(a),u=u||{};var h={},v=0,b=!!(u&&u.alwaysByViewport),x=Cse(d,b),M=Ase(d);Wrt(i,M),Wrt(a,t);var O=qF(M,t,o,i,a),D=Un.merge(M,O);if(x&&(u.adjustX||u.adjustY)&&n){if(u.adjustX&&Vrt(O,M,x)){var k=zF(o,/[lr]/gi,{l:"r",r:"l"}),R=FF(i,0),q=FF(a,0),B=qF(M,t,k,R,q);Y5r(B,M,x)||(v=1,o=k,i=R,a=q)}if(u.adjustY&&Grt(O,M,x)){var G=zF(o,/[tb]/gi,{t:"b",b:"t"}),re=FF(i,1),Q=FF(a,1),ie=qF(M,t,G,re,Q);K5r(ie,M,x)||(v=1,o=G,i=re,a=Q)}v&&(O=qF(M,t,o,i,a),Un.mix(D,O));var me=Vrt(O,M,x),ve=Grt(O,M,x);if(me||ve){var ye=o;me&&(ye=zF(o,/[lr]/gi,{l:"r",r:"l"})),ve&&(ye=zF(o,/[tb]/gi,{t:"b",b:"t"})),o=ye,i=r.offset||[0,0],a=r.targetOffset||[0,0]}h.adjustX=u.adjustX&&me,h.adjustY=u.adjustY&&ve,(h.adjustX||h.adjustY)&&(D=Z5r(O,M,x,h))}return D.width!==M.width&&Un.css(d,"width",Un.width(d)+D.width-M.width),D.height!==M.height&&Un.css(d,"height",Un.height(d)+D.height-M.height),Un.offset(d,{left:D.left,top:D.top},{useCssRight:r.useCssRight,useCssBottom:r.useCssBottom,useCssTransform:r.useCssTransform,ignoreShake:r.ignoreShake}),{points:o,offset:i,targetOffset:a,overflow:h}}function X5r(e,t){var r=Cse(e,t),n=Ase(e);return!r||n.left+n.width<=r.left||n.top+n.height<=r.top||n.left>=r.right||n.top>=r.bottom}function VF(e,t,r){var n=r.target||t,o=Ase(n),i=!X5r(n,r.overflow&&r.overflow.alwaysByViewport);return ent(e,o,r,i)}VF.__getOffsetParent=Tse;VF.__getVisibleRectForElement=Cse;function tnt(e,t,r){var n,o,i=Un.getDocument(e),a=i.defaultView||i.parentWindow,u=Un.getWindowScrollLeft(a),d=Un.getWindowScrollTop(a),h=Un.viewportWidth(a),v=Un.viewportHeight(a);"pageX"in t?n=t.pageX:n=u+t.clientX,"pageY"in t?o=t.pageY:o=d+t.clientY;var b={left:n,top:o,width:0,height:0},x=n>=0&&n<=u+h&&o>=0&&o<=d+v,M=[r.points[0],"cc"];return ent(e,b,Lrt(Lrt({},r),{},{points:M}),x)}function Q5r(e,t){var r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!1,n=new Set;function o(i,a){var u=arguments.length>2&&arguments[2]!==void 0?arguments[2]:1,d=n.has(i);if(Zh(!d,"Warning: There may be circular references"),d)return!1;if(i===a)return!0;if(r&&u>1)return!1;n.add(i);var h=u+1;if(Array.isArray(i)){if(!Array.isArray(a)||i.length!==a.length)return!1;for(var v=0;v<i.length;v++)if(!o(i[v],a[v],h))return!1;return!0}if(i&&a&&Do(i)==="object"&&Do(a)==="object"){var b=Object.keys(i);return b.length!==Object.keys(a).length?!1:b.every(function(x){return o(i[x],a[x],h)})}return!1}return o(e,t)}var rnt=Q5r;var nnt=function(e){if(!e)return!1;if(e instanceof Element){if(e.offsetParent)return!0;if(e.getBBox){var t=e.getBBox(),r=t.width,n=t.height;if(r||n)return!0}if(e.getBoundingClientRect){var o=e.getBoundingClientRect(),i=o.width,a=o.height;if(i||a)return!0}}return!1};var zl=Z(Pe());var Ose=Z(Pe()),ont=function(e,t){var r=Ose.default.useRef(!1),n=Ose.default.useRef(null);function o(){window.clearTimeout(n.current)}function i(a){if(o(),!r.current||a===!0){if(e(a)===!1)return;r.current=!0,n.current=window.setTimeout(function(){r.current=!1},t)}else n.current=window.setTimeout(function(){r.current=!1,i()},t)}return[i,function(){r.current=!1,o()}]};var ant=function(){if(typeof Map!="undefined")return Map;function e(t,r){var n=-1;return t.some(function(o,i){return o[0]===r?(n=i,!0):!1}),n}return function(){function t(){this.__entries__=[]}return Object.defineProperty(t.prototype,"size",{get:function(){return this.__entries__.length},enumerable:!0,configurable:!0}),t.prototype.get=function(r){var n=e(this.__entries__,r),o=this.__entries__[n];return o&&o[1]},t.prototype.set=function(r,n){var o=e(this.__entries__,r);~o?this.__entries__[o][1]=n:this.__entries__.push([r,n])},t.prototype.delete=function(r){var n=this.__entries__,o=e(n,r);~o&&n.splice(o,1)},t.prototype.has=function(r){return!!~e(this.__entries__,r)},t.prototype.clear=function(){this.__entries__.splice(0)},t.prototype.forEach=function(r,n){n===void 0&&(n=null);for(var o=0,i=this.__entries__;o<i.length;o++){var a=i[o];r.call(n,a[1],a[0])}},t}()}(),Pse=typeof window!="undefined"&&typeof document!="undefined"&&window.document===document,GF=function(){return typeof global!="undefined"&&global.Math===Math?global:typeof self!="undefined"&&self.Math===Math?self:typeof window!="undefined"&&window.Math===Math?window:Function("return this")()}(),J5r=function(){return typeof requestAnimationFrame=="function"?requestAnimationFrame.bind(GF):function(e){return setTimeout(function(){return e(Date.now())},1e3/60)}}(),eLr=2;function tLr(e,t){var r=!1,n=!1,o=0;function i(){r&&(r=!1,e()),n&&u()}function a(){J5r(i)}function u(){var d=Date.now();if(r){if(d-o<eLr)return;n=!0}else r=!0,n=!1,setTimeout(a,t);o=d}return u}var rLr=20,nLr=["top","right","bottom","left","width","height","size","weight"],oLr=typeof MutationObserver!="undefined",iLr=function(){function e(){this.connected_=!1,this.mutationEventsAdded_=!1,this.mutationsObserver_=null,this.observers_=[],this.onTransitionEnd_=this.onTransitionEnd_.bind(this),this.refresh=tLr(this.refresh.bind(this),rLr)}return e.prototype.addObserver=function(t){~this.observers_.indexOf(t)||this.observers_.push(t),this.connected_||this.connect_()},e.prototype.removeObserver=function(t){var r=this.observers_,n=r.indexOf(t);~n&&r.splice(n,1),!r.length&&this.connected_&&this.disconnect_()},e.prototype.refresh=function(){var t=this.updateObservers_();t&&this.refresh()},e.prototype.updateObservers_=function(){var t=this.observers_.filter(function(r){return r.gatherActive(),r.hasActive()});return t.forEach(function(r){return r.broadcastActive()}),t.length>0},e.prototype.connect_=function(){!Pse||this.connected_||(document.addEventListener("transitionend",this.onTransitionEnd_),window.addEventListener("resize",this.refresh),oLr?(this.mutationsObserver_=new MutationObserver(this.refresh),this.mutationsObserver_.observe(document,{attributes:!0,childList:!0,characterData:!0,subtree:!0})):(document.addEventListener("DOMSubtreeModified",this.refresh),this.mutationEventsAdded_=!0),this.connected_=!0)},e.prototype.disconnect_=function(){!Pse||!this.connected_||(document.removeEventListener("transitionend",this.onTransitionEnd_),window.removeEventListener("resize",this.refresh),this.mutationsObserver_&&this.mutationsObserver_.disconnect(),this.mutationEventsAdded_&&document.removeEventListener("DOMSubtreeModified",this.refresh),this.mutationsObserver_=null,this.mutationEventsAdded_=!1,this.connected_=!1)},e.prototype.onTransitionEnd_=function(t){var r=t.propertyName,n=r===void 0?"":r,o=nLr.some(function(i){return!!~n.indexOf(i)});o&&this.refresh()},e.getInstance=function(){return this.instance_||(this.instance_=new e),this.instance_},e.instance_=null,e}(),snt=function(e,t){for(var r=0,n=Object.keys(t);r<n.length;r++){var o=n[r];Object.defineProperty(e,o,{value:t[o],enumerable:!1,writable:!1,configurable:!0})}return e},u2=function(e){var t=e&&e.ownerDocument&&e.ownerDocument.defaultView;return t||GF},lnt=WF(0,0,0,0);function HF(e){return parseFloat(e)||0}function int(e){for(var t=[],r=1;r<arguments.length;r++)t[r-1]=arguments[r];return t.reduce(function(n,o){var i=e["border-"+o+"-width"];return n+HF(i)},0)}function aLr(e){for(var t=["top","right","bottom","left"],r={},n=0,o=t;n<o.length;n++){var i=o[n],a=e["padding-"+i];r[i]=HF(a)}return r}function sLr(e){var t=e.getBBox();return WF(0,0,t.width,t.height)}function lLr(e){var t=e.clientWidth,r=e.clientHeight;if(!t&&!r)return lnt;var n=u2(e).getComputedStyle(e),o=aLr(n),i=o.left+o.right,a=o.top+o.bottom,u=HF(n.width),d=HF(n.height);if(n.boxSizing==="border-box"&&(Math.round(u+i)!==t&&(u-=int(n,"left","right")+i),Math.round(d+a)!==r&&(d-=int(n,"top","bottom")+a)),!cLr(e)){var h=Math.round(u+i)-t,v=Math.round(d+a)-r;Math.abs(h)!==1&&(u-=h),Math.abs(v)!==1&&(d-=v)}return WF(o.left,o.top,u,d)}var uLr=function(){return typeof SVGGraphicsElement!="undefined"?function(e){return e instanceof u2(e).SVGGraphicsElement}:function(e){return e instanceof u2(e).SVGElement&&typeof e.getBBox=="function"}}();function cLr(e){return e===u2(e).document.documentElement}function pLr(e){return Pse?uLr(e)?sLr(e):lLr(e):lnt}function fLr(e){var t=e.x,r=e.y,n=e.width,o=e.height,i=typeof DOMRectReadOnly!="undefined"?DOMRectReadOnly:Object,a=Object.create(i.prototype);return snt(a,{x:t,y:r,width:n,height:o,top:r,right:t+n,bottom:o+r,left:t}),a}function WF(e,t,r,n){return{x:e,y:t,width:r,height:n}}var dLr=function(){function e(t){this.broadcastWidth=0,this.broadcastHeight=0,this.contentRect_=WF(0,0,0,0),this.target=t}return e.prototype.isActive=function(){var t=pLr(this.target);return this.contentRect_=t,t.width!==this.broadcastWidth||t.height!==this.broadcastHeight},e.prototype.broadcastRect=function(){var t=this.contentRect_;return this.broadcastWidth=t.width,this.broadcastHeight=t.height,t},e}(),hLr=function(){function e(t,r){var n=fLr(r);snt(this,{target:t,contentRect:n})}return e}(),mLr=function(){function e(t,r,n){if(this.activeObservations_=[],this.observations_=new ant,typeof t!="function")throw new TypeError("The callback provided as parameter 1 is not a function.");this.callback_=t,this.controller_=r,this.callbackCtx_=n}return e.prototype.observe=function(t){if(!arguments.length)throw new TypeError("1 argument required, but only 0 present.");if(!(typeof Element=="undefined"||!(Element instanceof Object))){if(!(t instanceof u2(t).Element))throw new TypeError("parameter 1 is not of type \"Element\".");var r=this.observations_;r.has(t)||(r.set(t,new dLr(t)),this.controller_.addObserver(this),this.controller_.refresh())}},e.prototype.unobserve=function(t){if(!arguments.length)throw new TypeError("1 argument required, but only 0 present.");if(!(typeof Element=="undefined"||!(Element instanceof Object))){if(!(t instanceof u2(t).Element))throw new TypeError("parameter 1 is not of type \"Element\".");var r=this.observations_;r.has(t)&&(r.delete(t),r.size||this.controller_.removeObserver(this))}},e.prototype.disconnect=function(){this.clearActive(),this.observations_.clear(),this.controller_.removeObserver(this)},e.prototype.gatherActive=function(){var t=this;this.clearActive(),this.observations_.forEach(function(r){r.isActive()&&t.activeObservations_.push(r)})},e.prototype.broadcastActive=function(){if(this.hasActive()){var t=this.callbackCtx_,r=this.activeObservations_.map(function(n){return new hLr(n.target,n.broadcastRect())});this.callback_.call(t,r,t),this.clearActive()}},e.prototype.clearActive=function(){this.activeObservations_.splice(0)},e.prototype.hasActive=function(){return this.activeObservations_.length>0},e}(),unt=typeof WeakMap!="undefined"?new WeakMap:new ant,cnt=function(){function e(t){if(!(this instanceof e))throw new TypeError("Cannot call a class as a function.");if(!arguments.length)throw new TypeError("1 argument required, but only 0 present.");var r=iLr.getInstance(),n=new mLr(t,r,this);unt.set(this,n)}return e}();["observe","unobserve","disconnect"].forEach(function(e){cnt.prototype[e]=function(){var t;return(t=unt.get(this))[e].apply(t,arguments)}});var gLr=function(){return typeof GF.ResizeObserver!="undefined"?GF.ResizeObserver:cnt}(),pnt=gLr;function fnt(e,t){return e===t?!0:!e||!t?!1:"pageX"in t&&"pageY"in t?e.pageX===t.pageX&&e.pageY===t.pageY:"clientX"in t&&"clientY"in t?e.clientX===t.clientX&&e.clientY===t.clientY:!1}function dnt(e,t){e!==document.activeElement&&nb(t,e)&&typeof e.focus=="function"&&e.focus()}function Nse(e,t){var r=null,n=null;function o(a){var u=jo(a,1),d=u[0].target;if(document.documentElement.contains(d)){var h=d.getBoundingClientRect(),v=h.width,b=h.height,x=Math.floor(v),M=Math.floor(b);(r!==x||n!==M)&&Promise.resolve().then(function(){t({width:x,height:M})}),r=x,n=M}}var i=new pnt(o);return e&&i.observe(e),function(){i.disconnect()}}function hnt(e){return typeof e!="function"?null:e()}function mnt(e){return Do(e)!=="object"||!e?null:e}var vLr=function(t,r){var n=t.children,o=t.disabled,i=t.target,a=t.align,u=t.onAlign,d=t.monitorWindowResize,h=t.monitorBufferTime,v=h===void 0?0:h,b=zl.default.useRef({}),x=zl.default.useRef(),M=zl.default.Children.only(n),O=zl.default.useRef({});O.current.disabled=o,O.current.target=i,O.current.align=a,O.current.onAlign=u;var D=ont(function(){var we=O.current,Se=we.disabled,ge=we.target,Re=we.align,Je=we.onAlign,tt=x.current;if(!Se&&ge&&tt){var Et,Xe=hnt(ge),Pt=mnt(ge);b.current.element=Xe,b.current.point=Pt,b.current.align=Re;var Lt=document,Gt=Lt.activeElement;return Xe&&nnt(Xe)?Et=VF(tt,Xe,Re):Pt&&(Et=tnt(tt,Pt,Re)),dnt(Gt,tt),Je&&Et&&Je(tt,Et),!0}return!1},v),k=jo(D,2),R=k[0],q=k[1],B=zl.default.useState(),G=jo(B,2),re=G[0],Q=G[1],ie=zl.default.useState(),me=jo(ie,2),ve=me[0],ye=me[1];return U4(function(){Q(hnt(i)),ye(mnt(i))}),zl.default.useEffect(function(){(b.current.element!==re||!fnt(b.current.point,ve)||!rnt(b.current.align,a))&&R()}),zl.default.useEffect(function(){var we=Nse(x.current,R);return we},[x.current]),zl.default.useEffect(function(){var we=Nse(re,R);return we},[re]),zl.default.useEffect(function(){o?q():R()},[o]),zl.default.useEffect(function(){if(d){var we=Gu(window,"resize",R);return we.remove}},[d]),zl.default.useEffect(function(){return function(){q()}},[]),zl.default.useImperativeHandle(r,function(){return{forceAlign:function(){return R(!0)}}}),zl.default.isValidElement(M)&&(M=zl.default.cloneElement(M,{ref:o2(M.ref,x)})),M},gnt=zl.default.forwardRef(vLr);gnt.displayName="Align";var vnt=gnt;var ynt=vnt;var Snt=Z(ko());function $F(){"use strict";$F=function(){return t};var e,t={},r=Object.prototype,n=r.hasOwnProperty,o=typeof Symbol=="function"?Symbol:{},i=o.iterator||"@@iterator",a=o.asyncIterator||"@@asyncIterator",u=o.toStringTag||"@@toStringTag";function d(ye,we,Se,ge){return Object.defineProperty(ye,we,{value:Se,enumerable:!ge,configurable:!ge,writable:!ge})}try{d({},"")}catch(ye){d=function(Se,ge,Re){return Se[ge]=Re}}function h(ye,we,Se,ge){var Re=we&&we.prototype instanceof x?we:x,Je=Object.create(Re.prototype);return d(Je,"_invoke",function(tt,Et,Xe){var Pt=1;return function(Lt,Gt){if(Pt===3)throw Error("Generator is already running");if(Pt===4){if(Lt==="throw")throw Gt;return{value:e,done:!0}}for(Xe.method=Lt,Xe.arg=Gt;;){var nt=Xe.delegate;if(nt){var ct=re(nt,Xe);if(ct){if(ct===b)continue;return ct}}if(Xe.method==="next")Xe.sent=Xe._sent=Xe.arg;else if(Xe.method==="throw"){if(Pt===1)throw Pt=4,Xe.arg;Xe.dispatchException(Xe.arg)}else Xe.method==="return"&&Xe.abrupt("return",Xe.arg);Pt=3;var _t=v(tt,Et,Xe);if(_t.type==="normal"){if(Pt=Xe.done?4:2,_t.arg===b)continue;return{value:_t.arg,done:Xe.done}}_t.type==="throw"&&(Pt=4,Xe.method="throw",Xe.arg=_t.arg)}}}(ye,Se,new me(ge||[])),!0),Je}function v(ye,we,Se){try{return{type:"normal",arg:ye.call(we,Se)}}catch(ge){return{type:"throw",arg:ge}}}t.wrap=h;var b={};function x(){}function M(){}function O(){}var D={};d(D,i,function(){return this});var k=Object.getPrototypeOf,R=k&&k(k(ve([])));R&&R!==r&&n.call(R,i)&&(D=R);var q=O.prototype=x.prototype=Object.create(D);function B(ye){["next","throw","return"].forEach(function(we){d(ye,we,function(Se){return this._invoke(we,Se)})})}function G(ye,we){function Se(Re,Je,tt,Et){var Xe=v(ye[Re],ye,Je);if(Xe.type!=="throw"){var Pt=Xe.arg,Lt=Pt.value;return Lt&&Do(Lt)=="object"&&n.call(Lt,"__await")?we.resolve(Lt.__await).then(function(Gt){Se("next",Gt,tt,Et)},function(Gt){Se("throw",Gt,tt,Et)}):we.resolve(Lt).then(function(Gt){Pt.value=Gt,tt(Pt)},function(Gt){return Se("throw",Gt,tt,Et)})}Et(Xe.arg)}var ge;d(this,"_invoke",function(Re,Je){function tt(){return new we(function(Et,Xe){Se(Re,Je,Et,Xe)})}return ge=ge?ge.then(tt,tt):tt()},!0)}function re(ye,we){var Se=we.method,ge=ye.i[Se];if(ge===e)return we.delegate=null,Se==="throw"&&ye.i.return&&(we.method="return",we.arg=e,re(ye,we),we.method==="throw")||Se!=="return"&&(we.method="throw",we.arg=new TypeError("The iterator does not provide a '"+Se+"' method")),b;var Re=v(ge,ye.i,we.arg);if(Re.type==="throw")return we.method="throw",we.arg=Re.arg,we.delegate=null,b;var Je=Re.arg;return Je?Je.done?(we[ye.r]=Je.value,we.next=ye.n,we.method!=="return"&&(we.method="next",we.arg=e),we.delegate=null,b):Je:(we.method="throw",we.arg=new TypeError("iterator result is not an object"),we.delegate=null,b)}function Q(ye){this.tryEntries.push(ye)}function ie(ye){var we=ye[4]||{};we.type="normal",we.arg=e,ye[4]=we}function me(ye){this.tryEntries=[[-1]],ye.forEach(Q,this),this.reset(!0)}function ve(ye){if(ye!=null){var we=ye[i];if(we)return we.call(ye);if(typeof ye.next=="function")return ye;if(!isNaN(ye.length)){var Se=-1,ge=function Re(){for(;++Se<ye.length;)if(n.call(ye,Se))return Re.value=ye[Se],Re.done=!1,Re;return Re.value=e,Re.done=!0,Re};return ge.next=ge}}throw new TypeError(Do(ye)+" is not iterable")}return M.prototype=O,d(q,"constructor",O),d(O,"constructor",M),M.displayName=d(O,u,"GeneratorFunction"),t.isGeneratorFunction=function(ye){var we=typeof ye=="function"&&ye.constructor;return!!we&&(we===M||(we.displayName||we.name)==="GeneratorFunction")},t.mark=function(ye){return Object.setPrototypeOf?Object.setPrototypeOf(ye,O):(ye.__proto__=O,d(ye,u,"GeneratorFunction")),ye.prototype=Object.create(q),ye},t.awrap=function(ye){return{__await:ye}},B(G.prototype),d(G.prototype,a,function(){return this}),t.AsyncIterator=G,t.async=function(ye,we,Se,ge,Re){Re===void 0&&(Re=Promise);var Je=new G(h(ye,we,Se,ge),Re);return t.isGeneratorFunction(we)?Je:Je.next().then(function(tt){return tt.done?tt.value:Je.next()})},B(q),d(q,u,"Generator"),d(q,i,function(){return this}),d(q,"toString",function(){return"[object Generator]"}),t.keys=function(ye){var we=Object(ye),Se=[];for(var ge in we)Se.unshift(ge);return function Re(){for(;Se.length;)if((ge=Se.pop())in we)return Re.value=ge,Re.done=!1,Re;return Re.done=!0,Re}},t.values=ve,me.prototype={constructor:me,reset:function(we){if(this.prev=this.next=0,this.sent=this._sent=e,this.done=!1,this.delegate=null,this.method="next",this.arg=e,this.tryEntries.forEach(ie),!we)for(var Se in this)Se.charAt(0)==="t"&&n.call(this,Se)&&!isNaN(+Se.slice(1))&&(this[Se]=e)},stop:function(){this.done=!0;var we=this.tryEntries[0][4];if(we.type==="throw")throw we.arg;return this.rval},dispatchException:function(we){if(this.done)throw we;var Se=this;function ge(Lt){tt.type="throw",tt.arg=we,Se.next=Lt}for(var Re=Se.tryEntries.length-1;Re>=0;--Re){var Je=this.tryEntries[Re],tt=Je[4],Et=this.prev,Xe=Je[1],Pt=Je[2];if(Je[0]===-1)return ge("end"),!1;if(!Xe&&!Pt)throw Error("try statement without catch or finally");if(Je[0]!=null&&Je[0]<=Et){if(Et<Xe)return this.method="next",this.arg=e,ge(Xe),!0;if(Et<Pt)return ge(Pt),!1}}},abrupt:function(we,Se){for(var ge=this.tryEntries.length-1;ge>=0;--ge){var Re=this.tryEntries[ge];if(Re[0]>-1&&Re[0]<=this.prev&&this.prev<Re[2]){var Je=Re;break}}Je&&(we==="break"||we==="continue")&&Je[0]<=Se&&Se<=Je[2]&&(Je=null);var tt=Je?Je[4]:{};return tt.type=we,tt.arg=Se,Je?(this.method="next",this.next=Je[2],b):this.complete(tt)},complete:function(we,Se){if(we.type==="throw")throw we.arg;return we.type==="break"||we.type==="continue"?this.next=we.arg:we.type==="return"?(this.rval=this.arg=we.arg,this.method="return",this.next="end"):we.type==="normal"&&Se&&(this.next=Se),b},finish:function(we){for(var Se=this.tryEntries.length-1;Se>=0;--Se){var ge=this.tryEntries[Se];if(ge[2]===we)return this.complete(ge[4],ge[3]),ie(ge),b}},catch:function(we){for(var Se=this.tryEntries.length-1;Se>=0;--Se){var ge=this.tryEntries[Se];if(ge[0]===we){var Re=ge[4];if(Re.type==="throw"){var Je=Re.arg;ie(ge)}return Je}}throw Error("illegal catch attempt")},delegateYield:function(we,Se,ge){return this.delegate={i:ve(we),r:Se,n:ge},this.method==="next"&&(this.arg=e),b}},t}function _nt(e,t,r,n,o,i,a){try{var u=e[i](a),d=u.value}catch(h){return void r(h)}u.done?t(d):Promise.resolve(d).then(n,o)}function bnt(e){return function(){var t=this,r=arguments;return new Promise(function(n,o){var i=e.apply(t,r);function a(d){_nt(i,n,o,a,u,"next",d)}function u(d){_nt(i,n,o,a,u,"throw",d)}a(void 0)})}}var c2=Z(Pe());var xnt=["measure","alignPre","align",null,"motion"],wnt=function(e,t){var r=jg(null),n=jo(r,2),o=n[0],i=n[1],a=(0,c2.useRef)();function u(v){i(v,!0)}function d(){Lc.cancel(a.current)}function h(v){d(),a.current=Lc(function(){u(function(b){switch(o){case"align":return"motion";case"motion":return"stable";default:}return b}),v==null||v()})}return(0,c2.useEffect)(function(){u("measure")},[e]),(0,c2.useEffect)(function(){switch(o){case"measure":t();break;default:}o&&(a.current=Lc(bnt($F().mark(function v(){var b,x;return $F().wrap(function(O){for(;;)switch(O.prev=O.next){case 0:b=xnt.indexOf(o),x=xnt[b+1],x&&b!==-1&&u(x);case 3:case"end":return O.stop()}},v)}))))},[o]),(0,c2.useEffect)(function(){return function(){d()}},[]),[o,h]};var ZF=Z(Pe()),Ent=function(e){var t=ZF.useState({width:0,height:0}),r=jo(t,2),n=r[0],o=r[1];function i(u){var d=u.offsetWidth,h=u.offsetHeight,v=u.getBoundingClientRect(),b=v.width,x=v.height;Math.abs(d-b)<1&&Math.abs(h-x)<1&&(d=b,h=x),o({width:d,height:h})}var a=ZF.useMemo(function(){var u={};if(e){var d=n.width,h=n.height;e.indexOf("height")!==-1&&h?u.height=h:e.indexOf("minHeight")!==-1&&h&&(u.minHeight=h),e.indexOf("width")!==-1&&d?u.width=d:e.indexOf("minWidth")!==-1&&d&&(u.minWidth=d)}return u},[e,n]);return[a,i]};var Tnt=dp.forwardRef(function(e,t){var r=e.visible,n=e.prefixCls,o=e.className,i=e.style,a=e.children,u=e.zIndex,d=e.stretch,h=e.destroyPopupOnHide,v=e.forceRender,b=e.align,x=e.point,M=e.getRootDomNode,O=e.getClassNameFromAlign,D=e.onAlign,k=e.onMouseEnter,R=e.onMouseLeave,q=e.onMouseDown,B=e.onTouchStart,G=e.onClick,re=(0,ab.useRef)(),Q=(0,ab.useRef)(),ie=(0,ab.useState)(),me=jo(ie,2),ve=me[0],ye=me[1],we=Ent(d),Se=jo(we,2),ge=Se[0],Re=Se[1];function Je(){d&&Re(M())}var tt=wnt(r,Je),Et=jo(tt,2),Xe=Et[0],Pt=Et[1],Lt=(0,ab.useState)(0),Gt=jo(Lt,2),nt=Gt[0],ct=Gt[1],_t=(0,ab.useRef)();U4(function(){Xe==="alignPre"&&ct(0)},[Xe]);function We(){return x||M}function De(){var Ot;(Ot=re.current)===null||Ot===void 0||Ot.forceAlign()}function Qe(Ot,sr){var Ft=O(sr);ve!==Ft&&ye(Ft),ct(function(Jt){return Jt+1}),Xe==="align"&&(D==null||D(Ot,sr))}U4(function(){Xe==="align"&&(nt<3?De():Pt(function(){var Ot;(Ot=_t.current)===null||Ot===void 0||Ot.call(_t)}))},[nt]);var Ge=er({},RF(e));["onAppearEnd","onEnterEnd","onLeaveEnd"].forEach(function(Ot){var sr=Ge[Ot];Ge[Ot]=function(Ft,Jt){return Pt(),sr==null?void 0:sr(Ft,Jt)}});function st(){return new Promise(function(Ot){_t.current=Ot})}dp.useEffect(function(){!Ge.motionName&&Xe==="motion"&&Pt()},[Ge.motionName,Xe]),dp.useImperativeHandle(t,function(){return{forceAlign:De,getElement:function(){return Q.current}}});var pt=er(er({},ge),{},{zIndex:u,opacity:Xe==="motion"||Xe==="stable"||!r?void 0:0,pointerEvents:!r&&Xe!=="stable"?"none":void 0},i),Rt=!0;b!=null&&b.points&&(Xe==="align"||Xe==="stable")&&(Rt=!1);var St=a;return dp.Children.count(a)>1&&(St=dp.createElement("div",{className:"".concat(n,"-content")},a)),dp.createElement(s2,vo({visible:r,ref:Q,leavedClassName:"".concat(n,"-hidden")},Ge,{onAppearPrepare:st,onEnterPrepare:st,removeOnLeave:h,forceRender:v}),function(Ot,sr){var Ft=Ot.className,Jt=Ot.style,dr=(0,Snt.default)(n,o,ve,Ft);return dp.createElement(ynt,{target:We(),key:"popup",ref:re,monitorWindowResize:!0,disabled:Rt,align:b,onAlign:Qe},dp.createElement("div",{ref:sr,className:dr,onMouseEnter:k,onMouseLeave:R,onMouseDownCapture:q,onTouchStartCapture:B,onClick:G,style:er(er({},Jt),pt)},St))})});Tnt.displayName="PopupInner";var Int=Tnt;var gf=Z(Pe());var Mnt=Z(ko()),Cnt=gf.forwardRef(function(e,t){var r=e.prefixCls,n=e.visible,o=e.zIndex,i=e.children,a=e.mobile;a=a===void 0?{}:a;var u=a.popupClassName,d=a.popupStyle,h=a.popupMotion,v=h===void 0?{}:h,b=a.popupRender,x=e.onClick,M=gf.useRef();gf.useImperativeHandle(t,function(){return{forceAlign:function(){},getElement:function(){return M.current}}});var O=er({zIndex:o},d),D=i;return gf.Children.count(i)>1&&(D=gf.createElement("div",{className:"".concat(r,"-content")},i)),b&&(D=b(D)),gf.createElement(s2,vo({visible:n,ref:M,removeOnLeave:!0},v),function(k,R){var q=k.className,B=k.style,G=(0,Mnt.default)(r,u,q);return gf.createElement("div",{ref:R,className:G,onClick:x,style:er(er({},B),O)},D)})});Cnt.displayName="MobilePopupInner";var Ant=Cnt;var yLr=["visible","mobile"],Ont=sb.forwardRef(function(e,t){var r=e.visible,n=e.mobile,o=Vu(e,yLr),i=(0,Y4.useState)(r),a=jo(i,2),u=a[0],d=a[1],h=(0,Y4.useState)(!1),v=jo(h,2),b=v[0],x=v[1],M=er(er({},o),{},{visible:u});(0,Y4.useEffect)(function(){d(r),r&&n&&x(frt())},[r,n]);var O=b?sb.createElement(Ant,vo({},M,{mobile:n,ref:t})):sb.createElement(Int,vo({},M,{ref:t}));return sb.createElement("div",null,sb.createElement(vse,M),O)});Ont.displayName="Popup";var Pnt=Ont;var Nnt=Z(Pe()),_Lr=Nnt.createContext(null),Dse=_Lr;function Lse(){}function bLr(){return""}function xLr(e){return e?e.ownerDocument:window.document}var wLr=["onClick","onMouseDown","onTouchStart","onMouseEnter","onMouseLeave","onFocus","onBlur","onContextMenu"];function ELr(e){var t=function(r){pu(o,r);var n=fu(o);function o(i){var a;uu(this,o),a=n.call(this,i),Wt(kn(a),"popupRef",hp.createRef()),Wt(kn(a),"triggerRef",hp.createRef()),Wt(kn(a),"portalContainer",void 0),Wt(kn(a),"attachId",void 0),Wt(kn(a),"clickOutsideHandler",void 0),Wt(kn(a),"touchOutsideHandler",void 0),Wt(kn(a),"contextMenuOutsideHandler1",void 0),Wt(kn(a),"contextMenuOutsideHandler2",void 0),Wt(kn(a),"mouseDownTimeout",void 0),Wt(kn(a),"focusTime",void 0),Wt(kn(a),"preClickTime",void 0),Wt(kn(a),"preTouchTime",void 0),Wt(kn(a),"delayTimer",void 0),Wt(kn(a),"hasPopupMouseDown",void 0),Wt(kn(a),"onMouseEnter",function(d){var h=a.props.mouseEnterDelay;a.fireEvents("onMouseEnter",d),a.delaySetPopupVisible(!0,h,h?null:d)}),Wt(kn(a),"onMouseMove",function(d){a.fireEvents("onMouseMove",d),a.setPoint(d)}),Wt(kn(a),"onMouseLeave",function(d){a.fireEvents("onMouseLeave",d),a.delaySetPopupVisible(!1,a.props.mouseLeaveDelay)}),Wt(kn(a),"onPopupMouseEnter",function(){a.clearDelayTimer()}),Wt(kn(a),"onPopupMouseLeave",function(d){var h;d.relatedTarget&&!d.relatedTarget.setTimeout&&nb((h=a.popupRef.current)===null||h===void 0?void 0:h.getElement(),d.relatedTarget)||a.delaySetPopupVisible(!1,a.props.mouseLeaveDelay)}),Wt(kn(a),"onFocus",function(d){a.fireEvents("onFocus",d),a.clearDelayTimer(),a.isFocusToShow()&&(a.focusTime=Date.now(),a.delaySetPopupVisible(!0,a.props.focusDelay))}),Wt(kn(a),"onMouseDown",function(d){a.fireEvents("onMouseDown",d),a.preClickTime=Date.now()}),Wt(kn(a),"onTouchStart",function(d){a.fireEvents("onTouchStart",d),a.preTouchTime=Date.now()}),Wt(kn(a),"onBlur",function(d){a.fireEvents("onBlur",d),a.clearDelayTimer(),a.isBlurToHide()&&a.delaySetPopupVisible(!1,a.props.blurDelay)}),Wt(kn(a),"onContextMenu",function(d){d.preventDefault(),a.fireEvents("onContextMenu",d),a.setPopupVisible(!0,d)}),Wt(kn(a),"onContextMenuClose",function(){a.isContextMenuToShow()&&a.close()}),Wt(kn(a),"onClick",function(d){if(a.fireEvents("onClick",d),a.focusTime){var h;if(a.preClickTime&&a.preTouchTime?h=Math.min(a.preClickTime,a.preTouchTime):a.preClickTime?h=a.preClickTime:a.preTouchTime&&(h=a.preTouchTime),Math.abs(h-a.focusTime)<20)return;a.focusTime=0}a.preClickTime=0,a.preTouchTime=0,a.isClickToShow()&&(a.isClickToHide()||a.isBlurToHide())&&d&&d.preventDefault&&d.preventDefault();var v=!a.state.popupVisible;(a.isClickToHide()&&!v||v&&a.isClickToShow())&&a.setPopupVisible(!a.state.popupVisible,d)}),Wt(kn(a),"onPopupMouseDown",function(){if(a.hasPopupMouseDown=!0,clearTimeout(a.mouseDownTimeout),a.mouseDownTimeout=window.setTimeout(function(){a.hasPopupMouseDown=!1},0),a.context){var d;(d=a.context).onPopupMouseDown.apply(d,arguments)}}),Wt(kn(a),"onDocumentClick",function(d){if(!(a.props.mask&&!a.props.maskClosable)){var h=d.target,v=a.getRootDomNode(),b=a.getPopupDomNode();(!nb(v,h)||a.isContextMenuOnly())&&!nb(b,h)&&!a.hasPopupMouseDown&&a.close()}}),Wt(kn(a),"getRootDomNode",function(){var d=a.props.getTriggerDOMNode;if(d)return d(a.triggerRef.current);try{var h=q4(a.triggerRef.current);if(h)return h}catch(v){}return Dnt.default.findDOMNode(kn(a))}),Wt(kn(a),"getPopupClassNameFromAlign",function(d){var h=[],v=a.props,b=v.popupPlacement,x=v.builtinPlacements,M=v.prefixCls,O=v.alignPoint,D=v.getPopupClassNameFromAlign;return b&&x&&h.push(crt(x,M,d,O)),D&&h.push(D(d)),h.join(" ")}),Wt(kn(a),"getComponent",function(){var d=a.props,h=d.prefixCls,v=d.destroyPopupOnHide,b=d.popupClassName,x=d.onPopupAlign,M=d.popupMotion,O=d.popupAnimation,D=d.popupTransitionName,k=d.popupStyle,R=d.mask,q=d.maskAnimation,B=d.maskTransitionName,G=d.maskMotion,re=d.zIndex,Q=d.popup,ie=d.stretch,me=d.alignPoint,ve=d.mobile,ye=d.forceRender,we=d.onPopupClick,Se=a.state,ge=Se.popupVisible,Re=Se.point,Je=a.getPopupAlign(),tt={};return a.isMouseEnterToShow()&&(tt.onMouseEnter=a.onPopupMouseEnter),a.isMouseLeaveToHide()&&(tt.onMouseLeave=a.onPopupMouseLeave),tt.onMouseDown=a.onPopupMouseDown,tt.onTouchStart=a.onPopupMouseDown,hp.createElement(Pnt,vo({prefixCls:h,destroyPopupOnHide:v,visible:ge,point:me&&Re,className:b,align:Je,onAlign:x,animation:O,getClassNameFromAlign:a.getPopupClassNameFromAlign},tt,{stretch:ie,getRootDomNode:a.getRootDomNode,style:k,mask:R,zIndex:re,transitionName:D,maskAnimation:q,maskTransitionName:B,maskMotion:G,ref:a.popupRef,motion:M,mobile:ve,forceRender:ye,onClick:we}),typeof Q=="function"?Q():Q)}),Wt(kn(a),"attachParent",function(d){Lc.cancel(a.attachId);var h=a.props,v=h.getPopupContainer,b=h.getDocument,x=a.getRootDomNode(),M;v?(x||v.length===0)&&(M=v(x)):M=b(a.getRootDomNode()).body,M?M.appendChild(d):a.attachId=Lc(function(){a.attachParent(d)})}),Wt(kn(a),"getContainer",function(){if(!a.portalContainer){var d=a.props.getDocument,h=d(a.getRootDomNode()).createElement("div");h.style.position="absolute",h.style.top="0",h.style.left="0",h.style.width="100%",a.portalContainer=h}return a.attachParent(a.portalContainer),a.portalContainer}),Wt(kn(a),"setPoint",function(d){var h=a.props.alignPoint;!h||!d||a.setState({point:{pageX:d.pageX,pageY:d.pageY}})}),Wt(kn(a),"handlePortalUpdate",function(){a.state.prevPopupVisible!==a.state.popupVisible&&a.props.afterPopupVisibleChange(a.state.popupVisible)}),Wt(kn(a),"triggerContextValue",{onPopupMouseDown:a.onPopupMouseDown});var u;return"popupVisible"in i?u=!!i.popupVisible:u=!!i.defaultPopupVisible,a.state={prevPopupVisible:u,popupVisible:u},wLr.forEach(function(d){a["fire".concat(d)]=function(h){a.fireEvents(d,h)}}),a}return cu(o,[{key:"componentDidMount",value:function(){this.componentDidUpdate()}},{key:"componentDidUpdate",value:function(){var a=this.props,u=this.state;if(u.popupVisible){var d;!this.clickOutsideHandler&&(this.isClickToHide()||this.isContextMenuToShow())&&(d=a.getDocument(this.getRootDomNode()),this.clickOutsideHandler=Gu(d,"mousedown",this.onDocumentClick)),this.touchOutsideHandler||(d=d||a.getDocument(this.getRootDomNode()),this.touchOutsideHandler=Gu(d,"touchstart",this.onDocumentClick)),!this.contextMenuOutsideHandler1&&this.isContextMenuToShow()&&(d=d||a.getDocument(this.getRootDomNode()),this.contextMenuOutsideHandler1=Gu(d,"scroll",this.onContextMenuClose)),!this.contextMenuOutsideHandler2&&this.isContextMenuToShow()&&(this.contextMenuOutsideHandler2=Gu(window,"blur",this.onContextMenuClose));return}this.clearOutsideHandler()}},{key:"componentWillUnmount",value:function(){this.clearDelayTimer(),this.clearOutsideHandler(),clearTimeout(this.mouseDownTimeout),Lc.cancel(this.attachId)}},{key:"getPopupDomNode",value:function(){var a;return((a=this.popupRef.current)===null||a===void 0?void 0:a.getElement())||null}},{key:"getPopupAlign",value:function(){var a=this.props,u=a.popupPlacement,d=a.popupAlign,h=a.builtinPlacements;return u&&h?urt(h,u,d):d}},{key:"setPopupVisible",value:function(a,u){var d=this.props.alignPoint,h=this.state.popupVisible;this.clearDelayTimer(),h!==a&&("popupVisible"in this.props||this.setState({popupVisible:a,prevPopupVisible:h}),this.props.onPopupVisibleChange(a)),d&&u&&a&&this.setPoint(u)}},{key:"delaySetPopupVisible",value:function(a,u,d){var h=this,v=u*1e3;if(this.clearDelayTimer(),v){var b=d?{pageX:d.pageX,pageY:d.pageY}:null;this.delayTimer=window.setTimeout(function(){h.setPopupVisible(a,b),h.clearDelayTimer()},v)}else this.setPopupVisible(a,d)}},{key:"clearDelayTimer",value:function(){this.delayTimer&&(clearTimeout(this.delayTimer),this.delayTimer=null)}},{key:"clearOutsideHandler",value:function(){this.clickOutsideHandler&&(this.clickOutsideHandler.remove(),this.clickOutsideHandler=null),this.contextMenuOutsideHandler1&&(this.contextMenuOutsideHandler1.remove(),this.contextMenuOutsideHandler1=null),this.contextMenuOutsideHandler2&&(this.contextMenuOutsideHandler2.remove(),this.contextMenuOutsideHandler2=null),this.touchOutsideHandler&&(this.touchOutsideHandler.remove(),this.touchOutsideHandler=null)}},{key:"createTwoChains",value:function(a){var u=this.props.children.props,d=this.props;return u[a]&&d[a]?this["fire".concat(a)]:u[a]||d[a]}},{key:"isClickToShow",value:function(){var a=this.props,u=a.action,d=a.showAction;return u.indexOf("click")!==-1||d.indexOf("click")!==-1}},{key:"isContextMenuOnly",value:function(){var a=this.props.action;return a==="contextMenu"||a.length===1&&a[0]==="contextMenu"}},{key:"isContextMenuToShow",value:function(){var a=this.props,u=a.action,d=a.showAction;return u.indexOf("contextMenu")!==-1||d.indexOf("contextMenu")!==-1}},{key:"isClickToHide",value:function(){var a=this.props,u=a.action,d=a.hideAction;return u.indexOf("click")!==-1||d.indexOf("click")!==-1}},{key:"isMouseEnterToShow",value:function(){var a=this.props,u=a.action,d=a.showAction;return u.indexOf("hover")!==-1||d.indexOf("mouseEnter")!==-1}},{key:"isMouseLeaveToHide",value:function(){var a=this.props,u=a.action,d=a.hideAction;return u.indexOf("hover")!==-1||d.indexOf("mouseLeave")!==-1}},{key:"isFocusToShow",value:function(){var a=this.props,u=a.action,d=a.showAction;return u.indexOf("focus")!==-1||d.indexOf("focus")!==-1}},{key:"isBlurToHide",value:function(){var a=this.props,u=a.action,d=a.hideAction;return u.indexOf("focus")!==-1||d.indexOf("blur")!==-1}},{key:"forcePopupAlign",value:function(){if(this.state.popupVisible){var a;(a=this.popupRef.current)===null||a===void 0||a.forceAlign()}}},{key:"fireEvents",value:function(a,u){var d=this.props.children.props[a];d&&d(u);var h=this.props[a];h&&h(u)}},{key:"close",value:function(){this.setPopupVisible(!1)}},{key:"render",value:function(){var a=this.state.popupVisible,u=this.props,d=u.children,h=u.forceRender,v=u.alignPoint,b=u.className,x=u.autoDestroy,M=hp.Children.only(d),O={key:"trigger"};this.isContextMenuToShow()?O.onContextMenu=this.onContextMenu:O.onContextMenu=this.createTwoChains("onContextMenu"),this.isClickToHide()||this.isClickToShow()?(O.onClick=this.onClick,O.onMouseDown=this.onMouseDown,O.onTouchStart=this.onTouchStart):(O.onClick=this.createTwoChains("onClick"),O.onMouseDown=this.createTwoChains("onMouseDown"),O.onTouchStart=this.createTwoChains("onTouchStart")),this.isMouseEnterToShow()?(O.onMouseEnter=this.onMouseEnter,v&&(O.onMouseMove=this.onMouseMove)):O.onMouseEnter=this.createTwoChains("onMouseEnter"),this.isMouseLeaveToHide()?O.onMouseLeave=this.onMouseLeave:O.onMouseLeave=this.createTwoChains("onMouseLeave"),this.isFocusToShow()||this.isBlurToHide()?(O.onFocus=this.onFocus,O.onBlur=this.onBlur):(O.onFocus=this.createTwoChains("onFocus"),O.onBlur=this.createTwoChains("onBlur"));var D=(0,Lnt.default)(M&&M.props&&M.props.className,b);D&&(O.className=D);var k=er({},O);F4(M)&&(k.ref=o2(this.triggerRef,M.ref));var R=hp.cloneElement(M,k),q;return(a||this.popupRef.current||h)&&(q=hp.createElement(e,{key:"portal",getContainer:this.getContainer,didUpdate:this.handlePortalUpdate},this.getComponent())),!a&&x&&(q=null),hp.createElement(Dse.Provider,{value:this.triggerContextValue},R,q)}}],[{key:"getDerivedStateFromProps",value:function(a,u){var d=a.popupVisible,h={};return d!==void 0&&u.popupVisible!==d&&(h.popupVisible=d,h.prevPopupVisible=u.popupVisible),h}}]),o}(hp.Component);return Wt(t,"contextType",Dse),Wt(t,"defaultProps",{prefixCls:"rc-trigger-popup",getPopupClassNameFromAlign:bLr,getDocument:xLr,onPopupVisibleChange:Lse,afterPopupVisibleChange:Lse,onPopupAlign:Lse,popupClassName:"",mouseEnterDelay:0,mouseLeaveDelay:.1,focusDelay:0,blurDelay:.15,popupStyle:{},destroyPopupOnHide:!1,popupAlign:{},defaultPopupVisible:!1,mask:!1,maskClosable:!0,action:[],showAction:[],hideAction:[],autoDestroy:!1}),t}var knt=ELr(lrt);var vf={adjustX:1,adjustY:1},yf=[0,0],Rnt={left:{points:["cr","cl"],overflow:vf,offset:[-4,0],targetOffset:yf},right:{points:["cl","cr"],overflow:vf,offset:[4,0],targetOffset:yf},top:{points:["bc","tc"],overflow:vf,offset:[0,-4],targetOffset:yf},bottom:{points:["tc","bc"],overflow:vf,offset:[0,4],targetOffset:yf},topLeft:{points:["bl","tl"],overflow:vf,offset:[0,-4],targetOffset:yf},leftTop:{points:["tr","tl"],overflow:vf,offset:[-4,0],targetOffset:yf},topRight:{points:["br","tr"],overflow:vf,offset:[0,-4],targetOffset:yf},rightTop:{points:["tl","tr"],overflow:vf,offset:[4,0],targetOffset:yf},bottomRight:{points:["tr","br"],overflow:vf,offset:[0,4],targetOffset:yf},rightBottom:{points:["bl","br"],overflow:vf,offset:[4,0],targetOffset:yf},bottomLeft:{points:["tl","bl"],overflow:vf,offset:[0,4],targetOffset:yf},leftBottom:{points:["br","bl"],overflow:vf,offset:[-4,0],targetOffset:yf}};var YF=Z(Pe()),jnt=Z(ko());function KF(e){var t=e.showArrow,r=e.arrowContent,n=e.children,o=e.prefixCls,i=e.id,a=e.overlayInnerStyle,u=e.className,d=e.style;return YF.createElement("div",{className:(0,jnt.default)("".concat(o,"-content"),u),style:d},t!==!1&&YF.createElement("div",{className:"".concat(o,"-arrow"),key:"arrow"},r),YF.createElement("div",{className:"".concat(o,"-inner"),id:i,role:"tooltip",style:a},typeof n=="function"?n():n))}var SLr=["overlayClassName","trigger","mouseEnterDelay","mouseLeaveDelay","overlayStyle","prefixCls","children","onVisibleChange","afterVisibleChange","transitionName","animation","motion","placement","align","destroyTooltipOnHide","defaultVisible","getTooltipContainer","overlayInnerStyle","arrowContent","overlay","id","showArrow"],TLr=function(t,r){var n=t.overlayClassName,o=t.trigger,i=o===void 0?["hover"]:o,a=t.mouseEnterDelay,u=a===void 0?0:a,d=t.mouseLeaveDelay,h=d===void 0?.1:d,v=t.overlayStyle,b=t.prefixCls,x=b===void 0?"rc-tooltip":b,M=t.children,O=t.onVisibleChange,D=t.afterVisibleChange,k=t.transitionName,R=t.animation,q=t.motion,B=t.placement,G=B===void 0?"right":B,re=t.align,Q=re===void 0?{}:re,ie=t.destroyTooltipOnHide,me=ie===void 0?!1:ie,ve=t.defaultVisible,ye=t.getTooltipContainer,we=t.overlayInnerStyle,Se=t.arrowContent,ge=t.overlay,Re=t.id,Je=t.showArrow,tt=Je===void 0?!0:Je,Et=Vu(t,SLr),Xe=(0,p2.useRef)(null);(0,p2.useImperativeHandle)(r,function(){return Xe.current});var Pt=er({},Et);"visible"in t&&(Pt.popupVisible=t.visible);var Lt=function(){return kse.createElement(KF,{showArrow:tt,arrowContent:Se,key:"content",prefixCls:x,id:Re,overlayInnerStyle:we},ge)},Gt=!1,nt=!1;if(typeof me=="boolean")Gt=me;else if(me&&Do(me)==="object"){var ct=me.keepParent;Gt=ct===!0,nt=ct===!1}return kse.createElement(knt,vo({popupClassName:n,prefixCls:x,popup:Lt,action:i,builtinPlacements:Rnt,popupPlacement:G,ref:Xe,popupAlign:Q,getPopupContainer:ye,onPopupVisibleChange:O,afterPopupVisibleChange:D,popupTransitionName:k,popupAnimation:R,popupMotion:q,defaultPopupVisible:ve,destroyPopupOnHide:Gt,autoDestroy:nt,mouseLeaveDelay:h,popupStyle:v,mouseEnterDelay:u},Pt),M)},qnt=(0,p2.forwardRef)(TLr);var znt=qnt;var ILr=Fg.forwardRef(function(e,t){var r=e.visible,n=e.overlay,o=Fg.useRef(null),i=o2(t,o),a=Fg.useRef(null);function u(){Lc.cancel(a.current)}function d(){a.current=Lc(function(){var h;(h=o.current)===null||h===void 0||h.forcePopupAlign()})}return Fg.useEffect(function(){return r?d():u(),u},[r,n]),Fg.createElement(znt,vo({ref:i},e))}),Rse=ILr;function jse(e){var t;return t=function(r){pu(o,r);var n=fu(o);function o(){var i;return uu(this,o),i=n.apply(this,arguments),i.state={visibles:{}},i.handleTooltipVisibleChange=function(a,u){i.setState(function(d){return{visibles:er(er({},d.visibles),{},Wt({},a,u))}})},i.handleWithTooltip=function(a){var u=a.value,d=a.dragging,h=a.index,v=a.disabled,b=Vu(a,["value","dragging","index","disabled"]),x=i.props,M=x.tipFormatter,O=x.tipProps,D=x.handleStyle,k=x.getTooltipContainer,R=O.prefixCls,q=R===void 0?"rc-slider-tooltip":R,B=O.overlay,G=B===void 0?M(u):B,re=O.placement,Q=re===void 0?"top":re,ie=O.visible,me=ie===void 0?!1:ie,ve=Vu(O,["prefixCls","overlay","placement","visible"]),ye;return Array.isArray(D)?ye=D[h]||D[0]:ye=D,K4.default.createElement(Rse,vo({},ve,{getTooltipContainer:k,prefixCls:q,overlay:G,placement:Q,visible:!v&&(i.state.visibles[h]||d)||me,key:h}),K4.default.createElement(r2,vo({},b,{style:er({},ye),value:u,onMouseEnter:function(){return i.handleTooltipVisibleChange(h,!0)},onMouseLeave:function(){return i.handleTooltipVisibleChange(h,!1)}})))},i}return cu(o,[{key:"render",value:function(){return K4.default.createElement(e,vo({},this.props,{handle:this.handleWithTooltip}))}}]),o}(K4.default.Component),t.defaultProps={tipFormatter:function(n){return n},handleStyle:[{}],tipProps:{},getTooltipContainer:function(n){return n.parentNode}},t}var XF=$tt;XF.Range=sF;XF.Handle=r2;XF.createSliderWithTooltip=jse;var QF=XF;var d2=Z(xt(),1),ra=Z(Pe(),1);var Dd=Z(xt(),1),mp=Z(Pe(),1);function MLr(e,t){function r(n){return n>="0"&&n<="9"}return e.split("").some(n=>!r(n)&&n!==t)}var Fnt=(0,mp.forwardRef)(function({className:t,value:r,onBlur:n=()=>{},onKeyDown:o=()=>{},onChange:i=()=>{},readOnly:a,tabIndex:u,placeholder:d,name:h},v){let[b,x]=(0,mp.useState)(r),[M,O]=(0,mp.useState)(r);M!==r&&(O(r),x(r));let D=(0,mp.useMemo)(()=>vr.getSettings().LANGUAGE_CODE===jy.DE?".":"/",[]),k=(0,mp.useCallback)(q=>{let B=`${q.target.value}`;MLr(B,D)||B.length>10||(x(q.target.value),i(q.target.value))},[D]),R=(0,mp.useCallback)(q=>{n(q,b)},[b,n]);return mp.default.createElement("div",{className:"date-input-root"},mp.default.createElement("input",{className:Dt(a&&"readonly",t),ref:v,value:b,onBlur:R,onKeyDown:o,onChange:k,readOnly:a!=null?a:void 0,tabIndex:u!=null?u:void 0,placeholder:d!=null?d:void 0,name:h!=null?h:void 0}))});Fnt.propTypes={value:Dd.default.string.isRequired,className:Dd.default.string,onBlur:Dd.default.func,onKeyDown:Dd.default.func,onChange:Dd.default.func,readOnly:Dd.default.bool,tabIndex:Dd.default.number,placeholder:Dd.default.string,defaultValue:Dd.default.string,name:Dd.default.string};var Unt=Fnt;var f2=Unt;var Bnt=({values:e,min:t,max:r,onChange:n})=>{let[o,i]=(0,ra.useState)(e),[a,u]=(0,ra.useState)(!1),[d,h]=(0,ra.useState)(0),[v,b]=(0,ra.useState)(1),x=(0,ra.useRef)(),M=(0,ra.useRef)(),O=(0,ra.useRef)(),{start:D,end:k}=(0,ra.useMemo)(()=>({start:Tl(o[0]*1e3),end:Tl(o[1]*1e3)}),[o]),R=(0,ra.useCallback)((re,Q)=>{let ie=Tc(Q).valueOf()/1e3,me=o[1];if(re.relatedTarget!==M.current&&re.relatedTarget!==O.current&&u(!1),!Nh(ie)||ie>me||ie<t){n([o[0],o[1]]),h(Date.now());return}n([ie,me])},[o]),q=(0,ra.useCallback)((re,Q)=>{let ie=o[0],me=Tc(Q).valueOf()/1e3;if(re.relatedTarget!==x.current&&re.relatedTarget!==O.current&&u(!1),!Nh(me)||ie>me||me>r){n([o[0],o[1]]),b(Date.now());return}n([ie,me])},[o]),B=(0,ra.useCallback)(re=>{re.key==="Enter"&&(re.target===x.current&&M.current.focus(),re.target===M.current&&(re.target.blur(),u(!1)))},[]),G=(0,ra.useCallback)(()=>{a||x.current.focus(),u(re=>!re)},[]);return(0,ra.useEffect)(()=>{i(e)},[e]),ra.default.createElement("div",{className:"timeslider-controls-root"},ra.default.createElement(f2,{ref:x,key:d,value:D,onBlur:R,onKeyDown:B,readOnly:!a,tabIndex:a?void 0:-1}),ra.default.createElement("span",null,"\u2013"),ra.default.createElement(f2,{ref:M,key:v,value:k,onBlur:q,onKeyDown:B,readOnly:!a,tabIndex:a?void 0:-1}),ra.default.createElement("button",{ref:O,className:Dt("edit-button",a&&"edit-state"),onClick:G},ra.default.createElement(Fr,{name:"edit-inverse"})))};Bnt.propTypes={values:d2.default.arrayOf(d2.default.number).isRequired,min:d2.default.number.isRequired,max:d2.default.number.isRequired,onChange:d2.default.func.isRequired};var Vnt=Bnt;var lb=Z(xt(),1),h2=Z(Pe(),1);var Gnt=(0,h2.forwardRef)(function({className:t,posX:r,shouldUseDate:n,value:o},i){let a=(0,h2.useMemo)(()=>Array.isArray(o)?n?`${Tl(o[0]*1e3)} - ${Tl(o[1]*1e3)}`:`${o[0]} - ${o[1]}`:n?Tl(o*1e3):o,[o]);return h2.default.createElement("div",{ref:i,className:t,style:{transform:`translate(${r}px)`}},a)});Gnt.propTypes={className:lb.default.string,posX:lb.default.number.isRequired,shouldUseDate:lb.default.bool.isRequired,value:lb.default.oneOfType([lb.default.array,lb.default.number]).isRequired};var JF=Gnt;var Hnt=(e,t,r,n)=>{let o=e.map(h=>(h-t[0])/(t[1]-t[0])),i=o[0]*n,a=o[1]*n,u=qse(i,r,n),d=qse(a,r,n);return{posMin:u,posMax:d}},Wnt=(e,t,r,n)=>{let a=((e[1]-e[0])/2+e[0]-t[0])/(t[1]-t[0])*n;return qse(a,r,n)},qse=(e,t,r)=>e<t/2?0:e>r-t/2?r-t:e-t/2;var zse=[1e3,1e3],Fse=e=>{let{title:t,values:r,timeRange:n,onChange:o,sliderProps:i,shouldUseDate:a,showControls:u}=e,[d,h]=(0,di.useState)(r),[v,b]=(0,di.useState)(0),[x,M]=(0,di.useState)(0),[O,D]=(0,di.useState)(0),[k,R]=(0,di.useState)({min:0,max:0}),[q,B]=(0,di.useState)(0),[G,re]=(0,di.useState)(!1),Q=(0,di.useRef)(),ie=(0,di.useRef)(),me=(0,di.useRef)(),ve=(0,di.useCallback)(Se=>{let{posMin:ge,posMax:Re}=Hnt(Se,n,v,O);if(Math.abs(ge-Re)<v){re(!0);let tt=Wnt(Se,n,x,O);B(tt);return}re(!1),R({min:ge,max:Re})},[n,v,O]),ye=(0,di.useCallback)(Se=>{ve(Se),h(Se)},[ve]),we=(0,di.useCallback)(Se=>{ye(Se),o(Se)},[ye,o]);return(0,di.useEffect)(()=>{if(Q.current&&ie.current&&me.current){let Se=Q.current.getBoundingClientRect().width,ge=ie.current.getBoundingClientRect().width,Re=me.current.getBoundingClientRect().width;R({min:0,max:Se-ge}),M(Re),D(Se),b(ge)}},[]),(0,di.useEffect)(()=>{h(r),ve(r)},[r,ve]),di.default.createElement("div",{className:"timeslider-container"},di.default.createElement("div",{className:"timeslider-control-container"},di.default.createElement("label",null,t),u&&di.default.createElement(Vnt,{min:n[0],max:n[1],values:d,onChange:we})),di.default.createElement("div",{ref:Q,className:"slider-container"},di.default.createElement(sF,Te({allowCross:!1,ariaLabelledByGroupForHandles:["min-value","max-value"],min:n[0],max:n[1],onChange:ye,onAfterChange:o,value:d},i)),di.default.createElement(JF,{className:Dt("tooltip min-value",G&&"labels-too-close"),posX:k.min,ref:ie,value:G?zse[0]:d[0],shouldUseDate:a}),di.default.createElement(JF,{className:Dt("tooltip max-value",G&&"labels-too-close"),posX:k.max,value:G?zse[1]:d[1],shouldUseDate:a}),di.default.createElement(JF,{className:Dt("tooltip min-max-value",G&&"labels-too-close"),posX:q,ref:me,value:G?d:zse,shouldUseDate:a})))};Fse.defaultProps={timeRange:[1850,1970],shouldUseDate:!1,showControls:!1};Fse.propTypes={title:Jh.default.string.isRequired,values:Jh.default.arrayOf(Jh.default.number),timeRange:Jh.default.arrayOf(Jh.default.number),onChange:Jh.default.func.isRequired,sliderProps:Jh.default.object,shouldUseDate:Jh.default.bool,showControls:Jh.default.bool};var $nt=Fse;var e7=$nt;var Ug=Z(Pe(),1);var Use=Z(Pe(),1);var Znt=()=>{let e=yt(mtt),t=ar(({snapshot:n})=>()=>gt(null,null,function*(){let o=yield n.getPromise(tr),i=yield n.getPromise(l0);Me(o)&&Me(i)&&i.setFilters(o)})),r=ar(({snapshot:n})=>o=>gt(null,null,function*(){let i=yield n.getPromise(tr),a=yield n.getPromise(l0);Me(i)&&Me(a)&&a.setFilters(i,o)}));return(0,Use.useEffect)(()=>{e===null?t():r(e)},[e]),(0,Use.useEffect)(()=>()=>{t()},[]),null};var Ynt=()=>{let e=yt(Zz),t=yt(Lae),r=yt(s0),n=zr(JS);return Ug.default.createElement(Ug.default.Fragment,null,Ug.default.createElement("div",{className:Dt("plain-divider",r===gs.FILTER&&e&&"filtered")},Ug.default.createElement("span",{className:Dt("caret-container",r===gs.FILTER&&e&&"filtered")},Ug.default.createElement(Fr,{name:"caret"}))),Ug.default.createElement("div",{className:Dt("filter-container",r===gs.FILTER&&e&&"in")},r!==gs.EDIT&&e&&Ug.default.createElement(e7,{title:`${fe("geojsonlayerpanel-timefilter-title")}: `,timeRange:t,onChange:o=>n(o),values:t,sliderProps:{step:86400,draggableTrack:!0},shouldUseDate:!0,showControls:!0})),Ug.default.createElement(Znt,null))};var oot=Z(xt(),1);var Bg=Z(Pe(),1);var Knt=(e,t)=>{let r="data:text/json;charset=utf-8,"+encodeURIComponent(t),n=document.createElement("a");n.setAttribute("href",r),n.setAttribute("download",`${e}.json`),n.click()};var CLr=()=>{let e=yt(htt),[t,r]=Mo(s0),n=yt(Zz),o=(0,Bg.useCallback)(()=>{r(a=>a===gs.FILTER?gs.INITIAL:gs.FILTER)},[]),i=ar(({snapshot:a})=>()=>gt(null,null,function*(){let u=yield a.getPromise(C4),d=yield a.getPromise(l0),h={type:"FeatureCollection",features:u},v=Vo.toPersistenceState(h),b=JSON.stringify(v),x=d.getMetadata("title");Knt(x,b)}),[]);return Bg.default.createElement(Bg.default.Fragment,null,Bg.default.createElement(dn,{className:"geojson-headline--button export-button",disabled:!e,onClick:i,title:fe("layermanagement-export-geojson")},Bg.default.createElement(Fr,{name:"export-geojson"})),Bg.default.createElement(dn,{className:"geojson-headline--button filter-button",disabled:t===gs.EDIT||!n,onClick:o,title:fe("layermanagement-filter-geojson-features")},Bg.default.createElement(Fr,{name:"filter"})))},Xnt=CLr;var t7=()=>{let e=ar(({set:r})=>()=>gt(null,null,function*(){r(Xs,structuredClone(Uy)),r(Pl,{}),r(Go,{type:$a.REMOTE,id:null,layerRole:"owner"}),r(Ic,$s.DRAW),r(hs,xi.METADATA)}),[]),t=ar(({snapshot:r,set:n})=>o=>gt(null,null,function*(){var d;let i=yield r.getPromise(tr);if(!Me(i)||!Me(o))throw new Error("Cannot switch to draw mode. Map or layer not defined.");if(o.isExternalVectorMap())throw new Error("Cannot switch to draw mode. External vector maps are not supported.");o.setVisibility(i,"none"),n(Xs,o.getGeoJson()),n(Pl,{[qe.title]:o.getMetadata(qe.title),[qe.description]:o.getMetadata(qe.description),[qe.thumbnailUrl]:o.getMetadata(qe.thumbnailUrl),[qe.timePeriod]:o.getMetadata(qe.timePeriod)});let a=o.getMetadata(qe.vectorMapId),u=o.getMetadata(qe.version);n(Go,{type:a?"remote":"local",id:a!=null?a:null,version:u!=null?u:null,layerRole:(d=o.getMetadata(qe.userRole))!=null?d:null}),n(Ic,$s.DRAW)}),[]);return{createNewVectorMap:e,editVectorMap:t}};var Qnt="unsaved_external_layer",X4=e=>e===Qnt,r7=()=>{let e=ar(({set:r,snapshot:n})=>()=>gt(null,null,function*(){let o=yield n.getPromise(tr);if(!Me(o))throw new Error("Cannot switch to external vector map mode. Map is not defined.");let i=Vo.fromApplication({metadata:{[qe.id]:Qnt},geoJson:structuredClone(Uy)});i.addLayerToMap(o),r(Da,i),r(Ic,$s.VECTOR_MAP_EXTERNAL),r(uf,Ec.METADATA)}),[]),t=ar(({set:r,snapshot:n})=>o=>gt(null,null,function*(){let i=yield n.getPromise(tr);if(!Me(i)||!Me(o))throw new Error("Cannot switch to external vector map mode. Map or layer is not defined.");let a=o.getMetadata(),u=o.getGeoJson(),d=`${a[qe.id]}-temp`,h=Vo.fromApplication({metadata:Mt(Te({},a),{[qe.id]:d}),geoJson:structuredClone(u)});h.addLayerToMap(i),o.setVisibility(i,"none"),r(Da,h),r(uf,Ec.METADATA),r(Ic,$s.VECTOR_MAP_EXTERNAL)}),[]);return{createNewExternalVectorMap:e,editExternalVectorMap:t}};var nl=Z(Pe(),1),n7=Z(xt(),1);var Bse=vr.getSettings().LANGUAGE_CODE===jy.DE?"de-DE":"en-US",Jnt=new Intl.PluralRules(Bse),eot=new Intl.NumberFormat(Bse,{signDisplay:"exceptZero"}),ALr=new Intl.DateTimeFormat(Bse,{hour:"2-digit",minute:"2-digit",hour12:!1,day:"2-digit",month:"2-digit",year:"numeric"});function tot(e,t="de"){let r=ALr.formatToParts(e),n={hour:r.find(o=>o.type==="hour").value,minute:r.find(o=>o.type==="minute").value,day:r.find(o=>o.type==="day").value,month:r.find(o=>o.type==="month").value,year:r.find(o=>o.type==="year").value};return t==="de"?`${n.hour}:${n.minute} Uhr ${n.day}.${n.month}.${n.year}`:`${n.hour}:${n.minute} o'clock ${n.day}.${n.month}.${n.year}`}function p0(e){if(!Me(e))return fe("geojson-featureview-no-time");let[t,r]=e;return!Nh(t)||!Nh(r)?fe("geojson-featureview-invalid-time"):t===r?Tl(t):`${Tl(t)}\u2013${Tl(r)}`}var rot=({data:e,index:t,style:r})=>{let n=e.features[t],{properties:o,geometry:i}=n,a=(0,nl.useCallback)(()=>{e.onFeatureClick(n.id)},[e.onFeatureClick,n.id]),{defaultTitle:u}=(0,nl.useMemo)(()=>({defaultTitle:fe("geojson-featureview-no-title")}),[]),d=(0,nl.useMemo)(()=>{let{type:b}=i;return b===qu.MULTI_LINE_STRING?qu.LINE_STRING:b===qu.MULTI_POLYGON?qu.POLYGON:b===qu.MULTI_POINT?qu.POINT:b===qu.GEOMETRY_COLLECTION?qu.POLYGON:Object.values(qu).includes(b)?b:qu.POLYGON},[i]),h=(0,nl.useMemo)(()=>{let b=o[po.time];return p0(b)},[o[po.time]]),v=(0,nl.useMemo)(()=>{var b;return(b=o[po.title])!=null?b:u},[o[po.title]]);return nl.default.createElement("li",{className:"geojson-feature-item-root",onClick:a,style:r},nl.default.createElement("div",{className:"geojson-feature-item-container"},nl.default.createElement("div",{className:"sub-headline"},nl.default.createElement("div",{className:`type-icon icon--${d}`},nl.default.createElement(Fr,{name:d})),nl.default.createElement("div",{className:"type-text"},d)),nl.default.createElement("div",{className:"title"},v),nl.default.createElement("div",{className:"details"},fe("geojson-featureview-time")," ",h)))};rot.propTypes={data:n7.default.object.isRequired,index:n7.default.number.isRequired,style:n7.default.object};var Vse=(0,nl.memo)(rot);var jc=Z(Pe(),1),o7=Z(xt(),1);var not=({data:e,index:t,style:r})=>{let n=e.features[t],{properties:o}=n,i=(0,jc.useCallback)(()=>{e.onFeatureClick(n.id)},[e.onFeatureClick,n.id]),{defaultTitle:a}=(0,jc.useMemo)(()=>({defaultTitle:fe("geojson-featureview-no-title")}),[]),u=(0,jc.useMemo)(()=>{let v=o[po.time];return p0(v)},[o[po.time]]),{title:d,affiliation:h}=(0,jc.useMemo)(()=>{var v,b;return{title:(v=o[po.title])!=null?v:a,affiliation:(b=o[Il.parentLabel])!=null?b:""}},[o[po.title],o[Il.parentLabel]]);return jc.default.createElement("li",{className:"geojson-feature-item-root",onClick:i,style:r},jc.default.createElement("div",{className:"geojson-feature-item-container"},jc.default.createElement("div",{className:"title"},d),jc.default.createElement("div",{className:"details"},fe("idohist-date-label")," ",u," ",jc.default.createElement("br",null),h!==""&&h)))};not.propTypes={data:o7.default.object.isRequired,index:o7.default.number.isRequired,style:o7.default.object};var Gse=(0,jc.memo)(not);var OLr=e=>Me(e)?e.isExternalVectorMap()?Ctt():Att(e):!1,iot=({selectedLayer:e})=>{let[t,r]=Mo(s0),n=zr(JS),o=zr(l0),i=zr(Ys),a=zr(Zs),{editVectorMap:u}=t7(),{editExternalVectorMap:d}=r7(),h=yt(tr),{title:v,description:b,displayTime:x,layerId:M}=(0,fa.useMemo)(()=>({title:e==null?void 0:e.getMetadata(qe.title),description:e==null?void 0:e.getMetadata(qe.description),displayTime:e==null?void 0:e.getDisplayTime(),layerId:e==null?void 0:e.getMetadata(qe.id)}),[e]),O=(0,fa.useMemo)(()=>x!=null?x:fe("geojson-featureview-no-time"),[x]),D=(0,fa.useMemo)(()=>e.getMetadata(qe.externalContentType)===Ru.IDOHIST?Gse:Vse,[e]),k=(0,fa.useCallback)(()=>{i(null),r(gs.INITIAL),n(null)},[]),R=(0,fa.useCallback)(()=>gt(null,null,function*(){try{e.isExternalVectorMap()?yield d(e):yield u(e)}catch(G){console.error(G);return}}),[e]),q=(0,fa.useCallback)(()=>{e.setVisibility(h,"visible"),r(gs.INITIAL)},[e]),B=(0,fa.useCallback)(G=>{a({featureId:G,sourceId:M})},[M]);return(0,fa.useEffect)(()=>(o(e),()=>{r(gs.INITIAL),n(null),o(null)}),[e]),fa.default.createElement(fa.default.Fragment,null,fa.default.createElement(df,{title:fe("geojsonlayerpanel-header-title"),onEditClick:t!==gs.EDIT&&OLr(e)?R:void 0,onCloseClick:t===gs.EDIT?q:k}),fa.default.createElement("div",{className:"headline-container"},fa.default.createElement("div",{className:"geojson-headline--date"},O),fa.default.createElement("div",{className:"title-row"},fa.default.createElement("div",{className:"geojson-headline--title"},v),fa.default.createElement(Xnt,null)),fa.default.createElement("div",{className:"description-row"},fa.default.createElement("div",{className:"geojson-headline--description"},b))),fa.default.createElement(Ynt,null),fa.default.createElement(ytt,{className:Dt("geojson-layer-feature-list-root ",t!==gs.EDIT&&["in","scrollable"]),onFeatureClick:B,FeatureItem:D}))};iot.propTypes={selectedLayer:oot.default.instanceOf(Vo)};var aot=iot;var sot=aot;var da=Z(Pe(),1);var v2=Z(xt(),1);var Vg=Z(Pe(),1);var PLr=()=>{let e=yt(tr),[t,r]=(0,Vg.useState)(!0),n=yt(Dn),o=fe(t?"layermanagement-deactivate-all-maps":"layermanagement-activate-all-maps"),i=(0,Vg.useCallback)(()=>{n.forEach(a=>{a.setVisibility(e,t?"none":"visible")})},[e,t,n]);return(0,Vg.useEffect)(()=>{if(e){let a=()=>{let d=n.length===0?!0:n.some(h=>h.isVisible(e));r(d)},u=()=>{a()};return e._loaded?a():e.on("load",a),e.on(fs.visibilityChanged,u),()=>{e.off(fs.visibilityChanged,u),e.off("load",a)}}},[e,n]),Vg.default.createElement("button",{onClick:i,className:Dt("deactivate-map-col-control",t?"deactivate":""),title:o,id:"deactivate-all-maps"},Vg.default.createElement(su,{name:"layermanagement-deactivate","aria-labelledby":"deactivate-all-maps",alt:o}))},lot=PLr;var uot=lot;var Fl=Z(Pe(),1);var i7=Z(xt(),1);var cot=(e,t)=>{for(let r in e)Object.prototype.hasOwnProperty.call(e,r)&&e[r].forEach(o=>{o.setOpacity(t,0),o.setVisibility(t,"visible")})},pot=e=>e.slice().sort((t,r)=>{let n=t.getSortTime(),o=r.getSortTime();return n>o?1:n<o?-1:0}),fot=(e,t)=>{let r={};return e.forEach(n=>{n.move(t,null);let o=n.getSortTime();o in r?r[o].push(n):r[o]=[n]}),r};var dot=({animationOptions:e={}})=>{let[t,r]=(0,Fl.useState)(!1),[n,o]=(0,Fl.useState)(void 0),[i,a]=(0,Fl.useState)(!1),u=yt(tr),d=fe(`dynamicmapvis-${i?"close":"open"}`),[h,v]=Mo(Dn),b=(0,Fl.useRef)(!1),x=B=>{let{layers:G,delay:re=500}=B;G.forEach(Q=>{Q.setOpacity(u,0),Q.setVisibility(u,"visible")}),setTimeout(()=>{M(B)},re)},M=B=>{var me;let{layers:G,steps:re=.1,delay:Q=500,successCallback:ie}=B;if(b.current){let ve=((me=G[0].getOpacity(u))!=null?me:0)+re;ve>1?(G.forEach(ye=>{ye.setOpacity(u,1)}),Me(ie)&&ie()):(G.forEach(ye=>{ye.setOpacity(u,ve)}),setTimeout(()=>{M(B)},Q))}},O=B=>{let{sortedLayers:G,delay:re=500}=B;if(cot(G,u),b.current){let ie=Object.keys(G);if(ie.length>0){let me=ie[0],ve=G[me],Q=G,{[me]:ye}=Q,we=xn(Q,[Wfe(me)]),Se=()=>{O(Mt(Te({},B),{sortedLayers:we}))};setTimeout(()=>{x(Mt(Te({},B),{layers:ve,successCallback:Se}),re)}),o(me)}else k()}},D=()=>{r(!0),b.current=!0;let B=pot(h),G=fot(B,u);v(B),O(Mt(Te({},e),{sortedLayers:G}))},k=()=>{r(!1),b.current=!1,o(void 0)},R=B=>{B.preventDefault(),i?(k(),a(!1)):a(!0)},q=n&&n.length>4?n.split(" ")[2]:n;return Fl.default.createElement("div",{className:Dt("vkf-dyn-vis-control",t&&"play",i&&"open"),title:d,"aria-label":d,id:"dynamic-map-visualization"},Fl.default.createElement("button",{type:"button",className:"open-dyn-vis",onClick:R,"aria-labelledby":"dynamic-map-visualization"},Fl.default.createElement("svg",{width:"100%",height:"100%",viewBox:"0 0 30 30",version:"1.1",xmlns:"http://www.w3.org/2000/svg",alt:d},Fl.default.createElement("path",{className:"arrow",d:"M14.822,4.521c0.057,-0.014 0.117,-0.021 0.178,-0.021c1.561,0 3.047,0.348 4.385,0.97c1.342,0.611 2.573,1.513 3.589,2.699c0.83,0.969 1.452,2.052 1.868,3.192c0.425,1.136 0.658,2.363 0.658,3.639c0,1.561 -0.348,3.047 -0.97,4.385c-0.611,1.342 -1.513,2.573 -2.699,3.589c-0.969,0.83 -2.052,1.452 -3.192,1.868c-1.136,0.425 -2.363,0.658 -3.639,0.658c-1.561,0 -3.047,-0.348 -4.385,-0.97c-1.342,-0.611 -2.573,-1.513 -3.589,-2.699l-0.488,-0.569c-0.075,-0.088 -0.126,-0.188 -0.154,-0.292c-1.033,-1.48 -1.696,-3.234 -1.85,-5.122l-1.685,1.685c-0.293,0.293 -0.768,0.293 -1.061,0c-0.293,-0.292 -0.293,-0.768 0,-1.06l3,-3c0.293,-0.293 0.768,-0.293 1.061,0l3,3c0.292,0.292 0.292,0.768 0,1.06c-0.293,0.293 -0.768,0.293 -1.061,0l-1.754,-1.754c0.286,3.268 2.35,6.059 5.208,7.389c2.154,0.98 4.642,1.084 6.877,0.268c2.229,-0.835 4.051,-2.533 5.049,-4.678c0.98,-2.154 1.084,-4.642 0.268,-6.877c-0.835,-2.229 -2.533,-4.051 -4.678,-5.049c-3.095,-1.408 -6.88,-1.008 -9.613,1.333c-0.315,0.269 -0.788,0.233 -1.058,-0.082c-0.269,-0.314 -0.233,-0.788 0.082,-1.057c1.921,-1.646 4.287,-2.469 6.653,-2.505Z"}),Fl.default.createElement("path",{className:"minute-hand",d:"M14.238,8.795l0,5.47c0,0.414 0.336,0.75 0.75,0.75c0.414,0 0.75,-0.336 0.75,-0.75l0,-5.47c0,-0.414 -0.336,-0.75 -0.75,-0.75c-0.414,-0 -0.75,0.336 -0.75,0.75Z"}),Fl.default.createElement("path",{className:"hour-hand",d:"M21.18,14.263l-5.47,-0c-0.414,-0 -0.75,0.336 -0.75,0.75c-0,0.413 0.336,0.75 0.75,0.75l5.47,-0c0.414,-0 0.75,-0.337 0.75,-0.75c0,-0.414 -0.336,-0.75 -0.75,-0.75Z"}))),Fl.default.createElement("div",{className:"content"},Fl.default.createElement("div",{className:Dt("feedback",n!==void 0&&"running")},q),Fl.default.createElement("button",{"aria-label":fe("dynamicmapvis-start"),className:"start-button",onClick:D,tabIndex:i?void 0:-1,title:fe("dynamicmapvis-start"),type:"button"},"Start"),Fl.default.createElement("button",{"aria-label":fe("dynamicmapvis-stop"),className:"stop-button",onClick:k,tabIndex:i?void 0:-1,title:fe("dynamicmapvis-stop"),type:"button"},"Stop")))};dot.propTypes={animationOptions:i7.default.shape({delay:i7.default.number,steps:i7.default.number})};var hot=dot;var mot=hot;var hi=Z(Pe(),1);var d0=Z(xt(),1);var a7=Z(Pe(),1);function got(e,t=300,r={}){let n=(0,a7.useRef)(null),o=(0,a7.useCallback)(i=>{n.current?(clearTimeout(n.current),n.current=null,e&&e(i)):n.current=setTimeout(()=>{r.onSingleTap&&r.onSingleTap(i),n.current=null},t)},[e,t,r.onSingleTap]);return e?{onClick:o}:{}}var _f=Z(Pe(),1);var Q4=Z(xt(),1);var Hse=e=>{let{onEndDrag:t,onStartDrag:r,orientation:n="horizontal",layer:o}=e,i=yt(tr),[a,u]=(0,_f.useState)(o.getOpacity(i)*100),d=(0,_f.useRef)(null),h=0,v=100,b=(O,D)=>{if(n==="vertical"){var k=100-(O-h)/(v-h)*100;D.style.top=k+"%",D.innerHTML=O.toFixed(0)+"%";return}let R=(O-h)/(v-h)*100;D.style.left=R+"%",D.innerHTML=O+"%"},x=O=>{let{layerId:D}=O;if(D===o.getId()){let k=o.getOpacity(i)*100;u(k)}},M=O=>{u(O),Me(i)&&o.setOpacity(i,O/100)};return(0,_f.useEffect)(()=>{b(Math.round(a),d.current)},[a]),(0,_f.useEffect)(()=>{if(i)return i.on(fs.opacityChanged,x),()=>{i.off(fs.opacityChanged,x)}},[i]),_f.default.createElement("div",{className:"opacity-container"},_f.default.createElement("div",{className:"slider-container"},_f.default.createElement(QF,{onAfterChange:t,onBeforeChange:r,onChange:M,value:a,vertical:n==="vertical"}),_f.default.createElement("div",{className:"tooltip value",ref:d},"100%")))};Hse.propTypes={onEndDrag:Q4.default.func,onStartDrag:Q4.default.func,layer:Q4.default.object.isRequired,orientation:Q4.default.oneOf(["horizontal","vertical"])};var m2=Z(Pe(),1),vot=Z(xt(),1);var yot=r=>{var n=r,{active:e}=n,t=xn(n,["active"]);let o=vr.getSettings();return m2.default.createElement("button",Te({className:Dt("vkf-drag-button",e&&"active"),title:o==="de"?"Ebene verschieben":"Move layer"},t),m2.default.createElement("span",null),m2.default.createElement("span",null),m2.default.createElement("span",null),m2.default.createElement("span",null))};yot.propTypes={active:vot.default.bool};var _ot=yot;var bot=Z(xt(),1),f0=Z(Pe(),1);var xot=e=>{let{layer:t}=e,r=t.getMetadata(qe.title),n=yt(tr),o=(0,f0.useMemo)(()=>t.isVisible(n),[t,n]),[i,a]=(0,f0.useState)(o),u=h=>{h.preventDefault(),h.stopPropagation(),a(!i),n&&t.setVisibility(n,i?"none":"visible")},d=({layerId:h,value:v})=>{h===t.getId()&&a(v==="visible")};return(0,f0.useEffect)(()=>{if(n)return n.on(fs.visibilityChanged,d),()=>{n.off(fs.visibilityChanged,d)}},[n]),f0.default.createElement("button",{className:Dt("disable-layer minimize-tool",i?"record-visible":"record-hidden"),onClick:u,type:"button",title:fe("layermanagement-show-map")},` ${fe("layermanagement-show-map")}: ${r}`)};xot.propTypes={layer:bot.default.object};var wot=xot;var bf=su;var Wse=Z(Pe(),1);var Eot=Z(xt(),1);var Sot=e=>{let{layer:t}=e,r=yt(tr),n=zr(Dn),[o,i]=Mo(Zs);return Wse.default.createElement("button",{className:"remove-layer minimize-tool",onClick:u=>{u.stopPropagation(),Me(r)&&(t.removeMapLibreLayers(r),n(d=>d.filter(h=>h.getId()!==t.getId())),t.getType()===co.VECTOR_MAP&&(o==null?void 0:o.sourceId)===t.getId()&&i(null))},type:"button",title:fe("layermanagement-remove-map")},Wse.default.createElement(bf,{name:"layeraction-remove-map"}))};Sot.propTypes={layer:Eot.default.object.isRequired};var Tot=Sot;var J4=Z(Pe(),1),Mot=Z(xt(),1);var $se=24,Iot=100,NLr={left:$se+Pae.width+Iot,right:$se+Nae.width+Iot,top:60,bottom:$se},DLr={left:50,right:50,top:75,bottom:150},LLr=e=>({padding:e===wc.HORIZONTAL?NLr:DLr,animate:!1}),kLr=()=>({zoomToExtent:ar(({snapshot:t})=>r=>gt(null,null,function*(){let n=yield t.getPromise(tr),o=yield t.getPromise(dS),i=LLr(o);if(Me(n)){let a=r.getMetadata(qe.bounds);n.fitBounds(a,i)}}),[])}),g2=kLr;var Cot=e=>{let{layer:t}=e,{zoomToExtent:r}=g2(),n=(0,J4.useCallback)(()=>{r(t)},[r,t]);return J4.default.createElement("button",{className:"zoom-layer minimize-tool",onClick:n,type:"button",title:fe("layermanagement-zoom-to-map")},J4.default.createElement(bf,{name:"layeraction-center"}))};Cot.propTypes={layer:Mot.default.object.isRequired};var Aot=Cot;var Zse=Z(Pe(),1);var Oot=Z(xt(),1),Pot=e=>{let{layer:t}=e,r=yt(tr),n=zr(Dn);return Zse.default.createElement("button",{className:"move-layer-top minimize-tool",onClick:i=>{i.stopPropagation(),t.moveToTop(r),n(a=>[...a.filter(u=>u!==t),t])},type:"button",title:fe("layermanagement-move-top")},Zse.default.createElement(su,{name:"layeraction-totop"}))};Pot.propTypes={layer:Oot.default.object.isRequired};var Not=Pot;var xf=Z(Pe(),1),Dot=Z(xt(),1);var Lot=({layer:e})=>{let[t,r]=(0,xf.useState)(zz(e)),n=(0,xf.useMemo)(()=>S4(e),[e]),{layerType:o,layerTitle:i,isMosaic:a,isRemoteVectorMap:u}=(0,xf.useMemo)(()=>({layerType:e.getType(),layerTitle:e.getMetadata(qe.title),isMosaic:e.getMetadata(qe.type)===co.MOSAIC_MAP,isRemoteVectorMap:Me(e.getMetadata(qe.vectorMapId))}),[e]),d=(0,xf.useCallback)(()=>{t!==n&&r(n)},[n]);return xf.default.createElement("div",{className:"thumbnail-container"},xf.default.createElement("img",{onError:d,src:t,alt:`Thumbnail Image of Map for ${i}`}),o===co.VECTOR_MAP&&xf.default.createElement("span",{className:Dt("vector-badge",!u&&"local-vector-badge")},fe("vector-badge-title")),a&&xf.default.createElement("span",{className:"mosaic-badge"},fe("mosaic-badge-title")))};Lot.propTypes={layer:Dot.default.object.isRequired};var kot=Lot;var eP=Z(Pe(),1);var Rot=Z(xt(),1),jot=({layer:e})=>{let t=zr(aq),r=(0,eP.useCallback)(()=>{t(e.getId())},[e]);return eP.default.createElement("button",{className:"show-original",onClick:r,type:"button",title:fe("layermanagement-show-original")},eP.default.createElement(bf,{name:"layeraction-showoriginal"}))};jot.propTypes={layer:Rot.default.object};var qot=jot;var tP=Z(Pe(),1),zot=Z(xt(),1);var Fot=({layer:e})=>{let t=zr(Ys),r=(0,tP.useCallback)(()=>{e&&Me(e.getId())&&t(e.getId())},[e]);return tP.default.createElement("button",{className:"show-geojson-layer",onClick:r,type:"button",title:fe("layermanagement-show-geojson")},tP.default.createElement(su,{name:"layermanagement-show-geojson"}))};Fot.propTypes={layer:zot.default.instanceOf(Vo).isRequired};var Uot=Fot;var Bot={LAYER:"LAYER"},Vot=e=>{let{id:t,index:r,layer:n,onMoveLayer:o}=e,[i,a]=(0,hi.useState)(!1),[u,d]=(0,hi.useState)(!1),[h,v]=(0,hi.useState)(!1),[b,x]=(0,hi.useState)(!1),M=(0,hi.useRef)(null),O=vr.getSettings(),[{handlerId:D},k]=m6({accept:Bot.LAYER,collect(tt){return{handlerId:tt.getHandlerId()}},hover(tt,Et){var _t;if(!M.current)return;let Xe=tt.index,Pt=r;if(Xe===Pt)return;let Lt=(_t=M.current)==null?void 0:_t.getBoundingClientRect(),Gt=(Lt.bottom-Lt.top)/2,ct=Et.getClientOffset().y-Lt.top;Xe<Pt&&ct<Gt||Xe>Pt&&ct>Gt||(o(Xe,Pt),tt.index=Pt)}}),[{draggedItem:R,isDragging:q},B]=LUe({type:Bot.LAYER,item:()=>({id:t,index:r}),collect:tt=>({isDragging:tt.isDragging(),draggedItem:tt.getItem()})}),G=()=>setTimeout(()=>{M.current!==null&&(M.current.contains(document.activeElement)||Q())},100),re=()=>{a(!0)},Q=()=>{a(!1)},ie=got(()=>{v(tt=>!tt)},500),me=()=>{d(!0)},ve=()=>{d(!1)};(0,hi.useEffect)(()=>{i?R===null&&!b&&x(!0):R!==void 0&&!u&&x(!1)},[i,b,u,R]),B(k(M));let ye=n.getId(),we=n.getType(),Se=n.getDisplayTime(),ge=n.getMetadata(qe.title),Je=n.getMetadata(qe.type)==="mosaic";return hi.default.createElement("li",Mt(Te({className:Dt("vkf-layermanagement-record",q&&"drag-and-drop-placeholder",h&&"show-actions",we===co.VECTOR_MAP&&"geojson-data",b&&(R===null||R.id===ye)&&"force-hover"),id:r,"data-id":ye,"data-handler-id":D,onFocus:re,onBlur:G,onMouseEnter:re,onMouseOver:re,onMouseLeave:Q},ie),{ref:M}),hi.default.createElement("div",{className:"visibility-container"},hi.default.createElement(wot,{layer:n})),hi.default.createElement(kot,{layer:n}),hi.default.createElement("div",{className:"metadata-container"},hi.default.createElement("h3",null,ge),hi.default.createElement("div",{className:"timestamps"},hi.default.createElement("span",{className:"timestamps-label"},`${fe("mapsearch-listelement-time")} ${Se}`))),hi.default.createElement("div",{className:"control-container"},hi.default.createElement(Not,{layer:n}),hi.default.createElement(Tot,{layer:n}),hi.default.createElement(Aot,{layer:n}),we!==co.VECTOR_MAP?hi.default.createElement(qot,{layer:n}):hi.default.createElement(Uot,{layer:n}),!Je&&O.LINK_TO_GEOREFERENCE!==void 0&&we!==co.VECTOR_MAP&&hi.default.createElement("button",{className:"georeference-update",title:`${fe("layermangement-georef-update")} ...`,onClick:()=>{window.open(`${O.LINK_TO_GEOREFERENCE}?map_id=${ye}`,"_blank")}},hi.default.createElement(su,{name:"icon-point-move"})),hi.default.createElement(Hse,{onStartDrag:me,onEndDrag:ve,orientation:"horizontal",layer:n})),hi.default.createElement("div",{className:"drag-container"},hi.default.createElement(_ot,{tabIndex:-1})))};Vot.propTypes={id:d0.default.string,index:d0.default.number,layer:d0.default.oneOfType([d0.default.instanceOf(Vo),d0.default.instanceOf(dg)]),onMoveLayer:d0.default.func,showActions:d0.default.func};var Got=Vot;var Hot=Got;var ol=Z(Pe(),1);function Yse(){let{createNewVectorMap:e}=t7(),{createNewExternalVectorMap:t}=r7(),r=zr(lq),n=(0,ol.useCallback)(()=>{e()},[]),o=(0,ol.useCallback)(()=>{t()},[]),i=(0,ol.useCallback)(()=>{r(!0)},[]);return ol.default.createElement("div",{className:"geojson-container"},ol.default.createElement("div",{className:"geojson-action"},ol.default.createElement("button",{disabled:!Qz(),onClick:n},ol.default.createElement(Fr,{name:"addVectorMap"}),ol.default.createElement("span",null,fe("layermanagement-create-vector-map")))),Itt()&&ol.default.createElement("div",{className:"geojson-action"},ol.default.createElement("button",{onClick:o},ol.default.createElement(Fr,{name:"addVectorMap"}),ol.default.createElement("span",null,fe("layermanagement-create-external-vector-map")))),ol.default.createElement("div",{className:"geojson-action"},ol.default.createElement("button",{onClick:i},ol.default.createElement(bf,{name:"layermanagement-upload"}),ol.default.createElement("span",null,fe("layermanagement-add-vector-map")))))}var Wot=({showControls:e={showBadge:!0,showHideButton:!0,showDynamicMapVisualization:!0},showHeader:t=!0})=>{let{showBadge:r,showDynamicMapVisualization:n,showHideButton:o}=e,[i,a]=(0,da.useState)(!1),u=yt(tr),d=yt(Ys),[h,v]=Mo(Dn),b=(0,da.useMemo)(()=>Me(d),[d]),x=(0,da.useMemo)(()=>h.toReversed(),[h]),M=(D,k)=>{let R=[...x],q=R.splice(D,1)[0];R.splice(k,0,q);let B=k-1,G=B<0?null:R[B].getMapLibreLayerId();q.move(u,G),v(R.reverse())},O=()=>{a(D=>!D)};return da.default.createElement("div",{className:Dt("vkf-layermanagement-root",!b&&"in",i&&"show-controls")},r&&h.length!==0&&da.default.createElement("span",{className:"badge"},h.length),t&&da.default.createElement("div",{className:"heading"},da.default.createElement("span",{className:"header-label"},fe("layermanagement-header-lbl")),da.default.createElement("div",{className:"header-functions"},da.default.createElement("span",{className:"deco-caret"},da.default.createElement(Fr,{name:"caret"})),da.default.createElement("button",{className:"geojson-upload",onClick:O},da.default.createElement(Fr,{name:"uploadVectorMap"}),da.default.createElement("span",{className:"label",id:"geojson-upload-label"},fe("geojson-adddialog-title"))),o&&da.default.createElement(uot,null),n&&da.default.createElement(mot,{animationOptions:{delay:30,steps:.01}}))),da.default.createElement(Yse,null),da.default.createElement("ul",{className:"layermanagement-body"},h===void 0||h.length===0?da.default.createElement("li",{className:"empty"},da.default.createElement("h4",null,fe("layermanagement-start-msg-header")),da.default.createElement("p",null,fe("layermanagement-start-msg-body"))):x.map((D,k)=>{let R=D.getId();return da.default.createElement(Hot,{onMoveLayer:M,layer:D,index:k,key:R,id:R})})))};Wot.propTypes={showControls:v2.default.shape({showBadge:v2.default.bool,showDynamicMapVisualization:v2.default.bool,showHideButton:v2.default.bool}),showHeader:v2.default.bool};var s7=Wot;var m0=Z(Pe(),1);var x7=Z(xt(),1);var l7=Z(Pe(),1);var $ot=()=>{let e=yt($y),[t,r]=Mo(Wy),n=(0,l7.useCallback)(o=>r(o),[]);return l7.default.createElement(e7,{title:fe("timeslider-adjust-timeperiod"),timeRange:e,onChange:n,values:t,sliderProps:{draggableTrack:!0}})};$ot.propTypes={};var Zot=$ot;var u7=Zot;var _7=Z(Pe(),1);var cb=Z(Pe(),1),Ble=Z(xt(),1);var Wu=Z(Pe(),1);var rr=Z(xt()),Kt=Z(Pe()),WLr=Z(rit());function nit(e){return typeof e=="object"&&e!=null&&e.nodeType===1}function oit(e,t){return(!t||e!=="hidden")&&e!=="visible"&&e!=="clip"}function Xse(e,t){if(e.clientHeight<e.scrollHeight||e.clientWidth<e.scrollWidth){var r=getComputedStyle(e,null);return oit(r.overflowY,t)||oit(r.overflowX,t)||function(n){var o=function(i){if(!i.ownerDocument||!i.ownerDocument.defaultView)return null;try{return i.ownerDocument.defaultView.frameElement}catch(a){return null}}(n);return!!o&&(o.clientHeight<n.scrollHeight||o.clientWidth<n.scrollWidth)}(e)}return!1}function f7(e,t,r,n,o,i,a,u){return i<e&&a>t||i>e&&a<t?0:i<=e&&u<=r||a>=t&&u>=r?i-e-n:a>t&&u<r||i<e&&u>r?a-t+o:0}var iit=function(e,t){var r=window,n=t.scrollMode,o=t.block,i=t.inline,a=t.boundary,u=t.skipOverflowHiddenElements,d=typeof a=="function"?a:function(sr){return sr!==a};if(!nit(e))throw new TypeError("Invalid target");for(var h,v,b=document.scrollingElement||document.documentElement,x=[],M=e;nit(M)&&d(M);){if((M=(v=(h=M).parentElement)==null?h.getRootNode().host||null:v)===b){x.push(M);break}M!=null&&M===document.body&&Xse(M)&&!Xse(document.documentElement)||M!=null&&Xse(M,u)&&x.push(M)}for(var O=r.visualViewport?r.visualViewport.width:innerWidth,D=r.visualViewport?r.visualViewport.height:innerHeight,k=window.scrollX||pageXOffset,R=window.scrollY||pageYOffset,q=e.getBoundingClientRect(),B=q.height,G=q.width,re=q.top,Q=q.right,ie=q.bottom,me=q.left,ve=o==="start"||o==="nearest"?re:o==="end"?ie:re+B/2,ye=i==="center"?me+G/2:i==="end"?Q:me,we=[],Se=0;Se<x.length;Se++){var ge=x[Se],Re=ge.getBoundingClientRect(),Je=Re.height,tt=Re.width,Et=Re.top,Xe=Re.right,Pt=Re.bottom,Lt=Re.left;if(n==="if-needed"&&re>=0&&me>=0&&ie<=D&&Q<=O&&re>=Et&&ie<=Pt&&me>=Lt&&Q<=Xe)return we;var Gt=getComputedStyle(ge),nt=parseInt(Gt.borderLeftWidth,10),ct=parseInt(Gt.borderTopWidth,10),_t=parseInt(Gt.borderRightWidth,10),We=parseInt(Gt.borderBottomWidth,10),De=0,Qe=0,Ge="offsetWidth"in ge?ge.offsetWidth-ge.clientWidth-nt-_t:0,st="offsetHeight"in ge?ge.offsetHeight-ge.clientHeight-ct-We:0,pt="offsetWidth"in ge?ge.offsetWidth===0?0:tt/ge.offsetWidth:0,Rt="offsetHeight"in ge?ge.offsetHeight===0?0:Je/ge.offsetHeight:0;if(b===ge)De=o==="start"?ve:o==="end"?ve-D:o==="nearest"?f7(R,R+D,D,ct,We,R+ve,R+ve+B,B):ve-D/2,Qe=i==="start"?ye:i==="center"?ye-O/2:i==="end"?ye-O:f7(k,k+O,O,nt,_t,k+ye,k+ye+G,G),De=Math.max(0,De+R),Qe=Math.max(0,Qe+k);else{De=o==="start"?ve-Et-ct:o==="end"?ve-Pt+We+st:o==="nearest"?f7(Et,Pt,Je,ct,We+st,ve,ve+B,B):ve-(Et+Je/2)+st/2,Qe=i==="start"?ye-Lt-nt:i==="center"?ye-(Lt+tt/2)+Ge/2:i==="end"?ye-Xe+_t+Ge:f7(Lt,Xe,tt,nt,_t+Ge,ye,ye+G,G);var St=ge.scrollLeft,Ot=ge.scrollTop;ve+=Ot-(De=Math.max(0,Math.min(Ot+De/Rt,ge.scrollHeight-Je/Rt+st))),ye+=St-(Qe=Math.max(0,Math.min(St+Qe/pt,ge.scrollWidth-tt/pt+Ge)))}we.push({el:ge,top:De,left:Qe})}return we};var pP=function(){return pP=Object.assign||function(t){for(var r,n=1,o=arguments.length;n<o;n++){r=arguments[n];for(var i in r)Object.prototype.hasOwnProperty.call(r,i)&&(t[i]=r[i])}return t},pP.apply(this,arguments)};var $Lr=0;function gP(){}function ZLr(e,t){if(!e)return;iit(e,{boundary:t,block:"nearest",scrollMode:"if-needed"}).forEach(n=>{let{el:o,top:i,left:a}=n;o.scrollTop=i,o.scrollLeft=a})}function ait(e,t,r){return e===t||t instanceof r.Node&&e.contains&&e.contains(t)}function Jse(e,t){let r;function n(){r&&clearTimeout(r)}function o(){for(var i=arguments.length,a=new Array(i),u=0;u<i;u++)a[u]=arguments[u];n(),r=setTimeout(()=>{r=null,e(...a)},t)}return o.cancel=n,o}function Ps(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];return function(n){for(var o=arguments.length,i=new Array(o>1?o-1:0),a=1;a<o;a++)i[a-1]=arguments[a];return t.some(u=>(u&&u(n,...i),n.preventDownshiftDefault||n.hasOwnProperty("nativeEvent")&&n.nativeEvent.preventDownshiftDefault))}}function em(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];return n=>{t.forEach(o=>{typeof o=="function"?o(n):o&&(o.current=n)})}}function YLr(){return String($Lr++)}function KLr(e){let{isOpen:t,resultCount:r,previousResultCount:n}=e;return t?r?r!==n?`${r} result${r===1?" is":"s are"} available, use up and down arrow keys to navigate. Press Enter key to select.`:"":"No results are available.":""}function d7(e,t){return Object.keys(e).reduce((r,n)=>(r[n]=dit(t,n)?t[n]:e[n],r),{})}function dit(e,t){return e[t]!==void 0}function hP(e){let{key:t,keyCode:r}=e;return r>=37&&r<=40&&t.indexOf("Arrow")!==0?`Arrow${t}`:t}function mP(e,t,r,n,o){if(o===void 0&&(o=!0),r===0)return-1;let i=r-1;(typeof t!="number"||t<0||t>=r)&&(t=e>0?-1:i+1);let a=t+e;a<0?a=o?i:0:a>i&&(a=o?0:i);let u=ub(e,a,r,n,o);return u===-1?t>=r?-1:t:u}function ub(e,t,r,n,o){let i=n(t);if(!i||!i.hasAttribute("disabled"))return t;if(e>0){for(let a=t+1;a<r;a++)if(!n(a).hasAttribute("disabled"))return a}else for(let a=t-1;a>=0;a--)if(!n(a).hasAttribute("disabled"))return a;return o?e>0?ub(1,0,r,n,!1):ub(-1,r-1,r,n,!1):-1}function sit(e,t,r,n){return n===void 0&&(n=!0),t.some(o=>o&&(ait(o,e,r)||n&&ait(o,r.document.activeElement,r)))}var XLr=Jse(e=>{mit(e).textContent=""},500);function hit(e,t){let r=mit(t);e&&(r.textContent=e,XLr(t))}function mit(e){e===void 0&&(e=document);let t=e.getElementById("a11y-status-message");return t||(t=e.createElement("div"),t.setAttribute("id","a11y-status-message"),t.setAttribute("role","status"),t.setAttribute("aria-live","polite"),t.setAttribute("aria-relevant","additions text"),Object.assign(t.style,{border:"0",clip:"rect(0 0 0 0)",height:"1px",margin:"-1px",overflow:"hidden",padding:"0",position:"absolute",width:"1px"}),e.body.appendChild(t),t)}var git={highlightedIndex:-1,isOpen:!1,selectedItem:null,inputValue:""};function QLr(e,t,r){let{props:n,type:o}=e,i={};Object.keys(t).forEach(a=>{JLr(a,e,t,r),r[a]!==t[a]&&(i[a]=r[a])}),n.onStateChange&&Object.keys(i).length&&n.onStateChange(Te({type:o},i))}function JLr(e,t,r,n){let{props:o,type:i}=t,a=`on${tle(e)}Change`;o[a]&&n[e]!==void 0&&n[e]!==r[e]&&o[a](Te({type:i},n))}function e3r(e,t){return t.changes}function t3r(e){let{selectedItem:t,itemToString:r}=e;return t?`${r(t)} has been selected.`:""}var r3r=Jse((e,t)=>{hit(e(),t)},200),n3r=typeof window!="undefined"&&typeof window.document!="undefined"&&typeof window.document.createElement!="undefined"?Kt.useLayoutEffect:Kt.useEffect;function vit(e){let{id:t=`downshift-${YLr()}`,labelId:r,menuId:n,getItemId:o,toggleButtonId:i,inputId:a}=e;return(0,Kt.useRef)({labelId:r||`${t}-label`,menuId:n||`${t}-menu`,getItemId:o||(d=>`${t}-item-${d}`),toggleButtonId:i||`${t}-toggle-button`,inputId:a||`${t}-input`}).current}function ele(e,t,r){return e!==void 0?e:r.length===0?-1:r.indexOf(t)}function o3r(e){return e?String(e):""}function lit(e){return /^\S{1}$/.test(e)}function tle(e){return`${e.slice(0,1).toUpperCase()}${e.slice(1)}`}function v7(e){let t=(0,Kt.useRef)(e);return t.current=e,t}function yit(e,t,r){let n=(0,Kt.useRef)(),o=(0,Kt.useRef)(),i=(0,Kt.useCallback)((b,x)=>{o.current=x,b=d7(b,x.props);let M=e(b,x);return x.props.stateReducer(b,Mt(Te({},x),{changes:M}))},[e]),[a,u]=(0,Kt.useReducer)(i,t),d=v7(r),h=(0,Kt.useCallback)(b=>u(Te({props:d.current},b)),[d]),v=o.current;return(0,Kt.useEffect)(()=>{v&&n.current&&n.current!==a&&QLr(v,d7(n.current,v.props),a),n.current=a},[a,r,v]),[a,h]}function _it(e,t,r){let[n,o]=yit(e,t,r);return[d7(n,r),o]}var dP={itemToString:o3r,stateReducer:e3r,getA11ySelectionMessage:t3r,scrollIntoView:ZLr,circularNavigation:!1,environment:typeof window=="undefined"?{}:window};function Hu(e,t,r){r===void 0&&(r=git);let n=e[`default${tle(t)}`];return n!==void 0?n:r[t]}function fP(e,t,r){r===void 0&&(r=git);let n=e[t];if(n!==void 0)return n;let o=e[`initial${tle(t)}`];return o!==void 0?o:Hu(e,t,r)}function bit(e){let t=fP(e,"selectedItem"),r=fP(e,"isOpen"),n=fP(e,"highlightedIndex"),o=fP(e,"inputValue");return{highlightedIndex:n<0&&t&&r?e.items.indexOf(t):n,isOpen:r,selectedItem:t,inputValue:o}}function y2(e,t,r,n){let{items:o,initialHighlightedIndex:i,defaultHighlightedIndex:a}=e,{selectedItem:u,highlightedIndex:d}=t;return o.length===0?-1:i!==void 0&&d===i?i:a!==void 0?a:u?r===0?o.indexOf(u):mP(r,o.indexOf(u),o.length,n,!1):r===0?-1:r<0?o.length-1:0}function xit(e,t,r,n){let o=(0,Kt.useRef)({isMouseDown:!1,isTouchMove:!1});return(0,Kt.useEffect)(()=>{let i=()=>{o.current.isMouseDown=!0},a=v=>{o.current.isMouseDown=!1,e&&!sit(v.target,t.map(b=>b.current),r)&&n()},u=()=>{o.current.isTouchMove=!1},d=()=>{o.current.isTouchMove=!0},h=v=>{e&&!o.current.isTouchMove&&!sit(v.target,t.map(b=>b.current),r,!1)&&n()};return r.addEventListener("mousedown",i),r.addEventListener("mouseup",a),r.addEventListener("touchstart",u),r.addEventListener("touchmove",d),r.addEventListener("touchend",h),function(){r.removeEventListener("mousedown",i),r.removeEventListener("mouseup",a),r.removeEventListener("touchstart",u),r.removeEventListener("touchmove",d),r.removeEventListener("touchend",h)}},[e,r]),o}var rle=()=>gP;function h7(e,t,r){let d=r,{isInitialMount:n,highlightedIndex:o,items:i,environment:a}=d,u=xn(d,["isInitialMount","highlightedIndex","items","environment"]);(0,Kt.useEffect)(()=>{n||r3r(()=>e(Te({highlightedIndex:o,highlightedItem:i[o],resultCount:i.length},u)),a.document)},t)}function wit(e){let{highlightedIndex:t,isOpen:r,itemRefs:n,getItemNodeFromIndex:o,menuElement:i,scrollIntoView:a}=e,u=(0,Kt.useRef)(!0);return n3r(()=>{t<0||!r||!Object.keys(n.current).length||(u.current===!1?u.current=!0:a(o(t),i))},[t]),u}var nle=gP;function Eit(e,t,r){let{type:n,props:o}=t,i;switch(n){case r.ItemMouseMove:i={highlightedIndex:t.disabled?-1:t.index};break;case r.MenuMouseLeave:i={highlightedIndex:-1};break;case r.ToggleButtonClick:case r.FunctionToggleMenu:i={isOpen:!e.isOpen,highlightedIndex:e.isOpen?-1:y2(o,e,0)};break;case r.FunctionOpenMenu:i={isOpen:!0,highlightedIndex:y2(o,e,0)};break;case r.FunctionCloseMenu:i={isOpen:!1};break;case r.FunctionSetHighlightedIndex:i={highlightedIndex:t.highlightedIndex};break;case r.FunctionSetInputValue:i={inputValue:t.inputValue};break;case r.FunctionReset:i={highlightedIndex:Hu(o,"highlightedIndex"),isOpen:Hu(o,"isOpen"),selectedItem:Hu(o,"selectedItem"),inputValue:Hu(o,"inputValue")};break;default:throw new Error("Reducer called without proper action type.")}return Te(Te({},e),i)}function uit(e){for(var t=e.keysSoFar,r=e.highlightedIndex,n=e.items,o=e.itemToString,i=e.getItemNodeFromIndex,a=t.toLowerCase(),u=0;u<n.length;u++){var d=(u+r+1)%n.length,h=n[d];if(h!==void 0&&o(h).toLowerCase().startsWith(a)){var v=i(d);if(!(v!=null&&v.hasAttribute("disabled")))return d}}return r}var bUn={items:rr.default.array.isRequired,itemToString:rr.default.func,getA11yStatusMessage:rr.default.func,getA11ySelectionMessage:rr.default.func,circularNavigation:rr.default.bool,highlightedIndex:rr.default.number,defaultHighlightedIndex:rr.default.number,initialHighlightedIndex:rr.default.number,isOpen:rr.default.bool,defaultIsOpen:rr.default.bool,initialIsOpen:rr.default.bool,selectedItem:rr.default.any,initialSelectedItem:rr.default.any,defaultSelectedItem:rr.default.any,id:rr.default.string,labelId:rr.default.string,menuId:rr.default.string,getItemId:rr.default.func,toggleButtonId:rr.default.string,stateReducer:rr.default.func,onSelectedItemChange:rr.default.func,onHighlightedIndexChange:rr.default.func,onStateChange:rr.default.func,onIsOpenChange:rr.default.func,environment:rr.default.shape({addEventListener:rr.default.func,removeEventListener:rr.default.func,document:rr.default.shape({getElementById:rr.default.func,activeElement:rr.default.any,body:rr.default.any})})};function i3r(e){var t=e.isOpen,r=e.resultCount,n=e.previousResultCount;return t?r?r!==n?"".concat(r," result").concat(r===1?" is":"s are"," available, use up and down arrow keys to navigate. Press Enter or Space Bar keys to select."):"":"No results are available.":""}var a3r=pP(pP({},dP),{getA11yStatusMessage:i3r}),s3r=gP,ole=0,ile=1,ale=2,sle=3,lle=4,ule=5,cle=6,ple=7,m7=8,Sit=9,Tit=10,fle=11,Iit=12,dle=13,hle=14,mle=15,Mit=16,Cit=17,Ait=18,Oit=19,gle=20,Qse=21,Pit=22,Nit=Object.freeze({__proto__:null,MenuKeyDownArrowDown:ole,MenuKeyDownArrowUp:ile,MenuKeyDownEscape:ale,MenuKeyDownHome:sle,MenuKeyDownEnd:lle,MenuKeyDownEnter:ule,MenuKeyDownSpaceButton:cle,MenuKeyDownCharacter:ple,MenuBlur:m7,MenuMouseLeave:Sit,ItemMouseMove:Tit,ItemClick:fle,ToggleButtonClick:Iit,ToggleButtonKeyDownArrowDown:dle,ToggleButtonKeyDownArrowUp:hle,ToggleButtonKeyDownCharacter:mle,FunctionToggleMenu:Mit,FunctionOpenMenu:Cit,FunctionCloseMenu:Ait,FunctionSetHighlightedIndex:Oit,FunctionSelectItem:gle,FunctionSetInputValue:Qse,FunctionReset:Pit});function l3r(e,t){let{type:r,props:n,shiftKey:o}=t,i;switch(r){case fle:i={isOpen:Hu(n,"isOpen"),highlightedIndex:Hu(n,"highlightedIndex"),selectedItem:n.items[t.index]};break;case mle:{let a=t.key,u=`${e.inputValue}${a}`,d=uit({keysSoFar:u,highlightedIndex:e.selectedItem?n.items.indexOf(e.selectedItem):-1,items:n.items,itemToString:n.itemToString,getItemNodeFromIndex:t.getItemNodeFromIndex});i=Te({inputValue:u},d>=0&&{selectedItem:n.items[d]})}break;case dle:i={highlightedIndex:y2(n,e,1,t.getItemNodeFromIndex),isOpen:!0};break;case hle:i={highlightedIndex:y2(n,e,-1,t.getItemNodeFromIndex),isOpen:!0};break;case ule:case cle:i=Te({isOpen:Hu(n,"isOpen"),highlightedIndex:Hu(n,"highlightedIndex")},e.highlightedIndex>=0&&{selectedItem:n.items[e.highlightedIndex]});break;case sle:i={highlightedIndex:ub(1,0,n.items.length,t.getItemNodeFromIndex,!1)};break;case lle:i={highlightedIndex:ub(-1,n.items.length-1,n.items.length,t.getItemNodeFromIndex,!1)};break;case ale:i={isOpen:!1,highlightedIndex:-1};break;case m7:i={isOpen:!1,highlightedIndex:-1};break;case ple:{let a=t.key,u=`${e.inputValue}${a}`,d=uit({keysSoFar:u,highlightedIndex:e.highlightedIndex,items:n.items,itemToString:n.itemToString,getItemNodeFromIndex:t.getItemNodeFromIndex});i=Te({inputValue:u},d>=0&&{highlightedIndex:d})}break;case ole:i={highlightedIndex:mP(o?5:1,e.highlightedIndex,n.items.length,t.getItemNodeFromIndex,n.circularNavigation)};break;case ile:i={highlightedIndex:mP(o?-5:-1,e.highlightedIndex,n.items.length,t.getItemNodeFromIndex,n.circularNavigation)};break;case gle:i={selectedItem:t.selectedItem};break;default:return Eit(e,t,Nit)}return Te(Te({},e),i)}Dit.stateChangeTypes=Nit;function Dit(e){e===void 0&&(e={}),s3r(e,Dit);let t=Te(Te({},a3r),e),{items:r,scrollIntoView:n,environment:o,initialIsOpen:i,defaultIsOpen:a,itemToString:u,getA11ySelectionMessage:d,getA11yStatusMessage:h}=t,v=bit(t),[b,x]=_it(l3r,v,t),{isOpen:M,highlightedIndex:O,selectedItem:D,inputValue:k}=b,R=(0,Kt.useRef)(null),q=(0,Kt.useRef)(null),B=(0,Kt.useRef)({}),G=(0,Kt.useRef)(!0),re=(0,Kt.useRef)(null),Q=vit(t),ie=(0,Kt.useRef)(),me=(0,Kt.useRef)(!0),ve=v7({state:b,props:t}),ye=(0,Kt.useCallback)(Qe=>B.current[Q.getItemId(Qe)],[Q]);h7(h,[M,O,k,r],Te({isInitialMount:me.current,previousResultCount:ie.current,items:r,environment:o,itemToString:u},b)),h7(d,[D],Te({isInitialMount:me.current,previousResultCount:ie.current,items:r,environment:o,itemToString:u},b));let we=wit({menuElement:q.current,highlightedIndex:O,isOpen:M,itemRefs:B,scrollIntoView:n,getItemNodeFromIndex:ye});(0,Kt.useEffect)(()=>(re.current=Jse(Qe=>{Qe({type:Qse,inputValue:""})},500),()=>{re.current.cancel()}),[]),(0,Kt.useEffect)(()=>{k&&re.current(x)},[x,k]),nle({isInitialMount:me.current,props:t,state:b}),(0,Kt.useEffect)(()=>{if(me.current){(i||a||M)&&q.current&&q.current.focus();return}if(M){q.current&&q.current.focus();return}o.document.activeElement===q.current&&R.current&&(G.current=!1,R.current.focus())},[M]),(0,Kt.useEffect)(()=>{me.current||(ie.current=r.length)});let Se=xit(M,[q,R],o,()=>{x({type:m7})}),ge=rle("getMenuProps","getToggleButtonProps");(0,Kt.useEffect)(()=>{me.current=!1},[]),(0,Kt.useEffect)(()=>{M||(B.current={})},[M]);let Re=(0,Kt.useMemo)(()=>({ArrowDown(Qe){Qe.preventDefault(),x({type:dle,getItemNodeFromIndex:ye,shiftKey:Qe.shiftKey})},ArrowUp(Qe){Qe.preventDefault(),x({type:hle,getItemNodeFromIndex:ye,shiftKey:Qe.shiftKey})}}),[x,ye]),Je=(0,Kt.useMemo)(()=>({ArrowDown(Qe){Qe.preventDefault(),x({type:ole,getItemNodeFromIndex:ye,shiftKey:Qe.shiftKey})},ArrowUp(Qe){Qe.preventDefault(),x({type:ile,getItemNodeFromIndex:ye,shiftKey:Qe.shiftKey})},Home(Qe){Qe.preventDefault(),x({type:sle,getItemNodeFromIndex:ye})},End(Qe){Qe.preventDefault(),x({type:lle,getItemNodeFromIndex:ye})},Escape(){x({type:ale})},Enter(Qe){Qe.preventDefault(),x({type:ule})}," "(Qe){Qe.preventDefault(),x({type:cle})}}),[x,ye]),tt=(0,Kt.useCallback)(()=>{x({type:Mit})},[x]),Et=(0,Kt.useCallback)(()=>{x({type:Ait})},[x]),Xe=(0,Kt.useCallback)(()=>{x({type:Cit})},[x]),Pt=(0,Kt.useCallback)(Qe=>{x({type:Oit,highlightedIndex:Qe})},[x]),Lt=(0,Kt.useCallback)(Qe=>{x({type:gle,selectedItem:Qe})},[x]),Gt=(0,Kt.useCallback)(()=>{x({type:Pit})},[x]),nt=(0,Kt.useCallback)(Qe=>{x({type:Qse,inputValue:Qe})},[x]),ct=(0,Kt.useCallback)(Qe=>Te({id:Q.labelId,htmlFor:Q.toggleButtonId},Qe),[Q]),_t=(0,Kt.useCallback)(function(Qe,Ge){let Tr=Qe===void 0?{}:Qe,{onMouseLeave:st,refKey:pt="ref",onKeyDown:Rt,onBlur:St,ref:Ot}=Tr,sr=xn(Tr,["onMouseLeave","refKey","onKeyDown","onBlur","ref"]),{suppressRefError:Ft=!1}=Ge===void 0?{}:Ge,Jt=ve.current.state,dr=qr=>{let Ce=hP(qr);Ce&&Je[Ce]?Je[Ce](qr):lit(Ce)&&x({type:ple,key:Ce,getItemNodeFromIndex:ye})},Er=()=>{if(G.current===!1){G.current=!0;return}!Se.current.isMouseDown&&x({type:m7})},Cr=()=>{x({type:Sit})};return ge("getMenuProps",Ft,pt,q),Te(Mt(Te({[pt]:em(Ot,qr=>{q.current=qr}),id:Q.menuId,role:"listbox","aria-labelledby":Q.labelId,tabIndex:-1},Jt.isOpen&&Jt.highlightedIndex>-1&&{"aria-activedescendant":Q.getItemId(Jt.highlightedIndex)}),{onMouseLeave:Ps(st,Cr),onKeyDown:Ps(Rt,dr),onBlur:Ps(St,Er)}),sr)},[x,ve,Je,Se,ge,Q,ye]),We=(0,Kt.useCallback)(function(Qe,Ge){let Er=Qe===void 0?{}:Qe,{onClick:st,onKeyDown:pt,refKey:Rt="ref",ref:St}=Er,Ot=xn(Er,["onClick","onKeyDown","refKey","ref"]),{suppressRefError:sr=!1}=Ge===void 0?{}:Ge,Ft=()=>{x({type:Iit})},Jt=Cr=>{let Tr=hP(Cr);Tr&&Re[Tr]?Re[Tr](Cr):lit(Tr)&&x({type:mle,key:Tr,getItemNodeFromIndex:ye})},dr=Te({[Rt]:em(St,Cr=>{R.current=Cr}),id:Q.toggleButtonId,"aria-haspopup":"listbox","aria-expanded":ve.current.state.isOpen,"aria-labelledby":`${Q.labelId} ${Q.toggleButtonId}`},Ot);return Ot.disabled||(dr.onClick=Ps(st,Ft),dr.onKeyDown=Ps(pt,Jt)),ge("getToggleButtonProps",sr,Rt,R),dr},[x,ve,Re,ge,Q,ye]),De=(0,Kt.useCallback)(function(Qe){let Ce=Qe===void 0?{}:Qe,{item:Ge,index:st,onMouseMove:pt,onClick:Rt,refKey:St="ref",ref:Ot,disabled:sr}=Ce,Ft=xn(Ce,["item","index","onMouseMove","onClick","refKey","ref","disabled"]),{state:Jt,props:dr}=ve.current,Er=()=>{st!==Jt.highlightedIndex&&(we.current=!1,x({type:Tit,index:st,disabled:sr}))},Cr=()=>{x({type:fle,index:st})},Tr=ele(st,Ge,dr.items);if(Tr<0)throw new Error("Pass either item or item index in getItemProps!");let qr=Te({disabled:sr,role:"option","aria-selected":`${Tr===Jt.highlightedIndex}`,id:Q.getItemId(Tr),[St]:em(Ot,Ze=>{Ze&&(B.current[Q.getItemId(Tr)]=Ze)})},Ft);return sr||(qr.onClick=Ps(Rt,Cr)),qr.onMouseMove=Ps(pt,Er),qr},[x,ve,we,Q]);return{getToggleButtonProps:We,getLabelProps:ct,getMenuProps:_t,getItemProps:De,toggleMenu:tt,openMenu:Xe,closeMenu:Et,setHighlightedIndex:Pt,selectItem:Lt,reset:Gt,setInputValue:nt,highlightedIndex:O,isOpen:M,selectedItem:D,inputValue:k}}var vle=0,yle=1,_le=2,ble=3,xle=4,wle=5,Ele=6,g7=7,Lit=8,kit=9,Sle=10,Rit=11,jit=12,qit=13,zit=14,Fit=15,Tle=16,Uit=17,Bit=18,Ile=19,Vit=Object.freeze({__proto__:null,InputKeyDownArrowDown:vle,InputKeyDownArrowUp:yle,InputKeyDownEscape:_le,InputKeyDownHome:ble,InputKeyDownEnd:xle,InputKeyDownEnter:wle,InputChange:Ele,InputBlur:g7,MenuMouseLeave:Lit,ItemMouseMove:kit,ItemClick:Sle,ToggleButtonClick:Rit,FunctionToggleMenu:jit,FunctionOpenMenu:qit,FunctionCloseMenu:zit,FunctionSetHighlightedIndex:Fit,FunctionSelectItem:Tle,FunctionSetInputValue:Uit,FunctionReset:Bit,ControlledPropUpdatedSelectedItem:Ile});function u3r(e){let t=bit(e),{selectedItem:r}=t,{inputValue:n}=t;return n===""&&r&&e.defaultInputValue===void 0&&e.initialInputValue===void 0&&e.inputValue===void 0&&(n=e.itemToString(r)),Mt(Te({},t),{inputValue:n})}var xUn={items:rr.default.array.isRequired,itemToString:rr.default.func,getA11yStatusMessage:rr.default.func,getA11ySelectionMessage:rr.default.func,circularNavigation:rr.default.bool,highlightedIndex:rr.default.number,defaultHighlightedIndex:rr.default.number,initialHighlightedIndex:rr.default.number,isOpen:rr.default.bool,defaultIsOpen:rr.default.bool,initialIsOpen:rr.default.bool,selectedItem:rr.default.any,initialSelectedItem:rr.default.any,defaultSelectedItem:rr.default.any,inputValue:rr.default.string,defaultInputValue:rr.default.string,initialInputValue:rr.default.string,id:rr.default.string,labelId:rr.default.string,menuId:rr.default.string,getItemId:rr.default.func,inputId:rr.default.string,toggleButtonId:rr.default.string,stateReducer:rr.default.func,onSelectedItemChange:rr.default.func,onHighlightedIndexChange:rr.default.func,onStateChange:rr.default.func,onIsOpenChange:rr.default.func,onInputValueChange:rr.default.func,environment:rr.default.shape({addEventListener:rr.default.func,removeEventListener:rr.default.func,document:rr.default.shape({getElementById:rr.default.func,activeElement:rr.default.any,body:rr.default.any})})};function c3r(e,t,r){let n=(0,Kt.useRef)(),[o,i]=yit(e,t,r);return(0,Kt.useEffect)(()=>{dit(r,"selectedItem")&&(n.current!==r.selectedItem&&i({type:Ile,inputValue:r.itemToString(r.selectedItem)}),n.current=o.selectedItem===n.current?r.selectedItem:o.selectedItem)}),[d7(o,r),i]}var p3r=gP,f3r=Mt(Te({},dP),{getA11yStatusMessage:KLr,circularNavigation:!0});function d3r(e,t){let{type:r,props:n,shiftKey:o}=t,i;switch(r){case Sle:i={isOpen:Hu(n,"isOpen"),highlightedIndex:Hu(n,"highlightedIndex"),selectedItem:n.items[t.index],inputValue:n.itemToString(n.items[t.index])};break;case vle:e.isOpen?i={highlightedIndex:mP(o?5:1,e.highlightedIndex,n.items.length,t.getItemNodeFromIndex,n.circularNavigation)}:i={highlightedIndex:y2(n,e,1,t.getItemNodeFromIndex),isOpen:n.items.length>=0};break;case yle:e.isOpen?i={highlightedIndex:mP(o?-5:-1,e.highlightedIndex,n.items.length,t.getItemNodeFromIndex,n.circularNavigation)}:i={highlightedIndex:y2(n,e,-1,t.getItemNodeFromIndex),isOpen:n.items.length>=0};break;case wle:i=Te({},e.isOpen&&e.highlightedIndex>=0&&{selectedItem:n.items[e.highlightedIndex],isOpen:Hu(n,"isOpen"),highlightedIndex:Hu(n,"highlightedIndex"),inputValue:n.itemToString(n.items[e.highlightedIndex])});break;case _le:i=Te({isOpen:!1,highlightedIndex:-1},!e.isOpen&&{selectedItem:null,inputValue:""});break;case ble:i={highlightedIndex:ub(1,0,n.items.length,t.getItemNodeFromIndex,!1)};break;case xle:i={highlightedIndex:ub(-1,n.items.length-1,n.items.length,t.getItemNodeFromIndex,!1)};break;case g7:i=Te({isOpen:!1,highlightedIndex:-1},e.highlightedIndex>=0&&t.selectItem&&{selectedItem:n.items[e.highlightedIndex],inputValue:n.itemToString(n.items[e.highlightedIndex])});break;case Ele:i={isOpen:!0,highlightedIndex:Hu(n,"highlightedIndex"),inputValue:t.inputValue};break;case Tle:i={selectedItem:t.selectedItem,inputValue:n.itemToString(t.selectedItem)};break;case Ile:i={inputValue:t.inputValue};break;default:return Eit(e,t,Vit)}return Te(Te({},e),i)}y7.stateChangeTypes=Vit;function y7(e){e===void 0&&(e={}),p3r(e,y7);let t=Te(Te({},f3r),e),{initialIsOpen:r,defaultIsOpen:n,items:o,scrollIntoView:i,environment:a,getA11yStatusMessage:u,getA11ySelectionMessage:d,itemToString:h}=t,v=u3r(t),[b,x]=c3r(d3r,v,t),{isOpen:M,highlightedIndex:O,selectedItem:D,inputValue:k}=b,R=(0,Kt.useRef)(null),q=(0,Kt.useRef)({}),B=(0,Kt.useRef)(null),G=(0,Kt.useRef)(null),re=(0,Kt.useRef)(null),Q=(0,Kt.useRef)(!0),ie=vit(t),me=(0,Kt.useRef)(),ve=v7({state:b,props:t}),ye=(0,Kt.useCallback)(Ge=>q.current[ie.getItemId(Ge)],[ie]);h7(u,[M,O,k,o],Te({isInitialMount:Q.current,previousResultCount:me.current,items:o,environment:a,itemToString:h},b)),h7(d,[D],Te({isInitialMount:Q.current,previousResultCount:me.current,items:o,environment:a,itemToString:h},b));let we=wit({menuElement:R.current,highlightedIndex:O,isOpen:M,itemRefs:q,scrollIntoView:i,getItemNodeFromIndex:ye});nle({isInitialMount:Q.current,props:t,state:b}),(0,Kt.useEffect)(()=>{(r||n||M)&&B.current&&B.current.focus()},[]),(0,Kt.useEffect)(()=>{Q.current||(me.current=o.length)});let Se=xit(M,[re,R,G],a,()=>{x({type:g7,selectItem:!1})}),ge=rle("getInputProps","getComboboxProps","getMenuProps");(0,Kt.useEffect)(()=>{Q.current=!1},[]),(0,Kt.useEffect)(()=>{M||(q.current={})},[M]);let Re=(0,Kt.useMemo)(()=>({ArrowDown(Ge){Ge.preventDefault(),x({type:vle,shiftKey:Ge.shiftKey,getItemNodeFromIndex:ye})},ArrowUp(Ge){Ge.preventDefault(),x({type:yle,shiftKey:Ge.shiftKey,getItemNodeFromIndex:ye})},Home(Ge){ve.current.state.isOpen&&(Ge.preventDefault(),x({type:ble,getItemNodeFromIndex:ye}))},End(Ge){ve.current.state.isOpen&&(Ge.preventDefault(),x({type:xle,getItemNodeFromIndex:ye}))},Escape(Ge){let st=ve.current.state;(st.isOpen||st.inputValue||st.selectedItem||st.highlightedIndex>-1)&&(Ge.preventDefault(),x({type:_le}))},Enter(Ge){let st=ve.current.state;!st.isOpen||st.highlightedIndex<0||Ge.which===229||(Ge.preventDefault(),x({type:wle,getItemNodeFromIndex:ye}))}}),[x,ve,ye]),Je=(0,Kt.useCallback)(Ge=>Te({id:ie.labelId,htmlFor:ie.inputId},Ge),[ie]),tt=(0,Kt.useCallback)(function(Ge,st){let Ft=Ge===void 0?{}:Ge,{onMouseLeave:pt,refKey:Rt="ref",ref:St}=Ft,Ot=xn(Ft,["onMouseLeave","refKey","ref"]),{suppressRefError:sr=!1}=st===void 0?{}:st;return ge("getMenuProps",sr,Rt,R),Te({[Rt]:em(St,Jt=>{R.current=Jt}),id:ie.menuId,role:"listbox","aria-labelledby":ie.labelId,onMouseLeave:Ps(pt,()=>{x({type:Lit})})},Ot)},[x,ge,ie]),Et=(0,Kt.useCallback)(function(Ge){let jt=Ge===void 0?{}:Ge,{item:st,index:pt,refKey:Rt="ref",ref:St,onMouseMove:Ot,onMouseDown:sr,onClick:Ft,onPress:Jt,disabled:dr}=jt,Er=xn(jt,["item","index","refKey","ref","onMouseMove","onMouseDown","onClick","onPress","disabled"]),{props:Cr,state:Tr}=ve.current,qr=ele(pt,st,Cr.items);if(qr<0)throw new Error("Pass either item or item index in getItemProps!");let Ce="onClick",Ze=Ft,et=()=>{pt!==Tr.highlightedIndex&&(we.current=!1,x({type:kit,index:pt,disabled:dr}))},qt=()=>{x({type:Sle,index:pt})},Bt=$t=>$t.preventDefault();return Te(Mt(Te({[Rt]:em(St,$t=>{$t&&(q.current[ie.getItemId(qr)]=$t)}),disabled:dr,role:"option","aria-selected":`${qr===Tr.highlightedIndex}`,id:ie.getItemId(qr)},!dr&&{[Ce]:Ps(Ze,qt)}),{onMouseMove:Ps(Ot,et),onMouseDown:Ps(sr,Bt)}),Er)},[x,ve,we,ie]),Xe=(0,Kt.useCallback)(function(Ge){let Ft=Ge===void 0?{}:Ge,{onClick:st,onPress:pt,refKey:Rt="ref",ref:St}=Ft,Ot=xn(Ft,["onClick","onPress","refKey","ref"]),sr=()=>{x({type:Rit}),!ve.current.state.isOpen&&B.current&&B.current.focus()};return Te(Te({[Rt]:em(St,Jt=>{G.current=Jt}),id:ie.toggleButtonId,tabIndex:-1},!Ot.disabled&&{onClick:Ps(st,sr)}),Ot)},[x,ve,ie]),Pt=(0,Kt.useCallback)(function(Ge,st){let qt=Ge===void 0?{}:Ge,{onKeyDown:pt,onChange:Rt,onInput:St,onBlur:Ot,onChangeText:sr,refKey:Ft="ref",ref:Jt}=qt,dr=xn(qt,["onKeyDown","onChange","onInput","onBlur","onChangeText","refKey","ref"]),{suppressRefError:Er=!1}=st===void 0?{}:st;ge("getInputProps",Er,Ft,B);let Cr=ve.current.state,Tr=Bt=>{let jt=hP(Bt);jt&&Re[jt]&&Re[jt](Bt)},qr=Bt=>{x({type:Ele,inputValue:Bt.target.value})},Ce=()=>{Cr.isOpen&&!Se.current.isMouseDown&&x({type:g7,selectItem:!0})},Ze="onChange",et={};return dr.disabled||(et={[Ze]:Ps(Rt,St,qr),onKeyDown:Ps(pt,Tr),onBlur:Ps(Ot,Ce)}),Te(Te(Mt(Te({[Ft]:em(Jt,Bt=>{B.current=Bt}),id:ie.inputId,"aria-autocomplete":"list","aria-controls":ie.menuId},Cr.isOpen&&Cr.highlightedIndex>-1&&{"aria-activedescendant":ie.getItemId(Cr.highlightedIndex)}),{"aria-labelledby":ie.labelId,autoComplete:"off",value:Cr.inputValue}),et),dr)},[x,Re,ve,Se,ge,ie]),Lt=(0,Kt.useCallback)(function(Ge,st){let sr=Ge===void 0?{}:Ge,{refKey:pt="ref",ref:Rt}=sr,St=xn(sr,["refKey","ref"]),{suppressRefError:Ot=!1}=st===void 0?{}:st;return ge("getComboboxProps",Ot,pt,re),Te({[pt]:em(Rt,Ft=>{re.current=Ft}),role:"combobox","aria-haspopup":"listbox","aria-owns":ie.menuId,"aria-expanded":ve.current.state.isOpen},St)},[ve,ge,ie]),Gt=(0,Kt.useCallback)(()=>{x({type:jit})},[x]),nt=(0,Kt.useCallback)(()=>{x({type:zit})},[x]),ct=(0,Kt.useCallback)(()=>{x({type:qit})},[x]),_t=(0,Kt.useCallback)(Ge=>{x({type:Fit,highlightedIndex:Ge})},[x]),We=(0,Kt.useCallback)(Ge=>{x({type:Tle,selectedItem:Ge})},[x]),De=(0,Kt.useCallback)(Ge=>{x({type:Uit,inputValue:Ge})},[x]),Qe=(0,Kt.useCallback)(()=>{x({type:Bit})},[x]);return{getItemProps:Et,getLabelProps:Je,getMenuProps:tt,getInputProps:Pt,getComboboxProps:Lt,getToggleButtonProps:Xe,toggleMenu:Gt,openMenu:ct,closeMenu:nt,setHighlightedIndex:_t,setInputValue:De,selectItem:We,reset:Qe,highlightedIndex:O,isOpen:M,selectedItem:D,inputValue:k}}var Git={activeIndex:-1,selectedItems:[]};function cit(e,t){return fP(e,t,Git)}function pit(e,t){return Hu(e,t,Git)}function h3r(e){let t=cit(e,"activeIndex"),r=cit(e,"selectedItems");return{activeIndex:t,selectedItems:r}}function fit(e){if(e.shiftKey||e.metaKey||e.ctrlKey||e.altKey)return!1;let t=e.target;return!(t instanceof HTMLInputElement&&t.value!==""&&(t.selectionStart!==0||t.selectionEnd!==0))}function m3r(e){let{removedSelectedItem:t,itemToString:r}=e;return`${r(t)} has been removed.`}var wUn={selectedItems:rr.default.array,initialSelectedItems:rr.default.array,defaultSelectedItems:rr.default.array,itemToString:rr.default.func,getA11yRemovalMessage:rr.default.func,stateReducer:rr.default.func,activeIndex:rr.default.number,initialActiveIndex:rr.default.number,defaultActiveIndex:rr.default.number,onActiveIndexChange:rr.default.func,onSelectedItemsChange:rr.default.func,keyNavigationNext:rr.default.string,keyNavigationPrevious:rr.default.string,environment:rr.default.shape({addEventListener:rr.default.func,removeEventListener:rr.default.func,document:rr.default.shape({getElementById:rr.default.func,activeElement:rr.default.any,body:rr.default.any})})},g3r={itemToString:dP.itemToString,stateReducer:dP.stateReducer,environment:dP.environment,getA11yRemovalMessage:m3r,keyNavigationNext:"ArrowRight",keyNavigationPrevious:"ArrowLeft"},v3r=gP,Mle=0,Cle=1,Ale=2,Ole=3,Ple=4,Nle=5,Dle=6,Lle=7,kle=8,Rle=9,jle=10,qle=11,zle=12,y3r=Object.freeze({__proto__:null,SelectedItemClick:Mle,SelectedItemKeyDownDelete:Cle,SelectedItemKeyDownBackspace:Ale,SelectedItemKeyDownNavigationNext:Ole,SelectedItemKeyDownNavigationPrevious:Ple,DropdownKeyDownNavigationPrevious:Nle,DropdownKeyDownBackspace:Dle,DropdownClick:Lle,FunctionAddSelectedItem:kle,FunctionRemoveSelectedItem:Rle,FunctionSetSelectedItems:jle,FunctionSetActiveIndex:qle,FunctionReset:zle});function _3r(e,t){let{type:r,index:n,props:o,selectedItem:i}=t,{activeIndex:a,selectedItems:u}=e,d;switch(r){case Mle:d={activeIndex:n};break;case Ple:d={activeIndex:a-1<0?0:a-1};break;case Ole:d={activeIndex:a+1>=u.length?-1:a+1};break;case Ale:case Cle:{let h=a;u.length===1?h=-1:a===u.length-1&&(h=u.length-2),d={selectedItems:[...u.slice(0,a),...u.slice(a+1)],activeIndex:h};break}case Nle:d={activeIndex:u.length-1};break;case Dle:d={selectedItems:u.slice(0,u.length-1)};break;case kle:d={selectedItems:[...u,i]};break;case Lle:d={activeIndex:-1};break;case Rle:{let h=a,v=u.indexOf(i);v>=0&&(u.length===1?h=-1:v===u.length-1&&(h=u.length-2),d={selectedItems:[...u.slice(0,v),...u.slice(v+1)],activeIndex:h});break}case jle:{let{selectedItems:h}=t;d={selectedItems:h};break}case qle:{let{activeIndex:h}=t;d={activeIndex:h};break}case zle:d={activeIndex:pit(o,"activeIndex"),selectedItems:pit(o,"selectedItems")};break;default:throw new Error("Reducer called without proper action type.")}return Te(Te({},e),d)}Hit.stateChangeTypes=y3r;function Hit(e){e===void 0&&(e={}),v3r(e,Hit);let t=Te(Te({},g3r),e),{getA11yRemovalMessage:r,itemToString:n,environment:o,keyNavigationNext:i,keyNavigationPrevious:a}=t,[u,d]=_it(_3r,h3r(t),t),{activeIndex:h,selectedItems:v}=u,b=(0,Kt.useRef)(!0),x=(0,Kt.useRef)(null),M=(0,Kt.useRef)(v),O=(0,Kt.useRef)();O.current=[];let D=v7({state:u,props:t});(0,Kt.useEffect)(()=>{if(!b.current){if(v.length<M.current.length){let ye=M.current.find(we=>v.indexOf(we)<0);hit(r({itemToString:n,resultCount:v.length,removedSelectedItem:ye,activeIndex:h,activeSelectedItem:v[h]}),o.document)}M.current=v}},[v.length]),(0,Kt.useEffect)(()=>{b.current||(h===-1&&x.current?x.current.focus():O.current[h]&&O.current[h].focus())},[h]),nle({isInitialMount:b.current,props:t,state:u});let k=rle("getDropdownProps");(0,Kt.useEffect)(()=>{b.current=!1},[]);let R=(0,Kt.useMemo)(()=>({[a](){d({type:Ple})},[i](){d({type:Ole})},Delete(){d({type:Cle})},Backspace(){d({type:Ale})}}),[d,i,a]),q=(0,Kt.useMemo)(()=>({[a](ye){fit(ye)&&d({type:Nle})},Backspace(ye){fit(ye)&&d({type:Dle})}}),[d,a]),B=(0,Kt.useCallback)(function(ye){let nt=ye===void 0?{}:ye,{refKey:we="ref",ref:Se,onClick:ge,onKeyDown:Re,selectedItem:Je,index:tt}=nt,Et=xn(nt,["refKey","ref","onClick","onKeyDown","selectedItem","index"]),{state:Xe}=D.current;if(ele(tt,Je,Xe.selectedItems)<0)throw new Error("Pass either selectedItem or index in getSelectedItemProps!");let Lt=()=>{d({type:Mle,index:tt})},Gt=ct=>{let _t=hP(ct);_t&&R[_t]&&R[_t](ct)};return Te({[we]:em(Se,ct=>{ct&&O.current.push(ct)}),tabIndex:tt===Xe.activeIndex?0:-1,onClick:Ps(ge,Lt),onKeyDown:Ps(Re,Gt)},Et)},[d,D,R]),G=(0,Kt.useCallback)(function(ye,we){let Gt=ye===void 0?{}:ye,{refKey:Se="ref",ref:ge,onKeyDown:Re,onClick:Je,preventKeyAction:tt=!1}=Gt,Et=xn(Gt,["refKey","ref","onKeyDown","onClick","preventKeyAction"]),{suppressRefError:Xe=!1}=we===void 0?{}:we;k("getDropdownProps",Xe,Se,x);let Pt=nt=>{let ct=hP(nt);ct&&q[ct]&&q[ct](nt)},Lt=()=>{d({type:Lle})};return Te(Te({[Se]:em(ge,nt=>{nt&&(x.current=nt)})},!tt&&{onKeyDown:Ps(Re,Pt),onClick:Ps(Je,Lt)}),Et)},[d,q,k]),re=(0,Kt.useCallback)(ye=>{d({type:kle,selectedItem:ye})},[d]),Q=(0,Kt.useCallback)(ye=>{d({type:Rle,selectedItem:ye})},[d]),ie=(0,Kt.useCallback)(ye=>{d({type:jle,selectedItems:ye})},[d]),me=(0,Kt.useCallback)(ye=>{d({type:qle,activeIndex:ye})},[d]),ve=(0,Kt.useCallback)(()=>{d({type:zle})},[d]);return{getSelectedItemProps:B,getDropdownProps:G,addSelectedItem:re,removeSelectedItem:Q,setSelectedItems:ie,setActiveIndex:me,reset:ve,selectedItems:v,activeIndex:h}}var h0=Z(xt(),1);function Fle({buttonProps:e,fetchInputItems:t,label:r,itemToString:n,inputProps:o,onSelectedItemChange:i,timeout:a=300}){let[u,d]=(0,Wu.useState)([]),[h,v]=(0,Wu.useState)(void 0),b=(0,Wu.useRef)(),x=(0,Wu.useRef)(null),M=Re=>{clearTimeout(x.current),x.current=setTimeout(()=>{t(Re).then(Je=>d(Je))},a)},O=({inputValue:Re})=>{h!==void 0&&v(void 0),M(Re)},D=({selectedItem:Re})=>{i!==void 0&&i(Re),v(Re)},{isOpen:k,getToggleButtonProps:R,getLabelProps:q,getMenuProps:B,getInputProps:G,getComboboxProps:re,getItemProps:Q,highlightedIndex:ie}=y7({items:u,itemToString:n,onInputValueChange:O,onSelectedItemChange:D}),Se=e!=null?e:{},{onClick:me}=Se,ve=xn(Se,["onClick"]),ge=G(),{ref:ye}=ge,we=xn(ge,["ref"]);return Wu.default.createElement("div",{className:"vkf-autocomplete-container"},Wu.default.createElement("label",Mt(Te({},q()),{id:we["aria-labelledby"],className:"visually-hidden"}),r!==void 0?r:o.placeholder),Wu.default.createElement("div",Te({className:"form-group"},re()),Wu.default.createElement("input",Te(Mt(Te({},we),{ref:Re=>{ye(Re),b.current=Re},type:"text"}),o)),Wu.default.createElement("button",Te(Te(Mt(Te({type:"button"},R()),{"aria-label":"toggle menu"}),ve),me!==void 0?{onClick:()=>{me(h,b.current!==null?b.current.value:"")}}:{}),"\u2193")),Wu.default.createElement("div",{className:"autocomplete-dropdown"},Wu.default.createElement("ul",Mt(Te({className:"autocomplete-result-list"},B()),{id:we["aria-controls"]}),k&&u.map((Re,Je)=>Wu.default.createElement("li",Te({className:Dt("ui-menu-item",ie===Je&&"highlighted",h===Re&&"selected"),key:`${Re.label}${Je}`},Q({item:Re,index:Je})),Re.label)))))}Fle.propTypes={buttonProps:h0.default.object,fetchInputItems:h0.default.func,label:h0.default.string,inputProps:h0.default.object,itemToString:h0.default.func,onSelectedItemChange:h0.default.func,timeout:h0.default.number};var Wit=Z(Ph(),1),Ule=(e,t,r)=>{let n=e+"?format=json&q="+t;return Wit.default.get(n).then(o=>{let a=o.data.map(u=>({label:u.display_name,value:u.display_name,lonlat:{x:parseFloat(u.lon),y:parseFloat(u.lat)},type:u.type}));return r!==void 0&&r(),a})};var b3r=e=>e?e.label:"",$it=e=>{let{onSelectPosition:t,searchUrl:r}=e,[n,o]=(0,cb.useState)(!1),i=zr(Os),a=(0,cb.useCallback)(d=>(o(!0),Ule(r,d,()=>{o(!1)})),[r]),u=(d,h)=>{d!==void 0?t(d):Ule(r,h).then(v=>{if(v.length>0)t(v[0]);else throw new Error(fe("placenamesearch-unknown-placename"))}).catch(()=>{i({id:"placenamesearch",type:"warning",text:fe("placenamesearch-unknown-placename")})})};return cb.default.createElement("div",{className:"gazetteersearch-container"},cb.default.createElement(Fle,{buttonProps:{className:"form-control gazetteersearch-submit",onClick:u,"aria-label":fe("placenamesearch-submit"),title:fe("placenamesearch-submit")},fetchInputItems:a,inputProps:{className:`form-control gazetteersearch-input ${n?"loading":""}`,placeholder:fe("placenamesearch-placeholder")},itemToString:b3r,onSelectedItemChange:u}))};$it.propTypes={onSelectPosition:Ble.default.func.isRequired,searchUrl:Ble.default.string.isRequired};var Zit=$it;var Yit=Z(xt(),1),Kit=({searchUrl:e})=>{let t=yt(tr),r=(0,_7.useCallback)(n=>{if(t){let o=[n.lonlat.x,n.lonlat.y];t.flyTo({center:o,zoom:12})}},[t]);return _7.default.createElement(Zit,{onSelectPosition:r,searchUrl:e})};Kit.propTypes={searchUrl:Yit.default.string.isRequired};var b7=Kit;var Xit=({customQuery:e,MapSearchListItemComponent:t,mosaicMode:r})=>{let n=yt(dWe);return m0.default.createElement("div",{className:Dt("vkf-spatialsearch-root",!n&&"in")},m0.default.createElement("div",{className:"spatialsearch-inner-container"},m0.default.createElement("div",{className:"spatialsearch-content-panel"},m0.default.createElement("div",{className:"body-container"},m0.default.createElement(b7,{searchUrl:vr.getNominatimUrl()}),m0.default.createElement(u7,null),m0.default.createElement(att,{customQuery:e,MapSearchListItemComponent:t,mosaicMode:r})))))};Xit.propTypes={customQuery:x7.default.array,MapSearchListItemComponent:x7.default.elementType,mosaicMode:x7.default.bool};var Qit=Xit;var so=Z(Pe(),1),r9=Z(xt(),1);var g0=Z(Pe(),1),pb=Z(xt(),1);var Jit=({isOpen:e,onClose:t,modalClassName:r,renderContent:n,renderFooter:o,title:i})=>g0.default.createElement(wg,{className:"vkf-modal",onHide:t,show:e,dialogClassName:r},g0.default.createElement(YO,null,g0.default.createElement(KO,null,i),g0.default.createElement(dn,{className:"close-button",onClick:t},g0.default.createElement(Fr,{name:"close"}))),g0.default.createElement(WO,null,n()),o!==void 0&&g0.default.createElement(ZO,null,o()));Jit.propTypes={isOpen:pb.default.bool,onClose:pb.default.func,modalClassName:pb.default.string,renderContent:pb.default.func,renderFooter:pb.default.func,title:pb.default.string};var eat=Jit;var wf=eat;var R2=Z(Pe(),1),Xlt=Z(Ph(),1),LP=Z(xt(),1);var x3r=function(){function e(t){this.propagationStopped,this.defaultPrevented,this.type=t,this.target=null}return e.prototype.preventDefault=function(){this.defaultPrevented=!0},e.prototype.stopPropagation=function(){this.propagationStopped=!0},e}();var du=x3r;var Gg={PROPERTYCHANGE:"propertychange"};var w3r=function(){function e(){this.disposed=!1}return e.prototype.dispose=function(){this.disposed||(this.disposed=!0,this.disposeInternal())},e.prototype.disposeInternal=function(){},e}(),v0=w3r;function vP(e,t){return e>t?1:e<t?-1:0}function _2(e,t,r){var n=e.length;if(e[0]<=t)return 0;if(t<=e[n-1])return n-1;var o=void 0;if(r>0){for(o=1;o<n;++o)if(e[o]<t)return o-1}else if(r<0){for(o=1;o<n;++o)if(e[o]<=t)return o}else for(o=1;o<n;++o){if(e[o]==t)return o;if(e[o]<t)return typeof r=="function"?r(t,e[o-1],e[o])>0?o-1:o:e[o-1]-t<t-e[o]?o-1:o}return n-1}function tat(e,t){for(var r=Array.isArray(t)?t:[t],n=r.length,o=0;o<n;o++)e[e.length]=r[o]}function w7(e,t){var r=e.length;if(r!==t.length)return!1;for(var n=0;n<r;n++)if(e[n]!==t[n])return!1;return!0}function rat(e,t,r){var n=t||vP;return e.every(function(o,i){if(i===0)return!0;var a=n(e[i-1],o);return!(a>0||r&&a===0)})}function y0(){return!0}function Hg(){return!1}function Wg(){}function nat(e){var t=!1,r,n,o;return function(){var i=Array.prototype.slice.call(arguments);return(!t||this!==o||!w7(i,n))&&(t=!0,o=this,n=i,r=e.apply(this,arguments)),r}}var E3r=function(){var e=function(t,r){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,o){n.__proto__=o}||function(n,o){for(var i in o)Object.prototype.hasOwnProperty.call(o,i)&&(n[i]=o[i])},e(t,r)};return function(t,r){if(typeof r!="function"&&r!==null)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");e(t,r);function n(){this.constructor=t}t.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),S3r=function(e){E3r(t,e);function t(r){var n=e.call(this)||this;return n.eventTarget_=r,n.pendingRemovals_=null,n.dispatching_=null,n.listeners_=null,n}return t.prototype.addEventListener=function(r,n){if(!(!r||!n)){var o=this.listeners_||(this.listeners_={}),i=o[r]||(o[r]=[]);i.indexOf(n)===-1&&i.push(n)}},t.prototype.dispatchEvent=function(r){var n=typeof r=="string",o=n?r:r.type,i=this.listeners_&&this.listeners_[o];if(i){var a=n?new du(r):r;a.target||(a.target=this.eventTarget_||this);var u=this.dispatching_||(this.dispatching_={}),d=this.pendingRemovals_||(this.pendingRemovals_={});o in u||(u[o]=0,d[o]=0),++u[o];for(var h,v=0,b=i.length;v<b;++v)if("handleEvent"in i[v]?h=i[v].handleEvent(a):h=i[v].call(this,a),h===!1||a.propagationStopped){h=!1;break}if(--u[o]===0){var x=d[o];for(delete d[o];x--;)this.removeEventListener(o,Wg);delete u[o]}return h}},t.prototype.disposeInternal=function(){this.listeners_&&ff(this.listeners_)},t.prototype.getListeners=function(r){return this.listeners_&&this.listeners_[r]||void 0},t.prototype.hasListener=function(r){return this.listeners_?r?r in this.listeners_:Object.keys(this.listeners_).length>0:!1},t.prototype.removeEventListener=function(r,n){var o=this.listeners_&&this.listeners_[r];if(o){var i=o.indexOf(n);i!==-1&&(this.pendingRemovals_&&r in this.pendingRemovals_?(o[i]=Wg,++this.pendingRemovals_[r]):(o.splice(i,1),o.length===0&&delete this.listeners_[r]))}},t}(v0),Ef=S3r;var Or={CHANGE:"change",ERROR:"error",BLUR:"blur",CLEAR:"clear",CONTEXTMENU:"contextmenu",CLICK:"click",DBLCLICK:"dblclick",DRAGENTER:"dragenter",DRAGOVER:"dragover",DROP:"drop",FOCUS:"focus",KEYDOWN:"keydown",KEYPRESS:"keypress",LOAD:"load",RESIZE:"resize",TOUCHMOVE:"touchmove",WHEEL:"wheel"};function oo(e,t,r,n,o){if(n&&n!==e&&(r=r.bind(n)),o){var i=r;r=function(){e.removeEventListener(t,r),i.apply(this,arguments)}}var a={target:e,type:t,listener:r};return e.addEventListener(t,r),a}function b2(e,t,r,n){return oo(e,t,r,n,!0)}function $o(e){e&&e.target&&(e.target.removeEventListener(e.type,e.listener),ff(e))}var T3r=function(){var e=function(t,r){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,o){n.__proto__=o}||function(n,o){for(var i in o)Object.prototype.hasOwnProperty.call(o,i)&&(n[i]=o[i])},e(t,r)};return function(t,r){if(typeof r!="function"&&r!==null)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");e(t,r);function n(){this.constructor=t}t.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),E7=function(e){T3r(t,e);function t(){var r=e.call(this)||this;return r.on=r.onInternal,r.once=r.onceInternal,r.un=r.unInternal,r.revision_=0,r}return t.prototype.changed=function(){++this.revision_,this.dispatchEvent(Or.CHANGE)},t.prototype.getRevision=function(){return this.revision_},t.prototype.onInternal=function(r,n){if(Array.isArray(r)){for(var o=r.length,i=new Array(o),a=0;a<o;++a)i[a]=oo(this,r[a],n);return i}else return oo(this,r,n)},t.prototype.onceInternal=function(r,n){var o;if(Array.isArray(r)){var i=r.length;o=new Array(i);for(var a=0;a<i;++a)o[a]=b2(this,r[a],n)}else o=b2(this,r,n);return n.ol_key=o,o},t.prototype.unInternal=function(r,n){var o=n.ol_key;if(o)I3r(o);else if(Array.isArray(r))for(var i=0,a=r.length;i<a;++i)this.removeEventListener(r[i],n);else this.removeEventListener(r,n)},t}(Ef);E7.prototype.on;E7.prototype.once;E7.prototype.un;function I3r(e){if(Array.isArray(e))for(var t=0,r=e.length;t<r;++t)$o(e[t]);else $o(e)}var S7=E7;var iat=function(){var e=function(t,r){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,o){n.__proto__=o}||function(n,o){for(var i in o)Object.prototype.hasOwnProperty.call(o,i)&&(n[i]=o[i])},e(t,r)};return function(t,r){if(typeof r!="function"&&r!==null)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");e(t,r);function n(){this.constructor=t}t.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),oat=function(e){iat(t,e);function t(r,n,o){var i=e.call(this,r)||this;return i.key=n,i.oldValue=o,i}return t}(du);var M3r=function(e){iat(t,e);function t(r){var n=e.call(this)||this;return n.on,n.once,n.un,Ka(n),n.values_=null,r!==void 0&&n.setProperties(r),n}return t.prototype.get=function(r){var n;return this.values_&&this.values_.hasOwnProperty(r)&&(n=this.values_[r]),n},t.prototype.getKeys=function(){return this.values_&&Object.keys(this.values_)||[]},t.prototype.getProperties=function(){return this.values_&&Ei({},this.values_)||{}},t.prototype.hasProperties=function(){return!!this.values_},t.prototype.notify=function(r,n){var o;o="change:".concat(r),this.hasListener(o)&&this.dispatchEvent(new oat(o,r,n)),o=Gg.PROPERTYCHANGE,this.hasListener(o)&&this.dispatchEvent(new oat(o,r,n))},t.prototype.addChangeListener=function(r,n){this.addEventListener("change:".concat(r),n)},t.prototype.removeChangeListener=function(r,n){this.removeEventListener("change:".concat(r),n)},t.prototype.set=function(r,n,o){var i=this.values_||(this.values_={});if(o)i[r]=n;else{var a=i[r];i[r]=n,a!==n&&this.notify(r,a)}},t.prototype.setProperties=function(r,n){for(var o in r)this.set(o,r[o],n)},t.prototype.applyProperties=function(r){r.values_&&Ei(this.values_||(this.values_={}),r.values_)},t.prototype.unset=function(r,n){if(this.values_&&r in this.values_){var o=this.values_[r];delete this.values_[r],_Je(this.values_)&&(this.values_=null),n||this.notify(r,o)}},t}(S7),al=M3r;var Vle={ACTIVE:"active"};function Gle(e){return Math.pow(e,3)}function Sf(e){return 1-Gle(1-e)}function aat(e){return 3*e*e-2*e*e*e}function sat(e){return e}var C3r=function(){var e=function(t,r){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,o){n.__proto__=o}||function(n,o){for(var i in o)Object.prototype.hasOwnProperty.call(o,i)&&(n[i]=o[i])},e(t,r)};return function(t,r){if(typeof r!="function"&&r!==null)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");e(t,r);function n(){this.constructor=t}t.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),A3r=function(e){C3r(t,e);function t(r){var n=e.call(this)||this;return n.on,n.once,n.un,r&&r.handleEvent&&(n.handleEvent=r.handleEvent),n.map_=null,n.setActive(!0),n}return t.prototype.getActive=function(){return this.get(Vle.ACTIVE)},t.prototype.getMap=function(){return this.map_},t.prototype.handleEvent=function(r){return!0},t.prototype.setActive=function(r){this.set(Vle.ACTIVE,r)},t.prototype.setMap=function(r){this.map_=r},t}(al);function lat(e,t,r){var n=e.getCenterInternal();if(n){var o=[n[0]+t[0],n[1]+t[1]];e.animateInternal({duration:r!==void 0?r:250,easing:sat,center:e.getConstrainedCenter(o)})}}function x2(e,t,r,n){var o=e.getZoom();if(o!==void 0){var i=e.getConstrainedZoom(o+t),a=e.getResolutionForZoom(i);e.getAnimating()&&e.cancelAnimations(),e.animate({resolution:a,anchor:r,duration:n!==void 0?n:250,easing:Sf})}}var tm=A3r;var Hi={SINGLECLICK:"singleclick",CLICK:Or.CLICK,DBLCLICK:Or.DBLCLICK,POINTERDRAG:"pointerdrag",POINTERMOVE:"pointermove",POINTERDOWN:"pointerdown",POINTERUP:"pointerup",POINTEROVER:"pointerover",POINTEROUT:"pointerout",POINTERENTER:"pointerenter",POINTERLEAVE:"pointerleave",POINTERCANCEL:"pointercancel"};var O3r=function(){var e=function(t,r){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,o){n.__proto__=o}||function(n,o){for(var i in o)Object.prototype.hasOwnProperty.call(o,i)&&(n[i]=o[i])},e(t,r)};return function(t,r){if(typeof r!="function"&&r!==null)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");e(t,r);function n(){this.constructor=t}t.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),P3r=function(e){O3r(t,e);function t(r){var n=this,o=r||{};return n=e.call(this,o)||this,o.handleDownEvent&&(n.handleDownEvent=o.handleDownEvent),o.handleDragEvent&&(n.handleDragEvent=o.handleDragEvent),o.handleMoveEvent&&(n.handleMoveEvent=o.handleMoveEvent),o.handleUpEvent&&(n.handleUpEvent=o.handleUpEvent),o.stopDown&&(n.stopDown=o.stopDown),n.handlingDownUpSequence=!1,n.targetPointers=[],n}return t.prototype.getPointerCount=function(){return this.targetPointers.length},t.prototype.handleDownEvent=function(r){return!1},t.prototype.handleDragEvent=function(r){},t.prototype.handleEvent=function(r){if(!r.originalEvent)return!0;var n=!1;if(this.updateTrackedPointers_(r),this.handlingDownUpSequence){if(r.type==Hi.POINTERDRAG)this.handleDragEvent(r),r.originalEvent.preventDefault();else if(r.type==Hi.POINTERUP){var o=this.handleUpEvent(r);this.handlingDownUpSequence=o&&this.targetPointers.length>0}}else if(r.type==Hi.POINTERDOWN){var i=this.handleDownEvent(r);this.handlingDownUpSequence=i,n=this.stopDown(i)}else r.type==Hi.POINTERMOVE&&this.handleMoveEvent(r);return!n},t.prototype.handleMoveEvent=function(r){},t.prototype.handleUpEvent=function(r){return!1},t.prototype.stopDown=function(r){return r},t.prototype.updateTrackedPointers_=function(r){r.activePointers&&(this.targetPointers=r.activePointers)},t}(tm);function w2(e){for(var t=e.length,r=0,n=0,o=0;o<t;o++)r+=e[o].clientX,n+=e[o].clientY;return[r/t,n/t]}var rm=P3r;var hu={XY:"XY",XYZ:"XYZ",XYM:"XYM",XYZM:"XYZM"};var _0=typeof navigator!="undefined"&&typeof navigator.userAgent!="undefined"?navigator.userAgent.toLowerCase():"",uat=_0.indexOf("firefox")!==-1,N3r=_0.indexOf("safari")!==-1&&_0.indexOf("chrom")==-1,cat=N3r&&!!(_0.indexOf("version/15.4")>=0||_0.match(/cpu (os|iphone os) 15_4 like mac os x/)),pat=_0.indexOf("webkit")!==-1&&_0.indexOf("edge")==-1,fat=_0.indexOf("macintosh")!==-1,T7=typeof devicePixelRatio!="undefined"?devicePixelRatio:1,dat=typeof WorkerGlobalScope!="undefined"&&typeof OffscreenCanvas!="undefined"&&self instanceof WorkerGlobalScope,hat=typeof Image!="undefined"&&Image.prototype.decode,I7=function(){var e=!1;try{var t=Object.defineProperty({},"passive",{get:function(){e=!0}});window.addEventListener("_",null,t),window.removeEventListener("_",null,t)}catch(r){}return e}();var Hle=new Array(6);function Tf(){return[1,0,0,1,0,0]}function E2(e){return M7(e,1,0,0,1,0,0)}function Wle(e,t){var r=e[0],n=e[1],o=e[2],i=e[3],a=e[4],u=e[5],d=t[0],h=t[1],v=t[2],b=t[3],x=t[4],M=t[5];return e[0]=r*d+o*h,e[1]=n*d+i*h,e[2]=r*v+o*b,e[3]=n*v+i*b,e[4]=r*x+o*M+a,e[5]=n*x+i*M+u,e}function M7(e,t,r,n,o,i,a){return e[0]=t,e[1]=r,e[2]=n,e[3]=o,e[4]=i,e[5]=a,e}function b0(e,t){var r=t[0],n=t[1];return t[0]=e[0]*r+e[2]*n+e[4],t[1]=e[1]*r+e[3]*n+e[5],t}function C7(e,t){var r=Math.cos(t),n=Math.sin(t);return Wle(e,M7(Hle,r,n,-n,r,0,0))}function yP(e,t,r){return Wle(e,M7(Hle,t,0,0,r,0,0))}function mat(e,t,r){return Wle(e,M7(Hle,1,0,0,1,t,r))}function x0(e,t,r,n,o,i,a,u){var d=Math.sin(i),h=Math.cos(i);return e[0]=n*h,e[1]=o*d,e[2]=-n*d,e[3]=o*h,e[4]=a*n*h-u*n*d+t,e[5]=a*o*d+u*o*h+r,e}function gat(e,t){var r=D3r(t);Ln(r!==0,32);var n=t[0],o=t[1],i=t[2],a=t[3],u=t[4],d=t[5];return e[0]=a/r,e[1]=-o/r,e[2]=-i/r,e[3]=n/r,e[4]=(i*d-a*u)/r,e[5]=-(n*d-o*u)/r,e}function D3r(e){return e[0]*e[3]-e[1]*e[2]}function $le(e,t,r,n,o,i){for(var a=i||[],u=0,d=t;d<r;d+=n){var h=e[d],v=e[d+1];a[u++]=o[0]*h+o[2]*v+o[4],a[u++]=o[1]*h+o[3]*v+o[5]}return i&&a.length!=u&&(a.length=u),a}function vat(e,t,r,n,o,i,a){for(var u=a||[],d=Math.cos(o),h=Math.sin(o),v=i[0],b=i[1],x=0,M=t;M<r;M+=n){var O=e[M]-v,D=e[M+1]-b;u[x++]=v+O*d-D*h,u[x++]=b+O*h+D*d;for(var k=M+2;k<M+n;++k)u[x++]=e[k]}return a&&u.length!=x&&(u.length=x),u}function yat(e,t,r,n,o,i,a,u){for(var d=u||[],h=a[0],v=a[1],b=0,x=t;x<r;x+=n){var M=e[x]-h,O=e[x+1]-v;d[b++]=h+o*M,d[b++]=v+i*O;for(var D=x+2;D<x+n;++D)d[b++]=e[D]}return u&&d.length!=b&&(d.length=b),d}function _at(e,t,r,n,o,i,a){for(var u=a||[],d=0,h=t;h<r;h+=n){u[d++]=e[h]+o,u[d++]=e[h+1]+i;for(var v=h+2;v<h+n;++v)u[d++]=e[v]}return a&&u.length!=d&&(u.length=d),u}var L3r=function(){var e=function(t,r){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,o){n.__proto__=o}||function(n,o){for(var i in o)Object.prototype.hasOwnProperty.call(o,i)&&(n[i]=o[i])},e(t,r)};return function(t,r){if(typeof r!="function"&&r!==null)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");e(t,r);function n(){this.constructor=t}t.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),bat=Tf(),k3r=function(e){L3r(t,e);function t(){var r=e.call(this)||this;return r.extent_=Fh(),r.extentRevision_=-1,r.simplifiedGeometryMaxMinSquaredTolerance=0,r.simplifiedGeometryRevision=0,r.simplifyTransformedInternal=nat(function(n,o,i){if(!i)return this.getSimplifiedGeometry(o);var a=this.clone();return a.applyTransform(i),a.getSimplifiedGeometry(o)}),r}return t.prototype.simplifyTransformed=function(r,n){return this.simplifyTransformedInternal(this.getRevision(),r,n)},t.prototype.clone=function(){return Oo()},t.prototype.closestPointXY=function(r,n,o,i){return Oo()},t.prototype.containsXY=function(r,n){var o=this.getClosestPoint([r,n]);return o[0]===r&&o[1]===n},t.prototype.getClosestPoint=function(r,n){var o=n||[NaN,NaN];return this.closestPointXY(r[0],r[1],o,1/0),o},t.prototype.intersectsCoordinate=function(r){return this.containsXY(r[0],r[1])},t.prototype.computeExtent=function(r){return Oo()},t.prototype.getExtent=function(r){if(this.extentRevision_!=this.getRevision()){var n=this.computeExtent(this.extent_);(isNaN(n[0])||isNaN(n[1]))&&GS(n),this.extentRevision_=this.getRevision()}return CJe(this.extent_,r)},t.prototype.rotate=function(r,n){Oo()},t.prototype.scale=function(r,n,o){Oo()},t.prototype.simplify=function(r){return this.getSimplifiedGeometry(r*r)},t.prototype.getSimplifiedGeometry=function(r){return Oo()},t.prototype.getType=function(){return Oo()},t.prototype.applyTransform=function(r){Oo()},t.prototype.intersectsExtent=function(r){return Oo()},t.prototype.translate=function(r,n){Oo()},t.prototype.transform=function(r,n){var o=Nc(r),i=o.getUnits()==Pc.TILE_PIXELS?function(a,u,d){var h=o.getExtent(),v=o.getWorldExtent(),b=ql(v)/ql(h);return x0(bat,v[0],v[3],b,-b,0,0,0),$le(a,0,a.length,d,bat,u),X_(o,n)(a,u,d)}:X_(o,n);return this.applyTransform(i),this},t}(al),xat=k3r;var R3r=function(){var e=function(t,r){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,o){n.__proto__=o}||function(n,o){for(var i in o)Object.prototype.hasOwnProperty.call(o,i)&&(n[i]=o[i])},e(t,r)};return function(t,r){if(typeof r!="function"&&r!==null)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");e(t,r);function n(){this.constructor=t}t.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),j3r=function(e){R3r(t,e);function t(){var r=e.call(this)||this;return r.layout=hu.XY,r.stride=2,r.flatCoordinates=null,r}return t.prototype.computeExtent=function(r){return TJe(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,r)},t.prototype.getCoordinates=function(){return Oo()},t.prototype.getFirstCoordinate=function(){return this.flatCoordinates.slice(0,this.stride)},t.prototype.getFlatCoordinates=function(){return this.flatCoordinates},t.prototype.getLastCoordinate=function(){return this.flatCoordinates.slice(this.flatCoordinates.length-this.stride)},t.prototype.getLayout=function(){return this.layout},t.prototype.getSimplifiedGeometry=function(r){if(this.simplifiedGeometryRevision!==this.getRevision()&&(this.simplifiedGeometryMaxMinSquaredTolerance=0,this.simplifiedGeometryRevision=this.getRevision()),r<0||this.simplifiedGeometryMaxMinSquaredTolerance!==0&&r<=this.simplifiedGeometryMaxMinSquaredTolerance)return this;var n=this.getSimplifiedGeometryInternal(r),o=n.getFlatCoordinates();return o.length<this.flatCoordinates.length?n:(this.simplifiedGeometryMaxMinSquaredTolerance=r,this)},t.prototype.getSimplifiedGeometryInternal=function(r){return this},t.prototype.getStride=function(){return this.stride},t.prototype.setFlatCoordinates=function(r,n){this.stride=wat(r),this.layout=r,this.flatCoordinates=n},t.prototype.setCoordinates=function(r,n){Oo()},t.prototype.setLayout=function(r,n,o){var i;if(r)i=wat(r);else{for(var a=0;a<o;++a)if(n.length===0){this.layout=hu.XY,this.stride=2;return}else n=n[0];i=n.length,r=q3r(i)}this.layout=r,this.stride=i},t.prototype.applyTransform=function(r){this.flatCoordinates&&(r(this.flatCoordinates,this.flatCoordinates,this.stride),this.changed())},t.prototype.rotate=function(r,n){var o=this.getFlatCoordinates();if(o){var i=this.getStride();vat(o,0,o.length,i,r,n,o),this.changed()}},t.prototype.scale=function(r,n,o){var i=n;i===void 0&&(i=r);var a=o;a||(a=Td(this.getExtent()));var u=this.getFlatCoordinates();if(u){var d=this.getStride();yat(u,0,u.length,d,r,i,a,u),this.changed()}},t.prototype.translate=function(r,n){var o=this.getFlatCoordinates();if(o){var i=this.getStride();_at(o,0,o.length,i,r,n,o),this.changed()}},t}(xat);function q3r(e){var t;return e==2?t=hu.XY:e==3?t=hu.XYZ:e==4&&(t=hu.XYZM),t}function wat(e){var t;return e==hu.XY?t=2:e==hu.XYZ||e==hu.XYM?t=3:e==hu.XYZM&&(t=4),t}var S2=j3r;function Eat(e,t,r,n,o,i,a){var u=e[t],d=e[t+1],h=e[r]-u,v=e[r+1]-d,b;if(h===0&&v===0)b=t;else{var x=((o-u)*h+(i-d)*v)/(h*h+v*v);if(x>1)b=r;else if(x>0){for(var M=0;M<n;++M)a[M]=pJe(e[t+M],e[r+M],x);a.length=n;return}else b=t}for(var M=0;M<n;++M)a[M]=e[b+M];a.length=n}function Zle(e,t,r,n,o){var i=e[t],a=e[t+1];for(t+=n;t<r;t+=n){var u=e[t],d=e[t+1],h=Mg(i,a,u,d);h>o&&(o=h),i=u,a=d}return o}function Sat(e,t,r,n,o){for(var i=0,a=r.length;i<a;++i){var u=r[i];o=Zle(e,t,u,n,o),t=u}return o}function Yle(e,t,r,n,o,i,a,u,d,h,v){if(t==r)return h;var b,x;if(o===0)if(x=Mg(a,u,e[t],e[t+1]),x<h){for(b=0;b<n;++b)d[b]=e[t+b];return d.length=n,x}else return h;for(var M=v||[NaN,NaN],O=t+n;O<r;)if(Eat(e,O-n,O,n,a,u,M),x=Mg(a,u,M[0],M[1]),x<h){for(h=x,b=0;b<n;++b)d[b]=M[b];d.length=n,O+=n}else O+=n*Math.max((Math.sqrt(x)-Math.sqrt(h))/o|0,1);if(i&&(Eat(e,r-n,t,n,a,u,M),x=Mg(a,u,M[0],M[1]),x<h)){for(h=x,b=0;b<n;++b)d[b]=M[b];d.length=n}return h}function Tat(e,t,r,n,o,i,a,u,d,h,v){for(var b=v||[NaN,NaN],x=0,M=r.length;x<M;++x){var O=r[x];h=Yle(e,t,O,n,o,i,a,u,d,h,b),t=O}return h}function Iat(e,t,r,n){for(var o=0,i=r.length;o<i;++o)e[t++]=r[o];return t}function Kle(e,t,r,n){for(var o=0,i=r.length;o<i;++o)for(var a=r[o],u=0;u<n;++u)e[t++]=a[u];return t}function Mat(e,t,r,n,o){for(var i=o||[],a=0,u=0,d=r.length;u<d;++u){var h=Kle(e,t,r[u],n);i[a++]=h,t=h}return i.length=a,i}function Cat(e,t,r,n,o,i,a){var u=(r-t)/n;if(u<3){for(;t<r;t+=n)i[a++]=e[t],i[a++]=e[t+1];return a}var d=new Array(u);d[0]=1,d[u-1]=1;for(var h=[t,r-n],v=0;h.length>0;){for(var b=h.pop(),x=h.pop(),M=0,O=e[x],D=e[x+1],k=e[b],R=e[b+1],q=x+n;q<b;q+=n){var B=e[q],G=e[q+1],re=uJe(B,G,O,D,k,R);re>M&&(v=q,M=re)}M>o&&(d[(v-t)/n]=1,x+n<v&&h.push(x,v),v+n<b&&h.push(v,b))}for(var q=0;q<u;++q)d[q]&&(i[a++]=e[t+q*n],i[a++]=e[t+q*n+1]);return a}function T2(e,t){return t*Math.round(e/t)}function z3r(e,t,r,n,o,i,a){if(t==r)return a;var u=T2(e[t],o),d=T2(e[t+1],o);t+=n,i[a++]=u,i[a++]=d;var h,v;do if(h=T2(e[t],o),v=T2(e[t+1],o),t+=n,t==r)return i[a++]=h,i[a++]=v,a;while(h==u&&v==d);for(;t<r;){var b=T2(e[t],o),x=T2(e[t+1],o);if(t+=n,!(b==h&&x==v)){var M=h-u,O=v-d,D=b-u,k=x-d;if(M*k==O*D&&(M<0&&D<M||M==D||M>0&&D>M)&&(O<0&&k<O||O==k||O>0&&k>O)){h=b,v=x;continue}i[a++]=h,i[a++]=v,u=h,d=v,h=b,v=x}}return i[a++]=h,i[a++]=v,a}function Aat(e,t,r,n,o,i,a,u){for(var d=0,h=r.length;d<h;++d){var v=r[d];a=z3r(e,t,v,n,o,i,a),u.push(a),t=v}return a}function Xle(e,t,r,n,o){for(var i=o!==void 0?o:[],a=0,u=t;u<r;u+=n)i[a++]=e.slice(u,u+n);return i.length=a,i}function Oat(e,t,r,n,o){for(var i=o!==void 0?o:[],a=0,u=0,d=r.length;u<d;++u){var h=r[u];i[a++]=Xle(e,t,h,n,i[a]),t=h}return i.length=a,i}function Qle(e,t,r,n){for(var o=0,i=e[r-n],a=e[r-n+1];t<r;t+=n){var u=e[t],d=e[t+1];o+=a*u-i*d,i=u,a=d}return o/2}function Pat(e,t,r,n){for(var o=0,i=0,a=r.length;i<a;++i){var u=r[i];o+=Qle(e,t,u,n),t=u}return o}var F3r=function(){var e=function(t,r){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,o){n.__proto__=o}||function(n,o){for(var i in o)Object.prototype.hasOwnProperty.call(o,i)&&(n[i]=o[i])},e(t,r)};return function(t,r){if(typeof r!="function"&&r!==null)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");e(t,r);function n(){this.constructor=t}t.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),U3r=function(e){F3r(t,e);function t(r,n){var o=e.call(this)||this;return o.maxDelta_=-1,o.maxDeltaRevision_=-1,n!==void 0&&!Array.isArray(r[0])?o.setFlatCoordinates(n,r):o.setCoordinates(r,n),o}return t.prototype.clone=function(){return new t(this.flatCoordinates.slice(),this.layout)},t.prototype.closestPointXY=function(r,n,o,i){return i<Tz(this.getExtent(),r,n)?i:(this.maxDeltaRevision_!=this.getRevision()&&(this.maxDelta_=Math.sqrt(Zle(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,0)),this.maxDeltaRevision_=this.getRevision()),Yle(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,this.maxDelta_,!0,r,n,o,i))},t.prototype.getArea=function(){return Qle(this.flatCoordinates,0,this.flatCoordinates.length,this.stride)},t.prototype.getCoordinates=function(){return Xle(this.flatCoordinates,0,this.flatCoordinates.length,this.stride)},t.prototype.getSimplifiedGeometryInternal=function(r){var n=[];return n.length=Cat(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,r,n,0),new t(n,hu.XY)},t.prototype.getType=function(){return"LinearRing"},t.prototype.intersectsExtent=function(r){return!1},t.prototype.setCoordinates=function(r,n){this.setLayout(n,r,1),this.flatCoordinates||(this.flatCoordinates=[]),this.flatCoordinates.length=Kle(this.flatCoordinates,0,r,this.stride),this.changed()},t}(S2),Jle=U3r;var B3r=function(){var e=function(t,r){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,o){n.__proto__=o}||function(n,o){for(var i in o)Object.prototype.hasOwnProperty.call(o,i)&&(n[i]=o[i])},e(t,r)};return function(t,r){if(typeof r!="function"&&r!==null)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");e(t,r);function n(){this.constructor=t}t.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),V3r=function(e){B3r(t,e);function t(r,n){var o=e.call(this)||this;return o.setCoordinates(r,n),o}return t.prototype.clone=function(){var r=new t(this.flatCoordinates.slice(),this.layout);return r.applyProperties(this),r},t.prototype.closestPointXY=function(r,n,o,i){var a=this.flatCoordinates,u=Mg(r,n,a[0],a[1]);if(u<i){for(var d=this.stride,h=0;h<d;++h)o[h]=a[h];return o.length=d,u}else return i},t.prototype.getCoordinates=function(){return this.flatCoordinates?this.flatCoordinates.slice():[]},t.prototype.computeExtent=function(r){return SJe(this.flatCoordinates,r)},t.prototype.getType=function(){return"Point"},t.prototype.intersectsExtent=function(r){return $ie(r,this.flatCoordinates[0],this.flatCoordinates[1])},t.prototype.setCoordinates=function(r,n){this.setLayout(n,r,0),this.flatCoordinates||(this.flatCoordinates=[]),this.flatCoordinates.length=Iat(this.flatCoordinates,0,r,this.stride),this.changed()},t}(S2),Nat=V3r;function Dat(e,t,r,n,o){var i=Iz(o,function(a){return!w0(e,t,r,n,a[0],a[1])});return!i}function w0(e,t,r,n,o,i){for(var a=0,u=e[r-n],d=e[r-n+1];t<r;t+=n){var h=e[t],v=e[t+1];d<=i?v>i&&(h-u)*(i-d)-(o-u)*(v-d)>0&&a++:v<=i&&(h-u)*(i-d)-(o-u)*(v-d)<0&&a--,u=h,d=v}return a!==0}function A7(e,t,r,n,o,i){if(r.length===0||!w0(e,t,r[0],n,o,i))return!1;for(var a=1,u=r.length;a<u;++a)if(w0(e,r[a-1],r[a],n,o,i))return!1;return!0}function Lat(e,t,r,n,o,i,a){for(var u,d,h,v,b,x,M,O=o[i+1],D=[],k=0,R=r.length;k<R;++k){var q=r[k];for(v=e[q-n],x=e[q-n+1],u=t;u<q;u+=n)b=e[u],M=e[u+1],(O<=x&&M<=O||x<=O&&O<=M)&&(h=(O-x)/(M-x)*(b-v)+v,D.push(h)),v=b,x=M}var B=NaN,G=-1/0;for(D.sort(vP),v=D[0],u=1,d=D.length;u<d;++u){b=D[u];var re=Math.abs(b-v);re>G&&(h=(v+b)/2,A7(e,t,r,n,h,O)&&(B=h,G=re)),v=b}return isNaN(B)&&(B=o[i]),a?(a.push(B,O,G),a):[B,O,G]}function kat(e,t,r,n,o){var i;for(t+=n;t<r;t+=n)if(i=o(e.slice(t-n,t),e.slice(t,t+n)),i)return i;return!1}function Rat(e,t,r,n,o){var i=Zie(Fh(),e,t,r,n);return _4(o,i)?EJe(o,i)||i[0]>=o[0]&&i[2]<=o[2]||i[1]>=o[1]&&i[3]<=o[3]?!0:kat(e,t,r,n,function(a,u){return AJe(o,a,u)}):!1}function eue(e,t,r,n,o){return!!(Rat(e,t,r,n,o)||w0(e,t,r,n,o[0],o[1])||w0(e,t,r,n,o[0],o[3])||w0(e,t,r,n,o[2],o[1])||w0(e,t,r,n,o[2],o[3]))}function jat(e,t,r,n,o){if(!eue(e,t,r[0],n,o))return!1;if(r.length===1)return!0;for(var i=1,a=r.length;i<a;++i)if(Dat(e,r[i-1],r[i],n,o)&&!Rat(e,r[i-1],r[i],n,o))return!1;return!0}function qat(e,t,r,n){for(;t<r-n;){for(var o=0;o<n;++o){var i=e[t+o];e[t+o]=e[r-n+o],e[r-n+o]=i}t+=n,r-=n}}function zat(e,t,r,n){for(var o=0,i=e[r-n],a=e[r-n+1];t<r;t+=n){var u=e[t],d=e[t+1];o+=(u-i)*(d+a),i=u,a=d}return o===0?void 0:o>0}function Fat(e,t,r,n,o){for(var i=o!==void 0?o:!1,a=0,u=r.length;a<u;++a){var d=r[a],h=zat(e,t,d,n);if(a===0){if(i&&h||!i&&!h)return!1}else if(i&&!h||!i&&h)return!1;t=d}return!0}function tue(e,t,r,n,o){for(var i=o!==void 0?o:!1,a=0,u=r.length;a<u;++a){var d=r[a],h=zat(e,t,d,n),v=a===0?i&&h||!i&&!h:i&&!h||!i&&h;v&&qat(e,t,d,n),t=d}return t}var G3r=function(){var e=function(t,r){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,o){n.__proto__=o}||function(n,o){for(var i in o)Object.prototype.hasOwnProperty.call(o,i)&&(n[i]=o[i])},e(t,r)};return function(t,r){if(typeof r!="function"&&r!==null)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");e(t,r);function n(){this.constructor=t}t.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),Uat=function(e){G3r(t,e);function t(r,n,o){var i=e.call(this)||this;return i.ends_=[],i.flatInteriorPointRevision_=-1,i.flatInteriorPoint_=null,i.maxDelta_=-1,i.maxDeltaRevision_=-1,i.orientedRevision_=-1,i.orientedFlatCoordinates_=null,n!==void 0&&o?(i.setFlatCoordinates(n,r),i.ends_=o):i.setCoordinates(r,n),i}return t.prototype.appendLinearRing=function(r){this.flatCoordinates?tat(this.flatCoordinates,r.getFlatCoordinates()):this.flatCoordinates=r.getFlatCoordinates().slice(),this.ends_.push(this.flatCoordinates.length),this.changed()},t.prototype.clone=function(){var r=new t(this.flatCoordinates.slice(),this.layout,this.ends_.slice());return r.applyProperties(this),r},t.prototype.closestPointXY=function(r,n,o,i){return i<Tz(this.getExtent(),r,n)?i:(this.maxDeltaRevision_!=this.getRevision()&&(this.maxDelta_=Math.sqrt(Sat(this.flatCoordinates,0,this.ends_,this.stride,0)),this.maxDeltaRevision_=this.getRevision()),Tat(this.flatCoordinates,0,this.ends_,this.stride,this.maxDelta_,!0,r,n,o,i))},t.prototype.containsXY=function(r,n){return A7(this.getOrientedFlatCoordinates(),0,this.ends_,this.stride,r,n)},t.prototype.getArea=function(){return Pat(this.getOrientedFlatCoordinates(),0,this.ends_,this.stride)},t.prototype.getCoordinates=function(r){var n;return r!==void 0?(n=this.getOrientedFlatCoordinates().slice(),tue(n,0,this.ends_,this.stride,r)):n=this.flatCoordinates,Oat(n,0,this.ends_,this.stride)},t.prototype.getEnds=function(){return this.ends_},t.prototype.getFlatInteriorPoint=function(){if(this.flatInteriorPointRevision_!=this.getRevision()){var r=Td(this.getExtent());this.flatInteriorPoint_=Lat(this.getOrientedFlatCoordinates(),0,this.ends_,this.stride,r,0),this.flatInteriorPointRevision_=this.getRevision()}return this.flatInteriorPoint_},t.prototype.getInteriorPoint=function(){return new Nat(this.getFlatInteriorPoint(),hu.XYM)},t.prototype.getLinearRingCount=function(){return this.ends_.length},t.prototype.getLinearRing=function(r){return r<0||this.ends_.length<=r?null:new Jle(this.flatCoordinates.slice(r===0?0:this.ends_[r-1],this.ends_[r]),this.layout)},t.prototype.getLinearRings=function(){for(var r=this.layout,n=this.flatCoordinates,o=this.ends_,i=[],a=0,u=0,d=o.length;u<d;++u){var h=o[u],v=new Jle(n.slice(a,h),r);i.push(v),a=h}return i},t.prototype.getOrientedFlatCoordinates=function(){if(this.orientedRevision_!=this.getRevision()){var r=this.flatCoordinates;Fat(r,0,this.ends_,this.stride)?this.orientedFlatCoordinates_=r:(this.orientedFlatCoordinates_=r.slice(),this.orientedFlatCoordinates_.length=tue(this.orientedFlatCoordinates_,0,this.ends_,this.stride)),this.orientedRevision_=this.getRevision()}return this.orientedFlatCoordinates_},t.prototype.getSimplifiedGeometryInternal=function(r){var n=[],o=[];return n.length=Aat(this.flatCoordinates,0,this.ends_,this.stride,Math.sqrt(r),n,0,o),new t(n,hu.XY,o)},t.prototype.getType=function(){return"Polygon"},t.prototype.intersectsExtent=function(r){return jat(this.getOrientedFlatCoordinates(),0,this.ends_,this.stride,r)},t.prototype.setCoordinates=function(r,n){this.setLayout(n,r,2),this.flatCoordinates||(this.flatCoordinates=[]);var o=Mat(this.flatCoordinates,0,r,this.stride,this.ends_);this.flatCoordinates.length=o.length===0?0:o[o.length-1],this.changed()},t}(S2),Bat=Uat;function _P(e){var t=e[0],r=e[1],n=e[2],o=e[3],i=[t,r,t,o,n,o,n,r,t,r];return new Uat(i,hu.XY,[i.length])}var H3r=function(){var e=function(t,r){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,o){n.__proto__=o}||function(n,o){for(var i in o)Object.prototype.hasOwnProperty.call(o,i)&&(n[i]=o[i])},e(t,r)};return function(t,r){if(typeof r!="function"&&r!==null)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");e(t,r);function n(){this.constructor=t}t.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),W3r=function(e){H3r(t,e);function t(r){var n=e.call(this)||this;return n.geometry_=null,n.element_=document.createElement("div"),n.element_.style.position="absolute",n.element_.style.pointerEvents="auto",n.element_.className="ol-box "+r,n.map_=null,n.startPixel_=null,n.endPixel_=null,n}return t.prototype.disposeInternal=function(){this.setMap(null)},t.prototype.render_=function(){var r=this.startPixel_,n=this.endPixel_,o="px",i=this.element_.style;i.left=Math.min(r[0],n[0])+o,i.top=Math.min(r[1],n[1])+o,i.width=Math.abs(n[0]-r[0])+o,i.height=Math.abs(n[1]-r[1])+o},t.prototype.setMap=function(r){if(this.map_){this.map_.getOverlayContainer().removeChild(this.element_);var n=this.element_.style;n.left="inherit",n.top="inherit",n.width="inherit",n.height="inherit"}this.map_=r,this.map_&&this.map_.getOverlayContainer().appendChild(this.element_)},t.prototype.setPixels=function(r,n){this.startPixel_=r,this.endPixel_=n,this.createOrUpdateGeometry(),this.render_()},t.prototype.createOrUpdateGeometry=function(){var r=this.startPixel_,n=this.endPixel_,o=[r,[r[0],n[1]],n,[n[0],r[1]]],i=o.map(this.map_.getCoordinateFromPixelInternal,this.map_);i[4]=i[0].slice(),this.geometry_?this.geometry_.setCoordinates([i]):this.geometry_=new Bat([i])},t.prototype.getGeometry=function(){return this.geometry_},t}(v0),Vat=W3r;function bP(e){var t=arguments;return function(r){for(var n=!0,o=0,i=t.length;o<i&&(n=n&&t[o](r),!!n);++o);return n}}var Gat=function(e){var t=e.originalEvent;return t.altKey&&!(t.metaKey||t.ctrlKey)&&t.shiftKey},$3r=function(e){var t=e.map.getTargetElement(),r=e.map.getOwnerDocument().activeElement;return t.contains(r)},O7=function(e){return e.map.getTargetElement().hasAttribute("tabindex")?$3r(e):!0},Hat=y0;var P7=function(e){var t=e.originalEvent;return t.button==0&&!(pat&&fat&&t.ctrlKey)};var N7=function(e){var t=e.originalEvent;return!t.altKey&&!(t.metaKey||t.ctrlKey)&&!t.shiftKey};var Wat=function(e){var t=e.originalEvent;return!t.altKey&&!(t.metaKey||t.ctrlKey)&&t.shiftKey},D7=function(e){var t=e.originalEvent,r=t.target.tagName;return r!=="INPUT"&&r!=="SELECT"&&r!=="TEXTAREA"&&!t.target.isContentEditable},L7=function(e){var t=e.originalEvent;return Ln(t!==void 0,56),t.pointerType=="mouse"};var $at=function(e){var t=e.originalEvent;return Ln(t!==void 0,56),t.isPrimary&&t.button===0};var Zat=function(){var e=function(t,r){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,o){n.__proto__=o}||function(n,o){for(var i in o)Object.prototype.hasOwnProperty.call(o,i)&&(n[i]=o[i])},e(t,r)};return function(t,r){if(typeof r!="function"&&r!==null)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");e(t,r);function n(){this.constructor=t}t.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),k7={BOXSTART:"boxstart",BOXDRAG:"boxdrag",BOXEND:"boxend",BOXCANCEL:"boxcancel"},rue=function(e){Zat(t,e);function t(r,n,o){var i=e.call(this,r)||this;return i.coordinate=n,i.mapBrowserEvent=o,i}return t}(du);var Z3r=function(e){Zat(t,e);function t(r){var n=e.call(this)||this;n.on,n.once,n.un;var o=r||{};return n.box_=new Vat(o.className||"ol-dragbox"),n.minArea_=o.minArea!==void 0?o.minArea:64,o.onBoxEnd&&(n.onBoxEnd=o.onBoxEnd),n.startPixel_=null,n.condition_=o.condition?o.condition:P7,n.boxEndCondition_=o.boxEndCondition?o.boxEndCondition:n.defaultBoxEndCondition,n}return t.prototype.defaultBoxEndCondition=function(r,n,o){var i=o[0]-n[0],a=o[1]-n[1];return i*i+a*a>=this.minArea_},t.prototype.getGeometry=function(){return this.box_.getGeometry()},t.prototype.handleDragEvent=function(r){this.box_.setPixels(this.startPixel_,r.pixel),this.dispatchEvent(new rue(k7.BOXDRAG,r.coordinate,r))},t.prototype.handleUpEvent=function(r){this.box_.setMap(null);var n=this.boxEndCondition_(r,this.startPixel_,r.pixel);return n&&this.onBoxEnd(r),this.dispatchEvent(new rue(n?k7.BOXEND:k7.BOXCANCEL,r.coordinate,r)),!1},t.prototype.handleDownEvent=function(r){return this.condition_(r)?(this.startPixel_=r.pixel,this.box_.setMap(r.map),this.box_.setPixels(this.startPixel_,this.startPixel_),this.dispatchEvent(new rue(k7.BOXSTART,r.coordinate,r)),!0):!1},t.prototype.onBoxEnd=function(r){},t}(rm),Yat=Z3r;var Y3r=function(){var e=function(t,r){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,o){n.__proto__=o}||function(n,o){for(var i in o)Object.prototype.hasOwnProperty.call(o,i)&&(n[i]=o[i])},e(t,r)};return function(t,r){if(typeof r!="function"&&r!==null)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");e(t,r);function n(){this.constructor=t}t.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),K3r=function(e){Y3r(t,e);function t(r){var n=this,o=r||{},i=o.condition?o.condition:Wat;return n=e.call(this,{condition:i,className:o.className||"ol-dragzoom",minArea:o.minArea})||this,n.duration_=o.duration!==void 0?o.duration:200,n.out_=o.out!==void 0?o.out:!1,n}return t.prototype.onBoxEnd=function(r){var n=this.getMap(),o=n.getView(),i=this.getGeometry();if(this.out_){var a=o.rotatedExtentForGeometry(i),u=o.getResolutionForExtentInternal(a),d=o.getResolution()/u;i=i.clone(),i.scale(d*d)}o.fitInternal(i,{duration:this.duration_,easing:Sf})},t}(Yat),R7=K3r;var nm={POSTRENDER:"postrender",MOVESTART:"movestart",MOVEEND:"moveend",LOADSTART:"loadstart",LOADEND:"loadend"};function $g(e,t,r,n){var o;return r&&r.length?o=r.shift():dat?o=new OffscreenCanvas(e||300,t||300):o=document.createElement("canvas"),e&&(o.width=e),t&&(o.height=t),o.getContext("2d",n)}function Kat(e){var t=e.canvas;t.width=1,t.height=1,e.clearRect(0,0,1,1)}function I2(e,t){var r=t.parentNode;r&&r.replaceChild(e,t)}function xP(e){return e&&e.parentNode?e.parentNode.removeChild(e):null}function Xat(e){for(;e.lastChild;)e.removeChild(e.lastChild)}function Qat(e,t){for(var r=e.childNodes,n=0;;++n){var o=r[n],i=t[n];if(!o&&!i)break;if(o!==i){if(!o){e.appendChild(i);continue}if(!i){e.removeChild(o),--n;continue}e.insertBefore(i,o)}}}var X3r=function(){var e=function(t,r){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,o){n.__proto__=o}||function(n,o){for(var i in o)Object.prototype.hasOwnProperty.call(o,i)&&(n[i]=o[i])},e(t,r)};return function(t,r){if(typeof r!="function"&&r!==null)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");e(t,r);function n(){this.constructor=t}t.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),Q3r=function(e){X3r(t,e);function t(r){var n=e.call(this)||this,o=r.element;return o&&!r.target&&!o.style.pointerEvents&&(o.style.pointerEvents="auto"),n.element=o||null,n.target_=null,n.map_=null,n.listenerKeys=[],r.render&&(n.render=r.render),r.target&&n.setTarget(r.target),n}return t.prototype.disposeInternal=function(){xP(this.element),e.prototype.disposeInternal.call(this)},t.prototype.getMap=function(){return this.map_},t.prototype.setMap=function(r){this.map_&&xP(this.element);for(var n=0,o=this.listenerKeys.length;n<o;++n)$o(this.listenerKeys[n]);if(this.listenerKeys.length=0,this.map_=r,r){var i=this.target_?this.target_:r.getOverlayContainerStopEvent();i.appendChild(this.element),this.render!==Wg&&this.listenerKeys.push(oo(r,nm.POSTRENDER,this.render,this)),r.render()}},t.prototype.render=function(r){},t.prototype.setTarget=function(r){this.target_=typeof r=="string"?document.getElementById(r):r},t}(al),gp=Q3r;var vs={LAYERGROUP:"layergroup",SIZE:"size",TARGET:"target",VIEW:"view"};var wP="ol-hidden";var If="ol-unselectable",nue="ol-unsupported",om="ol-control",oue="ol-collapsed",J3r=new RegExp(["^\\s*(?=(?:(?:[-a-z]+\\s*){0,2}(italic|oblique))?)","(?=(?:(?:[-a-z]+\\s*){0,2}(small-caps))?)","(?=(?:(?:[-a-z]+\\s*){0,2}(bold(?:er)?|lighter|[1-9]00 ))?)","(?:(?:normal|\\1|\\2|\\3)\\s*){0,3}((?:xx?-)?","(?:small|large)|medium|smaller|larger|[\\.\\d]+(?:\\%|in|[cem]m|ex|p[ctx]))","(?:\\s*\\/\\s*(normal|[\\.\\d]+(?:\\%|in|[cem]m|ex|p[ctx])?))",`?\\s*([-,\\"\\'\\sa-z]+?)\\s*$`].join(""),"i"),Jat=["style","variant","weight","size","lineHeight","family"],est=function(e){var t=e.match(J3r);if(!t)return null;for(var r={lineHeight:"normal",size:"1.2em",style:"normal",weight:"normal",variant:"normal"},n=0,o=Jat.length;n<o;++n){var i=t[n+1];i!==void 0&&(r[Jat[n]]=i)}return r.families=r.family.split(/,\s?/),r};var ekr=function(){var e=function(t,r){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,o){n.__proto__=o}||function(n,o){for(var i in o)Object.prototype.hasOwnProperty.call(o,i)&&(n[i]=o[i])},e(t,r)};return function(t,r){if(typeof r!="function"&&r!==null)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");e(t,r);function n(){this.constructor=t}t.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),tst=["fullscreenchange","webkitfullscreenchange","MSFullscreenChange"],rst={ENTERFULLSCREEN:"enterfullscreen",LEAVEFULLSCREEN:"leavefullscreen"},tkr=function(e){ekr(t,e);function t(r){var n=this,o=r||{};n=e.call(this,{element:document.createElement("div"),target:o.target})||this,n.on,n.once,n.un,n.keys_=o.keys!==void 0?o.keys:!1,n.source_=o.source,n.isInFullscreen_=!1,n.boundHandleMapTargetChange_=n.handleMapTargetChange_.bind(n),n.cssClassName_=o.className!==void 0?o.className:"ol-full-screen",n.documentListeners_=[],n.activeClassName_=o.activeClassName!==void 0?o.activeClassName.split(" "):[n.cssClassName_+"-true"],n.inactiveClassName_=o.inactiveClassName!==void 0?o.inactiveClassName.split(" "):[n.cssClassName_+"-false"];var i=o.label!==void 0?o.label:"\u2922";n.labelNode_=typeof i=="string"?document.createTextNode(i):i;var a=o.labelActive!==void 0?o.labelActive:"\xD7";n.labelActiveNode_=typeof a=="string"?document.createTextNode(a):a;var u=o.tipLabel?o.tipLabel:"Toggle full-screen";return n.button_=document.createElement("button"),n.button_.title=u,n.button_.setAttribute("type","button"),n.button_.appendChild(n.labelNode_),n.button_.addEventListener(Or.CLICK,n.handleClick_.bind(n),!1),n.setClassName_(n.button_,n.isInFullscreen_),n.element.className="".concat(n.cssClassName_," ").concat(If," ").concat(om),n.element.appendChild(n.button_),n}return t.prototype.handleClick_=function(r){r.preventDefault(),this.handleFullScreen_()},t.prototype.handleFullScreen_=function(){var r=this.getMap();if(r){var n=r.getOwnerDocument();if(nst(n))if(ost(n))nkr(n);else{var o=void 0;this.source_?o=typeof this.source_=="string"?n.getElementById(this.source_):this.source_:o=r.getTargetElement(),this.keys_?rkr(o):ist(o)}}},t.prototype.handleFullScreenChange_=function(){var r=this.getMap();if(r){var n=this.isInFullscreen_;this.isInFullscreen_=ost(r.getOwnerDocument()),n!==this.isInFullscreen_&&(this.setClassName_(this.button_,this.isInFullscreen_),this.isInFullscreen_?(I2(this.labelActiveNode_,this.labelNode_),this.dispatchEvent(rst.ENTERFULLSCREEN)):(I2(this.labelNode_,this.labelActiveNode_),this.dispatchEvent(rst.LEAVEFULLSCREEN)),r.updateSize())}},t.prototype.setClassName_=function(r,n){var o,i,a,u;n?((o=r.classList).remove.apply(o,this.inactiveClassName_),(i=r.classList).add.apply(i,this.activeClassName_)):((a=r.classList).remove.apply(a,this.activeClassName_),(u=r.classList).add.apply(u,this.inactiveClassName_))},t.prototype.setMap=function(r){var n=this.getMap();n&&n.removeChangeListener(vs.TARGET,this.boundHandleMapTargetChange_),e.prototype.setMap.call(this,r),this.handleMapTargetChange_(),r&&r.addChangeListener(vs.TARGET,this.boundHandleMapTargetChange_)},t.prototype.handleMapTargetChange_=function(){for(var r=this.documentListeners_,n=0,o=r.length;n<o;++n)$o(r[n]);r.length=0;var i=this.getMap();if(i){var a=i.getOwnerDocument();nst(a)?this.element.classList.remove(nue):this.element.classList.add(nue);for(var n=0,o=tst.length;n<o;++n)r.push(oo(a,tst[n],this.handleFullScreenChange_,this));this.handleFullScreenChange_()}},t}(gp);function nst(e){var t=e.body;return!!(t.webkitRequestFullscreen||t.msRequestFullscreen&&e.msFullscreenEnabled||t.requestFullscreen&&e.fullscreenEnabled)}function ost(e){return!!(e.webkitIsFullScreen||e.msFullscreenElement||e.fullscreenElement)}function ist(e){e.requestFullscreen?e.requestFullscreen():e.msRequestFullscreen?e.msRequestFullscreen():e.webkitRequestFullscreen&&e.webkitRequestFullscreen()}function rkr(e){e.webkitRequestFullscreen?e.webkitRequestFullscreen():ist(e)}function nkr(e){e.exitFullscreen?e.exitFullscreen():e.msExitFullscreen?e.msExitFullscreen():e.webkitExitFullscreen&&e.webkitExitFullscreen()}var ast=tkr;var $u={ADD:"add",REMOVE:"remove"};var lst=function(){var e=function(t,r){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,o){n.__proto__=o}||function(n,o){for(var i in o)Object.prototype.hasOwnProperty.call(o,i)&&(n[i]=o[i])},e(t,r)};return function(t,r){if(typeof r!="function"&&r!==null)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");e(t,r);function n(){this.constructor=t}t.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),sst={LENGTH:"length"},j7=function(e){lst(t,e);function t(r,n,o){var i=e.call(this,r)||this;return i.element=n,i.index=o,i}return t}(du);var okr=function(e){lst(t,e);function t(r,n){var o=e.call(this)||this;o.on,o.once,o.un;var i=n||{};if(o.unique_=!!i.unique,o.array_=r||[],o.unique_)for(var a=0,u=o.array_.length;a<u;++a)o.assertUnique_(o.array_[a],a);return o.updateLength_(),o}return t.prototype.clear=function(){for(;this.getLength()>0;)this.pop()},t.prototype.extend=function(r){for(var n=0,o=r.length;n<o;++n)this.push(r[n]);return this},t.prototype.forEach=function(r){for(var n=this.array_,o=0,i=n.length;o<i;++o)r(n[o],o,n)},t.prototype.getArray=function(){return this.array_},t.prototype.item=function(r){return this.array_[r]},t.prototype.getLength=function(){return this.get(sst.LENGTH)},t.prototype.insertAt=function(r,n){this.unique_&&this.assertUnique_(n),this.array_.splice(r,0,n),this.updateLength_(),this.dispatchEvent(new j7($u.ADD,n,r))},t.prototype.pop=function(){return this.removeAt(this.getLength()-1)},t.prototype.push=function(r){this.unique_&&this.assertUnique_(r);var n=this.getLength();return this.insertAt(n,r),this.getLength()},t.prototype.remove=function(r){for(var n=this.array_,o=0,i=n.length;o<i;++o)if(n[o]===r)return this.removeAt(o)},t.prototype.removeAt=function(r){var n=this.array_[r];return this.array_.splice(r,1),this.updateLength_(),this.dispatchEvent(new j7($u.REMOVE,n,r)),n},t.prototype.setAt=function(r,n){var o=this.getLength();if(r<o){this.unique_&&this.assertUnique_(n,r);var i=this.array_[r];this.array_[r]=n,this.dispatchEvent(new j7($u.REMOVE,i,r)),this.dispatchEvent(new j7($u.ADD,n,r))}else{for(var a=o;a<r;++a)this.insertAt(a,void 0);this.insertAt(r,n)}},t.prototype.updateLength_=function(){this.set(sst.LENGTH,this.array_.length)},t.prototype.assertUnique_=function(r,n){for(var o=0,i=this.array_.length;o<i;++o)if(this.array_[o]===r&&o!==n)throw new Sz(58)},t}(al),Zu=okr;var ikr=function(){var e=function(t,r){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,o){n.__proto__=o}||function(n,o){for(var i in o)Object.prototype.hasOwnProperty.call(o,i)&&(n[i]=o[i])},e(t,r)};return function(t,r){if(typeof r!="function"&&r!==null)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");e(t,r);function n(){this.constructor=t}t.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),akr=function(e){ikr(t,e);function t(r){var n=e.call(this)||this,o=r||{};return n.delta_=o.delta?o.delta:1,n.duration_=o.duration!==void 0?o.duration:250,n}return t.prototype.handleEvent=function(r){var n=!1;if(r.type==Hi.DBLCLICK){var o=r.originalEvent,i=r.map,a=r.coordinate,u=o.shiftKey?-this.delta_:this.delta_,d=i.getView();x2(d,u,a,this.duration_),o.preventDefault(),n=!0}return!n},t}(tm),ust=akr;var skr=function(){var e=function(t,r){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,o){n.__proto__=o}||function(n,o){for(var i in o)Object.prototype.hasOwnProperty.call(o,i)&&(n[i]=o[i])},e(t,r)};return function(t,r){if(typeof r!="function"&&r!==null)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");e(t,r);function n(){this.constructor=t}t.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),lkr=function(e){skr(t,e);function t(r){var n=e.call(this,{stopDown:Hg})||this,o=r||{};n.kinetic_=o.kinetic,n.lastCentroid=null,n.lastPointersCount_,n.panning_=!1;var i=o.condition?o.condition:bP(N7,$at);return n.condition_=o.onFocusOnly?bP(O7,i):i,n.noKinetic_=!1,n}return t.prototype.handleDragEvent=function(r){this.panning_||(this.panning_=!0,this.getMap().getView().beginInteraction());var n=this.targetPointers,o=w2(n);if(n.length==this.lastPointersCount_){if(this.kinetic_&&this.kinetic_.update(o[0],o[1]),this.lastCentroid){var i=[this.lastCentroid[0]-o[0],o[1]-this.lastCentroid[1]],a=r.map,u=a.getView();NJe(i,u.getResolution()),HS(i,u.getRotation()),u.adjustCenterInternal(i)}}else this.kinetic_&&this.kinetic_.begin();this.lastCentroid=o,this.lastPointersCount_=n.length,r.originalEvent.preventDefault()},t.prototype.handleUpEvent=function(r){var n=r.map,o=n.getView();if(this.targetPointers.length===0){if(!this.noKinetic_&&this.kinetic_&&this.kinetic_.end()){var i=this.kinetic_.getDistance(),a=this.kinetic_.getAngle(),u=o.getCenterInternal(),d=n.getPixelFromCoordinateInternal(u),h=n.getCoordinateFromPixelInternal([d[0]-i*Math.cos(a),d[1]-i*Math.sin(a)]);o.animateInternal({center:o.getConstrainedCenter(h),duration:500,easing:Sf})}return this.panning_&&(this.panning_=!1,o.endInteraction()),!1}else return this.kinetic_&&this.kinetic_.begin(),this.lastCentroid=null,!0},t.prototype.handleDownEvent=function(r){if(this.targetPointers.length>0&&this.condition_(r)){var n=r.map,o=n.getView();return this.lastCentroid=null,o.getAnimating()&&o.cancelAnimations(),this.kinetic_&&this.kinetic_.begin(),this.noKinetic_=this.targetPointers.length>1,!0}else return!1},t}(rm),cst=lkr;function M2(e){if(e!==void 0)return 0}function iue(e){if(e!==void 0)return e}function pst(e){var t=2*Math.PI/e;return function(r,n){if(n)return r;if(r!==void 0)return r=Math.floor(r/t+.5)*t,r}}function fst(e){var t=e||FS(5);return function(r,n){if(n)return r;if(r!==void 0)return Math.abs(r)<=t?0:r}}var ukr=function(){var e=function(t,r){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,o){n.__proto__=o}||function(n,o){for(var i in o)Object.prototype.hasOwnProperty.call(o,i)&&(n[i]=o[i])},e(t,r)};return function(t,r){if(typeof r!="function"&&r!==null)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");e(t,r);function n(){this.constructor=t}t.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),ckr=function(e){ukr(t,e);function t(r){var n=this,o=r||{};return n=e.call(this,{stopDown:Hg})||this,n.condition_=o.condition?o.condition:Gat,n.lastAngle_=void 0,n.duration_=o.duration!==void 0?o.duration:250,n}return t.prototype.handleDragEvent=function(r){if(L7(r)){var n=r.map,o=n.getView();if(o.getConstraints().rotation!==M2){var i=n.getSize(),a=r.pixel,u=Math.atan2(i[1]/2-a[1],a[0]-i[0]/2);if(this.lastAngle_!==void 0){var d=u-this.lastAngle_;o.adjustRotationInternal(-d)}this.lastAngle_=u}}},t.prototype.handleUpEvent=function(r){if(!L7(r))return!0;var n=r.map,o=n.getView();return o.endInteraction(this.duration_),!1},t.prototype.handleDownEvent=function(r){if(!L7(r))return!1;if(P7(r)&&this.condition_(r)){var n=r.map;return n.getView().beginInteraction(),this.lastAngle_=void 0,!0}else return!1},t}(rm),dst=ckr;var E0={LEFT:37,UP:38,RIGHT:39,DOWN:40};var pkr=function(){var e=function(t,r){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,o){n.__proto__=o}||function(n,o){for(var i in o)Object.prototype.hasOwnProperty.call(o,i)&&(n[i]=o[i])},e(t,r)};return function(t,r){if(typeof r!="function"&&r!==null)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");e(t,r);function n(){this.constructor=t}t.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),fkr=function(e){pkr(t,e);function t(r){var n=e.call(this)||this,o=r||{};return n.defaultCondition_=function(i){return N7(i)&&D7(i)},n.condition_=o.condition!==void 0?o.condition:n.defaultCondition_,n.duration_=o.duration!==void 0?o.duration:100,n.pixelDelta_=o.pixelDelta!==void 0?o.pixelDelta:128,n}return t.prototype.handleEvent=function(r){var n=!1;if(r.type==Or.KEYDOWN){var o=r.originalEvent,i=o.keyCode;if(this.condition_(r)&&(i==E0.DOWN||i==E0.LEFT||i==E0.RIGHT||i==E0.UP)){var a=r.map,u=a.getView(),d=u.getResolution()*this.pixelDelta_,h=0,v=0;i==E0.DOWN?v=-d:i==E0.LEFT?h=-d:i==E0.RIGHT?h=d:v=d;var b=[h,v];HS(b,u.getRotation()),lat(u,b,this.duration_),o.preventDefault(),n=!0}}return!n},t}(tm),hst=fkr;var dkr=function(){var e=function(t,r){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,o){n.__proto__=o}||function(n,o){for(var i in o)Object.prototype.hasOwnProperty.call(o,i)&&(n[i]=o[i])},e(t,r)};return function(t,r){if(typeof r!="function"&&r!==null)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");e(t,r);function n(){this.constructor=t}t.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),hkr=function(e){dkr(t,e);function t(r){var n=e.call(this)||this,o=r||{};return n.condition_=o.condition?o.condition:D7,n.delta_=o.delta?o.delta:1,n.duration_=o.duration!==void 0?o.duration:100,n}return t.prototype.handleEvent=function(r){var n=!1;if(r.type==Or.KEYDOWN||r.type==Or.KEYPRESS){var o=r.originalEvent,i=o.charCode;if(this.condition_(r)&&(i==43||i==45)){var a=r.map,u=i==43?this.delta_:-this.delta_,d=a.getView();x2(d,u,void 0,this.duration_),o.preventDefault(),n=!0}}return!n},t}(tm),mst=hkr;var mkr=function(){function e(t,r,n){this.decay_=t,this.minVelocity_=r,this.delay_=n,this.points_=[],this.angle_=0,this.initialVelocity_=0}return e.prototype.begin=function(){this.points_.length=0,this.angle_=0,this.initialVelocity_=0},e.prototype.update=function(t,r){this.points_.push(t,r,Date.now())},e.prototype.end=function(){if(this.points_.length<6)return!1;var t=Date.now()-this.delay_,r=this.points_.length-3;if(this.points_[r+2]<t)return!1;for(var n=r-3;n>0&&this.points_[n+2]>t;)n-=3;var o=this.points_[r+2]-this.points_[n+2];if(o<16.666666666666668)return!1;var i=this.points_[r]-this.points_[n],a=this.points_[r+1]-this.points_[n+1];return this.angle_=Math.atan2(a,i),this.initialVelocity_=Math.sqrt(i*i+a*a)/o,this.initialVelocity_>this.minVelocity_},e.prototype.getDistance=function(){return(this.minVelocity_-this.initialVelocity_)/this.decay_},e.prototype.getAngle=function(){return this.angle_},e}(),gst=mkr;var gkr=function(){var e=function(t,r){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,o){n.__proto__=o}||function(n,o){for(var i in o)Object.prototype.hasOwnProperty.call(o,i)&&(n[i]=o[i])},e(t,r)};return function(t,r){if(typeof r!="function"&&r!==null)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");e(t,r);function n(){this.constructor=t}t.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),aue={TRACKPAD:"trackpad",WHEEL:"wheel"},vkr=function(e){gkr(t,e);function t(r){var n=this,o=r||{};n=e.call(this,o)||this,n.totalDelta_=0,n.lastDelta_=0,n.maxDelta_=o.maxDelta!==void 0?o.maxDelta:1,n.duration_=o.duration!==void 0?o.duration:250,n.timeout_=o.timeout!==void 0?o.timeout:80,n.useAnchor_=o.useAnchor!==void 0?o.useAnchor:!0,n.constrainResolution_=o.constrainResolution!==void 0?o.constrainResolution:!1;var i=o.condition?o.condition:Hat;return n.condition_=o.onFocusOnly?bP(O7,i):i,n.lastAnchor_=null,n.startTime_=void 0,n.timeoutId_,n.mode_=void 0,n.trackpadEventGap_=400,n.trackpadTimeoutId_,n.deltaPerZoom_=300,n}return t.prototype.endInteraction_=function(){this.trackpadTimeoutId_=void 0;var r=this.getMap();if(r){var n=r.getView();n.endInteraction(void 0,this.lastDelta_?this.lastDelta_>0?1:-1:0,this.lastAnchor_)}},t.prototype.handleEvent=function(r){if(!this.condition_(r))return!0;var n=r.type;if(n!==Or.WHEEL)return!0;var o=r.map,i=r.originalEvent;i.preventDefault(),this.useAnchor_&&(this.lastAnchor_=r.coordinate);var a;if(r.type==Or.WHEEL&&(a=i.deltaY,uat&&i.deltaMode===WheelEvent.DOM_DELTA_PIXEL&&(a/=T7),i.deltaMode===WheelEvent.DOM_DELTA_LINE&&(a*=40)),a===0)return!1;this.lastDelta_=a;var u=Date.now();this.startTime_===void 0&&(this.startTime_=u),(!this.mode_||u-this.startTime_>this.trackpadEventGap_)&&(this.mode_=Math.abs(a)<4?aue.TRACKPAD:aue.WHEEL);var d=o.getView();if(this.mode_===aue.TRACKPAD&&!(d.getConstrainResolution()||this.constrainResolution_))return this.trackpadTimeoutId_?clearTimeout(this.trackpadTimeoutId_):(d.getAnimating()&&d.cancelAnimations(),d.beginInteraction()),this.trackpadTimeoutId_=setTimeout(this.endInteraction_.bind(this),this.timeout_),d.adjustZoom(-a/this.deltaPerZoom_,this.lastAnchor_),this.startTime_=u,!1;this.totalDelta_+=a;var h=Math.max(this.timeout_-(u-this.startTime_),0);return clearTimeout(this.timeoutId_),this.timeoutId_=setTimeout(this.handleWheelZoom_.bind(this,o),h),!1},t.prototype.handleWheelZoom_=function(r){var n=r.getView();n.getAnimating()&&n.cancelAnimations();var o=-Ai(this.totalDelta_,-this.maxDelta_*this.deltaPerZoom_,this.maxDelta_*this.deltaPerZoom_)/this.deltaPerZoom_;(n.getConstrainResolution()||this.constrainResolution_)&&(o=o?o>0?1:-1:0),x2(n,o,this.lastAnchor_,this.duration_),this.mode_=void 0,this.totalDelta_=0,this.lastAnchor_=null,this.startTime_=void 0,this.timeoutId_=void 0},t.prototype.setMouseAnchor=function(r){this.useAnchor_=r,r||(this.lastAnchor_=null)},t}(tm),vst=vkr;var ykr=function(){var e=function(t,r){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,o){n.__proto__=o}||function(n,o){for(var i in o)Object.prototype.hasOwnProperty.call(o,i)&&(n[i]=o[i])},e(t,r)};return function(t,r){if(typeof r!="function"&&r!==null)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");e(t,r);function n(){this.constructor=t}t.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),_kr=function(e){ykr(t,e);function t(r){var n=this,o=r||{},i=o;return i.stopDown||(i.stopDown=Hg),n=e.call(this,i)||this,n.anchor_=null,n.lastAngle_=void 0,n.rotating_=!1,n.rotationDelta_=0,n.threshold_=o.threshold!==void 0?o.threshold:.3,n.duration_=o.duration!==void 0?o.duration:250,n}return t.prototype.handleDragEvent=function(r){var n=0,o=this.targetPointers[0],i=this.targetPointers[1],a=Math.atan2(i.clientY-o.clientY,i.clientX-o.clientX);if(this.lastAngle_!==void 0){var u=a-this.lastAngle_;this.rotationDelta_+=u,!this.rotating_&&Math.abs(this.rotationDelta_)>this.threshold_&&(this.rotating_=!0),n=u}this.lastAngle_=a;var d=r.map,h=d.getView();if(h.getConstraints().rotation!==M2){var v=d.getViewport().getBoundingClientRect(),b=w2(this.targetPointers);b[0]-=v.left,b[1]-=v.top,this.anchor_=d.getCoordinateFromPixelInternal(b),this.rotating_&&(d.render(),h.adjustRotationInternal(n,this.anchor_))}},t.prototype.handleUpEvent=function(r){if(this.targetPointers.length<2){var n=r.map,o=n.getView();return o.endInteraction(this.duration_),!1}else return!0},t.prototype.handleDownEvent=function(r){if(this.targetPointers.length>=2){var n=r.map;return this.anchor_=null,this.lastAngle_=void 0,this.rotating_=!1,this.rotationDelta_=0,this.handlingDownUpSequence||n.getView().beginInteraction(),!0}else return!1},t}(rm),yst=_kr;var bkr=function(){var e=function(t,r){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,o){n.__proto__=o}||function(n,o){for(var i in o)Object.prototype.hasOwnProperty.call(o,i)&&(n[i]=o[i])},e(t,r)};return function(t,r){if(typeof r!="function"&&r!==null)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");e(t,r);function n(){this.constructor=t}t.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),xkr=function(e){bkr(t,e);function t(r){var n=this,o=r||{},i=o;return i.stopDown||(i.stopDown=Hg),n=e.call(this,i)||this,n.anchor_=null,n.duration_=o.duration!==void 0?o.duration:400,n.lastDistance_=void 0,n.lastScaleDelta_=1,n}return t.prototype.handleDragEvent=function(r){var n=1,o=this.targetPointers[0],i=this.targetPointers[1],a=o.clientX-i.clientX,u=o.clientY-i.clientY,d=Math.sqrt(a*a+u*u);this.lastDistance_!==void 0&&(n=this.lastDistance_/d),this.lastDistance_=d;var h=r.map,v=h.getView();n!=1&&(this.lastScaleDelta_=n);var b=h.getViewport().getBoundingClientRect(),x=w2(this.targetPointers);x[0]-=b.left,x[1]-=b.top,this.anchor_=h.getCoordinateFromPixelInternal(x),h.render(),v.adjustResolutionInternal(n,this.anchor_)},t.prototype.handleUpEvent=function(r){if(this.targetPointers.length<2){var n=r.map,o=n.getView(),i=this.lastScaleDelta_>1?1:-1;return o.endInteraction(this.duration_,i),!1}else return!0},t.prototype.handleDownEvent=function(r){if(this.targetPointers.length>=2){var n=r.map;return this.anchor_=null,this.lastDistance_=void 0,this.lastScaleDelta_=1,this.handlingDownUpSequence||n.getView().beginInteraction(),!0}else return!1},t}(rm),_st=xkr;var wkr=function(){var e=function(t,r){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,o){n.__proto__=o}||function(n,o){for(var i in o)Object.prototype.hasOwnProperty.call(o,i)&&(n[i]=o[i])},e(t,r)};return function(t,r){if(typeof r!="function"&&r!==null)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");e(t,r);function n(){this.constructor=t}t.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),Ekr=function(e){wkr(t,e);function t(r,n,o){var i=e.call(this,r)||this;return i.map=n,i.frameState=o!==void 0?o:null,i}return t}(du),S0=Ekr;var Skr=function(){var e=function(t,r){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,o){n.__proto__=o}||function(n,o){for(var i in o)Object.prototype.hasOwnProperty.call(o,i)&&(n[i]=o[i])},e(t,r)};return function(t,r){if(typeof r!="function"&&r!==null)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");e(t,r);function n(){this.constructor=t}t.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),Tkr=function(e){Skr(t,e);function t(r,n,o,i,a,u){var d=e.call(this,r,n,a)||this;return d.originalEvent=o,d.pixel_=null,d.coordinate_=null,d.dragging=i!==void 0?i:!1,d.activePointers=u,d}return Object.defineProperty(t.prototype,"pixel",{get:function(){return this.pixel_||(this.pixel_=this.map.getEventPixel(this.originalEvent)),this.pixel_},set:function(r){this.pixel_=r},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"coordinate",{get:function(){return this.coordinate_||(this.coordinate_=this.map.getCoordinateFromPixel(this.pixel)),this.coordinate_},set:function(r){this.coordinate_=r},enumerable:!1,configurable:!0}),t.prototype.preventDefault=function(){e.prototype.preventDefault.call(this),"preventDefault"in this.originalEvent&&this.originalEvent.preventDefault()},t.prototype.stopPropagation=function(){e.prototype.stopPropagation.call(this),"stopPropagation"in this.originalEvent&&this.originalEvent.stopPropagation()},t}(S0),im=Tkr;var Po={OPACITY:"opacity",VISIBLE:"visible",EXTENT:"extent",Z_INDEX:"zIndex",MAX_RESOLUTION:"maxResolution",MIN_RESOLUTION:"minResolution",MAX_ZOOM:"maxZoom",MIN_ZOOM:"minZoom",SOURCE:"source",MAP:"map"};var Ikr=function(){var e=function(t,r){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,o){n.__proto__=o}||function(n,o){for(var i in o)Object.prototype.hasOwnProperty.call(o,i)&&(n[i]=o[i])},e(t,r)};return function(t,r){if(typeof r!="function"&&r!==null)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");e(t,r);function n(){this.constructor=t}t.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),Mkr=function(e){Ikr(t,e);function t(r){var n=e.call(this)||this;n.on,n.once,n.un,n.background_=r.background;var o=Ei({},r);return typeof r.properties=="object"&&(delete o.properties,Ei(o,r.properties)),o[Po.OPACITY]=r.opacity!==void 0?r.opacity:1,Ln(typeof o[Po.OPACITY]=="number",64),o[Po.VISIBLE]=r.visible!==void 0?r.visible:!0,o[Po.Z_INDEX]=r.zIndex,o[Po.MAX_RESOLUTION]=r.maxResolution!==void 0?r.maxResolution:1/0,o[Po.MIN_RESOLUTION]=r.minResolution!==void 0?r.minResolution:0,o[Po.MIN_ZOOM]=r.minZoom!==void 0?r.minZoom:-1/0,o[Po.MAX_ZOOM]=r.maxZoom!==void 0?r.maxZoom:1/0,n.className_=o.className!==void 0?o.className:"ol-layer",delete o.className,n.setProperties(o),n.state_=null,n}return t.prototype.getBackground=function(){return this.background_},t.prototype.getClassName=function(){return this.className_},t.prototype.getLayerState=function(r){var n=this.state_||{layer:this,managed:r===void 0?!0:r},o=this.getZIndex();return n.opacity=Ai(Math.round(this.getOpacity()*100)/100,0,1),n.visible=this.getVisible(),n.extent=this.getExtent(),n.zIndex=o===void 0&&!n.managed?1/0:o,n.maxResolution=this.getMaxResolution(),n.minResolution=Math.max(this.getMinResolution(),0),n.minZoom=this.getMinZoom(),n.maxZoom=this.getMaxZoom(),this.state_=n,n},t.prototype.getLayersArray=function(r){return Oo()},t.prototype.getLayerStatesArray=function(r){return Oo()},t.prototype.getExtent=function(){return this.get(Po.EXTENT)},t.prototype.getMaxResolution=function(){return this.get(Po.MAX_RESOLUTION)},t.prototype.getMinResolution=function(){return this.get(Po.MIN_RESOLUTION)},t.prototype.getMinZoom=function(){return this.get(Po.MIN_ZOOM)},t.prototype.getMaxZoom=function(){return this.get(Po.MAX_ZOOM)},t.prototype.getOpacity=function(){return this.get(Po.OPACITY)},t.prototype.getSourceState=function(){return Oo()},t.prototype.getVisible=function(){return this.get(Po.VISIBLE)},t.prototype.getZIndex=function(){return this.get(Po.Z_INDEX)},t.prototype.setBackground=function(r){this.background_=r,this.changed()},t.prototype.setExtent=function(r){this.set(Po.EXTENT,r)},t.prototype.setMaxResolution=function(r){this.set(Po.MAX_RESOLUTION,r)},t.prototype.setMinResolution=function(r){this.set(Po.MIN_RESOLUTION,r)},t.prototype.setMaxZoom=function(r){this.set(Po.MAX_ZOOM,r)},t.prototype.setMinZoom=function(r){this.set(Po.MIN_ZOOM,r)},t.prototype.setOpacity=function(r){Ln(typeof r=="number",64),this.set(Po.OPACITY,r)},t.prototype.setVisible=function(r){this.set(Po.VISIBLE,r)},t.prototype.setZIndex=function(r){this.set(Po.Z_INDEX,r)},t.prototype.disposeInternal=function(){this.state_&&(this.state_.layer=null,this.state_=null),e.prototype.disposeInternal.call(this)},t}(al),q7=Mkr;var mu={PRERENDER:"prerender",POSTRENDER:"postrender",PRECOMPOSE:"precompose",POSTCOMPOSE:"postcompose",RENDERCOMPLETE:"rendercomplete"};var Ckr=function(){var e=function(t,r){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,o){n.__proto__=o}||function(n,o){for(var i in o)Object.prototype.hasOwnProperty.call(o,i)&&(n[i]=o[i])},e(t,r)};return function(t,r){if(typeof r!="function"&&r!==null)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");e(t,r);function n(){this.constructor=t}t.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),Akr=function(e){Ckr(t,e);function t(r){var n=this,o=Ei({},r);delete o.source,n=e.call(this,o)||this,n.on,n.once,n.un,n.mapPrecomposeKey_=null,n.mapRenderKey_=null,n.sourceChangeKey_=null,n.renderer_=null,n.rendered=!1,r.render&&(n.render=r.render),r.map&&n.setMap(r.map),n.addChangeListener(Po.SOURCE,n.handleSourcePropertyChange_);var i=r.source?r.source:null;return n.setSource(i),n}return t.prototype.getLayersArray=function(r){var n=r||[];return n.push(this),n},t.prototype.getLayerStatesArray=function(r){var n=r||[];return n.push(this.getLayerState()),n},t.prototype.getSource=function(){return this.get(Po.SOURCE)||null},t.prototype.getRenderSource=function(){return this.getSource()},t.prototype.getSourceState=function(){var r=this.getSource();return r?r.getState():"undefined"},t.prototype.handleSourceChange_=function(){this.changed()},t.prototype.handleSourcePropertyChange_=function(){this.sourceChangeKey_&&($o(this.sourceChangeKey_),this.sourceChangeKey_=null);var r=this.getSource();r&&(this.sourceChangeKey_=oo(r,Or.CHANGE,this.handleSourceChange_,this)),this.changed()},t.prototype.getFeatures=function(r){return this.renderer_?this.renderer_.getFeatures(r):new Promise(function(n){return n([])})},t.prototype.getData=function(r){return!this.renderer_||!this.rendered?null:this.renderer_.getData(r)},t.prototype.render=function(r,n){var o=this.getRenderer();if(o.prepareFrame(r))return this.rendered=!0,o.renderFrame(r,n)},t.prototype.unrender=function(){this.rendered=!1},t.prototype.setMapInternal=function(r){r||this.unrender(),this.set(Po.MAP,r)},t.prototype.getMapInternal=function(){return this.get(Po.MAP)},t.prototype.setMap=function(r){this.mapPrecomposeKey_&&($o(this.mapPrecomposeKey_),this.mapPrecomposeKey_=null),r||this.changed(),this.mapRenderKey_&&($o(this.mapRenderKey_),this.mapRenderKey_=null),r&&(this.mapPrecomposeKey_=oo(r,mu.PRECOMPOSE,function(n){var o=n,i=o.frameState.layerStatesArray,a=this.getLayerState(!1);Ln(!i.some(function(u){return u.layer===a.layer}),67),i.push(a)},this),this.mapRenderKey_=oo(this,Or.CHANGE,r.render,r),this.changed())},t.prototype.setSource=function(r){this.set(Po.SOURCE,r)},t.prototype.getRenderer=function(){return this.renderer_||(this.renderer_=this.createRenderer()),this.renderer_},t.prototype.hasRenderer=function(){return!!this.renderer_},t.prototype.createRenderer=function(){return null},t.prototype.disposeInternal=function(){this.renderer_&&(this.renderer_.dispose(),delete this.renderer_),this.setSource(null),e.prototype.disposeInternal.call(this)},t}(q7);function fb(e,t){if(!e.visible)return!1;var r=t.resolution;if(r<e.minResolution||r>=e.maxResolution)return!1;var n=t.zoom;return n>e.minZoom&&n<=e.maxZoom}var EP=Akr;var qc={IDLE:0,LOADING:1,LOADED:2,ERROR:3,EMPTY:4};function sue(e){return e[0]>0&&e[1]>0}function bst(e,t,r){return r===void 0&&(r=[0,0]),r[0]=e[0]*t+.5|0,r[1]=e[1]*t+.5|0,r}function sl(e,t){return Array.isArray(e)?e:(t===void 0?t=[e,e]:(t[0]=e,t[1]=e),t)}var wst=/^#([a-f0-9]{3}|[a-f0-9]{4}(?:[a-f0-9]{2}){0,2})$/i,Est=/^([a-z]*)$|^hsla?\(.*\)$/i;function Sst(e){return typeof e=="string"?e:Pkr(e)}function Tst(e){var t=document.createElement("div");if(t.style.color=e,t.style.color!==""){document.body.appendChild(t);var r=getComputedStyle(t).color;return document.body.removeChild(t),r}else return""}var lue=function(){var e=1024,t={},r=0;return function(n){var o;if(t.hasOwnProperty(n))o=t[n];else{if(r>=e){var i=0;for(var a in t)(i++&3)===0&&(delete t[a],--r)}o=Okr(n),t[n]=o,++r}return o}}();function Ist(e){return Array.isArray(e)?e:lue(e)}function Okr(e){var t,r,n,o,i;if(Est.exec(e)&&(e=Tst(e)),wst.exec(e)){var a=e.length-1,u=void 0;a<=4?u=1:u=2;var d=a===4||a===8;t=parseInt(e.substr(1+0*u,u),16),r=parseInt(e.substr(1+1*u,u),16),n=parseInt(e.substr(1+2*u,u),16),d?o=parseInt(e.substr(1+3*u,u),16):o=255,u==1&&(t=(t<<4)+t,r=(r<<4)+r,n=(n<<4)+n,d&&(o=(o<<4)+o)),i=[t,r,n,o/255]}else e.indexOf("rgba(")==0?(i=e.slice(5,-1).split(",").map(Number),xst(i)):e.indexOf("rgb(")==0?(i=e.slice(4,-1).split(",").map(Number),i.push(1),xst(i)):Ln(!1,14);return i}function xst(e){return e[0]=Ai(e[0]+.5|0,0,255),e[1]=Ai(e[1]+.5|0,0,255),e[2]=Ai(e[2]+.5|0,0,255),e[3]=Ai(e[3],0,1),e}function Pkr(e){var t=e[0];t!=(t|0)&&(t=t+.5|0);var r=e[1];r!=(r|0)&&(r=r+.5|0);var n=e[2];n!=(n|0)&&(n=n+.5|0);var o=e[3]===void 0?1:Math.round(e[3]*100)/100;return"rgba("+t+","+r+","+n+","+o+")"}function Mst(e){return Est.test(e)&&(e=Tst(e)),wst.test(e)||e.indexOf("rgba(")===0||e.indexOf("rgb(")===0}var am=new al,Nkr=new Ef;Nkr.setSize=function(){console.warn("labelCache is deprecated.")};var C2=null,uue,Dkr={},dWn=function(){var e=100,t="32px ",r=["monospace","serif"],n=r.length,o="wmytzilWMYTZIL@#/&?$%10\uF013",i,a;function u(h,v,b){for(var x=!0,M=0;M<n;++M){var O=r[M];if(a=Cst(h+" "+v+" "+t+O,o),b!=O){var D=Cst(h+" "+v+" "+t+b+","+O,o);x=x&&D!=a}}return!!x}function d(){for(var h=!0,v=am.getKeys(),b=0,x=v.length;b<x;++b){var M=v[b];am.get(M)<e&&(u.apply(this,M.split(`
`))?(ff(Dkr),C2=null,uue=void 0,am.set(M,e)):(am.set(M,am.get(M)+1,!0),h=!1))}h&&(clearInterval(i),i=void 0)}return function(h){var v=est(h);if(v)for(var b=v.families,x=0,M=b.length;x<M;++x){var O=b[x],D=v.style+`
`+v.weight+`
`+O;am.get(D)===void 0&&(am.set(D,e,!0),u(v.style,v.weight,O)||(am.set(D,0,!0),i===void 0&&(i=setInterval(d,32))))}}}();function Lkr(e,t){return C2||(C2=$g(1,1)),e!=uue&&(C2.font=e,uue=C2.font),C2.measureText(t)}function Cst(e,t){return Lkr(e,t).width}var kkr=function(){var e=function(t,r){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,o){n.__proto__=o}||function(n,o){for(var i in o)Object.prototype.hasOwnProperty.call(o,i)&&(n[i]=o[i])},e(t,r)};return function(t,r){if(typeof r!="function"&&r!==null)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");e(t,r);function n(){this.constructor=t}t.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),Rkr=function(e){kkr(t,e);function t(r){var n=e.call(this)||this;return n.ready=!0,n.boundHandleImageChange_=n.handleImageChange_.bind(n),n.layer_=r,n.declutterExecutorGroup=null,n}return t.prototype.getFeatures=function(r){return Oo()},t.prototype.getData=function(r){return null},t.prototype.prepareFrame=function(r){return Oo()},t.prototype.renderFrame=function(r,n){return Oo()},t.prototype.loadedTileCallback=function(r,n,o){r[n]||(r[n]={}),r[n][o.tileCoord.toString()]=o},t.prototype.createLoadedTileFinder=function(r,n,o){return function(i,a){var u=this.loadedTileCallback.bind(this,o,i);return r.forEachLoadedTile(n,i,a,u)}.bind(this)},t.prototype.forEachFeatureAtCoordinate=function(r,n,o,i,a){},t.prototype.getDataAtPixel=function(r,n,o){return null},t.prototype.getLayer=function(){return this.layer_},t.prototype.handleFontsChanged=function(){},t.prototype.handleImageChange_=function(r){var n=r.target;n.getState()===qc.LOADED&&this.renderIfReadyAndVisible()},t.prototype.loadImage=function(r){var n=r.getState();return n!=qc.LOADED&&n!=qc.ERROR&&r.addEventListener(Or.CHANGE,this.boundHandleImageChange_),n==qc.IDLE&&(r.load(),n=r.getState()),n==qc.LOADED},t.prototype.renderIfReadyAndVisible=function(){var r=this.getLayer();r&&r.getVisible()&&r.getSourceState()==="ready"&&r.changed()},t.prototype.disposeInternal=function(){delete this.layer_,e.prototype.disposeInternal.call(this)},t}(S7),Ast=Rkr;var jkr=function(){var e=function(t,r){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,o){n.__proto__=o}||function(n,o){for(var i in o)Object.prototype.hasOwnProperty.call(o,i)&&(n[i]=o[i])},e(t,r)};return function(t,r){if(typeof r!="function"&&r!==null)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");e(t,r);function n(){this.constructor=t}t.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),qkr=function(e){jkr(t,e);function t(r,n,o,i){var a=e.call(this,r)||this;return a.inversePixelTransform=n,a.frameState=o,a.context=i,a}return t}(du),A2=qkr;var zc={ANIMATING:0,INTERACTING:1};var zkr=function(){function e(){this.cache_={},this.cacheSize_=0,this.maxCacheSize_=32}return e.prototype.clear=function(){this.cache_={},this.cacheSize_=0},e.prototype.canExpireCache=function(){return this.cacheSize_>this.maxCacheSize_},e.prototype.expire=function(){if(this.canExpireCache()){var t=0;for(var r in this.cache_){var n=this.cache_[r];(t++&3)===0&&!n.hasListener()&&(delete this.cache_[r],--this.cacheSize_)}}},e.prototype.get=function(t,r,n){var o=Ost(t,r,n);return o in this.cache_?this.cache_[o]:null},e.prototype.set=function(t,r,n,o){var i=Ost(t,r,n);this.cache_[i]=o,++this.cacheSize_},e.prototype.setSize=function(t){this.maxCacheSize_=t,this.expire()},e}();function Ost(e,t,r){var n=r?Sst(r):"null";return t+":"+e+":"+n}var cue=new zkr;var Fkr=function(){var e=function(t,r){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,o){n.__proto__=o}||function(n,o){for(var i in o)Object.prototype.hasOwnProperty.call(o,i)&&(n[i]=o[i])},e(t,r)};return function(t,r){if(typeof r!="function"&&r!==null)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");e(t,r);function n(){this.constructor=t}t.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),Ukr=function(e){Fkr(t,e);function t(r,n,o,i){var a=e.call(this)||this;return a.extent=r,a.pixelRatio_=o,a.resolution=n,a.state=i,a}return t.prototype.changed=function(){this.dispatchEvent(Or.CHANGE)},t.prototype.getExtent=function(){return this.extent},t.prototype.getImage=function(){return Oo()},t.prototype.getPixelRatio=function(){return this.pixelRatio_},t.prototype.getResolution=function(){return this.resolution},t.prototype.getState=function(){return this.state},t.prototype.load=function(){Oo()},t}(Ef),Pst=Ukr;var Bkr=function(){var e=function(t,r){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,o){n.__proto__=o}||function(n,o){for(var i in o)Object.prototype.hasOwnProperty.call(o,i)&&(n[i]=o[i])},e(t,r)};return function(t,r){if(typeof r!="function"&&r!==null)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");e(t,r);function n(){this.constructor=t}t.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),kWn=function(e){Bkr(t,e);function t(r,n,o,i,a,u){var d=e.call(this,r,n,o,qc.IDLE)||this;return d.src_=i,d.image_=new Image,a!==null&&(d.image_.crossOrigin=a),d.unlisten_=null,d.state=qc.IDLE,d.imageLoadFunction_=u,d}return t.prototype.getImage=function(){return this.image_},t.prototype.handleImageError_=function(){this.state=qc.ERROR,this.unlistenImage_(),this.changed()},t.prototype.handleImageLoad_=function(){this.resolution===void 0&&(this.resolution=ql(this.extent)/this.image_.height),this.state=qc.LOADED,this.unlistenImage_(),this.changed()},t.prototype.load=function(){(this.state==qc.IDLE||this.state==qc.ERROR)&&(this.state=qc.LOADING,this.changed(),this.imageLoadFunction_(this,this.src_),this.unlisten_=pue(this.image_,this.handleImageLoad_.bind(this),this.handleImageError_.bind(this)))},t.prototype.setImage=function(r){this.image_=r,this.resolution=ql(this.extent)/this.image_.height},t.prototype.unlistenImage_=function(){this.unlisten_&&(this.unlisten_(),this.unlisten_=null)},t}(Pst);function pue(e,t,r){var n=e,o=!0,i=!1,a=!1,u=[b2(n,Or.LOAD,function(){a=!0,i||t()})];return n.src&&hat?(i=!0,n.decode().then(function(){o&&t()}).catch(function(d){o&&(a?t():r())})):u.push(b2(n,Or.ERROR,r)),function(){o=!1,u.forEach($o)}}var Vkr=function(){var e=function(t,r){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,o){n.__proto__=o}||function(n,o){for(var i in o)Object.prototype.hasOwnProperty.call(o,i)&&(n[i]=o[i])},e(t,r)};return function(t,r){if(typeof r!="function"&&r!==null)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");e(t,r);function n(){this.constructor=t}t.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),Gkr=function(e){Vkr(t,e);function t(r){var n=e.call(this)||this;n.projection=Nc(r.projection),n.attributions_=Nst(r.attributions),n.attributionsCollapsible_=r.attributionsCollapsible!==void 0?r.attributionsCollapsible:!0,n.loading=!1,n.state_=r.state!==void 0?r.state:"ready",n.wrapX_=r.wrapX!==void 0?r.wrapX:!1,n.interpolate_=!!r.interpolate,n.viewResolver=null,n.viewRejector=null;var o=n;return n.viewPromise_=new Promise(function(i,a){o.viewResolver=i,o.viewRejector=a}),n}return t.prototype.getAttributions=function(){return this.attributions_},t.prototype.getAttributionsCollapsible=function(){return this.attributionsCollapsible_},t.prototype.getProjection=function(){return this.projection},t.prototype.getResolutions=function(){return Oo()},t.prototype.getView=function(){return this.viewPromise_},t.prototype.getState=function(){return this.state_},t.prototype.getWrapX=function(){return this.wrapX_},t.prototype.getInterpolate=function(){return this.interpolate_},t.prototype.refresh=function(){this.changed()},t.prototype.setAttributions=function(r){this.attributions_=Nst(r),this.changed()},t.prototype.setState=function(r){this.state_=r,this.changed()},t}(al);function Nst(e){return e?Array.isArray(e)?function(t){return e}:typeof e=="function"?e:function(t){return[e]}:null}var Dst=Gkr;function z7(e){var t=e||{},r=new Zu,n=new gst(-.005,.05,100),o=t.altShiftDragRotate!==void 0?t.altShiftDragRotate:!0;o&&r.push(new dst);var i=t.doubleClickZoom!==void 0?t.doubleClickZoom:!0;i&&r.push(new ust({delta:t.zoomDelta,duration:t.zoomDuration}));var a=t.dragPan!==void 0?t.dragPan:!0;a&&r.push(new cst({onFocusOnly:t.onFocusOnly,kinetic:n}));var u=t.pinchRotate!==void 0?t.pinchRotate:!0;u&&r.push(new yst);var d=t.pinchZoom!==void 0?t.pinchZoom:!0;d&&r.push(new _st({duration:t.zoomDuration}));var h=t.keyboard!==void 0?t.keyboard:!0;h&&(r.push(new hst),r.push(new mst({delta:t.zoomDelta,duration:t.zoomDuration})));var v=t.mouseWheelZoom!==void 0?t.mouseWheelZoom:!0;v&&r.push(new vst({onFocusOnly:t.onFocusOnly,duration:t.zoomDuration}));var b=t.shiftDragZoom!==void 0?t.shiftDragZoom:!0;return b&&r.push(new R7({duration:t.zoomDuration})),r}var Hkr=function(){var e=function(t,r){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,o){n.__proto__=o}||function(n,o){for(var i in o)Object.prototype.hasOwnProperty.call(o,i)&&(n[i]=o[i])},e(t,r)};return function(t,r){if(typeof r!="function"&&r!==null)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");e(t,r);function n(){this.constructor=t}t.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),Wkr=function(e){Hkr(t,e);function t(r){var n=e.call(this)||this;return n.map_=r,n}return t.prototype.dispatchRenderEvent=function(r,n){Oo()},t.prototype.calculateMatrices2D=function(r){var n=r.viewState,o=r.coordinateToPixelTransform,i=r.pixelToCoordinateTransform;x0(o,r.size[0]/2,r.size[1]/2,1/n.resolution,-1/n.resolution,-n.rotation,-n.center[0],-n.center[1]),gat(i,o)},t.prototype.forEachFeatureAtCoordinate=function(r,n,o,i,a,u,d,h){var v,b=n.viewState;function x(Je,tt,Et,Xe){return a.call(u,tt,Je?Et:null,Xe)}var M=b.projection,O=DJe(r.slice(),M),D=[[0,0]];if(M.canWrapX()&&i){var k=M.getExtent(),R=ta(k);D.push([-R,0],[R,0])}for(var q=n.layerStatesArray,B=q.length,G=[],re=[],Q=0;Q<D.length;Q++)for(var ie=B-1;ie>=0;--ie){var me=q[ie],ve=me.layer;if(ve.hasRenderer()&&fb(me,b)&&d.call(h,ve)){var ye=ve.getRenderer(),we=ve.getSource();if(ye&&we){var Se=we.getWrapX()?O:r,ge=x.bind(null,me.managed);re[0]=Se[0]+D[Q][0],re[1]=Se[1]+D[Q][1],v=ye.forEachFeatureAtCoordinate(re,n,o,ge,G)}if(v)return v}}if(G.length!==0){var Re=1/G.length;return G.forEach(function(Je,tt){return Je.distanceSq+=tt*Re}),G.sort(function(Je,tt){return Je.distanceSq-tt.distanceSq}),G.some(function(Je){return v=Je.callback(Je.feature,Je.layer,Je.geometry)}),v}},t.prototype.forEachLayerAtPixel=function(r,n,o,i,a){return Oo()},t.prototype.hasFeatureAtCoordinate=function(r,n,o,i,a,u){var d=this.forEachFeatureAtCoordinate(r,n,o,i,y0,this,a,u);return d!==void 0},t.prototype.getMap=function(){return this.map_},t.prototype.renderFrame=function(r){Oo()},t.prototype.scheduleExpireIconCache=function(r){cue.canExpireCache()&&r.postRenderFunctions.push($kr)},t}(v0);function $kr(e,t){cue.expire()}var Lst=Wkr;var Zkr=function(){var e=function(t,r){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,o){n.__proto__=o}||function(n,o){for(var i in o)Object.prototype.hasOwnProperty.call(o,i)&&(n[i]=o[i])},e(t,r)};return function(t,r){if(typeof r!="function"&&r!==null)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");e(t,r);function n(){this.constructor=t}t.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),Ykr=function(e){Zkr(t,e);function t(r){var n=e.call(this,r)||this;n.fontChangeListenerKey_=oo(am,Gg.PROPERTYCHANGE,r.redrawText.bind(r)),n.element_=document.createElement("div");var o=n.element_.style;o.position="absolute",o.width="100%",o.height="100%",o.zIndex="0",n.element_.className=If+" ol-layers";var i=r.getViewport();return i.insertBefore(n.element_,i.firstChild||null),n.children_=[],n.renderedVisible_=!0,n}return t.prototype.dispatchRenderEvent=function(r,n){var o=this.getMap();if(o.hasListener(r)){var i=new A2(r,void 0,n);o.dispatchEvent(i)}},t.prototype.disposeInternal=function(){$o(this.fontChangeListenerKey_),this.element_.parentNode.removeChild(this.element_),e.prototype.disposeInternal.call(this)},t.prototype.renderFrame=function(r){if(!r){this.renderedVisible_&&(this.element_.style.display="none",this.renderedVisible_=!1);return}this.calculateMatrices2D(r),this.dispatchRenderEvent(mu.PRECOMPOSE,r);var n=r.layerStatesArray.sort(function(M,O){return M.zIndex-O.zIndex}),o=r.viewState;this.children_.length=0;for(var i=[],a=null,u=0,d=n.length;u<d;++u){var h=n[u];r.layerIndex=u;var v=h.layer,b=v.getSourceState();if(!fb(h,o)||b!="ready"&&b!="undefined"){v.unrender();continue}var x=v.render(r,a);x&&(x!==a&&(this.children_.push(x),a=x),"getDeclutter"in v&&i.push(v))}for(var u=i.length-1;u>=0;--u)i[u].renderDeclutter(r);Qat(this.element_,this.children_),this.dispatchRenderEvent(mu.POSTCOMPOSE,r),this.renderedVisible_||(this.element_.style.display="",this.renderedVisible_=!0),this.scheduleExpireIconCache(r)},t.prototype.forEachLayerAtPixel=function(r,n,o,i,a){for(var u=n.viewState,d=n.layerStatesArray,h=d.length,v=h-1;v>=0;--v){var b=d[v],x=b.layer;if(x.hasRenderer()&&fb(b,u)&&a(x)){var M=x.getRenderer(),O=M.getDataAtPixel(r,n,o);if(O){var D=i(x,O);if(D)return D}}}},t}(Lst),kst=Ykr;var Rst=function(){var e=function(t,r){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,o){n.__proto__=o}||function(n,o){for(var i in o)Object.prototype.hasOwnProperty.call(o,i)&&(n[i]=o[i])},e(t,r)};return function(t,r){if(typeof r!="function"&&r!==null)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");e(t,r);function n(){this.constructor=t}t.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),Zg=function(e){Rst(t,e);function t(r,n){var o=e.call(this,r)||this;return o.layer=n,o}return t}(du);var fue={LAYERS:"layers"},Kkr=function(e){Rst(t,e);function t(r){var n=this,o=r||{},i=Ei({},o);delete i.layers;var a=o.layers;return n=e.call(this,i)||this,n.on,n.once,n.un,n.layersListenerKeys_=[],n.listenerKeys_={},n.addChangeListener(fue.LAYERS,n.handleLayersChanged_),a?Array.isArray(a)?a=new Zu(a.slice(),{unique:!0}):Ln(typeof a.getArray=="function",43):a=new Zu(void 0,{unique:!0}),n.setLayers(a),n}return t.prototype.handleLayerChange_=function(){this.changed()},t.prototype.handleLayersChanged_=function(){this.layersListenerKeys_.forEach($o),this.layersListenerKeys_.length=0;var r=this.getLayers();this.layersListenerKeys_.push(oo(r,$u.ADD,this.handleLayersAdd_,this),oo(r,$u.REMOVE,this.handleLayersRemove_,this));for(var n in this.listenerKeys_)this.listenerKeys_[n].forEach($o);ff(this.listenerKeys_);for(var o=r.getArray(),i=0,a=o.length;i<a;i++){var u=o[i];this.registerLayerListeners_(u),this.dispatchEvent(new Zg("addlayer",u))}this.changed()},t.prototype.registerLayerListeners_=function(r){var n=[oo(r,Gg.PROPERTYCHANGE,this.handleLayerChange_,this),oo(r,Or.CHANGE,this.handleLayerChange_,this)];r instanceof t&&n.push(oo(r,"addlayer",this.handleLayerGroupAdd_,this),oo(r,"removelayer",this.handleLayerGroupRemove_,this)),this.listenerKeys_[Ka(r)]=n},t.prototype.handleLayerGroupAdd_=function(r){this.dispatchEvent(new Zg("addlayer",r.layer))},t.prototype.handleLayerGroupRemove_=function(r){this.dispatchEvent(new Zg("removelayer",r.layer))},t.prototype.handleLayersAdd_=function(r){var n=r.element;this.registerLayerListeners_(n),this.dispatchEvent(new Zg("addlayer",n)),this.changed()},t.prototype.handleLayersRemove_=function(r){var n=r.element,o=Ka(n);this.listenerKeys_[o].forEach($o),delete this.listenerKeys_[o],this.dispatchEvent(new Zg("removelayer",n)),this.changed()},t.prototype.getLayers=function(){return this.get(fue.LAYERS)},t.prototype.setLayers=function(r){var n=this.getLayers();if(n)for(var o=n.getArray(),i=0,a=o.length;i<a;++i)this.dispatchEvent(new Zg("removelayer",o[i]));this.set(fue.LAYERS,r)},t.prototype.getLayersArray=function(r){var n=r!==void 0?r:[];return this.getLayers().forEach(function(o){o.getLayersArray(n)}),n},t.prototype.getLayerStatesArray=function(r){var n=r!==void 0?r:[],o=n.length;this.getLayers().forEach(function(v){v.getLayerStatesArray(n)});var i=this.getLayerState(),a=i.zIndex;!r&&i.zIndex===void 0&&(a=0);for(var u=o,d=n.length;u<d;u++){var h=n[u];h.opacity*=i.opacity,h.visible=h.visible&&i.visible,h.maxResolution=Math.min(h.maxResolution,i.maxResolution),h.minResolution=Math.max(h.minResolution,i.minResolution),h.minZoom=Math.max(h.minZoom,i.minZoom),h.maxZoom=Math.min(h.maxZoom,i.maxZoom),i.extent!==void 0&&(h.extent!==void 0?h.extent=Uh(h.extent,i.extent):h.extent=i.extent),h.zIndex===void 0&&(h.zIndex=a)}return n},t.prototype.getSourceState=function(){return"ready"},t}(q7),SP=Kkr;var TP={POINTERMOVE:"pointermove",POINTERDOWN:"pointerdown",POINTERUP:"pointerup",POINTEROVER:"pointerover",POINTEROUT:"pointerout",POINTERENTER:"pointerenter",POINTERLEAVE:"pointerleave",POINTERCANCEL:"pointercancel"};var Xkr=function(){var e=function(t,r){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,o){n.__proto__=o}||function(n,o){for(var i in o)Object.prototype.hasOwnProperty.call(o,i)&&(n[i]=o[i])},e(t,r)};return function(t,r){if(typeof r!="function"&&r!==null)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");e(t,r);function n(){this.constructor=t}t.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),Qkr=function(e){Xkr(t,e);function t(r,n){var o=e.call(this,r)||this;o.map_=r,o.clickTimeoutId_,o.emulateClicks_=!1,o.dragging_=!1,o.dragListenerKeys_=[],o.moveTolerance_=n===void 0?1:n,o.down_=null;var i=o.map_.getViewport();return o.activePointers_=[],o.trackedTouches_={},o.element_=i,o.pointerdownListenerKey_=oo(i,TP.POINTERDOWN,o.handlePointerDown_,o),o.originalPointerMoveEvent_,o.relayedListenerKey_=oo(i,TP.POINTERMOVE,o.relayMoveEvent_,o),o.boundHandleTouchMove_=o.handleTouchMove_.bind(o),o.element_.addEventListener(Or.TOUCHMOVE,o.boundHandleTouchMove_,I7?{passive:!1}:!1),o}return t.prototype.emulateClick_=function(r){var n=new im(Hi.CLICK,this.map_,r);this.dispatchEvent(n),this.clickTimeoutId_!==void 0?(clearTimeout(this.clickTimeoutId_),this.clickTimeoutId_=void 0,n=new im(Hi.DBLCLICK,this.map_,r),this.dispatchEvent(n)):this.clickTimeoutId_=setTimeout(function(){this.clickTimeoutId_=void 0;var o=new im(Hi.SINGLECLICK,this.map_,r);this.dispatchEvent(o)}.bind(this),250)},t.prototype.updateActivePointers_=function(r){var n=r,o=n.pointerId;if(n.type==Hi.POINTERUP||n.type==Hi.POINTERCANCEL){delete this.trackedTouches_[o];for(var i in this.trackedTouches_)if(this.trackedTouches_[i].target!==n.target){delete this.trackedTouches_[i];break}}else(n.type==Hi.POINTERDOWN||n.type==Hi.POINTERMOVE)&&(this.trackedTouches_[o]=n);this.activePointers_=yJe(this.trackedTouches_)},t.prototype.handlePointerUp_=function(r){this.updateActivePointers_(r);var n=new im(Hi.POINTERUP,this.map_,r,void 0,void 0,this.activePointers_);this.dispatchEvent(n),this.emulateClicks_&&!n.defaultPrevented&&!this.dragging_&&this.isMouseActionButton_(r)&&this.emulateClick_(this.down_),this.activePointers_.length===0&&(this.dragListenerKeys_.forEach($o),this.dragListenerKeys_.length=0,this.dragging_=!1,this.down_=null)},t.prototype.isMouseActionButton_=function(r){return r.button===0},t.prototype.handlePointerDown_=function(r){this.emulateClicks_=this.activePointers_.length===0,this.updateActivePointers_(r);var n=new im(Hi.POINTERDOWN,this.map_,r,void 0,void 0,this.activePointers_);this.dispatchEvent(n),this.down_={};for(var o in r){var i=r[o];this.down_[o]=typeof i=="function"?Wg:i}if(this.dragListenerKeys_.length===0){var a=this.map_.getOwnerDocument();this.dragListenerKeys_.push(oo(a,Hi.POINTERMOVE,this.handlePointerMove_,this),oo(a,Hi.POINTERUP,this.handlePointerUp_,this),oo(this.element_,Hi.POINTERCANCEL,this.handlePointerUp_,this)),this.element_.getRootNode&&this.element_.getRootNode()!==a&&this.dragListenerKeys_.push(oo(this.element_.getRootNode(),Hi.POINTERUP,this.handlePointerUp_,this))}},t.prototype.handlePointerMove_=function(r){if(this.isMoving_(r)){this.updateActivePointers_(r),this.dragging_=!0;var n=new im(Hi.POINTERDRAG,this.map_,r,this.dragging_,void 0,this.activePointers_);this.dispatchEvent(n)}},t.prototype.relayMoveEvent_=function(r){this.originalPointerMoveEvent_=r;var n=!!(this.down_&&this.isMoving_(r));this.dispatchEvent(new im(Hi.POINTERMOVE,this.map_,r,n))},t.prototype.handleTouchMove_=function(r){var n=this.originalPointerMoveEvent_;(!n||n.defaultPrevented)&&(typeof r.cancelable!="boolean"||r.cancelable===!0)&&r.preventDefault()},t.prototype.isMoving_=function(r){return this.dragging_||Math.abs(r.clientX-this.down_.clientX)>this.moveTolerance_||Math.abs(r.clientY-this.down_.clientY)>this.moveTolerance_},t.prototype.disposeInternal=function(){this.relayedListenerKey_&&($o(this.relayedListenerKey_),this.relayedListenerKey_=null),this.element_.removeEventListener(Or.TOUCHMOVE,this.boundHandleTouchMove_),this.pointerdownListenerKey_&&($o(this.pointerdownListenerKey_),this.pointerdownListenerKey_=null),this.dragListenerKeys_.forEach($o),this.dragListenerKeys_.length=0,this.element_=null,e.prototype.disposeInternal.call(this)},t}(Ef),jst=Qkr;var IP=1/0,Jkr=function(){function e(t,r){this.priorityFunction_=t,this.keyFunction_=r,this.elements_=[],this.priorities_=[],this.queuedElements_={}}return e.prototype.clear=function(){this.elements_.length=0,this.priorities_.length=0,ff(this.queuedElements_)},e.prototype.dequeue=function(){var t=this.elements_,r=this.priorities_,n=t[0];t.length==1?(t.length=0,r.length=0):(t[0]=t.pop(),r[0]=r.pop(),this.siftUp_(0));var o=this.keyFunction_(n);return delete this.queuedElements_[o],n},e.prototype.enqueue=function(t){Ln(!(this.keyFunction_(t)in this.queuedElements_),31);var r=this.priorityFunction_(t);return r!=IP?(this.elements_.push(t),this.priorities_.push(r),this.queuedElements_[this.keyFunction_(t)]=!0,this.siftDown_(0,this.elements_.length-1),!0):!1},e.prototype.getCount=function(){return this.elements_.length},e.prototype.getLeftChildIndex_=function(t){return t*2+1},e.prototype.getRightChildIndex_=function(t){return t*2+2},e.prototype.getParentIndex_=function(t){return t-1>>1},e.prototype.heapify_=function(){var t;for(t=(this.elements_.length>>1)-1;t>=0;t--)this.siftUp_(t)},e.prototype.isEmpty=function(){return this.elements_.length===0},e.prototype.isKeyQueued=function(t){return t in this.queuedElements_},e.prototype.isQueued=function(t){return this.isKeyQueued(this.keyFunction_(t))},e.prototype.siftUp_=function(t){for(var r=this.elements_,n=this.priorities_,o=r.length,i=r[t],a=n[t],u=t;t<o>>1;){var d=this.getLeftChildIndex_(t),h=this.getRightChildIndex_(t),v=h<o&&n[h]<n[d]?h:d;r[t]=r[v],n[t]=n[v],t=v}r[t]=i,n[t]=a,this.siftDown_(u,t)},e.prototype.siftDown_=function(t,r){for(var n=this.elements_,o=this.priorities_,i=n[r],a=o[r];r>t;){var u=this.getParentIndex_(r);if(o[u]>a)n[r]=n[u],o[r]=o[u],r=u;else break}n[r]=i,o[r]=a},e.prototype.reprioritize=function(){var t=this.priorityFunction_,r=this.elements_,n=this.priorities_,o=0,i=r.length,a,u,d;for(u=0;u<i;++u)a=r[u],d=t(a),d==IP?delete this.queuedElements_[this.keyFunction_(a)]:(n[o]=d,r[o++]=a);r.length=o,n.length=o,this.heapify_()},e}(),qst=Jkr;var Pr={IDLE:0,LOADING:1,LOADED:2,ERROR:3,EMPTY:4};var eRr=function(){var e=function(t,r){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,o){n.__proto__=o}||function(n,o){for(var i in o)Object.prototype.hasOwnProperty.call(o,i)&&(n[i]=o[i])},e(t,r)};return function(t,r){if(typeof r!="function"&&r!==null)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");e(t,r);function n(){this.constructor=t}t.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),tRr=function(e){eRr(t,e);function t(r,n){var o=e.call(this,function(i){return r.apply(null,i)},function(i){return i[0].getKey()})||this;return o.boundHandleTileChange_=o.handleTileChange.bind(o),o.tileChangeCallback_=n,o.tilesLoading_=0,o.tilesLoadingKeys_={},o}return t.prototype.enqueue=function(r){var n=e.prototype.enqueue.call(this,r);if(n){var o=r[0];o.addEventListener(Or.CHANGE,this.boundHandleTileChange_)}return n},t.prototype.getTilesLoading=function(){return this.tilesLoading_},t.prototype.handleTileChange=function(r){var n=r.target,o=n.getState();if(o===Pr.LOADED||o===Pr.ERROR||o===Pr.EMPTY){n.removeEventListener(Or.CHANGE,this.boundHandleTileChange_);var i=n.getKey();i in this.tilesLoadingKeys_&&(delete this.tilesLoadingKeys_[i],--this.tilesLoading_),this.tileChangeCallback_()}},t.prototype.loadMoreTiles=function(r,n){for(var o=0,i,a,u;this.tilesLoading_<r&&o<n&&this.getCount()>0;)a=this.dequeue()[0],u=a.getKey(),i=a.getState(),i===Pr.IDLE&&!(u in this.tilesLoadingKeys_)&&(this.tilesLoadingKeys_[u]=!0,++this.tilesLoading_,++o,a.load())},t}(qst),zst=tRr;function Fst(e,t,r,n,o){if(!e||!(r in e.wantedTiles))return IP;if(!e.wantedTiles[r][t.getKey()])return IP;var i=e.viewState.center,a=n[0]-i[0],u=n[1]-i[1];return 65536*Math.log(o)+Math.sqrt(a*a+u*u)/o}var Mf={CENTER:"center",RESOLUTION:"resolution",ROTATION:"rotation"};var Ust=42,T0=256;function due(e,t,r){return function(n,o,i,a,u){if(n){if(!o&&!t)return n;var d=t?0:i[0]*o,h=t?0:i[1]*o,v=u?u[0]:0,b=u?u[1]:0,x=e[0]+d/2+v,M=e[2]-d/2+v,O=e[1]+h/2+b,D=e[3]-h/2+b;x>M&&(x=(M+x)/2,M=x),O>D&&(O=(D+O)/2,D=O);var k=Ai(n[0],x,M),R=Ai(n[1],O,D);if(a&&r&&o){var q=30*o;k+=-q*Math.log(1+Math.max(0,x-n[0])/q)+q*Math.log(1+Math.max(0,n[0]-M)/q),R+=-q*Math.log(1+Math.max(0,O-n[1])/q)+q*Math.log(1+Math.max(0,n[1]-D)/q)}return[k,R]}}}function Bst(e){return e}function hue(e,t,r,n){var o=ta(t)/r[0],i=ql(t)/r[1];return n?Math.min(e,Math.max(o,i)):Math.min(e,Math.min(o,i))}function mue(e,t,r){var n=Math.min(e,t),o=50;return n*=Math.log(1+o*Math.max(0,e/t-1))/o+1,r&&(n=Math.max(n,r),n/=Math.log(1+o*Math.max(0,r/e-1))/o+1),Ai(n,r/2,t*2)}function Vst(e,t,r,n){return function(o,i,a,u){if(o!==void 0){var d=e[0],h=e[e.length-1],v=r?hue(d,r,a,n):d;if(u){var b=t!==void 0?t:!0;return b?mue(o,v,h):Ai(o,h,v)}var x=Math.min(v,o),M=Math.floor(_2(e,x,i));return e[M]>v&&M<e.length-1?e[M+1]:e[M]}else return}}function Gst(e,t,r,n,o,i){return function(a,u,d,h){if(a!==void 0){var v=o?hue(t,o,d,i):t,b=r!==void 0?r:0;if(h){var x=n!==void 0?n:!0;return x?mue(a,v,b):Ai(a,b,v)}var M=1e-9,O=Math.ceil(Math.log(t/v)/Math.log(e)-M),D=-u*(.5-M)+.5,k=Math.min(v,a),R=Math.floor(Math.log(t/k)/Math.log(e)+D),q=Math.max(O,R),B=t/Math.pow(e,q);return Ai(B,b,v)}else return}}function gue(e,t,r,n,o){return function(i,a,u,d){if(i!==void 0){var h=n?hue(e,n,u,o):e,v=r!==void 0?r:!0;return!v||!d?Ai(i,t,h):mue(i,h,t)}else return}}var rRr=function(){var e=function(t,r){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,o){n.__proto__=o}||function(n,o){for(var i in o)Object.prototype.hasOwnProperty.call(o,i)&&(n[i]=o[i])},e(t,r)};return function(t,r){if(typeof r!="function"&&r!==null)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");e(t,r);function n(){this.constructor=t}t.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),vue=0,nRr=function(e){rRr(t,e);function t(r){var n=e.call(this)||this;n.on,n.once,n.un;var o=Ei({},r);return n.hints_=[0,0],n.animations_=[],n.updateAnimationKey_,n.projection_=Oz(o.projection,"EPSG:3857"),n.viewportSize_=[100,100],n.targetCenter_=null,n.targetResolution_,n.targetRotation_,n.nextCenter_=null,n.nextResolution_,n.nextRotation_,n.cancelAnchor_=void 0,o.projection&&RJe(),o.center&&(o.center=Id(o.center,n.projection_)),o.extent&&(o.extent=o0(o.extent,n.projection_)),n.applyOptions_(o),n}return t.prototype.applyOptions_=function(r){var n=Ei({},r);for(var o in Mf)delete n[o];this.setProperties(n,!0);var i=iRr(r);this.maxResolution_=i.maxResolution,this.minResolution_=i.minResolution,this.zoomFactor_=i.zoomFactor,this.resolutions_=r.resolutions,this.padding_=r.padding,this.minZoom_=i.minZoom;var a=oRr(r),u=i.constraint,d=aRr(r);this.constraints_={center:a,resolution:u,rotation:d},this.setRotation(r.rotation!==void 0?r.rotation:0),this.setCenterInternal(r.center!==void 0?r.center:null),r.resolution!==void 0?this.setResolution(r.resolution):r.zoom!==void 0&&this.setZoom(r.zoom)},Object.defineProperty(t.prototype,"padding",{get:function(){return this.padding_},set:function(r){var n=this.padding_;this.padding_=r;var o=this.getCenter();if(o){var i=r||[0,0,0,0];n=n||[0,0,0,0];var a=this.getResolution(),u=a/2*(i[3]-n[3]+n[1]-i[1]),d=a/2*(i[0]-n[0]+n[2]-i[2]);this.setCenterInternal([o[0]+u,o[1]-d])}},enumerable:!1,configurable:!0}),t.prototype.getUpdatedOptions_=function(r){var n=this.getProperties();return n.resolution!==void 0?n.resolution=this.getResolution():n.zoom=this.getZoom(),n.center=this.getCenterInternal(),n.rotation=this.getRotation(),Ei({},n,r)},t.prototype.animate=function(r){this.isDef()&&!this.getAnimating()&&this.resolveConstraints(0);for(var n=new Array(arguments.length),o=0;o<n.length;++o){var i=arguments[o];i.center&&(i=Ei({},i),i.center=Id(i.center,this.getProjection())),i.anchor&&(i=Ei({},i),i.anchor=Id(i.anchor,this.getProjection())),n[o]=i}this.animateInternal.apply(this,n)},t.prototype.animateInternal=function(r){var n=arguments.length,o;n>1&&typeof arguments[n-1]=="function"&&(o=arguments[n-1],--n);for(var i=0;i<n&&!this.isDef();++i){var a=arguments[i];a.center&&this.setCenterInternal(a.center),a.zoom!==void 0?this.setZoom(a.zoom):a.resolution&&this.setResolution(a.resolution),a.rotation!==void 0&&this.setRotation(a.rotation)}if(i===n){o&&F7(o,!0);return}for(var u=Date.now(),d=this.targetCenter_.slice(),h=this.targetResolution_,v=this.targetRotation_,b=[];i<n;++i){var x=arguments[i],M={start:u,complete:!1,anchor:x.anchor,duration:x.duration!==void 0?x.duration:1e3,easing:x.easing||aat,callback:o};if(x.center&&(M.sourceCenter=d,M.targetCenter=x.center.slice(),d=M.targetCenter),x.zoom!==void 0?(M.sourceResolution=h,M.targetResolution=this.getResolutionForZoom(x.zoom),h=M.targetResolution):x.resolution&&(M.sourceResolution=h,M.targetResolution=x.resolution,h=M.targetResolution),x.rotation!==void 0){M.sourceRotation=v;var O=Sd(x.rotation-v+Math.PI,2*Math.PI)-Math.PI;M.targetRotation=v+O,v=M.targetRotation}sRr(M)?M.complete=!0:u+=M.duration,b.push(M)}this.animations_.push(b),this.setHint(zc.ANIMATING,1),this.updateAnimations_()},t.prototype.getAnimating=function(){return this.hints_[zc.ANIMATING]>0},t.prototype.getInteracting=function(){return this.hints_[zc.INTERACTING]>0},t.prototype.cancelAnimations=function(){this.setHint(zc.ANIMATING,-this.hints_[zc.ANIMATING]);for(var r,n=0,o=this.animations_.length;n<o;++n){var i=this.animations_[n];if(i[0].callback&&F7(i[0].callback,!1),!r)for(var a=0,u=i.length;a<u;++a){var d=i[a];if(!d.complete){r=d.anchor;break}}}this.animations_.length=0,this.cancelAnchor_=r,this.nextCenter_=null,this.nextResolution_=NaN,this.nextRotation_=NaN},t.prototype.updateAnimations_=function(){if(this.updateAnimationKey_!==void 0&&(cancelAnimationFrame(this.updateAnimationKey_),this.updateAnimationKey_=void 0),!!this.getAnimating()){for(var r=Date.now(),n=!1,o=this.animations_.length-1;o>=0;--o){for(var i=this.animations_[o],a=!0,u=0,d=i.length;u<d;++u){var h=i[u];if(!h.complete){var v=r-h.start,b=h.duration>0?v/h.duration:1;b>=1?(h.complete=!0,b=1):a=!1;var x=h.easing(b);if(h.sourceCenter){var M=h.sourceCenter[0],O=h.sourceCenter[1],D=h.targetCenter[0],k=h.targetCenter[1];this.nextCenter_=h.targetCenter;var R=M+x*(D-M),q=O+x*(k-O);this.targetCenter_=[R,q]}if(h.sourceResolution&&h.targetResolution){var B=x===1?h.targetResolution:h.sourceResolution+x*(h.targetResolution-h.sourceResolution);if(h.anchor){var G=this.getViewportSize_(this.getRotation()),re=this.constraints_.resolution(B,0,G,!0);this.targetCenter_=this.calculateCenterZoom(re,h.anchor)}this.nextResolution_=h.targetResolution,this.targetResolution_=B,this.applyTargetState_(!0)}if(h.sourceRotation!==void 0&&h.targetRotation!==void 0){var Q=x===1?Sd(h.targetRotation+Math.PI,2*Math.PI)-Math.PI:h.sourceRotation+x*(h.targetRotation-h.sourceRotation);if(h.anchor){var ie=this.constraints_.rotation(Q,!0);this.targetCenter_=this.calculateCenterRotate(ie,h.anchor)}this.nextRotation_=h.targetRotation,this.targetRotation_=Q}if(this.applyTargetState_(!0),n=!0,!h.complete)break}}if(a){this.animations_[o]=null,this.setHint(zc.ANIMATING,-1),this.nextCenter_=null,this.nextResolution_=NaN,this.nextRotation_=NaN;var me=i[0].callback;me&&F7(me,!0)}}this.animations_=this.animations_.filter(Boolean),n&&this.updateAnimationKey_===void 0&&(this.updateAnimationKey_=requestAnimationFrame(this.updateAnimations_.bind(this)))}},t.prototype.calculateCenterRotate=function(r,n){var o,i=this.getCenterInternal();return i!==void 0&&(o=[i[0]-n[0],i[1]-n[1]],HS(o,r-this.getRotation()),PJe(o,n)),o},t.prototype.calculateCenterZoom=function(r,n){var o,i=this.getCenterInternal(),a=this.getResolution();if(i!==void 0&&a!==void 0){var u=n[0]-r*(n[0]-i[0])/a,d=n[1]-r*(n[1]-i[1])/a;o=[u,d]}return o},t.prototype.getViewportSize_=function(r){var n=this.viewportSize_;if(r){var o=n[0],i=n[1];return[Math.abs(o*Math.cos(r))+Math.abs(i*Math.sin(r)),Math.abs(o*Math.sin(r))+Math.abs(i*Math.cos(r))]}else return n},t.prototype.setViewportSize=function(r){this.viewportSize_=Array.isArray(r)?r.slice():[100,100],this.getAnimating()||this.resolveConstraints(0)},t.prototype.getCenter=function(){var r=this.getCenterInternal();return r&&x4(r,this.getProjection())},t.prototype.getCenterInternal=function(){return this.get(Mf.CENTER)},t.prototype.getConstraints=function(){return this.constraints_},t.prototype.getConstrainResolution=function(){return this.get("constrainResolution")},t.prototype.getHints=function(r){return r!==void 0?(r[0]=this.hints_[0],r[1]=this.hints_[1],r):this.hints_.slice()},t.prototype.calculateExtent=function(r){var n=this.calculateExtentInternal(r);return UJe(n,this.getProjection())},t.prototype.calculateExtentInternal=function(r){var n=r||this.getViewportSizeMinusPadding_(),o=this.getCenterInternal();Ln(o,1);var i=this.getResolution();Ln(i!==void 0,2);var a=this.getRotation();return Ln(a!==void 0,3),y4(o,i,a,n)},t.prototype.getMaxResolution=function(){return this.maxResolution_},t.prototype.getMinResolution=function(){return this.minResolution_},t.prototype.getMaxZoom=function(){return this.getZoomForResolution(this.minResolution_)},t.prototype.setMaxZoom=function(r){this.applyOptions_(this.getUpdatedOptions_({maxZoom:r}))},t.prototype.getMinZoom=function(){return this.getZoomForResolution(this.maxResolution_)},t.prototype.setMinZoom=function(r){this.applyOptions_(this.getUpdatedOptions_({minZoom:r}))},t.prototype.setConstrainResolution=function(r){this.applyOptions_(this.getUpdatedOptions_({constrainResolution:r}))},t.prototype.getProjection=function(){return this.projection_},t.prototype.getResolution=function(){return this.get(Mf.RESOLUTION)},t.prototype.getResolutions=function(){return this.resolutions_},t.prototype.getResolutionForExtent=function(r,n){return this.getResolutionForExtentInternal(o0(r,this.getProjection()),n)},t.prototype.getResolutionForExtentInternal=function(r,n){var o=n||this.getViewportSizeMinusPadding_(),i=ta(r)/o[0],a=ql(r)/o[1];return Math.max(i,a)},t.prototype.getResolutionForValueFunction=function(r){var n=r||2,o=this.getConstrainedResolution(this.maxResolution_),i=this.minResolution_,a=Math.log(o/i)/Math.log(n);return function(u){var d=o/Math.pow(n,u*a);return d}},t.prototype.getRotation=function(){return this.get(Mf.ROTATION)},t.prototype.getValueForResolutionFunction=function(r){var n=Math.log(r||2),o=this.getConstrainedResolution(this.maxResolution_),i=this.minResolution_,a=Math.log(o/i)/n;return function(u){var d=Math.log(o/u)/n/a;return d}},t.prototype.getViewportSizeMinusPadding_=function(r){var n=this.getViewportSize_(r),o=this.padding_;return o&&(n=[n[0]-o[1]-o[3],n[1]-o[0]-o[2]]),n},t.prototype.getState=function(){var r=this.getProjection(),n=this.getResolution(),o=this.getRotation(),i=this.getCenterInternal(),a=this.padding_;if(a){var u=this.getViewportSizeMinusPadding_();i=yue(i,this.getViewportSize_(),[u[0]/2+a[3],u[1]/2+a[0]],n,o)}return{center:i.slice(0),projection:r!==void 0?r:null,resolution:n,nextCenter:this.nextCenter_,nextResolution:this.nextResolution_,nextRotation:this.nextRotation_,rotation:o,zoom:this.getZoom()}},t.prototype.getZoom=function(){var r,n=this.getResolution();return n!==void 0&&(r=this.getZoomForResolution(n)),r},t.prototype.getZoomForResolution=function(r){var n=this.minZoom_||0,o,i;if(this.resolutions_){var a=_2(this.resolutions_,r,1);n=a,o=this.resolutions_[a],a==this.resolutions_.length-1?i=2:i=o/this.resolutions_[a+1]}else o=this.maxResolution_,i=this.zoomFactor_;return n+Math.log(o/r)/Math.log(i)},t.prototype.getResolutionForZoom=function(r){if(this.resolutions_){if(this.resolutions_.length<=1)return 0;var n=Ai(Math.floor(r),0,this.resolutions_.length-2),o=this.resolutions_[n]/this.resolutions_[n+1];return this.resolutions_[n]/Math.pow(o,Ai(r-n,0,1))}else return this.maxResolution_/Math.pow(this.zoomFactor_,r-this.minZoom_)},t.prototype.fit=function(r,n){var o;if(Ln(Array.isArray(r)||typeof r.getSimplifiedGeometry=="function",24),Array.isArray(r)){Ln(!Y_(r),25);var i=o0(r,this.getProjection());o=_P(i)}else if(r.getType()==="Circle"){var i=o0(r.getExtent(),this.getProjection());o=_P(i),o.rotate(this.getRotation(),Td(i))}else{var a=FJe();a?o=r.clone().transform(a,this.getProjection()):o=r}this.fitInternal(o,n)},t.prototype.rotatedExtentForGeometry=function(r){for(var n=this.getRotation(),o=Math.cos(n),i=Math.sin(-n),a=r.getFlatCoordinates(),u=r.getStride(),d=1/0,h=1/0,v=-1/0,b=-1/0,x=0,M=a.length;x<M;x+=u){var O=a[x]*o-a[x+1]*i,D=a[x]*i+a[x+1]*o;d=Math.min(d,O),h=Math.min(h,D),v=Math.max(v,O),b=Math.max(b,D)}return[d,h,v,b]},t.prototype.fitInternal=function(r,n){var o=n||{},i=o.size;i||(i=this.getViewportSizeMinusPadding_());var a=o.padding!==void 0?o.padding:[0,0,0,0],u=o.nearest!==void 0?o.nearest:!1,d;o.minResolution!==void 0?d=o.minResolution:o.maxZoom!==void 0?d=this.getResolutionForZoom(o.maxZoom):d=0;var h=this.rotatedExtentForGeometry(r),v=this.getResolutionForExtentInternal(h,[i[0]-a[1]-a[3],i[1]-a[0]-a[2]]);v=isNaN(v)?d:Math.max(v,d),v=this.getConstrainedResolution(v,u?0:1);var b=this.getRotation(),x=Math.sin(b),M=Math.cos(b),O=Td(h);O[0]+=(a[1]-a[3])/2*v,O[1]+=(a[0]-a[2])/2*v;var D=O[0]*M-O[1]*x,k=O[1]*M+O[0]*x,R=this.getConstrainedCenter([D,k],v),q=o.callback?o.callback:Wg;o.duration!==void 0?this.animateInternal({resolution:v,center:R,duration:o.duration,easing:o.easing},q):(this.targetResolution_=v,this.targetCenter_=R,this.applyTargetState_(!1,!0),F7(q,!0))},t.prototype.centerOn=function(r,n,o){this.centerOnInternal(Id(r,this.getProjection()),n,o)},t.prototype.centerOnInternal=function(r,n,o){this.setCenterInternal(yue(r,n,o,this.getResolution(),this.getRotation()))},t.prototype.calculateCenterShift=function(r,n,o,i){var a,u=this.padding_;if(u&&r){var d=this.getViewportSizeMinusPadding_(-o),h=yue(r,i,[d[0]/2+u[3],d[1]/2+u[0]],n,o);a=[r[0]-h[0],r[1]-h[1]]}return a},t.prototype.isDef=function(){return!!this.getCenterInternal()&&this.getResolution()!==void 0},t.prototype.adjustCenter=function(r){var n=x4(this.targetCenter_,this.getProjection());this.setCenter([n[0]+r[0],n[1]+r[1]])},t.prototype.adjustCenterInternal=function(r){var n=this.targetCenter_;this.setCenterInternal([n[0]+r[0],n[1]+r[1]])},t.prototype.adjustResolution=function(r,n){var o=n&&Id(n,this.getProjection());this.adjustResolutionInternal(r,o)},t.prototype.adjustResolutionInternal=function(r,n){var o=this.getAnimating()||this.getInteracting(),i=this.getViewportSize_(this.getRotation()),a=this.constraints_.resolution(this.targetResolution_*r,0,i,o);n&&(this.targetCenter_=this.calculateCenterZoom(a,n)),this.targetResolution_*=r,this.applyTargetState_()},t.prototype.adjustZoom=function(r,n){this.adjustResolution(Math.pow(this.zoomFactor_,-r),n)},t.prototype.adjustRotation=function(r,n){n&&(n=Id(n,this.getProjection())),this.adjustRotationInternal(r,n)},t.prototype.adjustRotationInternal=function(r,n){var o=this.getAnimating()||this.getInteracting(),i=this.constraints_.rotation(this.targetRotation_+r,o);n&&(this.targetCenter_=this.calculateCenterRotate(i,n)),this.targetRotation_+=r,this.applyTargetState_()},t.prototype.setCenter=function(r){this.setCenterInternal(r&&Id(r,this.getProjection()))},t.prototype.setCenterInternal=function(r){this.targetCenter_=r,this.applyTargetState_()},t.prototype.setHint=function(r,n){return this.hints_[r]+=n,this.changed(),this.hints_[r]},t.prototype.setResolution=function(r){this.targetResolution_=r,this.applyTargetState_()},t.prototype.setRotation=function(r){this.targetRotation_=r,this.applyTargetState_()},t.prototype.setZoom=function(r){this.setResolution(this.getResolutionForZoom(r))},t.prototype.applyTargetState_=function(r,n){var o=this.getAnimating()||this.getInteracting()||n,i=this.constraints_.rotation(this.targetRotation_,o),a=this.getViewportSize_(i),u=this.constraints_.resolution(this.targetResolution_,0,a,o),d=this.constraints_.center(this.targetCenter_,u,a,o,this.calculateCenterShift(this.targetCenter_,u,i,a));this.get(Mf.ROTATION)!==i&&this.set(Mf.ROTATION,i),this.get(Mf.RESOLUTION)!==u&&(this.set(Mf.RESOLUTION,u),this.set("zoom",this.getZoom(),!0)),(!d||!this.get(Mf.CENTER)||!K_(this.get(Mf.CENTER),d))&&this.set(Mf.CENTER,d),this.getAnimating()&&!r&&this.cancelAnimations(),this.cancelAnchor_=void 0},t.prototype.resolveConstraints=function(r,n,o){var i=r!==void 0?r:200,a=n||0,u=this.constraints_.rotation(this.targetRotation_),d=this.getViewportSize_(u),h=this.constraints_.resolution(this.targetResolution_,a,d),v=this.constraints_.center(this.targetCenter_,h,d,!1,this.calculateCenterShift(this.targetCenter_,h,u,d));if(i===0&&!this.cancelAnchor_){this.targetResolution_=h,this.targetRotation_=u,this.targetCenter_=v,this.applyTargetState_();return}var b=o||(i===0?this.cancelAnchor_:void 0);this.cancelAnchor_=void 0,(this.getResolution()!==h||this.getRotation()!==u||!this.getCenterInternal()||!K_(this.getCenterInternal(),v))&&(this.getAnimating()&&this.cancelAnimations(),this.animateInternal({rotation:u,center:v,resolution:h,duration:i,easing:Sf,anchor:b}))},t.prototype.beginInteraction=function(){this.resolveConstraints(0),this.setHint(zc.INTERACTING,1)},t.prototype.endInteraction=function(r,n,o){var i=o&&Id(o,this.getProjection());this.endInteractionInternal(r,n,i)},t.prototype.endInteractionInternal=function(r,n,o){this.setHint(zc.INTERACTING,-1),this.resolveConstraints(r,n,o)},t.prototype.getConstrainedCenter=function(r,n){var o=this.getViewportSize_(this.getRotation());return this.constraints_.center(r,n||this.getResolution(),o)},t.prototype.getConstrainedZoom=function(r,n){var o=this.getResolutionForZoom(r);return this.getZoomForResolution(this.getConstrainedResolution(o,n))},t.prototype.getConstrainedResolution=function(r,n){var o=n||0,i=this.getViewportSize_(this.getRotation());return this.constraints_.resolution(r,o,i)},t}(al);function F7(e,t){setTimeout(function(){e(t)},0)}function oRr(e){if(e.extent!==void 0){var t=e.smoothExtentConstraint!==void 0?e.smoothExtentConstraint:!0;return due(e.extent,e.constrainOnlyCenter,t)}var r=Oz(e.projection,"EPSG:3857");if(e.multiWorld!==!0&&r.isGlobal()){var n=r.getExtent().slice();return n[0]=-1/0,n[2]=1/0,due(n,!1,!1)}return Bst}function iRr(e){var t,r,n,o=28,i=2,a=e.minZoom!==void 0?e.minZoom:vue,u=e.maxZoom!==void 0?e.maxZoom:o,d=e.zoomFactor!==void 0?e.zoomFactor:i,h=e.multiWorld!==void 0?e.multiWorld:!1,v=e.smoothResolutionConstraint!==void 0?e.smoothResolutionConstraint:!0,b=e.showFullExtent!==void 0?e.showFullExtent:!1,x=Oz(e.projection,"EPSG:3857"),M=x.getExtent(),O=e.constrainOnlyCenter,D=e.extent;if(!h&&!D&&x.isGlobal()&&(O=!1,D=M),e.resolutions!==void 0){var k=e.resolutions;r=k[a],n=k[u]!==void 0?k[u]:k[k.length-1],e.constrainResolution?t=Vst(k,v,!O&&D,b):t=gue(r,n,v,!O&&D,b)}else{var R=M?Math.max(ta(M),ql(M)):360*Oc[Pc.DEGREES]/x.getMetersPerUnit(),q=R/T0/Math.pow(i,vue),B=q/Math.pow(i,o-vue);r=e.maxResolution,r!==void 0?a=0:r=q/Math.pow(d,a),n=e.minResolution,n===void 0&&(e.maxZoom!==void 0?e.maxResolution!==void 0?n=r/Math.pow(d,u):n=q/Math.pow(d,u):n=B),u=a+Math.floor(Math.log(r/n)/Math.log(d)),n=r/Math.pow(d,u-a),e.constrainResolution?t=Gst(d,r,n,v,!O&&D,b):t=gue(r,n,v,!O&&D,b)}return{constraint:t,maxResolution:r,minResolution:n,minZoom:a,zoomFactor:d}}function aRr(e){var t=e.enableRotation!==void 0?e.enableRotation:!0;if(t){var r=e.constrainRotation;return r===void 0||r===!0?fst():r===!1?iue:typeof r=="number"?pst(r):iue}else return M2}function sRr(e){return!(e.sourceCenter&&e.targetCenter&&!K_(e.sourceCenter,e.targetCenter)||e.sourceResolution!==e.targetResolution||e.sourceRotation!==e.targetRotation)}function yue(e,t,r,n,o){var i=Math.cos(-o),a=Math.sin(-o),u=e[0]*i-e[1]*a,d=e[1]*i+e[0]*a;u+=(t[0]/2-r[0])*n,d+=(r[1]-t[1]/2)*n,a=-a;var h=u*i-d*a,v=d*i+u*a;return[h,v]}var sm=nRr;var lRr=function(){var e=function(t,r){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,o){n.__proto__=o}||function(n,o){for(var i in o)Object.prototype.hasOwnProperty.call(o,i)&&(n[i]=o[i])},e(t,r)};return function(t,r){if(typeof r!="function"&&r!==null)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");e(t,r);function n(){this.constructor=t}t.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}();function Hst(e){if(e instanceof EP){e.setMapInternal(null);return}e instanceof SP&&e.getLayers().forEach(Hst)}function Wst(e,t){if(e instanceof EP){e.setMapInternal(t);return}if(e instanceof SP)for(var r=e.getLayers().getArray(),n=0,o=r.length;n<o;++n)Wst(r[n],t)}var uRr=function(e){lRr(t,e);function t(r){var n=e.call(this)||this;n.on,n.once,n.un;var o=cRr(r);n.renderComplete_,n.loaded_=!0,n.boundHandleBrowserEvent_=n.handleBrowserEvent.bind(n),n.maxTilesLoading_=r.maxTilesLoading!==void 0?r.maxTilesLoading:16,n.pixelRatio_=r.pixelRatio!==void 0?r.pixelRatio:T7,n.postRenderTimeoutHandle_,n.animationDelayKey_,n.animationDelay_=function(){this.animationDelayKey_=void 0,this.renderFrame_(Date.now())}.bind(n),n.coordinateToPixelTransform_=Tf(),n.pixelToCoordinateTransform_=Tf(),n.frameIndex_=0,n.frameState_=null,n.previousExtent_=null,n.viewPropertyListenerKey_=null,n.viewChangeListenerKey_=null,n.layerGroupPropertyListenerKeys_=null,n.viewport_=document.createElement("div"),n.viewport_.className="ol-viewport"+("ontouchstart"in window?" ol-touch":""),n.viewport_.style.position="relative",n.viewport_.style.overflow="hidden",n.viewport_.style.width="100%",n.viewport_.style.height="100%",n.overlayContainer_=document.createElement("div"),n.overlayContainer_.style.position="absolute",n.overlayContainer_.style.zIndex="0",n.overlayContainer_.style.width="100%",n.overlayContainer_.style.height="100%",n.overlayContainer_.style.pointerEvents="none",n.overlayContainer_.className="ol-overlaycontainer",n.viewport_.appendChild(n.overlayContainer_),n.overlayContainerStopEvent_=document.createElement("div"),n.overlayContainerStopEvent_.style.position="absolute",n.overlayContainerStopEvent_.style.zIndex="0",n.overlayContainerStopEvent_.style.width="100%",n.overlayContainerStopEvent_.style.height="100%",n.overlayContainerStopEvent_.style.pointerEvents="none",n.overlayContainerStopEvent_.className="ol-overlaycontainer-stopevent",n.viewport_.appendChild(n.overlayContainerStopEvent_),n.mapBrowserEventHandler_=null,n.moveTolerance_=r.moveTolerance,n.keyboardEventTarget_=o.keyboardEventTarget,n.targetChangeHandlerKeys_=null,n.controls=o.controls||new Zu,n.interactions=o.interactions||new Zu,n.overlays_=o.overlays,n.overlayIdIndex_={},n.renderer_=null,n.postRenderFunctions_=[],n.tileQueue_=new zst(n.getTilePriority.bind(n),n.handleTileChange_.bind(n)),n.addChangeListener(vs.LAYERGROUP,n.handleLayerGroupChanged_),n.addChangeListener(vs.VIEW,n.handleViewChanged_),n.addChangeListener(vs.SIZE,n.handleSizeChanged_),n.addChangeListener(vs.TARGET,n.handleTargetChanged_),n.setProperties(o.values);var i=n;return r.view&&!(r.view instanceof sm)&&r.view.then(function(a){i.setView(new sm(a))}),n.controls.addEventListener($u.ADD,function(a){a.element.setMap(this)}.bind(n)),n.controls.addEventListener($u.REMOVE,function(a){a.element.setMap(null)}.bind(n)),n.interactions.addEventListener($u.ADD,function(a){a.element.setMap(this)}.bind(n)),n.interactions.addEventListener($u.REMOVE,function(a){a.element.setMap(null)}.bind(n)),n.overlays_.addEventListener($u.ADD,function(a){this.addOverlayInternal_(a.element)}.bind(n)),n.overlays_.addEventListener($u.REMOVE,function(a){var u=a.element,d=u.getId();d!==void 0&&delete this.overlayIdIndex_[d.toString()],a.element.setMap(null)}.bind(n)),n.controls.forEach(function(a){a.setMap(this)}.bind(n)),n.interactions.forEach(function(a){a.setMap(this)}.bind(n)),n.overlays_.forEach(n.addOverlayInternal_.bind(n)),n}return t.prototype.createRenderer=function(){throw new Error("Use a map type that has a createRenderer method")},t.prototype.addControl=function(r){this.getControls().push(r)},t.prototype.addInteraction=function(r){this.getInteractions().push(r)},t.prototype.addLayer=function(r){var n=this.getLayerGroup().getLayers();n.push(r)},t.prototype.handleLayerAdd_=function(r){Wst(r.layer,this)},t.prototype.addOverlay=function(r){this.getOverlays().push(r)},t.prototype.addOverlayInternal_=function(r){var n=r.getId();n!==void 0&&(this.overlayIdIndex_[n.toString()]=r),r.setMap(this)},t.prototype.disposeInternal=function(){this.controls.clear(),this.interactions.clear(),this.overlays_.clear(),this.setTarget(null),e.prototype.disposeInternal.call(this)},t.prototype.forEachFeatureAtPixel=function(r,n,o){if(!(!this.frameState_||!this.renderer_)){var i=this.getCoordinateFromPixelInternal(r);o=o!==void 0?o:{};var a=o.hitTolerance!==void 0?o.hitTolerance:0,u=o.layerFilter!==void 0?o.layerFilter:y0,d=o.checkWrapped!==!1;return this.renderer_.forEachFeatureAtCoordinate(i,this.frameState_,a,d,n,null,u,null)}},t.prototype.getFeaturesAtPixel=function(r,n){var o=[];return this.forEachFeatureAtPixel(r,function(i){o.push(i)},n),o},t.prototype.getAllLayers=function(){var r=[];function n(o){o.forEach(function(i){i instanceof SP?n(i.getLayers()):r.push(i)})}return n(this.getLayers()),r},t.prototype.forEachLayerAtPixel=function(r,n,o){if(!(!this.frameState_||!this.renderer_)){var i=o||{},a=i.hitTolerance!==void 0?i.hitTolerance:0,u=i.layerFilter||y0;return this.renderer_.forEachLayerAtPixel(r,this.frameState_,a,n,u)}},t.prototype.hasFeatureAtPixel=function(r,n){if(!this.frameState_||!this.renderer_)return!1;var o=this.getCoordinateFromPixelInternal(r);n=n!==void 0?n:{};var i=n.layerFilter!==void 0?n.layerFilter:y0,a=n.hitTolerance!==void 0?n.hitTolerance:0,u=n.checkWrapped!==!1;return this.renderer_.hasFeatureAtCoordinate(o,this.frameState_,a,u,i,null)},t.prototype.getEventCoordinate=function(r){return this.getCoordinateFromPixel(this.getEventPixel(r))},t.prototype.getEventCoordinateInternal=function(r){return this.getCoordinateFromPixelInternal(this.getEventPixel(r))},t.prototype.getEventPixel=function(r){var n=this.viewport_.getBoundingClientRect(),o="changedTouches"in r?r.changedTouches[0]:r;return[o.clientX-n.left,o.clientY-n.top]},t.prototype.getTarget=function(){return this.get(vs.TARGET)},t.prototype.getTargetElement=function(){var r=this.getTarget();return r!==void 0?typeof r=="string"?document.getElementById(r):r:null},t.prototype.getCoordinateFromPixel=function(r){return x4(this.getCoordinateFromPixelInternal(r),this.getView().getProjection())},t.prototype.getCoordinateFromPixelInternal=function(r){var n=this.frameState_;return n?b0(n.pixelToCoordinateTransform,r.slice()):null},t.prototype.getControls=function(){return this.controls},t.prototype.getOverlays=function(){return this.overlays_},t.prototype.getOverlayById=function(r){var n=this.overlayIdIndex_[r.toString()];return n!==void 0?n:null},t.prototype.getInteractions=function(){return this.interactions},t.prototype.getLayerGroup=function(){return this.get(vs.LAYERGROUP)},t.prototype.setLayers=function(r){var n=this.getLayerGroup();if(r instanceof Zu){n.setLayers(r);return}var o=n.getLayers();o.clear(),o.extend(r)},t.prototype.getLayers=function(){var r=this.getLayerGroup().getLayers();return r},t.prototype.getLoadingOrNotReady=function(){for(var r=this.getLayerGroup().getLayerStatesArray(),n=0,o=r.length;n<o;++n){var i=r[n];if(i.visible){var a=i.layer.getRenderer();if(a&&!a.ready)return!0;var u=i.layer.getSource();if(u&&u.loading)return!0}}return!1},t.prototype.getPixelFromCoordinate=function(r){var n=Id(r,this.getView().getProjection());return this.getPixelFromCoordinateInternal(n)},t.prototype.getPixelFromCoordinateInternal=function(r){var n=this.frameState_;return n?b0(n.coordinateToPixelTransform,r.slice(0,2)):null},t.prototype.getRenderer=function(){return this.renderer_},t.prototype.getSize=function(){return this.get(vs.SIZE)},t.prototype.getView=function(){return this.get(vs.VIEW)},t.prototype.getViewport=function(){return this.viewport_},t.prototype.getOverlayContainer=function(){return this.overlayContainer_},t.prototype.getOverlayContainerStopEvent=function(){return this.overlayContainerStopEvent_},t.prototype.getOwnerDocument=function(){var r=this.getTargetElement();return r?r.ownerDocument:document},t.prototype.getTilePriority=function(r,n,o,i){return Fst(this.frameState_,r,n,o,i)},t.prototype.handleBrowserEvent=function(r,n){var o=n||r.type,i=new im(o,this,r);this.handleMapBrowserEvent(i)},t.prototype.handleMapBrowserEvent=function(r){if(this.frameState_){var n=r.originalEvent,o=n.type;if(o===TP.POINTERDOWN||o===Or.WHEEL||o===Or.KEYDOWN){var i=this.getOwnerDocument(),a=this.viewport_.getRootNode?this.viewport_.getRootNode():i,u=n.target;if(this.overlayContainerStopEvent_.contains(u)||!(a===i?i.documentElement:a).contains(u))return}if(r.frameState=this.frameState_,this.dispatchEvent(r)!==!1)for(var d=this.getInteractions().getArray().slice(),h=d.length-1;h>=0;h--){var v=d[h];if(!(v.getMap()!==this||!v.getActive()||!this.getTargetElement())){var b=v.handleEvent(r);if(!b||r.propagationStopped)break}}}},t.prototype.handlePostRender=function(){var r=this.frameState_,n=this.tileQueue_;if(!n.isEmpty()){var o=this.maxTilesLoading_,i=o;if(r){var a=r.viewHints;if(a[zc.ANIMATING]||a[zc.INTERACTING]){var u=Date.now()-r.time>8;o=u?0:8,i=u?0:2}}n.getTilesLoading()<o&&(n.reprioritize(),n.loadMoreTiles(o,i))}r&&this.renderer_&&!r.animate&&(this.renderComplete_===!0?(this.hasListener(mu.RENDERCOMPLETE)&&this.renderer_.dispatchRenderEvent(mu.RENDERCOMPLETE,r),this.loaded_===!1&&(this.loaded_=!0,this.dispatchEvent(new S0(nm.LOADEND,this,r)))):this.loaded_===!0&&(this.loaded_=!1,this.dispatchEvent(new S0(nm.LOADSTART,this,r))));for(var d=this.postRenderFunctions_,h=0,v=d.length;h<v;++h)d[h](this,r);d.length=0},t.prototype.handleSizeChanged_=function(){this.getView()&&!this.getView().getAnimating()&&this.getView().resolveConstraints(0),this.render()},t.prototype.handleTargetChanged_=function(){if(this.mapBrowserEventHandler_){for(var r=0,n=this.targetChangeHandlerKeys_.length;r<n;++r)$o(this.targetChangeHandlerKeys_[r]);this.targetChangeHandlerKeys_=null,this.viewport_.removeEventListener(Or.CONTEXTMENU,this.boundHandleBrowserEvent_),this.viewport_.removeEventListener(Or.WHEEL,this.boundHandleBrowserEvent_),this.mapBrowserEventHandler_.dispose(),this.mapBrowserEventHandler_=null,xP(this.viewport_)}var o=this.getTargetElement();if(!o)this.renderer_&&(clearTimeout(this.postRenderTimeoutHandle_),this.postRenderTimeoutHandle_=void 0,this.postRenderFunctions_.length=0,this.renderer_.dispose(),this.renderer_=null),this.animationDelayKey_&&(cancelAnimationFrame(this.animationDelayKey_),this.animationDelayKey_=void 0);else{o.appendChild(this.viewport_),this.renderer_||(this.renderer_=this.createRenderer()),this.mapBrowserEventHandler_=new jst(this,this.moveTolerance_);for(var i in Hi)this.mapBrowserEventHandler_.addEventListener(Hi[i],this.handleMapBrowserEvent.bind(this));this.viewport_.addEventListener(Or.CONTEXTMENU,this.boundHandleBrowserEvent_,!1),this.viewport_.addEventListener(Or.WHEEL,this.boundHandleBrowserEvent_,I7?{passive:!1}:!1);var a=this.getOwnerDocument().defaultView,u=this.keyboardEventTarget_?this.keyboardEventTarget_:o;this.targetChangeHandlerKeys_=[oo(u,Or.KEYDOWN,this.handleBrowserEvent,this),oo(u,Or.KEYPRESS,this.handleBrowserEvent,this),oo(a,Or.RESIZE,this.updateSize,this)]}this.updateSize()},t.prototype.handleTileChange_=function(){this.render()},t.prototype.handleViewPropertyChanged_=function(){this.render()},t.prototype.handleViewChanged_=function(){this.viewPropertyListenerKey_&&($o(this.viewPropertyListenerKey_),this.viewPropertyListenerKey_=null),this.viewChangeListenerKey_&&($o(this.viewChangeListenerKey_),this.viewChangeListenerKey_=null);var r=this.getView();r&&(this.updateViewportSize_(),this.viewPropertyListenerKey_=oo(r,Gg.PROPERTYCHANGE,this.handleViewPropertyChanged_,this),this.viewChangeListenerKey_=oo(r,Or.CHANGE,this.handleViewPropertyChanged_,this),r.resolveConstraints(0)),this.render()},t.prototype.handleLayerGroupChanged_=function(){this.layerGroupPropertyListenerKeys_&&(this.layerGroupPropertyListenerKeys_.forEach($o),this.layerGroupPropertyListenerKeys_=null);var r=this.getLayerGroup();r&&(this.handleLayerAdd_(new Zg("addlayer",r)),this.layerGroupPropertyListenerKeys_=[oo(r,Gg.PROPERTYCHANGE,this.render,this),oo(r,Or.CHANGE,this.render,this),oo(r,"addlayer",this.handleLayerAdd_,this),oo(r,"removelayer",this.handleLayerRemove_,this)]),this.render()},t.prototype.isRendered=function(){return!!this.frameState_},t.prototype.renderSync=function(){this.animationDelayKey_&&cancelAnimationFrame(this.animationDelayKey_),this.animationDelay_()},t.prototype.redrawText=function(){for(var r=this.getLayerGroup().getLayerStatesArray(),n=0,o=r.length;n<o;++n){var i=r[n].layer;i.hasRenderer()&&i.getRenderer().handleFontsChanged()}},t.prototype.render=function(){this.renderer_&&this.animationDelayKey_===void 0&&(this.animationDelayKey_=requestAnimationFrame(this.animationDelay_))},t.prototype.removeControl=function(r){return this.getControls().remove(r)},t.prototype.removeInteraction=function(r){return this.getInteractions().remove(r)},t.prototype.removeLayer=function(r){var n=this.getLayerGroup().getLayers();return n.remove(r)},t.prototype.handleLayerRemove_=function(r){Hst(r.layer)},t.prototype.removeOverlay=function(r){return this.getOverlays().remove(r)},t.prototype.renderFrame_=function(r){var n=this,o=this.getSize(),i=this.getView(),a=this.frameState_,u=null;if(o!==void 0&&sue(o)&&i&&i.isDef()){var d=i.getHints(this.frameState_?this.frameState_.viewHints:void 0),h=i.getState();if(u={animate:!1,coordinateToPixelTransform:this.coordinateToPixelTransform_,declutterTree:null,extent:y4(h.center,h.resolution,h.rotation,o),index:this.frameIndex_++,layerIndex:0,layerStatesArray:this.getLayerGroup().getLayerStatesArray(),pixelRatio:this.pixelRatio_,pixelToCoordinateTransform:this.pixelToCoordinateTransform_,postRenderFunctions:[],size:o,tileQueue:this.tileQueue_,time:r,usedTiles:{},viewState:h,viewHints:d,wantedTiles:{},mapId:Ka(this),renderTargets:{}},h.nextCenter&&h.nextResolution){var v=isNaN(h.nextRotation)?h.rotation:h.nextRotation;u.nextExtent=y4(h.nextCenter,h.nextResolution,v,o)}}if(this.frameState_=u,this.renderer_.renderFrame(u),u){if(u.animate&&this.render(),Array.prototype.push.apply(this.postRenderFunctions_,u.postRenderFunctions),a){var b=!this.previousExtent_||!Y_(this.previousExtent_)&&!m4(u.extent,this.previousExtent_);b&&(this.dispatchEvent(new S0(nm.MOVESTART,this,a)),this.previousExtent_=GS(this.previousExtent_))}var x=this.previousExtent_&&!u.viewHints[zc.ANIMATING]&&!u.viewHints[zc.INTERACTING]&&!m4(u.extent,this.previousExtent_);x&&(this.dispatchEvent(new S0(nm.MOVEEND,this,u)),wJe(u.extent,this.previousExtent_))}this.dispatchEvent(new S0(nm.POSTRENDER,this,u)),this.renderComplete_=this.hasListener(nm.LOADSTART)||this.hasListener(nm.LOADEND)||this.hasListener(mu.RENDERCOMPLETE)?!this.tileQueue_.getTilesLoading()&&!this.tileQueue_.getCount()&&!this.getLoadingOrNotReady():void 0,this.postRenderTimeoutHandle_||(this.postRenderTimeoutHandle_=setTimeout(function(){n.postRenderTimeoutHandle_=void 0,n.handlePostRender()},0))},t.prototype.setLayerGroup=function(r){var n=this.getLayerGroup();n&&this.handleLayerRemove_(new Zg("removelayer",n)),this.set(vs.LAYERGROUP,r)},t.prototype.setSize=function(r){this.set(vs.SIZE,r)},t.prototype.setTarget=function(r){this.set(vs.TARGET,r)},t.prototype.setView=function(r){if(!r||r instanceof sm){this.set(vs.VIEW,r);return}this.set(vs.VIEW,new sm);var n=this;r.then(function(o){n.setView(new sm(o))})},t.prototype.updateSize=function(){var r=this.getTargetElement(),n=void 0;if(r){var o=getComputedStyle(r),i=r.offsetWidth-parseFloat(o.borderLeftWidth)-parseFloat(o.paddingLeft)-parseFloat(o.paddingRight)-parseFloat(o.borderRightWidth),a=r.offsetHeight-parseFloat(o.borderTopWidth)-parseFloat(o.paddingTop)-parseFloat(o.paddingBottom)-parseFloat(o.borderBottomWidth);!isNaN(i)&&!isNaN(a)&&(n=[i,a],!sue(n)&&(r.offsetWidth||r.offsetHeight||r.getClientRects().length)&&console.warn("No map visible because the map container's width or height are 0."))}this.setSize(n),this.updateViewportSize_()},t.prototype.updateViewportSize_=function(){var r=this.getView();if(r){var n=void 0,o=getComputedStyle(this.viewport_);o.width&&o.height&&(n=[parseInt(o.width,10),parseInt(o.height,10)]),r.setViewportSize(n)}},t}(al);function cRr(e){var t=null;e.keyboardEventTarget!==void 0&&(t=typeof e.keyboardEventTarget=="string"?document.getElementById(e.keyboardEventTarget):e.keyboardEventTarget);var r={},n=e.layers&&typeof e.layers.getLayers=="function"?e.layers:new SP({layers:e.layers});r[vs.LAYERGROUP]=n,r[vs.TARGET]=e.target,r[vs.VIEW]=e.view instanceof sm?e.view:new sm;var o;e.controls!==void 0&&(Array.isArray(e.controls)?o=new Zu(e.controls.slice()):(Ln(typeof e.controls.getArray=="function",47),o=e.controls));var i;e.interactions!==void 0&&(Array.isArray(e.interactions)?i=new Zu(e.interactions.slice()):(Ln(typeof e.interactions.getArray=="function",48),i=e.interactions));var a;return e.overlays!==void 0?Array.isArray(e.overlays)?a=new Zu(e.overlays.slice()):(Ln(typeof e.overlays.getArray=="function",49),a=e.overlays):a=new Zu,{controls:o,interactions:i,keyboardEventTarget:t,overlays:a,values:r}}var $st=uRr;var pRr=function(){var e=function(t,r){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,o){n.__proto__=o}||function(n,o){for(var i in o)Object.prototype.hasOwnProperty.call(o,i)&&(n[i]=o[i])},e(t,r)};return function(t,r){if(typeof r!="function"&&r!==null)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");e(t,r);function n(){this.constructor=t}t.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),fRr=function(e){pRr(t,e);function t(r){var n=this,o=r||{};n=e.call(this,{element:document.createElement("div"),render:o.render,target:o.target})||this,n.ulElement_=document.createElement("ul"),n.collapsed_=o.collapsed!==void 0?o.collapsed:!0,n.userCollapsed_=n.collapsed_,n.overrideCollapsible_=o.collapsible!==void 0,n.collapsible_=o.collapsible!==void 0?o.collapsible:!0,n.collapsible_||(n.collapsed_=!1);var i=o.className!==void 0?o.className:"ol-attribution",a=o.tipLabel!==void 0?o.tipLabel:"Attributions",u=o.expandClassName!==void 0?o.expandClassName:i+"-expand",d=o.collapseLabel!==void 0?o.collapseLabel:"\u203A",h=o.collapseClassName!==void 0?o.collapseClassName:i+"-collapse";typeof d=="string"?(n.collapseLabel_=document.createElement("span"),n.collapseLabel_.textContent=d,n.collapseLabel_.className=h):n.collapseLabel_=d;var v=o.label!==void 0?o.label:"i";typeof v=="string"?(n.label_=document.createElement("span"),n.label_.textContent=v,n.label_.className=u):n.label_=v;var b=n.collapsible_&&!n.collapsed_?n.collapseLabel_:n.label_;n.toggleButton_=document.createElement("button"),n.toggleButton_.setAttribute("type","button"),n.toggleButton_.setAttribute("aria-expanded",String(!n.collapsed_)),n.toggleButton_.title=a,n.toggleButton_.appendChild(b),n.toggleButton_.addEventListener(Or.CLICK,n.handleClick_.bind(n),!1);var x=i+" "+If+" "+om+(n.collapsed_&&n.collapsible_?" "+oue:"")+(n.collapsible_?"":" ol-uncollapsible"),M=n.element;return M.className=x,M.appendChild(n.toggleButton_),M.appendChild(n.ulElement_),n.renderedAttributions_=[],n.renderedVisible_=!0,n}return t.prototype.collectSourceAttributions_=function(r){for(var n={},o=[],i=!0,a=r.layerStatesArray,u=0,d=a.length;u<d;++u){var h=a[u];if(fb(h,r.viewState)){var v=h.layer.getSource();if(v){var b=v.getAttributions();if(b){var x=b(r);if(x)if(i=i&&v.getAttributionsCollapsible()!==!1,Array.isArray(x))for(var M=0,O=x.length;M<O;++M)x[M]in n||(o.push(x[M]),n[x[M]]=!0);else x in n||(o.push(x),n[x]=!0)}}}}return this.overrideCollapsible_||this.setCollapsible(i),o},t.prototype.updateElement_=function(r){if(!r){this.renderedVisible_&&(this.element.style.display="none",this.renderedVisible_=!1);return}var n=this.collectSourceAttributions_(r),o=n.length>0;if(this.renderedVisible_!=o&&(this.element.style.display=o?"":"none",this.renderedVisible_=o),!w7(n,this.renderedAttributions_)){Xat(this.ulElement_);for(var i=0,a=n.length;i<a;++i){var u=document.createElement("li");u.innerHTML=n[i],this.ulElement_.appendChild(u)}this.renderedAttributions_=n}},t.prototype.handleClick_=function(r){r.preventDefault(),this.handleToggle_(),this.userCollapsed_=this.collapsed_},t.prototype.handleToggle_=function(){this.element.classList.toggle(oue),this.collapsed_?I2(this.collapseLabel_,this.label_):I2(this.label_,this.collapseLabel_),this.collapsed_=!this.collapsed_,this.toggleButton_.setAttribute("aria-expanded",String(!this.collapsed_))},t.prototype.getCollapsible=function(){return this.collapsible_},t.prototype.setCollapsible=function(r){this.collapsible_!==r&&(this.collapsible_=r,this.element.classList.toggle("ol-uncollapsible"),this.userCollapsed_&&this.handleToggle_())},t.prototype.setCollapsed=function(r){this.userCollapsed_=r,!(!this.collapsible_||this.collapsed_===r)&&this.handleToggle_()},t.prototype.getCollapsed=function(){return this.collapsed_},t.prototype.render=function(r){this.updateElement_(r.frameState)},t}(gp),Zst=fRr;var dRr=function(){var e=function(t,r){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,o){n.__proto__=o}||function(n,o){for(var i in o)Object.prototype.hasOwnProperty.call(o,i)&&(n[i]=o[i])},e(t,r)};return function(t,r){if(typeof r!="function"&&r!==null)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");e(t,r);function n(){this.constructor=t}t.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),hRr=function(e){dRr(t,e);function t(r){var n=this,o=r||{};n=e.call(this,{element:document.createElement("div"),render:o.render,target:o.target})||this;var i=o.className!==void 0?o.className:"ol-rotate",a=o.label!==void 0?o.label:"\u21E7",u=o.compassClassName!==void 0?o.compassClassName:"ol-compass";n.label_=null,typeof a=="string"?(n.label_=document.createElement("span"),n.label_.className=u,n.label_.textContent=a):(n.label_=a,n.label_.classList.add(u));var d=o.tipLabel?o.tipLabel:"Reset rotation",h=document.createElement("button");h.className=i+"-reset",h.setAttribute("type","button"),h.title=d,h.appendChild(n.label_),h.addEventListener(Or.CLICK,n.handleClick_.bind(n),!1);var v=i+" "+If+" "+om,b=n.element;return b.className=v,b.appendChild(h),n.callResetNorth_=o.resetNorth?o.resetNorth:void 0,n.duration_=o.duration!==void 0?o.duration:250,n.autoHide_=o.autoHide!==void 0?o.autoHide:!0,n.rotation_=void 0,n.autoHide_&&n.element.classList.add(wP),n}return t.prototype.handleClick_=function(r){r.preventDefault(),this.callResetNorth_!==void 0?this.callResetNorth_():this.resetNorth_()},t.prototype.resetNorth_=function(){var r=this.getMap(),n=r.getView();if(n){var o=n.getRotation();o!==void 0&&(this.duration_>0&&o%(2*Math.PI)!==0?n.animate({rotation:0,duration:this.duration_,easing:Sf}):n.setRotation(0))}},t.prototype.render=function(r){var n=r.frameState;if(n){var o=n.viewState.rotation;if(o!=this.rotation_){var i="rotate("+o+"rad)";if(this.autoHide_){var a=this.element.classList.contains(wP);!a&&o===0?this.element.classList.add(wP):a&&o!==0&&this.element.classList.remove(wP)}this.label_.style.transform=i}this.rotation_=o}},t}(gp),Yst=hRr;var mRr=function(){var e=function(t,r){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,o){n.__proto__=o}||function(n,o){for(var i in o)Object.prototype.hasOwnProperty.call(o,i)&&(n[i]=o[i])},e(t,r)};return function(t,r){if(typeof r!="function"&&r!==null)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");e(t,r);function n(){this.constructor=t}t.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),gRr=function(e){mRr(t,e);function t(r){var n=this,o=r||{};n=e.call(this,{element:document.createElement("div"),target:o.target})||this;var i=o.className!==void 0?o.className:"ol-zoom",a=o.delta!==void 0?o.delta:1,u=o.zoomInClassName!==void 0?o.zoomInClassName:i+"-in",d=o.zoomOutClassName!==void 0?o.zoomOutClassName:i+"-out",h=o.zoomInLabel!==void 0?o.zoomInLabel:"+",v=o.zoomOutLabel!==void 0?o.zoomOutLabel:"\u2013",b=o.zoomInTipLabel!==void 0?o.zoomInTipLabel:"Zoom in",x=o.zoomOutTipLabel!==void 0?o.zoomOutTipLabel:"Zoom out",M=document.createElement("button");M.className=u,M.setAttribute("type","button"),M.title=b,M.appendChild(typeof h=="string"?document.createTextNode(h):h),M.addEventListener(Or.CLICK,n.handleClick_.bind(n,a),!1);var O=document.createElement("button");O.className=d,O.setAttribute("type","button"),O.title=x,O.appendChild(typeof v=="string"?document.createTextNode(v):v),O.addEventListener(Or.CLICK,n.handleClick_.bind(n,-a),!1);var D=i+" "+If+" "+om,k=n.element;return k.className=D,k.appendChild(M),k.appendChild(O),n.duration_=o.duration!==void 0?o.duration:250,n}return t.prototype.handleClick_=function(r,n){n.preventDefault(),this.zoomByDelta_(r)},t.prototype.zoomByDelta_=function(r){var n=this.getMap(),o=n.getView();if(o){var i=o.getZoom();if(i!==void 0){var a=o.getConstrainedZoom(i+r);this.duration_>0?(o.getAnimating()&&o.cancelAnimations(),o.animate({zoom:a,duration:this.duration_,easing:Sf})):o.setZoom(a)}}},t}(gp),U7=gRr;var vRr=function(){var e=function(t,r){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,o){n.__proto__=o}||function(n,o){for(var i in o)Object.prototype.hasOwnProperty.call(o,i)&&(n[i]=o[i])},e(t,r)};return function(t,r){if(typeof r!="function"&&r!==null)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");e(t,r);function n(){this.constructor=t}t.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),yRr=function(e){vRr(t,e);function t(r){var n=this,o=r||{};n=e.call(this,{element:document.createElement("div"),target:o.target})||this,n.extent=o.extent?o.extent:null;var i=o.className!==void 0?o.className:"ol-zoom-extent",a=o.label!==void 0?o.label:"E",u=o.tipLabel!==void 0?o.tipLabel:"Fit to extent",d=document.createElement("button");d.setAttribute("type","button"),d.title=u,d.appendChild(typeof a=="string"?document.createTextNode(a):a),d.addEventListener(Or.CLICK,n.handleClick_.bind(n),!1);var h=i+" "+If+" "+om,v=n.element;return v.className=h,v.appendChild(d),n}return t.prototype.handleClick_=function(r){r.preventDefault(),this.handleZoomToExtent()},t.prototype.handleZoomToExtent=function(){var r=this.getMap(),n=r.getView(),o=this.extent?this.extent:n.getProjection().getExtent();n.fitInternal(_P(o))},t}(gp),Kst=yRr;function Xst(e){var t=e||{},r=new Zu,n=t.zoom!==void 0?t.zoom:!0;n&&r.push(new U7(t.zoomOptions));var o=t.rotate!==void 0?t.rotate:!0;o&&r.push(new Yst(t.rotateOptions));var i=t.attribution!==void 0?t.attribution:!0;return i&&r.push(new Zst(t.attributionOptions)),r}var _Rr=function(){var e=function(t,r){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,o){n.__proto__=o}||function(n,o){for(var i in o)Object.prototype.hasOwnProperty.call(o,i)&&(n[i]=o[i])},e(t,r)};return function(t,r){if(typeof r!="function"&&r!==null)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");e(t,r);function n(){this.constructor=t}t.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),bRr=function(e){_Rr(t,e);function t(r){return r=Ei({},r),r.controls||(r.controls=Xst()),r.interactions||(r.interactions=z7({onFocusOnly:!0})),e.call(this,r)||this}return t.prototype.createRenderer=function(){return new kst(this)},t}($st),Qst=bRr;var MP={PRELOAD:"preload",USE_INTERIM_TILES_ON_ERROR:"useInterimTilesOnError"};var xRr=function(){var e=function(t,r){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,o){n.__proto__=o}||function(n,o){for(var i in o)Object.prototype.hasOwnProperty.call(o,i)&&(n[i]=o[i])},e(t,r)};return function(t,r){if(typeof r!="function"&&r!==null)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");e(t,r);function n(){this.constructor=t}t.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),wRr=function(e){xRr(t,e);function t(r){var n=this,o=r||{},i=Ei({},o);return delete i.preload,delete i.useInterimTilesOnError,n=e.call(this,i)||this,n.on,n.once,n.un,n.setPreload(o.preload!==void 0?o.preload:0),n.setUseInterimTilesOnError(o.useInterimTilesOnError!==void 0?o.useInterimTilesOnError:!0),n}return t.prototype.getPreload=function(){return this.get(MP.PRELOAD)},t.prototype.setPreload=function(r){this.set(MP.PRELOAD,r)},t.prototype.getUseInterimTilesOnError=function(){return this.get(MP.USE_INTERIM_TILES_ON_ERROR)},t.prototype.setUseInterimTilesOnError=function(r){this.set(MP.USE_INTERIM_TILES_ON_ERROR,r)},t.prototype.getData=function(r){return e.prototype.getData.call(this,r)},t}(EP),Jst=wRr;var ERr=function(){function e(t){this.highWaterMark=t!==void 0?t:2048,this.count_=0,this.entries_={},this.oldest_=null,this.newest_=null}return e.prototype.canExpireCache=function(){return this.highWaterMark>0&&this.getCount()>this.highWaterMark},e.prototype.expireCache=function(t){for(;this.canExpireCache();)this.pop()},e.prototype.clear=function(){this.count_=0,this.entries_={},this.oldest_=null,this.newest_=null},e.prototype.containsKey=function(t){return this.entries_.hasOwnProperty(t)},e.prototype.forEach=function(t){for(var r=this.oldest_;r;)t(r.value_,r.key_,this),r=r.newer},e.prototype.get=function(t,r){var n=this.entries_[t];return Ln(n!==void 0,15),n===this.newest_||(n===this.oldest_?(this.oldest_=this.oldest_.newer,this.oldest_.older=null):(n.newer.older=n.older,n.older.newer=n.newer),n.newer=null,n.older=this.newest_,this.newest_.newer=n,this.newest_=n),n.value_},e.prototype.remove=function(t){var r=this.entries_[t];return Ln(r!==void 0,15),r===this.newest_?(this.newest_=r.older,this.newest_&&(this.newest_.newer=null)):r===this.oldest_?(this.oldest_=r.newer,this.oldest_&&(this.oldest_.older=null)):(r.newer.older=r.older,r.older.newer=r.newer),delete this.entries_[t],--this.count_,r.value_},e.prototype.getCount=function(){return this.count_},e.prototype.getKeys=function(){var t=new Array(this.count_),r=0,n;for(n=this.newest_;n;n=n.older)t[r++]=n.key_;return t},e.prototype.getValues=function(){var t=new Array(this.count_),r=0,n;for(n=this.newest_;n;n=n.older)t[r++]=n.value_;return t},e.prototype.peekLast=function(){return this.oldest_.value_},e.prototype.peekLastKey=function(){return this.oldest_.key_},e.prototype.peekFirstKey=function(){return this.newest_.key_},e.prototype.peek=function(t){if(this.containsKey(t))return this.entries_[t].value_},e.prototype.pop=function(){var t=this.oldest_;return delete this.entries_[t.key_],t.newer&&(t.newer.older=null),this.oldest_=t.newer,this.oldest_||(this.newest_=null),--this.count_,t.value_},e.prototype.replace=function(t,r){this.get(t),this.entries_[t].value_=r},e.prototype.set=function(t,r){Ln(!(t in this.entries_),16);var n={key_:t,newer:null,older:this.newest_,value_:r};this.newest_?this.newest_.newer=n:this.oldest_=n,this.newest_=n,this.entries_[t]=n,++this.count_},e.prototype.setSize=function(t){this.highWaterMark=t},e}(),B7=ERr;var elt=function(){function e(t,r,n,o){this.minX=t,this.maxX=r,this.minY=n,this.maxY=o}return e.prototype.contains=function(t){return this.containsXY(t[1],t[2])},e.prototype.containsTileRange=function(t){return this.minX<=t.minX&&t.maxX<=this.maxX&&this.minY<=t.minY&&t.maxY<=this.maxY},e.prototype.containsXY=function(t,r){return this.minX<=t&&t<=this.maxX&&this.minY<=r&&r<=this.maxY},e.prototype.equals=function(t){return this.minX==t.minX&&this.minY==t.minY&&this.maxX==t.maxX&&this.maxY==t.maxY},e.prototype.extend=function(t){t.minX<this.minX&&(this.minX=t.minX),t.maxX>this.maxX&&(this.maxX=t.maxX),t.minY<this.minY&&(this.minY=t.minY),t.maxY>this.maxY&&(this.maxY=t.maxY)},e.prototype.getHeight=function(){return this.maxY-this.minY+1},e.prototype.getSize=function(){return[this.getWidth(),this.getHeight()]},e.prototype.getWidth=function(){return this.maxX-this.minX+1},e.prototype.intersects=function(t){return this.minX<=t.maxX&&this.maxX>=t.minX&&this.minY<=t.maxY&&this.maxY>=t.minY},e}();function db(e,t,r,n,o){return o!==void 0?(o.minX=e,o.maxX=t,o.minY=r,o.maxY=n,o):new elt(e,t,r,n)}var V7=elt;var SRr=function(){var e=function(t,r){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,o){n.__proto__=o}||function(n,o){for(var i in o)Object.prototype.hasOwnProperty.call(o,i)&&(n[i]=o[i])},e(t,r)};return function(t,r){if(typeof r!="function"&&r!==null)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");e(t,r);function n(){this.constructor=t}t.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),TRr=function(e){SRr(t,e);function t(r,n,o){var i=e.call(this)||this,a=o||{};return i.tileCoord=r,i.state=n,i.interimTile=null,i.key="",i.transition_=a.transition===void 0?250:a.transition,i.transitionStarts_={},i.interpolate=!!a.interpolate,i}return t.prototype.changed=function(){this.dispatchEvent(Or.CHANGE)},t.prototype.release=function(){},t.prototype.getKey=function(){return this.key+"/"+this.tileCoord},t.prototype.getInterimTile=function(){if(!this.interimTile)return this;var r=this.interimTile;do{if(r.getState()==Pr.LOADED)return this.transition_=0,r;r=r.interimTile}while(r);return this},t.prototype.refreshInterimChain=function(){if(this.interimTile){var r=this.interimTile,n=this;do{if(r.getState()==Pr.LOADED){r.interimTile=null;break}else r.getState()==Pr.LOADING?n=r:r.getState()==Pr.IDLE?n.interimTile=r.interimTile:n=r;r=n.interimTile}while(r)}},t.prototype.getTileCoord=function(){return this.tileCoord},t.prototype.getState=function(){return this.state},t.prototype.setState=function(r){if(this.state!==Pr.ERROR&&this.state>r)throw new Error("Tile load sequence violation");this.state=r,this.changed()},t.prototype.load=function(){Oo()},t.prototype.getAlpha=function(r,n){if(!this.transition_)return 1;var o=this.transitionStarts_[r];if(!o)o=n,this.transitionStarts_[r]=o;else if(o===-1)return 1;var i=n-o+1e3/60;return i>=this.transition_?1:Gle(i/this.transition_)},t.prototype.inTransition=function(r){return this.transition_?this.transitionStarts_[r]!==-1:!1},t.prototype.endTransition=function(r){this.transition_&&(this.transitionStarts_[r]=-1)},t}(Ef),O2=TRr;var IRr=function(){var e=function(t,r){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,o){n.__proto__=o}||function(n,o){for(var i in o)Object.prototype.hasOwnProperty.call(o,i)&&(n[i]=o[i])},e(t,r)};return function(t,r){if(typeof r!="function"&&r!==null)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");e(t,r);function n(){this.constructor=t}t.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),MRr=function(e){IRr(t,e);function t(r){var n=this,o=Pr.IDLE;return n=e.call(this,r.tileCoord,o,{transition:r.transition,interpolate:r.interpolate})||this,n.loader_=r.loader,n.data_=null,n.error_=null,n.size_=r.size||[256,256],n}return t.prototype.getSize=function(){return this.size_},t.prototype.getData=function(){return this.data_},t.prototype.getError=function(){return this.error_},t.prototype.load=function(){if(!(this.state!==Pr.IDLE&&this.state!==Pr.ERROR)){this.state=Pr.LOADING,this.changed();var r=this;this.loader_().then(function(n){r.data_=n,r.state=Pr.LOADED,r.changed()}).catch(function(n){r.error_=n,r.state=Pr.ERROR,r.changed()})}},t}(O2),tlt=MRr;var CRr=function(){var e=function(t,r){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,o){n.__proto__=o}||function(n,o){for(var i in o)Object.prototype.hasOwnProperty.call(o,i)&&(n[i]=o[i])},e(t,r)};return function(t,r){if(typeof r!="function"&&r!==null)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");e(t,r);function n(){this.constructor=t}t.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),ARr=function(e){CRr(t,e);function t(r,n,o,i,a,u){var d=e.call(this,r,n,u)||this;return d.crossOrigin_=i,d.src_=o,d.key=o,d.image_=new Image,i!==null&&(d.image_.crossOrigin=i),d.unlisten_=null,d.tileLoadFunction_=a,d}return t.prototype.getImage=function(){return this.image_},t.prototype.setImage=function(r){this.image_=r,this.state=Pr.LOADED,this.unlistenImage_(),this.changed()},t.prototype.handleImageError_=function(){this.state=Pr.ERROR,this.unlistenImage_(),this.image_=ORr(),this.changed()},t.prototype.handleImageLoad_=function(){var r=this.image_;r.naturalWidth&&r.naturalHeight?this.state=Pr.LOADED:this.state=Pr.EMPTY,this.unlistenImage_(),this.changed()},t.prototype.load=function(){this.state==Pr.ERROR&&(this.state=Pr.IDLE,this.image_=new Image,this.crossOrigin_!==null&&(this.image_.crossOrigin=this.crossOrigin_)),this.state==Pr.IDLE&&(this.state=Pr.LOADING,this.changed(),this.tileLoadFunction_(this,this.src_),this.unlisten_=pue(this.image_,this.handleImageLoad_.bind(this),this.handleImageError_.bind(this)))},t.prototype.unlistenImage_=function(){this.unlisten_&&(this.unlisten_(),this.unlisten_=null)},t}(O2);function ORr(){var e=$g(1,1);return e.fillStyle="rgba(0,0,0,0)",e.fillRect(0,0,1,1),e.canvas}var hb=ARr;var rlt=.5,lm=!0;var PRr=10,nlt=.25,NRr=function(){function e(t,r,n,o,i,a){this.sourceProj_=t,this.targetProj_=r;var u={},d=X_(this.targetProj_,this.sourceProj_);this.transformInv_=function(B){var G=B[0]+"/"+B[1];return u[G]||(u[G]=d(B)),u[G]},this.maxSourceExtent_=o,this.errorThresholdSquared_=i*i,this.triangles_=[],this.wrapsXInSource_=!1,this.canWrapXInSource_=this.sourceProj_.canWrapX()&&!!o&&!!this.sourceProj_.getExtent()&&ta(o)==ta(this.sourceProj_.getExtent()),this.sourceWorldWidth_=this.sourceProj_.getExtent()?ta(this.sourceProj_.getExtent()):null,this.targetWorldWidth_=this.targetProj_.getExtent()?ta(this.targetProj_.getExtent()):null;var h=r0(n),v=Az(n),b=Cz(n),x=Mz(n),M=this.transformInv_(h),O=this.transformInv_(v),D=this.transformInv_(b),k=this.transformInv_(x),R=PRr+(a?Math.max(0,Math.ceil(xz(v4(n)/(a*a*256*256)))):0);if(this.addQuad_(h,v,b,x,M,O,D,k,R),this.wrapsXInSource_){var q=1/0;this.triangles_.forEach(function(B,G,re){q=Math.min(q,B.source[0][0],B.source[1][0],B.source[2][0])}),this.triangles_.forEach(function(B){if(Math.max(B.source[0][0],B.source[1][0],B.source[2][0])-q>this.sourceWorldWidth_/2){var G=[[B.source[0][0],B.source[0][1]],[B.source[1][0],B.source[1][1]],[B.source[2][0],B.source[2][1]]];G[0][0]-q>this.sourceWorldWidth_/2&&(G[0][0]-=this.sourceWorldWidth_),G[1][0]-q>this.sourceWorldWidth_/2&&(G[1][0]-=this.sourceWorldWidth_),G[2][0]-q>this.sourceWorldWidth_/2&&(G[2][0]-=this.sourceWorldWidth_);var re=Math.min(G[0][0],G[1][0],G[2][0]),Q=Math.max(G[0][0],G[1][0],G[2][0]);Q-re<this.sourceWorldWidth_/2&&(B.source=G)}}.bind(this))}u={}}return e.prototype.addTriangle_=function(t,r,n,o,i,a){this.triangles_.push({source:[o,i,a],target:[t,r,n]})},e.prototype.addQuad_=function(t,r,n,o,i,a,u,d,h){var v=h4([i,a,u,d]),b=this.sourceWorldWidth_?ta(v)/this.sourceWorldWidth_:null,x=this.sourceWorldWidth_,M=this.sourceProj_.canWrapX()&&b>.5&&b<1,O=!1;if(h>0){if(this.targetProj_.isGlobal()&&this.targetWorldWidth_){var D=h4([t,r,n,o]),k=ta(D)/this.targetWorldWidth_;O=k>nlt||O}!M&&this.sourceProj_.isGlobal()&&b&&(O=b>nlt||O)}if(!(!O&&this.maxSourceExtent_&&isFinite(v[0])&&isFinite(v[1])&&isFinite(v[2])&&isFinite(v[3])&&!_4(v,this.maxSourceExtent_))){var R=0;if(!O&&(!isFinite(i[0])||!isFinite(i[1])||!isFinite(a[0])||!isFinite(a[1])||!isFinite(u[0])||!isFinite(u[1])||!isFinite(d[0])||!isFinite(d[1]))){if(h>0)O=!0;else if(R=(!isFinite(i[0])||!isFinite(i[1])?8:0)+(!isFinite(a[0])||!isFinite(a[1])?4:0)+(!isFinite(u[0])||!isFinite(u[1])?2:0)+(!isFinite(d[0])||!isFinite(d[1])?1:0),R!=1&&R!=2&&R!=4&&R!=8)return}if(h>0){if(!O){var q=[(t[0]+n[0])/2,(t[1]+n[1])/2],B=this.transformInv_(q),G=void 0;if(M){var re=(Sd(i[0],x)+Sd(u[0],x))/2;G=re-Sd(B[0],x)}else G=(i[0]+u[0])/2-B[0];var Q=(i[1]+u[1])/2-B[1],ie=G*G+Q*Q;O=ie>this.errorThresholdSquared_}if(O){if(Math.abs(t[0]-n[0])<=Math.abs(t[1]-n[1])){var me=[(r[0]+n[0])/2,(r[1]+n[1])/2],ve=this.transformInv_(me),ye=[(o[0]+t[0])/2,(o[1]+t[1])/2],we=this.transformInv_(ye);this.addQuad_(t,r,me,ye,i,a,ve,we,h-1),this.addQuad_(ye,me,n,o,we,ve,u,d,h-1)}else{var Se=[(t[0]+r[0])/2,(t[1]+r[1])/2],ge=this.transformInv_(Se),Re=[(n[0]+o[0])/2,(n[1]+o[1])/2],Je=this.transformInv_(Re);this.addQuad_(t,Se,Re,o,i,ge,Je,d,h-1),this.addQuad_(Se,r,n,Re,ge,a,u,Je,h-1)}return}}if(M){if(!this.canWrapXInSource_)return;this.wrapsXInSource_=!0}(R&11)==0&&this.addTriangle_(t,n,o,i,u,d),(R&14)==0&&this.addTriangle_(t,n,r,i,u,a),R&&((R&13)==0&&this.addTriangle_(r,o,t,a,d,i),(R&7)==0&&this.addTriangle_(r,o,n,a,d,u))}},e.prototype.calculateSourceExtent=function(){var t=Fh();return this.triangles_.forEach(function(r,n,o){var i=r.source;g4(t,i[0]),g4(t,i[1]),g4(t,i[2])}),t},e.prototype.getTriangles=function(){return this.triangles_},e}(),olt=NRr;var _ue={imageSmoothingEnabled:!1,msImageSmoothingEnabled:!1};var bue,wue=[];function ilt(e,t,r,n,o){e.beginPath(),e.moveTo(0,0),e.lineTo(t,r),e.lineTo(n,o),e.closePath(),e.save(),e.clip(),e.fillRect(0,0,Math.max(t,n)+1,Math.max(r,o)),e.restore()}function xue(e,t){return Math.abs(e[t*4]-210)>2||Math.abs(e[t*4+3]-.75*255)>2}function DRr(){if(bue===void 0){var e=document.createElement("canvas").getContext("2d");e.globalCompositeOperation="lighter",e.fillStyle="rgba(210, 0, 0, 0.75)",ilt(e,4,5,4,0),ilt(e,4,5,0,5);var t=e.getImageData(0,0,3,3).data;bue=xue(t,0)||xue(t,4)||xue(t,8)}return bue}function alt(e,t,r,n){var o=b4(r,t,e),i=Qie(t,n,r),a=t.getMetersPerUnit();a!==void 0&&(i*=a);var u=e.getMetersPerUnit();u!==void 0&&(i/=u);var d=e.getExtent();if(!d||Cg(d,o)){var h=Qie(e,i,o)/i;isFinite(h)&&h>0&&(i/=h)}return i}function slt(e,t,r,n){var o=Td(r),i=alt(e,t,o,n);return(!isFinite(i)||i<=0)&&Iz(r,function(a){return i=alt(e,t,a,n),isFinite(i)&&i>0}),i}function llt(e,t,r,n,o,i,a,u,d,h,v,b){var x=$g(Math.round(r*e),Math.round(r*t),wue);if(b||Ei(x,_ue),d.length===0)return x.canvas;x.scale(r,r);function M(G){return Math.round(G*r)/r}x.globalCompositeOperation="lighter";var O=Fh();d.forEach(function(G,re,Q){IJe(O,G.extent)});var D=ta(O),k=ql(O),R=$g(Math.round(r*D/n),Math.round(r*k/n));b||Ei(R,_ue);var q=r/n;d.forEach(function(G,re,Q){var ie=G.extent[0]-O[0],me=-(G.extent[3]-O[3]),ve=ta(G.extent),ye=ql(G.extent);G.image.width>0&&G.image.height>0&&R.drawImage(G.image,h,h,G.image.width-2*h,G.image.height-2*h,ie*q,me*q,ve*q,ye*q)});var B=r0(a);return u.getTriangles().forEach(function(G,re,Q){var ie=G.source,me=G.target,ve=ie[0][0],ye=ie[0][1],we=ie[1][0],Se=ie[1][1],ge=ie[2][0],Re=ie[2][1],Je=M((me[0][0]-B[0])/i),tt=M(-(me[0][1]-B[1])/i),Et=M((me[1][0]-B[0])/i),Xe=M(-(me[1][1]-B[1])/i),Pt=M((me[2][0]-B[0])/i),Lt=M(-(me[2][1]-B[1])/i),Gt=ve,nt=ye;ve=0,ye=0,we-=Gt,Se-=nt,ge-=Gt,Re-=nt;var ct=[[we,Se,0,0,Et-Je],[ge,Re,0,0,Pt-Je],[0,0,we,Se,Xe-tt],[0,0,ge,Re,Lt-tt]],_t=cJe(ct);if(_t){if(x.save(),x.beginPath(),DRr()||!b){x.moveTo(Et,Xe);for(var We=4,De=Je-Et,Qe=tt-Xe,Ge=0;Ge<We;Ge++)x.lineTo(Et+M((Ge+1)*De/We),Xe+M(Ge*Qe/(We-1))),Ge!=We-1&&x.lineTo(Et+M((Ge+1)*De/We),Xe+M((Ge+1)*Qe/(We-1)));x.lineTo(Pt,Lt)}else x.moveTo(Et,Xe),x.lineTo(Je,tt),x.lineTo(Pt,Lt);x.clip(),x.transform(_t[0],_t[2],_t[1],_t[3],Je,tt),x.translate(O[0]-Gt,O[3]-nt),x.scale(n/r,-n/r),x.drawImage(R.canvas,0,0),x.restore()}}),v&&(x.save(),x.globalCompositeOperation="source-over",x.strokeStyle="black",x.lineWidth=1,u.getTriangles().forEach(function(G,re,Q){var ie=G.target,me=(ie[0][0]-B[0])/i,ve=-(ie[0][1]-B[1])/i,ye=(ie[1][0]-B[0])/i,we=-(ie[1][1]-B[1])/i,Se=(ie[2][0]-B[0])/i,ge=-(ie[2][1]-B[1])/i;x.beginPath(),x.moveTo(ye,we),x.lineTo(me,ve),x.lineTo(Se,ge),x.closePath(),x.stroke()}),x.restore()),x.canvas}var LRr=function(){var e=function(t,r){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,o){n.__proto__=o}||function(n,o){for(var i in o)Object.prototype.hasOwnProperty.call(o,i)&&(n[i]=o[i])},e(t,r)};return function(t,r){if(typeof r!="function"&&r!==null)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");e(t,r);function n(){this.constructor=t}t.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),kRr=function(e){LRr(t,e);function t(r,n,o,i,a,u,d,h,v,b,x,M){var O=e.call(this,a,Pr.IDLE,{interpolate:!!M})||this;O.renderEdges_=x!==void 0?x:!1,O.pixelRatio_=d,O.gutter_=h,O.canvas_=null,O.sourceTileGrid_=n,O.targetTileGrid_=i,O.wrappedTileCoord_=u||a,O.sourceTiles_=[],O.sourcesListenerKeys_=null,O.sourceZ_=0;var D=i.getTileCoordExtent(O.wrappedTileCoord_),k=O.targetTileGrid_.getExtent(),R=O.sourceTileGrid_.getExtent(),q=k?Uh(D,k):D;if(v4(q)===0)return O.state=Pr.EMPTY,O;var B=r.getExtent();B&&(R?R=Uh(R,B):R=B);var G=i.getResolution(O.wrappedTileCoord_[0]),re=slt(r,o,q,G);if(!isFinite(re)||re<=0)return O.state=Pr.EMPTY,O;var Q=b!==void 0?b:rlt;if(O.triangulation_=new olt(r,o,q,R,re*Q,G),O.triangulation_.getTriangles().length===0)return O.state=Pr.EMPTY,O;O.sourceZ_=n.getZForResolution(re);var ie=O.triangulation_.calculateSourceExtent();if(R&&(r.canWrapX()?(ie[1]=Ai(ie[1],R[1],R[3]),ie[3]=Ai(ie[3],R[1],R[3])):ie=Uh(ie,R)),!v4(ie))O.state=Pr.EMPTY;else{for(var me=n.getTileRangeForExtentAndZ(ie,O.sourceZ_),ve=me.minX;ve<=me.maxX;ve++)for(var ye=me.minY;ye<=me.maxY;ye++){var we=v(O.sourceZ_,ve,ye,d);we&&O.sourceTiles_.push(we)}O.sourceTiles_.length===0&&(O.state=Pr.EMPTY)}return O}return t.prototype.getImage=function(){return this.canvas_},t.prototype.reproject_=function(){var r=[];if(this.sourceTiles_.forEach(function(v,b,x){v&&v.getState()==Pr.LOADED&&r.push({extent:this.sourceTileGrid_.getTileCoordExtent(v.tileCoord),image:v.getImage()})}.bind(this)),this.sourceTiles_.length=0,r.length===0)this.state=Pr.ERROR;else{var n=this.wrappedTileCoord_[0],o=this.targetTileGrid_.getTileSize(n),i=typeof o=="number"?o:o[0],a=typeof o=="number"?o:o[1],u=this.targetTileGrid_.getResolution(n),d=this.sourceTileGrid_.getResolution(this.sourceZ_),h=this.targetTileGrid_.getTileCoordExtent(this.wrappedTileCoord_);this.canvas_=llt(i,a,this.pixelRatio_,d,this.sourceTileGrid_.getExtent(),u,h,this.triangulation_,r,this.gutter_,this.renderEdges_,this.interpolate),this.state=Pr.LOADED}this.changed()},t.prototype.load=function(){if(this.state==Pr.IDLE){this.state=Pr.LOADING,this.changed();var r=0;this.sourcesListenerKeys_=[],this.sourceTiles_.forEach(function(n,o,i){var a=n.getState();if(a==Pr.IDLE||a==Pr.LOADING){r++;var u=oo(n,Or.CHANGE,function(d){var h=n.getState();(h==Pr.LOADED||h==Pr.ERROR||h==Pr.EMPTY)&&($o(u),r--,r===0&&(this.unlistenSources_(),this.reproject_()))},this);this.sourcesListenerKeys_.push(u)}}.bind(this)),r===0?setTimeout(this.reproject_.bind(this),0):this.sourceTiles_.forEach(function(n,o,i){var a=n.getState();a==Pr.IDLE&&n.load()})}},t.prototype.unlistenSources_=function(){this.sourcesListenerKeys_.forEach($o),this.sourcesListenerKeys_=null},t.prototype.release=function(){this.canvas_&&(Kat(this.canvas_.getContext("2d")),wue.push(this.canvas_),this.canvas_=null),e.prototype.release.call(this)},t}(O2),G7=kRr;var CP=34962,AP=34963,clt=35040,P2=35044,plt=35048,flt=5121,dlt=5123,hlt=5125,Eue=5126,ult=["experimental-webgl","webgl","webkit-3d","moz-webgl"];function Sue(e,t){for(var r=Ei({preserveDrawingBuffer:!0,antialias:!cat},t),n=ult.length,o=0;o<n;++o)try{var i=e.getContext(ult[o],r);if(i)return i}catch(a){}return null}var RRr={STATIC_DRAW:P2,STREAM_DRAW:clt,DYNAMIC_DRAW:plt},jRr=function(){function e(t,r){this.array=null,this.type=t,Ln(t===CP||t===AP,62),this.usage=r!==void 0?r:RRr.STATIC_DRAW}return e.prototype.ofSize=function(t){this.array=new(Tue(this.type))(t)},e.prototype.fromArray=function(t){var r=Tue(this.type);this.array=r.from?r.from(t):new r(t)},e.prototype.fromArrayBuffer=function(t){this.array=new(Tue(this.type))(t)},e.prototype.getType=function(){return this.type},e.prototype.getArray=function(){return this.array},e.prototype.getUsage=function(){return this.usage},e.prototype.getSize=function(){return this.array?this.array.length:0},e}();function Tue(e){switch(e){case CP:return Float32Array;case AP:return Uint32Array;default:return Float32Array}}var H7=jRr;var qRr=function(){var e=function(t,r){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,o){n.__proto__=o}||function(n,o){for(var i in o)Object.prototype.hasOwnProperty.call(o,i)&&(n[i]=o[i])},e(t,r)};return function(t,r){if(typeof r!="function"&&r!==null)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");e(t,r);function n(){this.constructor=t}t.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}();function glt(e,t,r){var n=r?e.LINEAR:e.NEAREST;e.bindTexture(e.TEXTURE_2D,t),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_WRAP_S,e.CLAMP_TO_EDGE),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_WRAP_T,e.CLAMP_TO_EDGE),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_MIN_FILTER,n),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_MAG_FILTER,n)}function zRr(e,t,r,n){glt(e,t,n),e.texImage2D(e.TEXTURE_2D,0,e.RGBA,e.RGBA,e.UNSIGNED_BYTE,r)}function mlt(e,t,r,n,o,i){var a=e.getGL(),u,d;if(r instanceof Float32Array){u=a.FLOAT,e.getExtension("OES_texture_float");var h=e.getExtension("OES_texture_float_linear");d=h!==null}else u=a.UNSIGNED_BYTE,d=!0;glt(a,t,i&&d);var v=r.byteLength/n[1],b=1;v%8===0?b=8:v%4===0?b=4:v%2===0&&(b=2);var x;switch(o){case 1:{x=a.LUMINANCE;break}case 2:{x=a.LUMINANCE_ALPHA;break}case 3:{x=a.RGB;break}case 4:{x=a.RGBA;break}default:throw new Error("Unsupported number of bands: ".concat(o))}var M=a.getParameter(a.UNPACK_ALIGNMENT);a.pixelStorei(a.UNPACK_ALIGNMENT,b),a.texImage2D(a.TEXTURE_2D,0,x,n[0],n[1],0,x,u,r),a.pixelStorei(a.UNPACK_ALIGNMENT,M)}var N2=null;function FRr(){var e=document.createElement("canvas");e.width=1,e.height=1,N2=e.getContext("2d")}var URr=function(e){qRr(t,e);function t(r){var n=e.call(this)||this;n.tile,n.textures=[],n.handleTileChange_=n.handleTileChange_.bind(n),n.renderSize_=sl(r.grid.getTileSize(r.tile.tileCoord[0])),n.gutter_=r.gutter||0,n.bandCount=NaN,n.helper_=r.helper;var o=new H7(CP,P2);return o.fromArray([0,1,1,1,1,0,0,0]),n.helper_.flushBufferData(o),n.coords=o,n.setTile(r.tile),n}return t.prototype.setTile=function(r){if(r!==this.tile)if(this.tile&&this.tile.removeEventListener(Or.CHANGE,this.handleTileChange_),this.tile=r,this.textures.length=0,this.loaded=r.getState()===Pr.LOADED,this.loaded)this.uploadTile_();else{if(r instanceof hb){var n=r.getImage();n instanceof Image&&!n.crossOrigin&&(n.crossOrigin="anonymous")}r.addEventListener(Or.CHANGE,this.handleTileChange_)}},t.prototype.uploadTile_=function(){var r=this.helper_,n=r.getGL(),o=this.tile;if(o instanceof hb||o instanceof G7){var i=n.createTexture();this.textures.push(i),this.bandCount=4,zRr(n,i,o.getImage(),o.interpolate);return}var a=o.getSize(),u=[a[0]+2*this.gutter_,a[1]+2*this.gutter_],d=o.getData(),h=d instanceof Float32Array,v=u[0]*u[1],b=h?Float32Array:Uint8Array,x=b.BYTES_PER_ELEMENT,M=d.byteLength/u[1];this.bandCount=Math.floor(M/x/u[0]);var O=Math.ceil(this.bandCount/4);if(O===1){var i=n.createTexture();this.textures.push(i),mlt(r,i,d,u,this.bandCount,o.interpolate);return}for(var D=new Array(O),k=0;k<O;++k){var i=n.createTexture();this.textures.push(i);var R=k<O-1?4:this.bandCount%4;D[k]=new b(v*R)}for(var q=0,B=0,G=u[0]*this.bandCount,re=0;re<u[1];++re){for(var Q=0;Q<G;++Q){var ie=d[B+Q],me=Math.floor(q/this.bandCount),ve=Q%this.bandCount,k=Math.floor(ve/4),ye=D[k],R=ye.length/v,we=ve%4;ye[me*R+we]=ie,++q}B+=M/x}for(var k=0;k<O;++k){var i=this.textures[k],ye=D[k],R=ye.length/v;mlt(r,i,ye,u,R,o.interpolate)}},t.prototype.handleTileChange_=function(){this.tile.getState()===Pr.LOADED&&(this.loaded=!0,this.uploadTile_(),this.dispatchEvent(Or.CHANGE))},t.prototype.disposeInternal=function(){var r=this.helper_.getGL();this.helper_.deleteBuffer(this.coords);for(var n=0;n<this.textures.length;++n)r.deleteTexture(this.textures[n]);this.tile.removeEventListener(Or.CHANGE,this.handleTileChange_)},t.prototype.getPixelData=function(r,n){if(!this.loaded)return null;var o=this.renderSize_[0],i=this.renderSize_[1],a=this.gutter_;if(this.tile instanceof tlt){var u=this.tile.getSize(),d=u[0],h=u[1],v=d+2*a,b=h+2*a,x=a+Math.floor(d*(r/o)),M=a+Math.floor(h*(n/i)),O=this.tile.getData();if(O instanceof DataView){var D=O.byteLength/(v*b),k=D*(M*v+x),R=O.buffer.slice(k,k+D);return new DataView(R)}var q=this.bandCount*(M*v+x);return O.slice(q,q+this.bandCount)}N2||FRr(),N2.clearRect(0,0,1,1);var B=this.tile.getImage(),G=B.width,re=B.height,Q=G-2*a,ie=re-2*a,me=a+Math.floor(Q*(r/o)),ve=a+Math.floor(ie*(n/i)),ye;try{N2.drawImage(B,me,ve,1,1,0,0,1,1),ye=N2.getImageData(0,0,1,1).data}catch(we){return N2=null,null}return ye},t}(Ef),vlt=URr;var OP={LOST:"webglcontextlost",RESTORED:"webglcontextrestored"};var BRr=`
  precision mediump float;
  
  attribute vec2 a_position;
  varying vec2 v_texCoord;
  varying vec2 v_screenCoord;
  
  uniform vec2 u_screenSize;
   
  void main() {
    v_texCoord = a_position * 0.5 + 0.5;
    v_screenCoord = v_texCoord * u_screenSize;
    gl_Position = vec4(a_position, 0.0, 1.0);
  }
`,VRr=`
  precision mediump float;
   
  uniform sampler2D u_image;
  uniform float u_opacity;
   
  varying vec2 v_texCoord;
   
  void main() {
    gl_FragColor = texture2D(u_image, v_texCoord) * u_opacity;
  }
`,GRr=function(){function e(t){this.gl_=t.webGlContext;var r=this.gl_;this.scaleRatio_=t.scaleRatio||1,this.renderTargetTexture_=r.createTexture(),this.renderTargetTextureSize_=null,this.frameBuffer_=r.createFramebuffer();var n=r.createShader(r.VERTEX_SHADER);r.shaderSource(n,t.vertexShader||BRr),r.compileShader(n);var o=r.createShader(r.FRAGMENT_SHADER);r.shaderSource(o,t.fragmentShader||VRr),r.compileShader(o),this.renderTargetProgram_=r.createProgram(),r.attachShader(this.renderTargetProgram_,n),r.attachShader(this.renderTargetProgram_,o),r.linkProgram(this.renderTargetProgram_),this.renderTargetVerticesBuffer_=r.createBuffer();var i=[-1,-1,1,-1,-1,1,1,-1,1,1,-1,1];r.bindBuffer(r.ARRAY_BUFFER,this.renderTargetVerticesBuffer_),r.bufferData(r.ARRAY_BUFFER,new Float32Array(i),r.STATIC_DRAW),this.renderTargetAttribLocation_=r.getAttribLocation(this.renderTargetProgram_,"a_position"),this.renderTargetUniformLocation_=r.getUniformLocation(this.renderTargetProgram_,"u_screenSize"),this.renderTargetOpacityLocation_=r.getUniformLocation(this.renderTargetProgram_,"u_opacity"),this.renderTargetTextureLocation_=r.getUniformLocation(this.renderTargetProgram_,"u_image"),this.uniforms_=[],t.uniforms&&Object.keys(t.uniforms).forEach(function(a){this.uniforms_.push({value:t.uniforms[a],location:r.getUniformLocation(this.renderTargetProgram_,a)})}.bind(this))}return e.prototype.getGL=function(){return this.gl_},e.prototype.init=function(t){var r=this.getGL(),n=[r.drawingBufferWidth*this.scaleRatio_,r.drawingBufferHeight*this.scaleRatio_];if(r.bindFramebuffer(r.FRAMEBUFFER,this.getFrameBuffer()),r.viewport(0,0,n[0],n[1]),!this.renderTargetTextureSize_||this.renderTargetTextureSize_[0]!==n[0]||this.renderTargetTextureSize_[1]!==n[1]){this.renderTargetTextureSize_=n;var o=0,i=r.RGBA,a=0,u=r.RGBA,d=r.UNSIGNED_BYTE,h=null;r.bindTexture(r.TEXTURE_2D,this.renderTargetTexture_),r.texImage2D(r.TEXTURE_2D,o,i,n[0],n[1],a,u,d,h),r.texParameteri(r.TEXTURE_2D,r.TEXTURE_MIN_FILTER,r.LINEAR),r.texParameteri(r.TEXTURE_2D,r.TEXTURE_WRAP_S,r.CLAMP_TO_EDGE),r.texParameteri(r.TEXTURE_2D,r.TEXTURE_WRAP_T,r.CLAMP_TO_EDGE),r.framebufferTexture2D(r.FRAMEBUFFER,r.COLOR_ATTACHMENT0,r.TEXTURE_2D,this.renderTargetTexture_,0)}},e.prototype.apply=function(t,r,n,o){var i=this.getGL(),a=t.size;if(i.bindFramebuffer(i.FRAMEBUFFER,r?r.getFrameBuffer():null),i.activeTexture(i.TEXTURE0),i.bindTexture(i.TEXTURE_2D,this.renderTargetTexture_),!r){var u=Ka(i.canvas);if(!t.renderTargets[u]){var d=i.getContextAttributes();d&&d.preserveDrawingBuffer&&(i.clearColor(0,0,0,0),i.clear(i.COLOR_BUFFER_BIT)),t.renderTargets[u]=!0}}i.enable(i.BLEND),i.blendFunc(i.ONE,i.ONE_MINUS_SRC_ALPHA),i.viewport(0,0,i.drawingBufferWidth,i.drawingBufferHeight),i.bindBuffer(i.ARRAY_BUFFER,this.renderTargetVerticesBuffer_),i.useProgram(this.renderTargetProgram_),i.enableVertexAttribArray(this.renderTargetAttribLocation_),i.vertexAttribPointer(this.renderTargetAttribLocation_,2,i.FLOAT,!1,0,0),i.uniform2f(this.renderTargetUniformLocation_,a[0],a[1]),i.uniform1i(this.renderTargetTextureLocation_,0);var h=t.layerStatesArray[t.layerIndex].opacity;i.uniform1f(this.renderTargetOpacityLocation_,h),this.applyUniforms(t),n&&n(i,t),i.drawArrays(i.TRIANGLES,0,6),o&&o(i,t)},e.prototype.getFrameBuffer=function(){return this.frameBuffer_},e.prototype.applyUniforms=function(t){var r=this.getGL(),n,o=1;this.uniforms_.forEach(function(i){if(n=typeof i.value=="function"?i.value(t):i.value,n instanceof HTMLCanvasElement||n instanceof ImageData)i.texture||(i.texture=r.createTexture()),r.activeTexture(r["TEXTURE".concat(o)]),r.bindTexture(r.TEXTURE_2D,i.texture),r.texParameteri(r.TEXTURE_2D,r.TEXTURE_MIN_FILTER,r.LINEAR),r.texParameteri(r.TEXTURE_2D,r.TEXTURE_WRAP_S,r.CLAMP_TO_EDGE),r.texParameteri(r.TEXTURE_2D,r.TEXTURE_WRAP_T,r.CLAMP_TO_EDGE),n instanceof ImageData?r.texImage2D(r.TEXTURE_2D,0,r.RGBA,r.RGBA,n.width,n.height,0,r.UNSIGNED_BYTE,new Uint8Array(n.data)):r.texImage2D(r.TEXTURE_2D,0,r.RGBA,r.RGBA,r.UNSIGNED_BYTE,n),r.uniform1i(i.location,o++);else if(Array.isArray(n))switch(n.length){case 2:r.uniform2f(i.location,n[0],n[1]);return;case 3:r.uniform3f(i.location,n[0],n[1],n[2]);return;case 4:r.uniform4f(i.location,n[0],n[1],n[2],n[3]);return;default:return}else typeof n=="number"&&r.uniform1f(i.location,n)})},e}(),Iue=GRr;function W7(){return[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1]}function D2(e,t){return e[0]=t[0],e[1]=t[1],e[4]=t[2],e[5]=t[3],e[12]=t[4],e[13]=t[5],e}var HRr=function(){var e=function(t,r){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,o){n.__proto__=o}||function(n,o){for(var i in o)Object.prototype.hasOwnProperty.call(o,i)&&(n[i]=o[i])},e(t,r)};return function(t,r){if(typeof r!="function"&&r!==null)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");e(t,r);function n(){this.constructor=t}t.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}();var PP={PROJECTION_MATRIX:"u_projectionMatrix",OFFSET_SCALE_MATRIX:"u_offsetScaleMatrix",OFFSET_ROTATION_MATRIX:"u_offsetRotateMatrix",TIME:"u_time",ZOOM:"u_zoom",RESOLUTION:"u_resolution"},L2={UNSIGNED_BYTE:flt,UNSIGNED_SHORT:dlt,UNSIGNED_INT:hlt,FLOAT:Eue},$7={};function ylt(e){return"shared/"+e}var _lt=0;function WRr(){var e="unique/"+_lt;return _lt+=1,e}function $Rr(e){var t=$7[e];if(!t){var r=document.createElement("canvas");r.style.position="absolute",r.style.left="0",t={users:0,canvas:r},$7[e]=t}return t.users+=1,t.canvas}function ZRr(e){var t=$7[e];if(t&&(t.users-=1,!(t.users>0))){var r=t.canvas,n=Sue(r),o=n.getExtension("WEBGL_lose_context");o&&o.loseContext(),delete $7[e]}}var YRr=function(e){HRr(t,e);function t(r){var n=e.call(this)||this,o=r||{};n.boundHandleWebGLContextLost_=n.handleWebGLContextLost.bind(n),n.boundHandleWebGLContextRestored_=n.handleWebGLContextRestored.bind(n),n.canvasCacheKey_=o.canvasCacheKey?ylt(o.canvasCacheKey):WRr(),n.canvas_=$Rr(n.canvasCacheKey_),n.gl_=Sue(n.canvas_),n.bufferCache_={},n.extensionCache_={},n.currentProgram_=null,n.canvas_.addEventListener(OP.LOST,n.boundHandleWebGLContextLost_),n.canvas_.addEventListener(OP.RESTORED,n.boundHandleWebGLContextRestored_),n.offsetRotateMatrix_=Tf(),n.offsetScaleMatrix_=Tf(),n.tmpMat4_=W7(),n.uniformLocations_={},n.attribLocations_={},n.uniforms_=[],o.uniforms&&n.setUniforms(o.uniforms);var i=n.getGL();return n.postProcessPasses_=o.postProcesses?o.postProcesses.map(function(a){return new Iue({webGlContext:i,scaleRatio:a.scaleRatio,vertexShader:a.vertexShader,fragmentShader:a.fragmentShader,uniforms:a.uniforms})}):[new Iue({webGlContext:i})],n.shaderCompileErrors_=null,n.startTime_=Date.now(),n}return t.prototype.setUniforms=function(r){this.uniforms_=[];for(var n in r)this.uniforms_.push({name:n,value:r[n]});this.uniformLocations_={}},t.prototype.canvasCacheKeyMatches=function(r){return this.canvasCacheKey_===ylt(r)},t.prototype.getExtension=function(r){if(r in this.extensionCache_)return this.extensionCache_[r];var n=this.gl_.getExtension(r);return this.extensionCache_[r]=n,n},t.prototype.bindBuffer=function(r){var n=this.getGL(),o=Ka(r),i=this.bufferCache_[o];if(!i){var a=n.createBuffer();i={buffer:r,webGlBuffer:a},this.bufferCache_[o]=i}n.bindBuffer(r.getType(),i.webGlBuffer)},t.prototype.flushBufferData=function(r){var n=this.getGL();this.bindBuffer(r),n.bufferData(r.getType(),r.getArray(),r.getUsage())},t.prototype.deleteBuffer=function(r){var n=this.getGL(),o=Ka(r),i=this.bufferCache_[o];i&&!n.isContextLost()&&n.deleteBuffer(i.webGlBuffer),delete this.bufferCache_[o]},t.prototype.disposeInternal=function(){this.canvas_.removeEventListener(OP.LOST,this.boundHandleWebGLContextLost_),this.canvas_.removeEventListener(OP.RESTORED,this.boundHandleWebGLContextRestored_),ZRr(this.canvasCacheKey_),delete this.gl_,delete this.canvas_},t.prototype.prepareDraw=function(r,n){var o=this.getGL(),i=this.getCanvas(),a=r.size,u=r.pixelRatio;i.width=a[0]*u,i.height=a[1]*u,i.style.width=a[0]+"px",i.style.height=a[1]+"px",o.useProgram(this.currentProgram_);for(var d=this.postProcessPasses_.length-1;d>=0;d--)this.postProcessPasses_[d].init(r);o.bindTexture(o.TEXTURE_2D,null),o.clearColor(0,0,0,0),o.clear(o.COLOR_BUFFER_BIT),o.enable(o.BLEND),o.blendFunc(o.ONE,n?o.ZERO:o.ONE_MINUS_SRC_ALPHA),o.useProgram(this.currentProgram_),this.applyFrameState(r),this.applyUniforms(r)},t.prototype.prepareDrawToRenderTarget=function(r,n,o){var i=this.getGL(),a=n.getSize();i.bindFramebuffer(i.FRAMEBUFFER,n.getFramebuffer()),i.viewport(0,0,a[0],a[1]),i.bindTexture(i.TEXTURE_2D,n.getTexture()),i.clearColor(0,0,0,0),i.clear(i.COLOR_BUFFER_BIT),i.enable(i.BLEND),i.blendFunc(i.ONE,o?i.ZERO:i.ONE_MINUS_SRC_ALPHA),i.useProgram(this.currentProgram_),this.applyFrameState(r),this.applyUniforms(r)},t.prototype.drawElements=function(r,n){var o=this.getGL();this.getExtension("OES_element_index_uint");var i=o.UNSIGNED_INT,a=4,u=n-r,d=r*a;o.drawElements(o.TRIANGLES,u,i,d)},t.prototype.finalizeDraw=function(r,n,o){for(var i=0,a=this.postProcessPasses_.length;i<a;i++)i===a-1?this.postProcessPasses_[i].apply(r,null,n,o):this.postProcessPasses_[i].apply(r,this.postProcessPasses_[i+1])},t.prototype.getCanvas=function(){return this.canvas_},t.prototype.getGL=function(){return this.gl_},t.prototype.applyFrameState=function(r){var n=r.size,o=r.viewState.rotation,i=E2(this.offsetScaleMatrix_);yP(i,2/n[0],2/n[1]);var a=E2(this.offsetRotateMatrix_);o!==0&&C7(a,-o),this.setUniformMatrixValue(PP.OFFSET_SCALE_MATRIX,D2(this.tmpMat4_,i)),this.setUniformMatrixValue(PP.OFFSET_ROTATION_MATRIX,D2(this.tmpMat4_,a)),this.setUniformFloatValue(PP.TIME,(Date.now()-this.startTime_)*.001),this.setUniformFloatValue(PP.ZOOM,r.viewState.zoom),this.setUniformFloatValue(PP.RESOLUTION,r.viewState.resolution)},t.prototype.applyUniforms=function(r){var n=this.getGL(),o,i=0;this.uniforms_.forEach(function(a){if(o=typeof a.value=="function"?a.value(r):a.value,o instanceof HTMLCanvasElement||o instanceof HTMLImageElement||o instanceof ImageData){a.texture||(a.prevValue=void 0,a.texture=n.createTexture()),n.activeTexture(n["TEXTURE".concat(i)]),n.bindTexture(n.TEXTURE_2D,a.texture),n.texParameteri(n.TEXTURE_2D,n.TEXTURE_MIN_FILTER,n.LINEAR),n.texParameteri(n.TEXTURE_2D,n.TEXTURE_WRAP_S,n.CLAMP_TO_EDGE),n.texParameteri(n.TEXTURE_2D,n.TEXTURE_WRAP_T,n.CLAMP_TO_EDGE);var u=!(o instanceof HTMLImageElement)||o.complete;u&&a.prevValue!==o&&(a.prevValue=o,n.texImage2D(n.TEXTURE_2D,0,n.RGBA,n.RGBA,n.UNSIGNED_BYTE,o)),n.uniform1i(this.getUniformLocation(a.name),i++)}else if(Array.isArray(o)&&o.length===6)this.setUniformMatrixValue(a.name,D2(this.tmpMat4_,o));else if(Array.isArray(o)&&o.length<=4)switch(o.length){case 2:n.uniform2f(this.getUniformLocation(a.name),o[0],o[1]);return;case 3:n.uniform3f(this.getUniformLocation(a.name),o[0],o[1],o[2]);return;case 4:n.uniform4f(this.getUniformLocation(a.name),o[0],o[1],o[2],o[3]);return;default:return}else typeof o=="number"&&n.uniform1f(this.getUniformLocation(a.name),o)}.bind(this))},t.prototype.useProgram=function(r){if(r==this.currentProgram_)return!1;var n=this.getGL();return n.useProgram(r),this.currentProgram_=r,this.uniformLocations_={},this.attribLocations_={},!0},t.prototype.compileShader=function(r,n){var o=this.getGL(),i=o.createShader(n);return o.shaderSource(i,r),o.compileShader(i),i},t.prototype.getProgram=function(r,n){var o=this.getGL(),i=this.compileShader(r,o.FRAGMENT_SHADER),a=this.compileShader(n,o.VERTEX_SHADER),u=o.createProgram();if(o.attachShader(u,i),o.attachShader(u,a),o.linkProgram(u),!o.getShaderParameter(i,o.COMPILE_STATUS)){var d="Fragment shader compliation failed: ".concat(o.getShaderInfoLog(i));throw new Error(d)}if(o.deleteShader(i),!o.getShaderParameter(a,o.COMPILE_STATUS)){var d="Vertex shader compilation failed: ".concat(o.getShaderInfoLog(a));throw new Error(d)}if(o.deleteShader(a),!o.getProgramParameter(u,o.LINK_STATUS)){var d="GL program linking failed: ".concat(o.getShaderInfoLog(a));throw new Error(d)}return u},t.prototype.getUniformLocation=function(r){return this.uniformLocations_[r]===void 0&&(this.uniformLocations_[r]=this.getGL().getUniformLocation(this.currentProgram_,r)),this.uniformLocations_[r]},t.prototype.getAttributeLocation=function(r){return this.attribLocations_[r]===void 0&&(this.attribLocations_[r]=this.getGL().getAttribLocation(this.currentProgram_,r)),this.attribLocations_[r]},t.prototype.makeProjectionTransform=function(r,n){var o=r.size,i=r.viewState.rotation,a=r.viewState.resolution,u=r.viewState.center;return E2(n),x0(n,0,0,2/(a*o[0]),2/(a*o[1]),-i,-u[0],-u[1]),n},t.prototype.setUniformFloatValue=function(r,n){this.getGL().uniform1f(this.getUniformLocation(r),n)},t.prototype.setUniformFloatVec4=function(r,n){this.getGL().uniform4fv(this.getUniformLocation(r),n)},t.prototype.setUniformMatrixValue=function(r,n){this.getGL().uniformMatrix4fv(this.getUniformLocation(r),!1,n)},t.prototype.enableAttributeArray_=function(r,n,o,i,a){var u=this.getAttributeLocation(r);u<0||(this.getGL().enableVertexAttribArray(u),this.getGL().vertexAttribPointer(u,n,o,!1,i,a))},t.prototype.enableAttributes=function(r){for(var n=KRr(r),o=0,i=0;i<r.length;i++){var a=r[i];this.enableAttributeArray_(a.name,a.size,a.type||Eue,n,o),o+=a.size*blt(a.type)}},t.prototype.handleWebGLContextLost=function(){ff(this.bufferCache_),this.currentProgram_=null},t.prototype.handleWebGLContextRestored=function(){},t.prototype.createTexture=function(r,n,o){var i=this.getGL(),a=o||i.createTexture(),u=0,d=i.RGBA,h=0,v=i.RGBA,b=i.UNSIGNED_BYTE;return i.bindTexture(i.TEXTURE_2D,a),n?i.texImage2D(i.TEXTURE_2D,u,d,v,b,n):i.texImage2D(i.TEXTURE_2D,u,d,r[0],r[1],h,v,b,null),i.texParameteri(i.TEXTURE_2D,i.TEXTURE_MIN_FILTER,i.LINEAR),i.texParameteri(i.TEXTURE_2D,i.TEXTURE_WRAP_S,i.CLAMP_TO_EDGE),i.texParameteri(i.TEXTURE_2D,i.TEXTURE_WRAP_T,i.CLAMP_TO_EDGE),a},t}(v0);function KRr(e){for(var t=0,r=0;r<e.length;r++){var n=e[r];t+=n.size*blt(n.type)}return t}function blt(e){switch(e){case L2.UNSIGNED_BYTE:return Uint8Array.BYTES_PER_ELEMENT;case L2.UNSIGNED_SHORT:return Uint16Array.BYTES_PER_ELEMENT;case L2.UNSIGNED_INT:return Uint32Array.BYTES_PER_ELEMENT;case L2.FLOAT:default:return Float32Array.BYTES_PER_ELEMENT}}var xlt=YRr;var XRr=function(){var e=function(t,r){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,o){n.__proto__=o}||function(n,o){for(var i in o)Object.prototype.hasOwnProperty.call(o,i)&&(n[i]=o[i])},e(t,r)};return function(t,r){if(typeof r!="function"&&r!==null)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");e(t,r);function n(){this.constructor=t}t.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}();var QRr=function(e){XRr(t,e);function t(r,n){var o=e.call(this,r)||this,i=n||{};return o.inversePixelTransform_=Tf(),o.pixelContext_=null,o.postProcesses_=i.postProcesses,o.uniforms_=i.uniforms,o.helper,r.addChangeListener(Po.MAP,o.removeHelper.bind(o)),o.dispatchPreComposeEvent=o.dispatchPreComposeEvent.bind(o),o.dispatchPostComposeEvent=o.dispatchPostComposeEvent.bind(o),o}return t.prototype.dispatchPreComposeEvent=function(r,n){var o=this.getLayer();if(o.hasListener(mu.PRECOMPOSE)){var i=new A2(mu.PRECOMPOSE,void 0,n,r);o.dispatchEvent(i)}},t.prototype.dispatchPostComposeEvent=function(r,n){var o=this.getLayer();if(o.hasListener(mu.POSTCOMPOSE)){var i=new A2(mu.POSTCOMPOSE,void 0,n,r);o.dispatchEvent(i)}},t.prototype.reset=function(r){this.uniforms_=r.uniforms,this.helper&&this.helper.setUniforms(this.uniforms_)},t.prototype.removeHelper=function(){this.helper&&(this.helper.dispose(),delete this.helper)},t.prototype.prepareFrame=function(r){if(this.getLayer().getRenderSource()){for(var n=!0,o=-1,i=void 0,a=0,u=r.layerStatesArray.length;a<u;a++){var d=r.layerStatesArray[a].layer,h=d.getRenderer();if(!(h instanceof t)){n=!0;continue}var v=d.getClassName();if((n||v!==i)&&(o+=1,n=!1),i=v,h===this)break}var b="map/"+r.mapId+"/group/"+o;(!this.helper||!this.helper.canvasCacheKeyMatches(b))&&(this.removeHelper(),this.helper=new xlt({postProcesses:this.postProcesses_,uniforms:this.uniforms_,canvasCacheKey:b}),i&&(this.helper.getCanvas().className=i),this.afterHelperCreated())}return this.prepareFrameInternal(r)},t.prototype.afterHelperCreated=function(){},t.prototype.prepareFrameInternal=function(r){return!0},t.prototype.disposeInternal=function(){this.removeHelper(),e.prototype.disposeInternal.call(this)},t.prototype.dispatchRenderEvent_=function(r,n,o){var i=this.getLayer();if(i.hasListener(r)){x0(this.inversePixelTransform_,0,0,o.pixelRatio,-o.pixelRatio,0,0,-o.size[1]);var a=new A2(r,this.inversePixelTransform_,o,n);i.dispatchEvent(a)}},t.prototype.preRender=function(r,n){this.dispatchRenderEvent_(mu.PRERENDER,r,n)},t.prototype.postRender=function(r,n){this.dispatchRenderEvent_(mu.POSTRENDER,r,n)},t.prototype.getDataAtPixel=function(r,n,o){var i=b0([n.pixelRatio,0,0,n.pixelRatio,0,0],r.slice()),a=this.helper.getGL();if(!a)return null;var u=this.getLayer(),d=u.getExtent();if(d){var h=b0(n.pixelToCoordinateTransform,r.slice());if(!Cg(d,h))return null}var v=a.getContextAttributes();if(!v||!v.preserveDrawingBuffer)return new Uint8Array;var b=Math.round(i[0]),x=Math.round(i[1]),M=this.pixelContext_;if(!M){var O=document.createElement("canvas");O.width=1,O.height=1,M=O.getContext("2d"),this.pixelContext_=M}M.clearRect(0,0,1,1);var D;try{M.drawImage(a.canvas,b,x,1,1,0,0,1,1),D=M.getImageData(0,0,1,1).data}catch(k){return D}return D[3]===0?null:D},t}(Ast);var wlt=QRr;function k2(e,t,r,n){return n!==void 0?(n[0]=e,n[1]=t,n[2]=r,n):[e,t,r]}function mb(e,t,r){return e+"/"+t+"/"+r}function I0(e){return mb(e[0],e[1],e[2])}function Elt(e){return e.split("/").map(Number)}function Slt(e){return(e[1]<<e[0])+e[2]}function Tlt(e,t){var r=e[0],n=e[1],o=e[2];if(t.getMinZoom()>r||r>t.getMaxZoom())return!1;var i=t.getFullTileRange(r);return i?i.containsXY(n,o):!0}var JRr=function(){var e=function(t,r){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,o){n.__proto__=o}||function(n,o){for(var i in o)Object.prototype.hasOwnProperty.call(o,i)&&(n[i]=o[i])},e(t,r)};return function(t,r){if(typeof r!="function"&&r!==null)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");e(t,r);function n(){this.constructor=t}t.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),jn={TILE_TEXTURE_ARRAY:"u_tileTextures",TILE_TRANSFORM:"u_tileTransform",TRANSITION_ALPHA:"u_transitionAlpha",DEPTH:"u_depth",TEXTURE_PIXEL_WIDTH:"u_texturePixelWidth",TEXTURE_PIXEL_HEIGHT:"u_texturePixelHeight",TEXTURE_RESOLUTION:"u_textureResolution",TEXTURE_ORIGIN_X:"u_textureOriginX",TEXTURE_ORIGIN_Y:"u_textureOriginY",RENDER_EXTENT:"u_renderExtent",RESOLUTION:"u_resolution",ZOOM:"u_zoom"},NP={TEXTURE_COORD:"a_textureCoord"},e6r=[{name:NP.TEXTURE_COORD,size:2,type:L2.FLOAT}],t6r={};function r6r(e){return 2*(1-1/(e+1))-1}function Ilt(e,t,r){r in e||(e[r]=[]),e[r].push(t)}function Mue(e,t){var r=e.layerStatesArray[e.layerIndex];r.extent&&(t=Uh(t,o0(r.extent,e.viewState.projection)));var n=r.layer.getRenderSource();if(!n.getWrapX()){var o=n.getTileGridForProjection(e.viewState.projection).getExtent();o&&(t=Uh(t,o))}return t}function Cue(e,t){return"".concat(e.getKey(),",").concat(I0(t))}var n6r=function(e){JRr(t,e);function t(r,n){var o=e.call(this,r,{uniforms:n.uniforms})||this;o.renderComplete=!1,o.tileTransform_=Tf(),o.tempMat4_=W7(),o.tempTileRange_=new V7(0,0,0,0),o.tempTileCoord_=k2(0,0,0),o.tempSize_=[0,0],o.program_,o.vertexShader_=n.vertexShader,o.fragmentShader_=n.fragmentShader,o.indices_=new H7(AP,P2),o.indices_.fromArray([0,1,3,1,2,3]);var i=n.cacheSize!==void 0?n.cacheSize:512;return o.tileTextureCache_=new B7(i),o.paletteTextures_=n.paletteTextures||[],o.frameState_=null,o}return t.prototype.reset=function(r){e.prototype.reset.call(this,{uniforms:r.uniforms}),this.vertexShader_=r.vertexShader,this.fragmentShader_=r.fragmentShader,this.paletteTextures_=r.paletteTextures||[],this.helper&&(this.program_=this.helper.getProgram(this.fragmentShader_,this.vertexShader_))},t.prototype.afterHelperCreated=function(){this.program_=this.helper.getProgram(this.fragmentShader_,this.vertexShader_),this.helper.flushBufferData(this.indices_)},t.prototype.isDrawableTile_=function(r){var n=this.getLayer(),o=r.getState(),i=n.getUseInterimTilesOnError();return o==Pr.LOADED||o==Pr.EMPTY||o==Pr.ERROR&&!i},t.prototype.prepareFrameInternal=function(r){var n=this.getLayer(),o=n.getRenderSource();return!o||Y_(Mue(r,r.extent))?!1:o.getState()==="ready"},t.prototype.enqueueTiles=function(r,n,o,i){var a=r.viewState,u=this.getLayer(),d=u.getRenderSource(),h=d.getTileGridForProjection(a.projection),v=d.getGutterForProjection(a.projection),b=Ka(d);b in r.wantedTiles||(r.wantedTiles[b]={});for(var x=r.wantedTiles[b],M=this.tileTextureCache_,O=Math.max(o-u.getPreload(),h.getMinZoom(),u.getMinZoom()),D=o;D>=O;--D)for(var k=h.getTileRangeForExtentAndZ(n,D,this.tempTileRange_),R=h.getResolution(D),q=k.minX;q<=k.maxX;++q)for(var B=k.minY;B<=k.maxY;++B){var G=k2(D,q,B,this.tempTileCoord_),re=Cue(d,G),Q=void 0,ie=void 0;if(M.containsKey(re)&&(Q=M.get(re),ie=Q.tile),!Q||Q.tile.key!==d.getKey())if(ie=d.getTile(D,q,B,r.pixelRatio,a.projection),!Q)Q=new vlt({tile:ie,grid:h,helper:this.helper,gutter:v}),M.set(re,Q);else if(this.isDrawableTile_(ie))Q.setTile(ie);else{var me=ie.getInterimTile();Q.setTile(me)}Ilt(i,Q,D);var ve=ie.getKey();x[ve]=!0,ie.getState()===Pr.IDLE&&(r.tileQueue.isKeyQueued(ve)||r.tileQueue.enqueue([ie,b,h.getTileCoordCenter(G),R]))}},t.prototype.renderFrame=function(r){this.frameState_=r,this.renderComplete=!0;var n=this.helper.getGL();this.preRender(n,r);var o=r.viewState,i=this.getLayer(),a=i.getRenderSource(),u=a.getTileGridForProjection(o.projection),d=a.getGutterForProjection(o.projection),h=Mue(r,r.extent),v=u.getZForResolution(o.resolution,a.zDirection),b={};if(r.nextExtent){var x=u.getZForResolution(o.nextResolution,a.zDirection),M=Mue(r,r.nextExtent);this.enqueueTiles(r,M,x,b)}this.enqueueTiles(r,h,v,b);for(var O={},D=Ka(this),k=r.time,R=!1,q=b[v],B=0,G=q.length;B<G;++B){var re=q[B],Q=re.tile,ie=Q.tileCoord;if(re.loaded){var me=Q.getAlpha(D,k);if(me===1){Q.endTransition(D);continue}R=!0;var ve=I0(ie);O[ve]=me}this.renderComplete=!1;var ye=this.findAltTiles_(u,ie,v+1,b);if(!ye)for(var we=u.getMinZoom(),Se=v-1;Se>=we;--Se){var ge=this.findAltTiles_(u,ie,Se,b);if(ge)break}}this.helper.useProgram(this.program_),this.helper.prepareDraw(r,!R);for(var Re=Object.keys(b).map(Number).sort(vP),Je=o.center[0],tt=o.center[1],Et=0,Xe=Re.length;Et<Xe;++Et)for(var Pt=Re[Et],Lt=u.getResolution(Pt),Gt=sl(u.getTileSize(Pt),this.tempSize_),nt=u.getOrigin(Pt),ct=Gt[0]+2*d,_t=Gt[1]+2*d,We=ct/_t,De=(Je-nt[0])/(Gt[0]*Lt),Qe=(nt[1]-tt)/(Gt[1]*Lt),Ge=o.resolution/Lt,st=r6r(Pt),pt=b[Pt],B=0,G=pt.length;B<G;++B){var re=pt[B];if(re.loaded){var Q=re.tile,ie=Q.tileCoord,ve=I0(ie),Rt=ie[1],St=ie[2];E2(this.tileTransform_),yP(this.tileTransform_,2/(r.size[0]*Ge/ct),-2/(r.size[1]*Ge/ct)),C7(this.tileTransform_,o.rotation),yP(this.tileTransform_,1,1/We),mat(this.tileTransform_,(Gt[0]*(Rt-De)-d)/ct,(Gt[1]*(St-Qe)-d)/_t),this.helper.setUniformMatrixValue(jn.TILE_TRANSFORM,D2(this.tempMat4_,this.tileTransform_)),this.helper.bindBuffer(re.coords),this.helper.bindBuffer(this.indices_),this.helper.enableAttributes(e6r);for(var Ot=0;Ot<re.textures.length;){var sr="TEXTURE"+Ot,Ft="".concat(jn.TILE_TEXTURE_ARRAY,"[").concat(Ot,"]");n.activeTexture(n[sr]),n.bindTexture(n.TEXTURE_2D,re.textures[Ot]),n.uniform1i(this.helper.getUniformLocation(Ft),Ot),++Ot}for(var Jt=0;Jt<this.paletteTextures_.length;++Jt){var dr=this.paletteTextures_[Jt];n.activeTexture(n["TEXTURE"+Ot]);var Er=dr.getTexture(n);n.bindTexture(n.TEXTURE_2D,Er),n.uniform1i(this.helper.getUniformLocation(dr.name),Ot),++Ot}var me=ve in O?O[ve]:1;me<1&&(r.animate=!0),this.helper.setUniformFloatValue(jn.TRANSITION_ALPHA,me),this.helper.setUniformFloatValue(jn.DEPTH,st),this.helper.setUniformFloatValue(jn.TEXTURE_PIXEL_WIDTH,ct),this.helper.setUniformFloatValue(jn.TEXTURE_PIXEL_HEIGHT,_t),this.helper.setUniformFloatValue(jn.TEXTURE_RESOLUTION,Lt),this.helper.setUniformFloatValue(jn.TEXTURE_ORIGIN_X,nt[0]+Rt*Gt[0]*Lt-d*Lt),this.helper.setUniformFloatValue(jn.TEXTURE_ORIGIN_Y,nt[1]-St*Gt[1]*Lt+d*Lt);var Cr=h;d>0&&(Cr=u.getTileCoordExtent(ie),Uh(Cr,h,Cr)),this.helper.setUniformFloatVec4(jn.RENDER_EXTENT,Cr),this.helper.setUniformFloatValue(jn.RESOLUTION,o.resolution),this.helper.setUniformFloatValue(jn.ZOOM,o.zoom),this.helper.drawElements(0,this.indices_.getSize())}}this.helper.finalizeDraw(r,this.dispatchPreComposeEvent,this.dispatchPostComposeEvent);for(var Tr=this.helper.getCanvas(),qr=this.tileTextureCache_;qr.canExpireCache();){var re=qr.pop();re.dispose()}var Ce=function(Ze,et){a.expireCache(et.viewState.projection,t6r)};return r.postRenderFunctions.push(Ce),this.postRender(n,r),Tr},t.prototype.getData=function(r){var n=this.helper.getGL();if(!n)return null;var o=this.frameState_;if(!o)return null;var i=this.getLayer(),a=b0(o.pixelToCoordinateTransform,r.slice()),u=o.viewState,d=i.getExtent();if(d&&!Cg(o0(d,u.projection),a))return null;var h=i.getSources(h4([a]),u.resolution),v,b,x;for(v=h.length-1;v>=0;--v)if(b=h[v],b.getState()==="ready"){if(x=b.getTileGridForProjection(u.projection),b.getWrapX())break;var M=x.getExtent();if(!M||Cg(M,a))break}if(v<0)return null;for(var O=this.tileTextureCache_,D=x.getZForResolution(u.resolution);D>=x.getMinZoom();--D){var k=x.getTileCoordForCoordAndZ(a,D),R=Cue(b,k);if(O.containsKey(R)){var q=O.get(R);if(q.loaded){var B=x.getOrigin(D),G=sl(x.getTileSize(D)),re=x.getResolution(D),Q=(a[0]-B[0])/re-k[1]*G[0],ie=(B[1]-a[1])/re-k[2]*G[1];return q.getPixelData(Q,ie)}}}return null},t.prototype.findAltTiles_=function(r,n,o,i){var a=r.getTileRangeForTileCoordAndZ(n,o,this.tempTileRange_);if(!a)return!1;for(var u=!0,d=this.tileTextureCache_,h=this.getLayer().getRenderSource(),v=a.minX;v<=a.maxX;++v)for(var b=a.minY;b<=a.maxY;++b){var x=Cue(h,[o,v,b]),M=!1;if(d.containsKey(x)){var O=d.get(x);O.loaded&&(Ilt(i,O,o),M=!0)}M||(u=!1)}return u},t.prototype.removeHelper=function(){if(this.helper){var r=this.tileTextureCache_;r.forEach(function(n){return n.dispose()}),r.clear()}e.prototype.removeHelper.call(this)},t.prototype.disposeInternal=function(){var r=this.helper;if(r){var n=r.getGL();n.deleteProgram(this.program_),delete this.program_,r.deleteBuffer(this.indices_)}e.prototype.disposeInternal.call(this),delete this.indices_,delete this.tileTextureCache_,delete this.frameState_},t}(wlt),Mlt=n6r;var o6r=function(){function e(t,r){this.name=t,this.data=r,this.texture_=null}return e.prototype.getTexture=function(t){if(!this.texture_){var r=t.createTexture();t.bindTexture(t.TEXTURE_2D,r),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_WRAP_S,t.CLAMP_TO_EDGE),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_WRAP_T,t.CLAMP_TO_EDGE),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_MIN_FILTER,t.NEAREST),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_MAG_FILTER,t.NEAREST),t.texImage2D(t.TEXTURE_2D,0,t.RGBA,this.data.length/4,1,0,t.RGBA,t.UNSIGNED_BYTE,this.data),this.texture_=r}return this.texture_},e}(),Clt=o6r;var Mr={NUMBER:1,STRING:2,COLOR:4,BOOLEAN:8,NUMBER_ARRAY:16,ANY:31,NONE:0},eo={};function um(e){if(typeof e=="number")return Mr.NUMBER;if(typeof e=="boolean")return Mr.BOOLEAN;if(typeof e=="string")return Mst(e)?Mr.COLOR|Mr.STRING:Mr.STRING;if(!Array.isArray(e))throw new Error("Unhandled value type: ".concat(JSON.stringify(e)));var t=e,r=t.every(function(o){return typeof o=="number"});if(r)return t.length===3||t.length===4?Mr.COLOR|Mr.NUMBER_ARRAY:Mr.NUMBER_ARRAY;if(typeof t[0]!="string")throw new Error("Expected an expression operator but received: ".concat(JSON.stringify(t)));var n=eo[t[0]];if(n===void 0)throw new Error("Unrecognized expression operator: ".concat(JSON.stringify(t)));return n.getReturnType(t.slice(1))}function i6r(e){return xz(e)%1===0}function Z7(e){var t=e.toString();return t.indexOf(".")===-1?t+".0":t}function Alt(e){if(e.length<2||e.length>4)throw new Error("`formatArray` can only output `vec2`, `vec3` or `vec4` arrays.");return"vec".concat(e.length,"(").concat(e.map(Z7).join(", "),")")}function a6r(e){var t=Ist(e).slice();return t.length<4&&t.push(1),Alt(t.map(function(r,n){return n<3?r/255:r}))}function Oue(e,t){return e.stringLiteralsMap[t]===void 0&&(e.stringLiteralsMap[t]=Object.keys(e.stringLiteralsMap).length),e.stringLiteralsMap[t]}function s6r(e,t){return Z7(Oue(e,t))}function kr(e,t,r){if(Array.isArray(t)&&typeof t[0]=="string"){var n=eo[t[0]];if(n===void 0)throw new Error("Unrecognized expression operator: ".concat(JSON.stringify(t)));return n.toGlsl(e,t.slice(1),r)}var o=um(t);if((o&Mr.NUMBER)>0)return Z7(t);if((o&Mr.BOOLEAN)>0)return t.toString();if((o&Mr.STRING)>0&&(r===void 0||r==Mr.STRING))return s6r(e,t.toString());if((o&Mr.COLOR)>0&&(r===void 0||r==Mr.COLOR))return a6r(t);if((o&Mr.NUMBER_ARRAY)>0)return Alt(t);throw new Error("Unexpected expression ".concat(t," (expected type ").concat(r,")"))}function Olt(e){if(!(um(e)&Mr.NUMBER))throw new Error("A numeric value was expected, got ".concat(JSON.stringify(e)," instead"))}function Qa(e){for(var t=0;t<e.length;t++)Olt(e[t])}function Plt(e){if(!(um(e)&Mr.STRING))throw new Error("A string value was expected, got ".concat(JSON.stringify(e)," instead"))}function Pue(e){if(!(um(e)&Mr.BOOLEAN))throw new Error("A boolean value was expected, got ".concat(JSON.stringify(e)," instead"))}function Wi(e,t){if(e.length!==t)throw new Error("Exactly ".concat(t," arguments were expected, got ").concat(e.length," instead"))}function M0(e,t){if(e.length<t)throw new Error("At least ".concat(t," arguments were expected, got ").concat(e.length," instead"))}function Y7(e,t){if(e.length>t)throw new Error("At most ".concat(t," arguments were expected, got ").concat(e.length," instead"))}function Nlt(e){if(e.length%2!==0)throw new Error("An even amount of arguments was expected, got ".concat(e," instead"))}function l6r(e){if(e.length%2===0)throw new Error("An odd amount of arguments was expected, got ".concat(e," instead"))}function Nue(e,t){if(!i6r(t))throw new Error("Could not infer only one type from the following expression: ".concat(JSON.stringify(e)))}eo.get={getReturnType:function(e){return Mr.ANY},toGlsl:function(e,t){Wi(t,1),Plt(t[0]);var r=t[0].toString();e.attributes.indexOf(r)===-1&&e.attributes.push(r);var n=e.inFragmentShader?"v_":"a_";return n+r}};function Due(e){return"u_var_"+e}eo.var={getReturnType:function(e){return Mr.ANY},toGlsl:function(e,t){Wi(t,1),Plt(t[0]);var r=t[0].toString();return e.variables.indexOf(r)===-1&&e.variables.push(r),Due(r)}};var Lue="u_paletteTextures";eo.palette={getReturnType:function(e){return Mr.COLOR},toGlsl:function(e,t){Wi(t,2),Olt(t[0]);var r=kr(e,t[0]),n=t[1];if(!Array.isArray(n))throw new Error("The second argument of palette must be an array");for(var o=n.length,i=new Uint8Array(o*4),a=0;a<o;a++){var u=n[a],d=void 0;if(typeof u=="string")d=lue(u);else{if(!Array.isArray(u))throw new Error("The second argument of palette must be an array of strings or colors");var h=u.length;if(h===4)d=u;else{if(h!==3)throw new Error("Expected palette color to have 3 or 4 values, got ".concat(h));d=[u[0],u[1],u[2],1]}}var v=a*4;i[v]=d[0],i[v+1]=d[1],i[v+2]=d[2],i[v+3]=d[3]*255}e.paletteTextures||(e.paletteTextures=[]);var b="".concat(Lue,"[").concat(e.paletteTextures.length,"]"),x=new Clt(b,i);return e.paletteTextures.push(x),"texture2D(".concat(b,", vec2((").concat(r," + 0.5) / ").concat(o,".0, 0.5))")}};var Aue="getBandValue";eo.band={getReturnType:function(e){return Mr.NUMBER},toGlsl:function(e,t){M0(t,1),Y7(t,3);var r=t[0];if(!(Aue in e.functions)){for(var n="",o=e.bandCount||1,i=0;i<o;i++){var a=Math.floor(i/4),u=i%4;u===o-1&&u===1&&(u=3);var d="".concat(jn.TILE_TEXTURE_ARRAY,"[").concat(a,"]");n+=`
          if (band == `.concat(i+1,`.0) {
            return texture2D(`).concat(d,", v_textureCoord + vec2(dx, dy))[").concat(u,`];
          }
        `)}e.functions[Aue]=`
        float getBandValue(float band, float xOffset, float yOffset) {
          float dx = xOffset / `.concat(jn.TEXTURE_PIXEL_WIDTH,`;
          float dy = yOffset / `).concat(jn.TEXTURE_PIXEL_HEIGHT,`;
          `).concat(n,`
        }
      `)}var h=kr(e,r),v=kr(e,t[1]||0),b=kr(e,t[2]||0);return"".concat(Aue,"(").concat(h,", ").concat(v,", ").concat(b,")")}};eo.time={getReturnType:function(e){return Mr.NUMBER},toGlsl:function(e,t){return Wi(t,0),"u_time"}};eo.zoom={getReturnType:function(e){return Mr.NUMBER},toGlsl:function(e,t){return Wi(t,0),"u_zoom"}};eo.resolution={getReturnType:function(e){return Mr.NUMBER},toGlsl:function(e,t){return Wi(t,0),"u_resolution"}};eo["*"]={getReturnType:function(e){return Mr.NUMBER},toGlsl:function(e,t){return Wi(t,2),Qa(t),"(".concat(kr(e,t[0])," * ").concat(kr(e,t[1]),")")}};eo["/"]={getReturnType:function(e){return Mr.NUMBER},toGlsl:function(e,t){return Wi(t,2),Qa(t),"(".concat(kr(e,t[0])," / ").concat(kr(e,t[1]),")")}};eo["+"]={getReturnType:function(e){return Mr.NUMBER},toGlsl:function(e,t){return Wi(t,2),Qa(t),"(".concat(kr(e,t[0])," + ").concat(kr(e,t[1]),")")}};eo["-"]={getReturnType:function(e){return Mr.NUMBER},toGlsl:function(e,t){return Wi(t,2),Qa(t),"(".concat(kr(e,t[0])," - ").concat(kr(e,t[1]),")")}};eo.clamp={getReturnType:function(e){return Mr.NUMBER},toGlsl:function(e,t){Wi(t,3),Qa(t);var r=kr(e,t[1]),n=kr(e,t[2]);return"clamp(".concat(kr(e,t[0]),", ").concat(r,", ").concat(n,")")}};eo["%"]={getReturnType:function(e){return Mr.NUMBER},toGlsl:function(e,t){return Wi(t,2),Qa(t),"mod(".concat(kr(e,t[0]),", ").concat(kr(e,t[1]),")")}};eo["^"]={getReturnType:function(e){return Mr.NUMBER},toGlsl:function(e,t){return Wi(t,2),Qa(t),"pow(".concat(kr(e,t[0]),", ").concat(kr(e,t[1]),")")}};eo.abs={getReturnType:function(e){return Mr.NUMBER},toGlsl:function(e,t){return Wi(t,1),Qa(t),"abs(".concat(kr(e,t[0]),")")}};eo.floor={getReturnType:function(e){return Mr.NUMBER},toGlsl:function(e,t){return Wi(t,1),Qa(t),"floor(".concat(kr(e,t[0]),")")}};eo.round={getReturnType:function(e){return Mr.NUMBER},toGlsl:function(e,t){return Wi(t,1),Qa(t),"floor(".concat(kr(e,t[0])," + 0.5)")}};eo.ceil={getReturnType:function(e){return Mr.NUMBER},toGlsl:function(e,t){return Wi(t,1),Qa(t),"ceil(".concat(kr(e,t[0]),")")}};eo.sin={getReturnType:function(e){return Mr.NUMBER},toGlsl:function(e,t){return Wi(t,1),Qa(t),"sin(".concat(kr(e,t[0]),")")}};eo.cos={getReturnType:function(e){return Mr.NUMBER},toGlsl:function(e,t){return Wi(t,1),Qa(t),"cos(".concat(kr(e,t[0]),")")}};eo.atan={getReturnType:function(e){return Mr.NUMBER},toGlsl:function(e,t){return M0(t,1),Y7(t,2),Qa(t),t.length===2?"atan(".concat(kr(e,t[0]),", ").concat(kr(e,t[1]),")"):"atan(".concat(kr(e,t[0]),")")}};eo[">"]={getReturnType:function(e){return Mr.BOOLEAN},toGlsl:function(e,t){return Wi(t,2),Qa(t),"(".concat(kr(e,t[0])," > ").concat(kr(e,t[1]),")")}};eo[">="]={getReturnType:function(e){return Mr.BOOLEAN},toGlsl:function(e,t){return Wi(t,2),Qa(t),"(".concat(kr(e,t[0])," >= ").concat(kr(e,t[1]),")")}};eo["<"]={getReturnType:function(e){return Mr.BOOLEAN},toGlsl:function(e,t){return Wi(t,2),Qa(t),"(".concat(kr(e,t[0])," < ").concat(kr(e,t[1]),")")}};eo["<="]={getReturnType:function(e){return Mr.BOOLEAN},toGlsl:function(e,t){return Wi(t,2),Qa(t),"(".concat(kr(e,t[0])," <= ").concat(kr(e,t[1]),")")}};function Dlt(e){return{getReturnType:function(t){return Mr.BOOLEAN},toGlsl:function(t,r){Wi(r,2);for(var n=Mr.ANY,o=0;o<r.length;o++)n&=um(r[o]);if(n===Mr.NONE)throw new Error("All arguments should be of compatible type, got ".concat(JSON.stringify(r)," instead"));return n&=~Mr.COLOR,"(".concat(kr(t,r[0],n)," ").concat(e," ").concat(kr(t,r[1],n),")")}}}eo["=="]=Dlt("==");eo["!="]=Dlt("!=");eo["!"]={getReturnType:function(e){return Mr.BOOLEAN},toGlsl:function(e,t){return Wi(t,1),Pue(t[0]),"(!".concat(kr(e,t[0]),")")}};function Llt(e){return{getReturnType:function(t){return Mr.BOOLEAN},toGlsl:function(t,r){M0(r,2);for(var n=0;n<r.length;n++)Pue(r[n]);var o="";return o=r.map(function(i){return kr(t,i)}).join(" ".concat(e," ")),o="(".concat(o,")"),o}}}eo.all=Llt("&&");eo.any=Llt("||");eo.between={getReturnType:function(e){return Mr.BOOLEAN},toGlsl:function(e,t){Wi(t,3),Qa(t);var r=kr(e,t[1]),n=kr(e,t[2]),o=kr(e,t[0]);return"(".concat(o," >= ").concat(r," && ").concat(o," <= ").concat(n,")")}};eo.array={getReturnType:function(e){return Mr.NUMBER_ARRAY},toGlsl:function(e,t){M0(t,2),Y7(t,4),Qa(t);var r=t.map(function(n){return kr(e,n,Mr.NUMBER)});return"vec".concat(t.length,"(").concat(r.join(", "),")")}};eo.color={getReturnType:function(e){return Mr.COLOR},toGlsl:function(e,t){M0(t,3),Y7(t,4),Qa(t);var r=t;t.length===3&&r.push(1);var n=t.map(function(o,i){return kr(e,o,Mr.NUMBER)+(i<3?" / 255.0":"")});return"vec".concat(t.length,"(").concat(n.join(", "),")")}};eo.interpolate={getReturnType:function(e){for(var t=Mr.COLOR|Mr.NUMBER,r=3;r<e.length;r+=2)t=t&um(e[r]);return t},toGlsl:function(e,t,r){Nlt(t),M0(t,6);var n=t[0],o;switch(n[0]){case"linear":o=1;break;case"exponential":o=n[1];break;default:o=null}if(!o)throw new Error("Invalid interpolation type for \"interpolate\" operator, received: ".concat(JSON.stringify(n)));var i=r!==void 0?r:Mr.ANY,a=eo.interpolate.getReturnType(t)&i;Nue(t,a);for(var u=kr(e,t[1]),d=Z7(o),h="",v=2;v<t.length-2;v+=2){var b=kr(e,t[v]),x=h||kr(e,t[v+1],a),M=kr(e,t[v+2]),O=kr(e,t[v+3],a);h="mix(".concat(x,", ").concat(O,", pow(clamp((").concat(u," - ").concat(b,") / (").concat(M," - ").concat(b,"), 0.0, 1.0), ").concat(d,"))")}return h}};eo.match={getReturnType:function(e){for(var t=Mr.ANY,r=2;r<e.length;r+=2)t=t&um(e[r]);return t=t&um(e[e.length-1]),t},toGlsl:function(e,t,r){Nlt(t),M0(t,4);var n=r!==void 0?r:Mr.ANY,o=eo.match.getReturnType(t)&n;Nue(t,o);for(var i=kr(e,t[0]),a=kr(e,t[t.length-1],o),u=null,d=t.length-3;d>=1;d-=2){var h=kr(e,t[d]),v=kr(e,t[d+1],o);u="(".concat(i," == ").concat(h," ? ").concat(v," : ").concat(u||a,")")}return u}};eo.case={getReturnType:function(e){for(var t=Mr.ANY,r=1;r<e.length;r+=2)t=t&um(e[r]);return t=t&um(e[e.length-1]),t},toGlsl:function(e,t,r){l6r(t),M0(t,3);var n=r!==void 0?r:Mr.ANY,o=eo.case.getReturnType(t)&n;Nue(t,o);for(var i=0;i<t.length-1;i+=2)Pue(t[i]);for(var a=kr(e,t[t.length-1],o),u=null,i=t.length-3;i>=0;i-=2){var d=kr(e,t[i]),h=kr(e,t[i+1],o);u="(".concat(d," ? ").concat(h," : ").concat(u||a,")")}return u}};var u6r=function(){var e=function(t,r){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,o){n.__proto__=o}||function(n,o){for(var i in o)Object.prototype.hasOwnProperty.call(o,i)&&(n[i]=o[i])},e(t,r)};return function(t,r){if(typeof r!="function"&&r!==null)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");e(t,r);function n(){this.constructor=t}t.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}();function klt(e,t){var r=`
    attribute vec2 `.concat(NP.TEXTURE_COORD,`;
    uniform mat4 `).concat(jn.TILE_TRANSFORM,`;
    uniform float `).concat(jn.TEXTURE_PIXEL_WIDTH,`;
    uniform float `).concat(jn.TEXTURE_PIXEL_HEIGHT,`;
    uniform float `).concat(jn.TEXTURE_RESOLUTION,`;
    uniform float `).concat(jn.TEXTURE_ORIGIN_X,`;
    uniform float `).concat(jn.TEXTURE_ORIGIN_Y,`;
    uniform float `).concat(jn.DEPTH,`;

    varying vec2 v_textureCoord;
    varying vec2 v_mapCoord;

    void main() {
      v_textureCoord = `).concat(NP.TEXTURE_COORD,`;
      v_mapCoord = vec2(
        `).concat(jn.TEXTURE_ORIGIN_X," + ").concat(jn.TEXTURE_RESOLUTION," * ").concat(jn.TEXTURE_PIXEL_WIDTH,` * v_textureCoord[0],
        `).concat(jn.TEXTURE_ORIGIN_Y," - ").concat(jn.TEXTURE_RESOLUTION," * ").concat(jn.TEXTURE_PIXEL_HEIGHT,` * v_textureCoord[1]
      );
      gl_Position = `).concat(jn.TILE_TRANSFORM," * vec4(").concat(NP.TEXTURE_COORD,", ").concat(jn.DEPTH,`, 1.0);
    }
  `),n={inFragmentShader:!0,variables:[],attributes:[],stringLiteralsMap:{},functions:{},bandCount:t},o=[];if(e.color!==void 0){var i=kr(n,e.color,Mr.COLOR);o.push("color = ".concat(i,";"))}if(e.contrast!==void 0){var a=kr(n,e.contrast,Mr.NUMBER);o.push("color.rgb = clamp((".concat(a," + 1.0) * color.rgb - (").concat(a," / 2.0), vec3(0.0, 0.0, 0.0), vec3(1.0, 1.0, 1.0));"))}if(e.exposure!==void 0){var u=kr(n,e.exposure,Mr.NUMBER);o.push("color.rgb = clamp((".concat(u," + 1.0) * color.rgb, vec3(0.0, 0.0, 0.0), vec3(1.0, 1.0, 1.0));"))}if(e.saturation!==void 0){var d=kr(n,e.saturation,Mr.NUMBER);o.push(`
      float saturation = `.concat(d,` + 1.0;
      float sr = (1.0 - saturation) * 0.2126;
      float sg = (1.0 - saturation) * 0.7152;
      float sb = (1.0 - saturation) * 0.0722;
      mat3 saturationMatrix = mat3(
        sr + saturation, sr, sr,
        sg, sg + saturation, sg,
        sb, sb, sb + saturation
      );
      color.rgb = clamp(saturationMatrix * color.rgb, vec3(0.0, 0.0, 0.0), vec3(1.0, 1.0, 1.0));
    `))}if(e.gamma!==void 0){var h=kr(n,e.gamma,Mr.NUMBER);o.push("color.rgb = pow(color.rgb, vec3(1.0 / ".concat(h,"));"))}if(e.brightness!==void 0){var v=kr(n,e.brightness,Mr.NUMBER);o.push("color.rgb = clamp(color.rgb + ".concat(v,", vec3(0.0, 0.0, 0.0), vec3(1.0, 1.0, 1.0));"))}var b={},x=n.variables.length;if(x>1&&!e.variables)throw new Error("Missing variables in style (expected ".concat(n.variables,")"));for(var M=function(B){var G=n.variables[B];if(!(G in e.variables))throw new Error("Missing '".concat(G,"' in style variables"));var re=Due(G);b[re]=function(){var Q=e.variables[G];return typeof Q=="string"&&(Q=Oue(n,Q)),Q!==void 0?Q:-9999999}},O=0;O<x;++O)M(O);var D=Object.keys(b).map(function(B){return"uniform float ".concat(B,";")}),k=Math.ceil(t/4);D.push("uniform sampler2D ".concat(jn.TILE_TEXTURE_ARRAY,"[").concat(k,"];")),n.paletteTextures&&D.push("uniform sampler2D ".concat(Lue,"[").concat(n.paletteTextures.length,"];"));var R=Object.keys(n.functions).map(function(B){return n.functions[B]}),q=`
    #ifdef GL_FRAGMENT_PRECISION_HIGH
    precision highp float;
    #else
    precision mediump float;
    #endif

    varying vec2 v_textureCoord;
    varying vec2 v_mapCoord;
    uniform vec4 `.concat(jn.RENDER_EXTENT,`;
    uniform float `).concat(jn.TRANSITION_ALPHA,`;
    uniform float `).concat(jn.TEXTURE_PIXEL_WIDTH,`;
    uniform float `).concat(jn.TEXTURE_PIXEL_HEIGHT,`;
    uniform float `).concat(jn.RESOLUTION,`;
    uniform float `).concat(jn.ZOOM,`;

    `).concat(D.join(`
`),`

    `).concat(R.join(`
`),`

    void main() {
      if (
        v_mapCoord[0] < `).concat(jn.RENDER_EXTENT,`[0] ||
        v_mapCoord[1] < `).concat(jn.RENDER_EXTENT,`[1] ||
        v_mapCoord[0] > `).concat(jn.RENDER_EXTENT,`[2] ||
        v_mapCoord[1] > `).concat(jn.RENDER_EXTENT,`[3]
      ) {
        discard;
      }

      vec4 color = texture2D(`).concat(jn.TILE_TEXTURE_ARRAY,`[0],  v_textureCoord);

      `).concat(o.join(`
`),`

      if (color.a == 0.0) {
        discard;
      }

      gl_FragColor = color;
      gl_FragColor.rgb *= gl_FragColor.a;
      gl_FragColor *= `).concat(jn.TRANSITION_ALPHA,`;
    }`);return{vertexShader:r,fragmentShader:q,uniforms:b,paletteTextures:n.paletteTextures}}var Rlt=function(e){u6r(t,e);function t(r){var n=this,o=r?Ei({},r):{},i=o.style||{};delete o.style;var a=o.cacheSize;return delete o.cacheSize,n=e.call(this,o)||this,n.sources_=o.sources,n.renderedSource_=null,n.renderedResolution_=NaN,n.style_=i,n.cacheSize_=a,n.styleVariables_=n.style_.variables||{},n.addChangeListener(Po.SOURCE,n.handleSourceUpdate_),n}return t.prototype.getSources=function(r,n){var o=this.getSource();return this.sources_?typeof this.sources_=="function"?this.sources_(r,n):this.sources_:o?[o]:[]},t.prototype.getRenderSource=function(){return this.renderedSource_||this.getSource()},t.prototype.getSourceState=function(){var r=this.getRenderSource();return r?r.getState():"undefined"},t.prototype.handleSourceUpdate_=function(){this.getSource()&&this.setStyle(this.style_)},t.prototype.getSourceBandCount_=function(){var r=Number.MAX_SAFE_INTEGER,n=this.getSources([-r,-r,r,r],r);return n&&n.length&&"bandCount"in n[0]?n[0].bandCount:4},t.prototype.createRenderer=function(){var r=klt(this.style_,this.getSourceBandCount_());return new Mlt(this,{vertexShader:r.vertexShader,fragmentShader:r.fragmentShader,uniforms:r.uniforms,cacheSize:this.cacheSize_,paletteTextures:r.paletteTextures})},t.prototype.renderSources=function(r,n){for(var o=this.getRenderer(),i,a=0,u=n.length;a<u;++a)this.renderedSource_=n[a],o.prepareFrame(r)&&(i=o.renderFrame(r));return i},t.prototype.render=function(r,n){var o=this;this.rendered=!0;for(var i=r.viewState,a=this.getSources(r.extent,i.resolution),u=!0,d=function(M,O){var D=a[M],k=D.getState();if(k=="loading"){var R=function(){D.getState()=="ready"&&(D.removeEventListener("change",R),o.changed())};D.addEventListener("change",R)}u=u&&k=="ready"},h=0,v=a.length;h<v;++h)d(h,v);var b=this.renderSources(r,a);if(this.getRenderer().renderComplete&&u)return this.renderedResolution_=i.resolution,b;if(this.renderedResolution_>.5*i.resolution){var x=this.getSources(r.extent,this.renderedResolution_).filter(function(M){return!a.includes(M)});if(x.length>0)return this.renderSources(r,x)}return b},t.prototype.setStyle=function(r){this.styleVariables_=r.variables||{},this.style_=r;var n=klt(this.style_,this.getSourceBandCount_()),o=this.getRenderer();o.reset({vertexShader:n.vertexShader,fragmentShader:n.fragmentShader,uniforms:n.uniforms,paletteTextures:n.paletteTextures}),this.changed()},t.prototype.updateStyleVariables=function(r){Ei(this.styleVariables_,r),this.changed()},t}(Jst);Rlt.prototype.dispose;var jlt=Rlt;var c6r=[0,0,0],C0=5,p6r=function(){function e(t){this.minZoom=t.minZoom!==void 0?t.minZoom:0,this.resolutions_=t.resolutions,Ln(rat(this.resolutions_,function(a,u){return u-a},!0),17);var r;if(!t.origins){for(var n=0,o=this.resolutions_.length-1;n<o;++n)if(!r)r=this.resolutions_[n]/this.resolutions_[n+1];else if(this.resolutions_[n]/this.resolutions_[n+1]!==r){r=void 0;break}}this.zoomFactor_=r,this.maxZoom=this.resolutions_.length-1,this.origin_=t.origin!==void 0?t.origin:null,this.origins_=null,t.origins!==void 0&&(this.origins_=t.origins,Ln(this.origins_.length==this.resolutions_.length,20));var i=t.extent;i!==void 0&&!this.origin_&&!this.origins_&&(this.origin_=r0(i)),Ln(!this.origin_&&this.origins_||this.origin_&&!this.origins_,18),this.tileSizes_=null,t.tileSizes!==void 0&&(this.tileSizes_=t.tileSizes,Ln(this.tileSizes_.length==this.resolutions_.length,19)),this.tileSize_=t.tileSize!==void 0?t.tileSize:this.tileSizes_?null:T0,Ln(!this.tileSize_&&this.tileSizes_||this.tileSize_&&!this.tileSizes_,22),this.extent_=i!==void 0?i:null,this.fullTileRanges_=null,this.tmpSize_=[0,0],this.tmpExtent_=[0,0,0,0],t.sizes!==void 0?this.fullTileRanges_=t.sizes.map(function(a,u){var d=new V7(Math.min(0,a[0]),Math.max(a[0]-1,-1),Math.min(0,a[1]),Math.max(a[1]-1,-1));if(i){var h=this.getTileRangeForExtentAndZ(i,u);d.minX=Math.max(h.minX,d.minX),d.maxX=Math.min(h.maxX,d.maxX),d.minY=Math.max(h.minY,d.minY),d.maxY=Math.min(h.maxY,d.maxY)}return d},this):i&&this.calculateTileRanges_(i)}return e.prototype.forEachTileCoord=function(t,r,n){for(var o=this.getTileRangeForExtentAndZ(t,r),i=o.minX,a=o.maxX;i<=a;++i)for(var u=o.minY,d=o.maxY;u<=d;++u)n([r,i,u])},e.prototype.forEachTileCoordParentTileRange=function(t,r,n,o){var i,a,u,d=null,h=t[0]-1;for(this.zoomFactor_===2?(a=t[1],u=t[2]):d=this.getTileCoordExtent(t,o);h>=this.minZoom;){if(this.zoomFactor_===2?(a=Math.floor(a/2),u=Math.floor(u/2),i=db(a,a,u,u,n)):i=this.getTileRangeForExtentAndZ(d,h,n),r(h,i))return!0;--h}return!1},e.prototype.getExtent=function(){return this.extent_},e.prototype.getMaxZoom=function(){return this.maxZoom},e.prototype.getMinZoom=function(){return this.minZoom},e.prototype.getOrigin=function(t){return this.origin_?this.origin_:this.origins_[t]},e.prototype.getResolution=function(t){return this.resolutions_[t]},e.prototype.getResolutions=function(){return this.resolutions_},e.prototype.getTileCoordChildTileRange=function(t,r,n){if(t[0]<this.maxZoom){if(this.zoomFactor_===2){var o=t[1]*2,i=t[2]*2;return db(o,o+1,i,i+1,r)}var a=this.getTileCoordExtent(t,n||this.tmpExtent_);return this.getTileRangeForExtentAndZ(a,t[0]+1,r)}return null},e.prototype.getTileRangeForTileCoordAndZ=function(t,r,n){if(r>this.maxZoom||r<this.minZoom)return null;var o=t[0],i=t[1],a=t[2];if(r===o)return db(i,a,i,a,n);if(this.zoomFactor_){var u=Math.pow(this.zoomFactor_,r-o),d=Math.floor(i*u),h=Math.floor(a*u);if(r<o)return db(d,d,h,h,n);var v=Math.floor(u*(i+1))-1,b=Math.floor(u*(a+1))-1;return db(d,v,h,b,n)}var x=this.getTileCoordExtent(t,this.tmpExtent_);return this.getTileRangeForExtentAndZ(x,r,n)},e.prototype.getTileRangeExtent=function(t,r,n){var o=this.getOrigin(t),i=this.getResolution(t),a=sl(this.getTileSize(t),this.tmpSize_),u=o[0]+r.minX*a[0]*i,d=o[0]+(r.maxX+1)*a[0]*i,h=o[1]+r.minY*a[1]*i,v=o[1]+(r.maxY+1)*a[1]*i;return Ag(u,h,d,v,n)},e.prototype.getTileRangeForExtentAndZ=function(t,r,n){var o=c6r;this.getTileCoordForXYAndZ_(t[0],t[3],r,!1,o);var i=o[1],a=o[2];return this.getTileCoordForXYAndZ_(t[2],t[1],r,!0,o),db(i,o[1],a,o[2],n)},e.prototype.getTileCoordCenter=function(t){var r=this.getOrigin(t[0]),n=this.getResolution(t[0]),o=sl(this.getTileSize(t[0]),this.tmpSize_);return[r[0]+(t[1]+.5)*o[0]*n,r[1]-(t[2]+.5)*o[1]*n]},e.prototype.getTileCoordExtent=function(t,r){var n=this.getOrigin(t[0]),o=this.getResolution(t[0]),i=sl(this.getTileSize(t[0]),this.tmpSize_),a=n[0]+t[1]*i[0]*o,u=n[1]-(t[2]+1)*i[1]*o,d=a+i[0]*o,h=u+i[1]*o;return Ag(a,u,d,h,r)},e.prototype.getTileCoordForCoordAndResolution=function(t,r,n){return this.getTileCoordForXYAndResolution_(t[0],t[1],r,!1,n)},e.prototype.getTileCoordForXYAndResolution_=function(t,r,n,o,i){var a=this.getZForResolution(n),u=n/this.getResolution(a),d=this.getOrigin(a),h=sl(this.getTileSize(a),this.tmpSize_),v=u*(t-d[0])/n/h[0],b=u*(d[1]-r)/n/h[1];return o?(v=p4(v,C0)-1,b=p4(b,C0)-1):(v=c4(v,C0),b=c4(b,C0)),k2(a,v,b,i)},e.prototype.getTileCoordForXYAndZ_=function(t,r,n,o,i){var a=this.getOrigin(n),u=this.getResolution(n),d=sl(this.getTileSize(n),this.tmpSize_),h=(t-a[0])/u/d[0],v=(a[1]-r)/u/d[1];return o?(h=p4(h,C0)-1,v=p4(v,C0)-1):(h=c4(h,C0),v=c4(v,C0)),k2(n,h,v,i)},e.prototype.getTileCoordForCoordAndZ=function(t,r,n){return this.getTileCoordForXYAndZ_(t[0],t[1],r,!1,n)},e.prototype.getTileCoordResolution=function(t){return this.resolutions_[t[0]]},e.prototype.getTileSize=function(t){return this.tileSize_?this.tileSize_:this.tileSizes_[t]},e.prototype.getFullTileRange=function(t){return this.fullTileRanges_?this.fullTileRanges_[t]:this.extent_?this.getTileRangeForExtentAndZ(this.extent_,t):null},e.prototype.getZForResolution=function(t,r){var n=_2(this.resolutions_,t,r||0);return Ai(n,this.minZoom,this.maxZoom)},e.prototype.tileCoordIntersectsViewport=function(t,r){return eue(r,0,r.length,2,this.getTileCoordExtent(t))},e.prototype.calculateTileRanges_=function(t){for(var r=this.resolutions_.length,n=new Array(r),o=this.minZoom;o<r;++o)n[o]=this.getTileRangeForExtentAndZ(t,o);this.fullTileRanges_=n},e}(),K7=p6r;var f6r=function(){var e=function(t,r){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,o){n.__proto__=o}||function(n,o){for(var i in o)Object.prototype.hasOwnProperty.call(o,i)&&(n[i]=o[i])},e(t,r)};return function(t,r){if(typeof r!="function"&&r!==null)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");e(t,r);function n(){this.constructor=t}t.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),d6r=function(e){f6r(t,e);function t(){return e!==null&&e.apply(this,arguments)||this}return t.prototype.expireCache=function(r){for(;this.canExpireCache();){var n=this.peekLast();if(n.getKey()in r)break;this.pop().release()}},t.prototype.pruneExceptNewestZ=function(){if(this.getCount()!==0){var r=this.peekFirstKey(),n=Elt(r),o=n[0];this.forEach(function(i){i.tileCoord[0]!==o&&(this.remove(I0(i.tileCoord)),i.release())}.bind(this))}},t}(B7),X7=d6r;var Q7={TILELOADSTART:"tileloadstart",TILELOADEND:"tileloadend",TILELOADERROR:"tileloaderror"};function J7(e){var t=e.getDefaultTileGrid();return t||(t=g6r(e),e.setDefaultTileGrid(t)),t}function qlt(e,t,r){var n=t[0],o=e.getTileCoordCenter(t),i=zlt(r);if(Cg(i,o))return t;var a=ta(i),u=Math.ceil((i[0]-o[0])/a);return o[0]+=a*u,e.getTileCoordForCoordAndZ(o,n)}function h6r(e,t,r,n){var o=n!==void 0?n:"top-left",i=m6r(e,t,r);return new K7({extent:e,origin:MJe(e,o),resolutions:i,tileSize:r})}function m6r(e,t,r,n){for(var o=t!==void 0?t:Ust,i=ql(e),a=ta(e),u=sl(r!==void 0?r:T0),d=n>0?n:Math.max(a/u[0],i/u[1]),h=o+1,v=new Array(h),b=0;b<h;++b)v[b]=d/Math.pow(2,b);return v}function g6r(e,t,r,n){var o=zlt(e);return h6r(o,t,r,n)}function zlt(e){e=Nc(e);var t=e.getExtent();if(!t){var r=180*Oc[Pc.DEGREES]/e.getMetersPerUnit();t=Ag(-r,-r,r,r)}return t}var Flt=function(){var e=function(t,r){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,o){n.__proto__=o}||function(n,o){for(var i in o)Object.prototype.hasOwnProperty.call(o,i)&&(n[i]=o[i])},e(t,r)};return function(t,r){if(typeof r!="function"&&r!==null)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");e(t,r);function n(){this.constructor=t}t.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),v6r=function(e){Flt(t,e);function t(r){var n=e.call(this,{attributions:r.attributions,attributionsCollapsible:r.attributionsCollapsible,projection:r.projection,state:r.state,wrapX:r.wrapX,interpolate:r.interpolate})||this;n.on,n.once,n.un,n.opaque_=r.opaque!==void 0?r.opaque:!1,n.tilePixelRatio_=r.tilePixelRatio!==void 0?r.tilePixelRatio:1,n.tileGrid=r.tileGrid!==void 0?r.tileGrid:null;var o=[256,256];return n.tileGrid&&sl(n.tileGrid.getTileSize(n.tileGrid.getMinZoom()),o),n.tileCache=new X7(r.cacheSize||0),n.tmpSize=[0,0],n.key_=r.key||"",n.tileOptions={transition:r.transition,interpolate:r.interpolate},n.zDirection=r.zDirection?r.zDirection:0,n}return t.prototype.canExpireCache=function(){return this.tileCache.canExpireCache()},t.prototype.expireCache=function(r,n){var o=this.getTileCacheForProjection(r);o&&o.expireCache(n)},t.prototype.forEachLoadedTile=function(r,n,o,i){var a=this.getTileCacheForProjection(r);if(!a)return!1;for(var u=!0,d,h,v,b=o.minX;b<=o.maxX;++b)for(var x=o.minY;x<=o.maxY;++x)h=mb(n,b,x),v=!1,a.containsKey(h)&&(d=a.get(h),v=d.getState()===Pr.LOADED,v&&(v=i(d)!==!1)),v||(u=!1);return u},t.prototype.getGutterForProjection=function(r){return 0},t.prototype.getKey=function(){return this.key_},t.prototype.setKey=function(r){this.key_!==r&&(this.key_=r,this.changed())},t.prototype.getOpaque=function(r){return this.opaque_},t.prototype.getResolutions=function(){return this.tileGrid?this.tileGrid.getResolutions():null},t.prototype.getTile=function(r,n,o,i,a){return Oo()},t.prototype.getTileGrid=function(){return this.tileGrid},t.prototype.getTileGridForProjection=function(r){return this.tileGrid?this.tileGrid:J7(r)},t.prototype.getTileCacheForProjection=function(r){var n=this.getProjection();return Ln(n===null||n0(n,r),68),this.tileCache},t.prototype.getTilePixelRatio=function(r){return this.tilePixelRatio_},t.prototype.getTilePixelSize=function(r,n,o){var i=this.getTileGridForProjection(o),a=this.getTilePixelRatio(n),u=sl(i.getTileSize(r),this.tmpSize);return a==1?u:bst(u,a,this.tmpSize)},t.prototype.getTileCoordForTileUrlFunction=function(r,n){var o=n!==void 0?n:this.getProjection(),i=this.getTileGridForProjection(o);return this.getWrapX()&&o.isGlobal()&&(r=qlt(i,r,o)),Tlt(r,i)?r:null},t.prototype.clear=function(){this.tileCache.clear()},t.prototype.refresh=function(){this.clear(),e.prototype.refresh.call(this)},t.prototype.updateCacheSize=function(r,n){var o=this.getTileCacheForProjection(n);r>o.highWaterMark&&(o.highWaterMark=r)},t.prototype.useTile=function(r,n,o,i){},t}(Dst),Ult=function(e){Flt(t,e);function t(r,n){var o=e.call(this,r)||this;return o.tile=n,o}return t}(du);var Blt=v6r;function y6r(e,t){var r=/\{z\}/g,n=/\{x\}/g,o=/\{y\}/g,i=/\{-y\}/g;return function(a,u,d){if(a)return e.replace(r,a[0].toString()).replace(n,a[1].toString()).replace(o,a[2].toString()).replace(i,function(){var h=a[0],v=t.getFullTileRange(h);Ln(v,55);var b=v.getHeight()-a[2]-1;return b.toString()})}}function Vlt(e,t){for(var r=e.length,n=new Array(r),o=0;o<r;++o)n[o]=y6r(e[o],t);return kue(n)}function kue(e){return e.length===1?e[0]:function(t,r,n){if(t){var o=Slt(t),i=Sd(o,e.length);return e[i](t,r,n)}else return}}function e9(e){var t=[],r=/\{([a-z])-([a-z])\}/.exec(e);if(r){var n=r[1].charCodeAt(0),o=r[2].charCodeAt(0),i=void 0;for(i=n;i<=o;++i)t.push(e.replace(r[0],String.fromCharCode(i)));return t}if(r=/\{(\d+)-(\d+)\}/.exec(e),r){for(var a=parseInt(r[2],10),u=parseInt(r[1],10);u<=a;u++)t.push(e.replace(r[0],u.toString()));return t}return t.push(e),t}var _6r=function(){var e=function(t,r){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,o){n.__proto__=o}||function(n,o){for(var i in o)Object.prototype.hasOwnProperty.call(o,i)&&(n[i]=o[i])},e(t,r)};return function(t,r){if(typeof r!="function"&&r!==null)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");e(t,r);function n(){this.constructor=t}t.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),b6r=function(e){_6r(t,e);function t(r){var n=e.call(this,{attributions:r.attributions,cacheSize:r.cacheSize,opaque:r.opaque,projection:r.projection,state:r.state,tileGrid:r.tileGrid,tilePixelRatio:r.tilePixelRatio,wrapX:r.wrapX,transition:r.transition,interpolate:r.interpolate,key:r.key,attributionsCollapsible:r.attributionsCollapsible,zDirection:r.zDirection})||this;return n.generateTileUrlFunction_=n.tileUrlFunction===t.prototype.tileUrlFunction,n.tileLoadFunction=r.tileLoadFunction,r.tileUrlFunction&&(n.tileUrlFunction=r.tileUrlFunction),n.urls=null,r.urls?n.setUrls(r.urls):r.url&&n.setUrl(r.url),n.tileLoadingKeys_={},n}return t.prototype.getTileLoadFunction=function(){return this.tileLoadFunction},t.prototype.getTileUrlFunction=function(){return Object.getPrototypeOf(this).tileUrlFunction===this.tileUrlFunction?this.tileUrlFunction.bind(this):this.tileUrlFunction},t.prototype.getUrls=function(){return this.urls},t.prototype.handleTileChange=function(r){var n=r.target,o=Ka(n),i=n.getState(),a;i==Pr.LOADING?(this.tileLoadingKeys_[o]=!0,a=Q7.TILELOADSTART):o in this.tileLoadingKeys_&&(delete this.tileLoadingKeys_[o],a=i==Pr.ERROR?Q7.TILELOADERROR:i==Pr.LOADED?Q7.TILELOADEND:void 0),a!=null&&this.dispatchEvent(new Ult(a,n))},t.prototype.setTileLoadFunction=function(r){this.tileCache.clear(),this.tileLoadFunction=r,this.changed()},t.prototype.setTileUrlFunction=function(r,n){this.tileUrlFunction=r,this.tileCache.pruneExceptNewestZ(),typeof n!="undefined"?this.setKey(n):this.changed()},t.prototype.setUrl=function(r){var n=e9(r);this.urls=n,this.setUrls(n)},t.prototype.setUrls=function(r){this.urls=r;var n=r.join(`
`);this.generateTileUrlFunction_?this.setTileUrlFunction(Vlt(r,this.tileGrid),n):this.setKey(n)},t.prototype.tileUrlFunction=function(r,n,o){},t.prototype.useTile=function(r,n,o){var i=mb(r,n,o);this.tileCache.containsKey(i)&&this.tileCache.get(i)},t}(Blt),Glt=b6r;var x6r=function(){var e=function(t,r){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,o){n.__proto__=o}||function(n,o){for(var i in o)Object.prototype.hasOwnProperty.call(o,i)&&(n[i]=o[i])},e(t,r)};return function(t,r){if(typeof r!="function"&&r!==null)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");e(t,r);function n(){this.constructor=t}t.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),w6r=function(e){x6r(t,e);function t(r){var n=this,o=r.imageSmoothing!==void 0?r.imageSmoothing:!0;return r.interpolate!==void 0&&(o=r.interpolate),n=e.call(this,{attributions:r.attributions,cacheSize:r.cacheSize,opaque:r.opaque,projection:r.projection,state:r.state,tileGrid:r.tileGrid,tileLoadFunction:r.tileLoadFunction?r.tileLoadFunction:E6r,tilePixelRatio:r.tilePixelRatio,tileUrlFunction:r.tileUrlFunction,url:r.url,urls:r.urls,wrapX:r.wrapX,transition:r.transition,interpolate:o,key:r.key,attributionsCollapsible:r.attributionsCollapsible,zDirection:r.zDirection})||this,n.crossOrigin=r.crossOrigin!==void 0?r.crossOrigin:null,n.tileClass=r.tileClass!==void 0?r.tileClass:hb,n.tileCacheForProjection={},n.tileGridForProjection={},n.reprojectionErrorThreshold_=r.reprojectionErrorThreshold,n.renderReprojectionEdges_=!1,n}return t.prototype.canExpireCache=function(){if(!lm)return e.prototype.canExpireCache.call(this);if(this.tileCache.canExpireCache())return!0;for(var r in this.tileCacheForProjection)if(this.tileCacheForProjection[r].canExpireCache())return!0;return!1},t.prototype.expireCache=function(r,n){if(!lm){e.prototype.expireCache.call(this,r,n);return}var o=this.getTileCacheForProjection(r);this.tileCache.expireCache(this.tileCache==o?n:{});for(var i in this.tileCacheForProjection){var a=this.tileCacheForProjection[i];a.expireCache(a==o?n:{})}},t.prototype.getGutterForProjection=function(r){return lm&&this.getProjection()&&r&&!n0(this.getProjection(),r)?0:this.getGutter()},t.prototype.getGutter=function(){return 0},t.prototype.getKey=function(){var r=e.prototype.getKey.call(this);return this.getInterpolate()||(r+=":disable-interpolation"),r},t.prototype.getOpaque=function(r){return lm&&this.getProjection()&&r&&!n0(this.getProjection(),r)?!1:e.prototype.getOpaque.call(this,r)},t.prototype.getTileGridForProjection=function(r){if(!lm)return e.prototype.getTileGridForProjection.call(this,r);var n=this.getProjection();if(this.tileGrid&&(!n||n0(n,r)))return this.tileGrid;var o=Ka(r);return o in this.tileGridForProjection||(this.tileGridForProjection[o]=J7(r)),this.tileGridForProjection[o]},t.prototype.getTileCacheForProjection=function(r){if(!lm)return e.prototype.getTileCacheForProjection.call(this,r);var n=this.getProjection();if(!n||n0(n,r))return this.tileCache;var o=Ka(r);return o in this.tileCacheForProjection||(this.tileCacheForProjection[o]=new X7(this.tileCache.highWaterMark)),this.tileCacheForProjection[o]},t.prototype.createTile_=function(r,n,o,i,a,u){var d=[r,n,o],h=this.getTileCoordForTileUrlFunction(d,a),v=h?this.tileUrlFunction(h,i,a):void 0,b=new this.tileClass(d,v!==void 0?Pr.IDLE:Pr.EMPTY,v!==void 0?v:"",this.crossOrigin,this.tileLoadFunction,this.tileOptions);return b.key=u,b.addEventListener(Or.CHANGE,this.handleTileChange.bind(this)),b},t.prototype.getTile=function(r,n,o,i,a){var u=this.getProjection();if(!lm||!u||!a||n0(u,a))return this.getTileInternal(r,n,o,i,u||a);var d=this.getTileCacheForProjection(a),h=[r,n,o],v=void 0,b=I0(h);d.containsKey(b)&&(v=d.get(b));var x=this.getKey();if(v&&v.key==x)return v;var M=this.getTileGridForProjection(u),O=this.getTileGridForProjection(a),D=this.getTileCoordForTileUrlFunction(h,a),k=new G7(u,M,a,O,h,D,this.getTilePixelRatio(i),this.getGutter(),function(R,q,B,G){return this.getTileInternal(R,q,B,G,u)}.bind(this),this.reprojectionErrorThreshold_,this.renderReprojectionEdges_,this.getInterpolate());return k.key=x,v?(k.interimTile=v,k.refreshInterimChain(),d.replace(b,k)):d.set(b,k),k},t.prototype.getTileInternal=function(r,n,o,i,a){var u=null,d=mb(r,n,o),h=this.getKey();if(!this.tileCache.containsKey(d))u=this.createTile_(r,n,o,i,a,h),this.tileCache.set(d,u);else if(u=this.tileCache.get(d),u.key!=h){var v=u;u=this.createTile_(r,n,o,i,a,h),v.getState()==Pr.IDLE?u.interimTile=v.interimTile:u.interimTile=v,u.refreshInterimChain(),this.tileCache.replace(d,u)}return u},t.prototype.setRenderReprojectionEdges=function(r){if(!(!lm||this.renderReprojectionEdges_==r)){this.renderReprojectionEdges_=r;for(var n in this.tileCacheForProjection)this.tileCacheForProjection[n].clear();this.changed()}},t.prototype.setTileGridForProjection=function(r,n){if(lm){var o=Nc(r);if(o){var i=Ka(o);i in this.tileGridForProjection||(this.tileGridForProjection[i]=n)}}},t}(Glt);function E6r(e,t){e.getImage().src=t}var Hlt=w6r;var Wlt=function(){var e=function(t,r){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,o){n.__proto__=o}||function(n,o){for(var i in o)Object.prototype.hasOwnProperty.call(o,i)&&(n[i]=o[i])},e(t,r)};return function(t,r){if(typeof r!="function"&&r!==null)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");e(t,r);function n(){this.constructor=t}t.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),Rue={DEFAULT:"default",TRUNCATED:"truncated"},S6r=function(e){Wlt(t,e);function t(r,n,o,i,a,u,d){var h=e.call(this,n,o,i,a,u,d)||this;return h.zoomifyImage_=null,h.tileSize_=r,h}return t.prototype.getImage=function(){if(this.zoomifyImage_)return this.zoomifyImage_;var r=e.prototype.getImage.call(this);if(this.state==Pr.LOADED){var n=this.tileSize_;if(r.width==n[0]&&r.height==n[1])return this.zoomifyImage_=r,r;var o=$g(n[0],n[1]);return o.drawImage(r,0,0),this.zoomifyImage_=o.canvas,o.canvas}else return r},t}(hb);var T6r=function(e){Wlt(t,e);function t(r){var n=this,o=r,i=o.imageSmoothing!==void 0?o.imageSmoothing:!0;o.interpolate!==void 0&&(i=o.interpolate);var a=o.size,u=o.tierSizeCalculation!==void 0?o.tierSizeCalculation:Rue.DEFAULT,d=o.tilePixelRatio||1,h=a[0],v=a[1],b=[],x=o.tileSize||T0,M=x*d;switch(u){case Rue.DEFAULT:for(;h>M||v>M;)b.push([Math.ceil(h/M),Math.ceil(v/M)]),M+=M;break;case Rue.TRUNCATED:for(var O=h,D=v;O>M||D>M;)b.push([Math.ceil(O/M),Math.ceil(D/M)]),O>>=1,D>>=1;break;default:Ln(!1,53);break}b.push([1,1]),b.reverse();for(var k=[d],R=[0],q=1,B=b.length;q<B;q++)k.push(d<<q),R.push(b[q-1][0]*b[q-1][1]+R[q-1]);k.reverse();var G=new K7({tileSize:x,extent:o.extent||[0,-v,h,0],resolutions:k}),re=o.url;re&&re.indexOf("{TileGroup}")==-1&&re.indexOf("{tileIndex}")==-1&&(re+="{TileGroup}/{z}-{x}-{y}.jpg");var Q=e9(re),ie=x*d;function me(Re){return function(Je,tt,Et){if(Je){var Xe=Je[0],Pt=Je[1],Lt=Je[2],Gt=Pt+Lt*b[Xe][0],nt=(Gt+R[Xe])/ie|0,ct={z:Xe,x:Pt,y:Lt,tileIndex:Gt,TileGroup:"TileGroup"+nt};return Re.replace(/\{(\w+?)\}/g,function(_t,We){return ct[We]})}else return}}var ve=kue(Q.map(me)),ye=S6r.bind(null,sl(x*d));n=e.call(this,{attributions:o.attributions,cacheSize:o.cacheSize,crossOrigin:o.crossOrigin,interpolate:i,projection:o.projection,tilePixelRatio:d,reprojectionErrorThreshold:o.reprojectionErrorThreshold,tileClass:ye,tileGrid:G,tileUrlFunction:ve,transition:o.transition})||this,n.zDirection=o.zDirection;var we=G.getTileCoordForCoordAndResolution(Td(G.getExtent()),k[k.length-1]),Se=ve(we,1,null),ge=new Image;return ge.addEventListener("error",function(){ie=x,this.changed()}.bind(n)),ge.src=Se,n}return t}(Hlt),$lt=T6r;var Fc=Z(Pe(),1),Zlt=Z(va(),1),Yg=Z(xt(),1);var DP={brightness:0,contrast:0,saturation:0},t9=e=>{let{max:t=1,min:r=0,onChange:n=()=>console.warn("onChange is not implemented."),step:o=.01,type:i="",value:a=.5,tooltip:u}=e,d=h=>{n(i,h)};return Fc.default.createElement("div",{className:"filter-slider",title:u},Fc.default.createElement("span",{className:Dt("slider-icon",i),title:u}),Fc.default.createElement("div",null,Fc.default.createElement(QF,{title:u,ariaLabelForHandle:u,max:t,min:r,onChange:d,step:o,value:a})),Fc.default.createElement("span",{className:"slider-tooltip",title:u},a))};t9.propTypes={max:Yg.default.number,min:Yg.default.number,onChange:Yg.default.func,step:Yg.default.number,tooltip:Yg.default.string,type:Yg.default.string,value:Yg.default.number};var Ylt=e=>{let{layer:t}=e,[r,n]=(0,Fc.useState)(Te({},DP)),o=(a,u)=>{let d=Object.assign({},r,{[a]:u});n(d),t.updateStyleVariables(d)},i=()=>{n(Te({},DP)),t.updateStyleVariables(Te({},DP))};return Fc.default.createElement("div",null,Fc.default.createElement(t9,{max:1,min:-1,onChange:o,step:.01,type:"contrast",value:r.contrast,tooltip:fe("control-imagemanipulation-contrast")}),Fc.default.createElement(t9,{max:1,min:-1,onChange:o,step:.01,type:"saturation",value:r.saturation,tooltip:fe("control-imagemanipulation-saturation")}),Fc.default.createElement(t9,{max:1,min:-1,onChange:o,step:.01,type:"brightness",value:r.brightness,tooltip:fe("control-imagemanipulation-brightness")}),Fc.default.createElement("button",{className:"btn-reset",title:fe("control-imagemanipulation-reset"),onClick:i},fe("control-imagemanipulation-reset")))};Ylt.propTypes={layer:Yg.default.object};var jue=class extends gp{constructor(t){let r="ol-unselectable ol-control image-manipulation",n=document.createElement("div");n.className=r;let o=document.createElement("button");o.title=fe("control-imagemanipulation-open"),o.innerHTML="I",o.type="button",n.appendChild(o);let i=document.createElement("div");i.className="content-container",i.style.display="none",n.appendChild(i);let a=()=>{let u=i.style.display==="block";n.className=u?r:`${r} active`,i.style.display=u?"none":"block"};Zlt.default.render(Fc.default.createElement(Ylt,{layer:t.layer}),i),o.addEventListener("click",a,!1),o.addEventListener("touchstart",a,!1),super({element:n,target:t.target})}},Klt=jue;function I6r(e){return gt(this,null,function*(){try{let t=yield Xlt.default.get(e);if(t.status===200){let n=new DOMParser().parseFromString(t.data,"text/xml");return{width:parseInt(n.firstChild.attributes.WIDTH.value,0),height:parseInt(n.firstChild.attributes.HEIGHT.value,0),url:e.substring(0,e.lastIndexOf("/")+1)}}else throw new Error("Could not fetch ImageProperties.xml")}catch(t){console.error("Something went wrong while trying to fetch the ImageProperties.xml."),console.error(t)}})}var Qlt=e=>{let{className:t="",onLoad:r,urlImageProperties:n,withImageManipulation:o=!1}=e,i=(0,R2.useRef)(null);return(0,R2.useEffect)(()=>{gt(null,null,function*(){let d=yield I6r(n),h=new $lt({url:d.url,size:[d.width,d.height],crossOrigin:"anonymous",zDirection:-1}),v=h.getTileGrid().getExtent(),b=new jlt({style:{brightness:["var","brightness"],contrast:["var","contrast"],saturation:["var","saturation"],variables:Te({},DP)},source:h}),x=new sm({resolutions:b.getSource().getTileGrid().getResolutions(),extent:v,constrainOnlyCenter:!0}),M=new Qst({controls:[new ast({tipLabel:fe("control-fullscreen-title")}),new U7({zoomInTipLabel:fe("control-zoom-in"),zoomOutTipLabel:fe("control-zoom-in")})],interactions:z7().extend([new R7]),layers:[b],target:i.current,view:x});x.fit(v,{padding:[50,50,50,50]});let O=M.getSize();M.addControl(new Kst({tipLabel:fe("control-zoomtoextent-title"),extent:x.calculateExtent([O[0]+50,O[1]+50])})),o&&M.addControl(new Klt({layer:b})),r&&r({layer:b,map:M,source:h,zoomifyProps:d})})},[n]),R2.default.createElement("div",{className:Dt("vk-mapview-zoomify",t),ref:i})};Qlt.propTypes={className:LP.default.string,onLoad:LP.default.func,urlImageProperties:LP.default.string.isRequired,withImageManipulation:LP.default.bool};var Jlt=Qlt;var eut=Jlt;var tut=e=>{let{isOpen:t,onClose:r,map_id:n}=e,[o,i]=(0,so.useState)(null),a=()=>{i(null),r()};if((0,so.useEffect)(()=>{n!==void 0&&gt(null,null,function*(){let O=yield yS(n);i(O)})},[n,i]),o===null)return so.default.createElement("div",{className:"vkf-view-original-map container"});let u=o.online_resources,d=u.find(M=>M.type==="Permalink"),h=u.find(M=>M.type==="WMS"),v=u.find(M=>M.type==="WCS"),b=u.find(M=>M.type==="download"),x=o.type==="mosaic";return so.default.createElement(wf,{key:n,modalClassName:Dt("vkf-modal-original-map",o.type),onClose:a,renderContent:()=>so.default.createElement("div",{className:"vkf-view-original-map"},so.default.createElement("div",{className:"title"},so.default.createElement("h1",null,o.title," ",so.default.createElement("small",null,"/ ",o.title_long)),so.default.createElement("div",{className:"header-functions"},!x&&so.default.createElement("a",{href:o.permalink,rel:"noreferrer",className:"btn btn-default",target:"_blank"},fe("originalview-link-slub-label")),b!==void 0&&so.default.createElement("a",{href:b.url,rel:"noreferrer",className:"btn btn-default btn-download",target:"_blank",title:fe("originalview-link-download-label")},fe("originalview-link-download-label")))),o.thumb_url!==void 0&&x&&so.default.createElement("div",null,so.default.createElement("img",{className:"thumbnail",height:200,width:200,src:o.thumb_url})),so.default.createElement("div",{className:"content-metadata"},so.default.createElement("dl",null,so.default.createElement("dt",null,fe("originalview-label-desc")),so.default.createElement("dd",null,o.description),so.default.createElement("dt",null,fe("originalview-label-identifier")),so.default.createElement("dd",null,n),so.default.createElement("dt",null,fe("originalview-label-scale")),so.default.createElement("dd",null,"1:",o.map_scale),d!==void 0&&so.default.createElement(so.default.Fragment,null,so.default.createElement("dt",null,"Permalink"),so.default.createElement("dd",null,so.default.createElement("a",{href:d.url,rel:"noreferrer",target:"_blank"},d.url))),(h!==void 0||v!==void 0)&&so.default.createElement(so.default.Fragment,null,so.default.createElement("dt",null,fe("originalview-label-services")),h!==void 0&&so.default.createElement("dd",null,so.default.createElement("a",{href:h.url,rel:"noreferrer",target:"_blank"},"WMS")),v!==void 0&&so.default.createElement("dd",null,so.default.createElement("a",{href:v.url,rel:"noreferrer",target:"_blank"},"WCS"))))),!x&&so.default.createElement("div",{className:"content-map"},so.default.createElement(eut,{urlImageProperties:o.zoomify_url,withImageManipulation:!0}))),isOpen:t,title:fe(x?"originalview-title-mosaic":"originalview-title")})};tut.propTypes={isOpen:r9.default.bool,onClose:r9.default.func,map_id:r9.default.string};var M6r=()=>{let[e,t]=Mo(aq);return so.default.createElement(tut,{isOpen:e!==void 0,onClose:()=>t(void 0),map_id:e})},rut=M6r;var yb=Z(Pe(),1),d9=Z(xt(),1);var $i=Z(Pe(),1),A0=Z(xt(),1);var j2=e=>{let t={};for(let r in e.properties)pne.includes(r)||(t[r]=e.properties[r]);return t},C6r=(e,t)=>Object.keys(e).filter(n=>{let o=pne.includes(n),i=!Me(t[n])||t[n]==="";return!o&&i}),nut=({oldProperties:e,newProperties:t})=>{let r={};for(let[a,u]of Object.entries(t)){let d=u==="",h=a==="";!Me(a)||h||d||(r[a]=u)}let n=C6r(e,t);return{addOrUpdateProperties:Object.entries(r).map(([a,u])=>({key:a,value:u})),removeProperties:n}},kd=e=>{e(hs,xi.NONE),e(Ic,$s.STANDARD),e(Go,null),e(vg,null),e(Xs,null),e(Pl,null)},kP=e=>{if(!Me(e))return;let t=structuredClone(e);for(let r of t.features)delete r.id;return t},n9=65535,out=(e,t)=>{if(!Me(n9))throw new Error("Cannot generate feature id. MAX_VALUE_UINT_16 is not specified");if(!Me(e)||!Me(t))throw new Error("Cannot generate feature id. Version or index is missing.");if(!Number.isInteger(e)||!Number.isInteger(t))throw new Error("Cannot generate feature id. Version or index is not of type number");if(e>n9||t>n9)throw new Error(`Cannot generate feature id. Version or index is > ${n9}`);let r=new ArrayBuffer(4),n=new DataView(r);return n.setUint16(0,e),n.setUint16(2,t),n.getUint32(0)},iut=e=>{let t=structuredClone(e);for(let[r,n]of t.features.entries())n.id=out(r+1,0);return t},aut=(e,t,r)=>{let n=structuredClone(t),o=new Set;for(let a of t.features)e.features.find(d=>d.id===a.id)||o.add(a.id);if(o.size===0)return n;let i=n.features.map((a,u)=>o.has(a.id)?Mt(Te({},a),{id:out(u+1,r)}):a);return Mt(Te({},n),{features:i})},que=(e,t)=>{if(e.response){if(e.response.status===401){t("common-errors-http-401");return}if(e.response.status===403){t("common-errors-http-403");return}if(e.response.status===409){t("common-errors-http-409");return}if(e.response.status===422){t("geojson-draw-error-invalid-input");return}}t("common-errors-unexpected"),console.error(e)},gb=(e,t)=>{if(e.response){if(e.response.status===401){t("common-errors-http-401");return}if(e.response.status===403){t("common-errors-http-403");return}if(e.response.status===422){t("geojson-external-vector-map-error-invalid-input");return}}t("common-errors-unexpected"),console.error(e)},o9=(e,t)=>{if(!Me(e)||!Me(t)){console.error("Cannot update layer's metadata. Either of the two are not defined.");return}for(let[n,o]of Object.entries(t))e.updateMetadata(n,o);let r=e.getGeoJson();e.updateMetadata(qe.bounds,CGe(r))};var gu=Z(Pe(),1),i9=Z(xt(),1),sut=Z(Sae(),1);var Uc={INITIAL:0,IMAGE:1,ERROR:2,PLACEHOLDER:3,LOADING:4},zue=({imageUrl:e,showPlaceholder:t,imageAsPreview:r})=>{let[n,o]=(0,gu.useState)(Uc.INITIAL),i=(0,gu.useRef)(e);e!==i.current&&(o(Uc.INITIAL),i.current=e),n===Uc.INITIAL&&(e.length===0&&t?o(Uc.PLACEHOLDER):o(Uc.LOADING));let a=n===Uc.LOADING||n===Uc.IMAGE,u=(0,gu.useMemo)(()=>n===Uc.PLACEHOLDER?"placeholder":n===Uc.ERROR?"error":"image",[n]);return gu.default.createElement("div",{className:"image-with-fallback-root"},gu.default.createElement("div",{className:`image-container ${u}`},a&&gu.default.createElement(gu.default.Fragment,null,n===Uc.LOADING&&gu.default.createElement(sut.default.default,{height:180}),gu.default.createElement("img",{className:`${r?"preview":""} ${n===Uc.LOADING?"loading":""}`,src:e,onLoad:()=>o(Uc.IMAGE),onError:()=>o(Uc.ERROR)})),!a&&gu.default.createElement("div",{className:`image-fallback-icon ${u}`},gu.default.createElement(Fr,{name:"image-placeholder"})),n===Uc.ERROR&&gu.default.createElement("p",{className:"image-fallback-text"},fe("geojson-image-fallback-p"))))};zue.defaultPropTypes={imageAsPreview:!1,showPlaceholder:!1,imageUrl:""};zue.propTypes={imageUrl:i9.default.string,showPlaceholder:i9.default.bool,imageAsPreview:i9.default.bool};var lut=zue;var cm=lut;var RP=Z(Pe(),1);var vu=Z(Pe(),1),a9=Z(xt(),1);var uut=({title:e,onClick:t,value:r})=>{let[n,o]=(0,vu.useState)(!1),i=(0,vu.useRef)(),a=(0,vu.useRef)(),u=(0,vu.useCallback)(()=>{(t!==void 0&&r===""?t():new Promise(h=>h())).then(h=>{clearTimeout(a.current),navigator.clipboard.writeText(h!==void 0?h:r),o(!0)})},[t,r]);return(0,vu.useEffect)(()=>(n&&(a.current=setTimeout(()=>{o(!1)},1e3)),()=>{clearTimeout(a.current)}),[n]),vu.default.createElement(vu.default.Fragment,null,vu.default.createElement("button",{className:"copy-button",onClick:u,ref:i,title:e!=null?e:fe("control-permalink-exporter-copy-title")},vu.default.createElement(bg,{glyph:"copy"})),vu.default.createElement(Cie,{placement:"right",target:i.current,show:n},vu.default.createElement(qie,{id:"copy-state-indicator"},fe("control-permalink-exporter-copy"))))};uut.propTypes={title:a9.default.string,onClick:a9.default.func,value:a9.default.string};var cut=uut;var q2=cut;var s9=e=>{let{center:t,bearing:r,pitch:n,zoom:o}=e;return Object.assign({},t===void 0?null:{c:t},r===void 0?null:{be:r},n===void 0?null:{p:n},o===void 0?null:{z:o})},l9=e=>vr.getBaseMaps().filter(n=>n.id===e).length>0?{b:e}:{},u9=e=>({map_id:e.filter(t=>t.getType()===co.HISTORIC_MAP||t.getMetadata(qe.vectorMapId)).map(t=>t.getId())}),c9=e=>({v:e?mq["3D"]:mq["2D"]}),put=({featureId:e,sourceId:t})=>({fid:e,foid:t});var fut=Z(dq(),1);var A6r=()=>ar(({snapshot:e})=>()=>gt(null,null,function*(){let t=yield e.getPromise(tr),r=yield e.getPromise(Zs);if(!Me(t)||!Me(r))return;let n=yield e.getPromise(Dn),o=yield e.getPromise(sf),i=c9(t.hasTerrain()),a=u9(n),u=l9(o),d=s9(gS(t,!0)),h=put(r),v=(0,fut.stringify)(Object.assign({},d,i,a,h,u),{arrayFormat:"comma"});return Promise.resolve(vS(v))}),[]),dut=A6r;var O6r=()=>{let e=yt(Dn),t=yt(Zs),r=(0,RP.useMemo)(()=>{if(Me(t)&&Me(e)){let{sourceId:o}=t,i=e.find(a=>a.getId()===o);return Me(i==null?void 0:i.getMetadata(qe.vectorMapId))}return!1},[e,t]),n=dut();return r?RP.default.createElement("div",{className:"feature-permalink-button-root"},RP.default.createElement(q2,{title:fe("feature-permalink-exporter-copy-title"),onClick:n,value:""})):null},hut=O6r;var p9=hut;var P6r=[...aS],N6r=e=>Me(e)&&e!==""&&typeof e!="object",mut=({feature:e,onClose:t})=>{let r=(0,$i.useMemo)(()=>j2(e),[e]),{defaultTitle:n,defaultDescription:o}=(0,$i.useMemo)(()=>({defaultTitle:fe("geojson-featureview-no-title"),defaultDescription:fe("geojson-featureview-no-description")}),[]),{imageLink:i,title:a,description:u,time:d}=(0,$i.useMemo)(()=>{var M,O;let b=r[po.time],x=Me(b)?p0(b):null;return{imageLink:r[po.imgLink],title:(M=r[po.title])!=null?M:n,description:(O=r[po.description])!=null?O:o,time:x}},[r]),h=(0,$i.useMemo)(()=>Me(i)&&i.length>0,[i]),v=(0,$i.useMemo)(()=>Object.entries(r).filter(([b,x])=>!P6r.includes(b)&&N6r(x)),[r]);return $i.default.createElement("div",{className:"geojson-feature-panel-root vkf-feature-panel"},$i.default.createElement(df,{extraButton:$i.default.createElement(p9,null),title:fe("geojson-featureview-header-text"),onCloseClick:t}),$i.default.createElement("div",{className:"property-container scrollable"},h&&$i.default.createElement(cm,{imageUrl:i}),$i.default.createElement("div",{className:"predefined-properties-container"},$i.default.createElement("div",{className:"title-section "},$i.default.createElement("span",{className:"geojson-feature-property-label"},fe("geojson-featureview-title")),$i.default.createElement("span",{className:"title"},a)),$i.default.createElement("div",{className:"description-section"},$i.default.createElement("p",{className:"geojson-feature-property-label"},fe("geojson-featureview-description")),$i.default.createElement("p",{className:"geojson-feature-property-text"},u)),d!==null&&$i.default.createElement("div",{className:"time-section"},$i.default.createElement("p",{className:"geojson-feature-property-label"},fe("geojson-featureview-time")),$i.default.createElement("p",{className:"geojson-feature-property-text"},d))),v.length>0&&$i.default.createElement("div",{className:"custom-properties-container"},v.map(([b,x])=>$i.default.createElement("div",{key:b},$i.default.createElement("p",{className:"geojson-feature-property-label"},b),$i.default.createElement("p",{className:"geojson-feature-property-text",key:b},`${x}`))))))};mut.propTypes={feature:A0.default.shape({id:A0.default.oneOfType([A0.default.number,A0.default.string]).isRequired,geometry:A0.default.object.isRequired,properties:A0.default.object.isRequired}).isRequired,onClose:A0.default.func};var gut=mut;var xo=Z(Pe(),1),O0=Z(xt(),1);var vb=Z(Pe(),1),Fue=Z(xt(),1),vut=({label:e,value:t=0})=>vb.default.createElement("div",{className:"certainty-item"},vb.default.createElement("span",{className:"certainty-label"},e,": "),vb.default.createElement("span",{className:"value"},`${t*100}%`),vb.default.createElement("div",{className:"bar"},vb.default.createElement("div",{className:"track"}),vb.default.createElement("div",{className:"value",style:{width:`${t*100}%`}})));vut.propTypes={label:Fue.default.string.isRequired,value:Fue.default.number.isRequired};var f9=vut;var yut=({feature:e,onClose:t})=>{let r=(0,xo.useMemo)(()=>j2(e),[e]),{defaultTitle:n,defaultDescription:o}=(0,xo.useMemo)(()=>({defaultTitle:fe("geojson-featureview-no-title"),defaultDescription:fe("geojson-featureview-no-description")}),[]),i=(0,xo.useCallback)(O=>p0(O),[]),{imageLink:a,title:u,description:d,time:h,permalink:v,certainties:b,affiliation:x}=(0,xo.useMemo)(()=>{var k,R,q,B;let O=r[Il.permalink],D=dd(O)?O:"";return{imageLink:r[po.imgLink],title:(k=r[po.title])!=null?k:n,description:(R=r[po.description])!=null?R:o,time:i(r[po.time]),tags:(q=r[Il.tags])!=null?q:[],permalink:D,affiliation:(B=r[Il.parentLabel])!=null?B:"",certainties:{spatial:N_(r[Il.spatialCertainty]),content:N_(r[Il.contentCertainty]),temporal:N_(r[Il.temporalCertainty])}}},[r]),M=(0,xo.useMemo)(()=>Me(a)&&a.length>0,[a]);return xo.default.createElement("div",{className:"geojson-feature-panel-root idohist-feature-panel"},xo.default.createElement(df,{extraButton:xo.default.createElement(p9,null),title:fe("geojson-featureview-header-text"),onCloseClick:t}),xo.default.createElement("div",{className:"property-container scrollable"},M&&xo.default.createElement(cm,{imageUrl:a}),xo.default.createElement("div",{className:"predefined-properties-container"},xo.default.createElement("div",{className:"title-section "},xo.default.createElement("span",{className:"geojson-feature-property-label"},fe("geojson-featureview-title")),xo.default.createElement("span",{className:"title"},u)),x!==""&&xo.default.createElement("div",{className:"affiliation-section"},xo.default.createElement("p",{className:"geojson-feature-property-label"},fe("idohist-affiliation-label")),xo.default.createElement("p",{className:"affiliation geojson-feature-property-text"},x)),xo.default.createElement("div",{className:"time-section"},xo.default.createElement("p",{className:"geojson-feature-property-label"},fe("idohist-date-label")),xo.default.createElement("p",{className:"time geojson-feature-property-text"},h)),xo.default.createElement("div",{className:"description-section"},xo.default.createElement("p",{className:"geojson-feature-property-label"},fe("geojson-featureview-description")),xo.default.createElement("p",{className:"description geojson-feature-property-text"},d)),v!==""&&xo.default.createElement("div",{className:"permalink-section"},xo.default.createElement("p",{className:"geojson-feature-property-label"},fe("idohist-permalink-label")),xo.default.createElement("a",{href:v,target:"_blank",rel:"noreferrer"},xo.default.createElement("p",{className:"geojson-feature-property-text"},v))),xo.default.createElement("div",{className:"certainties-section"},xo.default.createElement("p",{className:"geojson-feature-property-label"},fe("idohist-certainty-label")),xo.default.createElement("div",{className:"certainty-items"},xo.default.createElement(f9,{label:fe("idohist-certainty-label-spatial"),value:b.spatial}),xo.default.createElement(f9,{label:fe("idohist-certainty-label-temporal"),value:b.temporal}),xo.default.createElement(f9,{label:fe("idohist-certainty-label-content"),value:b.content}))))))};yut.propTypes={feature:O0.default.shape({id:O0.default.oneOfType([O0.default.number,O0.default.string]).isRequired,geometry:O0.default.object.isRequired,properties:O0.default.object.isRequired}).isRequired,onClose:O0.default.func};var _ut=yut;var but=({contentType:e,geoJsonFeature:t,resetFeature:r})=>{let n=(0,yb.useCallback)(()=>{r()},[r]);return e===Ru.IDOHIST?yb.default.createElement(_ut,{feature:t,onClose:n}):yb.default.createElement(yb.default.Fragment,null,yb.default.createElement(gut,{feature:t,onClose:n}))};but.propTypes={geoJsonFeature:d9.default.object.isRequired,resetFeature:d9.default.func.isRequired,contentType:d9.default.string.isRequired};var Uue=but;var jP=Z(xt(),1),Kg=Z(Pe(),1);var Bue=({className:e,Component:t,props:r,onExit:n})=>{let o=(0,Kg.useRef)(null),[i,a]=(0,Kg.useState)(null),u=Me(r);u&&o.current!==r&&(a(Kg.default.createElement(t,Te({},r))),o.current=r);let d=(0,Kg.useCallback)(()=>{u||(o.current=null,a(null),n&&n())},[u,n]);return Kg.default.createElement("div",{onTransitionEnd:d,className:Dt(e,r!==null&&"in")},i)};Bue.propTypes={className:jP.default.string.isRequired,Component:jP.default.func.isRequired,props:jP.default.object,onExit:jP.default.func};Bue.defaultPropTypes={props:null};var xut=Bue;var P0=xut;var Rd=Z(Pe(),1);var D6r=e=>{var t;return Me((t=e.layer.metadata)==null?void 0:t[sp.id])},h9=(e,t)=>`${e}-${t}`,L6r=(e,t)=>{let{x:r,y:n}=e;return[[r-t,n-t],[r+t,n+t]]},k6r=e=>{let{type:t,id:r,geometry:n}=e,o={};for(let i in e.properties){let a=e.properties[i],u="";try{if(u=JSON.parse(a),typeof u!="object")throw new Error}catch(d){u=a}o[i]=u}return{id:r,geometry:n,properties:o,type:t}},R6r=2;function j6r(){let e=zr(Os),t=yt(tr),r=yt(Dn),[n,o]=Mo(Zs),[i,a]=(0,Rd.useState)(null),[u,d]=(0,Rd.useState)(null),h=(0,Rd.useRef)(null),v=(0,Rd.useCallback)(()=>{h.current=null,a(null),d(null),o(null)},[]),b=(0,Rd.useCallback)(x=>{var k;let{point:M}=x,O=L6r(M,R6r),D=t.queryRenderedFeatures(O).filter(D6r).at(0);if(Me(D)){let{id:R,source:q}=D,{layer:{metadata:B}}=D;if(!Me(R)){e({id:"no-feature-id",type:"warning",text:fe("error-no-feature-id")});return}if(h9(R,q)===h.current)return;o({featureId:R,sourceId:q}),h.current=h9(R,q);let G=(k=B[sp.contentType])!=null?k:Ru.VKF;d(G),a(k6r(D))}else v()},[]);return(0,Rd.useEffect)(()=>{if(Me(t))return t.on("click",b),()=>{t.off("click",b)}},[]),(0,Rd.useEffect)(()=>{var x;if(!Me(n)){Me(h.current)&&v();return}if(Me(r)&&r.length>0){let{featureId:M,sourceId:O}=n;if(h9(M,O)===h.current)return;let D=r.find(q=>q.getId()===O);if(!Me(D)){console.error(`No layer found with id '${O}'.`),v();return}let k=D.getFeature(M),R=(x=D.getMetadata(qe.externalContentType))!=null?x:Ru.VKF;if(!Me(k)){console.error(`No feature found with id '${M}'.`),v();return}h.current=h9(M,O),d(R),a(k)}},[r,n]),i===null?null:{contentType:u,geoJsonFeature:i,resetFeature:v}}var wut=j6r;var _a=Z(Pe(),1),_b=Z(xt(),1);var Eut=Z(Pe(),1);var Sut=()=>{let{zoomToExtent:e}=g2(),t=ar(({snapshot:n,set:o})=>(i,a)=>gt(null,null,function*(){let u=yield n.getPromise(tr);if(Me(u)){try{let d={[qe.title]:i},h=kP(a),v=Vo.fromPersistence({metadata:d,geoJson:h});v.addLayerToMap(u),e(v),o(Dn,b=>[...b,v]),o(Ys,v.getId())}catch(d){console.log(d),o(Os,{id:"mapWrapper",type:"danger",text:fe("mapwrapper-geojson-parse-error")})}o(gWe,!1)}}),[e]),r=ar(({set:n})=>(o,i)=>gt(null,null,function*(){let a=kP(i);a=Vo.toApplicationState(a),n(Xs,a),n(Pl,{[qe.title]:o}),n(Go,{type:$a.REMOTE,id:null,layerRole:"owner"}),n(Ic,$s.DRAW)}),[]);return(0,Eut.useCallback)((n,o,i)=>i?r(n,o):t(n,o),[t,r])};var m9=Z(Pe(),1);var Vue=Z(xt(),1),Tut=({disabled:e,id:t})=>m9.default.createElement("span",{className:"toggle-switch"},m9.default.createElement("input",{className:"toggle__input",disabled:e,name:t,type:"checkbox",id:t}),m9.default.createElement("div",{className:"toggle__fill"}));Tut.propTypes={disabled:Vue.default.bool,id:Vue.default.string.isRequired};var Iut=Tut;var Mut="persistGeoJson",Cut=({onSubmit:e,initialName:t,onClose:r})=>_a.default.createElement(_a.default.Fragment,null,_a.default.createElement("form",{id:"add-geojson-form",onSubmit:e},_a.default.createElement(w8,null,_a.default.createElement("p",{className:"adddialog-description"},fe("geojson-adddialog-description")),_a.default.createElement(Kq,{className:"geojson-label",htmlFor:"title"},fe("geojson-adddialog-layer-title-label")),_a.default.createElement(Voe,{autoFocus:!0,defaultValue:t!=null?t:"Unknown",name:"title",type:"text",className:"geojson-input"})),_a.default.createElement(w8,null,_a.default.createElement(Kq,{className:"switch-label",htmlFor:Mut},_a.default.createElement(Iut,{disabled:!Qz(),id:Mut}),_a.default.createElement("p",{className:"geojson-label persistent-button-label"},fe("geojson-adddialog-persistent-button-label"))),_a.default.createElement("div",null,_a.default.createElement("p",{className:"persistent-button-description"},fe("geojson-adddialog-persistent-description"))))),_a.default.createElement("div",{className:"add-geojson-buttons"},_a.default.createElement(dn,{type:"save",form:"add-geojson-form",className:"btn btn-primary confirm-button"},fe("geojson-adddialog-confirm")),_a.default.createElement(dn,{className:"cancel-button",type:"discard",onClick:r},fe("geojson-adddialog-cancel"))));Cut.propTypes={onSubmit:_b.default.func.isRequired,initialName:_b.default.string,onClose:_b.default.func.isRequired};var Aut=({initialName:e,onClose:t,onSubmit:r})=>_a.default.createElement(wf,{isOpen:!0,onClose:t,title:fe("geojson-adddialog-title"),renderContent:()=>_a.default.createElement(Cut,{initialName:e,onSubmit:r,onClose:t}),modalClassName:"vkf-dialog-add-geojson"});Aut.propTypes={initialName:_b.default.string,onClose:_b.default.func.isRequired,onSubmit:_b.default.func.isRequired};var q6r=()=>{let[e,t]=Mo(uq),r=Sut(),n=(0,_a.useCallback)(()=>{t(null)},[]),o=(0,_a.useCallback)(i=>{i.preventDefault();let a=new FormData(i.currentTarget),u=a.get("title"),d=a.get("persistGeoJson")==="on";r(u,e.content,d).then(()=>{t(null)})},[r,e,t]);return e?_a.default.createElement(Aut,{initialName:e.name,onClose:n,onSubmit:o}):null},Out=q6r;var ys=Z(Pe(),1),Lut=Z(xt(),1);var Put=e=>new Promise((t,r)=>{let n=new FileReader;n.onloadend=function(){try{t({content:JSON.parse(this.result),modified:e.lastModified,name:e.name.split(".")[0]})}catch(o){console.log(o),r()}},n.readAsText(e)});var N0=Z(Pe(),1);var Gue=Z(xt(),1),Nut=({refFileInput:e,onSelectFile:t})=>{let r=(0,N0.useCallback)(o=>{t(o.target.files[0])},[]),n=(0,N0.useCallback)(o=>{o.stopPropagation()},[]);return N0.default.createElement(N0.default.Fragment,null,N0.default.createElement("label",{className:"visually-hidden",htmlFor:"geojson-upload-file"},"GeoJSON Upload"),N0.default.createElement("input",{onClick:n,id:"geojson-upload-file",accept:"application/json, application/geo+json, .geojson",className:"hidden-file-input",type:"file",ref:e,onChange:r}))};Nut.propTypes={refFileInput:Gue.default.object.isRequired,onSelectFile:Gue.default.func.isRequired};var Dut=Nut;var kut=Z(va(),1),{FILE:z6r}=Oy,F6r={WRONG_FILETYPE:"wrong-filetype"},Rut=()=>{let[e,t]=(0,ys.useState)(void 0),[r,n]=Mo(lq),o=zr(uq),i=zr(Os),a=(0,ys.useRef)(),u=(0,ys.useCallback)(O=>{console.error(O),i({id:"mapWrapper",type:"danger",text:fe("mapwrapper-geojson-parse-error")})},[]),d=(0,ys.useCallback)(()=>{n(!1)},[]),h=(0,ys.useCallback)(O=>{O.preventDefault(),O.stopPropagation(),a.current!==void 0&&a.current!==null&&(a.current.click(),document.activeElement.blur())},[]),v=(0,ys.useCallback)(O=>{Put(O).then(D=>{o(D),n(!1)}).catch(D=>u(D))},[u]),b=(0,ys.useMemo)(()=>({accept:z6r,canDrop:()=>r,collect(O){return{canDrop:O.canDrop(),isOver:O.isOver()}},drop:O=>{v(O.files[0])},hover:(O,D)=>{let k=D.getItem();k.items.length>0&&k.items[0].type!=="application/json"&&k.items[0].type!=="application/geo+json"&&t(F6r.WRONG_FILETYPE)}}),[v,r]),[{isOver:x},M]=m6(b);return(0,ys.useEffect)(()=>{x||t(void 0)},[x]),r?(0,kut.createPortal)(ys.default.createElement("div",{className:Dt("vkf-dropzone",r&&"animation-show"),ref:M},ys.default.createElement("div",{className:"dropzone-content-container",onClick:d},ys.default.createElement("button",{onClick:h,className:"dropzone-content"},ys.default.createElement(su,{name:"dropzone-upload"}),ys.default.createElement("p",{className:Dt("dropzone-info",e!==void 0&&"error")},e===void 0?fe("dropzone-drop"):fe(`dropzone-${e}`))),ys.default.createElement(Dut,{refFileInput:a,onSelectFile:v}))),document.body):null};Rut.propTypes={children:Lut.default.node};var jut=Rut;var Hue=()=>{let e=wut(),{selectedLayer:t}=yt(nu);return vp.default.createElement(vp.default.Fragment,null,vp.default.createElement("div",{className:"vkf-horizontal-layout"},vp.default.createElement("div",{className:"spatialsearch-container",id:"spatialsearch-container"},vp.default.createElement(Qit,null)),vp.default.createElement(P0,{className:"geojson-feature-panel-container",Component:Uue,props:e}),vp.default.createElement("div",{className:"layermanagement-container",id:"layermanagement-container"},vp.default.createElement(s7,null)),vp.default.createElement(P0,{className:"vkf-geojson-layer-view-root",Component:sot,props:t?{selectedLayer:t}:null})),vp.default.createElement(rut,null),vp.default.createElement(Out,null),vp.default.createElement(jut,null))};var kf=Z(Pe(),1);var nce=Z(Pe(),1);var U6r=function(e,t){let r={drag:[],click:[],mousemove:[],mousedown:[],mouseup:[],mouseout:[],keydown:[],keyup:[],touchstart:[],touchmove:[],touchend:[],tap:[]},n={on(i,a,u){if(r[i]===void 0)throw new Error(`Invalid event type: ${i}`);r[i].push({selector:a,fn:u})},render(i){t.store.featureChanged(i)}},o=function(i,a){let u=r[i],d=u.length;for(;d--;){let h=u[d];if(h.selector(a)){h.fn.call(n,a)||t.store.render(),t.ui.updateMapClasses();break}}};return e.start.call(n),{render:e.render,stop(){e.stop&&e.stop()},trash(){e.trash&&(e.trash(),t.store.render())},combineFeatures(){e.combineFeatures&&e.combineFeatures()},uncombineFeatures(){e.uncombineFeatures&&e.uncombineFeatures()},drag(i){o("drag",i)},click(i){o("click",i)},mousemove(i){o("mousemove",i)},mousedown(i){o("mousedown",i)},mouseup(i){o("mouseup",i)},mouseout(i){o("mouseout",i)},keydown(i){o("keydown",i)},keyup(i){o("keyup",i)},touchstart(i){o("touchstart",i)},touchmove(i){o("touchmove",i)},touchend(i){o("touchend",i)},tap(i){o("tap",i)}}},qP=U6r;var Gut=Z(But(),1);var Si={};mI(Si,{LAT_MAX:()=>V6r,LAT_MIN:()=>B6r,LAT_RENDERED_MAX:()=>y9,LAT_RENDERED_MIN:()=>v9,LNG_MAX:()=>H6r,LNG_MIN:()=>G6r,activeStates:()=>Pi,classes:()=>Ul,cursors:()=>Jo,events:()=>La,geojsonTypes:()=>_r,interactions:()=>Yue,meta:()=>na,modes:()=>qn,sources:()=>Yu,types:()=>Ns,updateActions:()=>D0});var Ul={CANVAS:"mapboxgl-canvas",CONTROL_BASE:"mapboxgl-ctrl",CONTROL_PREFIX:"mapboxgl-ctrl-",CONTROL_BUTTON:"mapbox-gl-draw_ctrl-draw-btn",CONTROL_BUTTON_LINE:"mapbox-gl-draw_line",CONTROL_BUTTON_POLYGON:"mapbox-gl-draw_polygon",CONTROL_BUTTON_POINT:"mapbox-gl-draw_point",CONTROL_BUTTON_TRASH:"mapbox-gl-draw_trash",CONTROL_BUTTON_COMBINE_FEATURES:"mapbox-gl-draw_combine",CONTROL_BUTTON_UNCOMBINE_FEATURES:"mapbox-gl-draw_uncombine",CONTROL_GROUP:"mapboxgl-ctrl-group",ATTRIBUTION:"mapboxgl-ctrl-attrib",ACTIVE_BUTTON:"active",BOX_SELECT:"mapbox-gl-draw_boxselect"},Yu={HOT:"mapbox-gl-draw-hot",COLD:"mapbox-gl-draw-cold"},Jo={ADD:"add",MOVE:"move",DRAG:"drag",POINTER:"pointer",NONE:"none"},Ns={POLYGON:"polygon",LINE:"line_string",POINT:"point"},_r={FEATURE:"Feature",POLYGON:"Polygon",LINE_STRING:"LineString",POINT:"Point",FEATURE_COLLECTION:"FeatureCollection",MULTI_PREFIX:"Multi",MULTI_POINT:"MultiPoint",MULTI_LINE_STRING:"MultiLineString",MULTI_POLYGON:"MultiPolygon"},qn={DRAW_LINE_STRING:"draw_line_string",DRAW_POLYGON:"draw_polygon",DRAW_POINT:"draw_point",SIMPLE_SELECT:"simple_select",DIRECT_SELECT:"direct_select"},La={CREATE:"draw.create",DELETE:"draw.delete",UPDATE:"draw.update",SELECTION_CHANGE:"draw.selectionchange",MODE_CHANGE:"draw.modechange",ACTIONABLE:"draw.actionable",RENDER:"draw.render",COMBINE_FEATURES:"draw.combine",UNCOMBINE_FEATURES:"draw.uncombine"},D0={MOVE:"move",CHANGE_PROPERTIES:"change_properties",CHANGE_COORDINATES:"change_coordinates"},na={FEATURE:"feature",MIDPOINT:"midpoint",VERTEX:"vertex"},Pi={ACTIVE:"true",INACTIVE:"false"},Yue=["scrollZoom","boxZoom","dragRotate","dragPan","keyboard","doubleClickZoom","touchZoomRotate"],B6r=-90,v9=-85,V6r=90,y9=85,G6r=-270,H6r=270;var Vut={Point:0,LineString:1,MultiLineString:1,Polygon:2};function W6r(e,t){let r=Vut[e.geometry.type]-Vut[t.geometry.type];return r===0&&e.geometry.type===_r.POLYGON?e.area-t.area:r}function $6r(e){return e.map(t=>(t.geometry.type===_r.POLYGON&&(t.area=Gut.default.geometry({type:_r.FEATURE,property:{},geometry:t.geometry})),t)).sort(W6r).map(t=>(delete t.area,t))}var _9=$6r;function Z6r(e,t=0){return[[e.point.x-t,e.point.y-t],[e.point.x+t,e.point.y+t]]}var b9=Z6r;function z2(e){if(this._items={},this._nums={},this._length=e?e.length:0,!!e)for(let t=0,r=e.length;t<r;t++)this.add(e[t]),e[t]!==void 0&&(typeof e[t]=="string"?this._items[e[t]]=t:this._nums[e[t]]=t)}z2.prototype.add=function(e){return this.has(e)?this:(this._length++,typeof e=="string"?this._items[e]=this._length:this._nums[e]=this._length,this)};z2.prototype.delete=function(e){return this.has(e)===!1?this:(this._length--,delete this._items[e],delete this._nums[e],this)};z2.prototype.has=function(e){return typeof e!="string"&&typeof e!="number"?!1:this._items[e]!==void 0||this._nums[e]!==void 0};z2.prototype.values=function(){let e=[];return Object.keys(this._items).forEach(t=>{e.push({k:t,v:this._items[t]})}),Object.keys(this._nums).forEach(t=>{e.push({k:JSON.parse(t),v:this._nums[t]})}),e.sort((t,r)=>t.v-r.v).map(t=>t.k)};z2.prototype.clear=function(){return this._length=0,this._items={},this._nums={},this};var Cf=z2;var Y6r=[na.FEATURE,na.MIDPOINT,na.VERTEX],jd={click:K6r,touch:X6r};function K6r(e,t,r){return Hut(e,t,r,r.options.clickBuffer)}function X6r(e,t,r){return Hut(e,t,r,r.options.touchBuffer)}function Hut(e,t,r,n){if(r.map===null)return[];let o=e?b9(e,n):t,i={};r.options.styles&&(i.layers=r.options.styles.map(h=>h.id).filter(h=>r.map.getLayer(h)!=null));let a=r.map.queryRenderedFeatures(o,i).filter(h=>Y6r.indexOf(h.properties.meta)!==-1),u=new Cf,d=[];return a.forEach(h=>{let v=h.properties.id;u.has(v)||(u.add(v),d.push(h))}),_9(d)}function bb(e,t){let r=jd.click(e,null,t),n={mouse:Jo.NONE};return r[0]&&(n.mouse=r[0].properties.active===Pi.ACTIVE?Jo.MOVE:Jo.POINTER,n.feature=r[0].properties.meta),t.events.currentModeName().indexOf("draw")!==-1&&(n.mouse=Jo.ADD),t.ui.queueMapClasses(n),t.ui.updateMapClasses(),r[0]}function F2(e,t){let r=e.x-t.x,n=e.y-t.y;return Math.sqrt(r*r+n*n)}var Q6r=4,J6r=12,ejr=500;function U2(e,t,r={}){let n=r.fineTolerance!=null?r.fineTolerance:Q6r,o=r.grossTolerance!=null?r.grossTolerance:J6r,i=r.interval!=null?r.interval:ejr;e.point=e.point||t.point,e.time=e.time||t.time;let a=F2(e.point,t.point);return a<n||a<o&&t.time-e.time<i}var tjr=25,rjr=250;function B2(e,t,r={}){let n=r.tolerance!=null?r.tolerance:tjr,o=r.interval!=null?r.interval:rjr;return e.point=e.point||t.point,e.time=e.time||t.time,F2(e.point,t.point)<n&&t.time-e.time<o}var Wut=(e,t=21)=>(r=t)=>{let n="",o=r|0;for(;o--;)n+=e[Math.random()*e.length|0];return n};var njr=Wut("0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz",32);function V2(){return njr()}var L0=function(e,t){this.ctx=e,this.properties=t.properties||{},this.coordinates=t.geometry.coordinates,this.id=t.id||V2(),this.type=t.geometry.type};L0.prototype.changed=function(){this.ctx.store.featureChanged(this.id)};L0.prototype.incomingCoords=function(e){this.setCoordinates(e)};L0.prototype.setCoordinates=function(e){this.coordinates=e,this.changed()};L0.prototype.getCoordinates=function(){return JSON.parse(JSON.stringify(this.coordinates))};L0.prototype.setProperty=function(e,t){this.properties[e]=t};L0.prototype.toGeoJSON=function(){return JSON.parse(JSON.stringify({id:this.id,type:_r.FEATURE,properties:this.properties,geometry:{coordinates:this.getCoordinates(),type:this.type}}))};L0.prototype.internal=function(e){let t={id:this.id,meta:na.FEATURE,"meta:type":this.type,active:Pi.INACTIVE,mode:e};if(this.ctx.options.userProperties)for(let r in this.properties)t[`user_${r}`]=this.properties[r];return{type:_r.FEATURE,properties:t,geometry:{coordinates:this.getCoordinates(),type:this.type}}};var Af=L0;var zP=function(e,t){Af.call(this,e,t)};zP.prototype=Object.create(Af.prototype);zP.prototype.isValid=function(){return typeof this.coordinates[0]=="number"&&typeof this.coordinates[1]=="number"};zP.prototype.updateCoordinate=function(e,t,r){arguments.length===3?this.coordinates=[t,r]:this.coordinates=[e,t],this.changed()};zP.prototype.getCoordinate=function(){return this.getCoordinates()};var xb=zP;var wb=function(e,t){Af.call(this,e,t)};wb.prototype=Object.create(Af.prototype);wb.prototype.isValid=function(){return this.coordinates.length>1};wb.prototype.addCoordinate=function(e,t,r){this.changed();let n=parseInt(e,10);this.coordinates.splice(n,0,[t,r])};wb.prototype.getCoordinate=function(e){let t=parseInt(e,10);return JSON.parse(JSON.stringify(this.coordinates[t]))};wb.prototype.removeCoordinate=function(e){this.changed(),this.coordinates.splice(parseInt(e,10),1)};wb.prototype.updateCoordinate=function(e,t,r){let n=parseInt(e,10);this.coordinates[n]=[t,r],this.changed()};var Eb=wb;var pm=function(e,t){Af.call(this,e,t),this.coordinates=this.coordinates.map(r=>r.slice(0,-1))};pm.prototype=Object.create(Af.prototype);pm.prototype.isValid=function(){return this.coordinates.length===0?!1:this.coordinates.every(e=>e.length>2)};pm.prototype.incomingCoords=function(e){this.coordinates=e.map(t=>t.slice(0,-1)),this.changed()};pm.prototype.setCoordinates=function(e){this.coordinates=e,this.changed()};pm.prototype.addCoordinate=function(e,t,r){this.changed();let n=e.split(".").map(i=>parseInt(i,10));this.coordinates[n[0]].splice(n[1],0,[t,r])};pm.prototype.removeCoordinate=function(e){this.changed();let t=e.split(".").map(n=>parseInt(n,10)),r=this.coordinates[t[0]];r&&(r.splice(t[1],1),r.length<3&&this.coordinates.splice(t[0],1))};pm.prototype.getCoordinate=function(e){let t=e.split(".").map(n=>parseInt(n,10)),r=this.coordinates[t[0]];return JSON.parse(JSON.stringify(r[t[1]]))};pm.prototype.getCoordinates=function(){return this.coordinates.map(e=>e.concat([e[0]]))};pm.prototype.updateCoordinate=function(e,t,r){this.changed();let n=e.split("."),o=parseInt(n[0],10),i=parseInt(n[1],10);this.coordinates[o]===void 0&&(this.coordinates[o]=[]),this.coordinates[o][i]=[t,r]};var Sb=pm;var ojr={MultiPoint:xb,MultiLineString:Eb,MultiPolygon:Sb},x9=(e,t,r,n,o)=>{let i=r.split("."),a=parseInt(i[0],10),u=i[1]?i.slice(1).join("."):null;return e[a][t](u,n,o)},qd=function(e,t){if(Af.call(this,e,t),delete this.coordinates,this.model=ojr[t.geometry.type],this.model===void 0)throw new TypeError(`${t.geometry.type} is not a valid type`);this.features=this._coordinatesToFeatures(t.geometry.coordinates)};qd.prototype=Object.create(Af.prototype);qd.prototype._coordinatesToFeatures=function(e){let t=this.model.bind(this);return e.map(r=>new t(this.ctx,{id:V2(),type:_r.FEATURE,properties:{},geometry:{coordinates:r,type:this.type.replace("Multi","")}}))};qd.prototype.isValid=function(){return this.features.every(e=>e.isValid())};qd.prototype.setCoordinates=function(e){this.features=this._coordinatesToFeatures(e),this.changed()};qd.prototype.getCoordinate=function(e){return x9(this.features,"getCoordinate",e)};qd.prototype.getCoordinates=function(){return JSON.parse(JSON.stringify(this.features.map(e=>e.type===_r.POLYGON?e.getCoordinates():e.coordinates)))};qd.prototype.updateCoordinate=function(e,t,r){x9(this.features,"updateCoordinate",e,t,r),this.changed()};qd.prototype.addCoordinate=function(e,t,r){x9(this.features,"addCoordinate",e,t,r),this.changed()};qd.prototype.removeCoordinate=function(e){x9(this.features,"removeCoordinate",e),this.changed()};qd.prototype.getFeatures=function(){return this.features};var Tb=qd;function Xn(e){this.map=e.map,this.drawConfig=JSON.parse(JSON.stringify(e.options||{})),this._ctx=e}Xn.prototype.setSelected=function(e){return this._ctx.store.setSelected(e)};Xn.prototype.setSelectedCoordinates=function(e){this._ctx.store.setSelectedCoordinates(e),e.reduce((t,r)=>(t[r.feature_id]===void 0&&(t[r.feature_id]=!0,this._ctx.store.get(r.feature_id).changed()),t),{})};Xn.prototype.getSelected=function(){return this._ctx.store.getSelected()};Xn.prototype.getSelectedIds=function(){return this._ctx.store.getSelectedIds()};Xn.prototype.isSelected=function(e){return this._ctx.store.isSelected(e)};Xn.prototype.getFeature=function(e){return this._ctx.store.get(e)};Xn.prototype.select=function(e){return this._ctx.store.select(e)};Xn.prototype.deselect=function(e){return this._ctx.store.deselect(e)};Xn.prototype.deleteFeature=function(e,t={}){return this._ctx.store.delete(e,t)};Xn.prototype.addFeature=function(e,t={}){return this._ctx.store.add(e,t)};Xn.prototype.clearSelectedFeatures=function(){return this._ctx.store.clearSelected()};Xn.prototype.clearSelectedCoordinates=function(){return this._ctx.store.clearSelectedCoordinates()};Xn.prototype.setActionableState=function(e={}){let t={trash:e.trash||!1,combineFeatures:e.combineFeatures||!1,uncombineFeatures:e.uncombineFeatures||!1};return this._ctx.events.actionable(t)};Xn.prototype.changeMode=function(e,t={},r={}){return this._ctx.events.changeMode(e,t,r)};Xn.prototype.fire=function(e,t){return this._ctx.events.fire(e,t)};Xn.prototype.updateUIClasses=function(e){return this._ctx.ui.queueMapClasses(e)};Xn.prototype.activateUIButton=function(e){return this._ctx.ui.setActiveButton(e)};Xn.prototype.featuresAt=function(e,t,r="click"){if(r!=="click"&&r!=="touch")throw new Error("invalid buffer type");return jd[r](e,t,this._ctx)};Xn.prototype.newFeature=function(e){let t=e.geometry.type;return t===_r.POINT?new xb(this._ctx,e):t===_r.LINE_STRING?new Eb(this._ctx,e):t===_r.POLYGON?new Sb(this._ctx,e):new Tb(this._ctx,e)};Xn.prototype.isInstanceOf=function(e,t){if(e===_r.POINT)return t instanceof xb;if(e===_r.LINE_STRING)return t instanceof Eb;if(e===_r.POLYGON)return t instanceof Sb;if(e==="MultiFeature")return t instanceof Tb;throw new Error(`Unknown feature class: ${e}`)};Xn.prototype.doRender=function(e){return this._ctx.store.featureChanged(e)};var $ut=Xn;Xn.prototype.onSetup=function(){};Xn.prototype.onDrag=function(){};Xn.prototype.onClick=function(){};Xn.prototype.onMouseMove=function(){};Xn.prototype.onMouseDown=function(){};Xn.prototype.onMouseUp=function(){};Xn.prototype.onMouseOut=function(){};Xn.prototype.onKeyUp=function(){};Xn.prototype.onKeyDown=function(){};Xn.prototype.onTouchStart=function(){};Xn.prototype.onTouchMove=function(){};Xn.prototype.onTouchEnd=function(){};Xn.prototype.onTap=function(){};Xn.prototype.onStop=function(){};Xn.prototype.onTrash=function(){};Xn.prototype.onCombineFeature=function(){};Xn.prototype.onUncombineFeature=function(){};Xn.prototype.toDisplayFeatures=function(){throw new Error("You must overwrite toDisplayFeatures")};var Zut={drag:"onDrag",click:"onClick",mousemove:"onMouseMove",mousedown:"onMouseDown",mouseup:"onMouseUp",mouseout:"onMouseOut",keyup:"onKeyUp",keydown:"onKeyDown",touchstart:"onTouchStart",touchmove:"onTouchMove",touchend:"onTouchEnd",tap:"onTap"},ijr=Object.keys(Zut);function Yut(e){let t=Object.keys(e);return function(r,n={}){let o={},i=t.reduce((u,d)=>(u[d]=e[d],u),new $ut(r));function a(u){return d=>i[u](o,d)}return{start(){o=i.onSetup(n),ijr.forEach(u=>{let d=Zut[u],h=()=>!1;e[d]&&(h=()=>!0),this.on(u,h,a(d))})},stop(){i.onStop(o)},trash(){i.onTrash(o)},combineFeatures(){i.onCombineFeatures(o)},uncombineFeatures(){i.onUncombineFeatures(o)},render(u,d){i.toDisplayFeatures(o,u,d)}}}}function Kut(e){let t=Object.keys(e.options.modes).reduce((x,M)=>(x[M]=Yut(e.options.modes[M]),x),{}),r={},n={},o={},i=null,a=null;o.drag=function(x,M){M({point:x.point,time:new Date().getTime()})?(e.ui.queueMapClasses({mouse:Jo.DRAG}),a.drag(x)):x.originalEvent.stopPropagation()},o.mousedrag=function(x){o.drag(x,M=>!U2(r,M))},o.touchdrag=function(x){o.drag(x,M=>!B2(n,M))},o.mousemove=function(x){if((x.originalEvent.buttons!==void 0?x.originalEvent.buttons:x.originalEvent.which)===1)return o.mousedrag(x);let O=bb(x,e);x.featureTarget=O,a.mousemove(x)},o.mousedown=function(x){r={time:new Date().getTime(),point:x.point};let M=bb(x,e);x.featureTarget=M,a.mousedown(x)},o.mouseup=function(x){let M=bb(x,e);x.featureTarget=M,U2(r,{point:x.point,time:new Date().getTime()})?a.click(x):a.mouseup(x)},o.mouseout=function(x){a.mouseout(x)},o.touchstart=function(x){if(!e.options.touchEnabled)return;n={time:new Date().getTime(),point:x.point};let M=jd.touch(x,null,e)[0];x.featureTarget=M,a.touchstart(x)},o.touchmove=function(x){if(e.options.touchEnabled)return a.touchmove(x),o.touchdrag(x)},o.touchend=function(x){if(x.originalEvent.preventDefault(),!e.options.touchEnabled)return;let M=jd.touch(x,null,e)[0];x.featureTarget=M,B2(n,{time:new Date().getTime(),point:x.point})?a.tap(x):a.touchend(x)};let u=x=>!(x===8||x===46||x>=48&&x<=57);o.keydown=function(x){(x.srcElement||x.target).classList.contains(Ul.CANVAS)&&((x.keyCode===8||x.keyCode===46)&&e.options.controls.trash?(x.preventDefault(),a.trash()):u(x.keyCode)?a.keydown(x):x.keyCode===49&&e.options.controls.point?d(qn.DRAW_POINT):x.keyCode===50&&e.options.controls.line_string?d(qn.DRAW_LINE_STRING):x.keyCode===51&&e.options.controls.polygon&&d(qn.DRAW_POLYGON))},o.keyup=function(x){u(x.keyCode)&&a.keyup(x)},o.zoomend=function(){e.store.changeZoom()},o.data=function(x){if(x.dataType==="style"){let{setup:M,map:O,options:D,store:k}=e;D.styles.some(q=>O.getLayer(q.id))||(M.addLayers(),k.setDirty(),k.render())}};function d(x,M,O={}){a.stop();let D=t[x];if(D===void 0)throw new Error(`${x} is not valid`);i=x;let k=D(e,M);a=qP(k,e),O.silent||e.map.fire(La.MODE_CHANGE,{mode:x}),e.store.setDirty(),e.store.render()}let h={trash:!1,combineFeatures:!1,uncombineFeatures:!1};function v(x){let M=!1;Object.keys(x).forEach(O=>{if(h[O]===void 0)throw new Error("Invalid action type");h[O]!==x[O]&&(M=!0),h[O]=x[O]}),M&&e.map.fire(La.ACTIONABLE,{actions:h})}return{start(){i=e.options.defaultMode,a=qP(t[i](e),e)},changeMode:d,actionable:v,currentModeName(){return i},currentModeRender(x,M){return a.render(x,M)},fire(x,M){e.map&&e.map.fire(x,M)},addEventListeners(){e.map.on("mousemove",o.mousemove),e.map.on("mousedown",o.mousedown),e.map.on("mouseup",o.mouseup),e.map.on("data",o.data),e.map.on("touchmove",o.touchmove),e.map.on("touchstart",o.touchstart),e.map.on("touchend",o.touchend),e.container.addEventListener("mouseout",o.mouseout),e.options.keybindings&&(e.container.addEventListener("keydown",o.keydown),e.container.addEventListener("keyup",o.keyup))},removeEventListeners(){e.map.off("mousemove",o.mousemove),e.map.off("mousedown",o.mousedown),e.map.off("mouseup",o.mouseup),e.map.off("data",o.data),e.map.off("touchmove",o.touchmove),e.map.off("touchstart",o.touchstart),e.map.off("touchend",o.touchend),e.container.removeEventListener("mouseout",o.mouseout),e.options.keybindings&&(e.container.removeEventListener("keydown",o.keydown),e.container.removeEventListener("keyup",o.keyup))},trash(x){a.trash(x)},combineFeatures(){a.combineFeatures()},uncombineFeatures(){a.uncombineFeatures()},getMode(){return i}}}function ajr(e){return[].concat(e).filter(t=>t!==void 0)}var Ib=ajr;function Kue(){let e=this;if(!(e.ctx.map&&e.ctx.map.getSource(Yu.HOT)!==void 0))return d();let r=e.ctx.events.currentModeName();e.ctx.ui.queueMapClasses({mode:r});let n=[],o=[];e.isDirty?o=e.getAllIds():(n=e.getChangedIds().filter(h=>e.get(h)!==void 0),o=e.sources.hot.filter(h=>h.properties.id&&n.indexOf(h.properties.id)===-1&&e.get(h.properties.id)!==void 0).map(h=>h.properties.id)),e.sources.hot=[];let i=e.sources.cold.length;e.sources.cold=e.isDirty?[]:e.sources.cold.filter(h=>{let v=h.properties.id||h.properties.parent;return n.indexOf(v)===-1});let a=i!==e.sources.cold.length||o.length>0;n.forEach(h=>u(h,"hot")),o.forEach(h=>u(h,"cold"));function u(h,v){let x=e.get(h).internal(r);e.ctx.events.currentModeRender(x,M=>{M.properties.mode=r,e.sources[v].push(M)})}a&&e.ctx.map.getSource(Yu.COLD).setData({type:_r.FEATURE_COLLECTION,features:e.sources.cold}),e.ctx.map.getSource(Yu.HOT).setData({type:_r.FEATURE_COLLECTION,features:e.sources.hot}),d();function d(){e.isDirty=!1,e.clearChangedIds()}}function Ti(e){this._features={},this._featureIds=new Cf,this._selectedFeatureIds=new Cf,this._selectedCoordinates=[],this._changedFeatureIds=new Cf,this._emitSelectionChange=!1,this._mapInitialConfig={},this.ctx=e,this.sources={hot:[],cold:[]};let t;this.render=()=>{t||(t=requestAnimationFrame(()=>{t=null,Kue.call(this),this._emitSelectionChange&&(this.ctx.events.fire(La.SELECTION_CHANGE,{features:this.getSelected().map(r=>r.toGeoJSON()),points:this.getSelectedCoordinates().map(r=>({type:_r.FEATURE,properties:{},geometry:{type:_r.POINT,coordinates:r.coordinates}}))}),this._emitSelectionChange=!1),this.ctx.events.fire(La.RENDER,{})}))},this.isDirty=!1}Ti.prototype.createRenderBatch=function(){let e=this.render,t=0;return this.render=function(){t++},()=>{this.render=e,t>0&&this.render()}};Ti.prototype.setDirty=function(){return this.isDirty=!0,this};Ti.prototype.featureCreated=function(e,t={}){if(this._changedFeatureIds.add(e),(t.silent!=null?t.silent:this.ctx.options.suppressAPIEvents)!==!0){let n=this.get(e);this.ctx.events.fire(La.CREATE,{features:[n.toGeoJSON()]})}return this};Ti.prototype.featureChanged=function(e,t={}){return this._changedFeatureIds.add(e),(t.silent!=null?t.silent:this.ctx.options.suppressAPIEvents)!==!0&&this.ctx.events.fire(La.UPDATE,{action:t.action?t.action:D0.CHANGE_COORDINATES,features:[this.get(e).toGeoJSON()]}),this};Ti.prototype.getChangedIds=function(){return this._changedFeatureIds.values()};Ti.prototype.clearChangedIds=function(){return this._changedFeatureIds.clear(),this};Ti.prototype.getAllIds=function(){return this._featureIds.values()};Ti.prototype.add=function(e,t={}){return this._features[e.id]=e,this._featureIds.add(e.id),this.featureCreated(e.id,{silent:t.silent}),this};Ti.prototype.delete=function(e,t={}){let r=[];return Ib(e).forEach(n=>{this._featureIds.has(n)&&(this._featureIds.delete(n),this._selectedFeatureIds.delete(n),t.silent||r.indexOf(this._features[n])===-1&&r.push(this._features[n].toGeoJSON()),delete this._features[n],this.isDirty=!0)}),r.length&&this.ctx.events.fire(La.DELETE,{features:r}),Xut(this,t),this};Ti.prototype.get=function(e){return this._features[e]};Ti.prototype.getAll=function(){return Object.keys(this._features).map(e=>this._features[e])};Ti.prototype.select=function(e,t={}){return Ib(e).forEach(r=>{this._selectedFeatureIds.has(r)||(this._selectedFeatureIds.add(r),this._changedFeatureIds.add(r),t.silent||(this._emitSelectionChange=!0))}),this};Ti.prototype.deselect=function(e,t={}){return Ib(e).forEach(r=>{this._selectedFeatureIds.has(r)&&(this._selectedFeatureIds.delete(r),this._changedFeatureIds.add(r),t.silent||(this._emitSelectionChange=!0))}),Xut(this,t),this};Ti.prototype.clearSelected=function(e={}){return this.deselect(this._selectedFeatureIds.values(),{silent:e.silent}),this};Ti.prototype.setSelected=function(e,t={}){return e=Ib(e),this.deselect(this._selectedFeatureIds.values().filter(r=>e.indexOf(r)===-1),{silent:t.silent}),this.select(e.filter(r=>!this._selectedFeatureIds.has(r)),{silent:t.silent}),this};Ti.prototype.setSelectedCoordinates=function(e){return this._selectedCoordinates=e,this._emitSelectionChange=!0,this};Ti.prototype.clearSelectedCoordinates=function(){return this._selectedCoordinates=[],this._emitSelectionChange=!0,this};Ti.prototype.getSelectedIds=function(){return this._selectedFeatureIds.values()};Ti.prototype.getSelected=function(){return this.getSelectedIds().map(e=>this.get(e))};Ti.prototype.getSelectedCoordinates=function(){return this._selectedCoordinates.map(t=>({coordinates:this.get(t.feature_id).getCoordinate(t.coord_path)}))};Ti.prototype.isSelected=function(e){return this._selectedFeatureIds.has(e)};Ti.prototype.setFeatureProperty=function(e,t,r,n={}){this.get(e).setProperty(t,r),this.featureChanged(e,{silent:n.silent,action:D0.CHANGE_PROPERTIES})};function Xut(e,t={}){let r=e._selectedCoordinates.filter(n=>e._selectedFeatureIds.has(n.feature_id));e._selectedCoordinates.length!==r.length&&!t.silent&&(e._emitSelectionChange=!0),e._selectedCoordinates=r}Ti.prototype.storeMapConfig=function(){Yue.forEach(e=>{this.ctx.map[e]&&(this._mapInitialConfig[e]=this.ctx.map[e].isEnabled())})};Ti.prototype.restoreMapConfig=function(){Object.keys(this._mapInitialConfig).forEach(e=>{this._mapInitialConfig[e]?this.ctx.map[e].enable():this.ctx.map[e].disable()})};Ti.prototype.getInitialConfigValue=function(e){return this._mapInitialConfig[e]!==void 0?this._mapInitialConfig[e]:!0};var sjr=["mode","feature","mouse"];function Qut(e){let t={},r=null,n={mode:null,feature:null,mouse:null},o={mode:null,feature:null,mouse:null};function i(){a({mode:null,feature:null,mouse:null}),u()}function a(M){o=Object.assign(o,M)}function u(){if(!e.container)return;let M=[],O=[];sjr.forEach(D=>{o[D]!==n[D]&&(M.push(`${D}-${n[D]}`),o[D]!==null&&O.push(`${D}-${o[D]}`))}),M.length>0&&e.container.classList.remove(...M),O.length>0&&e.container.classList.add(...O),n=Object.assign(n,o)}function d(M,O={}){let D=document.createElement("button");return D.className=`${Ul.CONTROL_BUTTON} ${O.className}`,D.setAttribute("title",O.title),O.container.appendChild(D),D.addEventListener("click",k=>{if(k.preventDefault(),k.stopPropagation(),k.target===r){h(),O.onDeactivate();return}v(M),O.onActivate()},!0),D}function h(){r&&(r.classList.remove(Ul.ACTIVE_BUTTON),r=null)}function v(M){h();let O=t[M];O&&O&&M!=="trash"&&(O.classList.add(Ul.ACTIVE_BUTTON),r=O)}function b(){let M=e.options.controls,O=document.createElement("div");return O.className=`${Ul.CONTROL_GROUP} ${Ul.CONTROL_BASE}`,M&&(M[Ns.LINE]&&(t[Ns.LINE]=d(Ns.LINE,{container:O,className:Ul.CONTROL_BUTTON_LINE,title:`LineString tool ${e.options.keybindings?"(l)":""}`,onActivate:()=>e.events.changeMode(qn.DRAW_LINE_STRING),onDeactivate:()=>e.events.trash()})),M[Ns.POLYGON]&&(t[Ns.POLYGON]=d(Ns.POLYGON,{container:O,className:Ul.CONTROL_BUTTON_POLYGON,title:`Polygon tool ${e.options.keybindings?"(p)":""}`,onActivate:()=>e.events.changeMode(qn.DRAW_POLYGON),onDeactivate:()=>e.events.trash()})),M[Ns.POINT]&&(t[Ns.POINT]=d(Ns.POINT,{container:O,className:Ul.CONTROL_BUTTON_POINT,title:`Marker tool ${e.options.keybindings?"(m)":""}`,onActivate:()=>e.events.changeMode(qn.DRAW_POINT),onDeactivate:()=>e.events.trash()})),M.trash&&(t.trash=d("trash",{container:O,className:Ul.CONTROL_BUTTON_TRASH,title:"Delete",onActivate:()=>{e.events.trash()}})),M.combine_features&&(t.combine_features=d("combineFeatures",{container:O,className:Ul.CONTROL_BUTTON_COMBINE_FEATURES,title:"Combine",onActivate:()=>{e.events.combineFeatures()}})),M.uncombine_features&&(t.uncombine_features=d("uncombineFeatures",{container:O,className:Ul.CONTROL_BUTTON_UNCOMBINE_FEATURES,title:"Uncombine",onActivate:()=>{e.events.uncombineFeatures()}}))),O}function x(){Object.keys(t).forEach(M=>{let O=t[M];O.parentNode&&O.parentNode.removeChild(O),delete t[M]})}return{setActiveButton:v,queueMapClasses:a,updateMapClasses:u,clearMapClasses:i,addButtons:b,removeButtons:x}}function Jut(e){let t=null,r=null,n={onRemove(){return e.map.off("load",n.connect),clearInterval(r),n.removeLayers(),e.store.restoreMapConfig(),e.ui.removeButtons(),e.events.removeEventListeners(),e.ui.clearMapClasses(),e.boxZoomInitial&&e.map.boxZoom.enable(),e.map=null,e.container=null,e.store=null,t&&t.parentNode&&t.parentNode.removeChild(t),t=null,this},connect(){e.map.off("load",n.connect),clearInterval(r),n.addLayers(),e.store.storeMapConfig(),e.events.addEventListeners()},onAdd(o){if(e.map=o,e.events=Kut(e),e.ui=Qut(e),e.container=o.getContainer(),e.store=new Ti(e),t=e.ui.addButtons(),e.options.boxSelect){e.boxZoomInitial=o.boxZoom.isEnabled(),o.boxZoom.disable();let i=o.dragPan.isEnabled();o.dragPan.disable(),o.dragPan.enable(),i||o.dragPan.disable()}return o.loaded()?n.connect():(o.on("load",n.connect),r=setInterval(()=>{o.loaded()&&n.connect()},16)),e.events.start(),t},addLayers(){e.map.addSource(Yu.COLD,{data:{type:_r.FEATURE_COLLECTION,features:[]},type:"geojson"}),e.map.addSource(Yu.HOT,{data:{type:_r.FEATURE_COLLECTION,features:[]},type:"geojson"}),e.options.styles.forEach(o=>{e.map.addLayer(o)}),e.store.setDirty(!0),e.store.render()},removeLayers(){e.options.styles.forEach(o=>{e.map.getLayer(o.id)&&e.map.removeLayer(o.id)}),e.map.getSource(Yu.COLD)&&e.map.removeSource(Yu.COLD),e.map.getSource(Yu.HOT)&&e.map.removeSource(Yu.HOT)}};return e.setup=n,n}var Xue="#3bb2d0",FP="#fbb03b",ect="#fff",w9=[{id:"gl-draw-polygon-fill",type:"fill",filter:["all",["==","$type","Polygon"]],paint:{"fill-color":["case",["==",["get","active"],"true"],FP,Xue],"fill-opacity":.1}},{id:"gl-draw-lines",type:"line",filter:["any",["==","$type","LineString"],["==","$type","Polygon"]],layout:{"line-cap":"round","line-join":"round"},paint:{"line-color":["case",["==",["get","active"],"true"],FP,Xue],"line-dasharray":["case",["==",["get","active"],"true"],[.2,2],[2,0]],"line-width":2}},{id:"gl-draw-point-outer",type:"circle",filter:["all",["==","$type","Point"],["==","meta","feature"]],paint:{"circle-radius":["case",["==",["get","active"],"true"],7,5],"circle-color":ect}},{id:"gl-draw-point-inner",type:"circle",filter:["all",["==","$type","Point"],["==","meta","feature"]],paint:{"circle-radius":["case",["==",["get","active"],"true"],5,3],"circle-color":["case",["==",["get","active"],"true"],FP,Xue]}},{id:"gl-draw-vertex-outer",type:"circle",filter:["all",["==","$type","Point"],["==","meta","vertex"],["!=","mode","simple_select"]],paint:{"circle-radius":["case",["==",["get","active"],"true"],7,5],"circle-color":ect}},{id:"gl-draw-vertex-inner",type:"circle",filter:["all",["==","$type","Point"],["==","meta","vertex"],["!=","mode","simple_select"]],paint:{"circle-radius":["case",["==",["get","active"],"true"],5,3],"circle-color":FP}},{id:"gl-draw-midpoint",type:"circle",filter:["all",["==","meta","midpoint"]],paint:{"circle-radius":3,"circle-color":FP}}];var Ob={};mI(Ob,{isActiveFeature:()=>Xg,isEnterKey:()=>Ab,isEscapeKey:()=>Cb,isFeature:()=>S9,isInactiveFeature:()=>E9,isOfMetaType:()=>G2,isShiftDown:()=>W2,isShiftMousedown:()=>Que,isTrue:()=>ljr,isVertex:()=>Mb,noTarget:()=>H2});function G2(e){return function(t){let r=t.featureTarget;return!r||!r.properties?!1:r.properties.meta===e}}function Que(e){return!e.originalEvent||!e.originalEvent.shiftKey?!1:e.originalEvent.button===0}function Xg(e){return!e.featureTarget||!e.featureTarget.properties?!1:e.featureTarget.properties.active===Pi.ACTIVE&&e.featureTarget.properties.meta===na.FEATURE}function E9(e){return!e.featureTarget||!e.featureTarget.properties?!1:e.featureTarget.properties.active===Pi.INACTIVE&&e.featureTarget.properties.meta===na.FEATURE}function H2(e){return e.featureTarget===void 0}function S9(e){return!e.featureTarget||!e.featureTarget.properties?!1:e.featureTarget.properties.meta===na.FEATURE}function Mb(e){let t=e.featureTarget;return!t||!t.properties?!1:t.properties.meta===na.VERTEX}function W2(e){return e.originalEvent?e.originalEvent.shiftKey===!0:!1}function Cb(e){return e.keyCode===27}function Ab(e){return e.keyCode===13}function ljr(){return!0}function fm(e,t){this.x=e,this.y=t}fm.prototype={clone(){return new fm(this.x,this.y)},add(e){return this.clone()._add(e)},sub(e){return this.clone()._sub(e)},multByPoint(e){return this.clone()._multByPoint(e)},divByPoint(e){return this.clone()._divByPoint(e)},mult(e){return this.clone()._mult(e)},div(e){return this.clone()._div(e)},rotate(e){return this.clone()._rotate(e)},rotateAround(e,t){return this.clone()._rotateAround(e,t)},matMult(e){return this.clone()._matMult(e)},unit(){return this.clone()._unit()},perp(){return this.clone()._perp()},round(){return this.clone()._round()},mag(){return Math.sqrt(this.x*this.x+this.y*this.y)},equals(e){return this.x===e.x&&this.y===e.y},dist(e){return Math.sqrt(this.distSqr(e))},distSqr(e){let t=e.x-this.x,r=e.y-this.y;return t*t+r*r},angle(){return Math.atan2(this.y,this.x)},angleTo(e){return Math.atan2(this.y-e.y,this.x-e.x)},angleWith(e){return this.angleWithSep(e.x,e.y)},angleWithSep(e,t){return Math.atan2(this.x*t-this.y*e,this.x*e+this.y*t)},_matMult(e){let t=e[0]*this.x+e[1]*this.y,r=e[2]*this.x+e[3]*this.y;return this.x=t,this.y=r,this},_add(e){return this.x+=e.x,this.y+=e.y,this},_sub(e){return this.x-=e.x,this.y-=e.y,this},_mult(e){return this.x*=e,this.y*=e,this},_div(e){return this.x/=e,this.y/=e,this},_multByPoint(e){return this.x*=e.x,this.y*=e.y,this},_divByPoint(e){return this.x/=e.x,this.y/=e.y,this},_unit(){return this._div(this.mag()),this},_perp(){let e=this.y;return this.y=this.x,this.x=-e,this},_rotate(e){let t=Math.cos(e),r=Math.sin(e),n=t*this.x-r*this.y,o=r*this.x+t*this.y;return this.x=n,this.y=o,this},_rotateAround(e,t){let r=Math.cos(e),n=Math.sin(e),o=t.x+r*(this.x-t.x)-n*(this.y-t.y),i=t.y+n*(this.x-t.x)+r*(this.y-t.y);return this.x=o,this.y=i,this},_round(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this},constructor:fm};fm.convert=function(e){if(e instanceof fm)return e;if(Array.isArray(e))return new fm(+e[0],+e[1]);if(e.x!==void 0&&e.y!==void 0)return new fm(+e.x,+e.y);throw new Error("Expected [x, y] or {x, y} point format")};function ujr(e,t){let r=t.getBoundingClientRect();return new fm(e.clientX-r.left-(t.clientLeft||0),e.clientY-r.top-(t.clientTop||0))}var T9=ujr;function dm(e,t,r,n){return{type:_r.FEATURE,properties:{meta:na.VERTEX,parent:e,coord_path:r,active:n?Pi.ACTIVE:Pi.INACTIVE},geometry:{type:_r.POINT,coordinates:t}}}function I9(e,t,r){let n=t.geometry.coordinates,o=r.geometry.coordinates;if(n[1]>y9||n[1]<v9||o[1]>y9||o[1]<v9)return null;let i={lng:(n[0]+o[0])/2,lat:(n[1]+o[1])/2};return{type:_r.FEATURE,properties:{meta:na.MIDPOINT,parent:e,lng:i.lng,lat:i.lat,coord_path:r.properties.coord_path},geometry:{type:_r.POINT,coordinates:[i.lng,i.lat]}}}function tct(e,t={},r=null){let{type:n,coordinates:o}=e.geometry,i=e.properties&&e.properties.id,a=[];n===_r.POINT?a.push(dm(i,o,r,d(r))):n===_r.POLYGON?o.forEach((v,b)=>{u(v,r!==null?`${r}.${b}`:String(b))}):n===_r.LINE_STRING?u(o,r):n.indexOf(_r.MULTI_PREFIX)===0&&h();function u(v,b){let x="",M=null;v.forEach((O,D)=>{let k=b!=null?`${b}.${D}`:String(D),R=dm(i,O,k,d(k));if(t.midpoints&&M){let B=I9(i,M,R);B&&a.push(B)}M=R;let q=JSON.stringify(O);x!==q&&a.push(R),D===0&&(x=q)})}function d(v){return t.selectedPaths?t.selectedPaths.indexOf(v)!==-1:!1}function h(){let v=n.replace(_r.MULTI_PREFIX,"");o.forEach((b,x)=>{let M={type:_r.FEATURE,properties:e.properties,geometry:{type:v,coordinates:b}};a=a.concat(tct(M,t,x))})}return a}var $2=tct;var yu={enable(e){setTimeout(()=>{!e.map||!e.map.doubleClickZoom||!e._ctx||!e._ctx.store||!e._ctx.store.getInitialConfigValue||e._ctx.store.getInitialConfigValue("doubleClickZoom")&&e.map.doubleClickZoom.enable()},0)},disable(e){setTimeout(()=>{!e.map||!e.map.doubleClickZoom||e.map.doubleClickZoom.disable()},0)}};var{LAT_MIN:M9,LAT_MAX:C9,LAT_RENDERED_MIN:rct,LAT_RENDERED_MAX:nct,LNG_MIN:oct,LNG_MAX:ict}=Si;function cjr(e){let t={Point:0,LineString:1,Polygon:2,MultiPoint:1,MultiLineString:2,MultiPolygon:3}[e.geometry.type],r=[e.geometry.coordinates].flat(t),n=r.map(u=>u[0]),o=r.map(u=>u[1]),i=u=>Math.min.apply(null,u),a=u=>Math.max.apply(null,u);return[i(n),i(o),a(n),a(o)]}function Z2(e,t){let r=M9,n=C9,o=M9,i=C9,a=ict,u=oct;e.forEach(h=>{let v=cjr(h),b=v[1],x=v[3],M=v[0],O=v[2];b>r&&(r=b),x<n&&(n=x),x>o&&(o=x),b<i&&(i=b),M<a&&(a=M),O>u&&(u=O)});let d=t;return r+d.lat>nct&&(d.lat=nct-r),o+d.lat>C9&&(d.lat=C9-o),n+d.lat<rct&&(d.lat=rct-n),i+d.lat<M9&&(d.lat=M9-i),a+d.lng<=oct&&(d.lng+=Math.ceil(Math.abs(d.lng)/360)*360),u+d.lng>=ict&&(d.lng-=Math.ceil(Math.abs(d.lng)/360)*360),d}function Y2(e,t){let r=Z2(e.map(n=>n.toGeoJSON()),t);e.forEach(n=>{let o=n.getCoordinates(),i=h=>{let v={lng:h[0]+r.lng,lat:h[1]+r.lat};return[v.lng,v.lat]},a=h=>h.map(v=>i(v)),u=h=>h.map(v=>a(v)),d;n.type===_r.POINT?d=i(o):n.type===_r.LINE_STRING||n.type===_r.MULTI_POINT?d=o.map(i):n.type===_r.POLYGON||n.type===_r.MULTI_LINE_STRING?d=o.map(a):n.type===_r.MULTI_POLYGON&&(d=o.map(u)),n.incomingCoords(d)})}var Ni={};Ni.onSetup=function(e){let t={dragMoveLocation:null,boxSelectStartLocation:null,boxSelectElement:void 0,boxSelecting:!1,canBoxSelect:!1,dragMoving:!1,canDragMove:!1,initialDragPanState:this.map.dragPan.isEnabled(),initiallySelectedFeatureIds:e.featureIds||[]};return this.setSelected(t.initiallySelectedFeatureIds.filter(r=>this.getFeature(r)!==void 0)),this.fireActionable(),this.setActionableState({combineFeatures:!0,uncombineFeatures:!0,trash:!0}),t};Ni.fireUpdate=function(){this.fire(La.UPDATE,{action:D0.MOVE,features:this.getSelected().map(e=>e.toGeoJSON())})};Ni.fireActionable=function(){let e=this.getSelected(),t=e.filter(i=>this.isInstanceOf("MultiFeature",i)),r=!1;if(e.length>1){r=!0;let i=e[0].type.replace("Multi","");e.forEach(a=>{a.type.replace("Multi","")!==i&&(r=!1)})}let n=t.length>0,o=e.length>0;this.setActionableState({combineFeatures:r,uncombineFeatures:n,trash:o})};Ni.getUniqueIds=function(e){return e.length?e.map(r=>r.properties.id).filter(r=>r!==void 0).reduce((r,n)=>(r.add(n),r),new Cf).values():[]};Ni.stopExtendedInteractions=function(e){e.boxSelectElement&&(e.boxSelectElement.parentNode&&e.boxSelectElement.parentNode.removeChild(e.boxSelectElement),e.boxSelectElement=null),(e.canDragMove||e.canBoxSelect)&&e.initialDragPanState===!0&&this.map.dragPan.enable(),e.boxSelecting=!1,e.canBoxSelect=!1,e.dragMoving=!1,e.canDragMove=!1};Ni.onStop=function(){yu.enable(this)};Ni.onMouseMove=function(e,t){return S9(t)&&e.dragMoving&&this.fireUpdate(),this.stopExtendedInteractions(e),!0};Ni.onMouseOut=function(e){return e.dragMoving?this.fireUpdate():!0};Ni.onTap=Ni.onClick=function(e,t){if(H2(t))return this.clickAnywhere(e,t);if(G2(na.VERTEX)(t))return this.clickOnVertex(e,t);if(S9(t))return this.clickOnFeature(e,t)};Ni.clickAnywhere=function(e){let t=this.getSelectedIds();t.length&&(this.clearSelectedFeatures(),t.forEach(r=>this.doRender(r))),yu.enable(this),this.stopExtendedInteractions(e)};Ni.clickOnVertex=function(e,t){this.changeMode(qn.DIRECT_SELECT,{featureId:t.featureTarget.properties.parent,coordPath:t.featureTarget.properties.coord_path,startPos:t.lngLat}),this.updateUIClasses({mouse:Jo.MOVE})};Ni.startOnActiveFeature=function(e,t){this.stopExtendedInteractions(e),this.map.dragPan.disable(),this.doRender(t.featureTarget.properties.id),e.canDragMove=!0,e.dragMoveLocation=t.lngLat};Ni.clickOnFeature=function(e,t){yu.disable(this),this.stopExtendedInteractions(e);let r=W2(t),n=this.getSelectedIds(),o=t.featureTarget.properties.id,i=this.isSelected(o);if(!r&&i&&this.getFeature(o).type!==_r.POINT)return this.changeMode(qn.DIRECT_SELECT,{featureId:o});i&&r?(this.deselect(o),this.updateUIClasses({mouse:Jo.POINTER}),n.length===1&&yu.enable(this)):!i&&r?(this.select(o),this.updateUIClasses({mouse:Jo.MOVE})):!i&&!r&&(n.forEach(a=>this.doRender(a)),this.setSelected(o),this.updateUIClasses({mouse:Jo.MOVE})),this.doRender(o)};Ni.onMouseDown=function(e,t){if(e.initialDragPanState=this.map.dragPan.isEnabled(),Xg(t))return this.startOnActiveFeature(e,t);if(this.drawConfig.boxSelect&&Que(t))return this.startBoxSelect(e,t)};Ni.startBoxSelect=function(e,t){this.stopExtendedInteractions(e),this.map.dragPan.disable(),e.boxSelectStartLocation=T9(t.originalEvent,this.map.getContainer()),e.canBoxSelect=!0};Ni.onTouchStart=function(e,t){if(Xg(t))return this.startOnActiveFeature(e,t)};Ni.onDrag=function(e,t){if(e.canDragMove)return this.dragMove(e,t);if(this.drawConfig.boxSelect&&e.canBoxSelect)return this.whileBoxSelect(e,t)};Ni.whileBoxSelect=function(e,t){e.boxSelecting=!0,this.updateUIClasses({mouse:Jo.ADD}),e.boxSelectElement||(e.boxSelectElement=document.createElement("div"),e.boxSelectElement.classList.add(Ul.BOX_SELECT),this.map.getContainer().appendChild(e.boxSelectElement));let r=T9(t.originalEvent,this.map.getContainer()),n=Math.min(e.boxSelectStartLocation.x,r.x),o=Math.max(e.boxSelectStartLocation.x,r.x),i=Math.min(e.boxSelectStartLocation.y,r.y),a=Math.max(e.boxSelectStartLocation.y,r.y),u=`translate(${n}px, ${i}px)`;e.boxSelectElement.style.transform=u,e.boxSelectElement.style.WebkitTransform=u,e.boxSelectElement.style.width=`${o-n}px`,e.boxSelectElement.style.height=`${a-i}px`};Ni.dragMove=function(e,t){e.dragMoving=!0,t.originalEvent.stopPropagation();let r={lng:t.lngLat.lng-e.dragMoveLocation.lng,lat:t.lngLat.lat-e.dragMoveLocation.lat};Y2(this.getSelected(),r),e.dragMoveLocation=t.lngLat};Ni.onTouchEnd=Ni.onMouseUp=function(e,t){if(e.dragMoving)this.fireUpdate();else if(e.boxSelecting){let r=[e.boxSelectStartLocation,T9(t.originalEvent,this.map.getContainer())],n=this.featuresAt(null,r,"click"),o=this.getUniqueIds(n).filter(i=>!this.isSelected(i));o.length&&(this.select(o),o.forEach(i=>this.doRender(i)),this.updateUIClasses({mouse:Jo.MOVE}))}this.stopExtendedInteractions(e)};Ni.toDisplayFeatures=function(e,t,r){t.properties.active=this.isSelected(t.properties.id)?Pi.ACTIVE:Pi.INACTIVE,r(t),this.fireActionable(),!(t.properties.active!==Pi.ACTIVE||t.geometry.type===_r.POINT)&&$2(t).forEach(r)};Ni.onTrash=function(){this.deleteFeature(this.getSelectedIds()),this.fireActionable()};Ni.onCombineFeatures=function(){let e=this.getSelected();if(e.length===0||e.length<2)return;let t=[],r=[],n=e[0].type.replace("Multi","");for(let o=0;o<e.length;o++){let i=e[o];if(i.type.replace("Multi","")!==n)return;i.type.includes("Multi")?i.getCoordinates().forEach(a=>{t.push(a)}):t.push(i.getCoordinates()),r.push(i.toGeoJSON())}if(r.length>1){let o=this.newFeature({type:_r.FEATURE,properties:r[0].properties,geometry:{type:`Multi${n}`,coordinates:t}});this.addFeature(o),this.deleteFeature(this.getSelectedIds(),{silent:!0}),this.setSelected([o.id]),this.fire(La.COMBINE_FEATURES,{createdFeatures:[o.toGeoJSON()],deletedFeatures:r})}this.fireActionable()};Ni.onUncombineFeatures=function(){let e=this.getSelected();if(e.length===0)return;let t=[],r=[];for(let n=0;n<e.length;n++){let o=e[n];this.isInstanceOf("MultiFeature",o)&&(o.getFeatures().forEach(i=>{this.addFeature(i),i.properties=o.properties,t.push(i.toGeoJSON()),this.select([i.id])}),this.deleteFeature(o.id,{silent:!0}),r.push(o.toGeoJSON()))}t.length>1&&this.fire(La.UNCOMBINE_FEATURES,{createdFeatures:t,deletedFeatures:r}),this.fireActionable()};var act=Ni;var sct=G2(na.VERTEX),lct=G2(na.MIDPOINT),Di={};Di.fireUpdate=function(){this.fire(La.UPDATE,{action:D0.CHANGE_COORDINATES,features:this.getSelected().map(e=>e.toGeoJSON())})};Di.fireActionable=function(e){this.setActionableState({combineFeatures:!1,uncombineFeatures:!1,trash:e.selectedCoordPaths.length>0})};Di.startDragging=function(e,t){e.initialDragPanState=this.map.dragPan.isEnabled(),this.map.dragPan.disable(),e.canDragMove=!0,e.dragMoveLocation=t.lngLat};Di.stopDragging=function(e){e.canDragMove&&e.initialDragPanState===!0&&this.map.dragPan.enable(),e.dragMoving=!1,e.canDragMove=!1,e.dragMoveLocation=null};Di.onVertex=function(e,t){this.startDragging(e,t);let r=t.featureTarget.properties,n=e.selectedCoordPaths.indexOf(r.coord_path);!W2(t)&&n===-1?e.selectedCoordPaths=[r.coord_path]:W2(t)&&n===-1&&e.selectedCoordPaths.push(r.coord_path);let o=this.pathsToCoordinates(e.featureId,e.selectedCoordPaths);this.setSelectedCoordinates(o)};Di.onMidpoint=function(e,t){this.startDragging(e,t);let r=t.featureTarget.properties;e.feature.addCoordinate(r.coord_path,r.lng,r.lat),this.fireUpdate(),e.selectedCoordPaths=[r.coord_path]};Di.pathsToCoordinates=function(e,t){return t.map(r=>({feature_id:e,coord_path:r}))};Di.onFeature=function(e,t){e.selectedCoordPaths.length===0?this.startDragging(e,t):this.stopDragging(e)};Di.dragFeature=function(e,t,r){Y2(this.getSelected(),r),e.dragMoveLocation=t.lngLat};Di.dragVertex=function(e,t,r){let n=e.selectedCoordPaths.map(a=>e.feature.getCoordinate(a)),o=n.map(a=>({type:_r.FEATURE,properties:{},geometry:{type:_r.POINT,coordinates:a}})),i=Z2(o,r);for(let a=0;a<n.length;a++){let u=n[a];e.feature.updateCoordinate(e.selectedCoordPaths[a],u[0]+i.lng,u[1]+i.lat)}};Di.clickNoTarget=function(){this.changeMode(qn.SIMPLE_SELECT)};Di.clickInactive=function(){this.changeMode(qn.SIMPLE_SELECT)};Di.clickActiveFeature=function(e){e.selectedCoordPaths=[],this.clearSelectedCoordinates(),e.feature.changed()};Di.onSetup=function(e){let t=e.featureId,r=this.getFeature(t);if(!r)throw new Error("You must provide a featureId to enter direct_select mode");if(r.type===_r.POINT)throw new TypeError("direct_select mode doesn't handle point features");let n={featureId:t,feature:r,dragMoveLocation:e.startPos||null,dragMoving:!1,canDragMove:!1,selectedCoordPaths:e.coordPath?[e.coordPath]:[]};return this.setSelectedCoordinates(this.pathsToCoordinates(t,n.selectedCoordPaths)),this.setSelected(t),yu.disable(this),this.setActionableState({trash:!0}),n};Di.onStop=function(){yu.enable(this),this.clearSelectedCoordinates()};Di.toDisplayFeatures=function(e,t,r){e.featureId===t.properties.id?(t.properties.active=Pi.ACTIVE,r(t),$2(t,{map:this.map,midpoints:!0,selectedPaths:e.selectedCoordPaths}).forEach(r)):(t.properties.active=Pi.INACTIVE,r(t)),this.fireActionable(e)};Di.onTrash=function(e){e.selectedCoordPaths.sort((t,r)=>r.localeCompare(t,"en",{numeric:!0})).forEach(t=>e.feature.removeCoordinate(t)),this.fireUpdate(),e.selectedCoordPaths=[],this.clearSelectedCoordinates(),this.fireActionable(e),e.feature.isValid()===!1&&(this.deleteFeature([e.featureId]),this.changeMode(qn.SIMPLE_SELECT,{}))};Di.onMouseMove=function(e,t){let r=Xg(t),n=sct(t),o=lct(t),i=e.selectedCoordPaths.length===0;return r&&i?this.updateUIClasses({mouse:Jo.MOVE}):n&&!i?this.updateUIClasses({mouse:Jo.MOVE}):this.updateUIClasses({mouse:Jo.NONE}),(n||r||o)&&e.dragMoving&&this.fireUpdate(),this.stopDragging(e),!0};Di.onMouseOut=function(e){return e.dragMoving&&this.fireUpdate(),!0};Di.onTouchStart=Di.onMouseDown=function(e,t){if(sct(t))return this.onVertex(e,t);if(Xg(t))return this.onFeature(e,t);if(lct(t))return this.onMidpoint(e,t)};Di.onDrag=function(e,t){if(e.canDragMove!==!0)return;e.dragMoving=!0,t.originalEvent.stopPropagation();let r={lng:t.lngLat.lng-e.dragMoveLocation.lng,lat:t.lngLat.lat-e.dragMoveLocation.lat};e.selectedCoordPaths.length>0?this.dragVertex(e,t,r):this.dragFeature(e,t,r),e.dragMoveLocation=t.lngLat};Di.onClick=function(e,t){if(H2(t))return this.clickNoTarget(e,t);if(Xg(t))return this.clickActiveFeature(e,t);if(E9(t))return this.clickInactive(e,t);this.stopDragging(e)};Di.onTap=function(e,t){if(H2(t))return this.clickNoTarget(e,t);if(Xg(t))return this.clickActiveFeature(e,t);if(E9(t))return this.clickInactive(e,t)};Di.onTouchEnd=Di.onMouseUp=function(e){e.dragMoving&&this.fireUpdate(),this.stopDragging(e)};var uct=Di;var hm={};hm.onSetup=function(){let e=this.newFeature({type:_r.FEATURE,properties:{},geometry:{type:_r.POINT,coordinates:[]}});return this.addFeature(e),this.clearSelectedFeatures(),this.updateUIClasses({mouse:Jo.ADD}),this.activateUIButton(Ns.POINT),this.setActionableState({trash:!0}),{point:e}};hm.stopDrawingAndRemove=function(e){this.deleteFeature([e.point.id],{silent:!0}),this.changeMode(qn.SIMPLE_SELECT)};hm.onTap=hm.onClick=function(e,t){this.updateUIClasses({mouse:Jo.MOVE}),e.point.updateCoordinate("",t.lngLat.lng,t.lngLat.lat),this.fire(La.CREATE,{features:[e.point.toGeoJSON()]}),this.changeMode(qn.SIMPLE_SELECT,{featureIds:[e.point.id]})};hm.onStop=function(e){this.activateUIButton(),e.point.getCoordinate().length||this.deleteFeature([e.point.id],{silent:!0})};hm.toDisplayFeatures=function(e,t,r){let n=t.properties.id===e.point.id;if(t.properties.active=n?Pi.ACTIVE:Pi.INACTIVE,!n)return r(t)};hm.onTrash=hm.stopDrawingAndRemove;hm.onKeyUp=function(e,t){if(Cb(t)||Ab(t))return this.stopDrawingAndRemove(e,t)};var cct=hm;function pjr(e,t){return e.lngLat?e.lngLat.lng===t[0]&&e.lngLat.lat===t[1]:!1}var Pb=pjr;var zd={};zd.onSetup=function(){let e=this.newFeature({type:_r.FEATURE,properties:{},geometry:{type:_r.POLYGON,coordinates:[[]]}});return this.addFeature(e),this.clearSelectedFeatures(),yu.disable(this),this.updateUIClasses({mouse:Jo.ADD}),this.activateUIButton(Ns.POLYGON),this.setActionableState({trash:!0}),{polygon:e,currentVertexPosition:0}};zd.clickAnywhere=function(e,t){if(e.currentVertexPosition>0&&Pb(t,e.polygon.coordinates[0][e.currentVertexPosition-1]))return this.changeMode(qn.SIMPLE_SELECT,{featureIds:[e.polygon.id]});this.updateUIClasses({mouse:Jo.ADD}),e.polygon.updateCoordinate(`0.${e.currentVertexPosition}`,t.lngLat.lng,t.lngLat.lat),e.currentVertexPosition++,e.polygon.updateCoordinate(`0.${e.currentVertexPosition}`,t.lngLat.lng,t.lngLat.lat)};zd.clickOnVertex=function(e){return this.changeMode(qn.SIMPLE_SELECT,{featureIds:[e.polygon.id]})};zd.onMouseMove=function(e,t){e.polygon.updateCoordinate(`0.${e.currentVertexPosition}`,t.lngLat.lng,t.lngLat.lat),Mb(t)&&this.updateUIClasses({mouse:Jo.POINTER})};zd.onTap=zd.onClick=function(e,t){return Mb(t)?this.clickOnVertex(e,t):this.clickAnywhere(e,t)};zd.onKeyUp=function(e,t){Cb(t)?(this.deleteFeature([e.polygon.id],{silent:!0}),this.changeMode(qn.SIMPLE_SELECT)):Ab(t)&&this.changeMode(qn.SIMPLE_SELECT,{featureIds:[e.polygon.id]})};zd.onStop=function(e){this.updateUIClasses({mouse:Jo.NONE}),yu.enable(this),this.activateUIButton(),this.getFeature(e.polygon.id)!==void 0&&(e.polygon.removeCoordinate(`0.${e.currentVertexPosition}`),e.polygon.isValid()?this.fire(La.CREATE,{features:[e.polygon.toGeoJSON()]}):(this.deleteFeature([e.polygon.id],{silent:!0}),this.changeMode(qn.SIMPLE_SELECT,{},{silent:!0})))};zd.toDisplayFeatures=function(e,t,r){let n=t.properties.id===e.polygon.id;if(t.properties.active=n?Pi.ACTIVE:Pi.INACTIVE,!n)return r(t);if(t.geometry.coordinates.length===0)return;let o=t.geometry.coordinates[0].length;if(!(o<3)){if(t.properties.meta=na.FEATURE,r(dm(e.polygon.id,t.geometry.coordinates[0][0],"0.0",!1)),o>3){let i=t.geometry.coordinates[0].length-3;r(dm(e.polygon.id,t.geometry.coordinates[0][i],`0.${i}`,!1))}if(o<=4){let i=[[t.geometry.coordinates[0][0][0],t.geometry.coordinates[0][0][1]],[t.geometry.coordinates[0][1][0],t.geometry.coordinates[0][1][1]]];if(r({type:_r.FEATURE,properties:t.properties,geometry:{coordinates:i,type:_r.LINE_STRING}}),o===3)return}return r(t)}};zd.onTrash=function(e){this.deleteFeature([e.polygon.id],{silent:!0}),this.changeMode(qn.SIMPLE_SELECT)};var pct=zd;var Fd={};Fd.onSetup=function(e){e=e||{};let t=e.featureId,r,n,o="forward";if(t){if(r=this.getFeature(t),!r)throw new Error("Could not find a feature with the provided featureId");let i=e.from;if(i&&i.type==="Feature"&&i.geometry&&i.geometry.type==="Point"&&(i=i.geometry),i&&i.type==="Point"&&i.coordinates&&i.coordinates.length===2&&(i=i.coordinates),!i||!Array.isArray(i))throw new Error("Please use the `from` property to indicate which point to continue the line from");let a=r.coordinates.length-1;if(r.coordinates[a][0]===i[0]&&r.coordinates[a][1]===i[1])n=a+1,r.addCoordinate(n,...r.coordinates[a]);else if(r.coordinates[0][0]===i[0]&&r.coordinates[0][1]===i[1])o="backwards",n=0,r.addCoordinate(n,...r.coordinates[0]);else throw new Error("`from` should match the point at either the start or the end of the provided LineString")}else r=this.newFeature({type:_r.FEATURE,properties:{},geometry:{type:_r.LINE_STRING,coordinates:[]}}),n=0,this.addFeature(r);return this.clearSelectedFeatures(),yu.disable(this),this.updateUIClasses({mouse:Jo.ADD}),this.activateUIButton(Ns.LINE),this.setActionableState({trash:!0}),{line:r,currentVertexPosition:n,direction:o}};Fd.clickAnywhere=function(e,t){if(e.currentVertexPosition>0&&Pb(t,e.line.coordinates[e.currentVertexPosition-1])||e.direction==="backwards"&&Pb(t,e.line.coordinates[e.currentVertexPosition+1]))return this.changeMode(qn.SIMPLE_SELECT,{featureIds:[e.line.id]});this.updateUIClasses({mouse:Jo.ADD}),e.line.updateCoordinate(e.currentVertexPosition,t.lngLat.lng,t.lngLat.lat),e.direction==="forward"?(e.currentVertexPosition++,e.line.updateCoordinate(e.currentVertexPosition,t.lngLat.lng,t.lngLat.lat)):e.line.addCoordinate(0,t.lngLat.lng,t.lngLat.lat)};Fd.clickOnVertex=function(e){return this.changeMode(qn.SIMPLE_SELECT,{featureIds:[e.line.id]})};Fd.onMouseMove=function(e,t){e.line.updateCoordinate(e.currentVertexPosition,t.lngLat.lng,t.lngLat.lat),Mb(t)&&this.updateUIClasses({mouse:Jo.POINTER})};Fd.onTap=Fd.onClick=function(e,t){if(Mb(t))return this.clickOnVertex(e,t);this.clickAnywhere(e,t)};Fd.onKeyUp=function(e,t){Ab(t)?this.changeMode(qn.SIMPLE_SELECT,{featureIds:[e.line.id]}):Cb(t)&&(this.deleteFeature([e.line.id],{silent:!0}),this.changeMode(qn.SIMPLE_SELECT))};Fd.onStop=function(e){yu.enable(this),this.activateUIButton(),this.getFeature(e.line.id)!==void 0&&(e.line.removeCoordinate(`${e.currentVertexPosition}`),e.line.isValid()?this.fire(La.CREATE,{features:[e.line.toGeoJSON()]}):(this.deleteFeature([e.line.id],{silent:!0}),this.changeMode(qn.SIMPLE_SELECT,{},{silent:!0})))};Fd.onTrash=function(e){this.deleteFeature([e.line.id],{silent:!0}),this.changeMode(qn.SIMPLE_SELECT)};Fd.toDisplayFeatures=function(e,t,r){let n=t.properties.id===e.line.id;if(t.properties.active=n?Pi.ACTIVE:Pi.INACTIVE,!n)return r(t);t.geometry.coordinates.length<2||(t.properties.meta=na.FEATURE,r(dm(e.line.id,t.geometry.coordinates[e.direction==="forward"?t.geometry.coordinates.length-2:1],`${e.direction==="forward"?t.geometry.coordinates.length-2:1}`,!1)),r(t))};var fct=Fd;var A9={simple_select:act,direct_select:uct,draw_point:cct,draw_polygon:pct,draw_line_string:fct};var fjr={defaultMode:qn.SIMPLE_SELECT,keybindings:!0,touchEnabled:!0,clickBuffer:2,touchBuffer:25,boxSelect:!0,displayControlsDefault:!0,styles:w9,modes:A9,controls:{},userProperties:!1,suppressAPIEvents:!0},djr={point:!0,line_string:!0,polygon:!0,trash:!0,combine_features:!0,uncombine_features:!0},hjr={point:!1,line_string:!1,polygon:!1,trash:!1,combine_features:!1,uncombine_features:!1};function dct(e,t){return e.map(r=>r.source?r:Object.assign({},r,{id:`${r.id}.${t}`,source:t==="hot"?Yu.HOT:Yu.COLD}))}function hct(e={}){let t=Object.assign({},e);return e.controls||(t.controls={}),e.displayControlsDefault===!1?t.controls=Object.assign({},hjr,e.controls):t.controls=Object.assign({},djr,e.controls),t=Object.assign({},fjr,t),t.styles=dct(t.styles,"cold").concat(dct(t.styles,"hot")),t}var Jue=Z(XA(),1),vct=Z(gct(),1);function O9(e,t){return e.length!==t.length?!1:JSON.stringify(e.map(r=>r).sort())===JSON.stringify(t.map(r=>r).sort())}var vjr={Polygon:Sb,LineString:Eb,Point:xb,MultiPolygon:Tb,MultiLineString:Tb,MultiPoint:Tb};function yct(e,t){t.modes=qn;let r=e.options.suppressAPIEvents!==void 0?!!e.options.suppressAPIEvents:!0;return t.getFeatureIdsAt=function(n){return jd.click({point:n},null,e).map(i=>i.properties.id)},t.getSelectedIds=function(){return e.store.getSelectedIds()},t.getSelected=function(){return{type:_r.FEATURE_COLLECTION,features:e.store.getSelectedIds().map(n=>e.store.get(n)).map(n=>n.toGeoJSON())}},t.getSelectedPoints=function(){return{type:_r.FEATURE_COLLECTION,features:e.store.getSelectedCoordinates().map(n=>({type:_r.FEATURE,properties:{},geometry:{type:_r.POINT,coordinates:n.coordinates}}))}},t.set=function(n){if(n.type===void 0||n.type!==_r.FEATURE_COLLECTION||!Array.isArray(n.features))throw new Error("Invalid FeatureCollection");let o=e.store.createRenderBatch(),i=e.store.getAllIds().slice(),a=t.add(n),u=new Cf(a);return i=i.filter(d=>!u.has(d)),i.length&&t.delete(i),o(),a},t.add=function(n){let i=JSON.parse(JSON.stringify((0,vct.default)(n))).features.map(a=>{if(a.id=a.id||V2(),a.geometry===null)throw new Error("Invalid geometry: null");if(e.store.get(a.id)===void 0||e.store.get(a.id).type!==a.geometry.type){let u=vjr[a.geometry.type];if(u===void 0)throw new Error(`Invalid geometry type: ${a.geometry.type}.`);let d=new u(e,a);e.store.add(d,{silent:r})}else{let u=e.store.get(a.id),d=u.properties;u.properties=a.properties,(0,Jue.default)(d,a.properties)||e.store.featureChanged(u.id,{silent:r}),(0,Jue.default)(u.getCoordinates(),a.geometry.coordinates)||u.incomingCoords(a.geometry.coordinates)}return a.id});return e.store.render(),i},t.get=function(n){let o=e.store.get(n);if(o)return o.toGeoJSON()},t.getAll=function(){return{type:_r.FEATURE_COLLECTION,features:e.store.getAll().map(n=>n.toGeoJSON())}},t.delete=function(n){return e.store.delete(n,{silent:r}),t.getMode()===qn.DIRECT_SELECT&&!e.store.getSelectedIds().length?e.events.changeMode(qn.SIMPLE_SELECT,void 0,{silent:r}):e.store.render(),t},t.deleteAll=function(){return e.store.delete(e.store.getAllIds(),{silent:r}),t.getMode()===qn.DIRECT_SELECT?e.events.changeMode(qn.SIMPLE_SELECT,void 0,{silent:r}):e.store.render(),t},t.changeMode=function(n,o={}){return n===qn.SIMPLE_SELECT&&t.getMode()===qn.SIMPLE_SELECT?(O9(o.featureIds||[],e.store.getSelectedIds())||(e.store.setSelected(o.featureIds,{silent:r}),e.store.render()),t):(n===qn.DIRECT_SELECT&&t.getMode()===qn.DIRECT_SELECT&&o.featureId===e.store.getSelectedIds()[0]||e.events.changeMode(n,o,{silent:r}),t)},t.getMode=function(){return e.events.getMode()},t.trash=function(){return e.events.trash({silent:r}),t},t.combineFeatures=function(){return e.events.combineFeatures({silent:r}),t},t.uncombineFeatures=function(){return e.events.uncombineFeatures({silent:r}),t},t.setFeatureProperty=function(n,o,i){return e.store.setFeatureProperty(n,o,i,{silent:r}),t},t}var ece={};mI(ece,{CommonSelectors:()=>Ob,ModeHandler:()=>qP,StringSet:()=>Cf,constrainFeatureMovement:()=>Z2,createMidPoint:()=>I9,createSupplementaryPoints:()=>$2,createVertex:()=>dm,doubleClickZoom:()=>yu,euclideanDistance:()=>F2,featuresAt:()=>jd,getFeatureAtAndSetCursors:()=>bb,isClick:()=>U2,isEventAtCoordinates:()=>Pb,isTap:()=>B2,mapEventToBoundingBox:()=>b9,moveFeatures:()=>Y2,sortFeatures:()=>_9,stringSetsAreEqual:()=>O9,theme:()=>w9,toDenseArray:()=>Ib});var yjr=function(e,t){e=hct(e);let r={options:e};t=yct(r,t),r.api=t;let n=Jut(r);return t.onAdd=n.onAdd,t.onRemove=n.onRemove,t.types=Ns,t.options=e,t};function P9(e){yjr(e,this)}P9.modes=A9;P9.constants=Si;P9.lib=ece;var _ct=P9;var bct=Z(Pe(),1);var tce=yn({key:"trackingHandlerState",default:null}),Ud=yn({key:"geoJsonChangeTrackingState",default:null}),N9=()=>{let e=zr(Ud),t=(0,bct.useCallback)(i=>{e(a=>{if(a.addIds.includes(i))return Mt(Te({},a),{addIds:a.addIds.filter(d=>d!==i)});{let d=new Map(a.dirtyMap);return d.delete(i),Mt(Te({},a),{dirtyMap:d,deleteIds:[...a.deleteIds,i]})}})},[]),r=ar(({snapshot:i,set:a})=>u=>gt(null,null,function*(){let h=(yield i.getPromise(Xs)).features.find(v=>v.id===u.id);h!==void 0&&(Object.keys(h.properties).length!==Object.keys(u.properties).length||Object.keys(h.properties).some(v=>{let b=h.properties[v],x=u.properties[v];return v===po.time?b[0]!==x[0]||b[1]!==x[1]:b!==x})?a(Ud,v=>{let b=new Map(v.dirtyMap);return b.set(u.id,!0),Mt(Te({},v),{dirtyMap:b})}):a(Ud,v=>{if(v.dirtyMap.has(u.id)&&v.dirtyMap.get(u.id)){let b=new Map(v.dirtyMap);return b.set(u.id,!1),Mt(Te({},v),{dirtyMap:b})}return v}))}),[]),n=ar(({snapshot:i,set:a})=>()=>gt(null,null,function*(){let u=yield i.getPromise(tr);if(Me(u)){let v={"draw.update":b=>{let x=b.features[0];a(Ud,M=>{if(M.dirtyMap.has(x.id)&&!M.dirtyMap.get(x.id)){let O=new Map(M.dirtyMap);return O.set(x.id,!0),Mt(Te({},M),{dirtyMap:O})}return M})},"draw.create":b=>{a(Ud,x=>Mt(Te({},x),{addIds:[...x.addIds,b.features[0].id]}))},"draw.delete":b=>{a(Ud,x=>{if(x.addIds.includes(b.features[0].id))return Mt(Te({},x),{addIds:x.addIds.filter(O=>O!==b.features[0].id)});{let O=new Map(x.dirtyMap);return O.delete(b.features[0].id),Mt(Te({},x),{dirtyMap:O,deleteIds:[...x.deleteIds,b.features[0].id]})}})}};Object.keys(v).forEach(b=>{u.on(b,v[b])}),a(tce,v)}let d=yield i.getPromise(Xs),h=new Map;d.features.forEach(v=>{h.set(v.id,!1)}),a(Ud,{dirtyMap:h,deleteIds:[],addIds:[]})}),[]),o=ar(({snapshot:i,set:a})=>()=>gt(null,null,function*(){let u=yield i.getPromise(tr);if(Me(u)){let d=yield i.getPromise(tce);d!==null&&(Object.keys(d).forEach(h=>{u.off(h,d[h])}),a(tce,null))}}),[]);return{handleDeleteFeature:t,handleUpdateFeature:r,registerMapEventHandler:n,unregisterMapEventHandler:o}};var D9="shifted",K2="position-control",Qg={topLeft:".maplibregl-ctrl-top-left",topRight:".maplibregl-ctrl-top-right",bottomRight:".maplibregl-ctrl-bottom-right"},xct=(e,t)=>{for(let r of Object.values(e)){let n=t._controlContainer.querySelector(r);n.classList.remove(D9),n.classList.add(D9)}},wct=(e,t)=>{for(let r of Object.values(e))t._controlContainer.querySelector(r).classList.remove(D9)},L9=()=>{let e=ar(({snapshot:i})=>()=>gt(null,null,function*(){let a=yield i.getPromise(tr);if(Me(a)){let u=[Qg.topLeft];xct(u,a)}}),[]),t=ar(({snapshot:i})=>()=>gt(null,null,function*(){let a=yield i.getPromise(tr);if(Me(a)){let u=[Qg.topRight,Qg.bottomRight];xct(u,a)}}),[]),r=ar(({snapshot:i})=>()=>gt(null,null,function*(){let a=yield i.getPromise(tr);if(Me(a)){let u=[Qg.topLeft];wct(u,a)}}),[]),n=ar(({snapshot:i})=>()=>gt(null,null,function*(){let a=yield i.getPromise(tr);if(Me(a)){let u=[Qg.topRight,Qg.bottomRight];wct(u,a)}}),[]),o=ar(({snapshot:i})=>()=>gt(null,null,function*(){let a=yield i.getPromise(tr);if(Me(a))for(let u of Object.values(Qg))a._controlContainer.querySelector(u).classList.remove(D9)}),[]);return{shiftLeft:e,shiftRight:t,unShiftLeft:r,unShiftRight:n,removeControlShifts:o}};var Ku="user_",_jr="rgb(0, 177, 158)",rce=_jr,Ect=[{id:"polygon-fill",type:"fill",paint:{"fill-color":["coalesce",["get",`${Ku}fill`],pn[Ir.FILL].COLOR],"fill-opacity":["coalesce",["get",`${Ku}fill-opacity`],pn[Ir.FILL].OPACITY]},filter:["all",["==",["geometry-type"],"Polygon"]]},{id:"polygon-outline-hot",type:"line",layout:{"line-cap":"round","line-join":"round"},paint:{"line-color":["coalesce",["get",`${Ku}stroke`],pn[Ir.OUTLINE].COLOR],"line-width":["coalesce",["get",`${Ku}stroke-width`],pn[Ir.OUTLINE].WIDTH],"line-opacity":["coalesce",["get",`${Ku}stroke-opacity`],pn[Ir.OUTLINE].OPACITY],"line-dasharray":[.2,2]},filter:["all",["==",["get","active"],"true"],["any",["==",["geometry-type"],"Polygon"],["all",["==",["get","mode"],"draw_polygon"],["==",["geometry-type"],"LineString"]]]]},{id:"polygon-outline-cold",type:"line",paint:{"line-color":["coalesce",["get",`${Ku}stroke`],pn[Ir.OUTLINE].COLOR],"line-width":["coalesce",["get",`${Ku}stroke-width`],pn[Ir.OUTLINE].WIDTH],"line-opacity":["coalesce",["get",`${Ku}stroke-opacity`],pn[Ir.OUTLINE].OPACITY]},filter:["all",["==",["get","active"],"false"],["==",["geometry-type"],"Polygon"]]},{id:"line-hot",type:"line",layout:{"line-cap":"round","line-join":"round"},paint:{"line-color":["coalesce",["get",`${Ku}stroke`],pn[Ir.LINE].COLOR],"line-width":["coalesce",["get",`${Ku}stroke-width`],pn[Ir.LINE].WIDTH],"line-opacity":["coalesce",["get",`${Ku}stroke-opacity`],pn[Ir.LINE].OPACITY],"line-dasharray":[.2,2]},filter:["all",["==",["get","active"],"true"],["==",["geometry-type"],"LineString"],["!=",["get","mode"],"draw_polygon"]]},{id:"line-cold",type:"line",paint:{"line-color":["coalesce",["get",`${Ku}stroke`],pn[Ir.LINE].COLOR],"line-width":["coalesce",["get",`${Ku}stroke-width`],pn[Ir.LINE].WIDTH],"line-opacity":["coalesce",["get",`${Ku}stroke-opacity`],pn[Ir.LINE].OPACITY]},filter:["all",["==",["get","active"],"false"],["==",["geometry-type"],"LineString"]]},{id:"point",type:"symbol",layout:{"icon-image":vr.getSettings().MARKER_IMAGE_ID,"icon-size":.5,"icon-anchor":"bottom","icon-allow-overlap":!0},paint:{"icon-color":["to-color",["get",`${Ku}marker`],pn[Ir.SYMBOL].COLOR],"icon-halo-color":["case",["==",["get","active"],"true"],rce,"#fff"],"icon-halo-width":["case",["==",["get","active"],"true"],2,1]},filter:["all",["==",["geometry-type"],"Point"],["==",["get","meta"],"feature"]]},{id:"gl-draw-vertex-outer",type:"circle",filter:["all",["==",["geometry-type"],"Point"],["==",["get","meta"],"vertex"],["!=",["get","mode"],"simple_select"]],paint:{"circle-radius":["case",["==",["get","active"],"true"],7,5],"circle-color":"#fff"}},{id:"gl-draw-vertex-inner",type:"circle",filter:["all",["==",["geometry-type"],"Point"],["==",["get","meta"],"vertex"],["!=",["get","mode"],"simple_select"]],paint:{"circle-radius":["case",["==",["get","active"],"true"],5,3],"circle-color":rce}},{id:"gl-draw-midpoint",type:"circle",filter:["all",["==",["get","meta"],"midpoint"]],paint:{"circle-radius":3,"circle-color":rce}}];var bjr={styles:Ect,userProperties:!0,controls:{combine_features:!1,uncombine_features:!1}},xjr=e=>{let r=e._controlContainer.querySelector(Qg.topRight).querySelectorAll("button");for(let n of r){let o=document.createElement("div");o.classList.add("maplibregl-ctrl","maplibregl-ctrl-group"),n.before(o),o.appendChild(n)}},oce=()=>{let e=ar(({snapshot:r,set:n})=>()=>gt(null,null,function*(){let o=yield r.getPromise(tr),i=yield r.getPromise(Xs);if(Me(o)&&Me(i)){let a=new _ct(bjr);n(Ks,a),o.addControl(a,"top-right"),a.add(i),o._controlContainer.classList.add(K2),xjr(o)}}),[]),t=ar(({snapshot:r,set:n})=>()=>gt(null,null,function*(){let o=yield r.getPromise(tr),i=yield r.getPromise(Ks),{selectedLayer:a}=yield r.getPromise(nu);Me(o)&&Me(a)&&!a.isVisible(o)&&a.setVisibility(o,"visible"),Me(o)&&Me(i)&&(o.removeControl(i),n(Ks,void 0),o._controlContainer.classList.remove(K2),kd(n))}),[]);return{initializeDraw:e,removeDraw:t}},wjr=()=>{let e=yt(hs),{initializeDraw:t,removeDraw:r}=oce(),{shiftLeft:n,shiftRight:o,unShiftLeft:i,unShiftRight:a,removeControlShifts:u}=L9(),{registerMapEventHandler:d,unregisterMapEventHandler:h}=N9();return(0,nce.useEffect)(()=>(t(),d(),()=>{r(),u(),h()}),[]),(0,nce.useEffect)(()=>{let v=e===xi.FEATURE,b=e===xi.METADATA||e===xi.HISTORY;v?(n(),a()):b?(o(),i()):u()},[e]),null},Sct=wjr;var Tct=Sct;var Nf=Z(Pe(),1);var ace=Z(XA(),1);var Ejr=({id:e,translationKey:t})=>({id:e,type:"success",text:fe(t)}),Sjr=({id:e,translationKey:t})=>({id:e,type:"danger",text:fe(t)}),Tjr=(e="mapWrapper")=>{let t=ar(({set:n})=>o=>{let i=Ejr({id:e,translationKey:o});n(Os,i)},[e]),r=ar(({set:n})=>o=>{let i=Sjr({id:e,translationKey:o});n(Os,i)},[e]);return{notifySuccess:t,notifyError:r}},k0=Tjr;var Ict=e=>({[qe.title]:e[qe.title],[qe.description]:e[qe.description],[qe.thumbnailUrl]:e[qe.thumbnailUrl],[qe.timePeriod]:e[qe.timePeriod]}),ice=e=>{let t={link_thumb:e[qe.thumbnailUrl],title:e[qe.title],description:e[qe.description],time_period:e[qe.timePeriod]};return Qj(t)},Mct=e=>{let{timePeriodStart:t,timePeriodEnd:r}=eq(e),n={[qe.title]:e[qe.title],[Lh]:t,[kh]:r,[qe.description]:e[qe.description],[qe.thumbnailUrl]:e[qe.thumbnailUrl]};return Jj(n)},Cct=e=>{let t=e,r=t[Lh],n=t[kh],o=tq(r,n);return{[qe.title]:t[qe.title],[qe.timePeriod]:o,[qe.description]:t[qe.description],[qe.thumbnailUrl]:t[qe.thumbnailUrl]}};var Ijr=()=>{let{notifyError:e}=k0(),t=ar(({snapshot:o,set:i})=>()=>gt(null,null,function*(){let a=yield o.getPromise(Ks);if(a){let u=iut(a.getAll()),d=yield o.getPromise(tr),h=yield o.getPromise(Pl),v=null;try{let b=Vo.toPersistenceState(u);v=yield Ret(b,ice(h))}catch(b){que(b,e);return}if(Me(v)){let b=Vo.fromApplication({metadata:Mt(Te({},h),{[qe.id]:v,[qe.vectorMapId]:v,[qe.version]:0,[qe.userRole]:"owner"}),geoJson:u});b.addLayerToMap(d),i(Dn,x=>x.concat(b)),i(Ys,b.getId())}kd(i)}})),r=ar(({snapshot:o,set:i})=>()=>gt(null,null,function*(){let a=yield o.getPromise(Ks);if(a){let{selectedLayer:u}=yield o.getPromise(nu),d=yield o.getPromise(tr),h=yield o.getPromise(Pl),v=yield o.getPromise(Go),b=yield o.getPromise(mWe),x=yield o.getPromise(Xs),M=Ict(u.getMetadata()),O=a.getAll(),D=!(0,ace.default)(x,O)||b,R=!(0,ace.default)(M,h)&&Jz(v);if(!D&&!R){kd(i);return}let q=v.version+1,B=aut(x,O,q),G=ice(h),re=null;try{let Q=Vo.toPersistenceState(B);re=yield jet(v.id,D?Q:null,R?G:null,v.version)}catch(Q){que(Q,e);return}Me(d)&&Me(u)&&Me(re)&&(D&&(u.setDataOnMap(d,B),u.updateMetadata(qe.version,re)),R&&Object.keys(h).forEach(Q=>{u.updateMetadata(Q,h[Q])}),i(Hy,Date.now()),kd(i))}})),n=ar(({snapshot:o,set:i})=>()=>gt(null,null,function*(){let a=yield o.getPromise(Ks);if(a){let{selectedLayer:u}=yield o.getPromise(nu),d=yield o.getPromise(tr),h=yield o.getPromise(Pl);if(Me(d)&&Me(u)){let v=kP(a.getAll());u.setDataOnMap(d,v),Object.keys(h).forEach(b=>{u.updateMetadata(b,h[b])}),i(Hy,Date.now()),kd(i)}}}));return ar(({snapshot:o})=>()=>gt(null,null,function*(){let i=yield o.getPromise(Go);i!==null&&(i.type===$a.REMOTE?i.id===null?yield t():yield r():yield n())}))},Act=Ijr;var Ja=Z(Pe(),1),j9=Z(xt(),1);var Nb=Z(Pe(),1);var k9=Z(xt(),1),Oct=({count:e,id:t,formatFunction:r})=>{let n=(0,Nb.useMemo)(()=>r?r(e):eot.format(e),[e]),o=(0,Nb.useMemo)(()=>Jnt.select(e)==="one"?fe(`geojson-control-bar-${t}`):fe(`geojson-control-bar-${t}-plural`),[e,t]);return Nb.default.createElement("span",{className:t},Nb.default.createElement("span",{className:"bold"},n)," ",Nb.default.createElement("span",null,o))};Oct.propTypes={count:k9.default.number,id:k9.default.string,formatFunction:k9.default.func};var R9=Oct;var Mjr=e=>`x${e}`,Pct=({onUpdateViewMode:e,formattedFeatureCount:t,viewState:r})=>{let n=yt(Ud);(0,Ja.useEffect)(()=>{if(n===null)return;let i=n.addIds.length>0||n.deleteIds.length>0||Array.from(n.dirtyMap.values()).some(a=>a);e(i?Xu.UNSAVED_FEATURE_CHANGES:Xu.INITIAL)},[n]);let o=(0,Ja.useMemo)(()=>n?Array.from(n.dirtyMap.values()).filter(i=>i).length:0,[n==null?void 0:n.dirtyMap]);return Ja.default.createElement(Ja.default.Fragment,null,r===Xu.UNSAVED_FEATURE_CHANGES&&Ja.default.createElement(Ja.default.Fragment,null,Ja.default.createElement(R9,{count:n.addIds.length,id:"new"}),Ja.default.createElement("span",{className:"separator"}),Ja.default.createElement(R9,{count:-n.deleteIds.length,id:"deleted"}),Ja.default.createElement("span",{className:"separator"}),Ja.default.createElement(R9,{count:o,id:"changed",formatFunction:Mjr})),r===Xu.SHOW_FEATURE_COUNT&&Ja.default.createElement(Ja.default.Fragment,null,Ja.default.createElement("span",{className:"bold"},t)," ",fe("geojson-control-bar-hint-features-present")),r===Xu.NO_TITLE&&Ja.default.createElement("span",{className:"bold"},fe("geojson-control-bar-hint-add-title")),r===Xu.NO_FEATURES&&Ja.default.createElement("span",{className:"bold"},fe("geojson-control-bar-hint-add-feature")))};Pct.propTypes={viewState:j9.default.number.isRequired,onUpdateViewMode:j9.default.func.isRequired,formattedFeatureCount:j9.default.string};var Nct=(0,Ja.memo)(Pct);var Ju=Z(Pe(),1);var q9=Z(Pe(),1);var Dct=Z(xt(),1);var Lct=({onClick:e})=>{let t=yt(vg),r=yt(Go);return(r==null?void 0:r.type)===$a.REMOTE?q9.default.createElement(dn,{disabled:!Ott(r),className:"control-bar-layer-buttons--button layer-history-button",onClick:e,title:fe("geojson-control-bar-history-btn-title")},q9.default.createElement("span",{className:Dt("control-bar-layer-buttons--badge",t!==null&&"in")}),q9.default.createElement(Fr,{name:"clock"})):null};Lct.propTypes={onClick:Dct.default.func.isRequired};var kct=Lct;var UP=Z(Pe(),1),Rct=Z(xt(),1);var jct=({onClick:e})=>{let t=yt(Go),{type:r}=t,n=(0,UP.useMemo)(()=>N4(t)||P4(t),[t]);return r===$a.REMOTE&&n?UP.default.createElement(dn,{className:"control-bar-layer-buttons--button layer-roles-button",onClick:e,title:fe("geojson-control-bar-roles-btn-title")},UP.default.createElement(Fr,{name:"user-roles"})):null};jct.propTypes={onClick:Rct.default.func.isRequired};var qct=jct;var gm=Z(Pe(),1);var Bd=Z(Pe());var Cjr=(0,Bd.createContext)(null),sce={didCatch:!1,error:null},X2=class extends Bd.Component{constructor(t){super(t),this.resetErrorBoundary=this.resetErrorBoundary.bind(this),this.state=sce}static getDerivedStateFromError(t){return{didCatch:!0,error:t}}resetErrorBoundary(){let{error:t}=this.state;if(t!==null){for(var r,n,o=arguments.length,i=new Array(o),a=0;a<o;a++)i[a]=arguments[a];(r=(n=this.props).onReset)===null||r===void 0||r.call(n,{args:i,reason:"imperative-api"}),this.setState(sce)}}componentDidCatch(t,r){var n,o;(n=(o=this.props).onError)===null||n===void 0||n.call(o,t,r)}componentDidUpdate(t,r){let{didCatch:n}=this.state,{resetKeys:o}=this.props;if(n&&r.error!==null&&Ajr(t.resetKeys,o)){var i,a;(i=(a=this.props).onReset)===null||i===void 0||i.call(a,{next:o,prev:t.resetKeys,reason:"keys"}),this.setState(sce)}}render(){let{children:t,fallbackRender:r,FallbackComponent:n,fallback:o}=this.props,{didCatch:i,error:a}=this.state,u=t;if(i){let d={error:a,resetErrorBoundary:this.resetErrorBoundary};if(typeof r=="function")u=r(d);else if(n)u=(0,Bd.createElement)(n,d);else if(o!==void 0)u=o;else throw a}return(0,Bd.createElement)(Cjr.Provider,{value:{didCatch:i,error:a,resetErrorBoundary:this.resetErrorBoundary}},u)}};function Ajr(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[],t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:[];return e.length!==t.length||e.some((r,n)=>!Object.is(r,t[n]))}var Oce=Z(xt(),1);var zct=Z(Pe(),1);var Q2={OWNER:"owner",EDITOR:"editor"},_u={OWNERS:"owners",EDITORS:"editors"};var Fct=yn({key:"vectorMapRolesQueryIdState",default:0}),Ojr=Ws({key:"vectorMapRolesQuery",get:t=>gt(null,[t],function*({get:e}){e(Fct);let{id:r,type:n}=e(Go),o={editors:[],owners:[]};if(n===$a.LOCAL||!Me(r))return o;let i=yield Bet(r);for(let{user_id:a,role:u}of i)u===Q2.EDITOR?o.editors.push(a):u===Q2.OWNER?o.owners.push(a):console.warn(`Cannot map unknown role '${u}'`);return o})}),lce=()=>ar(({set:t})=>()=>{t(Fct,r=>r+1)},[]),Pjr=()=>{let e=lce(),t=yt(Ojr);return(0,zct.useEffect)(()=>()=>{e()},[]),t},Uct=Pjr;var Li=Z(Pe(),1);var G9=Z(Pe(),1),Mn=Z(Pe(),1);var GP=e=>e.type==="checkbox",Db=e=>e instanceof Date,Qu=e=>e==null,Xct=e=>typeof e=="object",es=e=>!Qu(e)&&!Array.isArray(e)&&Xct(e)&&!Db(e),Qct=e=>es(e)&&e.target?GP(e.target)?e.target.checked:e.target.value:e,Njr=e=>e.substring(0,e.search(/\.\d+(\.|$)/))||e,Jct=(e,t)=>e.has(Njr(t)),Djr=e=>{let t=e.constructor&&e.constructor.prototype;return es(t)&&t.hasOwnProperty("isPrototypeOf")},xce=typeof window!="undefined"&&typeof window.HTMLElement!="undefined"&&typeof document!="undefined";function ba(e){let t,r=Array.isArray(e),n=typeof FileList!="undefined"?e instanceof FileList:!1;if(e instanceof Date)t=new Date(e);else if(e instanceof Set)t=new Set(e);else if(!(xce&&(e instanceof Blob||n))&&(r||es(e))){if(t=r?[]:{},!r&&!Djr(e))t=e;else for(let o in e)e.hasOwnProperty(o)&&(t[o]=ba(e[o]));}else return e;return t}var HP=e=>Array.isArray(e)?e.filter(Boolean):[],oa=e=>e===void 0,pr=(e,t,r)=>{if(!t||!es(e))return r;let n=HP(t.split(/[,[\].]+?/)).reduce((o,i)=>Qu(o)?o:o[i],e);return oa(n)||n===e?oa(e[t])?r:e[t]:n},yp=e=>typeof e=="boolean",wce=e=>/^\w*$/.test(e),ept=e=>HP(e.replace(/["|']|\]/g,"").split(/\.|\[/)),mi=(e,t,r)=>{let n=-1,o=wce(t)?[t]:ept(t),i=o.length,a=i-1;for(;++n<i;){let u=o[n],d=r;if(n!==a){let h=e[u];d=es(h)||Array.isArray(h)?h:isNaN(+o[n+1])?{}:[]}if(u==="__proto__"||u==="constructor"||u==="prototype")return;e[u]=d,e=e[u]}},F9={BLUR:"blur",FOCUS_OUT:"focusout",CHANGE:"change"},Of={onBlur:"onBlur",onChange:"onChange",onSubmit:"onSubmit",onTouched:"onTouched",all:"all"},Jg={max:"max",min:"min",maxLength:"maxLength",minLength:"minLength",pattern:"pattern",required:"required",validate:"validate"},tpt=Mn.default.createContext(null),rT=()=>Mn.default.useContext(tpt),nT=e=>{let n=e,{children:t}=n,r=xn(n,["children"]);return Mn.default.createElement(tpt.Provider,{value:r},t)},rpt=(e,t,r,n=!0)=>{let o={defaultValues:t._defaultValues};for(let i in e)Object.defineProperty(o,i,{get:()=>{let a=i;return t._proxyFormState[a]!==Of.all&&(t._proxyFormState[a]=!n||Of.all),r&&(r[a]=!0),e[a]}});return o},Ece=typeof window!="undefined"?G9.useLayoutEffect:G9.useEffect;function Ljr(e){let t=rT(),{control:r=t.control,disabled:n,name:o,exact:i}=e||{},[a,u]=Mn.default.useState(r._formState),d=Mn.default.useRef({isDirty:!1,isLoading:!1,dirtyFields:!1,touchedFields:!1,validatingFields:!1,isValidating:!1,isValid:!1,errors:!1});return Ece(()=>r._subscribe({name:o,formState:d.current,exact:i,callback:h=>{!n&&u(Te(Te({},r._formState),h))}}),[o,n,i]),Mn.default.useEffect(()=>{d.current.isValid&&r._setValid(!0)},[r]),Mn.default.useMemo(()=>rpt(a,r,d.current,!1),[a,r])}var mm=e=>typeof e=="string",npt=(e,t,r,n,o)=>mm(e)?(n&&t.watch.add(e),pr(r,e,o)):Array.isArray(e)?e.map(i=>(n&&t.watch.add(i),pr(r,i))):(n&&(t.watchAll=!0),r);function kjr(e){let t=rT(),{control:r=t.control,name:n,defaultValue:o,disabled:i,exact:a}=e||{},u=Mn.default.useRef(o),[d,h]=Mn.default.useState(r._getWatch(n,u.current));return Ece(()=>r._subscribe({name:n,formState:{values:!0},exact:a,callback:v=>!i&&h(npt(n,r._names,v.values||r._formValues,!1,u.current))}),[n,r,i,a]),Mn.default.useEffect(()=>r._removeUnmounted()),d}function Rjr(e){let t=rT(),{name:r,disabled:n,control:o=t.control,shouldUnregister:i}=e,a=Jct(o._names.array,r),u=kjr({control:o,name:r,defaultValue:pr(o._formValues,r,pr(o._defaultValues,r,e.defaultValue)),exact:!0}),d=Ljr({control:o,name:r,exact:!0}),h=Mn.default.useRef(e),v=Mn.default.useRef(o.register(r,Te(Mt(Te({},e.rules),{value:u}),yp(e.disabled)?{disabled:e.disabled}:{}))),b=Mn.default.useMemo(()=>Object.defineProperties({},{invalid:{enumerable:!0,get:()=>!!pr(d.errors,r)},isDirty:{enumerable:!0,get:()=>!!pr(d.dirtyFields,r)},isTouched:{enumerable:!0,get:()=>!!pr(d.touchedFields,r)},isValidating:{enumerable:!0,get:()=>!!pr(d.validatingFields,r)},error:{enumerable:!0,get:()=>pr(d.errors,r)}}),[d,r]),x=Mn.default.useCallback(k=>v.current.onChange({target:{value:Qct(k),name:r},type:F9.CHANGE}),[r]),M=Mn.default.useCallback(()=>v.current.onBlur({target:{value:pr(o._formValues,r),name:r},type:F9.BLUR}),[r,o._formValues]),O=Mn.default.useCallback(k=>{let R=pr(o._fields,r);R&&k&&(R._f.ref={focus:()=>k.focus(),select:()=>k.select(),setCustomValidity:q=>k.setCustomValidity(q),reportValidity:()=>k.reportValidity()})},[o._fields,r]),D=Mn.default.useMemo(()=>Mt(Te({name:r,value:u},yp(n)||d.disabled?{disabled:d.disabled||n}:{}),{onChange:x,onBlur:M,ref:O}),[r,n,d.disabled,x,M,O,u]);return Mn.default.useEffect(()=>{let k=o._options.shouldUnregister||i;o.register(r,Te(Te({},h.current.rules),yp(h.current.disabled)?{disabled:h.current.disabled}:{}));let R=(q,B)=>{let G=pr(o._fields,q);G&&G._f&&(G._f.mount=B)};if(R(r,!0),k){let q=ba(pr(o._options.defaultValues,r));mi(o._defaultValues,r,q),oa(pr(o._formValues,r))&&mi(o._formValues,r,q)}return!a&&o.register(r),()=>{(a?k&&!o._state.action:k)?o.unregister(r):R(r,!1)}},[r,o,a,i]),Mn.default.useEffect(()=>{o._setDisabledField({disabled:n,name:r})},[n,r,o]),Mn.default.useMemo(()=>({field:D,formState:d,fieldState:b}),[D,d,b])}var oT=e=>e.render(Rjr(e));var jjr=(e,t,r,n,o)=>t?Mt(Te({},r[e]),{types:Mt(Te({},r[e]&&r[e].types?r[e].types:{}),{[n]:o||!0})}):{},Bc=e=>Array.isArray(e)?e:[e],Bct=()=>{let e=[];return{get observers(){return e},next:o=>{for(let i of e)i.next&&i.next(o)},subscribe:o=>(e.push(o),{unsubscribe:()=>{e=e.filter(i=>i!==o)}}),unsubscribe:()=>{e=[]}}},yce=e=>Qu(e)||!Xct(e);function j0(e,t){if(yce(e)||yce(t))return e===t;if(Db(e)&&Db(t))return e.getTime()===t.getTime();let r=Object.keys(e),n=Object.keys(t);if(r.length!==n.length)return!1;for(let o of r){let i=e[o];if(!n.includes(o))return!1;if(o!=="ref"){let a=t[o];if(Db(i)&&Db(a)||es(i)&&es(a)||Array.isArray(i)&&Array.isArray(a)?!j0(i,a):i!==a)return!1}}return!0}var bu=e=>es(e)&&!Object.keys(e).length,Sce=e=>e.type==="file",Vd=e=>typeof e=="function",U9=e=>{if(!xce)return!1;let t=e?e.ownerDocument:0;return e instanceof(t&&t.defaultView?t.defaultView.HTMLElement:HTMLElement)},opt=e=>e.type==="select-multiple",Tce=e=>e.type==="radio",qjr=e=>Tce(e)||GP(e),uce=e=>U9(e)&&e.isConnected;function zjr(e,t){let r=t.slice(0,-1).length,n=0;for(;n<r;)e=oa(e)?n++:e[t[n++]];return e}function Fjr(e){for(let t in e)if(e.hasOwnProperty(t)&&!oa(e[t]))return!1;return!0}function _s(e,t){let r=Array.isArray(t)?t:wce(t)?[t]:ept(t),n=r.length===1?e:zjr(e,r),o=r.length-1,i=r[o];return n&&delete n[i],o!==0&&(es(n)&&bu(n)||Array.isArray(n)&&Fjr(n))&&_s(e,r.slice(0,-1)),e}var ipt=e=>{for(let t in e)if(Vd(e[t]))return!0;return!1};function B9(e,t={}){let r=Array.isArray(e);if(es(e)||r)for(let n in e)Array.isArray(e[n])||es(e[n])&&!ipt(e[n])?(t[n]=Array.isArray(e[n])?[]:{},B9(e[n],t[n])):Qu(e[n])||(t[n]=!0);return t}function apt(e,t,r){let n=Array.isArray(e);if(es(e)||n)for(let o in e)Array.isArray(e[o])||es(e[o])&&!ipt(e[o])?oa(t)||yce(r[o])?r[o]=Array.isArray(e[o])?B9(e[o],[]):Te({},B9(e[o])):apt(e[o],Qu(t)?{}:t[o],r[o]):r[o]=!j0(e[o],t[o]);return r}var BP=(e,t)=>apt(e,t,B9(t)),Vct={value:!1,isValid:!1},Gct={value:!0,isValid:!0},spt=e=>{if(Array.isArray(e)){if(e.length>1){let t=e.filter(r=>r&&r.checked&&!r.disabled).map(r=>r.value);return{value:t,isValid:!!t.length}}return e[0].checked&&!e[0].disabled?e[0].attributes&&!oa(e[0].attributes.value)?oa(e[0].value)||e[0].value===""?Gct:{value:e[0].value,isValid:!0}:Gct:Vct}return Vct},lpt=(e,{valueAsNumber:t,valueAsDate:r,setValueAs:n})=>oa(e)?e:t?e===""?NaN:e&&+e:r&&mm(e)?new Date(e):n?n(e):e,Hct={isValid:!1,value:null},upt=e=>Array.isArray(e)?e.reduce((t,r)=>r&&r.checked&&!r.disabled?{isValid:!0,value:r.value}:t,Hct):Hct;function Wct(e){let t=e.ref;return Sce(t)?t.files:Tce(t)?upt(e.refs).value:opt(t)?[...t.selectedOptions].map(({value:r})=>r):GP(t)?spt(e.refs).value:lpt(oa(t.value)?e.ref.value:t.value,e)}var Ujr=(e,t,r,n)=>{let o={};for(let i of e){let a=pr(t,i);a&&mi(o,i,a._f)}return{criteriaMode:r,names:[...e],fields:o,shouldUseNativeValidation:n}},V9=e=>e instanceof RegExp,VP=e=>oa(e)?e:V9(e)?e.source:es(e)?V9(e.value)?e.value.source:e.value:e,eT=e=>({isOnSubmit:!e||e===Of.onSubmit,isOnBlur:e===Of.onBlur,isOnChange:e===Of.onChange,isOnAll:e===Of.all,isOnTouch:e===Of.onTouched}),$ct="AsyncFunction",Bjr=e=>!!e&&!!e.validate&&!!(Vd(e.validate)&&e.validate.constructor.name===$ct||es(e.validate)&&Object.values(e.validate).find(t=>t.constructor.name===$ct)),Vjr=e=>e.mount&&(e.required||e.min||e.max||e.maxLength||e.minLength||e.pattern||e.validate),_ce=(e,t,r)=>!r&&(t.watchAll||t.watch.has(e)||[...t.watch].some(n=>e.startsWith(n)&&/^\.\w+/.test(e.slice(n.length)))),tT=(e,t,r,n)=>{for(let i of r||Object.keys(e)){let a=pr(e,i);if(a){let o=a,{_f:u}=o,d=xn(o,["_f"]);if(u){if(u.refs&&u.refs[0]&&t(u.refs[0],i)&&!n)return!0;if(u.ref&&t(u.ref,u.name)&&!n)return!0;if(tT(d,t))break}else if(es(d)&&tT(d,t))break}}};function Zct(e,t,r){let n=pr(e,r);if(n||wce(r))return{error:n,name:r};let o=r.split(".");for(;o.length;){let i=o.join("."),a=pr(t,i),u=pr(e,i);if(a&&!Array.isArray(a)&&r!==i)return{name:r};if(u&&u.type)return{name:i,error:u};o.pop()}return{name:r}}var Gjr=(e,t,r,n)=>{r(e);let a=e,{name:o}=a,i=xn(a,["name"]);return bu(i)||Object.keys(i).length>=Object.keys(t).length||Object.keys(i).find(u=>t[u]===(!n||Of.all))},Hjr=(e,t,r)=>!e||!t||e===t||Bc(e).some(n=>n&&(r?n===t:n.startsWith(t)||t.startsWith(n))),Wjr=(e,t,r,n,o)=>o.isOnAll?!1:!r&&o.isOnTouch?!(t||e):(r?n.isOnBlur:o.isOnBlur)?!e:(r?n.isOnChange:o.isOnChange)?e:!0,$jr=(e,t)=>!HP(pr(e,t)).length&&_s(e,t),cpt=(e,t,r)=>{let n=Bc(pr(e,r));return mi(n,"root",t[r]),mi(e,r,n),e},z9=e=>mm(e);function Yct(e,t,r="validate"){if(z9(e)||Array.isArray(e)&&e.every(z9)||yp(e)&&!e)return{type:r,message:z9(e)?e:"",ref:t}}var J2=e=>es(e)&&!V9(e)?e:{value:e,message:""},bce=(e,t,r,n,o,i)=>gt(null,null,function*(){let{ref:a,refs:u,required:d,maxLength:h,minLength:v,min:b,max:x,pattern:M,validate:O,name:D,valueAsNumber:k,mount:R}=e._f,q=pr(r,D);if(!R||t.has(D))return{};let B=u?u[0]:a,G=Se=>{o&&B.reportValidity&&(B.setCustomValidity(yp(Se)?"":Se||""),B.reportValidity())},re={},Q=Tce(a),ie=GP(a),me=Q||ie,ve=(k||Sce(a))&&oa(a.value)&&oa(q)||U9(a)&&a.value===""||q===""||Array.isArray(q)&&!q.length,ye=jjr.bind(null,D,n,re),we=(Se,ge,Re,Je=Jg.maxLength,tt=Jg.minLength)=>{let Et=Se?ge:Re;re[D]=Te({type:Se?Je:tt,message:Et,ref:a},ye(Se?Je:tt,Et))};if(i?!Array.isArray(q)||!q.length:d&&(!me&&(ve||Qu(q))||yp(q)&&!q||ie&&!spt(u).isValid||Q&&!upt(u).isValid)){let{value:Se,message:ge}=z9(d)?{value:!!d,message:d}:J2(d);if(Se&&(re[D]=Te({type:Jg.required,message:ge,ref:B},ye(Jg.required,ge)),!n))return G(ge),re}if(!ve&&(!Qu(b)||!Qu(x))){let Se,ge,Re=J2(x),Je=J2(b);if(!Qu(q)&&!isNaN(q)){let tt=a.valueAsNumber||q&&+q;Qu(Re.value)||(Se=tt>Re.value),Qu(Je.value)||(ge=tt<Je.value)}else{let tt=a.valueAsDate||new Date(q),Et=Lt=>new Date(new Date().toDateString()+" "+Lt),Xe=a.type=="time",Pt=a.type=="week";mm(Re.value)&&q&&(Se=Xe?Et(q)>Et(Re.value):Pt?q>Re.value:tt>new Date(Re.value)),mm(Je.value)&&q&&(ge=Xe?Et(q)<Et(Je.value):Pt?q<Je.value:tt<new Date(Je.value))}if((Se||ge)&&(we(!!Se,Re.message,Je.message,Jg.max,Jg.min),!n))return G(re[D].message),re}if((h||v)&&!ve&&(mm(q)||i&&Array.isArray(q))){let Se=J2(h),ge=J2(v),Re=!Qu(Se.value)&&q.length>+Se.value,Je=!Qu(ge.value)&&q.length<+ge.value;if((Re||Je)&&(we(Re,Se.message,ge.message),!n))return G(re[D].message),re}if(M&&!ve&&mm(q)){let{value:Se,message:ge}=J2(M);if(V9(Se)&&!q.match(Se)&&(re[D]=Te({type:Jg.pattern,message:ge,ref:a},ye(Jg.pattern,ge)),!n))return G(ge),re}if(O){if(Vd(O)){let Se=yield O(q,r),ge=Yct(Se,B);if(ge&&(re[D]=Te(Te({},ge),ye(Jg.validate,ge.message)),!n))return G(ge.message),re}else if(es(O)){let Se={};for(let ge in O){if(!bu(Se)&&!n)break;let Re=Yct(yield O[ge](q,r),B,ge);Re&&(Se=Te(Te({},Re),ye(ge,Re.message)),G(Re.message),n&&(re[D]=Se))}if(!bu(Se)&&(re[D]=Te({ref:B},Se),!n))return re}}return G(!0),re}),Zjr={mode:Of.onSubmit,reValidateMode:Of.onChange,shouldFocusError:!0};function Yjr(e={}){let t=Te(Te({},Zjr),e),r={submitCount:0,isDirty:!1,isReady:!1,isLoading:Vd(t.defaultValues),isValidating:!1,isSubmitted:!1,isSubmitting:!1,isSubmitSuccessful:!1,isValid:!1,touchedFields:{},dirtyFields:{},validatingFields:{},errors:t.errors||{},disabled:t.disabled||!1},n={},o=es(t.defaultValues)||es(t.values)?ba(t.defaultValues||t.values)||{}:{},i=t.shouldUnregister?{}:ba(o),a={action:!1,mount:!1,watch:!1},u={mount:new Set,disabled:new Set,unMount:new Set,array:new Set,watch:new Set},d,h=0,v={isDirty:!1,dirtyFields:!1,validatingFields:!1,touchedFields:!1,isValidating:!1,isValid:!1,errors:!1},b=Te({},v),x={array:Bct(),state:Bct()},M=eT(t.mode),O=eT(t.reValidateMode),D=t.criteriaMode===Of.all,k=Ce=>Ze=>{clearTimeout(h),h=setTimeout(Ce,Ze)},R=Ce=>gt(null,null,function*(){if(!t.disabled&&(v.isValid||b.isValid||Ce)){let Ze=t.resolver?bu((yield ve()).errors):yield we(n,!0);Ze!==r.isValid&&x.state.next({isValid:Ze})}}),q=(Ce,Ze)=>{!t.disabled&&(v.isValidating||v.validatingFields||b.isValidating||b.validatingFields)&&((Ce||Array.from(u.mount)).forEach(et=>{et&&(Ze?mi(r.validatingFields,et,Ze):_s(r.validatingFields,et))}),x.state.next({validatingFields:r.validatingFields,isValidating:!bu(r.validatingFields)}))},B=(Ce,Ze=[],et,qt,Bt=!0,jt=!0)=>{if(qt&&et&&!t.disabled){if(a.action=!0,jt&&Array.isArray(pr(n,Ce))){let $t=et(pr(n,Ce),qt.argA,qt.argB);Bt&&mi(n,Ce,$t)}if(jt&&Array.isArray(pr(r.errors,Ce))){let $t=et(pr(r.errors,Ce),qt.argA,qt.argB);Bt&&mi(r.errors,Ce,$t),$jr(r.errors,Ce)}if((v.touchedFields||b.touchedFields)&&jt&&Array.isArray(pr(r.touchedFields,Ce))){let $t=et(pr(r.touchedFields,Ce),qt.argA,qt.argB);Bt&&mi(r.touchedFields,Ce,$t)}(v.dirtyFields||b.dirtyFields)&&(r.dirtyFields=BP(o,i)),x.state.next({name:Ce,isDirty:ge(Ce,Ze),dirtyFields:r.dirtyFields,errors:r.errors,isValid:r.isValid})}else mi(i,Ce,Ze)},G=(Ce,Ze)=>{mi(r.errors,Ce,Ze),x.state.next({errors:r.errors})},re=Ce=>{r.errors=Ce,x.state.next({errors:r.errors,isValid:!1})},Q=(Ce,Ze,et,qt)=>{let Bt=pr(n,Ce);if(Bt){let jt=pr(i,Ce,oa(et)?pr(o,Ce):et);oa(jt)||qt&&qt.defaultChecked||Ze?mi(i,Ce,Ze?jt:Wct(Bt._f)):tt(Ce,jt),a.mount&&R()}},ie=(Ce,Ze,et,qt,Bt)=>{let jt=!1,$t=!1,an={name:Ce};if(!t.disabled){if(!et||qt){(v.isDirty||b.isDirty)&&($t=r.isDirty,r.isDirty=an.isDirty=ge(),jt=$t!==an.isDirty);let gn=j0(pr(o,Ce),Ze);$t=!!pr(r.dirtyFields,Ce),gn?_s(r.dirtyFields,Ce):mi(r.dirtyFields,Ce,!0),an.dirtyFields=r.dirtyFields,jt=jt||(v.dirtyFields||b.dirtyFields)&&$t!==!gn}if(et){let gn=pr(r.touchedFields,Ce);gn||(mi(r.touchedFields,Ce,et),an.touchedFields=r.touchedFields,jt=jt||(v.touchedFields||b.touchedFields)&&gn!==et)}jt&&Bt&&x.state.next(an)}return jt?an:{}},me=(Ce,Ze,et,qt)=>{let Bt=pr(r.errors,Ce),jt=(v.isValid||b.isValid)&&yp(Ze)&&r.isValid!==Ze;if(t.delayError&&et?(d=k(()=>G(Ce,et)),d(t.delayError)):(clearTimeout(h),d=null,et?mi(r.errors,Ce,et):_s(r.errors,Ce)),(et?!j0(Bt,et):Bt)||!bu(qt)||jt){let $t=Mt(Te(Te({},qt),jt&&yp(Ze)?{isValid:Ze}:{}),{errors:r.errors,name:Ce});r=Te(Te({},r),$t),x.state.next($t)}},ve=Ce=>gt(null,null,function*(){q(Ce,!0);let Ze=yield t.resolver(i,t.context,Ujr(Ce||u.mount,n,t.criteriaMode,t.shouldUseNativeValidation));return q(Ce),Ze}),ye=Ce=>gt(null,null,function*(){let{errors:Ze}=yield ve(Ce);if(Ce)for(let et of Ce){let qt=pr(Ze,et);qt?mi(r.errors,et,qt):_s(r.errors,et)}else r.errors=Ze;return Ze}),we=(qt,Bt,...jt)=>gt(null,[qt,Bt,...jt],function*(Ce,Ze,et={valid:!0}){for(let an in Ce){let gn=Ce[an];if(gn){let $t=gn,{_f:Rn}=$t,wa=xn($t,["_f"]);if(Rn){let Ye=u.array.has(Rn.name),le=gn._f&&Bjr(gn._f);le&&v.validatingFields&&q([an],!0);let ue=yield bce(gn,u.disabled,i,D,t.shouldUseNativeValidation&&!Ze,Ye);if(le&&v.validatingFields&&q([an]),ue[Rn.name]&&(et.valid=!1,Ze))break;!Ze&&(pr(ue,Rn.name)?Ye?cpt(r.errors,ue,Rn.name):mi(r.errors,Rn.name,ue[Rn.name]):_s(r.errors,Rn.name))}!bu(wa)&&(yield we(wa,Ze,et))}}return et.valid}),Se=()=>{for(let Ce of u.unMount){let Ze=pr(n,Ce);Ze&&(Ze._f.refs?Ze._f.refs.every(et=>!uce(et)):!uce(Ze._f.ref))&&st(Ce)}u.unMount=new Set},ge=(Ce,Ze)=>!t.disabled&&(Ce&&Ze&&mi(i,Ce,Ze),!j0(nt(),o)),Re=(Ce,Ze,et)=>npt(Ce,u,Te({},a.mount?i:oa(Ze)?o:mm(Ce)?{[Ce]:Ze}:Ze),et,Ze),Je=Ce=>HP(pr(a.mount?i:o,Ce,t.shouldUnregister?pr(o,Ce,[]):[])),tt=(Ce,Ze,et={})=>{let qt=pr(n,Ce),Bt=Ze;if(qt){let jt=qt._f;jt&&(!jt.disabled&&mi(i,Ce,lpt(Ze,jt)),Bt=U9(jt.ref)&&Qu(Ze)?"":Ze,opt(jt.ref)?[...jt.ref.options].forEach($t=>$t.selected=Bt.includes($t.value)):jt.refs?GP(jt.ref)?jt.refs.length>1?jt.refs.forEach($t=>(!$t.defaultChecked||!$t.disabled)&&($t.checked=Array.isArray(Bt)?!!Bt.find(an=>an===$t.value):Bt===$t.value)):jt.refs[0]&&(jt.refs[0].checked=!!Bt):jt.refs.forEach($t=>$t.checked=$t.value===Bt):Sce(jt.ref)?jt.ref.value="":(jt.ref.value=Bt,jt.ref.type||x.state.next({name:Ce,values:ba(i)})))}(et.shouldDirty||et.shouldTouch)&&ie(Ce,Bt,et.shouldTouch,et.shouldDirty,!0),et.shouldValidate&&Gt(Ce)},Et=(Ce,Ze,et)=>{for(let qt in Ze){let Bt=Ze[qt],jt=`${Ce}.${qt}`,$t=pr(n,jt);(u.array.has(Ce)||es(Bt)||$t&&!$t._f)&&!Db(Bt)?Et(jt,Bt,et):tt(jt,Bt,et)}},Xe=(Ce,Ze,et={})=>{let qt=pr(n,Ce),Bt=u.array.has(Ce),jt=ba(Ze);mi(i,Ce,jt),Bt?(x.array.next({name:Ce,values:ba(i)}),(v.isDirty||v.dirtyFields||b.isDirty||b.dirtyFields)&&et.shouldDirty&&x.state.next({name:Ce,dirtyFields:BP(o,i),isDirty:ge(Ce,jt)})):qt&&!qt._f&&!Qu(jt)?Et(Ce,jt,et):tt(Ce,jt,et),_ce(Ce,u)&&x.state.next(Te({},r)),x.state.next({name:a.mount?Ce:void 0,values:ba(i)})},Pt=Ce=>gt(null,null,function*(){a.mount=!0;let Ze=Ce.target,et=Ze.name,qt=!0,Bt=pr(n,et),jt=$t=>{qt=Number.isNaN($t)||Db($t)&&isNaN($t.getTime())||j0($t,pr(i,et,$t))};if(Bt){let $t,an,gn=Ze.type?Wct(Bt._f):Qct(Ce),Rn=Ce.type===F9.BLUR||Ce.type===F9.FOCUS_OUT,wa=!Vjr(Bt._f)&&!t.resolver&&!pr(r.errors,et)&&!Bt._f.deps||Wjr(Rn,pr(r.touchedFields,et),r.isSubmitted,O,M),Ye=_ce(et,u,Rn);mi(i,et,gn),Rn?(Bt._f.onBlur&&Bt._f.onBlur(Ce),d&&d(0)):Bt._f.onChange&&Bt._f.onChange(Ce);let le=ie(et,gn,Rn),ue=!bu(le)||Ye;if(!Rn&&x.state.next({name:et,type:Ce.type,values:ba(i)}),wa)return(v.isValid||b.isValid)&&(t.mode==="onBlur"?Rn&&R():Rn||R()),ue&&x.state.next(Te({name:et},Ye?{}:le));if(!Rn&&Ye&&x.state.next(Te({},r)),t.resolver){let{errors:Y}=yield ve([et]);if(jt(gn),qt){let J=Zct(r.errors,n,et),de=Zct(Y,n,J.name||et);$t=de.error,et=de.name,an=bu(Y)}}else q([et],!0),$t=(yield bce(Bt,u.disabled,i,D,t.shouldUseNativeValidation))[et],q([et]),jt(gn),qt&&($t?an=!1:(v.isValid||b.isValid)&&(an=yield we(n,!0)));qt&&(Bt._f.deps&&Gt(Bt._f.deps),me(et,an,$t,le))}}),Lt=(Ce,Ze)=>{if(pr(r.errors,Ze)&&Ce.focus)return Ce.focus(),1},Gt=(et,...qt)=>gt(null,[et,...qt],function*(Ce,Ze={}){let Bt,jt,$t=Bc(Ce);if(t.resolver){let an=yield ye(oa(Ce)?Ce:$t);Bt=bu(an),jt=Ce?!$t.some(gn=>pr(an,gn)):Bt}else Ce?(jt=(yield Promise.all($t.map(an=>gt(null,null,function*(){let gn=pr(n,an);return yield we(gn&&gn._f?{[an]:gn}:gn)})))).every(Boolean),!(!jt&&!r.isValid)&&R()):jt=Bt=yield we(n);return x.state.next(Mt(Te(Te({},!mm(Ce)||(v.isValid||b.isValid)&&Bt!==r.isValid?{}:{name:Ce}),t.resolver||!Ce?{isValid:Bt}:{}),{errors:r.errors})),Ze.shouldFocus&&!jt&&tT(n,Lt,Ce?$t:u.mount),jt}),nt=Ce=>{let Ze=Te({},a.mount?i:o);return oa(Ce)?Ze:mm(Ce)?pr(Ze,Ce):Ce.map(et=>pr(Ze,et))},ct=(Ce,Ze)=>({invalid:!!pr((Ze||r).errors,Ce),isDirty:!!pr((Ze||r).dirtyFields,Ce),error:pr((Ze||r).errors,Ce),isValidating:!!pr(r.validatingFields,Ce),isTouched:!!pr((Ze||r).touchedFields,Ce)}),_t=Ce=>{Ce&&Bc(Ce).forEach(Ze=>_s(r.errors,Ze)),x.state.next({errors:Ce?r.errors:{}})},We=(Ce,Ze,et)=>{let qt=(pr(n,Ce,{_f:{}})._f||{}).ref,Rn=pr(r.errors,Ce)||{},{ref:jt,message:$t,type:an}=Rn,gn=xn(Rn,["ref","message","type"]);mi(r.errors,Ce,Mt(Te(Te({},gn),Ze),{ref:qt})),x.state.next({name:Ce,errors:r.errors,isValid:!1}),et&&et.shouldFocus&&qt&&qt.focus&&qt.focus()},De=(Ce,Ze)=>Vd(Ce)?x.state.subscribe({next:et=>Ce(Re(void 0,Ze),et)}):Re(Ce,Ze,!0),Qe=Ce=>x.state.subscribe({next:Ze=>{Hjr(Ce.name,Ze.name,Ce.exact)&&Gjr(Ze,Ce.formState||v,Cr,Ce.reRenderRoot)&&Ce.callback(Te(Te({values:Te({},i)},r),Ze))}}).unsubscribe,Ge=Ce=>(a.mount=!0,b=Te(Te({},b),Ce.formState),Qe(Mt(Te({},Ce),{formState:b}))),st=(Ce,Ze={})=>{for(let et of Ce?Bc(Ce):u.mount)u.mount.delete(et),u.array.delete(et),Ze.keepValue||(_s(n,et),_s(i,et)),!Ze.keepError&&_s(r.errors,et),!Ze.keepDirty&&_s(r.dirtyFields,et),!Ze.keepTouched&&_s(r.touchedFields,et),!Ze.keepIsValidating&&_s(r.validatingFields,et),!t.shouldUnregister&&!Ze.keepDefaultValue&&_s(o,et);x.state.next({values:ba(i)}),x.state.next(Te(Te({},r),Ze.keepDirty?{isDirty:ge()}:{})),!Ze.keepIsValid&&R()},pt=({disabled:Ce,name:Ze})=>{(yp(Ce)&&a.mount||Ce||u.disabled.has(Ze))&&(Ce?u.disabled.add(Ze):u.disabled.delete(Ze))},Rt=(Ce,Ze={})=>{let et=pr(n,Ce),qt=yp(Ze.disabled)||yp(t.disabled);return mi(n,Ce,Mt(Te({},et||{}),{_f:Te(Mt(Te({},et&&et._f?et._f:{ref:{name:Ce}}),{name:Ce,mount:!0}),Ze)})),u.mount.add(Ce),et?pt({disabled:yp(Ze.disabled)?Ze.disabled:t.disabled,name:Ce}):Q(Ce,!0,Ze.value),Mt(Te(Te({},qt?{disabled:Ze.disabled||t.disabled}:{}),t.progressive?{required:!!Ze.required,min:VP(Ze.min),max:VP(Ze.max),minLength:VP(Ze.minLength),maxLength:VP(Ze.maxLength),pattern:VP(Ze.pattern)}:{}),{name:Ce,onChange:Pt,onBlur:Pt,ref:Bt=>{if(Bt){Rt(Ce,Ze),et=pr(n,Ce);let jt=oa(Bt.value)&&Bt.querySelectorAll&&Bt.querySelectorAll("input,select,textarea")[0]||Bt,$t=qjr(jt),an=et._f.refs||[];if($t?an.find(gn=>gn===jt):jt===et._f.ref)return;mi(n,Ce,{_f:Te(Te({},et._f),$t?{refs:[...an.filter(uce),jt,...(Array.isArray(pr(o,Ce))?[{}]:[])],ref:{type:jt.type,name:Ce}}:{ref:jt})}),Q(Ce,!1,void 0,jt)}else et=pr(n,Ce,{}),et._f&&(et._f.mount=!1),(t.shouldUnregister||Ze.shouldUnregister)&&!(Jct(u.array,Ce)&&a.action)&&u.unMount.add(Ce)}})},St=()=>t.shouldFocusError&&tT(n,Lt,u.mount),Ot=Ce=>{yp(Ce)&&(x.state.next({disabled:Ce}),tT(n,(Ze,et)=>{let qt=pr(n,et);qt&&(Ze.disabled=qt._f.disabled||Ce,Array.isArray(qt._f.refs)&&qt._f.refs.forEach(Bt=>{Bt.disabled=qt._f.disabled||Ce}))},0,!1))},sr=(Ce,Ze)=>et=>gt(null,null,function*(){let qt;et&&(et.preventDefault&&et.preventDefault(),et.persist&&et.persist());let Bt=ba(i);if(x.state.next({isSubmitting:!0}),t.resolver){let{errors:jt,values:$t}=yield ve();r.errors=jt,Bt=$t}else yield we(n);if(u.disabled.size)for(let jt of u.disabled)mi(Bt,jt,void 0);if(_s(r.errors,"root"),bu(r.errors)){x.state.next({errors:{}});try{yield Ce(Bt,et)}catch(jt){qt=jt}}else Ze&&(yield Ze(Te({},r.errors),et)),St(),setTimeout(St);if(x.state.next({isSubmitted:!0,isSubmitting:!1,isSubmitSuccessful:bu(r.errors)&&!qt,submitCount:r.submitCount+1,errors:r.errors}),qt)throw qt}),Ft=(Ce,Ze={})=>{pr(n,Ce)&&(oa(Ze.defaultValue)?Xe(Ce,ba(pr(o,Ce))):(Xe(Ce,Ze.defaultValue),mi(o,Ce,ba(Ze.defaultValue))),Ze.keepTouched||_s(r.touchedFields,Ce),Ze.keepDirty||(_s(r.dirtyFields,Ce),r.isDirty=Ze.defaultValue?ge(Ce,ba(pr(o,Ce))):ge()),Ze.keepError||(_s(r.errors,Ce),v.isValid&&R()),x.state.next(Te({},r)))},Jt=(Ce,Ze={})=>{let et=Ce?ba(Ce):o,qt=ba(et),Bt=bu(Ce),jt=Bt?o:qt;if(Ze.keepDefaultValues||(o=et),!Ze.keepValues){if(Ze.keepDirtyValues){let $t=new Set([...u.mount,...Object.keys(BP(o,i))]);for(let an of Array.from($t))pr(r.dirtyFields,an)?mi(jt,an,pr(i,an)):Xe(an,pr(jt,an))}else{if(xce&&oa(Ce))for(let $t of u.mount){let an=pr(n,$t);if(an&&an._f){let gn=Array.isArray(an._f.refs)?an._f.refs[0]:an._f.ref;if(U9(gn)){let Rn=gn.closest("form");if(Rn){Rn.reset();break}}}}for(let $t of u.mount)Xe($t,pr(jt,$t))}i=ba(jt),x.array.next({values:Te({},jt)}),x.state.next({values:Te({},jt)})}u={mount:Ze.keepDirtyValues?u.mount:new Set,unMount:new Set,array:new Set,disabled:new Set,watch:new Set,watchAll:!1,focus:""},a.mount=!v.isValid||!!Ze.keepIsValid||!!Ze.keepDirtyValues,a.watch=!!t.shouldUnregister,x.state.next({submitCount:Ze.keepSubmitCount?r.submitCount:0,isDirty:Bt?!1:Ze.keepDirty?r.isDirty:!!(Ze.keepDefaultValues&&!j0(Ce,o)),isSubmitted:Ze.keepIsSubmitted?r.isSubmitted:!1,dirtyFields:Bt?{}:Ze.keepDirtyValues?Ze.keepDefaultValues&&i?BP(o,i):r.dirtyFields:Ze.keepDefaultValues&&Ce?BP(o,Ce):Ze.keepDirty?r.dirtyFields:{},touchedFields:Ze.keepTouched?r.touchedFields:{},errors:Ze.keepErrors?r.errors:{},isSubmitSuccessful:Ze.keepIsSubmitSuccessful?r.isSubmitSuccessful:!1,isSubmitting:!1})},dr=(Ce,Ze)=>Jt(Vd(Ce)?Ce(i):Ce,Ze),Er=(Ce,Ze={})=>{let et=pr(n,Ce),qt=et&&et._f;if(qt){let Bt=qt.refs?qt.refs[0]:qt.ref;Bt.focus&&(Bt.focus(),Ze.shouldSelect&&Vd(Bt.select)&&Bt.select())}},Cr=Ce=>{r=Te(Te({},r),Ce)},qr={control:{register:Rt,unregister:st,getFieldState:ct,handleSubmit:sr,setError:We,_subscribe:Qe,_runSchema:ve,_getWatch:Re,_getDirty:ge,_setValid:R,_setFieldArray:B,_setDisabledField:pt,_setErrors:re,_getFieldArray:Je,_reset:Jt,_resetDefaultValues:()=>Vd(t.defaultValues)&&t.defaultValues().then(Ce=>{dr(Ce,t.resetOptions),x.state.next({isLoading:!1})}),_removeUnmounted:Se,_disableForm:Ot,_subjects:x,_proxyFormState:v,get _fields(){return n},get _formValues(){return i},get _state(){return a},set _state(Ce){a=Ce},get _defaultValues(){return o},get _names(){return u},set _names(Ce){u=Ce},get _formState(){return r},get _options(){return t},set _options(Ce){t=Te(Te({},t),Ce)}},subscribe:Ge,trigger:Gt,register:Rt,handleSubmit:sr,watch:De,setValue:Xe,getValues:nt,reset:dr,resetField:Ft,clearErrors:_t,unregister:st,setError:We,setFocus:Er,getFieldState:ct};return Mt(Te({},qr),{formControl:qr})}var R0=()=>{let e=typeof performance=="undefined"?Date.now():performance.now()*1e3;return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,t=>{let r=(Math.random()*16+e)%16|0;return(t=="x"?r:r&3|8).toString(16)})},cce=(e,t,r={})=>r.shouldFocus||oa(r.shouldFocus)?r.focusName||`${e}.${oa(r.focusIndex)?t:r.focusIndex}.`:"",pce=(e,t)=>[...e,...Bc(t)],fce=e=>Array.isArray(e)?e.map(()=>{}):void 0;function dce(e,t,r){return[...e.slice(0,t),...Bc(r),...e.slice(t)]}var hce=(e,t,r)=>Array.isArray(e)?(oa(e[r])&&(e[r]=void 0),e.splice(r,0,e.splice(t,1)[0]),e):[],mce=(e,t)=>[...Bc(t),...Bc(e)];function Kjr(e,t){let r=0,n=[...e];for(let o of t)n.splice(o-r,1),r++;return HP(n).length?n:[]}var gce=(e,t)=>oa(t)?[]:Kjr(e,Bc(t).sort((r,n)=>r-n)),vce=(e,t,r)=>{[e[t],e[r]]=[e[r],e[t]]},Kct=(e,t,r)=>(e[t]=r,e);function Ice(e){let t=rT(),{control:r=t.control,name:n,keyName:o="id",shouldUnregister:i,rules:a}=e,[u,d]=Mn.default.useState(r._getFieldArray(n)),h=Mn.default.useRef(r._getFieldArray(n).map(R0)),v=Mn.default.useRef(u),b=Mn.default.useRef(n),x=Mn.default.useRef(!1);b.current=n,v.current=u,r._names.array.add(n),a&&r.register(n,a),Mn.default.useEffect(()=>r._subjects.array.subscribe({next:({values:Q,name:ie})=>{if(ie===b.current||!ie){let me=pr(Q,b.current);Array.isArray(me)&&(d(me),h.current=me.map(R0))}}}).unsubscribe,[r]);let M=Mn.default.useCallback(Q=>{x.current=!0,r._setFieldArray(n,Q)},[r,n]),O=(Q,ie)=>{let me=Bc(ba(Q)),ve=pce(r._getFieldArray(n),me);r._names.focus=cce(n,ve.length-1,ie),h.current=pce(h.current,me.map(R0)),M(ve),d(ve),r._setFieldArray(n,ve,pce,{argA:fce(Q)})},D=(Q,ie)=>{let me=Bc(ba(Q)),ve=mce(r._getFieldArray(n),me);r._names.focus=cce(n,0,ie),h.current=mce(h.current,me.map(R0)),M(ve),d(ve),r._setFieldArray(n,ve,mce,{argA:fce(Q)})},k=Q=>{let ie=gce(r._getFieldArray(n),Q);h.current=gce(h.current,Q),M(ie),d(ie),!Array.isArray(pr(r._fields,n))&&mi(r._fields,n,void 0),r._setFieldArray(n,ie,gce,{argA:Q})},R=(Q,ie,me)=>{let ve=Bc(ba(ie)),ye=dce(r._getFieldArray(n),Q,ve);r._names.focus=cce(n,Q,me),h.current=dce(h.current,Q,ve.map(R0)),M(ye),d(ye),r._setFieldArray(n,ye,dce,{argA:Q,argB:fce(ie)})},q=(Q,ie)=>{let me=r._getFieldArray(n);vce(me,Q,ie),vce(h.current,Q,ie),M(me),d(me),r._setFieldArray(n,me,vce,{argA:Q,argB:ie},!1)},B=(Q,ie)=>{let me=r._getFieldArray(n);hce(me,Q,ie),hce(h.current,Q,ie),M(me),d(me),r._setFieldArray(n,me,hce,{argA:Q,argB:ie},!1)},G=(Q,ie)=>{let me=ba(ie),ve=Kct(r._getFieldArray(n),Q,me);h.current=[...ve].map((ye,we)=>!ye||we===Q?R0():h.current[we]),M(ve),d([...ve]),r._setFieldArray(n,ve,Kct,{argA:Q,argB:me},!0,!1)},re=Q=>{let ie=Bc(ba(Q));h.current=ie.map(R0),M([...ie]),d([...ie]),r._setFieldArray(n,[...ie],me=>me,{},!0,!1)};return Mn.default.useEffect(()=>{if(r._state.action=!1,_ce(n,r._names)&&r._subjects.state.next(Te({},r._formState)),x.current&&(!eT(r._options.mode).isOnSubmit||r._formState.isSubmitted)&&!eT(r._options.reValidateMode).isOnSubmit)if(r._options.resolver)r._runSchema([n]).then(Q=>{let ie=pr(Q.errors,n),me=pr(r._formState.errors,n);(me?!ie&&me.type||ie&&(me.type!==ie.type||me.message!==ie.message):ie&&ie.type)&&(ie?mi(r._formState.errors,n,ie):_s(r._formState.errors,n),r._subjects.state.next({errors:r._formState.errors}))});else{let Q=pr(r._fields,n);Q&&Q._f&&!(eT(r._options.reValidateMode).isOnSubmit&&eT(r._options.mode).isOnSubmit)&&bce(Q,r._names.disabled,r._formValues,r._options.criteriaMode===Of.all,r._options.shouldUseNativeValidation,!0).then(ie=>!bu(ie)&&r._subjects.state.next({errors:cpt(r._formState.errors,ie,n)}))}r._subjects.state.next({name:n,values:ba(r._formValues)}),r._names.focus&&tT(r._fields,(Q,ie)=>{if(r._names.focus&&ie.startsWith(r._names.focus)&&Q.focus)return Q.focus(),1}),r._names.focus="",r._setValid(),x.current=!1},[u,n,r]),Mn.default.useEffect(()=>(!pr(r._formValues,n)&&r._setFieldArray(n),()=>{let Q=(ie,me)=>{let ve=pr(r._fields,ie);ve&&ve._f&&(ve._f.mount=me)};r._options.shouldUnregister||i?r.unregister(n):Q(n,!1)}),[n,r,o,i]),{swap:Mn.default.useCallback(q,[M,n,r]),move:Mn.default.useCallback(B,[M,n,r]),prepend:Mn.default.useCallback(D,[M,n,r]),append:Mn.default.useCallback(O,[M,n,r]),remove:Mn.default.useCallback(k,[M,n,r]),insert:Mn.default.useCallback(R,[M,n,r]),update:Mn.default.useCallback(G,[M,n,r]),replace:Mn.default.useCallback(re,[M,n,r]),fields:Mn.default.useMemo(()=>u.map((Q,ie)=>Mt(Te({},Q),{[o]:h.current[ie]||R0()})),[u,o])}}function q0(e={}){let t=Mn.default.useRef(void 0),r=Mn.default.useRef(void 0),[n,o]=Mn.default.useState({isDirty:!1,isValidating:!1,isLoading:Vd(e.defaultValues),isSubmitted:!1,isSubmitting:!1,isSubmitSuccessful:!1,isValid:!1,submitCount:0,dirtyFields:{},touchedFields:{},validatingFields:{},errors:e.errors||{},disabled:e.disabled||!1,isReady:!1,defaultValues:Vd(e.defaultValues)?void 0:e.defaultValues});t.current||(t.current=Mt(Te({},e.formControl?e.formControl:Yjr(e)),{formState:n}),e.formControl&&e.defaultValues&&!Vd(e.defaultValues)&&e.formControl.reset(e.defaultValues,e.resetOptions));let i=t.current.control;return i._options=e,Ece(()=>{let a=i._subscribe({formState:i._proxyFormState,callback:()=>o(Te({},i._formState)),reRenderRoot:!0});return o(u=>Mt(Te({},u),{isReady:!0})),i._formState.isReady=!0,a},[i]),Mn.default.useEffect(()=>i._disableForm(e.disabled),[i,e.disabled]),Mn.default.useEffect(()=>{e.mode&&(i._options.mode=e.mode),e.reValidateMode&&(i._options.reValidateMode=e.reValidateMode),e.errors&&!bu(e.errors)&&i._setErrors(e.errors)},[i,e.errors,e.mode,e.reValidateMode]),Mn.default.useEffect(()=>{e.shouldUnregister&&i._subjects.state.next({values:i._getWatch()})},[i,e.shouldUnregister]),Mn.default.useEffect(()=>{if(i._proxyFormState.isDirty){let a=i._getDirty();a!==n.isDirty&&i._subjects.state.next({isDirty:a})}},[i,n.isDirty]),Mn.default.useEffect(()=>{e.values&&!j0(e.values,r.current)?(i._reset(e.values,i._options.resetOptions),r.current=e.values,o(a=>Te({},a))):i._resetDefaultValues()},[i,e.values]),Mn.default.useEffect(()=>{i._state.mount||(i._setValid(),i._state.mount=!0),i._state.watch&&(i._state.watch=!1,i._subjects.state.next(Te({},i._formState))),i._removeUnmounted()}),t.current.formState=rpt(n,i),t.current}var Cce=Z(xt(),1);var Lb=Z(xt(),1),Pf=Z(Pe(),1);var WP=Z(Pe(),1),$P=Z(xt(),1);var ppt=({className:e,value:t,onDeleteClick:r,disabled:n})=>WP.default.createElement("div",{className:`vkf-pill-root ${e}`},WP.default.createElement("span",{className:"value"},t," "),!n&&WP.default.createElement(dn,{className:"delete-button",onClick:()=>r(t),disabled:n},WP.default.createElement(Fr,{name:"delete"})));ppt.propTypes={value:$P.default.string.isRequired,onDeleteClick:$P.default.func.isRequired,className:$P.default.string,disabled:$P.default.bool};var fpt=ppt;var dpt=fpt;var hpt=(0,Pf.forwardRef)(function(t,r){let{name:n,onChange:o=()=>{},onBlur:i=()=>{},value:a=[],disabled:u=!1,placeholder:d=""}=t,[h,v]=(0,Pf.useState)(a!=null?a:[]),b=(0,Pf.useCallback)(M=>{if(!Me(M))return;let O=[...h];O.splice(M,1),v(O),o(O)},[h]),x=(0,Pf.useCallback)(M=>{var R;if(M.key!=="Enter")return;let O=(R=M.target.value)!=null?R:"";if(O===""||h.findIndex(q=>q===O)>-1)return;M.target.value="";let k=[...h,O];v(k),o(k)},[h]);return Pf.default.createElement("div",{className:"multi-value-input-root"},Pf.default.createElement("div",{className:"input-field"},h.map((M,O)=>Pf.default.createElement(dpt,{className:"pill",key:M,value:M,onDeleteClick:()=>b(O),disabled:u})),Pf.default.createElement("input",{className:"vkf-form-input",ref:r,name:n,onKeyDown:x,onBlur:i,disabled:u,placeholder:u?void 0:d})))});hpt.propTypes={name:Lb.default.string.isRequired,value:Lb.default.array,disabled:Lb.default.bool,onChange:Lb.default.func,onBlur:Lb.default.func,placeholder:Lb.default.string};var mpt=hpt;var Mce=mpt;var Xjr=()=>ar(({snapshot:t})=>r=>gt(null,null,function*(){let{id:n,type:o}=yield t.getPromise(Go);return o===$a.LOCAL||!Me(n)?Promise.resolve():Vet(n,r)}),[]),gpt=Xjr;var Qjr={owners:Q2.OWNER,editors:Q2.EDITOR},vpt=(e,t)=>{let r={remove:[],create_or_update:[]};for(let o of Object.values(_u)){let i=Qjr[o];if(!Me(i)||!Me(e[o]))continue;let a=e[o].filter(d=>!t[o].includes(d)),u=t[o].filter(d=>!e[o].includes(d));a=a.map(d=>({user_id:d,role:i})),u=u.map(d=>({user_id:d,role:i})),r.create_or_update.push(...a),r.remove.push(...u)}let n=r.remove.filter(({user_id:o})=>r.create_or_update.findIndex(({user_id:u})=>u===o)===-1);return r.remove=n,r.remove.length===0&&r.create_or_update.length===0?null:r};var ypt="vkf-geojson-roles-form",Jjr="PLACEHOLDER",eqr=(e,t)=>{let r=t[_u.EDITORS],n=t[_u.OWNERS];for(let o of r)if(n.findIndex(a=>a===o)!==-1)return fe("geojson-roles-form.error.duplicateRoles").replace(Jjr,`"${o}"`);return!0},_pt=e=>{let{onCancelClick:t=()=>{},onSubmitted:r=()=>{}}=e,[n,o]=(0,Li.useState)(""),{handleSubmit:i,trigger:a,control:u,formState:{errors:d}}=q0(),h=Uct(),v=gpt(),b=yt(Go),x=(0,Li.useMemo)(()=>!Me(b.id),[b.id]),M=(0,Li.useCallback)(D=>{let k=vpt(D,h);if(!Me(k)){r();return}v(k).then(()=>{r()}).catch(R=>{if(console.log(R),R.response){if(R.response.status===401){o(fe("common-errors-http-401"));return}if(R.response.status===403){o(fe("common-errors-http-403"));return}}o(fe("common-errors-unexpected"))})},[r]),O=(0,Li.useCallback)(D=>{D.key==="Enter"&&Object.values(_u).includes(D.target.name)&&D.preventDefault()},[]);return Li.default.createElement("div",{className:"vkf-geojson-roles-form-root"},Li.default.createElement("div",{className:"intro-text"},x?fe("geojson-roles-form-intro-unsaved"):fe("geojson-roles-form-intro")),Li.default.createElement("form",{id:ypt,onSubmit:i(M),onKeyDown:O},Li.default.createElement("div",{className:Dt("vkf-form-control",d[_u.OWNERS]&&"error")},Li.default.createElement("label",{className:"vkf-form-label"},fe("geojson-roles-owner")),Li.default.createElement(oT,{name:_u.OWNERS,control:u,defaultValue:h.owners,rules:{required:fe("geojson-roles-form.error.required")},render:({field:D})=>Li.default.createElement(Mce,Mt(Te({},D),{onChange:k=>{D.onChange(k),a(_u.EDITORS),o("")},disabled:!P4(b),placeholder:fe("geojson-roles-insert-username")}))}),d[_u.OWNERS]&&Li.default.createElement("div",{className:"vkf-form-error"},d[_u.OWNERS].message)),Li.default.createElement("div",{className:Dt("vkf-form-control",d[_u.EDITORS]&&"error")},Li.default.createElement("label",{className:"vkf-form-label"},fe("geojson-roles-authors")),Li.default.createElement(oT,{name:_u.EDITORS,control:u,defaultValue:h.editors,rules:{validate:eqr},render:({field:D})=>Li.default.createElement(Mce,Mt(Te({},D),{onChange:k=>{D.onChange(k),a(_u.EDITORS),o("")},disabled:!N4(b),placeholder:fe("geojson-roles-insert-username")}))}),d[_u.EDITORS]&&Li.default.createElement("div",{className:"vkf-form-error"},d[_u.EDITORS].message))),n.length!==""&&Li.default.createElement("div",{className:"error-message"},n),Li.default.createElement("div",{className:"buttons"},Li.default.createElement(dn,{form:ypt,disabled:!N4(b)&&!P4(b),buttonType:"submit",type:"save",className:"submit-button"},Li.default.createElement(Fr,{name:"save"}),fe("geojson-roles-btn-save")),Li.default.createElement(dn,{className:"cancel-button",type:"discard",onClick:t},Li.default.createElement(Fr,{name:"discard"}),fe("geojson-cancel-btn"))))};_pt.propTypes={onCancelClick:Cce.default.func,onSubmitted:Cce.default.func};var bpt=_pt;var xpt=bpt;var Ace=Z(xt(),1),H9=Z(Pe(),1),wpt=({className:e,resetErrorBoundary:t})=>((0,H9.useEffect)(()=>()=>{t()},[t]),H9.default.createElement("div",{className:e},fe("common-errors-unexpected")));wpt.propTypes={className:Ace.default.string,resetErrorBoundary:Ace.default.func.isRequired};var Ept=wpt;var W9=Ept;var Spt=({show:e,onClose:t})=>{let r=lce(),n=(0,gm.useCallback)(()=>{t()},[t]);return gm.default.createElement(wf,{isOpen:e,onClose:t,title:fe("geojson-roles-modal-title"),renderContent:()=>gm.default.createElement(X2,{FallbackComponent:W9,onReset:r},gm.default.createElement(gm.Suspense,{fallback:gm.default.createElement("div",null,"Loading ...")},gm.default.createElement(xpt,{onCancelClick:t,onSubmitted:n}))),modalClassName:"vkf-dialog-geojson-roles"})};Spt.propTypes={show:Oce.default.bool,onClose:Oce.default.func};var Tpt=Spt;var Ipt=Tpt;var Mpt=Ipt;var tqr=()=>{let e={NONE:0,ROLES:1},[t,r]=(0,Ju.useState)(e.NONE),n=yt(Go),o=zr(hs),i=(0,Ju.useCallback)(()=>{r(e.NONE)},[]),a=(0,Ju.useCallback)(()=>{o(xi.METADATA)},[]),u=(0,Ju.useCallback)(()=>{o(xi.HISTORY)},[]),d=(0,Ju.useCallback)(()=>{r(e.ROLES)},[]);return Ju.default.createElement(Ju.default.Fragment,null,Jz(n)&&Ju.default.createElement(dn,{className:"control-bar-layer-buttons--button layer-metadata-button",onClick:a,title:fe("geojson-control-bar-metadata-btn-title")},Ju.default.createElement(Fr,{name:"metadata-panel"})),Ju.default.createElement(kct,{onClick:u}),Ju.default.createElement(qct,{onClick:d}),Ju.default.createElement(Mpt,{show:t===e.ROLES,onClose:i}))},Cpt=tqr;var vm=Z(Pe(),1);var z0=yn({key:"geoJsonFeatureDrawState",default:null}),$9=yn({key:"undoStylePropertiesState",default:[]}),rqr=()=>{let[e,t]=Mo(z0),{handleDeleteFeature:r,handleUpdateFeature:n}=N9(),o=ar(({snapshot:h})=>(O,D,k)=>gt(null,[O,D,k],function*({addOrUpdateProperties:v,removeProperties:b},x,M){let R=yield h.getPromise(Ks),q=yield h.getPromise(z0),B=Object.assign({},q);try{let{properties:G}=B,re=Object.assign({},G);for(let me of b)delete re[me];for(let{key:me,value:ve}of v)re[me]=ve;B.properties=re;let Q=R.get(B.id),{geometry:ie}=Q;B.geometry=ie,n(B),R.add(B),Me(x)&&typeof x=="function"&&x()}catch(G){Me(M)&&typeof M=="function"&&M(G)}}),[]),i=ar(({snapshot:h,set:v})=>(b,x)=>gt(null,null,function*(){let M=yield h.getPromise(Ks),O=yield h.getPromise(z0),{id:D}=O,k=O.properties[b];v($9,R=>[...R,[D,b,k]]),M.setFeatureProperty(D,b,x),M.add(M.get(D))}),[]),a=ar(({snapshot:h})=>v=>gt(null,null,function*(){let b=yield h.getPromise(Ks),x=yield h.getPromise(z0),{id:M}=x;b.delete(M),r(M),Me(v)&&typeof v=="function"&&v()}),[]),u=ar(({snapshot:h,set:v})=>()=>gt(null,null,function*(){let b=yield h.getPromise($9),x=yield h.getPromise(Ks);for(let M of b)x.setFeatureProperty(...M);v($9,[])}),[]),d=ar(({snapshot:h,set:v})=>(...O)=>gt(null,[...O],function*({skipPanelState:b,skipResetPreview:x,skipDeselect:M}={skipResetPreview:!1,skipPanelState:!1,skipDeselect:!1}){if(!M){let D=yield h.getPromise(Ks);Me(D)&&D.changeMode("simple_select",{featureIds:[]})}x||u(),b||v(hs,xi.NONE),v($9,[]),v(z0,null)}),[u]);return{geoJsonFeature:e,setFeature:t,resetFeature:d,resetFeaturePreview:u,saveFeature:o,saveFeaturePreview:i,deleteFeature:a}},kb=rqr;var Apt="user_",Opt={HOT:"mapbox-gl-draw-hot",COLD:"mapbox-gl-draw-cold"},Z9={DIRECT_SELECT:"direct_select",SIMPLE_SELECT:"simple_select",DRAW_POLYGON:"draw_polygon",DRAW_LINE_STRING:"draw_line_string"},nqr=e=>{let{source:t}=e,{properties:r}=e,{meta:n,mode:o}=r,i=(t===Opt.COLD||t===Opt.HOT)&&n==="feature",a=o===Z9.DIRECT_SELECT||o===Z9.SIMPLE_SELECT;return i&&a},oqr=e=>{let{properties:t,type:r,geometry:n}=e,{id:o}=t,i={};for(let a in t){if(!a.startsWith(Apt))continue;let u=a.slice(Apt.length),d="";try{if(d=JSON.parse(t[a]),typeof d!="object")throw new Error}catch(h){d=t[a]}i[u]=d}return{id:o,geometry:n,properties:i,type:r}},iqr=(e,t)=>{let{x:r,y:n}=e;return[[r-t,n-t],[r+t,n+t]]},aqr=2,sqr=()=>{let{setFeature:e,resetFeature:t,resetFeaturePreview:r}=kb(),n=yt(hs),o=(0,vm.useRef)(!1),i=ar(({snapshot:b,set:x})=>M=>gt(null,null,function*(){let O=yield b.getPromise(tr),D=yield b.getPromise(Ks),k=yield b.getPromise(z0),{point:R}=M,q=iqr(R,aqr),B=O.queryRenderedFeatures(q).filter(nqr).at(0);if(Me(B)){let{id:G}=B.properties;if((k==null?void 0:k.id)===G)return;r(),e(oqr(B)),x(hs,xi.FEATURE)}else Me(k)&&!o.current&&([Z9.DRAW_LINE_STRING,Z9.DRAW_POLYGON].includes(D.getMode())?t({skipDeselect:!0}):t()),o.current=!1}),[e,t,r]),a=(0,vm.useCallback)(()=>{t()},[t]),u=ar(({set:b})=>x=>{o.current=!0;let M=x.features[0];e(M),b(hs,xi.FEATURE)},[e]),d=ar(({snapshot:b})=>()=>gt(null,null,function*(){let x=yield b.getPromise(tr);Me(x)&&(x.on("click",i),x.on("draw.delete",a),x.on("draw.create",u))}),[]),h=ar(({snapshot:b})=>()=>gt(null,null,function*(){let x=yield b.getPromise(tr);Me(x)&&(x.off("click",i),x.off("draw.delete",a),x.off("draw.create",u))}),[]),v=ar(({snapshot:b})=>x=>gt(null,null,function*(){let M=yield b.getPromise(z0);Me(M)&&x!==xi.FEATURE&&t({skipPanelState:!0})}),[t]);return(0,vm.useEffect)(()=>(d(),()=>{h()}),[]),(0,vm.useEffect)(()=>{v(n)},[n,v]),vm.default.createElement(vm.default.Fragment,null)},Ppt=sqr;var Npt=Ppt;var Rb=Z(xt(),1),xa=Z(Pe(),1);var ym=Z(Pe(),1),ZP=Z(xt(),1);var Dpt=({onClose:e,onSave:t,onDiscard:r,show:n})=>{let o=(0,ym.useCallback)(()=>{t().finally(()=>{e()})},[t,e]);return ym.default.createElement(wf,{isOpen:n,title:fe("geojson-discard-modal-title"),modalClassName:"vkf-discard-dialog",onClose:e,renderContent:()=>ym.default.createElement(ym.default.Fragment,null,ym.default.createElement("p",null,fe("geojson-discard-modal-description")),ym.default.createElement("div",{className:"discard-modal-buttons"},ym.default.createElement(dn,{type:"discard",onClick:r},fe("geojson-discard-modal-discard-button")),ym.default.createElement(dn,{type:"save",onClick:o},fe("geojson-discard-modal-save-button"))))})};Dpt.propTypes={onClose:ZP.default.func.isRequired,onDiscard:ZP.default.func.isRequired,onSave:ZP.default.func.isRequired,show:ZP.default.bool.isRequired};var Lpt=Dpt;var Y9={NONE:0,DISCARD:1},kpt=({title:e,onSave:t=()=>Promise.resolve(),onDiscard:r=()=>null,controls:n,content:o,isSaveButtonDisabled:i})=>{let[a,u]=(0,xa.useState)(!1),[d,h]=(0,xa.useState)(Y9.NONE),v=(0,xa.useMemo)(()=>{let D=e!=null?e:"";return D===""?`[${fe("geojson-featureview-no-title")}]`:D},[e]),b=(0,xa.useCallback)(()=>{h(Y9.NONE)},[]),x=(0,xa.useCallback)(()=>(u(!0),t().finally(()=>u(!1))),[t]),M=(0,xa.useCallback)(()=>{r(),b()},[r]),O=(0,xa.useCallback)(()=>{h(Y9.DISCARD)},[]);return xa.default.createElement("div",{className:"vkf-geojson-control-bar-root"},xa.default.createElement("div",{className:"control-bar-header"},xa.default.createElement("div",{className:"control-bar-title"},v),xa.default.createElement("div",{className:"control-bar-layer-buttons"},n)),xa.default.createElement("div",{className:"control-bar-main"},xa.default.createElement("div",{className:"control-bar-content"},o)),xa.default.createElement("div",{className:"control-bar-footer"},xa.default.createElement(dn,{className:"discard-button",onClick:O,type:"discard"},xa.default.createElement(Fr,{name:"discard"}),fe("geojson-cancel-btn")),xa.default.createElement(dn,{disabled:i,className:"save-button",onClick:x,loading:a,type:"save"},xa.default.createElement(Fr,{name:"save"}),fe("geojson-save-btn"))),xa.default.createElement(Lpt,{show:d===Y9.DISCARD,onSave:x,onDiscard:M,onClose:b}))};kpt.propTypes={title:Rb.default.string,onSave:Rb.default.func,onDiscard:Rb.default.func,content:Rb.default.element.isRequired,controls:Rb.default.element.isRequired,isSaveButtonDisabled:Rb.default.bool};var K9=kpt;var X9=e=>{var r;if(!Me((r=e==null?void 0:e.features)==null?void 0:r.length))return`${fe("geojson-control-bar-no-features")}`;let t=e.features.length;return t>1?`${t} ${fe("geojson-control-bar-feature-plural")}`:t===1?`1 ${fe("geojson-control-bar-feature")}`:`${fe("geojson-control-bar-no-features")}`};var Xu={INITIAL:0,SHOW_FEATURE_COUNT:1,NO_TITLE:2,NO_FEATURES:3,UNSAVED_FEATURE_CHANGES:4},Rpt=()=>{let{removeDraw:e}=oce(),t=Act(),{resetFeaturePreview:r}=kb(),n=yt(Pl),o=yt(Xs),[i,a]=(0,Nf.useState)(Xu.INITIAL);i===Xu.INITIAL?Me(n[qe.title])?o.features.length===0?a(Xu.NO_FEATURES):a(Xu.SHOW_FEATURE_COUNT):a(Xu.NO_TITLE):i===Xu.NO_TITLE&&Me(n[qe.title])&&(o.features.length===0?a(Xu.NO_FEATURES):a(Xu.SHOW_FEATURE_COUNT));let u=(0,Nf.useMemo)(()=>!Me(n[qe.title])||n[qe.title]==="",[n[qe.title]]),d=(0,Nf.useMemo)(()=>X9(o),[o]),h=(0,Nf.useCallback)(()=>(r(),t()),[r,t]),v=(0,Nf.useCallback)(()=>{e()},[e]);return Nf.default.createElement(K9,{title:n[qe.title],onSave:h,onDiscard:v,isSaveButtonDisabled:u,controls:Nf.default.createElement(Cpt,null),content:Nf.default.createElement(Nct,{onUpdateViewMode:a,viewState:i,formattedFeatureCount:d})})};Rpt.propTypes={};var Pce=Rpt;var Df=Z(Pe(),1);var Nce=Z(Pe(),1);var F0=()=>{let e=ar(({set:n,snapshot:o})=>()=>gt(null,null,function*(){let i=yield o.getPromise(tr),a=yield o.getPromise(Da),{selectedLayer:u}=yield o.getPromise(nu);!Me(i)||!Me(a)||(Me(u)&&!u.isVisible(i)&&u.setVisibility(i,"visible"),a.removeMapLibreLayers(i),n(Ic,$s.STANDARD),n(Da,null),n(uf,Ec.NONE))}),[]),t=ar(({snapshot:n})=>()=>gt(null,null,function*(){let o=yield n.getPromise(tr);Me(o)&&o._controlContainer.classList.add(K2)}),[]),r=ar(({snapshot:n})=>()=>gt(null,null,function*(){let o=yield n.getPromise(tr);Me(o)&&o._controlContainer.classList.remove(K2),e()}),[]);return{initializeVectorMapExternalMode:t,removeVectorMapExternalMode:r,exitExternalVectorLayerMode:e}},lqr=()=>{let e=yt(uf),{shiftRight:t,unShiftLeft:r,unShiftRight:n,removeControlShifts:o}=L9(),{initializeVectorMapExternalMode:i,removeVectorMapExternalMode:a}=F0();return(0,Nce.useEffect)(()=>(i(),r(),()=>{o(),a()}),[]),(0,Nce.useEffect)(()=>{e===Ec.METADATA?t():n()},[e]),null},jpt=lqr;var jb=Z(Pe(),1);var uqr=()=>{let e=zr(uf),t=(0,jb.useCallback)(()=>{e(Ec.METADATA)},[]);return jb.default.createElement(jb.default.Fragment,null,Mtt()&&jb.default.createElement(dn,{className:"control-bar-layer-buttons--button layer-metadata-button",onClick:t,title:fe("geojson-control-bar-metadata-btn-title")},jb.default.createElement(Fr,{name:"metadata-panel"})))},qpt=uqr;var _m=Z(Pe(),1),Dce=Z(xt(),1);var zpt=({formattedFeatureCount:e,viewState:t})=>_m.default.createElement(_m.default.Fragment,null,t===Vc.SHOW_FEATURE_COUNT&&_m.default.createElement(_m.default.Fragment,null,_m.default.createElement("span",{className:"bold"},e)," ",fe("geojson-control-bar-hint-features-present")),t===Vc.NO_TITLE&&_m.default.createElement("span",{className:"bold"},fe("geojson-control-bar-hint-add-title")),t===Vc.NO_FEATURES&&_m.default.createElement("span",{className:"bold"},fe("geojson-control-bar-hint-add-content-url")));zpt.propTypes={viewState:Dce.default.number.isRequired,formattedFeatureCount:Dce.default.string};var Fpt=(0,_m.memo)(zpt);var Q9="/vector_maps_external",Upt=e=>gt(null,null,function*(){let t=vr.getGeoreferenceApiClient(),r=`${Q9}/`;return(yield t.post(r,e)).data.id});var Bpt=(e,t)=>gt(null,null,function*(){let r=vr.getGeoreferenceApiClient(),n=`${Q9}/${e}`;return(yield r.put(n,t)).data}),Vpt=e=>gt(null,null,function*(){let t=vr.getGeoreferenceApiClient(),r=`${Q9}/${e}`;return(yield t.delete(r)).data.id}),Gpt=e=>gt(null,null,function*(){let t=vr.getGeoreferenceApiClient(),r=`${Q9}/refresh_search_index/${e}`;yield t.post(r)});var Hpt=Z(XA(),1);var cqr=()=>{let{notifyError:e}=k0(),{exitExternalVectorLayerMode:t}=F0(),r=ar(({set:o,snapshot:i})=>()=>gt(null,null,function*(){let a=yield i.getPromise(Da),u=yield i.getPromise(tr);if(!Me(a)||!Me(u)){console.error("State error. Cannot save external vector map to database.");return}let d=Dne(a.getMetadata()),h=a.getGeoJson();try{let v=yield Upt(d),b=Vo.fromApplication({metadata:Mt(Te({},a.getMetadata()),{[qe.id]:v,[qe.vectorMapId]:v}),geoJson:h});b.addLayerToMap(u),o(Dn,x=>[...x,b])}catch(v){gb(v,e);return}t()}),[]),n=ar(({snapshot:o,set:i})=>()=>gt(null,null,function*(){let a=yield o.getPromise(Da),u=yield o.getPromise(tr),{selectedLayer:d}=yield o.getPromise(nu);if(!Me(a)||!Me(u)||!Me(d)){console.error("State error. Cannot save external vector map to database.");return}let h=a.getGeoJson(),v=a.getMetadata()[qe.vectorMapId],b=xO(d.getMetadata()),x=xO(a.getMetadata()),M=!(0,Hpt.default)(b,x);try{if(M)if(yield Bpt(v,Dne(x)),o9(d,x),b[qe.externalContentType]!==x[qe.externalContentType]){d.removeMapLibreLayers(u);let O=Vo.fromApplication({geoJson:h,metadata:d.getMetadata()});O.addLayerToMap(u),i(Dn,D=>{let k=D.findIndex(R=>R.getId()===d.getId());return D[k]=O,[...D]})}else d.setDataOnMap(u,h),i(Hy,Date.now())}catch(O){gb(O,e);return}t()}),[]);return ar(({snapshot:o})=>()=>gt(null,null,function*(){let i=yield o.getPromise(Da);if(Me(i))return X4(i.getId())?yield r():yield n()}),[])},Wpt=cqr;var Vc={INITIAL:0,SHOW_FEATURE_COUNT:1,NO_TITLE:2,NO_FEATURES:3},pqr=()=>{let e=Wpt(),[t,r]=(0,Df.useState)(Vc.INITIAL),n=yt(pq),o=yt(vWe);t===Vc.INITIAL?Me(n[qe.title])?o.features.length===0?r(Vc.NO_FEATURES):r(Vc.SHOW_FEATURE_COUNT):r(Vc.NO_TITLE):t===Vc.NO_TITLE?Me(n[qe.title])&&(o.features.length===0?r(Vc.NO_FEATURES):r(Vc.SHOW_FEATURE_COUNT)):t===Vc.NO_FEATURES&&o.features.length>0&&r(Vc.SHOW_FEATURE_COUNT);let i=(0,Df.useMemo)(()=>X9(o),[o]),a=(0,Df.useMemo)(()=>{let v=!Me(n[qe.title])||n[qe.title]==="",b=!Me(n[qe.externalContentUrl]),x=!Me(n[qe.timePeriod])||n[qe.timePeriod].length===0;return b||x||v},[n]),{exitExternalVectorLayerMode:u}=F0(),d=(0,Df.useCallback)(()=>{u()},[]),h=(0,Df.useCallback)(()=>e(),[]);return Df.default.createElement(K9,{title:n[qe.title],onDiscard:d,onSave:h,isSaveButtonDisabled:a,content:Df.default.createElement(Fpt,{formattedFeatureCount:i,viewState:t}),controls:Df.default.createElement(qpt,null)})},Lce=pqr;var bp=Z(Pe(),1);var fqr=()=>{let e=ar(({snapshot:n,set:o})=>()=>gt(null,null,function*(){let{selectedLayer:i}=yield n.getPromise(nu),a=i.getMetadata(qe.vectorMapId),u=i.getId();yield zet(a),o(Zs,null),o(Ys,null),o(Dn,d=>d.filter(h=>h.getId()!==u)),kd(o)})),t=ar(({set:n})=>()=>gt(null,null,function*(){kd(n)})),r=ar(({snapshot:n,set:o})=>()=>gt(null,null,function*(){let{selectedLayer:i}=yield n.getPromise(nu),a=i.getId();o(Zs,null),o(Ys,null),o(Dn,u=>u.filter(d=>d.getId()!==a)),kd(o)}));return ar(({snapshot:n})=>()=>gt(null,null,function*(){let o=yield n.getPromise(Go);if(!Me(o))return;let{type:i,id:a}=o;i===$a.REMOTE?Me(a)?yield e():yield t():yield r()}))},$pt=fqr;var U0=Z(xt(),1),Lf=Z(Pe(),1);var Zpt=({title:e,introText:t,submitButton:r,onClose:n,dangerZoneComponent:o,showDangerZone:i,formComponent:a})=>{let u=(0,Lf.useCallback)(()=>{n()},[n]);return Lf.default.createElement("div",{className:"geojson-metadata-panel-root"},Lf.default.createElement(df,{title:e,onCloseClick:u}),Lf.default.createElement("div",{className:"geojson-metadata-panel-content"},Lf.default.createElement("div",{className:"introduction-text content-padding"},t),Lf.default.createElement("div",{className:"metadata-form-container content-padding"},a),i&&Lf.default.createElement("div",{className:"danger-zone-container"},o)),Lf.default.createElement("div",{className:"footer-container"},r,Lf.default.createElement(dn,{className:"discard-button",onClick:u,type:"discard"},Lf.default.createElement(Fr,{name:"discard"}),fe("geojson-cancel-btn"))))};Zpt.propTypes={introText:U0.default.string.isRequired,title:U0.default.string.isRequired,onClose:U0.default.func.isRequired,showDangerZone:U0.default.bool.isRequired,formComponent:U0.default.element.isRequired,dangerZoneComponent:U0.default.element.isRequired,submitButton:U0.default.element.isRequired};var J9=Zpt;var kce=Z(xt(),1),ia=Z(Pe(),1);var Gc=Z(Pe(),1);var YP=Z(xt(),1);var Ypt=(e,t)=>{let r=Tc(e),n=Tc(t);return r<=n},Kpt=({startFieldName:e,endFieldName:t,showLabels:r=!0,required:n=!0})=>{let{trigger:o,control:i,formState:{errors:a}}=rT(),u=(0,Gc.useCallback)((h,{field:v,formState:b})=>{v.onChange(h),b.errors[t]&&o(t)},[]),d=(0,Gc.useCallback)((h,{field:v,formState:b})=>{v.onChange(h),b.errors[e]&&o(e)},[]);return Gc.default.createElement("div",{className:"time-period-field-root"},Gc.default.createElement("div",{className:"time-period-field-container"},Gc.default.createElement("div",{className:Dt("vkf-form-control",a[e]&&"error")},r&&Gc.default.createElement("label",{className:"vkf-form-label",htmlFor:e},fe("geojson-label-timePeriod-start")),Gc.default.createElement(oT,{control:i,name:e,render:({field:h,formState:v})=>Gc.default.createElement(f2,Mt(Te({},h),{onChange:b=>u(b,{field:h,formState:v}),className:"vkf-form-input",placeholder:fe("geojson-editfeature-input-placeholder-date")})),rules:{required:n,validate:(h,{[t]:v})=>{let b=sne(h)&&Ypt(h,v);return n?b:h===""||b}}})),Gc.default.createElement("div",{className:Dt("vkf-form-control",a[t]&&"error")},r&&Gc.default.createElement("label",{className:"vkf-form-label",htmlFor:t},fe("geojson-label-timePeriod-end")),Gc.default.createElement(oT,{control:i,name:t,render:({field:h,formState:v})=>Gc.default.createElement(f2,Mt(Te({},h),{onChange:b=>d(b,{field:h,formState:v}),className:"vkf-form-input",placeholder:fe("geojson-editfeature-input-placeholder-date")})),rules:{required:n,validate:(h,{[e]:v})=>{let b=sne(h)&&Ypt(v,h);return n?b:h===""||b}}}))))};Kpt.propTypes={startFieldName:YP.default.string.isRequired,endFieldName:YP.default.string.isRequired,showLabels:YP.default.bool,required:YP.default.bool};var Xpt=Kpt;var iT=Xpt;var dqr=e=>e===""||dd(e),Rce=({formId:e,onValidatedFormSubmit:t})=>{var x;let r=yt(Pl),[n,o]=(0,ia.useState)((x=r[qe.thumbnailUrl])!=null?x:""),i=(0,ia.useMemo)(()=>Mct(r),[]),a=q0({defaultValues:i}),{register:u,handleSubmit:d,formState:{errors:h}}=a,v=(0,ia.useCallback)(M=>o(M.target.value),[]),b=(0,ia.useCallback)(M=>{let O=Cct(M);t(O)},[t]);return ia.default.createElement(nT,Te({},a),ia.default.createElement("form",{className:"geojson-metadata-form-root",id:e,onSubmit:d(b)},ia.default.createElement("div",{className:"geojson-metadata-form-fields"},ia.default.createElement("div",{className:Dt("vkf-form-control",h[qe.title]&&"error")},ia.default.createElement("label",{className:"vkf-form-label",htmlFor:qe.title},fe("geojson-metadata-title")),ia.default.createElement("input",Te({className:"vkf-form-input",placeholder:fe("geojson-placeholder-title")},u(qe.title,{required:!0})))),ia.default.createElement(iT,{startFieldName:Lh,endFieldName:kh}),ia.default.createElement("div",{className:Dt("vkf-form-control",h[qe.description]&&"error")},ia.default.createElement("label",{className:"vkf-form-label",htmlFor:qe.description},fe("geojson-metadata-description")),ia.default.createElement("textarea",Te({className:"vkf-form-textarea",placeholder:fe("geojson-placeholder-description")},u(qe.description)))),ia.default.createElement("div",{className:Dt("vkf-form-control",h[qe.thumbnailUrl]&&"error")},ia.default.createElement("label",{className:"vkf-form-label",htmlFor:qe.thumbnailUrl},fe("geojson-metadata-thumbnailUrl")),ia.default.createElement("div",{className:"image-with-fallback-container"},ia.default.createElement(cm,{imageUrl:n,showPlaceholder:!0,imageAsPreview:!0})),ia.default.createElement("input",Te({className:"vkf-form-input",placeholder:fe("geojson-placeholder-thumbnailUrl")},u(qe.thumbnailUrl,{onBlur:v,validate:dqr})))))))};Rce.defaultPropTypes={};Rce.propTypes={onValidatedFormSubmit:kce.default.func.isRequired,formId:kce.default.string.isRequired};var Qpt=(0,ia.memo)(Rce);var Jpt=Qpt;var _p=Z(Pe(),1);var eU=Z(Pe(),1),eft=Z(xt(),1);var tft=({children:e})=>eU.default.createElement("div",{className:"danger-zone-root"},eU.default.createElement("p",{className:"text text-header"},"danger zone"),eU.default.createElement("div",{className:"danger-zone-content"},e));tft.propTypes={children:eft.default.node};var aT=tft;var bm=Z(Pe(),1),KP=Z(xt(),1);var rft=({show:e,onClose:t,onDelete:r,description:n})=>bm.default.createElement(wf,{isOpen:e,onClose:t,title:fe("geojson-deletemodal-title"),renderContent:()=>bm.default.createElement(bm.default.Fragment,null,bm.default.createElement("p",null,n),bm.default.createElement("div",{className:"delete-feature-modal-buttons"},bm.default.createElement(A4,{className:"delete-btn",onClick:r,type:"delete"},bm.default.createElement(Fr,{name:"delete"}),fe("geojson-deletemodal-delete-btn")),bm.default.createElement(A4,{className:"cancel-btn",onClick:t,type:"discard"},bm.default.createElement(Fr,{name:"discard"}),fe("geojson-cancel-btn")))),modalClassName:"vkf-delete-dialog"});rft.propTypes={show:KP.default.bool,onClose:KP.default.func,onDelete:KP.default.func,description:KP.default.string};var nft=rft;var sT=nft;var oft=Z(xt(),1),XP={INITIAL:0,DELETE_DIALOG:1},ift=({onDelete:e})=>{let[t,r]=(0,_p.useState)(XP.INITIAL),n=(0,_p.useCallback)(()=>{t!==XP.DELETE_DIALOG&&r(XP.DELETE_DIALOG)},[t]),o=(0,_p.useCallback)(()=>{r(XP.INITIAL)},[]),i=(0,_p.useCallback)(()=>{e()},[e]);return _p.default.createElement(aT,null,_p.default.createElement("p",{className:"text text-description"},fe("geojson-metadata-panel-delete")),_p.default.createElement(dn,{className:"delete-button",onClick:n,type:"delete"},_p.default.createElement(Fr,{name:"delete"}),_p.default.createElement("p",{className:"text text-button"},fe("geojson-metadata-panel-delete-btn"))),_p.default.createElement(sT,{show:t===XP.DELETE_DIALOG,onClose:o,onDelete:i,description:fe("geojson-metadata-delete-vector")}))};ift.propTypes={onDelete:oft.default.func.isRequired};var aft=ift;var sft="vkf-geojson-metadata-form",lft=()=>{let e=zr(Pl),t=zr(hs),r=yt(Go),n=$pt(),{introText:o,title:i}=(0,bp.useMemo)(()=>{if(!Me(r))return{introText:"",title:""};let{type:v,id:b}=r,x={introText:fe("geojson-metadata-panel-intro-edit"),title:fe("geojson-metadata-panel-header-edit")},M={introText:fe("geojson-metadata-panel-intro-create"),title:fe("geojson-metadata-panel-header-create")};return v===$a.REMOTE?Me(b)?x:M:x},[r]),a=(0,bp.useMemo)(()=>{if(!Me(r))return!1;let{type:v,id:b}=r;return v===$a.REMOTE&&Me(b)},[r]),u=(0,bp.useCallback)(()=>{n()},[n]),d=(0,bp.useCallback)(()=>{t(xi.NONE)},[]),h=(0,bp.useCallback)(v=>{e(v),d()},[]);return bp.default.createElement(J9,{introText:o,title:i,onClose:d,onDelete:u,showDangerZone:a,dangerZoneComponent:bp.default.createElement(aft,{onDelete:u}),formComponent:bp.default.createElement(Jpt,{onValidatedFormSubmit:h,formId:sft}),submitButton:bp.default.createElement(dn,{className:"save-button",type:"save",buttonType:"submit",form:sft},bp.default.createElement(Fr,{name:"save"}),fe("geojson-apply-btn"))})};lft.propTypes={};var jce=lft;var xp=Z(Pe(),1);var fft=Z(xt(),1),oi=Z(Pe(),1);var dft=Z(Ph(),1);var Gd=Z(xt(),1);var qb=Z(Pe(),1);var uft=(0,qb.forwardRef)(function(t,r){let a=t,{options:n}=a,o=xn(a,["options"]),i=t.disabled;return qb.default.createElement("div",{className:"vkf-select-field-root"},qb.default.createElement("div",{className:Dt("select-field-container",i&&"disabled")},qb.default.createElement("select",Mt(Te({},o),{ref:r}),n.map(u=>qb.default.createElement("option",{key:u.value,value:u.value},u.label)))))});uft.propTypes={className:Gd.default.string,options:Gd.default.arrayOf(Gd.default.shape({label:Gd.default.string,value:Gd.default.string})),onChange:Gd.default.func,onBlur:Gd.default.func,defaultValue:Gd.default.string,name:Gd.default.string,disabled:Gd.default.bool};var cft=uft;var pft=cft;var qce=yn({key:"isExternalVectorMapFormLoadingState",default:!1}),hft=({onValidatedFormSubmit:e})=>{var M;let t=yt(pq),[r,n]=(0,oi.useState)((M=t[qe.thumbnailUrl])!=null?M:""),o=zr(qce),i=(0,oi.useMemo)(()=>lWe(t),[t]),a=q0({defaultValues:i}),{register:u,handleSubmit:d,setError:h,formState:{errors:v}}=a,b=(0,oi.useCallback)(O=>n(O.target.value),[]),x=ar(({snapshot:O})=>D=>gt(null,null,function*(){o(!0);let R=(yield O.getPromise(Da)).getMetadata()[qe.externalContentUrl],q=D[qe.externalContentUrl],B=R!==q,G=uWe(D);try{if(B){let Q=(yield dft.default.get(q,{headers:{accept:"application/json"},timeout:1e4})).data;cWe(Q),e({geoJson:Q,metadata:G})}else e({metadata:G})}catch(re){console.error(re),h(qe.externalContentUrl,{type:"custom",message:"custom message"},{shouldFocus:!0})}o(!1)}),[e]);return oi.default.createElement(nT,Te({},a),oi.default.createElement("form",{className:"geojson-metadata-form-root",id:rq,onSubmit:d(x)},oi.default.createElement("div",{className:"geojson-metadata-form-fields"},oi.default.createElement("div",{className:Dt("vkf-form-control",v[qe.title]&&"error")},oi.default.createElement("label",{className:"vkf-form-label",htmlFor:qe.title},fe("geojson-metadata-title")),oi.default.createElement("input",Te({className:"vkf-form-input",placeholder:fe("geojson-placeholder-title")},u(qe.title,{required:!0})))),oi.default.createElement("div",{className:Dt("vkf-form-control",v[qe.externalContentType]&&"error")},oi.default.createElement("label",{className:"vkf-form-label",htmlFor:qe.externalContentType},fe("geojson-metadata-externalContentType")),oi.default.createElement(pft,Mt(Te({className:"vkf-form-input"},u(qe.externalContentType,{required:!0})),{options:sWe}))),oi.default.createElement("div",{className:Dt("vkf-form-control",v[qe.externalContentUrl]&&"error")},oi.default.createElement("label",{className:"vkf-form-label",htmlFor:qe.externalContentUrl},fe("geojson-metadata-externalContentUrl")),oi.default.createElement("input",Te({className:"vkf-form-input",placeholder:fe("geojson-placeholder-externalContentUrl")},u(qe.externalContentUrl,{required:!0,validate:O=>dd(O)})))),oi.default.createElement(iT,{startFieldName:Lh,endFieldName:kh}),oi.default.createElement("div",{className:Dt("vkf-form-control",v[qe.description]&&"error")},oi.default.createElement("label",{className:"vkf-form-label",htmlFor:qe.description},fe("geojson-metadata-description")),oi.default.createElement("textarea",Te({className:"vkf-form-textarea",placeholder:fe("geojson-placeholder-description")},u(qe.description)))),oi.default.createElement("div",{className:Dt("vkf-form-control",v[qe.thumbnailUrl]&&"error")},oi.default.createElement("label",{className:"vkf-form-label",htmlFor:qe.thumbnailUrl},fe("geojson-metadata-thumbnailUrl")),oi.default.createElement("div",{className:"image-with-fallback-container"},oi.default.createElement(cm,{imageUrl:r,showPlaceholder:!0,imageAsPreview:!0})),oi.default.createElement("input",Te({className:"vkf-form-input",placeholder:fe("geojson-placeholder-thumbnailUrl")},u(qe.thumbnailUrl,{onBlur:b,validate:O=>O===""||dd(O)})))))))};hft.propTypes={onValidatedFormSubmit:fft.default.func.isRequired};var mft=(0,oi.memo)(hft);var hqr=()=>{let{zoomToExtent:e}=g2();return{updateExternalVectorMapLayer:ar(({snapshot:r,set:n})=>a=>gt(null,[a],function*({metadata:o,geoJson:i}){let u=yield r.getPromise(tr),d=yield r.getPromise(Da);if(!Me(u)||!Me(d))return;let h=d.getMetadata(qe.externalContentType);if(Me(i)){let v=Vo.toApplicationState(i);d.setDataOnMap(u,v),e(d)}if(o9(d,o),o[qe.externalContentType]!==h){d.removeMapLibreLayers(u);let v=Vo.fromApplication({geoJson:d.getGeoJson(),metadata:d.getMetadata()});v.addLayerToMap(u),n(Da,v)}else n(cq,v=>v+1)}),[])}},gft=hqr;var mqr=()=>{let{notifyError:e}=k0();return ar(({snapshot:r,set:n})=>()=>gt(null,null,function*(){let o=yield r.getPromise(tr),i=yield r.getPromise(Da),{selectedLayer:a}=yield r.getPromise(nu);if(!Me(o)||!Me(i)||!Me(a)){console.error("Undefined state. Cannot delete vector map from database");return}let u=i.getMetadata()[qe.vectorMapId];try{yield Vpt(u),a.removeMapLibreLayers(o),n(Dn,d=>d.filter(h=>h.getId()!==u)),n(Ys,null)}catch(d){gb(d,e)}}),[])},vft=mqr;var yft=jpt;var zce=Z(Pe(),1);var gqr=()=>{let e=yt(qce);return zce.default.createElement(dn,{className:"save-button",type:"save",buttonType:"submit",form:rq,loading:e},zce.default.createElement(Fr,{name:"save"}),fe("geojson-apply-btn"))},_ft=gqr;var ts=Z(Pe(),1);var Fce=Z(xt(),1);var QP={INITIAL:0,DELETE_DIALOG:1},bft=({onDelete:e,onRefresh:t})=>{let[r,n]=(0,ts.useState)(!1),[o,i]=(0,ts.useState)(QP.INITIAL),a=(0,ts.useCallback)(()=>gt(null,null,function*(){n(!0);try{yield t()}catch(v){console.error(v)}n(!1)}),[t]),u=(0,ts.useCallback)(()=>{o!==QP.DELETE_DIALOG&&i(QP.DELETE_DIALOG)},[o]),d=(0,ts.useCallback)(()=>{i(QP.INITIAL)},[]),h=(0,ts.useCallback)(()=>{e()},[e]);return ts.default.createElement(aT,null,ts.default.createElement("div",{className:"metadata-external-container"},ts.default.createElement("div",null,ts.default.createElement("p",{className:"text text-description"},fe("geojson-metadata-panel-refresh")),ts.default.createElement(dn,{className:"refresh-button",onClick:a,type:"primary",loading:r},ts.default.createElement("p",{className:"text text-button"},fe("geojson-metadata-panel-refresh-btn")))),ts.default.createElement("div",null,ts.default.createElement("p",{className:"text text-description"},fe("geojson-metadata-panel-delete")),ts.default.createElement(dn,{className:"delete-button",onClick:u,type:"delete"},ts.default.createElement(Fr,{name:"delete"}),ts.default.createElement("p",{className:"text text-button"},fe("geojson-metadata-panel-delete-btn"))))),ts.default.createElement(sT,{show:o===QP.DELETE_DIALOG,onClose:d,onDelete:h,description:fe("geojson-metadata-delete-vector")}))};bft.propTypes={onDelete:Fce.default.func.isRequired,onRefresh:Fce.default.func.isRequired};var xft=bft;var vqr=()=>{let{notifySuccess:e,notifyError:t}=k0();return ar(({snapshot:r})=>()=>gt(null,null,function*(){let o=(yield r.getPromise(Da)).getMetadata()[qe.vectorMapId];try{yield Gpt(o),e("geojson-metadata-panel-notify-refresh")}catch(i){gb(i,t)}}),[])},wft=vqr;var yqr=()=>{let e=wft(),t=vft(),{updateExternalVectorMapLayer:r}=gft(),{exitExternalVectorLayerMode:n}=F0(),o=yt(yWe),i=zr(uf),a=(0,xp.useMemo)(()=>Me(o)&&!X4(o),[o]),{introText:u,title:d}=(0,xp.useMemo)(()=>Me(o)?X4(o)?{introText:fe("geojson-metadata-panel-intro-create-external"),title:fe("geojson-metadata-panel-header-create")}:{introText:fe("geojson-metadata-panel-intro-edit-external"),title:fe("geojson-metadata-panel-header-edit")}:{introText:"",title:""},[o]),h=(0,xp.useCallback)(({geoJson:M,metadata:O})=>{r({metadata:O,geoJson:M}),v()},[]),v=(0,xp.useCallback)(()=>i(Ec.NONE),[]),b=(0,xp.useCallback)(()=>{t().then(()=>n())},[]),x=(0,xp.useCallback)(()=>e(),[]);return xp.default.createElement(J9,{onClose:v,onDelete:b,introText:u,title:d,showDangerZone:a,dangerZoneComponent:xp.default.createElement(xft,{onDelete:b,onRefresh:x}),formComponent:xp.default.createElement(mft,{onValidatedFormSubmit:h}),submitButton:xp.default.createElement(_ft,null)})},Eft=yqr;var Uce=Eft;var ka=Z(Pe(),1),Hd=Z(xt(),1);var lT=Z(Pe(),1),tU=Z(xt(),1);var Sft=({description:e,onDeleteClick:t,buttonLabel:r})=>lT.default.createElement(aT,null,lT.default.createElement("p",{className:"text text-description"},e),lT.default.createElement(dn,{className:"delete-button",onClick:t,type:"delete"},lT.default.createElement(Fr,{name:"delete"}),lT.default.createElement("p",{className:"text text-button"},r)));Sft.propTypes={description:tU.default.string.isRequired,onDeleteClick:tU.default.func.isRequired,buttonLabel:tU.default.string.isRequired};var Tft=Sft;var Ift=Tft;var Uo=Z(Pe(),1);var ev=Z(xt(),1);var Fb=Z(Pe(),1),zb=Z(xt(),1);var Mft=(0,Fb.forwardRef)(function(d,u){var h=d,{title:t,value:r,onChange:n,onBlur:o,id:i}=h,a=xn(h,["title","value","onChange","onBlur","id"]);return Fb.default.createElement("div",{className:"style-field-root"},Fb.default.createElement("div",{className:"vkf-form-control"},Fb.default.createElement("label",{htmlFor:i,className:"vkf-form-label"},t),Fb.default.createElement("input",Te({id:i,className:"vkf-form-input",defaultValue:r,onChange:n,onBlur:o,ref:u},a))))});Mft.propTypes={title:zb.default.string.isRequired,value:zb.default.any,inputProps:zb.default.object,onChange:zb.default.func,onBlur:zb.default.func,id:zb.default.string.isRequired};var Cft=Mft;var Bce="FF",Vce=e=>Number(e.toFixed(0)).toString(16).padStart(2,"0"),_qr=(e,{useAlpha:t}={useAlpha:!1})=>{let r=e.split("(")[1].split(")")[0].split(",").map(n=>parseInt(n,10)).map(Vce).join("");return t?`#${r}${Bce}`:`#${r}`},bqr=(e,{useAlpha:t}={useAlpha:!1})=>{let r=e.split("(")[1].split(")")[0].split(","),n=r.slice(0,3).map(i=>parseInt(i,10)).map(Vce).join(""),o=Vce(parseFloat(r[3])*255);return t?`#${n}${o}`:`#${n}`},xqr=(e,{useAlpha:t}={useAlpha:!1})=>{let r=e.trim();if(r.startsWith("rgba"))return bqr(r,{useAlpha:t});if(r.startsWith("rgb"))return _qr(r,{useAlpha:t});if(r.startsWith("#"))if(e.length===4){let n=e.slice(1,3).map(o=>`${o}${o}`);return t?`#${n}${Bce}`:`#${n}`}else{if(e.length===7)return t?`${e}${Bce}`:e;if(e.length===9)return t?e:e.slice(0,7)}throw new Error("Unknown color format")},wqr=e=>{let t={blue:"#0000ff",green:"#008000",orange:"#ffa500",pink:"#ffc0cb",yellow:"#ffff00"};if(!Me(e)&&typeof e!="string")throw new Error("No input specified");let r=e.trim().toLowerCase();if(!Object.hasOwn(t,r))throw new Error("No matching legacy color found");return t[r]},Aft=e=>{let t=e;try{t=xqr(e)}catch(r){t=wqr(e)}return t};var Eqr=e=>{var n,o;if(!Array.isArray(e))return{timeStart:"",timeEnd:""};let t=(n=Tl(e[0]))!=null?n:"",r=(o=Tl(e[1]))!=null?o:"";return{timeStart:t,timeEnd:r}},Sqr=(e,t)=>{if(e===""||t==="")return[];let r=Tc(e).valueOf(),n=Tc(t).valueOf();return Number.isNaN(r)||Number.isNaN(n)?[]:[r,n]},Tqr=e=>{var o,i;let t=(o=e==null?void 0:e.geometry)==null?void 0:o.type,r=LGe[t],n=[];for(let a in r){let u=(i=e.properties[a])!=null?i:r[a],d=rU(a,u);n.push({name:a,value:d})}return n},Iqr=e=>{var r;let t={};for(let n of aS){let o=(r=e.properties[n])!=null?r:"";t[n]=o}return t},Mqr=e=>{let t=j2(e),r=[];for(let n in t){let o=t[n];if(!aS.includes(n)&&typeof o!="object"){if(typeof o=="boolean"){r.push({name:n,value:`${o}`});continue}r.push({name:n,value:o})}}return r},Oft=e=>{let d=Iqr(e),{time:r}=d,n=xn(d,["time"]),{timeStart:o,timeEnd:i}=Eqr(r),a=Mqr(e),u=Tqr(e);return Mt(Te({timeStart:o,timeEnd:i},n),{customProps:a,styleProps:u})},Pft=e=>{let{img_link:t,title:r,description:n,timeStart:o,timeEnd:i,customProps:a,styleProps:u}=e,d=Sqr(o,i),h=Object.fromEntries(a.filter(b=>b.name!==""||b.value!=="").map(b=>[b.name,b.value])),v=Object.fromEntries(u.map(b=>{let x=rU(b.name,b.value);return[b.name,x]}));return Te(Te(Mt(Te({},d.length>0&&{time:d}),{title:r,description:n,img_link:t}),h),v)},rU=(e,t)=>{let{type:r,min:n,max:o}=gO[e],i=t;if(r==="number")i=Number.isNaN(Number.parseFloat(i))?1:parseFloat(i),i=Me(n)?Math.max(n,i):i,i=Me(o)?Math.min(o,i):i;else if(r==="color")try{i=Aft(i)}catch(a){i=pn[Ir.SYMBOL].COLOR}return i},Cqr=e=>`${e}`.trim().length!==0,Aqr=e=>!Number.isNaN(Number.parseFloat(e)),Nft=(e,t,r)=>{let n=t.customProps[r].value,o=e,i=t.customProps.filter((u,d)=>d!==r).filter(u=>u.name!=="").map(u=>u.name.toLowerCase()),a=[...aS,...i];return!(o.trim().length===0&&`${n}`.trim().length>0||a.includes(o.toLowerCase().trim()))},Dft=(e,t,r,n)=>!(t.customProps[r].name.trim().length>0&&(n&&!Aqr(e)||!n&&!Cqr(e)));var ec=Z(Pe(),1);var Gce=Z(xt(),1);var Lft=(0,ec.forwardRef)(function(t,r){let[n,o]=(0,ec.useState)(t.defaultValue),i=(0,ec.useCallback)(a=>{o(a.target.value),t.onBlur(a)},[t.onBlur]);return ec.default.createElement(ec.default.Fragment,null,ec.default.createElement("div",{className:"vkf-form-control non-style-property-item"},ec.default.createElement("label",{className:"vkf-form-label with-border"},fe("geojson-featureview-image-title")),ec.default.createElement(cm,{imageUrl:n,showPlaceholder:!0,imageAsPreview:!0})),ec.default.createElement("div",{className:"vkf-form-control non-style-property-item"},ec.default.createElement("label",{className:"vkf-form-label with-border"},"img_link"),ec.default.createElement("input",Mt(Te({className:"vkf-form-input"},t),{onBlur:i,placeholder:fe("geojson-editfeature-input-placeholder"),ref:r}))))});Lft.propTypes={defaultValue:Gce.default.string.isRequired,onBlur:Gce.default.func.isRequired};var kft=Lft;var Rft=kft;var JP=Z(Pe(),1);var jft=Z(xt(),1);var qft=({onClick:e})=>JP.default.createElement("div",{className:"add-field-button-root"},JP.default.createElement(dn,{className:"add-field-button",buttonType:"button",onClick:e},JP.default.createElement(Fr,{name:"add"}),JP.default.createElement("p",{className:"add-field-button-text"},fe("geojson-editfeature-add-new-field-button"))));qft.propTypes={onClick:jft.default.func.isRequired};var zft=qft;var Fft=zft;var nU=Z(Pe(),1);var Uft=Z(xt(),1);var Bft=({onClick:e})=>nU.default.createElement(dn,{className:"remove-field-button",type:"discard",onClick:e},nU.default.createElement("p",null,fe("geojson-featureview-delete-field-btn")),nU.default.createElement(Fr,{name:"delete"}));Bft.propTypes={onClick:Uft.default.func.isRequired};var Vft=Bft;var Gft=Vft;var Hft=({feature:e,onSavePreview:t,onFormSubmit:r})=>{let n=(0,Uo.useMemo)(()=>Oft(e),[e.id]),{img_link:o,title:i,description:a}=n,u=q0({defaultValues:n}),{register:d,handleSubmit:h,formState:{errors:v},control:b}=u,x=(0,Uo.useCallback)(G=>{G=Pft(G),r(G)},[r]),{fields:M}=Ice({name:"styleProps",control:b}),{fields:O,append:D,remove:k}=Ice({name:"customProps",control:b}),R=(0,Uo.useCallback)(G=>{k(G)},[k]),q=(0,Uo.useCallback)(()=>{D([{name:"",value:""}])},[D]),B=(0,Uo.useCallback)(G=>{let{key:re,target:Q}=G;re!=="Enter"||Q instanceof HTMLTextAreaElement||G.preventDefault()},[]);return Uo.default.createElement(nT,Te({},u),Uo.default.createElement("form",{id:Hce,onSubmit:h(x),noValidate:!0,onKeyDown:B},Uo.default.createElement("div",{className:"feature-properties-form-root"},Uo.default.createElement("div",{className:"style-property-header"},Uo.default.createElement("p",{className:"header-text"},fe("geojson-editfeature-style-header"))),Uo.default.createElement("div",{className:"style-fields"},M.map((G,re)=>{let Q=G.name,ie=gO[Q],ye=d(`styleProps.${re}.value`),{onChange:me}=ye,ve=xn(ye,["onChange"]);return Uo.default.createElement(Cft,Te(Mt(Te({},ve),{onChange:we=>{let Se=rU(Q,we.target.value);t(Q,Se),me(we)},key:G.id,id:G.id,title:Q}),ie))})),Uo.default.createElement("div",{className:"non-style-fields"},Uo.default.createElement(Rft,Mt(Te({},d("img_link")),{defaultValue:o})),Uo.default.createElement("div",{className:"vkf-form-control non-style-property-item"},Uo.default.createElement("label",{className:"vkf-form-label with-border",htmlFor:"vkf-props-title"},"title"),Uo.default.createElement("input",Mt(Te({id:"vkf-props-title",className:"vkf-form-input"},d("title")),{defaultValue:i,placeholder:fe("geojson-editfeature-input-placeholder")}))),Uo.default.createElement("div",{className:"vkf-form-control non-style-property-item"},Uo.default.createElement("label",{className:"vkf-form-label with-border",htmlFor:"vkf-props-description"},"description"),Uo.default.createElement("input",Mt(Te({id:"vkf-props-description",className:"vkf-form-input"},d("description")),{defaultValue:a,placeholder:fe("geojson-editfeature-input-placeholder")}))),Uo.default.createElement("div",{className:"time-period-field-wrapper"},Uo.default.createElement("label",{className:"vkf-form-label with-border"},"time"),Uo.default.createElement(iT,{startFieldName:"timeStart",endFieldName:"timeEnd",showLabels:!1,required:!1})),O.map((G,re)=>{var ve,ye,we,Se;let Q=typeof G.value=="number",ie=d(`customProps.${re}.name`,{validate:(ge,Re)=>Nft(ge,Re,re)}),me=d(`customProps.${re}.value`,{validate:(ge,Re)=>Dft(ge,Re,re,Q),valueAsNumber:Q});return Uo.default.createElement("div",{key:G.id,className:"custom-field-wrapper"},Uo.default.createElement("div",{className:Dt("vkf-form-control ",((ye=(ve=v==null?void 0:v.customProps)==null?void 0:ve[re])==null?void 0:ye.name)&&"error")},Uo.default.createElement("input",Mt(Te({},ie),{className:"vkf-form-input as-label",placeholder:fe("geojson-editfeature-label-placeholder")}))),Uo.default.createElement("div",{className:Dt("vkf-form-control ",((Se=(we=v==null?void 0:v.customProps)==null?void 0:we[re])==null?void 0:Se.value)&&"error")},Uo.default.createElement("input",Mt(Te({},me),{type:Q?"number":void 0,className:"vkf-form-input",placeholder:fe("geojson-editfeature-input-placeholder")})),Uo.default.createElement(Gft,{onClick:()=>R(re)})))}),Uo.default.createElement(Fft,{onClick:q})))))};Hft.propTypes={feature:ev.default.shape({properties:ev.default.object,geometry:ev.default.object,id:ev.default.oneOfType([ev.default.string,ev.default.number])}).isRequired,onSavePreview:ev.default.func.isRequired,onFormSubmit:ev.default.func.isRequired};var Wft=Hft;var $ft=Wft;var Hce="feature-properties-form",Wce=e=>{let{feature:t,onDelete:r,onClose:n,onSave:o,onSavePreview:i}=e,[a,u]=(0,ka.useState)(!1),d=(0,ka.useCallback)(()=>{n({doRemoveFeatureState:!0})},[n]),h=(0,ka.useCallback)(()=>{u(M=>!M)},[]),v=(0,ka.useCallback)(()=>{u(!1)},[u]),b=(0,ka.useCallback)(()=>{r(t),h()},[r,t,h]),x=(0,ka.useCallback)(M=>{let O=nut({oldProperties:t.properties,newProperties:M});o(O)},[]);return ka.default.createElement("div",{className:"geojson-feature-edit-panel-root vkf-geojson-feature-view-content full-height"},ka.default.createElement(df,{title:fe("geojson-editview-header-text"),onCloseClick:n}),ka.default.createElement("div",{className:"geojson-feature-edit-panel-content"},ka.default.createElement("div",{className:"introduction-text"},fe("geojson-editview-intro-text")),ka.default.createElement($ft,{feature:t,onFormSubmit:x,onSavePreview:i}),ka.default.createElement("div",{className:"danger-zone-container"},ka.default.createElement(Ift,{description:fe("geojson-editfeature-danger-zone-title"),onDeleteClick:h,buttonLabel:fe("geojson-featureview-delete-btn")}))),ka.default.createElement("div",{className:"footer-container"},ka.default.createElement(dn,{form:Hce,className:"save-button",type:"save"},ka.default.createElement(Fr,{name:"save"}),fe("geojson-apply-btn")),ka.default.createElement(dn,{className:"discard-button",onClick:d,type:"discard"},ka.default.createElement(Fr,{name:"discard"}),fe("geojson-cancel-btn"))),ka.default.createElement(sT,{show:a,onClose:v,onDelete:b,description:fe("geojson-deletemodal-body")}))};Wce.defaultPropTypes={onSavePreview:()=>{}};Wce.propTypes={feature:Hd.default.shape({id:Hd.default.oneOfType([Hd.default.number,Hd.default.string]).isRequired,geometry:Hd.default.object.isRequired,properties:Hd.default.object.isRequired}).isRequired,onClose:Hd.default.func.isRequired,onDelete:Hd.default.func.isRequired,onSave:Hd.default.func.isRequired,onSavePreview:Hd.default.func};var Zft=Wce;var tv=Z(Pe(),1),uT=Z(xt(),1);var $ce=({geoJsonFeature:e,saveFeature:t,saveFeaturePreview:r,deleteFeature:n,resetFeature:o})=>{let i=(0,tv.useCallback)(h=>{o(h)},[o]),a=(0,tv.useCallback)(h=>{t(h,()=>{i({skipResetPreview:!0})},()=>{console.error("The feature could not be saved"),i()})},[t,i]),u=(0,tv.useCallback)((h,v)=>{r(h,v)},[r]),d=(0,tv.useCallback)(()=>{n(()=>i())},[n,i]);return tv.default.createElement(tv.default.Fragment,null,tv.default.createElement(Yft,{key:e.id,feature:e,onDelete:d,onClose:i,onSave:a,onSavePreview:u}))};$ce.defaultPropTypes={saveFeaturePreview:()=>{}};$ce.propTypes={geoJsonFeature:uT.default.object.isRequired,resetFeature:uT.default.func.isRequired,saveFeature:uT.default.func.isRequired,deleteFeature:uT.default.func.isRequired,saveFeaturePreview:uT.default.func};var Zce=$ce;var Yft=Zft;var Ds=Z(Pe(),1);var Yce=Z(Pe(),1);var Ub=Z(xt(),1),Wd=Z(Pe(),1);var Kft=()=>ar(({snapshot:e,set:t})=>r=>gt(null,null,function*(){let n=yield e.getPromise(Go),o=yield e.getPromise(Ks),i=yield Uet(n.id,r);if(o){o.deleteAll().add(i.geojson);let a=new Map;i.geojson.features.forEach(u=>{a.set(u.id,!1)}),t(Xs,i.geojson),t(Ud,{dirtyMap:a,deleteIds:[],addIds:[]}),t(vg,r===n.version?null:r)}}),[]);var Xft=({isSelected:e,version:t,isMostRecent:r})=>{let n=Kft(),o=(0,Wd.useCallback)(()=>{n(t.version)},[n,t]);return Wd.default.createElement("li",{className:Dt("version-history-entry",r?"current-version":"older-version",e?"selected":""),key:t.version},Wd.default.createElement("div",{className:"version-history-entry-content"},Wd.default.createElement(Wd.default.Fragment,null,Wd.default.createElement("span",{className:"time"},tot(new Date(t.submitted))),Wd.default.createElement("span",{className:"author"},t.created_by),!r||r&&!e?Wd.default.createElement(dn,{className:"version-history-reset-button",onClick:o},Wd.default.createElement(Fr,{name:"clock"})):null)))};Xft.propTypes={isSelected:Ub.default.bool,isMostRecent:Ub.default.bool,version:Ub.default.shape({version:Ub.default.number,submitted:Ub.default.string,created_by:Ub.default.string}).isRequired};var Qft=Xft;var Jft=yn({key:"vectorMapVersionsQueryIdState",default:0}),Oqr=Ws({key:"vectorMapVersionsQuery",get:t=>gt(null,[t],function*({get:e}){e(Jft);let r=e(Go);return!Me(r)||r.type==="local"||r.id===null?null:yield Fet(r.id)})}),edt=()=>ar(({set:t})=>()=>{t(Jft,r=>r+1)},[]),Pqr=()=>yt(Oqr),tdt=Pqr;var Nqr=()=>{let e=yt(vg),t=tdt();return t?Yce.default.createElement("ul",{className:"version-history"},t.map((r,n)=>Yce.default.createElement(Qft,{isMostRecent:n===0,isSelected:e===null?n===0:e===r.version,key:r.version,version:r}))):null},rdt=Nqr;var ndt=()=>{let e=zr(hs),t=yt(Go),r=edt(),n=(0,Ds.useMemo)(()=>!Me(t.id),[t.id]),o=(0,Ds.useMemo)(()=>n?fe("geojson-metadata-panel-intro-history-unsaved"):fe("geojson-metadata-panel-intro-history"),[n]),i=(0,Ds.useMemo)(()=>fe("geojson-metadata-panel-header-history"),[]),a=(0,Ds.useCallback)(()=>{e(xi.NONE)},[]);return Ds.default.createElement("div",{className:"geojson-history-panel-root"},Ds.default.createElement(df,{title:i,onCloseClick:a}),Ds.default.createElement("div",{className:"geojson-history-panel-content"},Ds.default.createElement("div",{className:"introduction-text"},o),Ds.default.createElement("div",{className:"history-list-container"},Ds.default.createElement(X2,{fallbackRender:({resetErrorBoundary:u})=>Ds.default.createElement(W9,{className:"error-fallback",resetErrorBoundary:u}),onReset:r},Ds.default.createElement(Ds.Suspense,{fallback:Ds.default.createElement("div",{className:"suspense-fallback"},"Loading...")},Ds.default.createElement(rdt,null))))))};ndt.propTypes={};var odt=ndt;var Kce=()=>{let e=yt(hs),t=kb(),r=(0,kf.useMemo)(()=>Me(t.geoJsonFeature)?t:null,[t.geoJsonFeature]);return kf.default.createElement(kf.default.Fragment,null,kf.default.createElement("div",{className:"vkf-horizontal-layout-draw"},kf.default.createElement("div",{className:"geojson-control-bar-container"},kf.default.createElement(Pce,null)),kf.default.createElement(P0,{className:"geojson-metadata-panel-container",Component:e===xi.HISTORY?odt:jce,props:e===xi.METADATA||e===xi.HISTORY?{}:null}),kf.default.createElement(P0,{className:"geojson-feature-edit-panel-container",Component:Zce,props:e===xi.FEATURE?r:null})),kf.default.createElement(Tct,null),kf.default.createElement(Npt,null))};Kce.propTypes={};var B0=Z(Pe(),1);var idt=()=>{let e=yt(uf);return B0.default.createElement(B0.default.Fragment,null,B0.default.createElement("div",{className:"vkf-horizontal-layout-vector-map-external"},B0.default.createElement("div",{className:"geojson-control-bar-container"},B0.default.createElement(Lce,null)),B0.default.createElement(P0,{className:"geojson-metadata-panel-container",Component:Uce,props:e===Ec.METADATA?{}:null})),B0.default.createElement(yft,null))};idt.propTypes={};var adt=idt;var sdt=adt;var Bl=Z(Pe(),1);var Ra=Z(Pe(),1),aU=Z(xt(),1);var Xce=Z(Pe(),1),Qce=Z(xt(),1);var ldt=({onClick:e})=>Xce.default.createElement("button",{className:"vkf-toggle-search-button",onClick:e,title:"toggle search"},Xce.default.createElement(bf,{name:"icon-search"}));ldt.propTypes={isOpen:Qce.default.bool,onClick:Qce.default.func};var udt=ldt;var oU=Z(Pe(),1),iU=Z(xt(),1);var Jce=({disabled:e,onClick:t,isOpen:r})=>oU.default.createElement("button",{className:Dt("vkf-toggle-search-result-list",r?"open":"closed",e&&"disabled"),disabled:e,onClick:t},oU.default.createElement("div",{className:"background"}),oU.default.createElement("div",{className:"chevron"}));Jce.propTypes={disabled:iU.default.bool,isOpen:iU.default.bool,onClick:iU.default.func};var cdt=({enableReopenResultList:e=!0,onToggleFacets:t,showFacets:r})=>{let n=yt(hS),[o,i]=(0,Ra.useState)(!1),[a,u]=(0,Ra.useState)(!1),[d,h]=(0,Ra.useState)(!1),v=()=>{i(M=>!M)},b=()=>{u(M=>!M)};(0,Ra.useEffect)(()=>{n===0&&o?(i(!1),h(!0)):e&&n>0&&d&&(i(!0),h(!1))},[n]);let x=o?"show-search-result-list":"hide-search-result-list";return Ra.default.createElement(Ra.Fragment,null,Ra.default.createElement("div",{className:"vkf-search-header"},Ra.default.createElement("div",{className:"top-container"},Ra.default.createElement("div",{className:"result-summary"},n===0?fe("mapsearch-found-no-maps"):`${n} ${fe("mapsearch-found-maps")}`),Ra.default.createElement("div",{className:"controls-container"},Ra.default.createElement(Vz,{onClick:t,isOpen:r}),Ra.default.createElement(udt,{onClick:b,isOpen:a}))),a&&Ra.default.createElement("div",{className:"bottom-container"},Ra.default.createElement(b7,{searchUrl:vr.getNominatimUrl()}),Ra.default.createElement(u7,null))),Ra.default.createElement(Jce,{disabled:n===0,onClick:v,isOpen:o}),Ra.default.createElement("div",{className:Dt("vkf-search-result-container",x)},Ra.default.createElement(Uz,{enableOverlayLayer:!1,DataProvider:Wz,direction:"horizontal",itemSize:170,renderHeader:!1})))};cdt.propTypes={enableReopenResultList:aU.default.bool,onToggleFacets:aU.default.func,showFacets:aU.default.bool};var pdt=cdt;var sU=Z(Pe(),1);var epe=Z(xt(),1);var fdt=({buttonState:e,onClick:t})=>{let r=yt(Dn),n=r.length===0;return sU.default.createElement("button",{className:Dt("vkf-toggle-layermanagement-button",!n&&e&&"opened",n&&"disabled"),disabled:n,onClick:t},!n&&sU.default.createElement("span",{className:"badge"},r.length),sU.default.createElement(bf,{name:"layers"}))};fdt.propTypes={buttonState:epe.default.bool,onClick:epe.default.func};var ddt=fdt;var hdt=s7;var mdt=Z(Pe(),1),gdt=Z(xt(),1),vdt=({onCloseLayerManagement:e})=>{let t=yt(Dn);return(0,mdt.useEffect)(()=>{t.length===0&&e()},[t]),null};vdt.propTypes={onCloseLayerManagement:gdt.default.func.isRequired};var ydt=vdt;var Dqr=()=>{let[e,t]=(0,Bl.useState)(!1),[r,n]=(0,Bl.useState)(!1),o=(0,Bl.useCallback)(()=>{n(!1)},[]),i=(0,Bl.useCallback)(()=>{n(u=>!u)},[]),a=()=>{t(u=>!u)};return Bl.default.createElement(Bl.default.Fragment,null,Bl.default.createElement(ydt,{onCloseLayerManagement:o}),Bl.default.createElement("div",{className:"vkf-vertical-layout"},Bl.default.createElement(pdt,{onToggleFacets:a,showFacets:e}),Bl.default.createElement(ddt,{buttonState:r,onClick:i}),Bl.default.createElement("div",{className:Dt("layermanagement-container",!r&&"closed")},Bl.default.createElement(hdt,{showControls:{showBadge:!1,showDynamicMapVisualization:!1,showHideButton:!0}}))),Bl.default.createElement(wf,{modalClassName:"faceted-search-modal",onClose:a,renderContent:()=>Bl.default.createElement(Pz,{georeferenceMode:!1}),isOpen:e,title:"Filter"}))},tpe=Dqr;var Rf=Z(Pe(),1),$d=Z(xt(),1);var eN=Z(Pe(),1),_dt=Z(va(),1);var xm=Z(Pe(),1);var Lqr=(e,t)=>{let r=yt(tr),[n,o]=(0,xm.useState)(null),[i,a]=Mo(hWe),u=(0,xm.useRef)(null),d=(0,xm.useCallback)(v=>{u.current&&!u.current.contains(v.target)&&a(xc.None)},[]),h=(0,xm.useCallback)(()=>{a(v=>v===t?xc.None:t)},[t]);return(0,xm.useEffect)(()=>{if(Me(r)){let v=x=>{var M;((M=x.control)==null?void 0:M.id)===e&&o(x.control._container)},b=x=>{var M;((M=x.control)==null?void 0:M.id)===e&&o(null)};return r.on(fs.controlAdded,v),r.on(fs.controlRemoved,b),()=>{r.off(fs.controlAdded,v),r.off(fs.controlRemoved,b)}}},[r]),(0,xm.useEffect)(()=>(i===t?document.addEventListener("mousedown",d):document.removeEventListener("mousedown",d),()=>{document.removeEventListener("mousedown",d)}),[i,t,d]),{baseMapControlEl:n,activeDialog:i,toggleDialog:h,dialogRef:u}},lU=Lqr;var kqr=()=>{let{baseMapControlEl:e,activeDialog:t,toggleDialog:r,dialogRef:n}=lU(Yre,xc.BasemapSelector);return e!==null?(0,_dt.createPortal)(eN.default.createElement("div",{ref:n},eN.default.createElement("button",{onClick:r,title:fe("control-basemapselector-open"),className:Dt("maplibregl-ctrl-basemap-selector",t===xc.BasemapSelector&&"active")}),t===xc.BasemapSelector&&eN.default.createElement("div",{className:Dt("basemap-selector-modal",t===xc.BasemapSelector&&"active")},eN.default.createElement(sJe,null))),e):null},bdt=kqr;var xdt=bdt;function rpe(e,t){return new Promise(function(r){let n=()=>{r(!1)},o=()=>{t.signal.removeEventListener("abort",n)};t.signal.addEventListener("abort",n,{once:!0}),e.once("moveend",()=>{r(!0),o()}),e.once("touchstart",()=>{r(!1),o()}),e.once("mousedown",()=>{r(!1),o()}),e.flyTo(t)})}function wdt(e){return new Promise(t=>setTimeout(t,e))}var Edt=Z($E(),1);var uU=class extends Edt.Map{constructor(){super(...arguments);bt(this,"terrainConfiguration",vr.getTerrain());bt(this,"terrainExaggeration",this.terrainConfiguration.exaggeration);bt(this,"isTerrainEnabled",!1);bt(this,"abortController",new AbortController)}getTerrainExaggeration(){return this.terrainExaggeration}hasTerrain(){return this.isTerrainEnabled}growTerrain(r,n=1e3){if(!this.terrain)return;let o=performance.now(),i=this.terrain.exaggeration,a=r-i,u=()=>{if(!this.terrain||this.terrainFlattening)return;let d=(performance.now()-o)/n;if(d<.99){let h=1-jm(1-d,4),v=i+h*a;this.terrain.exaggeration=v,requestAnimationFrame(u)}else this.terrainGrowing=!1,this.terrainFlattening=!1,this.terrain.exaggeration=r;this._elevationFreeze=!1,this.triggerRepaint()};this.terrainGrowing=!0,this.terrainFlattening=!1,requestAnimationFrame(u)}enableTerrain(r=this.terrainExaggeration){if(r<0){console.warn("Terrain exaggeration cannot be negative.");return}let n=i=>gt(this,null,function*(){!this.terrain||i.type!=="data"||i.dataType!=="source"||!("source"in i)||i.sourceId!==qy||i.source.type!=="raster-dem"||i.isSourceLoaded&&(this.off("data",n),this.growTerrain(r))}),o=()=>{this.isTerrainEnabled=!0,this.terrainExaggeration=r,this.addSource(qy,{attribution:this.terrainConfiguration.attribution,type:"raster-dem",tiles:[this.terrainConfiguration.url],tileSize:256,minzoom:this.terrainConfiguration.minZoom,maxzoom:this.terrainConfiguration.maxZoom,encoding:"terrarium"}),this.setTerrain({source:qy,exaggeration:0}),this.abortController.abort(),this.abortController=new AbortController,rpe(this,{signal:this.abortController.signal,pitch:60,duration:700}).then(()=>wdt(500)).then(()=>{this.getSource(qy).loaded()?this.growTerrain(r):this.on("data",n)})};if(this.getTerrain()){this.isTerrainEnabled=!0,this.growTerrain(r);return}this.loaded()||this.isTerrainEnabled?o():this.once("load",()=>{this.getTerrain()&&this.getSource(qy)||o()})}disableTerrain(){return gt(this,null,function*(){if(!this.terrain)return;this.isTerrainEnabled=!1;let r=1*1e3,n=performance.now(),o=this.terrain.exaggeration,i=()=>{if(!this.terrain||this.terrainGrowing)return;let a=(performance.now()-n)/r;if(this._elevationFreeze=!1,a<.99){let u=jm(1-a,4),d=o*u;this.terrain.exaggeration=d,requestAnimationFrame(i)}else this.terrain.exaggeration=0,this.terrainGrowing=!1,this.terrainFlattening=!1,this.setTerrain(),this.getSource(qy)&&this.removeSource(qy),this.abortController.abort(),this.abortController=new AbortController,rpe(this,{pitch:0,signal:this.abortController.signal,duration:700});this.triggerRepaint()};this.terrainGrowing=!1,this.terrainFlattening=!0,requestAnimationFrame(i)})}setTerrainExaggeration(r,n=!0){!n&&this.terrain?(this.terrainExaggeration=r,this.terrain.exaggeration=r,this.triggerRepaint()):this.enableTerrain(r)}};var npe=class extends uU{addControl(t,r){let n=super.addControl(t,r);return this.fire(fs.controlAdded,{control:t}),n}removeControl(t){let r=super.removeControl(t);return this.fire(fs.controlRemoved,{control:t}),r}setPaintProperty(t,r,n,o){var d;let i=super.setPaintProperty(t,r,n,o),a=this.getLayer(t),u=(d=a==null?void 0:a.metadata)==null?void 0:d[sp.id];return zVe.has(r)&&u&&this.fire(fs.opacityChanged,{layerId:u,property:r,value:n}),i}setLayoutProperty(t,r,n,o){var d;let i=super.setLayoutProperty(t,r,n,o),a=this.getLayer(t),u=(d=a==null?void 0:a.metadata)==null?void 0:d[sp.id];return FVe.has(r)&&u&&this.fire(fs.visibilityChanged,{layerId:u,property:r,value:n}),i}fireVisibilityChanged(t,r){this.fire(fs.visibilityChanged,{layerId:t,property:"visibility",value:r})}},Sdt=npe;var Tdt=Sdt;var tN=Z(Pe(),1),Odt=Z(va(),1);var wm=Z(Pe(),1);var Vl=Z(Pe(),1);var Idt=Z(dq(),1);var Rqr=()=>{let e=yt(tr),t=yt(Dn),r=yt(sf),[n,o]=(0,Vl.useState)(""),i=(0,Vl.useRef)(),a=(0,Vl.useCallback)(()=>{if(!Me(e))return;let u=s9(gS(e,!0)),d=c9(e.hasTerrain()),h=u9(t),v=l9(r),b=(0,Idt.stringify)(Object.assign({},u,d,h,v),{arrayFormat:"comma"});o(vS(b))},[e]);return(0,Vl.useEffect)(()=>{if(e)return a(),e.on("moveend",a),()=>{e.off("moveend",a)}},[e,a]),Vl.default.createElement(Vl.default.Fragment,null,Vl.default.createElement("div",{className:"action-content"},Vl.default.createElement("label",{htmlFor:"permalink-value",className:"visually-hidden"},"Permalink"),Vl.default.createElement("input",{readOnly:!0,ref:i,value:n,id:"permalink-value"}),Vl.default.createElement(q2,{value:n})),Vl.default.createElement("div",{className:"description"},Vl.default.createElement("p",null,fe("control-permalink-exporter-permalink-description"))))},Mdt=Rqr;var Gl=Z(Pe(),1);var Cdt=()=>{let[e]=bd($_,[]),[t,r]=(0,Gl.useState)(!1),[n,o]=(0,Gl.useState)(""),i=yt(nq),a=vr.getGeoreferenceApiClient(),u="/map_view/",d=(0,Gl.useCallback)(()=>{if(i!==void 0){let h=i(),{searchOptions:v}=h,b=xn(h,["searchOptions"]),x=e.filter(O=>O.id===b.activeBasemapId),M=Object.assign({},b,x.length>0?{customBasemaps:x}:null);return r(!0),a.post(u,{map_view_json:M}).then(O=>{if(O.status===200&&O.data!==void 0){let{map_view_id:D}=O.data,k=vS(`map_view_id=${D}`);return o(k),r(!1),k}})}},[e,i]);return Gl.default.createElement(Gl.default.Fragment,null,Gl.default.createElement("div",{className:"action-content"},Gl.default.createElement("label",{htmlFor:"permalink-mapview",className:"visually-hidden"},"Permalink"),Gl.default.createElement("input",{placeholder:fe("control-permalink-input-mapview-placeholder"),readOnly:!0,value:n,id:"permalink-mapview"}),Gl.default.createElement(q2,{onClick:d,value:n}),Gl.default.createElement("button",{className:Dt("upload-button",t&&"loading"),onClick:d},t?Gl.default.createElement(Gz,null):Gl.default.createElement(bg,{glyph:"upload"}),"Upload")),Gl.default.createElement("div",{className:"description"},Gl.default.createElement("p",null,fe("control-permalink-exporter-mapview-description"))))};var jqr=()=>{let e=!vr.isUserAuthenticated();return wm.default.createElement("div",{className:"vkf-permalink-exporter"},wm.default.createElement(Rie,{defaultActiveKey:1,id:"permalink-exporter-tabs"},wm.default.createElement(fz,{eventKey:1,title:fe("control-permalink-title-permalink")},wm.default.createElement("div",{className:"permalink-exporter-content"},wm.default.createElement(Mdt,null))),wm.default.createElement(fz,{disabled:e,eventKey:2,title:fe("control-permalink-title-map-view")},wm.default.createElement("div",{className:"permalink-exporter-content"},!e&&wm.default.createElement(Cdt,null)))))},Adt=wm.default.memo(jqr);var qqr=()=>{let{baseMapControlEl:e,activeDialog:t,toggleDialog:r,dialogRef:n}=lU(Qre,xc.Permalink);return e!==null?(0,Odt.createPortal)(tN.default.createElement("div",{ref:n},tN.default.createElement("button",{className:Dt("maplibregl-ctrl-permalink",t===xc.Permalink&&"active"),onClick:r,title:fe("control-permalink-open")}),t===xc.Permalink&&tN.default.createElement("div",{className:"content-container"},tN.default.createElement(Adt,null))),e):null},Pdt=qqr;var cU=Z(Pe(),1);var zqr=()=>{let e=yt(tr),t=yt(sf),r=yt(sq),[n]=bd($_,[]),o=vr.getBaseMaps(),i=(0,cU.useMemo)(()=>[...o,...n],[n,o]);return(0,cU.useEffect)(()=>{if(Me(e)){let a=i.find(d=>d.id===t);if(a===void 0)return;let u=a;if(l4(e),nJe(e),u.type==="vector")eJe(e,r);else if(u.type==="wms")QQe(e,u,r);else if(u.type==="xyz")rJe(e,u,r);else throw new Error("Unknown layer type")}},[t,e,r]),null},Ndt=zqr;function Ddt(){return{"NavigationControl.ZoomIn":fe("control-zoom-in"),"NavigationControl.ZoomOut":fe("control-zoom-out"),"FullscreenControl.Enter":fe("control-fullscreen-Enter"),"FullscreenControl.Exit":fe("control-fullscreen-Exit"),"NavigationControl.ResetBearing":fe("control-rotate"),"TerrainControl.Enable":fe("control-toggleviewmode-title"),"TerrainControl.Disable":fe("control-toggleviewmode-title"),"GeolocateControl.FindMyLocation":fe("control-locateme-title"),"GeolocateControl.LocationNotAvailable":fe("control-locateme-location-not-available")}}var Fqr="https://tile-2.kartenforum.slub-dresden.de/styles/maptiler-basic-v2/style.json",Ldt=e=>{let{target:t}=e,r=document.getElementsByClassName("map-container")[0];if(!Me(r))return;let n=QHe(t.getZoom());r.style.setProperty("--vkf-idohist-scale-factor",n)};function kdt(e){let{ChildComponent:t,layout:r,mapViewSettings:n={center:[13.5981217,59.562795],projection:"EPSG:3857",zoom:2},loadMarkerIcon:o=!0}=e,[i,a]=Mo(tr),u=zr(sq),d=(0,Rf.useRef)();return xWe(d,"map"),(0,Rf.useEffect)(()=>{let h=new Tdt({container:d.current,center:n.center,zoom:n.zoom,maxZoom:n.maxZoom,style:Fqr,locale:Ddt(),attributionControl:!1}),v=()=>{if(a(h),u(h.getStyle().layers),o===!0){let{id:b,url:x}=vr.getMarkerSettings();h.loadImage(x).then(M=>{h.addImage(b,M.data,{sdf:!0})})}};return h.on("style.load",v),h.on("zoom",Ldt),()=>{h.off("style.load",v),h.off("zoom",Ldt),a(void 0),h.remove()}},[]),(0,Rf.useEffect)(()=>{if(Me(i)){let h=jVe();return h.forEach(({control:v,position:b})=>{i.addControl(v,b)}),()=>{h.forEach(({control:v})=>{i.removeControl(v)})}}},[i]),Rf.default.createElement("div",{className:"map-container"},Rf.default.createElement("div",{ref:d,className:Dt("map-div","olMap",BVe(r)),tabIndex:0},Me(i)&&Rf.default.createElement(t,null),Rf.default.createElement(xdt,null),Rf.default.createElement(Pdt,null),Rf.default.createElement(Ndt,null)))}var Uqr={baseMapUrl:$d.default.arrayOf($d.default.string),ChildComponent:$d.default.func,layout:$d.default.string,mapViewSettings:$d.default.shape({center:$d.default.arrayOf($d.default.number),projection:$d.default.string,zoom:$d.default.number}),loadMarkerIcon:$d.default.bool};kdt.propTypes=Uqr;var Rdt=kdt;var Bqr=e=>{switch(e){case $s.STANDARD:return Hue;case $s.DRAW:return Kce;case $s.VECTOR_MAP_EXTERNAL:return sdt;default:Hue}},Vqr=(e,t)=>{switch(e){case wc.HORIZONTAL:return Bqr(t);case wc.VERTICAL:return tpe;default:return tpe}},qdt=e=>{let{layout:t}=e,r=zr(dS),n=yt(Ic),o=Vqr(t,n);return(0,rN.useEffect)(()=>{r(t)},[t]),rN.default.createElement(Rdt,{baseMapUrl:vr.getDefaultBaseMapUrls(),enable3d:!0,enableTerrain:!0,layout:t,mapViewSettings:vr.getDefaultMapView(),ChildComponent:o})};qdt.propTypes={layout:jdt.default.oneOf(Object.values(wc))};var zdt=rN.default.memo(qdt);var Gqr=rre.backends.map(e=>e.id==="touch"?Mt(Te({},e),{options:Mt(Te({},e.options),{scrollAngleRanges:[{start:30,end:150},{start:210,end:330}]})}):e),Udt=()=>{let e=r7e(),t=UVe(e),r=(0,Em.useMemo)(()=>Object.assign({},rre,{backends:Gqr}),[]);return Em.default.createElement(mre,{options:r},Em.default.createElement(JFe,null,Em.default.createElement(BGe,null),Em.default.createElement("div",{className:"vkf-plugin-map"},Em.default.createElement(TWe,null),Em.default.createElement(zdt,{layout:t}),Em.default.createElement(ftt,null))))};Udt.propTypes={id:Fdt.default.string.isRequired};var Bdt=Udt;var Hqr=vr;function Wqr(e){Gdt.default.render(Vdt.default.createElement(Bdt,{id:e.id}),e)}return kmt($qr)})();/*! Bundled license information:

object-assign/index.js:
  (*
  object-assign
  (c) Sindre Sorhus
  @license MIT
  *)

react/cjs/react.production.min.js:
  (** @license React v17.0.2
   * react.production.min.js
   *
   * Copyright (c) Facebook, Inc. and its affiliates.
   *
   * This source code is licensed under the MIT license found in the
   * LICENSE file in the root directory of this source tree.
   *)

scheduler/cjs/scheduler.production.min.js:
  (** @license React v0.20.2
   * scheduler.production.min.js
   *
   * Copyright (c) Facebook, Inc. and its affiliates.
   *
   * This source code is licensed under the MIT license found in the
   * LICENSE file in the root directory of this source tree.
   *)

react-dom/cjs/react-dom.production.min.js:
  (** @license React v17.0.2
   * react-dom.production.min.js
   *
   * Copyright (c) Facebook, Inc. and its affiliates.
   *
   * This source code is licensed under the MIT license found in the
   * LICENSE file in the root directory of this source tree.
   *)

react/cjs/react-jsx-runtime.production.min.js:
  (** @license React v17.0.2
   * react-jsx-runtime.production.min.js
   *
   * Copyright (c) Facebook, Inc. and its affiliates.
   *
   * This source code is licensed under the MIT license found in the
   * LICENSE file in the root directory of this source tree.
   *)

maplibre-gl/dist/maplibre-gl.js:
  (**
   * MapLibre GL JS
   * @license 3-Clause BSD. Full text of license: https://github.com/maplibre/maplibre-gl-js/blob/v5.5.0/LICENSE.txt
   *)

classnames/index.js:
  (*!
  	Copyright (c) 2018 Jed Watson.
  	Licensed under the MIT License (MIT), see
  	http://jedwatson.github.io/classnames
  *)

react-is/cjs/react-is.production.min.js:
  (** @license React v16.13.1
   * react-is.production.min.js
   *
   * Copyright (c) Facebook, Inc. and its affiliates.
   *
   * This source code is licensed under the MIT license found in the
   * LICENSE file in the root directory of this source tree.
   *)

keycode/index.js:
  (*!
   * Programatically add the following
   *)

react-is/cjs/react-is.production.min.js:
  (**
   * @license React
   * react-is.production.min.js
   *
   * Copyright (c) Facebook, Inc. and its affiliates.
   *
   * This source code is licensed under the MIT license found in the
   * LICENSE file in the root directory of this source tree.
   *)

react-is/cjs/react-is.production.min.js:
  (** @license React v17.0.2
   * react-is.production.min.js
   *
   * Copyright (c) Facebook, Inc. and its affiliates.
   *
   * This source code is licensed under the MIT license found in the
   * LICENSE file in the root directory of this source tree.
   *)

wms-capabilities/dist/wms-capabilities.mjs:
  (**
   * wms-capabilities @0.6.0
   * @description WMS service Capabilities > JSON, based on openlayers 
   * @license BSD-2-Clause
   * @preserve
   *)

@babel/runtime/helpers/esm/regeneratorRuntime.js:
  (*! regenerator-runtime -- Copyright (c) 2014-present, Facebook, Inc. -- license (MIT): https://github.com/babel/babel/blob/main/packages/babel-helpers/LICENSE *)
*/