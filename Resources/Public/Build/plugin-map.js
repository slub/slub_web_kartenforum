var vk2=(()=>{var Zgt=Object.create;var zI=Object.defineProperty,Kgt=Object.defineProperties,Xgt=Object.getOwnPropertyDescriptor,Jgt=Object.getOwnPropertyDescriptors,Qgt=Object.getOwnPropertyNames,G4=Object.getOwnPropertySymbols,evt=Object.getPrototypeOf,xV=Object.prototype.hasOwnProperty,Kde=Object.prototype.propertyIsEnumerable;var aw=(e,t)=>(t=Symbol[e])?t:Symbol.for("Symbol."+e),wV=e=>{throw TypeError(e)},ig=Math.pow,bV=(e,t,r)=>t in e?zI(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r,Te=(e,t)=>{for(var r in t||(t={}))xV.call(t,r)&&bV(e,r,t[r]);if(G4)for(var r of G4(t))Kde.call(t,r)&&bV(e,r,t[r]);return e},Dt=(e,t)=>Kgt(e,Jgt(t));var Xde=e=>typeof e=="symbol"?e:e+"",En=(e,t)=>{var r={};for(var n in e)xV.call(e,n)&&t.indexOf(n)<0&&(r[n]=e[n]);if(e!=null&&G4)for(var n of G4(e))t.indexOf(n)<0&&Kde.call(e,n)&&(r[n]=e[n]);return r};var tvt=(e,t)=>()=>(e&&(t=e(e=0)),t);var N=(e,t)=>()=>(t||e((t={exports:{}}).exports,t),t.exports),sw=(e,t)=>{for(var r in t)zI(e,r,{get:t[r],enumerable:!0})},Jde=(e,t,r,n)=>{if(t&&typeof t=="object"||typeof t=="function")for(let o of Qgt(t))!xV.call(e,o)&&o!==r&&zI(e,o,{get:()=>t[o],enumerable:!(n=Xgt(t,o))||n.enumerable});return e};var ee=(e,t,r)=>(r=e!=null?Zgt(evt(e)):{},Jde(t||!e||!e.__esModule?zI(r,"default",{value:e,enumerable:!0}):r,e)),rvt=e=>Jde(zI({},"__esModule",{value:!0}),e);var St=(e,t,r)=>bV(e,typeof t!="symbol"?t+"":t,r),EV=(e,t,r)=>t.has(e)||wV("Cannot "+r);var qr=(e,t,r)=>(EV(e,t,"read from private field"),r?r.call(e):t.get(e)),Ha=(e,t,r)=>t.has(e)?wV("Cannot add the same private member more than once"):t instanceof WeakSet?t.add(e):t.set(e,r),$a=(e,t,r,n)=>(EV(e,t,"write to private field"),n?n.call(e,r):t.set(e,r),r),fa=(e,t,r)=>(EV(e,t,"access private method"),r);var yt=(e,t,r)=>new Promise((n,o)=>{var i=h=>{try{c(r.next(h))}catch(m){o(m)}},a=h=>{try{c(r.throw(h))}catch(m){o(m)}},c=h=>h.done?n(h.value):Promise.resolve(h.value).then(i,a);c((r=r.apply(e,t)).next())}),$1=function(e,t){this[0]=e,this[1]=t},SV=(e,t,r)=>{var n=(a,c,h,m)=>{try{var y=r[a](c),w=(c=y.value)instanceof $1,E=y.done;Promise.resolve(w?c[0]:c).then(A=>w?n(a==="return"?a:"next",c[1]?{done:A.done,value:A.value}:A,h,m):h({value:A,done:E})).catch(A=>n("throw",A,h,m))}catch(A){m(A)}},o=a=>i[a]=c=>new Promise((h,m)=>n(a,c,h,m)),i={};return r=r.apply(e,t),i[aw("asyncIterator")]=()=>i,o("next"),o("throw"),o("return"),i},TV=e=>{var t=e[aw("asyncIterator")],r=!1,n,o={};return t==null?(t=e[aw("iterator")](),n=i=>o[i]=a=>t[i](a)):(t=t.call(e),n=i=>o[i]=a=>{if(r){if(r=!1,i==="throw")throw a;return a}return r=!0,{done:!1,value:new $1(new Promise(c=>{var h=t[i](a);h instanceof Object||wV("Object expected"),c(h)}),1)}}),o[aw("iterator")]=()=>o,n("next"),"throw"in t?n("throw"):o.throw=i=>{throw i},"return"in t&&n("return"),o},Qde=(e,t,r)=>(t=e[aw("asyncIterator")])?t.call(e):(e=e[aw("iterator")](),t={},r=(n,o)=>(o=e[n])&&(t[n]=i=>new Promise((a,c,h)=>(i=o.call(e,i),h=i.done,Promise.resolve(i.value).then(m=>a({value:m,done:h}),c)))),r("next"),r("return"),t);var _,u=tvt(()=>{_={env:{}}});var H4=N((X8r,the)=>{"use strict";u();var ehe=Object.getOwnPropertySymbols,ovt=Object.prototype.hasOwnProperty,ivt=Object.prototype.propertyIsEnumerable;function avt(e){if(e==null)throw new TypeError("Object.assign cannot be called with null or undefined");return Object(e)}function svt(){try{if(!Object.assign)return!1;var e=new String("abc");if(e[5]="de",Object.getOwnPropertyNames(e)[0]==="5")return!1;for(var t={},r=0;r<10;r++)t["_"+String.fromCharCode(r)]=r;var n=Object.getOwnPropertyNames(t).map(function(i){return t[i]});if(n.join("")!=="0123456789")return!1;var o={};return"abcdefghijklmnopqrst".split("").forEach(function(i){o[i]=i}),Object.keys(Object.assign({},o)).join("")==="abcdefghijklmnopqrst"}catch(i){return!1}}the.exports=svt()?Object.assign:function(e,t){for(var r,n=avt(e),o,i=1;i<arguments.length;i++){r=Object(arguments[i]);for(var a in r)ovt.call(r,a)&&(n[a]=r[a]);if(ehe){o=ehe(r);for(var c=0;c<o.length;c++)ivt.call(r,o[c])&&(n[o[c]]=r[o[c]])}}return n}});var vhe=N(Uo=>{"use strict";u();var MV=H4(),lw=60103,ohe=60106;Uo.Fragment=60107;Uo.StrictMode=60108;Uo.Profiler=60114;var ihe=60109,ahe=60110,she=60112;Uo.Suspense=60113;var lhe=60115,uhe=60116;typeof Symbol=="function"&&Symbol.for&&(Up=Symbol.for,lw=Up("react.element"),ohe=Up("react.portal"),Uo.Fragment=Up("react.fragment"),Uo.StrictMode=Up("react.strict_mode"),Uo.Profiler=Up("react.profiler"),ihe=Up("react.provider"),ahe=Up("react.context"),she=Up("react.forward_ref"),Uo.Suspense=Up("react.suspense"),lhe=Up("react.memo"),uhe=Up("react.lazy"));var Up,rhe=typeof Symbol=="function"&&Symbol.iterator;function lvt(e){return e===null||typeof e!="object"?null:(e=rhe&&e[rhe]||e["@@iterator"],typeof e=="function"?e:null)}function FI(e){for(var t="https://reactjs.org/docs/error-decoder.html?invariant="+e,r=1;r<arguments.length;r++)t+="&args[]="+encodeURIComponent(arguments[r]);return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var che={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},phe={};function uw(e,t,r){this.props=e,this.context=t,this.refs=phe,this.updater=r||che}uw.prototype.isReactComponent={};uw.prototype.setState=function(e,t){if(typeof e!="object"&&typeof e!="function"&&e!=null)throw Error(FI(85));this.updater.enqueueSetState(this,e,t,"setState")};uw.prototype.forceUpdate=function(e){this.updater.enqueueForceUpdate(this,e,"forceUpdate")};function fhe(){}fhe.prototype=uw.prototype;function CV(e,t,r){this.props=e,this.context=t,this.refs=phe,this.updater=r||che}var AV=CV.prototype=new fhe;AV.constructor=CV;MV(AV,uw.prototype);AV.isPureReactComponent=!0;var OV={current:null},dhe=Object.prototype.hasOwnProperty,hhe={key:!0,ref:!0,__self:!0,__source:!0};function mhe(e,t,r){var n,o={},i=null,a=null;if(t!=null)for(n in t.ref!==void 0&&(a=t.ref),t.key!==void 0&&(i=""+t.key),t)dhe.call(t,n)&&!hhe.hasOwnProperty(n)&&(o[n]=t[n]);var c=arguments.length-2;if(c===1)o.children=r;else if(1<c){for(var h=Array(c),m=0;m<c;m++)h[m]=arguments[m+2];o.children=h}if(e&&e.defaultProps)for(n in c=e.defaultProps,c)o[n]===void 0&&(o[n]=c[n]);return{$$typeof:lw,type:e,key:i,ref:a,props:o,_owner:OV.current}}function uvt(e,t){return{$$typeof:lw,type:e.type,key:t,ref:e.ref,props:e.props,_owner:e._owner}}function PV(e){return typeof e=="object"&&e!==null&&e.$$typeof===lw}function cvt(e){var t={"=":"=0",":":"=2"};return"$"+e.replace(/[=:]/g,function(r){return t[r]})}var nhe=/\/+/g;function IV(e,t){return typeof e=="object"&&e!==null&&e.key!=null?cvt(""+e.key):t.toString(36)}function W4(e,t,r,n,o){var i=typeof e;(i==="undefined"||i==="boolean")&&(e=null);var a=!1;if(e===null)a=!0;else switch(i){case"string":case"number":a=!0;break;case"object":switch(e.$$typeof){case lw:case ohe:a=!0}}if(a)return a=e,o=o(a),e=n===""?"."+IV(a,0):n,Array.isArray(o)?(r="",e!=null&&(r=e.replace(nhe,"$&/")+"/"),W4(o,t,r,"",function(m){return m})):o!=null&&(PV(o)&&(o=uvt(o,r+(!o.key||a&&a.key===o.key?"":(""+o.key).replace(nhe,"$&/")+"/")+e)),t.push(o)),1;if(a=0,n=n===""?".":n+":",Array.isArray(e))for(var c=0;c<e.length;c++){i=e[c];var h=n+IV(i,c);a+=W4(i,t,r,h,o)}else if(h=lvt(e),typeof h=="function")for(e=h.call(e),c=0;!(i=e.next()).done;)i=i.value,h=n+IV(i,c++),a+=W4(i,t,r,h,o);else if(i==="object")throw t=""+e,Error(FI(31,t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t));return a}function $4(e,t,r){if(e==null)return e;var n=[],o=0;return W4(e,n,"","",function(i){return t.call(r,i,o++)}),n}function pvt(e){if(e._status===-1){var t=e._result;t=t(),e._status=0,e._result=t,t.then(function(r){e._status===0&&(r=r.default,e._status=1,e._result=r)},function(r){e._status===0&&(e._status=2,e._result=r)})}if(e._status===1)return e._result;throw e._result}var ghe={current:null};function ag(){var e=ghe.current;if(e===null)throw Error(FI(321));return e}var fvt={ReactCurrentDispatcher:ghe,ReactCurrentBatchConfig:{transition:0},ReactCurrentOwner:OV,IsSomeRendererActing:{current:!1},assign:MV};Uo.Children={map:$4,forEach:function(e,t,r){$4(e,function(){t.apply(this,arguments)},r)},count:function(e){var t=0;return $4(e,function(){t++}),t},toArray:function(e){return $4(e,function(t){return t})||[]},only:function(e){if(!PV(e))throw Error(FI(143));return e}};Uo.Component=uw;Uo.PureComponent=CV;Uo.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=fvt;Uo.cloneElement=function(e,t,r){if(e==null)throw Error(FI(267,e));var n=MV({},e.props),o=e.key,i=e.ref,a=e._owner;if(t!=null){if(t.ref!==void 0&&(i=t.ref,a=OV.current),t.key!==void 0&&(o=""+t.key),e.type&&e.type.defaultProps)var c=e.type.defaultProps;for(h in t)dhe.call(t,h)&&!hhe.hasOwnProperty(h)&&(n[h]=t[h]===void 0&&c!==void 0?c[h]:t[h])}var h=arguments.length-2;if(h===1)n.children=r;else if(1<h){c=Array(h);for(var m=0;m<h;m++)c[m]=arguments[m+2];n.children=c}return{$$typeof:lw,type:e.type,key:o,ref:i,props:n,_owner:a}};Uo.createContext=function(e,t){return t===void 0&&(t=null),e={$$typeof:ahe,_calculateChangedBits:t,_currentValue:e,_currentValue2:e,_threadCount:0,Provider:null,Consumer:null},e.Provider={$$typeof:ihe,_context:e},e.Consumer=e};Uo.createElement=mhe;Uo.createFactory=function(e){var t=mhe.bind(null,e);return t.type=e,t};Uo.createRef=function(){return{current:null}};Uo.forwardRef=function(e){return{$$typeof:she,render:e}};Uo.isValidElement=PV;Uo.lazy=function(e){return{$$typeof:uhe,_payload:{_status:-1,_result:e},_init:pvt}};Uo.memo=function(e,t){return{$$typeof:lhe,type:e,compare:t===void 0?null:t}};Uo.useCallback=function(e,t){return ag().useCallback(e,t)};Uo.useContext=function(e,t){return ag().useContext(e,t)};Uo.useDebugValue=function(){};Uo.useEffect=function(e,t){return ag().useEffect(e,t)};Uo.useImperativeHandle=function(e,t,r){return ag().useImperativeHandle(e,t,r)};Uo.useLayoutEffect=function(e,t){return ag().useLayoutEffect(e,t)};Uo.useMemo=function(e,t){return ag().useMemo(e,t)};Uo.useReducer=function(e,t,r){return ag().useReducer(e,t,r)};Uo.useRef=function(e){return ag().useRef(e)};Uo.useState=function(e){return ag().useState(e)};Uo.version="17.0.2"});var ke=N((tFr,yhe)=>{"use strict";u();yhe.exports=vhe()});var She=N(ai=>{"use strict";u();var pw,VI,X4,qV;typeof performance=="object"&&typeof performance.now=="function"?(_he=performance,ai.unstable_now=function(){return _he.now()}):(DV=Date,bhe=DV.now(),ai.unstable_now=function(){return DV.now()-bhe});var _he,DV,bhe;typeof window=="undefined"||typeof MessageChannel!="function"?(cw=null,NV=null,LV=function(){if(cw!==null)try{var e=ai.unstable_now();cw(!0,e),cw=null}catch(t){throw setTimeout(LV,0),t}},pw=function(e){cw!==null?setTimeout(pw,0,e):(cw=e,setTimeout(LV,0))},VI=function(e,t){NV=setTimeout(e,t)},X4=function(){clearTimeout(NV)},ai.unstable_shouldYield=function(){return!1},qV=ai.unstable_forceFrameRate=function(){}):(xhe=window.setTimeout,whe=window.clearTimeout,typeof console!="undefined"&&(Ehe=window.cancelAnimationFrame,typeof window.requestAnimationFrame!="function"&&console.error("This browser doesn't support requestAnimationFrame. Make sure that you load a polyfill in older browsers. https://reactjs.org/link/react-polyfills"),typeof Ehe!="function"&&console.error("This browser doesn't support cancelAnimationFrame. Make sure that you load a polyfill in older browsers. https://reactjs.org/link/react-polyfills")),UI=!1,BI=null,Y4=-1,kV=5,RV=0,ai.unstable_shouldYield=function(){return ai.unstable_now()>=RV},qV=function(){},ai.unstable_forceFrameRate=function(e){0>e||125<e?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):kV=0<e?Math.floor(1e3/e):5},jV=new MessageChannel,Z4=jV.port2,jV.port1.onmessage=function(){if(BI!==null){var e=ai.unstable_now();RV=e+kV;try{BI(!0,e)?Z4.postMessage(null):(UI=!1,BI=null)}catch(t){throw Z4.postMessage(null),t}}else UI=!1},pw=function(e){BI=e,UI||(UI=!0,Z4.postMessage(null))},VI=function(e,t){Y4=xhe(function(){e(ai.unstable_now())},t)},X4=function(){whe(Y4),Y4=-1});var cw,NV,LV,xhe,whe,Ehe,UI,BI,Y4,kV,RV,jV,Z4;function zV(e,t){var r=e.length;e.push(t);e:for(;;){var n=r-1>>>1,o=e[n];if(o!==void 0&&0<K4(o,t))e[n]=t,e[r]=o,r=n;else break e}}function ld(e){return e=e[0],e===void 0?null:e}function J4(e){var t=e[0];if(t!==void 0){var r=e.pop();if(r!==t){e[0]=r;e:for(var n=0,o=e.length;n<o;){var i=2*(n+1)-1,a=e[i],c=i+1,h=e[c];if(a!==void 0&&0>K4(a,r))h!==void 0&&0>K4(h,a)?(e[n]=h,e[c]=r,n=c):(e[n]=a,e[i]=r,n=i);else if(h!==void 0&&0>K4(h,r))e[n]=h,e[c]=r,n=c;else break e}}return t}return null}function K4(e,t){var r=e.sortIndex-t.sortIndex;return r!==0?r:e.id-t.id}var xh=[],$v=[],dvt=1,Bp=null,tu=3,Q4=!1,W1=!1,GI=!1;function FV(e){for(var t=ld($v);t!==null;){if(t.callback===null)J4($v);else if(t.startTime<=e)J4($v),t.sortIndex=t.expirationTime,zV(xh,t);else break;t=ld($v)}}function UV(e){if(GI=!1,FV(e),!W1)if(ld(xh)!==null)W1=!0,pw(BV);else{var t=ld($v);t!==null&&VI(UV,t.startTime-e)}}function BV(e,t){W1=!1,GI&&(GI=!1,X4()),Q4=!0;var r=tu;try{for(FV(t),Bp=ld(xh);Bp!==null&&(!(Bp.expirationTime>t)||e&&!ai.unstable_shouldYield());){var n=Bp.callback;if(typeof n=="function"){Bp.callback=null,tu=Bp.priorityLevel;var o=n(Bp.expirationTime<=t);t=ai.unstable_now(),typeof o=="function"?Bp.callback=o:Bp===ld(xh)&&J4(xh),FV(t)}else J4(xh);Bp=ld(xh)}if(Bp!==null)var i=!0;else{var a=ld($v);a!==null&&VI(UV,a.startTime-t),i=!1}return i}finally{Bp=null,tu=r,Q4=!1}}var hvt=qV;ai.unstable_IdlePriority=5;ai.unstable_ImmediatePriority=1;ai.unstable_LowPriority=4;ai.unstable_NormalPriority=3;ai.unstable_Profiling=null;ai.unstable_UserBlockingPriority=2;ai.unstable_cancelCallback=function(e){e.callback=null};ai.unstable_continueExecution=function(){W1||Q4||(W1=!0,pw(BV))};ai.unstable_getCurrentPriorityLevel=function(){return tu};ai.unstable_getFirstCallbackNode=function(){return ld(xh)};ai.unstable_next=function(e){switch(tu){case 1:case 2:case 3:var t=3;break;default:t=tu}var r=tu;tu=t;try{return e()}finally{tu=r}};ai.unstable_pauseExecution=function(){};ai.unstable_requestPaint=hvt;ai.unstable_runWithPriority=function(e,t){switch(e){case 1:case 2:case 3:case 4:case 5:break;default:e=3}var r=tu;tu=e;try{return t()}finally{tu=r}};ai.unstable_scheduleCallback=function(e,t,r){var n=ai.unstable_now();switch(typeof r=="object"&&r!==null?(r=r.delay,r=typeof r=="number"&&0<r?n+r:n):r=n,e){case 1:var o=-1;break;case 2:o=250;break;case 5:o=1073741823;break;case 4:o=1e4;break;default:o=5e3}return o=r+o,e={id:dvt++,callback:t,priorityLevel:e,startTime:r,expirationTime:o,sortIndex:-1},r>n?(e.sortIndex=r,zV($v,e),ld(xh)===null&&e===ld($v)&&(GI?X4():GI=!0,VI(UV,r-n))):(e.sortIndex=o,zV(xh,e),W1||Q4||(W1=!0,pw(BV))),e};ai.unstable_wrapCallback=function(e){var t=tu;return function(){var r=tu;tu=t;try{return e.apply(this,arguments)}finally{tu=r}}}});var Ihe=N((iFr,The)=>{"use strict";u();The.exports=She()});var fve=N(Yp=>{"use strict";u();var $5=ke(),da=H4(),Ws=Ihe();function lr(e){for(var t="https://reactjs.org/docs/error-decoder.html?invariant="+e,r=1;r<arguments.length;r++)t+="&args[]="+encodeURIComponent(arguments[r]);return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}if(!$5)throw Error(lr(227));var zme=new Set,bM={};function o_(e,t){Dw(e,t),Dw(e+"Capture",t)}function Dw(e,t){for(bM[e]=t,e=0;e<t.length;e++)zme.add(t[e])}var fg=!(typeof window=="undefined"||typeof window.document=="undefined"||typeof window.document.createElement=="undefined"),mvt=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,Mhe=Object.prototype.hasOwnProperty,Che={},Ahe={};function gvt(e){return Mhe.call(Ahe,e)?!0:Mhe.call(Che,e)?!1:mvt.test(e)?Ahe[e]=!0:(Che[e]=!0,!1)}function vvt(e,t,r,n){if(r!==null&&r.type===0)return!1;switch(typeof t){case"function":case"symbol":return!0;case"boolean":return n?!1:r!==null?!r.acceptsBooleans:(e=e.toLowerCase().slice(0,5),e!=="data-"&&e!=="aria-");default:return!1}}function yvt(e,t,r,n){if(t===null||typeof t=="undefined"||vvt(e,t,r,n))return!0;if(n)return!1;if(r!==null)switch(r.type){case 3:return!t;case 4:return t===!1;case 5:return isNaN(t);case 6:return isNaN(t)||1>t}return!1}function Lu(e,t,r,n,o,i,a){this.acceptsBooleans=t===2||t===3||t===4,this.attributeName=n,this.attributeNamespace=o,this.mustUseProperty=r,this.propertyName=e,this.type=t,this.sanitizeURL=i,this.removeEmptyString=a}var xl={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(e){xl[e]=new Lu(e,0,!1,e,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(e){var t=e[0];xl[t]=new Lu(t,1,!1,e[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(e){xl[e]=new Lu(e,2,!1,e.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(e){xl[e]=new Lu(e,2,!1,e,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(e){xl[e]=new Lu(e,3,!1,e.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(e){xl[e]=new Lu(e,3,!0,e,null,!1,!1)});["capture","download"].forEach(function(e){xl[e]=new Lu(e,4,!1,e,null,!1,!1)});["cols","rows","size","span"].forEach(function(e){xl[e]=new Lu(e,6,!1,e,null,!1,!1)});["rowSpan","start"].forEach(function(e){xl[e]=new Lu(e,5,!1,e.toLowerCase(),null,!1,!1)});var XG=/[\-:]([a-z])/g;function JG(e){return e[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(e){var t=e.replace(XG,JG);xl[t]=new Lu(t,1,!1,e,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(e){var t=e.replace(XG,JG);xl[t]=new Lu(t,1,!1,e,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(e){var t=e.replace(XG,JG);xl[t]=new Lu(t,1,!1,e,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(e){xl[e]=new Lu(e,1,!1,e.toLowerCase(),null,!1,!1)});xl.xlinkHref=new Lu("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(e){xl[e]=new Lu(e,1,!1,e.toLowerCase(),null,!0,!0)});function QG(e,t,r,n){var o=xl.hasOwnProperty(t)?xl[t]:null,i=o!==null?o.type===0:n?!1:!(!(2<t.length)||t[0]!=="o"&&t[0]!=="O"||t[1]!=="n"&&t[1]!=="N");i||(yvt(t,r,o,n)&&(r=null),n||o===null?gvt(t)&&(r===null?e.removeAttribute(t):e.setAttribute(t,""+r)):o.mustUseProperty?e[o.propertyName]=r===null?o.type===3?!1:"":r:(t=o.attributeName,n=o.attributeNamespace,r===null?e.removeAttribute(t):(o=o.type,r=o===3||o===4&&r===!0?"":""+r,n?e.setAttributeNS(n,t,r):e.setAttribute(t,r))))}var i_=$5.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,nM=60103,Z1=60106,Yv=60107,eH=60108,lM=60114,tH=60109,rH=60110,W5=60112,uM=60113,E5=60120,Y5=60115,nH=60116,oH=60121,iH=60128,Fme=60129,aH=60130,pG=60131;typeof Symbol=="function"&&Symbol.for&&(Ps=Symbol.for,nM=Ps("react.element"),Z1=Ps("react.portal"),Yv=Ps("react.fragment"),eH=Ps("react.strict_mode"),lM=Ps("react.profiler"),tH=Ps("react.provider"),rH=Ps("react.context"),W5=Ps("react.forward_ref"),uM=Ps("react.suspense"),E5=Ps("react.suspense_list"),Y5=Ps("react.memo"),nH=Ps("react.lazy"),oH=Ps("react.block"),Ps("react.scope"),iH=Ps("react.opaque.id"),Fme=Ps("react.debug_trace_mode"),aH=Ps("react.offscreen"),pG=Ps("react.legacy_hidden"));var Ps,Ohe=typeof Symbol=="function"&&Symbol.iterator;function HI(e){return e===null||typeof e!="object"?null:(e=Ohe&&e[Ohe]||e["@@iterator"],typeof e=="function"?e:null)}var VV;function oM(e){if(VV===void 0)try{throw Error()}catch(r){var t=r.stack.trim().match(/\n( *(at )?)/);VV=t&&t[1]||""}return`
`+VV+e}var GV=!1;function e5(e,t){if(!e||GV)return"";GV=!0;var r=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(t){if(t=function(){throw Error()},Object.defineProperty(t.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(t,[])}catch(h){var n=h}Reflect.construct(e,[],t)}else{try{t.call()}catch(h){n=h}e.call(t.prototype)}}else{try{throw Error()}catch(h){n=h}e()}}catch(h){if(h&&n&&typeof h.stack=="string"){for(var o=h.stack.split(`
`),i=n.stack.split(`
`),a=o.length-1,c=i.length-1;1<=a&&0<=c&&o[a]!==i[c];)c--;for(;1<=a&&0<=c;a--,c--)if(o[a]!==i[c]){if(a!==1||c!==1)do if(a--,c--,0>c||o[a]!==i[c])return`
`+o[a].replace(" at new "," at ");while(1<=a&&0<=c);break}}}finally{GV=!1,Error.prepareStackTrace=r}return(e=e?e.displayName||e.name:"")?oM(e):""}function _vt(e){switch(e.tag){case 5:return oM(e.type);case 16:return oM("Lazy");case 13:return oM("Suspense");case 19:return oM("SuspenseList");case 0:case 2:case 15:return e=e5(e.type,!1),e;case 11:return e=e5(e.type.render,!1),e;case 22:return e=e5(e.type._render,!1),e;case 1:return e=e5(e.type,!0),e;default:return""}}function ww(e){if(e==null)return null;if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e;switch(e){case Yv:return"Fragment";case Z1:return"Portal";case lM:return"Profiler";case eH:return"StrictMode";case uM:return"Suspense";case E5:return"SuspenseList"}if(typeof e=="object")switch(e.$$typeof){case rH:return(e.displayName||"Context")+".Consumer";case tH:return(e._context.displayName||"Context")+".Provider";case W5:var t=e.render;return t=t.displayName||t.name||"",e.displayName||(t!==""?"ForwardRef("+t+")":"ForwardRef");case Y5:return ww(e.type);case oH:return ww(e._render);case nH:t=e._payload,e=e._init;try{return ww(e(t))}catch(r){}}return null}function ay(e){switch(typeof e){case"boolean":case"number":case"object":case"string":case"undefined":return e;default:return""}}function Ume(e){var t=e.type;return(e=e.nodeName)&&e.toLowerCase()==="input"&&(t==="checkbox"||t==="radio")}function bvt(e){var t=Ume(e)?"checked":"value",r=Object.getOwnPropertyDescriptor(e.constructor.prototype,t),n=""+e[t];if(!e.hasOwnProperty(t)&&typeof r!="undefined"&&typeof r.get=="function"&&typeof r.set=="function"){var o=r.get,i=r.set;return Object.defineProperty(e,t,{configurable:!0,get:function(){return o.call(this)},set:function(a){n=""+a,i.call(this,a)}}),Object.defineProperty(e,t,{enumerable:r.enumerable}),{getValue:function(){return n},setValue:function(a){n=""+a},stopTracking:function(){e._valueTracker=null,delete e[t]}}}}function t5(e){e._valueTracker||(e._valueTracker=bvt(e))}function Bme(e){if(!e)return!1;var t=e._valueTracker;if(!t)return!0;var r=t.getValue(),n="";return e&&(n=Ume(e)?e.checked?"true":"false":e.value),e=n,e!==r?(t.setValue(e),!0):!1}function S5(e){if(e=e||(typeof document!="undefined"?document:void 0),typeof e=="undefined")return null;try{return e.activeElement||e.body}catch(t){return e.body}}function fG(e,t){var r=t.checked;return da({},t,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:r!=null?r:e._wrapperState.initialChecked})}function Phe(e,t){var r=t.defaultValue==null?"":t.defaultValue,n=t.checked!=null?t.checked:t.defaultChecked;r=ay(t.value!=null?t.value:r),e._wrapperState={initialChecked:n,initialValue:r,controlled:t.type==="checkbox"||t.type==="radio"?t.checked!=null:t.value!=null}}function Vme(e,t){t=t.checked,t!=null&&QG(e,"checked",t,!1)}function dG(e,t){Vme(e,t);var r=ay(t.value),n=t.type;if(r!=null)n==="number"?(r===0&&e.value===""||e.value!=r)&&(e.value=""+r):e.value!==""+r&&(e.value=""+r);else if(n==="submit"||n==="reset"){e.removeAttribute("value");return}t.hasOwnProperty("value")?hG(e,t.type,r):t.hasOwnProperty("defaultValue")&&hG(e,t.type,ay(t.defaultValue)),t.checked==null&&t.defaultChecked!=null&&(e.defaultChecked=!!t.defaultChecked)}function Dhe(e,t,r){if(t.hasOwnProperty("value")||t.hasOwnProperty("defaultValue")){var n=t.type;if(!(n!=="submit"&&n!=="reset"||t.value!==void 0&&t.value!==null))return;t=""+e._wrapperState.initialValue,r||t===e.value||(e.value=t),e.defaultValue=t}r=e.name,r!==""&&(e.name=""),e.defaultChecked=!!e._wrapperState.initialChecked,r!==""&&(e.name=r)}function hG(e,t,r){(t!=="number"||S5(e.ownerDocument)!==e)&&(r==null?e.defaultValue=""+e._wrapperState.initialValue:e.defaultValue!==""+r&&(e.defaultValue=""+r))}function xvt(e){var t="";return $5.Children.forEach(e,function(r){r!=null&&(t+=r)}),t}function mG(e,t){return e=da({children:void 0},t),(t=xvt(t.children))&&(e.children=t),e}function Ew(e,t,r,n){if(e=e.options,t){t={};for(var o=0;o<r.length;o++)t["$"+r[o]]=!0;for(r=0;r<e.length;r++)o=t.hasOwnProperty("$"+e[r].value),e[r].selected!==o&&(e[r].selected=o),o&&n&&(e[r].defaultSelected=!0)}else{for(r=""+ay(r),t=null,o=0;o<e.length;o++){if(e[o].value===r){e[o].selected=!0,n&&(e[o].defaultSelected=!0);return}t!==null||e[o].disabled||(t=e[o])}t!==null&&(t.selected=!0)}}function gG(e,t){if(t.dangerouslySetInnerHTML!=null)throw Error(lr(91));return da({},t,{value:void 0,defaultValue:void 0,children:""+e._wrapperState.initialValue})}function Nhe(e,t){var r=t.value;if(r==null){if(r=t.children,t=t.defaultValue,r!=null){if(t!=null)throw Error(lr(92));if(Array.isArray(r)){if(!(1>=r.length))throw Error(lr(93));r=r[0]}t=r}t==null&&(t=""),r=t}e._wrapperState={initialValue:ay(r)}}function Gme(e,t){var r=ay(t.value),n=ay(t.defaultValue);r!=null&&(r=""+r,r!==e.value&&(e.value=r),t.defaultValue==null&&e.defaultValue!==r&&(e.defaultValue=r)),n!=null&&(e.defaultValue=""+n)}function Lhe(e){var t=e.textContent;t===e._wrapperState.initialValue&&t!==""&&t!==null&&(e.value=t)}var vG={html:"http://www.w3.org/1999/xhtml",mathml:"http://www.w3.org/1998/Math/MathML",svg:"http://www.w3.org/2000/svg"};function Hme(e){switch(e){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function yG(e,t){return e==null||e==="http://www.w3.org/1999/xhtml"?Hme(t):e==="http://www.w3.org/2000/svg"&&t==="foreignObject"?"http://www.w3.org/1999/xhtml":e}var r5,$me=function(e){return typeof MSApp!="undefined"&&MSApp.execUnsafeLocalFunction?function(t,r,n,o){MSApp.execUnsafeLocalFunction(function(){return e(t,r,n,o)})}:e}(function(e,t){if(e.namespaceURI!==vG.svg||"innerHTML"in e)e.innerHTML=t;else{for(r5=r5||document.createElement("div"),r5.innerHTML="<svg>"+t.valueOf().toString()+"</svg>",t=r5.firstChild;e.firstChild;)e.removeChild(e.firstChild);for(;t.firstChild;)e.appendChild(t.firstChild)}});function xM(e,t){if(t){var r=e.firstChild;if(r&&r===e.lastChild&&r.nodeType===3){r.nodeValue=t;return}}e.textContent=t}var cM={animationIterationCount:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},wvt=["Webkit","ms","Moz","O"];Object.keys(cM).forEach(function(e){wvt.forEach(function(t){t=t+e.charAt(0).toUpperCase()+e.substring(1),cM[t]=cM[e]})});function Wme(e,t,r){return t==null||typeof t=="boolean"||t===""?"":r||typeof t!="number"||t===0||cM.hasOwnProperty(e)&&cM[e]?(""+t).trim():t+"px"}function Yme(e,t){e=e.style;for(var r in t)if(t.hasOwnProperty(r)){var n=r.indexOf("--")===0,o=Wme(r,t[r],n);r==="float"&&(r="cssFloat"),n?e.setProperty(r,o):e[r]=o}}var Evt=da({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function _G(e,t){if(t){if(Evt[e]&&(t.children!=null||t.dangerouslySetInnerHTML!=null))throw Error(lr(137,e));if(t.dangerouslySetInnerHTML!=null){if(t.children!=null)throw Error(lr(60));if(!(typeof t.dangerouslySetInnerHTML=="object"&&"__html"in t.dangerouslySetInnerHTML))throw Error(lr(61))}if(t.style!=null&&typeof t.style!="object")throw Error(lr(62))}}function bG(e,t){if(e.indexOf("-")===-1)return typeof t.is=="string";switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}function sH(e){return e=e.target||e.srcElement||window,e.correspondingUseElement&&(e=e.correspondingUseElement),e.nodeType===3?e.parentNode:e}var xG=null,Sw=null,Tw=null;function khe(e){if(e=kM(e)){if(typeof xG!="function")throw Error(lr(280));var t=e.stateNode;t&&(t=eL(t),xG(e.stateNode,e.type,t))}}function Zme(e){Sw?Tw?Tw.push(e):Tw=[e]:Sw=e}function Kme(){if(Sw){var e=Sw,t=Tw;if(Tw=Sw=null,khe(e),t)for(e=0;e<t.length;e++)khe(t[e])}}function lH(e,t){return e(t)}function Xme(e,t,r,n,o){return e(t,r,n,o)}function uH(){}var Jme=lH,K1=!1,HV=!1;function cH(){(Sw!==null||Tw!==null)&&(uH(),Kme())}function Svt(e,t,r){if(HV)return e(t,r);HV=!0;try{return Jme(e,t,r)}finally{HV=!1,cH()}}function wM(e,t){var r=e.stateNode;if(r===null)return null;var n=eL(r);if(n===null)return null;r=n[t];e:switch(t){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(n=!n.disabled)||(e=e.type,n=!(e==="button"||e==="input"||e==="select"||e==="textarea")),e=!n;break e;default:e=!1}if(e)return null;if(r&&typeof r!="function")throw Error(lr(231,t,typeof r));return r}var wG=!1;if(fg)try{fw={},Object.defineProperty(fw,"passive",{get:function(){wG=!0}}),window.addEventListener("test",fw,fw),window.removeEventListener("test",fw,fw)}catch(e){wG=!1}var fw;function Tvt(e,t,r,n,o,i,a,c,h){var m=Array.prototype.slice.call(arguments,3);try{t.apply(r,m)}catch(y){this.onError(y)}}var pM=!1,T5=null,I5=!1,EG=null,Ivt={onError:function(e){pM=!0,T5=e}};function Mvt(e,t,r,n,o,i,a,c,h){pM=!1,T5=null,Tvt.apply(Ivt,arguments)}function Cvt(e,t,r,n,o,i,a,c,h){if(Mvt.apply(this,arguments),pM){if(pM){var m=T5;pM=!1,T5=null}else throw Error(lr(198));I5||(I5=!0,EG=m)}}function a_(e){var t=e,r=e;if(e.alternate)for(;t.return;)t=t.return;else{e=t;do t=e,(t.flags&1026)!==0&&(r=t.return),e=t.return;while(e)}return t.tag===3?r:null}function Qme(e){if(e.tag===13){var t=e.memoizedState;if(t===null&&(e=e.alternate,e!==null&&(t=e.memoizedState)),t!==null)return t.dehydrated}return null}function Rhe(e){if(a_(e)!==e)throw Error(lr(188))}function Avt(e){var t=e.alternate;if(!t){if(t=a_(e),t===null)throw Error(lr(188));return t!==e?null:e}for(var r=e,n=t;;){var o=r.return;if(o===null)break;var i=o.alternate;if(i===null){if(n=o.return,n!==null){r=n;continue}break}if(o.child===i.child){for(i=o.child;i;){if(i===r)return Rhe(o),e;if(i===n)return Rhe(o),t;i=i.sibling}throw Error(lr(188))}if(r.return!==n.return)r=o,n=i;else{for(var a=!1,c=o.child;c;){if(c===r){a=!0,r=o,n=i;break}if(c===n){a=!0,n=o,r=i;break}c=c.sibling}if(!a){for(c=i.child;c;){if(c===r){a=!0,r=i,n=o;break}if(c===n){a=!0,n=i,r=o;break}c=c.sibling}if(!a)throw Error(lr(189))}}if(r.alternate!==n)throw Error(lr(190))}if(r.tag!==3)throw Error(lr(188));return r.stateNode.current===r?e:t}function ege(e){if(e=Avt(e),!e)return null;for(var t=e;;){if(t.tag===5||t.tag===6)return t;if(t.child)t.child.return=t,t=t.child;else{if(t===e)break;for(;!t.sibling;){if(!t.return||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}}return null}function jhe(e,t){for(var r=e.alternate;t!==null;){if(t===e||t===r)return!0;t=t.return}return!1}var tge,pH,rge,nge,SG=!1,wh=[],Jv=null,Qv=null,ey=null,EM=new Map,SM=new Map,$I=[],qhe="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function TG(e,t,r,n,o){return{blockedOn:e,domEventName:t,eventSystemFlags:r|16,nativeEvent:o,targetContainers:[n]}}function zhe(e,t){switch(e){case"focusin":case"focusout":Jv=null;break;case"dragenter":case"dragleave":Qv=null;break;case"mouseover":case"mouseout":ey=null;break;case"pointerover":case"pointerout":EM.delete(t.pointerId);break;case"gotpointercapture":case"lostpointercapture":SM.delete(t.pointerId)}}function WI(e,t,r,n,o,i){return e===null||e.nativeEvent!==i?(e=TG(t,r,n,o,i),t!==null&&(t=kM(t),t!==null&&pH(t)),e):(e.eventSystemFlags|=n,t=e.targetContainers,o!==null&&t.indexOf(o)===-1&&t.push(o),e)}function Ovt(e,t,r,n,o){switch(t){case"focusin":return Jv=WI(Jv,e,t,r,n,o),!0;case"dragenter":return Qv=WI(Qv,e,t,r,n,o),!0;case"mouseover":return ey=WI(ey,e,t,r,n,o),!0;case"pointerover":var i=o.pointerId;return EM.set(i,WI(EM.get(i)||null,e,t,r,n,o)),!0;case"gotpointercapture":return i=o.pointerId,SM.set(i,WI(SM.get(i)||null,e,t,r,n,o)),!0}return!1}function Pvt(e){var t=X1(e.target);if(t!==null){var r=a_(t);if(r!==null){if(t=r.tag,t===13){if(t=Qme(r),t!==null){e.blockedOn=t,nge(e.lanePriority,function(){Ws.unstable_runWithPriority(e.priority,function(){rge(r)})});return}}else if(t===3&&r.stateNode.hydrate){e.blockedOn=r.tag===3?r.stateNode.containerInfo:null;return}}}e.blockedOn=null}function d5(e){if(e.blockedOn!==null)return!1;for(var t=e.targetContainers;0<t.length;){var r=mH(e.domEventName,e.eventSystemFlags,t[0],e.nativeEvent);if(r!==null)return t=kM(r),t!==null&&pH(t),e.blockedOn=r,!1;t.shift()}return!0}function Fhe(e,t,r){d5(e)&&r.delete(t)}function Dvt(){for(SG=!1;0<wh.length;){var e=wh[0];if(e.blockedOn!==null){e=kM(e.blockedOn),e!==null&&tge(e);break}for(var t=e.targetContainers;0<t.length;){var r=mH(e.domEventName,e.eventSystemFlags,t[0],e.nativeEvent);if(r!==null){e.blockedOn=r;break}t.shift()}e.blockedOn===null&&wh.shift()}Jv!==null&&d5(Jv)&&(Jv=null),Qv!==null&&d5(Qv)&&(Qv=null),ey!==null&&d5(ey)&&(ey=null),EM.forEach(Fhe),SM.forEach(Fhe)}function YI(e,t){e.blockedOn===t&&(e.blockedOn=null,SG||(SG=!0,Ws.unstable_scheduleCallback(Ws.unstable_NormalPriority,Dvt)))}function oge(e){function t(o){return YI(o,e)}if(0<wh.length){YI(wh[0],e);for(var r=1;r<wh.length;r++){var n=wh[r];n.blockedOn===e&&(n.blockedOn=null)}}for(Jv!==null&&YI(Jv,e),Qv!==null&&YI(Qv,e),ey!==null&&YI(ey,e),EM.forEach(t),SM.forEach(t),r=0;r<$I.length;r++)n=$I[r],n.blockedOn===e&&(n.blockedOn=null);for(;0<$I.length&&(r=$I[0],r.blockedOn===null);)Pvt(r),r.blockedOn===null&&$I.shift()}function n5(e,t){var r={};return r[e.toLowerCase()]=t.toLowerCase(),r["Webkit"+e]="webkit"+t,r["Moz"+e]="moz"+t,r}var gw={animationend:n5("Animation","AnimationEnd"),animationiteration:n5("Animation","AnimationIteration"),animationstart:n5("Animation","AnimationStart"),transitionend:n5("Transition","TransitionEnd")},$V={},ige={};fg&&(ige=document.createElement("div").style,"AnimationEvent"in window||(delete gw.animationend.animation,delete gw.animationiteration.animation,delete gw.animationstart.animation),"TransitionEvent"in window||delete gw.transitionend.transition);function Z5(e){if($V[e])return $V[e];if(!gw[e])return e;var t=gw[e],r;for(r in t)if(t.hasOwnProperty(r)&&r in ige)return $V[e]=t[r];return e}var age=Z5("animationend"),sge=Z5("animationiteration"),lge=Z5("animationstart"),uge=Z5("transitionend"),cge=new Map,fH=new Map,Nvt=["abort","abort",age,"animationEnd",sge,"animationIteration",lge,"animationStart","canplay","canPlay","canplaythrough","canPlayThrough","durationchange","durationChange","emptied","emptied","encrypted","encrypted","ended","ended","error","error","gotpointercapture","gotPointerCapture","load","load","loadeddata","loadedData","loadedmetadata","loadedMetadata","loadstart","loadStart","lostpointercapture","lostPointerCapture","playing","playing","progress","progress","seeking","seeking","stalled","stalled","suspend","suspend","timeupdate","timeUpdate",uge,"transitionEnd","waiting","waiting"];function dH(e,t){for(var r=0;r<e.length;r+=2){var n=e[r],o=e[r+1];o="on"+(o[0].toUpperCase()+o.slice(1)),fH.set(n,t),cge.set(n,o),o_(o,[n])}}var Lvt=Ws.unstable_now;Lvt();var Bi=8;function hw(e){if((1&e)!==0)return Bi=15,1;if((2&e)!==0)return Bi=14,2;if((4&e)!==0)return Bi=13,4;var t=24&e;return t!==0?(Bi=12,t):(e&32)!==0?(Bi=11,32):(t=192&e,t!==0?(Bi=10,t):(e&256)!==0?(Bi=9,256):(t=3584&e,t!==0?(Bi=8,t):(e&4096)!==0?(Bi=7,4096):(t=4186112&e,t!==0?(Bi=6,t):(t=62914560&e,t!==0?(Bi=5,t):e&67108864?(Bi=4,67108864):(e&134217728)!==0?(Bi=3,134217728):(t=805306368&e,t!==0?(Bi=2,t):(1073741824&e)!==0?(Bi=1,1073741824):(Bi=8,e))))))}function kvt(e){switch(e){case 99:return 15;case 98:return 10;case 97:case 96:return 8;case 95:return 2;default:return 0}}function Rvt(e){switch(e){case 15:case 14:return 99;case 13:case 12:case 11:case 10:return 98;case 9:case 8:case 7:case 6:case 4:case 5:return 97;case 3:case 2:case 1:return 95;case 0:return 90;default:throw Error(lr(358,e))}}function TM(e,t){var r=e.pendingLanes;if(r===0)return Bi=0;var n=0,o=0,i=e.expiredLanes,a=e.suspendedLanes,c=e.pingedLanes;if(i!==0)n=i,o=Bi=15;else if(i=r&134217727,i!==0){var h=i&~a;h!==0?(n=hw(h),o=Bi):(c&=i,c!==0&&(n=hw(c),o=Bi))}else i=r&~a,i!==0?(n=hw(i),o=Bi):c!==0&&(n=hw(c),o=Bi);if(n===0)return 0;if(n=31-sy(n),n=r&((0>n?0:1<<n)<<1)-1,t!==0&&t!==n&&(t&a)===0){if(hw(t),o<=Bi)return t;Bi=o}if(t=e.entangledLanes,t!==0)for(e=e.entanglements,t&=n;0<t;)r=31-sy(t),o=1<<r,n|=e[r],t&=~o;return n}function pge(e){return e=e.pendingLanes&-1073741825,e!==0?e:e&1073741824?1073741824:0}function M5(e,t){switch(e){case 15:return 1;case 14:return 2;case 12:return e=mw(24&~t),e===0?M5(10,t):e;case 10:return e=mw(192&~t),e===0?M5(8,t):e;case 8:return e=mw(3584&~t),e===0&&(e=mw(4186112&~t),e===0&&(e=512)),e;case 2:return t=mw(805306368&~t),t===0&&(t=268435456),t}throw Error(lr(358,e))}function mw(e){return e&-e}function WV(e){for(var t=[],r=0;31>r;r++)t.push(e);return t}function K5(e,t,r){e.pendingLanes|=t;var n=t-1;e.suspendedLanes&=n,e.pingedLanes&=n,e=e.eventTimes,t=31-sy(t),e[t]=r}var sy=Math.clz32?Math.clz32:zvt,jvt=Math.log,qvt=Math.LN2;function zvt(e){return e===0?32:31-(jvt(e)/qvt|0)|0}var Fvt=Ws.unstable_UserBlockingPriority,Uvt=Ws.unstable_runWithPriority,h5=!0;function Bvt(e,t,r,n){K1||uH();var o=hH,i=K1;K1=!0;try{Xme(o,e,t,r,n)}finally{(K1=i)||cH()}}function Vvt(e,t,r,n){Uvt(Fvt,hH.bind(null,e,t,r,n))}function hH(e,t,r,n){if(h5){var o;if((o=(t&4)===0)&&0<wh.length&&-1<qhe.indexOf(e))e=TG(null,e,t,r,n),wh.push(e);else{var i=mH(e,t,r,n);if(i===null)o&&zhe(e,n);else{if(o){if(-1<qhe.indexOf(e)){e=TG(i,e,t,r,n),wh.push(e);return}if(Ovt(i,e,t,r,n))return;zhe(e,n)}Sge(e,t,n,null,r)}}}}function mH(e,t,r,n){var o=sH(n);if(o=X1(o),o!==null){var i=a_(o);if(i===null)o=null;else{var a=i.tag;if(a===13){if(o=Qme(i),o!==null)return o;o=null}else if(a===3){if(i.stateNode.hydrate)return i.tag===3?i.stateNode.containerInfo:null;o=null}else i!==o&&(o=null)}}return Sge(e,t,n,o,r),null}var Zv=null,gH=null,m5=null;function fge(){if(m5)return m5;var e,t=gH,r=t.length,n,o="value"in Zv?Zv.value:Zv.textContent,i=o.length;for(e=0;e<r&&t[e]===o[e];e++);var a=r-e;for(n=1;n<=a&&t[r-n]===o[i-n];n++);return m5=o.slice(e,1<n?1-n:void 0)}function g5(e){var t=e.keyCode;return"charCode"in e?(e=e.charCode,e===0&&t===13&&(e=13)):e=t,e===10&&(e=13),32<=e||e===13?e:0}function o5(){return!0}function Uhe(){return!1}function fp(e){function t(r,n,o,i,a){this._reactName=r,this._targetInst=o,this.type=n,this.nativeEvent=i,this.target=a,this.currentTarget=null;for(var c in e)e.hasOwnProperty(c)&&(r=e[c],this[c]=r?r(i):i[c]);return this.isDefaultPrevented=(i.defaultPrevented!=null?i.defaultPrevented:i.returnValue===!1)?o5:Uhe,this.isPropagationStopped=Uhe,this}return da(t.prototype,{preventDefault:function(){this.defaultPrevented=!0;var r=this.nativeEvent;r&&(r.preventDefault?r.preventDefault():typeof r.returnValue!="unknown"&&(r.returnValue=!1),this.isDefaultPrevented=o5)},stopPropagation:function(){var r=this.nativeEvent;r&&(r.stopPropagation?r.stopPropagation():typeof r.cancelBubble!="unknown"&&(r.cancelBubble=!0),this.isPropagationStopped=o5)},persist:function(){},isPersistent:o5}),t}var Rw={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},vH=fp(Rw),LM=da({},Rw,{view:0,detail:0}),Gvt=fp(LM),YV,ZV,ZI,X5=da({},LM,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:yH,button:0,buttons:0,relatedTarget:function(e){return e.relatedTarget===void 0?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==ZI&&(ZI&&e.type==="mousemove"?(YV=e.screenX-ZI.screenX,ZV=e.screenY-ZI.screenY):ZV=YV=0,ZI=e),YV)},movementY:function(e){return"movementY"in e?e.movementY:ZV}}),Bhe=fp(X5),Hvt=da({},X5,{dataTransfer:0}),$vt=fp(Hvt),Wvt=da({},LM,{relatedTarget:0}),KV=fp(Wvt),Yvt=da({},Rw,{animationName:0,elapsedTime:0,pseudoElement:0}),Zvt=fp(Yvt),Kvt=da({},Rw,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}}),Xvt=fp(Kvt),Jvt=da({},Rw,{data:0}),Vhe=fp(Jvt),Qvt={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},eyt={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},tyt={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function ryt(e){var t=this.nativeEvent;return t.getModifierState?t.getModifierState(e):(e=tyt[e])?!!t[e]:!1}function yH(){return ryt}var nyt=da({},LM,{key:function(e){if(e.key){var t=Qvt[e.key]||e.key;if(t!=="Unidentified")return t}return e.type==="keypress"?(e=g5(e),e===13?"Enter":String.fromCharCode(e)):e.type==="keydown"||e.type==="keyup"?eyt[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:yH,charCode:function(e){return e.type==="keypress"?g5(e):0},keyCode:function(e){return e.type==="keydown"||e.type==="keyup"?e.keyCode:0},which:function(e){return e.type==="keypress"?g5(e):e.type==="keydown"||e.type==="keyup"?e.keyCode:0}}),oyt=fp(nyt),iyt=da({},X5,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),Ghe=fp(iyt),ayt=da({},LM,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:yH}),syt=fp(ayt),lyt=da({},Rw,{propertyName:0,elapsedTime:0,pseudoElement:0}),uyt=fp(lyt),cyt=da({},X5,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0}),pyt=fp(cyt),fyt=[9,13,27,32],_H=fg&&"CompositionEvent"in window,fM=null;fg&&"documentMode"in document&&(fM=document.documentMode);var dyt=fg&&"TextEvent"in window&&!fM,dge=fg&&(!_H||fM&&8<fM&&11>=fM),Hhe=" ",$he=!1;function hge(e,t){switch(e){case"keyup":return fyt.indexOf(t.keyCode)!==-1;case"keydown":return t.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function mge(e){return e=e.detail,typeof e=="object"&&"data"in e?e.data:null}var vw=!1;function hyt(e,t){switch(e){case"compositionend":return mge(t);case"keypress":return t.which!==32?null:($he=!0,Hhe);case"textInput":return e=t.data,e===Hhe&&$he?null:e;default:return null}}function myt(e,t){if(vw)return e==="compositionend"||!_H&&hge(e,t)?(e=fge(),m5=gH=Zv=null,vw=!1,e):null;switch(e){case"paste":return null;case"keypress":if(!(t.ctrlKey||t.altKey||t.metaKey)||t.ctrlKey&&t.altKey){if(t.char&&1<t.char.length)return t.char;if(t.which)return String.fromCharCode(t.which)}return null;case"compositionend":return dge&&t.locale!=="ko"?null:t.data;default:return null}}var gyt={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Whe(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t==="input"?!!gyt[e.type]:t==="textarea"}function gge(e,t,r,n){Zme(n),t=C5(t,"onChange"),0<t.length&&(r=new vH("onChange","change",null,r,n),e.push({event:r,listeners:t}))}var dM=null,IM=null;function vyt(e){xge(e,0)}function J5(e){var t=_w(e);if(Bme(t))return e}function yyt(e,t){if(e==="change")return t}var vge=!1;fg&&(fg?(a5="oninput"in document,a5||(XV=document.createElement("div"),XV.setAttribute("oninput","return;"),a5=typeof XV.oninput=="function"),i5=a5):i5=!1,vge=i5&&(!document.documentMode||9<document.documentMode));var i5,a5,XV;function Yhe(){dM&&(dM.detachEvent("onpropertychange",yge),IM=dM=null)}function yge(e){if(e.propertyName==="value"&&J5(IM)){var t=[];if(gge(t,IM,e,sH(e)),e=vyt,K1)e(t);else{K1=!0;try{lH(e,t)}finally{K1=!1,cH()}}}}function _yt(e,t,r){e==="focusin"?(Yhe(),dM=t,IM=r,dM.attachEvent("onpropertychange",yge)):e==="focusout"&&Yhe()}function byt(e){if(e==="selectionchange"||e==="keyup"||e==="keydown")return J5(IM)}function xyt(e,t){if(e==="click")return J5(t)}function wyt(e,t){if(e==="input"||e==="change")return J5(t)}function Eyt(e,t){return e===t&&(e!==0||1/e===1/t)||e!==e&&t!==t}var Vp=typeof Object.is=="function"?Object.is:Eyt,Syt=Object.prototype.hasOwnProperty;function MM(e,t){if(Vp(e,t))return!0;if(typeof e!="object"||e===null||typeof t!="object"||t===null)return!1;var r=Object.keys(e),n=Object.keys(t);if(r.length!==n.length)return!1;for(n=0;n<r.length;n++)if(!Syt.call(t,r[n])||!Vp(e[r[n]],t[r[n]]))return!1;return!0}function Zhe(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function Khe(e,t){var r=Zhe(e);e=0;for(var n;r;){if(r.nodeType===3){if(n=e+r.textContent.length,e<=t&&n>=t)return{node:r,offset:t-e};e=n}e:{for(;r;){if(r.nextSibling){r=r.nextSibling;break e}r=r.parentNode}r=void 0}r=Zhe(r)}}function _ge(e,t){return e&&t?e===t?!0:e&&e.nodeType===3?!1:t&&t.nodeType===3?_ge(e,t.parentNode):"contains"in e?e.contains(t):e.compareDocumentPosition?!!(e.compareDocumentPosition(t)&16):!1:!1}function Xhe(){for(var e=window,t=S5();t instanceof e.HTMLIFrameElement;){try{var r=typeof t.contentWindow.location.href=="string"}catch(n){r=!1}if(r)e=t.contentWindow;else break;t=S5(e.document)}return t}function IG(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t&&(t==="input"&&(e.type==="text"||e.type==="search"||e.type==="tel"||e.type==="url"||e.type==="password")||t==="textarea"||e.contentEditable==="true")}var Tyt=fg&&"documentMode"in document&&11>=document.documentMode,yw=null,MG=null,hM=null,CG=!1;function Jhe(e,t,r){var n=r.window===r?r.document:r.nodeType===9?r:r.ownerDocument;CG||yw==null||yw!==S5(n)||(n=yw,"selectionStart"in n&&IG(n)?n={start:n.selectionStart,end:n.selectionEnd}:(n=(n.ownerDocument&&n.ownerDocument.defaultView||window).getSelection(),n={anchorNode:n.anchorNode,anchorOffset:n.anchorOffset,focusNode:n.focusNode,focusOffset:n.focusOffset}),hM&&MM(hM,n)||(hM=n,n=C5(MG,"onSelect"),0<n.length&&(t=new vH("onSelect","select",null,t,r),e.push({event:t,listeners:n}),t.target=yw)))}dH("cancel cancel click click close close contextmenu contextMenu copy copy cut cut auxclick auxClick dblclick doubleClick dragend dragEnd dragstart dragStart drop drop focusin focus focusout blur input input invalid invalid keydown keyDown keypress keyPress keyup keyUp mousedown mouseDown mouseup mouseUp paste paste pause pause play play pointercancel pointerCancel pointerdown pointerDown pointerup pointerUp ratechange rateChange reset reset seeked seeked submit submit touchcancel touchCancel touchend touchEnd touchstart touchStart volumechange volumeChange".split(" "),0);dH("drag drag dragenter dragEnter dragexit dragExit dragleave dragLeave dragover dragOver mousemove mouseMove mouseout mouseOut mouseover mouseOver pointermove pointerMove pointerout pointerOut pointerover pointerOver scroll scroll toggle toggle touchmove touchMove wheel wheel".split(" "),1);dH(Nvt,2);for(JV="change selectionchange textInput compositionstart compositionend compositionupdate".split(" "),s5=0;s5<JV.length;s5++)fH.set(JV[s5],0);var JV,s5;Dw("onMouseEnter",["mouseout","mouseover"]);Dw("onMouseLeave",["mouseout","mouseover"]);Dw("onPointerEnter",["pointerout","pointerover"]);Dw("onPointerLeave",["pointerout","pointerover"]);o_("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));o_("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));o_("onBeforeInput",["compositionend","keypress","textInput","paste"]);o_("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));o_("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));o_("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var iM="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),bge=new Set("cancel close invalid load scroll toggle".split(" ").concat(iM));function Qhe(e,t,r){var n=e.type||"unknown-event";e.currentTarget=r,Cvt(n,t,void 0,e),e.currentTarget=null}function xge(e,t){t=(t&4)!==0;for(var r=0;r<e.length;r++){var n=e[r],o=n.event;n=n.listeners;e:{var i=void 0;if(t)for(var a=n.length-1;0<=a;a--){var c=n[a],h=c.instance,m=c.currentTarget;if(c=c.listener,h!==i&&o.isPropagationStopped())break e;Qhe(o,c,m),i=h}else for(a=0;a<n.length;a++){if(c=n[a],h=c.instance,m=c.currentTarget,c=c.listener,h!==i&&o.isPropagationStopped())break e;Qhe(o,c,m),i=h}}}if(I5)throw e=EG,I5=!1,EG=null,e}function ea(e,t){var r=Ige(t),n=e+"__bubble";r.has(n)||(Ege(t,e,2,!1),r.add(n))}var eme="_reactListening"+Math.random().toString(36).slice(2);function wge(e){e[eme]||(e[eme]=!0,zme.forEach(function(t){bge.has(t)||tme(t,!1,e,null),tme(t,!0,e,null)}))}function tme(e,t,r,n){var o=4<arguments.length&&arguments[4]!==void 0?arguments[4]:0,i=r;if(e==="selectionchange"&&r.nodeType!==9&&(i=r.ownerDocument),n!==null&&!t&&bge.has(e)){if(e!=="scroll")return;o|=2,i=n}var a=Ige(i),c=e+"__"+(t?"capture":"bubble");a.has(c)||(t&&(o|=4),Ege(i,e,o,t),a.add(c))}function Ege(e,t,r,n){var o=fH.get(t);switch(o===void 0?2:o){case 0:o=Bvt;break;case 1:o=Vvt;break;default:o=hH}r=o.bind(null,t,r,e),o=void 0,!wG||t!=="touchstart"&&t!=="touchmove"&&t!=="wheel"||(o=!0),n?o!==void 0?e.addEventListener(t,r,{capture:!0,passive:o}):e.addEventListener(t,r,!0):o!==void 0?e.addEventListener(t,r,{passive:o}):e.addEventListener(t,r,!1)}function Sge(e,t,r,n,o){var i=n;if((t&1)===0&&(t&2)===0&&n!==null)e:for(;;){if(n===null)return;var a=n.tag;if(a===3||a===4){var c=n.stateNode.containerInfo;if(c===o||c.nodeType===8&&c.parentNode===o)break;if(a===4)for(a=n.return;a!==null;){var h=a.tag;if((h===3||h===4)&&(h=a.stateNode.containerInfo,h===o||h.nodeType===8&&h.parentNode===o))return;a=a.return}for(;c!==null;){if(a=X1(c),a===null)return;if(h=a.tag,h===5||h===6){n=i=a;continue e}c=c.parentNode}}n=n.return}Svt(function(){var m=i,y=sH(r),w=[];e:{var E=cge.get(e);if(E!==void 0){var A=vH,P=e;switch(e){case"keypress":if(g5(r)===0)break e;case"keydown":case"keyup":A=oyt;break;case"focusin":P="focus",A=KV;break;case"focusout":P="blur",A=KV;break;case"beforeblur":case"afterblur":A=KV;break;case"click":if(r.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":A=Bhe;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":A=$vt;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":A=syt;break;case age:case sge:case lge:A=Zvt;break;case uge:A=uyt;break;case"scroll":A=Gvt;break;case"wheel":A=pyt;break;case"copy":case"cut":case"paste":A=Xvt;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":A=Ghe}var j=(t&4)!==0,D=!j&&e==="scroll",L=j?E!==null?E+"Capture":null:E;j=[];for(var z=m,B;z!==null;){B=z;var G=B.stateNode;if(B.tag===5&&G!==null&&(B=G,L!==null&&(G=wM(z,L),G!=null&&j.push(CM(z,G,B)))),D)break;z=z.return}0<j.length&&(E=new A(E,P,null,r,y),w.push({event:E,listeners:j}))}}if((t&7)===0){e:{if(E=e==="mouseover"||e==="pointerover",A=e==="mouseout"||e==="pointerout",E&&(t&16)===0&&(P=r.relatedTarget||r.fromElement)&&(X1(P)||P[jw]))break e;if((A||E)&&(E=y.window===y?y:(E=y.ownerDocument)?E.defaultView||E.parentWindow:window,A?(P=r.relatedTarget||r.toElement,A=m,P=P?X1(P):null,P!==null&&(D=a_(P),P!==D||P.tag!==5&&P.tag!==6)&&(P=null)):(A=null,P=m),A!==P)){if(j=Bhe,G="onMouseLeave",L="onMouseEnter",z="mouse",(e==="pointerout"||e==="pointerover")&&(j=Ghe,G="onPointerLeave",L="onPointerEnter",z="pointer"),D=A==null?E:_w(A),B=P==null?E:_w(P),E=new j(G,z+"leave",A,r,y),E.target=D,E.relatedTarget=B,G=null,X1(y)===m&&(j=new j(L,z+"enter",P,r,y),j.target=B,j.relatedTarget=D,G=j),D=G,A&&P)t:{for(j=A,L=P,z=0,B=j;B;B=dw(B))z++;for(B=0,G=L;G;G=dw(G))B++;for(;0<z-B;)j=dw(j),z--;for(;0<B-z;)L=dw(L),B--;for(;z--;){if(j===L||L!==null&&j===L.alternate)break t;j=dw(j),L=dw(L)}j=null}else j=null;A!==null&&rme(w,E,A,j,!1),P!==null&&D!==null&&rme(w,D,P,j,!0)}}e:{if(E=m?_w(m):window,A=E.nodeName&&E.nodeName.toLowerCase(),A==="select"||A==="input"&&E.type==="file")var Z=yyt;else if(Whe(E)){if(vge)Z=wyt;else{Z=byt;var K=_yt}}else(A=E.nodeName)&&A.toLowerCase()==="input"&&(E.type==="checkbox"||E.type==="radio")&&(Z=xyt);if(Z&&(Z=Z(e,m))){gge(w,Z,r,y);break e}K&&K(e,E,m),e==="focusout"&&(K=E._wrapperState)&&K.controlled&&E.type==="number"&&hG(E,"number",E.value)}switch(K=m?_w(m):window,e){case"focusin":(Whe(K)||K.contentEditable==="true")&&(yw=K,MG=m,hM=null);break;case"focusout":hM=MG=yw=null;break;case"mousedown":CG=!0;break;case"contextmenu":case"mouseup":case"dragend":CG=!1,Jhe(w,r,y);break;case"selectionchange":if(Tyt)break;case"keydown":case"keyup":Jhe(w,r,y)}var te;if(_H)e:{switch(e){case"compositionstart":var se="onCompositionStart";break e;case"compositionend":se="onCompositionEnd";break e;case"compositionupdate":se="onCompositionUpdate";break e}se=void 0}else vw?hge(e,r)&&(se="onCompositionEnd"):e==="keydown"&&r.keyCode===229&&(se="onCompositionStart");se&&(dge&&r.locale!=="ko"&&(vw||se!=="onCompositionStart"?se==="onCompositionEnd"&&vw&&(te=fge()):(Zv=y,gH="value"in Zv?Zv.value:Zv.textContent,vw=!0)),K=C5(m,se),0<K.length&&(se=new Vhe(se,e,null,r,y),w.push({event:se,listeners:K}),te?se.data=te:(te=mge(r),te!==null&&(se.data=te)))),(te=dyt?hyt(e,r):myt(e,r))&&(m=C5(m,"onBeforeInput"),0<m.length&&(y=new Vhe("onBeforeInput","beforeinput",null,r,y),w.push({event:y,listeners:m}),y.data=te))}xge(w,t)})}function CM(e,t,r){return{instance:e,listener:t,currentTarget:r}}function C5(e,t){for(var r=t+"Capture",n=[];e!==null;){var o=e,i=o.stateNode;o.tag===5&&i!==null&&(o=i,i=wM(e,r),i!=null&&n.unshift(CM(e,i,o)),i=wM(e,t),i!=null&&n.push(CM(e,i,o))),e=e.return}return n}function dw(e){if(e===null)return null;do e=e.return;while(e&&e.tag!==5);return e||null}function rme(e,t,r,n,o){for(var i=t._reactName,a=[];r!==null&&r!==n;){var c=r,h=c.alternate,m=c.stateNode;if(h!==null&&h===n)break;c.tag===5&&m!==null&&(c=m,o?(h=wM(r,i),h!=null&&a.unshift(CM(r,h,c))):o||(h=wM(r,i),h!=null&&a.push(CM(r,h,c)))),r=r.return}a.length!==0&&e.push({event:t,listeners:a})}function A5(){}var QV=null,eG=null;function Tge(e,t){switch(e){case"button":case"input":case"select":case"textarea":return!!t.autoFocus}return!1}function AG(e,t){return e==="textarea"||e==="option"||e==="noscript"||typeof t.children=="string"||typeof t.children=="number"||typeof t.dangerouslySetInnerHTML=="object"&&t.dangerouslySetInnerHTML!==null&&t.dangerouslySetInnerHTML.__html!=null}var nme=typeof setTimeout=="function"?setTimeout:void 0,Iyt=typeof clearTimeout=="function"?clearTimeout:void 0;function bH(e){e.nodeType===1?e.textContent="":e.nodeType===9&&(e=e.body,e!=null&&(e.textContent=""))}function Iw(e){for(;e!=null;e=e.nextSibling){var t=e.nodeType;if(t===1||t===3)break}return e}function ome(e){e=e.previousSibling;for(var t=0;e;){if(e.nodeType===8){var r=e.data;if(r==="$"||r==="$!"||r==="$?"){if(t===0)return e;t--}else r==="/$"&&t++}e=e.previousSibling}return null}var tG=0;function Myt(e){return{$$typeof:iH,toString:e,valueOf:e}}var Q5=Math.random().toString(36).slice(2),Kv="__reactFiber$"+Q5,O5="__reactProps$"+Q5,jw="__reactContainer$"+Q5,ime="__reactEvents$"+Q5;function X1(e){var t=e[Kv];if(t)return t;for(var r=e.parentNode;r;){if(t=r[jw]||r[Kv]){if(r=t.alternate,t.child!==null||r!==null&&r.child!==null)for(e=ome(e);e!==null;){if(r=e[Kv])return r;e=ome(e)}return t}e=r,r=e.parentNode}return null}function kM(e){return e=e[Kv]||e[jw],!e||e.tag!==5&&e.tag!==6&&e.tag!==13&&e.tag!==3?null:e}function _w(e){if(e.tag===5||e.tag===6)return e.stateNode;throw Error(lr(33))}function eL(e){return e[O5]||null}function Ige(e){var t=e[ime];return t===void 0&&(t=e[ime]=new Set),t}var OG=[],bw=-1;function py(e){return{current:e}}function ta(e){0>bw||(e.current=OG[bw],OG[bw]=null,bw--)}function Da(e,t){bw++,OG[bw]=e.current,e.current=t}var ly={},iu=py(ly),dc=py(!1),t_=ly;function Nw(e,t){var r=e.type.contextTypes;if(!r)return ly;var n=e.stateNode;if(n&&n.__reactInternalMemoizedUnmaskedChildContext===t)return n.__reactInternalMemoizedMaskedChildContext;var o={},i;for(i in r)o[i]=t[i];return n&&(e=e.stateNode,e.__reactInternalMemoizedUnmaskedChildContext=t,e.__reactInternalMemoizedMaskedChildContext=o),o}function hc(e){return e=e.childContextTypes,e!=null}function P5(){ta(dc),ta(iu)}function ame(e,t,r){if(iu.current!==ly)throw Error(lr(168));Da(iu,t),Da(dc,r)}function Mge(e,t,r){var n=e.stateNode;if(e=t.childContextTypes,typeof n.getChildContext!="function")return r;n=n.getChildContext();for(var o in n)if(!(o in e))throw Error(lr(108,ww(t)||"Unknown",o));return da({},r,n)}function v5(e){return e=(e=e.stateNode)&&e.__reactInternalMemoizedMergedChildContext||ly,t_=iu.current,Da(iu,e),Da(dc,dc.current),!0}function sme(e,t,r){var n=e.stateNode;if(!n)throw Error(lr(169));r?(e=Mge(e,t,t_),n.__reactInternalMemoizedMergedChildContext=e,ta(dc),ta(iu),Da(iu,e)):ta(dc),Da(dc,r)}var xH=null,e_=null,Cyt=Ws.unstable_runWithPriority,wH=Ws.unstable_scheduleCallback,PG=Ws.unstable_cancelCallback,Ayt=Ws.unstable_shouldYield,lme=Ws.unstable_requestPaint,DG=Ws.unstable_now,Oyt=Ws.unstable_getCurrentPriorityLevel,tL=Ws.unstable_ImmediatePriority,Cge=Ws.unstable_UserBlockingPriority,Age=Ws.unstable_NormalPriority,Oge=Ws.unstable_LowPriority,Pge=Ws.unstable_IdlePriority,rG={},Pyt=lme!==void 0?lme:function(){},sg=null,y5=null,nG=!1,ume=DG(),nu=1e4>ume?DG:function(){return DG()-ume};function Lw(){switch(Oyt()){case tL:return 99;case Cge:return 98;case Age:return 97;case Oge:return 96;case Pge:return 95;default:throw Error(lr(332))}}function Dge(e){switch(e){case 99:return tL;case 98:return Cge;case 97:return Age;case 96:return Oge;case 95:return Pge;default:throw Error(lr(332))}}function r_(e,t){return e=Dge(e),Cyt(e,t)}function AM(e,t,r){return e=Dge(e),wH(e,t,r)}function Mh(){if(y5!==null){var e=y5;y5=null,PG(e)}Nge()}function Nge(){if(!nG&&sg!==null){nG=!0;var e=0;try{var t=sg;r_(99,function(){for(;e<t.length;e++){var r=t[e];do r=r(!0);while(r!==null)}}),sg=null}catch(r){throw sg!==null&&(sg=sg.slice(e+1)),wH(tL,Mh),r}finally{nG=!1}}}var Dyt=i_.ReactCurrentBatchConfig;function ud(e,t){if(e&&e.defaultProps){t=da({},t),e=e.defaultProps;for(var r in e)t[r]===void 0&&(t[r]=e[r]);return t}return t}var D5=py(null),N5=null,xw=null,L5=null;function EH(){L5=xw=N5=null}function SH(e){var t=D5.current;ta(D5),e.type._context._currentValue=t}function Lge(e,t){for(;e!==null;){var r=e.alternate;if((e.childLanes&t)===t){if(r===null||(r.childLanes&t)===t)break;r.childLanes|=t}else e.childLanes|=t,r!==null&&(r.childLanes|=t);e=e.return}}function Mw(e,t){N5=e,L5=xw=null,e=e.dependencies,e!==null&&e.firstContext!==null&&((e.lanes&t)!==0&&(cd=!0),e.firstContext=null)}function $p(e,t){if(L5!==e&&t!==!1&&t!==0)if((typeof t!="number"||t===1073741823)&&(L5=e,t=1073741823),t={context:e,observedBits:t,next:null},xw===null){if(N5===null)throw Error(lr(308));xw=t,N5.dependencies={lanes:0,firstContext:t,responders:null}}else xw=xw.next=t;return e._currentValue}var Wv=!1;function TH(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null},effects:null}}function kge(e,t){e=e.updateQueue,t.updateQueue===e&&(t.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,effects:e.effects})}function ty(e,t){return{eventTime:e,lane:t,tag:0,payload:null,callback:null,next:null}}function ry(e,t){if(e=e.updateQueue,e!==null){e=e.shared;var r=e.pending;r===null?t.next=t:(t.next=r.next,r.next=t),e.pending=t}}function cme(e,t){var r=e.updateQueue,n=e.alternate;if(n!==null&&(n=n.updateQueue,r===n)){var o=null,i=null;if(r=r.firstBaseUpdate,r!==null){do{var a={eventTime:r.eventTime,lane:r.lane,tag:r.tag,payload:r.payload,callback:r.callback,next:null};i===null?o=i=a:i=i.next=a,r=r.next}while(r!==null);i===null?o=i=t:i=i.next=t}else o=i=t;r={baseState:n.baseState,firstBaseUpdate:o,lastBaseUpdate:i,shared:n.shared,effects:n.effects},e.updateQueue=r;return}e=r.lastBaseUpdate,e===null?r.firstBaseUpdate=t:e.next=t,r.lastBaseUpdate=t}function OM(e,t,r,n){var o=e.updateQueue;Wv=!1;var i=o.firstBaseUpdate,a=o.lastBaseUpdate,c=o.shared.pending;if(c!==null){o.shared.pending=null;var h=c,m=h.next;h.next=null,a===null?i=m:a.next=m,a=h;var y=e.alternate;if(y!==null){y=y.updateQueue;var w=y.lastBaseUpdate;w!==a&&(w===null?y.firstBaseUpdate=m:w.next=m,y.lastBaseUpdate=h)}}if(i!==null){w=o.baseState,a=0,y=m=h=null;do{c=i.lane;var E=i.eventTime;if((n&c)===c){y!==null&&(y=y.next={eventTime:E,lane:0,tag:i.tag,payload:i.payload,callback:i.callback,next:null});e:{var A=e,P=i;switch(c=t,E=r,P.tag){case 1:if(A=P.payload,typeof A=="function"){w=A.call(E,w,c);break e}w=A;break e;case 3:A.flags=A.flags&-4097|64;case 0:if(A=P.payload,c=typeof A=="function"?A.call(E,w,c):A,c==null)break e;w=da({},w,c);break e;case 2:Wv=!0}}i.callback!==null&&(e.flags|=32,c=o.effects,c===null?o.effects=[i]:c.push(i))}else E={eventTime:E,lane:c,tag:i.tag,payload:i.payload,callback:i.callback,next:null},y===null?(m=y=E,h=w):y=y.next=E,a|=c;if(i=i.next,i===null){if(c=o.shared.pending,c===null)break;i=c.next,c.next=null,o.lastBaseUpdate=c,o.shared.pending=null}}while(!0);y===null&&(h=w),o.baseState=h,o.firstBaseUpdate=m,o.lastBaseUpdate=y,jM|=a,e.lanes=a,e.memoizedState=w}}function pme(e,t,r){if(e=t.effects,t.effects=null,e!==null)for(t=0;t<e.length;t++){var n=e[t],o=n.callback;if(o!==null){if(n.callback=null,n=r,typeof o!="function")throw Error(lr(191,o));o.call(n)}}}var Rge=new $5.Component().refs;function k5(e,t,r,n){t=e.memoizedState,r=r(n,t),r=r==null?t:da({},t,r),e.memoizedState=r,e.lanes===0&&(e.updateQueue.baseState=r)}var rL={isMounted:function(e){return(e=e._reactInternals)?a_(e)===e:!1},enqueueSetState:function(e,t,r){e=e._reactInternals;var n=pp(),o=ny(e),i=ty(n,o);i.payload=t,r!=null&&(i.callback=r),ry(e,i),oy(e,o,n)},enqueueReplaceState:function(e,t,r){e=e._reactInternals;var n=pp(),o=ny(e),i=ty(n,o);i.tag=1,i.payload=t,r!=null&&(i.callback=r),ry(e,i),oy(e,o,n)},enqueueForceUpdate:function(e,t){e=e._reactInternals;var r=pp(),n=ny(e),o=ty(r,n);o.tag=2,t!=null&&(o.callback=t),ry(e,o),oy(e,n,r)}};function fme(e,t,r,n,o,i,a){return e=e.stateNode,typeof e.shouldComponentUpdate=="function"?e.shouldComponentUpdate(n,i,a):t.prototype&&t.prototype.isPureReactComponent?!MM(r,n)||!MM(o,i):!0}function jge(e,t,r){var n=!1,o=ly,i=t.contextType;return typeof i=="object"&&i!==null?i=$p(i):(o=hc(t)?t_:iu.current,n=t.contextTypes,i=(n=n!=null)?Nw(e,o):ly),t=new t(r,i),e.memoizedState=t.state!==null&&t.state!==void 0?t.state:null,t.updater=rL,e.stateNode=t,t._reactInternals=e,n&&(e=e.stateNode,e.__reactInternalMemoizedUnmaskedChildContext=o,e.__reactInternalMemoizedMaskedChildContext=i),t}function dme(e,t,r,n){e=t.state,typeof t.componentWillReceiveProps=="function"&&t.componentWillReceiveProps(r,n),typeof t.UNSAFE_componentWillReceiveProps=="function"&&t.UNSAFE_componentWillReceiveProps(r,n),t.state!==e&&rL.enqueueReplaceState(t,t.state,null)}function NG(e,t,r,n){var o=e.stateNode;o.props=r,o.state=e.memoizedState,o.refs=Rge,TH(e);var i=t.contextType;typeof i=="object"&&i!==null?o.context=$p(i):(i=hc(t)?t_:iu.current,o.context=Nw(e,i)),OM(e,r,o,n),o.state=e.memoizedState,i=t.getDerivedStateFromProps,typeof i=="function"&&(k5(e,t,i,r),o.state=e.memoizedState),typeof t.getDerivedStateFromProps=="function"||typeof o.getSnapshotBeforeUpdate=="function"||typeof o.UNSAFE_componentWillMount!="function"&&typeof o.componentWillMount!="function"||(t=o.state,typeof o.componentWillMount=="function"&&o.componentWillMount(),typeof o.UNSAFE_componentWillMount=="function"&&o.UNSAFE_componentWillMount(),t!==o.state&&rL.enqueueReplaceState(o,o.state,null),OM(e,r,o,n),o.state=e.memoizedState),typeof o.componentDidMount=="function"&&(e.flags|=4)}var l5=Array.isArray;function KI(e,t,r){if(e=r.ref,e!==null&&typeof e!="function"&&typeof e!="object"){if(r._owner){if(r=r._owner,r){if(r.tag!==1)throw Error(lr(309));var n=r.stateNode}if(!n)throw Error(lr(147,e));var o=""+e;return t!==null&&t.ref!==null&&typeof t.ref=="function"&&t.ref._stringRef===o?t.ref:(t=function(i){var a=n.refs;a===Rge&&(a=n.refs={}),i===null?delete a[o]:a[o]=i},t._stringRef=o,t)}if(typeof e!="string")throw Error(lr(284));if(!r._owner)throw Error(lr(290,e))}return e}function u5(e,t){if(e.type!=="textarea")throw Error(lr(31,Object.prototype.toString.call(t)==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":t))}function qge(e){function t(D,L){if(e){var z=D.lastEffect;z!==null?(z.nextEffect=L,D.lastEffect=L):D.firstEffect=D.lastEffect=L,L.nextEffect=null,L.flags=8}}function r(D,L){if(!e)return null;for(;L!==null;)t(D,L),L=L.sibling;return null}function n(D,L){for(D=new Map;L!==null;)L.key!==null?D.set(L.key,L):D.set(L.index,L),L=L.sibling;return D}function o(D,L){return D=cy(D,L),D.index=0,D.sibling=null,D}function i(D,L,z){return D.index=z,e?(z=D.alternate,z!==null?(z=z.index,z<L?(D.flags=2,L):z):(D.flags=2,L)):L}function a(D){return e&&D.alternate===null&&(D.flags=2),D}function c(D,L,z,B){return L===null||L.tag!==6?(L=lG(z,D.mode,B),L.return=D,L):(L=o(L,z),L.return=D,L)}function h(D,L,z,B){return L!==null&&L.elementType===z.type?(B=o(L,z.props),B.ref=KI(D,L,z),B.return=D,B):(B=w5(z.type,z.key,z.props,null,D.mode,B),B.ref=KI(D,L,z),B.return=D,B)}function m(D,L,z,B){return L===null||L.tag!==4||L.stateNode.containerInfo!==z.containerInfo||L.stateNode.implementation!==z.implementation?(L=uG(z,D.mode,B),L.return=D,L):(L=o(L,z.children||[]),L.return=D,L)}function y(D,L,z,B,G){return L===null||L.tag!==7?(L=Pw(z,D.mode,B,G),L.return=D,L):(L=o(L,z),L.return=D,L)}function w(D,L,z){if(typeof L=="string"||typeof L=="number")return L=lG(""+L,D.mode,z),L.return=D,L;if(typeof L=="object"&&L!==null){switch(L.$$typeof){case nM:return z=w5(L.type,L.key,L.props,null,D.mode,z),z.ref=KI(D,null,L),z.return=D,z;case Z1:return L=uG(L,D.mode,z),L.return=D,L}if(l5(L)||HI(L))return L=Pw(L,D.mode,z,null),L.return=D,L;u5(D,L)}return null}function E(D,L,z,B){var G=L!==null?L.key:null;if(typeof z=="string"||typeof z=="number")return G!==null?null:c(D,L,""+z,B);if(typeof z=="object"&&z!==null){switch(z.$$typeof){case nM:return z.key===G?z.type===Yv?y(D,L,z.props.children,B,G):h(D,L,z,B):null;case Z1:return z.key===G?m(D,L,z,B):null}if(l5(z)||HI(z))return G!==null?null:y(D,L,z,B,null);u5(D,z)}return null}function A(D,L,z,B,G){if(typeof B=="string"||typeof B=="number")return D=D.get(z)||null,c(L,D,""+B,G);if(typeof B=="object"&&B!==null){switch(B.$$typeof){case nM:return D=D.get(B.key===null?z:B.key)||null,B.type===Yv?y(L,D,B.props.children,G,B.key):h(L,D,B,G);case Z1:return D=D.get(B.key===null?z:B.key)||null,m(L,D,B,G)}if(l5(B)||HI(B))return D=D.get(z)||null,y(L,D,B,G,null);u5(L,B)}return null}function P(D,L,z,B){for(var G=null,Z=null,K=L,te=L=0,se=null;K!==null&&te<z.length;te++){K.index>te?(se=K,K=null):se=K.sibling;var le=E(D,K,z[te],B);if(le===null){K===null&&(K=se);break}e&&K&&le.alternate===null&&t(D,K),L=i(le,L,te),Z===null?G=le:Z.sibling=le,Z=le,K=se}if(te===z.length)return r(D,K),G;if(K===null){for(;te<z.length;te++)K=w(D,z[te],B),K!==null&&(L=i(K,L,te),Z===null?G=K:Z.sibling=K,Z=K);return G}for(K=n(D,K);te<z.length;te++)se=A(K,D,te,z[te],B),se!==null&&(e&&se.alternate!==null&&K.delete(se.key===null?te:se.key),L=i(se,L,te),Z===null?G=se:Z.sibling=se,Z=se);return e&&K.forEach(function(pe){return t(D,pe)}),G}function j(D,L,z,B){var G=HI(z);if(typeof G!="function")throw Error(lr(150));if(z=G.call(z),z==null)throw Error(lr(151));for(var Z=G=null,K=L,te=L=0,se=null,le=z.next();K!==null&&!le.done;te++,le=z.next()){K.index>te?(se=K,K=null):se=K.sibling;var pe=E(D,K,le.value,B);if(pe===null){K===null&&(K=se);break}e&&K&&pe.alternate===null&&t(D,K),L=i(pe,L,te),Z===null?G=pe:Z.sibling=pe,Z=pe,K=se}if(le.done)return r(D,K),G;if(K===null){for(;!le.done;te++,le=z.next())le=w(D,le.value,B),le!==null&&(L=i(le,L,te),Z===null?G=le:Z.sibling=le,Z=le);return G}for(K=n(D,K);!le.done;te++,le=z.next())le=A(K,D,te,le.value,B),le!==null&&(e&&le.alternate!==null&&K.delete(le.key===null?te:le.key),L=i(le,L,te),Z===null?G=le:Z.sibling=le,Z=le);return e&&K.forEach(function(me){return t(D,me)}),G}return function(D,L,z,B){var G=typeof z=="object"&&z!==null&&z.type===Yv&&z.key===null;G&&(z=z.props.children);var Z=typeof z=="object"&&z!==null;if(Z)switch(z.$$typeof){case nM:e:{for(Z=z.key,G=L;G!==null;){if(G.key===Z){switch(G.tag){case 7:if(z.type===Yv){r(D,G.sibling),L=o(G,z.props.children),L.return=D,D=L;break e}break;default:if(G.elementType===z.type){r(D,G.sibling),L=o(G,z.props),L.ref=KI(D,G,z),L.return=D,D=L;break e}}r(D,G);break}else t(D,G);G=G.sibling}z.type===Yv?(L=Pw(z.props.children,D.mode,B,z.key),L.return=D,D=L):(B=w5(z.type,z.key,z.props,null,D.mode,B),B.ref=KI(D,L,z),B.return=D,D=B)}return a(D);case Z1:e:{for(G=z.key;L!==null;){if(L.key===G){if(L.tag===4&&L.stateNode.containerInfo===z.containerInfo&&L.stateNode.implementation===z.implementation){r(D,L.sibling),L=o(L,z.children||[]),L.return=D,D=L;break e}else{r(D,L);break}}else t(D,L);L=L.sibling}L=uG(z,D.mode,B),L.return=D,D=L}return a(D)}if(typeof z=="string"||typeof z=="number")return z=""+z,L!==null&&L.tag===6?(r(D,L.sibling),L=o(L,z),L.return=D,D=L):(r(D,L),L=lG(z,D.mode,B),L.return=D,D=L),a(D);if(l5(z))return P(D,L,z,B);if(HI(z))return j(D,L,z,B);if(Z&&u5(D,z),typeof z=="undefined"&&!G)switch(D.tag){case 1:case 22:case 0:case 11:case 15:throw Error(lr(152,ww(D.type)||"Component"))}return r(D,L)}}var R5=qge(!0),zge=qge(!1),RM={},Th=py(RM),PM=py(RM),DM=py(RM);function J1(e){if(e===RM)throw Error(lr(174));return e}function LG(e,t){switch(Da(DM,t),Da(PM,e),Da(Th,RM),e=t.nodeType,e){case 9:case 11:t=(t=t.documentElement)?t.namespaceURI:yG(null,"");break;default:e=e===8?t.parentNode:t,t=e.namespaceURI||null,e=e.tagName,t=yG(t,e)}ta(Th),Da(Th,t)}function kw(){ta(Th),ta(PM),ta(DM)}function hme(e){J1(DM.current);var t=J1(Th.current),r=yG(t,e.type);t!==r&&(Da(PM,e),Da(Th,r))}function IH(e){PM.current===e&&(ta(Th),ta(PM))}var Pa=py(0);function j5(e){for(var t=e;t!==null;){if(t.tag===13){var r=t.memoizedState;if(r!==null&&(r=r.dehydrated,r===null||r.data==="$?"||r.data==="$!"))return t}else if(t.tag===19&&t.memoizedProps.revealOrder!==void 0){if((t.flags&64)!==0)return t}else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}return null}var ug=null,Xv=null,Ih=!1;function Fge(e,t){var r=Gp(5,null,null,0);r.elementType="DELETED",r.type="DELETED",r.stateNode=t,r.return=e,r.flags=8,e.lastEffect!==null?(e.lastEffect.nextEffect=r,e.lastEffect=r):e.firstEffect=e.lastEffect=r}function mme(e,t){switch(e.tag){case 5:var r=e.type;return t=t.nodeType!==1||r.toLowerCase()!==t.nodeName.toLowerCase()?null:t,t!==null?(e.stateNode=t,!0):!1;case 6:return t=e.pendingProps===""||t.nodeType!==3?null:t,t!==null?(e.stateNode=t,!0):!1;case 13:return!1;default:return!1}}function kG(e){if(Ih){var t=Xv;if(t){var r=t;if(!mme(e,t)){if(t=Iw(r.nextSibling),!t||!mme(e,t)){e.flags=e.flags&-1025|2,Ih=!1,ug=e;return}Fge(ug,r)}ug=e,Xv=Iw(t.firstChild)}else e.flags=e.flags&-1025|2,Ih=!1,ug=e}}function gme(e){for(e=e.return;e!==null&&e.tag!==5&&e.tag!==3&&e.tag!==13;)e=e.return;ug=e}function c5(e){if(e!==ug)return!1;if(!Ih)return gme(e),Ih=!0,!1;var t=e.type;if(e.tag!==5||t!=="head"&&t!=="body"&&!AG(t,e.memoizedProps))for(t=Xv;t;)Fge(e,t),t=Iw(t.nextSibling);if(gme(e),e.tag===13){if(e=e.memoizedState,e=e!==null?e.dehydrated:null,!e)throw Error(lr(317));e:{for(e=e.nextSibling,t=0;e;){if(e.nodeType===8){var r=e.data;if(r==="/$"){if(t===0){Xv=Iw(e.nextSibling);break e}t--}else r!=="$"&&r!=="$!"&&r!=="$?"||t++}e=e.nextSibling}Xv=null}}else Xv=ug?Iw(e.stateNode.nextSibling):null;return!0}function oG(){Xv=ug=null,Ih=!1}var Cw=[];function MH(){for(var e=0;e<Cw.length;e++)Cw[e]._workInProgressVersionPrimary=null;Cw.length=0}var mM=i_.ReactCurrentDispatcher,Hp=i_.ReactCurrentBatchConfig,NM=0,Wa=null,ru=null,_l=null,q5=!1,gM=!1;function pc(){throw Error(lr(321))}function CH(e,t){if(t===null)return!1;for(var r=0;r<t.length&&r<e.length;r++)if(!Vp(e[r],t[r]))return!1;return!0}function AH(e,t,r,n,o,i){if(NM=i,Wa=t,t.memoizedState=null,t.updateQueue=null,t.lanes=0,mM.current=e===null||e.memoizedState===null?Lyt:kyt,e=r(n,o),gM){i=0;do{if(gM=!1,!(25>i))throw Error(lr(301));i+=1,_l=ru=null,t.updateQueue=null,mM.current=Ryt,e=r(n,o)}while(gM)}if(mM.current=B5,t=ru!==null&&ru.next!==null,NM=0,_l=ru=Wa=null,q5=!1,t)throw Error(lr(300));return e}function Q1(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return _l===null?Wa.memoizedState=_l=e:_l=_l.next=e,_l}function s_(){if(ru===null){var e=Wa.alternate;e=e!==null?e.memoizedState:null}else e=ru.next;var t=_l===null?Wa.memoizedState:_l.next;if(t!==null)_l=t,ru=e;else{if(e===null)throw Error(lr(310));ru=e,e={memoizedState:ru.memoizedState,baseState:ru.baseState,baseQueue:ru.baseQueue,queue:ru.queue,next:null},_l===null?Wa.memoizedState=_l=e:_l=_l.next=e}return _l}function Eh(e,t){return typeof t=="function"?t(e):t}function XI(e){var t=s_(),r=t.queue;if(r===null)throw Error(lr(311));r.lastRenderedReducer=e;var n=ru,o=n.baseQueue,i=r.pending;if(i!==null){if(o!==null){var a=o.next;o.next=i.next,i.next=a}n.baseQueue=o=i,r.pending=null}if(o!==null){o=o.next,n=n.baseState;var c=a=i=null,h=o;do{var m=h.lane;if((NM&m)===m)c!==null&&(c=c.next={lane:0,action:h.action,eagerReducer:h.eagerReducer,eagerState:h.eagerState,next:null}),n=h.eagerReducer===e?h.eagerState:e(n,h.action);else{var y={lane:m,action:h.action,eagerReducer:h.eagerReducer,eagerState:h.eagerState,next:null};c===null?(a=c=y,i=n):c=c.next=y,Wa.lanes|=m,jM|=m}h=h.next}while(h!==null&&h!==o);c===null?i=n:c.next=a,Vp(n,t.memoizedState)||(cd=!0),t.memoizedState=n,t.baseState=i,t.baseQueue=c,r.lastRenderedState=n}return[t.memoizedState,r.dispatch]}function JI(e){var t=s_(),r=t.queue;if(r===null)throw Error(lr(311));r.lastRenderedReducer=e;var n=r.dispatch,o=r.pending,i=t.memoizedState;if(o!==null){r.pending=null;var a=o=o.next;do i=e(i,a.action),a=a.next;while(a!==o);Vp(i,t.memoizedState)||(cd=!0),t.memoizedState=i,t.baseQueue===null&&(t.baseState=i),r.lastRenderedState=i}return[i,n]}function vme(e,t,r){var n=t._getVersion;n=n(t._source);var o=t._workInProgressVersionPrimary;if(o!==null?e=o===n:(e=e.mutableReadLanes,(e=(NM&e)===e)&&(t._workInProgressVersionPrimary=n,Cw.push(t))),e)return r(t._source);throw Cw.push(t),Error(lr(350))}function Uge(e,t,r,n){var o=Nu;if(o===null)throw Error(lr(349));var i=t._getVersion,a=i(t._source),c=mM.current,h=c.useState(function(){return vme(o,t,r)}),m=h[1],y=h[0];h=_l;var w=e.memoizedState,E=w.refs,A=E.getSnapshot,P=w.source;w=w.subscribe;var j=Wa;return e.memoizedState={refs:E,source:t,subscribe:n},c.useEffect(function(){E.getSnapshot=r,E.setSnapshot=m;var D=i(t._source);if(!Vp(a,D)){D=r(t._source),Vp(y,D)||(m(D),D=ny(j),o.mutableReadLanes|=D&o.pendingLanes),D=o.mutableReadLanes,o.entangledLanes|=D;for(var L=o.entanglements,z=D;0<z;){var B=31-sy(z),G=1<<B;L[B]|=D,z&=~G}}},[r,t,n]),c.useEffect(function(){return n(t._source,function(){var D=E.getSnapshot,L=E.setSnapshot;try{L(D(t._source));var z=ny(j);o.mutableReadLanes|=z&o.pendingLanes}catch(B){L(function(){throw B})}})},[t,n]),Vp(A,r)&&Vp(P,t)&&Vp(w,n)||(e={pending:null,dispatch:null,lastRenderedReducer:Eh,lastRenderedState:y},e.dispatch=m=DH.bind(null,Wa,e),h.queue=e,h.baseQueue=null,y=vme(o,t,r),h.memoizedState=h.baseState=y),y}function Bge(e,t,r){var n=s_();return Uge(n,e,t,r)}function QI(e){var t=Q1();return typeof e=="function"&&(e=e()),t.memoizedState=t.baseState=e,e=t.queue={pending:null,dispatch:null,lastRenderedReducer:Eh,lastRenderedState:e},e=e.dispatch=DH.bind(null,Wa,e),[t.memoizedState,e]}function z5(e,t,r,n){return e={tag:e,create:t,destroy:r,deps:n,next:null},t=Wa.updateQueue,t===null?(t={lastEffect:null},Wa.updateQueue=t,t.lastEffect=e.next=e):(r=t.lastEffect,r===null?t.lastEffect=e.next=e:(n=r.next,r.next=e,e.next=n,t.lastEffect=e)),e}function yme(e){var t=Q1();return e={current:e},t.memoizedState=e}function F5(){return s_().memoizedState}function RG(e,t,r,n){var o=Q1();Wa.flags|=e,o.memoizedState=z5(1|t,r,void 0,n===void 0?null:n)}function OH(e,t,r,n){var o=s_();n=n===void 0?null:n;var i=void 0;if(ru!==null){var a=ru.memoizedState;if(i=a.destroy,n!==null&&CH(n,a.deps)){z5(t,r,i,n);return}}Wa.flags|=e,o.memoizedState=z5(1|t,r,i,n)}function _me(e,t){return RG(516,4,e,t)}function U5(e,t){return OH(516,4,e,t)}function Vge(e,t){return OH(4,2,e,t)}function Gge(e,t){if(typeof t=="function")return e=e(),t(e),function(){t(null)};if(t!=null)return e=e(),t.current=e,function(){t.current=null}}function Hge(e,t,r){return r=r!=null?r.concat([e]):null,OH(4,2,Gge.bind(null,t,e),r)}function PH(){}function $ge(e,t){var r=s_();t=t===void 0?null:t;var n=r.memoizedState;return n!==null&&t!==null&&CH(t,n[1])?n[0]:(r.memoizedState=[e,t],e)}function Wge(e,t){var r=s_();t=t===void 0?null:t;var n=r.memoizedState;return n!==null&&t!==null&&CH(t,n[1])?n[0]:(e=e(),r.memoizedState=[e,t],e)}function Nyt(e,t){var r=Lw();r_(98>r?98:r,function(){e(!0)}),r_(97<r?97:r,function(){var n=Hp.transition;Hp.transition=1;try{e(!1),t()}finally{Hp.transition=n}})}function DH(e,t,r){var n=pp(),o=ny(e),i={lane:o,action:r,eagerReducer:null,eagerState:null,next:null},a=t.pending;if(a===null?i.next=i:(i.next=a.next,a.next=i),t.pending=i,a=e.alternate,e===Wa||a!==null&&a===Wa)gM=q5=!0;else{if(e.lanes===0&&(a===null||a.lanes===0)&&(a=t.lastRenderedReducer,a!==null))try{var c=t.lastRenderedState,h=a(c,r);if(i.eagerReducer=a,i.eagerState=h,Vp(h,c))return}catch(m){}finally{}oy(e,o,n)}}var B5={readContext:$p,useCallback:pc,useContext:pc,useEffect:pc,useImperativeHandle:pc,useLayoutEffect:pc,useMemo:pc,useReducer:pc,useRef:pc,useState:pc,useDebugValue:pc,useDeferredValue:pc,useTransition:pc,useMutableSource:pc,useOpaqueIdentifier:pc,unstable_isNewReconciler:!1},Lyt={readContext:$p,useCallback:function(e,t){return Q1().memoizedState=[e,t===void 0?null:t],e},useContext:$p,useEffect:_me,useImperativeHandle:function(e,t,r){return r=r!=null?r.concat([e]):null,RG(4,2,Gge.bind(null,t,e),r)},useLayoutEffect:function(e,t){return RG(4,2,e,t)},useMemo:function(e,t){var r=Q1();return t=t===void 0?null:t,e=e(),r.memoizedState=[e,t],e},useReducer:function(e,t,r){var n=Q1();return t=r!==void 0?r(t):t,n.memoizedState=n.baseState=t,e=n.queue={pending:null,dispatch:null,lastRenderedReducer:e,lastRenderedState:t},e=e.dispatch=DH.bind(null,Wa,e),[n.memoizedState,e]},useRef:yme,useState:QI,useDebugValue:PH,useDeferredValue:function(e){var t=QI(e),r=t[0],n=t[1];return _me(function(){var o=Hp.transition;Hp.transition=1;try{n(e)}finally{Hp.transition=o}},[e]),r},useTransition:function(){var e=QI(!1),t=e[0];return e=Nyt.bind(null,e[1]),yme(e),[e,t]},useMutableSource:function(e,t,r){var n=Q1();return n.memoizedState={refs:{getSnapshot:t,setSnapshot:null},source:e,subscribe:r},Uge(n,e,t,r)},useOpaqueIdentifier:function(){if(Ih){var e=!1,t=Myt(function(){throw e||(e=!0,r("r:"+(tG++).toString(36))),Error(lr(355))}),r=QI(t)[1];return(Wa.mode&2)===0&&(Wa.flags|=516,z5(5,function(){r("r:"+(tG++).toString(36))},void 0,null)),t}return t="r:"+(tG++).toString(36),QI(t),t},unstable_isNewReconciler:!1},kyt={readContext:$p,useCallback:$ge,useContext:$p,useEffect:U5,useImperativeHandle:Hge,useLayoutEffect:Vge,useMemo:Wge,useReducer:XI,useRef:F5,useState:function(){return XI(Eh)},useDebugValue:PH,useDeferredValue:function(e){var t=XI(Eh),r=t[0],n=t[1];return U5(function(){var o=Hp.transition;Hp.transition=1;try{n(e)}finally{Hp.transition=o}},[e]),r},useTransition:function(){var e=XI(Eh)[0];return[F5().current,e]},useMutableSource:Bge,useOpaqueIdentifier:function(){return XI(Eh)[0]},unstable_isNewReconciler:!1},Ryt={readContext:$p,useCallback:$ge,useContext:$p,useEffect:U5,useImperativeHandle:Hge,useLayoutEffect:Vge,useMemo:Wge,useReducer:JI,useRef:F5,useState:function(){return JI(Eh)},useDebugValue:PH,useDeferredValue:function(e){var t=JI(Eh),r=t[0],n=t[1];return U5(function(){var o=Hp.transition;Hp.transition=1;try{n(e)}finally{Hp.transition=o}},[e]),r},useTransition:function(){var e=JI(Eh)[0];return[F5().current,e]},useMutableSource:Bge,useOpaqueIdentifier:function(){return JI(Eh)[0]},unstable_isNewReconciler:!1},jyt=i_.ReactCurrentOwner,cd=!1;function fc(e,t,r,n){t.child=e===null?zge(t,null,r,n):R5(t,e.child,r,n)}function bme(e,t,r,n,o){r=r.render;var i=t.ref;return Mw(t,o),n=AH(e,t,r,n,i,o),e!==null&&!cd?(t.updateQueue=e.updateQueue,t.flags&=-517,e.lanes&=~o,cg(e,t,o)):(t.flags|=1,fc(e,t,n,o),t.child)}function xme(e,t,r,n,o,i){if(e===null){var a=r.type;return typeof a=="function"&&!qH(a)&&a.defaultProps===void 0&&r.compare===null&&r.defaultProps===void 0?(t.tag=15,t.type=a,Yge(e,t,a,n,o,i)):(e=w5(r.type,null,n,t,t.mode,i),e.ref=t.ref,e.return=t,t.child=e)}return a=e.child,(o&i)===0&&(o=a.memoizedProps,r=r.compare,r=r!==null?r:MM,r(o,n)&&e.ref===t.ref)?cg(e,t,i):(t.flags|=1,e=cy(a,n),e.ref=t.ref,e.return=t,t.child=e)}function Yge(e,t,r,n,o,i){if(e!==null&&MM(e.memoizedProps,n)&&e.ref===t.ref)if(cd=!1,(i&o)!==0)(e.flags&16384)!==0&&(cd=!0);else return t.lanes=e.lanes,cg(e,t,i);return jG(e,t,r,n,i)}function iG(e,t,r){var n=t.pendingProps,o=n.children,i=e!==null?e.memoizedState:null;if(n.mode==="hidden"||n.mode==="unstable-defer-without-hiding"){if((t.mode&4)===0)t.memoizedState={baseLanes:0},f5(t,r);else if((r&1073741824)!==0)t.memoizedState={baseLanes:0},f5(t,i!==null?i.baseLanes:r);else return e=i!==null?i.baseLanes|r:r,t.lanes=t.childLanes=1073741824,t.memoizedState={baseLanes:e},f5(t,e),null;}else i!==null?(n=i.baseLanes|r,t.memoizedState=null):n=r,f5(t,n);return fc(e,t,o,r),t.child}function Zge(e,t){var r=t.ref;(e===null&&r!==null||e!==null&&e.ref!==r)&&(t.flags|=128)}function jG(e,t,r,n,o){var i=hc(r)?t_:iu.current;return i=Nw(t,i),Mw(t,o),r=AH(e,t,r,n,i,o),e!==null&&!cd?(t.updateQueue=e.updateQueue,t.flags&=-517,e.lanes&=~o,cg(e,t,o)):(t.flags|=1,fc(e,t,r,o),t.child)}function wme(e,t,r,n,o){if(hc(r)){var i=!0;v5(t)}else i=!1;if(Mw(t,o),t.stateNode===null)e!==null&&(e.alternate=null,t.alternate=null,t.flags|=2),jge(t,r,n),NG(t,r,n,o),n=!0;else if(e===null){var a=t.stateNode,c=t.memoizedProps;a.props=c;var h=a.context,m=r.contextType;typeof m=="object"&&m!==null?m=$p(m):(m=hc(r)?t_:iu.current,m=Nw(t,m));var y=r.getDerivedStateFromProps,w=typeof y=="function"||typeof a.getSnapshotBeforeUpdate=="function";w||typeof a.UNSAFE_componentWillReceiveProps!="function"&&typeof a.componentWillReceiveProps!="function"||(c!==n||h!==m)&&dme(t,a,n,m),Wv=!1;var E=t.memoizedState;a.state=E,OM(t,n,a,o),h=t.memoizedState,c!==n||E!==h||dc.current||Wv?(typeof y=="function"&&(k5(t,r,y,n),h=t.memoizedState),(c=Wv||fme(t,r,c,n,E,h,m))?(w||typeof a.UNSAFE_componentWillMount!="function"&&typeof a.componentWillMount!="function"||(typeof a.componentWillMount=="function"&&a.componentWillMount(),typeof a.UNSAFE_componentWillMount=="function"&&a.UNSAFE_componentWillMount()),typeof a.componentDidMount=="function"&&(t.flags|=4)):(typeof a.componentDidMount=="function"&&(t.flags|=4),t.memoizedProps=n,t.memoizedState=h),a.props=n,a.state=h,a.context=m,n=c):(typeof a.componentDidMount=="function"&&(t.flags|=4),n=!1)}else{a=t.stateNode,kge(e,t),c=t.memoizedProps,m=t.type===t.elementType?c:ud(t.type,c),a.props=m,w=t.pendingProps,E=a.context,h=r.contextType,typeof h=="object"&&h!==null?h=$p(h):(h=hc(r)?t_:iu.current,h=Nw(t,h));var A=r.getDerivedStateFromProps;(y=typeof A=="function"||typeof a.getSnapshotBeforeUpdate=="function")||typeof a.UNSAFE_componentWillReceiveProps!="function"&&typeof a.componentWillReceiveProps!="function"||(c!==w||E!==h)&&dme(t,a,n,h),Wv=!1,E=t.memoizedState,a.state=E,OM(t,n,a,o);var P=t.memoizedState;c!==w||E!==P||dc.current||Wv?(typeof A=="function"&&(k5(t,r,A,n),P=t.memoizedState),(m=Wv||fme(t,r,m,n,E,P,h))?(y||typeof a.UNSAFE_componentWillUpdate!="function"&&typeof a.componentWillUpdate!="function"||(typeof a.componentWillUpdate=="function"&&a.componentWillUpdate(n,P,h),typeof a.UNSAFE_componentWillUpdate=="function"&&a.UNSAFE_componentWillUpdate(n,P,h)),typeof a.componentDidUpdate=="function"&&(t.flags|=4),typeof a.getSnapshotBeforeUpdate=="function"&&(t.flags|=256)):(typeof a.componentDidUpdate!="function"||c===e.memoizedProps&&E===e.memoizedState||(t.flags|=4),typeof a.getSnapshotBeforeUpdate!="function"||c===e.memoizedProps&&E===e.memoizedState||(t.flags|=256),t.memoizedProps=n,t.memoizedState=P),a.props=n,a.state=P,a.context=h,n=m):(typeof a.componentDidUpdate!="function"||c===e.memoizedProps&&E===e.memoizedState||(t.flags|=4),typeof a.getSnapshotBeforeUpdate!="function"||c===e.memoizedProps&&E===e.memoizedState||(t.flags|=256),n=!1)}return qG(e,t,r,n,i,o)}function qG(e,t,r,n,o,i){Zge(e,t);var a=(t.flags&64)!==0;if(!n&&!a)return o&&sme(t,r,!1),cg(e,t,i);n=t.stateNode,jyt.current=t;var c=a&&typeof r.getDerivedStateFromError!="function"?null:n.render();return t.flags|=1,e!==null&&a?(t.child=R5(t,e.child,null,i),t.child=R5(t,null,c,i)):fc(e,t,c,i),t.memoizedState=n.state,o&&sme(t,r,!0),t.child}function Eme(e){var t=e.stateNode;t.pendingContext?ame(e,t.pendingContext,t.pendingContext!==t.context):t.context&&ame(e,t.context,!1),LG(e,t.containerInfo)}var p5={dehydrated:null,retryLane:0};function Sme(e,t,r){var n=t.pendingProps,o=Pa.current,i=!1,a;return(a=(t.flags&64)!==0)||(a=e!==null&&e.memoizedState===null?!1:(o&2)!==0),a?(i=!0,t.flags&=-65):e!==null&&e.memoizedState===null||n.fallback===void 0||n.unstable_avoidThisFallback===!0||(o|=1),Da(Pa,o&1),e===null?(n.fallback!==void 0&&kG(t),e=n.children,o=n.fallback,i?(e=Tme(t,e,o,r),t.child.memoizedState={baseLanes:r},t.memoizedState=p5,e):typeof n.unstable_expectedLoadTime=="number"?(e=Tme(t,e,o,r),t.child.memoizedState={baseLanes:r},t.memoizedState=p5,t.lanes=33554432,e):(r=zH({mode:"visible",children:e},t.mode,r,null),r.return=t,t.child=r)):e.memoizedState!==null?i?(n=Mme(e,t,n.children,n.fallback,r),i=t.child,o=e.child.memoizedState,i.memoizedState=o===null?{baseLanes:r}:{baseLanes:o.baseLanes|r},i.childLanes=e.childLanes&~r,t.memoizedState=p5,n):(r=Ime(e,t,n.children,r),t.memoizedState=null,r):i?(n=Mme(e,t,n.children,n.fallback,r),i=t.child,o=e.child.memoizedState,i.memoizedState=o===null?{baseLanes:r}:{baseLanes:o.baseLanes|r},i.childLanes=e.childLanes&~r,t.memoizedState=p5,n):(r=Ime(e,t,n.children,r),t.memoizedState=null,r)}function Tme(e,t,r,n){var o=e.mode,i=e.child;return t={mode:"hidden",children:t},(o&2)===0&&i!==null?(i.childLanes=0,i.pendingProps=t):i=zH(t,o,0,null),r=Pw(r,o,n,null),i.return=e,r.return=e,i.sibling=r,e.child=i,r}function Ime(e,t,r,n){var o=e.child;return e=o.sibling,r=cy(o,{mode:"visible",children:r}),(t.mode&2)===0&&(r.lanes=n),r.return=t,r.sibling=null,e!==null&&(e.nextEffect=null,e.flags=8,t.firstEffect=t.lastEffect=e),t.child=r}function Mme(e,t,r,n,o){var i=t.mode,a=e.child;e=a.sibling;var c={mode:"hidden",children:r};return(i&2)===0&&t.child!==a?(r=t.child,r.childLanes=0,r.pendingProps=c,a=r.lastEffect,a!==null?(t.firstEffect=r.firstEffect,t.lastEffect=a,a.nextEffect=null):t.firstEffect=t.lastEffect=null):r=cy(a,c),e!==null?n=cy(e,n):(n=Pw(n,i,o,null),n.flags|=2),n.return=t,r.return=t,r.sibling=n,t.child=r,n}function Cme(e,t){e.lanes|=t;var r=e.alternate;r!==null&&(r.lanes|=t),Lge(e.return,t)}function aG(e,t,r,n,o,i){var a=e.memoizedState;a===null?e.memoizedState={isBackwards:t,rendering:null,renderingStartTime:0,last:n,tail:r,tailMode:o,lastEffect:i}:(a.isBackwards=t,a.rendering=null,a.renderingStartTime=0,a.last=n,a.tail=r,a.tailMode=o,a.lastEffect=i)}function Ame(e,t,r){var n=t.pendingProps,o=n.revealOrder,i=n.tail;if(fc(e,t,n.children,r),n=Pa.current,(n&2)!==0)n=n&1|2,t.flags|=64;else{if(e!==null&&(e.flags&64)!==0)e:for(e=t.child;e!==null;){if(e.tag===13)e.memoizedState!==null&&Cme(e,r);else if(e.tag===19)Cme(e,r);else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break e;for(;e.sibling===null;){if(e.return===null||e.return===t)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}n&=1}if(Da(Pa,n),(t.mode&2)===0)t.memoizedState=null;else switch(o){case"forwards":for(r=t.child,o=null;r!==null;)e=r.alternate,e!==null&&j5(e)===null&&(o=r),r=r.sibling;r=o,r===null?(o=t.child,t.child=null):(o=r.sibling,r.sibling=null),aG(t,!1,o,r,i,t.lastEffect);break;case"backwards":for(r=null,o=t.child,t.child=null;o!==null;){if(e=o.alternate,e!==null&&j5(e)===null){t.child=o;break}e=o.sibling,o.sibling=r,r=o,o=e}aG(t,!0,r,null,i,t.lastEffect);break;case"together":aG(t,!1,null,null,void 0,t.lastEffect);break;default:t.memoizedState=null}return t.child}function cg(e,t,r){if(e!==null&&(t.dependencies=e.dependencies),jM|=t.lanes,(r&t.childLanes)!==0){if(e!==null&&t.child!==e.child)throw Error(lr(153));if(t.child!==null){for(e=t.child,r=cy(e,e.pendingProps),t.child=r,r.return=t;e.sibling!==null;)e=e.sibling,r=r.sibling=cy(e,e.pendingProps),r.return=t;r.sibling=null}return t.child}return null}var Kge,zG,Xge,Jge;Kge=function(e,t){for(var r=t.child;r!==null;){if(r.tag===5||r.tag===6)e.appendChild(r.stateNode);else if(r.tag!==4&&r.child!==null){r.child.return=r,r=r.child;continue}if(r===t)break;for(;r.sibling===null;){if(r.return===null||r.return===t)return;r=r.return}r.sibling.return=r.return,r=r.sibling}};zG=function(){};Xge=function(e,t,r,n){var o=e.memoizedProps;if(o!==n){e=t.stateNode,J1(Th.current);var i=null;switch(r){case"input":o=fG(e,o),n=fG(e,n),i=[];break;case"option":o=mG(e,o),n=mG(e,n),i=[];break;case"select":o=da({},o,{value:void 0}),n=da({},n,{value:void 0}),i=[];break;case"textarea":o=gG(e,o),n=gG(e,n),i=[];break;default:typeof o.onClick!="function"&&typeof n.onClick=="function"&&(e.onclick=A5)}_G(r,n);var a;r=null;for(m in o)if(!n.hasOwnProperty(m)&&o.hasOwnProperty(m)&&o[m]!=null)if(m==="style"){var c=o[m];for(a in c)c.hasOwnProperty(a)&&(r||(r={}),r[a]="")}else m!=="dangerouslySetInnerHTML"&&m!=="children"&&m!=="suppressContentEditableWarning"&&m!=="suppressHydrationWarning"&&m!=="autoFocus"&&(bM.hasOwnProperty(m)?i||(i=[]):(i=i||[]).push(m,null));for(m in n){var h=n[m];if(c=o!=null?o[m]:void 0,n.hasOwnProperty(m)&&h!==c&&(h!=null||c!=null))if(m==="style"){if(c){for(a in c)!c.hasOwnProperty(a)||h&&h.hasOwnProperty(a)||(r||(r={}),r[a]="");for(a in h)h.hasOwnProperty(a)&&c[a]!==h[a]&&(r||(r={}),r[a]=h[a])}else r||(i||(i=[]),i.push(m,r)),r=h;}else m==="dangerouslySetInnerHTML"?(h=h?h.__html:void 0,c=c?c.__html:void 0,h!=null&&c!==h&&(i=i||[]).push(m,h)):m==="children"?typeof h!="string"&&typeof h!="number"||(i=i||[]).push(m,""+h):m!=="suppressContentEditableWarning"&&m!=="suppressHydrationWarning"&&(bM.hasOwnProperty(m)?(h!=null&&m==="onScroll"&&ea("scroll",e),i||c===h||(i=[])):typeof h=="object"&&h!==null&&h.$$typeof===iH?h.toString():(i=i||[]).push(m,h))}r&&(i=i||[]).push("style",r);var m=i;(t.updateQueue=m)&&(t.flags|=4)}};Jge=function(e,t,r,n){r!==n&&(t.flags|=4)};function eM(e,t){if(!Ih)switch(e.tailMode){case"hidden":t=e.tail;for(var r=null;t!==null;)t.alternate!==null&&(r=t),t=t.sibling;r===null?e.tail=null:r.sibling=null;break;case"collapsed":r=e.tail;for(var n=null;r!==null;)r.alternate!==null&&(n=r),r=r.sibling;n===null?t||e.tail===null?e.tail=null:e.tail.sibling=null:n.sibling=null}}function qyt(e,t,r){var n=t.pendingProps;switch(t.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return null;case 1:return hc(t.type)&&P5(),null;case 3:return kw(),ta(dc),ta(iu),MH(),n=t.stateNode,n.pendingContext&&(n.context=n.pendingContext,n.pendingContext=null),(e===null||e.child===null)&&(c5(t)?t.flags|=4:n.hydrate||(t.flags|=256)),zG(t),null;case 5:IH(t);var o=J1(DM.current);if(r=t.type,e!==null&&t.stateNode!=null)Xge(e,t,r,n,o),e.ref!==t.ref&&(t.flags|=128);else{if(!n){if(t.stateNode===null)throw Error(lr(166));return null}if(e=J1(Th.current),c5(t)){n=t.stateNode,r=t.type;var i=t.memoizedProps;switch(n[Kv]=t,n[O5]=i,r){case"dialog":ea("cancel",n),ea("close",n);break;case"iframe":case"object":case"embed":ea("load",n);break;case"video":case"audio":for(e=0;e<iM.length;e++)ea(iM[e],n);break;case"source":ea("error",n);break;case"img":case"image":case"link":ea("error",n),ea("load",n);break;case"details":ea("toggle",n);break;case"input":Phe(n,i),ea("invalid",n);break;case"select":n._wrapperState={wasMultiple:!!i.multiple},ea("invalid",n);break;case"textarea":Nhe(n,i),ea("invalid",n)}_G(r,i),e=null;for(var a in i)i.hasOwnProperty(a)&&(o=i[a],a==="children"?typeof o=="string"?n.textContent!==o&&(e=["children",o]):typeof o=="number"&&n.textContent!==""+o&&(e=["children",""+o]):bM.hasOwnProperty(a)&&o!=null&&a==="onScroll"&&ea("scroll",n));switch(r){case"input":t5(n),Dhe(n,i,!0);break;case"textarea":t5(n),Lhe(n);break;case"select":case"option":break;default:typeof i.onClick=="function"&&(n.onclick=A5)}n=e,t.updateQueue=n,n!==null&&(t.flags|=4)}else{switch(a=o.nodeType===9?o:o.ownerDocument,e===vG.html&&(e=Hme(r)),e===vG.html?r==="script"?(e=a.createElement("div"),e.innerHTML="<script></script>",e=e.removeChild(e.firstChild)):typeof n.is=="string"?e=a.createElement(r,{is:n.is}):(e=a.createElement(r),r==="select"&&(a=e,n.multiple?a.multiple=!0:n.size&&(a.size=n.size))):e=a.createElementNS(e,r),e[Kv]=t,e[O5]=n,Kge(e,t,!1,!1),t.stateNode=e,a=bG(r,n),r){case"dialog":ea("cancel",e),ea("close",e),o=n;break;case"iframe":case"object":case"embed":ea("load",e),o=n;break;case"video":case"audio":for(o=0;o<iM.length;o++)ea(iM[o],e);o=n;break;case"source":ea("error",e),o=n;break;case"img":case"image":case"link":ea("error",e),ea("load",e),o=n;break;case"details":ea("toggle",e),o=n;break;case"input":Phe(e,n),o=fG(e,n),ea("invalid",e);break;case"option":o=mG(e,n);break;case"select":e._wrapperState={wasMultiple:!!n.multiple},o=da({},n,{value:void 0}),ea("invalid",e);break;case"textarea":Nhe(e,n),o=gG(e,n),ea("invalid",e);break;default:o=n}_G(r,o);var c=o;for(i in c)if(c.hasOwnProperty(i)){var h=c[i];i==="style"?Yme(e,h):i==="dangerouslySetInnerHTML"?(h=h?h.__html:void 0,h!=null&&$me(e,h)):i==="children"?typeof h=="string"?(r!=="textarea"||h!=="")&&xM(e,h):typeof h=="number"&&xM(e,""+h):i!=="suppressContentEditableWarning"&&i!=="suppressHydrationWarning"&&i!=="autoFocus"&&(bM.hasOwnProperty(i)?h!=null&&i==="onScroll"&&ea("scroll",e):h!=null&&QG(e,i,h,a))}switch(r){case"input":t5(e),Dhe(e,n,!1);break;case"textarea":t5(e),Lhe(e);break;case"option":n.value!=null&&e.setAttribute("value",""+ay(n.value));break;case"select":e.multiple=!!n.multiple,i=n.value,i!=null?Ew(e,!!n.multiple,i,!1):n.defaultValue!=null&&Ew(e,!!n.multiple,n.defaultValue,!0);break;default:typeof o.onClick=="function"&&(e.onclick=A5)}Tge(r,n)&&(t.flags|=4)}t.ref!==null&&(t.flags|=128)}return null;case 6:if(e&&t.stateNode!=null)Jge(e,t,e.memoizedProps,n);else{if(typeof n!="string"&&t.stateNode===null)throw Error(lr(166));r=J1(DM.current),J1(Th.current),c5(t)?(n=t.stateNode,r=t.memoizedProps,n[Kv]=t,n.nodeValue!==r&&(t.flags|=4)):(n=(r.nodeType===9?r:r.ownerDocument).createTextNode(n),n[Kv]=t,t.stateNode=n)}return null;case 13:return ta(Pa),n=t.memoizedState,(t.flags&64)!==0?(t.lanes=r,t):(n=n!==null,r=!1,e===null?t.memoizedProps.fallback!==void 0&&c5(t):r=e.memoizedState!==null,n&&!r&&(t.mode&2)!==0&&(e===null&&t.memoizedProps.unstable_avoidThisFallback!==!0||(Pa.current&1)!==0?bl===0&&(bl=3):((bl===0||bl===3)&&(bl=4),Nu===null||(jM&134217727)===0&&(zw&134217727)===0||Aw(Nu,ou))),(n||r)&&(t.flags|=4),null);case 4:return kw(),zG(t),e===null&&wge(t.stateNode.containerInfo),null;case 10:return SH(t),null;case 17:return hc(t.type)&&P5(),null;case 19:if(ta(Pa),n=t.memoizedState,n===null)return null;if(i=(t.flags&64)!==0,a=n.rendering,a===null){if(i)eM(n,!1);else{if(bl!==0||e!==null&&(e.flags&64)!==0)for(e=t.child;e!==null;){if(a=j5(e),a!==null){for(t.flags|=64,eM(n,!1),i=a.updateQueue,i!==null&&(t.updateQueue=i,t.flags|=4),n.lastEffect===null&&(t.firstEffect=null),t.lastEffect=n.lastEffect,n=r,r=t.child;r!==null;)i=r,e=n,i.flags&=2,i.nextEffect=null,i.firstEffect=null,i.lastEffect=null,a=i.alternate,a===null?(i.childLanes=0,i.lanes=e,i.child=null,i.memoizedProps=null,i.memoizedState=null,i.updateQueue=null,i.dependencies=null,i.stateNode=null):(i.childLanes=a.childLanes,i.lanes=a.lanes,i.child=a.child,i.memoizedProps=a.memoizedProps,i.memoizedState=a.memoizedState,i.updateQueue=a.updateQueue,i.type=a.type,e=a.dependencies,i.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext}),r=r.sibling;return Da(Pa,Pa.current&1|2),t.child}e=e.sibling}n.tail!==null&&nu()>HG&&(t.flags|=64,i=!0,eM(n,!1),t.lanes=33554432)}}else{if(!i)if(e=j5(a),e!==null){if(t.flags|=64,i=!0,r=e.updateQueue,r!==null&&(t.updateQueue=r,t.flags|=4),eM(n,!0),n.tail===null&&n.tailMode==="hidden"&&!a.alternate&&!Ih)return t=t.lastEffect=n.lastEffect,t!==null&&(t.nextEffect=null),null}else 2*nu()-n.renderingStartTime>HG&&r!==1073741824&&(t.flags|=64,i=!0,eM(n,!1),t.lanes=33554432);n.isBackwards?(a.sibling=t.child,t.child=a):(r=n.last,r!==null?r.sibling=a:t.child=a,n.last=a)}return n.tail!==null?(r=n.tail,n.rendering=r,n.tail=r.sibling,n.lastEffect=t.lastEffect,n.renderingStartTime=nu(),r.sibling=null,t=Pa.current,Da(Pa,i?t&1|2:t&1),r):null;case 23:case 24:return jH(),e!==null&&e.memoizedState!==null!=(t.memoizedState!==null)&&n.mode!=="unstable-defer-without-hiding"&&(t.flags|=4),null}throw Error(lr(156,t.tag))}function zyt(e){switch(e.tag){case 1:hc(e.type)&&P5();var t=e.flags;return t&4096?(e.flags=t&-4097|64,e):null;case 3:if(kw(),ta(dc),ta(iu),MH(),t=e.flags,(t&64)!==0)throw Error(lr(285));return e.flags=t&-4097|64,e;case 5:return IH(e),null;case 13:return ta(Pa),t=e.flags,t&4096?(e.flags=t&-4097|64,e):null;case 19:return ta(Pa),null;case 4:return kw(),null;case 10:return SH(e),null;case 23:case 24:return jH(),null;default:return null}}function NH(e,t){try{var r="",n=t;do r+=_vt(n),n=n.return;while(n);var o=r}catch(i){o=`
Error generating stack: `+i.message+`
`+i.stack}return{value:e,source:t,stack:o}}function FG(e,t){try{console.error(t.value)}catch(r){setTimeout(function(){throw r})}}var Fyt=typeof WeakMap=="function"?WeakMap:Map;function Qge(e,t,r){r=ty(-1,r),r.tag=3,r.payload={element:null};var n=t.value;return r.callback=function(){G5||(G5=!0,$G=n),FG(e,t)},r}function eve(e,t,r){r=ty(-1,r),r.tag=3;var n=e.type.getDerivedStateFromError;if(typeof n=="function"){var o=t.value;r.payload=function(){return FG(e,t),n(o)}}var i=e.stateNode;return i!==null&&typeof i.componentDidCatch=="function"&&(r.callback=function(){typeof n!="function"&&(Sh===null?Sh=new Set([this]):Sh.add(this),FG(e,t));var a=t.stack;this.componentDidCatch(t.value,{componentStack:a!==null?a:""})}),r}var Uyt=typeof WeakSet=="function"?WeakSet:Set;function Ome(e){var t=e.ref;if(t!==null)if(typeof t=="function")try{t(null)}catch(r){iy(e,r)}else t.current=null}function Byt(e,t){switch(t.tag){case 0:case 11:case 15:case 22:return;case 1:if(t.flags&256&&e!==null){var r=e.memoizedProps,n=e.memoizedState;e=t.stateNode,t=e.getSnapshotBeforeUpdate(t.elementType===t.type?r:ud(t.type,r),n),e.__reactInternalSnapshotBeforeUpdate=t}return;case 3:t.flags&256&&bH(t.stateNode.containerInfo);return;case 5:case 6:case 4:case 17:return}throw Error(lr(163))}function Vyt(e,t,r){switch(r.tag){case 0:case 11:case 15:case 22:if(t=r.updateQueue,t=t!==null?t.lastEffect:null,t!==null){e=t=t.next;do{if((e.tag&3)===3){var n=e.create;e.destroy=n()}e=e.next}while(e!==t)}if(t=r.updateQueue,t=t!==null?t.lastEffect:null,t!==null){e=t=t.next;do{var o=e;n=o.next,o=o.tag,(o&4)!==0&&(o&1)!==0&&(uve(r,e),Xyt(r,e)),e=n}while(e!==t)}return;case 1:e=r.stateNode,r.flags&4&&(t===null?e.componentDidMount():(n=r.elementType===r.type?t.memoizedProps:ud(r.type,t.memoizedProps),e.componentDidUpdate(n,t.memoizedState,e.__reactInternalSnapshotBeforeUpdate))),t=r.updateQueue,t!==null&&pme(r,t,e);return;case 3:if(t=r.updateQueue,t!==null){if(e=null,r.child!==null)switch(r.child.tag){case 5:e=r.child.stateNode;break;case 1:e=r.child.stateNode}pme(r,t,e)}return;case 5:e=r.stateNode,t===null&&r.flags&4&&Tge(r.type,r.memoizedProps)&&e.focus();return;case 6:return;case 4:return;case 12:return;case 13:r.memoizedState===null&&(r=r.alternate,r!==null&&(r=r.memoizedState,r!==null&&(r=r.dehydrated,r!==null&&oge(r))));return;case 19:case 17:case 20:case 21:case 23:case 24:return}throw Error(lr(163))}function Pme(e,t){for(var r=e;;){if(r.tag===5){var n=r.stateNode;if(t)n=n.style,typeof n.setProperty=="function"?n.setProperty("display","none","important"):n.display="none";else{n=r.stateNode;var o=r.memoizedProps.style;o=o!=null&&o.hasOwnProperty("display")?o.display:null,n.style.display=Wme("display",o)}}else if(r.tag===6)r.stateNode.nodeValue=t?"":r.memoizedProps;else if((r.tag!==23&&r.tag!==24||r.memoizedState===null||r===e)&&r.child!==null){r.child.return=r,r=r.child;continue}if(r===e)break;for(;r.sibling===null;){if(r.return===null||r.return===e)return;r=r.return}r.sibling.return=r.return,r=r.sibling}}function Dme(e,t){if(e_&&typeof e_.onCommitFiberUnmount=="function")try{e_.onCommitFiberUnmount(xH,t)}catch(i){}switch(t.tag){case 0:case 11:case 14:case 15:case 22:if(e=t.updateQueue,e!==null&&(e=e.lastEffect,e!==null)){var r=e=e.next;do{var n=r,o=n.destroy;if(n=n.tag,o!==void 0)if((n&4)!==0)uve(t,r);else{n=t;try{o()}catch(i){iy(n,i)}}r=r.next}while(r!==e)}break;case 1:if(Ome(t),e=t.stateNode,typeof e.componentWillUnmount=="function")try{e.props=t.memoizedProps,e.state=t.memoizedState,e.componentWillUnmount()}catch(i){iy(t,i)}break;case 5:Ome(t);break;case 4:tve(e,t)}}function Nme(e){e.alternate=null,e.child=null,e.dependencies=null,e.firstEffect=null,e.lastEffect=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.return=null,e.updateQueue=null}function Lme(e){return e.tag===5||e.tag===3||e.tag===4}function kme(e){e:{for(var t=e.return;t!==null;){if(Lme(t))break e;t=t.return}throw Error(lr(160))}var r=t;switch(t=r.stateNode,r.tag){case 5:var n=!1;break;case 3:t=t.containerInfo,n=!0;break;case 4:t=t.containerInfo,n=!0;break;default:throw Error(lr(161))}r.flags&16&&(xM(t,""),r.flags&=-17);e:t:for(r=e;;){for(;r.sibling===null;){if(r.return===null||Lme(r.return)){r=null;break e}r=r.return}for(r.sibling.return=r.return,r=r.sibling;r.tag!==5&&r.tag!==6&&r.tag!==18;){if(r.flags&2||r.child===null||r.tag===4)continue t;r.child.return=r,r=r.child}if(!(r.flags&2)){r=r.stateNode;break e}}n?UG(e,r,t):BG(e,r,t)}function UG(e,t,r){var n=e.tag,o=n===5||n===6;if(o)e=o?e.stateNode:e.stateNode.instance,t?r.nodeType===8?r.parentNode.insertBefore(e,t):r.insertBefore(e,t):(r.nodeType===8?(t=r.parentNode,t.insertBefore(e,r)):(t=r,t.appendChild(e)),r=r._reactRootContainer,r!=null||t.onclick!==null||(t.onclick=A5));else if(n!==4&&(e=e.child,e!==null))for(UG(e,t,r),e=e.sibling;e!==null;)UG(e,t,r),e=e.sibling}function BG(e,t,r){var n=e.tag,o=n===5||n===6;if(o)e=o?e.stateNode:e.stateNode.instance,t?r.insertBefore(e,t):r.appendChild(e);else if(n!==4&&(e=e.child,e!==null))for(BG(e,t,r),e=e.sibling;e!==null;)BG(e,t,r),e=e.sibling}function tve(e,t){for(var r=t,n=!1,o,i;;){if(!n){n=r.return;e:for(;;){if(n===null)throw Error(lr(160));switch(o=n.stateNode,n.tag){case 5:i=!1;break e;case 3:o=o.containerInfo,i=!0;break e;case 4:o=o.containerInfo,i=!0;break e}n=n.return}n=!0}if(r.tag===5||r.tag===6){e:for(var a=e,c=r,h=c;;)if(Dme(a,h),h.child!==null&&h.tag!==4)h.child.return=h,h=h.child;else{if(h===c)break e;for(;h.sibling===null;){if(h.return===null||h.return===c)break e;h=h.return}h.sibling.return=h.return,h=h.sibling}i?(a=o,c=r.stateNode,a.nodeType===8?a.parentNode.removeChild(c):a.removeChild(c)):o.removeChild(r.stateNode)}else if(r.tag===4){if(r.child!==null){o=r.stateNode.containerInfo,i=!0,r.child.return=r,r=r.child;continue}}else if(Dme(e,r),r.child!==null){r.child.return=r,r=r.child;continue}if(r===t)break;for(;r.sibling===null;){if(r.return===null||r.return===t)return;r=r.return,r.tag===4&&(n=!1)}r.sibling.return=r.return,r=r.sibling}}function sG(e,t){switch(t.tag){case 0:case 11:case 14:case 15:case 22:var r=t.updateQueue;if(r=r!==null?r.lastEffect:null,r!==null){var n=r=r.next;do(n.tag&3)===3&&(e=n.destroy,n.destroy=void 0,e!==void 0&&e()),n=n.next;while(n!==r)}return;case 1:return;case 5:if(r=t.stateNode,r!=null){n=t.memoizedProps;var o=e!==null?e.memoizedProps:n;e=t.type;var i=t.updateQueue;if(t.updateQueue=null,i!==null){for(r[O5]=n,e==="input"&&n.type==="radio"&&n.name!=null&&Vme(r,n),bG(e,o),t=bG(e,n),o=0;o<i.length;o+=2){var a=i[o],c=i[o+1];a==="style"?Yme(r,c):a==="dangerouslySetInnerHTML"?$me(r,c):a==="children"?xM(r,c):QG(r,a,c,t)}switch(e){case"input":dG(r,n);break;case"textarea":Gme(r,n);break;case"select":e=r._wrapperState.wasMultiple,r._wrapperState.wasMultiple=!!n.multiple,i=n.value,i!=null?Ew(r,!!n.multiple,i,!1):e!==!!n.multiple&&(n.defaultValue!=null?Ew(r,!!n.multiple,n.defaultValue,!0):Ew(r,!!n.multiple,n.multiple?[]:"",!1))}}}return;case 6:if(t.stateNode===null)throw Error(lr(162));t.stateNode.nodeValue=t.memoizedProps;return;case 3:r=t.stateNode,r.hydrate&&(r.hydrate=!1,oge(r.containerInfo));return;case 12:return;case 13:t.memoizedState!==null&&(RH=nu(),Pme(t.child,!0)),Rme(t);return;case 19:Rme(t);return;case 17:return;case 23:case 24:Pme(t,t.memoizedState!==null);return}throw Error(lr(163))}function Rme(e){var t=e.updateQueue;if(t!==null){e.updateQueue=null;var r=e.stateNode;r===null&&(r=e.stateNode=new Uyt),t.forEach(function(n){var o=e0t.bind(null,e,n);r.has(n)||(r.add(n),n.then(o,o))})}}function Gyt(e,t){return e!==null&&(e=e.memoizedState,e===null||e.dehydrated!==null)?(t=t.memoizedState,t!==null&&t.dehydrated===null):!1}var Hyt=Math.ceil,V5=i_.ReactCurrentDispatcher,LH=i_.ReactCurrentOwner,Rn=0,Nu=null,Ds=null,ou=0,n_=0,VG=py(0),bl=0,nL=null,qw=0,jM=0,zw=0,kH=0,GG=null,RH=0,HG=1/0;function Fw(){HG=nu()+500}var Nr=null,G5=!1,$G=null,Sh=null,uy=!1,vM=null,aM=90,WG=[],YG=[],pg=null,yM=0,ZG=null,_5=-1,lg=0,b5=0,_M=null,x5=!1;function pp(){return(Rn&48)!==0?nu():_5!==-1?_5:_5=nu()}function ny(e){if(e=e.mode,(e&2)===0)return 1;if((e&4)===0)return Lw()===99?1:2;if(lg===0&&(lg=qw),Dyt.transition!==0){b5!==0&&(b5=GG!==null?GG.pendingLanes:0),e=lg;var t=4186112&~b5;return t&=-t,t===0&&(e=4186112&~e,t=e&-e,t===0&&(t=8192)),t}return e=Lw(),(Rn&4)!==0&&e===98?e=M5(12,lg):(e=kvt(e),e=M5(e,lg)),e}function oy(e,t,r){if(50<yM)throw yM=0,ZG=null,Error(lr(185));if(e=oL(e,t),e===null)return null;K5(e,t,r),e===Nu&&(zw|=t,bl===4&&Aw(e,ou));var n=Lw();t===1?(Rn&8)!==0&&(Rn&48)===0?KG(e):(Wp(e,r),Rn===0&&(Fw(),Mh())):((Rn&4)===0||n!==98&&n!==99||(pg===null?pg=new Set([e]):pg.add(e)),Wp(e,r)),GG=e}function oL(e,t){e.lanes|=t;var r=e.alternate;for(r!==null&&(r.lanes|=t),r=e,e=e.return;e!==null;)e.childLanes|=t,r=e.alternate,r!==null&&(r.childLanes|=t),r=e,e=e.return;return r.tag===3?r.stateNode:null}function Wp(e,t){for(var r=e.callbackNode,n=e.suspendedLanes,o=e.pingedLanes,i=e.expirationTimes,a=e.pendingLanes;0<a;){var c=31-sy(a),h=1<<c,m=i[c];if(m===-1){if((h&n)===0||(h&o)!==0){m=t,hw(h);var y=Bi;i[c]=10<=y?m+250:6<=y?m+5e3:-1}}else m<=t&&(e.expiredLanes|=h);a&=~h}if(n=TM(e,e===Nu?ou:0),t=Bi,n===0)r!==null&&(r!==rG&&PG(r),e.callbackNode=null,e.callbackPriority=0);else{if(r!==null){if(e.callbackPriority===t)return;r!==rG&&PG(r)}t===15?(r=KG.bind(null,e),sg===null?(sg=[r],y5=wH(tL,Nge)):sg.push(r),r=rG):t===14?r=AM(99,KG.bind(null,e)):(r=Rvt(t),r=AM(r,rve.bind(null,e))),e.callbackPriority=t,e.callbackNode=r}}function rve(e){if(_5=-1,b5=lg=0,(Rn&48)!==0)throw Error(lr(327));var t=e.callbackNode;if(fy()&&e.callbackNode!==t)return null;var r=TM(e,e===Nu?ou:0);if(r===0)return null;var n=r,o=Rn;Rn|=16;var i=ave();(Nu!==e||ou!==n)&&(Fw(),Ow(e,n));do try{Yyt();break}catch(c){ive(e,c)}while(!0);if(EH(),V5.current=i,Rn=o,Ds!==null?n=0:(Nu=null,ou=0,n=bl),(qw&zw)!==0)Ow(e,0);else if(n!==0){if(n===2&&(Rn|=64,e.hydrate&&(e.hydrate=!1,bH(e.containerInfo)),r=pge(e),r!==0&&(n=sM(e,r))),n===1)throw t=nL,Ow(e,0),Aw(e,r),Wp(e,nu()),t;switch(e.finishedWork=e.current.alternate,e.finishedLanes=r,n){case 0:case 1:throw Error(lr(345));case 2:Y1(e);break;case 3:if(Aw(e,r),(r&62914560)===r&&(n=RH+500-nu(),10<n)){if(TM(e,0)!==0)break;if(o=e.suspendedLanes,(o&r)!==r){pp(),e.pingedLanes|=e.suspendedLanes&o;break}e.timeoutHandle=nme(Y1.bind(null,e),n);break}Y1(e);break;case 4:if(Aw(e,r),(r&4186112)===r)break;for(n=e.eventTimes,o=-1;0<r;){var a=31-sy(r);i=1<<a,a=n[a],a>o&&(o=a),r&=~i}if(r=o,r=nu()-r,r=(120>r?120:480>r?480:1080>r?1080:1920>r?1920:3e3>r?3e3:4320>r?4320:1960*Hyt(r/1960))-r,10<r){e.timeoutHandle=nme(Y1.bind(null,e),r);break}Y1(e);break;case 5:Y1(e);break;default:throw Error(lr(329))}}return Wp(e,nu()),e.callbackNode===t?rve.bind(null,e):null}function Aw(e,t){for(t&=~kH,t&=~zw,e.suspendedLanes|=t,e.pingedLanes&=~t,e=e.expirationTimes;0<t;){var r=31-sy(t),n=1<<r;e[r]=-1,t&=~n}}function KG(e){if((Rn&48)!==0)throw Error(lr(327));if(fy(),e===Nu&&(e.expiredLanes&ou)!==0){var t=ou,r=sM(e,t);(qw&zw)!==0&&(t=TM(e,t),r=sM(e,t))}else t=TM(e,0),r=sM(e,t);if(e.tag!==0&&r===2&&(Rn|=64,e.hydrate&&(e.hydrate=!1,bH(e.containerInfo)),t=pge(e),t!==0&&(r=sM(e,t))),r===1)throw r=nL,Ow(e,0),Aw(e,t),Wp(e,nu()),r;return e.finishedWork=e.current.alternate,e.finishedLanes=t,Y1(e),Wp(e,nu()),null}function $yt(){if(pg!==null){var e=pg;pg=null,e.forEach(function(t){t.expiredLanes|=24&t.pendingLanes,Wp(t,nu())})}Mh()}function nve(e,t){var r=Rn;Rn|=1;try{return e(t)}finally{Rn=r,Rn===0&&(Fw(),Mh())}}function ove(e,t){var r=Rn;Rn&=-2,Rn|=8;try{return e(t)}finally{Rn=r,Rn===0&&(Fw(),Mh())}}function f5(e,t){Da(VG,n_),n_|=t,qw|=t}function jH(){n_=VG.current,ta(VG)}function Ow(e,t){e.finishedWork=null,e.finishedLanes=0;var r=e.timeoutHandle;if(r!==-1&&(e.timeoutHandle=-1,Iyt(r)),Ds!==null)for(r=Ds.return;r!==null;){var n=r;switch(n.tag){case 1:n=n.type.childContextTypes,n!=null&&P5();break;case 3:kw(),ta(dc),ta(iu),MH();break;case 5:IH(n);break;case 4:kw();break;case 13:ta(Pa);break;case 19:ta(Pa);break;case 10:SH(n);break;case 23:case 24:jH()}r=r.return}Nu=e,Ds=cy(e.current,null),ou=n_=qw=t,bl=0,nL=null,kH=zw=jM=0}function ive(e,t){do{var r=Ds;try{if(EH(),mM.current=B5,q5){for(var n=Wa.memoizedState;n!==null;){var o=n.queue;o!==null&&(o.pending=null),n=n.next}q5=!1}if(NM=0,_l=ru=Wa=null,gM=!1,LH.current=null,r===null||r.return===null){bl=1,nL=t,Ds=null;break}e:{var i=e,a=r.return,c=r,h=t;if(t=ou,c.flags|=2048,c.firstEffect=c.lastEffect=null,h!==null&&typeof h=="object"&&typeof h.then=="function"){var m=h;if((c.mode&2)===0){var y=c.alternate;y?(c.updateQueue=y.updateQueue,c.memoizedState=y.memoizedState,c.lanes=y.lanes):(c.updateQueue=null,c.memoizedState=null)}var w=(Pa.current&1)!==0,E=a;do{var A;if(A=E.tag===13){var P=E.memoizedState;if(P!==null)A=P.dehydrated!==null;else{var j=E.memoizedProps;A=j.fallback===void 0?!1:j.unstable_avoidThisFallback!==!0?!0:!w}}if(A){var D=E.updateQueue;if(D===null){var L=new Set;L.add(m),E.updateQueue=L}else D.add(m);if((E.mode&2)===0){if(E.flags|=64,c.flags|=16384,c.flags&=-2981,c.tag===1)if(c.alternate===null)c.tag=17;else{var z=ty(-1,1);z.tag=2,ry(c,z)}c.lanes|=1;break e}h=void 0,c=t;var B=i.pingCache;if(B===null?(B=i.pingCache=new Fyt,h=new Set,B.set(m,h)):(h=B.get(m),h===void 0&&(h=new Set,B.set(m,h))),!h.has(c)){h.add(c);var G=Qyt.bind(null,i,m,c);m.then(G,G)}E.flags|=4096,E.lanes=t;break e}E=E.return}while(E!==null);h=Error((ww(c.type)||"A React component")+` suspended while rendering, but no fallback UI was specified.

Add a <Suspense fallback=...> component higher in the tree to provide a loading indicator or placeholder to display.`)}bl!==5&&(bl=2),h=NH(h,c),E=a;do{switch(E.tag){case 3:i=h,E.flags|=4096,t&=-t,E.lanes|=t;var Z=Qge(E,i,t);cme(E,Z);break e;case 1:i=h;var K=E.type,te=E.stateNode;if((E.flags&64)===0&&(typeof K.getDerivedStateFromError=="function"||te!==null&&typeof te.componentDidCatch=="function"&&(Sh===null||!Sh.has(te)))){E.flags|=4096,t&=-t,E.lanes|=t;var se=eve(E,i,t);cme(E,se);break e}}E=E.return}while(E!==null)}lve(r)}catch(le){t=le,Ds===r&&r!==null&&(Ds=r=r.return);continue}break}while(!0)}function ave(){var e=V5.current;return V5.current=B5,e===null?B5:e}function sM(e,t){var r=Rn;Rn|=16;var n=ave();Nu===e&&ou===t||Ow(e,t);do try{Wyt();break}catch(o){ive(e,o)}while(!0);if(EH(),Rn=r,V5.current=n,Ds!==null)throw Error(lr(261));return Nu=null,ou=0,bl}function Wyt(){for(;Ds!==null;)sve(Ds)}function Yyt(){for(;Ds!==null&&!Ayt();)sve(Ds)}function sve(e){var t=cve(e.alternate,e,n_);e.memoizedProps=e.pendingProps,t===null?lve(e):Ds=t,LH.current=null}function lve(e){var t=e;do{var r=t.alternate;if(e=t.return,(t.flags&2048)===0){if(r=qyt(r,t,n_),r!==null){Ds=r;return}if(r=t,r.tag!==24&&r.tag!==23||r.memoizedState===null||(n_&1073741824)!==0||(r.mode&4)===0){for(var n=0,o=r.child;o!==null;)n|=o.lanes|o.childLanes,o=o.sibling;r.childLanes=n}e!==null&&(e.flags&2048)===0&&(e.firstEffect===null&&(e.firstEffect=t.firstEffect),t.lastEffect!==null&&(e.lastEffect!==null&&(e.lastEffect.nextEffect=t.firstEffect),e.lastEffect=t.lastEffect),1<t.flags&&(e.lastEffect!==null?e.lastEffect.nextEffect=t:e.firstEffect=t,e.lastEffect=t))}else{if(r=zyt(t),r!==null){r.flags&=2047,Ds=r;return}e!==null&&(e.firstEffect=e.lastEffect=null,e.flags|=2048)}if(t=t.sibling,t!==null){Ds=t;return}Ds=t=e}while(t!==null);bl===0&&(bl=5)}function Y1(e){var t=Lw();return r_(99,Zyt.bind(null,e,t)),null}function Zyt(e,t){do fy();while(vM!==null);if((Rn&48)!==0)throw Error(lr(327));var r=e.finishedWork;if(r===null)return null;if(e.finishedWork=null,e.finishedLanes=0,r===e.current)throw Error(lr(177));e.callbackNode=null;var n=r.lanes|r.childLanes,o=n,i=e.pendingLanes&~o;e.pendingLanes=o,e.suspendedLanes=0,e.pingedLanes=0,e.expiredLanes&=o,e.mutableReadLanes&=o,e.entangledLanes&=o,o=e.entanglements;for(var a=e.eventTimes,c=e.expirationTimes;0<i;){var h=31-sy(i),m=1<<h;o[h]=0,a[h]=-1,c[h]=-1,i&=~m}if(pg!==null&&(n&24)===0&&pg.has(e)&&pg.delete(e),e===Nu&&(Ds=Nu=null,ou=0),1<r.flags?r.lastEffect!==null?(r.lastEffect.nextEffect=r,n=r.firstEffect):n=r:n=r.firstEffect,n!==null){if(o=Rn,Rn|=32,LH.current=null,QV=h5,a=Xhe(),IG(a)){if("selectionStart"in a)c={start:a.selectionStart,end:a.selectionEnd};else e:if(c=(c=a.ownerDocument)&&c.defaultView||window,(m=c.getSelection&&c.getSelection())&&m.rangeCount!==0){c=m.anchorNode,i=m.anchorOffset,h=m.focusNode,m=m.focusOffset;try{c.nodeType,h.nodeType}catch(le){c=null;break e}var y=0,w=-1,E=-1,A=0,P=0,j=a,D=null;t:for(;;){for(var L;j!==c||i!==0&&j.nodeType!==3||(w=y+i),j!==h||m!==0&&j.nodeType!==3||(E=y+m),j.nodeType===3&&(y+=j.nodeValue.length),(L=j.firstChild)!==null;)D=j,j=L;for(;;){if(j===a)break t;if(D===c&&++A===i&&(w=y),D===h&&++P===m&&(E=y),(L=j.nextSibling)!==null)break;j=D,D=j.parentNode}j=L}c=w===-1||E===-1?null:{start:w,end:E}}else c=null;c=c||{start:0,end:0}}else c=null;eG={focusedElem:a,selectionRange:c},h5=!1,_M=null,x5=!1,Nr=n;do try{Kyt()}catch(le){if(Nr===null)throw Error(lr(330));iy(Nr,le),Nr=Nr.nextEffect}while(Nr!==null);_M=null,Nr=n;do try{for(a=e;Nr!==null;){var z=Nr.flags;if(z&16&&xM(Nr.stateNode,""),z&128){var B=Nr.alternate;if(B!==null){var G=B.ref;G!==null&&(typeof G=="function"?G(null):G.current=null)}}switch(z&1038){case 2:kme(Nr),Nr.flags&=-3;break;case 6:kme(Nr),Nr.flags&=-3,sG(Nr.alternate,Nr);break;case 1024:Nr.flags&=-1025;break;case 1028:Nr.flags&=-1025,sG(Nr.alternate,Nr);break;case 4:sG(Nr.alternate,Nr);break;case 8:c=Nr,tve(a,c);var Z=c.alternate;Nme(c),Z!==null&&Nme(Z)}Nr=Nr.nextEffect}}catch(le){if(Nr===null)throw Error(lr(330));iy(Nr,le),Nr=Nr.nextEffect}while(Nr!==null);if(G=eG,B=Xhe(),z=G.focusedElem,a=G.selectionRange,B!==z&&z&&z.ownerDocument&&_ge(z.ownerDocument.documentElement,z)){for(a!==null&&IG(z)&&(B=a.start,G=a.end,G===void 0&&(G=B),"selectionStart"in z?(z.selectionStart=B,z.selectionEnd=Math.min(G,z.value.length)):(G=(B=z.ownerDocument||document)&&B.defaultView||window,G.getSelection&&(G=G.getSelection(),c=z.textContent.length,Z=Math.min(a.start,c),a=a.end===void 0?Z:Math.min(a.end,c),!G.extend&&Z>a&&(c=a,a=Z,Z=c),c=Khe(z,Z),i=Khe(z,a),c&&i&&(G.rangeCount!==1||G.anchorNode!==c.node||G.anchorOffset!==c.offset||G.focusNode!==i.node||G.focusOffset!==i.offset)&&(B=B.createRange(),B.setStart(c.node,c.offset),G.removeAllRanges(),Z>a?(G.addRange(B),G.extend(i.node,i.offset)):(B.setEnd(i.node,i.offset),G.addRange(B)))))),B=[],G=z;G=G.parentNode;)G.nodeType===1&&B.push({element:G,left:G.scrollLeft,top:G.scrollTop});for(typeof z.focus=="function"&&z.focus(),z=0;z<B.length;z++)G=B[z],G.element.scrollLeft=G.left,G.element.scrollTop=G.top}h5=!!QV,eG=QV=null,e.current=r,Nr=n;do try{for(z=e;Nr!==null;){var K=Nr.flags;if(K&36&&Vyt(z,Nr.alternate,Nr),K&128){B=void 0;var te=Nr.ref;if(te!==null){var se=Nr.stateNode;switch(Nr.tag){case 5:B=se;break;default:B=se}typeof te=="function"?te(B):te.current=B}}Nr=Nr.nextEffect}}catch(le){if(Nr===null)throw Error(lr(330));iy(Nr,le),Nr=Nr.nextEffect}while(Nr!==null);Nr=null,Pyt(),Rn=o}else e.current=r;if(uy)uy=!1,vM=e,aM=t;else for(Nr=n;Nr!==null;)t=Nr.nextEffect,Nr.nextEffect=null,Nr.flags&8&&(K=Nr,K.sibling=null,K.stateNode=null),Nr=t;if(n=e.pendingLanes,n===0&&(Sh=null),n===1?e===ZG?yM++:(yM=0,ZG=e):yM=0,r=r.stateNode,e_&&typeof e_.onCommitFiberRoot=="function")try{e_.onCommitFiberRoot(xH,r,void 0,(r.current.flags&64)===64)}catch(le){}if(Wp(e,nu()),G5)throw G5=!1,e=$G,$G=null,e;return(Rn&8)!==0||Mh(),null}function Kyt(){for(;Nr!==null;){var e=Nr.alternate;x5||_M===null||((Nr.flags&8)!==0?jhe(Nr,_M)&&(x5=!0):Nr.tag===13&&Gyt(e,Nr)&&jhe(Nr,_M)&&(x5=!0));var t=Nr.flags;(t&256)!==0&&Byt(e,Nr),(t&512)===0||uy||(uy=!0,AM(97,function(){return fy(),null})),Nr=Nr.nextEffect}}function fy(){if(aM!==90){var e=97<aM?97:aM;return aM=90,r_(e,Jyt)}return!1}function Xyt(e,t){WG.push(t,e),uy||(uy=!0,AM(97,function(){return fy(),null}))}function uve(e,t){YG.push(t,e),uy||(uy=!0,AM(97,function(){return fy(),null}))}function Jyt(){if(vM===null)return!1;var e=vM;if(vM=null,(Rn&48)!==0)throw Error(lr(331));var t=Rn;Rn|=32;var r=YG;YG=[];for(var n=0;n<r.length;n+=2){var o=r[n],i=r[n+1],a=o.destroy;if(o.destroy=void 0,typeof a=="function")try{a()}catch(h){if(i===null)throw Error(lr(330));iy(i,h)}}for(r=WG,WG=[],n=0;n<r.length;n+=2){o=r[n],i=r[n+1];try{var c=o.create;o.destroy=c()}catch(h){if(i===null)throw Error(lr(330));iy(i,h)}}for(c=e.current.firstEffect;c!==null;)e=c.nextEffect,c.nextEffect=null,c.flags&8&&(c.sibling=null,c.stateNode=null),c=e;return Rn=t,Mh(),!0}function jme(e,t,r){t=NH(r,t),t=Qge(e,t,1),ry(e,t),t=pp(),e=oL(e,1),e!==null&&(K5(e,1,t),Wp(e,t))}function iy(e,t){if(e.tag===3)jme(e,e,t);else for(var r=e.return;r!==null;){if(r.tag===3){jme(r,e,t);break}else if(r.tag===1){var n=r.stateNode;if(typeof r.type.getDerivedStateFromError=="function"||typeof n.componentDidCatch=="function"&&(Sh===null||!Sh.has(n))){e=NH(t,e);var o=eve(r,e,1);if(ry(r,o),o=pp(),r=oL(r,1),r!==null)K5(r,1,o),Wp(r,o);else if(typeof n.componentDidCatch=="function"&&(Sh===null||!Sh.has(n)))try{n.componentDidCatch(t,e)}catch(i){}break}}r=r.return}}function Qyt(e,t,r){var n=e.pingCache;n!==null&&n.delete(t),t=pp(),e.pingedLanes|=e.suspendedLanes&r,Nu===e&&(ou&r)===r&&(bl===4||bl===3&&(ou&62914560)===ou&&500>nu()-RH?Ow(e,0):kH|=r),Wp(e,t)}function e0t(e,t){var r=e.stateNode;r!==null&&r.delete(t),t=0,t===0&&(t=e.mode,(t&2)===0?t=1:(t&4)===0?t=Lw()===99?1:2:(lg===0&&(lg=qw),t=mw(62914560&~lg),t===0&&(t=4194304))),r=pp(),e=oL(e,t),e!==null&&(K5(e,t,r),Wp(e,r))}var cve;cve=function(e,t,r){var n=t.lanes;if(e!==null){if(e.memoizedProps!==t.pendingProps||dc.current)cd=!0;else if((r&n)!==0)cd=(e.flags&16384)!==0;else{switch(cd=!1,t.tag){case 3:Eme(t),oG();break;case 5:hme(t);break;case 1:hc(t.type)&&v5(t);break;case 4:LG(t,t.stateNode.containerInfo);break;case 10:n=t.memoizedProps.value;var o=t.type._context;Da(D5,o._currentValue),o._currentValue=n;break;case 13:if(t.memoizedState!==null)return(r&t.child.childLanes)!==0?Sme(e,t,r):(Da(Pa,Pa.current&1),t=cg(e,t,r),t!==null?t.sibling:null);Da(Pa,Pa.current&1);break;case 19:if(n=(r&t.childLanes)!==0,(e.flags&64)!==0){if(n)return Ame(e,t,r);t.flags|=64}if(o=t.memoizedState,o!==null&&(o.rendering=null,o.tail=null,o.lastEffect=null),Da(Pa,Pa.current),n)break;return null;case 23:case 24:return t.lanes=0,iG(e,t,r)}return cg(e,t,r)}}else cd=!1;switch(t.lanes=0,t.tag){case 2:if(n=t.type,e!==null&&(e.alternate=null,t.alternate=null,t.flags|=2),e=t.pendingProps,o=Nw(t,iu.current),Mw(t,r),o=AH(null,t,n,e,o,r),t.flags|=1,typeof o=="object"&&o!==null&&typeof o.render=="function"&&o.$$typeof===void 0){if(t.tag=1,t.memoizedState=null,t.updateQueue=null,hc(n)){var i=!0;v5(t)}else i=!1;t.memoizedState=o.state!==null&&o.state!==void 0?o.state:null,TH(t);var a=n.getDerivedStateFromProps;typeof a=="function"&&k5(t,n,a,e),o.updater=rL,t.stateNode=o,o._reactInternals=t,NG(t,n,e,r),t=qG(null,t,n,!0,i,r)}else t.tag=0,fc(null,t,o,r),t=t.child;return t;case 16:o=t.elementType;e:{switch(e!==null&&(e.alternate=null,t.alternate=null,t.flags|=2),e=t.pendingProps,i=o._init,o=i(o._payload),t.type=o,i=t.tag=r0t(o),e=ud(o,e),i){case 0:t=jG(null,t,o,e,r);break e;case 1:t=wme(null,t,o,e,r);break e;case 11:t=bme(null,t,o,e,r);break e;case 14:t=xme(null,t,o,ud(o.type,e),n,r);break e}throw Error(lr(306,o,""))}return t;case 0:return n=t.type,o=t.pendingProps,o=t.elementType===n?o:ud(n,o),jG(e,t,n,o,r);case 1:return n=t.type,o=t.pendingProps,o=t.elementType===n?o:ud(n,o),wme(e,t,n,o,r);case 3:if(Eme(t),n=t.updateQueue,e===null||n===null)throw Error(lr(282));if(n=t.pendingProps,o=t.memoizedState,o=o!==null?o.element:null,kge(e,t),OM(t,n,null,r),n=t.memoizedState.element,n===o)oG(),t=cg(e,t,r);else{if(o=t.stateNode,(i=o.hydrate)&&(Xv=Iw(t.stateNode.containerInfo.firstChild),ug=t,i=Ih=!0),i){if(e=o.mutableSourceEagerHydrationData,e!=null)for(o=0;o<e.length;o+=2)i=e[o],i._workInProgressVersionPrimary=e[o+1],Cw.push(i);for(r=zge(t,null,n,r),t.child=r;r;)r.flags=r.flags&-3|1024,r=r.sibling}else fc(e,t,n,r),oG();t=t.child}return t;case 5:return hme(t),e===null&&kG(t),n=t.type,o=t.pendingProps,i=e!==null?e.memoizedProps:null,a=o.children,AG(n,o)?a=null:i!==null&&AG(n,i)&&(t.flags|=16),Zge(e,t),fc(e,t,a,r),t.child;case 6:return e===null&&kG(t),null;case 13:return Sme(e,t,r);case 4:return LG(t,t.stateNode.containerInfo),n=t.pendingProps,e===null?t.child=R5(t,null,n,r):fc(e,t,n,r),t.child;case 11:return n=t.type,o=t.pendingProps,o=t.elementType===n?o:ud(n,o),bme(e,t,n,o,r);case 7:return fc(e,t,t.pendingProps,r),t.child;case 8:return fc(e,t,t.pendingProps.children,r),t.child;case 12:return fc(e,t,t.pendingProps.children,r),t.child;case 10:e:{n=t.type._context,o=t.pendingProps,a=t.memoizedProps,i=o.value;var c=t.type._context;if(Da(D5,c._currentValue),c._currentValue=i,a!==null)if(c=a.value,i=Vp(c,i)?0:(typeof n._calculateChangedBits=="function"?n._calculateChangedBits(c,i):1073741823)|0,i===0){if(a.children===o.children&&!dc.current){t=cg(e,t,r);break e}}else for(c=t.child,c!==null&&(c.return=t);c!==null;){var h=c.dependencies;if(h!==null){a=c.child;for(var m=h.firstContext;m!==null;){if(m.context===n&&(m.observedBits&i)!==0){c.tag===1&&(m=ty(-1,r&-r),m.tag=2,ry(c,m)),c.lanes|=r,m=c.alternate,m!==null&&(m.lanes|=r),Lge(c.return,r),h.lanes|=r;break}m=m.next}}else a=c.tag===10&&c.type===t.type?null:c.child;if(a!==null)a.return=c;else for(a=c;a!==null;){if(a===t){a=null;break}if(c=a.sibling,c!==null){c.return=a.return,a=c;break}a=a.return}c=a}fc(e,t,o.children,r),t=t.child}return t;case 9:return o=t.type,i=t.pendingProps,n=i.children,Mw(t,r),o=$p(o,i.unstable_observedBits),n=n(o),t.flags|=1,fc(e,t,n,r),t.child;case 14:return o=t.type,i=ud(o,t.pendingProps),i=ud(o.type,i),xme(e,t,o,i,n,r);case 15:return Yge(e,t,t.type,t.pendingProps,n,r);case 17:return n=t.type,o=t.pendingProps,o=t.elementType===n?o:ud(n,o),e!==null&&(e.alternate=null,t.alternate=null,t.flags|=2),t.tag=1,hc(n)?(e=!0,v5(t)):e=!1,Mw(t,r),jge(t,n,o),NG(t,n,o,r),qG(null,t,n,!0,e,r);case 19:return Ame(e,t,r);case 23:return iG(e,t,r);case 24:return iG(e,t,r)}throw Error(lr(156,t.tag))};function t0t(e,t,r,n){this.tag=e,this.key=r,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=t,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=n,this.flags=0,this.lastEffect=this.firstEffect=this.nextEffect=null,this.childLanes=this.lanes=0,this.alternate=null}function Gp(e,t,r,n){return new t0t(e,t,r,n)}function qH(e){return e=e.prototype,!(!e||!e.isReactComponent)}function r0t(e){if(typeof e=="function")return qH(e)?1:0;if(e!=null){if(e=e.$$typeof,e===W5)return 11;if(e===Y5)return 14}return 2}function cy(e,t){var r=e.alternate;return r===null?(r=Gp(e.tag,t,e.key,e.mode),r.elementType=e.elementType,r.type=e.type,r.stateNode=e.stateNode,r.alternate=e,e.alternate=r):(r.pendingProps=t,r.type=e.type,r.flags=0,r.nextEffect=null,r.firstEffect=null,r.lastEffect=null),r.childLanes=e.childLanes,r.lanes=e.lanes,r.child=e.child,r.memoizedProps=e.memoizedProps,r.memoizedState=e.memoizedState,r.updateQueue=e.updateQueue,t=e.dependencies,r.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext},r.sibling=e.sibling,r.index=e.index,r.ref=e.ref,r}function w5(e,t,r,n,o,i){var a=2;if(n=e,typeof e=="function")qH(e)&&(a=1);else if(typeof e=="string")a=5;else e:switch(e){case Yv:return Pw(r.children,o,i,t);case Fme:a=8,o|=16;break;case eH:a=8,o|=1;break;case lM:return e=Gp(12,r,t,o|8),e.elementType=lM,e.type=lM,e.lanes=i,e;case uM:return e=Gp(13,r,t,o),e.type=uM,e.elementType=uM,e.lanes=i,e;case E5:return e=Gp(19,r,t,o),e.elementType=E5,e.lanes=i,e;case aH:return zH(r,o,i,t);case pG:return e=Gp(24,r,t,o),e.elementType=pG,e.lanes=i,e;default:if(typeof e=="object"&&e!==null)switch(e.$$typeof){case tH:a=10;break e;case rH:a=9;break e;case W5:a=11;break e;case Y5:a=14;break e;case nH:a=16,n=null;break e;case oH:a=22;break e}throw Error(lr(130,e==null?e:typeof e,""))}return t=Gp(a,r,t,o),t.elementType=e,t.type=n,t.lanes=i,t}function Pw(e,t,r,n){return e=Gp(7,e,n,t),e.lanes=r,e}function zH(e,t,r,n){return e=Gp(23,e,n,t),e.elementType=aH,e.lanes=r,e}function lG(e,t,r){return e=Gp(6,e,null,t),e.lanes=r,e}function uG(e,t,r){return t=Gp(4,e.children!==null?e.children:[],e.key,t),t.lanes=r,t.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},t}function n0t(e,t,r){this.tag=t,this.containerInfo=e,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.pendingContext=this.context=null,this.hydrate=r,this.callbackNode=null,this.callbackPriority=0,this.eventTimes=WV(0),this.expirationTimes=WV(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=WV(0),this.mutableSourceEagerHydrationData=null}function o0t(e,t,r){var n=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:Z1,key:n==null?null:""+n,children:e,containerInfo:t,implementation:r}}function H5(e,t,r,n){var o=t.current,i=pp(),a=ny(o);e:if(r){r=r._reactInternals;t:{if(a_(r)!==r||r.tag!==1)throw Error(lr(170));var c=r;do{switch(c.tag){case 3:c=c.stateNode.context;break t;case 1:if(hc(c.type)){c=c.stateNode.__reactInternalMemoizedMergedChildContext;break t}}c=c.return}while(c!==null);throw Error(lr(171))}if(r.tag===1){var h=r.type;if(hc(h)){r=Mge(r,h,c);break e}}r=c}else r=ly;return t.context===null?t.context=r:t.pendingContext=r,t=ty(i,a),t.payload={element:e},n=n===void 0?null:n,n!==null&&(t.callback=n),ry(o,t),oy(o,a,i),a}function cG(e){if(e=e.current,!e.child)return null;switch(e.child.tag){case 5:return e.child.stateNode;default:return e.child.stateNode}}function qme(e,t){if(e=e.memoizedState,e!==null&&e.dehydrated!==null){var r=e.retryLane;e.retryLane=r!==0&&r<t?r:t}}function FH(e,t){qme(e,t),(e=e.alternate)&&qme(e,t)}function i0t(){return null}function UH(e,t,r){var n=r!=null&&r.hydrationOptions!=null&&r.hydrationOptions.mutableSources||null;if(r=new n0t(e,t,r!=null&&r.hydrate===!0),t=Gp(3,null,null,t===2?7:t===1?3:0),r.current=t,t.stateNode=r,TH(t),e[jw]=r.current,wge(e.nodeType===8?e.parentNode:e),n)for(e=0;e<n.length;e++){t=n[e];var o=t._getVersion;o=o(t._source),r.mutableSourceEagerHydrationData==null?r.mutableSourceEagerHydrationData=[t,o]:r.mutableSourceEagerHydrationData.push(t,o)}this._internalRoot=r}UH.prototype.render=function(e){H5(e,this._internalRoot,null,null)};UH.prototype.unmount=function(){var e=this._internalRoot,t=e.containerInfo;H5(null,e,null,function(){t[jw]=null})};function qM(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11&&(e.nodeType!==8||e.nodeValue!==" react-mount-point-unstable "))}function a0t(e,t){if(t||(t=e?e.nodeType===9?e.documentElement:e.firstChild:null,t=!(!t||t.nodeType!==1||!t.hasAttribute("data-reactroot"))),!t)for(var r;r=e.lastChild;)e.removeChild(r);return new UH(e,0,t?{hydrate:!0}:void 0)}function iL(e,t,r,n,o){var i=r._reactRootContainer;if(i){var a=i._internalRoot;if(typeof o=="function"){var c=o;o=function(){var m=cG(a);c.call(m)}}H5(t,a,e,o)}else{if(i=r._reactRootContainer=a0t(r,n),a=i._internalRoot,typeof o=="function"){var h=o;o=function(){var m=cG(a);h.call(m)}}ove(function(){H5(t,a,e,o)})}return cG(a)}tge=function(e){if(e.tag===13){var t=pp();oy(e,4,t),FH(e,4)}};pH=function(e){if(e.tag===13){var t=pp();oy(e,67108864,t),FH(e,67108864)}};rge=function(e){if(e.tag===13){var t=pp(),r=ny(e);oy(e,r,t),FH(e,r)}};nge=function(e,t){return t()};xG=function(e,t,r){switch(t){case"input":if(dG(e,r),t=r.name,r.type==="radio"&&t!=null){for(r=e;r.parentNode;)r=r.parentNode;for(r=r.querySelectorAll("input[name="+JSON.stringify(""+t)+"][type=\"radio\"]"),t=0;t<r.length;t++){var n=r[t];if(n!==e&&n.form===e.form){var o=eL(n);if(!o)throw Error(lr(90));Bme(n),dG(n,o)}}}break;case"textarea":Gme(e,r);break;case"select":t=r.value,t!=null&&Ew(e,!!r.multiple,t,!1)}};lH=nve;Xme=function(e,t,r,n,o){var i=Rn;Rn|=4;try{return r_(98,e.bind(null,t,r,n,o))}finally{Rn=i,Rn===0&&(Fw(),Mh())}};uH=function(){(Rn&49)===0&&($yt(),fy())};Jme=function(e,t){var r=Rn;Rn|=2;try{return e(t)}finally{Rn=r,Rn===0&&(Fw(),Mh())}};function pve(e,t){var r=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!qM(t))throw Error(lr(200));return o0t(e,t,null,r)}var s0t={Events:[kM,_w,eL,Zme,Kme,fy,{current:!1}]},tM={findFiberByHostInstance:X1,bundleType:0,version:"17.0.2",rendererPackageName:"react-dom"},l0t={bundleType:tM.bundleType,version:tM.version,rendererPackageName:tM.rendererPackageName,rendererConfig:tM.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:i_.ReactCurrentDispatcher,findHostInstanceByFiber:function(e){return e=ege(e),e===null?null:e.stateNode},findFiberByHostInstance:tM.findFiberByHostInstance||i0t,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__!="undefined"&&(rM=__REACT_DEVTOOLS_GLOBAL_HOOK__,!rM.isDisabled&&rM.supportsFiber))try{xH=rM.inject(l0t),e_=rM}catch(e){}var rM;Yp.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=s0t;Yp.createPortal=pve;Yp.findDOMNode=function(e){if(e==null)return null;if(e.nodeType===1)return e;var t=e._reactInternals;if(t===void 0)throw typeof e.render=="function"?Error(lr(188)):Error(lr(268,Object.keys(e)));return e=ege(t),e=e===null?null:e.stateNode,e};Yp.flushSync=function(e,t){var r=Rn;if((r&48)!==0)return e(t);Rn|=1;try{if(e)return r_(99,e.bind(null,t))}finally{Rn=r,Mh()}};Yp.hydrate=function(e,t,r){if(!qM(t))throw Error(lr(200));return iL(null,e,t,!0,r)};Yp.render=function(e,t,r){if(!qM(t))throw Error(lr(200));return iL(null,e,t,!1,r)};Yp.unmountComponentAtNode=function(e){if(!qM(e))throw Error(lr(40));return e._reactRootContainer?(ove(function(){iL(null,null,e,!1,function(){e._reactRootContainer=null,e[jw]=null})}),!0):!1};Yp.unstable_batchedUpdates=nve;Yp.unstable_createPortal=function(e,t){return pve(e,t,2<arguments.length&&arguments[2]!==void 0?arguments[2]:null)};Yp.unstable_renderSubtreeIntoContainer=function(e,t,r,n){if(!qM(r))throw Error(lr(200));if(e==null||e._reactInternals===void 0)throw Error(lr(38));return iL(e,t,r,!1,n)};Yp.version="17.0.2"});var xa=N((uFr,hve)=>{"use strict";u();function dve(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__=="undefined"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(dve)}catch(e){console.error(e)}}dve(),hve.exports=fve()});var ur=N((BH,mve)=>{"use strict";u();var zM=function(e){return e&&e.Math===Math&&e};mve.exports=zM(typeof globalThis=="object"&&globalThis)||zM(typeof window=="object"&&window)||zM(typeof self=="object"&&self)||zM(typeof global=="object"&&global)||zM(typeof BH=="object"&&BH)||function(){return this}()||Function("return this")()});var Gt=N((fFr,gve)=>{"use strict";u();gve.exports=function(e){try{return!!e()}catch(t){return!0}}});var Wr=N((hFr,vve)=>{"use strict";u();var u0t=Gt();vve.exports=!u0t(function(){return Object.defineProperty({},1,{get:function(){return 7}})[1]!==7})});var Uw=N((gFr,yve)=>{"use strict";u();var c0t=Gt();yve.exports=!c0t(function(){var e=function(){}.bind();return typeof e!="function"||e.hasOwnProperty("prototype")})});var cr=N((yFr,_ve)=>{"use strict";u();var p0t=Uw(),aL=Function.prototype.call;_ve.exports=p0t?aL.bind(aL):function(){return aL.apply(aL,arguments)}});var FM=N(wve=>{"use strict";u();var bve={}.propertyIsEnumerable,xve=Object.getOwnPropertyDescriptor,f0t=xve&&!bve.call({1:2},1);wve.f=f0t?function(t){var r=xve(this,t);return!!r&&r.enumerable}:bve});var mc=N((wFr,Eve)=>{"use strict";u();Eve.exports=function(e,t){return{enumerable:!(e&1),configurable:!(e&2),writable:!(e&4),value:t}}});var Lt=N((SFr,Ive)=>{"use strict";u();var Sve=Uw(),Tve=Function.prototype,VH=Tve.call,d0t=Sve&&Tve.bind.bind(VH,VH);Ive.exports=Sve?d0t:function(e){return function(){return VH.apply(e,arguments)}}});var wl=N((IFr,Cve)=>{"use strict";u();var Mve=Lt(),h0t=Mve({}.toString),m0t=Mve("".slice);Cve.exports=function(e){return m0t(h0t(e),8,-1)}});var dg=N((CFr,Ave)=>{"use strict";u();var g0t=Lt(),v0t=Gt(),y0t=wl(),GH=Object,_0t=g0t("".split);Ave.exports=v0t(function(){return!GH("z").propertyIsEnumerable(0)})?function(e){return y0t(e)==="String"?_0t(e,""):GH(e)}:GH});var gc=N((OFr,Ove)=>{"use strict";u();Ove.exports=function(e){return e==null}});var Ni=N((DFr,Pve)=>{"use strict";u();var b0t=gc(),x0t=TypeError;Pve.exports=function(e){if(b0t(e))throw new x0t("Can't call method on "+e);return e}});var hs=N((LFr,Dve)=>{"use strict";u();var w0t=dg(),E0t=Ni();Dve.exports=function(e){return w0t(E0t(e))}});var jn=N((RFr,Nve)=>{"use strict";u();var HH=typeof document=="object"&&document.all;Nve.exports=typeof HH=="undefined"&&HH!==void 0?function(e){return typeof e=="function"||e===HH}:function(e){return typeof e=="function"}});var Qr=N((qFr,Lve)=>{"use strict";u();var S0t=jn();Lve.exports=function(e){return typeof e=="object"?e!==null:S0t(e)}});var ln=N((FFr,kve)=>{"use strict";u();var $H=ur(),T0t=jn(),I0t=function(e){return T0t(e)?e:void 0};kve.exports=function(e,t){return arguments.length<2?I0t($H[e]):$H[e]&&$H[e][t]}});var El=N((BFr,Rve)=>{"use strict";u();var M0t=Lt();Rve.exports=M0t({}.isPrototypeOf)});var pd=N((GFr,zve)=>{"use strict";u();var C0t=ur(),jve=C0t.navigator,qve=jve&&jve.userAgent;zve.exports=qve?String(qve):""});var dd=N(($Fr,Hve)=>{"use strict";u();var Gve=ur(),WH=pd(),Fve=Gve.process,Uve=Gve.Deno,Bve=Fve&&Fve.versions||Uve&&Uve.version,Vve=Bve&&Bve.v8,fd,sL;Vve&&(fd=Vve.split("."),sL=fd[0]>0&&fd[0]<4?1:+(fd[0]+fd[1]));!sL&&WH&&(fd=WH.match(/Edge\/(\d+)/),(!fd||fd[1]>=74)&&(fd=WH.match(/Chrome\/(\d+)/),fd&&(sL=+fd[1])));Hve.exports=sL});var dy=N((YFr,Wve)=>{"use strict";u();var $ve=dd(),A0t=Gt(),O0t=ur(),P0t=O0t.String;Wve.exports=!!Object.getOwnPropertySymbols&&!A0t(function(){var e=Symbol("symbol detection");return!P0t(e)||!(Object(e)instanceof Symbol)||!Symbol.sham&&$ve&&$ve<41})});var YH=N((KFr,Yve)=>{"use strict";u();var D0t=dy();Yve.exports=D0t&&!Symbol.sham&&typeof Symbol.iterator=="symbol"});var hg=N((JFr,Zve)=>{"use strict";u();var N0t=ln(),L0t=jn(),k0t=El(),R0t=YH(),j0t=Object;Zve.exports=R0t?function(e){return typeof e=="symbol"}:function(e){var t=N0t("Symbol");return L0t(t)&&k0t(t.prototype,j0t(e))}});var hy=N((e7r,Kve)=>{"use strict";u();var q0t=String;Kve.exports=function(e){try{return q0t(e)}catch(t){return"Object"}}});var un=N((r7r,Xve)=>{"use strict";u();var z0t=jn(),F0t=hy(),U0t=TypeError;Xve.exports=function(e){if(z0t(e))return e;throw new U0t(F0t(e)+" is not a function")}});var Na=N((o7r,Jve)=>{"use strict";u();var B0t=un(),V0t=gc();Jve.exports=function(e,t){var r=e[t];return V0t(r)?void 0:B0t(r)}});var JH=N((a7r,Qve)=>{"use strict";u();var ZH=cr(),KH=jn(),XH=Qr(),G0t=TypeError;Qve.exports=function(e,t){var r,n;if(t==="string"&&KH(r=e.toString)&&!XH(n=ZH(r,e))||KH(r=e.valueOf)&&!XH(n=ZH(r,e))||t!=="string"&&KH(r=e.toString)&&!XH(n=ZH(r,e)))return n;throw new G0t("Can't convert object to primitive value")}});var So=N((l7r,eye)=>{"use strict";u();eye.exports=!1});var lL=N((c7r,rye)=>{"use strict";u();var tye=ur(),H0t=Object.defineProperty;rye.exports=function(e,t){try{H0t(tye,e,{value:t,configurable:!0,writable:!0})}catch(r){tye[e]=t}return t}});var UM=N((f7r,iye)=>{"use strict";u();var $0t=So(),W0t=ur(),Y0t=lL(),nye="__core-js_shared__",oye=iye.exports=W0t[nye]||Y0t(nye,{});(oye.versions||(oye.versions=[])).push({version:"3.42.0",mode:$0t?"pure":"global",copyright:"\xA9 2014-2025 Denis Pushkarev (zloirock.ru)",license:"https://github.com/zloirock/core-js/blob/v3.42.0/LICENSE",source:"https://github.com/zloirock/core-js"})});var mg=N((h7r,sye)=>{"use strict";u();var aye=UM();sye.exports=function(e,t){return aye[e]||(aye[e]=t||{})}});var Jn=N((g7r,lye)=>{"use strict";u();var Z0t=Ni(),K0t=Object;lye.exports=function(e){return K0t(Z0t(e))}});var Wn=N((y7r,uye)=>{"use strict";u();var X0t=Lt(),J0t=Jn(),Q0t=X0t({}.hasOwnProperty);uye.exports=Object.hasOwn||function(t,r){return Q0t(J0t(t),r)}});var my=N((b7r,cye)=>{"use strict";u();var e1t=Lt(),t1t=0,r1t=Math.random(),n1t=e1t(1 .toString);cye.exports=function(e){return"Symbol("+(e===void 0?"":e)+")_"+n1t(++t1t+r1t,36)}});var nn=N((w7r,fye)=>{"use strict";u();var o1t=ur(),i1t=mg(),pye=Wn(),a1t=my(),s1t=dy(),l1t=YH(),Bw=o1t.Symbol,QH=i1t("wks"),u1t=l1t?Bw.for||Bw:Bw&&Bw.withoutSetter||a1t;fye.exports=function(e){return pye(QH,e)||(QH[e]=s1t&&pye(Bw,e)?Bw[e]:u1t("Symbol."+e)),QH[e]}});var BM=N((S7r,mye)=>{"use strict";u();var c1t=cr(),dye=Qr(),hye=hg(),p1t=Na(),f1t=JH(),d1t=nn(),h1t=TypeError,m1t=d1t("toPrimitive");mye.exports=function(e,t){if(!dye(e)||hye(e))return e;var r=p1t(e,m1t),n;if(r){if(t===void 0&&(t="default"),n=c1t(r,e,t),!dye(n)||hye(n))return n;throw new h1t("Can't convert object to primitive value")}return t===void 0&&(t="number"),f1t(e,t)}});var Ch=N((I7r,gye)=>{"use strict";u();var g1t=BM(),v1t=hg();gye.exports=function(e){var t=g1t(e,"string");return v1t(t)?t:t+""}});var VM=N((C7r,yye)=>{"use strict";u();var y1t=ur(),vye=Qr(),e$=y1t.document,_1t=vye(e$)&&vye(e$.createElement);yye.exports=function(e){return _1t?e$.createElement(e):{}}});var t$=N((O7r,_ye)=>{"use strict";u();var b1t=Wr(),x1t=Gt(),w1t=VM();_ye.exports=!b1t&&!x1t(function(){return Object.defineProperty(w1t("div"),"a",{get:function(){return 7}}).a!==7})});var Ys=N(xye=>{"use strict";u();var E1t=Wr(),S1t=cr(),T1t=FM(),I1t=mc(),M1t=hs(),C1t=Ch(),A1t=Wn(),O1t=t$(),bye=Object.getOwnPropertyDescriptor;xye.f=E1t?bye:function(t,r){if(t=M1t(t),r=C1t(r),O1t)try{return bye(t,r)}catch(n){}if(A1t(t,r))return I1t(!S1t(T1t.f,t,r),t[r])}});var r$=N((L7r,wye)=>{"use strict";u();var P1t=Wr(),D1t=Gt();wye.exports=P1t&&D1t(function(){return Object.defineProperty(function(){},"prototype",{value:42,writable:!1}).prototype!==42})});var dr=N((R7r,Eye)=>{"use strict";u();var N1t=Qr(),L1t=String,k1t=TypeError;Eye.exports=function(e){if(N1t(e))return e;throw new k1t(L1t(e)+" is not an object")}});var Ei=N(Tye=>{"use strict";u();var R1t=Wr(),j1t=t$(),q1t=r$(),uL=dr(),Sye=Ch(),z1t=TypeError,n$=Object.defineProperty,F1t=Object.getOwnPropertyDescriptor,o$="enumerable",i$="configurable",a$="writable";Tye.f=R1t?q1t?function(t,r,n){if(uL(t),r=Sye(r),uL(n),typeof t=="function"&&r==="prototype"&&"value"in n&&a$ in n&&!n[a$]){var o=F1t(t,r);o&&o[a$]&&(t[r]=n.value,n={configurable:i$ in n?n[i$]:o[i$],enumerable:o$ in n?n[o$]:o[o$],writable:!1})}return n$(t,r,n)}:n$:function(t,r,n){if(uL(t),r=Sye(r),uL(n),j1t)try{return n$(t,r,n)}catch(o){}if("get"in n||"set"in n)throw new z1t("Accessors not supported");return"value"in n&&(t[r]=n.value),t}});var ms=N((F7r,Iye)=>{"use strict";u();var U1t=Wr(),B1t=Ei(),V1t=mc();Iye.exports=U1t?function(e,t,r){return B1t.f(e,t,V1t(1,r))}:function(e,t,r){return e[t]=r,e}});var l_=N((B7r,Cye)=>{"use strict";u();var s$=Wr(),G1t=Wn(),Mye=Function.prototype,H1t=s$&&Object.getOwnPropertyDescriptor,l$=G1t(Mye,"name"),$1t=l$&&function(){}.name==="something",W1t=l$&&(!s$||s$&&H1t(Mye,"name").configurable);Cye.exports={EXISTS:l$,PROPER:$1t,CONFIGURABLE:W1t}});var GM=N((G7r,Aye)=>{"use strict";u();var Y1t=Lt(),Z1t=jn(),u$=UM(),K1t=Y1t(Function.toString);Z1t(u$.inspectSource)||(u$.inspectSource=function(e){return K1t(e)});Aye.exports=u$.inspectSource});var c$=N(($7r,Pye)=>{"use strict";u();var X1t=ur(),J1t=jn(),Oye=X1t.WeakMap;Pye.exports=J1t(Oye)&&/native code/.test(String(Oye))});var HM=N((Y7r,Nye)=>{"use strict";u();var Q1t=mg(),e_t=my(),Dye=Q1t("keys");Nye.exports=function(e){return Dye[e]||(Dye[e]=e_t(e))}});var Vw=N((K7r,Lye)=>{"use strict";u();Lye.exports={}});var Ho=N((J7r,jye)=>{"use strict";u();var t_t=c$(),Rye=ur(),r_t=Qr(),n_t=ms(),p$=Wn(),f$=UM(),o_t=HM(),i_t=Vw(),kye="Object already initialized",d$=Rye.TypeError,a_t=Rye.WeakMap,cL,$M,pL,s_t=function(e){return pL(e)?$M(e):cL(e,{})},l_t=function(e){return function(t){var r;if(!r_t(t)||(r=$M(t)).type!==e)throw new d$("Incompatible receiver, "+e+" required");return r}};t_t||f$.state?(hd=f$.state||(f$.state=new a_t),hd.get=hd.get,hd.has=hd.has,hd.set=hd.set,cL=function(e,t){if(hd.has(e))throw new d$(kye);return t.facade=e,hd.set(e,t),t},$M=function(e){return hd.get(e)||{}},pL=function(e){return hd.has(e)}):(u_=o_t("state"),i_t[u_]=!0,cL=function(e,t){if(p$(e,u_))throw new d$(kye);return t.facade=e,n_t(e,u_,t),t},$M=function(e){return p$(e,u_)?e[u_]:{}},pL=function(e){return p$(e,u_)});var hd,u_;jye.exports={set:cL,get:$M,has:pL,enforce:s_t,getterFor:l_t}});var WM=N((e9r,Fye)=>{"use strict";u();var m$=Lt(),u_t=Gt(),c_t=jn(),fL=Wn(),h$=Wr(),p_t=l_().CONFIGURABLE,f_t=GM(),zye=Ho(),d_t=zye.enforce,h_t=zye.get,qye=String,dL=Object.defineProperty,m_t=m$("".slice),g_t=m$("".replace),v_t=m$([].join),y_t=h$&&!u_t(function(){return dL(function(){},"length",{value:8}).length!==8}),__t=String(String).split("String"),b_t=Fye.exports=function(e,t,r){m_t(qye(t),0,7)==="Symbol("&&(t="["+g_t(qye(t),/^Symbol\(([^)]*)\).*$/,"$1")+"]"),r&&r.getter&&(t="get "+t),r&&r.setter&&(t="set "+t),(!fL(e,"name")||p_t&&e.name!==t)&&(h$?dL(e,"name",{value:t,configurable:!0}):e.name=t),y_t&&r&&fL(r,"arity")&&e.length!==r.arity&&dL(e,"length",{value:r.arity});try{r&&fL(r,"constructor")&&r.constructor?h$&&dL(e,"prototype",{writable:!1}):e.prototype&&(e.prototype=void 0)}catch(o){}var n=d_t(e);return fL(n,"source")||(n.source=v_t(__t,typeof t=="string"?t:"")),e};Function.prototype.toString=b_t(function(){return c_t(this)&&h_t(this).source||f_t(this)},"toString")});var ti=N((r9r,Uye)=>{"use strict";u();var x_t=jn(),w_t=Ei(),E_t=WM(),S_t=lL();Uye.exports=function(e,t,r,n){n||(n={});var o=n.enumerable,i=n.name!==void 0?n.name:t;if(x_t(r)&&E_t(r,i,n),n.global)o?e[t]=r:S_t(t,r);else{try{n.unsafe?e[t]&&(o=!0):delete e[t]}catch(a){}o?e[t]=r:w_t.f(e,t,{value:r,enumerable:!1,configurable:!n.nonConfigurable,writable:!n.nonWritable})}return e}});var g$=N((o9r,Bye)=>{"use strict";u();var T_t=Math.ceil,I_t=Math.floor;Bye.exports=Math.trunc||function(t){var r=+t;return(r>0?I_t:T_t)(r)}});var Vi=N((a9r,Vye)=>{"use strict";u();var M_t=g$();Vye.exports=function(e){var t=+e;return t!==t||t===0?0:M_t(t)}});var md=N((l9r,Gye)=>{"use strict";u();var C_t=Vi(),A_t=Math.max,O_t=Math.min;Gye.exports=function(e,t){var r=C_t(e);return r<0?A_t(r+t,0):O_t(r,t)}});var vc=N((c9r,Hye)=>{"use strict";u();var P_t=Vi(),D_t=Math.min;Hye.exports=function(e){var t=P_t(e);return t>0?D_t(t,9007199254740991):0}});var ho=N((f9r,$ye)=>{"use strict";u();var N_t=vc();$ye.exports=function(e){return N_t(e.length)}});var Gw=N((h9r,Yye)=>{"use strict";u();var L_t=hs(),k_t=md(),R_t=ho(),Wye=function(e){return function(t,r,n){var o=L_t(t),i=R_t(o);if(i===0)return!e&&-1;var a=k_t(n,i),c;if(e&&r!==r){for(;i>a;)if(c=o[a++],c!==c)return!0}else for(;i>a;a++)if((e||a in o)&&o[a]===r)return e||a||0;return!e&&-1}};Yye.exports={includes:Wye(!0),indexOf:Wye(!1)}});var y$=N((g9r,Kye)=>{"use strict";u();var j_t=Lt(),v$=Wn(),q_t=hs(),z_t=Gw().indexOf,F_t=Vw(),Zye=j_t([].push);Kye.exports=function(e,t){var r=q_t(e),n=0,o=[],i;for(i in r)!v$(F_t,i)&&v$(r,i)&&Zye(o,i);for(;t.length>n;)v$(r,i=t[n++])&&(~z_t(o,i)||Zye(o,i));return o}});var hL=N((y9r,Xye)=>{"use strict";u();Xye.exports=["constructor","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","toLocaleString","toString","valueOf"]});var gy=N(Jye=>{"use strict";u();var U_t=y$(),B_t=hL(),V_t=B_t.concat("length","prototype");Jye.f=Object.getOwnPropertyNames||function(t){return U_t(t,V_t)}});var YM=N(Qye=>{"use strict";u();Qye.f=Object.getOwnPropertySymbols});var mL=N((S9r,e0e)=>{"use strict";u();var G_t=ln(),H_t=Lt(),$_t=gy(),W_t=YM(),Y_t=dr(),Z_t=H_t([].concat);e0e.exports=G_t("Reflect","ownKeys")||function(t){var r=$_t.f(Y_t(t)),n=W_t.f;return n?Z_t(r,n(t)):r}});var c_=N((I9r,r0e)=>{"use strict";u();var t0e=Wn(),K_t=mL(),X_t=Ys(),J_t=Ei();r0e.exports=function(e,t,r){for(var n=K_t(t),o=J_t.f,i=X_t.f,a=0;a<n.length;a++){var c=n[a];!t0e(e,c)&&!(r&&t0e(r,c))&&o(e,c,i(t,c))}}});var Hw=N((C9r,n0e)=>{"use strict";u();var Q_t=Gt(),ebt=jn(),tbt=/#|\.prototype\./,ZM=function(e,t){var r=nbt[rbt(e)];return r===ibt?!0:r===obt?!1:ebt(t)?Q_t(t):!!t},rbt=ZM.normalize=function(e){return String(e).replace(tbt,".").toLowerCase()},nbt=ZM.data={},obt=ZM.NATIVE="N",ibt=ZM.POLYFILL="P";n0e.exports=ZM});var ce=N((O9r,o0e)=>{"use strict";u();var gL=ur(),abt=Ys().f,sbt=ms(),lbt=ti(),ubt=lL(),cbt=c_(),pbt=Hw();o0e.exports=function(e,t){var r=e.target,n=e.global,o=e.stat,i,a,c,h,m,y;if(n?a=gL:o?a=gL[r]||ubt(r,{}):a=gL[r]&&gL[r].prototype,a)for(c in t){if(m=t[c],e.dontCallGetSet?(y=abt(a,c),h=y&&y.value):h=a[c],i=pbt(n?c:r+(o?".":"#")+c,e.forced),!i&&h!==void 0){if(typeof m==typeof h)continue;cbt(m,h)}(e.sham||h&&h.sham)&&sbt(m,"sham",!0),lbt(a,c,m,e)}}});var vL=N((D9r,a0e)=>{"use strict";u();var fbt=nn(),dbt=fbt("toStringTag"),i0e={};i0e[dbt]="z";a0e.exports=String(i0e)==="[object z]"});var ku=N((L9r,s0e)=>{"use strict";u();var hbt=vL(),mbt=jn(),yL=wl(),gbt=nn(),vbt=gbt("toStringTag"),ybt=Object,_bt=yL(function(){return arguments}())==="Arguments",bbt=function(e,t){try{return e[t]}catch(r){}};s0e.exports=hbt?yL:function(e){var t,r,n;return e===void 0?"Undefined":e===null?"Null":typeof(r=bbt(t=ybt(e),vbt))=="string"?r:_bt?yL(t):(n=yL(t))==="Object"&&mbt(t.callee)?"Arguments":n}});var Sn=N((R9r,l0e)=>{"use strict";u();var xbt=ku(),wbt=String;l0e.exports=function(e){if(xbt(e)==="Symbol")throw new TypeError("Cannot convert a Symbol value to a string");return wbt(e)}});var p_=N((q9r,u0e)=>{"use strict";u();var Ebt=y$(),Sbt=hL();u0e.exports=Object.keys||function(t){return Ebt(t,Sbt)}});var _L=N(c0e=>{"use strict";u();var Tbt=Wr(),Ibt=r$(),Mbt=Ei(),Cbt=dr(),Abt=hs(),Obt=p_();c0e.f=Tbt&&!Ibt?Object.defineProperties:function(t,r){Cbt(t);for(var n=Abt(r),o=Obt(r),i=o.length,a=0,c;i>a;)Mbt.f(t,c=o[a++],n[c]);return t}});var _$=N((B9r,p0e)=>{"use strict";u();var Pbt=ln();p0e.exports=Pbt("document","documentElement")});var La=N((G9r,y0e)=>{"use strict";u();var Dbt=dr(),Nbt=_L(),f0e=hL(),Lbt=Vw(),kbt=_$(),Rbt=VM(),jbt=HM(),d0e=">",h0e="<",x$="prototype",w$="script",g0e=jbt("IE_PROTO"),b$=function(){},v0e=function(e){return h0e+w$+d0e+e+h0e+"/"+w$+d0e},m0e=function(e){e.write(v0e("")),e.close();var t=e.parentWindow.Object;return e=null,t},qbt=function(){var e=Rbt("iframe"),t="java"+w$+":",r;return e.style.display="none",kbt.appendChild(e),e.src=String(t),r=e.contentWindow.document,r.open(),r.write(v0e("document.F=Object")),r.close(),r.F},bL,xL=function(){try{bL=new ActiveXObject("htmlfile")}catch(t){}xL=typeof document!="undefined"?document.domain&&bL?m0e(bL):qbt():m0e(bL);for(var e=f0e.length;e--;)delete xL[x$][f0e[e]];return xL()};Lbt[g0e]=!0;y0e.exports=Object.create||function(t,r){var n;return t!==null?(b$[x$]=Dbt(t),n=new b$,b$[x$]=null,n[g0e]=t):n=xL(),r===void 0?n:Nbt.f(n,r)}});var yc=N(($9r,_0e)=>{"use strict";u();var zbt=Lt();_0e.exports=zbt([].slice)});var wL=N((Y9r,w0e)=>{"use strict";u();var Fbt=wl(),Ubt=hs(),b0e=gy().f,Bbt=yc(),x0e=typeof window=="object"&&window&&Object.getOwnPropertyNames?Object.getOwnPropertyNames(window):[],Vbt=function(e){try{return b0e(e)}catch(t){return Bbt(x0e)}};w0e.exports.f=function(t){return x0e&&Fbt(t)==="Window"?Vbt(t):b0e(Ubt(t))}});var Gi=N((K9r,S0e)=>{"use strict";u();var E0e=WM(),Gbt=Ei();S0e.exports=function(e,t,r){return r.get&&E0e(r.get,t,{getter:!0}),r.set&&E0e(r.set,t,{setter:!0}),Gbt.f(e,t,r)}});var E$=N(T0e=>{"use strict";u();var Hbt=nn();T0e.f=Hbt});var EL=N((eUr,I0e)=>{"use strict";u();var $bt=ur();I0e.exports=$bt});var ha=N((rUr,C0e)=>{"use strict";u();var M0e=EL(),Wbt=Wn(),Ybt=E$(),Zbt=Ei().f;C0e.exports=function(e){var t=M0e.Symbol||(M0e.Symbol={});Wbt(t,e)||Zbt(t,e,{value:Ybt.f(e)})}});var S$=N((oUr,A0e)=>{"use strict";u();var Kbt=cr(),Xbt=ln(),Jbt=nn(),Qbt=ti();A0e.exports=function(){var e=Xbt("Symbol"),t=e&&e.prototype,r=t&&t.valueOf,n=Jbt("toPrimitive");t&&!t[n]&&Qbt(t,n,function(o){return Kbt(r,this)},{arity:1})}});var Ru=N((aUr,P0e)=>{"use strict";u();var ext=Ei().f,txt=Wn(),rxt=nn(),O0e=rxt("toStringTag");P0e.exports=function(e,t,r){e&&!r&&(e=e.prototype),e&&!txt(e,O0e)&&ext(e,O0e,{configurable:!0,value:t})}});var vy=N((lUr,D0e)=>{"use strict";u();var nxt=wl(),oxt=Lt();D0e.exports=function(e){if(nxt(e)==="Function")return oxt(e)}});var ci=N((cUr,L0e)=>{"use strict";u();var N0e=vy(),ixt=un(),axt=Uw(),sxt=N0e(N0e.bind);L0e.exports=function(e,t){return ixt(e),t===void 0?e:axt?sxt(e,t):function(){return e.apply(t,arguments)}}});var gd=N((fUr,k0e)=>{"use strict";u();var lxt=wl();k0e.exports=Array.isArray||function(t){return lxt(t)==="Array"}});var vd=N((hUr,F0e)=>{"use strict";u();var uxt=Lt(),cxt=Gt(),R0e=jn(),pxt=ku(),fxt=ln(),dxt=GM(),j0e=function(){},q0e=fxt("Reflect","construct"),T$=/^\s*(?:class|function)\b/,hxt=uxt(T$.exec),mxt=!T$.test(j0e),KM=function(t){if(!R0e(t))return!1;try{return q0e(j0e,[],t),!0}catch(r){return!1}},z0e=function(t){if(!R0e(t))return!1;switch(pxt(t)){case"AsyncFunction":case"GeneratorFunction":case"AsyncGeneratorFunction":return!1}try{return mxt||!!hxt(T$,dxt(t))}catch(r){return!0}};z0e.sham=!0;F0e.exports=!q0e||cxt(function(){var e;return KM(KM.call)||!KM(Object)||!KM(function(){e=!0})||e})?z0e:KM});var G0e=N((gUr,V0e)=>{"use strict";u();var U0e=gd(),gxt=vd(),vxt=Qr(),yxt=nn(),_xt=yxt("species"),B0e=Array;V0e.exports=function(e){var t;return U0e(e)&&(t=e.constructor,gxt(t)&&(t===B0e||U0e(t.prototype))?t=void 0:vxt(t)&&(t=t[_xt],t===null&&(t=void 0))),t===void 0?B0e:t}});var $w=N((yUr,H0e)=>{"use strict";u();var bxt=G0e();H0e.exports=function(e,t){return new(bxt(e))(t===0?0:t)}});var ka=N((bUr,W0e)=>{"use strict";u();var xxt=ci(),wxt=Lt(),Ext=dg(),Sxt=Jn(),Txt=ho(),Ixt=$w(),$0e=wxt([].push),yy=function(e){var t=e===1,r=e===2,n=e===3,o=e===4,i=e===6,a=e===7,c=e===5||i;return function(h,m,y,w){for(var E=Sxt(h),A=Ext(E),P=Txt(A),j=xxt(m,y),D=0,L=w||Ixt,z=t?L(h,P):r||a?L(h,0):void 0,B,G;P>D;D++)if((c||D in A)&&(B=A[D],G=j(B,D,E),e))if(t)z[D]=G;else if(G)switch(e){case 3:return!0;case 5:return B;case 6:return D;case 2:$0e(z,B)}else switch(e){case 4:return!1;case 7:$0e(z,B)}return i?-1:n||o?o:z}};W0e.exports={forEach:yy(0),map:yy(1),filter:yy(2),some:yy(3),every:yy(4),find:yy(5),findIndex:yy(6),filterReject:yy(7)}});var c1e=N(()=>{"use strict";u();var SL=ce(),QM=ur(),L$=cr(),Mxt=Lt(),Cxt=So(),Ww=Wr(),Yw=dy(),Axt=Gt(),Zs=Wn(),Oxt=El(),A$=dr(),TL=hs(),k$=Ch(),Pxt=Sn(),O$=mc(),Zw=La(),K0e=p_(),Dxt=gy(),X0e=wL(),Nxt=YM(),J0e=Ys(),Q0e=Ei(),Lxt=_L(),e1e=FM(),I$=ti(),kxt=Gi(),R$=mg(),Rxt=HM(),t1e=Vw(),Y0e=my(),jxt=nn(),qxt=E$(),zxt=ha(),Fxt=S$(),Uxt=Ru(),r1e=Ho(),IL=ka().forEach,_c=Rxt("hidden"),ML="Symbol",JM="prototype",Bxt=r1e.set,Z0e=r1e.getterFor(ML),Zp=Object[JM],f_=QM.Symbol,XM=f_&&f_[JM],Vxt=QM.RangeError,Gxt=QM.TypeError,M$=QM.QObject,n1e=J0e.f,d_=Q0e.f,o1e=X0e.f,Hxt=e1e.f,i1e=Mxt([].push),gg=R$("symbols"),eC=R$("op-symbols"),$xt=R$("wks"),P$=!M$||!M$[JM]||!M$[JM].findChild,a1e=function(e,t,r){var n=n1e(Zp,t);n&&delete Zp[t],d_(e,t,r),n&&e!==Zp&&d_(Zp,t,n)},D$=Ww&&Axt(function(){return Zw(d_({},"a",{get:function(){return d_(this,"a",{value:7}).a}})).a!==7})?a1e:d_,C$=function(e,t){var r=gg[e]=Zw(XM);return Bxt(r,{type:ML,tag:e,description:t}),Ww||(r.description=t),r},CL=function(t,r,n){t===Zp&&CL(eC,r,n),A$(t);var o=k$(r);return A$(n),Zs(gg,o)?(n.enumerable?(Zs(t,_c)&&t[_c][o]&&(t[_c][o]=!1),n=Zw(n,{enumerable:O$(0,!1)})):(Zs(t,_c)||d_(t,_c,O$(1,Zw(null))),t[_c][o]=!0),D$(t,o,n)):d_(t,o,n)},j$=function(t,r){A$(t);var n=TL(r),o=K0e(n).concat(u1e(n));return IL(o,function(i){(!Ww||L$(N$,n,i))&&CL(t,i,n[i])}),t},Wxt=function(t,r){return r===void 0?Zw(t):j$(Zw(t),r)},N$=function(t){var r=k$(t),n=L$(Hxt,this,r);return this===Zp&&Zs(gg,r)&&!Zs(eC,r)?!1:n||!Zs(this,r)||!Zs(gg,r)||Zs(this,_c)&&this[_c][r]?n:!0},s1e=function(t,r){var n=TL(t),o=k$(r);if(!(n===Zp&&Zs(gg,o)&&!Zs(eC,o))){var i=n1e(n,o);return i&&Zs(gg,o)&&!(Zs(n,_c)&&n[_c][o])&&(i.enumerable=!0),i}},l1e=function(t){var r=o1e(TL(t)),n=[];return IL(r,function(o){!Zs(gg,o)&&!Zs(t1e,o)&&i1e(n,o)}),n},u1e=function(e){var t=e===Zp,r=o1e(t?eC:TL(e)),n=[];return IL(r,function(o){Zs(gg,o)&&(!t||Zs(Zp,o))&&i1e(n,gg[o])}),n};Yw||(f_=function(){if(Oxt(XM,this))throw new Gxt("Symbol is not a constructor");var t=!arguments.length||arguments[0]===void 0?void 0:Pxt(arguments[0]),r=Y0e(t),n=function(o){var i=this===void 0?QM:this;i===Zp&&L$(n,eC,o),Zs(i,_c)&&Zs(i[_c],r)&&(i[_c][r]=!1);var a=O$(1,o);try{D$(i,r,a)}catch(c){if(!(c instanceof Vxt))throw c;a1e(i,r,a)}};return Ww&&P$&&D$(Zp,r,{configurable:!0,set:n}),C$(r,t)},XM=f_[JM],I$(XM,"toString",function(){return Z0e(this).tag}),I$(f_,"withoutSetter",function(e){return C$(Y0e(e),e)}),e1e.f=N$,Q0e.f=CL,Lxt.f=j$,J0e.f=s1e,Dxt.f=X0e.f=l1e,Nxt.f=u1e,qxt.f=function(e){return C$(jxt(e),e)},Ww&&(kxt(XM,"description",{configurable:!0,get:function(){return Z0e(this).description}}),Cxt||I$(Zp,"propertyIsEnumerable",N$,{unsafe:!0})));SL({global:!0,constructor:!0,wrap:!0,forced:!Yw,sham:!Yw},{Symbol:f_});IL(K0e($xt),function(e){zxt(e)});SL({target:ML,stat:!0,forced:!Yw},{useSetter:function(){P$=!0},useSimple:function(){P$=!1}});SL({target:"Object",stat:!0,forced:!Yw,sham:!Ww},{create:Wxt,defineProperty:CL,defineProperties:j$,getOwnPropertyDescriptor:s1e});SL({target:"Object",stat:!0,forced:!Yw},{getOwnPropertyNames:l1e});Fxt();Uxt(f_,ML);t1e[_c]=!0});var q$=N((TUr,p1e)=>{"use strict";u();var Yxt=dy();p1e.exports=Yxt&&!!Symbol.for&&!!Symbol.keyFor});var d1e=N(()=>{"use strict";u();var Zxt=ce(),Kxt=ln(),Xxt=Wn(),Jxt=Sn(),f1e=mg(),Qxt=q$(),z$=f1e("string-to-symbol-registry"),ewt=f1e("symbol-to-string-registry");Zxt({target:"Symbol",stat:!0,forced:!Qxt},{for:function(e){var t=Jxt(e);if(Xxt(z$,t))return z$[t];var r=Kxt("Symbol")(t);return z$[t]=r,ewt[r]=t,r}})});var m1e=N(()=>{"use strict";u();var twt=ce(),rwt=Wn(),nwt=hg(),owt=hy(),iwt=mg(),awt=q$(),h1e=iwt("symbol-to-string-registry");twt({target:"Symbol",stat:!0,forced:!awt},{keyFor:function(t){if(!nwt(t))throw new TypeError(owt(t)+" is not a symbol");if(rwt(h1e,t))return h1e[t]}})});var Sl=N((NUr,_1e)=>{"use strict";u();var swt=Uw(),y1e=Function.prototype,g1e=y1e.apply,v1e=y1e.call;_1e.exports=typeof Reflect=="object"&&Reflect.apply||(swt?v1e.bind(g1e):function(){return v1e.apply(g1e,arguments)})});var F$=N((kUr,E1e)=>{"use strict";u();var lwt=Lt(),b1e=gd(),uwt=jn(),x1e=wl(),cwt=Sn(),w1e=lwt([].push);E1e.exports=function(e){if(uwt(e))return e;if(b1e(e)){for(var t=e.length,r=[],n=0;n<t;n++){var o=e[n];typeof o=="string"?w1e(r,o):(typeof o=="number"||x1e(o)==="Number"||x1e(o)==="String")&&w1e(r,cwt(o))}var i=r.length,a=!0;return function(c,h){if(a)return a=!1,h;if(b1e(this))return h;for(var m=0;m<i;m++)if(r[m]===c)return h}}}});var U$=N(()=>{"use strict";u();var pwt=ce(),P1e=ln(),D1e=Sl(),fwt=cr(),tC=Lt(),N1e=Gt(),S1e=jn(),T1e=hg(),L1e=yc(),dwt=F$(),hwt=dy(),mwt=String,_y=P1e("JSON","stringify"),AL=tC(/./.exec),I1e=tC("".charAt),gwt=tC("".charCodeAt),vwt=tC("".replace),ywt=tC(1 .toString),_wt=/[\uD800-\uDFFF]/g,M1e=/^[\uD800-\uDBFF]$/,C1e=/^[\uDC00-\uDFFF]$/,A1e=!hwt||N1e(function(){var e=P1e("Symbol")("stringify detection");return _y([e])!=="[null]"||_y({a:e})!=="{}"||_y(Object(e))!=="{}"}),O1e=N1e(function(){return _y("\uDF06\uD834")!=="\"\\udf06\\ud834\""||_y("\uDEAD")!=="\"\\udead\""}),bwt=function(e,t){var r=L1e(arguments),n=dwt(t);if(!(!S1e(n)&&(e===void 0||T1e(e))))return r[1]=function(o,i){if(S1e(n)&&(i=fwt(n,this,mwt(o),i)),!T1e(i))return i},D1e(_y,null,r)},xwt=function(e,t,r){var n=I1e(r,t-1),o=I1e(r,t+1);return AL(M1e,e)&&!AL(C1e,o)||AL(C1e,e)&&!AL(M1e,n)?"\\u"+ywt(gwt(e,0),16):e};_y&&pwt({target:"JSON",stat:!0,arity:3,forced:A1e||O1e},{stringify:function(t,r,n){var o=L1e(arguments),i=D1e(A1e?bwt:_y,null,o);return O1e&&typeof i=="string"?vwt(i,_wt,xwt):i}})});var R1e=N(()=>{"use strict";u();var wwt=ce(),Ewt=dy(),Swt=Gt(),k1e=YM(),Twt=Jn(),Iwt=!Ewt||Swt(function(){k1e.f(1)});wwt({target:"Object",stat:!0,forced:Iwt},{getOwnPropertySymbols:function(t){var r=k1e.f;return r?r(Twt(t)):[]}})});var j1e=N(()=>{"use strict";u();c1e();d1e();m1e();U$();R1e()});var G1e=N(()=>{"use strict";u();var Mwt=ce(),Cwt=Wr(),Awt=ur(),OL=Lt(),Owt=Wn(),Pwt=jn(),Dwt=El(),Nwt=Sn(),Lwt=Gi(),kwt=c_(),vg=Awt.Symbol,h_=vg&&vg.prototype;Cwt&&Pwt(vg)&&(!("description"in h_)||vg().description!==void 0)&&(B$={},rC=function(){var t=arguments.length<1||arguments[0]===void 0?void 0:Nwt(arguments[0]),r=Dwt(h_,this)?new vg(t):t===void 0?vg():vg(t);return t===""&&(B$[r]=!0),r},kwt(rC,vg),rC.prototype=h_,h_.constructor=rC,q1e=String(vg("description detection"))==="Symbol(description detection)",z1e=OL(h_.valueOf),F1e=OL(h_.toString),U1e=/^Symbol\((.*)\)[^)]+$/,B1e=OL("".replace),V1e=OL("".slice),Lwt(h_,"description",{configurable:!0,get:function(){var t=z1e(this);if(Owt(B$,t))return"";var r=F1e(t),n=q1e?V1e(r,7,-1):B1e(r,U1e,"$1");return n===""?void 0:n}}),Mwt({global:!0,constructor:!0,forced:!0},{Symbol:rC}));var B$,rC,q1e,z1e,F1e,U1e,B1e,V1e});var H1e=N(()=>{"use strict";u();var Rwt=ha();Rwt("asyncIterator")});var $1e=N(()=>{"use strict";u();var jwt=ha();jwt("hasInstance")});var W1e=N(()=>{"use strict";u();var qwt=ha();qwt("isConcatSpreadable")});var Y1e=N(()=>{"use strict";u();var zwt=ha();zwt("iterator")});var Z1e=N(()=>{"use strict";u();var Fwt=ha();Fwt("match")});var K1e=N(()=>{"use strict";u();var Uwt=ha();Uwt("matchAll")});var X1e=N(()=>{"use strict";u();var Bwt=ha();Bwt("replace")});var J1e=N(()=>{"use strict";u();var Vwt=ha();Vwt("search")});var Q1e=N(()=>{"use strict";u();var Gwt=ha();Gwt("species")});var e_e=N(()=>{"use strict";u();var Hwt=ha();Hwt("split")});var t_e=N(()=>{"use strict";u();var $wt=ha(),Wwt=S$();$wt("toPrimitive");Wwt()});var r_e=N(()=>{"use strict";u();var Ywt=ln(),Zwt=ha(),Kwt=Ru();Zwt("toStringTag");Kwt(Ywt("Symbol"),"Symbol")});var n_e=N(()=>{"use strict";u();var Xwt=ha();Xwt("unscopables")});var nC=N((LBr,o_e)=>{"use strict";u();var Jwt=Lt(),Qwt=un();o_e.exports=function(e,t,r){try{return Jwt(Qwt(Object.getOwnPropertyDescriptor(e,t)[r]))}catch(n){}}});var V$=N((RBr,i_e)=>{"use strict";u();var eEt=Qr();i_e.exports=function(e){return eEt(e)||e===null}});var G$=N((qBr,a_e)=>{"use strict";u();var tEt=V$(),rEt=String,nEt=TypeError;a_e.exports=function(e){if(tEt(e))return e;throw new nEt("Can't set "+rEt(e)+" as a prototype")}});var Kp=N((FBr,s_e)=>{"use strict";u();var oEt=nC(),iEt=Qr(),aEt=Ni(),sEt=G$();s_e.exports=Object.setPrototypeOf||("__proto__"in{}?function(){var e=!1,t={},r;try{r=oEt(Object.prototype,"__proto__","set"),r(t,[]),e=t instanceof Array}catch(n){}return function(o,i){return aEt(o),sEt(i),iEt(o)&&(e?r(o,i):o.__proto__=i),o}}():void 0)});var H$=N((BBr,l_e)=>{"use strict";u();var lEt=Ei().f;l_e.exports=function(e,t,r){r in e||lEt(e,r,{configurable:!0,get:function(){return t[r]},set:function(n){t[r]=n}})}});var by=N((GBr,c_e)=>{"use strict";u();var uEt=jn(),cEt=Qr(),u_e=Kp();c_e.exports=function(e,t,r){var n,o;return u_e&&uEt(n=t.constructor)&&n!==r&&cEt(o=n.prototype)&&o!==r.prototype&&u_e(e,o),e}});var m_=N(($Br,p_e)=>{"use strict";u();var pEt=Sn();p_e.exports=function(e,t){return e===void 0?arguments.length<2?"":t:pEt(e)}});var $$=N((YBr,f_e)=>{"use strict";u();var fEt=Qr(),dEt=ms();f_e.exports=function(e,t){fEt(t)&&"cause"in t&&dEt(e,"cause",t.cause)}});var PL=N((KBr,m_e)=>{"use strict";u();var hEt=Lt(),d_e=Error,mEt=hEt("".replace),gEt=function(e){return String(new d_e(e).stack)}("zxcasd"),h_e=/\n\s*at [^:]*:[^\n]*/,vEt=h_e.test(gEt);m_e.exports=function(e,t){if(vEt&&typeof e=="string"&&!d_e.prepareStackTrace)for(;t--;)e=mEt(e,h_e,"");return e}});var W$=N((JBr,g_e)=>{"use strict";u();var yEt=Gt(),_Et=mc();g_e.exports=!yEt(function(){var e=new Error("a");return"stack"in e?(Object.defineProperty(e,"stack",_Et(1,7)),e.stack!==7):!0})});var DL=N((eVr,y_e)=>{"use strict";u();var bEt=ms(),xEt=PL(),wEt=W$(),v_e=Error.captureStackTrace;y_e.exports=function(e,t,r,n){wEt&&(v_e?v_e(e,t):bEt(e,"stack",xEt(r,n)))}});var Y$=N((rVr,I_e)=>{"use strict";u();var b_e=ln(),EEt=Wn(),x_e=ms(),SEt=El(),w_e=Kp(),E_e=c_(),S_e=H$(),TEt=by(),IEt=m_(),MEt=$$(),CEt=DL(),AEt=Wr(),T_e=So();I_e.exports=function(e,t,r,n){var o="stackTraceLimit",i=n?2:1,a=e.split("."),c=a[a.length-1],h=b_e.apply(null,a);if(h){var m=h.prototype;if(!T_e&&EEt(m,"cause")&&delete m.cause,!r)return h;var y=b_e("Error"),w=t(function(E,A){var P=IEt(n?A:E,void 0),j=n?new h(E):new h;return P!==void 0&&x_e(j,"message",P),CEt(j,w,j.stack,2),this&&SEt(m,this)&&TEt(j,this,w),arguments.length>i&&MEt(j,arguments[i]),j});if(w.prototype=m,c!=="Error"?w_e?w_e(w,y):E_e(w,y,{name:!0}):AEt&&o in h&&(S_e(w,h,o),S_e(w,h,"prepareStackTrace")),E_e(w,h),!T_e)try{m.name!==c&&x_e(m,"name",c),m.constructor=w}catch(E){}return w}}});var O_e=N(()=>{"use strict";u();var C_e=ce(),OEt=ur(),Ah=Sl(),A_e=Y$(),Z$="WebAssembly",M_e=OEt[Z$],NL=new Error("e",{cause:7}).cause!==7,g_=function(e,t){var r={};r[e]=A_e(e,t,NL),C_e({global:!0,constructor:!0,arity:1,forced:NL},r)},K$=function(e,t){if(M_e&&M_e[e]){var r={};r[e]=A_e(Z$+"."+e,t,NL),C_e({target:Z$,stat:!0,constructor:!0,arity:1,forced:NL},r)}};g_("Error",function(e){return function(r){return Ah(e,this,arguments)}});g_("EvalError",function(e){return function(r){return Ah(e,this,arguments)}});g_("RangeError",function(e){return function(r){return Ah(e,this,arguments)}});g_("ReferenceError",function(e){return function(r){return Ah(e,this,arguments)}});g_("SyntaxError",function(e){return function(r){return Ah(e,this,arguments)}});g_("TypeError",function(e){return function(r){return Ah(e,this,arguments)}});g_("URIError",function(e){return function(r){return Ah(e,this,arguments)}});K$("CompileError",function(e){return function(r){return Ah(e,this,arguments)}});K$("LinkError",function(e){return function(r){return Ah(e,this,arguments)}});K$("RuntimeError",function(e){return function(r){return Ah(e,this,arguments)}})});var X$=N((sVr,D_e)=>{"use strict";u();var PEt=Wr(),DEt=Gt(),NEt=dr(),P_e=m_(),LL=Error.prototype.toString,LEt=DEt(function(){if(PEt){var e=Object.create(Object.defineProperty({},"name",{get:function(){return this===e}}));if(LL.call(e)!=="true")return!0}return LL.call({message:1,name:2})!=="2: 1"||LL.call({})!=="Error"});D_e.exports=LEt?function(){var t=NEt(this),r=P_e(t.name,"Error"),n=P_e(t.message);return r?n?r+": "+n:r:n}:LL});var k_e=N(()=>{"use strict";u();var kEt=ti(),N_e=X$(),L_e=Error.prototype;L_e.toString!==N_e&&kEt(L_e,"toString",N_e)});var kL=N((fVr,R_e)=>{"use strict";u();var REt=Gt();R_e.exports=!REt(function(){function e(){}return e.prototype.constructor=null,Object.getPrototypeOf(new e)!==e.prototype})});var gs=N((hVr,q_e)=>{"use strict";u();var jEt=Wn(),qEt=jn(),zEt=Jn(),FEt=HM(),UEt=kL(),j_e=FEt("IE_PROTO"),J$=Object,BEt=J$.prototype;q_e.exports=UEt?J$.getPrototypeOf:function(e){var t=zEt(e);if(jEt(t,j_e))return t[j_e];var r=t.constructor;return qEt(r)&&t instanceof r?r.prototype:t instanceof J$?BEt:null}});var v_=N((gVr,z_e)=>{"use strict";u();z_e.exports={}});var RL=N((yVr,F_e)=>{"use strict";u();var VEt=nn(),GEt=v_(),HEt=VEt("iterator"),$Et=Array.prototype;F_e.exports=function(e){return e!==void 0&&(GEt.Array===e||$Et[HEt]===e)}});var Oh=N((bVr,B_e)=>{"use strict";u();var WEt=ku(),U_e=Na(),YEt=gc(),ZEt=v_(),KEt=nn(),XEt=KEt("iterator");B_e.exports=function(e){if(!YEt(e))return U_e(e,XEt)||U_e(e,"@@iterator")||ZEt[WEt(e)]}});var xy=N((wVr,V_e)=>{"use strict";u();var JEt=cr(),QEt=un(),eSt=dr(),tSt=hy(),rSt=Oh(),nSt=TypeError;V_e.exports=function(e,t){var r=arguments.length<2?rSt(e):t;if(QEt(r))return eSt(JEt(r,e));throw new nSt(tSt(e)+" is not iterable")}});var Ks=N((SVr,H_e)=>{"use strict";u();var oSt=cr(),G_e=dr(),iSt=Na();H_e.exports=function(e,t,r){var n,o;G_e(e);try{if(n=iSt(e,"return"),!n){if(t==="throw")throw r;return r}n=oSt(n,e)}catch(i){o=!0,n=i}if(t==="throw")throw r;if(o)throw n;return G_e(n),r}});var ma=N((IVr,Z_e)=>{"use strict";u();var aSt=ci(),sSt=cr(),lSt=dr(),uSt=hy(),cSt=RL(),pSt=ho(),$_e=El(),fSt=xy(),dSt=Oh(),W_e=Ks(),hSt=TypeError,jL=function(e,t){this.stopped=e,this.result=t},Y_e=jL.prototype;Z_e.exports=function(e,t,r){var n=r&&r.that,o=!!(r&&r.AS_ENTRIES),i=!!(r&&r.IS_RECORD),a=!!(r&&r.IS_ITERATOR),c=!!(r&&r.INTERRUPTED),h=aSt(t,n),m,y,w,E,A,P,j,D=function(z){return m&&W_e(m,"normal",z),new jL(!0,z)},L=function(z){return o?(lSt(z),c?h(z[0],z[1],D):h(z[0],z[1])):c?h(z,D):h(z)};if(i)m=e.iterator;else if(a)m=e;else{if(y=dSt(e),!y)throw new hSt(uSt(e)+" is not iterable");if(cSt(y)){for(w=0,E=pSt(e);E>w;w++)if(A=L(e[w]),A&&$_e(Y_e,A))return A;return new jL(!1)}m=fSt(e,y)}for(P=i?e.next:m.next;!(j=sSt(P,m)).done;){try{A=L(j.value)}catch(z){W_e(m,"throw",z)}if(typeof A=="object"&&A&&$_e(Y_e,A))return A}return new jL(!1)}});var X_e=N(()=>{"use strict";u();var mSt=ce(),gSt=El(),vSt=gs(),qL=Kp(),ySt=c_(),K_e=La(),Q$=ms(),eW=mc(),_St=$$(),bSt=DL(),xSt=ma(),wSt=m_(),ESt=nn(),SSt=ESt("toStringTag"),zL=Error,TSt=[].push,Kw=function(t,r){var n=gSt(tW,this),o;qL?o=qL(new zL,n?vSt(this):tW):(o=n?this:K_e(tW),Q$(o,SSt,"Error")),r!==void 0&&Q$(o,"message",wSt(r)),bSt(o,Kw,o.stack,1),arguments.length>2&&_St(o,arguments[2]);var i=[];return xSt(t,TSt,{that:i}),Q$(o,"errors",i),o};qL?qL(Kw,zL):ySt(Kw,zL,{name:!0});var tW=Kw.prototype=K_e(zL.prototype,{constructor:eW(1,Kw),message:eW(1,""),name:eW(1,"AggregateError")});mSt({global:!0,constructor:!0,arity:2},{AggregateError:Kw})});var rW=N(()=>{"use strict";u();X_e()});var tbe=N(()=>{"use strict";u();var ISt=ce(),MSt=ln(),CSt=Sl(),J_e=Gt(),ASt=Y$(),nW="AggregateError",Q_e=MSt(nW),ebe=!J_e(function(){return Q_e([1]).errors[0]!==1})&&J_e(function(){return Q_e([1],nW,{cause:7}).cause!==7});ISt({global:!0,constructor:!0,arity:2,forced:ebe},{AggregateError:ASt(nW,function(e){return function(r,n){return CSt(e,this,arguments)}},ebe,!0)})});var ga=N((jVr,rbe)=>{"use strict";u();var OSt=nn(),PSt=La(),DSt=Ei().f,oW=OSt("unscopables"),iW=Array.prototype;iW[oW]===void 0&&DSt(iW,oW,{configurable:!0,value:PSt(null)});rbe.exports=function(e){iW[oW][e]=!0}});var aW=N(()=>{"use strict";u();var NSt=ce(),LSt=Jn(),kSt=ho(),RSt=Vi(),jSt=ga();NSt({target:"Array",proto:!0},{at:function(t){var r=LSt(this),n=kSt(r),o=RSt(t),i=o>=0?o:n+o;return i<0||i>=n?void 0:r[i]}});jSt("at")});var wy=N((BVr,nbe)=>{"use strict";u();var qSt=TypeError,zSt=9007199254740991;nbe.exports=function(e){if(e>zSt)throw qSt("Maximum allowed index exceeded");return e}});var Xp=N((GVr,obe)=>{"use strict";u();var FSt=Wr(),USt=Ei(),BSt=mc();obe.exports=function(e,t,r){FSt?USt.f(e,t,BSt(0,r)):e[t]=r}});var Xw=N(($Vr,ibe)=>{"use strict";u();var VSt=Gt(),GSt=nn(),HSt=dd(),$St=GSt("species");ibe.exports=function(e){return HSt>=51||!VSt(function(){var t=[],r=t.constructor={};return r[$St]=function(){return{foo:1}},t[e](Boolean).foo!==1})}});var ube=N(()=>{"use strict";u();var WSt=ce(),YSt=Gt(),ZSt=gd(),KSt=Qr(),XSt=Jn(),JSt=ho(),abe=wy(),sbe=Xp(),QSt=$w(),eTt=Xw(),tTt=nn(),rTt=dd(),lbe=tTt("isConcatSpreadable"),nTt=rTt>=51||!YSt(function(){var e=[];return e[lbe]=!1,e.concat()[0]!==e}),oTt=function(e){if(!KSt(e))return!1;var t=e[lbe];return t!==void 0?!!t:ZSt(e)},iTt=!nTt||!eTt("concat");WSt({target:"Array",proto:!0,arity:1,forced:iTt},{concat:function(t){var r=XSt(this),n=QSt(r,0),o=0,i,a,c,h,m;for(i=-1,c=arguments.length;i<c;i++)if(m=i===-1?r:arguments[i],oTt(m))for(h=JSt(m),abe(o+h),a=0;a<h;a++,o++)a in m&&sbe(n,o,m[a]);else abe(o+1),sbe(n,o++,m);return n.length=o,n}})});var oC=N((XVr,pbe)=>{"use strict";u();var cbe=hy(),aTt=TypeError;pbe.exports=function(e,t){if(!delete e[t])throw new aTt("Cannot delete property "+cbe(t)+" of "+cbe(e))}});var lW=N((QVr,fbe)=>{"use strict";u();var sTt=Jn(),sW=md(),lTt=ho(),uTt=oC(),cTt=Math.min;fbe.exports=[].copyWithin||function(t,r){var n=sTt(this),o=lTt(n),i=sW(t,o),a=sW(r,o),c=arguments.length>2?arguments[2]:void 0,h=cTt((c===void 0?o:sW(c,o))-a,o-i),m=1;for(a<i&&i<a+h&&(m=-1,a+=h-1,i+=h-1);h-->0;)a in n?n[i]=n[a]:uTt(n,i),i+=m,a+=m;return n}});var dbe=N(()=>{"use strict";u();var pTt=ce(),fTt=lW(),dTt=ga();pTt({target:"Array",proto:!0},{copyWithin:fTt});dTt("copyWithin")});var Jp=N((oGr,hbe)=>{"use strict";u();var hTt=Gt();hbe.exports=function(e,t){var r=[][e];return!!r&&hTt(function(){r.call(null,t||function(){return 1},1)})}});var mbe=N(()=>{"use strict";u();var mTt=ce(),gTt=ka().every,vTt=Jp(),yTt=vTt("every");mTt({target:"Array",proto:!0,forced:!yTt},{every:function(t){return gTt(this,t,arguments.length>1?arguments[1]:void 0)}})});var FL=N((uGr,vbe)=>{"use strict";u();var _Tt=Jn(),gbe=md(),bTt=ho();vbe.exports=function(t){for(var r=_Tt(this),n=bTt(r),o=arguments.length,i=gbe(o>1?arguments[1]:void 0,n),a=o>2?arguments[2]:void 0,c=a===void 0?n:gbe(a,n);c>i;)r[i++]=t;return r}});var ybe=N(()=>{"use strict";u();var xTt=ce(),wTt=FL(),ETt=ga();xTt({target:"Array",proto:!0},{fill:wTt});ETt("fill")});var _be=N(()=>{"use strict";u();var STt=ce(),TTt=ka().filter,ITt=Xw(),MTt=ITt("filter");STt({target:"Array",proto:!0,forced:!MTt},{filter:function(t){return TTt(this,t,arguments.length>1?arguments[1]:void 0)}})});var xbe=N(()=>{"use strict";u();var CTt=ce(),ATt=ka().find,OTt=ga(),uW="find",bbe=!0;uW in[]&&Array(1)[uW](function(){bbe=!1});CTt({target:"Array",proto:!0,forced:bbe},{find:function(t){return ATt(this,t,arguments.length>1?arguments[1]:void 0)}});OTt(uW)});var Ebe=N(()=>{"use strict";u();var PTt=ce(),DTt=ka().findIndex,NTt=ga(),cW="findIndex",wbe=!0;cW in[]&&Array(1)[cW](function(){wbe=!1});PTt({target:"Array",proto:!0,forced:wbe},{findIndex:function(t){return DTt(this,t,arguments.length>1?arguments[1]:void 0)}});NTt(cW)});var iC=N((EGr,Tbe)=>{"use strict";u();var LTt=ci(),kTt=dg(),RTt=Jn(),jTt=ho(),Sbe=function(e){var t=e===1;return function(r,n,o){for(var i=RTt(r),a=kTt(i),c=jTt(a),h=LTt(n,o),m,y;c-->0;)if(m=a[c],y=h(m,c,i),y)switch(e){case 0:return m;case 1:return c}return t?-1:void 0}};Tbe.exports={findLast:Sbe(0),findLastIndex:Sbe(1)}});var pW=N(()=>{"use strict";u();var qTt=ce(),zTt=iC().findLast,FTt=ga();qTt({target:"Array",proto:!0},{findLast:function(t){return zTt(this,t,arguments.length>1?arguments[1]:void 0)}});FTt("findLast")});var fW=N(()=>{"use strict";u();var UTt=ce(),BTt=iC().findLastIndex,VTt=ga();UTt({target:"Array",proto:!0},{findLastIndex:function(t){return BTt(this,t,arguments.length>1?arguments[1]:void 0)}});VTt("findLastIndex")});var dW=N((PGr,Mbe)=>{"use strict";u();var GTt=gd(),HTt=ho(),$Tt=wy(),WTt=ci(),Ibe=function(e,t,r,n,o,i,a,c){for(var h=o,m=0,y=a?WTt(a,c):!1,w,E;m<n;)m in r&&(w=y?y(r[m],m,t):r[m],i>0&&GTt(w)?(E=HTt(w),h=Ibe(e,t,w,E,h,i-1)-1):($Tt(h+1),e[h]=w),h++),m++;return h};Mbe.exports=Ibe});var Cbe=N(()=>{"use strict";u();var YTt=ce(),ZTt=dW(),KTt=Jn(),XTt=ho(),JTt=Vi(),QTt=$w();YTt({target:"Array",proto:!0},{flat:function(){var t=arguments.length?arguments[0]:void 0,r=KTt(this),n=XTt(r),o=QTt(r,0);return o.length=ZTt(o,r,r,n,0,t===void 0?1:JTt(t)),o}})});var Abe=N(()=>{"use strict";u();var e2t=ce(),t2t=dW(),r2t=un(),n2t=Jn(),o2t=ho(),i2t=$w();e2t({target:"Array",proto:!0},{flatMap:function(t){var r=n2t(this),n=o2t(r),o;return r2t(t),o=i2t(r,0),o.length=t2t(o,r,r,n,0,1,t,arguments.length>1?arguments[1]:void 0),o}})});var hW=N((zGr,Obe)=>{"use strict";u();var a2t=ka().forEach,s2t=Jp(),l2t=s2t("forEach");Obe.exports=l2t?[].forEach:function(t){return a2t(this,t,arguments.length>1?arguments[1]:void 0)}});var Dbe=N(()=>{"use strict";u();var u2t=ce(),Pbe=hW();u2t({target:"Array",proto:!0,forced:[].forEach!==Pbe},{forEach:Pbe})});var UL=N((GGr,Nbe)=>{"use strict";u();var c2t=dr(),p2t=Ks();Nbe.exports=function(e,t,r,n){try{return n?t(c2t(r)[0],r[1]):t(r)}catch(o){p2t(e,"throw",o)}}});var mW=N(($Gr,Rbe)=>{"use strict";u();var f2t=ci(),d2t=cr(),h2t=Jn(),m2t=UL(),g2t=RL(),v2t=vd(),y2t=ho(),Lbe=Xp(),_2t=xy(),b2t=Oh(),kbe=Array;Rbe.exports=function(t){var r=h2t(t),n=v2t(this),o=arguments.length,i=o>1?arguments[1]:void 0,a=i!==void 0;a&&(i=f2t(i,o>2?arguments[2]:void 0));var c=b2t(r),h=0,m,y,w,E,A,P;if(c&&!(this===kbe&&g2t(c)))for(y=n?new this:[],E=_2t(r,c),A=E.next;!(w=d2t(A,E)).done;h++)P=a?m2t(E,i,[w.value,h],!0):w.value,Lbe(y,h,P);else for(m=y2t(r),y=n?new this(m):kbe(m);m>h;h++)P=a?i(r[h],h):r[h],Lbe(y,h,P);return y.length=h,y}});var aC=N((YGr,Fbe)=>{"use strict";u();var x2t=nn(),qbe=x2t("iterator"),zbe=!1;try{jbe=0,gW={next:function(){return{done:!!jbe++}},return:function(){zbe=!0}},gW[qbe]=function(){return this},Array.from(gW,function(){throw 2})}catch(e){}var jbe,gW;Fbe.exports=function(e,t){try{if(!t&&!zbe)return!1}catch(o){return!1}var r=!1;try{var n={};n[qbe]=function(){return{next:function(){return{done:r=!0}}}},e(n)}catch(o){}return r}});var Ube=N(()=>{"use strict";u();var w2t=ce(),E2t=mW(),S2t=aC(),T2t=!S2t(function(e){Array.from(e)});w2t({target:"Array",stat:!0,forced:T2t},{from:E2t})});var Bbe=N(()=>{"use strict";u();var I2t=ce(),M2t=Gw().includes,C2t=Gt(),A2t=ga(),O2t=C2t(function(){return!Array(1).includes()});I2t({target:"Array",proto:!0,forced:O2t},{includes:function(t){return M2t(this,t,arguments.length>1?arguments[1]:void 0)}});A2t("includes")});var Gbe=N(()=>{"use strict";u();var P2t=ce(),D2t=vy(),N2t=Gw().indexOf,L2t=Jp(),vW=D2t([].indexOf),Vbe=!!vW&&1/vW([1],1,-0)<0,k2t=Vbe||!L2t("indexOf");P2t({target:"Array",proto:!0,forced:k2t},{indexOf:function(t){var r=arguments.length>1?arguments[1]:void 0;return Vbe?vW(this,t,r)||0:N2t(this,t,r)}})});var Hbe=N(()=>{"use strict";u();var R2t=ce(),j2t=gd();R2t({target:"Array",stat:!0},{isArray:j2t})});var Ey=N((lHr,Ybe)=>{"use strict";u();var q2t=Gt(),z2t=jn(),F2t=Qr(),U2t=La(),$be=gs(),B2t=ti(),V2t=nn(),G2t=So(),bW=V2t("iterator"),Wbe=!1,yg,yW,_W;[].keys&&(_W=[].keys(),"next"in _W?(yW=$be($be(_W)),yW!==Object.prototype&&(yg=yW)):Wbe=!0);var H2t=!F2t(yg)||q2t(function(){var e={};return yg[bW].call(e)!==e});H2t?yg={}:G2t&&(yg=U2t(yg));z2t(yg[bW])||B2t(yg,bW,function(){return this});Ybe.exports={IteratorPrototype:yg,BUGGY_SAFARI_ITERATORS:Wbe}});var Sy=N((cHr,Zbe)=>{"use strict";u();var $2t=Ey().IteratorPrototype,W2t=La(),Y2t=mc(),Z2t=Ru(),K2t=v_(),X2t=function(){return this};Zbe.exports=function(e,t,r,n){var o=t+" Iterator";return e.prototype=W2t($2t,{next:Y2t(+!n,r)}),Z2t(e,o,!1,!0),K2t[o]=X2t,e}});var GL=N((fHr,ixe)=>{"use strict";u();var J2t=ce(),Q2t=cr(),BL=So(),nxe=l_(),eIt=jn(),tIt=Sy(),Kbe=gs(),Xbe=Kp(),rIt=Ru(),nIt=ms(),xW=ti(),oIt=nn(),Jbe=v_(),oxe=Ey(),iIt=nxe.PROPER,aIt=nxe.CONFIGURABLE,Qbe=oxe.IteratorPrototype,VL=oxe.BUGGY_SAFARI_ITERATORS,sC=oIt("iterator"),exe="keys",lC="values",txe="entries",rxe=function(){return this};ixe.exports=function(e,t,r,n,o,i,a){tIt(r,t,n);var c=function(L){if(L===o&&E)return E;if(!VL&&L&&L in y)return y[L];switch(L){case exe:return function(){return new r(this,L)};case lC:return function(){return new r(this,L)};case txe:return function(){return new r(this,L)}}return function(){return new r(this)}},h=t+" Iterator",m=!1,y=e.prototype,w=y[sC]||y["@@iterator"]||o&&y[o],E=!VL&&w||c(o),A=t==="Array"&&y.entries||w,P,j,D;if(A&&(P=Kbe(A.call(new e)),P!==Object.prototype&&P.next&&(!BL&&Kbe(P)!==Qbe&&(Xbe?Xbe(P,Qbe):eIt(P[sC])||xW(P,sC,rxe)),rIt(P,h,!0,!0),BL&&(Jbe[h]=rxe))),iIt&&o===lC&&w&&w.name!==lC&&(!BL&&aIt?nIt(y,"name",lC):(m=!0,E=function(){return Q2t(w,this)})),o)if(j={values:c(lC),keys:i?E:c(exe),entries:c(txe)},a)for(D in j)(VL||m||!(D in y))&&xW(y,D,j[D]);else J2t({target:t,proto:!0,forced:VL||m},j);return(!BL||a)&&y[sC]!==E&&xW(y,sC,E,{name:o}),Jbe[t]=E,j}});var Ns=N((hHr,axe)=>{"use strict";u();axe.exports=function(e,t){return{value:e,done:t}}});var uC=N((gHr,pxe)=>{"use strict";u();var sIt=hs(),wW=ga(),sxe=v_(),uxe=Ho(),lIt=Ei().f,uIt=GL(),HL=Ns(),cIt=So(),pIt=Wr(),cxe="Array Iterator",fIt=uxe.set,dIt=uxe.getterFor(cxe);pxe.exports=uIt(Array,"Array",function(e,t){fIt(this,{type:cxe,target:sIt(e),index:0,kind:t})},function(){var e=dIt(this),t=e.target,r=e.index++;if(!t||r>=t.length)return e.target=null,HL(void 0,!0);switch(e.kind){case"keys":return HL(r,!1);case"values":return HL(t[r],!1)}return HL([r,t[r]],!1)},"values");var lxe=sxe.Arguments=sxe.Array;wW("keys");wW("values");wW("entries");if(!cIt&&pIt&&lxe.name!=="values")try{lIt(lxe,"name",{value:"values"})}catch(e){}});var fxe=N(()=>{"use strict";u();var hIt=ce(),mIt=Lt(),gIt=dg(),vIt=hs(),yIt=Jp(),_It=mIt([].join),bIt=gIt!==Object,xIt=bIt||!yIt("join",",");hIt({target:"Array",proto:!0,forced:xIt},{join:function(t){return _It(vIt(this),t===void 0?",":t)}})});var SW=N((xHr,hxe)=>{"use strict";u();var wIt=Sl(),EIt=hs(),SIt=Vi(),TIt=ho(),IIt=Jp(),MIt=Math.min,EW=[].lastIndexOf,dxe=!!EW&&1/[1].lastIndexOf(1,-0)<0,CIt=IIt("lastIndexOf"),AIt=dxe||!CIt;hxe.exports=AIt?function(t){if(dxe)return wIt(EW,this,arguments)||0;var r=EIt(this),n=TIt(r);if(n===0)return-1;var o=n-1;for(arguments.length>1&&(o=MIt(o,SIt(arguments[1]))),o<0&&(o=n+o);o>=0;o--)if(o in r&&r[o]===t)return o||0;return-1}:EW});var gxe=N(()=>{"use strict";u();var OIt=ce(),mxe=SW();OIt({target:"Array",proto:!0,forced:mxe!==[].lastIndexOf},{lastIndexOf:mxe})});var vxe=N(()=>{"use strict";u();var PIt=ce(),DIt=ka().map,NIt=Xw(),LIt=NIt("map");PIt({target:"Array",proto:!0,forced:!LIt},{map:function(t){return DIt(this,t,arguments.length>1?arguments[1]:void 0)}})});var _xe=N(()=>{"use strict";u();var kIt=ce(),RIt=Gt(),jIt=vd(),qIt=Xp(),yxe=Array,zIt=RIt(function(){function e(){}return!(yxe.of.call(e)instanceof e)});kIt({target:"Array",stat:!0,forced:zIt},{of:function(){for(var t=0,r=arguments.length,n=new(jIt(this)?this:yxe)(r);r>t;)qIt(n,t,arguments[t++]);return n.length=r,n}})});var $L=N((DHr,bxe)=>{"use strict";u();var FIt=Wr(),UIt=gd(),BIt=TypeError,VIt=Object.getOwnPropertyDescriptor,GIt=FIt&&!function(){if(this!==void 0)return!0;try{Object.defineProperty([],"length",{writable:!1}).length=1}catch(e){return e instanceof TypeError}}();bxe.exports=GIt?function(e,t){if(UIt(e)&&!VIt(e,"length").writable)throw new BIt("Cannot set read only .length");return e.length=t}:function(e,t){return e.length=t}});var xxe=N(()=>{"use strict";u();var HIt=ce(),$It=Jn(),WIt=ho(),YIt=$L(),ZIt=wy(),KIt=Gt(),XIt=KIt(function(){return[].push.call({length:4294967296},1)!==4294967297}),JIt=function(){try{Object.defineProperty([],"length",{writable:!1}).push()}catch(e){return e instanceof TypeError}},QIt=XIt||!JIt();HIt({target:"Array",proto:!0,arity:1,forced:QIt},{push:function(t){var r=$It(this),n=WIt(r),o=arguments.length;ZIt(n+o);for(var i=0;i<o;i++)r[n]=arguments[i],n++;return YIt(r,n),n}})});var cC=N((jHr,Txe)=>{"use strict";u();var eMt=un(),tMt=Jn(),rMt=dg(),nMt=ho(),wxe=TypeError,Exe="Reduce of empty array with no initial value",Sxe=function(e){return function(t,r,n,o){var i=tMt(t),a=rMt(i),c=nMt(i);if(eMt(r),c===0&&n<2)throw new wxe(Exe);var h=e?c-1:0,m=e?-1:1;if(n<2)for(;;){if(h in a){o=a[h],h+=m;break}if(h+=m,e?h<0:c<=h)throw new wxe(Exe)}for(;e?h>=0:c>h;h+=m)h in a&&(o=r(o,a[h],h,i));return o}};Txe.exports={left:Sxe(!1),right:Sxe(!0)}});var fC=N((zHr,Ixe)=>{"use strict";u();var pC=ur(),oMt=pd(),iMt=wl(),WL=function(e){return oMt.slice(0,e.length)===e};Ixe.exports=function(){return WL("Bun/")?"BUN":WL("Cloudflare-Workers")?"CLOUDFLARE":WL("Deno/")?"DENO":WL("Node.js/")?"NODE":pC.Bun&&typeof Bun.version=="string"?"BUN":pC.Deno&&typeof Deno.version=="object"?"DENO":iMt(pC.process)==="process"?"NODE":pC.window&&pC.document?"BROWSER":"REST"}()});var y_=N((UHr,Mxe)=>{"use strict";u();var aMt=fC();Mxe.exports=aMt==="NODE"});var Axe=N(()=>{"use strict";u();var sMt=ce(),lMt=cC().left,uMt=Jp(),Cxe=dd(),cMt=y_(),pMt=!cMt&&Cxe>79&&Cxe<83,fMt=pMt||!uMt("reduce");sMt({target:"Array",proto:!0,forced:fMt},{reduce:function(t){var r=arguments.length;return lMt(this,t,r,r>1?arguments[1]:void 0)}})});var Pxe=N(()=>{"use strict";u();var dMt=ce(),hMt=cC().right,mMt=Jp(),Oxe=dd(),gMt=y_(),vMt=!gMt&&Oxe>79&&Oxe<83,yMt=vMt||!mMt("reduceRight");dMt({target:"Array",proto:!0,forced:yMt},{reduceRight:function(t){return hMt(this,t,arguments.length,arguments.length>1?arguments[1]:void 0)}})});var Nxe=N(()=>{"use strict";u();var _Mt=ce(),bMt=Lt(),xMt=gd(),wMt=bMt([].reverse),Dxe=[1,2];_Mt({target:"Array",proto:!0,forced:String(Dxe)===String(Dxe.reverse())},{reverse:function(){return xMt(this)&&(this.length=this.length),wMt(this)}})});var Rxe=N(()=>{"use strict";u();var EMt=ce(),Lxe=gd(),SMt=vd(),TMt=Qr(),kxe=md(),IMt=ho(),MMt=hs(),CMt=Xp(),AMt=nn(),OMt=Xw(),PMt=yc(),DMt=OMt("slice"),NMt=AMt("species"),TW=Array,LMt=Math.max;EMt({target:"Array",proto:!0,forced:!DMt},{slice:function(t,r){var n=MMt(this),o=IMt(n),i=kxe(t,o),a=kxe(r===void 0?o:r,o),c,h,m;if(Lxe(n)&&(c=n.constructor,SMt(c)&&(c===TW||Lxe(c.prototype))?c=void 0:TMt(c)&&(c=c[NMt],c===null&&(c=void 0)),c===TW||c===void 0))return PMt(n,i,a);for(h=new(c===void 0?TW:c)(LMt(a-i,0)),m=0;i<a;i++,m++)i in n&&CMt(h,m,n[i]);return h.length=m,h}})});var jxe=N(()=>{"use strict";u();var kMt=ce(),RMt=ka().some,jMt=Jp(),qMt=jMt("some");kMt({target:"Array",proto:!0,forced:!qMt},{some:function(t){return RMt(this,t,arguments.length>1?arguments[1]:void 0)}})});var YL=N((o$r,zxe)=>{"use strict";u();var qxe=yc(),zMt=Math.floor,IW=function(e,t){var r=e.length;if(r<8)for(var n=1,o,i;n<r;){for(i=n,o=e[n];i&&t(e[i-1],o)>0;)e[i]=e[--i];i!==n++&&(e[i]=o)}else for(var a=zMt(r/2),c=IW(qxe(e,0,a),t),h=IW(qxe(e,a),t),m=c.length,y=h.length,w=0,E=0;w<m||E<y;)e[w+E]=w<m&&E<y?t(c[w],h[E])<=0?c[w++]:h[E++]:w<m?c[w++]:h[E++];return e};zxe.exports=IW});var MW=N((a$r,Uxe)=>{"use strict";u();var FMt=pd(),Fxe=FMt.match(/firefox\/(\d+)/i);Uxe.exports=!!Fxe&&+Fxe[1]});var CW=N((l$r,Bxe)=>{"use strict";u();var UMt=pd();Bxe.exports=/MSIE|Trident/.test(UMt)});var ZL=N((c$r,Gxe)=>{"use strict";u();var BMt=pd(),Vxe=BMt.match(/AppleWebKit\/(\d+)\./);Gxe.exports=!!Vxe&&+Vxe[1]});var Qxe=N(()=>{"use strict";u();var VMt=ce(),Xxe=Lt(),GMt=un(),HMt=Jn(),Hxe=ho(),$Mt=oC(),$xe=Sn(),AW=Gt(),WMt=YL(),YMt=Jp(),Wxe=MW(),ZMt=CW(),Yxe=dd(),Zxe=ZL(),Ty=[],Kxe=Xxe(Ty.sort),KMt=Xxe(Ty.push),XMt=AW(function(){Ty.sort(void 0)}),JMt=AW(function(){Ty.sort(null)}),QMt=YMt("sort"),Jxe=!AW(function(){if(Yxe)return Yxe<70;if(!(Wxe&&Wxe>3)){if(ZMt)return!0;if(Zxe)return Zxe<603;var e="",t,r,n,o;for(t=65;t<76;t++){switch(r=String.fromCharCode(t),t){case 66:case 69:case 70:case 72:n=3;break;case 68:case 71:n=4;break;default:n=2}for(o=0;o<47;o++)Ty.push({k:r+o,v:n})}for(Ty.sort(function(i,a){return a.v-i.v}),o=0;o<Ty.length;o++)r=Ty[o].k.charAt(0),e.charAt(e.length-1)!==r&&(e+=r);return e!=="DGBEFHACIJK"}}),eCt=XMt||!JMt||!QMt||!Jxe,tCt=function(e){return function(t,r){return r===void 0?-1:t===void 0?1:e!==void 0?+e(t,r)||0:$xe(t)>$xe(r)?1:-1}};VMt({target:"Array",proto:!0,forced:eCt},{sort:function(t){t!==void 0&&GMt(t);var r=HMt(this);if(Jxe)return t===void 0?Kxe(r):Kxe(r,t);var n=[],o=Hxe(r),i,a;for(a=0;a<o;a++)a in r&&KMt(n,r[a]);for(WMt(n,tCt(t)),i=Hxe(n),a=0;a<i;)r[a]=n[a++];for(;a<o;)$Mt(r,a++);return r}})});var Iy=N((m$r,twe)=>{"use strict";u();var rCt=ln(),nCt=Gi(),oCt=nn(),iCt=Wr(),ewe=oCt("species");twe.exports=function(e){var t=rCt(e);iCt&&t&&!t[ewe]&&nCt(t,ewe,{configurable:!0,get:function(){return this}})}});var rwe=N(()=>{"use strict";u();var aCt=Iy();aCt("Array")});var nwe=N(()=>{"use strict";u();var sCt=ce(),lCt=Jn(),uCt=md(),cCt=Vi(),pCt=ho(),fCt=$L(),dCt=wy(),hCt=$w(),mCt=Xp(),OW=oC(),gCt=Xw(),vCt=gCt("splice"),yCt=Math.max,_Ct=Math.min;sCt({target:"Array",proto:!0,forced:!vCt},{splice:function(t,r){var n=lCt(this),o=pCt(n),i=uCt(t,o),a=arguments.length,c,h,m,y,w,E;for(a===0?c=h=0:a===1?(c=0,h=o-i):(c=a-2,h=_Ct(yCt(cCt(r),0),o-i)),dCt(o+c-h),m=hCt(n,h),y=0;y<h;y++)w=i+y,w in n&&mCt(m,y,n[w]);if(m.length=h,c<h){for(y=i;y<o-h;y++)w=y+h,E=y+c,w in n?n[E]=n[w]:OW(n,E);for(y=o;y>o-h+c;y--)OW(n,y-1)}else if(c>h)for(y=o-h;y>i;y--)w=y+h-1,E=y+c-1,w in n?n[E]=n[w]:OW(n,E);for(y=0;y<c;y++)n[y+i]=arguments[y+2];return fCt(n,o-h+c),m}})});var PW=N((E$r,owe)=>{"use strict";u();var bCt=ho();owe.exports=function(e,t){for(var r=bCt(e),n=new t(r),o=0;o<r;o++)n[o]=e[r-o-1];return n}});var DW=N(()=>{"use strict";u();var xCt=ce(),wCt=PW(),ECt=hs(),SCt=ga(),TCt=Array;xCt({target:"Array",proto:!0},{toReversed:function(){return wCt(ECt(this),TCt)}});SCt("toReversed")});var _g=N((C$r,iwe)=>{"use strict";u();var ICt=ho();iwe.exports=function(e,t,r){for(var n=0,o=arguments.length>2?r:ICt(t),i=new e(o);o>n;)i[n]=t[n++];return i}});var NW=N((O$r,awe)=>{"use strict";u();var MCt=ur();awe.exports=function(e,t){var r=MCt[e],n=r&&r.prototype;return n&&n[t]}});var LW=N(()=>{"use strict";u();var CCt=ce(),ACt=Lt(),OCt=un(),PCt=hs(),DCt=_g(),NCt=NW(),LCt=ga(),kCt=Array,RCt=ACt(NCt("Array","sort"));CCt({target:"Array",proto:!0},{toSorted:function(t){t!==void 0&&OCt(t);var r=PCt(this),n=DCt(kCt,r);return RCt(n,t)}});LCt("toSorted")});var kW=N(()=>{"use strict";u();var jCt=ce(),qCt=ga(),zCt=wy(),FCt=ho(),UCt=md(),BCt=hs(),VCt=Vi(),GCt=Array,HCt=Math.max,$Ct=Math.min;jCt({target:"Array",proto:!0},{toSpliced:function(t,r){var n=BCt(this),o=FCt(n),i=UCt(t,o),a=arguments.length,c=0,h,m,y,w;for(a===0?h=m=0:a===1?(h=0,m=o-i):(h=a-2,m=$Ct(HCt(VCt(r),0),o-i)),y=zCt(o+h-m),w=GCt(y);c<i;c++)w[c]=n[c];for(;c<i+h;c++)w[c]=arguments[c-i+2];for(;c<y;c++)w[c]=n[c+m-h];return w}});qCt("toSpliced")});var swe=N(()=>{"use strict";u();var WCt=ga();WCt("flat")});var lwe=N(()=>{"use strict";u();var YCt=ga();YCt("flatMap")});var uwe=N(()=>{"use strict";u();var ZCt=ce(),KCt=Jn(),XCt=ho(),JCt=$L(),QCt=oC(),eAt=wy(),tAt=[].unshift(0)!==1,rAt=function(){try{Object.defineProperty([],"length",{writable:!1}).unshift()}catch(e){return e instanceof TypeError}},nAt=tAt||!rAt();ZCt({target:"Array",proto:!0,arity:1,forced:nAt},{unshift:function(t){var r=KCt(this),n=XCt(r),o=arguments.length;if(o){eAt(n+o);for(var i=n;i--;){var a=i+o;i in r?r[a]=r[i]:QCt(r,a)}for(var c=0;c<o;c++)r[c]=arguments[c]}return JCt(r,n+o)}})});var RW=N((W$r,cwe)=>{"use strict";u();var oAt=ho(),iAt=Vi(),aAt=RangeError;cwe.exports=function(e,t,r,n){var o=oAt(e),i=iAt(r),a=i<0?o+i:i;if(a>=o||a<0)throw new aAt("Incorrect index");for(var c=new t(o),h=0;h<o;h++)c[h]=h===a?n:e[h];return c}});var jW=N(()=>{"use strict";u();var sAt=ce(),lAt=RW(),uAt=hs(),cAt=Array;sAt({target:"Array",proto:!0},{with:function(e,t){return lAt(uAt(this),cAt,e,t)}})});var dC=N((J$r,pwe)=>{"use strict";u();pwe.exports=typeof ArrayBuffer!="undefined"&&typeof DataView!="undefined"});var Qp=N((eWr,fwe)=>{"use strict";u();var pAt=ti();fwe.exports=function(e,t,r){for(var n in t)pAt(e,n,t[n],r);return e}});var au=N((rWr,dwe)=>{"use strict";u();var fAt=El(),dAt=TypeError;dwe.exports=function(e,t){if(fAt(t,e))return e;throw new dAt("Incorrect invocation")}});var Jw=N((oWr,hwe)=>{"use strict";u();var hAt=Vi(),mAt=vc(),gAt=RangeError;hwe.exports=function(e){if(e===void 0)return 0;var t=hAt(e),r=mAt(t);if(t!==r)throw new gAt("Wrong length or index");return r}});var KL=N((aWr,mwe)=>{"use strict";u();mwe.exports=Math.sign||function(t){var r=+t;return r===0||r!==r?r:r<0?-1:1}});var qW=N((lWr,vwe)=>{"use strict";u();var vAt=2220446049250313e-31,gwe=1/vAt;vwe.exports=function(e){return e+gwe-gwe}});var zW=N((cWr,ywe)=>{"use strict";u();var yAt=KL(),_At=qW(),bAt=Math.abs,xAt=2220446049250313e-31;ywe.exports=function(e,t,r,n){var o=+e,i=bAt(o),a=yAt(o);if(i<n)return a*_At(i/n/t)*n*t;var c=(1+t/xAt)*i,h=c-(c-i);return h>r||h!==h?a*(1/0):a*h}});var XL=N((fWr,_we)=>{"use strict";u();var wAt=zW(),EAt=1.1920928955078125e-7,SAt=34028234663852886e22,TAt=11754943508222875e-54;_we.exports=Math.fround||function(t){return wAt(t,EAt,SAt,TAt)}});var xwe=N((hWr,bwe)=>{"use strict";u();var IAt=Array,MAt=Math.abs,bg=Math.pow,CAt=Math.floor,AAt=Math.log,OAt=Math.LN2,PAt=function(e,t,r){var n=IAt(r),o=r*8-t-1,i=(1<<o)-1,a=i>>1,c=t===23?bg(2,-24)-bg(2,-77):0,h=e<0||e===0&&1/e<0?1:0,m=0,y,w,E;for(e=MAt(e),e!==e||e===1/0?(w=e!==e?1:0,y=i):(y=CAt(AAt(e)/OAt),E=bg(2,-y),e*E<1&&(y--,E*=2),y+a>=1?e+=c/E:e+=c*bg(2,1-a),e*E>=2&&(y++,E/=2),y+a>=i?(w=0,y=i):y+a>=1?(w=(e*E-1)*bg(2,t),y+=a):(w=e*bg(2,a-1)*bg(2,t),y=0));t>=8;)n[m++]=w&255,w/=256,t-=8;for(y=y<<t|w,o+=t;o>0;)n[m++]=y&255,y/=256,o-=8;return n[m-1]|=h*128,n},DAt=function(e,t){var r=e.length,n=r*8-t-1,o=(1<<n)-1,i=o>>1,a=n-7,c=r-1,h=e[c--],m=h&127,y;for(h>>=7;a>0;)m=m*256+e[c--],a-=8;for(y=m&(1<<-a)-1,m>>=-a,a+=t;a>0;)y=y*256+e[c--],a-=8;if(m===0)m=1-i;else{if(m===o)return y?NaN:h?-1/0:1/0;y+=bg(2,t),m-=i}return(h?-1:1)*y*bg(2,m-t)};bwe.exports={pack:PAt,unpack:DAt}});var gC=N((gWr,qwe)=>{"use strict";u();var r3=ur(),GW=Lt(),FW=Wr(),NAt=dC(),Nwe=l_(),LAt=ms(),kAt=Gi(),wwe=Qp(),UW=Gt(),JL=au(),RAt=Vi(),jAt=vc(),e3=Jw(),qAt=XL(),Lwe=xwe(),zAt=gs(),Ewe=Kp(),FAt=FL(),UAt=yc(),BAt=by(),VAt=c_(),kwe=Ru(),HW=Ho(),GAt=Nwe.PROPER,Swe=Nwe.CONFIGURABLE,eE="ArrayBuffer",n3="DataView",tE="prototype",HAt="Wrong length",Rwe="Wrong index",Twe=HW.getterFor(eE),mC=HW.getterFor(n3),Iwe=HW.set,yd=r3[eE],dp=yd,Qw=dp&&dp[tE],Ph=r3[n3],__=Ph&&Ph[tE],Mwe=Object.prototype,$At=r3.Array,t3=r3.RangeError,WAt=GW(FAt),YAt=GW([].reverse),jwe=Lwe.pack,Cwe=Lwe.unpack,Awe=function(e){return[e&255]},Owe=function(e){return[e&255,e>>8&255]},Pwe=function(e){return[e&255,e>>8&255,e>>16&255,e>>24&255]},Dwe=function(e){return e[3]<<24|e[2]<<16|e[1]<<8|e[0]},ZAt=function(e){return jwe(qAt(e),23,4)},KAt=function(e){return jwe(e,52,8)},QL=function(e,t,r){kAt(e[tE],t,{configurable:!0,get:function(){return r(this)[t]}})},My=function(e,t,r,n){var o=mC(e),i=e3(r),a=!!n;if(i+t>o.byteLength)throw new t3(Rwe);var c=o.bytes,h=i+o.byteOffset,m=UAt(c,h,h+t);return a?m:YAt(m)},Cy=function(e,t,r,n,o,i){var a=mC(e),c=e3(r),h=n(+o),m=!!i;if(c+t>a.byteLength)throw new t3(Rwe);for(var y=a.bytes,w=c+a.byteOffset,E=0;E<t;E++)y[w+E]=h[m?E:t-E-1]};NAt?(BW=GAt&&yd.name!==eE,!UW(function(){yd(1)})||!UW(function(){new yd(-1)})||UW(function(){return new yd,new yd(1.5),new yd(NaN),yd.length!==1||BW&&!Swe})?(dp=function(t){return JL(this,Qw),BAt(new yd(e3(t)),this,dp)},dp[tE]=Qw,Qw.constructor=dp,VAt(dp,yd)):BW&&Swe&&LAt(yd,"name",eE),Ewe&&zAt(__)!==Mwe&&Ewe(__,Mwe),hC=new Ph(new dp(2)),VW=GW(__.setInt8),hC.setInt8(0,2147483648),hC.setInt8(1,2147483649),(hC.getInt8(0)||!hC.getInt8(1))&&wwe(__,{setInt8:function(t,r){VW(this,t,r<<24>>24)},setUint8:function(t,r){VW(this,t,r<<24>>24)}},{unsafe:!0})):(dp=function(t){JL(this,Qw);var r=e3(t);Iwe(this,{type:eE,bytes:WAt($At(r),0),byteLength:r}),FW||(this.byteLength=r,this.detached=!1)},Qw=dp[tE],Ph=function(t,r,n){JL(this,__),JL(t,Qw);var o=Twe(t),i=o.byteLength,a=RAt(r);if(a<0||a>i)throw new t3("Wrong offset");if(n=n===void 0?i-a:jAt(n),a+n>i)throw new t3(HAt);Iwe(this,{type:n3,buffer:t,byteLength:n,byteOffset:a,bytes:o.bytes}),FW||(this.buffer=t,this.byteLength=n,this.byteOffset=a)},__=Ph[tE],FW&&(QL(dp,"byteLength",Twe),QL(Ph,"buffer",mC),QL(Ph,"byteLength",mC),QL(Ph,"byteOffset",mC)),wwe(__,{getInt8:function(t){return My(this,1,t)[0]<<24>>24},getUint8:function(t){return My(this,1,t)[0]},getInt16:function(t){var r=My(this,2,t,arguments.length>1?arguments[1]:!1);return(r[1]<<8|r[0])<<16>>16},getUint16:function(t){var r=My(this,2,t,arguments.length>1?arguments[1]:!1);return r[1]<<8|r[0]},getInt32:function(t){return Dwe(My(this,4,t,arguments.length>1?arguments[1]:!1))},getUint32:function(t){return Dwe(My(this,4,t,arguments.length>1?arguments[1]:!1))>>>0},getFloat32:function(t){return Cwe(My(this,4,t,arguments.length>1?arguments[1]:!1),23)},getFloat64:function(t){return Cwe(My(this,8,t,arguments.length>1?arguments[1]:!1),52)},setInt8:function(t,r){Cy(this,1,t,Awe,r)},setUint8:function(t,r){Cy(this,1,t,Awe,r)},setInt16:function(t,r){Cy(this,2,t,Owe,r,arguments.length>2?arguments[2]:!1)},setUint16:function(t,r){Cy(this,2,t,Owe,r,arguments.length>2?arguments[2]:!1)},setInt32:function(t,r){Cy(this,4,t,Pwe,r,arguments.length>2?arguments[2]:!1)},setUint32:function(t,r){Cy(this,4,t,Pwe,r,arguments.length>2?arguments[2]:!1)},setFloat32:function(t,r){Cy(this,4,t,ZAt,r,arguments.length>2?arguments[2]:!1)},setFloat64:function(t,r){Cy(this,8,t,KAt,r,arguments.length>2?arguments[2]:!1)}}));var BW,hC,VW;kwe(dp,eE);kwe(Ph,n3);qwe.exports={ArrayBuffer:dp,DataView:Ph}});var Fwe=N(()=>{"use strict";u();var XAt=ce(),JAt=ur(),QAt=gC(),eOt=Iy(),$W="ArrayBuffer",zwe=QAt[$W],tOt=JAt[$W];XAt({global:!0,constructor:!0,forced:tOt!==zwe},{ArrayBuffer:zwe});eOt($W)});var Zn=N((xWr,Kwe)=>{"use strict";u();var rOt=dC(),KW=Wr(),ju=ur(),Gwe=jn(),a3=Qr(),Oy=Wn(),XW=ku(),nOt=hy(),oOt=ms(),WW=ti(),iOt=Gi(),aOt=El(),s3=gs(),nE=Kp(),sOt=nn(),lOt=my(),Hwe=Ho(),$we=Hwe.enforce,uOt=Hwe.get,o3=ju.Int8Array,YW=o3&&o3.prototype,Uwe=ju.Uint8ClampedArray,Bwe=Uwe&&Uwe.prototype,Dh=o3&&s3(o3),_d=YW&&s3(YW),cOt=Object.prototype,JW=ju.TypeError,Vwe=sOt("toStringTag"),ZW=lOt("TYPED_ARRAY_TAG"),i3="TypedArrayConstructor",xg=rOt&&!!nE&&XW(ju.opera)!=="Opera",Wwe=!1,bc,Ay,rE,wg={Int8Array:1,Uint8Array:1,Uint8ClampedArray:1,Int16Array:2,Uint16Array:2,Int32Array:4,Uint32Array:4,Float32Array:4,Float64Array:8},QW={BigInt64Array:8,BigUint64Array:8},pOt=function(t){if(!a3(t))return!1;var r=XW(t);return r==="DataView"||Oy(wg,r)||Oy(QW,r)},Ywe=function(e){var t=s3(e);if(a3(t)){var r=uOt(t);return r&&Oy(r,i3)?r[i3]:Ywe(t)}},Zwe=function(e){if(!a3(e))return!1;var t=XW(e);return Oy(wg,t)||Oy(QW,t)},fOt=function(e){if(Zwe(e))return e;throw new JW("Target is not a typed array")},dOt=function(e){if(Gwe(e)&&(!nE||aOt(Dh,e)))return e;throw new JW(nOt(e)+" is not a typed array constructor")},hOt=function(e,t,r,n){if(KW){if(r)for(var o in wg){var i=ju[o];if(i&&Oy(i.prototype,e))try{delete i.prototype[e]}catch(a){try{i.prototype[e]=t}catch(c){}}}(!_d[e]||r)&&WW(_d,e,r?t:xg&&YW[e]||t,n)}},mOt=function(e,t,r){var n,o;if(KW){if(nE){if(r){for(n in wg)if(o=ju[n],o&&Oy(o,e))try{delete o[e]}catch(i){}}if(!Dh[e]||r)try{return WW(Dh,e,r?t:xg&&Dh[e]||t)}catch(i){}else return}for(n in wg)o=ju[n],o&&(!o[e]||r)&&WW(o,e,t)}};for(bc in wg)Ay=ju[bc],rE=Ay&&Ay.prototype,rE?$we(rE)[i3]=Ay:xg=!1;for(bc in QW)Ay=ju[bc],rE=Ay&&Ay.prototype,rE&&($we(rE)[i3]=Ay);if((!xg||!Gwe(Dh)||Dh===Function.prototype)&&(Dh=function(){throw new JW("Incorrect invocation")},xg))for(bc in wg)ju[bc]&&nE(ju[bc],Dh);if((!xg||!_d||_d===cOt)&&(_d=Dh.prototype,xg))for(bc in wg)ju[bc]&&nE(ju[bc].prototype,_d);xg&&s3(Bwe)!==_d&&nE(Bwe,_d);if(KW&&!Oy(_d,Vwe)){Wwe=!0,iOt(_d,Vwe,{configurable:!0,get:function(){return a3(this)?this[ZW]:void 0}});for(bc in wg)ju[bc]&&oOt(ju[bc],ZW,bc)}Kwe.exports={NATIVE_ARRAY_BUFFER_VIEWS:xg,TYPED_ARRAY_TAG:Wwe&&ZW,aTypedArray:fOt,aTypedArrayConstructor:dOt,exportTypedArrayMethod:hOt,exportTypedArrayStaticMethod:mOt,getTypedArrayConstructor:Ywe,isView:pOt,isTypedArray:Zwe,TypedArray:Dh,TypedArrayPrototype:_d}});var Jwe=N(()=>{"use strict";u();var gOt=ce(),Xwe=Zn(),vOt=Xwe.NATIVE_ARRAY_BUFFER_VIEWS;gOt({target:"ArrayBuffer",stat:!0,forced:!vOt},{isView:Xwe.isView})});var oEe=N(()=>{"use strict";u();var yOt=ce(),tY=vy(),_Ot=Gt(),rEe=gC(),Qwe=dr(),eEe=md(),bOt=vc(),rY=rEe.ArrayBuffer,eY=rEe.DataView,nEe=eY.prototype,tEe=tY(rY.prototype.slice),xOt=tY(nEe.getUint8),wOt=tY(nEe.setUint8),EOt=_Ot(function(){return!new rY(2).slice(1,void 0).byteLength});yOt({target:"ArrayBuffer",proto:!0,unsafe:!0,forced:EOt},{slice:function(t,r){if(tEe&&r===void 0)return tEe(Qwe(this),t);for(var n=Qwe(this).byteLength,o=eEe(t,n),i=eEe(r===void 0?n:r,n),a=new rY(bOt(i-o)),c=new eY(this),h=new eY(a),m=0;o<i;)wOt(h,m++,xOt(c,o++));return a}})});var iEe=N(()=>{"use strict";u();var SOt=ce(),TOt=gC(),IOt=dC();SOt({global:!0,constructor:!0,forced:!IOt},{DataView:TOt.DataView})});var aEe=N(()=>{"use strict";u();iEe()});var nY=N(()=>{"use strict";u();var MOt=ce(),COt=Lt(),cEe=Math.pow,sEe=31,AOt=1023,lEe=cEe(2,-24),uEe=.0009765625,OOt=function(e){var t=e>>>15,r=e>>>10&sEe,n=e&AOt;return r===sEe?n===0?t===0?1/0:-1/0:NaN:r===0?n*(t===0?lEe:-lEe):cEe(2,r-15)*(t===0?1+n*uEe:-1-n*uEe)},POt=COt(DataView.prototype.getUint16);MOt({target:"DataView",proto:!0},{getFloat16:function(t){var r=POt(this,t,arguments.length>1?arguments[1]:!1);return OOt(r)}})});var oY=N((qWr,pEe)=>{"use strict";u();var DOt=ku(),NOt=TypeError;pEe.exports=function(e){if(DOt(e)==="DataView")return e;throw new NOt("Argument is not a DataView")}});var iY=N((FWr,fEe)=>{"use strict";u();var LOt=Math.log,kOt=Math.LN2;fEe.exports=Math.log2||function(t){return LOt(t)/kOt}});var sY=N(()=>{"use strict";u();var ROt=ce(),jOt=Lt(),qOt=oY(),zOt=Jw(),FOt=iY(),dEe=qW(),UOt=Math.pow,BOt=65520,VOt=61005353927612305e-21,GOt=16777216,aY=1024,HOt=function(e){if(e!==e)return 32256;if(e===0)return(1/e===-1/0)<<15;var t=e<0;if(t&&(e=-e),e>=BOt)return t<<15|31744;if(e<VOt)return t<<15|dEe(e*GOt);var r=FOt(e)|0;if(r===-15)return t<<15|aY;var n=dEe((e*UOt(2,-r)-1)*aY);return n===aY?t<<15|r+16<<10:t<<15|r+15<<10|n},$Ot=jOt(DataView.prototype.setUint16);ROt({target:"DataView",proto:!0},{setFloat16:function(t,r){qOt(this);var n=zOt(t),o=HOt(+r);return $Ot(this,n,o,arguments.length>2?arguments[2]:!1)}})});var lY=N((HWr,gEe)=>{"use strict";u();var mEe=ur(),WOt=nC(),YOt=wl(),hEe=mEe.ArrayBuffer,ZOt=mEe.TypeError;gEe.exports=hEe&&WOt(hEe.prototype,"byteLength","get")||function(e){if(YOt(e)!=="ArrayBuffer")throw new ZOt("ArrayBuffer expected");return e.byteLength}});var uY=N((WWr,vEe)=>{"use strict";u();var KOt=ur(),XOt=dC(),JOt=lY(),QOt=KOt.DataView;vEe.exports=function(e){if(!XOt||JOt(e)!==0)return!1;try{return new QOt(e),!1}catch(t){return!0}}});var cY=N(()=>{"use strict";u();var ePt=Wr(),tPt=Gi(),rPt=uY(),yEe=ArrayBuffer.prototype;ePt&&!("detached"in yEe)&&tPt(yEe,"detached",{configurable:!0,get:function(){return rPt(this)}})});var oE=N((JWr,_Ee)=>{"use strict";u();var nPt=uY(),oPt=TypeError;_Ee.exports=function(e){if(nPt(e))throw new oPt("ArrayBuffer is detached");return e}});var pY=N((eYr,bEe)=>{"use strict";u();var iPt=ur(),aPt=y_();bEe.exports=function(e){if(aPt){try{return iPt.process.getBuiltinModule(e)}catch(t){}try{return Function("return require(\""+e+"\")")()}catch(t){}}}});var l3=N((rYr,wEe)=>{"use strict";u();var sPt=ur(),lPt=Gt(),fY=dd(),dY=fC(),xEe=sPt.structuredClone;wEe.exports=!!xEe&&!lPt(function(){if(dY==="DENO"&&fY>92||dY==="NODE"&&fY>94||dY==="BROWSER"&&fY>97)return!1;var e=new ArrayBuffer(8),t=xEe(e,{transfer:[e]});return e.byteLength!==0||t.byteLength!==8})});var yY=N((oYr,TEe)=>{"use strict";u();var vY=ur(),uPt=pY(),cPt=l3(),pPt=vY.structuredClone,EEe=vY.ArrayBuffer,u3=vY.MessageChannel,gY=!1,hY,SEe,c3,mY;if(cPt)gY=function(e){pPt(e,{transfer:[e]})};else if(EEe)try{u3||(hY=uPt("worker_threads"),hY&&(u3=hY.MessageChannel)),u3&&(SEe=new u3,c3=new EEe(2),mY=function(e){SEe.port1.postMessage(null,[e])},c3.byteLength===2&&(mY(c3),c3.byteLength===0&&(gY=mY)))}catch(e){}TEe.exports=gY});var SY=N((aYr,DEe)=>{"use strict";u();var xY=ur(),wY=Lt(),AEe=nC(),fPt=Jw(),dPt=oE(),hPt=lY(),IEe=yY(),_Y=l3(),mPt=xY.structuredClone,OEe=xY.ArrayBuffer,bY=xY.DataView,gPt=Math.min,EY=OEe.prototype,PEe=bY.prototype,vPt=wY(EY.slice),MEe=AEe(EY,"resizable","get"),CEe=AEe(EY,"maxByteLength","get"),yPt=wY(PEe.getInt8),_Pt=wY(PEe.setInt8);DEe.exports=(_Y||IEe)&&function(e,t,r){var n=hPt(e),o=t===void 0?n:fPt(t),i=!MEe||!MEe(e),a;if(dPt(e),_Y&&(e=mPt(e,{transfer:[e]}),n===o&&(r||i)))return e;if(n>=o&&(!r||i))a=vPt(e,0,o);else{var c=r&&!i&&CEe?{maxByteLength:CEe(e)}:void 0;a=new OEe(o,c);for(var h=new bY(e),m=new bY(a),y=gPt(o,n),w=0;w<y;w++)_Pt(m,w,yPt(h,w))}return _Y||IEe(e),a}});var TY=N(()=>{"use strict";u();var bPt=ce(),NEe=SY();NEe&&bPt({target:"ArrayBuffer",proto:!0},{transfer:function(){return NEe(this,arguments.length?arguments[0]:void 0,!0)}})});var IY=N(()=>{"use strict";u();var xPt=ce(),LEe=SY();LEe&&xPt({target:"ArrayBuffer",proto:!0},{transferToFixedLength:function(){return LEe(this,arguments.length?arguments[0]:void 0,!1)}})});var kEe=N(()=>{"use strict";u();var wPt=ce(),EPt=Lt(),SPt=Gt(),TPt=SPt(function(){return new Date(16e11).getYear()!==120}),IPt=EPt(Date.prototype.getFullYear);wPt({target:"Date",proto:!0,forced:TPt},{getYear:function(){return IPt(this)-1900}})});var jEe=N(()=>{"use strict";u();var MPt=ce(),CPt=Lt(),REe=Date,APt=CPt(REe.prototype.getTime);MPt({target:"Date",stat:!0},{now:function(){return APt(new REe)}})});var FEe=N(()=>{"use strict";u();var OPt=ce(),qEe=Lt(),PPt=Vi(),zEe=Date.prototype,DPt=qEe(zEe.getTime),NPt=qEe(zEe.setFullYear);OPt({target:"Date",proto:!0},{setYear:function(t){DPt(this);var r=PPt(t),n=r>=0&&r<=99?r+1900:r;return NPt(this,n)}})});var UEe=N(()=>{"use strict";u();var LPt=ce();LPt({target:"Date",proto:!0},{toGMTString:Date.prototype.toUTCString})});var vC=N((IYr,BEe)=>{"use strict";u();var kPt=Vi(),RPt=Sn(),jPt=Ni(),qPt=RangeError;BEe.exports=function(t){var r=RPt(jPt(this)),n="",o=kPt(t);if(o<0||o===1/0)throw new qPt("Wrong number of repetitions");for(;o>0;(o>>>=1)&&(r+=r))o&1&&(n+=r);return n}});var yC=N((CYr,$Ee)=>{"use strict";u();var HEe=Lt(),zPt=vc(),VEe=Sn(),FPt=vC(),UPt=Ni(),BPt=HEe(FPt),VPt=HEe("".slice),GPt=Math.ceil,GEe=function(e){return function(t,r,n){var o=VEe(UPt(t)),i=zPt(r),a=o.length,c=n===void 0?" ":VEe(n),h,m;return i<=a||c===""?o:(h=i-a,m=BPt(c,GPt(h/c.length)),m.length>h&&(m=VPt(m,0,h)),e?o+m:m+o)}};$Ee.exports={start:GEe(!1),end:GEe(!0)}});var ZEe=N((OYr,YEe)=>{"use strict";u();var Py=Lt(),WEe=Gt(),b_=yC().start,HPt=RangeError,$Pt=isFinite,WPt=Math.abs,Eg=Date.prototype,MY=Eg.toISOString,YPt=Py(Eg.getTime),ZPt=Py(Eg.getUTCDate),KPt=Py(Eg.getUTCFullYear),XPt=Py(Eg.getUTCHours),JPt=Py(Eg.getUTCMilliseconds),QPt=Py(Eg.getUTCMinutes),eDt=Py(Eg.getUTCMonth),tDt=Py(Eg.getUTCSeconds);YEe.exports=WEe(function(){return MY.call(new Date(-5e13-1))!=="0385-07-25T07:06:39.999Z"})||!WEe(function(){MY.call(new Date(NaN))})?function(){if(!$Pt(YPt(this)))throw new HPt("Invalid time value");var t=this,r=KPt(t),n=JPt(t),o=r<0?"-":r>9999?"+":"";return o+b_(WPt(r),o?6:4,0)+"-"+b_(eDt(t)+1,2,0)+"-"+b_(ZPt(t),2,0)+"T"+b_(XPt(t),2,0)+":"+b_(QPt(t),2,0)+":"+b_(tDt(t),2,0)+"."+b_(n,3,0)+"Z"}:MY});var XEe=N(()=>{"use strict";u();var rDt=ce(),KEe=ZEe();rDt({target:"Date",proto:!0,forced:Date.prototype.toISOString!==KEe},{toISOString:KEe})});var JEe=N(()=>{"use strict";u();var nDt=ce(),oDt=Gt(),iDt=Jn(),aDt=BM(),sDt=oDt(function(){return new Date(NaN).toJSON()!==null||Date.prototype.toJSON.call({toISOString:function(){return 1}})!==1});nDt({target:"Date",proto:!0,arity:1,forced:sDt},{toJSON:function(t){var r=iDt(this),n=aDt(r,"number");return typeof n=="number"&&!isFinite(n)?null:r.toISOString()}})});var eSe=N((qYr,QEe)=>{"use strict";u();var lDt=dr(),uDt=JH(),cDt=TypeError;QEe.exports=function(e){if(lDt(this),e==="string"||e==="default")e="string";else if(e!=="number")throw new cDt("Incorrect hint");return uDt(this,e)}});var nSe=N(()=>{"use strict";u();var pDt=Wn(),fDt=ti(),dDt=eSe(),hDt=nn(),tSe=hDt("toPrimitive"),rSe=Date.prototype;pDt(rSe,tSe)||fDt(rSe,tSe,dDt)});var sSe=N(()=>{"use strict";u();var iSe=Lt(),mDt=ti(),CY=Date.prototype,oSe="Invalid Date",aSe="toString",gDt=iSe(CY[aSe]),vDt=iSe(CY.getTime);String(new Date(NaN))!==oSe&&mDt(CY,aSe,function(){var t=vDt(this);return t===t?gDt(this):oSe})});var uSe=N(()=>{"use strict";u();var yDt=ce(),_C=Lt(),_Dt=Sn(),bDt=_C("".charAt),xDt=_C("".charCodeAt),wDt=_C(/./.exec),EDt=_C(1 .toString),SDt=_C("".toUpperCase),TDt=/[\w*+\-./@]/,lSe=function(e,t){for(var r=EDt(e,16);r.length<t;)r="0"+r;return r};yDt({global:!0},{escape:function(t){for(var r=_Dt(t),n="",o=r.length,i=0,a,c;i<o;)a=bDt(r,i++),wDt(TDt,a)?n+=a:(c=xDt(a,0),c<256?n+="%"+lSe(c,2):n+="%u"+SDt(lSe(c,4)));return n}})});var OY=N((ZYr,dSe)=>{"use strict";u();var pSe=Lt(),IDt=un(),MDt=Qr(),CDt=Wn(),cSe=yc(),ADt=Uw(),fSe=Function,ODt=pSe([].concat),PDt=pSe([].join),AY={},DDt=function(e,t,r){if(!CDt(AY,t)){for(var n=[],o=0;o<t;o++)n[o]="a["+o+"]";AY[t]=fSe("C,a","return new C("+PDt(n,",")+")")}return AY[t](e,r)};dSe.exports=ADt?fSe.bind:function(t){var r=IDt(this),n=r.prototype,o=cSe(arguments,1),i=function(){var c=ODt(o,cSe(arguments));return this instanceof i?DDt(r,c.length,c):r.apply(t,c)};return MDt(n)&&(i.prototype=n),i}});var mSe=N(()=>{"use strict";u();var NDt=ce(),hSe=OY();NDt({target:"Function",proto:!0,forced:Function.bind!==hSe},{bind:hSe})});var ySe=N(()=>{"use strict";u();var LDt=jn(),gSe=Qr(),kDt=Ei(),RDt=El(),jDt=nn(),qDt=WM(),PY=jDt("hasInstance"),vSe=Function.prototype;PY in vSe||kDt.f(vSe,PY,{value:qDt(function(e){if(!LDt(this)||!gSe(e))return!1;var t=this.prototype;return gSe(t)?RDt(t,e):e instanceof this},PY)})});var wSe=N(()=>{"use strict";u();var zDt=Wr(),FDt=l_().EXISTS,_Se=Lt(),UDt=Gi(),bSe=Function.prototype,BDt=_Se(bSe.toString),xSe=/function\b(?:\s|\/\*[\S\s]*?\*\/|\/\/[^\n\r]*[\n\r]+)*([^\s(/]*)/,VDt=_Se(xSe.exec),GDt="name";zDt&&!FDt&&UDt(bSe,GDt,{configurable:!0,get:function(){try{return VDt(xSe,BDt(this))[1]}catch(e){return""}}})});var NY=N(()=>{"use strict";u();var HDt=ce(),DY=ur();HDt({global:!0,forced:DY.globalThis!==DY},{globalThis:DY})});var qY=N(()=>{"use strict";u();var $Dt=ce(),WDt=ur(),YDt=au(),ZDt=dr(),KDt=jn(),XDt=gs(),JDt=Gi(),QDt=Xp(),eNt=Gt(),RY=Wn(),tNt=nn(),Nh=Ey().IteratorPrototype,rNt=Wr(),nNt=So(),LY="constructor",SSe="Iterator",ESe=tNt("toStringTag"),TSe=TypeError,kY=WDt[SSe],ISe=nNt||!KDt(kY)||kY.prototype!==Nh||!eNt(function(){kY({})}),jY=function(){if(YDt(this,Nh),XDt(this)===Nh)throw new TSe("Abstract class Iterator not directly constructable")},MSe=function(e,t){rNt?JDt(Nh,e,{configurable:!0,get:function(){return t},set:function(r){if(ZDt(this),this===Nh)throw new TSe("You can't redefine this property");RY(this,e)?this[e]=r:QDt(this,e,r)}}):Nh[e]=t};RY(Nh,ESe)||MSe(ESe,SSe);(ISe||!RY(Nh,LY)||Nh[LY]===Object)&&MSe(LY,jY);jY.prototype=Nh;$Dt({global:!0,constructor:!0,forced:ISe},{Iterator:jY})});var ra=N((fZr,CSe)=>{"use strict";u();CSe.exports=function(e){return{iterator:e,next:e.next,done:!1}}});var iE=N((hZr,ASe)=>{"use strict";u();var oNt=RangeError;ASe.exports=function(e){if(e===e)return e;throw new oNt("NaN is not allowed")}});var aE=N((gZr,OSe)=>{"use strict";u();var iNt=Vi(),aNt=RangeError;OSe.exports=function(e){var t=iNt(e);if(t<0)throw new aNt("The argument can't be less than 0");return t}});var Dy=N((yZr,RSe)=>{"use strict";u();var sNt=cr(),lNt=La(),uNt=ms(),cNt=Qp(),pNt=nn(),PSe=Ho(),fNt=Na(),dNt=Ey().IteratorPrototype,p3=Ns(),zY=Ks(),hNt=pNt("toStringTag"),DSe="IteratorHelper",NSe="WrapForValidIterator",mNt=PSe.set,LSe=function(e){var t=PSe.getterFor(e?NSe:DSe);return cNt(lNt(dNt),{next:function(){var n=t(this);if(e)return n.nextHandler();if(n.done)return p3(void 0,!0);try{var o=n.nextHandler();return n.returnHandlerResult?o:p3(o,n.done)}catch(i){throw n.done=!0,i}},return:function(){var r=t(this),n=r.iterator;if(r.done=!0,e){var o=fNt(n,"return");return o?sNt(o,n):p3(void 0,!0)}if(r.inner)try{zY(r.inner.iterator,"normal")}catch(i){return zY(n,"throw",i)}return n&&zY(n,"normal"),p3(void 0,!0)}})},gNt=LSe(!0),kSe=LSe(!1);uNt(kSe,hNt,"Iterator Helper");RSe.exports=function(e,t,r){var n=function(i,a){a?(a.iterator=i.iterator,a.next=i.next):a=i,a.type=t?NSe:DSe,a.returnHandlerResult=!!r,a.nextHandler=e,a.counter=0,a.done=!1,mNt(this,a)};return n.prototype=t?gNt:kSe,n}});var bd=N((bZr,jSe)=>{"use strict";u();var vNt=ur();jSe.exports=function(e,t){var r=vNt.Iterator,n=r&&r.prototype,o=n&&n[e],i=!1;if(o)try{o.call({next:function(){return{done:!0}},return:function(){i=!0}},-1)}catch(a){a instanceof t||(i=!1)}if(!i)return o}});var VY=N(()=>{"use strict";u();var yNt=ce(),UY=cr(),BY=dr(),_Nt=ra(),bNt=iE(),xNt=aE(),wNt=Ks(),ENt=Dy(),SNt=bd(),qSe=So(),FY=!qSe&&SNt("drop",RangeError),TNt=ENt(function(){for(var e=this.iterator,t=this.next,r,n;this.remaining;)if(this.remaining--,r=BY(UY(t,e)),n=this.done=!!r.done,n)return;if(r=BY(UY(t,e)),n=this.done=!!r.done,!n)return r.value});yNt({target:"Iterator",proto:!0,real:!0,forced:qSe||FY},{drop:function(t){BY(this);var r;try{r=xNt(bNt(+t))}catch(n){wNt(this,"throw",n)}return FY?UY(FY,this,r):new TNt(_Nt(this),{remaining:r})}})});var HY=N(()=>{"use strict";u();var INt=ce(),MNt=cr(),CNt=ma(),ANt=un(),ONt=dr(),PNt=ra(),DNt=Ks(),NNt=bd(),GY=NNt("every",TypeError);INt({target:"Iterator",proto:!0,real:!0,forced:GY},{every:function(t){ONt(this);try{ANt(t)}catch(o){DNt(this,"throw",o)}if(GY)return MNt(GY,this,t);var r=PNt(this),n=0;return!CNt(r,function(o,i){if(!t(o,n++))return i()},{IS_RECORD:!0,INTERRUPTED:!0}).stopped}})});var WY=N(()=>{"use strict";u();var LNt=ce(),zSe=cr(),kNt=un(),FSe=dr(),RNt=ra(),jNt=Dy(),qNt=UL(),USe=So(),zNt=Ks(),FNt=bd(),$Y=!USe&&FNt("filter",TypeError),UNt=jNt(function(){for(var e=this.iterator,t=this.predicate,r=this.next,n,o,i;;){if(n=FSe(zSe(r,e)),o=this.done=!!n.done,o)return;if(i=n.value,qNt(e,t,[i,this.counter++],!0))return i}});LNt({target:"Iterator",proto:!0,real:!0,forced:USe||$Y},{filter:function(t){FSe(this);try{kNt(t)}catch(r){zNt(this,"throw",r)}return $Y?zSe($Y,this,t):new UNt(RNt(this),{predicate:t})}})});var ZY=N(()=>{"use strict";u();var BNt=ce(),VNt=cr(),GNt=ma(),HNt=un(),$Nt=dr(),WNt=ra(),YNt=Ks(),ZNt=bd(),YY=ZNt("find",TypeError);BNt({target:"Iterator",proto:!0,real:!0,forced:YY},{find:function(t){$Nt(this);try{HNt(t)}catch(o){YNt(this,"throw",o)}if(YY)return VNt(YY,this,t);var r=WNt(this),n=0;return GNt(r,function(o,i){if(t(o,n++))return i(o)},{IS_RECORD:!0,INTERRUPTED:!0}).result}})});var KY=N((LZr,VSe)=>{"use strict";u();var KNt=cr(),BSe=dr(),XNt=ra(),JNt=Oh();VSe.exports=function(e,t){(!t||typeof e!="string")&&BSe(e);var r=JNt(e);return XNt(BSe(r!==void 0?KNt(r,e):e))}});var tZ=N(()=>{"use strict";u();var QNt=ce(),JY=cr(),e4t=un(),QY=dr(),t4t=ra(),r4t=KY(),n4t=Dy(),eZ=Ks(),GSe=So(),o4t=bd(),XY=!GSe&&o4t("flatMap",TypeError),i4t=n4t(function(){for(var e=this.iterator,t=this.mapper,r,n;;){if(n=this.inner)try{if(r=QY(JY(n.next,n.iterator)),!r.done)return r.value;this.inner=null}catch(o){eZ(e,"throw",o)}if(r=QY(JY(this.next,e)),this.done=!!r.done)return;try{this.inner=r4t(t(r.value,this.counter++),!1)}catch(o){eZ(e,"throw",o)}}});QNt({target:"Iterator",proto:!0,real:!0,forced:GSe||XY},{flatMap:function(t){QY(this);try{e4t(t)}catch(r){eZ(this,"throw",r)}return XY?JY(XY,this,t):new i4t(t4t(this),{mapper:t,inner:null})}})});var nZ=N(()=>{"use strict";u();var a4t=ce(),s4t=cr(),l4t=ma(),u4t=un(),c4t=dr(),p4t=ra(),f4t=Ks(),d4t=bd(),rZ=d4t("forEach",TypeError);a4t({target:"Iterator",proto:!0,real:!0,forced:rZ},{forEach:function(t){c4t(this);try{u4t(t)}catch(o){f4t(this,"throw",o)}if(rZ)return s4t(rZ,this,t);var r=p4t(this),n=0;l4t(r,function(o){t(o,n++)},{IS_RECORD:!0})}})});var oZ=N(()=>{"use strict";u();var h4t=ce(),m4t=cr(),g4t=Jn(),v4t=El(),y4t=Ey().IteratorPrototype,_4t=Dy(),b4t=KY(),x4t=So(),w4t=_4t(function(){return m4t(this.next,this.iterator)},!0);h4t({target:"Iterator",stat:!0,forced:x4t},{from:function(t){var r=b4t(typeof t=="string"?g4t(t):t,!0);return v4t(y4t,r.iterator)?r.iterator:new w4t(r)}})});var f3=N(()=>{"use strict";u();var E4t=ce(),HSe=cr(),S4t=un(),$Se=dr(),T4t=ra(),I4t=Dy(),M4t=UL(),C4t=Ks(),A4t=bd(),WSe=So(),iZ=!WSe&&A4t("map",TypeError),O4t=I4t(function(){var e=this.iterator,t=$Se(HSe(this.next,e)),r=this.done=!!t.done;if(!r)return M4t(e,this.mapper,[t.value,this.counter++],!0)});E4t({target:"Iterator",proto:!0,real:!0,forced:WSe||iZ},{map:function(t){$Se(this);try{S4t(t)}catch(r){C4t(this,"throw",r)}return iZ?HSe(iZ,this,t):new O4t(T4t(this),{mapper:t})}})});var sZ=N(()=>{"use strict";u();var P4t=ce(),D4t=ma(),N4t=un(),L4t=dr(),k4t=ra(),R4t=Ks(),j4t=bd(),q4t=Sl(),z4t=Gt(),YSe=TypeError,ZSe=z4t(function(){[].keys().reduce(function(){},void 0)}),aZ=!ZSe&&j4t("reduce",YSe);P4t({target:"Iterator",proto:!0,real:!0,forced:ZSe||aZ},{reduce:function(t){L4t(this);try{N4t(t)}catch(a){R4t(this,"throw",a)}var r=arguments.length<2,n=r?void 0:arguments[1];if(aZ)return q4t(aZ,this,r?[t]:[t,n]);var o=k4t(this),i=0;if(D4t(o,function(a){r?(r=!1,n=a):n=t(n,a,i),i++},{IS_RECORD:!0}),r)throw new YSe("Reduce of empty iterator with no initial value");return n}})});var uZ=N(()=>{"use strict";u();var F4t=ce(),U4t=cr(),B4t=ma(),V4t=un(),G4t=dr(),H4t=ra(),$4t=Ks(),W4t=bd(),lZ=W4t("some",TypeError);F4t({target:"Iterator",proto:!0,real:!0,forced:lZ},{some:function(t){G4t(this);try{V4t(t)}catch(o){$4t(this,"throw",o)}if(lZ)return U4t(lZ,this,t);var r=H4t(this),n=0;return B4t(r,function(o,i){if(t(o,n++))return i()},{IS_RECORD:!0,INTERRUPTED:!0}).stopped}})});var pZ=N(()=>{"use strict";u();var Y4t=ce(),KSe=cr(),XSe=dr(),Z4t=ra(),K4t=iE(),X4t=aE(),J4t=Dy(),JSe=Ks(),Q4t=bd(),QSe=So(),cZ=!QSe&&Q4t("take",RangeError),e5t=J4t(function(){var e=this.iterator;if(!this.remaining--)return this.done=!0,JSe(e,"normal",void 0);var t=XSe(KSe(this.next,e)),r=this.done=!!t.done;if(!r)return t.value});Y4t({target:"Iterator",proto:!0,real:!0,forced:QSe||cZ},{take:function(t){XSe(this);var r;try{r=X4t(K4t(+t))}catch(n){JSe(this,"throw",n)}return cZ?KSe(cZ,this,r):new e5t(Z4t(this),{remaining:r})}})});var fZ=N(()=>{"use strict";u();var t5t=ce(),r5t=dr(),n5t=ma(),o5t=ra(),i5t=[].push;t5t({target:"Iterator",proto:!0,real:!0},{toArray:function(){var t=[];return n5t(o5t(r5t(this)),i5t,{that:t,IS_RECORD:!0}),t}})});var eTe=N(()=>{"use strict";u();var a5t=ur(),s5t=Ru();s5t(a5t.JSON,"JSON",!0)});var d3=N((uKr,tTe)=>{"use strict";u();var l5t=Gt();tTe.exports=l5t(function(){if(typeof ArrayBuffer=="function"){var e=new ArrayBuffer(8);Object.isExtensible(e)&&Object.defineProperty(e,"a",{value:8})}})});var m3=N((pKr,nTe)=>{"use strict";u();var u5t=Gt(),c5t=Qr(),p5t=wl(),rTe=d3(),h3=Object.isExtensible,f5t=u5t(function(){h3(1)});nTe.exports=f5t||rTe?function(t){return!c5t(t)||rTe&&p5t(t)==="ArrayBuffer"?!1:h3?h3(t):!0}:h3});var Sg=N((dKr,oTe)=>{"use strict";u();var d5t=Gt();oTe.exports=!d5t(function(){return Object.isExtensible(Object.preventExtensions({}))})});var Ny=N((mKr,sTe)=>{"use strict";u();var h5t=ce(),m5t=Lt(),g5t=Vw(),v5t=Qr(),dZ=Wn(),y5t=Ei().f,iTe=gy(),_5t=wL(),hZ=m3(),b5t=my(),x5t=Sg(),aTe=!1,Tg=b5t("meta"),w5t=0,mZ=function(e){y5t(e,Tg,{value:{objectID:"O"+w5t++,weakData:{}}})},E5t=function(e,t){if(!v5t(e))return typeof e=="symbol"?e:(typeof e=="string"?"S":"P")+e;if(!dZ(e,Tg)){if(!hZ(e))return"F";if(!t)return"E";mZ(e)}return e[Tg].objectID},S5t=function(e,t){if(!dZ(e,Tg)){if(!hZ(e))return!0;if(!t)return!1;mZ(e)}return e[Tg].weakData},T5t=function(e){return x5t&&aTe&&hZ(e)&&!dZ(e,Tg)&&mZ(e),e},I5t=function(){M5t.enable=function(){},aTe=!0;var e=iTe.f,t=m5t([].splice),r={};r[Tg]=1,e(r).length&&(iTe.f=function(n){for(var o=e(n),i=0,a=o.length;i<a;i++)if(o[i]===Tg){t(o,i,1);break}return o},h5t({target:"Object",stat:!0,forced:!0},{getOwnPropertyNames:_5t.f}))},M5t=sTe.exports={enable:I5t,fastKey:E5t,getWeakData:S5t,onFreeze:T5t};g5t[Tg]=!0});var bC=N((vKr,uTe)=>{"use strict";u();var C5t=ce(),A5t=ur(),O5t=Lt(),lTe=Hw(),P5t=ti(),D5t=Ny(),N5t=ma(),L5t=au(),k5t=jn(),R5t=gc(),gZ=Qr(),vZ=Gt(),j5t=aC(),q5t=Ru(),z5t=by();uTe.exports=function(e,t,r){var n=e.indexOf("Map")!==-1,o=e.indexOf("Weak")!==-1,i=n?"set":"add",a=A5t[e],c=a&&a.prototype,h=a,m={},y=function(L){var z=O5t(c[L]);P5t(c,L,L==="add"?function(G){return z(this,G===0?0:G),this}:L==="delete"?function(B){return o&&!gZ(B)?!1:z(this,B===0?0:B)}:L==="get"?function(G){return o&&!gZ(G)?void 0:z(this,G===0?0:G)}:L==="has"?function(G){return o&&!gZ(G)?!1:z(this,G===0?0:G)}:function(G,Z){return z(this,G===0?0:G,Z),this})},w=lTe(e,!k5t(a)||!(o||c.forEach&&!vZ(function(){new a().entries().next()})));if(w)h=r.getConstructor(t,e,n,i),D5t.enable();else if(lTe(e,!0)){var E=new h,A=E[i](o?{}:-0,1)!==E,P=vZ(function(){E.has(1)}),j=j5t(function(L){new a(L)}),D=!o&&vZ(function(){for(var L=new a,z=5;z--;)L[i](z,z);return!L.has(-0)});j||(h=t(function(L,z){L5t(L,c);var B=z5t(new a,L,h);return R5t(z)||N5t(z,B[i],{that:B,AS_ENTRIES:n}),B}),h.prototype=c,c.constructor=h),(P||D)&&(y("delete"),y("has"),n&&y("get")),(D||A)&&y(i),o&&c.clear&&delete c.clear}return m[e]=h,C5t({global:!0,constructor:!0,forced:h!==a},m),q5t(h,e),o||r.setStrong(h,e,n),h}});var _Z=N((_Kr,mTe)=>{"use strict";u();var cTe=La(),F5t=Gi(),pTe=Qp(),U5t=ci(),B5t=au(),V5t=gc(),G5t=ma(),H5t=GL(),g3=Ns(),$5t=Iy(),xC=Wr(),fTe=Ny().fastKey,hTe=Ho(),dTe=hTe.set,yZ=hTe.getterFor;mTe.exports={getConstructor:function(e,t,r,n){var o=e(function(m,y){B5t(m,i),dTe(m,{type:t,index:cTe(null),first:null,last:null,size:0}),xC||(m.size=0),V5t(y)||G5t(y,m[n],{that:m,AS_ENTRIES:r})}),i=o.prototype,a=yZ(t),c=function(m,y,w){var E=a(m),A=h(m,y),P,j;return A?A.value=w:(E.last=A={index:j=fTe(y,!0),key:y,value:w,previous:P=E.last,next:null,removed:!1},E.first||(E.first=A),P&&(P.next=A),xC?E.size++:m.size++,j!=="F"&&(E.index[j]=A)),m},h=function(m,y){var w=a(m),E=fTe(y),A;if(E!=="F")return w.index[E];for(A=w.first;A;A=A.next)if(A.key===y)return A};return pTe(i,{clear:function(){for(var y=this,w=a(y),E=w.first;E;)E.removed=!0,E.previous&&(E.previous=E.previous.next=null),E=E.next;w.first=w.last=null,w.index=cTe(null),xC?w.size=0:y.size=0},delete:function(m){var y=this,w=a(y),E=h(y,m);if(E){var A=E.next,P=E.previous;delete w.index[E.index],E.removed=!0,P&&(P.next=A),A&&(A.previous=P),w.first===E&&(w.first=A),w.last===E&&(w.last=P),xC?w.size--:y.size--}return!!E},forEach:function(y){for(var w=a(this),E=U5t(y,arguments.length>1?arguments[1]:void 0),A;A=A?A.next:w.first;)for(E(A.value,A.key,this);A&&A.removed;)A=A.previous},has:function(y){return!!h(this,y)}}),pTe(i,r?{get:function(y){var w=h(this,y);return w&&w.value},set:function(y,w){return c(this,y===0?0:y,w)}}:{add:function(y){return c(this,y=y===0?0:y,y)}}),xC&&F5t(i,"size",{configurable:!0,get:function(){return a(this).size}}),o},setStrong:function(e,t,r){var n=t+" Iterator",o=yZ(t),i=yZ(n);H5t(e,t,function(a,c){dTe(this,{type:n,target:a,state:o(a),kind:c,last:null})},function(){for(var a=i(this),c=a.kind,h=a.last;h&&h.removed;)h=h.previous;return!a.target||!(a.last=h=h?h.next:a.state.first)?(a.target=null,g3(void 0,!0)):g3(c==="keys"?h.key:c==="values"?h.value:[h.key,h.value],!1)},r?"entries":"values",!r,!0),$5t(t)}}});var gTe=N(()=>{"use strict";u();var W5t=bC(),Y5t=_Z();W5t("Map",function(e){return function(){return e(this,arguments.length?arguments[0]:void 0)}},Y5t)});var v3=N(()=>{"use strict";u();gTe()});var Ls=N((MKr,vTe)=>{"use strict";u();var y3=Lt(),wC=Map.prototype;vTe.exports={Map,set:y3(wC.set),get:y3(wC.get),has:y3(wC.has),remove:y3(wC.delete),proto:wC}});var bZ=N(()=>{"use strict";u();var Z5t=ce(),K5t=Lt(),X5t=un(),J5t=Ni(),Q5t=ma(),_3=Ls(),yTe=So(),eLt=Gt(),_Te=_3.Map,tLt=_3.has,rLt=_3.get,nLt=_3.set,oLt=K5t([].push),iLt=yTe||eLt(function(){return _Te.groupBy("ab",function(e){return e}).get("a").length!==1});Z5t({target:"Map",stat:!0,forced:yTe||iLt},{groupBy:function(t,r){J5t(t),X5t(r);var n=new _Te,o=0;return Q5t(t,function(i){var a=r(i,o++);tLt(n,a)?oLt(rLt(n,a),i):nLt(n,a,[i])}),n}})});var xZ=N((DKr,bTe)=>{"use strict";u();var aLt=Math.log;bTe.exports=Math.log1p||function(t){var r=+t;return r>-1e-8&&r<1e-8?r-r*r/2:aLt(1+r)}});var wTe=N(()=>{"use strict";u();var sLt=ce(),lLt=xZ(),wZ=Math.acosh,uLt=Math.log,xTe=Math.sqrt,cLt=Math.LN2,pLt=!wZ||Math.floor(wZ(Number.MAX_VALUE))!==710||wZ(1/0)!==1/0;sLt({target:"Math",stat:!0,forced:pLt},{acosh:function(t){var r=+t;return r<1?NaN:r>94906265.62425156?uLt(r)+cLt:lLt(r-1+xTe(r-1)*xTe(r+1))}})});var TTe=N(()=>{"use strict";u();var fLt=ce(),ETe=Math.asinh,dLt=Math.log,hLt=Math.sqrt;function STe(e){var t=+e;return!isFinite(t)||t===0?t:t<0?-STe(-t):dLt(t+hLt(t*t+1))}var mLt=!(ETe&&1/ETe(0)>0);fLt({target:"Math",stat:!0,forced:mLt},{asinh:STe})});var MTe=N(()=>{"use strict";u();var gLt=ce(),ITe=Math.atanh,vLt=Math.log,yLt=!(ITe&&1/ITe(-0)<0);gLt({target:"Math",stat:!0,forced:yLt},{atanh:function(t){var r=+t;return r===0?r:vLt((1+r)/(1-r))/2}})});var CTe=N(()=>{"use strict";u();var _Lt=ce(),bLt=KL(),xLt=Math.abs,wLt=Math.pow;_Lt({target:"Math",stat:!0},{cbrt:function(t){var r=+t;return bLt(r)*wLt(xLt(r),1/3)}})});var ATe=N(()=>{"use strict";u();var ELt=ce(),SLt=Math.floor,TLt=Math.log,ILt=Math.LOG2E;ELt({target:"Math",stat:!0},{clz32:function(t){var r=t>>>0;return r?31-SLt(TLt(r+.5)*ILt):32}})});var SC=N((ZKr,OTe)=>{"use strict";u();var EC=Math.expm1,MLt=Math.exp;OTe.exports=!EC||EC(10)>22025.465794806718||EC(10)<22025.465794806718||EC(-2e-17)!==-2e-17?function(t){var r=+t;return r===0?r:r>-1e-6&&r<1e-6?r+r*r/2:MLt(r)-1}:EC});var DTe=N(()=>{"use strict";u();var CLt=ce(),ALt=SC(),PTe=Math.cosh,OLt=Math.abs,EZ=Math.E,PLt=!PTe||PTe(710)===1/0;CLt({target:"Math",stat:!0,forced:PLt},{cosh:function(t){var r=ALt(OLt(t)-1)+1;return(r+1/(r*EZ*EZ))*(EZ/2)}})});var LTe=N(()=>{"use strict";u();var DLt=ce(),NTe=SC();DLt({target:"Math",stat:!0,forced:NTe!==Math.expm1},{expm1:NTe})});var kTe=N(()=>{"use strict";u();var NLt=ce(),LLt=XL();NLt({target:"Math",stat:!0},{fround:LLt})});var SZ=N(()=>{"use strict";u();var kLt=ce(),RLt=zW(),jLt=.0009765625,qLt=65504,zLt=6103515625e-14;kLt({target:"Math",stat:!0},{f16round:function(t){return RLt(t,jLt,qLt,zLt)}})});var jTe=N(()=>{"use strict";u();var FLt=ce(),RTe=Math.hypot,ULt=Math.abs,BLt=Math.sqrt,VLt=!!RTe&&RTe(1/0,NaN)!==1/0;FLt({target:"Math",stat:!0,arity:2,forced:VLt},{hypot:function(t,r){for(var n=0,o=0,i=arguments.length,a=0,c,h;o<i;)c=ULt(arguments[o++]),a<c?(h=a/c,n=n*h*h+1,a=c):c>0?(h=c/a,n+=h*h):n+=c;return a===1/0?1/0:a*BLt(n)}})});var zTe=N(()=>{"use strict";u();var GLt=ce(),HLt=Gt(),qTe=Math.imul,$Lt=HLt(function(){return qTe(4294967295,5)!==-5||qTe.length!==2});GLt({target:"Math",stat:!0,forced:$Lt},{imul:function(t,r){var n=65535,o=+t,i=+r,a=n&o,c=n&i;return 0|a*c+((n&o>>>16)*c+a*(n&i>>>16)<<16>>>0)}})});var TZ=N((mXr,FTe)=>{"use strict";u();var WLt=Math.log,YLt=Math.LOG10E;FTe.exports=Math.log10||function(t){return WLt(t)*YLt}});var UTe=N(()=>{"use strict";u();var ZLt=ce(),KLt=TZ();ZLt({target:"Math",stat:!0},{log10:KLt})});var BTe=N(()=>{"use strict";u();var XLt=ce(),JLt=xZ();XLt({target:"Math",stat:!0},{log1p:JLt})});var VTe=N(()=>{"use strict";u();var QLt=ce(),e3t=iY();QLt({target:"Math",stat:!0},{log2:e3t})});var GTe=N(()=>{"use strict";u();var t3t=ce(),r3t=KL();t3t({target:"Math",stat:!0},{sign:r3t})});var WTe=N(()=>{"use strict";u();var n3t=ce(),o3t=Gt(),HTe=SC(),i3t=Math.abs,$Te=Math.exp,a3t=Math.E,s3t=o3t(function(){return Math.sinh(-2e-17)!==-2e-17});n3t({target:"Math",stat:!0,forced:s3t},{sinh:function(t){var r=+t;return i3t(r)<1?(HTe(r)-HTe(-r))/2:($Te(r-1)-$Te(-r-1))*(a3t/2)}})});var KTe=N(()=>{"use strict";u();var l3t=ce(),YTe=SC(),ZTe=Math.exp;l3t({target:"Math",stat:!0},{tanh:function(t){var r=+t,n=YTe(r),o=YTe(-r);return n===1/0?1:o===1/0?-1:(n-o)/(ZTe(r)+ZTe(-r))}})});var XTe=N(()=>{"use strict";u();var u3t=Ru();u3t(Math,"Math",!0)});var JTe=N(()=>{"use strict";u();var c3t=ce(),p3t=g$();c3t({target:"Math",stat:!0},{trunc:p3t})});var TC=N((UXr,QTe)=>{"use strict";u();var f3t=Lt();QTe.exports=f3t(1 .valueOf)});var x_=N((VXr,e2e)=>{"use strict";u();e2e.exports=`	
\v\f\r \xA0\u1680\u2000\u2001\u2002\u2003\u2004\u2005\u2006\u2007\u2008\u2009\u200A\u202F\u205F\u3000\u2028\u2029\uFEFF`});var w_=N((HXr,r2e)=>{"use strict";u();var d3t=Lt(),h3t=Ni(),m3t=Sn(),MZ=x_(),t2e=d3t("".replace),g3t=RegExp("^["+MZ+"]+"),v3t=RegExp("(^|[^"+MZ+"])["+MZ+"]+$"),IZ=function(e){return function(t){var r=m3t(h3t(t));return e&1&&(r=t2e(r,g3t,"")),e&2&&(r=t2e(r,v3t,"$1")),r}};r2e.exports={start:IZ(1),end:IZ(2),trim:IZ(3)}});var u2e=N(()=>{"use strict";u();var y3t=ce(),CZ=So(),_3t=Wr(),i2e=ur(),AZ=EL(),a2e=Lt(),b3t=Hw(),n2e=Wn(),x3t=by(),w3t=El(),E3t=hg(),s2e=BM(),S3t=Gt(),T3t=gy().f,I3t=Ys().f,M3t=Ei().f,C3t=TC(),A3t=w_().trim,IC="Number",sE=i2e[IC],o2e=AZ[IC],OZ=sE.prototype,O3t=i2e.TypeError,P3t=a2e("".slice),b3=a2e("".charCodeAt),D3t=function(e){var t=s2e(e,"number");return typeof t=="bigint"?t:N3t(t)},N3t=function(e){var t=s2e(e,"number"),r,n,o,i,a,c,h,m;if(E3t(t))throw new O3t("Cannot convert a Symbol value to a number");if(typeof t=="string"&&t.length>2){if(t=A3t(t),r=b3(t,0),r===43||r===45){if(n=b3(t,2),n===88||n===120)return NaN}else if(r===48){switch(b3(t,1)){case 66:case 98:o=2,i=49;break;case 79:case 111:o=8,i=55;break;default:return+t}for(a=P3t(t,2),c=a.length,h=0;h<c;h++)if(m=b3(a,h),m<48||m>i)return NaN;return parseInt(a,o)}}return+t},PZ=b3t(IC,!sE(" 0o1")||!sE("0b1")||sE("+0x1")),L3t=function(e){return w3t(OZ,e)&&S3t(function(){C3t(e)})},x3=function(t){var r=arguments.length<1?0:sE(D3t(t));return L3t(this)?x3t(Object(r),this,x3):r};x3.prototype=OZ;PZ&&!CZ&&(OZ.constructor=x3);y3t({global:!0,constructor:!0,wrap:!0,forced:PZ},{Number:x3});var l2e=function(e,t){for(var r=_3t?T3t(t):"MAX_VALUE,MIN_VALUE,NaN,NEGATIVE_INFINITY,POSITIVE_INFINITY,EPSILON,MAX_SAFE_INTEGER,MIN_SAFE_INTEGER,isFinite,isInteger,isNaN,isSafeInteger,parseFloat,parseInt,fromString,range".split(","),n=0,o;r.length>n;n++)n2e(t,o=r[n])&&!n2e(e,o)&&M3t(e,o,I3t(t,o))};CZ&&o2e&&l2e(AZ[IC],o2e);(PZ||CZ)&&l2e(AZ[IC],sE)});var c2e=N(()=>{"use strict";u();var k3t=ce();k3t({target:"Number",stat:!0,nonConfigurable:!0,nonWritable:!0},{EPSILON:Math.pow(2,-52)})});var DZ=N((QXr,p2e)=>{"use strict";u();var R3t=ur(),j3t=R3t.isFinite;p2e.exports=Number.isFinite||function(t){return typeof t=="number"&&j3t(t)}});var f2e=N(()=>{"use strict";u();var q3t=ce(),z3t=DZ();q3t({target:"Number",stat:!0},{isFinite:z3t})});var w3=N((oJr,d2e)=>{"use strict";u();var F3t=Qr(),U3t=Math.floor;d2e.exports=Number.isInteger||function(t){return!F3t(t)&&isFinite(t)&&U3t(t)===t}});var h2e=N(()=>{"use strict";u();var B3t=ce(),V3t=w3();B3t({target:"Number",stat:!0},{isInteger:V3t})});var m2e=N(()=>{"use strict";u();var G3t=ce();G3t({target:"Number",stat:!0},{isNaN:function(t){return t!==t}})});var g2e=N(()=>{"use strict";u();var H3t=ce(),$3t=w3(),W3t=Math.abs;H3t({target:"Number",stat:!0},{isSafeInteger:function(t){return $3t(t)&&W3t(t)<=9007199254740991}})});var v2e=N(()=>{"use strict";u();var Y3t=ce();Y3t({target:"Number",stat:!0,nonConfigurable:!0,nonWritable:!0},{MAX_SAFE_INTEGER:9007199254740991})});var y2e=N(()=>{"use strict";u();var Z3t=ce();Z3t({target:"Number",stat:!0,nonConfigurable:!0,nonWritable:!0},{MIN_SAFE_INTEGER:-9007199254740991})});var NZ=N((xJr,w2e)=>{"use strict";u();var x2e=ur(),K3t=Gt(),X3t=Lt(),J3t=Sn(),Q3t=w_().trim,ekt=x_(),tkt=X3t("".charAt),E3=x2e.parseFloat,_2e=x2e.Symbol,b2e=_2e&&_2e.iterator,rkt=1/E3(ekt+"-0")!==-1/0||b2e&&!K3t(function(){E3(Object(b2e))});w2e.exports=rkt?function(t){var r=Q3t(J3t(t)),n=E3(r);return n===0&&tkt(r,0)==="-"?-0:n}:E3});var S2e=N(()=>{"use strict";u();var nkt=ce(),E2e=NZ();nkt({target:"Number",stat:!0,forced:Number.parseFloat!==E2e},{parseFloat:E2e})});var LZ=N((IJr,O2e)=>{"use strict";u();var C2e=ur(),okt=Gt(),ikt=Lt(),akt=Sn(),skt=w_().trim,T2e=x_(),MC=C2e.parseInt,I2e=C2e.Symbol,M2e=I2e&&I2e.iterator,A2e=/^[+-]?0x/i,lkt=ikt(A2e.exec),ukt=MC(T2e+"08")!==8||MC(T2e+"0x16")!==22||M2e&&!okt(function(){MC(Object(M2e))});O2e.exports=ukt?function(t,r){var n=skt(akt(t));return MC(n,r>>>0||(lkt(A2e,n)?16:10))}:MC});var D2e=N(()=>{"use strict";u();var ckt=ce(),P2e=LZ();ckt({target:"Number",stat:!0,forced:Number.parseInt!==P2e},{parseInt:P2e})});var j2e=N(()=>{"use strict";u();var pkt=ce(),RZ=Lt(),fkt=Vi(),dkt=TC(),hkt=vC(),mkt=TZ(),kZ=Gt(),gkt=RangeError,N2e=String,vkt=isFinite,ykt=Math.abs,_kt=Math.floor,L2e=Math.pow,bkt=Math.round,Lh=RZ(1 .toExponential),xkt=RZ(hkt),k2e=RZ("".slice),R2e=Lh(-69e-12,4)==="-6.9000e-11"&&Lh(1.255,2)==="1.25e+0"&&Lh(12345,3)==="1.235e+4"&&Lh(25,0)==="3e+1",wkt=function(){return kZ(function(){Lh(1,1/0)})&&kZ(function(){Lh(1,-1/0)})},Ekt=function(){return!kZ(function(){Lh(1/0,1/0),Lh(NaN,1/0)})},Skt=!R2e||!wkt()||!Ekt();pkt({target:"Number",proto:!0,forced:Skt},{toExponential:function(t){var r=dkt(this);if(t===void 0)return Lh(r);var n=fkt(t);if(!vkt(r))return String(r);if(n<0||n>20)throw new gkt("Incorrect fraction digits");if(R2e)return Lh(r,n);var o="",i,a,c,h;if(r<0&&(o="-",r=-r),r===0)a=0,i=xkt("0",n+1);else{var m=mkt(r);a=_kt(m);var y=L2e(10,a-n),w=bkt(r/y);2*r>=(2*w+1)*y&&(w+=1),w>=L2e(10,n+1)&&(w/=10,a+=1),i=N2e(w)}return n!==0&&(i=k2e(i,0,1)+"."+k2e(i,1)),a===0?(c="+",h="0"):(c=a>0?"+":"-",h=N2e(ykt(a))),i+="e"+c+h,o+i}})});var V2e=N(()=>{"use strict";u();var Tkt=ce(),zZ=Lt(),Ikt=Vi(),Mkt=TC(),Ckt=vC(),q2e=Gt(),Akt=RangeError,U2e=String,B2e=Math.floor,qZ=zZ(Ckt),z2e=zZ("".slice),CC=zZ(1 .toFixed),uE=function(e,t,r){return t===0?r:t%2===1?uE(e,t-1,r*e):uE(e*e,t/2,r)},Okt=function(e){for(var t=0,r=e;r>=4096;)t+=12,r/=4096;for(;r>=2;)t+=1,r/=2;return t},lE=function(e,t,r){for(var n=-1,o=r;++n<6;)o+=t*e[n],e[n]=o%1e7,o=B2e(o/1e7)},jZ=function(e,t){for(var r=6,n=0;--r>=0;)n+=e[r],e[r]=B2e(n/t),n=n%t*1e7},F2e=function(e){for(var t=6,r="";--t>=0;)if(r!==""||t===0||e[t]!==0){var n=U2e(e[t]);r=r===""?n:r+qZ("0",7-n.length)+n}return r},Pkt=q2e(function(){return CC(8e-5,3)!=="0.000"||CC(.9,0)!=="1"||CC(1.255,2)!=="1.25"||CC(0xde0b6b3a7640080,0)!=="1000000000000000128"})||!q2e(function(){CC({})});Tkt({target:"Number",proto:!0,forced:Pkt},{toFixed:function(t){var r=Mkt(this),n=Ikt(t),o=[0,0,0,0,0,0],i="",a="0",c,h,m,y;if(n<0||n>20)throw new Akt("Incorrect fraction digits");if(r!==r)return"NaN";if(r<=-1e21||r>=1e21)return U2e(r);if(r<0&&(i="-",r=-r),r>1e-21)if(c=Okt(r*uE(2,69,1))-69,h=c<0?r*uE(2,-c,1):r/uE(2,c,1),h*=4503599627370496,c=52-c,c>0){for(lE(o,0,h),m=n;m>=7;)lE(o,1e7,0),m-=7;for(lE(o,uE(10,m,1),0),m=c-1;m>=23;)jZ(o,1<<23),m-=23;jZ(o,1<<m),lE(o,1,1),jZ(o,2),a=F2e(o)}else lE(o,0,h),lE(o,1<<-c,0),a=F2e(o)+qZ("0",n);return n>0?(y=a.length,a=i+(y<=n?"0."+qZ("0",n-y)+a:z2e(a,0,y-n)+"."+z2e(a,y-n))):a=i+a,a}})});var $2e=N(()=>{"use strict";u();var Dkt=ce(),Nkt=Lt(),G2e=Gt(),H2e=TC(),S3=Nkt(1 .toPrecision),Lkt=G2e(function(){return S3(1,void 0)!=="1"})||!G2e(function(){S3({})});Dkt({target:"Number",proto:!0,forced:Lkt},{toPrecision:function(t){return t===void 0?S3(H2e(this)):S3(H2e(this),t)}})});var UZ=N((FJr,Z2e)=>{"use strict";u();var W2e=Wr(),kkt=Lt(),Rkt=cr(),jkt=Gt(),FZ=p_(),qkt=YM(),zkt=FM(),Fkt=Jn(),Ukt=dg(),cE=Object.assign,Y2e=Object.defineProperty,Bkt=kkt([].concat);Z2e.exports=!cE||jkt(function(){if(W2e&&cE({b:1},cE(Y2e({},"a",{enumerable:!0,get:function(){Y2e(this,"b",{value:3,enumerable:!1})}}),{b:2})).b!==1)return!0;var e={},t={},r=Symbol("assign detection"),n="abcdefghijklmnopqrst";return e[r]=7,n.split("").forEach(function(o){t[o]=o}),cE({},e)[r]!==7||FZ(cE({},t)).join("")!==n})?function(t,r){for(var n=Fkt(t),o=arguments.length,i=1,a=qkt.f,c=zkt.f;o>i;)for(var h=Ukt(arguments[i++]),m=a?Bkt(FZ(h),a(h)):FZ(h),y=m.length,w=0,E;y>w;)E=m[w++],(!W2e||Rkt(c,h,E))&&(n[E]=h[E]);return n}:cE});var X2e=N(()=>{"use strict";u();var Vkt=ce(),K2e=UZ();Vkt({target:"Object",stat:!0,arity:2,forced:Object.assign!==K2e},{assign:K2e})});var J2e=N(()=>{"use strict";u();var Gkt=ce(),Hkt=Wr(),$kt=La();Gkt({target:"Object",stat:!0,sham:!Hkt},{create:$kt})});var AC=N((YJr,eIe)=>{"use strict";u();var Wkt=So(),Ykt=ur(),Zkt=Gt(),Q2e=ZL();eIe.exports=Wkt||!Zkt(function(){if(!(Q2e&&Q2e<535)){var e=Math.random();__defineSetter__.call(null,e,function(){}),delete Ykt[e]}})});var tIe=N(()=>{"use strict";u();var Kkt=ce(),Xkt=Wr(),Jkt=AC(),Qkt=un(),eRt=Jn(),tRt=Ei();Xkt&&Kkt({target:"Object",proto:!0,forced:Jkt},{__defineGetter__:function(t,r){tRt.f(eRt(this),t,{get:Qkt(r),enumerable:!0,configurable:!0})}})});var nIe=N(()=>{"use strict";u();var rRt=ce(),nRt=Wr(),rIe=_L().f;rRt({target:"Object",stat:!0,forced:Object.defineProperties!==rIe,sham:!nRt},{defineProperties:rIe})});var iIe=N(()=>{"use strict";u();var oRt=ce(),iRt=Wr(),oIe=Ei().f;oRt({target:"Object",stat:!0,forced:Object.defineProperty!==oIe,sham:!iRt},{defineProperty:oIe})});var aIe=N(()=>{"use strict";u();var aRt=ce(),sRt=Wr(),lRt=AC(),uRt=un(),cRt=Jn(),pRt=Ei();sRt&&aRt({target:"Object",proto:!0,forced:lRt},{__defineSetter__:function(t,r){pRt.f(cRt(this),t,{set:uRt(r),enumerable:!0,configurable:!0})}})});var BZ=N((lQr,pIe)=>{"use strict";u();var lIe=Wr(),fRt=Gt(),uIe=Lt(),dRt=gs(),hRt=p_(),mRt=hs(),gRt=FM().f,cIe=uIe(gRt),vRt=uIe([].push),yRt=lIe&&fRt(function(){var e=Object.create(null);return e[2]=2,!cIe(e,2)}),sIe=function(e){return function(t){for(var r=mRt(t),n=hRt(r),o=yRt&&dRt(r)===null,i=n.length,a=0,c=[],h;i>a;)h=n[a++],(!lIe||(o?h in r:cIe(r,h)))&&vRt(c,e?[h,r[h]]:r[h]);return c}};pIe.exports={entries:sIe(!0),values:sIe(!1)}});var fIe=N(()=>{"use strict";u();var _Rt=ce(),bRt=BZ().entries;_Rt({target:"Object",stat:!0},{entries:function(t){return bRt(t)}})});var dIe=N(()=>{"use strict";u();var xRt=ce(),wRt=Sg(),ERt=Gt(),SRt=Qr(),TRt=Ny().onFreeze,VZ=Object.freeze,IRt=ERt(function(){VZ(1)});xRt({target:"Object",stat:!0,forced:IRt,sham:!wRt},{freeze:function(t){return VZ&&SRt(t)?VZ(TRt(t)):t}})});var hIe=N(()=>{"use strict";u();var MRt=ce(),CRt=ma(),ARt=Xp();MRt({target:"Object",stat:!0},{fromEntries:function(t){var r={};return CRt(t,function(n,o){ARt(r,n,o)},{AS_ENTRIES:!0}),r}})});var vIe=N(()=>{"use strict";u();var ORt=ce(),PRt=Gt(),DRt=hs(),mIe=Ys().f,gIe=Wr(),NRt=!gIe||PRt(function(){mIe(1)});ORt({target:"Object",stat:!0,forced:NRt,sham:!gIe},{getOwnPropertyDescriptor:function(t,r){return mIe(DRt(t),r)}})});var yIe=N(()=>{"use strict";u();var LRt=ce(),kRt=Wr(),RRt=mL(),jRt=hs(),qRt=Ys(),zRt=Xp();LRt({target:"Object",stat:!0,sham:!kRt},{getOwnPropertyDescriptors:function(t){for(var r=jRt(t),n=qRt.f,o=RRt(r),i={},a=0,c,h;o.length>a;)h=n(r,c=o[a++]),h!==void 0&&zRt(i,c,h);return i}})});var _Ie=N(()=>{"use strict";u();var FRt=ce(),URt=Gt(),BRt=wL().f,VRt=URt(function(){return!Object.getOwnPropertyNames(1)});FRt({target:"Object",stat:!0,forced:VRt},{getOwnPropertyNames:BRt})});var xIe=N(()=>{"use strict";u();var GRt=ce(),HRt=Gt(),$Rt=Jn(),bIe=gs(),WRt=kL(),YRt=HRt(function(){bIe(1)});GRt({target:"Object",stat:!0,forced:YRt,sham:!WRt},{getPrototypeOf:function(t){return bIe($Rt(t))}})});var GZ=N(()=>{"use strict";u();var ZRt=ce(),KRt=ln(),XRt=Lt(),JRt=un(),QRt=Ni(),e6t=Ch(),t6t=ma(),r6t=Gt(),wIe=Object.groupBy,n6t=KRt("Object","create"),o6t=XRt([].push),i6t=!wIe||r6t(function(){return wIe("ab",function(e){return e}).a.length!==1});ZRt({target:"Object",stat:!0,forced:i6t},{groupBy:function(t,r){QRt(t),JRt(r);var n=n6t(null),o=0;return t6t(t,function(i){var a=e6t(r(i,o++));a in n?o6t(n[a],i):n[a]=[i]}),n}})});var HZ=N(()=>{"use strict";u();var a6t=ce(),s6t=Wn();a6t({target:"Object",stat:!0},{hasOwn:s6t})});var T3=N((jQr,EIe)=>{"use strict";u();EIe.exports=Object.is||function(t,r){return t===r?t!==0||1/t===1/r:t!==t&&r!==r}});var SIe=N(()=>{"use strict";u();var l6t=ce(),u6t=T3();l6t({target:"Object",stat:!0},{is:u6t})});var IIe=N(()=>{"use strict";u();var c6t=ce(),TIe=m3();c6t({target:"Object",stat:!0,forced:Object.isExtensible!==TIe},{isExtensible:TIe})});var CIe=N(()=>{"use strict";u();var p6t=ce(),f6t=Gt(),d6t=Qr(),h6t=wl(),MIe=d3(),$Z=Object.isFrozen,m6t=MIe||f6t(function(){$Z(1)});p6t({target:"Object",stat:!0,forced:m6t},{isFrozen:function(t){return!d6t(t)||MIe&&h6t(t)==="ArrayBuffer"?!0:$Z?$Z(t):!1}})});var OIe=N(()=>{"use strict";u();var g6t=ce(),v6t=Gt(),y6t=Qr(),_6t=wl(),AIe=d3(),WZ=Object.isSealed,b6t=AIe||v6t(function(){WZ(1)});g6t({target:"Object",stat:!0,forced:b6t},{isSealed:function(t){return!y6t(t)||AIe&&_6t(t)==="ArrayBuffer"?!0:WZ?WZ(t):!1}})});var DIe=N(()=>{"use strict";u();var x6t=ce(),w6t=Jn(),PIe=p_(),E6t=Gt(),S6t=E6t(function(){PIe(1)});x6t({target:"Object",stat:!0,forced:S6t},{keys:function(t){return PIe(w6t(t))}})});var NIe=N(()=>{"use strict";u();var T6t=ce(),I6t=Wr(),M6t=AC(),C6t=Jn(),A6t=Ch(),O6t=gs(),P6t=Ys().f;I6t&&T6t({target:"Object",proto:!0,forced:M6t},{__lookupGetter__:function(t){var r=C6t(this),n=A6t(t),o;do if(o=P6t(r,n))return o.get;while(r=O6t(r))}})});var LIe=N(()=>{"use strict";u();var D6t=ce(),N6t=Wr(),L6t=AC(),k6t=Jn(),R6t=Ch(),j6t=gs(),q6t=Ys().f;N6t&&D6t({target:"Object",proto:!0,forced:L6t},{__lookupSetter__:function(t){var r=k6t(this),n=R6t(t),o;do if(o=q6t(r,n))return o.set;while(r=j6t(r))}})});var kIe=N(()=>{"use strict";u();var z6t=ce(),F6t=Qr(),U6t=Ny().onFreeze,B6t=Sg(),V6t=Gt(),YZ=Object.preventExtensions,G6t=V6t(function(){YZ(1)});z6t({target:"Object",stat:!0,forced:G6t,sham:!B6t},{preventExtensions:function(t){return YZ&&F6t(t)?YZ(U6t(t)):t}})});var FIe=N(()=>{"use strict";u();var H6t=Wr(),$6t=Gi(),W6t=Qr(),Y6t=V$(),Z6t=Jn(),K6t=Ni(),RIe=Object.getPrototypeOf,jIe=Object.setPrototypeOf,qIe=Object.prototype,zIe="__proto__";if(H6t&&RIe&&jIe&&!(zIe in qIe))try{$6t(qIe,zIe,{configurable:!0,get:function(){return RIe(Z6t(this))},set:function(t){var r=K6t(this);Y6t(t)&&W6t(r)&&jIe(r,t)}})}catch(e){}});var UIe=N(()=>{"use strict";u();var X6t=ce(),J6t=Qr(),Q6t=Ny().onFreeze,ejt=Sg(),tjt=Gt(),ZZ=Object.seal,rjt=tjt(function(){ZZ(1)});X6t({target:"Object",stat:!0,forced:rjt,sham:!ejt},{seal:function(t){return ZZ&&J6t(t)?ZZ(Q6t(t)):t}})});var BIe=N(()=>{"use strict";u();var njt=ce(),ojt=Kp();njt({target:"Object",stat:!0},{setPrototypeOf:ojt})});var GIe=N((yen,VIe)=>{"use strict";u();var ijt=vL(),ajt=ku();VIe.exports=ijt?{}.toString:function(){return"[object "+ajt(this)+"]"}});var HIe=N(()=>{"use strict";u();var sjt=vL(),ljt=ti(),ujt=GIe();sjt||ljt(Object.prototype,"toString",ujt,{unsafe:!0})});var $Ie=N(()=>{"use strict";u();var cjt=ce(),pjt=BZ().values;cjt({target:"Object",stat:!0},{values:function(t){return pjt(t)}})});var YIe=N(()=>{"use strict";u();var fjt=ce(),WIe=NZ();fjt({global:!0,forced:parseFloat!==WIe},{parseFloat:WIe})});var KIe=N(()=>{"use strict";u();var djt=ce(),ZIe=LZ();djt({global:!0,forced:parseInt!==ZIe},{parseInt:ZIe})});var OC=N((Den,XIe)=>{"use strict";u();var hjt=vd(),mjt=hy(),gjt=TypeError;XIe.exports=function(e){if(hjt(e))return e;throw new gjt(mjt(e)+" is not a constructor")}});var PC=N((Len,QIe)=>{"use strict";u();var JIe=dr(),vjt=OC(),yjt=gc(),_jt=nn(),bjt=_jt("species");QIe.exports=function(e,t){var r=JIe(e).constructor,n;return r===void 0||yjt(n=JIe(r)[bjt])?t:vjt(n)}});var hp=N((Ren,eMe)=>{"use strict";u();var xjt=TypeError;eMe.exports=function(e,t){if(e<t)throw new xjt("Not enough arguments");return e}});var KZ=N((qen,tMe)=>{"use strict";u();var wjt=pd();tMe.exports=/(?:ipad|iphone|ipod).*applewebkit/i.test(wjt)});var LC=N((Fen,cMe)=>{"use strict";u();var mp=ur(),Ejt=Sl(),Sjt=ci(),rMe=jn(),Tjt=Wn(),uMe=Gt(),nMe=_$(),Ijt=yc(),oMe=VM(),Mjt=hp(),Cjt=KZ(),Ajt=y_(),rK=mp.setImmediate,nK=mp.clearImmediate,Ojt=mp.process,XZ=mp.Dispatch,Pjt=mp.Function,iMe=mp.MessageChannel,Djt=mp.String,JZ=0,DC={},aMe="onreadystatechange",NC,E_,QZ,eK;uMe(function(){NC=mp.location});var oK=function(e){if(Tjt(DC,e)){var t=DC[e];delete DC[e],t()}},tK=function(e){return function(){oK(e)}},sMe=function(e){oK(e.data)},lMe=function(e){mp.postMessage(Djt(e),NC.protocol+"//"+NC.host)};(!rK||!nK)&&(rK=function(t){Mjt(arguments.length,1);var r=rMe(t)?t:Pjt(t),n=Ijt(arguments,1);return DC[++JZ]=function(){Ejt(r,void 0,n)},E_(JZ),JZ},nK=function(t){delete DC[t]},Ajt?E_=function(e){Ojt.nextTick(tK(e))}:XZ&&XZ.now?E_=function(e){XZ.now(tK(e))}:iMe&&!Cjt?(QZ=new iMe,eK=QZ.port2,QZ.port1.onmessage=sMe,E_=Sjt(eK.postMessage,eK)):mp.addEventListener&&rMe(mp.postMessage)&&!mp.importScripts&&NC&&NC.protocol!=="file:"&&!uMe(lMe)?(E_=lMe,mp.addEventListener("message",sMe,!1)):aMe in oMe("script")?E_=function(e){nMe.appendChild(oMe("script"))[aMe]=function(){nMe.removeChild(this),oK(e)}}:E_=function(e){setTimeout(tK(e),0)});cMe.exports={set:rK,clear:nK}});var iK=N((Ben,fMe)=>{"use strict";u();var pMe=ur(),Njt=Wr(),Ljt=Object.getOwnPropertyDescriptor;fMe.exports=function(e){if(!Njt)return pMe[e];var t=Ljt(pMe,e);return t&&t.value}});var aK=N((Gen,hMe)=>{"use strict";u();var dMe=function(){this.head=null,this.tail=null};dMe.prototype={add:function(e){var t={item:e,next:null},r=this.tail;r?r.next=t:this.head=t,this.tail=t},get:function(){var e=this.head;if(e){var t=this.head=e.next;return t===null&&(this.tail=null),e.item}}};hMe.exports=dMe});var gMe=N(($en,mMe)=>{"use strict";u();var kjt=pd();mMe.exports=/ipad|iphone|ipod/i.test(kjt)&&typeof Pebble!="undefined"});var yMe=N((Yen,vMe)=>{"use strict";u();var Rjt=pd();vMe.exports=/web0s(?!.*chrome)/i.test(Rjt)});var fK=N((Ken,SMe)=>{"use strict";u();var fE=ur(),jjt=iK(),_Me=ci(),sK=LC().set,qjt=aK(),zjt=KZ(),Fjt=gMe(),Ujt=yMe(),lK=y_(),bMe=fE.MutationObserver||fE.WebKitMutationObserver,xMe=fE.document,wMe=fE.process,I3=fE.Promise,pK=jjt("queueMicrotask"),pE,uK,cK,M3,EMe;pK||(kC=new qjt,RC=function(){var e,t;for(lK&&(e=wMe.domain)&&e.exit();t=kC.get();)try{t()}catch(r){throw kC.head&&pE(),r}e&&e.enter()},!zjt&&!lK&&!Ujt&&bMe&&xMe?(uK=!0,cK=xMe.createTextNode(""),new bMe(RC).observe(cK,{characterData:!0}),pE=function(){cK.data=uK=!uK}):!Fjt&&I3&&I3.resolve?(M3=I3.resolve(void 0),M3.constructor=I3,EMe=_Me(M3.then,M3),pE=function(){EMe(RC)}):lK?pE=function(){wMe.nextTick(RC)}:(sK=_Me(sK,fE),pE=function(){sK(RC)}),pK=function(e){kC.head||pE(),kC.add(e)});var kC,RC;SMe.exports=pK});var dK=N((Jen,TMe)=>{"use strict";u();TMe.exports=function(e,t){try{arguments.length===1?console.error(e):console.error(e,t)}catch(r){}}});var Ly=N((etn,IMe)=>{"use strict";u();IMe.exports=function(e){try{return{error:!1,value:e()}}catch(t){return{error:!0,value:t}}}});var S_=N((rtn,MMe)=>{"use strict";u();var Bjt=ur();MMe.exports=Bjt.Promise});var dE=N((otn,PMe)=>{"use strict";u();var Vjt=ur(),jC=S_(),Gjt=jn(),Hjt=Hw(),$jt=GM(),Wjt=nn(),CMe=fC(),Yjt=So(),hK=dd(),AMe=jC&&jC.prototype,Zjt=Wjt("species"),mK=!1,OMe=Gjt(Vjt.PromiseRejectionEvent),Kjt=Hjt("Promise",function(){var e=$jt(jC),t=e!==String(jC);if(!t&&hK===66||Yjt&&!(AMe.catch&&AMe.finally))return!0;if(!hK||hK<51||!/native code/.test(e)){var r=new jC(function(i){i(1)}),n=function(i){i(function(){},function(){})},o=r.constructor={};if(o[Zjt]=n,mK=r.then(function(){})instanceof n,!mK)return!0}return!t&&(CMe==="BROWSER"||CMe==="DENO")&&!OMe});PMe.exports={CONSTRUCTOR:Kjt,REJECTION_EVENT:OMe,SUBCLASSING:mK}});var kh=N((atn,NMe)=>{"use strict";u();var DMe=un(),Xjt=TypeError,Jjt=function(e){var t,r;this.promise=new e(function(n,o){if(t!==void 0||r!==void 0)throw new Xjt("Bad Promise constructor");t=n,r=o}),this.resolve=DMe(t),this.reject=DMe(r)};NMe.exports.f=function(e){return new Jjt(e)}});var JMe=N(()=>{"use strict";u();var Qjt=ce(),eqt=So(),P3=y_(),ky=ur(),vE=cr(),LMe=ti(),kMe=Kp(),tqt=Ru(),rqt=Iy(),nqt=un(),O3=jn(),oqt=Qr(),iqt=au(),aqt=PC(),FMe=LC().set,bK=fK(),sqt=dK(),lqt=Ly(),uqt=aK(),UMe=Ho(),D3=S_(),xK=dE(),BMe=kh(),N3="Promise",VMe=xK.CONSTRUCTOR,cqt=xK.REJECTION_EVENT,pqt=xK.SUBCLASSING,gK=UMe.getterFor(N3),fqt=UMe.set,hE=D3&&D3.prototype,T_=D3,C3=hE,GMe=ky.TypeError,vK=ky.document,wK=ky.process,yK=BMe.f,dqt=yK,hqt=!!(vK&&vK.createEvent&&ky.dispatchEvent),HMe="unhandledrejection",mqt="rejectionhandled",RMe=0,$Me=1,gqt=2,EK=1,WMe=2,A3,jMe,vqt,qMe,YMe=function(e){var t;return oqt(e)&&O3(t=e.then)?t:!1},ZMe=function(e,t){var r=t.value,n=t.state===$Me,o=n?e.ok:e.fail,i=e.resolve,a=e.reject,c=e.domain,h,m,y;try{o?(n||(t.rejection===WMe&&_qt(t),t.rejection=EK),o===!0?h=r:(c&&c.enter(),h=o(r),c&&(c.exit(),y=!0)),h===e.promise?a(new GMe("Promise-chain cycle")):(m=YMe(h))?vE(m,h,i,a):i(h)):a(r)}catch(w){c&&!y&&c.exit(),a(w)}},KMe=function(e,t){e.notified||(e.notified=!0,bK(function(){for(var r=e.reactions,n;n=r.get();)ZMe(n,e);e.notified=!1,t&&!e.rejection&&yqt(e)}))},XMe=function(e,t,r){var n,o;hqt?(n=vK.createEvent("Event"),n.promise=t,n.reason=r,n.initEvent(e,!1,!0),ky.dispatchEvent(n)):n={promise:t,reason:r},!cqt&&(o=ky["on"+e])?o(n):e===HMe&&sqt("Unhandled promise rejection",r)},yqt=function(e){vE(FMe,ky,function(){var t=e.facade,r=e.value,n=zMe(e),o;if(n&&(o=lqt(function(){P3?wK.emit("unhandledRejection",r,t):XMe(HMe,t,r)}),e.rejection=P3||zMe(e)?WMe:EK,o.error))throw o.value})},zMe=function(e){return e.rejection!==EK&&!e.parent},_qt=function(e){vE(FMe,ky,function(){var t=e.facade;P3?wK.emit("rejectionHandled",t):XMe(mqt,t,e.value)})},mE=function(e,t,r){return function(n){e(t,n,r)}},gE=function(e,t,r){e.done||(e.done=!0,r&&(e=r),e.value=t,e.state=gqt,KMe(e,!0))},_K=function(e,t,r){if(!e.done){e.done=!0,r&&(e=r);try{if(e.facade===t)throw new GMe("Promise can't be resolved itself");var n=YMe(t);n?bK(function(){var o={done:!1};try{vE(n,t,mE(_K,o,e),mE(gE,o,e))}catch(i){gE(o,i,e)}}):(e.value=t,e.state=$Me,KMe(e,!1))}catch(o){gE({done:!1},o,e)}}};if(VMe&&(T_=function(t){iqt(this,C3),nqt(t),vE(A3,this);var r=gK(this);try{t(mE(_K,r),mE(gE,r))}catch(n){gE(r,n)}},C3=T_.prototype,A3=function(t){fqt(this,{type:N3,done:!1,notified:!1,parent:!1,reactions:new uqt,rejection:!1,state:RMe,value:null})},A3.prototype=LMe(C3,"then",function(t,r){var n=gK(this),o=yK(aqt(this,T_));return n.parent=!0,o.ok=O3(t)?t:!0,o.fail=O3(r)&&r,o.domain=P3?wK.domain:void 0,n.state===RMe?n.reactions.add(o):bK(function(){ZMe(o,n)}),o.promise}),jMe=function(){var e=new A3,t=gK(e);this.promise=e,this.resolve=mE(_K,t),this.reject=mE(gE,t)},BMe.f=yK=function(e){return e===T_||e===vqt?new jMe(e):dqt(e)},!eqt&&O3(D3)&&hE!==Object.prototype)){qMe=hE.then,pqt||LMe(hE,"then",function(t,r){var n=this;return new T_(function(o,i){vE(qMe,n,o,i)}).then(t,r)},{unsafe:!0});try{delete hE.constructor}catch(e){}kMe&&kMe(hE,C3)}Qjt({global:!0,constructor:!0,wrap:!0,forced:VMe},{Promise:T_});tqt(T_,N3,!1,!0);rqt(N3)});var qC=N((ptn,QMe)=>{"use strict";u();var bqt=S_(),xqt=aC(),wqt=dE().CONSTRUCTOR;QMe.exports=wqt||!xqt(function(e){bqt.all(e).then(void 0,function(){})})});var eCe=N(()=>{"use strict";u();var Eqt=ce(),Sqt=cr(),Tqt=un(),Iqt=kh(),Mqt=Ly(),Cqt=ma(),Aqt=qC();Eqt({target:"Promise",stat:!0,forced:Aqt},{all:function(t){var r=this,n=Iqt.f(r),o=n.resolve,i=n.reject,a=Mqt(function(){var c=Tqt(r.resolve),h=[],m=0,y=1;Cqt(t,function(w){var E=m++,A=!1;y++,Sqt(c,r,w).then(function(P){A||(A=!0,h[E]=P,--y||o(h))},i)}),--y||o(h)});return a.error&&i(a.value),n.promise}})});var rCe=N(()=>{"use strict";u();var Oqt=ce(),Pqt=So(),Dqt=dE().CONSTRUCTOR,TK=S_(),Nqt=ln(),Lqt=jn(),kqt=ti(),tCe=TK&&TK.prototype;Oqt({target:"Promise",proto:!0,forced:Dqt,real:!0},{catch:function(e){return this.then(void 0,e)}});!Pqt&&Lqt(TK)&&(SK=Nqt("Promise").prototype.catch,tCe.catch!==SK&&kqt(tCe,"catch",SK,{unsafe:!0}));var SK});var nCe=N(()=>{"use strict";u();var Rqt=ce(),jqt=cr(),qqt=un(),zqt=kh(),Fqt=Ly(),Uqt=ma(),Bqt=qC();Rqt({target:"Promise",stat:!0,forced:Bqt},{race:function(t){var r=this,n=zqt.f(r),o=n.reject,i=Fqt(function(){var a=qqt(r.resolve);Uqt(t,function(c){jqt(a,r,c).then(n.resolve,o)})});return i.error&&o(i.value),n.promise}})});var oCe=N(()=>{"use strict";u();var Vqt=ce(),Gqt=kh(),Hqt=dE().CONSTRUCTOR;Vqt({target:"Promise",stat:!0,forced:Hqt},{reject:function(t){var r=Gqt.f(this),n=r.reject;return n(t),r.promise}})});var IK=N((Ttn,iCe)=>{"use strict";u();var $qt=dr(),Wqt=Qr(),Yqt=kh();iCe.exports=function(e,t){if($qt(e),Wqt(t)&&t.constructor===e)return t;var r=Yqt.f(e),n=r.resolve;return n(t),r.promise}});var lCe=N(()=>{"use strict";u();var Zqt=ce(),Kqt=ln(),aCe=So(),Xqt=S_(),sCe=dE().CONSTRUCTOR,Jqt=IK(),Qqt=Kqt("Promise"),ezt=aCe&&!sCe;Zqt({target:"Promise",stat:!0,forced:aCe||sCe},{resolve:function(t){return Jqt(ezt&&this===Qqt?Xqt:this,t)}})});var uCe=N(()=>{"use strict";u();JMe();eCe();rCe();nCe();oCe();lCe()});var MK=N(()=>{"use strict";u();var tzt=ce(),rzt=cr(),nzt=un(),ozt=kh(),izt=Ly(),azt=ma(),szt=qC();tzt({target:"Promise",stat:!0,forced:szt},{allSettled:function(t){var r=this,n=ozt.f(r),o=n.resolve,i=n.reject,a=izt(function(){var c=nzt(r.resolve),h=[],m=0,y=1;azt(t,function(w){var E=m++,A=!1;y++,rzt(c,r,w).then(function(P){A||(A=!0,h[E]={status:"fulfilled",value:P},--y||o(h))},function(P){A||(A=!0,h[E]={status:"rejected",reason:P},--y||o(h))})}),--y||o(h)});return a.error&&i(a.value),n.promise}})});var CK=N(()=>{"use strict";u();var lzt=ce(),uzt=cr(),czt=un(),pzt=ln(),fzt=kh(),dzt=Ly(),hzt=ma(),mzt=qC(),cCe="No one promise resolved";lzt({target:"Promise",stat:!0,forced:mzt},{any:function(t){var r=this,n=pzt("AggregateError"),o=fzt.f(r),i=o.resolve,a=o.reject,c=dzt(function(){var h=czt(r.resolve),m=[],y=0,w=1,E=!1;hzt(t,function(A){var P=y++,j=!1;w++,uzt(h,r,A).then(function(D){j||E||(E=!0,i(D))},function(D){j||E||(j=!0,m[P]=D,--w||a(new n(m,cCe)))})}),--w||a(new n(m,cCe))});return c.error&&a(c.value),o.promise}})});var hCe=N(()=>{"use strict";u();var gzt=ce(),vzt=So(),L3=S_(),yzt=Gt(),fCe=ln(),dCe=jn(),_zt=PC(),pCe=IK(),bzt=ti(),OK=L3&&L3.prototype,xzt=!!L3&&yzt(function(){OK.finally.call({then:function(){}},function(){})});gzt({target:"Promise",proto:!0,real:!0,forced:xzt},{finally:function(e){var t=_zt(this,fCe("Promise")),r=dCe(e);return this.then(r?function(n){return pCe(t,e()).then(function(){return n})}:e,r?function(n){return pCe(t,e()).then(function(){throw n})}:e)}});!vzt&&dCe(L3)&&(AK=fCe("Promise").prototype.finally,OK.finally!==AK&&bzt(OK,"finally",AK,{unsafe:!0}));var AK});var DK=N(()=>{"use strict";u();var wzt=ce(),Ezt=ur(),Szt=Sl(),Tzt=yc(),Izt=kh(),Mzt=un(),gCe=Ly(),PK=Ezt.Promise,mCe=!1,Czt=!PK||!PK.try||gCe(function(){PK.try(function(e){mCe=e===8},8)}).error||!mCe;wzt({target:"Promise",stat:!0,forced:Czt},{try:function(e){var t=arguments.length>1?Tzt(arguments,1):[],r=Izt.f(this),n=gCe(function(){return Szt(Mzt(e),void 0,t)});return(n.error?r.reject:r.resolve)(n.value),r.promise}})});var NK=N(()=>{"use strict";u();var Azt=ce(),Ozt=kh();Azt({target:"Promise",stat:!0},{withResolvers:function(){var t=Ozt.f(this);return{promise:t.promise,resolve:t.resolve,reject:t.reject}}})});var vCe=N(()=>{"use strict";u();var Pzt=ce(),Dzt=Sl(),Nzt=un(),Lzt=dr(),kzt=Gt(),Rzt=!kzt(function(){Reflect.apply(function(){})});Pzt({target:"Reflect",stat:!0,forced:Rzt},{apply:function(t,r,n){return Dzt(Nzt(t),r,Lzt(n))}})});var SCe=N(()=>{"use strict";u();var jzt=ce(),qzt=ln(),LK=Sl(),zzt=OY(),yCe=OC(),Fzt=dr(),_Ce=Qr(),Uzt=La(),xCe=Gt(),kK=qzt("Reflect","construct"),Bzt=Object.prototype,Vzt=[].push,wCe=xCe(function(){function e(){}return!(kK(function(){},[],e)instanceof e)}),ECe=!xCe(function(){kK(function(){})}),bCe=wCe||ECe;jzt({target:"Reflect",stat:!0,forced:bCe,sham:bCe},{construct:function(t,r){yCe(t),Fzt(r);var n=arguments.length<3?t:yCe(arguments[2]);if(ECe&&!wCe)return kK(t,r,n);if(t===n){switch(r.length){case 0:return new t;case 1:return new t(r[0]);case 2:return new t(r[0],r[1]);case 3:return new t(r[0],r[1],r[2]);case 4:return new t(r[0],r[1],r[2],r[3])}var o=[null];return LK(Vzt,o,r),new(LK(zzt,t,o))}var i=n.prototype,a=Uzt(_Ce(i)?i:Bzt),c=LK(t,a,r);return _Ce(c)?c:a}})});var MCe=N(()=>{"use strict";u();var Gzt=ce(),Hzt=Wr(),TCe=dr(),$zt=Ch(),ICe=Ei(),Wzt=Gt(),Yzt=Wzt(function(){Reflect.defineProperty(ICe.f({},1,{value:1}),1,{value:2})});Gzt({target:"Reflect",stat:!0,forced:Yzt,sham:!Hzt},{defineProperty:function(t,r,n){TCe(t);var o=$zt(r);TCe(n);try{return ICe.f(t,o,n),!0}catch(i){return!1}}})});var CCe=N(()=>{"use strict";u();var Zzt=ce(),Kzt=dr(),Xzt=Ys().f;Zzt({target:"Reflect",stat:!0},{deleteProperty:function(t,r){var n=Xzt(Kzt(t),r);return n&&!n.configurable?!1:delete t[r]}})});var RK=N((arn,OCe)=>{"use strict";u();var ACe=Wn();OCe.exports=function(e){return e!==void 0&&(ACe(e,"value")||ACe(e,"writable"))}});var DCe=N(()=>{"use strict";u();var Jzt=ce(),Qzt=cr(),e8t=Qr(),t8t=dr(),r8t=RK(),n8t=Ys(),o8t=gs();function PCe(e,t){var r=arguments.length<3?e:arguments[2],n,o;if(t8t(e)===r)return e[t];if(n=n8t.f(e,t),n)return r8t(n)?n.value:n.get===void 0?void 0:Qzt(n.get,r);if(e8t(o=o8t(e)))return PCe(o,t,r)}Jzt({target:"Reflect",stat:!0},{get:PCe})});var NCe=N(()=>{"use strict";u();var i8t=ce(),a8t=Wr(),s8t=dr(),l8t=Ys();i8t({target:"Reflect",stat:!0,sham:!a8t},{getOwnPropertyDescriptor:function(t,r){return l8t.f(s8t(t),r)}})});var LCe=N(()=>{"use strict";u();var u8t=ce(),c8t=dr(),p8t=gs(),f8t=kL();u8t({target:"Reflect",stat:!0,sham:!f8t},{getPrototypeOf:function(t){return p8t(c8t(t))}})});var kCe=N(()=>{"use strict";u();var d8t=ce();d8t({target:"Reflect",stat:!0},{has:function(t,r){return r in t}})});var RCe=N(()=>{"use strict";u();var h8t=ce(),m8t=dr(),g8t=m3();h8t({target:"Reflect",stat:!0},{isExtensible:function(t){return m8t(t),g8t(t)}})});var jCe=N(()=>{"use strict";u();var v8t=ce(),y8t=mL();v8t({target:"Reflect",stat:!0},{ownKeys:y8t})});var qCe=N(()=>{"use strict";u();var _8t=ce(),b8t=ln(),x8t=dr(),w8t=Sg();_8t({target:"Reflect",stat:!0,sham:!w8t},{preventExtensions:function(t){x8t(t);try{var r=b8t("Object","preventExtensions");return r&&r(t),!0}catch(n){return!1}}})});var VCe=N(()=>{"use strict";u();var E8t=ce(),S8t=cr(),T8t=dr(),zCe=Qr(),I8t=RK(),M8t=Gt(),jK=Ei(),FCe=Ys(),C8t=gs(),UCe=mc();function BCe(e,t,r){var n=arguments.length<4?e:arguments[3],o=FCe.f(T8t(e),t),i,a,c;if(!o){if(zCe(a=C8t(e)))return BCe(a,t,r,n);o=UCe(0)}if(I8t(o)){if(o.writable===!1||!zCe(n))return!1;if(i=FCe.f(n,t)){if(i.get||i.set||i.writable===!1)return!1;i.value=r,jK.f(n,t,i)}else jK.f(n,t,UCe(0,r))}else{if(c=o.set,c===void 0)return!1;S8t(c,n,r)}return!0}var A8t=M8t(function(){var e=function(){},t=jK.f(new e,"a",{configurable:!0});return Reflect.set(e.prototype,"a",1,t)!==!1});E8t({target:"Reflect",stat:!0,forced:A8t},{set:BCe})});var HCe=N(()=>{"use strict";u();var O8t=ce(),P8t=dr(),D8t=G$(),GCe=Kp();GCe&&O8t({target:"Reflect",stat:!0},{setPrototypeOf:function(t,r){P8t(t),D8t(r);try{return GCe(t,r),!0}catch(n){return!1}}})});var $Ce=N(()=>{"use strict";u();var N8t=ce(),L8t=ur(),k8t=Ru();N8t({global:!0},{Reflect:{}});k8t(L8t.Reflect,"Reflect",!0)});var zC=N((qrn,WCe)=>{"use strict";u();var R8t=Qr(),j8t=wl(),q8t=nn(),z8t=q8t("match");WCe.exports=function(e){var t;return R8t(e)&&((t=e[z8t])!==void 0?!!t:j8t(e)==="RegExp")}});var k3=N((Frn,YCe)=>{"use strict";u();var F8t=dr();YCe.exports=function(){var e=F8t(this),t="";return e.hasIndices&&(t+="d"),e.global&&(t+="g"),e.ignoreCase&&(t+="i"),e.multiline&&(t+="m"),e.dotAll&&(t+="s"),e.unicode&&(t+="u"),e.unicodeSets&&(t+="v"),e.sticky&&(t+="y"),t}});var yE=N((Brn,KCe)=>{"use strict";u();var U8t=cr(),B8t=Wn(),V8t=El(),G8t=k3(),ZCe=RegExp.prototype;KCe.exports=function(e){var t=e.flags;return t===void 0&&!("flags"in ZCe)&&!B8t(e,"flags")&&V8t(ZCe,e)?U8t(G8t,e):t}});var FC=N((Grn,XCe)=>{"use strict";u();var qK=Gt(),H8t=ur(),zK=H8t.RegExp,FK=qK(function(){var e=zK("a","y");return e.lastIndex=2,e.exec("abcd")!==null}),$8t=FK||qK(function(){return!zK("a","y").sticky}),W8t=FK||qK(function(){var e=zK("^r","gy");return e.lastIndex=2,e.exec("str")!==null});XCe.exports={BROKEN_CARET:W8t,MISSED_STICKY:$8t,UNSUPPORTED_Y:FK}});var R3=N(($rn,JCe)=>{"use strict";u();var Y8t=Gt(),Z8t=ur(),K8t=Z8t.RegExp;JCe.exports=Y8t(function(){var e=K8t(".","s");return!(e.dotAll&&e.test(`
`)&&e.flags==="s")})});var UK=N((Yrn,QCe)=>{"use strict";u();var X8t=Gt(),J8t=ur(),Q8t=J8t.RegExp;QCe.exports=X8t(function(){var e=Q8t("(?<a>b)","g");return e.exec("b").groups.a!=="b"||"b".replace(e,"$<a>c")!=="bc"})});var uAe=N(()=>{"use strict";u();var eFt=Wr(),HK=ur(),UC=Lt(),tFt=Hw(),rFt=by(),nFt=ms(),oFt=La(),iFt=gy().f,eAe=El(),aFt=zC(),tAe=Sn(),sFt=yE(),iAe=FC(),lFt=H$(),uFt=ti(),cFt=Gt(),pFt=Wn(),fFt=Ho().enforce,dFt=Iy(),hFt=nn(),aAe=R3(),sAe=UK(),mFt=hFt("match"),jy=HK.RegExp,_E=jy.prototype,gFt=HK.SyntaxError,vFt=UC(_E.exec),j3=UC("".charAt),rAe=UC("".replace),nAe=UC("".indexOf),oAe=UC("".slice),yFt=/^\?<[^\s\d!#%&*+<=>@^][^\s!#%&*+<=>@^]*>/,I_=/a/g,BK=/a/g,_Ft=new jy(I_)!==I_,lAe=iAe.MISSED_STICKY,bFt=iAe.UNSUPPORTED_Y,xFt=eFt&&(!_Ft||lAe||aAe||sAe||cFt(function(){return BK[mFt]=!1,jy(I_)!==I_||jy(BK)===BK||String(jy(I_,"i"))!=="/a/i"})),wFt=function(e){for(var t=e.length,r=0,n="",o=!1,i;r<=t;r++){if(i=j3(e,r),i==="\\"){n+=i+j3(e,++r);continue}!o&&i==="."?n+="[\\s\\S]":(i==="["?o=!0:i==="]"&&(o=!1),n+=i)}return n},EFt=function(e){for(var t=e.length,r=0,n="",o=[],i=oFt(null),a=!1,c=!1,h=0,m="",y;r<=t;r++){if(y=j3(e,r),y==="\\")y+=j3(e,++r);else if(y==="]")a=!1;else if(!a)switch(!0){case y==="[":a=!0;break;case y==="(":if(n+=y,oAe(e,r+1,r+3)==="?:")continue;vFt(yFt,oAe(e,r+1))&&(r+=2,c=!0),h++;continue;case y===">"&&c:if(m===""||pFt(i,m))throw new gFt("Invalid capture group name");i[m]=!0,o[o.length]=[m,h],c=!1,m="";continue}c?m+=y:n+=y}return[n,o]};if(tFt("RegExp",xFt)){for(Ry=function(t,r){var n=eAe(_E,this),o=aFt(t),i=r===void 0,a=[],c=t,h,m,y,w,E,A;if(!n&&o&&i&&t.constructor===Ry)return t;if((o||eAe(_E,t))&&(t=t.source,i&&(r=sFt(c))),t=t===void 0?"":tAe(t),r=r===void 0?"":tAe(r),c=t,aAe&&"dotAll"in I_&&(m=!!r&&nAe(r,"s")>-1,m&&(r=rAe(r,/s/g,""))),h=r,lAe&&"sticky"in I_&&(y=!!r&&nAe(r,"y")>-1,y&&bFt&&(r=rAe(r,/y/g,""))),sAe&&(w=EFt(t),t=w[0],a=w[1]),E=rFt(jy(t,r),n?this:_E,Ry),(m||y||a.length)&&(A=fFt(E),m&&(A.dotAll=!0,A.raw=Ry(wFt(t),h)),y&&(A.sticky=!0),a.length&&(A.groups=a)),t!==c)try{nFt(E,"source",c===""?"(?:)":c)}catch(P){}return E},VK=iFt(jy),GK=0;VK.length>GK;)lFt(Ry,jy,VK[GK++]);_E.constructor=Ry,Ry.prototype=_E,uFt(HK,"RegExp",Ry,{constructor:!0})}var Ry,VK,GK;dFt("RegExp")});var BC=N((Qrn,cAe)=>{"use strict";u();var SFt=TypeError;cAe.exports=function(e){if(typeof e=="string")return e;throw new SFt("Argument is not a string")}});var ZK=N(()=>{"use strict";u();var TFt=ce(),VC=Lt(),IFt=BC(),MFt=Wn(),pAe=yC().start,CFt=x_(),AFt=Array,fAe=RegExp.escape,dAe=VC("".charAt),YK=VC("".charCodeAt),OFt=VC(1.1.toString),PFt=VC([].join),mAe=/^[0-9a-z]/i,DFt=/^[$()*+./?[\\\]^{|}]/,NFt=RegExp("^[!\"#%&',\\-:;<=>@`~"+CFt+"]"),$K=VC(mAe.exec),hAe={"\t":"t","\n":"n","\x0B":"v","\f":"f","\r":"r"},WK=function(e){var t=OFt(YK(e,0),16);return t.length<3?"\\x"+pAe(t,2,"0"):"\\u"+pAe(t,4,"0")},LFt=!fAe||fAe("ab")!=="\\x61b";TFt({target:"RegExp",stat:!0,forced:LFt},{escape:function(t){IFt(t);for(var r=t.length,n=AFt(r),o=0;o<r;o++){var i=dAe(t,o);if(o===0&&$K(mAe,i))n[o]=WK(i);else if(MFt(hAe,i))n[o]="\\"+hAe[i];else if($K(DFt,i))n[o]="\\"+i;else if($K(NFt,i))n[o]=WK(i);else{var a=YK(i,0);(a&63488)!==55296?n[o]=i:a>=56320||o+1>=r||(YK(t,o+1)&64512)!==56320?n[o]=WK(i):(n[o]=i,n[++o]=dAe(t,o))}}return PFt(n,"")}})});var vAe=N(()=>{"use strict";u();var kFt=Wr(),RFt=R3(),jFt=wl(),qFt=Gi(),zFt=Ho().get,gAe=RegExp.prototype,FFt=TypeError;kFt&&RFt&&qFt(gAe,"dotAll",{configurable:!0,get:function(){if(this!==gAe){if(jFt(this)==="RegExp")return!!zFt(this).dotAll;throw new FFt("Incompatible receiver, RegExp required")}}})});var F3=N((snn,_Ae)=>{"use strict";u();var bE=cr(),z3=Lt(),UFt=Sn(),BFt=k3(),VFt=FC(),GFt=mg(),HFt=La(),$Ft=Ho().get,WFt=R3(),YFt=UK(),ZFt=GFt("native-string-replace",String.prototype.replace),q3=RegExp.prototype.exec,XK=q3,KFt=z3("".charAt),XFt=z3("".indexOf),JFt=z3("".replace),KK=z3("".slice),JK=function(){var e=/a/,t=/b*/g;return bE(q3,e,"a"),bE(q3,t,"a"),e.lastIndex!==0||t.lastIndex!==0}(),yAe=VFt.BROKEN_CARET,QK=/()??/.exec("")[1]!==void 0,QFt=JK||QK||yAe||WFt||YFt;QFt&&(XK=function(t){var r=this,n=$Ft(r),o=UFt(t),i=n.raw,a,c,h,m,y,w,E;if(i)return i.lastIndex=r.lastIndex,a=bE(XK,i,o),r.lastIndex=i.lastIndex,a;var A=n.groups,P=yAe&&r.sticky,j=bE(BFt,r),D=r.source,L=0,z=o;if(P&&(j=JFt(j,"y",""),XFt(j,"g")===-1&&(j+="g"),z=KK(o,r.lastIndex),r.lastIndex>0&&(!r.multiline||r.multiline&&KFt(o,r.lastIndex-1)!==`
`)&&(D="(?: "+D+")",z=" "+z,L++),c=new RegExp("^(?:"+D+")",j)),QK&&(c=new RegExp("^"+D+"$(?!\\s)",j)),JK&&(h=r.lastIndex),m=bE(q3,P?c:r,z),P?m?(m.input=KK(m.input,L),m[0]=KK(m[0],L),m.index=r.lastIndex,r.lastIndex+=m[0].length):r.lastIndex=0:JK&&m&&(r.lastIndex=r.global?m.index+m[0].length:h),QK&&m&&m.length>1&&bE(ZFt,m[0],c,function(){for(y=1;y<arguments.length-2;y++)arguments[y]===void 0&&(m[y]=void 0)}),m&&A)for(m.groups=w=HFt(null),y=0;y<A.length;y++)E=A[y],w[E[0]]=m[E[1]];return m});_Ae.exports=XK});var U3=N(()=>{"use strict";u();var e7t=ce(),bAe=F3();e7t({target:"RegExp",proto:!0,forced:/./.exec!==bAe},{exec:bAe})});var EAe=N(()=>{"use strict";u();var t7t=ur(),r7t=Wr(),n7t=Gi(),o7t=k3(),i7t=Gt(),xAe=t7t.RegExp,wAe=xAe.prototype,a7t=r7t&&i7t(function(){var e=!0;try{xAe(".","d")}catch(h){e=!1}var t={},r="",n=e?"dgimsy":"gimsy",o=function(h,m){Object.defineProperty(t,h,{get:function(){return r+=m,!0}})},i={dotAll:"s",global:"g",ignoreCase:"i",multiline:"m",sticky:"y"};e&&(i.hasIndices="d");for(var a in i)o(a,i[a]);var c=Object.getOwnPropertyDescriptor(wAe,"flags").get.call(t);return c!==n||r!==n});a7t&&n7t(wAe,"flags",{configurable:!0,get:o7t})});var TAe=N(()=>{"use strict";u();var s7t=Wr(),l7t=FC().MISSED_STICKY,u7t=wl(),c7t=Gi(),p7t=Ho().get,SAe=RegExp.prototype,f7t=TypeError;s7t&&l7t&&c7t(SAe,"sticky",{configurable:!0,get:function(){if(this!==SAe){if(u7t(this)==="RegExp")return!!p7t(this).sticky;throw new f7t("Incompatible receiver, RegExp required")}}})});var CAe=N(()=>{"use strict";u();U3();var d7t=ce(),IAe=cr(),h7t=jn(),MAe=dr(),m7t=Sn(),g7t=function(){var e=!1,t=/[ac]/;return t.exec=function(){return e=!0,/./.exec.apply(this,arguments)},t.test("abc")===!0&&e}(),v7t=/./.test;d7t({target:"RegExp",proto:!0,forced:!g7t},{test:function(e){var t=MAe(this),r=m7t(e),n=t.exec;if(!h7t(n))return IAe(v7t,t,r);var o=IAe(n,t,r);return o===null?!1:(MAe(o),!0)}})});var DAe=N(()=>{"use strict";u();var y7t=l_().PROPER,_7t=ti(),b7t=dr(),AAe=Sn(),x7t=Gt(),w7t=yE(),eX="toString",OAe=RegExp.prototype,PAe=OAe[eX],E7t=x7t(function(){return PAe.call({source:"a",flags:"b"})!=="/a/b"}),S7t=y7t&&PAe.name!==eX;(E7t||S7t)&&_7t(OAe,eX,function(){var t=b7t(this),r=AAe(t.source),n=AAe(w7t(t));return"/"+r+"/"+n},{unsafe:!0})});var NAe=N(()=>{"use strict";u();var T7t=bC(),I7t=_Z();T7t("Set",function(e){return function(){return e(this,arguments.length?arguments[0]:void 0)}},I7t)});var LAe=N(()=>{"use strict";u();NAe()});var Xs=N((Onn,kAe)=>{"use strict";u();var tX=Lt(),B3=Set.prototype;kAe.exports={Set,add:tX(B3.add),has:tX(B3.has),remove:tX(B3.delete),proto:B3}});var Tl=N((Dnn,RAe)=>{"use strict";u();var M7t=Xs().has;RAe.exports=function(e){return M7t(e),e}});var Ig=N((Lnn,jAe)=>{"use strict";u();var C7t=cr();jAe.exports=function(e,t,r){for(var n=r?e:e.iterator,o=e.next,i,a;!(i=C7t(o,n)).done;)if(a=t(i.value),a!==void 0)return a}});var xc=N((Rnn,BAe)=>{"use strict";u();var qAe=Lt(),A7t=Ig(),zAe=Xs(),O7t=zAe.Set,FAe=zAe.proto,P7t=qAe(FAe.forEach),UAe=qAe(FAe.keys),D7t=UAe(new O7t).next;BAe.exports=function(e,t,r){return r?A7t({iterator:UAe(e),next:D7t},t):P7t(e,t)}});var V3=N((qnn,GAe)=>{"use strict";u();var VAe=Xs(),N7t=xc(),L7t=VAe.Set,k7t=VAe.add;GAe.exports=function(e){var t=new L7t;return N7t(e,function(r){k7t(t,r)}),t}});var xE=N((Fnn,HAe)=>{"use strict";u();var R7t=nC(),j7t=Xs();HAe.exports=R7t(j7t.proto,"size","get")||function(e){return e.size}});var qy=N((Bnn,XAe)=>{"use strict";u();var $Ae=un(),ZAe=dr(),WAe=cr(),q7t=Vi(),z7t=ra(),YAe="Invalid size",F7t=RangeError,U7t=TypeError,B7t=Math.max,KAe=function(e,t){this.set=e,this.size=B7t(t,0),this.has=$Ae(e.has),this.keys=$Ae(e.keys)};KAe.prototype={getIterator:function(){return z7t(ZAe(WAe(this.keys,this.set)))},includes:function(e){return WAe(this.has,this.set,e)}};XAe.exports=function(e){ZAe(e);var t=+e.size;if(t!==t)throw new U7t(YAe);var r=q7t(t);if(r<0)throw new F7t(YAe);return new KAe(e,r)}});var rX=N((Gnn,eOe)=>{"use strict";u();var V7t=Tl(),QAe=Xs(),G7t=V3(),H7t=xE(),$7t=qy(),W7t=xc(),Y7t=Ig(),Z7t=QAe.has,JAe=QAe.remove;eOe.exports=function(t){var r=V7t(this),n=$7t(t),o=G7t(r);return H7t(r)<=n.size?W7t(r,function(i){n.includes(i)&&JAe(o,i)}):Y7t(n.getIterator(),function(i){Z7t(r,i)&&JAe(o,i)}),o}});var zy=N(($nn,nOe)=>{"use strict";u();var K7t=ln(),tOe=function(e){return{size:e,has:function(){return!1},keys:function(){return{next:function(){return{done:!0}}}}}},rOe=function(e){return{size:e,has:function(){return!0},keys:function(){throw new Error("e")}}};nOe.exports=function(e,t){var r=K7t("Set");try{new r()[e](tOe(0));try{return new r()[e](tOe(-1)),!1}catch(o){if(!t)return!0;try{return new r()[e](rOe(-1/0)),!1}catch(i){var n=new r;return n.add(1),n.add(2),t(n[e](rOe(1/0)))}}}catch(o){return!1}}});var nX=N(()=>{"use strict";u();var X7t=ce(),J7t=rX(),Q7t=zy(),e9t=!Q7t("difference",function(e){return e.size===0});X7t({target:"Set",proto:!0,real:!0,forced:e9t},{difference:J7t})});var iX=N((Xnn,iOe)=>{"use strict";u();var t9t=Tl(),oX=Xs(),r9t=xE(),n9t=qy(),o9t=xc(),i9t=Ig(),a9t=oX.Set,oOe=oX.add,s9t=oX.has;iOe.exports=function(t){var r=t9t(this),n=n9t(t),o=new a9t;return r9t(r)>n.size?i9t(n.getIterator(),function(i){s9t(r,i)&&oOe(o,i)}):o9t(r,function(i){n.includes(i)&&oOe(o,i)}),o}});var aX=N(()=>{"use strict";u();var l9t=ce(),u9t=Gt(),c9t=iX(),p9t=zy(),f9t=!p9t("intersection",function(e){return e.size===2&&e.has(1)&&e.has(2)})||u9t(function(){return String(Array.from(new Set([1,2,3]).intersection(new Set([3,2]))))!=="3,2"});l9t({target:"Set",proto:!0,real:!0,forced:f9t},{intersection:c9t})});var sX=N((ron,aOe)=>{"use strict";u();var d9t=Tl(),h9t=Xs().has,m9t=xE(),g9t=qy(),v9t=xc(),y9t=Ig(),_9t=Ks();aOe.exports=function(t){var r=d9t(this),n=g9t(t);if(m9t(r)<=n.size)return v9t(r,function(i){if(n.includes(i))return!1},!0)!==!1;var o=n.getIterator();return y9t(o,function(i){if(h9t(r,i))return _9t(o,"normal",!1)})!==!1}});var lX=N(()=>{"use strict";u();var b9t=ce(),x9t=sX(),w9t=zy(),E9t=!w9t("isDisjointFrom",function(e){return!e});b9t({target:"Set",proto:!0,real:!0,forced:E9t},{isDisjointFrom:x9t})});var uX=N((son,sOe)=>{"use strict";u();var S9t=Tl(),T9t=xE(),I9t=xc(),M9t=qy();sOe.exports=function(t){var r=S9t(this),n=M9t(t);return T9t(r)>n.size?!1:I9t(r,function(o){if(!n.includes(o))return!1},!0)!==!1}});var cX=N(()=>{"use strict";u();var C9t=ce(),A9t=uX(),O9t=zy(),P9t=!O9t("isSubsetOf",function(e){return e});C9t({target:"Set",proto:!0,real:!0,forced:P9t},{isSubsetOf:A9t})});var pX=N((fon,lOe)=>{"use strict";u();var D9t=Tl(),N9t=Xs().has,L9t=xE(),k9t=qy(),R9t=Ig(),j9t=Ks();lOe.exports=function(t){var r=D9t(this),n=k9t(t);if(L9t(r)<n.size)return!1;var o=n.getIterator();return R9t(o,function(i){if(!N9t(r,i))return j9t(o,"normal",!1)})!==!1}});var fX=N(()=>{"use strict";u();var q9t=ce(),z9t=pX(),F9t=zy(),U9t=!F9t("isSupersetOf",function(e){return!e});q9t({target:"Set",proto:!0,real:!0,forced:U9t},{isSupersetOf:z9t})});var hX=N((von,uOe)=>{"use strict";u();var B9t=Tl(),dX=Xs(),V9t=V3(),G9t=qy(),H9t=Ig(),$9t=dX.add,W9t=dX.has,Y9t=dX.remove;uOe.exports=function(t){var r=B9t(this),n=G9t(t).getIterator(),o=V9t(r);return H9t(n,function(i){W9t(r,i)?Y9t(o,i):$9t(o,i)}),o}});var mX=N(()=>{"use strict";u();var Z9t=ce(),K9t=hX(),X9t=zy();Z9t({target:"Set",proto:!0,real:!0,forced:!X9t("symmetricDifference")},{symmetricDifference:K9t})});var gX=N((won,cOe)=>{"use strict";u();var J9t=Tl(),Q9t=Xs().add,eUt=V3(),tUt=qy(),rUt=Ig();cOe.exports=function(t){var r=J9t(this),n=tUt(t).getIterator(),o=eUt(r);return rUt(n,function(i){Q9t(o,i)}),o}});var vX=N(()=>{"use strict";u();var nUt=ce(),oUt=gX(),iUt=zy();nUt({target:"Set",proto:!0,real:!0,forced:!iUt("union")},{union:oUt})});var pOe=N(()=>{"use strict";u();var aUt=ce(),sUt=Lt(),lUt=Ni(),uUt=Vi(),cUt=Sn(),pUt=Gt(),fUt=sUt("".charAt),dUt=pUt(function(){return"\uD842\uDFB7".at(-2)!=="\uD842"});aUt({target:"String",proto:!0,forced:dUt},{at:function(t){var r=cUt(lUt(this)),n=r.length,o=uUt(t),i=o>=0?o:n+o;return i<0||i>=n?void 0:fUt(r,i)}})});var M_=N((Oon,hOe)=>{"use strict";u();var yX=Lt(),hUt=Vi(),mUt=Sn(),gUt=Ni(),vUt=yX("".charAt),fOe=yX("".charCodeAt),yUt=yX("".slice),dOe=function(e){return function(t,r){var n=mUt(gUt(t)),o=hUt(r),i=n.length,a,c;return o<0||o>=i?e?"":void 0:(a=fOe(n,o),a<55296||a>56319||o+1===i||(c=fOe(n,o+1))<56320||c>57343?e?vUt(n,o):a:e?yUt(n,o,o+2):(a-55296<<10)+(c-56320)+65536)}};hOe.exports={codeAt:dOe(!1),charAt:dOe(!0)}});var mOe=N(()=>{"use strict";u();var _Ut=ce(),bUt=M_().codeAt;_Ut({target:"String",proto:!0},{codePointAt:function(t){return bUt(this,t)}})});var G3=N((kon,gOe)=>{"use strict";u();var xUt=zC(),wUt=TypeError;gOe.exports=function(e){if(xUt(e))throw new wUt("The method doesn't accept regular expressions");return e}});var H3=N((jon,vOe)=>{"use strict";u();var EUt=nn(),SUt=EUt("match");vOe.exports=function(e){var t=/./;try{"/./"[e](t)}catch(r){try{return t[SUt]=!1,"/./"[e](t)}catch(n){}}return!1}});var bOe=N(()=>{"use strict";u();var TUt=ce(),IUt=vy(),MUt=Ys().f,CUt=vc(),yOe=Sn(),AUt=G3(),OUt=Ni(),PUt=H3(),DUt=So(),NUt=IUt("".slice),LUt=Math.min,_Oe=PUt("endsWith"),kUt=!DUt&&!_Oe&&!!function(){var e=MUt(String.prototype,"endsWith");return e&&!e.writable}();TUt({target:"String",proto:!0,forced:!kUt&&!_Oe},{endsWith:function(t){var r=yOe(OUt(this));AUt(t);var n=arguments.length>1?arguments[1]:void 0,o=r.length,i=n===void 0?o:LUt(CUt(n),o),a=yOe(t);return NUt(r,i-a.length,i)===a}})});var _X=N(()=>{"use strict";u();var RUt=ce(),jUt=Lt(),qUt=md(),zUt=RangeError,xOe=String.fromCharCode,wOe=String.fromCodePoint,FUt=jUt([].join),UUt=!!wOe&&wOe.length!==1;RUt({target:"String",stat:!0,arity:1,forced:UUt},{fromCodePoint:function(t){for(var r=[],n=arguments.length,o=0,i;n>o;){if(i=+arguments[o++],qUt(i,1114111)!==i)throw new zUt(i+" is not a valid code point");r[o]=i<65536?xOe(i):xOe(((i-=65536)>>10)+55296,i%1024+56320)}return FUt(r,"")}})});var SOe=N(()=>{"use strict";u();var BUt=ce(),VUt=Lt(),GUt=G3(),HUt=Ni(),EOe=Sn(),$Ut=H3(),WUt=VUt("".indexOf);BUt({target:"String",proto:!0,forced:!$Ut("includes")},{includes:function(t){return!!~WUt(EOe(HUt(this)),EOe(GUt(t)),arguments.length>1?arguments[1]:void 0)}})});var bX=N(()=>{"use strict";u();var YUt=ce(),ZUt=Lt(),KUt=Ni(),XUt=Sn(),TOe=ZUt("".charCodeAt);YUt({target:"String",proto:!0},{isWellFormed:function(){for(var t=XUt(KUt(this)),r=t.length,n=0;n<r;n++){var o=TOe(t,n);if((o&63488)===55296&&(o>=56320||++n>=r||(TOe(t,n)&64512)!==56320))return!1}return!0}})});var xX=N(()=>{"use strict";u();var JUt=M_().charAt,QUt=Sn(),MOe=Ho(),eBt=GL(),IOe=Ns(),COe="String Iterator",tBt=MOe.set,rBt=MOe.getterFor(COe);eBt(String,"String",function(e){tBt(this,{type:COe,string:QUt(e),index:0})},function(){var t=rBt(this),r=t.string,n=t.index,o;return n>=r.length?IOe(void 0,!0):(o=JUt(r,n),t.index+=o.length,IOe(o,!1))})});var GC=N((ein,NOe)=>{"use strict";u();U3();var AOe=cr(),OOe=ti(),nBt=F3(),POe=Gt(),DOe=nn(),oBt=ms(),iBt=DOe("species"),wX=RegExp.prototype;NOe.exports=function(e,t,r,n){var o=DOe(e),i=!POe(function(){var m={};return m[o]=function(){return 7},""[e](m)!==7}),a=i&&!POe(function(){var m=!1,y=/a/;return e==="split"&&(y={},y.constructor={},y.constructor[iBt]=function(){return y},y.flags="",y[o]=/./[o]),y.exec=function(){return m=!0,null},y[o](""),!m});if(!i||!a||r){var c=/./[o],h=t(o,""[e],function(m,y,w,E,A){var P=y.exec;return P===nBt||P===wX.exec?i&&!A?{done:!0,value:AOe(c,y,w,E)}:{done:!0,value:AOe(m,w,y,E)}:{done:!1}});OOe(String.prototype,e,h[0]),OOe(wX,o,h[1])}n&&oBt(wX[o],"sham",!0)}});var HC=N((rin,LOe)=>{"use strict";u();var aBt=M_().charAt;LOe.exports=function(e,t,r){return t+(r?aBt(e,t).length:1)}});var wE=N((oin,ROe)=>{"use strict";u();var kOe=cr(),sBt=dr(),lBt=jn(),uBt=wl(),cBt=F3(),pBt=TypeError;ROe.exports=function(e,t){var r=e.exec;if(lBt(r)){var n=kOe(r,e,t);return n!==null&&sBt(n),n}if(uBt(e)==="RegExp")return kOe(cBt,e,t);throw new pBt("RegExp#exec called on incompatible receiver")}});var qOe=N(()=>{"use strict";u();var fBt=cr(),dBt=GC(),hBt=dr(),mBt=Qr(),gBt=vc(),EX=Sn(),vBt=Ni(),yBt=Na(),_Bt=HC(),jOe=wE();dBt("match",function(e,t,r){return[function(o){var i=vBt(this),a=mBt(o)?yBt(o,e):void 0;return a?fBt(a,o,i):new RegExp(o)[e](EX(i))},function(n){var o=hBt(this),i=EX(n),a=r(t,o,i);if(a.done)return a.value;if(!o.global)return jOe(o,i);var c=o.unicode;o.lastIndex=0;for(var h=[],m=0,y;(y=jOe(o,i))!==null;){var w=EX(y[0]);h[m]=w,w===""&&(o.lastIndex=_Bt(i,gBt(o.lastIndex),c)),m++}return m===0?null:h}]})});var CX=N(()=>{"use strict";u();var bBt=ce(),zOe=cr(),BOe=vy(),xBt=Sy(),$3=Ns(),FOe=Ni(),VOe=vc(),$C=Sn(),wBt=dr(),EBt=Qr(),SBt=wl(),TBt=zC(),GOe=yE(),IBt=Na(),MBt=ti(),CBt=Gt(),ABt=nn(),OBt=PC(),PBt=HC(),DBt=wE(),HOe=Ho(),TX=So(),W3=ABt("matchAll"),$Oe="RegExp String",WOe=$Oe+" Iterator",NBt=HOe.set,LBt=HOe.getterFor(WOe),UOe=RegExp.prototype,kBt=TypeError,IX=BOe("".indexOf),Y3=BOe("".matchAll),SX=!!Y3&&!CBt(function(){Y3("a",/./)}),RBt=xBt(function(t,r,n,o){NBt(this,{type:WOe,regexp:t,string:r,global:n,unicode:o,done:!1})},$Oe,function(){var t=LBt(this);if(t.done)return $3(void 0,!0);var r=t.regexp,n=t.string,o=DBt(r,n);return o===null?(t.done=!0,$3(void 0,!0)):t.global?($C(o[0])===""&&(r.lastIndex=PBt(n,VOe(r.lastIndex),t.unicode)),$3(o,!1)):(t.done=!0,$3(o,!1))}),MX=function(e){var t=wBt(this),r=$C(e),n=OBt(t,RegExp),o=$C(GOe(t)),i,a,c;return i=new n(n===RegExp?t.source:t,o),a=!!~IX(o,"g"),c=!!~IX(o,"u"),i.lastIndex=VOe(t.lastIndex),new RBt(i,r,a,c)};bBt({target:"String",proto:!0,forced:SX},{matchAll:function(t){var r=FOe(this),n,o,i,a;if(EBt(t)){if(TBt(t)&&(n=$C(FOe(GOe(t))),!~IX(n,"g")))throw new kBt("`.matchAll` does not allow non-global regexes");if(SX)return Y3(r,t);if(i=IBt(t,W3),i===void 0&&TX&&SBt(t)==="RegExp"&&(i=MX),i)return zOe(i,t,r)}else if(SX)return Y3(r,t);return o=$C(r),a=new RegExp(t,"g"),TX?zOe(MX,a,o):a[W3](o)}});TX||W3 in UOe||MBt(UOe,W3,MX)});var AX=N((fin,YOe)=>{"use strict";u();var jBt=pd();YOe.exports=/Version\/10(?:\.\d+){1,2}(?: [\w./]+)?(?: Mobile\/\w+)? Safari\//.test(jBt)});var ZOe=N(()=>{"use strict";u();var qBt=ce(),zBt=yC().end,FBt=AX();qBt({target:"String",proto:!0,forced:FBt},{padEnd:function(t){return zBt(this,t,arguments.length>1?arguments[1]:void 0)}})});var KOe=N(()=>{"use strict";u();var UBt=ce(),BBt=yC().start,VBt=AX();UBt({target:"String",proto:!0,forced:VBt},{padStart:function(t){return BBt(this,t,arguments.length>1?arguments[1]:void 0)}})});var ePe=N(()=>{"use strict";u();var GBt=ce(),QOe=Lt(),HBt=hs(),$Bt=Jn(),XOe=Sn(),WBt=ho(),JOe=QOe([].push),YBt=QOe([].join);GBt({target:"String",stat:!0},{raw:function(t){var r=HBt($Bt(t).raw),n=WBt(r);if(!n)return"";for(var o=arguments.length,i=[],a=0;;){if(JOe(i,XOe(r[a++])),a===n)return YBt(i,"");a<o&&JOe(i,XOe(arguments[a]))}}})});var tPe=N(()=>{"use strict";u();var ZBt=ce(),KBt=vC();ZBt({target:"String",proto:!0},{repeat:KBt})});var NX=N((Iin,rPe)=>{"use strict";u();var DX=Lt(),XBt=Jn(),JBt=Math.floor,OX=DX("".charAt),QBt=DX("".replace),PX=DX("".slice),eVt=/\$([$&'`]|\d{1,2}|<[^>]*>)/g,tVt=/\$([$&'`]|\d{1,2})/g;rPe.exports=function(e,t,r,n,o,i){var a=r+e.length,c=n.length,h=tVt;return o!==void 0&&(o=XBt(o),h=eVt),QBt(i,h,function(m,y){var w;switch(OX(y,0)){case"$":return"$";case"&":return e;case"`":return PX(t,0,r);case"'":return PX(t,a);case"<":w=o[PX(y,1,-1)];break;default:var E=+y;if(E===0)return m;if(E>c){var A=JBt(E/10);return A===0?m:A<=c?n[A-1]===void 0?OX(y,1):n[A-1]+OX(y,1):m}w=n[E-1]}return w===void 0?"":w})}});var sPe=N(()=>{"use strict";u();var rVt=Sl(),nPe=cr(),Z3=Lt(),nVt=GC(),oVt=Gt(),iVt=dr(),aVt=jn(),sVt=Qr(),lVt=Vi(),uVt=vc(),EE=Sn(),cVt=Ni(),pVt=HC(),fVt=Na(),dVt=NX(),hVt=wE(),mVt=nn(),kX=mVt("replace"),gVt=Math.max,vVt=Math.min,yVt=Z3([].concat),LX=Z3([].push),oPe=Z3("".indexOf),iPe=Z3("".slice),_Vt=function(e){return e===void 0?e:String(e)},bVt=function(){return"a".replace(/./,"$0")==="$0"}(),aPe=function(){return /./[kX]?/./[kX]("a","$0")==="":!1}(),xVt=!oVt(function(){var e=/./;return e.exec=function(){var t=[];return t.groups={a:"7"},t},"".replace(e,"$<a>")!=="7"});nVt("replace",function(e,t,r){var n=aPe?"$":"$0";return[function(i,a){var c=cVt(this),h=sVt(i)?fVt(i,kX):void 0;return h?nPe(h,i,c,a):nPe(t,EE(c),i,a)},function(o,i){var a=iVt(this),c=EE(o);if(typeof i=="string"&&oPe(i,n)===-1&&oPe(i,"$<")===-1){var h=r(t,a,c,i);if(h.done)return h.value}var m=aVt(i);m||(i=EE(i));var y=a.global,w;y&&(w=a.unicode,a.lastIndex=0);for(var E=[],A;A=hVt(a,c),!(A===null||(LX(E,A),!y));){var P=EE(A[0]);P===""&&(a.lastIndex=pVt(c,uVt(a.lastIndex),w))}for(var j="",D=0,L=0;L<E.length;L++){A=E[L];for(var z=EE(A[0]),B=gVt(vVt(lVt(A.index),c.length),0),G=[],Z,K=1;K<A.length;K++)LX(G,_Vt(A[K]));var te=A.groups;if(m){var se=yVt([z],G,B,c);te!==void 0&&LX(se,te),Z=EE(rVt(i,void 0,se))}else Z=dVt(z,c,B,G,te,i);B>=D&&(j+=iPe(c,D,B)+Z,D=B+z.length)}return j+iPe(c,D)}]},!xVt||!bVt||aPe)});var qX=N(()=>{"use strict";u();var wVt=ce(),EVt=cr(),jX=Lt(),lPe=Ni(),SVt=jn(),TVt=Qr(),IVt=zC(),SE=Sn(),MVt=Na(),CVt=yE(),AVt=NX(),OVt=nn(),PVt=So(),DVt=OVt("replace"),NVt=TypeError,RX=jX("".indexOf),LVt=jX("".replace),uPe=jX("".slice),kVt=Math.max;wVt({target:"String",proto:!0},{replaceAll:function(t,r){var n=lPe(this),o,i,a,c,h,m,y,w,E,A,P=0,j="";if(TVt(t)){if(o=IVt(t),o&&(i=SE(lPe(CVt(t))),!~RX(i,"g")))throw new NVt("`.replaceAll` does not allow non-global regexes");if(a=MVt(t,DVt),a)return EVt(a,t,n,r);if(PVt&&o)return LVt(SE(n),t,r)}for(c=SE(n),h=SE(t),m=SVt(r),m||(r=SE(r)),y=h.length,w=kVt(1,y),E=RX(c,h);E!==-1;)A=m?SE(r(h,E,c)):AVt(h,c,E,[],void 0,r),j+=uPe(c,P,E)+A,P=E+y,E=E+w>c.length?-1:RX(c,h,E+w);return P<c.length&&(j+=uPe(c,P)),j}})});var fPe=N(()=>{"use strict";u();var RVt=cr(),jVt=GC(),qVt=dr(),zVt=Qr(),FVt=Ni(),cPe=T3(),pPe=Sn(),UVt=Na(),BVt=wE();jVt("search",function(e,t,r){return[function(o){var i=FVt(this),a=zVt(o)?UVt(o,e):void 0;return a?RVt(a,o,i):new RegExp(o)[e](pPe(i))},function(n){var o=qVt(this),i=pPe(n),a=r(t,o,i);if(a.done)return a.value;var c=o.lastIndex;cPe(c,0)||(o.lastIndex=0);var h=BVt(o,i);return cPe(o.lastIndex,c)||(o.lastIndex=c),h===null?-1:h.index}]})});var vPe=N(()=>{"use strict";u();var zX=cr(),gPe=Lt(),VVt=GC(),GVt=dr(),HVt=Qr(),$Vt=Ni(),WVt=PC(),YVt=HC(),ZVt=vc(),dPe=Sn(),KVt=Na(),hPe=wE(),XVt=FC(),JVt=Gt(),TE=XVt.UNSUPPORTED_Y,QVt=4294967295,eGt=Math.min,FX=gPe([].push),UX=gPe("".slice),tGt=!JVt(function(){var e=/(?:)/,t=e.exec;e.exec=function(){return t.apply(this,arguments)};var r="ab".split(e);return r.length!==2||r[0]!=="a"||r[1]!=="b"}),mPe="abbc".split(/(b)*/)[1]==="c"||"test".split(/(?:)/,-1).length!==4||"ab".split(/(?:ab)*/).length!==2||".".split(/(.?)(.?)/).length!==4||".".split(/()()/).length>1||"".split(/.?/).length;VVt("split",function(e,t,r){var n="0".split(void 0,0).length?function(o,i){return o===void 0&&i===0?[]:zX(t,this,o,i)}:t;return[function(i,a){var c=$Vt(this),h=HVt(i)?KVt(i,e):void 0;return h?zX(h,i,c,a):zX(n,dPe(c),i,a)},function(o,i){var a=GVt(this),c=dPe(o);if(!mPe){var h=r(n,a,c,i,n!==t);if(h.done)return h.value}var m=WVt(a,RegExp),y=a.unicode,w=(a.ignoreCase?"i":"")+(a.multiline?"m":"")+(a.unicode?"u":"")+(TE?"g":"y"),E=new m(TE?"^(?:"+a.source+")":a,w),A=i===void 0?QVt:i>>>0;if(A===0)return[];if(c.length===0)return hPe(E,c)===null?[c]:[];for(var P=0,j=0,D=[];j<c.length;){E.lastIndex=TE?0:j;var L=hPe(E,TE?UX(c,j):c),z;if(L===null||(z=eGt(ZVt(E.lastIndex+(TE?j:0)),c.length))===P)j=YVt(c,j,y);else{if(FX(D,UX(c,P,j)),D.length===A)return D;for(var B=1;B<=L.length-1;B++)if(FX(D,L[B]),D.length===A)return D;j=P=z}}return FX(D,UX(c,P)),D}]},mPe||!tGt,TE)});var bPe=N(()=>{"use strict";u();var rGt=ce(),nGt=vy(),oGt=Ys().f,iGt=vc(),yPe=Sn(),aGt=G3(),sGt=Ni(),lGt=H3(),uGt=So(),cGt=nGt("".slice),pGt=Math.min,_Pe=lGt("startsWith"),fGt=!uGt&&!_Pe&&!!function(){var e=oGt(String.prototype,"startsWith");return e&&!e.writable}();rGt({target:"String",proto:!0,forced:!fGt&&!_Pe},{startsWith:function(t){var r=yPe(sGt(this));aGt(t);var n=iGt(pGt(arguments.length>1?arguments[1]:void 0,r.length)),o=yPe(t);return cGt(r,n,n+o.length)===o}})});var wPe=N(()=>{"use strict";u();var dGt=ce(),hGt=Lt(),mGt=Ni(),xPe=Vi(),gGt=Sn(),vGt=hGt("".slice),yGt=Math.max,_Gt=Math.min,bGt=!"".substr||"ab".substr(-1)!=="b";dGt({target:"String",proto:!0,forced:bGt},{substr:function(t,r){var n=gGt(mGt(this)),o=n.length,i=xPe(t),a,c;return i===1/0&&(i=0),i<0&&(i=yGt(o+i,0)),a=r===void 0?o:xPe(r),a<=0||a===1/0?"":(c=_Gt(i+a,o),i>=c?"":vGt(n,i,c))}})});var HX=N(()=>{"use strict";u();var xGt=ce(),TPe=cr(),GX=Lt(),wGt=Ni(),EGt=Sn(),SGt=Gt(),TGt=Array,BX=GX("".charAt),EPe=GX("".charCodeAt),IGt=GX([].join),VX="".toWellFormed,MGt="\uFFFD",SPe=VX&&SGt(function(){return TPe(VX,1)!=="1"});xGt({target:"String",proto:!0,forced:SPe},{toWellFormed:function(){var t=EGt(wGt(this));if(SPe)return TPe(VX,t);for(var r=t.length,n=TGt(r),o=0;o<r;o++){var i=EPe(t,o);(i&63488)!==55296?n[o]=BX(t,o):i>=56320||o+1>=r||(EPe(t,o+1)&64512)!==56320?n[o]=MGt:(n[o]=BX(t,o),n[++o]=BX(t,o))}return IGt(n,"")}})});var K3=N((Zin,CPe)=>{"use strict";u();var CGt=l_().PROPER,AGt=Gt(),IPe=x_(),MPe="\u200B\x85\u180E";CPe.exports=function(e){return AGt(function(){return!!IPe[e]()||MPe[e]()!==MPe||CGt&&IPe[e].name!==e})}});var APe=N(()=>{"use strict";u();var OGt=ce(),PGt=w_().trim,DGt=K3();OGt({target:"String",proto:!0,forced:DGt("trim")},{trim:function(){return PGt(this)}})});var $X=N((ean,OPe)=>{"use strict";u();var NGt=w_().end,LGt=K3();OPe.exports=LGt("trimEnd")?function(){return NGt(this)}:"".trimEnd});var DPe=N(()=>{"use strict";u();var kGt=ce(),PPe=$X();kGt({target:"String",proto:!0,name:"trimEnd",forced:"".trimRight!==PPe},{trimRight:PPe})});var LPe=N(()=>{"use strict";u();DPe();var RGt=ce(),NPe=$X();RGt({target:"String",proto:!0,name:"trimEnd",forced:"".trimEnd!==NPe},{trimEnd:NPe})});var WX=N((lan,kPe)=>{"use strict";u();var jGt=w_().start,qGt=K3();kPe.exports=qGt("trimStart")?function(){return jGt(this)}:"".trimStart});var jPe=N(()=>{"use strict";u();var zGt=ce(),RPe=WX();zGt({target:"String",proto:!0,name:"trimStart",forced:"".trimLeft!==RPe},{trimLeft:RPe})});var zPe=N(()=>{"use strict";u();jPe();var FGt=ce(),qPe=WX();FGt({target:"String",proto:!0,name:"trimStart",forced:"".trimStart!==qPe},{trimStart:qPe})});var wc=N((gan,UPe)=>{"use strict";u();var UGt=Lt(),BGt=Ni(),FPe=Sn(),VGt=/"/g,GGt=UGt("".replace);UPe.exports=function(e,t,r,n){var o=FPe(BGt(e)),i="<"+t;return r!==""&&(i+=" "+r+"=\""+GGt(FPe(n),VGt,"&quot;")+"\""),i+">"+o+"</"+t+">"}});var Ec=N((yan,BPe)=>{"use strict";u();var HGt=Gt();BPe.exports=function(e){return HGt(function(){var t=""[e]("\"");return t!==t.toLowerCase()||t.split("\"").length>3})}});var VPe=N(()=>{"use strict";u();var $Gt=ce(),WGt=wc(),YGt=Ec();$Gt({target:"String",proto:!0,forced:YGt("anchor")},{anchor:function(t){return WGt(this,"a","name",t)}})});var GPe=N(()=>{"use strict";u();var ZGt=ce(),KGt=wc(),XGt=Ec();ZGt({target:"String",proto:!0,forced:XGt("big")},{big:function(){return KGt(this,"big","","")}})});var HPe=N(()=>{"use strict";u();var JGt=ce(),QGt=wc(),eHt=Ec();JGt({target:"String",proto:!0,forced:eHt("blink")},{blink:function(){return QGt(this,"blink","","")}})});var $Pe=N(()=>{"use strict";u();var tHt=ce(),rHt=wc(),nHt=Ec();tHt({target:"String",proto:!0,forced:nHt("bold")},{bold:function(){return rHt(this,"b","","")}})});var WPe=N(()=>{"use strict";u();var oHt=ce(),iHt=wc(),aHt=Ec();oHt({target:"String",proto:!0,forced:aHt("fixed")},{fixed:function(){return iHt(this,"tt","","")}})});var YPe=N(()=>{"use strict";u();var sHt=ce(),lHt=wc(),uHt=Ec();sHt({target:"String",proto:!0,forced:uHt("fontcolor")},{fontcolor:function(t){return lHt(this,"font","color",t)}})});var ZPe=N(()=>{"use strict";u();var cHt=ce(),pHt=wc(),fHt=Ec();cHt({target:"String",proto:!0,forced:fHt("fontsize")},{fontsize:function(t){return pHt(this,"font","size",t)}})});var KPe=N(()=>{"use strict";u();var dHt=ce(),hHt=wc(),mHt=Ec();dHt({target:"String",proto:!0,forced:mHt("italics")},{italics:function(){return hHt(this,"i","","")}})});var XPe=N(()=>{"use strict";u();var gHt=ce(),vHt=wc(),yHt=Ec();gHt({target:"String",proto:!0,forced:yHt("link")},{link:function(t){return vHt(this,"a","href",t)}})});var JPe=N(()=>{"use strict";u();var _Ht=ce(),bHt=wc(),xHt=Ec();_Ht({target:"String",proto:!0,forced:xHt("small")},{small:function(){return bHt(this,"small","","")}})});var QPe=N(()=>{"use strict";u();var wHt=ce(),EHt=wc(),SHt=Ec();wHt({target:"String",proto:!0,forced:SHt("strike")},{strike:function(){return EHt(this,"strike","","")}})});var eDe=N(()=>{"use strict";u();var THt=ce(),IHt=wc(),MHt=Ec();THt({target:"String",proto:!0,forced:MHt("sub")},{sub:function(){return IHt(this,"sub","","")}})});var tDe=N(()=>{"use strict";u();var CHt=ce(),AHt=wc(),OHt=Ec();CHt({target:"String",proto:!0,forced:OHt("sup")},{sup:function(){return AHt(this,"sup","","")}})});var X3=N((isn,nDe)=>{"use strict";u();var rDe=ur(),YX=Gt(),PHt=aC(),DHt=Zn().NATIVE_ARRAY_BUFFER_VIEWS,NHt=rDe.ArrayBuffer,C_=rDe.Int8Array;nDe.exports=!DHt||!YX(function(){C_(1)})||!YX(function(){new C_(-1)})||!PHt(function(e){new C_,new C_(null),new C_(1.5),new C_(e)},!0)||YX(function(){return new C_(new NHt(2),1,void 0).length!==1})});var ZX=N((ssn,oDe)=>{"use strict";u();var LHt=aE(),kHt=RangeError;oDe.exports=function(e,t){var r=LHt(e);if(r%t)throw new kHt("Wrong offset");return r}});var KX=N((usn,iDe)=>{"use strict";u();var RHt=Math.round;iDe.exports=function(e){var t=RHt(e);return t<0?0:t>255?255:t&255}});var J3=N((psn,aDe)=>{"use strict";u();var jHt=ku();aDe.exports=function(e){var t=jHt(e);return t==="BigInt64Array"||t==="BigUint64Array"}});var WC=N((dsn,sDe)=>{"use strict";u();var qHt=BM(),zHt=TypeError;sDe.exports=function(e){var t=qHt(e,"number");if(typeof t=="number")throw new zHt("Can't convert number to bigint");return BigInt(t)}});var XX=N((msn,lDe)=>{"use strict";u();var FHt=ci(),UHt=cr(),BHt=OC(),VHt=Jn(),GHt=ho(),HHt=xy(),$Ht=Oh(),WHt=RL(),YHt=J3(),ZHt=Zn().aTypedArrayConstructor,KHt=WC();lDe.exports=function(t){var r=BHt(this),n=VHt(t),o=arguments.length,i=o>1?arguments[1]:void 0,a=i!==void 0,c=$Ht(n),h,m,y,w,E,A,P,j;if(c&&!WHt(c))for(P=HHt(n,c),j=P.next,n=[];!(A=UHt(j,P)).done;)n.push(A.value);for(a&&o>2&&(i=FHt(i,arguments[2])),m=GHt(n),y=new(ZHt(r))(m),w=YHt(y),h=0;m>h;h++)E=a?i(n[h],h):n[h],y[h]=w?KHt(E):+E;return y}});var Rh=N((vsn,oJ)=>{"use strict";u();var uDe=ce(),bDe=ur(),cDe=cr(),XHt=Wr(),JHt=X3(),XC=Zn(),xDe=gC(),pDe=au(),QHt=mc(),YC=ms(),e$t=w3(),t$t=vc(),fDe=Jw(),JX=ZX(),r$t=KX(),wDe=Ch(),ZC=Wn(),n$t=ku(),tJ=Qr(),o$t=hg(),i$t=La(),a$t=El(),Q3=Kp(),s$t=gy().f,dDe=XX(),l$t=ka().forEach,u$t=Iy(),c$t=Gi(),EDe=Ei(),SDe=Ys(),hDe=_g(),iJ=Ho(),p$t=by(),rJ=iJ.get,f$t=iJ.set,d$t=iJ.enforce,TDe=EDe.f,h$t=SDe.f,QX=bDe.RangeError,IDe=xDe.ArrayBuffer,m$t=IDe.prototype,g$t=xDe.DataView,ek=XC.NATIVE_ARRAY_BUFFER_VIEWS,mDe=XC.TYPED_ARRAY_TAG,gDe=XC.TypedArray,KC=XC.TypedArrayPrototype,nJ=XC.isTypedArray,tk="BYTES_PER_ELEMENT",eJ="Wrong length",rk=function(e,t){c$t(e,t,{configurable:!0,get:function(){return rJ(this)[t]}})},vDe=function(e){var t;return a$t(m$t,e)||(t=n$t(e))==="ArrayBuffer"||t==="SharedArrayBuffer"},MDe=function(e,t){return nJ(e)&&!o$t(t)&&t in e&&e$t(+t)&&t>=0},yDe=function(t,r){return r=wDe(r),MDe(t,r)?QHt(2,t[r]):h$t(t,r)},_De=function(t,r,n){return r=wDe(r),MDe(t,r)&&tJ(n)&&ZC(n,"value")&&!ZC(n,"get")&&!ZC(n,"set")&&!n.configurable&&(!ZC(n,"writable")||n.writable)&&(!ZC(n,"enumerable")||n.enumerable)?(t[r]=n.value,t):TDe(t,r,n)};XHt?(ek||(SDe.f=yDe,EDe.f=_De,rk(KC,"buffer"),rk(KC,"byteOffset"),rk(KC,"byteLength"),rk(KC,"length")),uDe({target:"Object",stat:!0,forced:!ek},{getOwnPropertyDescriptor:yDe,defineProperty:_De}),oJ.exports=function(e,t,r){var n=e.match(/\d+/)[0]/8,o=e+(r?"Clamped":"")+"Array",i="get"+e,a="set"+e,c=bDe[o],h=c,m=h&&h.prototype,y={},w=function(j,D){var L=rJ(j);return L.view[i](D*n+L.byteOffset,!0)},E=function(j,D,L){var z=rJ(j);z.view[a](D*n+z.byteOffset,r?r$t(L):L,!0)},A=function(j,D){TDe(j,D,{get:function(){return w(this,D)},set:function(L){return E(this,D,L)},enumerable:!0})};ek?JHt&&(h=t(function(j,D,L,z){return pDe(j,m),p$t(function(){return tJ(D)?vDe(D)?z!==void 0?new c(D,JX(L,n),z):L!==void 0?new c(D,JX(L,n)):new c(D):nJ(D)?hDe(h,D):cDe(dDe,h,D):new c(fDe(D))}(),j,h)}),Q3&&Q3(h,gDe),l$t(s$t(c),function(j){j in h||YC(h,j,c[j])}),h.prototype=m):(h=t(function(j,D,L,z){pDe(j,m);var B=0,G=0,Z,K,te;if(!tJ(D))te=fDe(D),K=te*n,Z=new IDe(K);else if(vDe(D)){Z=D,G=JX(L,n);var se=D.byteLength;if(z===void 0){if(se%n)throw new QX(eJ);if(K=se-G,K<0)throw new QX(eJ)}else if(K=t$t(z)*n,K+G>se)throw new QX(eJ);te=K/n}else return nJ(D)?hDe(h,D):cDe(dDe,h,D);for(f$t(j,{buffer:Z,byteOffset:G,byteLength:K,length:te,view:new g$t(Z)});B<te;)A(j,B++)}),Q3&&Q3(h,gDe),m=h.prototype=i$t(KC)),m.constructor!==h&&YC(m,"constructor",h),d$t(m).TypedArrayConstructor=h,mDe&&YC(m,mDe,o);var P=h!==c;y[o]=h,uDe({global:!0,constructor:!0,forced:P,sham:!ek},y),tk in h||YC(h,tk,n),tk in m||YC(m,tk,n),u$t(o)}):oJ.exports=function(){}});var CDe=N(()=>{"use strict";u();var v$t=Rh();v$t("Float32",function(e){return function(r,n,o){return e(this,r,n,o)}})});var ADe=N(()=>{"use strict";u();var y$t=Rh();y$t("Float64",function(e){return function(r,n,o){return e(this,r,n,o)}})});var ODe=N(()=>{"use strict";u();var _$t=Rh();_$t("Int8",function(e){return function(r,n,o){return e(this,r,n,o)}})});var PDe=N(()=>{"use strict";u();var b$t=Rh();b$t("Int16",function(e){return function(r,n,o){return e(this,r,n,o)}})});var DDe=N(()=>{"use strict";u();var x$t=Rh();x$t("Int32",function(e){return function(r,n,o){return e(this,r,n,o)}})});var NDe=N(()=>{"use strict";u();var w$t=Rh();w$t("Uint8",function(e){return function(r,n,o){return e(this,r,n,o)}})});var LDe=N(()=>{"use strict";u();var E$t=Rh();E$t("Uint8",function(e){return function(r,n,o){return e(this,r,n,o)}},!0)});var kDe=N(()=>{"use strict";u();var S$t=Rh();S$t("Uint16",function(e){return function(r,n,o){return e(this,r,n,o)}})});var RDe=N(()=>{"use strict";u();var T$t=Rh();T$t("Uint32",function(e){return function(r,n,o){return e(this,r,n,o)}})});var aJ=N(()=>{"use strict";u();var jDe=Zn(),I$t=ho(),M$t=Vi(),C$t=jDe.aTypedArray,A$t=jDe.exportTypedArrayMethod;A$t("at",function(t){var r=C$t(this),n=I$t(r),o=M$t(t),i=o>=0?o:n+o;return i<0||i>=n?void 0:r[i]})});var zDe=N(()=>{"use strict";u();var O$t=Lt(),qDe=Zn(),P$t=lW(),D$t=O$t(P$t),N$t=qDe.aTypedArray,L$t=qDe.exportTypedArrayMethod;L$t("copyWithin",function(t,r){return D$t(N$t(this),t,r,arguments.length>2?arguments[2]:void 0)})});var UDe=N(()=>{"use strict";u();var FDe=Zn(),k$t=ka().every,R$t=FDe.aTypedArray,j$t=FDe.exportTypedArrayMethod;j$t("every",function(t){return k$t(R$t(this),t,arguments.length>1?arguments[1]:void 0)})});var VDe=N(()=>{"use strict";u();var BDe=Zn(),q$t=FL(),z$t=WC(),F$t=ku(),U$t=cr(),B$t=Lt(),V$t=Gt(),G$t=BDe.aTypedArray,H$t=BDe.exportTypedArrayMethod,$$t=B$t("".slice),W$t=V$t(function(){var e=0;return new Int8Array(2).fill({valueOf:function(){return e++}}),e!==1});H$t("fill",function(t){var r=arguments.length;G$t(this);var n=$$t(F$t(this),0,3)==="Big"?z$t(t):+t;return U$t(q$t,this,n,r>1?arguments[1]:void 0,r>2?arguments[2]:void 0)},W$t)});var nk=N((oln,GDe)=>{"use strict";u();var Y$t=_g(),Z$t=Zn().getTypedArrayConstructor;GDe.exports=function(e,t){return Y$t(Z$t(e),t)}});var $De=N(()=>{"use strict";u();var HDe=Zn(),K$t=ka().filter,X$t=nk(),J$t=HDe.aTypedArray,Q$t=HDe.exportTypedArrayMethod;Q$t("filter",function(t){var r=K$t(J$t(this),t,arguments.length>1?arguments[1]:void 0);return X$t(this,r)})});var YDe=N(()=>{"use strict";u();var WDe=Zn(),eWt=ka().find,tWt=WDe.aTypedArray,rWt=WDe.exportTypedArrayMethod;rWt("find",function(t){return eWt(tWt(this),t,arguments.length>1?arguments[1]:void 0)})});var KDe=N(()=>{"use strict";u();var ZDe=Zn(),nWt=ka().findIndex,oWt=ZDe.aTypedArray,iWt=ZDe.exportTypedArrayMethod;iWt("findIndex",function(t){return nWt(oWt(this),t,arguments.length>1?arguments[1]:void 0)})});var sJ=N(()=>{"use strict";u();var XDe=Zn(),aWt=iC().findLast,sWt=XDe.aTypedArray,lWt=XDe.exportTypedArrayMethod;lWt("findLast",function(t){return aWt(sWt(this),t,arguments.length>1?arguments[1]:void 0)})});var lJ=N(()=>{"use strict";u();var JDe=Zn(),uWt=iC().findLastIndex,cWt=JDe.aTypedArray,pWt=JDe.exportTypedArrayMethod;pWt("findLastIndex",function(t){return uWt(cWt(this),t,arguments.length>1?arguments[1]:void 0)})});var eNe=N(()=>{"use strict";u();var QDe=Zn(),fWt=ka().forEach,dWt=QDe.aTypedArray,hWt=QDe.exportTypedArrayMethod;hWt("forEach",function(t){fWt(dWt(this),t,arguments.length>1?arguments[1]:void 0)})});var tNe=N(()=>{"use strict";u();var mWt=X3(),gWt=Zn().exportTypedArrayStaticMethod,vWt=XX();gWt("from",vWt,mWt)});var nNe=N(()=>{"use strict";u();var rNe=Zn(),yWt=Gw().includes,_Wt=rNe.aTypedArray,bWt=rNe.exportTypedArrayMethod;bWt("includes",function(t){return yWt(_Wt(this),t,arguments.length>1?arguments[1]:void 0)})});var iNe=N(()=>{"use strict";u();var oNe=Zn(),xWt=Gw().indexOf,wWt=oNe.aTypedArray,EWt=oNe.exportTypedArrayMethod;EWt("indexOf",function(t){return xWt(wWt(this),t,arguments.length>1?arguments[1]:void 0)})});var cNe=N(()=>{"use strict";u();var SWt=ur(),TWt=Gt(),uJ=Lt(),sNe=Zn(),cJ=uC(),IWt=nn(),pJ=IWt("iterator"),aNe=SWt.Uint8Array,MWt=uJ(cJ.values),CWt=uJ(cJ.keys),AWt=uJ(cJ.entries),fJ=sNe.aTypedArray,ok=sNe.exportTypedArrayMethod,IE=aNe&&aNe.prototype,ik=!TWt(function(){IE[pJ].call([1])}),lNe=!!IE&&IE.values&&IE[pJ]===IE.values&&IE.values.name==="values",uNe=function(){return MWt(fJ(this))};ok("entries",function(){return AWt(fJ(this))},ik);ok("keys",function(){return CWt(fJ(this))},ik);ok("values",uNe,ik||!lNe,{name:"values"});ok(pJ,uNe,ik||!lNe,{name:"values"})});var fNe=N(()=>{"use strict";u();var pNe=Zn(),OWt=Lt(),PWt=pNe.aTypedArray,DWt=pNe.exportTypedArrayMethod,NWt=OWt([].join);DWt("join",function(t){return NWt(PWt(this),t)})});var hNe=N(()=>{"use strict";u();var dNe=Zn(),LWt=Sl(),kWt=SW(),RWt=dNe.aTypedArray,jWt=dNe.exportTypedArrayMethod;jWt("lastIndexOf",function(t){var r=arguments.length;return LWt(kWt,RWt(this),r>1?[t,arguments[1]]:[t])})});var mNe=N(()=>{"use strict";u();var dJ=Zn(),qWt=ka().map,zWt=dJ.aTypedArray,FWt=dJ.getTypedArrayConstructor,UWt=dJ.exportTypedArrayMethod;UWt("map",function(t){return qWt(zWt(this),t,arguments.length>1?arguments[1]:void 0,function(r,n){return new(FWt(r))(n)})})});var vNe=N(()=>{"use strict";u();var gNe=Zn(),BWt=X3(),VWt=gNe.aTypedArrayConstructor,GWt=gNe.exportTypedArrayStaticMethod;GWt("of",function(){for(var t=0,r=arguments.length,n=new(VWt(this))(r);r>t;)n[t]=arguments[t++];return n},BWt)});var _Ne=N(()=>{"use strict";u();var yNe=Zn(),HWt=cC().left,$Wt=yNe.aTypedArray,WWt=yNe.exportTypedArrayMethod;WWt("reduce",function(t){var r=arguments.length;return HWt($Wt(this),t,r,r>1?arguments[1]:void 0)})});var xNe=N(()=>{"use strict";u();var bNe=Zn(),YWt=cC().right,ZWt=bNe.aTypedArray,KWt=bNe.exportTypedArrayMethod;KWt("reduceRight",function(t){var r=arguments.length;return YWt(ZWt(this),t,r,r>1?arguments[1]:void 0)})});var ENe=N(()=>{"use strict";u();var wNe=Zn(),XWt=wNe.aTypedArray,JWt=wNe.exportTypedArrayMethod,QWt=Math.floor;JWt("reverse",function(){for(var t=this,r=XWt(t).length,n=QWt(r/2),o=0,i;o<n;)i=t[o],t[o++]=t[--r],t[r]=i;return t})});var ANe=N(()=>{"use strict";u();var TNe=ur(),INe=cr(),gJ=Zn(),eYt=ho(),tYt=ZX(),rYt=Jn(),MNe=Gt(),nYt=TNe.RangeError,hJ=TNe.Int8Array,SNe=hJ&&hJ.prototype,CNe=SNe&&SNe.set,oYt=gJ.aTypedArray,iYt=gJ.exportTypedArrayMethod,mJ=!MNe(function(){var e=new Uint8ClampedArray(2);return INe(CNe,e,{length:1,0:3},1),e[1]!==3}),aYt=mJ&&gJ.NATIVE_ARRAY_BUFFER_VIEWS&&MNe(function(){var e=new hJ(2);return e.set(1),e.set("2",1),e[0]!==0||e[1]!==2});iYt("set",function(t){oYt(this);var r=tYt(arguments.length>1?arguments[1]:void 0,1),n=rYt(t);if(mJ)return INe(CNe,this,n,r);var o=this.length,i=eYt(n),a=0;if(i+r>o)throw new nYt("Wrong length");for(;a<i;)this[r+a]=n[a++]},!mJ||aYt)});var ONe=N(()=>{"use strict";u();var vJ=Zn(),sYt=Gt(),lYt=yc(),uYt=vJ.aTypedArray,cYt=vJ.getTypedArrayConstructor,pYt=vJ.exportTypedArrayMethod,fYt=sYt(function(){new Int8Array(1).slice()});pYt("slice",function(t,r){for(var n=lYt(uYt(this),t,r),o=cYt(this),i=0,a=n.length,c=new o(a);a>i;)c[i]=n[i++];return c},fYt)});var DNe=N(()=>{"use strict";u();var PNe=Zn(),dYt=ka().some,hYt=PNe.aTypedArray,mYt=PNe.exportTypedArrayMethod;mYt("some",function(t){return dYt(hYt(this),t,arguments.length>1?arguments[1]:void 0)})});var qNe=N(()=>{"use strict";u();var gYt=ur(),vYt=vy(),yJ=Gt(),yYt=un(),_Yt=YL(),jNe=Zn(),NNe=MW(),bYt=CW(),LNe=dd(),kNe=ZL(),xYt=jNe.aTypedArray,wYt=jNe.exportTypedArrayMethod,JC=gYt.Uint16Array,ME=JC&&vYt(JC.prototype.sort),EYt=!!ME&&!(yJ(function(){ME(new JC(2),null)})&&yJ(function(){ME(new JC(2),{})})),RNe=!!ME&&!yJ(function(){if(LNe)return LNe<74;if(NNe)return NNe<67;if(bYt)return!0;if(kNe)return kNe<602;var e=new JC(516),t=Array(516),r,n;for(r=0;r<516;r++)n=r%4,e[r]=515-r,t[r]=r-2*n+3;for(ME(e,function(o,i){return(o/4|0)-(i/4|0)}),r=0;r<516;r++)if(e[r]!==t[r])return!0}),SYt=function(e){return function(t,r){return e!==void 0?+e(t,r)||0:r!==r?-1:t!==t?1:t===0&&r===0?1/t>0&&1/r<0?1:-1:t>r}};wYt("sort",function(t){return t!==void 0&&yYt(t),RNe?ME(this,t):_Yt(xYt(this),SYt(t))},!RNe||EYt)});var FNe=N(()=>{"use strict";u();var _J=Zn(),TYt=vc(),zNe=md(),IYt=_J.aTypedArray,MYt=_J.getTypedArrayConstructor,CYt=_J.exportTypedArrayMethod;CYt("subarray",function(t,r){var n=IYt(this),o=n.length,i=zNe(t,o),a=MYt(n);return new a(n.buffer,n.byteOffset+i*n.BYTES_PER_ELEMENT,TYt((r===void 0?o:zNe(r,o))-i))})});var HNe=N(()=>{"use strict";u();var AYt=ur(),OYt=Sl(),VNe=Zn(),bJ=Gt(),UNe=yc(),ak=AYt.Int8Array,BNe=VNe.aTypedArray,PYt=VNe.exportTypedArrayMethod,GNe=[].toLocaleString,DYt=!!ak&&bJ(function(){GNe.call(new ak(1))}),NYt=bJ(function(){return[1,2].toLocaleString()!==new ak([1,2]).toLocaleString()})||!bJ(function(){ak.prototype.toLocaleString.call([1,2])});PYt("toLocaleString",function(){return OYt(GNe,DYt?UNe(BNe(this)):BNe(this),UNe(arguments))},NYt)});var wJ=N(()=>{"use strict";u();var LYt=PW(),xJ=Zn(),kYt=xJ.aTypedArray,RYt=xJ.exportTypedArrayMethod,jYt=xJ.getTypedArrayConstructor;RYt("toReversed",function(){return LYt(kYt(this),jYt(this))})});var EJ=N(()=>{"use strict";u();var sk=Zn(),qYt=Lt(),zYt=un(),FYt=_g(),UYt=sk.aTypedArray,BYt=sk.getTypedArrayConstructor,VYt=sk.exportTypedArrayMethod,GYt=qYt(sk.TypedArrayPrototype.sort);VYt("toSorted",function(t){t!==void 0&&zYt(t);var r=UYt(this),n=FYt(BYt(r),r);return GYt(n,t)})});var WNe=N(()=>{"use strict";u();var HYt=Zn().exportTypedArrayMethod,$Yt=Gt(),WYt=ur(),YYt=Lt(),$Ne=WYt.Uint8Array,ZYt=$Ne&&$Ne.prototype||{},lk=[].toString,KYt=YYt([].join);$Yt(function(){lk.call({})})&&(lk=function(){return KYt(this)});var XYt=ZYt.toString!==lk;HYt("toString",lk,XYt)});var TJ=N(()=>{"use strict";u();var JYt=RW(),SJ=Zn(),QYt=J3(),eZt=Vi(),tZt=WC(),rZt=SJ.aTypedArray,nZt=SJ.getTypedArrayConstructor,oZt=SJ.exportTypedArrayMethod,iZt=!!function(){try{new Int8Array(1).with(2,{valueOf:function(){throw 8}})}catch(e){return e===8}}();oZt("with",function(e,t){var r=rZt(this),n=eZt(e),o=QYt(r)?tZt(t):+t;return JYt(r,nZt(r),n,o)},!iZt)});var JNe=N(()=>{"use strict";u();var aZt=ce(),IJ=Lt(),sZt=Sn(),YNe=String.fromCharCode,ZNe=IJ("".charAt),KNe=IJ(/./.exec),XNe=IJ("".slice),lZt=/^[\da-f]{2}$/i,uZt=/^[\da-f]{4}$/i;aZt({global:!0},{unescape:function(t){for(var r=sZt(t),n="",o=r.length,i=0,a,c;i<o;){if(a=ZNe(r,i++),a==="%"){if(ZNe(r,i)==="u"){if(c=XNe(r,i+1,i+5),KNe(uZt,c)){n+=YNe(parseInt(c,16)),i+=5;continue}}else if(c=XNe(r,i,i+2),KNe(lZt,c)){n+=YNe(parseInt(c,16)),i+=2;continue}}n+=a}return n}})});var AJ=N((Run,o4e)=>{"use strict";u();var cZt=Lt(),QNe=Qp(),uk=Ny().getWeakData,pZt=au(),fZt=dr(),dZt=gc(),MJ=Qr(),hZt=ma(),t4e=ka(),e4e=Wn(),r4e=Ho(),mZt=r4e.set,gZt=r4e.getterFor,vZt=t4e.find,yZt=t4e.findIndex,_Zt=cZt([].splice),bZt=0,ck=function(e){return e.frozen||(e.frozen=new n4e)},n4e=function(){this.entries=[]},CJ=function(e,t){return vZt(e.entries,function(r){return r[0]===t})};n4e.prototype={get:function(e){var t=CJ(this,e);if(t)return t[1]},has:function(e){return!!CJ(this,e)},set:function(e,t){var r=CJ(this,e);r?r[1]=t:this.entries.push([e,t])},delete:function(e){var t=yZt(this.entries,function(r){return r[0]===e});return~t&&_Zt(this.entries,t,1),!!~t}};o4e.exports={getConstructor:function(e,t,r,n){var o=e(function(h,m){pZt(h,i),mZt(h,{type:t,id:bZt++,frozen:null}),dZt(m)||hZt(m,h[n],{that:h,AS_ENTRIES:r})}),i=o.prototype,a=gZt(t),c=function(h,m,y){var w=a(h),E=uk(fZt(m),!0);return E===!0?ck(w).set(m,y):E[w.id]=y,h};return QNe(i,{delete:function(h){var m=a(this);if(!MJ(h))return!1;var y=uk(h);return y===!0?ck(m).delete(h):y&&e4e(y,m.id)&&delete y[m.id]},has:function(m){var y=a(this);if(!MJ(m))return!1;var w=uk(m);return w===!0?ck(y).has(m):w&&e4e(w,y.id)}}),QNe(i,r?{get:function(m){var y=a(this);if(MJ(m)){var w=uk(m);if(w===!0)return ck(y).get(m);if(w)return w[y.id]}},set:function(m,y){return c(this,m,y)}}:{add:function(m){return c(this,m,!0)}}),o}}});var f4e=N(()=>{"use strict";u();var xZt=Sg(),i4e=ur(),hk=Lt(),a4e=Qp(),wZt=Ny(),EZt=bC(),s4e=AJ(),pk=Qr(),fk=Ho().enforce,SZt=Gt(),TZt=c$(),tA=Object,IZt=Array.isArray,dk=tA.isExtensible,l4e=tA.isFrozen,MZt=tA.isSealed,u4e=tA.freeze,CZt=tA.seal,AZt=!i4e.ActiveXObject&&"ActiveXObject"in i4e,QC,c4e=function(e){return function(){return e(this,arguments.length?arguments[0]:void 0)}},p4e=EZt("WeakMap",c4e,s4e),CE=p4e.prototype,mk=hk(CE.set),OZt=function(){return xZt&&SZt(function(){var e=u4e([]);return mk(new p4e,e,1),!l4e(e)})};TZt&&(AZt?(QC=s4e.getConstructor(c4e,"WeakMap",!0),wZt.enable(),OJ=hk(CE.delete),eA=hk(CE.has),PJ=hk(CE.get),a4e(CE,{delete:function(e){if(pk(e)&&!dk(e)){var t=fk(this);return t.frozen||(t.frozen=new QC),OJ(this,e)||t.frozen.delete(e)}return OJ(this,e)},has:function(t){if(pk(t)&&!dk(t)){var r=fk(this);return r.frozen||(r.frozen=new QC),eA(this,t)||r.frozen.has(t)}return eA(this,t)},get:function(t){if(pk(t)&&!dk(t)){var r=fk(this);return r.frozen||(r.frozen=new QC),eA(this,t)?PJ(this,t):r.frozen.get(t)}return PJ(this,t)},set:function(t,r){if(pk(t)&&!dk(t)){var n=fk(this);n.frozen||(n.frozen=new QC),eA(this,t)?mk(this,t,r):n.frozen.set(t,r)}else mk(this,t,r);return this}})):OZt()&&a4e(CE,{set:function(t,r){var n;return IZt(t)&&(l4e(t)?n=u4e:MZt(t)&&(n=CZt)),mk(this,t,r),n&&n(t),this}}));var OJ,eA,PJ});var gk=N(()=>{"use strict";u();f4e()});var d4e=N(()=>{"use strict";u();var PZt=bC(),DZt=AJ();PZt("WeakSet",function(e){return function(){return e(this,arguments.length?arguments[0]:void 0)}},DZt)});var h4e=N(()=>{"use strict";u();d4e()});var m4e=N(()=>{"use strict";u();rW()});var y4e=N(()=>{"use strict";u();var NZt=ce(),LZt=ur(),kZt=El(),g4e=gs(),yk=Kp(),RZt=c_(),v4e=La(),vk=ms(),DJ=mc(),jZt=DL(),qZt=m_(),zZt=nn(),FZt=Gt(),UZt=So(),AE=LZt.SuppressedError,BZt=zZt("toStringTag"),_k=Error,VZt=!!AE&&AE.length!==3,GZt=!!AE&&FZt(function(){return new AE(1,2,3,{cause:4}).cause===4}),bk=VZt||GZt,A_=function(t,r,n){var o=kZt(rA,this),i;return yk?i=bk&&(!o||g4e(this)===rA)?new AE:yk(new _k,o?g4e(this):rA):(i=o?this:v4e(rA),vk(i,BZt,"Error")),n!==void 0&&vk(i,"message",qZt(n)),jZt(i,A_,i.stack,1),vk(i,"error",t),vk(i,"suppressed",r),i};yk?yk(A_,_k):RZt(A_,_k,{name:!0});var rA=A_.prototype=bk?AE.prototype:v4e(_k.prototype,{constructor:DJ(1,A_),message:DJ(1,""),name:DJ(1,"SuppressedError")});bk&&!UZt&&(rA.constructor=A_);NZt({global:!0,constructor:!0,arity:3,forced:bk},{SuppressedError:A_})});var OE=N((ncn,I4e)=>{"use strict";u();var E4e=ur(),S4e=UM(),T4e=jn(),HZt=La(),xk=gs(),$Zt=ti(),WZt=nn(),YZt=So(),_4e="USE_FUNCTION_CONSTRUCTOR",b4e=WZt("asyncIterator"),x4e=E4e.AsyncIterator,w4e=S4e.AsyncIteratorPrototype,jh,NJ;if(w4e)jh=w4e;else if(T4e(x4e))jh=x4e.prototype;else if(S4e[_4e]||E4e[_4e])try{NJ=xk(xk(xk(Function("return async function*(){}()")()))),xk(NJ)===Object.prototype&&(jh=NJ)}catch(e){}jh?YZt&&(jh=HZt(jh)):jh={};T4e(jh[b4e])||$Zt(jh,b4e,function(){return this});I4e.exports=jh});var nA=N((icn,k4e)=>{"use strict";u();var M4e=cr(),C4e=dr(),ZZt=La(),KZt=Na(),XZt=Qp(),P4e=Ho(),JZt=Ks(),QZt=ln(),eKt=OE(),D4e=Ns(),LJ=QZt("Promise"),N4e="AsyncFromSyncIterator",tKt=P4e.set,A4e=P4e.getterFor(N4e),O4e=function(e,t,r,n,o){var i=e.done;LJ.resolve(e.value).then(function(a){t(D4e(a,i))},function(a){if(!i&&o)try{JZt(n,"throw",a)}catch(c){a=c}r(a)})},L4e=function(t){t.type=N4e,tKt(this,t)};L4e.prototype=XZt(ZZt(eKt),{next:function(){var t=A4e(this);return new LJ(function(r,n){var o=C4e(M4e(t.next,t.iterator));O4e(o,r,n,t.iterator,!0)})},return:function(){var e=A4e(this).iterator;return new LJ(function(t,r){var n=KZt(e,"return");if(n===void 0)return t(D4e(void 0,!0));var o=C4e(M4e(n,e));O4e(o,t,r,e)})}});k4e.exports=L4e});var j4e=N((scn,R4e)=>{"use strict";u();var rKt=cr(),nKt=nA(),oKt=dr(),iKt=xy(),aKt=ra(),sKt=Na(),lKt=nn(),uKt=lKt("asyncIterator");R4e.exports=function(e,t){var r=arguments.length<2?sKt(e,uKt):t;return r?oKt(rKt(r,e)):new nKt(aKt(iKt(e)))}});var PE=N((ucn,q4e)=>{"use strict";u();var cKt=cr(),pKt=ln(),fKt=Na();q4e.exports=function(e,t,r,n){try{var o=fKt(e,"return");if(o)return pKt("Promise").resolve(cKt(o,e)).then(function(){t(r)},function(i){n(i)})}catch(i){return n(i)}t(r)}});var O_=N((pcn,z4e)=>{"use strict";u();var dKt=cr(),hKt=un(),kJ=dr(),mKt=Qr(),gKt=wy(),vKt=ln(),yKt=ra(),RJ=PE(),oA=function(e){var t=e===0,r=e===1,n=e===2,o=e===3;return function(i,a,c){kJ(i);var h=a!==void 0;(h||!t)&&hKt(a);var m=yKt(i),y=vKt("Promise"),w=m.iterator,E=m.next,A=0;return new y(function(P,j){var D=function(z){RJ(w,j,z,j)},L=function(){try{if(h)try{gKt(A)}catch(z){D(z)}y.resolve(kJ(dKt(E,w))).then(function(z){try{if(kJ(z).done)t?(c.length=A,P(c)):P(o?!1:n||void 0);else{var B=z.value;try{if(h){var G=a(B,A),Z=function(K){if(r)L();else if(n)K?L():RJ(w,P,!1,j);else if(t)try{c[A++]=K,L()}catch(te){D(te)}else K?RJ(w,P,o||B,j):L()};mKt(G)?y.resolve(G).then(Z,D):Z(G)}else c[A++]=B,L()}catch(K){D(K)}}}catch(K){j(K)}},j)}catch(z){j(z)}};L()})}};z4e.exports={toArray:oA(0),forEach:oA(1),every:oA(2),some:oA(3),find:oA(4)}});var jJ=N((dcn,V4e)=>{"use strict";u();var _Kt=ci(),F4e=Lt(),bKt=Jn(),xKt=vd(),wKt=j4e(),EKt=xy(),SKt=ra(),TKt=Oh(),IKt=Na(),MKt=ln(),CKt=NW(),AKt=nn(),OKt=nA(),PKt=O_().toArray,DKt=AKt("asyncIterator"),U4e=F4e(CKt("Array","values")),NKt=F4e(U4e([]).next),LKt=function(){return new B4e(this)},B4e=function(e){this.iterator=U4e(e)};B4e.prototype.next=function(){return NKt(this.iterator)};V4e.exports=function(t){var r=this,n=arguments.length,o=n>1?arguments[1]:void 0,i=n>2?arguments[2]:void 0;return new(MKt("Promise"))(function(a){var c=bKt(t);o!==void 0&&(o=_Kt(o,i));var h=IKt(c,DKt),m=h?void 0:TKt(c)||LKt,y=xKt(r)?new r:[],w=h?wKt(c,h):new OKt(SKt(EKt(c,m)));a(PKt(w,o,y))})}});var H4e=N(()=>{"use strict";u();var kKt=ce(),RKt=jJ(),jKt=Gt(),G4e=Array.fromAsync,qKt=!G4e||jKt(function(){var e=0;return G4e.call(function(){return e++,[]},{length:0}),e!==1});kKt({target:"Array",stat:!0,forced:qKt},{fromAsync:RKt})});var $4e=N(()=>{"use strict";u();aW()});var W4e=N(()=>{"use strict";u();var zKt=ce(),FKt=ka().filterReject,UKt=ga();zKt({target:"Array",proto:!0,forced:!0},{filterOut:function(t){return FKt(this,t,arguments.length>1?arguments[1]:void 0)}});UKt("filterOut")});var Y4e=N(()=>{"use strict";u();var BKt=ce(),VKt=ka().filterReject,GKt=ga();BKt({target:"Array",proto:!0,forced:!0},{filterReject:function(t){return VKt(this,t,arguments.length>1?arguments[1]:void 0)}});GKt("filterReject")});var Z4e=N(()=>{"use strict";u();pW()});var K4e=N(()=>{"use strict";u();fW()});var wk=N((Ncn,X4e)=>{"use strict";u();var HKt=ci(),$Kt=Lt(),WKt=dg(),YKt=Jn(),ZKt=Ch(),KKt=ho(),XKt=La(),JKt=_g(),QKt=Array,eXt=$Kt([].push);X4e.exports=function(e,t,r,n){for(var o=YKt(e),i=WKt(o),a=HKt(t,r),c=XKt(null),h=KKt(i),m=0,y,w,E;h>m;m++)E=i[m],w=ZKt(a(E,m,o)),w in c?eXt(c[w],E):c[w]=[E];if(n&&(y=n(o),y!==QKt))for(w in c)c[w]=JKt(y,c[w]);return c}});var J4e=N(()=>{"use strict";u();var tXt=ce(),rXt=wk(),nXt=ga();tXt({target:"Array",proto:!0},{group:function(t){var r=arguments.length>1?arguments[1]:void 0;return rXt(this,t,r)}});nXt("group")});var Q4e=N(()=>{"use strict";u();var oXt=ce(),iXt=wk(),aXt=Jp(),sXt=ga();oXt({target:"Array",proto:!0,forced:!aXt("groupBy")},{groupBy:function(t){var r=arguments.length>1?arguments[1]:void 0;return iXt(this,t,r)}});sXt("groupBy")});var qJ=N((Ucn,e5e)=>{"use strict";u();var lXt=ci(),uXt=Lt(),cXt=dg(),pXt=Jn(),fXt=ho(),Ek=Ls(),dXt=Ek.Map,hXt=Ek.get,mXt=Ek.has,gXt=Ek.set,vXt=uXt([].push);e5e.exports=function(t){for(var r=pXt(this),n=cXt(r),o=lXt(t,arguments.length>1?arguments[1]:void 0),i=new dXt,a=fXt(n),c=0,h,m;a>c;c++)m=n[c],h=o(m,c,r),mXt(i,h)?vXt(hXt(i,h),m):gXt(i,h,[m]);return i}});var t5e=N(()=>{"use strict";u();var yXt=ce(),_Xt=Jp(),bXt=ga(),xXt=qJ(),wXt=So();yXt({target:"Array",proto:!0,name:"groupToMap",forced:wXt||!_Xt("groupByToMap")},{groupByToMap:xXt});bXt("groupByToMap")});var r5e=N(()=>{"use strict";u();var EXt=ce(),SXt=ga(),TXt=qJ(),IXt=So();EXt({target:"Array",proto:!0,forced:IXt},{groupToMap:TXt});SXt("groupToMap")});var i5e=N(()=>{"use strict";u();var MXt=ce(),CXt=gd(),n5e=Object.isFrozen,o5e=function(e,t){if(!n5e||!CXt(e)||!n5e(e))return!1;for(var r=0,n=e.length,o;r<n;)if(o=e[r++],!(typeof o=="string"||t&&o===void 0))return!1;return n!==0};MXt({target:"Array",stat:!0,sham:!0,forced:!0},{isTemplateObject:function(t){if(!o5e(t,!0))return!1;var r=t.raw;return r.length===t.length&&o5e(r,!1)}})});var a5e=N(()=>{"use strict";u();var AXt=Wr(),OXt=ga(),PXt=Jn(),DXt=ho(),NXt=Gi();AXt&&(NXt(Array.prototype,"lastIndex",{configurable:!0,get:function(){var t=PXt(this),r=DXt(t);return r===0?0:r-1}}),OXt("lastIndex"))});var u5e=N(()=>{"use strict";u();var LXt=Wr(),kXt=ga(),s5e=Jn(),l5e=ho(),RXt=Gi();LXt&&(RXt(Array.prototype,"lastItem",{configurable:!0,get:function(){var t=s5e(this),r=l5e(t);return r===0?void 0:t[r-1]},set:function(t){var r=s5e(this),n=l5e(r);return r[n===0?0:n-1]=t}}),kXt("lastItem"))});var c5e=N(()=>{"use strict";u();DW()});var p5e=N(()=>{"use strict";u();LW()});var f5e=N(()=>{"use strict";u();kW()});var ef=N((dpn,v5e)=>{"use strict";u();var d5e=Lt(),jXt=Ig(),h5e=Ls(),qXt=h5e.Map,m5e=h5e.proto,zXt=d5e(m5e.forEach),g5e=d5e(m5e.entries),FXt=g5e(new qXt).next;v5e.exports=function(e,t,r){return r?jXt({iterator:g5e(e),next:FXt},function(n){return t(n[1],n[0])}):zXt(e,t)}});var Sk=N((mpn,y5e)=>{"use strict";u();var UXt=Lt(),BXt=un(),VXt=gc(),GXt=ho(),HXt=Jn(),zJ=Ls(),$Xt=ef(),WXt=zJ.Map,YXt=zJ.has,ZXt=zJ.set,KXt=UXt([].push);y5e.exports=function(t){var r=HXt(this),n=GXt(r),o=[],i=new WXt,a=VXt(t)?function(y){return y}:BXt(t),c,h,m;for(c=0;c<n;c++)h=r[c],m=a(h),YXt(i,m)||ZXt(i,m,h);return $Xt(i,function(y){KXt(o,y)}),o}});var _5e=N(()=>{"use strict";u();var XXt=ce(),JXt=ga(),QXt=Sk();XXt({target:"Array",proto:!0,forced:!0},{uniqueBy:QXt});JXt("uniqueBy")});var b5e=N(()=>{"use strict";u();jW()});var x5e=N(()=>{"use strict";u();cY()});var w5e=N(()=>{"use strict";u();TY()});var E5e=N(()=>{"use strict";u();IY()});var UJ=N((Dpn,C5e)=>{"use strict";u();var eJt=ln(),tJt=cr(),rJt=Lt(),nJt=ci(),oJt=dr(),iJt=un(),I5e=gc(),FJ=Na(),M5e=nn(),aJt=M5e("asyncDispose"),S5e=M5e("dispose"),sJt=rJt([].push),lJt=function(e,t){if(t==="async-dispose"){var r=FJ(e,aJt);return r!==void 0||(r=FJ(e,S5e),r===void 0)?r:function(){var n=this,o=eJt("Promise");return new o(function(i){tJt(r,n),i(void 0)})}}return FJ(e,S5e)},T5e=function(e,t,r){return arguments.length<3&&!I5e(e)&&(r=iJt(lJt(oJt(e),t))),r===void 0?function(){}:nJt(r,e)};C5e.exports=function(e,t,r,n){var o;if(arguments.length<4){if(I5e(t)&&r==="sync-dispose")return;o=T5e(t,r)}else o=T5e(void 0,r,n);sJt(e.stack,o)}});var R5e=N(()=>{"use strict";u();var uJt=ce(),Ik=Wr(),D5e=ln(),A5e=un(),cJt=au(),N5e=ti(),pJt=Qp(),fJt=Gi(),L5e=nn(),k5e=Ho(),BJ=UJ(),O5e=dd(),P5e=D5e("Promise"),dJt=D5e("SuppressedError"),hJt=ReferenceError,mJt=L5e("asyncDispose"),gJt=L5e("toStringTag"),Ck="AsyncDisposableStack",vJt=k5e.set,Mk=k5e.getterFor(Ck),VJ="async-dispose",iA="disposed",yJt="pending",Tk=function(e){var t=Mk(e);if(t.state===iA)throw new hJt(Ck+" already disposed");return t},GJ=function(){vJt(cJt(this,DE),{type:Ck,state:yJt,stack:[]}),Ik||(this.disposed=!1)},DE=GJ.prototype;pJt(DE,{disposeAsync:function(){var t=this;return new P5e(function(r,n){var o=Mk(t);if(o.state===iA)return r(void 0);o.state=iA,Ik||(t.disposed=!0);var i=o.stack,a=i.length,c=!1,h,m=function(w){c?h=new dJt(w,h):(c=!0,h=w),y()},y=function(){if(a){var w=i[--a];i[a]=null;try{P5e.resolve(w()).then(y,m)}catch(E){m(E)}}else o.stack=null,c?n(h):r(void 0)};y()})},use:function(t){return BJ(Tk(this),t,VJ),t},adopt:function(t,r){var n=Tk(this);return A5e(r),BJ(n,void 0,VJ,function(){return r(t)}),t},defer:function(t){var r=Tk(this);A5e(t),BJ(r,void 0,VJ,t)},move:function(){var t=Tk(this),r=new GJ;return Mk(r).stack=t.stack,t.stack=[],t.state=iA,Ik||(this.disposed=!0),r}});Ik&&fJt(DE,"disposed",{configurable:!0,get:function(){return Mk(this).state===iA}});N5e(DE,mJt,DE.disposeAsync,{name:"disposeAsync"});N5e(DE,gJt,Ck,{nonWritable:!0});var _Jt=O5e&&O5e<136;uJt({global:!0,constructor:!0,forced:_Jt},{AsyncDisposableStack:GJ})});var U5e=N(()=>{"use strict";u();var bJt=ce(),xJt=au(),wJt=gs(),q5e=ms(),z5e=Wn(),EJt=nn(),Fy=OE(),F5e=So(),j5e=EJt("toStringTag"),SJt=TypeError,HJ=function(){if(xJt(this,Fy),wJt(this)===Fy)throw new SJt("Abstract class AsyncIterator not directly constructable")};HJ.prototype=Fy;z5e(Fy,j5e)||q5e(Fy,j5e,"AsyncIterator");(F5e||!z5e(Fy,"constructor")||Fy.constructor===Object)&&q5e(Fy,"constructor",HJ);bJt({global:!0,constructor:!0,forced:F5e},{AsyncIterator:HJ})});var P_=N((Fpn,Z5e)=>{"use strict";u();var TJt=cr(),Ak=Ly(),B5e=dr(),IJt=La(),MJt=ms(),CJt=Qp(),AJt=nn(),G5e=Ho(),OJt=ln(),PJt=Na(),DJt=OE(),$J=Ns(),V5e=Ks(),qh=OJt("Promise"),NJt=AJt("toStringTag"),H5e="AsyncIteratorHelper",$5e="WrapForValidAsyncIterator",LJt=G5e.set,W5e=function(e){var t=!e,r=G5e.getterFor(e?$5e:H5e),n=function(o){var i=Ak(function(){return r(o)}),a=i.error,c=i.value;return a||t&&c.done?{exit:!0,value:a?qh.reject(c):qh.resolve($J(void 0,!0))}:{exit:!1,value:c}};return CJt(IJt(DJt),{next:function(){var i=n(this),a=i.value;if(i.exit)return a;var c=Ak(function(){return B5e(a.nextHandler(qh))}),h=c.error,m=c.value;return h&&(a.done=!0),h?qh.reject(m):qh.resolve(m)},return:function(){var o=n(this),i=o.value;if(o.exit)return i;i.done=!0;var a=i.iterator,c,h,m=Ak(function(){if(i.inner)try{V5e(i.inner.iterator,"normal")}catch(y){return V5e(a,"throw",y)}return PJt(a,"return")});return c=h=m.value,m.error?qh.reject(h):c===void 0?qh.resolve($J(void 0,!0)):(m=Ak(function(){return TJt(c,a)}),h=m.value,m.error?qh.reject(h):e?qh.resolve(h):qh.resolve(h).then(function(y){return B5e(y),$J(void 0,!0)}))}})},kJt=W5e(!0),Y5e=W5e(!1);MJt(Y5e,NJt,"Async Iterator Helper");Z5e.exports=function(e,t){var r=function(o,i){i?(i.iterator=o.iterator,i.next=o.next):i=o,i.type=t?$5e:H5e,i.nextHandler=e,i.counter=0,i.done=!1,LJt(this,i)};return r.prototype=t?kJt:Y5e,r}});var YJ=N((Bpn,X5e)=>{"use strict";u();var RJt=cr(),jJt=un(),WJ=dr(),qJt=Qr(),zJt=ra(),FJt=P_(),K5e=Ns(),UJt=PE(),BJt=FJt(function(e){var t=this,r=t.iterator,n=t.mapper;return new e(function(o,i){var a=function(h){t.done=!0,i(h)},c=function(h){UJt(r,a,h,a)};e.resolve(WJ(RJt(t.next,r))).then(function(h){try{if(WJ(h).done)t.done=!0,o(K5e(void 0,!0));else{var m=h.value;try{var y=n(m,t.counter++),w=function(E){o(K5e(E,!1))};qJt(y)?e.resolve(y).then(w,c):w(y)}catch(E){c(E)}}}catch(E){a(E)}},a)})});X5e.exports=function(t){return WJ(this),jJt(t),new BJt(zJt(this),{mapper:t})}});var ZJ=N((Gpn,J5e)=>{"use strict";u();var VJt=cr(),GJt=YJ(),HJt=function(e,t){return[t,e]};J5e.exports=function(){return VJt(GJt,this,HJt)}});var Q5e=N(()=>{"use strict";u();var $Jt=ce(),WJt=ZJ();$Jt({target:"AsyncIterator",name:"indexed",proto:!0,real:!0,forced:!0},{asIndexedPairs:WJt})});var nLe=N(()=>{"use strict";u();var YJt=cr(),ZJt=ti(),KJt=ln(),XJt=Na(),JJt=Wn(),QJt=nn(),eLe=OE(),tLe=QJt("asyncDispose"),rLe=KJt("Promise");JJt(eLe,tLe)||ZJt(eLe,tLe,function(){var e=this;return new rLe(function(t,r){var n=XJt(e,"return");n?rLe.resolve(YJt(n,e)).then(function(){t(void 0)},r):t(void 0)})})});var iLe=N(()=>{"use strict";u();var eQt=ce(),tQt=cr(),KJ=dr(),rQt=ra(),nQt=iE(),oQt=aE(),iQt=P_(),oLe=Ns(),aQt=iQt(function(e){var t=this;return new e(function(r,n){var o=function(a){t.done=!0,n(a)},i=function(){try{e.resolve(KJ(tQt(t.next,t.iterator))).then(function(a){try{KJ(a).done?(t.done=!0,r(oLe(void 0,!0))):t.remaining?(t.remaining--,i()):r(oLe(a.value,!1))}catch(c){o(c)}},o)}catch(a){o(a)}};i()})});eQt({target:"AsyncIterator",proto:!0,real:!0,forced:!0},{drop:function(t){KJ(this);var r=oQt(nQt(+t));return new aQt(rQt(this),{remaining:r})}})});var aLe=N(()=>{"use strict";u();var sQt=ce(),lQt=O_().every;sQt({target:"AsyncIterator",proto:!0,real:!0,forced:!0},{every:function(t){return lQt(this,t)}})});var lLe=N(()=>{"use strict";u();var uQt=ce(),cQt=cr(),pQt=un(),XJ=dr(),fQt=Qr(),dQt=ra(),hQt=P_(),sLe=Ns(),mQt=PE(),gQt=hQt(function(e){var t=this,r=t.iterator,n=t.predicate;return new e(function(o,i){var a=function(m){t.done=!0,i(m)},c=function(m){mQt(r,a,m,a)},h=function(){try{e.resolve(XJ(cQt(t.next,r))).then(function(m){try{if(XJ(m).done)t.done=!0,o(sLe(void 0,!0));else{var y=m.value;try{var w=n(y,t.counter++),E=function(A){A?o(sLe(y,!1)):h()};fQt(w)?e.resolve(w).then(E,c):E(w)}catch(A){c(A)}}}catch(A){a(A)}},a)}catch(m){a(m)}};h()})});uQt({target:"AsyncIterator",proto:!0,real:!0,forced:!0},{filter:function(t){return XJ(this),pQt(t),new gQt(dQt(this),{predicate:t})}})});var uLe=N(()=>{"use strict";u();var vQt=ce(),yQt=O_().find;vQt({target:"AsyncIterator",proto:!0,real:!0,forced:!0},{find:function(t){return yQt(this,t)}})});var JJ=N((cfn,fLe)=>{"use strict";u();var _Qt=cr(),bQt=jn(),cLe=dr(),pLe=ra(),xQt=Oh(),wQt=Na(),EQt=nn(),SQt=nA(),TQt=EQt("asyncIterator");fLe.exports=function(e){var t=cLe(e),r=!0,n=wQt(t,TQt),o;return bQt(n)||(n=xQt(t),r=!1),n!==void 0?o=_Qt(n,t):(o=t,r=!0),cLe(o),pLe(r?o:new SQt(pLe(o)))}});var mLe=N(()=>{"use strict";u();var IQt=ce(),dLe=cr(),MQt=un(),aA=dr(),CQt=Qr(),AQt=ra(),OQt=P_(),hLe=Ns(),PQt=JJ(),DQt=PE(),NQt=OQt(function(e){var t=this,r=t.iterator,n=t.mapper;return new e(function(o,i){var a=function(y){t.done=!0,i(y)},c=function(y){DQt(r,a,y,a)},h=function(){try{e.resolve(aA(dLe(t.next,r))).then(function(y){try{if(aA(y).done)t.done=!0,o(hLe(void 0,!0));else{var w=y.value;try{var E=n(w,t.counter++),A=function(P){try{t.inner=PQt(P),m()}catch(j){c(j)}};CQt(E)?e.resolve(E).then(A,c):A(E)}catch(P){c(P)}}}catch(P){a(P)}},a)}catch(y){a(y)}},m=function(){var y=t.inner;if(y)try{e.resolve(aA(dLe(y.next,y.iterator))).then(function(w){try{aA(w).done?(t.inner=null,h()):o(hLe(w.value,!1))}catch(E){c(E)}},c)}catch(w){c(w)}else h()};m()})});IQt({target:"AsyncIterator",proto:!0,real:!0,forced:!0},{flatMap:function(t){return aA(this),MQt(t),new NQt(AQt(this),{mapper:t,inner:null})}})});var gLe=N(()=>{"use strict";u();var LQt=ce(),kQt=O_().forEach;LQt({target:"AsyncIterator",proto:!0,real:!0,forced:!0},{forEach:function(t){return kQt(this,t)}})});var QJ=N((yfn,vLe)=>{"use strict";u();var RQt=cr(),jQt=P_();vLe.exports=jQt(function(){return RQt(this.next,this.iterator)},!0)});var yLe=N(()=>{"use strict";u();var qQt=ce(),zQt=Jn(),FQt=El(),UQt=JJ(),BQt=OE(),VQt=QJ();qQt({target:"AsyncIterator",stat:!0,forced:!0},{from:function(t){var r=UQt(typeof t=="string"?zQt(t):t);return FQt(BQt,r.iterator)?r.iterator:new VQt(r)}})});var _Le=N(()=>{"use strict";u();var GQt=ce(),HQt=ZJ();GQt({target:"AsyncIterator",proto:!0,real:!0,forced:!0},{indexed:HQt})});var bLe=N(()=>{"use strict";u();var $Qt=ce(),WQt=YJ();$Qt({target:"AsyncIterator",proto:!0,real:!0,forced:!0},{map:WQt})});var xLe=N(()=>{"use strict";u();var YQt=ce(),ZQt=cr(),KQt=un(),eQ=dr(),XQt=Qr(),JQt=ln(),QQt=ra(),eer=PE(),tQ=JQt("Promise"),ter=TypeError;YQt({target:"AsyncIterator",proto:!0,real:!0,forced:!0},{reduce:function(t){eQ(this),KQt(t);var r=QQt(this),n=r.iterator,o=r.next,i=arguments.length<2,a=i?void 0:arguments[1],c=0;return new tQ(function(h,m){var y=function(E){eer(n,m,E,m)},w=function(){try{tQ.resolve(eQ(ZQt(o,n))).then(function(E){try{if(eQ(E).done)i?m(new ter("Reduce of empty iterator with no initial value")):h(a);else{var A=E.value;if(i)i=!1,a=A,w();else try{var P=t(a,A,c),j=function(D){a=D,w()};XQt(P)?tQ.resolve(P).then(j,y):j(P)}catch(D){y(D)}}c++}catch(D){m(D)}},m)}catch(E){m(E)}};w()})}})});var wLe=N(()=>{"use strict";u();var rer=ce(),ner=O_().some;rer({target:"AsyncIterator",proto:!0,real:!0,forced:!0},{some:function(t){return ner(this,t)}})});var TLe=N(()=>{"use strict";u();var oer=ce(),ELe=cr(),SLe=dr(),ier=ra(),aer=iE(),ser=aE(),ler=P_(),rQ=Ns(),uer=ler(function(e){var t=this,r=t.iterator,n;if(!t.remaining--){var o=rQ(void 0,!0);return t.done=!0,n=r.return,n!==void 0?e.resolve(ELe(n,r,void 0)).then(function(){return o}):o}return e.resolve(ELe(t.next,r)).then(function(i){return SLe(i).done?(t.done=!0,rQ(void 0,!0)):rQ(i.value,!1)}).then(null,function(i){throw t.done=!0,i})});oer({target:"AsyncIterator",proto:!0,real:!0,forced:!0},{take:function(t){SLe(this);var r=ser(aer(+t));return new uer(ier(this),{remaining:r})}})});var ILe=N(()=>{"use strict";u();var cer=ce(),per=O_().toArray;cer({target:"AsyncIterator",proto:!0,real:!0,forced:!0},{toArray:function(){return per(this,void 0,[])}})});var Pk=N((Ufn,DLe)=>{"use strict";u();var CLe=Ho(),fer=Sy(),nQ=Ns(),der=gc(),her=Qr(),mer=Gi(),ALe=Wr(),sA="Incorrect Iterator.range arguments",iQ="NumericRangeIterator",ger=CLe.set,OLe=CLe.getterFor(iQ),MLe=RangeError,oQ=TypeError,PLe=fer(function(t,r,n,o,i,a){if(typeof t!=o||r!==1/0&&r!==-1/0&&typeof r!=o)throw new oQ(sA);if(t===1/0||t===-1/0)throw new MLe(sA);var c=r>t,h=!1,m;if(n===void 0)m=void 0;else if(her(n))m=n.step,h=!!n.inclusive;else if(typeof n==o)m=n;else throw new oQ(sA);if(der(m)&&(m=c?a:-a),typeof m!=o)throw new oQ(sA);if(m===1/0||m===-1/0||m===i&&t!==r)throw new MLe(sA);var y=t!==t||r!==r||m!==m||r>t!=m>i;ger(this,{type:iQ,start:t,end:r,step:m,inclusive:h,hitsEnd:y,currentCount:i,zero:i}),ALe||(this.start=t,this.end=r,this.step=m,this.inclusive=h)},iQ,function(){var t=OLe(this);if(t.hitsEnd)return nQ(void 0,!0);var r=t.start,n=t.end,o=t.step,i=r+o*t.currentCount++;i===n&&(t.hitsEnd=!0);var a=t.inclusive,c;return n>r?c=a?i>n:i>=n:c=a?n>i:n>=i,c?(t.hitsEnd=!0,nQ(void 0,!0)):nQ(i,!1)}),Ok=function(e){mer(PLe.prototype,e,{get:function(){return OLe(this)[e]},set:function(){},configurable:!0,enumerable:!1})};ALe&&(Ok("start"),Ok("end"),Ok("inclusive"),Ok("step"));DLe.exports=PLe});var NLe=N(()=>{"use strict";u();var ver=ce(),yer=Pk();typeof BigInt=="function"&&ver({target:"BigInt",stat:!0,forced:!0},{range:function(t,r,n){return new yer(t,r,n,"bigint",BigInt(0),BigInt(1))}})});var aQ=N(($fn,jLe)=>{"use strict";u();v3();gk();var RLe=ln(),_er=La(),LLe=Qr(),ber=Object,xer=TypeError,wer=RLe("Map"),Eer=RLe("WeakMap"),Dk=function(){this.object=null,this.symbol=null,this.primitives=null,this.objectsByIndex=_er(null)};Dk.prototype.get=function(e,t){return this[e]||(this[e]=t())};Dk.prototype.next=function(e,t,r){var n=r?this.objectsByIndex[e]||(this.objectsByIndex[e]=new Eer):this.primitives||(this.primitives=new wer),o=n.get(t);return o||n.set(t,o=new Dk),o};var kLe=new Dk;jLe.exports=function(){var e=kLe,t=arguments.length,r,n;for(r=0;r<t;r++)LLe(n=arguments[r])&&(e=e.next(r,n,!0));if(this===ber&&e===kLe)throw new xer("Composite keys must contain a non-primitive component");for(r=0;r<t;r++)LLe(n=arguments[r])||(e=e.next(r,n,!1));return e}});var zLe=N(()=>{"use strict";u();var Ser=ce(),Ter=Sl(),Ier=aQ(),Mer=ln(),qLe=La(),Cer=Object,Aer=function(){var e=Mer("Object","freeze");return e?e(qLe(null)):qLe(null)};Ser({global:!0,forced:!0},{compositeKey:function(){return Ter(Ier,Cer,arguments).get("object",Aer)}})});var ULe=N(()=>{"use strict";u();var Oer=ce(),Per=aQ(),FLe=ln(),Der=Sl();Oer({global:!0,forced:!0},{compositeSymbol:function(){return arguments.length===1&&typeof arguments[0]=="string"?FLe("Symbol").for(arguments[0]):Der(Per,null,arguments).get("symbol",FLe("Symbol"))}})});var BLe=N(()=>{"use strict";u();nY()});var VLe=N(()=>{"use strict";u();var Ner=ce(),Ler=Lt(),ker=Ler(DataView.prototype.getUint8);Ner({target:"DataView",proto:!0,forced:!0},{getUint8Clamped:function(t){return ker(this,t)}})});var GLe=N(()=>{"use strict";u();sY()});var HLe=N(()=>{"use strict";u();var Rer=ce(),jer=Lt(),qer=oY(),zer=Jw(),Fer=KX(),Uer=jer(DataView.prototype.setUint8);Rer({target:"DataView",proto:!0,forced:!0},{setUint8Clamped:function(t,r){qer(this);var n=zer(t);return Uer(this,n,Fer(r))}})});var KLe=N(()=>{"use strict";u();var Ber=ce(),Lk=Wr(),Ver=ln(),$Le=un(),Ger=au(),WLe=ti(),Her=Qp(),$er=Gi(),YLe=nn(),ZLe=Ho(),sQ=UJ(),Wer=Ver("SuppressedError"),Yer=ReferenceError,Zer=YLe("dispose"),Ker=YLe("toStringTag"),Rk="DisposableStack",Xer=ZLe.set,kk=ZLe.getterFor(Rk),lQ="sync-dispose",lA="disposed",Jer="pending",Nk=function(e){var t=kk(e);if(t.state===lA)throw new Yer(Rk+" already disposed");return t},uQ=function(){Xer(Ger(this,NE),{type:Rk,state:Jer,stack:[]}),Lk||(this.disposed=!1)},NE=uQ.prototype;Her(NE,{dispose:function(){var t=kk(this);if(t.state!==lA){t.state=lA,Lk||(this.disposed=!0);for(var r=t.stack,n=r.length,o=!1,i;n;){var a=r[--n];r[n]=null;try{a()}catch(c){o?i=new Wer(c,i):(o=!0,i=c)}}if(t.stack=null,o)throw i}},use:function(t){return sQ(Nk(this),t,lQ),t},adopt:function(t,r){var n=Nk(this);return $Le(r),sQ(n,void 0,lQ,function(){r(t)}),t},defer:function(t){var r=Nk(this);$Le(t),sQ(r,void 0,lQ,t)},move:function(){var t=Nk(this),r=new uQ;return kk(r).stack=t.stack,t.stack=[],t.state=lA,Lk||(this.disposed=!0),r}});Lk&&$er(NE,"disposed",{configurable:!0,get:function(){return kk(this).state===lA}});WLe(NE,Zer,NE.dispose,{name:"dispose"});WLe(NE,Ker,Rk,{nonWritable:!0});Ber({global:!0,constructor:!0},{DisposableStack:uQ})});var e3e=N(()=>{"use strict";u();var Qer=ce(),JLe=ln(),etr=Qr(),ttr=ku(),rtr=Gt(),QLe="Error",pQ="DOMException",ntr=Object.setPrototypeOf||{}.__proto__,XLe=JLe(pQ),cQ=Error,jk=cQ.isError,otr=!jk||!ntr||rtr(function(){return XLe&&!jk(new XLe(pQ))||!jk(new cQ(QLe,{cause:function(){}}))||jk(JLe("Object","create")(cQ.prototype))});Qer({target:"Error",stat:!0,sham:!0,forced:otr},{isError:function(t){if(!etr(t))return!1;var r=ttr(t);return r===QLe||r===pQ}})});var fQ=N((ydn,t3e)=>{"use strict";u();var itr=Lt(),atr=un();t3e.exports=function(){return itr(atr(this))}});var r3e=N(()=>{"use strict";u();var str=ce(),ltr=fQ();str({target:"Function",proto:!0,forced:!0},{demethodize:ltr})});var o3e=N(()=>{"use strict";u();var utr=ce(),ctr=Lt(),ptr=jn(),ftr=GM(),dtr=Wn(),htr=Wr(),mtr=Object.getOwnPropertyDescriptor,n3e=/^\s*class\b/,gtr=ctr(n3e.exec),vtr=function(e){try{if(!htr||!gtr(n3e,ftr(e)))return!1}catch(r){}var t=mtr(e,"prototype");return!!t&&dtr(t,"writable")&&!t.writable};utr({target:"Function",stat:!0,sham:!0,forced:!0},{isCallable:function(t){return ptr(t)&&!vtr(t)}})});var i3e=N(()=>{"use strict";u();var ytr=ce(),_tr=vd();ytr({target:"Function",stat:!0,forced:!0},{isConstructor:_tr})});var l3e=N(()=>{"use strict";u();var btr=nn(),xtr=Ei().f,a3e=btr("metadata"),s3e=Function.prototype;s3e[a3e]===void 0&&xtr(s3e,a3e,{value:null})});var u3e=N(()=>{"use strict";u();var wtr=ce(),Etr=fQ();wtr({target:"Function",proto:!0,forced:!0,name:"demethodize"},{unThis:Etr})});var c3e=N(()=>{"use strict";u();NY()});var p3e=N(()=>{"use strict";u();qY()});var dQ=N((Udn,f3e)=>{"use strict";u();f3();var Str=cr(),Ttr=Ey().IteratorPrototype.map,Itr=function(e,t){return[t,e]};f3e.exports=function(){return Str(Ttr,this,Itr)}});var d3e=N(()=>{"use strict";u();var Mtr=ce(),Ctr=dQ();Mtr({target:"Iterator",name:"indexed",proto:!0,real:!0,forced:!0},{asIndexedPairs:Ctr})});var g3e=N(()=>{"use strict";u();var Atr=ce(),h3e=cr(),Otr=un(),m3e=dr(),Ptr=Oh(),Dtr=Dy(),Ntr=Ns(),Ltr=Array,ktr=Dtr(function(){for(;;){var e=this.iterator;if(!e){var t=this.nextIterableIndex++,r=this.iterables;if(t>=r.length)return this.done=!0,Ntr(void 0,!0);var n=r[t];this.iterables[t]=null,e=this.iterator=h3e(n.method,n.iterable),this.next=e.next}var o=m3e(h3e(this.next,e));if(o.done){this.iterator=null,this.next=null;continue}return o}},!1,!0);Atr({target:"Iterator",stat:!0,forced:!0},{concat:function(){for(var t=arguments.length,r=Ltr(t),n=0;n<t;n++){var o=m3e(arguments[n]);r[n]={iterable:o,method:Otr(Ptr(o))}}return new ktr({iterables:r,nextIterableIndex:0,iterator:null,next:null})}})});var _3e=N(()=>{"use strict";u();var Rtr=cr(),jtr=ti(),qtr=Na(),ztr=Wn(),Ftr=nn(),v3e=Ey().IteratorPrototype,y3e=Ftr("dispose");ztr(v3e,y3e)||jtr(v3e,y3e,function(){var e=qtr(this,"return");e&&Rtr(e,this)})});var b3e=N(()=>{"use strict";u();VY()});var x3e=N(()=>{"use strict";u();HY()});var w3e=N(()=>{"use strict";u();WY()});var E3e=N(()=>{"use strict";u();ZY()});var S3e=N(()=>{"use strict";u();tZ()});var T3e=N(()=>{"use strict";u();nZ()});var I3e=N(()=>{"use strict";u();oZ()});var M3e=N(()=>{"use strict";u();var Utr=ce(),Btr=dQ();Utr({target:"Iterator",proto:!0,real:!0,forced:!0},{indexed:Btr})});var C3e=N(()=>{"use strict";u();f3()});var O3e=N(()=>{"use strict";u();var Vtr=ce(),A3e=Pk(),Gtr=TypeError;Vtr({target:"Iterator",stat:!0,forced:!0},{range:function(t,r,n){if(typeof t=="number")return new A3e(t,r,n,"number",0,1);if(typeof t=="bigint")return new A3e(t,r,n,"bigint",BigInt(0),BigInt(1));throw new Gtr("Incorrect Iterator.range arguments")}})});var P3e=N(()=>{"use strict";u();sZ()});var D3e=N(()=>{"use strict";u();uZ()});var N3e=N(()=>{"use strict";u();pZ()});var L3e=N(()=>{"use strict";u();fZ()});var R3e=N(()=>{"use strict";u();var Htr=ce(),$tr=dr(),Wtr=nA(),Ytr=QJ(),k3e=ra();Htr({target:"Iterator",proto:!0,real:!0,forced:!0},{toAsync:function(){return new Ytr(k3e(new Wtr(k3e($tr(this)))))}})});var hQ=N((Vhn,j3e)=>{"use strict";u();var Ztr=Gt();j3e.exports=!Ztr(function(){var e="9007199254740993",t=JSON.rawJSON(e);return!JSON.isRawJSON(t)||JSON.stringify(t)!==e})});var mQ=N((Hhn,q3e)=>{"use strict";u();var Ktr=Qr(),Xtr=Ho().get;q3e.exports=function(t){if(!Ktr(t))return!1;var r=Xtr(t);return!!r&&r.type==="RawJSON"}});var z3e=N(()=>{"use strict";u();var Jtr=ce(),Qtr=hQ(),err=mQ();Jtr({target:"JSON",stat:!0,forced:!Qtr},{isRawJSON:err})});var vQ=N((Khn,V3e)=>{"use strict";u();var gQ=Lt(),trr=Wn(),qk=SyntaxError,rrr=parseInt,nrr=String.fromCharCode,orr=gQ("".charAt),F3e=gQ("".slice),U3e=gQ(/./.exec),B3e={"\\\"":"\"","\\\\":"\\","\\/":"/","\\b":"\b","\\f":"\f","\\n":`
`,"\\r":"\r","\\t":"\t"},irr=/^[\da-f]{4}$/i,arr=/^[\u0000-\u001F]$/;V3e.exports=function(e,t){for(var r=!0,n="";t<e.length;){var o=orr(e,t);if(o==="\\"){var i=F3e(e,t,t+2);if(trr(B3e,i))n+=B3e[i],t+=2;else if(i==="\\u"){t+=2;var a=F3e(e,t,t+4);if(!U3e(irr,a))throw new qk("Bad Unicode escape at: "+t);n+=nrr(rrr(a,16)),t+=4}else throw new qk("Unknown escape sequence: \""+i+"\"")}else if(o==="\""){r=!1,t++;break}else{if(U3e(arr,o))throw new qk("Bad control character in string literal at: "+t);n+=o,t++}}if(r)throw new qk("Unterminated string at: "+t);return{value:n,end:t}}});var X3e=N(()=>{"use strict";u();var srr=ce(),lrr=Wr(),TQ=ur(),urr=ln(),zk=Lt(),crr=cr(),Z3e=jn(),prr=Qr(),frr=gd(),drr=Wn(),hrr=Sn(),G3e=ho(),wQ=Xp(),K3e=Gt(),mrr=vQ(),grr=dy(),H3e=TQ.JSON,vrr=TQ.Number,LE=TQ.SyntaxError,IQ=H3e&&H3e.parse,yrr=urr("Object","keys"),_rr=Object.getOwnPropertyDescriptor,Il=zk("".charAt),yQ=zk("".slice),_Q=zk(/./.exec),$3e=zk([].push),bQ=/^\d$/,brr=/^[1-9]$/,xrr=/^[\d-]$/,uA=/^[\t\n\r ]$/,xQ=0,W3e=1,wrr=function(e,t){e=hrr(e);var r=new SQ(e,0,""),n=r.parse(),o=n.value,i=r.skip(uA,n.end);if(i<e.length)throw new LE("Unexpected extra character: \""+Il(e,i)+"\" after the parsed data at: "+i);return Z3e(t)?EQ({"":o},"",t,n):o},EQ=function(e,t,r,n){var o=e[t],i=n&&o===n.value,a=i&&typeof n.source=="string"?{source:n.source}:{},c,h,m,y,w;if(prr(o)){var E=frr(o),A=i?n.nodes:E?[]:{};if(E)for(c=A.length,m=G3e(o),y=0;y<m;y++)Y3e(o,y,EQ(o,""+y,r,y<c?A[y]:void 0));else for(h=yrr(o),m=G3e(h),y=0;y<m;y++)w=h[y],Y3e(o,w,EQ(o,w,r,drr(A,w)?A[w]:void 0))}return crr(r,e,t,o,a)},Y3e=function(e,t,r){if(lrr){var n=_rr(e,t);if(n&&!n.configurable)return}r===void 0?delete e[t]:wQ(e,t,r)},Err=function(e,t,r,n){this.value=e,this.end=t,this.source=r,this.nodes=n},SQ=function(e,t){this.source=e,this.index=t};SQ.prototype={fork:function(e){return new SQ(this.source,e)},parse:function(){var e=this.source,t=this.skip(uA,this.index),r=this.fork(t),n=Il(e,t);if(_Q(xrr,n))return r.number();switch(n){case"{":return r.object();case"[":return r.array();case"\"":return r.string();case"t":return r.keyword(!0);case"f":return r.keyword(!1);case"n":return r.keyword(null)}throw new LE("Unexpected character: \""+n+"\" at: "+t)},node:function(e,t,r,n,o){return new Err(t,n,e?null:yQ(this.source,r,n),o)},object:function(){for(var e=this.source,t=this.index+1,r=!1,n={},o={};t<e.length;){if(t=this.until(["\"","}"],t),Il(e,t)==="}"&&!r){t++;break}var i=this.fork(t).string(),a=i.value;t=i.end,t=this.until([":"],t)+1,t=this.skip(uA,t),i=this.fork(t).parse(),wQ(o,a,i),wQ(n,a,i.value),t=this.until([",","}"],i.end);var c=Il(e,t);if(c===",")r=!0,t++;else if(c==="}"){t++;break}}return this.node(W3e,n,this.index,t,o)},array:function(){for(var e=this.source,t=this.index+1,r=!1,n=[],o=[];t<e.length;){if(t=this.skip(uA,t),Il(e,t)==="]"&&!r){t++;break}var i=this.fork(t).parse();if($3e(o,i),$3e(n,i.value),t=this.until([",","]"],i.end),Il(e,t)===",")r=!0,t++;else if(Il(e,t)==="]"){t++;break}}return this.node(W3e,n,this.index,t,o)},string:function(){var e=this.index,t=mrr(this.source,this.index+1);return this.node(xQ,t.value,e,t.end)},number:function(){var e=this.source,t=this.index,r=t;if(Il(e,r)==="-"&&r++,Il(e,r)==="0")r++;else if(_Q(brr,Il(e,r)))r=this.skip(bQ,r+1);else throw new LE("Failed to parse number at: "+r);if(Il(e,r)==="."&&(r=this.skip(bQ,r+1)),Il(e,r)==="e"||Il(e,r)==="E"){r++,(Il(e,r)==="+"||Il(e,r)==="-")&&r++;var n=r;if(r=this.skip(bQ,r),n===r)throw new LE("Failed to parse number's exponent value at: "+r)}return this.node(xQ,vrr(yQ(e,t,r)),t,r)},keyword:function(e){var t=""+e,r=this.index,n=r+t.length;if(yQ(this.source,r,n)!==t)throw new LE("Failed to parse value at: "+r);return this.node(xQ,e,r,n)},skip:function(e,t){for(var r=this.source;t<r.length&&_Q(e,Il(r,t));t++);return t},until:function(e,t){t=this.skip(uA,t);for(var r=Il(this.source,t),n=0;n<e.length;n++)if(e[n]===r)return t;throw new LE("Unexpected character: \""+r+"\" at: "+t)}};var Srr=K3e(function(){var e="9007199254740993",t;return IQ(e,function(r,n,o){t=o.source}),t!==e}),Trr=grr&&!K3e(function(){return 1/IQ("-0 \t")!==-1/0});srr({target:"JSON",stat:!0,forced:Srr},{parse:function(t,r){return Trr&&!Z3e(r)?IQ(t):wrr(t,r)}})});var ike=N(()=>{"use strict";u();var nke=ce(),Irr=Sg(),oke=hQ(),Fk=ln(),Mrr=cr(),OQ=Lt(),Crr=jn(),Arr=mQ(),Orr=Sn(),Prr=Xp(),Drr=vQ(),Nrr=F$(),Lrr=my(),krr=Ho().set,Rrr=String,J3e=SyntaxError,jrr=Fk("JSON","parse"),Q3e=Fk("JSON","stringify"),qrr=Fk("Object","create"),zrr=Fk("Object","freeze"),CQ=OQ("".charAt),MQ=OQ("".slice),Frr=OQ([].push),AQ=Lrr(),eke=AQ.length,tke="Unacceptable as raw JSON",rke=function(e){return e===" "||e==="\t"||e===`
`||e==="\r"};nke({target:"JSON",stat:!0,forced:!oke},{rawJSON:function(t){var r=Orr(t);if(r===""||rke(CQ(r,0))||rke(CQ(r,r.length-1)))throw new J3e(tke);var n=jrr(r);if(typeof n=="object"&&n!==null)throw new J3e(tke);var o=qrr(null);return krr(o,{type:"RawJSON"}),Prr(o,"rawJSON",r),Irr?zrr(o):o}});Q3e&&nke({target:"JSON",stat:!0,arity:3,forced:!oke},{stringify:function(t,r,n){var o=Nrr(r),i=[],a=Q3e(t,function(A,P){var j=Crr(o)?Mrr(o,this,Rrr(A),P):P;return Arr(j)?AQ+(Frr(i,j.rawJSON)-1):j},n);if(typeof a!="string")return a;for(var c="",h=a.length,m=0;m<h;m++){var y=CQ(a,m);if(y==="\""){var w=Drr(a,++m).end-1,E=MQ(a,m,w);c+=MQ(E,0,eke)===AQ?i[MQ(E,eke)]:"\""+E+"\"",m=w}else c+=y}return c}})});var Ml=N((omn,ake)=>{"use strict";u();var Urr=Ls().has;ake.exports=function(e){return Urr(e),e}});var ske=N(()=>{"use strict";u();var Brr=ce(),Vrr=Ml(),Grr=Ls().remove;Brr({target:"Map",proto:!0,real:!0,forced:!0},{deleteAll:function(){for(var t=Vrr(this),r=!0,n,o=0,i=arguments.length;o<i;o++)n=Grr(t,arguments[o]),r=r&&n;return!!r}})});var uke=N(()=>{"use strict";u();var Hrr=ce(),$rr=Ml(),PQ=Ls(),Wrr=PQ.get,Yrr=PQ.has,lke=PQ.set;Hrr({target:"Map",proto:!0,real:!0,forced:!0},{emplace:function(t,r){var n=$rr(this),o,i;return Yrr(n,t)?(o=Wrr(n,t),"update"in r&&(o=r.update(o,t,n),lke(n,t,o)),o):(i=r.insert(t,n),lke(n,t,i),i)}})});var cke=N(()=>{"use strict";u();var Zrr=ce(),Krr=ci(),Xrr=Ml(),Jrr=ef();Zrr({target:"Map",proto:!0,real:!0,forced:!0},{every:function(t){var r=Xrr(this),n=Krr(t,arguments.length>1?arguments[1]:void 0);return Jrr(r,function(o,i){if(!n(o,i,r))return!1},!0)!==!1}})});var fke=N(()=>{"use strict";u();var Qrr=ce(),enr=ci(),tnr=Ml(),pke=Ls(),rnr=ef(),nnr=pke.Map,onr=pke.set;Qrr({target:"Map",proto:!0,real:!0,forced:!0},{filter:function(t){var r=tnr(this),n=enr(t,arguments.length>1?arguments[1]:void 0),o=new nnr;return rnr(r,function(i,a){n(i,a,r)&&onr(o,a,i)}),o}})});var dke=N(()=>{"use strict";u();var inr=ce(),anr=ci(),snr=Ml(),lnr=ef();inr({target:"Map",proto:!0,real:!0,forced:!0},{find:function(t){var r=snr(this),n=anr(t,arguments.length>1?arguments[1]:void 0),o=lnr(r,function(i,a){if(n(i,a,r))return{value:i}},!0);return o&&o.value}})});var hke=N(()=>{"use strict";u();var unr=ce(),cnr=ci(),pnr=Ml(),fnr=ef();unr({target:"Map",proto:!0,real:!0,forced:!0},{findKey:function(t){var r=pnr(this),n=cnr(t,arguments.length>1?arguments[1]:void 0),o=fnr(r,function(i,a){if(n(i,a,r))return{key:a}},!0);return o&&o.key}})});var cA=N((Smn,mke)=>{"use strict";u();var dnr=ci(),hnr=dr(),mnr=Jn(),gnr=ma();mke.exports=function(e,t,r){return function(o){var i=mnr(o),a=arguments.length,c=a>1?arguments[1]:void 0,h=c!==void 0,m=h?dnr(c,a>2?arguments[2]:void 0):void 0,y=new e,w=0;return gnr(i,function(E){var A=h?m(E,w++):E;r?t(y,hnr(A)[0],A[1]):t(y,A)}),y}}});var vke=N(()=>{"use strict";u();var vnr=ce(),gke=Ls(),ynr=cA();vnr({target:"Map",stat:!0,forced:!0},{from:ynr(gke.Map,gke.set,!0)})});var yke=N(()=>{"use strict";u();var _nr=ce(),bnr=Ml(),DQ=Ls(),xnr=DQ.get,wnr=DQ.has,Enr=DQ.set;_nr({target:"Map",proto:!0,real:!0,forced:!0},{getOrInsert:function(t,r){return wnr(bnr(this),t)?xnr(this,t):(Enr(this,t,r),r)}})});var _ke=N(()=>{"use strict";u();var Snr=ce(),Tnr=un(),Inr=Ml(),NQ=Ls(),Mnr=NQ.get,Cnr=NQ.has,Anr=NQ.set;Snr({target:"Map",proto:!0,real:!0,forced:!0},{getOrInsertComputed:function(t,r){if(Inr(this),Tnr(r),Cnr(this,t))return Mnr(this,t);t===0&&1/t===-1/0&&(t=0);var n=r(t);return Anr(this,t,n),n}})});var bke=N(()=>{"use strict";u();bZ()});var wke=N((qmn,xke)=>{"use strict";u();xke.exports=function(e,t){return e===t||e!==e&&t!==t}});var Eke=N(()=>{"use strict";u();var Onr=ce(),Pnr=wke(),Dnr=Ml(),Nnr=ef();Onr({target:"Map",proto:!0,real:!0,forced:!0},{includes:function(t){return Nnr(Dnr(this),function(r){if(Pnr(r,t))return!0},!0)===!0}})});var Tke=N(()=>{"use strict";u();var Lnr=ce(),knr=cr(),Rnr=ma(),jnr=jn(),Ske=un(),qnr=Ls().Map;Lnr({target:"Map",stat:!0,forced:!0},{keyBy:function(t,r){var n=jnr(this)?this:qnr,o=new n;Ske(r);var i=Ske(o.set);return Rnr(t,function(a){knr(i,o,r(a),a)}),o}})});var Ike=N(()=>{"use strict";u();var znr=ce(),Fnr=Ml(),Unr=ef();znr({target:"Map",proto:!0,real:!0,forced:!0},{keyOf:function(t){var r=Unr(Fnr(this),function(n,o){if(n===t)return{key:o}},!0);return r&&r.key}})});var Cke=N(()=>{"use strict";u();var Bnr=ce(),Vnr=ci(),Gnr=Ml(),Mke=Ls(),Hnr=ef(),$nr=Mke.Map,Wnr=Mke.set;Bnr({target:"Map",proto:!0,real:!0,forced:!0},{mapKeys:function(t){var r=Gnr(this),n=Vnr(t,arguments.length>1?arguments[1]:void 0),o=new $nr;return Hnr(r,function(i,a){Wnr(o,n(i,a,r),i)}),o}})});var Oke=N(()=>{"use strict";u();var Ynr=ce(),Znr=ci(),Knr=Ml(),Ake=Ls(),Xnr=ef(),Jnr=Ake.Map,Qnr=Ake.set;Ynr({target:"Map",proto:!0,real:!0,forced:!0},{mapValues:function(t){var r=Knr(this),n=Znr(t,arguments.length>1?arguments[1]:void 0),o=new Jnr;return Xnr(r,function(i,a){Qnr(o,a,n(i,a,r))}),o}})});var Pke=N(()=>{"use strict";u();var eor=ce(),tor=Ml(),ror=ma(),nor=Ls().set;eor({target:"Map",proto:!0,real:!0,arity:1,forced:!0},{merge:function(t){for(var r=tor(this),n=arguments.length,o=0;o<n;)ror(arguments[o++],function(i,a){nor(r,i,a)},{AS_ENTRIES:!0});return r}})});var pA=N((ogn,Dke)=>{"use strict";u();var oor=dr();Dke.exports=function(e,t,r){return function(){for(var o=new e,i=arguments.length,a=0;a<i;a++){var c=arguments[a];r?t(o,oor(c)[0],c[1]):t(o,c)}return o}}});var Lke=N(()=>{"use strict";u();var ior=ce(),Nke=Ls(),aor=pA();ior({target:"Map",stat:!0,forced:!0},{of:aor(Nke.Map,Nke.set,!0)})});var kke=N(()=>{"use strict";u();var sor=ce(),lor=un(),uor=Ml(),cor=ef(),por=TypeError;sor({target:"Map",proto:!0,real:!0,forced:!0},{reduce:function(t){var r=uor(this),n=arguments.length<2,o=n?void 0:arguments[1];if(lor(t),cor(r,function(i,a){n?(n=!1,o=i):o=t(o,i,a,r)}),n)throw new por("Reduce of empty map with no initial value");return o}})});var Rke=N(()=>{"use strict";u();var dor=ce(),hor=ci(),mor=Ml(),gor=ef();dor({target:"Map",proto:!0,real:!0,forced:!0},{some:function(t){var r=mor(this),n=hor(t,arguments.length>1?arguments[1]:void 0);return gor(r,function(o,i){if(n(o,i,r))return!0},!0)===!0}})});var qke=N(()=>{"use strict";u();var vor=ce(),jke=un(),yor=Ml(),LQ=Ls(),_or=TypeError,bor=LQ.get,xor=LQ.has,wor=LQ.set;vor({target:"Map",proto:!0,real:!0,forced:!0},{update:function(t,r){var n=yor(this),o=arguments.length;jke(r);var i=xor(n,t);if(!i&&o<3)throw new _or("Updating absent value");var a=i?bor(n,t):jke(o>2?arguments[2]:void 0)(t,n);return wor(n,t,r(a,t,n)),n}})});var Vk=N((ygn,zke)=>{"use strict";u();var Uk=cr(),kQ=un(),Bk=jn(),Eor=dr(),Sor=TypeError;zke.exports=function(t,r){var n=Eor(this),o=kQ(n.get),i=kQ(n.has),a=kQ(n.set),c=arguments.length>2?arguments[2]:void 0,h;if(!Bk(r)&&!Bk(c))throw new Sor("At least one callback required");return Uk(i,n,t)?(h=Uk(o,n,t),Bk(r)&&(h=r(h),Uk(a,n,t,h))):Bk(c)&&(h=c(),Uk(a,n,t,h)),h}});var Fke=N(()=>{"use strict";u();var Tor=ce(),Ior=Vk();Tor({target:"Map",proto:!0,real:!0,name:"upsert",forced:!0},{updateOrInsert:Ior})});var Uke=N(()=>{"use strict";u();var Mor=ce(),Cor=Vk();Mor({target:"Map",proto:!0,real:!0,forced:!0},{upsert:Cor})});var Vke=N((Ign,Bke)=>{"use strict";u();var Aor=TypeError;Bke.exports=function(e){if(typeof e=="number")return e;throw new Aor("Argument is not a number")}});var $ke=N(()=>{"use strict";u();var Oor=ce(),RQ=Vke(),Gke=iE(),Hke=T3(),Por=RangeError,Dor=Math.min,Nor=Math.max;Oor({target:"Math",stat:!0,forced:!0},{clamp:function(t,r,n){if(RQ(t),Gke(RQ(r)),Gke(RQ(n)),Hke(r,0)&&Hke(n,-0)||r>n)throw new Por("`min` should be smaller than `max`");return Dor(n,Nor(r,t))}})});var Wke=N(()=>{"use strict";u();var Lor=ce();Lor({target:"Math",stat:!0,nonConfigurable:!0,nonWritable:!0},{DEG_PER_RAD:Math.PI/180})});var Yke=N(()=>{"use strict";u();var kor=ce(),Ror=180/Math.PI;kor({target:"Math",stat:!0,forced:!0},{degrees:function(t){return t*Ror}})});var jQ=N((jgn,Zke)=>{"use strict";u();Zke.exports=function(t,r,n,o,i){var a=+t,c=+r,h=+n,m=+o,y=+i;return a!==a||c!==c||h!==h||m!==m||y!==y?NaN:a===1/0||a===-1/0?a:(a-c)*(y-m)/(h-c)+m}});var Kke=N(()=>{"use strict";u();var jor=ce(),qor=jQ(),zor=XL();jor({target:"Math",stat:!0,forced:!0},{fscale:function(t,r,n,o,i){return zor(qor(t,r,n,o,i))}})});var Xke=N(()=>{"use strict";u();SZ()});var Jke=N(()=>{"use strict";u();var For=ce();For({target:"Math",stat:!0,forced:!0},{iaddh:function(t,r,n,o){var i=t>>>0,a=r>>>0,c=n>>>0;return a+(o>>>0)+((i&c|(i|c)&~(i+c>>>0))>>>31)|0}})});var Qke=N(()=>{"use strict";u();var Uor=ce();Uor({target:"Math",stat:!0,forced:!0},{imulh:function(t,r){var n=65535,o=+t,i=+r,a=o&n,c=i&n,h=o>>16,m=i>>16,y=(h*c>>>0)+(a*c>>>16);return h*m+(y>>16)+((a*m>>>0)+(y&n)>>16)}})});var eRe=N(()=>{"use strict";u();var Bor=ce();Bor({target:"Math",stat:!0,forced:!0},{isubh:function(t,r,n,o){var i=t>>>0,a=r>>>0,c=n>>>0;return a-(o>>>0)-((~i&c|~(i^c)&i-c>>>0)>>>31)|0}})});var tRe=N(()=>{"use strict";u();var Vor=ce();Vor({target:"Math",stat:!0,nonConfigurable:!0,nonWritable:!0},{RAD_PER_DEG:180/Math.PI})});var rRe=N(()=>{"use strict";u();var Gor=ce(),Hor=Math.PI/180;Gor({target:"Math",stat:!0,forced:!0},{radians:function(t){return t*Hor}})});var nRe=N(()=>{"use strict";u();var $or=ce(),Wor=jQ();$or({target:"Math",stat:!0,forced:!0},{scale:Wor})});var sRe=N(()=>{"use strict";u();var Yor=ce(),Zor=dr(),Kor=DZ(),Xor=Sy(),Jor=Ns(),oRe=Ho(),iRe="Seeded Random",aRe=iRe+" Generator",Qor="Math.seededPRNG() argument should have a \"seed\" field with a finite value.",eir=oRe.set,tir=oRe.getterFor(aRe),rir=TypeError,nir=Xor(function(t){eir(this,{type:aRe,seed:t%2147483647})},iRe,function(){var t=tir(this),r=t.seed=(t.seed*1103515245+12345)%2147483647;return Jor((r&1073741823)/1073741823,!1)});Yor({target:"Math",stat:!0,forced:!0},{seededPRNG:function(t){var r=Zor(t).seed;if(!Kor(r))throw new rir(Qor);return new nir(r)}})});var lRe=N(()=>{"use strict";u();var oir=ce();oir({target:"Math",stat:!0,forced:!0},{signbit:function(t){var r=+t;return r===r&&r===0?1/r===-1/0:r<0}})});var dRe=N(()=>{"use strict";u();var iir=ce(),air=Lt(),sir=ma(),lir=RangeError,uir=TypeError,tf=1/0,cir=NaN,D_=Math.abs,UQ=Math.pow,uRe=air([].push),fA=UQ(2,1023),pir=UQ(2,53)-1,cRe=Number.MAX_VALUE,pRe=UQ(2,971),dA={},qQ={},zQ={},FQ={},fRe={},Gk=function(e,t){var r=e+t,n=t-(r-e);return{hi:r,lo:n}};iir({target:"Math",stat:!0},{sumPrecise:function(t){var r=[],n=0,o=FQ;switch(sir(t,function(B){if(++n>=pir)throw new lir("Maximum allowed index exceeded");if(typeof B!="number")throw new uir("Value is not a number");o!==dA&&(B!==B?o=dA:B===tf?o=o===qQ?dA:zQ:B===-tf?o=o===zQ?dA:qQ:(B!==0||1/B===tf)&&(o===FQ||o===fRe)&&(o=fRe,uRe(r,B)))}),o){case dA:return cir;case qQ:return-tf;case zQ:return tf;case FQ:return-0}for(var i=[],a=0,c,h,m,y,w,E,A=0;A<r.length;A++){c=r[A];for(var P=0,j=0;j<i.length;j++){if(h=i[j],D_(c)<D_(h)&&(E=c,c=h,h=E),m=Gk(c,h),y=m.hi,w=m.lo,D_(y)===tf){var D=y===tf?1:-1;a+=D,c=c-D*fA-D*fA,D_(c)<D_(h)&&(E=c,c=h,h=E),m=Gk(c,h),y=m.hi,w=m.lo}w!==0&&(i[P++]=w),c=y}i.length=P,c!==0&&uRe(i,c)}var L=i.length-1;if(y=0,w=0,a!==0){var z=L>=0?i[L]:0;if(L--,D_(a)>1||a>0&&z>0||a<0&&z<0)return a>0?tf:-tf;if(m=Gk(a*fA,z/2),y=m.hi,w=m.lo,w*=2,D_(2*y)===tf)return y>0?y===fA&&w===-(pRe/2)&&L>=0&&i[L]<0?cRe:tf:y===-fA&&w===pRe/2&&L>=0&&i[L]>0?-cRe:-tf;w!==0&&(i[++L]=w,w=0),y*=2}for(;L>=0&&(m=Gk(y,i[L--]),y=m.hi,w=m.lo,w===0););return L>=0&&(w<0&&i[L]<0||w>0&&i[L]>0)&&(h=w*2,c=y+h,h===c-y&&(y=c)),y}})});var hRe=N(()=>{"use strict";u();var fir=ce();fir({target:"Math",stat:!0,forced:!0},{umulh:function(t,r){var n=65535,o=+t,i=+r,a=o&n,c=i&n,h=o>>>16,m=i>>>16,y=(h*c>>>0)+(a*c>>>16);return h*m+(y>>>16)+((a*m>>>0)+(y&n)>>>16)}})});var vRe=N(()=>{"use strict";u();var dir=ce(),mA=Lt(),hir=Vi(),hA="Invalid number representation",mir="Invalid radix",gir=RangeError,Hk=SyntaxError,vir=TypeError,mRe=parseInt,yir=Math.pow,gRe=/^[\d.a-z]+$/,_ir=mA("".charAt),bir=mA(gRe.exec),xir=mA(1 .toString),wir=mA("".slice),Eir=mA("".split);dir({target:"Number",stat:!0,forced:!0},{fromString:function(t,r){var n=1;if(typeof t!="string")throw new vir(hA);if(!t.length)throw new Hk(hA);if(_ir(t,0)==="-"&&(n=-1,t=wir(t,1),!t.length))throw new Hk(hA);var o=r===void 0?10:hir(r);if(o<2||o>36)throw new gir(mir);if(!bir(gRe,t))throw new Hk(hA);var i=Eir(t,"."),a=mRe(i[0],o);if(i.length>1&&(a+=mRe(i[1],o)/yir(o,i[1].length)),o===10&&xir(a,o)!==t)throw new Hk(hA);return n*a}})});var yRe=N(()=>{"use strict";u();var Sir=ce(),Tir=Pk();Sir({target:"Number",stat:!0,forced:!0},{range:function(t,r,n){return new Tir(t,r,n,"number",0,1)}})});var _Re=N(()=>{"use strict";u();HZ()});var Wk=N((Ovn,wRe)=>{"use strict";u();var bRe=Ho(),Iir=Sy(),$k=Ns(),Mir=Wn(),Cir=p_(),Air=Jn(),xRe="Object Iterator",Oir=bRe.set,Pir=bRe.getterFor(xRe);wRe.exports=Iir(function(t,r){var n=Air(t);Oir(this,{type:xRe,mode:r,object:n,keys:Cir(n),index:0})},"Object",function(){for(var t=Pir(this),r=t.keys;;){if(r===null||t.index>=r.length)return t.object=t.keys=null,$k(void 0,!0);var n=r[t.index++],o=t.object;if(Mir(o,n)){switch(t.mode){case"keys":return $k(n,!1);case"values":return $k(o[n],!1)}return $k([n,o[n]],!1)}}})});var ERe=N(()=>{"use strict";u();var Dir=ce(),Nir=Wk();Dir({target:"Object",stat:!0,forced:!0},{iterateEntries:function(t){return new Nir(t,"entries")}})});var SRe=N(()=>{"use strict";u();var Lir=ce(),kir=Wk();Lir({target:"Object",stat:!0,forced:!0},{iterateKeys:function(t){return new kir(t,"keys")}})});var TRe=N(()=>{"use strict";u();var Rir=ce(),jir=Wk();Rir({target:"Object",stat:!0,forced:!0},{iterateValues:function(t){return new jir(t,"values")}})});var IRe=N(()=>{"use strict";u();GZ()});var RRe=N(()=>{"use strict";u();var qir=ce(),Yk=cr(),gA=Wr(),zir=Iy(),MRe=un(),Fir=dr(),Uir=au(),CRe=jn(),Bir=gc(),Vir=Qr(),Zk=Na(),Gir=ti(),BQ=Qp(),ARe=Gi(),kE=dK(),Hir=nn(),ORe=Ho(),$ir=Hir("observable"),VQ="Observable",PRe="Subscription",DRe="SubscriptionObserver",GQ=ORe.getterFor,HQ=ORe.set,Wir=GQ(VQ),NRe=GQ(PRe),Kk=GQ(DRe),LRe=function(e){this.observer=Fir(e),this.cleanup=null,this.subscriptionObserver=null};LRe.prototype={type:PRe,clean:function(){var e=this.cleanup;if(e){this.cleanup=null;try{e()}catch(t){kE(t)}}},close:function(){if(!gA){var e=this.facade,t=this.subscriptionObserver;e.closed=!0,t&&(t.closed=!0)}this.observer=null},isClosed:function(){return this.observer===null}};var $Q=function(e,t){var r=HQ(this,new LRe(e)),n;gA||(this.closed=!1);try{(n=Zk(e,"start"))&&Yk(n,e,this)}catch(c){kE(c)}if(!r.isClosed()){var o=r.subscriptionObserver=new WQ(r);try{var i=t(o),a=i;Bir(i)||(r.cleanup=CRe(i.unsubscribe)?function(){a.unsubscribe()}:MRe(i))}catch(c){o.error(c);return}r.isClosed()&&r.clean()}};$Q.prototype=BQ({},{unsubscribe:function(){var t=NRe(this);t.isClosed()||(t.close(),t.clean())}});gA&&ARe($Q.prototype,"closed",{configurable:!0,get:function(){return NRe(this).isClosed()}});var WQ=function(e){HQ(this,{type:DRe,subscriptionState:e}),gA||(this.closed=!1)};WQ.prototype=BQ({},{next:function(t){var r=Kk(this).subscriptionState;if(!r.isClosed()){var n=r.observer;try{var o=Zk(n,"next");o&&Yk(o,n,t)}catch(i){kE(i)}}},error:function(t){var r=Kk(this).subscriptionState;if(!r.isClosed()){var n=r.observer;r.close();try{var o=Zk(n,"error");o?Yk(o,n,t):kE(t)}catch(i){kE(i)}r.clean()}},complete:function(){var t=Kk(this).subscriptionState;if(!t.isClosed()){var r=t.observer;t.close();try{var n=Zk(r,"complete");n&&Yk(n,r)}catch(o){kE(o)}t.clean()}}});gA&&ARe(WQ.prototype,"closed",{configurable:!0,get:function(){return Kk(this).subscriptionState.isClosed()}});var kRe=function(t){Uir(this,YQ),HQ(this,{type:VQ,subscriber:MRe(t)})},YQ=kRe.prototype;BQ(YQ,{subscribe:function(t){var r=arguments.length;return new $Q(CRe(t)?{next:t,error:r>1?arguments[1]:void 0,complete:r>2?arguments[2]:void 0}:Vir(t)?t:{},Wir(this).subscriber)}});Gir(YQ,$ir,function(){return this});qir({global:!0,constructor:!0,forced:!0},{Observable:kRe});zir(VQ)});var qRe=N(()=>{"use strict";u();var Yir=ce(),Zir=ln(),Kir=cr(),jRe=dr(),Xir=vd(),Jir=xy(),Qir=Na(),ear=ma(),tar=nn(),rar=tar("observable");Yir({target:"Observable",stat:!0,forced:!0},{from:function(t){var r=Xir(this)?this:Zir("Observable"),n=Qir(jRe(t),rar);if(n){var o=jRe(Kir(n,t));return o.constructor===r?o:new r(function(a){return o.subscribe(a)})}var i=Jir(t);return new r(function(a){ear(i,function(c,h){if(a.next(c),a.closed)return h()},{IS_ITERATOR:!0,INTERRUPTED:!0}),a.complete()})}})});var FRe=N(()=>{"use strict";u();var nar=ce(),zRe=ln(),oar=vd(),iar=zRe("Array");nar({target:"Observable",stat:!0,forced:!0},{of:function(){for(var t=oar(this)?this:zRe("Observable"),r=arguments.length,n=iar(r),o=0;o<r;)n[o]=arguments[o++];return new t(function(i){for(var a=0;a<r;a++)if(i.next(n[a]),i.closed)return;i.complete()})}})});var URe=N(()=>{"use strict";u();RRe();qRe();FRe()});var BRe=N(()=>{"use strict";u();MK()});var VRe=N(()=>{"use strict";u();CK()});var GRe=N(()=>{"use strict";u();DK()});var HRe=N(()=>{"use strict";u();NK()});var zh=N((hyn,ZRe)=>{"use strict";u();v3();gk();var YRe=ln(),aar=Lt(),sar=mg(),$Re=YRe("Map"),lar=YRe("WeakMap"),uar=aar([].push),WRe=sar("metadata"),ZQ=WRe.store||(WRe.store=new lar),vA=function(e,t,r){var n=ZQ.get(e);if(!n){if(!r)return;ZQ.set(e,n=new $Re)}var o=n.get(t);if(!o){if(!r)return;n.set(t,o=new $Re)}return o},car=function(e,t,r){var n=vA(t,r,!1);return n===void 0?!1:n.has(e)},par=function(e,t,r){var n=vA(t,r,!1);return n===void 0?void 0:n.get(e)},far=function(e,t,r,n){vA(r,n,!0).set(e,t)},dar=function(e,t){var r=vA(e,t,!1),n=[];return r&&r.forEach(function(o,i){uar(n,i)}),n},har=function(e){return e===void 0||typeof e=="symbol"?e:String(e)};ZRe.exports={store:ZQ,getMap:vA,has:car,get:par,set:far,keys:dar,toKey:har}});var XRe=N(()=>{"use strict";u();var mar=ce(),KRe=zh(),gar=dr(),yar=KRe.toKey,_ar=KRe.set;mar({target:"Reflect",stat:!0},{defineMetadata:function(t,r,n){var o=arguments.length<4?void 0:yar(arguments[3]);_ar(t,r,gar(n),o)}})});var QRe=N(()=>{"use strict";u();var bar=ce(),KQ=zh(),xar=dr(),war=KQ.toKey,Ear=KQ.getMap,JRe=KQ.store;bar({target:"Reflect",stat:!0},{deleteMetadata:function(t,r){var n=arguments.length<3?void 0:war(arguments[2]),o=Ear(xar(r),n,!1);if(o===void 0||!o.delete(t))return!1;if(o.size)return!0;var i=JRe.get(r);return i.delete(n),!!i.size||JRe.delete(r)}})});var t6e=N(()=>{"use strict";u();var Sar=ce(),XQ=zh(),Tar=dr(),Iar=gs(),Mar=XQ.has,Car=XQ.get,Aar=XQ.toKey,e6e=function(e,t,r){var n=Mar(e,t,r);if(n)return Car(e,t,r);var o=Iar(t);return o!==null?e6e(e,o,r):void 0};Sar({target:"Reflect",stat:!0},{getMetadata:function(t,r){var n=arguments.length<3?void 0:Aar(arguments[2]);return e6e(t,Tar(r),n)}})});var i6e=N(()=>{"use strict";u();var Oar=ce(),r6e=Lt(),n6e=zh(),Par=dr(),Dar=gs(),Nar=Sk(),Lar=r6e(Nar),kar=r6e([].concat),Rar=n6e.keys,jar=n6e.toKey,o6e=function(e,t){var r=Rar(e,t),n=Dar(e);if(n===null)return r;var o=o6e(n,t);return o.length?r.length?Lar(kar(r,o)):o:r};Oar({target:"Reflect",stat:!0},{getMetadataKeys:function(t){var r=arguments.length<2?void 0:jar(arguments[1]);return o6e(Par(t),r)}})});var s6e=N(()=>{"use strict";u();var qar=ce(),a6e=zh(),zar=dr(),Far=a6e.get,Uar=a6e.toKey;qar({target:"Reflect",stat:!0},{getOwnMetadata:function(t,r){var n=arguments.length<3?void 0:Uar(arguments[2]);return Far(t,zar(r),n)}})});var u6e=N(()=>{"use strict";u();var Bar=ce(),l6e=zh(),Var=dr(),Gar=l6e.keys,Har=l6e.toKey;Bar({target:"Reflect",stat:!0},{getOwnMetadataKeys:function(t){var r=arguments.length<2?void 0:Har(arguments[1]);return Gar(Var(t),r)}})});var f6e=N(()=>{"use strict";u();var $ar=ce(),c6e=zh(),War=dr(),Yar=gs(),Zar=c6e.has,Kar=c6e.toKey,p6e=function(e,t,r){var n=Zar(e,t,r);if(n)return!0;var o=Yar(t);return o!==null?p6e(e,o,r):!1};$ar({target:"Reflect",stat:!0},{hasMetadata:function(t,r){var n=arguments.length<3?void 0:Kar(arguments[2]);return p6e(t,War(r),n)}})});var h6e=N(()=>{"use strict";u();var Xar=ce(),d6e=zh(),Jar=dr(),Qar=d6e.has,esr=d6e.toKey;Xar({target:"Reflect",stat:!0},{hasOwnMetadata:function(t,r){var n=arguments.length<3?void 0:esr(arguments[2]);return Qar(t,Jar(r),n)}})});var g6e=N(()=>{"use strict";u();var tsr=ce(),m6e=zh(),rsr=dr(),nsr=m6e.toKey,osr=m6e.set;tsr({target:"Reflect",stat:!0},{metadata:function(t,r){return function(o,i){osr(t,r,rsr(o),nsr(i))}}})});var v6e=N(()=>{"use strict";u();ZK()});var y6e=N(()=>{"use strict";u();var isr=ce(),asr=Tl(),ssr=Xs().add;isr({target:"Set",proto:!0,real:!0,forced:!0},{addAll:function(){for(var t=asr(this),r=0,n=arguments.length;r<n;r++)ssr(t,arguments[r]);return t}})});var _6e=N(()=>{"use strict";u();var lsr=ce(),usr=Tl(),csr=Xs().remove;lsr({target:"Set",proto:!0,real:!0,forced:!0},{deleteAll:function(){for(var t=usr(this),r=!0,n,o=0,i=arguments.length;o<i;o++)n=csr(t,arguments[o]),r=r&&n;return!!r}})});var b6e=N(()=>{"use strict";u();nX()});var w6e=N((t0n,x6e)=>{"use strict";u();var psr=ku(),fsr=Wn(),dsr=gc(),hsr=nn(),msr=v_(),gsr=hsr("iterator"),vsr=Object;x6e.exports=function(e){if(dsr(e))return!1;var t=vsr(e);return t[gsr]!==void 0||"@@iterator"in t||fsr(msr,psr(t))}});var Uy=N((n0n,S6e)=>{"use strict";u();var ysr=ln(),E6e=jn(),_sr=w6e(),bsr=Qr(),xsr=ysr("Set"),wsr=function(e){return bsr(e)&&typeof e.size=="number"&&E6e(e.has)&&E6e(e.keys)};S6e.exports=function(e){return wsr(e)?e:_sr(e)?new xsr(e):e}});var T6e=N(()=>{"use strict";u();var Esr=ce(),Ssr=cr(),Tsr=Uy(),Isr=rX();Esr({target:"Set",proto:!0,real:!0,forced:!0},{difference:function(t){return Ssr(Isr,this,Tsr(t))}})});var I6e=N(()=>{"use strict";u();var Msr=ce(),Csr=ci(),Asr=Tl(),Osr=xc();Msr({target:"Set",proto:!0,real:!0,forced:!0},{every:function(t){var r=Asr(this),n=Csr(t,arguments.length>1?arguments[1]:void 0);return Osr(r,function(o){if(!n(o,o,r))return!1},!0)!==!1}})});var C6e=N(()=>{"use strict";u();var Psr=ce(),Dsr=ci(),Nsr=Tl(),M6e=Xs(),Lsr=xc(),ksr=M6e.Set,Rsr=M6e.add;Psr({target:"Set",proto:!0,real:!0,forced:!0},{filter:function(t){var r=Nsr(this),n=Dsr(t,arguments.length>1?arguments[1]:void 0),o=new ksr;return Lsr(r,function(i){n(i,i,r)&&Rsr(o,i)}),o}})});var A6e=N(()=>{"use strict";u();var jsr=ce(),qsr=ci(),zsr=Tl(),Fsr=xc();jsr({target:"Set",proto:!0,real:!0,forced:!0},{find:function(t){var r=zsr(this),n=qsr(t,arguments.length>1?arguments[1]:void 0),o=Fsr(r,function(i){if(n(i,i,r))return{value:i}},!0);return o&&o.value}})});var P6e=N(()=>{"use strict";u();var Usr=ce(),O6e=Xs(),Bsr=cA();Usr({target:"Set",stat:!0,forced:!0},{from:Bsr(O6e.Set,O6e.add,!1)})});var D6e=N(()=>{"use strict";u();aX()});var N6e=N(()=>{"use strict";u();var Vsr=ce(),Gsr=cr(),Hsr=Uy(),$sr=iX();Vsr({target:"Set",proto:!0,real:!0,forced:!0},{intersection:function(t){return Gsr($sr,this,Hsr(t))}})});var L6e=N(()=>{"use strict";u();lX()});var k6e=N(()=>{"use strict";u();var Wsr=ce(),Ysr=cr(),Zsr=Uy(),Ksr=sX();Wsr({target:"Set",proto:!0,real:!0,forced:!0},{isDisjointFrom:function(t){return Ysr(Ksr,this,Zsr(t))}})});var R6e=N(()=>{"use strict";u();cX()});var j6e=N(()=>{"use strict";u();var Xsr=ce(),Jsr=cr(),Qsr=Uy(),elr=uX();Xsr({target:"Set",proto:!0,real:!0,forced:!0},{isSubsetOf:function(t){return Jsr(elr,this,Qsr(t))}})});var q6e=N(()=>{"use strict";u();fX()});var z6e=N(()=>{"use strict";u();var tlr=ce(),rlr=cr(),nlr=Uy(),olr=pX();tlr({target:"Set",proto:!0,real:!0,forced:!0},{isSupersetOf:function(t){return rlr(olr,this,nlr(t))}})});var U6e=N(()=>{"use strict";u();var ilr=ce(),F6e=Lt(),alr=Tl(),slr=xc(),llr=Sn(),ulr=F6e([].join),clr=F6e([].push);ilr({target:"Set",proto:!0,real:!0,forced:!0},{join:function(t){var r=alr(this),n=t===void 0?",":llr(t),o=[];return slr(r,function(i){clr(o,i)}),ulr(o,n)}})});var V6e=N(()=>{"use strict";u();var plr=ce(),flr=ci(),dlr=Tl(),B6e=Xs(),hlr=xc(),mlr=B6e.Set,glr=B6e.add;plr({target:"Set",proto:!0,real:!0,forced:!0},{map:function(t){var r=dlr(this),n=flr(t,arguments.length>1?arguments[1]:void 0),o=new mlr;return hlr(r,function(i){glr(o,n(i,i,r))}),o}})});var H6e=N(()=>{"use strict";u();var vlr=ce(),G6e=Xs(),ylr=pA();vlr({target:"Set",stat:!0,forced:!0},{of:ylr(G6e.Set,G6e.add,!1)})});var $6e=N(()=>{"use strict";u();var _lr=ce(),blr=un(),xlr=Tl(),wlr=xc(),Elr=TypeError;_lr({target:"Set",proto:!0,real:!0,forced:!0},{reduce:function(t){var r=xlr(this),n=arguments.length<2,o=n?void 0:arguments[1];if(blr(t),wlr(r,function(i){n?(n=!1,o=i):o=t(o,i,i,r)}),n)throw new Elr("Reduce of empty set with no initial value");return o}})});var W6e=N(()=>{"use strict";u();var Slr=ce(),Tlr=ci(),Ilr=Tl(),Mlr=xc();Slr({target:"Set",proto:!0,real:!0,forced:!0},{some:function(t){var r=Ilr(this),n=Tlr(t,arguments.length>1?arguments[1]:void 0);return Mlr(r,function(o){if(n(o,o,r))return!0},!0)===!0}})});var Y6e=N(()=>{"use strict";u();mX()});var Z6e=N(()=>{"use strict";u();var Clr=ce(),Alr=cr(),Olr=Uy(),Plr=hX();Clr({target:"Set",proto:!0,real:!0,forced:!0},{symmetricDifference:function(t){return Alr(Plr,this,Olr(t))}})});var K6e=N(()=>{"use strict";u();vX()});var X6e=N(()=>{"use strict";u();var Dlr=ce(),Nlr=cr(),Llr=Uy(),klr=gX();Dlr({target:"Set",proto:!0,real:!0,forced:!0},{union:function(t){return Nlr(klr,this,Llr(t))}})});var J6e=N(()=>{"use strict";u();var Rlr=ce(),jlr=M_().charAt,qlr=Ni(),zlr=Vi(),Flr=Sn();Rlr({target:"String",proto:!0,forced:!0},{at:function(t){var r=Flr(qlr(this)),n=r.length,o=zlr(t),i=o>=0?o:n+o;return i<0||i>=n?void 0:jlr(r,i)}})});var JQ=N((b1n,rje)=>{"use strict";u();var tje=Lt(),Ulr=hs(),Q6e=Sn(),Blr=ho(),Vlr=TypeError,eje=tje([].push),Glr=tje([].join);rje.exports=function(t){var r=Ulr(t),n=Blr(r);if(!n)return"";for(var o=arguments.length,i=[],a=0;;){var c=r[a++];if(c===void 0)throw new Vlr("Incorrect template");if(eje(i,Q6e(c)),a===n)return Glr(i,"");a<o&&eje(i,Q6e(arguments[a]))}}});var nje=N(()=>{"use strict";u();var Hlr=ce(),$lr=JQ();Hlr({target:"String",stat:!0,forced:!0},{cooked:$lr})});var lje=N(()=>{"use strict";u();var Wlr=ce(),Ylr=Sy(),oje=Ns(),Zlr=Ni(),Klr=Sn(),ije=Ho(),aje=M_(),Xlr=aje.codeAt,Jlr=aje.charAt,sje="String Iterator",Qlr=ije.set,eur=ije.getterFor(sje),tur=Ylr(function(t){Qlr(this,{type:sje,string:t,index:0})},"String",function(){var t=eur(this),r=t.string,n=t.index,o;return n>=r.length?oje(void 0,!0):(o=Jlr(r,n),t.index+=o.length,oje({codePoint:Xlr(o,0),position:n},!1))});Wlr({target:"String",proto:!0,forced:!0},{codePoints:function(){return new tur(Klr(Zlr(this)))}})});var Fh=N((C1n,uje)=>{"use strict";u();var Xk=Lt(),Jk=WeakMap.prototype;uje.exports={WeakMap,set:Xk(Jk.set),get:Xk(Jk.get),has:Xk(Jk.has),remove:Xk(Jk.delete)}});var yje=N((O1n,vje)=>{"use strict";u();var rur=ln(),Qk=Lt(),nur=String.fromCharCode,our=rur("String","fromCodePoint"),QQ=Qk("".charAt),mje=Qk("".charCodeAt),cje=Qk("".indexOf),pje=Qk("".slice),tee=48,gje=57,fje=97,iur=102,dje=65,aur=70,hje=function(e,t){var r=mje(e,t);return r>=tee&&r<=gje},eee=function(e,t,r){if(r>=e.length)return-1;for(var n=0;t<r;t++){var o=sur(mje(e,t));if(o===-1)return-1;n=n*16+o}return n},sur=function(e){return e>=tee&&e<=gje?e-tee:e>=fje&&e<=iur?e-fje+10:e>=dje&&e<=aur?e-dje+10:-1};vje.exports=function(e){for(var t="",r=0,n=0,o;(n=cje(e,"\\",n))>-1;){if(t+=pje(e,r,n),++n===e.length)return;var i=QQ(e,n++);switch(i){case"b":t+="\b";break;case"t":t+="\t";break;case"n":t+=`
`;break;case"v":t+="\x0B";break;case"f":t+="\f";break;case"r":t+="\r";break;case"\r":n<e.length&&QQ(e,n)===`
`&&++n;case`
`:case"\u2028":case"\u2029":break;case"0":if(hje(e,n))return;t+="\0";break;case"x":if(o=eee(e,n,n+2),o===-1)return;n+=2,t+=nur(o);break;case"u":if(n<e.length&&QQ(e,n)==="{"){var a=cje(e,"}",++n);if(a===-1)return;o=eee(e,n,a),n=a+1}else o=eee(e,n,n+4),n+=4;if(o===-1||o>1114111)return;t+=our(o);break;default:if(hje(i,0))return;t+=i}r=n}return t+pje(e,r)}});var Cje=N(()=>{"use strict";u();var lur=Sg(),uur=ce(),cur=WM(),eR=Lt(),Eje=Sl(),Sje=dr(),pur=Jn(),fur=jn(),dur=ho(),hur=Ei().f,mur=yc(),tR=Fh(),gur=JQ(),vur=yje(),Tje=x_(),ree=new tR.WeakMap,yur=tR.get,_ur=tR.has,bur=tR.set,nee=Array,yA=TypeError,_je=Object.freeze||Object,xur=Object.isFrozen,wur=Math.min,bje=eR("".charAt),Ije=eR("".slice),Eur=eR("".split),xje=eR(/./.exec),Sur=/([\n\u2028\u2029]|\r\n?)/g,Tur=RegExp("^["+Tje+"]*"),Iur=RegExp("[^"+Tje+"]"),wje="Invalid tag",Mur="Invalid opening line",Cur="Invalid closing line",Aur=function(e){var t=e.raw;if(lur&&!xur(t))throw new yA("Raw template should be frozen");if(_ur(ree,t))return yur(ree,t);var r=Our(t),n=Dur(r);return hur(n,"raw",{value:_je(r)}),_je(n),bur(ree,t,n),n},Our=function(e){var t=pur(e),r=dur(t),n=nee(r),o=nee(r),i=0,a,c,h,m;if(!r)throw new yA(wje);for(;i<r;i++){var y=t[i];if(typeof y=="string")n[i]=Eur(y,Sur);else throw new yA(wje)}for(i=0;i<r;i++){var w=i+1===r;if(a=n[i],i===0){if(a.length===1||a[0].length>0)throw new yA(Mur);a[1]=""}if(w){if(a.length===1||xje(Iur,a[a.length-1]))throw new yA(Cur);a[a.length-2]="",a[a.length-1]=""}for(var E=2;E<a.length;E+=2){var A=a[E],P=E+1===a.length&&!w,j=xje(Tur,A)[0];if(!P&&j.length===A.length){a[E]="";continue}c=Pur(j,c)}}var D=c?c.length:0;for(i=0;i<r;i++){for(a=n[i],h=a[0],m=1;m<a.length;m+=2)h+=a[m]+Ije(a[m+1],D);o[i]=h}return o},Pur=function(e,t){if(t===void 0||e===t)return e;for(var r=0,n=wur(e.length,t.length);r<n&&bje(e,r)===bje(t,r);r++);return Ije(e,0,r)},Dur=function(e){for(var t=0,r=e.length,n=nee(r);t<r;t++)n[t]=vur(e[t]);return n},Mje=function(e){return cur(function(t){var r=mur(arguments);return r[0]=Aur(Sje(t)),Eje(e,this,r)},"")},Nur=Mje(gur);uur({target:"String",stat:!0,forced:!0},{dedent:function(t){return Sje(t),fur(t)?Mje(t):Eje(Nur,this,arguments)}})});var Aje=N(()=>{"use strict";u();bX()});var Oje=N(()=>{"use strict";u();CX()});var Pje=N(()=>{"use strict";u();qX()});var Dje=N(()=>{"use strict";u();HX()});var Nje=N(()=>{"use strict";u();var Lur=ur(),kur=ha(),Rur=Ei().f,jur=Ys().f,oee=Lur.Symbol;kur("asyncDispose");oee&&(_A=jur(oee,"asyncDispose"),_A.enumerable&&_A.configurable&&_A.writable&&Rur(oee,"asyncDispose",{value:_A.value,enumerable:!1,configurable:!1,writable:!1}));var _A});var Lje=N(()=>{"use strict";u();var qur=ha();qur("customMatcher")});var kje=N(()=>{"use strict";u();var zur=ur(),Fur=ha(),Uur=Ei().f,Bur=Ys().f,iee=zur.Symbol;Fur("dispose");iee&&(bA=Bur(iee,"dispose"),bA.enumerable&&bA.configurable&&bA.writable&&Uur(iee,"dispose",{value:bA.value,enumerable:!1,configurable:!1,writable:!1}));var bA});var see=N((r_n,Rje)=>{"use strict";u();var Vur=ln(),Gur=Lt(),aee=Vur("Symbol"),Hur=aee.keyFor,$ur=Gur(aee.prototype.valueOf);Rje.exports=aee.isRegisteredSymbol||function(t){try{return Hur($ur(t))!==void 0}catch(r){return!1}}});var jje=N(()=>{"use strict";u();var Wur=ce(),Yur=see();Wur({target:"Symbol",stat:!0},{isRegisteredSymbol:Yur})});var qje=N(()=>{"use strict";u();var Zur=ce(),Kur=see();Zur({target:"Symbol",stat:!0,name:"isRegisteredSymbol"},{isRegistered:Kur})});var cee=N((c_n,Gje)=>{"use strict";u();var Xur=mg(),Bje=ln(),Jur=Lt(),Qur=hg(),ecr=nn(),nR=Bje("Symbol"),zje=nR.isWellKnownSymbol,Vje=Bje("Object","getOwnPropertyNames"),tcr=Jur(nR.prototype.valueOf),Fje=Xur("wks");for(rR=0,lee=Vje(nR),Uje=lee.length;rR<Uje;rR++)try{uee=lee[rR],Qur(nR[uee])&&ecr(uee)}catch(e){}var uee,rR,lee,Uje;Gje.exports=function(t){if(zje&&zje(t))return!0;try{for(var r=tcr(t),n=0,o=Vje(Fje),i=o.length;n<i;n++)if(Fje[o[n]]==r)return!0}catch(a){}return!1}});var Hje=N(()=>{"use strict";u();var rcr=ce(),ncr=cee();rcr({target:"Symbol",stat:!0,forced:!0},{isWellKnownSymbol:ncr})});var $je=N(()=>{"use strict";u();var ocr=ce(),icr=cee();ocr({target:"Symbol",stat:!0,name:"isWellKnownSymbol",forced:!0},{isWellKnown:icr})});var Wje=N(()=>{"use strict";u();var acr=ha();acr("matcher")});var Yje=N(()=>{"use strict";u();var scr=ha();scr("metadata")});var Zje=N(()=>{"use strict";u();var lcr=ha();lcr("metadataKey")});var Kje=N(()=>{"use strict";u();var ucr=ha();ucr("observable")});var Xje=N(()=>{"use strict";u();var ccr=ha();ccr("patternMatch")});var Jje=N(()=>{"use strict";u();var pcr=ha();pcr("replaceAll")});var eqe=N(()=>{"use strict";u();var fcr=ln(),dcr=OC(),hcr=jJ(),Qje=Zn(),mcr=_g(),gcr=Qje.aTypedArrayConstructor,vcr=Qje.exportTypedArrayStaticMethod;vcr("fromAsync",function(t){var r=this,n=arguments.length,o=n>1?arguments[1]:void 0,i=n>2?arguments[2]:void 0;return new(fcr("Promise"))(function(a){dcr(r),a(hcr(t,o,i))}).then(function(a){return mcr(gcr(r),a)})},!0)});var tqe=N(()=>{"use strict";u();aJ()});var nqe=N(()=>{"use strict";u();var rqe=Zn(),ycr=ka().filterReject,_cr=nk(),bcr=rqe.aTypedArray,xcr=rqe.exportTypedArrayMethod;xcr("filterOut",function(t){var r=ycr(bcr(this),t,arguments.length>1?arguments[1]:void 0);return _cr(this,r)},!0)});var iqe=N(()=>{"use strict";u();var oqe=Zn(),wcr=ka().filterReject,Ecr=nk(),Scr=oqe.aTypedArray,Tcr=oqe.exportTypedArrayMethod;Tcr("filterReject",function(t){var r=wcr(Scr(this),t,arguments.length>1?arguments[1]:void 0);return Ecr(this,r)},!0)});var aqe=N(()=>{"use strict";u();sJ()});var sqe=N(()=>{"use strict";u();lJ()});var lqe=N(()=>{"use strict";u();var pee=Zn(),Icr=wk(),Mcr=pee.aTypedArray,Ccr=pee.getTypedArrayConstructor,Acr=pee.exportTypedArrayMethod;Acr("groupBy",function(t){var r=arguments.length>1?arguments[1]:void 0;return Icr(Mcr(this),t,r,Ccr)},!0)});var uqe=N(()=>{"use strict";u();wJ()});var cqe=N(()=>{"use strict";u();EJ()});var pqe=N(()=>{"use strict";u();var fee=Zn(),Ocr=ho(),Pcr=J3(),Dcr=md(),Ncr=WC(),Lcr=Vi(),kcr=fee.aTypedArray,Rcr=fee.getTypedArrayConstructor,jcr=fee.exportTypedArrayMethod,qcr=Math.max,zcr=Math.min;jcr("toSpliced",function(t,r){var n=kcr(this),o=Rcr(n),i=Ocr(n),a=Dcr(t,i),c=arguments.length,h=0,m,y,w,E,A,P,j;if(c===0)m=y=0;else if(c===1)m=0,y=i-a;else if(y=zcr(qcr(Lcr(r),0),i-a),m=c-2,m){E=new o(m),w=Pcr(E);for(var D=2;D<c;D++)A=arguments[D],E[D-2]=w?Ncr(A):+A}for(P=i+m-y,j=new o(P);h<a;h++)j[h]=n[h];for(;h<a+m;h++)j[h]=E[h-a];for(;h<P;h++)j[h]=n[h+y-m];return j},!0)});var fqe=N(()=>{"use strict";u();var Fcr=Lt(),dee=Zn(),Ucr=_g(),Bcr=Sk(),Vcr=dee.aTypedArray,Gcr=dee.getTypedArrayConstructor,Hcr=dee.exportTypedArrayMethod,$cr=Fcr(Bcr);Hcr("uniqueBy",function(t){return Vcr(this),Ucr(Gcr(this),$cr(this,t))},!0)});var dqe=N(()=>{"use strict";u();TJ()});var hee=N((ybn,hqe)=>{"use strict";u();var Wcr=Qr(),Ycr=String,Zcr=TypeError;hqe.exports=function(e){if(e===void 0||Wcr(e))return e;throw new Zcr(Ycr(e)+" is not an object or undefined")}});var xA=N((bbn,_qe)=>{"use strict";u();var yqe="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",mqe=yqe+"+/",gqe=yqe+"-_",vqe=function(e){for(var t={},r=0;r<64;r++)t[e.charAt(r)]=r;return t};_qe.exports={i2c:mqe,c2i:vqe(mqe),i2cUrl:gqe,c2iUrl:vqe(gqe)}});var mee=N((wbn,bqe)=>{"use strict";u();var Kcr=TypeError;bqe.exports=function(e){var t=e&&e.alphabet;if(t===void 0||t==="base64"||t==="base64url")return t||"base64";throw new Kcr("Incorrect `alphabet` option")}});var _ee=N((Sbn,Eqe)=>{"use strict";u();var xqe=ur(),Xcr=Lt(),Jcr=hee(),Qcr=BC(),epr=Wn(),wqe=xA(),tpr=mee(),rpr=oE(),npr=wqe.c2i,opr=wqe.c2iUrl,By=xqe.SyntaxError,ipr=xqe.TypeError,N_=Xcr("".charAt),gee=function(e,t){for(var r=e.length;t<r;t++){var n=N_(e,t);if(n!==" "&&n!=="\t"&&n!==`
`&&n!=="\f"&&n!=="\r")break}return t},vee=function(e,t,r){var n=e.length;n<4&&(e+=n===2?"AA":"A");var o=(t[N_(e,0)]<<18)+(t[N_(e,1)]<<12)+(t[N_(e,2)]<<6)+t[N_(e,3)],i=[o>>16&255,o>>8&255,o&255];if(n===2){if(r&&i[1]!==0)throw new By("Extra bits");return[i[0]]}if(n===3){if(r&&i[2]!==0)throw new By("Extra bits");return[i[0],i[1]]}return i},yee=function(e,t,r){for(var n=t.length,o=0;o<n;o++)e[r+o]=t[o];return r+n};Eqe.exports=function(e,t,r,n){Qcr(e),Jcr(t);var o=tpr(t)==="base64"?npr:opr,i=t?t.lastChunkHandling:void 0;if(i===void 0&&(i="loose"),i!=="loose"&&i!=="strict"&&i!=="stop-before-partial")throw new ipr("Incorrect `lastChunkHandling` option");r&&rpr(r.buffer);var a=r||[],c=0,h=0,m="",y=0;if(n)for(;;){if(y=gee(e,y),y===e.length){if(m.length>0){if(i==="stop-before-partial")break;if(i==="loose"){if(m.length===1)throw new By("Malformed padding: exactly one additional character");c=yee(a,vee(m,o,!1),c)}else throw new By("Missing padding")}h=e.length;break}var w=N_(e,y);if(++y,w==="="){if(m.length<2)throw new By("Padding is too early");if(y=gee(e,y),m.length===2){if(y===e.length){if(i==="stop-before-partial")break;throw new By("Malformed padding: only one =")}N_(e,y)==="="&&(++y,y=gee(e,y))}if(y<e.length)throw new By("Unexpected character after padding");c=yee(a,vee(m,o,i==="strict"),c),h=e.length;break}if(!epr(o,w))throw new By("Unexpected character");var E=n-c;if(E===1&&m.length===2||E===2&&m.length===3||(m+=w,m.length===4&&(c=yee(a,vee(m,o,!1),c),m="",h=y,c===n)))break}return{bytes:a,read:h,written:c}}});var Tqe=N(()=>{"use strict";u();var apr=ce(),spr=ur(),lpr=_g(),upr=_ee(),Sqe=spr.Uint8Array;Sqe&&apr({target:"Uint8Array",stat:!0},{fromBase64:function(t){var r=upr(t,arguments.length>1?arguments[1]:void 0,null,9007199254740991);return lpr(Sqe,r.bytes)}})});var xee=N((Abn,Aqe)=>{"use strict";u();var bee=ur(),Mqe=Lt(),cpr=bee.Uint8Array,Iqe=bee.SyntaxError,ppr=bee.parseInt,fpr=Math.min,Cqe=/[^\da-f]/i,dpr=Mqe(Cqe.exec),hpr=Mqe("".slice);Aqe.exports=function(e,t){var r=e.length;if(r%2!==0)throw new Iqe("String should be an even number of characters");for(var n=t?fpr(t.length,r/2):r/2,o=t||new cpr(n),i=0,a=0;a<n;){var c=hpr(e,i,i+=2);if(dpr(Cqe,c))throw new Iqe("String should only contain hex characters");o[a++]=ppr(c,16)}return{bytes:o,read:i}}});var Oqe=N(()=>{"use strict";u();var mpr=ce(),gpr=ur(),vpr=BC(),ypr=xee();gpr.Uint8Array&&mpr({target:"Uint8Array",stat:!0},{fromHex:function(t){return ypr(vpr(t)).bytes}})});var wA=N((Lbn,Pqe)=>{"use strict";u();var _pr=ku(),bpr=TypeError;Pqe.exports=function(e){if(_pr(e)==="Uint8Array")return e;throw new bpr("Argument is not an Uint8Array")}});var Dqe=N(()=>{"use strict";u();var xpr=ce(),wpr=ur(),Epr=_ee(),Spr=wA(),oR=wpr.Uint8Array,Tpr=!oR||!oR.prototype.setFromBase64||!function(){var e=new oR([255,255,255,255,255]);try{e.setFromBase64("MjYyZg===")}catch(t){return e[0]===50&&e[1]===54&&e[2]===50&&e[3]===255&&e[4]===255}}();oR&&xpr({target:"Uint8Array",proto:!0,forced:Tpr},{setFromBase64:function(t){Spr(this);var r=Epr(t,arguments.length>1?arguments[1]:void 0,this,this.length);return{read:r.read,written:r.written}}})});var Nqe=N(()=>{"use strict";u();var Ipr=ce(),Mpr=ur(),Cpr=BC(),Apr=wA(),Opr=oE(),Ppr=xee();Mpr.Uint8Array&&Ipr({target:"Uint8Array",proto:!0},{setFromHex:function(t){Apr(this),Cpr(t),Opr(this.buffer);var r=Ppr(t,this).read;return{read:r,written:r/2}}})});var kqe=N(()=>{"use strict";u();var Dpr=ce(),Npr=ur(),Lpr=Lt(),kpr=hee(),Rpr=wA(),jpr=oE(),Lqe=xA(),qpr=mee(),zpr=Lqe.i2c,Fpr=Lqe.i2cUrl,Upr=Lpr("".charAt);Npr.Uint8Array&&Dpr({target:"Uint8Array",proto:!0},{toBase64:function(){var t=Rpr(this),r=arguments.length?kpr(arguments[0]):void 0,n=qpr(r)==="base64"?zpr:Fpr,o=!!r&&!!r.omitPadding;jpr(this.buffer);for(var i="",a=0,c=t.length,h,m=function(y){return Upr(n,h>>6*y&63)};a+2<c;a+=3)h=(t[a]<<16)+(t[a+1]<<8)+t[a+2],i+=m(3)+m(2)+m(1)+m(0);return a+2===c?(h=(t[a]<<16)+(t[a+1]<<8),i+=m(3)+m(2)+m(1)+(o?"":"=")):a+1===c&&(h=t[a]<<16,i+=m(3)+m(2)+(o?"":"==")),i}})});var Rqe=N(()=>{"use strict";u();var Bpr=ce(),Vpr=ur(),Gpr=Lt(),Hpr=wA(),$pr=oE(),Wpr=Gpr(1 .toString);Vpr.Uint8Array&&Bpr({target:"Uint8Array",proto:!0},{toHex:function(){Hpr(this),$pr(this.buffer);for(var t="",r=0,n=this.length;r<n;r++){var o=Wpr(this[r],16);t+=o.length===1?"0"+o:o}return t}})});var EA=N((Ybn,jqe)=>{"use strict";u();var Ypr=Fh().has;jqe.exports=function(e){return Ypr(e),e}});var qqe=N(()=>{"use strict";u();var Zpr=ce(),Kpr=EA(),Xpr=Fh().remove;Zpr({target:"WeakMap",proto:!0,real:!0,forced:!0},{deleteAll:function(){for(var t=Kpr(this),r=!0,n,o=0,i=arguments.length;o<i;o++)n=Xpr(t,arguments[o]),r=r&&n;return!!r}})});var Fqe=N(()=>{"use strict";u();var Jpr=ce(),zqe=Fh(),Qpr=cA();Jpr({target:"WeakMap",stat:!0,forced:!0},{from:Qpr(zqe.WeakMap,zqe.set,!0)})});var Bqe=N(()=>{"use strict";u();var efr=ce(),Uqe=Fh(),tfr=pA();efr({target:"WeakMap",stat:!0,forced:!0},{of:tfr(Uqe.WeakMap,Uqe.set,!0)})});var Gqe=N(()=>{"use strict";u();var rfr=ce(),nfr=EA(),wee=Fh(),ofr=wee.get,ifr=wee.has,Vqe=wee.set;rfr({target:"WeakMap",proto:!0,real:!0,forced:!0},{emplace:function(t,r){var n=nfr(this),o,i;return ifr(n,t)?(o=ofr(n,t),"update"in r&&(o=r.update(o,t,n),Vqe(n,t,o)),o):(i=r.insert(t,n),Vqe(n,t,i),i)}})});var Hqe=N(()=>{"use strict";u();var afr=ce(),sfr=EA(),Eee=Fh(),lfr=Eee.get,ufr=Eee.has,cfr=Eee.set;afr({target:"WeakMap",proto:!0,real:!0,forced:!0},{getOrInsert:function(t,r){return ufr(sfr(this),t)?lfr(this,t):(cfr(this,t,r),r)}})});var Yqe=N((pxn,Wqe)=>{"use strict";u();var See=Fh(),$qe=new See.WeakMap,pfr=See.set,ffr=See.remove;Wqe.exports=function(e){return pfr($qe,e,1),ffr($qe,e),e}});var Zqe=N(()=>{"use strict";u();var dfr=ce(),hfr=un(),mfr=EA(),gfr=Yqe(),Tee=Fh(),vfr=Tee.get,yfr=Tee.has,_fr=Tee.set;dfr({target:"WeakMap",proto:!0,real:!0,forced:!0},{getOrInsertComputed:function(t,r){if(mfr(this),gfr(t),hfr(r),yfr(this,t))return vfr(this,t);var n=r(t);return _fr(this,t,n),n}})});var Kqe=N(()=>{"use strict";u();var bfr=ce(),xfr=Vk();bfr({target:"WeakMap",proto:!0,real:!0,forced:!0},{upsert:xfr})});var RE=N((_xn,Xqe)=>{"use strict";u();var Iee=Lt(),Mee=WeakSet.prototype;Xqe.exports={WeakSet,add:Iee(Mee.add),has:Iee(Mee.has),remove:Iee(Mee.delete)}});var Cee=N((xxn,Jqe)=>{"use strict";u();var wfr=RE().has;Jqe.exports=function(e){return wfr(e),e}});var Qqe=N(()=>{"use strict";u();var Efr=ce(),Sfr=Cee(),Tfr=RE().add;Efr({target:"WeakSet",proto:!0,real:!0,forced:!0},{addAll:function(){for(var t=Sfr(this),r=0,n=arguments.length;r<n;r++)Tfr(t,arguments[r]);return t}})});var eze=N(()=>{"use strict";u();var Ifr=ce(),Mfr=Cee(),Cfr=RE().remove;Ifr({target:"WeakSet",proto:!0,real:!0,forced:!0},{deleteAll:function(){for(var t=Mfr(this),r=!0,n,o=0,i=arguments.length;o<i;o++)n=Cfr(t,arguments[o]),r=r&&n;return!!r}})});var rze=N(()=>{"use strict";u();var Afr=ce(),tze=RE(),Ofr=cA();Afr({target:"WeakSet",stat:!0,forced:!0},{from:Ofr(tze.WeakSet,tze.add,!1)})});var oze=N(()=>{"use strict";u();var Pfr=ce(),nze=RE(),Dfr=pA();Pfr({target:"WeakSet",stat:!0,forced:!0},{of:Dfr(nze.WeakSet,nze.add,!1)})});var pze=N(()=>{"use strict";u();var Nfr=ce(),Lfr=ur(),sze=ln(),Aee=Lt(),kfr=cr(),iR=Gt(),Rfr=Sn(),jfr=hp(),ize=xA().c2i,lze=/[^\d+/a-z]/i,qfr=/[\t\n\f\r ]+/g,zfr=/[=]{1,2}$/,L_=sze("atob"),Ffr=String.fromCharCode,Ufr=Aee("".charAt),aze=Aee("".replace),Bfr=Aee(lze.exec),jE=!!L_&&!iR(function(){return L_("aGk=")!=="hi"}),uze=jE&&iR(function(){return L_(" ")!==""}),cze=jE&&!iR(function(){L_("a")}),Vfr=jE&&!iR(function(){L_()}),Gfr=jE&&L_.length!==1,Hfr=!jE||uze||cze||Vfr||Gfr;Nfr({global:!0,bind:!0,enumerable:!0,forced:Hfr},{atob:function(t){if(jfr(arguments.length,1),jE&&!uze&&!cze)return kfr(L_,Lfr,t);var r=aze(Rfr(t),qfr,""),n="",o=0,i=0,a,c,h;if(r.length%4===0&&(r=aze(r,zfr,"")),a=r.length,a%4===1||Bfr(lze,r))throw new(sze("DOMException"))("The string is not correctly encoded","InvalidCharacterError");for(;o<a;)c=Ufr(r,o++),h=i%4?h*64+ize[c]:ize[c],i++%4&&(n+=Ffr(255&h>>(-2*i&6)));return n}})});var gze=N(()=>{"use strict";u();var $fr=ce(),Wfr=ur(),hze=ln(),mze=Lt(),Yfr=cr(),Oee=Gt(),fze=Sn(),Zfr=hp(),Kfr=xA().i2c,qE=hze("btoa"),dze=mze("".charAt),Xfr=mze("".charCodeAt),SA=!!qE&&!Oee(function(){return qE("hi")!=="aGk="}),Jfr=SA&&!Oee(function(){qE()}),Qfr=SA&&Oee(function(){return qE(null)!=="bnVsbA=="}),edr=SA&&qE.length!==1;$fr({global:!0,bind:!0,enumerable:!0,forced:!SA||Jfr||Qfr||edr},{btoa:function(t){if(Zfr(arguments.length,1),SA)return Yfr(qE,Wfr,fze(t));for(var r=fze(t),n="",o=0,i=Kfr,a,c;dze(r,o)||(i="=",o%1);){if(c=Xfr(r,o+=3/4),c>255)throw new(hze("DOMException"))("The string contains characters outside of the Latin1 range","InvalidCharacterError");a=a<<8|c,n+=dze(i,63&a>>8-o%1*8)}return n}})});var Pee=N((Uxn,vze)=>{"use strict";u();vze.exports={CSSRuleList:0,CSSStyleDeclaration:0,CSSValueList:0,ClientRectList:0,DOMRectList:0,DOMStringList:0,DOMTokenList:1,DataTransferItemList:0,FileList:0,HTMLAllCollection:0,HTMLCollection:0,HTMLFormElement:0,HTMLSelectElement:0,MediaList:0,MimeTypeArray:0,NamedNodeMap:0,NodeList:1,PaintRequestList:0,Plugin:0,PluginArray:0,SVGLengthList:0,SVGNumberList:0,SVGPathSegList:0,SVGPointList:0,SVGStringList:0,SVGTransformList:0,SourceBufferList:0,StyleSheetList:0,TextTrackCueList:0,TextTrackList:0,TouchList:0}});var Nee=N((Vxn,_ze)=>{"use strict";u();var tdr=VM(),Dee=tdr("span").classList,yze=Dee&&Dee.constructor&&Dee.constructor.prototype;_ze.exports=yze===Object.prototype?void 0:yze});var Eze=N(()=>{"use strict";u();var bze=ur(),xze=Pee(),rdr=Nee(),Lee=hW(),ndr=ms(),wze=function(e){if(e&&e.forEach!==Lee)try{ndr(e,"forEach",Lee)}catch(t){e.forEach=Lee}};for(aR in xze)xze[aR]&&wze(bze[aR]&&bze[aR].prototype);var aR;wze(rdr)});var Cze=N(()=>{"use strict";u();var Sze=ur(),Ize=Pee(),odr=Nee(),TA=uC(),Tze=ms(),idr=Ru(),adr=nn(),kee=adr("iterator"),Ree=TA.values,Mze=function(e,t){if(e){if(e[kee]!==Ree)try{Tze(e,kee,Ree)}catch(n){e[kee]=Ree}if(idr(e,t,!0),Ize[t]){for(var r in TA)if(e[r]!==TA[r])try{Tze(e,r,TA[r])}catch(n){e[r]=TA[r]}}}};for(sR in Ize)Mze(Sze[sR]&&Sze[sR].prototype,sR);var sR;Mze(odr,"DOMTokenList")});var jee=N((Xxn,Aze)=>{"use strict";u();Aze.exports={IndexSizeError:{s:"INDEX_SIZE_ERR",c:1,m:1},DOMStringSizeError:{s:"DOMSTRING_SIZE_ERR",c:2,m:0},HierarchyRequestError:{s:"HIERARCHY_REQUEST_ERR",c:3,m:1},WrongDocumentError:{s:"WRONG_DOCUMENT_ERR",c:4,m:1},InvalidCharacterError:{s:"INVALID_CHARACTER_ERR",c:5,m:1},NoDataAllowedError:{s:"NO_DATA_ALLOWED_ERR",c:6,m:0},NoModificationAllowedError:{s:"NO_MODIFICATION_ALLOWED_ERR",c:7,m:1},NotFoundError:{s:"NOT_FOUND_ERR",c:8,m:1},NotSupportedError:{s:"NOT_SUPPORTED_ERR",c:9,m:1},InUseAttributeError:{s:"INUSE_ATTRIBUTE_ERR",c:10,m:1},InvalidStateError:{s:"INVALID_STATE_ERR",c:11,m:1},SyntaxError:{s:"SYNTAX_ERR",c:12,m:1},InvalidModificationError:{s:"INVALID_MODIFICATION_ERR",c:13,m:1},NamespaceError:{s:"NAMESPACE_ERR",c:14,m:1},InvalidAccessError:{s:"INVALID_ACCESS_ERR",c:15,m:1},ValidationError:{s:"VALIDATION_ERR",c:16,m:0},TypeMismatchError:{s:"TYPE_MISMATCH_ERR",c:17,m:1},SecurityError:{s:"SECURITY_ERR",c:18,m:1},NetworkError:{s:"NETWORK_ERR",c:19,m:1},AbortError:{s:"ABORT_ERR",c:20,m:1},URLMismatchError:{s:"URL_MISMATCH_ERR",c:21,m:1},QuotaExceededError:{s:"QUOTA_EXCEEDED_ERR",c:22,m:1},TimeoutError:{s:"TIMEOUT_ERR",c:23,m:1},InvalidNodeTypeError:{s:"INVALID_NODE_TYPE_ERR",c:24,m:1},DataCloneError:{s:"DATA_CLONE_ERR",c:25,m:1}}});var Fze=N(()=>{"use strict";u();var sdr=ce(),cR=ln(),ldr=pY(),Vee=Gt(),udr=La(),Gee=mc(),pR=Ei().f,cdr=ti(),lR=Gi(),uR=Wn(),pdr=au(),fdr=dr(),Dze=X$(),Oze=m_(),zE=jee(),ddr=PL(),Nze=Ho(),Hee=Wr(),Lze=So(),FE="DOMException",Bee="DATA_CLONE_ERR",dR=cR("Error"),Mg=cR(FE)||function(){try{var e=cR("MessageChannel")||ldr("worker_threads").MessageChannel;new e().port1.postMessage(new WeakMap)}catch(t){if(t.name===Bee&&t.code===25)return t.constructor}}(),hdr=Mg&&Mg.prototype,kze=dR.prototype,mdr=Nze.set,gdr=Nze.getterFor(FE),vdr="stack"in new dR(FE),Rze=function(e){return uR(zE,e)&&zE[e].m?zE[e].c:0},$ee=function(){pdr(this,MA);var t=arguments.length,r=Oze(t<1?void 0:arguments[0]),n=Oze(t<2?void 0:arguments[1],"Error"),o=Rze(n);if(mdr(this,{type:FE,name:n,message:r,code:o}),Hee||(this.name=n,this.message=r,this.code=o),vdr){var i=new dR(r);i.name=FE,pR(this,"stack",Gee(1,ddr(i.stack,1)))}},MA=$ee.prototype=udr(kze),jze=function(e){return{enumerable:!0,configurable:!0,get:e}},qee=function(e){return jze(function(){return gdr(this)[e]})};Hee&&(lR(MA,"code",qee("code")),lR(MA,"message",qee("message")),lR(MA,"name",qee("name")));pR(MA,"constructor",Gee(1,$ee));var hR=Vee(function(){return!(new Mg instanceof dR)}),qze=hR||Vee(function(){return kze.toString!==Dze||String(new Mg(1,2))!=="2: 1"}),zze=hR||Vee(function(){return new Mg(1,"DataCloneError").code!==25}),ydr=hR||Mg[Bee]!==25||hdr[Bee]!==25,Pze=Lze?qze||zze||ydr:hR;sdr({global:!0,constructor:!0,forced:Pze},{DOMException:Pze?$ee:Mg});var CA=cR(FE),fR=CA.prototype;qze&&(Lze||Mg===CA)&&cdr(fR,"toString",Dze);zze&&Hee&&Mg===CA&&lR(fR,"code",jze(function(){return Rze(fdr(this).name)}));for(zee in zE)uR(zE,zee)&&(Fee=zE[zee],IA=Fee.s,Uee=Gee(6,Fee.c),uR(CA,IA)||pR(CA,IA,Uee),uR(fR,IA)||pR(fR,IA,Uee));var Fee,IA,Uee,zee});var Wze=N(()=>{"use strict";u();var _dr=ce(),bdr=ur(),ete=ln(),Jee=mc(),Qee=Ei().f,Uze=Wn(),xdr=au(),wdr=by(),Bze=m_(),Wee=jee(),Edr=PL(),Sdr=Wr(),Hze=So(),OA="DOMException",$ze=ete("Error"),PA=ete(OA),tte=function(){xdr(this,Tdr);var t=arguments.length,r=Bze(t<1?void 0:arguments[0]),n=Bze(t<2?void 0:arguments[1],"Error"),o=new PA(r,n),i=new $ze(r);return i.name=OA,Qee(o,"stack",Jee(1,Edr(i.stack,1))),wdr(o,this,tte),o},Tdr=tte.prototype=PA.prototype,Idr="stack"in new $ze(OA),Mdr="stack"in new PA(1,2),Yee=PA&&Sdr&&Object.getOwnPropertyDescriptor(bdr,OA),Cdr=!!Yee&&!(Yee.writable&&Yee.configurable),Vze=Idr&&!Cdr&&!Mdr;_dr({global:!0,constructor:!0,forced:Hze||Vze},{DOMException:Vze?tte:PA});var AA=ete(OA),Gze=AA.prototype;if(Gze.constructor!==AA){Hze||Qee(Gze,"constructor",Jee(1,AA));for(Zee in Wee)Uze(Wee,Zee)&&(Kee=Wee[Zee],Xee=Kee.s,Uze(AA,Xee)||Qee(AA,Xee,Jee(6,Kee.c)))}var Kee,Xee,Zee});var Zze=N(()=>{"use strict";u();var Adr=ln(),Odr=Ru(),Yze="DOMException";Odr(Adr(Yze),Yze)});var Xze=N(()=>{"use strict";u();var Pdr=ce(),Ddr=ur(),Kze=LC().clear;Pdr({global:!0,bind:!0,enumerable:!0,forced:Ddr.clearImmediate!==Kze},{clearImmediate:Kze})});var mR=N((pwn,Qze)=>{"use strict";u();var Jze=ur(),Ndr=Sl(),Ldr=jn(),kdr=fC(),Rdr=pd(),jdr=yc(),qdr=hp(),zdr=Jze.Function,Fdr=/MSIE .\./.test(Rdr)||kdr==="BUN"&&function(){var e=Jze.Bun.version.split(".");return e.length<3||e[0]==="0"&&(e[1]<3||e[1]==="3"&&e[2]==="0")}();Qze.exports=function(e,t){var r=t?2:1;return Fdr?function(n,o){var i=qdr(arguments.length,1)>r,a=Ldr(n)?n:zdr(n),c=i?jdr(arguments,r):[],h=i?function(){Ndr(a,this,c)}:a;return t?e(h,o):e(h)}:e}});var n8e=N(()=>{"use strict";u();var Udr=ce(),r8e=ur(),e8e=LC().set,Bdr=mR(),t8e=r8e.setImmediate?Bdr(e8e,!1):e8e;Udr({global:!0,bind:!0,enumerable:!0,forced:r8e.setImmediate!==t8e},{setImmediate:t8e})});var o8e=N(()=>{"use strict";u();Xze();n8e()});var i8e=N(()=>{"use strict";u();var Vdr=ce(),Gdr=ur(),Hdr=fK(),$dr=un(),Wdr=hp(),Ydr=Gt(),Zdr=Wr(),Kdr=Ydr(function(){return Zdr&&Object.getOwnPropertyDescriptor(Gdr,"queueMicrotask").value.length!==1});Vdr({global:!0,enumerable:!0,dontCallGetSet:!0,forced:Kdr},{queueMicrotask:function(t){Wdr(arguments.length,1),Hdr($dr(t))}})});var s8e=N(()=>{"use strict";u();var Xdr=ce(),Vy=ur(),Jdr=Gi(),Qdr=Wr(),ehr=TypeError,thr=Object.defineProperty,a8e=Vy.self!==Vy;try{Qdr?(gR=Object.getOwnPropertyDescriptor(Vy,"self"),(a8e||!gR||!gR.get||!gR.enumerable)&&Jdr(Vy,"self",{get:function(){return Vy},set:function(t){if(this!==Vy)throw new ehr("Illegal invocation");thr(Vy,"self",{value:t,writable:!0,configurable:!0,enumerable:!0})},configurable:!0,enumerable:!0})):Xdr({global:!0,simple:!0,forced:a8e},{self:Vy})}catch(e){}var gR});var y8e=N(()=>{"use strict";u();var rhr=So(),nhr=ce(),Al=ur(),NA=ln(),kA=Lt(),ste=Gt(),ohr=my(),BE=jn(),ihr=vd(),ahr=gc(),xR=Qr(),shr=hg(),lhr=ma(),c8e=dr(),_R=ku(),uhr=Wn(),chr=Xp(),rte=ms(),vR=ho(),phr=hp(),fhr=yE(),wR=Ls(),lte=Xs(),dhr=xc(),l8e=yY(),hhr=W$(),ute=l3(),DA=Al.Object,mhr=Al.Array,p8e=Al.Date,f8e=Al.Error,ghr=Al.TypeError,vhr=Al.PerformanceMark,k_=NA("DOMException"),ite=wR.Map,cte=wR.has,d8e=wR.get,bR=wR.set,h8e=lte.Set,m8e=lte.add,yhr=lte.has,_hr=NA("Object","keys"),bhr=kA([].push),xhr=kA((!0).valueOf),whr=kA(1 .valueOf),Ehr=kA("".valueOf),Shr=kA(p8e.prototype.getTime),ate=ohr("structuredClone"),LA="DataCloneError",yR="Transferring",g8e=function(e){return!ste(function(){var t=new Al.Set([7]),r=e(t),n=e(DA(7));return r===t||!r.has(7)||!xR(n)||+n!=7})&&e},u8e=function(e,t){return!ste(function(){var r=new t,n=e({a:r,b:r});return!(n&&n.a===n.b&&n.a instanceof t&&n.a.stack===r.stack)})},Thr=function(e){return!ste(function(){var t=e(new Al.AggregateError([1],ate,{cause:3}));return t.name!=="AggregateError"||t.errors[0]!==1||t.message!==ate||t.cause!==3})},UE=Al.structuredClone,Ihr=rhr||!u8e(UE,f8e)||!u8e(UE,k_)||!Thr(UE),Mhr=!UE&&g8e(function(e){return new vhr(ate,{detail:e}).detail}),Cg=g8e(UE)||Mhr,nte=function(e){throw new k_("Uncloneable type: "+e,LA)},Sc=function(e,t){throw new k_((t||"Cloning")+" of "+e+" cannot be properly polyfilled in this engine",LA)},ote=function(e,t){return Cg||Sc(t),Cg(e)},Chr=function(){var e;try{e=new Al.DataTransfer}catch(t){try{e=new Al.ClipboardEvent("").clipboardData}catch(r){}}return e&&e.items&&e.files?e:null},v8e=function(e,t,r){if(cte(t,e))return d8e(t,e);var n=r||_R(e),o,i,a,c,h,m;if(n==="SharedArrayBuffer")Cg?o=Cg(e):o=e;else{var y=Al.DataView;!y&&!BE(e.slice)&&Sc("ArrayBuffer");try{if(BE(e.slice)&&!e.resizable)o=e.slice(0);else for(i=e.byteLength,a=("maxByteLength"in e)?{maxByteLength:e.maxByteLength}:void 0,o=new ArrayBuffer(i,a),c=new y(e),h=new y(o),m=0;m<i;m++)h.setUint8(m,c.getUint8(m))}catch(w){throw new k_("ArrayBuffer is detached",LA)}}return bR(t,e,o),o},Ahr=function(e,t,r,n,o){var i=Al[t];return xR(i)||Sc(t),new i(v8e(e.buffer,o),r,n)},Cl=function(e,t){if(shr(e)&&nte("Symbol"),!xR(e))return e;if(t){if(cte(t,e))return d8e(t,e)}else t=new ite;var r=_R(e),n,o,i,a,c,h,m,y;switch(r){case"Array":i=mhr(vR(e));break;case"Object":i={};break;case"Map":i=new ite;break;case"Set":i=new h8e;break;case"RegExp":i=new RegExp(e.source,fhr(e));break;case"Error":switch(o=e.name,o){case"AggregateError":i=new(NA(o))([]);break;case"EvalError":case"RangeError":case"ReferenceError":case"SuppressedError":case"SyntaxError":case"TypeError":case"URIError":i=new(NA(o));break;case"CompileError":case"LinkError":case"RuntimeError":i=new(NA("WebAssembly",o));break;default:i=new f8e}break;case"DOMException":i=new k_(e.message,e.name);break;case"ArrayBuffer":case"SharedArrayBuffer":i=v8e(e,t,r);break;case"DataView":case"Int8Array":case"Uint8Array":case"Uint8ClampedArray":case"Int16Array":case"Uint16Array":case"Int32Array":case"Uint32Array":case"Float16Array":case"Float32Array":case"Float64Array":case"BigInt64Array":case"BigUint64Array":h=r==="DataView"?e.byteLength:e.length,i=Ahr(e,r,e.byteOffset,h,t);break;case"DOMQuad":try{i=new DOMQuad(Cl(e.p1,t),Cl(e.p2,t),Cl(e.p3,t),Cl(e.p4,t))}catch(w){i=ote(e,r)}break;case"File":if(Cg)try{i=Cg(e),_R(i)!==r&&(i=void 0)}catch(w){}if(!i)try{i=new File([e],e.name,e)}catch(w){}i||Sc(r);break;case"FileList":if(a=Chr(),a){for(c=0,h=vR(e);c<h;c++)a.items.add(Cl(e[c],t));i=a.files}else i=ote(e,r);break;case"ImageData":try{i=new ImageData(Cl(e.data,t),e.width,e.height,{colorSpace:e.colorSpace})}catch(w){i=ote(e,r)}break;default:if(Cg)i=Cg(e);else switch(r){case"BigInt":i=DA(e.valueOf());break;case"Boolean":i=DA(xhr(e));break;case"Number":i=DA(whr(e));break;case"String":i=DA(Ehr(e));break;case"Date":i=new p8e(Shr(e));break;case"Blob":try{i=e.slice(0,e.size,e.type)}catch(w){Sc(r)}break;case"DOMPoint":case"DOMPointReadOnly":n=Al[r];try{i=n.fromPoint?n.fromPoint(e):new n(e.x,e.y,e.z,e.w)}catch(w){Sc(r)}break;case"DOMRect":case"DOMRectReadOnly":n=Al[r];try{i=n.fromRect?n.fromRect(e):new n(e.x,e.y,e.width,e.height)}catch(w){Sc(r)}break;case"DOMMatrix":case"DOMMatrixReadOnly":n=Al[r];try{i=n.fromMatrix?n.fromMatrix(e):new n(e)}catch(w){Sc(r)}break;case"AudioData":case"VideoFrame":BE(e.clone)||Sc(r);try{i=e.clone()}catch(w){nte(r)}break;case"CropTarget":case"CryptoKey":case"FileSystemDirectoryHandle":case"FileSystemFileHandle":case"FileSystemHandle":case"GPUCompilationInfo":case"GPUCompilationMessage":case"ImageBitmap":case"RTCCertificate":case"WebAssembly.Module":Sc(r);default:nte(r)}}switch(bR(t,e,i),r){case"Array":case"Object":for(m=_hr(e),c=0,h=vR(m);c<h;c++)y=m[c],chr(i,y,Cl(e[y],t));break;case"Map":e.forEach(function(w,E){bR(i,Cl(E,t),Cl(w,t))});break;case"Set":e.forEach(function(w){m8e(i,Cl(w,t))});break;case"Error":rte(i,"message",Cl(e.message,t)),uhr(e,"cause")&&rte(i,"cause",Cl(e.cause,t)),o==="AggregateError"?i.errors=Cl(e.errors,t):o==="SuppressedError"&&(i.error=Cl(e.error,t),i.suppressed=Cl(e.suppressed,t));case"DOMException":hhr&&rte(i,"stack",Cl(e.stack,t))}return i},Ohr=function(e,t){if(!xR(e))throw new ghr("Transfer option cannot be converted to a sequence");var r=[];lhr(e,function(E){bhr(r,c8e(E))});for(var n=0,o=vR(r),i=new h8e,a,c,h,m,y,w;n<o;){if(a=r[n++],c=_R(a),c==="ArrayBuffer"?yhr(i,a):cte(t,a))throw new k_("Duplicate transferable",LA);if(c==="ArrayBuffer"){m8e(i,a);continue}if(ute)m=UE(a,{transfer:[a]});else switch(c){case"ImageBitmap":h=Al.OffscreenCanvas,ihr(h)||Sc(c,yR);try{y=new h(a.width,a.height),w=y.getContext("bitmaprenderer"),w.transferFromImageBitmap(a),m=y.transferToImageBitmap()}catch(E){}break;case"AudioData":case"VideoFrame":(!BE(a.clone)||!BE(a.close))&&Sc(c,yR);try{m=a.clone(),a.close()}catch(E){}break;case"MediaSourceHandle":case"MessagePort":case"MIDIAccess":case"OffscreenCanvas":case"ReadableStream":case"RTCDataChannel":case"TransformStream":case"WebTransportReceiveStream":case"WebTransportSendStream":case"WritableStream":Sc(c,yR)}if(m===void 0)throw new k_("This object cannot be transferred: "+c,LA);bR(t,a,m)}return i},Phr=function(e){dhr(e,function(t){ute?Cg(t,{transfer:[t]}):BE(t.transfer)?t.transfer():l8e?l8e(t):Sc("ArrayBuffer",yR)})};nhr({global:!0,enumerable:!0,sham:!ute,forced:Ihr},{structuredClone:function(t){var r=phr(arguments.length,1)>1&&!ahr(arguments[1])?c8e(arguments[1]):void 0,n=r?r.transfer:void 0,o,i;n!==void 0&&(o=new ite,i=Ohr(n,o));var a=Cl(t,o);return i&&Phr(i),a}})});var x8e=N(()=>{"use strict";u();var Dhr=ce(),b8e=ur(),Nhr=mR(),_8e=Nhr(b8e.setInterval,!0);Dhr({global:!0,bind:!0,forced:b8e.setInterval!==_8e},{setInterval:_8e})});var S8e=N(()=>{"use strict";u();var Lhr=ce(),E8e=ur(),khr=mR(),w8e=khr(E8e.setTimeout,!0);Lhr({global:!0,bind:!0,forced:E8e.setTimeout!==w8e},{setTimeout:w8e})});var T8e=N(()=>{"use strict";u();x8e();S8e()});var RA=N((jwn,M8e)=>{"use strict";u();var Rhr=Gt(),jhr=nn(),qhr=Wr(),I8e=So(),zhr=jhr("iterator");M8e.exports=!Rhr(function(){var e=new URL("b?a=1&b=2&c=3","https://a"),t=e.searchParams,r=new URLSearchParams("a=1&a=2&b=3"),n="";return e.pathname="c%20d",t.forEach(function(o,i){t.delete("b"),n+=i+o}),r.delete("a",2),r.delete("b",void 0),I8e&&(!e.toJSON||!r.has("a",1)||r.has("a",2)||!r.has("a",void 0)||r.has("b"))||!t.size&&(I8e||!qhr)||!t.sort||e.href!=="https://a/c%20d?a=1&c=3"||t.get("c")!=="3"||String(new URLSearchParams("?a=1"))!=="a=1"||!t[zhr]||new URL("https://a@b").username!=="a"||new URLSearchParams(new URLSearchParams("a=b")).get("a")!=="b"||new URL("https://\u0442\u0435\u0441\u0442").host!=="xn--e1aybc"||new URL("https://a#\u0431").hash!=="#%D0%B1"||n!=="a1c3"||new URL("https://x",void 0).host!=="x"})});var R8e=N((zwn,k8e)=>{"use strict";u();var R_=Lt(),pte=2147483647,jA=36,D8e=1,hte=26,Fhr=38,Uhr=700,Bhr=72,Vhr=128,Ghr="-",Hhr=/[^\0-\u007E]/,N8e=/[.\u3002\uFF0E\uFF61]/g,C8e="Overflow: input needs wider integers to process",fte=jA-D8e,A8e=RangeError,$hr=R_(N8e.exec),VE=Math.floor,dte=String.fromCharCode,O8e=R_("".charCodeAt),L8e=R_([].join),Gy=R_([].push),Whr=R_("".replace),Yhr=R_("".split),Zhr=R_("".toLowerCase),Khr=function(e){for(var t=[],r=0,n=e.length;r<n;){var o=O8e(e,r++);if(o>=55296&&o<=56319&&r<n){var i=O8e(e,r++);(i&64512)===56320?Gy(t,((o&1023)<<10)+(i&1023)+65536):(Gy(t,o),r--)}else Gy(t,o)}return t},P8e=function(e){return e+22+75*(e<26)},Xhr=function(e,t,r){var n=0;for(e=r?VE(e/Uhr):e>>1,e+=VE(e/t);e>fte*hte>>1;)e=VE(e/fte),n+=jA;return VE(n+(fte+1)*e/(e+Fhr))},Jhr=function(e){var t=[];e=Khr(e);var r=e.length,n=Vhr,o=0,i=Bhr,a,c;for(a=0;a<e.length;a++)c=e[a],c<128&&Gy(t,dte(c));var h=t.length,m=h;for(h&&Gy(t,Ghr);m<r;){var y=pte;for(a=0;a<e.length;a++)c=e[a],c>=n&&c<y&&(y=c);var w=m+1;if(y-n>VE((pte-o)/w))throw new A8e(C8e);for(o+=(y-n)*w,n=y,a=0;a<e.length;a++){if(c=e[a],c<n&&++o>pte)throw new A8e(C8e);if(c===n){for(var E=o,A=jA;;){var P=A<=i?D8e:A>=i+hte?hte:A-i;if(E<P)break;var j=E-P,D=jA-P;Gy(t,dte(P8e(P+j%D))),E=VE(j/D),A+=jA}Gy(t,dte(P8e(E))),i=Xhr(o,w,m===h),o=0,m++}}o++,n++}return L8e(t,"")};k8e.exports=function(e){var t=[],r=Yhr(Whr(Zhr(e),N8e,"."),"."),n,o;for(n=0;n<r.length;n++)o=r[n],Gy(t,$hr(Hhr,o)?"xn--"+Jhr(o):o);return L8e(t,".")}});var Ete=N((Uwn,iFe)=>{"use strict";u();uC();_X();var bte=ce(),Z8e=ur(),xte=iK(),Qhr=ln(),ER=cr(),xd=Lt(),qA=Wr(),K8e=RA(),X8e=ti(),emr=Gi(),tmr=Qp(),rmr=Ru(),nmr=Sy(),wte=Ho(),J8e=au(),mte=jn(),omr=Wn(),imr=ci(),amr=ku(),smr=dr(),Q8e=Qr(),qu=Sn(),lmr=La(),j8e=mc(),q8e=xy(),umr=Oh(),SR=Ns(),GE=hp(),cmr=nn(),pmr=YL(),fmr=cmr("iterator"),$E="URLSearchParams",eFe=$E+"Iterator",tFe=wte.set,rf=wte.getterFor($E),dmr=wte.getterFor(eFe),z8e=xte("fetch"),MR=xte("Request"),zA=xte("Headers"),gte=MR&&MR.prototype,F8e=zA&&zA.prototype,hmr=Z8e.TypeError,mmr=Z8e.encodeURIComponent,gmr=String.fromCharCode,vmr=Qhr("String","fromCodePoint"),ymr=parseInt,IR=xd("".charAt),U8e=xd([].join),Hy=xd([].push),rFe=xd("".replace),_mr=xd([].shift),B8e=xd([].splice),V8e=xd("".split),nFe=xd("".slice),bmr=xd(/./.exec),xmr=/\+/g,vte="\uFFFD",wmr=/^[0-9a-f]+$/i,G8e=function(e,t){var r=nFe(e,t,t+2);return bmr(wmr,r)?ymr(r,16):NaN},Emr=function(e){for(var t=0,r=128;r>0&&(e&r)!==0;r>>=1)t++;return t},Smr=function(e){var t=null;switch(e.length){case 1:t=e[0];break;case 2:t=(e[0]&31)<<6|e[1]&63;break;case 3:t=(e[0]&15)<<12|(e[1]&63)<<6|e[2]&63;break;case 4:t=(e[0]&7)<<18|(e[1]&63)<<12|(e[2]&63)<<6|e[3]&63;break}return t>1114111?null:t},H8e=function(e){e=rFe(e,xmr," ");for(var t=e.length,r="",n=0;n<t;){var o=IR(e,n);if(o==="%"){if(IR(e,n+1)==="%"||n+3>t){r+="%",n++;continue}var i=G8e(e,n+1);if(i!==i){r+=o,n++;continue}n+=2;var a=Emr(i);if(a===0)o=gmr(i);else{if(a===1||a>4){r+=vte,n++;continue}for(var c=[i],h=1;h<a&&(n++,!(n+3>t||IR(e,n)!=="%"));){var m=G8e(e,n+1);if(m!==m){n+=3;break}if(m>191||m<128)break;Hy(c,m),n+=2,h++}if(c.length!==a){r+=vte;continue}var y=Smr(c);y===null?r+=vte:o=vmr(y)}}r+=o,n++}return r},Tmr=/[!'()~]|%20/g,Imr={"!":"%21","'":"%27","(":"%28",")":"%29","~":"%7E","%20":"+"},Mmr=function(e){return Imr[e]},$8e=function(e){return rFe(mmr(e),Tmr,Mmr)},yte=nmr(function(t,r){tFe(this,{type:eFe,target:rf(t).entries,index:0,kind:r})},$E,function(){var t=dmr(this),r=t.target,n=t.index++;if(!r||n>=r.length)return t.target=null,SR(void 0,!0);var o=r[n];switch(t.kind){case"keys":return SR(o.key,!1);case"values":return SR(o.value,!1)}return SR([o.key,o.value],!1)},!0),oFe=function(e){this.entries=[],this.url=null,e!==void 0&&(Q8e(e)?this.parseObject(e):this.parseQuery(typeof e=="string"?IR(e,0)==="?"?nFe(e,1):e:qu(e)))};oFe.prototype={type:$E,bindURL:function(e){this.url=e,this.update()},parseObject:function(e){var t=this.entries,r=umr(e),n,o,i,a,c,h,m;if(r)for(n=q8e(e,r),o=n.next;!(i=ER(o,n)).done;){if(a=q8e(smr(i.value)),c=a.next,(h=ER(c,a)).done||(m=ER(c,a)).done||!ER(c,a).done)throw new hmr("Expected sequence with length 2");Hy(t,{key:qu(h.value),value:qu(m.value)})}else for(var y in e)omr(e,y)&&Hy(t,{key:y,value:qu(e[y])})},parseQuery:function(e){if(e)for(var t=this.entries,r=V8e(e,"&"),n=0,o,i;n<r.length;)o=r[n++],o.length&&(i=V8e(o,"="),Hy(t,{key:H8e(_mr(i)),value:H8e(U8e(i,"="))}))},serialize:function(){for(var e=this.entries,t=[],r=0,n;r<e.length;)n=e[r++],Hy(t,$8e(n.key)+"="+$8e(n.value));return U8e(t,"&")},update:function(){this.entries.length=0,this.parseQuery(this.url.query)},updateURL:function(){this.url&&this.url.update()}};var CR=function(){J8e(this,HE);var t=arguments.length>0?arguments[0]:void 0,r=tFe(this,new oFe(t));qA||(this.size=r.entries.length)},HE=CR.prototype;tmr(HE,{append:function(t,r){var n=rf(this);GE(arguments.length,2),Hy(n.entries,{key:qu(t),value:qu(r)}),qA||this.length++,n.updateURL()},delete:function(e){for(var t=rf(this),r=GE(arguments.length,1),n=t.entries,o=qu(e),i=r<2?void 0:arguments[1],a=i===void 0?i:qu(i),c=0;c<n.length;){var h=n[c];if(h.key===o&&(a===void 0||h.value===a)){if(B8e(n,c,1),a!==void 0)break}else c++}qA||(this.size=n.length),t.updateURL()},get:function(t){var r=rf(this).entries;GE(arguments.length,1);for(var n=qu(t),o=0;o<r.length;o++)if(r[o].key===n)return r[o].value;return null},getAll:function(t){var r=rf(this).entries;GE(arguments.length,1);for(var n=qu(t),o=[],i=0;i<r.length;i++)r[i].key===n&&Hy(o,r[i].value);return o},has:function(t){for(var r=rf(this).entries,n=GE(arguments.length,1),o=qu(t),i=n<2?void 0:arguments[1],a=i===void 0?i:qu(i),c=0;c<r.length;){var h=r[c++];if(h.key===o&&(a===void 0||h.value===a))return!0}return!1},set:function(t,r){var n=rf(this);GE(arguments.length,1);for(var o=n.entries,i=!1,a=qu(t),c=qu(r),h=0,m;h<o.length;h++)m=o[h],m.key===a&&(i?B8e(o,h--,1):(i=!0,m.value=c));i||Hy(o,{key:a,value:c}),qA||(this.size=o.length),n.updateURL()},sort:function(){var t=rf(this);pmr(t.entries,function(r,n){return r.key>n.key?1:-1}),t.updateURL()},forEach:function(t){for(var r=rf(this).entries,n=imr(t,arguments.length>1?arguments[1]:void 0),o=0,i;o<r.length;)i=r[o++],n(i.value,i.key,this)},keys:function(){return new yte(this,"keys")},values:function(){return new yte(this,"values")},entries:function(){return new yte(this,"entries")}},{enumerable:!0});X8e(HE,fmr,HE.entries,{name:"entries"});X8e(HE,"toString",function(){return rf(this).serialize()},{enumerable:!0});qA&&emr(HE,"size",{get:function(){return rf(this).entries.length},configurable:!0,enumerable:!0});rmr(CR,$E);bte({global:!0,constructor:!0,forced:!K8e},{URLSearchParams:CR});!K8e&&mte(zA)&&(W8e=xd(F8e.has),Y8e=xd(F8e.set),_te=function(e){if(Q8e(e)){var t=e.body,r;if(amr(t)===$E)return r=e.headers?new zA(e.headers):new zA,W8e(r,"content-type")||Y8e(r,"content-type","application/x-www-form-urlencoded;charset=UTF-8"),lmr(e,{body:j8e(0,qu(t)),headers:j8e(0,r)})}return e},mte(z8e)&&bte({global:!0,enumerable:!0,dontCallGetSet:!0,forced:!0},{fetch:function(t){return z8e(t,arguments.length>1?_te(arguments[1]):{})}}),mte(MR)&&(TR=function(t){return J8e(this,gte),new MR(t,arguments.length>1?_te(arguments[1]):{})},gte.constructor=TR,TR.prototype=gte,bte({global:!0,constructor:!0,dontCallGetSet:!0,forced:!0},{Request:TR})));var W8e,Y8e,_te,TR;iFe.exports={URLSearchParams:CR,getState:rf}});var EFe=N(()=>{"use strict";u();xX();var Cmr=ce(),Fte=Wr(),Amr=RA(),Ute=ur(),aFe=ci(),lf=Lt(),NR=ti(),nf=Gi(),Omr=au(),jte=Wn(),Bte=UZ(),WE=mW(),wd=yc(),Pmr=M_().codeAt,Dmr=R8e(),Og=Sn(),Nmr=Ru(),Lmr=hp(),vFe=Ete(),yFe=Ho(),kmr=yFe.set,LR=yFe.getterFor("URL"),Rmr=vFe.URLSearchParams,jmr=vFe.getState,FA=Ute.URL,qte=Ute.TypeError,kR=Ute.parseInt,qmr=Math.floor,sFe=Math.pow,sf=lf("".charAt),Ed=lf(/./.exec),BA=lf([].join),zmr=lf(1 .toString),Fmr=lf([].pop),ZE=lf([].push),Ste=lf("".replace),Umr=lf([].shift),Bmr=lf("".split),GA=lf("".slice),RR=lf("".toLowerCase),Vmr=lf([].unshift),Gmr="Invalid authority",Tte="Invalid scheme",j_="Invalid host",lFe="Invalid port",_Fe=/[a-z]/i,Hmr=/[\d+-.a-z]/i,zte=/\d/,$mr=/^0x/i,Wmr=/^[0-7]+$/,Ymr=/^\d+$/,bFe=/^[\da-f]+$/i,Zmr=/[\0\t\n\r #%/:<>?@[\\\]^|]/,Kmr=/[\0\t\n\r #/:<>?@[\\\]^|]/,Xmr=/^[\u0000-\u0020]+/,Jmr=/(^|[^\u0000-\u0020])[\u0000-\u0020]+$/,Qmr=/[\t\n\r]/g,of,egr=function(e){var t=Bmr(e,"."),r,n,o,i,a,c,h;if(t.length&&t[t.length-1]===""&&t.length--,r=t.length,r>4)return e;for(n=[],o=0;o<r;o++){if(i=t[o],i==="")return e;if(a=10,i.length>1&&sf(i,0)==="0"&&(a=Ed($mr,i)?16:8,i=GA(i,a===8?1:2)),i==="")c=0;else{if(!Ed(a===10?Ymr:a===8?Wmr:bFe,i))return e;c=kR(i,a)}ZE(n,c)}for(o=0;o<r;o++)if(c=n[o],o===r-1){if(c>=sFe(256,5-r))return null}else if(c>255)return null;for(h=Fmr(n),o=0;o<n.length;o++)h+=n[o]*sFe(256,3-o);return h},tgr=function(e){var t=[0,0,0,0,0,0,0,0],r=0,n=null,o=0,i,a,c,h,m,y,w,E=function(){return sf(e,o)};if(E()===":"){if(sf(e,1)!==":")return;o+=2,r++,n=r}for(;E();){if(r===8)return;if(E()===":"){if(n!==null)return;o++,r++,n=r;continue}for(i=a=0;a<4&&Ed(bFe,E());)i=i*16+kR(E(),16),o++,a++;if(E()==="."){if(a===0||(o-=a,r>6))return;for(c=0;E();){if(h=null,c>0)if(E()==="."&&c<4)o++;else return;if(!Ed(zte,E()))return;for(;Ed(zte,E());){if(m=kR(E(),10),h===null)h=m;else{if(h===0)return;h=h*10+m}if(h>255)return;o++}t[r]=t[r]*256+h,c++,(c===2||c===4)&&r++}if(c!==4)return;break}else if(E()===":"){if(o++,!E())return}else if(E())return;t[r++]=i}if(n!==null)for(y=r-n,r=7;r!==0&&y>0;)w=t[r],t[r--]=t[n+y-1],t[n+--y]=w;else if(r!==8)return;return t},rgr=function(e){for(var t=null,r=1,n=null,o=0,i=0;i<8;i++)e[i]!==0?(o>r&&(t=n,r=o),n=null,o=0):(n===null&&(n=i),++o);return o>r?n:t},UA=function(e){var t,r,n,o;if(typeof e=="number"){for(t=[],r=0;r<4;r++)Vmr(t,e%256),e=qmr(e/256);return BA(t,".")}if(typeof e=="object"){for(t="",n=rgr(e),r=0;r<8;r++)o&&e[r]===0||(o&&(o=!1),n===r?(t+=r?":":"::",o=!0):(t+=zmr(e[r],16),r<7&&(t+=":")));return"["+t+"]"}return e},DR={},xFe=Bte({},DR,{" ":1,"\"":1,"<":1,">":1,"`":1}),wFe=Bte({},xFe,{"#":1,"?":1,"{":1,"}":1}),Ite=Bte({},wFe,{"/":1,":":1,";":1,"=":1,"@":1,"[":1,"\\":1,"]":1,"^":1,"|":1}),$y=function(e,t){var r=Pmr(e,0);return r>32&&r<127&&!jte(t,e)?e:encodeURIComponent(e)},AR={ftp:21,file:null,http:80,https:443,ws:80,wss:443},VA=function(e,t){var r;return e.length===2&&Ed(_Fe,sf(e,0))&&((r=sf(e,1))===":"||!t&&r==="|")},uFe=function(e){var t;return e.length>1&&VA(GA(e,0,2))&&(e.length===2||(t=sf(e,2))==="/"||t==="\\"||t==="?"||t==="#")},ngr=function(e){return e==="."||RR(e)==="%2e"},ogr=function(e){return e=RR(e),e===".."||e==="%2e."||e===".%2e"||e==="%2e%2e"},Mte={},cFe={},Cte={},pFe={},fFe={},Ate={},dFe={},hFe={},OR={},PR={},Ote={},Pte={},Dte={},Nte={},mFe={},Lte={},YE={},Uh={},gFe={},q_={},Ag={},Vte=function(e,t,r){var n=Og(e),o,i,a;if(t){if(i=this.parse(n),i)throw new qte(i);this.searchParams=null}else{if(r!==void 0&&(o=new Vte(r,!0)),i=this.parse(n,null,o),i)throw new qte(i);a=jmr(new Rmr),a.bindURL(this),this.searchParams=a}};Vte.prototype={type:"URL",parse:function(e,t,r){var n=this,o=t||Mte,i=0,a="",c=!1,h=!1,m=!1,y,w,E,A;for(e=Og(e),t||(n.scheme="",n.username="",n.password="",n.host=null,n.port=null,n.path=[],n.query=null,n.fragment=null,n.cannotBeABaseURL=!1,e=Ste(e,Xmr,""),e=Ste(e,Jmr,"$1")),e=Ste(e,Qmr,""),y=WE(e);i<=y.length;){switch(w=y[i],o){case Mte:if(w&&Ed(_Fe,w))a+=RR(w),o=cFe;else{if(t)return Tte;o=Cte;continue}break;case cFe:if(w&&(Ed(Hmr,w)||w==="+"||w==="-"||w==="."))a+=RR(w);else if(w===":"){if(t&&(n.isSpecial()!==jte(AR,a)||a==="file"&&(n.includesCredentials()||n.port!==null)||n.scheme==="file"&&!n.host))return;if(n.scheme=a,t){n.isSpecial()&&AR[n.scheme]===n.port&&(n.port=null);return}a="",n.scheme==="file"?o=Nte:n.isSpecial()&&r&&r.scheme===n.scheme?o=pFe:n.isSpecial()?o=hFe:y[i+1]==="/"?(o=fFe,i++):(n.cannotBeABaseURL=!0,ZE(n.path,""),o=gFe)}else{if(t)return Tte;a="",o=Cte,i=0;continue}break;case Cte:if(!r||r.cannotBeABaseURL&&w!=="#")return Tte;if(r.cannotBeABaseURL&&w==="#"){n.scheme=r.scheme,n.path=wd(r.path),n.query=r.query,n.fragment="",n.cannotBeABaseURL=!0,o=Ag;break}o=r.scheme==="file"?Nte:Ate;continue;case pFe:if(w==="/"&&y[i+1]==="/")o=OR,i++;else{o=Ate;continue}break;case fFe:if(w==="/"){o=PR;break}else{o=Uh;continue}case Ate:if(n.scheme=r.scheme,w===of)n.username=r.username,n.password=r.password,n.host=r.host,n.port=r.port,n.path=wd(r.path),n.query=r.query;else if(w==="/"||w==="\\"&&n.isSpecial())o=dFe;else if(w==="?")n.username=r.username,n.password=r.password,n.host=r.host,n.port=r.port,n.path=wd(r.path),n.query="",o=q_;else if(w==="#")n.username=r.username,n.password=r.password,n.host=r.host,n.port=r.port,n.path=wd(r.path),n.query=r.query,n.fragment="",o=Ag;else{n.username=r.username,n.password=r.password,n.host=r.host,n.port=r.port,n.path=wd(r.path),n.path.length--,o=Uh;continue}break;case dFe:if(n.isSpecial()&&(w==="/"||w==="\\"))o=OR;else if(w==="/")o=PR;else{n.username=r.username,n.password=r.password,n.host=r.host,n.port=r.port,o=Uh;continue}break;case hFe:if(o=OR,w!=="/"||sf(a,i+1)!=="/")continue;i++;break;case OR:if(w!=="/"&&w!=="\\"){o=PR;continue}break;case PR:if(w==="@"){c&&(a="%40"+a),c=!0,E=WE(a);for(var P=0;P<E.length;P++){var j=E[P];if(j===":"&&!m){m=!0;continue}var D=$y(j,Ite);m?n.password+=D:n.username+=D}a=""}else if(w===of||w==="/"||w==="?"||w==="#"||w==="\\"&&n.isSpecial()){if(c&&a==="")return Gmr;i-=WE(a).length+1,a="",o=Ote}else a+=w;break;case Ote:case Pte:if(t&&n.scheme==="file"){o=Lte;continue}else if(w===":"&&!h){if(a==="")return j_;if(A=n.parseHost(a),A)return A;if(a="",o=Dte,t===Pte)return}else if(w===of||w==="/"||w==="?"||w==="#"||w==="\\"&&n.isSpecial()){if(n.isSpecial()&&a==="")return j_;if(t&&a===""&&(n.includesCredentials()||n.port!==null))return;if(A=n.parseHost(a),A)return A;if(a="",o=YE,t)return;continue}else w==="["?h=!0:w==="]"&&(h=!1),a+=w;break;case Dte:if(Ed(zte,w))a+=w;else if(w===of||w==="/"||w==="?"||w==="#"||w==="\\"&&n.isSpecial()||t){if(a!==""){var L=kR(a,10);if(L>65535)return lFe;n.port=n.isSpecial()&&L===AR[n.scheme]?null:L,a=""}if(t)return;o=YE;continue}else return lFe;break;case Nte:if(n.scheme="file",w==="/"||w==="\\")o=mFe;else if(r&&r.scheme==="file")switch(w){case of:n.host=r.host,n.path=wd(r.path),n.query=r.query;break;case"?":n.host=r.host,n.path=wd(r.path),n.query="",o=q_;break;case"#":n.host=r.host,n.path=wd(r.path),n.query=r.query,n.fragment="",o=Ag;break;default:uFe(BA(wd(y,i),""))||(n.host=r.host,n.path=wd(r.path),n.shortenPath()),o=Uh;continue}else{o=Uh;continue}break;case mFe:if(w==="/"||w==="\\"){o=Lte;break}r&&r.scheme==="file"&&!uFe(BA(wd(y,i),""))&&(VA(r.path[0],!0)?ZE(n.path,r.path[0]):n.host=r.host),o=Uh;continue;case Lte:if(w===of||w==="/"||w==="\\"||w==="?"||w==="#"){if(!t&&VA(a))o=Uh;else if(a===""){if(n.host="",t)return;o=YE}else{if(A=n.parseHost(a),A)return A;if(n.host==="localhost"&&(n.host=""),t)return;a="",o=YE}continue}else a+=w;break;case YE:if(n.isSpecial()){if(o=Uh,w!=="/"&&w!=="\\")continue}else if(!t&&w==="?")n.query="",o=q_;else if(!t&&w==="#")n.fragment="",o=Ag;else if(w!==of&&(o=Uh,w!=="/"))continue;break;case Uh:if(w===of||w==="/"||w==="\\"&&n.isSpecial()||!t&&(w==="?"||w==="#")){if(ogr(a)?(n.shortenPath(),w!=="/"&&!(w==="\\"&&n.isSpecial())&&ZE(n.path,"")):ngr(a)?w!=="/"&&!(w==="\\"&&n.isSpecial())&&ZE(n.path,""):(n.scheme==="file"&&!n.path.length&&VA(a)&&(n.host&&(n.host=""),a=sf(a,0)+":"),ZE(n.path,a)),a="",n.scheme==="file"&&(w===of||w==="?"||w==="#"))for(;n.path.length>1&&n.path[0]==="";)Umr(n.path);w==="?"?(n.query="",o=q_):w==="#"&&(n.fragment="",o=Ag)}else a+=$y(w,wFe);break;case gFe:w==="?"?(n.query="",o=q_):w==="#"?(n.fragment="",o=Ag):w!==of&&(n.path[0]+=$y(w,DR));break;case q_:!t&&w==="#"?(n.fragment="",o=Ag):w!==of&&(w==="'"&&n.isSpecial()?n.query+="%27":w==="#"?n.query+="%23":n.query+=$y(w,DR));break;case Ag:w!==of&&(n.fragment+=$y(w,xFe));break}i++}},parseHost:function(e){var t,r,n;if(sf(e,0)==="["){if(sf(e,e.length-1)!=="]"||(t=tgr(GA(e,1,-1)),!t))return j_;this.host=t}else if(this.isSpecial()){if(e=Dmr(e),Ed(Zmr,e)||(t=egr(e),t===null))return j_;this.host=t}else{if(Ed(Kmr,e))return j_;for(t="",r=WE(e),n=0;n<r.length;n++)t+=$y(r[n],DR);this.host=t}},cannotHaveUsernamePasswordPort:function(){return!this.host||this.cannotBeABaseURL||this.scheme==="file"},includesCredentials:function(){return this.username!==""||this.password!==""},isSpecial:function(){return jte(AR,this.scheme)},shortenPath:function(){var e=this.path,t=e.length;t&&(this.scheme!=="file"||t!==1||!VA(e[0],!0))&&e.length--},serialize:function(){var e=this,t=e.scheme,r=e.username,n=e.password,o=e.host,i=e.port,a=e.path,c=e.query,h=e.fragment,m=t+":";return o!==null?(m+="//",e.includesCredentials()&&(m+=r+(n?":"+n:"")+"@"),m+=UA(o),i!==null&&(m+=":"+i)):t==="file"&&(m+="//"),m+=e.cannotBeABaseURL?a[0]:a.length?"/"+BA(a,"/"):"",c!==null&&(m+="?"+c),h!==null&&(m+="#"+h),m},setHref:function(e){var t=this.parse(e);if(t)throw new qte(t);this.searchParams.update()},getOrigin:function(){var e=this.scheme,t=this.port;if(e==="blob")try{return new KE(e.path[0]).origin}catch(r){return"null"}return e==="file"||!this.isSpecial()?"null":e+"://"+UA(this.host)+(t!==null?":"+t:"")},getProtocol:function(){return this.scheme+":"},setProtocol:function(e){this.parse(Og(e)+":",Mte)},getUsername:function(){return this.username},setUsername:function(e){var t=WE(Og(e));if(!this.cannotHaveUsernamePasswordPort()){this.username="";for(var r=0;r<t.length;r++)this.username+=$y(t[r],Ite)}},getPassword:function(){return this.password},setPassword:function(e){var t=WE(Og(e));if(!this.cannotHaveUsernamePasswordPort()){this.password="";for(var r=0;r<t.length;r++)this.password+=$y(t[r],Ite)}},getHost:function(){var e=this.host,t=this.port;return e===null?"":t===null?UA(e):UA(e)+":"+t},setHost:function(e){this.cannotBeABaseURL||this.parse(e,Ote)},getHostname:function(){var e=this.host;return e===null?"":UA(e)},setHostname:function(e){this.cannotBeABaseURL||this.parse(e,Pte)},getPort:function(){var e=this.port;return e===null?"":Og(e)},setPort:function(e){this.cannotHaveUsernamePasswordPort()||(e=Og(e),e===""?this.port=null:this.parse(e,Dte))},getPathname:function(){var e=this.path;return this.cannotBeABaseURL?e[0]:e.length?"/"+BA(e,"/"):""},setPathname:function(e){this.cannotBeABaseURL||(this.path=[],this.parse(e,YE))},getSearch:function(){var e=this.query;return e?"?"+e:""},setSearch:function(e){e=Og(e),e===""?this.query=null:(sf(e,0)==="?"&&(e=GA(e,1)),this.query="",this.parse(e,q_)),this.searchParams.update()},getSearchParams:function(){return this.searchParams.facade},getHash:function(){var e=this.fragment;return e?"#"+e:""},setHash:function(e){if(e=Og(e),e===""){this.fragment=null;return}sf(e,0)==="#"&&(e=GA(e,1)),this.fragment="",this.parse(e,Ag)},update:function(){this.query=this.searchParams.serialize()||null}};var KE=function(t){var r=Omr(this,zu),n=Lmr(arguments.length,1)>1?arguments[1]:void 0,o=kmr(r,new Vte(t,!1,n));Fte||(r.href=o.serialize(),r.origin=o.getOrigin(),r.protocol=o.getProtocol(),r.username=o.getUsername(),r.password=o.getPassword(),r.host=o.getHost(),r.hostname=o.getHostname(),r.port=o.getPort(),r.pathname=o.getPathname(),r.search=o.getSearch(),r.searchParams=o.getSearchParams(),r.hash=o.getHash())},zu=KE.prototype,af=function(e,t){return{get:function(){return LR(this)[e]()},set:t&&function(r){return LR(this)[t](r)},configurable:!0,enumerable:!0}};Fte&&(nf(zu,"href",af("serialize","setHref")),nf(zu,"origin",af("getOrigin")),nf(zu,"protocol",af("getProtocol","setProtocol")),nf(zu,"username",af("getUsername","setUsername")),nf(zu,"password",af("getPassword","setPassword")),nf(zu,"host",af("getHost","setHost")),nf(zu,"hostname",af("getHostname","setHostname")),nf(zu,"port",af("getPort","setPort")),nf(zu,"pathname",af("getPathname","setPathname")),nf(zu,"search",af("getSearch","setSearch")),nf(zu,"searchParams",af("getSearchParams")),nf(zu,"hash",af("getHash","setHash")));NR(zu,"toJSON",function(){return LR(this).serialize()},{enumerable:!0});NR(zu,"toString",function(){return LR(this).serialize()},{enumerable:!0});FA&&(kte=FA.createObjectURL,Rte=FA.revokeObjectURL,kte&&NR(KE,"createObjectURL",aFe(kte,FA)),Rte&&NR(KE,"revokeObjectURL",aFe(Rte,FA)));var kte,Rte;Nmr(KE,"URL");Cmr({global:!0,constructor:!0,forced:!Amr,sham:!Fte},{URL:KE})});var SFe=N(()=>{"use strict";u();EFe()});var MFe=N(()=>{"use strict";u();var igr=ce(),agr=ln(),IFe=Gt(),sgr=hp(),TFe=Sn(),lgr=RA(),Gte=agr("URL"),ugr=lgr&&IFe(function(){Gte.canParse()}),cgr=IFe(function(){return Gte.canParse.length!==1});igr({target:"URL",stat:!0,forced:!ugr||cgr},{canParse:function(t){var r=sgr(arguments.length,1),n=TFe(t),o=r<2||arguments[1]===void 0?void 0:TFe(arguments[1]);try{return!!new Gte(n,o)}catch(i){return!1}}})});var AFe=N(()=>{"use strict";u();var pgr=ce(),fgr=ln(),dgr=hp(),CFe=Sn(),hgr=RA(),mgr=fgr("URL");pgr({target:"URL",stat:!0,forced:!hgr},{parse:function(t){var r=dgr(arguments.length,1),n=CFe(t),o=r<2||arguments[1]===void 0?void 0:CFe(arguments[1]);try{return new mgr(n,o)}catch(i){return null}}})});var OFe=N(()=>{"use strict";u();var ggr=ce(),vgr=cr();ggr({target:"URL",proto:!0,enumerable:!0},{toJSON:function(){return vgr(URL.prototype.toString,this)}})});var PFe=N(()=>{"use strict";u();Ete()});var kFe=N(()=>{"use strict";u();var ygr=ti(),jR=Lt(),DFe=Sn(),_gr=hp(),LFe=URLSearchParams,qR=LFe.prototype,bgr=jR(qR.append),NFe=jR(qR.delete),xgr=jR(qR.forEach),wgr=jR([].push),Hte=new LFe("a=1&a=2&b=3");Hte.delete("a",1);Hte.delete("b",void 0);Hte+""!="a=2"&&ygr(qR,"delete",function(e){var t=arguments.length,r=t<2?void 0:arguments[1];if(t&&r===void 0)return NFe(this,e);var n=[];xgr(this,function(w,E){wgr(n,{key:E,value:w})}),_gr(t,1);for(var o=DFe(e),i=DFe(r),a=0,c=0,h=!1,m=n.length,y;a<m;)y=n[a++],h||y.key===o?(h=!0,NFe(this,y.key)):c++;for(;c<m;)y=n[c++],y.key===o&&y.value===i||bgr(this,y.key,y.value)},{enumerable:!0,unsafe:!0})});var zFe=N(()=>{"use strict";u();var Egr=ti(),jFe=Lt(),Sgr=Sn(),Tgr=hp(),qFe=URLSearchParams,$te=qFe.prototype,Igr=jFe($te.getAll),Mgr=jFe($te.has),RFe=new qFe("a=1");(RFe.has("a",2)||!RFe.has("a",void 0))&&Egr($te,"has",function(t){var r=arguments.length,n=r<2?void 0:arguments[1];if(r&&n===void 0)return Mgr(this,t);var o=Igr(this,t);Tgr(r,1);for(var i=Sgr(n),a=0;a<o.length;)if(o[a++]===i)return!0;return!1},{enumerable:!0,unsafe:!0})});var FFe=N(()=>{"use strict";u();var Cgr=Wr(),Agr=Lt(),Ogr=Gi(),Wte=URLSearchParams.prototype,Pgr=Agr(Wte.forEach);Cgr&&!("size"in Wte)&&Ogr(Wte,"size",{get:function(){var t=0;return Pgr(this,function(){t++}),t},configurable:!0,enumerable:!0})});var BFe=N((gEn,UFe)=>{"use strict";u();j1e();G1e();H1e();$1e();W1e();Y1e();Z1e();K1e();X1e();J1e();Q1e();e_e();t_e();r_e();n_e();O_e();k_e();rW();tbe();aW();ube();dbe();mbe();ybe();_be();xbe();Ebe();pW();fW();Cbe();Abe();Dbe();Ube();Bbe();Gbe();Hbe();uC();fxe();gxe();vxe();_xe();xxe();Axe();Pxe();Nxe();Rxe();jxe();Qxe();rwe();nwe();DW();LW();kW();swe();lwe();uwe();jW();Fwe();Jwe();oEe();aEe();nY();sY();cY();TY();IY();kEe();jEe();FEe();UEe();XEe();JEe();nSe();sSe();uSe();mSe();ySe();wSe();NY();qY();VY();HY();WY();ZY();tZ();nZ();oZ();f3();sZ();uZ();pZ();fZ();U$();eTe();v3();bZ();wTe();TTe();MTe();CTe();ATe();DTe();LTe();kTe();SZ();jTe();zTe();UTe();BTe();VTe();GTe();WTe();KTe();XTe();JTe();u2e();c2e();f2e();h2e();m2e();g2e();v2e();y2e();S2e();D2e();j2e();V2e();$2e();X2e();J2e();tIe();nIe();iIe();aIe();fIe();dIe();hIe();vIe();yIe();_Ie();xIe();GZ();HZ();SIe();IIe();CIe();OIe();DIe();NIe();LIe();kIe();FIe();UIe();BIe();HIe();$Ie();YIe();KIe();uCe();MK();CK();hCe();DK();NK();vCe();SCe();MCe();CCe();DCe();NCe();LCe();kCe();RCe();jCe();qCe();VCe();HCe();$Ce();uAe();ZK();vAe();U3();EAe();TAe();CAe();DAe();LAe();nX();aX();lX();cX();fX();mX();vX();pOe();mOe();bOe();_X();SOe();bX();xX();qOe();CX();ZOe();KOe();ePe();tPe();sPe();qX();fPe();vPe();bPe();wPe();HX();APe();LPe();zPe();VPe();GPe();HPe();$Pe();WPe();YPe();ZPe();KPe();XPe();JPe();QPe();eDe();tDe();CDe();ADe();ODe();PDe();DDe();NDe();LDe();kDe();RDe();aJ();zDe();UDe();VDe();$De();YDe();KDe();sJ();lJ();eNe();tNe();nNe();iNe();cNe();fNe();hNe();mNe();vNe();_Ne();xNe();ENe();ANe();ONe();DNe();qNe();FNe();HNe();wJ();EJ();WNe();TJ();JNe();gk();h4e();m4e();y4e();H4e();$4e();W4e();Y4e();Z4e();K4e();J4e();Q4e();t5e();r5e();i5e();a5e();u5e();c5e();p5e();f5e();_5e();b5e();x5e();w5e();E5e();R5e();U5e();Q5e();nLe();iLe();aLe();lLe();uLe();mLe();gLe();yLe();_Le();bLe();xLe();wLe();TLe();ILe();NLe();zLe();ULe();BLe();VLe();GLe();HLe();KLe();e3e();r3e();o3e();i3e();l3e();u3e();c3e();p3e();d3e();g3e();_3e();b3e();x3e();w3e();E3e();S3e();T3e();I3e();M3e();C3e();O3e();P3e();D3e();N3e();L3e();R3e();z3e();X3e();ike();ske();uke();cke();fke();dke();hke();vke();yke();_ke();bke();Eke();Tke();Ike();Cke();Oke();Pke();Lke();kke();Rke();qke();Fke();Uke();$ke();Wke();Yke();Kke();Xke();Jke();Qke();eRe();tRe();rRe();nRe();sRe();lRe();dRe();hRe();vRe();yRe();_Re();ERe();SRe();TRe();IRe();URe();BRe();VRe();GRe();HRe();XRe();QRe();t6e();i6e();s6e();u6e();f6e();h6e();g6e();v6e();y6e();_6e();b6e();T6e();I6e();C6e();A6e();P6e();D6e();N6e();L6e();k6e();R6e();j6e();q6e();z6e();U6e();V6e();H6e();$6e();W6e();Y6e();Z6e();K6e();X6e();J6e();nje();lje();Cje();Aje();Oje();Pje();Dje();Nje();Lje();kje();jje();qje();Hje();$je();Wje();Yje();Zje();Kje();Xje();Jje();eqe();tqe();nqe();iqe();aqe();sqe();lqe();uqe();cqe();pqe();fqe();dqe();Tqe();Oqe();Dqe();Nqe();kqe();Rqe();qqe();Fqe();Bqe();Gqe();Hqe();Zqe();Kqe();Qqe();eze();rze();oze();pze();gze();Eze();Cze();Fze();Wze();Zze();o8e();i8e();s8e();y8e();T8e();SFe();MFe();AFe();OFe();PFe();kFe();zFe();FFe();UFe.exports=EL()});var Yte=N((yEn,VFe)=>{"use strict";u();VFe.exports=BFe()});var c9e=N((fSn,u9e)=>{"use strict";u();var nbr="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED";u9e.exports=nbr});var h9e=N((hSn,d9e)=>{"use strict";u();var obr=c9e();function p9e(){}function f9e(){}f9e.resetWarningCache=p9e;d9e.exports=function(){function e(n,o,i,a,c,h){if(h!==obr){var m=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw m.name="Invariant Violation",m}}e.isRequired=e;function t(){return e}var r={array:e,bigint:e,bool:e,func:e,number:e,object:e,string:e,symbol:e,any:e,arrayOf:t,element:e,elementType:e,instanceOf:t,node:e,objectOf:t,oneOf:t,oneOfType:t,shape:t,exact:t,checkPropTypes:f9e,resetWarningCache:p9e};return r.PropTypes=r,r}});var It=N((ySn,m9e)=>{u();m9e.exports=h9e()();var gSn,vSn});var Z9e=N(fO=>{"use strict";u();H4();var Nbr=ke(),W9e=60103;fO.Fragment=60107;typeof Symbol=="function"&&Symbol.for&&(tne=Symbol.for,W9e=tne("react.element"),fO.Fragment=tne("react.fragment"));var tne,Lbr=Nbr.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,kbr=Object.prototype.hasOwnProperty,Rbr={key:!0,ref:!0,__self:!0,__source:!0};function Y9e(e,t,r){var n,o={},i=null,a=null;r!==void 0&&(i=""+r),t.key!==void 0&&(i=""+t.key),t.ref!==void 0&&(a=t.ref);for(n in t)kbr.call(t,n)&&!Rbr.hasOwnProperty(n)&&(o[n]=t[n]);if(e&&e.defaultProps)for(n in t=e.defaultProps,t)o[n]===void 0&&(o[n]=t[n]);return{$$typeof:W9e,type:e,key:i,ref:a,props:o,_owner:Lbr.current}}fO.jsx=Y9e;fO.jsxs=Y9e});var X9e=N((o2n,K9e)=>{"use strict";u();K9e.exports=Z9e()});var xO=N((tAn,DBe)=>{"use strict";u();DBe.exports=function e(t,r){if(t===r)return!0;if(t&&r&&typeof t=="object"&&typeof r=="object"){if(t.constructor!==r.constructor)return!1;var n,o,i;if(Array.isArray(t)){if(n=t.length,n!=r.length)return!1;for(o=n;o--!==0;)if(!e(t[o],r[o]))return!1;return!0}if(t.constructor===RegExp)return t.source===r.source&&t.flags===r.flags;if(t.valueOf!==Object.prototype.valueOf)return t.valueOf()===r.valueOf();if(t.toString!==Object.prototype.toString)return t.toString()===r.toString();if(i=Object.keys(t),n=i.length,n!==Object.keys(r).length)return!1;for(o=n;o--!==0;)if(!Object.prototype.hasOwnProperty.call(r,i[o]))return!1;for(o=n;o--!==0;){var a=i[o];if(!e(t[a],r[a]))return!1}return!0}return t!==t&&r!==r}});var RO=N((Zne,Kne)=>{u();(function(e,t){typeof Zne=="object"&&typeof Kne!="undefined"?Kne.exports=t():typeof define=="function"&&define.amd?define(t):(e=typeof globalThis!="undefined"?globalThis:e||self,e.maplibregl=t())})(Zne,function(){"use strict";var e={},t={};function r(o,i,a){if(t[o]=a,o==="index"){var c="var sharedModule = {}; ("+t.shared+")(sharedModule); ("+t.worker+")(sharedModule);",h={};return t.shared(h),t.index(e,h),typeof window!="undefined"&&e.setWorkerUrl(window.URL.createObjectURL(new Blob([c],{type:"text/javascript"}))),e}}r("shared",["exports"],function(o){"use strict";function i(f,l,p,g){return new(p||(p=Promise))(function(b,I){function M(F){try{k(g.next(F))}catch(U){I(U)}}function O(F){try{k(g.throw(F))}catch(U){I(U)}}function k(F){var U;F.done?b(F.value):(U=F.value,U instanceof p?U:new p(function($){$(U)})).then(M,O)}k((g=g.apply(f,l||[])).next())})}function a(f,l){this.x=f,this.y=l}function c(f){return f&&f.__esModule&&Object.prototype.hasOwnProperty.call(f,"default")?f.default:f}var h,m;typeof SuppressedError=="function"&&SuppressedError,a.prototype={clone(){return new a(this.x,this.y)},add(f){return this.clone()._add(f)},sub(f){return this.clone()._sub(f)},multByPoint(f){return this.clone()._multByPoint(f)},divByPoint(f){return this.clone()._divByPoint(f)},mult(f){return this.clone()._mult(f)},div(f){return this.clone()._div(f)},rotate(f){return this.clone()._rotate(f)},rotateAround(f,l){return this.clone()._rotateAround(f,l)},matMult(f){return this.clone()._matMult(f)},unit(){return this.clone()._unit()},perp(){return this.clone()._perp()},round(){return this.clone()._round()},mag(){return Math.sqrt(this.x*this.x+this.y*this.y)},equals(f){return this.x===f.x&&this.y===f.y},dist(f){return Math.sqrt(this.distSqr(f))},distSqr(f){let l=f.x-this.x,p=f.y-this.y;return l*l+p*p},angle(){return Math.atan2(this.y,this.x)},angleTo(f){return Math.atan2(this.y-f.y,this.x-f.x)},angleWith(f){return this.angleWithSep(f.x,f.y)},angleWithSep(f,l){return Math.atan2(this.x*l-this.y*f,this.x*f+this.y*l)},_matMult(f){let l=f[2]*this.x+f[3]*this.y;return this.x=f[0]*this.x+f[1]*this.y,this.y=l,this},_add(f){return this.x+=f.x,this.y+=f.y,this},_sub(f){return this.x-=f.x,this.y-=f.y,this},_mult(f){return this.x*=f,this.y*=f,this},_div(f){return this.x/=f,this.y/=f,this},_multByPoint(f){return this.x*=f.x,this.y*=f.y,this},_divByPoint(f){return this.x/=f.x,this.y/=f.y,this},_unit(){return this._div(this.mag()),this},_perp(){let f=this.y;return this.y=this.x,this.x=-f,this},_rotate(f){let l=Math.cos(f),p=Math.sin(f),g=p*this.x+l*this.y;return this.x=l*this.x-p*this.y,this.y=g,this},_rotateAround(f,l){let p=Math.cos(f),g=Math.sin(f),b=l.y+g*(this.x-l.x)+p*(this.y-l.y);return this.x=l.x+p*(this.x-l.x)-g*(this.y-l.y),this.y=b,this},_round(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this},constructor:a},a.convert=function(f){if(f instanceof a)return f;if(Array.isArray(f))return new a(+f[0],+f[1]);if(f.x!==void 0&&f.y!==void 0)return new a(+f.x,+f.y);throw new Error("Expected [x, y] or {x, y} point format")};var y=function(){if(m)return h;function f(l,p,g,b){this.cx=3*l,this.bx=3*(g-l)-this.cx,this.ax=1-this.cx-this.bx,this.cy=3*p,this.by=3*(b-p)-this.cy,this.ay=1-this.cy-this.by,this.p1x=l,this.p1y=p,this.p2x=g,this.p2y=b}return m=1,h=f,f.prototype={sampleCurveX:function(l){return((this.ax*l+this.bx)*l+this.cx)*l},sampleCurveY:function(l){return((this.ay*l+this.by)*l+this.cy)*l},sampleCurveDerivativeX:function(l){return(3*this.ax*l+2*this.bx)*l+this.cx},solveCurveX:function(l,p){if(p===void 0&&(p=1e-6),l<0)return 0;if(l>1)return 1;for(var g=l,b=0;b<8;b++){var I=this.sampleCurveX(g)-l;if(Math.abs(I)<p)return g;var M=this.sampleCurveDerivativeX(g);if(Math.abs(M)<1e-6)break;g-=I/M}var O=0,k=1;for(g=l,b=0;b<20&&(I=this.sampleCurveX(g),!(Math.abs(I-l)<p));b++)l>I?O=g:k=g,g=.5*(k-O)+O;return g},solve:function(l,p){return this.sampleCurveY(this.solveCurveX(l,p))}},h}(),w=c(y);let E,A;function P(){return E==null&&(E=typeof OffscreenCanvas!="undefined"&&new OffscreenCanvas(1,1).getContext("2d")&&typeof createImageBitmap=="function"),E}function j(){if(A==null&&(A=!1,P())){let l=new OffscreenCanvas(5,5).getContext("2d",{willReadFrequently:!0});if(l){for(let g=0;g<5*5;g++){let b=4*g;l.fillStyle=`rgb(${b},${b+1},${b+2})`,l.fillRect(g%5,Math.floor(g/5),1,1)}let p=l.getImageData(0,0,5,5).data;for(let g=0;g<5*5*4;g++)if(g%4!=3&&p[g]!==g){A=!0;break}}}return A||!1}var D=1e-6,L=typeof Float32Array!="undefined"?Float32Array:Array;function z(){var f=new L(9);return L!=Float32Array&&(f[1]=0,f[2]=0,f[3]=0,f[5]=0,f[6]=0,f[7]=0),f[0]=1,f[4]=1,f[8]=1,f}function B(f){return f[0]=1,f[1]=0,f[2]=0,f[3]=0,f[4]=0,f[5]=1,f[6]=0,f[7]=0,f[8]=0,f[9]=0,f[10]=1,f[11]=0,f[12]=0,f[13]=0,f[14]=0,f[15]=1,f}function G(){var f=new L(3);return L!=Float32Array&&(f[0]=0,f[1]=0,f[2]=0),f}function Z(f){var l=f[0],p=f[1],g=f[2];return Math.sqrt(l*l+p*p+g*g)}function K(f,l,p){var g=new L(3);return g[0]=f,g[1]=l,g[2]=p,g}function te(f,l,p){return f[0]=l[0]+p[0],f[1]=l[1]+p[1],f[2]=l[2]+p[2],f}function se(f,l,p){return f[0]=l[0]*p,f[1]=l[1]*p,f[2]=l[2]*p,f}function le(f,l,p){var g=l[0],b=l[1],I=l[2],M=p[0],O=p[1],k=p[2];return f[0]=b*k-I*O,f[1]=I*M-g*k,f[2]=g*O-b*M,f}var pe,me=Z;function _e(f,l,p){var g=l[0],b=l[1],I=l[2],M=l[3];return f[0]=p[0]*g+p[4]*b+p[8]*I+p[12]*M,f[1]=p[1]*g+p[5]*b+p[9]*I+p[13]*M,f[2]=p[2]*g+p[6]*b+p[10]*I+p[14]*M,f[3]=p[3]*g+p[7]*b+p[11]*I+p[15]*M,f}function de(){var f=new L(4);return L!=Float32Array&&(f[0]=0,f[1]=0,f[2]=0),f[3]=1,f}function Ce(f,l,p,g){var b=arguments.length>4&&arguments[4]!==void 0?arguments[4]:"zyx",I=Math.PI/360;l*=I,g*=I,p*=I;var M=Math.sin(l),O=Math.cos(l),k=Math.sin(p),F=Math.cos(p),U=Math.sin(g),$=Math.cos(g);switch(b){case"xyz":f[0]=M*F*$+O*k*U,f[1]=O*k*$-M*F*U,f[2]=O*F*U+M*k*$,f[3]=O*F*$-M*k*U;break;case"xzy":f[0]=M*F*$-O*k*U,f[1]=O*k*$-M*F*U,f[2]=O*F*U+M*k*$,f[3]=O*F*$+M*k*U;break;case"yxz":f[0]=M*F*$+O*k*U,f[1]=O*k*$-M*F*U,f[2]=O*F*U-M*k*$,f[3]=O*F*$+M*k*U;break;case"yzx":f[0]=M*F*$+O*k*U,f[1]=O*k*$+M*F*U,f[2]=O*F*U-M*k*$,f[3]=O*F*$-M*k*U;break;case"zxy":f[0]=M*F*$-O*k*U,f[1]=O*k*$+M*F*U,f[2]=O*F*U+M*k*$,f[3]=O*F*$-M*k*U;break;case"zyx":f[0]=M*F*$-O*k*U,f[1]=O*k*$+M*F*U,f[2]=O*F*U-M*k*$,f[3]=O*F*$+M*k*U;break;default:throw new Error("Unknown angle order "+b)}return f}function Ze(){var f=new L(2);return L!=Float32Array&&(f[0]=0,f[1]=0),f}function rt(f,l){var p=new L(2);return p[0]=f,p[1]=l,p}G(),pe=new L(4),L!=Float32Array&&(pe[0]=0,pe[1]=0,pe[2]=0,pe[3]=0),G(),K(1,0,0),K(0,1,0),de(),de(),z(),Ze();let ct=8192;function qe(f,l,p){return l*(ct/(f.tileSize*Math.pow(2,p-f.tileID.overscaledZ)))}function lt(f,l){return(f%l+l)%l}function _t(f,l,p){return f*(1-p)+l*p}function Tt(f){if(f<=0)return 0;if(f>=1)return 1;let l=f*f,p=l*f;return 4*(f<.5?p:3*(f-l)+p-.75)}function et(f,l,p,g){let b=new w(f,l,p,g);return I=>b.solve(I)}let pt=et(.25,.1,.25,1);function ot(f,l,p){return Math.min(p,Math.max(l,f))}function $e(f,l,p){let g=p-l,b=((f-l)%g+g)%g+l;return b===l?p:b}function De(f,...l){for(let p of l)for(let g in p)f[g]=p[g];return f}let Ke=1;function Ge(f,l,p){let g={};for(let b in f)g[b]=l.call(this,f[b],b,f);return g}function ft(f,l,p){let g={};for(let b in f)l.call(this,f[b],b,f)&&(g[b]=f[b]);return g}function mt(f){return Array.isArray(f)?f.map(mt):typeof f=="object"&&f?Ge(f,mt):f}let Ot={};function At(f){Ot[f]||(typeof console!="undefined"&&console.warn(f),Ot[f]=!0)}function Mt(f,l,p){return(p.y-f.y)*(l.x-f.x)>(l.y-f.y)*(p.x-f.x)}function Yt(f){return typeof WorkerGlobalScope!="undefined"&&f!==void 0&&f instanceof WorkerGlobalScope}let jt=null;function Ut(f){return typeof ImageBitmap!="undefined"&&f instanceof ImageBitmap}let ar="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAAC0lEQVQYV2NgAAIAAAUAAarVyFEAAAAASUVORK5CYII=";function jr(f,l,p,g,b){return i(this,void 0,void 0,function*(){if(typeof VideoFrame=="undefined")throw new Error("VideoFrame not supported");let I=new VideoFrame(f,{timestamp:0});try{let M=I==null?void 0:I.format;if(!M||!M.startsWith("BGR")&&!M.startsWith("RGB"))throw new Error(`Unrecognized format ${M}`);let O=M.startsWith("BGR"),k=new Uint8ClampedArray(g*b*4);if(yield I.copyTo(k,function(F,U,$,X,re){let ne=4*Math.max(-U,0),ae=(Math.max(0,$)-$)*X*4+ne,he=4*X,Se=Math.max(0,U),Xe=Math.max(0,$);return{rect:{x:Se,y:Xe,width:Math.min(F.width,U+X)-Se,height:Math.min(F.height,$+re)-Xe},layout:[{offset:ae,stride:he}]}}(f,l,p,g,b)),O)for(let F=0;F<k.length;F+=4){let U=k[F];k[F]=k[F+2],k[F+2]=U}return k}finally{I.close()}})}let Or,br;function Pr(f,l,p,g){return f.addEventListener(l,p,g),{unsubscribe:()=>{f.removeEventListener(l,p,g)}}}function Le(f){return f*Math.PI/180}function Je(f){return f/Math.PI*180}let tt={touchstart:!0,touchmove:!0,touchmoveWindow:!0,touchend:!0,touchcancel:!0},Ft={dblclick:!0,click:!0,mouseover:!0,mouseout:!0,mousedown:!0,mousemove:!0,mousemoveWindow:!0,mouseup:!0,mouseupWindow:!0,contextmenu:!0,wheel:!0},$t="AbortError";function xe(){return new Error($t)}let J={MAX_PARALLEL_IMAGE_REQUESTS:16,MAX_PARALLEL_IMAGE_REQUESTS_PER_FRAME:8,MAX_TILE_CACHE_ZOOM_LEVELS:5,REGISTERED_PROTOCOLS:{},WORKER_URL:""};function oe(f){return J.REGISTERED_PROTOCOLS[f.substring(0,f.indexOf("://"))]}let ue="global-dispatcher";class we extends Error{constructor(l,p,g,b){super(`AJAXError: ${p} (${l}): ${g}`),this.status=l,this.statusText=p,this.url=g,this.body=b}}let Fe=()=>Yt(self)?self.worker&&self.worker.referrer:(window.location.protocol==="blob:"?window.parent:window).location.href,We=function(f,l){if(/:\/\//.test(f.url)&&!/^https?:|^file:/.test(f.url)){let g=oe(f.url);if(g)return g(f,l);if(Yt(self)&&self.worker&&self.worker.actor)return self.worker.actor.sendAsync({type:"GR",data:f,targetMapId:ue},l)}if(!(/^file:/.test(p=f.url)||/^file:/.test(Fe())&&!/^\w+:/.test(p))){if(fetch&&Request&&AbortController&&Object.prototype.hasOwnProperty.call(Request.prototype,"signal"))return function(g,b){return i(this,void 0,void 0,function*(){let I=new Request(g.url,{method:g.method||"GET",body:g.body,credentials:g.credentials,headers:g.headers,cache:g.cache,referrer:Fe(),signal:b.signal}),M,O;g.type!=="json"||I.headers.has("Accept")||I.headers.set("Accept","application/json");try{M=yield fetch(I)}catch(F){throw new we(0,F.message,g.url,new Blob())}if(!M.ok){let F=yield M.blob();throw new we(M.status,M.statusText,g.url,F)}O=g.type==="arrayBuffer"||g.type==="image"?M.arrayBuffer():g.type==="json"?M.json():M.text();let k=yield O;if(b.signal.aborted)throw xe();return{data:k,cacheControl:M.headers.get("Cache-Control"),expires:M.headers.get("Expires")}})}(f,l);if(Yt(self)&&self.worker&&self.worker.actor)return self.worker.actor.sendAsync({type:"GR",data:f,mustQueue:!0,targetMapId:ue},l)}var p;return function(g,b){return new Promise((I,M)=>{var O;let k=new XMLHttpRequest;k.open(g.method||"GET",g.url,!0),g.type!=="arrayBuffer"&&g.type!=="image"||(k.responseType="arraybuffer");for(let F in g.headers)k.setRequestHeader(F,g.headers[F]);g.type==="json"&&(k.responseType="text",!((O=g.headers)===null||O===void 0)&&O.Accept||k.setRequestHeader("Accept","application/json")),k.withCredentials=g.credentials==="include",k.onerror=()=>{M(new Error(k.statusText))},k.onload=()=>{if(!b.signal.aborted)if((k.status>=200&&k.status<300||k.status===0)&&k.response!==null){let F=k.response;if(g.type==="json")try{F=JSON.parse(k.response)}catch(U){return void M(U)}I({data:F,cacheControl:k.getResponseHeader("Cache-Control"),expires:k.getResponseHeader("Expires")})}else{let F=new Blob([k.response],{type:k.getResponseHeader("Content-Type")});M(new we(k.status,k.statusText,g.url,F))}},b.signal.addEventListener("abort",()=>{k.abort(),M(xe())}),k.send(g.body)})}(f,l)};function nt(f){if(!f||f.indexOf("://")<=0||f.indexOf("data:image/")===0||f.indexOf("blob:")===0)return!0;let l=new URL(f),p=window.location;return l.protocol===p.protocol&&l.host===p.host}function Ye(f,l,p){p[f]&&p[f].indexOf(l)!==-1||(p[f]=p[f]||[],p[f].push(l))}function be(f,l,p){if(p&&p[f]){let g=p[f].indexOf(l);g!==-1&&p[f].splice(g,1)}}class Ee{constructor(l,p={}){De(this,p),this.type=l}}class Be extends Ee{constructor(l,p={}){super("error",De({error:l},p))}}class gt{on(l,p){return this._listeners=this._listeners||{},Ye(l,p,this._listeners),{unsubscribe:()=>{this.off(l,p)}}}off(l,p){return be(l,p,this._listeners),be(l,p,this._oneTimeListeners),this}once(l,p){return p?(this._oneTimeListeners=this._oneTimeListeners||{},Ye(l,p,this._oneTimeListeners),this):new Promise(g=>this.once(l,g))}fire(l,p){typeof l=="string"&&(l=new Ee(l,p||{}));let g=l.type;if(this.listens(g)){l.target=this;let b=this._listeners&&this._listeners[g]?this._listeners[g].slice():[];for(let O of b)O.call(this,l);let I=this._oneTimeListeners&&this._oneTimeListeners[g]?this._oneTimeListeners[g].slice():[];for(let O of I)be(g,O,this._oneTimeListeners),O.call(this,l);let M=this._eventedParent;M&&(De(l,typeof this._eventedParentData=="function"?this._eventedParentData():this._eventedParentData),M.fire(l))}else l instanceof Be&&console.error(l.error);return this}listens(l){return this._listeners&&this._listeners[l]&&this._listeners[l].length>0||this._oneTimeListeners&&this._oneTimeListeners[l]&&this._oneTimeListeners[l].length>0||this._eventedParent&&this._eventedParent.listens(l)}setEventedParent(l,p){return this._eventedParent=l,this._eventedParentData=p,this}}var Ae={$version:8,$root:{version:{required:!0,type:"enum",values:[8]},name:{type:"string"},metadata:{type:"*"},center:{type:"array",value:"number"},centerAltitude:{type:"number"},zoom:{type:"number"},bearing:{type:"number",default:0,period:360,units:"degrees"},pitch:{type:"number",default:0,units:"degrees"},roll:{type:"number",default:0,units:"degrees"},state:{type:"state",default:{}},light:{type:"light"},sky:{type:"sky"},projection:{type:"projection"},terrain:{type:"terrain"},sources:{required:!0,type:"sources"},sprite:{type:"sprite"},glyphs:{type:"string"},transition:{type:"transition"},layers:{required:!0,type:"array",value:"layer"}},sources:{"*":{type:"source"}},source:["source_vector","source_raster","source_raster_dem","source_geojson","source_video","source_image"],source_vector:{type:{required:!0,type:"enum",values:{vector:{}}},url:{type:"string"},tiles:{type:"array",value:"string"},bounds:{type:"array",value:"number",length:4,default:[-180,-85.051129,180,85.051129]},scheme:{type:"enum",values:{xyz:{},tms:{}},default:"xyz"},minzoom:{type:"number",default:0},maxzoom:{type:"number",default:22},attribution:{type:"string"},promoteId:{type:"promoteId"},volatile:{type:"boolean",default:!1},"*":{type:"*"}},source_raster:{type:{required:!0,type:"enum",values:{raster:{}}},url:{type:"string"},tiles:{type:"array",value:"string"},bounds:{type:"array",value:"number",length:4,default:[-180,-85.051129,180,85.051129]},minzoom:{type:"number",default:0},maxzoom:{type:"number",default:22},tileSize:{type:"number",default:512,units:"pixels"},scheme:{type:"enum",values:{xyz:{},tms:{}},default:"xyz"},attribution:{type:"string"},volatile:{type:"boolean",default:!1},"*":{type:"*"}},source_raster_dem:{type:{required:!0,type:"enum",values:{"raster-dem":{}}},url:{type:"string"},tiles:{type:"array",value:"string"},bounds:{type:"array",value:"number",length:4,default:[-180,-85.051129,180,85.051129]},minzoom:{type:"number",default:0},maxzoom:{type:"number",default:22},tileSize:{type:"number",default:512,units:"pixels"},attribution:{type:"string"},encoding:{type:"enum",values:{terrarium:{},mapbox:{},custom:{}},default:"mapbox"},redFactor:{type:"number",default:1},blueFactor:{type:"number",default:1},greenFactor:{type:"number",default:1},baseShift:{type:"number",default:0},volatile:{type:"boolean",default:!1},"*":{type:"*"}},source_geojson:{type:{required:!0,type:"enum",values:{geojson:{}}},data:{required:!0,type:"*"},maxzoom:{type:"number",default:18},attribution:{type:"string"},buffer:{type:"number",default:128,maximum:512,minimum:0},filter:{type:"*"},tolerance:{type:"number",default:.375},cluster:{type:"boolean",default:!1},clusterRadius:{type:"number",default:50,minimum:0},clusterMaxZoom:{type:"number"},clusterMinPoints:{type:"number"},clusterProperties:{type:"*"},lineMetrics:{type:"boolean",default:!1},generateId:{type:"boolean",default:!1},promoteId:{type:"promoteId"}},source_video:{type:{required:!0,type:"enum",values:{video:{}}},urls:{required:!0,type:"array",value:"string"},coordinates:{required:!0,type:"array",length:4,value:{type:"array",length:2,value:"number"}}},source_image:{type:{required:!0,type:"enum",values:{image:{}}},url:{required:!0,type:"string"},coordinates:{required:!0,type:"array",length:4,value:{type:"array",length:2,value:"number"}}},layer:{id:{type:"string",required:!0},type:{type:"enum",values:{fill:{},line:{},symbol:{},circle:{},heatmap:{},"fill-extrusion":{},raster:{},hillshade:{},"color-relief":{},background:{}},required:!0},metadata:{type:"*"},source:{type:"string"},"source-layer":{type:"string"},minzoom:{type:"number",minimum:0,maximum:24},maxzoom:{type:"number",minimum:0,maximum:24},filter:{type:"filter"},layout:{type:"layout"},paint:{type:"paint"}},layout:["layout_fill","layout_line","layout_circle","layout_heatmap","layout_fill-extrusion","layout_symbol","layout_raster","layout_hillshade","layout_color-relief","layout_background"],layout_background:{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_fill:{"fill-sort-key":{type:"number",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_circle:{"circle-sort-key":{type:"number",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_heatmap:{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},"layout_fill-extrusion":{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_line:{"line-cap":{type:"enum",values:{butt:{},round:{},square:{}},default:"butt",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"line-join":{type:"enum",values:{bevel:{},round:{},miter:{}},default:"miter",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"line-miter-limit":{type:"number",default:2,requires:[{"line-join":"miter"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"line-round-limit":{type:"number",default:1.05,requires:[{"line-join":"round"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"line-sort-key":{type:"number",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_symbol:{"symbol-placement":{type:"enum",values:{point:{},line:{},"line-center":{}},default:"point",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"symbol-spacing":{type:"number",default:250,minimum:1,units:"pixels",requires:[{"symbol-placement":"line"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"symbol-avoid-edges":{type:"boolean",default:!1,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"symbol-sort-key":{type:"number",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"symbol-z-order":{type:"enum",values:{auto:{},"viewport-y":{},source:{}},default:"auto",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-allow-overlap":{type:"boolean",default:!1,requires:["icon-image",{"!":"icon-overlap"}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-overlap":{type:"enum",values:{never:{},always:{},cooperative:{}},requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-ignore-placement":{type:"boolean",default:!1,requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-optional":{type:"boolean",default:!1,requires:["icon-image","text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-rotation-alignment":{type:"enum",values:{map:{},viewport:{},auto:{}},default:"auto",requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-size":{type:"number",default:1,minimum:0,units:"factor of the original icon size",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-text-fit":{type:"enum",values:{none:{},width:{},height:{},both:{}},default:"none",requires:["icon-image","text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-text-fit-padding":{type:"array",value:"number",length:4,default:[0,0,0,0],units:"pixels",requires:["icon-image","text-field",{"icon-text-fit":["both","width","height"]}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"icon-image":{type:"resolvedImage",tokens:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-rotate":{type:"number",default:0,period:360,units:"degrees",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-padding":{type:"padding",default:[2],units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-keep-upright":{type:"boolean",default:!1,requires:["icon-image",{"icon-rotation-alignment":"map"},{"symbol-placement":["line","line-center"]}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-offset":{type:"array",value:"number",length:2,default:[0,0],requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-anchor":{type:"enum",values:{center:{},left:{},right:{},top:{},bottom:{},"top-left":{},"top-right":{},"bottom-left":{},"bottom-right":{}},default:"center",requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-pitch-alignment":{type:"enum",values:{map:{},viewport:{},auto:{}},default:"auto",requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-pitch-alignment":{type:"enum",values:{map:{},viewport:{},auto:{}},default:"auto",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-rotation-alignment":{type:"enum",values:{map:{},viewport:{},"viewport-glyph":{},auto:{}},default:"auto",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-field":{type:"formatted",default:"",tokens:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-font":{type:"array",value:"string",default:["Open Sans Regular","Arial Unicode MS Regular"],requires:["text-field"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-size":{type:"number",default:16,minimum:0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-max-width":{type:"number",default:10,minimum:0,units:"ems",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-line-height":{type:"number",default:1.2,units:"ems",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-letter-spacing":{type:"number",default:0,units:"ems",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-justify":{type:"enum",values:{auto:{},left:{},center:{},right:{}},default:"center",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-radial-offset":{type:"number",units:"ems",default:0,requires:["text-field"],"property-type":"data-driven",expression:{interpolated:!0,parameters:["zoom","feature"]}},"text-variable-anchor":{type:"array",value:"enum",values:{center:{},left:{},right:{},top:{},bottom:{},"top-left":{},"top-right":{},"bottom-left":{},"bottom-right":{}},requires:["text-field",{"symbol-placement":["point"]}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-variable-anchor-offset":{type:"variableAnchorOffsetCollection",requires:["text-field",{"symbol-placement":["point"]}],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-anchor":{type:"enum",values:{center:{},left:{},right:{},top:{},bottom:{},"top-left":{},"top-right":{},"bottom-left":{},"bottom-right":{}},default:"center",requires:["text-field",{"!":"text-variable-anchor"}],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-max-angle":{type:"number",default:45,units:"degrees",requires:["text-field",{"symbol-placement":["line","line-center"]}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-writing-mode":{type:"array",value:"enum",values:{horizontal:{},vertical:{}},requires:["text-field",{"symbol-placement":["point"]}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-rotate":{type:"number",default:0,period:360,units:"degrees",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-padding":{type:"number",default:2,minimum:0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-keep-upright":{type:"boolean",default:!0,requires:["text-field",{"text-rotation-alignment":"map"},{"symbol-placement":["line","line-center"]}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-transform":{type:"enum",values:{none:{},uppercase:{},lowercase:{}},default:"none",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-offset":{type:"array",value:"number",units:"ems",length:2,default:[0,0],requires:["text-field",{"!":"text-radial-offset"}],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-allow-overlap":{type:"boolean",default:!1,requires:["text-field",{"!":"text-overlap"}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-overlap":{type:"enum",values:{never:{},always:{},cooperative:{}},requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-ignore-placement":{type:"boolean",default:!1,requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-optional":{type:"boolean",default:!1,requires:["text-field","icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_raster:{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_hillshade:{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},"layout_color-relief":{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},filter:{type:"array",value:"*"},filter_operator:{type:"enum",values:{"==":{},"!=":{},">":{},">=":{},"<":{},"<=":{},in:{},"!in":{},all:{},any:{},none:{},has:{},"!has":{}}},geometry_type:{type:"enum",values:{Point:{},LineString:{},Polygon:{}}},function:{expression:{type:"expression"},stops:{type:"array",value:"function_stop"},base:{type:"number",default:1,minimum:0},property:{type:"string",default:"$zoom"},type:{type:"enum",values:{identity:{},exponential:{},interval:{},categorical:{}},default:"exponential"},colorSpace:{type:"enum",values:{rgb:{},lab:{},hcl:{}},default:"rgb"},default:{type:"*",required:!1}},function_stop:{type:"array",minimum:0,maximum:24,value:["number","color"],length:2},expression:{type:"array",value:"*",minimum:1},light:{anchor:{type:"enum",default:"viewport",values:{map:{},viewport:{}},"property-type":"data-constant",transition:!1,expression:{interpolated:!1,parameters:["zoom"]}},position:{type:"array",default:[1.15,210,30],length:3,value:"number","property-type":"data-constant",transition:!0,expression:{interpolated:!0,parameters:["zoom"]}},color:{type:"color","property-type":"data-constant",default:"#ffffff",expression:{interpolated:!0,parameters:["zoom"]},transition:!0},intensity:{type:"number","property-type":"data-constant",default:.5,minimum:0,maximum:1,expression:{interpolated:!0,parameters:["zoom"]},transition:!0}},sky:{"sky-color":{type:"color","property-type":"data-constant",default:"#88C6FC",expression:{interpolated:!0,parameters:["zoom"]},transition:!0},"horizon-color":{type:"color","property-type":"data-constant",default:"#ffffff",expression:{interpolated:!0,parameters:["zoom"]},transition:!0},"fog-color":{type:"color","property-type":"data-constant",default:"#ffffff",expression:{interpolated:!0,parameters:["zoom"]},transition:!0},"fog-ground-blend":{type:"number","property-type":"data-constant",default:.5,minimum:0,maximum:1,expression:{interpolated:!0,parameters:["zoom"]},transition:!0},"horizon-fog-blend":{type:"number","property-type":"data-constant",default:.8,minimum:0,maximum:1,expression:{interpolated:!0,parameters:["zoom"]},transition:!0},"sky-horizon-blend":{type:"number","property-type":"data-constant",default:.8,minimum:0,maximum:1,expression:{interpolated:!0,parameters:["zoom"]},transition:!0},"atmosphere-blend":{type:"number","property-type":"data-constant",default:.8,minimum:0,maximum:1,expression:{interpolated:!0,parameters:["zoom"]},transition:!0}},terrain:{source:{type:"string",required:!0},exaggeration:{type:"number",minimum:0,default:1}},projection:{type:{type:"projectionDefinition",default:"mercator","property-type":"data-constant",transition:!1,expression:{interpolated:!0,parameters:["zoom"]}}},paint:["paint_fill","paint_line","paint_circle","paint_heatmap","paint_fill-extrusion","paint_symbol","paint_raster","paint_hillshade","paint_color-relief","paint_background"],paint_fill:{"fill-antialias":{type:"boolean",default:!0,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"fill-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"fill-pattern"}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-outline-color":{type:"color",transition:!0,requires:[{"!":"fill-pattern"},{"fill-antialias":!0}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"fill-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["fill-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"fill-pattern":{type:"resolvedImage",transition:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"cross-faded-data-driven"}},"paint_fill-extrusion":{"fill-extrusion-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"fill-extrusion-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"fill-extrusion-pattern"}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-extrusion-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"fill-extrusion-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["fill-extrusion-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"fill-extrusion-pattern":{type:"resolvedImage",transition:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"cross-faded-data-driven"},"fill-extrusion-height":{type:"number",default:0,minimum:0,units:"meters",transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-extrusion-base":{type:"number",default:0,minimum:0,units:"meters",transition:!0,requires:["fill-extrusion-height"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-extrusion-vertical-gradient":{type:"boolean",default:!0,transition:!1,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"}},paint_line:{"line-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"line-pattern"}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"line-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["line-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"line-width":{type:"number",default:1,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-gap-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-offset":{type:"number",default:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-blur":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-dasharray":{type:"array",value:"number",minimum:0,transition:!0,units:"line widths",requires:[{"!":"line-pattern"}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"cross-faded"},"line-pattern":{type:"resolvedImage",transition:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"cross-faded-data-driven"},"line-gradient":{type:"color",transition:!1,requires:[{"!":"line-dasharray"},{"!":"line-pattern"},{source:"geojson",has:{lineMetrics:!0}}],expression:{interpolated:!0,parameters:["line-progress"]},"property-type":"color-ramp"}},paint_circle:{"circle-radius":{type:"number",default:5,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-color":{type:"color",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-blur":{type:"number",default:0,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"circle-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["circle-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"circle-pitch-scale":{type:"enum",values:{map:{},viewport:{}},default:"map",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"circle-pitch-alignment":{type:"enum",values:{map:{},viewport:{}},default:"viewport",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"circle-stroke-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-stroke-color":{type:"color",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-stroke-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"}},paint_heatmap:{"heatmap-radius":{type:"number",default:30,minimum:1,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"heatmap-weight":{type:"number",default:1,minimum:0,transition:!1,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"heatmap-intensity":{type:"number",default:1,minimum:0,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"heatmap-color":{type:"color",default:["interpolate",["linear"],["heatmap-density"],0,"rgba(0, 0, 255, 0)",.1,"royalblue",.3,"cyan",.5,"lime",.7,"yellow",1,"red"],transition:!1,expression:{interpolated:!0,parameters:["heatmap-density"]},"property-type":"color-ramp"},"heatmap-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},paint_symbol:{"icon-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-color":{type:"color",default:"#000000",transition:!0,requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-halo-color":{type:"color",default:"rgba(0, 0, 0, 0)",transition:!0,requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-halo-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-halo-blur":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"icon-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["icon-image","icon-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-color":{type:"color",default:"#000000",transition:!0,overridable:!0,requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-halo-color":{type:"color",default:"rgba(0, 0, 0, 0)",transition:!0,requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-halo-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-halo-blur":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["text-field","text-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"}},paint_raster:{"raster-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-hue-rotate":{type:"number",default:0,period:360,transition:!0,units:"degrees",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-brightness-min":{type:"number",default:0,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-brightness-max":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-saturation":{type:"number",default:0,minimum:-1,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-contrast":{type:"number",default:0,minimum:-1,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-resampling":{type:"enum",values:{linear:{},nearest:{}},default:"linear",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"raster-fade-duration":{type:"number",default:300,minimum:0,transition:!1,units:"milliseconds",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},paint_hillshade:{"hillshade-illumination-direction":{type:"numberArray",default:335,minimum:0,maximum:359,transition:!1,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-illumination-altitude":{type:"numberArray",default:45,minimum:0,maximum:90,transition:!1,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-illumination-anchor":{type:"enum",values:{map:{},viewport:{}},default:"viewport",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-exaggeration":{type:"number",default:.5,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-shadow-color":{type:"colorArray",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-highlight-color":{type:"colorArray",default:"#FFFFFF",transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-accent-color":{type:"color",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-method":{type:"enum",values:{standard:{},basic:{},combined:{},igor:{},multidirectional:{}},default:"standard",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"}},"paint_color-relief":{"color-relief-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"color-relief-color":{type:"color",transition:!1,expression:{interpolated:!0,parameters:["elevation"]},"property-type":"color-ramp"}},paint_background:{"background-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"background-pattern"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"background-pattern":{type:"resolvedImage",transition:!0,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"cross-faded"},"background-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},transition:{duration:{type:"number",default:300,minimum:0,units:"milliseconds"},delay:{type:"number",default:0,minimum:0,units:"milliseconds"}},"property-type":{"data-driven":{type:"property-type"},"cross-faded":{type:"property-type"},"cross-faded-data-driven":{type:"property-type"},"color-ramp":{type:"property-type"},"data-constant":{type:"property-type"},constant:{type:"property-type"}},promoteId:{"*":{type:"string"}}};let Pt=["type","source","source-layer","minzoom","maxzoom","filter","layout"];function Oe(f,l){let p={};for(let g in f)g!=="ref"&&(p[g]=f[g]);return Pt.forEach(g=>{g in l&&(p[g]=l[g])}),p}function xt(f,l){if(Array.isArray(f)){if(!Array.isArray(l)||f.length!==l.length)return!1;for(let p=0;p<f.length;p++)if(!xt(f[p],l[p]))return!1;return!0}if(typeof f=="object"&&f!==null&&l!==null){if(typeof l!="object"||Object.keys(f).length!==Object.keys(l).length)return!1;for(let p in f)if(!xt(f[p],l[p]))return!1;return!0}return f===l}function Bt(f,l){f.push(l)}function Tr(f,l,p){Bt(p,{command:"addSource",args:[f,l[f]]})}function pn(f,l,p){Bt(l,{command:"removeSource",args:[f]}),p[f]=!0}function wt(f,l,p,g){pn(f,p,g),Tr(f,l,p)}function an(f,l,p){let g;for(g in f[p])if(Object.prototype.hasOwnProperty.call(f[p],g)&&g!=="data"&&!xt(f[p][g],l[p][g]))return!1;for(g in l[p])if(Object.prototype.hasOwnProperty.call(l[p],g)&&g!=="data"&&!xt(f[p][g],l[p][g]))return!1;return!0}function Cr(f,l,p,g,b,I){f=f||{},l=l||{};for(let M in f)Object.prototype.hasOwnProperty.call(f,M)&&(xt(f[M],l[M])||p.push({command:I,args:[g,M,l[M],b]}));for(let M in l)Object.prototype.hasOwnProperty.call(l,M)&&!Object.prototype.hasOwnProperty.call(f,M)&&(xt(f[M],l[M])||p.push({command:I,args:[g,M,l[M],b]}))}function or(f){return f.id}function Er(f,l){return f[l.id]=l,f}class Rt{constructor(l,p,g,b){this.message=(l?`${l}: `:"")+g,b&&(this.identifier=b),p!=null&&p.__line__&&(this.line=p.__line__)}}function qo(f,...l){for(let p of l)for(let g in p)f[g]=p[g];return f}class Xo extends Error{constructor(l,p){super(p),this.message=p,this.key=l}}class Un{constructor(l,p=[]){this.parent=l,this.bindings={};for(let[g,b]of p)this.bindings[g]=b}concat(l){return new Un(this,l)}get(l){if(this.bindings[l])return this.bindings[l];if(this.parent)return this.parent.get(l);throw new Error(`${l} not found in scope.`)}has(l){return!!this.bindings[l]||!!this.parent&&this.parent.has(l)}}let ua={kind:"null"},zt={kind:"number"},Dr={kind:"string"},hr={kind:"boolean"},yn={kind:"color"},_n={kind:"projectionDefinition"},On={kind:"object"},sr={kind:"value"},fn={kind:"collator"},bn={kind:"formatted"},rn={kind:"padding"},on={kind:"colorArray"},Vr={kind:"numberArray"},Gr={kind:"resolvedImage"},Mn={kind:"variableAnchorOffsetCollection"};function Pn(f,l){return{kind:"array",itemType:f,N:l}}function Et(f){if(f.kind==="array"){let l=Et(f.itemType);return typeof f.N=="number"?`array<${l}, ${f.N}>`:f.itemType.kind==="value"?"array":`array<${l}>`}return f.kind}let tr=[ua,zt,Dr,hr,yn,_n,bn,On,Pn(sr),rn,Vr,on,Gr,Mn];function ui(f,l){if(l.kind==="error")return null;if(f.kind==="array"){if(l.kind==="array"&&(l.N===0&&l.itemType.kind==="value"||!ui(f.itemType,l.itemType))&&(typeof f.N!="number"||f.N===l.N))return null}else{if(f.kind===l.kind)return null;if(f.kind==="value"){for(let p of tr)if(!ui(p,l))return null}}return`Expected ${Et(f)} but found ${Et(l)} instead.`}function Oi(f,l){return l.some(p=>p.kind===f.kind)}function po(f,l){return l.some(p=>p==="null"?f===null:p==="array"?Array.isArray(f):p==="object"?f&&!Array.isArray(f)&&typeof f=="object":p===typeof f)}function so(f,l){return f.kind==="array"&&l.kind==="array"?f.itemType.kind===l.itemType.kind&&typeof f.N=="number":f.kind===l.kind}let Kl=.96422,Fs=.82521,Kc=4/29,wo=6/29,Kn=3*wo*wo,oi=wo*wo*wo,fo=Math.PI/180,Zr=180/Math.PI;function gn(f){return(f%=360)<0&&(f+=360),f}function tn([f,l,p,g]){let b,I,M=Bn((.2225045*(f=xn(f))+.7168786*(l=xn(l))+.0606169*(p=xn(p)))/1);f===l&&l===p?b=I=M:(b=Bn((.4360747*f+.3850649*l+.1430804*p)/Kl),I=Bn((.0139322*f+.0971045*l+.7141733*p)/Fs));let O=116*M-16;return[O<0?0:O,500*(b-M),200*(M-I),g]}function xn(f){return f<=.04045?f/12.92:Math.pow((f+.055)/1.055,2.4)}function Bn(f){return f>oi?Math.pow(f,1/3):f/Kn+Kc}function Ur([f,l,p,g]){let b=(f+16)/116,I=isNaN(l)?b:b+l/500,M=isNaN(p)?b:b-p/200;return b=1*Hn(b),I=Kl*Hn(I),M=Fs*Hn(M),[lo(3.1338561*I-1.6168667*b-.4906146*M),lo(-.9787684*I+1.9161415*b+.033454*M),lo(.0719453*I-.2289914*b+1.4052427*M),g]}function lo(f){return(f=f<=.00304?12.92*f:1.055*Math.pow(f,1/2.4)-.055)<0?0:f>1?1:f}function Hn(f){return f>wo?f*f*f:Kn*(f-Kc)}let zo=Object.hasOwn||function(f,l){return Object.prototype.hasOwnProperty.call(f,l)};function $n(f,l){return zo(f,l)?f[l]:void 0}function Zi(f){return parseInt(f.padEnd(2,f),16)/255}function Vo(f,l){return $r(l?f/100:f,0,1)}function $r(f,l,p){return Math.min(Math.max(l,f),p)}function Pi(f){return!f.some(Number.isNaN)}let bi={aliceblue:[240,248,255],antiquewhite:[250,235,215],aqua:[0,255,255],aquamarine:[127,255,212],azure:[240,255,255],beige:[245,245,220],bisque:[255,228,196],black:[0,0,0],blanchedalmond:[255,235,205],blue:[0,0,255],blueviolet:[138,43,226],brown:[165,42,42],burlywood:[222,184,135],cadetblue:[95,158,160],chartreuse:[127,255,0],chocolate:[210,105,30],coral:[255,127,80],cornflowerblue:[100,149,237],cornsilk:[255,248,220],crimson:[220,20,60],cyan:[0,255,255],darkblue:[0,0,139],darkcyan:[0,139,139],darkgoldenrod:[184,134,11],darkgray:[169,169,169],darkgreen:[0,100,0],darkgrey:[169,169,169],darkkhaki:[189,183,107],darkmagenta:[139,0,139],darkolivegreen:[85,107,47],darkorange:[255,140,0],darkorchid:[153,50,204],darkred:[139,0,0],darksalmon:[233,150,122],darkseagreen:[143,188,143],darkslateblue:[72,61,139],darkslategray:[47,79,79],darkslategrey:[47,79,79],darkturquoise:[0,206,209],darkviolet:[148,0,211],deeppink:[255,20,147],deepskyblue:[0,191,255],dimgray:[105,105,105],dimgrey:[105,105,105],dodgerblue:[30,144,255],firebrick:[178,34,34],floralwhite:[255,250,240],forestgreen:[34,139,34],fuchsia:[255,0,255],gainsboro:[220,220,220],ghostwhite:[248,248,255],gold:[255,215,0],goldenrod:[218,165,32],gray:[128,128,128],green:[0,128,0],greenyellow:[173,255,47],grey:[128,128,128],honeydew:[240,255,240],hotpink:[255,105,180],indianred:[205,92,92],indigo:[75,0,130],ivory:[255,255,240],khaki:[240,230,140],lavender:[230,230,250],lavenderblush:[255,240,245],lawngreen:[124,252,0],lemonchiffon:[255,250,205],lightblue:[173,216,230],lightcoral:[240,128,128],lightcyan:[224,255,255],lightgoldenrodyellow:[250,250,210],lightgray:[211,211,211],lightgreen:[144,238,144],lightgrey:[211,211,211],lightpink:[255,182,193],lightsalmon:[255,160,122],lightseagreen:[32,178,170],lightskyblue:[135,206,250],lightslategray:[119,136,153],lightslategrey:[119,136,153],lightsteelblue:[176,196,222],lightyellow:[255,255,224],lime:[0,255,0],limegreen:[50,205,50],linen:[250,240,230],magenta:[255,0,255],maroon:[128,0,0],mediumaquamarine:[102,205,170],mediumblue:[0,0,205],mediumorchid:[186,85,211],mediumpurple:[147,112,219],mediumseagreen:[60,179,113],mediumslateblue:[123,104,238],mediumspringgreen:[0,250,154],mediumturquoise:[72,209,204],mediumvioletred:[199,21,133],midnightblue:[25,25,112],mintcream:[245,255,250],mistyrose:[255,228,225],moccasin:[255,228,181],navajowhite:[255,222,173],navy:[0,0,128],oldlace:[253,245,230],olive:[128,128,0],olivedrab:[107,142,35],orange:[255,165,0],orangered:[255,69,0],orchid:[218,112,214],palegoldenrod:[238,232,170],palegreen:[152,251,152],paleturquoise:[175,238,238],palevioletred:[219,112,147],papayawhip:[255,239,213],peachpuff:[255,218,185],peru:[205,133,63],pink:[255,192,203],plum:[221,160,221],powderblue:[176,224,230],purple:[128,0,128],rebeccapurple:[102,51,153],red:[255,0,0],rosybrown:[188,143,143],royalblue:[65,105,225],saddlebrown:[139,69,19],salmon:[250,128,114],sandybrown:[244,164,96],seagreen:[46,139,87],seashell:[255,245,238],sienna:[160,82,45],silver:[192,192,192],skyblue:[135,206,235],slateblue:[106,90,205],slategray:[112,128,144],slategrey:[112,128,144],snow:[255,250,250],springgreen:[0,255,127],steelblue:[70,130,180],tan:[210,180,140],teal:[0,128,128],thistle:[216,191,216],tomato:[255,99,71],turquoise:[64,224,208],violet:[238,130,238],wheat:[245,222,179],white:[255,255,255],whitesmoke:[245,245,245],yellow:[255,255,0],yellowgreen:[154,205,50]};function Us(f,l,p){return f+p*(l-f)}function os(f,l,p){return f.map((g,b)=>Us(g,l[b],p))}class vn{constructor(l,p,g,b=1,I=!0){this.r=l,this.g=p,this.b=g,this.a=b,I||(this.r*=b,this.g*=b,this.b*=b,b||this.overwriteGetter("rgb",[l,p,g,b]))}static parse(l){if(l instanceof vn)return l;if(typeof l!="string")return;let p=function(g){if((g=g.toLowerCase().trim())==="transparent")return[0,0,0,0];let b=$n(bi,g);if(b){let[M,O,k]=b;return[M/255,O/255,k/255,1]}if(g.startsWith("#")&&/^#(?:[0-9a-f]{3,4}|[0-9a-f]{6}|[0-9a-f]{8})$/.test(g)){let M=g.length<6?1:2,O=1;return[Zi(g.slice(O,O+=M)),Zi(g.slice(O,O+=M)),Zi(g.slice(O,O+=M)),Zi(g.slice(O,O+M)||"ff")]}if(g.startsWith("rgb")){let M=g.match(/^rgba?\(\s*([\de.+-]+)(%)?(?:\s+|\s*(,)\s*)([\de.+-]+)(%)?(?:\s+|\s*(,)\s*)([\de.+-]+)(%)?(?:\s*([,\/])\s*([\de.+-]+)(%)?)?\s*\)$/);if(M){let[O,k,F,U,$,X,re,ne,ae,he,Se,Xe]=M,je=[U||" ",re||" ",he].join("");if(je==="  "||je==="  /"||je===",,"||je===",,,"){let Ve=[F,X,ae].join(""),st=Ve==="%%%"?100:Ve===""?255:0;if(st){let vt=[$r(+k/st,0,1),$r(+$/st,0,1),$r(+ne/st,0,1),Se?Vo(+Se,Xe):1];if(Pi(vt))return vt}}return}}let I=g.match(/^hsla?\(\s*([\de.+-]+)(?:deg)?(?:\s+|\s*(,)\s*)([\de.+-]+)%(?:\s+|\s*(,)\s*)([\de.+-]+)%(?:\s*([,\/])\s*([\de.+-]+)(%)?)?\s*\)$/);if(I){let[M,O,k,F,U,$,X,re,ne]=I,ae=[k||" ",U||" ",X].join("");if(ae==="  "||ae==="  /"||ae===",,"||ae===",,,"){let he=[+O,$r(+F,0,100),$r(+$,0,100),re?Vo(+re,ne):1];if(Pi(he))return function([Se,Xe,je,Ve]){function st(vt){let kt=(vt+Se/30)%12,er=Xe*Math.min(je,1-je);return je-er*Math.max(-1,Math.min(kt-3,9-kt,1))}return Se=gn(Se),Xe/=100,je/=100,[st(0),st(8),st(4),Ve]}(he)}}}(l);return p?new vn(...p,!1):void 0}get rgb(){let{r:l,g:p,b:g,a:b}=this,I=b||1/0;return this.overwriteGetter("rgb",[l/I,p/I,g/I,b])}get hcl(){return this.overwriteGetter("hcl",function(l){let[p,g,b,I]=tn(l),M=Math.sqrt(g*g+b*b);return[Math.round(1e4*M)?gn(Math.atan2(b,g)*Zr):NaN,M,p,I]}(this.rgb))}get lab(){return this.overwriteGetter("lab",tn(this.rgb))}overwriteGetter(l,p){return Object.defineProperty(this,l,{value:p}),p}toString(){let[l,p,g,b]=this.rgb;return`rgba(${[l,p,g].map(I=>Math.round(255*I)).join(",")},${b})`}static interpolate(l,p,g,b="rgb"){switch(b){case"rgb":{let[I,M,O,k]=os(l.rgb,p.rgb,g);return new vn(I,M,O,k,!1)}case"hcl":{let[I,M,O,k]=l.hcl,[F,U,$,X]=p.hcl,re,ne;if(isNaN(I)||isNaN(F))isNaN(I)?isNaN(F)?re=NaN:(re=F,O!==1&&O!==0||(ne=U)):(re=I,$!==1&&$!==0||(ne=M));else{let je=F-I;F>I&&je>180?je-=360:F<I&&I-F>180&&(je+=360),re=I+g*je}let[ae,he,Se,Xe]=function([je,Ve,st,vt]){return je=isNaN(je)?0:je*fo,Ur([st,Math.cos(je)*Ve,Math.sin(je)*Ve,vt])}([re,ne!=null?ne:Us(M,U,g),Us(O,$,g),Us(k,X,g)]);return new vn(ae,he,Se,Xe,!1)}case"lab":{let[I,M,O,k]=Ur(os(l.lab,p.lab,g));return new vn(I,M,O,k,!1)}}}}vn.black=new vn(0,0,0,1),vn.white=new vn(1,1,1,1),vn.transparent=new vn(0,0,0,0),vn.red=new vn(1,0,0,1);class is{constructor(l,p,g){this.sensitivity=l?p?"variant":"case":p?"accent":"base",this.locale=g,this.collator=new Intl.Collator(this.locale?this.locale:[],{sensitivity:this.sensitivity,usage:"search"})}compare(l,p){return this.collator.compare(l,p)}resolvedLocale(){return new Intl.Collator(this.locale?this.locale:[]).resolvedOptions().locale}}let Mu=["bottom","center","top"];class Jf{constructor(l,p,g,b,I,M){this.text=l,this.image=p,this.scale=g,this.fontStack=b,this.textColor=I,this.verticalAlign=M}}class _a{constructor(l){this.sections=l}static fromString(l){return new _a([new Jf(l,null,null,null,null,null)])}isEmpty(){return this.sections.length===0||!this.sections.some(l=>l.text.length!==0||l.image&&l.image.name.length!==0)}static factory(l){return l instanceof _a?l:_a.fromString(l)}toString(){return this.sections.length===0?"":this.sections.map(l=>l.text).join("")}}class as{constructor(l){this.values=l.slice()}static parse(l){if(l instanceof as)return l;if(typeof l=="number")return new as([l,l,l,l]);if(Array.isArray(l)&&!(l.length<1||l.length>4)){for(let p of l)if(typeof p!="number")return;switch(l.length){case 1:l=[l[0],l[0],l[0],l[0]];break;case 2:l=[l[0],l[1],l[0],l[1]];break;case 3:l=[l[0],l[1],l[2],l[1]]}return new as(l)}}toString(){return JSON.stringify(this.values)}static interpolate(l,p,g){return new as(os(l.values,p.values,g))}}class Ki{constructor(l){this.values=l.slice()}static parse(l){if(l instanceof Ki)return l;if(typeof l=="number")return new Ki([l]);if(Array.isArray(l)){for(let p of l)if(typeof p!="number")return;return new Ki(l)}}toString(){return JSON.stringify(this.values)}static interpolate(l,p,g){return new Ki(os(l.values,p.values,g))}}class Di{constructor(l){this.values=l.slice()}static parse(l){if(l instanceof Di)return l;if(typeof l=="string"){let g=vn.parse(l);return g?new Di([g]):void 0}if(!Array.isArray(l))return;let p=[];for(let g of l){if(typeof g!="string")return;let b=vn.parse(g);if(!b)return;p.push(b)}return new Di(p)}toString(){return JSON.stringify(this.values)}static interpolate(l,p,g,b="rgb"){let I=[];if(l.values.length!=p.values.length)throw new Error(`colorArray: Arrays have mismatched length (${l.values.length} vs. ${p.values.length}), cannot interpolate.`);for(let M=0;M<l.values.length;M++)I.push(vn.interpolate(l.values[M],p.values[M],g,b));return new Di(I)}}class Fo extends Error{constructor(l){super(l),this.name="RuntimeError"}toJSON(){return this.message}}let ux=new Set(["center","left","right","top","bottom","top-left","top-right","bottom-left","bottom-right"]);class hl{constructor(l){this.values=l.slice()}static parse(l){if(l instanceof hl)return l;if(Array.isArray(l)&&!(l.length<1)&&l.length%2==0){for(let p=0;p<l.length;p+=2){let g=l[p],b=l[p+1];if(typeof g!="string"||!ux.has(g)||!Array.isArray(b)||b.length!==2||typeof b[0]!="number"||typeof b[1]!="number")return}return new hl(l)}}toString(){return JSON.stringify(this.values)}static interpolate(l,p,g){let b=l.values,I=p.values;if(b.length!==I.length)throw new Fo(`Cannot interpolate values of different length. from: ${l.toString()}, to: ${p.toString()}`);let M=[];for(let O=0;O<b.length;O+=2){if(b[O]!==I[O])throw new Fo(`Cannot interpolate values containing mismatched anchors. from[${O}]: ${b[O]}, to[${O}]: ${I[O]}`);M.push(b[O]);let[k,F]=b[O+1],[U,$]=I[O+1];M.push([Us(k,U,g),Us(F,$,g)])}return new hl(M)}}class Bs{constructor(l){this.name=l.name,this.available=l.available}toString(){return this.name}static fromString(l){return l?new Bs({name:l,available:!1}):null}}class Vs{constructor(l,p,g){this.from=l,this.to=p,this.transition=g}static interpolate(l,p,g){return new Vs(l,p,g)}static parse(l){return l instanceof Vs?l:Array.isArray(l)&&l.length===3&&typeof l[0]=="string"&&typeof l[1]=="string"&&typeof l[2]=="number"?new Vs(l[0],l[1],l[2]):typeof l=="object"&&typeof l.from=="string"&&typeof l.to=="string"&&typeof l.transition=="number"?new Vs(l.from,l.to,l.transition):typeof l=="string"?new Vs(l,l,1):void 0}}function xi(f,l,p,g){return typeof f=="number"&&f>=0&&f<=255&&typeof l=="number"&&l>=0&&l<=255&&typeof p=="number"&&p>=0&&p<=255?g===void 0||typeof g=="number"&&g>=0&&g<=1?null:`Invalid rgba value [${[f,l,p,g].join(", ")}]: 'a' must be between 0 and 1.`:`Invalid rgba value [${(typeof g=="number"?[f,l,p,g]:[f,l,p]).join(", ")}]: 'r', 'g', and 'b' must be between 0 and 255.`}function Um(f){if(f===null||typeof f=="string"||typeof f=="boolean"||typeof f=="number"||f instanceof Vs||f instanceof vn||f instanceof is||f instanceof _a||f instanceof as||f instanceof Ki||f instanceof Di||f instanceof hl||f instanceof Bs)return!0;if(Array.isArray(f)){for(let l of f)if(!Um(l))return!1;return!0}if(typeof f=="object"){for(let l in f)if(!Um(f[l]))return!1;return!0}return!1}function Xr(f){if(f===null)return ua;if(typeof f=="string")return Dr;if(typeof f=="boolean")return hr;if(typeof f=="number")return zt;if(f instanceof vn)return yn;if(f instanceof Vs)return _n;if(f instanceof is)return fn;if(f instanceof _a)return bn;if(f instanceof as)return rn;if(f instanceof Ki)return Vr;if(f instanceof Di)return on;if(f instanceof hl)return Mn;if(f instanceof Bs)return Gr;if(Array.isArray(f)){let l=f.length,p;for(let g of f){let b=Xr(g);if(p){if(p===b)continue;p=sr;break}p=b}return Pn(p||sr,l)}return On}function wn(f){let l=typeof f;return f===null?"":l==="string"||l==="number"||l==="boolean"?String(f):f instanceof vn||f instanceof Vs||f instanceof _a||f instanceof as||f instanceof Ki||f instanceof Di||f instanceof hl||f instanceof Bs?f.toString():JSON.stringify(f)}class Qf{constructor(l,p){this.type=l,this.value=p}static parse(l,p){if(l.length!==2)return p.error(`'literal' expression requires exactly one argument, but found ${l.length-1} instead.`);if(!Um(l[1]))return p.error("invalid value");let g=l[1],b=Xr(g),I=p.expectedType;return b.kind!=="array"||b.N!==0||!I||I.kind!=="array"||typeof I.N=="number"&&I.N!==0||(b=I),new Qf(b,g)}evaluate(){return this.value}eachChild(){}outputDefined(){return!0}}let uo={string:Dr,number:zt,boolean:hr,object:On};class Cu{constructor(l,p){this.type=l,this.args=p}static parse(l,p){if(l.length<2)return p.error("Expected at least one argument.");let g,b=1,I=l[0];if(I==="array"){let O,k;if(l.length>2){let F=l[1];if(typeof F!="string"||!(F in uo)||F==="object")return p.error("The item type argument of \"array\" must be one of string, number, boolean",1);O=uo[F],b++}else O=sr;if(l.length>3){if(l[2]!==null&&(typeof l[2]!="number"||l[2]<0||l[2]!==Math.floor(l[2])))return p.error("The length argument to \"array\" must be a positive integer literal",2);k=l[2],b++}g=Pn(O,k)}else{if(!uo[I])throw new Error(`Types doesn't contain name = ${I}`);g=uo[I]}let M=[];for(;b<l.length;b++){let O=p.parse(l[b],b,sr);if(!O)return null;M.push(O)}return new Cu(g,M)}evaluate(l){for(let p=0;p<this.args.length;p++){let g=this.args[p].evaluate(l);if(!ui(this.type,Xr(g)))return g;if(p===this.args.length-1)throw new Fo(`Expected value to be of type ${Et(this.type)}, but found ${Et(Xr(g))} instead.`)}throw new Error}eachChild(l){this.args.forEach(l)}outputDefined(){return this.args.every(l=>l.outputDefined())}}let Rp={"to-boolean":hr,"to-color":yn,"to-number":zt,"to-string":Dr};class jp{constructor(l,p){this.type=l,this.args=p}static parse(l,p){if(l.length<2)return p.error("Expected at least one argument.");let g=l[0];if(!Rp[g])throw new Error(`Can't parse ${g} as it is not part of the known types`);if((g==="to-boolean"||g==="to-string")&&l.length!==2)return p.error("Expected one argument.");let b=Rp[g],I=[];for(let M=1;M<l.length;M++){let O=p.parse(l[M],M,sr);if(!O)return null;I.push(O)}return new jp(b,I)}evaluate(l){switch(this.type.kind){case"boolean":return!!this.args[0].evaluate(l);case"color":{let p,g;for(let b of this.args){if(p=b.evaluate(l),g=null,p instanceof vn)return p;if(typeof p=="string"){let I=l.parseColor(p);if(I)return I}else if(Array.isArray(p)&&(g=p.length<3||p.length>4?`Invalid rgba value ${JSON.stringify(p)}: expected an array containing either three or four numeric values.`:xi(p[0],p[1],p[2],p[3]),!g))return new vn(p[0]/255,p[1]/255,p[2]/255,p[3])}throw new Fo(g||`Could not parse color from value '${typeof p=="string"?p:JSON.stringify(p)}'`)}case"padding":{let p;for(let g of this.args){p=g.evaluate(l);let b=as.parse(p);if(b)return b}throw new Fo(`Could not parse padding from value '${typeof p=="string"?p:JSON.stringify(p)}'`)}case"numberArray":{let p;for(let g of this.args){p=g.evaluate(l);let b=Ki.parse(p);if(b)return b}throw new Fo(`Could not parse numberArray from value '${typeof p=="string"?p:JSON.stringify(p)}'`)}case"colorArray":{let p;for(let g of this.args){p=g.evaluate(l);let b=Di.parse(p);if(b)return b}throw new Fo(`Could not parse colorArray from value '${typeof p=="string"?p:JSON.stringify(p)}'`)}case"variableAnchorOffsetCollection":{let p;for(let g of this.args){p=g.evaluate(l);let b=hl.parse(p);if(b)return b}throw new Fo(`Could not parse variableAnchorOffsetCollection from value '${typeof p=="string"?p:JSON.stringify(p)}'`)}case"number":{let p=null;for(let g of this.args){if(p=g.evaluate(l),p===null)return 0;let b=Number(p);if(!isNaN(b))return b}throw new Fo(`Could not convert ${JSON.stringify(p)} to number.`)}case"formatted":return _a.fromString(wn(this.args[0].evaluate(l)));case"resolvedImage":return Bs.fromString(wn(this.args[0].evaluate(l)));case"projectionDefinition":return this.args[0].evaluate(l);default:return wn(this.args[0].evaluate(l))}}eachChild(l){this.args.forEach(l)}outputDefined(){return this.args.every(l=>l.outputDefined())}}let cx=["Unknown","Point","LineString","Polygon"];class R2{constructor(){this.globals=null,this.feature=null,this.featureState=null,this.formattedSection=null,this._parseColorCache=new Map,this.availableImages=null,this.canonical=null}id(){return this.feature&&"id"in this.feature?this.feature.id:null}geometryType(){return this.feature?typeof this.feature.type=="number"?cx[this.feature.type]:this.feature.type:null}geometry(){return this.feature&&"geometry"in this.feature?this.feature.geometry:null}canonicalID(){return this.canonical}properties(){return this.feature&&this.feature.properties||{}}parseColor(l){let p=this._parseColorCache.get(l);return p||(p=vn.parse(l),this._parseColorCache.set(l,p)),p}}class Ev{constructor(l,p,g=[],b,I=new Un,M=[]){this.registry=l,this.path=g,this.key=g.map(O=>`[${O}]`).join(""),this.scope=I,this.errors=M,this.expectedType=b,this._isConstant=p}parse(l,p,g,b,I={}){return p?this.concat(p,g,b)._parse(l,I):this._parse(l,I)}_parse(l,p){function g(b,I,M){return M==="assert"?new Cu(I,[b]):M==="coerce"?new jp(I,[b]):b}if(l!==null&&typeof l!="string"&&typeof l!="boolean"&&typeof l!="number"||(l=["literal",l]),Array.isArray(l)){if(l.length===0)return this.error("Expected an array with at least one element. If you wanted a literal array, use [\"literal\", []].");let b=l[0];if(typeof b!="string")return this.error(`Expression name must be a string, but found ${typeof b} instead. If you wanted a literal array, use ["literal", [...]].`,0),null;let I=this.registry[b];if(I){let M=I.parse(l,this);if(!M)return null;if(this.expectedType){let O=this.expectedType,k=M.type;if(O.kind!=="string"&&O.kind!=="number"&&O.kind!=="boolean"&&O.kind!=="object"&&O.kind!=="array"||k.kind!=="value"){if(O.kind==="projectionDefinition"&&["string","array"].includes(k.kind)||["color","formatted","resolvedImage"].includes(O.kind)&&["value","string"].includes(k.kind)||["padding","numberArray"].includes(O.kind)&&["value","number","array"].includes(k.kind)||O.kind==="colorArray"&&["value","string","array"].includes(k.kind)||O.kind==="variableAnchorOffsetCollection"&&["value","array"].includes(k.kind))M=g(M,O,p.typeAnnotation||"coerce");else if(this.checkSubtype(O,k))return null}else M=g(M,O,p.typeAnnotation||"assert")}if(!(M instanceof Qf)&&M.type.kind!=="resolvedImage"&&this._isConstant(M)){let O=new R2;try{M=new Qf(M.type,M.evaluate(O))}catch(k){return this.error(k.message),null}}return M}return this.error(`Unknown expression "${b}". If you wanted a literal array, use ["literal", [...]].`,0)}return this.error(l===void 0?"'undefined' value invalid. Use null instead.":typeof l=="object"?"Bare objects invalid. Use [\"literal\", {...}] instead.":`Expected an array, but found ${typeof l} instead.`)}concat(l,p,g){let b=typeof l=="number"?this.path.concat(l):this.path,I=g?this.scope.concat(g):this.scope;return new Ev(this.registry,this._isConstant,b,p||null,I,this.errors)}error(l,...p){let g=`${this.key}${p.map(b=>`[${b}]`).join("")}`;this.errors.push(new Xo(g,l))}checkSubtype(l,p){let g=ui(l,p);return g&&this.error(g),g}}class h1{constructor(l,p){this.type=p.type,this.bindings=[].concat(l),this.result=p}evaluate(l){return this.result.evaluate(l)}eachChild(l){for(let p of this.bindings)l(p[1]);l(this.result)}static parse(l,p){if(l.length<4)return p.error(`Expected at least 3 arguments, but found ${l.length-1} instead.`);let g=[];for(let I=1;I<l.length-1;I+=2){let M=l[I];if(typeof M!="string")return p.error(`Expected string, but found ${typeof M} instead.`,I);if(/[^a-zA-Z0-9_]/.test(M))return p.error("Variable names must contain only alphanumeric characters or '_'.",I);let O=p.parse(l[I+1],I+1);if(!O)return null;g.push([M,O])}let b=p.parse(l[l.length-1],l.length-1,p.expectedType,g);return b?new h1(g,b):null}outputDefined(){return this.result.outputDefined()}}class px{constructor(l,p){this.type=p.type,this.name=l,this.boundExpression=p}static parse(l,p){if(l.length!==2||typeof l[1]!="string")return p.error("'var' expression requires exactly one string literal argument.");let g=l[1];return p.scope.has(g)?new px(g,p.scope.get(g)):p.error(`Unknown variable "${g}". Make sure "${g}" has been bound in an enclosing "let" expression before using it.`,1)}evaluate(l){return this.boundExpression.evaluate(l)}eachChild(){}outputDefined(){return!1}}class fx{constructor(l,p,g){this.type=l,this.index=p,this.input=g}static parse(l,p){if(l.length!==3)return p.error(`Expected 2 arguments, but found ${l.length-1} instead.`);let g=p.parse(l[1],1,zt),b=p.parse(l[2],2,Pn(p.expectedType||sr));return g&&b?new fx(b.type.itemType,g,b):null}evaluate(l){let p=this.index.evaluate(l),g=this.input.evaluate(l);if(p<0)throw new Fo(`Array index out of bounds: ${p} < 0.`);if(p>=g.length)throw new Fo(`Array index out of bounds: ${p} > ${g.length-1}.`);if(p!==Math.floor(p))throw new Fo(`Array index must be an integer, but found ${p} instead.`);return g[p]}eachChild(l){l(this.index),l(this.input)}outputDefined(){return!1}}class dx{constructor(l,p){this.type=hr,this.needle=l,this.haystack=p}static parse(l,p){if(l.length!==3)return p.error(`Expected 2 arguments, but found ${l.length-1} instead.`);let g=p.parse(l[1],1,sr),b=p.parse(l[2],2,sr);return g&&b?Oi(g.type,[hr,Dr,zt,ua,sr])?new dx(g,b):p.error(`Expected first argument to be of type boolean, string, number or null, but found ${Et(g.type)} instead`):null}evaluate(l){let p=this.needle.evaluate(l),g=this.haystack.evaluate(l);if(!g)return!1;if(!po(p,["boolean","string","number","null"]))throw new Fo(`Expected first argument to be of type boolean, string, number or null, but found ${Et(Xr(p))} instead.`);if(!po(g,["string","array"]))throw new Fo(`Expected second argument to be of type array or string, but found ${Et(Xr(g))} instead.`);return g.indexOf(p)>=0}eachChild(l){l(this.needle),l(this.haystack)}outputDefined(){return!0}}class Xc{constructor(l,p,g){this.type=zt,this.needle=l,this.haystack=p,this.fromIndex=g}static parse(l,p){if(l.length<=2||l.length>=5)return p.error(`Expected 3 or 4 arguments, but found ${l.length-1} instead.`);let g=p.parse(l[1],1,sr),b=p.parse(l[2],2,sr);if(!g||!b)return null;if(!Oi(g.type,[hr,Dr,zt,ua,sr]))return p.error(`Expected first argument to be of type boolean, string, number or null, but found ${Et(g.type)} instead`);if(l.length===4){let I=p.parse(l[3],3,zt);return I?new Xc(g,b,I):null}return new Xc(g,b)}evaluate(l){let p=this.needle.evaluate(l),g=this.haystack.evaluate(l);if(!po(p,["boolean","string","number","null"]))throw new Fo(`Expected first argument to be of type boolean, string, number or null, but found ${Et(Xr(p))} instead.`);let b;if(this.fromIndex&&(b=this.fromIndex.evaluate(l)),po(g,["string"])){let I=g.indexOf(p,b);return I===-1?-1:[...g.slice(0,I)].length}if(po(g,["array"]))return g.indexOf(p,b);throw new Fo(`Expected second argument to be of type array or string, but found ${Et(Xr(g))} instead.`)}eachChild(l){l(this.needle),l(this.haystack),this.fromIndex&&l(this.fromIndex)}outputDefined(){return!1}}class ss{constructor(l,p,g,b,I,M){this.inputType=l,this.type=p,this.input=g,this.cases=b,this.outputs=I,this.otherwise=M}static parse(l,p){if(l.length<5)return p.error(`Expected at least 4 arguments, but found only ${l.length-1}.`);if(l.length%2!=1)return p.error("Expected an even number of arguments.");let g,b;p.expectedType&&p.expectedType.kind!=="value"&&(b=p.expectedType);let I={},M=[];for(let F=2;F<l.length-1;F+=2){let U=l[F],$=l[F+1];Array.isArray(U)||(U=[U]);let X=p.concat(F);if(U.length===0)return X.error("Expected at least one branch label.");for(let ne of U){if(typeof ne!="number"&&typeof ne!="string")return X.error("Branch labels must be numbers or strings.");if(typeof ne=="number"&&Math.abs(ne)>Number.MAX_SAFE_INTEGER)return X.error(`Branch labels must be integers no larger than ${Number.MAX_SAFE_INTEGER}.`);if(typeof ne=="number"&&Math.floor(ne)!==ne)return X.error("Numeric branch labels must be integer values.");if(g){if(X.checkSubtype(g,Xr(ne)))return null}else g=Xr(ne);if(I[String(ne)]!==void 0)return X.error("Branch labels must be unique.");I[String(ne)]=M.length}let re=p.parse($,F,b);if(!re)return null;b=b||re.type,M.push(re)}let O=p.parse(l[1],1,sr);if(!O)return null;let k=p.parse(l[l.length-1],l.length-1,b);return k?O.type.kind!=="value"&&p.concat(1).checkSubtype(g,O.type)?null:new ss(g,b,O,I,M,k):null}evaluate(l){let p=this.input.evaluate(l);return(Xr(p)===this.inputType&&this.outputs[this.cases[p]]||this.otherwise).evaluate(l)}eachChild(l){l(this.input),this.outputs.forEach(l),l(this.otherwise)}outputDefined(){return this.outputs.every(l=>l.outputDefined())&&this.otherwise.outputDefined()}}class Sv{constructor(l,p,g){this.type=l,this.branches=p,this.otherwise=g}static parse(l,p){if(l.length<4)return p.error(`Expected at least 3 arguments, but found only ${l.length-1}.`);if(l.length%2!=0)return p.error("Expected an odd number of arguments.");let g;p.expectedType&&p.expectedType.kind!=="value"&&(g=p.expectedType);let b=[];for(let M=1;M<l.length-1;M+=2){let O=p.parse(l[M],M,hr);if(!O)return null;let k=p.parse(l[M+1],M+1,g);if(!k)return null;b.push([O,k]),g=g||k.type}let I=p.parse(l[l.length-1],l.length-1,g);if(!I)return null;if(!g)throw new Error("Can't infer output type");return new Sv(g,b,I)}evaluate(l){for(let[p,g]of this.branches)if(p.evaluate(l))return g.evaluate(l);return this.otherwise.evaluate(l)}eachChild(l){for(let[p,g]of this.branches)l(p),l(g);l(this.otherwise)}outputDefined(){return this.branches.every(([l,p])=>p.outputDefined())&&this.otherwise.outputDefined()}}class m1{constructor(l,p,g,b){this.type=l,this.input=p,this.beginIndex=g,this.endIndex=b}static parse(l,p){if(l.length<=2||l.length>=5)return p.error(`Expected 3 or 4 arguments, but found ${l.length-1} instead.`);let g=p.parse(l[1],1,sr),b=p.parse(l[2],2,zt);if(!g||!b)return null;if(!Oi(g.type,[Pn(sr),Dr,sr]))return p.error(`Expected first argument to be of type array or string, but found ${Et(g.type)} instead`);if(l.length===4){let I=p.parse(l[3],3,zt);return I?new m1(g.type,g,b,I):null}return new m1(g.type,g,b)}evaluate(l){let p=this.input.evaluate(l),g=this.beginIndex.evaluate(l),b;if(this.endIndex&&(b=this.endIndex.evaluate(l)),po(p,["string"]))return[...p].slice(g,b).join("");if(po(p,["array"]))return p.slice(g,b);throw new Fo(`Expected first argument to be of type array or string, but found ${Et(Xr(p))} instead.`)}eachChild(l){l(this.input),l(this.beginIndex),this.endIndex&&l(this.endIndex)}outputDefined(){return!1}}function Bm(f,l){let p=f.length-1,g,b,I=0,M=p,O=0;for(;I<=M;)if(O=Math.floor((I+M)/2),g=f[O],b=f[O+1],g<=l){if(O===p||l<b)return O;I=O+1}else{if(!(g>l))throw new Fo("Input is not a number.");M=O-1}return 0}class ca{constructor(l,p,g){this.type=l,this.input=p,this.labels=[],this.outputs=[];for(let[b,I]of g)this.labels.push(b),this.outputs.push(I)}static parse(l,p){if(l.length-1<4)return p.error(`Expected at least 4 arguments, but found only ${l.length-1}.`);if((l.length-1)%2!=0)return p.error("Expected an even number of arguments.");let g=p.parse(l[1],1,zt);if(!g)return null;let b=[],I=null;p.expectedType&&p.expectedType.kind!=="value"&&(I=p.expectedType);for(let M=1;M<l.length;M+=2){let O=M===1?-1/0:l[M],k=l[M+1],F=M,U=M+1;if(typeof O!="number")return p.error("Input/output pairs for \"step\" expressions must be defined using literal numeric values (not computed expressions) for the input values.",F);if(b.length&&b[b.length-1][0]>=O)return p.error("Input/output pairs for \"step\" expressions must be arranged with input values in strictly ascending order.",F);let $=p.parse(k,U,I);if(!$)return null;I=I||$.type,b.push([O,$])}return new ca(I,g,b)}evaluate(l){let p=this.labels,g=this.outputs;if(p.length===1)return g[0].evaluate(l);let b=this.input.evaluate(l);if(b<=p[0])return g[0].evaluate(l);let I=p.length;return b>=p[I-1]?g[I-1].evaluate(l):g[Bm(p,b)].evaluate(l)}eachChild(l){l(this.input);for(let p of this.outputs)l(p)}outputDefined(){return this.outputs.every(l=>l.outputDefined())}}function zN(f){return f&&f.__esModule&&Object.prototype.hasOwnProperty.call(f,"default")?f.default:f}var g1,j2,cB=function(){if(j2)return g1;function f(l,p,g,b){this.cx=3*l,this.bx=3*(g-l)-this.cx,this.ax=1-this.cx-this.bx,this.cy=3*p,this.by=3*(b-p)-this.cy,this.ay=1-this.cy-this.by,this.p1x=l,this.p1y=p,this.p2x=g,this.p2y=b}return j2=1,g1=f,f.prototype={sampleCurveX:function(l){return((this.ax*l+this.bx)*l+this.cx)*l},sampleCurveY:function(l){return((this.ay*l+this.by)*l+this.cy)*l},sampleCurveDerivativeX:function(l){return(3*this.ax*l+2*this.bx)*l+this.cx},solveCurveX:function(l,p){if(p===void 0&&(p=1e-6),l<0)return 0;if(l>1)return 1;for(var g=l,b=0;b<8;b++){var I=this.sampleCurveX(g)-l;if(Math.abs(I)<p)return g;var M=this.sampleCurveDerivativeX(g);if(Math.abs(M)<1e-6)break;g-=I/M}var O=0,k=1;for(g=l,b=0;b<20&&(I=this.sampleCurveX(g),!(Math.abs(I-l)<p));b++)l>I?O=g:k=g,g=.5*(k-O)+O;return g},solve:function(l,p){return this.sampleCurveY(this.solveCurveX(l,p))}},g1}(),Tv=zN(cB);class Ms{constructor(l,p,g,b,I){this.type=l,this.operator=p,this.interpolation=g,this.input=b,this.labels=[],this.outputs=[];for(let[M,O]of I)this.labels.push(M),this.outputs.push(O)}static interpolationFactor(l,p,g,b){let I=0;if(l.name==="exponential")I=v1(p,l.base,g,b);else if(l.name==="linear")I=v1(p,1,g,b);else if(l.name==="cubic-bezier"){let M=l.controlPoints;I=new Tv(M[0],M[1],M[2],M[3]).solve(v1(p,1,g,b))}return I}static parse(l,p){let[g,b,I,...M]=l;if(!Array.isArray(b)||b.length===0)return p.error("Expected an interpolation type expression.",1);if(b[0]==="linear")b={name:"linear"};else if(b[0]==="exponential"){let F=b[1];if(typeof F!="number")return p.error("Exponential interpolation requires a numeric base.",1,1);b={name:"exponential",base:F}}else{if(b[0]!=="cubic-bezier")return p.error(`Unknown interpolation type ${String(b[0])}`,1,0);{let F=b.slice(1);if(F.length!==4||F.some(U=>typeof U!="number"||U<0||U>1))return p.error("Cubic bezier interpolation requires four numeric arguments with values between 0 and 1.",1);b={name:"cubic-bezier",controlPoints:F}}}if(l.length-1<4)return p.error(`Expected at least 4 arguments, but found only ${l.length-1}.`);if((l.length-1)%2!=0)return p.error("Expected an even number of arguments.");if(I=p.parse(I,2,zt),!I)return null;let O=[],k=null;g!=="interpolate-hcl"&&g!=="interpolate-lab"||p.expectedType==on?p.expectedType&&p.expectedType.kind!=="value"&&(k=p.expectedType):k=yn;for(let F=0;F<M.length;F+=2){let U=M[F],$=M[F+1],X=F+3,re=F+4;if(typeof U!="number")return p.error("Input/output pairs for \"interpolate\" expressions must be defined using literal numeric values (not computed expressions) for the input values.",X);if(O.length&&O[O.length-1][0]>=U)return p.error("Input/output pairs for \"interpolate\" expressions must be arranged with input values in strictly ascending order.",X);let ne=p.parse($,re,k);if(!ne)return null;k=k||ne.type,O.push([U,ne])}return so(k,zt)||so(k,_n)||so(k,yn)||so(k,rn)||so(k,Vr)||so(k,on)||so(k,Mn)||so(k,Pn(zt))?new Ms(k,g,b,I,O):p.error(`Type ${Et(k)} is not interpolatable.`)}evaluate(l){let p=this.labels,g=this.outputs;if(p.length===1)return g[0].evaluate(l);let b=this.input.evaluate(l);if(b<=p[0])return g[0].evaluate(l);let I=p.length;if(b>=p[I-1])return g[I-1].evaluate(l);let M=Bm(p,b),O=Ms.interpolationFactor(this.interpolation,b,p[M],p[M+1]),k=g[M].evaluate(l),F=g[M+1].evaluate(l);switch(this.operator){case"interpolate":switch(this.type.kind){case"number":return Us(k,F,O);case"color":return vn.interpolate(k,F,O);case"padding":return as.interpolate(k,F,O);case"colorArray":return Di.interpolate(k,F,O);case"numberArray":return Ki.interpolate(k,F,O);case"variableAnchorOffsetCollection":return hl.interpolate(k,F,O);case"array":return os(k,F,O);case"projectionDefinition":return Vs.interpolate(k,F,O)}case"interpolate-hcl":switch(this.type.kind){case"color":return vn.interpolate(k,F,O,"hcl");case"colorArray":return Di.interpolate(k,F,O,"hcl")}case"interpolate-lab":switch(this.type.kind){case"color":return vn.interpolate(k,F,O,"lab");case"colorArray":return Di.interpolate(k,F,O,"lab")}}}eachChild(l){l(this.input);for(let p of this.outputs)l(p)}outputDefined(){return this.outputs.every(l=>l.outputDefined())}}function v1(f,l,p,g){let b=g-p,I=f-p;return b===0?0:l===1?I/b:(Math.pow(l,I)-1)/(Math.pow(l,b)-1)}let qp={color:vn.interpolate,number:Us,padding:as.interpolate,numberArray:Ki.interpolate,colorArray:Di.interpolate,variableAnchorOffsetCollection:hl.interpolate,array:os};class y1{constructor(l,p){this.type=l,this.args=p}static parse(l,p){if(l.length<2)return p.error("Expected at least one argument.");let g=null,b=p.expectedType;b&&b.kind!=="value"&&(g=b);let I=[];for(let O of l.slice(1)){let k=p.parse(O,1+I.length,g,void 0,{typeAnnotation:"omit"});if(!k)return null;g=g||k.type,I.push(k)}if(!g)throw new Error("No output type");let M=b&&I.some(O=>ui(b,O.type));return new y1(M?sr:g,I)}evaluate(l){let p,g=null,b=0;for(let I of this.args)if(b++,g=I.evaluate(l),g&&g instanceof Bs&&!g.available&&(p||(p=g.name),g=null,b===this.args.length&&(g=p)),g!==null)break;return g}eachChild(l){this.args.forEach(l)}outputDefined(){return this.args.every(l=>l.outputDefined())}}function _1(f,l){return f==="=="||f==="!="?l.kind==="boolean"||l.kind==="string"||l.kind==="number"||l.kind==="null"||l.kind==="value":l.kind==="string"||l.kind==="number"||l.kind==="value"}function b1(f,l,p,g){return g.compare(l,p)===0}function Gs(f,l,p){let g=f!=="=="&&f!=="!=";return class iGe{constructor(I,M,O){this.type=hr,this.lhs=I,this.rhs=M,this.collator=O,this.hasUntypedArgument=I.type.kind==="value"||M.type.kind==="value"}static parse(I,M){if(I.length!==3&&I.length!==4)return M.error("Expected two or three arguments.");let O=I[0],k=M.parse(I[1],1,sr);if(!k)return null;if(!_1(O,k.type))return M.concat(1).error(`"${O}" comparisons are not supported for type '${Et(k.type)}'.`);let F=M.parse(I[2],2,sr);if(!F)return null;if(!_1(O,F.type))return M.concat(2).error(`"${O}" comparisons are not supported for type '${Et(F.type)}'.`);if(k.type.kind!==F.type.kind&&k.type.kind!=="value"&&F.type.kind!=="value")return M.error(`Cannot compare types '${Et(k.type)}' and '${Et(F.type)}'.`);g&&(k.type.kind==="value"&&F.type.kind!=="value"?k=new Cu(F.type,[k]):k.type.kind!=="value"&&F.type.kind==="value"&&(F=new Cu(k.type,[F])));let U=null;if(I.length===4){if(k.type.kind!=="string"&&F.type.kind!=="string"&&k.type.kind!=="value"&&F.type.kind!=="value")return M.error("Cannot use collator to compare non-string types.");if(U=M.parse(I[3],3,fn),!U)return null}return new iGe(k,F,U)}evaluate(I){let M=this.lhs.evaluate(I),O=this.rhs.evaluate(I);if(g&&this.hasUntypedArgument){let k=Xr(M),F=Xr(O);if(k.kind!==F.kind||k.kind!=="string"&&k.kind!=="number")throw new Fo(`Expected arguments for "${f}" to be (string, string) or (number, number), but found (${k.kind}, ${F.kind}) instead.`)}if(this.collator&&!g&&this.hasUntypedArgument){let k=Xr(M),F=Xr(O);if(k.kind!=="string"||F.kind!=="string")return l(I,M,O)}return this.collator?p(I,M,O,this.collator.evaluate(I)):l(I,M,O)}eachChild(I){I(this.lhs),I(this.rhs),this.collator&&I(this.collator)}outputDefined(){return!0}}}let FN=Gs("==",function(f,l,p){return l===p},b1),hx=Gs("!=",function(f,l,p){return l!==p},function(f,l,p,g){return!b1(0,l,p,g)}),pB=Gs("<",function(f,l,p){return l<p},function(f,l,p,g){return g.compare(l,p)<0}),q2=Gs(">",function(f,l,p){return l>p},function(f,l,p,g){return g.compare(l,p)>0}),fB=Gs("<=",function(f,l,p){return l<=p},function(f,l,p,g){return g.compare(l,p)<=0}),dB=Gs(">=",function(f,l,p){return l>=p},function(f,l,p,g){return g.compare(l,p)>=0});class mx{constructor(l,p,g){this.type=fn,this.locale=g,this.caseSensitive=l,this.diacriticSensitive=p}static parse(l,p){if(l.length!==2)return p.error("Expected one argument.");let g=l[1];if(typeof g!="object"||Array.isArray(g))return p.error("Collator options argument must be an object.");let b=p.parse(g["case-sensitive"]!==void 0&&g["case-sensitive"],1,hr);if(!b)return null;let I=p.parse(g["diacritic-sensitive"]!==void 0&&g["diacritic-sensitive"],1,hr);if(!I)return null;let M=null;return g.locale&&(M=p.parse(g.locale,1,Dr),!M)?null:new mx(b,I,M)}evaluate(l){return new is(this.caseSensitive.evaluate(l),this.diacriticSensitive.evaluate(l),this.locale?this.locale.evaluate(l):null)}eachChild(l){l(this.caseSensitive),l(this.diacriticSensitive),this.locale&&l(this.locale)}outputDefined(){return!1}}class z2{constructor(l,p,g,b,I){this.type=Dr,this.number=l,this.locale=p,this.currency=g,this.minFractionDigits=b,this.maxFractionDigits=I}static parse(l,p){if(l.length!==3)return p.error("Expected two arguments.");let g=p.parse(l[1],1,zt);if(!g)return null;let b=l[2];if(typeof b!="object"||Array.isArray(b))return p.error("NumberFormat options argument must be an object.");let I=null;if(b.locale&&(I=p.parse(b.locale,1,Dr),!I))return null;let M=null;if(b.currency&&(M=p.parse(b.currency,1,Dr),!M))return null;let O=null;if(b["min-fraction-digits"]&&(O=p.parse(b["min-fraction-digits"],1,zt),!O))return null;let k=null;return b["max-fraction-digits"]&&(k=p.parse(b["max-fraction-digits"],1,zt),!k)?null:new z2(g,I,M,O,k)}evaluate(l){return new Intl.NumberFormat(this.locale?this.locale.evaluate(l):[],{style:this.currency?"currency":"decimal",currency:this.currency?this.currency.evaluate(l):void 0,minimumFractionDigits:this.minFractionDigits?this.minFractionDigits.evaluate(l):void 0,maximumFractionDigits:this.maxFractionDigits?this.maxFractionDigits.evaluate(l):void 0}).format(this.number.evaluate(l))}eachChild(l){l(this.number),this.locale&&l(this.locale),this.currency&&l(this.currency),this.minFractionDigits&&l(this.minFractionDigits),this.maxFractionDigits&&l(this.maxFractionDigits)}outputDefined(){return!1}}class Vm{constructor(l){this.type=bn,this.sections=l}static parse(l,p){if(l.length<2)return p.error("Expected at least one argument.");let g=l[1];if(!Array.isArray(g)&&typeof g=="object")return p.error("First argument must be an image or text section.");let b=[],I=!1;for(let M=1;M<=l.length-1;++M){let O=l[M];if(I&&typeof O=="object"&&!Array.isArray(O)){I=!1;let k=null;if(O["font-scale"]&&(k=p.parse(O["font-scale"],1,zt),!k))return null;let F=null;if(O["text-font"]&&(F=p.parse(O["text-font"],1,Pn(Dr)),!F))return null;let U=null;if(O["text-color"]&&(U=p.parse(O["text-color"],1,yn),!U))return null;let $=null;if(O["vertical-align"]){if(typeof O["vertical-align"]=="string"&&!Mu.includes(O["vertical-align"]))return p.error(`'vertical-align' must be one of: 'bottom', 'center', 'top' but found '${O["vertical-align"]}' instead.`);if($=p.parse(O["vertical-align"],1,Dr),!$)return null}let X=b[b.length-1];X.scale=k,X.font=F,X.textColor=U,X.verticalAlign=$}else{let k=p.parse(l[M],1,sr);if(!k)return null;let F=k.type.kind;if(F!=="string"&&F!=="value"&&F!=="null"&&F!=="resolvedImage")return p.error("Formatted text type must be 'string', 'value', 'image' or 'null'.");I=!0,b.push({content:k,scale:null,font:null,textColor:null,verticalAlign:null})}}return new Vm(b)}evaluate(l){return new _a(this.sections.map(p=>{let g=p.content.evaluate(l);return Xr(g)===Gr?new Jf("",g,null,null,null,p.verticalAlign?p.verticalAlign.evaluate(l):null):new Jf(wn(g),null,p.scale?p.scale.evaluate(l):null,p.font?p.font.evaluate(l).join(","):null,p.textColor?p.textColor.evaluate(l):null,p.verticalAlign?p.verticalAlign.evaluate(l):null)}))}eachChild(l){for(let p of this.sections)l(p.content),p.scale&&l(p.scale),p.font&&l(p.font),p.textColor&&l(p.textColor),p.verticalAlign&&l(p.verticalAlign)}outputDefined(){return!1}}class F2{constructor(l){this.type=Gr,this.input=l}static parse(l,p){if(l.length!==2)return p.error("Expected two arguments.");let g=p.parse(l[1],1,Dr);return g?new F2(g):p.error("No image name provided.")}evaluate(l){let p=this.input.evaluate(l),g=Bs.fromString(p);return g&&l.availableImages&&(g.available=l.availableImages.indexOf(p)>-1),g}eachChild(l){l(this.input)}outputDefined(){return!1}}class gx{constructor(l){this.type=zt,this.input=l}static parse(l,p){if(l.length!==2)return p.error(`Expected 1 argument, but found ${l.length-1} instead.`);let g=p.parse(l[1],1);return g?g.type.kind!=="array"&&g.type.kind!=="string"&&g.type.kind!=="value"?p.error(`Expected argument of type string or array, but found ${Et(g.type)} instead.`):new gx(g):null}evaluate(l){let p=this.input.evaluate(l);if(typeof p=="string")return[...p].length;if(Array.isArray(p))return p.length;throw new Fo(`Expected value to be of type string or array, but found ${Et(Xr(p))} instead.`)}eachChild(l){l(this.input)}outputDefined(){return!1}}let Jc=8192;function hB(f,l){let p=(180+f[0])/360,g=(180-180/Math.PI*Math.log(Math.tan(Math.PI/4+f[1]*Math.PI/360)))/360,b=Math.pow(2,l.z);return[Math.round(p*b*Jc),Math.round(g*b*Jc)]}function vx(f,l){let p=Math.pow(2,l.z);return[(b=(f[0]/Jc+l.x)/p,360*b-180),(g=(f[1]/Jc+l.y)/p,360/Math.PI*Math.atan(Math.exp((180-360*g)*Math.PI/180))-90)];var g,b}function x1(f,l){f[0]=Math.min(f[0],l[0]),f[1]=Math.min(f[1],l[1]),f[2]=Math.max(f[2],l[0]),f[3]=Math.max(f[3],l[1])}function w1(f,l){return!(f[0]<=l[0]||f[2]>=l[2]||f[1]<=l[1]||f[3]>=l[3])}function mB(f,l,p){let g=f[0]-l[0],b=f[1]-l[1],I=f[0]-p[0],M=f[1]-p[1];return g*M-I*b==0&&g*I<=0&&b*M<=0}function yx(f,l,p,g){return(b=[g[0]-p[0],g[1]-p[1]])[0]*(I=[l[0]-f[0],l[1]-f[1]])[1]-b[1]*I[0]!=0&&!(!BN(f,l,p,g)||!BN(p,g,f,l));var b,I}function gB(f,l,p){for(let g of p)for(let b=0;b<g.length-1;++b)if(yx(f,l,g[b],g[b+1]))return!0;return!1}function Gm(f,l,p=!1){let g=!1;for(let O of l)for(let k=0;k<O.length-1;k++){if(mB(f,O[k],O[k+1]))return p;(I=O[k])[1]>(b=f)[1]!=(M=O[k+1])[1]>b[1]&&b[0]<(M[0]-I[0])*(b[1]-I[1])/(M[1]-I[1])+I[0]&&(g=!g)}var b,I,M;return g}function UN(f,l){for(let p of l)if(Gm(f,p))return!0;return!1}function U2(f,l){for(let p of f)if(!Gm(p,l))return!1;for(let p=0;p<f.length-1;++p)if(gB(f[p],f[p+1],l))return!1;return!0}function vB(f,l){for(let p of l)if(U2(f,p))return!0;return!1}function BN(f,l,p,g){let b=g[0]-p[0],I=g[1]-p[1],M=(f[0]-p[0])*I-b*(f[1]-p[1]),O=(l[0]-p[0])*I-b*(l[1]-p[1]);return M>0&&O<0||M<0&&O>0}function B2(f,l,p){let g=[];for(let b=0;b<f.length;b++){let I=[];for(let M=0;M<f[b].length;M++){let O=hB(f[b][M],p);x1(l,O),I.push(O)}g.push(I)}return g}function VN(f,l,p){let g=[];for(let b=0;b<f.length;b++){let I=B2(f[b],l,p);g.push(I)}return g}function _x(f,l,p,g){if(f[0]<p[0]||f[0]>p[2]){let b=.5*g,I=f[0]-p[0]>b?-g:p[0]-f[0]>b?g:0;I===0&&(I=f[0]-p[2]>b?-g:p[2]-f[0]>b?g:0),f[0]+=I}x1(l,f)}function GN(f,l,p,g){let b=Math.pow(2,g.z)*Jc,I=[g.x*Jc,g.y*Jc],M=[];for(let O of f)for(let k of O){let F=[k.x+I[0],k.y+I[1]];_x(F,l,p,b),M.push(F)}return M}function HN(f,l,p,g){let b=Math.pow(2,g.z)*Jc,I=[g.x*Jc,g.y*Jc],M=[];for(let k of f){let F=[];for(let U of k){let $=[U.x+I[0],U.y+I[1]];x1(l,$),F.push($)}M.push(F)}if(l[2]-l[0]<=b/2){(O=l)[0]=O[1]=1/0,O[2]=O[3]=-1/0;for(let k of M)for(let F of k)_x(F,l,p,b)}var O;return M}class Hm{constructor(l,p){this.type=hr,this.geojson=l,this.geometries=p}static parse(l,p){if(l.length!==2)return p.error(`'within' expression requires exactly one argument, but found ${l.length-1} instead.`);if(Um(l[1])){let g=l[1];if(g.type==="FeatureCollection"){let b=[];for(let I of g.features){let{type:M,coordinates:O}=I.geometry;M==="Polygon"&&b.push(O),M==="MultiPolygon"&&b.push(...O)}if(b.length)return new Hm(g,{type:"MultiPolygon",coordinates:b})}else if(g.type==="Feature"){let b=g.geometry.type;if(b==="Polygon"||b==="MultiPolygon")return new Hm(g,g.geometry)}else if(g.type==="Polygon"||g.type==="MultiPolygon")return new Hm(g,g)}return p.error("'within' expression requires valid geojson object that contains polygon geometry type.")}evaluate(l){if(l.geometry()!=null&&l.canonicalID()!=null){if(l.geometryType()==="Point")return function(p,g){let b=[1/0,1/0,-1/0,-1/0],I=[1/0,1/0,-1/0,-1/0],M=p.canonicalID();if(g.type==="Polygon"){let O=B2(g.coordinates,I,M),k=GN(p.geometry(),b,I,M);if(!w1(b,I))return!1;for(let F of k)if(!Gm(F,O))return!1}if(g.type==="MultiPolygon"){let O=VN(g.coordinates,I,M),k=GN(p.geometry(),b,I,M);if(!w1(b,I))return!1;for(let F of k)if(!UN(F,O))return!1}return!0}(l,this.geometries);if(l.geometryType()==="LineString")return function(p,g){let b=[1/0,1/0,-1/0,-1/0],I=[1/0,1/0,-1/0,-1/0],M=p.canonicalID();if(g.type==="Polygon"){let O=B2(g.coordinates,I,M),k=HN(p.geometry(),b,I,M);if(!w1(b,I))return!1;for(let F of k)if(!U2(F,O))return!1}if(g.type==="MultiPolygon"){let O=VN(g.coordinates,I,M),k=HN(p.geometry(),b,I,M);if(!w1(b,I))return!1;for(let F of k)if(!vB(F,O))return!1}return!0}(l,this.geometries)}return!1}eachChild(){}outputDefined(){return!0}}let V2=class{constructor(f=[],l=(p,g)=>p<g?-1:p>g?1:0){if(this.data=f,this.length=this.data.length,this.compare=l,this.length>0)for(let p=(this.length>>1)-1;p>=0;p--)this._down(p)}push(f){this.data.push(f),this._up(this.length++)}pop(){if(this.length===0)return;let f=this.data[0],l=this.data.pop();return--this.length>0&&(this.data[0]=l,this._down(0)),f}peek(){return this.data[0]}_up(f){let{data:l,compare:p}=this,g=l[f];for(;f>0;){let b=f-1>>1,I=l[b];if(p(g,I)>=0)break;l[f]=I,f=b}l[f]=g}_down(f){let{data:l,compare:p}=this,g=this.length>>1,b=l[f];for(;f<g;){let I=1+(f<<1),M=I+1;if(M<this.length&&p(l[M],l[I])<0&&(I=M),p(l[I],b)>=0)break;l[f]=l[I],f=I}l[f]=b}};function G2(f,l,p=0,g=f.length-1,b=yB){for(;g>p;){if(g-p>600){let k=g-p+1,F=l-p+1,U=Math.log(k),$=.5*Math.exp(2*U/3),X=.5*Math.sqrt(U*$*(k-$)/k)*(F-k/2<0?-1:1);G2(f,l,Math.max(p,Math.floor(l-F*$/k+X)),Math.min(g,Math.floor(l+(k-F)*$/k+X)),b)}let I=f[l],M=p,O=g;for(E1(f,p,l),b(f[g],I)>0&&E1(f,p,g);M<O;){for(E1(f,M,O),M++,O--;b(f[M],I)<0;)M++;for(;b(f[O],I)>0;)O--}b(f[p],I)===0?E1(f,p,O):(O++,E1(f,O,g)),O<=l&&(p=O+1),l<=O&&(g=O-1)}}function E1(f,l,p){let g=f[l];f[l]=f[p],f[p]=g}function yB(f,l){return f<l?-1:f>l?1:0}function S1(f,l){if(f.length<=1)return[f];let p=[],g,b;for(let I of f){let M=_B(I);M!==0&&(I.area=Math.abs(M),b===void 0&&(b=M<0),b===M<0?(g&&p.push(g),g=[I]):g.push(I))}if(g&&p.push(g),l>1)for(let I=0;I<p.length;I++)p[I].length<=l||(G2(p[I],l,1,p[I].length-1,$N),p[I]=p[I].slice(0,l));return p}function $N(f,l){return l.area-f.area}function _B(f){let l=0;for(let p,g,b=0,I=f.length,M=I-1;b<I;M=b++)p=f[b],g=f[M],l+=(g.x-p.x)*(p.y+g.y);return l}let WN=1/298.257223563,YN=WN*(2-WN),H2=Math.PI/180;class $2{constructor(l){let p=6378.137*H2*1e3,g=Math.cos(l*H2),b=1/(1-YN*(1-g*g)),I=Math.sqrt(b);this.kx=p*I*g,this.ky=p*I*b*(1-YN)}distance(l,p){let g=this.wrap(l[0]-p[0])*this.kx,b=(l[1]-p[1])*this.ky;return Math.sqrt(g*g+b*b)}pointOnLine(l,p){let g,b,I,M,O=1/0;for(let k=0;k<l.length-1;k++){let F=l[k][0],U=l[k][1],$=this.wrap(l[k+1][0]-F)*this.kx,X=(l[k+1][1]-U)*this.ky,re=0;$===0&&X===0||(re=(this.wrap(p[0]-F)*this.kx*$+(p[1]-U)*this.ky*X)/($*$+X*X),re>1?(F=l[k+1][0],U=l[k+1][1]):re>0&&(F+=$/this.kx*re,U+=X/this.ky*re)),$=this.wrap(p[0]-F)*this.kx,X=(p[1]-U)*this.ky;let ne=$*$+X*X;ne<O&&(O=ne,g=F,b=U,I=k,M=re)}return{point:[g,b],index:I,t:Math.max(0,Math.min(1,M))}}wrap(l){for(;l<-180;)l+=360;for(;l>180;)l-=360;return l}}function ZN(f,l){return l[0]-f[0]}function bx(f){return f[1]-f[0]+1}function ed(f,l){return f[1]>=f[0]&&f[1]<l}function xo(f,l){if(f[0]>f[1])return[null,null];let p=bx(f);if(l){if(p===2)return[f,null];let b=Math.floor(p/2);return[[f[0],f[0]+b],[f[0]+b,f[1]]]}if(p===1)return[f,null];let g=Math.floor(p/2)-1;return[[f[0],f[0]+g],[f[0]+g+1,f[1]]]}function W2(f,l){if(!ed(l,f.length))return[1/0,1/0,-1/0,-1/0];let p=[1/0,1/0,-1/0,-1/0];for(let g=l[0];g<=l[1];++g)x1(p,f[g]);return p}function Y2(f){let l=[1/0,1/0,-1/0,-1/0];for(let p of f)for(let g of p)x1(l,g);return l}function KN(f){return f[0]!==-1/0&&f[1]!==-1/0&&f[2]!==1/0&&f[3]!==1/0}function Z2(f,l,p){if(!KN(f)||!KN(l))return NaN;let g=0,b=0;return f[2]<l[0]&&(g=l[0]-f[2]),f[0]>l[2]&&(g=f[0]-l[2]),f[1]>l[3]&&(b=f[1]-l[3]),f[3]<l[1]&&(b=l[1]-f[3]),p.distance([0,0],[g,b])}function $m(f,l,p){let g=p.pointOnLine(l,f);return p.distance(f,g.point)}function K2(f,l,p,g,b){let I=Math.min($m(f,[p,g],b),$m(l,[p,g],b)),M=Math.min($m(p,[f,l],b),$m(g,[f,l],b));return Math.min(I,M)}function bB(f,l,p,g,b){if(!ed(l,f.length)||!ed(g,p.length))return 1/0;let I=1/0;for(let M=l[0];M<l[1];++M){let O=f[M],k=f[M+1];for(let F=g[0];F<g[1];++F){let U=p[F],$=p[F+1];if(yx(O,k,U,$))return 0;I=Math.min(I,K2(O,k,U,$,b))}}return I}function xB(f,l,p,g,b){if(!ed(l,f.length)||!ed(g,p.length))return NaN;let I=1/0;for(let M=l[0];M<=l[1];++M)for(let O=g[0];O<=g[1];++O)if(I=Math.min(I,b.distance(f[M],p[O])),I===0)return I;return I}function wB(f,l,p){if(Gm(f,l,!0))return 0;let g=1/0;for(let b of l){let I=b[0],M=b[b.length-1];if(I!==M&&(g=Math.min(g,$m(f,[M,I],p)),g===0))return g;let O=p.pointOnLine(b,f);if(g=Math.min(g,p.distance(f,O.point)),g===0)return g}return g}function EB(f,l,p,g){if(!ed(l,f.length))return NaN;for(let I=l[0];I<=l[1];++I)if(Gm(f[I],p,!0))return 0;let b=1/0;for(let I=l[0];I<l[1];++I){let M=f[I],O=f[I+1];for(let k of p)for(let F=0,U=k.length,$=U-1;F<U;$=F++){let X=k[$],re=k[F];if(yx(M,O,X,re))return 0;b=Math.min(b,K2(M,O,X,re,g))}}return b}function XN(f,l){for(let p of f)for(let g of p)if(Gm(g,l,!0))return!0;return!1}function SB(f,l,p,g=1/0){let b=Y2(f),I=Y2(l);if(g!==1/0&&Z2(b,I,p)>=g)return g;if(w1(b,I)){if(XN(f,l))return 0}else if(XN(l,f))return 0;let M=1/0;for(let O of f)for(let k=0,F=O.length,U=F-1;k<F;U=k++){let $=O[U],X=O[k];for(let re of l)for(let ne=0,ae=re.length,he=ae-1;ne<ae;he=ne++){let Se=re[he],Xe=re[ne];if(yx($,X,Se,Xe))return 0;M=Math.min(M,K2($,X,Se,Xe,p))}}return M}function JN(f,l,p,g,b,I){if(!I)return;let M=Z2(W2(g,I),b,p);M<l&&f.push([M,I,[0,0]])}function xx(f,l,p,g,b,I,M){if(!I||!M)return;let O=Z2(W2(g,I),W2(b,M),p);O<l&&f.push([O,I,M])}function wx(f,l,p,g,b=1/0){let I=Math.min(g.distance(f[0],p[0][0]),b);if(I===0)return I;let M=new V2([[0,[0,f.length-1],[0,0]]],ZN),O=Y2(p);for(;M.length>0;){let k=M.pop();if(k[0]>=I)continue;let F=k[1],U=l?50:100;if(bx(F)<=U){if(!ed(F,f.length))return NaN;if(l){let $=EB(f,F,p,g);if(isNaN($)||$===0)return $;I=Math.min(I,$)}else for(let $=F[0];$<=F[1];++$){let X=wB(f[$],p,g);if(I=Math.min(I,X),I===0)return 0}}else{let $=xo(F,l);JN(M,I,g,f,O,$[0]),JN(M,I,g,f,O,$[1])}}return I}function Ex(f,l,p,g,b,I=1/0){let M=Math.min(I,b.distance(f[0],p[0]));if(M===0)return M;let O=new V2([[0,[0,f.length-1],[0,p.length-1]]],ZN);for(;O.length>0;){let k=O.pop();if(k[0]>=M)continue;let F=k[1],U=k[2],$=l?50:100,X=g?50:100;if(bx(F)<=$&&bx(U)<=X){if(!ed(F,f.length)&&ed(U,p.length))return NaN;let re;if(l&&g)re=bB(f,F,p,U,b),M=Math.min(M,re);else if(l&&!g){let ne=f.slice(F[0],F[1]+1);for(let ae=U[0];ae<=U[1];++ae)if(re=$m(p[ae],ne,b),M=Math.min(M,re),M===0)return M}else if(!l&&g){let ne=p.slice(U[0],U[1]+1);for(let ae=F[0];ae<=F[1];++ae)if(re=$m(f[ae],ne,b),M=Math.min(M,re),M===0)return M}else re=xB(f,F,p,U,b),M=Math.min(M,re)}else{let re=xo(F,l),ne=xo(U,g);xx(O,M,b,f,p,re[0],ne[0]),xx(O,M,b,f,p,re[0],ne[1]),xx(O,M,b,f,p,re[1],ne[0]),xx(O,M,b,f,p,re[1],ne[1])}}return M}function X2(f){return f.type==="MultiPolygon"?f.coordinates.map(l=>({type:"Polygon",coordinates:l})):f.type==="MultiLineString"?f.coordinates.map(l=>({type:"LineString",coordinates:l})):f.type==="MultiPoint"?f.coordinates.map(l=>({type:"Point",coordinates:l})):[f]}class Wm{constructor(l,p){this.type=zt,this.geojson=l,this.geometries=p}static parse(l,p){if(l.length!==2)return p.error(`'distance' expression requires exactly one argument, but found ${l.length-1} instead.`);if(Um(l[1])){let g=l[1];if(g.type==="FeatureCollection")return new Wm(g,g.features.map(b=>X2(b.geometry)).flat());if(g.type==="Feature")return new Wm(g,X2(g.geometry));if("type"in g&&"coordinates"in g)return new Wm(g,X2(g))}return p.error("'distance' expression requires valid geojson object that contains polygon geometry type.")}evaluate(l){if(l.geometry()!=null&&l.canonicalID()!=null){if(l.geometryType()==="Point")return function(p,g){let b=p.geometry(),I=b.flat().map(k=>vx([k.x,k.y],p.canonical));if(b.length===0)return NaN;let M=new $2(I[0][1]),O=1/0;for(let k of g){switch(k.type){case"Point":O=Math.min(O,Ex(I,!1,[k.coordinates],!1,M,O));break;case"LineString":O=Math.min(O,Ex(I,!1,k.coordinates,!0,M,O));break;case"Polygon":O=Math.min(O,wx(I,!1,k.coordinates,M,O))}if(O===0)return O}return O}(l,this.geometries);if(l.geometryType()==="LineString")return function(p,g){let b=p.geometry(),I=b.flat().map(k=>vx([k.x,k.y],p.canonical));if(b.length===0)return NaN;let M=new $2(I[0][1]),O=1/0;for(let k of g){switch(k.type){case"Point":O=Math.min(O,Ex(I,!0,[k.coordinates],!1,M,O));break;case"LineString":O=Math.min(O,Ex(I,!0,k.coordinates,!0,M,O));break;case"Polygon":O=Math.min(O,wx(I,!0,k.coordinates,M,O))}if(O===0)return O}return O}(l,this.geometries);if(l.geometryType()==="Polygon")return function(p,g){let b=p.geometry();if(b.length===0||b[0].length===0)return NaN;let I=S1(b,0).map(k=>k.map(F=>F.map(U=>vx([U.x,U.y],p.canonical)))),M=new $2(I[0][0][0][1]),O=1/0;for(let k of g)for(let F of I){switch(k.type){case"Point":O=Math.min(O,wx([k.coordinates],!1,F,M,O));break;case"LineString":O=Math.min(O,wx(k.coordinates,!0,F,M,O));break;case"Polygon":O=Math.min(O,SB(F,k.coordinates,M,O))}if(O===0)return O}return O}(l,this.geometries)}return NaN}eachChild(){}outputDefined(){return!0}}class T1{constructor(l){this.type=sr,this.key=l}static parse(l,p){if(l.length!==2)return p.error(`Expected 1 argument, but found ${l.length-1} instead.`);let g=l[1];return g==null?p.error("Global state property must be defined."):typeof g!="string"?p.error(`Global state property must be string, but found ${typeof l[1]} instead.`):new T1(g)}evaluate(l){var p;let g=(p=l.globals)===null||p===void 0?void 0:p.globalState;return g&&Object.keys(g).length!==0?$n(g,this.key):null}eachChild(){}outputDefined(){return!1}}let Iv={"==":FN,"!=":hx,">":q2,"<":pB,">=":dB,"<=":fB,array:Cu,at:fx,boolean:Cu,case:Sv,coalesce:y1,collator:mx,format:Vm,image:F2,in:dx,"index-of":Xc,interpolate:Ms,"interpolate-hcl":Ms,"interpolate-lab":Ms,length:gx,let:h1,literal:Qf,match:ss,number:Cu,"number-format":z2,object:Cu,slice:m1,step:ca,string:Cu,"to-boolean":jp,"to-color":jp,"to-number":jp,"to-string":jp,var:px,within:Hm,distance:Wm,"global-state":T1};class sc{constructor(l,p,g,b){this.name=l,this.type=p,this._evaluate=g,this.args=b}evaluate(l){return this._evaluate(l,this.args)}eachChild(l){this.args.forEach(l)}outputDefined(){return!1}static parse(l,p){let g=l[0],b=sc.definitions[g];if(!b)return p.error(`Unknown expression "${g}". If you wanted a literal array, use ["literal", [...]].`,0);let I=Array.isArray(b)?b[0]:b.type,M=Array.isArray(b)?[[b[1],b[2]]]:b.overloads,O=M.filter(([F])=>!Array.isArray(F)||F.length===l.length-1),k=null;for(let[F,U]of O){k=new Ev(p.registry,Sx,p.path,null,p.scope);let $=[],X=!1;for(let re=1;re<l.length;re++){let ne=l[re],ae=Array.isArray(F)?F[re-1]:F.type,he=k.parse(ne,1+$.length,ae);if(!he){X=!0;break}$.push(he)}if(!X)if(Array.isArray(F)&&F.length!==$.length)k.error(`Expected ${F.length} arguments, but found ${$.length} instead.`);else{for(let re=0;re<$.length;re++){let ne=Array.isArray(F)?F[re]:F.type,ae=$[re];k.concat(re+1).checkSubtype(ne,ae.type)}if(k.errors.length===0)return new sc(g,I,U,$)}}if(O.length===1)p.errors.push(...k.errors);else{let F=(O.length?O:M).map(([$])=>{return X=$,Array.isArray(X)?`(${X.map(Et).join(", ")})`:`(${Et(X.type)}...)`;var X}).join(" | "),U=[];for(let $=1;$<l.length;$++){let X=p.parse(l[$],1+U.length);if(!X)return null;U.push(Et(X.type))}p.error(`Expected arguments of type ${F}, but found (${U.join(", ")}) instead.`)}return null}static register(l,p){sc.definitions=p;for(let g in p)l[g]=sc}}function QN(f,[l,p,g,b]){l=l.evaluate(f),p=p.evaluate(f),g=g.evaluate(f);let I=b?b.evaluate(f):1,M=xi(l,p,g,I);if(M)throw new Fo(M);return new vn(l/255,p/255,g/255,I,!1)}function e4(f,l){return f in l}function J2(f,l){let p=l[f];return p===void 0?null:p}function Ym(f){return{type:f}}function Sx(f){if(f instanceof px)return Sx(f.boundExpression);if(f instanceof sc&&f.name==="error"||f instanceof mx||f instanceof Hm||f instanceof Wm||f instanceof T1)return!1;let l=f instanceof jp||f instanceof Cu,p=!0;return f.eachChild(g=>{p=l?p&&Sx(g):p&&g instanceof Qf}),!!p&&Tx(f)&&Ix(f,["zoom","heatmap-density","elevation","line-progress","accumulated","is-supported-script"])}function Tx(f){if(f instanceof sc&&(f.name==="get"&&f.args.length===1||f.name==="feature-state"||f.name==="has"&&f.args.length===1||f.name==="properties"||f.name==="geometry-type"||f.name==="id"||/^filter-/.test(f.name))||f instanceof Hm||f instanceof Wm)return!1;let l=!0;return f.eachChild(p=>{l&&!Tx(p)&&(l=!1)}),l}function I1(f){if(f instanceof sc&&f.name==="feature-state")return!1;let l=!0;return f.eachChild(p=>{l&&!I1(p)&&(l=!1)}),l}function Ix(f,l){if(f instanceof sc&&l.indexOf(f.name)>=0)return!1;let p=!0;return f.eachChild(g=>{p&&!Ix(g,l)&&(p=!1)}),p}function t4(f){return{result:"success",value:f}}function Mv(f){return{result:"error",value:f}}function fh(f){return f["property-type"]==="data-driven"||f["property-type"]==="cross-faded-data-driven"}function r4(f){return!!f.expression&&f.expression.parameters.indexOf("zoom")>-1}function Q2(f){return!!f.expression&&f.expression.interpolated}function Xn(f){return f instanceof Number?"number":f instanceof String?"string":f instanceof Boolean?"boolean":Array.isArray(f)?"array":f===null?"null":typeof f}function M1(f){return typeof f=="object"&&f!==null&&!Array.isArray(f)&&Xr(f)===On}function TB(f){return f}function n4(f,l){let p=f.stops&&typeof f.stops[0][0]=="object",g=p||!(p||f.property!==void 0),b=f.type||(Q2(l)?"exponential":"interval"),I=function(U){switch(U.type){case"color":return vn.parse;case"padding":return as.parse;case"numberArray":return Ki.parse;case"colorArray":return Di.parse;default:return null}}(l);if(I&&((f=qo({},f)).stops&&(f.stops=f.stops.map(U=>[U[0],I(U[1])])),f.default=I(f.default?f.default:l.default)),f.colorSpace&&(M=f.colorSpace)!=="rgb"&&M!=="hcl"&&M!=="lab")throw new Error(`Unknown color space: "${f.colorSpace}"`);var M;let O=function(U){switch(U){case"exponential":return i4;case"interval":return IB;case"categorical":return o4;case"identity":return MB;default:throw new Error(`Unknown function type "${U}"`)}}(b),k,F;if(b==="categorical"){k=Object.create(null);for(let U of f.stops)k[U[0]]=U[1];F=typeof f.stops[0][0]}if(p){let U={},$=[];for(let ne=0;ne<f.stops.length;ne++){let ae=f.stops[ne],he=ae[0].zoom;U[he]===void 0&&(U[he]={zoom:he,type:f.type,property:f.property,default:f.default,stops:[]},$.push(he)),U[he].stops.push([ae[0].value,ae[1]])}let X=[];for(let ne of $)X.push([U[ne].zoom,n4(U[ne],l)]);let re={name:"linear"};return{kind:"composite",interpolationType:re,interpolationFactor:Ms.interpolationFactor.bind(void 0,re),zoomStops:X.map(ne=>ne[0]),evaluate:({zoom:ne},ae)=>i4({stops:X,base:f.base},l,ne).evaluate(ne,ae)}}if(g){let U=b==="exponential"?{name:"exponential",base:f.base!==void 0?f.base:1}:null;return{kind:"camera",interpolationType:U,interpolationFactor:Ms.interpolationFactor.bind(void 0,U),zoomStops:f.stops.map($=>$[0]),evaluate:({zoom:$})=>O(f,l,$,k,F)}}return{kind:"source",evaluate(U,$){let X=$&&$.properties?$.properties[f.property]:void 0;return X===void 0?dh(f.default,l.default):O(f,l,X,k,F)}}}function dh(f,l,p){return f!==void 0?f:l!==void 0?l:p!==void 0?p:void 0}function o4(f,l,p,g,b){return dh(typeof p===b?g[p]:void 0,f.default,l.default)}function IB(f,l,p){if(Xn(p)!=="number")return dh(f.default,l.default);let g=f.stops.length;if(g===1||p<=f.stops[0][0])return f.stops[0][1];if(p>=f.stops[g-1][0])return f.stops[g-1][1];let b=Bm(f.stops.map(I=>I[0]),p);return f.stops[b][1]}function i4(f,l,p){let g=f.base!==void 0?f.base:1;if(Xn(p)!=="number")return dh(f.default,l.default);let b=f.stops.length;if(b===1||p<=f.stops[0][0])return f.stops[0][1];if(p>=f.stops[b-1][0])return f.stops[b-1][1];let I=Bm(f.stops.map(U=>U[0]),p),M=function(U,$,X,re){let ne=re-X,ae=U-X;return ne===0?0:$===1?ae/ne:(Math.pow($,ae)-1)/(Math.pow($,ne)-1)}(p,g,f.stops[I][0],f.stops[I+1][0]),O=f.stops[I][1],k=f.stops[I+1][1],F=qp[l.type]||TB;return typeof O.evaluate=="function"?{evaluate(...U){let $=O.evaluate.apply(void 0,U),X=k.evaluate.apply(void 0,U);if($!==void 0&&X!==void 0)return F($,X,M,f.colorSpace)}}:F(O,k,M,f.colorSpace)}function MB(f,l,p){switch(l.type){case"color":p=vn.parse(p);break;case"formatted":p=_a.fromString(p.toString());break;case"resolvedImage":p=Bs.fromString(p.toString());break;case"padding":p=as.parse(p);break;case"colorArray":p=Di.parse(p);break;case"numberArray":p=Ki.parse(p);break;default:Xn(p)===l.type||l.type==="enum"&&l.values[p]||(p=void 0)}return dh(p,f.default,l.default)}sc.register(Iv,{error:[{kind:"error"},[Dr],(f,[l])=>{throw new Fo(l.evaluate(f))}],typeof:[Dr,[sr],(f,[l])=>Et(Xr(l.evaluate(f)))],"to-rgba":[Pn(zt,4),[yn],(f,[l])=>{let[p,g,b,I]=l.evaluate(f).rgb;return[255*p,255*g,255*b,I]}],rgb:[yn,[zt,zt,zt],QN],rgba:[yn,[zt,zt,zt,zt],QN],has:{type:hr,overloads:[[[Dr],(f,[l])=>e4(l.evaluate(f),f.properties())],[[Dr,On],(f,[l,p])=>e4(l.evaluate(f),p.evaluate(f))]]},get:{type:sr,overloads:[[[Dr],(f,[l])=>J2(l.evaluate(f),f.properties())],[[Dr,On],(f,[l,p])=>J2(l.evaluate(f),p.evaluate(f))]]},"feature-state":[sr,[Dr],(f,[l])=>J2(l.evaluate(f),f.featureState||{})],properties:[On,[],f=>f.properties()],"geometry-type":[Dr,[],f=>f.geometryType()],id:[sr,[],f=>f.id()],zoom:[zt,[],f=>f.globals.zoom],"heatmap-density":[zt,[],f=>f.globals.heatmapDensity||0],elevation:[zt,[],f=>f.globals.elevation||0],"line-progress":[zt,[],f=>f.globals.lineProgress||0],accumulated:[sr,[],f=>f.globals.accumulated===void 0?null:f.globals.accumulated],"+":[zt,Ym(zt),(f,l)=>{let p=0;for(let g of l)p+=g.evaluate(f);return p}],"*":[zt,Ym(zt),(f,l)=>{let p=1;for(let g of l)p*=g.evaluate(f);return p}],"-":{type:zt,overloads:[[[zt,zt],(f,[l,p])=>l.evaluate(f)-p.evaluate(f)],[[zt],(f,[l])=>-l.evaluate(f)]]},"/":[zt,[zt,zt],(f,[l,p])=>l.evaluate(f)/p.evaluate(f)],"%":[zt,[zt,zt],(f,[l,p])=>l.evaluate(f)%p.evaluate(f)],ln2:[zt,[],()=>Math.LN2],pi:[zt,[],()=>Math.PI],e:[zt,[],()=>Math.E],"^":[zt,[zt,zt],(f,[l,p])=>Math.pow(l.evaluate(f),p.evaluate(f))],sqrt:[zt,[zt],(f,[l])=>Math.sqrt(l.evaluate(f))],log10:[zt,[zt],(f,[l])=>Math.log(l.evaluate(f))/Math.LN10],ln:[zt,[zt],(f,[l])=>Math.log(l.evaluate(f))],log2:[zt,[zt],(f,[l])=>Math.log(l.evaluate(f))/Math.LN2],sin:[zt,[zt],(f,[l])=>Math.sin(l.evaluate(f))],cos:[zt,[zt],(f,[l])=>Math.cos(l.evaluate(f))],tan:[zt,[zt],(f,[l])=>Math.tan(l.evaluate(f))],asin:[zt,[zt],(f,[l])=>Math.asin(l.evaluate(f))],acos:[zt,[zt],(f,[l])=>Math.acos(l.evaluate(f))],atan:[zt,[zt],(f,[l])=>Math.atan(l.evaluate(f))],min:[zt,Ym(zt),(f,l)=>Math.min(...l.map(p=>p.evaluate(f)))],max:[zt,Ym(zt),(f,l)=>Math.max(...l.map(p=>p.evaluate(f)))],abs:[zt,[zt],(f,[l])=>Math.abs(l.evaluate(f))],round:[zt,[zt],(f,[l])=>{let p=l.evaluate(f);return p<0?-Math.round(-p):Math.round(p)}],floor:[zt,[zt],(f,[l])=>Math.floor(l.evaluate(f))],ceil:[zt,[zt],(f,[l])=>Math.ceil(l.evaluate(f))],"filter-==":[hr,[Dr,sr],(f,[l,p])=>f.properties()[l.value]===p.value],"filter-id-==":[hr,[sr],(f,[l])=>f.id()===l.value],"filter-type-==":[hr,[Dr],(f,[l])=>f.geometryType()===l.value],"filter-<":[hr,[Dr,sr],(f,[l,p])=>{let g=f.properties()[l.value],b=p.value;return typeof g==typeof b&&g<b}],"filter-id-<":[hr,[sr],(f,[l])=>{let p=f.id(),g=l.value;return typeof p==typeof g&&p<g}],"filter->":[hr,[Dr,sr],(f,[l,p])=>{let g=f.properties()[l.value],b=p.value;return typeof g==typeof b&&g>b}],"filter-id->":[hr,[sr],(f,[l])=>{let p=f.id(),g=l.value;return typeof p==typeof g&&p>g}],"filter-<=":[hr,[Dr,sr],(f,[l,p])=>{let g=f.properties()[l.value],b=p.value;return typeof g==typeof b&&g<=b}],"filter-id-<=":[hr,[sr],(f,[l])=>{let p=f.id(),g=l.value;return typeof p==typeof g&&p<=g}],"filter->=":[hr,[Dr,sr],(f,[l,p])=>{let g=f.properties()[l.value],b=p.value;return typeof g==typeof b&&g>=b}],"filter-id->=":[hr,[sr],(f,[l])=>{let p=f.id(),g=l.value;return typeof p==typeof g&&p>=g}],"filter-has":[hr,[sr],(f,[l])=>l.value in f.properties()],"filter-has-id":[hr,[],f=>f.id()!==null&&f.id()!==void 0],"filter-type-in":[hr,[Pn(Dr)],(f,[l])=>l.value.indexOf(f.geometryType())>=0],"filter-id-in":[hr,[Pn(sr)],(f,[l])=>l.value.indexOf(f.id())>=0],"filter-in-small":[hr,[Dr,Pn(sr)],(f,[l,p])=>p.value.indexOf(f.properties()[l.value])>=0],"filter-in-large":[hr,[Dr,Pn(sr)],(f,[l,p])=>function(g,b,I,M){for(;I<=M;){let O=I+M>>1;if(b[O]===g)return!0;b[O]>g?M=O-1:I=O+1}return!1}(f.properties()[l.value],p.value,0,p.value.length-1)],all:{type:hr,overloads:[[[hr,hr],(f,[l,p])=>l.evaluate(f)&&p.evaluate(f)],[Ym(hr),(f,l)=>{for(let p of l)if(!p.evaluate(f))return!1;return!0}]]},any:{type:hr,overloads:[[[hr,hr],(f,[l,p])=>l.evaluate(f)||p.evaluate(f)],[Ym(hr),(f,l)=>{for(let p of l)if(p.evaluate(f))return!0;return!1}]]},"!":[hr,[hr],(f,[l])=>!l.evaluate(f)],"is-supported-script":[hr,[Dr],(f,[l])=>{let p=f.globals&&f.globals.isSupportedScript;return!p||p(l.evaluate(f))}],upcase:[Dr,[Dr],(f,[l])=>l.evaluate(f).toUpperCase()],downcase:[Dr,[Dr],(f,[l])=>l.evaluate(f).toLowerCase()],concat:[Dr,Ym(sr),(f,l)=>l.map(p=>wn(p.evaluate(f))).join("")],"resolved-locale":[Dr,[fn],(f,[l])=>l.evaluate(f).resolvedLocale()]});class eI{constructor(l,p){this.expression=l,this._warningHistory={},this._evaluator=new R2,this._defaultValue=p?function(g){if(g.type==="color"&&M1(g.default))return new vn(0,0,0,0);switch(g.type){case"color":return vn.parse(g.default)||null;case"padding":return as.parse(g.default)||null;case"numberArray":return Ki.parse(g.default)||null;case"colorArray":return Di.parse(g.default)||null;case"variableAnchorOffsetCollection":return hl.parse(g.default)||null;case"projectionDefinition":return Vs.parse(g.default)||null;default:return g.default===void 0?null:g.default}}(p):null,this._enumValues=p&&p.type==="enum"?p.values:null}evaluateWithoutErrorHandling(l,p,g,b,I,M){return this._evaluator.globals=l,this._evaluator.feature=p,this._evaluator.featureState=g,this._evaluator.canonical=b,this._evaluator.availableImages=I||null,this._evaluator.formattedSection=M,this.expression.evaluate(this._evaluator)}evaluate(l,p,g,b,I,M){this._evaluator.globals=l,this._evaluator.feature=p||null,this._evaluator.featureState=g||null,this._evaluator.canonical=b,this._evaluator.availableImages=I||null,this._evaluator.formattedSection=M||null;try{let O=this.expression.evaluate(this._evaluator);if(O==null||typeof O=="number"&&O!=O)return this._defaultValue;if(this._enumValues&&!(O in this._enumValues))throw new Fo(`Expected value to be one of ${Object.keys(this._enumValues).map(k=>JSON.stringify(k)).join(", ")}, but found ${JSON.stringify(O)} instead.`);return O}catch(O){return this._warningHistory[O.message]||(this._warningHistory[O.message]=!0,typeof console!="undefined"&&console.warn(O.message)),this._defaultValue}}}function Mx(f){return Array.isArray(f)&&f.length>0&&typeof f[0]=="string"&&f[0]in Iv}function C1(f,l){let p=new Ev(Iv,Sx,[],l?function(b){let I={color:yn,string:Dr,number:zt,enum:Dr,boolean:hr,formatted:bn,padding:rn,numberArray:Vr,colorArray:on,projectionDefinition:_n,resolvedImage:Gr,variableAnchorOffsetCollection:Mn};return b.type==="array"?Pn(I[b.value]||sr,b.length):I[b.type]}(l):void 0),g=p.parse(f,void 0,void 0,void 0,l&&l.type==="string"?{typeAnnotation:"coerce"}:void 0);return g?t4(new eI(g,l)):Mv(p.errors)}class A1{constructor(l,p){this.kind=l,this._styleExpression=p,this.isStateDependent=l!=="constant"&&!I1(p.expression),this.globalStateRefs=D1(p.expression)}evaluateWithoutErrorHandling(l,p,g,b,I,M){return this._styleExpression.evaluateWithoutErrorHandling(l,p,g,b,I,M)}evaluate(l,p,g,b,I,M){return this._styleExpression.evaluate(l,p,g,b,I,M)}}class tI{constructor(l,p,g,b){this.kind=l,this.zoomStops=g,this._styleExpression=p,this.isStateDependent=l!=="camera"&&!I1(p.expression),this.globalStateRefs=D1(p.expression),this.interpolationType=b}evaluateWithoutErrorHandling(l,p,g,b,I,M){return this._styleExpression.evaluateWithoutErrorHandling(l,p,g,b,I,M)}evaluate(l,p,g,b,I,M){return this._styleExpression.evaluate(l,p,g,b,I,M)}interpolationFactor(l,p,g){return this.interpolationType?Ms.interpolationFactor(this.interpolationType,l,p,g):0}}function a4(f,l){let p=C1(f,l);if(p.result==="error")return p;let g=p.value.expression,b=Tx(g);if(!b&&!fh(l))return Mv([new Xo("","data expressions not supported")]);let I=Ix(g,["zoom"]);if(!I&&!r4(l))return Mv([new Xo("","zoom expressions not supported")]);let M=P1(g);return M||I?M instanceof Xo?Mv([M]):M instanceof Ms&&!Q2(l)?Mv([new Xo("","\"interpolate\" expressions cannot be used with this property")]):t4(M?new tI(b?"camera":"composite",p.value,M.labels,M instanceof Ms?M.interpolation:void 0):new A1(b?"constant":"source",p.value)):Mv([new Xo("","\"zoom\" expression may only be used as input to a top-level \"step\" or \"interpolate\" expression.")])}class O1{constructor(l,p){this._parameters=l,this._specification=p,qo(this,n4(this._parameters,this._specification))}static deserialize(l){return new O1(l._parameters,l._specification)}static serialize(l){return{_parameters:l._parameters,_specification:l._specification}}}function P1(f){let l=null;if(f instanceof h1)l=P1(f.result);else if(f instanceof y1){for(let p of f.args)if(l=P1(p),l)break}else(f instanceof ca||f instanceof Ms)&&f.input instanceof sc&&f.input.name==="zoom"&&(l=f);return l instanceof Xo||f.eachChild(p=>{let g=P1(p);g instanceof Xo?l=g:!l&&g?l=new Xo("","\"zoom\" expression may only be used as input to a top-level \"step\" or \"interpolate\" expression."):l&&g&&l!==g&&(l=new Xo("","Only one zoom-based \"step\" or \"interpolate\" subexpression may be used in an expression."))}),l}function D1(f,l=new Set){return f instanceof T1&&l.add(f.key),f.eachChild(p=>{D1(p,l)}),l}function Cx(f){if(f===!0||f===!1)return!0;if(!Array.isArray(f)||f.length===0)return!1;switch(f[0]){case"has":return f.length>=2&&f[1]!=="$id"&&f[1]!=="$type";case"in":return f.length>=3&&(typeof f[1]!="string"||Array.isArray(f[2]));case"!in":case"!has":case"none":return!1;case"==":case"!=":case">":case">=":case"<":case"<=":return f.length!==3||Array.isArray(f[1])||Array.isArray(f[2]);case"any":case"all":for(let l of f.slice(1))if(!Cx(l)&&typeof l!="boolean")return!1;return!0;default:return!0}}let rI={type:"boolean",default:!1,transition:!1,"property-type":"data-driven",expression:{interpolated:!1,parameters:["zoom","feature"]}};function Zm(f){if(f==null)return{filter:()=>!0,needGeometry:!1,getGlobalStateRefs:()=>new Set};Cx(f)||(f=Km(f));let l=C1(f,rI);if(l.result==="error")throw new Error(l.value.map(p=>`${p.key}: ${p.message}`).join(", "));return{filter:(p,g,b)=>l.value.evaluate(p,g,{},b),needGeometry:Ax(f),getGlobalStateRefs:()=>D1(l.value.expression)}}function nI(f,l){return f<l?-1:f>l?1:0}function Ax(f){if(!Array.isArray(f))return!1;if(f[0]==="within"||f[0]==="distance")return!0;for(let l=1;l<f.length;l++)if(Ax(f[l]))return!0;return!1}function Km(f){if(!f)return!0;let l=f[0];return f.length<=1?l!=="any":l==="=="?oI(f[1],f[2],"=="):l==="!="?Ox(oI(f[1],f[2],"==")):l==="<"||l===">"||l==="<="||l===">="?oI(f[1],f[2],l):l==="any"?(p=f.slice(1),["any"].concat(p.map(Km))):l==="all"?["all"].concat(f.slice(1).map(Km)):l==="none"?["all"].concat(f.slice(1).map(Km).map(Ox)):l==="in"?s4(f[1],f.slice(2)):l==="!in"?Ox(s4(f[1],f.slice(2))):l==="has"?l4(f[1]):l!=="!has"||Ox(l4(f[1]));var p}function oI(f,l,p){switch(f){case"$type":return[`filter-type-${p}`,l];case"$id":return[`filter-id-${p}`,l];default:return[`filter-${p}`,f,l]}}function s4(f,l){if(l.length===0)return!1;switch(f){case"$type":return["filter-type-in",["literal",l]];case"$id":return["filter-id-in",["literal",l]];default:return l.length>200&&!l.some(p=>typeof p!=typeof l[0])?["filter-in-large",f,["literal",l.sort(nI)]]:["filter-in-small",f,["literal",l]]}}function l4(f){switch(f){case"$type":return!0;case"$id":return["filter-has-id"];default:return["filter-has",f]}}function Ox(f){return["!",f]}function iI(f){let l=typeof f;if(l==="number"||l==="boolean"||l==="string"||f==null)return JSON.stringify(f);if(Array.isArray(f)){let b="[";for(let I of f)b+=`${iI(I)},`;return`${b}]`}let p=Object.keys(f).sort(),g="{";for(let b=0;b<p.length;b++)g+=`${JSON.stringify(p[b])}:${iI(f[p[b]])},`;return`${g}}`}function CB(f){let l="";for(let p of Pt)l+=`/${iI(f[p])}`;return l}function aI(f){let l=f.value;return l?[new Rt(f.key,l,"constants have been deprecated as of v8")]:[]}function Xi(f){return f instanceof Number||f instanceof String||f instanceof Boolean?f.valueOf():f}function zp(f){if(Array.isArray(f))return f.map(zp);if(f instanceof Object&&!(f instanceof Number||f instanceof String||f instanceof Boolean)){let l={};for(let p in f)l[p]=zp(f[p]);return l}return Xi(f)}function lc(f){let l=f.key,p=f.value,g=f.valueSpec||{},b=f.objectElementValidators||{},I=f.style,M=f.styleSpec,O=f.validateSpec,k=[],F=Xn(p);if(F!=="object")return[new Rt(l,p,`object expected, ${F} found`)];for(let U in p){let $=U.split(".")[0],X=$n(g,$)||g["*"],re;if($n(b,$))re=b[$];else if($n(g,$))re=O;else if(b["*"])re=b["*"];else{if(!g["*"]){k.push(new Rt(l,p[U],`unknown property "${U}"`));continue}re=O}k=k.concat(re({key:(l&&`${l}.`)+U,value:p[U],valueSpec:X,style:I,styleSpec:M,object:p,objectKey:U,validateSpec:O},p))}for(let U in g)b[U]||g[U].required&&g[U].default===void 0&&p[U]===void 0&&k.push(new Rt(l,p,`missing required property "${U}"`));return k}function Px(f){let l=f.value,p=f.valueSpec,g=f.style,b=f.styleSpec,I=f.key,M=f.arrayElementValidator||f.validateSpec;if(Xn(l)!=="array")return[new Rt(I,l,`array expected, ${Xn(l)} found`)];if(p.length&&l.length!==p.length)return[new Rt(I,l,`array length ${p.length} expected, length ${l.length} found`)];if(p["min-length"]&&l.length<p["min-length"])return[new Rt(I,l,`array length at least ${p["min-length"]} expected, length ${l.length} found`)];let O={type:p.value,values:p.values};b.$version<7&&(O.function=p.function),Xn(p.value)==="object"&&(O=p.value);let k=[];for(let F=0;F<l.length;F++)k=k.concat(M({array:l,arrayIndex:F,value:l[F],valueSpec:O,validateSpec:f.validateSpec,style:g,styleSpec:b,key:`${I}[${F}]`}));return k}function N1(f){let l=f.key,p=f.value,g=f.valueSpec,b=Xn(p);return b==="number"&&p!=p&&(b="NaN"),b!=="number"?[new Rt(l,p,`number expected, ${b} found`)]:"minimum"in g&&p<g.minimum?[new Rt(l,p,`${p} is less than the minimum value ${g.minimum}`)]:"maximum"in g&&p>g.maximum?[new Rt(l,p,`${p} is greater than the maximum value ${g.maximum}`)]:[]}function u4(f){let l=f.valueSpec,p=Xi(f.value.type),g,b,I,M={},O=p!=="categorical"&&f.value.property===void 0,k=!O,F=Xn(f.value.stops)==="array"&&Xn(f.value.stops[0])==="array"&&Xn(f.value.stops[0][0])==="object",U=lc({key:f.key,value:f.value,valueSpec:f.styleSpec.function,validateSpec:f.validateSpec,style:f.style,styleSpec:f.styleSpec,objectElementValidators:{stops:function(re){if(p==="identity")return[new Rt(re.key,re.value,"identity function may not have a \"stops\" property")];let ne=[],ae=re.value;return ne=ne.concat(Px({key:re.key,value:ae,valueSpec:re.valueSpec,validateSpec:re.validateSpec,style:re.style,styleSpec:re.styleSpec,arrayElementValidator:$})),Xn(ae)==="array"&&ae.length===0&&ne.push(new Rt(re.key,ae,"array must have at least one stop")),ne},default:function(re){return re.validateSpec({key:re.key,value:re.value,valueSpec:l,validateSpec:re.validateSpec,style:re.style,styleSpec:re.styleSpec})}}});return p==="identity"&&O&&U.push(new Rt(f.key,f.value,"missing required property \"property\"")),p==="identity"||f.value.stops||U.push(new Rt(f.key,f.value,"missing required property \"stops\"")),p==="exponential"&&f.valueSpec.expression&&!Q2(f.valueSpec)&&U.push(new Rt(f.key,f.value,"exponential functions not supported")),f.styleSpec.$version>=8&&(k&&!fh(f.valueSpec)?U.push(new Rt(f.key,f.value,"property functions not supported")):O&&!r4(f.valueSpec)&&U.push(new Rt(f.key,f.value,"zoom functions not supported"))),p!=="categorical"&&!F||f.value.property!==void 0||U.push(new Rt(f.key,f.value,"\"property\" property is required")),U;function $(re){let ne=[],ae=re.value,he=re.key;if(Xn(ae)!=="array")return[new Rt(he,ae,`array expected, ${Xn(ae)} found`)];if(ae.length!==2)return[new Rt(he,ae,`array length 2 expected, length ${ae.length} found`)];if(F){if(Xn(ae[0])!=="object")return[new Rt(he,ae,`object expected, ${Xn(ae[0])} found`)];if(ae[0].zoom===void 0)return[new Rt(he,ae,"object stop key must have zoom")];if(ae[0].value===void 0)return[new Rt(he,ae,"object stop key must have value")];if(I&&I>Xi(ae[0].zoom))return[new Rt(he,ae[0].zoom,"stop zoom values must appear in ascending order")];Xi(ae[0].zoom)!==I&&(I=Xi(ae[0].zoom),b=void 0,M={}),ne=ne.concat(lc({key:`${he}[0]`,value:ae[0],valueSpec:{zoom:{}},validateSpec:re.validateSpec,style:re.style,styleSpec:re.styleSpec,objectElementValidators:{zoom:N1,value:X}}))}else ne=ne.concat(X({key:`${he}[0]`,value:ae[0],validateSpec:re.validateSpec,style:re.style,styleSpec:re.styleSpec},ae));return Mx(zp(ae[1]))?ne.concat([new Rt(`${he}[1]`,ae[1],"expressions are not allowed in function stops.")]):ne.concat(re.validateSpec({key:`${he}[1]`,value:ae[1],valueSpec:l,validateSpec:re.validateSpec,style:re.style,styleSpec:re.styleSpec}))}function X(re,ne){let ae=Xn(re.value),he=Xi(re.value),Se=re.value!==null?re.value:ne;if(g){if(ae!==g)return[new Rt(re.key,Se,`${ae} stop domain type must match previous stop domain type ${g}`)]}else g=ae;if(ae!=="number"&&ae!=="string"&&ae!=="boolean")return[new Rt(re.key,Se,"stop domain value must be a number, string, or boolean")];if(ae!=="number"&&p!=="categorical"){let Xe=`number expected, ${ae} found`;return fh(l)&&p===void 0&&(Xe+="\nIf you intended to use a categorical function, specify `\"type\": \"categorical\"`."),[new Rt(re.key,Se,Xe)]}return p!=="categorical"||ae!=="number"||isFinite(he)&&Math.floor(he)===he?p!=="categorical"&&ae==="number"&&b!==void 0&&he<b?[new Rt(re.key,Se,"stop domain values must appear in ascending order")]:(b=he,p==="categorical"&&he in M?[new Rt(re.key,Se,"stop domain values must be unique")]:(M[he]=!0,[])):[new Rt(re.key,Se,`integer expected, found ${he}`)]}}function Xm(f){let l=(f.expressionContext==="property"?a4:C1)(zp(f.value),f.valueSpec);if(l.result==="error")return l.value.map(g=>new Rt(`${f.key}${g.key}`,f.value,g.message));let p=l.value.expression||l.value._styleExpression.expression;if(f.expressionContext==="property"&&f.propertyKey==="text-font"&&!p.outputDefined())return[new Rt(f.key,f.value,`Invalid data expression for "${f.propertyKey}". Output values must be contained as literals within the expression.`)];if(f.expressionContext==="property"&&f.propertyType==="layout"&&!I1(p))return[new Rt(f.key,f.value,"\"feature-state\" data expressions are not supported with layout properties.")];if(f.expressionContext==="filter"&&!I1(p))return[new Rt(f.key,f.value,"\"feature-state\" data expressions are not supported with filters.")];if(f.expressionContext&&f.expressionContext.indexOf("cluster")===0){if(!Ix(p,["zoom","feature-state"]))return[new Rt(f.key,f.value,"\"zoom\" and \"feature-state\" expressions are not supported with cluster properties.")];if(f.expressionContext==="cluster-initial"&&!Tx(p))return[new Rt(f.key,f.value,"Feature data expressions are not supported with initial expression part of cluster properties.")]}return[]}function Dx(f){let l=f.key,p=f.value,g=Xn(p);return g!=="string"?[new Rt(l,p,`color expected, ${g} found`)]:vn.parse(String(p))?[]:[new Rt(l,p,`color expected, "${p}" found`)]}function td(f){let l=f.key,p=f.value,g=f.valueSpec,b=[];return Array.isArray(g.values)?g.values.indexOf(Xi(p))===-1&&b.push(new Rt(l,p,`expected one of [${g.values.join(", ")}], ${JSON.stringify(p)} found`)):Object.keys(g.values).indexOf(Xi(p))===-1&&b.push(new Rt(l,p,`expected one of [${Object.keys(g.values).join(", ")}], ${JSON.stringify(p)} found`)),b}function sI(f){return Cx(zp(f.value))?Xm(qo({},f,{expressionContext:"filter",valueSpec:{value:"boolean"}})):c4(f)}function c4(f){let l=f.value,p=f.key;if(Xn(l)!=="array")return[new Rt(p,l,`array expected, ${Xn(l)} found`)];let g=f.styleSpec,b,I=[];if(l.length<1)return[new Rt(p,l,"filter array must have at least 1 element")];switch(I=I.concat(td({key:`${p}[0]`,value:l[0],valueSpec:g.filter_operator,style:f.style,styleSpec:f.styleSpec})),Xi(l[0])){case"<":case"<=":case">":case">=":l.length>=2&&Xi(l[1])==="$type"&&I.push(new Rt(p,l,`"$type" cannot be use with operator "${l[0]}"`));case"==":case"!=":l.length!==3&&I.push(new Rt(p,l,`filter array for operator "${l[0]}" must have 3 elements`));case"in":case"!in":l.length>=2&&(b=Xn(l[1]),b!=="string"&&I.push(new Rt(`${p}[1]`,l[1],`string expected, ${b} found`)));for(let M=2;M<l.length;M++)b=Xn(l[M]),Xi(l[1])==="$type"?I=I.concat(td({key:`${p}[${M}]`,value:l[M],valueSpec:g.geometry_type,style:f.style,styleSpec:f.styleSpec})):b!=="string"&&b!=="number"&&b!=="boolean"&&I.push(new Rt(`${p}[${M}]`,l[M],`string, number, or boolean expected, ${b} found`));break;case"any":case"all":case"none":for(let M=1;M<l.length;M++)I=I.concat(c4({key:`${p}[${M}]`,value:l[M],style:f.style,styleSpec:f.styleSpec}));break;case"has":case"!has":b=Xn(l[1]),l.length!==2?I.push(new Rt(p,l,`filter array for "${l[0]}" operator must have 2 elements`)):b!=="string"&&I.push(new Rt(`${p}[1]`,l[1],`string expected, ${b} found`))}return I}function p4(f,l){let p=f.key,g=f.validateSpec,b=f.style,I=f.styleSpec,M=f.value,O=f.objectKey,k=I[`${l}_${f.layerType}`];if(!k)return[];let F=O.match(/^(.*)-transition$/);if(l==="paint"&&F&&k[F[1]]&&k[F[1]].transition)return g({key:p,value:M,valueSpec:I.transition,style:b,styleSpec:I});let U=f.valueSpec||k[O];if(!U)return[new Rt(p,M,`unknown property "${O}"`)];let $;if(Xn(M)==="string"&&fh(U)&&!U.tokens&&($=/^{([^}]+)}$/.exec(M)))return[new Rt(p,M,`"${O}" does not support interpolation syntax
Use an identity property function instead: \`{ "type": "identity", "property": ${JSON.stringify($[1])} }\`.`)];let X=[];return f.layerType==="symbol"&&(O==="text-field"&&b&&!b.glyphs&&X.push(new Rt(p,M,"use of \"text-field\" requires a style \"glyphs\" property")),O==="text-font"&&M1(zp(M))&&Xi(M.type)==="identity"&&X.push(new Rt(p,M,"\"text-font\" does not support identity functions"))),X.concat(g({key:f.key,value:M,valueSpec:U,style:b,styleSpec:I,expressionContext:"property",propertyType:l,propertyKey:O}))}function f4(f){return p4(f,"paint")}function d4(f){return p4(f,"layout")}function h4(f){let l=[],p=f.value,g=f.key,b=f.style,I=f.styleSpec;if(Xn(p)!=="object")return[new Rt(g,p,`object expected, ${Xn(p)} found`)];p.type||p.ref||l.push(new Rt(g,p,"either \"type\" or \"ref\" is required"));let M=Xi(p.type),O=Xi(p.ref);if(p.id){let k=Xi(p.id);for(let F=0;F<f.arrayIndex;F++){let U=b.layers[F];Xi(U.id)===k&&l.push(new Rt(g,p.id,`duplicate layer id "${p.id}", previously used at line ${U.id.__line__}`))}}if("ref"in p){let k;["type","source","source-layer","filter","layout"].forEach(F=>{F in p&&l.push(new Rt(g,p[F],`"${F}" is prohibited for ref layers`))}),b.layers.forEach(F=>{Xi(F.id)===O&&(k=F)}),k?k.ref?l.push(new Rt(g,p.ref,"ref cannot reference another ref layer")):M=Xi(k.type):l.push(new Rt(g,p.ref,`ref layer "${O}" not found`))}else if(M!=="background")if(p.source){let k=b.sources&&b.sources[p.source],F=k&&Xi(k.type);k?F==="vector"&&M==="raster"?l.push(new Rt(g,p.source,`layer "${p.id}" requires a raster source`)):F!=="raster-dem"&&M==="hillshade"||F!=="raster-dem"&&M==="color-relief"?l.push(new Rt(g,p.source,`layer "${p.id}" requires a raster-dem source`)):F==="raster"&&M!=="raster"?l.push(new Rt(g,p.source,`layer "${p.id}" requires a vector source`)):F!=="vector"||p["source-layer"]?F==="raster-dem"&&M!=="hillshade"&&M!=="color-relief"?l.push(new Rt(g,p.source,"raster-dem source can only be used with layer type 'hillshade' or 'color-relief'.")):M!=="line"||!p.paint||!p.paint["line-gradient"]||F==="geojson"&&k.lineMetrics||l.push(new Rt(g,p,`layer "${p.id}" specifies a line-gradient, which requires a GeoJSON source with \`lineMetrics\` enabled.`)):l.push(new Rt(g,p,`layer "${p.id}" must specify a "source-layer"`)):l.push(new Rt(g,p.source,`source "${p.source}" not found`))}else l.push(new Rt(g,p,"missing required property \"source\""));return l=l.concat(lc({key:g,value:p,valueSpec:I.layer,style:f.style,styleSpec:f.styleSpec,validateSpec:f.validateSpec,objectElementValidators:{"*":()=>[],type:()=>f.validateSpec({key:`${g}.type`,value:p.type,valueSpec:I.layer.type,style:f.style,styleSpec:f.styleSpec,validateSpec:f.validateSpec,object:p,objectKey:"type"}),filter:sI,layout:k=>lc({layer:p,key:k.key,value:k.value,style:k.style,styleSpec:k.styleSpec,validateSpec:k.validateSpec,objectElementValidators:{"*":F=>d4(qo({layerType:M},F))}}),paint:k=>lc({layer:p,key:k.key,value:k.value,style:k.style,styleSpec:k.styleSpec,validateSpec:k.validateSpec,objectElementValidators:{"*":F=>f4(qo({layerType:M},F))}})}})),l}function Qc(f){let l=f.value,p=f.key,g=Xn(l);return g!=="string"?[new Rt(p,l,`string expected, ${g} found`)]:[]}let Cv={promoteId:function({key:f,value:l}){if(Xn(l)==="string")return Qc({key:f,value:l});{let p=[];for(let g in l)p.push(...Qc({key:`${f}.${g}`,value:l[g]}));return p}}};function Xl(f){let l=f.value,p=f.key,g=f.styleSpec,b=f.style,I=f.validateSpec;if(!l.type)return[new Rt(p,l,"\"type\" is required")];let M=Xi(l.type),O;switch(M){case"vector":case"raster":return O=lc({key:p,value:l,valueSpec:g[`source_${M.replace("-","_")}`],style:f.style,styleSpec:g,objectElementValidators:Cv,validateSpec:I}),O;case"raster-dem":return O=function(k){var F;let U=(F=k.sourceName)!==null&&F!==void 0?F:"",$=k.value,X=k.styleSpec,re=X.source_raster_dem,ne=k.style,ae=[],he=Xn($);if($===void 0)return ae;if(he!=="object")return ae.push(new Rt("source_raster_dem",$,`object expected, ${he} found`)),ae;let Se=Xi($.encoding)==="custom",Xe=["redFactor","greenFactor","blueFactor","baseShift"],je=k.value.encoding?`"${k.value.encoding}"`:"Default";for(let Ve in $)!Se&&Xe.includes(Ve)?ae.push(new Rt(Ve,$[Ve],`In "${U}": "${Ve}" is only valid when "encoding" is set to "custom". ${je} encoding found`)):re[Ve]?ae=ae.concat(k.validateSpec({key:Ve,value:$[Ve],valueSpec:re[Ve],validateSpec:k.validateSpec,style:ne,styleSpec:X})):ae.push(new Rt(Ve,$[Ve],`unknown property "${Ve}"`));return ae}({sourceName:p,value:l,style:f.style,styleSpec:g,validateSpec:I}),O;case"geojson":if(O=lc({key:p,value:l,valueSpec:g.source_geojson,style:b,styleSpec:g,validateSpec:I,objectElementValidators:Cv}),l.cluster)for(let k in l.clusterProperties){let[F,U]=l.clusterProperties[k],$=typeof F=="string"?[F,["accumulated"],["get",k]]:F;O.push(...Xm({key:`${p}.${k}.map`,value:U,expressionContext:"cluster-map"})),O.push(...Xm({key:`${p}.${k}.reduce`,value:$,expressionContext:"cluster-reduce"}))}return O;case"video":return lc({key:p,value:l,valueSpec:g.source_video,style:b,validateSpec:I,styleSpec:g});case"image":return lc({key:p,value:l,valueSpec:g.source_image,style:b,validateSpec:I,styleSpec:g});case"canvas":return[new Rt(p,null,"Please use runtime APIs to add canvas sources, rather than including them in stylesheets.","source.canvas")];default:return td({key:`${p}.type`,value:l.type,valueSpec:{values:["vector","raster","raster-dem","geojson","video","image"]}})}}function Av(f){let l=f.value,p=f.styleSpec,g=p.light,b=f.style,I=[],M=Xn(l);if(l===void 0)return I;if(M!=="object")return I=I.concat([new Rt("light",l,`object expected, ${M} found`)]),I;for(let O in l){let k=O.match(/^(.*)-transition$/);I=I.concat(k&&g[k[1]]&&g[k[1]].transition?f.validateSpec({key:O,value:l[O],valueSpec:p.transition,validateSpec:f.validateSpec,style:b,styleSpec:p}):g[O]?f.validateSpec({key:O,value:l[O],valueSpec:g[O],validateSpec:f.validateSpec,style:b,styleSpec:p}):[new Rt(O,l[O],`unknown property "${O}"`)])}return I}function lI(f){let l=f.value,p=f.styleSpec,g=p.sky,b=f.style,I=Xn(l);if(l===void 0)return[];if(I!=="object")return[new Rt("sky",l,`object expected, ${I} found`)];let M=[];for(let O in l)M=M.concat(g[O]?f.validateSpec({key:O,value:l[O],valueSpec:g[O],style:b,styleSpec:p}):[new Rt(O,l[O],`unknown property "${O}"`)]);return M}function m4(f){let l=f.value,p=f.styleSpec,g=p.terrain,b=f.style,I=[],M=Xn(l);if(l===void 0)return I;if(M!=="object")return I=I.concat([new Rt("terrain",l,`object expected, ${M} found`)]),I;for(let O in l)I=I.concat(g[O]?f.validateSpec({key:O,value:l[O],valueSpec:g[O],validateSpec:f.validateSpec,style:b,styleSpec:p}):[new Rt(O,l[O],`unknown property "${O}"`)]);return I}function g4(f){let l=[],p=f.value,g=f.key;if(Array.isArray(p)){let b=[],I=[];for(let M in p)p[M].id&&b.includes(p[M].id)&&l.push(new Rt(g,p,`all the sprites' ids must be unique, but ${p[M].id} is duplicated`)),b.push(p[M].id),p[M].url&&I.includes(p[M].url)&&l.push(new Rt(g,p,`all the sprites' URLs must be unique, but ${p[M].url} is duplicated`)),I.push(p[M].url),l=l.concat(lc({key:`${g}[${M}]`,value:p[M],valueSpec:{id:{type:"string",required:!0},url:{type:"string",required:!0}},validateSpec:f.validateSpec}));return l}return Qc({key:g,value:p})}function Ov(f){return l=f.value,l&&l.constructor===Object?[]:[new Rt(f.key,f.value,`object expected, ${Xn(f.value)} found`)];var l}let uI={"*":()=>[],array:Px,boolean:function(f){let l=f.value,p=f.key,g=Xn(l);return g!=="boolean"?[new Rt(p,l,`boolean expected, ${g} found`)]:[]},number:N1,color:Dx,constants:aI,enum:td,filter:sI,function:u4,layer:h4,object:lc,source:Xl,light:Av,sky:lI,terrain:m4,projection:function(f){let l=f.value,p=f.styleSpec,g=p.projection,b=f.style,I=Xn(l);if(l===void 0)return[];if(I!=="object")return[new Rt("projection",l,`object expected, ${I} found`)];let M=[];for(let O in l)M=M.concat(g[O]?f.validateSpec({key:O,value:l[O],valueSpec:g[O],style:b,styleSpec:p}):[new Rt(O,l[O],`unknown property "${O}"`)]);return M},projectionDefinition:function(f){let l=f.key,p=f.value;p=p instanceof String?p.valueOf():p;let g=Xn(p);return g!=="array"||function(b){return Array.isArray(b)&&b.length===3&&typeof b[0]=="string"&&typeof b[1]=="string"&&typeof b[2]=="number"}(p)||function(b){return!!["interpolate","step","literal"].includes(b[0])}(p)?["array","string"].includes(g)?[]:[new Rt(l,p,`projection expected, invalid type "${g}" found`)]:[new Rt(l,p,`projection expected, invalid array ${JSON.stringify(p)} found`)]},string:Qc,formatted:function(f){return Qc(f).length===0?[]:Xm(f)},resolvedImage:function(f){return Qc(f).length===0?[]:Xm(f)},padding:function(f){let l=f.key,p=f.value;if(Xn(p)==="array"){if(p.length<1||p.length>4)return[new Rt(l,p,`padding requires 1 to 4 values; ${p.length} values found`)];let g={type:"number"},b=[];for(let I=0;I<p.length;I++)b=b.concat(f.validateSpec({key:`${l}[${I}]`,value:p[I],validateSpec:f.validateSpec,valueSpec:g}));return b}return N1({key:l,value:p,valueSpec:{}})},numberArray:function(f){let l=f.key,p=f.value;if(Xn(p)==="array"){let g={type:"number"};if(p.length<1)return[new Rt(l,p,"array length at least 1 expected, length 0 found")];let b=[];for(let I=0;I<p.length;I++)b=b.concat(f.validateSpec({key:`${l}[${I}]`,value:p[I],validateSpec:f.validateSpec,valueSpec:g}));return b}return N1({key:l,value:p,valueSpec:{}})},colorArray:function(f){let l=f.key,p=f.value;if(Xn(p)==="array"){if(p.length<1)return[new Rt(l,p,"array length at least 1 expected, length 0 found")];let g=[];for(let b=0;b<p.length;b++)g=g.concat(Dx({key:`${l}[${b}]`,value:p[b]}));return g}return Dx({key:l,value:p})},variableAnchorOffsetCollection:function(f){let l=f.key,p=f.value,g=Xn(p),b=f.styleSpec;if(g!=="array"||p.length<1||p.length%2!=0)return[new Rt(l,p,"variableAnchorOffsetCollection requires a non-empty array of even length")];let I=[];for(let M=0;M<p.length;M+=2)I=I.concat(td({key:`${l}[${M}]`,value:p[M],valueSpec:b.layout_symbol["text-anchor"]})),I=I.concat(Px({key:`${l}[${M+1}]`,value:p[M+1],valueSpec:{length:2,value:"number"},validateSpec:f.validateSpec,style:f.style,styleSpec:b}));return I},sprite:g4,state:Ov};function Pv(f){let l=f.value,p=f.valueSpec,g=f.styleSpec;return f.validateSpec=Pv,p.expression&&M1(Xi(l))?u4(f):p.expression&&Mx(zp(l))?Xm(f):p.type&&uI[p.type]?uI[p.type](f):lc(qo({},f,{valueSpec:p.type?g[p.type]:p}))}function v4(f){let l=f.value,p=f.key,g=Qc(f);return g.length||(l.indexOf("{fontstack}")===-1&&g.push(new Rt(p,l,"\"glyphs\" url must include a \"{fontstack}\" token")),l.indexOf("{range}")===-1&&g.push(new Rt(p,l,"\"glyphs\" url must include a \"{range}\" token"))),g}function Jl(f,l=Ae){let p=[];return p=p.concat(Pv({key:"",value:f,valueSpec:l.$root,styleSpec:l,style:f,validateSpec:Pv,objectElementValidators:{glyphs:v4,"*":()=>[]}})),f.constants&&(p=p.concat(aI({key:"constants",value:f.constants}))),Dv(p)}function ep(f){return function(l){return f(Dt(Te({},l),{validateSpec:Pv}))}}function Dv(f){return[].concat(f).sort((l,p)=>l.line-p.line)}function tp(f){return function(...l){return Dv(f.apply(this,l))}}Jl.source=tp(ep(Xl)),Jl.sprite=tp(ep(g4)),Jl.glyphs=tp(ep(v4)),Jl.light=tp(ep(Av)),Jl.sky=tp(ep(lI)),Jl.terrain=tp(ep(m4)),Jl.state=tp(ep(Ov)),Jl.layer=tp(ep(h4)),Jl.filter=tp(ep(sI)),Jl.paintProperty=tp(ep(f4)),Jl.layoutProperty=tp(ep(d4));let Nv=Jl,AB=Nv.light,L1=Nv.sky,OB=Nv.paintProperty,PB=Nv.layoutProperty;function k1(f,l){let p=!1;if(l&&l.length)for(let g of l)f.fire(new Be(new Error(g.message))),p=!0;return p}class R1{constructor(l,p,g){let b=this.cells=[];if(l instanceof ArrayBuffer){this.arrayBuffer=l;let M=new Int32Array(this.arrayBuffer);l=M[0],this.d=(p=M[1])+2*(g=M[2]);for(let k=0;k<this.d*this.d;k++){let F=M[3+k],U=M[3+k+1];b.push(F===U?null:M.subarray(F,U))}let O=M[3+b.length+1];this.keys=M.subarray(M[3+b.length],O),this.bboxes=M.subarray(O),this.insert=this._insertReadonly}else{this.d=p+2*g;for(let M=0;M<this.d*this.d;M++)b.push([]);this.keys=[],this.bboxes=[]}this.n=p,this.extent=l,this.padding=g,this.scale=p/l,this.uid=0;let I=g/p*l;this.min=-I,this.max=l+I}insert(l,p,g,b,I){this._forEachCell(p,g,b,I,this._insertCell,this.uid++,void 0,void 0),this.keys.push(l),this.bboxes.push(p),this.bboxes.push(g),this.bboxes.push(b),this.bboxes.push(I)}_insertReadonly(){throw new Error("Cannot insert into a GridIndex created from an ArrayBuffer.")}_insertCell(l,p,g,b,I,M){this.cells[I].push(M)}query(l,p,g,b,I){let M=this.min,O=this.max;if(l<=M&&p<=M&&O<=g&&O<=b&&!I)return Array.prototype.slice.call(this.keys);{let k=[];return this._forEachCell(l,p,g,b,this._queryCell,k,{},I),k}}_queryCell(l,p,g,b,I,M,O,k){let F=this.cells[I];if(F!==null){let U=this.keys,$=this.bboxes;for(let X=0;X<F.length;X++){let re=F[X];if(O[re]===void 0){let ne=4*re;(k?k($[ne+0],$[ne+1],$[ne+2],$[ne+3]):l<=$[ne+2]&&p<=$[ne+3]&&g>=$[ne+0]&&b>=$[ne+1])?(O[re]=!0,M.push(U[re])):O[re]=!1}}}}_forEachCell(l,p,g,b,I,M,O,k){let F=this._convertToCellCoord(l),U=this._convertToCellCoord(p),$=this._convertToCellCoord(g),X=this._convertToCellCoord(b);for(let re=F;re<=$;re++)for(let ne=U;ne<=X;ne++){let ae=this.d*ne+re;if((!k||k(this._convertFromCellCoord(re),this._convertFromCellCoord(ne),this._convertFromCellCoord(re+1),this._convertFromCellCoord(ne+1)))&&I.call(this,l,p,g,b,ae,M,O,k))return}}_convertFromCellCoord(l){return(l-this.padding)/this.scale}_convertToCellCoord(l){return Math.max(0,Math.min(this.d-1,Math.floor(l*this.scale)+this.padding))}toArrayBuffer(){if(this.arrayBuffer)return this.arrayBuffer;let l=this.cells,p=3+this.cells.length+1+1,g=0;for(let M=0;M<this.cells.length;M++)g+=this.cells[M].length;let b=new Int32Array(p+g+this.keys.length+this.bboxes.length);b[0]=this.extent,b[1]=this.n,b[2]=this.padding;let I=p;for(let M=0;M<l.length;M++){let O=l[M];b[3+M]=I,b.set(O,I),I+=O.length}return b[3+l.length]=I,b.set(this.keys,I),I+=this.keys.length,b[3+l.length+1]=I,b.set(this.bboxes,I),I+=this.bboxes.length,b.buffer}static serialize(l,p){let g=l.toArrayBuffer();return p&&p.push(g),{buffer:g}}static deserialize(l){return new R1(l.buffer)}}let rp={};function fr(f,l,p={}){if(rp[f])throw new Error(`${f} is already registered.`);Object.defineProperty(l,"_classRegistryKey",{value:f,writeable:!1}),rp[f]={klass:l,omit:p.omit||[],shallow:p.shallow||[]}}fr("Object",Object),fr("Set",Set),fr("TransferableGridIndex",R1),fr("Color",vn),fr("Error",Error),fr("AJAXError",we),fr("ResolvedImage",Bs),fr("StylePropertyFunction",O1),fr("StyleExpression",eI,{omit:["_evaluator"]}),fr("ZoomDependentExpression",tI),fr("ZoomConstantExpression",A1),fr("CompoundExpression",sc,{omit:["_evaluate"]});for(let f in Iv)Iv[f]._classRegistryKey||fr(`Expression_${f}`,Iv[f]);function cI(f){return f&&typeof ArrayBuffer!="undefined"&&(f instanceof ArrayBuffer||f.constructor&&f.constructor.name==="ArrayBuffer")}function Nx(f){return f.$name||f.constructor._classRegistryKey}function pI(f){return!function(l){if(l===null||typeof l!="object")return!1;let p=Nx(l);return!(!p||p==="Object")}(f)&&(f==null||typeof f=="boolean"||typeof f=="number"||typeof f=="string"||f instanceof Boolean||f instanceof Number||f instanceof String||f instanceof Date||f instanceof RegExp||f instanceof Blob||f instanceof Error||cI(f)||Ut(f)||ArrayBuffer.isView(f)||f instanceof ImageData)}function Lv(f,l){if(pI(f))return(cI(f)||Ut(f))&&l&&l.push(f),ArrayBuffer.isView(f)&&l&&l.push(f.buffer),f instanceof ImageData&&l&&l.push(f.data.buffer),f;if(Array.isArray(f)){let I=[];for(let M of f)I.push(Lv(M,l));return I}if(typeof f!="object")throw new Error("can't serialize object of type "+typeof f);let p=Nx(f);if(!p)throw new Error(`can't serialize object of unregistered class ${f.constructor.name}`);if(!rp[p])throw new Error(`${p} is not registered.`);let{klass:g}=rp[p],b=g.serialize?g.serialize(f,l):{};if(g.serialize){if(l&&b===l[l.length-1])throw new Error("statically serialized object won't survive transfer of $name property")}else{for(let I in f){if(!f.hasOwnProperty(I)||rp[p].omit.indexOf(I)>=0)continue;let M=f[I];b[I]=rp[p].shallow.indexOf(I)>=0?M:Lv(M,l)}f instanceof Error&&(b.message=f.message)}if(b.$name)throw new Error("$name property is reserved for worker serialization logic.");return p!=="Object"&&(b.$name=p),b}function Jm(f){if(pI(f))return f;if(Array.isArray(f))return f.map(Jm);if(typeof f!="object")throw new Error("can't deserialize object of type "+typeof f);let l=Nx(f)||"Object";if(!rp[l])throw new Error(`can't deserialize unregistered class ${l}`);let{klass:p}=rp[l];if(!p)throw new Error(`can't deserialize unregistered class ${l}`);if(p.deserialize)return p.deserialize(f);let g=Object.create(p.prototype);for(let b of Object.keys(f)){if(b==="$name")continue;let I=f[b];g[b]=rp[l].shallow.indexOf(b)>=0?I:Jm(I)}return g}class Lx{constructor(){this.first=!0}update(l,p){let g=Math.floor(l);return this.first?(this.first=!1,this.lastIntegerZoom=g,this.lastIntegerZoomTime=0,this.lastZoom=l,this.lastFloorZoom=g,!0):(this.lastFloorZoom>g?(this.lastIntegerZoom=g+1,this.lastIntegerZoomTime=p):this.lastFloorZoom<g&&(this.lastIntegerZoom=g,this.lastIntegerZoomTime=p),l!==this.lastZoom&&(this.lastZoom=l,this.lastFloorZoom=g,!0))}}let ro={"Latin-1 Supplement":f=>f>=128&&f<=255,"Hangul Jamo":f=>f>=4352&&f<=4607,Khmer:f=>f>=6016&&f<=6143,"General Punctuation":f=>f>=8192&&f<=8303,"Letterlike Symbols":f=>f>=8448&&f<=8527,"Number Forms":f=>f>=8528&&f<=8591,"Miscellaneous Technical":f=>f>=8960&&f<=9215,"Control Pictures":f=>f>=9216&&f<=9279,"Optical Character Recognition":f=>f>=9280&&f<=9311,"Enclosed Alphanumerics":f=>f>=9312&&f<=9471,"Geometric Shapes":f=>f>=9632&&f<=9727,"Miscellaneous Symbols":f=>f>=9728&&f<=9983,"Miscellaneous Symbols and Arrows":f=>f>=11008&&f<=11263,"Ideographic Description Characters":f=>f>=12272&&f<=12287,"CJK Symbols and Punctuation":f=>f>=12288&&f<=12351,Hiragana:f=>f>=12352&&f<=12447,Katakana:f=>f>=12448&&f<=12543,Kanbun:f=>f>=12688&&f<=12703,"CJK Strokes":f=>f>=12736&&f<=12783,"Enclosed CJK Letters and Months":f=>f>=12800&&f<=13055,"CJK Compatibility":f=>f>=13056&&f<=13311,"Yijing Hexagram Symbols":f=>f>=19904&&f<=19967,"CJK Unified Ideographs":f=>f>=19968&&f<=40959,"Hangul Syllables":f=>f>=44032&&f<=55215,"Private Use Area":f=>f>=57344&&f<=63743,"Vertical Forms":f=>f>=65040&&f<=65055,"CJK Compatibility Forms":f=>f>=65072&&f<=65103,"Small Form Variants":f=>f>=65104&&f<=65135,"Halfwidth and Fullwidth Forms":f=>f>=65280&&f<=65519};function kx(f){for(let l of f)if(dI(l.charCodeAt(0)))return!0;return!1}function DB(f){for(let l of f)if(!y4(l.charCodeAt(0)))return!1;return!0}function Rx(f){let l=f.map(p=>{try{return new RegExp(`\\p{sc=${p}}`,"u").source}catch(g){return null}}).filter(p=>p);return new RegExp(l.join("|"),"u")}let NB=Rx(["Arab","Dupl","Mong","Ougr","Syrc"]);function y4(f){return!NB.test(String.fromCodePoint(f))}let fI=Rx(["Bopo","Hani","Hira","Kana","Kits","Nshu","Tang","Yiii"]);function dI(f){return!(f!==746&&f!==747&&(f<4352||!(ro["CJK Compatibility Forms"](f)&&!(f>=65097&&f<=65103)||ro["CJK Compatibility"](f)||ro["CJK Strokes"](f)||!(!ro["CJK Symbols and Punctuation"](f)||f>=12296&&f<=12305||f>=12308&&f<=12319||f===12336)||ro["Enclosed CJK Letters and Months"](f)||ro["Ideographic Description Characters"](f)||ro.Kanbun(f)||ro.Katakana(f)&&f!==12540||!(!ro["Halfwidth and Fullwidth Forms"](f)||f===65288||f===65289||f===65293||f>=65306&&f<=65310||f===65339||f===65341||f===65343||f>=65371&&f<=65503||f===65507||f>=65512&&f<=65519)||!(!ro["Small Form Variants"](f)||f>=65112&&f<=65118||f>=65123&&f<=65126)||ro["Vertical Forms"](f)||ro["Yijing Hexagram Symbols"](f)||new RegExp("\\p{sc=Cans}","u").test(String.fromCodePoint(f))||new RegExp("\\p{sc=Hang}","u").test(String.fromCodePoint(f))||fI.test(String.fromCodePoint(f)))))}function _4(f){return!(dI(f)||function(l){return!!(ro["Latin-1 Supplement"](l)&&(l===167||l===169||l===174||l===177||l===188||l===189||l===190||l===215||l===247)||ro["General Punctuation"](l)&&(l===8214||l===8224||l===8225||l===8240||l===8241||l===8251||l===8252||l===8258||l===8263||l===8264||l===8265||l===8273)||ro["Letterlike Symbols"](l)||ro["Number Forms"](l)||ro["Miscellaneous Technical"](l)&&(l>=8960&&l<=8967||l>=8972&&l<=8991||l>=8996&&l<=9e3||l===9003||l>=9085&&l<=9114||l>=9150&&l<=9165||l===9167||l>=9169&&l<=9179||l>=9186&&l<=9215)||ro["Control Pictures"](l)&&l!==9251||ro["Optical Character Recognition"](l)||ro["Enclosed Alphanumerics"](l)||ro["Geometric Shapes"](l)||ro["Miscellaneous Symbols"](l)&&!(l>=9754&&l<=9759)||ro["Miscellaneous Symbols and Arrows"](l)&&(l>=11026&&l<=11055||l>=11088&&l<=11097||l>=11192&&l<=11243)||ro["CJK Symbols and Punctuation"](l)||ro.Katakana(l)||ro["Private Use Area"](l)||ro["CJK Compatibility Forms"](l)||ro["Small Form Variants"](l)||ro["Halfwidth and Fullwidth Forms"](l)||l===8734||l===8756||l===8757||l>=9984&&l<=10087||l>=10102&&l<=10131||l===65532||l===65533)}(f))}let b4=Rx(["Adlm","Arab","Armi","Avst","Chrs","Cprt","Egyp","Elym","Gara","Hatr","Hebr","Hung","Khar","Lydi","Mand","Mani","Mend","Merc","Mero","Narb","Nbat","Nkoo","Orkh","Palm","Phli","Phlp","Phnx","Prti","Rohg","Samr","Sarb","Sogo","Syrc","Thaa","Todr","Yezi"]);function hI(f){return b4.test(String.fromCodePoint(f))}function x4(f,l){return!(!l&&hI(f)||f>=2304&&f<=3583||f>=3840&&f<=4255||ro.Khmer(f))}function w4(f){for(let l of f)if(hI(l.charCodeAt(0)))return!0;return!1}let np=new class{constructor(){this.TIMEOUT=5e3,this.applyArabicShaping=null,this.processBidirectionalText=null,this.processStyledBidirectionalText=null,this.pluginStatus="unavailable",this.pluginURL=null,this.loadScriptResolve=()=>{}}setState(f){this.pluginStatus=f.pluginStatus,this.pluginURL=f.pluginURL}getState(){return{pluginStatus:this.pluginStatus,pluginURL:this.pluginURL}}setMethods(f){if(np.isParsed())throw new Error("RTL text plugin already registered.");this.applyArabicShaping=f.applyArabicShaping,this.processBidirectionalText=f.processBidirectionalText,this.processStyledBidirectionalText=f.processStyledBidirectionalText,this.loadScriptResolve()}isParsed(){return this.applyArabicShaping!=null&&this.processBidirectionalText!=null&&this.processStyledBidirectionalText!=null}getRTLTextPluginStatus(){return this.pluginStatus}syncState(f,l){return i(this,void 0,void 0,function*(){if(this.isParsed())return this.getState();if(f.pluginStatus!=="loading")return this.setState(f),f;let p=f.pluginURL,g=new Promise(I=>{this.loadScriptResolve=I});l(p);let b=new Promise(I=>setTimeout(()=>I(),this.TIMEOUT));if(yield Promise.race([g,b]),this.isParsed()){let I={pluginStatus:"loaded",pluginURL:p};return this.setState(I),I}throw this.setState({pluginStatus:"error",pluginURL:""}),new Error(`RTL Text Plugin failed to import scripts from ${p}`)})}};class ii{constructor(l,p){this.zoom=l,p?(this.now=p.now||0,this.fadeDuration=p.fadeDuration||0,this.zoomHistory=p.zoomHistory||new Lx,this.transition=p.transition||{},this.globalState=p.globalState||{}):(this.now=0,this.fadeDuration=0,this.zoomHistory=new Lx,this.transition={},this.globalState={})}isSupportedScript(l){return function(p,g){for(let b of p)if(!x4(b.charCodeAt(0),g))return!1;return!0}(l,np.getRTLTextPluginStatus()==="loaded")}crossFadingFactor(){return this.fadeDuration===0?1:Math.min((this.now-this.zoomHistory.lastIntegerZoomTime)/this.fadeDuration,1)}getCrossfadeParameters(){let l=this.zoom,p=l-Math.floor(l),g=this.crossFadingFactor();return l>this.zoomHistory.lastIntegerZoom?{fromScale:2,toScale:1,t:p+(1-p)*g}:{fromScale:.5,toScale:1,t:1-(1-g)*p}}}class kv{constructor(l,p){this.property=l,this.value=p,this.expression=function(g,b){if(M1(g))return new O1(g,b);if(Mx(g)){let I=a4(g,b);if(I.result==="error")throw new Error(I.value.map(M=>`${M.key}: ${M.message}`).join(", "));return I.value}{let I=g;return b.type==="color"&&typeof g=="string"?I=vn.parse(g):b.type!=="padding"||typeof g!="number"&&!Array.isArray(g)?b.type!=="numberArray"||typeof g!="number"&&!Array.isArray(g)?b.type!=="colorArray"||typeof g!="string"&&!Array.isArray(g)?b.type==="variableAnchorOffsetCollection"&&Array.isArray(g)?I=hl.parse(g):b.type==="projectionDefinition"&&typeof g=="string"&&(I=Vs.parse(g)):I=Di.parse(g):I=Ki.parse(g):I=as.parse(g),{globalStateRefs:new Set,kind:"constant",evaluate:()=>I}}}(p===void 0?l.specification.default:p,l.specification),this._evaluate=this.expression.evaluate}isDataDriven(){return this.expression.kind==="source"||this.expression.kind==="composite"}getGlobalStateRefs(){return this.expression.globalStateRefs||new Set}possiblyEvaluate(l,p,g){return this.property.possiblyEvaluate(this,l,p,g)}setGlobalState(l){this.expression.evaluate=(p,g,b,I,M,O)=>(p.globalState=l,this._evaluate.call(this.expression,p,g,b,I,M,O))}}class mI{constructor(l){this.property=l,this.value=new kv(l,void 0)}transitioned(l,p){return new gI(this.property,this.value,p,De({},l.transition,this.transition),l.now)}untransitioned(){return new gI(this.property,this.value,null,{},0)}}class E4{constructor(l){this._properties=l,this._values=Object.create(l.defaultTransitionablePropertyValues)}getValue(l){return mt(this._values[l].value.value)}setValue(l,p){Object.prototype.hasOwnProperty.call(this._values,l)||(this._values[l]=new mI(this._values[l].property)),this._values[l].value=new kv(this._values[l].property,p===null?void 0:mt(p))}getTransition(l){return mt(this._values[l].transition)}setTransition(l,p){Object.prototype.hasOwnProperty.call(this._values,l)||(this._values[l]=new mI(this._values[l].property)),this._values[l].transition=mt(p)||void 0}serialize(){let l={};for(let p of Object.keys(this._values)){let g=this.getValue(p);g!==void 0&&(l[p]=g);let b=this.getTransition(p);b!==void 0&&(l[`${p}-transition`]=b)}return l}transitioned(l,p){let g=new vI(this._properties);for(let b of Object.keys(this._values))g._values[b]=this._values[b].transitioned(l,p._values[b]);return g}untransitioned(){let l=new vI(this._properties);for(let p of Object.keys(this._values))l._values[p]=this._values[p].untransitioned();return l}}class gI{constructor(l,p,g,b,I){this.property=l,this.value=p,this.begin=I+b.delay||0,this.end=this.begin+b.duration||0,l.specification.transition&&(b.delay||b.duration)&&(this.prior=g)}possiblyEvaluate(l,p,g){let b=l.now||0,I=this.value.possiblyEvaluate(l,p,g),M=this.prior;if(M){if(b>this.end)return this.prior=null,I;if(this.value.isDataDriven())return this.prior=null,I;if(b<this.begin)return M.possiblyEvaluate(l,p,g);{let O=(b-this.begin)/(this.end-this.begin);return this.property.interpolate(M.possiblyEvaluate(l,p,g),I,Tt(O))}}return I}}class vI{constructor(l){this._properties=l,this._values=Object.create(l.defaultTransitioningPropertyValues)}possiblyEvaluate(l,p,g){let b=new jx(this._properties);for(let I of Object.keys(this._values))b._values[I]=this._values[I].possiblyEvaluate(l,p,g);return b}hasTransition(){for(let l of Object.keys(this._values))if(this._values[l].prior)return!0;return!1}}class S4{constructor(l){this._properties=l,this._values=Object.create(l.defaultPropertyValues),this._globalState={}}hasValue(l){return this._values[l].value!==void 0}getValue(l){return mt(this._values[l].value)}setValue(l,p){this._values[l]=new kv(this._values[l].property,p===null?void 0:mt(p)),this._values[l].setGlobalState(this._globalState)}serialize(){let l={};for(let p of Object.keys(this._values)){let g=this.getValue(p);g!==void 0&&(l[p]=g)}return l}possiblyEvaluate(l,p,g){let b=new jx(this._properties);for(let I of Object.keys(this._values))b._values[I]=this._values[I].possiblyEvaluate(l,p,g);return b}setGlobalState(l){this._globalState=l;for(let p of Object.values(this._values))p.setGlobalState(l)}}class Fp{constructor(l,p,g){this.property=l,this.value=p,this.parameters=g}isConstant(){return this.value.kind==="constant"}constantOr(l){return this.value.kind==="constant"?this.value.value:l}evaluate(l,p,g,b){return this.property.evaluate(this.value,this.parameters,l,p,g,b)}}class jx{constructor(l){this._properties=l,this._values=Object.create(l.defaultPossiblyEvaluatedValues)}get(l){return this._values[l]}}class Sr{constructor(l){this.specification=l}possiblyEvaluate(l,p){if(l.isDataDriven())throw new Error("Value should not be data driven");return l.expression.evaluate(p)}interpolate(l,p,g){let b=qp[this.specification.type];return b?b(l,p,g):l}}class Kr{constructor(l,p){this.specification=l,this.overrides=p}possiblyEvaluate(l,p,g,b){return new Fp(this,l.expression.kind==="constant"||l.expression.kind==="camera"?{kind:"constant",value:l.expression.evaluate(p,null,{},g,b)}:l.expression,p)}interpolate(l,p,g){if(l.value.kind!=="constant"||p.value.kind!=="constant")return l;if(l.value.value===void 0||p.value.value===void 0)return new Fp(this,{kind:"constant",value:void 0},l.parameters);let b=qp[this.specification.type];if(b){let I=b(l.value.value,p.value.value,g);return new Fp(this,{kind:"constant",value:I},l.parameters)}return l}evaluate(l,p,g,b,I,M){return l.kind==="constant"?l.value:l.evaluate(p,g,b,I,M)}}class qx extends Kr{possiblyEvaluate(l,p,g,b){if(l.value===void 0)return new Fp(this,{kind:"constant",value:void 0},p);if(l.expression.kind==="constant"){let I=l.expression.evaluate(p,null,{},g,b),M=l.property.specification.type==="resolvedImage"&&typeof I!="string"?I.name:I,O=this._calculate(M,M,M,p);return new Fp(this,{kind:"constant",value:O},p)}if(l.expression.kind==="camera"){let I=this._calculate(l.expression.evaluate({zoom:p.zoom-1}),l.expression.evaluate({zoom:p.zoom}),l.expression.evaluate({zoom:p.zoom+1}),p);return new Fp(this,{kind:"constant",value:I},p)}return new Fp(this,l.expression,p)}evaluate(l,p,g,b,I,M){if(l.kind==="source"){let O=l.evaluate(p,g,b,I,M);return this._calculate(O,O,O,p)}return l.kind==="composite"?this._calculate(l.evaluate({zoom:Math.floor(p.zoom)-1},g,b),l.evaluate({zoom:Math.floor(p.zoom)},g,b),l.evaluate({zoom:Math.floor(p.zoom)+1},g,b),p):l.value}_calculate(l,p,g,b){return b.zoom>b.zoomHistory.lastIntegerZoom?{from:l,to:p}:{from:g,to:p}}interpolate(l){return l}}class hh{constructor(l){this.specification=l}possiblyEvaluate(l,p,g,b){if(l.value!==void 0){if(l.expression.kind==="constant"){let I=l.expression.evaluate(p,null,{},g,b);return this._calculate(I,I,I,p)}return this._calculate(l.expression.evaluate(new ii(Math.floor(p.zoom-1),p)),l.expression.evaluate(new ii(Math.floor(p.zoom),p)),l.expression.evaluate(new ii(Math.floor(p.zoom+1),p)),p)}}_calculate(l,p,g,b){return b.zoom>b.zoomHistory.lastIntegerZoom?{from:l,to:p}:{from:g,to:p}}interpolate(l){return l}}class zx{constructor(l){this.specification=l}possiblyEvaluate(l,p,g,b){return!!l.expression.evaluate(p,null,{},g,b)}interpolate(){return!1}}class ml{constructor(l){this.properties=l,this.defaultPropertyValues={},this.defaultTransitionablePropertyValues={},this.defaultTransitioningPropertyValues={},this.defaultPossiblyEvaluatedValues={},this.overridableProperties=[];for(let p in l){let g=l[p];g.specification.overridable&&this.overridableProperties.push(p);let b=this.defaultPropertyValues[p]=new kv(g,void 0),I=this.defaultTransitionablePropertyValues[p]=new mI(g);this.defaultTransitioningPropertyValues[p]=I.untransitioned(),this.defaultPossiblyEvaluatedValues[p]=b.possiblyEvaluate({})}}}fr("DataDrivenProperty",Kr),fr("DataConstantProperty",Sr),fr("CrossFadedDataDrivenProperty",qx),fr("CrossFadedProperty",hh),fr("ColorRampProperty",zx);let T4="-transition";class uc extends gt{constructor(l,p){if(super(),this.id=l.id,this.type=l.type,this._featureFilter={filter:()=>!0,needGeometry:!1,getGlobalStateRefs:()=>new Set},l.type!=="custom"&&(this.metadata=l.metadata,this.minzoom=l.minzoom,this.maxzoom=l.maxzoom,this._globalState={},l.type!=="background"&&(this.source=l.source,this.sourceLayer=l["source-layer"],this.filter=l.filter,this._featureFilter=Zm(l.filter)),p.layout&&(this._unevaluatedLayout=new S4(p.layout)),p.paint)){this._transitionablePaint=new E4(p.paint);for(let g in l.paint)this.setPaintProperty(g,l.paint[g],{validate:!1});for(let g in l.layout)this.setLayoutProperty(g,l.layout[g],{validate:!1});this._transitioningPaint=this._transitionablePaint.untransitioned(),this.paint=new jx(p.paint)}}setFilter(l){this.filter=l,this._featureFilter=Zm(l)}getCrossfadeParameters(){return this._crossfadeParameters}getLayoutProperty(l){return l==="visibility"?this.visibility:this._unevaluatedLayout.getValue(l)}getLayoutAffectingGlobalStateRefs(){let l=new Set;if(this._unevaluatedLayout)for(let p in this._unevaluatedLayout._values){let g=this._unevaluatedLayout._values[p];for(let b of g.getGlobalStateRefs())l.add(b)}for(let p of this._featureFilter.getGlobalStateRefs())l.add(p);return l}getPaintAffectingGlobalStateRefs(){var l;let p=new globalThis.Map;if(this._transitionablePaint)for(let g in this._transitionablePaint._values){let b=this._transitionablePaint._values[g].value;for(let I of b.getGlobalStateRefs()){let M=(l=p.get(I))!==null&&l!==void 0?l:[];M.push({name:g,value:b.value}),p.set(I,M)}}return p}setLayoutProperty(l,p,g={}){p!=null&&this._validate(PB,`layers.${this.id}.layout.${l}`,l,p,g)||(l!=="visibility"?this._unevaluatedLayout.setValue(l,p):this.visibility=p)}getPaintProperty(l){return l.endsWith(T4)?this._transitionablePaint.getTransition(l.slice(0,-11)):this._transitionablePaint.getValue(l)}setPaintProperty(l,p,g={}){if(p!=null&&this._validate(OB,`layers.${this.id}.paint.${l}`,l,p,g))return!1;if(l.endsWith(T4))return this._transitionablePaint.setTransition(l.slice(0,-11),p||void 0),!1;{let b=this._transitionablePaint._values[l],I=b.property.specification["property-type"]==="cross-faded-data-driven",M=b.value.isDataDriven(),O=b.value;this._transitionablePaint.setValue(l,p),this._handleSpecialPaintPropertyUpdate(l);let k=this._transitionablePaint._values[l].value;return k.isDataDriven()||M||I||this._handleOverridablePaintPropertyUpdate(l,O,k)}}_handleSpecialPaintPropertyUpdate(l){}_handleOverridablePaintPropertyUpdate(l,p,g){return!1}isHidden(l){return!!(this.minzoom&&l<this.minzoom)||!!(this.maxzoom&&l>=this.maxzoom)||this.visibility==="none"}updateTransitions(l){this._transitioningPaint=this._transitionablePaint.transitioned(l,this._transitioningPaint)}hasTransition(){return this._transitioningPaint.hasTransition()}recalculate(l,p){l.globalState=this._globalState,l.getCrossfadeParameters&&(this._crossfadeParameters=l.getCrossfadeParameters()),this._unevaluatedLayout&&(this.layout=this._unevaluatedLayout.possiblyEvaluate(l,void 0,p)),this.paint=this._transitioningPaint.possiblyEvaluate(l,void 0,p)}setGlobalState(l){this._globalState=l,this._unevaluatedLayout&&this._unevaluatedLayout.setGlobalState(l)}serialize(){let l={id:this.id,type:this.type,source:this.source,"source-layer":this.sourceLayer,metadata:this.metadata,minzoom:this.minzoom,maxzoom:this.maxzoom,filter:this.filter,layout:this._unevaluatedLayout&&this._unevaluatedLayout.serialize(),paint:this._transitionablePaint&&this._transitionablePaint.serialize()};return this.visibility&&(l.layout=l.layout||{},l.layout.visibility=this.visibility),ft(l,(p,g)=>!(p===void 0||g==="layout"&&!Object.keys(p).length||g==="paint"&&!Object.keys(p).length))}_validate(l,p,g,b,I={}){return(!I||I.validate!==!1)&&k1(this,l.call(Nv,{key:p,layerType:this.type,objectKey:g,value:b,styleSpec:Ae,style:{glyphs:!0,sprite:!0}}))}is3D(){return!1}isTileClipped(){return!1}hasOffscreenPass(){return!1}resize(){}isStateDependent(){for(let l in this.paint._values){let p=this.paint.get(l);if(p instanceof Fp&&fh(p.property.specification)&&(p.value.kind==="source"||p.value.kind==="composite")&&p.value.isStateDependent)return!0}return!1}}let LB={Int8:Int8Array,Uint8:Uint8Array,Int16:Int16Array,Uint16:Uint16Array,Int32:Int32Array,Uint32:Uint32Array,Float32:Float32Array};class j1{constructor(l,p){this._structArray=l,this._pos1=p*this.size,this._pos2=this._pos1/2,this._pos4=this._pos1/4,this._pos8=this._pos1/8}}class Jo{constructor(){this.isTransferred=!1,this.capacity=-1,this.resize(0)}static serialize(l,p){return l._trim(),p&&(l.isTransferred=!0,p.push(l.arrayBuffer)),{length:l.length,arrayBuffer:l.arrayBuffer}}static deserialize(l){let p=Object.create(this.prototype);return p.arrayBuffer=l.arrayBuffer,p.length=l.length,p.capacity=l.arrayBuffer.byteLength/p.bytesPerElement,p._refreshViews(),p}_trim(){this.length!==this.capacity&&(this.capacity=this.length,this.arrayBuffer=this.arrayBuffer.slice(0,this.length*this.bytesPerElement),this._refreshViews())}clear(){this.length=0}resize(l){this.reserve(l),this.length=l}reserve(l){if(l>this.capacity){this.capacity=Math.max(l,Math.floor(5*this.capacity),128),this.arrayBuffer=new ArrayBuffer(this.capacity*this.bytesPerElement);let p=this.uint8;this._refreshViews(),p&&this.uint8.set(p)}}_refreshViews(){throw new Error("_refreshViews() must be implemented by each concrete StructArray layout")}}function pa(f,l=1){let p=0,g=0;return{members:f.map(b=>{let I=LB[b.type].BYTES_PER_ELEMENT,M=p=Fx(p,Math.max(l,I)),O=b.components||1;return g=Math.max(g,I),p+=I*O,{name:b.name,type:b.type,components:O,offset:M}}),size:Fx(p,Math.max(g,l)),alignment:l}}function Fx(f,l){return Math.ceil(f/l)*l}class Rv extends Jo{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(l,p){let g=this.length;return this.resize(g+1),this.emplace(g,l,p)}emplace(l,p,g){let b=2*l;return this.int16[b+0]=p,this.int16[b+1]=g,l}}Rv.prototype.bytesPerElement=4,fr("StructArrayLayout2i4",Rv);class jv extends Jo{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(l,p,g){let b=this.length;return this.resize(b+1),this.emplace(b,l,p,g)}emplace(l,p,g,b){let I=3*l;return this.int16[I+0]=p,this.int16[I+1]=g,this.int16[I+2]=b,l}}jv.prototype.bytesPerElement=6,fr("StructArrayLayout3i6",jv);class yI extends Jo{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(l,p,g,b){let I=this.length;return this.resize(I+1),this.emplace(I,l,p,g,b)}emplace(l,p,g,b,I){let M=4*l;return this.int16[M+0]=p,this.int16[M+1]=g,this.int16[M+2]=b,this.int16[M+3]=I,l}}yI.prototype.bytesPerElement=8,fr("StructArrayLayout4i8",yI);class qv extends Jo{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(l,p,g,b,I,M){let O=this.length;return this.resize(O+1),this.emplace(O,l,p,g,b,I,M)}emplace(l,p,g,b,I,M,O){let k=6*l;return this.int16[k+0]=p,this.int16[k+1]=g,this.int16[k+2]=b,this.int16[k+3]=I,this.int16[k+4]=M,this.int16[k+5]=O,l}}qv.prototype.bytesPerElement=12,fr("StructArrayLayout2i4i12",qv);class Qm extends Jo{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(l,p,g,b,I,M){let O=this.length;return this.resize(O+1),this.emplace(O,l,p,g,b,I,M)}emplace(l,p,g,b,I,M,O){let k=4*l,F=8*l;return this.int16[k+0]=p,this.int16[k+1]=g,this.uint8[F+4]=b,this.uint8[F+5]=I,this.uint8[F+6]=M,this.uint8[F+7]=O,l}}Qm.prototype.bytesPerElement=8,fr("StructArrayLayout2i4ub8",Qm);class q1 extends Jo{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(l,p){let g=this.length;return this.resize(g+1),this.emplace(g,l,p)}emplace(l,p,g){let b=2*l;return this.float32[b+0]=p,this.float32[b+1]=g,l}}q1.prototype.bytesPerElement=8,fr("StructArrayLayout2f8",q1);class Ux extends Jo{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(l,p,g,b,I,M,O,k,F,U){let $=this.length;return this.resize($+1),this.emplace($,l,p,g,b,I,M,O,k,F,U)}emplace(l,p,g,b,I,M,O,k,F,U,$){let X=10*l;return this.uint16[X+0]=p,this.uint16[X+1]=g,this.uint16[X+2]=b,this.uint16[X+3]=I,this.uint16[X+4]=M,this.uint16[X+5]=O,this.uint16[X+6]=k,this.uint16[X+7]=F,this.uint16[X+8]=U,this.uint16[X+9]=$,l}}Ux.prototype.bytesPerElement=20,fr("StructArrayLayout10ui20",Ux);class eg extends Jo{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(l,p,g,b,I,M,O,k,F,U,$,X){let re=this.length;return this.resize(re+1),this.emplace(re,l,p,g,b,I,M,O,k,F,U,$,X)}emplace(l,p,g,b,I,M,O,k,F,U,$,X,re){let ne=12*l;return this.int16[ne+0]=p,this.int16[ne+1]=g,this.int16[ne+2]=b,this.int16[ne+3]=I,this.uint16[ne+4]=M,this.uint16[ne+5]=O,this.uint16[ne+6]=k,this.uint16[ne+7]=F,this.int16[ne+8]=U,this.int16[ne+9]=$,this.int16[ne+10]=X,this.int16[ne+11]=re,l}}eg.prototype.bytesPerElement=24,fr("StructArrayLayout4i4ui4i24",eg);class _I extends Jo{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(l,p,g){let b=this.length;return this.resize(b+1),this.emplace(b,l,p,g)}emplace(l,p,g,b){let I=3*l;return this.float32[I+0]=p,this.float32[I+1]=g,this.float32[I+2]=b,l}}_I.prototype.bytesPerElement=12,fr("StructArrayLayout3f12",_I);class bI extends Jo{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer)}emplaceBack(l){let p=this.length;return this.resize(p+1),this.emplace(p,l)}emplace(l,p){return this.uint32[1*l+0]=p,l}}bI.prototype.bytesPerElement=4,fr("StructArrayLayout1ul4",bI);class Bx extends Jo{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(l,p,g,b,I,M,O,k,F){let U=this.length;return this.resize(U+1),this.emplace(U,l,p,g,b,I,M,O,k,F)}emplace(l,p,g,b,I,M,O,k,F,U){let $=10*l,X=5*l;return this.int16[$+0]=p,this.int16[$+1]=g,this.int16[$+2]=b,this.int16[$+3]=I,this.int16[$+4]=M,this.int16[$+5]=O,this.uint32[X+3]=k,this.uint16[$+8]=F,this.uint16[$+9]=U,l}}Bx.prototype.bytesPerElement=20,fr("StructArrayLayout6i1ul2ui20",Bx);class xI extends Jo{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(l,p,g,b,I,M){let O=this.length;return this.resize(O+1),this.emplace(O,l,p,g,b,I,M)}emplace(l,p,g,b,I,M,O){let k=6*l;return this.int16[k+0]=p,this.int16[k+1]=g,this.int16[k+2]=b,this.int16[k+3]=I,this.int16[k+4]=M,this.int16[k+5]=O,l}}xI.prototype.bytesPerElement=12,fr("StructArrayLayout2i2i2i12",xI);class S extends Jo{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(l,p,g,b,I){let M=this.length;return this.resize(M+1),this.emplace(M,l,p,g,b,I)}emplace(l,p,g,b,I,M){let O=4*l,k=8*l;return this.float32[O+0]=p,this.float32[O+1]=g,this.float32[O+2]=b,this.int16[k+6]=I,this.int16[k+7]=M,l}}S.prototype.bytesPerElement=16,fr("StructArrayLayout2f1f2i16",S);class s extends Jo{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(l,p,g,b,I,M){let O=this.length;return this.resize(O+1),this.emplace(O,l,p,g,b,I,M)}emplace(l,p,g,b,I,M,O){let k=16*l,F=4*l,U=8*l;return this.uint8[k+0]=p,this.uint8[k+1]=g,this.float32[F+1]=b,this.float32[F+2]=I,this.int16[U+6]=M,this.int16[U+7]=O,l}}s.prototype.bytesPerElement=16,fr("StructArrayLayout2ub2f2i16",s);class d extends Jo{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(l,p,g){let b=this.length;return this.resize(b+1),this.emplace(b,l,p,g)}emplace(l,p,g,b){let I=3*l;return this.uint16[I+0]=p,this.uint16[I+1]=g,this.uint16[I+2]=b,l}}d.prototype.bytesPerElement=6,fr("StructArrayLayout3ui6",d);class v extends Jo{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(l,p,g,b,I,M,O,k,F,U,$,X,re,ne,ae,he,Se){let Xe=this.length;return this.resize(Xe+1),this.emplace(Xe,l,p,g,b,I,M,O,k,F,U,$,X,re,ne,ae,he,Se)}emplace(l,p,g,b,I,M,O,k,F,U,$,X,re,ne,ae,he,Se,Xe){let je=24*l,Ve=12*l,st=48*l;return this.int16[je+0]=p,this.int16[je+1]=g,this.uint16[je+2]=b,this.uint16[je+3]=I,this.uint32[Ve+2]=M,this.uint32[Ve+3]=O,this.uint32[Ve+4]=k,this.uint16[je+10]=F,this.uint16[je+11]=U,this.uint16[je+12]=$,this.float32[Ve+7]=X,this.float32[Ve+8]=re,this.uint8[st+36]=ne,this.uint8[st+37]=ae,this.uint8[st+38]=he,this.uint32[Ve+10]=Se,this.int16[je+22]=Xe,l}}v.prototype.bytesPerElement=48,fr("StructArrayLayout2i2ui3ul3ui2f3ub1ul1i48",v);class x extends Jo{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(l,p,g,b,I,M,O,k,F,U,$,X,re,ne,ae,he,Se,Xe,je,Ve,st,vt,kt,er,Ht,Xt,Ar,Kt){let Jt=this.length;return this.resize(Jt+1),this.emplace(Jt,l,p,g,b,I,M,O,k,F,U,$,X,re,ne,ae,he,Se,Xe,je,Ve,st,vt,kt,er,Ht,Xt,Ar,Kt)}emplace(l,p,g,b,I,M,O,k,F,U,$,X,re,ne,ae,he,Se,Xe,je,Ve,st,vt,kt,er,Ht,Xt,Ar,Kt,Jt){let Ct=32*l,Jr=16*l;return this.int16[Ct+0]=p,this.int16[Ct+1]=g,this.int16[Ct+2]=b,this.int16[Ct+3]=I,this.int16[Ct+4]=M,this.int16[Ct+5]=O,this.int16[Ct+6]=k,this.int16[Ct+7]=F,this.uint16[Ct+8]=U,this.uint16[Ct+9]=$,this.uint16[Ct+10]=X,this.uint16[Ct+11]=re,this.uint16[Ct+12]=ne,this.uint16[Ct+13]=ae,this.uint16[Ct+14]=he,this.uint16[Ct+15]=Se,this.uint16[Ct+16]=Xe,this.uint16[Ct+17]=je,this.uint16[Ct+18]=Ve,this.uint16[Ct+19]=st,this.uint16[Ct+20]=vt,this.uint16[Ct+21]=kt,this.uint16[Ct+22]=er,this.uint32[Jr+12]=Ht,this.float32[Jr+13]=Xt,this.float32[Jr+14]=Ar,this.uint16[Ct+30]=Kt,this.uint16[Ct+31]=Jt,l}}x.prototype.bytesPerElement=64,fr("StructArrayLayout8i15ui1ul2f2ui64",x);class T extends Jo{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(l){let p=this.length;return this.resize(p+1),this.emplace(p,l)}emplace(l,p){return this.float32[1*l+0]=p,l}}T.prototype.bytesPerElement=4,fr("StructArrayLayout1f4",T);class C extends Jo{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(l,p,g){let b=this.length;return this.resize(b+1),this.emplace(b,l,p,g)}emplace(l,p,g,b){let I=3*l;return this.uint16[6*l+0]=p,this.float32[I+1]=g,this.float32[I+2]=b,l}}C.prototype.bytesPerElement=12,fr("StructArrayLayout1ui2f12",C);class R extends Jo{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(l,p,g){let b=this.length;return this.resize(b+1),this.emplace(b,l,p,g)}emplace(l,p,g,b){let I=4*l;return this.uint32[2*l+0]=p,this.uint16[I+2]=g,this.uint16[I+3]=b,l}}R.prototype.bytesPerElement=8,fr("StructArrayLayout1ul2ui8",R);class q extends Jo{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(l,p){let g=this.length;return this.resize(g+1),this.emplace(g,l,p)}emplace(l,p,g){let b=2*l;return this.uint16[b+0]=p,this.uint16[b+1]=g,l}}q.prototype.bytesPerElement=4,fr("StructArrayLayout2ui4",q);class V extends Jo{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(l){let p=this.length;return this.resize(p+1),this.emplace(p,l)}emplace(l,p){return this.uint16[1*l+0]=p,l}}V.prototype.bytesPerElement=2,fr("StructArrayLayout1ui2",V);class H extends Jo{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(l,p,g,b){let I=this.length;return this.resize(I+1),this.emplace(I,l,p,g,b)}emplace(l,p,g,b,I){let M=4*l;return this.float32[M+0]=p,this.float32[M+1]=g,this.float32[M+2]=b,this.float32[M+3]=I,l}}H.prototype.bytesPerElement=16,fr("StructArrayLayout4f16",H);class Y extends j1{get anchorPointX(){return this._structArray.int16[this._pos2+0]}get anchorPointY(){return this._structArray.int16[this._pos2+1]}get x1(){return this._structArray.int16[this._pos2+2]}get y1(){return this._structArray.int16[this._pos2+3]}get x2(){return this._structArray.int16[this._pos2+4]}get y2(){return this._structArray.int16[this._pos2+5]}get featureIndex(){return this._structArray.uint32[this._pos4+3]}get sourceLayerIndex(){return this._structArray.uint16[this._pos2+8]}get bucketIndex(){return this._structArray.uint16[this._pos2+9]}get anchorPoint(){return new a(this.anchorPointX,this.anchorPointY)}}Y.prototype.size=20;class W extends Bx{get(l){return new Y(this,l)}}fr("CollisionBoxArray",W);class Q extends j1{get anchorX(){return this._structArray.int16[this._pos2+0]}get anchorY(){return this._structArray.int16[this._pos2+1]}get glyphStartIndex(){return this._structArray.uint16[this._pos2+2]}get numGlyphs(){return this._structArray.uint16[this._pos2+3]}get vertexStartIndex(){return this._structArray.uint32[this._pos4+2]}get lineStartIndex(){return this._structArray.uint32[this._pos4+3]}get lineLength(){return this._structArray.uint32[this._pos4+4]}get segment(){return this._structArray.uint16[this._pos2+10]}get lowerSize(){return this._structArray.uint16[this._pos2+11]}get upperSize(){return this._structArray.uint16[this._pos2+12]}get lineOffsetX(){return this._structArray.float32[this._pos4+7]}get lineOffsetY(){return this._structArray.float32[this._pos4+8]}get writingMode(){return this._structArray.uint8[this._pos1+36]}get placedOrientation(){return this._structArray.uint8[this._pos1+37]}set placedOrientation(l){this._structArray.uint8[this._pos1+37]=l}get hidden(){return this._structArray.uint8[this._pos1+38]}set hidden(l){this._structArray.uint8[this._pos1+38]=l}get crossTileID(){return this._structArray.uint32[this._pos4+10]}set crossTileID(l){this._structArray.uint32[this._pos4+10]=l}get associatedIconIndex(){return this._structArray.int16[this._pos2+22]}}Q.prototype.size=48;class ie extends v{get(l){return new Q(this,l)}}fr("PlacedSymbolArray",ie);class ve extends j1{get anchorX(){return this._structArray.int16[this._pos2+0]}get anchorY(){return this._structArray.int16[this._pos2+1]}get rightJustifiedTextSymbolIndex(){return this._structArray.int16[this._pos2+2]}get centerJustifiedTextSymbolIndex(){return this._structArray.int16[this._pos2+3]}get leftJustifiedTextSymbolIndex(){return this._structArray.int16[this._pos2+4]}get verticalPlacedTextSymbolIndex(){return this._structArray.int16[this._pos2+5]}get placedIconSymbolIndex(){return this._structArray.int16[this._pos2+6]}get verticalPlacedIconSymbolIndex(){return this._structArray.int16[this._pos2+7]}get key(){return this._structArray.uint16[this._pos2+8]}get textBoxStartIndex(){return this._structArray.uint16[this._pos2+9]}get textBoxEndIndex(){return this._structArray.uint16[this._pos2+10]}get verticalTextBoxStartIndex(){return this._structArray.uint16[this._pos2+11]}get verticalTextBoxEndIndex(){return this._structArray.uint16[this._pos2+12]}get iconBoxStartIndex(){return this._structArray.uint16[this._pos2+13]}get iconBoxEndIndex(){return this._structArray.uint16[this._pos2+14]}get verticalIconBoxStartIndex(){return this._structArray.uint16[this._pos2+15]}get verticalIconBoxEndIndex(){return this._structArray.uint16[this._pos2+16]}get featureIndex(){return this._structArray.uint16[this._pos2+17]}get numHorizontalGlyphVertices(){return this._structArray.uint16[this._pos2+18]}get numVerticalGlyphVertices(){return this._structArray.uint16[this._pos2+19]}get numIconVertices(){return this._structArray.uint16[this._pos2+20]}get numVerticalIconVertices(){return this._structArray.uint16[this._pos2+21]}get useRuntimeCollisionCircles(){return this._structArray.uint16[this._pos2+22]}get crossTileID(){return this._structArray.uint32[this._pos4+12]}set crossTileID(l){this._structArray.uint32[this._pos4+12]=l}get textBoxScale(){return this._structArray.float32[this._pos4+13]}get collisionCircleDiameter(){return this._structArray.float32[this._pos4+14]}get textAnchorOffsetStartIndex(){return this._structArray.uint16[this._pos2+30]}get textAnchorOffsetEndIndex(){return this._structArray.uint16[this._pos2+31]}}ve.prototype.size=64;class ge extends x{get(l){return new ve(this,l)}}fr("SymbolInstanceArray",ge);class ye extends T{getoffsetX(l){return this.float32[1*l+0]}}fr("GlyphOffsetArray",ye);class Ie extends jv{getx(l){return this.int16[3*l+0]}gety(l){return this.int16[3*l+1]}gettileUnitDistanceFromAnchor(l){return this.int16[3*l+2]}}fr("SymbolLineVertexArray",Ie);class Re extends j1{get textAnchor(){return this._structArray.uint16[this._pos2+0]}get textOffset0(){return this._structArray.float32[this._pos4+1]}get textOffset1(){return this._structArray.float32[this._pos4+2]}}Re.prototype.size=12;class Pe extends C{get(l){return new Re(this,l)}}fr("TextAnchorOffsetArray",Pe);class ze extends j1{get featureIndex(){return this._structArray.uint32[this._pos4+0]}get sourceLayerIndex(){return this._structArray.uint16[this._pos2+2]}get bucketIndex(){return this._structArray.uint16[this._pos2+3]}}ze.prototype.size=8;class He extends R{get(l){return new ze(this,l)}}fr("FeatureIndexArray",He);class Ne extends Rv{}class Qe extends Rv{}class ht extends Rv{}class it extends qv{}class at extends Qm{}class dt extends q1{}class Vt extends Ux{}class Wt extends eg{}class Nt extends _I{}class xr extends bI{}class Dn extends xI{}class Eo extends s{}class Qo extends d{}class Go extends q{}let Fi=pa([{name:"a_pos",components:2,type:"Int16"}],4),{members:Ji}=Fi;class Cn{constructor(l=[]){this._forceNewSegmentOnNextPrepare=!1,this.segments=l}prepareSegment(l,p,g,b){let I=this.segments[this.segments.length-1];return l>Cn.MAX_VERTEX_ARRAY_LENGTH&&At(`Max vertices per segment is ${Cn.MAX_VERTEX_ARRAY_LENGTH}: bucket requested ${l}. Consider using the \`fillLargeMeshArrays\` function if you require meshes with more than ${Cn.MAX_VERTEX_ARRAY_LENGTH} vertices.`),this._forceNewSegmentOnNextPrepare||!I||I.vertexLength+l>Cn.MAX_VERTEX_ARRAY_LENGTH||I.sortKey!==b?this.createNewSegment(p,g,b):I}createNewSegment(l,p,g){let b={vertexOffset:l.length,primitiveOffset:p.length,vertexLength:0,primitiveLength:0,vaos:{}};return g!==void 0&&(b.sortKey=g),this._forceNewSegmentOnNextPrepare=!1,this.segments.push(b),b}getOrCreateLatestSegment(l,p,g){return this.prepareSegment(0,l,p,g)}forceNewSegmentOnNextPrepare(){this._forceNewSegmentOnNextPrepare=!0}get(){return this.segments}destroy(){for(let l of this.segments)for(let p in l.vaos)l.vaos[p].destroy()}static simpleSegment(l,p,g,b){return new Cn([{vertexOffset:l,primitiveOffset:p,vertexLength:g,primitiveLength:b,vaos:{},sortKey:0}])}}function ei(f,l){return 256*(f=ot(Math.floor(f),0,255))+ot(Math.floor(l),0,255)}Cn.MAX_VERTEX_ARRAY_LENGTH=Math.pow(2,16)-1,fr("SegmentVector",Cn);let Ma=pa([{name:"a_pattern_from",components:4,type:"Uint16"},{name:"a_pattern_to",components:4,type:"Uint16"},{name:"a_pixel_ratio_from",components:1,type:"Uint16"},{name:"a_pixel_ratio_to",components:1,type:"Uint16"}]);var Ua,ls,gl,op={exports:{}},mh={exports:{}},gh={exports:{}},zv=function(){if(gl)return op.exports;gl=1;var f=(Ua||(Ua=1,mh.exports=function(p,g){var b,I,M,O,k,F,U,$;for(I=p.length-(b=3&p.length),M=g,k=3432918353,F=461845907,$=0;$<I;)U=255&p.charCodeAt($)|(255&p.charCodeAt(++$))<<8|(255&p.charCodeAt(++$))<<16|(255&p.charCodeAt(++$))<<24,++$,M=27492+(65535&(O=5*(65535&(M=(M^=U=(65535&(U=(U=(65535&U)*k+(((U>>>16)*k&65535)<<16)&4294967295)<<15|U>>>17))*F+(((U>>>16)*F&65535)<<16)&4294967295)<<13|M>>>19))+((5*(M>>>16)&65535)<<16)&4294967295))+((58964+(O>>>16)&65535)<<16);switch(U=0,b){case 3:U^=(255&p.charCodeAt($+2))<<16;case 2:U^=(255&p.charCodeAt($+1))<<8;case 1:M^=U=(65535&(U=(U=(65535&(U^=255&p.charCodeAt($)))*k+(((U>>>16)*k&65535)<<16)&4294967295)<<15|U>>>17))*F+(((U>>>16)*F&65535)<<16)&4294967295}return M^=p.length,M=2246822507*(65535&(M^=M>>>16))+((2246822507*(M>>>16)&65535)<<16)&4294967295,M=3266489909*(65535&(M^=M>>>13))+((3266489909*(M>>>16)&65535)<<16)&4294967295,(M^=M>>>16)>>>0}),mh.exports),l=(ls||(ls=1,gh.exports=function(p,g){for(var b,I=p.length,M=g^I,O=0;I>=4;)b=1540483477*(65535&(b=255&p.charCodeAt(O)|(255&p.charCodeAt(++O))<<8|(255&p.charCodeAt(++O))<<16|(255&p.charCodeAt(++O))<<24))+((1540483477*(b>>>16)&65535)<<16),M=1540483477*(65535&M)+((1540483477*(M>>>16)&65535)<<16)^(b=1540483477*(65535&(b^=b>>>24))+((1540483477*(b>>>16)&65535)<<16)),I-=4,++O;switch(I){case 3:M^=(255&p.charCodeAt(O+2))<<16;case 2:M^=(255&p.charCodeAt(O+1))<<8;case 1:M=1540483477*(65535&(M^=255&p.charCodeAt(O)))+((1540483477*(M>>>16)&65535)<<16)}return M=1540483477*(65535&(M^=M>>>13))+((1540483477*(M>>>16)&65535)<<16),(M^=M>>>15)>>>0}),gh.exports);return op.exports=f,op.exports.murmur3=f,op.exports.murmur2=l,op.exports}(),Fv=c(zv);class tg{constructor(){this.ids=[],this.positions=[],this.indexed=!1}add(l,p,g,b){this.ids.push(rg(l)),this.positions.push(p,g,b)}getPositions(l){if(!this.indexed)throw new Error("Trying to get index, but feature positions are not indexed");let p=rg(l),g=0,b=this.ids.length-1;for(;g<b;){let M=g+b>>1;this.ids[M]>=p?b=M:g=M+1}let I=[];for(;this.ids[g]===p;)I.push({index:this.positions[3*g],start:this.positions[3*g+1],end:this.positions[3*g+2]}),g++;return I}static serialize(l,p){let g=new Float64Array(l.ids),b=new Uint32Array(l.positions);return Ql(g,b,0,g.length-1),p&&p.push(g.buffer,b.buffer),{ids:g,positions:b}}static deserialize(l){let p=new tg;return p.ids=l.ids,p.positions=l.positions,p.indexed=!0,p}}function rg(f){let l=+f;return!isNaN(l)&&l<=Number.MAX_SAFE_INTEGER?l:Fv(String(f))}function Ql(f,l,p,g){for(;p<g;){let b=f[p+g>>1],I=p-1,M=g+1;for(;;){do I++;while(f[I]<b);do M--;while(f[M]>b);if(I>=M)break;ip(f,I,M),ip(l,3*I,3*M),ip(l,3*I+1,3*M+1),ip(l,3*I+2,3*M+2)}M-p<g-M?(Ql(f,l,p,M),p=M+1):(Ql(f,l,M+1,g),g=M)}}function ip(f,l,p){let g=f[l];f[l]=f[p],f[p]=g}fr("FeaturePositionMap",tg);class vl{constructor(l,p){this.gl=l.gl,this.location=p}}class vh extends vl{constructor(l,p){super(l,p),this.current=0}set(l){this.current!==l&&(this.current=l,this.gl.uniform1f(this.location,l))}}class Ca extends vl{constructor(l,p){super(l,p),this.current=[0,0,0,0]}set(l){l[0]===this.current[0]&&l[1]===this.current[1]&&l[2]===this.current[2]&&l[3]===this.current[3]||(this.current=l,this.gl.uniform4f(this.location,l[0],l[1],l[2],l[3]))}}class Ba extends vl{constructor(l,p){super(l,p),this.current=vn.transparent}set(l){l.r===this.current.r&&l.g===this.current.g&&l.b===this.current.b&&l.a===this.current.a||(this.current=l,this.gl.uniform4f(this.location,l.r,l.g,l.b,l.a))}}let cc=new Float32Array(16);function Aa(f){return[ei(255*f.r,255*f.g),ei(255*f.b,255*f.a)]}class z1{constructor(l,p,g){this.value=l,this.uniformNames=p.map(b=>`u_${b}`),this.type=g}setUniform(l,p,g){l.set(g.constantOr(this.value))}getBinding(l,p,g){return this.type==="color"?new Ba(l,p):new vh(l,p)}}class Uv{constructor(l,p){this.uniformNames=p.map(g=>`u_${g}`),this.patternFrom=null,this.patternTo=null,this.pixelRatioFrom=1,this.pixelRatioTo=1}setConstantPatternPositions(l,p){this.pixelRatioFrom=p.pixelRatio,this.pixelRatioTo=l.pixelRatio,this.patternFrom=p.tlbr,this.patternTo=l.tlbr}setUniform(l,p,g,b){let I=b==="u_pattern_to"?this.patternTo:b==="u_pattern_from"?this.patternFrom:b==="u_pixel_ratio_to"?this.pixelRatioTo:b==="u_pixel_ratio_from"?this.pixelRatioFrom:null;I&&l.set(I)}getBinding(l,p,g){return g.substr(0,9)==="u_pattern"?new Ca(l,p):new vh(l,p)}}class rd{constructor(l,p,g,b){this.expression=l,this.type=g,this.maxValue=0,this.paintVertexAttributes=p.map(I=>({name:`a_${I}`,type:"Float32",components:g==="color"?2:1,offset:0})),this.paintVertexArray=new b}populatePaintArray(l,p,g){let b=this.paintVertexArray.length,I=this.expression.evaluate(new ii(0,g),p,{},g.canonical,[],g.formattedSection);this.paintVertexArray.resize(l),this._setPaintValue(b,l,I)}updatePaintArray(l,p,g,b,I){let M=this.expression.evaluate(new ii(0,I),g,b);this._setPaintValue(l,p,M)}_setPaintValue(l,p,g){if(this.type==="color"){let b=Aa(g);for(let I=l;I<p;I++)this.paintVertexArray.emplace(I,b[0],b[1])}else{for(let b=l;b<p;b++)this.paintVertexArray.emplace(b,g);this.maxValue=Math.max(this.maxValue,Math.abs(g))}}upload(l){this.paintVertexArray&&this.paintVertexArray.arrayBuffer&&(this.paintVertexBuffer&&this.paintVertexBuffer.buffer?this.paintVertexBuffer.updateData(this.paintVertexArray):this.paintVertexBuffer=l.createVertexBuffer(this.paintVertexArray,this.paintVertexAttributes,this.expression.isStateDependent))}destroy(){this.paintVertexBuffer&&this.paintVertexBuffer.destroy()}}class ap{constructor(l,p,g,b,I,M){this.expression=l,this.uniformNames=p.map(O=>`u_${O}_t`),this.type=g,this.useIntegerZoom=b,this.zoom=I,this.maxValue=0,this.paintVertexAttributes=p.map(O=>({name:`a_${O}`,type:"Float32",components:g==="color"?4:2,offset:0})),this.paintVertexArray=new M}populatePaintArray(l,p,g){let b=this.expression.evaluate(new ii(this.zoom,g),p,{},g.canonical,[],g.formattedSection),I=this.expression.evaluate(new ii(this.zoom+1,g),p,{},g.canonical,[],g.formattedSection),M=this.paintVertexArray.length;this.paintVertexArray.resize(l),this._setPaintValue(M,l,b,I)}updatePaintArray(l,p,g,b,I){let M=this.expression.evaluate(new ii(this.zoom,I),g,b),O=this.expression.evaluate(new ii(this.zoom+1,I),g,b);this._setPaintValue(l,p,M,O)}_setPaintValue(l,p,g,b){if(this.type==="color"){let I=Aa(g),M=Aa(b);for(let O=l;O<p;O++)this.paintVertexArray.emplace(O,I[0],I[1],M[0],M[1])}else{for(let I=l;I<p;I++)this.paintVertexArray.emplace(I,g,b);this.maxValue=Math.max(this.maxValue,Math.abs(g),Math.abs(b))}}upload(l){this.paintVertexArray&&this.paintVertexArray.arrayBuffer&&(this.paintVertexBuffer&&this.paintVertexBuffer.buffer?this.paintVertexBuffer.updateData(this.paintVertexArray):this.paintVertexBuffer=l.createVertexBuffer(this.paintVertexArray,this.paintVertexAttributes,this.expression.isStateDependent))}destroy(){this.paintVertexBuffer&&this.paintVertexBuffer.destroy()}setUniform(l,p){let g=this.useIntegerZoom?Math.floor(p.zoom):p.zoom,b=ot(this.expression.interpolationFactor(g,this.zoom,this.zoom+1),0,1);l.set(b)}getBinding(l,p,g){return new vh(l,p)}}class yh{constructor(l,p,g,b,I,M){this.expression=l,this.type=p,this.useIntegerZoom=g,this.zoom=b,this.layerId=M,this.zoomInPaintVertexArray=new I,this.zoomOutPaintVertexArray=new I}populatePaintArray(l,p,g){let b=this.zoomInPaintVertexArray.length;this.zoomInPaintVertexArray.resize(l),this.zoomOutPaintVertexArray.resize(l),this._setPaintValues(b,l,p.patterns&&p.patterns[this.layerId],g.imagePositions)}updatePaintArray(l,p,g,b,I){this._setPaintValues(l,p,g.patterns&&g.patterns[this.layerId],I.imagePositions)}_setPaintValues(l,p,g,b){if(!b||!g)return;let{min:I,mid:M,max:O}=g,k=b[I],F=b[M],U=b[O];if(k&&F&&U)for(let $=l;$<p;$++)this.zoomInPaintVertexArray.emplace($,F.tl[0],F.tl[1],F.br[0],F.br[1],k.tl[0],k.tl[1],k.br[0],k.br[1],F.pixelRatio,k.pixelRatio),this.zoomOutPaintVertexArray.emplace($,F.tl[0],F.tl[1],F.br[0],F.br[1],U.tl[0],U.tl[1],U.br[0],U.br[1],F.pixelRatio,U.pixelRatio)}upload(l){this.zoomInPaintVertexArray&&this.zoomInPaintVertexArray.arrayBuffer&&this.zoomOutPaintVertexArray&&this.zoomOutPaintVertexArray.arrayBuffer&&(this.zoomInPaintVertexBuffer=l.createVertexBuffer(this.zoomInPaintVertexArray,Ma.members,this.expression.isStateDependent),this.zoomOutPaintVertexBuffer=l.createVertexBuffer(this.zoomOutPaintVertexArray,Ma.members,this.expression.isStateDependent))}destroy(){this.zoomOutPaintVertexBuffer&&this.zoomOutPaintVertexBuffer.destroy(),this.zoomInPaintVertexBuffer&&this.zoomInPaintVertexBuffer.destroy()}}class I4{constructor(l,p,g){this.binders={},this._buffers=[];let b=[];for(let I in l.paint._values){if(!g(I))continue;let M=l.paint.get(I);if(!(M instanceof Fp&&fh(M.property.specification)))continue;let O=M4(I,l.type),k=M.value,F=M.property.specification.type,U=M.property.useIntegerZoom,$=M.property.specification["property-type"],X=$==="cross-faded"||$==="cross-faded-data-driven";if(k.kind==="constant")this.binders[I]=X?new Uv(k.value,O):new z1(k.value,O,F),b.push(`/u_${I}`);else if(k.kind==="source"||X){let re=wI(I,F,"source");this.binders[I]=X?new yh(k,F,U,p,re,l.id):new rd(k,O,F,re),b.push(`/a_${I}`)}else{let re=wI(I,F,"composite");this.binders[I]=new ap(k,O,F,U,p,re),b.push(`/z_${I}`)}}this.cacheKey=b.sort().join("")}getMaxValue(l){let p=this.binders[l];return p instanceof rd||p instanceof ap?p.maxValue:0}populatePaintArrays(l,p,g){for(let b in this.binders){let I=this.binders[b];(I instanceof rd||I instanceof ap||I instanceof yh)&&I.populatePaintArray(l,p,g)}}setConstantPatternPositions(l,p){for(let g in this.binders){let b=this.binders[g];b instanceof Uv&&b.setConstantPatternPositions(l,p)}}updatePaintArrays(l,p,g,b,I){let M=!1;for(let O in l){let k=p.getPositions(O);for(let F of k){let U=g.feature(F.index);for(let $ in this.binders){let X=this.binders[$];if((X instanceof rd||X instanceof ap||X instanceof yh)&&X.expression.isStateDependent===!0){let re=b.paint.get($);X.expression=re.value,X.updatePaintArray(F.start,F.end,U,l[O],I),M=!0}}}}return M}defines(){let l=[];for(let p in this.binders){let g=this.binders[p];(g instanceof z1||g instanceof Uv)&&l.push(...g.uniformNames.map(b=>`#define HAS_UNIFORM_${b}`))}return l}getBinderAttributes(){let l=[];for(let p in this.binders){let g=this.binders[p];if(g instanceof rd||g instanceof ap)for(let b=0;b<g.paintVertexAttributes.length;b++)l.push(g.paintVertexAttributes[b].name);else if(g instanceof yh)for(let b=0;b<Ma.members.length;b++)l.push(Ma.members[b].name)}return l}getBinderUniforms(){let l=[];for(let p in this.binders){let g=this.binders[p];if(g instanceof z1||g instanceof Uv||g instanceof ap)for(let b of g.uniformNames)l.push(b)}return l}getPaintVertexBuffers(){return this._buffers}getUniforms(l,p){let g=[];for(let b in this.binders){let I=this.binders[b];if(I instanceof z1||I instanceof Uv||I instanceof ap){for(let M of I.uniformNames)if(p[M]){let O=I.getBinding(l,p[M],M);g.push({name:M,property:b,binding:O})}}}return g}setUniforms(l,p,g,b){for(let{name:I,property:M,binding:O}of p)this.binders[M].setUniform(O,b,g.get(M),I)}updatePaintBuffers(l){this._buffers=[];for(let p in this.binders){let g=this.binders[p];if(l&&g instanceof yh){let b=l.fromScale===2?g.zoomInPaintVertexBuffer:g.zoomOutPaintVertexBuffer;b&&this._buffers.push(b)}else(g instanceof rd||g instanceof ap)&&g.paintVertexBuffer&&this._buffers.push(g.paintVertexBuffer)}}upload(l){for(let p in this.binders){let g=this.binders[p];(g instanceof rd||g instanceof ap||g instanceof yh)&&g.upload(l)}this.updatePaintBuffers()}destroy(){for(let l in this.binders){let p=this.binders[l];(p instanceof rd||p instanceof ap||p instanceof yh)&&p.destroy()}}}class Au{constructor(l,p,g=()=>!0){this.programConfigurations={};for(let b of l)this.programConfigurations[b.id]=new I4(b,p,g);this.needsUpload=!1,this._featureMap=new tg,this._bufferOffset=0}populatePaintArrays(l,p,g,b){for(let I in this.programConfigurations)this.programConfigurations[I].populatePaintArrays(l,p,b);p.id!==void 0&&this._featureMap.add(p.id,g,this._bufferOffset,l),this._bufferOffset=l,this.needsUpload=!0}updatePaintArrays(l,p,g,b){for(let I of g)this.needsUpload=this.programConfigurations[I.id].updatePaintArrays(l,this._featureMap,p,I,b)||this.needsUpload}get(l){return this.programConfigurations[l]}upload(l){if(this.needsUpload){for(let p in this.programConfigurations)this.programConfigurations[p].upload(l);this.needsUpload=!1}}destroy(){for(let l in this.programConfigurations)this.programConfigurations[l].destroy()}}function M4(f,l){return{"text-opacity":["opacity"],"icon-opacity":["opacity"],"text-color":["fill_color"],"icon-color":["fill_color"],"text-halo-color":["halo_color"],"icon-halo-color":["halo_color"],"text-halo-blur":["halo_blur"],"icon-halo-blur":["halo_blur"],"text-halo-width":["halo_width"],"icon-halo-width":["halo_width"],"line-gap-width":["gapwidth"],"line-pattern":["pattern_to","pattern_from","pixel_ratio_to","pixel_ratio_from"],"fill-pattern":["pattern_to","pattern_from","pixel_ratio_to","pixel_ratio_from"],"fill-extrusion-pattern":["pattern_to","pattern_from","pixel_ratio_to","pixel_ratio_from"]}[f]||[f.replace(`${l}-`,"").replace(/-/g,"_")]}function wI(f,l,p){let g={color:{source:q1,composite:H},number:{source:T,composite:q1}},b=function(I){return{"line-pattern":{source:Vt,composite:Vt},"fill-pattern":{source:Vt,composite:Vt},"fill-extrusion-pattern":{source:Vt,composite:Vt}}[I]}(f);return b&&b[p]||g[l][p]}fr("ConstantBinder",z1),fr("CrossFadedConstantBinder",Uv),fr("SourceExpressionBinder",rd),fr("CrossFadedCompositeBinder",yh),fr("CompositeExpressionBinder",ap),fr("ProgramConfiguration",I4,{omit:["_buffers"]}),fr("ProgramConfigurationSet",Au);let Vx=Math.pow(2,14)-1,Gx=-Vx-1;function _h(f){let l=ct/f.extent,p=f.loadGeometry();for(let g=0;g<p.length;g++){let b=p[g];for(let I=0;I<b.length;I++){let M=b[I],O=Math.round(M.x*l),k=Math.round(M.y*l);M.x=ot(O,Gx,Vx),M.y=ot(k,Gx,Vx),(O<M.x||O>M.x+1||k<M.y||k>M.y+1)&&At("Geometry exceeds allowed extent, reduce your vector tile buffer size")}}return p}function nd(f,l){return{type:f.type,id:f.id,properties:f.properties,geometry:l?_h(f):[]}}let gfe=-32768;function tmt(f,l,p,g,b){f.emplaceBack(gfe+8*l+g,gfe+8*p+b)}class kB{constructor(l){this.zoom=l.zoom,this.globalState=l.globalState,this.overscaling=l.overscaling,this.layers=l.layers,this.layerIds=this.layers.map(p=>p.id),this.index=l.index,this.hasPattern=!1,this.layoutVertexArray=new Qe,this.indexArray=new Qo,this.segments=new Cn,this.programConfigurations=new Au(l.layers,l.zoom),this.stateDependentLayerIds=this.layers.filter(p=>p.isStateDependent()).map(p=>p.id)}populate(l,p,g){let b=this.layers[0],I=[],M=null,O=!1,k=b.type==="heatmap";if(b.type==="circle"){let U=b;M=U.layout.get("circle-sort-key"),O=!M.isConstant(),k=k||U.paint.get("circle-pitch-alignment")==="map"}let F=k?p.subdivisionGranularity.circle:1;for(let{feature:U,id:$,index:X,sourceLayerIndex:re}of l){let ne=this.layers[0]._featureFilter.needGeometry,ae=nd(U,ne);if(!this.layers[0]._featureFilter.filter(new ii(this.zoom,{globalState:this.globalState}),ae,g))continue;let he=O?M.evaluate(ae,{},g):void 0,Se={id:$,properties:U.properties,type:U.type,sourceLayerIndex:re,index:X,geometry:ne?ae.geometry:_h(U),patterns:{},sortKey:he};I.push(Se)}O&&I.sort((U,$)=>U.sortKey-$.sortKey);for(let U of I){let{geometry:$,index:X,sourceLayerIndex:re}=U,ne=l[X].feature;this.addFeature(U,$,X,g,F),p.featureIndex.insert(ne,$,X,re,this.index)}}update(l,p,g){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(l,p,this.stateDependentLayers,{imagePositions:g,globalState:this.globalState})}isEmpty(){return this.layoutVertexArray.length===0}uploadPending(){return!this.uploaded||this.programConfigurations.needsUpload}upload(l){this.uploaded||(this.layoutVertexBuffer=l.createVertexBuffer(this.layoutVertexArray,Ji),this.indexBuffer=l.createIndexBuffer(this.indexArray)),this.programConfigurations.upload(l),this.uploaded=!0}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy())}addFeature(l,p,g,b,I=1){let M;switch(I){case 1:M=[0,7];break;case 3:M=[0,2,5,7];break;case 5:M=[0,1,3,4,6,7];break;case 7:M=[0,1,2,3,4,5,6,7];break;default:throw new Error(`Invalid circle bucket granularity: ${I}; valid values are 1, 3, 5, 7.`)}let O=M.length;for(let k of p)for(let F of k){let U=F.x,$=F.y;if(U<0||U>=ct||$<0||$>=ct)continue;let X=this.segments.prepareSegment(O*O,this.layoutVertexArray,this.indexArray,l.sortKey),re=X.vertexLength;for(let ne=0;ne<O;ne++)for(let ae=0;ae<O;ae++)tmt(this.layoutVertexArray,U,$,M[ae],M[ne]);for(let ne=0;ne<O-1;ne++)for(let ae=0;ae<O-1;ae++){let he=re+ne*O+ae,Se=re+(ne+1)*O+ae;this.indexArray.emplaceBack(he,Se+1,he+1),this.indexArray.emplaceBack(he,Se,Se+1)}X.vertexLength+=O*O,X.primitiveLength+=(O-1)*(O-1)*2}this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,l,g,{imagePositions:{},canonical:b,globalState:this.globalState})}}function vfe(f,l){for(let p=0;p<f.length;p++)if(Hx(l,f[p]))return!0;for(let p=0;p<l.length;p++)if(Hx(f,l[p]))return!0;return!!RB(f,l)}function rmt(f,l,p){return!!Hx(f,l)||!!jB(l,f,p)}function yfe(f,l){if(f.length===1)return bfe(l,f[0]);for(let p=0;p<l.length;p++){let g=l[p];for(let b=0;b<g.length;b++)if(Hx(f,g[b]))return!0}for(let p=0;p<f.length;p++)if(bfe(l,f[p]))return!0;for(let p=0;p<l.length;p++)if(RB(f,l[p]))return!0;return!1}function nmt(f,l,p){if(f.length>1){if(RB(f,l))return!0;for(let g=0;g<l.length;g++)if(jB(l[g],f,p))return!0}for(let g=0;g<f.length;g++)if(jB(f[g],l,p))return!0;return!1}function RB(f,l){if(f.length===0||l.length===0)return!1;for(let p=0;p<f.length-1;p++){let g=f[p],b=f[p+1];for(let I=0;I<l.length-1;I++)if(omt(g,b,l[I],l[I+1]))return!0}return!1}function omt(f,l,p,g){return Mt(f,p,g)!==Mt(l,p,g)&&Mt(f,l,p)!==Mt(f,l,g)}function jB(f,l,p){let g=p*p;if(l.length===1)return f.distSqr(l[0])<g;for(let b=1;b<l.length;b++)if(_fe(f,l[b-1],l[b])<g)return!0;return!1}function _fe(f,l,p){let g=l.distSqr(p);if(g===0)return f.distSqr(l);let b=((f.x-l.x)*(p.x-l.x)+(f.y-l.y)*(p.y-l.y))/g;return f.distSqr(b<0?l:b>1?p:p.sub(l)._mult(b)._add(l))}function bfe(f,l){let p,g,b,I=!1;for(let M=0;M<f.length;M++){p=f[M];for(let O=0,k=p.length-1;O<p.length;k=O++)g=p[O],b=p[k],g.y>l.y!=b.y>l.y&&l.x<(b.x-g.x)*(l.y-g.y)/(b.y-g.y)+g.x&&(I=!I)}return I}function Hx(f,l){let p=!1;for(let g=0,b=f.length-1;g<f.length;b=g++){let I=f[g],M=f[b];I.y>l.y!=M.y>l.y&&l.x<(M.x-I.x)*(l.y-I.y)/(M.y-I.y)+I.x&&(p=!p)}return p}function imt(f,l,p){let g=p[0],b=p[2];if(f.x<g.x&&l.x<g.x||f.x>b.x&&l.x>b.x||f.y<g.y&&l.y<g.y||f.y>b.y&&l.y>b.y)return!1;let I=Mt(f,l,p[0]);return I!==Mt(f,l,p[1])||I!==Mt(f,l,p[2])||I!==Mt(f,l,p[3])}function EI(f,l,p){let g=l.paint.get(f).value;return g.kind==="constant"?g.value:p.programConfigurations.get(l.id).getMaxValue(f)}function C4(f){return Math.sqrt(f[0]*f[0]+f[1]*f[1])}function A4(f,l,p,g,b){if(!l[0]&&!l[1])return f;let I=a.convert(l)._mult(b);p==="viewport"&&I._rotate(-g);let M=[];for(let O=0;O<f.length;O++)M.push(f[O].sub(I));return M}let xfe,wfe;fr("CircleBucket",kB,{omit:["layers"]});var amt={get paint(){return wfe=wfe||new ml({"circle-radius":new Kr(Ae.paint_circle["circle-radius"]),"circle-color":new Kr(Ae.paint_circle["circle-color"]),"circle-blur":new Kr(Ae.paint_circle["circle-blur"]),"circle-opacity":new Kr(Ae.paint_circle["circle-opacity"]),"circle-translate":new Sr(Ae.paint_circle["circle-translate"]),"circle-translate-anchor":new Sr(Ae.paint_circle["circle-translate-anchor"]),"circle-pitch-scale":new Sr(Ae.paint_circle["circle-pitch-scale"]),"circle-pitch-alignment":new Sr(Ae.paint_circle["circle-pitch-alignment"]),"circle-stroke-width":new Kr(Ae.paint_circle["circle-stroke-width"]),"circle-stroke-color":new Kr(Ae.paint_circle["circle-stroke-color"]),"circle-stroke-opacity":new Kr(Ae.paint_circle["circle-stroke-opacity"])})},get layout(){return xfe=xfe||new ml({"circle-sort-key":new Kr(Ae.layout_circle["circle-sort-key"])})}};class smt extends uc{constructor(l){super(l,amt)}createBucket(l){return new kB(l)}queryRadius(l){let p=l;return EI("circle-radius",this,p)+EI("circle-stroke-width",this,p)+C4(this.paint.get("circle-translate"))}queryIntersectsFeature({queryGeometry:l,feature:p,featureState:g,geometry:b,transform:I,pixelsToTileUnits:M,unwrappedTileID:O,getElevation:k}){let F=A4(l,this.paint.get("circle-translate"),this.paint.get("circle-translate-anchor"),-I.bearingInRadians,M),U=this.paint.get("circle-radius").evaluate(p,g)+this.paint.get("circle-stroke-width").evaluate(p,g),$=this.paint.get("circle-pitch-alignment")==="map",X=$?F:function(ne,ae,he,Se){return ne.map(Xe=>Efe(Xe,ae,he,Se))}(F,I,O,k),re=$?U*M:U;for(let ne of b)for(let ae of ne){let he=$?ae:Efe(ae,I,O,k),Se=re,Xe=I.projectTileCoordinates(ae.x,ae.y,O,k).signedDistanceFromCamera;if(this.paint.get("circle-pitch-scale")==="viewport"&&this.paint.get("circle-pitch-alignment")==="map"?Se*=Xe/I.cameraToCenterDistance:this.paint.get("circle-pitch-scale")==="map"&&this.paint.get("circle-pitch-alignment")==="viewport"&&(Se*=I.cameraToCenterDistance/Xe),rmt(X,he,Se))return!0}return!1}}function Efe(f,l,p,g){let b=l.projectTileCoordinates(f.x,f.y,p,g).point;return new a((.5*b.x+.5)*l.width,(.5*-b.y+.5)*l.height)}class Sfe extends kB{}let Tfe;fr("HeatmapBucket",Sfe,{omit:["layers"]});var lmt={get paint(){return Tfe=Tfe||new ml({"heatmap-radius":new Kr(Ae.paint_heatmap["heatmap-radius"]),"heatmap-weight":new Kr(Ae.paint_heatmap["heatmap-weight"]),"heatmap-intensity":new Sr(Ae.paint_heatmap["heatmap-intensity"]),"heatmap-color":new zx(Ae.paint_heatmap["heatmap-color"]),"heatmap-opacity":new Sr(Ae.paint_heatmap["heatmap-opacity"])})}};function qB(f,{width:l,height:p},g,b){if(b){if(b instanceof Uint8ClampedArray)b=new Uint8Array(b.buffer);else if(b.length!==l*p*g)throw new RangeError(`mismatched image size. expected: ${b.length} but got: ${l*p*g}`)}else b=new Uint8Array(l*p*g);return f.width=l,f.height=p,f.data=b,f}function Ife(f,{width:l,height:p},g){if(l===f.width&&p===f.height)return;let b=qB({},{width:l,height:p},g);zB(f,b,{x:0,y:0},{x:0,y:0},{width:Math.min(f.width,l),height:Math.min(f.height,p)},g),f.width=l,f.height=p,f.data=b.data}function zB(f,l,p,g,b,I){if(b.width===0||b.height===0)return l;if(b.width>f.width||b.height>f.height||p.x>f.width-b.width||p.y>f.height-b.height)throw new RangeError("out of range source coordinates for image copy");if(b.width>l.width||b.height>l.height||g.x>l.width-b.width||g.y>l.height-b.height)throw new RangeError("out of range destination coordinates for image copy");let M=f.data,O=l.data;if(M===O)throw new Error("srcData equals dstData, so image is already copied");for(let k=0;k<b.height;k++){let F=((p.y+k)*f.width+p.x)*I,U=((g.y+k)*l.width+g.x)*I;for(let $=0;$<b.width*I;$++)O[U+$]=M[F+$]}return l}class SI{constructor(l,p){qB(this,l,1,p)}resize(l){Ife(this,l,1)}clone(){return new SI({width:this.width,height:this.height},new Uint8Array(this.data))}static copy(l,p,g,b,I){zB(l,p,g,b,I,1)}}class Ou{constructor(l,p){qB(this,l,4,p)}resize(l){Ife(this,l,4)}replace(l,p){p?this.data.set(l):this.data=l instanceof Uint8ClampedArray?new Uint8Array(l.buffer):l}clone(){return new Ou({width:this.width,height:this.height},new Uint8Array(this.data))}static copy(l,p,g,b,I){zB(l,p,g,b,I,4)}setPixel(l,p,g){let b=4*(l*this.width+p);this.data[b+0]=Math.round(255*g.r/g.a),this.data[b+1]=Math.round(255*g.g/g.a),this.data[b+2]=Math.round(255*g.b/g.a),this.data[b+3]=Math.round(255*g.a)}}function Mfe(f){let l={},p=f.resolution||256,g=f.clips?f.clips.length:1,b=f.image||new Ou({width:p,height:g});if(Math.log(p)/Math.LN2%1!=0)throw new Error(`width is not a power of 2 - ${p}`);let I=(M,O,k)=>{l[f.evaluationKey]=k;let F=f.expression.evaluate(l);b.setPixel(M/4/p,O/4,F)};if(f.clips)for(let M=0,O=0;M<g;++M,O+=4*p)for(let k=0,F=0;k<p;k++,F+=4){let U=k/(p-1),{start:$,end:X}=f.clips[M];I(O,F,$*(1-U)+X*U)}else for(let M=0,O=0;M<p;M++,O+=4)I(0,O,M/(p-1));return b}fr("AlphaImage",SI),fr("RGBAImage",Ou);let FB="big-fb";class umt extends uc{createBucket(l){return new Sfe(l)}constructor(l){super(l,lmt),this.heatmapFbos=new Map,this._updateColorRamp()}_handleSpecialPaintPropertyUpdate(l){l==="heatmap-color"&&this._updateColorRamp()}_updateColorRamp(){this.colorRamp=Mfe({expression:this._transitionablePaint._values["heatmap-color"].value.expression,evaluationKey:"heatmapDensity",image:this.colorRamp}),this.colorRampTexture=null}resize(){this.heatmapFbos.has(FB)&&this.heatmapFbos.delete(FB)}queryRadius(){return 0}queryIntersectsFeature(){return!1}hasOffscreenPass(){return this.paint.get("heatmap-opacity")!==0&&this.visibility!=="none"}}let Cfe;var cmt={get paint(){return Cfe=Cfe||new ml({"hillshade-illumination-direction":new Sr(Ae.paint_hillshade["hillshade-illumination-direction"]),"hillshade-illumination-altitude":new Sr(Ae.paint_hillshade["hillshade-illumination-altitude"]),"hillshade-illumination-anchor":new Sr(Ae.paint_hillshade["hillshade-illumination-anchor"]),"hillshade-exaggeration":new Sr(Ae.paint_hillshade["hillshade-exaggeration"]),"hillshade-shadow-color":new Sr(Ae.paint_hillshade["hillshade-shadow-color"]),"hillshade-highlight-color":new Sr(Ae.paint_hillshade["hillshade-highlight-color"]),"hillshade-accent-color":new Sr(Ae.paint_hillshade["hillshade-accent-color"]),"hillshade-method":new Sr(Ae.paint_hillshade["hillshade-method"])})}};class pmt extends uc{constructor(l){super(l,cmt),this.recalculate({zoom:0,zoomHistory:{}},void 0)}getIlluminationProperties(){let l=this.paint.get("hillshade-illumination-direction").values,p=this.paint.get("hillshade-illumination-altitude").values,g=this.paint.get("hillshade-highlight-color").values,b=this.paint.get("hillshade-shadow-color").values,I=Math.max(l.length,p.length,g.length,b.length);l=l.concat(Array(I-l.length).fill(l.at(-1))),p=p.concat(Array(I-p.length).fill(p.at(-1))),g=g.concat(Array(I-g.length).fill(g.at(-1))),b=b.concat(Array(I-b.length).fill(b.at(-1)));let M=p.map(Le);return{directionRadians:l.map(Le),altitudeRadians:M,shadowColor:b,highlightColor:g}}hasOffscreenPass(){return this.paint.get("hillshade-exaggeration")!==0&&this.visibility!=="none"}}let Afe;var fmt={get paint(){return Afe=Afe||new ml({"color-relief-opacity":new Sr(Ae["paint_color-relief"]["color-relief-opacity"]),"color-relief-color":new zx(Ae["paint_color-relief"]["color-relief-color"])})}};class UB{constructor(l,p,g,b){this.context=l,this.format=g,this.texture=l.gl.createTexture(),this.update(p,b)}update(l,p,g){let{width:b,height:I}=l,M=!(this.size&&this.size[0]===b&&this.size[1]===I||g),{context:O}=this,{gl:k}=O;if(this.useMipmap=!!(p&&p.useMipmap),k.bindTexture(k.TEXTURE_2D,this.texture),O.pixelStoreUnpackFlipY.set(!1),O.pixelStoreUnpack.set(1),O.pixelStoreUnpackPremultiplyAlpha.set(this.format===k.RGBA&&(!p||p.premultiply!==!1)),M)this.size=[b,I],l instanceof HTMLImageElement||l instanceof HTMLCanvasElement||l instanceof HTMLVideoElement||l instanceof ImageData||Ut(l)?k.texImage2D(k.TEXTURE_2D,0,this.format,this.format,k.UNSIGNED_BYTE,l):k.texImage2D(k.TEXTURE_2D,0,this.format,b,I,0,this.format,k.UNSIGNED_BYTE,l.data);else{let{x:F,y:U}=g||{x:0,y:0};l instanceof HTMLImageElement||l instanceof HTMLCanvasElement||l instanceof HTMLVideoElement||l instanceof ImageData||Ut(l)?k.texSubImage2D(k.TEXTURE_2D,0,F,U,k.RGBA,k.UNSIGNED_BYTE,l):k.texSubImage2D(k.TEXTURE_2D,0,F,U,b,I,k.RGBA,k.UNSIGNED_BYTE,l.data)}this.useMipmap&&this.isSizePowerOfTwo()&&k.generateMipmap(k.TEXTURE_2D),O.pixelStoreUnpackFlipY.setDefault(),O.pixelStoreUnpack.setDefault(),O.pixelStoreUnpackPremultiplyAlpha.setDefault()}bind(l,p,g){let{context:b}=this,{gl:I}=b;I.bindTexture(I.TEXTURE_2D,this.texture),g!==I.LINEAR_MIPMAP_NEAREST||this.isSizePowerOfTwo()||(g=I.LINEAR),l!==this.filter&&(I.texParameteri(I.TEXTURE_2D,I.TEXTURE_MAG_FILTER,l),I.texParameteri(I.TEXTURE_2D,I.TEXTURE_MIN_FILTER,g||l),this.filter=l),p!==this.wrap&&(I.texParameteri(I.TEXTURE_2D,I.TEXTURE_WRAP_S,p),I.texParameteri(I.TEXTURE_2D,I.TEXTURE_WRAP_T,p),this.wrap=p)}isSizePowerOfTwo(){return this.size[0]===this.size[1]&&Math.log(this.size[0])/Math.LN2%1==0}destroy(){let{gl:l}=this.context;l.deleteTexture(this.texture),this.texture=null}}class Ofe{constructor(l,p,g,b=1,I=1,M=1,O=0){if(this.uid=l,p.height!==p.width)throw new RangeError("DEM tiles must be square");if(g&&!["mapbox","terrarium","custom"].includes(g))return void At(`"${g}" is not a valid encoding type. Valid types include "mapbox", "terrarium" and "custom".`);this.stride=p.height;let k=this.dim=p.height-2;switch(this.data=new Uint32Array(p.data.buffer),g){case"terrarium":this.redFactor=256,this.greenFactor=1,this.blueFactor=1/256,this.baseShift=32768;break;case"custom":this.redFactor=b,this.greenFactor=I,this.blueFactor=M,this.baseShift=O;break;default:this.redFactor=6553.6,this.greenFactor=25.6,this.blueFactor=.1,this.baseShift=1e4}for(let F=0;F<k;F++)this.data[this._idx(-1,F)]=this.data[this._idx(0,F)],this.data[this._idx(k,F)]=this.data[this._idx(k-1,F)],this.data[this._idx(F,-1)]=this.data[this._idx(F,0)],this.data[this._idx(F,k)]=this.data[this._idx(F,k-1)];this.data[this._idx(-1,-1)]=this.data[this._idx(0,0)],this.data[this._idx(k,-1)]=this.data[this._idx(k-1,0)],this.data[this._idx(-1,k)]=this.data[this._idx(0,k-1)],this.data[this._idx(k,k)]=this.data[this._idx(k-1,k-1)],this.min=Number.MAX_SAFE_INTEGER,this.max=Number.MIN_SAFE_INTEGER;for(let F=0;F<k;F++)for(let U=0;U<k;U++){let $=this.get(F,U);$>this.max&&(this.max=$),$<this.min&&(this.min=$)}}get(l,p){let g=new Uint8Array(this.data.buffer),b=4*this._idx(l,p);return this.unpack(g[b],g[b+1],g[b+2])}getUnpackVector(){return[this.redFactor,this.greenFactor,this.blueFactor,this.baseShift]}_idx(l,p){if(l<-1||l>=this.dim+1||p<-1||p>=this.dim+1)throw new RangeError("out of range source coordinates for DEM data");return(p+1)*this.stride+(l+1)}unpack(l,p,g){return l*this.redFactor+p*this.greenFactor+g*this.blueFactor-this.baseShift}pack(l){return Pfe(l,this.getUnpackVector())}getPixels(){return new Ou({width:this.stride,height:this.stride},new Uint8Array(this.data.buffer))}backfillBorder(l,p,g){if(this.dim!==l.dim)throw new Error("dem dimension mismatch");let b=p*this.dim,I=p*this.dim+this.dim,M=g*this.dim,O=g*this.dim+this.dim;switch(p){case-1:b=I-1;break;case 1:I=b+1}switch(g){case-1:M=O-1;break;case 1:O=M+1}let k=-p*this.dim,F=-g*this.dim;for(let U=M;U<O;U++)for(let $=b;$<I;$++)this.data[this._idx($,U)]=l.data[this._idx($+k,U+F)]}}function Pfe(f,l){let p=l[0],g=l[1],b=l[2],I=l[3],M=Math.min(p,g,b),O=Math.round((f+I)/M);return{r:Math.floor(O*M/p)%256,g:Math.floor(O*M/g)%256,b:Math.floor(O*M/b)%256}}fr("DEMData",Ofe);class dmt extends uc{constructor(l){super(l,fmt)}_createColorRamp(l){let p={elevationStops:[],colorStops:[]},g=this._transitionablePaint._values["color-relief-color"].value.expression;if(g instanceof A1&&g._styleExpression.expression instanceof Ms){this.colorRampExpression=g;let M=g._styleExpression.expression;p.elevationStops=M.labels,p.colorStops=[];for(let O of p.elevationStops)p.colorStops.push(M.evaluate({globals:{elevation:O}}))}if(p.elevationStops.length<1&&(p.elevationStops=[0],p.colorStops=[vn.transparent]),p.elevationStops.length<2&&(p.elevationStops.push(p.elevationStops[0]+1),p.colorStops.push(p.colorStops[0])),p.elevationStops.length<=l)return p;let b={elevationStops:[],colorStops:[]},I=(p.elevationStops.length-1)/(l-1);for(let M=0;M<p.elevationStops.length-.5;M+=I)b.elevationStops.push(p.elevationStops[Math.round(M)]),b.colorStops.push(p.colorStops[Math.round(M)]);return At(`Too many colors in specification of ${this.id} color-relief layer, may not render properly.`),b}_colorRampChanged(){return this.colorRampExpression!=this._transitionablePaint._values["color-relief-color"].value.expression}getColorRampTextures(l,p,g){if(this.colorRampTextures&&!this._colorRampChanged())return this.colorRampTextures;let b=this._createColorRamp(p),I=new Ou({width:b.colorStops.length,height:1}),M=new Ou({width:b.colorStops.length,height:1});for(let O=0;O<b.elevationStops.length;O++){let k=Pfe(b.elevationStops[O],g);M.setPixel(0,O,new vn(k.r/255,k.g/255,k.b/255,1)),I.setPixel(0,O,b.colorStops[O])}return this.colorRampTextures={elevationTexture:new UB(l,M,l.gl.RGBA),colorTexture:new UB(l,I,l.gl.RGBA)},this.colorRampTextures}hasOffscreenPass(){return this.visibility!=="none"&&!!this.colorRampTextures}}let hmt=pa([{name:"a_pos",components:2,type:"Int16"}],4),{members:mmt}=hmt;function BB(f,l,p){let g=p.patternDependencies,b=!1;for(let I of l){let M=I.paint.get(`${f}-pattern`);M.isConstant()||(b=!0);let O=M.constantOr(null);O&&(b=!0,g[O.to]=!0,g[O.from]=!0)}return b}function VB(f,l,p,g,b){let{zoom:I,globalState:M}=g,O=b.patternDependencies;for(let k of l){let F=k.paint.get(`${f}-pattern`).value;if(F.kind!=="constant"){let U=F.evaluate({zoom:I-1,globalState:M},p,{},b.availableImages),$=F.evaluate({zoom:I,globalState:M},p,{},b.availableImages),X=F.evaluate({zoom:I+1,globalState:M},p,{},b.availableImages);U=U&&U.name?U.name:U,$=$&&$.name?$.name:$,X=X&&X.name?X.name:X,O[U]=!0,O[$]=!0,O[X]=!0,p.patterns[k.id]={min:U,mid:$,max:X}}}return p}function Dfe(f,l,p,g,b){let I;if(b===function(M,O,k,F){let U=0;for(let $=O,X=k-F;$<k;$+=F)U+=(M[X]-M[$])*(M[$+1]+M[X+1]),X=$;return U}(f,l,p,g)>0)for(let M=l;M<p;M+=g)I=Rfe(M/g|0,f[M],f[M+1],I);else for(let M=p-g;M>=l;M-=g)I=Rfe(M/g|0,f[M],f[M+1],I);return I&&$x(I,I.next)&&(CI(I),I=I.next),I}function F1(f,l){if(!f)return f;l||(l=f);let p,g=f;do if(p=!1,g.steiner||!$x(g,g.next)&&ba(g.prev,g,g.next)!==0)g=g.next;else{if(CI(g),g=l=g.prev,g===g.next)break;p=!0}while(p||g!==l);return l}function TI(f,l,p,g,b,I,M){if(!f)return;!M&&I&&function(k,F,U,$){let X=k;do X.z===0&&(X.z=GB(X.x,X.y,F,U,$)),X.prevZ=X.prev,X.nextZ=X.next,X=X.next;while(X!==k);X.prevZ.nextZ=null,X.prevZ=null,function(re){let ne,ae=1;do{let he,Se=re;re=null;let Xe=null;for(ne=0;Se;){ne++;let je=Se,Ve=0;for(let vt=0;vt<ae&&(Ve++,je=je.nextZ,je);vt++);let st=ae;for(;Ve>0||st>0&&je;)Ve!==0&&(st===0||!je||Se.z<=je.z)?(he=Se,Se=Se.nextZ,Ve--):(he=je,je=je.nextZ,st--),Xe?Xe.nextZ=he:re=he,he.prevZ=Xe,Xe=he;Se=je}Xe.nextZ=null,ae*=2}while(ne>1)}(X)}(f,g,b,I);let O=f;for(;f.prev!==f.next;){let k=f.prev,F=f.next;if(I?vmt(f,g,b,I):gmt(f))l.push(k.i,f.i,F.i),CI(f),f=F.next,O=F.next;else if((f=F)===O){M?M===1?TI(f=ymt(F1(f),l),l,p,g,b,I,2):M===2&&_mt(f,l,p,g,b,I):TI(F1(f),l,p,g,b,I,1);break}}}function gmt(f){let l=f.prev,p=f,g=f.next;if(ba(l,p,g)>=0)return!1;let b=l.x,I=p.x,M=g.x,O=l.y,k=p.y,F=g.y,U=Math.min(b,I,M),$=Math.min(O,k,F),X=Math.max(b,I,M),re=Math.max(O,k,F),ne=g.next;for(;ne!==l;){if(ne.x>=U&&ne.x<=X&&ne.y>=$&&ne.y<=re&&II(b,O,I,k,M,F,ne.x,ne.y)&&ba(ne.prev,ne,ne.next)>=0)return!1;ne=ne.next}return!0}function vmt(f,l,p,g){let b=f.prev,I=f,M=f.next;if(ba(b,I,M)>=0)return!1;let O=b.x,k=I.x,F=M.x,U=b.y,$=I.y,X=M.y,re=Math.min(O,k,F),ne=Math.min(U,$,X),ae=Math.max(O,k,F),he=Math.max(U,$,X),Se=GB(re,ne,l,p,g),Xe=GB(ae,he,l,p,g),je=f.prevZ,Ve=f.nextZ;for(;je&&je.z>=Se&&Ve&&Ve.z<=Xe;){if(je.x>=re&&je.x<=ae&&je.y>=ne&&je.y<=he&&je!==b&&je!==M&&II(O,U,k,$,F,X,je.x,je.y)&&ba(je.prev,je,je.next)>=0||(je=je.prevZ,Ve.x>=re&&Ve.x<=ae&&Ve.y>=ne&&Ve.y<=he&&Ve!==b&&Ve!==M&&II(O,U,k,$,F,X,Ve.x,Ve.y)&&ba(Ve.prev,Ve,Ve.next)>=0))return!1;Ve=Ve.nextZ}for(;je&&je.z>=Se;){if(je.x>=re&&je.x<=ae&&je.y>=ne&&je.y<=he&&je!==b&&je!==M&&II(O,U,k,$,F,X,je.x,je.y)&&ba(je.prev,je,je.next)>=0)return!1;je=je.prevZ}for(;Ve&&Ve.z<=Xe;){if(Ve.x>=re&&Ve.x<=ae&&Ve.y>=ne&&Ve.y<=he&&Ve!==b&&Ve!==M&&II(O,U,k,$,F,X,Ve.x,Ve.y)&&ba(Ve.prev,Ve,Ve.next)>=0)return!1;Ve=Ve.nextZ}return!0}function ymt(f,l){let p=f;do{let g=p.prev,b=p.next.next;!$x(g,b)&&Lfe(g,p,p.next,b)&&MI(g,b)&&MI(b,g)&&(l.push(g.i,p.i,b.i),CI(p),CI(p.next),p=f=b),p=p.next}while(p!==f);return F1(p)}function _mt(f,l,p,g,b,I){let M=f;do{let O=M.next.next;for(;O!==M.prev;){if(M.i!==O.i&&Smt(M,O)){let k=kfe(M,O);return M=F1(M,M.next),k=F1(k,k.next),TI(M,l,p,g,b,I,0),void TI(k,l,p,g,b,I,0)}O=O.next}M=M.next}while(M!==f)}function bmt(f,l){let p=f.x-l.x;return p===0&&(p=f.y-l.y,p===0)&&(p=(f.next.y-f.y)/(f.next.x-f.x)-(l.next.y-l.y)/(l.next.x-l.x)),p}function xmt(f,l){let p=function(b,I){let M=I,O=b.x,k=b.y,F,U=-1/0;if($x(b,M))return M;do{if($x(b,M.next))return M.next;if(k<=M.y&&k>=M.next.y&&M.next.y!==M.y){let ae=M.x+(k-M.y)*(M.next.x-M.x)/(M.next.y-M.y);if(ae<=O&&ae>U&&(U=ae,F=M.x<M.next.x?M:M.next,ae===O))return F}M=M.next}while(M!==I);if(!F)return null;let $=F,X=F.x,re=F.y,ne=1/0;M=F;do{if(O>=M.x&&M.x>=X&&O!==M.x&&Nfe(k<re?O:U,k,X,re,k<re?U:O,k,M.x,M.y)){let ae=Math.abs(k-M.y)/(O-M.x);MI(M,b)&&(ae<ne||ae===ne&&(M.x>F.x||M.x===F.x&&wmt(F,M)))&&(F=M,ne=ae)}M=M.next}while(M!==$);return F}(f,l);if(!p)return l;let g=kfe(p,f);return F1(g,g.next),F1(p,p.next)}function wmt(f,l){return ba(f.prev,f,l.prev)<0&&ba(l.next,f,f.next)<0}function GB(f,l,p,g,b){return(f=1431655765&((f=858993459&((f=252645135&((f=16711935&((f=(f-p)*b|0)|f<<8))|f<<4))|f<<2))|f<<1))|(l=1431655765&((l=858993459&((l=252645135&((l=16711935&((l=(l-g)*b|0)|l<<8))|l<<4))|l<<2))|l<<1))<<1}function Emt(f){let l=f,p=f;do(l.x<p.x||l.x===p.x&&l.y<p.y)&&(p=l),l=l.next;while(l!==f);return p}function Nfe(f,l,p,g,b,I,M,O){return(b-M)*(l-O)>=(f-M)*(I-O)&&(f-M)*(g-O)>=(p-M)*(l-O)&&(p-M)*(I-O)>=(b-M)*(g-O)}function II(f,l,p,g,b,I,M,O){return!(f===M&&l===O)&&Nfe(f,l,p,g,b,I,M,O)}function Smt(f,l){return f.next.i!==l.i&&f.prev.i!==l.i&&!function(p,g){let b=p;do{if(b.i!==p.i&&b.next.i!==p.i&&b.i!==g.i&&b.next.i!==g.i&&Lfe(b,b.next,p,g))return!0;b=b.next}while(b!==p);return!1}(f,l)&&(MI(f,l)&&MI(l,f)&&function(p,g){let b=p,I=!1,M=(p.x+g.x)/2,O=(p.y+g.y)/2;do b.y>O!=b.next.y>O&&b.next.y!==b.y&&M<(b.next.x-b.x)*(O-b.y)/(b.next.y-b.y)+b.x&&(I=!I),b=b.next;while(b!==p);return I}(f,l)&&(ba(f.prev,f,l.prev)||ba(f,l.prev,l))||$x(f,l)&&ba(f.prev,f,f.next)>0&&ba(l.prev,l,l.next)>0)}function ba(f,l,p){return(l.y-f.y)*(p.x-l.x)-(l.x-f.x)*(p.y-l.y)}function $x(f,l){return f.x===l.x&&f.y===l.y}function Lfe(f,l,p,g){let b=P4(ba(f,l,p)),I=P4(ba(f,l,g)),M=P4(ba(p,g,f)),O=P4(ba(p,g,l));return b!==I&&M!==O||!(b!==0||!O4(f,p,l))||!(I!==0||!O4(f,g,l))||!(M!==0||!O4(p,f,g))||!(O!==0||!O4(p,l,g))}function O4(f,l,p){return l.x<=Math.max(f.x,p.x)&&l.x>=Math.min(f.x,p.x)&&l.y<=Math.max(f.y,p.y)&&l.y>=Math.min(f.y,p.y)}function P4(f){return f>0?1:f<0?-1:0}function MI(f,l){return ba(f.prev,f,f.next)<0?ba(f,l,f.next)>=0&&ba(f,f.prev,l)>=0:ba(f,l,f.prev)<0||ba(f,f.next,l)<0}function kfe(f,l){let p=HB(f.i,f.x,f.y),g=HB(l.i,l.x,l.y),b=f.next,I=l.prev;return f.next=l,l.prev=f,p.next=b,b.prev=p,g.next=p,p.prev=g,I.next=g,g.prev=I,g}function Rfe(f,l,p,g){let b=HB(f,l,p);return g?(b.next=g.next,b.prev=g,g.next.prev=b,g.next=b):(b.prev=b,b.next=b),b}function CI(f){f.next.prev=f.prev,f.prev.next=f.next,f.prevZ&&(f.prevZ.nextZ=f.nextZ),f.nextZ&&(f.nextZ.prevZ=f.prevZ)}function HB(f,l,p){return{i:f,x:l,y:p,prev:null,next:null,z:0,prevZ:null,nextZ:null,steiner:!1}}class Wx{constructor(l,p){if(p>l)throw new Error("Min granularity must not be greater than base granularity.");this._baseZoomGranularity=l,this._minGranularity=p}getGranularityForZoomLevel(l){return Math.max(Math.floor(this._baseZoomGranularity/(1<<l)),this._minGranularity,1)}}class D4{constructor(l){this.fill=l.fill,this.line=l.line,this.tile=l.tile,this.stencil=l.stencil,this.circle=l.circle}}D4.noSubdivision=new D4({fill:new Wx(0,0),line:new Wx(0,0),tile:new Wx(0,0),stencil:new Wx(0,0),circle:1}),fr("SubdivisionGranularityExpression",Wx),fr("SubdivisionGranularitySetting",D4);let Yx=-32768,AI=32767;class Tmt{constructor(l,p){this._vertexBuffer=[],this._vertexDictionary=new Map,this._used=!1,this._granularity=l,this._granularityCellSize=ct/l,this._canonical=p}_getKey(l,p){return(l+=32768)<<16|p+32768}_vertexToIndex(l,p){if(l<-32768||p<-32768||l>32767||p>32767)throw new Error("Vertex coordinates are out of signed 16 bit integer range.");let g=0|Math.round(l),b=0|Math.round(p),I=this._getKey(g,b);if(this._vertexDictionary.has(I))return this._vertexDictionary.get(I);let M=this._vertexBuffer.length/2;return this._vertexDictionary.set(I,M),this._vertexBuffer.push(g,b),M}_subdivideTrianglesScanline(l){if(this._granularity<2)return function(b,I){let M=[];for(let O=0;O<I.length;O+=3){let k=I[O],F=I[O+1],U=I[O+2],$=b[2*k],X=b[2*k+1];(b[2*F]-$)*(b[2*U+1]-X)-(b[2*F+1]-X)*(b[2*U]-$)>0?(M.push(k),M.push(U),M.push(F)):(M.push(k),M.push(F),M.push(U))}return M}(this._vertexBuffer,l);let p=[],g=l.length;for(let b=0;b<g;b+=3){let I=[l[b+0],l[b+1],l[b+2]],M=[this._vertexBuffer[2*l[b+0]+0],this._vertexBuffer[2*l[b+0]+1],this._vertexBuffer[2*l[b+1]+0],this._vertexBuffer[2*l[b+1]+1],this._vertexBuffer[2*l[b+2]+0],this._vertexBuffer[2*l[b+2]+1]],O=1/0,k=1/0,F=-1/0,U=-1/0;for(let ae=0;ae<3;ae++){let he=M[2*ae],Se=M[2*ae+1];O=Math.min(O,he),F=Math.max(F,he),k=Math.min(k,Se),U=Math.max(U,Se)}if(O===F||k===U)continue;let $=Math.floor(O/this._granularityCellSize),X=Math.ceil(F/this._granularityCellSize),re=Math.floor(k/this._granularityCellSize),ne=Math.ceil(U/this._granularityCellSize);if($!==X||re!==ne)for(let ae=re;ae<ne;ae++){let he=this._scanlineGenerateVertexRingForCellRow(ae,M,I);Imt(this._vertexBuffer,he,p)}else p.push(...I)}return p}_scanlineGenerateVertexRingForCellRow(l,p,g){let b=l*this._granularityCellSize,I=b+this._granularityCellSize,M=[];for(let O=0;O<3;O++){let k=p[2*O],F=p[2*O+1],U=p[2*(O+1)%6],$=p[(2*(O+1)+1)%6],X=p[2*(O+2)%6],re=p[(2*(O+2)+1)%6],ne=U-k,ae=$-F,he=ne===0,Se=ae===0,Xe=(b-F)/ae,je=(I-F)/ae,Ve=Math.min(Xe,je),st=Math.max(Xe,je);if(!Se&&(Ve>=1||st<=0)||Se&&(F<b||F>I)){$>=b&&$<=I&&M.push(g[(O+1)%3]);continue}!Se&&Ve>0&&M.push(this._vertexToIndex(k+ne*Ve,F+ae*Ve));let vt=k+ne*Math.max(Ve,0),kt=k+ne*Math.min(st,1);he||this._generateIntraEdgeVertices(M,k,F,U,$,vt,kt),!Se&&st<1&&M.push(this._vertexToIndex(k+ne*st,F+ae*st)),(Se||$>=b&&$<=I)&&M.push(g[(O+1)%3]),!Se&&($<=b||$>=I)&&this._generateInterEdgeVertices(M,k,F,U,$,X,re,kt,b,I)}return M}_generateIntraEdgeVertices(l,p,g,b,I,M,O){let k=b-p,F=I-g,U=F===0,$=U?Math.min(p,b):Math.min(M,O),X=U?Math.max(p,b):Math.max(M,O),re=Math.floor($/this._granularityCellSize)+1,ne=Math.ceil(X/this._granularityCellSize)-1;if(U?p<b:M<O)for(let ae=re;ae<=ne;ae++){let he=ae*this._granularityCellSize;l.push(this._vertexToIndex(he,g+F*(he-p)/k))}else for(let ae=ne;ae>=re;ae--){let he=ae*this._granularityCellSize;l.push(this._vertexToIndex(he,g+F*(he-p)/k))}}_generateInterEdgeVertices(l,p,g,b,I,M,O,k,F,U){let $=I-g,X=M-b,re=O-I,ne=(F-I)/re,ae=(U-I)/re,he=Math.min(ne,ae),Se=Math.max(ne,ae),Xe=b+X*he,je=Math.floor(Math.min(Xe,k)/this._granularityCellSize)+1,Ve=Math.ceil(Math.max(Xe,k)/this._granularityCellSize)-1,st=k<Xe,vt=re===0;if(vt&&(O===F||O===U))return;if(vt||he>=1||Se<=0){let er=g-O,Ht=M+(p-M)*Math.min((F-O)/er,(U-O)/er);je=Math.floor(Math.min(Ht,k)/this._granularityCellSize)+1,Ve=Math.ceil(Math.max(Ht,k)/this._granularityCellSize)-1,st=k<Ht}let kt=$>0?U:F;if(st)for(let er=je;er<=Ve;er++)l.push(this._vertexToIndex(er*this._granularityCellSize,kt));else for(let er=Ve;er>=je;er--)l.push(this._vertexToIndex(er*this._granularityCellSize,kt))}_generateOutline(l){let p=[];for(let g of l){let b=U1(g,this._granularity,!0),I=this._pointArrayToIndices(b),M=[];for(let O=1;O<I.length;O++)M.push(I[O-1]),M.push(I[O]);p.push(M)}return p}_handlePoles(l){let p=!1,g=!1;this._canonical&&(this._canonical.y===0&&(p=!0),this._canonical.y===(1<<this._canonical.z)-1&&(g=!0)),(p||g)&&this._fillPoles(l,p,g)}_ensureNoPoleVertices(){let l=this._vertexBuffer;for(let p=0;p<l.length;p+=2){let g=l[p+1];g===Yx&&(l[p+1]=-32767),g===AI&&(l[p+1]=32766)}}_generatePoleQuad(l,p,g,b,I,M){b>I!=(M===Yx)?(l.push(p),l.push(g),l.push(this._vertexToIndex(b,M)),l.push(g),l.push(this._vertexToIndex(I,M)),l.push(this._vertexToIndex(b,M))):(l.push(g),l.push(p),l.push(this._vertexToIndex(b,M)),l.push(this._vertexToIndex(I,M)),l.push(g),l.push(this._vertexToIndex(b,M)))}_fillPoles(l,p,g){let b=this._vertexBuffer,I=ct,M=l.length;for(let O=2;O<M;O+=3){let k=l[O-2],F=l[O-1],U=l[O],$=b[2*k],X=b[2*k+1],re=b[2*F],ne=b[2*F+1],ae=b[2*U],he=b[2*U+1];p&&(X===0&&ne===0&&this._generatePoleQuad(l,k,F,$,re,Yx),ne===0&&he===0&&this._generatePoleQuad(l,F,U,re,ae,Yx),he===0&&X===0&&this._generatePoleQuad(l,U,k,ae,$,Yx)),g&&(X===I&&ne===I&&this._generatePoleQuad(l,k,F,$,re,AI),ne===I&&he===I&&this._generatePoleQuad(l,F,U,re,ae,AI),he===I&&X===I&&this._generatePoleQuad(l,U,k,ae,$,AI))}}_initializeVertices(l){for(let p=0;p<l.length;p+=2)this._vertexToIndex(l[p],l[p+1])}subdividePolygonInternal(l,p){if(this._used)throw new Error("Subdivision: multiple use not allowed.");this._used=!0;let{flattened:g,holeIndices:b}=function(O){let k=[],F=[];for(let U of O)if(U.length!==0){U!==O[0]&&k.push(F.length/2);for(let $=0;$<U.length;$++)F.push(U[$].x),F.push(U[$].y)}return{flattened:F,holeIndices:k}}(l),I;this._initializeVertices(g);try{let O=function(F,U,$=2){let X=U&&U.length,re=X?U[0]*$:F.length,ne=Dfe(F,0,re,$,!0),ae=[];if(!ne||ne.next===ne.prev)return ae;let he,Se,Xe;if(X&&(ne=function(je,Ve,st,vt){let kt=[];for(let er=0,Ht=Ve.length;er<Ht;er++){let Xt=Dfe(je,Ve[er]*vt,er<Ht-1?Ve[er+1]*vt:je.length,vt,!1);Xt===Xt.next&&(Xt.steiner=!0),kt.push(Emt(Xt))}kt.sort(bmt);for(let er=0;er<kt.length;er++)st=xmt(kt[er],st);return st}(F,U,ne,$)),F.length>80*$){he=F[0],Se=F[1];let je=he,Ve=Se;for(let st=$;st<re;st+=$){let vt=F[st],kt=F[st+1];vt<he&&(he=vt),kt<Se&&(Se=kt),vt>je&&(je=vt),kt>Ve&&(Ve=kt)}Xe=Math.max(je-he,Ve-Se),Xe=Xe!==0?32767/Xe:0}return TI(ne,ae,$,he,Se,Xe,0),ae}(g,b),k=this._convertIndices(g,O);I=this._subdivideTrianglesScanline(k)}catch(O){console.error(O)}let M=[];return p&&(M=this._generateOutline(l)),this._ensureNoPoleVertices(),this._handlePoles(I),{verticesFlattened:this._vertexBuffer,indicesTriangles:I,indicesLineList:M}}_convertIndices(l,p){let g=[];for(let b=0;b<p.length;b++)g.push(this._vertexToIndex(l[2*p[b]],l[2*p[b]+1]));return g}_pointArrayToIndices(l){let p=[];for(let g=0;g<l.length;g++){let b=l[g];p.push(this._vertexToIndex(b.x,b.y))}return p}}function jfe(f,l,p,g=!0){return new Tmt(p,l).subdividePolygonInternal(f,g)}function U1(f,l,p=!1){if(!f||f.length<1)return[];if(f.length<2)return[];let g=f[0],b=f[f.length-1],I=p&&(g.x!==b.x||g.y!==b.y);if(l<2)return I?[...f,f[0]]:[...f];let M=Math.floor(ct/l),O=[];O.push(new a(f[0].x,f[0].y));let k=f.length,F=I?k:k-1;for(let U=0;U<F;U++){let $=f[U],X=U<k-1?f[U+1]:f[0],re=$.x,ne=$.y,ae=X.x,he=X.y,Se=re!==ae,Xe=ne!==he;if(!Se&&!Xe)continue;let je=ae-re,Ve=he-ne,st=Math.abs(je),vt=Math.abs(Ve),kt=re,er=ne;for(;;){let Xt=je>0?(Math.floor(kt/M)+1)*M:(Math.ceil(kt/M)-1)*M,Ar=Ve>0?(Math.floor(er/M)+1)*M:(Math.ceil(er/M)-1)*M,Kt=Math.abs(kt-Xt),Jt=Math.abs(er-Ar),Ct=Math.abs(kt-ae),Jr=Math.abs(er-he),sn=Se?Kt/st:Number.POSITIVE_INFINITY,Br=Xe?Jt/vt:Number.POSITIVE_INFINITY;if((Ct<=Kt||!Se)&&(Jr<=Jt||!Xe))break;if(sn<Br&&Se||!Xe){kt=Xt,er+=Ve*sn;let wr=new a(kt,Math.round(er));O[O.length-1].x===wr.x&&O[O.length-1].y===wr.y||O.push(wr)}else{kt+=je*Br,er=Ar;let wr=new a(Math.round(kt),er);O[O.length-1].x===wr.x&&O[O.length-1].y===wr.y||O.push(wr)}}let Ht=new a(ae,he);O[O.length-1].x===Ht.x&&O[O.length-1].y===Ht.y||O.push(Ht)}return O}function Imt(f,l,p){if(l.length===0)throw new Error("Subdivision vertex ring is empty.");let g=0,b=f[2*l[0]];for(let k=1;k<l.length;k++){let F=f[2*l[k]];F<b&&(b=F,g=k)}let I=l.length,M=g,O=(M+1)%I;for(;;){let k=M-1>=0?M-1:I-1,F=(O+1)%I,U=f[2*l[k]],$=f[2*l[F]],X=f[2*l[M]],re=f[2*l[M]+1],ne=f[2*l[O]+1],ae=!1;if(U<$)ae=!0;else if(U>$)ae=!1;else{let he=ne-re,Se=-(f[2*l[O]]-X),Xe=re<ne?1:-1;((U-X)*he+(f[2*l[k]+1]-re)*Se)*Xe>(($-X)*he+(f[2*l[F]+1]-re)*Se)*Xe&&(ae=!0)}if(ae){let he=l[k],Se=l[M],Xe=l[O];he!==Se&&he!==Xe&&Se!==Xe&&p.push(Xe,Se,he),M--,M<0&&(M=I-1)}else{let he=l[F],Se=l[M],Xe=l[O];he!==Se&&he!==Xe&&Se!==Xe&&p.push(Xe,Se,he),O++,O>=I&&(O=0)}if(k===F)break}}function qfe(f,l,p,g,b,I,M,O,k){let F=b.length/2,U=M&&O&&k;if(F<Cn.MAX_VERTEX_ARRAY_LENGTH){let $=l.prepareSegment(F,p,g),X=$.vertexLength;for(let ae=0;ae<I.length;ae+=3)g.emplaceBack(X+I[ae],X+I[ae+1],X+I[ae+2]);let re,ne;$.vertexLength+=F,$.primitiveLength+=I.length/3,U&&(ne=M.prepareSegment(F,p,O),re=ne.vertexLength,ne.vertexLength+=F);for(let ae=0;ae<b.length;ae+=2)f(b[ae],b[ae+1]);if(U)for(let ae=0;ae<k.length;ae++){let he=k[ae];for(let Se=1;Se<he.length;Se+=2)O.emplaceBack(re+he[Se-1],re+he[Se]);ne.primitiveLength+=he.length/2}}else(function($,X,re,ne,ae,he){let Se=[];for(let vt=0;vt<ne.length/2;vt++)Se.push(-1);let Xe={count:0},je=0,Ve=$.getOrCreateLatestSegment(X,re),st=Ve.vertexLength;for(let vt=2;vt<ae.length;vt+=3){let kt=ae[vt-2],er=ae[vt-1],Ht=ae[vt],Xt=Se[kt]<je,Ar=Se[er]<je,Kt=Se[Ht]<je;Ve.vertexLength+((Xt?1:0)+(Ar?1:0)+(Kt?1:0))>Cn.MAX_VERTEX_ARRAY_LENGTH&&(Ve=$.createNewSegment(X,re),je=Xe.count,Xt=!0,Ar=!0,Kt=!0,st=0);let Jt=OI(Se,ne,he,Xe,kt,Xt,Ve),Ct=OI(Se,ne,he,Xe,er,Ar,Ve),Jr=OI(Se,ne,he,Xe,Ht,Kt,Ve);re.emplaceBack(st+Jt-je,st+Ct-je,st+Jr-je),Ve.primitiveLength++}})(l,p,g,b,I,f),U&&function($,X,re,ne,ae,he){let Se=[];for(let vt=0;vt<ne.length/2;vt++)Se.push(-1);let Xe={count:0},je=0,Ve=$.getOrCreateLatestSegment(X,re),st=Ve.vertexLength;for(let vt=0;vt<ae.length;vt++){let kt=ae[vt];for(let er=1;er<ae[vt].length;er+=2){let Ht=kt[er-1],Xt=kt[er],Ar=Se[Ht]<je,Kt=Se[Xt]<je;Ve.vertexLength+((Ar?1:0)+(Kt?1:0))>Cn.MAX_VERTEX_ARRAY_LENGTH&&(Ve=$.createNewSegment(X,re),je=Xe.count,Ar=!0,Kt=!0,st=0);let Jt=OI(Se,ne,he,Xe,Ht,Ar,Ve),Ct=OI(Se,ne,he,Xe,Xt,Kt,Ve);re.emplaceBack(st+Jt-je,st+Ct-je),Ve.primitiveLength++}}}(M,p,O,b,k,f),l.forceNewSegmentOnNextPrepare(),M==null||M.forceNewSegmentOnNextPrepare()}function OI(f,l,p,g,b,I,M){if(I){let O=g.count;return p(l[2*b],l[2*b+1]),f[b]=g.count,g.count++,M.vertexLength++,O}return f[b]}class $B{constructor(l){this.zoom=l.zoom,this.globalState=l.globalState,this.overscaling=l.overscaling,this.layers=l.layers,this.layerIds=this.layers.map(p=>p.id),this.index=l.index,this.hasPattern=!1,this.patternFeatures=[],this.layoutVertexArray=new ht,this.indexArray=new Qo,this.indexArray2=new Go,this.programConfigurations=new Au(l.layers,l.zoom),this.segments=new Cn,this.segments2=new Cn,this.stateDependentLayerIds=this.layers.filter(p=>p.isStateDependent()).map(p=>p.id)}populate(l,p,g){this.hasPattern=BB("fill",this.layers,p);let b=this.layers[0].layout.get("fill-sort-key"),I=!b.isConstant(),M=[];for(let{feature:O,id:k,index:F,sourceLayerIndex:U}of l){let $=this.layers[0]._featureFilter.needGeometry,X=nd(O,$);if(!this.layers[0]._featureFilter.filter(new ii(this.zoom,{globalState:this.globalState}),X,g))continue;let re=I?b.evaluate(X,{},g,p.availableImages):void 0,ne={id:k,properties:O.properties,type:O.type,sourceLayerIndex:U,index:F,geometry:$?X.geometry:_h(O),patterns:{},sortKey:re};M.push(ne)}I&&M.sort((O,k)=>O.sortKey-k.sortKey);for(let O of M){let{geometry:k,index:F,sourceLayerIndex:U}=O;if(this.hasPattern){let $=VB("fill",this.layers,O,{zoom:this.zoom,globalState:this.globalState},p);this.patternFeatures.push($)}else this.addFeature(O,k,F,g,{},p.subdivisionGranularity);p.featureIndex.insert(l[F].feature,k,F,U,this.index)}}update(l,p,g){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(l,p,this.stateDependentLayers,{imagePositions:g,globalState:this.globalState})}addFeatures(l,p,g){for(let b of this.patternFeatures)this.addFeature(b,b.geometry,b.index,p,g,l.subdivisionGranularity)}isEmpty(){return this.layoutVertexArray.length===0}uploadPending(){return!this.uploaded||this.programConfigurations.needsUpload}upload(l){this.uploaded||(this.layoutVertexBuffer=l.createVertexBuffer(this.layoutVertexArray,mmt),this.indexBuffer=l.createIndexBuffer(this.indexArray),this.indexBuffer2=l.createIndexBuffer(this.indexArray2)),this.programConfigurations.upload(l),this.uploaded=!0}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.indexBuffer2.destroy(),this.programConfigurations.destroy(),this.segments.destroy(),this.segments2.destroy())}addFeature(l,p,g,b,I,M){for(let O of S1(p,500)){let k=jfe(O,b,M.fill.getGranularityForZoomLevel(b.z)),F=this.layoutVertexArray;qfe((U,$)=>{F.emplaceBack(U,$)},this.segments,this.layoutVertexArray,this.indexArray,k.verticesFlattened,k.indicesTriangles,this.segments2,this.indexArray2,k.indicesLineList)}this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,l,g,{imagePositions:I,canonical:b,globalState:this.globalState})}}let zfe,Ffe;fr("FillBucket",$B,{omit:["layers","patternFeatures"]});var Mmt={get paint(){return Ffe=Ffe||new ml({"fill-antialias":new Sr(Ae.paint_fill["fill-antialias"]),"fill-opacity":new Kr(Ae.paint_fill["fill-opacity"]),"fill-color":new Kr(Ae.paint_fill["fill-color"]),"fill-outline-color":new Kr(Ae.paint_fill["fill-outline-color"]),"fill-translate":new Sr(Ae.paint_fill["fill-translate"]),"fill-translate-anchor":new Sr(Ae.paint_fill["fill-translate-anchor"]),"fill-pattern":new qx(Ae.paint_fill["fill-pattern"])})},get layout(){return zfe=zfe||new ml({"fill-sort-key":new Kr(Ae.layout_fill["fill-sort-key"])})}};class Cmt extends uc{constructor(l){super(l,Mmt)}recalculate(l,p){super.recalculate(l,p);let g=this.paint._values["fill-outline-color"];g.value.kind==="constant"&&g.value.value===void 0&&(this.paint._values["fill-outline-color"]=this.paint._values["fill-color"])}createBucket(l){return new $B(l)}queryRadius(){return C4(this.paint.get("fill-translate"))}queryIntersectsFeature({queryGeometry:l,geometry:p,transform:g,pixelsToTileUnits:b}){return yfe(A4(l,this.paint.get("fill-translate"),this.paint.get("fill-translate-anchor"),-g.bearingInRadians,b),p)}isTileClipped(){return!0}}let Amt=pa([{name:"a_pos",components:2,type:"Int16"},{name:"a_normal_ed",components:4,type:"Int16"}],4),Omt=pa([{name:"a_centroid",components:2,type:"Int16"}],4),{members:Pmt}=Amt;class Zx{constructor(l,p,g,b,I){this.properties={},this.extent=g,this.type=0,this.id=void 0,this._pbf=l,this._geometry=-1,this._keys=b,this._values=I,l.readFields(Dmt,this,p)}loadGeometry(){let l=this._pbf;l.pos=this._geometry;let p=l.readVarint()+l.pos,g=[],b,I=1,M=0,O=0,k=0;for(;l.pos<p;){if(M<=0){let F=l.readVarint();I=7&F,M=F>>3}if(M--,I===1||I===2)O+=l.readSVarint(),k+=l.readSVarint(),I===1&&(b&&g.push(b),b=[]),b&&b.push(new a(O,k));else{if(I!==7)throw new Error(`unknown command ${I}`);b&&b.push(b[0].clone())}}return b&&g.push(b),g}bbox(){let l=this._pbf;l.pos=this._geometry;let p=l.readVarint()+l.pos,g=1,b=0,I=0,M=0,O=1/0,k=-1/0,F=1/0,U=-1/0;for(;l.pos<p;){if(b<=0){let $=l.readVarint();g=7&$,b=$>>3}if(b--,g===1||g===2)I+=l.readSVarint(),M+=l.readSVarint(),I<O&&(O=I),I>k&&(k=I),M<F&&(F=M),M>U&&(U=M);else if(g!==7)throw new Error(`unknown command ${g}`)}return[O,F,k,U]}toGeoJSON(l,p,g){let b=this.extent*Math.pow(2,g),I=this.extent*l,M=this.extent*p,O=this.loadGeometry();function k(X){return[360*(X.x+I)/b-180,360/Math.PI*Math.atan(Math.exp((1-2*(X.y+M)/b)*Math.PI))-90]}function F(X){return X.map(k)}let U;if(this.type===1){let X=[];for(let ne of O)X.push(ne[0]);let re=F(X);U=X.length===1?{type:"Point",coordinates:re[0]}:{type:"MultiPoint",coordinates:re}}else if(this.type===2){let X=O.map(F);U=X.length===1?{type:"LineString",coordinates:X[0]}:{type:"MultiLineString",coordinates:X}}else{if(this.type!==3)throw new Error("unknown feature type");{let X=function(ne){let ae=ne.length;if(ae<=1)return[ne];let he=[],Se,Xe;for(let je=0;je<ae;je++){let Ve=Nmt(ne[je]);Ve!==0&&(Xe===void 0&&(Xe=Ve<0),Xe===Ve<0?(Se&&he.push(Se),Se=[ne[je]]):Se&&Se.push(ne[je]))}return Se&&he.push(Se),he}(O),re=[];for(let ne of X)re.push(ne.map(F));U=re.length===1?{type:"Polygon",coordinates:re[0]}:{type:"MultiPolygon",coordinates:re}}}let $={type:"Feature",geometry:U,properties:this.properties};return this.id!=null&&($.id=this.id),$}}function Dmt(f,l,p){f===1?l.id=p.readVarint():f===2?function(g,b){let I=g.readVarint()+g.pos;for(;g.pos<I;){let M=b._keys[g.readVarint()],O=b._values[g.readVarint()];b.properties[M]=O}}(p,l):f===3?l.type=p.readVarint():f===4&&(l._geometry=p.pos)}function Nmt(f){let l=0;for(let p,g,b=0,I=f.length,M=I-1;b<I;M=b++)p=f[b],g=f[M],l+=(g.x-p.x)*(p.y+g.y);return l}Zx.types=["Unknown","Point","LineString","Polygon"];class Ufe{constructor(l,p){this.version=1,this.name="",this.extent=4096,this.length=0,this._pbf=l,this._keys=[],this._values=[],this._features=[],l.readFields(Lmt,this,p),this.length=this._features.length}feature(l){if(l<0||l>=this._features.length)throw new Error("feature index out of bounds");this._pbf.pos=this._features[l];let p=this._pbf.readVarint()+this._pbf.pos;return new Zx(this._pbf,p,this.extent,this._keys,this._values)}}function Lmt(f,l,p){f===15?l.version=p.readVarint():f===1?l.name=p.readString():f===5?l.extent=p.readVarint():f===2?l._features.push(p.pos):f===3?l._keys.push(p.readString()):f===4&&l._values.push(function(g){let b=null,I=g.readVarint()+g.pos;for(;g.pos<I;){let M=g.readVarint()>>3;b=M===1?g.readString():M===2?g.readFloat():M===3?g.readDouble():M===4?g.readVarint64():M===5?g.readVarint():M===6?g.readSVarint():M===7?g.readBoolean():null}if(b==null)throw new Error("unknown feature value");return b}(p))}class Bfe{constructor(l,p){this.layers=l.readFields(kmt,{},p)}}function kmt(f,l,p){if(f===3){let g=new Ufe(p,p.readVarint()+p.pos);g.length&&(l[g.name]=g)}}let WB=Math.pow(2,13);function PI(f,l,p,g,b,I,M,O){f.emplaceBack(l,p,2*Math.floor(g*WB)+M,b*WB*2,I*WB*2,Math.round(O))}class YB{constructor(l){this.zoom=l.zoom,this.globalState=l.globalState,this.overscaling=l.overscaling,this.layers=l.layers,this.layerIds=this.layers.map(p=>p.id),this.index=l.index,this.hasPattern=!1,this.layoutVertexArray=new it,this.centroidVertexArray=new Ne,this.indexArray=new Qo,this.programConfigurations=new Au(l.layers,l.zoom),this.segments=new Cn,this.stateDependentLayerIds=this.layers.filter(p=>p.isStateDependent()).map(p=>p.id)}populate(l,p,g){this.features=[],this.hasPattern=BB("fill-extrusion",this.layers,p);for(let{feature:b,id:I,index:M,sourceLayerIndex:O}of l){let k=this.layers[0]._featureFilter.needGeometry,F=nd(b,k);if(!this.layers[0]._featureFilter.filter(new ii(this.zoom,{globalState:this.globalState}),F,g))continue;let U={id:I,sourceLayerIndex:O,index:M,geometry:k?F.geometry:_h(b),properties:b.properties,type:b.type,patterns:{}};this.hasPattern?this.features.push(VB("fill-extrusion",this.layers,U,{zoom:this.zoom,globalState:this.globalState},p)):this.addFeature(U,U.geometry,M,g,{},p.subdivisionGranularity),p.featureIndex.insert(b,U.geometry,M,O,this.index,!0)}}addFeatures(l,p,g){for(let b of this.features){let{geometry:I}=b;this.addFeature(b,I,b.index,p,g,l.subdivisionGranularity)}}update(l,p,g){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(l,p,this.stateDependentLayers,{imagePositions:g,globalState:this.globalState})}isEmpty(){return this.layoutVertexArray.length===0&&this.centroidVertexArray.length===0}uploadPending(){return!this.uploaded||this.programConfigurations.needsUpload}upload(l){this.uploaded||(this.layoutVertexBuffer=l.createVertexBuffer(this.layoutVertexArray,Pmt),this.centroidVertexBuffer=l.createVertexBuffer(this.centroidVertexArray,Omt.members,!0),this.indexBuffer=l.createIndexBuffer(this.indexArray)),this.programConfigurations.upload(l),this.uploaded=!0}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy(),this.centroidVertexBuffer.destroy())}addFeature(l,p,g,b,I,M){for(let O of S1(p,500)){let k={x:0,y:0,sampleCount:0},F=this.layoutVertexArray.length;this.processPolygon(k,b,l,O,M);let U=this.layoutVertexArray.length-F,$=Math.floor(k.x/k.sampleCount),X=Math.floor(k.y/k.sampleCount);for(let re=0;re<U;re++)this.centroidVertexArray.emplaceBack($,X)}this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,l,g,{imagePositions:I,canonical:b,globalState:this.globalState})}processPolygon(l,p,g,b,I){if(b.length<1||Vfe(b[0]))return;for(let $ of b)$.length!==0&&Rmt(l,$);let M={segment:this.segments.prepareSegment(4,this.layoutVertexArray,this.indexArray)},O=I.fill.getGranularityForZoomLevel(p.z),k=Zx.types[g.type]==="Polygon";for(let $ of b){if($.length===0||Vfe($))continue;let X=U1($,O,k);this._generateSideFaces(X,M)}if(!k)return;let F=jfe(b,p,O,!1),U=this.layoutVertexArray;qfe(($,X)=>{PI(U,$,X,0,0,1,1,0)},this.segments,this.layoutVertexArray,this.indexArray,F.verticesFlattened,F.indicesTriangles)}_generateSideFaces(l,p){let g=0;for(let b=1;b<l.length;b++){let I=l[b],M=l[b-1];if(jmt(I,M))continue;p.segment.vertexLength+4>Cn.MAX_VERTEX_ARRAY_LENGTH&&(p.segment=this.segments.prepareSegment(4,this.layoutVertexArray,this.indexArray));let O=I.sub(M)._perp()._unit(),k=M.dist(I);g+k>32768&&(g=0),PI(this.layoutVertexArray,I.x,I.y,O.x,O.y,0,0,g),PI(this.layoutVertexArray,I.x,I.y,O.x,O.y,0,1,g),g+=k,PI(this.layoutVertexArray,M.x,M.y,O.x,O.y,0,0,g),PI(this.layoutVertexArray,M.x,M.y,O.x,O.y,0,1,g);let F=p.segment.vertexLength;this.indexArray.emplaceBack(F,F+2,F+1),this.indexArray.emplaceBack(F+1,F+2,F+3),p.segment.vertexLength+=4,p.segment.primitiveLength+=2}}}function Rmt(f,l){for(let p=0;p<l.length;p++){let g=l[p];p===l.length-1&&l[0].x===g.x&&l[0].y===g.y||(f.x+=g.x,f.y+=g.y,f.sampleCount++)}}function jmt(f,l){return f.x===l.x&&(f.x<0||f.x>ct)||f.y===l.y&&(f.y<0||f.y>ct)}function Vfe(f){return f.every(l=>l.x<0)||f.every(l=>l.x>ct)||f.every(l=>l.y<0)||f.every(l=>l.y>ct)}let Gfe;fr("FillExtrusionBucket",YB,{omit:["layers","features"]});var qmt={get paint(){return Gfe=Gfe||new ml({"fill-extrusion-opacity":new Sr(Ae["paint_fill-extrusion"]["fill-extrusion-opacity"]),"fill-extrusion-color":new Kr(Ae["paint_fill-extrusion"]["fill-extrusion-color"]),"fill-extrusion-translate":new Sr(Ae["paint_fill-extrusion"]["fill-extrusion-translate"]),"fill-extrusion-translate-anchor":new Sr(Ae["paint_fill-extrusion"]["fill-extrusion-translate-anchor"]),"fill-extrusion-pattern":new qx(Ae["paint_fill-extrusion"]["fill-extrusion-pattern"]),"fill-extrusion-height":new Kr(Ae["paint_fill-extrusion"]["fill-extrusion-height"]),"fill-extrusion-base":new Kr(Ae["paint_fill-extrusion"]["fill-extrusion-base"]),"fill-extrusion-vertical-gradient":new Sr(Ae["paint_fill-extrusion"]["fill-extrusion-vertical-gradient"])})}};class zmt extends uc{constructor(l){super(l,qmt)}createBucket(l){return new YB(l)}queryRadius(){return C4(this.paint.get("fill-extrusion-translate"))}is3D(){return!0}queryIntersectsFeature({queryGeometry:l,feature:p,featureState:g,geometry:b,transform:I,pixelsToTileUnits:M,pixelPosMatrix:O}){let k=A4(l,this.paint.get("fill-extrusion-translate"),this.paint.get("fill-extrusion-translate-anchor"),-I.bearingInRadians,M),F=this.paint.get("fill-extrusion-height").evaluate(p,g),U=this.paint.get("fill-extrusion-base").evaluate(p,g),$=function(re,ne){let ae=[];for(let he of re){let Se=[he.x,he.y,0,1];_e(Se,Se,ne),ae.push(new a(Se[0]/Se[3],Se[1]/Se[3]))}return ae}(k,O),X=function(re,ne,ae,he){let Se=[],Xe=[],je=he[8]*ne,Ve=he[9]*ne,st=he[10]*ne,vt=he[11]*ne,kt=he[8]*ae,er=he[9]*ae,Ht=he[10]*ae,Xt=he[11]*ae;for(let Ar of re){let Kt=[],Jt=[];for(let Ct of Ar){let Jr=Ct.x,sn=Ct.y,Br=he[0]*Jr+he[4]*sn+he[12],wr=he[1]*Jr+he[5]*sn+he[13],no=he[2]*Jr+he[6]*sn+he[14],Qi=he[3]*Jr+he[7]*sn+he[15],Va=no+st,$s=Qi+vt,lp=Br+kt,Pu=wr+er,Cs=no+Ht,Ui=Qi+Xt,cs=new a((Br+je)/$s,(wr+Ve)/$s);cs.z=Va/$s,Kt.push(cs);let As=new a(lp/Ui,Pu/Ui);As.z=Cs/Ui,Jt.push(As)}Se.push(Kt),Xe.push(Jt)}return[Se,Xe]}(b,U,F,O);return function(re,ne,ae){let he=1/0;yfe(ae,ne)&&(he=Hfe(ae,ne[0]));for(let Se=0;Se<ne.length;Se++){let Xe=ne[Se],je=re[Se];for(let Ve=0;Ve<Xe.length-1;Ve++){let st=Xe[Ve],vt=[st,Xe[Ve+1],je[Ve+1],je[Ve],st];vfe(ae,vt)&&(he=Math.min(he,Hfe(ae,vt)))}}return he!==1/0&&he}(X[0],X[1],$)}}function DI(f,l){return f.x*l.x+f.y*l.y}function Hfe(f,l){if(f.length===1){let p=0,g=l[p++],b;for(;!b||g.equals(b);)if(b=l[p++],!b)return 1/0;for(;p<l.length;p++){let I=l[p],M=f[0],O=b.sub(g),k=I.sub(g),F=M.sub(g),U=DI(O,O),$=DI(O,k),X=DI(k,k),re=DI(F,O),ne=DI(F,k),ae=U*X-$*$,he=(X*re-$*ne)/ae,Se=(U*ne-$*re)/ae,Xe=g.z*(1-he-Se)+b.z*he+I.z*Se;if(isFinite(Xe))return Xe}return 1/0}{let p=1/0;for(let g of l)p=Math.min(p,g.z);return p}}let Fmt=pa([{name:"a_pos_normal",components:2,type:"Int16"},{name:"a_data",components:4,type:"Uint8"}],4),{members:Umt}=Fmt,Bmt=pa([{name:"a_uv_x",components:1,type:"Float32"},{name:"a_split_index",components:1,type:"Float32"}]),{members:Vmt}=Bmt,Gmt=Math.cos(Math.PI/180*37.5),$fe=Math.pow(2,14)/.5;class ZB{constructor(l){this.zoom=l.zoom,this.globalState=l.globalState,this.overscaling=l.overscaling,this.layers=l.layers,this.layerIds=this.layers.map(p=>p.id),this.index=l.index,this.hasPattern=!1,this.patternFeatures=[],this.lineClipsArray=[],this.gradients={},this.layers.forEach(p=>{this.gradients[p.id]={}}),this.layoutVertexArray=new at,this.layoutVertexArray2=new dt,this.indexArray=new Qo,this.programConfigurations=new Au(l.layers,l.zoom),this.segments=new Cn,this.maxLineLength=0,this.stateDependentLayerIds=this.layers.filter(p=>p.isStateDependent()).map(p=>p.id)}populate(l,p,g){this.hasPattern=BB("line",this.layers,p);let b=this.layers[0].layout.get("line-sort-key"),I=!b.isConstant(),M=[];for(let{feature:O,id:k,index:F,sourceLayerIndex:U}of l){let $=this.layers[0]._featureFilter.needGeometry,X=nd(O,$);if(!this.layers[0]._featureFilter.filter(new ii(this.zoom,{globalState:this.globalState}),X,g))continue;let re=I?b.evaluate(X,{},g):void 0,ne={id:k,properties:O.properties,type:O.type,sourceLayerIndex:U,index:F,geometry:$?X.geometry:_h(O),patterns:{},sortKey:re};M.push(ne)}I&&M.sort((O,k)=>O.sortKey-k.sortKey);for(let O of M){let{geometry:k,index:F,sourceLayerIndex:U}=O;if(this.hasPattern){let $=VB("line",this.layers,O,{zoom:this.zoom,globalState:this.globalState},p);this.patternFeatures.push($)}else this.addFeature(O,k,F,g,{},p.subdivisionGranularity);p.featureIndex.insert(l[F].feature,k,F,U,this.index)}}update(l,p,g){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(l,p,this.stateDependentLayers,{imagePositions:g,globalState:this.globalState})}addFeatures(l,p,g){for(let b of this.patternFeatures)this.addFeature(b,b.geometry,b.index,p,g,l.subdivisionGranularity)}isEmpty(){return this.layoutVertexArray.length===0}uploadPending(){return!this.uploaded||this.programConfigurations.needsUpload}upload(l){this.uploaded||(this.layoutVertexArray2.length!==0&&(this.layoutVertexBuffer2=l.createVertexBuffer(this.layoutVertexArray2,Vmt)),this.layoutVertexBuffer=l.createVertexBuffer(this.layoutVertexArray,Umt),this.indexBuffer=l.createIndexBuffer(this.indexArray)),this.programConfigurations.upload(l),this.uploaded=!0}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy())}lineFeatureClips(l){if(l.properties&&Object.prototype.hasOwnProperty.call(l.properties,"mapbox_clip_start")&&Object.prototype.hasOwnProperty.call(l.properties,"mapbox_clip_end"))return{start:+l.properties.mapbox_clip_start,end:+l.properties.mapbox_clip_end}}addFeature(l,p,g,b,I,M){let O=this.layers[0].layout,k=O.get("line-join").evaluate(l,{}),F=O.get("line-cap"),U=O.get("line-miter-limit"),$=O.get("line-round-limit");this.lineClips=this.lineFeatureClips(l);for(let X of p)this.addLine(X,l,k,F,U,$,b,M);this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,l,g,{imagePositions:I,canonical:b,globalState:this.globalState})}addLine(l,p,g,b,I,M,O,k){if(this.distance=0,this.scaledDistance=0,this.totalDistance=0,l=U1(l,O?k.line.getGranularityForZoomLevel(O.z):1),this.lineClips){this.lineClipsArray.push(this.lineClips);for(let je=0;je<l.length-1;je++)this.totalDistance+=l[je].dist(l[je+1]);this.updateScaledDistance(),this.maxLineLength=Math.max(this.maxLineLength,this.totalDistance)}let F=Zx.types[p.type]==="Polygon",U=l.length;for(;U>=2&&l[U-1].equals(l[U-2]);)U--;let $=0;for(;$<U-1&&l[$].equals(l[$+1]);)$++;if(U<(F?3:2))return;g==="bevel"&&(I=1.05);let X=this.overscaling<=16?122880/(512*this.overscaling):0,re=this.segments.prepareSegment(10*U,this.layoutVertexArray,this.indexArray),ne,ae,he,Se,Xe;this.e1=this.e2=-1,F&&(ne=l[U-2],Xe=l[$].sub(ne)._unit()._perp());for(let je=$;je<U;je++){if(he=je===U-1?F?l[$+1]:void 0:l[je+1],he&&l[je].equals(he))continue;Xe&&(Se=Xe),ne&&(ae=ne),ne=l[je],Xe=he?he.sub(ne)._unit()._perp():Se,Se=Se||Xe;let Ve=Se.add(Xe);Ve.x===0&&Ve.y===0||Ve._unit();let st=Se.x*Xe.x+Se.y*Xe.y,vt=Ve.x*Xe.x+Ve.y*Xe.y,kt=vt!==0?1/vt:1/0,er=2*Math.sqrt(2-2*vt),Ht=vt<Gmt&&ae&&he,Xt=Se.x*Xe.y-Se.y*Xe.x>0;if(Ht&&je>$){let Jt=ne.dist(ae);if(Jt>2*X){let Ct=ne.sub(ne.sub(ae)._mult(X/Jt)._round());this.updateDistance(ae,Ct),this.addCurrentVertex(Ct,Se,0,0,re),ae=Ct}}let Ar=ae&&he,Kt=Ar?g:F?"butt":b;if(Ar&&Kt==="round"&&(kt<M?Kt="miter":kt<=2&&(Kt="fakeround")),Kt==="miter"&&kt>I&&(Kt="bevel"),Kt==="bevel"&&(kt>2&&(Kt="flipbevel"),kt<I&&(Kt="miter")),ae&&this.updateDistance(ae,ne),Kt==="miter")Ve._mult(kt),this.addCurrentVertex(ne,Ve,0,0,re);else if(Kt==="flipbevel"){if(kt>100)Ve=Xe.mult(-1);else{let Jt=kt*Se.add(Xe).mag()/Se.sub(Xe).mag();Ve._perp()._mult(Jt*(Xt?-1:1))}this.addCurrentVertex(ne,Ve,0,0,re),this.addCurrentVertex(ne,Ve.mult(-1),0,0,re)}else if(Kt==="bevel"||Kt==="fakeround"){let Jt=-Math.sqrt(kt*kt-1),Ct=Xt?Jt:0,Jr=Xt?0:Jt;if(ae&&this.addCurrentVertex(ne,Se,Ct,Jr,re),Kt==="fakeround"){let sn=Math.round(180*er/Math.PI/20);for(let Br=1;Br<sn;Br++){let wr=Br/sn;if(wr!==.5){let Qi=wr-.5;wr+=wr*Qi*(wr-1)*((1.0904+st*(st*(3.55645-1.43519*st)-3.2452))*Qi*Qi+(.848013+st*(.215638*st-1.06021)))}let no=Xe.sub(Se)._mult(wr)._add(Se)._unit()._mult(Xt?-1:1);this.addHalfVertex(ne,no.x,no.y,!1,Xt,0,re)}}he&&this.addCurrentVertex(ne,Xe,-Ct,-Jr,re)}else if(Kt==="butt")this.addCurrentVertex(ne,Ve,0,0,re);else if(Kt==="square"){let Jt=ae?1:-1;this.addCurrentVertex(ne,Ve,Jt,Jt,re)}else Kt==="round"&&(ae&&(this.addCurrentVertex(ne,Se,0,0,re),this.addCurrentVertex(ne,Se,1,1,re,!0)),he&&(this.addCurrentVertex(ne,Xe,-1,-1,re,!0),this.addCurrentVertex(ne,Xe,0,0,re)));if(Ht&&je<U-1){let Jt=ne.dist(he);if(Jt>2*X){let Ct=ne.add(he.sub(ne)._mult(X/Jt)._round());this.updateDistance(ne,Ct),this.addCurrentVertex(Ct,Xe,0,0,re),ne=Ct}}}}addCurrentVertex(l,p,g,b,I,M=!1){let O=p.y*b-p.x,k=-p.y-p.x*b;this.addHalfVertex(l,p.x+p.y*g,p.y-p.x*g,M,!1,g,I),this.addHalfVertex(l,O,k,M,!0,-b,I),this.distance>$fe/2&&this.totalDistance===0&&(this.distance=0,this.updateScaledDistance(),this.addCurrentVertex(l,p,g,b,I,M))}addHalfVertex({x:l,y:p},g,b,I,M,O,k){let F=.5*(this.lineClips?this.scaledDistance*($fe-1):this.scaledDistance);this.layoutVertexArray.emplaceBack((l<<1)+(I?1:0),(p<<1)+(M?1:0),Math.round(63*g)+128,Math.round(63*b)+128,1+(O===0?0:O<0?-1:1)|(63&F)<<2,F>>6),this.lineClips&&this.layoutVertexArray2.emplaceBack((this.scaledDistance-this.lineClips.start)/(this.lineClips.end-this.lineClips.start),this.lineClipsArray.length);let U=k.vertexLength++;this.e1>=0&&this.e2>=0&&(this.indexArray.emplaceBack(this.e1,U,this.e2),k.primitiveLength++),M?this.e2=U:this.e1=U}updateScaledDistance(){this.scaledDistance=this.lineClips?this.lineClips.start+(this.lineClips.end-this.lineClips.start)*this.distance/this.totalDistance:this.distance}updateDistance(l,p){this.distance+=l.dist(p),this.updateScaledDistance()}}let Wfe,Yfe;fr("LineBucket",ZB,{omit:["layers","patternFeatures"]});var Zfe={get paint(){return Yfe=Yfe||new ml({"line-opacity":new Kr(Ae.paint_line["line-opacity"]),"line-color":new Kr(Ae.paint_line["line-color"]),"line-translate":new Sr(Ae.paint_line["line-translate"]),"line-translate-anchor":new Sr(Ae.paint_line["line-translate-anchor"]),"line-width":new Kr(Ae.paint_line["line-width"]),"line-gap-width":new Kr(Ae.paint_line["line-gap-width"]),"line-offset":new Kr(Ae.paint_line["line-offset"]),"line-blur":new Kr(Ae.paint_line["line-blur"]),"line-dasharray":new hh(Ae.paint_line["line-dasharray"]),"line-pattern":new qx(Ae.paint_line["line-pattern"]),"line-gradient":new zx(Ae.paint_line["line-gradient"])})},get layout(){return Wfe=Wfe||new ml({"line-cap":new Sr(Ae.layout_line["line-cap"]),"line-join":new Kr(Ae.layout_line["line-join"]),"line-miter-limit":new Sr(Ae.layout_line["line-miter-limit"]),"line-round-limit":new Sr(Ae.layout_line["line-round-limit"]),"line-sort-key":new Kr(Ae.layout_line["line-sort-key"])})}};class Hmt extends Kr{possiblyEvaluate(l,p){return p=new ii(Math.floor(p.zoom),{now:p.now,fadeDuration:p.fadeDuration,zoomHistory:p.zoomHistory,transition:p.transition}),super.possiblyEvaluate(l,p)}evaluate(l,p,g,b){return p=De({},p,{zoom:Math.floor(p.zoom)}),super.evaluate(l,p,g,b)}}let N4;class $mt extends uc{constructor(l){super(l,Zfe),this.gradientVersion=0,N4||(N4=new Hmt(Zfe.paint.properties["line-width"].specification),N4.useIntegerZoom=!0)}_handleSpecialPaintPropertyUpdate(l){if(l==="line-gradient"){let p=this.gradientExpression();this.stepInterpolant=!!function(g){return g._styleExpression!==void 0}(p)&&p._styleExpression.expression instanceof ca,this.gradientVersion=(this.gradientVersion+1)%Number.MAX_SAFE_INTEGER}}gradientExpression(){return this._transitionablePaint._values["line-gradient"].value.expression}recalculate(l,p){super.recalculate(l,p),this.paint._values["line-floorwidth"]=N4.possiblyEvaluate(this._transitioningPaint._values["line-width"].value,l)}createBucket(l){return new ZB(l)}queryRadius(l){let p=l,g=Kfe(EI("line-width",this,p),EI("line-gap-width",this,p)),b=EI("line-offset",this,p);return g/2+Math.abs(b)+C4(this.paint.get("line-translate"))}queryIntersectsFeature({queryGeometry:l,feature:p,featureState:g,geometry:b,transform:I,pixelsToTileUnits:M}){let O=A4(l,this.paint.get("line-translate"),this.paint.get("line-translate-anchor"),-I.bearingInRadians,M),k=M/2*Kfe(this.paint.get("line-width").evaluate(p,g),this.paint.get("line-gap-width").evaluate(p,g)),F=this.paint.get("line-offset").evaluate(p,g);return F&&(b=function(U,$){let X=[];for(let re=0;re<U.length;re++){let ne=U[re],ae=[];for(let he=0;he<ne.length;he++){let Se=ne[he-1],Xe=ne[he],je=ne[he+1],Ve=he===0?new a(0,0):Xe.sub(Se)._unit()._perp(),st=he===ne.length-1?new a(0,0):je.sub(Xe)._unit()._perp(),vt=Ve._add(st)._unit(),kt=vt.x*st.x+vt.y*st.y;kt!==0&&vt._mult(1/kt),ae.push(vt._mult($)._add(Xe))}X.push(ae)}return X}(b,F*M)),function(U,$,X){for(let re=0;re<$.length;re++){let ne=$[re];if(U.length>=3){for(let ae=0;ae<ne.length;ae++)if(Hx(U,ne[ae]))return!0}if(nmt(U,ne,X))return!0}return!1}(O,b,k)}isTileClipped(){return!0}}function Kfe(f,l){return l>0?l+2*f:f}let Wmt=pa([{name:"a_pos_offset",components:4,type:"Int16"},{name:"a_data",components:4,type:"Uint16"},{name:"a_pixeloffset",components:4,type:"Int16"}],4),Ymt=pa([{name:"a_projected_pos",components:3,type:"Float32"}],4);pa([{name:"a_fade_opacity",components:1,type:"Uint32"}],4);let Zmt=pa([{name:"a_placed",components:2,type:"Uint8"},{name:"a_shift",components:2,type:"Float32"},{name:"a_box_real",components:2,type:"Int16"}]);pa([{type:"Int16",name:"anchorPointX"},{type:"Int16",name:"anchorPointY"},{type:"Int16",name:"x1"},{type:"Int16",name:"y1"},{type:"Int16",name:"x2"},{type:"Int16",name:"y2"},{type:"Uint32",name:"featureIndex"},{type:"Uint16",name:"sourceLayerIndex"},{type:"Uint16",name:"bucketIndex"}]);let Xfe=pa([{name:"a_pos",components:2,type:"Int16"},{name:"a_anchor_pos",components:2,type:"Int16"},{name:"a_extrude",components:2,type:"Int16"}],4),Kmt=pa([{name:"a_pos",components:2,type:"Float32"},{name:"a_radius",components:1,type:"Float32"},{name:"a_flags",components:2,type:"Int16"}],4);function Xmt(f,l,p){return f.sections.forEach(g=>{g.text=function(b,I,M){let O=I.layout.get("text-transform").evaluate(M,{});return O==="uppercase"?b=b.toLocaleUpperCase():O==="lowercase"&&(b=b.toLocaleLowerCase()),np.applyArabicShaping&&(b=np.applyArabicShaping(b)),b}(g.text,l,p)}),f}pa([{name:"triangle",components:3,type:"Uint16"}]),pa([{type:"Int16",name:"anchorX"},{type:"Int16",name:"anchorY"},{type:"Uint16",name:"glyphStartIndex"},{type:"Uint16",name:"numGlyphs"},{type:"Uint32",name:"vertexStartIndex"},{type:"Uint32",name:"lineStartIndex"},{type:"Uint32",name:"lineLength"},{type:"Uint16",name:"segment"},{type:"Uint16",name:"lowerSize"},{type:"Uint16",name:"upperSize"},{type:"Float32",name:"lineOffsetX"},{type:"Float32",name:"lineOffsetY"},{type:"Uint8",name:"writingMode"},{type:"Uint8",name:"placedOrientation"},{type:"Uint8",name:"hidden"},{type:"Uint32",name:"crossTileID"},{type:"Int16",name:"associatedIconIndex"}]),pa([{type:"Int16",name:"anchorX"},{type:"Int16",name:"anchorY"},{type:"Int16",name:"rightJustifiedTextSymbolIndex"},{type:"Int16",name:"centerJustifiedTextSymbolIndex"},{type:"Int16",name:"leftJustifiedTextSymbolIndex"},{type:"Int16",name:"verticalPlacedTextSymbolIndex"},{type:"Int16",name:"placedIconSymbolIndex"},{type:"Int16",name:"verticalPlacedIconSymbolIndex"},{type:"Uint16",name:"key"},{type:"Uint16",name:"textBoxStartIndex"},{type:"Uint16",name:"textBoxEndIndex"},{type:"Uint16",name:"verticalTextBoxStartIndex"},{type:"Uint16",name:"verticalTextBoxEndIndex"},{type:"Uint16",name:"iconBoxStartIndex"},{type:"Uint16",name:"iconBoxEndIndex"},{type:"Uint16",name:"verticalIconBoxStartIndex"},{type:"Uint16",name:"verticalIconBoxEndIndex"},{type:"Uint16",name:"featureIndex"},{type:"Uint16",name:"numHorizontalGlyphVertices"},{type:"Uint16",name:"numVerticalGlyphVertices"},{type:"Uint16",name:"numIconVertices"},{type:"Uint16",name:"numVerticalIconVertices"},{type:"Uint16",name:"useRuntimeCollisionCircles"},{type:"Uint32",name:"crossTileID"},{type:"Float32",name:"textBoxScale"},{type:"Float32",name:"collisionCircleDiameter"},{type:"Uint16",name:"textAnchorOffsetStartIndex"},{type:"Uint16",name:"textAnchorOffsetEndIndex"}]),pa([{type:"Float32",name:"offsetX"}]),pa([{type:"Int16",name:"x"},{type:"Int16",name:"y"},{type:"Int16",name:"tileUnitDistanceFromAnchor"}]),pa([{type:"Uint16",name:"textAnchor"},{type:"Float32",components:2,name:"textOffset"}]);let NI={"!":"\uFE15","#":"\uFF03",$:"\uFF04","%":"\uFF05","&":"\uFF06","(":"\uFE35",")":"\uFE36","*":"\uFF0A","+":"\uFF0B",",":"\uFE10","-":"\uFE32",".":"\u30FB","/":"\uFF0F",":":"\uFE13",";":"\uFE14","<":"\uFE3F","=":"\uFF1D",">":"\uFE40","?":"\uFE16","@":"\uFF20","[":"\uFE47","\\":"\uFF3C","]":"\uFE48","^":"\uFF3E",_:"\uFE33","`":"\uFF40","{":"\uFE37","|":"\u2015","}":"\uFE38","~":"\uFF5E","\xA2":"\uFFE0","\xA3":"\uFFE1","\xA5":"\uFFE5","\xA6":"\uFFE4","\xAC":"\uFFE2","\xAF":"\uFFE3","\u2013":"\uFE32","\u2014":"\uFE31","\u2018":"\uFE43","\u2019":"\uFE44","\u201C":"\uFE41","\u201D":"\uFE42","\u2026":"\uFE19","\u2027":"\u30FB","\u20A9":"\uFFE6","\u3001":"\uFE11","\u3002":"\uFE12","\u3008":"\uFE3F","\u3009":"\uFE40","\u300A":"\uFE3D","\u300B":"\uFE3E","\u300C":"\uFE41","\u300D":"\uFE42","\u300E":"\uFE43","\u300F":"\uFE44","\u3010":"\uFE3B","\u3011":"\uFE3C","\u3014":"\uFE39","\u3015":"\uFE3A","\u3016":"\uFE17","\u3017":"\uFE18","\uFF01":"\uFE15","\uFF08":"\uFE35","\uFF09":"\uFE36","\uFF0C":"\uFE10","\uFF0D":"\uFE32","\uFF0E":"\u30FB","\uFF1A":"\uFE13","\uFF1B":"\uFE14","\uFF1C":"\uFE3F","\uFF1E":"\uFE40","\uFF1F":"\uFE16","\uFF3B":"\uFE47","\uFF3D":"\uFE48","\uFF3F":"\uFE33","\uFF5B":"\uFE37","\uFF5C":"\u2015","\uFF5D":"\uFE38","\uFF5F":"\uFE35","\uFF60":"\uFE36","\uFF61":"\uFE12","\uFF62":"\uFE41","\uFF63":"\uFE42"};var us=24;let KB=4294967296,Jfe=1/KB,Qfe=typeof TextDecoder=="undefined"?null:new TextDecoder("utf-8");class XB{constructor(l=new Uint8Array(16)){this.buf=ArrayBuffer.isView(l)?l:new Uint8Array(l),this.dataView=new DataView(this.buf.buffer),this.pos=0,this.type=0,this.length=this.buf.length}readFields(l,p,g=this.length){for(;this.pos<g;){let b=this.readVarint(),I=b>>3,M=this.pos;this.type=7&b,l(I,p,this),this.pos===M&&this.skip(b)}return p}readMessage(l,p){return this.readFields(l,p,this.readVarint()+this.pos)}readFixed32(){let l=this.dataView.getUint32(this.pos,!0);return this.pos+=4,l}readSFixed32(){let l=this.dataView.getInt32(this.pos,!0);return this.pos+=4,l}readFixed64(){let l=this.dataView.getUint32(this.pos,!0)+this.dataView.getUint32(this.pos+4,!0)*KB;return this.pos+=8,l}readSFixed64(){let l=this.dataView.getUint32(this.pos,!0)+this.dataView.getInt32(this.pos+4,!0)*KB;return this.pos+=8,l}readFloat(){let l=this.dataView.getFloat32(this.pos,!0);return this.pos+=4,l}readDouble(){let l=this.dataView.getFloat64(this.pos,!0);return this.pos+=8,l}readVarint(l){let p=this.buf,g,b;return b=p[this.pos++],g=127&b,b<128?g:(b=p[this.pos++],g|=(127&b)<<7,b<128?g:(b=p[this.pos++],g|=(127&b)<<14,b<128?g:(b=p[this.pos++],g|=(127&b)<<21,b<128?g:(b=p[this.pos],g|=(15&b)<<28,function(I,M,O){let k=O.buf,F,U;if(U=k[O.pos++],F=(112&U)>>4,U<128||(U=k[O.pos++],F|=(127&U)<<3,U<128)||(U=k[O.pos++],F|=(127&U)<<10,U<128)||(U=k[O.pos++],F|=(127&U)<<17,U<128)||(U=k[O.pos++],F|=(127&U)<<24,U<128)||(U=k[O.pos++],F|=(1&U)<<31,U<128))return Kx(I,F,M);throw new Error("Expected varint not more than 10 bytes")}(g,l,this)))))}readVarint64(){return this.readVarint(!0)}readSVarint(){let l=this.readVarint();return l%2==1?(l+1)/-2:l/2}readBoolean(){return!!this.readVarint()}readString(){let l=this.readVarint()+this.pos,p=this.pos;return this.pos=l,l-p>=12&&Qfe?Qfe.decode(this.buf.subarray(p,l)):function(g,b,I){let M="",O=b;for(;O<I;){let k=g[O],F,U,$,X=null,re=k>239?4:k>223?3:k>191?2:1;if(O+re>I)break;re===1?k<128&&(X=k):re===2?(F=g[O+1],(192&F)==128&&(X=(31&k)<<6|63&F,X<=127&&(X=null))):re===3?(F=g[O+1],U=g[O+2],(192&F)==128&&(192&U)==128&&(X=(15&k)<<12|(63&F)<<6|63&U,(X<=2047||X>=55296&&X<=57343)&&(X=null))):re===4&&(F=g[O+1],U=g[O+2],$=g[O+3],(192&F)==128&&(192&U)==128&&(192&$)==128&&(X=(15&k)<<18|(63&F)<<12|(63&U)<<6|63&$,(X<=65535||X>=1114112)&&(X=null))),X===null?(X=65533,re=1):X>65535&&(X-=65536,M+=String.fromCharCode(X>>>10&1023|55296),X=56320|1023&X),M+=String.fromCharCode(X),O+=re}return M}(this.buf,p,l)}readBytes(){let l=this.readVarint()+this.pos,p=this.buf.subarray(this.pos,l);return this.pos=l,p}readPackedVarint(l=[],p){let g=this.readPackedEnd();for(;this.pos<g;)l.push(this.readVarint(p));return l}readPackedSVarint(l=[]){let p=this.readPackedEnd();for(;this.pos<p;)l.push(this.readSVarint());return l}readPackedBoolean(l=[]){let p=this.readPackedEnd();for(;this.pos<p;)l.push(this.readBoolean());return l}readPackedFloat(l=[]){let p=this.readPackedEnd();for(;this.pos<p;)l.push(this.readFloat());return l}readPackedDouble(l=[]){let p=this.readPackedEnd();for(;this.pos<p;)l.push(this.readDouble());return l}readPackedFixed32(l=[]){let p=this.readPackedEnd();for(;this.pos<p;)l.push(this.readFixed32());return l}readPackedSFixed32(l=[]){let p=this.readPackedEnd();for(;this.pos<p;)l.push(this.readSFixed32());return l}readPackedFixed64(l=[]){let p=this.readPackedEnd();for(;this.pos<p;)l.push(this.readFixed64());return l}readPackedSFixed64(l=[]){let p=this.readPackedEnd();for(;this.pos<p;)l.push(this.readSFixed64());return l}readPackedEnd(){return this.type===2?this.readVarint()+this.pos:this.pos+1}skip(l){let p=7&l;if(p===0)for(;this.buf[this.pos++]>127;);else if(p===2)this.pos=this.readVarint()+this.pos;else if(p===5)this.pos+=4;else{if(p!==1)throw new Error(`Unimplemented type: ${p}`);this.pos+=8}}writeTag(l,p){this.writeVarint(l<<3|p)}realloc(l){let p=this.length||16;for(;p<this.pos+l;)p*=2;if(p!==this.length){let g=new Uint8Array(p);g.set(this.buf),this.buf=g,this.dataView=new DataView(g.buffer),this.length=p}}finish(){return this.length=this.pos,this.pos=0,this.buf.subarray(0,this.length)}writeFixed32(l){this.realloc(4),this.dataView.setInt32(this.pos,l,!0),this.pos+=4}writeSFixed32(l){this.realloc(4),this.dataView.setInt32(this.pos,l,!0),this.pos+=4}writeFixed64(l){this.realloc(8),this.dataView.setInt32(this.pos,-1&l,!0),this.dataView.setInt32(this.pos+4,Math.floor(l*Jfe),!0),this.pos+=8}writeSFixed64(l){this.realloc(8),this.dataView.setInt32(this.pos,-1&l,!0),this.dataView.setInt32(this.pos+4,Math.floor(l*Jfe),!0),this.pos+=8}writeVarint(l){(l=+l||0)>268435455||l<0?function(p,g){let b,I;if(p>=0?(b=p%4294967296|0,I=p/4294967296|0):(b=~(-p%4294967296),I=~(-p/4294967296),4294967295^b?b=b+1|0:(b=0,I=I+1|0)),p>=18446744073709552e3||p<-18446744073709552e3)throw new Error("Given varint doesn't fit into 10 bytes");g.realloc(10),function(M,O,k){k.buf[k.pos++]=127&M|128,M>>>=7,k.buf[k.pos++]=127&M|128,M>>>=7,k.buf[k.pos++]=127&M|128,M>>>=7,k.buf[k.pos++]=127&M|128,k.buf[k.pos]=127&(M>>>=7)}(b,0,g),function(M,O){let k=(7&M)<<4;O.buf[O.pos++]|=k|((M>>>=3)?128:0),M&&(O.buf[O.pos++]=127&M|((M>>>=7)?128:0),M&&(O.buf[O.pos++]=127&M|((M>>>=7)?128:0),M&&(O.buf[O.pos++]=127&M|((M>>>=7)?128:0),M&&(O.buf[O.pos++]=127&M|((M>>>=7)?128:0),M&&(O.buf[O.pos++]=127&M)))))}(I,g)}(l,this):(this.realloc(4),this.buf[this.pos++]=127&l|(l>127?128:0),l<=127||(this.buf[this.pos++]=127&(l>>>=7)|(l>127?128:0),l<=127||(this.buf[this.pos++]=127&(l>>>=7)|(l>127?128:0),l<=127||(this.buf[this.pos++]=l>>>7&127))))}writeSVarint(l){this.writeVarint(l<0?2*-l-1:2*l)}writeBoolean(l){this.writeVarint(+l)}writeString(l){l=String(l),this.realloc(4*l.length),this.pos++;let p=this.pos;this.pos=function(b,I,M){for(let O,k,F=0;F<I.length;F++){if(O=I.charCodeAt(F),O>55295&&O<57344){if(!k){O>56319||F+1===I.length?(b[M++]=239,b[M++]=191,b[M++]=189):k=O;continue}if(O<56320){b[M++]=239,b[M++]=191,b[M++]=189,k=O;continue}O=k-55296<<10|O-56320|65536,k=null}else k&&(b[M++]=239,b[M++]=191,b[M++]=189,k=null);O<128?b[M++]=O:(O<2048?b[M++]=O>>6|192:(O<65536?b[M++]=O>>12|224:(b[M++]=O>>18|240,b[M++]=O>>12&63|128),b[M++]=O>>6&63|128),b[M++]=63&O|128)}return M}(this.buf,l,this.pos);let g=this.pos-p;g>=128&&ede(p,g,this),this.pos=p-1,this.writeVarint(g),this.pos+=g}writeFloat(l){this.realloc(4),this.dataView.setFloat32(this.pos,l,!0),this.pos+=4}writeDouble(l){this.realloc(8),this.dataView.setFloat64(this.pos,l,!0),this.pos+=8}writeBytes(l){let p=l.length;this.writeVarint(p),this.realloc(p);for(let g=0;g<p;g++)this.buf[this.pos++]=l[g]}writeRawMessage(l,p){this.pos++;let g=this.pos;l(p,this);let b=this.pos-g;b>=128&&ede(g,b,this),this.pos=g-1,this.writeVarint(b),this.pos+=b}writeMessage(l,p,g){this.writeTag(l,2),this.writeRawMessage(p,g)}writePackedVarint(l,p){p.length&&this.writeMessage(l,Jmt,p)}writePackedSVarint(l,p){p.length&&this.writeMessage(l,Qmt,p)}writePackedBoolean(l,p){p.length&&this.writeMessage(l,rgt,p)}writePackedFloat(l,p){p.length&&this.writeMessage(l,egt,p)}writePackedDouble(l,p){p.length&&this.writeMessage(l,tgt,p)}writePackedFixed32(l,p){p.length&&this.writeMessage(l,ngt,p)}writePackedSFixed32(l,p){p.length&&this.writeMessage(l,ogt,p)}writePackedFixed64(l,p){p.length&&this.writeMessage(l,igt,p)}writePackedSFixed64(l,p){p.length&&this.writeMessage(l,agt,p)}writeBytesField(l,p){this.writeTag(l,2),this.writeBytes(p)}writeFixed32Field(l,p){this.writeTag(l,5),this.writeFixed32(p)}writeSFixed32Field(l,p){this.writeTag(l,5),this.writeSFixed32(p)}writeFixed64Field(l,p){this.writeTag(l,1),this.writeFixed64(p)}writeSFixed64Field(l,p){this.writeTag(l,1),this.writeSFixed64(p)}writeVarintField(l,p){this.writeTag(l,0),this.writeVarint(p)}writeSVarintField(l,p){this.writeTag(l,0),this.writeSVarint(p)}writeStringField(l,p){this.writeTag(l,2),this.writeString(p)}writeFloatField(l,p){this.writeTag(l,5),this.writeFloat(p)}writeDoubleField(l,p){this.writeTag(l,1),this.writeDouble(p)}writeBooleanField(l,p){this.writeVarintField(l,+p)}}function Kx(f,l,p){return p?4294967296*l+(f>>>0):4294967296*(l>>>0)+(f>>>0)}function ede(f,l,p){let g=l<=16383?1:l<=2097151?2:l<=268435455?3:Math.floor(Math.log(l)/(7*Math.LN2));p.realloc(g);for(let b=p.pos-1;b>=f;b--)p.buf[b+g]=p.buf[b]}function Jmt(f,l){for(let p=0;p<f.length;p++)l.writeVarint(f[p])}function Qmt(f,l){for(let p=0;p<f.length;p++)l.writeSVarint(f[p])}function egt(f,l){for(let p=0;p<f.length;p++)l.writeFloat(f[p])}function tgt(f,l){for(let p=0;p<f.length;p++)l.writeDouble(f[p])}function rgt(f,l){for(let p=0;p<f.length;p++)l.writeBoolean(f[p])}function ngt(f,l){for(let p=0;p<f.length;p++)l.writeFixed32(f[p])}function ogt(f,l){for(let p=0;p<f.length;p++)l.writeSFixed32(f[p])}function igt(f,l){for(let p=0;p<f.length;p++)l.writeFixed64(f[p])}function agt(f,l){for(let p=0;p<f.length;p++)l.writeSFixed64(f[p])}function sgt(f,l,p){f===1&&p.readMessage(lgt,l)}function lgt(f,l,p){if(f===3){let{id:g,bitmap:b,width:I,height:M,left:O,top:k,advance:F}=p.readMessage(ugt,{});l.push({id:g,bitmap:new SI({width:I+6,height:M+6},b),metrics:{width:I,height:M,left:O,top:k,advance:F}})}}function ugt(f,l,p){f===1?l.id=p.readVarint():f===2?l.bitmap=p.readBytes():f===3?l.width=p.readVarint():f===4?l.height=p.readVarint():f===5?l.left=p.readSVarint():f===6?l.top=p.readSVarint():f===7&&(l.advance=p.readVarint())}function tde(f){let l=0,p=0;for(let M of f)l+=M.w*M.h,p=Math.max(p,M.w);f.sort((M,O)=>O.h-M.h);let g=[{x:0,y:0,w:Math.max(Math.ceil(Math.sqrt(l/.95)),p),h:1/0}],b=0,I=0;for(let M of f)for(let O=g.length-1;O>=0;O--){let k=g[O];if(!(M.w>k.w||M.h>k.h)){if(M.x=k.x,M.y=k.y,I=Math.max(I,M.y+M.h),b=Math.max(b,M.x+M.w),M.w===k.w&&M.h===k.h){let F=g.pop();F&&O<g.length&&(g[O]=F)}else M.h===k.h?(k.x+=M.w,k.w-=M.w):M.w===k.w?(k.y+=M.h,k.h-=M.h):(g.push({x:k.x+M.w,y:k.y,w:k.w-M.w,h:M.h}),k.y+=M.h,k.h-=M.h);break}}return{w:b,h:I,fill:l/(b*I)||0}}class JB{constructor(l,{pixelRatio:p,version:g,stretchX:b,stretchY:I,content:M,textFitWidth:O,textFitHeight:k}){this.paddedRect=l,this.pixelRatio=p,this.stretchX=b,this.stretchY=I,this.content=M,this.version=g,this.textFitWidth=O,this.textFitHeight=k}get tl(){return[this.paddedRect.x+1,this.paddedRect.y+1]}get br(){return[this.paddedRect.x+this.paddedRect.w-1,this.paddedRect.y+this.paddedRect.h-1]}get tlbr(){return this.tl.concat(this.br)}get displaySize(){return[(this.paddedRect.w-2)/this.pixelRatio,(this.paddedRect.h-2)/this.pixelRatio]}}class rde{constructor(l,p){let g={},b={};this.haveRenderCallbacks=[];let I=[];this.addImages(l,g,I),this.addImages(p,b,I);let{w:M,h:O}=tde(I),k=new Ou({width:M||1,height:O||1});for(let F in l){let U=l[F],$=g[F].paddedRect;Ou.copy(U.data,k,{x:0,y:0},{x:$.x+1,y:$.y+1},U.data)}for(let F in p){let U=p[F],$=b[F].paddedRect,X=$.x+1,re=$.y+1,ne=U.data.width,ae=U.data.height;Ou.copy(U.data,k,{x:0,y:0},{x:X,y:re},U.data),Ou.copy(U.data,k,{x:0,y:ae-1},{x:X,y:re-1},{width:ne,height:1}),Ou.copy(U.data,k,{x:0,y:0},{x:X,y:re+ae},{width:ne,height:1}),Ou.copy(U.data,k,{x:ne-1,y:0},{x:X-1,y:re},{width:1,height:ae}),Ou.copy(U.data,k,{x:0,y:0},{x:X+ne,y:re},{width:1,height:ae})}this.image=k,this.iconPositions=g,this.patternPositions=b}addImages(l,p,g){for(let b in l){let I=l[b],M={x:0,y:0,w:I.data.width+2,h:I.data.height+2};g.push(M),p[b]=new JB(M,I),I.hasRenderCallback&&this.haveRenderCallbacks.push(b)}}patchUpdatedImages(l,p){l.dispatchRenderCallbacks(this.haveRenderCallbacks);for(let g in l.updatedImages)this.patchUpdatedImage(this.iconPositions[g],l.getImage(g),p),this.patchUpdatedImage(this.patternPositions[g],l.getImage(g),p)}patchUpdatedImage(l,p,g){if(!l||!p||l.version===p.version)return;l.version=p.version;let[b,I]=l.tl;g.update(p.data,void 0,{x:b,y:I})}}var Bv;fr("ImagePosition",JB),fr("ImageAtlas",rde),o.ao=void 0,(Bv=o.ao||(o.ao={}))[Bv.none=0]="none",Bv[Bv.horizontal=1]="horizontal",Bv[Bv.vertical=2]="vertical",Bv[Bv.horizontalOnly=3]="horizontalOnly";class LI{constructor(){this.scale=1,this.fontStack="",this.imageName=null,this.verticalAlign="bottom"}static forText(l,p,g){let b=new LI;return b.scale=l||1,b.fontStack=p,b.verticalAlign=g||"bottom",b}static forImage(l,p){let g=new LI;return g.imageName=l,g.verticalAlign=p||"bottom",g}}class Xx{constructor(){this.text="",this.sectionIndex=[],this.sections=[],this.imageSectionID=null}static fromFeature(l,p){let g=new Xx;for(let b=0;b<l.sections.length;b++){let I=l.sections[b];I.image?g.addImageSection(I):g.addTextSection(I,p)}return g}length(){return this.text.length}getSection(l){return this.sections[this.sectionIndex[l]]}getSectionIndex(l){return this.sectionIndex[l]}getCharCode(l){return this.text.charCodeAt(l)}verticalizePunctuation(){this.text=function(l){let p="";for(let g=0;g<l.length;g++){let b=l.charCodeAt(g+1)||null,I=l.charCodeAt(g-1)||null;p+=b&&_4(b)&&!NI[l[g+1]]||I&&_4(I)&&!NI[l[g-1]]||!NI[l[g]]?l[g]:NI[l[g]]}return p}(this.text)}trim(){let l=0;for(let g=0;g<this.text.length&&k4[this.text.charCodeAt(g)];g++)l++;let p=this.text.length;for(let g=this.text.length-1;g>=0&&g>=l&&k4[this.text.charCodeAt(g)];g--)p--;this.text=this.text.substring(l,p),this.sectionIndex=this.sectionIndex.slice(l,p)}substring(l,p){let g=new Xx;return g.text=this.text.substring(l,p),g.sectionIndex=this.sectionIndex.slice(l,p),g.sections=this.sections,g}toString(){return this.text}getMaxScale(){return this.sectionIndex.reduce((l,p)=>Math.max(l,this.sections[p].scale),0)}getMaxImageSize(l){let p=0,g=0;for(let b=0;b<this.length();b++){let I=this.getSection(b);if(I.imageName){let M=l[I.imageName];if(!M)continue;let O=M.displaySize;p=Math.max(p,O[0]),g=Math.max(g,O[1])}}return{maxImageWidth:p,maxImageHeight:g}}addTextSection(l,p){this.text+=l.text,this.sections.push(LI.forText(l.scale,l.fontStack||p,l.verticalAlign));let g=this.sections.length-1;for(let b=0;b<l.text.length;++b)this.sectionIndex.push(g)}addImageSection(l){let p=l.image?l.image.name:"";if(p.length===0)return void At("Can't add FormattedSection with an empty image.");let g=this.getNextImageSectionCharCode();g?(this.text+=String.fromCharCode(g),this.sections.push(LI.forImage(p,l.verticalAlign)),this.sectionIndex.push(this.sections.length-1)):At("Reached maximum number of images 6401")}getNextImageSectionCharCode(){return this.imageSectionID?this.imageSectionID>=63743?null:++this.imageSectionID:(this.imageSectionID=57344,this.imageSectionID)}}function L4(f,l,p,g,b,I,M,O,k,F,U,$,X,re,ne){let ae=Xx.fromFeature(f,b),he;$===o.ao.vertical&&ae.verticalizePunctuation();let{processBidirectionalText:Se,processStyledBidirectionalText:Xe}=np;if(Se&&ae.sections.length===1){he=[];let st=Se(ae.toString(),QB(ae,F,I,l,g,re));for(let vt of st){let kt=new Xx;kt.text=vt,kt.sections=ae.sections;for(let er=0;er<vt.length;er++)kt.sectionIndex.push(0);he.push(kt)}}else if(Xe){he=[];let st=Xe(ae.text,ae.sectionIndex,QB(ae,F,I,l,g,re));for(let vt of st){let kt=new Xx;kt.text=vt[0],kt.sectionIndex=vt[1],kt.sections=ae.sections,he.push(kt)}}else he=function(st,vt){let kt=[],er=st.text,Ht=0;for(let Xt of vt)kt.push(st.substring(Ht,Xt)),Ht=Xt;return Ht<er.length&&kt.push(st.substring(Ht,er.length)),kt}(ae,QB(ae,F,I,l,g,re));let je=[],Ve={positionedLines:je,text:ae.toString(),top:U[1],bottom:U[1],left:U[0],right:U[0],writingMode:$,iconsInText:!1,verticalizable:!1};return function(st,vt,kt,er,Ht,Xt,Ar,Kt,Jt,Ct,Jr,sn){let Br=0,wr=0,no=0,Qi=0,Va=Kt==="right"?1:Kt==="left"?0:.5,$s=us/sn,lp=0;for(let Ui of Ht){Ui.trim();let cs=Ui.getMaxScale(),As={positionedGlyphs:[],lineOffset:0};st.positionedLines[lp]=As;let Os=As.positionedGlyphs,eu=0;if(!Ui.length()){wr+=Xt,++lp;continue}let up=dgt(er,Ui,$s);for(let Du=0;Du<Ui.length();Du++){let Ga=Ui.getSection(Du),fs=Ui.getSectionIndex(Du),ds=Ui.getCharCode(Du),Oa=hgt(Jt,Jr,ds),wi;if(Ga.imageName){if(st.iconsInText=!0,Ga.scale=Ga.scale*$s,wi=ggt(Ga,Oa,cs,up,er),!wi)continue;eu=Math.max(eu,wi.imageOffset)}else if(wi=mgt(Ga,ds,Oa,up,vt,kt),!wi)continue;let{rect:od,metrics:tw,baselineOffset:id}=wi;Os.push({glyph:ds,imageName:Ga.imageName,x:Br,y:wr+id+-17,vertical:Oa,scale:Ga.scale,fontStack:Ga.fontStack,sectionIndex:fs,metrics:tw,rect:od}),Oa?(st.verticalizable=!0,Br+=(Ga.imageName?tw.advance:us)*Ga.scale+Ct):Br+=tw.advance*Ga.scale+Ct}Os.length!==0&&(no=Math.max(Br-Ct,no),vgt(Os,0,Os.length-1,Va)),Br=0,As.lineOffset=Math.max(eu,(cs-1)*us);let ps=Xt*cs+eu;wr+=ps,Qi=Math.max(ps,Qi),++lp}let{horizontalAlign:Pu,verticalAlign:Cs}=eV(Ar);(function(Ui,cs,As,Os,eu,up,ps,Du,Ga){let fs=(cs-As)*eu,ds=0;ds=up!==ps?-Du*Os- -17:-Os*Ga*ps+.5*ps;for(let Oa of Ui)for(let wi of Oa.positionedGlyphs)wi.x+=fs,wi.y+=ds})(st.positionedLines,Va,Pu,Cs,no,Qi,Xt,wr,Ht.length),st.top+=-Cs*wr,st.bottom=st.top+wr,st.left+=-Pu*no,st.right=st.left+no}(Ve,l,p,g,he,M,O,k,$,F,X,ne),!function(st){for(let vt of st)if(vt.positionedGlyphs.length!==0)return!1;return!0}(je)&&Ve}let k4={9:!0,10:!0,11:!0,12:!0,13:!0,32:!0},cgt={10:!0,32:!0,38:!0,41:!0,43:!0,45:!0,47:!0,173:!0,183:!0,8203:!0,8208:!0,8211:!0,8231:!0},pgt={40:!0};function nde(f,l,p,g,b,I){if(l.imageName){let M=g[l.imageName];return M?M.displaySize[0]*l.scale*us/I+b:0}{let M=p[l.fontStack],O=M&&M[f];return O?O.metrics.advance*l.scale+b:0}}function ode(f,l,p,g){let b=Math.pow(f-l,2);return g?f<l?b/2:2*b:b+Math.abs(p)*p}function fgt(f,l,p){let g=0;return f===10&&(g-=1e4),p&&(g+=150),f!==40&&f!==65288||(g+=50),l!==41&&l!==65289||(g+=50),g}function ide(f,l,p,g,b,I){let M=null,O=ode(l,p,b,I);for(let k of g){let F=ode(l-k.x,p,b,I)+k.badness;F<=O&&(M=k,O=F)}return{index:f,x:l,priorBreak:M,badness:O}}function ade(f){return f?ade(f.priorBreak).concat(f.index):[]}function QB(f,l,p,g,b,I){if(!f)return[];let M=[],O=function($,X,re,ne,ae,he){let Se=0;for(let Xe=0;Xe<$.length();Xe++){let je=$.getSection(Xe);Se+=nde($.getCharCode(Xe),je,ne,ae,X,he)}return Se/Math.max(1,Math.ceil(Se/re))}(f,l,p,g,b,I),k=f.text.indexOf("\u200B")>=0,F=0;for(let $=0;$<f.length();$++){let X=f.getSection($),re=f.getCharCode($);if(k4[re]||(F+=nde(re,X,g,b,l,I)),$<f.length()-1){let ne=!((U=re)<11904)&&(!!ro["CJK Compatibility Forms"](U)||!!ro["CJK Compatibility"](U)||!!ro["CJK Strokes"](U)||!!ro["CJK Symbols and Punctuation"](U)||!!ro["Enclosed CJK Letters and Months"](U)||!!ro["Halfwidth and Fullwidth Forms"](U)||!!ro["Ideographic Description Characters"](U)||!!ro["Vertical Forms"](U)||fI.test(String.fromCodePoint(U)));(cgt[re]||ne||X.imageName||$!==f.length()-2&&pgt[f.getCharCode($+1)])&&M.push(ide($+1,F,O,M,fgt(re,f.getCharCode($+1),ne&&k),!1))}}var U;return ade(ide(f.length(),F,O,M,0,!0))}function eV(f){let l=.5,p=.5;switch(f){case"right":case"top-right":case"bottom-right":l=1;break;case"left":case"top-left":case"bottom-left":l=0}switch(f){case"bottom":case"bottom-right":case"bottom-left":p=1;break;case"top":case"top-right":case"top-left":p=0}return{horizontalAlign:l,verticalAlign:p}}function dgt(f,l,p){let g=l.getMaxScale()*us,{maxImageWidth:b,maxImageHeight:I}=l.getMaxImageSize(f),M=Math.max(g,I*p);return{verticalLineContentWidth:Math.max(g,b*p),horizontalLineContentHeight:M}}function sde(f){switch(f){case"top":return 0;case"center":return .5;default:return 1}}function hgt(f,l,p){return!(f===o.ao.horizontal||!l&&!dI(p)||l&&(k4[p]||(g=p,new RegExp("\\p{sc=Arab}","u").test(String.fromCodePoint(g)))));var g}function mgt(f,l,p,g,b,I){let M=I[f.fontStack],O=function(F,U,$,X){if(F&&F.rect)return F;let re=U[$.fontStack],ne=re&&re[X];return ne?{rect:null,metrics:ne.metrics}:null}(M&&M[l],b,f,l);if(O===null)return null;let k;if(p)k=g.verticalLineContentWidth-f.scale*us;else{let F=sde(f.verticalAlign);k=(g.horizontalLineContentHeight-f.scale*us)*F}return{rect:O.rect,metrics:O.metrics,baselineOffset:k}}function ggt(f,l,p,g,b){let I=b[f.imageName];if(!I)return null;let M=I.paddedRect,O=I.displaySize,k={width:O[0],height:O[1],left:1,top:-3,advance:l?O[1]:O[0]},F;if(l)F=g.verticalLineContentWidth-O[1]*f.scale;else{let U=sde(f.verticalAlign);F=(g.horizontalLineContentHeight-O[1]*f.scale)*U}return{rect:M,metrics:k,baselineOffset:F,imageOffset:(l?O[0]:O[1])*f.scale-us*p}}function vgt(f,l,p,g){if(g===0)return;let b=f[p],I=(f[p].x+b.metrics.advance*b.scale)*g;for(let M=l;M<=p;M++)f[M].x-=I}function ygt(f,l,p){let{horizontalAlign:g,verticalAlign:b}=eV(p),I=l[0]-f.displaySize[0]*g,M=l[1]-f.displaySize[1]*b;return{image:f,top:M,bottom:M+f.displaySize[1],left:I,right:I+f.displaySize[0]}}function lde(f){var l,p;let g=f.left,b=f.top,I=f.right-g,M=f.bottom-b,O=(l=f.image.textFitWidth)!==null&&l!==void 0?l:"stretchOrShrink",k=(p=f.image.textFitHeight)!==null&&p!==void 0?p:"stretchOrShrink",F=(f.image.content[2]-f.image.content[0])/(f.image.content[3]-f.image.content[1]);if(k==="proportional"){if(O==="stretchOnly"&&I/M<F||O==="proportional"){let U=Math.ceil(M*F);g*=U/I,I=U}}else if(O==="proportional"&&k==="stretchOnly"&&F!==0&&I/M>F){let U=Math.ceil(I/F);b*=U/M,M=U}return{x1:g,y1:b,x2:g+I,y2:b+M}}function ude(f,l,p,g,b,I){let M=f.image,O;if(M.content){let he=M.content,Se=M.pixelRatio||1;O=[he[0]/Se,he[1]/Se,M.displaySize[0]-he[2]/Se,M.displaySize[1]-he[3]/Se]}let k=l.left*I,F=l.right*I,U,$,X,re;p==="width"||p==="both"?(re=b[0]+k-g[3],$=b[0]+F+g[1]):(re=b[0]+(k+F-M.displaySize[0])/2,$=re+M.displaySize[0]);let ne=l.top*I,ae=l.bottom*I;return p==="height"||p==="both"?(U=b[1]+ne-g[0],X=b[1]+ae+g[2]):(U=b[1]+(ne+ae-M.displaySize[1])/2,X=U+M.displaySize[1]),{image:M,top:U,right:$,bottom:X,left:re,collisionPadding:O}}let ng=128,Vv=32640;function cde(f,l){let{expression:p}=l;if(p.kind==="constant")return{kind:"constant",layoutSize:p.evaluate(new ii(f+1))};if(p.kind==="source")return{kind:"source"};{let{zoomStops:g,interpolationType:b}=p,I=0;for(;I<g.length&&g[I]<=f;)I++;I=Math.max(0,I-1);let M=I;for(;M<g.length&&g[M]<f+1;)M++;M=Math.min(g.length-1,M);let O=g[I],k=g[M];return p.kind==="composite"?{kind:"composite",minZoom:O,maxZoom:k,interpolationType:b}:{kind:"camera",minZoom:O,maxZoom:k,minSize:p.evaluate(new ii(O)),maxSize:p.evaluate(new ii(k)),interpolationType:b}}}function tV(f,l,p){let g="never",b=f.get(l);return b?g=b:f.get(p)&&(g="always"),g}let _gt=[{name:"a_fade_opacity",components:1,type:"Uint8",offset:0}];function R4(f,l,p,g,b,I,M,O,k,F,U,$,X){let re=O?Math.min(Vv,Math.round(O[0])):0,ne=O?Math.min(Vv,Math.round(O[1])):0;f.emplaceBack(l,p,Math.round(32*g),Math.round(32*b),I,M,(re<<1)+(k?1:0),ne,16*F,16*U,256*$,256*X)}function rV(f,l,p){f.emplaceBack(l.x,l.y,p),f.emplaceBack(l.x,l.y,p),f.emplaceBack(l.x,l.y,p),f.emplaceBack(l.x,l.y,p)}function bgt(f){for(let l of f.sections)if(w4(l.text))return!0;return!1}class nV{constructor(l){this.layoutVertexArray=new Wt,this.indexArray=new Qo,this.programConfigurations=l,this.segments=new Cn,this.dynamicLayoutVertexArray=new Nt,this.opacityVertexArray=new xr,this.hasVisibleVertices=!1,this.placedSymbolArray=new ie}isEmpty(){return this.layoutVertexArray.length===0&&this.indexArray.length===0&&this.dynamicLayoutVertexArray.length===0&&this.opacityVertexArray.length===0}upload(l,p,g,b){this.isEmpty()||(g&&(this.layoutVertexBuffer=l.createVertexBuffer(this.layoutVertexArray,Wmt.members),this.indexBuffer=l.createIndexBuffer(this.indexArray,p),this.dynamicLayoutVertexBuffer=l.createVertexBuffer(this.dynamicLayoutVertexArray,Ymt.members,!0),this.opacityVertexBuffer=l.createVertexBuffer(this.opacityVertexArray,_gt,!0),this.opacityVertexBuffer.itemSize=1),(g||b)&&this.programConfigurations.upload(l))}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy(),this.dynamicLayoutVertexBuffer.destroy(),this.opacityVertexBuffer.destroy())}}fr("SymbolBuffers",nV);class oV{constructor(l,p,g){this.layoutVertexArray=new l,this.layoutAttributes=p,this.indexArray=new g,this.segments=new Cn,this.collisionVertexArray=new Eo}upload(l){this.layoutVertexBuffer=l.createVertexBuffer(this.layoutVertexArray,this.layoutAttributes),this.indexBuffer=l.createIndexBuffer(this.indexArray),this.collisionVertexBuffer=l.createVertexBuffer(this.collisionVertexArray,Zmt.members,!0)}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.segments.destroy(),this.collisionVertexBuffer.destroy())}}fr("CollisionBuffers",oV);class Jx{constructor(l){this.collisionBoxArray=l.collisionBoxArray,this.zoom=l.zoom,this.globalState=l.globalState,this.overscaling=l.overscaling,this.layers=l.layers,this.layerIds=this.layers.map(M=>M.id),this.index=l.index,this.pixelRatio=l.pixelRatio,this.sourceLayerIndex=l.sourceLayerIndex,this.hasPattern=!1,this.hasRTLText=!1,this.sortKeyRanges=[],this.collisionCircleArray=[];let p=this.layers[0]._unevaluatedLayout._values;this.textSizeData=cde(this.zoom,p["text-size"]),this.iconSizeData=cde(this.zoom,p["icon-size"]);let g=this.layers[0].layout,b=g.get("symbol-sort-key"),I=g.get("symbol-z-order");this.canOverlap=tV(g,"text-overlap","text-allow-overlap")!=="never"||tV(g,"icon-overlap","icon-allow-overlap")!=="never"||g.get("text-ignore-placement")||g.get("icon-ignore-placement"),this.sortFeaturesByKey=I!=="viewport-y"&&!b.isConstant(),this.sortFeaturesByY=(I==="viewport-y"||I==="auto"&&!this.sortFeaturesByKey)&&this.canOverlap,g.get("symbol-placement")==="point"&&(this.writingModes=g.get("text-writing-mode").map(M=>o.ao[M])),this.stateDependentLayerIds=this.layers.filter(M=>M.isStateDependent()).map(M=>M.id),this.sourceID=l.sourceID}createArrays(){this.text=new nV(new Au(this.layers,this.zoom,l=>/^text/.test(l))),this.icon=new nV(new Au(this.layers,this.zoom,l=>/^icon/.test(l))),this.glyphOffsetArray=new ye,this.lineVertexArray=new Ie,this.symbolInstances=new ge,this.textAnchorOffsets=new Pe}calculateGlyphDependencies(l,p,g,b,I){for(let M=0;M<l.length;M++)if(p[l.charCodeAt(M)]=!0,(g||b)&&I){let O=NI[l.charAt(M)];O&&(p[O.charCodeAt(0)]=!0)}}populate(l,p,g){let b=this.layers[0],I=b.layout,M=I.get("text-font"),O=I.get("text-field"),k=I.get("icon-image"),F=(O.value.kind!=="constant"||O.value.value instanceof _a&&!O.value.value.isEmpty()||O.value.value.toString().length>0)&&(M.value.kind!=="constant"||M.value.value.length>0),U=k.value.kind!=="constant"||!!k.value.value||Object.keys(k.parameters).length>0,$=I.get("symbol-sort-key");if(this.features=[],!F&&!U)return;let X=p.iconDependencies,re=p.glyphDependencies,ne=p.availableImages,ae=new ii(this.zoom,{globalState:this.globalState});for(let{feature:he,id:Se,index:Xe,sourceLayerIndex:je}of l){let Ve=b._featureFilter.needGeometry,st=nd(he,Ve);if(!b._featureFilter.filter(ae,st,g))continue;let vt,kt;if(Ve||(st.geometry=_h(he)),F){let Ht=b.getValueAndResolveTokens("text-field",st,g,ne),Xt=_a.factory(Ht),Ar=this.hasRTLText=this.hasRTLText||bgt(Xt);(!Ar||np.getRTLTextPluginStatus()==="unavailable"||Ar&&np.isParsed())&&(vt=Xmt(Xt,b,st))}if(U){let Ht=b.getValueAndResolveTokens("icon-image",st,g,ne);kt=Ht instanceof Bs?Ht:Bs.fromString(Ht)}if(!vt&&!kt)continue;let er=this.sortFeaturesByKey?$.evaluate(st,{},g):void 0;if(this.features.push({id:Se,text:vt,icon:kt,index:Xe,sourceLayerIndex:je,geometry:st.geometry,properties:he.properties,type:Zx.types[he.type],sortKey:er}),kt&&(X[kt.name]=!0),vt){let Ht=M.evaluate(st,{},g).join(","),Xt=I.get("text-rotation-alignment")!=="viewport"&&I.get("symbol-placement")!=="point";this.allowVerticalPlacement=this.writingModes&&this.writingModes.indexOf(o.ao.vertical)>=0;for(let Ar of vt.sections)if(Ar.image)X[Ar.image.name]=!0;else{let Kt=kx(vt.toString()),Jt=Ar.fontStack||Ht,Ct=re[Jt]=re[Jt]||{};this.calculateGlyphDependencies(Ar.text,Ct,Xt,this.allowVerticalPlacement,Kt)}}}I.get("symbol-placement")==="line"&&(this.features=function(he){let Se={},Xe={},je=[],Ve=0;function st(Ht){je.push(he[Ht]),Ve++}function vt(Ht,Xt,Ar){let Kt=Xe[Ht];return delete Xe[Ht],Xe[Xt]=Kt,je[Kt].geometry[0].pop(),je[Kt].geometry[0]=je[Kt].geometry[0].concat(Ar[0]),Kt}function kt(Ht,Xt,Ar){let Kt=Se[Xt];return delete Se[Xt],Se[Ht]=Kt,je[Kt].geometry[0].shift(),je[Kt].geometry[0]=Ar[0].concat(je[Kt].geometry[0]),Kt}function er(Ht,Xt,Ar){let Kt=Ar?Xt[0][Xt[0].length-1]:Xt[0][0];return`${Ht}:${Kt.x}:${Kt.y}`}for(let Ht=0;Ht<he.length;Ht++){let Xt=he[Ht],Ar=Xt.geometry,Kt=Xt.text?Xt.text.toString():null;if(!Kt){st(Ht);continue}let Jt=er(Kt,Ar),Ct=er(Kt,Ar,!0);if(Jt in Xe&&Ct in Se&&Xe[Jt]!==Se[Ct]){let Jr=kt(Jt,Ct,Ar),sn=vt(Jt,Ct,je[Jr].geometry);delete Se[Jt],delete Xe[Ct],Xe[er(Kt,je[sn].geometry,!0)]=sn,je[Jr].geometry=null}else Jt in Xe?vt(Jt,Ct,Ar):Ct in Se?kt(Jt,Ct,Ar):(st(Ht),Se[Jt]=Ve-1,Xe[Ct]=Ve-1)}return je.filter(Ht=>Ht.geometry)}(this.features)),this.sortFeaturesByKey&&this.features.sort((he,Se)=>he.sortKey-Se.sortKey)}update(l,p,g){this.stateDependentLayers.length&&(this.text.programConfigurations.updatePaintArrays(l,p,this.layers,{imagePositions:g,globalState:this.globalState}),this.icon.programConfigurations.updatePaintArrays(l,p,this.layers,{imagePositions:g,globalState:this.globalState}))}isEmpty(){return this.symbolInstances.length===0&&!this.hasRTLText}uploadPending(){return!this.uploaded||this.text.programConfigurations.needsUpload||this.icon.programConfigurations.needsUpload}upload(l){!this.uploaded&&this.hasDebugData()&&(this.textCollisionBox.upload(l),this.iconCollisionBox.upload(l)),this.text.upload(l,this.sortFeaturesByY,!this.uploaded,this.text.programConfigurations.needsUpload),this.icon.upload(l,this.sortFeaturesByY,!this.uploaded,this.icon.programConfigurations.needsUpload),this.uploaded=!0}destroyDebugData(){this.textCollisionBox.destroy(),this.iconCollisionBox.destroy()}destroy(){this.text.destroy(),this.icon.destroy(),this.hasDebugData()&&this.destroyDebugData()}addToLineVertexArray(l,p){let g=this.lineVertexArray.length;if(l.segment!==void 0){let b=l.dist(p[l.segment+1]),I=l.dist(p[l.segment]),M={};for(let O=l.segment+1;O<p.length;O++)M[O]={x:p[O].x,y:p[O].y,tileUnitDistanceFromAnchor:b},O<p.length-1&&(b+=p[O+1].dist(p[O]));for(let O=l.segment||0;O>=0;O--)M[O]={x:p[O].x,y:p[O].y,tileUnitDistanceFromAnchor:I},O>0&&(I+=p[O-1].dist(p[O]));for(let O=0;O<p.length;O++){let k=M[O];this.lineVertexArray.emplaceBack(k.x,k.y,k.tileUnitDistanceFromAnchor)}}return{lineStartIndex:g,lineLength:this.lineVertexArray.length-g}}addSymbols(l,p,g,b,I,M,O,k,F,U,$,X){let re=l.indexArray,ne=l.layoutVertexArray,ae=l.segments.prepareSegment(4*p.length,ne,re,this.canOverlap?M.sortKey:void 0),he=this.glyphOffsetArray.length,Se=ae.vertexLength,Xe=this.allowVerticalPlacement&&O===o.ao.vertical?Math.PI/2:0,je=M.text&&M.text.sections;for(let Ve=0;Ve<p.length;Ve++){let{tl:st,tr:vt,bl:kt,br:er,tex:Ht,pixelOffsetTL:Xt,pixelOffsetBR:Ar,minFontScaleX:Kt,minFontScaleY:Jt,glyphOffset:Ct,isSDF:Jr,sectionIndex:sn}=p[Ve],Br=ae.vertexLength,wr=Ct[1];R4(ne,k.x,k.y,st.x,wr+st.y,Ht.x,Ht.y,g,Jr,Xt.x,Xt.y,Kt,Jt),R4(ne,k.x,k.y,vt.x,wr+vt.y,Ht.x+Ht.w,Ht.y,g,Jr,Ar.x,Xt.y,Kt,Jt),R4(ne,k.x,k.y,kt.x,wr+kt.y,Ht.x,Ht.y+Ht.h,g,Jr,Xt.x,Ar.y,Kt,Jt),R4(ne,k.x,k.y,er.x,wr+er.y,Ht.x+Ht.w,Ht.y+Ht.h,g,Jr,Ar.x,Ar.y,Kt,Jt),rV(l.dynamicLayoutVertexArray,k,Xe),re.emplaceBack(Br,Br+2,Br+1),re.emplaceBack(Br+1,Br+2,Br+3),ae.vertexLength+=4,ae.primitiveLength+=2,this.glyphOffsetArray.emplaceBack(Ct[0]),Ve!==p.length-1&&sn===p[Ve+1].sectionIndex||l.programConfigurations.populatePaintArrays(ne.length,M,M.index,{imagePositions:{},canonical:X,formattedSection:je&&je[sn],globalState:this.globalState})}l.placedSymbolArray.emplaceBack(k.x,k.y,he,this.glyphOffsetArray.length-he,Se,F,U,k.segment,g?g[0]:0,g?g[1]:0,b[0],b[1],O,0,!1,0,$)}_addCollisionDebugVertex(l,p,g,b,I,M){return p.emplaceBack(0,0),l.emplaceBack(g.x,g.y,b,I,Math.round(M.x),Math.round(M.y))}addCollisionDebugVertices(l,p,g,b,I,M,O){let k=I.segments.prepareSegment(4,I.layoutVertexArray,I.indexArray),F=k.vertexLength,U=I.layoutVertexArray,$=I.collisionVertexArray,X=O.anchorX,re=O.anchorY;this._addCollisionDebugVertex(U,$,M,X,re,new a(l,p)),this._addCollisionDebugVertex(U,$,M,X,re,new a(g,p)),this._addCollisionDebugVertex(U,$,M,X,re,new a(g,b)),this._addCollisionDebugVertex(U,$,M,X,re,new a(l,b)),k.vertexLength+=4;let ne=I.indexArray;ne.emplaceBack(F,F+1),ne.emplaceBack(F+1,F+2),ne.emplaceBack(F+2,F+3),ne.emplaceBack(F+3,F),k.primitiveLength+=4}addDebugCollisionBoxes(l,p,g,b){for(let I=l;I<p;I++){let M=this.collisionBoxArray.get(I);this.addCollisionDebugVertices(M.x1,M.y1,M.x2,M.y2,b?this.textCollisionBox:this.iconCollisionBox,M.anchorPoint,g)}}generateCollisionDebugBuffers(){this.hasDebugData()&&this.destroyDebugData(),this.textCollisionBox=new oV(Dn,Xfe.members,Go),this.iconCollisionBox=new oV(Dn,Xfe.members,Go);for(let l=0;l<this.symbolInstances.length;l++){let p=this.symbolInstances.get(l);this.addDebugCollisionBoxes(p.textBoxStartIndex,p.textBoxEndIndex,p,!0),this.addDebugCollisionBoxes(p.verticalTextBoxStartIndex,p.verticalTextBoxEndIndex,p,!0),this.addDebugCollisionBoxes(p.iconBoxStartIndex,p.iconBoxEndIndex,p,!1),this.addDebugCollisionBoxes(p.verticalIconBoxStartIndex,p.verticalIconBoxEndIndex,p,!1)}}_deserializeCollisionBoxesForSymbol(l,p,g,b,I,M,O,k,F){let U={};for(let $=p;$<g;$++){let X=l.get($);U.textBox={x1:X.x1,y1:X.y1,x2:X.x2,y2:X.y2,anchorPointX:X.anchorPointX,anchorPointY:X.anchorPointY},U.textFeatureIndex=X.featureIndex;break}for(let $=b;$<I;$++){let X=l.get($);U.verticalTextBox={x1:X.x1,y1:X.y1,x2:X.x2,y2:X.y2,anchorPointX:X.anchorPointX,anchorPointY:X.anchorPointY},U.verticalTextFeatureIndex=X.featureIndex;break}for(let $=M;$<O;$++){let X=l.get($);U.iconBox={x1:X.x1,y1:X.y1,x2:X.x2,y2:X.y2,anchorPointX:X.anchorPointX,anchorPointY:X.anchorPointY},U.iconFeatureIndex=X.featureIndex;break}for(let $=k;$<F;$++){let X=l.get($);U.verticalIconBox={x1:X.x1,y1:X.y1,x2:X.x2,y2:X.y2,anchorPointX:X.anchorPointX,anchorPointY:X.anchorPointY},U.verticalIconFeatureIndex=X.featureIndex;break}return U}deserializeCollisionBoxes(l){this.collisionArrays=[];for(let p=0;p<this.symbolInstances.length;p++){let g=this.symbolInstances.get(p);this.collisionArrays.push(this._deserializeCollisionBoxesForSymbol(l,g.textBoxStartIndex,g.textBoxEndIndex,g.verticalTextBoxStartIndex,g.verticalTextBoxEndIndex,g.iconBoxStartIndex,g.iconBoxEndIndex,g.verticalIconBoxStartIndex,g.verticalIconBoxEndIndex))}}hasTextData(){return this.text.segments.get().length>0}hasIconData(){return this.icon.segments.get().length>0}hasDebugData(){return this.textCollisionBox&&this.iconCollisionBox}hasTextCollisionBoxData(){return this.hasDebugData()&&this.textCollisionBox.segments.get().length>0}hasIconCollisionBoxData(){return this.hasDebugData()&&this.iconCollisionBox.segments.get().length>0}addIndicesForPlacedSymbol(l,p){let g=l.placedSymbolArray.get(p),b=g.vertexStartIndex+4*g.numGlyphs;for(let I=g.vertexStartIndex;I<b;I+=4)l.indexArray.emplaceBack(I,I+2,I+1),l.indexArray.emplaceBack(I+1,I+2,I+3)}getSortedSymbolIndexes(l){if(this.sortedAngle===l&&this.symbolInstanceIndexes!==void 0)return this.symbolInstanceIndexes;let p=Math.sin(l),g=Math.cos(l),b=[],I=[],M=[];for(let O=0;O<this.symbolInstances.length;++O){M.push(O);let k=this.symbolInstances.get(O);b.push(0|Math.round(p*k.anchorX+g*k.anchorY)),I.push(k.featureIndex)}return M.sort((O,k)=>b[O]-b[k]||I[k]-I[O]),M}addToSortKeyRanges(l,p){let g=this.sortKeyRanges[this.sortKeyRanges.length-1];g&&g.sortKey===p?g.symbolInstanceEnd=l+1:this.sortKeyRanges.push({sortKey:p,symbolInstanceStart:l,symbolInstanceEnd:l+1})}sortFeatures(l){if(this.sortFeaturesByY&&this.sortedAngle!==l&&!(this.text.segments.get().length>1||this.icon.segments.get().length>1)){this.symbolInstanceIndexes=this.getSortedSymbolIndexes(l),this.sortedAngle=l,this.text.indexArray.clear(),this.icon.indexArray.clear(),this.featureSortOrder=[];for(let p of this.symbolInstanceIndexes){let g=this.symbolInstances.get(p);this.featureSortOrder.push(g.featureIndex),[g.rightJustifiedTextSymbolIndex,g.centerJustifiedTextSymbolIndex,g.leftJustifiedTextSymbolIndex].forEach((b,I,M)=>{b>=0&&M.indexOf(b)===I&&this.addIndicesForPlacedSymbol(this.text,b)}),g.verticalPlacedTextSymbolIndex>=0&&this.addIndicesForPlacedSymbol(this.text,g.verticalPlacedTextSymbolIndex),g.placedIconSymbolIndex>=0&&this.addIndicesForPlacedSymbol(this.icon,g.placedIconSymbolIndex),g.verticalPlacedIconSymbolIndex>=0&&this.addIndicesForPlacedSymbol(this.icon,g.verticalPlacedIconSymbolIndex)}this.text.indexBuffer&&this.text.indexBuffer.updateData(this.text.indexArray),this.icon.indexBuffer&&this.icon.indexBuffer.updateData(this.icon.indexArray)}}}let pde,fde;fr("SymbolBucket",Jx,{omit:["layers","collisionBoxArray","features","compareText"]}),Jx.MAX_GLYPHS=65535,Jx.addDynamicAttributes=rV;var iV={get paint(){return fde=fde||new ml({"icon-opacity":new Kr(Ae.paint_symbol["icon-opacity"]),"icon-color":new Kr(Ae.paint_symbol["icon-color"]),"icon-halo-color":new Kr(Ae.paint_symbol["icon-halo-color"]),"icon-halo-width":new Kr(Ae.paint_symbol["icon-halo-width"]),"icon-halo-blur":new Kr(Ae.paint_symbol["icon-halo-blur"]),"icon-translate":new Sr(Ae.paint_symbol["icon-translate"]),"icon-translate-anchor":new Sr(Ae.paint_symbol["icon-translate-anchor"]),"text-opacity":new Kr(Ae.paint_symbol["text-opacity"]),"text-color":new Kr(Ae.paint_symbol["text-color"],{runtimeType:yn,getOverride:f=>f.textColor,hasOverride:f=>!!f.textColor}),"text-halo-color":new Kr(Ae.paint_symbol["text-halo-color"]),"text-halo-width":new Kr(Ae.paint_symbol["text-halo-width"]),"text-halo-blur":new Kr(Ae.paint_symbol["text-halo-blur"]),"text-translate":new Sr(Ae.paint_symbol["text-translate"]),"text-translate-anchor":new Sr(Ae.paint_symbol["text-translate-anchor"])})},get layout(){return pde=pde||new ml({"symbol-placement":new Sr(Ae.layout_symbol["symbol-placement"]),"symbol-spacing":new Sr(Ae.layout_symbol["symbol-spacing"]),"symbol-avoid-edges":new Sr(Ae.layout_symbol["symbol-avoid-edges"]),"symbol-sort-key":new Kr(Ae.layout_symbol["symbol-sort-key"]),"symbol-z-order":new Sr(Ae.layout_symbol["symbol-z-order"]),"icon-allow-overlap":new Sr(Ae.layout_symbol["icon-allow-overlap"]),"icon-overlap":new Sr(Ae.layout_symbol["icon-overlap"]),"icon-ignore-placement":new Sr(Ae.layout_symbol["icon-ignore-placement"]),"icon-optional":new Sr(Ae.layout_symbol["icon-optional"]),"icon-rotation-alignment":new Sr(Ae.layout_symbol["icon-rotation-alignment"]),"icon-size":new Kr(Ae.layout_symbol["icon-size"]),"icon-text-fit":new Sr(Ae.layout_symbol["icon-text-fit"]),"icon-text-fit-padding":new Sr(Ae.layout_symbol["icon-text-fit-padding"]),"icon-image":new Kr(Ae.layout_symbol["icon-image"]),"icon-rotate":new Kr(Ae.layout_symbol["icon-rotate"]),"icon-padding":new Kr(Ae.layout_symbol["icon-padding"]),"icon-keep-upright":new Sr(Ae.layout_symbol["icon-keep-upright"]),"icon-offset":new Kr(Ae.layout_symbol["icon-offset"]),"icon-anchor":new Kr(Ae.layout_symbol["icon-anchor"]),"icon-pitch-alignment":new Sr(Ae.layout_symbol["icon-pitch-alignment"]),"text-pitch-alignment":new Sr(Ae.layout_symbol["text-pitch-alignment"]),"text-rotation-alignment":new Sr(Ae.layout_symbol["text-rotation-alignment"]),"text-field":new Kr(Ae.layout_symbol["text-field"]),"text-font":new Kr(Ae.layout_symbol["text-font"]),"text-size":new Kr(Ae.layout_symbol["text-size"]),"text-max-width":new Kr(Ae.layout_symbol["text-max-width"]),"text-line-height":new Sr(Ae.layout_symbol["text-line-height"]),"text-letter-spacing":new Kr(Ae.layout_symbol["text-letter-spacing"]),"text-justify":new Kr(Ae.layout_symbol["text-justify"]),"text-radial-offset":new Kr(Ae.layout_symbol["text-radial-offset"]),"text-variable-anchor":new Sr(Ae.layout_symbol["text-variable-anchor"]),"text-variable-anchor-offset":new Kr(Ae.layout_symbol["text-variable-anchor-offset"]),"text-anchor":new Kr(Ae.layout_symbol["text-anchor"]),"text-max-angle":new Sr(Ae.layout_symbol["text-max-angle"]),"text-writing-mode":new Sr(Ae.layout_symbol["text-writing-mode"]),"text-rotate":new Kr(Ae.layout_symbol["text-rotate"]),"text-padding":new Sr(Ae.layout_symbol["text-padding"]),"text-keep-upright":new Sr(Ae.layout_symbol["text-keep-upright"]),"text-transform":new Kr(Ae.layout_symbol["text-transform"]),"text-offset":new Kr(Ae.layout_symbol["text-offset"]),"text-allow-overlap":new Sr(Ae.layout_symbol["text-allow-overlap"]),"text-overlap":new Sr(Ae.layout_symbol["text-overlap"]),"text-ignore-placement":new Sr(Ae.layout_symbol["text-ignore-placement"]),"text-optional":new Sr(Ae.layout_symbol["text-optional"])})}};class dde{constructor(l){if(l.property.overrides===void 0)throw new Error("overrides must be provided to instantiate FormatSectionOverride class");this.type=l.property.overrides?l.property.overrides.runtimeType:ua,this.defaultValue=l}evaluate(l){if(l.formattedSection){let p=this.defaultValue.property.overrides;if(p&&p.hasOverride(l.formattedSection))return p.getOverride(l.formattedSection)}return l.feature&&l.featureState?this.defaultValue.evaluate(l.feature,l.featureState):this.defaultValue.property.specification.default}eachChild(l){this.defaultValue.isConstant()||l(this.defaultValue.value._styleExpression.expression)}outputDefined(){return!1}serialize(){return null}}fr("FormatSectionOverride",dde,{omit:["defaultValue"]});class j4 extends uc{constructor(l){super(l,iV)}recalculate(l,p){if(super.recalculate(l,p),this.layout.get("icon-rotation-alignment")==="auto"&&(this.layout._values["icon-rotation-alignment"]=this.layout.get("symbol-placement")!=="point"?"map":"viewport"),this.layout.get("text-rotation-alignment")==="auto"&&(this.layout._values["text-rotation-alignment"]=this.layout.get("symbol-placement")!=="point"?"map":"viewport"),this.layout.get("text-pitch-alignment")==="auto"&&(this.layout._values["text-pitch-alignment"]=this.layout.get("text-rotation-alignment")==="map"?"map":"viewport"),this.layout.get("icon-pitch-alignment")==="auto"&&(this.layout._values["icon-pitch-alignment"]=this.layout.get("icon-rotation-alignment")),this.layout.get("symbol-placement")==="point"){let g=this.layout.get("text-writing-mode");if(g){let b=[];for(let I of g)b.indexOf(I)<0&&b.push(I);this.layout._values["text-writing-mode"]=b}else this.layout._values["text-writing-mode"]=["horizontal"]}this._setPaintOverrides()}getValueAndResolveTokens(l,p,g,b){let I=this.layout.get(l).evaluate(p,{},g,b),M=this._unevaluatedLayout._values[l];return M.isDataDriven()||Mx(M.value)||!I?I:function(O,k){return k.replace(/{([^{}]+)}/g,(F,U)=>O&&U in O?String(O[U]):"")}(p.properties,I)}createBucket(l){return new Jx(l)}queryRadius(){return 0}queryIntersectsFeature(){throw new Error("Should take a different path in FeatureIndex")}_setPaintOverrides(){for(let l of iV.paint.overridableProperties){if(!j4.hasPaintOverride(this.layout,l))continue;let p=this.paint.get(l),g=new dde(p),b=new eI(g,p.property.specification),I=null;I=p.value.kind==="constant"||p.value.kind==="source"?new A1("source",b):new tI("composite",b,p.value.zoomStops),this.paint._values[l]=new Fp(p.property,I,p.parameters)}}_handleOverridablePaintPropertyUpdate(l,p,g){return!(!this.layout||p.isDataDriven()||g.isDataDriven())&&j4.hasPaintOverride(this.layout,l)}static hasPaintOverride(l,p){let g=l.get("text-field"),b=iV.paint.properties[p],I=!1,M=O=>{for(let k of O)if(b.overrides&&b.overrides.hasOverride(k))return void(I=!0)};if(g.value.kind==="constant"&&g.value.value instanceof _a)M(g.value.value.sections);else if(g.value.kind==="source"||g.value.kind==="composite"){let O=F=>{I||(F instanceof Qf&&Xr(F.value)===bn?M(F.value.sections):F instanceof Vm?M(F.sections):F.eachChild(O))},k=g.value;k._styleExpression&&O(k._styleExpression.expression)}return I}}let hde;var xgt={get paint(){return hde=hde||new ml({"background-color":new Sr(Ae.paint_background["background-color"]),"background-pattern":new hh(Ae.paint_background["background-pattern"]),"background-opacity":new Sr(Ae.paint_background["background-opacity"])})}};class wgt extends uc{constructor(l){super(l,xgt)}}let mde;var Egt={get paint(){return mde=mde||new ml({"raster-opacity":new Sr(Ae.paint_raster["raster-opacity"]),"raster-hue-rotate":new Sr(Ae.paint_raster["raster-hue-rotate"]),"raster-brightness-min":new Sr(Ae.paint_raster["raster-brightness-min"]),"raster-brightness-max":new Sr(Ae.paint_raster["raster-brightness-max"]),"raster-saturation":new Sr(Ae.paint_raster["raster-saturation"]),"raster-contrast":new Sr(Ae.paint_raster["raster-contrast"]),"raster-resampling":new Sr(Ae.paint_raster["raster-resampling"]),"raster-fade-duration":new Sr(Ae.paint_raster["raster-fade-duration"])})}};class Sgt extends uc{constructor(l){super(l,Egt)}}class Tgt extends uc{constructor(l){super(l,{}),this.onAdd=p=>{this.implementation.onAdd&&this.implementation.onAdd(p,p.painter.context.gl)},this.onRemove=p=>{this.implementation.onRemove&&this.implementation.onRemove(p,p.painter.context.gl)},this.implementation=l}is3D(){return this.implementation.renderingMode==="3d"}hasOffscreenPass(){return this.implementation.prerender!==void 0}recalculate(){}updateTransitions(){}hasTransition(){return!1}serialize(){throw new Error("Custom layers cannot be serialized")}}class Igt{constructor(l){this._methodToThrottle=l,this._triggered=!1,typeof MessageChannel!="undefined"&&(this._channel=new MessageChannel,this._channel.port2.onmessage=()=>{this._triggered=!1,this._methodToThrottle()})}trigger(){this._triggered||(this._triggered=!0,this._channel?this._channel.port1.postMessage(!0):setTimeout(()=>{this._triggered=!1,this._methodToThrottle()},0))}remove(){delete this._channel,this._methodToThrottle=()=>{}}}let Mgt={once:!0},aV=6371008.8;class Gv{constructor(l,p){if(isNaN(l)||isNaN(p))throw new Error(`Invalid LngLat object: (${l}, ${p})`);if(this.lng=+l,this.lat=+p,this.lat>90||this.lat<-90)throw new Error("Invalid LngLat latitude value: must be between -90 and 90")}wrap(){return new Gv($e(this.lng,-180,180),this.lat)}toArray(){return[this.lng,this.lat]}toString(){return`LngLat(${this.lng}, ${this.lat})`}distanceTo(l){let p=Math.PI/180,g=this.lat*p,b=l.lat*p,I=Math.sin(g)*Math.sin(b)+Math.cos(g)*Math.cos(b)*Math.cos((l.lng-this.lng)*p);return aV*Math.acos(Math.min(I,1))}static convert(l){if(l instanceof Gv)return l;if(Array.isArray(l)&&(l.length===2||l.length===3))return new Gv(Number(l[0]),Number(l[1]));if(!Array.isArray(l)&&typeof l=="object"&&l!==null)return new Gv(Number("lng"in l?l.lng:l.lon),Number(l.lat));throw new Error("`LngLatLike` argument must be specified as a LngLat instance, an object {lng: <lng>, lat: <lat>}, an object {lon: <lng>, lat: <lat>}, or an array of [<lng>, <lat>]")}}let gde=2*Math.PI*aV;function vde(f){return gde*Math.cos(f*Math.PI/180)}function yde(f){return(180+f)/360}function _de(f){return(180-180/Math.PI*Math.log(Math.tan(Math.PI/4+f*Math.PI/360)))/360}function bde(f,l){return f/vde(l)}function sV(f){return 360/Math.PI*Math.atan(Math.exp((180-360*f)*Math.PI/180))-90}function xde(f,l){return f*vde(sV(l))}class kI{constructor(l,p,g=0){this.x=+l,this.y=+p,this.z=+g}static fromLngLat(l,p=0){let g=Gv.convert(l);return new kI(yde(g.lng),_de(g.lat),bde(p,g.lat))}toLngLat(){return new Gv(360*this.x-180,sV(this.y))}toAltitude(){return xde(this.z,this.y)}meterInMercatorCoordinateUnits(){return 1/gde*(l=sV(this.y),1/Math.cos(l*Math.PI/180));var l}}function wde(f,l,p){var g=2*Math.PI*6378137/256/Math.pow(2,p);return[f*g-2*Math.PI*6378137/2,l*g-2*Math.PI*6378137/2]}class lV{constructor(l,p,g){if(!function(b,I,M){return!(b<0||b>25||M<0||M>=Math.pow(2,b)||I<0||I>=Math.pow(2,b))}(l,p,g))throw new Error(`x=${p}, y=${g}, z=${l} outside of bounds. 0<=x<${Math.pow(2,l)}, 0<=y<${Math.pow(2,l)} 0<=z<=25 `);this.z=l,this.x=p,this.y=g,this.key=Qx(0,l,l,p,g)}equals(l){return this.z===l.z&&this.x===l.x&&this.y===l.y}url(l,p,g){let b=(M=this.y,O=this.z,k=wde(256*(I=this.x),256*(M=Math.pow(2,O)-M-1),O),F=wde(256*(I+1),256*(M+1),O),k[0]+","+k[1]+","+F[0]+","+F[1]);var I,M,O,k,F;let U=function($,X,re){let ne,ae="";for(let he=$;he>0;he--)ne=1<<he-1,ae+=(X&ne?1:0)+(re&ne?2:0);return ae}(this.z,this.x,this.y);return l[(this.x+this.y)%l.length].replace(/{prefix}/g,(this.x%16).toString(16)+(this.y%16).toString(16)).replace(/{z}/g,String(this.z)).replace(/{x}/g,String(this.x)).replace(/{y}/g,String(g==="tms"?Math.pow(2,this.z)-this.y-1:this.y)).replace(/{ratio}/g,p>1?"@2x":"").replace(/{quadkey}/g,U).replace(/{bbox-epsg-3857}/g,b)}isChildOf(l){let p=this.z-l.z;return p>0&&l.x===this.x>>p&&l.y===this.y>>p}getTilePoint(l){let p=Math.pow(2,this.z);return new a((l.x*p-this.x)*ct,(l.y*p-this.y)*ct)}toString(){return`${this.z}/${this.x}/${this.y}`}}class Ede{constructor(l,p){this.wrap=l,this.canonical=p,this.key=Qx(l,p.z,p.z,p.x,p.y)}}class sp{constructor(l,p,g,b,I){if(this.terrainRttPosMatrix32f=null,l<g)throw new Error(`overscaledZ should be >= z; overscaledZ = ${l}; z = ${g}`);this.overscaledZ=l,this.wrap=p,this.canonical=new lV(g,+b,+I),this.key=Qx(p,l,g,b,I)}clone(){return new sp(this.overscaledZ,this.wrap,this.canonical.z,this.canonical.x,this.canonical.y)}equals(l){return this.overscaledZ===l.overscaledZ&&this.wrap===l.wrap&&this.canonical.equals(l.canonical)}scaledTo(l){if(l>this.overscaledZ)throw new Error(`targetZ > this.overscaledZ; targetZ = ${l}; overscaledZ = ${this.overscaledZ}`);let p=this.canonical.z-l;return l>this.canonical.z?new sp(l,this.wrap,this.canonical.z,this.canonical.x,this.canonical.y):new sp(l,this.wrap,l,this.canonical.x>>p,this.canonical.y>>p)}calculateScaledKey(l,p){if(l>this.overscaledZ)throw new Error(`targetZ > this.overscaledZ; targetZ = ${l}; overscaledZ = ${this.overscaledZ}`);let g=this.canonical.z-l;return l>this.canonical.z?Qx(this.wrap*+p,l,this.canonical.z,this.canonical.x,this.canonical.y):Qx(this.wrap*+p,l,l,this.canonical.x>>g,this.canonical.y>>g)}isChildOf(l){if(l.wrap!==this.wrap)return!1;let p=this.canonical.z-l.canonical.z;return l.overscaledZ===0||l.overscaledZ<this.overscaledZ&&l.canonical.x===this.canonical.x>>p&&l.canonical.y===this.canonical.y>>p}children(l){if(this.overscaledZ>=l)return[new sp(this.overscaledZ+1,this.wrap,this.canonical.z,this.canonical.x,this.canonical.y)];let p=this.canonical.z+1,g=2*this.canonical.x,b=2*this.canonical.y;return[new sp(p,this.wrap,p,g,b),new sp(p,this.wrap,p,g+1,b),new sp(p,this.wrap,p,g,b+1),new sp(p,this.wrap,p,g+1,b+1)]}isLessThan(l){return this.wrap<l.wrap||!(this.wrap>l.wrap)&&(this.overscaledZ<l.overscaledZ||!(this.overscaledZ>l.overscaledZ)&&(this.canonical.x<l.canonical.x||!(this.canonical.x>l.canonical.x)&&this.canonical.y<l.canonical.y))}wrapped(){return new sp(this.overscaledZ,0,this.canonical.z,this.canonical.x,this.canonical.y)}unwrapTo(l){return new sp(this.overscaledZ,l,this.canonical.z,this.canonical.x,this.canonical.y)}overscaleFactor(){return Math.pow(2,this.overscaledZ-this.canonical.z)}toUnwrapped(){return new Ede(this.wrap,this.canonical)}toString(){return`${this.overscaledZ}/${this.canonical.x}/${this.canonical.y}`}getTilePoint(l){return this.canonical.getTilePoint(new kI(l.x-this.wrap,l.y))}}function Qx(f,l,p,g,b){(f*=2)<0&&(f=-1*f-1);let I=1<<p;return(I*I*f+I*b+g).toString(36)+p.toString(36)+l.toString(36)}function RI(f,l){return l?f.properties[l]:f.id}fr("CanonicalTileID",lV),fr("OverscaledTileID",sp,{omit:["terrainRttPosMatrix32f"]});class B1{constructor(){this.minX=1/0,this.maxX=-1/0,this.minY=1/0,this.maxY=-1/0}extend(l){return this.minX=Math.min(this.minX,l.x),this.minY=Math.min(this.minY,l.y),this.maxX=Math.max(this.maxX,l.x),this.maxY=Math.max(this.maxY,l.y),this}expandBy(l){return this.minX-=l,this.minY-=l,this.maxX+=l,this.maxY+=l,(this.minX>this.maxX||this.minY>this.maxY)&&(this.minX=1/0,this.maxX=-1/0,this.minY=1/0,this.maxY=-1/0),this}shrinkBy(l){return this.expandBy(-l)}map(l){let p=new B1;return p.extend(l(new a(this.minX,this.minY))),p.extend(l(new a(this.maxX,this.minY))),p.extend(l(new a(this.minX,this.maxY))),p.extend(l(new a(this.maxX,this.maxY))),p}static fromPoints(l){let p=new B1;for(let g of l)p.extend(g);return p}contains(l){return l.x>=this.minX&&l.x<=this.maxX&&l.y>=this.minY&&l.y<=this.maxY}empty(){return this.minX>this.maxX}width(){return this.maxX-this.minX}height(){return this.maxY-this.minY}covers(l){return!this.empty()&&!l.empty()&&l.minX>=this.minX&&l.maxX<=this.maxX&&l.minY>=this.minY&&l.maxY<=this.maxY}intersects(l){return!this.empty()&&!l.empty()&&l.minX<=this.maxX&&l.maxX>=this.minX&&l.minY<=this.maxY&&l.maxY>=this.minY}}class Sde{constructor(l){this._stringToNumber={},this._numberToString=[];for(let p=0;p<l.length;p++){let g=l[p];this._stringToNumber[g]=p,this._numberToString[p]=g}}encode(l){return this._stringToNumber[l]}decode(l){if(l>=this._numberToString.length)throw new Error(`Out of bounds. Index requested n=${l} can't be >= this._numberToString.length ${this._numberToString.length}`);return this._numberToString[l]}}class Tde{constructor(l,p,g,b,I){this.type="Feature",this._vectorTileFeature=l,l._z=p,l._x=g,l._y=b,this.properties=l.properties,this.id=I}get geometry(){return this._geometry===void 0&&(this._geometry=this._vectorTileFeature.toGeoJSON(this._vectorTileFeature._x,this._vectorTileFeature._y,this._vectorTileFeature._z).geometry),this._geometry}set geometry(l){this._geometry=l}toJSON(){let l={geometry:this.geometry};for(let p in this)p!=="_geometry"&&p!=="_vectorTileFeature"&&(l[p]=this[p]);return l}}class Ide{constructor(l,p){this.tileID=l,this.x=l.canonical.x,this.y=l.canonical.y,this.z=l.canonical.z,this.grid=new R1(ct,16,0),this.grid3D=new R1(ct,16,0),this.featureIndexArray=new He,this.promoteId=p}insert(l,p,g,b,I,M){let O=this.featureIndexArray.length;this.featureIndexArray.emplaceBack(g,b,I);let k=M?this.grid3D:this.grid;for(let F=0;F<p.length;F++){let U=p[F],$=[1/0,1/0,-1/0,-1/0];for(let X=0;X<U.length;X++){let re=U[X];$[0]=Math.min($[0],re.x),$[1]=Math.min($[1],re.y),$[2]=Math.max($[2],re.x),$[3]=Math.max($[3],re.y)}$[0]<ct&&$[1]<ct&&$[2]>=0&&$[3]>=0&&k.insert(O,$[0],$[1],$[2],$[3])}}loadVTLayers(){return this.vtLayers||(this.vtLayers=new Bfe(new XB(this.rawTileData)).layers,this.sourceLayerCoder=new Sde(this.vtLayers?Object.keys(this.vtLayers).sort():["_geojsonTileLayer"])),this.vtLayers}query(l,p,g,b){this.loadVTLayers();let I=l.params,M=ct/l.tileSize/l.scale,O=Zm(I.filter),k=l.queryGeometry,F=l.queryPadding*M,U=B1.fromPoints(k),$=this.grid.query(U.minX-F,U.minY-F,U.maxX+F,U.maxY+F),X=B1.fromPoints(l.cameraQueryGeometry).expandBy(F),re=this.grid3D.query(X.minX,X.minY,X.maxX,X.maxY,(he,Se,Xe,je)=>function(Ve,st,vt,kt,er){for(let Xt of Ve)if(st<=Xt.x&&vt<=Xt.y&&kt>=Xt.x&&er>=Xt.y)return!0;let Ht=[new a(st,vt),new a(st,er),new a(kt,er),new a(kt,vt)];if(Ve.length>2){for(let Xt of Ht)if(Hx(Ve,Xt))return!0}for(let Xt=0;Xt<Ve.length-1;Xt++)if(imt(Ve[Xt],Ve[Xt+1],Ht))return!0;return!1}(l.cameraQueryGeometry,he-F,Se-F,Xe+F,je+F));for(let he of re)$.push(he);$.sort(Cgt);let ne={},ae;for(let he=0;he<$.length;he++){let Se=$[he];if(Se===ae)continue;ae=Se;let Xe=this.featureIndexArray.get(Se),je=null;this.loadMatchingFeature(ne,Xe.bucketIndex,Xe.sourceLayerIndex,Xe.featureIndex,O,I.layers,I.availableImages,p,g,b,(Ve,st,vt)=>(je||(je=_h(Ve)),st.queryIntersectsFeature({queryGeometry:k,feature:Ve,featureState:vt,geometry:je,zoom:this.z,transform:l.transform,pixelsToTileUnits:M,pixelPosMatrix:l.pixelPosMatrix,unwrappedTileID:this.tileID.toUnwrapped(),getElevation:l.getElevation})))}return ne}loadMatchingFeature(l,p,g,b,I,M,O,k,F,U,$){let X=this.bucketLayerIDs[p];if(M&&!X.some(he=>M.has(he)))return;let re=this.sourceLayerCoder.decode(g),ne=this.vtLayers[re].feature(b);if(I.needGeometry){let he=nd(ne,!0);if(!I.filter(new ii(this.tileID.overscaledZ),he,this.tileID.canonical))return}else if(!I.filter(new ii(this.tileID.overscaledZ),ne))return;let ae=this.getId(ne,re);for(let he=0;he<X.length;he++){let Se=X[he];if(M&&!M.has(Se))continue;let Xe=k[Se];if(!Xe)continue;let je={};ae&&U&&(je=U.getState(Xe.sourceLayer||"_geojsonTileLayer",ae));let Ve=De({},F[Se]);Ve.paint=Mde(Ve.paint,Xe.paint,ne,je,O),Ve.layout=Mde(Ve.layout,Xe.layout,ne,je,O);let st=!$||$(ne,Xe,je);if(!st)continue;let vt=new Tde(ne,this.z,this.x,this.y,ae);vt.layer=Ve;let kt=l[Se];kt===void 0&&(kt=l[Se]=[]),kt.push({featureIndex:b,feature:vt,intersectionZ:st})}}lookupSymbolFeatures(l,p,g,b,I,M,O,k){let F={};this.loadVTLayers();let U=Zm(I);for(let $ of l)this.loadMatchingFeature(F,g,b,$,U,M,O,k,p);return F}hasLayer(l){for(let p of this.bucketLayerIDs)for(let g of p)if(l===g)return!0;return!1}getId(l,p){var g;let b=l.id;return this.promoteId&&(b=l.properties[typeof this.promoteId=="string"?this.promoteId:this.promoteId[p]],typeof b=="boolean"&&(b=Number(b)),b===void 0&&!((g=l.properties)===null||g===void 0)&&g.cluster&&this.promoteId&&(b=Number(l.properties.cluster_id))),b}}function Mde(f,l,p,g,b){return Ge(f,(I,M)=>{let O=l instanceof jx?l.get(M):null;return O&&O.evaluate?O.evaluate(p,g,b):O})}function Cgt(f,l){return l-f}function Cde(f,l,p,g,b){let I=[];for(let M=0;M<f.length;M++){let O=f[M],k;for(let F=0;F<O.length-1;F++){let U=O[F],$=O[F+1];U.x<l&&$.x<l||(U.x<l?U=new a(l,U.y+(l-U.x)/($.x-U.x)*($.y-U.y))._round():$.x<l&&($=new a(l,U.y+(l-U.x)/($.x-U.x)*($.y-U.y))._round()),U.y<p&&$.y<p||(U.y<p?U=new a(U.x+(p-U.y)/($.y-U.y)*($.x-U.x),p)._round():$.y<p&&($=new a(U.x+(p-U.y)/($.y-U.y)*($.x-U.x),p)._round()),U.x>=g&&$.x>=g||(U.x>=g?U=new a(g,U.y+(g-U.x)/($.x-U.x)*($.y-U.y))._round():$.x>=g&&($=new a(g,U.y+(g-U.x)/($.x-U.x)*($.y-U.y))._round()),U.y>=b&&$.y>=b||(U.y>=b?U=new a(U.x+(b-U.y)/($.y-U.y)*($.x-U.x),b)._round():$.y>=b&&($=new a(U.x+(b-U.y)/($.y-U.y)*($.x-U.x),b)._round()),k&&U.equals(k[k.length-1])||(k=[U],I.push(k)),k.push($)))))}}return I}fr("FeatureIndex",Ide,{omit:["rawTileData","sourceLayerCoder"]});class Hv extends a{constructor(l,p,g,b){super(l,p),this.angle=g,b!==void 0&&(this.segment=b)}clone(){return new Hv(this.x,this.y,this.angle,this.segment)}}function Ade(f,l,p,g,b){if(l.segment===void 0||p===0)return!0;let I=l,M=l.segment+1,O=0;for(;O>-p/2;){if(M--,M<0)return!1;O-=f[M].dist(I),I=f[M]}O+=f[M].dist(f[M+1]),M++;let k=[],F=0;for(;O<p/2;){let U=f[M],$=f[M+1];if(!$)return!1;let X=f[M-1].angleTo(U)-U.angleTo($);for(X=Math.abs((X+3*Math.PI)%(2*Math.PI)-Math.PI),k.push({distance:O,angleDelta:X}),F+=X;O-k[0].distance>g;)F-=k.shift().angleDelta;if(F>b)return!1;M++,O+=U.dist($)}return!0}function Ode(f){let l=0;for(let p=0;p<f.length-1;p++)l+=f[p].dist(f[p+1]);return l}function Pde(f,l,p){return f?.6*l*p:0}function Dde(f,l){return Math.max(f?f.right-f.left:0,l?l.right-l.left:0)}function Agt(f,l,p,g,b,I){let M=Pde(p,b,I),O=Dde(p,g)*I,k=0,F=Ode(f)/2;for(let U=0;U<f.length-1;U++){let $=f[U],X=f[U+1],re=$.dist(X);if(k+re>F){let ne=(F-k)/re,ae=qp.number($.x,X.x,ne),he=qp.number($.y,X.y,ne),Se=new Hv(ae,he,X.angleTo($),U);return Se._round(),!M||Ade(f,Se,O,M,l)?Se:void 0}k+=re}}function Ogt(f,l,p,g,b,I,M,O,k){let F=Pde(g,I,M),U=Dde(g,b),$=U*M,X=f[0].x===0||f[0].x===k||f[0].y===0||f[0].y===k;return l-$<l/4&&(l=$+l/4),Nde(f,X?l/2*O%l:(U/2+2*I)*M*O%l,l,F,p,$,X,!1,k)}function Nde(f,l,p,g,b,I,M,O,k){let F=I/2,U=Ode(f),$=0,X=l-p,re=[];for(let ne=0;ne<f.length-1;ne++){let ae=f[ne],he=f[ne+1],Se=ae.dist(he),Xe=he.angleTo(ae);for(;X+p<$+Se;){X+=p;let je=(X-$)/Se,Ve=qp.number(ae.x,he.x,je),st=qp.number(ae.y,he.y,je);if(Ve>=0&&Ve<k&&st>=0&&st<k&&X-F>=0&&X+F<=U){let vt=new Hv(Ve,st,Xe,ne);vt._round(),g&&!Ade(f,vt,I,g,b)||re.push(vt)}}$+=Se}return O||re.length||M||(re=Nde(f,$/2,p,g,b,I,M,!0,k)),re}function Lde(f,l,p,g){let b=[],I=f.image,M=I.pixelRatio,O=I.paddedRect.w-2,k=I.paddedRect.h-2,F={x1:f.left,y1:f.top,x2:f.right,y2:f.bottom},U=I.stretchX||[[0,O]],$=I.stretchY||[[0,k]],X=(Ct,Jr)=>Ct+Jr[1]-Jr[0],re=U.reduce(X,0),ne=$.reduce(X,0),ae=O-re,he=k-ne,Se=0,Xe=re,je=0,Ve=ne,st=0,vt=ae,kt=0,er=he;if(I.content&&g){let Ct=I.content,Jr=Ct[2]-Ct[0],sn=Ct[3]-Ct[1];(I.textFitWidth||I.textFitHeight)&&(F=lde(f)),Se=q4(U,0,Ct[0]),je=q4($,0,Ct[1]),Xe=q4(U,Ct[0],Ct[2]),Ve=q4($,Ct[1],Ct[3]),st=Ct[0]-Se,kt=Ct[1]-je,vt=Jr-Xe,er=sn-Ve}let Ht=F.x1,Xt=F.y1,Ar=F.x2-Ht,Kt=F.y2-Xt,Jt=(Ct,Jr,sn,Br)=>{let wr=z4(Ct.stretch-Se,Xe,Ar,Ht),no=F4(Ct.fixed-st,vt,Ct.stretch,re),Qi=z4(Jr.stretch-je,Ve,Kt,Xt),Va=F4(Jr.fixed-kt,er,Jr.stretch,ne),$s=z4(sn.stretch-Se,Xe,Ar,Ht),lp=F4(sn.fixed-st,vt,sn.stretch,re),Pu=z4(Br.stretch-je,Ve,Kt,Xt),Cs=F4(Br.fixed-kt,er,Br.stretch,ne),Ui=new a(wr,Qi),cs=new a($s,Qi),As=new a($s,Pu),Os=new a(wr,Pu),eu=new a(no/M,Va/M),up=new a(lp/M,Cs/M),ps=l*Math.PI/180;if(ps){let fs=Math.sin(ps),ds=Math.cos(ps),Oa=[ds,-fs,fs,ds];Ui._matMult(Oa),cs._matMult(Oa),Os._matMult(Oa),As._matMult(Oa)}let Du=Ct.stretch+Ct.fixed,Ga=Jr.stretch+Jr.fixed;return{tl:Ui,tr:cs,bl:Os,br:As,tex:{x:I.paddedRect.x+1+Du,y:I.paddedRect.y+1+Ga,w:sn.stretch+sn.fixed-Du,h:Br.stretch+Br.fixed-Ga},writingMode:void 0,glyphOffset:[0,0],sectionIndex:0,pixelOffsetTL:eu,pixelOffsetBR:up,minFontScaleX:vt/M/Ar,minFontScaleY:er/M/Kt,isSDF:p}};if(g&&(I.stretchX||I.stretchY)){let Ct=kde(U,ae,re),Jr=kde($,he,ne);for(let sn=0;sn<Ct.length-1;sn++){let Br=Ct[sn],wr=Ct[sn+1];for(let no=0;no<Jr.length-1;no++)b.push(Jt(Br,Jr[no],wr,Jr[no+1]))}}else b.push(Jt({fixed:0,stretch:-1},{fixed:0,stretch:-1},{fixed:0,stretch:O+1},{fixed:0,stretch:k+1}));return b}function q4(f,l,p){let g=0;for(let b of f)g+=Math.max(l,Math.min(p,b[1]))-Math.max(l,Math.min(p,b[0]));return g}function kde(f,l,p){let g=[{fixed:-1,stretch:0}];for(let[b,I]of f){let M=g[g.length-1];g.push({fixed:b-M.stretch,stretch:M.stretch}),g.push({fixed:b-M.stretch,stretch:M.stretch+(I-b)})}return g.push({fixed:l+1,stretch:p}),g}function z4(f,l,p,g){return f/l*p+g}function F4(f,l,p,g){return f-l*p/g}fr("Anchor",Hv);class U4{constructor(l,p,g,b,I,M,O,k,F,U){var $;if(this.boxStartIndex=l.length,F){let X=M.top,re=M.bottom,ne=M.collisionPadding;ne&&(X-=ne[1],re+=ne[3]);let ae=re-X;ae>0&&(ae=Math.max(10,ae),this.circleDiameter=ae)}else{let X=!(($=M.image)===null||$===void 0)&&$.content&&(M.image.textFitWidth||M.image.textFitHeight)?lde(M):{x1:M.left,y1:M.top,x2:M.right,y2:M.bottom};X.y1=X.y1*O-k[0],X.y2=X.y2*O+k[2],X.x1=X.x1*O-k[3],X.x2=X.x2*O+k[1];let re=M.collisionPadding;if(re&&(X.x1-=re[0]*O,X.y1-=re[1]*O,X.x2+=re[2]*O,X.y2+=re[3]*O),U){let ne=new a(X.x1,X.y1),ae=new a(X.x2,X.y1),he=new a(X.x1,X.y2),Se=new a(X.x2,X.y2),Xe=U*Math.PI/180;ne._rotate(Xe),ae._rotate(Xe),he._rotate(Xe),Se._rotate(Xe),X.x1=Math.min(ne.x,ae.x,he.x,Se.x),X.x2=Math.max(ne.x,ae.x,he.x,Se.x),X.y1=Math.min(ne.y,ae.y,he.y,Se.y),X.y2=Math.max(ne.y,ae.y,he.y,Se.y)}l.emplaceBack(p.x,p.y,X.x1,X.y1,X.x2,X.y2,g,b,I)}this.boxEndIndex=l.length}}class Pgt{constructor(l=[],p=(g,b)=>g<b?-1:g>b?1:0){if(this.data=l,this.length=this.data.length,this.compare=p,this.length>0)for(let g=(this.length>>1)-1;g>=0;g--)this._down(g)}push(l){this.data.push(l),this._up(this.length++)}pop(){if(this.length===0)return;let l=this.data[0],p=this.data.pop();return--this.length>0&&(this.data[0]=p,this._down(0)),l}peek(){return this.data[0]}_up(l){let{data:p,compare:g}=this,b=p[l];for(;l>0;){let I=l-1>>1,M=p[I];if(g(b,M)>=0)break;p[l]=M,l=I}p[l]=b}_down(l){let{data:p,compare:g}=this,b=this.length>>1,I=p[l];for(;l<b;){let M=1+(l<<1),O=M+1;if(O<this.length&&g(p[O],p[M])<0&&(M=O),g(p[M],I)>=0)break;p[l]=p[M],l=M}p[l]=I}}function Dgt(f,l=1,p=!1){let g=B1.fromPoints(f[0]),b=Math.min(g.width(),g.height()),I=b/2,M=new Pgt([],Ngt),{minX:O,minY:k,maxX:F,maxY:U}=g;if(b===0)return new a(O,k);for(let re=O;re<F;re+=b)for(let ne=k;ne<U;ne+=b)M.push(new ew(re+I,ne+I,I,f));let $=function(re){let ne=0,ae=0,he=0,Se=re[0];for(let Xe=0,je=Se.length,Ve=je-1;Xe<je;Ve=Xe++){let st=Se[Xe],vt=Se[Ve],kt=st.x*vt.y-vt.x*st.y;ae+=(st.x+vt.x)*kt,he+=(st.y+vt.y)*kt,ne+=3*kt}return new ew(ae/ne,he/ne,0,re)}(f),X=M.length;for(;M.length;){let re=M.pop();(re.d>$.d||!$.d)&&($=re,p&&console.log("found best %d after %d probes",Math.round(1e4*re.d)/1e4,X)),re.max-$.d<=l||(I=re.h/2,M.push(new ew(re.p.x-I,re.p.y-I,I,f)),M.push(new ew(re.p.x+I,re.p.y-I,I,f)),M.push(new ew(re.p.x-I,re.p.y+I,I,f)),M.push(new ew(re.p.x+I,re.p.y+I,I,f)),X+=4)}return p&&(console.log(`num probes: ${X}`),console.log(`best distance: ${$.d}`)),$.p}function Ngt(f,l){return l.max-f.max}function ew(f,l,p,g){this.p=new a(f,l),this.h=p,this.d=function(b,I){let M=!1,O=1/0;for(let k=0;k<I.length;k++){let F=I[k];for(let U=0,$=F.length,X=$-1;U<$;X=U++){let re=F[U],ne=F[X];re.y>b.y!=ne.y>b.y&&b.x<(ne.x-re.x)*(b.y-re.y)/(ne.y-re.y)+re.x&&(M=!M),O=Math.min(O,_fe(b,re,ne))}}return(M?1:-1)*Math.sqrt(O)}(this.p,g),this.max=this.d+this.h*Math.SQRT2}var Hs;o.aE=void 0,(Hs=o.aE||(o.aE={}))[Hs.center=1]="center",Hs[Hs.left=2]="left",Hs[Hs.right=3]="right",Hs[Hs.top=4]="top",Hs[Hs.bottom=5]="bottom",Hs[Hs["top-left"]=6]="top-left",Hs[Hs["top-right"]=7]="top-right",Hs[Hs["bottom-left"]=8]="bottom-left",Hs[Hs["bottom-right"]=9]="bottom-right";let uV=Number.POSITIVE_INFINITY;function Rde(f,l){return l[1]!==uV?function(p,g,b){let I=0,M=0;switch(g=Math.abs(g),b=Math.abs(b),p){case"top-right":case"top-left":case"top":M=b-7;break;case"bottom-right":case"bottom-left":case"bottom":M=7-b}switch(p){case"top-right":case"bottom-right":case"right":I=-g;break;case"top-left":case"bottom-left":case"left":I=g}return[I,M]}(f,l[0],l[1]):function(p,g){let b=0,I=0;g<0&&(g=0);let M=g/Math.SQRT2;switch(p){case"top-right":case"top-left":I=M-7;break;case"bottom-right":case"bottom-left":I=7-M;break;case"bottom":I=7-g;break;case"top":I=g-7}switch(p){case"top-right":case"bottom-right":b=-M;break;case"top-left":case"bottom-left":b=M;break;case"left":b=g;break;case"right":b=-g}return[b,I]}(f,l[0])}function jde(f,l,p){var g;let b=f.layout,I=(g=b.get("text-variable-anchor-offset"))===null||g===void 0?void 0:g.evaluate(l,{},p);if(I){let O=I.values,k=[];for(let F=0;F<O.length;F+=2){let U=k[F]=O[F],$=O[F+1].map(X=>X*us);U.startsWith("top")?$[1]-=7:U.startsWith("bottom")&&($[1]+=7),k[F+1]=$}return new hl(k)}let M=b.get("text-variable-anchor");if(M){let O;O=f._unevaluatedLayout.getValue("text-radial-offset")!==void 0?[b.get("text-radial-offset").evaluate(l,{},p)*us,uV]:b.get("text-offset").evaluate(l,{},p).map(F=>F*us);let k=[];for(let F of M)k.push(F,Rde(F,O));return new hl(k)}return null}function cV(f){switch(f){case"right":case"top-right":case"bottom-right":return"right";case"left":case"top-left":case"bottom-left":return"left"}return"center"}function Lgt(f,l,p,g,b,I,M,O,k,F,U,$){let X=I.textMaxSize.evaluate(l,{});X===void 0&&(X=M);let re=f.layers[0].layout,ne=re.get("icon-offset").evaluate(l,{},U),ae=zde(p.horizontal),he=M/24,Se=f.tilePixelRatio*he,Xe=f.tilePixelRatio*X/24,je=f.tilePixelRatio*O,Ve=f.tilePixelRatio*re.get("symbol-spacing"),st=re.get("text-padding")*f.tilePixelRatio,vt=function(sn,Br,wr,no=1){let Qi=sn.get("icon-padding").evaluate(Br,{},wr),Va=Qi&&Qi.values;return[Va[0]*no,Va[1]*no,Va[2]*no,Va[3]*no]}(re,l,U,f.tilePixelRatio),kt=re.get("text-max-angle")/180*Math.PI,er=re.get("text-rotation-alignment")!=="viewport"&&re.get("symbol-placement")!=="point",Ht=re.get("icon-rotation-alignment")==="map"&&re.get("symbol-placement")!=="point",Xt=re.get("symbol-placement"),Ar=Ve/2,Kt=re.get("icon-text-fit"),Jt;g&&Kt!=="none"&&(f.allowVerticalPlacement&&p.vertical&&(Jt=ude(g,p.vertical,Kt,re.get("icon-text-fit-padding"),ne,he)),ae&&(g=ude(g,ae,Kt,re.get("icon-text-fit-padding"),ne,he)));let Ct=U?$.line.getGranularityForZoomLevel(U.z):1,Jr=(sn,Br)=>{Br.x<0||Br.x>=ct||Br.y<0||Br.y>=ct||function(wr,no,Qi,Va,$s,lp,Pu,Cs,Ui,cs,As,Os,eu,up,ps,Du,Ga,fs,ds,Oa,wi,od,tw,id,jgt){let rw=wr.addToLineVertexArray(no,Qi),V1,nw,ow,iw,Vde=0,Gde=0,Hde=0,$de=0,yV=-1,_V=-1,og={},Wde=Fv("");if(wr.allowVerticalPlacement&&Va.vertical){let yl=Cs.layout.get("text-rotate").evaluate(wi,{},id)+90;ow=new U4(Ui,no,cs,As,Os,Va.vertical,eu,up,ps,yl),Pu&&(iw=new U4(Ui,no,cs,As,Os,Pu,Ga,fs,ps,yl))}if($s){let yl=Cs.layout.get("icon-rotate").evaluate(wi,{}),cp=Cs.layout.get("icon-text-fit")!=="none",G1=Lde($s,yl,tw,cp),sd=Pu?Lde(Pu,yl,tw,cp):void 0;nw=new U4(Ui,no,cs,As,Os,$s,Ga,fs,!1,yl),Vde=4*G1.length;let H1=wr.iconSizeData,bh=null;H1.kind==="source"?(bh=[ng*Cs.layout.get("icon-size").evaluate(wi,{})],bh[0]>Vv&&At(`${wr.layerIds[0]}: Value for "icon-size" is >= 255. Reduce your "icon-size".`)):H1.kind==="composite"&&(bh=[ng*od.compositeIconSizes[0].evaluate(wi,{},id),ng*od.compositeIconSizes[1].evaluate(wi,{},id)],(bh[0]>Vv||bh[1]>Vv)&&At(`${wr.layerIds[0]}: Value for "icon-size" is >= 255. Reduce your "icon-size".`)),wr.addSymbols(wr.icon,G1,bh,Oa,ds,wi,o.ao.none,no,rw.lineStartIndex,rw.lineLength,-1,id),yV=wr.icon.placedSymbolArray.length-1,sd&&(Gde=4*sd.length,wr.addSymbols(wr.icon,sd,bh,Oa,ds,wi,o.ao.vertical,no,rw.lineStartIndex,rw.lineLength,-1,id),_V=wr.icon.placedSymbolArray.length-1)}let Yde=Object.keys(Va.horizontal);for(let yl of Yde){let cp=Va.horizontal[yl];if(!V1){Wde=Fv(cp.text);let sd=Cs.layout.get("text-rotate").evaluate(wi,{},id);V1=new U4(Ui,no,cs,As,Os,cp,eu,up,ps,sd)}let G1=cp.positionedLines.length===1;if(Hde+=qde(wr,no,cp,lp,Cs,ps,wi,Du,rw,Va.vertical?o.ao.horizontal:o.ao.horizontalOnly,G1?Yde:[yl],og,yV,od,id),G1)break}Va.vertical&&($de+=qde(wr,no,Va.vertical,lp,Cs,ps,wi,Du,rw,o.ao.vertical,["vertical"],og,_V,od,id));let qgt=V1?V1.boxStartIndex:wr.collisionBoxArray.length,zgt=V1?V1.boxEndIndex:wr.collisionBoxArray.length,Fgt=ow?ow.boxStartIndex:wr.collisionBoxArray.length,Ugt=ow?ow.boxEndIndex:wr.collisionBoxArray.length,Bgt=nw?nw.boxStartIndex:wr.collisionBoxArray.length,Vgt=nw?nw.boxEndIndex:wr.collisionBoxArray.length,Ggt=iw?iw.boxStartIndex:wr.collisionBoxArray.length,Hgt=iw?iw.boxEndIndex:wr.collisionBoxArray.length,ad=-1,V4=(yl,cp)=>yl&&yl.circleDiameter?Math.max(yl.circleDiameter,cp):cp;ad=V4(V1,ad),ad=V4(ow,ad),ad=V4(nw,ad),ad=V4(iw,ad);let Zde=ad>-1?1:0;Zde&&(ad*=jgt/us),wr.glyphOffsetArray.length>=Jx.MAX_GLYPHS&&At("Too many glyphs being rendered in a tile. See https://github.com/mapbox/mapbox-gl-js/issues/2907"),wi.sortKey!==void 0&&wr.addToSortKeyRanges(wr.symbolInstances.length,wi.sortKey);let $gt=jde(Cs,wi,id),[Wgt,Ygt]=function(yl,cp){let G1=yl.length,sd=cp==null?void 0:cp.values;if((sd==null?void 0:sd.length)>0)for(let H1=0;H1<sd.length;H1+=2){let bh=sd[H1+1];yl.emplaceBack(o.aE[sd[H1]],bh[0],bh[1])}return[G1,yl.length]}(wr.textAnchorOffsets,$gt);wr.symbolInstances.emplaceBack(no.x,no.y,og.right>=0?og.right:-1,og.center>=0?og.center:-1,og.left>=0?og.left:-1,og.vertical||-1,yV,_V,Wde,qgt,zgt,Fgt,Ugt,Bgt,Vgt,Ggt,Hgt,cs,Hde,$de,Vde,Gde,Zde,0,eu,ad,Wgt,Ygt)}(f,Br,sn,p,g,b,Jt,f.layers[0],f.collisionBoxArray,l.index,l.sourceLayerIndex,f.index,Se,[st,st,st,st],er,k,je,vt,Ht,ne,l,I,F,U,M)};if(Xt==="line")for(let sn of Cde(l.geometry,0,0,ct,ct)){let Br=U1(sn,Ct),wr=Ogt(Br,Ve,kt,p.vertical||ae,g,24,Xe,f.overscaling,ct);for(let no of wr)ae&&kgt(f,ae.text,Ar,no)||Jr(Br,no)}else if(Xt==="line-center"){for(let sn of l.geometry)if(sn.length>1){let Br=U1(sn,Ct),wr=Agt(Br,kt,p.vertical||ae,g,24,Xe);wr&&Jr(Br,wr)}}else if(l.type==="Polygon")for(let sn of S1(l.geometry,0)){let Br=Dgt(sn,16);Jr(U1(sn[0],Ct,!0),new Hv(Br.x,Br.y,0))}else if(l.type==="LineString")for(let sn of l.geometry){let Br=U1(sn,Ct);Jr(Br,new Hv(Br[0].x,Br[0].y,0))}else if(l.type==="Point")for(let sn of l.geometry)for(let Br of sn)Jr([Br],new Hv(Br.x,Br.y,0))}function qde(f,l,p,g,b,I,M,O,k,F,U,$,X,re,ne){let ae=function(Xe,je,Ve,st,vt,kt,er,Ht){let Xt=st.layout.get("text-rotate").evaluate(kt,{})*Math.PI/180,Ar=[];for(let Kt of je.positionedLines)for(let Jt of Kt.positionedGlyphs){if(!Jt.rect)continue;let Ct=Jt.rect||{},Jr=4,sn=!0,Br=1,wr=0,no=(vt||Ht)&&Jt.vertical,Qi=Jt.metrics.advance*Jt.scale/2;if(Ht&&je.verticalizable&&(wr=Kt.lineOffset/2-(Jt.imageName?-(us-Jt.metrics.width*Jt.scale)/2:(Jt.scale-1)*us)),Jt.imageName){let fs=er[Jt.imageName];sn=fs.sdf,Br=fs.pixelRatio,Jr=1/Br}let Va=vt?[Jt.x+Qi,Jt.y]:[0,0],$s=vt?[0,0]:[Jt.x+Qi+Ve[0],Jt.y+Ve[1]-wr],lp=[0,0];no&&(lp=$s,$s=[0,0]);let Pu=Jt.metrics.isDoubleResolution?2:1,Cs=(Jt.metrics.left-Jr)*Jt.scale-Qi+$s[0],Ui=(-Jt.metrics.top-Jr)*Jt.scale+$s[1],cs=Cs+Ct.w/Pu*Jt.scale/Br,As=Ui+Ct.h/Pu*Jt.scale/Br,Os=new a(Cs,Ui),eu=new a(cs,Ui),up=new a(Cs,As),ps=new a(cs,As);if(no){let fs=new a(-Qi,Qi- -17),ds=-Math.PI/2,Oa=12-Qi,wi=new a(22-Oa,-(Jt.imageName?Oa:0)),od=new a(...lp);Os._rotateAround(ds,fs)._add(wi)._add(od),eu._rotateAround(ds,fs)._add(wi)._add(od),up._rotateAround(ds,fs)._add(wi)._add(od),ps._rotateAround(ds,fs)._add(wi)._add(od)}if(Xt){let fs=Math.sin(Xt),ds=Math.cos(Xt),Oa=[ds,-fs,fs,ds];Os._matMult(Oa),eu._matMult(Oa),up._matMult(Oa),ps._matMult(Oa)}let Du=new a(0,0),Ga=new a(0,0);Ar.push({tl:Os,tr:eu,bl:up,br:ps,tex:Ct,writingMode:je.writingMode,glyphOffset:Va,sectionIndex:Jt.sectionIndex,isSDF:sn,pixelOffsetTL:Du,pixelOffsetBR:Ga,minFontScaleX:0,minFontScaleY:0})}return Ar}(0,p,O,b,I,M,g,f.allowVerticalPlacement),he=f.textSizeData,Se=null;he.kind==="source"?(Se=[ng*b.layout.get("text-size").evaluate(M,{})],Se[0]>Vv&&At(`${f.layerIds[0]}: Value for "text-size" is >= 255. Reduce your "text-size".`)):he.kind==="composite"&&(Se=[ng*re.compositeTextSizes[0].evaluate(M,{},ne),ng*re.compositeTextSizes[1].evaluate(M,{},ne)],(Se[0]>Vv||Se[1]>Vv)&&At(`${f.layerIds[0]}: Value for "text-size" is >= 255. Reduce your "text-size".`)),f.addSymbols(f.text,ae,Se,O,I,M,F,l,k.lineStartIndex,k.lineLength,X,ne);for(let Xe of U)$[Xe]=f.text.placedSymbolArray.length-1;return 4*ae.length}function zde(f){for(let l in f)return f[l];return null}function kgt(f,l,p,g){let b=f.compareText;if(l in b){let I=b[l];for(let M=I.length-1;M>=0;M--)if(g.dist(I[M])<p)return!0}else b[l]=[];return b[l].push(g),!1}let Fde=[Int8Array,Uint8Array,Uint8ClampedArray,Int16Array,Uint16Array,Int32Array,Uint32Array,Float32Array,Float64Array];class pV{static from(l){if(!(l instanceof ArrayBuffer))throw new Error("Data must be an instance of ArrayBuffer.");let[p,g]=new Uint8Array(l,0,2);if(p!==219)throw new Error("Data does not appear to be in a KDBush format.");let b=g>>4;if(b!==1)throw new Error(`Got v${b} data when expected v1.`);let I=Fde[15&g];if(!I)throw new Error("Unrecognized array type.");let[M]=new Uint16Array(l,2,1),[O]=new Uint32Array(l,4,1);return new pV(O,M,I,l)}constructor(l,p=64,g=Float64Array,b){if(isNaN(l)||l<0)throw new Error(`Unpexpected numItems value: ${l}.`);this.numItems=+l,this.nodeSize=Math.min(Math.max(+p,2),65535),this.ArrayType=g,this.IndexArrayType=l<65536?Uint16Array:Uint32Array;let I=Fde.indexOf(this.ArrayType),M=2*l*this.ArrayType.BYTES_PER_ELEMENT,O=l*this.IndexArrayType.BYTES_PER_ELEMENT,k=(8-O%8)%8;if(I<0)throw new Error(`Unexpected typed array class: ${g}.`);b&&b instanceof ArrayBuffer?(this.data=b,this.ids=new this.IndexArrayType(this.data,8,l),this.coords=new this.ArrayType(this.data,8+O+k,2*l),this._pos=2*l,this._finished=!0):(this.data=new ArrayBuffer(8+M+O+k),this.ids=new this.IndexArrayType(this.data,8,l),this.coords=new this.ArrayType(this.data,8+O+k,2*l),this._pos=0,this._finished=!1,new Uint8Array(this.data,0,2).set([219,16+I]),new Uint16Array(this.data,2,1)[0]=p,new Uint32Array(this.data,4,1)[0]=l)}add(l,p){let g=this._pos>>1;return this.ids[g]=g,this.coords[this._pos++]=l,this.coords[this._pos++]=p,g}finish(){let l=this._pos>>1;if(l!==this.numItems)throw new Error(`Added ${l} items when expected ${this.numItems}.`);return fV(this.ids,this.coords,this.nodeSize,0,this.numItems-1,0),this._finished=!0,this}range(l,p,g,b){if(!this._finished)throw new Error("Data not yet indexed - call index.finish().");let{ids:I,coords:M,nodeSize:O}=this,k=[0,I.length-1,0],F=[];for(;k.length;){let U=k.pop()||0,$=k.pop()||0,X=k.pop()||0;if($-X<=O){for(let he=X;he<=$;he++){let Se=M[2*he],Xe=M[2*he+1];Se>=l&&Se<=g&&Xe>=p&&Xe<=b&&F.push(I[he])}continue}let re=X+$>>1,ne=M[2*re],ae=M[2*re+1];ne>=l&&ne<=g&&ae>=p&&ae<=b&&F.push(I[re]),(U===0?l<=ne:p<=ae)&&(k.push(X),k.push(re-1),k.push(1-U)),(U===0?g>=ne:b>=ae)&&(k.push(re+1),k.push($),k.push(1-U))}return F}within(l,p,g){if(!this._finished)throw new Error("Data not yet indexed - call index.finish().");let{ids:b,coords:I,nodeSize:M}=this,O=[0,b.length-1,0],k=[],F=g*g;for(;O.length;){let U=O.pop()||0,$=O.pop()||0,X=O.pop()||0;if($-X<=M){for(let he=X;he<=$;he++)Bde(I[2*he],I[2*he+1],l,p)<=F&&k.push(b[he]);continue}let re=X+$>>1,ne=I[2*re],ae=I[2*re+1];Bde(ne,ae,l,p)<=F&&k.push(b[re]),(U===0?l-g<=ne:p-g<=ae)&&(O.push(X),O.push(re-1),O.push(1-U)),(U===0?l+g>=ne:p+g>=ae)&&(O.push(re+1),O.push($),O.push(1-U))}return k}}function fV(f,l,p,g,b,I){if(b-g<=p)return;let M=g+b>>1;Ude(f,l,M,g,b,I),fV(f,l,p,g,M-1,1-I),fV(f,l,p,M+1,b,1-I)}function Ude(f,l,p,g,b,I){for(;b>g;){if(b-g>600){let F=b-g+1,U=p-g+1,$=Math.log(F),X=.5*Math.exp(2*$/3),re=.5*Math.sqrt($*X*(F-X)/F)*(U-F/2<0?-1:1);Ude(f,l,p,Math.max(g,Math.floor(p-U*X/F+re)),Math.min(b,Math.floor(p+(F-U)*X/F+re)),I)}let M=l[2*p+I],O=g,k=b;for(jI(f,l,g,p),l[2*b+I]>M&&jI(f,l,g,b);O<k;){for(jI(f,l,O,k),O++,k--;l[2*O+I]<M;)O++;for(;l[2*k+I]>M;)k--}l[2*g+I]===M?jI(f,l,g,k):(k++,jI(f,l,k,b)),k<=p&&(g=k+1),p<=k&&(b=k-1)}}function jI(f,l,p,g){dV(f,p,g),dV(l,2*p,2*g),dV(l,2*p+1,2*g+1)}function dV(f,l,p){let g=f[l];f[l]=f[p],f[p]=g}function Bde(f,l,p,g){let b=f-p,I=l-g;return b*b+I*I}var hV;o.cx=void 0,(hV=o.cx||(o.cx={})).create="create",hV.load="load",hV.fullLoad="fullLoad";let B4=null,qI=[],mV=1e3/60,gV="loadTime",vV="fullLoadTime",Rgt={mark(f){performance.mark(f)},frame(f){let l=f;B4!=null&&qI.push(l-B4),B4=l},clearMetrics(){B4=null,qI=[],performance.clearMeasures(gV),performance.clearMeasures(vV);for(let f in o.cx)performance.clearMarks(o.cx[f])},getPerformanceMetrics(){performance.measure(gV,o.cx.create,o.cx.load),performance.measure(vV,o.cx.create,o.cx.fullLoad);let f=performance.getEntriesByName(gV)[0].duration,l=performance.getEntriesByName(vV)[0].duration,p=qI.length,g=1/(qI.reduce((I,M)=>I+M,0)/p/1e3),b=qI.filter(I=>I>mV).reduce((I,M)=>I+(M-mV)/mV,0);return{loadTime:f,fullLoadTime:l,fps:g,percentDroppedFrames:b/(p+b)*100,totalFrames:p}}};o.$=ct,o.A=L,o.B=function([f,l,p]){return l+=90,l*=Math.PI/180,p*=Math.PI/180,{x:f*Math.cos(l)*Math.sin(p),y:f*Math.sin(l)*Math.sin(p),z:f*Math.cos(p)}},o.C=qp,o.D=Sr,o.E=gt,o.F=ii,o.G=L1,o.H=function(f){if(jt==null){let l=f.navigator?f.navigator.userAgent:null;jt=!!f.safari||!(!l||!(/\b(iPad|iPhone|iPod)\b/.test(l)||l.match("Safari")&&!l.match("Chrome")))}return jt},o.I=JB,o.J=class{constructor(f,l){this.target=f,this.mapId=l,this.resolveRejects={},this.tasks={},this.taskQueue=[],this.abortControllers={},this.messageHandlers={},this.invoker=new Igt(()=>this.process()),this.subscription=Pr(this.target,"message",p=>this.receive(p),!1),this.globalScope=Yt(self)?f:window}registerMessageHandler(f,l){this.messageHandlers[f]=l}sendAsync(f,l){return new Promise((p,g)=>{let b=Math.round(1e18*Math.random()).toString(36).substring(0,10),I=l?Pr(l.signal,"abort",()=>{I==null||I.unsubscribe(),delete this.resolveRejects[b];let k={id:b,type:"<cancel>",origin:location.origin,targetMapId:f.targetMapId,sourceMapId:this.mapId};this.target.postMessage(k)},Mgt):null;this.resolveRejects[b]={resolve:k=>{I==null||I.unsubscribe(),p(k)},reject:k=>{I==null||I.unsubscribe(),g(k)}};let M=[],O=Object.assign(Object.assign({},f),{id:b,sourceMapId:this.mapId,origin:location.origin,data:Lv(f.data,M)});this.target.postMessage(O,{transfer:M})})}receive(f){let l=f.data,p=l.id;if(!(l.origin!=="file://"&&location.origin!=="file://"&&l.origin!=="resource://android"&&location.origin!=="resource://android"&&l.origin!==location.origin||l.targetMapId&&this.mapId!==l.targetMapId)){if(l.type==="<cancel>"){delete this.tasks[p];let g=this.abortControllers[p];return delete this.abortControllers[p],void(g&&g.abort())}if(Yt(self)||l.mustQueue)return this.tasks[p]=l,this.taskQueue.push(p),void this.invoker.trigger();this.processTask(p,l)}}process(){if(this.taskQueue.length===0)return;let f=this.taskQueue.shift(),l=this.tasks[f];delete this.tasks[f],this.taskQueue.length>0&&this.invoker.trigger(),l&&this.processTask(f,l)}processTask(f,l){return i(this,void 0,void 0,function*(){if(l.type==="<response>"){let b=this.resolveRejects[f];return delete this.resolveRejects[f],b?void(l.error?b.reject(Jm(l.error)):b.resolve(Jm(l.data))):void 0}if(!this.messageHandlers[l.type])return void this.completeTask(f,new Error(`Could not find a registered handler for ${l.type}, map ID: ${this.mapId}, available handlers: ${Object.keys(this.messageHandlers).join(", ")}`));let p=Jm(l.data),g=new AbortController;this.abortControllers[f]=g;try{let b=yield this.messageHandlers[l.type](l.sourceMapId,p,g);this.completeTask(f,null,b)}catch(b){this.completeTask(f,b)}})}completeTask(f,l,p){let g=[];delete this.abortControllers[f];let b={id:f,type:"<response>",sourceMapId:this.mapId,origin:location.origin,error:l?Lv(l):null,data:Lv(p,g)};this.target.postMessage(b,{transfer:g})}remove(){this.invoker.remove(),this.subscription.unsubscribe()}},o.K=ue,o.L=function(){var f=new L(16);return L!=Float32Array&&(f[1]=0,f[2]=0,f[3]=0,f[4]=0,f[6]=0,f[7]=0,f[8]=0,f[9]=0,f[11]=0,f[12]=0,f[13]=0,f[14]=0),f[0]=1,f[5]=1,f[10]=1,f[15]=1,f},o.M=function(f,l,p){var g,b,I,M,O,k,F,U,$,X,re,ne,ae=p[0],he=p[1],Se=p[2];return l===f?(f[12]=l[0]*ae+l[4]*he+l[8]*Se+l[12],f[13]=l[1]*ae+l[5]*he+l[9]*Se+l[13],f[14]=l[2]*ae+l[6]*he+l[10]*Se+l[14],f[15]=l[3]*ae+l[7]*he+l[11]*Se+l[15]):(b=l[1],I=l[2],M=l[3],O=l[4],k=l[5],F=l[6],U=l[7],$=l[8],X=l[9],re=l[10],ne=l[11],f[0]=g=l[0],f[1]=b,f[2]=I,f[3]=M,f[4]=O,f[5]=k,f[6]=F,f[7]=U,f[8]=$,f[9]=X,f[10]=re,f[11]=ne,f[12]=g*ae+O*he+$*Se+l[12],f[13]=b*ae+k*he+X*Se+l[13],f[14]=I*ae+F*he+re*Se+l[14],f[15]=M*ae+U*he+ne*Se+l[15]),f},o.N=function(f,l,p){var g=p[0],b=p[1],I=p[2];return f[0]=l[0]*g,f[1]=l[1]*g,f[2]=l[2]*g,f[3]=l[3]*g,f[4]=l[4]*b,f[5]=l[5]*b,f[6]=l[6]*b,f[7]=l[7]*b,f[8]=l[8]*I,f[9]=l[9]*I,f[10]=l[10]*I,f[11]=l[11]*I,f[12]=l[12],f[13]=l[13],f[14]=l[14],f[15]=l[15],f},o.O=function(f,l,p){var g=l[0],b=l[1],I=l[2],M=l[3],O=l[4],k=l[5],F=l[6],U=l[7],$=l[8],X=l[9],re=l[10],ne=l[11],ae=l[12],he=l[13],Se=l[14],Xe=l[15],je=p[0],Ve=p[1],st=p[2],vt=p[3];return f[0]=je*g+Ve*O+st*$+vt*ae,f[1]=je*b+Ve*k+st*X+vt*he,f[2]=je*I+Ve*F+st*re+vt*Se,f[3]=je*M+Ve*U+st*ne+vt*Xe,f[4]=(je=p[4])*g+(Ve=p[5])*O+(st=p[6])*$+(vt=p[7])*ae,f[5]=je*b+Ve*k+st*X+vt*he,f[6]=je*I+Ve*F+st*re+vt*Se,f[7]=je*M+Ve*U+st*ne+vt*Xe,f[8]=(je=p[8])*g+(Ve=p[9])*O+(st=p[10])*$+(vt=p[11])*ae,f[9]=je*b+Ve*k+st*X+vt*he,f[10]=je*I+Ve*F+st*re+vt*Se,f[11]=je*M+Ve*U+st*ne+vt*Xe,f[12]=(je=p[12])*g+(Ve=p[13])*O+(st=p[14])*$+(vt=p[15])*ae,f[13]=je*b+Ve*k+st*X+vt*he,f[14]=je*I+Ve*F+st*re+vt*Se,f[15]=je*M+Ve*U+st*ne+vt*Xe,f},o.P=a,o.Q=function(f,l){let p={};for(let g=0;g<l.length;g++){let b=l[g];b in f&&(p[b]=f[b])}return p},o.R=Ou,o.S=Gv,o.T=UB,o.U=_de,o.V=yde,o.W=P,o.X=j,o.Y=jr,o.Z=sp,o._=i,o.a=J,o.a$=me,o.a0=function(f,l){var p,g,b,I,M;if(!f)return l!=null?l:{};if(!l)return f;let O=Object.assign({},f);if(l.removeAll&&(O={removeAll:!0}),l.remove){let k=new Set(l.remove);O.add&&(O.add=O.add.filter(U=>!k.has(U.id))),O.update&&(O.update=O.update.filter(U=>!k.has(U.id)));let F=new Set(((p=f.add)!==null&&p!==void 0?p:[]).map(U=>U.id));l.remove=l.remove.filter(U=>!F.has(U))}if(l.remove){let k=new Set(O.remove?O.remove.concat(l.remove):l.remove);O.remove=Array.from(k.values())}if(l.add){let k=O.add?O.add.concat(l.add):l.add,F=new Map(k.map(U=>[U.id,U]));O.add=Array.from(F.values())}if(l.update){let k=new Map((g=O.update)===null||g===void 0?void 0:g.map(F=>[F.id,F]));for(let F of l.update){let U=(b=k.get(F.id))!==null&&b!==void 0?b:{id:F.id};F.newGeometry&&(U.newGeometry=F.newGeometry),F.addOrUpdateProperties&&(U.addOrUpdateProperties=((I=U.addOrUpdateProperties)!==null&&I!==void 0?I:[]).concat(F.addOrUpdateProperties)),F.removeProperties&&(U.removeProperties=((M=U.removeProperties)!==null&&M!==void 0?M:[]).concat(F.removeProperties)),F.removeAllProperties&&(U.removeAllProperties=!0),k.set(F.id,U)}O.update=Array.from(k.values())}return O.remove&&O.add&&(O.remove=O.remove.filter(k=>O.add.findIndex(F=>F.id===k)===-1)),O},o.a1=kI,o.a2=B1,o.a3=25,o.a4=lV,o.a5=f=>{let l=window.document.createElement("video");return l.muted=!0,new Promise(p=>{l.onloadstart=()=>{p(l)};for(let g of f){let b=window.document.createElement("source");nt(g)||(l.crossOrigin="Anonymous"),b.src=g,l.appendChild(b)}})},o.a6=Rt,o.a7=function(){return Ke++},o.a8=W,o.a9=Jx,o.aA=function(f){let l=1/0,p=1/0,g=-1/0,b=-1/0;for(let I of f)l=Math.min(l,I.x),p=Math.min(p,I.y),g=Math.max(g,I.x),b=Math.max(b,I.y);return[l,p,g,b]},o.aB=us,o.aC=qe,o.aD=function(f,l,p,g,b=!1){if(!p[0]&&!p[1])return[0,0];let I=b?g==="map"?-f.bearingInRadians:0:g==="viewport"?f.bearingInRadians:0;if(I){let M=Math.sin(I),O=Math.cos(I);p=[p[0]*O-p[1]*M,p[0]*M+p[1]*O]}return[b?p[0]:qe(l,p[0],f.zoom),b?p[1]:qe(l,p[1],f.zoom)]},o.aF=tV,o.aG=cV,o.aH=eV,o.aI=pV,o.aJ=pa,o.aK=D4,o.aL=Ne,o.aM=Cn,o.aN=Qo,o.aO=$e,o.aP=Je,o.aQ=xde,o.aR=se,o.aS=te,o.aT=function(f){var l=new L(3);return l[0]=f[0],l[1]=f[1],l[2]=f[2],l},o.aU=function(f,l,p){return f[0]=l[0]-p[0],f[1]=l[1]-p[1],f[2]=l[2]-p[2],f},o.aV=function(f,l){var p=l[0],g=l[1],b=l[2],I=p*p+g*g+b*b;return I>0&&(I=1/Math.sqrt(I)),f[0]=l[0]*I,f[1]=l[1]*I,f[2]=l[2]*I,f},o.aW=le,o.aX=function(f,l){return f[0]*l[0]+f[1]*l[1]+f[2]*l[2]},o.aY=function(f,l,p){return f[0]=l[0]*p[0],f[1]=l[1]*p[1],f[2]=l[2]*p[2],f[3]=l[3]*p[3],f},o.aZ=Z,o.a_=function(f,l,p){let g=l[0]*p[0]+l[1]*p[1]+l[2]*p[2];return g===0?null:(-(f[0]*p[0]+f[1]*p[1]+f[2]*p[2])-p[3])/g},o.aa=Zm,o.ab=nd,o.ac=Tde,o.ad=function(f){let l={};if(f.replace(/(?:^|(?:\s*\,\s*))([^\x00-\x20\(\)<>@\,;\:\\"\/\[\]\?\=\{\}\x7F]+)(?:\=(?:([^\x00-\x20\(\)<>@\,;\:\\"\/\[\]\?\=\{\}\x7F]+)|(?:\"((?:[^"\\]|\\.)*)\")))?/g,(p,g,b,I)=>{let M=b||I;return l[g]=!M||M.toLowerCase(),""}),l["max-age"]){let p=parseInt(l["max-age"],10);isNaN(p)?delete l["max-age"]:l["max-age"]=p}return l},o.ae=Le,o.af=function(f){return Math.pow(2,f)},o.ag=B,o.ah=ot,o.ai=85.051129,o.aj=bde,o.ak=function(f){return Math.log(f)/Math.LN2},o.al=function(f){var l=f[0],p=f[1];return l*l+p*p},o.am=function(f,l){let p=[];for(let g in f)g in l||p.push(g);return p},o.an=function(f,l){let p=0,g=0;if(f.kind==="constant")g=f.layoutSize;else if(f.kind!=="source"){let{interpolationType:b,minZoom:I,maxZoom:M}=f,O=b?ot(Ms.interpolationFactor(b,l,I,M),0,1):0;f.kind==="camera"?g=qp.number(f.minSize,f.maxSize,O):p=O}return{uSizeT:p,uSize:g}},o.ap=function(f,{uSize:l,uSizeT:p},{lowerSize:g,upperSize:b}){return f.kind==="source"?g/ng:f.kind==="composite"?qp.number(g/ng,b/ng,p):l},o.aq=function(f,l){var p=l[0],g=l[1],b=l[2],I=l[3],M=l[4],O=l[5],k=l[6],F=l[7],U=l[8],$=l[9],X=l[10],re=l[11],ne=l[12],ae=l[13],he=l[14],Se=l[15],Xe=p*O-g*M,je=p*k-b*M,Ve=p*F-I*M,st=g*k-b*O,vt=g*F-I*O,kt=b*F-I*k,er=U*ae-$*ne,Ht=U*he-X*ne,Xt=U*Se-re*ne,Ar=$*he-X*ae,Kt=$*Se-re*ae,Jt=X*Se-re*he,Ct=Xe*Jt-je*Kt+Ve*Ar+st*Xt-vt*Ht+kt*er;return Ct?(f[0]=(O*Jt-k*Kt+F*Ar)*(Ct=1/Ct),f[1]=(b*Kt-g*Jt-I*Ar)*Ct,f[2]=(ae*kt-he*vt+Se*st)*Ct,f[3]=(X*vt-$*kt-re*st)*Ct,f[4]=(k*Xt-M*Jt-F*Ht)*Ct,f[5]=(p*Jt-b*Xt+I*Ht)*Ct,f[6]=(he*Ve-ne*kt-Se*je)*Ct,f[7]=(U*kt-X*Ve+re*je)*Ct,f[8]=(M*Kt-O*Xt+F*er)*Ct,f[9]=(g*Xt-p*Kt-I*er)*Ct,f[10]=(ne*vt-ae*Ve+Se*Xe)*Ct,f[11]=($*Ve-U*vt-re*Xe)*Ct,f[12]=(O*Ht-M*Ar-k*er)*Ct,f[13]=(p*Ar-g*Ht+b*er)*Ct,f[14]=(ae*je-ne*st-he*Xe)*Ct,f[15]=(U*st-$*je+X*Xe)*Ct,f):null},o.ar=Ze,o.as=function(f){var l=f[0],p=f[1];return Math.sqrt(l*l+p*p)},o.at=function(f){return f[0]=0,f[1]=0,f},o.au=function(f,l,p){return f[0]=l[0]*p,f[1]=l[1]*p,f},o.av=rV,o.aw=_e,o.ax=function(f,l,p,g){let b=l.y-f.y,I=l.x-f.x,M=g.y-p.y,O=g.x-p.x,k=M*I-O*b;if(k===0)return null;let F=(O*(f.y-p.y)-M*(f.x-p.x))/k;return new a(f.x+F*I,f.y+F*b)},o.ay=Cde,o.az=vfe,o.b=Ut,o.b$=class extends S{},o.b0=function(f,l,p){return f[0]=l[0]*p,f[1]=l[1]*p,f[2]=l[2]*p,f[3]=l[3]*p,f},o.b1=function(f,l){return f[0]*l[0]+f[1]*l[1]+f[2]*l[2]+f[3]},o.b2=Ede,o.b3=Qx,o.b4=function(f,l,p,g,b){var I=1/Math.tan(l/2);if(f[0]=I/p,f[1]=0,f[2]=0,f[3]=0,f[4]=0,f[5]=I,f[6]=0,f[7]=0,f[8]=0,f[9]=0,f[11]=-1,f[12]=0,f[13]=0,f[15]=0,b!=null&&b!==1/0){var M=1/(g-b);f[10]=(b+g)*M,f[14]=2*b*g*M}else f[10]=-1,f[14]=-2*g;return f},o.b5=function(f){var l=new L(16);return l[0]=f[0],l[1]=f[1],l[2]=f[2],l[3]=f[3],l[4]=f[4],l[5]=f[5],l[6]=f[6],l[7]=f[7],l[8]=f[8],l[9]=f[9],l[10]=f[10],l[11]=f[11],l[12]=f[12],l[13]=f[13],l[14]=f[14],l[15]=f[15],l},o.b6=function(f,l,p){var g=Math.sin(p),b=Math.cos(p),I=l[0],M=l[1],O=l[2],k=l[3],F=l[4],U=l[5],$=l[6],X=l[7];return l!==f&&(f[8]=l[8],f[9]=l[9],f[10]=l[10],f[11]=l[11],f[12]=l[12],f[13]=l[13],f[14]=l[14],f[15]=l[15]),f[0]=I*b+F*g,f[1]=M*b+U*g,f[2]=O*b+$*g,f[3]=k*b+X*g,f[4]=F*b-I*g,f[5]=U*b-M*g,f[6]=$*b-O*g,f[7]=X*b-k*g,f},o.b7=function(f,l,p){var g=Math.sin(p),b=Math.cos(p),I=l[4],M=l[5],O=l[6],k=l[7],F=l[8],U=l[9],$=l[10],X=l[11];return l!==f&&(f[0]=l[0],f[1]=l[1],f[2]=l[2],f[3]=l[3],f[12]=l[12],f[13]=l[13],f[14]=l[14],f[15]=l[15]),f[4]=I*b+F*g,f[5]=M*b+U*g,f[6]=O*b+$*g,f[7]=k*b+X*g,f[8]=F*b-I*g,f[9]=U*b-M*g,f[10]=$*b-O*g,f[11]=X*b-k*g,f},o.b8=function(){let f=new Float32Array(16);return B(f),f},o.b9=function(){let f=new Float64Array(16);return B(f),f},o.bA=function(f,l){let p=lt(f,360),g=lt(l,360),b=g-p,I=g>p?b-360:b+360;return Math.abs(b)<Math.abs(I)?b:I},o.bB=function(f){return f[0]=0,f[1]=0,f[2]=0,f},o.bC=function(f,l,p,g){let b=Math.sqrt(f*f+l*l),I=Math.sqrt(p*p+g*g);f/=b,l/=b,p/=I,g/=I;let M=Math.acos(f*p+l*g);return-l*p+f*g>0?M:-M},o.bD=function(f,l){let p=lt(f,2*Math.PI),g=lt(l,2*Math.PI);return Math.min(Math.abs(p-g),Math.abs(p-g+2*Math.PI),Math.abs(p-g-2*Math.PI))},o.bE=function(){let f={},l=Ae.$version;for(let p in Ae.$root){let g=Ae.$root[p];if(g.required){let b=null;b=p==="version"?l:g.type==="array"?[]:{},b!=null&&(f[p]=b)}}return f},o.bF=Lx,o.bG=Fe,o.bH=function f(l,p){if(Array.isArray(l)){if(!Array.isArray(p)||l.length!==p.length)return!1;for(let g=0;g<l.length;g++)if(!f(l[g],p[g]))return!1;return!0}if(typeof l=="object"&&l!==null&&p!==null){if(typeof p!="object"||Object.keys(l).length!==Object.keys(p).length)return!1;for(let g in l)if(!f(l[g],p[g]))return!1;return!0}return l===p},o.bI=function(f){f=f.slice();let l=Object.create(null);for(let p=0;p<f.length;p++)l[f[p].id]=f[p];for(let p=0;p<f.length;p++)"ref"in f[p]&&(f[p]=Oe(f[p],l[f[p].ref]));return f},o.bJ=function(f){if(f.type==="custom")return new Tgt(f);switch(f.type){case"background":return new wgt(f);case"circle":return new smt(f);case"color-relief":return new dmt(f);case"fill":return new Cmt(f);case"fill-extrusion":return new zmt(f);case"heatmap":return new umt(f);case"hillshade":return new pmt(f);case"line":return new $mt(f);case"raster":return new Sgt(f);case"symbol":return new j4(f)}},o.bK=mt,o.bL=function(f,l){if(!f)return[{command:"setStyle",args:[l]}];let p=[];try{if(!xt(f.version,l.version))return[{command:"setStyle",args:[l]}];xt(f.center,l.center)||p.push({command:"setCenter",args:[l.center]}),xt(f.state,l.state)||p.push({command:"setGlobalState",args:[l.state]}),xt(f.centerAltitude,l.centerAltitude)||p.push({command:"setCenterAltitude",args:[l.centerAltitude]}),xt(f.zoom,l.zoom)||p.push({command:"setZoom",args:[l.zoom]}),xt(f.bearing,l.bearing)||p.push({command:"setBearing",args:[l.bearing]}),xt(f.pitch,l.pitch)||p.push({command:"setPitch",args:[l.pitch]}),xt(f.roll,l.roll)||p.push({command:"setRoll",args:[l.roll]}),xt(f.sprite,l.sprite)||p.push({command:"setSprite",args:[l.sprite]}),xt(f.glyphs,l.glyphs)||p.push({command:"setGlyphs",args:[l.glyphs]}),xt(f.transition,l.transition)||p.push({command:"setTransition",args:[l.transition]}),xt(f.light,l.light)||p.push({command:"setLight",args:[l.light]}),xt(f.terrain,l.terrain)||p.push({command:"setTerrain",args:[l.terrain]}),xt(f.sky,l.sky)||p.push({command:"setSky",args:[l.sky]}),xt(f.projection,l.projection)||p.push({command:"setProjection",args:[l.projection]});let g={},b=[];(function(M,O,k,F){let U;for(U in O=O||{},M=M||{})Object.prototype.hasOwnProperty.call(M,U)&&(Object.prototype.hasOwnProperty.call(O,U)||pn(U,k,F));for(U in O)Object.prototype.hasOwnProperty.call(O,U)&&(Object.prototype.hasOwnProperty.call(M,U)?xt(M[U],O[U])||(M[U].type==="geojson"&&O[U].type==="geojson"&&an(M,O,U)?Bt(k,{command:"setGeoJSONSourceData",args:[U,O[U].data]}):wt(U,O,k,F)):Tr(U,O,k))})(f.sources,l.sources,b,g);let I=[];f.layers&&f.layers.forEach(M=>{"source"in M&&g[M.source]?p.push({command:"removeLayer",args:[M.id]}):I.push(M)}),p=p.concat(b),function(M,O,k){O=O||[];let F=(M=M||[]).map(or),U=O.map(or),$=M.reduce(Er,{}),X=O.reduce(Er,{}),re=F.slice(),ne=Object.create(null),ae,he,Se,Xe,je;for(let Ve=0,st=0;Ve<F.length;Ve++)ae=F[Ve],Object.prototype.hasOwnProperty.call(X,ae)?st++:(Bt(k,{command:"removeLayer",args:[ae]}),re.splice(re.indexOf(ae,st),1));for(let Ve=0,st=0;Ve<U.length;Ve++)ae=U[U.length-1-Ve],re[re.length-1-Ve]!==ae&&(Object.prototype.hasOwnProperty.call($,ae)?(Bt(k,{command:"removeLayer",args:[ae]}),re.splice(re.lastIndexOf(ae,re.length-st),1)):st++,Xe=re[re.length-Ve],Bt(k,{command:"addLayer",args:[X[ae],Xe]}),re.splice(re.length-Ve,0,ae),ne[ae]=!0);for(let Ve=0;Ve<U.length;Ve++)if(ae=U[Ve],he=$[ae],Se=X[ae],!ne[ae]&&!xt(he,Se))if(xt(he.source,Se.source)&&xt(he["source-layer"],Se["source-layer"])&&xt(he.type,Se.type)){for(je in Cr(he.layout,Se.layout,k,ae,null,"setLayoutProperty"),Cr(he.paint,Se.paint,k,ae,null,"setPaintProperty"),xt(he.filter,Se.filter)||Bt(k,{command:"setFilter",args:[ae,Se.filter]}),xt(he.minzoom,Se.minzoom)&&xt(he.maxzoom,Se.maxzoom)||Bt(k,{command:"setLayerZoomRange",args:[ae,Se.minzoom,Se.maxzoom]}),he)Object.prototype.hasOwnProperty.call(he,je)&&je!=="layout"&&je!=="paint"&&je!=="filter"&&je!=="metadata"&&je!=="minzoom"&&je!=="maxzoom"&&(je.indexOf("paint.")===0?Cr(he[je],Se[je],k,ae,je.slice(6),"setPaintProperty"):xt(he[je],Se[je])||Bt(k,{command:"setLayerProperty",args:[ae,je,Se[je]]}));for(je in Se)Object.prototype.hasOwnProperty.call(Se,je)&&!Object.prototype.hasOwnProperty.call(he,je)&&je!=="layout"&&je!=="paint"&&je!=="filter"&&je!=="metadata"&&je!=="minzoom"&&je!=="maxzoom"&&(je.indexOf("paint.")===0?Cr(he[je],Se[je],k,ae,je.slice(6),"setPaintProperty"):xt(he[je],Se[je])||Bt(k,{command:"setLayerProperty",args:[ae,je,Se[je]]}))}else Bt(k,{command:"removeLayer",args:[ae]}),Xe=re[re.lastIndexOf(ae)+1],Bt(k,{command:"addLayer",args:[Se,Xe]})}(I,l.layers,p)}catch(g){console.warn("Unable to compute style diff:",g),p=[{command:"setStyle",args:[l]}]}return p},o.bM=function(f){let l=[],p=f.id;return p===void 0&&l.push({message:`layers.${p}: missing required property "id"`}),f.render===void 0&&l.push({message:`layers.${p}: missing required method "render"`}),f.renderingMode&&f.renderingMode!=="2d"&&f.renderingMode!=="3d"&&l.push({message:`layers.${p}: property "renderingMode" must be either "2d" or "3d"`}),l},o.bN=Ge,o.bO=ft,o.bP=class extends vl{constructor(f,l){super(f,l),this.current=0}set(f){this.current!==f&&(this.current=f,this.gl.uniform1i(this.location,f))}},o.bQ=Ba,o.bR=class extends vl{constructor(f,l){super(f,l),this.current=cc}set(f){if(f[12]!==this.current[12]||f[0]!==this.current[0])return this.current=f,void this.gl.uniformMatrix4fv(this.location,!1,f);for(let l=1;l<16;l++)if(f[l]!==this.current[l]){this.current=f,this.gl.uniformMatrix4fv(this.location,!1,f);break}}},o.bS=Ca,o.bT=class extends vl{constructor(f,l){super(f,l),this.current=[0,0,0]}set(f){f[0]===this.current[0]&&f[1]===this.current[1]&&f[2]===this.current[2]||(this.current=f,this.gl.uniform3f(this.location,f[0],f[1],f[2]))}},o.bU=class extends vl{constructor(f,l){super(f,l),this.current=[0,0]}set(f){f[0]===this.current[0]&&f[1]===this.current[1]||(this.current=f,this.gl.uniform2f(this.location,f[0],f[1]))}},o.bV=z,o.bW=function(f,l){var p=Math.sin(l),g=Math.cos(l);return f[0]=g,f[1]=p,f[2]=0,f[3]=-p,f[4]=g,f[5]=0,f[6]=0,f[7]=0,f[8]=1,f},o.bX=function(f,l,p){var g=l[0],b=l[1],I=l[2];return f[0]=g*p[0]+b*p[3]+I*p[6],f[1]=g*p[1]+b*p[4]+I*p[7],f[2]=g*p[2]+b*p[5]+I*p[8],f},o.bY=function(f,l,p,g,b,I,M){var O=1/(l-p),k=1/(g-b),F=1/(I-M);return f[0]=-2*O,f[1]=0,f[2]=0,f[3]=0,f[4]=0,f[5]=-2*k,f[6]=0,f[7]=0,f[8]=0,f[9]=0,f[10]=2*F,f[11]=0,f[12]=(l+p)*O,f[13]=(b+g)*k,f[14]=(M+I)*F,f[15]=1,f},o.bZ=class extends vl{constructor(f,l){super(f,l),this.current=new Array}set(f){if(f!=this.current){this.current=f;let l=new Float32Array(4*f.length);for(let p=0;p<f.length;p++)l[4*p]=f[p].r,l[4*p+1]=f[p].g,l[4*p+2]=f[p].b,l[4*p+3]=f[p].a;this.gl.uniform4fv(this.location,l)}}},o.b_=class extends vl{constructor(f,l){super(f,l),this.current=new Array}set(f){if(f!=this.current){this.current=f;let l=new Float32Array(f);this.gl.uniform1fv(this.location,l)}}},o.ba=function(){return new Float64Array(16)},o.bb=function(f,l,p){let g=new Float64Array(4);return Ce(g,f,l-90,p),g},o.bc=function(f,l,p,g){var b,I,M,O,k,F=l[0],U=l[1],$=l[2],X=l[3],re=p[0],ne=p[1],ae=p[2],he=p[3];return(I=F*re+U*ne+$*ae+X*he)<0&&(I=-I,re=-re,ne=-ne,ae=-ae,he=-he),1-I>D?(b=Math.acos(I),M=Math.sin(b),O=Math.sin((1-g)*b)/M,k=Math.sin(g*b)/M):(O=1-g,k=g),f[0]=O*F+k*re,f[1]=O*U+k*ne,f[2]=O*$+k*ae,f[3]=O*X+k*he,f},o.bd=function(f){let l=new Float64Array(9);var p,g,b,I,M,O,k,F,U,$,X,re,ne,ae,he,Se,Xe,je;$=(b=(g=f)[0])*(k=b+b),X=(I=g[1])*k,ne=(M=g[2])*k,ae=M*(F=I+I),Se=(O=g[3])*k,Xe=O*F,je=O*(U=M+M),(p=l)[0]=1-(re=I*F)-(he=M*U),p[3]=X-je,p[6]=ne+Xe,p[1]=X+je,p[4]=1-$-he,p[7]=ae-Se,p[2]=ne-Xe,p[5]=ae+Se,p[8]=1-$-re;let Ve=Je(-Math.asin(ot(l[2],-1,1))),st,vt;return Math.hypot(l[5],l[8])<.001?(st=0,vt=-Je(Math.atan2(l[3],l[4]))):(st=Je(l[5]===0&&l[8]===0?0:Math.atan2(l[5],l[8])),vt=Je(l[1]===0&&l[0]===0?0:Math.atan2(l[1],l[0]))),{roll:st,pitch:Ve+90,bearing:vt}},o.be=function(f,l){return f.roll==l.roll&&f.pitch==l.pitch&&f.bearing==l.bearing},o.bf=vn,o.bg=vh,o.bh=Yx,o.bi=AI,o.bj=Wx,o.bk=_t,o.bl=Tt,o.bm=Vs,o.bn=function(f,l,p,g,b){return _t(g,b,ot((f-l)/(p-l),0,1))},o.bo=lt,o.bp=function(){return new Float64Array(3)},o.bq=function(f,l,p,g){return f[0]=l[0]+p[0]*g,f[1]=l[1]+p[1]*g,f[2]=l[2]+p[2]*g,f},o.br=Ce,o.bs=function(f,l,p){var g=p[0],b=p[1],I=p[2],M=p[3],O=l[0],k=l[1],F=l[2],U=b*F-I*k,$=I*O-g*F,X=g*k-b*O;return f[0]=O+M*(U+=U)+b*(X+=X)-I*($+=$),f[1]=k+M*$+I*U-g*X,f[2]=F+M*X+g*$-b*U,f},o.bt=function(f,l,p){let g=(b=[f[0],f[1],f[2],l[0],l[1],l[2],p[0],p[1],p[2]])[0]*((U=b[8])*(M=b[4])-(O=b[5])*(F=b[7]))+b[1]*(-U*(I=b[3])+O*(k=b[6]))+b[2]*(F*I-M*k);var b,I,M,O,k,F,U;if(g===0)return null;let $=le([],[l[0],l[1],l[2]],[p[0],p[1],p[2]]),X=le([],[p[0],p[1],p[2]],[f[0],f[1],f[2]]),re=le([],[f[0],f[1],f[2]],[l[0],l[1],l[2]]),ne=se([],$,-f[3]);return te(ne,ne,se([],X,-l[3])),te(ne,ne,se([],re,-p[3])),se(ne,ne,1/g),ne},o.bu=aV,o.bv=function(){return new Float64Array(4)},o.bw=function(f,l,p,g){var b=[],I=[];return b[0]=l[0]-p[0],b[1]=l[1]-p[1],b[2]=l[2]-p[2],I[0]=b[0]*Math.cos(g)-b[1]*Math.sin(g),I[1]=b[0]*Math.sin(g)+b[1]*Math.cos(g),I[2]=b[2],f[0]=I[0]+p[0],f[1]=I[1]+p[1],f[2]=I[2]+p[2],f},o.bx=function(f,l,p,g){var b=[],I=[];return b[0]=l[0]-p[0],b[1]=l[1]-p[1],b[2]=l[2]-p[2],I[0]=b[0],I[1]=b[1]*Math.cos(g)-b[2]*Math.sin(g),I[2]=b[1]*Math.sin(g)+b[2]*Math.cos(g),f[0]=I[0]+p[0],f[1]=I[1]+p[1],f[2]=I[2]+p[2],f},o.by=function(f,l,p,g){var b=[],I=[];return b[0]=l[0]-p[0],b[1]=l[1]-p[1],b[2]=l[2]-p[2],I[0]=b[2]*Math.sin(g)+b[0]*Math.cos(g),I[1]=b[1],I[2]=b[2]*Math.cos(g)-b[0]*Math.sin(g),f[0]=I[0]+p[0],f[1]=I[1]+p[1],f[2]=I[2]+p[2],f},o.bz=function(f,l,p){var g=Math.sin(p),b=Math.cos(p),I=l[0],M=l[1],O=l[2],k=l[3],F=l[8],U=l[9],$=l[10],X=l[11];return l!==f&&(f[4]=l[4],f[5]=l[5],f[6]=l[6],f[7]=l[7],f[12]=l[12],f[13]=l[13],f[14]=l[14],f[15]=l[15]),f[0]=I*b-F*g,f[1]=M*b-U*g,f[2]=O*b-$*g,f[3]=k*b-X*g,f[8]=I*g+F*b,f[9]=M*g+U*b,f[10]=O*g+$*b,f[11]=k*g+X*b,f},o.c=xe,o.c0=Kmt,o.c1=class extends d{},o.c2=FB,o.c3=function(f){return f<=1?1:Math.pow(2,Math.ceil(Math.log(f)/Math.LN2))},o.c4=Mfe,o.c5=function(f,l,p){var g=l[0],b=l[1],I=l[2],M=p[3]*g+p[7]*b+p[11]*I+p[15];return f[0]=(p[0]*g+p[4]*b+p[8]*I+p[12])/(M=M||1),f[1]=(p[1]*g+p[5]*b+p[9]*I+p[13])/M,f[2]=(p[2]*g+p[6]*b+p[10]*I+p[14])/M,f},o.c6=class extends yI{},o.c7=class extends V{},o.c8=function(f,l){return f[0]===l[0]&&f[1]===l[1]&&f[2]===l[2]&&f[3]===l[3]&&f[4]===l[4]&&f[5]===l[5]&&f[6]===l[6]&&f[7]===l[7]&&f[8]===l[8]&&f[9]===l[9]&&f[10]===l[10]&&f[11]===l[11]&&f[12]===l[12]&&f[13]===l[13]&&f[14]===l[14]&&f[15]===l[15]},o.c9=function(f,l){var p=f[0],g=f[1],b=f[2],I=f[3],M=f[4],O=f[5],k=f[6],F=f[7],U=f[8],$=f[9],X=f[10],re=f[11],ne=f[12],ae=f[13],he=f[14],Se=f[15],Xe=l[0],je=l[1],Ve=l[2],st=l[3],vt=l[4],kt=l[5],er=l[6],Ht=l[7],Xt=l[8],Ar=l[9],Kt=l[10],Jt=l[11],Ct=l[12],Jr=l[13],sn=l[14],Br=l[15];return Math.abs(p-Xe)<=D*Math.max(1,Math.abs(p),Math.abs(Xe))&&Math.abs(g-je)<=D*Math.max(1,Math.abs(g),Math.abs(je))&&Math.abs(b-Ve)<=D*Math.max(1,Math.abs(b),Math.abs(Ve))&&Math.abs(I-st)<=D*Math.max(1,Math.abs(I),Math.abs(st))&&Math.abs(M-vt)<=D*Math.max(1,Math.abs(M),Math.abs(vt))&&Math.abs(O-kt)<=D*Math.max(1,Math.abs(O),Math.abs(kt))&&Math.abs(k-er)<=D*Math.max(1,Math.abs(k),Math.abs(er))&&Math.abs(F-Ht)<=D*Math.max(1,Math.abs(F),Math.abs(Ht))&&Math.abs(U-Xt)<=D*Math.max(1,Math.abs(U),Math.abs(Xt))&&Math.abs($-Ar)<=D*Math.max(1,Math.abs($),Math.abs(Ar))&&Math.abs(X-Kt)<=D*Math.max(1,Math.abs(X),Math.abs(Kt))&&Math.abs(re-Jt)<=D*Math.max(1,Math.abs(re),Math.abs(Jt))&&Math.abs(ne-Ct)<=D*Math.max(1,Math.abs(ne),Math.abs(Ct))&&Math.abs(ae-Jr)<=D*Math.max(1,Math.abs(ae),Math.abs(Jr))&&Math.abs(he-sn)<=D*Math.max(1,Math.abs(he),Math.abs(sn))&&Math.abs(Se-Br)<=D*Math.max(1,Math.abs(Se),Math.abs(Br))},o.cA=function(f,l){J.REGISTERED_PROTOCOLS[f]=l},o.cB=function(f){delete J.REGISTERED_PROTOCOLS[f]},o.cC=function(f,l){let p={};for(let b=0;b<f.length;b++){let I=l&&l[f[b].id]||CB(f[b]);l&&(l[f[b].id]=I);let M=p[I];M||(M=p[I]=[]),M.push(f[b])}let g=[];for(let b in p)g.push(p[b]);return g},o.cD=fr,o.cE=Sde,o.cF=Ide,o.cG=rde,o.cH=function(f){f.bucket.createArrays(),f.bucket.tilePixelRatio=ct/(512*f.bucket.overscaling),f.bucket.compareText={},f.bucket.iconsNeedLinear=!1;let l=f.bucket.layers[0],p=l.layout,g=l._unevaluatedLayout._values,b={layoutIconSize:g["icon-size"].possiblyEvaluate(new ii(f.bucket.zoom+1),f.canonical),layoutTextSize:g["text-size"].possiblyEvaluate(new ii(f.bucket.zoom+1),f.canonical),textMaxSize:g["text-size"].possiblyEvaluate(new ii(18))};if(f.bucket.textSizeData.kind==="composite"){let{minZoom:F,maxZoom:U}=f.bucket.textSizeData;b.compositeTextSizes=[g["text-size"].possiblyEvaluate(new ii(F),f.canonical),g["text-size"].possiblyEvaluate(new ii(U),f.canonical)]}if(f.bucket.iconSizeData.kind==="composite"){let{minZoom:F,maxZoom:U}=f.bucket.iconSizeData;b.compositeIconSizes=[g["icon-size"].possiblyEvaluate(new ii(F),f.canonical),g["icon-size"].possiblyEvaluate(new ii(U),f.canonical)]}let I=p.get("text-line-height")*us,M=p.get("text-rotation-alignment")!=="viewport"&&p.get("symbol-placement")!=="point",O=p.get("text-keep-upright"),k=p.get("text-size");for(let F of f.bucket.features){let U=p.get("text-font").evaluate(F,{},f.canonical).join(","),$=k.evaluate(F,{},f.canonical),X=b.layoutTextSize.evaluate(F,{},f.canonical),re=b.layoutIconSize.evaluate(F,{},f.canonical),ne={horizontal:{},vertical:void 0},ae=F.text,he,Se=[0,0];if(ae){let Ve=ae.toString(),st=p.get("text-letter-spacing").evaluate(F,{},f.canonical)*us,vt=DB(Ve)?st:0,kt=p.get("text-anchor").evaluate(F,{},f.canonical),er=jde(l,F,f.canonical);if(!er){let Kt=p.get("text-radial-offset").evaluate(F,{},f.canonical);Se=Kt?Rde(kt,[Kt*us,uV]):p.get("text-offset").evaluate(F,{},f.canonical).map(Jt=>Jt*us)}let Ht=M?"center":p.get("text-justify").evaluate(F,{},f.canonical),Xt=p.get("symbol-placement")==="point"?p.get("text-max-width").evaluate(F,{},f.canonical)*us:1/0,Ar=()=>{f.bucket.allowVerticalPlacement&&kx(Ve)&&(ne.vertical=L4(ae,f.glyphMap,f.glyphPositions,f.imagePositions,U,Xt,I,kt,"left",vt,Se,o.ao.vertical,!0,X,$))};if(!M&&er){let Kt=new Set;if(Ht==="auto")for(let Ct=0;Ct<er.values.length;Ct+=2)Kt.add(cV(er.values[Ct]));else Kt.add(Ht);let Jt=!1;for(let Ct of Kt)if(!ne.horizontal[Ct])if(Jt)ne.horizontal[Ct]=ne.horizontal[0];else{let Jr=L4(ae,f.glyphMap,f.glyphPositions,f.imagePositions,U,Xt,I,"center",Ct,vt,Se,o.ao.horizontal,!1,X,$);Jr&&(ne.horizontal[Ct]=Jr,Jt=Jr.positionedLines.length===1)}Ar()}else{Ht==="auto"&&(Ht=cV(kt));let Kt=L4(ae,f.glyphMap,f.glyphPositions,f.imagePositions,U,Xt,I,kt,Ht,vt,Se,o.ao.horizontal,!1,X,$);Kt&&(ne.horizontal[Ht]=Kt),Ar(),kx(Ve)&&M&&O&&(ne.vertical=L4(ae,f.glyphMap,f.glyphPositions,f.imagePositions,U,Xt,I,kt,Ht,vt,Se,o.ao.vertical,!1,X,$))}}let Xe=!1;if(F.icon&&F.icon.name){let Ve=f.imageMap[F.icon.name];Ve&&(he=ygt(f.imagePositions[F.icon.name],p.get("icon-offset").evaluate(F,{},f.canonical),p.get("icon-anchor").evaluate(F,{},f.canonical)),Xe=!!Ve.sdf,f.bucket.sdfIcons===void 0?f.bucket.sdfIcons=Xe:f.bucket.sdfIcons!==Xe&&At("Style sheet warning: Cannot mix SDF and non-SDF icons in one buffer"),(Ve.pixelRatio!==f.bucket.pixelRatio||p.get("icon-rotate").constantOr(1)!==0)&&(f.bucket.iconsNeedLinear=!0))}let je=zde(ne.horizontal)||ne.vertical;f.bucket.iconsInText=!!je&&je.iconsInText,(je||he)&&Lgt(f.bucket,F,ne,he,f.imageMap,b,X,re,Se,Xe,f.canonical,f.subdivisionGranularity)}f.showCollisionBoxes&&f.bucket.generateCollisionDebugBuffers()},o.cI=ZB,o.cJ=$B,o.cK=YB,o.cL=Bfe,o.cM=XB,o.cN=class{constructor(f){this._marks={start:[f.url,"start"].join("#"),end:[f.url,"end"].join("#"),measure:f.url.toString()},performance.mark(this._marks.start)}finish(){performance.mark(this._marks.end);let f=performance.getEntriesByName(this._marks.measure);return f.length===0&&(performance.measure(this._marks.measure,this._marks.start,this._marks.end),f=performance.getEntriesByName(this._marks.measure),performance.clearMarks(this._marks.start),performance.clearMarks(this._marks.end),performance.clearMeasures(this._marks.measure)),f}},o.cO=function(f,l,p,g,b){return i(this,void 0,void 0,function*(){if(j())try{return yield jr(f,l,p,g,b)}catch(I){}return function(I,M,O,k,F){let U=I.width,$=I.height;Or&&br||(Or=new OffscreenCanvas(U,$),br=Or.getContext("2d",{willReadFrequently:!0})),Or.width=U,Or.height=$,br.drawImage(I,0,0,U,$);let X=br.getImageData(M,O,k,F);return br.clearRect(0,0,U,$),X.data}(f,l,p,g,b)})},o.cP=Ofe,o.cQ=c,o.cR=Ufe,o.cS=Zx,o.cT=C1,o.cU=function(f,l){let p=new Map;if(f!=null)if(f.type==="Feature")p.set(RI(f,l),f);else for(let g of f.features)p.set(RI(g,l),g);return p},o.cV=function(f,l){if(f==null)return!0;if(f.type==="Feature")return RI(f,l)!=null;if(f.type==="FeatureCollection"){let p=new Set;for(let g of f.features){let b=RI(g,l);if(b==null||p.has(b))return!1;p.add(b)}return!0}return!1},o.cW=function(f,l,p){var g,b,I,M;if(l.removeAll&&f.clear(),l.remove)for(let O of l.remove)f.delete(O);if(l.add)for(let O of l.add){let k=RI(O,p);k!=null&&f.set(k,O)}if(l.update)for(let O of l.update){let k=f.get(O.id);if(k==null)continue;let F=!O.removeAllProperties&&(((g=O.removeProperties)===null||g===void 0?void 0:g.length)>0||((b=O.addOrUpdateProperties)===null||b===void 0?void 0:b.length)>0);if((O.newGeometry||O.removeAllProperties||F)&&(k=Object.assign({},k),f.set(O.id,k),F&&(k.properties=Object.assign({},k.properties))),O.newGeometry&&(k.geometry=O.newGeometry),O.removeAllProperties)k.properties={};else if(((I=O.removeProperties)===null||I===void 0?void 0:I.length)>0)for(let U of O.removeProperties)Object.prototype.hasOwnProperty.call(k.properties,U)&&delete k.properties[U];if(((M=O.addOrUpdateProperties)===null||M===void 0?void 0:M.length)>0)for(let{key:U,value:$}of O.addOrUpdateProperties)k.properties[U]=$}},o.cX=np,o.ca=function(f,l){return f[0]=l[0],f[1]=l[1],f[2]=l[2],f[3]=l[3],f[4]=l[4],f[5]=l[5],f[6]=l[6],f[7]=l[7],f[8]=l[8],f[9]=l[9],f[10]=l[10],f[11]=l[11],f[12]=l[12],f[13]=l[13],f[14]=l[14],f[15]=l[15],f},o.cb=f=>f.type==="symbol",o.cc=f=>f.type==="circle",o.cd=f=>f.type==="heatmap",o.ce=f=>f.type==="line",o.cf=f=>f.type==="fill",o.cg=f=>f.type==="fill-extrusion",o.ch=f=>f.type==="hillshade",o.ci=f=>f.type==="color-relief",o.cj=f=>f.type==="raster",o.ck=f=>f.type==="background",o.cl=f=>f.type==="custom",o.cm=et,o.cn=function(f,l,p){let g=rt(l.x-p.x,l.y-p.y),b=rt(f.x-p.x,f.y-p.y);var I,M;return Je(Math.atan2(g[0]*b[1]-g[1]*b[0],(I=g)[0]*(M=b)[0]+I[1]*M[1]))},o.co=pt,o.cp=function(f,l){return Ft[l]&&(f instanceof MouseEvent||f instanceof WheelEvent)},o.cq=function(f,l){return tt[l]&&"touches"in f},o.cr=function(f){return tt[f]||Ft[f]},o.cs=function(f,l,p){var g=l[0],b=l[1];return f[0]=p[0]*g+p[4]*b+p[12],f[1]=p[1]*g+p[5]*b+p[13],f},o.ct=function(f,l){let{x:p,y:g}=kI.fromLngLat(l);return!(f<0||f>25||g<0||g>=1||p<0||p>=1)},o.cu=function(f,l){return f[0]=l[0],f[1]=0,f[2]=0,f[3]=0,f[4]=0,f[5]=l[1],f[6]=0,f[7]=0,f[8]=0,f[9]=0,f[10]=l[2],f[11]=0,f[12]=0,f[13]=0,f[14]=0,f[15]=1,f},o.cv=class extends jv{},o.cw=Rgt,o.cy=function(f){return f.message===$t},o.cz=we,o.d=nt,o.e=De,o.f=f=>i(void 0,void 0,void 0,function*(){if(f.byteLength===0)return createImageBitmap(new ImageData(1,1));let l=new Blob([new Uint8Array(f)],{type:"image/png"});try{return createImageBitmap(l)}catch(p){throw new Error(`Could not load image because of ${p.message}. Please make sure to use a supported image type such as PNG or JPEG. Note that SVGs are not supported.`)}}),o.g=oe,o.h=f=>new Promise((l,p)=>{let g=new Image;g.onload=()=>{l(g),URL.revokeObjectURL(g.src),g.onload=null,window.requestAnimationFrame(()=>{g.src=ar})},g.onerror=()=>p(new Error("Could not load image. Please make sure to use a supported image type such as PNG or JPEG. Note that SVGs are not supported."));let b=new Blob([new Uint8Array(f)],{type:"image/png"});g.src=f.byteLength?URL.createObjectURL(b):ar}),o.i=Yt,o.j=(f,l)=>We(De(f,{type:"json"}),l),o.k=Be,o.l=Ee,o.m=We,o.n=(f,l)=>We(De(f,{type:"arrayBuffer"}),l),o.o=function(f){return new XB(f).readFields(sgt,[])},o.p=tde,o.q=SI,o.r=ml,o.s=Pr,o.t=E4,o.u=ro,o.v=Ae,o.w=At,o.x=AB,o.y=k1,o.z=Nv}),r("worker",["./shared"],function(o){"use strict";class i{constructor(J){this.keyCache={},J&&this.replace(J)}replace(J){this._layerConfigs={},this._layers={},this.update(J,[])}update(J,oe){for(let we of J){this._layerConfigs[we.id]=we;let Fe=this._layers[we.id]=o.bJ(we);Fe._featureFilter=o.aa(Fe.filter),this.keyCache[we.id]&&delete this.keyCache[we.id]}for(let we of oe)delete this.keyCache[we],delete this._layerConfigs[we],delete this._layers[we];this.familiesBySource={};let ue=o.cC(Object.values(this._layerConfigs),this.keyCache);for(let we of ue){let Fe=we.map(Be=>this._layers[Be.id]),We=Fe[0];if(We.visibility==="none")continue;let nt=We.source||"",Ye=this.familiesBySource[nt];Ye||(Ye=this.familiesBySource[nt]={});let be=We.sourceLayer||"_geojsonTileLayer",Ee=Ye[be];Ee||(Ee=Ye[be]=[]),Ee.push(Fe)}}}class a{constructor(J){let oe={},ue=[];for(let nt in J){let Ye=J[nt],be=oe[nt]={};for(let Ee in Ye){let Be=Ye[+Ee];if(!Be||Be.bitmap.width===0||Be.bitmap.height===0)continue;let gt={x:0,y:0,w:Be.bitmap.width+2,h:Be.bitmap.height+2};ue.push(gt),be[Ee]={rect:gt,metrics:Be.metrics}}}let{w:we,h:Fe}=o.p(ue),We=new o.q({width:we||1,height:Fe||1});for(let nt in J){let Ye=J[nt];for(let be in Ye){let Ee=Ye[+be];if(!Ee||Ee.bitmap.width===0||Ee.bitmap.height===0)continue;let Be=oe[nt][be].rect;o.q.copy(Ee.bitmap,We,{x:0,y:0},{x:Be.x+1,y:Be.y+1},Ee.bitmap)}}this.image=We,this.positions=oe}}o.cD("GlyphAtlas",a);class c{constructor(J){this.tileID=new o.Z(J.tileID.overscaledZ,J.tileID.wrap,J.tileID.canonical.z,J.tileID.canonical.x,J.tileID.canonical.y),this.uid=J.uid,this.zoom=J.zoom,this.pixelRatio=J.pixelRatio,this.tileSize=J.tileSize,this.source=J.source,this.overscaling=this.tileID.overscaleFactor(),this.showCollisionBoxes=J.showCollisionBoxes,this.collectResourceTiming=!!J.collectResourceTiming,this.returnDependencies=!!J.returnDependencies,this.promoteId=J.promoteId,this.inFlightDependencies=[],this.globalState=J.globalState}parse(J,oe,ue,we,Fe){return o._(this,void 0,void 0,function*(){this.status="parsing",this.data=J,this.collisionBoxArray=new o.a8;let We=new o.cE(Object.keys(J.layers).sort()),nt=new o.cF(this.tileID,this.promoteId);nt.bucketLayerIDs=[];let Ye={},be={featureIndex:nt,iconDependencies:{},patternDependencies:{},glyphDependencies:{},availableImages:ue,subdivisionGranularity:Fe},Ee=oe.familiesBySource[this.source];for(let Cr in Ee){let or=J.layers[Cr];if(!or)continue;or.version===1&&o.w(`Vector tile source "${this.source}" layer "${Cr}" does not use vector tile spec v2 and therefore may have some rendering errors.`);let Er=We.encode(Cr),Rt=[];for(let qo=0;qo<or.length;qo++){let Xo=or.feature(qo),Un=nt.getId(Xo,Cr);Rt.push({feature:Xo,id:Un,index:qo,sourceLayerIndex:Er})}for(let qo of Ee[Cr]){let Xo=qo[0];Xo.source!==this.source&&o.w(`layer.source = ${Xo.source} does not equal this.source = ${this.source}`),Xo.minzoom&&this.zoom<Math.floor(Xo.minzoom)||Xo.maxzoom&&this.zoom>=Xo.maxzoom||Xo.visibility!=="none"&&(h(qo,this.zoom,ue,this.globalState),(Ye[Xo.id]=Xo.createBucket({index:nt.bucketLayerIDs.length,layers:qo,zoom:this.zoom,pixelRatio:this.pixelRatio,overscaling:this.overscaling,collisionBoxArray:this.collisionBoxArray,sourceLayerIndex:Er,sourceID:this.source,globalState:this.globalState})).populate(Rt,be,this.tileID.canonical),nt.bucketLayerIDs.push(qo.map(Un=>Un.id)))}}let Be=o.bN(be.glyphDependencies,Cr=>Object.keys(Cr).map(Number));this.inFlightDependencies.forEach(Cr=>Cr==null?void 0:Cr.abort()),this.inFlightDependencies=[];let gt=Promise.resolve({});if(Object.keys(Be).length){let Cr=new AbortController;this.inFlightDependencies.push(Cr),gt=we.sendAsync({type:"GG",data:{stacks:Be,source:this.source,tileID:this.tileID,type:"glyphs"}},Cr)}let Ae=Object.keys(be.iconDependencies),Pt=Promise.resolve({});if(Ae.length){let Cr=new AbortController;this.inFlightDependencies.push(Cr),Pt=we.sendAsync({type:"GI",data:{icons:Ae,source:this.source,tileID:this.tileID,type:"icons"}},Cr)}let Oe=Object.keys(be.patternDependencies),xt=Promise.resolve({});if(Oe.length){let Cr=new AbortController;this.inFlightDependencies.push(Cr),xt=we.sendAsync({type:"GI",data:{icons:Oe,source:this.source,tileID:this.tileID,type:"patterns"}},Cr)}let[Bt,Tr,pn]=yield Promise.all([gt,Pt,xt]),wt=new a(Bt),an=new o.cG(Tr,pn);for(let Cr in Ye){let or=Ye[Cr];or instanceof o.a9?(h(or.layers,this.zoom,ue,this.globalState),o.cH({bucket:or,glyphMap:Bt,glyphPositions:wt.positions,imageMap:Tr,imagePositions:an.iconPositions,showCollisionBoxes:this.showCollisionBoxes,canonical:this.tileID.canonical,subdivisionGranularity:be.subdivisionGranularity})):or.hasPattern&&(or instanceof o.cI||or instanceof o.cJ||or instanceof o.cK)&&(h(or.layers,this.zoom,ue,this.globalState),or.addFeatures(be,this.tileID.canonical,an.patternPositions))}return this.status="done",{buckets:Object.values(Ye).filter(Cr=>!Cr.isEmpty()),featureIndex:nt,collisionBoxArray:this.collisionBoxArray,glyphAtlasImage:wt.image,imageAtlas:an,glyphMap:this.returnDependencies?Bt:null,iconMap:this.returnDependencies?Tr:null,glyphPositions:this.returnDependencies?wt.positions:null}})}}function h(xe,J,oe,ue){let we=new o.F(J);for(let Fe of xe)Fe.setGlobalState(ue),Fe.recalculate(we,oe)}class m{constructor(J,oe,ue){this.actor=J,this.layerIndex=oe,this.availableImages=ue,this.fetching={},this.loading={},this.loaded={}}loadVectorTile(J,oe){return o._(this,void 0,void 0,function*(){let ue=yield o.n(J.request,oe);try{return{vectorTile:new o.cL(new o.cM(ue.data)),rawData:ue.data,cacheControl:ue.cacheControl,expires:ue.expires}}catch(we){let Fe=new Uint8Array(ue.data),We=`Unable to parse the tile at ${J.request.url}, `;throw We+=Fe[0]===31&&Fe[1]===139?"please make sure the data is not gzipped and that you have configured the relevant header in the server":`got error: ${we.message}`,new Error(We)}})}loadTile(J){return o._(this,void 0,void 0,function*(){let oe=J.uid,ue=!!(J&&J.request&&J.request.collectResourceTiming)&&new o.cN(J.request),we=new c(J);this.loading[oe]=we;let Fe=new AbortController;we.abort=Fe;try{let We=yield this.loadVectorTile(J,Fe);if(delete this.loading[oe],!We)return null;let nt=We.rawData,Ye={};We.expires&&(Ye.expires=We.expires),We.cacheControl&&(Ye.cacheControl=We.cacheControl);let be={};if(ue){let Be=ue.finish();Be&&(be.resourceTiming=JSON.parse(JSON.stringify(Be)))}we.vectorTile=We.vectorTile;let Ee=we.parse(We.vectorTile,this.layerIndex,this.availableImages,this.actor,J.subdivisionGranularity);this.loaded[oe]=we,this.fetching[oe]={rawTileData:nt,cacheControl:Ye,resourceTiming:be};try{let Be=yield Ee;return o.e({rawTileData:nt.slice(0)},Be,Ye,be)}finally{delete this.fetching[oe]}}catch(We){throw delete this.loading[oe],we.status="done",this.loaded[oe]=we,We}})}reloadTile(J){return o._(this,void 0,void 0,function*(){let oe=J.uid;if(!this.loaded||!this.loaded[oe])throw new Error("Should not be trying to reload a tile that was never loaded or has been removed");let ue=this.loaded[oe];if(ue.showCollisionBoxes=J.showCollisionBoxes,ue.globalState=J.globalState,ue.status==="parsing"){let we=yield ue.parse(ue.vectorTile,this.layerIndex,this.availableImages,this.actor,J.subdivisionGranularity),Fe;if(this.fetching[oe]){let{rawTileData:We,cacheControl:nt,resourceTiming:Ye}=this.fetching[oe];delete this.fetching[oe],Fe=o.e({rawTileData:We.slice(0)},we,nt,Ye)}else Fe=we;return Fe}if(ue.status==="done"&&ue.vectorTile)return ue.parse(ue.vectorTile,this.layerIndex,this.availableImages,this.actor,J.subdivisionGranularity)})}abortTile(J){return o._(this,void 0,void 0,function*(){let oe=this.loading,ue=J.uid;oe&&oe[ue]&&oe[ue].abort&&(oe[ue].abort.abort(),delete oe[ue])})}removeTile(J){return o._(this,void 0,void 0,function*(){this.loaded&&this.loaded[J.uid]&&delete this.loaded[J.uid]})}}class y{constructor(){this.loaded={}}loadTile(J){return o._(this,void 0,void 0,function*(){let{uid:oe,encoding:ue,rawImageData:we,redFactor:Fe,greenFactor:We,blueFactor:nt,baseShift:Ye}=J,be=we.width+2,Ee=we.height+2,Be=o.b(we)?new o.R({width:be,height:Ee},yield o.cO(we,-1,-1,be,Ee)):we,gt=new o.cP(oe,Be,ue,Fe,We,nt,Ye);return this.loaded=this.loaded||{},this.loaded[oe]=gt,gt})}removeTile(J){let oe=this.loaded,ue=J.uid;oe&&oe[ue]&&delete oe[ue]}}var w,E,A=function(){if(E)return w;function xe(oe,ue){if(oe.length!==0){J(oe[0],ue);for(var we=1;we<oe.length;we++)J(oe[we],!ue)}}function J(oe,ue){for(var we=0,Fe=0,We=0,nt=oe.length,Ye=nt-1;We<nt;Ye=We++){var be=(oe[We][0]-oe[Ye][0])*(oe[Ye][1]+oe[We][1]),Ee=we+be;Fe+=Math.abs(we)>=Math.abs(be)?we-Ee+be:be-Ee+we,we=Ee}we+Fe>=0!=!!ue&&oe.reverse()}return E=1,w=function oe(ue,we){var Fe,We=ue&&ue.type;if(We==="FeatureCollection")for(Fe=0;Fe<ue.features.length;Fe++)oe(ue.features[Fe],we);else if(We==="GeometryCollection")for(Fe=0;Fe<ue.geometries.length;Fe++)oe(ue.geometries[Fe],we);else if(We==="Feature")oe(ue.geometry,we);else if(We==="Polygon")xe(ue.coordinates,we);else if(We==="MultiPolygon")for(Fe=0;Fe<ue.coordinates.length;Fe++)xe(ue.coordinates[Fe],we);return ue}}(),P=o.cQ(A);class j extends o.cS{constructor(J,oe){super(new o.cM,0,oe,[],[]),this.feature=J,this.type=J.type,this.properties=J.tags?J.tags:{},"id"in J&&(typeof J.id=="string"?this.id=parseInt(J.id,10):typeof J.id!="number"||isNaN(J.id)||(this.id=J.id))}loadGeometry(){let J=[],oe=this.feature.type===1?[this.feature.geometry]:this.feature.geometry;for(let ue of oe){let we=[];for(let Fe of ue)we.push(new o.P(Fe[0],Fe[1]));J.push(we)}return J}}class D extends o.cR{constructor(J,oe){super(new o.cM),this.layers={_geojsonTileLayer:this},this.name="_geojsonTileLayer",this.version=oe?oe.version:1,this.extent=oe?oe.extent:4096,this.length=J.length,this.features=J}feature(J){return new j(this.features[J],this.extent)}}function L(xe,J){J.writeVarintField(15,xe.version||1),J.writeStringField(1,xe.name||""),J.writeVarintField(5,xe.extent||4096);let oe={keys:[],values:[],keycache:{},valuecache:{}};for(let Fe=0;Fe<xe.length;Fe++)oe.feature=xe.feature(Fe),J.writeMessage(2,z,oe);let ue=oe.keys;for(let Fe of ue)J.writeStringField(3,Fe);let we=oe.values;for(let Fe of we)J.writeMessage(4,te,Fe)}function z(xe,J){if(!xe.feature)return;let oe=xe.feature;oe.id!==void 0&&J.writeVarintField(1,oe.id),J.writeMessage(2,B,xe),J.writeVarintField(3,oe.type),J.writeMessage(4,K,oe)}function B(xe,J){var oe;for(let ue in(oe=xe.feature)==null?void 0:oe.properties){let we=xe.feature.properties[ue],Fe=xe.keycache[ue];if(we===null)continue;Fe===void 0&&(xe.keys.push(ue),Fe=xe.keys.length-1,xe.keycache[ue]=Fe),J.writeVarint(Fe),typeof we!="string"&&typeof we!="boolean"&&typeof we!="number"&&(we=JSON.stringify(we));let We=typeof we+":"+we,nt=xe.valuecache[We];nt===void 0&&(xe.values.push(we),nt=xe.values.length-1,xe.valuecache[We]=nt),J.writeVarint(nt)}}function G(xe,J){return(J<<3)+(7&xe)}function Z(xe){return xe<<1^xe>>31}function K(xe,J){let oe=xe.loadGeometry(),ue=xe.type,we=0,Fe=0;for(let We of oe){let nt=1;ue===1&&(nt=We.length),J.writeVarint(G(1,nt));let Ye=ue===3?We.length-1:We.length;for(let be=0;be<Ye;be++){be===1&&ue!==1&&J.writeVarint(G(2,Ye-1));let Ee=We[be].x-we,Be=We[be].y-Fe;J.writeVarint(Z(Ee)),J.writeVarint(Z(Be)),we+=Ee,Fe+=Be}xe.type===3&&J.writeVarint(G(7,1))}}function te(xe,J){let oe=typeof xe;oe==="string"?J.writeStringField(1,xe):oe==="boolean"?J.writeBooleanField(7,xe):oe==="number"&&(xe%1!=0?J.writeDoubleField(3,xe):xe<0?J.writeSVarintField(6,xe):J.writeVarintField(5,xe))}let se={minZoom:0,maxZoom:16,minPoints:2,radius:40,extent:512,nodeSize:64,log:!1,generateId:!1,reduce:null,map:xe=>xe},le=Math.fround||(pe=new Float32Array(1),xe=>(pe[0]=+xe,pe[0]));var pe;class me{constructor(J){this.options=Object.assign(Object.create(se),J),this.trees=new Array(this.options.maxZoom+1),this.stride=this.options.reduce?7:6,this.clusterProps=[]}load(J){let{log:oe,minZoom:ue,maxZoom:we}=this.options;oe&&console.time("total time");let Fe=`prepare ${J.length} points`;oe&&console.time(Fe),this.points=J;let We=[];for(let Ye=0;Ye<J.length;Ye++){let be=J[Ye];if(!be.geometry)continue;let[Ee,Be]=be.geometry.coordinates,gt=le(Ce(Ee)),Ae=le(Ze(Be));We.push(gt,Ae,1/0,Ye,-1,1),this.options.reduce&&We.push(0)}let nt=this.trees[we+1]=this._createTree(We);oe&&console.timeEnd(Fe);for(let Ye=we;Ye>=ue;Ye--){let be=+Date.now();nt=this.trees[Ye]=this._createTree(this._cluster(nt,Ye)),oe&&console.log("z%d: %d clusters in %dms",Ye,nt.numItems,+Date.now()-be)}return oe&&console.timeEnd("total time"),this}getClusters(J,oe){let ue=((J[0]+180)%360+360)%360-180,we=Math.max(-90,Math.min(90,J[1])),Fe=J[2]===180?180:((J[2]+180)%360+360)%360-180,We=Math.max(-90,Math.min(90,J[3]));if(J[2]-J[0]>=360)ue=-180,Fe=180;else if(ue>Fe){let Be=this.getClusters([ue,we,180,We],oe),gt=this.getClusters([-180,we,Fe,We],oe);return Be.concat(gt)}let nt=this.trees[this._limitZoom(oe)],Ye=nt.range(Ce(ue),Ze(We),Ce(Fe),Ze(we)),be=nt.data,Ee=[];for(let Be of Ye){let gt=this.stride*Be;Ee.push(be[gt+5]>1?_e(be,gt,this.clusterProps):this.points[be[gt+3]])}return Ee}getChildren(J){let oe=this._getOriginId(J),ue=this._getOriginZoom(J),we="No cluster with the specified id.",Fe=this.trees[ue];if(!Fe)throw new Error(we);let We=Fe.data;if(oe*this.stride>=We.length)throw new Error(we);let nt=this.options.radius/(this.options.extent*Math.pow(2,ue-1)),Ye=Fe.within(We[oe*this.stride],We[oe*this.stride+1],nt),be=[];for(let Ee of Ye){let Be=Ee*this.stride;We[Be+4]===J&&be.push(We[Be+5]>1?_e(We,Be,this.clusterProps):this.points[We[Be+3]])}if(be.length===0)throw new Error(we);return be}getLeaves(J,oe,ue){let we=[];return this._appendLeaves(we,J,oe=oe||10,ue=ue||0,0),we}getTile(J,oe,ue){let we=this.trees[this._limitZoom(J)],Fe=Math.pow(2,J),{extent:We,radius:nt}=this.options,Ye=nt/We,be=(ue-Ye)/Fe,Ee=(ue+1+Ye)/Fe,Be={features:[]};return this._addTileFeatures(we.range((oe-Ye)/Fe,be,(oe+1+Ye)/Fe,Ee),we.data,oe,ue,Fe,Be),oe===0&&this._addTileFeatures(we.range(1-Ye/Fe,be,1,Ee),we.data,Fe,ue,Fe,Be),oe===Fe-1&&this._addTileFeatures(we.range(0,be,Ye/Fe,Ee),we.data,-1,ue,Fe,Be),Be.features.length?Be:null}getClusterExpansionZoom(J){let oe=this._getOriginZoom(J)-1;for(;oe<=this.options.maxZoom;){let ue=this.getChildren(J);if(oe++,ue.length!==1)break;J=ue[0].properties.cluster_id}return oe}_appendLeaves(J,oe,ue,we,Fe){let We=this.getChildren(oe);for(let nt of We){let Ye=nt.properties;if(Ye&&Ye.cluster?Fe+Ye.point_count<=we?Fe+=Ye.point_count:Fe=this._appendLeaves(J,Ye.cluster_id,ue,we,Fe):Fe<we?Fe++:J.push(nt),J.length===ue)break}return Fe}_createTree(J){let oe=new o.aI(J.length/this.stride|0,this.options.nodeSize,Float32Array);for(let ue=0;ue<J.length;ue+=this.stride)oe.add(J[ue],J[ue+1]);return oe.finish(),oe.data=J,oe}_addTileFeatures(J,oe,ue,we,Fe,We){for(let nt of J){let Ye=nt*this.stride,be=oe[Ye+5]>1,Ee,Be,gt;if(be)Ee=de(oe,Ye,this.clusterProps),Be=oe[Ye],gt=oe[Ye+1];else{let Oe=this.points[oe[Ye+3]];Ee=Oe.properties;let[xt,Bt]=Oe.geometry.coordinates;Be=Ce(xt),gt=Ze(Bt)}let Ae={type:1,geometry:[[Math.round(this.options.extent*(Be*Fe-ue)),Math.round(this.options.extent*(gt*Fe-we))]],tags:Ee},Pt;Pt=be||this.options.generateId?oe[Ye+3]:this.points[oe[Ye+3]].id,Pt!==void 0&&(Ae.id=Pt),We.features.push(Ae)}}_limitZoom(J){return Math.max(this.options.minZoom,Math.min(Math.floor(+J),this.options.maxZoom+1))}_cluster(J,oe){let{radius:ue,extent:we,reduce:Fe,minPoints:We}=this.options,nt=ue/(we*Math.pow(2,oe)),Ye=J.data,be=[],Ee=this.stride;for(let Be=0;Be<Ye.length;Be+=Ee){if(Ye[Be+2]<=oe)continue;Ye[Be+2]=oe;let gt=Ye[Be],Ae=Ye[Be+1],Pt=J.within(Ye[Be],Ye[Be+1],nt),Oe=Ye[Be+5],xt=Oe;for(let Bt of Pt){let Tr=Bt*Ee;Ye[Tr+2]>oe&&(xt+=Ye[Tr+5])}if(xt>Oe&&xt>=We){let Bt,Tr=gt*Oe,pn=Ae*Oe,wt=-1,an=(Be/Ee<<5)+(oe+1)+this.points.length;for(let Cr of Pt){let or=Cr*Ee;if(Ye[or+2]<=oe)continue;Ye[or+2]=oe;let Er=Ye[or+5];Tr+=Ye[or]*Er,pn+=Ye[or+1]*Er,Ye[or+4]=an,Fe&&(Bt||(Bt=this._map(Ye,Be,!0),wt=this.clusterProps.length,this.clusterProps.push(Bt)),Fe(Bt,this._map(Ye,or)))}Ye[Be+4]=an,be.push(Tr/xt,pn/xt,1/0,an,-1,xt),Fe&&be.push(wt)}else{for(let Bt=0;Bt<Ee;Bt++)be.push(Ye[Be+Bt]);if(xt>1)for(let Bt of Pt){let Tr=Bt*Ee;if(!(Ye[Tr+2]<=oe)){Ye[Tr+2]=oe;for(let pn=0;pn<Ee;pn++)be.push(Ye[Tr+pn])}}}}return be}_getOriginId(J){return J-this.points.length>>5}_getOriginZoom(J){return(J-this.points.length)%32}_map(J,oe,ue){if(J[oe+5]>1){let We=this.clusterProps[J[oe+6]];return ue?Object.assign({},We):We}let we=this.points[J[oe+3]].properties,Fe=this.options.map(we);return ue&&Fe===we?Object.assign({},Fe):Fe}}function _e(xe,J,oe){return{type:"Feature",id:xe[J+3],properties:de(xe,J,oe),geometry:{type:"Point",coordinates:[(ue=xe[J],360*(ue-.5)),rt(xe[J+1])]}};var ue}function de(xe,J,oe){let ue=xe[J+5],we=ue>=1e4?`${Math.round(ue/1e3)}k`:ue>=1e3?Math.round(ue/100)/10+"k":ue,Fe=xe[J+6],We=Fe===-1?{}:Object.assign({},oe[Fe]);return Object.assign(We,{cluster:!0,cluster_id:xe[J+3],point_count:ue,point_count_abbreviated:we})}function Ce(xe){return xe/360+.5}function Ze(xe){let J=Math.sin(xe*Math.PI/180),oe=.5-.25*Math.log((1+J)/(1-J))/Math.PI;return oe<0?0:oe>1?1:oe}function rt(xe){let J=(180-360*xe)*Math.PI/180;return 360*Math.atan(Math.exp(J))/Math.PI-90}function ct(xe,J,oe,ue){let we=ue,Fe=J+(oe-J>>1),We,nt=oe-J,Ye=xe[J],be=xe[J+1],Ee=xe[oe],Be=xe[oe+1];for(let gt=J+3;gt<oe;gt+=3){let Ae=qe(xe[gt],xe[gt+1],Ye,be,Ee,Be);if(Ae>we)We=gt,we=Ae;else if(Ae===we){let Pt=Math.abs(gt-Fe);Pt<nt&&(We=gt,nt=Pt)}}we>ue&&(We-J>3&&ct(xe,J,We,ue),xe[We+2]=we,oe-We>3&&ct(xe,We,oe,ue))}function qe(xe,J,oe,ue,we,Fe){let We=we-oe,nt=Fe-ue;if(We!==0||nt!==0){let Ye=((xe-oe)*We+(J-ue)*nt)/(We*We+nt*nt);Ye>1?(oe=we,ue=Fe):Ye>0&&(oe+=We*Ye,ue+=nt*Ye)}return We=xe-oe,nt=J-ue,We*We+nt*nt}function lt(xe,J,oe,ue){let we={id:xe==null?null:xe,type:J,geometry:oe,tags:ue,minX:1/0,minY:1/0,maxX:-1/0,maxY:-1/0};if(J==="Point"||J==="MultiPoint"||J==="LineString")_t(we,oe);else if(J==="Polygon")_t(we,oe[0]);else if(J==="MultiLineString")for(let Fe of oe)_t(we,Fe);else if(J==="MultiPolygon")for(let Fe of oe)_t(we,Fe[0]);return we}function _t(xe,J){for(let oe=0;oe<J.length;oe+=3)xe.minX=Math.min(xe.minX,J[oe]),xe.minY=Math.min(xe.minY,J[oe+1]),xe.maxX=Math.max(xe.maxX,J[oe]),xe.maxY=Math.max(xe.maxY,J[oe+1])}function Tt(xe,J,oe,ue){if(!J.geometry)return;let we=J.geometry.coordinates;if(we&&we.length===0)return;let Fe=J.geometry.type,We=Math.pow(oe.tolerance/((1<<oe.maxZoom)*oe.extent),2),nt=[],Ye=J.id;if(oe.promoteId?Ye=J.properties[oe.promoteId]:oe.generateId&&(Ye=ue||0),Fe==="Point")et(we,nt);else if(Fe==="MultiPoint")for(let be of we)et(be,nt);else if(Fe==="LineString")pt(we,nt,We,!1);else if(Fe==="MultiLineString"){if(oe.lineMetrics){for(let be of we)nt=[],pt(be,nt,We,!1),xe.push(lt(Ye,"LineString",nt,J.properties));return}ot(we,nt,We,!1)}else if(Fe==="Polygon")ot(we,nt,We,!0);else{if(Fe!=="MultiPolygon"){if(Fe==="GeometryCollection"){for(let be of J.geometry.geometries)Tt(xe,{id:Ye,geometry:be,properties:J.properties},oe,ue);return}throw new Error("Input data is not a valid GeoJSON object.")}for(let be of we){let Ee=[];ot(be,Ee,We,!0),nt.push(Ee)}}xe.push(lt(Ye,Fe,nt,J.properties))}function et(xe,J){J.push($e(xe[0]),De(xe[1]),0)}function pt(xe,J,oe,ue){let we,Fe,We=0;for(let Ye=0;Ye<xe.length;Ye++){let be=$e(xe[Ye][0]),Ee=De(xe[Ye][1]);J.push(be,Ee,0),Ye>0&&(We+=ue?(we*Ee-be*Fe)/2:Math.sqrt(Math.pow(be-we,2)+Math.pow(Ee-Fe,2))),we=be,Fe=Ee}let nt=J.length-3;J[2]=1,ct(J,0,nt,oe),J[nt+2]=1,J.size=Math.abs(We),J.start=0,J.end=J.size}function ot(xe,J,oe,ue){for(let we=0;we<xe.length;we++){let Fe=[];pt(xe[we],Fe,oe,ue),J.push(Fe)}}function $e(xe){return xe/360+.5}function De(xe){let J=Math.sin(xe*Math.PI/180),oe=.5-.25*Math.log((1+J)/(1-J))/Math.PI;return oe<0?0:oe>1?1:oe}function Ke(xe,J,oe,ue,we,Fe,We,nt){if(ue/=J,Fe>=(oe/=J)&&We<ue)return xe;if(We<oe||Fe>=ue)return null;let Ye=[];for(let be of xe){let Ee=be.geometry,Be=be.type,gt=we===0?be.minX:be.minY,Ae=we===0?be.maxX:be.maxY;if(gt>=oe&&Ae<ue){Ye.push(be);continue}if(Ae<oe||gt>=ue)continue;let Pt=[];if(Be==="Point"||Be==="MultiPoint")Ge(Ee,Pt,oe,ue,we);else if(Be==="LineString")ft(Ee,Pt,oe,ue,we,!1,nt.lineMetrics);else if(Be==="MultiLineString")Ot(Ee,Pt,oe,ue,we,!1);else if(Be==="Polygon")Ot(Ee,Pt,oe,ue,we,!0);else if(Be==="MultiPolygon")for(let Oe of Ee){let xt=[];Ot(Oe,xt,oe,ue,we,!0),xt.length&&Pt.push(xt)}if(Pt.length){if(nt.lineMetrics&&Be==="LineString"){for(let Oe of Pt)Ye.push(lt(be.id,Be,Oe,be.tags));continue}Be!=="LineString"&&Be!=="MultiLineString"||(Pt.length===1?(Be="LineString",Pt=Pt[0]):Be="MultiLineString"),Be!=="Point"&&Be!=="MultiPoint"||(Be=Pt.length===3?"Point":"MultiPoint"),Ye.push(lt(be.id,Be,Pt,be.tags))}}return Ye.length?Ye:null}function Ge(xe,J,oe,ue,we){for(let Fe=0;Fe<xe.length;Fe+=3){let We=xe[Fe+we];We>=oe&&We<=ue&&At(J,xe[Fe],xe[Fe+1],xe[Fe+2])}}function ft(xe,J,oe,ue,we,Fe,We){let nt=mt(xe),Ye=we===0?Mt:Yt,be,Ee,Be=xe.start;for(let xt=0;xt<xe.length-3;xt+=3){let Bt=xe[xt],Tr=xe[xt+1],pn=xe[xt+2],wt=xe[xt+3],an=xe[xt+4],Cr=we===0?Bt:Tr,or=we===0?wt:an,Er=!1;We&&(be=Math.sqrt(Math.pow(Bt-wt,2)+Math.pow(Tr-an,2))),Cr<oe?or>oe&&(Ee=Ye(nt,Bt,Tr,wt,an,oe),We&&(nt.start=Be+be*Ee)):Cr>ue?or<ue&&(Ee=Ye(nt,Bt,Tr,wt,an,ue),We&&(nt.start=Be+be*Ee)):At(nt,Bt,Tr,pn),or<oe&&Cr>=oe&&(Ee=Ye(nt,Bt,Tr,wt,an,oe),Er=!0),or>ue&&Cr<=ue&&(Ee=Ye(nt,Bt,Tr,wt,an,ue),Er=!0),!Fe&&Er&&(We&&(nt.end=Be+be*Ee),J.push(nt),nt=mt(xe)),We&&(Be+=be)}let gt=xe.length-3,Ae=xe[gt],Pt=xe[gt+1],Oe=we===0?Ae:Pt;Oe>=oe&&Oe<=ue&&At(nt,Ae,Pt,xe[gt+2]),gt=nt.length-3,Fe&&gt>=3&&(nt[gt]!==nt[0]||nt[gt+1]!==nt[1])&&At(nt,nt[0],nt[1],nt[2]),nt.length&&J.push(nt)}function mt(xe){let J=[];return J.size=xe.size,J.start=xe.start,J.end=xe.end,J}function Ot(xe,J,oe,ue,we,Fe){for(let We of xe)ft(We,J,oe,ue,we,Fe,!1)}function At(xe,J,oe,ue){xe.push(J,oe,ue)}function Mt(xe,J,oe,ue,we,Fe){let We=(Fe-J)/(ue-J);return At(xe,Fe,oe+(we-oe)*We,1),We}function Yt(xe,J,oe,ue,we,Fe){let We=(Fe-oe)/(we-oe);return At(xe,J+(ue-J)*We,Fe,1),We}function jt(xe,J){let oe=[];for(let ue=0;ue<xe.length;ue++){let we=xe[ue],Fe=we.type,We;if(Fe==="Point"||Fe==="MultiPoint"||Fe==="LineString")We=Ut(we.geometry,J);else if(Fe==="MultiLineString"||Fe==="Polygon"){We=[];for(let nt of we.geometry)We.push(Ut(nt,J))}else if(Fe==="MultiPolygon"){We=[];for(let nt of we.geometry){let Ye=[];for(let be of nt)Ye.push(Ut(be,J));We.push(Ye)}}oe.push(lt(we.id,Fe,We,we.tags))}return oe}function Ut(xe,J){let oe=[];oe.size=xe.size,xe.start!==void 0&&(oe.start=xe.start,oe.end=xe.end);for(let ue=0;ue<xe.length;ue+=3)oe.push(xe[ue]+J,xe[ue+1],xe[ue+2]);return oe}function ar(xe,J){if(xe.transformed)return xe;let oe=1<<xe.z,ue=xe.x,we=xe.y;for(let Fe of xe.features){let We=Fe.geometry,nt=Fe.type;if(Fe.geometry=[],nt===1)for(let Ye=0;Ye<We.length;Ye+=2)Fe.geometry.push(jr(We[Ye],We[Ye+1],J,oe,ue,we));else for(let Ye=0;Ye<We.length;Ye++){let be=[];for(let Ee=0;Ee<We[Ye].length;Ee+=2)be.push(jr(We[Ye][Ee],We[Ye][Ee+1],J,oe,ue,we));Fe.geometry.push(be)}}return xe.transformed=!0,xe}function jr(xe,J,oe,ue,we,Fe){return[Math.round(oe*(xe*ue-we)),Math.round(oe*(J*ue-Fe))]}function Or(xe,J,oe,ue,we){let Fe=J===we.maxZoom?0:we.tolerance/((1<<J)*we.extent),We={features:[],numPoints:0,numSimplified:0,numFeatures:xe.length,source:null,x:oe,y:ue,z:J,transformed:!1,minX:2,minY:1,maxX:-1,maxY:0};for(let nt of xe)br(We,nt,Fe,we);return We}function br(xe,J,oe,ue){let we=J.geometry,Fe=J.type,We=[];if(xe.minX=Math.min(xe.minX,J.minX),xe.minY=Math.min(xe.minY,J.minY),xe.maxX=Math.max(xe.maxX,J.maxX),xe.maxY=Math.max(xe.maxY,J.maxY),Fe==="Point"||Fe==="MultiPoint")for(let nt=0;nt<we.length;nt+=3)We.push(we[nt],we[nt+1]),xe.numPoints++,xe.numSimplified++;else if(Fe==="LineString")Pr(We,we,xe,oe,!1,!1);else if(Fe==="MultiLineString"||Fe==="Polygon")for(let nt=0;nt<we.length;nt++)Pr(We,we[nt],xe,oe,Fe==="Polygon",nt===0);else if(Fe==="MultiPolygon")for(let nt=0;nt<we.length;nt++){let Ye=we[nt];for(let be=0;be<Ye.length;be++)Pr(We,Ye[be],xe,oe,!0,be===0)}if(We.length){let nt=J.tags||null;if(Fe==="LineString"&&ue.lineMetrics){nt={};for(let be in J.tags)nt[be]=J.tags[be];nt.mapbox_clip_start=we.start/we.size,nt.mapbox_clip_end=we.end/we.size}let Ye={geometry:We,type:Fe==="Polygon"||Fe==="MultiPolygon"?3:Fe==="LineString"||Fe==="MultiLineString"?2:1,tags:nt};J.id!==null&&(Ye.id=J.id),xe.features.push(Ye)}}function Pr(xe,J,oe,ue,we,Fe){let We=ue*ue;if(ue>0&&J.size<(we?We:ue))return void(oe.numPoints+=J.length/3);let nt=[];for(let Ye=0;Ye<J.length;Ye+=3)(ue===0||J[Ye+2]>We)&&(oe.numSimplified++,nt.push(J[Ye],J[Ye+1])),oe.numPoints++;we&&function(Ye,be){let Ee=0;for(let Be=0,gt=Ye.length,Ae=gt-2;Be<gt;Ae=Be,Be+=2)Ee+=(Ye[Be]-Ye[Ae])*(Ye[Be+1]+Ye[Ae+1]);if(Ee>0===be)for(let Be=0,gt=Ye.length;Be<gt/2;Be+=2){let Ae=Ye[Be],Pt=Ye[Be+1];Ye[Be]=Ye[gt-2-Be],Ye[Be+1]=Ye[gt-1-Be],Ye[gt-2-Be]=Ae,Ye[gt-1-Be]=Pt}}(nt,Fe),xe.push(nt)}let Le={maxZoom:14,indexMaxZoom:5,indexMaxPoints:1e5,tolerance:3,extent:4096,buffer:64,lineMetrics:!1,promoteId:null,generateId:!1,debug:0};class Je{constructor(J,oe){let ue=(oe=this.options=function(Fe,We){for(let nt in We)Fe[nt]=We[nt];return Fe}(Object.create(Le),oe)).debug;if(ue&&console.time("preprocess data"),oe.maxZoom<0||oe.maxZoom>24)throw new Error("maxZoom should be in the 0-24 range");if(oe.promoteId&&oe.generateId)throw new Error("promoteId and generateId cannot be used together.");let we=function(Fe,We){let nt=[];if(Fe.type==="FeatureCollection")for(let Ye=0;Ye<Fe.features.length;Ye++)Tt(nt,Fe.features[Ye],We,Ye);else Tt(nt,Fe.type==="Feature"?Fe:{geometry:Fe},We);return nt}(J,oe);this.tiles={},this.tileCoords=[],ue&&(console.timeEnd("preprocess data"),console.log("index: maxZoom: %d, maxPoints: %d",oe.indexMaxZoom,oe.indexMaxPoints),console.time("generate tiles"),this.stats={},this.total=0),we=function(Fe,We){let nt=We.buffer/We.extent,Ye=Fe,be=Ke(Fe,1,-1-nt,nt,0,-1,2,We),Ee=Ke(Fe,1,1-nt,2+nt,0,-1,2,We);return(be||Ee)&&(Ye=Ke(Fe,1,-nt,1+nt,0,-1,2,We)||[],be&&(Ye=jt(be,1).concat(Ye)),Ee&&(Ye=Ye.concat(jt(Ee,-1)))),Ye}(we,oe),we.length&&this.splitTile(we,0,0,0),ue&&(we.length&&console.log("features: %d, points: %d",this.tiles[0].numFeatures,this.tiles[0].numPoints),console.timeEnd("generate tiles"),console.log("tiles generated:",this.total,JSON.stringify(this.stats)))}splitTile(J,oe,ue,we,Fe,We,nt){let Ye=[J,oe,ue,we],be=this.options,Ee=be.debug;for(;Ye.length;){we=Ye.pop(),ue=Ye.pop(),oe=Ye.pop(),J=Ye.pop();let Be=1<<oe,gt=tt(oe,ue,we),Ae=this.tiles[gt];if(!Ae&&(Ee>1&&console.time("creation"),Ae=this.tiles[gt]=Or(J,oe,ue,we,be),this.tileCoords.push({z:oe,x:ue,y:we}),Ee)){Ee>1&&(console.log("tile z%d-%d-%d (features: %d, points: %d, simplified: %d)",oe,ue,we,Ae.numFeatures,Ae.numPoints,Ae.numSimplified),console.timeEnd("creation"));let Er=`z${oe}`;this.stats[Er]=(this.stats[Er]||0)+1,this.total++}if(Ae.source=J,Fe==null){if(oe===be.indexMaxZoom||Ae.numPoints<=be.indexMaxPoints)continue}else{if(oe===be.maxZoom||oe===Fe)continue;if(Fe!=null){let Er=Fe-oe;if(ue!==We>>Er||we!==nt>>Er)continue}}if(Ae.source=null,J.length===0)continue;Ee>1&&console.time("clipping");let Pt=.5*be.buffer/be.extent,Oe=.5-Pt,xt=.5+Pt,Bt=1+Pt,Tr=null,pn=null,wt=null,an=null,Cr=Ke(J,Be,ue-Pt,ue+xt,0,Ae.minX,Ae.maxX,be),or=Ke(J,Be,ue+Oe,ue+Bt,0,Ae.minX,Ae.maxX,be);J=null,Cr&&(Tr=Ke(Cr,Be,we-Pt,we+xt,1,Ae.minY,Ae.maxY,be),pn=Ke(Cr,Be,we+Oe,we+Bt,1,Ae.minY,Ae.maxY,be),Cr=null),or&&(wt=Ke(or,Be,we-Pt,we+xt,1,Ae.minY,Ae.maxY,be),an=Ke(or,Be,we+Oe,we+Bt,1,Ae.minY,Ae.maxY,be),or=null),Ee>1&&console.timeEnd("clipping"),Ye.push(Tr||[],oe+1,2*ue,2*we),Ye.push(pn||[],oe+1,2*ue,2*we+1),Ye.push(wt||[],oe+1,2*ue+1,2*we),Ye.push(an||[],oe+1,2*ue+1,2*we+1)}}getTile(J,oe,ue){J=+J,oe=+oe,ue=+ue;let we=this.options,{extent:Fe,debug:We}=we;if(J<0||J>24)return null;let nt=1<<J,Ye=tt(J,oe=oe+nt&nt-1,ue);if(this.tiles[Ye])return ar(this.tiles[Ye],Fe);We>1&&console.log("drilling down to z%d-%d-%d",J,oe,ue);let be,Ee=J,Be=oe,gt=ue;for(;!be&&Ee>0;)Ee--,Be>>=1,gt>>=1,be=this.tiles[tt(Ee,Be,gt)];return be&&be.source?(We>1&&(console.log("found parent tile z%d-%d-%d",Ee,Be,gt),console.time("drilling down")),this.splitTile(be.source,Ee,Be,gt,J,oe,ue),We>1&&console.timeEnd("drilling down"),this.tiles[Ye]?ar(this.tiles[Ye],Fe):null):null}}function tt(xe,J,oe){return 32*((1<<xe)*oe+J)+xe}class Ft extends m{constructor(){super(...arguments),this._dataUpdateable=new Map}loadVectorTile(J,oe){return o._(this,void 0,void 0,function*(){let ue=J.tileID.canonical;if(!this._geoJSONIndex)throw new Error("Unable to parse the data into a cluster or geojson");let we=this._geoJSONIndex.getTile(ue.z,ue.x,ue.y);if(!we)return null;let Fe=new D(we.features,{version:2,extent:o.$}),We=function(nt){let Ye=new o.cM;return function(be,Ee){for(let Be in be.layers)Ee.writeMessage(3,L,be.layers[Be])}(nt,Ye),Ye.finish()}(Fe);return We.byteOffset===0&&We.byteLength===We.buffer.byteLength||(We=new Uint8Array(We)),{vectorTile:Fe,rawData:We.buffer}})}loadData(J){return o._(this,void 0,void 0,function*(){var oe;(oe=this._pendingRequest)===null||oe===void 0||oe.abort();let ue=!!(J&&J.request&&J.request.collectResourceTiming)&&new o.cN(J.request);this._pendingRequest=new AbortController;try{this._pendingData=this.loadAndProcessGeoJSON(J,this._pendingRequest);let we=yield this._pendingData;this._geoJSONIndex=J.cluster?new me(function({superclusterOptions:We,clusterProperties:nt}){if(!nt||!We)return We;let Ye={},be={},Ee={accumulated:null,zoom:0},Be={properties:null},gt=Object.keys(nt);for(let Ae of gt){let[Pt,Oe]=nt[Ae],xt=o.cT(Oe),Bt=o.cT(typeof Pt=="string"?[Pt,["accumulated"],["get",Ae]]:Pt);Ye[Ae]=xt.value,be[Ae]=Bt.value}return We.map=Ae=>{Be.properties=Ae;let Pt={};for(let Oe of gt)Pt[Oe]=Ye[Oe].evaluate(Ee,Be);return Pt},We.reduce=(Ae,Pt)=>{Be.properties=Pt;for(let Oe of gt)Ee.accumulated=Ae[Oe],Ae[Oe]=be[Oe].evaluate(Ee,Be)},We}(J)).load(we.features):function(We,nt){return new Je(We,nt)}(we,J.geojsonVtOptions),this.loaded={};let Fe={data:we};if(ue){let We=ue.finish();We&&(Fe.resourceTiming={},Fe.resourceTiming[J.source]=JSON.parse(JSON.stringify(We)))}return Fe}catch(we){if(delete this._pendingRequest,o.cy(we))return{abandoned:!0};throw we}})}getData(){return o._(this,void 0,void 0,function*(){return this._pendingData})}reloadTile(J){let oe=this.loaded;return oe&&oe[J.uid]?super.reloadTile(J):this.loadTile(J)}loadAndProcessGeoJSON(J,oe){return o._(this,void 0,void 0,function*(){let ue=yield this.loadGeoJSON(J,oe);if(delete this._pendingRequest,typeof ue!="object")throw new Error(`Input data given to '${J.source}' is not a valid GeoJSON object.`);if(P(ue,!0),J.filter){let we=o.cT(J.filter,{type:"boolean","property-type":"data-driven",overridable:!1,transition:!1});if(we.result==="error")throw new Error(we.value.map(We=>`${We.key}: ${We.message}`).join(", "));ue={type:"FeatureCollection",features:ue.features.filter(We=>we.value.evaluate({zoom:0},We))}}return ue})}loadGeoJSON(J,oe){return o._(this,void 0,void 0,function*(){let{promoteId:ue}=J;if(J.request){let we=yield o.j(J.request,oe);return this._dataUpdateable=o.cV(we.data,ue)?o.cU(we.data,ue):void 0,we.data}if(typeof J.data=="string")try{let we=JSON.parse(J.data);return this._dataUpdateable=o.cV(we,ue)?o.cU(we,ue):void 0,we}catch(we){throw new Error(`Input data given to '${J.source}' is not a valid GeoJSON object.`)}if(!J.dataDiff)throw new Error(`Input data given to '${J.source}' is not a valid GeoJSON object.`);if(!this._dataUpdateable)throw new Error(`Cannot update existing geojson data in ${J.source}`);return o.cW(this._dataUpdateable,J.dataDiff,ue),{type:"FeatureCollection",features:Array.from(this._dataUpdateable.values())}})}removeSource(J){return o._(this,void 0,void 0,function*(){this._pendingRequest&&this._pendingRequest.abort()})}getClusterExpansionZoom(J){return this._geoJSONIndex.getClusterExpansionZoom(J.clusterId)}getClusterChildren(J){return this._geoJSONIndex.getChildren(J.clusterId)}getClusterLeaves(J){return this._geoJSONIndex.getLeaves(J.clusterId,J.limit,J.offset)}}class $t{constructor(J){this.self=J,this.actor=new o.J(J),this.layerIndexes={},this.availableImages={},this.workerSources={},this.demWorkerSources={},this.externalWorkerSourceTypes={},this.self.registerWorkerSource=(oe,ue)=>{if(this.externalWorkerSourceTypes[oe])throw new Error(`Worker source with name "${oe}" already registered.`);this.externalWorkerSourceTypes[oe]=ue},this.self.addProtocol=o.cA,this.self.removeProtocol=o.cB,this.self.registerRTLTextPlugin=oe=>{o.cX.setMethods(oe)},this.actor.registerMessageHandler("LDT",(oe,ue)=>this._getDEMWorkerSource(oe,ue.source).loadTile(ue)),this.actor.registerMessageHandler("RDT",(oe,ue)=>o._(this,void 0,void 0,function*(){this._getDEMWorkerSource(oe,ue.source).removeTile(ue)})),this.actor.registerMessageHandler("GCEZ",(oe,ue)=>o._(this,void 0,void 0,function*(){return this._getWorkerSource(oe,ue.type,ue.source).getClusterExpansionZoom(ue)})),this.actor.registerMessageHandler("GCC",(oe,ue)=>o._(this,void 0,void 0,function*(){return this._getWorkerSource(oe,ue.type,ue.source).getClusterChildren(ue)})),this.actor.registerMessageHandler("GCL",(oe,ue)=>o._(this,void 0,void 0,function*(){return this._getWorkerSource(oe,ue.type,ue.source).getClusterLeaves(ue)})),this.actor.registerMessageHandler("LD",(oe,ue)=>this._getWorkerSource(oe,ue.type,ue.source).loadData(ue)),this.actor.registerMessageHandler("GD",(oe,ue)=>this._getWorkerSource(oe,ue.type,ue.source).getData()),this.actor.registerMessageHandler("LT",(oe,ue)=>this._getWorkerSource(oe,ue.type,ue.source).loadTile(ue)),this.actor.registerMessageHandler("RT",(oe,ue)=>this._getWorkerSource(oe,ue.type,ue.source).reloadTile(ue)),this.actor.registerMessageHandler("AT",(oe,ue)=>this._getWorkerSource(oe,ue.type,ue.source).abortTile(ue)),this.actor.registerMessageHandler("RMT",(oe,ue)=>this._getWorkerSource(oe,ue.type,ue.source).removeTile(ue)),this.actor.registerMessageHandler("RS",(oe,ue)=>o._(this,void 0,void 0,function*(){if(!this.workerSources[oe]||!this.workerSources[oe][ue.type]||!this.workerSources[oe][ue.type][ue.source])return;let we=this.workerSources[oe][ue.type][ue.source];delete this.workerSources[oe][ue.type][ue.source],we.removeSource!==void 0&&we.removeSource(ue)})),this.actor.registerMessageHandler("RM",oe=>o._(this,void 0,void 0,function*(){delete this.layerIndexes[oe],delete this.availableImages[oe],delete this.workerSources[oe],delete this.demWorkerSources[oe]})),this.actor.registerMessageHandler("SR",(oe,ue)=>o._(this,void 0,void 0,function*(){this.referrer=ue})),this.actor.registerMessageHandler("SRPS",(oe,ue)=>this._syncRTLPluginState(oe,ue)),this.actor.registerMessageHandler("IS",(oe,ue)=>o._(this,void 0,void 0,function*(){this.self.importScripts(ue)})),this.actor.registerMessageHandler("SI",(oe,ue)=>this._setImages(oe,ue)),this.actor.registerMessageHandler("UL",(oe,ue)=>o._(this,void 0,void 0,function*(){this._getLayerIndex(oe).update(ue.layers,ue.removedIds)})),this.actor.registerMessageHandler("SL",(oe,ue)=>o._(this,void 0,void 0,function*(){this._getLayerIndex(oe).replace(ue)}))}_setImages(J,oe){return o._(this,void 0,void 0,function*(){this.availableImages[J]=oe;for(let ue in this.workerSources[J]){let we=this.workerSources[J][ue];for(let Fe in we)we[Fe].availableImages=oe}})}_syncRTLPluginState(J,oe){return o._(this,void 0,void 0,function*(){return yield o.cX.syncState(oe,this.self.importScripts)})}_getAvailableImages(J){let oe=this.availableImages[J];return oe||(oe=[]),oe}_getLayerIndex(J){let oe=this.layerIndexes[J];return oe||(oe=this.layerIndexes[J]=new i),oe}_getWorkerSource(J,oe,ue){if(this.workerSources[J]||(this.workerSources[J]={}),this.workerSources[J][oe]||(this.workerSources[J][oe]={}),!this.workerSources[J][oe][ue]){let we={sendAsync:(Fe,We)=>(Fe.targetMapId=J,this.actor.sendAsync(Fe,We))};switch(oe){case"vector":this.workerSources[J][oe][ue]=new m(we,this._getLayerIndex(J),this._getAvailableImages(J));break;case"geojson":this.workerSources[J][oe][ue]=new Ft(we,this._getLayerIndex(J),this._getAvailableImages(J));break;default:this.workerSources[J][oe][ue]=new this.externalWorkerSourceTypes[oe](we,this._getLayerIndex(J),this._getAvailableImages(J))}}return this.workerSources[J][oe][ue]}_getDEMWorkerSource(J,oe){return this.demWorkerSources[J]||(this.demWorkerSources[J]={}),this.demWorkerSources[J][oe]||(this.demWorkerSources[J][oe]=new y),this.demWorkerSources[J][oe]}}return o.i(self)&&(self.worker=new $t(self)),$t}),r("index",["exports","./shared"],function(o,i){"use strict";var a="5.7.1";function c(){var S=new i.A(4);return i.A!=Float32Array&&(S[1]=0,S[2]=0),S[0]=1,S[3]=1,S}let h,m,y={now:typeof performance!="undefined"&&performance&&performance.now?performance.now.bind(performance):Date.now.bind(Date),frame(S,s,d){let v=requestAnimationFrame(T=>{x(),s(T)}),{unsubscribe:x}=i.s(S.signal,"abort",()=>{x(),cancelAnimationFrame(v),d(i.c())},!1)},frameAsync(S){return new Promise((s,d)=>{this.frame(S,s,d)})},getImageData(S,s=0){return this.getImageCanvasContext(S).getImageData(-s,-s,S.width+2*s,S.height+2*s)},getImageCanvasContext(S){let s=window.document.createElement("canvas"),d=s.getContext("2d",{willReadFrequently:!0});if(!d)throw new Error("failed to create canvas 2d context");return s.width=S.width,s.height=S.height,d.drawImage(S,0,0,S.width,S.height),d},resolveURL:S=>(h||(h=document.createElement("a")),h.href=S,h.href),hardwareConcurrency:typeof navigator!="undefined"&&navigator.hardwareConcurrency||4,get prefersReducedMotion(){return!!matchMedia&&(m==null&&(m=matchMedia("(prefers-reduced-motion: reduce)")),m.matches)}};class w{static testProp(s){if(!w.docStyle)return s[0];for(let d=0;d<s.length;d++)if(s[d]in w.docStyle)return s[d];return s[0]}static create(s,d,v){let x=window.document.createElement(s);return d!==void 0&&(x.className=d),v&&v.appendChild(x),x}static createNS(s,d){return window.document.createElementNS(s,d)}static disableDrag(){w.docStyle&&w.selectProp&&(w.userSelect=w.docStyle[w.selectProp],w.docStyle[w.selectProp]="none")}static enableDrag(){w.docStyle&&w.selectProp&&(w.docStyle[w.selectProp]=w.userSelect)}static setTransform(s,d){s.style[w.transformProp]=d}static addEventListener(s,d,v,x={}){s.addEventListener(d,v,"passive"in x?x:x.capture)}static removeEventListener(s,d,v,x={}){s.removeEventListener(d,v,"passive"in x?x:x.capture)}static suppressClickInternal(s){s.preventDefault(),s.stopPropagation(),window.removeEventListener("click",w.suppressClickInternal,!0)}static suppressClick(){window.addEventListener("click",w.suppressClickInternal,!0),window.setTimeout(()=>{window.removeEventListener("click",w.suppressClickInternal,!0)},0)}static getScale(s){let d=s.getBoundingClientRect();return{x:d.width/s.offsetWidth||1,y:d.height/s.offsetHeight||1,boundingClientRect:d}}static getPoint(s,d,v){let x=d.boundingClientRect;return new i.P((v.clientX-x.left)/d.x-s.clientLeft,(v.clientY-x.top)/d.y-s.clientTop)}static mousePos(s,d){let v=w.getScale(s);return w.getPoint(s,v,d)}static touchPos(s,d){let v=[],x=w.getScale(s);for(let T=0;T<d.length;T++)v.push(w.getPoint(s,x,d[T]));return v}static mouseButton(s){return s.button}static remove(s){s.parentNode&&s.parentNode.removeChild(s)}static sanitize(s){let d=new DOMParser().parseFromString(s,"text/html").body||document.createElement("body"),v=d.querySelectorAll("script");for(let x of v)x.remove();return w.clean(d),d.innerHTML}static isPossiblyDangerous(s,d){let v=d.replace(/\s+/g,"").toLowerCase();return!(!["src","href","xlink:href"].includes(s)||!v.includes("javascript:")&&!v.includes("data:"))||!!s.startsWith("on")||void 0}static clean(s){let d=s.children;for(let v of d)w.removeAttributes(v),w.clean(v)}static removeAttributes(s){for(let{name:d,value:v}of s.attributes)w.isPossiblyDangerous(d,v)&&s.removeAttribute(d)}}w.docStyle=typeof window!="undefined"&&window.document&&window.document.documentElement.style,w.selectProp=w.testProp(["userSelect","MozUserSelect","WebkitUserSelect","msUserSelect"]),w.transformProp=w.testProp(["transform","WebkitTransform"]);let E={supported:!1,testSupport:function(S){!j&&P&&(D?L(S):A=S)}},A,P,j=!1,D=!1;function L(S){let s=S.createTexture();S.bindTexture(S.TEXTURE_2D,s);try{if(S.texImage2D(S.TEXTURE_2D,0,S.RGBA,S.RGBA,S.UNSIGNED_BYTE,P),S.isContextLost())return;E.supported=!0}catch(d){}S.deleteTexture(s),j=!0}var z;typeof document!="undefined"&&(P=document.createElement("img"),P.onload=()=>{A&&L(A),A=null,D=!0},P.onerror=()=>{j=!0,A=null},P.src="data:image/webp;base64,UklGRh4AAABXRUJQVlA4TBEAAAAvAQAAAAfQ//73v/+BiOh/AAA="),function(S){let s,d,v,x;S.resetRequestQueue=()=>{s=[],d=0,v=0,x={}},S.addThrottleControl=q=>{let V=v++;return x[V]=q,V},S.removeThrottleControl=q=>{delete x[q],C()},S.getImage=(q,V,H=!0)=>new Promise((Y,W)=>{E.supported&&(q.headers||(q.headers={}),q.headers.accept="image/webp,*/*"),i.e(q,{type:"image"}),s.push({abortController:V,requestParameters:q,supportImageRefresh:H,state:"queued",onError:Q=>{W(Q)},onSuccess:Q=>{Y(Q)}}),C()});let T=q=>i._(this,void 0,void 0,function*(){q.state="running";let{requestParameters:V,supportImageRefresh:H,onError:Y,onSuccess:W,abortController:Q}=q,ie=H===!1&&!i.i(self)&&!i.g(V.url)&&(!V.headers||Object.keys(V.headers).reduce((ye,Ie)=>ye&&Ie==="accept",!0));d++;let ve=ie?R(V,Q):i.m(V,Q);try{let ye=yield ve;delete q.abortController,q.state="completed",ye.data instanceof HTMLImageElement||i.b(ye.data)?W(ye):ye.data&&W({data:yield(ge=ye.data,typeof createImageBitmap=="function"?i.f(ge):i.h(ge)),cacheControl:ye.cacheControl,expires:ye.expires})}catch(ye){delete q.abortController,Y(ye)}finally{d--,C()}var ge}),C=()=>{let q=(()=>{for(let V of Object.keys(x))if(x[V]())return!0;return!1})()?i.a.MAX_PARALLEL_IMAGE_REQUESTS_PER_FRAME:i.a.MAX_PARALLEL_IMAGE_REQUESTS;for(let V=d;V<q&&s.length>0;V++){let H=s.shift();H.abortController.signal.aborted?V--:T(H)}},R=(q,V)=>new Promise((H,Y)=>{let W=new Image,Q=q.url,ie=q.credentials;ie&&ie==="include"?W.crossOrigin="use-credentials":(ie&&ie==="same-origin"||!i.d(Q))&&(W.crossOrigin="anonymous"),V.signal.addEventListener("abort",()=>{W.src="",Y(i.c())}),W.fetchPriority="high",W.onload=()=>{W.onerror=W.onload=null,H({data:W})},W.onerror=()=>{W.onerror=W.onload=null,V.signal.aborted||Y(new Error("Could not load image. Please make sure to use a supported image type such as PNG or JPEG. Note that SVGs are not supported."))},W.src=Q})}(z||(z={})),z.resetRequestQueue();class B{constructor(s){this._transformRequestFn=s!=null?s:null}transformRequest(s,d){return this._transformRequestFn&&this._transformRequestFn(s,d)||{url:s}}setTransformRequest(s){this._transformRequestFn=s}}function G(S){let s=[];if(typeof S=="string")s.push({id:"default",url:S});else if(S&&S.length>0){let d=[];for(let{id:v,url:x}of S){let T=`${v}${x}`;d.indexOf(T)===-1&&(d.push(T),s.push({id:v,url:x}))}}return s}function Z(S,s,d){try{let v=new URL(S);return v.pathname+=`${s}${d}`,v.toString()}catch(v){throw new Error(`Invalid sprite URL "${S}", must be absolute. Modify style specification directly or use TransformStyleFunction to correct the issue dynamically`)}}function K(S){let{userImage:s}=S;return!!(s&&s.render&&s.render())&&(S.data.replace(new Uint8Array(s.data.buffer)),!0)}class te extends i.E{constructor(){super(),this.images={},this.updatedImages={},this.callbackDispatchedThisFrame={},this.loaded=!1,this.requestors=[],this.patterns={},this.atlasImage=new i.R({width:1,height:1}),this.dirty=!0}isLoaded(){return this.loaded}setLoaded(s){if(this.loaded!==s&&(this.loaded=s,s)){for(let{ids:d,promiseResolve:v}of this.requestors)v(this._getImagesForIds(d));this.requestors=[]}}getImage(s){let d=this.images[s];if(d&&!d.data&&d.spriteData){let v=d.spriteData;d.data=new i.R({width:v.width,height:v.height},v.context.getImageData(v.x,v.y,v.width,v.height).data),d.spriteData=null}return d}addImage(s,d){if(this.images[s])throw new Error(`Image id ${s} already exist, use updateImage instead`);this._validate(s,d)&&(this.images[s]=d)}_validate(s,d){let v=!0,x=d.data||d.spriteData;return this._validateStretch(d.stretchX,x&&x.width)||(this.fire(new i.k(new Error(`Image "${s}" has invalid "stretchX" value`))),v=!1),this._validateStretch(d.stretchY,x&&x.height)||(this.fire(new i.k(new Error(`Image "${s}" has invalid "stretchY" value`))),v=!1),this._validateContent(d.content,d)||(this.fire(new i.k(new Error(`Image "${s}" has invalid "content" value`))),v=!1),v}_validateStretch(s,d){if(!s)return!0;let v=0;for(let x of s){if(x[0]<v||x[1]<x[0]||d<x[1])return!1;v=x[1]}return!0}_validateContent(s,d){if(!s)return!0;if(s.length!==4)return!1;let v=d.spriteData,x=v&&v.width||d.data.width,T=v&&v.height||d.data.height;return!(s[0]<0||x<s[0]||s[1]<0||T<s[1]||s[2]<0||x<s[2]||s[3]<0||T<s[3]||s[2]<s[0]||s[3]<s[1])}updateImage(s,d,v=!0){let x=this.getImage(s);if(v&&(x.data.width!==d.data.width||x.data.height!==d.data.height))throw new Error(`size mismatch between old image (${x.data.width}x${x.data.height}) and new image (${d.data.width}x${d.data.height}).`);d.version=x.version+1,this.images[s]=d,this.updatedImages[s]=!0}removeImage(s){let d=this.images[s];delete this.images[s],delete this.patterns[s],d.userImage&&d.userImage.onRemove&&d.userImage.onRemove()}listImages(){return Object.keys(this.images)}getImages(s){return new Promise((d,v)=>{let x=!0;if(!this.isLoaded())for(let T of s)this.images[T]||(x=!1);this.isLoaded()||x?d(this._getImagesForIds(s)):this.requestors.push({ids:s,promiseResolve:d})})}_getImagesForIds(s){let d={};for(let v of s){let x=this.getImage(v);x||(this.fire(new i.l("styleimagemissing",{id:v})),x=this.getImage(v)),x?d[v]={data:x.data.clone(),pixelRatio:x.pixelRatio,sdf:x.sdf,version:x.version,stretchX:x.stretchX,stretchY:x.stretchY,content:x.content,textFitWidth:x.textFitWidth,textFitHeight:x.textFitHeight,hasRenderCallback:!!(x.userImage&&x.userImage.render)}:i.w(`Image "${v}" could not be loaded. Please make sure you have added the image with map.addImage() or a "sprite" property in your style. You can provide missing images by listening for the "styleimagemissing" map event.`)}return d}getPixelSize(){let{width:s,height:d}=this.atlasImage;return{width:s,height:d}}getPattern(s){let d=this.patterns[s],v=this.getImage(s);if(!v)return null;if(d&&d.position.version===v.version)return d.position;if(d)d.position.version=v.version;else{let x={w:v.data.width+2,h:v.data.height+2,x:0,y:0},T=new i.I(x,v);this.patterns[s]={bin:x,position:T}}return this._updatePatternAtlas(),this.patterns[s].position}bind(s){let d=s.gl;this.atlasTexture?this.dirty&&(this.atlasTexture.update(this.atlasImage),this.dirty=!1):this.atlasTexture=new i.T(s,this.atlasImage,d.RGBA),this.atlasTexture.bind(d.LINEAR,d.CLAMP_TO_EDGE)}_updatePatternAtlas(){let s=[];for(let T in this.patterns)s.push(this.patterns[T].bin);let{w:d,h:v}=i.p(s),x=this.atlasImage;x.resize({width:d||1,height:v||1});for(let T in this.patterns){let{bin:C}=this.patterns[T],R=C.x+1,q=C.y+1,V=this.getImage(T).data,H=V.width,Y=V.height;i.R.copy(V,x,{x:0,y:0},{x:R,y:q},{width:H,height:Y}),i.R.copy(V,x,{x:0,y:Y-1},{x:R,y:q-1},{width:H,height:1}),i.R.copy(V,x,{x:0,y:0},{x:R,y:q+Y},{width:H,height:1}),i.R.copy(V,x,{x:H-1,y:0},{x:R-1,y:q},{width:1,height:Y}),i.R.copy(V,x,{x:0,y:0},{x:R+H,y:q},{width:1,height:Y})}this.dirty=!0}beginFrame(){this.callbackDispatchedThisFrame={}}dispatchRenderCallbacks(s){for(let d of s){if(this.callbackDispatchedThisFrame[d])continue;this.callbackDispatchedThisFrame[d]=!0;let v=this.getImage(d);v||i.w(`Image with ID: "${d}" was not found`),K(v)&&this.updateImage(d,v)}}}let se=1e20;function le(S,s,d,v,x,T,C,R,q){for(let V=s;V<s+v;V++)pe(S,d*T+V,T,x,C,R,q);for(let V=d;V<d+x;V++)pe(S,V*T+s,1,v,C,R,q)}function pe(S,s,d,v,x,T,C){T[0]=0,C[0]=-se,C[1]=se,x[0]=S[s];for(let R=1,q=0,V=0;R<v;R++){x[R]=S[s+R*d];let H=R*R;do{let Y=T[q];V=(x[R]-x[Y]+H-Y*Y)/(R-Y)/2}while(V<=C[q]&&--q>-1);q++,T[q]=R,C[q]=V,C[q+1]=se}for(let R=0,q=0;R<v;R++){for(;C[q+1]<R;)q++;let V=T[q],H=R-V;S[s+R*d]=x[V]+H*H}}class me{constructor(s,d,v){this.requestManager=s,this.localIdeographFontFamily=d,this.entries={},this.lang=v}setURL(s){this.url=s}getGlyphs(s){return i._(this,void 0,void 0,function*(){let d=[];for(let T in s)for(let C of s[T])d.push(this._getAndCacheGlyphsPromise(T,C));let v=yield Promise.all(d),x={};for(let{stack:T,id:C,glyph:R}of v)x[T]||(x[T]={}),x[T][C]=R&&{id:R.id,bitmap:R.bitmap.clone(),metrics:R.metrics};return x})}_getAndCacheGlyphsPromise(s,d){return i._(this,void 0,void 0,function*(){let v=this.entries[s];v||(v=this.entries[s]={glyphs:{},requests:{},ranges:{}});let x=v.glyphs[d];if(x!==void 0)return{stack:s,id:d,glyph:x};if(x=this._tinySDF(v,s,d),x)return v.glyphs[d]=x,{stack:s,id:d,glyph:x};let T=Math.floor(d/256);if(256*T>65535)throw new Error("glyphs > 65535 not supported");if(v.ranges[T])return{stack:s,id:d,glyph:x};if(!this.url)throw new Error("glyphsUrl is not set");if(!v.requests[T]){let R=me.loadGlyphRange(s,T,this.url,this.requestManager);v.requests[T]=R}let C=yield v.requests[T];for(let R in C)this._doesCharSupportLocalGlyph(+R)||(v.glyphs[+R]=C[+R]);return v.ranges[T]=!0,{stack:s,id:d,glyph:C[d]||null}})}_doesCharSupportLocalGlyph(s){return!!this.localIdeographFontFamily&&(new RegExp("\\p{Ideo}|\\p{sc=Hang}|\\p{sc=Hira}|\\p{sc=Kana}","u").test(String.fromCodePoint(s))||i.u["CJK Unified Ideographs"](s)||i.u["Hangul Syllables"](s)||i.u.Hiragana(s)||i.u.Katakana(s)||i.u["CJK Symbols and Punctuation"](s)||i.u["Halfwidth and Fullwidth Forms"](s))}_tinySDF(s,d,v){let x=this.localIdeographFontFamily;if(!x||!this._doesCharSupportLocalGlyph(v))return;let T=s.tinySDF;if(!T){let R="400";/bold/i.test(d)?R="900":/medium/i.test(d)?R="500":/light/i.test(d)&&(R="200"),T=s.tinySDF=new me.TinySDF({fontSize:48,buffer:6,radius:16,cutoff:.25,lang:this.lang,fontFamily:x,fontWeight:R})}let C=T.draw(String.fromCharCode(v));return{id:v,bitmap:new i.q({width:C.width||60,height:C.height||60},C.data),metrics:{width:C.glyphWidth/2||24,height:C.glyphHeight/2||24,left:C.glyphLeft/2+.5||0,top:C.glyphTop/2-27.5||-8,advance:C.glyphAdvance/2||24,isDoubleResolution:!0}}}}me.loadGlyphRange=function(S,s,d,v){return i._(this,void 0,void 0,function*(){let x=256*s,T=x+255,C=v.transformRequest(d.replace("{fontstack}",S).replace("{range}",`${x}-${T}`),"Glyphs"),R=yield i.n(C,new AbortController);if(!R||!R.data)throw new Error(`Could not load glyph range. range: ${s}, ${x}-${T}`);let q={};for(let V of i.o(R.data))q[V.id]=V;return q})},me.TinySDF=class{constructor({fontSize:S=24,buffer:s=3,radius:d=8,cutoff:v=.25,fontFamily:x="sans-serif",fontWeight:T="normal",fontStyle:C="normal",lang:R=null}={}){this.buffer=s,this.cutoff=v,this.radius=d,this.lang=R;let q=this.size=S+4*s,V=this._createCanvas(q),H=this.ctx=V.getContext("2d",{willReadFrequently:!0});H.font=`${C} ${T} ${S}px ${x}`,H.textBaseline="alphabetic",H.textAlign="left",H.fillStyle="black",this.gridOuter=new Float64Array(q*q),this.gridInner=new Float64Array(q*q),this.f=new Float64Array(q),this.z=new Float64Array(q+1),this.v=new Uint16Array(q)}_createCanvas(S){let s=document.createElement("canvas");return s.width=s.height=S,s}draw(S){let{width:s,actualBoundingBoxAscent:d,actualBoundingBoxDescent:v,actualBoundingBoxLeft:x,actualBoundingBoxRight:T}=this.ctx.measureText(S),C=Math.ceil(d),R=Math.max(0,Math.min(this.size-this.buffer,Math.ceil(T-x))),q=Math.min(this.size-this.buffer,C+Math.ceil(v)),V=R+2*this.buffer,H=q+2*this.buffer,Y=Math.max(V*H,0),W=new Uint8ClampedArray(Y),Q={data:W,width:V,height:H,glyphWidth:R,glyphHeight:q,glyphTop:C,glyphLeft:0,glyphAdvance:s};if(R===0||q===0)return Q;let{ctx:ie,buffer:ve,gridInner:ge,gridOuter:ye}=this;this.lang&&(ie.lang=this.lang),ie.clearRect(ve,ve,R,q),ie.fillText(S,ve,ve+C);let Ie=ie.getImageData(ve,ve,R,q);ye.fill(se,0,Y),ge.fill(0,0,Y);for(let Re=0;Re<q;Re++)for(let Pe=0;Pe<R;Pe++){let ze=Ie.data[4*(Re*R+Pe)+3]/255;if(ze===0)continue;let He=(Re+ve)*V+Pe+ve;if(ze===1)ye[He]=0,ge[He]=se;else{let Ne=.5-ze;ye[He]=Ne>0?Ne*Ne:0,ge[He]=Ne<0?Ne*Ne:0}}le(ye,0,0,V,H,V,this.f,this.v,this.z),le(ge,ve,ve,R,q,V,this.f,this.v,this.z);for(let Re=0;Re<Y;Re++){let Pe=Math.sqrt(ye[Re])-Math.sqrt(ge[Re]);W[Re]=Math.round(255-255*(Pe/this.radius+this.cutoff))}return Q}};class _e{constructor(){this.specification=i.v.light.position}possiblyEvaluate(s,d){return i.B(s.expression.evaluate(d))}interpolate(s,d,v){return{x:i.C.number(s.x,d.x,v),y:i.C.number(s.y,d.y,v),z:i.C.number(s.z,d.z,v)}}}let de;class Ce extends i.E{constructor(s){super(),de=de||new i.r({anchor:new i.D(i.v.light.anchor),position:new _e,color:new i.D(i.v.light.color),intensity:new i.D(i.v.light.intensity)}),this._transitionable=new i.t(de),this.setLight(s),this._transitioning=this._transitionable.untransitioned()}getLight(){return this._transitionable.serialize()}setLight(s,d={}){if(!this._validate(i.x,s,d))for(let v in s){let x=s[v];v.endsWith("-transition")?this._transitionable.setTransition(v.slice(0,-11),x):this._transitionable.setValue(v,x)}}updateTransitions(s){this._transitioning=this._transitionable.transitioned(s,this._transitioning)}hasTransition(){return this._transitioning.hasTransition()}recalculate(s){this.properties=this._transitioning.possiblyEvaluate(s)}_validate(s,d,v){return(!v||v.validate!==!1)&&i.y(this,s.call(i.z,{value:d,style:{glyphs:!0,sprite:!0},styleSpec:i.v}))}}let Ze=new i.r({"sky-color":new i.D(i.v.sky["sky-color"]),"horizon-color":new i.D(i.v.sky["horizon-color"]),"fog-color":new i.D(i.v.sky["fog-color"]),"fog-ground-blend":new i.D(i.v.sky["fog-ground-blend"]),"horizon-fog-blend":new i.D(i.v.sky["horizon-fog-blend"]),"sky-horizon-blend":new i.D(i.v.sky["sky-horizon-blend"]),"atmosphere-blend":new i.D(i.v.sky["atmosphere-blend"])});class rt extends i.E{constructor(s){super(),this._transitionable=new i.t(Ze),this.setSky(s),this._transitioning=this._transitionable.untransitioned(),this.recalculate(new i.F(0))}setSky(s,d={}){if(!this._validate(i.G,s,d)){s||(s={"sky-color":"transparent","horizon-color":"transparent","fog-color":"transparent","fog-ground-blend":1,"atmosphere-blend":0});for(let v in s){let x=s[v];v.endsWith("-transition")?this._transitionable.setTransition(v.slice(0,-11),x):this._transitionable.setValue(v,x)}}}getSky(){return this._transitionable.serialize()}updateTransitions(s){this._transitioning=this._transitionable.transitioned(s,this._transitioning)}hasTransition(){return this._transitioning.hasTransition()}recalculate(s){this.properties=this._transitioning.possiblyEvaluate(s)}_validate(s,d,v={}){return(v==null?void 0:v.validate)!==!1&&i.y(this,s.call(i.z,i.e({value:d,style:{glyphs:!0,sprite:!0},styleSpec:i.v})))}calculateFogBlendOpacity(s){return s<60?0:s<70?(s-60)/10:1}}class ct{constructor(s,d){this.width=s,this.height=d,this.nextRow=0,this.data=new Uint8Array(this.width*this.height),this.dashEntry={}}getDash(s,d){let v=s.join(",")+String(d);return this.dashEntry[v]||(this.dashEntry[v]=this.addDash(s,d)),this.dashEntry[v]}getDashRanges(s,d,v){let x=[],T=s.length%2==1?-s[s.length-1]*v:0,C=s[0]*v,R=!0;x.push({left:T,right:C,isDash:R,zeroLength:s[0]===0});let q=s[0];for(let V=1;V<s.length;V++){R=!R;let H=s[V];T=q*v,q+=H,C=q*v,x.push({left:T,right:C,isDash:R,zeroLength:H===0})}return x}addRoundDash(s,d,v){let x=d/2;for(let T=-v;T<=v;T++){let C=this.width*(this.nextRow+v+T),R=0,q=s[R];for(let V=0;V<this.width;V++){V/q.right>1&&(q=s[++R]);let H=Math.abs(V-q.left),Y=Math.abs(V-q.right),W=Math.min(H,Y),Q,ie=T/v*(x+1);if(q.isDash){let ve=x-Math.abs(ie);Q=Math.sqrt(W*W+ve*ve)}else Q=x-Math.sqrt(W*W+ie*ie);this.data[C+V]=Math.max(0,Math.min(255,Q+128))}}}addRegularDash(s){for(let R=s.length-1;R>=0;--R){let q=s[R],V=s[R+1];q.zeroLength?s.splice(R,1):V&&V.isDash===q.isDash&&(V.left=q.left,s.splice(R,1))}let d=s[0],v=s[s.length-1];d.isDash===v.isDash&&(d.left=v.left-this.width,v.right=d.right+this.width);let x=this.width*this.nextRow,T=0,C=s[T];for(let R=0;R<this.width;R++){R/C.right>1&&(C=s[++T]);let q=Math.abs(R-C.left),V=Math.abs(R-C.right),H=Math.min(q,V);this.data[x+R]=Math.max(0,Math.min(255,(C.isDash?H:-H)+128))}}addDash(s,d){let v=d?7:0,x=2*v+1;if(this.nextRow+x>this.height)return i.w("LineAtlas out of space"),null;let T=0;for(let R=0;R<s.length;R++)T+=s[R];if(T!==0){let R=this.width/T,q=this.getDashRanges(s,this.width,R);d?this.addRoundDash(q,R,v):this.addRegularDash(q)}let C={y:(this.nextRow+v+.5)/this.height,height:2*v/this.height,width:T};return this.nextRow+=x,this.dirty=!0,C}bind(s){let d=s.gl;this.texture?(d.bindTexture(d.TEXTURE_2D,this.texture),this.dirty&&(this.dirty=!1,d.texSubImage2D(d.TEXTURE_2D,0,0,0,this.width,this.height,d.ALPHA,d.UNSIGNED_BYTE,this.data))):(this.texture=d.createTexture(),d.bindTexture(d.TEXTURE_2D,this.texture),d.texParameteri(d.TEXTURE_2D,d.TEXTURE_WRAP_S,d.REPEAT),d.texParameteri(d.TEXTURE_2D,d.TEXTURE_WRAP_T,d.REPEAT),d.texParameteri(d.TEXTURE_2D,d.TEXTURE_MIN_FILTER,d.LINEAR),d.texParameteri(d.TEXTURE_2D,d.TEXTURE_MAG_FILTER,d.LINEAR),d.texImage2D(d.TEXTURE_2D,0,d.ALPHA,this.width,this.height,0,d.ALPHA,d.UNSIGNED_BYTE,this.data))}}let qe="maplibre_preloaded_worker_pool";class lt{constructor(){this.active={}}acquire(s){if(!this.workers)for(this.workers=[];this.workers.length<lt.workerCount;)this.workers.push(new Worker(i.a.WORKER_URL));return this.active[s]=!0,this.workers.slice()}release(s){delete this.active[s],this.numActive()===0&&(this.workers.forEach(d=>{d.terminate()}),this.workers=null)}isPreloaded(){return!!this.active[qe]}numActive(){return Object.keys(this.active).length}}let _t=Math.floor(y.hardwareConcurrency/2),Tt,et;function pt(){return Tt||(Tt=new lt),Tt}lt.workerCount=i.H(globalThis)?Math.max(Math.min(_t,3),1):1;class ot{constructor(s,d){this.workerPool=s,this.actors=[],this.currentActor=0,this.id=d;let v=this.workerPool.acquire(d);for(let x=0;x<v.length;x++){let T=new i.J(v[x],d);T.name=`Worker ${x}`,this.actors.push(T)}if(!this.actors.length)throw new Error("No actors found")}broadcast(s,d){let v=[];for(let x of this.actors)v.push(x.sendAsync({type:s,data:d}));return Promise.all(v)}getActor(){return this.currentActor=(this.currentActor+1)%this.actors.length,this.actors[this.currentActor]}remove(s=!0){this.actors.forEach(d=>{d.remove()}),this.actors=[],s&&this.workerPool.release(this.id)}registerMessageHandler(s,d){for(let v of this.actors)v.registerMessageHandler(s,d)}}function $e(){return et||(et=new ot(pt(),i.K),et.registerMessageHandler("GR",(S,s,d)=>i.m(s,d))),et}function De(S,s){let d=i.L();return i.M(d,d,[1,1,0]),i.N(d,d,[.5*S.width,.5*S.height,1]),S.calculatePosMatrix?i.O(d,d,S.calculatePosMatrix(s.toUnwrapped())):d}function Ke(S,s,d,v,x,T,C){var R;let q=function(W,Q,ie){if(W)for(let ve of W){let ge=Q[ve];if(ge&&ge.source===ie&&ge.type==="fill-extrusion")return!0}else for(let ve in Q){let ge=Q[ve];if(ge.source===ie&&ge.type==="fill-extrusion")return!0}return!1}((R=x==null?void 0:x.layers)!==null&&R!==void 0?R:null,s,S.id),V=T.maxPitchScaleFactor(),H=S.tilesIn(v,V,q);H.sort(Ge);let Y=[];for(let W of H)Y.push({wrappedTileID:W.tileID.wrapped().key,queryResults:W.tile.queryRenderedFeatures(s,d,S._state,W.queryGeometry,W.cameraQueryGeometry,W.scale,x,T,V,De(S.transform,W.tileID),C?(Q,ie)=>C(W.tileID,Q,ie):void 0)});return function(W,Q){for(let ie in W)for(let ve of W[ie])ft(ve,Q);return W}(function(W){let Q={},ie={};for(let ve of W){let ge=ve.queryResults,ye=ve.wrappedTileID,Ie=ie[ye]=ie[ye]||{};for(let Re in ge){let Pe=ge[Re],ze=Ie[Re]=Ie[Re]||{},He=Q[Re]=Q[Re]||[];for(let Ne of Pe)ze[Ne.featureIndex]||(ze[Ne.featureIndex]=!0,He.push(Ne))}}return Q}(Y),S)}function Ge(S,s){let d=S.tileID,v=s.tileID;return d.overscaledZ-v.overscaledZ||d.canonical.y-v.canonical.y||d.wrap-v.wrap||d.canonical.x-v.canonical.x}function ft(S,s){let d=S.feature,v=s.getFeatureState(d.layer["source-layer"],d.id);d.source=d.layer.source,d.layer["source-layer"]&&(d.sourceLayer=d.layer["source-layer"]),d.state=v}function mt(S,s,d){return i._(this,void 0,void 0,function*(){let v=S;if(S.url?v=(yield i.j(s.transformRequest(S.url,"Source"),d)).data:yield y.frameAsync(d),!v)return null;let x=i.Q(i.e(v,S),["tiles","minzoom","maxzoom","attribution","bounds","scheme","tileSize","encoding"]);return"vector_layers"in v&&v.vector_layers&&(x.vectorLayerIds=v.vector_layers.map(T=>T.id)),x})}class Ot{constructor(s,d){s&&(d?this.setSouthWest(s).setNorthEast(d):Array.isArray(s)&&(s.length===4?this.setSouthWest([s[0],s[1]]).setNorthEast([s[2],s[3]]):this.setSouthWest(s[0]).setNorthEast(s[1])))}setNorthEast(s){return this._ne=s instanceof i.S?new i.S(s.lng,s.lat):i.S.convert(s),this}setSouthWest(s){return this._sw=s instanceof i.S?new i.S(s.lng,s.lat):i.S.convert(s),this}extend(s){let d=this._sw,v=this._ne,x,T;if(s instanceof i.S)x=s,T=s;else{if(!(s instanceof Ot))return Array.isArray(s)?s.length===4||s.every(Array.isArray)?this.extend(Ot.convert(s)):this.extend(i.S.convert(s)):s&&("lng"in s||"lon"in s)&&"lat"in s?this.extend(i.S.convert(s)):this;if(x=s._sw,T=s._ne,!x||!T)return this}return d||v?(d.lng=Math.min(x.lng,d.lng),d.lat=Math.min(x.lat,d.lat),v.lng=Math.max(T.lng,v.lng),v.lat=Math.max(T.lat,v.lat)):(this._sw=new i.S(x.lng,x.lat),this._ne=new i.S(T.lng,T.lat)),this}getCenter(){return new i.S((this._sw.lng+this._ne.lng)/2,(this._sw.lat+this._ne.lat)/2)}getSouthWest(){return this._sw}getNorthEast(){return this._ne}getNorthWest(){return new i.S(this.getWest(),this.getNorth())}getSouthEast(){return new i.S(this.getEast(),this.getSouth())}getWest(){return this._sw.lng}getSouth(){return this._sw.lat}getEast(){return this._ne.lng}getNorth(){return this._ne.lat}toArray(){return[this._sw.toArray(),this._ne.toArray()]}toString(){return`LngLatBounds(${this._sw.toString()}, ${this._ne.toString()})`}isEmpty(){return!(this._sw&&this._ne)}contains(s){let{lng:d,lat:v}=i.S.convert(s),x=this._sw.lng<=d&&d<=this._ne.lng;return this._sw.lng>this._ne.lng&&(x=this._sw.lng>=d&&d>=this._ne.lng),this._sw.lat<=v&&v<=this._ne.lat&&x}static convert(s){return s instanceof Ot?s:s&&new Ot(s)}static fromLngLat(s,d=0){let v=360*d/40075017,x=v/Math.cos(Math.PI/180*s.lat);return new Ot(new i.S(s.lng-x,s.lat-v),new i.S(s.lng+x,s.lat+v))}adjustAntiMeridian(){let s=new i.S(this._sw.lng,this._sw.lat),d=new i.S(this._ne.lng,this._ne.lat);return new Ot(s,s.lng>d.lng?new i.S(d.lng+360,d.lat):d)}}class At{constructor(s,d,v){this.bounds=Ot.convert(this.validateBounds(s)),this.minzoom=d||0,this.maxzoom=v||24}validateBounds(s){return Array.isArray(s)&&s.length===4?[Math.max(-180,s[0]),Math.max(-90,s[1]),Math.min(180,s[2]),Math.min(90,s[3])]:[-180,-90,180,90]}contains(s){let d=Math.pow(2,s.z),v=Math.floor(i.V(this.bounds.getWest())*d),x=Math.floor(i.U(this.bounds.getNorth())*d),T=Math.ceil(i.V(this.bounds.getEast())*d),C=Math.ceil(i.U(this.bounds.getSouth())*d);return s.x>=v&&s.x<T&&s.y>=x&&s.y<C}}class Mt extends i.E{constructor(s,d,v,x){if(super(),this.id=s,this.dispatcher=v,this.type="vector",this.minzoom=0,this.maxzoom=22,this.scheme="xyz",this.tileSize=512,this.reparseOverscaled=!0,this.isTileClipped=!0,this._loaded=!1,i.e(this,i.Q(d,["url","scheme","tileSize","promoteId"])),this._options=i.e({type:"vector"},d),this._collectResourceTiming=d.collectResourceTiming,this.tileSize!==512)throw new Error("vector tile sources must have a tileSize of 512");this.setEventedParent(x)}load(){return i._(this,void 0,void 0,function*(){this._loaded=!1,this.fire(new i.l("dataloading",{dataType:"source"})),this._tileJSONRequest=new AbortController;try{let s=yield mt(this._options,this.map._requestManager,this._tileJSONRequest);this._tileJSONRequest=null,this._loaded=!0,this.map.style.sourceCaches[this.id].clearTiles(),s&&(i.e(this,s),s.bounds&&(this.tileBounds=new At(s.bounds,this.minzoom,this.maxzoom)),this.fire(new i.l("data",{dataType:"source",sourceDataType:"metadata"})),this.fire(new i.l("data",{dataType:"source",sourceDataType:"content"})))}catch(s){this._tileJSONRequest=null,this.fire(new i.k(s))}})}loaded(){return this._loaded}hasTile(s){return!this.tileBounds||this.tileBounds.contains(s.canonical)}onAdd(s){this.map=s,this.load()}setSourceProperty(s){this._tileJSONRequest&&this._tileJSONRequest.abort(),s(),this.load()}setTiles(s){return this.setSourceProperty(()=>{this._options.tiles=s}),this}setUrl(s){return this.setSourceProperty(()=>{this.url=s,this._options.url=s}),this}onRemove(){this._tileJSONRequest&&(this._tileJSONRequest.abort(),this._tileJSONRequest=null)}serialize(){return i.e({},this._options)}loadTile(s){return i._(this,void 0,void 0,function*(){let d=s.tileID.canonical.url(this.tiles,this.map.getPixelRatio(),this.scheme),v={request:this.map._requestManager.transformRequest(d,"Tile"),uid:s.uid,tileID:s.tileID,zoom:s.tileID.overscaledZ,tileSize:this.tileSize*s.tileID.overscaleFactor(),type:this.type,source:this.id,pixelRatio:this.map.getPixelRatio(),showCollisionBoxes:this.map.showCollisionBoxes,promoteId:this.promoteId,subdivisionGranularity:this.map.style.projection.subdivisionGranularity,globalState:this.map.getGlobalState()};v.request.collectResourceTiming=this._collectResourceTiming;let x="RT";if(s.actor&&s.state!=="expired"){if(s.state==="loading")return new Promise((T,C)=>{s.reloadPromise={resolve:T,reject:C}})}else s.actor=this.dispatcher.getActor(),x="LT";s.abortController=new AbortController;try{let T=yield s.actor.sendAsync({type:x,data:v},s.abortController);if(delete s.abortController,s.aborted)return;this._afterTileLoadWorkerResponse(s,T)}catch(T){if(delete s.abortController,s.aborted)return;if(T&&T.status!==404)throw T;this._afterTileLoadWorkerResponse(s,null)}})}_afterTileLoadWorkerResponse(s,d){if(d&&d.resourceTiming&&(s.resourceTiming=d.resourceTiming),d&&this.map._refreshExpiredTiles&&s.setExpiryData(d),s.loadVectorData(d,this.map.painter),s.reloadPromise){let v=s.reloadPromise;s.reloadPromise=null,this.loadTile(s).then(v.resolve).catch(v.reject)}}abortTile(s){return i._(this,void 0,void 0,function*(){s.abortController&&(s.abortController.abort(),delete s.abortController),s.actor&&(yield s.actor.sendAsync({type:"AT",data:{uid:s.uid,type:this.type,source:this.id}}))})}unloadTile(s){return i._(this,void 0,void 0,function*(){s.unloadVectorData(),s.actor&&(yield s.actor.sendAsync({type:"RMT",data:{uid:s.uid,type:this.type,source:this.id}}))})}hasTransition(){return!1}}class Yt extends i.E{constructor(s,d,v,x){super(),this.id=s,this.dispatcher=v,this.setEventedParent(x),this.type="raster",this.minzoom=0,this.maxzoom=22,this.roundZoom=!0,this.scheme="xyz",this.tileSize=512,this._loaded=!1,this._options=i.e({type:"raster"},d),i.e(this,i.Q(d,["url","scheme","tileSize"]))}load(){return i._(this,arguments,void 0,function*(s=!1){this._loaded=!1,this.fire(new i.l("dataloading",{dataType:"source"})),this._tileJSONRequest=new AbortController;try{let d=yield mt(this._options,this.map._requestManager,this._tileJSONRequest);this._tileJSONRequest=null,this._loaded=!0,d&&(i.e(this,d),d.bounds&&(this.tileBounds=new At(d.bounds,this.minzoom,this.maxzoom)),this.fire(new i.l("data",{dataType:"source",sourceDataType:"metadata"})),this.fire(new i.l("data",{dataType:"source",sourceDataType:"content",sourceDataChanged:s})))}catch(d){this._tileJSONRequest=null,this.fire(new i.k(d))}})}loaded(){return this._loaded}onAdd(s){this.map=s,this.load()}onRemove(){this._tileJSONRequest&&(this._tileJSONRequest.abort(),this._tileJSONRequest=null)}setSourceProperty(s){this._tileJSONRequest&&(this._tileJSONRequest.abort(),this._tileJSONRequest=null),s(),this.load(!0)}setTiles(s){return this.setSourceProperty(()=>{this._options.tiles=s}),this}setUrl(s){return this.setSourceProperty(()=>{this.url=s,this._options.url=s}),this}serialize(){return i.e({},this._options)}hasTile(s){return!this.tileBounds||this.tileBounds.contains(s.canonical)}loadTile(s){return i._(this,void 0,void 0,function*(){let d=s.tileID.canonical.url(this.tiles,this.map.getPixelRatio(),this.scheme);s.abortController=new AbortController;try{let v=yield z.getImage(this.map._requestManager.transformRequest(d,"Tile"),s.abortController,this.map._refreshExpiredTiles);if(delete s.abortController,s.aborted)return void(s.state="unloaded");if(v&&v.data){this.map._refreshExpiredTiles&&(v.cacheControl||v.expires)&&s.setExpiryData({cacheControl:v.cacheControl,expires:v.expires});let x=this.map.painter.context,T=x.gl,C=v.data;s.texture=this.map.painter.getTileTexture(C.width),s.texture?s.texture.update(C,{useMipmap:!0}):(s.texture=new i.T(x,C,T.RGBA,{useMipmap:!0}),s.texture.bind(T.LINEAR,T.CLAMP_TO_EDGE,T.LINEAR_MIPMAP_NEAREST)),s.state="loaded"}}catch(v){if(delete s.abortController,s.aborted)s.state="unloaded";else if(v)throw s.state="errored",v}})}abortTile(s){return i._(this,void 0,void 0,function*(){s.abortController&&(s.abortController.abort(),delete s.abortController)})}unloadTile(s){return i._(this,void 0,void 0,function*(){s.texture&&this.map.painter.saveTileTexture(s.texture)})}hasTransition(){return!1}}class jt extends Yt{constructor(s,d,v,x){super(s,d,v,x),this.type="raster-dem",this.maxzoom=22,this._options=i.e({type:"raster-dem"},d),this.encoding=d.encoding||"mapbox",this.redFactor=d.redFactor,this.greenFactor=d.greenFactor,this.blueFactor=d.blueFactor,this.baseShift=d.baseShift}loadTile(s){return i._(this,void 0,void 0,function*(){let d=s.tileID.canonical.url(this.tiles,this.map.getPixelRatio(),this.scheme),v=this.map._requestManager.transformRequest(d,"Tile");s.neighboringTiles=this._getNeighboringTiles(s.tileID),s.abortController=new AbortController;try{let x=yield z.getImage(v,s.abortController,this.map._refreshExpiredTiles);if(delete s.abortController,s.aborted)return void(s.state="unloaded");if(x&&x.data){let T=x.data;this.map._refreshExpiredTiles&&(x.cacheControl||x.expires)&&s.setExpiryData({cacheControl:x.cacheControl,expires:x.expires});let C=i.b(T)&&i.W()?T:yield this.readImageNow(T),R={type:this.type,uid:s.uid,source:this.id,rawImageData:C,encoding:this.encoding,redFactor:this.redFactor,greenFactor:this.greenFactor,blueFactor:this.blueFactor,baseShift:this.baseShift};if(!s.actor||s.state==="expired"){s.actor=this.dispatcher.getActor();let q=yield s.actor.sendAsync({type:"LDT",data:R});s.dem=q,s.needsHillshadePrepare=!0,s.needsTerrainPrepare=!0,s.state="loaded"}}}catch(x){if(delete s.abortController,s.aborted)s.state="unloaded";else if(x)throw s.state="errored",x}})}readImageNow(s){return i._(this,void 0,void 0,function*(){if(typeof VideoFrame!="undefined"&&i.X()){let d=s.width+2,v=s.height+2;try{return new i.R({width:d,height:v},yield i.Y(s,-1,-1,d,v))}catch(x){}}return y.getImageData(s,1)})}_getNeighboringTiles(s){let d=s.canonical,v=Math.pow(2,d.z),x=(d.x-1+v)%v,T=d.x===0?s.wrap-1:s.wrap,C=(d.x+1+v)%v,R=d.x+1===v?s.wrap+1:s.wrap,q={};return q[new i.Z(s.overscaledZ,T,d.z,x,d.y).key]={backfilled:!1},q[new i.Z(s.overscaledZ,R,d.z,C,d.y).key]={backfilled:!1},d.y>0&&(q[new i.Z(s.overscaledZ,T,d.z,x,d.y-1).key]={backfilled:!1},q[new i.Z(s.overscaledZ,s.wrap,d.z,d.x,d.y-1).key]={backfilled:!1},q[new i.Z(s.overscaledZ,R,d.z,C,d.y-1).key]={backfilled:!1}),d.y+1<v&&(q[new i.Z(s.overscaledZ,T,d.z,x,d.y+1).key]={backfilled:!1},q[new i.Z(s.overscaledZ,s.wrap,d.z,d.x,d.y+1).key]={backfilled:!1},q[new i.Z(s.overscaledZ,R,d.z,C,d.y+1).key]={backfilled:!1}),q}unloadTile(s){return i._(this,void 0,void 0,function*(){s.demTexture&&this.map.painter.saveTileTexture(s.demTexture),s.fbo&&(s.fbo.destroy(),delete s.fbo),s.dem&&delete s.dem,delete s.neighboringTiles,s.state="unloaded",s.actor&&(yield s.actor.sendAsync({type:"RDT",data:{type:this.type,uid:s.uid,source:this.id}}))})}}class Ut extends i.E{constructor(s,d,v,x){super(),this.id=s,this.type="geojson",this.minzoom=0,this.maxzoom=18,this.tileSize=512,this.isTileClipped=!0,this.reparseOverscaled=!0,this._removed=!1,this._isUpdatingWorker=!1,this._pendingWorkerUpdate={data:d.data},this.actor=v.getActor(),this.setEventedParent(x),this._data=d.data,this._options=i.e({},d),this._collectResourceTiming=d.collectResourceTiming,d.maxzoom!==void 0&&(this.maxzoom=d.maxzoom),d.type&&(this.type=d.type),d.attribution&&(this.attribution=d.attribution),this.promoteId=d.promoteId,d.clusterMaxZoom!==void 0&&this.maxzoom<=d.clusterMaxZoom&&i.w(`The maxzoom value "${this.maxzoom}" is expected to be greater than the clusterMaxZoom value "${d.clusterMaxZoom}".`),this.workerOptions=i.e({source:this.id,cluster:d.cluster||!1,geojsonVtOptions:{buffer:this._pixelsToTileUnits(d.buffer!==void 0?d.buffer:128),tolerance:this._pixelsToTileUnits(d.tolerance!==void 0?d.tolerance:.375),extent:i.$,maxZoom:this.maxzoom,lineMetrics:d.lineMetrics||!1,generateId:d.generateId||!1},superclusterOptions:{maxZoom:this._getClusterMaxZoom(d.clusterMaxZoom),minPoints:Math.max(2,d.clusterMinPoints||2),extent:i.$,radius:this._pixelsToTileUnits(d.clusterRadius||50),log:!1,generateId:d.generateId||!1},clusterProperties:d.clusterProperties,filter:d.filter},d.workerOptions),typeof this.promoteId=="string"&&(this.workerOptions.promoteId=this.promoteId)}_pixelsToTileUnits(s){return s*(i.$/this.tileSize)}_getClusterMaxZoom(s){let d=s?Math.round(s):this.maxzoom-1;return Number.isInteger(s)||s===void 0||i.w(`Integer expected for option 'clusterMaxZoom': provided value "${s}" rounded to "${d}"`),d}load(){return i._(this,void 0,void 0,function*(){yield this._updateWorkerData()})}onAdd(s){this.map=s,this.load()}setData(s){return this._data=s,this._pendingWorkerUpdate={data:s},this._updateWorkerData(),this}updateData(s){return this._pendingWorkerUpdate.diff=i.a0(this._pendingWorkerUpdate.diff,s),this._updateWorkerData(),this}getData(){return i._(this,void 0,void 0,function*(){let s=i.e({type:this.type},this.workerOptions);return this.actor.sendAsync({type:"GD",data:s})})}getCoordinatesFromGeometry(s){return s.type==="GeometryCollection"?s.geometries.map(d=>d.coordinates).flat(1/0):s.coordinates.flat(1/0)}getBounds(){return i._(this,void 0,void 0,function*(){let s=new Ot,d=yield this.getData(),v;switch(d.type){case"FeatureCollection":v=d.features.map(x=>this.getCoordinatesFromGeometry(x.geometry)).flat(1/0);break;case"Feature":v=this.getCoordinatesFromGeometry(d.geometry);break;default:v=this.getCoordinatesFromGeometry(d)}if(v.length==0)return s;for(let x=0;x<v.length-1;x+=2)s.extend([v[x],v[x+1]]);return s})}setClusterOptions(s){return this.workerOptions.cluster=s.cluster,s&&(s.clusterRadius!==void 0&&(this.workerOptions.superclusterOptions.radius=this._pixelsToTileUnits(s.clusterRadius)),s.clusterMaxZoom!==void 0&&(this.workerOptions.superclusterOptions.maxZoom=this._getClusterMaxZoom(s.clusterMaxZoom))),this._updateWorkerData(),this}getClusterExpansionZoom(s){return this.actor.sendAsync({type:"GCEZ",data:{type:this.type,clusterId:s,source:this.id}})}getClusterChildren(s){return this.actor.sendAsync({type:"GCC",data:{type:this.type,clusterId:s,source:this.id}})}getClusterLeaves(s,d,v){return this.actor.sendAsync({type:"GCL",data:{type:this.type,source:this.id,clusterId:s,limit:d,offset:v}})}_updateWorkerData(){return i._(this,void 0,void 0,function*(){if(this._isUpdatingWorker)return;let{data:s,diff:d}=this._pendingWorkerUpdate;if(!s&&!d)return void i.w(`No data or diff provided to GeoJSONSource ${this.id}.`);let v=i.e({type:this.type},this.workerOptions);s?(typeof s=="string"?(v.request=this.map._requestManager.transformRequest(y.resolveURL(s),"Source"),v.request.collectResourceTiming=this._collectResourceTiming):v.data=JSON.stringify(s),this._pendingWorkerUpdate.data=void 0):d&&(v.dataDiff=d,this._pendingWorkerUpdate.diff=void 0),this._isUpdatingWorker=!0,this.fire(new i.l("dataloading",{dataType:"source"}));try{let x=yield this.actor.sendAsync({type:"LD",data:v});if(this._isUpdatingWorker=!1,this._removed||x.abandoned)return void this.fire(new i.l("dataabort",{dataType:"source"}));this._data=x.data;let T=null;x.resourceTiming&&x.resourceTiming[this.id]&&(T=x.resourceTiming[this.id].slice(0));let C={dataType:"source"};this._collectResourceTiming&&T&&T.length>0&&i.e(C,{resourceTiming:T}),this.fire(new i.l("data",Object.assign(Object.assign({},C),{sourceDataType:"metadata"}))),this.fire(new i.l("data",Object.assign(Object.assign({},C),{sourceDataType:"content"})))}catch(x){if(this._isUpdatingWorker=!1,this._removed)return void this.fire(new i.l("dataabort",{dataType:"source"}));this.fire(new i.k(x))}finally{(this._pendingWorkerUpdate.data||this._pendingWorkerUpdate.diff)&&this._updateWorkerData()}})}loaded(){return!this._isUpdatingWorker&&this._pendingWorkerUpdate.data===void 0&&this._pendingWorkerUpdate.diff===void 0}loadTile(s){return i._(this,void 0,void 0,function*(){let d=s.actor?"RT":"LT";s.actor=this.actor;let v={type:this.type,uid:s.uid,tileID:s.tileID,zoom:s.tileID.overscaledZ,maxZoom:this.maxzoom,tileSize:this.tileSize,source:this.id,pixelRatio:this.map.getPixelRatio(),showCollisionBoxes:this.map.showCollisionBoxes,promoteId:this.promoteId,subdivisionGranularity:this.map.style.projection.subdivisionGranularity,globalState:this.map.getGlobalState()};s.abortController=new AbortController;let x=yield this.actor.sendAsync({type:d,data:v},s.abortController);delete s.abortController,s.unloadVectorData(),s.aborted||s.loadVectorData(x,this.map.painter,d==="RT")})}abortTile(s){return i._(this,void 0,void 0,function*(){s.abortController&&(s.abortController.abort(),delete s.abortController),s.aborted=!0})}unloadTile(s){return i._(this,void 0,void 0,function*(){s.unloadVectorData(),yield this.actor.sendAsync({type:"RMT",data:{uid:s.uid,type:this.type,source:this.id}})})}onRemove(){this._removed=!0,this.actor.sendAsync({type:"RS",data:{type:this.type,source:this.id}})}serialize(){return i.e({},this._options,{type:this.type,data:this._data})}hasTransition(){return!1}}class ar extends i.E{constructor(s,d,v,x){super(),this.flippedWindingOrder=!1,this.id=s,this.dispatcher=v,this.coordinates=d.coordinates,this.type="image",this.minzoom=0,this.maxzoom=22,this.tileSize=512,this.tiles={},this._loaded=!1,this.setEventedParent(x),this.options=d}load(s){return i._(this,void 0,void 0,function*(){this._loaded=!1,this.fire(new i.l("dataloading",{dataType:"source"})),this.url=this.options.url,this._request=new AbortController;try{let d=yield z.getImage(this.map._requestManager.transformRequest(this.url,"Image"),this._request);this._request=null,this._loaded=!0,d&&d.data&&(this.image=d.data,s&&(this.coordinates=s),this._finishLoading())}catch(d){this._request=null,this._loaded=!0,this.fire(new i.k(d))}})}loaded(){return this._loaded}updateImage(s){return s.url?(this._request&&(this._request.abort(),this._request=null),this.options.url=s.url,this.load(s.coordinates).finally(()=>{this.texture=null}),this):this}_finishLoading(){this.map&&(this.setCoordinates(this.coordinates),this.fire(new i.l("data",{dataType:"source",sourceDataType:"metadata"})))}onAdd(s){this.map=s,this.load()}onRemove(){this._request&&(this._request.abort(),this._request=null)}setCoordinates(s){this.coordinates=s;let d=s.map(i.a1.fromLngLat);var v;return this.tileID=function(x){let T=i.a2.fromPoints(x),C=T.width(),R=T.height(),q=Math.max(C,R),V=Math.max(0,Math.floor(-Math.log(q)/Math.LN2)),H=Math.pow(2,V);return new i.a4(V,Math.floor((T.minX+T.maxX)/2*H),Math.floor((T.minY+T.maxY)/2*H))}(d),this.terrainTileRanges=this._getOverlappingTileRanges(d),this.minzoom=this.maxzoom=this.tileID.z,this.tileCoords=d.map(x=>this.tileID.getTilePoint(x)._round()),this.flippedWindingOrder=((v=this.tileCoords)[1].x-v[0].x)*(v[2].y-v[0].y)-(v[1].y-v[0].y)*(v[2].x-v[0].x)<0,this.fire(new i.l("data",{dataType:"source",sourceDataType:"content"})),this}prepare(){if(Object.keys(this.tiles).length===0||!this.image)return;let s=this.map.painter.context,d=s.gl;this.texture||(this.texture=new i.T(s,this.image,d.RGBA),this.texture.bind(d.LINEAR,d.CLAMP_TO_EDGE));let v=!1;for(let x in this.tiles){let T=this.tiles[x];T.state!=="loaded"&&(T.state="loaded",T.texture=this.texture,v=!0)}v&&this.fire(new i.l("data",{dataType:"source",sourceDataType:"idle",sourceId:this.id}))}loadTile(s){return i._(this,void 0,void 0,function*(){this.tileID&&this.tileID.equals(s.tileID.canonical)?(this.tiles[String(s.tileID.wrap)]=s,s.buckets={}):s.state="errored"})}serialize(){return{type:"image",url:this.options.url,coordinates:this.coordinates}}hasTransition(){return!1}_getOverlappingTileRanges(s){let{minX:d,minY:v,maxX:x,maxY:T}=i.a2.fromPoints(s),C={};for(let R=0;R<=i.a3;R++){let q=Math.pow(2,R),V=Math.floor(d*q),H=Math.floor(v*q),Y=Math.floor(x*q),W=Math.floor(T*q);C[R]={minTileX:V,minTileY:H,maxTileX:Y,maxTileY:W}}return C}}class jr extends ar{constructor(s,d,v,x){super(s,d,v,x),this.roundZoom=!0,this.type="video",this.options=d}load(){return i._(this,void 0,void 0,function*(){this._loaded=!1;let s=this.options;this.urls=[];for(let d of s.urls)this.urls.push(this.map._requestManager.transformRequest(d,"Source").url);try{let d=yield i.a5(this.urls);if(this._loaded=!0,!d)return;this.video=d,this.video.loop=!0,this.video.addEventListener("playing",()=>{this.map.triggerRepaint()}),this.map&&this.video.play(),this._finishLoading()}catch(d){this.fire(new i.k(d))}})}pause(){this.video&&this.video.pause()}play(){this.video&&this.video.play()}seek(s){if(this.video){let d=this.video.seekable;s<d.start(0)||s>d.end(0)?this.fire(new i.k(new i.a6(`sources.${this.id}`,null,`Playback for this video can be set only between the ${d.start(0)} and ${d.end(0)}-second mark.`))):this.video.currentTime=s}}getVideo(){return this.video}onAdd(s){this.map||(this.map=s,this.load(),this.video&&(this.video.play(),this.setCoordinates(this.coordinates)))}prepare(){if(Object.keys(this.tiles).length===0||this.video.readyState<2)return;let s=this.map.painter.context,d=s.gl;this.texture?this.video.paused||(this.texture.bind(d.LINEAR,d.CLAMP_TO_EDGE),d.texSubImage2D(d.TEXTURE_2D,0,0,0,d.RGBA,d.UNSIGNED_BYTE,this.video)):(this.texture=new i.T(s,this.video,d.RGBA),this.texture.bind(d.LINEAR,d.CLAMP_TO_EDGE));let v=!1;for(let x in this.tiles){let T=this.tiles[x];T.state!=="loaded"&&(T.state="loaded",T.texture=this.texture,v=!0)}v&&this.fire(new i.l("data",{dataType:"source",sourceDataType:"idle",sourceId:this.id}))}serialize(){return{type:"video",urls:this.urls,coordinates:this.coordinates}}hasTransition(){return this.video&&!this.video.paused}}class Or extends ar{constructor(s,d,v,x){super(s,d,v,x),d.coordinates?Array.isArray(d.coordinates)&&d.coordinates.length===4&&!d.coordinates.some(T=>!Array.isArray(T)||T.length!==2||T.some(C=>typeof C!="number"))||this.fire(new i.k(new i.a6(`sources.${s}`,null,"\"coordinates\" property must be an array of 4 longitude/latitude array pairs"))):this.fire(new i.k(new i.a6(`sources.${s}`,null,"missing required property \"coordinates\""))),d.animate&&typeof d.animate!="boolean"&&this.fire(new i.k(new i.a6(`sources.${s}`,null,"optional \"animate\" property must be a boolean value"))),d.canvas?typeof d.canvas=="string"||d.canvas instanceof HTMLCanvasElement||this.fire(new i.k(new i.a6(`sources.${s}`,null,"\"canvas\" must be either a string representing the ID of the canvas element from which to read, or an HTMLCanvasElement instance"))):this.fire(new i.k(new i.a6(`sources.${s}`,null,"missing required property \"canvas\""))),this.options=d,this.animate=d.animate===void 0||d.animate}load(){return i._(this,void 0,void 0,function*(){this._loaded=!0,this.canvas||(this.canvas=this.options.canvas instanceof HTMLCanvasElement?this.options.canvas:document.getElementById(this.options.canvas)),this.width=this.canvas.width,this.height=this.canvas.height,this._hasInvalidDimensions()?this.fire(new i.k(new Error("Canvas dimensions cannot be less than or equal to zero."))):(this.play=function(){this._playing=!0,this.map.triggerRepaint()},this.pause=function(){this._playing&&(this.prepare(),this._playing=!1)},this._finishLoading())})}getCanvas(){return this.canvas}onAdd(s){this.map=s,this.load(),this.canvas&&this.animate&&this.play()}onRemove(){this.pause()}prepare(){let s=!1;if(this.canvas.width!==this.width&&(this.width=this.canvas.width,s=!0),this.canvas.height!==this.height&&(this.height=this.canvas.height,s=!0),this._hasInvalidDimensions()||Object.keys(this.tiles).length===0)return;let d=this.map.painter.context,v=d.gl;this.texture?(s||this._playing)&&this.texture.update(this.canvas,{premultiply:!0}):this.texture=new i.T(d,this.canvas,v.RGBA,{premultiply:!0});let x=!1;for(let T in this.tiles){let C=this.tiles[T];C.state!=="loaded"&&(C.state="loaded",C.texture=this.texture,x=!0)}x&&this.fire(new i.l("data",{dataType:"source",sourceDataType:"idle",sourceId:this.id}))}serialize(){return{type:"canvas",coordinates:this.coordinates}}hasTransition(){return this._playing}_hasInvalidDimensions(){for(let s of[this.canvas.width,this.canvas.height])if(isNaN(s)||s<=0)return!0;return!1}}let br={},Pr=S=>{switch(S){case"geojson":return Ut;case"image":return ar;case"raster":return Yt;case"raster-dem":return jt;case"vector":return Mt;case"video":return jr;case"canvas":return Or}return br[S]},Le="RTLPluginLoaded";class Je extends i.E{constructor(){super(...arguments),this.status="unavailable",this.url=null,this.dispatcher=$e()}_syncState(s){return this.status=s,this.dispatcher.broadcast("SRPS",{pluginStatus:s,pluginURL:this.url}).catch(d=>{throw this.status="error",d})}getRTLTextPluginStatus(){return this.status}clearRTLTextPlugin(){this.status="unavailable",this.url=null}setRTLTextPlugin(s){return i._(this,arguments,void 0,function*(d,v=!1){if(this.url)throw new Error("setRTLTextPlugin cannot be called multiple times.");if(this.url=y.resolveURL(d),!this.url)throw new Error(`requested url ${d} is invalid`);if(this.status==="unavailable"){if(!v)return this._requestImport();this.status="deferred",this._syncState(this.status)}else if(this.status==="requested")return this._requestImport()})}_requestImport(){return i._(this,void 0,void 0,function*(){yield this._syncState("loading"),this.status="loaded",this.fire(new i.l(Le))})}lazyLoad(){this.status==="unavailable"?this.status="requested":this.status==="deferred"&&this._requestImport()}}let tt=null;function Ft(){return tt||(tt=new Je),tt}class $t{constructor(s,d){this.timeAdded=0,this.fadeEndTime=0,this.tileID=s,this.uid=i.a7(),this.uses=0,this.tileSize=d,this.buckets={},this.expirationTime=null,this.queryPadding=0,this.hasSymbolBuckets=!1,this.hasRTLText=!1,this.dependencies={},this.rtt=[],this.rttCoords={},this.expiredRequestCount=0,this.state="loading"}registerFadeDuration(s){let d=s+this.timeAdded;d<this.fadeEndTime||(this.fadeEndTime=d)}wasRequested(){return this.state==="errored"||this.state==="loaded"||this.state==="reloading"}clearTextures(s){this.demTexture&&s.saveTileTexture(this.demTexture),this.demTexture=null}loadVectorData(s,d,v){if(this.hasData()&&this.unloadVectorData(),this.state="loaded",s){s.featureIndex&&(this.latestFeatureIndex=s.featureIndex,s.rawTileData?(this.latestRawTileData=s.rawTileData,this.latestFeatureIndex.rawTileData=s.rawTileData):this.latestRawTileData&&(this.latestFeatureIndex.rawTileData=this.latestRawTileData)),this.collisionBoxArray=s.collisionBoxArray,this.buckets=function(x,T){let C={};if(!T)return C;for(let R of x){let q=R.layerIds.map(V=>T.getLayer(V)).filter(Boolean);if(q.length!==0){R.layers=q,R.stateDependentLayerIds&&(R.stateDependentLayers=R.stateDependentLayerIds.map(V=>q.filter(H=>H.id===V)[0]));for(let V of q)C[V.id]=R}}return C}(s.buckets,d==null?void 0:d.style),this.hasSymbolBuckets=!1;for(let x in this.buckets){let T=this.buckets[x];if(T instanceof i.a9){if(this.hasSymbolBuckets=!0,!v)break;T.justReloaded=!0}}if(this.hasRTLText=!1,this.hasSymbolBuckets)for(let x in this.buckets){let T=this.buckets[x];if(T instanceof i.a9&&T.hasRTLText){this.hasRTLText=!0,Ft().lazyLoad();break}}this.queryPadding=0;for(let x in this.buckets){let T=this.buckets[x];this.queryPadding=Math.max(this.queryPadding,d.style.getLayer(x).queryRadius(T))}s.imageAtlas&&(this.imageAtlas=s.imageAtlas),s.glyphAtlasImage&&(this.glyphAtlasImage=s.glyphAtlasImage)}else this.collisionBoxArray=new i.a8}unloadVectorData(){for(let s in this.buckets)this.buckets[s].destroy();this.buckets={},this.imageAtlasTexture&&this.imageAtlasTexture.destroy(),this.imageAtlas&&(this.imageAtlas=null),this.glyphAtlasTexture&&this.glyphAtlasTexture.destroy(),this.latestFeatureIndex=null,this.state="unloaded"}getBucket(s){return this.buckets[s.id]}upload(s){for(let v in this.buckets){let x=this.buckets[v];x.uploadPending()&&x.upload(s)}let d=s.gl;this.imageAtlas&&!this.imageAtlas.uploaded&&(this.imageAtlasTexture=new i.T(s,this.imageAtlas.image,d.RGBA),this.imageAtlas.uploaded=!0),this.glyphAtlasImage&&(this.glyphAtlasTexture=new i.T(s,this.glyphAtlasImage,d.ALPHA),this.glyphAtlasImage=null)}prepare(s){this.imageAtlas&&this.imageAtlas.patchUpdatedImages(s,this.imageAtlasTexture)}queryRenderedFeatures(s,d,v,x,T,C,R,q,V,H,Y){return this.latestFeatureIndex&&this.latestFeatureIndex.rawTileData?this.latestFeatureIndex.query({queryGeometry:x,cameraQueryGeometry:T,scale:C,tileSize:this.tileSize,pixelPosMatrix:H,transform:q,params:R,queryPadding:this.queryPadding*V,getElevation:Y},s,d,v):{}}querySourceFeatures(s,d){let v=this.latestFeatureIndex;if(!v||!v.rawTileData)return;let x=v.loadVTLayers(),T=d&&d.sourceLayer?d.sourceLayer:"",C=x._geojsonTileLayer||x[T];if(!C)return;let R=i.aa(d&&d.filter),{z:q,x:V,y:H}=this.tileID.canonical,Y={z:q,x:V,y:H};for(let W=0;W<C.length;W++){let Q=C.feature(W);if(R.needGeometry){let ge=i.ab(Q,!0);if(!R.filter(new i.F(this.tileID.overscaledZ),ge,this.tileID.canonical))continue}else if(!R.filter(new i.F(this.tileID.overscaledZ),Q))continue;let ie=v.getId(Q,T),ve=new i.ac(Q,q,V,H,ie);ve.tile=Y,s.push(ve)}}hasData(){return this.state==="loaded"||this.state==="reloading"||this.state==="expired"}patternsLoaded(){return this.imageAtlas&&!!Object.keys(this.imageAtlas.patternPositions).length}setExpiryData(s){let d=this.expirationTime;if(s.cacheControl){let v=i.ad(s.cacheControl);v["max-age"]&&(this.expirationTime=Date.now()+1e3*v["max-age"])}else s.expires&&(this.expirationTime=new Date(s.expires).getTime());if(this.expirationTime){let v=Date.now(),x=!1;if(this.expirationTime>v)x=!1;else if(d){if(this.expirationTime<d)x=!0;else{let T=this.expirationTime-d;T?this.expirationTime=v+Math.max(T,3e4):x=!0}}else x=!0;x?(this.expiredRequestCount++,this.state="expired"):this.expiredRequestCount=0}}getExpiryTimeout(){if(this.expirationTime)return this.expiredRequestCount?1e3*(1<<Math.min(this.expiredRequestCount-1,31)):Math.min(this.expirationTime-new Date().getTime(),Math.pow(2,31)-1)}setFeatureState(s,d){if(!this.latestFeatureIndex||!this.latestFeatureIndex.rawTileData||Object.keys(s).length===0)return;let v=this.latestFeatureIndex.loadVTLayers();for(let x in this.buckets){if(!d.style.hasLayer(x))continue;let T=this.buckets[x],C=T.layers[0].sourceLayer||"_geojsonTileLayer",R=v[C],q=s[C];if(!R||!q||Object.keys(q).length===0)continue;T.update(q,R,this.imageAtlas&&this.imageAtlas.patternPositions||{});let V=d&&d.style&&d.style.getLayer(x);V&&(this.queryPadding=Math.max(this.queryPadding,V.queryRadius(T)))}}holdingForFade(){return this.symbolFadeHoldUntil!==void 0}symbolFadeFinished(){return!this.symbolFadeHoldUntil||this.symbolFadeHoldUntil<y.now()}clearFadeHold(){this.symbolFadeHoldUntil=void 0}setHoldDuration(s){this.symbolFadeHoldUntil=y.now()+s}setDependencies(s,d){let v={};for(let x of d)v[x]=!0;this.dependencies[s]=v}hasDependency(s,d){for(let v of s){let x=this.dependencies[v];if(x){for(let T of d)if(x[T])return!0}}return!1}}class xe{constructor(s,d){this.max=s,this.onRemove=d,this.reset()}reset(){for(let s in this.data)for(let d of this.data[s])d.timeout&&clearTimeout(d.timeout),this.onRemove(d.value);return this.data={},this.order=[],this}add(s,d,v){let x=s.wrapped().key;this.data[x]===void 0&&(this.data[x]=[]);let T={value:d,timeout:void 0};if(v!==void 0&&(T.timeout=setTimeout(()=>{this.remove(s,T)},v)),this.data[x].push(T),this.order.push(x),this.order.length>this.max){let C=this._getAndRemoveByKey(this.order[0]);C&&this.onRemove(C)}return this}has(s){return s.wrapped().key in this.data}getAndRemove(s){return this.has(s)?this._getAndRemoveByKey(s.wrapped().key):null}_getAndRemoveByKey(s){let d=this.data[s].shift();return d.timeout&&clearTimeout(d.timeout),this.data[s].length===0&&delete this.data[s],this.order.splice(this.order.indexOf(s),1),d.value}getByKey(s){let d=this.data[s];return d?d[0].value:null}get(s){return this.has(s)?this.data[s.wrapped().key][0].value:null}remove(s,d){if(!this.has(s))return this;let v=s.wrapped().key,x=d===void 0?0:this.data[v].indexOf(d),T=this.data[v][x];return this.data[v].splice(x,1),T.timeout&&clearTimeout(T.timeout),this.data[v].length===0&&delete this.data[v],this.onRemove(T.value),this.order.splice(this.order.indexOf(v),1),this}setMaxSize(s){for(this.max=s;this.order.length>this.max;){let d=this._getAndRemoveByKey(this.order[0]);d&&this.onRemove(d)}return this}filter(s){let d=[];for(let v in this.data)for(let x of this.data[v])s(x.value)||d.push(x);for(let v of d)this.remove(v.value.tileID,v)}}class J{constructor(){this.state={},this.stateChanges={},this.deletedStates={}}updateState(s,d,v){let x=String(d);if(this.stateChanges[s]=this.stateChanges[s]||{},this.stateChanges[s][x]=this.stateChanges[s][x]||{},i.e(this.stateChanges[s][x],v),this.deletedStates[s]===null){this.deletedStates[s]={};for(let T in this.state[s])T!==x&&(this.deletedStates[s][T]=null)}else if(this.deletedStates[s]&&this.deletedStates[s][x]===null){this.deletedStates[s][x]={};for(let T in this.state[s][x])v[T]||(this.deletedStates[s][x][T]=null)}else for(let T in v)this.deletedStates[s]&&this.deletedStates[s][x]&&this.deletedStates[s][x][T]===null&&delete this.deletedStates[s][x][T]}removeFeatureState(s,d,v){if(this.deletedStates[s]===null)return;let x=String(d);if(this.deletedStates[s]=this.deletedStates[s]||{},v&&d!==void 0)this.deletedStates[s][x]!==null&&(this.deletedStates[s][x]=this.deletedStates[s][x]||{},this.deletedStates[s][x][v]=null);else if(d!==void 0){if(this.stateChanges[s]&&this.stateChanges[s][x])for(v in this.deletedStates[s][x]={},this.stateChanges[s][x])this.deletedStates[s][x][v]=null;else this.deletedStates[s][x]=null;}else this.deletedStates[s]=null}getState(s,d){let v=String(d),x=i.e({},(this.state[s]||{})[v],(this.stateChanges[s]||{})[v]);if(this.deletedStates[s]===null)return{};if(this.deletedStates[s]){let T=this.deletedStates[s][d];if(T===null)return{};for(let C in T)delete x[C]}return x}initializeTileState(s,d){s.setFeatureState(this.state,d)}coalesceChanges(s,d){let v={};for(let x in this.stateChanges){this.state[x]=this.state[x]||{};let T={};for(let C in this.stateChanges[x])this.state[x][C]||(this.state[x][C]={}),i.e(this.state[x][C],this.stateChanges[x][C]),T[C]=this.state[x][C];v[x]=T}for(let x in this.deletedStates){this.state[x]=this.state[x]||{};let T={};if(this.deletedStates[x]===null)for(let C in this.state[x])T[C]={},this.state[x][C]={};else for(let C in this.deletedStates[x]){if(this.deletedStates[x][C]===null)this.state[x][C]={};else for(let R of Object.keys(this.deletedStates[x][C]))delete this.state[x][C][R];T[C]=this.state[x][C]}v[x]=v[x]||{},i.e(v[x],T)}if(this.stateChanges={},this.deletedStates={},Object.keys(v).length!==0)for(let x in s)s[x].setFeatureState(v,d)}}let oe=89.25;function ue(S,s){let d=i.ah(s.lat,-i.ai,i.ai);return new i.P(i.V(s.lng)*S,i.U(d)*S)}function we(S,s){return new i.a1(s.x/S,s.y/S).toLngLat()}function Fe(S){return S.cameraToCenterDistance*Math.min(.85*Math.tan(i.ae(90-S.pitch)),Math.tan(i.ae(oe-S.pitch)))}function We(S,s){let d=S.canonical,v=s/i.af(d.z),x=d.x+Math.pow(2,d.z)*S.wrap,T=i.ag(new Float64Array(16));return i.M(T,T,[x*v,d.y*v,0]),i.N(T,T,[v/i.$,v/i.$,1]),T}function nt(S,s,d,v,x){let T=i.a1.fromLngLat(S,s),C=x*i.aj(1,S.lat),R=C*Math.cos(i.ae(d)),q=Math.sqrt(C*C-R*R),V=q*Math.sin(i.ae(-v)),H=q*Math.cos(i.ae(-v));return new i.a1(T.x+V,T.y+H,T.z+R)}function Ye(S,s,d){let v=s.intersectsFrustum(S);if(!d||v===0)return v;let x=s.intersectsPlane(d);return x===0?0:v===2&&x===2?2:1}function be(S,s,d){let v=0,x=(d-s)/10;for(let T=0;T<10;T++)v+=x*Math.pow(Math.cos(s+(T+.5)/10*(d-s)),S);return v}function Ee(S,s){return function(d,v,x,T,C){let R=2*((S-1)/i.ak(Math.cos(i.ae(oe-C))/Math.cos(i.ae(oe)))-1),q=Math.acos(x/T),V=2*be(R-1,0,i.ae(C/2)),H=Math.min(i.ae(oe),q+i.ae(C/2)),Y=be(R-1,Math.min(H,q-i.ae(C/2)),H),W=Math.atan(v/x),Q=Math.hypot(v,x),ie=d;return ie+=i.ak(T/Q/Math.max(.5,Math.cos(i.ae(C/2)))),ie+=R*i.ak(Math.cos(W))/2,ie-=i.ak(Math.max(1,Y/V/s))/2,ie}}let Be=Ee(9.314,3);function gt(S,s){let d=(s.roundZoom?Math.round:Math.floor)(S.zoom+i.ak(S.tileSize/s.tileSize));return Math.max(0,d)}function Ae(S,s){let d=S.getCameraFrustum(),v=S.getClippingPlane(),x=S.screenPointToMercatorCoordinate(S.getCameraPoint()),T=i.a1.fromLngLat(S.center,S.elevation);x.z=T.z+Math.cos(S.pitchInRadians)*S.cameraToCenterDistance/S.worldSize;let C=S.getCoveringTilesDetailsProvider(),R=C.allowVariableZoom(S,s),q=gt(S,s),V=s.minzoom||0,H=s.maxzoom!==void 0?s.maxzoom:S.maxZoom,Y=Math.min(Math.max(0,q),H),W=Math.pow(2,Y),Q=[W*x.x,W*x.y,0],ie=[W*T.x,W*T.y,0],ve=Math.hypot(T.x-x.x,T.y-x.y),ge=Math.abs(T.z-x.z),ye=Math.hypot(ve,ge),Ie=ze=>({zoom:0,x:0,y:0,wrap:ze,fullyVisible:!1}),Re=[],Pe=[];if(S.renderWorldCopies&&C.allowWorldCopies())for(let ze=1;ze<=3;ze++)Re.push(Ie(-ze)),Re.push(Ie(ze));for(Re.push(Ie(0));Re.length>0;){let ze=Re.pop(),He=ze.x,Ne=ze.y,Qe=ze.fullyVisible,ht={x:He,y:Ne,z:ze.zoom},it=C.getTileBoundingVolume(ht,ze.wrap,S.elevation,s);if(!Qe){let Wt=Ye(d,it,v);if(Wt===0)continue;Qe=Wt===2}let at=C.distanceToTile2d(x.x,x.y,ht,it),dt=q;R&&(dt=(s.calculateTileZoom||Be)(S.zoom+i.ak(S.tileSize/s.tileSize),at,ge,ye,S.fov)),dt=(s.roundZoom?Math.round:Math.floor)(dt),dt=Math.max(0,dt);let Vt=Math.min(dt,H);if(ze.wrap=C.getWrap(T,ht,ze.wrap),ze.zoom>=Vt){if(ze.zoom<V)continue;let Wt=Y-ze.zoom,Nt=Q[0]-.5-(He<<Wt),xr=Q[1]-.5-(Ne<<Wt),Dn=s.reparseOverscaled?Math.max(ze.zoom,dt):ze.zoom;Pe.push({tileID:new i.Z(ze.zoom===H?Dn:ze.zoom,ze.wrap,ze.zoom,He,Ne),distanceSq:i.al([ie[0]-.5-He,ie[1]-.5-Ne]),tileDistanceToCamera:Math.sqrt(Nt*Nt+xr*xr)})}else for(let Wt=0;Wt<4;Wt++)Re.push({zoom:ze.zoom+1,x:(He<<1)+Wt%2,y:(Ne<<1)+(Wt>>1),wrap:ze.wrap,fullyVisible:Qe})}return Pe.sort((ze,He)=>ze.distanceSq-He.distanceSq).map(ze=>ze.tileID)}let Pt=i.a2.fromPoints([new i.P(0,0),new i.P(i.$,i.$)]);class Oe extends i.E{constructor(s,d,v){super(),this.id=s,this.dispatcher=v,this.on("data",x=>this._dataHandler(x)),this.on("dataloading",()=>{this._sourceErrored=!1}),this.on("error",()=>{this._sourceErrored=this._source.loaded()}),this._source=((x,T,C,R)=>{let q=new(Pr(T.type))(x,T,C,R);if(q.id!==x)throw new Error(`Expected Source id to be ${x} instead of ${q.id}`);return q})(s,d,v,this),this._tiles={},this._cache=new xe(0,x=>this._unloadTile(x)),this._timers={},this._cacheTimers={},this._maxTileCacheSize=null,this._maxTileCacheZoomLevels=null,this._loadedParentTiles={},this._coveredTiles={},this._state=new J,this._didEmitContent=!1,this._updated=!1}onAdd(s){this.map=s,this._maxTileCacheSize=s?s._maxTileCacheSize:null,this._maxTileCacheZoomLevels=s?s._maxTileCacheZoomLevels:null,this._source&&this._source.onAdd&&this._source.onAdd(s)}onRemove(s){this.clearTiles(),this._source&&this._source.onRemove&&this._source.onRemove(s)}loaded(){if(this._sourceErrored)return!0;if(!this._sourceLoaded||!this._source.loaded())return!1;if(!(this.used===void 0&&this.usedForTerrain===void 0||this.used||this.usedForTerrain))return!0;if(!this._updated)return!1;for(let s in this._tiles){let d=this._tiles[s];if(d.state!=="loaded"&&d.state!=="errored")return!1}return!0}getSource(){return this._source}pause(){this._paused=!0}resume(){if(!this._paused)return;let s=this._shouldReloadOnResume;this._paused=!1,this._shouldReloadOnResume=!1,s&&this.reload(),this.transform&&this.update(this.transform,this.terrain)}_loadTile(s,d,v){return i._(this,void 0,void 0,function*(){try{yield this._source.loadTile(s),this._tileLoaded(s,d,v)}catch(x){s.state="errored",x.status!==404?this._source.fire(new i.k(x,{tile:s})):this.update(this.transform,this.terrain)}})}_unloadTile(s){this._source.unloadTile&&this._source.unloadTile(s)}_abortTile(s){this._source.abortTile&&this._source.abortTile(s),this._source.fire(new i.l("dataabort",{tile:s,coord:s.tileID,dataType:"source"}))}serialize(){return this._source.serialize()}prepare(s){this._source.prepare&&this._source.prepare(),this._state.coalesceChanges(this._tiles,this.map?this.map.painter:null);for(let d in this._tiles){let v=this._tiles[d];v.upload(s),v.prepare(this.map.style.imageManager)}}getIds(){return Object.values(this._tiles).map(s=>s.tileID).sort(xt).map(s=>s.key)}getRenderableIds(s){let d=[];for(let v in this._tiles)this._isIdRenderable(v,s)&&d.push(this._tiles[v]);return s?d.sort((v,x)=>{let T=v.tileID,C=x.tileID,R=new i.P(T.canonical.x,T.canonical.y)._rotate(-this.transform.bearingInRadians),q=new i.P(C.canonical.x,C.canonical.y)._rotate(-this.transform.bearingInRadians);return T.overscaledZ-C.overscaledZ||q.y-R.y||q.x-R.x}).map(v=>v.tileID.key):d.map(v=>v.tileID).sort(xt).map(v=>v.key)}hasRenderableParent(s){let d=this.findLoadedParent(s,0);return!!d&&this._isIdRenderable(d.tileID.key)}_isIdRenderable(s,d){return this._tiles[s]&&this._tiles[s].hasData()&&!this._coveredTiles[s]&&(d||!this._tiles[s].holdingForFade())}reload(s){if(this._paused)this._shouldReloadOnResume=!0;else{this._cache.reset();for(let d in this._tiles)s?this._reloadTile(d,"expired"):this._tiles[d].state!=="errored"&&this._reloadTile(d,"reloading")}}_reloadTile(s,d){return i._(this,void 0,void 0,function*(){let v=this._tiles[s];v&&(v.state!=="loading"&&(v.state=d),yield this._loadTile(v,s,d))})}_tileLoaded(s,d,v){s.timeAdded=y.now(),v==="expired"&&(s.refreshedUponExpiration=!0),this._setTileReloadTimer(d,s),this.getSource().type==="raster-dem"&&s.dem&&this._backfillDEM(s),this._state.initializeTileState(s,this.map?this.map.painter:null),s.aborted||this._source.fire(new i.l("data",{dataType:"source",tile:s,coord:s.tileID}))}_backfillDEM(s){let d=this.getRenderableIds();for(let x=0;x<d.length;x++){let T=d[x];if(s.neighboringTiles&&s.neighboringTiles[T]){let C=this.getTileByID(T);v(s,C),v(C,s)}}function v(x,T){x.needsHillshadePrepare=!0,x.needsTerrainPrepare=!0;let C=T.tileID.canonical.x-x.tileID.canonical.x,R=T.tileID.canonical.y-x.tileID.canonical.y,q=Math.pow(2,x.tileID.canonical.z),V=T.tileID.key;C===0&&R===0||Math.abs(R)>1||(Math.abs(C)>1&&(Math.abs(C+q)===1?C+=q:Math.abs(C-q)===1&&(C-=q)),T.dem&&x.dem&&(x.dem.backfillBorder(T.dem,C,R),x.neighboringTiles&&x.neighboringTiles[V]&&(x.neighboringTiles[V].backfilled=!0)))}}getTile(s){return this.getTileByID(s.key)}getTileByID(s){return this._tiles[s]}_retainLoadedChildren(s,d,v,x){for(let T in this._tiles){let C=this._tiles[T];if(x[T]||!C.hasData()||C.tileID.overscaledZ<=d||C.tileID.overscaledZ>v)continue;let R=C.tileID;for(;C&&C.tileID.overscaledZ>d+1;){let V=C.tileID.scaledTo(C.tileID.overscaledZ-1);C=this._tiles[V.key],C&&C.hasData()&&(R=V)}let q=R;for(;q.overscaledZ>d;)if(q=q.scaledTo(q.overscaledZ-1),s[q.key]||s[q.canonical.key]){x[R.key]=R;break}}}findLoadedParent(s,d){if(s.key in this._loadedParentTiles){let v=this._loadedParentTiles[s.key];return v&&v.tileID.overscaledZ>=d?v:null}for(let v=s.overscaledZ-1;v>=d;v--){let x=s.scaledTo(v),T=this._getLoadedTile(x);if(T)return T}}findLoadedSibling(s){return this._getLoadedTile(s)}_getLoadedTile(s){let d=this._tiles[s.key];return d&&d.hasData()?d:this._cache.getByKey(s.wrapped().key)}updateCacheSize(s){let d=Math.ceil(s.width/this._source.tileSize)+1,v=Math.ceil(s.height/this._source.tileSize)+1,x=Math.floor(d*v*(this._maxTileCacheZoomLevels===null?i.a.MAX_TILE_CACHE_ZOOM_LEVELS:this._maxTileCacheZoomLevels)),T=typeof this._maxTileCacheSize=="number"?Math.min(this._maxTileCacheSize,x):x;this._cache.setMaxSize(T)}handleWrapJump(s){let d=Math.round((s-(this._prevLng===void 0?s:this._prevLng))/360);if(this._prevLng=s,d){let v={};for(let x in this._tiles){let T=this._tiles[x];T.tileID=T.tileID.unwrapTo(T.tileID.wrap+d),v[T.tileID.key]=T}this._tiles=v;for(let x in this._timers)clearTimeout(this._timers[x]),delete this._timers[x];for(let x in this._tiles)this._setTileReloadTimer(x,this._tiles[x])}}_updateCoveredAndRetainedTiles(s,d,v,x,T,C){let R={},q={},V=Object.keys(s),H=y.now();for(let Y of V){let W=s[Y],Q=this._tiles[Y];if(!Q||Q.fadeEndTime!==0&&Q.fadeEndTime<=H)continue;let ie=this.findLoadedParent(W,d),ve=this.findLoadedSibling(W),ge=ie||ve||null;ge&&(this._addTile(ge.tileID),R[ge.tileID.key]=ge.tileID),q[Y]=W}this._retainLoadedChildren(q,x,v,s);for(let Y in R)s[Y]||(this._coveredTiles[Y]=!0,s[Y]=R[Y]);if(C){let Y={},W={};for(let Q of T)this._tiles[Q.key].hasData()?Y[Q.key]=Q:W[Q.key]=Q;for(let Q in W){let ie=W[Q].children(this._source.maxzoom);this._tiles[ie[0].key]&&this._tiles[ie[1].key]&&this._tiles[ie[2].key]&&this._tiles[ie[3].key]&&(Y[ie[0].key]=s[ie[0].key]=ie[0],Y[ie[1].key]=s[ie[1].key]=ie[1],Y[ie[2].key]=s[ie[2].key]=ie[2],Y[ie[3].key]=s[ie[3].key]=ie[3],delete W[Q])}for(let Q in W){let ie=W[Q],ve=this.findLoadedParent(ie,this._source.minzoom),ge=this.findLoadedSibling(ie),ye=ve||ge||null;if(ye){Y[ye.tileID.key]=s[ye.tileID.key]=ye.tileID;for(let Ie in Y)Y[Ie].isChildOf(ye.tileID)&&delete Y[Ie]}}for(let Q in this._tiles)Y[Q]||(this._coveredTiles[Q]=!0)}}update(s,d){if(!this._sourceLoaded||this._paused)return;let v;this.transform=s,this.terrain=d,this.updateCacheSize(s),this.handleWrapJump(this.transform.center.lng),this._coveredTiles={},this.used||this.usedForTerrain?this._source.tileID?v=s.getVisibleUnwrappedCoordinates(this._source.tileID).map(H=>new i.Z(H.canonical.z,H.wrap,H.canonical.z,H.canonical.x,H.canonical.y)):(v=Ae(s,{tileSize:this.usedForTerrain?this.tileSize:this._source.tileSize,minzoom:this._source.minzoom,maxzoom:this._source.maxzoom,roundZoom:!this.usedForTerrain&&this._source.roundZoom,reparseOverscaled:this._source.reparseOverscaled,terrain:d,calculateTileZoom:this._source.calculateTileZoom}),this._source.hasTile&&(v=v.filter(H=>this._source.hasTile(H)))):v=[];let x=gt(s,this._source),T=Math.max(x-Oe.maxOverzooming,this._source.minzoom),C=Math.max(x+Oe.maxUnderzooming,this._source.minzoom);if(this.usedForTerrain){let H={};for(let Y of v)if(Y.canonical.z>this._source.minzoom){let W=Y.scaledTo(Y.canonical.z-1);H[W.key]=W;let Q=Y.scaledTo(Math.max(this._source.minzoom,Math.min(Y.canonical.z,5)));H[Q.key]=Q}v=v.concat(Object.values(H))}let R=v.length===0&&!this._updated&&this._didEmitContent;this._updated=!0,R&&this.fire(new i.l("data",{sourceDataType:"idle",dataType:"source",sourceId:this.id}));let q=this._updateRetainedTiles(v,x);Bt(this._source.type)&&this._updateCoveredAndRetainedTiles(q,T,C,x,v,d);for(let H in q)this._tiles[H].clearFadeHold();let V=i.am(this._tiles,q);for(let H of V){let Y=this._tiles[H];Y.hasSymbolBuckets&&!Y.holdingForFade()?Y.setHoldDuration(this.map._fadeDuration):Y.hasSymbolBuckets&&!Y.symbolFadeFinished()||this._removeTile(H)}this._updateLoadedParentTileCache(),this._updateLoadedSiblingTileCache()}releaseSymbolFadeTiles(){for(let s in this._tiles)this._tiles[s].holdingForFade()&&this._removeTile(s)}_updateRetainedTiles(s,d){var v;let x={},T={},C=Math.max(d-Oe.maxOverzooming,this._source.minzoom),R=Math.max(d+Oe.maxUnderzooming,this._source.minzoom),q={};for(let V of s){let H=this._addTile(V);x[V.key]=V,H.hasData()||d<this._source.maxzoom&&(q[V.key]=V)}this._retainLoadedChildren(q,d,R,x);for(let V of s){let H=this._tiles[V.key];if(H.hasData())continue;if(d+1>this._source.maxzoom){let W=V.children(this._source.maxzoom)[0],Q=this.getTile(W);if(Q&&Q.hasData()){x[W.key]=W;continue}}else{let W=V.children(this._source.maxzoom);if(x[W[0].key]&&x[W[1].key]&&x[W[2].key]&&x[W[3].key])continue}let Y=H.wasRequested();for(let W=V.overscaledZ-1;W>=C;--W){let Q=V.scaledTo(W);if(T[Q.key])break;if(T[Q.key]=!0,H=this.getTile(Q),!H&&Y&&(H=this._addTile(Q)),H){let ie=H.hasData();if((ie||!(!((v=this.map)===null||v===void 0)&&v.cancelPendingTileRequestsWhileZooming)||Y)&&(x[Q.key]=Q),Y=H.wasRequested(),ie)break}}}return x}_updateLoadedParentTileCache(){this._loadedParentTiles={};for(let s in this._tiles){let d=[],v,x=this._tiles[s].tileID;for(;x.overscaledZ>0;){if(x.key in this._loadedParentTiles){v=this._loadedParentTiles[x.key];break}d.push(x.key);let T=x.scaledTo(x.overscaledZ-1);if(v=this._getLoadedTile(T),v)break;x=T}for(let T of d)this._loadedParentTiles[T]=v}}_updateLoadedSiblingTileCache(){this._loadedSiblingTiles={};for(let s in this._tiles){let d=this._tiles[s].tileID,v=this._getLoadedTile(d);this._loadedSiblingTiles[d.key]=v}}_addTile(s){let d=this._tiles[s.key];if(d)return d;d=this._cache.getAndRemove(s),d&&(this._setTileReloadTimer(s.key,d),d.tileID=s,this._state.initializeTileState(d,this.map?this.map.painter:null),this._cacheTimers[s.key]&&(clearTimeout(this._cacheTimers[s.key]),delete this._cacheTimers[s.key],this._setTileReloadTimer(s.key,d)));let v=d;return d||(d=new $t(s,this._source.tileSize*s.overscaleFactor()),this._loadTile(d,s.key,d.state)),d.uses++,this._tiles[s.key]=d,v||this._source.fire(new i.l("dataloading",{tile:d,coord:d.tileID,dataType:"source"})),d}_setTileReloadTimer(s,d){s in this._timers&&(clearTimeout(this._timers[s]),delete this._timers[s]);let v=d.getExpiryTimeout();v&&(this._timers[s]=setTimeout(()=>{this._reloadTile(s,"expired"),delete this._timers[s]},v))}refreshTiles(s){for(let d in this._tiles)(this._isIdRenderable(d)||this._tiles[d].state=="errored")&&s.some(v=>v.equals(this._tiles[d].tileID.canonical))&&this._reloadTile(d,"expired")}_removeTile(s){let d=this._tiles[s];d&&(d.uses--,delete this._tiles[s],this._timers[s]&&(clearTimeout(this._timers[s]),delete this._timers[s]),d.uses>0||(d.hasData()&&d.state!=="reloading"?this._cache.add(d.tileID,d,d.getExpiryTimeout()):(d.aborted=!0,this._abortTile(d),this._unloadTile(d))))}_dataHandler(s){let d=s.sourceDataType;s.dataType==="source"&&d==="metadata"&&(this._sourceLoaded=!0),this._sourceLoaded&&!this._paused&&s.dataType==="source"&&d==="content"&&(this.reload(s.sourceDataChanged),this.transform&&this.update(this.transform,this.terrain),this._didEmitContent=!0)}clearTiles(){this._shouldReloadOnResume=!1,this._paused=!1;for(let s in this._tiles)this._removeTile(s);this._cache.reset()}tilesIn(s,d,v){let x=[],T=this.transform;if(!T)return x;let C=T.getCoveringTilesDetailsProvider().allowWorldCopies(),R=v?T.getCameraQueryGeometry(s):s,q=Q=>T.screenPointToMercatorCoordinate(Q,this.terrain),V=this.transformBbox(s,q,!C),H=this.transformBbox(R,q,!C),Y=this.getIds(),W=i.a2.fromPoints(H);for(let Q=0;Q<Y.length;Q++){let ie=this._tiles[Y[Q]];if(ie.holdingForFade())continue;let ve=C?[ie.tileID]:[ie.tileID.unwrapTo(-1),ie.tileID.unwrapTo(0)],ge=Math.pow(2,T.zoom-ie.tileID.overscaledZ),ye=d*ie.queryPadding*i.$/ie.tileSize/ge;for(let Ie of ve){let Re=W.map(Pe=>Ie.getTilePoint(new i.a1(Pe.x,Pe.y)));if(Re.expandBy(ye),Re.intersects(Pt)){let Pe=V.map(He=>Ie.getTilePoint(He)),ze=H.map(He=>Ie.getTilePoint(He));x.push({tile:ie,tileID:C?Ie:Ie.unwrapTo(0),queryGeometry:Pe,cameraQueryGeometry:ze,scale:ge})}}}return x}transformBbox(s,d,v){let x=s.map(d);if(v){let T=i.a2.fromPoints(s);T.shrinkBy(.001*Math.min(T.width(),T.height()));let C=T.map(d);i.a2.fromPoints(x).covers(C)||(x=x.map(R=>R.x>.5?new i.a1(R.x-1,R.y,R.z):R))}return x}getVisibleCoordinates(s){let d=this.getRenderableIds(s).map(v=>this._tiles[v].tileID);return this.transform&&this.transform.populateCache(d),d}hasTransition(){if(this._source.hasTransition())return!0;if(Bt(this._source.type)){let s=y.now();for(let d in this._tiles)if(this._tiles[d].fadeEndTime>=s)return!0}return!1}setFeatureState(s,d,v){this._state.updateState(s=s||"_geojsonTileLayer",d,v)}removeFeatureState(s,d,v){this._state.removeFeatureState(s=s||"_geojsonTileLayer",d,v)}getFeatureState(s,d){return this._state.getState(s=s||"_geojsonTileLayer",d)}setDependencies(s,d,v){let x=this._tiles[s];x&&x.setDependencies(d,v)}reloadTilesForDependencies(s,d){for(let v in this._tiles)this._tiles[v].hasDependency(s,d)&&this._reloadTile(v,"reloading");this._cache.filter(v=>!v.hasDependency(s,d))}}function xt(S,s){let d=Math.abs(2*S.wrap)-+(S.wrap<0),v=Math.abs(2*s.wrap)-+(s.wrap<0);return S.overscaledZ-s.overscaledZ||v-d||s.canonical.y-S.canonical.y||s.canonical.x-S.canonical.x}function Bt(S){return S==="raster"||S==="image"||S==="video"}Oe.maxOverzooming=10,Oe.maxUnderzooming=3;class Tr{constructor(s,d){this.reset(s,d)}reset(s,d){this.points=s||[],this._distances=[0];for(let v=1;v<this.points.length;v++)this._distances[v]=this._distances[v-1]+this.points[v].dist(this.points[v-1]);this.length=this._distances[this._distances.length-1],this.padding=Math.min(d||0,.5*this.length),this.paddedLength=this.length-2*this.padding}lerp(s){if(this.points.length===1)return this.points[0];s=i.ah(s,0,1);let d=1,v=this._distances[d],x=s*this.paddedLength+this.padding;for(;v<x&&d<this._distances.length;)v=this._distances[++d];let T=d-1,C=this._distances[T],R=v-C,q=R>0?(x-C)/R:0;return this.points[T].mult(1-q).add(this.points[d].mult(q))}}function pn(S,s){let d=!0;return S==="always"||S!=="never"&&s!=="never"||(d=!1),d}class wt{constructor(s,d,v){let x=this.boxCells=[],T=this.circleCells=[];this.xCellCount=Math.ceil(s/v),this.yCellCount=Math.ceil(d/v);for(let C=0;C<this.xCellCount*this.yCellCount;C++)x.push([]),T.push([]);this.circleKeys=[],this.boxKeys=[],this.bboxes=[],this.circles=[],this.width=s,this.height=d,this.xScale=this.xCellCount/s,this.yScale=this.yCellCount/d,this.boxUid=0,this.circleUid=0}keysLength(){return this.boxKeys.length+this.circleKeys.length}insert(s,d,v,x,T){this._forEachCell(d,v,x,T,this._insertBoxCell,this.boxUid++),this.boxKeys.push(s),this.bboxes.push(d),this.bboxes.push(v),this.bboxes.push(x),this.bboxes.push(T)}insertCircle(s,d,v,x){this._forEachCell(d-x,v-x,d+x,v+x,this._insertCircleCell,this.circleUid++),this.circleKeys.push(s),this.circles.push(d),this.circles.push(v),this.circles.push(x)}_insertBoxCell(s,d,v,x,T,C){this.boxCells[T].push(C)}_insertCircleCell(s,d,v,x,T,C){this.circleCells[T].push(C)}_query(s,d,v,x,T,C,R){if(v<0||s>this.width||x<0||d>this.height)return[];let q=[];if(s<=0&&d<=0&&this.width<=v&&this.height<=x){if(T)return[{key:null,x1:s,y1:d,x2:v,y2:x}];for(let V=0;V<this.boxKeys.length;V++)q.push({key:this.boxKeys[V],x1:this.bboxes[4*V],y1:this.bboxes[4*V+1],x2:this.bboxes[4*V+2],y2:this.bboxes[4*V+3]});for(let V=0;V<this.circleKeys.length;V++){let H=this.circles[3*V],Y=this.circles[3*V+1],W=this.circles[3*V+2];q.push({key:this.circleKeys[V],x1:H-W,y1:Y-W,x2:H+W,y2:Y+W})}}else this._forEachCell(s,d,v,x,this._queryCell,q,{hitTest:T,overlapMode:C,seenUids:{box:{},circle:{}}},R);return q}query(s,d,v,x){return this._query(s,d,v,x,!1,null)}hitTest(s,d,v,x,T,C){return this._query(s,d,v,x,!0,T,C).length>0}hitTestCircle(s,d,v,x,T){let C=s-v,R=s+v,q=d-v,V=d+v;if(R<0||C>this.width||V<0||q>this.height)return!1;let H=[];return this._forEachCell(C,q,R,V,this._queryCellCircle,H,{hitTest:!0,overlapMode:x,circle:{x:s,y:d,radius:v},seenUids:{box:{},circle:{}}},T),H.length>0}_queryCell(s,d,v,x,T,C,R,q){let{seenUids:V,hitTest:H,overlapMode:Y}=R,W=this.boxCells[T];if(W!==null){let ie=this.bboxes;for(let ve of W)if(!V.box[ve]){V.box[ve]=!0;let ge=4*ve,ye=this.boxKeys[ve];if(s<=ie[ge+2]&&d<=ie[ge+3]&&v>=ie[ge+0]&&x>=ie[ge+1]&&(!q||q(ye))&&(!H||!pn(Y,ye.overlapMode))&&(C.push({key:ye,x1:ie[ge],y1:ie[ge+1],x2:ie[ge+2],y2:ie[ge+3]}),H))return!0}}let Q=this.circleCells[T];if(Q!==null){let ie=this.circles;for(let ve of Q)if(!V.circle[ve]){V.circle[ve]=!0;let ge=3*ve,ye=this.circleKeys[ve];if(this._circleAndRectCollide(ie[ge],ie[ge+1],ie[ge+2],s,d,v,x)&&(!q||q(ye))&&(!H||!pn(Y,ye.overlapMode))){let Ie=ie[ge],Re=ie[ge+1],Pe=ie[ge+2];if(C.push({key:ye,x1:Ie-Pe,y1:Re-Pe,x2:Ie+Pe,y2:Re+Pe}),H)return!0}}}return!1}_queryCellCircle(s,d,v,x,T,C,R,q){let{circle:V,seenUids:H,overlapMode:Y}=R,W=this.boxCells[T];if(W!==null){let ie=this.bboxes;for(let ve of W)if(!H.box[ve]){H.box[ve]=!0;let ge=4*ve,ye=this.boxKeys[ve];if(this._circleAndRectCollide(V.x,V.y,V.radius,ie[ge+0],ie[ge+1],ie[ge+2],ie[ge+3])&&(!q||q(ye))&&!pn(Y,ye.overlapMode))return C.push(!0),!0}}let Q=this.circleCells[T];if(Q!==null){let ie=this.circles;for(let ve of Q)if(!H.circle[ve]){H.circle[ve]=!0;let ge=3*ve,ye=this.circleKeys[ve];if(this._circlesCollide(ie[ge],ie[ge+1],ie[ge+2],V.x,V.y,V.radius)&&(!q||q(ye))&&!pn(Y,ye.overlapMode))return C.push(!0),!0}}}_forEachCell(s,d,v,x,T,C,R,q){let V=this._convertToXCellCoord(s),H=this._convertToYCellCoord(d),Y=this._convertToXCellCoord(v),W=this._convertToYCellCoord(x);for(let Q=V;Q<=Y;Q++)for(let ie=H;ie<=W;ie++)if(T.call(this,s,d,v,x,this.xCellCount*ie+Q,C,R,q))return}_convertToXCellCoord(s){return Math.max(0,Math.min(this.xCellCount-1,Math.floor(s*this.xScale)))}_convertToYCellCoord(s){return Math.max(0,Math.min(this.yCellCount-1,Math.floor(s*this.yScale)))}_circlesCollide(s,d,v,x,T,C){let R=x-s,q=T-d,V=v+C;return V*V>R*R+q*q}_circleAndRectCollide(s,d,v,x,T,C,R){let q=(C-x)/2,V=Math.abs(s-(x+q));if(V>q+v)return!1;let H=(R-T)/2,Y=Math.abs(d-(T+H));if(Y>H+v)return!1;if(V<=q||Y<=H)return!0;let W=V-q,Q=Y-H;return W*W+Q*Q<=v*v}}function an(S,s,d){let v=i.L();if(!S){let{vecSouth:Y,vecEast:W}=or(s),Q=c();Q[0]=W[0],Q[1]=W[1],Q[2]=Y[0],Q[3]=Y[1],x=Q,(H=(C=(T=Q)[0])*(V=T[3])-(q=T[2])*(R=T[1]))&&(x[0]=V*(H=1/H),x[1]=-R*H,x[2]=-q*H,x[3]=C*H),v[0]=Q[0],v[1]=Q[1],v[4]=Q[2],v[5]=Q[3]}var x,T,C,R,q,V,H;return i.N(v,v,[1/d,1/d,1]),v}function Cr(S,s,d,v){if(S){let x=i.L();if(!s){let{vecSouth:T,vecEast:C}=or(d);x[0]=C[0],x[1]=C[1],x[4]=T[0],x[5]=T[1]}return i.N(x,x,[v,v,1]),x}return d.pixelsToClipSpaceMatrix}function or(S){let s=Math.cos(S.rollInRadians),d=Math.sin(S.rollInRadians),v=Math.cos(S.pitchInRadians),x=Math.cos(S.bearingInRadians),T=Math.sin(S.bearingInRadians),C=i.ar();C[0]=-x*v*d-T*s,C[1]=-T*v*d+x*s;let R=i.as(C);R<1e-9?i.at(C):i.au(C,C,1/R);let q=i.ar();q[0]=x*v*s-T*d,q[1]=T*v*s+x*d;let V=i.as(q);return V<1e-9?i.at(q):i.au(q,q,1/V),{vecEast:q,vecSouth:C}}function Er(S,s,d,v){let x;v?(x=[S,s,v(S,s),1],i.aw(x,x,d)):(x=[S,s,0,1],Vr(x,x,d));let T=x[3];return{point:new i.P(x[0]/T,x[1]/T),signedDistanceFromCamera:T,isOccluded:!1}}function Rt(S,s){return .5+S/s*.5}function qo(S,s){return S.x>=-s[0]&&S.x<=s[0]&&S.y>=-s[1]&&S.y<=s[1]}function Xo(S,s,d,v,x,T,C,R,q,V,H,Y,W){let Q=d?S.textSizeData:S.iconSizeData,ie=i.an(Q,s.transform.zoom),ve=[256/s.width*2+1,256/s.height*2+1],ge=d?S.text.dynamicLayoutVertexArray:S.icon.dynamicLayoutVertexArray;ge.clear();let ye=S.lineVertexArray,Ie=d?S.text.placedSymbolArray:S.icon.placedSymbolArray,Re=s.transform.width/s.transform.height,Pe=!1;for(let ze=0;ze<Ie.length;ze++){let He=Ie.get(ze);if(He.hidden||He.writingMode===i.ao.vertical&&!Pe){on(He.numGlyphs,ge);continue}Pe=!1;let Ne=new i.P(He.anchorX,He.anchorY),Qe={getElevation:W,pitchedLabelPlaneMatrix:v,lineVertexArray:ye,pitchWithMap:T,projectionCache:{projections:{},offsets:{},cachedAnchorPoint:void 0,anyProjectionOccluded:!1},transform:s.transform,tileAnchorPoint:Ne,unwrappedTileID:q,width:V,height:H,translation:Y},ht=On(He.anchorX,He.anchorY,Qe);if(!qo(ht.point,ve)){on(He.numGlyphs,ge);continue}let it=Rt(s.transform.cameraToCenterDistance,ht.signedDistanceFromCamera),at=i.ap(Q,ie,He),dt=T?at*s.transform.getPitchedTextCorrection(He.anchorX,He.anchorY,q)/it:at*it,Vt=zt({projectionContext:Qe,pitchedLabelPlaneMatrixInverse:x,symbol:He,fontSize:dt,flip:!1,keepUpright:C,glyphOffsetArray:S.glyphOffsetArray,dynamicLayoutVertexArray:ge,aspectRatio:Re,rotateToLine:R});Pe=Vt.useVertical,(Vt.notEnoughRoom||Pe||Vt.needsFlipping&&zt({projectionContext:Qe,pitchedLabelPlaneMatrixInverse:x,symbol:He,fontSize:dt,flip:!0,keepUpright:C,glyphOffsetArray:S.glyphOffsetArray,dynamicLayoutVertexArray:ge,aspectRatio:Re,rotateToLine:R}).notEnoughRoom)&&on(He.numGlyphs,ge)}d?S.text.dynamicLayoutVertexBuffer.updateData(ge):S.icon.dynamicLayoutVertexBuffer.updateData(ge)}function Un(S,s,d,v,x,T,C,R){let q=T.glyphStartIndex+T.numGlyphs,V=T.lineStartIndex,H=T.lineStartIndex+T.lineLength,Y=s.getoffsetX(T.glyphStartIndex),W=s.getoffsetX(q-1),Q=bn(S*Y,d,v,x,T.segment,V,H,R,C);if(!Q)return null;let ie=bn(S*W,d,v,x,T.segment,V,H,R,C);return ie?R.projectionCache.anyProjectionOccluded?null:{first:Q,last:ie}:null}function ua(S,s,d,v){return S===i.ao.horizontal&&Math.abs(d.y-s.y)>Math.abs(d.x-s.x)*v?{useVertical:!0}:(S===i.ao.vertical?s.y<d.y:s.x>d.x)?{needsFlipping:!0}:null}function zt(S){let{projectionContext:s,pitchedLabelPlaneMatrixInverse:d,symbol:v,fontSize:x,flip:T,keepUpright:C,glyphOffsetArray:R,dynamicLayoutVertexArray:q,aspectRatio:V,rotateToLine:H}=S,Y=x/24,W=v.lineOffsetX*Y,Q=v.lineOffsetY*Y,ie;if(v.numGlyphs>1){let ve=v.glyphStartIndex+v.numGlyphs,ge=v.lineStartIndex,ye=v.lineStartIndex+v.lineLength,Ie=Un(Y,R,W,Q,T,v,H,s);if(!Ie)return{notEnoughRoom:!0};let Re=_n(Ie.first.point.x,Ie.first.point.y,s,d),Pe=_n(Ie.last.point.x,Ie.last.point.y,s,d);if(C&&!T){let ze=ua(v.writingMode,Re,Pe,V);if(ze)return ze}ie=[Ie.first];for(let ze=v.glyphStartIndex+1;ze<ve-1;ze++){let He=bn(Y*R.getoffsetX(ze),W,Q,T,v.segment,ge,ye,s,H);if(!He)return{notEnoughRoom:!0};ie.push(He)}ie.push(Ie.last)}else{if(C&&!T){let ge=yn(s.tileAnchorPoint.x,s.tileAnchorPoint.y,s).point,ye=v.lineStartIndex+v.segment+1,Ie=new i.P(s.lineVertexArray.getx(ye),s.lineVertexArray.gety(ye)),Re=yn(Ie.x,Ie.y,s),Pe=Re.signedDistanceFromCamera>0?Re.point:Dr(s.tileAnchorPoint,Ie,ge,1,s),ze=_n(ge.x,ge.y,s,d),He=_n(Pe.x,Pe.y,s,d),Ne=ua(v.writingMode,ze,He,V);if(Ne)return Ne}let ve=bn(Y*R.getoffsetX(v.glyphStartIndex),W,Q,T,v.segment,v.lineStartIndex,v.lineStartIndex+v.lineLength,s,H);if(!ve||s.projectionCache.anyProjectionOccluded)return{notEnoughRoom:!0};ie=[ve]}for(let ve of ie)i.av(q,ve.point,ve.angle);return{}}function Dr(S,s,d,v,x){let T=S.add(S.sub(s)._unit()),C=yn(T.x,T.y,x).point,R=d.sub(C);return d.add(R._mult(v/R.mag()))}function hr(S,s,d){let v=s.projectionCache;if(v.projections[S])return v.projections[S];let x=new i.P(s.lineVertexArray.getx(S),s.lineVertexArray.gety(S)),T=yn(x.x,x.y,s);if(T.signedDistanceFromCamera>0)return v.projections[S]=T.point,v.anyProjectionOccluded=v.anyProjectionOccluded||T.isOccluded,T.point;let C=S-d.direction;return Dr(d.distanceFromAnchor===0?s.tileAnchorPoint:new i.P(s.lineVertexArray.getx(C),s.lineVertexArray.gety(C)),x,d.previousVertex,d.absOffsetX-d.distanceFromAnchor+1,s)}function yn(S,s,d){let v=S+d.translation[0],x=s+d.translation[1],T;return d.pitchWithMap?(T=Er(v,x,d.pitchedLabelPlaneMatrix,d.getElevation),T.isOccluded=!1):(T=d.transform.projectTileCoordinates(v,x,d.unwrappedTileID,d.getElevation),T.point.x=(.5*T.point.x+.5)*d.width,T.point.y=(.5*-T.point.y+.5)*d.height),T}function _n(S,s,d,v){if(d.pitchWithMap){let x=[S,s,0,1];return i.aw(x,x,v),d.transform.projectTileCoordinates(x[0]/x[3],x[1]/x[3],d.unwrappedTileID,d.getElevation).point}return{x:S/d.width*2-1,y:1-s/d.height*2}}function On(S,s,d){return d.transform.projectTileCoordinates(S,s,d.unwrappedTileID,d.getElevation)}function sr(S,s,d){return S._unit()._perp()._mult(s*d)}function fn(S,s,d,v,x,T,C,R,q){if(R.projectionCache.offsets[S])return R.projectionCache.offsets[S];let V=d.add(s);if(S+q.direction<v||S+q.direction>=x)return R.projectionCache.offsets[S]=V,V;let H=hr(S+q.direction,R,q),Y=sr(H.sub(d),C,q.direction),W=d.add(Y),Q=H.add(Y);return R.projectionCache.offsets[S]=i.ax(T,V,W,Q)||V,R.projectionCache.offsets[S]}function bn(S,s,d,v,x,T,C,R,q){let V=v?S-s:S+s,H=V>0?1:-1,Y=0;v&&(H*=-1,Y=Math.PI),H<0&&(Y+=Math.PI);let W,Q=H>0?T+x:T+x+1;R.projectionCache.cachedAnchorPoint?W=R.projectionCache.cachedAnchorPoint:(W=yn(R.tileAnchorPoint.x,R.tileAnchorPoint.y,R).point,R.projectionCache.cachedAnchorPoint=W);let ie,ve,ge=W,ye=W,Ie=0,Re=0,Pe=Math.abs(V),ze=[],He;for(;Ie+Re<=Pe;){if(Q+=H,Q<T||Q>=C)return null;Ie+=Re,ye=ge,ve=ie;let ht={absOffsetX:Pe,direction:H,distanceFromAnchor:Ie,previousVertex:ye};if(ge=hr(Q,R,ht),d===0)ze.push(ye),He=ge.sub(ye);else{let it,at=ge.sub(ye);it=at.mag()===0?sr(hr(Q+H,R,ht).sub(ge),d,H):sr(at,d,H),ve||(ve=ye.add(it)),ie=fn(Q,it,ge,T,C,ve,d,R,ht),ze.push(ve),He=ie.sub(ve)}Re=He.mag()}let Ne=He._mult((Pe-Ie)/Re)._add(ve||ye),Qe=Y+Math.atan2(ge.y-ye.y,ge.x-ye.x);return ze.push(Ne),{point:Ne,angle:q?Qe:0,path:ze}}let rn=new Float32Array([-1/0,-1/0,0,-1/0,-1/0,0,-1/0,-1/0,0,-1/0,-1/0,0]);function on(S,s){for(let d=0;d<S;d++){let v=s.length;s.resize(v+4),s.float32.set(rn,3*v)}}function Vr(S,s,d){let v=s[0],x=s[1];return S[0]=d[0]*v+d[4]*x+d[12],S[1]=d[1]*v+d[5]*x+d[13],S[3]=d[3]*v+d[7]*x+d[15],S}let Gr=100;class Mn{constructor(s,d=new wt(s.width+200,s.height+200,25),v=new wt(s.width+200,s.height+200,25)){this.transform=s,this.grid=d,this.ignoredGrid=v,this.pitchFactor=Math.cos(s.pitch*Math.PI/180)*s.cameraToCenterDistance,this.screenRightBoundary=s.width+Gr,this.screenBottomBoundary=s.height+Gr,this.gridRightBoundary=s.width+200,this.gridBottomBoundary=s.height+200,this.perspectiveRatioCutoff=.6}placeCollisionBox(s,d,v,x,T,C,R,q,V,H,Y,W){let Q=this.projectAndGetPerspectiveRatio(s.anchorPointX+q[0],s.anchorPointY+q[1],T,H,W),ie=v*Q.perspectiveRatio,ve;if(C||R)ve=this._projectCollisionBox(s,ie,x,T,C,R,q,Q,H,Y,W);else{let He=Q.x+(Y?Y.x*ie:0),Ne=Q.y+(Y?Y.y*ie:0);ve={allPointsOccluded:!1,box:[He+s.x1*ie,Ne+s.y1*ie,He+s.x2*ie,Ne+s.y2*ie]}}let[ge,ye,Ie,Re]=ve.box,Pe=C?ve.allPointsOccluded:Q.isOccluded,ze=Pe;return ze||(ze=Q.perspectiveRatio<this.perspectiveRatioCutoff),ze||(ze=!this.isInsideGrid(ge,ye,Ie,Re)),ze||d!=="always"&&this.grid.hitTest(ge,ye,Ie,Re,d,V)?{box:[ge,ye,Ie,Re],placeable:!1,offscreen:!1,occluded:Pe}:{box:[ge,ye,Ie,Re],placeable:!0,offscreen:this.isOffscreen(ge,ye,Ie,Re),occluded:Pe}}placeCollisionCircles(s,d,v,x,T,C,R,q,V,H,Y,W,Q,ie){let ve=[],ge=new i.P(d.anchorX,d.anchorY),ye=this.getPerspectiveRatio(ge.x,ge.y,C,ie),Ie=(V?T*this.transform.getPitchedTextCorrection(d.anchorX,d.anchorY,C)/ye:T*ye)/i.aB,Re={getElevation:ie,pitchedLabelPlaneMatrix:R,lineVertexArray:v,pitchWithMap:V,projectionCache:{projections:{},offsets:{},cachedAnchorPoint:void 0,anyProjectionOccluded:!1},transform:this.transform,tileAnchorPoint:ge,unwrappedTileID:C,width:this.transform.width,height:this.transform.height,translation:Q},Pe=Un(Ie,x,d.lineOffsetX*Ie,d.lineOffsetY*Ie,!1,d,!1,Re),ze=!1,He=!1,Ne=!0;if(Pe){let Qe=.5*Y*ye+W,ht=new i.P(-100,-100),it=new i.P(this.screenRightBoundary,this.screenBottomBoundary),at=new Tr,dt=Pe.first,Vt=Pe.last,Wt=[];for(let Dn=dt.path.length-1;Dn>=1;Dn--)Wt.push(dt.path[Dn]);for(let Dn=1;Dn<Vt.path.length;Dn++)Wt.push(Vt.path[Dn]);let Nt=2.5*Qe;if(V){let Dn=this.projectPathToScreenSpace(Wt,Re);Wt=Dn.some(Eo=>Eo.signedDistanceFromCamera<=0)?[]:Dn.map(Eo=>Eo.point)}let xr=[];if(Wt.length>0){let Dn=Wt[0].clone(),Eo=Wt[0].clone();for(let Qo=1;Qo<Wt.length;Qo++)Dn.x=Math.min(Dn.x,Wt[Qo].x),Dn.y=Math.min(Dn.y,Wt[Qo].y),Eo.x=Math.max(Eo.x,Wt[Qo].x),Eo.y=Math.max(Eo.y,Wt[Qo].y);xr=Dn.x>=ht.x&&Eo.x<=it.x&&Dn.y>=ht.y&&Eo.y<=it.y?[Wt]:Eo.x<ht.x||Dn.x>it.x||Eo.y<ht.y||Dn.y>it.y?[]:i.ay([Wt],ht.x,ht.y,it.x,it.y)}for(let Dn of xr){at.reset(Dn,.25*Qe);let Eo=0;Eo=at.length<=.5*Qe?1:Math.ceil(at.paddedLength/Nt)+1;for(let Qo=0;Qo<Eo;Qo++){let Go=Qo/Math.max(Eo-1,1),Fi=at.lerp(Go),Ji=Fi.x+Gr,Cn=Fi.y+Gr;ve.push(Ji,Cn,Qe,0);let ei=Ji-Qe,Ma=Cn-Qe,Ua=Ji+Qe,ls=Cn+Qe;if(Ne=Ne&&this.isOffscreen(ei,Ma,Ua,ls),He=He||this.isInsideGrid(ei,Ma,Ua,ls),s!=="always"&&this.grid.hitTestCircle(Ji,Cn,Qe,s,H)&&(ze=!0,!q))return{circles:[],offscreen:!1,collisionDetected:ze}}}}return{circles:!q&&ze||!He||ye<this.perspectiveRatioCutoff?[]:ve,offscreen:Ne,collisionDetected:ze}}projectPathToScreenSpace(s,d){let v=function(x,T){let C=i.L();return i.aq(C,T.pitchedLabelPlaneMatrix),x.map(R=>{let q=Er(R.x,R.y,C,T.getElevation),V=T.transform.projectTileCoordinates(q.point.x,q.point.y,T.unwrappedTileID,T.getElevation);return V.point.x=(.5*V.point.x+.5)*T.width,V.point.y=(.5*-V.point.y+.5)*T.height,V})}(s,d);return function(x){let T=0,C=0,R=0,q=0;for(let V=0;V<x.length;V++)x[V].isOccluded?(R=V+1,q=0):(q++,q>C&&(C=q,T=R));return x.slice(T,T+C)}(v)}queryRenderedSymbols(s){if(s.length===0||this.grid.keysLength()===0&&this.ignoredGrid.keysLength()===0)return{};let d=[],v=new i.a2;for(let Y of s){let W=new i.P(Y.x+Gr,Y.y+Gr);v.extend(W),d.push(W)}let{minX:x,minY:T,maxX:C,maxY:R}=v,q=this.grid.query(x,T,C,R).concat(this.ignoredGrid.query(x,T,C,R)),V={},H={};for(let Y of q){let W=Y.key;if(V[W.bucketInstanceId]===void 0&&(V[W.bucketInstanceId]={}),V[W.bucketInstanceId][W.featureIndex])continue;let Q=[new i.P(Y.x1,Y.y1),new i.P(Y.x2,Y.y1),new i.P(Y.x2,Y.y2),new i.P(Y.x1,Y.y2)];i.az(d,Q)&&(V[W.bucketInstanceId][W.featureIndex]=!0,H[W.bucketInstanceId]===void 0&&(H[W.bucketInstanceId]=[]),H[W.bucketInstanceId].push(W.featureIndex))}return H}insertCollisionBox(s,d,v,x,T,C){(v?this.ignoredGrid:this.grid).insert({bucketInstanceId:x,featureIndex:T,collisionGroupID:C,overlapMode:d},s[0],s[1],s[2],s[3])}insertCollisionCircles(s,d,v,x,T,C){let R=v?this.ignoredGrid:this.grid,q={bucketInstanceId:x,featureIndex:T,collisionGroupID:C,overlapMode:d};for(let V=0;V<s.length;V+=4)R.insertCircle(q,s[V],s[V+1],s[V+2])}projectAndGetPerspectiveRatio(s,d,v,x,T){if(T){let C;x?(C=[s,d,x(s,d),1],i.aw(C,C,T)):(C=[s,d,0,1],Vr(C,C,T));let R=C[3];return{x:(C[0]/R+1)/2*this.transform.width+Gr,y:(-C[1]/R+1)/2*this.transform.height+Gr,perspectiveRatio:.5+this.transform.cameraToCenterDistance/R*.5,isOccluded:!1,signedDistanceFromCamera:R}}{let C=this.transform.projectTileCoordinates(s,d,v,x);return{x:(C.point.x+1)/2*this.transform.width+Gr,y:(1-C.point.y)/2*this.transform.height+Gr,perspectiveRatio:.5+this.transform.cameraToCenterDistance/C.signedDistanceFromCamera*.5,isOccluded:C.isOccluded,signedDistanceFromCamera:C.signedDistanceFromCamera}}}getPerspectiveRatio(s,d,v,x){let T=this.transform.projectTileCoordinates(s,d,v,x);return .5+this.transform.cameraToCenterDistance/T.signedDistanceFromCamera*.5}isOffscreen(s,d,v,x){return v<Gr||s>=this.screenRightBoundary||x<Gr||d>this.screenBottomBoundary}isInsideGrid(s,d,v,x){return v>=0&&s<this.gridRightBoundary&&x>=0&&d<this.gridBottomBoundary}getViewportMatrix(){let s=i.ag([]);return i.M(s,s,[-100,-100,0]),s}_projectCollisionBox(s,d,v,x,T,C,R,q,V,H,Y){let W=1,Q=0,ie=0,ve=1,ge=s.anchorPointX+R[0],ye=s.anchorPointY+R[1];if(C&&!T){let Wt=this.projectAndGetPerspectiveRatio(ge+1,ye,x,V,Y),Nt=Wt.x-q.x,xr=Math.atan((Wt.y-q.y)/Nt)+(Nt<0?Math.PI:0),Dn=Math.sin(xr),Eo=Math.cos(xr);W=Eo,Q=Dn,ie=-Dn,ve=Eo}else if(!C&&T){let Wt=or(this.transform);W=Wt.vecEast[0],Q=Wt.vecEast[1],ie=Wt.vecSouth[0],ve=Wt.vecSouth[1]}let Ie=q.x,Re=q.y,Pe=d;T&&(Ie=ge,Re=ye,Pe=Math.pow(2,-(this.transform.zoom-v.overscaledZ)),Pe*=this.transform.getPitchedTextCorrection(ge,ye,x),H||(Pe*=i.ah(.5+q.signedDistanceFromCamera/this.transform.cameraToCenterDistance*.5,0,4))),H&&(Ie+=W*H.x*Pe+ie*H.y*Pe,Re+=Q*H.x*Pe+ve*H.y*Pe);let ze=s.x1*Pe,He=s.x2*Pe,Ne=(ze+He)/2,Qe=s.y1*Pe,ht=s.y2*Pe,it=(Qe+ht)/2,at=[{offsetX:ze,offsetY:Qe},{offsetX:Ne,offsetY:Qe},{offsetX:He,offsetY:Qe},{offsetX:He,offsetY:it},{offsetX:He,offsetY:ht},{offsetX:Ne,offsetY:ht},{offsetX:ze,offsetY:ht},{offsetX:ze,offsetY:it}],dt=[];for(let{offsetX:Wt,offsetY:Nt}of at)dt.push(new i.P(Ie+W*Wt+ie*Nt,Re+Q*Wt+ve*Nt));let Vt=!1;if(T){let Wt=dt.map(Nt=>this.projectAndGetPerspectiveRatio(Nt.x,Nt.y,x,V,Y));Vt=Wt.some(Nt=>!Nt.isOccluded),dt=Wt.map(Nt=>new i.P(Nt.x,Nt.y))}else Vt=!0;return{box:i.aA(dt),allPointsOccluded:!Vt}}}class Pn{constructor(s,d,v,x){this.opacity=s?Math.max(0,Math.min(1,s.opacity+(s.placed?d:-d))):x&&v?1:0,this.placed=v}isHidden(){return this.opacity===0&&!this.placed}}class Et{constructor(s,d,v,x,T){this.text=new Pn(s?s.text:null,d,v,T),this.icon=new Pn(s?s.icon:null,d,x,T)}isHidden(){return this.text.isHidden()&&this.icon.isHidden()}}class tr{constructor(s,d,v){this.text=s,this.icon=d,this.skipFade=v}}class ui{constructor(s,d,v,x,T){this.bucketInstanceId=s,this.featureIndex=d,this.sourceLayerIndex=v,this.bucketIndex=x,this.tileID=T}}class Oi{constructor(s){this.crossSourceCollisions=s,this.maxGroupID=0,this.collisionGroups={}}get(s){if(this.crossSourceCollisions)return{ID:0,predicate:null};if(!this.collisionGroups[s]){let d=++this.maxGroupID;this.collisionGroups[s]={ID:d,predicate:v=>v.collisionGroupID===d}}return this.collisionGroups[s]}}function po(S,s,d,v,x){let{horizontalAlign:T,verticalAlign:C}=i.aH(S);return new i.P(-(T-.5)*s+v[0]*x,-(C-.5)*d+v[1]*x)}class so{constructor(s,d,v,x,T){this.transform=s.clone(),this.terrain=d,this.collisionIndex=new Mn(this.transform),this.placements={},this.opacities={},this.variableOffsets={},this.stale=!1,this.commitTime=0,this.fadeDuration=v,this.retainedQueryData={},this.collisionGroups=new Oi(x),this.collisionCircleArrays={},this.collisionBoxArrays=new Map,this.prevPlacement=T,T&&(T.prevPlacement=void 0),this.placedOrientations={}}_getTerrainElevationFunc(s){let d=this.terrain;return d?(v,x)=>d.getElevation(s,v,x):null}getBucketParts(s,d,v,x){let T=v.getBucket(d),C=v.latestFeatureIndex;if(!T||!C||d.id!==T.layerIds[0])return;let R=v.collisionBoxArray,q=T.layers[0].layout,V=T.layers[0].paint,H=Math.pow(2,this.transform.zoom-v.tileID.overscaledZ),Y=v.tileSize/i.$,W=v.tileID.toUnwrapped(),Q=q.get("text-rotation-alignment")==="map",ie=i.aC(v,1,this.transform.zoom),ve=i.aD(this.collisionIndex.transform,v,V.get("text-translate"),V.get("text-translate-anchor")),ge=i.aD(this.collisionIndex.transform,v,V.get("icon-translate"),V.get("icon-translate-anchor")),ye=an(Q,this.transform,ie);this.retainedQueryData[T.bucketInstanceId]=new ui(T.bucketInstanceId,C,T.sourceLayerIndex,T.index,v.tileID);let Ie={bucket:T,layout:q,translationText:ve,translationIcon:ge,unwrappedTileID:W,pitchedLabelPlaneMatrix:ye,scale:H,textPixelRatio:Y,holdingForFade:v.holdingForFade(),collisionBoxArray:R,partiallyEvaluatedTextSize:i.an(T.textSizeData,this.transform.zoom),collisionGroup:this.collisionGroups.get(T.sourceID)};if(x)for(let Re of T.sortKeyRanges){let{sortKey:Pe,symbolInstanceStart:ze,symbolInstanceEnd:He}=Re;s.push({sortKey:Pe,symbolInstanceStart:ze,symbolInstanceEnd:He,parameters:Ie})}else s.push({symbolInstanceStart:0,symbolInstanceEnd:T.symbolInstances.length,parameters:Ie})}attemptAnchorPlacement(s,d,v,x,T,C,R,q,V,H,Y,W,Q,ie,ve,ge,ye,Ie,Re,Pe){let ze=i.aE[s.textAnchor],He=[s.textOffset0,s.textOffset1],Ne=po(ze,v,x,He,T),Qe=this.collisionIndex.placeCollisionBox(d,W,q,V,H,R,C,ge,Y.predicate,Re,Ne,Pe);if((!Ie||this.collisionIndex.placeCollisionBox(Ie,W,q,V,H,R,C,ye,Y.predicate,Re,Ne,Pe).placeable)&&Qe.placeable){let ht;if(this.prevPlacement&&this.prevPlacement.variableOffsets[Q.crossTileID]&&this.prevPlacement.placements[Q.crossTileID]&&this.prevPlacement.placements[Q.crossTileID].text&&(ht=this.prevPlacement.variableOffsets[Q.crossTileID].anchor),Q.crossTileID===0)throw new Error("symbolInstance.crossTileID can't be 0");return this.variableOffsets[Q.crossTileID]={textOffset:He,width:v,height:x,anchor:ze,textBoxScale:T,prevAnchor:ht},this.markUsedJustification(ie,ze,Q,ve),ie.allowVerticalPlacement&&(this.markUsedOrientation(ie,ve,Q),this.placedOrientations[Q.crossTileID]=ve),{shift:Ne,placedGlyphBoxes:Qe}}}placeLayerBucketPart(s,d,v){let{bucket:x,layout:T,translationText:C,translationIcon:R,unwrappedTileID:q,pitchedLabelPlaneMatrix:V,textPixelRatio:H,holdingForFade:Y,collisionBoxArray:W,partiallyEvaluatedTextSize:Q,collisionGroup:ie}=s.parameters,ve=T.get("text-optional"),ge=T.get("icon-optional"),ye=i.aF(T,"text-overlap","text-allow-overlap"),Ie=ye==="always",Re=i.aF(T,"icon-overlap","icon-allow-overlap"),Pe=Re==="always",ze=T.get("text-rotation-alignment")==="map",He=T.get("text-pitch-alignment")==="map",Ne=T.get("icon-text-fit")!=="none",Qe=T.get("symbol-z-order")==="viewport-y",ht=Ie&&(Pe||!x.hasIconData()||ge),it=Pe&&(Ie||!x.hasTextData()||ve);!x.collisionArrays&&W&&x.deserializeCollisionBoxes(W);let at=this.retainedQueryData[x.bucketInstanceId].tileID,dt=this._getTerrainElevationFunc(at),Vt=this.transform.getFastPathSimpleProjectionMatrix(at),Wt=(Nt,xr,Dn)=>{var Eo,Qo;if(d[Nt.crossTileID])return;if(Y)return void(this.placements[Nt.crossTileID]=new tr(!1,!1,!1));let Go=!1,Fi=!1,Ji=!0,Cn=null,ei={box:null,placeable:!1,offscreen:null,occluded:!1},Ma={placeable:!1},Ua=null,ls=null,gl=null,op=0,mh=0,gh=0;xr.textFeatureIndex?op=xr.textFeatureIndex:Nt.useRuntimeCollisionCircles&&(op=Nt.featureIndex),xr.verticalTextFeatureIndex&&(mh=xr.verticalTextFeatureIndex);let zv=xr.textBox;if(zv){let Ql=Ca=>{let Ba=i.ao.horizontal;if(x.allowVerticalPlacement&&!Ca&&this.prevPlacement){let cc=this.prevPlacement.placedOrientations[Nt.crossTileID];cc&&(this.placedOrientations[Nt.crossTileID]=cc,Ba=cc,this.markUsedOrientation(x,Ba,Nt))}return Ba},ip=(Ca,Ba)=>{if(x.allowVerticalPlacement&&Nt.numVerticalGlyphVertices>0&&xr.verticalTextBox){for(let cc of x.writingModes)if(cc===i.ao.vertical?(ei=Ba(),Ma=ei):ei=Ca(),ei&&ei.placeable)break}else ei=Ca()},vl=Nt.textAnchorOffsetStartIndex,vh=Nt.textAnchorOffsetEndIndex;if(vh===vl){let Ca=(Ba,cc)=>{let Aa=this.collisionIndex.placeCollisionBox(Ba,ye,H,at,q,He,ze,C,ie.predicate,dt,void 0,Vt);return Aa&&Aa.placeable&&(this.markUsedOrientation(x,cc,Nt),this.placedOrientations[Nt.crossTileID]=cc),Aa};ip(()=>Ca(zv,i.ao.horizontal),()=>{let Ba=xr.verticalTextBox;return x.allowVerticalPlacement&&Nt.numVerticalGlyphVertices>0&&Ba?Ca(Ba,i.ao.vertical):{box:null,offscreen:null}}),Ql(ei&&ei.placeable)}else{let Ca=i.aE[(Qo=(Eo=this.prevPlacement)===null||Eo===void 0?void 0:Eo.variableOffsets[Nt.crossTileID])===null||Qo===void 0?void 0:Qo.anchor],Ba=(Aa,z1,Uv)=>{let rd=Aa.x2-Aa.x1,ap=Aa.y2-Aa.y1,yh=Nt.textBoxScale,I4=Ne&&Re==="never"?z1:null,Au=null,M4=ye==="never"?1:2,wI="never";Ca&&M4++;for(let Vx=0;Vx<M4;Vx++){for(let Gx=vl;Gx<vh;Gx++){let _h=x.textAnchorOffsets.get(Gx);if(Ca&&_h.textAnchor!==Ca)continue;let nd=this.attemptAnchorPlacement(_h,Aa,rd,ap,yh,ze,He,H,at,q,ie,wI,Nt,x,Uv,C,R,I4,dt);if(nd&&(Au=nd.placedGlyphBoxes,Au&&Au.placeable))return Go=!0,Cn=nd.shift,Au}Ca?Ca=null:wI=ye}return v&&!Au&&(Au={box:this.collisionIndex.placeCollisionBox(zv,"always",H,at,q,He,ze,C,ie.predicate,dt,void 0,Vt).box,offscreen:!1,placeable:!1,occluded:!1}),Au};ip(()=>Ba(zv,xr.iconBox,i.ao.horizontal),()=>{let Aa=xr.verticalTextBox;return x.allowVerticalPlacement&&(!ei||!ei.placeable)&&Nt.numVerticalGlyphVertices>0&&Aa?Ba(Aa,xr.verticalIconBox,i.ao.vertical):{box:null,occluded:!0,offscreen:null}}),ei&&(Go=ei.placeable,Ji=ei.offscreen);let cc=Ql(ei&&ei.placeable);if(!Go&&this.prevPlacement){let Aa=this.prevPlacement.variableOffsets[Nt.crossTileID];Aa&&(this.variableOffsets[Nt.crossTileID]=Aa,this.markUsedJustification(x,Aa.anchor,Nt,cc))}}}if(Ua=ei,Go=Ua&&Ua.placeable,Ji=Ua&&Ua.offscreen,Nt.useRuntimeCollisionCircles){let Ql=x.text.placedSymbolArray.get(Nt.centerJustifiedTextSymbolIndex),ip=i.ap(x.textSizeData,Q,Ql),vl=T.get("text-padding");ls=this.collisionIndex.placeCollisionCircles(ye,Ql,x.lineVertexArray,x.glyphOffsetArray,ip,q,V,v,He,ie.predicate,Nt.collisionCircleDiameter,vl,C,dt),ls.circles.length&&ls.collisionDetected&&!v&&i.w("Collisions detected, but collision boxes are not shown"),Go=Ie||ls.circles.length>0&&!ls.collisionDetected,Ji=Ji&&ls.offscreen}if(xr.iconFeatureIndex&&(gh=xr.iconFeatureIndex),xr.iconBox){let Ql=ip=>this.collisionIndex.placeCollisionBox(ip,Re,H,at,q,He,ze,R,ie.predicate,dt,Ne&&Cn?Cn:void 0,Vt);Ma&&Ma.placeable&&xr.verticalIconBox?(gl=Ql(xr.verticalIconBox),Fi=gl.placeable):(gl=Ql(xr.iconBox),Fi=gl.placeable),Ji=Ji&&gl.offscreen}let Fv=ve||Nt.numHorizontalGlyphVertices===0&&Nt.numVerticalGlyphVertices===0,tg=ge||Nt.numIconVertices===0;Fv||tg?tg?Fv||(Fi=Fi&&Go):Go=Fi&&Go:Fi=Go=Fi&&Go;let rg=Fi&&gl.placeable;if(Go&&Ua.placeable&&this.collisionIndex.insertCollisionBox(Ua.box,ye,T.get("text-ignore-placement"),x.bucketInstanceId,Ma&&Ma.placeable&&mh?mh:op,ie.ID),rg&&this.collisionIndex.insertCollisionBox(gl.box,Re,T.get("icon-ignore-placement"),x.bucketInstanceId,gh,ie.ID),ls&&Go&&this.collisionIndex.insertCollisionCircles(ls.circles,ye,T.get("text-ignore-placement"),x.bucketInstanceId,op,ie.ID),v&&this.storeCollisionData(x.bucketInstanceId,Dn,xr,Ua,gl,ls),Nt.crossTileID===0)throw new Error("symbolInstance.crossTileID can't be 0");if(x.bucketInstanceId===0)throw new Error("bucket.bucketInstanceId can't be 0");this.placements[Nt.crossTileID]=new tr((Go||ht)&&!(Ua!=null&&Ua.occluded),(Fi||it)&&!(gl!=null&&gl.occluded),Ji||x.justReloaded),d[Nt.crossTileID]=!0};if(Qe){if(s.symbolInstanceStart!==0)throw new Error("bucket.bucketInstanceId should be 0");let Nt=x.getSortedSymbolIndexes(-this.transform.bearingInRadians);for(let xr=Nt.length-1;xr>=0;--xr){let Dn=Nt[xr];Wt(x.symbolInstances.get(Dn),x.collisionArrays[Dn],Dn)}}else for(let Nt=s.symbolInstanceStart;Nt<s.symbolInstanceEnd;Nt++)Wt(x.symbolInstances.get(Nt),x.collisionArrays[Nt],Nt);x.justReloaded=!1}storeCollisionData(s,d,v,x,T,C){if(v.textBox||v.iconBox){let R,q;this.collisionBoxArrays.has(s)?R=this.collisionBoxArrays.get(s):(R=new Map,this.collisionBoxArrays.set(s,R)),R.has(d)?q=R.get(d):(q={text:null,icon:null},R.set(d,q)),v.textBox&&(q.text=x.box),v.iconBox&&(q.icon=T.box)}if(C){let R=this.collisionCircleArrays[s];R===void 0&&(R=this.collisionCircleArrays[s]=[]);for(let q=0;q<C.circles.length;q+=4)R.push(C.circles[q+0]-Gr),R.push(C.circles[q+1]-Gr),R.push(C.circles[q+2]),R.push(C.collisionDetected?1:0)}}markUsedJustification(s,d,v,x){let T;T=x===i.ao.vertical?v.verticalPlacedTextSymbolIndex:{left:v.leftJustifiedTextSymbolIndex,center:v.centerJustifiedTextSymbolIndex,right:v.rightJustifiedTextSymbolIndex}[i.aG(d)];let C=[v.leftJustifiedTextSymbolIndex,v.centerJustifiedTextSymbolIndex,v.rightJustifiedTextSymbolIndex,v.verticalPlacedTextSymbolIndex];for(let R of C)R>=0&&(s.text.placedSymbolArray.get(R).crossTileID=T>=0&&R!==T?0:v.crossTileID)}markUsedOrientation(s,d,v){let x=d===i.ao.horizontal||d===i.ao.horizontalOnly?d:0,T=d===i.ao.vertical?d:0,C=[v.leftJustifiedTextSymbolIndex,v.centerJustifiedTextSymbolIndex,v.rightJustifiedTextSymbolIndex];for(let R of C)s.text.placedSymbolArray.get(R).placedOrientation=x;v.verticalPlacedTextSymbolIndex&&(s.text.placedSymbolArray.get(v.verticalPlacedTextSymbolIndex).placedOrientation=T)}commit(s){this.commitTime=s,this.zoomAtLastRecencyCheck=this.transform.zoom;let d=this.prevPlacement,v=!1;this.prevZoomAdjustment=d?d.zoomAdjustment(this.transform.zoom):0;let x=d?d.symbolFadeChange(s):1,T=d?d.opacities:{},C=d?d.variableOffsets:{},R=d?d.placedOrientations:{};for(let q in this.placements){let V=this.placements[q],H=T[q];H?(this.opacities[q]=new Et(H,x,V.text,V.icon),v=v||V.text!==H.text.placed||V.icon!==H.icon.placed):(this.opacities[q]=new Et(null,x,V.text,V.icon,V.skipFade),v=v||V.text||V.icon)}for(let q in T){let V=T[q];if(!this.opacities[q]){let H=new Et(V,x,!1,!1);H.isHidden()||(this.opacities[q]=H,v=v||V.text.placed||V.icon.placed)}}for(let q in C)this.variableOffsets[q]||!this.opacities[q]||this.opacities[q].isHidden()||(this.variableOffsets[q]=C[q]);for(let q in R)this.placedOrientations[q]||!this.opacities[q]||this.opacities[q].isHidden()||(this.placedOrientations[q]=R[q]);if(d&&d.lastPlacementChangeTime===void 0)throw new Error("Last placement time for previous placement is not defined");v?this.lastPlacementChangeTime=s:typeof this.lastPlacementChangeTime!="number"&&(this.lastPlacementChangeTime=d?d.lastPlacementChangeTime:s)}updateLayerOpacities(s,d){let v={};for(let x of d){let T=x.getBucket(s);T&&x.latestFeatureIndex&&s.id===T.layerIds[0]&&this.updateBucketOpacities(T,x.tileID,v,x.collisionBoxArray)}}updateBucketOpacities(s,d,v,x){s.hasTextData()&&(s.text.opacityVertexArray.clear(),s.text.hasVisibleVertices=!1),s.hasIconData()&&(s.icon.opacityVertexArray.clear(),s.icon.hasVisibleVertices=!1),s.hasIconCollisionBoxData()&&s.iconCollisionBox.collisionVertexArray.clear(),s.hasTextCollisionBoxData()&&s.textCollisionBox.collisionVertexArray.clear();let T=s.layers[0],C=T.layout,R=new Et(null,0,!1,!1,!0),q=C.get("text-allow-overlap"),V=C.get("icon-allow-overlap"),H=T._unevaluatedLayout.hasValue("text-variable-anchor")||T._unevaluatedLayout.hasValue("text-variable-anchor-offset"),Y=C.get("text-rotation-alignment")==="map",W=C.get("text-pitch-alignment")==="map",Q=C.get("icon-text-fit")!=="none",ie=new Et(null,0,q&&(V||!s.hasIconData()||C.get("icon-optional")),V&&(q||!s.hasTextData()||C.get("text-optional")),!0);!s.collisionArrays&&x&&(s.hasIconCollisionBoxData()||s.hasTextCollisionBoxData())&&s.deserializeCollisionBoxes(x);let ve=(ye,Ie,Re)=>{for(let Pe=0;Pe<Ie/4;Pe++)ye.opacityVertexArray.emplaceBack(Re);ye.hasVisibleVertices=ye.hasVisibleVertices||Re!==tn},ge=this.collisionBoxArrays.get(s.bucketInstanceId);for(let ye=0;ye<s.symbolInstances.length;ye++){let Ie=s.symbolInstances.get(ye),{numHorizontalGlyphVertices:Re,numVerticalGlyphVertices:Pe,crossTileID:ze}=Ie,He=this.opacities[ze];v[ze]?He=R:He||(He=ie,this.opacities[ze]=He),v[ze]=!0;let Ne=Ie.numIconVertices>0,Qe=this.placedOrientations[Ie.crossTileID],ht=Qe===i.ao.vertical,it=Qe===i.ao.horizontal||Qe===i.ao.horizontalOnly;if(Re>0||Pe>0){let dt=gn(He.text);ve(s.text,Re,ht?tn:dt),ve(s.text,Pe,it?tn:dt);let Vt=He.text.isHidden();[Ie.rightJustifiedTextSymbolIndex,Ie.centerJustifiedTextSymbolIndex,Ie.leftJustifiedTextSymbolIndex].forEach(xr=>{xr>=0&&(s.text.placedSymbolArray.get(xr).hidden=Vt||ht?1:0)}),Ie.verticalPlacedTextSymbolIndex>=0&&(s.text.placedSymbolArray.get(Ie.verticalPlacedTextSymbolIndex).hidden=Vt||it?1:0);let Wt=this.variableOffsets[Ie.crossTileID];Wt&&this.markUsedJustification(s,Wt.anchor,Ie,Qe);let Nt=this.placedOrientations[Ie.crossTileID];Nt&&(this.markUsedJustification(s,"left",Ie,Nt),this.markUsedOrientation(s,Nt,Ie))}if(Ne){let dt=gn(He.icon),Vt=!(Q&&Ie.verticalPlacedIconSymbolIndex&&ht);Ie.placedIconSymbolIndex>=0&&(ve(s.icon,Ie.numIconVertices,Vt?dt:tn),s.icon.placedSymbolArray.get(Ie.placedIconSymbolIndex).hidden=He.icon.isHidden()),Ie.verticalPlacedIconSymbolIndex>=0&&(ve(s.icon,Ie.numVerticalIconVertices,Vt?tn:dt),s.icon.placedSymbolArray.get(Ie.verticalPlacedIconSymbolIndex).hidden=He.icon.isHidden())}let at=ge&&ge.has(ye)?ge.get(ye):{text:null,icon:null};if(s.hasIconCollisionBoxData()||s.hasTextCollisionBoxData()){let dt=s.collisionArrays[ye];if(dt){let Vt=new i.P(0,0);if(dt.textBox||dt.verticalTextBox){let Wt=!0;if(H){let Nt=this.variableOffsets[ze];Nt?(Vt=po(Nt.anchor,Nt.width,Nt.height,Nt.textOffset,Nt.textBoxScale),Y&&Vt._rotate(W?-this.transform.bearingInRadians:this.transform.bearingInRadians)):Wt=!1}if(dt.textBox||dt.verticalTextBox){let Nt;dt.textBox&&(Nt=ht),dt.verticalTextBox&&(Nt=it),Kl(s.textCollisionBox.collisionVertexArray,He.text.placed,!Wt||Nt,at.text,Vt.x,Vt.y)}}if(dt.iconBox||dt.verticalIconBox){let Wt=!!(!it&&dt.verticalIconBox),Nt;dt.iconBox&&(Nt=Wt),dt.verticalIconBox&&(Nt=!Wt),Kl(s.iconCollisionBox.collisionVertexArray,He.icon.placed,Nt,at.icon,Q?Vt.x:0,Q?Vt.y:0)}}}}if(s.sortFeatures(-this.transform.bearingInRadians),this.retainedQueryData[s.bucketInstanceId]&&(this.retainedQueryData[s.bucketInstanceId].featureSortOrder=s.featureSortOrder),s.hasTextData()&&s.text.opacityVertexBuffer&&s.text.opacityVertexBuffer.updateData(s.text.opacityVertexArray),s.hasIconData()&&s.icon.opacityVertexBuffer&&s.icon.opacityVertexBuffer.updateData(s.icon.opacityVertexArray),s.hasIconCollisionBoxData()&&s.iconCollisionBox.collisionVertexBuffer&&s.iconCollisionBox.collisionVertexBuffer.updateData(s.iconCollisionBox.collisionVertexArray),s.hasTextCollisionBoxData()&&s.textCollisionBox.collisionVertexBuffer&&s.textCollisionBox.collisionVertexBuffer.updateData(s.textCollisionBox.collisionVertexArray),s.text.opacityVertexArray.length!==s.text.layoutVertexArray.length/4)throw new Error(`bucket.text.opacityVertexArray.length (= ${s.text.opacityVertexArray.length}) !== bucket.text.layoutVertexArray.length (= ${s.text.layoutVertexArray.length}) / 4`);if(s.icon.opacityVertexArray.length!==s.icon.layoutVertexArray.length/4)throw new Error(`bucket.icon.opacityVertexArray.length (= ${s.icon.opacityVertexArray.length}) !== bucket.icon.layoutVertexArray.length (= ${s.icon.layoutVertexArray.length}) / 4`);s.bucketInstanceId in this.collisionCircleArrays&&(s.collisionCircleArray=this.collisionCircleArrays[s.bucketInstanceId],delete this.collisionCircleArrays[s.bucketInstanceId])}symbolFadeChange(s){return this.fadeDuration===0?1:(s-this.commitTime)/this.fadeDuration+this.prevZoomAdjustment}zoomAdjustment(s){return Math.max(0,(this.transform.zoom-s)/1.5)}hasTransitions(s){return this.stale||s-this.lastPlacementChangeTime<this.fadeDuration}stillRecent(s,d){let v=this.zoomAtLastRecencyCheck===d?1-this.zoomAdjustment(d):1;return this.zoomAtLastRecencyCheck=d,this.commitTime+this.fadeDuration*v>s}setStale(){this.stale=!0}}function Kl(S,s,d,v,x,T){v&&v.length!==0||(v=[0,0,0,0]);let C=v[0]-Gr,R=v[1]-Gr,q=v[2]-Gr,V=v[3]-Gr;S.emplaceBack(s?1:0,d?1:0,x||0,T||0,C,R),S.emplaceBack(s?1:0,d?1:0,x||0,T||0,q,R),S.emplaceBack(s?1:0,d?1:0,x||0,T||0,q,V),S.emplaceBack(s?1:0,d?1:0,x||0,T||0,C,V)}let Fs=Math.pow(2,25),Kc=Math.pow(2,24),wo=Math.pow(2,17),Kn=Math.pow(2,16),oi=Math.pow(2,9),fo=Math.pow(2,8),Zr=Math.pow(2,1);function gn(S){if(S.opacity===0&&!S.placed)return 0;if(S.opacity===1&&S.placed)return 4294967295;let s=S.placed?1:0,d=Math.floor(127*S.opacity);return d*Fs+s*Kc+d*wo+s*Kn+d*oi+s*fo+d*Zr+s}let tn=0;class xn{constructor(s){this._sortAcrossTiles=s.layout.get("symbol-z-order")!=="viewport-y"&&!s.layout.get("symbol-sort-key").isConstant(),this._currentTileIndex=0,this._currentPartIndex=0,this._seenCrossTileIDs={},this._bucketParts=[]}continuePlacement(s,d,v,x,T){let C=this._bucketParts;for(;this._currentTileIndex<s.length;)if(d.getBucketParts(C,x,s[this._currentTileIndex],this._sortAcrossTiles),this._currentTileIndex++,T())return!0;for(this._sortAcrossTiles&&(this._sortAcrossTiles=!1,C.sort((R,q)=>R.sortKey-q.sortKey));this._currentPartIndex<C.length;)if(d.placeLayerBucketPart(C[this._currentPartIndex],this._seenCrossTileIDs,v),this._currentPartIndex++,T())return!0;return!1}}class Bn{constructor(s,d,v,x,T,C,R,q){this.placement=new so(s,d,C,R,q),this._currentPlacementIndex=v.length-1,this._forceFullPlacement=x,this._showCollisionBoxes=T,this._done=!1}isDone(){return this._done}continuePlacement(s,d,v){let x=y.now(),T=()=>!this._forceFullPlacement&&y.now()-x>2;for(;this._currentPlacementIndex>=0;){let C=d[s[this._currentPlacementIndex]],R=this.placement.collisionIndex.transform.zoom;if(C.type==="symbol"&&(!C.minzoom||C.minzoom<=R)&&(!C.maxzoom||C.maxzoom>R)){if(this._inProgressLayer||(this._inProgressLayer=new xn(C)),this._inProgressLayer.continuePlacement(v[C.source],this.placement,this._showCollisionBoxes,C,T))return;delete this._inProgressLayer}this._currentPlacementIndex--}this._done=!0}commit(s){return this.placement.commit(s),this.placement}}let Ur=512/i.$/2;class lo{constructor(s,d,v){this.tileID=s,this.bucketInstanceId=v,this._symbolsByKey={};let x=new Map;for(let T=0;T<d.length;T++){let C=d.get(T),R=C.key,q=x.get(R);q?q.push(C):x.set(R,[C])}for(let[T,C]of x){let R={positions:C.map(q=>({x:Math.floor(q.anchorX*Ur),y:Math.floor(q.anchorY*Ur)})),crossTileIDs:C.map(q=>q.crossTileID)};if(R.positions.length>128){let q=new i.aI(R.positions.length,16,Uint16Array);for(let{x:V,y:H}of R.positions)q.add(V,H);q.finish(),delete R.positions,R.index=q}this._symbolsByKey[T]=R}}getScaledCoordinates(s,d){let{x:v,y:x,z:T}=this.tileID.canonical,{x:C,y:R,z:q}=d.canonical,V=Ur/Math.pow(2,q-T),H=(R*i.$+s.anchorY)*V,Y=x*i.$*Ur;return{x:Math.floor((C*i.$+s.anchorX)*V-v*i.$*Ur),y:Math.floor(H-Y)}}findMatches(s,d,v){let x=this.tileID.canonical.z<d.canonical.z?1:Math.pow(2,this.tileID.canonical.z-d.canonical.z);for(let T=0;T<s.length;T++){let C=s.get(T);if(C.crossTileID)continue;let R=this._symbolsByKey[C.key];if(!R)continue;let q=this.getScaledCoordinates(C,d);if(R.index){let V=R.index.range(q.x-x,q.y-x,q.x+x,q.y+x).sort();for(let H of V){let Y=R.crossTileIDs[H];if(!v[Y]){v[Y]=!0,C.crossTileID=Y;break}}}else if(R.positions)for(let V=0;V<R.positions.length;V++){let H=R.positions[V],Y=R.crossTileIDs[V];if(Math.abs(H.x-q.x)<=x&&Math.abs(H.y-q.y)<=x&&!v[Y]){v[Y]=!0,C.crossTileID=Y;break}}}}getCrossTileIDsLists(){return Object.values(this._symbolsByKey).map(({crossTileIDs:s})=>s)}}class Hn{constructor(){this.maxCrossTileID=0}generate(){return++this.maxCrossTileID}}class zo{constructor(){this.indexes={},this.usedCrossTileIDs={},this.lng=0}handleWrapJump(s){let d=Math.round((s-this.lng)/360);if(d!==0)for(let v in this.indexes){let x=this.indexes[v],T={};for(let C in x){let R=x[C];R.tileID=R.tileID.unwrapTo(R.tileID.wrap+d),T[R.tileID.key]=R}this.indexes[v]=T}this.lng=s}addBucket(s,d,v){if(this.indexes[s.overscaledZ]&&this.indexes[s.overscaledZ][s.key]){if(this.indexes[s.overscaledZ][s.key].bucketInstanceId===d.bucketInstanceId)return!1;this.removeBucketCrossTileIDs(s.overscaledZ,this.indexes[s.overscaledZ][s.key])}for(let T=0;T<d.symbolInstances.length;T++)d.symbolInstances.get(T).crossTileID=0;this.usedCrossTileIDs[s.overscaledZ]||(this.usedCrossTileIDs[s.overscaledZ]={});let x=this.usedCrossTileIDs[s.overscaledZ];for(let T in this.indexes){let C=this.indexes[T];if(Number(T)>s.overscaledZ)for(let R in C){let q=C[R];q.tileID.isChildOf(s)&&q.findMatches(d.symbolInstances,s,x)}else{let R=C[s.scaledTo(Number(T)).key];R&&R.findMatches(d.symbolInstances,s,x)}}for(let T=0;T<d.symbolInstances.length;T++){let C=d.symbolInstances.get(T);C.crossTileID||(C.crossTileID=v.generate(),x[C.crossTileID]=!0)}return this.indexes[s.overscaledZ]===void 0&&(this.indexes[s.overscaledZ]={}),this.indexes[s.overscaledZ][s.key]=new lo(s,d.symbolInstances,d.bucketInstanceId),!0}removeBucketCrossTileIDs(s,d){for(let v of d.getCrossTileIDsLists())for(let x of v)delete this.usedCrossTileIDs[s][x]}removeStaleBuckets(s){let d=!1;for(let v in this.indexes){let x=this.indexes[v];for(let T in x)s[x[T].bucketInstanceId]||(this.removeBucketCrossTileIDs(v,x[T]),delete x[T],d=!0)}return d}}class $n{constructor(){this.layerIndexes={},this.crossTileIDs=new Hn,this.maxBucketInstanceId=0,this.bucketsInCurrentPlacement={}}addLayer(s,d,v){let x=this.layerIndexes[s.id];x===void 0&&(x=this.layerIndexes[s.id]=new zo);let T=!1,C={};x.handleWrapJump(v);for(let R of d){let q=R.getBucket(s);q&&s.id===q.layerIds[0]&&(q.bucketInstanceId||(q.bucketInstanceId=++this.maxBucketInstanceId),x.addBucket(R.tileID,q,this.crossTileIDs)&&(T=!0),C[q.bucketInstanceId]=!0)}return x.removeStaleBuckets(C)&&(T=!0),T}pruneUnusedLayers(s){let d={};s.forEach(v=>{d[v]=!0});for(let v in this.layerIndexes)d[v]||delete this.layerIndexes[v]}}var Zi="void main() {fragColor=vec4(1.0);}";let Vo={prelude:$r(`#ifdef GL_ES
precision mediump float;
#else
#if !defined(lowp)
#define lowp
#endif
#if !defined(mediump)
#define mediump
#endif
#if !defined(highp)
#define highp
#endif
#endif
out highp vec4 fragColor;`,`#ifdef GL_ES
precision highp float;
#else
#if !defined(lowp)
#define lowp
#endif
#if !defined(mediump)
#define mediump
#endif
#if !defined(highp)
#define highp
#endif
#endif
vec2 unpack_float(const float packedValue) {int packedIntValue=int(packedValue);int v0=packedIntValue/256;return vec2(v0,packedIntValue-v0*256);}vec2 unpack_opacity(const float packedOpacity) {int intOpacity=int(packedOpacity)/2;return vec2(float(intOpacity)/127.0,mod(packedOpacity,2.0));}vec4 decode_color(const vec2 encodedColor) {return vec4(unpack_float(encodedColor[0])/255.0,unpack_float(encodedColor[1])/255.0
);}float unpack_mix_vec2(const vec2 packedValue,const float t) {return mix(packedValue[0],packedValue[1],t);}vec4 unpack_mix_color(const vec4 packedColors,const float t) {vec4 minColor=decode_color(vec2(packedColors[0],packedColors[1]));vec4 maxColor=decode_color(vec2(packedColors[2],packedColors[3]));return mix(minColor,maxColor,t);}vec2 get_pattern_pos(const vec2 pixel_coord_upper,const vec2 pixel_coord_lower,const vec2 pattern_size,const float tile_units_to_pixels,const vec2 pos) {vec2 offset=mod(mod(mod(pixel_coord_upper,pattern_size)*256.0,pattern_size)*256.0+pixel_coord_lower,pattern_size);return (tile_units_to_pixels*pos+offset)/pattern_size;}mat3 rotationMatrixFromAxisAngle(vec3 u,float angle) {float c=cos(angle);float s=sin(angle);float c2=1.0-c;return mat3(u.x*u.x*c2+      c,u.x*u.y*c2-u.z*s,u.x*u.z*c2+u.y*s,u.y*u.x*c2+u.z*s,u.y*u.y*c2+    c,u.y*u.z*c2-u.x*s,u.z*u.x*c2-u.y*s,u.z*u.y*c2+u.x*s,u.z*u.z*c2+    c
);}
#ifdef TERRAIN3D
uniform sampler2D u_terrain;uniform float u_terrain_dim;uniform mat4 u_terrain_matrix;uniform vec4 u_terrain_unpack;uniform float u_terrain_exaggeration;uniform highp sampler2D u_depth;
#endif
const highp vec4 bitSh=vec4(256.*256.*256.,256.*256.,256.,1.);const highp vec4 bitShifts=vec4(1.)/bitSh;highp float unpack(highp vec4 color) {return dot(color,bitShifts);}highp float depthOpacity(vec3 frag) {
#ifdef TERRAIN3D
highp float d=unpack(texture(u_depth,frag.xy*0.5+0.5))+0.0001-frag.z;return 1.0-max(0.0,min(1.0,-d*500.0));
#else
return 1.0;
#endif
}float calculate_visibility(vec4 pos) {
#ifdef TERRAIN3D
vec3 frag=pos.xyz/pos.w;highp float d=depthOpacity(frag);if (d > 0.95) return 1.0;return (d+depthOpacity(frag+vec3(0.0,0.01,0.0)))/2.0;
#else
return 1.0;
#endif
}float ele(vec2 pos) {
#ifdef TERRAIN3D
vec4 rgb=(texture(u_terrain,pos)*255.0)*u_terrain_unpack;return rgb.r+rgb.g+rgb.b-u_terrain_unpack.a;
#else
return 0.0;
#endif
}float get_elevation(vec2 pos) {
#ifdef TERRAIN3D
#ifdef GLOBE
if ((pos.y <-32767.5) || (pos.y > 32766.5)) {return 0.0;}
#endif
vec2 coord=(u_terrain_matrix*vec4(pos,0.0,1.0)).xy*u_terrain_dim+1.0;vec2 f=fract(coord);vec2 c=(floor(coord)+0.5)/(u_terrain_dim+2.0);float d=1.0/(u_terrain_dim+2.0);float tl=ele(c);float tr=ele(c+vec2(d,0.0));float bl=ele(c+vec2(0.0,d));float br=ele(c+vec2(d,d));float elevation=mix(mix(tl,tr,f.x),mix(bl,br,f.x),f.y);return elevation*u_terrain_exaggeration;
#else
return 0.0;
#endif
}const float PI=3.141592653589793;uniform mat4 u_projection_matrix;`),projectionMercator:$r("","float projectLineThickness(float tileY) {return 1.0;}float projectCircleRadius(float tileY) {return 1.0;}vec4 projectTile(vec2 p) {vec4 result=u_projection_matrix*vec4(p,0.0,1.0);return result;}vec4 projectTile(vec2 p,vec2 rawPos) {vec4 result=u_projection_matrix*vec4(p,0.0,1.0);if (rawPos.y <-32767.5 || rawPos.y > 32766.5) {result.z=-10000000.0;}return result;}vec4 projectTileWithElevation(vec2 posInTile,float elevation) {return u_projection_matrix*vec4(posInTile,elevation,1.0);}vec4 projectTileFor3D(vec2 posInTile,float elevation) {return projectTileWithElevation(posInTile,elevation);}"),projectionGlobe:$r("",`#define GLOBE_RADIUS 6371008.8
uniform highp vec4 u_projection_tile_mercator_coords;uniform highp vec4 u_projection_clipping_plane;uniform highp float u_projection_transition;uniform mat4 u_projection_fallback_matrix;vec3 globeRotateVector(vec3 vec,vec2 angles) {vec3 axisRight=vec3(vec.z,0.0,-vec.x);vec3 axisUp=cross(axisRight,vec);axisRight=normalize(axisRight);axisUp=normalize(axisUp);vec2 t=tan(angles);return normalize(vec+axisRight*t.x+axisUp*t.y);}mat3 globeGetRotationMatrix(vec3 spherePos) {vec3 axisRight=vec3(spherePos.z,0.0,-spherePos.x);vec3 axisDown=cross(axisRight,spherePos);axisRight=normalize(axisRight);axisDown=normalize(axisDown);return mat3(axisRight,axisDown,spherePos
);}float circumferenceRatioAtTileY(float tileY) {float mercator_pos_y=u_projection_tile_mercator_coords.y+u_projection_tile_mercator_coords.w*tileY;float spherical_y=2.0*atan(exp(PI-(mercator_pos_y*PI*2.0)))-PI*0.5;return cos(spherical_y);}float projectLineThickness(float tileY) {float thickness=1.0/circumferenceRatioAtTileY(tileY); 
if (u_projection_transition < 0.999) {return mix(1.0,thickness,u_projection_transition);} else {return thickness;}}vec3 projectToSphere(vec2 translatedPos,vec2 rawPos) {vec2 mercator_pos=u_projection_tile_mercator_coords.xy+u_projection_tile_mercator_coords.zw*translatedPos;vec2 spherical;spherical.x=mercator_pos.x*PI*2.0+PI;spherical.y=2.0*atan(exp(PI-(mercator_pos.y*PI*2.0)))-PI*0.5;float len=cos(spherical.y);vec3 pos=vec3(sin(spherical.x)*len,sin(spherical.y),cos(spherical.x)*len
);if (rawPos.y <-32767.5) {pos=vec3(0.0,1.0,0.0);}if (rawPos.y > 32766.5) {pos=vec3(0.0,-1.0,0.0);}return pos;}vec3 projectToSphere(vec2 posInTile) {return projectToSphere(posInTile,vec2(0.0,0.0));}float globeComputeClippingZ(vec3 spherePos) {return (1.0-(dot(spherePos,u_projection_clipping_plane.xyz)+u_projection_clipping_plane.w));}vec4 interpolateProjection(vec2 posInTile,vec3 spherePos,float elevation) {vec3 elevatedPos=spherePos*(1.0+elevation/GLOBE_RADIUS);vec4 globePosition=u_projection_matrix*vec4(elevatedPos,1.0);globePosition.z=globeComputeClippingZ(elevatedPos)*globePosition.w;if (u_projection_transition > 0.999) {return globePosition;}vec4 flatPosition=u_projection_fallback_matrix*vec4(posInTile,elevation,1.0);const float z_globeness_threshold=0.2;vec4 result=globePosition;result.z=mix(0.0,globePosition.z,clamp((u_projection_transition-z_globeness_threshold)/(1.0-z_globeness_threshold),0.0,1.0));result.xyw=mix(flatPosition.xyw,globePosition.xyw,u_projection_transition);if ((posInTile.y <-32767.5) || (posInTile.y > 32766.5)) {result=globePosition;const float poles_hidden_anim_percentage=0.02;result.z=mix(globePosition.z,100.0,pow(max((1.0-u_projection_transition)/poles_hidden_anim_percentage,0.0),8.0));}return result;}vec4 interpolateProjectionFor3D(vec2 posInTile,vec3 spherePos,float elevation) {vec3 elevatedPos=spherePos*(1.0+elevation/GLOBE_RADIUS);vec4 globePosition=u_projection_matrix*vec4(elevatedPos,1.0);if (u_projection_transition > 0.999) {return globePosition;}vec4 fallbackPosition=u_projection_fallback_matrix*vec4(posInTile,elevation,1.0);return mix(fallbackPosition,globePosition,u_projection_transition);}vec4 projectTile(vec2 posInTile) {return interpolateProjection(posInTile,projectToSphere(posInTile),0.0);}vec4 projectTile(vec2 posInTile,vec2 rawPos) {return interpolateProjection(posInTile,projectToSphere(posInTile,rawPos),0.0);}vec4 projectTileWithElevation(vec2 posInTile,float elevation) {return interpolateProjection(posInTile,projectToSphere(posInTile),elevation);}vec4 projectTileFor3D(vec2 posInTile,float elevation) {vec3 spherePos=projectToSphere(posInTile,posInTile);return interpolateProjectionFor3D(posInTile,spherePos,elevation);}`),background:$r(`uniform vec4 u_color;uniform float u_opacity;void main() {fragColor=u_color*u_opacity;
#ifdef OVERDRAW_INSPECTOR
fragColor=vec4(1.0);
#endif
}`,"in vec2 a_pos;void main() {gl_Position=projectTile(a_pos);}"),backgroundPattern:$r(`uniform vec2 u_pattern_tl_a;uniform vec2 u_pattern_br_a;uniform vec2 u_pattern_tl_b;uniform vec2 u_pattern_br_b;uniform vec2 u_texsize;uniform float u_mix;uniform float u_opacity;uniform sampler2D u_image;in vec2 v_pos_a;in vec2 v_pos_b;void main() {vec2 imagecoord=mod(v_pos_a,1.0);vec2 pos=mix(u_pattern_tl_a/u_texsize,u_pattern_br_a/u_texsize,imagecoord);vec4 color1=texture(u_image,pos);vec2 imagecoord_b=mod(v_pos_b,1.0);vec2 pos2=mix(u_pattern_tl_b/u_texsize,u_pattern_br_b/u_texsize,imagecoord_b);vec4 color2=texture(u_image,pos2);fragColor=mix(color1,color2,u_mix)*u_opacity;
#ifdef OVERDRAW_INSPECTOR
fragColor=vec4(1.0);
#endif
}`,"uniform vec2 u_pattern_size_a;uniform vec2 u_pattern_size_b;uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform float u_scale_a;uniform float u_scale_b;uniform float u_tile_units_to_pixels;in vec2 a_pos;out vec2 v_pos_a;out vec2 v_pos_b;void main() {gl_Position=projectTile(a_pos);v_pos_a=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,u_scale_a*u_pattern_size_a,u_tile_units_to_pixels,a_pos);v_pos_b=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,u_scale_b*u_pattern_size_b,u_tile_units_to_pixels,a_pos);}"),circle:$r(`in vec3 v_data;in float v_visibility;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define mediump float radius
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define highp vec4 stroke_color
#pragma mapbox: define mediump float stroke_width
#pragma mapbox: define lowp float stroke_opacity
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize mediump float radius
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize highp vec4 stroke_color
#pragma mapbox: initialize mediump float stroke_width
#pragma mapbox: initialize lowp float stroke_opacity
vec2 extrude=v_data.xy;float extrude_length=length(extrude);float antialiased_blur=v_data.z;float opacity_t=smoothstep(0.0,antialiased_blur,extrude_length-1.0);float color_t=stroke_width < 0.01 ? 0.0 : smoothstep(antialiased_blur,0.0,extrude_length-radius/(radius+stroke_width));fragColor=v_visibility*opacity_t*mix(color*opacity,stroke_color*stroke_opacity,color_t);const float epsilon=0.5/255.0;if (fragColor.r < epsilon && fragColor.g < epsilon && fragColor.b < epsilon && fragColor.a < epsilon) {discard;}
#ifdef OVERDRAW_INSPECTOR
fragColor=vec4(1.0);
#endif
}`,`uniform bool u_scale_with_map;uniform bool u_pitch_with_map;uniform vec2 u_extrude_scale;uniform highp float u_globe_extrude_scale;uniform lowp float u_device_pixel_ratio;uniform highp float u_camera_to_center_distance;uniform vec2 u_translate;in vec2 a_pos;out vec3 v_data;out float v_visibility;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define mediump float radius
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define highp vec4 stroke_color
#pragma mapbox: define mediump float stroke_width
#pragma mapbox: define lowp float stroke_opacity
void main(void) {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize mediump float radius
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize highp vec4 stroke_color
#pragma mapbox: initialize mediump float stroke_width
#pragma mapbox: initialize lowp float stroke_opacity
vec2 pos_raw=a_pos+32768.0;vec2 extrude=vec2(mod(pos_raw,8.0)/7.0*2.0-1.0);vec2 circle_center=floor(pos_raw/8.0)+u_translate;float ele=get_elevation(circle_center);v_visibility=calculate_visibility(projectTileWithElevation(circle_center,ele));if (u_pitch_with_map) {
#ifdef GLOBE
vec3 center_vector=projectToSphere(circle_center);
#endif
float angle_scale=u_globe_extrude_scale;vec2 corner_position=circle_center;if (u_scale_with_map) {angle_scale*=(radius+stroke_width);corner_position+=extrude*u_extrude_scale*(radius+stroke_width);} else {
#ifdef GLOBE
vec4 projected_center=interpolateProjection(circle_center,center_vector,ele);
#else
vec4 projected_center=projectTileWithElevation(circle_center,ele);
#endif
corner_position+=extrude*u_extrude_scale*(radius+stroke_width)*(projected_center.w/u_camera_to_center_distance);angle_scale*=(radius+stroke_width)*(projected_center.w/u_camera_to_center_distance);}
#ifdef GLOBE
vec2 angles=extrude*angle_scale;vec3 corner_vector=globeRotateVector(center_vector,angles);gl_Position=interpolateProjection(corner_position,corner_vector,ele);
#else
gl_Position=projectTileWithElevation(corner_position,ele);
#endif
} else {gl_Position=projectTileWithElevation(circle_center,ele);if (gl_Position.z/gl_Position.w > 1.0) {gl_Position.xy=vec2(10000.0);}if (u_scale_with_map) {gl_Position.xy+=extrude*(radius+stroke_width)*u_extrude_scale*u_camera_to_center_distance;} else {gl_Position.xy+=extrude*(radius+stroke_width)*u_extrude_scale*gl_Position.w;}}float antialiasblur=-max(1.0/u_device_pixel_ratio/(radius+stroke_width),blur);v_data=vec3(extrude.x,extrude.y,antialiasblur);}`),clippingMask:$r(Zi,"in vec2 a_pos;void main() {gl_Position=projectTile(a_pos);}"),heatmap:$r(`uniform highp float u_intensity;in vec2 v_extrude;
#pragma mapbox: define highp float weight
#define GAUSS_COEF 0.3989422804014327
void main() {
#pragma mapbox: initialize highp float weight
float d=-0.5*3.0*3.0*dot(v_extrude,v_extrude);float val=weight*u_intensity*GAUSS_COEF*exp(d);fragColor=vec4(val,1.0,1.0,1.0);
#ifdef OVERDRAW_INSPECTOR
fragColor=vec4(1.0);
#endif
}`,`uniform float u_extrude_scale;uniform float u_opacity;uniform float u_intensity;uniform highp float u_globe_extrude_scale;in vec2 a_pos;out vec2 v_extrude;
#pragma mapbox: define highp float weight
#pragma mapbox: define mediump float radius
const highp float ZERO=1.0/255.0/16.0;
#define GAUSS_COEF 0.3989422804014327
void main(void) {
#pragma mapbox: initialize highp float weight
#pragma mapbox: initialize mediump float radius
vec2 pos_raw=a_pos+32768.0;vec2 unscaled_extrude=vec2(mod(pos_raw,8.0)/7.0*2.0-1.0);float S=sqrt(-2.0*log(ZERO/weight/u_intensity/GAUSS_COEF))/3.0;v_extrude=S*unscaled_extrude;vec2 extrude=v_extrude*radius*u_extrude_scale;vec2 circle_center=floor(pos_raw/8.0);
#ifdef GLOBE
vec2 angles=v_extrude*radius*u_globe_extrude_scale;vec3 center_vector=projectToSphere(circle_center);vec3 corner_vector=globeRotateVector(center_vector,angles);gl_Position=interpolateProjection(circle_center+extrude,corner_vector,0.0);
#else
gl_Position=projectTileFor3D(circle_center+extrude,get_elevation(circle_center));
#endif
}`),heatmapTexture:$r(`uniform sampler2D u_image;uniform sampler2D u_color_ramp;uniform float u_opacity;in vec2 v_pos;void main() {float t=texture(u_image,v_pos).r;vec4 color=texture(u_color_ramp,vec2(t,0.5));fragColor=color*u_opacity;
#ifdef OVERDRAW_INSPECTOR
fragColor=vec4(0.0);
#endif
}`,"uniform mat4 u_matrix;uniform vec2 u_world;in vec2 a_pos;out vec2 v_pos;void main() {gl_Position=u_matrix*vec4(a_pos*u_world,0,1);v_pos.x=a_pos.x;v_pos.y=1.0-a_pos.y;}"),collisionBox:$r("in float v_placed;in float v_notUsed;void main() {float alpha=0.5;fragColor=vec4(1.0,0.0,0.0,1.0)*alpha;if (v_placed > 0.5) {fragColor=vec4(0.0,0.0,1.0,0.5)*alpha;}if (v_notUsed > 0.5) {fragColor*=.1;}}","in vec2 a_anchor_pos;in vec2 a_placed;in vec2 a_box_real;uniform vec2 u_pixel_extrude_scale;out float v_placed;out float v_notUsed;void main() {gl_Position=projectTileWithElevation(a_anchor_pos,get_elevation(a_anchor_pos));gl_Position.xy=((a_box_real+0.5)*u_pixel_extrude_scale*2.0-1.0)*vec2(1.0,-1.0)*gl_Position.w;if (gl_Position.z/gl_Position.w < 1.1) {gl_Position.z=0.5;}v_placed=a_placed.x;v_notUsed=a_placed.y;}"),collisionCircle:$r("in float v_radius;in vec2 v_extrude;in float v_collision;void main() {float alpha=0.5;float stroke_radius=0.9;float distance_to_center=length(v_extrude);float distance_to_edge=abs(distance_to_center-v_radius);float opacity_t=smoothstep(-stroke_radius,0.0,-distance_to_edge);vec4 color=mix(vec4(0.0,0.0,1.0,0.5),vec4(1.0,0.0,0.0,1.0),v_collision);fragColor=color*alpha*opacity_t;}","in vec2 a_pos;in float a_radius;in vec2 a_flags;uniform vec2 u_viewport_size;out float v_radius;out vec2 v_extrude;out float v_collision;void main() {float radius=a_radius;float collision=a_flags.x;float vertexIdx=a_flags.y;vec2 quadVertexOffset=vec2(mix(-1.0,1.0,float(vertexIdx >=2.0)),mix(-1.0,1.0,float(vertexIdx >=1.0 && vertexIdx <=2.0)));vec2 quadVertexExtent=quadVertexOffset*radius;float padding_factor=1.2;v_radius=radius;v_extrude=quadVertexExtent*padding_factor;v_collision=collision;gl_Position=vec4((a_pos/u_viewport_size*2.0-1.0)*vec2(1.0,-1.0),0.0,1.0)+vec4(quadVertexExtent*padding_factor/u_viewport_size*2.0,0.0,0.0);}"),colorRelief:$r(`#ifdef GL_ES
precision highp float;
#endif
uniform sampler2D u_image;uniform vec4 u_unpack;uniform sampler2D u_elevation_stops;uniform sampler2D u_color_stops;uniform int u_color_ramp_size;uniform float u_opacity;in vec2 v_pos;float getElevation(vec2 coord) {vec4 data=texture(u_image,coord)*255.0;data.a=-1.0;return dot(data,u_unpack);}float getElevationStop(int stop) {float x=(float(stop)+0.5)/float(u_color_ramp_size);vec4 data=texture(u_elevation_stops,vec2(x,0))*255.0;data.a=-1.0;return dot(data,u_unpack);}void main() {float el=getElevation(v_pos);int r=(u_color_ramp_size-1);int l=0;float el_l=getElevationStop(l);float el_r=getElevationStop(r);while(r-l > 1){int m=(r+l)/2;float el_m=getElevationStop(m);if(el < el_m){r=m;el_r=el_m;}else
{l=m;el_l=el_m;}}float x=(float(l)+(el-el_l)/(el_r-el_l)+0.5)/float(u_color_ramp_size);fragColor=u_opacity*texture(u_color_stops,vec2(x,0));
#ifdef OVERDRAW_INSPECTOR
fragColor=vec4(1.0);
#endif
}`,"uniform vec2 u_dimension;in vec2 a_pos;out vec2 v_pos;void main() {gl_Position=projectTile(a_pos,a_pos);highp vec2 epsilon=1.0/u_dimension;float scale=(u_dimension.x-2.0)/u_dimension.x;v_pos=(a_pos/8192.0)*scale+epsilon;if (a_pos.y <-32767.5) {v_pos.y=0.0;}if (a_pos.y > 32766.5) {v_pos.y=1.0;}}"),debug:$r("uniform highp vec4 u_color;uniform sampler2D u_overlay;in vec2 v_uv;void main() {vec4 overlay_color=texture(u_overlay,v_uv);fragColor=mix(u_color,overlay_color,overlay_color.a);}","in vec2 a_pos;out vec2 v_uv;uniform float u_overlay_scale;void main() {v_uv=a_pos/8192.0;gl_Position=projectTileWithElevation(a_pos*u_overlay_scale,get_elevation(a_pos));}"),depth:$r(Zi,`in vec2 a_pos;void main() {
#ifdef GLOBE
gl_Position=projectTileFor3D(a_pos,0.0);
#else
gl_Position=u_projection_matrix*vec4(a_pos,0.0,1.0);
#endif
}`),fill:$r(`#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float opacity
fragColor=color*opacity;
#ifdef OVERDRAW_INSPECTOR
fragColor=vec4(1.0);
#endif
}`,`uniform vec2 u_fill_translate;in vec2 a_pos;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float opacity
gl_Position=projectTile(a_pos+u_fill_translate,a_pos);}`),fillOutline:$r(`in vec2 v_pos;
#ifdef GLOBE
in float v_depth;
#endif
#pragma mapbox: define highp vec4 outline_color
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize highp vec4 outline_color
#pragma mapbox: initialize lowp float opacity
float dist=length(v_pos-gl_FragCoord.xy);float alpha=1.0-smoothstep(0.0,1.0,dist);fragColor=outline_color*(alpha*opacity);
#ifdef GLOBE
if (v_depth > 1.0) {discard;}
#endif
#ifdef OVERDRAW_INSPECTOR
fragColor=vec4(1.0);
#endif
}`,`uniform vec2 u_world;uniform vec2 u_fill_translate;in vec2 a_pos;out vec2 v_pos;
#ifdef GLOBE
out float v_depth;
#endif
#pragma mapbox: define highp vec4 outline_color
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize highp vec4 outline_color
#pragma mapbox: initialize lowp float opacity
gl_Position=projectTile(a_pos+u_fill_translate,a_pos);v_pos=(gl_Position.xy/gl_Position.w+1.0)/2.0*u_world;
#ifdef GLOBE
v_depth=gl_Position.z/gl_Position.w;
#endif
}`),fillOutlinePattern:$r(`uniform vec2 u_texsize;uniform sampler2D u_image;uniform float u_fade;in vec2 v_pos_a;in vec2 v_pos_b;in vec2 v_pos;
#ifdef GLOBE
in float v_depth;
#endif
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
void main() {
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;vec2 imagecoord=mod(v_pos_a,1.0);vec2 pos=mix(pattern_tl_a/u_texsize,pattern_br_a/u_texsize,imagecoord);vec4 color1=texture(u_image,pos);vec2 imagecoord_b=mod(v_pos_b,1.0);vec2 pos2=mix(pattern_tl_b/u_texsize,pattern_br_b/u_texsize,imagecoord_b);vec4 color2=texture(u_image,pos2);float dist=length(v_pos-gl_FragCoord.xy);float alpha=1.0-smoothstep(0.0,1.0,dist);fragColor=mix(color1,color2,u_fade)*alpha*opacity;
#ifdef GLOBE
if (v_depth > 1.0) {discard;}
#endif
#ifdef OVERDRAW_INSPECTOR
fragColor=vec4(1.0);
#endif
}`,`uniform vec2 u_world;uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform vec3 u_scale;uniform vec2 u_fill_translate;in vec2 a_pos;out vec2 v_pos_a;out vec2 v_pos_b;out vec2 v_pos;
#ifdef GLOBE
out float v_depth;
#endif
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
#pragma mapbox: define lowp float pixel_ratio_from
#pragma mapbox: define lowp float pixel_ratio_to
void main() {
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
#pragma mapbox: initialize lowp float pixel_ratio_from
#pragma mapbox: initialize lowp float pixel_ratio_to
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;float tileRatio=u_scale.x;float fromScale=u_scale.y;float toScale=u_scale.z;gl_Position=projectTile(a_pos+u_fill_translate,a_pos);vec2 display_size_a=(pattern_br_a-pattern_tl_a)/pixel_ratio_from;vec2 display_size_b=(pattern_br_b-pattern_tl_b)/pixel_ratio_to;v_pos_a=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,fromScale*display_size_a,tileRatio,a_pos);v_pos_b=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,toScale*display_size_b,tileRatio,a_pos);v_pos=(gl_Position.xy/gl_Position.w+1.0)/2.0*u_world;
#ifdef GLOBE
v_depth=gl_Position.z/gl_Position.w;
#endif
}`),fillPattern:$r(`#ifdef GL_ES
precision highp float;
#endif
uniform vec2 u_texsize;uniform float u_fade;uniform sampler2D u_image;in vec2 v_pos_a;in vec2 v_pos_b;
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
void main() {
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;vec2 imagecoord=mod(v_pos_a,1.0);vec2 pos=mix(pattern_tl_a/u_texsize,pattern_br_a/u_texsize,imagecoord);vec4 color1=texture(u_image,pos);vec2 imagecoord_b=mod(v_pos_b,1.0);vec2 pos2=mix(pattern_tl_b/u_texsize,pattern_br_b/u_texsize,imagecoord_b);vec4 color2=texture(u_image,pos2);fragColor=mix(color1,color2,u_fade)*opacity;
#ifdef OVERDRAW_INSPECTOR
fragColor=vec4(1.0);
#endif
}`,`uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform vec3 u_scale;uniform vec2 u_fill_translate;in vec2 a_pos;out vec2 v_pos_a;out vec2 v_pos_b;
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
#pragma mapbox: define lowp float pixel_ratio_from
#pragma mapbox: define lowp float pixel_ratio_to
void main() {
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
#pragma mapbox: initialize lowp float pixel_ratio_from
#pragma mapbox: initialize lowp float pixel_ratio_to
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;float tileZoomRatio=u_scale.x;float fromScale=u_scale.y;float toScale=u_scale.z;vec2 display_size_a=(pattern_br_a-pattern_tl_a)/pixel_ratio_from;vec2 display_size_b=(pattern_br_b-pattern_tl_b)/pixel_ratio_to;gl_Position=projectTile(a_pos+u_fill_translate,a_pos);v_pos_a=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,fromScale*display_size_a,tileZoomRatio,a_pos);v_pos_b=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,toScale*display_size_b,tileZoomRatio,a_pos);}`),fillExtrusion:$r(`in vec4 v_color;void main() {fragColor=v_color;
#ifdef OVERDRAW_INSPECTOR
fragColor=vec4(1.0);
#endif
}`,`uniform vec3 u_lightcolor;uniform lowp vec3 u_lightpos;uniform lowp vec3 u_lightpos_globe;uniform lowp float u_lightintensity;uniform float u_vertical_gradient;uniform lowp float u_opacity;uniform vec2 u_fill_translate;in vec2 a_pos;in vec4 a_normal_ed;
#ifdef TERRAIN3D
in vec2 a_centroid;
#endif
out vec4 v_color;
#pragma mapbox: define highp float base
#pragma mapbox: define highp float height
#pragma mapbox: define highp vec4 color
void main() {
#pragma mapbox: initialize highp float base
#pragma mapbox: initialize highp float height
#pragma mapbox: initialize highp vec4 color
vec3 normal=a_normal_ed.xyz;
#ifdef TERRAIN3D
float height_terrain3d_offset=get_elevation(a_centroid);float base_terrain3d_offset=height_terrain3d_offset-(base > 0.0 ? 0.0 : 10.0);
#else
float height_terrain3d_offset=0.0;float base_terrain3d_offset=0.0;
#endif
base=max(0.0,base)+base_terrain3d_offset;height=max(0.0,height)+height_terrain3d_offset;float t=mod(normal.x,2.0);float elevation=t > 0.0 ? height : base;vec2 posInTile=a_pos+u_fill_translate;
#ifdef GLOBE
vec3 spherePos=projectToSphere(posInTile,a_pos);gl_Position=interpolateProjectionFor3D(posInTile,spherePos,elevation);
#else
gl_Position=u_projection_matrix*vec4(posInTile,elevation,1.0);
#endif
float colorvalue=color.r*0.2126+color.g*0.7152+color.b*0.0722;v_color=vec4(0.0,0.0,0.0,1.0);vec4 ambientlight=vec4(0.03,0.03,0.03,1.0);color+=ambientlight;vec3 normalForLighting=normal/16384.0;float directional=clamp(dot(normalForLighting,u_lightpos),0.0,1.0);
#ifdef GLOBE
mat3 rotMatrix=globeGetRotationMatrix(spherePos);normalForLighting=rotMatrix*normalForLighting;directional=mix(directional,clamp(dot(normalForLighting,u_lightpos_globe),0.0,1.0),u_projection_transition);
#endif
directional=mix((1.0-u_lightintensity),max((1.0-colorvalue+u_lightintensity),1.0),directional);if (normal.y !=0.0) {directional*=((1.0-u_vertical_gradient)+(u_vertical_gradient*clamp((t+base)*pow(height/150.0,0.5),mix(0.7,0.98,1.0-u_lightintensity),1.0)));}v_color.r+=clamp(color.r*directional*u_lightcolor.r,mix(0.0,0.3,1.0-u_lightcolor.r),1.0);v_color.g+=clamp(color.g*directional*u_lightcolor.g,mix(0.0,0.3,1.0-u_lightcolor.g),1.0);v_color.b+=clamp(color.b*directional*u_lightcolor.b,mix(0.0,0.3,1.0-u_lightcolor.b),1.0);v_color*=u_opacity;}`),fillExtrusionPattern:$r(`uniform vec2 u_texsize;uniform float u_fade;uniform sampler2D u_image;in vec2 v_pos_a;in vec2 v_pos_b;in vec4 v_lighting;
#pragma mapbox: define lowp float base
#pragma mapbox: define lowp float height
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
#pragma mapbox: define lowp float pixel_ratio_from
#pragma mapbox: define lowp float pixel_ratio_to
void main() {
#pragma mapbox: initialize lowp float base
#pragma mapbox: initialize lowp float height
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
#pragma mapbox: initialize lowp float pixel_ratio_from
#pragma mapbox: initialize lowp float pixel_ratio_to
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;vec2 imagecoord=mod(v_pos_a,1.0);vec2 pos=mix(pattern_tl_a/u_texsize,pattern_br_a/u_texsize,imagecoord);vec4 color1=texture(u_image,pos);vec2 imagecoord_b=mod(v_pos_b,1.0);vec2 pos2=mix(pattern_tl_b/u_texsize,pattern_br_b/u_texsize,imagecoord_b);vec4 color2=texture(u_image,pos2);vec4 mixedColor=mix(color1,color2,u_fade);fragColor=mixedColor*v_lighting;
#ifdef OVERDRAW_INSPECTOR
fragColor=vec4(1.0);
#endif
}`,`uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform float u_height_factor;uniform vec3 u_scale;uniform float u_vertical_gradient;uniform lowp float u_opacity;uniform vec2 u_fill_translate;uniform vec3 u_lightcolor;uniform lowp vec3 u_lightpos;uniform lowp vec3 u_lightpos_globe;uniform lowp float u_lightintensity;in vec2 a_pos;in vec4 a_normal_ed;
#ifdef TERRAIN3D
in vec2 a_centroid;
#endif
#ifdef GLOBE
out vec3 v_sphere_pos;
#endif
out vec2 v_pos_a;out vec2 v_pos_b;out vec4 v_lighting;
#pragma mapbox: define lowp float base
#pragma mapbox: define lowp float height
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
#pragma mapbox: define lowp float pixel_ratio_from
#pragma mapbox: define lowp float pixel_ratio_to
void main() {
#pragma mapbox: initialize lowp float base
#pragma mapbox: initialize lowp float height
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
#pragma mapbox: initialize lowp float pixel_ratio_from
#pragma mapbox: initialize lowp float pixel_ratio_to
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;float tileRatio=u_scale.x;float fromScale=u_scale.y;float toScale=u_scale.z;vec3 normal=a_normal_ed.xyz;float edgedistance=a_normal_ed.w;vec2 display_size_a=(pattern_br_a-pattern_tl_a)/pixel_ratio_from;vec2 display_size_b=(pattern_br_b-pattern_tl_b)/pixel_ratio_to;
#ifdef TERRAIN3D
float height_terrain3d_offset=get_elevation(a_centroid);float base_terrain3d_offset=height_terrain3d_offset-(base > 0.0 ? 0.0 : 10.0);
#else
float height_terrain3d_offset=0.0;float base_terrain3d_offset=0.0;
#endif
base=max(0.0,base)+base_terrain3d_offset;height=max(0.0,height)+height_terrain3d_offset;float t=mod(normal.x,2.0);float elevation=t > 0.0 ? height : base;vec2 posInTile=a_pos+u_fill_translate;
#ifdef GLOBE
vec3 spherePos=projectToSphere(posInTile,a_pos);vec3 elevatedPos=spherePos*(1.0+elevation/GLOBE_RADIUS);v_sphere_pos=elevatedPos;gl_Position=interpolateProjectionFor3D(posInTile,spherePos,elevation);
#else
gl_Position=u_projection_matrix*vec4(posInTile,elevation,1.0);
#endif
vec2 pos=normal.x==1.0 && normal.y==0.0 && normal.z==16384.0
? a_pos
: vec2(edgedistance,elevation*u_height_factor);v_pos_a=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,fromScale*display_size_a,tileRatio,pos);v_pos_b=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,toScale*display_size_b,tileRatio,pos);v_lighting=vec4(0.0,0.0,0.0,1.0);float directional=clamp(dot(normal/16383.0,u_lightpos),0.0,1.0);directional=mix((1.0-u_lightintensity),max((0.5+u_lightintensity),1.0),directional);if (normal.y !=0.0) {directional*=((1.0-u_vertical_gradient)+(u_vertical_gradient*clamp((t+base)*pow(height/150.0,0.5),mix(0.7,0.98,1.0-u_lightintensity),1.0)));}v_lighting.rgb+=clamp(directional*u_lightcolor,mix(vec3(0.0),vec3(0.3),1.0-u_lightcolor),vec3(1.0));v_lighting*=u_opacity;}`),hillshadePrepare:$r(`#ifdef GL_ES
precision highp float;
#endif
uniform sampler2D u_image;in vec2 v_pos;uniform vec2 u_dimension;uniform float u_zoom;uniform vec4 u_unpack;float getElevation(vec2 coord,float bias) {vec4 data=texture(u_image,coord)*255.0;data.a=-1.0;return dot(data,u_unpack);}void main() {vec2 epsilon=1.0/u_dimension;float tileSize=u_dimension.x-2.0;float a=getElevation(v_pos+vec2(-epsilon.x,-epsilon.y),0.0);float b=getElevation(v_pos+vec2(0,-epsilon.y),0.0);float c=getElevation(v_pos+vec2(epsilon.x,-epsilon.y),0.0);float d=getElevation(v_pos+vec2(-epsilon.x,0),0.0);float e=getElevation(v_pos,0.0);float f=getElevation(v_pos+vec2(epsilon.x,0),0.0);float g=getElevation(v_pos+vec2(-epsilon.x,epsilon.y),0.0);float h=getElevation(v_pos+vec2(0,epsilon.y),0.0);float i=getElevation(v_pos+vec2(epsilon.x,epsilon.y),0.0);float exaggerationFactor=u_zoom < 2.0 ? 0.4 : u_zoom < 4.5 ? 0.35 : 0.3;float exaggeration=u_zoom < 15.0 ? (u_zoom-15.0)*exaggerationFactor : 0.0;vec2 deriv=vec2((c+f+f+i)-(a+d+d+g),(g+h+h+i)-(a+b+b+c))*tileSize/pow(2.0,exaggeration+(28.2562-u_zoom));fragColor=clamp(vec4(deriv.x/8.0+0.5,deriv.y/8.0+0.5,1.0,1.0),0.0,1.0);
#ifdef OVERDRAW_INSPECTOR
fragColor=vec4(1.0);
#endif
}`,"uniform mat4 u_matrix;uniform vec2 u_dimension;in vec2 a_pos;in vec2 a_texture_pos;out vec2 v_pos;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);highp vec2 epsilon=1.0/u_dimension;float scale=(u_dimension.x-2.0)/u_dimension.x;v_pos=(a_texture_pos/8192.0)*scale+epsilon;}"),hillshade:$r(`uniform sampler2D u_image;in vec2 v_pos;uniform vec2 u_latrange;uniform float u_exaggeration;uniform vec4 u_accent;uniform int u_method;uniform float u_altitudes[NUM_ILLUMINATION_SOURCES];uniform float u_azimuths[NUM_ILLUMINATION_SOURCES];uniform vec4 u_shadows[NUM_ILLUMINATION_SOURCES];uniform vec4 u_highlights[NUM_ILLUMINATION_SOURCES];
#define PI 3.141592653589793
#define STANDARD 0
#define COMBINED 1
#define IGOR 2
#define MULTIDIRECTIONAL 3
#define BASIC 4
float get_aspect(vec2 deriv){return deriv.x !=0.0 ? atan(deriv.y,-deriv.x) : PI/2.0*(deriv.y > 0.0 ? 1.0 :-1.0);}void igor_hillshade(vec2 deriv){deriv=deriv*u_exaggeration*2.0;float aspect=get_aspect(deriv);float azimuth=u_azimuths[0]+PI;float slope_stength=atan(length(deriv))*2.0/PI;float aspect_strength=1.0-abs(mod((aspect+azimuth)/PI+0.5,2.0)-1.0);float shadow_strength=slope_stength*aspect_strength;float highlight_strength=slope_stength*(1.0-aspect_strength);fragColor=u_shadows[0]*shadow_strength+u_highlights[0]*highlight_strength;}void standard_hillshade(vec2 deriv){float azimuth=u_azimuths[0]+PI;float slope=atan(0.625*length(deriv));float aspect=get_aspect(deriv);float intensity=u_exaggeration;float base=1.875-intensity*1.75;float maxValue=0.5*PI;float scaledSlope=intensity !=0.5 ? ((pow(base,slope)-1.0)/(pow(base,maxValue)-1.0))*maxValue : slope;float accent=cos(scaledSlope);vec4 accent_color=(1.0-accent)*u_accent*clamp(intensity*2.0,0.0,1.0);float shade=abs(mod((aspect+azimuth)/PI+0.5,2.0)-1.0);vec4 shade_color=mix(u_shadows[0],u_highlights[0],shade)*sin(scaledSlope)*clamp(intensity*2.0,0.0,1.0);fragColor=accent_color*(1.0-shade_color.a)+shade_color;}void basic_hillshade(vec2 deriv){deriv=deriv*u_exaggeration*2.0;float azimuth=u_azimuths[0]+PI;float cos_az=cos(azimuth);float sin_az=sin(azimuth);float cos_alt=cos(u_altitudes[0]);float sin_alt=sin(u_altitudes[0]);float cang=(sin_alt-(deriv.y*cos_az*cos_alt-deriv.x*sin_az*cos_alt))/sqrt(1.0+dot(deriv,deriv));float shade=clamp(cang,0.0,1.0);if(shade > 0.5){fragColor=u_highlights[0]*(2.0*shade-1.0);}else
{fragColor=u_shadows[0]*(1.0-2.0*shade);}}void multidirectional_hillshade(vec2 deriv){deriv=deriv*u_exaggeration*2.0;fragColor=vec4(0,0,0,0);for(int i=0; i < NUM_ILLUMINATION_SOURCES; i++){float cos_alt=cos(u_altitudes[i]);float sin_alt=sin(u_altitudes[i]);float cos_az=-cos(u_azimuths[i]);float sin_az=-sin(u_azimuths[i]);float cang=(sin_alt-(deriv.y*cos_az*cos_alt-deriv.x*sin_az*cos_alt))/sqrt(1.0+dot(deriv,deriv));float shade=clamp(cang,0.0,1.0);if(shade > 0.5){fragColor+=u_highlights[i]*(2.0*shade-1.0)/float(NUM_ILLUMINATION_SOURCES);}else
{fragColor+=u_shadows[i]*(1.0-2.0*shade)/float(NUM_ILLUMINATION_SOURCES);}}}void combined_hillshade(vec2 deriv){deriv=deriv*u_exaggeration*2.0;float azimuth=u_azimuths[0]+PI;float cos_az=cos(azimuth);float sin_az=sin(azimuth);float cos_alt=cos(u_altitudes[0]);float sin_alt=sin(u_altitudes[0]);float cang=acos((sin_alt-(deriv.y*cos_az*cos_alt-deriv.x*sin_az*cos_alt))/sqrt(1.0+dot(deriv,deriv)));cang=clamp(cang,0.0,PI/2.0);float shade=cang*atan(length(deriv))*4.0/PI/PI;float highlight=(PI/2.0-cang)*atan(length(deriv))*4.0/PI/PI;fragColor=u_shadows[0]*shade+u_highlights[0]*highlight;}void main() {vec4 pixel=texture(u_image,v_pos);float scaleFactor=cos(radians((u_latrange[0]-u_latrange[1])*(1.0-v_pos.y)+u_latrange[1]));vec2 deriv=((pixel.rg*8.0)-4.0)/scaleFactor;if (u_method==BASIC) {basic_hillshade(deriv);} else if (u_method==COMBINED) {combined_hillshade(deriv);} else if (u_method==IGOR) {igor_hillshade(deriv);} else if (u_method==MULTIDIRECTIONAL) {multidirectional_hillshade(deriv);} else if (u_method==STANDARD) {standard_hillshade(deriv);} else {standard_hillshade(deriv);}
#ifdef OVERDRAW_INSPECTOR
fragColor=vec4(1.0);
#endif
}`,"uniform mat4 u_matrix;in vec2 a_pos;out vec2 v_pos;void main() {gl_Position=projectTile(a_pos,a_pos);v_pos=a_pos/8192.0;if (a_pos.y <-32767.5) {v_pos.y=0.0;}if (a_pos.y > 32766.5) {v_pos.y=1.0;}}"),line:$r(`uniform lowp float u_device_pixel_ratio;in vec2 v_width2;in vec2 v_normal;in float v_gamma_scale;
#ifdef GLOBE
in float v_depth;
#endif
#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
float dist=length(v_normal)*v_width2.s;float blur2=(blur+1.0/u_device_pixel_ratio)*v_gamma_scale;float alpha=clamp(min(dist-(v_width2.t-blur2),v_width2.s-dist)/blur2,0.0,1.0);fragColor=color*(alpha*opacity);
#ifdef GLOBE
if (v_depth > 1.0) {discard;}
#endif
#ifdef OVERDRAW_INSPECTOR
fragColor=vec4(1.0);
#endif
}`,`
#define scale 0.015873016
in vec2 a_pos_normal;in vec4 a_data;uniform vec2 u_translation;uniform mediump float u_ratio;uniform vec2 u_units_to_pixels;uniform lowp float u_device_pixel_ratio;out vec2 v_normal;out vec2 v_width2;out float v_gamma_scale;out highp float v_linesofar;
#ifdef GLOBE
out float v_depth;
#endif
#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define mediump float gapwidth
#pragma mapbox: define lowp float offset
#pragma mapbox: define mediump float width
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump float gapwidth
#pragma mapbox: initialize lowp float offset
#pragma mapbox: initialize mediump float width
float ANTIALIASING=1.0/u_device_pixel_ratio/2.0;vec2 a_extrude=a_data.xy-128.0;float a_direction=mod(a_data.z,4.0)-1.0;v_linesofar=(floor(a_data.z/4.0)+a_data.w*64.0)*2.0;vec2 pos=floor(a_pos_normal*0.5);mediump vec2 normal=a_pos_normal-2.0*pos;normal.y=normal.y*2.0-1.0;v_normal=normal;gapwidth=gapwidth/2.0;float halfwidth=width/2.0;offset=-1.0*offset;float inset=gapwidth+(gapwidth > 0.0 ? ANTIALIASING : 0.0);float outset=gapwidth+halfwidth*(gapwidth > 0.0 ? 2.0 : 1.0)+(halfwidth==0.0 ? 0.0 : ANTIALIASING);mediump vec2 dist=outset*a_extrude*scale;mediump float u=0.5*a_direction;mediump float t=1.0-abs(u);mediump vec2 offset2=offset*a_extrude*scale*normal.y*mat2(t,-u,u,t);float adjustedThickness=projectLineThickness(pos.y);vec4 projected_no_extrude=projectTile(pos+offset2/u_ratio*adjustedThickness+u_translation);vec4 projected_with_extrude=projectTile(pos+offset2/u_ratio*adjustedThickness+u_translation+dist/u_ratio*adjustedThickness);gl_Position=projected_with_extrude;
#ifdef GLOBE
v_depth=gl_Position.z/gl_Position.w;
#endif
#ifdef TERRAIN3D
v_gamma_scale=1.0;
#else
float extrude_length_without_perspective=length(dist);float extrude_length_with_perspective=length((projected_with_extrude.xy-projected_no_extrude.xy)/projected_with_extrude.w*u_units_to_pixels);v_gamma_scale=extrude_length_without_perspective/extrude_length_with_perspective;
#endif
v_width2=vec2(outset,inset);}`),lineGradient:$r(`uniform lowp float u_device_pixel_ratio;uniform sampler2D u_image;in vec2 v_width2;in vec2 v_normal;in float v_gamma_scale;in highp vec2 v_uv;
#ifdef GLOBE
in float v_depth;
#endif
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
float dist=length(v_normal)*v_width2.s;float blur2=(blur+1.0/u_device_pixel_ratio)*v_gamma_scale;float alpha=clamp(min(dist-(v_width2.t-blur2),v_width2.s-dist)/blur2,0.0,1.0);vec4 color=texture(u_image,v_uv);fragColor=color*(alpha*opacity);
#ifdef GLOBE
if (v_depth > 1.0) {discard;}
#endif
#ifdef OVERDRAW_INSPECTOR
fragColor=vec4(1.0);
#endif
}`,`
#define scale 0.015873016
in vec2 a_pos_normal;in vec4 a_data;in float a_uv_x;in float a_split_index;uniform vec2 u_translation;uniform mediump float u_ratio;uniform lowp float u_device_pixel_ratio;uniform vec2 u_units_to_pixels;uniform float u_image_height;out vec2 v_normal;out vec2 v_width2;out float v_gamma_scale;out highp vec2 v_uv;
#ifdef GLOBE
out float v_depth;
#endif
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define mediump float gapwidth
#pragma mapbox: define lowp float offset
#pragma mapbox: define mediump float width
void main() {
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump float gapwidth
#pragma mapbox: initialize lowp float offset
#pragma mapbox: initialize mediump float width
float ANTIALIASING=1.0/u_device_pixel_ratio/2.0;vec2 a_extrude=a_data.xy-128.0;float a_direction=mod(a_data.z,4.0)-1.0;highp float texel_height=1.0/u_image_height;highp float half_texel_height=0.5*texel_height;v_uv=vec2(a_uv_x,a_split_index*texel_height-half_texel_height);vec2 pos=floor(a_pos_normal*0.5);mediump vec2 normal=a_pos_normal-2.0*pos;normal.y=normal.y*2.0-1.0;v_normal=normal;gapwidth=gapwidth/2.0;float halfwidth=width/2.0;offset=-1.0*offset;float inset=gapwidth+(gapwidth > 0.0 ? ANTIALIASING : 0.0);float outset=gapwidth+halfwidth*(gapwidth > 0.0 ? 2.0 : 1.0)+(halfwidth==0.0 ? 0.0 : ANTIALIASING);mediump vec2 dist=outset*a_extrude*scale;mediump float u=0.5*a_direction;mediump float t=1.0-abs(u);mediump vec2 offset2=offset*a_extrude*scale*normal.y*mat2(t,-u,u,t);float adjustedThickness=projectLineThickness(pos.y);vec4 projected_no_extrude=projectTile(pos+offset2/u_ratio*adjustedThickness+u_translation);vec4 projected_with_extrude=projectTile(pos+offset2/u_ratio*adjustedThickness+u_translation+dist/u_ratio*adjustedThickness);gl_Position=projected_with_extrude;
#ifdef GLOBE
v_depth=gl_Position.z/gl_Position.w;
#endif
#ifdef TERRAIN3D
v_gamma_scale=1.0;
#else
float extrude_length_without_perspective=length(dist);float extrude_length_with_perspective=length((projected_with_extrude.xy-projected_no_extrude.xy)/projected_with_extrude.w*u_units_to_pixels);v_gamma_scale=extrude_length_without_perspective/extrude_length_with_perspective;
#endif
v_width2=vec2(outset,inset);}`),linePattern:$r(`#ifdef GL_ES
precision highp float;
#endif
uniform lowp float u_device_pixel_ratio;uniform vec2 u_texsize;uniform float u_fade;uniform mediump vec3 u_scale;uniform sampler2D u_image;in vec2 v_normal;in vec2 v_width2;in float v_linesofar;in float v_gamma_scale;in float v_width;
#ifdef GLOBE
in float v_depth;
#endif
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
#pragma mapbox: define lowp float pixel_ratio_from
#pragma mapbox: define lowp float pixel_ratio_to
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
#pragma mapbox: initialize lowp float pixel_ratio_from
#pragma mapbox: initialize lowp float pixel_ratio_to
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;float tileZoomRatio=u_scale.x;float fromScale=u_scale.y;float toScale=u_scale.z;vec2 display_size_a=(pattern_br_a-pattern_tl_a)/pixel_ratio_from;vec2 display_size_b=(pattern_br_b-pattern_tl_b)/pixel_ratio_to;vec2 pattern_size_a=vec2(display_size_a.x*fromScale/tileZoomRatio,display_size_a.y);vec2 pattern_size_b=vec2(display_size_b.x*toScale/tileZoomRatio,display_size_b.y);float aspect_a=display_size_a.y/v_width;float aspect_b=display_size_b.y/v_width;float dist=length(v_normal)*v_width2.s;float blur2=(blur+1.0/u_device_pixel_ratio)*v_gamma_scale;float alpha=clamp(min(dist-(v_width2.t-blur2),v_width2.s-dist)/blur2,0.0,1.0);float x_a=mod(v_linesofar/pattern_size_a.x*aspect_a,1.0);float x_b=mod(v_linesofar/pattern_size_b.x*aspect_b,1.0);float y=0.5*v_normal.y+0.5;vec2 texel_size=1.0/u_texsize;vec2 pos_a=mix(pattern_tl_a*texel_size-texel_size,pattern_br_a*texel_size+texel_size,vec2(x_a,y));vec2 pos_b=mix(pattern_tl_b*texel_size-texel_size,pattern_br_b*texel_size+texel_size,vec2(x_b,y));vec4 color=mix(texture(u_image,pos_a),texture(u_image,pos_b),u_fade);fragColor=color*alpha*opacity;
#ifdef GLOBE
if (v_depth > 1.0) {discard;}
#endif
#ifdef OVERDRAW_INSPECTOR
fragColor=vec4(1.0);
#endif
}`,`
#define scale 0.015873016
#define LINE_DISTANCE_SCALE 2.0
in vec2 a_pos_normal;in vec4 a_data;uniform vec2 u_translation;uniform vec2 u_units_to_pixels;uniform mediump float u_ratio;uniform lowp float u_device_pixel_ratio;out vec2 v_normal;out vec2 v_width2;out float v_linesofar;out float v_gamma_scale;out float v_width;
#ifdef GLOBE
out float v_depth;
#endif
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp float offset
#pragma mapbox: define mediump float gapwidth
#pragma mapbox: define mediump float width
#pragma mapbox: define lowp float floorwidth
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
#pragma mapbox: define lowp float pixel_ratio_from
#pragma mapbox: define lowp float pixel_ratio_to
void main() {
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize lowp float offset
#pragma mapbox: initialize mediump float gapwidth
#pragma mapbox: initialize mediump float width
#pragma mapbox: initialize lowp float floorwidth
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
#pragma mapbox: initialize lowp float pixel_ratio_from
#pragma mapbox: initialize lowp float pixel_ratio_to
float ANTIALIASING=1.0/u_device_pixel_ratio/2.0;vec2 a_extrude=a_data.xy-128.0;float a_direction=mod(a_data.z,4.0)-1.0;float a_linesofar=(floor(a_data.z/4.0)+a_data.w*64.0)*LINE_DISTANCE_SCALE;vec2 pos=floor(a_pos_normal*0.5);mediump vec2 normal=a_pos_normal-2.0*pos;normal.y=normal.y*2.0-1.0;v_normal=normal;gapwidth=gapwidth/2.0;float halfwidth=width/2.0;offset=-1.0*offset;float inset=gapwidth+(gapwidth > 0.0 ? ANTIALIASING : 0.0);float outset=gapwidth+halfwidth*(gapwidth > 0.0 ? 2.0 : 1.0)+(halfwidth==0.0 ? 0.0 : ANTIALIASING);mediump vec2 dist=outset*a_extrude*scale;mediump float u=0.5*a_direction;mediump float t=1.0-abs(u);mediump vec2 offset2=offset*a_extrude*scale*normal.y*mat2(t,-u,u,t);float adjustedThickness=projectLineThickness(pos.y);vec4 projected_no_extrude=projectTile(pos+offset2/u_ratio*adjustedThickness+u_translation);vec4 projected_with_extrude=projectTile(pos+offset2/u_ratio*adjustedThickness+u_translation+dist/u_ratio*adjustedThickness);gl_Position=projected_with_extrude;
#ifdef GLOBE
v_depth=gl_Position.z/gl_Position.w;
#endif
#ifdef TERRAIN3D
v_gamma_scale=1.0;
#else
float extrude_length_without_perspective=length(dist);float extrude_length_with_perspective=length((projected_with_extrude.xy-projected_no_extrude.xy)/projected_with_extrude.w*u_units_to_pixels);v_gamma_scale=extrude_length_without_perspective/extrude_length_with_perspective;
#endif
v_linesofar=a_linesofar;v_width2=vec2(outset,inset);v_width=floorwidth;}`),lineSDF:$r(`uniform lowp float u_device_pixel_ratio;uniform sampler2D u_image;uniform float u_sdfgamma;uniform float u_mix;in vec2 v_normal;in vec2 v_width2;in vec2 v_tex_a;in vec2 v_tex_b;in float v_gamma_scale;
#ifdef GLOBE
in float v_depth;
#endif
#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define mediump float width
#pragma mapbox: define lowp float floorwidth
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump float width
#pragma mapbox: initialize lowp float floorwidth
float dist=length(v_normal)*v_width2.s;float blur2=(blur+1.0/u_device_pixel_ratio)*v_gamma_scale;float alpha=clamp(min(dist-(v_width2.t-blur2),v_width2.s-dist)/blur2,0.0,1.0);float sdfdist_a=texture(u_image,v_tex_a).a;float sdfdist_b=texture(u_image,v_tex_b).a;float sdfdist=mix(sdfdist_a,sdfdist_b,u_mix);alpha*=smoothstep(0.5-u_sdfgamma/floorwidth,0.5+u_sdfgamma/floorwidth,sdfdist);fragColor=color*(alpha*opacity);
#ifdef GLOBE
if (v_depth > 1.0) {discard;}
#endif
#ifdef OVERDRAW_INSPECTOR
fragColor=vec4(1.0);
#endif
}`,`
#define scale 0.015873016
#define LINE_DISTANCE_SCALE 2.0
in vec2 a_pos_normal;in vec4 a_data;uniform vec2 u_translation;uniform mediump float u_ratio;uniform lowp float u_device_pixel_ratio;uniform vec2 u_patternscale_a;uniform float u_tex_y_a;uniform vec2 u_patternscale_b;uniform float u_tex_y_b;uniform vec2 u_units_to_pixels;out vec2 v_normal;out vec2 v_width2;out vec2 v_tex_a;out vec2 v_tex_b;out float v_gamma_scale;
#ifdef GLOBE
out float v_depth;
#endif
#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define mediump float gapwidth
#pragma mapbox: define lowp float offset
#pragma mapbox: define mediump float width
#pragma mapbox: define lowp float floorwidth
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump float gapwidth
#pragma mapbox: initialize lowp float offset
#pragma mapbox: initialize mediump float width
#pragma mapbox: initialize lowp float floorwidth
float ANTIALIASING=1.0/u_device_pixel_ratio/2.0;vec2 a_extrude=a_data.xy-128.0;float a_direction=mod(a_data.z,4.0)-1.0;float a_linesofar=(floor(a_data.z/4.0)+a_data.w*64.0)*LINE_DISTANCE_SCALE;vec2 pos=floor(a_pos_normal*0.5);mediump vec2 normal=a_pos_normal-2.0*pos;normal.y=normal.y*2.0-1.0;v_normal=normal;gapwidth=gapwidth/2.0;float halfwidth=width/2.0;offset=-1.0*offset;float inset=gapwidth+(gapwidth > 0.0 ? ANTIALIASING : 0.0);float outset=gapwidth+halfwidth*(gapwidth > 0.0 ? 2.0 : 1.0)+(halfwidth==0.0 ? 0.0 : ANTIALIASING);mediump vec2 dist=outset*a_extrude*scale;mediump float u=0.5*a_direction;mediump float t=1.0-abs(u);mediump vec2 offset2=offset*a_extrude*scale*normal.y*mat2(t,-u,u,t);float adjustedThickness=projectLineThickness(pos.y);vec4 projected_no_extrude=projectTile(pos+offset2/u_ratio*adjustedThickness+u_translation);vec4 projected_with_extrude=projectTile(pos+offset2/u_ratio*adjustedThickness+u_translation+dist/u_ratio*adjustedThickness);gl_Position=projected_with_extrude;
#ifdef GLOBE
v_depth=gl_Position.z/gl_Position.w;
#endif
#ifdef TERRAIN3D
v_gamma_scale=1.0;
#else
float extrude_length_without_perspective=length(dist);float extrude_length_with_perspective=length((projected_with_extrude.xy-projected_no_extrude.xy)/projected_with_extrude.w*u_units_to_pixels);v_gamma_scale=extrude_length_without_perspective/extrude_length_with_perspective;
#endif
v_tex_a=vec2(a_linesofar*u_patternscale_a.x/floorwidth,normal.y*u_patternscale_a.y+u_tex_y_a);v_tex_b=vec2(a_linesofar*u_patternscale_b.x/floorwidth,normal.y*u_patternscale_b.y+u_tex_y_b);v_width2=vec2(outset,inset);}`),raster:$r(`uniform float u_fade_t;uniform float u_opacity;uniform sampler2D u_image0;uniform sampler2D u_image1;in vec2 v_pos0;in vec2 v_pos1;uniform float u_brightness_low;uniform float u_brightness_high;uniform float u_saturation_factor;uniform float u_contrast_factor;uniform vec3 u_spin_weights;void main() {vec4 color0=texture(u_image0,v_pos0);vec4 color1=texture(u_image1,v_pos1);if (color0.a > 0.0) {color0.rgb=color0.rgb/color0.a;}if (color1.a > 0.0) {color1.rgb=color1.rgb/color1.a;}vec4 color=mix(color0,color1,u_fade_t);color.a*=u_opacity;vec3 rgb=color.rgb;rgb=vec3(dot(rgb,u_spin_weights.xyz),dot(rgb,u_spin_weights.zxy),dot(rgb,u_spin_weights.yzx));float average=(color.r+color.g+color.b)/3.0;rgb+=(average-rgb)*u_saturation_factor;rgb=(rgb-0.5)*u_contrast_factor+0.5;vec3 u_high_vec=vec3(u_brightness_low,u_brightness_low,u_brightness_low);vec3 u_low_vec=vec3(u_brightness_high,u_brightness_high,u_brightness_high);fragColor=vec4(mix(u_high_vec,u_low_vec,rgb)*color.a,color.a);
#ifdef OVERDRAW_INSPECTOR
fragColor=vec4(1.0);
#endif
}`,`uniform vec2 u_tl_parent;uniform float u_scale_parent;uniform float u_buffer_scale;uniform vec4 u_coords_top;uniform vec4 u_coords_bottom;in vec2 a_pos;out vec2 v_pos0;out vec2 v_pos1;void main() {vec2 fractionalPos=a_pos/8192.0;vec2 position=mix(mix(u_coords_top.xy,u_coords_top.zw,fractionalPos.x),mix(u_coords_bottom.xy,u_coords_bottom.zw,fractionalPos.x),fractionalPos.y);gl_Position=projectTile(position,position);v_pos0=((fractionalPos-0.5)/u_buffer_scale)+0.5;
#ifdef GLOBE
if (a_pos.y <-32767.5) {v_pos0.y=0.0;}if (a_pos.y > 32766.5) {v_pos0.y=1.0;}
#endif
v_pos1=(v_pos0*u_scale_parent)+u_tl_parent;}`),symbolIcon:$r(`uniform sampler2D u_texture;in vec2 v_tex;in float v_fade_opacity;
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize lowp float opacity
lowp float alpha=opacity*v_fade_opacity;fragColor=texture(u_texture,v_tex)*alpha;
#ifdef OVERDRAW_INSPECTOR
fragColor=vec4(1.0);
#endif
}`,`in vec4 a_pos_offset;in vec4 a_data;in vec4 a_pixeloffset;in vec3 a_projected_pos;in float a_fade_opacity;uniform bool u_is_size_zoom_constant;uniform bool u_is_size_feature_constant;uniform highp float u_size_t;uniform highp float u_size;uniform highp float u_camera_to_center_distance;uniform highp float u_pitch;uniform bool u_rotate_symbol;uniform highp float u_aspect_ratio;uniform float u_fade_change;uniform mat4 u_label_plane_matrix;uniform mat4 u_coord_matrix;uniform bool u_is_text;uniform bool u_pitch_with_map;uniform vec2 u_texsize;uniform bool u_is_along_line;uniform bool u_is_variable_anchor;uniform vec2 u_translation;uniform float u_pitched_scale;out vec2 v_tex;out float v_fade_opacity;
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize lowp float opacity
vec2 a_pos=a_pos_offset.xy;vec2 a_offset=a_pos_offset.zw;vec2 a_tex=a_data.xy;vec2 a_size=a_data.zw;float a_size_min=floor(a_size[0]*0.5);vec2 a_pxoffset=a_pixeloffset.xy;vec2 a_minFontScale=a_pixeloffset.zw/256.0;float ele=get_elevation(a_pos);highp float segment_angle=-a_projected_pos[2];float size;if (!u_is_size_zoom_constant && !u_is_size_feature_constant) {size=mix(a_size_min,a_size[1],u_size_t)/128.0;} else if (u_is_size_zoom_constant && !u_is_size_feature_constant) {size=a_size_min/128.0;} else {size=u_size;}vec2 translated_a_pos=a_pos+u_translation;vec4 projectedPoint=projectTileWithElevation(translated_a_pos,ele);highp float camera_to_anchor_distance=projectedPoint.w;highp float distance_ratio=u_pitch_with_map ?
camera_to_anchor_distance/u_camera_to_center_distance :
u_camera_to_center_distance/camera_to_anchor_distance;highp float perspective_ratio=clamp(0.5+0.5*distance_ratio,0.0,4.0);size*=perspective_ratio;float fontScale=u_is_text ? size/24.0 : size;highp float symbol_rotation=0.0;if (u_rotate_symbol) {vec4 offsetProjectedPoint=projectTileWithElevation(translated_a_pos+vec2(1,0),ele);vec2 a=projectedPoint.xy/projectedPoint.w;vec2 b=offsetProjectedPoint.xy/offsetProjectedPoint.w;symbol_rotation=atan((b.y-a.y)/u_aspect_ratio,b.x-a.x);}highp float angle_sin=sin(segment_angle+symbol_rotation);highp float angle_cos=cos(segment_angle+symbol_rotation);mat2 rotation_matrix=mat2(angle_cos,-1.0*angle_sin,angle_sin,angle_cos);vec4 projected_pos;if (u_is_along_line || u_is_variable_anchor) {projected_pos=vec4(a_projected_pos.xy,ele,1.0);} else if (u_pitch_with_map) {projected_pos=u_label_plane_matrix*vec4(a_projected_pos.xy+u_translation,ele,1.0);} else {projected_pos=u_label_plane_matrix*projectTileWithElevation(a_projected_pos.xy+u_translation,ele);}float z=float(u_pitch_with_map)*projected_pos.z/projected_pos.w;float projectionScaling=1.0;
#ifdef GLOBE
if(u_pitch_with_map) {float anchor_pos_tile_y=(u_coord_matrix*vec4(projected_pos.xy/projected_pos.w,z,1.0)).y;projectionScaling=mix(projectionScaling,1.0/circumferenceRatioAtTileY(anchor_pos_tile_y)*u_pitched_scale,u_projection_transition);}
#endif
vec4 finalPos=u_coord_matrix*vec4(projected_pos.xy/projected_pos.w+rotation_matrix*(a_offset/32.0*max(a_minFontScale,fontScale)+a_pxoffset/16.0)*projectionScaling,z,1.0);if(u_pitch_with_map) {finalPos=projectTileWithElevation(finalPos.xy,finalPos.z);}gl_Position=finalPos;v_tex=a_tex/u_texsize;vec2 fade_opacity=unpack_opacity(a_fade_opacity);float fade_change=fade_opacity[1] > 0.5 ? u_fade_change :-u_fade_change;float visibility=calculate_visibility(projectedPoint);v_fade_opacity=max(0.0,min(visibility,fade_opacity[0]+fade_change));}`),symbolSDF:$r(`#define SDF_PX 8.0
uniform bool u_is_halo;uniform sampler2D u_texture;uniform highp float u_gamma_scale;uniform lowp float u_device_pixel_ratio;uniform bool u_is_text;in vec2 v_data0;in vec3 v_data1;
#pragma mapbox: define highp vec4 fill_color
#pragma mapbox: define highp vec4 halo_color
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp float halo_width
#pragma mapbox: define lowp float halo_blur
void main() {
#pragma mapbox: initialize highp vec4 fill_color
#pragma mapbox: initialize highp vec4 halo_color
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize lowp float halo_width
#pragma mapbox: initialize lowp float halo_blur
float EDGE_GAMMA=0.105/u_device_pixel_ratio;vec2 tex=v_data0.xy;float gamma_scale=v_data1.x;float size=v_data1.y;float fade_opacity=v_data1[2];float fontScale=u_is_text ? size/24.0 : size;lowp vec4 color=fill_color;highp float gamma=EDGE_GAMMA/(fontScale*u_gamma_scale);lowp float inner_edge=(256.0-64.0)/256.0;if (u_is_halo) {color=halo_color;gamma=(halo_blur*1.19/SDF_PX+EDGE_GAMMA)/(fontScale*u_gamma_scale);inner_edge=inner_edge+gamma*gamma_scale;}lowp float dist=texture(u_texture,tex).a;highp float gamma_scaled=gamma*gamma_scale;highp float alpha=smoothstep(inner_edge-gamma_scaled,inner_edge+gamma_scaled,dist);if (u_is_halo) {lowp float halo_edge=(6.0-halo_width/fontScale)/SDF_PX;alpha=min(smoothstep(halo_edge-gamma_scaled,halo_edge+gamma_scaled,dist),1.0-alpha);}fragColor=color*(alpha*opacity*fade_opacity);
#ifdef OVERDRAW_INSPECTOR
fragColor=vec4(1.0);
#endif
}`,`in vec4 a_pos_offset;in vec4 a_data;in vec4 a_pixeloffset;in vec3 a_projected_pos;in float a_fade_opacity;uniform bool u_is_size_zoom_constant;uniform bool u_is_size_feature_constant;uniform highp float u_size_t;uniform highp float u_size;uniform mat4 u_label_plane_matrix;uniform mat4 u_coord_matrix;uniform bool u_is_text;uniform bool u_pitch_with_map;uniform bool u_is_along_line;uniform bool u_is_variable_anchor;uniform highp float u_pitch;uniform bool u_rotate_symbol;uniform highp float u_aspect_ratio;uniform highp float u_camera_to_center_distance;uniform float u_fade_change;uniform vec2 u_texsize;uniform vec2 u_translation;uniform float u_pitched_scale;out vec2 v_data0;out vec3 v_data1;
#pragma mapbox: define highp vec4 fill_color
#pragma mapbox: define highp vec4 halo_color
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp float halo_width
#pragma mapbox: define lowp float halo_blur
void main() {
#pragma mapbox: initialize highp vec4 fill_color
#pragma mapbox: initialize highp vec4 halo_color
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize lowp float halo_width
#pragma mapbox: initialize lowp float halo_blur
vec2 a_pos=a_pos_offset.xy;vec2 a_offset=a_pos_offset.zw;vec2 a_tex=a_data.xy;vec2 a_size=a_data.zw;float a_size_min=floor(a_size[0]*0.5);vec2 a_pxoffset=a_pixeloffset.xy;float ele=get_elevation(a_pos);highp float segment_angle=-a_projected_pos[2];float size;if (!u_is_size_zoom_constant && !u_is_size_feature_constant) {size=mix(a_size_min,a_size[1],u_size_t)/128.0;} else if (u_is_size_zoom_constant && !u_is_size_feature_constant) {size=a_size_min/128.0;} else {size=u_size;}vec2 translated_a_pos=a_pos+u_translation;vec4 projectedPoint=projectTileWithElevation(translated_a_pos,ele);highp float camera_to_anchor_distance=projectedPoint.w;highp float distance_ratio=u_pitch_with_map ?
camera_to_anchor_distance/u_camera_to_center_distance :
u_camera_to_center_distance/camera_to_anchor_distance;highp float perspective_ratio=clamp(0.5+0.5*distance_ratio,0.0,4.0);size*=perspective_ratio;float fontScale=u_is_text ? size/24.0 : size;highp float symbol_rotation=0.0;if (u_rotate_symbol) {vec4 offsetProjectedPoint=projectTileWithElevation(translated_a_pos+vec2(1,0),ele);vec2 a=projectedPoint.xy/projectedPoint.w;vec2 b=offsetProjectedPoint.xy/offsetProjectedPoint.w;symbol_rotation=atan((b.y-a.y)/u_aspect_ratio,b.x-a.x);}highp float angle_sin=sin(segment_angle+symbol_rotation);highp float angle_cos=cos(segment_angle+symbol_rotation);mat2 rotation_matrix=mat2(angle_cos,-1.0*angle_sin,angle_sin,angle_cos);vec4 projected_pos;if (u_is_along_line || u_is_variable_anchor) {projected_pos=vec4(a_projected_pos.xy,ele,1.0);} else if (u_pitch_with_map) {projected_pos=u_label_plane_matrix*vec4(a_projected_pos.xy+u_translation,ele,1.0);} else {projected_pos=u_label_plane_matrix*projectTileWithElevation(a_projected_pos.xy+u_translation,ele);}float z=float(u_pitch_with_map)*projected_pos.z/projected_pos.w;float projectionScaling=1.0;
#ifdef GLOBE
if(u_pitch_with_map) {float anchor_pos_tile_y=(u_coord_matrix*vec4(projected_pos.xy/projected_pos.w,z,1.0)).y;projectionScaling=mix(projectionScaling,1.0/circumferenceRatioAtTileY(anchor_pos_tile_y)*u_pitched_scale,u_projection_transition);}
#endif
vec4 finalPos=u_coord_matrix*vec4(projected_pos.xy/projected_pos.w+rotation_matrix*(a_offset/32.0*fontScale+a_pxoffset)*projectionScaling,z,1.0);if(u_pitch_with_map) {finalPos=projectTileWithElevation(finalPos.xy,finalPos.z);}float gamma_scale=finalPos.w;gl_Position=finalPos;vec2 fade_opacity=unpack_opacity(a_fade_opacity);float visibility=calculate_visibility(projectedPoint);float fade_change=fade_opacity[1] > 0.5 ? u_fade_change :-u_fade_change;float interpolated_fade_opacity=max(0.0,min(visibility,fade_opacity[0]+fade_change));v_data0=a_tex/u_texsize;v_data1=vec3(gamma_scale,size,interpolated_fade_opacity);}`),symbolTextAndIcon:$r(`#define SDF_PX 8.0
#define SDF 1.0
#define ICON 0.0
uniform bool u_is_halo;uniform sampler2D u_texture;uniform sampler2D u_texture_icon;uniform highp float u_gamma_scale;uniform lowp float u_device_pixel_ratio;in vec4 v_data0;in vec4 v_data1;
#pragma mapbox: define highp vec4 fill_color
#pragma mapbox: define highp vec4 halo_color
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp float halo_width
#pragma mapbox: define lowp float halo_blur
void main() {
#pragma mapbox: initialize highp vec4 fill_color
#pragma mapbox: initialize highp vec4 halo_color
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize lowp float halo_width
#pragma mapbox: initialize lowp float halo_blur
float fade_opacity=v_data1[2];if (v_data1.w==ICON) {vec2 tex_icon=v_data0.zw;lowp float alpha=opacity*fade_opacity;fragColor=texture(u_texture_icon,tex_icon)*alpha;
#ifdef OVERDRAW_INSPECTOR
fragColor=vec4(1.0);
#endif
return;}vec2 tex=v_data0.xy;float EDGE_GAMMA=0.105/u_device_pixel_ratio;float gamma_scale=v_data1.x;float size=v_data1.y;float fontScale=size/24.0;lowp vec4 color=fill_color;highp float gamma=EDGE_GAMMA/(fontScale*u_gamma_scale);lowp float buff=(256.0-64.0)/256.0;if (u_is_halo) {color=halo_color;gamma=(halo_blur*1.19/SDF_PX+EDGE_GAMMA)/(fontScale*u_gamma_scale);buff=(6.0-halo_width/fontScale)/SDF_PX;}lowp float dist=texture(u_texture,tex).a;highp float gamma_scaled=gamma*gamma_scale;highp float alpha=smoothstep(buff-gamma_scaled,buff+gamma_scaled,dist);fragColor=color*(alpha*opacity*fade_opacity);
#ifdef OVERDRAW_INSPECTOR
fragColor=vec4(1.0);
#endif
}`,`in vec4 a_pos_offset;in vec4 a_data;in vec3 a_projected_pos;in float a_fade_opacity;uniform bool u_is_size_zoom_constant;uniform bool u_is_size_feature_constant;uniform highp float u_size_t;uniform highp float u_size;uniform mat4 u_label_plane_matrix;uniform mat4 u_coord_matrix;uniform bool u_is_text;uniform bool u_pitch_with_map;uniform highp float u_pitch;uniform bool u_rotate_symbol;uniform highp float u_aspect_ratio;uniform highp float u_camera_to_center_distance;uniform float u_fade_change;uniform vec2 u_texsize;uniform vec2 u_texsize_icon;uniform bool u_is_along_line;uniform bool u_is_variable_anchor;uniform vec2 u_translation;uniform float u_pitched_scale;out vec4 v_data0;out vec4 v_data1;
#pragma mapbox: define highp vec4 fill_color
#pragma mapbox: define highp vec4 halo_color
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp float halo_width
#pragma mapbox: define lowp float halo_blur
void main() {
#pragma mapbox: initialize highp vec4 fill_color
#pragma mapbox: initialize highp vec4 halo_color
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize lowp float halo_width
#pragma mapbox: initialize lowp float halo_blur
vec2 a_pos=a_pos_offset.xy;vec2 a_offset=a_pos_offset.zw;vec2 a_tex=a_data.xy;vec2 a_size=a_data.zw;float a_size_min=floor(a_size[0]*0.5);float is_sdf=a_size[0]-2.0*a_size_min;float ele=get_elevation(a_pos);highp float segment_angle=-a_projected_pos[2];float size;if (!u_is_size_zoom_constant && !u_is_size_feature_constant) {size=mix(a_size_min,a_size[1],u_size_t)/128.0;} else if (u_is_size_zoom_constant && !u_is_size_feature_constant) {size=a_size_min/128.0;} else {size=u_size;}vec2 translated_a_pos=a_pos+u_translation;vec4 projectedPoint=projectTileWithElevation(translated_a_pos,ele);highp float camera_to_anchor_distance=projectedPoint.w;highp float distance_ratio=u_pitch_with_map ?
camera_to_anchor_distance/u_camera_to_center_distance :
u_camera_to_center_distance/camera_to_anchor_distance;highp float perspective_ratio=clamp(0.5+0.5*distance_ratio,0.0,4.0);size*=perspective_ratio;float fontScale=size/24.0;highp float symbol_rotation=0.0;if (u_rotate_symbol) {vec4 offsetProjectedPoint=projectTileWithElevation(translated_a_pos+vec2(1,0),ele);vec2 a=projectedPoint.xy/projectedPoint.w;vec2 b=offsetProjectedPoint.xy/offsetProjectedPoint.w;symbol_rotation=atan((b.y-a.y)/u_aspect_ratio,b.x-a.x);}highp float angle_sin=sin(segment_angle+symbol_rotation);highp float angle_cos=cos(segment_angle+symbol_rotation);mat2 rotation_matrix=mat2(angle_cos,-1.0*angle_sin,angle_sin,angle_cos);vec4 projected_pos;if (u_is_along_line || u_is_variable_anchor) {projected_pos=vec4(a_projected_pos.xy,ele,1.0);} else if (u_pitch_with_map) {projected_pos=u_label_plane_matrix*vec4(a_projected_pos.xy+u_translation,ele,1.0);} else {projected_pos=u_label_plane_matrix*projectTileWithElevation(a_projected_pos.xy+u_translation,ele);}float z=float(u_pitch_with_map)*projected_pos.z/projected_pos.w;float projectionScaling=1.0;
#ifdef GLOBE
if(u_pitch_with_map && !u_is_along_line) {float anchor_pos_tile_y=(u_coord_matrix*vec4(projected_pos.xy/projected_pos.w,z,1.0)).y;projectionScaling=mix(projectionScaling,1.0/circumferenceRatioAtTileY(anchor_pos_tile_y)*u_pitched_scale,u_projection_transition);}
#endif
vec4 finalPos=u_coord_matrix*vec4(projected_pos.xy/projected_pos.w+rotation_matrix*(a_offset/32.0*fontScale)*projectionScaling,z,1.0);if(u_pitch_with_map) {finalPos=projectTileWithElevation(finalPos.xy,finalPos.z);}float gamma_scale=finalPos.w;gl_Position=finalPos;vec2 fade_opacity=unpack_opacity(a_fade_opacity);float visibility=calculate_visibility(projectedPoint);float fade_change=fade_opacity[1] > 0.5 ? u_fade_change :-u_fade_change;float interpolated_fade_opacity=max(0.0,min(visibility,fade_opacity[0]+fade_change));v_data0.xy=a_tex/u_texsize;v_data0.zw=a_tex/u_texsize_icon;v_data1=vec4(gamma_scale,size,interpolated_fade_opacity,is_sdf);}`),terrain:$r("uniform sampler2D u_texture;uniform vec4 u_fog_color;uniform vec4 u_horizon_color;uniform float u_fog_ground_blend;uniform float u_fog_ground_blend_opacity;uniform float u_horizon_fog_blend;uniform bool u_is_globe_mode;in vec2 v_texture_pos;in float v_fog_depth;const float gamma=2.2;vec4 gammaToLinear(vec4 color) {return pow(color,vec4(gamma));}vec4 linearToGamma(vec4 color) {return pow(color,vec4(1.0/gamma));}void main() {vec4 surface_color=texture(u_texture,vec2(v_texture_pos.x,1.0-v_texture_pos.y));if (!u_is_globe_mode && v_fog_depth > u_fog_ground_blend) {vec4 surface_color_linear=gammaToLinear(surface_color);float blend_color=smoothstep(0.0,1.0,max((v_fog_depth-u_horizon_fog_blend)/(1.0-u_horizon_fog_blend),0.0));vec4 fog_horizon_color_linear=mix(gammaToLinear(u_fog_color),gammaToLinear(u_horizon_color),blend_color);float factor_fog=max(v_fog_depth-u_fog_ground_blend,0.0)/(1.0-u_fog_ground_blend);fragColor=linearToGamma(mix(surface_color_linear,fog_horizon_color_linear,pow(factor_fog,2.0)*u_fog_ground_blend_opacity));} else {fragColor=surface_color;}}","in vec3 a_pos3d;uniform mat4 u_fog_matrix;uniform float u_ele_delta;out vec2 v_texture_pos;out float v_fog_depth;void main() {float ele=get_elevation(a_pos3d.xy);float ele_delta=a_pos3d.z==1.0 ? u_ele_delta : 0.0;v_texture_pos=a_pos3d.xy/8192.0;gl_Position=projectTileFor3D(a_pos3d.xy,get_elevation(a_pos3d.xy)-ele_delta);vec4 pos=u_fog_matrix*vec4(a_pos3d.xy,ele,1.0);v_fog_depth=pos.z/pos.w*0.5+0.5;}"),terrainDepth:$r("in float v_depth;const highp vec4 bitSh=vec4(256.*256.*256.,256.*256.,256.,1.);const highp vec4 bitMsk=vec4(0.,vec3(1./256.0));highp vec4 pack(highp float value) {highp vec4 comp=fract(value*bitSh);comp-=comp.xxyz*bitMsk;return comp;}void main() {fragColor=pack(v_depth);}","in vec3 a_pos3d;uniform float u_ele_delta;out float v_depth;void main() {float ele=get_elevation(a_pos3d.xy);float ele_delta=a_pos3d.z==1.0 ? u_ele_delta : 0.0;gl_Position=projectTileFor3D(a_pos3d.xy,ele-ele_delta);v_depth=gl_Position.z/gl_Position.w;}"),terrainCoords:$r("precision mediump float;uniform sampler2D u_texture;uniform float u_terrain_coords_id;in vec2 v_texture_pos;void main() {vec4 rgba=texture(u_texture,v_texture_pos);fragColor=vec4(rgba.r,rgba.g,rgba.b,u_terrain_coords_id);}","in vec3 a_pos3d;uniform float u_ele_delta;out vec2 v_texture_pos;void main() {float ele=get_elevation(a_pos3d.xy);float ele_delta=a_pos3d.z==1.0 ? u_ele_delta : 0.0;v_texture_pos=a_pos3d.xy/8192.0;gl_Position=projectTileFor3D(a_pos3d.xy,ele-ele_delta);}"),projectionErrorMeasurement:$r("in vec4 v_output_error_encoded;void main() {fragColor=v_output_error_encoded;}","in vec2 a_pos;uniform highp float u_input;uniform highp float u_output_expected;out vec4 v_output_error_encoded;void main() {float real_output=2.0*atan(exp(PI-(u_input*PI*2.0)))-PI*0.5;float error=real_output-u_output_expected;float abs_error=abs(error)*128.0;v_output_error_encoded.x=min(floor(abs_error*256.0),255.0)/255.0;abs_error-=v_output_error_encoded.x;v_output_error_encoded.y=min(floor(abs_error*65536.0),255.0)/255.0;abs_error-=v_output_error_encoded.x/255.0;v_output_error_encoded.z=min(floor(abs_error*16777216.0),255.0)/255.0;v_output_error_encoded.w=error >=0.0 ? 1.0 : 0.0;gl_Position=vec4(a_pos,0.0,1.0);}"),atmosphere:$r(`in vec3 view_direction;uniform vec3 u_sun_pos;uniform vec3 u_globe_position;uniform float u_globe_radius;uniform float u_atmosphere_blend;/**Shader use from https:*Made some change to adapt to MapLibre Globe geometry*/const float PI=3.141592653589793;const int iSteps=5;const int jSteps=3;/*radius of the planet*/const float EARTH_RADIUS=6371e3;/*radius of the atmosphere*/const float ATMOS_RADIUS=6471e3;vec2 rsi(vec3 r0,vec3 rd,float sr) {float a=dot(rd,rd);float b=2.0*dot(rd,r0);float c=dot(r0,r0)-(sr*sr);float d=(b*b)-4.0*a*c;if (d < 0.0) return vec2(1e5,-1e5);return vec2((-b-sqrt(d))/(2.0*a),(-b+sqrt(d))/(2.0*a));}vec4 atmosphere(vec3 r,vec3 r0,vec3 pSun,float iSun,float rPlanet,float rAtmos,vec3 kRlh,float kMie,float shRlh,float shMie,float g) {pSun=normalize(pSun);r=normalize(r);vec2 p=rsi(r0,r,rAtmos);if (p.x > p.y) {return vec4(0.0,0.0,0.0,1.0);}if (p.x < 0.0) {p.x=0.0;}vec3 pos=r0+r*p.x;vec2 p2=rsi(r0,r,rPlanet);if (p2.x <=p2.y && p2.x > 0.0) {p.y=min(p.y,p2.x);}float iStepSize=(p.y-p.x)/float(iSteps);float iTime=p.x+iStepSize*0.5;vec3 totalRlh=vec3(0,0,0);vec3 totalMie=vec3(0,0,0);float iOdRlh=0.0;float iOdMie=0.0;float mu=dot(r,pSun);float mumu=mu*mu;float gg=g*g;float pRlh=3.0/(16.0*PI)*(1.0+mumu);float pMie=3.0/(8.0*PI)*((1.0-gg)*(mumu+1.0))/(pow(1.0+gg-2.0*mu*g,1.5)*(2.0+gg));for (int i=0; i < iSteps; i++) {vec3 iPos=r0+r*iTime;float iHeight=length(iPos)-rPlanet;float odStepRlh=exp(-iHeight/shRlh)*iStepSize;float odStepMie=exp(-iHeight/shMie)*iStepSize;iOdRlh+=odStepRlh;iOdMie+=odStepMie;float jStepSize=rsi(iPos,pSun,rAtmos).y/float(jSteps);float jTime=jStepSize*0.5;float jOdRlh=0.0;float jOdMie=0.0;for (int j=0; j < jSteps; j++) {vec3 jPos=iPos+pSun*jTime;float jHeight=length(jPos)-rPlanet;jOdRlh+=exp(-jHeight/shRlh)*jStepSize;jOdMie+=exp(-jHeight/shMie)*jStepSize;jTime+=jStepSize;}vec3 attn=exp(-(kMie*(iOdMie+jOdMie)+kRlh*(iOdRlh+jOdRlh)));totalRlh+=odStepRlh*attn;totalMie+=odStepMie*attn;iTime+=iStepSize;}float opacity=exp(-(length(kRlh)*length(totalRlh)+kMie*length(totalMie)));vec3 color=iSun*(pRlh*kRlh*totalRlh+pMie*kMie*totalMie);return vec4(color,opacity);}void main() {vec3 scale_camera_pos=-u_globe_position*EARTH_RADIUS/u_globe_radius;vec4 color=atmosphere(normalize(view_direction),scale_camera_pos,u_sun_pos,22.0,EARTH_RADIUS,ATMOS_RADIUS,vec3(5.5e-6,13.0e-6,22.4e-6),21e-6,8e3,1.2e3,0.758
);color.rgb=1.0-exp(-1.0*color.rgb);color=pow(color,vec4(1.0/2.2));fragColor=vec4(color.rgb,1.0-color.a)*u_atmosphere_blend;}`,"in vec2 a_pos;uniform mat4 u_inv_proj_matrix;out vec3 view_direction;void main() {view_direction=(u_inv_proj_matrix*vec4(a_pos,0.0,1.0)).xyz;gl_Position=vec4(a_pos,0.0,1.0);}"),sky:$r("uniform vec4 u_sky_color;uniform vec4 u_horizon_color;uniform vec2 u_horizon;uniform vec2 u_horizon_normal;uniform float u_sky_horizon_blend;uniform float u_sky_blend;void main() {float x=gl_FragCoord.x;float y=gl_FragCoord.y;float blend=(y-u_horizon.y)*u_horizon_normal.y+(x-u_horizon.x)*u_horizon_normal.x;if (blend > 0.0) {if (blend < u_sky_horizon_blend) {fragColor=mix(u_sky_color,u_horizon_color,pow(1.0-blend/u_sky_horizon_blend,2.0));} else {fragColor=u_sky_color;}}fragColor=mix(fragColor,vec4(vec3(0.0),0.0),u_sky_blend);}","in vec2 a_pos;void main() {gl_Position=vec4(a_pos,1.0,1.0);}")};function $r(S,s){let d=/#pragma mapbox: ([\w]+) ([\w]+) ([\w]+) ([\w]+)/g,v=s.match(/in ([\w]+) ([\w]+)/g),x=S.match(/uniform ([\w]+) ([\w]+)([\s]*)([\w]*)/g),T=s.match(/uniform ([\w]+) ([\w]+)([\s]*)([\w]*)/g),C=T?T.concat(x):x,R={};return{fragmentSource:S=S.replace(d,(q,V,H,Y,W)=>(R[W]=!0,V==="define"?`
#ifndef HAS_UNIFORM_u_${W}
in ${H} ${Y} ${W};
#else
uniform ${H} ${Y} u_${W};
#endif
`:`
#ifdef HAS_UNIFORM_u_${W}
    ${H} ${Y} ${W} = u_${W};
#endif
`)),vertexSource:s=s.replace(d,(q,V,H,Y,W)=>{let Q=Y==="float"?"vec2":"vec4",ie=W.match(/color/)?"color":Q;return R[W]?V==="define"?`
#ifndef HAS_UNIFORM_u_${W}
uniform lowp float u_${W}_t;
in ${H} ${Q} a_${W};
out ${H} ${Y} ${W};
#else
uniform ${H} ${Y} u_${W};
#endif
`:ie==="vec4"?`
#ifndef HAS_UNIFORM_u_${W}
    ${W} = a_${W};
#else
    ${H} ${Y} ${W} = u_${W};
#endif
`:`
#ifndef HAS_UNIFORM_u_${W}
    ${W} = unpack_mix_${ie}(a_${W}, u_${W}_t);
#else
    ${H} ${Y} ${W} = u_${W};
#endif
`:V==="define"?`
#ifndef HAS_UNIFORM_u_${W}
uniform lowp float u_${W}_t;
in ${H} ${Q} a_${W};
#else
uniform ${H} ${Y} u_${W};
#endif
`:ie==="vec4"?`
#ifndef HAS_UNIFORM_u_${W}
    ${H} ${Y} ${W} = a_${W};
#else
    ${H} ${Y} ${W} = u_${W};
#endif
`:`
#ifndef HAS_UNIFORM_u_${W}
    ${H} ${Y} ${W} = unpack_mix_${ie}(a_${W}, u_${W}_t);
#else
    ${H} ${Y} ${W} = u_${W};
#endif
`}),staticAttributes:v,staticUniforms:C}}class Pi{constructor(s,d,v){this.vertexBuffer=s,this.indexBuffer=d,this.segments=v}destroy(){this.vertexBuffer.destroy(),this.indexBuffer.destroy(),this.segments.destroy(),this.vertexBuffer=null,this.indexBuffer=null,this.segments=null}}var bi=i.aJ([{name:"a_pos",type:"Int16",components:2}]);let Us="#define PROJECTION_MERCATOR",os="mercator";class vn{constructor(){this._cachedMesh=null}get name(){return"mercator"}get useSubdivision(){return!1}get shaderVariantName(){return os}get shaderDefine(){return Us}get shaderPreludeCode(){return Vo.projectionMercator}get vertexShaderPreludeCode(){return Vo.projectionMercator.vertexSource}get subdivisionGranularity(){return i.aK.noSubdivision}get useGlobeControls(){return!1}get transitionState(){return 0}get latitudeErrorCorrectionRadians(){return 0}destroy(){}updateGPUdependent(s){}getMeshFromTileID(s,d,v,x,T){if(this._cachedMesh)return this._cachedMesh;let C=new i.aL;C.emplaceBack(0,0),C.emplaceBack(i.$,0),C.emplaceBack(0,i.$),C.emplaceBack(i.$,i.$);let R=s.createVertexBuffer(C,bi.members),q=i.aM.simpleSegment(0,0,4,2),V=new i.aN;V.emplaceBack(1,0,2),V.emplaceBack(1,2,3);let H=s.createIndexBuffer(V);return this._cachedMesh=new Pi(R,H,q),this._cachedMesh}recalculate(){}hasTransition(){return!1}setErrorQueryLatitudeDegrees(s){}}class is{constructor(s=0,d=0,v=0,x=0){if(isNaN(s)||s<0||isNaN(d)||d<0||isNaN(v)||v<0||isNaN(x)||x<0)throw new Error("Invalid value for edge-insets, top, bottom, left and right must all be numbers");this.top=s,this.bottom=d,this.left=v,this.right=x}interpolate(s,d,v){return d.top!=null&&s.top!=null&&(this.top=i.C.number(s.top,d.top,v)),d.bottom!=null&&s.bottom!=null&&(this.bottom=i.C.number(s.bottom,d.bottom,v)),d.left!=null&&s.left!=null&&(this.left=i.C.number(s.left,d.left,v)),d.right!=null&&s.right!=null&&(this.right=i.C.number(s.right,d.right,v)),this}getCenter(s,d){let v=i.ah((this.left+s-this.right)/2,0,s),x=i.ah((this.top+d-this.bottom)/2,0,d);return new i.P(v,x)}equals(s){return this.top===s.top&&this.bottom===s.bottom&&this.left===s.left&&this.right===s.right}clone(){return new is(this.top,this.bottom,this.left,this.right)}toJSON(){return{top:this.top,bottom:this.bottom,left:this.left,right:this.right}}}function Mu(S,s){if(!S.renderWorldCopies||S.lngRange)return;let d=s.lng-S.center.lng;s.lng+=d>180?-360:d<-180?360:0}function Jf(S){return Math.max(0,Math.floor(S))}class _a{constructor(s,d,v,x,T,C){this._callbacks=s,this._tileSize=512,this._renderWorldCopies=C===void 0||!!C,this._minZoom=d||0,this._maxZoom=v||22,this._minPitch=x==null?0:x,this._maxPitch=T==null?60:T,this.setMaxBounds(),this._width=0,this._height=0,this._center=new i.S(0,0),this._elevation=0,this._zoom=0,this._tileZoom=Jf(this._zoom),this._scale=i.af(this._zoom),this._bearingInRadians=0,this._fovInRadians=.6435011087932844,this._pitchInRadians=0,this._rollInRadians=0,this._unmodified=!0,this._edgeInsets=new is,this._minElevationForCurrentTile=0,this._autoCalculateNearFarZ=!0}apply(s,d,v){this._latRange=s.latRange,this._lngRange=s.lngRange,this._width=s.width,this._height=s.height,this._center=s.center,this._elevation=s.elevation,this._minElevationForCurrentTile=s.minElevationForCurrentTile,this._zoom=s.zoom,this._tileZoom=Jf(this._zoom),this._scale=i.af(this._zoom),this._bearingInRadians=s.bearingInRadians,this._fovInRadians=s.fovInRadians,this._pitchInRadians=s.pitchInRadians,this._rollInRadians=s.rollInRadians,this._unmodified=s.unmodified,this._edgeInsets=new is(s.padding.top,s.padding.bottom,s.padding.left,s.padding.right),this._minZoom=s.minZoom,this._maxZoom=s.maxZoom,this._minPitch=s.minPitch,this._maxPitch=s.maxPitch,this._renderWorldCopies=s.renderWorldCopies,this._cameraToCenterDistance=s.cameraToCenterDistance,this._nearZ=s.nearZ,this._farZ=s.farZ,this._autoCalculateNearFarZ=!v&&s.autoCalculateNearFarZ,d&&this._constrain(),this._calcMatrices()}get pixelsToClipSpaceMatrix(){return this._pixelsToClipSpaceMatrix}get clipSpaceToPixelsMatrix(){return this._clipSpaceToPixelsMatrix}get minElevationForCurrentTile(){return this._minElevationForCurrentTile}setMinElevationForCurrentTile(s){this._minElevationForCurrentTile=s}get tileSize(){return this._tileSize}get tileZoom(){return this._tileZoom}get scale(){return this._scale}get width(){return this._width}get height(){return this._height}get bearingInRadians(){return this._bearingInRadians}get lngRange(){return this._lngRange}get latRange(){return this._latRange}get pixelsToGLUnits(){return this._pixelsToGLUnits}get minZoom(){return this._minZoom}setMinZoom(s){this._minZoom!==s&&(this._minZoom=s,this.setZoom(this.getConstrained(this._center,this.zoom).zoom))}get maxZoom(){return this._maxZoom}setMaxZoom(s){this._maxZoom!==s&&(this._maxZoom=s,this.setZoom(this.getConstrained(this._center,this.zoom).zoom))}get minPitch(){return this._minPitch}setMinPitch(s){this._minPitch!==s&&(this._minPitch=s,this.setPitch(Math.max(this.pitch,s)))}get maxPitch(){return this._maxPitch}setMaxPitch(s){this._maxPitch!==s&&(this._maxPitch=s,this.setPitch(Math.min(this.pitch,s)))}get renderWorldCopies(){return this._renderWorldCopies}setRenderWorldCopies(s){s===void 0?s=!0:s===null&&(s=!1),this._renderWorldCopies=s}get worldSize(){return this._tileSize*this._scale}get centerOffset(){return this.centerPoint._sub(this.size._div(2))}get size(){return new i.P(this._width,this._height)}get bearing(){return this._bearingInRadians/Math.PI*180}setBearing(s){let d=i.aO(s,-180,180)*Math.PI/180;var v,x,T,C,R,q,V,H,Y;this._bearingInRadians!==d&&(this._unmodified=!1,this._bearingInRadians=d,this._calcMatrices(),this._rotationMatrix=c(),v=this._rotationMatrix,T=-this._bearingInRadians,C=(x=this._rotationMatrix)[0],R=x[1],q=x[2],V=x[3],H=Math.sin(T),Y=Math.cos(T),v[0]=C*Y+q*H,v[1]=R*Y+V*H,v[2]=C*-H+q*Y,v[3]=R*-H+V*Y)}get rotationMatrix(){return this._rotationMatrix}get pitchInRadians(){return this._pitchInRadians}get pitch(){return this._pitchInRadians/Math.PI*180}setPitch(s){let d=i.ah(s,this.minPitch,this.maxPitch)/180*Math.PI;this._pitchInRadians!==d&&(this._unmodified=!1,this._pitchInRadians=d,this._calcMatrices())}get rollInRadians(){return this._rollInRadians}get roll(){return this._rollInRadians/Math.PI*180}setRoll(s){let d=s/180*Math.PI;this._rollInRadians!==d&&(this._unmodified=!1,this._rollInRadians=d,this._calcMatrices())}get fovInRadians(){return this._fovInRadians}get fov(){return i.aP(this._fovInRadians)}setFov(s){s=i.ah(s,.1,150),this.fov!==s&&(this._unmodified=!1,this._fovInRadians=i.ae(s),this._calcMatrices())}get zoom(){return this._zoom}setZoom(s){let d=this.getConstrained(this._center,s).zoom;this._zoom!==d&&(this._unmodified=!1,this._zoom=d,this._tileZoom=Math.max(0,Math.floor(d)),this._scale=i.af(d),this._constrain(),this._calcMatrices())}get center(){return this._center}setCenter(s){s.lat===this._center.lat&&s.lng===this._center.lng||(this._unmodified=!1,this._center=s,this._constrain(),this._calcMatrices())}get elevation(){return this._elevation}setElevation(s){s!==this._elevation&&(this._elevation=s,this._constrain(),this._calcMatrices())}get padding(){return this._edgeInsets.toJSON()}setPadding(s){this._edgeInsets.equals(s)||(this._unmodified=!1,this._edgeInsets.interpolate(this._edgeInsets,s,1),this._calcMatrices())}get centerPoint(){return this._edgeInsets.getCenter(this._width,this._height)}get pixelsPerMeter(){return this._pixelPerMeter}get unmodified(){return this._unmodified}get cameraToCenterDistance(){return this._cameraToCenterDistance}get nearZ(){return this._nearZ}get farZ(){return this._farZ}get autoCalculateNearFarZ(){return this._autoCalculateNearFarZ}overrideNearFarZ(s,d){this._autoCalculateNearFarZ=!1,this._nearZ=s,this._farZ=d,this._calcMatrices()}clearNearFarZOverride(){this._autoCalculateNearFarZ=!0,this._calcMatrices()}isPaddingEqual(s){return this._edgeInsets.equals(s)}interpolatePadding(s,d,v){this._unmodified=!1,this._edgeInsets.interpolate(s,d,v),this._constrain(),this._calcMatrices()}resize(s,d,v=!0){this._width=s,this._height=d,v&&this._constrain(),this._calcMatrices()}getMaxBounds(){return this._latRange&&this._latRange.length===2&&this._lngRange&&this._lngRange.length===2?new Ot([this._lngRange[0],this._latRange[0]],[this._lngRange[1],this._latRange[1]]):null}setMaxBounds(s){s?(this._lngRange=[s.getWest(),s.getEast()],this._latRange=[s.getSouth(),s.getNorth()],this._constrain()):(this._lngRange=null,this._latRange=[-i.ai,i.ai])}getConstrained(s,d){return this._callbacks.getConstrained(s,d)}getCameraQueryGeometry(s,d){if(d.length===1)return[d[0],s];{let{minX:v,minY:x,maxX:T,maxY:C}=i.a2.fromPoints(d).extend(s);return[new i.P(v,x),new i.P(T,x),new i.P(T,C),new i.P(v,C),new i.P(v,x)]}}_constrain(){if(!this.center||!this._width||!this._height||this._constraining)return;this._constraining=!0;let s=this._unmodified,{center:d,zoom:v}=this.getConstrained(this.center,this.zoom);this.setCenter(d),this.setZoom(v),this._unmodified=s,this._constraining=!1}_calcMatrices(){if(this._width&&this._height){this._pixelsToGLUnits=[2/this._width,-2/this._height];let s=i.ag(new Float64Array(16));i.N(s,s,[this._width/2,-this._height/2,1]),i.M(s,s,[1,-1,0]),this._clipSpaceToPixelsMatrix=s,s=i.ag(new Float64Array(16)),i.N(s,s,[1,-1,1]),i.M(s,s,[-1,-1,0]),i.N(s,s,[2/this._width,2/this._height,1]),this._pixelsToClipSpaceMatrix=s,this._cameraToCenterDistance=.5/Math.tan(this.fovInRadians/2)*this._height}this._callbacks.calcMatrices()}calculateCenterFromCameraLngLatAlt(s,d,v,x){let T=v!==void 0?v:this.bearing,C=x=x!==void 0?x:this.pitch,R=i.a1.fromLngLat(s,d),q=-Math.cos(i.ae(C)),V=Math.sin(i.ae(C)),H=V*Math.sin(i.ae(T)),Y=-V*Math.cos(i.ae(T)),W=this.elevation,Q=d-W,ie;q*Q>=0||Math.abs(q)<.1?(ie=1e4,W=d+ie*q):ie=-Q/q;let ve,ge,ye=i.aQ(1,R.y),Ie=0;do{if(Ie+=1,Ie>10)break;ge=ie/ye,ve=new i.a1(R.x+H*ge,R.y+Y*ge),ye=1/ve.meterInMercatorCoordinateUnits()}while(Math.abs(ie-ge*ye)>1e-12);return{center:ve.toLngLat(),elevation:W,zoom:i.ak(this.height/2/Math.tan(this.fovInRadians/2)/ge/this.tileSize)}}recalculateZoomAndCenter(s){if(this.elevation-s==0)return;let d=i.aj(1,this.center.lat)*this.worldSize,v=this.cameraToCenterDistance/d,x=i.a1.fromLngLat(this.center,this.elevation),T=nt(this.center,this.elevation,this.pitch,this.bearing,v);this._elevation=s;let C=this.calculateCenterFromCameraLngLatAlt(T.toLngLat(),i.aQ(T.z,x.y),this.bearing,this.pitch);this._elevation=C.elevation,this._center=C.center,this.setZoom(C.zoom)}getCameraPoint(){let s=Math.tan(this.pitchInRadians)*(this.cameraToCenterDistance||1);return this.centerPoint.add(new i.P(s*Math.sin(this.rollInRadians),s*Math.cos(this.rollInRadians)))}getCameraAltitude(){return Math.cos(this.pitchInRadians)*this._cameraToCenterDistance/this._pixelPerMeter+this.elevation}getCameraLngLat(){let s=i.aj(1,this.center.lat)*this.worldSize;return nt(this.center,this.elevation,this.pitch,this.bearing,this.cameraToCenterDistance/s).toLngLat()}getMercatorTileCoordinates(s){if(!s)return[0,0,1,1];let d=s.canonical.z>=0?1<<s.canonical.z:Math.pow(2,s.canonical.z);return[s.canonical.x/d,s.canonical.y/d,1/d/i.$,1/d/i.$]}}class as{constructor(s,d){this.min=s,this.max=d,this.center=i.aR([],i.aS([],this.min,this.max),.5)}quadrant(s){let d=[s%2==0,s<2],v=i.aT(this.min),x=i.aT(this.max);for(let T=0;T<d.length;T++)v[T]=d[T]?this.min[T]:this.center[T],x[T]=d[T]?this.center[T]:this.max[T];return x[2]=this.max[2],new as(v,x)}distanceX(s){return Math.max(Math.min(this.max[0],s[0]),this.min[0])-s[0]}distanceY(s){return Math.max(Math.min(this.max[1],s[1]),this.min[1])-s[1]}intersectsFrustum(s){let d=!0;for(let v=0;v<s.planes.length;v++){let x=this.intersectsPlane(s.planes[v]);if(x===0)return 0;x===1&&(d=!1)}return d?2:s.aabb.min[0]>this.max[0]||s.aabb.min[1]>this.max[1]||s.aabb.min[2]>this.max[2]||s.aabb.max[0]<this.min[0]||s.aabb.max[1]<this.min[1]||s.aabb.max[2]<this.min[2]?0:1}intersectsPlane(s){let d=s[3],v=s[3];for(let x=0;x<3;x++)s[x]>0?(d+=s[x]*this.min[x],v+=s[x]*this.max[x]):(v+=s[x]*this.min[x],d+=s[x]*this.max[x]);return d>=0?2:v<0?0:1}}class Ki{distanceToTile2d(s,d,v,x){let T=x.distanceX([s,d]),C=x.distanceY([s,d]);return Math.hypot(T,C)}getWrap(s,d,v){return v}getTileBoundingVolume(s,d,v,x){var T,C;let R=0,q=0;if(x!=null&&x.terrain){let H=new i.Z(s.z,d,s.z,s.x,s.y),Y=x.terrain.getMinMaxElevation(H);R=(T=Y.minElevation)!==null&&T!==void 0?T:Math.min(0,v),q=(C=Y.maxElevation)!==null&&C!==void 0?C:Math.max(0,v)}let V=1<<s.z;return new as([d+s.x/V,s.y/V,R],[d+(s.x+1)/V,(s.y+1)/V,q])}allowVariableZoom(s,d){let v=s.fov*(Math.abs(Math.cos(s.rollInRadians))*s.height+Math.abs(Math.sin(s.rollInRadians))*s.width)/s.height,x=i.ah(78.5-v/2,0,60);return!!d.terrain||s.pitch>x}allowWorldCopies(){return!0}prepareNextFrame(){}}class Di{constructor(s,d,v){this.points=s,this.planes=d,this.aabb=v}static fromInvProjectionMatrix(s,d=1,v=0,x,T){let C=T?[[6,5,4],[0,1,2],[0,3,7],[2,1,5],[3,2,6],[0,4,5]]:[[0,1,2],[6,5,4],[0,3,7],[2,1,5],[3,2,6],[0,4,5]],R=Math.pow(2,v),q=[[-1,1,-1,1],[1,1,-1,1],[1,-1,-1,1],[-1,-1,-1,1],[-1,1,1,1],[1,1,1,1],[1,-1,1,1],[-1,-1,1,1]].map(W=>function(Q,ie,ve,ge){let ye=i.aw([],Q,ie),Ie=1/ye[3]/ve*ge;return i.aY(ye,ye,[Ie,Ie,1/ye[3],Ie])}(W,s,d,R));x&&function(W,Q,ie,ve){let ge=ve?4:0,ye=ve?0:4,Ie=0,Re=[],Pe=[];for(let Ne=0;Ne<4;Ne++){let Qe=i.aU([],W[Ne+ye],W[Ne+ge]),ht=i.aZ(Qe);i.aR(Qe,Qe,1/ht),Re.push(ht),Pe.push(Qe)}for(let Ne=0;Ne<4;Ne++){let Qe=i.a_(W[Ne+ge],Pe[Ne],ie);Ie=Qe!==null&&Qe>=0?Math.max(Ie,Qe):Math.max(Ie,Re[Ne])}let ze=function(Ne,Qe){let ht=i.aU([],Ne[Qe[0]],Ne[Qe[1]]),it=i.aU([],Ne[Qe[2]],Ne[Qe[1]]),at=[0,0,0,0];return i.aV(at,i.aW([],ht,it)),at[3]=-i.aX(at,Ne[Qe[0]]),at}(W,Q),He=function(Ne,Qe){let ht=i.a$(Ne),it=i.b0([],Ne,1/ht),at=i.aU([],Qe,i.aR([],it,i.aX(Qe,it))),dt=i.a$(at);if(dt>0){let Vt=Math.sqrt(1-it[3]*it[3]),Wt=i.aR([],it,-it[3]),Nt=i.aS([],Wt,i.aR([],at,Vt/dt));return i.b1(Qe,Nt)}return null}(ie,ze);if(He!==null){let Ne=He/i.aX(Pe[0],ze);Ie=Math.min(Ie,Ne)}for(let Ne=0;Ne<4;Ne++){let Qe=Math.min(Ie,Re[Ne]);W[Ne+ye]=[W[Ne+ge][0]+Pe[Ne][0]*Qe,W[Ne+ge][1]+Pe[Ne][1]*Qe,W[Ne+ge][2]+Pe[Ne][2]*Qe,1]}}(q,C[0],x,T);let V=C.map(W=>{let Q=i.aU([],q[W[0]],q[W[1]]),ie=i.aU([],q[W[2]],q[W[1]]),ve=i.aV([],i.aW([],Q,ie)),ge=-i.aX(ve,q[W[1]]);return ve.concat(ge)}),H=[Number.POSITIVE_INFINITY,Number.POSITIVE_INFINITY,Number.POSITIVE_INFINITY],Y=[Number.NEGATIVE_INFINITY,Number.NEGATIVE_INFINITY,Number.NEGATIVE_INFINITY];for(let W of q)for(let Q=0;Q<3;Q++)H[Q]=Math.min(H[Q],W[Q]),Y[Q]=Math.max(Y[Q],W[Q]);return new Di(q,V,new as(H,Y))}}class Fo{get pixelsToClipSpaceMatrix(){return this._helper.pixelsToClipSpaceMatrix}get clipSpaceToPixelsMatrix(){return this._helper.clipSpaceToPixelsMatrix}get pixelsToGLUnits(){return this._helper.pixelsToGLUnits}get centerOffset(){return this._helper.centerOffset}get size(){return this._helper.size}get rotationMatrix(){return this._helper.rotationMatrix}get centerPoint(){return this._helper.centerPoint}get pixelsPerMeter(){return this._helper.pixelsPerMeter}setMinZoom(s){this._helper.setMinZoom(s)}setMaxZoom(s){this._helper.setMaxZoom(s)}setMinPitch(s){this._helper.setMinPitch(s)}setMaxPitch(s){this._helper.setMaxPitch(s)}setRenderWorldCopies(s){this._helper.setRenderWorldCopies(s)}setBearing(s){this._helper.setBearing(s)}setPitch(s){this._helper.setPitch(s)}setRoll(s){this._helper.setRoll(s)}setFov(s){this._helper.setFov(s)}setZoom(s){this._helper.setZoom(s)}setCenter(s){this._helper.setCenter(s)}setElevation(s){this._helper.setElevation(s)}setMinElevationForCurrentTile(s){this._helper.setMinElevationForCurrentTile(s)}setPadding(s){this._helper.setPadding(s)}interpolatePadding(s,d,v){return this._helper.interpolatePadding(s,d,v)}isPaddingEqual(s){return this._helper.isPaddingEqual(s)}resize(s,d,v=!0){this._helper.resize(s,d,v)}getMaxBounds(){return this._helper.getMaxBounds()}setMaxBounds(s){this._helper.setMaxBounds(s)}overrideNearFarZ(s,d){this._helper.overrideNearFarZ(s,d)}clearNearFarZOverride(){this._helper.clearNearFarZOverride()}getCameraQueryGeometry(s){return this._helper.getCameraQueryGeometry(this.getCameraPoint(),s)}get tileSize(){return this._helper.tileSize}get tileZoom(){return this._helper.tileZoom}get scale(){return this._helper.scale}get worldSize(){return this._helper.worldSize}get width(){return this._helper.width}get height(){return this._helper.height}get lngRange(){return this._helper.lngRange}get latRange(){return this._helper.latRange}get minZoom(){return this._helper.minZoom}get maxZoom(){return this._helper.maxZoom}get zoom(){return this._helper.zoom}get center(){return this._helper.center}get minPitch(){return this._helper.minPitch}get maxPitch(){return this._helper.maxPitch}get pitch(){return this._helper.pitch}get pitchInRadians(){return this._helper.pitchInRadians}get roll(){return this._helper.roll}get rollInRadians(){return this._helper.rollInRadians}get bearing(){return this._helper.bearing}get bearingInRadians(){return this._helper.bearingInRadians}get fov(){return this._helper.fov}get fovInRadians(){return this._helper.fovInRadians}get elevation(){return this._helper.elevation}get minElevationForCurrentTile(){return this._helper.minElevationForCurrentTile}get padding(){return this._helper.padding}get unmodified(){return this._helper.unmodified}get renderWorldCopies(){return this._helper.renderWorldCopies}get cameraToCenterDistance(){return this._helper.cameraToCenterDistance}get nearZ(){return this._helper.nearZ}get farZ(){return this._helper.farZ}get autoCalculateNearFarZ(){return this._helper.autoCalculateNearFarZ}setTransitionState(s,d){}constructor(s,d,v,x,T){this._posMatrixCache=new Map,this._alignedPosMatrixCache=new Map,this._fogMatrixCacheF32=new Map,this._helper=new _a({calcMatrices:()=>{this._calcMatrices()},getConstrained:(C,R)=>this.getConstrained(C,R)},s,d,v,x,T),this._coveringTilesDetailsProvider=new Ki}clone(){let s=new Fo;return s.apply(this),s}apply(s,d,v){this._helper.apply(s,d,v)}get cameraPosition(){return this._cameraPosition}get projectionMatrix(){return this._projectionMatrix}get modelViewProjectionMatrix(){return this._viewProjMatrix}get inverseProjectionMatrix(){return this._invProjMatrix}get mercatorMatrix(){return this._mercatorMatrix}getVisibleUnwrappedCoordinates(s){let d=[new i.b2(0,s)];if(this._helper._renderWorldCopies){let v=this.screenPointToMercatorCoordinate(new i.P(0,0)),x=this.screenPointToMercatorCoordinate(new i.P(this._helper._width,0)),T=this.screenPointToMercatorCoordinate(new i.P(this._helper._width,this._helper._height)),C=this.screenPointToMercatorCoordinate(new i.P(0,this._helper._height)),R=Math.floor(Math.min(v.x,x.x,T.x,C.x)),q=Math.floor(Math.max(v.x,x.x,T.x,C.x)),V=1;for(let H=R-V;H<=q+V;H++)H!==0&&d.push(new i.b2(H,s))}return d}getCameraFrustum(){return Di.fromInvProjectionMatrix(this._invViewProjMatrix,this.worldSize)}getClippingPlane(){return null}getCoveringTilesDetailsProvider(){return this._coveringTilesDetailsProvider}recalculateZoomAndCenter(s){let d=this.screenPointToLocation(this.centerPoint,s),v=s?s.getElevationForLngLatZoom(d,this._helper._tileZoom):0;this._helper.recalculateZoomAndCenter(v)}setLocationAtPoint(s,d){let v=i.aj(this.elevation,this.center.lat),x=this.screenPointToMercatorCoordinateAtZ(d,v),T=this.screenPointToMercatorCoordinateAtZ(this.centerPoint,v),C=i.a1.fromLngLat(s),R=new i.a1(C.x-(x.x-T.x),C.y-(x.y-T.y));this.setCenter(R==null?void 0:R.toLngLat()),this._helper._renderWorldCopies&&this.setCenter(this.center.wrap())}locationToScreenPoint(s,d){return d?this.coordinatePoint(i.a1.fromLngLat(s),d.getElevationForLngLatZoom(s,this._helper._tileZoom),this._pixelMatrix3D):this.coordinatePoint(i.a1.fromLngLat(s))}screenPointToLocation(s,d){var v;return(v=this.screenPointToMercatorCoordinate(s,d))===null||v===void 0?void 0:v.toLngLat()}screenPointToMercatorCoordinate(s,d){if(d){let v=d.pointCoordinate(s);if(v!=null)return v}return this.screenPointToMercatorCoordinateAtZ(s)}screenPointToMercatorCoordinateAtZ(s,d){let v=d||0,x=[s.x,s.y,0,1],T=[s.x,s.y,1,1];i.aw(x,x,this._pixelMatrixInverse),i.aw(T,T,this._pixelMatrixInverse);let C=x[3],R=T[3],q=x[1]/C,V=T[1]/R,H=x[2]/C,Y=T[2]/R,W=H===Y?0:(v-H)/(Y-H);return new i.a1(i.C.number(x[0]/C,T[0]/R,W)/this.worldSize,i.C.number(q,V,W)/this.worldSize,v)}coordinatePoint(s,d=0,v=this._pixelMatrix){let x=[s.x*this.worldSize,s.y*this.worldSize,d,1];return i.aw(x,x,v),new i.P(x[0]/x[3],x[1]/x[3])}getBounds(){let s=Math.max(0,this._helper._height/2-Fe(this));return new Ot().extend(this.screenPointToLocation(new i.P(0,s))).extend(this.screenPointToLocation(new i.P(this._helper._width,s))).extend(this.screenPointToLocation(new i.P(this._helper._width,this._helper._height))).extend(this.screenPointToLocation(new i.P(0,this._helper._height)))}isPointOnMapSurface(s,d){return d?d.pointCoordinate(s)!=null:s.y>this.height/2-Fe(this)}calculatePosMatrix(s,d=!1,v){var x;let T=(x=s.key)!==null&&x!==void 0?x:i.b3(s.wrap,s.canonical.z,s.canonical.z,s.canonical.x,s.canonical.y),C=d?this._alignedPosMatrixCache:this._posMatrixCache;if(C.has(T)){let V=C.get(T);return v?V.f32:V.f64}let R=We(s,this.worldSize);i.O(R,d?this._alignedProjMatrix:this._viewProjMatrix,R);let q={f64:R,f32:new Float32Array(R)};return C.set(T,q),v?q.f32:q.f64}calculateFogMatrix(s){let d=s.key,v=this._fogMatrixCacheF32;if(v.has(d))return v.get(d);let x=We(s,this.worldSize);return i.O(x,this._fogMatrix,x),v.set(d,new Float32Array(x)),v.get(d)}getConstrained(s,d){d=i.ah(+d,this.minZoom,this.maxZoom);let v={center:new i.S(s.lng,s.lat),zoom:d},x=this._helper._lngRange;if(!this._helper._renderWorldCopies&&x===null){let Re=179.9999999999;x=[-Re,Re]}let T=this.tileSize*i.af(v.zoom),C=0,R=T,q=0,V=T,H=0,Y=0,{x:W,y:Q}=this.size;if(this._helper._latRange){let Re=this._helper._latRange;C=i.U(Re[1])*T,R=i.U(Re[0])*T,R-C<Q&&(H=Q/(R-C))}x&&(q=i.aO(i.V(x[0])*T,0,T),V=i.aO(i.V(x[1])*T,0,T),V<q&&(V+=T),V-q<W&&(Y=W/(V-q)));let{x:ie,y:ve}=ue(T,s),ge,ye,Ie=Math.max(Y||0,H||0);if(Ie){let Re=new i.P(Y?(V+q)/2:ie,H?(R+C)/2:ve);return v.center=we(T,Re).wrap(),v.zoom+=i.ak(Ie),v}if(this._helper._latRange){let Re=Q/2;ve-Re<C&&(ye=C+Re),ve+Re>R&&(ye=R-Re)}if(x){let Re=(q+V)/2,Pe=ie;this._helper._renderWorldCopies&&(Pe=i.aO(ie,Re-T/2,Re+T/2));let ze=W/2;Pe-ze<q&&(ge=q+ze),Pe+ze>V&&(ge=V-ze)}if(ge!==void 0||ye!==void 0){let Re=new i.P(ge!=null?ge:ie,ye!=null?ye:ve);v.center=we(T,Re).wrap()}return v}calculateCenterFromCameraLngLatAlt(s,d,v,x){return this._helper.calculateCenterFromCameraLngLatAlt(s,d,v,x)}_calculateNearFarZIfNeeded(s,d,v){if(!this._helper.autoCalculateNearFarZ)return;let x=Math.min(this.elevation,this.minElevationForCurrentTile,this.getCameraAltitude()-100),T=s-x*this._helper._pixelPerMeter/Math.cos(d),C=x<0?T:s,R=Math.PI/2+this.pitchInRadians,q=i.ae(this.fov)*(Math.abs(Math.cos(i.ae(this.roll)))*this.height+Math.abs(Math.sin(i.ae(this.roll)))*this.width)/this.height*(.5+v.y/this.height),V=Math.sin(q)*C/Math.sin(i.ah(Math.PI-R-q,.01,Math.PI-.01)),H=Fe(this),Y=Math.atan(H/this._helper.cameraToCenterDistance),W=i.ae(.75),Q=Y>W?2*Y*(.5+v.y/(2*H)):W,ie=Math.sin(Q)*C/Math.sin(i.ah(Math.PI-R-Q,.01,Math.PI-.01)),ve=Math.min(V,ie);this._helper._farZ=1.01*(Math.cos(Math.PI/2-d)*ve+C),this._helper._nearZ=this._helper._height/50}_calcMatrices(){if(!this._helper._height)return;let s=this.centerOffset,d=ue(this.worldSize,this.center),v=d.x,x=d.y;this._helper._pixelPerMeter=i.aj(1,this.center.lat)*this.worldSize;let T=i.ae(Math.min(this.pitch,oe)),C=Math.max(this._helper.cameraToCenterDistance/2,this._helper.cameraToCenterDistance+this._helper._elevation*this._helper._pixelPerMeter/Math.cos(T)),R;this._calculateNearFarZIfNeeded(C,T,s),R=new Float64Array(16),i.b4(R,this.fovInRadians,this._helper._width/this._helper._height,this._helper._nearZ,this._helper._farZ),this._invProjMatrix=new Float64Array(16),i.aq(this._invProjMatrix,R),R[8]=2*-s.x/this._helper._width,R[9]=2*s.y/this._helper._height,this._projectionMatrix=i.b5(R),i.N(R,R,[1,-1,1]),i.M(R,R,[0,0,-this._helper.cameraToCenterDistance]),i.b6(R,R,-this.rollInRadians),i.b7(R,R,this.pitchInRadians),i.b6(R,R,-this.bearingInRadians),i.M(R,R,[-v,-x,0]),this._mercatorMatrix=i.N([],R,[this.worldSize,this.worldSize,this.worldSize]),i.N(R,R,[1,1,this._helper._pixelPerMeter]),this._pixelMatrix=i.O(new Float64Array(16),this.clipSpaceToPixelsMatrix,R),i.M(R,R,[0,0,-this.elevation]),this._viewProjMatrix=R,this._invViewProjMatrix=i.aq([],R);let q=[0,0,-1,1];i.aw(q,q,this._invViewProjMatrix),this._cameraPosition=[q[0]/q[3],q[1]/q[3],q[2]/q[3]],this._fogMatrix=new Float64Array(16),i.b4(this._fogMatrix,this.fovInRadians,this.width/this.height,C,this._helper._farZ),this._fogMatrix[8]=2*-s.x/this.width,this._fogMatrix[9]=2*s.y/this.height,i.N(this._fogMatrix,this._fogMatrix,[1,-1,1]),i.M(this._fogMatrix,this._fogMatrix,[0,0,-this.cameraToCenterDistance]),i.b6(this._fogMatrix,this._fogMatrix,-this.rollInRadians),i.b7(this._fogMatrix,this._fogMatrix,this.pitchInRadians),i.b6(this._fogMatrix,this._fogMatrix,-this.bearingInRadians),i.M(this._fogMatrix,this._fogMatrix,[-v,-x,0]),i.N(this._fogMatrix,this._fogMatrix,[1,1,this._helper._pixelPerMeter]),i.M(this._fogMatrix,this._fogMatrix,[0,0,-this.elevation]),this._pixelMatrix3D=i.O(new Float64Array(16),this.clipSpaceToPixelsMatrix,R);let V=this._helper._width%2/2,H=this._helper._height%2/2,Y=Math.cos(this.bearingInRadians),W=Math.sin(-this.bearingInRadians),Q=v-Math.round(v)+Y*V+W*H,ie=x-Math.round(x)+Y*H+W*V,ve=new Float64Array(R);if(i.M(ve,ve,[Q>.5?Q-1:Q,ie>.5?ie-1:ie,0]),this._alignedProjMatrix=ve,R=i.aq(new Float64Array(16),this._pixelMatrix),!R)throw new Error("failed to invert matrix");this._pixelMatrixInverse=R,this._clearMatrixCaches()}_clearMatrixCaches(){this._posMatrixCache.clear(),this._alignedPosMatrixCache.clear(),this._fogMatrixCacheF32.clear()}maxPitchScaleFactor(){if(!this._pixelMatrixInverse)return 1;let s=this.screenPointToMercatorCoordinate(new i.P(0,0)),d=[s.x*this.worldSize,s.y*this.worldSize,0,1];return i.aw(d,d,this._pixelMatrix)[3]/this._helper.cameraToCenterDistance}getCameraPoint(){return this._helper.getCameraPoint()}getCameraAltitude(){return this._helper.getCameraAltitude()}getCameraLngLat(){let s=i.aj(1,this.center.lat)*this.worldSize;return nt(this.center,this.elevation,this.pitch,this.bearing,this._helper.cameraToCenterDistance/s).toLngLat()}lngLatToCameraDepth(s,d){let v=i.a1.fromLngLat(s),x=[v.x*this.worldSize,v.y*this.worldSize,d,1];return i.aw(x,x,this._viewProjMatrix),x[2]/x[3]}getProjectionData(s){let{overscaledTileID:d,aligned:v,applyTerrainMatrix:x}=s,T=this._helper.getMercatorTileCoordinates(d),C=d?this.calculatePosMatrix(d,v,!0):null,R;return R=d&&d.terrainRttPosMatrix32f&&x?d.terrainRttPosMatrix32f:C||i.b8(),{mainMatrix:R,tileMercatorCoords:T,clippingPlane:[0,0,0,0],projectionTransition:0,fallbackMatrix:R}}isLocationOccluded(s){return!1}getPixelScale(){return 1}getCircleRadiusCorrection(){return 1}getPitchedTextCorrection(s,d,v){return 1}transformLightDirection(s){return i.aT(s)}getRayDirectionFromPixel(s){throw new Error("Not implemented.")}projectTileCoordinates(s,d,v,x){let T=this.calculatePosMatrix(v),C;x?(C=[s,d,x(s,d),1],i.aw(C,C,T)):(C=[s,d,0,1],Vr(C,C,T));let R=C[3];return{point:new i.P(C[0]/R,C[1]/R),signedDistanceFromCamera:R,isOccluded:!1}}populateCache(s){for(let d of s)this.calculatePosMatrix(d)}getMatrixForModel(s,d){let v=i.a1.fromLngLat(s,d),x=v.meterInMercatorCoordinateUnits(),T=i.b9();return i.M(T,T,[v.x,v.y,v.z]),i.b6(T,T,Math.PI),i.b7(T,T,Math.PI/2),i.N(T,T,[-x,x,x]),T}getProjectionDataForCustomLayer(s=!0){let d=new i.Z(0,0,0,0,0),v=this.getProjectionData({overscaledTileID:d,applyGlobeMatrix:s}),x=We(d,this.worldSize);i.O(x,this._viewProjMatrix,x),v.tileMercatorCoords=[0,0,1,1];let T=[i.$,i.$,this.worldSize/this._helper.pixelsPerMeter],C=i.ba();return i.N(C,x,T),v.fallbackMatrix=C,v.mainMatrix=C,v}getFastPathSimpleProjectionMatrix(s){return this.calculatePosMatrix(s)}}function ux(){i.w("Map cannot fit within canvas with the given bounds, padding, and/or offset.")}function hl(S){if(S.useSlerp){if(S.k<1){let s=i.bb(S.startEulerAngles.roll,S.startEulerAngles.pitch,S.startEulerAngles.bearing),d=i.bb(S.endEulerAngles.roll,S.endEulerAngles.pitch,S.endEulerAngles.bearing),v=new Float64Array(4);i.bc(v,s,d,S.k);let x=i.bd(v);S.tr.setRoll(x.roll),S.tr.setPitch(x.pitch),S.tr.setBearing(x.bearing)}else S.tr.setRoll(S.endEulerAngles.roll),S.tr.setPitch(S.endEulerAngles.pitch),S.tr.setBearing(S.endEulerAngles.bearing);}else S.tr.setRoll(i.C.number(S.startEulerAngles.roll,S.endEulerAngles.roll,S.k)),S.tr.setPitch(i.C.number(S.startEulerAngles.pitch,S.endEulerAngles.pitch,S.k)),S.tr.setBearing(i.C.number(S.startEulerAngles.bearing,S.endEulerAngles.bearing,S.k))}function Bs(S,s,d,v,x){let T=x.padding,C=ue(x.worldSize,d.getNorthWest()),R=ue(x.worldSize,d.getNorthEast()),q=ue(x.worldSize,d.getSouthEast()),V=ue(x.worldSize,d.getSouthWest()),H=i.ae(-v),Y=C.rotate(H),W=R.rotate(H),Q=q.rotate(H),ie=V.rotate(H),ve=new i.P(Math.max(Y.x,W.x,ie.x,Q.x),Math.max(Y.y,W.y,ie.y,Q.y)),ge=new i.P(Math.min(Y.x,W.x,ie.x,Q.x),Math.min(Y.y,W.y,ie.y,Q.y)),ye=ve.sub(ge),Ie=(x.width-(T.left+T.right+s.left+s.right))/ye.x,Re=(x.height-(T.top+T.bottom+s.top+s.bottom))/ye.y;if(Re<0||Ie<0)return void ux();let Pe=Math.min(i.ak(x.scale*Math.min(Ie,Re)),S.maxZoom),ze=i.P.convert(S.offset),He=new i.P((s.left-s.right)/2,(s.top-s.bottom)/2).rotate(i.ae(v)),Ne=ze.add(He).mult(x.scale/i.af(Pe));return{center:we(x.worldSize,C.add(q).div(2).sub(Ne)),zoom:Pe,bearing:v}}class Vs{get useGlobeControls(){return!1}handlePanInertia(s,d){let v=s.mag(),x=Math.abs(Fe(d));return{easingOffset:s.mult(Math.min(.75*x/v,1)),easingCenter:d.center}}handleMapControlsRollPitchBearingZoom(s,d){s.bearingDelta&&d.setBearing(d.bearing+s.bearingDelta),s.pitchDelta&&d.setPitch(d.pitch+s.pitchDelta),s.rollDelta&&d.setRoll(d.roll+s.rollDelta),s.zoomDelta&&d.setZoom(d.zoom+s.zoomDelta)}handleMapControlsPan(s,d,v){s.around.distSqr(d.centerPoint)<.01||d.setLocationAtPoint(v,s.around)}cameraForBoxAndBearing(s,d,v,x,T){return Bs(s,d,v,x,T)}handleJumpToCenterZoom(s,d){s.zoom!==(d.zoom!==void 0?+d.zoom:s.zoom)&&s.setZoom(+d.zoom),d.center!==void 0&&s.setCenter(i.S.convert(d.center))}handleEaseTo(s,d){let v=s.zoom,x=s.padding,T={roll:s.roll,pitch:s.pitch,bearing:s.bearing},C={roll:d.roll===void 0?s.roll:d.roll,pitch:d.pitch===void 0?s.pitch:d.pitch,bearing:d.bearing===void 0?s.bearing:d.bearing},R=d.zoom!==void 0,q=!s.isPaddingEqual(d.padding),V=!1,H=R?+d.zoom:s.zoom,Y=s.centerPoint.add(d.offsetAsPoint),W=s.screenPointToLocation(Y),{center:Q,zoom:ie}=s.getConstrained(i.S.convert(d.center||W),H!=null?H:v);Mu(s,Q);let ve=ue(s.worldSize,W),ge=ue(s.worldSize,Q).sub(ve),ye=i.af(ie-v);return V=ie!==v,{easeFunc:Ie=>{if(V&&s.setZoom(i.C.number(v,ie,Ie)),i.be(T,C)||hl({startEulerAngles:T,endEulerAngles:C,tr:s,k:Ie,useSlerp:T.roll!=C.roll}),q&&(s.interpolatePadding(x,d.padding,Ie),Y=s.centerPoint.add(d.offsetAsPoint)),d.around)s.setLocationAtPoint(d.around,d.aroundPoint);else{let Re=i.af(s.zoom-v),Pe=ie>v?Math.min(2,ye):Math.max(.5,ye),ze=Math.pow(Pe,1-Ie),He=we(s.worldSize,ve.add(ge.mult(Ie*ze)).mult(Re));s.setLocationAtPoint(s.renderWorldCopies?He.wrap():He,Y)}},isZooming:V,elevationCenter:Q}}handleFlyTo(s,d){let v=d.zoom!==void 0,x=s.zoom,T=s.getConstrained(i.S.convert(d.center||d.locationAtOffset),v?+d.zoom:x),C=T.center,R=T.zoom;Mu(s,C);let q=ue(s.worldSize,d.locationAtOffset),V=ue(s.worldSize,C).sub(q),H=V.mag(),Y=i.af(R-x),W;if(d.minZoom!==void 0){let Q=Math.min(+d.minZoom,x,R),ie=s.getConstrained(C,Q).zoom;W=i.af(ie-x)}return{easeFunc:(Q,ie,ve,ge)=>{s.setZoom(Q===1?R:x+i.ak(ie));let ye=Q===1?C:we(s.worldSize,q.add(V.mult(ve)).mult(ie));s.setLocationAtPoint(s.renderWorldCopies?ye.wrap():ye,ge)},scaleOfZoom:Y,targetCenter:C,scaleOfMinZoom:W,pixelPathLength:H}}}class xi{constructor(s,d,v){this.blendFunction=s,this.blendColor=d,this.mask=v}}xi.Replace=[1,0],xi.disabled=new xi(xi.Replace,i.bf.transparent,[!1,!1,!1,!1]),xi.unblended=new xi(xi.Replace,i.bf.transparent,[!0,!0,!0,!0]),xi.alphaBlended=new xi([1,771],i.bf.transparent,[!0,!0,!0,!0]);let Um=2305;class Xr{constructor(s,d,v){this.enable=s,this.mode=d,this.frontFace=v}}Xr.disabled=new Xr(!1,1029,Um),Xr.backCCW=new Xr(!0,1029,Um),Xr.frontCCW=new Xr(!0,1028,Um);class wn{constructor(s,d,v){this.func=s,this.mask=d,this.range=v}}wn.ReadOnly=!1,wn.ReadWrite=!0,wn.disabled=new wn(519,wn.ReadOnly,[0,1]);let Qf=7680;class uo{constructor(s,d,v,x,T,C){this.test=s,this.ref=d,this.mask=v,this.fail=x,this.depthFail=T,this.pass=C}}uo.disabled=new uo({func:519,mask:0},0,0,Qf,Qf,Qf);let Cu=new WeakMap;function Rp(S){var s;if(Cu.has(S))return Cu.get(S);{let d=(s=S.getParameter(S.VERSION))===null||s===void 0?void 0:s.startsWith("WebGL 2.0");return Cu.set(S,d),d}}class jp{get awaitingQuery(){return!!this._readbackQueue}constructor(s){this._readbackWaitFrames=4,this._measureWaitFrames=6,this._texWidth=1,this._texHeight=1,this._measuredError=0,this._updateCount=0,this._lastReadbackFrame=-1e3,this._readbackQueue=null,this._cachedRenderContext=s;let d=s.context,v=d.gl;this._texFormat=v.RGBA,this._texType=v.UNSIGNED_BYTE;let x=new i.aL;x.emplaceBack(-1,-1),x.emplaceBack(2,-1),x.emplaceBack(-1,2);let T=new i.aN;T.emplaceBack(0,1,2),this._fullscreenTriangle=new Pi(d.createVertexBuffer(x,bi.members),d.createIndexBuffer(T),i.aM.simpleSegment(0,0,x.length,T.length)),this._resultBuffer=new Uint8Array(4),d.activeTexture.set(v.TEXTURE1);let C=v.createTexture();v.bindTexture(v.TEXTURE_2D,C),v.texParameteri(v.TEXTURE_2D,v.TEXTURE_WRAP_S,v.CLAMP_TO_EDGE),v.texParameteri(v.TEXTURE_2D,v.TEXTURE_WRAP_T,v.CLAMP_TO_EDGE),v.texParameteri(v.TEXTURE_2D,v.TEXTURE_MIN_FILTER,v.NEAREST),v.texParameteri(v.TEXTURE_2D,v.TEXTURE_MAG_FILTER,v.NEAREST),v.texImage2D(v.TEXTURE_2D,0,this._texFormat,this._texWidth,this._texHeight,0,this._texFormat,this._texType,null),this._fbo=d.createFramebuffer(this._texWidth,this._texHeight,!1,!1),this._fbo.colorAttachment.set(C),Rp(v)&&(this._pbo=v.createBuffer(),v.bindBuffer(v.PIXEL_PACK_BUFFER,this._pbo),v.bufferData(v.PIXEL_PACK_BUFFER,4,v.STREAM_READ),v.bindBuffer(v.PIXEL_PACK_BUFFER,null))}destroy(){let s=this._cachedRenderContext.context.gl;this._fullscreenTriangle.destroy(),this._fbo.destroy(),s.deleteBuffer(this._pbo),this._fullscreenTriangle=null,this._fbo=null,this._pbo=null,this._resultBuffer=null}updateErrorLoop(s,d){let v=this._updateCount;return this._readbackQueue?v>=this._readbackQueue.frameNumberIssued+this._readbackWaitFrames&&this._tryReadback():v>=this._lastReadbackFrame+this._measureWaitFrames&&this._renderErrorTexture(s,d),this._updateCount++,this._measuredError}_bindFramebuffer(){let s=this._cachedRenderContext.context,d=s.gl;s.activeTexture.set(d.TEXTURE1),d.bindTexture(d.TEXTURE_2D,this._fbo.colorAttachment.get()),s.bindFramebuffer.set(this._fbo.framebuffer)}_renderErrorTexture(s,d){let v=this._cachedRenderContext.context,x=v.gl;if(this._bindFramebuffer(),v.viewport.set([0,0,this._texWidth,this._texHeight]),v.clear({color:i.bf.transparent}),this._cachedRenderContext.useProgram("projectionErrorMeasurement").draw(v,x.TRIANGLES,wn.disabled,uo.disabled,xi.unblended,Xr.disabled,((T,C)=>({u_input:T,u_output_expected:C}))(s,d),null,null,"$clipping",this._fullscreenTriangle.vertexBuffer,this._fullscreenTriangle.indexBuffer,this._fullscreenTriangle.segments),this._pbo&&Rp(x)){x.bindBuffer(x.PIXEL_PACK_BUFFER,this._pbo),x.readBuffer(x.COLOR_ATTACHMENT0),x.readPixels(0,0,this._texWidth,this._texHeight,this._texFormat,this._texType,0),x.bindBuffer(x.PIXEL_PACK_BUFFER,null);let T=x.fenceSync(x.SYNC_GPU_COMMANDS_COMPLETE,0);x.flush(),this._readbackQueue={frameNumberIssued:this._updateCount,sync:T}}else this._readbackQueue={frameNumberIssued:this._updateCount,sync:null}}_tryReadback(){let s=this._cachedRenderContext.context.gl;if(this._pbo&&this._readbackQueue&&Rp(s)){let d=s.clientWaitSync(this._readbackQueue.sync,0,0);if(d===s.WAIT_FAILED)return i.w("WebGL2 clientWaitSync failed."),this._readbackQueue=null,void(this._lastReadbackFrame=this._updateCount);if(d===s.TIMEOUT_EXPIRED)return;s.bindBuffer(s.PIXEL_PACK_BUFFER,this._pbo),s.getBufferSubData(s.PIXEL_PACK_BUFFER,0,this._resultBuffer,0,4),s.bindBuffer(s.PIXEL_PACK_BUFFER,null)}else this._bindFramebuffer(),s.readPixels(0,0,this._texWidth,this._texHeight,this._texFormat,this._texType,this._resultBuffer);this._readbackQueue=null,this._measuredError=jp._parseRGBA8float(this._resultBuffer),this._lastReadbackFrame=this._updateCount}static _parseRGBA8float(s){let d=0;return d+=s[0]/256,d+=s[1]/65536,d+=s[2]/16777216,s[3]<127&&(d=-d),d/128}}let cx=i.$/128;function R2(S,s){let d=S.granularity!==void 0?Math.max(S.granularity,1):1,v=d+(S.generateBorders?2:0),x=d+(S.extendToNorthPole||S.generateBorders?1:0)+(S.extendToSouthPole||S.generateBorders?1:0),T=v+1,C=x+1,R=S.generateBorders?-1:0,q=S.generateBorders||S.extendToNorthPole?-1:0,V=d+(S.generateBorders?1:0),H=d+(S.generateBorders||S.extendToSouthPole?1:0),Y=T*C,W=v*x*6,Q=T*C>65536;if(Q&&s==="16bit")throw new Error("Granularity is too large and meshes would not fit inside 16 bit vertex indices.");let ie=Q||s==="32bit",ve=new Int16Array(2*Y),ge=0;for(let Re=q;Re<=H;Re++)for(let Pe=R;Pe<=V;Pe++){let ze=Pe/d*i.$;Pe===-1&&(ze=-cx),Pe===d+1&&(ze=i.$+cx);let He=Re/d*i.$;Re===-1&&(He=S.extendToNorthPole?i.bh:-cx),Re===d+1&&(He=S.extendToSouthPole?i.bi:i.$+cx),ve[ge++]=ze,ve[ge++]=He}let ye=ie?new Uint32Array(W):new Uint16Array(W),Ie=0;for(let Re=0;Re<x;Re++)for(let Pe=0;Pe<v;Pe++){let ze=Pe+1+Re*T,He=Pe+(Re+1)*T,Ne=Pe+1+(Re+1)*T;ye[Ie++]=Pe+Re*T,ye[Ie++]=He,ye[Ie++]=ze,ye[Ie++]=ze,ye[Ie++]=He,ye[Ie++]=Ne}return{vertices:ve.buffer.slice(0),indices:ye.buffer.slice(0),uses32bitIndices:ie}}let Ev=new i.aK({fill:new i.bj(128,2),line:new i.bj(512,0),tile:new i.bj(128,32),stencil:new i.bj(128,1),circle:3});class h1{constructor(){this._tileMeshCache={},this._errorCorrectionUsable=0,this._errorMeasurementLastValue=0,this._errorCorrectionPreviousValue=0,this._errorMeasurementLastChangeTime=-1e3}get name(){return"vertical-perspective"}get transitionState(){return 1}get useSubdivision(){return!0}get shaderVariantName(){return"globe"}get shaderDefine(){return"#define GLOBE"}get shaderPreludeCode(){return Vo.projectionGlobe}get vertexShaderPreludeCode(){return Vo.projectionMercator.vertexSource}get subdivisionGranularity(){return Ev}get useGlobeControls(){return!0}get latitudeErrorCorrectionRadians(){return this._errorCorrectionUsable}destroy(){this._errorMeasurement&&this._errorMeasurement.destroy()}updateGPUdependent(s){this._errorMeasurement||(this._errorMeasurement=new jp(s));let d=i.U(this._errorQueryLatitudeDegrees),v=2*Math.atan(Math.exp(Math.PI-d*Math.PI*2))-.5*Math.PI,x=this._errorMeasurement.updateErrorLoop(d,v),T=y.now();x!==this._errorMeasurementLastValue&&(this._errorCorrectionPreviousValue=this._errorCorrectionUsable,this._errorMeasurementLastValue=x,this._errorMeasurementLastChangeTime=T);let C=Math.min(Math.max((T-this._errorMeasurementLastChangeTime)/1e3/.5,0),1);this._errorCorrectionUsable=i.bk(this._errorCorrectionPreviousValue,-this._errorMeasurementLastValue,i.bl(C))}_getMeshKey(s){return`${s.granularity.toString(36)}_${s.generateBorders?"b":""}${s.extendToNorthPole?"n":""}${s.extendToSouthPole?"s":""}`}getMeshFromTileID(s,d,v,x,T){let C=(T==="stencil"?Ev.stencil:Ev.tile).getGranularityForZoomLevel(d.z);return this._getMesh(s,{granularity:C,generateBorders:v,extendToNorthPole:d.y===0&&x,extendToSouthPole:d.y===(1<<d.z)-1&&x})}_getMesh(s,d){let v=this._getMeshKey(d);if(v in this._tileMeshCache)return this._tileMeshCache[v];let x=function(T,C){let R=R2(C,"16bit"),q=i.aL.deserialize({arrayBuffer:R.vertices,length:R.vertices.byteLength/2/2}),V=i.aN.deserialize({arrayBuffer:R.indices,length:R.indices.byteLength/2/3});return new Pi(T.createVertexBuffer(q,bi.members),T.createIndexBuffer(V),i.aM.simpleSegment(0,0,q.length,V.length))}(s,d);return this._tileMeshCache[v]=x,x}recalculate(s){}hasTransition(){let s=y.now(),d=!1;return d=d||(s-this._errorMeasurementLastChangeTime)/1e3<.7,d=d||this._errorMeasurement&&this._errorMeasurement.awaitingQuery,d}setErrorQueryLatitudeDegrees(s){this._errorQueryLatitudeDegrees=s}}let px=new i.r({type:new i.D(i.v.projection.type)});class fx extends i.E{constructor(s){super(),this._transitionable=new i.t(px),this.setProjection(s),this._transitioning=this._transitionable.untransitioned(),this.recalculate(new i.F(0)),this._mercatorProjection=new vn,this._verticalPerspectiveProjection=new h1}get transitionState(){let s=this.properties.get("type");if(typeof s=="string"&&s==="mercator")return 0;if(typeof s=="string"&&s==="vertical-perspective")return 1;if(s instanceof i.bm){if(s.from==="vertical-perspective"&&s.to==="mercator")return 1-s.transition;if(s.from==="mercator"&&s.to==="vertical-perspective")return s.transition}return 1}get useGlobeRendering(){return this.transitionState>0}get latitudeErrorCorrectionRadians(){return this._verticalPerspectiveProjection.latitudeErrorCorrectionRadians}get currentProjection(){return this.useGlobeRendering?this._verticalPerspectiveProjection:this._mercatorProjection}get name(){return"globe"}get useSubdivision(){return this.currentProjection.useSubdivision}get shaderVariantName(){return this.currentProjection.shaderVariantName}get shaderDefine(){return this.currentProjection.shaderDefine}get shaderPreludeCode(){return this.currentProjection.shaderPreludeCode}get vertexShaderPreludeCode(){return this.currentProjection.vertexShaderPreludeCode}get subdivisionGranularity(){return this.currentProjection.subdivisionGranularity}get useGlobeControls(){return this.transitionState>0}destroy(){this._mercatorProjection.destroy(),this._verticalPerspectiveProjection.destroy()}updateGPUdependent(s){this._mercatorProjection.updateGPUdependent(s),this._verticalPerspectiveProjection.updateGPUdependent(s)}getMeshFromTileID(s,d,v,x,T){return this.currentProjection.getMeshFromTileID(s,d,v,x,T)}setProjection(s){this._transitionable.setValue("type",(s==null?void 0:s.type)||"mercator")}updateTransitions(s){this._transitioning=this._transitionable.transitioned(s,this._transitioning)}hasTransition(){return this._transitioning.hasTransition()||this.currentProjection.hasTransition()}recalculate(s){this.properties=this._transitioning.possiblyEvaluate(s)}setErrorQueryLatitudeDegrees(s){this._verticalPerspectiveProjection.setErrorQueryLatitudeDegrees(s),this._mercatorProjection.setErrorQueryLatitudeDegrees(s)}}function dx(S){let s=Sv(S.worldSize,S.center.lat);return 2*Math.PI*s}function Xc(S,s,d,v,x){let T=1/(1<<x),C=s/i.$*T+v*T,R=i.bo((S/i.$*T+d*T)*Math.PI*2+Math.PI,2*Math.PI),q=2*Math.atan(Math.exp(Math.PI-C*Math.PI*2))-.5*Math.PI,V=Math.cos(q),H=new Float64Array(3);return H[0]=Math.sin(R)*V,H[1]=Math.sin(q),H[2]=Math.cos(R)*V,H}function ss(S){return function(s,d){let v=Math.cos(d),x=new Float64Array(3);return x[0]=Math.sin(s)*v,x[1]=Math.sin(d),x[2]=Math.cos(s)*v,x}(S.lng*Math.PI/180,S.lat*Math.PI/180)}function Sv(S,s){return S/(2*Math.PI)/Math.cos(s*Math.PI/180)}function m1(S){let s=Math.asin(S[1])/Math.PI*180,d=Math.sqrt(S[0]*S[0]+S[2]*S[2]);if(d>1e-6){let v=S[0]/d,x=Math.acos(S[2]/d),T=(v>0?x:-x)/Math.PI*180;return new i.S(i.aO(T,-180,180),s)}return new i.S(0,s)}function Bm(S){return Math.cos(S*Math.PI/180)}function ca(S,s){let d=Bm(S),v=Bm(s);return i.ak(v/d)}function zN(S,s){let d=S.rotate(s.bearingInRadians),v=s.zoom+ca(s.center.lat,0),x=i.bk(1/Bm(s.center.lat),1/Bm(Math.min(Math.abs(s.center.lat),60)),i.bn(v,7,3,0,1)),T=360/dx({worldSize:s.worldSize,center:{lat:s.center.lat}});return new i.S(s.center.lng-d.x*T*x,i.ah(s.center.lat+d.y*T,-i.ai,i.ai))}function g1(S){let s=.5*S,d=Math.sin(s),v=Math.cos(s);return Math.log(d+v)-Math.log(v-d)}function j2(S,s,d,v){let x=S.lat+d*v;if(Math.abs(d)>1){let T=(Math.sign(S.lat+d)!==Math.sign(S.lat)?-Math.abs(S.lat):Math.abs(S.lat))*Math.PI/180,C=Math.abs(S.lat+d)*Math.PI/180,R=g1(T+v*(C-T)),q=g1(T),V=g1(C);return new i.S(S.lng+s*((R-q)/(V-q)),x)}return new i.S(S.lng+s*v,x)}class cB{constructor(s){this._cachePrevious=new Map,this._cache=new Map,this._hadAnyChanges=!1,this._boundingVolumeFactory=s}swapBuffers(){if(!this._hadAnyChanges)return;let s=this._cachePrevious;this._cachePrevious=this._cache,this._cache=s,this._cache.clear(),this._hadAnyChanges=!1}getTileBoundingVolume(s,d,v,x){let T=`${s.z}_${s.x}_${s.y}_${x!=null&&x.terrain?"t":""}`,C=this._cache.get(T);if(C)return C;let R=this._cachePrevious.get(T);if(R)return this._cache.set(T,R),R;let q=this._boundingVolumeFactory(s,d,v,x);return this._cache.set(T,q),this._hadAnyChanges=!0,q}}class Tv{constructor(s,d,v,x){this.min=v,this.max=x,this.points=s,this.planes=d}static fromAabb(s,d){let v=[];for(let x=0;x<8;x++)v.push([1&~x?s[0]:d[0],(x>>1&1)==1?d[1]:s[1],(x>>2&1)==1?d[2]:s[2]]);return new Tv(v,[[-1,0,0,d[0]],[1,0,0,-s[0]],[0,-1,0,d[1]],[0,1,0,-s[1]],[0,0,-1,d[2]],[0,0,1,-s[2]]],s,d)}static fromCenterSizeAngles(s,d,v){let x=i.br([],v[0],v[1],v[2]),T=i.bs([],[d[0],0,0],x),C=i.bs([],[0,d[1],0],x),R=i.bs([],[0,0,d[2]],x),q=[...s],V=[...s];for(let Y=0;Y<8;Y++)for(let W=0;W<3;W++){let Q=s[W]+T[W]*(1&~Y?-1:1)+C[W]*((Y>>1&1)==1?1:-1)+R[W]*((Y>>2&1)==1?1:-1);q[W]=Math.min(q[W],Q),V[W]=Math.max(V[W],Q)}let H=[];for(let Y=0;Y<8;Y++){let W=[...s];i.aS(W,W,i.aR([],T,1&~Y?-1:1)),i.aS(W,W,i.aR([],C,(Y>>1&1)==1?1:-1)),i.aS(W,W,i.aR([],R,(Y>>2&1)==1?1:-1)),H.push(W)}return new Tv(H,[[...T,-i.aX(T,H[0])],[...C,-i.aX(C,H[0])],[...R,-i.aX(R,H[0])],[-T[0],-T[1],-T[2],-i.aX(T,H[7])],[-C[0],-C[1],-C[2],-i.aX(C,H[7])],[-R[0],-R[1],-R[2],-i.aX(R,H[7])]],q,V)}intersectsFrustum(s){let d=!0,v=this.points.length,x=this.planes.length,T=s.planes.length,C=s.points.length;for(let R=0;R<T;R++){let q=s.planes[R],V=0;for(let H=0;H<v;H++){let Y=this.points[H];q[0]*Y[0]+q[1]*Y[1]+q[2]*Y[2]+q[3]>=0&&V++}if(V===0)return 0;V<v&&(d=!1)}if(d)return 2;for(let R=0;R<x;R++){let q=this.planes[R],V=0;for(let H=0;H<C;H++){let Y=s.points[H];q[0]*Y[0]+q[1]*Y[1]+q[2]*Y[2]+q[3]>=0&&V++}if(V===0)return 0}return 1}intersectsPlane(s){let d=this.points.length,v=0;for(let x=0;x<d;x++){let T=this.points[x];s[0]*T[0]+s[1]*T[1]+s[2]*T[2]+s[3]>=0&&v++}return v===d?2:v===0?0:1}}function Ms(S,s,d){let v=S-s;return v<0?-v:Math.max(0,v-d)}function v1(S,s,d,v,x){let T=S-d,C;return C=T<0?Math.min(-T,1+T-x):T>1?Math.min(Math.max(T-x,0),1-T):0,Math.max(C,Ms(s,v,x))}class qp{constructor(){this._boundingVolumeCache=new cB(this._computeTileBoundingVolume)}prepareNextFrame(){this._boundingVolumeCache.swapBuffers()}distanceToTile2d(s,d,v,x){let T=1<<v.z,C=1/T,R=v.x/T,q=v.y/T,V=2;return V=Math.min(V,v1(s,d,R,q,C)),V=Math.min(V,v1(s,d,R+.5,-q-C,C)),V=Math.min(V,v1(s,d,R+.5,2-q-C,C)),V}getWrap(s,d,v){let x=1<<d.z,T=1/x,C=d.x/x,R=Ms(s.x,C,T),q=Ms(s.x,C-1,T),V=Ms(s.x,C+1,T),H=Math.min(R,q,V);return H===V?1:H===q?-1:0}allowVariableZoom(s,d){return gt(s,d)>4}allowWorldCopies(){return!1}getTileBoundingVolume(s,d,v,x){return this._boundingVolumeCache.getTileBoundingVolume(s,d,v,x)}_computeTileBoundingVolume(s,d,v,x){var T,C;let R=0,q=0;if(x!=null&&x.terrain){let V=new i.Z(s.z,d,s.z,s.x,s.y),H=x.terrain.getMinMaxElevation(V);R=(T=H.minElevation)!==null&&T!==void 0?T:Math.min(0,v),q=(C=H.maxElevation)!==null&&C!==void 0?C:Math.max(0,v)}if(R/=i.bu,q/=i.bu,R+=1,q+=1,s.z<=0)return Tv.fromAabb([-q,-q,-q],[q,q,q]);if(s.z===1)return Tv.fromAabb([s.x===0?-q:0,s.y===0?0:-q,-q],[s.x===0?0:q,s.y===0?q:0,q]);{let V=[Xc(0,0,s.x,s.y,s.z),Xc(i.$,0,s.x,s.y,s.z),Xc(i.$,i.$,s.x,s.y,s.z),Xc(0,i.$,s.x,s.y,s.z)],H=[];for(let at of V)H.push(i.aR([],at,q));if(q!==R)for(let at of V)H.push(i.aR([],at,R));s.y===0&&H.push([0,1,0]),s.y===(1<<s.z)-1&&H.push([0,-1,0]);let Y=[1,1,1],W=[-1,-1,-1];for(let at of H)for(let dt=0;dt<3;dt++)Y[dt]=Math.min(Y[dt],at[dt]),W[dt]=Math.max(W[dt],at[dt]);let Q=Xc(i.$/2,i.$/2,s.x,s.y,s.z),ie=i.aW([],[0,1,0],Q);i.aV(ie,ie);let ve=i.aW([],Q,ie);i.aV(ve,ve);let ge=i.aW([],V[2],V[1]);i.aV(ge,ge);let ye=i.aW([],V[0],V[3]);i.aV(ye,ye),H.push(i.aR([],Q,q)),s.y>=(1<<s.z)/2&&H.push(i.aR([],Xc(i.$/2,0,s.x,s.y,s.z),q)),s.y<(1<<s.z)/2&&H.push(i.aR([],Xc(i.$/2,i.$,s.x,s.y,s.z),q));let Ie=y1(Q,H),Re=y1(ve,H),Pe=[-Q[0],-Q[1],-Q[2],Ie.max],ze=[Q[0],Q[1],Q[2],-Ie.min],He=[-ve[0],-ve[1],-ve[2],Re.max],Ne=[ve[0],ve[1],ve[2],-Re.min],Qe=[...ge,0],ht=[...ye,0],it=[];return s.y===0?it.push(i.bt(ht,Qe,Pe),i.bt(ht,Qe,ze)):it.push(i.bt(He,Qe,Pe),i.bt(He,Qe,ze),i.bt(He,ht,Pe),i.bt(He,ht,ze)),s.y===(1<<s.z)-1?it.push(i.bt(ht,Qe,Pe),i.bt(ht,Qe,ze)):it.push(i.bt(Ne,Qe,Pe),i.bt(Ne,Qe,ze),i.bt(Ne,ht,Pe),i.bt(Ne,ht,ze)),new Tv(it,[Pe,ze,He,Ne,Qe,ht],Y,W)}}}function y1(S,s){let d=1/0,v=-1/0;for(let x of s){let T=i.aX(S,x);d=Math.min(d,T),v=Math.max(v,T)}return{min:d,max:v}}class _1{get pixelsToClipSpaceMatrix(){return this._helper.pixelsToClipSpaceMatrix}get clipSpaceToPixelsMatrix(){return this._helper.clipSpaceToPixelsMatrix}get pixelsToGLUnits(){return this._helper.pixelsToGLUnits}get centerOffset(){return this._helper.centerOffset}get size(){return this._helper.size}get rotationMatrix(){return this._helper.rotationMatrix}get centerPoint(){return this._helper.centerPoint}get pixelsPerMeter(){return this._helper.pixelsPerMeter}setMinZoom(s){this._helper.setMinZoom(s)}setMaxZoom(s){this._helper.setMaxZoom(s)}setMinPitch(s){this._helper.setMinPitch(s)}setMaxPitch(s){this._helper.setMaxPitch(s)}setRenderWorldCopies(s){this._helper.setRenderWorldCopies(s)}setBearing(s){this._helper.setBearing(s)}setPitch(s){this._helper.setPitch(s)}setRoll(s){this._helper.setRoll(s)}setFov(s){this._helper.setFov(s)}setZoom(s){this._helper.setZoom(s)}setCenter(s){this._helper.setCenter(s)}setElevation(s){this._helper.setElevation(s)}setMinElevationForCurrentTile(s){this._helper.setMinElevationForCurrentTile(s)}setPadding(s){this._helper.setPadding(s)}interpolatePadding(s,d,v){return this._helper.interpolatePadding(s,d,v)}isPaddingEqual(s){return this._helper.isPaddingEqual(s)}resize(s,d){this._helper.resize(s,d)}getMaxBounds(){return this._helper.getMaxBounds()}setMaxBounds(s){this._helper.setMaxBounds(s)}overrideNearFarZ(s,d){this._helper.overrideNearFarZ(s,d)}clearNearFarZOverride(){this._helper.clearNearFarZOverride()}getCameraQueryGeometry(s){return this._helper.getCameraQueryGeometry(this.getCameraPoint(),s)}get tileSize(){return this._helper.tileSize}get tileZoom(){return this._helper.tileZoom}get scale(){return this._helper.scale}get worldSize(){return this._helper.worldSize}get width(){return this._helper.width}get height(){return this._helper.height}get lngRange(){return this._helper.lngRange}get latRange(){return this._helper.latRange}get minZoom(){return this._helper.minZoom}get maxZoom(){return this._helper.maxZoom}get zoom(){return this._helper.zoom}get center(){return this._helper.center}get minPitch(){return this._helper.minPitch}get maxPitch(){return this._helper.maxPitch}get pitch(){return this._helper.pitch}get pitchInRadians(){return this._helper.pitchInRadians}get roll(){return this._helper.roll}get rollInRadians(){return this._helper.rollInRadians}get bearing(){return this._helper.bearing}get bearingInRadians(){return this._helper.bearingInRadians}get fov(){return this._helper.fov}get fovInRadians(){return this._helper.fovInRadians}get elevation(){return this._helper.elevation}get minElevationForCurrentTile(){return this._helper.minElevationForCurrentTile}get padding(){return this._helper.padding}get unmodified(){return this._helper.unmodified}get renderWorldCopies(){return this._helper.renderWorldCopies}get nearZ(){return this._helper.nearZ}get farZ(){return this._helper.farZ}get autoCalculateNearFarZ(){return this._helper.autoCalculateNearFarZ}setTransitionState(s){}constructor(){this._cachedClippingPlane=i.bv(),this._projectionMatrix=i.b9(),this._globeViewProjMatrix32f=i.b8(),this._globeViewProjMatrixNoCorrection=i.b9(),this._globeViewProjMatrixNoCorrectionInverted=i.b9(),this._globeProjMatrixInverted=i.b9(),this._cameraPosition=i.bp(),this._globeLatitudeErrorCorrectionRadians=0,this._helper=new _a({calcMatrices:()=>{this._calcMatrices()},getConstrained:(s,d)=>this.getConstrained(s,d)}),this._coveringTilesDetailsProvider=new qp}clone(){let s=new _1;return s.apply(this),s}apply(s,d){this._globeLatitudeErrorCorrectionRadians=d||0,this._helper.apply(s)}get projectionMatrix(){return this._projectionMatrix}get modelViewProjectionMatrix(){return this._globeViewProjMatrixNoCorrection}get inverseProjectionMatrix(){return this._globeProjMatrixInverted}get cameraPosition(){let s=i.bp();return s[0]=this._cameraPosition[0],s[1]=this._cameraPosition[1],s[2]=this._cameraPosition[2],s}get cameraToCenterDistance(){return this._helper.cameraToCenterDistance}getProjectionData(s){let{overscaledTileID:d,applyGlobeMatrix:v}=s,x=this._helper.getMercatorTileCoordinates(d);return{mainMatrix:this._globeViewProjMatrix32f,tileMercatorCoords:x,clippingPlane:this._cachedClippingPlane,projectionTransition:v?1:0,fallbackMatrix:this._globeViewProjMatrix32f}}_computeClippingPlane(s){let d=this.pitchInRadians,v=this.cameraToCenterDistance/s,x=Math.sin(d)*v,T=Math.cos(d)*v+1,C=1/Math.sqrt(x*x+T*T)*1,R=-x,q=T,V=Math.sqrt(R*R+q*q);R/=V,q/=V;let H=[0,R,q];i.bw(H,H,[0,0,0],-this.bearingInRadians),i.bx(H,H,[0,0,0],-1*this.center.lat*Math.PI/180),i.by(H,H,[0,0,0],this.center.lng*Math.PI/180);let Y=1/i.aZ(H);return i.aR(H,H,Y),[...H,-C*Y]}isLocationOccluded(s){return!this.isSurfacePointVisible(ss(s))}transformLightDirection(s){let d=this._helper._center.lng*Math.PI/180,v=this._helper._center.lat*Math.PI/180,x=Math.cos(v),T=[Math.sin(d)*x,Math.sin(v),Math.cos(d)*x],C=[T[2],0,-T[0]],R=[0,0,0];i.aW(R,C,T),i.aV(C,C),i.aV(R,R);let q=[0,0,0];return i.aV(q,[C[0]*s[0]+R[0]*s[1]+T[0]*s[2],C[1]*s[0]+R[1]*s[1]+T[1]*s[2],C[2]*s[0]+R[2]*s[1]+T[2]*s[2]]),q}getPixelScale(){return 1/Math.cos(this._helper._center.lat*Math.PI/180)}getCircleRadiusCorrection(){return Math.cos(this._helper._center.lat*Math.PI/180)}getPitchedTextCorrection(s,d,v){let x=function(R,q,V){let H=1/(1<<V.z);return new i.a1(R/i.$*H+V.x*H,q/i.$*H+V.y*H)}(s,d,v.canonical),T=(C=x.y,[i.bo(x.x*Math.PI*2+Math.PI,2*Math.PI),2*Math.atan(Math.exp(Math.PI-C*Math.PI*2))-.5*Math.PI]);var C;return this.getCircleRadiusCorrection()/Math.cos(T[1])}projectTileCoordinates(s,d,v,x){let T=v.canonical,C=Xc(s,d,T.x,T.y,T.z),R=1+(x?x(s,d):0)/i.bu,q=[C[0]*R,C[1]*R,C[2]*R,1];i.aw(q,q,this._globeViewProjMatrixNoCorrection);let V=this._cachedClippingPlane,H=V[0]*C[0]+V[1]*C[1]+V[2]*C[2]+V[3]<0;return{point:new i.P(q[0]/q[3],q[1]/q[3]),signedDistanceFromCamera:q[3],isOccluded:H}}_calcMatrices(){if(!this._helper._width||!this._helper._height)return;let s=Sv(this.worldSize,this.center.lat),d=i.ba(),v=i.ba();this._helper.autoCalculateNearFarZ&&(this._helper._nearZ=.5,this._helper._farZ=this.cameraToCenterDistance+2*s),i.b4(d,this.fovInRadians,this.width/this.height,this._helper._nearZ,this._helper._farZ);let x=this.centerOffset;d[8]=2*-x.x/this._helper._width,d[9]=2*x.y/this._helper._height,this._projectionMatrix=i.b5(d),this._globeProjMatrixInverted=i.ba(),i.aq(this._globeProjMatrixInverted,d),i.M(d,d,[0,0,-this.cameraToCenterDistance]),i.b6(d,d,this.rollInRadians),i.b7(d,d,-this.pitchInRadians),i.b6(d,d,this.bearingInRadians),i.M(d,d,[0,0,-s]);let T=i.bp();T[0]=s,T[1]=s,T[2]=s,i.b7(v,d,this.center.lat*Math.PI/180),i.bz(v,v,-this.center.lng*Math.PI/180),i.N(v,v,T),this._globeViewProjMatrixNoCorrection=v,i.b7(d,d,this.center.lat*Math.PI/180-this._globeLatitudeErrorCorrectionRadians),i.bz(d,d,-this.center.lng*Math.PI/180),i.N(d,d,T),this._globeViewProjMatrix32f=new Float32Array(d),this._globeViewProjMatrixNoCorrectionInverted=i.ba(),i.aq(this._globeViewProjMatrixNoCorrectionInverted,v);let C=i.bp();this._cameraPosition=i.bp(),this._cameraPosition[2]=this.cameraToCenterDistance/s,i.bw(this._cameraPosition,this._cameraPosition,C,-this.rollInRadians),i.bx(this._cameraPosition,this._cameraPosition,C,this.pitchInRadians),i.bw(this._cameraPosition,this._cameraPosition,C,-this.bearingInRadians),i.aS(this._cameraPosition,this._cameraPosition,[0,0,1]),i.bx(this._cameraPosition,this._cameraPosition,C,-this.center.lat*Math.PI/180),i.by(this._cameraPosition,this._cameraPosition,C,this.center.lng*Math.PI/180),this._cachedClippingPlane=this._computeClippingPlane(s);let R=i.b5(this._globeViewProjMatrixNoCorrectionInverted);i.N(R,R,[1,1,-1]),this._cachedFrustum=Di.fromInvProjectionMatrix(R,1,0,this._cachedClippingPlane,!0)}calculateFogMatrix(s){i.w("calculateFogMatrix is not supported on globe projection.");let d=i.ba();return i.ag(d),d}getVisibleUnwrappedCoordinates(s){return[new i.b2(0,s)]}getCameraFrustum(){return this._cachedFrustum}getClippingPlane(){return this._cachedClippingPlane}getCoveringTilesDetailsProvider(){return this._coveringTilesDetailsProvider}recalculateZoomAndCenter(s){s&&i.w("terrain is not fully supported on vertical perspective projection."),this._helper.recalculateZoomAndCenter(0)}maxPitchScaleFactor(){return 1}getCameraPoint(){return this._helper.getCameraPoint()}getCameraAltitude(){return this._helper.getCameraAltitude()}getCameraLngLat(){return this._helper.getCameraLngLat()}lngLatToCameraDepth(s,d){if(!this._globeViewProjMatrixNoCorrection)return 1;let v=ss(s);i.aR(v,v,1+d/i.bu);let x=i.bv();return i.aw(x,[v[0],v[1],v[2],1],this._globeViewProjMatrixNoCorrection),x[2]/x[3]}populateCache(s){}getBounds(){let s=.5*this.width,d=.5*this.height,v=[new i.P(0,0),new i.P(s,0),new i.P(this.width,0),new i.P(this.width,d),new i.P(this.width,this.height),new i.P(s,this.height),new i.P(0,this.height),new i.P(0,d)],x=[];for(let Y of v)x.push(this.unprojectScreenPoint(Y));let T=0,C=0,R=0,q=0,V=this.center;for(let Y of x){let W=i.bA(V.lng,Y.lng),Q=i.bA(V.lat,Y.lat);W<C&&(C=W),W>T&&(T=W),Q<q&&(q=Q),Q>R&&(R=Q)}let H=[V.lng+C,V.lat+q,V.lng+T,V.lat+R];return this.isSurfacePointOnScreen([0,1,0])&&(H[3]=90,H[0]=-180,H[2]=180),this.isSurfacePointOnScreen([0,-1,0])&&(H[1]=-90,H[0]=-180,H[2]=180),new Ot(H)}getConstrained(s,d){let v=i.ah(s.lat,-i.ai,i.ai),x=i.ah(+d,this.minZoom+ca(0,v),this.maxZoom);return{center:new i.S(s.lng,v),zoom:x}}calculateCenterFromCameraLngLatAlt(s,d,v,x){return this._helper.calculateCenterFromCameraLngLatAlt(s,d,v,x)}setLocationAtPoint(s,d){let v=ss(this.unprojectScreenPoint(d)),x=ss(s),T=i.bp();i.bB(T);let C=i.bp();i.by(C,v,T,-this.center.lng*Math.PI/180),i.bx(C,C,T,this.center.lat*Math.PI/180);let R=x[0]*x[0]+x[2]*x[2],q=C[0]*C[0];if(R<q)return;let V=Math.sqrt(R-q),H=-V,Y=i.bC(x[0],x[2],C[0],V),W=i.bC(x[0],x[2],C[0],H),Q=i.bp();i.by(Q,x,T,-Y);let ie=i.bC(Q[1],Q[2],C[1],C[2]),ve=i.bp();i.by(ve,x,T,-W);let ge=i.bC(ve[1],ve[2],C[1],C[2]),ye=.5*Math.PI,Ie=ie>=-ye&&ie<=ye,Re=ge>=-ye&&ge<=ye,Pe,ze;if(Ie&&Re){let ht=this.center.lng*Math.PI/180,it=this.center.lat*Math.PI/180;i.bD(Y,ht)+i.bD(ie,it)<i.bD(W,ht)+i.bD(ge,it)?(Pe=Y,ze=ie):(Pe=W,ze=ge)}else if(Ie)Pe=Y,ze=ie;else{if(!Re)return;Pe=W,ze=ge}let He=Pe/Math.PI*180,Ne=ze/Math.PI*180,Qe=this.center.lat;this.setCenter(new i.S(He,i.ah(Ne,-90,90))),this.setZoom(this.zoom+ca(Qe,this.center.lat))}locationToScreenPoint(s,d){let v=ss(s);if(d){let x=d.getElevationForLngLatZoom(s,this._helper._tileZoom);i.aR(v,v,1+x/i.bu)}return this._projectSurfacePointToScreen(v)}_projectSurfacePointToScreen(s){let d=i.bv();return i.aw(d,[...s,1],this._globeViewProjMatrixNoCorrection),d[0]/=d[3],d[1]/=d[3],new i.P((.5*d[0]+.5)*this.width,(.5*-d[1]+.5)*this.height)}screenPointToMercatorCoordinate(s,d){if(d){let v=d.pointCoordinate(s);if(v)return v}return i.a1.fromLngLat(this.unprojectScreenPoint(s))}screenPointToLocation(s,d){var v;return(v=this.screenPointToMercatorCoordinate(s,d))===null||v===void 0?void 0:v.toLngLat()}isPointOnMapSurface(s,d){let v=this._cameraPosition,x=this.getRayDirectionFromPixel(s);return!!this.rayPlanetIntersection(v,x)}getRayDirectionFromPixel(s){let d=i.bv();d[0]=s.x/this.width*2-1,d[1]=-1*(s.y/this.height*2-1),d[2]=1,d[3]=1,i.aw(d,d,this._globeViewProjMatrixNoCorrectionInverted),d[0]/=d[3],d[1]/=d[3],d[2]/=d[3];let v=i.bp();v[0]=d[0]-this._cameraPosition[0],v[1]=d[1]-this._cameraPosition[1],v[2]=d[2]-this._cameraPosition[2];let x=i.bp();return i.aV(x,v),x}isSurfacePointVisible(s){let d=this._cachedClippingPlane;return d[0]*s[0]+d[1]*s[1]+d[2]*s[2]+d[3]>=0}isSurfacePointOnScreen(s){if(!this.isSurfacePointVisible(s))return!1;let d=i.bv();return i.aw(d,[...s,1],this._globeViewProjMatrixNoCorrection),d[0]/=d[3],d[1]/=d[3],d[2]/=d[3],d[0]>-1&&d[0]<1&&d[1]>-1&&d[1]<1&&d[2]>-1&&d[2]<1}rayPlanetIntersection(s,d){let v=i.aX(s,d),x=i.bp(),T=i.bp();i.aR(T,d,v),i.aU(x,s,T);let C=1-i.aX(x,x);if(C<0)return null;let R=i.aX(s,s)-1,q=-v+(v<0?1:-1)*Math.sqrt(C),V=R/q,H=q;return{tMin:Math.min(V,H),tMax:Math.max(V,H)}}unprojectScreenPoint(s){let d=this._cameraPosition,v=this.getRayDirectionFromPixel(s),x=this.rayPlanetIntersection(d,v);if(x){let H=i.bp();i.aS(H,d,[v[0]*x.tMin,v[1]*x.tMin,v[2]*x.tMin]);let Y=i.bp();return i.aV(Y,H),m1(Y)}let T=this._cachedClippingPlane,C=T[0]*v[0]+T[1]*v[1]+T[2]*v[2],R=-i.b1(T,d)/C,q=i.bp();if(R>0)i.aS(q,d,[v[0]*R,v[1]*R,v[2]*R]);else{let H=i.bp();i.aS(H,d,[2*v[0],2*v[1],2*v[2]]);let Y=i.b1(this._cachedClippingPlane,H);i.aU(q,H,[this._cachedClippingPlane[0]*Y,this._cachedClippingPlane[1]*Y,this._cachedClippingPlane[2]*Y])}let V=function(H){let Y=i.bp();return Y[0]=H[0]*-H[3],Y[1]=H[1]*-H[3],Y[2]=H[2]*-H[3],{center:Y,radius:Math.sqrt(1-H[3]*H[3])}}(T);return m1(function(H,Y,W){let Q=i.bp();i.aU(Q,W,H);let ie=i.bp();return i.bq(ie,H,Q,Y/i.a$(Q)),ie}(V.center,V.radius,q))}getMatrixForModel(s,d){let v=i.S.convert(s),x=1/i.bu,T=i.b9();return i.bz(T,T,v.lng/180*Math.PI),i.b7(T,T,-v.lat/180*Math.PI),i.M(T,T,[0,0,1+d/i.bu]),i.b7(T,T,.5*Math.PI),i.N(T,T,[x,x,x]),T}getProjectionDataForCustomLayer(s=!0){let d=this.getProjectionData({overscaledTileID:new i.Z(0,0,0,0,0),applyGlobeMatrix:s});return d.tileMercatorCoords=[0,0,1,1],d}getFastPathSimpleProjectionMatrix(s){}}class b1{get pixelsToClipSpaceMatrix(){return this._helper.pixelsToClipSpaceMatrix}get clipSpaceToPixelsMatrix(){return this._helper.clipSpaceToPixelsMatrix}get pixelsToGLUnits(){return this._helper.pixelsToGLUnits}get centerOffset(){return this._helper.centerOffset}get size(){return this._helper.size}get rotationMatrix(){return this._helper.rotationMatrix}get centerPoint(){return this._helper.centerPoint}get pixelsPerMeter(){return this._helper.pixelsPerMeter}setMinZoom(s){this._helper.setMinZoom(s)}setMaxZoom(s){this._helper.setMaxZoom(s)}setMinPitch(s){this._helper.setMinPitch(s)}setMaxPitch(s){this._helper.setMaxPitch(s)}setRenderWorldCopies(s){this._helper.setRenderWorldCopies(s)}setBearing(s){this._helper.setBearing(s)}setPitch(s){this._helper.setPitch(s)}setRoll(s){this._helper.setRoll(s)}setFov(s){this._helper.setFov(s)}setZoom(s){this._helper.setZoom(s)}setCenter(s){this._helper.setCenter(s)}setElevation(s){this._helper.setElevation(s)}setMinElevationForCurrentTile(s){this._helper.setMinElevationForCurrentTile(s)}setPadding(s){this._helper.setPadding(s)}interpolatePadding(s,d,v){return this._helper.interpolatePadding(s,d,v)}isPaddingEqual(s){return this._helper.isPaddingEqual(s)}resize(s,d,v=!0){this._helper.resize(s,d,v)}getMaxBounds(){return this._helper.getMaxBounds()}setMaxBounds(s){this._helper.setMaxBounds(s)}overrideNearFarZ(s,d){this._helper.overrideNearFarZ(s,d)}clearNearFarZOverride(){this._helper.clearNearFarZOverride()}getCameraQueryGeometry(s){return this._helper.getCameraQueryGeometry(this.getCameraPoint(),s)}get tileSize(){return this._helper.tileSize}get tileZoom(){return this._helper.tileZoom}get scale(){return this._helper.scale}get worldSize(){return this._helper.worldSize}get width(){return this._helper.width}get height(){return this._helper.height}get lngRange(){return this._helper.lngRange}get latRange(){return this._helper.latRange}get minZoom(){return this._helper.minZoom}get maxZoom(){return this._helper.maxZoom}get zoom(){return this._helper.zoom}get center(){return this._helper.center}get minPitch(){return this._helper.minPitch}get maxPitch(){return this._helper.maxPitch}get pitch(){return this._helper.pitch}get pitchInRadians(){return this._helper.pitchInRadians}get roll(){return this._helper.roll}get rollInRadians(){return this._helper.rollInRadians}get bearing(){return this._helper.bearing}get bearingInRadians(){return this._helper.bearingInRadians}get fov(){return this._helper.fov}get fovInRadians(){return this._helper.fovInRadians}get elevation(){return this._helper.elevation}get minElevationForCurrentTile(){return this._helper.minElevationForCurrentTile}get padding(){return this._helper.padding}get unmodified(){return this._helper.unmodified}get renderWorldCopies(){return this._helper.renderWorldCopies}get cameraToCenterDistance(){return this._helper.cameraToCenterDistance}get nearZ(){return this._helper.nearZ}get farZ(){return this._helper.farZ}get autoCalculateNearFarZ(){return this._helper.autoCalculateNearFarZ}get isGlobeRendering(){return this._globeness>0}setTransitionState(s,d){this._globeness=s,this._globeLatitudeErrorCorrectionRadians=d,this._calcMatrices(),this._verticalPerspectiveTransform.getCoveringTilesDetailsProvider().prepareNextFrame(),this._mercatorTransform.getCoveringTilesDetailsProvider().prepareNextFrame()}get currentTransform(){return this.isGlobeRendering?this._verticalPerspectiveTransform:this._mercatorTransform}constructor(){this._globeLatitudeErrorCorrectionRadians=0,this._globeness=1,this._helper=new _a({calcMatrices:()=>{this._calcMatrices()},getConstrained:(s,d)=>this.getConstrained(s,d)}),this._globeness=1,this._mercatorTransform=new Fo,this._verticalPerspectiveTransform=new _1}clone(){let s=new b1;return s._globeness=this._globeness,s._globeLatitudeErrorCorrectionRadians=this._globeLatitudeErrorCorrectionRadians,s.apply(this),s}apply(s){this._helper.apply(s),this._mercatorTransform.apply(this),this._verticalPerspectiveTransform.apply(this,this._globeLatitudeErrorCorrectionRadians)}get projectionMatrix(){return this.currentTransform.projectionMatrix}get modelViewProjectionMatrix(){return this.currentTransform.modelViewProjectionMatrix}get inverseProjectionMatrix(){return this.currentTransform.inverseProjectionMatrix}get cameraPosition(){return this.currentTransform.cameraPosition}getProjectionData(s){let d=this._mercatorTransform.getProjectionData(s),v=this._verticalPerspectiveTransform.getProjectionData(s);return{mainMatrix:this.isGlobeRendering?v.mainMatrix:d.mainMatrix,clippingPlane:v.clippingPlane,tileMercatorCoords:v.tileMercatorCoords,projectionTransition:s.applyGlobeMatrix?this._globeness:0,fallbackMatrix:d.fallbackMatrix}}isLocationOccluded(s){return this.currentTransform.isLocationOccluded(s)}transformLightDirection(s){return this.currentTransform.transformLightDirection(s)}getPixelScale(){return i.bk(this._mercatorTransform.getPixelScale(),this._verticalPerspectiveTransform.getPixelScale(),this._globeness)}getCircleRadiusCorrection(){return i.bk(this._mercatorTransform.getCircleRadiusCorrection(),this._verticalPerspectiveTransform.getCircleRadiusCorrection(),this._globeness)}getPitchedTextCorrection(s,d,v){let x=this._mercatorTransform.getPitchedTextCorrection(s,d,v),T=this._verticalPerspectiveTransform.getPitchedTextCorrection(s,d,v);return i.bk(x,T,this._globeness)}projectTileCoordinates(s,d,v,x){return this.currentTransform.projectTileCoordinates(s,d,v,x)}_calcMatrices(){this._helper._width&&this._helper._height&&(this._verticalPerspectiveTransform.apply(this,this._globeLatitudeErrorCorrectionRadians),this._helper._nearZ=this._verticalPerspectiveTransform.nearZ,this._helper._farZ=this._verticalPerspectiveTransform.farZ,this._mercatorTransform.apply(this,!0,this.isGlobeRendering),this._helper._nearZ=this._mercatorTransform.nearZ,this._helper._farZ=this._mercatorTransform.farZ)}calculateFogMatrix(s){return this.currentTransform.calculateFogMatrix(s)}getVisibleUnwrappedCoordinates(s){return this.currentTransform.getVisibleUnwrappedCoordinates(s)}getCameraFrustum(){return this.currentTransform.getCameraFrustum()}getClippingPlane(){return this.currentTransform.getClippingPlane()}getCoveringTilesDetailsProvider(){return this.currentTransform.getCoveringTilesDetailsProvider()}recalculateZoomAndCenter(s){this._mercatorTransform.recalculateZoomAndCenter(s),this._verticalPerspectiveTransform.recalculateZoomAndCenter(s)}maxPitchScaleFactor(){return this._mercatorTransform.maxPitchScaleFactor()}getCameraPoint(){return this._helper.getCameraPoint()}getCameraAltitude(){return this._helper.getCameraAltitude()}getCameraLngLat(){return this._helper.getCameraLngLat()}lngLatToCameraDepth(s,d){return this.currentTransform.lngLatToCameraDepth(s,d)}populateCache(s){this._mercatorTransform.populateCache(s),this._verticalPerspectiveTransform.populateCache(s)}getBounds(){return this.currentTransform.getBounds()}getConstrained(s,d){return this.currentTransform.getConstrained(s,d)}calculateCenterFromCameraLngLatAlt(s,d,v,x){return this._helper.calculateCenterFromCameraLngLatAlt(s,d,v,x)}setLocationAtPoint(s,d){if(!this.isGlobeRendering)return this._mercatorTransform.setLocationAtPoint(s,d),void this.apply(this._mercatorTransform);this._verticalPerspectiveTransform.setLocationAtPoint(s,d),this.apply(this._verticalPerspectiveTransform)}locationToScreenPoint(s,d){return this.currentTransform.locationToScreenPoint(s,d)}screenPointToMercatorCoordinate(s,d){return this.currentTransform.screenPointToMercatorCoordinate(s,d)}screenPointToLocation(s,d){return this.currentTransform.screenPointToLocation(s,d)}isPointOnMapSurface(s,d){return this.currentTransform.isPointOnMapSurface(s,d)}getRayDirectionFromPixel(s){return this._verticalPerspectiveTransform.getRayDirectionFromPixel(s)}getMatrixForModel(s,d){return this.currentTransform.getMatrixForModel(s,d)}getProjectionDataForCustomLayer(s=!0){let d=this._mercatorTransform.getProjectionDataForCustomLayer(s);if(!this.isGlobeRendering)return d;let v=this._verticalPerspectiveTransform.getProjectionDataForCustomLayer(s);return v.fallbackMatrix=d.mainMatrix,v}getFastPathSimpleProjectionMatrix(s){return this.currentTransform.getFastPathSimpleProjectionMatrix(s)}}class Gs{get useGlobeControls(){return!0}handlePanInertia(s,d){let v=zN(s,d);return Math.abs(v.lng-d.center.lng)>180&&(v.lng=d.center.lng+179.5*Math.sign(v.lng-d.center.lng)),{easingCenter:v,easingOffset:new i.P(0,0)}}handleMapControlsRollPitchBearingZoom(s,d){let v=s.around,x=d.screenPointToLocation(v);s.bearingDelta&&d.setBearing(d.bearing+s.bearingDelta),s.pitchDelta&&d.setPitch(d.pitch+s.pitchDelta),s.rollDelta&&d.setRoll(d.roll+s.rollDelta);let T=d.zoom;s.zoomDelta&&d.setZoom(d.zoom+s.zoomDelta);let C=d.zoom-T;if(C===0)return;let R=i.bA(d.center.lng,x.lng),q=R/(Math.abs(R/180)+1),V=i.bA(d.center.lat,x.lat),H=d.getRayDirectionFromPixel(v),Y=d.cameraPosition,W=-1*i.aX(Y,H),Q=i.bp();i.aS(Q,Y,[H[0]*W,H[1]*W,H[2]*W]);let ie=i.aZ(Q)-1,ve=Math.exp(.5*-Math.max(ie-.3,0)),ge=Sv(d.worldSize,d.center.lat)/Math.min(d.width,d.height),ye=i.bn(ge,.9,.5,1,.25),Ie=(1-i.af(-C))*Math.min(ve,ye),Re=d.center.lat,Pe=d.zoom,ze=new i.S(d.center.lng+q*Ie,i.ah(d.center.lat+V*Ie,-i.ai,i.ai));d.setLocationAtPoint(x,v);let He=d.center,Ne=i.bn(Math.abs(R),45,85,0,1),Qe=i.bn(ge,.75,.35,0,1),ht=Math.pow(Math.max(Ne,Qe),.25),it=i.bA(He.lng,ze.lng),at=i.bA(He.lat,ze.lat);d.setCenter(new i.S(He.lng+it*ht,He.lat+at*ht).wrap()),d.setZoom(Pe+ca(Re,d.center.lat))}handleMapControlsPan(s,d,v){if(!s.panDelta)return;let x=d.center.lat,T=d.zoom;d.setCenter(zN(s.panDelta,d).wrap()),d.setZoom(T+ca(x,d.center.lat))}cameraForBoxAndBearing(s,d,v,x,T){let C=Bs(s,d,v,x,T),R=d.left/T.width*2-1,q=(T.width-d.right)/T.width*2-1,V=d.top/T.height*-2+1,H=(T.height-d.bottom)/T.height*-2+1,Y=i.bA(v.getWest(),v.getEast())<0,W=Y?v.getEast():v.getWest(),Q=Y?v.getWest():v.getEast(),ie=Math.max(v.getNorth(),v.getSouth()),ve=Math.min(v.getNorth(),v.getSouth()),ge=W+.5*i.bA(W,Q),ye=ie+.5*i.bA(ie,ve),Ie=T.clone();Ie.setCenter(C.center),Ie.setBearing(C.bearing),Ie.setPitch(0),Ie.setRoll(0),Ie.setZoom(C.zoom);let Re=Ie.modelViewProjectionMatrix,Pe=[ss(v.getNorthWest()),ss(v.getNorthEast()),ss(v.getSouthWest()),ss(v.getSouthEast()),ss(new i.S(Q,ye)),ss(new i.S(W,ye)),ss(new i.S(ge,ie)),ss(new i.S(ge,ve))],ze=ss(C.center),He=Number.POSITIVE_INFINITY;for(let Ne of Pe)R<0&&(He=Gs.getLesserNonNegativeNonNull(He,Gs.solveVectorScale(Ne,ze,Re,"x",R))),q>0&&(He=Gs.getLesserNonNegativeNonNull(He,Gs.solveVectorScale(Ne,ze,Re,"x",q))),V>0&&(He=Gs.getLesserNonNegativeNonNull(He,Gs.solveVectorScale(Ne,ze,Re,"y",V))),H<0&&(He=Gs.getLesserNonNegativeNonNull(He,Gs.solveVectorScale(Ne,ze,Re,"y",H)));if(Number.isFinite(He)&&He!==0)return C.zoom=Ie.zoom+i.ak(He),C;ux()}handleJumpToCenterZoom(s,d){let v=s.center.lat,x=s.getConstrained(d.center?i.S.convert(d.center):s.center,s.zoom).center;s.setCenter(x.wrap());let T=d.zoom!==void 0?+d.zoom:s.zoom+ca(v,x.lat);s.zoom!==T&&s.setZoom(T)}handleEaseTo(s,d){let v=s.zoom,x=s.center,T=s.padding,C={roll:s.roll,pitch:s.pitch,bearing:s.bearing},R={roll:d.roll===void 0?s.roll:d.roll,pitch:d.pitch===void 0?s.pitch:d.pitch,bearing:d.bearing===void 0?s.bearing:d.bearing},q=d.zoom!==void 0,V=!s.isPaddingEqual(d.padding),H=!1,Y=d.center?i.S.convert(d.center):x,W=s.getConstrained(Y,v).center;Mu(s,W);let Q=s.clone();Q.setCenter(W),Q.setZoom(q?+d.zoom:v+ca(x.lat,Y.lat)),Q.setBearing(d.bearing);let ie=new i.P(i.ah(s.centerPoint.x+d.offsetAsPoint.x,0,s.width),i.ah(s.centerPoint.y+d.offsetAsPoint.y,0,s.height));Q.setLocationAtPoint(W,ie);let ve=(d.offset&&d.offsetAsPoint.mag())>0?Q.center:W,ge=q?+d.zoom:v+ca(x.lat,ve.lat),ye=v+ca(x.lat,0),Ie=ge+ca(ve.lat,0),Re=i.bA(x.lng,ve.lng),Pe=i.bA(x.lat,ve.lat),ze=i.af(Ie-ye);return H=ge!==v,{easeFunc:He=>{if(i.be(C,R)||hl({startEulerAngles:C,endEulerAngles:R,tr:s,k:He,useSlerp:C.roll!=R.roll}),V&&s.interpolatePadding(T,d.padding,He),d.around)i.w("Easing around a point is not supported under globe projection."),s.setLocationAtPoint(d.around,d.aroundPoint);else{let Ne=Ie>ye?Math.min(2,ze):Math.max(.5,ze),Qe=Math.pow(Ne,1-He),ht=j2(x,Re,Pe,He*Qe);s.setCenter(ht.wrap())}if(H){let Ne=i.C.number(ye,Ie,He)+ca(0,s.center.lat);s.setZoom(Ne)}},isZooming:H,elevationCenter:ve}}handleFlyTo(s,d){let v=d.zoom!==void 0,x=s.center,T=s.zoom,C=s.padding,R=!s.isPaddingEqual(d.padding),q=s.getConstrained(i.S.convert(d.center||d.locationAtOffset),T).center,V=v?+d.zoom:s.zoom+ca(s.center.lat,q.lat),H=s.clone();H.setCenter(q),H.setZoom(V),H.setBearing(d.bearing);let Y=new i.P(i.ah(s.centerPoint.x+d.offsetAsPoint.x,0,s.width),i.ah(s.centerPoint.y+d.offsetAsPoint.y,0,s.height));H.setLocationAtPoint(q,Y);let W=H.center;Mu(s,W);let Q=function(Pe,ze,He){let Ne=ss(ze),Qe=ss(He),ht=i.aX(Ne,Qe),it=Math.acos(ht),at=dx(Pe);return it/(2*Math.PI)*at}(s,x,W),ie=T+ca(x.lat,0),ve=V+ca(W.lat,0),ge=i.af(ve-ie),ye;if(typeof d.minZoom=="number"){let Pe=+d.minZoom+ca(W.lat,0),ze=Math.min(Pe,ie,ve)+ca(0,W.lat),He=s.getConstrained(W,ze).zoom+ca(W.lat,0);ye=i.af(He-ie)}let Ie=i.bA(x.lng,W.lng),Re=i.bA(x.lat,W.lat);return{easeFunc:(Pe,ze,He,Ne)=>{let Qe=j2(x,Ie,Re,He);R&&s.interpolatePadding(C,d.padding,Pe);let ht=Pe===1?W:Qe;s.setCenter(ht.wrap());let it=ie+i.ak(ze);s.setZoom(Pe===1?V:it+ca(0,ht.lat))},scaleOfZoom:ge,targetCenter:W,scaleOfMinZoom:ye,pixelPathLength:Q}}static solveVectorScale(s,d,v,x,T){let C=x==="x"?[v[0],v[4],v[8],v[12]]:[v[1],v[5],v[9],v[13]],R=[v[3],v[7],v[11],v[15]],q=s[0]*C[0]+s[1]*C[1]+s[2]*C[2],V=s[0]*R[0]+s[1]*R[1]+s[2]*R[2],H=d[0]*C[0]+d[1]*C[1]+d[2]*C[2],Y=d[0]*R[0]+d[1]*R[1]+d[2]*R[2];return H+T*V===q+T*Y||R[3]*(q-H)+C[3]*(Y-V)+q*Y==H*V?null:(H+C[3]-T*Y-T*R[3])/(H-q-T*Y+T*V)}static getLesserNonNegativeNonNull(s,d){return d!==null&&d>=0&&d<s?d:s}}class FN{constructor(s){this._globe=s,this._mercatorCameraHelper=new Vs,this._verticalPerspectiveCameraHelper=new Gs}get useGlobeControls(){return this._globe.useGlobeRendering}get currentHelper(){return this.useGlobeControls?this._verticalPerspectiveCameraHelper:this._mercatorCameraHelper}handlePanInertia(s,d){return this.currentHelper.handlePanInertia(s,d)}handleMapControlsRollPitchBearingZoom(s,d){return this.currentHelper.handleMapControlsRollPitchBearingZoom(s,d)}handleMapControlsPan(s,d,v){this.currentHelper.handleMapControlsPan(s,d,v)}cameraForBoxAndBearing(s,d,v,x,T){return this.currentHelper.cameraForBoxAndBearing(s,d,v,x,T)}handleJumpToCenterZoom(s,d){this.currentHelper.handleJumpToCenterZoom(s,d)}handleEaseTo(s,d){return this.currentHelper.handleEaseTo(s,d)}handleFlyTo(s,d){return this.currentHelper.handleFlyTo(s,d)}}let hx=(S,s)=>i.y(S,s&&s.filter(d=>d.identifier!=="source.canvas")),pB=i.bE();class q2 extends i.E{constructor(s,d={}){var v,x;super(),this._rtlPluginLoaded=()=>{for(let C in this.sourceCaches){let R=this.sourceCaches[C].getSource().type;R!=="vector"&&R!=="geojson"||this.sourceCaches[C].reload()}},this.map=s,this.dispatcher=new ot(pt(),s._getMapId()),this.dispatcher.registerMessageHandler("GG",(C,R)=>this.getGlyphs(C,R)),this.dispatcher.registerMessageHandler("GI",(C,R)=>this.getImages(C,R)),this.imageManager=new te,this.imageManager.setEventedParent(this);let T=((v=s._container)===null||v===void 0?void 0:v.lang)||typeof document!="undefined"&&((x=document.documentElement)===null||x===void 0?void 0:x.lang)||void 0;this.glyphManager=new me(s._requestManager,d.localIdeographFontFamily,T),this.lineAtlas=new ct(256,512),this.crossTileSymbolIndex=new $n,this._spritesImagesIds={},this._layers={},this._order=[],this.sourceCaches={},this.zoomHistory=new i.bF,this._loaded=!1,this._availableImages=[],this._globalState={},this._resetUpdates(),this.dispatcher.broadcast("SR",i.bG()),Ft().on(Le,this._rtlPluginLoaded),this.on("data",C=>{if(C.dataType!=="source"||C.sourceDataType!=="metadata")return;let R=this.sourceCaches[C.sourceId];if(!R)return;let q=R.getSource();if(q&&q.vectorLayerIds)for(let V in this._layers){let H=this._layers[V];H.source===q.id&&this._validateLayer(H)}})}setGlobalStateProperty(s,d){var v,x,T;this._checkLoaded();let C=d===null?(T=(x=(v=this.stylesheet.state)===null||v===void 0?void 0:v[s])===null||x===void 0?void 0:x.default)!==null&&T!==void 0?T:null:d;if(i.bH(C,this._globalState[s]))return this;this._globalState[s]=C,this._applyGlobalStateChanges([s])}getGlobalState(){return this._globalState}setGlobalState(s){this._checkLoaded();let d=[];for(let v in s)!i.bH(this._globalState[v],s[v].default)&&(d.push(v),this._globalState[v]=s[v].default);this._applyGlobalStateChanges(d)}_applyGlobalStateChanges(s){if(s.length===0)return;let d=new Set;for(let v in this._layers){let x=this._layers[v],T=x.getLayoutAffectingGlobalStateRefs(),C=x.getPaintAffectingGlobalStateRefs();for(let R of s)if(T.has(R)&&d.add(x.source),C.has(R))for(let{name:q,value:V}of C.get(R))this._updatePaintProperty(x,q,V)}for(let v in this.sourceCaches)d.has(v)&&(this._reloadSource(v),this._changed=!0)}loadURL(s,d={},v){this.fire(new i.l("dataloading",{dataType:"style"})),d.validate=typeof d.validate!="boolean"||d.validate;let x=this.map._requestManager.transformRequest(s,"Style");this._loadStyleRequest=new AbortController;let T=this._loadStyleRequest;i.j(x,this._loadStyleRequest).then(C=>{this._loadStyleRequest=null,this._load(C.data,d,v)}).catch(C=>{this._loadStyleRequest=null,C&&!T.signal.aborted&&this.fire(new i.k(C))})}loadJSON(s,d={},v){this.fire(new i.l("dataloading",{dataType:"style"})),this._frameRequest=new AbortController,y.frameAsync(this._frameRequest).then(()=>{this._frameRequest=null,d.validate=d.validate!==!1,this._load(s,d,v)}).catch(()=>{})}loadEmpty(){this.fire(new i.l("dataloading",{dataType:"style"})),this._load(pB,{validate:!1})}_load(s,d,v){var x,T;let C=d.transformStyle?d.transformStyle(v,s):s;if(!d.validate||!hx(this,i.z(C))){C=Object.assign({},C),this._loaded=!0,this.stylesheet=C;for(let R in C.sources)this.addSource(R,C.sources[R],{validate:!1});C.sprite?this._loadSprite(C.sprite):this.imageManager.setLoaded(!0),this.glyphManager.setURL(C.glyphs),this._createLayers(),this.light=new Ce(this.stylesheet.light),this._setProjectionInternal(((x=this.stylesheet.projection)===null||x===void 0?void 0:x.type)||"mercator"),this.sky=new rt(this.stylesheet.sky),this.map.setTerrain((T=this.stylesheet.terrain)!==null&&T!==void 0?T:null),this.fire(new i.l("data",{dataType:"style"})),this.fire(new i.l("style.load"))}}_createLayers(){var s;let d=i.bI(this.stylesheet.layers);this.dispatcher.broadcast("SL",d),this._order=d.map(v=>v.id),this._layers={},this.setGlobalState((s=this.stylesheet.state)!==null&&s!==void 0?s:null),this._serializedLayers=null;for(let v of d){let x=i.bJ(v);x.setEventedParent(this,{layer:{id:v.id}}),x.setGlobalState(this._globalState),this._layers[v.id]=x}}_loadSprite(s,d=!1,v=void 0){let x;this.imageManager.setLoaded(!1),this._spriteRequest=new AbortController,function(T,C,R,q){return i._(this,void 0,void 0,function*(){let V=G(T),H=R>1?"@2x":"",Y={},W={};for(let{id:Q,url:ie}of V){let ve=C.transformRequest(Z(ie,H,".json"),"SpriteJSON");Y[Q]=i.j(ve,q);let ge=C.transformRequest(Z(ie,H,".png"),"SpriteImage");W[Q]=z.getImage(ge,q)}return yield Promise.all([...Object.values(Y),...Object.values(W)]),function(Q,ie){return i._(this,void 0,void 0,function*(){let ve={};for(let ge in Q){ve[ge]={};let ye=y.getImageCanvasContext((yield ie[ge]).data),Ie=(yield Q[ge]).data;for(let Re in Ie){let{width:Pe,height:ze,x:He,y:Ne,sdf:Qe,pixelRatio:ht,stretchX:it,stretchY:at,content:dt,textFitWidth:Vt,textFitHeight:Wt}=Ie[Re];ve[ge][Re]={data:null,pixelRatio:ht,sdf:Qe,stretchX:it,stretchY:at,content:dt,textFitWidth:Vt,textFitHeight:Wt,spriteData:{width:Pe,height:ze,x:He,y:Ne,context:ye}}}}return ve})}(Y,W)})}(s,this.map._requestManager,this.map.getPixelRatio(),this._spriteRequest).then(T=>{if(this._spriteRequest=null,T)for(let C in T){this._spritesImagesIds[C]=[];let R=this._spritesImagesIds[C]?this._spritesImagesIds[C].filter(q=>!(q in T)):[];for(let q of R)this.imageManager.removeImage(q),this._changedImages[q]=!0;for(let q in T[C]){let V=C==="default"?q:`${C}:${q}`;this._spritesImagesIds[C].push(V),V in this.imageManager.images?this.imageManager.updateImage(V,T[C][q],!1):this.imageManager.addImage(V,T[C][q]),d&&(this._changedImages[V]=!0)}}}).catch(T=>{this._spriteRequest=null,x=T,this.fire(new i.k(x))}).finally(()=>{this.imageManager.setLoaded(!0),this._availableImages=this.imageManager.listImages(),d&&(this._changed=!0),this.dispatcher.broadcast("SI",this._availableImages),this.fire(new i.l("data",{dataType:"style"})),v&&v(x)})}_unloadSprite(){for(let s of Object.values(this._spritesImagesIds).flat())this.imageManager.removeImage(s),this._changedImages[s]=!0;this._spritesImagesIds={},this._availableImages=this.imageManager.listImages(),this._changed=!0,this.dispatcher.broadcast("SI",this._availableImages),this.fire(new i.l("data",{dataType:"style"}))}_validateLayer(s){let d=this.sourceCaches[s.source];if(!d)return;let v=s.sourceLayer;if(!v)return;let x=d.getSource();(x.type==="geojson"||x.vectorLayerIds&&x.vectorLayerIds.indexOf(v)===-1)&&this.fire(new i.k(new Error(`Source layer "${v}" does not exist on source "${x.id}" as specified by style layer "${s.id}".`)))}loaded(){if(!this._loaded||Object.keys(this._updatedSources).length)return!1;for(let s in this.sourceCaches)if(!this.sourceCaches[s].loaded())return!1;return!!this.imageManager.isLoaded()}_serializeByIds(s,d=!1){let v=this._serializedAllLayers();if(!s||s.length===0)return Object.values(d?i.bK(v):v);let x=[];for(let T of s)if(v[T]){let C=d?i.bK(v[T]):v[T];x.push(C)}return x}_serializedAllLayers(){let s=this._serializedLayers;if(s)return s;s=this._serializedLayers={};let d=Object.keys(this._layers);for(let v of d){let x=this._layers[v];x.type!=="custom"&&(s[v]=x.serialize())}return s}hasTransitions(){var s,d,v;if(!((s=this.light)===null||s===void 0)&&s.hasTransition()||!((d=this.sky)===null||d===void 0)&&d.hasTransition()||!((v=this.projection)===null||v===void 0)&&v.hasTransition())return!0;for(let x in this.sourceCaches)if(this.sourceCaches[x].hasTransition())return!0;for(let x in this._layers)if(this._layers[x].hasTransition())return!0;return!1}_checkLoaded(){if(!this._loaded)throw new Error("Style is not done loading.")}update(s){if(!this._loaded)return;let d=this._changed;if(d){let x=Object.keys(this._updatedLayers),T=Object.keys(this._removedLayers);(x.length||T.length)&&this._updateWorkerLayers(x,T);for(let C in this._updatedSources){let R=this._updatedSources[C];if(R==="reload")this._reloadSource(C);else{if(R!=="clear")throw new Error(`Invalid action ${R}`);this._clearSource(C)}}this._updateTilesForChangedImages(),this._updateTilesForChangedGlyphs();for(let C in this._updatedPaintProps)this._layers[C].updateTransitions(s);this.light.updateTransitions(s),this.sky.updateTransitions(s),this._resetUpdates()}let v={};for(let x in this.sourceCaches){let T=this.sourceCaches[x];v[x]=T.used,T.used=!1}for(let x of this._order){let T=this._layers[x];T.recalculate(s,this._availableImages),!T.isHidden(s.zoom)&&T.source&&(this.sourceCaches[T.source].used=!0)}for(let x in v){let T=this.sourceCaches[x];!!v[x]!=!!T.used&&T.fire(new i.l("data",{sourceDataType:"visibility",dataType:"source",sourceId:x}))}this.light.recalculate(s),this.sky.recalculate(s),this.projection.recalculate(s),this.z=s.zoom,d&&this.fire(new i.l("data",{dataType:"style"}))}_updateTilesForChangedImages(){let s=Object.keys(this._changedImages);if(s.length){for(let d in this.sourceCaches)this.sourceCaches[d].reloadTilesForDependencies(["icons","patterns"],s);this._changedImages={}}}_updateTilesForChangedGlyphs(){if(this._glyphsDidChange){for(let s in this.sourceCaches)this.sourceCaches[s].reloadTilesForDependencies(["glyphs"],[""]);this._glyphsDidChange=!1}}_updateWorkerLayers(s,d){this.dispatcher.broadcast("UL",{layers:this._serializeByIds(s,!1),removedIds:d})}_resetUpdates(){this._changed=!1,this._updatedLayers={},this._removedLayers={},this._updatedSources={},this._updatedPaintProps={},this._changedImages={},this._glyphsDidChange=!1}setState(s,d={}){var v;this._checkLoaded();let x=this.serialize();if(s=d.transformStyle?d.transformStyle(x,s):s,((v=d.validate)===null||v===void 0||v)&&hx(this,i.z(s)))return!1;(s=i.bK(s)).layers=i.bI(s.layers);let T=i.bL(x,s),C=this._getOperationsToPerform(T);if(C.unimplemented.length>0)throw new Error(`Unimplemented: ${C.unimplemented.join(", ")}.`);if(C.operations.length===0)return!1;for(let R of C.operations)R();return this.stylesheet=s,this._serializedLayers=null,!0}_getOperationsToPerform(s){let d=[],v=[];for(let x of s)switch(x.command){case"setCenter":case"setZoom":case"setBearing":case"setPitch":case"setRoll":continue;case"addLayer":d.push(()=>this.addLayer.apply(this,x.args));break;case"removeLayer":d.push(()=>this.removeLayer.apply(this,x.args));break;case"setPaintProperty":d.push(()=>this.setPaintProperty.apply(this,x.args));break;case"setLayoutProperty":d.push(()=>this.setLayoutProperty.apply(this,x.args));break;case"setFilter":d.push(()=>this.setFilter.apply(this,x.args));break;case"addSource":d.push(()=>this.addSource.apply(this,x.args));break;case"removeSource":d.push(()=>this.removeSource.apply(this,x.args));break;case"setLayerZoomRange":d.push(()=>this.setLayerZoomRange.apply(this,x.args));break;case"setLight":d.push(()=>this.setLight.apply(this,x.args));break;case"setGeoJSONSourceData":d.push(()=>this.setGeoJSONSourceData.apply(this,x.args));break;case"setGlyphs":d.push(()=>this.setGlyphs.apply(this,x.args));break;case"setSprite":d.push(()=>this.setSprite.apply(this,x.args));break;case"setTerrain":d.push(()=>this.map.setTerrain.apply(this,x.args));break;case"setSky":d.push(()=>this.setSky.apply(this,x.args));break;case"setProjection":this.setProjection.apply(this,x.args);break;case"setGlobalState":d.push(()=>this.setGlobalState.apply(this,x.args));break;case"setTransition":d.push(()=>{});break;default:v.push(x.command)}return{operations:d,unimplemented:v}}addImage(s,d){if(this.getImage(s))return this.fire(new i.k(new Error(`An image named "${s}" already exists.`)));this.imageManager.addImage(s,d),this._afterImageUpdated(s)}updateImage(s,d){this.imageManager.updateImage(s,d)}getImage(s){return this.imageManager.getImage(s)}removeImage(s){if(!this.getImage(s))return this.fire(new i.k(new Error(`An image named "${s}" does not exist.`)));this.imageManager.removeImage(s),this._afterImageUpdated(s)}_afterImageUpdated(s){this._availableImages=this.imageManager.listImages(),this._changedImages[s]=!0,this._changed=!0,this.dispatcher.broadcast("SI",this._availableImages),this.fire(new i.l("data",{dataType:"style"}))}listImages(){return this._checkLoaded(),this.imageManager.listImages()}addSource(s,d,v={}){if(this._checkLoaded(),this.sourceCaches[s]!==void 0)throw new Error(`Source "${s}" already exists.`);if(!d.type)throw new Error(`The type property must be defined, but only the following properties were given: ${Object.keys(d).join(", ")}.`);if(["vector","raster","geojson","video","image"].indexOf(d.type)>=0&&this._validate(i.z.source,`sources.${s}`,d,null,v))return;this.map&&this.map._collectResourceTiming&&(d.collectResourceTiming=!0);let x=this.sourceCaches[s]=new Oe(s,d,this.dispatcher);x.style=this,x.setEventedParent(this,()=>({isSourceLoaded:x.loaded(),source:x.serialize(),sourceId:s})),x.onAdd(this.map),this._changed=!0}removeSource(s){if(this._checkLoaded(),this.sourceCaches[s]===void 0)throw new Error("There is no source with this ID");for(let v in this._layers)if(this._layers[v].source===s)return this.fire(new i.k(new Error(`Source "${s}" cannot be removed while layer "${v}" is using it.`)));let d=this.sourceCaches[s];delete this.sourceCaches[s],delete this._updatedSources[s],d.fire(new i.l("data",{sourceDataType:"metadata",dataType:"source",sourceId:s})),d.setEventedParent(null),d.onRemove(this.map),this._changed=!0}setGeoJSONSourceData(s,d){if(this._checkLoaded(),this.sourceCaches[s]===void 0)throw new Error(`There is no source with this ID=${s}`);let v=this.sourceCaches[s].getSource();if(v.type!=="geojson")throw new Error(`geojsonSource.type is ${v.type}, which is !== 'geojson`);v.setData(d),this._changed=!0}getSource(s){return this.sourceCaches[s]&&this.sourceCaches[s].getSource()}addLayer(s,d,v={}){this._checkLoaded();let x=s.id;if(this.getLayer(x))return void this.fire(new i.k(new Error(`Layer "${x}" already exists on this map.`)));let T;if(s.type==="custom"){if(hx(this,i.bM(s)))return;T=i.bJ(s)}else{if("source"in s&&typeof s.source=="object"&&(this.addSource(x,s.source),s=i.bK(s),s=i.e(s,{source:x})),this._validate(i.z.layer,`layers.${x}`,s,{arrayIndex:-1},v))return;T=i.bJ(s),this._validateLayer(T),T.setEventedParent(this,{layer:{id:x}})}let C=d?this._order.indexOf(d):this._order.length;if(d&&C===-1)this.fire(new i.k(new Error(`Cannot add layer "${x}" before non-existing layer "${d}".`)));else{if(this._order.splice(C,0,x),this._layerOrderChanged=!0,this._layers[x]=T,this._removedLayers[x]&&T.source&&T.type!=="custom"){let R=this._removedLayers[x];delete this._removedLayers[x],R.type!==T.type?this._updatedSources[T.source]="clear":(this._updatedSources[T.source]="reload",this.sourceCaches[T.source].pause())}this._updateLayer(T),T.onAdd&&T.onAdd(this.map)}}moveLayer(s,d){if(this._checkLoaded(),this._changed=!0,!this._layers[s])return void this.fire(new i.k(new Error(`The layer '${s}' does not exist in the map's style and cannot be moved.`)));if(s===d)return;let v=this._order.indexOf(s);this._order.splice(v,1);let x=d?this._order.indexOf(d):this._order.length;d&&x===-1?this.fire(new i.k(new Error(`Cannot move layer "${s}" before non-existing layer "${d}".`))):(this._order.splice(x,0,s),this._layerOrderChanged=!0)}removeLayer(s){this._checkLoaded();let d=this._layers[s];if(!d)return void this.fire(new i.k(new Error(`Cannot remove non-existing layer "${s}".`)));d.setEventedParent(null);let v=this._order.indexOf(s);this._order.splice(v,1),this._layerOrderChanged=!0,this._changed=!0,this._removedLayers[s]=d,delete this._layers[s],this._serializedLayers&&delete this._serializedLayers[s],delete this._updatedLayers[s],delete this._updatedPaintProps[s],d.onRemove&&d.onRemove(this.map)}getLayer(s){return this._layers[s]}getLayersOrder(){return[...this._order]}hasLayer(s){return s in this._layers}setLayerZoomRange(s,d,v){this._checkLoaded();let x=this.getLayer(s);x?x.minzoom===d&&x.maxzoom===v||(d!=null&&(x.minzoom=d),v!=null&&(x.maxzoom=v),this._updateLayer(x)):this.fire(new i.k(new Error(`Cannot set the zoom range of non-existing layer "${s}".`)))}setFilter(s,d,v={}){this._checkLoaded();let x=this.getLayer(s);if(x){if(!i.bH(x.filter,d))return d==null?(x.setFilter(void 0),void this._updateLayer(x)):void(this._validate(i.z.filter,`layers.${x.id}.filter`,d,null,v)||(x.setFilter(i.bK(d)),this._updateLayer(x)))}else this.fire(new i.k(new Error(`Cannot filter non-existing layer "${s}".`)))}getFilter(s){return i.bK(this.getLayer(s).filter)}setLayoutProperty(s,d,v,x={}){this._checkLoaded();let T=this.getLayer(s);T?i.bH(T.getLayoutProperty(d),v)||(T.setLayoutProperty(d,v,x),this._updateLayer(T)):this.fire(new i.k(new Error(`Cannot style non-existing layer "${s}".`)))}getLayoutProperty(s,d){let v=this.getLayer(s);if(v)return v.getLayoutProperty(d);this.fire(new i.k(new Error(`Cannot get style of non-existing layer "${s}".`)))}setPaintProperty(s,d,v,x={}){this._checkLoaded();let T=this.getLayer(s);T?i.bH(T.getPaintProperty(d),v)||this._updatePaintProperty(T,d,v,x):this.fire(new i.k(new Error(`Cannot style non-existing layer "${s}".`)))}_updatePaintProperty(s,d,v,x={}){s.setPaintProperty(d,v,x)&&this._updateLayer(s),this._changed=!0,this._updatedPaintProps[s.id]=!0,this._serializedLayers=null}getPaintProperty(s,d){return this.getLayer(s).getPaintProperty(d)}setFeatureState(s,d){this._checkLoaded();let v=s.source,x=s.sourceLayer,T=this.sourceCaches[v];if(T===void 0)return void this.fire(new i.k(new Error(`The source '${v}' does not exist in the map's style.`)));let C=T.getSource().type;C==="geojson"&&x?this.fire(new i.k(new Error("GeoJSON sources cannot have a sourceLayer parameter."))):C!=="vector"||x?(s.id===void 0&&this.fire(new i.k(new Error("The feature id parameter must be provided."))),T.setFeatureState(x,s.id,d)):this.fire(new i.k(new Error("The sourceLayer parameter must be provided for vector source types.")))}removeFeatureState(s,d){this._checkLoaded();let v=s.source,x=this.sourceCaches[v];if(x===void 0)return void this.fire(new i.k(new Error(`The source '${v}' does not exist in the map's style.`)));let T=x.getSource().type,C=T==="vector"?s.sourceLayer:void 0;T!=="vector"||C?d&&typeof s.id!="string"&&typeof s.id!="number"?this.fire(new i.k(new Error("A feature id is required to remove its specific state property."))):x.removeFeatureState(C,s.id,d):this.fire(new i.k(new Error("The sourceLayer parameter must be provided for vector source types.")))}getFeatureState(s){this._checkLoaded();let d=s.source,v=s.sourceLayer,x=this.sourceCaches[d];if(x!==void 0)return x.getSource().type!=="vector"||v?(s.id===void 0&&this.fire(new i.k(new Error("The feature id parameter must be provided."))),x.getFeatureState(v,s.id)):void this.fire(new i.k(new Error("The sourceLayer parameter must be provided for vector source types.")));this.fire(new i.k(new Error(`The source '${d}' does not exist in the map's style.`)))}getTransition(){return i.e({duration:300,delay:0},this.stylesheet&&this.stylesheet.transition)}serialize(){if(!this._loaded)return;let s=i.bN(this.sourceCaches,T=>T.serialize()),d=this._serializeByIds(this._order,!0),v=this.map.getTerrain()||void 0,x=this.stylesheet;return i.bO({version:x.version,name:x.name,metadata:x.metadata,light:x.light,sky:x.sky,center:x.center,zoom:x.zoom,bearing:x.bearing,pitch:x.pitch,sprite:x.sprite,glyphs:x.glyphs,transition:x.transition,projection:x.projection,sources:s,layers:d,terrain:v},T=>T!==void 0)}_updateLayer(s){this._updatedLayers[s.id]=!0,s.source&&!this._updatedSources[s.source]&&this.sourceCaches[s.source].getSource().type!=="raster"&&(this._updatedSources[s.source]="reload",this.sourceCaches[s.source].pause()),this._serializedLayers=null,this._changed=!0}_flattenAndSortRenderedFeatures(s){let d=C=>this._layers[C].type==="fill-extrusion",v={},x=[];for(let C=this._order.length-1;C>=0;C--){let R=this._order[C];if(d(R)){v[R]=C;for(let q of s){let V=q[R];if(V)for(let H of V)x.push(H)}}}x.sort((C,R)=>R.intersectionZ-C.intersectionZ);let T=[];for(let C=this._order.length-1;C>=0;C--){let R=this._order[C];if(d(R))for(let q=x.length-1;q>=0;q--){let V=x[q].feature;if(v[V.layer.id]<C)break;T.push(V),x.pop()}else for(let q of s){let V=q[R];if(V)for(let H of V)T.push(H.feature)}}return T}queryRenderedFeatures(s,d,v){d&&d.filter&&this._validate(i.z.filter,"queryRenderedFeatures.filter",d.filter,null,d);let x={};if(d&&d.layers){if(!(Array.isArray(d.layers)||d.layers instanceof Set))return this.fire(new i.k(new Error("parameters.layers must be an Array or a Set of strings"))),[];for(let V of d.layers){let H=this._layers[V];if(!H)return this.fire(new i.k(new Error(`The layer '${V}' does not exist in the map's style and cannot be queried for features.`))),[];x[H.source]=!0}}let T=[];d.availableImages=this._availableImages;let C=this._serializedAllLayers(),R=d.layers instanceof Set?d.layers:Array.isArray(d.layers)?new Set(d.layers):null,q=Object.assign(Object.assign({},d),{layers:R});for(let V in this.sourceCaches)d.layers&&!x[V]||T.push(Ke(this.sourceCaches[V],this._layers,C,s,q,v,this.map.terrain?(H,Y,W)=>this.map.terrain.getElevation(H,Y,W):void 0));return this.placement&&T.push(function(V,H,Y,W,Q,ie,ve){let ge={},ye=ie.queryRenderedSymbols(W),Ie=[];for(let Re of Object.keys(ye).map(Number))Ie.push(ve[Re]);Ie.sort(Ge);for(let Re of Ie){let Pe=Re.featureIndex.lookupSymbolFeatures(ye[Re.bucketInstanceId],H,Re.bucketIndex,Re.sourceLayerIndex,Q.filter,Q.layers,Q.availableImages,V);for(let ze in Pe){let He=ge[ze]=ge[ze]||[],Ne=Pe[ze];Ne.sort((Qe,ht)=>{let it=Re.featureSortOrder;if(it){let at=it.indexOf(Qe.featureIndex);return it.indexOf(ht.featureIndex)-at}return ht.featureIndex-Qe.featureIndex});for(let Qe of Ne)He.push(Qe)}}return function(Re,Pe,ze){for(let He in Re)for(let Ne of Re[He])ft(Ne,ze[Pe[He].source]);return Re}(ge,V,Y)}(this._layers,C,this.sourceCaches,s,q,this.placement.collisionIndex,this.placement.retainedQueryData)),this._flattenAndSortRenderedFeatures(T)}querySourceFeatures(s,d){d&&d.filter&&this._validate(i.z.filter,"querySourceFeatures.filter",d.filter,null,d);let v=this.sourceCaches[s];return v?function(x,T){let C=x.getRenderableIds().map(V=>x.getTileByID(V)),R=[],q={};for(let V=0;V<C.length;V++){let H=C[V],Y=H.tileID.canonical.key;q[Y]||(q[Y]=!0,H.querySourceFeatures(R,T))}return R}(v,d):[]}getLight(){return this.light.getLight()}setLight(s,d={}){this._checkLoaded();let v=this.light.getLight(),x=!1;for(let C in s)if(!i.bH(s[C],v[C])){x=!0;break}if(!x)return;let T={now:y.now(),transition:i.e({duration:300,delay:0},this.stylesheet.transition)};this.light.setLight(s,d),this.light.updateTransitions(T)}getProjection(){var s;return(s=this.stylesheet)===null||s===void 0?void 0:s.projection}setProjection(s){if(this._checkLoaded(),this.projection){if(this.projection.name===s.type)return;this.projection.destroy(),delete this.projection}this.stylesheet.projection=s,this._setProjectionInternal(s.type)}getSky(){var s;return(s=this.stylesheet)===null||s===void 0?void 0:s.sky}setSky(s,d={}){this._checkLoaded();let v=this.getSky(),x=!1;if(!s&&!v)return;if(s&&!v)x=!0;else if(!s&&v)x=!0;else for(let C in s)if(!i.bH(s[C],v[C])){x=!0;break}if(!x)return;let T={now:y.now(),transition:i.e({duration:300,delay:0},this.stylesheet.transition)};this.stylesheet.sky=s,this.sky.setSky(s,d),this.sky.updateTransitions(T)}_setProjectionInternal(s){let d=function(v){if(Array.isArray(v)){let x=new fx({type:v});return{projection:x,transform:new b1,cameraHelper:new FN(x)}}switch(v){case"mercator":return{projection:new vn,transform:new Fo,cameraHelper:new Vs};case"globe":{let x=new fx({type:["interpolate",["linear"],["zoom"],11,"vertical-perspective",12,"mercator"]});return{projection:x,transform:new b1,cameraHelper:new FN(x)}}case"vertical-perspective":return{projection:new h1,transform:new _1,cameraHelper:new Gs};default:return i.w(`Unknown projection name: ${v}. Falling back to mercator projection.`),{projection:new vn,transform:new Fo,cameraHelper:new Vs}}}(s);this.projection=d.projection,this.map.migrateProjection(d.transform,d.cameraHelper);for(let v in this.sourceCaches)this.sourceCaches[v].reload()}_validate(s,d,v,x,T={}){return(!T||T.validate!==!1)&&hx(this,s.call(i.z,i.e({key:d,style:this.serialize(),value:v,styleSpec:i.v},x)))}_remove(s=!0){this._frameRequest&&(this._frameRequest.abort(),this._frameRequest=null),this._loadStyleRequest&&(this._loadStyleRequest.abort(),this._loadStyleRequest=null),this._spriteRequest&&(this._spriteRequest.abort(),this._spriteRequest=null),Ft().off(Le,this._rtlPluginLoaded);for(let d in this._layers)this._layers[d].setEventedParent(null);for(let d in this.sourceCaches){let v=this.sourceCaches[d];v.setEventedParent(null),v.onRemove(this.map)}this.imageManager.setEventedParent(null),this.setEventedParent(null),s&&this.dispatcher.broadcast("RM",void 0),this.dispatcher.remove(s)}_clearSource(s){this.sourceCaches[s].clearTiles()}_reloadSource(s){this.sourceCaches[s].resume(),this.sourceCaches[s].reload()}_updateSources(s){for(let d in this.sourceCaches)this.sourceCaches[d].update(s,this.map.terrain)}_generateCollisionBoxes(){for(let s in this.sourceCaches)this._reloadSource(s)}_updatePlacement(s,d,v,x,T=!1){let C=!1,R=!1,q={};for(let V of this._order){let H=this._layers[V];if(H.type!=="symbol")continue;if(!q[H.source]){let W=this.sourceCaches[H.source];q[H.source]=W.getRenderableIds(!0).map(Q=>W.getTileByID(Q)).sort((Q,ie)=>ie.tileID.overscaledZ-Q.tileID.overscaledZ||(Q.tileID.isLessThan(ie.tileID)?-1:1))}let Y=this.crossTileSymbolIndex.addLayer(H,q[H.source],s.center.lng);C=C||Y}if(this.crossTileSymbolIndex.pruneUnusedLayers(this._order),((T=T||this._layerOrderChanged||v===0)||!this.pauseablePlacement||this.pauseablePlacement.isDone()&&!this.placement.stillRecent(y.now(),s.zoom))&&(this.pauseablePlacement=new Bn(s,this.map.terrain,this._order,T,d,v,x,this.placement),this._layerOrderChanged=!1),this.pauseablePlacement.isDone()?this.placement.setStale():(this.pauseablePlacement.continuePlacement(this._order,this._layers,q),this.pauseablePlacement.isDone()&&(this.placement=this.pauseablePlacement.commit(y.now()),R=!0),C&&this.pauseablePlacement.placement.setStale()),R||C)for(let V of this._order){let H=this._layers[V];H.type==="symbol"&&this.placement.updateLayerOpacities(H,q[H.source])}return!this.pauseablePlacement.isDone()||this.placement.hasTransitions(y.now())}_releaseSymbolFadeTiles(){for(let s in this.sourceCaches)this.sourceCaches[s].releaseSymbolFadeTiles()}getImages(s,d){return i._(this,void 0,void 0,function*(){let v=yield this.imageManager.getImages(d.icons);this._updateTilesForChangedImages();let x=this.sourceCaches[d.source];return x&&x.setDependencies(d.tileID.key,d.type,d.icons),v})}getGlyphs(s,d){return i._(this,void 0,void 0,function*(){let v=yield this.glyphManager.getGlyphs(d.stacks),x=this.sourceCaches[d.source];return x&&x.setDependencies(d.tileID.key,d.type,[""]),v})}getGlyphsUrl(){return this.stylesheet.glyphs||null}setGlyphs(s,d={}){this._checkLoaded(),s&&this._validate(i.z.glyphs,"glyphs",s,null,d)||(this._glyphsDidChange=!0,this.stylesheet.glyphs=s,this.glyphManager.entries={},this.glyphManager.setURL(s))}addSprite(s,d,v={},x){this._checkLoaded();let T=[{id:s,url:d}],C=[...G(this.stylesheet.sprite),...T];this._validate(i.z.sprite,"sprite",C,null,v)||(this.stylesheet.sprite=C,this._loadSprite(T,!0,x))}removeSprite(s){this._checkLoaded();let d=G(this.stylesheet.sprite);if(d.find(v=>v.id===s)){if(this._spritesImagesIds[s])for(let v of this._spritesImagesIds[s])this.imageManager.removeImage(v),this._changedImages[v]=!0;d.splice(d.findIndex(v=>v.id===s),1),this.stylesheet.sprite=d.length>0?d:void 0,delete this._spritesImagesIds[s],this._availableImages=this.imageManager.listImages(),this._changed=!0,this.dispatcher.broadcast("SI",this._availableImages),this.fire(new i.l("data",{dataType:"style"}))}else this.fire(new i.k(new Error(`Sprite "${s}" doesn't exists on this map.`)))}getSprite(){return G(this.stylesheet.sprite)}setSprite(s,d={},v){this._checkLoaded(),s&&this._validate(i.z.sprite,"sprite",s,null,d)||(this.stylesheet.sprite=s,s?this._loadSprite(s,!0,v):(this._unloadSprite(),v&&v(null)))}}var fB=i.aJ([{name:"a_pos",type:"Int16",components:2},{name:"a_texture_pos",type:"Int16",components:2}]);class dB{constructor(){this.boundProgram=null,this.boundLayoutVertexBuffer=null,this.boundPaintVertexBuffers=[],this.boundIndexBuffer=null,this.boundVertexOffset=null,this.boundDynamicVertexBuffer=null,this.vao=null}bind(s,d,v,x,T,C,R,q,V){this.context=s;let H=this.boundPaintVertexBuffers.length!==x.length;for(let Y=0;!H&&Y<x.length;Y++)this.boundPaintVertexBuffers[Y]!==x[Y]&&(H=!0);!this.vao||this.boundProgram!==d||this.boundLayoutVertexBuffer!==v||H||this.boundIndexBuffer!==T||this.boundVertexOffset!==C||this.boundDynamicVertexBuffer!==R||this.boundDynamicVertexBuffer2!==q||this.boundDynamicVertexBuffer3!==V?this.freshBind(d,v,x,T,C,R,q,V):(s.bindVertexArray.set(this.vao),R&&R.bind(),T&&T.dynamicDraw&&T.bind(),q&&q.bind(),V&&V.bind())}freshBind(s,d,v,x,T,C,R,q){let V=s.numAttributes,H=this.context,Y=H.gl;this.vao&&this.destroy(),this.vao=H.createVertexArray(),H.bindVertexArray.set(this.vao),this.boundProgram=s,this.boundLayoutVertexBuffer=d,this.boundPaintVertexBuffers=v,this.boundIndexBuffer=x,this.boundVertexOffset=T,this.boundDynamicVertexBuffer=C,this.boundDynamicVertexBuffer2=R,this.boundDynamicVertexBuffer3=q,d.enableAttributes(Y,s);for(let W of v)W.enableAttributes(Y,s);C&&C.enableAttributes(Y,s),R&&R.enableAttributes(Y,s),q&&q.enableAttributes(Y,s),d.bind(),d.setVertexAttribPointers(Y,s,T);for(let W of v)W.bind(),W.setVertexAttribPointers(Y,s,T);C&&(C.bind(),C.setVertexAttribPointers(Y,s,T)),x&&x.bind(),R&&(R.bind(),R.setVertexAttribPointers(Y,s,T)),q&&(q.bind(),q.setVertexAttribPointers(Y,s,T)),H.currentNumAttributes=V}destroy(){this.vao&&(this.context.deleteVertexArray(this.vao),this.vao=null)}}let mx=(S,s,d,v,x)=>({u_texture:0,u_ele_delta:S,u_fog_matrix:s,u_fog_color:d?d.properties.get("fog-color"):i.bf.white,u_fog_ground_blend:d?d.properties.get("fog-ground-blend"):1,u_fog_ground_blend_opacity:x?0:d?d.calculateFogBlendOpacity(v):0,u_horizon_color:d?d.properties.get("horizon-color"):i.bf.white,u_horizon_fog_blend:d?d.properties.get("horizon-fog-blend"):1,u_is_globe_mode:x?1:0}),z2={mainMatrix:"u_projection_matrix",tileMercatorCoords:"u_projection_tile_mercator_coords",clippingPlane:"u_projection_clipping_plane",projectionTransition:"u_projection_transition",fallbackMatrix:"u_projection_fallback_matrix"};function Vm(S){let s=[];for(let d=0;d<S.length;d++){if(S[d]===null)continue;let v=S[d].split(" ");s.push(v.pop())}return s}class F2{constructor(s,d,v,x,T,C,R,q,V=[]){let H=s.gl;this.program=H.createProgram();let Y=Vm(d.staticAttributes),W=v?v.getBinderAttributes():[],Q=Y.concat(W),ie=Vo.prelude.staticUniforms?Vm(Vo.prelude.staticUniforms):[],ve=R.staticUniforms?Vm(R.staticUniforms):[],ge=d.staticUniforms?Vm(d.staticUniforms):[],ye=v?v.getBinderUniforms():[],Ie=ie.concat(ve).concat(ge).concat(ye),Re=[];for(let it of Ie)Re.indexOf(it)<0&&Re.push(it);let Pe=v?v.defines():[];Rp(H)&&Pe.unshift("#version 300 es"),T&&Pe.push("#define OVERDRAW_INSPECTOR;"),C&&Pe.push("#define TERRAIN3D;"),q&&Pe.push(q),V&&Pe.push(...V);let ze=Pe.concat(Vo.prelude.fragmentSource,R.fragmentSource,d.fragmentSource).join(`
`),He=Pe.concat(Vo.prelude.vertexSource,R.vertexSource,d.vertexSource).join(`
`);Rp(H)||(ze=function(it){return it.replace(/\bin\s/g,"varying ").replace("out highp vec4 fragColor;","").replace(/fragColor/g,"gl_FragColor").replace(/texture\(/g,"texture2D(")}(ze),He=function(it){return it.replace(/\bin\s/g,"attribute ").replace(/\bout\s/g,"varying ").replace(/texture\(/g,"texture2D(")}(He));let Ne=H.createShader(H.FRAGMENT_SHADER);if(H.isContextLost())return void(this.failedToCreate=!0);if(H.shaderSource(Ne,ze),H.compileShader(Ne),!H.getShaderParameter(Ne,H.COMPILE_STATUS))throw new Error(`Could not compile fragment shader: ${H.getShaderInfoLog(Ne)}`);H.attachShader(this.program,Ne);let Qe=H.createShader(H.VERTEX_SHADER);if(H.isContextLost())return void(this.failedToCreate=!0);if(H.shaderSource(Qe,He),H.compileShader(Qe),!H.getShaderParameter(Qe,H.COMPILE_STATUS))throw new Error(`Could not compile vertex shader: ${H.getShaderInfoLog(Qe)}`);H.attachShader(this.program,Qe),this.attributes={};let ht={};this.numAttributes=Q.length;for(let it=0;it<this.numAttributes;it++)Q[it]&&(H.bindAttribLocation(this.program,it,Q[it]),this.attributes[Q[it]]=it);if(H.linkProgram(this.program),!H.getProgramParameter(this.program,H.LINK_STATUS))throw new Error(`Program failed to link: ${H.getProgramInfoLog(this.program)}`);H.deleteShader(Qe),H.deleteShader(Ne);for(let it=0;it<Re.length;it++){let at=Re[it];if(at&&!ht[at]){let dt=H.getUniformLocation(this.program,at);dt&&(ht[at]=dt)}}this.fixedUniforms=x(s,ht),this.terrainUniforms=((it,at)=>({u_depth:new i.bP(it,at.u_depth),u_terrain:new i.bP(it,at.u_terrain),u_terrain_dim:new i.bg(it,at.u_terrain_dim),u_terrain_matrix:new i.bR(it,at.u_terrain_matrix),u_terrain_unpack:new i.bS(it,at.u_terrain_unpack),u_terrain_exaggeration:new i.bg(it,at.u_terrain_exaggeration)}))(s,ht),this.projectionUniforms=((it,at)=>({u_projection_matrix:new i.bR(it,at.u_projection_matrix),u_projection_tile_mercator_coords:new i.bS(it,at.u_projection_tile_mercator_coords),u_projection_clipping_plane:new i.bS(it,at.u_projection_clipping_plane),u_projection_transition:new i.bg(it,at.u_projection_transition),u_projection_fallback_matrix:new i.bR(it,at.u_projection_fallback_matrix)}))(s,ht),this.binderUniforms=v?v.getUniforms(s,ht):[]}draw(s,d,v,x,T,C,R,q,V,H,Y,W,Q,ie,ve,ge,ye,Ie,Re){let Pe=s.gl;if(this.failedToCreate)return;if(s.program.set(this.program),s.setDepthMode(v),s.setStencilMode(x),s.setColorMode(T),s.setCullFace(C),q){s.activeTexture.set(Pe.TEXTURE2),Pe.bindTexture(Pe.TEXTURE_2D,q.depthTexture),s.activeTexture.set(Pe.TEXTURE3),Pe.bindTexture(Pe.TEXTURE_2D,q.texture);for(let He in this.terrainUniforms)this.terrainUniforms[He].set(q[He])}if(V)for(let He in V)this.projectionUniforms[z2[He]].set(V[He]);if(R)for(let He in this.fixedUniforms)this.fixedUniforms[He].set(R[He]);ge&&ge.setUniforms(s,this.binderUniforms,ie,{zoom:ve});let ze=0;switch(d){case Pe.LINES:ze=2;break;case Pe.TRIANGLES:ze=3;break;case Pe.LINE_STRIP:ze=1}for(let He of Q.get()){let Ne=He.vaos||(He.vaos={});(Ne[H]||(Ne[H]=new dB)).bind(s,this,Y,ge?ge.getPaintVertexBuffers():[],W,He.vertexOffset,ye,Ie,Re),Pe.drawElements(d,He.primitiveLength*ze,Pe.UNSIGNED_SHORT,He.primitiveOffset*ze*2)}}}function gx(S,s,d){let v=1/i.aC(d,1,s.transform.tileZoom),x=Math.pow(2,d.tileID.overscaledZ),T=d.tileSize*Math.pow(2,s.transform.tileZoom)/x,C=T*(d.tileID.canonical.x+d.tileID.wrap*x),R=T*d.tileID.canonical.y;return{u_image:0,u_texsize:d.imageAtlasTexture.size,u_scale:[v,S.fromScale,S.toScale],u_fade:S.t,u_pixel_coord_upper:[C>>16,R>>16],u_pixel_coord_lower:[65535&C,65535&R]}}let Jc=(S,s,d,v)=>{let x=S.style.light,T=x.properties.get("position"),C=[T.x,T.y,T.z],R=i.bV();x.properties.get("anchor")==="viewport"&&i.bW(R,S.transform.bearingInRadians),i.bX(C,C,R);let q=S.transform.transformLightDirection(C),V=x.properties.get("color");return{u_lightpos:C,u_lightpos_globe:q,u_lightintensity:x.properties.get("intensity"),u_lightcolor:[V.r,V.g,V.b],u_vertical_gradient:+s,u_opacity:d,u_fill_translate:v}},hB=(S,s,d,v,x,T,C)=>i.e(Jc(S,s,d,v),gx(T,S,C),{u_height_factor:-Math.pow(2,x.overscaledZ)/C.tileSize/8}),vx=(S,s,d,v)=>i.e(gx(s,S,d),{u_fill_translate:v}),x1=(S,s)=>({u_world:S,u_fill_translate:s}),w1=(S,s,d,v,x)=>i.e(vx(S,s,d,x),{u_world:v}),mB=(S,s,d,v,x)=>{let T=S.transform,C,R,q=0;if(d.paint.get("circle-pitch-alignment")==="map"){let V=i.aC(s,1,T.zoom);C=!0,R=[V,V],q=V/(i.$*Math.pow(2,s.tileID.overscaledZ))*2*Math.PI*x}else C=!1,R=T.pixelsToGLUnits;return{u_camera_to_center_distance:T.cameraToCenterDistance,u_scale_with_map:+(d.paint.get("circle-pitch-scale")==="map"),u_pitch_with_map:+C,u_device_pixel_ratio:S.pixelRatio,u_extrude_scale:R,u_globe_extrude_scale:q,u_translate:v}},yx=S=>({u_pixel_extrude_scale:[1/S.width,1/S.height]}),gB=S=>({u_viewport_size:[S.width,S.height]}),Gm=(S,s=1)=>({u_color:S,u_overlay:0,u_overlay_scale:s}),UN=(S,s,d,v)=>{let x=i.aC(S,1,s)/(i.$*Math.pow(2,S.tileID.overscaledZ))*2*Math.PI*v;return{u_extrude_scale:i.aC(S,1,s),u_intensity:d,u_globe_extrude_scale:x}},U2=(S,s,d,v)=>{let x=i.L();i.bY(x,0,S.width,S.height,0,0,1);let T=S.context.gl;return{u_matrix:x,u_world:[T.drawingBufferWidth,T.drawingBufferHeight],u_image:d,u_color_ramp:v,u_opacity:s.paint.get("heatmap-opacity")}},vB=(S,s,d)=>{let v=d.paint.get("hillshade-accent-color"),x;switch(d.paint.get("hillshade-method")){case"basic":x=4;break;case"combined":x=1;break;case"igor":x=2;break;case"multidirectional":x=3;break;default:x=0}let T=d.getIlluminationProperties();for(let C=0;C<T.directionRadians.length;C++)d.paint.get("hillshade-illumination-anchor")==="viewport"&&(T.directionRadians[C]+=S.transform.bearingInRadians);return{u_image:0,u_latrange:B2(0,s.tileID),u_exaggeration:d.paint.get("hillshade-exaggeration"),u_altitudes:T.altitudeRadians,u_azimuths:T.directionRadians,u_accent:v,u_method:x,u_highlights:T.highlightColor,u_shadows:T.shadowColor}},BN=(S,s)=>{let d=s.stride,v=i.L();return i.bY(v,0,i.$,-i.$,0,0,1),i.M(v,v,[0,-i.$,0]),{u_matrix:v,u_image:1,u_dimension:[d,d],u_zoom:S.overscaledZ,u_unpack:s.getUnpackVector()}};function B2(S,s){let d=Math.pow(2,s.canonical.z),v=s.canonical.y;return[new i.a1(0,v/d).toLngLat().lat,new i.a1(0,(v+1)/d).toLngLat().lat]}let VN=(S,s,d=0)=>({u_image:0,u_unpack:s.getUnpackVector(),u_dimension:[s.stride,s.stride],u_elevation_stops:1,u_color_stops:4,u_color_ramp_size:d,u_opacity:S.paint.get("color-relief-opacity")}),_x=(S,s,d,v)=>{let x=S.transform;return{u_translation:G2(S,s,d),u_ratio:v/i.aC(s,1,x.zoom),u_device_pixel_ratio:S.pixelRatio,u_units_to_pixels:[1/x.pixelsToGLUnits[0],1/x.pixelsToGLUnits[1]]}},GN=(S,s,d,v,x)=>i.e(_x(S,s,d,v),{u_image:0,u_image_height:x}),HN=(S,s,d,v,x)=>{let T=S.transform,C=V2(s,T);return{u_translation:G2(S,s,d),u_texsize:s.imageAtlasTexture.size,u_ratio:v/i.aC(s,1,T.zoom),u_device_pixel_ratio:S.pixelRatio,u_image:0,u_scale:[C,x.fromScale,x.toScale],u_fade:x.t,u_units_to_pixels:[1/T.pixelsToGLUnits[0],1/T.pixelsToGLUnits[1]]}},Hm=(S,s,d,v,x,T)=>{let C=S.lineAtlas,R=V2(s,S.transform),q=d.layout.get("line-cap")==="round",V=C.getDash(x.from,q),H=C.getDash(x.to,q),Y=V.width*T.fromScale,W=H.width*T.toScale;return i.e(_x(S,s,d,v),{u_patternscale_a:[R/Y,-V.height/2],u_patternscale_b:[R/W,-H.height/2],u_sdfgamma:C.width/(256*Math.min(Y,W)*S.pixelRatio)/2,u_image:0,u_tex_y_a:V.y,u_tex_y_b:H.y,u_mix:T.t})};function V2(S,s){return 1/i.aC(S,1,s.tileZoom)}function G2(S,s,d){return i.aD(S.transform,s,d.paint.get("line-translate"),d.paint.get("line-translate-anchor"))}let E1=(S,s,d,v,x)=>{return{u_tl_parent:S,u_scale_parent:s,u_buffer_scale:1,u_fade_t:d.mix,u_opacity:d.opacity*v.paint.get("raster-opacity"),u_image0:0,u_image1:1,u_brightness_low:v.paint.get("raster-brightness-min"),u_brightness_high:v.paint.get("raster-brightness-max"),u_saturation_factor:(C=v.paint.get("raster-saturation"),C>0?1-1/(1.001-C):-C),u_contrast_factor:(T=v.paint.get("raster-contrast"),T>0?1/(1-T):1+T),u_spin_weights:yB(v.paint.get("raster-hue-rotate")),u_coords_top:[x[0].x,x[0].y,x[1].x,x[1].y],u_coords_bottom:[x[3].x,x[3].y,x[2].x,x[2].y]};var T,C};function yB(S){S*=Math.PI/180;let s=Math.sin(S),d=Math.cos(S);return[(2*d+1)/3,(-Math.sqrt(3)*s-d+1)/3,(Math.sqrt(3)*s-d+1)/3]}let S1=(S,s,d,v,x,T,C,R,q,V,H,Y,W)=>{let Q=C.transform;return{u_is_size_zoom_constant:+(S==="constant"||S==="source"),u_is_size_feature_constant:+(S==="constant"||S==="camera"),u_size_t:s?s.uSizeT:0,u_size:s?s.uSize:0,u_camera_to_center_distance:Q.cameraToCenterDistance,u_pitch:Q.pitch/360*2*Math.PI,u_rotate_symbol:+d,u_aspect_ratio:Q.width/Q.height,u_fade_change:C.options.fadeDuration?C.symbolFadeChange:1,u_label_plane_matrix:R,u_coord_matrix:q,u_is_text:+H,u_pitch_with_map:+v,u_is_along_line:x,u_is_variable_anchor:T,u_texsize:Y,u_texture:0,u_translation:V,u_pitched_scale:W}},$N=(S,s,d,v,x,T,C,R,q,V,H,Y,W,Q)=>{let ie=C.transform;return i.e(S1(S,s,d,v,x,T,C,R,q,V,H,Y,Q),{u_gamma_scale:v?Math.cos(ie.pitch*Math.PI/180)*ie.cameraToCenterDistance:1,u_device_pixel_ratio:C.pixelRatio,u_is_halo:1})},_B=(S,s,d,v,x,T,C,R,q,V,H,Y,W)=>i.e($N(S,s,d,v,x,T,C,R,q,V,!0,H,0,W),{u_texsize_icon:Y,u_texture_icon:1}),WN=(S,s)=>({u_opacity:S,u_color:s}),YN=(S,s,d,v,x)=>i.e(function(T,C,R,q){let V=R.imageManager.getPattern(T.from.toString()),H=R.imageManager.getPattern(T.to.toString()),{width:Y,height:W}=R.imageManager.getPixelSize(),Q=Math.pow(2,q.tileID.overscaledZ),ie=q.tileSize*Math.pow(2,R.transform.tileZoom)/Q,ve=ie*(q.tileID.canonical.x+q.tileID.wrap*Q),ge=ie*q.tileID.canonical.y;return{u_image:0,u_pattern_tl_a:V.tl,u_pattern_br_a:V.br,u_pattern_tl_b:H.tl,u_pattern_br_b:H.br,u_texsize:[Y,W],u_mix:C.t,u_pattern_size_a:V.displaySize,u_pattern_size_b:H.displaySize,u_scale_a:C.fromScale,u_scale_b:C.toScale,u_tile_units_to_pixels:1/i.aC(q,1,R.transform.tileZoom),u_pixel_coord_upper:[ve>>16,ge>>16],u_pixel_coord_lower:[65535&ve,65535&ge]}}(d,x,s,v),{u_opacity:S}),H2=(S,s)=>{},$2={fillExtrusion:(S,s)=>({u_lightpos:new i.bT(S,s.u_lightpos),u_lightpos_globe:new i.bT(S,s.u_lightpos_globe),u_lightintensity:new i.bg(S,s.u_lightintensity),u_lightcolor:new i.bT(S,s.u_lightcolor),u_vertical_gradient:new i.bg(S,s.u_vertical_gradient),u_opacity:new i.bg(S,s.u_opacity),u_fill_translate:new i.bU(S,s.u_fill_translate)}),fillExtrusionPattern:(S,s)=>({u_lightpos:new i.bT(S,s.u_lightpos),u_lightpos_globe:new i.bT(S,s.u_lightpos_globe),u_lightintensity:new i.bg(S,s.u_lightintensity),u_lightcolor:new i.bT(S,s.u_lightcolor),u_vertical_gradient:new i.bg(S,s.u_vertical_gradient),u_height_factor:new i.bg(S,s.u_height_factor),u_opacity:new i.bg(S,s.u_opacity),u_fill_translate:new i.bU(S,s.u_fill_translate),u_image:new i.bP(S,s.u_image),u_texsize:new i.bU(S,s.u_texsize),u_pixel_coord_upper:new i.bU(S,s.u_pixel_coord_upper),u_pixel_coord_lower:new i.bU(S,s.u_pixel_coord_lower),u_scale:new i.bT(S,s.u_scale),u_fade:new i.bg(S,s.u_fade)}),fill:(S,s)=>({u_fill_translate:new i.bU(S,s.u_fill_translate)}),fillPattern:(S,s)=>({u_image:new i.bP(S,s.u_image),u_texsize:new i.bU(S,s.u_texsize),u_pixel_coord_upper:new i.bU(S,s.u_pixel_coord_upper),u_pixel_coord_lower:new i.bU(S,s.u_pixel_coord_lower),u_scale:new i.bT(S,s.u_scale),u_fade:new i.bg(S,s.u_fade),u_fill_translate:new i.bU(S,s.u_fill_translate)}),fillOutline:(S,s)=>({u_world:new i.bU(S,s.u_world),u_fill_translate:new i.bU(S,s.u_fill_translate)}),fillOutlinePattern:(S,s)=>({u_world:new i.bU(S,s.u_world),u_image:new i.bP(S,s.u_image),u_texsize:new i.bU(S,s.u_texsize),u_pixel_coord_upper:new i.bU(S,s.u_pixel_coord_upper),u_pixel_coord_lower:new i.bU(S,s.u_pixel_coord_lower),u_scale:new i.bT(S,s.u_scale),u_fade:new i.bg(S,s.u_fade),u_fill_translate:new i.bU(S,s.u_fill_translate)}),circle:(S,s)=>({u_camera_to_center_distance:new i.bg(S,s.u_camera_to_center_distance),u_scale_with_map:new i.bP(S,s.u_scale_with_map),u_pitch_with_map:new i.bP(S,s.u_pitch_with_map),u_extrude_scale:new i.bU(S,s.u_extrude_scale),u_device_pixel_ratio:new i.bg(S,s.u_device_pixel_ratio),u_globe_extrude_scale:new i.bg(S,s.u_globe_extrude_scale),u_translate:new i.bU(S,s.u_translate)}),collisionBox:(S,s)=>({u_pixel_extrude_scale:new i.bU(S,s.u_pixel_extrude_scale)}),collisionCircle:(S,s)=>({u_viewport_size:new i.bU(S,s.u_viewport_size)}),debug:(S,s)=>({u_color:new i.bQ(S,s.u_color),u_overlay:new i.bP(S,s.u_overlay),u_overlay_scale:new i.bg(S,s.u_overlay_scale)}),depth:H2,clippingMask:H2,heatmap:(S,s)=>({u_extrude_scale:new i.bg(S,s.u_extrude_scale),u_intensity:new i.bg(S,s.u_intensity),u_globe_extrude_scale:new i.bg(S,s.u_globe_extrude_scale)}),heatmapTexture:(S,s)=>({u_matrix:new i.bR(S,s.u_matrix),u_world:new i.bU(S,s.u_world),u_image:new i.bP(S,s.u_image),u_color_ramp:new i.bP(S,s.u_color_ramp),u_opacity:new i.bg(S,s.u_opacity)}),hillshade:(S,s)=>({u_image:new i.bP(S,s.u_image),u_latrange:new i.bU(S,s.u_latrange),u_exaggeration:new i.bg(S,s.u_exaggeration),u_altitudes:new i.b_(S,s.u_altitudes),u_azimuths:new i.b_(S,s.u_azimuths),u_accent:new i.bQ(S,s.u_accent),u_method:new i.bP(S,s.u_method),u_shadows:new i.bZ(S,s.u_shadows),u_highlights:new i.bZ(S,s.u_highlights)}),hillshadePrepare:(S,s)=>({u_matrix:new i.bR(S,s.u_matrix),u_image:new i.bP(S,s.u_image),u_dimension:new i.bU(S,s.u_dimension),u_zoom:new i.bg(S,s.u_zoom),u_unpack:new i.bS(S,s.u_unpack)}),colorRelief:(S,s)=>({u_image:new i.bP(S,s.u_image),u_unpack:new i.bS(S,s.u_unpack),u_dimension:new i.bU(S,s.u_dimension),u_elevation_stops:new i.bP(S,s.u_elevation_stops),u_color_stops:new i.bP(S,s.u_color_stops),u_color_ramp_size:new i.bP(S,s.u_color_ramp_size),u_opacity:new i.bg(S,s.u_opacity)}),line:(S,s)=>({u_translation:new i.bU(S,s.u_translation),u_ratio:new i.bg(S,s.u_ratio),u_device_pixel_ratio:new i.bg(S,s.u_device_pixel_ratio),u_units_to_pixels:new i.bU(S,s.u_units_to_pixels)}),lineGradient:(S,s)=>({u_translation:new i.bU(S,s.u_translation),u_ratio:new i.bg(S,s.u_ratio),u_device_pixel_ratio:new i.bg(S,s.u_device_pixel_ratio),u_units_to_pixels:new i.bU(S,s.u_units_to_pixels),u_image:new i.bP(S,s.u_image),u_image_height:new i.bg(S,s.u_image_height)}),linePattern:(S,s)=>({u_translation:new i.bU(S,s.u_translation),u_texsize:new i.bU(S,s.u_texsize),u_ratio:new i.bg(S,s.u_ratio),u_device_pixel_ratio:new i.bg(S,s.u_device_pixel_ratio),u_image:new i.bP(S,s.u_image),u_units_to_pixels:new i.bU(S,s.u_units_to_pixels),u_scale:new i.bT(S,s.u_scale),u_fade:new i.bg(S,s.u_fade)}),lineSDF:(S,s)=>({u_translation:new i.bU(S,s.u_translation),u_ratio:new i.bg(S,s.u_ratio),u_device_pixel_ratio:new i.bg(S,s.u_device_pixel_ratio),u_units_to_pixels:new i.bU(S,s.u_units_to_pixels),u_patternscale_a:new i.bU(S,s.u_patternscale_a),u_patternscale_b:new i.bU(S,s.u_patternscale_b),u_sdfgamma:new i.bg(S,s.u_sdfgamma),u_image:new i.bP(S,s.u_image),u_tex_y_a:new i.bg(S,s.u_tex_y_a),u_tex_y_b:new i.bg(S,s.u_tex_y_b),u_mix:new i.bg(S,s.u_mix)}),raster:(S,s)=>({u_tl_parent:new i.bU(S,s.u_tl_parent),u_scale_parent:new i.bg(S,s.u_scale_parent),u_buffer_scale:new i.bg(S,s.u_buffer_scale),u_fade_t:new i.bg(S,s.u_fade_t),u_opacity:new i.bg(S,s.u_opacity),u_image0:new i.bP(S,s.u_image0),u_image1:new i.bP(S,s.u_image1),u_brightness_low:new i.bg(S,s.u_brightness_low),u_brightness_high:new i.bg(S,s.u_brightness_high),u_saturation_factor:new i.bg(S,s.u_saturation_factor),u_contrast_factor:new i.bg(S,s.u_contrast_factor),u_spin_weights:new i.bT(S,s.u_spin_weights),u_coords_top:new i.bS(S,s.u_coords_top),u_coords_bottom:new i.bS(S,s.u_coords_bottom)}),symbolIcon:(S,s)=>({u_is_size_zoom_constant:new i.bP(S,s.u_is_size_zoom_constant),u_is_size_feature_constant:new i.bP(S,s.u_is_size_feature_constant),u_size_t:new i.bg(S,s.u_size_t),u_size:new i.bg(S,s.u_size),u_camera_to_center_distance:new i.bg(S,s.u_camera_to_center_distance),u_pitch:new i.bg(S,s.u_pitch),u_rotate_symbol:new i.bP(S,s.u_rotate_symbol),u_aspect_ratio:new i.bg(S,s.u_aspect_ratio),u_fade_change:new i.bg(S,s.u_fade_change),u_label_plane_matrix:new i.bR(S,s.u_label_plane_matrix),u_coord_matrix:new i.bR(S,s.u_coord_matrix),u_is_text:new i.bP(S,s.u_is_text),u_pitch_with_map:new i.bP(S,s.u_pitch_with_map),u_is_along_line:new i.bP(S,s.u_is_along_line),u_is_variable_anchor:new i.bP(S,s.u_is_variable_anchor),u_texsize:new i.bU(S,s.u_texsize),u_texture:new i.bP(S,s.u_texture),u_translation:new i.bU(S,s.u_translation),u_pitched_scale:new i.bg(S,s.u_pitched_scale)}),symbolSDF:(S,s)=>({u_is_size_zoom_constant:new i.bP(S,s.u_is_size_zoom_constant),u_is_size_feature_constant:new i.bP(S,s.u_is_size_feature_constant),u_size_t:new i.bg(S,s.u_size_t),u_size:new i.bg(S,s.u_size),u_camera_to_center_distance:new i.bg(S,s.u_camera_to_center_distance),u_pitch:new i.bg(S,s.u_pitch),u_rotate_symbol:new i.bP(S,s.u_rotate_symbol),u_aspect_ratio:new i.bg(S,s.u_aspect_ratio),u_fade_change:new i.bg(S,s.u_fade_change),u_label_plane_matrix:new i.bR(S,s.u_label_plane_matrix),u_coord_matrix:new i.bR(S,s.u_coord_matrix),u_is_text:new i.bP(S,s.u_is_text),u_pitch_with_map:new i.bP(S,s.u_pitch_with_map),u_is_along_line:new i.bP(S,s.u_is_along_line),u_is_variable_anchor:new i.bP(S,s.u_is_variable_anchor),u_texsize:new i.bU(S,s.u_texsize),u_texture:new i.bP(S,s.u_texture),u_gamma_scale:new i.bg(S,s.u_gamma_scale),u_device_pixel_ratio:new i.bg(S,s.u_device_pixel_ratio),u_is_halo:new i.bP(S,s.u_is_halo),u_translation:new i.bU(S,s.u_translation),u_pitched_scale:new i.bg(S,s.u_pitched_scale)}),symbolTextAndIcon:(S,s)=>({u_is_size_zoom_constant:new i.bP(S,s.u_is_size_zoom_constant),u_is_size_feature_constant:new i.bP(S,s.u_is_size_feature_constant),u_size_t:new i.bg(S,s.u_size_t),u_size:new i.bg(S,s.u_size),u_camera_to_center_distance:new i.bg(S,s.u_camera_to_center_distance),u_pitch:new i.bg(S,s.u_pitch),u_rotate_symbol:new i.bP(S,s.u_rotate_symbol),u_aspect_ratio:new i.bg(S,s.u_aspect_ratio),u_fade_change:new i.bg(S,s.u_fade_change),u_label_plane_matrix:new i.bR(S,s.u_label_plane_matrix),u_coord_matrix:new i.bR(S,s.u_coord_matrix),u_is_text:new i.bP(S,s.u_is_text),u_pitch_with_map:new i.bP(S,s.u_pitch_with_map),u_is_along_line:new i.bP(S,s.u_is_along_line),u_is_variable_anchor:new i.bP(S,s.u_is_variable_anchor),u_texsize:new i.bU(S,s.u_texsize),u_texsize_icon:new i.bU(S,s.u_texsize_icon),u_texture:new i.bP(S,s.u_texture),u_texture_icon:new i.bP(S,s.u_texture_icon),u_gamma_scale:new i.bg(S,s.u_gamma_scale),u_device_pixel_ratio:new i.bg(S,s.u_device_pixel_ratio),u_is_halo:new i.bP(S,s.u_is_halo),u_translation:new i.bU(S,s.u_translation),u_pitched_scale:new i.bg(S,s.u_pitched_scale)}),background:(S,s)=>({u_opacity:new i.bg(S,s.u_opacity),u_color:new i.bQ(S,s.u_color)}),backgroundPattern:(S,s)=>({u_opacity:new i.bg(S,s.u_opacity),u_image:new i.bP(S,s.u_image),u_pattern_tl_a:new i.bU(S,s.u_pattern_tl_a),u_pattern_br_a:new i.bU(S,s.u_pattern_br_a),u_pattern_tl_b:new i.bU(S,s.u_pattern_tl_b),u_pattern_br_b:new i.bU(S,s.u_pattern_br_b),u_texsize:new i.bU(S,s.u_texsize),u_mix:new i.bg(S,s.u_mix),u_pattern_size_a:new i.bU(S,s.u_pattern_size_a),u_pattern_size_b:new i.bU(S,s.u_pattern_size_b),u_scale_a:new i.bg(S,s.u_scale_a),u_scale_b:new i.bg(S,s.u_scale_b),u_pixel_coord_upper:new i.bU(S,s.u_pixel_coord_upper),u_pixel_coord_lower:new i.bU(S,s.u_pixel_coord_lower),u_tile_units_to_pixels:new i.bg(S,s.u_tile_units_to_pixels)}),terrain:(S,s)=>({u_texture:new i.bP(S,s.u_texture),u_ele_delta:new i.bg(S,s.u_ele_delta),u_fog_matrix:new i.bR(S,s.u_fog_matrix),u_fog_color:new i.bQ(S,s.u_fog_color),u_fog_ground_blend:new i.bg(S,s.u_fog_ground_blend),u_fog_ground_blend_opacity:new i.bg(S,s.u_fog_ground_blend_opacity),u_horizon_color:new i.bQ(S,s.u_horizon_color),u_horizon_fog_blend:new i.bg(S,s.u_horizon_fog_blend),u_is_globe_mode:new i.bg(S,s.u_is_globe_mode)}),terrainDepth:(S,s)=>({u_ele_delta:new i.bg(S,s.u_ele_delta)}),terrainCoords:(S,s)=>({u_texture:new i.bP(S,s.u_texture),u_terrain_coords_id:new i.bg(S,s.u_terrain_coords_id),u_ele_delta:new i.bg(S,s.u_ele_delta)}),projectionErrorMeasurement:(S,s)=>({u_input:new i.bg(S,s.u_input),u_output_expected:new i.bg(S,s.u_output_expected)}),atmosphere:(S,s)=>({u_sun_pos:new i.bT(S,s.u_sun_pos),u_atmosphere_blend:new i.bg(S,s.u_atmosphere_blend),u_globe_position:new i.bT(S,s.u_globe_position),u_globe_radius:new i.bg(S,s.u_globe_radius),u_inv_proj_matrix:new i.bR(S,s.u_inv_proj_matrix)}),sky:(S,s)=>({u_sky_color:new i.bQ(S,s.u_sky_color),u_horizon_color:new i.bQ(S,s.u_horizon_color),u_horizon:new i.bU(S,s.u_horizon),u_horizon_normal:new i.bU(S,s.u_horizon_normal),u_sky_horizon_blend:new i.bg(S,s.u_sky_horizon_blend),u_sky_blend:new i.bg(S,s.u_sky_blend)})};class ZN{constructor(s,d,v){this.context=s;let x=s.gl;this.buffer=x.createBuffer(),this.dynamicDraw=!!v,this.context.unbindVAO(),s.bindElementBuffer.set(this.buffer),x.bufferData(x.ELEMENT_ARRAY_BUFFER,d.arrayBuffer,this.dynamicDraw?x.DYNAMIC_DRAW:x.STATIC_DRAW),this.dynamicDraw||delete d.arrayBuffer}bind(){this.context.bindElementBuffer.set(this.buffer)}updateData(s){let d=this.context.gl;if(!this.dynamicDraw)throw new Error("Attempted to update data while not in dynamic mode.");this.context.unbindVAO(),this.bind(),d.bufferSubData(d.ELEMENT_ARRAY_BUFFER,0,s.arrayBuffer)}destroy(){this.buffer&&(this.context.gl.deleteBuffer(this.buffer),delete this.buffer)}}let bx={Int8:"BYTE",Uint8:"UNSIGNED_BYTE",Int16:"SHORT",Uint16:"UNSIGNED_SHORT",Int32:"INT",Uint32:"UNSIGNED_INT",Float32:"FLOAT"};class ed{constructor(s,d,v,x){this.length=d.length,this.attributes=v,this.itemSize=d.bytesPerElement,this.dynamicDraw=x,this.context=s;let T=s.gl;this.buffer=T.createBuffer(),s.bindVertexBuffer.set(this.buffer),T.bufferData(T.ARRAY_BUFFER,d.arrayBuffer,this.dynamicDraw?T.DYNAMIC_DRAW:T.STATIC_DRAW),this.dynamicDraw||delete d.arrayBuffer}bind(){this.context.bindVertexBuffer.set(this.buffer)}updateData(s){if(s.length!==this.length)throw new Error(`Length of new data is ${s.length}, which doesn't match current length of ${this.length}`);let d=this.context.gl;this.bind(),d.bufferSubData(d.ARRAY_BUFFER,0,s.arrayBuffer)}enableAttributes(s,d){for(let v=0;v<this.attributes.length;v++){let x=d.attributes[this.attributes[v].name];x!==void 0&&s.enableVertexAttribArray(x)}}setVertexAttribPointers(s,d,v){for(let x=0;x<this.attributes.length;x++){let T=this.attributes[x],C=d.attributes[T.name];C!==void 0&&s.vertexAttribPointer(C,T.components,s[bx[T.type]],!1,this.itemSize,T.offset+this.itemSize*(v||0))}}destroy(){this.buffer&&(this.context.gl.deleteBuffer(this.buffer),delete this.buffer)}}class xo{constructor(s){this.gl=s.gl,this.default=this.getDefault(),this.current=this.default,this.dirty=!1}get(){return this.current}set(s){}getDefault(){return this.default}setDefault(){this.set(this.default)}}class W2 extends xo{getDefault(){return i.bf.transparent}set(s){let d=this.current;(s.r!==d.r||s.g!==d.g||s.b!==d.b||s.a!==d.a||this.dirty)&&(this.gl.clearColor(s.r,s.g,s.b,s.a),this.current=s,this.dirty=!1)}}class Y2 extends xo{getDefault(){return 1}set(s){(s!==this.current||this.dirty)&&(this.gl.clearDepth(s),this.current=s,this.dirty=!1)}}class KN extends xo{getDefault(){return 0}set(s){(s!==this.current||this.dirty)&&(this.gl.clearStencil(s),this.current=s,this.dirty=!1)}}class Z2 extends xo{getDefault(){return[!0,!0,!0,!0]}set(s){let d=this.current;(s[0]!==d[0]||s[1]!==d[1]||s[2]!==d[2]||s[3]!==d[3]||this.dirty)&&(this.gl.colorMask(s[0],s[1],s[2],s[3]),this.current=s,this.dirty=!1)}}class $m extends xo{getDefault(){return!0}set(s){(s!==this.current||this.dirty)&&(this.gl.depthMask(s),this.current=s,this.dirty=!1)}}class K2 extends xo{getDefault(){return 255}set(s){(s!==this.current||this.dirty)&&(this.gl.stencilMask(s),this.current=s,this.dirty=!1)}}class bB extends xo{getDefault(){return{func:this.gl.ALWAYS,ref:0,mask:255}}set(s){let d=this.current;(s.func!==d.func||s.ref!==d.ref||s.mask!==d.mask||this.dirty)&&(this.gl.stencilFunc(s.func,s.ref,s.mask),this.current=s,this.dirty=!1)}}class xB extends xo{getDefault(){let s=this.gl;return[s.KEEP,s.KEEP,s.KEEP]}set(s){let d=this.current;(s[0]!==d[0]||s[1]!==d[1]||s[2]!==d[2]||this.dirty)&&(this.gl.stencilOp(s[0],s[1],s[2]),this.current=s,this.dirty=!1)}}class wB extends xo{getDefault(){return!1}set(s){if(s===this.current&&!this.dirty)return;let d=this.gl;s?d.enable(d.STENCIL_TEST):d.disable(d.STENCIL_TEST),this.current=s,this.dirty=!1}}class EB extends xo{getDefault(){return[0,1]}set(s){let d=this.current;(s[0]!==d[0]||s[1]!==d[1]||this.dirty)&&(this.gl.depthRange(s[0],s[1]),this.current=s,this.dirty=!1)}}class XN extends xo{getDefault(){return!1}set(s){if(s===this.current&&!this.dirty)return;let d=this.gl;s?d.enable(d.DEPTH_TEST):d.disable(d.DEPTH_TEST),this.current=s,this.dirty=!1}}class SB extends xo{getDefault(){return this.gl.LESS}set(s){(s!==this.current||this.dirty)&&(this.gl.depthFunc(s),this.current=s,this.dirty=!1)}}class JN extends xo{getDefault(){return!1}set(s){if(s===this.current&&!this.dirty)return;let d=this.gl;s?d.enable(d.BLEND):d.disable(d.BLEND),this.current=s,this.dirty=!1}}class xx extends xo{getDefault(){let s=this.gl;return[s.ONE,s.ZERO]}set(s){let d=this.current;(s[0]!==d[0]||s[1]!==d[1]||this.dirty)&&(this.gl.blendFunc(s[0],s[1]),this.current=s,this.dirty=!1)}}class wx extends xo{getDefault(){return i.bf.transparent}set(s){let d=this.current;(s.r!==d.r||s.g!==d.g||s.b!==d.b||s.a!==d.a||this.dirty)&&(this.gl.blendColor(s.r,s.g,s.b,s.a),this.current=s,this.dirty=!1)}}class Ex extends xo{getDefault(){return this.gl.FUNC_ADD}set(s){(s!==this.current||this.dirty)&&(this.gl.blendEquation(s),this.current=s,this.dirty=!1)}}class X2 extends xo{getDefault(){return!1}set(s){if(s===this.current&&!this.dirty)return;let d=this.gl;s?d.enable(d.CULL_FACE):d.disable(d.CULL_FACE),this.current=s,this.dirty=!1}}class Wm extends xo{getDefault(){return this.gl.BACK}set(s){(s!==this.current||this.dirty)&&(this.gl.cullFace(s),this.current=s,this.dirty=!1)}}class T1 extends xo{getDefault(){return this.gl.CCW}set(s){(s!==this.current||this.dirty)&&(this.gl.frontFace(s),this.current=s,this.dirty=!1)}}class Iv extends xo{getDefault(){return null}set(s){(s!==this.current||this.dirty)&&(this.gl.useProgram(s),this.current=s,this.dirty=!1)}}class sc extends xo{getDefault(){return this.gl.TEXTURE0}set(s){(s!==this.current||this.dirty)&&(this.gl.activeTexture(s),this.current=s,this.dirty=!1)}}class QN extends xo{getDefault(){let s=this.gl;return[0,0,s.drawingBufferWidth,s.drawingBufferHeight]}set(s){let d=this.current;(s[0]!==d[0]||s[1]!==d[1]||s[2]!==d[2]||s[3]!==d[3]||this.dirty)&&(this.gl.viewport(s[0],s[1],s[2],s[3]),this.current=s,this.dirty=!1)}}class e4 extends xo{getDefault(){return null}set(s){if(s===this.current&&!this.dirty)return;let d=this.gl;d.bindFramebuffer(d.FRAMEBUFFER,s),this.current=s,this.dirty=!1}}class J2 extends xo{getDefault(){return null}set(s){if(s===this.current&&!this.dirty)return;let d=this.gl;d.bindRenderbuffer(d.RENDERBUFFER,s),this.current=s,this.dirty=!1}}class Ym extends xo{getDefault(){return null}set(s){if(s===this.current&&!this.dirty)return;let d=this.gl;d.bindTexture(d.TEXTURE_2D,s),this.current=s,this.dirty=!1}}class Sx extends xo{getDefault(){return null}set(s){if(s===this.current&&!this.dirty)return;let d=this.gl;d.bindBuffer(d.ARRAY_BUFFER,s),this.current=s,this.dirty=!1}}class Tx extends xo{getDefault(){return null}set(s){let d=this.gl;d.bindBuffer(d.ELEMENT_ARRAY_BUFFER,s),this.current=s,this.dirty=!1}}class I1 extends xo{getDefault(){return null}set(s){var d;if(s===this.current&&!this.dirty)return;let v=this.gl;Rp(v)?v.bindVertexArray(s):(d=v.getExtension("OES_vertex_array_object"))===null||d===void 0||d.bindVertexArrayOES(s),this.current=s,this.dirty=!1}}class Ix extends xo{getDefault(){return 4}set(s){if(s===this.current&&!this.dirty)return;let d=this.gl;d.pixelStorei(d.UNPACK_ALIGNMENT,s),this.current=s,this.dirty=!1}}class t4 extends xo{getDefault(){return!1}set(s){if(s===this.current&&!this.dirty)return;let d=this.gl;d.pixelStorei(d.UNPACK_PREMULTIPLY_ALPHA_WEBGL,s),this.current=s,this.dirty=!1}}class Mv extends xo{getDefault(){return!1}set(s){if(s===this.current&&!this.dirty)return;let d=this.gl;d.pixelStorei(d.UNPACK_FLIP_Y_WEBGL,s),this.current=s,this.dirty=!1}}class fh extends xo{constructor(s,d){super(s),this.context=s,this.parent=d}getDefault(){return null}}class r4 extends fh{setDirty(){this.dirty=!0}set(s){if(s===this.current&&!this.dirty)return;this.context.bindFramebuffer.set(this.parent);let d=this.gl;d.framebufferTexture2D(d.FRAMEBUFFER,d.COLOR_ATTACHMENT0,d.TEXTURE_2D,s,0),this.current=s,this.dirty=!1}}class Q2 extends fh{set(s){if(s===this.current&&!this.dirty)return;this.context.bindFramebuffer.set(this.parent);let d=this.gl;d.framebufferRenderbuffer(d.FRAMEBUFFER,d.DEPTH_ATTACHMENT,d.RENDERBUFFER,s),this.current=s,this.dirty=!1}}class Xn extends fh{set(s){if(s===this.current&&!this.dirty)return;this.context.bindFramebuffer.set(this.parent);let d=this.gl;d.framebufferRenderbuffer(d.FRAMEBUFFER,d.DEPTH_STENCIL_ATTACHMENT,d.RENDERBUFFER,s),this.current=s,this.dirty=!1}}let M1="Framebuffer is not complete";class TB{constructor(s,d,v,x,T){this.context=s,this.width=d,this.height=v;let C=s.gl,R=this.framebuffer=C.createFramebuffer();if(this.colorAttachment=new r4(s,R),x)this.depthAttachment=T?new Xn(s,R):new Q2(s,R);else if(T)throw new Error("Stencil cannot be set without depth");if(C.checkFramebufferStatus(C.FRAMEBUFFER)!==C.FRAMEBUFFER_COMPLETE)throw new Error(M1)}destroy(){let s=this.context.gl,d=this.colorAttachment.get();if(d&&s.deleteTexture(d),this.depthAttachment){let v=this.depthAttachment.get();v&&s.deleteRenderbuffer(v)}s.deleteFramebuffer(this.framebuffer)}}class n4{constructor(s){var d,v;if(this.gl=s,this.clearColor=new W2(this),this.clearDepth=new Y2(this),this.clearStencil=new KN(this),this.colorMask=new Z2(this),this.depthMask=new $m(this),this.stencilMask=new K2(this),this.stencilFunc=new bB(this),this.stencilOp=new xB(this),this.stencilTest=new wB(this),this.depthRange=new EB(this),this.depthTest=new XN(this),this.depthFunc=new SB(this),this.blend=new JN(this),this.blendFunc=new xx(this),this.blendColor=new wx(this),this.blendEquation=new Ex(this),this.cullFace=new X2(this),this.cullFaceSide=new Wm(this),this.frontFace=new T1(this),this.program=new Iv(this),this.activeTexture=new sc(this),this.viewport=new QN(this),this.bindFramebuffer=new e4(this),this.bindRenderbuffer=new J2(this),this.bindTexture=new Ym(this),this.bindVertexBuffer=new Sx(this),this.bindElementBuffer=new Tx(this),this.bindVertexArray=new I1(this),this.pixelStoreUnpack=new Ix(this),this.pixelStoreUnpackPremultiplyAlpha=new t4(this),this.pixelStoreUnpackFlipY=new Mv(this),this.extTextureFilterAnisotropic=s.getExtension("EXT_texture_filter_anisotropic")||s.getExtension("MOZ_EXT_texture_filter_anisotropic")||s.getExtension("WEBKIT_EXT_texture_filter_anisotropic"),this.extTextureFilterAnisotropic&&(this.extTextureFilterAnisotropicMax=s.getParameter(this.extTextureFilterAnisotropic.MAX_TEXTURE_MAX_ANISOTROPY_EXT)),this.maxTextureSize=s.getParameter(s.MAX_TEXTURE_SIZE),Rp(s)){this.HALF_FLOAT=s.HALF_FLOAT;let x=s.getExtension("EXT_color_buffer_half_float");this.RGBA16F=(d=s.RGBA16F)!==null&&d!==void 0?d:x==null?void 0:x.RGBA16F_EXT,this.RGB16F=(v=s.RGB16F)!==null&&v!==void 0?v:x==null?void 0:x.RGB16F_EXT,s.getExtension("EXT_color_buffer_float")}else{s.getExtension("EXT_color_buffer_half_float"),s.getExtension("OES_texture_half_float_linear");let x=s.getExtension("OES_texture_half_float");this.HALF_FLOAT=x==null?void 0:x.HALF_FLOAT_OES}}setDefault(){this.unbindVAO(),this.clearColor.setDefault(),this.clearDepth.setDefault(),this.clearStencil.setDefault(),this.colorMask.setDefault(),this.depthMask.setDefault(),this.stencilMask.setDefault(),this.stencilFunc.setDefault(),this.stencilOp.setDefault(),this.stencilTest.setDefault(),this.depthRange.setDefault(),this.depthTest.setDefault(),this.depthFunc.setDefault(),this.blend.setDefault(),this.blendFunc.setDefault(),this.blendColor.setDefault(),this.blendEquation.setDefault(),this.cullFace.setDefault(),this.cullFaceSide.setDefault(),this.frontFace.setDefault(),this.program.setDefault(),this.activeTexture.setDefault(),this.bindFramebuffer.setDefault(),this.pixelStoreUnpack.setDefault(),this.pixelStoreUnpackPremultiplyAlpha.setDefault(),this.pixelStoreUnpackFlipY.setDefault()}setDirty(){this.clearColor.dirty=!0,this.clearDepth.dirty=!0,this.clearStencil.dirty=!0,this.colorMask.dirty=!0,this.depthMask.dirty=!0,this.stencilMask.dirty=!0,this.stencilFunc.dirty=!0,this.stencilOp.dirty=!0,this.stencilTest.dirty=!0,this.depthRange.dirty=!0,this.depthTest.dirty=!0,this.depthFunc.dirty=!0,this.blend.dirty=!0,this.blendFunc.dirty=!0,this.blendColor.dirty=!0,this.blendEquation.dirty=!0,this.cullFace.dirty=!0,this.cullFaceSide.dirty=!0,this.frontFace.dirty=!0,this.program.dirty=!0,this.activeTexture.dirty=!0,this.viewport.dirty=!0,this.bindFramebuffer.dirty=!0,this.bindRenderbuffer.dirty=!0,this.bindTexture.dirty=!0,this.bindVertexBuffer.dirty=!0,this.bindElementBuffer.dirty=!0,this.bindVertexArray.dirty=!0,this.pixelStoreUnpack.dirty=!0,this.pixelStoreUnpackPremultiplyAlpha.dirty=!0,this.pixelStoreUnpackFlipY.dirty=!0}createIndexBuffer(s,d){return new ZN(this,s,d)}createVertexBuffer(s,d,v){return new ed(this,s,d,v)}createRenderbuffer(s,d,v){let x=this.gl,T=x.createRenderbuffer();return this.bindRenderbuffer.set(T),x.renderbufferStorage(x.RENDERBUFFER,s,d,v),this.bindRenderbuffer.set(null),T}createFramebuffer(s,d,v,x){return new TB(this,s,d,v,x)}clear({color:s,depth:d,stencil:v}){let x=this.gl,T=0;s&&(T|=x.COLOR_BUFFER_BIT,this.clearColor.set(s),this.colorMask.set([!0,!0,!0,!0])),d!==void 0&&(T|=x.DEPTH_BUFFER_BIT,this.depthRange.set([0,1]),this.clearDepth.set(d),this.depthMask.set(!0)),v!==void 0&&(T|=x.STENCIL_BUFFER_BIT,this.clearStencil.set(v),this.stencilMask.set(255)),x.clear(T)}setCullFace(s){s.enable===!1?this.cullFace.set(!1):(this.cullFace.set(!0),this.cullFaceSide.set(s.mode),this.frontFace.set(s.frontFace))}setDepthMode(s){s.func!==this.gl.ALWAYS||s.mask?(this.depthTest.set(!0),this.depthFunc.set(s.func),this.depthMask.set(s.mask),this.depthRange.set(s.range)):this.depthTest.set(!1)}setStencilMode(s){s.test.func!==this.gl.ALWAYS||s.mask?(this.stencilTest.set(!0),this.stencilMask.set(s.mask),this.stencilOp.set([s.fail,s.depthFail,s.pass]),this.stencilFunc.set({func:s.test.func,ref:s.ref,mask:s.test.mask})):this.stencilTest.set(!1)}setColorMode(s){i.bH(s.blendFunction,xi.Replace)?this.blend.set(!1):(this.blend.set(!0),this.blendFunc.set(s.blendFunction),this.blendColor.set(s.blendColor)),this.colorMask.set(s.mask)}createVertexArray(){var s;return Rp(this.gl)?this.gl.createVertexArray():(s=this.gl.getExtension("OES_vertex_array_object"))===null||s===void 0?void 0:s.createVertexArrayOES()}deleteVertexArray(s){var d;return Rp(this.gl)?this.gl.deleteVertexArray(s):(d=this.gl.getExtension("OES_vertex_array_object"))===null||d===void 0?void 0:d.deleteVertexArrayOES(s)}unbindVAO(){this.bindVertexArray.set(null)}}let dh;function o4(S,s,d,v,x){let T=S.context,C=S.transform,R=T.gl,q=S.useProgram("collisionBox"),V=[],H=0,Y=0;for(let ye=0;ye<v.length;ye++){let Ie=v[ye],Re=s.getTile(Ie).getBucket(d);if(!Re)continue;let Pe=x?Re.textCollisionBox:Re.iconCollisionBox,ze=Re.collisionCircleArray;ze.length>0&&(V.push({circleArray:ze,circleOffset:Y,coord:Ie}),H+=ze.length/4,Y=H),Pe&&q.draw(T,R.LINES,wn.disabled,uo.disabled,S.colorModeForRenderPass(),Xr.disabled,yx(S.transform),S.style.map.terrain&&S.style.map.terrain.getTerrainData(Ie),C.getProjectionData({overscaledTileID:Ie,applyGlobeMatrix:!0,applyTerrainMatrix:!0}),d.id,Pe.layoutVertexBuffer,Pe.indexBuffer,Pe.segments,null,S.transform.zoom,null,null,Pe.collisionVertexBuffer)}if(!x||!V.length)return;let W=S.useProgram("collisionCircle"),Q=new i.b$;Q.resize(4*H),Q._trim();let ie=0;for(let ye of V)for(let Ie=0;Ie<ye.circleArray.length/4;Ie++){let Re=4*Ie,Pe=ye.circleArray[Re+0],ze=ye.circleArray[Re+1],He=ye.circleArray[Re+2],Ne=ye.circleArray[Re+3];Q.emplace(ie++,Pe,ze,He,Ne,0),Q.emplace(ie++,Pe,ze,He,Ne,1),Q.emplace(ie++,Pe,ze,He,Ne,2),Q.emplace(ie++,Pe,ze,He,Ne,3)}(!dh||dh.length<2*H)&&(dh=function(ye){let Ie=2*ye,Re=new i.c1;Re.resize(Ie),Re._trim();for(let Pe=0;Pe<Ie;Pe++){let ze=6*Pe;Re.uint16[ze+0]=4*Pe+0,Re.uint16[ze+1]=4*Pe+1,Re.uint16[ze+2]=4*Pe+2,Re.uint16[ze+3]=4*Pe+2,Re.uint16[ze+4]=4*Pe+3,Re.uint16[ze+5]=4*Pe+0}return Re}(H));let ve=T.createIndexBuffer(dh,!0),ge=T.createVertexBuffer(Q,i.c0.members,!0);for(let ye of V){let Ie=gB(S.transform);W.draw(T,R.TRIANGLES,wn.disabled,uo.disabled,S.colorModeForRenderPass(),Xr.disabled,Ie,S.style.map.terrain&&S.style.map.terrain.getTerrainData(ye.coord),null,d.id,ge,ve,i.aM.simpleSegment(0,2*ye.circleOffset,ye.circleArray.length,ye.circleArray.length/2),null,S.transform.zoom,null,null,null)}ge.destroy(),ve.destroy()}let IB=i.ag(new Float32Array(16));function i4(S,s,d,v,x,T){let{horizontalAlign:C,verticalAlign:R}=i.aH(S);return new i.P((-(C-.5)*s/x+v[0])*T,(-(R-.5)*d/x+v[1])*T)}function MB(S,s,d,v,x,T){let C=s.tileAnchorPoint.add(new i.P(s.translation[0],s.translation[1]));if(s.pitchWithMap){let R=v.mult(T);d||(R=R.rotate(-x));let q=C.add(R);return Er(q.x,q.y,s.pitchedLabelPlaneMatrix,s.getElevation).point}if(d){let R=yn(s.tileAnchorPoint.x+1,s.tileAnchorPoint.y,s).point.sub(S),q=Math.atan(R.y/R.x)+(R.x<0?Math.PI:0);return S.add(v.rotate(q))}return S.add(v)}function eI(S,s,d,v,x,T,C,R,q,V,H,Y){let W=S.text.placedSymbolArray,Q=S.text.dynamicLayoutVertexArray,ie=S.icon.dynamicLayoutVertexArray,ve={};Q.clear();for(let ge=0;ge<W.length;ge++){let ye=W.get(ge),Ie=ye.hidden||!ye.crossTileID||S.allowVerticalPlacement&&!ye.placedOrientation?null:v[ye.crossTileID];if(Ie){let Re=new i.P(ye.anchorX,ye.anchorY),Pe={getElevation:Y,width:x.width,height:x.height,pitchedLabelPlaneMatrix:T,pitchWithMap:d,transform:x,tileAnchorPoint:Re,translation:V,unwrappedTileID:H},ze=d?On(Re.x,Re.y,Pe):yn(Re.x,Re.y,Pe),He=Rt(x.cameraToCenterDistance,ze.signedDistanceFromCamera),Ne=i.ap(S.textSizeData,R,ye)*He/i.aB;d&&(Ne*=S.tilePixelRatio/C);let{width:Qe,height:ht,anchor:it,textOffset:at,textBoxScale:dt}=Ie,Vt=i4(it,Qe,ht,at,dt,Ne),Wt=x.getPitchedTextCorrection(Re.x+V[0],Re.y+V[1],H),Nt=MB(ze.point,Pe,s,Vt,-x.bearingInRadians,Wt),xr=S.allowVerticalPlacement&&ye.placedOrientation===i.ao.vertical?Math.PI/2:0;for(let Dn=0;Dn<ye.numGlyphs;Dn++)i.av(Q,Nt,xr);q&&ye.associatedIconIndex>=0&&(ve[ye.associatedIconIndex]={shiftedAnchor:Nt,angle:xr})}else on(ye.numGlyphs,Q)}if(q){ie.clear();let ge=S.icon.placedSymbolArray;for(let ye=0;ye<ge.length;ye++){let Ie=ge.get(ye);if(Ie.hidden)on(Ie.numGlyphs,ie);else{let Re=ve[ye];if(Re)for(let Pe=0;Pe<Ie.numGlyphs;Pe++)i.av(ie,Re.shiftedAnchor,Re.angle);else on(Ie.numGlyphs,ie)}}S.icon.dynamicLayoutVertexBuffer.updateData(ie)}S.text.dynamicLayoutVertexBuffer.updateData(Q)}function Mx(S,s,d){return d.iconsInText&&s?"symbolTextAndIcon":S?"symbolSDF":"symbolIcon"}function C1(S,s,d,v,x,T,C,R,q,V,H,Y,W){let Q=S.context,ie=Q.gl,ve=S.transform,ge=R==="map",ye=q==="map",Ie=R!=="viewport"&&d.layout.get("symbol-placement")!=="point",Re=ge&&!ye&&!Ie,Pe=!d.layout.get("symbol-sort-key").isConstant(),ze=!1,He=S.getDepthModeForSublayer(0,wn.ReadOnly),Ne=d._unevaluatedLayout.hasValue("text-variable-anchor")||d._unevaluatedLayout.hasValue("text-variable-anchor-offset"),Qe=[],ht=ve.getCircleRadiusCorrection();for(let it of v){let at=s.getTile(it),dt=at.getBucket(d);if(!dt)continue;let Vt=x?dt.text:dt.icon;if(!Vt||!Vt.segments.get().length||!Vt.hasVisibleVertices)continue;let Wt=Vt.programConfigurations.get(d.id),Nt=x||dt.sdfIcons,xr=x?dt.textSizeData:dt.iconSizeData,Dn=ye||ve.pitch!==0,Eo=S.useProgram(Mx(Nt,x,dt),Wt),Qo=i.an(xr,ve.zoom),Go=S.style.map.terrain&&S.style.map.terrain.getTerrainData(it),Fi,Ji,Cn,ei,Ma=[0,0],Ua=null;if(x)Ji=at.glyphAtlasTexture,Cn=ie.LINEAR,Fi=at.glyphAtlasTexture.size,dt.iconsInText&&(Ma=at.imageAtlasTexture.size,Ua=at.imageAtlasTexture,ei=Dn||S.options.rotating||S.options.zooming||xr.kind==="composite"||xr.kind==="camera"?ie.LINEAR:ie.NEAREST);else{let Ca=d.layout.get("icon-size").constantOr(0)!==1||dt.iconsNeedLinear;Ji=at.imageAtlasTexture,Cn=Nt||S.options.rotating||S.options.zooming||Ca||Dn?ie.LINEAR:ie.NEAREST,Fi=at.imageAtlasTexture.size}let ls=i.aC(at,1,S.transform.zoom),gl=an(ge,S.transform,ls),op=i.L();i.aq(op,gl);let mh=Cr(ye,ge,S.transform,ls),gh=i.aD(ve,at,T,C),zv=ve.getProjectionData({overscaledTileID:it,applyGlobeMatrix:!W,applyTerrainMatrix:!0}),Fv=Ne&&dt.hasTextData(),tg=d.layout.get("icon-text-fit")!=="none"&&Fv&&dt.hasIconData();if(Ie){let Ca=S.style.map.terrain?(cc,Aa)=>S.style.map.terrain.getElevation(it,cc,Aa):null,Ba=d.layout.get("text-rotation-alignment")==="map";Xo(dt,S,x,gl,op,ye,V,Ba,it.toUnwrapped(),ve.width,ve.height,gh,Ca)}let rg=x&&Ne||tg,Ql=Ie||rg?IB:ye?gl:S.transform.clipSpaceToPixelsMatrix,ip=Nt&&d.paint.get(x?"text-halo-width":"icon-halo-width").constantOr(1)!==0,vl;vl=Nt?dt.iconsInText?_B(xr.kind,Qo,Re,ye,Ie,rg,S,Ql,mh,gh,Fi,Ma,ht):$N(xr.kind,Qo,Re,ye,Ie,rg,S,Ql,mh,gh,x,Fi,0,ht):S1(xr.kind,Qo,Re,ye,Ie,rg,S,Ql,mh,gh,x,Fi,ht);let vh={program:Eo,buffers:Vt,uniformValues:vl,projectionData:zv,atlasTexture:Ji,atlasTextureIcon:Ua,atlasInterpolation:Cn,atlasInterpolationIcon:ei,isSDF:Nt,hasHalo:ip};if(Pe&&dt.canOverlap){ze=!0;let Ca=Vt.segments.get();for(let Ba of Ca)Qe.push({segments:new i.aM([Ba]),sortKey:Ba.sortKey,state:vh,terrainData:Go})}else Qe.push({segments:Vt.segments,sortKey:0,state:vh,terrainData:Go})}ze&&Qe.sort((it,at)=>it.sortKey-at.sortKey);for(let it of Qe){let at=it.state;if(Q.activeTexture.set(ie.TEXTURE0),at.atlasTexture.bind(at.atlasInterpolation,ie.CLAMP_TO_EDGE),at.atlasTextureIcon&&(Q.activeTexture.set(ie.TEXTURE1),at.atlasTextureIcon&&at.atlasTextureIcon.bind(at.atlasInterpolationIcon,ie.CLAMP_TO_EDGE)),at.isSDF){let dt=at.uniformValues;at.hasHalo&&(dt.u_is_halo=1,A1(at.buffers,it.segments,d,S,at.program,He,H,Y,dt,at.projectionData,it.terrainData)),dt.u_is_halo=0}A1(at.buffers,it.segments,d,S,at.program,He,H,Y,at.uniformValues,at.projectionData,it.terrainData)}}function A1(S,s,d,v,x,T,C,R,q,V,H){let Y=v.context;x.draw(Y,Y.gl.TRIANGLES,T,C,R,Xr.backCCW,q,H,V,d.id,S.layoutVertexBuffer,S.indexBuffer,s,d.paint,v.transform.zoom,S.programConfigurations.get(d.id),S.dynamicLayoutVertexBuffer,S.opacityVertexBuffer)}function tI(S,s,d,v,x){let T=S.context,C=T.gl,R=uo.disabled,q=new xi([C.ONE,C.ONE],i.bf.transparent,[!0,!0,!0,!0]),V=s.getBucket(d);if(!V)return;let H=v.key,Y=d.heatmapFbos.get(H);Y||(Y=O1(T,s.tileSize,s.tileSize),d.heatmapFbos.set(H,Y)),T.bindFramebuffer.set(Y.framebuffer),T.viewport.set([0,0,s.tileSize,s.tileSize]),T.clear({color:i.bf.transparent});let W=V.programConfigurations.get(d.id),Q=S.useProgram("heatmap",W,!x),ie=S.transform.getProjectionData({overscaledTileID:s.tileID,applyGlobeMatrix:!0,applyTerrainMatrix:!0}),ve=S.style.map.terrain.getTerrainData(v);Q.draw(T,C.TRIANGLES,wn.disabled,R,q,Xr.disabled,UN(s,S.transform.zoom,d.paint.get("heatmap-intensity"),1),ve,ie,d.id,V.layoutVertexBuffer,V.indexBuffer,V.segments,d.paint,S.transform.zoom,W)}function a4(S,s,d,v,x){let T=S.context,C=T.gl,R=S.transform;T.setColorMode(S.colorModeForRenderPass());let q=P1(T,s),V=d.key,H=s.heatmapFbos.get(V);if(!H)return;T.activeTexture.set(C.TEXTURE0),C.bindTexture(C.TEXTURE_2D,H.colorAttachment.get()),T.activeTexture.set(C.TEXTURE1),q.bind(C.LINEAR,C.CLAMP_TO_EDGE);let Y=R.getProjectionData({overscaledTileID:d,applyTerrainMatrix:x,applyGlobeMatrix:!v});S.useProgram("heatmapTexture").draw(T,C.TRIANGLES,wn.disabled,uo.disabled,S.colorModeForRenderPass(),Xr.disabled,U2(S,s,0,1),null,Y,s.id,S.rasterBoundsBuffer,S.quadTriangleIndexBuffer,S.rasterBoundsSegments,s.paint,R.zoom),H.destroy(),s.heatmapFbos.delete(V)}function O1(S,s,d){var v,x;let T=S.gl,C=T.createTexture();T.bindTexture(T.TEXTURE_2D,C),T.texParameteri(T.TEXTURE_2D,T.TEXTURE_WRAP_S,T.CLAMP_TO_EDGE),T.texParameteri(T.TEXTURE_2D,T.TEXTURE_WRAP_T,T.CLAMP_TO_EDGE),T.texParameteri(T.TEXTURE_2D,T.TEXTURE_MIN_FILTER,T.LINEAR),T.texParameteri(T.TEXTURE_2D,T.TEXTURE_MAG_FILTER,T.LINEAR);let R=(v=S.HALF_FLOAT)!==null&&v!==void 0?v:T.UNSIGNED_BYTE,q=(x=S.RGBA16F)!==null&&x!==void 0?x:T.RGBA;T.texImage2D(T.TEXTURE_2D,0,q,s,d,0,T.RGBA,R,null);let V=S.createFramebuffer(s,d,!1,!1);return V.colorAttachment.set(C),V}function P1(S,s){return s.colorRampTexture||(s.colorRampTexture=new i.T(S,s.colorRamp,S.gl.RGBA)),s.colorRampTexture}function D1(S,s,d,v,x){if(!d||!v||!v.imageAtlas)return;let T=v.imageAtlas.patternPositions,C=T[d.to.toString()],R=T[d.from.toString()];if(!C&&R&&(C=R),!R&&C&&(R=C),!C||!R){let q=x.getPaintProperty(s);C=T[q],R=T[q]}C&&R&&S.setConstantPatternPositions(C,R)}function Cx(S,s,d,v,x,T,C,R){let q=S.context.gl,V="fill-pattern",H=d.paint.get(V),Y=H&&H.constantOr(1),W=d.getCrossfadeParameters(),Q,ie,ve,ge,ye,Ie=S.transform,Re=d.paint.get("fill-translate"),Pe=d.paint.get("fill-translate-anchor");C?(ie=Y&&!d.getPaintProperty("fill-outline-color")?"fillOutlinePattern":"fillOutline",Q=q.LINES):(ie=Y?"fillPattern":"fill",Q=q.TRIANGLES);let ze=H.constantOr(null);for(let He of v){let Ne=s.getTile(He);if(Y&&!Ne.patternsLoaded())continue;let Qe=Ne.getBucket(d);if(!Qe)continue;let ht=Qe.programConfigurations.get(d.id),it=S.useProgram(ie,ht),at=S.style.map.terrain&&S.style.map.terrain.getTerrainData(He);Y&&(S.context.activeTexture.set(q.TEXTURE0),Ne.imageAtlasTexture.bind(q.LINEAR,q.CLAMP_TO_EDGE),ht.updatePaintBuffers(W)),D1(ht,V,ze,Ne,d);let dt=Ie.getProjectionData({overscaledTileID:He,applyGlobeMatrix:!R,applyTerrainMatrix:!0}),Vt=i.aD(Ie,Ne,Re,Pe);if(C){ge=Qe.indexBuffer2,ye=Qe.segments2;let Nt=[q.drawingBufferWidth,q.drawingBufferHeight];ve=ie==="fillOutlinePattern"&&Y?w1(S,W,Ne,Nt,Vt):x1(Nt,Vt)}else ge=Qe.indexBuffer,ye=Qe.segments,ve=Y?vx(S,W,Ne,Vt):{u_fill_translate:Vt};let Wt=S.stencilModeForClipping(He);it.draw(S.context,Q,x,Wt,T,Xr.backCCW,ve,at,dt,d.id,Qe.layoutVertexBuffer,ge,ye,d.paint,S.transform.zoom,ht)}}function rI(S,s,d,v,x,T,C,R){let q=S.context,V=q.gl,H="fill-extrusion-pattern",Y=d.paint.get(H),W=Y.constantOr(1),Q=d.getCrossfadeParameters(),ie=d.paint.get("fill-extrusion-opacity"),ve=Y.constantOr(null),ge=S.transform;for(let ye of v){let Ie=s.getTile(ye),Re=Ie.getBucket(d);if(!Re)continue;let Pe=S.style.map.terrain&&S.style.map.terrain.getTerrainData(ye),ze=Re.programConfigurations.get(d.id),He=S.useProgram(W?"fillExtrusionPattern":"fillExtrusion",ze);W&&(S.context.activeTexture.set(V.TEXTURE0),Ie.imageAtlasTexture.bind(V.LINEAR,V.CLAMP_TO_EDGE),ze.updatePaintBuffers(Q));let Ne=ge.getProjectionData({overscaledTileID:ye,applyGlobeMatrix:!R,applyTerrainMatrix:!0});D1(ze,H,ve,Ie,d);let Qe=i.aD(ge,Ie,d.paint.get("fill-extrusion-translate"),d.paint.get("fill-extrusion-translate-anchor")),ht=d.paint.get("fill-extrusion-vertical-gradient"),it=W?hB(S,ht,ie,Qe,ye,Q,Ie):Jc(S,ht,ie,Qe);He.draw(q,q.gl.TRIANGLES,x,T,C,Xr.backCCW,it,Pe,Ne,d.id,Re.layoutVertexBuffer,Re.indexBuffer,Re.segments,d.paint,S.transform.zoom,ze,S.style.map.terrain&&Re.centroidVertexBuffer)}}function Zm(S,s,d,v,x,T,C,R,q){var V;let H=S.style.projection,Y=S.context,W=S.transform,Q=Y.gl,ie=[`#define NUM_ILLUMINATION_SOURCES ${d.paint.get("hillshade-highlight-color").values.length}`],ve=S.useProgram("hillshade",null,!1,ie),ge=!S.options.moving;for(let ye of v){let Ie=s.getTile(ye),Re=Ie.fbo;if(!Re)continue;let Pe=H.getMeshFromTileID(Y,ye.canonical,R,!0,"raster"),ze=(V=S.style.map.terrain)===null||V===void 0?void 0:V.getTerrainData(ye);Y.activeTexture.set(Q.TEXTURE0),Q.bindTexture(Q.TEXTURE_2D,Re.colorAttachment.get());let He=W.getProjectionData({overscaledTileID:ye,aligned:ge,applyGlobeMatrix:!q,applyTerrainMatrix:!0});ve.draw(Y,Q.TRIANGLES,T,x[ye.overscaledZ],C,Xr.backCCW,vB(S,Ie,d),ze,He,d.id,Pe.vertexBuffer,Pe.indexBuffer,Pe.segments)}}function nI(S,s,d,v,x,T,C,R,q){var V;let H=S.style.projection,Y=S.context,W=S.transform,Q=Y.gl,ie=S.useProgram("colorRelief"),ve=!S.options.moving,ge=!0,ye=0;for(let Ie of v){let Re=s.getTile(Ie),Pe=Re.dem;if(ge){let it=Q.getParameter(Q.MAX_TEXTURE_SIZE),{elevationTexture:at,colorTexture:dt}=d.getColorRampTextures(Y,it,Pe.getUnpackVector());Y.activeTexture.set(Q.TEXTURE1),at.bind(Q.NEAREST,Q.CLAMP_TO_EDGE),Y.activeTexture.set(Q.TEXTURE4),dt.bind(Q.LINEAR,Q.CLAMP_TO_EDGE),ge=!1,ye=at.size[0]}if(!Pe||!Pe.data)continue;let ze=Pe.stride,He=Pe.getPixels();if(Y.activeTexture.set(Q.TEXTURE0),Y.pixelStoreUnpackPremultiplyAlpha.set(!1),Re.demTexture=Re.demTexture||S.getTileTexture(ze),Re.demTexture){let it=Re.demTexture;it.update(He,{premultiply:!1}),it.bind(Q.LINEAR,Q.CLAMP_TO_EDGE)}else Re.demTexture=new i.T(Y,He,Q.RGBA,{premultiply:!1}),Re.demTexture.bind(Q.LINEAR,Q.CLAMP_TO_EDGE);let Ne=H.getMeshFromTileID(Y,Ie.canonical,R,!0,"raster"),Qe=(V=S.style.map.terrain)===null||V===void 0?void 0:V.getTerrainData(Ie),ht=W.getProjectionData({overscaledTileID:Ie,aligned:ve,applyGlobeMatrix:!q,applyTerrainMatrix:!0});ie.draw(Y,Q.TRIANGLES,T,x[Ie.overscaledZ],C,Xr.backCCW,VN(d,Re.dem,ye),Qe,ht,d.id,Ne.vertexBuffer,Ne.indexBuffer,Ne.segments)}}let Ax=[new i.P(0,0),new i.P(i.$,0),new i.P(i.$,i.$),new i.P(0,i.$)];function Km(S,s,d,v,x,T,C,R,q=!1,V=!1){let H=v[v.length-1].overscaledZ,Y=S.context,W=Y.gl,Q=S.useProgram("raster"),ie=S.transform,ve=S.style.projection,ge=S.colorModeForRenderPass(),ye=!S.options.moving;for(let Ie of v){let Re=S.getDepthModeForSublayer(Ie.overscaledZ-H,d.paint.get("raster-opacity")===1?wn.ReadWrite:wn.ReadOnly,W.LESS),Pe=s.getTile(Ie);Pe.registerFadeDuration(d.paint.get("raster-fade-duration"));let ze=s.findLoadedParent(Ie,0),He=s.findLoadedSibling(Ie),Ne=oI(Pe,ze||He||null,s,d,S.transform,S.style.map.terrain),Qe,ht,it=d.paint.get("raster-resampling")==="nearest"?W.NEAREST:W.LINEAR;Y.activeTexture.set(W.TEXTURE0),Pe.texture.bind(it,W.CLAMP_TO_EDGE,W.LINEAR_MIPMAP_NEAREST),Y.activeTexture.set(W.TEXTURE1),ze?(ze.texture.bind(it,W.CLAMP_TO_EDGE,W.LINEAR_MIPMAP_NEAREST),Qe=Math.pow(2,ze.tileID.overscaledZ-Pe.tileID.overscaledZ),ht=[Pe.tileID.canonical.x*Qe%1,Pe.tileID.canonical.y*Qe%1]):Pe.texture.bind(it,W.CLAMP_TO_EDGE,W.LINEAR_MIPMAP_NEAREST),Pe.texture.useMipmap&&Y.extTextureFilterAnisotropic&&S.transform.pitch>20&&W.texParameterf(W.TEXTURE_2D,Y.extTextureFilterAnisotropic.TEXTURE_MAX_ANISOTROPY_EXT,Y.extTextureFilterAnisotropicMax);let at=S.style.map.terrain&&S.style.map.terrain.getTerrainData(Ie),dt=ie.getProjectionData({overscaledTileID:Ie,aligned:ye,applyGlobeMatrix:!V,applyTerrainMatrix:!0}),Vt=E1(ht||[0,0],Qe||1,Ne,d,R),Wt=ve.getMeshFromTileID(Y,Ie.canonical,T,C,"raster");Q.draw(Y,W.TRIANGLES,Re,x?x[Ie.overscaledZ]:uo.disabled,ge,q?Xr.frontCCW:Xr.backCCW,Vt,at,dt,d.id,Wt.vertexBuffer,Wt.indexBuffer,Wt.segments)}}function oI(S,s,d,v,x,T){let C=v.paint.get("raster-fade-duration");if(!T&&C>0){let R=y.now(),q=(R-S.timeAdded)/C,V=s?(R-s.timeAdded)/C:-1,H=d.getSource(),Y=gt(x,{tileSize:H.tileSize,roundZoom:H.roundZoom}),W=!s||Math.abs(s.tileID.overscaledZ-Y)>Math.abs(S.tileID.overscaledZ-Y),Q=W&&S.refreshedUponExpiration?1:i.ah(W?q:1-V,0,1);return S.refreshedUponExpiration&&q>=1&&(S.refreshedUponExpiration=!1),s?{opacity:1,mix:1-Q}:{opacity:Q,mix:0}}return{opacity:1,mix:0}}let s4=new i.bf(1,0,0,1),l4=new i.bf(0,1,0,1),Ox=new i.bf(0,0,1,1),iI=new i.bf(1,0,1,1),CB=new i.bf(0,1,1,1);function aI(S,s,d,v){zp(S,0,s+d/2,S.transform.width,d,v)}function Xi(S,s,d,v){zp(S,s-d/2,0,d,S.transform.height,v)}function zp(S,s,d,v,x,T){let C=S.context,R=C.gl;R.enable(R.SCISSOR_TEST),R.scissor(s*S.pixelRatio,d*S.pixelRatio,v*S.pixelRatio,x*S.pixelRatio),C.clear({color:T}),R.disable(R.SCISSOR_TEST)}function lc(S,s,d){let v=S.context,x=v.gl,T=S.useProgram("debug"),C=wn.disabled,R=uo.disabled,q=S.colorModeForRenderPass(),V="$debug",H=S.style.map.terrain&&S.style.map.terrain.getTerrainData(d);v.activeTexture.set(x.TEXTURE0);let Y=s.getTileByID(d.key).latestRawTileData,W=Math.floor((Y&&Y.byteLength||0)/1024),Q=s.getTile(d).tileSize,ie=512/Math.min(Q,512)*(d.overscaledZ/S.transform.zoom)*.5,ve=d.canonical.toString();d.overscaledZ!==d.canonical.z&&(ve+=` => ${d.overscaledZ}`),function(ye,Ie){ye.initDebugOverlayCanvas();let Re=ye.debugOverlayCanvas,Pe=ye.context.gl,ze=ye.debugOverlayCanvas.getContext("2d");ze.clearRect(0,0,Re.width,Re.height),ze.shadowColor="white",ze.shadowBlur=2,ze.lineWidth=1.5,ze.strokeStyle="white",ze.textBaseline="top",ze.font="bold 36px Open Sans, sans-serif",ze.fillText(Ie,5,5),ze.strokeText(Ie,5,5),ye.debugOverlayTexture.update(Re),ye.debugOverlayTexture.bind(Pe.LINEAR,Pe.CLAMP_TO_EDGE)}(S,`${ve} ${W}kB`);let ge=S.transform.getProjectionData({overscaledTileID:d,applyGlobeMatrix:!0,applyTerrainMatrix:!0});T.draw(v,x.TRIANGLES,C,R,xi.alphaBlended,Xr.disabled,Gm(i.bf.transparent,ie),null,ge,V,S.debugBuffer,S.quadTriangleIndexBuffer,S.debugSegments),T.draw(v,x.LINE_STRIP,C,R,q,Xr.disabled,Gm(i.bf.red),H,ge,V,S.debugBuffer,S.tileBorderIndexBuffer,S.debugSegments)}function Px(S,s,d,v){let{isRenderingGlobe:x}=v,T=S.context,C=T.gl,R=S.transform,q=S.colorModeForRenderPass(),V=S.getDepthModeFor3D(),H=S.useProgram("terrain");T.bindFramebuffer.set(null),T.viewport.set([0,0,S.width,S.height]);for(let Y of d){let W=s.getTerrainMesh(Y.tileID),Q=S.renderToTexture.getTexture(Y),ie=s.getTerrainData(Y.tileID);T.activeTexture.set(C.TEXTURE0),C.bindTexture(C.TEXTURE_2D,Q.texture);let ve=s.getMeshFrameDelta(R.zoom),ge=R.calculateFogMatrix(Y.tileID.toUnwrapped()),ye=mx(ve,ge,S.style.sky,R.pitch,x),Ie=R.getProjectionData({overscaledTileID:Y.tileID,applyTerrainMatrix:!1,applyGlobeMatrix:!0});H.draw(T,C.TRIANGLES,V,uo.disabled,q,Xr.backCCW,ye,ie,Ie,"terrain",W.vertexBuffer,W.indexBuffer,W.segments)}}function N1(S,s){if(!s.mesh){let d=new i.aL;d.emplaceBack(-1,-1),d.emplaceBack(1,-1),d.emplaceBack(1,1),d.emplaceBack(-1,1);let v=new i.aN;v.emplaceBack(0,1,2),v.emplaceBack(0,2,3),s.mesh=new Pi(S.createVertexBuffer(d,bi.members),S.createIndexBuffer(v),i.aM.simpleSegment(0,0,d.length,v.length))}return s.mesh}class u4{constructor(s,d){this.context=new n4(s),this.transform=d,this._tileTextures={},this.terrainFacilitator={dirty:!0,matrix:i.ag(new Float64Array(16)),renderTime:0},this.setup(),this.numSublayers=Oe.maxUnderzooming+Oe.maxOverzooming+1,this.depthEpsilon=1/Math.pow(2,16),this.crossTileSymbolIndex=new $n}resize(s,d,v){if(this.width=Math.floor(s*v),this.height=Math.floor(d*v),this.pixelRatio=v,this.context.viewport.set([0,0,this.width,this.height]),this.style)for(let x of this.style._order)this.style._layers[x].resize()}setup(){let s=this.context,d=new i.aL;d.emplaceBack(0,0),d.emplaceBack(i.$,0),d.emplaceBack(0,i.$),d.emplaceBack(i.$,i.$),this.tileExtentBuffer=s.createVertexBuffer(d,bi.members),this.tileExtentSegments=i.aM.simpleSegment(0,0,4,2);let v=new i.aL;v.emplaceBack(0,0),v.emplaceBack(i.$,0),v.emplaceBack(0,i.$),v.emplaceBack(i.$,i.$),this.debugBuffer=s.createVertexBuffer(v,bi.members),this.debugSegments=i.aM.simpleSegment(0,0,4,5);let x=new i.c6;x.emplaceBack(0,0,0,0),x.emplaceBack(i.$,0,i.$,0),x.emplaceBack(0,i.$,0,i.$),x.emplaceBack(i.$,i.$,i.$,i.$),this.rasterBoundsBuffer=s.createVertexBuffer(x,fB.members),this.rasterBoundsSegments=i.aM.simpleSegment(0,0,4,2);let T=new i.aL;T.emplaceBack(0,0),T.emplaceBack(i.$,0),T.emplaceBack(0,i.$),T.emplaceBack(i.$,i.$),this.rasterBoundsBufferPosOnly=s.createVertexBuffer(T,bi.members),this.rasterBoundsSegmentsPosOnly=i.aM.simpleSegment(0,0,4,5);let C=new i.aL;C.emplaceBack(0,0),C.emplaceBack(1,0),C.emplaceBack(0,1),C.emplaceBack(1,1),this.viewportBuffer=s.createVertexBuffer(C,bi.members),this.viewportSegments=i.aM.simpleSegment(0,0,4,2);let R=new i.c7;R.emplaceBack(0),R.emplaceBack(1),R.emplaceBack(3),R.emplaceBack(2),R.emplaceBack(0),this.tileBorderIndexBuffer=s.createIndexBuffer(R);let q=new i.aN;q.emplaceBack(1,0,2),q.emplaceBack(1,2,3),this.quadTriangleIndexBuffer=s.createIndexBuffer(q);let V=this.context.gl;this.stencilClearMode=new uo({func:V.ALWAYS,mask:0},0,255,V.ZERO,V.ZERO,V.ZERO),this.tileExtentMesh=new Pi(this.tileExtentBuffer,this.quadTriangleIndexBuffer,this.tileExtentSegments)}clearStencil(){let s=this.context,d=s.gl;this.nextStencilID=1,this.currentStencilSource=void 0;let v=i.L();i.bY(v,0,this.width,this.height,0,0,1),i.N(v,v,[d.drawingBufferWidth,d.drawingBufferHeight,0]);let x={mainMatrix:v,tileMercatorCoords:[0,0,1,1],clippingPlane:[0,0,0,0],projectionTransition:0,fallbackMatrix:v};this.useProgram("clippingMask",null,!0).draw(s,d.TRIANGLES,wn.disabled,this.stencilClearMode,xi.disabled,Xr.disabled,null,null,x,"$clipping",this.viewportBuffer,this.quadTriangleIndexBuffer,this.viewportSegments)}_renderTileClippingMasks(s,d,v){if(this.currentStencilSource===s.source||!s.isTileClipped()||!d||!d.length)return;this.currentStencilSource=s.source,this.nextStencilID+d.length>256&&this.clearStencil();let x=this.context;x.setColorMode(xi.disabled),x.setDepthMode(wn.disabled);let T={};for(let C of d)T[C.key]=this.nextStencilID++;this._renderTileMasks(T,d,v,!0),this._renderTileMasks(T,d,v,!1),this._tileClippingMaskIDs=T}_renderTileMasks(s,d,v,x){let T=this.context,C=T.gl,R=this.style.projection,q=this.transform,V=this.useProgram("clippingMask");for(let H of d){let Y=s[H.key],W=this.style.map.terrain&&this.style.map.terrain.getTerrainData(H),Q=R.getMeshFromTileID(this.context,H.canonical,x,!0,"stencil"),ie=q.getProjectionData({overscaledTileID:H,applyGlobeMatrix:!v,applyTerrainMatrix:!0});V.draw(T,C.TRIANGLES,wn.disabled,new uo({func:C.ALWAYS,mask:0},Y,255,C.KEEP,C.KEEP,C.REPLACE),xi.disabled,v?Xr.disabled:Xr.backCCW,null,W,ie,"$clipping",Q.vertexBuffer,Q.indexBuffer,Q.segments)}}_renderTilesDepthBuffer(){let s=this.context,d=s.gl,v=this.style.projection,x=this.transform,T=this.useProgram("depth"),C=this.getDepthModeFor3D(),R=Ae(x,{tileSize:x.tileSize});for(let q of R){let V=this.style.map.terrain&&this.style.map.terrain.getTerrainData(q),H=v.getMeshFromTileID(this.context,q.canonical,!0,!0,"raster"),Y=x.getProjectionData({overscaledTileID:q,applyGlobeMatrix:!0,applyTerrainMatrix:!0});T.draw(s,d.TRIANGLES,C,uo.disabled,xi.disabled,Xr.backCCW,null,V,Y,"$clipping",H.vertexBuffer,H.indexBuffer,H.segments)}}stencilModeFor3D(){this.currentStencilSource=void 0,this.nextStencilID+1>256&&this.clearStencil();let s=this.nextStencilID++,d=this.context.gl;return new uo({func:d.NOTEQUAL,mask:255},s,255,d.KEEP,d.KEEP,d.REPLACE)}stencilModeForClipping(s){let d=this.context.gl;return new uo({func:d.EQUAL,mask:255},this._tileClippingMaskIDs[s.key],0,d.KEEP,d.KEEP,d.REPLACE)}getStencilConfigForOverlapAndUpdateStencilID(s){let d=this.context.gl,v=s.sort((C,R)=>R.overscaledZ-C.overscaledZ),x=v[v.length-1].overscaledZ,T=v[0].overscaledZ-x+1;if(T>1){this.currentStencilSource=void 0,this.nextStencilID+T>256&&this.clearStencil();let C={};for(let R=0;R<T;R++)C[R+x]=new uo({func:d.GEQUAL,mask:255},R+this.nextStencilID,255,d.KEEP,d.KEEP,d.REPLACE);return this.nextStencilID+=T,[C,v]}return[{[x]:uo.disabled},v]}stencilConfigForOverlapTwoPass(s){let d=this.context.gl,v=s.sort((C,R)=>R.overscaledZ-C.overscaledZ),x=v[v.length-1].overscaledZ,T=v[0].overscaledZ-x+1;if(this.clearStencil(),T>1){let C={},R={};for(let q=0;q<T;q++)C[q+x]=new uo({func:d.GREATER,mask:255},T+1+q,255,d.KEEP,d.KEEP,d.REPLACE),R[q+x]=new uo({func:d.GREATER,mask:255},1+q,255,d.KEEP,d.KEEP,d.REPLACE);return this.nextStencilID=2*T+1,[C,R,v]}return this.nextStencilID=3,[{[x]:new uo({func:d.GREATER,mask:255},2,255,d.KEEP,d.KEEP,d.REPLACE)},{[x]:new uo({func:d.GREATER,mask:255},1,255,d.KEEP,d.KEEP,d.REPLACE)},v]}colorModeForRenderPass(){let s=this.context.gl;return this._showOverdrawInspector?new xi([s.CONSTANT_COLOR,s.ONE],new i.bf(.125,.125,.125,0),[!0,!0,!0,!0]):this.renderPass==="opaque"?xi.unblended:xi.alphaBlended}getDepthModeForSublayer(s,d,v){if(!this.opaquePassEnabledForLayer())return wn.disabled;let x=1-((1+this.currentLayer)*this.numSublayers+s)*this.depthEpsilon;return new wn(v||this.context.gl.LEQUAL,d,[x,x])}getDepthModeFor3D(){return new wn(this.context.gl.LEQUAL,wn.ReadWrite,this.depthRangeFor3D)}opaquePassEnabledForLayer(){return this.currentLayer<this.opaquePassCutoff}render(s,d){var v,x;this.style=s,this.options=d,this.lineAtlas=s.lineAtlas,this.imageManager=s.imageManager,this.glyphManager=s.glyphManager,this.symbolFadeChange=s.placement.symbolFadeChange(y.now()),this.imageManager.beginFrame();let T=this.style._order,C=this.style.sourceCaches,R={},q={},V={},H={isRenderingToTexture:!1,isRenderingGlobe:((v=s.projection)===null||v===void 0?void 0:v.transitionState)>0};for(let W in C){let Q=C[W];Q.used&&Q.prepare(this.context),R[W]=Q.getVisibleCoordinates(!1),q[W]=R[W].slice().reverse(),V[W]=Q.getVisibleCoordinates(!0).reverse()}this.opaquePassCutoff=1/0;for(let W=0;W<T.length;W++)if(this.style._layers[T[W]].is3D()){this.opaquePassCutoff=W;break}this.maybeDrawDepthAndCoords(!1),this.renderToTexture&&(this.renderToTexture.prepareForRender(this.style,this.transform.zoom),this.opaquePassCutoff=0),this.renderPass="offscreen";for(let W of T){let Q=this.style._layers[W];if(!Q.hasOffscreenPass()||Q.isHidden(this.transform.zoom))continue;let ie=q[Q.source];(Q.type==="custom"||ie.length)&&this.renderLayer(this,C[Q.source],Q,ie,H)}if((x=this.style.projection)===null||x===void 0||x.updateGPUdependent({context:this.context,useProgram:W=>this.useProgram(W)}),this.context.viewport.set([0,0,this.width,this.height]),this.context.bindFramebuffer.set(null),this.context.clear({color:d.showOverdrawInspector?i.bf.black:i.bf.transparent,depth:1}),this.clearStencil(),this.style.sky&&function(W,Q){let ie=W.context,ve=ie.gl,ge=((He,Ne,Qe)=>{let ht=Math.cos(Ne.rollInRadians),it=Math.sin(Ne.rollInRadians),at=Fe(Ne),dt=Ne.getProjectionData({overscaledTileID:null,applyGlobeMatrix:!0,applyTerrainMatrix:!0}).projectionTransition;return{u_sky_color:He.properties.get("sky-color"),u_horizon_color:He.properties.get("horizon-color"),u_horizon:[(Ne.width/2-at*it)*Qe,(Ne.height/2+at*ht)*Qe],u_horizon_normal:[-it,ht],u_sky_horizon_blend:He.properties.get("sky-horizon-blend")*Ne.height/2*Qe,u_sky_blend:dt}})(Q,W.style.map.transform,W.pixelRatio),ye=new wn(ve.LEQUAL,wn.ReadWrite,[0,1]),Ie=uo.disabled,Re=W.colorModeForRenderPass(),Pe=W.useProgram("sky"),ze=N1(ie,Q);Pe.draw(ie,ve.TRIANGLES,ye,Ie,Re,Xr.disabled,ge,null,void 0,"sky",ze.vertexBuffer,ze.indexBuffer,ze.segments)}(this,this.style.sky),this._showOverdrawInspector=d.showOverdrawInspector,this.depthRangeFor3D=[0,1-(s._order.length+2)*this.numSublayers*this.depthEpsilon],!this.renderToTexture)for(this.renderPass="opaque",this.currentLayer=T.length-1;this.currentLayer>=0;this.currentLayer--){let W=this.style._layers[T[this.currentLayer]],Q=C[W.source],ie=R[W.source];this._renderTileClippingMasks(W,ie,!1),this.renderLayer(this,Q,W,ie,H)}this.renderPass="translucent";let Y=!1;for(this.currentLayer=0;this.currentLayer<T.length;this.currentLayer++){let W=this.style._layers[T[this.currentLayer]],Q=C[W.source];if(this.renderToTexture&&this.renderToTexture.renderLayer(W,H))continue;this.opaquePassEnabledForLayer()||Y||(Y=!0,H.isRenderingGlobe&&!this.style.map.terrain&&this._renderTilesDepthBuffer());let ie=(W.type==="symbol"?V:q)[W.source];this._renderTileClippingMasks(W,R[W.source],!!this.renderToTexture),this.renderLayer(this,Q,W,ie,H)}if(H.isRenderingGlobe&&function(W,Q,ie){let ve=W.context,ge=ve.gl,ye=W.useProgram("atmosphere"),Ie=new wn(ge.LEQUAL,wn.ReadOnly,[0,1]),Re=W.transform,Pe=function(dt,Vt){let Wt=dt.properties.get("position"),Nt=[-Wt.x,-Wt.y,-Wt.z],xr=i.ag(new Float64Array(16));return dt.properties.get("anchor")==="map"&&(i.b6(xr,xr,Vt.rollInRadians),i.b7(xr,xr,-Vt.pitchInRadians),i.b6(xr,xr,Vt.bearingInRadians),i.b7(xr,xr,Vt.center.lat*Math.PI/180),i.bz(xr,xr,-Vt.center.lng*Math.PI/180)),i.c5(Nt,Nt,xr),Nt}(ie,W.transform),ze=Re.getProjectionData({overscaledTileID:null,applyGlobeMatrix:!0,applyTerrainMatrix:!0}),He=Q.properties.get("atmosphere-blend")*ze.projectionTransition;if(He===0)return;let Ne=Sv(Re.worldSize,Re.center.lat),Qe=Re.inverseProjectionMatrix,ht=new Float64Array(4);ht[3]=1,i.aw(ht,ht,Re.modelViewProjectionMatrix),ht[0]/=ht[3],ht[1]/=ht[3],ht[2]/=ht[3],ht[3]=1,i.aw(ht,ht,Qe),ht[0]/=ht[3],ht[1]/=ht[3],ht[2]/=ht[3],ht[3]=1;let it=((dt,Vt,Wt,Nt,xr)=>({u_sun_pos:dt,u_atmosphere_blend:Vt,u_globe_position:Wt,u_globe_radius:Nt,u_inv_proj_matrix:xr}))(Pe,He,[ht[0],ht[1],ht[2]],Ne,Qe),at=N1(ve,Q);ye.draw(ve,ge.TRIANGLES,Ie,uo.disabled,xi.alphaBlended,Xr.disabled,it,null,null,"atmosphere",at.vertexBuffer,at.indexBuffer,at.segments)}(this,this.style.sky,this.style.light),this.options.showTileBoundaries){let W=function(Q,ie){let ve=null,ge=Object.values(Q._layers).flatMap(Pe=>Pe.source&&!Pe.isHidden(ie)?[Q.sourceCaches[Pe.source]]:[]),ye=ge.filter(Pe=>Pe.getSource().type==="vector"),Ie=ge.filter(Pe=>Pe.getSource().type!=="vector"),Re=Pe=>{(!ve||ve.getSource().maxzoom<Pe.getSource().maxzoom)&&(ve=Pe)};return ye.forEach(Pe=>Re(Pe)),ve||Ie.forEach(Pe=>Re(Pe)),ve}(this.style,this.transform.zoom);W&&function(Q,ie,ve){for(let ge=0;ge<ve.length;ge++)lc(Q,ie,ve[ge])}(this,W,W.getVisibleCoordinates())}this.options.showPadding&&function(W){let Q=W.transform.padding;aI(W,W.transform.height-(Q.top||0),3,s4),aI(W,Q.bottom||0,3,l4),Xi(W,Q.left||0,3,Ox),Xi(W,W.transform.width-(Q.right||0),3,iI);let ie=W.transform.centerPoint;(function(ve,ge,ye,Ie){zp(ve,ge-1,ye-10,2,20,Ie),zp(ve,ge-10,ye-1,20,2,Ie)})(W,ie.x,W.transform.height-ie.y,CB)}(this),this.context.setDefault()}maybeDrawDepthAndCoords(s){if(!this.style||!this.style.map||!this.style.map.terrain)return;let d=this.terrainFacilitator.matrix,v=this.transform.modelViewProjectionMatrix,x=this.terrainFacilitator.dirty;x||(x=s?!i.c8(d,v):!i.c9(d,v)),x||(x=this.style.map.terrain.sourceCache.anyTilesAfterTime(this.terrainFacilitator.renderTime)),x&&(i.ca(d,v),this.terrainFacilitator.renderTime=Date.now(),this.terrainFacilitator.dirty=!1,function(T,C){let R=T.context,q=R.gl,V=T.transform,H=xi.unblended,Y=new wn(q.LEQUAL,wn.ReadWrite,[0,1]),W=C.sourceCache.getRenderableTiles(),Q=T.useProgram("terrainDepth");R.bindFramebuffer.set(C.getFramebuffer("depth").framebuffer),R.viewport.set([0,0,T.width/devicePixelRatio,T.height/devicePixelRatio]),R.clear({color:i.bf.transparent,depth:1});for(let ie of W){let ve=C.getTerrainMesh(ie.tileID),ge=C.getTerrainData(ie.tileID),ye=V.getProjectionData({overscaledTileID:ie.tileID,applyTerrainMatrix:!1,applyGlobeMatrix:!0}),Ie={u_ele_delta:C.getMeshFrameDelta(V.zoom)};Q.draw(R,q.TRIANGLES,Y,uo.disabled,H,Xr.backCCW,Ie,ge,ye,"terrain",ve.vertexBuffer,ve.indexBuffer,ve.segments)}R.bindFramebuffer.set(null),R.viewport.set([0,0,T.width,T.height])}(this,this.style.map.terrain),function(T,C){let R=T.context,q=R.gl,V=T.transform,H=xi.unblended,Y=new wn(q.LEQUAL,wn.ReadWrite,[0,1]),W=C.getCoordsTexture(),Q=C.sourceCache.getRenderableTiles(),ie=T.useProgram("terrainCoords");R.bindFramebuffer.set(C.getFramebuffer("coords").framebuffer),R.viewport.set([0,0,T.width/devicePixelRatio,T.height/devicePixelRatio]),R.clear({color:i.bf.transparent,depth:1}),C.coordsIndex=[];for(let ve of Q){let ge=C.getTerrainMesh(ve.tileID),ye=C.getTerrainData(ve.tileID);R.activeTexture.set(q.TEXTURE0),q.bindTexture(q.TEXTURE_2D,W.texture);let Ie={u_terrain_coords_id:(255-C.coordsIndex.length)/255,u_texture:0,u_ele_delta:C.getMeshFrameDelta(V.zoom)},Re=V.getProjectionData({overscaledTileID:ve.tileID,applyTerrainMatrix:!1,applyGlobeMatrix:!0});ie.draw(R,q.TRIANGLES,Y,uo.disabled,H,Xr.backCCW,Ie,ye,Re,"terrain",ge.vertexBuffer,ge.indexBuffer,ge.segments),C.coordsIndex.push(ve.tileID.key)}R.bindFramebuffer.set(null),R.viewport.set([0,0,T.width,T.height])}(this,this.style.map.terrain))}renderLayer(s,d,v,x,T){v.isHidden(this.transform.zoom)||(v.type==="background"||v.type==="custom"||(x||[]).length)&&(this.id=v.id,i.cb(v)?function(C,R,q,V,H,Y){if(C.renderPass!=="translucent")return;let{isRenderingToTexture:W}=Y,Q=uo.disabled,ie=C.colorModeForRenderPass();(q._unevaluatedLayout.hasValue("text-variable-anchor")||q._unevaluatedLayout.hasValue("text-variable-anchor-offset"))&&function(ve,ge,ye,Ie,Re,Pe,ze,He,Ne){let Qe=ge.transform,ht=ge.style.map.terrain,it=Re==="map",at=Pe==="map";for(let dt of ve){let Vt=Ie.getTile(dt),Wt=Vt.getBucket(ye);if(!Wt||!Wt.text||!Wt.text.segments.get().length)continue;let Nt=i.an(Wt.textSizeData,Qe.zoom),xr=i.aC(Vt,1,ge.transform.zoom),Dn=an(it,ge.transform,xr),Eo=ye.layout.get("icon-text-fit")!=="none"&&Wt.hasIconData();if(Nt){let Qo=Math.pow(2,Qe.zoom-Vt.tileID.overscaledZ),Go=ht?(Fi,Ji)=>ht.getElevation(dt,Fi,Ji):null;eI(Wt,it,at,Ne,Qe,Dn,Qo,Nt,Eo,i.aD(Qe,Vt,ze,He),dt.toUnwrapped(),Go)}}}(V,C,q,R,q.layout.get("text-rotation-alignment"),q.layout.get("text-pitch-alignment"),q.paint.get("text-translate"),q.paint.get("text-translate-anchor"),H),q.paint.get("icon-opacity").constantOr(1)!==0&&C1(C,R,q,V,!1,q.paint.get("icon-translate"),q.paint.get("icon-translate-anchor"),q.layout.get("icon-rotation-alignment"),q.layout.get("icon-pitch-alignment"),q.layout.get("icon-keep-upright"),Q,ie,W),q.paint.get("text-opacity").constantOr(1)!==0&&C1(C,R,q,V,!0,q.paint.get("text-translate"),q.paint.get("text-translate-anchor"),q.layout.get("text-rotation-alignment"),q.layout.get("text-pitch-alignment"),q.layout.get("text-keep-upright"),Q,ie,W),R.map.showCollisionBoxes&&(o4(C,R,q,V,!0),o4(C,R,q,V,!1))}(s,d,v,x,this.style.placement.variableOffsets,T):i.cc(v)?function(C,R,q,V,H){if(C.renderPass!=="translucent")return;let{isRenderingToTexture:Y}=H,W=q.paint.get("circle-opacity"),Q=q.paint.get("circle-stroke-width"),ie=q.paint.get("circle-stroke-opacity"),ve=!q.layout.get("circle-sort-key").isConstant();if(W.constantOr(1)===0&&(Q.constantOr(1)===0||ie.constantOr(1)===0))return;let ge=C.context,ye=ge.gl,Ie=C.transform,Re=C.getDepthModeForSublayer(0,wn.ReadOnly),Pe=uo.disabled,ze=C.colorModeForRenderPass(),He=[],Ne=Ie.getCircleRadiusCorrection();for(let Qe=0;Qe<V.length;Qe++){let ht=V[Qe],it=R.getTile(ht),at=it.getBucket(q);if(!at)continue;let dt=q.paint.get("circle-translate"),Vt=q.paint.get("circle-translate-anchor"),Wt=i.aD(Ie,it,dt,Vt),Nt=at.programConfigurations.get(q.id),xr=C.useProgram("circle",Nt),Dn=at.layoutVertexBuffer,Eo=at.indexBuffer,Qo=C.style.map.terrain&&C.style.map.terrain.getTerrainData(ht),Go={programConfiguration:Nt,program:xr,layoutVertexBuffer:Dn,indexBuffer:Eo,uniformValues:mB(C,it,q,Wt,Ne),terrainData:Qo,projectionData:Ie.getProjectionData({overscaledTileID:ht,applyGlobeMatrix:!Y,applyTerrainMatrix:!0})};if(ve){let Fi=at.segments.get();for(let Ji of Fi)He.push({segments:new i.aM([Ji]),sortKey:Ji.sortKey,state:Go})}else He.push({segments:at.segments,sortKey:0,state:Go})}ve&&He.sort((Qe,ht)=>Qe.sortKey-ht.sortKey);for(let Qe of He){let{programConfiguration:ht,program:it,layoutVertexBuffer:at,indexBuffer:dt,uniformValues:Vt,terrainData:Wt,projectionData:Nt}=Qe.state;it.draw(ge,ye.TRIANGLES,Re,Pe,ze,Xr.backCCW,Vt,Wt,Nt,q.id,at,dt,Qe.segments,q.paint,C.transform.zoom,ht)}}(s,d,v,x,T):i.cd(v)?function(C,R,q,V,H){if(q.paint.get("heatmap-opacity")===0)return;let Y=C.context,{isRenderingToTexture:W,isRenderingGlobe:Q}=H;if(C.style.map.terrain){for(let ie of V){let ve=R.getTile(ie);R.hasRenderableParent(ie)||(C.renderPass==="offscreen"?tI(C,ve,q,ie,Q):C.renderPass==="translucent"&&a4(C,q,ie,W,Q))}Y.viewport.set([0,0,C.width,C.height])}else C.renderPass==="offscreen"?function(ie,ve,ge,ye){let Ie=ie.context,Re=Ie.gl,Pe=ie.transform,ze=uo.disabled,He=new xi([Re.ONE,Re.ONE],i.bf.transparent,[!0,!0,!0,!0]);(function(Ne,Qe,ht){let it=Ne.gl;Ne.activeTexture.set(it.TEXTURE1),Ne.viewport.set([0,0,Qe.width/4,Qe.height/4]);let at=ht.heatmapFbos.get(i.c2);at?(it.bindTexture(it.TEXTURE_2D,at.colorAttachment.get()),Ne.bindFramebuffer.set(at.framebuffer)):(at=O1(Ne,Qe.width/4,Qe.height/4),ht.heatmapFbos.set(i.c2,at))})(Ie,ie,ge),Ie.clear({color:i.bf.transparent});for(let Ne=0;Ne<ye.length;Ne++){let Qe=ye[Ne];if(ve.hasRenderableParent(Qe))continue;let ht=ve.getTile(Qe),it=ht.getBucket(ge);if(!it)continue;let at=it.programConfigurations.get(ge.id),dt=ie.useProgram("heatmap",at),Vt=Pe.getProjectionData({overscaledTileID:Qe,applyGlobeMatrix:!0,applyTerrainMatrix:!1}),Wt=Pe.getCircleRadiusCorrection();dt.draw(Ie,Re.TRIANGLES,wn.disabled,ze,He,Xr.backCCW,UN(ht,Pe.zoom,ge.paint.get("heatmap-intensity"),Wt),null,Vt,ge.id,it.layoutVertexBuffer,it.indexBuffer,it.segments,ge.paint,Pe.zoom,at)}Ie.viewport.set([0,0,ie.width,ie.height])}(C,R,q,V):C.renderPass==="translucent"&&function(ie,ve){let ge=ie.context,ye=ge.gl;ge.setColorMode(ie.colorModeForRenderPass());let Ie=ve.heatmapFbos.get(i.c2);Ie&&(ge.activeTexture.set(ye.TEXTURE0),ye.bindTexture(ye.TEXTURE_2D,Ie.colorAttachment.get()),ge.activeTexture.set(ye.TEXTURE1),P1(ge,ve).bind(ye.LINEAR,ye.CLAMP_TO_EDGE),ie.useProgram("heatmapTexture").draw(ge,ye.TRIANGLES,wn.disabled,uo.disabled,ie.colorModeForRenderPass(),Xr.disabled,U2(ie,ve,0,1),null,null,ve.id,ie.viewportBuffer,ie.quadTriangleIndexBuffer,ie.viewportSegments,ve.paint,ie.transform.zoom))}(C,q)}(s,d,v,x,T):i.ce(v)?function(C,R,q,V,H){if(C.renderPass!=="translucent")return;let{isRenderingToTexture:Y}=H,W=q.paint.get("line-opacity"),Q=q.paint.get("line-width");if(W.constantOr(1)===0||Q.constantOr(1)===0)return;let ie=C.getDepthModeForSublayer(0,wn.ReadOnly),ve=C.colorModeForRenderPass(),ge=q.paint.get("line-dasharray"),ye=q.paint.get("line-pattern"),Ie=ye.constantOr(1),Re=q.paint.get("line-gradient"),Pe=q.getCrossfadeParameters(),ze=Ie?"linePattern":ge?"lineSDF":Re?"lineGradient":"line",He=C.context,Ne=He.gl,Qe=C.transform,ht=!0;for(let it of V){let at=R.getTile(it);if(Ie&&!at.patternsLoaded())continue;let dt=at.getBucket(q);if(!dt)continue;let Vt=dt.programConfigurations.get(q.id),Wt=C.context.program.get(),Nt=C.useProgram(ze,Vt),xr=ht||Nt.program!==Wt,Dn=C.style.map.terrain&&C.style.map.terrain.getTerrainData(it),Eo=ye.constantOr(null);if(Eo&&at.imageAtlas){let Cn=at.imageAtlas,ei=Cn.patternPositions[Eo.to.toString()],Ma=Cn.patternPositions[Eo.from.toString()];ei&&Ma&&Vt.setConstantPatternPositions(ei,Ma)}let Qo=Qe.getProjectionData({overscaledTileID:it,applyGlobeMatrix:!Y,applyTerrainMatrix:!0}),Go=Qe.getPixelScale(),Fi=Ie?HN(C,at,q,Go,Pe):ge?Hm(C,at,q,Go,ge,Pe):Re?GN(C,at,q,Go,dt.lineClipsArray.length):_x(C,at,q,Go);if(Ie)He.activeTexture.set(Ne.TEXTURE0),at.imageAtlasTexture.bind(Ne.LINEAR,Ne.CLAMP_TO_EDGE),Vt.updatePaintBuffers(Pe);else if(ge&&(xr||C.lineAtlas.dirty))He.activeTexture.set(Ne.TEXTURE0),C.lineAtlas.bind(He);else if(Re){let Cn=dt.gradients[q.id],ei=Cn.texture;if(q.gradientVersion!==Cn.version){let Ma=256;if(q.stepInterpolant){let Ua=R.getSource().maxzoom,ls=it.canonical.z===Ua?Math.ceil(1<<C.transform.maxZoom-it.canonical.z):1;Ma=i.ah(i.c3(dt.maxLineLength/i.$*1024*ls),256,He.maxTextureSize)}Cn.gradient=i.c4({expression:q.gradientExpression(),evaluationKey:"lineProgress",resolution:Ma,image:Cn.gradient||void 0,clips:dt.lineClipsArray}),Cn.texture?Cn.texture.update(Cn.gradient):Cn.texture=new i.T(He,Cn.gradient,Ne.RGBA),Cn.version=q.gradientVersion,ei=Cn.texture}He.activeTexture.set(Ne.TEXTURE0),ei.bind(q.stepInterpolant?Ne.NEAREST:Ne.LINEAR,Ne.CLAMP_TO_EDGE)}let Ji=C.stencilModeForClipping(it);Nt.draw(He,Ne.TRIANGLES,ie,Ji,ve,Xr.disabled,Fi,Dn,Qo,q.id,dt.layoutVertexBuffer,dt.indexBuffer,dt.segments,q.paint,C.transform.zoom,Vt,dt.layoutVertexBuffer2),ht=!1}}(s,d,v,x,T):i.cf(v)?function(C,R,q,V,H){let Y=q.paint.get("fill-color"),W=q.paint.get("fill-opacity");if(W.constantOr(1)===0)return;let{isRenderingToTexture:Q}=H,ie=C.colorModeForRenderPass(),ve=q.paint.get("fill-pattern"),ge=C.opaquePassEnabledForLayer()&&!ve.constantOr(1)&&Y.constantOr(i.bf.transparent).a===1&&W.constantOr(0)===1?"opaque":"translucent";if(C.renderPass===ge){let ye=C.getDepthModeForSublayer(1,C.renderPass==="opaque"?wn.ReadWrite:wn.ReadOnly);Cx(C,R,q,V,ye,ie,!1,Q)}if(C.renderPass==="translucent"&&q.paint.get("fill-antialias")){let ye=C.getDepthModeForSublayer(q.getPaintProperty("fill-outline-color")?2:0,wn.ReadOnly);Cx(C,R,q,V,ye,ie,!0,Q)}}(s,d,v,x,T):i.cg(v)?function(C,R,q,V,H){let Y=q.paint.get("fill-extrusion-opacity");if(Y===0)return;let{isRenderingToTexture:W}=H;if(C.renderPass==="translucent"){let Q=new wn(C.context.gl.LEQUAL,wn.ReadWrite,C.depthRangeFor3D);if(Y!==1||q.paint.get("fill-extrusion-pattern").constantOr(1))rI(C,R,q,V,Q,uo.disabled,xi.disabled,W),rI(C,R,q,V,Q,C.stencilModeFor3D(),C.colorModeForRenderPass(),W);else{let ie=C.colorModeForRenderPass();rI(C,R,q,V,Q,uo.disabled,ie,W)}}}(s,d,v,x,T):i.ch(v)?function(C,R,q,V,H){if(C.renderPass!=="offscreen"&&C.renderPass!=="translucent")return;let{isRenderingToTexture:Y}=H,W=C.context,Q=C.style.projection.useSubdivision,ie=C.getDepthModeForSublayer(0,wn.ReadOnly),ve=C.colorModeForRenderPass();if(C.renderPass==="offscreen")(function(ge,ye,Ie,Re,Pe,ze,He){let Ne=ge.context,Qe=Ne.gl;for(let ht of Ie){let it=ye.getTile(ht),at=it.dem;if(!at||!at.data||!it.needsHillshadePrepare)continue;let dt=at.dim,Vt=at.stride,Wt=at.getPixels();if(Ne.activeTexture.set(Qe.TEXTURE1),Ne.pixelStoreUnpackPremultiplyAlpha.set(!1),it.demTexture=it.demTexture||ge.getTileTexture(Vt),it.demTexture){let xr=it.demTexture;xr.update(Wt,{premultiply:!1}),xr.bind(Qe.NEAREST,Qe.CLAMP_TO_EDGE)}else it.demTexture=new i.T(Ne,Wt,Qe.RGBA,{premultiply:!1}),it.demTexture.bind(Qe.NEAREST,Qe.CLAMP_TO_EDGE);Ne.activeTexture.set(Qe.TEXTURE0);let Nt=it.fbo;if(!Nt){let xr=new i.T(Ne,{width:dt,height:dt,data:null},Qe.RGBA);xr.bind(Qe.LINEAR,Qe.CLAMP_TO_EDGE),Nt=it.fbo=Ne.createFramebuffer(dt,dt,!0,!1),Nt.colorAttachment.set(xr.texture)}Ne.bindFramebuffer.set(Nt.framebuffer),Ne.viewport.set([0,0,dt,dt]),ge.useProgram("hillshadePrepare").draw(Ne,Qe.TRIANGLES,Pe,ze,He,Xr.disabled,BN(it.tileID,at),null,null,Re.id,ge.rasterBoundsBuffer,ge.quadTriangleIndexBuffer,ge.rasterBoundsSegments),it.needsHillshadePrepare=!1}})(C,R,V,q,ie,uo.disabled,ve),W.viewport.set([0,0,C.width,C.height]);else if(C.renderPass==="translucent")if(Q){let[ge,ye,Ie]=C.stencilConfigForOverlapTwoPass(V);Zm(C,R,q,Ie,ge,ie,ve,!1,Y),Zm(C,R,q,Ie,ye,ie,ve,!0,Y)}else{let[ge,ye]=C.getStencilConfigForOverlapAndUpdateStencilID(V);Zm(C,R,q,ye,ge,ie,ve,!1,Y)}}(s,d,v,x,T):i.ci(v)?function(C,R,q,V,H){if(C.renderPass!=="translucent"||!V.length)return;let{isRenderingToTexture:Y}=H,W=C.style.projection.useSubdivision,Q=C.getDepthModeForSublayer(0,wn.ReadOnly),ie=C.colorModeForRenderPass();if(W){let[ve,ge,ye]=C.stencilConfigForOverlapTwoPass(V);nI(C,R,q,ye,ve,Q,ie,!1,Y),nI(C,R,q,ye,ge,Q,ie,!0,Y)}else{let[ve,ge]=C.getStencilConfigForOverlapAndUpdateStencilID(V);nI(C,R,q,ge,ve,Q,ie,!1,Y)}}(s,d,v,x,T):i.cj(v)?function(C,R,q,V,H){if(C.renderPass!=="translucent"||q.paint.get("raster-opacity")===0||!V.length)return;let{isRenderingToTexture:Y}=H,W=R.getSource(),Q=C.style.projection.useSubdivision;if(W instanceof ar)Km(C,R,q,V,null,!1,!1,W.tileCoords,W.flippedWindingOrder,Y);else if(Q){let[ie,ve,ge]=C.stencilConfigForOverlapTwoPass(V);Km(C,R,q,ge,ie,!1,!0,Ax,!1,Y),Km(C,R,q,ge,ve,!0,!0,Ax,!1,Y)}else{let[ie,ve]=C.getStencilConfigForOverlapAndUpdateStencilID(V);Km(C,R,q,ve,ie,!1,!0,Ax,!1,Y)}}(s,d,v,x,T):i.ck(v)?function(C,R,q,V,H){let Y=q.paint.get("background-color"),W=q.paint.get("background-opacity");if(W===0)return;let{isRenderingToTexture:Q}=H,ie=C.context,ve=ie.gl,ge=C.style.projection,ye=C.transform,Ie=ye.tileSize,Re=q.paint.get("background-pattern");if(C.isPatternMissing(Re))return;let Pe=!Re&&Y.a===1&&W===1&&C.opaquePassEnabledForLayer()?"opaque":"translucent";if(C.renderPass!==Pe)return;let ze=uo.disabled,He=C.getDepthModeForSublayer(0,Pe==="opaque"?wn.ReadWrite:wn.ReadOnly),Ne=C.colorModeForRenderPass(),Qe=C.useProgram(Re?"backgroundPattern":"background"),ht=V||Ae(ye,{tileSize:Ie,terrain:C.style.map.terrain});Re&&(ie.activeTexture.set(ve.TEXTURE0),C.imageManager.bind(C.context));let it=q.getCrossfadeParameters();for(let at of ht){let dt=ye.getProjectionData({overscaledTileID:at,applyGlobeMatrix:!Q,applyTerrainMatrix:!0}),Vt=Re?YN(W,C,Re,{tileID:at,tileSize:Ie},it):WN(W,Y),Wt=C.style.map.terrain&&C.style.map.terrain.getTerrainData(at),Nt=ge.getMeshFromTileID(ie,at.canonical,!1,!0,"raster");Qe.draw(ie,ve.TRIANGLES,He,ze,Ne,Xr.backCCW,Vt,Wt,dt,q.id,Nt.vertexBuffer,Nt.indexBuffer,Nt.segments)}}(s,0,v,x,T):i.cl(v)&&function(C,R,q,V){let{isRenderingGlobe:H}=V,Y=C.context,W=q.implementation,Q=C.style.projection,ie=C.transform,ve=ie.getProjectionDataForCustomLayer(H),ge={farZ:ie.farZ,nearZ:ie.nearZ,fov:ie.fov*Math.PI/180,modelViewProjectionMatrix:ie.modelViewProjectionMatrix,projectionMatrix:ie.projectionMatrix,shaderData:{variantName:Q.shaderVariantName,vertexShaderPrelude:`const float PI = 3.141592653589793;
uniform mat4 u_projection_matrix;
${Q.shaderPreludeCode.vertexSource}`,define:Q.shaderDefine},defaultProjectionData:ve},ye=W.renderingMode?W.renderingMode:"2d";if(C.renderPass==="offscreen"){let Ie=W.prerender;Ie&&(C.setCustomLayerDefaults(),Y.setColorMode(C.colorModeForRenderPass()),Ie.call(W,Y.gl,ge),Y.setDirty(),C.setBaseState())}else if(C.renderPass==="translucent"){C.setCustomLayerDefaults(),Y.setColorMode(C.colorModeForRenderPass()),Y.setStencilMode(uo.disabled);let Ie=ye==="3d"?C.getDepthModeFor3D():C.getDepthModeForSublayer(0,wn.ReadOnly);Y.setDepthMode(Ie),W.render(Y.gl,ge),Y.setDirty(),C.setBaseState(),Y.bindFramebuffer.set(null)}}(s,0,v,T))}saveTileTexture(s){let d=this._tileTextures[s.size[0]];d?d.push(s):this._tileTextures[s.size[0]]=[s]}getTileTexture(s){let d=this._tileTextures[s];return d&&d.length>0?d.pop():null}isPatternMissing(s){if(!s)return!1;if(!s.from||!s.to)return!0;let d=this.imageManager.getPattern(s.from.toString()),v=this.imageManager.getPattern(s.to.toString());return!d||!v}useProgram(s,d,v=!1,x=[]){this.cache=this.cache||{};let T=!!this.style.map.terrain,C=this.style.projection,R=v?Vo.projectionMercator:C.shaderPreludeCode,q=v?Us:C.shaderDefine,V=s+(d?d.cacheKey:"")+`/${v?os:C.shaderVariantName}`+(this._showOverdrawInspector?"/overdraw":"")+(T?"/terrain":"")+(x?`/${x.join("/")}`:"");return this.cache[V]||(this.cache[V]=new F2(this.context,Vo[s],d,$2[s],this._showOverdrawInspector,T,R,q,x)),this.cache[V]}setCustomLayerDefaults(){this.context.unbindVAO(),this.context.cullFace.setDefault(),this.context.activeTexture.setDefault(),this.context.pixelStoreUnpack.setDefault(),this.context.pixelStoreUnpackPremultiplyAlpha.setDefault(),this.context.pixelStoreUnpackFlipY.setDefault()}setBaseState(){let s=this.context.gl;this.context.cullFace.set(!1),this.context.viewport.set([0,0,this.width,this.height]),this.context.blendEquation.set(s.FUNC_ADD)}initDebugOverlayCanvas(){this.debugOverlayCanvas==null&&(this.debugOverlayCanvas=document.createElement("canvas"),this.debugOverlayCanvas.width=512,this.debugOverlayCanvas.height=512,this.debugOverlayTexture=new i.T(this.context,this.debugOverlayCanvas,this.context.gl.RGBA))}destroy(){this.debugOverlayTexture&&this.debugOverlayTexture.destroy()}overLimit(){let{drawingBufferWidth:s,drawingBufferHeight:d}=this.context.gl;return this.width!==s||this.height!==d}}function Xm(S,s){let d,v=!1,x=null,T=null,C=()=>{x=null,v&&(S.apply(T,d),x=setTimeout(C,s),v=!1)};return(...R)=>(v=!0,T=this,d=R,x||C(),x)}class Dx{constructor(s){this._getCurrentHash=()=>{let d=window.location.hash.replace("#","");if(this._hashName){let v;return d.split("&").map(x=>x.split("=")).forEach(x=>{x[0]===this._hashName&&(v=x)}),(v&&v[1]||"").split("/")}return d.split("/")},this._onHashChange=()=>{let d=this._getCurrentHash();if(!this._isValidHash(d))return!1;let v=this._map.dragRotate.isEnabled()&&this._map.touchZoomRotate.isEnabled()?+(d[3]||0):this._map.getBearing();return this._map.jumpTo({center:[+d[2],+d[1]],zoom:+d[0],bearing:v,pitch:+(d[4]||0)}),!0},this._updateHashUnthrottled=()=>{let d=window.location.href.replace(/(#.*)?$/,this.getHashString());window.history.replaceState(window.history.state,null,d)},this._removeHash=()=>{let d=this._getCurrentHash();if(d.length===0)return;let v=d.join("/"),x=v;x.split("&").length>0&&(x=x.split("&")[0]),this._hashName&&(x=`${this._hashName}=${v}`);let T=window.location.hash.replace(x,"");T.startsWith("#&")?T=T.slice(0,1)+T.slice(2):T==="#"&&(T="");let C=window.location.href.replace(/(#.+)?$/,T);C=C.replace("&&","&"),window.history.replaceState(window.history.state,null,C)},this._updateHash=Xm(this._updateHashUnthrottled,300),this._hashName=s&&encodeURIComponent(s)}addTo(s){return this._map=s,addEventListener("hashchange",this._onHashChange,!1),this._map.on("moveend",this._updateHash),this}remove(){return removeEventListener("hashchange",this._onHashChange,!1),this._map.off("moveend",this._updateHash),clearTimeout(this._updateHash()),this._removeHash(),delete this._map,this}getHashString(s){let d=this._map.getCenter(),v=Math.round(100*this._map.getZoom())/100,x=Math.ceil((v*Math.LN2+Math.log(512/360/.5))/Math.LN10),T=Math.pow(10,x),C=Math.round(d.lng*T)/T,R=Math.round(d.lat*T)/T,q=this._map.getBearing(),V=this._map.getPitch(),H="";if(H+=s?`/${C}/${R}/${v}`:`${v}/${R}/${C}`,(q||V)&&(H+="/"+Math.round(10*q)/10),V&&(H+=`/${Math.round(V)}`),this._hashName){let Y=this._hashName,W=!1,Q=window.location.hash.slice(1).split("&").map(ie=>{let ve=ie.split("=")[0];return ve===Y?(W=!0,`${ve}=${H}`):ie}).filter(ie=>ie);return W||Q.push(`${Y}=${H}`),`#${Q.join("&")}`}return`#${H}`}_isValidHash(s){if(s.length<3||s.some(isNaN))return!1;try{new i.S(+s[2],+s[1])}catch(T){return!1}let d=+s[0],v=+(s[3]||0),x=+(s[4]||0);return d>=this._map.getMinZoom()&&d<=this._map.getMaxZoom()&&v>=-180&&v<=180&&x>=this._map.getMinPitch()&&x<=this._map.getMaxPitch()}}let td={linearity:.3,easing:i.cm(0,0,.3,1)},sI=i.e({deceleration:2500,maxSpeed:1400},td),c4=i.e({deceleration:20,maxSpeed:1400},td),p4=i.e({deceleration:1e3,maxSpeed:360},td),f4=i.e({deceleration:1e3,maxSpeed:90},td),d4=i.e({deceleration:1e3,maxSpeed:360},td);class h4{constructor(s){this._map=s,this.clear()}clear(){this._inertiaBuffer=[]}record(s){this._drainInertiaBuffer(),this._inertiaBuffer.push({time:y.now(),settings:s})}_drainInertiaBuffer(){let s=this._inertiaBuffer,d=y.now();for(;s.length>0&&d-s[0].time>160;)s.shift()}_onMoveEnd(s){if(this._drainInertiaBuffer(),this._inertiaBuffer.length<2)return;let d={zoom:0,bearing:0,pitch:0,roll:0,pan:new i.P(0,0),pinchAround:void 0,around:void 0};for(let{settings:T}of this._inertiaBuffer)d.zoom+=T.zoomDelta||0,d.bearing+=T.bearingDelta||0,d.pitch+=T.pitchDelta||0,d.roll+=T.rollDelta||0,T.panDelta&&d.pan._add(T.panDelta),T.around&&(d.around=T.around),T.pinchAround&&(d.pinchAround=T.pinchAround);let v=this._inertiaBuffer[this._inertiaBuffer.length-1].time-this._inertiaBuffer[0].time,x={};if(d.pan.mag()){let T=Cv(d.pan.mag(),v,i.e({},sI,s||{})),C=d.pan.mult(T.amount/d.pan.mag()),R=this._map.cameraHelper.handlePanInertia(C,this._map.transform);x.center=R.easingCenter,x.offset=R.easingOffset,Qc(x,T)}if(d.zoom){let T=Cv(d.zoom,v,c4);x.zoom=this._map.transform.zoom+T.amount,Qc(x,T)}if(d.bearing){let T=Cv(d.bearing,v,p4);x.bearing=this._map.transform.bearing+i.ah(T.amount,-179,179),Qc(x,T)}if(d.pitch){let T=Cv(d.pitch,v,f4);x.pitch=this._map.transform.pitch+T.amount,Qc(x,T)}if(d.roll){let T=Cv(d.roll,v,d4);x.roll=this._map.transform.roll+i.ah(T.amount,-179,179),Qc(x,T)}if(x.zoom||x.bearing){let T=d.pinchAround===void 0?d.around:d.pinchAround;x.around=T?this._map.unproject(T):this._map.getCenter()}return this.clear(),i.e(x,{noMoveStart:!0})}}function Qc(S,s){(!S.duration||S.duration<s.duration)&&(S.duration=s.duration,S.easing=s.easing)}function Cv(S,s,d){let{maxSpeed:v,linearity:x,deceleration:T}=d,C=i.ah(S*x/(s/1e3),-v,v),R=Math.abs(C)/(T*x);return{easing:d.easing,duration:1e3*R,amount:C*(R/2)}}class Xl extends i.l{preventDefault(){this._defaultPrevented=!0}get defaultPrevented(){return this._defaultPrevented}constructor(s,d,v,x={}){v=v instanceof MouseEvent?v:new MouseEvent(s,v);let T=w.mousePos(d.getCanvas(),v),C=d.unproject(T);super(s,i.e({point:T,lngLat:C,originalEvent:v},x)),this._defaultPrevented=!1,this.target=d}}class Av extends i.l{preventDefault(){this._defaultPrevented=!0}get defaultPrevented(){return this._defaultPrevented}constructor(s,d,v){let x=s==="touchend"?v.changedTouches:v.touches,T=w.touchPos(d.getCanvasContainer(),x),C=T.map(q=>d.unproject(q)),R=T.reduce((q,V,H,Y)=>q.add(V.div(Y.length)),new i.P(0,0));super(s,{points:T,point:R,lngLats:C,lngLat:d.unproject(R),originalEvent:v}),this._defaultPrevented=!1}}class lI extends i.l{preventDefault(){this._defaultPrevented=!0}get defaultPrevented(){return this._defaultPrevented}constructor(s,d,v){super(s,{originalEvent:v}),this._defaultPrevented=!1}}class m4{constructor(s,d){this._map=s,this._clickTolerance=d.clickTolerance}reset(){delete this._mousedownPos}wheel(s){return this._firePreventable(new lI(s.type,this._map,s))}mousedown(s,d){return this._mousedownPos=d,this._firePreventable(new Xl(s.type,this._map,s))}mouseup(s){this._map.fire(new Xl(s.type,this._map,s))}click(s,d){this._mousedownPos&&this._mousedownPos.dist(d)>=this._clickTolerance||this._map.fire(new Xl(s.type,this._map,s))}dblclick(s){return this._firePreventable(new Xl(s.type,this._map,s))}mouseover(s){this._map.fire(new Xl(s.type,this._map,s))}mouseout(s){this._map.fire(new Xl(s.type,this._map,s))}touchstart(s){return this._firePreventable(new Av(s.type,this._map,s))}touchmove(s){this._map.fire(new Av(s.type,this._map,s))}touchend(s){this._map.fire(new Av(s.type,this._map,s))}touchcancel(s){this._map.fire(new Av(s.type,this._map,s))}_firePreventable(s){if(this._map.fire(s),s.defaultPrevented)return{}}isEnabled(){return!0}isActive(){return!1}enable(){}disable(){}}class g4{constructor(s){this._map=s}reset(){this._delayContextMenu=!1,this._ignoreContextMenu=!0,delete this._contextMenuEvent}mousemove(s){this._map.fire(new Xl(s.type,this._map,s))}mousedown(){this._delayContextMenu=!0,this._ignoreContextMenu=!1}mouseup(){this._delayContextMenu=!1,this._contextMenuEvent&&(this._map.fire(new Xl("contextmenu",this._map,this._contextMenuEvent)),delete this._contextMenuEvent)}contextmenu(s){this._delayContextMenu?this._contextMenuEvent=s:this._ignoreContextMenu||this._map.fire(new Xl(s.type,this._map,s)),this._map.listens("contextmenu")&&s.preventDefault()}isEnabled(){return!0}isActive(){return!1}enable(){}disable(){}}class Ov{constructor(s){this._map=s}get transform(){return this._map._requestedCameraState||this._map.transform}get center(){return{lng:this.transform.center.lng,lat:this.transform.center.lat}}get zoom(){return this.transform.zoom}get pitch(){return this.transform.pitch}get bearing(){return this.transform.bearing}unproject(s){return this.transform.screenPointToLocation(i.P.convert(s),this._map.terrain)}}class uI{constructor(s,d){this._map=s,this._tr=new Ov(s),this._el=s.getCanvasContainer(),this._container=s.getContainer(),this._clickTolerance=d.clickTolerance||1}isEnabled(){return!!this._enabled}isActive(){return!!this._active}enable(){this.isEnabled()||(this._enabled=!0)}disable(){this.isEnabled()&&(this._enabled=!1)}mousedown(s,d){this.isEnabled()&&s.shiftKey&&s.button===0&&(w.disableDrag(),this._startPos=this._lastPos=d,this._active=!0)}mousemoveWindow(s,d){if(!this._active)return;let v=d;if(this._lastPos.equals(v)||!this._box&&v.dist(this._startPos)<this._clickTolerance)return;let x=this._startPos;this._lastPos=v,this._box||(this._box=w.create("div","maplibregl-boxzoom",this._container),this._container.classList.add("maplibregl-crosshair"),this._fireEvent("boxzoomstart",s));let T=Math.min(x.x,v.x),C=Math.max(x.x,v.x),R=Math.min(x.y,v.y),q=Math.max(x.y,v.y);w.setTransform(this._box,`translate(${T}px,${R}px)`),this._box.style.width=C-T+"px",this._box.style.height=q-R+"px"}mouseupWindow(s,d){if(!this._active||s.button!==0)return;let v=this._startPos,x=d;if(this.reset(),w.suppressClick(),v.x!==x.x||v.y!==x.y)return this._map.fire(new i.l("boxzoomend",{originalEvent:s})),{cameraAnimation:T=>T.fitScreenCoordinates(v,x,this._tr.bearing,{linear:!0})};this._fireEvent("boxzoomcancel",s)}keydown(s){this._active&&s.keyCode===27&&(this.reset(),this._fireEvent("boxzoomcancel",s))}reset(){this._active=!1,this._container.classList.remove("maplibregl-crosshair"),this._box&&(w.remove(this._box),this._box=null),w.enableDrag(),delete this._startPos,delete this._lastPos}_fireEvent(s,d){return this._map.fire(new i.l(s,{originalEvent:d}))}}function Pv(S,s){if(S.length!==s.length)throw new Error(`The number of touches and points are not equal - touches ${S.length}, points ${s.length}`);let d={};for(let v=0;v<S.length;v++)d[S[v].identifier]=s[v];return d}class v4{constructor(s){this.reset(),this.numTouches=s.numTouches}reset(){delete this.centroid,delete this.startTime,delete this.touches,this.aborted=!1}touchstart(s,d,v){(this.centroid||v.length>this.numTouches)&&(this.aborted=!0),this.aborted||(this.startTime===void 0&&(this.startTime=s.timeStamp),v.length===this.numTouches&&(this.centroid=function(x){let T=new i.P(0,0);for(let C of x)T._add(C);return T.div(x.length)}(d),this.touches=Pv(v,d)))}touchmove(s,d,v){if(this.aborted||!this.centroid)return;let x=Pv(v,d);for(let T in this.touches){let C=x[T];(!C||C.dist(this.touches[T])>30)&&(this.aborted=!0)}}touchend(s,d,v){if((!this.centroid||s.timeStamp-this.startTime>500)&&(this.aborted=!0),v.length===0){let x=!this.aborted&&this.centroid;if(this.reset(),x)return x}}}class Jl{constructor(s){this.singleTap=new v4(s),this.numTaps=s.numTaps,this.reset()}reset(){this.lastTime=1/0,delete this.lastTap,this.count=0,this.singleTap.reset()}touchstart(s,d,v){this.singleTap.touchstart(s,d,v)}touchmove(s,d,v){this.singleTap.touchmove(s,d,v)}touchend(s,d,v){let x=this.singleTap.touchend(s,d,v);if(x){let T=s.timeStamp-this.lastTime<500,C=!this.lastTap||this.lastTap.dist(x)<30;if(T&&C||this.reset(),this.count++,this.lastTime=s.timeStamp,this.lastTap=x,this.count===this.numTaps)return this.reset(),x}}}class ep{constructor(s){this._tr=new Ov(s),this._zoomIn=new Jl({numTouches:1,numTaps:2}),this._zoomOut=new Jl({numTouches:2,numTaps:1}),this.reset()}reset(){this._active=!1,this._zoomIn.reset(),this._zoomOut.reset()}touchstart(s,d,v){this._zoomIn.touchstart(s,d,v),this._zoomOut.touchstart(s,d,v)}touchmove(s,d,v){this._zoomIn.touchmove(s,d,v),this._zoomOut.touchmove(s,d,v)}touchend(s,d,v){let x=this._zoomIn.touchend(s,d,v),T=this._zoomOut.touchend(s,d,v),C=this._tr;return x?(this._active=!0,s.preventDefault(),setTimeout(()=>this.reset(),0),{cameraAnimation:R=>R.easeTo({duration:300,zoom:C.zoom+1,around:C.unproject(x)},{originalEvent:s})}):T?(this._active=!0,s.preventDefault(),setTimeout(()=>this.reset(),0),{cameraAnimation:R=>R.easeTo({duration:300,zoom:C.zoom-1,around:C.unproject(T)},{originalEvent:s})}):void 0}touchcancel(){this.reset()}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}}class Dv{constructor(s){this._enabled=!!s.enable,this._moveStateManager=s.moveStateManager,this._clickTolerance=s.clickTolerance||1,this._moveFunction=s.move,this._activateOnStart=!!s.activateOnStart,s.assignEvents(this),this.reset()}reset(s){this._active=!1,this._moved=!1,delete this._lastPoint,this._moveStateManager.endMove(s)}_move(...s){let d=this._moveFunction(...s);if(d.bearingDelta||d.pitchDelta||d.rollDelta||d.around||d.panDelta)return this._active=!0,d}dragStart(s,d){this.isEnabled()&&!this._lastPoint&&this._moveStateManager.isValidStartEvent(s)&&(this._moveStateManager.startMove(s),this._lastPoint=Array.isArray(d)?d[0]:d,this._activateOnStart&&this._lastPoint&&(this._active=!0))}dragMove(s,d){if(!this.isEnabled())return;let v=this._lastPoint;if(!v)return;if(s.preventDefault(),!this._moveStateManager.isValidMoveEvent(s))return void this.reset(s);let x=Array.isArray(d)?d[0]:d;return!this._moved&&x.dist(v)<this._clickTolerance?void 0:(this._moved=!0,this._lastPoint=x,this._move(v,x))}dragEnd(s){this.isEnabled()&&this._lastPoint&&this._moveStateManager.isValidEndEvent(s)&&(this._moved&&w.suppressClick(),this.reset(s))}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}getClickTolerance(){return this._clickTolerance}}let tp=0,Nv=2,AB={[tp]:1,[Nv]:2};class L1{constructor(s){this._correctEvent=s.checkCorrectEvent}startMove(s){let d=w.mouseButton(s);this._eventButton=d}endMove(s){delete this._eventButton}isValidStartEvent(s){return this._correctEvent(s)}isValidMoveEvent(s){return!function(d,v){let x=AB[v];return d.buttons===void 0||(d.buttons&x)!==x}(s,this._eventButton)}isValidEndEvent(s){return w.mouseButton(s)===this._eventButton}}class OB{constructor(){this._firstTouch=void 0}_isOneFingerTouch(s){return s.targetTouches.length===1}_isSameTouchEvent(s){return s.targetTouches[0].identifier===this._firstTouch}startMove(s){this._firstTouch=s.targetTouches[0].identifier}endMove(s){delete this._firstTouch}isValidStartEvent(s){return this._isOneFingerTouch(s)}isValidMoveEvent(s){return this._isOneFingerTouch(s)&&this._isSameTouchEvent(s)}isValidEndEvent(s){return this._isOneFingerTouch(s)&&this._isSameTouchEvent(s)}}class PB{constructor(s=new L1({checkCorrectEvent:()=>!0}),d=new OB){this.mouseMoveStateManager=s,this.oneFingerTouchMoveStateManager=d}_executeRelevantHandler(s,d,v){return s instanceof MouseEvent?d(s):typeof TouchEvent!="undefined"&&s instanceof TouchEvent?v(s):void 0}startMove(s){this._executeRelevantHandler(s,d=>this.mouseMoveStateManager.startMove(d),d=>this.oneFingerTouchMoveStateManager.startMove(d))}endMove(s){this._executeRelevantHandler(s,d=>this.mouseMoveStateManager.endMove(d),d=>this.oneFingerTouchMoveStateManager.endMove(d))}isValidStartEvent(s){return this._executeRelevantHandler(s,d=>this.mouseMoveStateManager.isValidStartEvent(d),d=>this.oneFingerTouchMoveStateManager.isValidStartEvent(d))}isValidMoveEvent(s){return this._executeRelevantHandler(s,d=>this.mouseMoveStateManager.isValidMoveEvent(d),d=>this.oneFingerTouchMoveStateManager.isValidMoveEvent(d))}isValidEndEvent(s){return this._executeRelevantHandler(s,d=>this.mouseMoveStateManager.isValidEndEvent(d),d=>this.oneFingerTouchMoveStateManager.isValidEndEvent(d))}}let k1=S=>{S.mousedown=S.dragStart,S.mousemoveWindow=S.dragMove,S.mouseup=S.dragEnd,S.contextmenu=s=>{s.preventDefault()}};class R1{constructor(s,d){this._clickTolerance=s.clickTolerance||1,this._map=d,this.reset()}reset(){this._active=!1,this._touches={},this._sum=new i.P(0,0)}_shouldBePrevented(s){return s<(this._map.cooperativeGestures.isEnabled()?2:1)}touchstart(s,d,v){return this._calculateTransform(s,d,v)}touchmove(s,d,v){if(this._active){if(!this._shouldBePrevented(v.length))return s.preventDefault(),this._calculateTransform(s,d,v);this._map.cooperativeGestures.notifyGestureBlocked("touch_pan",s)}}touchend(s,d,v){this._calculateTransform(s,d,v),this._active&&this._shouldBePrevented(v.length)&&this.reset()}touchcancel(){this.reset()}_calculateTransform(s,d,v){v.length>0&&(this._active=!0);let x=Pv(v,d),T=new i.P(0,0),C=new i.P(0,0),R=0;for(let V in x){let H=x[V],Y=this._touches[V];Y&&(T._add(H),C._add(H.sub(Y)),R++,x[V]=H)}if(this._touches=x,this._shouldBePrevented(R)||!C.mag())return;let q=C.div(R);return this._sum._add(q),this._sum.mag()<this._clickTolerance?void 0:{around:T.div(R),panDelta:q}}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}}class rp{constructor(){this.reset()}reset(){this._active=!1,delete this._firstTwoTouches}touchstart(s,d,v){this._firstTwoTouches||v.length<2||(this._firstTwoTouches=[v[0].identifier,v[1].identifier],this._start([d[0],d[1]]))}touchmove(s,d,v){if(!this._firstTwoTouches)return;s.preventDefault();let[x,T]=this._firstTwoTouches,C=fr(v,d,x),R=fr(v,d,T);if(!C||!R)return;let q=this._aroundCenter?null:C.add(R).div(2);return this._move([C,R],q,s)}touchend(s,d,v){if(!this._firstTwoTouches)return;let[x,T]=this._firstTwoTouches,C=fr(v,d,x),R=fr(v,d,T);C&&R||(this._active&&w.suppressClick(),this.reset())}touchcancel(){this.reset()}enable(s){this._enabled=!0,this._aroundCenter=!!s&&s.around==="center"}disable(){this._enabled=!1,this.reset()}isEnabled(){return!!this._enabled}isActive(){return!!this._active}}function fr(S,s,d){for(let v=0;v<S.length;v++)if(S[v].identifier===d)return s[v]}function cI(S,s){return Math.log(S/s)/Math.LN2}class Nx extends rp{reset(){super.reset(),delete this._distance,delete this._startDistance}_start(s){this._startDistance=this._distance=s[0].dist(s[1])}_move(s,d){let v=this._distance;if(this._distance=s[0].dist(s[1]),this._active||!(Math.abs(cI(this._distance,this._startDistance))<.1))return this._active=!0,{zoomDelta:cI(this._distance,v),pinchAround:d}}}function pI(S,s){return 180*S.angleWith(s)/Math.PI}class Lv extends rp{reset(){super.reset(),delete this._minDiameter,delete this._startVector,delete this._vector}_start(s){this._startVector=this._vector=s[0].sub(s[1]),this._minDiameter=s[0].dist(s[1])}_move(s,d,v){let x=this._vector;if(this._vector=s[0].sub(s[1]),this._active||!this._isBelowThreshold(this._vector))return this._active=!0,{bearingDelta:pI(this._vector,x),pinchAround:d}}_isBelowThreshold(s){this._minDiameter=Math.min(this._minDiameter,s.mag());let d=25/(Math.PI*this._minDiameter)*360,v=pI(s,this._startVector);return Math.abs(v)<d}}function Jm(S){return Math.abs(S.y)>Math.abs(S.x)}class Lx extends rp{constructor(s){super(),this._currentTouchCount=0,this._map=s}reset(){super.reset(),this._valid=void 0,delete this._firstMove,delete this._lastPoints}touchstart(s,d,v){super.touchstart(s,d,v),this._currentTouchCount=v.length}_start(s){this._lastPoints=s,Jm(s[0].sub(s[1]))&&(this._valid=!1)}_move(s,d,v){if(this._map.cooperativeGestures.isEnabled()&&this._currentTouchCount<3)return;let x=s[0].sub(this._lastPoints[0]),T=s[1].sub(this._lastPoints[1]);return this._valid=this.gestureBeginsVertically(x,T,v.timeStamp),this._valid?(this._lastPoints=s,this._active=!0,{pitchDelta:(x.y+T.y)/2*-.5}):void 0}gestureBeginsVertically(s,d,v){if(this._valid!==void 0)return this._valid;let x=s.mag()>=2,T=d.mag()>=2;if(!x&&!T)return;if(!x||!T)return this._firstMove===void 0&&(this._firstMove=v),v-this._firstMove<100&&void 0;let C=s.y>0==d.y>0;return Jm(s)&&Jm(d)&&C}}let ro={panStep:100,bearingStep:15,pitchStep:10};class kx{constructor(s){this._tr=new Ov(s);let d=ro;this._panStep=d.panStep,this._bearingStep=d.bearingStep,this._pitchStep=d.pitchStep,this._rotationDisabled=!1}reset(){this._active=!1}keydown(s){if(s.altKey||s.ctrlKey||s.metaKey)return;let d=0,v=0,x=0,T=0,C=0;switch(s.keyCode){case 61:case 107:case 171:case 187:d=1;break;case 189:case 109:case 173:d=-1;break;case 37:s.shiftKey?v=-1:(s.preventDefault(),T=-1);break;case 39:s.shiftKey?v=1:(s.preventDefault(),T=1);break;case 38:s.shiftKey?x=1:(s.preventDefault(),C=-1);break;case 40:s.shiftKey?x=-1:(s.preventDefault(),C=1);break;default:return}return this._rotationDisabled&&(v=0,x=0),{cameraAnimation:R=>{let q=this._tr;R.easeTo({duration:300,easeId:"keyboardHandler",easing:DB,zoom:d?Math.round(q.zoom)+d*(s.shiftKey?2:1):q.zoom,bearing:q.bearing+v*this._bearingStep,pitch:q.pitch+x*this._pitchStep,offset:[-T*this._panStep,-C*this._panStep],center:q.center},{originalEvent:s})}}}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}disableRotation(){this._rotationDisabled=!0}enableRotation(){this._rotationDisabled=!1}}function DB(S){return S*(2-S)}let Rx=4.000244140625,NB=1/450;class y4{constructor(s,d){this._onTimeout=v=>{this._type="wheel",this._delta-=this._lastValue,this._active||this._start(v)},this._map=s,this._tr=new Ov(s),this._triggerRenderFrame=d,this._delta=0,this._defaultZoomRate=.01,this._wheelZoomRate=NB}setZoomRate(s){this._defaultZoomRate=s}setWheelZoomRate(s){this._wheelZoomRate=s}isEnabled(){return!!this._enabled}isActive(){return!!this._active||this._finishTimeout!==void 0}isZooming(){return!!this._zooming}enable(s){this.isEnabled()||(this._enabled=!0,this._aroundCenter=!!s&&s.around==="center")}disable(){this.isEnabled()&&(this._enabled=!1)}_shouldBePrevented(s){return!!this._map.cooperativeGestures.isEnabled()&&!(s.ctrlKey||this._map.cooperativeGestures.isBypassed(s))}wheel(s){if(!this.isEnabled())return;if(this._shouldBePrevented(s))return void this._map.cooperativeGestures.notifyGestureBlocked("wheel_zoom",s);let d=s.deltaMode===WheelEvent.DOM_DELTA_LINE?40*s.deltaY:s.deltaY,v=y.now(),x=v-(this._lastWheelEventTime||0);this._lastWheelEventTime=v,d!==0&&d%Rx==0?this._type="wheel":d!==0&&Math.abs(d)<4?this._type="trackpad":x>400?(this._type=null,this._lastValue=d,this._timeout=setTimeout(this._onTimeout,40,s)):this._type||(this._type=Math.abs(x*d)<200?"trackpad":"wheel",this._timeout&&(clearTimeout(this._timeout),this._timeout=null,d+=this._lastValue)),s.shiftKey&&d&&(d/=4),this._type&&(this._lastWheelEvent=s,this._delta-=d,this._active||this._start(s)),s.preventDefault()}_start(s){if(!this._delta)return;this._frameId&&(this._frameId=null),this._active=!0,this.isZooming()||(this._zooming=!0),this._finishTimeout&&(clearTimeout(this._finishTimeout),delete this._finishTimeout);let d=w.mousePos(this._map.getCanvas(),s),v=this._tr;this._aroundPoint=this._aroundCenter?v.transform.locationToScreenPoint(i.S.convert(v.center)):d,this._frameId||(this._frameId=!0,this._triggerRenderFrame())}renderFrame(){if(!this._frameId||(this._frameId=null,!this.isActive()))return;let s=this._tr.transform;if(typeof this._lastExpectedZoom=="number"){let R=s.zoom-this._lastExpectedZoom;typeof this._startZoom=="number"&&(this._startZoom+=R),typeof this._targetZoom=="number"&&(this._targetZoom+=R)}if(this._delta!==0){let R=this._type==="wheel"&&Math.abs(this._delta)>Rx?this._wheelZoomRate:this._defaultZoomRate,q=2/(1+Math.exp(-Math.abs(this._delta*R)));this._delta<0&&q!==0&&(q=1/q);let V=typeof this._targetZoom!="number"?s.scale:i.af(this._targetZoom);this._targetZoom=s.getConstrained(s.getCameraLngLat(),i.ak(V*q)).zoom,this._type==="wheel"&&(this._startZoom=s.zoom,this._easing=this._smoothOutEasing(200)),this._delta=0}let d=typeof this._targetZoom!="number"?s.zoom:this._targetZoom,v=this._startZoom,x=this._easing,T,C=!1;if(this._type==="wheel"&&v&&x){let R=y.now()-this._lastWheelEventTime,q=Math.min((R+5)/200,1),V=x(q);T=i.C.number(v,d,V),q<1?this._frameId||(this._frameId=!0):C=!0}else T=d,C=!0;return this._active=!0,C&&(this._active=!1,this._finishTimeout=setTimeout(()=>{this._zooming=!1,this._triggerRenderFrame(),delete this._targetZoom,delete this._lastExpectedZoom,delete this._finishTimeout},200)),this._lastExpectedZoom=T,{noInertia:!0,needsRenderFrame:!C,zoomDelta:T-s.zoom,around:this._aroundPoint,originalEvent:this._lastWheelEvent}}_smoothOutEasing(s){let d=i.co;if(this._prevEase){let v=this._prevEase,x=(y.now()-v.start)/v.duration,T=v.easing(x+.01)-v.easing(x),C=.27/Math.sqrt(T*T+1e-4)*.01,R=Math.sqrt(.0729-C*C);d=i.cm(C,R,.25,1)}return this._prevEase={start:y.now(),duration:s,easing:d},d}reset(){this._active=!1,this._zooming=!1,delete this._targetZoom,delete this._lastExpectedZoom,this._finishTimeout&&(clearTimeout(this._finishTimeout),delete this._finishTimeout)}}class fI{constructor(s,d){this._clickZoom=s,this._tapZoom=d}enable(){this._clickZoom.enable(),this._tapZoom.enable()}disable(){this._clickZoom.disable(),this._tapZoom.disable()}isEnabled(){return this._clickZoom.isEnabled()&&this._tapZoom.isEnabled()}isActive(){return this._clickZoom.isActive()||this._tapZoom.isActive()}}class dI{constructor(s){this._tr=new Ov(s),this.reset()}reset(){this._active=!1}dblclick(s,d){return s.preventDefault(),{cameraAnimation:v=>{v.easeTo({duration:300,zoom:this._tr.zoom+(s.shiftKey?-1:1),around:this._tr.unproject(d)},{originalEvent:s})}}}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}}class _4{constructor(){this._tap=new Jl({numTouches:1,numTaps:1}),this.reset()}reset(){this._active=!1,delete this._swipePoint,delete this._swipeTouch,delete this._tapTime,delete this._tapPoint,this._tap.reset()}touchstart(s,d,v){if(!this._swipePoint)if(this._tapTime){let x=d[0],T=s.timeStamp-this._tapTime<500,C=this._tapPoint.dist(x)<30;T&&C?v.length>0&&(this._swipePoint=x,this._swipeTouch=v[0].identifier):this.reset()}else this._tap.touchstart(s,d,v)}touchmove(s,d,v){if(this._tapTime){if(this._swipePoint){if(v[0].identifier!==this._swipeTouch)return;let x=d[0],T=x.y-this._swipePoint.y;return this._swipePoint=x,s.preventDefault(),this._active=!0,{zoomDelta:T/128}}}else this._tap.touchmove(s,d,v)}touchend(s,d,v){if(this._tapTime)this._swipePoint&&v.length===0&&this.reset();else{let x=this._tap.touchend(s,d,v);x&&(this._tapTime=s.timeStamp,this._tapPoint=x)}}touchcancel(){this.reset()}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}}class b4{constructor(s,d,v){this._el=s,this._mousePan=d,this._touchPan=v}enable(s){this._inertiaOptions=s||{},this._mousePan.enable(),this._touchPan.enable(),this._el.classList.add("maplibregl-touch-drag-pan")}disable(){this._mousePan.disable(),this._touchPan.disable(),this._el.classList.remove("maplibregl-touch-drag-pan")}isEnabled(){return this._mousePan.isEnabled()&&this._touchPan.isEnabled()}isActive(){return this._mousePan.isActive()||this._touchPan.isActive()}}class hI{constructor(s,d,v,x){this._pitchWithRotate=s.pitchWithRotate,this._rollEnabled=s.rollEnabled,this._mouseRotate=d,this._mousePitch=v,this._mouseRoll=x}enable(){this._mouseRotate.enable(),this._pitchWithRotate&&this._mousePitch.enable(),this._rollEnabled&&this._mouseRoll.enable()}disable(){this._mouseRotate.disable(),this._mousePitch.disable(),this._mouseRoll.disable()}isEnabled(){return this._mouseRotate.isEnabled()&&(!this._pitchWithRotate||this._mousePitch.isEnabled())&&(!this._rollEnabled||this._mouseRoll.isEnabled())}isActive(){return this._mouseRotate.isActive()||this._mousePitch.isActive()||this._mouseRoll.isActive()}}class x4{constructor(s,d,v,x){this._el=s,this._touchZoom=d,this._touchRotate=v,this._tapDragZoom=x,this._rotationDisabled=!1,this._enabled=!0}enable(s){this._touchZoom.enable(s),this._rotationDisabled||this._touchRotate.enable(s),this._tapDragZoom.enable(),this._el.classList.add("maplibregl-touch-zoom-rotate")}disable(){this._touchZoom.disable(),this._touchRotate.disable(),this._tapDragZoom.disable(),this._el.classList.remove("maplibregl-touch-zoom-rotate")}isEnabled(){return this._touchZoom.isEnabled()&&(this._rotationDisabled||this._touchRotate.isEnabled())&&this._tapDragZoom.isEnabled()}isActive(){return this._touchZoom.isActive()||this._touchRotate.isActive()||this._tapDragZoom.isActive()}disableRotation(){this._rotationDisabled=!0,this._touchRotate.disable()}enableRotation(){this._rotationDisabled=!1,this._touchZoom.isEnabled()&&this._touchRotate.enable()}}class w4{constructor(s,d){this._bypassKey=navigator.userAgent.indexOf("Mac")!==-1?"metaKey":"ctrlKey",this._map=s,this._options=d,this._enabled=!1}isActive(){return!1}reset(){}_setupUI(){if(this._container)return;let s=this._map.getCanvasContainer();s.classList.add("maplibregl-cooperative-gestures"),this._container=w.create("div","maplibregl-cooperative-gesture-screen",s);let d=this._map._getUIString("CooperativeGesturesHandler.WindowsHelpText");this._bypassKey==="metaKey"&&(d=this._map._getUIString("CooperativeGesturesHandler.MacHelpText"));let v=this._map._getUIString("CooperativeGesturesHandler.MobileHelpText"),x=document.createElement("div");x.className="maplibregl-desktop-message",x.textContent=d,this._container.appendChild(x);let T=document.createElement("div");T.className="maplibregl-mobile-message",T.textContent=v,this._container.appendChild(T),this._container.setAttribute("aria-hidden","true")}_destroyUI(){this._container&&(w.remove(this._container),this._map.getCanvasContainer().classList.remove("maplibregl-cooperative-gestures")),delete this._container}enable(){this._setupUI(),this._enabled=!0}disable(){this._enabled=!1,this._destroyUI()}isEnabled(){return this._enabled}isBypassed(s){return s[this._bypassKey]}notifyGestureBlocked(s,d){this._enabled&&(this._map.fire(new i.l("cooperativegestureprevented",{gestureType:s,originalEvent:d})),this._container.classList.add("maplibregl-show"),setTimeout(()=>{this._container.classList.remove("maplibregl-show")},100))}}let np=S=>S.zoom||S.drag||S.roll||S.pitch||S.rotate;class ii extends i.l{}function kv(S){return S.panDelta&&S.panDelta.mag()||S.zoomDelta||S.bearingDelta||S.pitchDelta||S.rollDelta}class mI{constructor(s,d){this.handleWindowEvent=x=>{this.handleEvent(x,`${x.type}Window`)},this.handleEvent=(x,T)=>{if(x.type==="blur")return void this.stop(!0);this._updatingCamera=!0;let C=x.type==="renderFrame"?void 0:x,R={needsRenderFrame:!1},q={},V={};for(let{handlerName:W,handler:Q,allowed:ie}of this._handlers){if(!Q.isEnabled())continue;let ve;if(this._blockedByActive(V,ie,W))Q.reset();else if(Q[T||x.type]){if(i.cp(x,T||x.type)){let ge=w.mousePos(this._map.getCanvas(),x);ve=Q[T||x.type](x,ge)}else if(i.cq(x,T||x.type)){let ge=this._getMapTouches(x.touches),ye=w.touchPos(this._map.getCanvas(),ge);ve=Q[T||x.type](x,ye,ge)}else i.cr(T||x.type)||(ve=Q[T||x.type](x));this.mergeHandlerResult(R,q,ve,W,C),ve&&ve.needsRenderFrame&&this._triggerRenderFrame()}(ve||Q.isActive())&&(V[W]=Q)}let H={};for(let W in this._previousActiveHandlers)V[W]||(H[W]=C);this._previousActiveHandlers=V,(Object.keys(H).length||kv(R))&&(this._changes.push([R,q,H]),this._triggerRenderFrame()),(Object.keys(V).length||kv(R))&&this._map._stop(!0),this._updatingCamera=!1;let{cameraAnimation:Y}=R;Y&&(this._inertia.clear(),this._fireEvents({},{},!0),this._changes=[],Y(this._map))},this._map=s,this._el=this._map.getCanvasContainer(),this._handlers=[],this._handlersById={},this._changes=[],this._inertia=new h4(s),this._bearingSnap=d.bearingSnap,this._previousActiveHandlers={},this._eventsInProgress={},this._addDefaultHandlers(d);let v=this._el;this._listeners=[[v,"touchstart",{passive:!0}],[v,"touchmove",{passive:!1}],[v,"touchend",void 0],[v,"touchcancel",void 0],[v,"mousedown",void 0],[v,"mousemove",void 0],[v,"mouseup",void 0],[document,"mousemove",{capture:!0}],[document,"mouseup",void 0],[v,"mouseover",void 0],[v,"mouseout",void 0],[v,"dblclick",void 0],[v,"click",void 0],[v,"keydown",{capture:!1}],[v,"keyup",void 0],[v,"wheel",{passive:!1}],[v,"contextmenu",void 0],[window,"blur",void 0]];for(let[x,T,C]of this._listeners)w.addEventListener(x,T,x===document?this.handleWindowEvent:this.handleEvent,C)}destroy(){for(let[s,d,v]of this._listeners)w.removeEventListener(s,d,s===document?this.handleWindowEvent:this.handleEvent,v)}_addDefaultHandlers(s){let d=this._map,v=d.getCanvasContainer();this._add("mapEvent",new m4(d,s));let x=d.boxZoom=new uI(d,s);this._add("boxZoom",x),s.interactive&&s.boxZoom&&x.enable();let T=d.cooperativeGestures=new w4(d,s.cooperativeGestures);this._add("cooperativeGestures",T),s.cooperativeGestures&&T.enable();let C=new ep(d),R=new dI(d);d.doubleClickZoom=new fI(R,C),this._add("tapZoom",C),this._add("clickZoom",R),s.interactive&&s.doubleClickZoom&&d.doubleClickZoom.enable();let q=new _4;this._add("tapDragZoom",q);let V=d.touchPitch=new Lx(d);this._add("touchPitch",V),s.interactive&&s.touchPitch&&d.touchPitch.enable(s.touchPitch);let H=()=>d.project(d.getCenter()),Y=function({enable:Pe,clickTolerance:ze,aroundCenter:He=!0,minPixelCenterThreshold:Ne=100,rotateDegreesPerPixelMoved:Qe=.8},ht){let it=new L1({checkCorrectEvent:at=>w.mouseButton(at)===0&&at.ctrlKey||w.mouseButton(at)===2&&!at.ctrlKey});return new Dv({clickTolerance:ze,move:(at,dt)=>{let Vt=ht();if(He&&Math.abs(Vt.y-at.y)>Ne)return{bearingDelta:i.cn(new i.P(at.x,dt.y),dt,Vt)};let Wt=(dt.x-at.x)*Qe;return He&&dt.y<Vt.y&&(Wt=-Wt),{bearingDelta:Wt}},moveStateManager:it,enable:Pe,assignEvents:k1})}(s,H),W=function({enable:Pe,clickTolerance:ze,pitchDegreesPerPixelMoved:He=-.5}){let Ne=new L1({checkCorrectEvent:Qe=>w.mouseButton(Qe)===0&&Qe.ctrlKey||w.mouseButton(Qe)===2});return new Dv({clickTolerance:ze,move:(Qe,ht)=>({pitchDelta:(ht.y-Qe.y)*He}),moveStateManager:Ne,enable:Pe,assignEvents:k1})}(s),Q=function({enable:Pe,clickTolerance:ze,rollDegreesPerPixelMoved:He=.3},Ne){let Qe=new L1({checkCorrectEvent:ht=>w.mouseButton(ht)===2&&ht.ctrlKey});return new Dv({clickTolerance:ze,move:(ht,it)=>{let at=Ne(),dt=(it.x-ht.x)*He;return it.y<at.y&&(dt=-dt),{rollDelta:dt}},moveStateManager:Qe,enable:Pe,assignEvents:k1})}(s,H);d.dragRotate=new hI(s,Y,W,Q),this._add("mouseRotate",Y,["mousePitch"]),this._add("mousePitch",W,["mouseRotate","mouseRoll"]),this._add("mouseRoll",Q,["mousePitch"]),s.interactive&&s.dragRotate&&d.dragRotate.enable();let ie=function({enable:Pe,clickTolerance:ze}){let He=new L1({checkCorrectEvent:Ne=>w.mouseButton(Ne)===0&&!Ne.ctrlKey});return new Dv({clickTolerance:ze,move:(Ne,Qe)=>({around:Qe,panDelta:Qe.sub(Ne)}),activateOnStart:!0,moveStateManager:He,enable:Pe,assignEvents:k1})}(s),ve=new R1(s,d);d.dragPan=new b4(v,ie,ve),this._add("mousePan",ie),this._add("touchPan",ve,["touchZoom","touchRotate"]),s.interactive&&s.dragPan&&d.dragPan.enable(s.dragPan);let ge=new Lv,ye=new Nx;d.touchZoomRotate=new x4(v,ye,ge,q),this._add("touchRotate",ge,["touchPan","touchZoom"]),this._add("touchZoom",ye,["touchPan","touchRotate"]),s.interactive&&s.touchZoomRotate&&d.touchZoomRotate.enable(s.touchZoomRotate);let Ie=d.scrollZoom=new y4(d,()=>this._triggerRenderFrame());this._add("scrollZoom",Ie,["mousePan"]),s.interactive&&s.scrollZoom&&d.scrollZoom.enable(s.scrollZoom);let Re=d.keyboard=new kx(d);this._add("keyboard",Re),s.interactive&&s.keyboard&&d.keyboard.enable(),this._add("blockableMapEvent",new g4(d))}_add(s,d,v){this._handlers.push({handlerName:s,handler:d,allowed:v}),this._handlersById[s]=d}stop(s){if(!this._updatingCamera){for(let{handler:d}of this._handlers)d.reset();this._inertia.clear(),this._fireEvents({},{},s),this._changes=[]}}isActive(){for(let{handler:s}of this._handlers)if(s.isActive())return!0;return!1}isZooming(){return!!this._eventsInProgress.zoom||this._map.scrollZoom.isZooming()}isRotating(){return!!this._eventsInProgress.rotate}isMoving(){return!!np(this._eventsInProgress)||this.isZooming()}_blockedByActive(s,d,v){for(let x in s)if(x!==v&&(!d||d.indexOf(x)<0))return!0;return!1}_getMapTouches(s){let d=[];for(let v of s)this._el.contains(v.target)&&d.push(v);return d}mergeHandlerResult(s,d,v,x,T){if(!v)return;i.e(s,v);let C={handlerName:x,originalEvent:v.originalEvent||T};v.zoomDelta!==void 0&&(d.zoom=C),v.panDelta!==void 0&&(d.drag=C),v.rollDelta!==void 0&&(d.roll=C),v.pitchDelta!==void 0&&(d.pitch=C),v.bearingDelta!==void 0&&(d.rotate=C)}_applyChanges(){let s={},d={},v={};for(let[x,T,C]of this._changes)x.panDelta&&(s.panDelta=(s.panDelta||new i.P(0,0))._add(x.panDelta)),x.zoomDelta&&(s.zoomDelta=(s.zoomDelta||0)+x.zoomDelta),x.bearingDelta&&(s.bearingDelta=(s.bearingDelta||0)+x.bearingDelta),x.pitchDelta&&(s.pitchDelta=(s.pitchDelta||0)+x.pitchDelta),x.rollDelta&&(s.rollDelta=(s.rollDelta||0)+x.rollDelta),x.around!==void 0&&(s.around=x.around),x.pinchAround!==void 0&&(s.pinchAround=x.pinchAround),x.noInertia&&(s.noInertia=x.noInertia),i.e(d,T),i.e(v,C);this._updateMapTransform(s,d,v),this._changes=[]}_updateMapTransform(s,d,v){let x=this._map,T=x._getTransformForUpdate(),C=x.terrain;if(!(kv(s)||C&&this._terrainMovement))return this._fireEvents(d,v,!0);x._stop(!0);let{panDelta:R,zoomDelta:q,bearingDelta:V,pitchDelta:H,rollDelta:Y,around:W,pinchAround:Q}=s;Q!==void 0&&(W=Q),W=W||x.transform.centerPoint,C&&!T.isPointOnMapSurface(W)&&(W=T.centerPoint);let ie={panDelta:R,zoomDelta:q,rollDelta:Y,pitchDelta:H,bearingDelta:V,around:W};this._map.cameraHelper.useGlobeControls&&!T.isPointOnMapSurface(W)&&(W=T.centerPoint);let ve=W.distSqr(T.centerPoint)<.01?T.center:T.screenPointToLocation(R?W.sub(R):W);C?(this._map.cameraHelper.handleMapControlsRollPitchBearingZoom(ie,T),this._terrainMovement||!d.drag&&!d.zoom?d.drag&&this._terrainMovement?T.setCenter(T.screenPointToLocation(T.centerPoint.sub(R))):this._map.cameraHelper.handleMapControlsPan(ie,T,ve):(this._terrainMovement=!0,this._map._elevationFreeze=!0,this._map.cameraHelper.handleMapControlsPan(ie,T,ve))):(this._map.cameraHelper.handleMapControlsRollPitchBearingZoom(ie,T),this._map.cameraHelper.handleMapControlsPan(ie,T,ve)),x._applyUpdatedTransform(T),this._map._update(),s.noInertia||this._inertia.record(s),this._fireEvents(d,v,!0)}_fireEvents(s,d,v){let x=np(this._eventsInProgress),T=np(s),C={};for(let Y in s){let{originalEvent:W}=s[Y];this._eventsInProgress[Y]||(C[`${Y}start`]=W),this._eventsInProgress[Y]=s[Y]}!x&&T&&this._fireEvent("movestart",T.originalEvent);for(let Y in C)this._fireEvent(Y,C[Y]);T&&this._fireEvent("move",T.originalEvent);for(let Y in s){let{originalEvent:W}=s[Y];this._fireEvent(Y,W)}let R={},q;for(let Y in this._eventsInProgress){let{handlerName:W,originalEvent:Q}=this._eventsInProgress[Y];this._handlersById[W].isActive()||(delete this._eventsInProgress[Y],q=d[W]||Q,R[`${Y}end`]=q)}for(let Y in R)this._fireEvent(Y,R[Y]);let V=np(this._eventsInProgress),H=(x||T)&&!V;if(H&&this._terrainMovement){this._map._elevationFreeze=!1,this._terrainMovement=!1;let Y=this._map._getTransformForUpdate();this._map.getCenterClampedToGround()&&Y.recalculateZoomAndCenter(this._map.terrain),this._map._applyUpdatedTransform(Y)}if(v&&H){this._updatingCamera=!0;let Y=this._inertia._onMoveEnd(this._map.dragPan._inertiaOptions),W=Q=>Q!==0&&-this._bearingSnap<Q&&Q<this._bearingSnap;!Y||!Y.essential&&y.prefersReducedMotion?(this._map.fire(new i.l("moveend",{originalEvent:q})),W(this._map.getBearing())&&this._map.resetNorth()):(W(Y.bearing||this._map.getBearing())&&(Y.bearing=0),Y.freezeElevation=!0,this._map.easeTo(Y,{originalEvent:q})),this._updatingCamera=!1}}_fireEvent(s,d){this._map.fire(new i.l(s,d?{originalEvent:d}:{}))}_requestFrame(){return this._map.triggerRepaint(),this._map._renderTaskQueue.add(s=>{delete this._frameId,this.handleEvent(new ii("renderFrame",{timeStamp:s})),this._applyChanges()})}_triggerRenderFrame(){this._frameId===void 0&&(this._frameId=this._requestFrame())}}class E4 extends i.E{constructor(s,d,v){super(),this._renderFrameCallback=()=>{let x=Math.min((y.now()-this._easeStart)/this._easeOptions.duration,1);this._onEaseFrame(this._easeOptions.easing(x)),x<1&&this._easeFrameId?this._easeFrameId=this._requestRenderFrame(this._renderFrameCallback):this.stop()},this._moving=!1,this._zooming=!1,this.transform=s,this._bearingSnap=v.bearingSnap,this.cameraHelper=d,this.on("moveend",()=>{delete this._requestedCameraState})}migrateProjection(s,d){s.apply(this.transform),this.transform=s,this.cameraHelper=d}getCenter(){return new i.S(this.transform.center.lng,this.transform.center.lat)}setCenter(s,d){return this.jumpTo({center:s},d)}getCenterElevation(){return this.transform.elevation}setCenterElevation(s,d){return this.jumpTo({elevation:s},d),this}getCenterClampedToGround(){return this._centerClampedToGround}setCenterClampedToGround(s){this._centerClampedToGround=s}panBy(s,d,v){return s=i.P.convert(s).mult(-1),this.panTo(this.transform.center,i.e({offset:s},d),v)}panTo(s,d,v){return this.easeTo(i.e({center:s},d),v)}getZoom(){return this.transform.zoom}setZoom(s,d){return this.jumpTo({zoom:s},d),this}zoomTo(s,d,v){return this.easeTo(i.e({zoom:s},d),v)}zoomIn(s,d){return this.zoomTo(this.getZoom()+1,s,d),this}zoomOut(s,d){return this.zoomTo(this.getZoom()-1,s,d),this}getVerticalFieldOfView(){return this.transform.fov}setVerticalFieldOfView(s,d){return s!=this.transform.fov&&(this.transform.setFov(s),this.fire(new i.l("movestart",d)).fire(new i.l("move",d)).fire(new i.l("moveend",d))),this}getBearing(){return this.transform.bearing}setBearing(s,d){return this.jumpTo({bearing:s},d),this}getPadding(){return this.transform.padding}setPadding(s,d){return this.jumpTo({padding:s},d),this}rotateTo(s,d,v){return this.easeTo(i.e({bearing:s},d),v)}resetNorth(s,d){return this.rotateTo(0,i.e({duration:1e3},s),d),this}resetNorthPitch(s,d){return this.easeTo(i.e({bearing:0,pitch:0,roll:0,duration:1e3},s),d),this}snapToNorth(s,d){return Math.abs(this.getBearing())<this._bearingSnap?this.resetNorth(s,d):this}getPitch(){return this.transform.pitch}setPitch(s,d){return this.jumpTo({pitch:s},d),this}getRoll(){return this.transform.roll}setRoll(s,d){return this.jumpTo({roll:s},d),this}cameraForBounds(s,d){s=Ot.convert(s).adjustAntiMeridian();let v=d&&d.bearing||0;return this._cameraForBoxAndBearing(s.getNorthWest(),s.getSouthEast(),v,d)}_cameraForBoxAndBearing(s,d,v,x){let T={top:0,bottom:0,right:0,left:0};if(typeof(x=i.e({padding:T,offset:[0,0],maxZoom:this.transform.maxZoom},x)).padding=="number"){let V=x.padding;x.padding={top:V,bottom:V,right:V,left:V}}let C=i.e(T,x.padding);x.padding=C;let R=this.transform,q=new Ot(s,d);return this.cameraHelper.cameraForBoxAndBearing(x,C,q,v,R)}fitBounds(s,d,v){return this._fitInternal(this.cameraForBounds(s,d),d,v)}fitScreenCoordinates(s,d,v,x,T){return this._fitInternal(this._cameraForBoxAndBearing(this.transform.screenPointToLocation(i.P.convert(s)),this.transform.screenPointToLocation(i.P.convert(d)),v,x),x,T)}_fitInternal(s,d,v){return s?(delete(d=i.e(s,d)).padding,d.linear?this.easeTo(d,v):this.flyTo(d,v)):this}jumpTo(s,d){this.stop();let v=this._getTransformForUpdate(),x=!1,T=!1,C=!1,R=v.zoom;this.cameraHelper.handleJumpToCenterZoom(v,s);let q=v.zoom!==R;return"elevation"in s&&v.elevation!==+s.elevation&&v.setElevation(+s.elevation),"bearing"in s&&v.bearing!==+s.bearing&&(x=!0,v.setBearing(+s.bearing)),"pitch"in s&&v.pitch!==+s.pitch&&(T=!0,v.setPitch(+s.pitch)),"roll"in s&&v.roll!==+s.roll&&(C=!0,v.setRoll(+s.roll)),s.padding==null||v.isPaddingEqual(s.padding)||v.setPadding(s.padding),this._applyUpdatedTransform(v),this.fire(new i.l("movestart",d)).fire(new i.l("move",d)),q&&this.fire(new i.l("zoomstart",d)).fire(new i.l("zoom",d)).fire(new i.l("zoomend",d)),x&&this.fire(new i.l("rotatestart",d)).fire(new i.l("rotate",d)).fire(new i.l("rotateend",d)),T&&this.fire(new i.l("pitchstart",d)).fire(new i.l("pitch",d)).fire(new i.l("pitchend",d)),C&&this.fire(new i.l("rollstart",d)).fire(new i.l("roll",d)).fire(new i.l("rollend",d)),this.fire(new i.l("moveend",d))}calculateCameraOptionsFromTo(s,d,v,x=0){let T=i.a1.fromLngLat(s,d),C=i.a1.fromLngLat(v,x),R=C.x-T.x,q=C.y-T.y,V=C.z-T.z,H=Math.hypot(R,q,V);if(H===0)throw new Error("Can't calculate camera options with same From and To");let Y=Math.hypot(R,q),W=i.ak(this.transform.cameraToCenterDistance/H/this.transform.tileSize),Q=180*Math.atan2(R,-q)/Math.PI,ie=180*Math.acos(Y/H)/Math.PI;return ie=V<0?90-ie:90+ie,{center:C.toLngLat(),elevation:x,zoom:W,pitch:ie,bearing:Q}}calculateCameraOptionsFromCameraLngLatAltRotation(s,d,v,x,T){let C=this.transform.calculateCenterFromCameraLngLatAlt(s,d,v,x);return{center:C.center,elevation:C.elevation,zoom:C.zoom,bearing:v,pitch:x,roll:T}}easeTo(s,d){this._stop(!1,s.easeId),((s=i.e({offset:[0,0],duration:500,easing:i.co},s)).animate===!1||!s.essential&&y.prefersReducedMotion)&&(s.duration=0);let v=this._getTransformForUpdate(),x=this.getBearing(),T=v.pitch,C=v.roll,R="bearing"in s?this._normalizeBearing(s.bearing,x):x,q="pitch"in s?+s.pitch:T,V="roll"in s?this._normalizeBearing(s.roll,C):C,H="padding"in s?s.padding:v.padding,Y=i.P.convert(s.offset),W,Q;s.around&&(W=i.S.convert(s.around),Q=v.locationToScreenPoint(W));let ie={moving:this._moving,zooming:this._zooming,rotating:this._rotating,pitching:this._pitching,rolling:this._rolling},ve=this.cameraHelper.handleEaseTo(v,{bearing:R,pitch:q,roll:V,padding:H,around:W,aroundPoint:Q,offsetAsPoint:Y,offset:s.offset,zoom:s.zoom,center:s.center});return this._rotating=this._rotating||x!==R,this._pitching=this._pitching||q!==T,this._rolling=this._rolling||V!==C,this._padding=!v.isPaddingEqual(H),this._zooming=this._zooming||ve.isZooming,this._easeId=s.easeId,this._prepareEase(d,s.noMoveStart,ie),this.terrain&&this._prepareElevation(ve.elevationCenter),this._ease(ge=>{ve.easeFunc(ge),this.terrain&&!s.freezeElevation&&this._updateElevation(ge),this._applyUpdatedTransform(v),this._fireMoveEvents(d)},ge=>{this.terrain&&s.freezeElevation&&this._finalizeElevation(),this._afterEase(d,ge)},s),this}_prepareEase(s,d,v={}){this._moving=!0,d||v.moving||this.fire(new i.l("movestart",s)),this._zooming&&!v.zooming&&this.fire(new i.l("zoomstart",s)),this._rotating&&!v.rotating&&this.fire(new i.l("rotatestart",s)),this._pitching&&!v.pitching&&this.fire(new i.l("pitchstart",s)),this._rolling&&!v.rolling&&this.fire(new i.l("rollstart",s))}_prepareElevation(s){this._elevationCenter=s,this._elevationStart=this.transform.elevation,this._elevationTarget=this.terrain.getElevationForLngLatZoom(s,this.transform.tileZoom),this._elevationFreeze=!0}_updateElevation(s){this._elevationStart!==void 0&&this._elevationCenter!==void 0||this._prepareElevation(this.transform.center),this.transform.setMinElevationForCurrentTile(this.terrain.getMinTileElevationForLngLatZoom(this._elevationCenter,this.transform.tileZoom));let d=this.terrain.getElevationForLngLatZoom(this._elevationCenter,this.transform.tileZoom);if(s<1&&d!==this._elevationTarget){let v=this._elevationTarget-this._elevationStart;this._elevationStart+=s*(v-(d-(v*s+this._elevationStart))/(1-s)),this._elevationTarget=d}this.transform.setElevation(i.C.number(this._elevationStart,this._elevationTarget,s))}_finalizeElevation(){this._elevationFreeze=!1,this.getCenterClampedToGround()&&this.transform.recalculateZoomAndCenter(this.terrain)}_getTransformForUpdate(){return this.transformCameraUpdate||this.terrain?(this._requestedCameraState||(this._requestedCameraState=this.transform.clone()),this._requestedCameraState):this.transform}_elevateCameraIfInsideTerrain(s){if(!this.terrain&&s.elevation>=0&&s.pitch<=90)return{};let d=s.getCameraLngLat(),v=s.getCameraAltitude(),x=this.terrain?this.terrain.getElevationForLngLatZoom(d,s.zoom):0;if(v<x){let T=this.calculateCameraOptionsFromTo(d,x,s.center,s.elevation);return{pitch:T.pitch,zoom:T.zoom}}return{}}_applyUpdatedTransform(s){let d=[];if(d.push(x=>this._elevateCameraIfInsideTerrain(x)),this.transformCameraUpdate&&d.push(x=>this.transformCameraUpdate(x)),!d.length)return;let v=s.clone();for(let x of d){let T=v.clone(),{center:C,zoom:R,roll:q,pitch:V,bearing:H,elevation:Y}=x(T);C&&T.setCenter(C),Y!==void 0&&T.setElevation(Y),R!==void 0&&T.setZoom(R),q!==void 0&&T.setRoll(q),V!==void 0&&T.setPitch(V),H!==void 0&&T.setBearing(H),v.apply(T)}this.transform.apply(v)}_fireMoveEvents(s){this.fire(new i.l("move",s)),this._zooming&&this.fire(new i.l("zoom",s)),this._rotating&&this.fire(new i.l("rotate",s)),this._pitching&&this.fire(new i.l("pitch",s)),this._rolling&&this.fire(new i.l("roll",s))}_afterEase(s,d){if(this._easeId&&d&&this._easeId===d)return;delete this._easeId;let v=this._zooming,x=this._rotating,T=this._pitching,C=this._rolling;this._moving=!1,this._zooming=!1,this._rotating=!1,this._pitching=!1,this._rolling=!1,this._padding=!1,v&&this.fire(new i.l("zoomend",s)),x&&this.fire(new i.l("rotateend",s)),T&&this.fire(new i.l("pitchend",s)),C&&this.fire(new i.l("rollend",s)),this.fire(new i.l("moveend",s))}flyTo(s,d){if(!s.essential&&y.prefersReducedMotion){let dt=i.Q(s,["center","zoom","bearing","pitch","roll","elevation"]);return this.jumpTo(dt,d)}this.stop(),s=i.e({offset:[0,0],speed:1.2,curve:1.42,easing:i.co},s);let v=this._getTransformForUpdate(),x=v.bearing,T=v.pitch,C=v.roll,R=v.padding,q="bearing"in s?this._normalizeBearing(s.bearing,x):x,V="pitch"in s?+s.pitch:T,H="roll"in s?this._normalizeBearing(s.roll,C):C,Y="padding"in s?s.padding:v.padding,W=i.P.convert(s.offset),Q=v.centerPoint.add(W),ie=v.screenPointToLocation(Q),ve=this.cameraHelper.handleFlyTo(v,{bearing:q,pitch:V,roll:H,padding:Y,locationAtOffset:ie,offsetAsPoint:W,center:s.center,minZoom:s.minZoom,zoom:s.zoom}),ge=s.curve,ye=Math.max(v.width,v.height),Ie=ye/ve.scaleOfZoom,Re=ve.pixelPathLength;typeof ve.scaleOfMinZoom=="number"&&(ge=Math.sqrt(ye/ve.scaleOfMinZoom/Re*2));let Pe=ge*ge;function ze(dt){let Vt=(Ie*Ie-ye*ye+(dt?-1:1)*Pe*Pe*Re*Re)/(2*(dt?Ie:ye)*Pe*Re);return Math.log(Math.sqrt(Vt*Vt+1)-Vt)}function He(dt){return(Math.exp(dt)-Math.exp(-dt))/2}function Ne(dt){return(Math.exp(dt)+Math.exp(-dt))/2}let Qe=ze(!1),ht=function(dt){return Ne(Qe)/Ne(Qe+ge*dt)},it=function(dt){return ye*((Ne(Qe)*(He(Vt=Qe+ge*dt)/Ne(Vt))-He(Qe))/Pe)/Re;var Vt},at=(ze(!0)-Qe)/ge;if(Math.abs(Re)<2e-6||!isFinite(at)){if(Math.abs(ye-Ie)<1e-6)return this.easeTo(s,d);let dt=Ie<ye?-1:1;at=Math.abs(Math.log(Ie/ye))/ge,it=()=>0,ht=Vt=>Math.exp(dt*ge*Vt)}return s.duration="duration"in s?+s.duration:1e3*at/("screenSpeed"in s?+s.screenSpeed/ge:+s.speed),s.maxDuration&&s.duration>s.maxDuration&&(s.duration=0),this._zooming=!0,this._rotating=x!==q,this._pitching=V!==T,this._rolling=H!==C,this._padding=!v.isPaddingEqual(Y),this._prepareEase(d,!1),this.terrain&&this._prepareElevation(ve.targetCenter),this._ease(dt=>{let Vt=dt*at,Wt=1/ht(Vt),Nt=it(Vt);this._rotating&&v.setBearing(i.C.number(x,q,dt)),this._pitching&&v.setPitch(i.C.number(T,V,dt)),this._rolling&&v.setRoll(i.C.number(C,H,dt)),this._padding&&(v.interpolatePadding(R,Y,dt),Q=v.centerPoint.add(W)),ve.easeFunc(dt,Wt,Nt,Q),this.terrain&&!s.freezeElevation&&this._updateElevation(dt),this._applyUpdatedTransform(v),this._fireMoveEvents(d)},()=>{this.terrain&&s.freezeElevation&&this._finalizeElevation(),this._afterEase(d)},s),this}isEasing(){return!!this._easeFrameId}stop(){return this._stop()}_stop(s,d){var v;if(this._easeFrameId&&(this._cancelRenderFrame(this._easeFrameId),delete this._easeFrameId,delete this._onEaseFrame),this._onEaseEnd){let x=this._onEaseEnd;delete this._onEaseEnd,x.call(this,d)}return s||(v=this.handlers)===null||v===void 0||v.stop(!1),this}_ease(s,d,v){v.animate===!1||v.duration===0?(s(1),d()):(this._easeStart=y.now(),this._easeOptions=v,this._onEaseFrame=s,this._onEaseEnd=d,this._easeFrameId=this._requestRenderFrame(this._renderFrameCallback))}_normalizeBearing(s,d){s=i.aO(s,-180,180);let v=Math.abs(s-d);return Math.abs(s-360-d)<v&&(s-=360),Math.abs(s+360-d)<v&&(s+=360),s}queryTerrainElevation(s){return this.terrain?this.terrain.getElevationForLngLatZoom(i.S.convert(s),this.transform.tileZoom):null}}let gI={compact:!0,customAttribution:"<a href=\"https://maplibre.org/\" target=\"_blank\">MapLibre</a>"};class vI{constructor(s=gI){this._toggleAttribution=()=>{this._container.classList.contains("maplibregl-compact")&&(this._container.classList.contains("maplibregl-compact-show")?(this._container.setAttribute("open",""),this._container.classList.remove("maplibregl-compact-show")):(this._container.classList.add("maplibregl-compact-show"),this._container.removeAttribute("open")))},this._updateData=d=>{!d||d.sourceDataType!=="metadata"&&d.sourceDataType!=="visibility"&&d.dataType!=="style"&&d.type!=="terrain"||this._updateAttributions()},this._updateCompact=()=>{this._map.getCanvasContainer().offsetWidth<=640||this._compact?this._compact===!1?this._container.setAttribute("open",""):this._container.classList.contains("maplibregl-compact")||this._container.classList.contains("maplibregl-attrib-empty")||(this._container.setAttribute("open",""),this._container.classList.add("maplibregl-compact","maplibregl-compact-show")):(this._container.setAttribute("open",""),this._container.classList.contains("maplibregl-compact")&&this._container.classList.remove("maplibregl-compact","maplibregl-compact-show"))},this._updateCompactMinimize=()=>{this._container.classList.contains("maplibregl-compact")&&this._container.classList.contains("maplibregl-compact-show")&&this._container.classList.remove("maplibregl-compact-show")},this.options=s}getDefaultPosition(){return"bottom-right"}onAdd(s){return this._map=s,this._compact=this.options.compact,this._container=w.create("details","maplibregl-ctrl maplibregl-ctrl-attrib"),this._compactButton=w.create("summary","maplibregl-ctrl-attrib-button",this._container),this._compactButton.addEventListener("click",this._toggleAttribution),this._setElementTitle(this._compactButton,"ToggleAttribution"),this._innerContainer=w.create("div","maplibregl-ctrl-attrib-inner",this._container),this._updateAttributions(),this._updateCompact(),this._map.on("styledata",this._updateData),this._map.on("sourcedata",this._updateData),this._map.on("terrain",this._updateData),this._map.on("resize",this._updateCompact),this._map.on("drag",this._updateCompactMinimize),this._container}onRemove(){w.remove(this._container),this._map.off("styledata",this._updateData),this._map.off("sourcedata",this._updateData),this._map.off("terrain",this._updateData),this._map.off("resize",this._updateCompact),this._map.off("drag",this._updateCompactMinimize),this._map=void 0,this._compact=void 0,this._attribHTML=void 0}_setElementTitle(s,d){let v=this._map._getUIString(`AttributionControl.${d}`);s.title=v,s.setAttribute("aria-label",v)}_updateAttributions(){if(!this._map.style)return;let s=[];if(this.options.customAttribution&&(Array.isArray(this.options.customAttribution)?s=s.concat(this.options.customAttribution.map(x=>typeof x!="string"?"":x)):typeof this.options.customAttribution=="string"&&s.push(this.options.customAttribution)),this._map.style.stylesheet){let x=this._map.style.stylesheet;this.styleOwner=x.owner,this.styleId=x.id}let d=this._map.style.sourceCaches;for(let x in d){let T=d[x];if(T.used||T.usedForTerrain){let C=T.getSource();C.attribution&&s.indexOf(C.attribution)<0&&s.push(C.attribution)}}s=s.filter(x=>String(x).trim()),s.sort((x,T)=>x.length-T.length),s=s.filter((x,T)=>{for(let C=T+1;C<s.length;C++)if(s[C].indexOf(x)>=0)return!1;return!0});let v=s.join(" | ");v!==this._attribHTML&&(this._attribHTML=v,s.length?(this._innerContainer.innerHTML=w.sanitize(v),this._container.classList.remove("maplibregl-attrib-empty")):this._container.classList.add("maplibregl-attrib-empty"),this._updateCompact(),this._editLink=null)}}class S4{constructor(s={}){this._updateCompact=()=>{let d=this._container.children;if(d.length){let v=d[0];this._map.getCanvasContainer().offsetWidth<=640||this._compact?this._compact!==!1&&v.classList.add("maplibregl-compact"):v.classList.remove("maplibregl-compact")}},this.options=s}getDefaultPosition(){return"bottom-left"}onAdd(s){this._map=s,this._compact=this.options&&this.options.compact,this._container=w.create("div","maplibregl-ctrl");let d=w.create("a","maplibregl-ctrl-logo");return d.target="_blank",d.rel="noopener nofollow",d.href="https://maplibre.org/",d.setAttribute("aria-label",this._map._getUIString("LogoControl.Title")),d.setAttribute("rel","noopener nofollow"),this._container.appendChild(d),this._container.style.display="block",this._map.on("resize",this._updateCompact),this._updateCompact(),this._container}onRemove(){w.remove(this._container),this._map.off("resize",this._updateCompact),this._map=void 0,this._compact=void 0}}class Fp{constructor(){this._queue=[],this._id=0,this._cleared=!1,this._currentlyRunning=!1}add(s){let d=++this._id;return this._queue.push({callback:s,id:d,cancelled:!1}),d}remove(s){let d=this._currentlyRunning,v=d?this._queue.concat(d):this._queue;for(let x of v)if(x.id===s)return void(x.cancelled=!0)}run(s=0){if(this._currentlyRunning)throw new Error("Attempting to run(), but is already running.");let d=this._currentlyRunning=this._queue;this._queue=[];for(let v of d)if(!v.cancelled&&(v.callback(s),this._cleared))break;this._cleared=!1,this._currentlyRunning=!1}clear(){this._currentlyRunning&&(this._cleared=!0),this._queue=[]}}var jx=i.aJ([{name:"a_pos3d",type:"Int16",components:3}]);class Sr extends i.E{constructor(s){super(),this._lastTilesetChange=y.now(),this.sourceCache=s,this._tiles={},this._renderableTilesKeys=[],this._sourceTileCache={},this.minzoom=0,this.maxzoom=22,this.deltaZoom=1,this.tileSize=s._source.tileSize*ig(2,this.deltaZoom),s.usedForTerrain=!0,s.tileSize=this.tileSize}destruct(){this.sourceCache.usedForTerrain=!1,this.sourceCache.tileSize=null}update(s,d){this.sourceCache.update(s,d),this._renderableTilesKeys=[];let v={};for(let x of Ae(s,{tileSize:this.tileSize,minzoom:this.minzoom,maxzoom:this.maxzoom,reparseOverscaled:!1,terrain:d,calculateTileZoom:this.sourceCache._source.calculateTileZoom}))v[x.key]=!0,this._renderableTilesKeys.push(x.key),this._tiles[x.key]||(x.terrainRttPosMatrix32f=new Float64Array(16),i.bY(x.terrainRttPosMatrix32f,0,i.$,i.$,0,0,1),this._tiles[x.key]=new $t(x,this.tileSize),this._lastTilesetChange=y.now());for(let x in this._tiles)v[x]||delete this._tiles[x]}freeRtt(s){for(let d in this._tiles){let v=this._tiles[d];(!s||v.tileID.equals(s)||v.tileID.isChildOf(s)||s.isChildOf(v.tileID))&&(v.rtt=[])}}getRenderableTiles(){return this._renderableTilesKeys.map(s=>this.getTileByID(s))}getTileByID(s){return this._tiles[s]}getTerrainCoords(s,d){return d?this._getTerrainCoordsForTileRanges(s,d):this._getTerrainCoordsForRegularTile(s)}_getTerrainCoordsForRegularTile(s){let d={};for(let v of this._renderableTilesKeys){let x=this._tiles[v].tileID,T=s.clone(),C=i.ba();if(x.canonical.equals(s.canonical))i.bY(C,0,i.$,i.$,0,0,1);else if(x.canonical.isChildOf(s.canonical)){let R=x.canonical.z-s.canonical.z,q=x.canonical.x-(x.canonical.x>>R<<R),V=x.canonical.y-(x.canonical.y>>R<<R),H=i.$>>R;i.bY(C,0,H,H,0,0,1),i.M(C,C,[-q*H,-V*H,0])}else{if(!s.canonical.isChildOf(x.canonical))continue;{let R=s.canonical.z-x.canonical.z,q=s.canonical.x-(s.canonical.x>>R<<R),V=s.canonical.y-(s.canonical.y>>R<<R),H=i.$>>R;i.bY(C,0,i.$,i.$,0,0,1),i.M(C,C,[q*H,V*H,0]),i.N(C,C,[1/ig(2,R),1/ig(2,R),0])}}T.terrainRttPosMatrix32f=new Float32Array(C),d[v]=T}return d}_getTerrainCoordsForTileRanges(s,d){let v={};for(let x of this._renderableTilesKeys){let T=this._tiles[x].tileID;if(!this._isWithinTileRanges(T,d))continue;let C=s.clone(),R=i.ba();if(T.canonical.z===s.canonical.z){let q=s.canonical.x-T.canonical.x,V=s.canonical.y-T.canonical.y;i.bY(R,0,i.$,i.$,0,0,1),i.M(R,R,[q*i.$,V*i.$,0])}else if(T.canonical.z>s.canonical.z){let q=T.canonical.z-s.canonical.z,V=T.canonical.x-(T.canonical.x>>q<<q),H=T.canonical.y-(T.canonical.y>>q<<q),Y=s.canonical.x-(T.canonical.x>>q),W=s.canonical.y-(T.canonical.y>>q),Q=i.$>>q;i.bY(R,0,Q,Q,0,0,1),i.M(R,R,[-V*Q+Y*i.$,-H*Q+W*i.$,0])}else{let q=s.canonical.z-T.canonical.z,V=s.canonical.x-(s.canonical.x>>q<<q),H=s.canonical.y-(s.canonical.y>>q<<q),Y=(s.canonical.x>>q)-T.canonical.x,W=(s.canonical.y>>q)-T.canonical.y,Q=i.$<<q;i.bY(R,0,Q,Q,0,0,1),i.M(R,R,[V*i.$+Y*Q,H*i.$+W*Q,0])}C.terrainRttPosMatrix32f=new Float32Array(R),v[x]=C}return v}getSourceTile(s,d){let v=this.sourceCache._source,x=s.overscaledZ-this.deltaZoom;if(x>v.maxzoom&&(x=v.maxzoom),x<v.minzoom)return null;this._sourceTileCache[s.key]||(this._sourceTileCache[s.key]=s.scaledTo(x).key);let T=this.sourceCache.getTileByID(this._sourceTileCache[s.key]);if((!T||!T.dem)&&d)for(;x>=v.minzoom&&(!T||!T.dem);)T=this.sourceCache.getTileByID(s.scaledTo(x--).key);return T}anyTilesAfterTime(s=Date.now()){return this._lastTilesetChange>=s}_isWithinTileRanges(s,d){return d[s.canonical.z]&&s.canonical.x>=d[s.canonical.z].minTileX&&s.canonical.x<=d[s.canonical.z].maxTileX&&s.canonical.y>=d[s.canonical.z].minTileY&&s.canonical.y<=d[s.canonical.z].maxTileY}}class Kr{constructor(s,d,v){this._meshCache={},this.painter=s,this.sourceCache=new Sr(d),this.options=v,this.exaggeration=typeof v.exaggeration=="number"?v.exaggeration:1,this.qualityFactor=2,this.meshSize=128,this._demMatrixCache={},this.coordsIndex=[],this._coordsTextureSize=1024}getDEMElevation(s,d,v,x=i.$){var T;if(!(d>=0&&d<x&&v>=0&&v<x))return 0;let C=this.getTerrainData(s),R=(T=C.tile)===null||T===void 0?void 0:T.dem;if(!R)return 0;let q=i.cs([],[d/x*i.$,v/x*i.$],C.u_terrain_matrix),V=[q[0]*R.dim,q[1]*R.dim],H=Math.floor(V[0]),Y=Math.floor(V[1]),W=V[0]-H,Q=V[1]-Y;return R.get(H,Y)*(1-W)*(1-Q)+R.get(H+1,Y)*W*(1-Q)+R.get(H,Y+1)*(1-W)*Q+R.get(H+1,Y+1)*W*Q}getElevationForLngLatZoom(s,d){if(!i.ct(d,s.wrap()))return 0;let{tileID:v,mercatorX:x,mercatorY:T}=this._getOverscaledTileIDFromLngLatZoom(s,d);return this.getElevation(v,x%i.$,T%i.$,i.$)}getElevation(s,d,v,x=i.$){return this.getDEMElevation(s,d,v,x)*this.exaggeration}getTerrainData(s){if(!this._emptyDemTexture){let x=this.painter.context,T=new i.R({width:1,height:1},new Uint8Array(4));this._emptyDepthTexture=new i.T(x,T,x.gl.RGBA,{premultiply:!1}),this._emptyDemUnpack=[0,0,0,0],this._emptyDemTexture=new i.T(x,new i.R({width:1,height:1}),x.gl.RGBA,{premultiply:!1}),this._emptyDemTexture.bind(x.gl.NEAREST,x.gl.CLAMP_TO_EDGE),this._emptyDemMatrix=i.ag([])}let d=this.sourceCache.getSourceTile(s,!0);if(d&&d.dem&&(!d.demTexture||d.needsTerrainPrepare)){let x=this.painter.context;d.demTexture=this.painter.getTileTexture(d.dem.stride),d.demTexture?d.demTexture.update(d.dem.getPixels(),{premultiply:!1}):d.demTexture=new i.T(x,d.dem.getPixels(),x.gl.RGBA,{premultiply:!1}),d.demTexture.bind(x.gl.NEAREST,x.gl.CLAMP_TO_EDGE),d.needsTerrainPrepare=!1}let v=d&&d+d.tileID.key+s.key;if(v&&!this._demMatrixCache[v]){let x=this.sourceCache.sourceCache._source.maxzoom,T=s.canonical.z-d.tileID.canonical.z;s.overscaledZ>s.canonical.z&&(s.canonical.z>=x?T=s.canonical.z-x:i.w("cannot calculate elevation if elevation maxzoom > source.maxzoom"));let C=s.canonical.x-(s.canonical.x>>T<<T),R=s.canonical.y-(s.canonical.y>>T<<T),q=i.cu(new Float64Array(16),[1/(i.$<<T),1/(i.$<<T),0]);i.M(q,q,[C*i.$,R*i.$,0]),this._demMatrixCache[s.key]={matrix:q,coord:s}}return{u_depth:2,u_terrain:3,u_terrain_dim:d&&d.dem&&d.dem.dim||1,u_terrain_matrix:v?this._demMatrixCache[s.key].matrix:this._emptyDemMatrix,u_terrain_unpack:d&&d.dem&&d.dem.getUnpackVector()||this._emptyDemUnpack,u_terrain_exaggeration:this.exaggeration,texture:(d&&d.demTexture||this._emptyDemTexture).texture,depthTexture:(this._fboDepthTexture||this._emptyDepthTexture).texture,tile:d}}getFramebuffer(s){let d=this.painter,v=d.width/devicePixelRatio,x=d.height/devicePixelRatio;return!this._fbo||this._fbo.width===v&&this._fbo.height===x||(this._fbo.destroy(),this._fboCoordsTexture.destroy(),this._fboDepthTexture.destroy(),delete this._fbo,delete this._fboDepthTexture,delete this._fboCoordsTexture),this._fboCoordsTexture||(this._fboCoordsTexture=new i.T(d.context,{width:v,height:x,data:null},d.context.gl.RGBA,{premultiply:!1}),this._fboCoordsTexture.bind(d.context.gl.NEAREST,d.context.gl.CLAMP_TO_EDGE)),this._fboDepthTexture||(this._fboDepthTexture=new i.T(d.context,{width:v,height:x,data:null},d.context.gl.RGBA,{premultiply:!1}),this._fboDepthTexture.bind(d.context.gl.NEAREST,d.context.gl.CLAMP_TO_EDGE)),this._fbo||(this._fbo=d.context.createFramebuffer(v,x,!0,!1),this._fbo.depthAttachment.set(d.context.createRenderbuffer(d.context.gl.DEPTH_COMPONENT16,v,x))),this._fbo.colorAttachment.set(s==="coords"?this._fboCoordsTexture.texture:this._fboDepthTexture.texture),this._fbo}getCoordsTexture(){let s=this.painter.context;if(this._coordsTexture)return this._coordsTexture;let d=new Uint8Array(this._coordsTextureSize*this._coordsTextureSize*4);for(let T=0,C=0;T<this._coordsTextureSize;T++)for(let R=0;R<this._coordsTextureSize;R++,C+=4)d[C+0]=255&R,d[C+1]=255&T,d[C+2]=R>>8<<4|T>>8,d[C+3]=0;let v=new i.R({width:this._coordsTextureSize,height:this._coordsTextureSize},new Uint8Array(d.buffer)),x=new i.T(s,v,s.gl.RGBA,{premultiply:!1});return x.bind(s.gl.NEAREST,s.gl.CLAMP_TO_EDGE),this._coordsTexture=x,x}pointCoordinate(s){this.painter.maybeDrawDepthAndCoords(!0);let d=new Uint8Array(4),v=this.painter.context,x=v.gl,T=Math.round(s.x*this.painter.pixelRatio/devicePixelRatio),C=Math.round(s.y*this.painter.pixelRatio/devicePixelRatio),R=Math.round(this.painter.height/devicePixelRatio);v.bindFramebuffer.set(this.getFramebuffer("coords").framebuffer),x.readPixels(T,R-C-1,1,1,x.RGBA,x.UNSIGNED_BYTE,d),v.bindFramebuffer.set(null);let q=d[0]+(d[2]>>4<<8),V=d[1]+((15&d[2])<<8),H=this.coordsIndex[255-d[3]],Y=H&&this.sourceCache.getTileByID(H);if(!Y)return null;let W=this._coordsTextureSize,Q=(1<<Y.tileID.canonical.z)*W;return new i.a1((Y.tileID.canonical.x*W+q)/Q+Y.tileID.wrap,(Y.tileID.canonical.y*W+V)/Q,this.getElevation(Y.tileID,q,V,W))}depthAtPoint(s){let d=new Uint8Array(4),v=this.painter.context,x=v.gl;return v.bindFramebuffer.set(this.getFramebuffer("depth").framebuffer),x.readPixels(s.x,this.painter.height/devicePixelRatio-s.y-1,1,1,x.RGBA,x.UNSIGNED_BYTE,d),v.bindFramebuffer.set(null),(d[0]/16777216+d[1]/65536+d[2]/256+d[3])/256}getTerrainMesh(s){var d;let v=((d=this.painter.style.projection)===null||d===void 0?void 0:d.transitionState)>0,x=v&&s.canonical.y===0,T=v&&s.canonical.y===(1<<s.canonical.z)-1,C=`m_${x?"n":""}_${T?"s":""}`;if(this._meshCache[C])return this._meshCache[C];let R=this.painter.context,q=new i.cv,V=new i.aN,H=this.meshSize,Y=i.$/H,W=H*H;for(let Ne=0;Ne<=H;Ne++)for(let Qe=0;Qe<=H;Qe++)q.emplaceBack(Qe*Y,Ne*Y,0);for(let Ne=0;Ne<W;Ne+=H+1)for(let Qe=0;Qe<H;Qe++)V.emplaceBack(Qe+Ne,H+Qe+Ne+1,H+Qe+Ne+2),V.emplaceBack(Qe+Ne,H+Qe+Ne+2,Qe+Ne+1);let Q=q.length,ie=Q+(H+1),ve=(H+1)*H,ge=x?i.bh:0,ye=x?0:1,Ie=T?i.bi:i.$,Re=T?0:1;for(let Ne=0;Ne<=H;Ne++)q.emplaceBack(Ne*Y,ge,ye);for(let Ne=0;Ne<=H;Ne++)q.emplaceBack(Ne*Y,Ie,Re);for(let Ne=0;Ne<H;Ne++)V.emplaceBack(ve+Ne,ie+Ne,ie+Ne+1),V.emplaceBack(ve+Ne,ie+Ne+1,ve+Ne+1),V.emplaceBack(0+Ne,Q+Ne+1,Q+Ne),V.emplaceBack(0+Ne,0+Ne+1,Q+Ne+1);let Pe=q.length,ze=Pe+2*(H+1);for(let Ne of[0,1])for(let Qe=0;Qe<=H;Qe++)for(let ht of[0,1])q.emplaceBack(Ne*i.$,Qe*Y,ht);for(let Ne=0;Ne<2*H;Ne+=2)V.emplaceBack(Pe+Ne,Pe+Ne+1,Pe+Ne+3),V.emplaceBack(Pe+Ne,Pe+Ne+3,Pe+Ne+2),V.emplaceBack(ze+Ne,ze+Ne+3,ze+Ne+1),V.emplaceBack(ze+Ne,ze+Ne+2,ze+Ne+3);let He=new Pi(R.createVertexBuffer(q,jx.members),R.createIndexBuffer(V),i.aM.simpleSegment(0,0,q.length,V.length));return this._meshCache[C]=He,He}getMeshFrameDelta(s){return 2*Math.PI*i.bu/Math.pow(2,Math.max(s,0))/5}getMinTileElevationForLngLatZoom(s,d){var v;let{tileID:x}=this._getOverscaledTileIDFromLngLatZoom(s,d);return(v=this.getMinMaxElevation(x).minElevation)!==null&&v!==void 0?v:0}getMinMaxElevation(s){let d=this.getTerrainData(s).tile,v={minElevation:null,maxElevation:null};return d&&d.dem&&(v.minElevation=d.dem.min*this.exaggeration,v.maxElevation=d.dem.max*this.exaggeration),v}_getOverscaledTileIDFromLngLatZoom(s,d){let v=i.a1.fromLngLat(s.wrap()),x=(1<<d)*i.$,T=v.x*x,C=v.y*x,R=Math.floor(T/i.$),q=Math.floor(C/i.$);return{tileID:new i.Z(d,0,d,R,q),mercatorX:T,mercatorY:C}}}class qx{constructor(s,d,v){this._context=s,this._size=d,this._tileSize=v,this._objects=[],this._recentlyUsed=[],this._stamp=0}destruct(){for(let s of this._objects)s.texture.destroy(),s.fbo.destroy()}_createObject(s){let d=this._context.createFramebuffer(this._tileSize,this._tileSize,!0,!0),v=new i.T(this._context,{width:this._tileSize,height:this._tileSize,data:null},this._context.gl.RGBA);return v.bind(this._context.gl.LINEAR,this._context.gl.CLAMP_TO_EDGE),this._context.extTextureFilterAnisotropic&&this._context.gl.texParameterf(this._context.gl.TEXTURE_2D,this._context.extTextureFilterAnisotropic.TEXTURE_MAX_ANISOTROPY_EXT,this._context.extTextureFilterAnisotropicMax),d.depthAttachment.set(this._context.createRenderbuffer(this._context.gl.DEPTH_STENCIL,this._tileSize,this._tileSize)),d.colorAttachment.set(v.texture),{id:s,fbo:d,texture:v,stamp:-1,inUse:!1}}getObjectForId(s){return this._objects[s]}useObject(s){s.inUse=!0,this._recentlyUsed=this._recentlyUsed.filter(d=>s.id!==d),this._recentlyUsed.push(s.id)}stampObject(s){s.stamp=++this._stamp}getOrCreateFreeObject(){for(let d of this._recentlyUsed)if(!this._objects[d].inUse)return this._objects[d];if(this._objects.length>=this._size)throw new Error("No free RenderPool available, call freeAllObjects() required!");let s=this._createObject(this._objects.length);return this._objects.push(s),s}freeObject(s){s.inUse=!1}freeAllObjects(){for(let s of this._objects)this.freeObject(s)}isFull(){return!(this._objects.length<this._size)&&this._objects.some(s=>!s.inUse)===!1}}let hh={background:!0,fill:!0,line:!0,raster:!0,hillshade:!0,"color-relief":!0};class zx{constructor(s,d){this.painter=s,this.terrain=d,this.pool=new qx(s.context,30,d.sourceCache.tileSize*d.qualityFactor)}destruct(){this.pool.destruct()}getTexture(s){return this.pool.getObjectForId(s.rtt[this._stacks.length-1].id).texture}prepareForRender(s,d){this._stacks=[],this._prevType=null,this._rttTiles=[],this._renderableTiles=this.terrain.sourceCache.getRenderableTiles(),this._renderableLayerIds=s._order.filter(v=>!s._layers[v].isHidden(d)),this._coordsAscending={};for(let v in s.sourceCaches){this._coordsAscending[v]={};let x=s.sourceCaches[v].getVisibleCoordinates(),T=s.sourceCaches[v].getSource(),C=T instanceof ar?T.terrainTileRanges:null;for(let R of x){let q=this.terrain.sourceCache.getTerrainCoords(R,C);for(let V in q)this._coordsAscending[v][V]||(this._coordsAscending[v][V]=[]),this._coordsAscending[v][V].push(q[V])}}this._coordsAscendingStr={};for(let v of s._order){let x=s._layers[v],T=x.source;if(hh[x.type]&&!this._coordsAscendingStr[T]){this._coordsAscendingStr[T]={};for(let C in this._coordsAscending[T])this._coordsAscendingStr[T][C]=this._coordsAscending[T][C].map(R=>R.key).sort().join()}}for(let v of this._renderableTiles)for(let x in this._coordsAscendingStr){let T=this._coordsAscendingStr[x][v.tileID.key];T&&T!==v.rttCoords[x]&&(v.rtt=[])}}renderLayer(s,d){if(s.isHidden(this.painter.transform.zoom))return!1;let v=Object.assign(Object.assign({},d),{isRenderingToTexture:!0}),x=s.type,T=this.painter,C=this._renderableLayerIds[this._renderableLayerIds.length-1]===s.id;if(hh[x]&&(this._prevType&&hh[this._prevType]||this._stacks.push([]),this._prevType=x,this._stacks[this._stacks.length-1].push(s.id),!C))return!0;if(hh[this._prevType]||hh[x]&&C){this._prevType=x;let R=this._stacks.length-1,q=this._stacks[R]||[];for(let V of this._renderableTiles){if(this.pool.isFull()&&(Px(this.painter,this.terrain,this._rttTiles,v),this._rttTiles=[],this.pool.freeAllObjects()),this._rttTiles.push(V),V.rtt[R]){let Y=this.pool.getObjectForId(V.rtt[R].id);if(Y.stamp===V.rtt[R].stamp){this.pool.useObject(Y);continue}}let H=this.pool.getOrCreateFreeObject();this.pool.useObject(H),this.pool.stampObject(H),V.rtt[R]={id:H.id,stamp:H.stamp},T.context.bindFramebuffer.set(H.fbo.framebuffer),T.context.clear({color:i.bf.transparent,stencil:0}),T.currentStencilSource=void 0;for(let Y=0;Y<q.length;Y++){let W=T.style._layers[q[Y]],Q=W.source?this._coordsAscending[W.source][V.tileID.key]:[V.tileID];T.context.viewport.set([0,0,H.fbo.width,H.fbo.height]),T._renderTileClippingMasks(W,Q,!0),T.renderLayer(T,T.style.sourceCaches[W.source],W,Q,v),W.source&&(V.rttCoords[W.source]=this._coordsAscendingStr[W.source][V.tileID.key])}}return Px(this.painter,this.terrain,this._rttTiles,v),this._rttTiles=[],this.pool.freeAllObjects(),hh[x]}return!1}}let ml={"AttributionControl.ToggleAttribution":"Toggle attribution","AttributionControl.MapFeedback":"Map feedback","FullscreenControl.Enter":"Enter fullscreen","FullscreenControl.Exit":"Exit fullscreen","GeolocateControl.FindMyLocation":"Find my location","GeolocateControl.LocationNotAvailable":"Location not available","LogoControl.Title":"MapLibre logo","Map.Title":"Map","Marker.Title":"Map marker","NavigationControl.ResetBearing":"Reset bearing to north","NavigationControl.ZoomIn":"Zoom in","NavigationControl.ZoomOut":"Zoom out","Popup.Close":"Close popup","ScaleControl.Feet":"ft","ScaleControl.Meters":"m","ScaleControl.Kilometers":"km","ScaleControl.Miles":"mi","ScaleControl.NauticalMiles":"nm","GlobeControl.Enable":"Enable globe","GlobeControl.Disable":"Disable globe","TerrainControl.Enable":"Enable terrain","TerrainControl.Disable":"Disable terrain","CooperativeGesturesHandler.WindowsHelpText":"Use Ctrl + scroll to zoom the map","CooperativeGesturesHandler.MacHelpText":"Use \u2318 + scroll to zoom the map","CooperativeGesturesHandler.MobileHelpText":"Use two fingers to move the map"},T4=a,uc={hash:!1,interactive:!0,bearingSnap:7,attributionControl:gI,maplibreLogo:!1,refreshExpiredTiles:!0,canvasContextAttributes:{antialias:!1,preserveDrawingBuffer:!1,powerPreference:"high-performance",failIfMajorPerformanceCaveat:!1,desynchronized:!1,contextType:void 0},scrollZoom:!0,minZoom:-2,maxZoom:22,minPitch:0,maxPitch:60,boxZoom:!0,dragRotate:!0,dragPan:!0,keyboard:!0,doubleClickZoom:!0,touchZoomRotate:!0,touchPitch:!0,cooperativeGestures:!1,trackResize:!0,center:[0,0],elevation:0,zoom:0,bearing:0,pitch:0,roll:0,renderWorldCopies:!0,maxTileCacheSize:null,maxTileCacheZoomLevels:i.a.MAX_TILE_CACHE_ZOOM_LEVELS,transformRequest:null,transformCameraUpdate:null,fadeDuration:300,crossSourceCollisions:!0,clickTolerance:3,localIdeographFontFamily:"sans-serif",pitchWithRotate:!0,rollEnabled:!1,validateStyle:!0,maxCanvasSize:[4096,4096],cancelPendingTileRequestsWhileZooming:!0,centerClampedToGround:!0},LB={showCompass:!0,showZoom:!0,visualizePitch:!1,visualizeRoll:!0};class j1{constructor(s,d,v=!1){this.mousedown=T=>{this.startMove(T,w.mousePos(this.element,T)),w.addEventListener(window,"mousemove",this.mousemove),w.addEventListener(window,"mouseup",this.mouseup)},this.mousemove=T=>{this.move(T,w.mousePos(this.element,T))},this.mouseup=T=>{this._rotatePitchHandler.dragEnd(T),this.offTemp()},this.touchstart=T=>{T.targetTouches.length!==1?this.reset():(this._startPos=this._lastPos=w.touchPos(this.element,T.targetTouches)[0],this.startMove(T,this._startPos),w.addEventListener(window,"touchmove",this.touchmove,{passive:!1}),w.addEventListener(window,"touchend",this.touchend))},this.touchmove=T=>{T.targetTouches.length!==1?this.reset():(this._lastPos=w.touchPos(this.element,T.targetTouches)[0],this.move(T,this._lastPos))},this.touchend=T=>{T.targetTouches.length===0&&this._startPos&&this._lastPos&&this._startPos.dist(this._lastPos)<this._clickTolerance&&this.element.click(),delete this._startPos,delete this._lastPos,this.offTemp()},this.reset=()=>{this._rotatePitchHandler.reset(),delete this._startPos,delete this._lastPos,this.offTemp()},this._clickTolerance=10,this.element=d;let x=new PB;this._rotatePitchHandler=new Dv({clickTolerance:3,move:(T,C)=>{let R=d.getBoundingClientRect(),q=new i.P((R.bottom-R.top)/2,(R.right-R.left)/2);return{bearingDelta:i.cn(new i.P(T.x,C.y),C,q),pitchDelta:v?-.5*(C.y-T.y):void 0}},moveStateManager:x,enable:!0,assignEvents:()=>{}}),this.map=s,w.addEventListener(d,"mousedown",this.mousedown),w.addEventListener(d,"touchstart",this.touchstart,{passive:!1}),w.addEventListener(d,"touchcancel",this.reset)}startMove(s,d){this._rotatePitchHandler.dragStart(s,d),w.disableDrag()}move(s,d){let v=this.map,{bearingDelta:x,pitchDelta:T}=this._rotatePitchHandler.dragMove(s,d)||{};x&&v.setBearing(v.getBearing()+x),T&&v.setPitch(v.getPitch()+T)}off(){let s=this.element;w.removeEventListener(s,"mousedown",this.mousedown),w.removeEventListener(s,"touchstart",this.touchstart,{passive:!1}),w.removeEventListener(window,"touchmove",this.touchmove,{passive:!1}),w.removeEventListener(window,"touchend",this.touchend),w.removeEventListener(s,"touchcancel",this.reset),this.offTemp()}offTemp(){w.enableDrag(),w.removeEventListener(window,"mousemove",this.mousemove),w.removeEventListener(window,"mouseup",this.mouseup),w.removeEventListener(window,"touchmove",this.touchmove,{passive:!1}),w.removeEventListener(window,"touchend",this.touchend)}}let Jo;function pa(S,s,d,v=!1){if(v||!d.getCoveringTilesDetailsProvider().allowWorldCopies())return S==null?void 0:S.wrap();let x=new i.S(S.lng,S.lat);if(S=new i.S(S.lng,S.lat),s){let T=new i.S(S.lng-360,S.lat),C=new i.S(S.lng+360,S.lat),R=d.locationToScreenPoint(S).distSqr(s);d.locationToScreenPoint(T).distSqr(s)<R?S=T:d.locationToScreenPoint(C).distSqr(s)<R&&(S=C)}for(;Math.abs(S.lng-d.center.lng)>180;){let T=d.locationToScreenPoint(S);if(T.x>=0&&T.y>=0&&T.x<=d.width&&T.y<=d.height)break;S.lng>d.center.lng?S.lng-=360:S.lng+=360}return S.lng!==x.lng&&d.isPointOnMapSurface(d.locationToScreenPoint(S))?S:x}let Fx={center:"translate(-50%,-50%)",top:"translate(-50%,0)","top-left":"translate(0,0)","top-right":"translate(-100%,0)",bottom:"translate(-50%,-100%)","bottom-left":"translate(0,-100%)","bottom-right":"translate(-100%,-100%)",left:"translate(0,-50%)",right:"translate(-100%,-50%)"};function Rv(S,s,d){let v=S.classList;for(let x in Fx)v.remove(`maplibregl-${d}-anchor-${x}`);v.add(`maplibregl-${d}-anchor-${s}`)}class jv extends i.E{constructor(s){if(super(),this._onKeyPress=d=>{let v=d.code,x=d.charCode||d.keyCode;v!=="Space"&&v!=="Enter"&&x!==32&&x!==13||this.togglePopup()},this._onMapClick=d=>{let v=d.originalEvent.target,x=this._element;this._popup&&(v===x||x.contains(v))&&this.togglePopup()},this._update=d=>{if(!this._map)return;let v=this._map.loaded()&&!this._map.isMoving();((d==null?void 0:d.type)==="terrain"||(d==null?void 0:d.type)==="render"&&!v)&&this._map.once("render",this._update),this._lngLat=pa(this._lngLat,this._flatPos,this._map.transform),this._flatPos=this._pos=this._map.project(this._lngLat)._add(this._offset),this._map.terrain&&(this._flatPos=this._map.transform.locationToScreenPoint(this._lngLat)._add(this._offset));let x="";this._rotationAlignment==="viewport"||this._rotationAlignment==="auto"?x=`rotateZ(${this._rotation}deg)`:this._rotationAlignment==="map"&&(x=`rotateZ(${this._rotation-this._map.getBearing()}deg)`);let T="";this._pitchAlignment==="viewport"||this._pitchAlignment==="auto"?T="rotateX(0deg)":this._pitchAlignment==="map"&&(T=`rotateX(${this._map.getPitch()}deg)`),this._subpixelPositioning||d&&d.type!=="moveend"||(this._pos=this._pos.round()),w.setTransform(this._element,`${Fx[this._anchor]} translate(${this._pos.x}px, ${this._pos.y}px) ${T} ${x}`),y.frameAsync(new AbortController).then(()=>{this._updateOpacity(d&&d.type==="moveend")}).catch(()=>{})},this._onMove=d=>{if(!this._isDragging){let v=this._clickTolerance||this._map._clickTolerance;this._isDragging=d.point.dist(this._pointerdownPos)>=v}this._isDragging&&(this._pos=d.point.sub(this._positionDelta),this._lngLat=this._map.unproject(this._pos),this.setLngLat(this._lngLat),this._element.style.pointerEvents="none",this._state==="pending"&&(this._state="active",this.fire(new i.l("dragstart"))),this.fire(new i.l("drag")))},this._onUp=()=>{this._element.style.pointerEvents="auto",this._positionDelta=null,this._pointerdownPos=null,this._isDragging=!1,this._map.off("mousemove",this._onMove),this._map.off("touchmove",this._onMove),this._state==="active"&&this.fire(new i.l("dragend")),this._state="inactive"},this._addDragHandler=d=>{this._element.contains(d.originalEvent.target)&&(d.preventDefault(),this._positionDelta=d.point.sub(this._pos).add(this._offset),this._pointerdownPos=d.point,this._state="pending",this._map.on("mousemove",this._onMove),this._map.on("touchmove",this._onMove),this._map.once("mouseup",this._onUp),this._map.once("touchend",this._onUp))},this._anchor=s&&s.anchor||"center",this._color=s&&s.color||"#3FB1CE",this._scale=s&&s.scale||1,this._draggable=s&&s.draggable||!1,this._clickTolerance=s&&s.clickTolerance||0,this._subpixelPositioning=s&&s.subpixelPositioning||!1,this._isDragging=!1,this._state="inactive",this._rotation=s&&s.rotation||0,this._rotationAlignment=s&&s.rotationAlignment||"auto",this._pitchAlignment=s&&s.pitchAlignment&&s.pitchAlignment!=="auto"?s.pitchAlignment:this._rotationAlignment,this.setOpacity(s==null?void 0:s.opacity,s==null?void 0:s.opacityWhenCovered),s&&s.element)this._element=s.element,this._offset=i.P.convert(s&&s.offset||[0,0]);else{this._defaultMarker=!0,this._element=w.create("div");let d=w.createNS("http://www.w3.org/2000/svg","svg"),v=41,x=27;d.setAttributeNS(null,"display","block"),d.setAttributeNS(null,"height",`${v}px`),d.setAttributeNS(null,"width",`${x}px`),d.setAttributeNS(null,"viewBox",`0 0 ${x} ${v}`);let T=w.createNS("http://www.w3.org/2000/svg","g");T.setAttributeNS(null,"stroke","none"),T.setAttributeNS(null,"stroke-width","1"),T.setAttributeNS(null,"fill","none"),T.setAttributeNS(null,"fill-rule","evenodd");let C=w.createNS("http://www.w3.org/2000/svg","g");C.setAttributeNS(null,"fill-rule","nonzero");let R=w.createNS("http://www.w3.org/2000/svg","g");R.setAttributeNS(null,"transform","translate(3.0, 29.0)"),R.setAttributeNS(null,"fill","#000000");let q=[{rx:"10.5",ry:"5.25002273"},{rx:"10.5",ry:"5.25002273"},{rx:"9.5",ry:"4.77275007"},{rx:"8.5",ry:"4.29549936"},{rx:"7.5",ry:"3.81822308"},{rx:"6.5",ry:"3.34094679"},{rx:"5.5",ry:"2.86367051"},{rx:"4.5",ry:"2.38636864"}];for(let ye of q){let Ie=w.createNS("http://www.w3.org/2000/svg","ellipse");Ie.setAttributeNS(null,"opacity","0.04"),Ie.setAttributeNS(null,"cx","10.5"),Ie.setAttributeNS(null,"cy","5.80029008"),Ie.setAttributeNS(null,"rx",ye.rx),Ie.setAttributeNS(null,"ry",ye.ry),R.appendChild(Ie)}let V=w.createNS("http://www.w3.org/2000/svg","g");V.setAttributeNS(null,"fill",this._color);let H=w.createNS("http://www.w3.org/2000/svg","path");H.setAttributeNS(null,"d","M27,13.5 C27,19.074644 20.250001,27.000002 14.75,34.500002 C14.016665,35.500004 12.983335,35.500004 12.25,34.500002 C6.7499993,27.000002 0,19.222562 0,13.5 C0,6.0441559 6.0441559,0 13.5,0 C20.955844,0 27,6.0441559 27,13.5 Z"),V.appendChild(H);let Y=w.createNS("http://www.w3.org/2000/svg","g");Y.setAttributeNS(null,"opacity","0.25"),Y.setAttributeNS(null,"fill","#000000");let W=w.createNS("http://www.w3.org/2000/svg","path");W.setAttributeNS(null,"d","M13.5,0 C6.0441559,0 0,6.0441559 0,13.5 C0,19.222562 6.7499993,27 12.25,34.5 C13,35.522727 14.016664,35.500004 14.75,34.5 C20.250001,27 27,19.074644 27,13.5 C27,6.0441559 20.955844,0 13.5,0 Z M13.5,1 C20.415404,1 26,6.584596 26,13.5 C26,15.898657 24.495584,19.181431 22.220703,22.738281 C19.945823,26.295132 16.705119,30.142167 13.943359,33.908203 C13.743445,34.180814 13.612715,34.322738 13.5,34.441406 C13.387285,34.322738 13.256555,34.180814 13.056641,33.908203 C10.284481,30.127985 7.4148684,26.314159 5.015625,22.773438 C2.6163816,19.232715 1,15.953538 1,13.5 C1,6.584596 6.584596,1 13.5,1 Z"),Y.appendChild(W);let Q=w.createNS("http://www.w3.org/2000/svg","g");Q.setAttributeNS(null,"transform","translate(6.0, 7.0)"),Q.setAttributeNS(null,"fill","#FFFFFF");let ie=w.createNS("http://www.w3.org/2000/svg","g");ie.setAttributeNS(null,"transform","translate(8.0, 8.0)");let ve=w.createNS("http://www.w3.org/2000/svg","circle");ve.setAttributeNS(null,"fill","#000000"),ve.setAttributeNS(null,"opacity","0.25"),ve.setAttributeNS(null,"cx","5.5"),ve.setAttributeNS(null,"cy","5.5"),ve.setAttributeNS(null,"r","5.4999962");let ge=w.createNS("http://www.w3.org/2000/svg","circle");ge.setAttributeNS(null,"fill","#FFFFFF"),ge.setAttributeNS(null,"cx","5.5"),ge.setAttributeNS(null,"cy","5.5"),ge.setAttributeNS(null,"r","5.4999962"),ie.appendChild(ve),ie.appendChild(ge),C.appendChild(R),C.appendChild(V),C.appendChild(Y),C.appendChild(Q),C.appendChild(ie),d.appendChild(C),d.setAttributeNS(null,"height",v*this._scale+"px"),d.setAttributeNS(null,"width",x*this._scale+"px"),this._element.appendChild(d),this._offset=i.P.convert(s&&s.offset||[0,-14])}if(this._element.classList.add("maplibregl-marker"),this._element.addEventListener("dragstart",d=>{d.preventDefault()}),this._element.addEventListener("mousedown",d=>{d.preventDefault()}),Rv(this._element,this._anchor,"marker"),s&&s.className)for(let d of s.className.split(" "))this._element.classList.add(d);this._popup=null}addTo(s){return this.remove(),this._map=s,this._element.hasAttribute("aria-label")||this._element.setAttribute("aria-label",s._getUIString("Marker.Title")),s.getCanvasContainer().appendChild(this._element),s.on("move",this._update),s.on("moveend",this._update),s.on("terrain",this._update),s.on("projectiontransition",this._update),this.setDraggable(this._draggable),this._update(),this._map.on("click",this._onMapClick),this}remove(){return this._opacityTimeout&&(clearTimeout(this._opacityTimeout),delete this._opacityTimeout),this._map&&(this._map.off("click",this._onMapClick),this._map.off("move",this._update),this._map.off("moveend",this._update),this._map.off("terrain",this._update),this._map.off("projectiontransition",this._update),this._map.off("mousedown",this._addDragHandler),this._map.off("touchstart",this._addDragHandler),this._map.off("mouseup",this._onUp),this._map.off("touchend",this._onUp),this._map.off("mousemove",this._onMove),this._map.off("touchmove",this._onMove),delete this._map),w.remove(this._element),this._popup&&this._popup.remove(),this}getLngLat(){return this._lngLat}setLngLat(s){return this._lngLat=i.S.convert(s),this._pos=null,this._popup&&this._popup.setLngLat(this._lngLat),this._update(),this}getElement(){return this._element}setPopup(s){if(this._popup&&(this._popup.remove(),this._popup=null,this._element.removeEventListener("keypress",this._onKeyPress),this._originalTabIndex||this._element.removeAttribute("tabindex")),s){if(!("offset"in s.options)){let x=Math.abs(13.5)/Math.SQRT2;s.options.offset=this._defaultMarker?{top:[0,0],"top-left":[0,0],"top-right":[0,0],bottom:[0,-38.1],"bottom-left":[x,-1*(38.1-13.5+x)],"bottom-right":[-x,-1*(38.1-13.5+x)],left:[13.5,-1*(38.1-13.5)],right:[-13.5,-1*(38.1-13.5)]}:this._offset}this._popup=s,this._originalTabIndex=this._element.getAttribute("tabindex"),this._originalTabIndex||this._element.setAttribute("tabindex","0"),this._element.addEventListener("keypress",this._onKeyPress)}return this}setSubpixelPositioning(s){return this._subpixelPositioning=s,this}getPopup(){return this._popup}togglePopup(){let s=this._popup;return this._element.style.opacity===this._opacityWhenCovered?this:s?(s.isOpen()?s.remove():(s.setLngLat(this._lngLat),s.addTo(this._map)),this):this}_updateOpacity(s=!1){var d,v;let x=(d=this._map)===null||d===void 0?void 0:d.terrain,T=this._map.transform.isLocationOccluded(this._lngLat);if(!x||T){let Q=T?this._opacityWhenCovered:this._opacity;return void(this._element.style.opacity!==Q&&(this._element.style.opacity=Q))}if(s)this._opacityTimeout=null;else{if(this._opacityTimeout)return;this._opacityTimeout=setTimeout(()=>{this._opacityTimeout=null},100)}let C=this._map,R=C.terrain.depthAtPoint(this._pos),q=C.terrain.getElevationForLngLatZoom(this._lngLat,C.transform.tileZoom);if(C.transform.lngLatToCameraDepth(this._lngLat,q)-R<.006)return void(this._element.style.opacity=this._opacity);let V=-this._offset.y/C.transform.pixelsPerMeter,H=Math.sin(C.getPitch()*Math.PI/180)*V,Y=C.terrain.depthAtPoint(new i.P(this._pos.x,this._pos.y-this._offset.y)),W=C.transform.lngLatToCameraDepth(this._lngLat,q+H)-Y>.006;!((v=this._popup)===null||v===void 0)&&v.isOpen()&&W&&this._popup.remove(),this._element.style.opacity=W?this._opacityWhenCovered:this._opacity}getOffset(){return this._offset}setOffset(s){return this._offset=i.P.convert(s),this._update(),this}addClassName(s){this._element.classList.add(s)}removeClassName(s){this._element.classList.remove(s)}toggleClassName(s){return this._element.classList.toggle(s)}setDraggable(s){return this._draggable=!!s,this._map&&(s?(this._map.on("mousedown",this._addDragHandler),this._map.on("touchstart",this._addDragHandler)):(this._map.off("mousedown",this._addDragHandler),this._map.off("touchstart",this._addDragHandler))),this}isDraggable(){return this._draggable}setRotation(s){return this._rotation=s||0,this._update(),this}getRotation(){return this._rotation}setRotationAlignment(s){return this._rotationAlignment=s||"auto",this._update(),this}getRotationAlignment(){return this._rotationAlignment}setPitchAlignment(s){return this._pitchAlignment=s&&s!=="auto"?s:this._rotationAlignment,this._update(),this}getPitchAlignment(){return this._pitchAlignment}setOpacity(s,d){return(this._opacity===void 0||s===void 0&&d===void 0)&&(this._opacity="1",this._opacityWhenCovered="0.2"),s!==void 0&&(this._opacity=s),d!==void 0&&(this._opacityWhenCovered=d),this._map&&this._updateOpacity(!0),this}}let yI={positionOptions:{enableHighAccuracy:!1,maximumAge:0,timeout:6e3},fitBoundsOptions:{maxZoom:15},trackUserLocation:!1,showAccuracyCircle:!0,showUserLocation:!0},qv=0,Qm=!1,q1={maxWidth:100,unit:"metric"};function Ux(S,s,d){let v=d&&d.maxWidth||100,x=S._container.clientHeight/2,T=S._container.clientWidth/2,C=S.unproject([T-v/2,x]),R=S.unproject([T+v/2,x]),q=Math.round(S.project(R).x-S.project(C).x),V=Math.min(v,q,S._container.clientWidth),H=C.distanceTo(R);if(d&&d.unit==="imperial"){let Y=3.2808*H;Y>5280?eg(s,V,Y/5280,S._getUIString("ScaleControl.Miles")):eg(s,V,Y,S._getUIString("ScaleControl.Feet"))}else d&&d.unit==="nautical"?eg(s,V,H/1852,S._getUIString("ScaleControl.NauticalMiles")):H>=1e3?eg(s,V,H/1e3,S._getUIString("ScaleControl.Kilometers")):eg(s,V,H,S._getUIString("ScaleControl.Meters"))}function eg(S,s,d,v){let x=function(T){let C=Math.pow(10,`${Math.floor(T)}`.length-1),R=T/C;return R=R>=10?10:R>=5?5:R>=3?3:R>=2?2:R>=1?1:function(q){let V=Math.pow(10,Math.ceil(-Math.log(q)/Math.LN10));return Math.round(q*V)/V}(R),C*R}(d);S.style.width=s*(x/d)+"px",S.innerHTML=`${x}&nbsp;${v}`}let _I={closeButton:!0,closeOnClick:!0,focusAfterOpen:!0,className:"",maxWidth:"240px",subpixelPositioning:!1,locationOccludedOpacity:void 0},bI=["a[href]","[tabindex]:not([tabindex='-1'])","[contenteditable]:not([contenteditable='false'])","button:not([disabled])","input:not([disabled])","select:not([disabled])","textarea:not([disabled])"].join(", ");function Bx(S){if(S){if(typeof S=="number"){let s=Math.round(Math.abs(S)/Math.SQRT2);return{center:new i.P(0,0),top:new i.P(0,S),"top-left":new i.P(s,s),"top-right":new i.P(-s,s),bottom:new i.P(0,-S),"bottom-left":new i.P(s,-s),"bottom-right":new i.P(-s,-s),left:new i.P(S,0),right:new i.P(-S,0)}}if(S instanceof i.P||Array.isArray(S)){let s=i.P.convert(S);return{center:s,top:s,"top-left":s,"top-right":s,bottom:s,"bottom-left":s,"bottom-right":s,left:s,right:s}}return{center:i.P.convert(S.center||[0,0]),top:i.P.convert(S.top||[0,0]),"top-left":i.P.convert(S["top-left"]||[0,0]),"top-right":i.P.convert(S["top-right"]||[0,0]),bottom:i.P.convert(S.bottom||[0,0]),"bottom-left":i.P.convert(S["bottom-left"]||[0,0]),"bottom-right":i.P.convert(S["bottom-right"]||[0,0]),left:i.P.convert(S.left||[0,0]),right:i.P.convert(S.right||[0,0])}}return Bx(new i.P(0,0))}let xI=a;o.AJAXError=i.cz,o.Event=i.l,o.Evented=i.E,o.LngLat=i.S,o.MercatorCoordinate=i.a1,o.Point=i.P,o.addProtocol=i.cA,o.config=i.a,o.removeProtocol=i.cB,o.AttributionControl=vI,o.BoxZoomHandler=uI,o.CanvasSource=Or,o.CooperativeGesturesHandler=w4,o.DoubleClickZoomHandler=fI,o.DragPanHandler=b4,o.DragRotateHandler=hI,o.EdgeInsets=is,o.FullscreenControl=class extends i.E{constructor(S={}){super(),this._onFullscreenChange=()=>{var s;let d=window.document.fullscreenElement||window.document.mozFullScreenElement||window.document.webkitFullscreenElement||window.document.msFullscreenElement;for(;!((s=d==null?void 0:d.shadowRoot)===null||s===void 0)&&s.fullscreenElement;)d=d.shadowRoot.fullscreenElement;d===this._container!==this._fullscreen&&this._handleFullscreenChange()},this._onClickFullscreen=()=>{this._isFullscreen()?this._exitFullscreen():this._requestFullscreen()},this._fullscreen=!1,S&&S.container&&(S.container instanceof HTMLElement?this._container=S.container:i.w("Full screen control 'container' must be a DOM element.")),"onfullscreenchange"in document?this._fullscreenchange="fullscreenchange":"onmozfullscreenchange"in document?this._fullscreenchange="mozfullscreenchange":"onwebkitfullscreenchange"in document?this._fullscreenchange="webkitfullscreenchange":"onmsfullscreenchange"in document&&(this._fullscreenchange="MSFullscreenChange")}onAdd(S){return this._map=S,this._container||(this._container=this._map.getContainer()),this._controlContainer=w.create("div","maplibregl-ctrl maplibregl-ctrl-group"),this._setupUI(),this._controlContainer}onRemove(){w.remove(this._controlContainer),this._map=null,window.document.removeEventListener(this._fullscreenchange,this._onFullscreenChange)}_setupUI(){let S=this._fullscreenButton=w.create("button","maplibregl-ctrl-fullscreen",this._controlContainer);w.create("span","maplibregl-ctrl-icon",S).setAttribute("aria-hidden","true"),S.type="button",this._updateTitle(),this._fullscreenButton.addEventListener("click",this._onClickFullscreen),window.document.addEventListener(this._fullscreenchange,this._onFullscreenChange)}_updateTitle(){let S=this._getTitle();this._fullscreenButton.setAttribute("aria-label",S),this._fullscreenButton.title=S}_getTitle(){return this._map._getUIString(this._isFullscreen()?"FullscreenControl.Exit":"FullscreenControl.Enter")}_isFullscreen(){return this._fullscreen}_handleFullscreenChange(){this._fullscreen=!this._fullscreen,this._fullscreenButton.classList.toggle("maplibregl-ctrl-shrink"),this._fullscreenButton.classList.toggle("maplibregl-ctrl-fullscreen"),this._updateTitle(),this._fullscreen?(this.fire(new i.l("fullscreenstart")),this._prevCooperativeGesturesEnabled=this._map.cooperativeGestures.isEnabled(),this._map.cooperativeGestures.disable()):(this.fire(new i.l("fullscreenend")),this._prevCooperativeGesturesEnabled&&this._map.cooperativeGestures.enable())}_exitFullscreen(){window.document.exitFullscreen?window.document.exitFullscreen():window.document.mozCancelFullScreen?window.document.mozCancelFullScreen():window.document.msExitFullscreen?window.document.msExitFullscreen():window.document.webkitCancelFullScreen?window.document.webkitCancelFullScreen():this._togglePseudoFullScreen()}_requestFullscreen(){this._container.requestFullscreen?this._container.requestFullscreen():this._container.mozRequestFullScreen?this._container.mozRequestFullScreen():this._container.msRequestFullscreen?this._container.msRequestFullscreen():this._container.webkitRequestFullscreen?this._container.webkitRequestFullscreen():this._togglePseudoFullScreen()}_togglePseudoFullScreen(){this._container.classList.toggle("maplibregl-pseudo-fullscreen"),this._handleFullscreenChange(),this._map.resize()}},o.GeoJSONSource=Ut,o.GeolocateControl=class extends i.E{constructor(S){super(),this._onSuccess=s=>{if(this._map){if(this._isOutOfMapMaxBounds(s))return this._setErrorState(),this.fire(new i.l("outofmaxbounds",s)),this._updateMarker(),void this._finish();if(this.options.trackUserLocation)switch(this._lastKnownPosition=s,this._watchState){case"WAITING_ACTIVE":case"ACTIVE_LOCK":case"ACTIVE_ERROR":this._watchState="ACTIVE_LOCK",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active-error"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-active");break;case"BACKGROUND":case"BACKGROUND_ERROR":this._watchState="BACKGROUND",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-background-error"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-background");break;default:throw new Error(`Unexpected watchState ${this._watchState}`)}this.options.showUserLocation&&this._watchState!=="OFF"&&this._updateMarker(s),this.options.trackUserLocation&&this._watchState!=="ACTIVE_LOCK"||this._updateCamera(s),this.options.showUserLocation&&this._dotElement.classList.remove("maplibregl-user-location-dot-stale"),this.fire(new i.l("geolocate",s)),this._finish()}},this._updateCamera=s=>{let d=new i.S(s.coords.longitude,s.coords.latitude),v=s.coords.accuracy,x=this._map.getBearing(),T=i.e({bearing:x},this.options.fitBoundsOptions),C=Ot.fromLngLat(d,v);this._map.fitBounds(C,T,{geolocateSource:!0})},this._updateMarker=s=>{if(s){let d=new i.S(s.coords.longitude,s.coords.latitude);this._accuracyCircleMarker.setLngLat(d).addTo(this._map),this._userLocationDotMarker.setLngLat(d).addTo(this._map),this._accuracy=s.coords.accuracy,this._updateCircleRadiusIfNeeded()}else this._userLocationDotMarker.remove(),this._accuracyCircleMarker.remove()},this._onUpdate=()=>{this._updateCircleRadiusIfNeeded()},this._onError=s=>{if(this._map){if(s.code===1){this._watchState="OFF",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active-error"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-background"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-background-error"),this._geolocateButton.disabled=!0;let d=this._map._getUIString("GeolocateControl.LocationNotAvailable");this._geolocateButton.title=d,this._geolocateButton.setAttribute("aria-label",d),this._geolocationWatchID!==void 0&&this._clearWatch()}else{if(s.code===3&&Qm)return;this.options.trackUserLocation&&this._setErrorState()}this._watchState!=="OFF"&&this.options.showUserLocation&&this._dotElement.classList.add("maplibregl-user-location-dot-stale"),this.fire(new i.l("error",s)),this._finish()}},this._finish=()=>{this._timeoutId&&clearTimeout(this._timeoutId),this._timeoutId=void 0},this._setupUI=()=>{this._map&&(this._container.addEventListener("contextmenu",s=>s.preventDefault()),this._geolocateButton=w.create("button","maplibregl-ctrl-geolocate",this._container),w.create("span","maplibregl-ctrl-icon",this._geolocateButton).setAttribute("aria-hidden","true"),this._geolocateButton.type="button",this._geolocateButton.disabled=!0)},this._finishSetupUI=s=>{if(this._map){if(s===!1){i.w("Geolocation support is not available so the GeolocateControl will be disabled.");let d=this._map._getUIString("GeolocateControl.LocationNotAvailable");this._geolocateButton.disabled=!0,this._geolocateButton.title=d,this._geolocateButton.setAttribute("aria-label",d)}else{let d=this._map._getUIString("GeolocateControl.FindMyLocation");this._geolocateButton.disabled=!1,this._geolocateButton.title=d,this._geolocateButton.setAttribute("aria-label",d)}this.options.trackUserLocation&&(this._geolocateButton.setAttribute("aria-pressed","false"),this._watchState="OFF"),this.options.showUserLocation&&(this._dotElement=w.create("div","maplibregl-user-location-dot"),this._userLocationDotMarker=new jv({element:this._dotElement}),this._circleElement=w.create("div","maplibregl-user-location-accuracy-circle"),this._accuracyCircleMarker=new jv({element:this._circleElement,pitchAlignment:"map"}),this.options.trackUserLocation&&(this._watchState="OFF"),this._map.on("zoom",this._onUpdate),this._map.on("move",this._onUpdate),this._map.on("rotate",this._onUpdate),this._map.on("pitch",this._onUpdate)),this._geolocateButton.addEventListener("click",()=>this.trigger()),this._setup=!0,this.options.trackUserLocation&&this._map.on("movestart",d=>{let v=(d==null?void 0:d[0])instanceof ResizeObserverEntry;d.geolocateSource||this._watchState!=="ACTIVE_LOCK"||v||this._map.isZooming()||(this._watchState="BACKGROUND",this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-background"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active"),this.fire(new i.l("trackuserlocationend")),this.fire(new i.l("userlocationlostfocus")))})}},this.options=i.e({},yI,S)}onAdd(S){return this._map=S,this._container=w.create("div","maplibregl-ctrl maplibregl-ctrl-group"),this._setupUI(),function(){return i._(this,arguments,void 0,function*(s=!1){if(Jo!==void 0&&!s)return Jo;if(window.navigator.permissions===void 0)return Jo=!!window.navigator.geolocation,Jo;try{Jo=(yield window.navigator.permissions.query({name:"geolocation"})).state!=="denied"}catch(d){Jo=!!window.navigator.geolocation}return Jo})}().then(s=>this._finishSetupUI(s)),this._container}onRemove(){this._geolocationWatchID!==void 0&&(window.navigator.geolocation.clearWatch(this._geolocationWatchID),this._geolocationWatchID=void 0),this.options.showUserLocation&&this._userLocationDotMarker&&this._userLocationDotMarker.remove(),this.options.showAccuracyCircle&&this._accuracyCircleMarker&&this._accuracyCircleMarker.remove(),w.remove(this._container),this._map.off("zoom",this._onUpdate),this._map.off("move",this._onUpdate),this._map.off("rotate",this._onUpdate),this._map.off("pitch",this._onUpdate),this._map=void 0,qv=0,Qm=!1}_isOutOfMapMaxBounds(S){let s=this._map.getMaxBounds(),d=S.coords;return s&&(d.longitude<s.getWest()||d.longitude>s.getEast()||d.latitude<s.getSouth()||d.latitude>s.getNorth())}_setErrorState(){switch(this._watchState){case"WAITING_ACTIVE":this._watchState="ACTIVE_ERROR",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-active-error");break;case"ACTIVE_LOCK":this._watchState="ACTIVE_ERROR",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-active-error"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-waiting");break;case"BACKGROUND":this._watchState="BACKGROUND_ERROR",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-background"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-background-error"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-waiting");break;case"ACTIVE_ERROR":break;default:throw new Error(`Unexpected watchState ${this._watchState}`)}}_updateCircleRadiusIfNeeded(){let S=this._userLocationDotMarker.getLngLat();if(!(this.options.showUserLocation&&this.options.showAccuracyCircle&&this._accuracy&&S))return;let s=this._map.project(S),d=this._map.unproject([s.x+100,s.y]),v=S.distanceTo(d)/100,x=2*this._accuracy/v;this._circleElement.style.width=`${x.toFixed(2)}px`,this._circleElement.style.height=`${x.toFixed(2)}px`}trigger(){if(!this._setup)return i.w("Geolocate control triggered before added to a map"),!1;if(this.options.trackUserLocation){switch(this._watchState){case"OFF":this._watchState="WAITING_ACTIVE",this.fire(new i.l("trackuserlocationstart"));break;case"WAITING_ACTIVE":case"ACTIVE_LOCK":case"ACTIVE_ERROR":case"BACKGROUND_ERROR":qv--,Qm=!1,this._watchState="OFF",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active-error"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-background"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-background-error"),this.fire(new i.l("trackuserlocationend"));break;case"BACKGROUND":this._watchState="ACTIVE_LOCK",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-background"),this._lastKnownPosition&&this._updateCamera(this._lastKnownPosition),this.fire(new i.l("trackuserlocationstart")),this.fire(new i.l("userlocationfocus"));break;default:throw new Error(`Unexpected watchState ${this._watchState}`)}switch(this._watchState){case"WAITING_ACTIVE":this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-waiting"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-active");break;case"ACTIVE_LOCK":this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-active");break;case"OFF":break;default:throw new Error(`Unexpected watchState ${this._watchState}`)}if(this._watchState==="OFF"&&this._geolocationWatchID!==void 0)this._clearWatch();else if(this._geolocationWatchID===void 0){let S;this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-waiting"),this._geolocateButton.setAttribute("aria-pressed","true"),qv++,qv>1?(S={maximumAge:6e5,timeout:0},Qm=!0):(S=this.options.positionOptions,Qm=!1),this._geolocationWatchID=window.navigator.geolocation.watchPosition(this._onSuccess,this._onError,S)}}else window.navigator.geolocation.getCurrentPosition(this._onSuccess,this._onError,this.options.positionOptions),this._timeoutId=setTimeout(this._finish,1e4);return!0}_clearWatch(){window.navigator.geolocation.clearWatch(this._geolocationWatchID),this._geolocationWatchID=void 0,this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-waiting"),this._geolocateButton.setAttribute("aria-pressed","false"),this.options.showUserLocation&&this._updateMarker(null)}},o.GlobeControl=class{constructor(){this._toggleProjection=()=>{var S;let s=(S=this._map.getProjection())===null||S===void 0?void 0:S.type;this._map.setProjection(s!=="mercator"&&s?{type:"mercator"}:{type:"globe"}),this._updateGlobeIcon()},this._updateGlobeIcon=()=>{var S;this._globeButton.classList.remove("maplibregl-ctrl-globe"),this._globeButton.classList.remove("maplibregl-ctrl-globe-enabled"),((S=this._map.getProjection())===null||S===void 0?void 0:S.type)==="globe"?(this._globeButton.classList.add("maplibregl-ctrl-globe-enabled"),this._globeButton.title=this._map._getUIString("GlobeControl.Disable")):(this._globeButton.classList.add("maplibregl-ctrl-globe"),this._globeButton.title=this._map._getUIString("GlobeControl.Enable"))}}onAdd(S){return this._map=S,this._container=w.create("div","maplibregl-ctrl maplibregl-ctrl-group"),this._globeButton=w.create("button","maplibregl-ctrl-globe",this._container),w.create("span","maplibregl-ctrl-icon",this._globeButton).setAttribute("aria-hidden","true"),this._globeButton.type="button",this._globeButton.addEventListener("click",this._toggleProjection),this._updateGlobeIcon(),this._map.on("styledata",this._updateGlobeIcon),this._container}onRemove(){w.remove(this._container),this._map.off("styledata",this._updateGlobeIcon),this._globeButton.removeEventListener("click",this._toggleProjection),this._map=void 0}},o.Hash=Dx,o.ImageSource=ar,o.KeyboardHandler=kx,o.LngLatBounds=Ot,o.LogoControl=S4,o.Map=class extends E4{constructor(S){var s,d;i.cw.mark(i.cx.create);let v=Object.assign(Object.assign(Object.assign({},uc),S),{canvasContextAttributes:Object.assign(Object.assign({},uc.canvasContextAttributes),S.canvasContextAttributes)});if(v.minZoom!=null&&v.maxZoom!=null&&v.minZoom>v.maxZoom)throw new Error("maxZoom must be greater than or equal to minZoom");if(v.minPitch!=null&&v.maxPitch!=null&&v.minPitch>v.maxPitch)throw new Error("maxPitch must be greater than or equal to minPitch");if(v.minPitch!=null&&v.minPitch<0)throw new Error("minPitch must be greater than or equal to 0");if(v.maxPitch!=null&&v.maxPitch>180)throw new Error("maxPitch must be less than or equal to 180");let x=new Fo,T=new Vs;if(v.minZoom!==void 0&&x.setMinZoom(v.minZoom),v.maxZoom!==void 0&&x.setMaxZoom(v.maxZoom),v.minPitch!==void 0&&x.setMinPitch(v.minPitch),v.maxPitch!==void 0&&x.setMaxPitch(v.maxPitch),v.renderWorldCopies!==void 0&&x.setRenderWorldCopies(v.renderWorldCopies),super(x,T,{bearingSnap:v.bearingSnap}),this._idleTriggered=!1,this._crossFadingFactor=1,this._renderTaskQueue=new Fp,this._controls=[],this._mapId=i.a7(),this._contextLost=R=>{R.preventDefault(),this._frameRequest&&(this._frameRequest.abort(),this._frameRequest=null),this.fire(new i.l("webglcontextlost",{originalEvent:R}))},this._contextRestored=R=>{this._setupPainter(),this.resize(),this._update(),this.fire(new i.l("webglcontextrestored",{originalEvent:R}))},this._onMapScroll=R=>{if(R.target===this._container)return this._container.scrollTop=0,this._container.scrollLeft=0,!1},this._onWindowOnline=()=>{this._update()},this._interactive=v.interactive,this._maxTileCacheSize=v.maxTileCacheSize,this._maxTileCacheZoomLevels=v.maxTileCacheZoomLevels,this._canvasContextAttributes=Object.assign({},v.canvasContextAttributes),this._trackResize=v.trackResize===!0,this._bearingSnap=v.bearingSnap,this._centerClampedToGround=v.centerClampedToGround,this._refreshExpiredTiles=v.refreshExpiredTiles===!0,this._fadeDuration=v.fadeDuration,this._crossSourceCollisions=v.crossSourceCollisions===!0,this._collectResourceTiming=v.collectResourceTiming===!0,this._locale=Object.assign(Object.assign({},ml),v.locale),this._clickTolerance=v.clickTolerance,this._overridePixelRatio=v.pixelRatio,this._maxCanvasSize=v.maxCanvasSize,this.transformCameraUpdate=v.transformCameraUpdate,this.cancelPendingTileRequestsWhileZooming=v.cancelPendingTileRequestsWhileZooming===!0,this._imageQueueHandle=z.addThrottleControl(()=>this.isMoving()),this._requestManager=new B(v.transformRequest),typeof v.container=="string"){if(this._container=document.getElementById(v.container),!this._container)throw new Error(`Container '${v.container}' not found.`)}else{if(!(v.container instanceof HTMLElement))throw new Error("Invalid type: 'container' must be a String or HTMLElement.");this._container=v.container}if(v.maxBounds&&this.setMaxBounds(v.maxBounds),this._setupContainer(),this._setupPainter(),this.on("move",()=>this._update(!1)),this.on("moveend",()=>this._update(!1)),this.on("zoom",()=>this._update(!0)),this.on("terrain",()=>{this.painter.terrainFacilitator.dirty=!0,this._update(!0)}),this.once("idle",()=>{this._idleTriggered=!0}),typeof window!="undefined"){addEventListener("online",this._onWindowOnline,!1);let R=!1,q=Xm(V=>{this._trackResize&&!this._removed&&(this.resize(V),this.redraw())},50);this._resizeObserver=new ResizeObserver(V=>{R?q(V):R=!0}),this._resizeObserver.observe(this._container)}this.handlers=new mI(this,v),this._hash=v.hash&&new Dx(typeof v.hash=="string"&&v.hash||void 0).addTo(this),this._hash&&this._hash._onHashChange()||(this.jumpTo({center:v.center,elevation:v.elevation,zoom:v.zoom,bearing:v.bearing,pitch:v.pitch,roll:v.roll}),v.bounds&&(this.resize(),this.fitBounds(v.bounds,i.e({},v.fitBoundsOptions,{duration:0}))));let C=typeof v.style=="string"||((d=(s=v.style)===null||s===void 0?void 0:s.projection)===null||d===void 0?void 0:d.type)!=="globe";this.resize(null,C),this._localIdeographFontFamily=v.localIdeographFontFamily,this._validateStyle=v.validateStyle,v.style&&this.setStyle(v.style,{localIdeographFontFamily:v.localIdeographFontFamily}),v.attributionControl&&this.addControl(new vI(typeof v.attributionControl=="boolean"?void 0:v.attributionControl)),v.maplibreLogo&&this.addControl(new S4,v.logoPosition),this.on("style.load",()=>{if(C||this._resizeTransform(),this.transform.unmodified){let R=i.Q(this.style.stylesheet,["center","zoom","bearing","pitch","roll"]);this.jumpTo(R)}}),this.on("data",R=>{this._update(R.dataType==="style"),this.fire(new i.l(`${R.dataType}data`,R))}),this.on("dataloading",R=>{this.fire(new i.l(`${R.dataType}dataloading`,R))}),this.on("dataabort",R=>{this.fire(new i.l("sourcedataabort",R))})}_getMapId(){return this._mapId}setGlobalStateProperty(S,s){return this.style.setGlobalStateProperty(S,s),this._update(!0)}getGlobalState(){return this.style.getGlobalState()}addControl(S,s){if(s===void 0&&(s=S.getDefaultPosition?S.getDefaultPosition():"top-right"),!S||!S.onAdd)return this.fire(new i.k(new Error("Invalid argument to map.addControl(). Argument must be a control with onAdd and onRemove methods.")));let d=S.onAdd(this);this._controls.push(S);let v=this._controlPositions[s];return s.indexOf("bottom")!==-1?v.insertBefore(d,v.firstChild):v.appendChild(d),this}removeControl(S){if(!S||!S.onRemove)return this.fire(new i.k(new Error("Invalid argument to map.removeControl(). Argument must be a control with onAdd and onRemove methods.")));let s=this._controls.indexOf(S);return s>-1&&this._controls.splice(s,1),S.onRemove(this),this}hasControl(S){return this._controls.indexOf(S)>-1}coveringTiles(S){return Ae(this.transform,S)}calculateCameraOptionsFromTo(S,s,d,v){return v==null&&this.terrain&&(v=this.terrain.getElevationForLngLatZoom(d,this.transform.tileZoom)),super.calculateCameraOptionsFromTo(S,s,d,v)}resize(S,s=!0){let[d,v]=this._containerDimensions(),x=this._getClampedPixelRatio(d,v);if(this._resizeCanvas(d,v,x),this.painter.resize(d,v,x),this.painter.overLimit()){let C=this.painter.context.gl;this._maxCanvasSize=[C.drawingBufferWidth,C.drawingBufferHeight];let R=this._getClampedPixelRatio(d,v);this._resizeCanvas(d,v,R),this.painter.resize(d,v,R)}this._resizeTransform(s);let T=!this._moving;return T&&(this.stop(),this.fire(new i.l("movestart",S)).fire(new i.l("move",S))),this.fire(new i.l("resize",S)),T&&this.fire(new i.l("moveend",S)),this}_resizeTransform(S=!0){var s;let[d,v]=this._containerDimensions();this.transform.resize(d,v,S),(s=this._requestedCameraState)===null||s===void 0||s.resize(d,v,S)}_getClampedPixelRatio(S,s){let{0:d,1:v}=this._maxCanvasSize,x=this.getPixelRatio(),T=S*x,C=s*x;return Math.min(T>d?d/T:1,C>v?v/C:1)*x}getPixelRatio(){var S;return(S=this._overridePixelRatio)!==null&&S!==void 0?S:devicePixelRatio}setPixelRatio(S){this._overridePixelRatio=S,this.resize()}getBounds(){return this.transform.getBounds()}getMaxBounds(){return this.transform.getMaxBounds()}setMaxBounds(S){return this.transform.setMaxBounds(Ot.convert(S)),this._update()}setMinZoom(S){if((S=S==null?-2:S)>=-2&&S<=this.transform.maxZoom)return this.transform.setMinZoom(S),this._update(),this.getZoom()<S&&this.setZoom(S),this;throw new Error("minZoom must be between -2 and the current maxZoom, inclusive")}getMinZoom(){return this.transform.minZoom}setMaxZoom(S){if((S=S==null?22:S)>=this.transform.minZoom)return this.transform.setMaxZoom(S),this._update(),this.getZoom()>S&&this.setZoom(S),this;throw new Error("maxZoom must be greater than the current minZoom")}getMaxZoom(){return this.transform.maxZoom}setMinPitch(S){if((S=S==null?0:S)<0)throw new Error("minPitch must be greater than or equal to 0");if(S>=0&&S<=this.transform.maxPitch)return this.transform.setMinPitch(S),this._update(),this.getPitch()<S&&this.setPitch(S),this;throw new Error("minPitch must be between 0 and the current maxPitch, inclusive")}getMinPitch(){return this.transform.minPitch}setMaxPitch(S){if((S=S==null?60:S)>180)throw new Error("maxPitch must be less than or equal to 180");if(S>=this.transform.minPitch)return this.transform.setMaxPitch(S),this._update(),this.getPitch()>S&&this.setPitch(S),this;throw new Error("maxPitch must be greater than the current minPitch")}getMaxPitch(){return this.transform.maxPitch}getRenderWorldCopies(){return this.transform.renderWorldCopies}setRenderWorldCopies(S){return this.transform.setRenderWorldCopies(S),this._update()}project(S){return this.transform.locationToScreenPoint(i.S.convert(S),this.style&&this.terrain)}unproject(S){return this.transform.screenPointToLocation(i.P.convert(S),this.terrain)}isMoving(){var S;return this._moving||((S=this.handlers)===null||S===void 0?void 0:S.isMoving())}isZooming(){var S;return this._zooming||((S=this.handlers)===null||S===void 0?void 0:S.isZooming())}isRotating(){var S;return this._rotating||((S=this.handlers)===null||S===void 0?void 0:S.isRotating())}_createDelegatedListener(S,s,d){if(S==="mouseenter"||S==="mouseover"){let v=!1;return{layers:s,listener:d,delegates:{mousemove:T=>{let C=s.filter(q=>this.getLayer(q)),R=C.length!==0?this.queryRenderedFeatures(T.point,{layers:C}):[];R.length?v||(v=!0,d.call(this,new Xl(S,this,T.originalEvent,{features:R}))):v=!1},mouseout:()=>{v=!1}}}}if(S==="mouseleave"||S==="mouseout"){let v=!1;return{layers:s,listener:d,delegates:{mousemove:C=>{let R=s.filter(q=>this.getLayer(q));(R.length!==0?this.queryRenderedFeatures(C.point,{layers:R}):[]).length?v=!0:v&&(v=!1,d.call(this,new Xl(S,this,C.originalEvent)))},mouseout:C=>{v&&(v=!1,d.call(this,new Xl(S,this,C.originalEvent)))}}}}{let v=x=>{let T=s.filter(R=>this.getLayer(R)),C=T.length!==0?this.queryRenderedFeatures(x.point,{layers:T}):[];C.length&&(x.features=C,d.call(this,x),delete x.features)};return{layers:s,listener:d,delegates:{[S]:v}}}}_saveDelegatedListener(S,s){this._delegatedListeners=this._delegatedListeners||{},this._delegatedListeners[S]=this._delegatedListeners[S]||[],this._delegatedListeners[S].push(s)}_removeDelegatedListener(S,s,d){if(!this._delegatedListeners||!this._delegatedListeners[S])return;let v=this._delegatedListeners[S];for(let x=0;x<v.length;x++){let T=v[x];if(T.listener===d&&T.layers.length===s.length&&T.layers.every(C=>s.includes(C))){for(let C in T.delegates)this.off(C,T.delegates[C]);return void v.splice(x,1)}}}on(S,s,d){if(d===void 0)return super.on(S,s);let v=typeof s=="string"?[s]:s,x=this._createDelegatedListener(S,v,d);this._saveDelegatedListener(S,x);for(let T in x.delegates)this.on(T,x.delegates[T]);return{unsubscribe:()=>{this._removeDelegatedListener(S,v,d)}}}once(S,s,d){if(d===void 0)return super.once(S,s);let v=typeof s=="string"?[s]:s,x=this._createDelegatedListener(S,v,d);for(let T in x.delegates){let C=x.delegates[T];x.delegates[T]=(...R)=>{this._removeDelegatedListener(S,v,d),C(...R)}}this._saveDelegatedListener(S,x);for(let T in x.delegates)this.once(T,x.delegates[T]);return this}off(S,s,d){return d===void 0?super.off(S,s):(this._removeDelegatedListener(S,typeof s=="string"?[s]:s,d),this)}queryRenderedFeatures(S,s){if(!this.style)return[];let d,v=S instanceof i.P||Array.isArray(S),x=v?S:[[0,0],[this.transform.width,this.transform.height]];if(s=s||(v?{}:S)||{},x instanceof i.P||typeof x[0]=="number")d=[i.P.convert(x)];else{let T=i.P.convert(x[0]),C=i.P.convert(x[1]);d=[T,new i.P(C.x,T.y),C,new i.P(T.x,C.y),T]}return this.style.queryRenderedFeatures(d,s,this.transform)}querySourceFeatures(S,s){return this.style.querySourceFeatures(S,s)}setStyle(S,s){return(s=i.e({},{localIdeographFontFamily:this._localIdeographFontFamily,validate:this._validateStyle},s)).diff!==!1&&s.localIdeographFontFamily===this._localIdeographFontFamily&&this.style&&S?(this._diffStyle(S,s),this):(this._localIdeographFontFamily=s.localIdeographFontFamily,this._updateStyle(S,s))}setTransformRequest(S){return this._requestManager.setTransformRequest(S),this}_getUIString(S){let s=this._locale[S];if(s==null)throw new Error(`Missing UI string '${S}'`);return s}_updateStyle(S,s){var d,v;if(s.transformStyle&&this.style&&!this.style._loaded)return void this.style.once("style.load",()=>this._updateStyle(S,s));let x=this.style&&s.transformStyle?this.style.serialize():void 0;return this.style&&(this.style.setEventedParent(null),this.style._remove(!S)),S?(this.style=new q2(this,s||{}),this.style.setEventedParent(this,{style:this.style}),typeof S=="string"?this.style.loadURL(S,s,x):this.style.loadJSON(S,s,x),this):((v=(d=this.style)===null||d===void 0?void 0:d.projection)===null||v===void 0||v.destroy(),delete this.style,this)}_lazyInitEmptyStyle(){this.style||(this.style=new q2(this,{}),this.style.setEventedParent(this,{style:this.style}),this.style.loadEmpty())}_diffStyle(S,s){if(typeof S=="string"){let d=this._requestManager.transformRequest(S,"Style");i.j(d,new AbortController).then(v=>{this._updateDiff(v.data,s)}).catch(v=>{v&&this.fire(new i.k(v))})}else typeof S=="object"&&this._updateDiff(S,s)}_updateDiff(S,s){try{this.style.setState(S,s)&&this._update(!0)}catch(d){i.w(`Unable to perform style diff: ${d.message||d.error||d}.  Rebuilding the style from scratch.`),this._updateStyle(S,s)}}getStyle(){if(this.style)return this.style.serialize()}isStyleLoaded(){return this.style?this.style.loaded():i.w("There is no style added to the map.")}addSource(S,s){return this._lazyInitEmptyStyle(),this.style.addSource(S,s),this._update(!0)}isSourceLoaded(S){let s=this.style&&this.style.sourceCaches[S];if(s!==void 0)return s.loaded();this.fire(new i.k(new Error(`There is no source with ID '${S}'`)))}setTerrain(S){if(this.style._checkLoaded(),this._terrainDataCallback&&this.style.off("data",this._terrainDataCallback),S){let s=this.style.sourceCaches[S.source];if(!s)throw new Error(`cannot load terrain, because there exists no source with ID: ${S.source}`);this.terrain===null&&s.reload();for(let d in this.style._layers){let v=this.style._layers[d];v.type==="hillshade"&&v.source===S.source&&i.w("You are using the same source for a hillshade layer and for 3D terrain. Please consider using two separate sources to improve rendering quality."),v.type==="color-relief"&&v.source===S.source&&i.w("You are using the same source for a color-relief layer and for 3D terrain. Please consider using two separate sources to improve rendering quality.")}this.terrain=new Kr(this.painter,s,S),this.painter.renderToTexture=new zx(this.painter,this.terrain),this.transform.setMinElevationForCurrentTile(this.terrain.getMinTileElevationForLngLatZoom(this.transform.center,this.transform.tileZoom)),this.transform.setElevation(this.terrain.getElevationForLngLatZoom(this.transform.center,this.transform.tileZoom)),this._terrainDataCallback=d=>{var v;d.dataType==="style"?this.terrain.sourceCache.freeRtt():d.dataType==="source"&&d.tile&&(d.sourceId!==S.source||this._elevationFreeze||(this.transform.setMinElevationForCurrentTile(this.terrain.getMinTileElevationForLngLatZoom(this.transform.center,this.transform.tileZoom)),this._centerClampedToGround&&this.transform.setElevation(this.terrain.getElevationForLngLatZoom(this.transform.center,this.transform.tileZoom))),((v=d.source)===null||v===void 0?void 0:v.type)==="image"?this.terrain.sourceCache.freeRtt():this.terrain.sourceCache.freeRtt(d.tile.tileID))},this.style.on("data",this._terrainDataCallback)}else this.terrain&&this.terrain.sourceCache.destruct(),this.terrain=null,this.painter.renderToTexture&&this.painter.renderToTexture.destruct(),this.painter.renderToTexture=null,this.transform.setMinElevationForCurrentTile(0),this._centerClampedToGround&&this.transform.setElevation(0);return this.fire(new i.l("terrain",{terrain:S})),this}getTerrain(){var S,s;return(s=(S=this.terrain)===null||S===void 0?void 0:S.options)!==null&&s!==void 0?s:null}areTilesLoaded(){let S=this.style&&this.style.sourceCaches;for(let s in S){let d=S[s]._tiles;for(let v in d){let x=d[v];if(x.state!=="loaded"&&x.state!=="errored")return!1}}return!0}removeSource(S){return this.style.removeSource(S),this._update(!0)}getSource(S){return this.style.getSource(S)}setSourceTileLodParams(S,s,d){if(d){let v=this.getSource(d);if(!v)throw new Error(`There is no source with ID "${d}", cannot set LOD parameters`);v.calculateTileZoom=Ee(Math.max(1,S),Math.max(1,s))}else for(let v in this.style.sourceCaches)this.style.sourceCaches[v].getSource().calculateTileZoom=Ee(Math.max(1,S),Math.max(1,s));return this._update(!0),this}refreshTiles(S,s){let d=this.style.sourceCaches[S];if(!d)throw new Error(`There is no source cache with ID "${S}", cannot refresh tile`);s===void 0?d.reload(!0):d.refreshTiles(s.map(v=>new i.a4(v.z,v.x,v.y)))}addImage(S,s,d={}){let{pixelRatio:v=1,sdf:x=!1,stretchX:T,stretchY:C,content:R,textFitWidth:q,textFitHeight:V}=d;if(this._lazyInitEmptyStyle(),!(s instanceof HTMLImageElement||i.b(s))){if(s.width===void 0||s.height===void 0)return this.fire(new i.k(new Error("Invalid arguments to map.addImage(). The second argument must be an `HTMLImageElement`, `ImageData`, `ImageBitmap`, or object with `width`, `height`, and `data` properties with the same format as `ImageData`")));{let{width:H,height:Y,data:W}=s,Q=s;return this.style.addImage(S,{data:new i.R({width:H,height:Y},new Uint8Array(W)),pixelRatio:v,stretchX:T,stretchY:C,content:R,textFitWidth:q,textFitHeight:V,sdf:x,version:0,userImage:Q}),Q.onAdd&&Q.onAdd(this,S),this}}{let{width:H,height:Y,data:W}=y.getImageData(s);this.style.addImage(S,{data:new i.R({width:H,height:Y},W),pixelRatio:v,stretchX:T,stretchY:C,content:R,textFitWidth:q,textFitHeight:V,sdf:x,version:0})}}updateImage(S,s){let d=this.style.getImage(S);if(!d)return this.fire(new i.k(new Error("The map has no image with that id. If you are adding a new image use `map.addImage(...)` instead.")));let v=s instanceof HTMLImageElement||i.b(s)?y.getImageData(s):s,{width:x,height:T,data:C}=v;if(x===void 0||T===void 0)return this.fire(new i.k(new Error("Invalid arguments to map.updateImage(). The second argument must be an `HTMLImageElement`, `ImageData`, `ImageBitmap`, or object with `width`, `height`, and `data` properties with the same format as `ImageData`")));if(x!==d.data.width||T!==d.data.height)return this.fire(new i.k(new Error("The width and height of the updated image must be that same as the previous version of the image")));let R=!(s instanceof HTMLImageElement||i.b(s));return d.data.replace(C,R),this.style.updateImage(S,d),this}getImage(S){return this.style.getImage(S)}hasImage(S){return S?!!this.style.getImage(S):(this.fire(new i.k(new Error("Missing required image id"))),!1)}removeImage(S){this.style.removeImage(S)}loadImage(S){return z.getImage(this._requestManager.transformRequest(S,"Image"),new AbortController)}listImages(){return this.style.listImages()}addLayer(S,s){return this._lazyInitEmptyStyle(),this.style.addLayer(S,s),this._update(!0)}moveLayer(S,s){return this.style.moveLayer(S,s),this._update(!0)}removeLayer(S){return this.style.removeLayer(S),this._update(!0)}getLayer(S){return this.style.getLayer(S)}getLayersOrder(){return this.style.getLayersOrder()}setLayerZoomRange(S,s,d){return this.style.setLayerZoomRange(S,s,d),this._update(!0)}setFilter(S,s,d={}){return this.style.setFilter(S,s,d),this._update(!0)}getFilter(S){return this.style.getFilter(S)}setPaintProperty(S,s,d,v={}){return this.style.setPaintProperty(S,s,d,v),this._update(!0)}getPaintProperty(S,s){return this.style.getPaintProperty(S,s)}setLayoutProperty(S,s,d,v={}){return this.style.setLayoutProperty(S,s,d,v),this._update(!0)}getLayoutProperty(S,s){return this.style.getLayoutProperty(S,s)}setGlyphs(S,s={}){return this._lazyInitEmptyStyle(),this.style.setGlyphs(S,s),this._update(!0)}getGlyphs(){return this.style.getGlyphsUrl()}addSprite(S,s,d={}){return this._lazyInitEmptyStyle(),this.style.addSprite(S,s,d,v=>{v||this._update(!0)}),this}removeSprite(S){return this._lazyInitEmptyStyle(),this.style.removeSprite(S),this._update(!0)}getSprite(){return this.style.getSprite()}setSprite(S,s={}){return this._lazyInitEmptyStyle(),this.style.setSprite(S,s,d=>{d||this._update(!0)}),this}setLight(S,s={}){return this._lazyInitEmptyStyle(),this.style.setLight(S,s),this._update(!0)}getLight(){return this.style.getLight()}setSky(S,s={}){return this._lazyInitEmptyStyle(),this.style.setSky(S,s),this._update(!0)}getSky(){return this.style.getSky()}setFeatureState(S,s){return this.style.setFeatureState(S,s),this._update()}removeFeatureState(S,s){return this.style.removeFeatureState(S,s),this._update()}getFeatureState(S){return this.style.getFeatureState(S)}getContainer(){return this._container}getCanvasContainer(){return this._canvasContainer}getCanvas(){return this._canvas}_containerDimensions(){let S=0,s=0;return this._container&&(S=this._container.clientWidth||400,s=this._container.clientHeight||300),[S,s]}_setupContainer(){let S=this._container;S.classList.add("maplibregl-map");let s=this._canvasContainer=w.create("div","maplibregl-canvas-container",S);this._interactive&&s.classList.add("maplibregl-interactive"),this._canvas=w.create("canvas","maplibregl-canvas",s),this._canvas.addEventListener("webglcontextlost",this._contextLost,!1),this._canvas.addEventListener("webglcontextrestored",this._contextRestored,!1),this._canvas.setAttribute("tabindex",this._interactive?"0":"-1"),this._canvas.setAttribute("aria-label",this._getUIString("Map.Title")),this._canvas.setAttribute("role","region");let d=this._containerDimensions(),v=this._getClampedPixelRatio(d[0],d[1]);this._resizeCanvas(d[0],d[1],v);let x=this._controlContainer=w.create("div","maplibregl-control-container",S),T=this._controlPositions={};["top-left","top-right","bottom-left","bottom-right"].forEach(C=>{T[C]=w.create("div",`maplibregl-ctrl-${C} `,x)}),this._container.addEventListener("scroll",this._onMapScroll,!1)}_resizeCanvas(S,s,d){this._canvas.width=Math.floor(d*S),this._canvas.height=Math.floor(d*s),this._canvas.style.width=`${S}px`,this._canvas.style.height=`${s}px`}_setupPainter(){let S=Object.assign(Object.assign({},this._canvasContextAttributes),{alpha:!0,depth:!0,stencil:!0,premultipliedAlpha:!0}),s=null;this._canvas.addEventListener("webglcontextcreationerror",v=>{s={requestedAttributes:S},v&&(s.statusMessage=v.statusMessage,s.type=v.type)},{once:!0});let d=null;if(d=this._canvasContextAttributes.contextType?this._canvas.getContext(this._canvasContextAttributes.contextType,S):this._canvas.getContext("webgl2",S)||this._canvas.getContext("webgl",S),!d){let v="Failed to initialize WebGL";throw s?(s.message=v,new Error(JSON.stringify(s))):new Error(v)}this.painter=new u4(d,this.transform),E.testSupport(d)}migrateProjection(S,s){super.migrateProjection(S,s),this.painter.transform=S,this.fire(new i.l("projectiontransition",{newProjection:this.style.projection.name}))}loaded(){return!this._styleDirty&&!this._sourcesDirty&&!!this.style&&this.style.loaded()}_update(S){return this.style&&this.style._loaded?(this._styleDirty=this._styleDirty||S,this._sourcesDirty=!0,this.triggerRepaint(),this):this}_requestRenderFrame(S){return this._update(),this._renderTaskQueue.add(S)}_cancelRenderFrame(S){this._renderTaskQueue.remove(S)}_render(S){var s,d,v,x,T;let C=this._idleTriggered?this._fadeDuration:0,R=((s=this.style.projection)===null||s===void 0?void 0:s.transitionState)>0;if(this.painter.context.setDirty(),this.painter.setBaseState(),this._renderTaskQueue.run(S),this._removed)return;let q=!1;if(this.style&&this._styleDirty){this._styleDirty=!1;let Y=this.transform.zoom,W=y.now();this.style.zoomHistory.update(Y,W);let Q=new i.F(Y,{now:W,fadeDuration:C,zoomHistory:this.style.zoomHistory,transition:this.style.getTransition(),globalState:this.style.getGlobalState()}),ie=Q.crossFadingFactor();ie===1&&ie===this._crossFadingFactor||(q=!0,this._crossFadingFactor=ie),this.style.update(Q)}let V=((d=this.style.projection)===null||d===void 0?void 0:d.transitionState)>0!==R;(v=this.style.projection)===null||v===void 0||v.setErrorQueryLatitudeDegrees(this.transform.center.lat),this.transform.setTransitionState((x=this.style.projection)===null||x===void 0?void 0:x.transitionState,(T=this.style.projection)===null||T===void 0?void 0:T.latitudeErrorCorrectionRadians),this.style&&(this._sourcesDirty||V)&&(this._sourcesDirty=!1,this.style._updateSources(this.transform)),this.terrain?(this.terrain.sourceCache.update(this.transform,this.terrain),this.transform.setMinElevationForCurrentTile(this.terrain.getMinTileElevationForLngLatZoom(this.transform.center,this.transform.tileZoom)),!this._elevationFreeze&&this._centerClampedToGround&&this.transform.setElevation(this.terrain.getElevationForLngLatZoom(this.transform.center,this.transform.tileZoom))):(this.transform.setMinElevationForCurrentTile(0),this._centerClampedToGround&&this.transform.setElevation(0)),this._placementDirty=this.style&&this.style._updatePlacement(this.transform,this.showCollisionBoxes,C,this._crossSourceCollisions,V),this.painter.render(this.style,{showTileBoundaries:this.showTileBoundaries,showOverdrawInspector:this._showOverdrawInspector,rotating:this.isRotating(),zooming:this.isZooming(),moving:this.isMoving(),fadeDuration:C,showPadding:this.showPadding}),this.fire(new i.l("render")),this.loaded()&&!this._loaded&&(this._loaded=!0,i.cw.mark(i.cx.load),this.fire(new i.l("load"))),this.style&&(this.style.hasTransitions()||q)&&(this._styleDirty=!0),this.style&&!this._placementDirty&&this.style._releaseSymbolFadeTiles();let H=this._sourcesDirty||this._styleDirty||this._placementDirty;return H||this._repaint?this.triggerRepaint():!this.isMoving()&&this.loaded()&&this.fire(new i.l("idle")),!this._loaded||this._fullyLoaded||H||(this._fullyLoaded=!0,i.cw.mark(i.cx.fullLoad)),this}redraw(){return this.style&&(this._frameRequest&&(this._frameRequest.abort(),this._frameRequest=null),this._render(0)),this}remove(){var S;this._hash&&this._hash.remove();for(let d of this._controls)d.onRemove(this);this._controls=[],this._frameRequest&&(this._frameRequest.abort(),this._frameRequest=null),this._renderTaskQueue.clear(),this.painter.destroy(),this.handlers.destroy(),delete this.handlers,this.setStyle(null),typeof window!="undefined"&&removeEventListener("online",this._onWindowOnline,!1),z.removeThrottleControl(this._imageQueueHandle),(S=this._resizeObserver)===null||S===void 0||S.disconnect();let s=this.painter.context.gl.getExtension("WEBGL_lose_context");s!=null&&s.loseContext&&s.loseContext(),this._canvas.removeEventListener("webglcontextrestored",this._contextRestored,!1),this._canvas.removeEventListener("webglcontextlost",this._contextLost,!1),w.remove(this._canvasContainer),w.remove(this._controlContainer),this._container.removeEventListener("scroll",this._onMapScroll,!1),this._container.classList.remove("maplibregl-map"),i.cw.clearMetrics(),this._removed=!0,this.fire(new i.l("remove"))}triggerRepaint(){this.style&&!this._frameRequest&&(this._frameRequest=new AbortController,y.frame(this._frameRequest,S=>{i.cw.frame(S),this._frameRequest=null;try{this._render(S)}catch(s){if(!i.cy(s)&&!function(d){return d.message===M1}(s))throw s}},()=>{}))}get showTileBoundaries(){return!!this._showTileBoundaries}set showTileBoundaries(S){this._showTileBoundaries!==S&&(this._showTileBoundaries=S,this._update())}get showPadding(){return!!this._showPadding}set showPadding(S){this._showPadding!==S&&(this._showPadding=S,this._update())}get showCollisionBoxes(){return!!this._showCollisionBoxes}set showCollisionBoxes(S){this._showCollisionBoxes!==S&&(this._showCollisionBoxes=S,S?this.style._generateCollisionBoxes():this._update())}get showOverdrawInspector(){return!!this._showOverdrawInspector}set showOverdrawInspector(S){this._showOverdrawInspector!==S&&(this._showOverdrawInspector=S,this._update())}get repaint(){return!!this._repaint}set repaint(S){this._repaint!==S&&(this._repaint=S,this.triggerRepaint())}get vertices(){return!!this._vertices}set vertices(S){this._vertices=S,this._update()}get version(){return T4}getCameraTargetElevation(){return this.transform.elevation}getProjection(){return this.style.getProjection()}setProjection(S){return this._lazyInitEmptyStyle(),this.style.setProjection(S),this._update(!0)}},o.MapMouseEvent=Xl,o.MapTouchEvent=Av,o.MapWheelEvent=lI,o.Marker=jv,o.NavigationControl=class{constructor(S){this._updateZoomButtons=()=>{let s=this._map.getZoom(),d=s===this._map.getMaxZoom(),v=s===this._map.getMinZoom();this._zoomInButton.disabled=d,this._zoomOutButton.disabled=v,this._zoomInButton.setAttribute("aria-disabled",d.toString()),this._zoomOutButton.setAttribute("aria-disabled",v.toString())},this._rotateCompassArrow=()=>{this._compassIcon.style.transform=this.options.visualizePitch&&this.options.visualizeRoll?`scale(${1/Math.pow(Math.cos(this._map.transform.pitchInRadians),.5)}) rotateZ(${-this._map.transform.roll}deg) rotateX(${this._map.transform.pitch}deg) rotateZ(${-this._map.transform.bearing}deg)`:this.options.visualizePitch?`scale(${1/Math.pow(Math.cos(this._map.transform.pitchInRadians),.5)}) rotateX(${this._map.transform.pitch}deg) rotateZ(${-this._map.transform.bearing}deg)`:this.options.visualizeRoll?`rotate(${-this._map.transform.bearing-this._map.transform.roll}deg)`:`rotate(${-this._map.transform.bearing}deg)`},this._setButtonTitle=(s,d)=>{let v=this._map._getUIString(`NavigationControl.${d}`);s.title=v,s.setAttribute("aria-label",v)},this.options=i.e({},LB,S),this._container=w.create("div","maplibregl-ctrl maplibregl-ctrl-group"),this._container.addEventListener("contextmenu",s=>s.preventDefault()),this.options.showZoom&&(this._zoomInButton=this._createButton("maplibregl-ctrl-zoom-in",s=>this._map.zoomIn({},{originalEvent:s})),w.create("span","maplibregl-ctrl-icon",this._zoomInButton).setAttribute("aria-hidden","true"),this._zoomOutButton=this._createButton("maplibregl-ctrl-zoom-out",s=>this._map.zoomOut({},{originalEvent:s})),w.create("span","maplibregl-ctrl-icon",this._zoomOutButton).setAttribute("aria-hidden","true")),this.options.showCompass&&(this._compass=this._createButton("maplibregl-ctrl-compass",s=>{this.options.visualizePitch?this._map.resetNorthPitch({},{originalEvent:s}):this._map.resetNorth({},{originalEvent:s})}),this._compassIcon=w.create("span","maplibregl-ctrl-icon",this._compass),this._compassIcon.setAttribute("aria-hidden","true"))}onAdd(S){return this._map=S,this.options.showZoom&&(this._setButtonTitle(this._zoomInButton,"ZoomIn"),this._setButtonTitle(this._zoomOutButton,"ZoomOut"),this._map.on("zoom",this._updateZoomButtons),this._updateZoomButtons()),this.options.showCompass&&(this._setButtonTitle(this._compass,"ResetBearing"),this.options.visualizePitch&&this._map.on("pitch",this._rotateCompassArrow),this.options.visualizeRoll&&this._map.on("roll",this._rotateCompassArrow),this._map.on("rotate",this._rotateCompassArrow),this._rotateCompassArrow(),this._handler=new j1(this._map,this._compass,this.options.visualizePitch)),this._container}onRemove(){w.remove(this._container),this.options.showZoom&&this._map.off("zoom",this._updateZoomButtons),this.options.showCompass&&(this.options.visualizePitch&&this._map.off("pitch",this._rotateCompassArrow),this.options.visualizeRoll&&this._map.off("roll",this._rotateCompassArrow),this._map.off("rotate",this._rotateCompassArrow),this._handler.off(),delete this._handler),delete this._map}_createButton(S,s){let d=w.create("button",S,this._container);return d.type="button",d.addEventListener("click",s),d}},o.Popup=class extends i.E{constructor(S){super(),this._updateOpacity=()=>{this.options.locationOccludedOpacity!==void 0&&(this._container.style.opacity=this._map.transform.isLocationOccluded(this.getLngLat())?`${this.options.locationOccludedOpacity}`:"")},this.remove=()=>(this._content&&w.remove(this._content),this._container&&(w.remove(this._container),delete this._container),this._map&&(this._map.off("move",this._update),this._map.off("move",this._onClose),this._map.off("click",this._onClose),this._map.off("remove",this.remove),this._map.off("mousemove",this._onMouseMove),this._map.off("mouseup",this._onMouseUp),this._map.off("drag",this._onDrag),this._map._canvasContainer.classList.remove("maplibregl-track-pointer"),delete this._map,this.fire(new i.l("close"))),this),this._onMouseUp=s=>{this._update(s.point)},this._onMouseMove=s=>{this._update(s.point)},this._onDrag=s=>{this._update(s.point)},this._update=s=>{if(!this._map||!this._lngLat&&!this._trackPointer||!this._content)return;if(!this._container){if(this._container=w.create("div","maplibregl-popup",this._map.getContainer()),this._tip=w.create("div","maplibregl-popup-tip",this._container),this._container.appendChild(this._content),this.options.className)for(let C of this.options.className.split(" "))this._container.classList.add(C);this._closeButton&&this._closeButton.setAttribute("aria-label",this._map._getUIString("Popup.Close")),this._trackPointer&&this._container.classList.add("maplibregl-popup-track-pointer")}if(this.options.maxWidth&&this._container.style.maxWidth!==this.options.maxWidth&&(this._container.style.maxWidth=this.options.maxWidth),this._lngLat=pa(this._lngLat,this._flatPos,this._map.transform,this._trackPointer),this._trackPointer&&!s)return;let d=this._flatPos=this._pos=this._trackPointer&&s?s:this._map.project(this._lngLat);this._map.terrain&&(this._flatPos=this._trackPointer&&s?s:this._map.transform.locationToScreenPoint(this._lngLat));let v=this.options.anchor,x=Bx(this.options.offset);if(!v){let C=this._container.offsetWidth,R=this._container.offsetHeight,q;q=d.y+x.bottom.y<R?["top"]:d.y>this._map.transform.height-R?["bottom"]:[],d.x<C/2?q.push("left"):d.x>this._map.transform.width-C/2&&q.push("right"),v=q.length===0?"bottom":q.join("-")}let T=d.add(x[v]);this.options.subpixelPositioning||(T=T.round()),w.setTransform(this._container,`${Fx[v]} translate(${T.x}px,${T.y}px)`),Rv(this._container,v,"popup"),this._updateOpacity()},this._onClose=()=>{this.remove()},this.options=i.e(Object.create(_I),S)}addTo(S){return this._map&&this.remove(),this._map=S,this.options.closeOnClick&&this._map.on("click",this._onClose),this.options.closeOnMove&&this._map.on("move",this._onClose),this._map.on("remove",this.remove),this._update(),this._focusFirstElement(),this._trackPointer?(this._map.on("mousemove",this._onMouseMove),this._map.on("mouseup",this._onMouseUp),this._container&&this._container.classList.add("maplibregl-popup-track-pointer"),this._map._canvasContainer.classList.add("maplibregl-track-pointer")):this._map.on("move",this._update),this.fire(new i.l("open")),this}isOpen(){return!!this._map}getLngLat(){return this._lngLat}setLngLat(S){return this._lngLat=i.S.convert(S),this._pos=null,this._flatPos=null,this._trackPointer=!1,this._update(),this._map&&(this._map.on("move",this._update),this._map.off("mousemove",this._onMouseMove),this._container&&this._container.classList.remove("maplibregl-popup-track-pointer"),this._map._canvasContainer.classList.remove("maplibregl-track-pointer")),this}trackPointer(){return this._trackPointer=!0,this._pos=null,this._flatPos=null,this._update(),this._map&&(this._map.off("move",this._update),this._map.on("mousemove",this._onMouseMove),this._map.on("drag",this._onDrag),this._container&&this._container.classList.add("maplibregl-popup-track-pointer"),this._map._canvasContainer.classList.add("maplibregl-track-pointer")),this}getElement(){return this._container}setText(S){return this.setDOMContent(document.createTextNode(S))}setHTML(S){let s=document.createDocumentFragment(),d=document.createElement("body"),v;for(d.innerHTML=S;v=d.firstChild,v;)s.appendChild(v);return this.setDOMContent(s)}getMaxWidth(){var S;return(S=this._container)===null||S===void 0?void 0:S.style.maxWidth}setMaxWidth(S){return this.options.maxWidth=S,this._update(),this}setDOMContent(S){if(this._content)for(;this._content.hasChildNodes();)this._content.firstChild&&this._content.removeChild(this._content.firstChild);else this._content=w.create("div","maplibregl-popup-content",this._container);return this._content.appendChild(S),this._createCloseButton(),this._update(),this._focusFirstElement(),this}addClassName(S){return this._container&&this._container.classList.add(S),this}removeClassName(S){return this._container&&this._container.classList.remove(S),this}setOffset(S){return this.options.offset=S,this._update(),this}toggleClassName(S){if(this._container)return this._container.classList.toggle(S)}setSubpixelPositioning(S){this.options.subpixelPositioning=S}_createCloseButton(){this.options.closeButton&&(this._closeButton=w.create("button","maplibregl-popup-close-button",this._content),this._closeButton.type="button",this._closeButton.innerHTML="&#215;",this._closeButton.addEventListener("click",this._onClose))}_focusFirstElement(){if(!this.options.focusAfterOpen||!this._container)return;let S=this._container.querySelector(bI);S&&S.focus()}},o.RasterDEMTileSource=jt,o.RasterTileSource=Yt,o.ScaleControl=class{constructor(S){this._onMove=()=>{Ux(this._map,this._container,this.options)},this.setUnit=s=>{this.options.unit=s,Ux(this._map,this._container,this.options)},this.options=Object.assign(Object.assign({},q1),S)}getDefaultPosition(){return"bottom-left"}onAdd(S){return this._map=S,this._container=w.create("div","maplibregl-ctrl maplibregl-ctrl-scale",S.getContainer()),this._map.on("move",this._onMove),this._onMove(),this._container}onRemove(){w.remove(this._container),this._map.off("move",this._onMove),this._map=void 0}},o.ScrollZoomHandler=y4,o.Style=q2,o.TerrainControl=class{constructor(S){this._toggleTerrain=()=>{this._map.getTerrain()?this._map.setTerrain(null):this._map.setTerrain(this.options),this._updateTerrainIcon()},this._updateTerrainIcon=()=>{this._terrainButton.classList.remove("maplibregl-ctrl-terrain"),this._terrainButton.classList.remove("maplibregl-ctrl-terrain-enabled"),this._map.terrain?(this._terrainButton.classList.add("maplibregl-ctrl-terrain-enabled"),this._terrainButton.title=this._map._getUIString("TerrainControl.Disable")):(this._terrainButton.classList.add("maplibregl-ctrl-terrain"),this._terrainButton.title=this._map._getUIString("TerrainControl.Enable"))},this.options=S}onAdd(S){return this._map=S,this._container=w.create("div","maplibregl-ctrl maplibregl-ctrl-group"),this._terrainButton=w.create("button","maplibregl-ctrl-terrain",this._container),w.create("span","maplibregl-ctrl-icon",this._terrainButton).setAttribute("aria-hidden","true"),this._terrainButton.type="button",this._terrainButton.addEventListener("click",this._toggleTerrain),this._updateTerrainIcon(),this._map.on("terrain",this._updateTerrainIcon),this._container}onRemove(){w.remove(this._container),this._map.off("terrain",this._updateTerrainIcon),this._map=void 0}},o.TwoFingersTouchPitchHandler=Lx,o.TwoFingersTouchRotateHandler=Lv,o.TwoFingersTouchZoomHandler=Nx,o.TwoFingersTouchZoomRotateHandler=x4,o.VectorTileSource=Mt,o.VideoSource=jr,o.addSourceType=(S,s)=>i._(void 0,void 0,void 0,function*(){if(Pr(S))throw new Error(`A source type called "${S}" already exists.`);((d,v)=>{br[d]=v})(S,s)}),o.clearPrewarmedResources=function(){let S=Tt;S&&(S.isPreloaded()&&S.numActive()===1?(S.release(qe),Tt=null):console.warn("Could not clear WebWorkers since there are active Map instances that still reference it. The pre-warmed WebWorker pool can only be cleared when all map instances have been removed with map.remove()"))},o.createTileMesh=R2,o.getMaxParallelImageRequests=function(){return i.a.MAX_PARALLEL_IMAGE_REQUESTS},o.getRTLTextPluginStatus=function(){return Ft().getRTLTextPluginStatus()},o.getVersion=function(){return xI},o.getWorkerCount=function(){return lt.workerCount},o.getWorkerUrl=function(){return i.a.WORKER_URL},o.importScriptInWorkers=function(S){return $e().broadcast("IS",S)},o.prewarm=function(){pt().acquire(qe)},o.setMaxParallelImageRequests=function(S){i.a.MAX_PARALLEL_IMAGE_REQUESTS=S},o.setRTLTextPlugin=function(S,s){return Ft().setRTLTextPlugin(S,s)},o.setWorkerCount=function(S){lt.workerCount=S},o.setWorkerUrl=function(S){i.a.WORKER_URL=S}});var n=e;return n})});var gGe=N((QLn,mGe)=>{u();var Qne=1/0,WEr=17976931348623157e292,sGe=NaN,YEr="[object Symbol]",ZEr=/^\s+|\s+$/g,KEr=/^[-+]0x[0-9a-f]+$/i,XEr=/^0b[01]+$/i,JEr=/^0o[0-7]+$/i,QEr=parseInt,eSr=typeof global=="object"&&global&&global.Object===Object&&global,tSr=typeof self=="object"&&self&&self.Object===Object&&self,rSr=eSr||tSr||Function("return this")(),nSr=Object.prototype,oSr=nSr.toString,lGe=rSr.Symbol,iSr=Math.min,uGe=lGe?lGe.prototype:void 0,cGe=uGe?uGe.toString:void 0;function aSr(e){if(typeof e=="string")return e;if(dGe(e))return cGe?cGe.call(e):"";var t=e+"";return t=="0"&&1/e==-Qne?"-0":t}function sSr(e){var t=Math[e];return function(r,n){if(r=hGe(r),n=iSr(cSr(n),292),n){var o=(fGe(r)+"e").split("e"),i=t(o[0]+"e"+(+o[1]+n));return o=(fGe(i)+"e").split("e"),+(o[0]+"e"+(+o[1]-n))}return t(r)}}function pGe(e){var t=typeof e;return!!e&&(t=="object"||t=="function")}function lSr(e){return!!e&&typeof e=="object"}function dGe(e){return typeof e=="symbol"||lSr(e)&&oSr.call(e)==YEr}function uSr(e){if(!e)return e===0?e:0;if(e=hGe(e),e===Qne||e===-Qne){var t=e<0?-1:1;return t*WEr}return e===e?e:0}function cSr(e){var t=uSr(e),r=t%1;return t===t?r?t-r:t:0}function hGe(e){if(typeof e=="number")return e;if(dGe(e))return sGe;if(pGe(e)){var t=typeof e.valueOf=="function"?e.valueOf():e;e=pGe(t)?t+"":t}if(typeof e!="string")return e===0?e:+e;e=e.replace(ZEr,"");var r=XEr.test(e);return r||JEr.test(e)?QEr(e.slice(2),r?2:8):KEr.test(e)?sGe:+e}function fGe(e){return e==null?"":aSr(e)}var pSr=sSr("round");mGe.exports=pSr});var yWe=N((o$n,vWe)=>{"use strict";u();vWe.exports=e=>encodeURIComponent(e).replace(/[!'()*]/g,t=>`%${t.charCodeAt(0).toString(16).toUpperCase()}`)});var EWe=N((a$n,wWe)=>{"use strict";u();var xWe="%[a-f0-9]{2}",_We=new RegExp("("+xWe+")|([^%]+?)","gi"),bWe=new RegExp("("+xWe+")+","gi");function joe(e,t){try{return[decodeURIComponent(e.join(""))]}catch(o){}if(e.length===1)return e;t=t||1;var r=e.slice(0,t),n=e.slice(t);return Array.prototype.concat.call([],joe(r),joe(n))}function Q2r(e){try{return decodeURIComponent(e)}catch(n){for(var t=e.match(_We)||[],r=1;r<t.length;r++)e=joe(t,r).join(""),t=e.match(_We)||[];return e}}function eIr(e){for(var t={"%FE%FF":"\uFFFD\uFFFD","%FF%FE":"\uFFFD\uFFFD"},r=bWe.exec(e);r;){try{t[r[0]]=decodeURIComponent(r[0])}catch(c){var n=Q2r(r[0]);n!==r[0]&&(t[r[0]]=n)}r=bWe.exec(e)}t["%C2"]="\uFFFD";for(var o=Object.keys(t),i=0;i<o.length;i++){var a=o[i];e=e.replace(new RegExp(a,"g"),t[a])}return e}wWe.exports=function(e){if(typeof e!="string")throw new TypeError("Expected `encodedURI` to be of type `string`, got `"+typeof e+"`");try{return e=e.replace(/\+/g," "),decodeURIComponent(e)}catch(t){return eIr(e)}}});var TWe=N((l$n,SWe)=>{"use strict";u();SWe.exports=(e,t)=>{if(!(typeof e=="string"&&typeof t=="string"))throw new TypeError("Expected the arguments to be of type `string`");if(t==="")return[e];let r=e.indexOf(t);return r===-1?[e]:[e.slice(0,r),e.slice(r+t.length)]}});var MWe=N((c$n,IWe)=>{"use strict";u();IWe.exports=function(e,t){for(var r={},n=Object.keys(e),o=Array.isArray(t),i=0;i<n.length;i++){var a=n[i],c=e[a];(o?t.indexOf(a)!==-1:t(a,c,e))&&(r[a]=c)}return r}});var oz=N(Dc=>{"use strict";u();var tIr=yWe(),rIr=EWe(),AWe=TWe(),nIr=MWe(),oIr=e=>e==null,qoe=Symbol("encodeFragmentIdentifier");function iIr(e){switch(e.arrayFormat){case"index":return t=>(r,n)=>{let o=r.length;return n===void 0||e.skipNull&&n===null||e.skipEmptyString&&n===""?r:n===null?[...r,[Xa(t,e),"[",o,"]"].join("")]:[...r,[Xa(t,e),"[",Xa(o,e),"]=",Xa(n,e)].join("")]};case"bracket":return t=>(r,n)=>n===void 0||e.skipNull&&n===null||e.skipEmptyString&&n===""?r:n===null?[...r,[Xa(t,e),"[]"].join("")]:[...r,[Xa(t,e),"[]=",Xa(n,e)].join("")];case"colon-list-separator":return t=>(r,n)=>n===void 0||e.skipNull&&n===null||e.skipEmptyString&&n===""?r:n===null?[...r,[Xa(t,e),":list="].join("")]:[...r,[Xa(t,e),":list=",Xa(n,e)].join("")];case"comma":case"separator":case"bracket-separator":{let t=e.arrayFormat==="bracket-separator"?"[]=":"=";return r=>(n,o)=>o===void 0||e.skipNull&&o===null||e.skipEmptyString&&o===""?n:(o=o===null?"":o,n.length===0?[[Xa(r,e),t,Xa(o,e)].join("")]:[[n,Xa(o,e)].join(e.arrayFormatSeparator)])}default:return t=>(r,n)=>n===void 0||e.skipNull&&n===null||e.skipEmptyString&&n===""?r:n===null?[...r,Xa(t,e)]:[...r,[Xa(t,e),"=",Xa(n,e)].join("")]}}function aIr(e){let t;switch(e.arrayFormat){case"index":return(r,n,o)=>{if(t=/\[(\d*)\]$/.exec(r),r=r.replace(/\[\d*\]$/,""),!t){o[r]=n;return}o[r]===void 0&&(o[r]={}),o[r][t[1]]=n};case"bracket":return(r,n,o)=>{if(t=/(\[\])$/.exec(r),r=r.replace(/\[\]$/,""),!t){o[r]=n;return}if(o[r]===void 0){o[r]=[n];return}o[r]=[].concat(o[r],n)};case"colon-list-separator":return(r,n,o)=>{if(t=/(:list)$/.exec(r),r=r.replace(/:list$/,""),!t){o[r]=n;return}if(o[r]===void 0){o[r]=[n];return}o[r]=[].concat(o[r],n)};case"comma":case"separator":return(r,n,o)=>{let i=typeof n=="string"&&n.includes(e.arrayFormatSeparator),a=typeof n=="string"&&!i&&Fg(n,e).includes(e.arrayFormatSeparator);n=a?Fg(n,e):n;let c=i||a?n.split(e.arrayFormatSeparator).map(h=>Fg(h,e)):n===null?n:Fg(n,e);o[r]=c};case"bracket-separator":return(r,n,o)=>{let i=/(\[\])$/.test(r);if(r=r.replace(/\[\]$/,""),!i){o[r]=n&&Fg(n,e);return}let a=n===null?[]:n.split(e.arrayFormatSeparator).map(c=>Fg(c,e));if(o[r]===void 0){o[r]=a;return}o[r]=[].concat(o[r],a)};default:return(r,n,o)=>{if(o[r]===void 0){o[r]=n;return}o[r]=[].concat(o[r],n)}}}function OWe(e){if(typeof e!="string"||e.length!==1)throw new TypeError("arrayFormatSeparator must be single character string")}function Xa(e,t){return t.encode?t.strict?tIr(e):encodeURIComponent(e):e}function Fg(e,t){return t.decode?rIr(e):e}function PWe(e){return Array.isArray(e)?e.sort():typeof e=="object"?PWe(Object.keys(e)).sort((t,r)=>Number(t)-Number(r)).map(t=>e[t]):e}function DWe(e){let t=e.indexOf("#");return t!==-1&&(e=e.slice(0,t)),e}function sIr(e){let t="",r=e.indexOf("#");return r!==-1&&(t=e.slice(r)),t}function NWe(e){e=DWe(e);let t=e.indexOf("?");return t===-1?"":e.slice(t+1)}function CWe(e,t){return t.parseNumbers&&!Number.isNaN(Number(e))&&typeof e=="string"&&e.trim()!==""?e=Number(e):t.parseBooleans&&e!==null&&(e.toLowerCase()==="true"||e.toLowerCase()==="false")&&(e=e.toLowerCase()==="true"),e}function LWe(e,t){t=Object.assign({decode:!0,sort:!0,arrayFormat:"none",arrayFormatSeparator:",",parseNumbers:!1,parseBooleans:!1},t),OWe(t.arrayFormatSeparator);let r=aIr(t),n=Object.create(null);if(typeof e!="string"||(e=e.trim().replace(/^[?#&]/,""),!e))return n;for(let o of e.split("&")){if(o==="")continue;let[i,a]=AWe(t.decode?o.replace(/\+/g," "):o,"=");a=a===void 0?null:["comma","separator","bracket-separator"].includes(t.arrayFormat)?a:Fg(a,t),r(Fg(i,t),a,n)}for(let o of Object.keys(n)){let i=n[o];if(typeof i=="object"&&i!==null)for(let a of Object.keys(i))i[a]=CWe(i[a],t);else n[o]=CWe(i,t)}return t.sort===!1?n:(t.sort===!0?Object.keys(n).sort():Object.keys(n).sort(t.sort)).reduce((o,i)=>{let a=n[i];return a&&typeof a=="object"&&!Array.isArray(a)?o[i]=PWe(a):o[i]=a,o},Object.create(null))}Dc.extract=NWe;Dc.parse=LWe;Dc.stringify=(e,t)=>{if(!e)return"";t=Object.assign({encode:!0,strict:!0,arrayFormat:"none",arrayFormatSeparator:","},t),OWe(t.arrayFormatSeparator);let r=a=>t.skipNull&&oIr(e[a])||t.skipEmptyString&&e[a]==="",n=iIr(t),o={};for(let a of Object.keys(e))r(a)||(o[a]=e[a]);let i=Object.keys(o);return t.sort!==!1&&i.sort(t.sort),i.map(a=>{let c=e[a];return c===void 0?"":c===null?Xa(a,t):Array.isArray(c)?c.length===0&&t.arrayFormat==="bracket-separator"?Xa(a,t)+"[]":c.reduce(n(a),[]).join("&"):Xa(a,t)+"="+Xa(c,t)}).filter(a=>a.length>0).join("&")};Dc.parseUrl=(e,t)=>{t=Object.assign({decode:!0},t);let[r,n]=AWe(e,"#");return Object.assign({url:r.split("?")[0]||"",query:LWe(NWe(e),t)},t&&t.parseFragmentIdentifier&&n?{fragmentIdentifier:Fg(n,t)}:{})};Dc.stringifyUrl=(e,t)=>{t=Object.assign({encode:!0,strict:!0,[qoe]:!0},t);let r=DWe(e.url).split("?")[0]||"",n=Dc.extract(e.url),o=Dc.parse(n,{sort:!1}),i=Object.assign(o,e.query),a=Dc.stringify(i,t);a&&(a=`?${a}`);let c=sIr(e.url);return e.fragmentIdentifier&&(c=`#${t[qoe]?Xa(e.fragmentIdentifier,t):e.fragmentIdentifier}`),`${r}${a}${c}`};Dc.pick=(e,t,r)=>{r=Object.assign({parseFragmentIdentifier:!0,[qoe]:!1},r);let{url:n,query:o,fragmentIdentifier:i}=Dc.parseUrl(e,r);return Dc.stringifyUrl({url:n,query:nIr(o,t),fragmentIdentifier:i},r)};Dc.exclude=(e,t,r)=>{let n=Array.isArray(t)?o=>!t.includes(o):(o,i)=>!t(o,i);return Dc.pick(e,n,r)}});var aP=N(($$n,ZWe)=>{u();var hIr=ZWe.exports=typeof window!="undefined"&&window.Math==Math?window:typeof self!="undefined"&&self.Math==Math?self:Function("return this")();typeof __g=="number"&&(__g=hIr)});var g0=N((Y$n,KWe)=>{u();var mIr=KWe.exports={version:"2.6.12"};typeof __e=="number"&&(__e=mIr)});var JWe=N((K$n,XWe)=>{u();XWe.exports=function(e){if(typeof e!="function")throw TypeError(e+" is not a function!");return e}});var Boe=N((J$n,QWe)=>{u();var gIr=JWe();QWe.exports=function(e,t,r){if(gIr(e),t===void 0)return e;switch(r){case 1:return function(n){return e.call(t,n)};case 2:return function(n,o){return e.call(t,n,o)};case 3:return function(n,o,i){return e.call(t,n,o,i)}}return function(){return e.apply(t,arguments)}}});var sP=N((eWn,eYe)=>{u();eYe.exports=function(e){return typeof e=="object"?e!==null:typeof e=="function"}});var lP=N((rWn,tYe)=>{u();var vIr=sP();tYe.exports=function(e){if(!vIr(e))throw TypeError(e+" is not an object!");return e}});var sz=N((oWn,rYe)=>{u();rYe.exports=function(e){try{return!!e()}catch(t){return!0}}});var v0=N((aWn,nYe)=>{u();nYe.exports=!sz()(function(){return Object.defineProperty({},"a",{get:function(){return 7}}).a!=7})});var Goe=N((lWn,iYe)=>{u();var oYe=sP(),Voe=aP().document,yIr=oYe(Voe)&&oYe(Voe.createElement);iYe.exports=function(e){return yIr?Voe.createElement(e):{}}});var Hoe=N((cWn,aYe)=>{u();aYe.exports=!v0()&&!sz()(function(){return Object.defineProperty(Goe()("div"),"a",{get:function(){return 7}}).a!=7})});var $oe=N((fWn,sYe)=>{u();var lz=sP();sYe.exports=function(e,t){if(!lz(e))return e;var r,n;if(t&&typeof(r=e.toString)=="function"&&!lz(n=r.call(e))||typeof(r=e.valueOf)=="function"&&!lz(n=r.call(e))||!t&&typeof(r=e.toString)=="function"&&!lz(n=r.call(e)))return n;throw TypeError("Can't convert object to primitive value")}});var Woe=N(uYe=>{u();var lYe=lP(),_Ir=Hoe(),bIr=$oe(),xIr=Object.defineProperty;uYe.f=v0()?Object.defineProperty:function(t,r,n){if(lYe(t),r=bIr(r,!0),lYe(n),_Ir)try{return xIr(t,r,n)}catch(o){}if("get"in n||"set"in n)throw TypeError("Accessors not supported!");return"value"in n&&(t[r]=n.value),t}});var Yoe=N((gWn,cYe)=>{u();cYe.exports=function(e,t){return{enumerable:!(e&1),configurable:!(e&2),writable:!(e&4),value:t}}});var fYe=N((yWn,pYe)=>{u();var wIr=Woe(),EIr=Yoe();pYe.exports=v0()?function(e,t,r){return wIr.f(e,t,EIr(1,r))}:function(e,t,r){return e[t]=r,e}});var uz=N((bWn,dYe)=>{u();var SIr={}.hasOwnProperty;dYe.exports=function(e,t){return SIr.call(e,t)}});var GS=N((wWn,mYe)=>{u();var cz=aP(),Zoe=g0(),hYe=Boe(),TIr=fYe(),IIr=uz(),pz="prototype",pu=function(e,t,r){var n=e&pu.F,o=e&pu.G,i=e&pu.S,a=e&pu.P,c=e&pu.B,h=e&pu.W,m=o?Zoe:Zoe[t]||(Zoe[t]={}),y=m[pz],w=o?cz:i?cz[t]:(cz[t]||{})[pz],E,A,P;o&&(r=t);for(E in r)A=!n&&w&&w[E]!==void 0,!(A&&IIr(m,E))&&(P=A?w[E]:r[E],m[E]=o&&typeof w[E]!="function"?r[E]:c&&A?hYe(P,cz):h&&w[E]==P?function(j){var D=function(L,z,B){if(this instanceof j){switch(arguments.length){case 0:return new j;case 1:return new j(L);case 2:return new j(L,z)}return new j(L,z,B)}return j.apply(this,arguments)};return D[pz]=j[pz],D}(P):a&&typeof P=="function"?hYe(Function.call,P):P,a&&((m.virtual||(m.virtual={}))[E]=P,e&pu.R&&y&&!y[E]&&TIr(y,E,P)))};pu.F=1;pu.G=2;pu.S=4;pu.P=8;pu.B=16;pu.W=32;pu.U=64;pu.R=128;mYe.exports=pu});var vYe=N((SWn,gYe)=>{u();var MIr={}.toString;gYe.exports=function(e){return MIr.call(e).slice(8,-1)}});var Koe=N((IWn,yYe)=>{u();var CIr=vYe();yYe.exports=Object("z").propertyIsEnumerable(0)?Object:function(e){return CIr(e)=="String"?e.split(""):Object(e)}});var Xoe=N((CWn,_Ye)=>{u();_Ye.exports=function(e){if(e==null)throw TypeError("Can't call method on  "+e);return e}});var uP=N((OWn,bYe)=>{u();var AIr=Koe(),OIr=Xoe();bYe.exports=function(e){return AIr(OIr(e))}});var Joe=N((DWn,xYe)=>{u();var PIr=Math.ceil,DIr=Math.floor;xYe.exports=function(e){return isNaN(e=+e)?0:(e>0?DIr:PIr)(e)}});var EYe=N((LWn,wYe)=>{u();var NIr=Joe(),LIr=Math.min;wYe.exports=function(e){return e>0?LIr(NIr(e),9007199254740991):0}});var TYe=N((RWn,SYe)=>{u();var kIr=Joe(),RIr=Math.max,jIr=Math.min;SYe.exports=function(e,t){return e=kIr(e),e<0?RIr(e+t,0):jIr(e,t)}});var MYe=N((qWn,IYe)=>{u();var qIr=uP(),zIr=EYe(),FIr=TYe();IYe.exports=function(e){return function(t,r,n){var o=qIr(t),i=zIr(o.length),a=FIr(n,i),c;if(e&&r!=r){for(;i>a;)if(c=o[a++],c!=c)return!0}else for(;i>a;a++)if((e||a in o)&&o[a]===r)return e||a||0;return!e&&-1}}});var AYe=N((FWn,CYe)=>{u();CYe.exports=!0});var LYe=N((BWn,NYe)=>{u();var UIr=g0(),OYe=aP(),PYe="__core-js_shared__",DYe=OYe[PYe]||(OYe[PYe]={});(NYe.exports=function(e,t){return DYe[e]||(DYe[e]=t!==void 0?t:{})})("versions",[]).push({version:UIr.version,mode:AYe()?"pure":"global",copyright:"\xA9 2020 Denis Pushkarev (zloirock.ru)"})});var RYe=N((GWn,kYe)=>{u();var BIr=0,VIr=Math.random();kYe.exports=function(e){return"Symbol(".concat(e===void 0?"":e,")_",(++BIr+VIr).toString(36))}});var Qoe=N(($Wn,qYe)=>{u();var jYe=LYe()("keys"),GIr=RYe();qYe.exports=function(e){return jYe[e]||(jYe[e]=GIr(e))}});var UYe=N((YWn,FYe)=>{u();var zYe=uz(),HIr=uP(),$Ir=MYe()(!1),WIr=Qoe()("IE_PROTO");FYe.exports=function(e,t){var r=HIr(e),n=0,o=[],i;for(i in r)i!=WIr&&zYe(r,i)&&o.push(i);for(;t.length>n;)zYe(r,i=t[n++])&&(~$Ir(o,i)||o.push(i));return o}});var eie=N((KWn,BYe)=>{u();BYe.exports="constructor,hasOwnProperty,isPrototypeOf,propertyIsEnumerable,toLocaleString,toString,valueOf".split(",")});var fz=N((JWn,VYe)=>{u();var YIr=UYe(),ZIr=eie();VYe.exports=Object.keys||function(t){return YIr(t,ZIr)}});var HYe=N(GYe=>{u();GYe.f=Object.getOwnPropertySymbols});var dz=N($Ye=>{u();$Ye.f={}.propertyIsEnumerable});var YYe=N((oYn,WYe)=>{u();var KIr=Xoe();WYe.exports=function(e){return Object(KIr(e))}});var XYe=N((aYn,KYe)=>{"use strict";u();var XIr=v0(),ZYe=fz(),JIr=HYe(),QIr=dz(),eMr=YYe(),tMr=Koe(),hz=Object.assign;KYe.exports=!hz||sz()(function(){var e={},t={},r=Symbol(),n="abcdefghijklmnopqrst";return e[r]=7,n.split("").forEach(function(o){t[o]=o}),hz({},e)[r]!=7||Object.keys(hz({},t)).join("")!=n})?function(t,r){for(var n=eMr(t),o=arguments.length,i=1,a=JIr.f,c=QIr.f;o>i;)for(var h=tMr(arguments[i++]),m=a?ZYe(h).concat(a(h)):ZYe(h),y=m.length,w=0,E;y>w;)E=m[w++],(!XIr||c.call(h,E))&&(n[E]=h[E]);return n}:hz});var JYe=N(()=>{u();var tie=GS();tie(tie.S+tie.F,"Object",{assign:XYe()})});var eZe=N((pYn,QYe)=>{u();JYe();QYe.exports=g0().Object.assign});var rZe=N((mYn,tZe)=>{u();var rMr=Woe(),nMr=lP(),oMr=fz();tZe.exports=v0()?Object.defineProperties:function(t,r){nMr(t);for(var n=oMr(r),o=n.length,i=0,a;o>i;)rMr.f(t,a=n[i++],r[a]);return t}});var iZe=N((vYn,oZe)=>{u();var nZe=aP().document;oZe.exports=nZe&&nZe.documentElement});var lZe=N((_Yn,sZe)=>{u();var iMr=lP(),aMr=rZe(),aZe=eie(),sMr=Qoe()("IE_PROTO"),nie=function(){},oie="prototype",mz=function(){var e=Goe()("iframe"),t=aZe.length,r="<",n=">",o;for(e.style.display="none",iZe().appendChild(e),e.src="javascript:",o=e.contentWindow.document,o.open(),o.write(r+"script"+n+"document.F=Object"+r+"/script"+n),o.close(),mz=o.F;t--;)delete mz[oie][aZe[t]];return mz()};sZe.exports=Object.create||function(t,r){var n;return t!==null?(nie[oie]=iMr(t),n=new nie,nie[oie]=null,n[sMr]=t):n=mz(),r===void 0?n:aMr(n,r)}});var cZe=N(()=>{u();var uZe=GS();uZe(uZe.S,"Object",{create:lZe()})});var fZe=N((SYn,pZe)=>{u();cZe();var lMr=g0().Object;pZe.exports=function(t,r){return lMr.create(t,r)}});var mZe=N(hZe=>{u();var uMr=dz(),cMr=Yoe(),pMr=uP(),fMr=$oe(),dMr=uz(),hMr=Hoe(),dZe=Object.getOwnPropertyDescriptor;hZe.f=v0()?dZe:function(t,r){if(t=pMr(t),r=fMr(r,!0),hMr)try{return dZe(t,r)}catch(n){}if(dMr(t,r))return cMr(!uMr.f.call(t,r),t[r])}});var yZe=N((CYn,vZe)=>{u();var mMr=sP(),gMr=lP(),gZe=function(e,t){if(gMr(e),!mMr(t)&&t!==null)throw TypeError(t+": can't set as prototype!")};vZe.exports={set:Object.setPrototypeOf||("__proto__"in{}?function(e,t,r){try{r=Boe()(Function.call,mZe().f(Object.prototype,"__proto__").set,2),r(e,[]),t=!(e instanceof Array)}catch(n){t=!0}return function(o,i){return gZe(o,i),t?o.__proto__=i:r(o,i),o}}({},!1):void 0),check:gZe}});var bZe=N(()=>{u();var _Ze=GS();_Ze(_Ze.S,"Object",{setPrototypeOf:yZe().set})});var wZe=N((NYn,xZe)=>{u();bZe();xZe.exports=g0().Object.setPrototypeOf});var ko=N((BYn,vz)=>{u();(function(){"use strict";var e={}.hasOwnProperty;function t(){for(var o="",i=0;i<arguments.length;i++){var a=arguments[i];a&&(o=n(o,r(a)))}return o}function r(o){if(typeof o=="string"||typeof o=="number")return o;if(typeof o!="object")return"";if(Array.isArray(o))return t.apply(null,o);if(o.toString!==Object.prototype.toString&&!o.toString.toString().includes("[native code]"))return o.toString();var i="";for(var a in o)e.call(o,a)&&o[a]&&(i=n(i,a));return i}function n(o,i){return i?o?o+" "+i:o+i:o}typeof vz!="undefined"&&vz.exports?(t.default=t,vz.exports=t):typeof define=="function"&&typeof define.amd=="object"&&define.amd?define("classnames",[],function(){return t}):window.classNames=t})()});var yz=N((YYn,SZe)=>{"use strict";u();var vMr=function(e,t,r,n,o,i,a,c){if(!e){var h;if(t===void 0)h=new Error("Minified exception occurred; use the non-minified dev environment for the full error message and additional helpful warnings.");else{var m=[r,n,o,i,a,c],y=0;h=new Error(t.replace(/%s/g,function(){return m[y++]})),h.name="Invariant Violation"}throw h.framesToPop=1,h}};SZe.exports=vMr});var uie=N(lie=>{"use strict";u();Object.defineProperty(lie,"__esModule",{value:!0});function CZe(){var e=this.constructor.getDerivedStateFromProps(this.props,this.state);e!=null&&this.setState(e)}function AZe(e){function t(r){var n=this.constructor.getDerivedStateFromProps(e,r);return n!=null?n:null}this.setState(t.bind(this))}function OZe(e,t){try{var r=this.props,n=this.state;this.props=e,this.state=t,this.__reactInternalSnapshotFlag=!0,this.__reactInternalSnapshot=this.getSnapshotBeforeUpdate(r,n)}finally{this.props=r,this.state=n}}CZe.__suppressDeprecationWarning=!0;AZe.__suppressDeprecationWarning=!0;OZe.__suppressDeprecationWarning=!0;function _Mr(e){var t=e.prototype;if(!t||!t.isReactComponent)throw new Error("Can only polyfill class components");if(typeof e.getDerivedStateFromProps!="function"&&typeof t.getSnapshotBeforeUpdate!="function")return e;var r=null,n=null,o=null;if(typeof t.componentWillMount=="function"?r="componentWillMount":typeof t.UNSAFE_componentWillMount=="function"&&(r="UNSAFE_componentWillMount"),typeof t.componentWillReceiveProps=="function"?n="componentWillReceiveProps":typeof t.UNSAFE_componentWillReceiveProps=="function"&&(n="UNSAFE_componentWillReceiveProps"),typeof t.componentWillUpdate=="function"?o="componentWillUpdate":typeof t.UNSAFE_componentWillUpdate=="function"&&(o="UNSAFE_componentWillUpdate"),r!==null||n!==null||o!==null){var i=e.displayName||e.name,a=typeof e.getDerivedStateFromProps=="function"?"getDerivedStateFromProps()":"getSnapshotBeforeUpdate()";throw Error(`Unsafe legacy lifecycles will not be called for components using new component APIs.

`+i+" uses "+a+" but also contains the following legacy lifecycles:"+(r!==null?`
  `+r:"")+(n!==null?`
  `+n:"")+(o!==null?`
  `+o:"")+`

The above lifecycles should be removed. Learn more about this warning here:
https://fb.me/react-async-component-lifecycle-hooks`)}if(typeof e.getDerivedStateFromProps=="function"&&(t.componentWillMount=CZe,t.componentWillReceiveProps=AZe),typeof t.getSnapshotBeforeUpdate=="function"){if(typeof t.componentDidUpdate!="function")throw new Error("Cannot polyfill getSnapshotBeforeUpdate() for components that do not define componentDidUpdate() on the prototype");t.componentWillUpdate=OZe;var c=t.componentDidUpdate;t.componentDidUpdate=function(m,y,w){var E=this.__reactInternalSnapshotFlag?this.__reactInternalSnapshot:w;c.call(this,m,y,E)}}return e}lie.polyfill=_Mr});var cie=N((xZn,NZe)=>{u();var xMr=v0(),wMr=fz(),EMr=uP(),SMr=dz().f;NZe.exports=function(e){return function(t){for(var r=EMr(t),n=wMr(r),o=n.length,i=0,a=[],c;o>i;)c=n[i++],(!xMr||SMr.call(r,c))&&a.push(e?[c,r[c]]:r[c]);return a}}});var kZe=N(()=>{u();var LZe=GS(),TMr=cie()(!0);LZe(LZe.S,"Object",{entries:function(t){return TMr(t)}})});var jZe=N((IZn,RZe)=>{u();kZe();RZe.exports=g0().Object.entries});var pie=N((CZn,qZe)=>{u();qZe.exports=jZe()});var Ez=N((wz,VZe)=>{"use strict";u();Object.defineProperty(wz,"__esModule",{value:!0});wz.default=LMr;function LMr(e){function t(n,o,i,a,c,h){var m=a||"<<anonymous>>",y=h||i;if(o[i]==null)return n?new Error("Required "+c+" `"+y+"` was not specified "+("in `"+m+"`.")):null;for(var w=arguments.length,E=Array(w>6?w-6:0),A=6;A<w;A++)E[A-6]=arguments[A];return e.apply(void 0,[o,i,m,c,y].concat(E))}var r=t.bind(null,!1);return r.isRequired=t.bind(null,!0),r}VZe.exports=wz.default});var HZe=N(()=>{u();var GZe=GS(),kMr=cie()(!1);GZe(GZe.S,"Object",{values:function(t){return kMr(t)}})});var WZe=N((BZn,$Ze)=>{u();HZe();$Ze.exports=g0().Object.values});var ZZe=N((GZn,YZe)=>{u();YZe.exports=WZe()});var JZe=N(di=>{"use strict";u();var ol=typeof Symbol=="function"&&Symbol.for,gie=ol?Symbol.for("react.element"):60103,vie=ol?Symbol.for("react.portal"):60106,Sz=ol?Symbol.for("react.fragment"):60107,Tz=ol?Symbol.for("react.strict_mode"):60108,Iz=ol?Symbol.for("react.profiler"):60114,Mz=ol?Symbol.for("react.provider"):60109,Cz=ol?Symbol.for("react.context"):60110,yie=ol?Symbol.for("react.async_mode"):60111,Az=ol?Symbol.for("react.concurrent_mode"):60111,Oz=ol?Symbol.for("react.forward_ref"):60112,Pz=ol?Symbol.for("react.suspense"):60113,qMr=ol?Symbol.for("react.suspense_list"):60120,Dz=ol?Symbol.for("react.memo"):60115,Nz=ol?Symbol.for("react.lazy"):60116,zMr=ol?Symbol.for("react.block"):60121,FMr=ol?Symbol.for("react.fundamental"):60117,UMr=ol?Symbol.for("react.responder"):60118,BMr=ol?Symbol.for("react.scope"):60119;function Ep(e){if(typeof e=="object"&&e!==null){var t=e.$$typeof;switch(t){case gie:switch(e=e.type,e){case yie:case Az:case Sz:case Iz:case Tz:case Pz:return e;default:switch(e=e&&e.$$typeof,e){case Cz:case Oz:case Nz:case Dz:case Mz:return e;default:return t}}case vie:return t}}}function XZe(e){return Ep(e)===Az}di.AsyncMode=yie;di.ConcurrentMode=Az;di.ContextConsumer=Cz;di.ContextProvider=Mz;di.Element=gie;di.ForwardRef=Oz;di.Fragment=Sz;di.Lazy=Nz;di.Memo=Dz;di.Portal=vie;di.Profiler=Iz;di.StrictMode=Tz;di.Suspense=Pz;di.isAsyncMode=function(e){return XZe(e)||Ep(e)===yie};di.isConcurrentMode=XZe;di.isContextConsumer=function(e){return Ep(e)===Cz};di.isContextProvider=function(e){return Ep(e)===Mz};di.isElement=function(e){return typeof e=="object"&&e!==null&&e.$$typeof===gie};di.isForwardRef=function(e){return Ep(e)===Oz};di.isFragment=function(e){return Ep(e)===Sz};di.isLazy=function(e){return Ep(e)===Nz};di.isMemo=function(e){return Ep(e)===Dz};di.isPortal=function(e){return Ep(e)===vie};di.isProfiler=function(e){return Ep(e)===Iz};di.isStrictMode=function(e){return Ep(e)===Tz};di.isSuspense=function(e){return Ep(e)===Pz};di.isValidElementType=function(e){return typeof e=="string"||typeof e=="function"||e===Sz||e===Az||e===Iz||e===Tz||e===Pz||e===qMr||typeof e=="object"&&e!==null&&(e.$$typeof===Nz||e.$$typeof===Dz||e.$$typeof===Mz||e.$$typeof===Cz||e.$$typeof===Oz||e.$$typeof===FMr||e.$$typeof===UMr||e.$$typeof===BMr||e.$$typeof===zMr)};di.typeOf=Ep});var eKe=N((QZn,QZe)=>{"use strict";u();QZe.exports=JZe()});var $u=N((Lz,rKe)=>{"use strict";u();Object.defineProperty(Lz,"__esModule",{value:!0});var VMr=ke(),GMr=tKe(VMr),HMr=eKe(),$Mr=Ez(),WMr=tKe($Mr);function tKe(e){return e&&e.__esModule?e:{default:e}}function YMr(e,t,r,n,o){var i=e[t];return GMr.default.isValidElement(i)?new Error("Invalid "+n+" `"+o+"` of type ReactElement "+("supplied to `"+r+"`,expected an element type (a string ")+", component class, or function component)."):(0,HMr.isValidElementType)(i)?null:new Error("Invalid "+n+" `"+o+"` of value `"+i+"` "+("supplied to `"+r+"`, expected an element type (a string ")+", component class, or function component).")}Lz.default=(0,WMr.default)(YMr);rKe.exports=Lz.default});var lKe=N((qz,sKe)=>{"use strict";u();Object.defineProperty(qz,"__esModule",{value:!0});qz.default=nCr;var eCr=Ez(),tCr=rCr(eCr);function rCr(e){return e&&e.__esModule?e:{default:e}}function nCr(){for(var e=arguments.length,t=Array(e),r=0;r<e;r++)t[r]=arguments[r];function n(){for(var o=arguments.length,i=Array(o),a=0;a<o;a++)i[a]=arguments[a];var c=null;return t.forEach(function(h){if(c==null){var m=h.apply(void 0,i);m!=null&&(c=m)}}),c}return(0,tCr.default)(n)}sKe.exports=qz.default});var ib=N((IKn,fKe)=>{"use strict";u();var iCr=function(){};fKe.exports=iCr});var Ja=N((RKn,dP)=>{u();function uCr(e){return e&&e.__esModule?e:{default:e}}dP.exports=uCr,dP.exports.__esModule=!0,dP.exports.default=dP.exports});var mKe=N((Bz,hKe)=>{"use strict";u();Bz.__esModule=!0;Bz.default=pCr;var cCr=/-(.)/g;function pCr(e){return e.replace(cCr,function(t,r){return r.toUpperCase()})}hKe.exports=Bz.default});var Tie=N((Vz,gKe)=>{"use strict";u();var fCr=Ja();Vz.__esModule=!0;Vz.default=mCr;var dCr=fCr(mKe()),hCr=/^-ms-/;function mCr(e){return(0,dCr.default)(e.replace(hCr,"ms-"))}gKe.exports=Vz.default});var yKe=N((Gz,vKe)=>{"use strict";u();Gz.__esModule=!0;Gz.default=vCr;var gCr=/([A-Z])/g;function vCr(e){return e.replace(gCr,"-$1").toLowerCase()}vKe.exports=Gz.default});var bKe=N((Hz,_Ke)=>{"use strict";u();var yCr=Ja();Hz.__esModule=!0;Hz.default=xCr;var _Cr=yCr(yKe()),bCr=/^ms-/;function xCr(e){return(0,_Cr.default)(e).replace(bCr,"-ms-")}_Ke.exports=Hz.default});var wKe=N(($z,xKe)=>{"use strict";u();var wCr=Ja();$z.__esModule=!0;$z.default=ICr;var ECr=wCr(Tie()),SCr=/^(top|right|bottom|left)$/,TCr=/^([+-]?(?:\d*\.|)\d+(?:[eE][+-]?\d+|))(?!px)[a-z%]+$/i;function ICr(e){if(!e)throw new TypeError("No Element passed to `getComputedStyle()`");var t=e.ownerDocument;return"defaultView"in t?t.defaultView.opener?e.ownerDocument.defaultView.getComputedStyle(e,null):window.getComputedStyle(e,null):{getPropertyValue:function(n){var o=e.style;n=(0,ECr.default)(n),n=="float"&&(n="styleFloat");var i=e.currentStyle[n]||null;if(i==null&&o&&o[n]&&(i=o[n]),TCr.test(i)&&!SCr.test(n)){var a=o.left,c=e.runtimeStyle,h=c&&c.left;h&&(c.left=e.currentStyle.left),o.left=n==="fontSize"?"1em":i,i=o.pixelLeft+"px",o.left=a,h&&(c.left=h)}return i}}}xKe.exports=$z.default});var SKe=N((Wz,EKe)=>{"use strict";u();Wz.__esModule=!0;Wz.default=MCr;function MCr(e,t){return"removeProperty"in e.style?e.style.removeProperty(t):e.style.removeAttribute(t)}EKe.exports=Wz.default});var Qh=N((hP,TKe)=>{"use strict";u();hP.__esModule=!0;hP.default=void 0;var CCr=!!(typeof window!="undefined"&&window.document&&window.document.createElement);hP.default=CCr;TKe.exports=hP.default});var PKe=N(_o=>{"use strict";u();var ACr=Ja();_o.__esModule=!0;_o.default=_o.animationEnd=_o.animationDelay=_o.animationTiming=_o.animationDuration=_o.animationName=_o.transitionEnd=_o.transitionDuration=_o.transitionDelay=_o.transitionTiming=_o.transitionProperty=_o.transform=void 0;var OCr=ACr(Qh()),Zz="transform";_o.transform=Zz;var em,Iie,IKe;_o.animationEnd=IKe;_o.transitionEnd=Iie;var Mie,Cie,Aie,Oie;_o.transitionDelay=Oie;_o.transitionTiming=Aie;_o.transitionDuration=Cie;_o.transitionProperty=Mie;var MKe,CKe,AKe,OKe;_o.animationDelay=OKe;_o.animationTiming=AKe;_o.animationDuration=CKe;_o.animationName=MKe;OCr.default&&(Yz=DCr(),em=Yz.prefix,_o.transitionEnd=Iie=Yz.transitionEnd,_o.animationEnd=IKe=Yz.animationEnd,_o.transform=Zz=em+"-"+Zz,_o.transitionProperty=Mie=em+"-transition-property",_o.transitionDuration=Cie=em+"-transition-duration",_o.transitionDelay=Oie=em+"-transition-delay",_o.transitionTiming=Aie=em+"-transition-timing-function",_o.animationName=MKe=em+"-animation-name",_o.animationDuration=CKe=em+"-animation-duration",_o.animationTiming=AKe=em+"-animation-delay",_o.animationDelay=OKe=em+"-animation-timing-function");var Yz,PCr={transform:Zz,end:Iie,property:Mie,timing:Aie,delay:Oie,duration:Cie};_o.default=PCr;function DCr(){for(var e=document.createElement("div").style,t={O:function(m){return"o"+m.toLowerCase()},Moz:function(m){return m.toLowerCase()},Webkit:function(m){return"webkit"+m},ms:function(m){return"MS"+m}},r=Object.keys(t),n,o,i="",a=0;a<r.length;a++){var c=r[a];if(c+"TransitionProperty"in e){i="-"+c.toLowerCase(),n=t[c]("TransitionEnd"),o=t[c]("AnimationEnd");break}}return!n&&"transitionProperty"in e&&(n="transitionend"),!o&&"animationName"in e&&(o="animationend"),e=null,{animationEnd:o,transitionEnd:n,prefix:i}}});var NKe=N((Kz,DKe)=>{"use strict";u();Kz.__esModule=!0;Kz.default=LCr;var NCr=/^((translate|rotate|scale)(X|Y|Z|3d)?|matrix(3d)?|perspective|skew(X|Y)?)$/i;function LCr(e){return!!(e&&NCr.test(e))}DKe.exports=Kz.default});var Jz=N((Xz,LKe)=>{"use strict";u();var mP=Ja();Xz.__esModule=!0;Xz.default=FCr;var kCr=mP(Tie()),Pie=mP(bKe()),RCr=mP(wKe()),jCr=mP(SKe()),qCr=PKe(),zCr=mP(NKe());function FCr(e,t,r){var n="",o="",i=t;if(typeof t=="string"){if(r===void 0)return e.style[(0,kCr.default)(t)]||(0,RCr.default)(e).getPropertyValue((0,Pie.default)(t));(i={})[t]=r}Object.keys(i).forEach(function(a){var c=i[a];!c&&c!==0?(0,jCr.default)(e,(0,Pie.default)(a)):(0,zCr.default)(a)?o+=a+"("+c+") ":n+=(0,Pie.default)(a)+": "+c+";"}),o&&(n+=qCr.transform+": "+o+";"),e.style.cssText+=";"+n}LKe.exports=Xz.default});var kKe=N(KS=>{"use strict";u();KS.__esModule=!0;KS.classNamesShape=KS.timeoutsShape=void 0;var ZKn=UCr(It());function UCr(e){return e&&e.__esModule?e:{default:e}}var BCr=null;KS.timeoutsShape=BCr;var VCr=null;KS.classNamesShape=VCr});var jKe=N(Nc=>{"use strict";u();Nc.__esModule=!0;Nc.default=Nc.EXITING=Nc.ENTERED=Nc.ENTERING=Nc.EXITED=Nc.UNMOUNTED=void 0;var GCr=WCr(It()),Die=RKe(ke()),HCr=RKe(xa()),$Cr=uie(),JKn=kKe();function RKe(e){return e&&e.__esModule?e:{default:e}}function WCr(e){if(e&&e.__esModule)return e;var t={};if(e!=null){for(var r in e)if(Object.prototype.hasOwnProperty.call(e,r)){var n=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(e,r):{};n.get||n.set?Object.defineProperty(t,r,n):t[r]=e[r]}}return t.default=e,t}function YCr(e,t){if(e==null)return{};var r={},n=Object.keys(e),o,i;for(i=0;i<n.length;i++)o=n[i],!(t.indexOf(o)>=0)&&(r[o]=e[o]);return r}function ZCr(e,t){e.prototype=Object.create(t.prototype),e.prototype.constructor=e,e.__proto__=t}var gP="unmounted";Nc.UNMOUNTED=gP;var ab="exited";Nc.EXITED=ab;var sb="entering";Nc.ENTERING=sb;var JS="entered";Nc.ENTERED=JS;var Nie="exiting";Nc.EXITING=Nie;var tm=function(e){ZCr(t,e);function t(n,o){var i;i=e.call(this,n,o)||this;var a=o.transitionGroup,c=a&&!a.isMounting?n.enter:n.appear,h;return i.appearStatus=null,n.in?c?(h=ab,i.appearStatus=sb):h=JS:n.unmountOnExit||n.mountOnEnter?h=gP:h=ab,i.state={status:h},i.nextCallback=null,i}var r=t.prototype;return r.getChildContext=function(){return{transitionGroup:null}},t.getDerivedStateFromProps=function(o,i){var a=o.in;return a&&i.status===gP?{status:ab}:null},r.componentDidMount=function(){this.updateStatus(!0,this.appearStatus)},r.componentDidUpdate=function(o){var i=null;if(o!==this.props){var a=this.state.status;this.props.in?a!==sb&&a!==JS&&(i=sb):(a===sb||a===JS)&&(i=Nie)}this.updateStatus(!1,i)},r.componentWillUnmount=function(){this.cancelNextCallback()},r.getTimeouts=function(){var o=this.props.timeout,i,a,c;return i=a=c=o,o!=null&&typeof o!="number"&&(i=o.exit,a=o.enter,c=o.appear!==void 0?o.appear:a),{exit:i,enter:a,appear:c}},r.updateStatus=function(o,i){if(o===void 0&&(o=!1),i!==null){this.cancelNextCallback();var a=HCr.default.findDOMNode(this);i===sb?this.performEnter(a,o):this.performExit(a)}else this.props.unmountOnExit&&this.state.status===ab&&this.setState({status:gP})},r.performEnter=function(o,i){var a=this,c=this.props.enter,h=this.context.transitionGroup?this.context.transitionGroup.isMounting:i,m=this.getTimeouts(),y=h?m.appear:m.enter;if(!i&&!c){this.safeSetState({status:JS},function(){a.props.onEntered(o)});return}this.props.onEnter(o,h),this.safeSetState({status:sb},function(){a.props.onEntering(o,h),a.onTransitionEnd(o,y,function(){a.safeSetState({status:JS},function(){a.props.onEntered(o,h)})})})},r.performExit=function(o){var i=this,a=this.props.exit,c=this.getTimeouts();if(!a){this.safeSetState({status:ab},function(){i.props.onExited(o)});return}this.props.onExit(o),this.safeSetState({status:Nie},function(){i.props.onExiting(o),i.onTransitionEnd(o,c.exit,function(){i.safeSetState({status:ab},function(){i.props.onExited(o)})})})},r.cancelNextCallback=function(){this.nextCallback!==null&&(this.nextCallback.cancel(),this.nextCallback=null)},r.safeSetState=function(o,i){i=this.setNextCallback(i),this.setState(o,i)},r.setNextCallback=function(o){var i=this,a=!0;return this.nextCallback=function(c){a&&(a=!1,i.nextCallback=null,o(c))},this.nextCallback.cancel=function(){a=!1},this.nextCallback},r.onTransitionEnd=function(o,i,a){this.setNextCallback(a);var c=i==null&&!this.props.addEndListener;if(!o||c){setTimeout(this.nextCallback,0);return}this.props.addEndListener&&this.props.addEndListener(o,this.nextCallback),i!=null&&setTimeout(this.nextCallback,i)},r.render=function(){var o=this.state.status;if(o===gP)return null;var i=this.props,a=i.children,c=YCr(i,["children"]);if(delete c.in,delete c.mountOnEnter,delete c.unmountOnExit,delete c.appear,delete c.enter,delete c.exit,delete c.timeout,delete c.addEndListener,delete c.onEnter,delete c.onEntering,delete c.onEntered,delete c.onExit,delete c.onExiting,delete c.onExited,typeof a=="function")return a(o,c);var h=Die.default.Children.only(a);return Die.default.cloneElement(h,c)},t}(Die.default.Component);tm.contextTypes={transitionGroup:GCr.object};tm.childContextTypes={transitionGroup:function(){}};tm.propTypes={};function XS(){}tm.defaultProps={in:!1,mountOnEnter:!1,unmountOnExit:!1,appear:!1,enter:!0,exit:!0,onEnter:XS,onEntering:XS,onEntered:XS,onExit:XS,onExiting:XS,onExited:XS};tm.UNMOUNTED=0;tm.EXITED=1;tm.ENTERING=2;tm.ENTERED=3;tm.EXITING=4;var KCr=(0,$Cr.polyfill)(tm);Nc.default=KCr});var lb=N((Qz,qKe)=>{"use strict";u();Qz.__esModule=!0;Qz.default=XCr;function XCr(e){return e&&e.ownerDocument||document}qKe.exports=Qz.default});var FKe=N((e8,zKe)=>{"use strict";u();var JCr=Ja();e8.__esModule=!0;e8.default=eAr;var QCr=JCr(lb());function eAr(e){e===void 0&&(e=(0,QCr.default)());try{return e.activeElement}catch(t){}}zKe.exports=e8.default});var yP=N((vP,BKe)=>{"use strict";u();var tAr=Ja();vP.__esModule=!0;vP.default=void 0;var rAr=tAr(Qh()),nAr=function(){return rAr.default?function(e,t){return e.contains?e.contains(t):e.compareDocumentPosition?e===t||!!(e.compareDocumentPosition(t)&16):UKe(e,t)}:UKe}();vP.default=nAr;function UKe(e,t){if(t)do if(t===e)return!0;while(t=t.parentNode);return!1}BKe.exports=vP.default});var $Ke=N((ub,HKe)=>{u();function VKe(e){if(e&&typeof e=="object"){var t=e.which||e.keyCode||e.charCode;t&&(e=t)}if(typeof e=="number")return GKe[e];var r=String(e),n=Vg[r.toLowerCase()];if(n)return n;var n=t8[r.toLowerCase()];if(n)return n;if(r.length===1)return r.charCodeAt(0)}VKe.isEventKey=function(t,r){if(t&&typeof t=="object"){var n=t.which||t.keyCode||t.charCode;if(n==null)return!1;if(typeof r=="string"){var o=Vg[r.toLowerCase()];if(o)return o===n;var o=t8[r.toLowerCase()];if(o)return o===n}else if(typeof r=="number")return r===n;return!1}};ub=HKe.exports=VKe;var Vg=ub.code=ub.codes={backspace:8,tab:9,enter:13,shift:16,ctrl:17,alt:18,"pause/break":19,"caps lock":20,esc:27,space:32,"page up":33,"page down":34,end:35,home:36,left:37,up:38,right:39,down:40,insert:45,delete:46,command:91,"left command":91,"right command":93,"numpad *":106,"numpad +":107,"numpad -":109,"numpad .":110,"numpad /":111,"num lock":144,"scroll lock":145,"my computer":182,"my calculator":183,";":186,"=":187,",":188,"-":189,".":190,"/":191,"`":192,"[":219,"\\":220,"]":221,"'":222},t8=ub.aliases={windows:91,"\u21E7":16,"\u2325":18,"\u2303":17,"\u2318":91,ctl:17,control:17,option:18,pause:19,break:19,caps:20,return:13,escape:27,spc:32,spacebar:32,pgup:33,pgdn:34,ins:45,del:46,cmd:91};for(Ea=97;Ea<123;Ea++)Vg[String.fromCharCode(Ea)]=Ea-32;for(Ea=48;Ea<58;Ea++)Vg[Ea-48]=Ea;var Ea;for(Ea=1;Ea<13;Ea++)Vg["f"+Ea]=Ea+111;for(Ea=0;Ea<10;Ea++)Vg["numpad "+Ea]=Ea+96;var GKe=ub.names=ub.title={};for(Ea in Vg)GKe[Vg[Ea]]=Ea;for(Lie in t8)Vg[Lie]=t8[Lie];var Lie});var kie=N((r8,WKe)=>{"use strict";u();Object.defineProperty(r8,"__esModule",{value:!0});r8.default=oAr;function oAr(e){return function(r,n,o,i,a){var c=o||"<<anonymous>>",h=a||n;if(r[n]==null)return new Error("The "+i+" `"+h+"` is required to make "+("`"+c+"` accessible for users of assistive ")+"technologies such as screen readers.");for(var m=arguments.length,y=Array(m>5?m-5:0),w=5;w<m;w++)y[w-5]=arguments[w];return e.apply(void 0,[r,n,o,i,a].concat(y))}}WKe.exports=r8.default});var n8=N((_P,ZKe)=>{"use strict";u();var iAr=Ja();_P.__esModule=!0;_P.default=void 0;var aAr=iAr(Qh()),YKe=function(){};aAr.default&&(YKe=function(){if(document.addEventListener)return function(e,t,r,n){return e.addEventListener(t,r,n||!1)};if(document.attachEvent)return function(e,t,r){return e.attachEvent("on"+t,function(n){n=n||window.event,n.target=n.target||n.srcElement,n.currentTarget=e,r.call(e,n)})}}());var sAr=YKe;_P.default=sAr;ZKe.exports=_P.default});var o8=N((bP,XKe)=>{"use strict";u();var lAr=Ja();bP.__esModule=!0;bP.default=void 0;var uAr=lAr(Qh()),KKe=function(){};uAr.default&&(KKe=function(){if(document.addEventListener)return function(e,t,r,n){return e.removeEventListener(t,r,n||!1)};if(document.attachEvent)return function(e,t,r){return e.detachEvent("on"+t,r)}}());var cAr=KKe;bP.default=cAr;XKe.exports=bP.default});var Rie=N((i8,QKe)=>{"use strict";u();i8.__esModule=!0;i8.default=function(e,t,r,n){return(0,fAr.default)(e,t,r,n),{remove:function(){(0,hAr.default)(e,t,r,n)}}};var pAr=n8(),fAr=JKe(pAr),dAr=o8(),hAr=JKe(dAr);function JKe(e){return e&&e.__esModule?e:{default:e}}QKe.exports=i8.default});var cb=N((a8,tXe)=>{"use strict";u();a8.__esModule=!0;a8.default=function(e){return(0,yAr.default)(gAr.default.findDOMNode(e))};var mAr=xa(),gAr=eXe(mAr),vAr=lb(),yAr=eXe(vAr);function eXe(e){return e&&e.__esModule?e:{default:e}}tXe.exports=a8.default});var nXe=N((u8,rXe)=>{"use strict";u();u8.__esModule=!0;var _Ar=yP(),bAr=QS(_Ar),xAr=It(),s8=QS(xAr),wAr=ke(),EAr=QS(wAr),SAr=xa(),TAr=QS(SAr),IAr=Rie(),jie=QS(IAr),MAr=cb(),CAr=QS(MAr);function QS(e){return e&&e.__esModule?e:{default:e}}function AAr(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function OAr(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t&&(typeof t=="object"||typeof t=="function")?t:e}function PAr(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var DAr=27;function NAr(e){return e.button===0}function LAr(e){return!!(e.metaKey||e.altKey||e.ctrlKey||e.shiftKey)}var l8=function(e){PAr(t,e);function t(r,n){AAr(this,t);var o=OAr(this,e.call(this,r,n));return o.addEventListeners=function(){o.currentEvent=window.event;var i=o.props.event,a=(0,CAr.default)(o);o.documentMouseCaptureListener=(0,jie.default)(a,i,o.handleMouseCapture,!0),o.documentMouseListener=(0,jie.default)(a,i,o.handleMouse),o.documentKeyupListener=(0,jie.default)(a,"keyup",o.handleKeyUp)},o.removeEventListeners=function(){o.documentMouseCaptureListener&&o.documentMouseCaptureListener.remove(),o.documentMouseListener&&o.documentMouseListener.remove(),o.documentKeyupListener&&o.documentKeyupListener.remove()},o.handleMouseCapture=function(i){o.preventMouseRootClose=LAr(i)||!NAr(i)||(0,bAr.default)(TAr.default.findDOMNode(o),i.target)},o.handleMouse=function(i){if(i===o.currentEvent){o.currentEvent=void 0;return}!o.preventMouseRootClose&&o.props.onRootClose&&o.props.onRootClose(i)},o.handleKeyUp=function(i){if(i===o.currentEvent){o.currentEvent=void 0;return}i.keyCode===DAr&&o.props.onRootClose&&o.props.onRootClose(i)},o.preventMouseRootClose=!1,o}return t.prototype.componentDidMount=function(){this.props.disabled||this.addEventListeners()},t.prototype.componentDidUpdate=function(n){!this.props.disabled&&n.disabled?this.addEventListeners():this.props.disabled&&!n.disabled&&this.removeEventListeners()},t.prototype.componentWillUnmount=function(){this.props.disabled||this.removeEventListeners()},t.prototype.render=function(){return this.props.children},t}(EAr.default.Component);l8.displayName="RootCloseWrapper";l8.propTypes={onRootClose:s8.default.func,children:s8.default.element,disabled:s8.default.bool,event:s8.default.oneOf(["click","mousedown"])};l8.defaultProps={event:"click"};u8.default=l8;rXe.exports=u8.default});var mXe=N((h8,hXe)=>{"use strict";u();h8.__esModule=!0;h8.default=YAr;var WAr=/^[\w-]*$/,Yie=Function.prototype.bind.call(Function.prototype.call,[].slice);function YAr(e,t){var r=t[0]==="#",n=t[0]===".",o=r||n?t.slice(1):t,i=WAr.test(o),a;return i?r?(e=e.getElementById?e:document,(a=e.getElementById(o))?[a]:[]):e.getElementsByClassName&&n?Yie(e.getElementsByClassName(o)):Yie(e.getElementsByTagName(t)):Yie(e.querySelectorAll(t))}hXe.exports=h8.default});var yXe=N((m8,vXe)=>{"use strict";u();var gXe=Ja();m8.__esModule=!0;m8.default=XAr;var ZAr=gXe(yP()),KAr=gXe(mXe());function XAr(e,t){return function(n){var o=n.currentTarget,i=n.target,a=(0,KAr.default)(o,e);a.some(function(c){return(0,ZAr.default)(c,i)})&&t.call(this,n)}}vXe.exports=m8.default});var xXe=N((EP,bXe)=>{"use strict";u();var Zie=Ja();EP.__esModule=!0;EP.default=void 0;var JAr=Zie(Qh()),QAr=Zie(n8()),eOr=Zie(o8()),_Xe=function(){};JAr.default&&(_Xe=function(t,r,n,o){return(0,QAr.default)(t,r,n,o),function(){(0,eOr.default)(t,r,n,o)}});var tOr=_Xe;EP.default=tOr;bXe.exports=EP.default});var IXe=N(_0=>{"use strict";u();var g8=Ja();_0.__esModule=!0;_0.default=void 0;var wXe=g8(n8());_0.on=wXe.default;var EXe=g8(o8());_0.off=EXe.default;var SXe=g8(yXe());_0.filter=SXe.default;var TXe=g8(xXe());_0.listen=TXe.default;var rOr={on:wXe.default,off:EXe.default,filter:SXe.default,listen:TXe.default};_0.default=rOr});var Kie=N((y8,MXe)=>{"use strict";u();var nOr=Ja();y8.__esModule=!0;y8.default=iOr;var oOr=nOr(Qh()),v8;function iOr(e){if((!v8&&v8!==0||e)&&oOr.default){var t=document.createElement("div");t.style.position="absolute",t.style.top="-9999px",t.style.width="50px",t.style.height="50px",t.style.overflow="scroll",document.body.appendChild(t),v8=t.offsetWidth-t.clientWidth,document.body.removeChild(t)}return v8}MXe.exports=y8.default});var SP=N((_8,AXe)=>{"use strict";u();Object.defineProperty(_8,"__esModule",{value:!0});var aOr=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},sOr=ke(),lOr=CXe(sOr),uOr=Ez(),cOr=CXe(uOr);function CXe(e){return e&&e.__esModule?e:{default:e}}function pOr(e,t,r,n,o){var i=e[t],a=typeof i=="undefined"?"undefined":aOr(i);return lOr.default.isValidElement(i)?new Error("Invalid "+n+" `"+o+"` of type ReactElement "+("supplied to `"+r+"`, expected a ReactComponent or a ")+"DOMElement. You can usually obtain a ReactComponent or DOMElement from a ReactElement by attaching a ref to it."):(a!=="object"||typeof i.render!="function")&&i.nodeType!==1?new Error("Invalid "+n+" `"+o+"` of value `"+i+"` "+("supplied to `"+r+"`, expected a ReactComponent or a ")+"DOMElement."):null}_8.default=(0,cOr.default)(pOr);AXe.exports=_8.default});var NXe=N((nJn,DXe)=>{"use strict";u();var fOr=!1,PXe=function(){};fOr&&(OXe=function(t,r){var n=arguments.length;r=new Array(n>1?n-1:0);for(var o=1;o<n;o++)r[o-1]=arguments[o];var i=0,a="Warning: "+t.replace(/%s/g,function(){return r[i++]});typeof console!="undefined"&&console.error(a);try{throw new Error(a)}catch(c){}},PXe=function(e,t,r){var n=arguments.length;r=new Array(n>2?n-2:0);for(var o=2;o<n;o++)r[o-2]=arguments[o];if(t===void 0)throw new Error("`warning(condition, format, ...args)` requires a warning message argument");e||OXe.apply(null,[t].concat(r))});var OXe;DXe.exports=PXe});var RXe=N((b8,kXe)=>{"use strict";u();Object.defineProperty(b8,"__esModule",{value:!0});b8.default=LXe;var dOr=NXe(),hOr=mOr(dOr);function mOr(e){return e&&e.__esModule?e:{default:e}}var Xie={};function LXe(e,t){return function(n,o,i,a,c){var h=i||"<<anonymous>>",m=c||o;if(n[o]!=null){var y=i+"."+o;(0,hOr.default)(Xie[y],"The "+a+" `"+m+"` of "+("`"+h+"` is deprecated. "+t+".")),Xie[y]=!0}for(var w=arguments.length,E=Array(w>5?w-5:0),A=5;A<w;A++)E[A-5]=arguments[A];return e.apply(void 0,[n,o,i,a,c].concat(E))}}function gOr(){Xie={}}LXe._resetWarned=gOr;kXe.exports=b8.default});var Jie=N((x8,jXe)=>{"use strict";u();x8.__esModule=!0;x8.default=vOr;function vOr(e,t){return e.classList?!!t&&e.classList.contains(t):(" "+(e.className.baseVal||e.className)+" ").indexOf(" "+t+" ")!==-1}jXe.exports=x8.default});var zXe=N((w8,qXe)=>{"use strict";u();var yOr=Ja();w8.__esModule=!0;w8.default=bOr;var _Or=yOr(Jie());function bOr(e,t){e.classList?e.classList.add(t):(0,_Or.default)(e,t)||(typeof e.className=="string"?e.className=e.className+" "+t:e.setAttribute("class",(e.className&&e.className.baseVal||"")+" "+t))}qXe.exports=w8.default});var BXe=N((lJn,UXe)=>{"use strict";u();function FXe(e,t){return e.replace(new RegExp("(^|\\s)"+t+"(?:\\s|$)","g"),"$1").replace(/\s+/g," ").replace(/^\s*|\s*$/g,"")}UXe.exports=function(t,r){t.classList?t.classList.remove(r):typeof t.className=="string"?t.className=FXe(t.className,r):t.setAttribute("class",FXe(t.className&&t.className.baseVal||"",r))}});var $Xe=N(pb=>{"use strict";u();var Qie=Ja();pb.__esModule=!0;pb.default=void 0;var VXe=Qie(zXe());pb.addClass=VXe.default;var GXe=Qie(BXe());pb.removeClass=GXe.default;var HXe=Qie(Jie());pb.hasClass=HXe.default;var xOr={addClass:VXe.default,removeClass:GXe.default,hasClass:HXe.default};pb.default=xOr});var TP=N((E8,WXe)=>{"use strict";u();E8.__esModule=!0;E8.default=wOr;function wOr(e){return e===e.window?e:e.nodeType===9?e.defaultView||e.parentWindow:!1}WXe.exports=E8.default});var eae=N((S8,KXe)=>{"use strict";u();S8.__esModule=!0;S8.default=COr;var EOr=TP(),YXe=ZXe(EOr),SOr=lb(),TOr=ZXe(SOr);function ZXe(e){return e&&e.__esModule?e:{default:e}}function IOr(e){return e&&e.tagName.toLowerCase()==="body"}function MOr(e){var t=(0,TOr.default)(e),r=(0,YXe.default)(t),n=r.innerWidth;if(!n){var o=t.documentElement.getBoundingClientRect();n=o.right-Math.abs(o.left)}return t.body.clientWidth<n}function COr(e){var t=(0,YXe.default)(e);return t||IOr(e)?MOr(e):e.scrollHeight>e.clientHeight}KXe.exports=S8.default});var JXe=N(IP=>{"use strict";u();IP.__esModule=!0;IP.ariaHidden=tae;IP.hideSiblings=POr;IP.showSiblings=DOr;var AOr=["template","script","style"],OOr=function(t){var r=t.nodeType,n=t.tagName;return r===1&&AOr.indexOf(n.toLowerCase())===-1},XXe=function(t,r,n){r=[].concat(r),[].forEach.call(t.children,function(o){r.indexOf(o)===-1&&OOr(o)&&n(o)})};function tae(e,t){t&&(e?t.setAttribute("aria-hidden","true"):t.removeAttribute("aria-hidden"))}function POr(e,t){XXe(e,t,function(r){return tae(!0,r)})}function DOr(e,t){XXe(e,t,function(r){return tae(!1,r)})}});var rJe=N((I8,tJe)=>{"use strict";u();I8.__esModule=!0;var NOr=$Xe(),QXe=T8(NOr),LOr=Jz(),eJe=T8(LOr),kOr=Kie(),ROr=T8(kOr),jOr=eae(),qOr=T8(jOr),rae=JXe();function T8(e){return e&&e.__esModule?e:{default:e}}function zOr(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function FOr(e,t){var r=-1;return e.some(function(n,o){if(t(n,o))return r=o,!0}),r}function UOr(e,t){return FOr(e,function(r){return r.modals.indexOf(t)!==-1})}function BOr(e,t){var r={overflow:"hidden"};e.style={overflow:t.style.overflow,paddingRight:t.style.paddingRight},e.overflowing&&(r.paddingRight=parseInt((0,eJe.default)(t,"paddingRight")||0,10)+(0,ROr.default)()+"px"),(0,eJe.default)(t,r)}function VOr(e,t){var r=e.style;Object.keys(r).forEach(function(n){return t.style[n]=r[n]})}var GOr=function e(){var t=this,r=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},n=r.hideSiblingNodes,o=n===void 0?!0:n,i=r.handleContainerOverflow,a=i===void 0?!0:i;zOr(this,e),this.add=function(c,h,m){var y=t.modals.indexOf(c),w=t.containers.indexOf(h);if(y!==-1)return y;if(y=t.modals.length,t.modals.push(c),t.hideSiblingNodes&&(0,rae.hideSiblings)(h,c.modalNode),w!==-1)return t.data[w].modals.push(c),y;var E={modals:[c],classes:m?m.split(/\s+/):[],overflowing:(0,qOr.default)(h)};return t.handleContainerOverflow&&BOr(E,h),E.classes.forEach(QXe.default.addClass.bind(null,h)),t.containers.push(h),t.data.push(E),y},this.remove=function(c){var h=t.modals.indexOf(c);if(h!==-1){var m=UOr(t.data,c),y=t.data[m],w=t.containers[m];y.modals.splice(y.modals.indexOf(c),1),t.modals.splice(h,1),y.modals.length===0?(y.classes.forEach(QXe.default.removeClass.bind(null,w)),t.handleContainerOverflow&&VOr(y,w),t.hideSiblingNodes&&(0,rae.showSiblings)(w,c.modalNode),t.containers.splice(m,1),t.data.splice(m,1)):t.hideSiblingNodes&&(0,rae.ariaHidden)(!1,y.modals[y.modals.length-1].modalNode)}},this.isTopModal=function(c){return!!t.modals.length&&t.modals[t.modals.length-1]===c},this.hideSiblingNodes=o,this.handleContainerOverflow=a,this.modals=[],this.containers=[],this.data=[]};I8.default=GOr;tJe.exports=I8.default});var MP=N((M8,nJe)=>{"use strict";u();M8.__esModule=!0;M8.default=YOr;var HOr=xa(),$Or=WOr(HOr);function WOr(e){return e&&e.__esModule?e:{default:e}}function YOr(e,t){return e=typeof e=="function"?e():e,$Or.default.findDOMNode(e)||t}nJe.exports=M8.default});var cJe=N((C8,uJe)=>{"use strict";u();C8.__esModule=!0;var ZOr=It(),nae=rT(ZOr),KOr=SP(),XOr=rT(KOr),JOr=ke(),oJe=rT(JOr),QOr=xa(),iJe=rT(QOr),ePr=MP(),aJe=rT(ePr),tPr=cb(),sJe=rT(tPr);function rT(e){return e&&e.__esModule?e:{default:e}}function rPr(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function lJe(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t&&(typeof t=="object"||typeof t=="function")?t:e}function nPr(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var oae=function(e){nPr(t,e);function t(){var r,n,o;rPr(this,t);for(var i=arguments.length,a=Array(i),c=0;c<i;c++)a[c]=arguments[c];return o=(r=(n=lJe(this,e.call.apply(e,[this].concat(a))),n),n._mountOverlayTarget=function(){n._overlayTarget||(n._overlayTarget=document.createElement("div"),n._portalContainerNode=(0,aJe.default)(n.props.container,(0,sJe.default)(n).body),n._portalContainerNode.appendChild(n._overlayTarget))},n._unmountOverlayTarget=function(){n._overlayTarget&&(n._portalContainerNode.removeChild(n._overlayTarget),n._overlayTarget=null),n._portalContainerNode=null},n._renderOverlay=function(){var h=n.props.children?oJe.default.Children.only(n.props.children):null;if(h!==null){n._mountOverlayTarget();var m=!n._overlayInstance;n._overlayInstance=iJe.default.unstable_renderSubtreeIntoContainer(n,h,n._overlayTarget,function(){m&&n.props.onRendered&&n.props.onRendered()})}else n._unrenderOverlay(),n._unmountOverlayTarget()},n._unrenderOverlay=function(){n._overlayTarget&&(iJe.default.unmountComponentAtNode(n._overlayTarget),n._overlayInstance=null)},n.getMountNode=function(){return n._overlayTarget},r),lJe(n,o)}return t.prototype.componentDidMount=function(){this._isMounted=!0,this._renderOverlay()},t.prototype.componentDidUpdate=function(){this._renderOverlay()},t.prototype.UNSAFE_componentWillReceiveProps=function(n){this._overlayTarget&&n.container!==this.props.container&&(this._portalContainerNode.removeChild(this._overlayTarget),this._portalContainerNode=(0,aJe.default)(n.container,(0,sJe.default)(this).body),this._portalContainerNode.appendChild(this._overlayTarget))},t.prototype.componentWillUnmount=function(){this._isMounted=!1,this._unrenderOverlay(),this._unmountOverlayTarget()},t.prototype.render=function(){return null},t}(oJe.default.Component);oae.displayName="Portal";oae.propTypes={container:nae.default.oneOfType([XOr.default,nae.default.func]),onRendered:nae.default.func};C8.default=oae;uJe.exports=C8.default});var lae=N((A8,fJe)=>{"use strict";u();A8.__esModule=!0;var oPr=Qh(),iPr=b0(oPr),aPr=It(),iae=b0(aPr),sPr=SP(),lPr=b0(sPr),uPr=ke(),cPr=b0(uPr),pPr=xa(),aae=b0(pPr),fPr=MP(),dPr=b0(fPr),hPr=cb(),mPr=b0(hPr),gPr=cJe(),vPr=b0(gPr);function b0(e){return e&&e.__esModule?e:{default:e}}function yPr(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function pJe(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t&&(typeof t=="object"||typeof t=="function")?t:e}function _Pr(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var sae=function(e){_Pr(t,e);function t(){var r,n,o;yPr(this,t);for(var i=arguments.length,a=Array(i),c=0;c<i;c++)a[c]=arguments[c];return o=(r=(n=pJe(this,e.call.apply(e,[this].concat(a))),n),n.getMountNode=function(){return n._portalContainerNode},r),pJe(n,o)}return t.prototype.UNSAFE_componentWillMount=function(){if(iPr.default){var n=this.props.container;typeof n=="function"&&(n=n()),!(n&&!aae.default.findDOMNode(n))&&this.setContainer(n)}},t.prototype.componentDidMount=function(){this._portalContainerNode?this.props.onRendered&&this.props.onRendered():(this.setContainer(this.props.container),this.forceUpdate(this.props.onRendered))},t.prototype.UNSAFE_componentWillReceiveProps=function(n){n.container!==this.props.container&&this.setContainer(n.container)},t.prototype.componentWillUnmount=function(){this._portalContainerNode=null},t.prototype.setContainer=function(n){this._portalContainerNode=(0,dPr.default)(n,(0,mPr.default)(this).body)},t.prototype.render=function(){return this.props.children&&this._portalContainerNode?aae.default.createPortal(this.props.children,this._portalContainerNode):null},t}(cPr.default.Component);sae.displayName="Portal";sae.propTypes={container:iae.default.oneOfType([lPr.default,iae.default.func]),onRendered:iae.default.func};A8.default=aae.default.createPortal?sae:vPr.default;fJe.exports=A8.default});var gJe=N((O8,mJe)=>{"use strict";u();O8.__esModule=!0;var bPr=It(),xPr=dJe(bPr),wPr=ke(),EPr=dJe(wPr);function dJe(e){return e&&e.__esModule?e:{default:e}}function SPr(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function TPr(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t&&(typeof t=="object"||typeof t=="function")?t:e}function IPr(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var MPr={children:xPr.default.node},hJe=function(e){IPr(t,e);function t(){return SPr(this,t),TPr(this,e.apply(this,arguments))}return t.prototype.render=function(){return this.props.children},t}(EPr.default.Component);hJe.propTypes=MPr;O8.default=hJe;mJe.exports=O8.default});var yJe=N((P8,vJe)=>{"use strict";u();P8.__esModule=!0;P8.default=CPr;function CPr(e){var t=!document.addEventListener,r=void 0;return t?(document.attachEvent("onfocusin",e),r=function(){return document.detachEvent("onfocusin",e)}):(document.addEventListener("focus",e,!0),r=function(){return document.removeEventListener("focus",e,!0)}),{remove:r}}vJe.exports=P8.default});var CJe=N((N8,MJe)=>{"use strict";u();N8.__esModule=!0;var wJe=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},APr=FKe(),uae=jl(APr),OPr=yP(),EJe=jl(OPr),PPr=Qh(),DPr=jl(PPr),NPr=It(),Hi=jl(NPr),LPr=SP(),kPr=jl(LPr),RPr=RXe(),jPr=jl(RPr),qPr=$u(),_Je=jl(qPr),SJe=ke(),x0=jl(SJe),zPr=xa(),FPr=jl(zPr),UPr=ib(),BPr=jl(UPr),VPr=rJe(),TJe=jl(VPr),GPr=lae(),IJe=jl(GPr),HPr=gJe(),$Pr=jl(HPr),WPr=Rie(),bJe=jl(WPr),YPr=yJe(),ZPr=jl(YPr),KPr=MP(),XPr=jl(KPr),JPr=cb(),cae=jl(JPr);function jl(e){return e&&e.__esModule?e:{default:e}}function QPr(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function xJe(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t&&(typeof t=="object"||typeof t=="function")?t:e}function eDr(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var tDr=new TJe.default,D8=function(e){eDr(t,e);function t(){var r,n,o;QPr(this,t);for(var i=arguments.length,a=Array(i),c=0;c<i;c++)a[c]=arguments[c];return o=(r=(n=xJe(this,e.call.apply(e,[this].concat(a))),n),rDr.call(n),r),xJe(n,o)}return t.prototype.omitProps=function(n,o){var i=Object.keys(n),a={};return i.map(function(c){Object.prototype.hasOwnProperty.call(o,c)||(a[c]=n[c])}),a},t.prototype.render=function(){var n=this.props,o=n.show,i=n.container,a=n.children,c=n.transition,h=n.backdrop,m=n.className,y=n.style,w=n.onExit,E=n.onExiting,A=n.onEnter,P=n.onEntering,j=n.onEntered,D=x0.default.Children.only(a),L=this.omitProps(this.props,t.propTypes),z=o||c&&!this.state.exited;if(!z)return null;var B=D.props,G=B.role,Z=B.tabIndex;return(G===void 0||Z===void 0)&&(D=(0,SJe.cloneElement)(D,{role:G===void 0?"document":G,tabIndex:Z==null?"-1":Z})),c&&(D=x0.default.createElement(c,{appear:!0,unmountOnExit:!0,in:o,onExit:w,onExiting:E,onExited:this.handleHidden,onEnter:A,onEntering:P,onEntered:j},D)),x0.default.createElement(IJe.default,{ref:this.setMountNode,container:i,onRendered:this.onPortalRendered},x0.default.createElement("div",wJe({ref:this.setModalNodeRef,role:G||"dialog"},L,{style:y,className:m}),h&&this.renderBackdrop(),x0.default.createElement($Pr.default,{ref:this.setDialogRef},D)))},t.prototype.UNSAFE_componentWillReceiveProps=function(n){n.show?this.setState({exited:!1}):n.transition||this.setState({exited:!0})},t.prototype.UNSAFE_componentWillUpdate=function(n){!this.props.show&&n.show&&this.checkForFocus()},t.prototype.componentDidMount=function(){this._isMounted=!0,this.props.show&&this.onShow()},t.prototype.componentDidUpdate=function(n){var o=this.props.transition;n.show&&!this.props.show&&!o?this.onHide():!n.show&&this.props.show&&this.onShow()},t.prototype.componentWillUnmount=function(){var n=this.props,o=n.show,i=n.transition;this._isMounted=!1,(o||i&&!this.state.exited)&&this.onHide()},t.prototype.autoFocus=function(){if(this.props.autoFocus){var n=this.getDialogElement(),o=(0,uae.default)((0,cae.default)(this));n&&!(0,EJe.default)(n,o)&&(this.lastFocus=o,n.hasAttribute("tabIndex")||((0,BPr.default)(!1,"The modal content node does not accept focus. For the benefit of assistive technologies, the tabIndex of the node is being set to \"-1\"."),n.setAttribute("tabIndex",-1)),n.focus())}},t.prototype.restoreLastFocus=function(){this.lastFocus&&this.lastFocus.focus&&(this.lastFocus.focus(),this.lastFocus=null)},t.prototype.getDialogElement=function(){return FPr.default.findDOMNode(this.dialog)},t.prototype.isTopModal=function(){return this.props.manager.isTopModal(this)},t}(x0.default.Component);D8.propTypes=wJe({},IJe.default.propTypes,{show:Hi.default.bool,container:Hi.default.oneOfType([kPr.default,Hi.default.func]),onShow:Hi.default.func,onHide:Hi.default.func,backdrop:Hi.default.oneOfType([Hi.default.bool,Hi.default.oneOf(["static"])]),renderBackdrop:Hi.default.func,onEscapeKeyDown:Hi.default.func,onEscapeKeyUp:(0,jPr.default)(Hi.default.func,"Please use onEscapeKeyDown instead for consistency"),onBackdropClick:Hi.default.func,backdropStyle:Hi.default.object,backdropClassName:Hi.default.string,containerClassName:Hi.default.string,keyboard:Hi.default.bool,transition:_Je.default,backdropTransition:_Je.default,autoFocus:Hi.default.bool,enforceFocus:Hi.default.bool,restoreFocus:Hi.default.bool,onEnter:Hi.default.func,onEntering:Hi.default.func,onEntered:Hi.default.func,onExit:Hi.default.func,onExiting:Hi.default.func,onExited:Hi.default.func,manager:Hi.default.object.isRequired});D8.defaultProps={show:!1,backdrop:!0,keyboard:!0,autoFocus:!0,enforceFocus:!0,restoreFocus:!0,onHide:function(){},manager:tDr,renderBackdrop:function(t){return x0.default.createElement("div",t)}};var rDr=function(){var t=this;this.state={exited:!this.props.show},this.renderBackdrop=function(){var r=t.props,n=r.backdropStyle,o=r.backdropClassName,i=r.renderBackdrop,a=r.backdropTransition,c=function(y){return t.backdrop=y},h=i({ref:c,style:n,className:o,onClick:t.handleBackdropClick});return a&&(h=x0.default.createElement(a,{appear:!0,in:t.props.show},h)),h},this.onPortalRendered=function(){t.autoFocus(),t.props.onShow&&t.props.onShow()},this.onShow=function(){var r=(0,cae.default)(t),n=(0,XPr.default)(t.props.container,r.body);t.props.manager.add(t,n,t.props.containerClassName),t._onDocumentKeydownListener=(0,bJe.default)(r,"keydown",t.handleDocumentKeyDown),t._onDocumentKeyupListener=(0,bJe.default)(r,"keyup",t.handleDocumentKeyUp),t._onFocusinListener=(0,ZPr.default)(t.enforceFocus)},this.onHide=function(){t.props.manager.remove(t),t._onDocumentKeydownListener.remove(),t._onDocumentKeyupListener.remove(),t._onFocusinListener.remove(),t.props.restoreFocus&&t.restoreLastFocus()},this.setMountNode=function(r){t.mountNode=r&&r.getMountNode()},this.setModalNodeRef=function(r){t.modalNode=r},this.setDialogRef=function(r){t.dialog=r},this.handleHidden=function(){if(t.setState({exited:!0}),t.onHide(),t.props.onExited){var r;(r=t.props).onExited.apply(r,arguments)}},this.handleBackdropClick=function(r){r.target===r.currentTarget&&(t.props.onBackdropClick&&t.props.onBackdropClick(r),t.props.backdrop===!0&&t.props.onHide())},this.handleDocumentKeyDown=function(r){t.props.keyboard&&r.keyCode===27&&t.isTopModal()&&(t.props.onEscapeKeyDown&&t.props.onEscapeKeyDown(r),t.props.onHide())},this.handleDocumentKeyUp=function(r){t.props.keyboard&&r.keyCode===27&&t.isTopModal()&&t.props.onEscapeKeyUp&&t.props.onEscapeKeyUp(r)},this.checkForFocus=function(){DPr.default&&(t.lastFocus=(0,uae.default)())},this.enforceFocus=function(){if(!(!t.props.enforceFocus||!t._isMounted||!t.isTopModal())){var r=t.getDialogElement(),n=(0,uae.default)((0,cae.default)(t));r&&!(0,EJe.default)(r,n)&&r.focus()}}};D8.Manager=TJe.default;N8.default=D8;MJe.exports=N8.default});var Eae=N((z8,ZJe)=>{"use strict";u();var wae=Ja();z8.__esModule=!0;z8.default=IDr;var EDr=wae(yP()),SDr=wae(TP()),TDr=wae(lb());function IDr(e){var t=(0,TDr.default)(e),r=(0,SDr.default)(t),n=t&&t.documentElement,o={top:0,left:0,height:0,width:0};if(t)return(0,EDr.default)(n,e)&&(e.getBoundingClientRect!==void 0&&(o=e.getBoundingClientRect()),o={top:o.top+(r.pageYOffset||n.scrollTop)-(n.clientTop||0),left:o.left+(r.pageXOffset||n.scrollLeft)-(n.clientLeft||0),width:(o.width==null?e.offsetWidth:o.width)||0,height:(o.height==null?e.offsetHeight:o.height)||0}),o}ZJe.exports=z8.default});var KJe=N((jQn,Hg)=>{u();function Sae(){return Hg.exports=Sae=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},Hg.exports.__esModule=!0,Hg.exports.default=Hg.exports,Sae.apply(null,arguments)}Hg.exports=Sae,Hg.exports.__esModule=!0,Hg.exports.default=Hg.exports});var QJe=N((F8,JJe)=>{"use strict";u();var XJe=Ja();F8.__esModule=!0;F8.default=ODr;var MDr=XJe(lb()),CDr=XJe(Jz());function ADr(e){return e.nodeName&&e.nodeName.toLowerCase()}function ODr(e){for(var t=(0,MDr.default)(e),r=e&&e.offsetParent;r&&ADr(e)!=="html"&&(0,CDr.default)(r,"position")==="static";)r=r.offsetParent;return r||t.documentElement}JJe.exports=F8.default});var Tae=N((U8,eQe)=>{"use strict";u();var PDr=Ja();U8.__esModule=!0;U8.default=NDr;var DDr=PDr(TP());function NDr(e,t){var r=(0,DDr.default)(e);if(t===void 0)return r?"pageYOffset"in r?r.pageYOffset:r.document.documentElement.scrollTop:e.scrollTop;r?r.scrollTo("pageXOffset"in r?r.pageXOffset:r.document.documentElement.scrollLeft,t):e.scrollTop=t}eQe.exports=U8.default});var rQe=N((B8,tQe)=>{"use strict";u();var LDr=Ja();B8.__esModule=!0;B8.default=RDr;var kDr=LDr(TP());function RDr(e,t){var r=(0,kDr.default)(e);if(t===void 0)return r?"pageXOffset"in r?r.pageXOffset:r.document.documentElement.scrollLeft:e.scrollLeft;r?r.scrollTo(t,"pageYOffset"in r?r.pageYOffset:r.document.documentElement.scrollTop):e.scrollLeft=t}tQe.exports=B8.default});var iQe=N((V8,oQe)=>{"use strict";u();var aT=Ja();V8.__esModule=!0;V8.default=BDr;var jDr=aT(KJe()),nQe=aT(Eae()),qDr=aT(QJe()),zDr=aT(Tae()),FDr=aT(rQe()),kP=aT(Jz());function UDr(e){return e.nodeName&&e.nodeName.toLowerCase()}function BDr(e,t){var r={top:0,left:0},n;return(0,kP.default)(e,"position")==="fixed"?n=e.getBoundingClientRect():(t=t||(0,qDr.default)(e),n=(0,nQe.default)(e),UDr(t)!=="html"&&(r=(0,nQe.default)(t)),r.top+=parseInt((0,kP.default)(t,"borderTopWidth"),10)-(0,zDr.default)(t)||0,r.left+=parseInt((0,kP.default)(t,"borderLeftWidth"),10)-(0,FDr.default)(t)||0),(0,jDr.default)({},n,{top:n.top-r.top-(parseInt((0,kP.default)(e,"marginTop"),10)||0),left:n.left-r.left-(parseInt((0,kP.default)(e,"marginLeft"),10)||0)})}oQe.exports=V8.default});var lQe=N((H8,sQe)=>{"use strict";u();H8.__esModule=!0;H8.default=XDr;var VDr=Eae(),Mae=G8(VDr),GDr=iQe(),HDr=G8(GDr),$Dr=Tae(),Iae=G8($Dr),WDr=cb(),YDr=G8(WDr);function G8(e){return e&&e.__esModule?e:{default:e}}function aQe(e){var t=void 0,r=void 0,n=void 0;if(e.tagName==="BODY")t=window.innerWidth,r=window.innerHeight,n=(0,Iae.default)((0,YDr.default)(e).documentElement)||(0,Iae.default)(e);else{var o=(0,Mae.default)(e);t=o.width,r=o.height,n=(0,Iae.default)(e)}return{width:t,height:r,scroll:n}}function ZDr(e,t,r,n){var o=aQe(r),i=o.scroll,a=o.height,c=e-n-i,h=e+n-i+t;return c<0?-c:h>a?a-h:0}function KDr(e,t,r,n){var o=aQe(r),i=o.width,a=e-n,c=e+n+t;return a<0?-a:c>i?i-c:0}function XDr(e,t,r,n,o){var i=n.tagName==="BODY"?(0,Mae.default)(r):(0,HDr.default)(r,n),a=(0,Mae.default)(t),c=a.height,h=a.width,m=void 0,y=void 0,w=void 0,E=void 0;if(e==="left"||e==="right"){y=i.top+(i.height-c)/2,e==="left"?m=i.left-h:m=i.left+i.width;var A=ZDr(y,c,n,o);y+=A,E=50*(1-2*A/c)+"%",w=void 0}else if(e==="top"||e==="bottom"){m=i.left+(i.width-h)/2,e==="top"?y=i.top-c:y=i.top+i.height;var P=KDr(m,h,n,o);m+=P,w=50*(1-2*P/h)+"%",E=void 0}else throw new Error("calcOverlayPosition(): No such placement of \""+e+"\" found.");return{positionLeft:m,positionTop:y,arrowOffsetLeft:w,arrowOffsetTop:E}}sQe.exports=H8.default});var gQe=N((W8,mQe)=>{"use strict";u();W8.__esModule=!0;var uQe=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},JDr=ko(),QDr=E0(JDr),eNr=It(),fb=E0(eNr),tNr=SP(),cQe=E0(tNr),hQe=ke(),pQe=E0(hQe),rNr=xa(),fQe=E0(rNr),nNr=lQe(),oNr=E0(nNr),iNr=MP(),aNr=E0(iNr),sNr=cb(),lNr=E0(sNr);function E0(e){return e&&e.__esModule?e:{default:e}}function dQe(e,t){var r={};for(var n in e)t.indexOf(n)>=0||Object.prototype.hasOwnProperty.call(e,n)&&(r[n]=e[n]);return r}function uNr(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function cNr(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t&&(typeof t=="object"||typeof t=="function")?t:e}function pNr(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var $8=function(e){pNr(t,e);function t(r,n){uNr(this,t);var o=cNr(this,e.call(this,r,n));return o.getTarget=function(){var i=o.props.target,a=typeof i=="function"?i():i;return a&&fQe.default.findDOMNode(a)||null},o.maybeUpdatePosition=function(i){var a=o.getTarget();!o.props.shouldUpdatePosition&&a===o._lastTarget&&!i||o.updatePosition(a)},o.state={positionLeft:0,positionTop:0,arrowOffsetLeft:null,arrowOffsetTop:null},o._needsFlush=!1,o._lastTarget=null,o}return t.prototype.componentDidMount=function(){this.updatePosition(this.getTarget())},t.prototype.UNSAFE_componentWillReceiveProps=function(){this._needsFlush=!0},t.prototype.componentDidUpdate=function(n){this._needsFlush&&(this._needsFlush=!1,this.maybeUpdatePosition(this.props.placement!==n.placement))},t.prototype.render=function(){var n=this.props,o=n.children,i=n.className,a=dQe(n,["children","className"]),c=this.state,h=c.positionLeft,m=c.positionTop,y=dQe(c,["positionLeft","positionTop"]);delete a.target,delete a.container,delete a.containerPadding,delete a.shouldUpdatePosition;var w=pQe.default.Children.only(o);return(0,hQe.cloneElement)(w,uQe({},a,y,{positionLeft:h,positionTop:m,className:(0,QDr.default)(i,w.props.className),style:uQe({},w.props.style,{left:h,top:m})}))},t.prototype.updatePosition=function(n){if(this._lastTarget=n,!n){this.setState({positionLeft:0,positionTop:0,arrowOffsetLeft:null,arrowOffsetTop:null});return}var o=fQe.default.findDOMNode(this),i=(0,aNr.default)(this.props.container,(0,lNr.default)(this).body);this.setState((0,oNr.default)(this.props.placement,o,n,i,this.props.containerPadding))},t}(pQe.default.Component);$8.propTypes={target:fb.default.oneOfType([cQe.default,fb.default.func]),container:fb.default.oneOfType([cQe.default,fb.default.func]),containerPadding:fb.default.number,placement:fb.default.oneOf(["top","right","bottom","left"]),shouldUpdatePosition:fb.default.bool};$8.displayName="Position";$8.defaultProps={containerPadding:0,placement:"right",shouldUpdatePosition:!1};W8.default=$8;mQe.exports=W8.default});var wQe=N((Y8,xQe)=>{"use strict";u();Y8.__esModule=!0;var fNr=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},dNr=It(),$g=sT(dNr),hNr=$u(),mNr=sT(hNr),gNr=ke(),RP=sT(gNr),vNr=lae(),vQe=sT(vNr),yNr=gQe(),yQe=sT(yNr),_Nr=nXe(),_Qe=sT(_Nr);function sT(e){return e&&e.__esModule?e:{default:e}}function bNr(e,t){var r={};for(var n in e)t.indexOf(n)>=0||Object.prototype.hasOwnProperty.call(e,n)&&(r[n]=e[n]);return r}function xNr(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function wNr(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t&&(typeof t=="object"||typeof t=="function")?t:e}function ENr(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var bQe=function(e){ENr(t,e);function t(r,n){xNr(this,t);var o=wNr(this,e.call(this,r,n));return o.handleHidden=function(){if(o.setState({exited:!0}),o.props.onExited){var i;(i=o.props).onExited.apply(i,arguments)}},o.state={exited:!r.show},o.onHiddenListener=o.handleHidden.bind(o),o}return t.prototype.UNSAFE_componentWillReceiveProps=function(n){n.show?this.setState({exited:!1}):n.transition||this.setState({exited:!0})},t.prototype.render=function(){var n=this.props,o=n.container,i=n.containerPadding,a=n.target,c=n.placement,h=n.shouldUpdatePosition,m=n.rootClose,y=n.children,w=n.transition,E=bNr(n,["container","containerPadding","target","placement","shouldUpdatePosition","rootClose","children","transition"]),A=E.show||w&&!this.state.exited;if(!A)return null;var P=y;if(P=RP.default.createElement(yQe.default,{container:o,containerPadding:i,target:a,placement:c,shouldUpdatePosition:h},P),w){var j=E.onExit,D=E.onExiting,L=E.onEnter,z=E.onEntering,B=E.onEntered;P=RP.default.createElement(w,{in:E.show,appear:!0,onExit:j,onExiting:D,onExited:this.onHiddenListener,onEnter:L,onEntering:z,onEntered:B},P)}return m&&(P=RP.default.createElement(_Qe.default,{onRootClose:E.onHide,event:E.rootCloseEvent},P)),RP.default.createElement(vQe.default,{container:o},P)},t}(RP.default.Component);bQe.propTypes=fNr({},vQe.default.propTypes,yQe.default.propTypes,{show:$g.default.bool,rootClose:$g.default.bool,rootCloseEvent:_Qe.default.propTypes.event,onHide:function(t){var r=$g.default.func;t.rootClose&&(r=r.isRequired);for(var n=arguments.length,o=Array(n>1?n-1:0),i=1;i<n;i++)o[i-1]=arguments[i];return r.apply(void 0,[t].concat(o))},transition:mNr.default,onEnter:$g.default.func,onEntering:$g.default.func,onEntered:$g.default.func,onExit:$g.default.func,onExiting:$g.default.func,onExited:$g.default.func});Y8.default=bQe;xQe.exports=Y8.default});var Vet=N((Pno,Qg)=>{u();function ase(e,t){return Qg.exports=ase=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(r,n){return r.__proto__=n,r},Qg.exports.__esModule=!0,Qg.exports.default=Qg.exports,ase(e,t)}Qg.exports=ase,Qg.exports.__esModule=!0,Qg.exports.default=Qg.exports});var sse=N((Nno,nD)=>{u();var y5r=Vet();function _5r(e,t){e.prototype=Object.create(t.prototype),e.prototype.constructor=e,y5r(e,t)}nD.exports=_5r,nD.exports.__esModule=!0,nD.exports.default=nD.exports});var use=N(lse=>{"use strict";u();Object.defineProperty(lse,"__esModule",{value:!0});function b5r(e){if(e.sheet)return e.sheet;for(var t=0;t<document.styleSheets.length;t++)if(document.styleSheets[t].ownerNode===e)return document.styleSheets[t]}function x5r(e){var t=document.createElement("style");return t.setAttribute("data-emotion",e.key),e.nonce!==void 0&&t.setAttribute("nonce",e.nonce),t.appendChild(document.createTextNode("")),t}var w5r=function(){function e(r){this.isSpeedy=r.speedy===void 0?!0:r.speedy,this.tags=[],this.ctr=0,this.nonce=r.nonce,this.key=r.key,this.container=r.container,this.before=null}var t=e.prototype;return t.insert=function(n){if(this.ctr%(this.isSpeedy?65e3:1)===0){var o=x5r(this),i;this.tags.length===0?i=this.before:i=this.tags[this.tags.length-1].nextSibling,this.container.insertBefore(o,i),this.tags.push(o)}var a=this.tags[this.tags.length-1];if(this.isSpeedy){var c=b5r(a);try{var h=n.charCodeAt(1)===105&&n.charCodeAt(0)===64;c.insertRule(n,h?0:c.cssRules.length)}catch(m){}}else a.appendChild(document.createTextNode(n));this.ctr++},t.flush=function(){this.tags.forEach(function(n){return n.parentNode.removeChild(n)}),this.tags=[],this.ctr=0},e}();lse.StyleSheet=w5r});var Get=N(cse=>{"use strict";u();Object.defineProperty(cse,"__esModule",{value:!0});function E5r(e){function t(et,pt,ot,$e,De){for(var Ke=0,Ge=0,ft=0,mt=0,Ot,At,Mt=0,Yt=0,jt,Ut=jt=Ot=0,ar=0,jr=0,Or=0,br=0,Pr=ot.length,Le=Pr-1,Je,tt="",Ft="",$t="",xe="",J;ar<Pr;){if(At=ot.charCodeAt(ar),ar===Le&&Ge+mt+ft+Ke!==0&&(Ge!==0&&(At=Ge===47?10:47),mt=ft=Ke=0,Pr++,Le++),Ge+mt+ft+Ke===0){if(ar===Le&&(0<jr&&(tt=tt.replace(E,"")),0<tt.trim().length)){switch(At){case 32:case 9:case 59:case 13:case 10:break;default:tt+=ot.charAt(ar)}At=59}switch(At){case 123:for(tt=tt.trim(),Ot=tt.charCodeAt(0),jt=1,br=++ar;ar<Pr;){switch(At=ot.charCodeAt(ar)){case 123:jt++;break;case 125:jt--;break;case 47:switch(At=ot.charCodeAt(ar+1)){case 42:case 47:e:{for(Ut=ar+1;Ut<Le;++Ut)switch(ot.charCodeAt(Ut)){case 47:if(At===42&&ot.charCodeAt(Ut-1)===42&&ar+2!==Ut){ar=Ut+1;break e}break;case 10:if(At===47){ar=Ut+1;break e}}ar=Ut}}break;case 91:At++;case 40:At++;case 34:case 39:for(;ar++<Le&&ot.charCodeAt(ar)!==At;);}if(jt===0)break;ar++}switch(jt=ot.substring(br,ar),Ot===0&&(Ot=(tt=tt.replace(w,"").trim()).charCodeAt(0)),Ot){case 64:switch(0<jr&&(tt=tt.replace(E,"")),At=tt.charCodeAt(1),At){case 100:case 109:case 115:case 45:jr=pt;break;default:jr=rt}if(jt=t(pt,jr,jt,At,De+1),br=jt.length,0<qe&&(jr=r(rt,tt,Or),J=c(3,jt,jr,pt,de,_e,br,At,De,$e),tt=jr.join(""),J!==void 0&&(br=(jt=J.trim()).length)===0&&(At=0,jt="")),0<br)switch(At){case 115:tt=tt.replace(K,a);case 100:case 109:case 45:jt=tt+"{"+jt+"}";break;case 107:tt=tt.replace(z,"$1 $2"),jt=tt+"{"+jt+"}",jt=Ze===1||Ze===2&&i("@"+jt,3)?"@-webkit-"+jt+"@"+jt:"@"+jt;break;default:jt=tt+jt,$e===112&&(jt=(Ft+=jt,""))}else jt="";break;default:jt=t(pt,r(pt,tt,Or),jt,$e,De+1)}$t+=jt,jt=Or=jr=Ut=Ot=0,tt="",At=ot.charCodeAt(++ar);break;case 125:case 59:if(tt=(0<jr?tt.replace(E,""):tt).trim(),1<(br=tt.length))switch(Ut===0&&(Ot=tt.charCodeAt(0),Ot===45||96<Ot&&123>Ot)&&(br=(tt=tt.replace(" ",":")).length),0<qe&&(J=c(1,tt,pt,et,de,_e,Ft.length,$e,De,$e))!==void 0&&(br=(tt=J.trim()).length)===0&&(tt="\0\0"),Ot=tt.charCodeAt(0),At=tt.charCodeAt(1),Ot){case 0:break;case 64:if(At===105||At===99){xe+=tt+ot.charAt(ar);break}default:tt.charCodeAt(br-1)!==58&&(Ft+=o(tt,Ot,At,tt.charCodeAt(2)))}Or=jr=Ut=Ot=0,tt="",At=ot.charCodeAt(++ar)}}switch(At){case 13:case 10:Ge===47?Ge=0:1+Ot===0&&$e!==107&&0<tt.length&&(jr=1,tt+="\0"),0<qe*_t&&c(0,tt,pt,et,de,_e,Ft.length,$e,De,$e),_e=1,de++;break;case 59:case 125:if(Ge+mt+ft+Ke===0){_e++;break}default:switch(_e++,Je=ot.charAt(ar),At){case 9:case 32:if(mt+Ke+Ge===0)switch(Mt){case 44:case 58:case 9:case 32:Je="";break;default:At!==32&&(Je=" ")}break;case 0:Je="\\0";break;case 12:Je="\\f";break;case 11:Je="\\v";break;case 38:mt+Ge+Ke===0&&(jr=Or=1,Je="\f"+Je);break;case 108:if(mt+Ge+Ke+Ce===0&&0<Ut)switch(ar-Ut){case 2:Mt===112&&ot.charCodeAt(ar-3)===58&&(Ce=Mt);case 8:Yt===111&&(Ce=Yt)}break;case 58:mt+Ge+Ke===0&&(Ut=ar);break;case 44:Ge+ft+mt+Ke===0&&(jr=1,Je+="\r");break;case 34:case 39:Ge===0&&(mt=mt===At?0:mt===0?At:mt);break;case 91:mt+Ge+ft===0&&Ke++;break;case 93:mt+Ge+ft===0&&Ke--;break;case 41:mt+Ge+Ke===0&&ft--;break;case 40:if(mt+Ge+Ke===0){if(Ot===0)switch(2*Mt+3*Yt){case 533:break;default:Ot=1}ft++}break;case 64:Ge+ft+mt+Ke+Ut+jt===0&&(jt=1);break;case 42:case 47:if(!(0<mt+Ke+ft))switch(Ge){case 0:switch(2*At+3*ot.charCodeAt(ar+1)){case 235:Ge=47;break;case 220:br=ar,Ge=42}break;case 42:At===47&&Mt===42&&br+2!==ar&&(ot.charCodeAt(br+2)===33&&(Ft+=ot.substring(br,ar+1)),Je="",Ge=0)}}Ge===0&&(tt+=Je)}Yt=Mt,Mt=At,ar++}if(br=Ft.length,0<br){if(jr=pt,0<qe&&(J=c(2,Ft,jr,et,de,_e,br,$e,De,$e),J!==void 0&&(Ft=J).length===0))return xe+Ft+$t;if(Ft=jr.join(",")+"{"+Ft+"}",Ze*Ce!==0){switch(Ze!==2||i(Ft,2)||(Ce=0),Ce){case 111:Ft=Ft.replace(G,":-moz-$1")+Ft;break;case 112:Ft=Ft.replace(B,"::-webkit-input-$1")+Ft.replace(B,"::-moz-$1")+Ft.replace(B,":-ms-input-$1")+Ft}Ce=0}}return xe+Ft+$t}function r(et,pt,ot){var $e=pt.trim().split(D);pt=$e;var De=$e.length,Ke=et.length;switch(Ke){case 0:case 1:var Ge=0;for(et=Ke===0?"":et[0]+" ";Ge<De;++Ge)pt[Ge]=n(et,pt[Ge],ot).trim();break;default:var ft=Ge=0;for(pt=[];Ge<De;++Ge)for(var mt=0;mt<Ke;++mt)pt[ft++]=n(et[mt]+" ",$e[Ge],ot).trim()}return pt}function n(et,pt,ot){var $e=pt.charCodeAt(0);switch(33>$e&&($e=(pt=pt.trim()).charCodeAt(0)),$e){case 38:return pt.replace(L,"$1"+et.trim());case 58:return et.trim()+pt.replace(L,"$1"+et.trim());default:if(0<1*ot&&0<pt.indexOf("\f"))return pt.replace(L,(et.charCodeAt(0)===58?"":"$1")+et.trim())}return et+pt}function o(et,pt,ot,$e){var De=et+";",Ke=2*pt+3*ot+4*$e;if(Ke===944){et=De.indexOf(":",9)+1;var Ge=De.substring(et,De.length-1).trim();return Ge=De.substring(0,et).trim()+Ge+";",Ze===1||Ze===2&&i(Ge,1)?"-webkit-"+Ge+Ge:Ge}if(Ze===0||Ze===2&&!i(De,1))return De;switch(Ke){case 1015:return De.charCodeAt(10)===97?"-webkit-"+De+De:De;case 951:return De.charCodeAt(3)===116?"-webkit-"+De+De:De;case 963:return De.charCodeAt(5)===110?"-webkit-"+De+De:De;case 1009:if(De.charCodeAt(4)!==100)break;case 969:case 942:return"-webkit-"+De+De;case 978:return"-webkit-"+De+"-moz-"+De+De;case 1019:case 983:return"-webkit-"+De+"-moz-"+De+"-ms-"+De+De;case 883:if(De.charCodeAt(8)===45)return"-webkit-"+De+De;if(0<De.indexOf("image-set(",11))return De.replace(me,"$1-webkit-$2")+De;break;case 932:if(De.charCodeAt(4)===45)switch(De.charCodeAt(5)){case 103:return"-webkit-box-"+De.replace("-grow","")+"-webkit-"+De+"-ms-"+De.replace("grow","positive")+De;case 115:return"-webkit-"+De+"-ms-"+De.replace("shrink","negative")+De;case 98:return"-webkit-"+De+"-ms-"+De.replace("basis","preferred-size")+De}return"-webkit-"+De+"-ms-"+De+De;case 964:return"-webkit-"+De+"-ms-flex-"+De+De;case 1023:if(De.charCodeAt(8)!==99)break;return Ge=De.substring(De.indexOf(":",15)).replace("flex-","").replace("space-between","justify"),"-webkit-box-pack"+Ge+"-webkit-"+De+"-ms-flex-pack"+Ge+De;case 1005:return P.test(De)?De.replace(A,":-webkit-")+De.replace(A,":-moz-")+De:De;case 1e3:switch(Ge=De.substring(13).trim(),pt=Ge.indexOf("-")+1,Ge.charCodeAt(0)+Ge.charCodeAt(pt)){case 226:Ge=De.replace(Z,"tb");break;case 232:Ge=De.replace(Z,"tb-rl");break;case 220:Ge=De.replace(Z,"lr");break;default:return De}return"-webkit-"+De+"-ms-"+Ge+De;case 1017:if(De.indexOf("sticky",9)===-1)break;case 975:switch(pt=(De=et).length-10,Ge=(De.charCodeAt(pt)===33?De.substring(0,pt):De).substring(et.indexOf(":",7)+1).trim(),Ke=Ge.charCodeAt(0)+(Ge.charCodeAt(7)|0)){case 203:if(111>Ge.charCodeAt(8))break;case 115:De=De.replace(Ge,"-webkit-"+Ge)+";"+De;break;case 207:case 102:De=De.replace(Ge,"-webkit-"+(102<Ke?"inline-":"")+"box")+";"+De.replace(Ge,"-webkit-"+Ge)+";"+De.replace(Ge,"-ms-"+Ge+"box")+";"+De}return De+";";case 938:if(De.charCodeAt(5)===45)switch(De.charCodeAt(6)){case 105:return Ge=De.replace("-items",""),"-webkit-"+De+"-webkit-box-"+Ge+"-ms-flex-"+Ge+De;case 115:return"-webkit-"+De+"-ms-flex-item-"+De.replace(se,"")+De;default:return"-webkit-"+De+"-ms-flex-line-pack"+De.replace("align-content","").replace(se,"")+De}break;case 973:case 989:if(De.charCodeAt(3)!==45||De.charCodeAt(4)===122)break;case 931:case 953:if(pe.test(et)===!0)return(Ge=et.substring(et.indexOf(":")+1)).charCodeAt(0)===115?o(et.replace("stretch","fill-available"),pt,ot,$e).replace(":fill-available",":stretch"):De.replace(Ge,"-webkit-"+Ge)+De.replace(Ge,"-moz-"+Ge.replace("fill-",""))+De;break;case 962:if(De="-webkit-"+De+(De.charCodeAt(5)===102?"-ms-"+De:"")+De,ot+$e===211&&De.charCodeAt(13)===105&&0<De.indexOf("transform",10))return De.substring(0,De.indexOf(";",27)+1).replace(j,"$1-webkit-$2")+De}return De}function i(et,pt){var ot=et.indexOf(pt===1?":":"{"),$e=et.substring(0,pt!==3?ot:10);return ot=et.substring(ot+1,et.length-1),lt(pt!==2?$e:$e.replace(le,"$1"),ot,pt)}function a(et,pt){var ot=o(pt,pt.charCodeAt(0),pt.charCodeAt(1),pt.charCodeAt(2));return ot!==pt+";"?ot.replace(te," or ($1)").substring(4):"("+pt+")"}function c(et,pt,ot,$e,De,Ke,Ge,ft,mt,Ot){for(var At=0,Mt=pt,Yt;At<qe;++At)switch(Yt=ct[At].call(y,et,Mt,ot,$e,De,Ke,Ge,ft,mt,Ot)){case void 0:case!1:case!0:case null:break;default:Mt=Yt}if(Mt!==pt)return Mt}function h(et){switch(et){case void 0:case null:qe=ct.length=0;break;default:if(typeof et=="function")ct[qe++]=et;else if(typeof et=="object")for(var pt=0,ot=et.length;pt<ot;++pt)h(et[pt]);else _t=!!et|0}return h}function m(et){return et=et.prefix,et!==void 0&&(lt=null,et?typeof et!="function"?Ze=1:(Ze=2,lt=et):Ze=0),m}function y(et,pt){var ot=et;if(33>ot.charCodeAt(0)&&(ot=ot.trim()),Tt=ot,ot=[Tt],0<qe){var $e=c(-1,pt,ot,ot,de,_e,0,0,0,0);$e!==void 0&&typeof $e=="string"&&(pt=$e)}var De=t(rt,ot,pt,0,0);return 0<qe&&($e=c(-2,De,ot,ot,de,_e,De.length,0,0,0),$e!==void 0&&(De=$e)),Tt="",Ce=0,_e=de=1,De}var w=/^\0+/g,E=/[\0\r\f]/g,A=/: */g,P=/zoo|gra/,j=/([,: ])(transform)/g,D=/,\r+?/g,L=/([\t\r\n ])*\f?&/g,z=/@(k\w+)\s*(\S*)\s*/,B=/::(place)/g,G=/:(read-only)/g,Z=/[svh]\w+-[tblr]{2}/,K=/\(\s*(.*)\s*\)/g,te=/([\s\S]*?);/g,se=/-self|flex-/g,le=/[^]*?(:[rp][el]a[\w-]+)[^]*/,pe=/stretch|:\s*\w+\-(?:conte|avail)/,me=/([^-])(image-set\()/,_e=1,de=1,Ce=0,Ze=1,rt=[],ct=[],qe=0,lt=null,_t=0,Tt="";return y.use=h,y.set=m,e!==void 0&&m(e),y}cse.default=E5r});var Het=N(pse=>{"use strict";u();Object.defineProperty(pse,"__esModule",{value:!0});var S5r=function(t){var r=new WeakMap;return function(n){if(r.has(n))return r.get(n);var o=t(n);return r.set(n,o),o}};pse.default=S5r});var hse=N(dse=>{"use strict";u();Object.defineProperty(dse,"__esModule",{value:!0});function T5r(e){return e&&typeof e=="object"&&"default"in e?e.default:e}var I5r=use(),M5r=T5r(Get());Het();var fse="/*|*/",C5r=fse+"}";function A5r(e){e&&TF.current.insert(e+"}")}var TF={current:null},O5r=function(t,r,n,o,i,a,c,h,m,y){switch(t){case 1:{switch(r.charCodeAt(0)){case 64:return TF.current.insert(r+";"),"";case 108:if(r.charCodeAt(2)===98)return""}break}case 2:{if(h===0)return r+fse;break}case 3:switch(h){case 102:case 112:return TF.current.insert(n[0]+r),"";default:return r+(y===0?fse:"")}case-2:r.split(C5r).forEach(A5r)}},P5r=function(t){t===void 0&&(t={});var r=t.key||"css",n;t.prefix!==void 0&&(n={prefix:t.prefix});var o=new M5r(n),i={},a;{a=t.container||document.head;var c=document.querySelectorAll("style[data-emotion-"+r+"]");Array.prototype.forEach.call(c,function(E){var A=E.getAttribute("data-emotion-"+r);A.split(" ").forEach(function(P){i[P]=!0}),E.parentNode!==a&&a.appendChild(E)})}var h;if(o.use(t.stylisPlugins)(O5r),h=function(A,P,j,D){var L=P.name;if(TF.current=j,0)var z;o(A,P.styles),D&&(w.inserted[L]=!0)},0)var m,y;var w={key:r,sheet:new I5r.StyleSheet({key:r,container:a,nonce:t.nonce,speedy:t.speedy}),nonce:t.nonce,inserted:i,registered:{},insert:h};return w};dse.default=P5r});var mse=N(IF=>{"use strict";u();Object.defineProperty(IF,"__esModule",{value:!0});var D5r=!0;function N5r(e,t,r){var n="";return r.split(" ").forEach(function(o){e[o]!==void 0?t.push(e[o]):n+=o+" "}),n}var L5r=function(t,r,n){var o=t.key+"-"+r.name;if((n===!1||D5r===!1&&t.compat!==void 0)&&t.registered[o]===void 0&&(t.registered[o]=r.styles),t.inserted[r.name]===void 0){var i=r;do{var a=t.insert("."+o,i,t.sheet,!0);i=i.next}while(i!==void 0)}};IF.getRegisteredStyles=N5r;IF.insertStyles=L5r});var $et=N(gse=>{"use strict";u();Object.defineProperty(gse,"__esModule",{value:!0});function k5r(e){for(var t=0,r,n=0,o=e.length;o>=4;++n,o-=4)r=e.charCodeAt(n)&255|(e.charCodeAt(++n)&255)<<8|(e.charCodeAt(++n)&255)<<16|(e.charCodeAt(++n)&255)<<24,r=(r&65535)*1540483477+((r>>>16)*59797<<16),r^=r>>>24,t=(r&65535)*1540483477+((r>>>16)*59797<<16)^(t&65535)*1540483477+((t>>>16)*59797<<16);switch(o){case 3:t^=(e.charCodeAt(n+2)&255)<<16;case 2:t^=(e.charCodeAt(n+1)&255)<<8;case 1:t^=e.charCodeAt(n)&255,t=(t&65535)*1540483477+((t>>>16)*59797<<16)}return t^=t>>>13,t=(t&65535)*1540483477+((t>>>16)*59797<<16),((t^t>>>15)>>>0).toString(36)}gse.default=k5r});var Wet=N(vse=>{"use strict";u();Object.defineProperty(vse,"__esModule",{value:!0});var R5r={animationIterationCount:1,borderImageOutset:1,borderImageSlice:1,borderImageWidth:1,boxFlex:1,boxFlexGroup:1,boxOrdinalGroup:1,columnCount:1,columns:1,flex:1,flexGrow:1,flexPositive:1,flexShrink:1,flexNegative:1,flexOrder:1,gridRow:1,gridRowEnd:1,gridRowSpan:1,gridRowStart:1,gridColumn:1,gridColumnEnd:1,gridColumnSpan:1,gridColumnStart:1,msGridRow:1,msGridRowSpan:1,msGridColumn:1,msGridColumnSpan:1,fontWeight:1,lineHeight:1,opacity:1,order:1,orphans:1,tabSize:1,widows:1,zIndex:1,zoom:1,WebkitLineClamp:1,fillOpacity:1,floodOpacity:1,stopOpacity:1,strokeDasharray:1,strokeDashoffset:1,strokeMiterlimit:1,strokeOpacity:1,strokeWidth:1};vse.default=R5r});var Yet=N(yse=>{"use strict";u();Object.defineProperty(yse,"__esModule",{value:!0});function j5r(e){var t={};return function(r){return t[r]===void 0&&(t[r]=e(r)),t[r]}}yse.default=j5r});var MF=N(xse=>{"use strict";u();Object.defineProperty(xse,"__esModule",{value:!0});function bse(e){return e&&typeof e=="object"&&"default"in e?e.default:e}var q5r=bse($et()),z5r=bse(Wet()),F5r=bse(Yet()),U5r=/[A-Z]|^ms/g,B5r=/_EMO_([^_]+?)_([^]*?)_EMO_/g,Jet=function(t){return t.charCodeAt(1)===45},Zet=function(t){return t!=null&&typeof t!="boolean"},_se=F5r(function(e){return Jet(e)?e:e.replace(U5r,"-$&").toLowerCase()}),Ket=function(t,r){switch(t){case"animation":case"animationName":if(typeof r=="string")return r.replace(B5r,function(n,o,i){return om={name:o,styles:i,next:om},o})}return z5r[t]!==1&&!Jet(t)&&typeof r=="number"&&r!==0?r+"px":r};function oD(e,t,r,n){if(r==null)return"";if(r.__emotion_styles!==void 0)return r;switch(typeof r){case"boolean":return"";case"object":{if(r.anim===1)return om={name:r.name,styles:r.styles,next:om},r.name;if(r.styles!==void 0){var o=r.next;if(o!==void 0)for(;o!==void 0;)om={name:o.name,styles:o.styles,next:om},o=o.next;var i=r.styles+";";return i}return V5r(e,t,r)}case"function":{if(e!==void 0){var a=om,c=r(e);return om=a,oD(e,t,c,n)}break}case"string":if(0)var h,m;break}if(t==null)return r;var y=t[r];return y!==void 0&&!n?y:r}function V5r(e,t,r){var n="";if(Array.isArray(r))for(var o=0;o<r.length;o++)n+=oD(e,t,r[o],!1);else for(var i in r){var a=r[i];if(typeof a!="object")t!=null&&t[a]!==void 0?n+=i+"{"+t[a]+"}":Zet(a)&&(n+=_se(i)+":"+Ket(i,a)+";");else if(Array.isArray(a)&&typeof a[0]=="string"&&(t==null||t[a[0]]===void 0))for(var c=0;c<a.length;c++)Zet(a[c])&&(n+=_se(i)+":"+Ket(i,a[c])+";");else{var h=oD(e,t,a,!1);switch(i){case"animation":case"animationName":{n+=_se(i)+":"+h+";";break}default:n+=i+"{"+h+"}"}}}return n}var Xet=/label:\s*([^\s;\n{]+)\s*;/g,om,G5r=function(t,r,n){if(t.length===1&&typeof t[0]=="object"&&t[0]!==null&&t[0].styles!==void 0)return t[0];var o=!0,i="";om=void 0;var a=t[0];a==null||a.raw===void 0?(o=!1,i+=oD(n,r,a,!1)):i+=a[0];for(var c=1;c<t.length;c++)i+=oD(n,r,t[c],i.charCodeAt(i.length-1)===46),o&&(i+=a[c]);var h;Xet.lastIndex=0;for(var m="",y;(y=Xet.exec(i))!==null;)m+="-"+y[1];var w=q5r(i)+m;return{name:w,styles:i,next:om}};xse.serializeStyles=G5r});var ott=N(xb=>{"use strict";u();sse();var ev=ke(),H5r=hse(),Qet=mse(),$5r=MF();function W5r(e){return e&&e.__esModule?e:{default:e}}var Y5r=W5r(H5r),Ese=Object.prototype.hasOwnProperty,ttt=ev.createContext(typeof HTMLElement!="undefined"?Y5r.default():null),rtt=ev.createContext({}),Z5r=ttt.Provider,ntt=function(t){var r=function(o,i){return ev.createElement(ttt.Consumer,null,function(a){return t(o,a,i)})};return ev.forwardRef(r)},wse="__EMOTION_TYPE_PLEASE_DO_NOT_USE__",K5r=function(t,r){var n={};for(var o in r)Ese.call(r,o)&&(n[o]=r[o]);if(n[wse]=t,0){var i;if(i.stack)var a}return n},X5r=function(){return null},ett=function(t,r,n,o){var i=n===null?r.css:r.css(n);typeof i=="string"&&t.registered[i]!==void 0&&(i=t.registered[i]);var a=r[wse],c=[i],h="";typeof r.className=="string"?h=Qet.getRegisteredStyles(t.registered,c,r.className):r.className!=null&&(h=r.className+" ");var m=$5r.serializeStyles(c);if(0)var y;var w=Qet.insertStyles(t,m,typeof a=="string");h+=t.key+"-"+m.name;var E={};for(var A in r)Ese.call(r,A)&&A!=="css"&&A!==wse&&(E[A]=r[A]);E.ref=o,E.className=h;var P=ev.createElement(a,E),j=ev.createElement(X5r,null);return ev.createElement(ev.Fragment,null,j,P)},J5r=ntt(function(e,t,r){return typeof e.css=="function"?ev.createElement(rtt.Consumer,null,function(n){return ett(t,e,n,r)}):ett(t,e,null,r)});xb.CacheProvider=Z5r;xb.Emotion=J5r;xb.ThemeContext=rtt;xb.createEmotionProps=K5r;xb.hasOwnProperty=Ese;xb.withEmotionCache=ntt});var itt=N(Sse=>{"use strict";u();Object.defineProperty(Sse,"__esModule",{value:!0});var Q5r=MF();function eLr(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];return Q5r.serializeStyles(t)}Sse.default=eLr});var ctt=N(Gd=>{"use strict";u();Object.defineProperty(Gd,"__esModule",{value:!0});var tLr=sse(),im=ke();hse();var am=ott(),Ise=mse(),Tse=MF(),rLr=use(),nLr=itt();function stt(e){return e&&e.__esModule?e:{default:e}}var oLr=stt(tLr),ltt=stt(nLr),utt=function(t,r){var n=arguments;if(r==null||!am.hasOwnProperty.call(r,"css"))return im.createElement.apply(void 0,n);var o=n.length,i=new Array(o);i[0]=am.Emotion,i[1]=am.createEmotionProps(t,r);for(var a=2;a<o;a++)i[a]=n[a];return im.createElement.apply(null,i)},iLr=am.withEmotionCache(function(e,t){var r=e.styles;if(typeof r=="function")return im.createElement(am.ThemeContext.Consumer,null,function(o){var i=Tse.serializeStyles([r(o)]);return im.createElement(att,{serialized:i,cache:t})});var n=Tse.serializeStyles([r]);return im.createElement(att,{serialized:n,cache:t})}),att=function(e){oLr.default(t,e);function t(n,o,i){return e.call(this,n,o,i)||this}var r=t.prototype;return r.componentDidMount=function(){this.sheet=new rLr.StyleSheet({key:this.props.cache.key+"-global",nonce:this.props.cache.sheet.nonce,container:this.props.cache.sheet.container});var o=document.querySelector("style[data-emotion-"+this.props.cache.key+"=\""+this.props.serialized.name+"\"]");o!==null&&this.sheet.tags.push(o),this.props.cache.sheet.tags.length&&(this.sheet.before=this.props.cache.sheet.tags[0]),this.insertStyles()},r.componentDidUpdate=function(o){o.serialized.name!==this.props.serialized.name&&this.insertStyles()},r.insertStyles=function(){if(this.props.serialized.next!==void 0&&Ise.insertStyles(this.props.cache,this.props.serialized.next,!0),this.sheet.tags.length){var o=this.sheet.tags[this.sheet.tags.length-1].nextElementSibling;this.sheet.before=o,this.sheet.flush()}this.props.cache.insert("",this.props.serialized,this.sheet,!1)},r.componentWillUnmount=function(){this.sheet.flush()},r.render=function(){return null},t}(im.Component),aLr=function(){var t=ltt.default.apply(void 0,arguments),r="animation-"+t.name;return{name:r,styles:"@keyframes "+r+"{"+t.styles+"}",anim:1,toString:function(){return"_EMO_"+this.name+"_"+this.styles+"_EMO_"}}},sLr=function e(t){for(var r=t.length,n=0,o="";n<r;n++){var i=t[n];if(i!=null){var a=void 0;switch(typeof i){case"boolean":break;case"object":{if(Array.isArray(i))a=e(i);else{a="";for(var c in i)i[c]&&c&&(a&&(a+=" "),a+=c)}break}default:a=i}a&&(o&&(o+=" "),o+=a)}}return o};function lLr(e,t,r){var n=[],o=Ise.getRegisteredStyles(e,n,r);return n.length<2?r:o+t(n)}var uLr=function(){return null},cLr=am.withEmotionCache(function(e,t){return im.createElement(am.ThemeContext.Consumer,null,function(r){var n=!1,o=function(){for(var y=arguments.length,w=new Array(y),E=0;E<y;E++)w[E]=arguments[E];var A=Tse.serializeStyles(w,t.registered);return Ise.insertStyles(t,A,!1),t.key+"-"+A.name},i=function(){for(var y=arguments.length,w=new Array(y),E=0;E<y;E++)w[E]=arguments[E];return lLr(t.registered,o,sLr(w))},a={css:o,cx:i,theme:r},c=e.children(a);n=!0;var h=im.createElement(uLr,null);return im.createElement(im.Fragment,null,h,c)})});Gd.CacheProvider=am.CacheProvider;Gd.ThemeContext=am.ThemeContext;Gd.withEmotionCache=am.withEmotionCache;Object.defineProperty(Gd,"css",{enumerable:!0,get:function(){return ltt.default}});Gd.ClassNames=cLr;Gd.Global=iLr;Gd.createElement=utt;Gd.jsx=utt;Gd.keyframes=aLr});var Mse=N(Hd=>{"use strict";u();Object.defineProperty(Hd,"__esModule",{value:!0});Hd.default=gtt;Hd.skeletonStyles=Hd.skeletonKeyframes=Hd.defaultHighlightColor=Hd.defaultBaseColor=void 0;var ioo=pLr(ke()),xT=ctt();function pLr(e){return e&&e.__esModule?e:{default:e}}function ptt(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(o){return Object.getOwnPropertyDescriptor(e,o).enumerable})),r.push.apply(r,n)}return r}function fLr(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?ptt(r,!0).forEach(function(n){dLr(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):ptt(r).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function dLr(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function ftt(){var e=hLr([`
  0% {
    background-position: -200px 0;
  }
  `,`
  100% {
    background-position: calc(200px + 100%) 0;
  }
`]);return ftt=function(){return e},e}function hLr(e,t){return t||(t=e.slice(0)),Object.freeze(Object.defineProperties(e,{raw:{value:Object.freeze(t)}}))}var CF="#eee";Hd.defaultBaseColor=CF;var dtt="#f5f5f5";Hd.defaultHighlightColor=dtt;var htt=function(t,r){return(0,xT.keyframes)(ftt(),r>0?"".concat(Math.floor(1/(t+r)*t*100),`% {
    background-position: calc(200px + 100%) 0;
  }`):void 0)};Hd.skeletonKeyframes=htt;var mtt=(0,xT.css)("background-color:",CF,";background-image:linear-gradient( 90deg,",CF,",",dtt,",",CF," );background-size:200px 100%;background-repeat:no-repeat;border-radius:4px;display:inline-block;line-height:1;width:100%;;label:skeletonStyles;");Hd.skeletonStyles=mtt;function gtt(e){for(var t=e.count,r=e.duration,n=e.width,o=e.wrapper,i=e.height,a=e.circle,c=e.delay,h=e.style,m=e.className,y=[],w=0;w<t;w++){var E={};n!==null&&(E.width=n),i!==null&&(E.height=i),n!==null&&i!==null&&a&&(E.borderRadius="50%");var A="react-loading-skeleton";m&&(A+=" "+m),y.push((0,xT.jsx)("span",{key:w,className:A,css:(0,xT.css)(mtt," animation:",htt(r,c)," ",r+c,"s ease-in-out infinite;label:Skeleton;"),style:fLr({},h,{},E)},"\u200C"))}return(0,xT.jsx)("span",null,o?y.map(function(P,j){return(0,xT.jsx)(o,{key:j},P,"\u200C")}):y)}gtt.defaultProps={count:1,duration:1.2,width:null,wrapper:null,height:null,circle:!1,delay:0}});var ztt=N((Rse,jse)=>{u();(function(e,t){typeof Rse=="object"&&typeof jse!="undefined"?jse.exports=t():typeof define=="function"&&define.amd?define(t):(e=e||self).RBush=t()})(Rse,function(){"use strict";function e(D,L,z,B,G){(function Z(K,te,se,le,pe){for(;le>se;){if(le-se>600){var me=le-se+1,_e=te-se+1,de=Math.log(me),Ce=.5*Math.exp(2*de/3),Ze=.5*Math.sqrt(de*Ce*(me-Ce)/me)*(_e-me/2<0?-1:1),rt=Math.max(se,Math.floor(te-_e*Ce/me+Ze)),ct=Math.min(le,Math.floor(te+(me-_e)*Ce/me+Ze));Z(K,te,rt,ct,pe)}var qe=K[te],lt=se,_t=le;for(t(K,se,te),pe(K[le],qe)>0&&t(K,se,le);lt<_t;){for(t(K,lt,_t),lt++,_t--;pe(K[lt],qe)<0;)lt++;for(;pe(K[_t],qe)>0;)_t--}pe(K[se],qe)===0?t(K,se,_t):t(K,++_t,le),_t<=te&&(se=_t+1),te<=_t&&(le=_t-1)}})(D,L,z||0,B||D.length-1,G||r)}function t(D,L,z){var B=D[L];D[L]=D[z],D[z]=B}function r(D,L){return D<L?-1:D>L?1:0}var n=function(D){D===void 0&&(D=9),this._maxEntries=Math.max(4,D),this._minEntries=Math.max(2,Math.ceil(.4*this._maxEntries)),this.clear()};function o(D,L,z){if(!z)return L.indexOf(D);for(var B=0;B<L.length;B++)if(z(D,L[B]))return B;return-1}function i(D,L){a(D,0,D.children.length,L,D)}function a(D,L,z,B,G){G||(G=P(null)),G.minX=1/0,G.minY=1/0,G.maxX=-1/0,G.maxY=-1/0;for(var Z=L;Z<z;Z++){var K=D.children[Z];c(G,D.leaf?B(K):K)}return G}function c(D,L){return D.minX=Math.min(D.minX,L.minX),D.minY=Math.min(D.minY,L.minY),D.maxX=Math.max(D.maxX,L.maxX),D.maxY=Math.max(D.maxY,L.maxY),D}function h(D,L){return D.minX-L.minX}function m(D,L){return D.minY-L.minY}function y(D){return(D.maxX-D.minX)*(D.maxY-D.minY)}function w(D){return D.maxX-D.minX+(D.maxY-D.minY)}function E(D,L){return D.minX<=L.minX&&D.minY<=L.minY&&L.maxX<=D.maxX&&L.maxY<=D.maxY}function A(D,L){return L.minX<=D.maxX&&L.minY<=D.maxY&&L.maxX>=D.minX&&L.maxY>=D.minY}function P(D){return{children:D,height:1,leaf:!0,minX:1/0,minY:1/0,maxX:-1/0,maxY:-1/0}}function j(D,L,z,B,G){for(var Z=[L,z];Z.length;)if(!((z=Z.pop())-(L=Z.pop())<=B)){var K=L+Math.ceil((z-L)/B/2)*B;e(D,K,L,z,G),Z.push(L,K,K,z)}}return n.prototype.all=function(){return this._all(this.data,[])},n.prototype.search=function(D){var L=this.data,z=[];if(!A(D,L))return z;for(var B=this.toBBox,G=[];L;){for(var Z=0;Z<L.children.length;Z++){var K=L.children[Z],te=L.leaf?B(K):K;A(D,te)&&(L.leaf?z.push(K):E(D,te)?this._all(K,z):G.push(K))}L=G.pop()}return z},n.prototype.collides=function(D){var L=this.data;if(!A(D,L))return!1;for(var z=[];L;){for(var B=0;B<L.children.length;B++){var G=L.children[B],Z=L.leaf?this.toBBox(G):G;if(A(D,Z)){if(L.leaf||E(D,Z))return!0;z.push(G)}}L=z.pop()}return!1},n.prototype.load=function(D){if(!D||!D.length)return this;if(D.length<this._minEntries){for(var L=0;L<D.length;L++)this.insert(D[L]);return this}var z=this._build(D.slice(),0,D.length-1,0);if(this.data.children.length){if(this.data.height===z.height)this._splitRoot(this.data,z);else{if(this.data.height<z.height){var B=this.data;this.data=z,z=B}this._insert(z,this.data.height-z.height-1,!0)}}else this.data=z;return this},n.prototype.insert=function(D){return D&&this._insert(D,this.data.height-1),this},n.prototype.clear=function(){return this.data=P([]),this},n.prototype.remove=function(D,L){if(!D)return this;for(var z,B,G,Z=this.data,K=this.toBBox(D),te=[],se=[];Z||te.length;){if(Z||(Z=te.pop(),B=te[te.length-1],z=se.pop(),G=!0),Z.leaf){var le=o(D,Z.children,L);if(le!==-1)return Z.children.splice(le,1),te.push(Z),this._condense(te),this}G||Z.leaf||!E(Z,K)?B?(z++,Z=B.children[z],G=!1):Z=null:(te.push(Z),se.push(z),z=0,B=Z,Z=Z.children[0])}return this},n.prototype.toBBox=function(D){return D},n.prototype.compareMinX=function(D,L){return D.minX-L.minX},n.prototype.compareMinY=function(D,L){return D.minY-L.minY},n.prototype.toJSON=function(){return this.data},n.prototype.fromJSON=function(D){return this.data=D,this},n.prototype._all=function(D,L){for(var z=[];D;)D.leaf?L.push.apply(L,D.children):z.push.apply(z,D.children),D=z.pop();return L},n.prototype._build=function(D,L,z,B){var G,Z=z-L+1,K=this._maxEntries;if(Z<=K)return i(G=P(D.slice(L,z+1)),this.toBBox),G;B||(B=Math.ceil(Math.log(Z)/Math.log(K)),K=Math.ceil(Z/Math.pow(K,B-1))),(G=P([])).leaf=!1,G.height=B;var te=Math.ceil(Z/K),se=te*Math.ceil(Math.sqrt(K));j(D,L,z,se,this.compareMinX);for(var le=L;le<=z;le+=se){var pe=Math.min(le+se-1,z);j(D,le,pe,te,this.compareMinY);for(var me=le;me<=pe;me+=te){var _e=Math.min(me+te-1,pe);G.children.push(this._build(D,me,_e,B-1))}}return i(G,this.toBBox),G},n.prototype._chooseSubtree=function(D,L,z,B){for(;B.push(L),!L.leaf&&B.length-1!==z;){for(var G=1/0,Z=1/0,K=void 0,te=0;te<L.children.length;te++){var se=L.children[te],le=y(se),pe=(me=D,_e=se,(Math.max(_e.maxX,me.maxX)-Math.min(_e.minX,me.minX))*(Math.max(_e.maxY,me.maxY)-Math.min(_e.minY,me.minY))-le);pe<Z?(Z=pe,G=le<G?le:G,K=se):pe===Z&&le<G&&(G=le,K=se)}L=K||L.children[0]}var me,_e;return L},n.prototype._insert=function(D,L,z){var B=z?D:this.toBBox(D),G=[],Z=this._chooseSubtree(B,this.data,L,G);for(Z.children.push(D),c(Z,B);L>=0&&G[L].children.length>this._maxEntries;)this._split(G,L),L--;this._adjustParentBBoxes(B,G,L)},n.prototype._split=function(D,L){var z=D[L],B=z.children.length,G=this._minEntries;this._chooseSplitAxis(z,G,B);var Z=this._chooseSplitIndex(z,G,B),K=P(z.children.splice(Z,z.children.length-Z));K.height=z.height,K.leaf=z.leaf,i(z,this.toBBox),i(K,this.toBBox),L?D[L-1].children.push(K):this._splitRoot(z,K)},n.prototype._splitRoot=function(D,L){this.data=P([D,L]),this.data.height=D.height+1,this.data.leaf=!1,i(this.data,this.toBBox)},n.prototype._chooseSplitIndex=function(D,L,z){for(var B,G,Z,K,te,se,le,pe=1/0,me=1/0,_e=L;_e<=z-L;_e++){var de=a(D,0,_e,this.toBBox),Ce=a(D,_e,z,this.toBBox),Ze=(G=de,Z=Ce,K=void 0,te=void 0,se=void 0,le=void 0,K=Math.max(G.minX,Z.minX),te=Math.max(G.minY,Z.minY),se=Math.min(G.maxX,Z.maxX),le=Math.min(G.maxY,Z.maxY),Math.max(0,se-K)*Math.max(0,le-te)),rt=y(de)+y(Ce);Ze<pe?(pe=Ze,B=_e,me=rt<me?rt:me):Ze===pe&&rt<me&&(me=rt,B=_e)}return B||z-L},n.prototype._chooseSplitAxis=function(D,L,z){var B=D.leaf?this.compareMinX:h,G=D.leaf?this.compareMinY:m;this._allDistMargin(D,L,z,B)<this._allDistMargin(D,L,z,G)&&D.children.sort(B)},n.prototype._allDistMargin=function(D,L,z,B){D.children.sort(B);for(var G=this.toBBox,Z=a(D,0,L,G),K=a(D,z-L,z,G),te=w(Z)+w(K),se=L;se<z-L;se++){var le=D.children[se];c(Z,D.leaf?G(le):le),te+=w(Z)}for(var pe=z-L-1;pe>=L;pe--){var me=D.children[pe];c(K,D.leaf?G(me):me),te+=w(K)}return te},n.prototype._adjustParentBBoxes=function(D,L,z){for(var B=z;B>=0;B--)c(L[B],D)},n.prototype._condense=function(D){for(var L=D.length-1,z=void 0;L>=0;L--)D[L].children.length===0?L>0?(z=D[L-1].children).splice(z.indexOf(D[L]),1):this.clear():i(D[L],this.toBBox)},n})});var Ftt=N((qse,zse)=>{u();(function(e,t){typeof qse=="object"&&typeof zse!="undefined"?zse.exports=t():typeof define=="function"&&define.amd?define(t):(e=e||self,e.TinyQueue=t())})(qse,function(){"use strict";var e=function(n,o){if(n===void 0&&(n=[]),o===void 0&&(o=t),this.data=n,this.length=this.data.length,this.compare=o,this.length>0)for(var i=(this.length>>1)-1;i>=0;i--)this._down(i)};e.prototype.push=function(n){this.data.push(n),this.length++,this._up(this.length-1)},e.prototype.pop=function(){if(this.length!==0){var n=this.data[0],o=this.data.pop();return this.length--,this.length>0&&(this.data[0]=o,this._down(0)),n}},e.prototype.peek=function(){return this.data[0]},e.prototype._up=function(n){for(var o=this,i=o.data,a=o.compare,c=i[n];n>0;){var h=n-1>>1,m=i[h];if(a(c,m)>=0)break;i[n]=m,n=h}i[n]=c},e.prototype._down=function(n){for(var o=this,i=o.data,a=o.compare,c=this.length>>1,h=i[n];n<c;){var m=(n<<1)+1,y=i[m],w=m+1;if(w<this.length&&a(i[w],y)<0&&(m=w,y=i[w]),a(y,h)>=0)break;i[n]=y,n=m}i[n]=h};function t(r,n){return r<n?-1:r>n?1:0}return e})});var Btt=N((aao,Utt)=>{u();Utt.exports=function(t,r,n,o){var i=t[0],a=t[1],c=!1;n===void 0&&(n=0),o===void 0&&(o=r.length);for(var h=(o-n)/2,m=0,y=h-1;m<h;y=m++){var w=r[n+m*2+0],E=r[n+m*2+1],A=r[n+y*2+0],P=r[n+y*2+1],j=E>a!=P>a&&i<(A-w)*(a-E)/(P-E)+w;j&&(c=!c)}return c}});var Gtt=N((lao,Vtt)=>{u();Vtt.exports=function(t,r,n,o){var i=t[0],a=t[1],c=!1;n===void 0&&(n=0),o===void 0&&(o=r.length);for(var h=o-n,m=0,y=h-1;m<h;y=m++){var w=r[m+n][0],E=r[m+n][1],A=r[y+n][0],P=r[y+n][1],j=E>a!=P>a&&i<(A-w)*(a-E)/(P-E)+w;j&&(c=!c)}return c}});var Wtt=N((cao,RF)=>{u();var Htt=Btt(),$tt=Gtt();RF.exports=function(t,r,n,o){return r.length>0&&Array.isArray(r[0])?$tt(t,r,n,o):Htt(t,r,n,o)};RF.exports.nested=$tt;RF.exports.flat=Htt});var Ztt=N((jF,Ytt)=>{u();(function(e,t){typeof jF=="object"&&typeof Ytt!="undefined"?t(jF):typeof define=="function"&&define.amd?define(["exports"],t):t((e=e||self).predicates={})})(jF,function(e){"use strict";let r=33306690738754706e-32;function n(A,P,j,D,L){let z,B,G,Z,K=P[0],te=D[0],se=0,le=0;te>K==te>-K?(z=K,K=P[++se]):(z=te,te=D[++le]);let pe=0;if(se<A&&le<j)for(te>K==te>-K?(G=z-((B=K+z)-K),K=P[++se]):(G=z-((B=te+z)-te),te=D[++le]),z=B,G!==0&&(L[pe++]=G);se<A&&le<j;)te>K==te>-K?(G=z-((B=z+K)-(Z=B-z))+(K-Z),K=P[++se]):(G=z-((B=z+te)-(Z=B-z))+(te-Z),te=D[++le]),z=B,G!==0&&(L[pe++]=G);for(;se<A;)G=z-((B=z+K)-(Z=B-z))+(K-Z),K=P[++se],z=B,G!==0&&(L[pe++]=G);for(;le<j;)G=z-((B=z+te)-(Z=B-z))+(te-Z),te=D[++le],z=B,G!==0&&(L[pe++]=G);return z===0&&pe!==0||(L[pe++]=z),pe}function o(A){return new Float64Array(A)}let i=33306690738754716e-32,a=22204460492503146e-32,c=11093356479670487e-47,h=o(4),m=o(8),y=o(12),w=o(16),E=o(4);e.orient2d=function(A,P,j,D,L,z){let B=(P-z)*(j-L),G=(A-L)*(D-z),Z=B-G;if(B===0||G===0||B>0!=G>0)return Z;let K=Math.abs(B+G);return Math.abs(Z)>=i*K?Z:-function(te,se,le,pe,me,_e,de){let Ce,Ze,rt,ct,qe,lt,_t,Tt,et,pt,ot,$e,De,Ke,Ge,ft,mt,Ot,At=te-me,Mt=le-me,Yt=se-_e,jt=pe-_e;qe=(Ge=(Tt=At-(_t=(lt=134217729*At)-(lt-At)))*(pt=jt-(et=(lt=134217729*jt)-(lt-jt)))-((Ke=At*jt)-_t*et-Tt*et-_t*pt))-(ot=Ge-(mt=(Tt=Yt-(_t=(lt=134217729*Yt)-(lt-Yt)))*(pt=Mt-(et=(lt=134217729*Mt)-(lt-Mt)))-((ft=Yt*Mt)-_t*et-Tt*et-_t*pt))),h[0]=Ge-(ot+qe)+(qe-mt),qe=(De=Ke-(($e=Ke+ot)-(qe=$e-Ke))+(ot-qe))-(ot=De-ft),h[1]=De-(ot+qe)+(qe-ft),qe=(Ot=$e+ot)-$e,h[2]=$e-(Ot-qe)+(ot-qe),h[3]=Ot;let Ut=function(Pr,Le){let Je=Le[0];for(let tt=1;tt<Pr;tt++)Je+=Le[tt];return Je}(4,h),ar=a*de;if(Ut>=ar||-Ut>=ar||(Ce=te-(At+(qe=te-At))+(qe-me),rt=le-(Mt+(qe=le-Mt))+(qe-me),Ze=se-(Yt+(qe=se-Yt))+(qe-_e),ct=pe-(jt+(qe=pe-jt))+(qe-_e),Ce===0&&Ze===0&&rt===0&&ct===0)||(ar=c*de+r*Math.abs(Ut),(Ut+=At*ct+jt*Ce-(Yt*rt+Mt*Ze))>=ar||-Ut>=ar))return Ut;qe=(Ge=(Tt=Ce-(_t=(lt=134217729*Ce)-(lt-Ce)))*(pt=jt-(et=(lt=134217729*jt)-(lt-jt)))-((Ke=Ce*jt)-_t*et-Tt*et-_t*pt))-(ot=Ge-(mt=(Tt=Ze-(_t=(lt=134217729*Ze)-(lt-Ze)))*(pt=Mt-(et=(lt=134217729*Mt)-(lt-Mt)))-((ft=Ze*Mt)-_t*et-Tt*et-_t*pt))),E[0]=Ge-(ot+qe)+(qe-mt),qe=(De=Ke-(($e=Ke+ot)-(qe=$e-Ke))+(ot-qe))-(ot=De-ft),E[1]=De-(ot+qe)+(qe-ft),qe=(Ot=$e+ot)-$e,E[2]=$e-(Ot-qe)+(ot-qe),E[3]=Ot;let jr=n(4,h,4,E,m);qe=(Ge=(Tt=At-(_t=(lt=134217729*At)-(lt-At)))*(pt=ct-(et=(lt=134217729*ct)-(lt-ct)))-((Ke=At*ct)-_t*et-Tt*et-_t*pt))-(ot=Ge-(mt=(Tt=Yt-(_t=(lt=134217729*Yt)-(lt-Yt)))*(pt=rt-(et=(lt=134217729*rt)-(lt-rt)))-((ft=Yt*rt)-_t*et-Tt*et-_t*pt))),E[0]=Ge-(ot+qe)+(qe-mt),qe=(De=Ke-(($e=Ke+ot)-(qe=$e-Ke))+(ot-qe))-(ot=De-ft),E[1]=De-(ot+qe)+(qe-ft),qe=(Ot=$e+ot)-$e,E[2]=$e-(Ot-qe)+(ot-qe),E[3]=Ot;let Or=n(jr,m,4,E,y);qe=(Ge=(Tt=Ce-(_t=(lt=134217729*Ce)-(lt-Ce)))*(pt=ct-(et=(lt=134217729*ct)-(lt-ct)))-((Ke=Ce*ct)-_t*et-Tt*et-_t*pt))-(ot=Ge-(mt=(Tt=Ze-(_t=(lt=134217729*Ze)-(lt-Ze)))*(pt=rt-(et=(lt=134217729*rt)-(lt-rt)))-((ft=Ze*rt)-_t*et-Tt*et-_t*pt))),E[0]=Ge-(ot+qe)+(qe-mt),qe=(De=Ke-(($e=Ke+ot)-(qe=$e-Ke))+(ot-qe))-(ot=De-ft),E[1]=De-(ot+qe)+(qe-ft),qe=(Ot=$e+ot)-$e,E[2]=$e-(Ot-qe)+(ot-qe),E[3]=Ot;let br=n(Or,y,4,E,w);return w[br-1]}(A,P,j,D,L,z,K)},e.orient2dfast=function(A,P,j,D,L,z){return(P-z)*(j-L)-(A-L)*(D-z)},Object.defineProperty(e,"__esModule",{value:!0})})});var trt=N((dao,Vse)=>{"use strict";u();var Ktt=ztt(),zF=Ftt(),SLr=Wtt(),TLr=Ztt().orient2d;zF.default&&(zF=zF.default);Vse.exports=ert;Vse.exports.default=ert;function ert(e,t,r){t=Math.max(0,t===void 0?2:t),r=r||0;var n=OLr(e),o=new Ktt(16);o.toBBox=function(z){return{minX:z[0],minY:z[1],maxX:z[0],maxY:z[1]}},o.compareMinX=function(z,B){return z[0]-B[0]},o.compareMinY=function(z,B){return z[1]-B[1]},o.load(e);for(var i=[],a=0,c;a<n.length;a++){var h=n[a];o.remove(h),c=Qtt(h,c),i.push(c)}var m=new Ktt(16);for(a=0;a<i.length;a++)m.insert(Fse(i[a]));for(var y=t*t,w=r*r;i.length;){var E=i.shift(),A=E.p,P=E.next.p,j=Use(A,P);if(!(j<w)){var D=j/y;h=ILr(o,E.prev.p,A,P,E.next.next.p,D,m),h&&Math.min(Use(h,A),Use(h,P))<=D&&(i.push(E),i.push(Qtt(h,E)),o.remove(h),m.remove(E),m.insert(Fse(E)),m.insert(Fse(E.next)))}}E=c;var L=[];do L.push(E.p),E=E.next;while(E!==c);return L.push(E.p),L}function ILr(e,t,r,n,o,i,a){for(var c=new zF([],MLr),h=e.data;h;){for(var m=0;m<h.children.length;m++){var y=h.children[m],w=h.leaf?Bse(y,r,n):CLr(r,n,y);w>i||c.push({node:y,dist:w})}for(;c.length&&!c.peek().node.children;){var E=c.pop(),A=E.node,P=Bse(A,t,r),j=Bse(A,n,o);if(E.dist<P&&E.dist<j&&Jtt(r,A,a)&&Jtt(n,A,a))return A}h=c.pop(),h&&(h=h.node)}return null}function MLr(e,t){return e.dist-t.dist}function CLr(e,t,r){if(Xtt(e,r)||Xtt(t,r))return 0;var n=qF(e[0],e[1],t[0],t[1],r.minX,r.minY,r.maxX,r.minY);if(n===0)return 0;var o=qF(e[0],e[1],t[0],t[1],r.minX,r.minY,r.minX,r.maxY);if(o===0)return 0;var i=qF(e[0],e[1],t[0],t[1],r.maxX,r.minY,r.maxX,r.maxY);if(i===0)return 0;var a=qF(e[0],e[1],t[0],t[1],r.minX,r.maxY,r.maxX,r.maxY);return a===0?0:Math.min(n,o,i,a)}function Xtt(e,t){return e[0]>=t.minX&&e[0]<=t.maxX&&e[1]>=t.minY&&e[1]<=t.maxY}function Jtt(e,t,r){for(var n=Math.min(e[0],t[0]),o=Math.min(e[1],t[1]),i=Math.max(e[0],t[0]),a=Math.max(e[1],t[1]),c=r.search({minX:n,minY:o,maxX:i,maxY:a}),h=0;h<c.length;h++)if(ALr(c[h].p,c[h].next.p,e,t))return!1;return!0}function ST(e,t,r){return TLr(e[0],e[1],t[0],t[1],r[0],r[1])}function ALr(e,t,r,n){return e!==n&&t!==r&&ST(e,t,r)>0!=ST(e,t,n)>0&&ST(r,n,e)>0!=ST(r,n,t)>0}function Fse(e){var t=e.p,r=e.next.p;return e.minX=Math.min(t[0],r[0]),e.minY=Math.min(t[1],r[1]),e.maxX=Math.max(t[0],r[0]),e.maxY=Math.max(t[1],r[1]),e}function OLr(e){for(var t=e[0],r=e[0],n=e[0],o=e[0],i=0;i<e.length;i++){var a=e[i];a[0]<t[0]&&(t=a),a[0]>n[0]&&(n=a),a[1]<r[1]&&(r=a),a[1]>o[1]&&(o=a)}var c=[t,r,n,o],h=c.slice();for(i=0;i<e.length;i++)SLr(e[i],c)||h.push(e[i]);return DLr(h)}function Qtt(e,t){var r={p:e,prev:null,next:null,minX:0,minY:0,maxX:0,maxY:0};return t?(r.next=t.next,r.prev=t,t.next.prev=r,t.next=r):(r.prev=r,r.next=r),r}function Use(e,t){var r=e[0]-t[0],n=e[1]-t[1];return r*r+n*n}function Bse(e,t,r){var n=t[0],o=t[1],i=r[0]-n,a=r[1]-o;if(i!==0||a!==0){var c=((e[0]-n)*i+(e[1]-o)*a)/(i*i+a*a);c>1?(n=r[0],o=r[1]):c>0&&(n+=i*c,o+=a*c)}return i=e[0]-n,a=e[1]-o,i*i+a*a}function qF(e,t,r,n,o,i,a,c){var h=r-e,m=n-t,y=a-o,w=c-i,E=e-o,A=t-i,P=h*h+m*m,j=h*y+m*w,D=y*y+w*w,L=h*E+m*A,z=y*E+w*A,B=P*D-j*j,G,Z,K,te,se=B,le=B;B===0?(Z=0,se=1,te=z,le=D):(Z=j*z-D*L,te=P*z-j*L,Z<0?(Z=0,te=z,le=D):Z>se&&(Z=se,te=z+j,le=D)),te<0?(te=0,-L<0?Z=0:-L>P?Z=se:(Z=-L,se=P)):te>le&&(te=le,-L+j<0?Z=0:-L+j>P?Z=se:(Z=-L+j,se=P)),G=Z===0?0:Z/se,K=te===0?0:te/le;var pe=(1-G)*e+G*r,me=(1-G)*t+G*n,_e=(1-K)*o+K*a,de=(1-K)*i+K*c,Ce=_e-pe,Ze=de-me;return Ce*Ce+Ze*Ze}function PLr(e,t){return e[0]===t[0]?e[1]-t[1]:e[0]-t[0]}function DLr(e){e.sort(PLr);for(var t=[],r=0;r<e.length;r++){for(;t.length>=2&&ST(t[t.length-2],t[t.length-1],e[r])<=0;)t.pop();t.push(e[r])}for(var n=[],o=e.length-1;o>=0;o--){for(;n.length>=2&&ST(n[n.length-2],n[n.length-1],e[o])<=0;)n.pop();n.push(e[o])}return n.pop(),t.pop(),t.concat(n)}});var mnt=N(gi=>{"use strict";u();var mle=Symbol.for("react.element"),gle=Symbol.for("react.portal"),s7=Symbol.for("react.fragment"),l7=Symbol.for("react.strict_mode"),u7=Symbol.for("react.profiler"),c7=Symbol.for("react.provider"),p7=Symbol.for("react.context"),s3r=Symbol.for("react.server_context"),f7=Symbol.for("react.forward_ref"),d7=Symbol.for("react.suspense"),h7=Symbol.for("react.suspense_list"),m7=Symbol.for("react.memo"),g7=Symbol.for("react.lazy"),l3r=Symbol.for("react.offscreen"),hnt;hnt=Symbol.for("react.module.reference");function Of(e){if(typeof e=="object"&&e!==null){var t=e.$$typeof;switch(t){case mle:switch(e=e.type,e){case s7:case u7:case l7:case d7:case h7:return e;default:switch(e=e&&e.$$typeof,e){case s3r:case p7:case f7:case g7:case m7:case c7:return e;default:return t}}case gle:return t}}}gi.ContextConsumer=p7;gi.ContextProvider=c7;gi.Element=mle;gi.ForwardRef=f7;gi.Fragment=s7;gi.Lazy=g7;gi.Memo=m7;gi.Portal=gle;gi.Profiler=u7;gi.StrictMode=l7;gi.Suspense=d7;gi.SuspenseList=h7;gi.isAsyncMode=function(){return!1};gi.isConcurrentMode=function(){return!1};gi.isContextConsumer=function(e){return Of(e)===p7};gi.isContextProvider=function(e){return Of(e)===c7};gi.isElement=function(e){return typeof e=="object"&&e!==null&&e.$$typeof===mle};gi.isForwardRef=function(e){return Of(e)===f7};gi.isFragment=function(e){return Of(e)===s7};gi.isLazy=function(e){return Of(e)===g7};gi.isMemo=function(e){return Of(e)===m7};gi.isPortal=function(e){return Of(e)===gle};gi.isProfiler=function(e){return Of(e)===u7};gi.isStrictMode=function(e){return Of(e)===l7};gi.isSuspense=function(e){return Of(e)===d7};gi.isSuspenseList=function(e){return Of(e)===h7};gi.isValidElementType=function(e){return typeof e=="string"||typeof e=="function"||e===s7||e===u7||e===l7||e===d7||e===h7||e===l3r||typeof e=="object"&&e!==null&&(e.$$typeof===g7||e.$$typeof===m7||e.$$typeof===c7||e.$$typeof===p7||e.$$typeof===f7||e.$$typeof===hnt||e.getModuleId!==void 0)};gi.typeOf=Of});var vnt=N((wfo,gnt)=>{"use strict";u();gnt.exports=mnt()});var fat=N(ki=>{"use strict";u();var u9=60103,c9=60106,jD=60107,qD=60108,zD=60114,FD=60109,UD=60110,BD=60112,VD=60113,uue=60120,GD=60115,HD=60116,sat=60121,lat=60122,uat=60117,cat=60129,pat=60131;typeof Symbol=="function"&&Symbol.for&&(pl=Symbol.for,u9=pl("react.element"),c9=pl("react.portal"),jD=pl("react.fragment"),qD=pl("react.strict_mode"),zD=pl("react.profiler"),FD=pl("react.provider"),UD=pl("react.context"),BD=pl("react.forward_ref"),VD=pl("react.suspense"),uue=pl("react.suspense_list"),GD=pl("react.memo"),HD=pl("react.lazy"),sat=pl("react.block"),lat=pl("react.server.block"),uat=pl("react.fundamental"),cat=pl("react.debug_trace_mode"),pat=pl("react.legacy_hidden"));var pl;function Jd(e){if(typeof e=="object"&&e!==null){var t=e.$$typeof;switch(t){case u9:switch(e=e.type,e){case jD:case zD:case qD:case VD:case uue:return e;default:switch(e=e&&e.$$typeof,e){case UD:case BD:case HD:case GD:case FD:return e;default:return t}}case c9:return t}}}var jkr=FD,qkr=u9,zkr=BD,Fkr=jD,Ukr=HD,Bkr=GD,Vkr=c9,Gkr=zD,Hkr=qD,$kr=VD;ki.ContextConsumer=UD;ki.ContextProvider=jkr;ki.Element=qkr;ki.ForwardRef=zkr;ki.Fragment=Fkr;ki.Lazy=Ukr;ki.Memo=Bkr;ki.Portal=Vkr;ki.Profiler=Gkr;ki.StrictMode=Hkr;ki.Suspense=$kr;ki.isAsyncMode=function(){return!1};ki.isConcurrentMode=function(){return!1};ki.isContextConsumer=function(e){return Jd(e)===UD};ki.isContextProvider=function(e){return Jd(e)===FD};ki.isElement=function(e){return typeof e=="object"&&e!==null&&e.$$typeof===u9};ki.isForwardRef=function(e){return Jd(e)===BD};ki.isFragment=function(e){return Jd(e)===jD};ki.isLazy=function(e){return Jd(e)===HD};ki.isMemo=function(e){return Jd(e)===GD};ki.isPortal=function(e){return Jd(e)===c9};ki.isProfiler=function(e){return Jd(e)===zD};ki.isStrictMode=function(e){return Jd(e)===qD};ki.isSuspense=function(e){return Jd(e)===VD};ki.isValidElementType=function(e){return typeof e=="string"||typeof e=="function"||e===jD||e===zD||e===cat||e===qD||e===VD||e===uue||e===pat||typeof e=="object"&&e!==null&&(e.$$typeof===HD||e.$$typeof===GD||e.$$typeof===FD||e.$$typeof===UD||e.$$typeof===BD||e.$$typeof===uat||e.$$typeof===sat||e[0]===lat)};ki.typeOf=Jd});var hat=N((Dxo,dat)=>{"use strict";u();dat.exports=fat()});var Kct=N((rRo,gU)=>{u();gU.exports.RADIUS=6378137;gU.exports.FLATTENING=1/298.257223563;gU.exports.POLAR_RADIUS=6356752.3142});var ept=N((oRo,spe)=>{u();var Xct=Kct();spe.exports.geometry=Qct;spe.exports.ring=ape;function Qct(e){var t=0,r;switch(e.type){case"Polygon":return Jct(e.coordinates);case"MultiPolygon":for(r=0;r<e.coordinates.length;r++)t+=Jct(e.coordinates[r]);return t;case"Point":case"MultiPoint":case"LineString":case"MultiLineString":return 0;case"GeometryCollection":for(r=0;r<e.geometries.length;r++)t+=Qct(e.geometries[r]);return t}}function Jct(e){var t=0;if(e&&e.length>0){t+=Math.abs(ape(e[0]));for(var r=1;r<e.length;r++)t-=Math.abs(ape(e[r]))}return t}function ape(e){var t,r,n,o,i,a,c,h=0,m=e.length;if(m>2){for(c=0;c<m;c++)c===m-2?(o=m-2,i=m-1,a=0):c===m-1?(o=m-1,i=0,a=1):(o=c,i=c+1,a=c+2),t=e[o],r=e[i],n=e[a],h+=(ipe(n[0])-ipe(t[0]))*Math.sin(ipe(r[1]));h=h*Xct.RADIUS*Xct.RADIUS/2}return h}function ipe(e){return e*Math.PI/180}});var Cpt=N((Gjo,Mpt)=>{u();Mpt.exports=vzr;var gzr={Point:"geometry",MultiPoint:"geometry",LineString:"geometry",MultiLineString:"geometry",Polygon:"geometry",MultiPolygon:"geometry",GeometryCollection:"geometry",Feature:"feature",FeatureCollection:"featurecollection"};function vzr(e){if(!e||!e.type)return null;var t=gzr[e.type];if(!t)return null;if(t==="geometry")return{type:"FeatureCollection",features:[{type:"Feature",properties:{},geometry:e}]};if(t==="feature")return{type:"FeatureCollection",features:[e]};if(t==="featurecollection")return e}});var Y8r={};sw(Y8r,{SettingsProvider:()=>$8r,renderApp:()=>W8r});u();var Qht=ee(ke(),1),emt=ee(xa(),1),hXo=ee(Yte(),1);u();var Fm=ee(ke(),1);u();var su=ee(ke()),s7e=ee(xa());function Dgr(e){return!!e&&typeof e.then=="function"}var Ya=Dgr;function Ngr(e,t){if(e!=null)return e;throw new Error(t!=null?t:"Got unexpected null or undefined")}var si=Ngr,VR=class{},Lgr=new VR,mre={valueMaybe(){},valueOrThrow(){throw new Error(`Loadable expected value, but in "${this.state}" state`)},errorMaybe(){},errorOrThrow(){throw new Error(`Loadable expected error, but in "${this.state}" state`)},promiseMaybe(){},promiseOrThrow(){throw new Error(`Loadable expected promise, but in "${this.state}" state`)},is(e){return e.state===this.state&&e.contents===this.contents},map(e){if(this.state==="hasError")return this;if(this.state==="hasValue")try{let r=e(this.contents);return Ya(r)?JE(r.then(n=>({__value:n}))):gre(r)}catch(r){return Ya(r)?JE(r.next(()=>e(this.contents))):vre(r)}if(this.state==="loading")return JE(this.contents.then(r=>({__value:e(r.__value)})).catch(r=>{if(Ya(r))return r.then(()=>e(this.contents));throw r}));throw new Error("Invalid Loadable state")}};function gre(e){return Object.freeze(Dt(Te({state:"hasValue",contents:e},mre),{getValue(){return this.contents},toPromise(){return Promise.resolve(this.contents)},valueMaybe(){return this.contents},valueOrThrow(){return this.contents}}))}function vre(e){return Object.freeze(Dt(Te({state:"hasError",contents:e},mre),{getValue(){throw this.contents},toPromise(){return Promise.reject(this.contents)},errorMaybe(){return this.contents},errorOrThrow(){return this.contents}}))}function JE(e){return Object.freeze(Dt(Te({state:"loading",contents:e},mre),{getValue(){throw this.contents.then(({__value:t})=>t)},toPromise(){return this.contents.then(({__value:t})=>t)},promiseMaybe(){return this.contents.then(({__value:t})=>t)},promiseOrThrow(){return this.contents.then(({__value:t})=>t)}}))}function kgr(){return JE(new Promise(()=>{}))}function Rgr(e){return e.every(t=>t.state==="hasValue")?gre(e.map(t=>t.contents)):e.some(t=>t.state==="hasError")?vre(si(e.find(t=>t.state==="hasError"),"Invalid loadable passed to loadableAll").contents):JE(Promise.all(e.map(t=>t.contents)).then(t=>({__value:t})))}var rO={loadableWithValue:gre,loadableWithError:vre,loadableWithPromise:JE,loadableLoading:kgr,loadableAll:Rgr,Canceled:VR,CANCELED:Lgr},Zte,l7e=(Zte=su.default.useMutableSource)!==null&&Zte!==void 0?Zte:su.default.unstable_useMutableSource;function jgr(){return l7e&&!(typeof window!="undefined"&&window.$disableRecoilValueMutableSource_TEMP_HACK_DO_NOT_USE)}var u7e={mutableSourceExists:jgr,useMutableSource:l7e},{mutableSourceExists:qgr}=u7e,yre=new Map().set("recoil_hamt_2020",!0).set("recoil_memory_managament_2020",!0).set("recoil_suppress_rerender_in_callback",!0);function _re(e){var t;return e==="recoil_early_rendering_2021"&&!qgr()?!1:(t=yre.get(e))!==null&&t!==void 0?t:!1}_re.setPass=e=>{yre.set(e,!0)};_re.setFail=e=>{yre.set(e,!1)};var Si=_re;function zgr(e,t,{error:r}={}){return null}var Fgr=zgr,Bh=Fgr;function Ugr(e,t){let r=new Set(e);return r.add(t),r}function Bgr(e,t){let r=new Set(e);return r.delete(t),r}function Vgr(e,t,r){let n=new Map(e);return n.set(t,r),n}function Ggr(e,t,r){let n=new Map(e);return n.set(t,r(n.get(t))),n}function Hgr(e,t){let r=new Map(e);return r.delete(t),r}function $gr(e,t){let r=new Map(e);return t.forEach(n=>r.delete(n)),r}var c7e={setByAddingToSet:Ugr,setByDeletingFromSet:Bgr,mapBySettingInMap:Vgr,mapByUpdatingInMap:Ggr,mapByDeletingFromMap:Hgr,mapByDeletingMultipleFromMap:$gr};function*Wgr(e,t){let r=0;for(let n of e)t(n,r++)&&(yield n)}var p7e=Wgr;function Ygr(e,t){return function*(){let r=0;for(let n of e)yield t(n,r++)}()}var f7e=Ygr;function Zgr(e,...t){}var Kgr=Zgr,bre=Kgr;function Do(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var QA=class{constructor(t){Do(this,"key",void 0),this.key=t}},GR=class extends QA{},HR=class extends QA{};function Xgr(e){return e instanceof GR||e instanceof HR}var r6={AbstractRecoilValue:QA,RecoilState:GR,RecoilValueReadOnly:HR,isRecoilValue:Xgr},Jgr=r6.AbstractRecoilValue,Qgr=r6.RecoilState,evr=r6.RecoilValueReadOnly,tvr=r6.isRecoilValue,Yy=Object.freeze({__proto__:null,AbstractRecoilValue:Jgr,RecoilState:Qgr,RecoilValueReadOnly:evr,isRecoilValue:tvr}),$R=class{},rvr=new $R,Qte=class extends Error{constructor(t){super(`Tried to set the value of Recoil selector ${t} using an updater function, but it is an async selector in a pending or error state; this is not supported.`)}},F_=new Map,xre=new Map;function nvr(e){return f7e(e,t=>si(xre.get(t)))}function ovr(e){if(F_.has(e.key)){let r=`Duplicate atom key "${e.key}". This is a FATAL ERROR in
      production. But it is safe to ignore this warning if it occurred because of
      hot module replacement.`;console.warn(r)}F_.set(e.key,e);let t=e.set==null?new Yy.RecoilValueReadOnly(e.key):new Yy.RecoilState(e.key);return xre.set(e.key,t),t}var WR=class extends Error{};function ivr(e){let t=F_.get(e);if(t==null)throw new WR(`Missing definition for RecoilValue: "${e}""`);return t}function avr(e){return F_.get(e)}var YR=new Map;function svr(e){var t;if(!Si("recoil_memory_managament_2020"))return;let r=F_.get(e);if(!(r==null||(t=r.shouldDeleteConfigOnRelease)===null||t===void 0)&&t.call(r)){var n;F_.delete(e),(n=d7e(e))===null||n===void 0||n(),YR.delete(e)}}function lvr(e,t){Si("recoil_memory_managament_2020")&&(t===void 0?YR.delete(e):YR.set(e,t))}function d7e(e){return YR.get(e)}var uf={nodes:F_,recoilValues:xre,registerNode:ovr,getNode:ivr,getNodeMaybe:avr,deleteNodeConfigIfPossible:svr,setConfigDeletionHandler:lvr,getConfigDeletionHandler:d7e,recoilValuesForKeys:nvr,NodeMissingError:WR,DefaultValue:$R,DEFAULT_VALUE:rvr,RecoilValueNotReady:Qte},ZR=class{};function uvr(){return new ZR}var n6={RetentionZone:ZR,retentionZone:uvr},{setByAddingToSet:cvr}=c7e,{getNode:o6,getNodeMaybe:pvr,recoilValuesForKeys:GFe}=uf,{RetentionZone:HFe}=n6,fvr=Object.freeze(new Set),ere=class extends Error{};function dvr(e,t,r){if(!Si("recoil_memory_managament_2020"))return()=>{};let{nodesRetainedByZone:n}=e.getState().retention;function o(i){let a=n.get(i);a||n.set(i,a=new Set),a.add(t)}if(r instanceof HFe)o(r);else if(Array.isArray(r))for(let i of r)o(i);return()=>{if(!Si("recoil_memory_managament_2020"))return;let i=e.getState().retention.nodesRetainedByZone;function a(c){let h=i.get(c);h&&h.delete(t),h&&h.size===0&&i.delete(c)}if(r instanceof HFe)a(r);else if(Array.isArray(r))for(let c of r)a(c)}}function wre(e,t,r,n){let o=e.getState();if(o.nodeCleanupFunctions.has(r))return;let i=o6(r),a=dvr(e,r,i.retainedBy),c=i.init(e,t,n);o.nodeCleanupFunctions.set(r,()=>{c(),a()})}function hvr(e,t){var r;let n=e.getState();(r=n.nodeCleanupFunctions.get(t))===null||r===void 0||r(),n.nodeCleanupFunctions.delete(t)}function mvr(e,t,r){return wre(e,t,r,"get"),o6(r).get(e,t)}function h7e(e,t,r){return o6(r).peek(e,t)}function gvr(e,t,r){var n;let o=pvr(t);return o==null||(n=o.invalidate)===null||n===void 0||n.call(o,e),Dt(Te({},e),{atomValues:e.atomValues.clone().delete(t),nonvalidatedAtoms:e.nonvalidatedAtoms.clone().set(t,r),dirtyAtoms:cvr(e.dirtyAtoms,t)})}function vvr(e,t,r,n){let o=o6(r);if(o.set==null)throw new ere(`Attempt to set read-only RecoilValue: ${r}`);let i=o.set;return wre(e,t,r,"set"),i(e,t,n)}function yvr(e,t,r){var n,o,i;let a=e.getState(),c=e.getGraph(t.version),h=a.knownAtoms.has(r)?"atom":a.knownSelectors.has(r)?"selector":void 0,m=p7e(m7e(e,t,new Set([r])),y=>y!==r);return{loadable:h7e(e,t,r),isActive:a.knownAtoms.has(r)||a.knownSelectors.has(r),isSet:h==="selector"?!1:t.atomValues.has(r),isModified:t.dirtyAtoms.has(r),type:h,deps:GFe((n=c.nodeDeps.get(r))!==null&&n!==void 0?n:[]),subscribers:{nodes:GFe(m),components:f7e((o=(i=a.nodeToComponentSubscriptions.get(r))===null||i===void 0?void 0:i.values())!==null&&o!==void 0?o:[],([y])=>({name:y}))}}}function m7e(e,t,r){let n=new Set,o=Array.from(r),i=e.getGraph(t.version);for(let c=o.pop();c;c=o.pop()){var a;n.add(c);let h=(a=i.nodeToNodeSubscriptions.get(c))!==null&&a!==void 0?a:fvr;for(let m of h)n.has(m)||o.push(m)}return n}var rS={getNodeLoadable:mvr,peekNodeLoadable:h7e,setNodeValue:vvr,cleanUpNode:hvr,setUnvalidatedAtomValue_DEPRECATED:gvr,peekNodeInfo:yvr,getDownstreamNodes:m7e,initializeNodeIfNewToStore:wre},{CANCELED:_vr}=rO,{getDownstreamNodes:bvr,getNodeLoadable:g7e,setNodeValue:xvr}=rS,{getNodeMaybe:v7e}=uf,{DefaultValue:Ere,RecoilValueNotReady:wvr}=uf,{AbstractRecoilValue:Evr,RecoilState:Svr,RecoilValueReadOnly:Tvr,isRecoilValue:Ivr}=Yy;function Mvr(e,{key:t},r=e.getState().currentTree){var n,o;let i=e.getState();r.version===i.currentTree.version||r.version===((n=i.nextTree)===null||n===void 0?void 0:n.version)||r.version===((o=i.previousTree)===null||o===void 0?void 0:o.version)||Bh("Tried to read from a discarded tree");let a=g7e(e,r,t);return a.state==="loading"&&a.contents.catch(()=>_vr),a}function Cvr(e,t){let r=e.clone();return t.forEach((n,o)=>{n.state==="hasValue"&&n.contents instanceof Ere?r.delete(o):r.set(o,n)}),r}function Avr(e,t,{key:r},n){if(typeof n=="function"){let o=g7e(e,t,r);if(o.state==="loading")throw new wvr(r);if(o.state==="hasError")throw o.contents;return n(o.contents)}else return n}function Ovr(e,t,r){if(r.type==="set"){let{recoilValue:o,valueOrUpdater:i}=r,a=Avr(e,t,o,i),c=xvr(e,t,o.key,a);for(let[h,m]of c.entries())tre(t,h,m)}else if(r.type==="setLoadable"){let{recoilValue:{key:o},loadable:i}=r;tre(t,o,i)}else if(r.type==="markModified"){let{recoilValue:{key:o}}=r;t.dirtyAtoms.add(o)}else if(r.type==="setUnvalidated"){var n;let{recoilValue:{key:o},unvalidatedValue:i}=r,a=v7e(o);a==null||(n=a.invalidate)===null||n===void 0||n.call(a,t),t.atomValues.delete(o),t.nonvalidatedAtoms.set(o,i),t.dirtyAtoms.add(o)}else Bh(`Unknown action ${r.type}`)}function tre(e,t,r){r.state==="hasValue"&&r.contents instanceof Ere?e.atomValues.delete(t):e.atomValues.set(t,r),e.dirtyAtoms.add(t),e.nonvalidatedAtoms.delete(t)}function y7e(e,t){e.replaceState(r=>{let n=_7e(r);for(let o of t)Ovr(e,n,o);return rre(e,n),n})}function i6(e,t){if(XA.length){let r=XA[XA.length-1],n=r.get(e);n||r.set(e,n=[]),n.push(t)}else y7e(e,[t])}var XA=[];function Pvr(){let e=new Map;return XA.push(e),()=>{for(let[r,n]of e)y7e(r,n);XA.pop()!==e&&Bh("Incorrect order of batch popping")}}function _7e(e){return Dt(Te({},e),{atomValues:e.atomValues.clone(),nonvalidatedAtoms:e.nonvalidatedAtoms.clone(),dirtyAtoms:new Set(e.dirtyAtoms)})}function rre(e,t){let r=bvr(e,t,t.dirtyAtoms);for(let i of r){var n,o;(n=v7e(i))===null||n===void 0||(o=n.invalidate)===null||o===void 0||o.call(n,t)}}function b7e(e,t,r){i6(e,{type:"set",recoilValue:t,valueOrUpdater:r})}function Dvr(e,t,r){if(r instanceof Ere)return b7e(e,t,r);i6(e,{type:"setLoadable",recoilValue:t,loadable:r})}function Nvr(e,t){i6(e,{type:"markModified",recoilValue:t})}function Lvr(e,t,r){i6(e,{type:"setUnvalidated",recoilValue:t,unvalidatedValue:r})}var kvr=0;function Rvr(e,{key:t},r,n=null){let o=kvr++,i=e.getState();if(i.nodeToComponentSubscriptions.has(t)||i.nodeToComponentSubscriptions.set(t,new Map),si(i.nodeToComponentSubscriptions.get(t)).set(o,[n!=null?n:"<not captured>",r]),Si("recoil_early_rendering_2021")){let a=e.getState().nextTree;a&&a.dirtyAtoms.has(t)&&r(a)}return{release:()=>{let a=e.getState(),c=a.nodeToComponentSubscriptions.get(t);if(c===void 0||!c.has(o)){Bh(`Subscription missing at release time for atom ${t}. This is a bug in Recoil.`);return}c.delete(o),c.size===0&&a.nodeToComponentSubscriptions.delete(t)}}}var U_={RecoilValueReadOnly:Tvr,AbstractRecoilValue:Evr,RecoilState:Svr,getRecoilValueAsLoadable:Mvr,setRecoilValue:b7e,setRecoilValueLoadable:Dvr,markRecoilValueModified:Nvr,setUnvalidatedRecoilValue:Lvr,subscribeToRecoilValue:Rvr,isRecoilValue:Ivr,applyAtomValueWrites:Cvr,batchStart:Pvr,writeLoadableToTreeState:tre,invalidateDownstreams:rre,copyTreeState:_7e,invalidateDownstreams_FOR_TESTING:rre},{unstable_batchedUpdates:jvr}=s7e.default,qvr={unstable_batchedUpdates:jvr},{unstable_batchedUpdates:zvr}=qvr,Fvr={unstable_batchedUpdates:zvr},{batchStart:Uvr}=U_,{unstable_batchedUpdates:Bvr}=Fvr,Sre=Bvr,Vvr=e=>{Sre=e},Gvr=()=>Sre,Hvr=e=>{Sre(()=>{let t=()=>{};try{t=Uvr(),e()}finally{t()}})},Tre={getBatcher:Gvr,setBatcher:Vvr,batchUpdates:Hvr};function $vr(e,t){t()}var Wvr={enqueueExecution:$vr};function Yvr(e,...t){let r=new Set;e:for(let n of e){for(let o of t)if(o.has(n))continue e;r.add(n)}return r}var KR=Yvr;function Zvr(e,t){let r=new Map;return e.forEach((n,o)=>{r.set(o,t(n,o))}),r}var XR=Zvr;function Kvr(){return{nodeDeps:new Map,nodeToNodeSubscriptions:new Map}}function Xvr(e){return{nodeDeps:XR(e.nodeDeps,t=>new Set(t)),nodeToNodeSubscriptions:XR(e.nodeToNodeSubscriptions,t=>new Set(t))}}function Kte(e,t,r){let{nodeDeps:n,nodeToNodeSubscriptions:o}=t;e.forEach((i,a)=>{let c=n.get(a);if(c&&r&&c!==r.nodeDeps.get(a))return;n.set(a,new Set(i)),(c==null?i:KR(i,c)).forEach(m=>{o.has(m)||o.set(m,new Set),si(o.get(m)).add(a)}),c&&KR(c,i).forEach(y=>{if(!o.has(y))return;let w=si(o.get(y));w.delete(a),w.size===0&&o.delete(y)})})}function Jvr(e,t,r){var n,o,i,a;let c=t.getState();r===c.currentTree.version||r===((n=c.nextTree)===null||n===void 0?void 0:n.version)||r===((o=c.previousTree)===null||o===void 0?void 0:o.version)||Bh("Tried to save dependencies to a discarded tree");let h=t.getGraph(r);if(Kte(e,h),r===((i=c.previousTree)===null||i===void 0?void 0:i.version)){let y=t.getGraph(c.currentTree.version);Kte(e,y,h)}if(r===((a=c.previousTree)===null||a===void 0?void 0:a.version)||r===c.currentTree.version){var m;let y=(m=c.nextTree)===null||m===void 0?void 0:m.version;if(y!==void 0){let w=t.getGraph(y);Kte(e,w,h)}}}function Qvr(e,t){e.forEach((r,n)=>{t.has(n)||t.set(n,new Set);let o=si(t.get(n));r.forEach(i=>o.add(i))})}function eyr(e,t,r){r.has(e)||r.set(e,new Set),si(r.get(e)).add(t)}var nO={addToDependencyMap:eyr,cloneGraph:Xvr,graph:Kvr,mergeDepsIntoDependencyMap:Qvr,saveDependencyMapToStore:Jvr};function tyr(e,t){return t={exports:{}},e(t,t.exports),t.exports}var ryr=tyr(function(e){var t=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(be){return typeof be}:function(be){return be&&typeof Symbol=="function"&&be.constructor===Symbol&&be!==Symbol.prototype?"symbol":typeof be},r={},n=5,o=Math.pow(2,n),i=o-1,a=o/2,c=o/4,h={},m=function(Ee){return function(){return Ee}},y=r.hash=function(be){var Ee=typeof be=="undefined"?"undefined":t(be);if(Ee==="number")return be;Ee!=="string"&&(be+="");for(var Be=0,gt=0,Ae=be.length;gt<Ae;++gt){var Pt=be.charCodeAt(gt);Be=(Be<<5)-Be+Pt|0}return Be},w=function(Ee){return Ee-=Ee>>1&1431655765,Ee=(Ee&858993459)+(Ee>>2&858993459),Ee=Ee+(Ee>>4)&252645135,Ee+=Ee>>8,Ee+=Ee>>16,Ee&127},E=function(Ee,Be){return Be>>>Ee&i},A=function(Ee){return 1<<Ee},P=function(Ee,Be){return w(Ee&Be-1)},j=function(Ee,Be,gt,Ae){var Pt=Ae;if(!Ee){var Oe=Ae.length;Pt=new Array(Oe);for(var xt=0;xt<Oe;++xt)Pt[xt]=Ae[xt]}return Pt[Be]=gt,Pt},D=function(Ee,Be,gt){var Ae=gt.length-1,Pt=0,Oe=0,xt=gt;if(Ee)Pt=Oe=Be;else for(xt=new Array(Ae);Pt<Be;)xt[Oe++]=gt[Pt++];for(++Pt;Pt<=Ae;)xt[Oe++]=gt[Pt++];return Ee&&(xt.length=Ae),xt},L=function(Ee,Be,gt,Ae){var Pt=Ae.length;if(Ee){for(var Oe=Pt;Oe>=Be;)Ae[Oe--]=Ae[Oe];return Ae[Be]=gt,Ae}for(var xt=0,Bt=0,Tr=new Array(Pt+1);xt<Be;)Tr[Bt++]=Ae[xt++];for(Tr[Be]=gt;xt<Pt;)Tr[++Bt]=Ae[xt++];return Tr},z=1,B=2,G=3,Z=4,K={__hamt_isEmpty:!0},te=function(Ee){return Ee===K||Ee&&Ee.__hamt_isEmpty},se=function(Ee,Be,gt,Ae){return{type:z,edit:Ee,hash:Be,key:gt,value:Ae,_modify:qe}},le=function(Ee,Be,gt){return{type:B,edit:Ee,hash:Be,children:gt,_modify:lt}},pe=function(Ee,Be,gt){return{type:G,edit:Ee,mask:Be,children:gt,_modify:_t}},me=function(Ee,Be,gt){return{type:Z,edit:Ee,size:Be,children:gt,_modify:Tt}},_e=function(Ee){return Ee===K||Ee.type===z||Ee.type===B},de=function(Ee,Be,gt,Ae,Pt){for(var Oe=[],xt=Ae,Bt=0,Tr=0;xt;++Tr)xt&1&&(Oe[Tr]=Pt[Bt++]),xt>>>=1;return Oe[Be]=gt,me(Ee,Bt+1,Oe)},Ce=function(Ee,Be,gt,Ae){for(var Pt=new Array(Be-1),Oe=0,xt=0,Bt=0,Tr=Ae.length;Bt<Tr;++Bt)if(Bt!==gt){var pn=Ae[Bt];pn&&!te(pn)&&(Pt[Oe++]=pn,xt|=1<<Bt)}return pe(Ee,xt,Pt)},Ze=function be(Ee,Be,gt,Ae,Pt,Oe){if(gt===Pt)return le(Ee,gt,[Oe,Ae]);var xt=E(Be,gt),Bt=E(Be,Pt);return pe(Ee,A(xt)|A(Bt),xt===Bt?[be(Ee,Be+n,gt,Ae,Pt,Oe)]:xt<Bt?[Ae,Oe]:[Oe,Ae])},rt=function(Ee,Be,gt,Ae,Pt,Oe,xt,Bt){for(var Tr=Pt.length,pn=0;pn<Tr;++pn){var wt=Pt[pn];if(gt(xt,wt.key)){var an=wt.value,Cr=Oe(an);return Cr===an?Pt:Cr===h?(--Bt.value,D(Ee,pn,Pt)):j(Ee,pn,se(Be,Ae,xt,Cr),Pt)}}var or=Oe();return or===h?Pt:(++Bt.value,j(Ee,Tr,se(Be,Ae,xt,or),Pt))},ct=function(Ee,Be){return Ee===Be.edit},qe=function(Ee,Be,gt,Ae,Pt,Oe,xt){if(Be(Oe,this.key)){var Bt=Ae(this.value);return Bt===this.value?this:Bt===h?(--xt.value,K):ct(Ee,this)?(this.value=Bt,this):se(Ee,Pt,Oe,Bt)}var Tr=Ae();return Tr===h?this:(++xt.value,Ze(Ee,gt,this.hash,this,Pt,se(Ee,Pt,Oe,Tr)))},lt=function(Ee,Be,gt,Ae,Pt,Oe,xt){if(Pt===this.hash){var Bt=ct(Ee,this),Tr=rt(Bt,Ee,Be,this.hash,this.children,Ae,Oe,xt);return Tr===this.children?this:Tr.length>1?le(Ee,this.hash,Tr):Tr[0]}var pn=Ae();return pn===h?this:(++xt.value,Ze(Ee,gt,this.hash,this,Pt,se(Ee,Pt,Oe,pn)))},_t=function(Ee,Be,gt,Ae,Pt,Oe,xt){var Bt=this.mask,Tr=this.children,pn=E(gt,Pt),wt=A(pn),an=P(Bt,wt),Cr=Bt&wt,or=Cr?Tr[an]:K,Er=or._modify(Ee,Be,gt+n,Ae,Pt,Oe,xt);if(or===Er)return this;var Rt=ct(Ee,this),qo=Bt,Xo=void 0;if(Cr&&te(Er)){if(qo&=~wt,!qo)return K;if(Tr.length<=2&&_e(Tr[an^1]))return Tr[an^1];Xo=D(Rt,an,Tr)}else if(!Cr&&!te(Er)){if(Tr.length>=a)return de(Ee,pn,Er,Bt,Tr);qo|=wt,Xo=L(Rt,an,Er,Tr)}else Xo=j(Rt,an,Er,Tr);return Rt?(this.mask=qo,this.children=Xo,this):pe(Ee,qo,Xo)},Tt=function(Ee,Be,gt,Ae,Pt,Oe,xt){var Bt=this.size,Tr=this.children,pn=E(gt,Pt),wt=Tr[pn],an=(wt||K)._modify(Ee,Be,gt+n,Ae,Pt,Oe,xt);if(wt===an)return this;var Cr=ct(Ee,this),or=void 0;if(te(wt)&&!te(an))++Bt,or=j(Cr,pn,an,Tr);else if(!te(wt)&&te(an)){if(--Bt,Bt<=c)return Ce(Ee,Bt,pn,Tr);or=j(Cr,pn,K,Tr)}else or=j(Cr,pn,an,Tr);return Cr?(this.size=Bt,this.children=or,this):me(Ee,Bt,or)};K._modify=function(be,Ee,Be,gt,Ae,Pt,Oe){var xt=gt();return xt===h?K:(++Oe.value,se(be,Ae,Pt,xt))};function et(be,Ee,Be,gt,Ae){this._editable=be,this._edit=Ee,this._config=Be,this._root=gt,this._size=Ae}et.prototype.setTree=function(be,Ee){return this._editable?(this._root=be,this._size=Ee,this):be===this._root?this:new et(this._editable,this._edit,this._config,be,Ee)};var pt=r.tryGetHash=function(be,Ee,Be,gt){for(var Ae=gt._root,Pt=0,Oe=gt._config.keyEq;;)switch(Ae.type){case z:return Oe(Be,Ae.key)?Ae.value:be;case B:{if(Ee===Ae.hash)for(var xt=Ae.children,Bt=0,Tr=xt.length;Bt<Tr;++Bt){var pn=xt[Bt];if(Oe(Be,pn.key))return pn.value}return be}case G:{var wt=E(Pt,Ee),an=A(wt);if(Ae.mask&an){Ae=Ae.children[P(Ae.mask,an)],Pt+=n;break}return be}case Z:{if(Ae=Ae.children[E(Pt,Ee)],Ae){Pt+=n;break}return be}default:return be}};et.prototype.tryGetHash=function(be,Ee,Be){return pt(be,Ee,Be,this)};var ot=r.tryGet=function(be,Ee,Be){return pt(be,Be._config.hash(Ee),Ee,Be)};et.prototype.tryGet=function(be,Ee){return ot(be,Ee,this)};var $e=r.getHash=function(be,Ee,Be){return pt(void 0,be,Ee,Be)};et.prototype.getHash=function(be,Ee){return $e(be,Ee,this)};var De=r.get=function(be,Ee){return pt(void 0,Ee._config.hash(be),be,Ee)};et.prototype.get=function(be,Ee){return ot(Ee,be,this)};var Ke=r.has=function(be,Ee,Be){return pt(h,be,Ee,Be)!==h};et.prototype.hasHash=function(be,Ee){return Ke(be,Ee,this)};var Ge=r.has=function(be,Ee){return Ke(Ee._config.hash(be),be,Ee)};et.prototype.has=function(be){return Ge(be,this)};var ft=function(Ee,Be){return Ee===Be};r.make=function(be){return new et(0,0,{keyEq:be&&be.keyEq||ft,hash:be&&be.hash||y},K,0)},r.empty=r.make();var mt=r.isEmpty=function(be){return be&&!!te(be._root)};et.prototype.isEmpty=function(){return mt(this)};var Ot=r.modifyHash=function(be,Ee,Be,gt){var Ae={value:gt._size},Pt=gt._root._modify(gt._editable?gt._edit:NaN,gt._config.keyEq,0,be,Ee,Be,Ae);return gt.setTree(Pt,Ae.value)};et.prototype.modifyHash=function(be,Ee,Be){return Ot(Be,be,Ee,this)};var At=r.modify=function(be,Ee,Be){return Ot(be,Be._config.hash(Ee),Ee,Be)};et.prototype.modify=function(be,Ee){return At(Ee,be,this)};var Mt=r.setHash=function(be,Ee,Be,gt){return Ot(m(Be),be,Ee,gt)};et.prototype.setHash=function(be,Ee,Be){return Mt(be,Ee,Be,this)};var Yt=r.set=function(be,Ee,Be){return Mt(Be._config.hash(be),be,Ee,Be)};et.prototype.set=function(be,Ee){return Yt(be,Ee,this)};var jt=m(h),Ut=r.removeHash=function(be,Ee,Be){return Ot(jt,be,Ee,Be)};et.prototype.removeHash=et.prototype.deleteHash=function(be,Ee){return Ut(be,Ee,this)};var ar=r.remove=function(be,Ee){return Ut(Ee._config.hash(be),be,Ee)};et.prototype.remove=et.prototype.delete=function(be){return ar(be,this)};var jr=r.beginMutation=function(be){return new et(be._editable+1,be._edit+1,be._config,be._root,be._size)};et.prototype.beginMutation=function(){return jr(this)};var Or=r.endMutation=function(be){return be._editable=be._editable&&be._editable-1,be};et.prototype.endMutation=function(){return Or(this)};var br=r.mutate=function(be,Ee){var Be=jr(Ee);return be(Be),Or(Be)};et.prototype.mutate=function(be){return br(be,this)};var Pr=function(Ee){return Ee&&Le(Ee[0],Ee[1],Ee[2],Ee[3],Ee[4])},Le=function(Ee,Be,gt,Ae,Pt){for(;gt<Ee;){var Oe=Be[gt++];if(Oe&&!te(Oe))return Je(Oe,Ae,[Ee,Be,gt,Ae,Pt])}return Pr(Pt)},Je=function(Ee,Be,gt){switch(Ee.type){case z:return{value:Be(Ee),rest:gt};case B:case Z:case G:var Ae=Ee.children;return Le(Ae.length,Ae,0,Be,gt);default:return Pr(gt)}},tt={done:!0};function Ft(be){this.v=be}Ft.prototype.next=function(){if(!this.v)return tt;var be=this.v;return this.v=Pr(be.rest),be},Ft.prototype[Symbol.iterator]=function(){return this};var $t=function(Ee,Be){return new Ft(Je(Ee._root,Be))},xe=function(Ee){return[Ee.key,Ee.value]},J=r.entries=function(be){return $t(be,xe)};et.prototype.entries=et.prototype[Symbol.iterator]=function(){return J(this)};var oe=function(Ee){return Ee.key},ue=r.keys=function(be){return $t(be,oe)};et.prototype.keys=function(){return ue(this)};var we=function(Ee){return Ee.value},Fe=r.values=et.prototype.values=function(be){return $t(be,we)};et.prototype.values=function(){return Fe(this)};var We=r.fold=function(be,Ee,Be){var gt=Be._root;if(gt.type===z)return be(Ee,gt.value,gt.key);for(var Ae=[gt.children],Pt=void 0;Pt=Ae.pop();)for(var Oe=0,xt=Pt.length;Oe<xt;){var Bt=Pt[Oe++];Bt&&Bt.type&&(Bt.type===z?Ee=be(Ee,Bt.value,Bt.key):Ae.push(Bt.children))}return Ee};et.prototype.fold=function(be,Ee){return We(be,Ee,this)};var nt=r.forEach=function(be,Ee){return We(function(Be,gt,Ae){return be(gt,Ae,Ee)},null,Ee)};et.prototype.forEach=function(be){return nt(be,this)};var Ye=r.count=function(be){return be._size};et.prototype.count=function(){return Ye(this)},Object.defineProperty(et.prototype,"size",{get:et.prototype.count}),e.exports?e.exports=r:(void 0).hamt=r}),nre=class{constructor(t){Do(this,"_map",void 0),this._map=new Map(t==null?void 0:t.entries())}keys(){return this._map.keys()}entries(){return this._map.entries()}get(t){return this._map.get(t)}has(t){return this._map.has(t)}set(t,r){return this._map.set(t,r),this}delete(t){return this._map.delete(t),this}clone(){return Ire(this)}toMap(){return new Map(this._map)}},ore=class e{constructor(t){if(Do(this,"_hamt",ryr.empty.beginMutation()),t instanceof e){let r=t._hamt.endMutation();t._hamt=r.beginMutation(),this._hamt=r.beginMutation()}else if(t)for(let[r,n]of t.entries())this._hamt.set(r,n)}keys(){return this._hamt.keys()}entries(){return this._hamt.entries()}get(t){return this._hamt.get(t)}has(t){return this._hamt.has(t)}set(t,r){return this._hamt.set(t,r),this}delete(t){return this._hamt.delete(t),this}clone(){return Ire(this)}toMap(){return new Map(this._hamt)}};function Ire(e){return Si("recoil_hamt_2020")?new ore(e):new nre(e)}var nyr={persistentMap:Ire},oyr=nyr.persistentMap,iyr=Object.freeze({__proto__:null,persistentMap:oyr}),{graph:ayr}=nO,{persistentMap:$Fe}=iyr,syr=0,x7e=()=>syr++;function w7e(){let e=x7e();return{version:e,stateID:e,transactionMetadata:{},dirtyAtoms:new Set,atomValues:$Fe(),nonvalidatedAtoms:$Fe()}}function lyr(){let e=w7e();return{currentTree:e,nextTree:null,previousTree:null,commitDepth:0,knownAtoms:new Set,knownSelectors:new Set,transactionSubscriptions:new Map,nodeTransactionSubscriptions:new Map,nodeToComponentSubscriptions:new Map,queuedComponentCallbacks_DEPRECATED:[],suspendedComponentResolvers:new Set,graphsByVersion:new Map().set(e.version,ayr()),versionsUsedByComponent:new Map,retention:{referenceCounts:new Map,nodesRetainedByZone:new Map,retainablesToCheckForRelease:new Set},nodeCleanupFunctions:new Map}}var E7e={makeEmptyTreeState:w7e,makeEmptyStoreState:lyr,getNextTreeStateVersion:x7e};function uyr(...e){let t=new Set;for(let r of e)for(let n of r)t.add(n);return t}var cyr=uyr;function pyr(e,t,r){let n=e.entries(),o=n.next();for(;!o.done;){let i=o.value;if(t.call(r,i[1],i[0],e))return!0;o=n.next()}return!1}var fyr=pyr,{cleanUpNode:dyr}=rS,{deleteNodeConfigIfPossible:hyr,getNode:S7e}=uf,{RetentionZone:T7e}=n6,I7e=new Set;function M7e(e,t){let r=e.getState(),n=r.currentTree;if(r.nextTree){Bh("releaseNodesNowOnCurrentTree should only be called at the end of a batch");return}let o=new Set;for(let a of t)if(a instanceof T7e)for(let c of yyr(r,a))o.add(c);else o.add(a);let i=myr(e,o);for(let a of i)vyr(e,n,a)}function myr(e,t){let r=e.getState(),n=r.currentTree,o=e.getGraph(n.version),i=new Set,a=new Set;return c(t),i;function c(h){let m=new Set,y=gyr(e,n,h,i,a);for(let P of y){var w;if(S7e(P).retainedBy==="recoilRoot"){a.add(P);continue}if(((w=r.retention.referenceCounts.get(P))!==null&&w!==void 0?w:0)>0){a.add(P);continue}if(C7e(P).some(D=>r.retention.referenceCounts.get(D))){a.add(P);continue}let j=o.nodeToNodeSubscriptions.get(P);if(j&&fyr(j,D=>a.has(D))){a.add(P);continue}i.add(P),m.add(P)}let E=new Set;for(let P of m)for(let j of(A=o.nodeDeps.get(P))!==null&&A!==void 0?A:I7e){var A;i.has(j)||E.add(j)}E.size&&c(E)}}function gyr(e,t,r,n,o){let i=e.getGraph(t.version),a=[],c=new Set;for(;r.size>0;)h(si(r.values().next().value));return a;function h(m){if(n.has(m)||o.has(m)){r.delete(m);return}if(c.has(m))return;let y=i.nodeToNodeSubscriptions.get(m);if(y)for(let w of y)h(w);c.add(m),r.delete(m),a.push(m)}}function vyr(e,t,r){if(!Si("recoil_memory_managament_2020"))return;dyr(e,r);let n=e.getState();n.knownAtoms.delete(r),n.knownSelectors.delete(r),n.nodeTransactionSubscriptions.delete(r),n.retention.referenceCounts.delete(r);let o=C7e(r);for(let h of o){var i;(i=n.retention.nodesRetainedByZone.get(h))===null||i===void 0||i.delete(r)}t.atomValues.delete(r),t.dirtyAtoms.delete(r),t.nonvalidatedAtoms.delete(r);let a=n.graphsByVersion.get(t.version);if(a){let h=a.nodeDeps.get(r);if(h!==void 0){a.nodeDeps.delete(r);for(let m of h){var c;(c=a.nodeToNodeSubscriptions.get(m))===null||c===void 0||c.delete(r)}}a.nodeToNodeSubscriptions.delete(r)}hyr(r)}function yyr(e,t){var r;return(r=e.retention.nodesRetainedByZone.get(t))!==null&&r!==void 0?r:I7e}function C7e(e){let t=S7e(e).retainedBy;return t===void 0||t==="components"||t==="recoilRoot"?[]:t instanceof T7e?[t]:t}function _yr(e,t){let r=e.getState();r.nextTree?r.retention.retainablesToCheckForRelease.add(t):M7e(e,new Set([t]))}function byr(e,t,r){var n;if(!Si("recoil_memory_managament_2020"))return;let o=e.getState().retention.referenceCounts,i=((n=o.get(t))!==null&&n!==void 0?n:0)+r;i===0?A7e(e,t):o.set(t,i)}function A7e(e,t){if(!Si("recoil_memory_managament_2020"))return;e.getState().retention.referenceCounts.delete(t),_yr(e,t)}function xyr(e){if(!Si("recoil_memory_managament_2020"))return;let t=e.getState();M7e(e,t.retention.retainablesToCheckForRelease),t.retention.retainablesToCheckForRelease.clear()}function wyr(e){return e===void 0?"recoilRoot":e}var oO={updateRetainCount:byr,updateRetainCountToZero:A7e,releaseScheduledRetainablesNow:xyr,retainedByOptionWithDefault:wyr};function*Eyr(e){for(let t of e)for(let r of t)yield r}var Syr=Eyr,Tyr=typeof window=="undefined",Iyr=typeof navigator!="undefined"&&navigator.product==="ReactNative",Mre={isSSR:Tyr,isReactNative:Iyr},{isSSR:Myr}=Mre,{batchUpdates:ire}=Tre,{initializeNodeIfNewToStore:Cyr,peekNodeInfo:Ayr}=rS,{graph:Oyr}=nO,{DEFAULT_VALUE:Pyr,recoilValues:WFe,recoilValuesForKeys:YFe}=uf,{AbstractRecoilValue:Dyr,getRecoilValueAsLoadable:Nyr,setRecoilValue:ZFe,setUnvalidatedRecoilValue:Lyr}=U_,{updateRetainCount:BR}=oO,{getNextTreeStateVersion:kyr,makeEmptyStoreState:Ryr}=E7e;var eS=class{constructor(t){Do(this,"_store",void 0),Do(this,"_refCount",0),Do(this,"getLoadable",r=>(this.checkRefCount_INTERNAL(),Nyr(this._store,r))),Do(this,"getPromise",r=>(this.checkRefCount_INTERNAL(),this.getLoadable(r).toPromise())),Do(this,"getNodes_UNSTABLE",r=>{if(this.checkRefCount_INTERNAL(),(r==null?void 0:r.isModified)===!0){if((r==null?void 0:r.isInitialized)===!1)return[];let i=this._store.getState().currentTree;return YFe(i.dirtyAtoms)}let n=this._store.getState().knownAtoms,o=this._store.getState().knownSelectors;return(r==null?void 0:r.isInitialized)==null?WFe.values():r.isInitialized===!0?YFe(Syr([this._store.getState().knownAtoms,this._store.getState().knownSelectors])):p7e(WFe.values(),({key:i})=>!n.has(i)&&!o.has(i))}),Do(this,"getInfo_UNSTABLE",({key:r})=>(this.checkRefCount_INTERNAL(),Ayr(this._store,this._store.getState().currentTree,r))),Do(this,"map",r=>{this.checkRefCount_INTERNAL();let n=new eO(this,ire);return r(n),are(n.getStore_INTERNAL())}),Do(this,"asyncMap",r=>yt(this,null,function*(){this.checkRefCount_INTERNAL();let n=new eO(this,ire);return yield r(n),are(n.getStore_INTERNAL())})),this._store={getState:()=>t,replaceState:r=>{t.currentTree=r(t.currentTree)},getGraph:r=>{let n=t.graphsByVersion;if(n.has(r))return si(n.get(r));let o=Oyr();return n.set(r,o),o},subscribeToTransactions:()=>({release:()=>{}}),addTransactionMetadata:()=>{throw new Error("Cannot subscribe to Snapshots")}};for(let r of this._store.getState().nodeCleanupFunctions.keys())Cyr(this._store,t.currentTree,r,"get"),BR(this._store,r,1);this.retain(),this.autorelease_INTERNAL()}retain(){if(!Si("recoil_memory_managament_2020"))return()=>{};this._refCount++;let t=!1;return()=>{t||(t=!0,this.release_INTERNAL())}}autorelease_INTERNAL(){Si("recoil_memory_managament_2020")&&(Myr||window.setTimeout(()=>this.release_INTERNAL(),0))}release_INTERNAL(){Si("recoil_memory_managament_2020")&&(this._refCount--,this._refCount)}checkRefCount_INTERNAL(){Si("recoil_memory_managament_2020")&&this._refCount<=0}getStore_INTERNAL(){return this.checkRefCount_INTERNAL(),this._store}getID(){return this.checkRefCount_INTERNAL(),this.getID_INTERNAL()}getID_INTERNAL(){return this.checkRefCount_INTERNAL(),this._store.getState().currentTree.stateID}};function O7e(e,t,r=!1){let n=e.getState(),o=r?kyr():t.version;return{currentTree:r?{version:o,stateID:o,transactionMetadata:Te({},t.transactionMetadata),dirtyAtoms:new Set(t.dirtyAtoms),atomValues:t.atomValues.clone(),nonvalidatedAtoms:t.nonvalidatedAtoms.clone()}:t,commitDepth:0,nextTree:null,previousTree:null,knownAtoms:new Set(n.knownAtoms),knownSelectors:new Set(n.knownSelectors),transactionSubscriptions:new Map,nodeTransactionSubscriptions:new Map,nodeToComponentSubscriptions:new Map,queuedComponentCallbacks_DEPRECATED:[],suspendedComponentResolvers:new Set,graphsByVersion:new Map().set(o,e.getGraph(t.version)),versionsUsedByComponent:new Map,retention:{referenceCounts:new Map,nodesRetainedByZone:new Map,retainablesToCheckForRelease:new Set},nodeCleanupFunctions:new Map}}function jyr(e){let t=new eS(Ryr());return e!=null?t.map(e):t}function are(e,t="current"){let r=e.getState(),n=t==="current"?r.currentTree:si(r.previousTree);return new eS(O7e(e,n))}var eO=class extends eS{constructor(t,r){super(O7e(t.getStore_INTERNAL(),t.getStore_INTERNAL().getState().currentTree,!0)),Do(this,"_batch",void 0),Do(this,"set",(n,o)=>{this.checkRefCount_INTERNAL();let i=this.getStore_INTERNAL();this._batch(()=>{BR(i,n.key,1),ZFe(this.getStore_INTERNAL(),n,o)})}),Do(this,"reset",n=>{this.checkRefCount_INTERNAL();let o=this.getStore_INTERNAL();this._batch(()=>{BR(o,n.key,1),ZFe(this.getStore_INTERNAL(),n,Pyr)})}),Do(this,"setUnvalidatedAtomValues_DEPRECATED",n=>{this.checkRefCount_INTERNAL();let o=this.getStore_INTERNAL();ire(()=>{for(let[i,a]of n.entries())BR(o,i,1),Lyr(o,new Dyr(i),a)})}),this._batch=r}},a6={Snapshot:eS,MutableSnapshot:eO,freshSnapshot:jyr,cloneSnapshot:are},qyr=a6.Snapshot,zyr=a6.MutableSnapshot,Fyr=a6.freshSnapshot,Uyr=a6.cloneSnapshot,s6=Object.freeze({__proto__:null,Snapshot:qyr,MutableSnapshot:zyr,freshSnapshot:Fyr,cloneSnapshot:Uyr}),{getNextTreeStateVersion:Byr,makeEmptyStoreState:P7e}=E7e,{cleanUpNode:Vyr,getDownstreamNodes:Gyr,setNodeValue:Hyr,setUnvalidatedAtomValue_DEPRECATED:$yr}=rS,{graph:Wyr}=nO,{cloneGraph:Yyr}=nO,{applyAtomValueWrites:Zyr}=U_,{releaseScheduledRetainablesNow:D7e}=oO,{freshSnapshot:Kyr}=s6,{useCallback:Xyr,useContext:N7e,useEffect:sre,useMemo:Jyr,useRef:Xte,useState:Qyr}=su.default;function HA(){throw new Error("This component must be used inside a <RecoilRoot> component.")}var L7e=Object.freeze({getState:HA,replaceState:HA,getGraph:HA,subscribeToTransactions:HA,addTransactionMetadata:HA}),lre=!1;function KFe(e){if(lre)throw new Error("An atom update was triggered within the execution of a state updater function. State updater functions provided to Recoil must be pure functions.");let t=e.getState();if(t.nextTree===null){Si("recoil_memory_managament_2020")&&Si("recoil_release_on_cascading_update_killswitch_2021")&&t.commitDepth>0&&D7e(e);let r=t.currentTree.version,n=Byr();t.nextTree=Dt(Te({},t.currentTree),{version:n,stateID:n,dirtyAtoms:new Set,transactionMetadata:{}}),t.graphsByVersion.set(n,Yyr(si(t.graphsByVersion.get(r))))}}var k7e=su.default.createContext({current:L7e}),Cre=()=>N7e(k7e),R7e=su.default.createContext(null);function e0r(){let e=N7e(R7e);return e==null&&bre("Attempted to use a Recoil hook outside of a <RecoilRoot>. <RecoilRoot> must be an ancestor of any component that uses Recoil hooks."),e}function Are(e,t,r){let n=Gyr(e,r,r.dirtyAtoms);for(let o of n){let i=t.nodeToComponentSubscriptions.get(o);if(i)for(let[a,[c,h]]of i)h(r)}}function j7e(e){let t=e.getState(),r=t.currentTree,n=r.dirtyAtoms;if(n.size){for(let[o,i]of t.nodeTransactionSubscriptions)if(n.has(o))for(let[a,c]of i)c(e);for(let[o,i]of t.transactionSubscriptions)i(e);(!Si("recoil_early_rendering_2021")||t.suspendedComponentResolvers.size)&&(Are(e,t,r),t.suspendedComponentResolvers.forEach(o=>o()),t.suspendedComponentResolvers.clear())}t.queuedComponentCallbacks_DEPRECATED.forEach(o=>o(r)),t.queuedComponentCallbacks_DEPRECATED.splice(0,t.queuedComponentCallbacks_DEPRECATED.length)}function t0r(e){let t=e.current.getState();t.commitDepth++;try{let{nextTree:r}=t;if(r===null)return;t.previousTree=t.currentTree,t.currentTree=r,t.nextTree=null,j7e(e.current),t.previousTree!=null?t.graphsByVersion.delete(t.previousTree.version):Bh("Ended batch with no previous state, which is unexpected","recoil"),t.previousTree=null,Si("recoil_memory_managament_2020")&&D7e(e.current)}finally{t.commitDepth--}}function r0r({setNotifyBatcherOfChange:e}){let t=Cre(),[r,n]=Qyr([]);return e(()=>n({})),sre(()=>{Wvr.enqueueExecution("Batcher",()=>{t0r(t)})}),sre(()=>()=>{e(()=>{})},[e]),null}function n0r(e,t){let r=P7e();return t({set:(n,o)=>{let i=r.currentTree,a=Hyr(e,i,n.key,o),c=new Set(a.keys()),h=i.nonvalidatedAtoms.clone();for(let m of c)h.delete(m);r.currentTree=Dt(Te({},i),{dirtyAtoms:cyr(i.dirtyAtoms,c),atomValues:Zyr(i.atomValues,a),nonvalidatedAtoms:h})},setUnvalidatedAtomValues:n=>{n.forEach((o,i)=>{r.currentTree=$yr(r.currentTree,i,o)})}}),r}function o0r(e){return Kyr().map(e).getStore_INTERNAL().getState()}var XFe=0;function i0r({initializeState_DEPRECATED:e,initializeState:t,store_INTERNAL:r,children:n}){var o;let i,a=D=>{let L=i.current.graphsByVersion;if(L.has(D))return si(L.get(D));let z=Wyr();return L.set(D,z),z},c=(D,L)=>{if(L==null){let{transactionSubscriptions:z}=P.current.getState(),B=XFe++;return z.set(B,D),{release:()=>{z.delete(B)}}}else{let{nodeTransactionSubscriptions:z}=P.current.getState();z.has(L)||z.set(L,new Map);let B=XFe++;return si(z.get(L)).set(B,D),{release:()=>{let G=z.get(L);G&&(G.delete(B),G.size===0&&z.delete(L))}}}},h=D=>{KFe(P.current);for(let L of Object.keys(D))si(P.current.getState().nextTree).transactionMetadata[L]=D[L]},m=D=>{let L=P.current.getState();KFe(P.current);let z=si(L.nextTree),B;try{lre=!0,B=D(z)}finally{lre=!1}B!==z&&(L.nextTree=B,Si("recoil_early_rendering_2021")&&Are(A,L,B),si(y.current)())},y=Xte(null),w=Xyr(D=>{y.current=D},[y]),E=(o=su.default.createMutableSource)!==null&&o!==void 0?o:su.default.unstable_createMutableSource,A=r!=null?r:{getState:()=>i.current,replaceState:m,getGraph:a,subscribeToTransactions:c,addTransactionMetadata:h},P=Xte(A);i=Xte(e!=null?n0r(A,e):t!=null?o0r(t):P7e());let j=Jyr(()=>E?E(i,()=>i.current.currentTree.version):null,[E,i]);return sre(()=>()=>{for(let D of P.current.getState().knownAtoms)Vyr(P.current,D)},[]),su.default.createElement(k7e.Provider,{value:P},su.default.createElement(R7e.Provider,{value:j},su.default.createElement(r0r,{setNotifyBatcherOfChange:w}),n))}function a0r(e){let o=e,{override:t}=o,r=En(o,["override"]),n=Cre();return t===!1&&n.current!==L7e?e.children:su.default.createElement(i0r,r)}var l6={useStoreRef:Cre,useRecoilMutableSource:e0r,RecoilRoot:a0r,notifyComponents_FOR_TESTING:Are,sendEndOfBatchNotifications_FOR_TESTING:j7e},{loadableWithValue:s0r}=rO,{DEFAULT_VALUE:l0r,getNode:u0r}=uf,{copyTreeState:c0r,getRecoilValueAsLoadable:p0r,invalidateDownstreams:f0r,writeLoadableToTreeState:d0r}=U_;function JFe(e){return u0r(e.key).nodeType==="atom"}var ure=class{constructor(t,r){Do(this,"_store",void 0),Do(this,"_treeState",void 0),Do(this,"_changes",void 0),Do(this,"get",n=>{if(this._changes.has(n.key))return this._changes.get(n.key);if(!JFe(n))throw new Error("Reading selectors within atomicUpdate is not supported");let o=p0r(this._store,n,this._treeState);if(o.state==="hasValue")return o.contents;throw o.state==="hasError"?o.contents:new Error(`Expected Recoil atom ${n.key} to have a value, but it is in a loading state.`)}),Do(this,"set",(n,o)=>{if(!JFe(n))throw new Error("Setting selectors within atomicUpdate is not supported");if(typeof o=="function"){let i=this.get(n);this._changes.set(n.key,o(i))}else this._changes.set(n.key,o)}),Do(this,"reset",n=>{this.set(n,l0r)}),this._store=t,this._treeState=r,this._changes=new Map}newTreeState_INTERNAL(){if(this._changes.size===0)return this._treeState;let t=c0r(this._treeState);for(let[r,n]of this._changes)d0r(t,r,s0r(n));return f0r(this._store,t),t}};function h0r(e){return t=>{e.replaceState(r=>{let n=new ure(e,r);return t(n),n.newTreeState_INTERNAL()})}}var m0r={atomicUpdater:h0r},g0r=m0r.atomicUpdater,v0r=Object.freeze({__proto__:null,atomicUpdater:g0r});function y0r(e,t){let r=new Map;for(let[n,o]of e)t(o,n)&&r.set(n,o);return r}var _0r=y0r;function b0r(e,t){let r=new Set;for(let n of e)t(n)&&r.add(n);return r}var x0r=b0r;function w0r(e,t){if(!e)throw new Error(t)}var E0r=w0r,JR=E0r;function S0r(...e){let t=new Map;for(let r=0;r<e.length;r++){let n=e[r].keys(),o;for(;!(o=n.next()).done;)t.set(o.value,e[r].get(o.value))}return t}var T0r=S0r;function I0r(e,t){if(e===t)return!0;if(e.length!==t.length)return!1;for(let r=0,n=e.length;r<n;r++)if(e[r]!==t[r])return!1;return!0}var M0r=I0r;var{useRef:C0r}=su.default;function A0r(){let e=C0r();if(0&&Si("recoil_infer_component_names"))var t;return"<component name not available>"}var Ore=A0r,{atomicUpdater:q7e}=v0r,{batchUpdates:Pre}=Tre,{DEFAULT_VALUE:u6,getNode:z7e,nodes:O0r}=uf,{useRecoilMutableSource:P0r,useStoreRef:gp}=l6,{isRecoilValue:bEn}=Yy,{AbstractRecoilValue:Dre,getRecoilValueAsLoadable:JA,setRecoilValue:tS,setRecoilValueLoadable:D0r,setUnvalidatedRecoilValue:N0r,subscribeToRecoilValue:Nre}=U_,{updateRetainCount:$A}=oO,{RetentionZone:L0r}=n6,{Snapshot:xEn,cloneSnapshot:tO}=s6,{setByAddingToSet:k0r}=c7e,{isSSR:QR}=Mre,{mutableSourceExists:R0r,useMutableSource:j0r}=u7e,{useCallback:Td,useEffect:Pg,useMemo:F7e,useRef:Wy,useState:Lre}=su.default,U7e=12e4;function B7e(e,t,r){if(e.state==="hasValue")return e.contents;throw e.state==="loading"?new Promise(o=>{r.current.getState().suspendedComponentResolvers.add(o)}):e.state==="hasError"?e.contents:new Error(`Invalid value of loadable atom "${t.key}"`)}function q0r(){let e=gp(),[t,r]=Lre([]),n=Wy(new Set);n.current=new Set;let o=Wy(new Set),i=Wy(new Map),a=Td(h=>{let m=i.current.get(h);m&&(m.release(),i.current.delete(h))},[i]),c=Ore();return Pg(()=>{let h=e.current;function m(y,w){i.current.has(w)&&r([])}KR(n.current,o.current).forEach(y=>{if(i.current.has(y)){bre(`Double subscription to RecoilValue "${y}"`);return}let w=Nre(h,new Dre(y),A=>{m(A,y)},c);i.current.set(y,w),h.getState().nextTree?h.getState().queuedComponentCallbacks_DEPRECATED.push(()=>{m(h.getState(),y)}):m(h.getState(),y)}),KR(o.current,n.current).forEach(y=>{a(y)}),o.current=n.current}),Pg(()=>{let h=i.current;return()=>h.forEach((m,y)=>a(y))},[a]),F7e(()=>{function h(P){return j=>{tS(e.current,P,j)}}function m(P){return()=>tS(e.current,P,u6)}function y(P){var j;n.current.has(P.key)||(n.current=k0r(n.current,P.key));let D=e.current.getState();return JA(e.current,P,Si("recoil_early_rendering_2021")&&(j=D.nextTree)!==null&&j!==void 0?j:D.currentTree)}function w(P){let j=y(P);return B7e(j,P,e)}function E(P){return[w(P),h(P)]}function A(P){return[y(P),h(P)]}return{getRecoilValue:w,getRecoilValueLoadable:y,getRecoilState:E,getRecoilStateLoadable:A,getSetRecoilState:h,getResetRecoilState:m}},[n,e])}var z0r={current:0};function F0r(e){let t=gp(),r=Td(()=>{var m;let y=t.current,w=y.getState(),E=Si("recoil_early_rendering_2021")&&(m=w.nextTree)!==null&&m!==void 0?m:w.currentTree;return JA(y,e,E)},[t,e]),n=Td(()=>r(),[r]),o=Ore(),i=Td((m,y)=>{let w=t.current;return Nre(w,e,()=>{if(!Si("recoil_suppress_rerender_in_callback"))return y();let A=r();h.current.is(A)||y(),h.current=A},o).release},[t,e,o,r]),a=P0r(),c=j0r(a,n,i),h=Wy(c);return Pg(()=>{h.current=c}),c}function U0r(e){let t=gp(),[r,n]=Lre([]),o=Ore();Pg(()=>{let c=t.current,h=c.getState(),m=Nre(c,e,w=>{var E;if(!Si("recoil_suppress_rerender_in_callback"))return n([]);let A=JA(c,e,c.getState().currentTree);!((E=a.current)===null||E===void 0)&&E.is(A)||n(A),a.current=A},o);if(h.nextTree)c.getState().queuedComponentCallbacks_DEPRECATED.push(()=>{a.current=null,n([])});else{var y;if(!Si("recoil_suppress_rerender_in_callback"))return n([]);let w=JA(c,e,c.getState().currentTree);!((y=a.current)===null||y===void 0)&&y.is(w)||n(w),a.current=w}return m.release},[o,e,t]);let i=JA(t.current,e),a=Wy(i);return Pg(()=>{a.current=i}),i}function kre(e){return Si("recoil_memory_managament_2020")&&$7e(e),R0r()?F0r(e):U0r(e)}function V7e(e){let t=gp(),r=kre(e);return B7e(r,e,t)}function Rre(e){let t=gp();return Td(r=>{tS(t.current,e,r)},[t,e])}function B0r(e){let t=gp();return Td(()=>{tS(t.current,e,u6)},[t,e])}function V0r(e){return[V7e(e),Rre(e)]}function G0r(e){return[kre(e),Rre(e)]}function c6(e){let t=gp();Pg(()=>t.current.subscribeToTransactions(e).release,[e,t])}function QFe(e){let t=e.atomValues.toMap(),r=XR(_0r(t,(n,o)=>{let a=z7e(o).persistence_UNSTABLE;return a!=null&&a.type!=="none"&&n.state==="hasValue"}),n=>n.contents);return T0r(e.nonvalidatedAtoms.toMap(),r)}function H0r(e){c6(Td(t=>{let r=t.getState().previousTree,n=t.getState().currentTree;r||(Bh("Transaction subscribers notified without a previous tree being present -- this is a bug in Recoil"),r=t.getState().currentTree);let o=QFe(n),i=QFe(r),a=XR(O0r,h=>{var m,y,w,E;return{persistence_UNSTABLE:{type:(m=(y=h.persistence_UNSTABLE)===null||y===void 0?void 0:y.type)!==null&&m!==void 0?m:"none",backButton:(w=(E=h.persistence_UNSTABLE)===null||E===void 0?void 0:E.backButton)!==null&&w!==void 0?w:!1}}}),c=x0r(n.dirtyAtoms,h=>o.has(h)||i.has(h));e({atomValues:o,previousAtomValues:i,atomInfo:a,modifiedAtoms:c,transactionMetadata:Te({},n.transactionMetadata)})},[e]))}function $0r(e){c6(Td(t=>{let r=tO(t,"current"),n=tO(t,"previous");e({snapshot:r,previousSnapshot:n})},[e]))}function G7e(e){let t=Wy();return Pg(()=>{t.current=e}),t.current}function W0r(){let e=gp(),[t,r]=Lre(()=>tO(e.current)),n=G7e(t),o=Wy();return Pg(()=>(o.current&&!QR&&window.clearTimeout(o.current),t.retain()),[t]),c6(Td(i=>r(tO(i)),[])),n!==t&&!QR&&(o.current&&(n==null||n.release_INTERNAL(),window.clearTimeout(o.current)),t.retain(),o.current=window.setTimeout(()=>{t.release_INTERNAL(),o.current=null},U7e)),t}function H7e(){let e=gp();return Td(t=>{var r;let n=e.current.getState(),o=(r=n.nextTree)!==null&&r!==void 0?r:n.currentTree,i=t.getStore_INTERNAL().getState().currentTree;Pre(()=>{let a=new Set;for(let m of[o.atomValues.keys(),i.atomValues.keys()])for(let y of m){var c,h;((c=o.atomValues.get(y))===null||c===void 0?void 0:c.contents)!==((h=i.atomValues.get(y))===null||h===void 0?void 0:h.contents)&&z7e(y).shouldRestoreFromSnapshots&&a.add(y)}a.forEach(m=>{D0r(e.current,new Dre(m),i.atomValues.has(m)?si(i.atomValues.get(m)):u6)}),e.current.replaceState(m=>Dt(Te({},m),{stateID:t.getID_INTERNAL()}))})},[e])}function Y0r(){let e=gp();return(t,r={})=>{Pre(()=>{e.current.addTransactionMetadata(r),t.forEach((n,o)=>N0r(e.current,new Dre(o),n))})}}var e6=class{},Z0r=new e6;function K0r(e,t){let r=gp(),n=H7e();return Td((...o)=>{function i(y,w){tS(r.current,y,w)}function a(y){tS(r.current,y,u6)}let c=tO(r.current),h=q7e(r.current),m=Z0r;return Pre(()=>{let y="useRecoilCallback expects a function that returns a function: it accepts a function of the type (RecoilInterface) => T = R and returns a callback function T => R, where RecoilInterface is an object {snapshot, set, ...} and T and R are the argument and return types of the callback you want to create.  Please see the docs at recoiljs.org for details.";if(typeof e!="function")throw new Error(y);let w=e({set:i,reset:a,snapshot:c,gotoSnapshot:n,transact_UNSTABLE:h});if(typeof w!="function")throw new Error(y);m=w(...o)}),m instanceof e6&&JR(!1),m},t!=null?[...t,r]:void 0)}function $7e(e){if(Si("recoil_memory_managament_2020"))return X0r(e)}function X0r(e){let r=(Array.isArray(e)?e:[e]).map(a=>a instanceof L0r?a:a.key),n=gp();Pg(()=>{if(!Si("recoil_memory_managament_2020"))return;let a=n.current;if(o.current&&!QR)window.clearTimeout(o.current),o.current=null;else for(let c of r)$A(a,c,1);return()=>{for(let c of r)$A(a,c,-1)}},[n,...r]);let o=Wy(),i=G7e(r);if(!QR&&(i===void 0||!M0r(i,r))){let a=n.current;for(let c of r)$A(a,c,1);if(i)for(let c of i)$A(a,c,-1);o.current&&window.clearTimeout(o.current),o.current=window.setTimeout(()=>{o.current=null;for(let c of r)$A(a,c,-1)},U7e)}}function J0r(e,t){let r=gp();return F7e(()=>(...n)=>{q7e(r.current)(i=>{e(i)(...n)})},t!=null?[...t,r]:void 0)}var Q0r={recoilComponentGetRecoilValueCount_FOR_TESTING:z0r,useGotoRecoilSnapshot:H7e,useRecoilCallback:K0r,useRecoilInterface:q0r,useRecoilSnapshot:W0r,useRecoilState:V0r,useRecoilStateLoadable:G0r,useRecoilTransaction:J0r,useRecoilTransactionObserver:$0r,useRecoilValue:V7e,useRecoilValueLoadable:kre,useRetain:$7e,useResetRecoilState:B0r,useSetRecoilState:Rre,useSetUnvalidatedAtomValues:Y0r,useTransactionObservation_DEPRECATED:H0r,useTransactionSubscription_DEPRECATED:c6},{peekNodeInfo:e1r}=rS,{useStoreRef:t1r}=l6;function r1r(){let e=t1r();return({key:t})=>e1r(e.current,e.current.getState().currentTree,t)}var n1r=r1r,{RecoilRoot:o1r,useStoreRef:i1r}=l6,{useMemo:a1r}=su.default;function s1r(){let e=i1r().current;return a1r(()=>{function t({children:r}){return su.default.createElement(o1r,{store_INTERNAL:e},r)}return t},[e])}var l1r=s1r;var{isReactNative:wEn,isSSR:EEn}=Mre;function Sd(e,t,r){if(typeof e=="string"&&!e.includes("\"")&&!e.includes("\\"))return`"${e}"`;switch(typeof e){case"undefined":return"";case"boolean":return e?"true":"false";case"number":case"symbol":return String(e);case"string":return JSON.stringify(e);case"function":if((t==null?void 0:t.allowFunctions)!==!0)throw new Error("Attempt to serialize function in a Recoil cache key");return`__FUNCTION(${e.name})__`}if(e===null)return"null";if(typeof e!="object"){var n;return(n=JSON.stringify(e))!==null&&n!==void 0?n:""}if(Ya(e))return"__PROMISE__";if(Array.isArray(e))return`[${e.map((o,i)=>Sd(o,t,i.toString()))}]`;if(typeof e.toJSON=="function")return Sd(e.toJSON(r),t,r);if(e instanceof Map){let o={};for(let[i,a]of e)o[typeof i=="string"?i:Sd(i,t)]=a;return Sd(o,t,r)}return e instanceof Set?Sd(Array.from(e).sort((o,i)=>Sd(o,t).localeCompare(Sd(i,t))),t,r):Symbol!==void 0&&e[Symbol.iterator]!=null&&typeof e[Symbol.iterator]=="function"?Sd(Array.from(e),t,r):`{${Object.keys(e).filter(o=>e[o]!==void 0).sort().map(o=>`${Sd(o,t)}:${Sd(e[o],t,o)}`).join(",")}}`}function u1r(e,t={allowFunctions:!1}){return Sd(e,t)}var p6=u1r,cre=class{constructor(t){var r,n,o;Do(this,"_numLeafs",void 0),Do(this,"_root",void 0),Do(this,"_onHit",void 0),Do(this,"_onSet",void 0),Do(this,"_mapNodeValue",void 0),this._numLeafs=0,this._root=null,this._onHit=(r=t==null?void 0:t.onHit)!==null&&r!==void 0?r:()=>{},this._onSet=(n=t==null?void 0:t.onSet)!==null&&n!==void 0?n:()=>{},this._mapNodeValue=(o=t==null?void 0:t.mapNodeValue)!==null&&o!==void 0?o:i=>i}size(){return this._numLeafs}root(){return this._root}get(t,r){var n;return(n=this.getLeafNode(t,r))===null||n===void 0?void 0:n.value}getLeafNode(t,r){return W7e(this.root(),n=>this._mapNodeValue(t(n)),{onNodeVisit:n=>{r==null||r.onNodeVisit(n),n.type==="leaf"&&this._onHit(n)}})}set(t,r,n){let o,i=pre(this.root(),t.map(([a,c])=>[a,this._mapNodeValue(c)]),null,r,null,{onNodeVisit:a=>{n==null||n.onNodeVisit(a),a.type==="leaf"&&(o=a)}});this.root()||(this._root=i),this._numLeafs++,this._onSet(si(o))}delete(t){if(!this.root())return!1;let r=si(this.root());return c1r(r,t,t.parent)?t===r||r.type==="branch"&&!r.branches.size?(this._root=null,this._numLeafs=0,!0):(this._numLeafs-=Z7e(t),!0):!1}clear(){this._numLeafs=0,this._root=null}},W7e=(e,t,r)=>{var n;if(e==null)return;if(r==null||(n=r.onNodeVisit)===null||n===void 0||n.call(r,e),e.type==="leaf")return e;let o=t(e.nodeKey);return W7e(e.branches.get(o),t,r)},pre=(e,t,r,n,o,i)=>{var a;let c;if(e==null){if(t.length===0)c={type:"leaf",value:n,parent:r,branchKey:o};else{let[h,...m]=t,[y,w]=h;c={type:"branch",nodeKey:y,parent:r,branches:new Map,branchKey:o},c.branches.set(w,pre(null,m,c,n,w,i))}}else if(c=e,t.length){let[h,...m]=t,[y,w]=h;e.type==="branch"&&e.nodeKey===y||JR(!1),e.branches.set(w,pre(e.branches.get(w),m,e,n,w,i))}return i==null||(a=i.onNodeVisit)===null||a===void 0||a.call(i,c),c},c1r=(e,t,r)=>r?(r.branches.delete(t.branchKey),Y7e(e,r,r.parent)):e===t,Y7e=(e,t,r)=>r?(t.branches.size===0&&r.branches.delete(t.branchKey),Y7e(e,r,r.parent)):e===t,Z7e=e=>e.type==="leaf"?1:Array.from(e.branches.values()).reduce((t,r)=>t+Z7e(r),0),p1r={TreeCache:cre},f1r=p1r.TreeCache,K7e=Object.freeze({__proto__:null,TreeCache:f1r}),fre=class{constructor(t){var r;Do(this,"_maxSize",void 0),Do(this,"_size",void 0),Do(this,"_head",void 0),Do(this,"_tail",void 0),Do(this,"_map",void 0),Do(this,"_keyMapper",void 0),this._maxSize=t.maxSize,this._size=0,this._head=null,this._tail=null,this._map=new Map,this._keyMapper=(r=t.mapKey)!==null&&r!==void 0?r:n=>n}head(){return this._head}tail(){return this._tail}size(){return this._size}maxSize(){return this._maxSize}has(t){return this._map.has(this._keyMapper(t))}get(t){let r=this._keyMapper(t),n=this._map.get(r);if(n)return this.set(t,n.value),n.value}set(t,r){let n=this._keyMapper(t);this._map.get(n)&&this.delete(t);let i=this.head(),a={key:t,right:i,left:null,value:r};i?i.left=a:this._tail=a,this._map.set(n,a),this._head=a,this._size++,this._maybeDeleteLRU()}_maybeDeleteLRU(){this.size()>this.maxSize()&&this.deleteLru()}deleteLru(){let t=this.tail();t&&this.delete(t.key)}delete(t){let r=this._keyMapper(t);if(!this._size||!this._map.has(r))return;let n=si(this._map.get(r)),o=n.right,i=n.left;o&&(o.left=n.left),i&&(i.right=n.right),n===this.head()&&(this._head=o),n===this.tail()&&(this._tail=i),this._map.delete(r),this._size--}clear(){this._size=0,this._head=null,this._tail=null,this._map=new Map}},d1r={LRUCache:fre},h1r=d1r.LRUCache,X7e=Object.freeze({__proto__:null,LRUCache:h1r}),{LRUCache:m1r}=X7e,{TreeCache:g1r}=K7e;function v1r(e,t=r=>r){let r=new m1r({maxSize:e}),n=new g1r({mapNodeValue:t,onHit:o=>{r.set(o,!0)},onSet:o=>{let i=r.tail();r.set(o,!0),i&&n.size()>e&&n.delete(i.key)}});return n}var e7e=v1r,{TreeCache:y1r}=K7e,zR={equality:"reference",eviction:"keep-all",maxSize:1/0};function _1r({equality:e=zR.equality,eviction:t=zR.eviction,maxSize:r=zR.maxSize}=zR){let n=b1r(e);return x1r(t,r,n)}function b1r(e){switch(e){case"reference":return t=>t;case"value":return t=>p6(t)}throw new Error(`Unrecognized equality policy ${e}`)}function x1r(e,t,r){switch(e){case"keep-all":return new y1r({mapNodeValue:r});case"lru":return e7e(si(t),r);case"most-recent":return e7e(1,r)}throw new Error(`Unrecognized eviction policy ${e}`)}var w1r=_1r;function E1r(e){return()=>null}var S1r={startPerfBlock:E1r},{CANCELED:WA,Canceled:T1r,loadableWithError:YA,loadableWithPromise:I1r,loadableWithValue:Jte}=rO,{getNodeLoadable:t7e,peekNodeLoadable:M1r,setNodeValue:C1r}=rS,{saveDependencyMapToStore:A1r}=nO,{DEFAULT_VALUE:O1r,RecoilValueNotReady:P1r,getConfigDeletionHandler:D1r,registerNode:r7e}=uf,{isRecoilValue:N1r}=Yy,{AbstractRecoilValue:L1r}=Yy,{setRecoilValueLoadable:k1r}=U_,{retainedByOptionWithDefault:R1r}=oO,{cloneSnapshot:j1r}=s6,{startPerfBlock:q1r}=S1r,ZA=[],FR=new Map,z1r=(()=>{let e=0;return()=>e++})();function F1r(){return{depValuesDiscoveredSoFarDuringAsyncWork:null,latestLoadable:null,latestExecutionId:null,stateVersion:null}}function U1r(e){let{key:t,get:r,cachePolicy_UNSTABLE:n}=e,o=e.set!=null?e.set:void 0,i=w1r(n!=null?n:{equality:"reference",eviction:"keep-all"}),a=R1r(e.retainedBy_UNSTABLE),c=new Map,h=0;function m(){return!Si("recoil_memory_managament_2020")||h>0}function y($e){return c.has($e)||c.set($e,F1r()),si(c.get($e))}function w($e){return h++,$e.getState().knownSelectors.add(t),()=>{h--,$e.getState().knownSelectors.delete(t),c.delete($e)}}function E(){return D1r(t)!==void 0&&!m()}function A($e,De,Ke){if(De.state==="loading"){let Ge=FR.get(Ke);Ge==null&&FR.set(Ke,Ge=new Set),Ge.add($e)}}function P($e,De){let Ke=FR.get(De);if(Ke!==void 0){for(let Ge of Ke)k1r(Ge,new L1r(t),$e);FR.delete(De)}}function j($e,De,Ke){let Ge=$e.getState().knownSelectors.has(Ke);if(Ge&&De.atomValues.has(Ke))return si(De.atomValues.get(Ke));let ft=t7e($e,De,Ke);return ft.state!=="loading"&&Ge&&De.atomValues.set(Ke,ft),ft}function D($e,De,Ke,Ge,ft){return De.then(mt=>{if(!m())return rt($e,ft),WA;let Ot=Jte(mt);return _t(Ke,te(Ge),Ot),B($e,Ke,new Set(Ge.keys()),ft),z($e,Ot,ft),{__value:mt,__key:t}}).catch(mt=>{if(!m())return rt($e,ft),WA;if(ct($e,ft)&&Ze(Ge,$e,ft),Ya(mt))return L($e,mt,Ke,Ge,ft);let Ot=YA(mt);throw _t(Ke,te(Ge),Ot),B($e,Ke,new Set(Ge.keys()),ft),z($e,Ot,ft),mt})}function L($e,De,Ke,Ge,ft){return De.then(mt=>{if(!m())return rt($e,ft),WA;if(mt instanceof T1r)return Bh("Selector was released while it had dependencies"),WA;let{__key:Ot,__value:At}=mt!=null?mt:{},Mt=!0;Ot!=null&&(Ke.atomValues.set(Ot,Jte(At)),Mt=!1);let Yt=K($e,Ke);if(Yt&&Yt.state==="hasValue")return de(Yt,$e),{__value:Yt.contents,__key:t};if(!ct($e,ft)){var jt;let jr=pe(Ke);if((jr==null||(jt=jr.latestLoadable)===null||jt===void 0?void 0:jt.state)==="loading")return jr.latestLoadable.contents}let[Ut,ar]=Z($e,Ke,ft,Mt);if(ct($e,ft)&&Ze(ar,$e,ft),qe(Ut),Ut.state!=="loading"&&(_t(Ke,te(ar),Ut),B($e,Ke,new Set(ar.keys()),ft),z($e,Ut,ft)),Ut.state==="hasError")throw Ut.contents;return Ut.state==="hasValue"?{__value:Ut.contents,__key:t}:Ut.contents}).catch(mt=>{if(!m())return rt($e,ft),WA;let Ot=YA(mt);throw _t(Ke,te(Ge),YA(mt)),B($e,Ke,new Set(Ge.keys()),ft),z($e,Ot,ft),mt})}function z($e,De,Ke){ct($e,Ke)&&(de(De,$e),P(De,Ke))}function B($e,De,Ke,Ge){var ft,mt,Ot,At;if(ct($e,Ge)||De.version===((ft=$e.getState())===null||ft===void 0||(mt=ft.currentTree)===null||mt===void 0?void 0:mt.version)||De.version===((Ot=$e.getState())===null||Ot===void 0||(At=Ot.nextTree)===null||At===void 0?void 0:At.version)){var Mt,Yt,jt;A1r(new Map([[t,Ke]]),$e,(Mt=(Yt=$e.getState())===null||Yt===void 0||(jt=Yt.nextTree)===null||jt===void 0?void 0:jt.version)!==null&&Mt!==void 0?Mt:$e.getState().currentTree.version)}}function G($e,De,Ke,Ge,ft){Ke.add(Ge),B($e,De,Ke,ft)}function Z($e,De,Ke,Ge=!1){let ft=q1r(t),mt,Ot=!1,At,Mt=new Map,Yt=new Set;B($e,De,Yt,Ke);function jt(jr){let{key:Or}=jr;G($e,De,Yt,Or,Ke);let br=Ge?t7e($e,De,Or):j($e,De,Or);if(qe(br),Mt.set(Or,br),br.state==="hasValue")return br.contents;throw br.contents}let Ut=!1,ar=jr=>(...Or)=>{if(!Ut)throw new Error("getCallback() should only be called asynchronously after the selector is evalutated.  It can be used for selectors to return objects with callbacks that can obtain the current Recoil state without a subscription.");let br=j1r($e),Pr=jr({snapshot:br});if(typeof Pr!="function")throw new Error("getCallback() expects a function that returns a function.");return Pr(...Or)};try{mt=r({get:jt,getCallback:ar}),mt=N1r(mt)?jt(mt):mt,Ut=!0,Ya(mt)?mt=D($e,mt,De,Mt,Ke).finally(ft):ft()}catch(jr){mt=jr,Ya(mt)?mt=L($e,mt,De,Mt,Ke).finally(ft):(Ot=!0,ft())}return Ot?At=YA(mt):Ya(mt)?At=I1r(mt):At=Jte(mt),qe(At),[At,Mt]}function K($e,De){let Ke=new Set,Ge=y($e),ft=i.get(mt=>(typeof mt!="string"&&JR(!1),j($e,De,mt).contents),{onNodeVisit:mt=>{mt.type==="branch"&&mt.nodeKey!==t&&typeof mt.nodeKey=="string"&&Ke.add(mt.nodeKey)}});return ft&&B($e,De,Ke,Ge.latestExecutionId),ft}function te($e){return Array.from($e.entries()).map(([De,Ke])=>[De,Ke.contents])}function se($e,De){let Ke=z1r(),[Ge,ft]=Z($e,De,Ke);return de(Ge,$e,ft,Ke,De),Ce(De,te(ft),Ge),A($e,Ge,Ke),Ge}function le($e,De){let Ke=K($e,De);if(Ke!=null)return de(Ke,$e),Ke;let Ge=pe(De);if(Ge){let ft=Ge;return A($e,si(ft.latestLoadable),si(ft.latestExecutionId)),si(ft.latestLoadable)}return se($e,De)}function pe($e){var De;let[,Ke]=(De=Array.from(c.entries()).find(([Ge,ft])=>ft.latestLoadable!=null&&ft.latestExecutionId!=null&&!_e(Ge,$e)))!==null&&De!==void 0?De:[];return Ke}let me=new Map;function _e($e,De){var Ke,Ge;let ft=y($e),mt=(Ke=ft.depValuesDiscoveredSoFarDuringAsyncWork)!==null&&Ke!==void 0?Ke:new Map,Ot=Array(((Ge=me.get(De.version))!==null&&Ge!==void 0?Ge:new Map).entries()),At=me.has(De.version)&&Ot.length===mt.size&&Ot.every(([Mt,Yt])=>mt.get(Mt)===Yt);return mt==null||De.version===ft.stateVersion||At?!1:(me.set(De.version,new Map(mt)),Array.from(mt).some(([Mt,Yt])=>j($e,De,Mt).contents!==Yt.contents))}function de($e,De,Ke,Ge,ft){let mt=y(De);$e.state==="loading"?(mt.depValuesDiscoveredSoFarDuringAsyncWork=Ke,mt.latestExecutionId=Ge,mt.latestLoadable=$e,mt.stateVersion=ft==null?void 0:ft.version):(mt.depValuesDiscoveredSoFarDuringAsyncWork=null,mt.latestExecutionId=null,mt.latestLoadable=null,mt.stateVersion=null)}function Ce($e,De,Ke){Ke.state!=="loading"&&_t($e,De,Ke)}function Ze($e,De,Ke){let Ge=y(De);ct(De,Ke)&&(Ge.depValuesDiscoveredSoFarDuringAsyncWork=$e)}function rt($e,De){ct($e,De)&&c.delete($e)}function ct($e,De){let Ke=y($e);return De===Ke.latestExecutionId}function qe($e){$e.state!=="loading"&&($e.contents,void 0)}function lt($e){}function _t($e,De,Ke){$e.atomValues.set(t,Ke),i.set(De,Ke)}function Tt($e){if(ZA.includes(t)){let De=`Recoil selector has circular dependencies: ${ZA.slice(ZA.indexOf(t)).join(" \u2192 ")}`;return YA(new Error(De))}ZA.push(t);try{return $e()}finally{ZA.pop()}}function et($e,De){return i.get(Ge=>{typeof Ge!="string"&&JR(!1);let ft=M1r($e,De,Ge);return ft==null?void 0:ft.contents})}function pt($e,De){return Tt(()=>le($e,De))}function ot($e){$e.atomValues.delete(t)}return o!=null?r7e({key:t,nodeType:"selector",peek:et,get:pt,set:(De,Ke,Ge)=>{let ft=!1,mt=new Map;function Ot({key:jt}){if(ft)throw new Error("Recoil: Async selector sets are not currently supported.");let Ut=j(De,Ke,jt);if(qe(Ut),Ut.state==="hasValue")return Ut.contents;throw Ut.state==="loading"?new P1r(jt):Ut.contents}function At(jt,Ut){if(ft)throw new Error("Recoil: Async selector sets are not currently supported.");let ar=typeof Ut=="function"?Ut(Ot(jt)):Ut;C1r(De,Ke,jt.key,ar).forEach((Or,br)=>mt.set(br,Or))}function Mt(jt){At(jt,O1r)}let Yt=o({set:At,get:Ot,reset:Mt},Ge);if(Yt!==void 0)throw Ya(Yt)?new Error("Recoil: Async selector sets are not currently supported."):new Error("Recoil: selector set should be a void function.");return ft=!0,mt},init:w,invalidate:ot,shouldDeleteConfigOnRelease:E,dangerouslyAllowMutability:e.dangerouslyAllowMutability,shouldRestoreFromSnapshots:!1,retainedBy:a}):r7e({key:t,nodeType:"selector",peek:et,get:pt,init:w,invalidate:ot,shouldDeleteConfigOnRelease:E,dangerouslyAllowMutability:e.dangerouslyAllowMutability,shouldRestoreFromSnapshots:!1,retainedBy:a})}var t6=U1r,{loadableWithError:n7e,loadableWithPromise:o7e,loadableWithValue:KA}=rO,{DEFAULT_VALUE:z_,DefaultValue:XE,getConfigDeletionHandler:J7e,registerNode:B1r,setConfigDeletionHandler:V1r}=uf,{isRecoilValue:G1r}=Yy,{markRecoilValueModified:H1r,setRecoilValue:i7e,setRecoilValueLoadable:$1r}=U_,{retainedByOptionWithDefault:W1r}=oO;function Y1r(e){let{key:t,persistence_UNSTABLE:r}=e,n=W1r(e.retainedBy_UNSTABLE),o=0,i=Ya(e.default)?o7e(e.default.then(D=>(i=KA(D),{__key:t,__value:D})).catch(D=>{throw i=n7e(D),D})):KA(e.default),a,c=new Map;function h(D,L){let z=L.then(B=>{var G,Z;return((Z=((G=D.getState().nextTree)!==null&&G!==void 0?G:D.getState().currentTree).atomValues.get(t))===null||Z===void 0?void 0:Z.contents)===z&&i7e(D,j,B),{__key:t,__value:B}}).catch(B=>{var G,Z;throw((Z=((G=D.getState().nextTree)!==null&&G!==void 0?G:D.getState().currentTree).atomValues.get(t))===null||Z===void 0?void 0:Z.contents)===z&&$1r(D,j,n7e(B)),B});return z}function m(D,L,z){o++;let B=D.getState().knownAtoms.has(t);if(D.getState().knownAtoms.add(t),i.state==="loading"){let le=()=>{var pe;((pe=D.getState().nextTree)!==null&&pe!==void 0?pe:D.getState().currentTree).atomValues.has(t)||H1r(D,j)};i.contents.then(le).catch(le)}let G=z_,Z=null;if(e.effects_UNSTABLE!=null&&!B){let le=!0,pe=de=>Ce=>{if(le){let Ze=G instanceof XE||Ya(G)?i.state==="hasValue"?i.contents:z_:G;G=typeof Ce=="function"?Ce(Ze):Ce,Ya(G)&&(G=G.then(rt=>(Z={effect:de,value:rt},rt)))}else{if(Ya(Ce))throw new Error("Setting atoms to async values is not implemented.");typeof Ce!="function"&&(Z={effect:de,value:Ce}),i7e(D,j,typeof Ce=="function"?Ze=>{let rt=Ce(Ze);return Z={effect:de,value:rt},rt}:Ce)}},me=de=>()=>pe(de)(z_),_e=de=>Ce=>{D.subscribeToTransactions(Ze=>{var rt;let{currentTree:ct,previousTree:qe}=Ze.getState();qe||(Bh("Transaction subscribers notified without a next tree being present -- this is a bug in Recoil"),qe=ct);let lt=(rt=ct.atomValues.get(t))!==null&&rt!==void 0?rt:i;if(lt.state==="hasValue"){var _t,Tt,et,pt;let ot=lt.contents,$e=(_t=qe.atomValues.get(t))!==null&&_t!==void 0?_t:i,De=$e.state==="hasValue"?$e.contents:z_;((Tt=Z)===null||Tt===void 0?void 0:Tt.effect)!==de||((et=Z)===null||et===void 0?void 0:et.value)!==ot?Ce(ot,De):((pt=Z)===null||pt===void 0?void 0:pt.effect)===de&&(Z=null)}},t)};for(let de of(K=e.effects_UNSTABLE)!==null&&K!==void 0?K:[]){var K;let Ce=de({node:j,trigger:z,setSelf:pe(de),resetSelf:me(de),onSet:_e(de)});if(Ce!=null){var te;c.set(D,[...((te=c.get(D))!==null&&te!==void 0?te:[]),Ce])}}le=!1}if(!(G instanceof XE)){var se;let le=Ya(G)?o7e(h(D,G)):KA(G);L.atomValues.set(t,le),(se=D.getState().nextTree)===null||se===void 0||se.atomValues.set(t,le)}return()=>{var le;o--,(le=c.get(D))===null||le===void 0||le.forEach(pe=>pe()),c.delete(D),D.getState().knownAtoms.delete(t)}}function y(D,L){var z,B,G;return(z=(B=L.atomValues.get(t))!==null&&B!==void 0?B:(G=a)===null||G===void 0?void 0:G[1])!==null&&z!==void 0?z:i}function w(D,L){if(L.atomValues.has(t))return si(L.atomValues.get(t));if(L.nonvalidatedAtoms.has(t)){if(a!=null)return a;if(r==null)return bre(`Tried to restore a persisted value for atom ${t} but it has no persistence settings.`),i;let z=L.nonvalidatedAtoms.get(t),B=r.validator(z,z_);return a=B instanceof XE?i:KA(B),a}else return i}function E(){a=void 0}function A(D,L,z){if(L.atomValues.has(t)){let B=si(L.atomValues.get(t));if(B.state==="hasValue"&&z===B.contents)return new Map}else if(!L.nonvalidatedAtoms.has(t)&&z instanceof XE)return new Map;return a=void 0,new Map().set(t,KA(z))}function P(){return J7e(t)!==void 0&&o<=0}let j=B1r({key:t,nodeType:"atom",peek:y,get:w,set:A,init:m,invalidate:E,shouldDeleteConfigOnRelease:P,dangerouslyAllowMutability:e.dangerouslyAllowMutability,persistence_UNSTABLE:e.persistence_UNSTABLE?{type:e.persistence_UNSTABLE.type,backButton:e.persistence_UNSTABLE.backButton}:void 0,shouldRestoreFromSnapshots:!0,retainedBy:n});return j}function Q7e(e){let n=e,{default:t}=n,r=En(n,["default"]);return G1r(t)?Z1r(Dt(Te({},r),{default:t})):Y1r(Dt(Te({},r),{default:t}))}function Z1r(e){let t=Q7e(Dt(Te({},e),{default:z_,persistence_UNSTABLE:e.persistence_UNSTABLE===void 0?void 0:Dt(Te({},e.persistence_UNSTABLE),{validator:n=>n instanceof XE?n:si(e.persistence_UNSTABLE).validator(n,z_)}),effects_UNSTABLE:e.effects_UNSTABLE})),r=t6({key:`${e.key}__withFallback`,get:({get:n})=>{let o=n(t);return o instanceof XE?e.default:o},set:({set:n},o)=>n(t,o),dangerouslyAllowMutability:e.dangerouslyAllowMutability});return V1r(r.key,J7e(e.key)),r}var e9e=Q7e,dre=class{constructor(t){var r;Do(this,"_map",void 0),Do(this,"_keyMapper",void 0),this._map=new Map,this._keyMapper=(r=t==null?void 0:t.mapKey)!==null&&r!==void 0?r:n=>n}size(){return this._map.size}has(t){return this._map.has(this._keyMapper(t))}get(t){return this._map.get(this._keyMapper(t))}set(t,r){this._map.set(this._keyMapper(t),r)}delete(t){this._map.delete(this._keyMapper(t))}clear(){this._map.clear()}},K1r={MapCache:dre},X1r=K1r.MapCache,J1r=Object.freeze({__proto__:null,MapCache:X1r}),{LRUCache:a7e}=X7e,{MapCache:Q1r}=J1r,UR={equality:"reference",eviction:"none",maxSize:1/0};function e_r({equality:e=UR.equality,eviction:t=UR.eviction,maxSize:r=UR.maxSize}=UR){let n=t_r(e);return r_r(t,r,n)}function t_r(e){switch(e){case"reference":return t=>t;case"value":return t=>p6(t)}throw new Error(`Unrecognized equality policy ${e}`)}function r_r(e,t,r){switch(e){case"keep-all":return new Q1r({mapKey:r});case"lru":return new a7e({mapKey:r,maxSize:si(t)});case"most-recent":return new a7e({mapKey:r,maxSize:1})}throw new Error(`Unrecognized eviction policy ${e}`)}var t9e=e_r,{setConfigDeletionHandler:n_r}=uf;function o_r(e){var t,r;let n=t9e({equality:(t=(r=e.cachePolicyForParams_UNSTABLE)===null||r===void 0?void 0:r.equality)!==null&&t!==void 0?t:"value",eviction:"keep-all"});return o=>{var i;let a=n.get(o);if(a!=null)return a;let y=e,{cachePolicyForParams_UNSTABLE:c}=y,h=En(y,["cachePolicyForParams_UNSTABLE"]),m=e9e(Dt(Te({},h),{key:`${e.key}__${(i=p6(o))!==null&&i!==void 0?i:"void"}`,default:typeof e.default=="function"?e.default(o):e.default,retainedBy_UNSTABLE:typeof e.retainedBy_UNSTABLE=="function"?e.retainedBy_UNSTABLE(o):e.retainedBy_UNSTABLE,effects_UNSTABLE:typeof e.effects_UNSTABLE=="function"?e.effects_UNSTABLE(o):e.effects_UNSTABLE}));return n.set(o,m),n_r(m.key,()=>{n.delete(o)}),m}}var i_r=o_r,{setConfigDeletionHandler:a_r}=uf,s_r=0;function l_r(e){var t,r;let n=t9e({equality:(t=(r=e.cachePolicyForParams_UNSTABLE)===null||r===void 0?void 0:r.equality)!==null&&t!==void 0?t:"value",eviction:"keep-all"});return o=>{var i;let a=n.get(o);if(a!=null)return a;let c=`${e.key}__selectorFamily/${(i=p6(o,{allowFunctions:!0}))!==null&&i!==void 0?i:"void"}/${s_r++}`,h=E=>e.get(o)(E),m=e.cachePolicy_UNSTABLE,y=typeof e.retainedBy_UNSTABLE=="function"?e.retainedBy_UNSTABLE(o):e.retainedBy_UNSTABLE,w;if(e.set!=null){let E=e.set;w=t6({key:c,get:h,set:(P,j)=>E(o)(P,j),cachePolicy_UNSTABLE:m,dangerouslyAllowMutability:e.dangerouslyAllowMutability,retainedBy_UNSTABLE:y})}else w=t6({key:c,get:h,cachePolicy_UNSTABLE:m,dangerouslyAllowMutability:e.dangerouslyAllowMutability,retainedBy_UNSTABLE:y});return n.set(o,w),a_r(w.key,()=>{n.delete(o)}),w}}var Zy=l_r,u_r=Zy({key:"__constant",get:e=>()=>e,cachePolicyForParams_UNSTABLE:{equality:"reference"}});function c_r(e){return u_r(e)}var p_r=c_r,f_r=Zy({key:"__error",get:e=>()=>{throw new Error(e)},cachePolicyForParams_UNSTABLE:{equality:"reference"}});function d_r(e){return f_r(e)}var h_r=d_r;function m_r(e){return e}var g_r=m_r,{loadableWithError:r9e,loadableWithPromise:n9e,loadableWithValue:o9e}=rO;function f6(e,t){let r=Array(t.length).fill(void 0),n=Array(t.length).fill(void 0);for(let[o,i]of t.entries())try{r[o]=e(i)}catch(a){n[o]=a}return[r,n]}function v_r(e){return e!=null&&!Ya(e)}function d6(e){return Array.isArray(e)?e:Object.getOwnPropertyNames(e).map(t=>e[t])}function jre(e){return e!=null&&typeof e=="object"&&e.hasOwnProperty("__value")?e.__value:e}function hre(e,t){return Array.isArray(e)?t:Object.getOwnPropertyNames(e).reduce((r,n,o)=>Dt(Te({},r),{[n]:t[o]}),{})}function QE(e,t,r){let n=r.map((o,i)=>o==null?o9e(t[i]):Ya(o)?n9e(o):r9e(o));return hre(e,n)}function y_r(e,t){return t.map((r,n)=>r===void 0?e[n]:r)}var __r=Zy({key:"__waitForNone",get:e=>({get:t})=>{let r=d6(e),[n,o]=f6(t,r);return QE(e,n,o)},dangerouslyAllowMutability:!0}),b_r=Zy({key:"__waitForAny",get:e=>({get:t})=>{let r=d6(e),[n,o]=f6(t,r);return o.some(i=>!Ya(i))?QE(e,n,o):new Promise(i=>{for(let[a,c]of o.entries())Ya(c)&&c.then(h=>{n[a]=jre(h),o[a]=void 0,i(QE(e,n,o))}).catch(h=>{o[a]=h,i(QE(e,n,o))})})},dangerouslyAllowMutability:!0}),x_r=Zy({key:"__waitForAll",get:e=>({get:t})=>{let r=d6(e),[n,o]=f6(t,r);if(o.every(a=>a==null))return hre(e,n);let i=o.find(v_r);if(i!=null)throw i;return Promise.all(o).then(a=>hre(e,y_r(n,a).map(jre)))},dangerouslyAllowMutability:!0}),w_r=Zy({key:"__waitForAllSettled",get:e=>({get:t})=>{let r=d6(e),[n,o]=f6(t,r);return o.every(i=>!Ya(i))?QE(e,n,o):Promise.all(o.map((i,a)=>Ya(i)?i.then(c=>{n[a]=jre(c),o[a]=void 0}).catch(c=>{n[a]=void 0,o[a]=c}):null)).then(()=>QE(e,n,o))},dangerouslyAllowMutability:!0}),E_r=Zy({key:"__noWait",get:e=>({get:t})=>{try{return o9e(t(e))}catch(r){return Ya(r)?n9e(r):r9e(r)}},dangerouslyAllowMutability:!0}),S_r={waitForNone:__r,waitForAny:b_r,waitForAll:x_r,waitForAllSettled:w_r,noWait:E_r},{batchUpdates:T_r,setBatcher:I_r}=Tre,{DefaultValue:M_r}=uf,{RecoilRoot:C_r}=l6,{isRecoilValue:A_r}=Yy,{retentionZone:O_r}=n6,{freshSnapshot:P_r}=s6,{useGotoRecoilSnapshot:D_r,useRecoilCallback:N_r,useRecoilSnapshot:L_r,useRecoilState:k_r,useRecoilStateLoadable:R_r,useRecoilTransaction:j_r,useRecoilTransactionObserver:q_r,useRecoilValue:z_r,useRecoilValueLoadable:F_r,useResetRecoilState:U_r,useRetain:B_r,useSetRecoilState:V_r,useSetUnvalidatedAtomValues:G_r,useTransactionObservation_DEPRECATED:H_r}=Q0r,{noWait:$_r,waitForAll:W_r,waitForAllSettled:Y_r,waitForAny:Z_r,waitForNone:K_r}=S_r,To={DefaultValue:M_r,RecoilRoot:C_r,useRecoilBridgeAcrossReactRoots_UNSTABLE:l1r,atom:e9e,selector:t6,retentionZone:O_r,atomFamily:i_r,selectorFamily:Zy,constSelector:p_r,errorSelector:h_r,readOnlySelector:g_r,useRecoilValue:z_r,useRecoilValueLoadable:F_r,useRecoilState:k_r,useRecoilStateLoadable:R_r,useSetRecoilState:V_r,useResetRecoilState:U_r,useGetRecoilValueInfo_UNSTABLE:n1r,useRetain:B_r,useRecoilCallback:N_r,useRecoilTransaction_UNSTABLE:j_r,useGotoRecoilSnapshot:D_r,useRecoilSnapshot:L_r,useRecoilTransactionObserver_UNSTABLE:q_r,useTransactionObservation_UNSTABLE:H_r,useSetUnvalidatedAtomValues_UNSTABLE:G_r,noWait:$_r,waitForNone:K_r,waitForAny:Z_r,waitForAll:W_r,waitForAllSettled:Y_r,isRecoilValue:A_r,batchUpdates:T_r,setBatcher:I_r,snapshot_UNSTABLE:P_r},SEn=To.DefaultValue,i9e=To.RecoilRoot,TEn=To.useRecoilBridgeAcrossReactRoots_UNSTABLE,dn=To.atom,Js=To.selector,IEn=To.retentionZone,MEn=To.atomFamily,CEn=To.selectorFamily,AEn=To.constSelector,OEn=To.errorSelector,PEn=To.readOnlySelector,bt=To.useRecoilValue,DEn=To.useRecoilValueLoadable,Io=To.useRecoilState,NEn=To.useRecoilStateLoadable,Lr=To.useSetRecoilState,LEn=To.useResetRecoilState,kEn=To.useGetRecoilValueInfo_UNSTABLE,REn=To.useRetain,pr=To.useRecoilCallback,jEn=To.useRecoilTransaction_UNSTABLE,qEn=To.useGotoRecoilSnapshot,zEn=To.useRecoilSnapshot,FEn=To.useRecoilTransactionObserver_UNSTABLE,UEn=To.useTransactionObservation_UNSTABLE,BEn=To.useSetUnvalidatedAtomValues_UNSTABLE,VEn=To.noWait,GEn=To.waitForNone,HEn=To.waitForAny,$En=To.waitForAll,WEn=To.waitForAllSettled,YEn=To.isRecoilValue,ZEn=To.batchUpdates,KEn=To.setBatcher,XEn=To.snapshot_UNSTABLE;u();u();var Ky=ee(ke());u();var h6=ee(ke()),X_r=e=>{let t=h6.useRef(e);return h6.useEffect(()=>{t.current=e}),t},m6=X_r;var J_r=(e,t=100,r=!1)=>{let n=m6(e),o=Ky.useRef(),i=[t,r,n];function a(){o.current&&clearTimeout(o.current),o.current=void 0}Ky.useEffect(()=>a,i);function c(){o.current=void 0}return Ky.useCallback(function(){let h=arguments,{current:m}=o;if(m===void 0&&r)return o.current=setTimeout(c,t),n.current.apply(null,h);m&&clearTimeout(m),o.current=setTimeout(()=>{o.current=void 0,n.current.apply(null,h)},t)},i)},a9e=(e,t,r)=>{let n=Ky.useState(e);return[n[0],J_r(n[1],t,r)]};u();var nS=ee(ke());function Q_r(e,t,r,n){let o=nS.useRef(r),i=nS.useRef(n);nS.useEffect(()=>{o.current=r,i.current=n}),nS.useEffect(()=>{let a=e&&"current"in e?e.current:e;if(!a)return;let c=0;function h(...y){c||o.current.apply(this,y)}a.addEventListener(t,h);let m=i.current;return()=>{c=1,a.removeEventListener(t,h),m&&m()}},[e,t])}var g6=Q_r;var ebr={},iO=typeof window=="undefined"?null:window,tbr=iO&&typeof iO.visualViewport!="undefined"?iO.visualViewport:null,s9e=()=>[document.documentElement.clientWidth,document.documentElement.clientHeight],rbr=function(e){e===void 0&&(e=ebr);let{wait:t,leading:r,initialWidth:n=0,initialHeight:o=0}=e,[i,a]=a9e(typeof document=="undefined"?[n,o]:s9e,t,r),c=()=>a(s9e);return g6(iO,"resize",c),g6(tbr,"resize",c),g6(iO,"orientationchange",c),i};var l9e=e=>rbr(e)[0];var Kht=ee(It(),1);u();u();u();u();u();function qre(e){var t=null,r=function(){return t==null&&(t=e()),t};return r}function g9e(e,t){return e.filter(function(r){return r!==t})}function v9e(e,t){var r=new Set,n=function(a){return r.add(a)};e.forEach(n),t.forEach(n);var o=[];return r.forEach(function(i){return o.push(i)}),o}function ibr(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function y9e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function abr(e,t,r){return t&&y9e(e.prototype,t),r&&y9e(e,r),e}function _9e(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var b9e=function(){function e(t){ibr(this,e),_9e(this,"entered",[]),_9e(this,"isNodeInDocument",void 0),this.isNodeInDocument=t}return abr(e,[{key:"enter",value:function(r){var n=this,o=this.entered.length,i=function(c){return n.isNodeInDocument(c)&&(!c.contains||c.contains(r))};return this.entered=v9e(this.entered.filter(i),[r]),o===0&&this.entered.length>0}},{key:"leave",value:function(r){var n=this.entered.length;return this.entered=g9e(this.entered.filter(this.isNodeInDocument),r),n>0&&this.entered.length===0}},{key:"reset",value:function(){this.entered=[]}}]),e}();u();u();var x9e=qre(function(){return /firefox/i.test(navigator.userAgent)}),zre=qre(function(){return!!window.safari});u();function sbr(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function w9e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function lbr(e,t,r){return t&&w9e(e.prototype,t),r&&w9e(e,r),e}function aO(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var Fre=function(){function e(t,r){sbr(this,e),aO(this,"xs",void 0),aO(this,"ys",void 0),aO(this,"c1s",void 0),aO(this,"c2s",void 0),aO(this,"c3s",void 0);for(var n=t.length,o=[],i=0;i<n;i++)o.push(i);o.sort(function(le,pe){return t[le]<t[pe]?-1:1});for(var a=[],c=[],h=[],m,y,w=0;w<n-1;w++)m=t[w+1]-t[w],y=r[w+1]-r[w],c.push(m),a.push(y),h.push(y/m);for(var E=[h[0]],A=0;A<c.length-1;A++){var P=h[A],j=h[A+1];if(P*j<=0)E.push(0);else{m=c[A];var D=c[A+1],L=m+D;E.push(3*L/((L+D)/P+(L+m)/j))}}E.push(h[h.length-1]);for(var z=[],B=[],G,Z=0;Z<E.length-1;Z++){G=h[Z];var K=E[Z],te=1/c[Z],se=K+E[Z+1]-G-G;z.push((G-K-se)*te),B.push(se*te*te)}this.xs=t,this.ys=r,this.c1s=E,this.c2s=z,this.c3s=B}return lbr(e,[{key:"interpolate",value:function(r){var n=this.xs,o=this.ys,i=this.c1s,a=this.c2s,c=this.c3s,h=n.length-1;if(r===n[h])return o[h];for(var m=0,y=c.length-1,w;m<=y;){w=Math.floor(.5*(m+y));var E=n[w];if(E<r)m=w+1;else if(E>r)y=w-1;else return o[w]}h=Math.max(0,y);var A=r-n[h],P=A*A;return o[h]+i[h]*A+a[h]*P+c[h]*A*P}}]),e}();var ubr=1;function Ure(e){var t=e.nodeType===ubr?e:e.parentElement;if(!t)return null;var r=t.getBoundingClientRect(),n=r.top,o=r.left;return{x:o,y:n}}function sO(e){return{x:e.clientX,y:e.clientY}}function cbr(e){var t;return e.nodeName==="IMG"&&(x9e()||!((t=document.documentElement)!==null&&t!==void 0&&t.contains(e)))}function pbr(e,t,r,n){var o=e?t.width:r,i=e?t.height:n;return zre()&&e&&(i/=window.devicePixelRatio,o/=window.devicePixelRatio),{dragPreviewWidth:o,dragPreviewHeight:i}}function E9e(e,t,r,n,o){var i=cbr(t),a=i?e:t,c=Ure(a),h={x:r.x-c.x,y:r.y-c.y},m=e.offsetWidth,y=e.offsetHeight,w=n.anchorX,E=n.anchorY,A=pbr(i,t,m,y),P=A.dragPreviewWidth,j=A.dragPreviewHeight,D=function(){var te=new Fre([0,.5,1],[h.y,h.y/y*j,h.y+j-y]),se=te.interpolate(E);return zre()&&i&&(se+=(window.devicePixelRatio-1)*j),se},L=function(){var te=new Fre([0,.5,1],[h.x,h.x/m*P,h.x+P-m]);return te.interpolate(w)},z=o.offsetX,B=o.offsetY,G=z===0||z,Z=B===0||B;return{x:G?z:L(),y:Z?B:D()}}u();u();var Xy={};sw(Xy,{FILE:()=>Bre,HTML:()=>Hre,TEXT:()=>Gre,URL:()=>Vre});u();var Bre="__NATIVE_FILE__",Vre="__NATIVE_URL__",Gre="__NATIVE_TEXT__",Hre="__NATIVE_HTML__";u();function v6(e,t,r){var n=t.reduce(function(o,i){return o||e.getData(i)},"");return n!=null?n:r}var oS;function y6(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var _6=(oS={},y6(oS,Bre,{exposeProperties:{files:function(t){return Array.prototype.slice.call(t.files)},items:function(t){return t.items},dataTransfer:function(t){return t}},matchesTypes:["Files"]}),y6(oS,Hre,{exposeProperties:{html:function(t,r){return v6(t,r,"")},dataTransfer:function(t){return t}},matchesTypes:["Html","text/html"]}),y6(oS,Vre,{exposeProperties:{urls:function(t,r){return v6(t,r,"").split(`
`)},dataTransfer:function(t){return t}},matchesTypes:["Url","text/uri-list"]}),y6(oS,Gre,{exposeProperties:{text:function(t,r){return v6(t,r,"")},dataTransfer:function(t){return t}},matchesTypes:["Text","text/plain"]}),oS);u();function fbr(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function S9e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function dbr(e,t,r){return t&&S9e(e.prototype,t),r&&S9e(e,r),e}function T9e(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var I9e=function(){function e(t){fbr(this,e),T9e(this,"item",void 0),T9e(this,"config",void 0),this.config=t,this.item={},this.initializeExposedProperties()}return dbr(e,[{key:"initializeExposedProperties",value:function(){var r=this;Object.keys(this.config.exposeProperties).forEach(function(n){Object.defineProperty(r.item,n,{configurable:!0,enumerable:!0,get:function(){return console.warn(`Browser doesn't allow reading "`.concat(n,"\" until the drop event.")),null}})})}},{key:"loadDataTransfer",value:function(r){var n=this;if(r){var o={};Object.keys(this.config.exposeProperties).forEach(function(i){o[i]={value:n.config.exposeProperties[i](r,n.config.matchesTypes),configurable:!0,enumerable:!0}}),Object.defineProperties(this.item,o)}}},{key:"canDrag",value:function(){return!0}},{key:"beginDrag",value:function(){return this.item}},{key:"isDragging",value:function(r,n){return n===r.getSourceId()}},{key:"endDrag",value:function(){}}]),e}();function M9e(e,t){var r=new I9e(_6[e]);return r.loadDataTransfer(t),r}function b6(e){if(!e)return null;var t=Array.prototype.slice.call(e.types||[]);return Object.keys(_6).filter(function(r){var n=_6[r].matchesTypes;return n.some(function(o){return t.indexOf(o)>-1})})[0]||null}u();function hbr(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function C9e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function mbr(e,t,r){return t&&C9e(e.prototype,t),r&&C9e(e,r),e}function $re(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var A9e=function(){function e(t,r){hbr(this,e),$re(this,"ownerDocument",null),$re(this,"globalContext",void 0),$re(this,"optionsArgs",void 0),this.globalContext=t,this.optionsArgs=r}return mbr(e,[{key:"window",get:function(){if(this.globalContext)return this.globalContext;if(typeof window!="undefined")return window}},{key:"document",get:function(){var r;return(r=this.globalContext)!==null&&r!==void 0&&r.document?this.globalContext.document:this.window?this.window.document:void 0}},{key:"rootElement",get:function(){var r;return((r=this.optionsArgs)===null||r===void 0?void 0:r.rootElement)||this.window}}]),e}();function O9e(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(o){return Object.getOwnPropertyDescriptor(e,o).enumerable})),r.push.apply(r,n)}return r}function P9e(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?O9e(Object(r),!0).forEach(function(n){vo(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):O9e(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function gbr(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function D9e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function vbr(e,t,r){return t&&D9e(e.prototype,t),r&&D9e(e,r),e}function vo(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var N9e=function(){function e(t,r,n){var o=this;gbr(this,e),vo(this,"options",void 0),vo(this,"actions",void 0),vo(this,"monitor",void 0),vo(this,"registry",void 0),vo(this,"enterLeaveCounter",void 0),vo(this,"sourcePreviewNodes",new Map),vo(this,"sourcePreviewNodeOptions",new Map),vo(this,"sourceNodes",new Map),vo(this,"sourceNodeOptions",new Map),vo(this,"dragStartSourceIds",null),vo(this,"dropTargetIds",[]),vo(this,"dragEnterTargetIds",[]),vo(this,"currentNativeSource",null),vo(this,"currentNativeHandle",null),vo(this,"currentDragSourceNode",null),vo(this,"altKeyPressed",!1),vo(this,"mouseMoveTimeoutTimer",null),vo(this,"asyncEndDragFrameId",null),vo(this,"dragOverTargetIds",null),vo(this,"lastClientOffset",null),vo(this,"hoverRafId",null),vo(this,"getSourceClientOffset",function(i){var a=o.sourceNodes.get(i);return a&&Ure(a)||null}),vo(this,"endDragNativeItem",function(){o.isDraggingNativeItem()&&(o.actions.endDrag(),o.currentNativeHandle&&o.registry.removeSource(o.currentNativeHandle),o.currentNativeHandle=null,o.currentNativeSource=null)}),vo(this,"isNodeInDocument",function(i){return!!(i&&o.document&&o.document.body&&o.document.body.contains(i))}),vo(this,"endDragIfSourceWasRemovedFromDOM",function(){var i=o.currentDragSourceNode;i==null||o.isNodeInDocument(i)||o.clearCurrentDragSourceNode()&&o.monitor.isDragging()&&o.actions.endDrag()}),vo(this,"handleTopDragStartCapture",function(){o.clearCurrentDragSourceNode(),o.dragStartSourceIds=[]}),vo(this,"handleTopDragStart",function(i){if(!i.defaultPrevented){var a=o.dragStartSourceIds;o.dragStartSourceIds=null;var c=sO(i);o.monitor.isDragging()&&o.actions.endDrag(),o.actions.beginDrag(a||[],{publishSource:!1,getSourceClientOffset:o.getSourceClientOffset,clientOffset:c});var h=i.dataTransfer,m=b6(h);if(o.monitor.isDragging()){if(h&&typeof h.setDragImage=="function"){var y=o.monitor.getSourceId(),w=o.sourceNodes.get(y),E=o.sourcePreviewNodes.get(y)||w;if(E){var A=o.getCurrentSourcePreviewNodeOptions(),P=A.anchorX,j=A.anchorY,D=A.offsetX,L=A.offsetY,z={anchorX:P,anchorY:j},B={offsetX:D,offsetY:L},G=E9e(w,E,c,z,B);h.setDragImage(E,G.x,G.y)}}try{h==null||h.setData("application/json",{})}catch(te){}o.setCurrentDragSourceNode(i.target);var Z=o.getCurrentSourcePreviewNodeOptions(),K=Z.captureDraggingState;K?o.actions.publishDragSource():setTimeout(function(){return o.actions.publishDragSource()},0)}else if(m)o.beginDragNativeItem(m);else{if(h&&!h.types&&(i.target&&!i.target.hasAttribute||!i.target.hasAttribute("draggable")))return;i.preventDefault()}}}),vo(this,"handleTopDragEndCapture",function(){o.clearCurrentDragSourceNode()&&o.monitor.isDragging()&&o.actions.endDrag()}),vo(this,"handleTopDragEnterCapture",function(i){o.dragEnterTargetIds=[];var a=o.enterLeaveCounter.enter(i.target);if(!(!a||o.monitor.isDragging())){var c=i.dataTransfer,h=b6(c);h&&o.beginDragNativeItem(h,c)}}),vo(this,"handleTopDragEnter",function(i){var a=o.dragEnterTargetIds;if(o.dragEnterTargetIds=[],!!o.monitor.isDragging()){o.altKeyPressed=i.altKey,a.length>0&&o.actions.hover(a,{clientOffset:sO(i)});var c=a.some(function(h){return o.monitor.canDropOnTarget(h)});c&&(i.preventDefault(),i.dataTransfer&&(i.dataTransfer.dropEffect=o.getCurrentDropEffect()))}}),vo(this,"handleTopDragOverCapture",function(){o.dragOverTargetIds=[]}),vo(this,"handleTopDragOver",function(i){var a=o.dragOverTargetIds;if(o.dragOverTargetIds=[],!o.monitor.isDragging()){i.preventDefault(),i.dataTransfer&&(i.dataTransfer.dropEffect="none");return}o.altKeyPressed=i.altKey,o.lastClientOffset=sO(i),o.hoverRafId===null&&typeof requestAnimationFrame!="undefined"&&(o.hoverRafId=requestAnimationFrame(function(){o.monitor.isDragging()&&o.actions.hover(a||[],{clientOffset:o.lastClientOffset}),o.hoverRafId=null}));var c=(a||[]).some(function(h){return o.monitor.canDropOnTarget(h)});c?(i.preventDefault(),i.dataTransfer&&(i.dataTransfer.dropEffect=o.getCurrentDropEffect())):o.isDraggingNativeItem()?i.preventDefault():(i.preventDefault(),i.dataTransfer&&(i.dataTransfer.dropEffect="none"))}),vo(this,"handleTopDragLeaveCapture",function(i){o.isDraggingNativeItem()&&i.preventDefault();var a=o.enterLeaveCounter.leave(i.target);a&&o.isDraggingNativeItem()&&setTimeout(function(){return o.endDragNativeItem()},0)}),vo(this,"handleTopDropCapture",function(i){if(o.dropTargetIds=[],o.isDraggingNativeItem()){var a;i.preventDefault(),(a=o.currentNativeSource)===null||a===void 0||a.loadDataTransfer(i.dataTransfer)}else b6(i.dataTransfer)&&i.preventDefault();o.enterLeaveCounter.reset()}),vo(this,"handleTopDrop",function(i){var a=o.dropTargetIds;o.dropTargetIds=[],o.actions.hover(a,{clientOffset:sO(i)}),o.actions.drop({dropEffect:o.getCurrentDropEffect()}),o.isDraggingNativeItem()?o.endDragNativeItem():o.monitor.isDragging()&&o.actions.endDrag()}),vo(this,"handleSelectStart",function(i){var a=i.target;typeof a.dragDrop=="function"&&(a.tagName==="INPUT"||a.tagName==="SELECT"||a.tagName==="TEXTAREA"||a.isContentEditable||(i.preventDefault(),a.dragDrop()))}),this.options=new A9e(r,n),this.actions=t.getActions(),this.monitor=t.getMonitor(),this.registry=t.getRegistry(),this.enterLeaveCounter=new b9e(this.isNodeInDocument)}return vbr(e,[{key:"profile",value:function(){var r,n;return{sourcePreviewNodes:this.sourcePreviewNodes.size,sourcePreviewNodeOptions:this.sourcePreviewNodeOptions.size,sourceNodeOptions:this.sourceNodeOptions.size,sourceNodes:this.sourceNodes.size,dragStartSourceIds:((r=this.dragStartSourceIds)===null||r===void 0?void 0:r.length)||0,dropTargetIds:this.dropTargetIds.length,dragEnterTargetIds:this.dragEnterTargetIds.length,dragOverTargetIds:((n=this.dragOverTargetIds)===null||n===void 0?void 0:n.length)||0}}},{key:"window",get:function(){return this.options.window}},{key:"document",get:function(){return this.options.document}},{key:"rootElement",get:function(){return this.options.rootElement}},{key:"setup",value:function(){var r=this.rootElement;if(r!==void 0){if(r.__isReactDndBackendSetUp)throw new Error("Cannot have two HTML5 backends at the same time.");r.__isReactDndBackendSetUp=!0,this.addEventListeners(r)}}},{key:"teardown",value:function(){var r=this.rootElement;if(r!==void 0&&(r.__isReactDndBackendSetUp=!1,this.removeEventListeners(this.rootElement),this.clearCurrentDragSourceNode(),this.asyncEndDragFrameId)){var n;(n=this.window)===null||n===void 0||n.cancelAnimationFrame(this.asyncEndDragFrameId)}}},{key:"connectDragPreview",value:function(r,n,o){var i=this;return this.sourcePreviewNodeOptions.set(r,o),this.sourcePreviewNodes.set(r,n),function(){i.sourcePreviewNodes.delete(r),i.sourcePreviewNodeOptions.delete(r)}}},{key:"connectDragSource",value:function(r,n,o){var i=this;this.sourceNodes.set(r,n),this.sourceNodeOptions.set(r,o);var a=function(m){return i.handleDragStart(m,r)},c=function(m){return i.handleSelectStart(m)};return n.setAttribute("draggable","true"),n.addEventListener("dragstart",a),n.addEventListener("selectstart",c),function(){i.sourceNodes.delete(r),i.sourceNodeOptions.delete(r),n.removeEventListener("dragstart",a),n.removeEventListener("selectstart",c),n.setAttribute("draggable","false")}}},{key:"connectDropTarget",value:function(r,n){var o=this,i=function(m){return o.handleDragEnter(m,r)},a=function(m){return o.handleDragOver(m,r)},c=function(m){return o.handleDrop(m,r)};return n.addEventListener("dragenter",i),n.addEventListener("dragover",a),n.addEventListener("drop",c),function(){n.removeEventListener("dragenter",i),n.removeEventListener("dragover",a),n.removeEventListener("drop",c)}}},{key:"addEventListeners",value:function(r){r.addEventListener&&(r.addEventListener("dragstart",this.handleTopDragStart),r.addEventListener("dragstart",this.handleTopDragStartCapture,!0),r.addEventListener("dragend",this.handleTopDragEndCapture,!0),r.addEventListener("dragenter",this.handleTopDragEnter),r.addEventListener("dragenter",this.handleTopDragEnterCapture,!0),r.addEventListener("dragleave",this.handleTopDragLeaveCapture,!0),r.addEventListener("dragover",this.handleTopDragOver),r.addEventListener("dragover",this.handleTopDragOverCapture,!0),r.addEventListener("drop",this.handleTopDrop),r.addEventListener("drop",this.handleTopDropCapture,!0))}},{key:"removeEventListeners",value:function(r){r.removeEventListener&&(r.removeEventListener("dragstart",this.handleTopDragStart),r.removeEventListener("dragstart",this.handleTopDragStartCapture,!0),r.removeEventListener("dragend",this.handleTopDragEndCapture,!0),r.removeEventListener("dragenter",this.handleTopDragEnter),r.removeEventListener("dragenter",this.handleTopDragEnterCapture,!0),r.removeEventListener("dragleave",this.handleTopDragLeaveCapture,!0),r.removeEventListener("dragover",this.handleTopDragOver),r.removeEventListener("dragover",this.handleTopDragOverCapture,!0),r.removeEventListener("drop",this.handleTopDrop),r.removeEventListener("drop",this.handleTopDropCapture,!0))}},{key:"getCurrentSourceNodeOptions",value:function(){var r=this.monitor.getSourceId(),n=this.sourceNodeOptions.get(r);return P9e({dropEffect:this.altKeyPressed?"copy":"move"},n||{})}},{key:"getCurrentDropEffect",value:function(){return this.isDraggingNativeItem()?"copy":this.getCurrentSourceNodeOptions().dropEffect}},{key:"getCurrentSourcePreviewNodeOptions",value:function(){var r=this.monitor.getSourceId(),n=this.sourcePreviewNodeOptions.get(r);return P9e({anchorX:.5,anchorY:.5,captureDraggingState:!1},n||{})}},{key:"isDraggingNativeItem",value:function(){var r=this.monitor.getItemType();return Object.keys(Xy).some(function(n){return Xy[n]===r})}},{key:"beginDragNativeItem",value:function(r,n){this.clearCurrentDragSourceNode(),this.currentNativeSource=M9e(r,n),this.currentNativeHandle=this.registry.addSource(r,this.currentNativeSource),this.actions.beginDrag([this.currentNativeHandle])}},{key:"setCurrentDragSourceNode",value:function(r){var n=this;this.clearCurrentDragSourceNode(),this.currentDragSourceNode=r;var o=1e3;this.mouseMoveTimeoutTimer=setTimeout(function(){var i;return(i=n.rootElement)===null||i===void 0?void 0:i.addEventListener("mousemove",n.endDragIfSourceWasRemovedFromDOM,!0)},o)}},{key:"clearCurrentDragSourceNode",value:function(){if(this.currentDragSourceNode){if(this.currentDragSourceNode=null,this.rootElement){var r;(r=this.window)===null||r===void 0||r.clearTimeout(this.mouseMoveTimeoutTimer||void 0),this.rootElement.removeEventListener("mousemove",this.endDragIfSourceWasRemovedFromDOM,!0)}return this.mouseMoveTimeoutTimer=null,!0}return!1}},{key:"handleDragStart",value:function(r,n){r.defaultPrevented||(this.dragStartSourceIds||(this.dragStartSourceIds=[]),this.dragStartSourceIds.unshift(n))}},{key:"handleDragEnter",value:function(r,n){this.dragEnterTargetIds.unshift(n)}},{key:"handleDragOver",value:function(r,n){this.dragOverTargetIds===null&&(this.dragOverTargetIds=[]),this.dragOverTargetIds.unshift(n)}},{key:"handleDrop",value:function(r,n){this.dropTargetIds.unshift(n)}}]),e}();var L9e=function(t,r,n){return new N9e(t,r,n)};u();u();u();function k9e(e,t,...r){if(ybr()&&t===void 0)throw new Error("invariant requires an error message argument");if(!e){let n;if(t===void 0)n=new Error("Minified exception occurred; use the non-minified dev environment for the full error message and additional helpful warnings.");else{let o=0;n=new Error(t.replace(/%s/g,function(){return r[o++]})),n.name="Invariant Violation"}throw n.framesToPop=1,n}}function ybr(){return typeof _!="undefined"&&!0}u();var Dg;(function(e){e.mouse="mouse",e.touch="touch",e.keyboard="keyboard"})(Dg||(Dg={}));u();var _br={Left:1,Right:2,Center:4},bbr={Left:0,Center:1,Right:2};function x6(e){return e.button===void 0||e.button===bbr.Left}function R9e(e){return e.buttons===void 0||(e.buttons&_br.Left)===0}function w6(e){return!!e.targetTouches}u();var xbr=1;function j9e(e){let t=e.nodeType===xbr?e:e.parentElement;if(!t)return;let{top:r,left:n}=t.getBoundingClientRect();return{x:n,y:r}}function wbr(e,t){if(e.targetTouches.length===1)return lO(e.targetTouches[0]);if(t&&e.touches.length===1&&e.touches[0].target===t.target)return lO(e.touches[0])}function lO(e,t){return w6(e)?wbr(e,t):{x:e.clientX,y:e.clientY}}u();function q9e(e,t,r,n){return Math.sqrt(Math.pow(Math.abs(r-e),2)+Math.pow(Math.abs(n-t),2))}function z9e(e,t,r,n,o){if(!o)return!1;let i=Math.atan2(n-t,r-e)*180/Math.PI+180;for(let a=0;a<o.length;++a){let c=o[a];if(c&&(c.start==null||i>=c.start)&&(c.end==null||i<=c.end))return!0}return!1}u();var Wre=(()=>{let e=!1;try{addEventListener("test",()=>{},Object.defineProperty({},"passive",{get(){return e=!0,!0}}))}catch(t){}return e})();u();var E6=class{get delay(){var t;return(t=this.args.delay)!==null&&t!==void 0?t:0}get scrollAngleRanges(){return this.args.scrollAngleRanges}get getDropTargetElementsAtPoint(){return this.args.getDropTargetElementsAtPoint}get ignoreContextMenu(){var t;return(t=this.args.ignoreContextMenu)!==null&&t!==void 0?t:!1}get enableHoverOutsideTarget(){var t;return(t=this.args.enableHoverOutsideTarget)!==null&&t!==void 0?t:!1}get enableKeyboardEvents(){var t;return(t=this.args.enableKeyboardEvents)!==null&&t!==void 0?t:!1}get enableMouseEvents(){var t;return(t=this.args.enableMouseEvents)!==null&&t!==void 0?t:!1}get enableTouchEvents(){var t;return(t=this.args.enableTouchEvents)!==null&&t!==void 0?t:!0}get touchSlop(){return this.args.touchSlop||0}get delayTouchStart(){var t,r,n,o;return(o=(n=(t=this.args)===null||t===void 0?void 0:t.delayTouchStart)!==null&&n!==void 0?n:(r=this.args)===null||r===void 0?void 0:r.delay)!==null&&o!==void 0?o:0}get delayMouseStart(){var t,r,n,o;return(o=(n=(t=this.args)===null||t===void 0?void 0:t.delayMouseStart)!==null&&n!==void 0?n:(r=this.args)===null||r===void 0?void 0:r.delay)!==null&&o!==void 0?o:0}get window(){if(this.context&&this.context.window)return this.context.window;if(typeof window!="undefined")return window}get document(){var t;if(!((t=this.context)===null||t===void 0)&&t.document)return this.context.document;if(this.window)return this.window.document}get rootElement(){var t;return((t=this.args)===null||t===void 0?void 0:t.rootElement)||this.document}constructor(t,r){this.args=t,this.context=r}};var uO={[Dg.mouse]:{start:"mousedown",move:"mousemove",end:"mouseup",contextmenu:"contextmenu"},[Dg.touch]:{start:"touchstart",move:"touchmove",end:"touchend"},[Dg.keyboard]:{keydown:"keydown"}},S6=class e{profile(){var t;return{sourceNodes:this.sourceNodes.size,sourcePreviewNodes:this.sourcePreviewNodes.size,sourcePreviewNodeOptions:this.sourcePreviewNodeOptions.size,targetNodes:this.targetNodes.size,dragOverTargetIds:((t=this.dragOverTargetIds)===null||t===void 0?void 0:t.length)||0}}get document(){return this.options.document}setup(){let t=this.options.rootElement;t&&(k9e(!e.isSetUp,"Cannot have two Touch backends at the same time."),e.isSetUp=!0,this.addEventListener(t,"start",this.getTopMoveStartHandler()),this.addEventListener(t,"start",this.handleTopMoveStartCapture,!0),this.addEventListener(t,"move",this.handleTopMove),this.addEventListener(t,"move",this.handleTopMoveCapture,!0),this.addEventListener(t,"end",this.handleTopMoveEndCapture,!0),this.options.enableMouseEvents&&!this.options.ignoreContextMenu&&this.addEventListener(t,"contextmenu",this.handleTopMoveEndCapture),this.options.enableKeyboardEvents&&this.addEventListener(t,"keydown",this.handleCancelOnEscape,!0))}teardown(){let t=this.options.rootElement;t&&(e.isSetUp=!1,this._mouseClientOffset={},this.removeEventListener(t,"start",this.handleTopMoveStartCapture,!0),this.removeEventListener(t,"start",this.handleTopMoveStart),this.removeEventListener(t,"move",this.handleTopMoveCapture,!0),this.removeEventListener(t,"move",this.handleTopMove),this.removeEventListener(t,"end",this.handleTopMoveEndCapture,!0),this.options.enableMouseEvents&&!this.options.ignoreContextMenu&&this.removeEventListener(t,"contextmenu",this.handleTopMoveEndCapture),this.options.enableKeyboardEvents&&this.removeEventListener(t,"keydown",this.handleCancelOnEscape,!0),this.uninstallSourceNodeRemovalObserver())}addEventListener(t,r,n,o=!1){let i=Wre?{capture:o,passive:!1}:o;this.listenerTypes.forEach(function(a){let c=uO[a][r];c&&t.addEventListener(c,n,i)})}removeEventListener(t,r,n,o=!1){let i=Wre?{capture:o,passive:!1}:o;this.listenerTypes.forEach(function(a){let c=uO[a][r];c&&t.removeEventListener(c,n,i)})}connectDragSource(t,r){let n=this.handleMoveStart.bind(this,t);return this.sourceNodes.set(t,r),this.addEventListener(r,"start",n),()=>{this.sourceNodes.delete(t),this.removeEventListener(r,"start",n)}}connectDragPreview(t,r,n){return this.sourcePreviewNodeOptions.set(t,n),this.sourcePreviewNodes.set(t,r),()=>{this.sourcePreviewNodes.delete(t),this.sourcePreviewNodeOptions.delete(t)}}connectDropTarget(t,r){let n=this.options.rootElement;if(!this.document||!n)return()=>{};let o=i=>{if(!this.document||!n||!this.monitor.isDragging())return;let a;switch(i.type){case uO.mouse.move:a={x:i.clientX,y:i.clientY};break;case uO.touch.move:var c,h;a={x:((c=i.touches[0])===null||c===void 0?void 0:c.clientX)||0,y:((h=i.touches[0])===null||h===void 0?void 0:h.clientY)||0};break}let m=a!=null?this.document.elementFromPoint(a.x,a.y):void 0,y=m&&r.contains(m);if(m===r||y)return this.handleMove(i,t)};return this.addEventListener(this.document.body,"move",o),this.targetNodes.set(t,r),()=>{this.document&&(this.targetNodes.delete(t),this.removeEventListener(this.document.body,"move",o))}}getTopMoveStartHandler(){return!this.options.delayTouchStart&&!this.options.delayMouseStart?this.handleTopMoveStart:this.handleTopMoveStartDelay}installSourceNodeRemovalObserver(t){this.uninstallSourceNodeRemovalObserver(),this.draggedSourceNode=t,this.draggedSourceNodeRemovalObserver=new MutationObserver(()=>{t&&!t.parentElement&&(this.resurrectSourceNode(),this.uninstallSourceNodeRemovalObserver())}),!(!t||!t.parentElement)&&this.draggedSourceNodeRemovalObserver.observe(t.parentElement,{childList:!0})}resurrectSourceNode(){this.document&&this.draggedSourceNode&&(this.draggedSourceNode.style.display="none",this.draggedSourceNode.removeAttribute("data-reactid"),this.document.body.appendChild(this.draggedSourceNode))}uninstallSourceNodeRemovalObserver(){this.draggedSourceNodeRemovalObserver&&this.draggedSourceNodeRemovalObserver.disconnect(),this.draggedSourceNodeRemovalObserver=void 0,this.draggedSourceNode=void 0}constructor(t,r,n){this.getSourceClientOffset=o=>{let i=this.sourceNodes.get(o);return i&&j9e(i)},this.handleTopMoveStartCapture=o=>{x6(o)&&(this.moveStartSourceIds=[])},this.handleMoveStart=o=>{Array.isArray(this.moveStartSourceIds)&&this.moveStartSourceIds.unshift(o)},this.handleTopMoveStart=o=>{if(!x6(o))return;let i=lO(o);i&&(w6(o)&&(this.lastTargetTouchFallback=o.targetTouches[0]),this._mouseClientOffset=i),this.waitingForDelay=!1},this.handleTopMoveStartDelay=o=>{if(!x6(o))return;let i=o.type===uO.touch.start?this.options.delayTouchStart:this.options.delayMouseStart;this.timeout=setTimeout(this.handleTopMoveStart.bind(this,o),i),this.waitingForDelay=!0},this.handleTopMoveCapture=()=>{this.dragOverTargetIds=[]},this.handleMove=(o,i)=>{this.dragOverTargetIds&&this.dragOverTargetIds.unshift(i)},this.handleTopMove=o=>{if(this.timeout&&clearTimeout(this.timeout),!this.document||this.waitingForDelay)return;let{moveStartSourceIds:i,dragOverTargetIds:a}=this,c=this.options.enableHoverOutsideTarget,h=lO(o,this.lastTargetTouchFallback);if(!h)return;if(this._isScrolling||!this.monitor.isDragging()&&z9e(this._mouseClientOffset.x||0,this._mouseClientOffset.y||0,h.x,h.y,this.options.scrollAngleRanges)){this._isScrolling=!0;return}if(!this.monitor.isDragging()&&this._mouseClientOffset.hasOwnProperty("x")&&i&&q9e(this._mouseClientOffset.x||0,this._mouseClientOffset.y||0,h.x,h.y)>(this.options.touchSlop?this.options.touchSlop:0)&&(this.moveStartSourceIds=void 0,this.actions.beginDrag(i,{clientOffset:this._mouseClientOffset,getSourceClientOffset:this.getSourceClientOffset,publishSource:!1})),!this.monitor.isDragging())return;let m=this.sourceNodes.get(this.monitor.getSourceId());this.installSourceNodeRemovalObserver(m),this.actions.publishDragSource(),o.cancelable&&o.preventDefault();let y=(a||[]).map(P=>this.targetNodes.get(P)).filter(P=>!!P),w=this.options.getDropTargetElementsAtPoint?this.options.getDropTargetElementsAtPoint(h.x,h.y,y):this.document.elementsFromPoint(h.x,h.y),E=[];for(let P in w){if(!w.hasOwnProperty(P))continue;let j=w[P];for(j!=null&&E.push(j);j;)j=j.parentElement,j&&E.indexOf(j)===-1&&E.push(j)}let A=E.filter(P=>y.indexOf(P)>-1).map(P=>this._getDropTargetId(P)).filter(P=>!!P).filter((P,j,D)=>D.indexOf(P)===j);if(c)for(let P in this.targetNodes){let j=this.targetNodes.get(P);if(m&&j&&j.contains(m)&&A.indexOf(P)===-1){A.unshift(P);break}}A.reverse(),this.actions.hover(A,{clientOffset:h})},this._getDropTargetId=o=>{let i=this.targetNodes.keys(),a=i.next();for(;a.done===!1;){let c=a.value;if(o===this.targetNodes.get(c))return c;a=i.next()}},this.handleTopMoveEndCapture=o=>{if(this._isScrolling=!1,this.lastTargetTouchFallback=void 0,!!R9e(o)){if(!this.monitor.isDragging()||this.monitor.didDrop()){this.moveStartSourceIds=void 0;return}o.cancelable&&o.preventDefault(),this._mouseClientOffset={},this.uninstallSourceNodeRemovalObserver(),this.actions.drop(),this.actions.endDrag()}},this.handleCancelOnEscape=o=>{o.key==="Escape"&&this.monitor.isDragging()&&(this._mouseClientOffset={},this.uninstallSourceNodeRemovalObserver(),this.actions.endDrag())},this.options=new E6(n,r),this.actions=t.getActions(),this.monitor=t.getMonitor(),this.sourceNodes=new Map,this.sourcePreviewNodes=new Map,this.sourcePreviewNodeOptions=new Map,this.targetNodes=new Map,this.listenerTypes=[],this._mouseClientOffset={},this._isScrolling=!1,this.options.enableMouseEvents&&this.listenerTypes.push(Dg.mouse),this.options.enableTouchEvents&&this.listenerTypes.push(Dg.touch),this.options.enableKeyboardEvents&&this.listenerTypes.push(Dg.keyboard)}};var F9e=function(t,r={},n={}){return new S6(t,r,n)};u();u();u();u();function Yre(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function Ebr(e,t,r){Sbr(e,t),t.set(e,r)}function Sbr(e,t){if(t.has(e))throw new TypeError("Cannot initialize the same private elements twice on an object")}function T6(e,t){var r=U9e(e,t,"get");return Tbr(e,r)}function Tbr(e,t){return t.get?t.get.call(e):t.value}function Ibr(e,t,r){var n=U9e(e,t,"set");return Mbr(e,n,r),r}function U9e(e,t,r){if(!t.has(e))throw new TypeError("attempted to "+r+" private field on non-instance");return t.get(e)}function Mbr(e,t,r){if(t.set)t.set.call(e,r);else{if(!t.writable)throw new TypeError("attempted to set read only private field");t.value=r}}var iS=new WeakMap,I6=class{constructor(){Ebr(this,iS,{writable:!0,value:void 0}),Yre(this,"register",t=>{T6(this,iS).push(t)}),Yre(this,"unregister",t=>{let r;for(;(r=T6(this,iS).indexOf(t))!==-1;)T6(this,iS).splice(r,1)}),Yre(this,"backendChanged",t=>{for(let r of T6(this,iS))r.backendChanged(t)}),Ibr(this,iS,[])}};function Id(e,t,r){Cbr(e,t),t.set(e,r)}function Cbr(e,t){if(t.has(e))throw new TypeError("Cannot initialize the same private elements twice on an object")}function Vh(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function Qn(e,t){var r=H9e(e,t,"get");return Abr(e,r)}function Abr(e,t){return t.get?t.get.call(e):t.value}function aS(e,t,r){var n=H9e(e,t,"set");return Obr(e,n,r),r}function H9e(e,t,r){if(!t.has(e))throw new TypeError("attempted to "+r+" private field on non-instance");return t.get(e)}function Obr(e,t,r){if(t.set)t.set.call(e,r);else{if(!t.writable)throw new TypeError("attempted to set read only private field");t.value=r}}var cf=new WeakMap,M6=new WeakMap,pf=new WeakMap,Jy=new WeakMap,B_=new WeakMap,B9e=new WeakMap,V9e=new WeakMap,G9e=new WeakMap,Zre=new WeakMap,Kre=new WeakMap,C6=new WeakMap,cO=class e{constructor(t,r,n){if(Id(this,cf,{writable:!0,value:void 0}),Id(this,M6,{writable:!0,value:void 0}),Id(this,pf,{writable:!0,value:void 0}),Id(this,Jy,{writable:!0,value:void 0}),Id(this,B_,{writable:!0,value:void 0}),Id(this,B9e,{writable:!0,value:(o,i,a)=>{var c,h;if(!a.backend)throw new Error("You must specify a 'backend' property in your Backend entry: ".concat(JSON.stringify(a)));let m=a.backend(o,i,a.options),y=a.id,w=!a.id&&m&&m.constructor;if(w&&(y=m.constructor.name),y)w&&console.warn(`Deprecation notice: You are using a pipeline which doesn't include backends' 'id'.
        This might be unsupported in the future, please specify 'id' explicitely for every backend.`);else throw new Error("You must specify an 'id' property in your Backend entry: ".concat(JSON.stringify(a),`
        see this guide: https://github.com/louisbrunner/dnd-multi-backend/tree/master/packages/react-dnd-multi-backend#migrating-from-5xx`));if(Qn(this,pf)[y])throw new Error(`You must specify a unique 'id' property in your Backend entry:
        `.concat(JSON.stringify(a)," (conflicts with: ").concat(JSON.stringify(Qn(this,pf)[y]),")"));return{id:y,instance:m,preview:(c=a.preview)!==null&&c!==void 0?c:!1,transition:a.transition,skipDispatchOnTransition:(h=a.skipDispatchOnTransition)!==null&&h!==void 0?h:!1}}}),Vh(this,"setup",()=>{if(typeof window!="undefined"){if(e.isSetUp)throw new Error("Cannot have two MultiBackends at the same time.");e.isSetUp=!0,Qn(this,V9e).call(this,window),Qn(this,pf)[Qn(this,cf)].instance.setup()}}),Vh(this,"teardown",()=>{typeof window!="undefined"&&(e.isSetUp=!1,Qn(this,G9e).call(this,window),Qn(this,pf)[Qn(this,cf)].instance.teardown())}),Vh(this,"connectDragSource",(o,i,a)=>Qn(this,C6).call(this,"connectDragSource",o,i,a)),Vh(this,"connectDragPreview",(o,i,a)=>Qn(this,C6).call(this,"connectDragPreview",o,i,a)),Vh(this,"connectDropTarget",(o,i,a)=>Qn(this,C6).call(this,"connectDropTarget",o,i,a)),Vh(this,"profile",()=>Qn(this,pf)[Qn(this,cf)].instance.profile()),Vh(this,"previewEnabled",()=>Qn(this,pf)[Qn(this,cf)].preview),Vh(this,"previewsList",()=>Qn(this,M6)),Vh(this,"backendsList",()=>Qn(this,Jy)),Id(this,V9e,{writable:!0,value:o=>{Qn(this,Jy).forEach(i=>{i.transition&&o.addEventListener(i.transition.event,Qn(this,Zre))})}}),Id(this,G9e,{writable:!0,value:o=>{Qn(this,Jy).forEach(i=>{i.transition&&o.removeEventListener(i.transition.event,Qn(this,Zre))})}}),Id(this,Zre,{writable:!0,value:o=>{let i=Qn(this,cf);if(Qn(this,Jy).some(c=>c.id!==Qn(this,cf)&&c.transition&&c.transition.check(o)?(aS(this,cf,c.id),!0):!1),Qn(this,cf)!==i){var a;Qn(this,pf)[i].instance.teardown(),Object.keys(Qn(this,B_)).forEach(y=>{let w=Qn(this,B_)[y];w.unsubscribe(),w.unsubscribe=Qn(this,Kre).call(this,w.func,...w.args)}),Qn(this,M6).backendChanged(this);let c=Qn(this,pf)[Qn(this,cf)];if(c.instance.setup(),c.skipDispatchOnTransition)return;let h=o.constructor,m=new h(o.type,o);(a=o.target)===null||a===void 0||a.dispatchEvent(m)}}}),Id(this,Kre,{writable:!0,value:(o,i,a,c)=>Qn(this,pf)[Qn(this,cf)].instance[o](i,a,c)}),Id(this,C6,{writable:!0,value:(o,i,a,c)=>{let h="".concat(o,"_").concat(i),m=Qn(this,Kre).call(this,o,i,a,c);return Qn(this,B_)[h]={func:o,args:[i,a,c],unsubscribe:m},()=>{Qn(this,B_)[h].unsubscribe(),delete Qn(this,B_)[h]}}}),!n||!n.backends||n.backends.length<1)throw new Error(`You must specify at least one Backend, if you are coming from 2.x.x (or don't understand this error)
        see this guide: https://github.com/louisbrunner/dnd-multi-backend/tree/master/packages/react-dnd-multi-backend#migrating-from-2xx`);aS(this,M6,new I6),aS(this,pf,{}),aS(this,Jy,[]),n.backends.forEach(o=>{let i=Qn(this,B9e).call(this,t,r,o);Qn(this,pf)[i.id]=i,Qn(this,Jy).push(i)}),aS(this,cf,Qn(this,Jy)[0].id),aS(this,B_,{})}};Vh(cO,"isSetUp",!1);var Xre=(e,t,r)=>new cO(e,t,r);u();var pO=(e,t)=>({event:e,check:t});u();var Jre=pO("touchstart",e=>{let t=e;return t.touches!==null&&t.touches!==void 0}),Pbr=pO("dragstart",e=>e.type.indexOf("drag")!==-1||e.type.indexOf("drop")!==-1),Dbr=pO("mousedown",e=>e.type.indexOf("touch")===-1&&e.type.indexOf("mouse")!==-1),Qre=pO("pointerdown",e=>e.pointerType=="mouse");var ene={backends:[{id:"html5",backend:L9e,transition:Qre},{id:"touch",backend:F9e,options:{enableMouseEvents:!0},preview:!0,transition:Jre}]};u();u();var n0=ee(ke());u();var $9e=ee(ke()),A6=(0,$9e.createContext)({dragDropManager:void 0});u();var nBe=ee(X9e()),F6=ee(ke());u();var vp;(function(e){e.SOURCE="SOURCE",e.TARGET="TARGET"})(vp||(vp={}));u();u();u();u();u();function en(e,t){for(var r=arguments.length,n=new Array(r>2?r-2:0),o=2;o<r;o++)n[o-2]=arguments[o];if(!e){var i;if(t===void 0)i=new Error("Minified exception occurred; use the non-minified dev environment for the full error message and additional helpful warnings.");else{var a=0;i=new Error(t.replace(/%s/g,function(){return n[a++]})),i.name="Invariant Violation"}throw i.framesToPop=1,i}}u();u();var sS="dnd-core/INIT_COORDS",Qy="dnd-core/BEGIN_DRAG",lS="dnd-core/PUBLISH_DRAG_SOURCE",e0="dnd-core/HOVER",t0="dnd-core/DROP",r0="dnd-core/END_DRAG";function rne(e,t){return{type:sS,payload:{sourceClientOffset:t||null,clientOffset:e||null}}}u();function O6(e){"@babel/helpers - typeof";return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?O6=function(r){return typeof r}:O6=function(r){return r&&typeof Symbol=="function"&&r.constructor===Symbol&&r!==Symbol.prototype?"symbol":typeof r},O6(e)}function J9e(e,t,r){return t.split(".").reduce(function(n,o){return n&&n[o]?n[o]:r||null},e)}function Q9e(e,t){return e.filter(function(r){return r!==t})}function P6(e){return O6(e)==="object"}function eUe(e,t){var r=new Map,n=function(a){r.set(a,r.has(a)?r.get(a)+1:1)};e.forEach(n),t.forEach(n);var o=[];return r.forEach(function(i,a){i===1&&o.push(a)}),o}function tUe(e,t){return e.filter(function(r){return t.indexOf(r)>-1})}var jbr={type:sS,payload:{clientOffset:null,sourceClientOffset:null}};function rUe(e){return function(){var r=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[],n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{publishSource:!0},o=n.publishSource,i=o===void 0?!0:o,a=n.clientOffset,c=n.getSourceClientOffset,h=e.getMonitor(),m=e.getRegistry();e.dispatch(rne(a)),qbr(r,h,m);var y=Ubr(r,h);if(y===null){e.dispatch(jbr);return}var w=null;if(a){if(!c)throw new Error("getSourceClientOffset must be defined");zbr(c),w=c(y)}e.dispatch(rne(a,w));var E=m.getSource(y),A=E.beginDrag(h,y);if(A!=null){Fbr(A),m.pinSource(y);var P=m.getSourceType(y);return{type:Qy,payload:{itemType:P,item:A,sourceId:y,clientOffset:a||null,sourceClientOffset:w||null,isSourcePublic:!!i}}}}}function qbr(e,t,r){en(!t.isDragging(),"Cannot call beginDrag while dragging."),e.forEach(function(n){en(r.getSource(n),"Expected sourceIds to be registered.")})}function zbr(e){en(typeof e=="function","When clientOffset is provided, getSourceClientOffset must be a function.")}function Fbr(e){en(P6(e),"Item must be an object.")}function Ubr(e,t){for(var r=null,n=e.length-1;n>=0;n--)if(t.canDragSource(e[n])){r=e[n];break}return r}u();function nUe(e){return function(){var r=e.getMonitor();if(r.isDragging())return{type:lS}}}u();u();function dO(e,t){return t===null?e===null:Array.isArray(e)?e.some(function(r){return r===t}):e===t}function oUe(e){return function(r){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},o=n.clientOffset;Bbr(r);var i=r.slice(0),a=e.getMonitor(),c=e.getRegistry();Vbr(i,a,c);var h=a.getItemType();return Gbr(i,c,h),Hbr(i,a,c),{type:e0,payload:{targetIds:i,clientOffset:o||null}}}}function Bbr(e){en(Array.isArray(e),"Expected targetIds to be an array.")}function Vbr(e,t,r){en(t.isDragging(),"Cannot call hover while not dragging."),en(!t.didDrop(),"Cannot call hover after drop.");for(var n=0;n<e.length;n++){var o=e[n];en(e.lastIndexOf(o)===n,"Expected targetIds to be unique in the passed array.");var i=r.getTarget(o);en(i,"Expected targetIds to be registered.")}}function Gbr(e,t,r){for(var n=e.length-1;n>=0;n--){var o=e[n],i=t.getTargetType(o);dO(i,r)||e.splice(n,1)}}function Hbr(e,t,r){e.forEach(function(n){var o=r.getTarget(n);o.hover(t,n)})}u();function iUe(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(o){return Object.getOwnPropertyDescriptor(e,o).enumerable})),r.push.apply(r,n)}return r}function aUe(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?iUe(Object(r),!0).forEach(function(n){$br(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):iUe(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function $br(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function sUe(e){return function(){var r=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},n=e.getMonitor(),o=e.getRegistry();Wbr(n);var i=Kbr(n);i.forEach(function(a,c){var h=Ybr(a,c,o,n),m={type:t0,payload:{dropResult:aUe(aUe({},r),h)}};e.dispatch(m)})}}function Wbr(e){en(e.isDragging(),"Cannot call drop while not dragging."),en(!e.didDrop(),"Cannot call drop twice during one drag operation.")}function Ybr(e,t,r,n){var o=r.getTarget(e),i=o?o.drop(n,e):void 0;return Zbr(i),typeof i=="undefined"&&(i=t===0?{}:n.getDropResult()),i}function Zbr(e){en(typeof e=="undefined"||P6(e),"Drop result must either be an object or undefined.")}function Kbr(e){var t=e.getTargetIds().filter(e.canDropOnTarget,e);return t.reverse(),t}u();function lUe(e){return function(){var r=e.getMonitor(),n=e.getRegistry();Xbr(r);var o=r.getSourceId();if(o!=null){var i=n.getSource(o,!0);i.endDrag(r,o),n.unpinSource()}return{type:r0}}}function Xbr(e){en(e.isDragging(),"Cannot call endDrag while not dragging.")}function uUe(e){return{beginDrag:rUe(e),publishDragSource:nUe(e),hover:oUe(e),drop:sUe(e),endDrag:lUe(e)}}function Jbr(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function cUe(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function Qbr(e,t,r){return t&&cUe(e.prototype,t),r&&cUe(e,r),e}function hO(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var pUe=function(){function e(t,r){var n=this;Jbr(this,e),hO(this,"store",void 0),hO(this,"monitor",void 0),hO(this,"backend",void 0),hO(this,"isSetUp",!1),hO(this,"handleRefCountChange",function(){var o=n.store.getState().refCount>0;n.backend&&(o&&!n.isSetUp?(n.backend.setup(),n.isSetUp=!0):!o&&n.isSetUp&&(n.backend.teardown(),n.isSetUp=!1))}),this.store=t,this.monitor=r,t.subscribe(this.handleRefCountChange)}return Qbr(e,[{key:"receiveBackend",value:function(r){this.backend=r}},{key:"getMonitor",value:function(){return this.monitor}},{key:"getBackend",value:function(){return this.backend}},{key:"getRegistry",value:function(){return this.monitor.registry}},{key:"getActions",value:function(){var r=this,n=this.store.dispatch;function o(a){return function(){for(var c=arguments.length,h=new Array(c),m=0;m<c;m++)h[m]=arguments[m];var y=a.apply(r,h);typeof y!="undefined"&&n(y)}}var i=uUe(this);return Object.keys(i).reduce(function(a,c){var h=i[c];return a[c]=o(h),a},{})}},{key:"dispatch",value:function(r){this.store.dispatch(r)}}]),e}();u();u();u();u();u();function No(e){"@babel/helpers - typeof";return No=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},No(e)}u();function fUe(e,t){if(No(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t||"default");if(No(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function D6(e){var t=fUe(e,"string");return No(t)=="symbol"?t:t+""}function Zt(e,t,r){return(t=D6(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function dUe(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(o){return Object.getOwnPropertyDescriptor(e,o).enumerable})),r.push.apply(r,n)}return r}function nr(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?dUe(Object(r),!0).forEach(function(n){Zt(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):dUe(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function ff(e){return"Minified Redux error #"+e+"; visit https://redux.js.org/Errors?code="+e+" for the full message or use the non-minified dev environment for full errors. "}var hUe=function(){return typeof Symbol=="function"&&Symbol.observable||"@@observable"}(),nne=function(){return Math.random().toString(36).substring(7).split("").join(".")},mUe={INIT:"@@redux/INIT"+nne(),REPLACE:"@@redux/REPLACE"+nne(),PROBE_UNKNOWN_ACTION:function(){return"@@redux/PROBE_UNKNOWN_ACTION"+nne()}};function exr(e){if(typeof e!="object"||e===null)return!1;for(var t=e;Object.getPrototypeOf(t)!==null;)t=Object.getPrototypeOf(t);return Object.getPrototypeOf(e)===t}function one(e,t,r){var n;if(typeof t=="function"&&typeof r=="function"||typeof r=="function"&&typeof arguments[3]=="function")throw new Error(ff(0));if(typeof t=="function"&&typeof r=="undefined"&&(r=t,t=void 0),typeof r!="undefined"){if(typeof r!="function")throw new Error(ff(1));return r(one)(e,t)}if(typeof e!="function")throw new Error(ff(2));var o=e,i=t,a=[],c=a,h=!1;function m(){c===a&&(c=a.slice())}function y(){if(h)throw new Error(ff(3));return i}function w(j){if(typeof j!="function")throw new Error(ff(4));if(h)throw new Error(ff(5));var D=!0;return m(),c.push(j),function(){if(D){if(h)throw new Error(ff(6));D=!1,m();var z=c.indexOf(j);c.splice(z,1),a=null}}}function E(j){if(!exr(j))throw new Error(ff(7));if(typeof j.type=="undefined")throw new Error(ff(8));if(h)throw new Error(ff(9));try{h=!0,i=o(i,j)}finally{h=!1}for(var D=a=c,L=0;L<D.length;L++){var z=D[L];z()}return j}function A(j){if(typeof j!="function")throw new Error(ff(10));o=j,E({type:mUe.REPLACE})}function P(){var j,D=w;return j={subscribe:function(z){if(typeof z!="object"||z===null)throw new Error(ff(11));function B(){z.next&&z.next(y())}B();var G=D(B);return{unsubscribe:G}}},j[hUe]=function(){return this},j}return E({type:mUe.INIT}),n={dispatch:E,subscribe:w,getState:y,replaceReducer:A},n[hUe]=P,n}u();u();u();var txr=function(t,r){return t===r};function gUe(e,t){return!e&&!t?!0:!e||!t?!1:e.x===t.x&&e.y===t.y}function vUe(e,t){var r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:txr;if(e.length!==t.length)return!1;for(var n=0;n<e.length;++n)if(!r(e[n],t[n]))return!1;return!0}function yUe(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(o){return Object.getOwnPropertyDescriptor(e,o).enumerable})),r.push.apply(r,n)}return r}function _Ue(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?yUe(Object(r),!0).forEach(function(n){rxr(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):yUe(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function rxr(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var bUe={initialSourceClientOffset:null,initialClientOffset:null,clientOffset:null};function xUe(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:bUe,t=arguments.length>1?arguments[1]:void 0,r=t.payload;switch(t.type){case sS:case Qy:return{initialSourceClientOffset:r.sourceClientOffset,initialClientOffset:r.clientOffset,clientOffset:r.clientOffset};case e0:return gUe(e.clientOffset,r.clientOffset)?e:_Ue(_Ue({},e),{},{clientOffset:r.clientOffset});case r0:case t0:return bUe;default:return e}}u();u();var mO="dnd-core/ADD_SOURCE",gO="dnd-core/ADD_TARGET",vO="dnd-core/REMOVE_SOURCE",V_="dnd-core/REMOVE_TARGET";function wUe(e){return{type:mO,payload:{sourceId:e}}}function EUe(e){return{type:gO,payload:{targetId:e}}}function SUe(e){return{type:vO,payload:{sourceId:e}}}function TUe(e){return{type:V_,payload:{targetId:e}}}function IUe(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(o){return Object.getOwnPropertyDescriptor(e,o).enumerable})),r.push.apply(r,n)}return r}function df(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?IUe(Object(r),!0).forEach(function(n){nxr(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):IUe(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function nxr(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var oxr={itemType:null,item:null,sourceId:null,targetIds:[],dropResult:null,didDrop:!1,isSourcePublic:null};function MUe(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:oxr,t=arguments.length>1?arguments[1]:void 0,r=t.payload;switch(t.type){case Qy:return df(df({},e),{},{itemType:r.itemType,item:r.item,sourceId:r.sourceId,isSourcePublic:r.isSourcePublic,dropResult:null,didDrop:!1});case lS:return df(df({},e),{},{isSourcePublic:!0});case e0:return df(df({},e),{},{targetIds:r.targetIds});case V_:return e.targetIds.indexOf(r.targetId)===-1?e:df(df({},e),{},{targetIds:Q9e(e.targetIds,r.targetId)});case t0:return df(df({},e),{},{dropResult:r.dropResult,didDrop:!0,targetIds:[]});case r0:return df(df({},e),{},{itemType:null,item:null,sourceId:null,dropResult:null,didDrop:!1,isSourcePublic:null,targetIds:[]});default:return e}}u();function CUe(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:0,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case mO:case gO:return e+1;case vO:case V_:return e-1;default:return e}}u();u();var uS=[],N6=[];uS.__IS_NONE__=!0;N6.__IS_ALL__=!0;function AUe(e,t){if(e===uS)return!1;if(e===N6||typeof t=="undefined")return!0;var r=tUe(t,e);return r.length>0}function OUe(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:uS,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case e0:break;case mO:case gO:case V_:case vO:return uS;case Qy:case lS:case r0:case t0:default:return N6}var r=t.payload,n=r.targetIds,o=n===void 0?[]:n,i=r.prevTargetIds,a=i===void 0?[]:i,c=eUe(o,a),h=c.length>0||!vUe(o,a);if(!h)return uS;var m=a[a.length-1],y=o[o.length-1];return m!==y&&(m&&c.push(m),y&&c.push(y)),c}u();function PUe(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:0;return e+1}function DUe(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(o){return Object.getOwnPropertyDescriptor(e,o).enumerable})),r.push.apply(r,n)}return r}function NUe(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?DUe(Object(r),!0).forEach(function(n){ixr(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):DUe(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function ixr(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function LUe(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0;return{dirtyHandlerIds:OUe(e.dirtyHandlerIds,{type:t.type,payload:NUe(NUe({},t.payload),{},{prevTargetIds:J9e(e,"dragOperation.targetIds",[])})}),dragOffset:xUe(e.dragOffset,t),refCount:CUe(e.refCount,t),dragOperation:MUe(e.dragOperation,t),stateId:PUe(e.stateId)}}u();u();function axr(e,t){return{x:e.x+t.x,y:e.y+t.y}}function kUe(e,t){return{x:e.x-t.x,y:e.y-t.y}}function RUe(e){var t=e.clientOffset,r=e.initialClientOffset,n=e.initialSourceClientOffset;return!t||!r||!n?null:kUe(axr(t,n),r)}function jUe(e){var t=e.clientOffset,r=e.initialClientOffset;return!t||!r?null:kUe(t,r)}function sxr(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function qUe(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function lxr(e,t,r){return t&&qUe(e.prototype,t),r&&qUe(e,r),e}function zUe(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var FUe=function(){function e(t,r){sxr(this,e),zUe(this,"store",void 0),zUe(this,"registry",void 0),this.store=t,this.registry=r}return lxr(e,[{key:"subscribeToStateChange",value:function(r){var n=this,o=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{handlerIds:void 0},i=o.handlerIds;en(typeof r=="function","listener must be a function."),en(typeof i=="undefined"||Array.isArray(i),"handlerIds, when specified, must be an array of strings.");var a=this.store.getState().stateId,c=function(){var m=n.store.getState(),y=m.stateId;try{var w=y===a||y===a+1&&!AUe(m.dirtyHandlerIds,i);w||r()}finally{a=y}};return this.store.subscribe(c)}},{key:"subscribeToOffsetChange",value:function(r){var n=this;en(typeof r=="function","listener must be a function.");var o=this.store.getState().dragOffset,i=function(){var c=n.store.getState().dragOffset;c!==o&&(o=c,r())};return this.store.subscribe(i)}},{key:"canDragSource",value:function(r){if(!r)return!1;var n=this.registry.getSource(r);return en(n,"Expected to find a valid source. sourceId=".concat(r)),this.isDragging()?!1:n.canDrag(this,r)}},{key:"canDropOnTarget",value:function(r){if(!r)return!1;var n=this.registry.getTarget(r);if(en(n,"Expected to find a valid target. targetId=".concat(r)),!this.isDragging()||this.didDrop())return!1;var o=this.registry.getTargetType(r),i=this.getItemType();return dO(o,i)&&n.canDrop(this,r)}},{key:"isDragging",value:function(){return!!this.getItemType()}},{key:"isDraggingSource",value:function(r){if(!r)return!1;var n=this.registry.getSource(r,!0);if(en(n,"Expected to find a valid source. sourceId=".concat(r)),!this.isDragging()||!this.isSourcePublic())return!1;var o=this.registry.getSourceType(r),i=this.getItemType();return o!==i?!1:n.isDragging(this,r)}},{key:"isOverTarget",value:function(r){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{shallow:!1};if(!r)return!1;var o=n.shallow;if(!this.isDragging())return!1;var i=this.registry.getTargetType(r),a=this.getItemType();if(a&&!dO(i,a))return!1;var c=this.getTargetIds();if(!c.length)return!1;var h=c.indexOf(r);return o?h===c.length-1:h>-1}},{key:"getItemType",value:function(){return this.store.getState().dragOperation.itemType}},{key:"getItem",value:function(){return this.store.getState().dragOperation.item}},{key:"getSourceId",value:function(){return this.store.getState().dragOperation.sourceId}},{key:"getTargetIds",value:function(){return this.store.getState().dragOperation.targetIds}},{key:"getDropResult",value:function(){return this.store.getState().dragOperation.dropResult}},{key:"didDrop",value:function(){return this.store.getState().dragOperation.didDrop}},{key:"isSourcePublic",value:function(){return!!this.store.getState().dragOperation.isSourcePublic}},{key:"getInitialClientOffset",value:function(){return this.store.getState().dragOffset.initialClientOffset}},{key:"getInitialSourceClientOffset",value:function(){return this.store.getState().dragOffset.initialSourceClientOffset}},{key:"getClientOffset",value:function(){return this.store.getState().dragOffset.clientOffset}},{key:"getSourceClientOffset",value:function(){return RUe(this.store.getState().dragOffset)}},{key:"getDifferenceFromInitialOffset",value:function(){return jUe(this.store.getState().dragOffset)}}]),e}();u();u();var uxr=0;function UUe(){return uxr++}u();function L6(e){"@babel/helpers - typeof";return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?L6=function(r){return typeof r}:L6=function(r){return r&&typeof Symbol=="function"&&r.constructor===Symbol&&r!==Symbol.prototype?"symbol":typeof r},L6(e)}function BUe(e){en(typeof e.canDrag=="function","Expected canDrag to be a function."),en(typeof e.beginDrag=="function","Expected beginDrag to be a function."),en(typeof e.endDrag=="function","Expected endDrag to be a function.")}function VUe(e){en(typeof e.canDrop=="function","Expected canDrop to be a function."),en(typeof e.hover=="function","Expected hover to be a function."),en(typeof e.drop=="function","Expected beginDrag to be a function.")}function k6(e,t){if(t&&Array.isArray(e)){e.forEach(function(r){return k6(r,!1)});return}en(typeof e=="string"||L6(e)==="symbol",t?"Type can only be a string, a symbol, or an array of either.":"Type can only be a string or a symbol.")}u();u();u();u();var GUe=typeof global!="undefined"?global:self,HUe=GUe.MutationObserver||GUe.WebKitMutationObserver;function ine(e){return function(){let r=setTimeout(o,0),n=setInterval(o,50);function o(){clearTimeout(r),clearInterval(n),e()}}}function cxr(e){let t=1,r=new HUe(e),n=document.createTextNode("");return r.observe(n,{characterData:!0}),function(){t=-t,n.data=t}}var $Ue=typeof HUe=="function"?cxr:ine;var R6=class{enqueueTask(t){let{queue:r,requestFlush:n}=this;r.length||(n(),this.flushing=!0),r[r.length]=t}constructor(){this.queue=[],this.pendingErrors=[],this.flushing=!1,this.index=0,this.capacity=1024,this.flush=()=>{let{queue:t}=this;for(;this.index<t.length;){let r=this.index;if(this.index++,t[r].call(),this.index>this.capacity){for(let n=0,o=t.length-this.index;n<o;n++)t[n]=t[n+this.index];t.length-=this.index,this.index=0}}t.length=0,this.index=0,this.flushing=!1},this.registerPendingError=t=>{this.pendingErrors.push(t),this.requestErrorThrow()},this.requestFlush=$Ue(this.flush),this.requestErrorThrow=ine(()=>{if(this.pendingErrors.length)throw this.pendingErrors.shift()})}};u();u();var j6=class{call(){try{this.task&&this.task()}catch(t){this.onError(t)}finally{this.task=null,this.release(this)}}constructor(t,r){this.onError=t,this.release=r,this.task=null}};var q6=class{create(t){let r=this.freeTasks,n=r.length?r.pop():new j6(this.onError,o=>r[r.length]=o);return n.task=t,n}constructor(t){this.onError=t,this.freeTasks=[]}};var WUe=new R6,pxr=new q6(WUe.registerPendingError);function YUe(e){WUe.enqueueTask(pxr.create(e))}u();function fxr(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function ZUe(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function dxr(e,t,r){return t&&ZUe(e.prototype,t),r&&ZUe(e,r),e}function cS(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function hxr(e,t){return yxr(e)||vxr(e,t)||gxr(e,t)||mxr()}function mxr(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function gxr(e,t){if(e){if(typeof e=="string")return KUe(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if(r==="Object"&&e.constructor&&(r=e.constructor.name),r==="Map"||r==="Set")return Array.from(e);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return KUe(e,t)}}function KUe(e,t){(t==null||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function vxr(e,t){var r=e==null?null:typeof Symbol!="undefined"&&e[Symbol.iterator]||e["@@iterator"];if(r!=null){var n=[],o=!0,i=!1,a,c;try{for(r=r.call(e);!(o=(a=r.next()).done)&&(n.push(a.value),!(t&&n.length===t));o=!0);}catch(h){i=!0,c=h}finally{try{!o&&r.return!=null&&r.return()}finally{if(i)throw c}}return n}}function yxr(e){if(Array.isArray(e))return e}function _xr(e){var t=UUe().toString();switch(e){case vp.SOURCE:return"S".concat(t);case vp.TARGET:return"T".concat(t);default:throw new Error("Unknown Handler Role: ".concat(e))}}function XUe(e){switch(e[0]){case"S":return vp.SOURCE;case"T":return vp.TARGET;default:en(!1,"Cannot parse handler ID: ".concat(e))}}function JUe(e,t){var r=e.entries(),n=!1;do{var o=r.next(),i=o.done,a=hxr(o.value,2),c=a[1];if(c===t)return!0;n=!!i}while(!n);return!1}var QUe=function(){function e(t){fxr(this,e),cS(this,"types",new Map),cS(this,"dragSources",new Map),cS(this,"dropTargets",new Map),cS(this,"pinnedSourceId",null),cS(this,"pinnedSource",null),cS(this,"store",void 0),this.store=t}return dxr(e,[{key:"addSource",value:function(r,n){k6(r),BUe(n);var o=this.addHandler(vp.SOURCE,r,n);return this.store.dispatch(wUe(o)),o}},{key:"addTarget",value:function(r,n){k6(r,!0),VUe(n);var o=this.addHandler(vp.TARGET,r,n);return this.store.dispatch(EUe(o)),o}},{key:"containsHandler",value:function(r){return JUe(this.dragSources,r)||JUe(this.dropTargets,r)}},{key:"getSource",value:function(r){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1;en(this.isSourceId(r),"Expected a valid source ID.");var o=n&&r===this.pinnedSourceId,i=o?this.pinnedSource:this.dragSources.get(r);return i}},{key:"getTarget",value:function(r){return en(this.isTargetId(r),"Expected a valid target ID."),this.dropTargets.get(r)}},{key:"getSourceType",value:function(r){return en(this.isSourceId(r),"Expected a valid source ID."),this.types.get(r)}},{key:"getTargetType",value:function(r){return en(this.isTargetId(r),"Expected a valid target ID."),this.types.get(r)}},{key:"isSourceId",value:function(r){var n=XUe(r);return n===vp.SOURCE}},{key:"isTargetId",value:function(r){var n=XUe(r);return n===vp.TARGET}},{key:"removeSource",value:function(r){var n=this;en(this.getSource(r),"Expected an existing source."),this.store.dispatch(SUe(r)),YUe(function(){n.dragSources.delete(r),n.types.delete(r)})}},{key:"removeTarget",value:function(r){en(this.getTarget(r),"Expected an existing target."),this.store.dispatch(TUe(r)),this.dropTargets.delete(r),this.types.delete(r)}},{key:"pinSource",value:function(r){var n=this.getSource(r);en(n,"Expected an existing source."),this.pinnedSourceId=r,this.pinnedSource=n}},{key:"unpinSource",value:function(){en(this.pinnedSource,"No source is pinned at the time."),this.pinnedSourceId=null,this.pinnedSource=null}},{key:"addHandler",value:function(r,n,o){var i=_xr(r);return this.types.set(i,n),r===vp.SOURCE?this.dragSources.set(i,o):r===vp.TARGET&&this.dropTargets.set(i,o),i}}]),e}();function eBe(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:void 0,r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},n=arguments.length>3&&arguments[3]!==void 0?arguments[3]:!1,o=bxr(n),i=new FUe(o,new QUe(o)),a=new pUe(o,i),c=e(a,t,r);return a.receiveBackend(c),a}function bxr(e){var t=typeof window!="undefined"&&window.__REDUX_DEVTOOLS_EXTENSION__;return one(LUe,e&&t&&t({name:"dnd-core",instanceId:"dnd-core"}))}var xxr=["children"];function wxr(e,t){return Ixr(e)||Txr(e,t)||Sxr(e,t)||Exr()}function Exr(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Sxr(e,t){if(e){if(typeof e=="string")return tBe(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if(r==="Object"&&e.constructor&&(r=e.constructor.name),r==="Map"||r==="Set")return Array.from(e);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return tBe(e,t)}}function tBe(e,t){(t==null||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function Txr(e,t){var r=e==null?null:typeof Symbol!="undefined"&&e[Symbol.iterator]||e["@@iterator"];if(r!=null){var n=[],o=!0,i=!1,a,c;try{for(r=r.call(e);!(o=(a=r.next()).done)&&(n.push(a.value),!(t&&n.length===t));o=!0);}catch(h){i=!0,c=h}finally{try{!o&&r.return!=null&&r.return()}finally{if(i)throw c}}return n}}function Ixr(e){if(Array.isArray(e))return e}function Mxr(e,t){if(e==null)return{};var r=Cxr(e,t),n,o;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(o=0;o<i.length;o++)n=i[o],!(t.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}function Cxr(e,t){if(e==null)return{};var r={},n=Object.keys(e),o,i;for(i=0;i<n.length;i++)o=n[i],!(t.indexOf(o)>=0)&&(r[o]=e[o]);return r}var rBe=0,z6=Symbol.for("__REACT_DND_CONTEXT_INSTANCE__"),oBe=(0,F6.memo)(function(t){var r=t.children,n=Mxr(t,xxr),o=Axr(n),i=wxr(o,2),a=i[0],c=i[1];return(0,F6.useEffect)(function(){if(c){var h=iBe();return++rBe,function(){--rBe===0&&(h[z6]=null)}}},[]),(0,nBe.jsx)(A6.Provider,Object.assign({value:a},{children:r}),void 0)});function Axr(e){if("manager"in e){var t={dragDropManager:e.manager};return[t,!1]}var r=Oxr(e.backend,e.context,e.options,e.debugMode),n=!e.context;return[r,n]}function Oxr(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:iBe(),r=arguments.length>2?arguments[2]:void 0,n=arguments.length>3?arguments[3]:void 0,o=t;return o[z6]||(o[z6]={dragDropManager:eBe(e,t,r,n)}),o[z6]}function iBe(){return typeof global!="undefined"?global:window}u();function Pxr(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function aBe(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function Dxr(e,t,r){return t&&aBe(e.prototype,t),r&&aBe(e,r),e}function sBe(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var ane=!1,sne=!1,lBe=function(){function e(t){Pxr(this,e),sBe(this,"internalMonitor",void 0),sBe(this,"sourceId",null),this.internalMonitor=t.getMonitor()}return Dxr(e,[{key:"receiveHandlerId",value:function(r){this.sourceId=r}},{key:"getHandlerId",value:function(){return this.sourceId}},{key:"canDrag",value:function(){en(!ane,"You may not call monitor.canDrag() inside your canDrag() implementation. Read more: http://react-dnd.github.io/react-dnd/docs/api/drag-source-monitor");try{return ane=!0,this.internalMonitor.canDragSource(this.sourceId)}finally{ane=!1}}},{key:"isDragging",value:function(){if(!this.sourceId)return!1;en(!sne,"You may not call monitor.isDragging() inside your isDragging() implementation. Read more: http://react-dnd.github.io/react-dnd/docs/api/drag-source-monitor");try{return sne=!0,this.internalMonitor.isDraggingSource(this.sourceId)}finally{sne=!1}}},{key:"subscribeToStateChange",value:function(r,n){return this.internalMonitor.subscribeToStateChange(r,n)}},{key:"isDraggingSource",value:function(r){return this.internalMonitor.isDraggingSource(r)}},{key:"isOverTarget",value:function(r,n){return this.internalMonitor.isOverTarget(r,n)}},{key:"getTargetIds",value:function(){return this.internalMonitor.getTargetIds()}},{key:"isSourcePublic",value:function(){return this.internalMonitor.isSourcePublic()}},{key:"getSourceId",value:function(){return this.internalMonitor.getSourceId()}},{key:"subscribeToOffsetChange",value:function(r){return this.internalMonitor.subscribeToOffsetChange(r)}},{key:"canDragSource",value:function(r){return this.internalMonitor.canDragSource(r)}},{key:"canDropOnTarget",value:function(r){return this.internalMonitor.canDropOnTarget(r)}},{key:"getItemType",value:function(){return this.internalMonitor.getItemType()}},{key:"getItem",value:function(){return this.internalMonitor.getItem()}},{key:"getDropResult",value:function(){return this.internalMonitor.getDropResult()}},{key:"didDrop",value:function(){return this.internalMonitor.didDrop()}},{key:"getInitialClientOffset",value:function(){return this.internalMonitor.getInitialClientOffset()}},{key:"getInitialSourceClientOffset",value:function(){return this.internalMonitor.getInitialSourceClientOffset()}},{key:"getSourceClientOffset",value:function(){return this.internalMonitor.getSourceClientOffset()}},{key:"getClientOffset",value:function(){return this.internalMonitor.getClientOffset()}},{key:"getDifferenceFromInitialOffset",value:function(){return this.internalMonitor.getDifferenceFromInitialOffset()}}]),e}();u();function Nxr(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function uBe(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function Lxr(e,t,r){return t&&uBe(e.prototype,t),r&&uBe(e,r),e}function cBe(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var lne=!1,pBe=function(){function e(t){Nxr(this,e),cBe(this,"internalMonitor",void 0),cBe(this,"targetId",null),this.internalMonitor=t.getMonitor()}return Lxr(e,[{key:"receiveHandlerId",value:function(r){this.targetId=r}},{key:"getHandlerId",value:function(){return this.targetId}},{key:"subscribeToStateChange",value:function(r,n){return this.internalMonitor.subscribeToStateChange(r,n)}},{key:"canDrop",value:function(){if(!this.targetId)return!1;en(!lne,"You may not call monitor.canDrop() inside your canDrop() implementation. Read more: http://react-dnd.github.io/react-dnd/docs/api/drop-target-monitor");try{return lne=!0,this.internalMonitor.canDropOnTarget(this.targetId)}finally{lne=!1}}},{key:"isOver",value:function(r){return this.targetId?this.internalMonitor.isOverTarget(this.targetId,r):!1}},{key:"getItemType",value:function(){return this.internalMonitor.getItemType()}},{key:"getItem",value:function(){return this.internalMonitor.getItem()}},{key:"getDropResult",value:function(){return this.internalMonitor.getDropResult()}},{key:"didDrop",value:function(){return this.internalMonitor.didDrop()}},{key:"getInitialClientOffset",value:function(){return this.internalMonitor.getInitialClientOffset()}},{key:"getInitialSourceClientOffset",value:function(){return this.internalMonitor.getInitialSourceClientOffset()}},{key:"getSourceClientOffset",value:function(){return this.internalMonitor.getSourceClientOffset()}},{key:"getClientOffset",value:function(){return this.internalMonitor.getClientOffset()}},{key:"getDifferenceFromInitialOffset",value:function(){return this.internalMonitor.getDifferenceFromInitialOffset()}}]),e}();u();u();var yO=ee(ke());function kxr(e){if(typeof e.type!="string"){var t=e.type.displayName||e.type.name||"the component";throw new Error("Only native element nodes can now be passed to React DnD connectors."+"You can either wrap ".concat(t," into a <div>, or turn it into a ")+"drag source or a drop target itself.")}}function Rxr(e){return function(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:null,r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:null;if(!(0,yO.isValidElement)(t)){var n=t;return e(n,r),n}var o=t;kxr(o);var i=r?function(a){return e(a,r)}:e;return jxr(o,i)}}function U6(e){var t={};return Object.keys(e).forEach(function(r){var n=e[r];if(r.endsWith("Ref"))t[r]=e[r];else{var o=Rxr(n);t[r]=function(){return o}}}),t}function fBe(e,t){typeof e=="function"?e(t):e.current=t}function jxr(e,t){var r=e.ref;return en(typeof r!="string","Cannot connect React DnD to an element with an existing string ref. Please convert it to use a callback ref instead, or wrap it into a <span> or <div>. Read more: https://reactjs.org/docs/refs-and-the-dom.html#callback-refs"),r?(0,yO.cloneElement)(e,{ref:function(o){fBe(r,o),fBe(t,o)}}):(0,yO.cloneElement)(e,{ref:t})}u();function B6(e){"@babel/helpers - typeof";return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?B6=function(r){return typeof r}:B6=function(r){return r&&typeof Symbol=="function"&&r.constructor===Symbol&&r!==Symbol.prototype?"symbol":typeof r},B6(e)}function _O(e){return e!==null&&B6(e)==="object"&&Object.prototype.hasOwnProperty.call(e,"current")}u();function bO(e,t,r,n){var o=r?r.call(n,e,t):void 0;if(o!==void 0)return!!o;if(e===t)return!0;if(typeof e!="object"||!e||typeof t!="object"||!t)return!1;var i=Object.keys(e),a=Object.keys(t);if(i.length!==a.length)return!1;for(var c=Object.prototype.hasOwnProperty.bind(t),h=0;h<i.length;h++){var m=i[h];if(!c(m))return!1;var y=e[m],w=t[m];if(o=r?r.call(n,y,w,m):void 0,o===!1||o===void 0&&y!==w)return!1}return!0}function qxr(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function dBe(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function zxr(e,t,r){return t&&dBe(e.prototype,t),r&&dBe(e,r),e}function lu(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var hBe=function(){function e(t){var r=this;qxr(this,e),lu(this,"hooks",U6({dragSource:function(o,i){r.clearDragSource(),r.dragSourceOptions=i||null,_O(o)?r.dragSourceRef=o:r.dragSourceNode=o,r.reconnectDragSource()},dragPreview:function(o,i){r.clearDragPreview(),r.dragPreviewOptions=i||null,_O(o)?r.dragPreviewRef=o:r.dragPreviewNode=o,r.reconnectDragPreview()}})),lu(this,"handlerId",null),lu(this,"dragSourceRef",null),lu(this,"dragSourceNode",void 0),lu(this,"dragSourceOptionsInternal",null),lu(this,"dragSourceUnsubscribe",void 0),lu(this,"dragPreviewRef",null),lu(this,"dragPreviewNode",void 0),lu(this,"dragPreviewOptionsInternal",null),lu(this,"dragPreviewUnsubscribe",void 0),lu(this,"lastConnectedHandlerId",null),lu(this,"lastConnectedDragSource",null),lu(this,"lastConnectedDragSourceOptions",null),lu(this,"lastConnectedDragPreview",null),lu(this,"lastConnectedDragPreviewOptions",null),lu(this,"backend",void 0),this.backend=t}return zxr(e,[{key:"receiveHandlerId",value:function(r){this.handlerId!==r&&(this.handlerId=r,this.reconnect())}},{key:"connectTarget",get:function(){return this.dragSource}},{key:"dragSourceOptions",get:function(){return this.dragSourceOptionsInternal},set:function(r){this.dragSourceOptionsInternal=r}},{key:"dragPreviewOptions",get:function(){return this.dragPreviewOptionsInternal},set:function(r){this.dragPreviewOptionsInternal=r}},{key:"reconnect",value:function(){this.reconnectDragSource(),this.reconnectDragPreview()}},{key:"reconnectDragSource",value:function(){var r=this.dragSource,n=this.didHandlerIdChange()||this.didConnectedDragSourceChange()||this.didDragSourceOptionsChange();if(n&&this.disconnectDragSource(),!!this.handlerId){if(!r){this.lastConnectedDragSource=r;return}n&&(this.lastConnectedHandlerId=this.handlerId,this.lastConnectedDragSource=r,this.lastConnectedDragSourceOptions=this.dragSourceOptions,this.dragSourceUnsubscribe=this.backend.connectDragSource(this.handlerId,r,this.dragSourceOptions))}}},{key:"reconnectDragPreview",value:function(){var r=this.dragPreview,n=this.didHandlerIdChange()||this.didConnectedDragPreviewChange()||this.didDragPreviewOptionsChange();if(n&&this.disconnectDragPreview(),!!this.handlerId){if(!r){this.lastConnectedDragPreview=r;return}n&&(this.lastConnectedHandlerId=this.handlerId,this.lastConnectedDragPreview=r,this.lastConnectedDragPreviewOptions=this.dragPreviewOptions,this.dragPreviewUnsubscribe=this.backend.connectDragPreview(this.handlerId,r,this.dragPreviewOptions))}}},{key:"didHandlerIdChange",value:function(){return this.lastConnectedHandlerId!==this.handlerId}},{key:"didConnectedDragSourceChange",value:function(){return this.lastConnectedDragSource!==this.dragSource}},{key:"didConnectedDragPreviewChange",value:function(){return this.lastConnectedDragPreview!==this.dragPreview}},{key:"didDragSourceOptionsChange",value:function(){return!bO(this.lastConnectedDragSourceOptions,this.dragSourceOptions)}},{key:"didDragPreviewOptionsChange",value:function(){return!bO(this.lastConnectedDragPreviewOptions,this.dragPreviewOptions)}},{key:"disconnectDragSource",value:function(){this.dragSourceUnsubscribe&&(this.dragSourceUnsubscribe(),this.dragSourceUnsubscribe=void 0)}},{key:"disconnectDragPreview",value:function(){this.dragPreviewUnsubscribe&&(this.dragPreviewUnsubscribe(),this.dragPreviewUnsubscribe=void 0,this.dragPreviewNode=null,this.dragPreviewRef=null)}},{key:"dragSource",get:function(){return this.dragSourceNode||this.dragSourceRef&&this.dragSourceRef.current}},{key:"dragPreview",get:function(){return this.dragPreviewNode||this.dragPreviewRef&&this.dragPreviewRef.current}},{key:"clearDragSource",value:function(){this.dragSourceNode=null,this.dragSourceRef=null}},{key:"clearDragPreview",value:function(){this.dragPreviewNode=null,this.dragPreviewRef=null}}]),e}();u();function Fxr(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function mBe(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function Uxr(e,t,r){return t&&mBe(e.prototype,t),r&&mBe(e,r),e}function Gh(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var gBe=function(){function e(t){var r=this;Fxr(this,e),Gh(this,"hooks",U6({dropTarget:function(o,i){r.clearDropTarget(),r.dropTargetOptions=i,_O(o)?r.dropTargetRef=o:r.dropTargetNode=o,r.reconnect()}})),Gh(this,"handlerId",null),Gh(this,"dropTargetRef",null),Gh(this,"dropTargetNode",void 0),Gh(this,"dropTargetOptionsInternal",null),Gh(this,"unsubscribeDropTarget",void 0),Gh(this,"lastConnectedHandlerId",null),Gh(this,"lastConnectedDropTarget",null),Gh(this,"lastConnectedDropTargetOptions",null),Gh(this,"backend",void 0),this.backend=t}return Uxr(e,[{key:"connectTarget",get:function(){return this.dropTarget}},{key:"reconnect",value:function(){var r=this.didHandlerIdChange()||this.didDropTargetChange()||this.didOptionsChange();r&&this.disconnectDropTarget();var n=this.dropTarget;if(this.handlerId){if(!n){this.lastConnectedDropTarget=n;return}r&&(this.lastConnectedHandlerId=this.handlerId,this.lastConnectedDropTarget=n,this.lastConnectedDropTargetOptions=this.dropTargetOptions,this.unsubscribeDropTarget=this.backend.connectDropTarget(this.handlerId,n,this.dropTargetOptions))}}},{key:"receiveHandlerId",value:function(r){r!==this.handlerId&&(this.handlerId=r,this.reconnect())}},{key:"dropTargetOptions",get:function(){return this.dropTargetOptionsInternal},set:function(r){this.dropTargetOptionsInternal=r}},{key:"didHandlerIdChange",value:function(){return this.lastConnectedHandlerId!==this.handlerId}},{key:"didDropTargetChange",value:function(){return this.lastConnectedDropTarget!==this.dropTarget}},{key:"didOptionsChange",value:function(){return!bO(this.lastConnectedDropTargetOptions,this.dropTargetOptions)}},{key:"disconnectDropTarget",value:function(){this.unsubscribeDropTarget&&(this.unsubscribeDropTarget(),this.unsubscribeDropTarget=void 0)}},{key:"dropTarget",get:function(){return this.dropTargetNode||this.dropTargetRef&&this.dropTargetRef.current}},{key:"clearDropTarget",value:function(){this.dropTargetRef=null,this.dropTargetNode=null}}]),e}();u();function vBe(e,t,r){var n=r.getRegistry(),o=n.addTarget(e,t);return[o,function(){return n.removeTarget(o)}]}function yBe(e,t,r){var n=r.getRegistry(),o=n.addSource(e,t);return[o,function(){return n.removeSource(o)}]}u();u();u();var V6=ee(ke()),yp=typeof window!="undefined"?V6.useLayoutEffect:V6.useEffect;u();var H6=ee(ke());u();function G6(e){"@babel/helpers - typeof";return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?G6=function(r){return typeof r}:G6=function(r){return r&&typeof Symbol=="function"&&r.constructor===Symbol&&r!==Symbol.prototype?"symbol":typeof r},G6(e)}function Bxr(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _Be(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function Vxr(e,t,r){return t&&_Be(e.prototype,t),r&&_Be(e,r),e}function une(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var bBe=function(){function e(t,r,n){Bxr(this,e),une(this,"spec",void 0),une(this,"monitor",void 0),une(this,"connector",void 0),this.spec=t,this.monitor=r,this.connector=n}return Vxr(e,[{key:"beginDrag",value:function(){var r,n=this.spec,o=this.monitor,i=null;return G6(n.item)==="object"?i=n.item:typeof n.item=="function"?i=n.item(o):i={},(r=i)!==null&&r!==void 0?r:null}},{key:"canDrag",value:function(){var r=this.spec,n=this.monitor;return typeof r.canDrag=="boolean"?r.canDrag:typeof r.canDrag=="function"?r.canDrag(n):!0}},{key:"isDragging",value:function(r,n){var o=this.spec,i=this.monitor,a=o.isDragging;return a?a(i):n===r.getSourceId()}},{key:"endDrag",value:function(){var r=this.spec,n=this.monitor,o=this.connector,i=r.end;i&&i(n.getItem(),n),o.reconnect()}}]),e}();function xBe(e,t,r){var n=(0,H6.useMemo)(function(){return new bBe(e,t,r)},[t,r]);return(0,H6.useEffect)(function(){n.spec=e},[e]),n}u();var wBe=ee(ke());function hf(){var e=(0,wBe.useContext)(A6),t=e.dragDropManager;return en(t!=null,"Expected drag drop context"),t}u();var EBe=ee(ke());function SBe(e){return(0,EBe.useMemo)(function(){var t=e.type;return en(t!=null,"spec.type must be defined"),t},[e])}function Gxr(e,t){return Yxr(e)||Wxr(e,t)||$xr(e,t)||Hxr()}function Hxr(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function $xr(e,t){if(e){if(typeof e=="string")return TBe(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if(r==="Object"&&e.constructor&&(r=e.constructor.name),r==="Map"||r==="Set")return Array.from(e);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return TBe(e,t)}}function TBe(e,t){(t==null||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function Wxr(e,t){var r=e==null?null:typeof Symbol!="undefined"&&e[Symbol.iterator]||e["@@iterator"];if(r!=null){var n=[],o=!0,i=!1,a,c;try{for(r=r.call(e);!(o=(a=r.next()).done)&&(n.push(a.value),!(t&&n.length===t));o=!0);}catch(h){i=!0,c=h}finally{try{!o&&r.return!=null&&r.return()}finally{if(i)throw c}}return n}}function Yxr(e){if(Array.isArray(e))return e}function IBe(e,t,r){var n=hf(),o=xBe(e,t,r),i=SBe(e);yp(function(){if(i!=null){var c=yBe(i,o,n),h=Gxr(c,2),m=h[0],y=h[1];return t.receiveHandlerId(m),r.receiveHandlerId(m),y}},[n,t,r,o,i])}u();var MBe=ee(ke());function Zxr(e){return Qxr(e)||Jxr(e)||Xxr(e)||Kxr()}function Kxr(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Xxr(e,t){if(e){if(typeof e=="string")return cne(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if(r==="Object"&&e.constructor&&(r=e.constructor.name),r==="Map"||r==="Set")return Array.from(e);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return cne(e,t)}}function Jxr(e){if(typeof Symbol!="undefined"&&e[Symbol.iterator]!=null||e["@@iterator"]!=null)return Array.from(e)}function Qxr(e){if(Array.isArray(e))return cne(e)}function cne(e,t){(t==null||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function $6(e,t){var r=Zxr(t||[]);return t==null&&typeof e!="function"&&r.push(e),(0,MBe.useMemo)(function(){return typeof e=="function"?e():e},r)}u();var CBe=ee(ke());function ABe(){var e=hf();return(0,CBe.useMemo)(function(){return new lBe(e)},[e])}u();var OBe=ee(ke());function PBe(e,t){var r=hf(),n=(0,OBe.useMemo)(function(){return new hBe(r.getBackend())},[r]);return yp(function(){return n.dragSourceOptions=e||null,n.reconnect(),function(){return n.disconnectDragSource()}},[n,e]),yp(function(){return n.dragPreviewOptions=t||null,n.reconnect(),function(){return n.disconnectDragPreview()}},[n,t]),n}u();u();u();var LBe=ee(xO()),W6=ee(ke());function ewr(e,t){return owr(e)||nwr(e,t)||rwr(e,t)||twr()}function twr(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function rwr(e,t){if(e){if(typeof e=="string")return NBe(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if(r==="Object"&&e.constructor&&(r=e.constructor.name),r==="Map"||r==="Set")return Array.from(e);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return NBe(e,t)}}function NBe(e,t){(t==null||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function nwr(e,t){var r=e==null?null:typeof Symbol!="undefined"&&e[Symbol.iterator]||e["@@iterator"];if(r!=null){var n=[],o=!0,i=!1,a,c;try{for(r=r.call(e);!(o=(a=r.next()).done)&&(n.push(a.value),!(t&&n.length===t));o=!0);}catch(h){i=!0,c=h}finally{try{!o&&r.return!=null&&r.return()}finally{if(i)throw c}}return n}}function owr(e){if(Array.isArray(e))return e}function kBe(e,t,r){var n=(0,W6.useState)(function(){return t(e)}),o=ewr(n,2),i=o[0],a=o[1],c=(0,W6.useCallback)(function(){var h=t(e);(0,LBe.default)(i,h)||(a(h),r&&r())},[i,e,r]);return yp(c),[i,c]}function iwr(e,t){return uwr(e)||lwr(e,t)||swr(e,t)||awr()}function awr(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function swr(e,t){if(e){if(typeof e=="string")return RBe(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if(r==="Object"&&e.constructor&&(r=e.constructor.name),r==="Map"||r==="Set")return Array.from(e);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return RBe(e,t)}}function RBe(e,t){(t==null||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function lwr(e,t){var r=e==null?null:typeof Symbol!="undefined"&&e[Symbol.iterator]||e["@@iterator"];if(r!=null){var n=[],o=!0,i=!1,a,c;try{for(r=r.call(e);!(o=(a=r.next()).done)&&(n.push(a.value),!(t&&n.length===t));o=!0);}catch(h){i=!0,c=h}finally{try{!o&&r.return!=null&&r.return()}finally{if(i)throw c}}return n}}function uwr(e){if(Array.isArray(e))return e}function jBe(e,t,r){var n=kBe(e,t,r),o=iwr(n,2),i=o[0],a=o[1];return yp(function(){var h=e.getHandlerId();if(h!=null)return e.subscribeToStateChange(a,{handlerIds:[h]})},[e,a]),i}function Y6(e,t,r){return jBe(t,e||function(){return{}},function(){return r.reconnect()})}u();var pne=ee(ke());function qBe(e){return(0,pne.useMemo)(function(){return e.hooks.dragSource()},[e])}function zBe(e){return(0,pne.useMemo)(function(){return e.hooks.dragPreview()},[e])}function FBe(e,t){var r=$6(e,t);en(!r.begin,"useDrag::spec.begin was deprecated in v14. Replace spec.begin() with spec.item(). (see more here - https://react-dnd.github.io/react-dnd/docs/api/use-drag)");var n=ABe(),o=PBe(r.options,r.previewOptions);return IBe(r,n,o),[Y6(r.collect,n,o),qBe(o),zBe(o)]}u();u();u();var UBe=ee(ke());function BBe(e){var t=e.accept;return(0,UBe.useMemo)(function(){return en(e.accept!=null,"accept must be defined"),Array.isArray(t)?t:[t]},[t])}u();var Z6=ee(ke());u();function cwr(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function VBe(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function pwr(e,t,r){return t&&VBe(e.prototype,t),r&&VBe(e,r),e}function GBe(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var HBe=function(){function e(t,r){cwr(this,e),GBe(this,"spec",void 0),GBe(this,"monitor",void 0),this.spec=t,this.monitor=r}return pwr(e,[{key:"canDrop",value:function(){var r=this.spec,n=this.monitor;return r.canDrop?r.canDrop(n.getItem(),n):!0}},{key:"hover",value:function(){var r=this.spec,n=this.monitor;r.hover&&r.hover(n.getItem(),n)}},{key:"drop",value:function(){var r=this.spec,n=this.monitor;if(r.drop)return r.drop(n.getItem(),n)}}]),e}();function $Be(e,t){var r=(0,Z6.useMemo)(function(){return new HBe(e,t)},[t]);return(0,Z6.useEffect)(function(){r.spec=e},[e]),r}function fwr(e,t){return gwr(e)||mwr(e,t)||hwr(e,t)||dwr()}function dwr(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function hwr(e,t){if(e){if(typeof e=="string")return WBe(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if(r==="Object"&&e.constructor&&(r=e.constructor.name),r==="Map"||r==="Set")return Array.from(e);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return WBe(e,t)}}function WBe(e,t){(t==null||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function mwr(e,t){var r=e==null?null:typeof Symbol!="undefined"&&e[Symbol.iterator]||e["@@iterator"];if(r!=null){var n=[],o=!0,i=!1,a,c;try{for(r=r.call(e);!(o=(a=r.next()).done)&&(n.push(a.value),!(t&&n.length===t));o=!0);}catch(h){i=!0,c=h}finally{try{!o&&r.return!=null&&r.return()}finally{if(i)throw c}}return n}}function gwr(e){if(Array.isArray(e))return e}function YBe(e,t,r){var n=hf(),o=$Be(e,t),i=BBe(e);yp(function(){var c=vBe(i,o,n),h=fwr(c,2),m=h[0],y=h[1];return t.receiveHandlerId(m),r.receiveHandlerId(m),y},[n,t,o,r,i.map(function(a){return a.toString()}).join("|")])}u();var ZBe=ee(ke());function KBe(){var e=hf();return(0,ZBe.useMemo)(function(){return new pBe(e)},[e])}u();var XBe=ee(ke());function JBe(e){var t=hf(),r=(0,XBe.useMemo)(function(){return new gBe(t.getBackend())},[t]);return yp(function(){return r.dropTargetOptions=e||null,r.reconnect(),function(){return r.disconnectDropTarget()}},[e]),r}u();var QBe=ee(ke());function eVe(e){return(0,QBe.useMemo)(function(){return e.hooks.dropTarget()},[e])}function K6(e,t){var r=$6(e,t),n=KBe(),o=JBe(r.options);return YBe(r,n,o),[Y6(r.collect,n,o),eVe(o)]}function fne(){return fne=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},fne.apply(this,arguments)}var vwr=(0,n0.createContext)(null),dne=e=>{let i=e,{portal:t}=i,r=En(i,["portal"]),[n,o]=(0,n0.useState)(null);return n0.default.createElement(vwr.Provider,{value:t!=null?t:n},n0.default.createElement(oBe,fne({backend:Xre},r)),t?null:n0.default.createElement("div",{ref:o}))};u();u();var wp=ee(ke(),1);var nz=ee(It(),1);u();var ks=dn({key:"notificationState",default:null});u();var Rd=ee(ke(),1);u();u();u();u();u();u();u();u();var mf=[];var tVe=function(){return mf.some(function(e){return e.activeTargets.length>0})};u();var rVe=function(){return mf.some(function(e){return e.skippedTargets.length>0})};u();var nVe="ResizeObserver loop completed with undelivered notifications.",oVe=function(){var e;typeof ErrorEvent=="function"?e=new ErrorEvent("error",{message:nVe}):(e=document.createEvent("Event"),e.initEvent("error",!1,!1),e.message=nVe),window.dispatchEvent(e)};u();u();u();u();var G_;(function(e){e.BORDER_BOX="border-box",e.CONTENT_BOX="content-box",e.DEVICE_PIXEL_CONTENT_BOX="device-pixel-content-box"})(G_||(G_={}));u();u();var Md=function(e){return Object.freeze(e)};var hne=function(){function e(t,r){this.inlineSize=t,this.blockSize=r,Md(this)}return e}();u();var mne=function(){function e(t,r,n,o){return this.x=t,this.y=r,this.width=n,this.height=o,this.top=this.y,this.left=this.x,this.bottom=this.top+this.height,this.right=this.left+this.width,Md(this)}return e.prototype.toJSON=function(){var t=this,r=t.x,n=t.y,o=t.top,i=t.right,a=t.bottom,c=t.left,h=t.width,m=t.height;return{x:r,y:n,top:o,right:i,bottom:a,left:c,width:h,height:m}},e.fromRect=function(t){return new e(t.x,t.y,t.width,t.height)},e}();u();var wO=function(e){return e instanceof SVGElement&&"getBBox"in e},X6=function(e){if(wO(e)){var t=e.getBBox(),r=t.width,n=t.height;return!r&&!n}var o=e,i=o.offsetWidth,a=o.offsetHeight;return!(i||a||e.getClientRects().length)},gne=function(e){var t;if(e instanceof Element)return!0;var r=(t=e==null?void 0:e.ownerDocument)===null||t===void 0?void 0:t.defaultView;return!!(r&&e instanceof r.Element)},iVe=function(e){switch(e.tagName){case"INPUT":if(e.type!=="image")break;case"VIDEO":case"AUDIO":case"EMBED":case"OBJECT":case"CANVAS":case"IFRAME":case"IMG":return!0}return!1};u();var H_=typeof window!="undefined"?window:{};var J6=new WeakMap,aVe=/auto|scroll/,ywr=/^tb|vertical/,_wr=/msie|trident/i.test(H_.navigator&&H_.navigator.userAgent),Hh=function(e){return parseFloat(e||"0")},pS=function(e,t,r){return e===void 0&&(e=0),t===void 0&&(t=0),r===void 0&&(r=!1),new hne((r?t:e)||0,(r?e:t)||0)},sVe=Md({devicePixelContentBoxSize:pS(),borderBoxSize:pS(),contentBoxSize:pS(),contentRect:new mne(0,0,0,0)}),vne=function(e,t){if(t===void 0&&(t=!1),J6.has(e)&&!t)return J6.get(e);if(X6(e))return J6.set(e,sVe),sVe;var r=getComputedStyle(e),n=wO(e)&&e.ownerSVGElement&&e.getBBox(),o=!_wr&&r.boxSizing==="border-box",i=ywr.test(r.writingMode||""),a=!n&&aVe.test(r.overflowY||""),c=!n&&aVe.test(r.overflowX||""),h=n?0:Hh(r.paddingTop),m=n?0:Hh(r.paddingRight),y=n?0:Hh(r.paddingBottom),w=n?0:Hh(r.paddingLeft),E=n?0:Hh(r.borderTopWidth),A=n?0:Hh(r.borderRightWidth),P=n?0:Hh(r.borderBottomWidth),j=n?0:Hh(r.borderLeftWidth),D=w+m,L=h+y,z=j+A,B=E+P,G=c?e.offsetHeight-B-e.clientHeight:0,Z=a?e.offsetWidth-z-e.clientWidth:0,K=o?D+z:0,te=o?L+B:0,se=n?n.width:Hh(r.width)-K-Z,le=n?n.height:Hh(r.height)-te-G,pe=se+D+Z+z,me=le+L+G+B,_e=Md({devicePixelContentBoxSize:pS(Math.round(se*devicePixelRatio),Math.round(le*devicePixelRatio),i),borderBoxSize:pS(pe,me,i),contentBoxSize:pS(se,le,i),contentRect:new mne(w,h,se,le)});return J6.set(e,_e),_e},Q6=function(e,t,r){var n=vne(e,r),o=n.borderBoxSize,i=n.contentBoxSize,a=n.devicePixelContentBoxSize;switch(t){case G_.DEVICE_PIXEL_CONTENT_BOX:return a;case G_.BORDER_BOX:return o;default:return i}};var yne=function(){function e(t){var r=vne(t);this.target=t,this.contentRect=r.contentRect,this.borderBoxSize=Md([r.borderBoxSize]),this.contentBoxSize=Md([r.contentBoxSize]),this.devicePixelContentBoxSize=Md([r.devicePixelContentBoxSize])}return e}();u();var ej=function(e){if(X6(e))return 1/0;for(var t=0,r=e.parentNode;r;)t+=1,r=r.parentNode;return t};var lVe=function(){var e=1/0,t=[];mf.forEach(function(a){if(a.activeTargets.length!==0){var c=[];a.activeTargets.forEach(function(m){var y=new yne(m.target),w=ej(m.target);c.push(y),m.lastReportedSize=Q6(m.target,m.observedBox),w<e&&(e=w)}),t.push(function(){a.callback.call(a.observer,c,a.observer)}),a.activeTargets.splice(0,a.activeTargets.length)}});for(var r=0,n=t;r<n.length;r++){var o=n[r];o()}return e};u();var _ne=function(e){mf.forEach(function(r){r.activeTargets.splice(0,r.activeTargets.length),r.skippedTargets.splice(0,r.skippedTargets.length),r.observationTargets.forEach(function(o){o.isActive()&&(ej(o.target)>e?r.activeTargets.push(o):r.skippedTargets.push(o))})})};var uVe=function(){var e=0;for(_ne(e);tVe();)e=lVe(),_ne(e);return rVe()&&oVe(),e>0};u();u();var bne,cVe=[],bwr=function(){return cVe.splice(0).forEach(function(e){return e()})},pVe=function(e){if(!bne){var t=0,r=document.createTextNode(""),n={characterData:!0};new MutationObserver(function(){return bwr()}).observe(r,n),bne=function(){r.textContent="".concat(t?t--:t++)}}cVe.push(e),bne()};var fVe=function(e){pVe(function(){requestAnimationFrame(e)})};var tj=0,xwr=function(){return!!tj},wwr=250,Ewr={attributes:!0,characterData:!0,childList:!0,subtree:!0},dVe=["resize","load","transitionend","animationend","animationstart","animationiteration","keyup","keydown","mouseup","mousedown","mouseover","mouseout","blur","focus"],hVe=function(e){return e===void 0&&(e=0),Date.now()+e},xne=!1,Swr=function(){function e(){var t=this;this.stopped=!0,this.listener=function(){return t.schedule()}}return e.prototype.run=function(t){var r=this;if(t===void 0&&(t=wwr),!xne){xne=!0;var n=hVe(t);fVe(function(){var o=!1;try{o=uVe()}finally{if(xne=!1,t=n-hVe(),!xwr())return;o?r.run(1e3):t>0?r.run(t):r.start()}})}},e.prototype.schedule=function(){this.stop(),this.run()},e.prototype.observe=function(){var t=this,r=function(){return t.observer&&t.observer.observe(document.body,Ewr)};document.body?r():H_.addEventListener("DOMContentLoaded",r)},e.prototype.start=function(){var t=this;this.stopped&&(this.stopped=!1,this.observer=new MutationObserver(this.listener),this.observe(),dVe.forEach(function(r){return H_.addEventListener(r,t.listener,!0)}))},e.prototype.stop=function(){var t=this;this.stopped||(this.observer&&this.observer.disconnect(),dVe.forEach(function(r){return H_.removeEventListener(r,t.listener,!0)}),this.stopped=!0)},e}(),rj=new Swr,wne=function(e){!tj&&e>0&&rj.start(),tj+=e,!tj&&rj.stop()};u();var Twr=function(e){return!wO(e)&&!iVe(e)&&getComputedStyle(e).display==="inline"},mVe=function(){function e(t,r){this.target=t,this.observedBox=r||G_.CONTENT_BOX,this.lastReportedSize={inlineSize:0,blockSize:0}}return e.prototype.isActive=function(){var t=Q6(this.target,this.observedBox,!0);return Twr(this.target)&&(this.lastReportedSize=t),this.lastReportedSize.inlineSize!==t.inlineSize||this.lastReportedSize.blockSize!==t.blockSize},e}();u();var gVe=function(){function e(t,r){this.activeTargets=[],this.skippedTargets=[],this.observationTargets=[],this.observer=t,this.callback=r}return e}();var nj=new WeakMap,vVe=function(e,t){for(var r=0;r<e.length;r+=1)if(e[r].target===t)return r;return-1},EO=function(){function e(){}return e.connect=function(t,r){var n=new gVe(t,r);nj.set(t,n)},e.observe=function(t,r,n){var o=nj.get(t),i=o.observationTargets.length===0;vVe(o.observationTargets,r)<0&&(i&&mf.push(o),o.observationTargets.push(new mVe(r,n&&n.box)),wne(1),rj.schedule())},e.unobserve=function(t,r){var n=nj.get(t),o=vVe(n.observationTargets,r),i=n.observationTargets.length===1;o>=0&&(i&&mf.splice(mf.indexOf(n),1),n.observationTargets.splice(o,1),wne(-1))},e.disconnect=function(t){var r=this,n=nj.get(t);n.observationTargets.slice().forEach(function(o){return r.unobserve(t,o.target)}),n.activeTargets.splice(0,n.activeTargets.length)},e}();var Ene=function(){function e(t){if(arguments.length===0)throw new TypeError("Failed to construct 'ResizeObserver': 1 argument required, but only 0 present.");if(typeof t!="function")throw new TypeError("Failed to construct 'ResizeObserver': The callback provided as parameter 1 is not a function.");EO.connect(this,t)}return e.prototype.observe=function(t,r){if(arguments.length===0)throw new TypeError("Failed to execute 'observe' on 'ResizeObserver': 1 argument required, but only 0 present.");if(!gne(t))throw new TypeError("Failed to execute 'observe' on 'ResizeObserver': parameter 1 is not of type 'Element");EO.observe(this,t,r)},e.prototype.unobserve=function(t){if(arguments.length===0)throw new TypeError("Failed to execute 'unobserve' on 'ResizeObserver': 1 argument required, but only 0 present.");if(!gne(t))throw new TypeError("Failed to execute 'unobserve' on 'ResizeObserver': parameter 1 is not of type 'Element");EO.unobserve(this,t)},e.prototype.disconnect=function(){EO.disconnect(this)},e.toString=function(){return"function ResizeObserver () { [polyfill code] }"},e}();u();var yVe=ee(ke()),Iwr=yVe.default[typeof document!="undefined"&&document.createElement!==void 0?"useLayoutEffect":"useEffect"],_Ve=Iwr;var Mwr=typeof window!="undefined"&&"ResizeObserver"in window?window.ResizeObserver:Ene;function Cwr(){}function Awr(e,t){let r=Pwr(),n=m6(t);return _Ve(()=>{let o=!1,i=e&&"current"in e?e.current:e;if(!i)return Cwr;function a(c,h){o||n.current(c,h)}return r.subscribe(i,a),()=>{o=!0,r.unsubscribe(i,a)}},[e,r,n]),r.observer}function Owr(){let e=!1,t=[],r=new Map,n=new Mwr((o,i)=>{t=t.concat(o);function a(){let c=new Set;for(let h=0;h<t.length;h++){if(c.has(t[h].target))continue;c.add(t[h].target);let m=r.get(t[h].target);m==null||m.forEach(y=>y(t[h],i))}t=[],e=!1}e||window.requestAnimationFrame(a),e=!0});return{observer:n,subscribe(o,i){var a;n.observe(o);let c=(a=r.get(o))!==null&&a!==void 0?a:[];c.push(i),r.set(o,c)},unsubscribe(o,i){var a;let c=(a=r.get(o))!==null&&a!==void 0?a:[];if(c.length===1){n.unobserve(o),r.delete(o);return}let h=c.indexOf(i);h!==-1&&c.splice(h,1),r.set(o,c)}}}var Sne,Pwr=()=>Sne||(Sne=Owr()),bVe=Awr;u();u();u();u();u();u();u();function SO(e,t){return function(){return e.apply(t,arguments)}}var{toString:Dwr}=Object.prototype,{getPrototypeOf:Ine}=Object,{iterator:ij,toStringTag:wVe}=Symbol,aj=(e=>t=>{let r=Dwr.call(t);return e[r]||(e[r]=r.slice(8,-1).toLowerCase())})(Object.create(null)),Cd=e=>(e=e.toLowerCase(),t=>aj(t)===e),sj=e=>t=>typeof t===e,{isArray:dS}=Array,fS=sj("undefined");function TO(e){return e!==null&&!fS(e)&&e.constructor!==null&&!fS(e.constructor)&&Tc(e.constructor.isBuffer)&&e.constructor.isBuffer(e)}var EVe=Cd("ArrayBuffer");function Nwr(e){let t;return typeof ArrayBuffer!="undefined"&&ArrayBuffer.isView?t=ArrayBuffer.isView(e):t=e&&e.buffer&&EVe(e.buffer),t}var Lwr=sj("string"),Tc=sj("function"),SVe=sj("number"),IO=e=>e!==null&&typeof e=="object",kwr=e=>e===!0||e===!1,oj=e=>{if(aj(e)!=="object")return!1;let t=Ine(e);return(t===null||t===Object.prototype||Object.getPrototypeOf(t)===null)&&!(wVe in e)&&!(ij in e)},Rwr=e=>{if(!IO(e)||TO(e))return!1;try{return Object.keys(e).length===0&&Object.getPrototypeOf(e)===Object.prototype}catch(t){return!1}},jwr=Cd("Date"),qwr=Cd("File"),zwr=Cd("Blob"),Fwr=Cd("FileList"),Uwr=e=>IO(e)&&Tc(e.pipe),Bwr=e=>{let t;return e&&(typeof FormData=="function"&&e instanceof FormData||Tc(e.append)&&((t=aj(e))==="formdata"||t==="object"&&Tc(e.toString)&&e.toString()==="[object FormData]"))},Vwr=Cd("URLSearchParams"),[Gwr,Hwr,$wr,Wwr]=["ReadableStream","Request","Response","Headers"].map(Cd),Ywr=e=>e.trim?e.trim():e.replace(/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,"");function MO(e,t,{allOwnKeys:r=!1}={}){if(e===null||typeof e=="undefined")return;let n,o;if(typeof e!="object"&&(e=[e]),dS(e))for(n=0,o=e.length;n<o;n++)t.call(null,e[n],n,e);else{if(TO(e))return;let i=r?Object.getOwnPropertyNames(e):Object.keys(e),a=i.length,c;for(n=0;n<a;n++)c=i[n],t.call(null,e[c],c,e)}}function TVe(e,t){if(TO(e))return null;t=t.toLowerCase();let r=Object.keys(e),n=r.length,o;for(;n-->0;)if(o=r[n],t===o.toLowerCase())return o;return null}var $_=typeof globalThis!="undefined"?globalThis:typeof self!="undefined"?self:typeof window!="undefined"?window:global,IVe=e=>!fS(e)&&e!==$_;function Tne(){let{caseless:e,skipUndefined:t}=IVe(this)&&this||{},r={},n=(o,i)=>{let a=e&&TVe(r,i)||i;oj(r[a])&&oj(o)?r[a]=Tne(r[a],o):oj(o)?r[a]=Tne({},o):dS(o)?r[a]=o.slice():(!t||!fS(o))&&(r[a]=o)};for(let o=0,i=arguments.length;o<i;o++)arguments[o]&&MO(arguments[o],n);return r}var Zwr=(e,t,r,{allOwnKeys:n}={})=>(MO(t,(o,i)=>{r&&Tc(o)?e[i]=SO(o,r):e[i]=o},{allOwnKeys:n}),e),Kwr=e=>(e.charCodeAt(0)===65279&&(e=e.slice(1)),e),Xwr=(e,t,r,n)=>{e.prototype=Object.create(t.prototype,n),e.prototype.constructor=e,Object.defineProperty(e,"super",{value:t.prototype}),r&&Object.assign(e.prototype,r)},Jwr=(e,t,r,n)=>{let o,i,a,c={};if(t=t||{},e==null)return t;do{for(o=Object.getOwnPropertyNames(e),i=o.length;i-->0;)a=o[i],(!n||n(a,e,t))&&!c[a]&&(t[a]=e[a],c[a]=!0);e=r!==!1&&Ine(e)}while(e&&(!r||r(e,t))&&e!==Object.prototype);return t},Qwr=(e,t,r)=>{e=String(e),(r===void 0||r>e.length)&&(r=e.length),r-=t.length;let n=e.indexOf(t,r);return n!==-1&&n===r},eEr=e=>{if(!e)return null;if(dS(e))return e;let t=e.length;if(!SVe(t))return null;let r=new Array(t);for(;t-->0;)r[t]=e[t];return r},tEr=(e=>t=>e&&t instanceof e)(typeof Uint8Array!="undefined"&&Ine(Uint8Array)),rEr=(e,t)=>{let n=(e&&e[ij]).call(e),o;for(;(o=n.next())&&!o.done;){let i=o.value;t.call(e,i[0],i[1])}},nEr=(e,t)=>{let r,n=[];for(;(r=e.exec(t))!==null;)n.push(r);return n},oEr=Cd("HTMLFormElement"),iEr=e=>e.toLowerCase().replace(/[-_\s]([a-z\d])(\w*)/g,function(r,n,o){return n.toUpperCase()+o}),xVe=(({hasOwnProperty:e})=>(t,r)=>e.call(t,r))(Object.prototype),aEr=Cd("RegExp"),MVe=(e,t)=>{let r=Object.getOwnPropertyDescriptors(e),n={};MO(r,(o,i)=>{let a;(a=t(o,i,e))!==!1&&(n[i]=a||o)}),Object.defineProperties(e,n)},sEr=e=>{MVe(e,(t,r)=>{if(Tc(e)&&["arguments","caller","callee"].indexOf(r)!==-1)return!1;let n=e[r];if(Tc(n)){if(t.enumerable=!1,"writable"in t){t.writable=!1;return}t.set||(t.set=()=>{throw Error("Can not rewrite read-only method '"+r+"'")})}})},lEr=(e,t)=>{let r={},n=o=>{o.forEach(i=>{r[i]=!0})};return dS(e)?n(e):n(String(e).split(t)),r},uEr=()=>{},cEr=(e,t)=>e!=null&&Number.isFinite(e=+e)?e:t;function pEr(e){return!!(e&&Tc(e.append)&&e[wVe]==="FormData"&&e[ij])}var fEr=e=>{let t=new Array(10),r=(n,o)=>{if(IO(n)){if(t.indexOf(n)>=0)return;if(TO(n))return n;if(!("toJSON"in n)){t[o]=n;let i=dS(n)?[]:{};return MO(n,(a,c)=>{let h=r(a,o+1);!fS(h)&&(i[c]=h)}),t[o]=void 0,i}}return n};return r(e,0)},dEr=Cd("AsyncFunction"),hEr=e=>e&&(IO(e)||Tc(e))&&Tc(e.then)&&Tc(e.catch),CVe=((e,t)=>e?setImmediate:t?((r,n)=>($_.addEventListener("message",({source:o,data:i})=>{o===$_&&i===r&&n.length&&n.shift()()},!1),o=>{n.push(o),$_.postMessage(r,"*")}))(`axios@${Math.random()}`,[]):r=>setTimeout(r))(typeof setImmediate=="function",Tc($_.postMessage)),mEr=typeof queueMicrotask!="undefined"?queueMicrotask.bind($_):typeof _!="undefined"&&_.nextTick||CVe,gEr=e=>e!=null&&Tc(e[ij]),ut={isArray:dS,isArrayBuffer:EVe,isBuffer:TO,isFormData:Bwr,isArrayBufferView:Nwr,isString:Lwr,isNumber:SVe,isBoolean:kwr,isObject:IO,isPlainObject:oj,isEmptyObject:Rwr,isReadableStream:Gwr,isRequest:Hwr,isResponse:$wr,isHeaders:Wwr,isUndefined:fS,isDate:jwr,isFile:qwr,isBlob:zwr,isRegExp:aEr,isFunction:Tc,isStream:Uwr,isURLSearchParams:Vwr,isTypedArray:tEr,isFileList:Fwr,forEach:MO,merge:Tne,extend:Zwr,trim:Ywr,stripBOM:Kwr,inherits:Xwr,toFlatObject:Jwr,kindOf:aj,kindOfTest:Cd,endsWith:Qwr,toArray:eEr,forEachEntry:rEr,matchAll:nEr,isHTMLForm:oEr,hasOwnProperty:xVe,hasOwnProp:xVe,reduceDescriptors:MVe,freezeMethods:sEr,toObjectSet:lEr,toCamelCase:iEr,noop:uEr,toFiniteNumber:cEr,findKey:TVe,global:$_,isContextDefined:IVe,isSpecCompliantForm:pEr,toJSONObject:fEr,isAsyncFn:dEr,isThenable:hEr,setImmediate:CVe,asap:mEr,isIterable:gEr};u();u();u();u();u();function hS(e,t,r,n,o){Error.call(this),Error.captureStackTrace?Error.captureStackTrace(this,this.constructor):this.stack=new Error().stack,this.message=e,this.name="AxiosError",t&&(this.code=t),r&&(this.config=r),n&&(this.request=n),o&&(this.response=o,this.status=o.status?o.status:null)}ut.inherits(hS,Error,{toJSON:function(){return{message:this.message,name:this.name,description:this.description,number:this.number,fileName:this.fileName,lineNumber:this.lineNumber,columnNumber:this.columnNumber,stack:this.stack,config:ut.toJSONObject(this.config),code:this.code,status:this.status}}});var AVe=hS.prototype,OVe={};["ERR_BAD_OPTION_VALUE","ERR_BAD_OPTION","ECONNABORTED","ETIMEDOUT","ERR_NETWORK","ERR_FR_TOO_MANY_REDIRECTS","ERR_DEPRECATED","ERR_BAD_RESPONSE","ERR_BAD_REQUEST","ERR_CANCELED","ERR_NOT_SUPPORT","ERR_INVALID_URL"].forEach(e=>{OVe[e]={value:e}});Object.defineProperties(hS,OVe);Object.defineProperty(AVe,"isAxiosError",{value:!0});hS.from=(e,t,r,n,o,i)=>{let a=Object.create(AVe);ut.toFlatObject(e,a,function(y){return y!==Error.prototype},m=>m!=="isAxiosError");let c=e&&e.message?e.message:"Error",h=t==null&&e?e.code:t;return hS.call(a,c,h,r,n,o),e&&a.cause==null&&Object.defineProperty(a,"cause",{value:e,configurable:!0}),a.name=e&&e.name||"Error",i&&Object.assign(a,i),a};var Nn=hS;u();var lj=null;function Mne(e){return ut.isPlainObject(e)||ut.isArray(e)}function DVe(e){return ut.endsWith(e,"[]")?e.slice(0,-2):e}function PVe(e,t,r){return e?e.concat(t).map(function(o,i){return o=DVe(o),!r&&i?"["+o+"]":o}).join(r?".":""):t}function vEr(e){return ut.isArray(e)&&!e.some(Mne)}var yEr=ut.toFlatObject(ut,{},null,function(t){return /^is[A-Z]/.test(t)});function _Er(e,t,r){if(!ut.isObject(e))throw new TypeError("target must be an object");t=t||new(lj||FormData),r=ut.toFlatObject(r,{metaTokens:!0,dots:!1,indexes:!1},!1,function(j,D){return!ut.isUndefined(D[j])});let n=r.metaTokens,o=r.visitor||y,i=r.dots,a=r.indexes,h=(r.Blob||typeof Blob!="undefined"&&Blob)&&ut.isSpecCompliantForm(t);if(!ut.isFunction(o))throw new TypeError("visitor must be a function");function m(P){if(P===null)return"";if(ut.isDate(P))return P.toISOString();if(ut.isBoolean(P))return P.toString();if(!h&&ut.isBlob(P))throw new Nn("Blob is not supported. Use a Buffer instead.");return ut.isArrayBuffer(P)||ut.isTypedArray(P)?h&&typeof Blob=="function"?new Blob([P]):Buffer.from(P):P}function y(P,j,D){let L=P;if(P&&!D&&typeof P=="object"){if(ut.endsWith(j,"{}"))j=n?j:j.slice(0,-2),P=JSON.stringify(P);else if(ut.isArray(P)&&vEr(P)||(ut.isFileList(P)||ut.endsWith(j,"[]"))&&(L=ut.toArray(P)))return j=DVe(j),L.forEach(function(B,G){!(ut.isUndefined(B)||B===null)&&t.append(a===!0?PVe([j],G,i):a===null?j:j+"[]",m(B))}),!1}return Mne(P)?!0:(t.append(PVe(D,j,i),m(P)),!1)}let w=[],E=Object.assign(yEr,{defaultVisitor:y,convertValue:m,isVisitable:Mne});function A(P,j){if(!ut.isUndefined(P)){if(w.indexOf(P)!==-1)throw Error("Circular reference detected in "+j.join("."));w.push(P),ut.forEach(P,function(L,z){(!(ut.isUndefined(L)||L===null)&&o.call(t,L,ut.isString(z)?z.trim():z,j,E))===!0&&A(L,j?j.concat(z):[z])}),w.pop()}}if(!ut.isObject(e))throw new TypeError("data must be an object");return A(e),t}var o0=_Er;function NVe(e){let t={"!":"%21","'":"%27","(":"%28",")":"%29","~":"%7E","%20":"+","%00":"\0"};return encodeURIComponent(e).replace(/[!'()~]|%20|%00/g,function(n){return t[n]})}function LVe(e,t){this._pairs=[],e&&o0(e,this,t)}var kVe=LVe.prototype;kVe.append=function(t,r){this._pairs.push([t,r])};kVe.toString=function(t){let r=t?function(n){return t.call(this,n,NVe)}:NVe;return this._pairs.map(function(o){return r(o[0])+"="+r(o[1])},"").join("&")};var uj=LVe;function bEr(e){return encodeURIComponent(e).replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%20/g,"+")}function CO(e,t,r){if(!t)return e;let n=r&&r.encode||bEr;ut.isFunction(r)&&(r={serialize:r});let o=r&&r.serialize,i;if(o?i=o(t,r):i=ut.isURLSearchParams(t)?t.toString():new uj(t,r).toString(n),i){let a=e.indexOf("#");a!==-1&&(e=e.slice(0,a)),e+=(e.indexOf("?")===-1?"?":"&")+i}return e}u();var Cne=class{constructor(){this.handlers=[]}use(t,r,n){return this.handlers.push({fulfilled:t,rejected:r,synchronous:n?n.synchronous:!1,runWhen:n?n.runWhen:null}),this.handlers.length-1}eject(t){this.handlers[t]&&(this.handlers[t]=null)}clear(){this.handlers&&(this.handlers=[])}forEach(t){ut.forEach(this.handlers,function(n){n!==null&&t(n)})}},Ane=Cne;u();u();u();u();var cj={silentJSONParsing:!0,forcedJSONParsing:!0,clarifyTimeoutError:!1};u();u();u();u();var RVe=typeof URLSearchParams!="undefined"?URLSearchParams:uj;u();var jVe=typeof FormData!="undefined"?FormData:null;u();var qVe=typeof Blob!="undefined"?Blob:null;var zVe={isBrowser:!0,classes:{URLSearchParams:RVe,FormData:jVe,Blob:qVe},protocols:["http","https","file","blob","url","data"]};var Dne={};sw(Dne,{hasBrowserEnv:()=>Pne,hasStandardBrowserEnv:()=>xEr,hasStandardBrowserWebWorkerEnv:()=>wEr,navigator:()=>One,origin:()=>EEr});u();var Pne=typeof window!="undefined"&&typeof document!="undefined",One=typeof navigator=="object"&&navigator||void 0,xEr=Pne&&(!One||["ReactNative","NativeScript","NS"].indexOf(One.product)<0),wEr=typeof WorkerGlobalScope!="undefined"&&self instanceof WorkerGlobalScope&&typeof self.importScripts=="function",EEr=Pne&&window.location.href||"http://localhost";var wa=Te(Te({},Dne),zVe);function Nne(e,t){return o0(e,new wa.classes.URLSearchParams,Te({visitor:function(r,n,o,i){return wa.isNode&&ut.isBuffer(r)?(this.append(n,r.toString("base64")),!1):i.defaultVisitor.apply(this,arguments)}},t))}u();function SEr(e){return ut.matchAll(/\w+|\[(\w*)]/g,e).map(t=>t[0]==="[]"?"":t[1]||t[0])}function TEr(e){let t={},r=Object.keys(e),n,o=r.length,i;for(n=0;n<o;n++)i=r[n],t[i]=e[i];return t}function IEr(e){function t(r,n,o,i){let a=r[i++];if(a==="__proto__")return!0;let c=Number.isFinite(+a),h=i>=r.length;return a=!a&&ut.isArray(o)?o.length:a,h?(ut.hasOwnProp(o,a)?o[a]=[o[a],n]:o[a]=n,!c):((!o[a]||!ut.isObject(o[a]))&&(o[a]=[]),t(r,n,o[a],i)&&ut.isArray(o[a])&&(o[a]=TEr(o[a])),!c)}if(ut.isFormData(e)&&ut.isFunction(e.entries)){let r={};return ut.forEachEntry(e,(n,o)=>{t(SEr(n),o,r,0)}),r}return null}var pj=IEr;function MEr(e,t,r){if(ut.isString(e))try{return(t||JSON.parse)(e),ut.trim(e)}catch(n){if(n.name!=="SyntaxError")throw n}return(r||JSON.stringify)(e)}var Lne={transitional:cj,adapter:["xhr","http","fetch"],transformRequest:[function(t,r){let n=r.getContentType()||"",o=n.indexOf("application/json")>-1,i=ut.isObject(t);if(i&&ut.isHTMLForm(t)&&(t=new FormData(t)),ut.isFormData(t))return o?JSON.stringify(pj(t)):t;if(ut.isArrayBuffer(t)||ut.isBuffer(t)||ut.isStream(t)||ut.isFile(t)||ut.isBlob(t)||ut.isReadableStream(t))return t;if(ut.isArrayBufferView(t))return t.buffer;if(ut.isURLSearchParams(t))return r.setContentType("application/x-www-form-urlencoded;charset=utf-8",!1),t.toString();let c;if(i){if(n.indexOf("application/x-www-form-urlencoded")>-1)return Nne(t,this.formSerializer).toString();if((c=ut.isFileList(t))||n.indexOf("multipart/form-data")>-1){let h=this.env&&this.env.FormData;return o0(c?{"files[]":t}:t,h&&new h,this.formSerializer)}}return i||o?(r.setContentType("application/json",!1),MEr(t)):t}],transformResponse:[function(t){let r=this.transitional||Lne.transitional,n=r&&r.forcedJSONParsing,o=this.responseType==="json";if(ut.isResponse(t)||ut.isReadableStream(t))return t;if(t&&ut.isString(t)&&(n&&!this.responseType||o)){let a=!(r&&r.silentJSONParsing)&&o;try{return JSON.parse(t,this.parseReviver)}catch(c){if(a)throw c.name==="SyntaxError"?Nn.from(c,Nn.ERR_BAD_RESPONSE,this,null,this.response):c}}return t}],timeout:0,xsrfCookieName:"XSRF-TOKEN",xsrfHeaderName:"X-XSRF-TOKEN",maxContentLength:-1,maxBodyLength:-1,env:{FormData:wa.classes.FormData,Blob:wa.classes.Blob},validateStatus:function(t){return t>=200&&t<300},headers:{common:{Accept:"application/json, text/plain, */*","Content-Type":void 0}}};ut.forEach(["delete","get","head","post","put","patch"],e=>{Lne.headers[e]={}});var mS=Lne;u();u();var CEr=ut.toObjectSet(["age","authorization","content-length","content-type","etag","expires","from","host","if-modified-since","if-unmodified-since","last-modified","location","max-forwards","proxy-authorization","referer","retry-after","user-agent"]),FVe=e=>{let t={},r,n,o;return e&&e.split(`
`).forEach(function(a){o=a.indexOf(":"),r=a.substring(0,o).trim().toLowerCase(),n=a.substring(o+1).trim(),!(!r||t[r]&&CEr[r])&&(r==="set-cookie"?t[r]?t[r].push(n):t[r]=[n]:t[r]=t[r]?t[r]+", "+n:n)}),t};var UVe=Symbol("internals");function AO(e){return e&&String(e).trim().toLowerCase()}function fj(e){return e===!1||e==null?e:ut.isArray(e)?e.map(fj):String(e)}function AEr(e){let t=Object.create(null),r=/([^\s,;=]+)\s*(?:=\s*([^,;]+))?/g,n;for(;n=r.exec(e);)t[n[1]]=n[2];return t}var OEr=e=>/^[-_a-zA-Z0-9^`|~,!#$%&'*+.]+$/.test(e.trim());function kne(e,t,r,n,o){if(ut.isFunction(n))return n.call(this,t,r);if(o&&(t=r),!!ut.isString(t)){if(ut.isString(n))return t.indexOf(n)!==-1;if(ut.isRegExp(n))return n.test(t)}}function PEr(e){return e.trim().toLowerCase().replace(/([a-z\d])(\w*)/g,(t,r,n)=>r.toUpperCase()+n)}function DEr(e,t){let r=ut.toCamelCase(" "+t);["get","set","has"].forEach(n=>{Object.defineProperty(e,n+r,{value:function(o,i,a){return this[n].call(this,t,o,i,a)},configurable:!0})})}var gS=class{constructor(t){t&&this.set(t)}set(t,r,n){let o=this;function i(c,h,m){let y=AO(h);if(!y)throw new Error("header name must be a non-empty string");let w=ut.findKey(o,y);(!w||o[w]===void 0||m===!0||m===void 0&&o[w]!==!1)&&(o[w||h]=fj(c))}let a=(c,h)=>ut.forEach(c,(m,y)=>i(m,y,h));if(ut.isPlainObject(t)||t instanceof this.constructor)a(t,r);else if(ut.isString(t)&&(t=t.trim())&&!OEr(t))a(FVe(t),r);else if(ut.isObject(t)&&ut.isIterable(t)){let c={},h,m;for(let y of t){if(!ut.isArray(y))throw TypeError("Object iterator must return a key-value pair");c[m=y[0]]=(h=c[m])?ut.isArray(h)?[...h,y[1]]:[h,y[1]]:y[1]}a(c,r)}else t!=null&&i(r,t,n);return this}get(t,r){if(t=AO(t),t){let n=ut.findKey(this,t);if(n){let o=this[n];if(!r)return o;if(r===!0)return AEr(o);if(ut.isFunction(r))return r.call(this,o,n);if(ut.isRegExp(r))return r.exec(o);throw new TypeError("parser must be boolean|regexp|function")}}}has(t,r){if(t=AO(t),t){let n=ut.findKey(this,t);return!!(n&&this[n]!==void 0&&(!r||kne(this,this[n],n,r)))}return!1}delete(t,r){let n=this,o=!1;function i(a){if(a=AO(a),a){let c=ut.findKey(n,a);c&&(!r||kne(n,n[c],c,r))&&(delete n[c],o=!0)}}return ut.isArray(t)?t.forEach(i):i(t),o}clear(t){let r=Object.keys(this),n=r.length,o=!1;for(;n--;){let i=r[n];(!t||kne(this,this[i],i,t,!0))&&(delete this[i],o=!0)}return o}normalize(t){let r=this,n={};return ut.forEach(this,(o,i)=>{let a=ut.findKey(n,i);if(a){r[a]=fj(o),delete r[i];return}let c=t?PEr(i):String(i).trim();c!==i&&delete r[i],r[c]=fj(o),n[c]=!0}),this}concat(...t){return this.constructor.concat(this,...t)}toJSON(t){let r=Object.create(null);return ut.forEach(this,(n,o)=>{n!=null&&n!==!1&&(r[o]=t&&ut.isArray(n)?n.join(", "):n)}),r}[Symbol.iterator](){return Object.entries(this.toJSON())[Symbol.iterator]()}toString(){return Object.entries(this.toJSON()).map(([t,r])=>t+": "+r).join(`
`)}getSetCookie(){return this.get("set-cookie")||[]}get[Symbol.toStringTag](){return"AxiosHeaders"}static from(t){return t instanceof this?t:new this(t)}static concat(t,...r){let n=new this(t);return r.forEach(o=>n.set(o)),n}static accessor(t){let n=(this[UVe]=this[UVe]={accessors:{}}).accessors,o=this.prototype;function i(a){let c=AO(a);n[c]||(DEr(o,a),n[c]=!0)}return ut.isArray(t)?t.forEach(i):i(t),this}};gS.accessor(["Content-Type","Content-Length","Accept","Accept-Encoding","User-Agent","Authorization"]);ut.reduceDescriptors(gS.prototype,({value:e},t)=>{let r=t[0].toUpperCase()+t.slice(1);return{get:()=>e,set(n){this[r]=n}}});ut.freezeMethods(gS);var Rs=gS;function OO(e,t){let r=this||mS,n=t||r,o=Rs.from(n.headers),i=n.data;return ut.forEach(e,function(c){i=c.call(r,i,o.normalize(),t?t.status:void 0)}),o.normalize(),i}u();function PO(e){return!!(e&&e.__CANCEL__)}u();function BVe(e,t,r){Nn.call(this,e==null?"canceled":e,Nn.ERR_CANCELED,t,r),this.name="CanceledError"}ut.inherits(BVe,Nn,{__CANCEL__:!0});var $h=BVe;u();u();u();function DO(e,t,r){let n=r.config.validateStatus;!r.status||!n||n(r.status)?e(r):t(new Nn("Request failed with status code "+r.status,[Nn.ERR_BAD_REQUEST,Nn.ERR_BAD_RESPONSE][Math.floor(r.status/100)-4],r.config,r.request,r))}u();function Rne(e){let t=/^([-+\w]{1,25})(:?\/\/|:)/.exec(e);return t&&t[1]||""}u();u();function NEr(e,t){e=e||10;let r=new Array(e),n=new Array(e),o=0,i=0,a;return t=t!==void 0?t:1e3,function(h){let m=Date.now(),y=n[i];a||(a=m),r[o]=h,n[o]=m;let w=i,E=0;for(;w!==o;)E+=r[w++],w=w%e;if(o=(o+1)%e,o===i&&(i=(i+1)%e),m-a<t)return;let A=y&&m-y;return A?Math.round(E*1e3/A):void 0}}var VVe=NEr;u();function LEr(e,t){let r=0,n=1e3/t,o,i,a=(m,y=Date.now())=>{r=y,o=null,i&&(clearTimeout(i),i=null),e(...m)};return[(...m)=>{let y=Date.now(),w=y-r;w>=n?a(m,y):(o=m,i||(i=setTimeout(()=>{i=null,a(o)},n-w)))},()=>o&&a(o)]}var GVe=LEr;var vS=(e,t,r=3)=>{let n=0,o=VVe(50,250);return GVe(i=>{let a=i.loaded,c=i.lengthComputable?i.total:void 0,h=a-n,m=o(h),y=a<=c;n=a;let w={loaded:a,total:c,progress:c?a/c:void 0,bytes:h,rate:m||void 0,estimated:m&&c&&y?(c-a)/m:void 0,event:i,lengthComputable:c!=null,[t?"download":"upload"]:!0};e(w)},r)},jne=(e,t)=>{let r=e!=null;return[n=>t[0]({lengthComputable:r,total:e,loaded:n}),t[1]]},qne=e=>(...t)=>ut.asap(()=>e(...t));u();u();var HVe=wa.hasStandardBrowserEnv?((e,t)=>r=>(r=new URL(r,wa.origin),e.protocol===r.protocol&&e.host===r.host&&(t||e.port===r.port)))(new URL(wa.origin),wa.navigator&&/(msie|trident)/i.test(wa.navigator.userAgent)):()=>!0;u();var $Ve=wa.hasStandardBrowserEnv?{write(e,t,r,n,o,i){let a=[e+"="+encodeURIComponent(t)];ut.isNumber(r)&&a.push("expires="+new Date(r).toGMTString()),ut.isString(n)&&a.push("path="+n),ut.isString(o)&&a.push("domain="+o),i===!0&&a.push("secure"),document.cookie=a.join("; ")},read(e){let t=document.cookie.match(new RegExp("(^|;\\s*)("+e+")=([^;]*)"));return t?decodeURIComponent(t[3]):null},remove(e){this.write(e,"",Date.now()-864e5)}}:{write(){},read(){return null},remove(){}};u();u();function zne(e){return /^([a-z][a-z\d+\-.]*:)?\/\//i.test(e)}u();function Fne(e,t){return t?e.replace(/\/?\/$/,"")+"/"+t.replace(/^\/+/,""):e}function NO(e,t,r){let n=!zne(t);return e&&(n||r==!1)?Fne(e,t):t}u();var WVe=e=>e instanceof Rs?Te({},e):e;function Ad(e,t){t=t||{};let r={};function n(m,y,w,E){return ut.isPlainObject(m)&&ut.isPlainObject(y)?ut.merge.call({caseless:E},m,y):ut.isPlainObject(y)?ut.merge({},y):ut.isArray(y)?y.slice():y}function o(m,y,w,E){if(ut.isUndefined(y)){if(!ut.isUndefined(m))return n(void 0,m,w,E)}else return n(m,y,w,E)}function i(m,y){if(!ut.isUndefined(y))return n(void 0,y)}function a(m,y){if(ut.isUndefined(y)){if(!ut.isUndefined(m))return n(void 0,m)}else return n(void 0,y)}function c(m,y,w){if(w in t)return n(m,y);if(w in e)return n(void 0,m)}let h={url:i,method:i,data:i,baseURL:a,transformRequest:a,transformResponse:a,paramsSerializer:a,timeout:a,timeoutMessage:a,withCredentials:a,withXSRFToken:a,adapter:a,responseType:a,xsrfCookieName:a,xsrfHeaderName:a,onUploadProgress:a,onDownloadProgress:a,decompress:a,maxContentLength:a,maxBodyLength:a,beforeRedirect:a,transport:a,httpAgent:a,httpsAgent:a,cancelToken:a,socketPath:a,responseEncoding:a,validateStatus:c,headers:(m,y,w)=>o(WVe(m),WVe(y),w,!0)};return ut.forEach(Object.keys(Te(Te({},e),t)),function(y){let w=h[y]||o,E=w(e[y],t[y],y);ut.isUndefined(E)&&w!==c||(r[y]=E)}),r}var dj=e=>{let t=Ad({},e),{data:r,withXSRFToken:n,xsrfHeaderName:o,xsrfCookieName:i,headers:a,auth:c}=t;if(t.headers=a=Rs.from(a),t.url=CO(NO(t.baseURL,t.url,t.allowAbsoluteUrls),e.params,e.paramsSerializer),c&&a.set("Authorization","Basic "+btoa((c.username||"")+":"+(c.password?unescape(encodeURIComponent(c.password)):""))),ut.isFormData(r)){if(wa.hasStandardBrowserEnv||wa.hasStandardBrowserWebWorkerEnv)a.setContentType(void 0);else if(ut.isFunction(r.getHeaders)){let h=r.getHeaders(),m=["content-type","content-length"];Object.entries(h).forEach(([y,w])=>{m.includes(y.toLowerCase())&&a.set(y,w)})}}if(wa.hasStandardBrowserEnv&&(n&&ut.isFunction(n)&&(n=n(t)),n||n!==!1&&HVe(t.url))){let h=o&&i&&$Ve.read(i);h&&a.set(o,h)}return t};var kEr=typeof XMLHttpRequest!="undefined",YVe=kEr&&function(e){return new Promise(function(r,n){let o=dj(e),i=o.data,a=Rs.from(o.headers).normalize(),{responseType:c,onUploadProgress:h,onDownloadProgress:m}=o,y,w,E,A,P;function j(){A&&A(),P&&P(),o.cancelToken&&o.cancelToken.unsubscribe(y),o.signal&&o.signal.removeEventListener("abort",y)}let D=new XMLHttpRequest;D.open(o.method.toUpperCase(),o.url,!0),D.timeout=o.timeout;function L(){if(!D)return;let B=Rs.from("getAllResponseHeaders"in D&&D.getAllResponseHeaders()),Z={data:!c||c==="text"||c==="json"?D.responseText:D.response,status:D.status,statusText:D.statusText,headers:B,config:e,request:D};DO(function(te){r(te),j()},function(te){n(te),j()},Z),D=null}"onloadend"in D?D.onloadend=L:D.onreadystatechange=function(){!D||D.readyState!==4||D.status===0&&!(D.responseURL&&D.responseURL.indexOf("file:")===0)||setTimeout(L)},D.onabort=function(){D&&(n(new Nn("Request aborted",Nn.ECONNABORTED,e,D)),D=null)},D.onerror=function(G){let Z=G&&G.message?G.message:"Network Error",K=new Nn(Z,Nn.ERR_NETWORK,e,D);K.event=G||null,n(K),D=null},D.ontimeout=function(){let G=o.timeout?"timeout of "+o.timeout+"ms exceeded":"timeout exceeded",Z=o.transitional||cj;o.timeoutErrorMessage&&(G=o.timeoutErrorMessage),n(new Nn(G,Z.clarifyTimeoutError?Nn.ETIMEDOUT:Nn.ECONNABORTED,e,D)),D=null},i===void 0&&a.setContentType(null),"setRequestHeader"in D&&ut.forEach(a.toJSON(),function(G,Z){D.setRequestHeader(Z,G)}),ut.isUndefined(o.withCredentials)||(D.withCredentials=!!o.withCredentials),c&&c!=="json"&&(D.responseType=o.responseType),m&&([E,P]=vS(m,!0),D.addEventListener("progress",E)),h&&D.upload&&([w,A]=vS(h),D.upload.addEventListener("progress",w),D.upload.addEventListener("loadend",A)),(o.cancelToken||o.signal)&&(y=B=>{D&&(n(!B||B.type?new $h(null,e,D):B),D.abort(),D=null)},o.cancelToken&&o.cancelToken.subscribe(y),o.signal&&(o.signal.aborted?y():o.signal.addEventListener("abort",y)));let z=Rne(o.url);if(z&&wa.protocols.indexOf(z)===-1){n(new Nn("Unsupported protocol "+z+":",Nn.ERR_BAD_REQUEST,e));return}D.send(i||null)})};u();u();var REr=(e,t)=>{let{length:r}=e=e?e.filter(Boolean):[];if(t||r){let n=new AbortController,o,i=function(m){if(!o){o=!0,c();let y=m instanceof Error?m:this.reason;n.abort(y instanceof Nn?y:new $h(y instanceof Error?y.message:y))}},a=t&&setTimeout(()=>{a=null,i(new Nn(`timeout ${t} of ms exceeded`,Nn.ETIMEDOUT))},t),c=()=>{e&&(a&&clearTimeout(a),a=null,e.forEach(m=>{m.unsubscribe?m.unsubscribe(i):m.removeEventListener("abort",i)}),e=null)};e.forEach(m=>m.addEventListener("abort",i));let{signal:h}=n;return h.unsubscribe=()=>ut.asap(c),h}},ZVe=REr;u();var jEr=function*(e,t){let r=e.byteLength;if(!t||r<t){yield e;return}let n=0,o;for(;n<r;)o=n+t,yield e.slice(n,o),n=o},qEr=function(e,t){return SV(this,null,function*(){try{for(var r=Qde(zEr(e)),n,o,i;n=!(o=yield new $1(r.next())).done;n=!1){let a=o.value;yield*TV(jEr(a,t))}}catch(o){i=[o]}finally{try{n&&(o=r.return)&&(yield new $1(o.call(r)))}finally{if(i)throw i[0]}}})},zEr=function(e){return SV(this,null,function*(){if(e[Symbol.asyncIterator]){yield*TV(e);return}let t=e.getReader();try{for(;;){let{done:r,value:n}=yield new $1(t.read());if(r)break;yield n}}finally{yield new $1(t.cancel())}})},Une=(e,t,r,n)=>{let o=qEr(e,t),i=0,a,c=m=>{a||(a=!0,n&&n(m))};return new ReadableStream({pull(m){return yt(this,null,function*(){try{let{done:y,value:w}=yield o.next();if(y){c(),m.close();return}let E=w.byteLength;if(r){let A=i+=E;r(A)}m.enqueue(new Uint8Array(w))}catch(y){throw c(y),y}})},cancel(m){return c(m),o.return()}},{highWaterMark:2})};var KVe=64*1024,{isFunction:hj}=ut,FEr=(({Request:e,Response:t})=>({Request:e,Response:t}))(ut.global),{ReadableStream:XVe,TextEncoder:JVe}=ut.global,QVe=(e,...t)=>{try{return!!e(...t)}catch(r){return!1}},UEr=e=>{e=ut.merge.call({skipUndefined:!0},FEr,e);let{fetch:t,Request:r,Response:n}=e,o=t?hj(t):typeof fetch=="function",i=hj(r),a=hj(n);if(!o)return!1;let c=o&&hj(XVe),h=o&&(typeof JVe=="function"?(P=>j=>P.encode(j))(new JVe):P=>yt(null,null,function*(){return new Uint8Array(yield new r(P).arrayBuffer())})),m=i&&c&&QVe(()=>{let P=!1,j=new r(wa.origin,{body:new XVe,method:"POST",get duplex(){return P=!0,"half"}}).headers.has("Content-Type");return P&&!j}),y=a&&c&&QVe(()=>ut.isReadableStream(new n("").body)),w={stream:y&&(P=>P.body)};o&&["text","arrayBuffer","blob","formData","stream"].forEach(P=>{!w[P]&&(w[P]=(j,D)=>{let L=j&&j[P];if(L)return L.call(j);throw new Nn(`Response type '${P}' is not supported`,Nn.ERR_NOT_SUPPORT,D)})});let E=P=>yt(null,null,function*(){if(P==null)return 0;if(ut.isBlob(P))return P.size;if(ut.isSpecCompliantForm(P))return(yield new r(wa.origin,{method:"POST",body:P}).arrayBuffer()).byteLength;if(ut.isArrayBufferView(P)||ut.isArrayBuffer(P))return P.byteLength;if(ut.isURLSearchParams(P)&&(P=P+""),ut.isString(P))return(yield h(P)).byteLength}),A=(P,j)=>yt(null,null,function*(){let D=ut.toFiniteNumber(P.getContentLength());return D==null?E(j):D});return P=>yt(null,null,function*(){let{url:j,method:D,data:L,signal:z,cancelToken:B,timeout:G,onDownloadProgress:Z,onUploadProgress:K,responseType:te,headers:se,withCredentials:le="same-origin",fetchOptions:pe}=dj(P),me=t||fetch;te=te?(te+"").toLowerCase():"text";let _e=ZVe([z,B&&B.toAbortSignal()],G),de=null,Ce=_e&&_e.unsubscribe&&(()=>{_e.unsubscribe()}),Ze;try{if(K&&m&&D!=="get"&&D!=="head"&&(Ze=yield A(se,L))!==0){let Tt=new r(j,{method:"POST",body:L,duplex:"half"}),et;if(ut.isFormData(L)&&(et=Tt.headers.get("content-type"))&&se.setContentType(et),Tt.body){let[pt,ot]=jne(Ze,vS(qne(K)));L=Une(Tt.body,KVe,pt,ot)}}ut.isString(le)||(le=le?"include":"omit");let rt=i&&"credentials"in r.prototype,ct=Dt(Te({},pe),{signal:_e,method:D.toUpperCase(),headers:se.normalize().toJSON(),body:L,duplex:"half",credentials:rt?le:void 0});de=i&&new r(j,ct);let qe=yield i?me(de,pe):me(j,ct),lt=y&&(te==="stream"||te==="response");if(y&&(Z||lt&&Ce)){let Tt={};["status","statusText","headers"].forEach($e=>{Tt[$e]=qe[$e]});let et=ut.toFiniteNumber(qe.headers.get("content-length")),[pt,ot]=Z&&jne(et,vS(qne(Z),!0))||[];qe=new n(Une(qe.body,KVe,pt,()=>{ot&&ot(),Ce&&Ce()}),Tt)}te=te||"text";let _t=yield w[ut.findKey(w,te)||"text"](qe,P);return!lt&&Ce&&Ce(),yield new Promise((Tt,et)=>{DO(Tt,et,{data:_t,headers:Rs.from(qe.headers),status:qe.status,statusText:qe.statusText,config:P,request:de})})}catch(rt){throw Ce&&Ce(),rt&&rt.name==="TypeError"&&/Load failed|fetch/i.test(rt.message)?Object.assign(new Nn("Network Error",Nn.ERR_NETWORK,P,de),{cause:rt.cause||rt}):Nn.from(rt,rt&&rt.code,P,de)}})},BEr=new Map,Bne=e=>{let t=e?e.env:{},{fetch:r,Request:n,Response:o}=t,i=[n,o,r],a=i.length,c=a,h,m,y=BEr;for(;c--;)h=i[c],m=y.get(h),m===void 0&&y.set(h,m=c?new Map:UEr(t)),y=m;return m},K4n=Bne();var Vne={http:lj,xhr:YVe,fetch:{get:Bne}};ut.forEach(Vne,(e,t)=>{if(e){try{Object.defineProperty(e,"name",{value:t})}catch(r){}Object.defineProperty(e,"adapterName",{value:t})}});var eGe=e=>`- ${e}`,GEr=e=>ut.isFunction(e)||e===null||e===!1,mj={getAdapter:(e,t)=>{e=ut.isArray(e)?e:[e];let{length:r}=e,n,o,i={};for(let a=0;a<r;a++){n=e[a];let c;if(o=n,!GEr(n)&&(o=Vne[(c=String(n)).toLowerCase()],o===void 0))throw new Nn(`Unknown adapter '${c}'`);if(o&&(ut.isFunction(o)||(o=o.get(t))))break;i[c||"#"+a]=o}if(!o){let a=Object.entries(i).map(([h,m])=>`adapter ${h} `+(m===!1?"is not supported by the environment":"is not available in the build")),c=r?a.length>1?`since :
`+a.map(eGe).join(`
`):" "+eGe(a[0]):"as no adapter specified";throw new Nn("There is no suitable adapter to dispatch the request "+c,"ERR_NOT_SUPPORT")}return o},adapters:Vne};function Gne(e){if(e.cancelToken&&e.cancelToken.throwIfRequested(),e.signal&&e.signal.aborted)throw new $h(null,e)}function gj(e){return Gne(e),e.headers=Rs.from(e.headers),e.data=OO.call(e,e.transformRequest),["post","put","patch"].indexOf(e.method)!==-1&&e.headers.setContentType("application/x-www-form-urlencoded",!1),mj.getAdapter(e.adapter||mS.adapter,e)(e).then(function(n){return Gne(e),n.data=OO.call(e,e.transformResponse,n),n.headers=Rs.from(n.headers),n},function(n){return PO(n)||(Gne(e),n&&n.response&&(n.response.data=OO.call(e,e.transformResponse,n.response),n.response.headers=Rs.from(n.response.headers))),Promise.reject(n)})}u();u();var vj="1.12.2";var yj={};["object","boolean","number","function","string","symbol"].forEach((e,t)=>{yj[e]=function(n){return typeof n===e||"a"+(t<1?"n ":" ")+e}});var tGe={};yj.transitional=function(t,r,n){function o(i,a){return"[Axios v"+vj+"] Transitional option '"+i+"'"+a+(n?". "+n:"")}return(i,a,c)=>{if(t===!1)throw new Nn(o(a," has been removed"+(r?" in "+r:"")),Nn.ERR_DEPRECATED);return r&&!tGe[a]&&(tGe[a]=!0,console.warn(o(a," has been deprecated since v"+r+" and will be removed in the near future"))),t?t(i,a,c):!0}};yj.spelling=function(t){return(r,n)=>(console.warn(`${n} is likely a misspelling of ${t}`),!0)};function HEr(e,t,r){if(typeof e!="object")throw new Nn("options must be an object",Nn.ERR_BAD_OPTION_VALUE);let n=Object.keys(e),o=n.length;for(;o-->0;){let i=n[o],a=t[i];if(a){let c=e[i],h=c===void 0||a(c,i,e);if(h!==!0)throw new Nn("option "+i+" must be "+h,Nn.ERR_BAD_OPTION_VALUE);continue}if(r!==!0)throw new Nn("Unknown option "+i,Nn.ERR_BAD_OPTION)}}var LO={assertOptions:HEr,validators:yj};var Wh=LO.validators,yS=class{constructor(t){this.defaults=t||{},this.interceptors={request:new Ane,response:new Ane}}request(t,r){return yt(this,null,function*(){try{return yield this._request(t,r)}catch(n){if(n instanceof Error){let o={};Error.captureStackTrace?Error.captureStackTrace(o):o=new Error;let i=o.stack?o.stack.replace(/^.+\n/,""):"";try{n.stack?i&&!String(n.stack).endsWith(i.replace(/^.+\n.+\n/,""))&&(n.stack+=`
`+i):n.stack=i}catch(a){}}throw n}})}_request(t,r){typeof t=="string"?(r=r||{},r.url=t):r=t||{},r=Ad(this.defaults,r);let{transitional:n,paramsSerializer:o,headers:i}=r;n!==void 0&&LO.assertOptions(n,{silentJSONParsing:Wh.transitional(Wh.boolean),forcedJSONParsing:Wh.transitional(Wh.boolean),clarifyTimeoutError:Wh.transitional(Wh.boolean)},!1),o!=null&&(ut.isFunction(o)?r.paramsSerializer={serialize:o}:LO.assertOptions(o,{encode:Wh.function,serialize:Wh.function},!0)),r.allowAbsoluteUrls!==void 0||(this.defaults.allowAbsoluteUrls!==void 0?r.allowAbsoluteUrls=this.defaults.allowAbsoluteUrls:r.allowAbsoluteUrls=!0),LO.assertOptions(r,{baseUrl:Wh.spelling("baseURL"),withXsrfToken:Wh.spelling("withXSRFToken")},!0),r.method=(r.method||this.defaults.method||"get").toLowerCase();let a=i&&ut.merge(i.common,i[r.method]);i&&ut.forEach(["delete","get","head","post","put","patch","common"],P=>{delete i[P]}),r.headers=Rs.concat(a,i);let c=[],h=!0;this.interceptors.request.forEach(function(j){typeof j.runWhen=="function"&&j.runWhen(r)===!1||(h=h&&j.synchronous,c.unshift(j.fulfilled,j.rejected))});let m=[];this.interceptors.response.forEach(function(j){m.push(j.fulfilled,j.rejected)});let y,w=0,E;if(!h){let P=[gj.bind(this),void 0];for(P.unshift(...c),P.push(...m),E=P.length,y=Promise.resolve(r);w<E;)y=y.then(P[w++],P[w++]);return y}E=c.length;let A=r;for(;w<E;){let P=c[w++],j=c[w++];try{A=P(A)}catch(D){j.call(this,D);break}}try{y=gj.call(this,A)}catch(P){return Promise.reject(P)}for(w=0,E=m.length;w<E;)y=y.then(m[w++],m[w++]);return y}getUri(t){t=Ad(this.defaults,t);let r=NO(t.baseURL,t.url,t.allowAbsoluteUrls);return CO(r,t.params,t.paramsSerializer)}};ut.forEach(["delete","get","head","options"],function(t){yS.prototype[t]=function(r,n){return this.request(Ad(n||{},{method:t,url:r,data:(n||{}).data}))}});ut.forEach(["post","put","patch"],function(t){function r(n){return function(i,a,c){return this.request(Ad(c||{},{method:t,headers:n?{"Content-Type":"multipart/form-data"}:{},url:i,data:a}))}}yS.prototype[t]=r(),yS.prototype[t+"Form"]=r(!0)});var kO=yS;u();var Hne=class e{constructor(t){if(typeof t!="function")throw new TypeError("executor must be a function.");let r;this.promise=new Promise(function(i){r=i});let n=this;this.promise.then(o=>{if(!n._listeners)return;let i=n._listeners.length;for(;i-->0;)n._listeners[i](o);n._listeners=null}),this.promise.then=o=>{let i,a=new Promise(c=>{n.subscribe(c),i=c}).then(o);return a.cancel=function(){n.unsubscribe(i)},a},t(function(i,a,c){n.reason||(n.reason=new $h(i,a,c),r(n.reason))})}throwIfRequested(){if(this.reason)throw this.reason}subscribe(t){if(this.reason){t(this.reason);return}this._listeners?this._listeners.push(t):this._listeners=[t]}unsubscribe(t){if(!this._listeners)return;let r=this._listeners.indexOf(t);r!==-1&&this._listeners.splice(r,1)}toAbortSignal(){let t=new AbortController,r=n=>{t.abort(n)};return this.subscribe(r),t.signal.unsubscribe=()=>this.unsubscribe(r),t.signal}static source(){let t;return{token:new e(function(o){t=o}),cancel:t}}},rGe=Hne;u();function $ne(e){return function(r){return e.apply(null,r)}}u();function Wne(e){return ut.isObject(e)&&e.isAxiosError===!0}u();var Yne={Continue:100,SwitchingProtocols:101,Processing:102,EarlyHints:103,Ok:200,Created:201,Accepted:202,NonAuthoritativeInformation:203,NoContent:204,ResetContent:205,PartialContent:206,MultiStatus:207,AlreadyReported:208,ImUsed:226,MultipleChoices:300,MovedPermanently:301,Found:302,SeeOther:303,NotModified:304,UseProxy:305,Unused:306,TemporaryRedirect:307,PermanentRedirect:308,BadRequest:400,Unauthorized:401,PaymentRequired:402,Forbidden:403,NotFound:404,MethodNotAllowed:405,NotAcceptable:406,ProxyAuthenticationRequired:407,RequestTimeout:408,Conflict:409,Gone:410,LengthRequired:411,PreconditionFailed:412,PayloadTooLarge:413,UriTooLong:414,UnsupportedMediaType:415,RangeNotSatisfiable:416,ExpectationFailed:417,ImATeapot:418,MisdirectedRequest:421,UnprocessableEntity:422,Locked:423,FailedDependency:424,TooEarly:425,UpgradeRequired:426,PreconditionRequired:428,TooManyRequests:429,RequestHeaderFieldsTooLarge:431,UnavailableForLegalReasons:451,InternalServerError:500,NotImplemented:501,BadGateway:502,ServiceUnavailable:503,GatewayTimeout:504,HttpVersionNotSupported:505,VariantAlsoNegotiates:506,InsufficientStorage:507,LoopDetected:508,NotExtended:510,NetworkAuthenticationRequired:511};Object.entries(Yne).forEach(([e,t])=>{Yne[t]=e});var nGe=Yne;function oGe(e){let t=new kO(e),r=SO(kO.prototype.request,t);return ut.extend(r,kO.prototype,t,{allOwnKeys:!0}),ut.extend(r,t,null,{allOwnKeys:!0}),r.create=function(o){return oGe(Ad(e,o))},r}var vs=oGe(mS);vs.Axios=kO;vs.CanceledError=$h;vs.CancelToken=rGe;vs.isCancel=PO;vs.VERSION=vj;vs.toFormData=o0;vs.AxiosError=Nn;vs.Cancel=vs.CanceledError;vs.all=function(t){return Promise.all(t)};vs.spread=$ne;vs.isAxiosError=Wne;vs.mergeConfig=Ad;vs.AxiosHeaders=Rs;vs.formToJSON=e=>pj(ut.isHTMLForm(e)?new FormData(e):e);vs.getAdapter=mj.getAdapter;vs.HttpStatusCode=nGe;vs.default=vs;var Za=vs;var{Axios:aLn,AxiosError:sLn,CanceledError:lLn,isCancel:uLn,CancelToken:cLn,VERSION:pLn,all:fLn,Cancel:dLn,isAxiosError:hLn,spread:mLn,toFormData:gLn,AxiosHeaders:vLn,HttpStatusCode:yLn,formToJSON:_Ln,getAdapter:bLn,mergeConfig:xLn}=Za;u();var Od=ee(RO(),1);u();var $Er="vkf-unique-control-panel",Jne="basemap-selector",Xne=class{constructor(){St(this,"id",Jne)}onAdd(t){this._map=t;let r=`maplibregl-ctrl maplibregl-ctrl-group basemap-selector ${$Er}`,n=document.createElement("div");return n.className=r,this._container=n,n}onRemove(){this._container.parentNode.removeChild(this._container),this._map=void 0}},aGe=Xne;u();var W_=ee(gGe(),1);u();var vGe=(e,t="control-feedback-container")=>{let r=document.getElementById(t);if(r===null){let n=e.getCanvasContainer();r=document.createElement("div"),r.id=t,n.appendChild(r)}return r};var _j=3,yGe=e=>`${(0,W_.default)(e[0],7)},${(0,W_.default)(e[1],7)}`,bj=class{constructor(){St(this,"buttonCopyPosition");St(this,"textElCurrentPosition");St(this,"textElSavedPosition");St(this,"targetEl");St(this,"_container");St(this,"_button");St(this,"savedPosition");St(this,"generateSavedText",()=>{if(this.savedPosition===void 0)return this.buttonCopyPosition!==void 0&&(this.buttonCopyPosition.style.display="none"),fe("control-mouseposition-save-helper");{let t=fe("control-mouseposition-saved-label");return this.buttonCopyPosition!==void 0&&(this.buttonCopyPosition.style.display="block"),t+": Lon: "+(0,W_.default)(this.savedPosition[0],_j)+" Lat: "+(0,W_.default)(this.savedPosition[1],_j)}});St(this,"savePosition",t=>{if(this._map){let r=t.lngLat.toArray();this.savedPosition=r.slice(),navigator.clipboard.writeText(yGe(r)),this.updatePosition(t)}});St(this,"updatePosition",t=>{let r=this.textElCurrentPosition,n=this.textElSavedPosition,{lngLat:o}=t;r.innerHTML="Lon: "+(0,W_.default)(o.lng,_j)+", Lat: "+(0,W_.default)(o.lat,_j),n.innerHTML=this.generateSavedText()});St(this,"handleCopyButtonClick",t=>{t.preventDefault(),t.stopPropagation();let r=this.savedPosition;r!==void 0&&navigator.clipboard.writeText(yGe(r)),t.target.blur()});St(this,"toggleMousePosition",t=>{t.preventDefault();let r="active",n=this._button.classList.contains(r),o=this._map;if(!o)return;this._button.classList.toggle(r);let i=this.targetEl,a=vGe(o);if(this.targetEl===void 0){i=document.createElement("div"),i.className="ol-control ol-mouse-position-box";let c=document.createElement("p");this.textElCurrentPosition=c;let h=document.createElement("p");this.textElSavedPosition=h;let m=document.createElement("button");m.id="position-copy-to-clipboard",m.innerHTML="<span class=\"glyphicon glyphicon-copy\"></span>",m.title=fe("control-mouseposition-button-title"),this.buttonCopyPosition=m,m.addEventListener("click",this.handleCopyButtonClick);let y=document.createElement("div");y.className="saved-position-container",y.appendChild(h),y.appendChild(m),i.appendChild(c),i.appendChild(y),a.appendChild(i),this.targetEl=i}else this.textElCurrentPosition.innerHTML="",this.textElSavedPosition.innerHTML="";n?(o.off("mousemove",this.updatePosition),o.off("click",this.savePosition)):(this.savedPosition=void 0,o.on("mousemove",this.updatePosition),o.on("click",this.savePosition)),this.updatePosition({lngLat:o.unproject([t.clientX,t.clientY])}),i.classList.toggle(r),a.classList.toggle(`mouseposition-${r}`)})}onAdd(t){this._map=t;let r=document.createElement("div");r.className="maplibregl-ctrl maplibregl-ctrl-group";let n=document.createElement("button");return n.title=fe("control-mouseposition-title"),n.className="maplibregl-ctrl-mouse-position",n.type="button",r.appendChild(n),this._container=r,this._button=n,n.addEventListener("click",this.toggleMousePosition,!1),this._container}onRemove(){this._map.off("mousemove",this.updatePosition),this._map.off("click",this.savePosition),this._map=null,this._container.parentNode.removeChild(this._container)}};u();u();function _Ge(e,t){for(let r of e)typeof t[r]=="function"&&(t[r]=t[r].bind(t))}function _S(e,t,r){let n=window.document.createElement(e);return t!==void 0&&(n.className=t),r&&r.appendChild(n),n}function bGe(e){e.parentNode&&e.parentNode.removeChild(e)}var toe="permalink-control",eoe=class{constructor(){St(this,"id",toe)}onAdd(t){return this._map=t,this._container=_S("div","maplibregl-ctrl maplibregl-ctrl-group permalink-control"),this._container}onRemove(){this._container.parentNode.removeChild(this._container),this._map=void 0}},xGe=eoe;u();u();u();var i0="vkf-terrain";var wGe=new Set(["fill-opacity","line-opacity","circle-opacity","icon-opacity","text-opacity","raster-opacity"]),EGe=new Set(["visibility"]),Ic={None:"NONE",BasemapSelector:"BASEMAP_SELECTOR",Permalink:"PERMALINK"},ys={controlAdded:"controlAdded",controlRemoved:"controlRemoved",opacityChanged:"opacityChanged",visibilityChanged:"visibilityChanged"};u();function roe(e,t){return new Promise(function(r){let n=()=>{r(!1)},o=()=>{t.signal.removeEventListener("abort",n)};t.signal.addEventListener("abort",n,{once:!0}),e.once("moveend",()=>{r(!0),o()}),e.once("touchstart",()=>{r(!1),o()}),e.once("mousedown",()=>{r(!1),o()}),e.flyTo(t)})}function SGe(e){return new Promise(t=>setTimeout(t,e))}var TGe=ee(RO(),1);var a0="vkf.globemodechange",xj=class extends TGe.Map{constructor(){super(...arguments);St(this,"terrainConfiguration",mr.getTerrain());St(this,"terrainExaggeration",this.terrainConfiguration.exaggeration);St(this,"isVkfGlobeModeEnabledFlag",!1);St(this,"abortController",new AbortController);St(this,"minZoomLevelForTerrain",12);St(this,"minZoomLevelForPitchAnimation",4)}enableVkfGlobeMode(){this.isVkfGlobeModeEnabledFlag=!0,this.fire(a0),this.on("zoomend",this._handleZoomBasedTerrainEnabling);let r=()=>{roe(this,this._getFlyToOptions(60)).then(()=>SGe(500)).then(()=>{this._growTerrain(this.terrainExaggeration)})},n=this.getZoom();if(n>this.minZoomLevelForPitchAnimation){if(n>=this.minZoomLevelForTerrain){this._enableTerrain(r),this.setProjection({type:"mercator"});return}this.setProjection({type:"globe"}),this.flyTo(this._getFlyToOptions(60))}else this.setProjection({type:"globe"})}disableVkfGlobeMode(){this.isVkfGlobeModeEnabledFlag=!1,this.fire(a0),this.off("zoomend",this._handleZoomBasedTerrainEnabling);let r=()=>{roe(this,this._getFlyToOptions(0))};if(this.terrain){this._disableTerrain(r),this.setProjection({type:"mercator"});return}this.flyTo(this._getFlyToOptions(0)),this.setProjection({type:"mercator"})}isVkfGlobeModeEnabled(){return this.isVkfGlobeModeEnabledFlag}_growTerrain(r,n=1e3){if(!this.terrain)return;let o=performance.now(),i=this.terrain.exaggeration,a=r-i,c=()=>{if(!this.terrain||this.terrainFlattening)return;let h=(performance.now()-o)/n;if(h<.99){let m=1-ig(1-h,4),y=i+m*a;this.terrain.exaggeration=y,requestAnimationFrame(c)}else this.terrainGrowing=!1,this.terrainFlattening=!1,this.terrain.exaggeration=r;this._elevationFreeze=!1,this.triggerRepaint()};this.terrainGrowing=!0,this.terrainFlattening=!1,requestAnimationFrame(c)}_maybeDispatchGrowTerrain(r){let n=i=>yt(this,null,function*(){!this.terrain||i.type!=="data"||i.dataType!=="source"||!("source"in i)||i.sourceId!==i0||i.source.type!=="raster-dem"||i.isSourceLoaded&&(this.off("data",n),r())});this.getSource(i0).loaded()?r():this.on("data",n)}_addTerrainSource(){this.addSource(i0,{attribution:this.terrainConfiguration.attribution,type:"raster-dem",tiles:[this.terrainConfiguration.url],tileSize:256,minzoom:this.terrainConfiguration.minZoom,maxzoom:this.terrainConfiguration.maxZoom,encoding:"terrarium"}),this.setTerrain({source:i0,exaggeration:0})}_enableTerrain(r){let n=this.terrainExaggeration;if(n<0){console.warn("Terrain exaggeration cannot be negative.");return}if(this.getTerrain()){this._growTerrain(n);return}this.loaded()||this.isVkfGlobeModeEnabled()?(this._addTerrainSource(),this._maybeDispatchGrowTerrain(r)):this.once("load",()=>{this.getTerrain()&&this.getSource(i0)||(this._addTerrainSource(),this._maybeDispatchGrowTerrain(r))})}_disableTerrain(r=()=>{}){if(!this.terrain)return;let n=1*1e3,o=performance.now(),i=this.terrain.exaggeration,a=()=>{if(!this.terrain||this.terrainGrowing)return;let c=(performance.now()-o)/n;if(this._elevationFreeze=!1,c<.99){let h=ig(1-c,4),m=i*h;this.terrain.exaggeration=m,requestAnimationFrame(a)}else this.terrain.exaggeration=0,this.terrainGrowing=!1,this.terrainFlattening=!1,this.setTerrain(),this.getSource(i0)&&this.removeSource(i0),r();this.triggerRepaint()};this.terrainGrowing=!1,this.terrainFlattening=!0,requestAnimationFrame(a)}_getFlyToOptions(r){return this.abortController.abort(),this.abortController=new AbortController,{signal:this.abortController.signal,pitch:r,duration:700}}_handleZoomBasedTerrainEnabling(){if(this.getZoom()>=this.minZoomLevelForTerrain){this._enableTerrain(()=>{this._growTerrain(this.terrainExaggeration),this.setProjection({type:"mercator"})});return}this._disableTerrain(()=>{this.setProjection({type:"globe"})})}};var wj=class{constructor(){St(this,"_map");St(this,"_container");St(this,"_button");_Ge(["_toggleState","_updateIcon","_toggleProjection"],this)}onAdd(t){return this._map=t,this._container=_S("div","maplibregl-ctrl maplibregl-ctrl-group"),this._button=_S("button","maplibregl-ctrl-terrain",this._container),_S("span","maplibregl-ctrl-icon",this._button).setAttribute("aria-hidden","true"),this._button.type="button",this._button.addEventListener("click",this._toggleState),this._updateIcon(),this._map.on(a0,this._updateIcon),this._container}onRemove(){bGe(this._container),this._map.off(a0,this._updateIcon),this._map=void 0}_isVkfGlobeModeEnabled(){return this._map.isVkfGlobeModeEnabled()}_toggleState(){this._isVkfGlobeModeEnabled()?this._map.disableVkfGlobeMode():this._map.enableVkfGlobeMode(),this._updateIcon()}_updateIcon(){this._button.classList.remove("maplibregl-ctrl-vkf-globe-mode"),this._button.classList.remove("maplibregl-ctrl-vkf-globe-mode-enabled"),this._isVkfGlobeModeEnabled()?(this._button.classList.add("maplibregl-ctrl-vkf-globe-mode-enabled"),this._button.title=this._map._getUIString("VkfGlobeModeControl.Disable")):(this._button.classList.add("maplibregl-ctrl-vkf-globe-mode"),this._button.title=this._map._getUIString("VkfGlobeModeControl.Enable"))}};function Me(e){return e!=null}function bS(e){return typeof e=="string"||e instanceof String}function _p(e){let t;try{t=new URL(e)}catch(r){return!1}return t.protocol==="http:"||t.protocol==="https:"}function fe(e){let t=mr.getLanguageDict();if(t===void 0)throw new Error("Dictionary is undefined.");let r=t[e];return r===void 0?(console.warn(`Translation for key "${e}" was not found in dictionary.`),""):r}var IGe=()=>[{position:"top-left",control:new Od.NavigationControl({showZoom:!0,showCompass:!1,visualizePitch:!1})},{position:"top-left",control:new Od.FullscreenControl({container:document.body})},{position:"top-left",control:new Od.NavigationControl({showZoom:!1,showCompass:!0,visualizePitch:!0})},{position:"top-left",control:new bj},{position:"top-left",control:new wj},{position:"top-left",control:new aGe},{position:"top-left",control:new Od.GeolocateControl({trackUserLocation:!0})},{position:"top-left",control:new xGe},{position:"bottom-right",control:new Od.AttributionControl({compact:!0})},{position:"bottom-right",control:new Od.ScaleControl({maxWidth:137})}];var gf={EN:"en",DE:"de"},fSr=Me(_.env.DEV_MODE_SECRET)&&_.env.DEV_MODE_SECRET!==""&&Me(_.env.DEV_MODE_NAME)&&_.env.DEV_MODE_NAME!=="",Ej=()=>({"Dev-Mode-Secret":_.env.DEV_MODE_SECRET,"Dev-Mode-Name":_.env.DEV_MODE_NAME}),Fu={BASEMAPS:[{id:"slub-osm",label:"SLUB OSM",urls:["https://tile-2.kartenforum.slub-dresden.de/styles/maptiler-basic-v2/style.json"],type:"vector",tileSize:512},{id:"bkg-topoplus",label:"BKG TopPlusOpen",urls:["https://sgx.geodatenzentrum.de/wms_topplus_open"],type:"wms",layers:"web",tileSize:512}],ENABLE_TILE_PRELOADING:!1,LANGUAGE_CODE:gf.EN,MARKER_IMAGE_ID:"marker",USERNAME:"anonymous",USER_ISAUTHENTICATED:!1,USER_ROLE:null},mr={axiosApiInstance:null,appendSettings(e){Fu=Object.assign({},Fu,e)},isDebug(){var e;return!!((e=_==null?void 0:_.env)!=null&&e.VKF_DEBUG)},getSettings(){return Fu},getBaseMaps(){return Fu.BASEMAPS},getDefaultBaseMapUrls(){return["https://tile-1.kartenforum.slub-dresden.de/styles/maptiler-basic-v2/{z}/{x}/{y}.png","https://tile-2.kartenforum.slub-dresden.de/styles/maptiler-basic-v2/{z}/{x}/{y}.png"]},getDefaultMapView(){return Object.assign({center:[14.9928,51.1463],zoom:6.3,maxZoom:19,minZoom:0},Fu.MAPVIEW_PARAMS)},getLanguageDict(){return Fu.dictionary},getMin3DZoomLevel(){return 9},getNominatimUrl(){return Fu.NOMINATIM_URL},getTerrain(){return Object.assign({url:"https://terrain.kartenforum.slub-dresden.de/v2/{z}/{x}/{y}.png",attribution:"<a href='https://kartenforum.slub-dresden.de/attribution' target='_blank'>\xA9 U.S. Geological Survey and others</a>",exaggeration:1,minZoom:0,maxZoom:12},Fu.TERRAIN_TILES)},getUsername(){return Fu.USERNAME},isUserAuthenticated(){return Fu.USER_ISAUTHENTICATED===!0},updateSettings(e){Fu=e},_initAxiosApiInstance(){let e=Fu.API_GEOREFERENCE_BASEURL,t=bS(e)&&e.length===0;if(!Me(e)||t)throw new Error("The URL for the georeference service is not set.");let r=Object.assign({baseURL:e,withCredentials:!0},fSr?{headers:{get:Ej(),post:Ej(),put:Ej(),delete:Ej()}}:{});this.axiosApiInstance=Za.create(r)},getGeoreferenceApiClient(){return Me(this.axiosApiInstance)?this.axiosApiInstance:(this._initAxiosApiInstance(),this.axiosApiInstance)},getMarkerSettings(){let e=Fu.MARKER_URL;if(!Me(e))throw new Error("The marker icon url is not set.");return{id:Fu.MARKER_IMAGE_ID,url:e}},getUserRole(){return Fu.USER_ROLE}};u();var Ti={NONE:0,FEATURE:1,METADATA:2,HISTORY:3},Cc={NONE:0,METADATA:1},Mc={HORIZONTAL:"HORIZONTAL",VERTICAL:"VERTICAL"},Qs={STANDARD:"STANDARD",DRAW:"DRAW",VECTOR_MAP_EXTERNAL:"VECTOR_MAP_EXTERNAL"},dSr={EXTRA_SMALL:600,SMALL:600,MEDIUM:768,LARGE:992},MGe=e=>e>=dSr.LARGE?Mc.HORIZONTAL:Mc.VERTICAL,CGe=e=>{switch(e){case Mc.HORIZONTAL:default:return"ol-map-large";case Mc.VERTICAL:return"ol-map-small"}};u();u();u();u();u();u();var Ue={id:"id",timeChanged:"time_changed",title:"title",thumbnailUrl:"thumb_url",bounds:"bounds",hasGeoReference:"has_georeference",tmsUrls:"tms_urls",onlineResources:"online_resources",mapScale:"map_scale",rawMapIds:"raw_map_ids",name:"name",description:"description",timePeriod:"time_period",externalContentUrl:"external_content_url",externalContentType:"external_content_type",type:"type",vectorMapId:"vector_map_id",version:"version",userRole:"user_role"},bp={id:"vkf:layer_id",contentType:"vkf:content_type"},Uu={VKF:"vkf:geojson-spec-v1",IDOHIST:"idohist:idohist-v1"},mo={HISTORIC_MAP:"historic_map",MOSAIC_MAP:"mosaic",VECTOR_MAP:"vector",LEGACY_GEOJSON:"geojson"},Ng={VISIBLE:"visible",NONE:"none"};u();u();u();var hSr=Math.pow(10,8)*24*60*60*1e3,W3n=-hSr,Sj=6048e5,AGe=864e5,jO=6e4,qO=36e5,OGe=1e3;var mSr=3600;var PGe=mSr*24,Y3n=PGe*7,gSr=PGe*365.2425,vSr=gSr/12,Z3n=vSr*3,noe=Symbol.for("constructDateFrom");function Mo(e,t){return typeof e=="function"?e(t):e&&typeof e=="object"&&noe in e?e[noe](t):e instanceof Date?new e.constructor(t):new Date(t)}u();function Ln(e,t){return Mo(t||e,e)}function Tj(e,t,r){let n=Ln(e,r==null?void 0:r.in);return isNaN(t)?Mo((r==null?void 0:r.in)||e,NaN):(t&&n.setDate(n.getDate()+t),n)}u();u();u();u();var ySr={};function vf(){return ySr}function Ac(e,t){var c,h,m,y,w,E,A,P;let r=vf(),n=(P=(A=(y=(m=t==null?void 0:t.weekStartsOn)!=null?m:(h=(c=t==null?void 0:t.locale)==null?void 0:c.options)==null?void 0:h.weekStartsOn)!=null?y:r.weekStartsOn)!=null?A:(E=(w=r.locale)==null?void 0:w.options)==null?void 0:E.weekStartsOn)!=null?P:0,o=Ln(e,t==null?void 0:t.in),i=o.getDay(),a=(i<n?7:0)+i-n;return o.setDate(o.getDate()-a),o.setHours(0,0,0,0),o}function Pd(e,t){return Ac(e,Dt(Te({},t),{weekStartsOn:1}))}function Ij(e,t){let r=Ln(e,t==null?void 0:t.in),n=r.getFullYear(),o=Mo(r,0);o.setFullYear(n+1,0,4),o.setHours(0,0,0,0);let i=Pd(o),a=Mo(r,0);a.setFullYear(n,0,4),a.setHours(0,0,0,0);let c=Pd(a);return r.getTime()>=i.getTime()?n+1:r.getTime()>=c.getTime()?n:n-1}u();u();function Y_(e){let t=Ln(e),r=new Date(Date.UTC(t.getFullYear(),t.getMonth(),t.getDate(),t.getHours(),t.getMinutes(),t.getSeconds(),t.getMilliseconds()));return r.setUTCFullYear(t.getFullYear()),+e-+r}u();function Mj(e,...t){let r=Mo.bind(null,e||t.find(n=>typeof n=="object"));return t.map(r)}u();function zO(e,t){let r=Ln(e,t==null?void 0:t.in);return r.setHours(0,0,0,0),r}function DGe(e,t,r){let[n,o]=Mj(r==null?void 0:r.in,e,t),i=zO(n),a=zO(o),c=+i-Y_(i),h=+a-Y_(a);return Math.round((c-h)/AGe)}u();function NGe(e,t){let r=Ij(e,t),n=Mo((t==null?void 0:t.in)||e,0);return n.setFullYear(r,0,4),n.setHours(0,0,0,0),Pd(n)}u();u();function LGe(e){return e instanceof Date||typeof e=="object"&&Object.prototype.toString.call(e)==="[object Date]"}function Cj(e){return!(!LGe(e)&&typeof e!="number"||isNaN(+Ln(e)))}u();function kGe(e,t){let r=Ln(e,t==null?void 0:t.in);return r.setFullYear(r.getFullYear(),0,1),r.setHours(0,0,0,0),r}u();u();u();u();var _Sr={lessThanXSeconds:{one:"less than a second",other:"less than {{count}} seconds"},xSeconds:{one:"1 second",other:"{{count}} seconds"},halfAMinute:"half a minute",lessThanXMinutes:{one:"less than a minute",other:"less than {{count}} minutes"},xMinutes:{one:"1 minute",other:"{{count}} minutes"},aboutXHours:{one:"about 1 hour",other:"about {{count}} hours"},xHours:{one:"1 hour",other:"{{count}} hours"},xDays:{one:"1 day",other:"{{count}} days"},aboutXWeeks:{one:"about 1 week",other:"about {{count}} weeks"},xWeeks:{one:"1 week",other:"{{count}} weeks"},aboutXMonths:{one:"about 1 month",other:"about {{count}} months"},xMonths:{one:"1 month",other:"{{count}} months"},aboutXYears:{one:"about 1 year",other:"about {{count}} years"},xYears:{one:"1 year",other:"{{count}} years"},overXYears:{one:"over 1 year",other:"over {{count}} years"},almostXYears:{one:"almost 1 year",other:"almost {{count}} years"}},RGe=(e,t,r)=>{let n,o=_Sr[e];return typeof o=="string"?n=o:t===1?n=o.one:n=o.other.replace("{{count}}",t.toString()),r!=null&&r.addSuffix?r.comparison&&r.comparison>0?"in "+n:n+" ago":n};u();u();function Aj(e){return(t={})=>{let r=t.width?String(t.width):e.defaultWidth;return e.formats[r]||e.formats[e.defaultWidth]}}var bSr={full:"EEEE, MMMM do, y",long:"MMMM do, y",medium:"MMM d, y",short:"MM/dd/yyyy"},xSr={full:"h:mm:ss a zzzz",long:"h:mm:ss a z",medium:"h:mm:ss a",short:"h:mm a"},wSr={full:"{{date}} 'at' {{time}}",long:"{{date}} 'at' {{time}}",medium:"{{date}}, {{time}}",short:"{{date}}, {{time}}"},jGe={date:Aj({formats:bSr,defaultWidth:"full"}),time:Aj({formats:xSr,defaultWidth:"full"}),dateTime:Aj({formats:wSr,defaultWidth:"full"})};u();var ESr={lastWeek:"'last' eeee 'at' p",yesterday:"'yesterday at' p",today:"'today at' p",tomorrow:"'tomorrow at' p",nextWeek:"eeee 'at' p",other:"P"},qGe=(e,t,r,n)=>ESr[e];u();u();function xS(e){return(t,r)=>{let n=r!=null&&r.context?String(r.context):"standalone",o;if(n==="formatting"&&e.formattingValues){let a=e.defaultFormattingWidth||e.defaultWidth,c=r!=null&&r.width?String(r.width):a;o=e.formattingValues[c]||e.formattingValues[a]}else{let a=e.defaultWidth,c=r!=null&&r.width?String(r.width):e.defaultWidth;o=e.values[c]||e.values[a]}let i=e.argumentCallback?e.argumentCallback(t):t;return o[i]}}var SSr={narrow:["B","A"],abbreviated:["BC","AD"],wide:["Before Christ","Anno Domini"]},TSr={narrow:["1","2","3","4"],abbreviated:["Q1","Q2","Q3","Q4"],wide:["1st quarter","2nd quarter","3rd quarter","4th quarter"]},ISr={narrow:["J","F","M","A","M","J","J","A","S","O","N","D"],abbreviated:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],wide:["January","February","March","April","May","June","July","August","September","October","November","December"]},MSr={narrow:["S","M","T","W","T","F","S"],short:["Su","Mo","Tu","We","Th","Fr","Sa"],abbreviated:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],wide:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"]},CSr={narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"}},ASr={narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"}},OSr=(e,t)=>{let r=Number(e),n=r%100;if(n>20||n<10)switch(n%10){case 1:return r+"st";case 2:return r+"nd";case 3:return r+"rd"}return r+"th"},zGe={ordinalNumber:OSr,era:xS({values:SSr,defaultWidth:"wide"}),quarter:xS({values:TSr,defaultWidth:"wide",argumentCallback:e=>e-1}),month:xS({values:ISr,defaultWidth:"wide"}),day:xS({values:MSr,defaultWidth:"wide"}),dayPeriod:xS({values:CSr,defaultWidth:"wide",formattingValues:ASr,defaultFormattingWidth:"wide"})};u();u();function wS(e){return(t,r={})=>{let n=r.width,o=n&&e.matchPatterns[n]||e.matchPatterns[e.defaultMatchWidth],i=t.match(o);if(!i)return null;let a=i[0],c=n&&e.parsePatterns[n]||e.parsePatterns[e.defaultParseWidth],h=Array.isArray(c)?DSr(c,w=>w.test(a)):PSr(c,w=>w.test(a)),m;m=e.valueCallback?e.valueCallback(h):h,m=r.valueCallback?r.valueCallback(m):m;let y=t.slice(a.length);return{value:m,rest:y}}}function PSr(e,t){for(let r in e)if(Object.prototype.hasOwnProperty.call(e,r)&&t(e[r]))return r}function DSr(e,t){for(let r=0;r<e.length;r++)if(t(e[r]))return r}u();function FGe(e){return(t,r={})=>{let n=t.match(e.matchPattern);if(!n)return null;let o=n[0],i=t.match(e.parsePattern);if(!i)return null;let a=e.valueCallback?e.valueCallback(i[0]):i[0];a=r.valueCallback?r.valueCallback(a):a;let c=t.slice(o.length);return{value:a,rest:c}}}var NSr=/^(\d+)(th|st|nd|rd)?/i,LSr=/\d+/i,kSr={narrow:/^(b|a)/i,abbreviated:/^(b\.?\s?c\.?|b\.?\s?c\.?\s?e\.?|a\.?\s?d\.?|c\.?\s?e\.?)/i,wide:/^(before christ|before common era|anno domini|common era)/i},RSr={any:[/^b/i,/^(a|c)/i]},jSr={narrow:/^[1234]/i,abbreviated:/^q[1234]/i,wide:/^[1234](th|st|nd|rd)? quarter/i},qSr={any:[/1/i,/2/i,/3/i,/4/i]},zSr={narrow:/^[jfmasond]/i,abbreviated:/^(jan|feb|mar|apr|may|jun|jul|aug|sep|oct|nov|dec)/i,wide:/^(january|february|march|april|may|june|july|august|september|october|november|december)/i},FSr={narrow:[/^j/i,/^f/i,/^m/i,/^a/i,/^m/i,/^j/i,/^j/i,/^a/i,/^s/i,/^o/i,/^n/i,/^d/i],any:[/^ja/i,/^f/i,/^mar/i,/^ap/i,/^may/i,/^jun/i,/^jul/i,/^au/i,/^s/i,/^o/i,/^n/i,/^d/i]},USr={narrow:/^[smtwf]/i,short:/^(su|mo|tu|we|th|fr|sa)/i,abbreviated:/^(sun|mon|tue|wed|thu|fri|sat)/i,wide:/^(sunday|monday|tuesday|wednesday|thursday|friday|saturday)/i},BSr={narrow:[/^s/i,/^m/i,/^t/i,/^w/i,/^t/i,/^f/i,/^s/i],any:[/^su/i,/^m/i,/^tu/i,/^w/i,/^th/i,/^f/i,/^sa/i]},VSr={narrow:/^(a|p|mi|n|(in the|at) (morning|afternoon|evening|night))/i,any:/^([ap]\.?\s?m\.?|midnight|noon|(in the|at) (morning|afternoon|evening|night))/i},GSr={any:{am:/^a/i,pm:/^p/i,midnight:/^mi/i,noon:/^no/i,morning:/morning/i,afternoon:/afternoon/i,evening:/evening/i,night:/night/i}},UGe={ordinalNumber:FGe({matchPattern:NSr,parsePattern:LSr,valueCallback:e=>parseInt(e,10)}),era:wS({matchPatterns:kSr,defaultMatchWidth:"wide",parsePatterns:RSr,defaultParseWidth:"any"}),quarter:wS({matchPatterns:jSr,defaultMatchWidth:"wide",parsePatterns:qSr,defaultParseWidth:"any",valueCallback:e=>e+1}),month:wS({matchPatterns:zSr,defaultMatchWidth:"wide",parsePatterns:FSr,defaultParseWidth:"any"}),day:wS({matchPatterns:USr,defaultMatchWidth:"wide",parsePatterns:BSr,defaultParseWidth:"any"}),dayPeriod:wS({matchPatterns:VSr,defaultMatchWidth:"any",parsePatterns:GSr,defaultParseWidth:"any"})};var FO={code:"en-US",formatDistance:RGe,formatLong:jGe,formatRelative:qGe,localize:zGe,match:UGe,options:{weekStartsOn:0,firstWeekContainsDate:1}};u();u();function BGe(e,t){let r=Ln(e,t==null?void 0:t.in);return DGe(r,kGe(r))+1}u();function Oj(e,t){let r=Ln(e,t==null?void 0:t.in),n=+Pd(r)-+NGe(r);return Math.round(n/Sj)+1}u();u();u();function ES(e,t){var y,w,E,A,P,j,D,L;let r=Ln(e,t==null?void 0:t.in),n=r.getFullYear(),o=vf(),i=(L=(D=(A=(E=t==null?void 0:t.firstWeekContainsDate)!=null?E:(w=(y=t==null?void 0:t.locale)==null?void 0:y.options)==null?void 0:w.firstWeekContainsDate)!=null?A:o.firstWeekContainsDate)!=null?D:(j=(P=o.locale)==null?void 0:P.options)==null?void 0:j.firstWeekContainsDate)!=null?L:1,a=Mo((t==null?void 0:t.in)||e,0);a.setFullYear(n+1,0,i),a.setHours(0,0,0,0);let c=Ac(a,t),h=Mo((t==null?void 0:t.in)||e,0);h.setFullYear(n,0,i),h.setHours(0,0,0,0);let m=Ac(h,t);return+r>=+c?n+1:+r>=+m?n:n-1}function VGe(e,t){var c,h,m,y,w,E,A,P;let r=vf(),n=(P=(A=(y=(m=t==null?void 0:t.firstWeekContainsDate)!=null?m:(h=(c=t==null?void 0:t.locale)==null?void 0:c.options)==null?void 0:h.firstWeekContainsDate)!=null?y:r.firstWeekContainsDate)!=null?A:(E=(w=r.locale)==null?void 0:w.options)==null?void 0:E.firstWeekContainsDate)!=null?P:1,o=ES(e,t),i=Mo((t==null?void 0:t.in)||e,0);return i.setFullYear(o,0,n),i.setHours(0,0,0,0),Ac(i,t)}function Pj(e,t){let r=Ln(e,t==null?void 0:t.in),n=+Ac(r,t)-+VGe(r,t);return Math.round(n/Sj)+1}u();function io(e,t){let r=e<0?"-":"",n=Math.abs(e).toString().padStart(t,"0");return r+n}u();var Lg={y(e,t){let r=e.getFullYear(),n=r>0?r:1-r;return io(t==="yy"?n%100:n,t.length)},M(e,t){let r=e.getMonth();return t==="M"?String(r+1):io(r+1,2)},d(e,t){return io(e.getDate(),t.length)},a(e,t){let r=e.getHours()/12>=1?"pm":"am";switch(t){case"a":case"aa":return r.toUpperCase();case"aaa":return r;case"aaaaa":return r[0];case"aaaa":default:return r==="am"?"a.m.":"p.m."}},h(e,t){return io(e.getHours()%12||12,t.length)},H(e,t){return io(e.getHours(),t.length)},m(e,t){return io(e.getMinutes(),t.length)},s(e,t){return io(e.getSeconds(),t.length)},S(e,t){let r=t.length,n=e.getMilliseconds(),o=Math.trunc(n*Math.pow(10,r-3));return io(o,t.length)}};var SS={am:"am",pm:"pm",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},ooe={G:function(e,t,r){let n=e.getFullYear()>0?1:0;switch(t){case"G":case"GG":case"GGG":return r.era(n,{width:"abbreviated"});case"GGGGG":return r.era(n,{width:"narrow"});case"GGGG":default:return r.era(n,{width:"wide"})}},y:function(e,t,r){if(t==="yo"){let n=e.getFullYear(),o=n>0?n:1-n;return r.ordinalNumber(o,{unit:"year"})}return Lg.y(e,t)},Y:function(e,t,r,n){let o=ES(e,n),i=o>0?o:1-o;if(t==="YY"){let a=i%100;return io(a,2)}return t==="Yo"?r.ordinalNumber(i,{unit:"year"}):io(i,t.length)},R:function(e,t){let r=Ij(e);return io(r,t.length)},u:function(e,t){let r=e.getFullYear();return io(r,t.length)},Q:function(e,t,r){let n=Math.ceil((e.getMonth()+1)/3);switch(t){case"Q":return String(n);case"QQ":return io(n,2);case"Qo":return r.ordinalNumber(n,{unit:"quarter"});case"QQQ":return r.quarter(n,{width:"abbreviated",context:"formatting"});case"QQQQQ":return r.quarter(n,{width:"narrow",context:"formatting"});case"QQQQ":default:return r.quarter(n,{width:"wide",context:"formatting"})}},q:function(e,t,r){let n=Math.ceil((e.getMonth()+1)/3);switch(t){case"q":return String(n);case"qq":return io(n,2);case"qo":return r.ordinalNumber(n,{unit:"quarter"});case"qqq":return r.quarter(n,{width:"abbreviated",context:"standalone"});case"qqqqq":return r.quarter(n,{width:"narrow",context:"standalone"});case"qqqq":default:return r.quarter(n,{width:"wide",context:"standalone"})}},M:function(e,t,r){let n=e.getMonth();switch(t){case"M":case"MM":return Lg.M(e,t);case"Mo":return r.ordinalNumber(n+1,{unit:"month"});case"MMM":return r.month(n,{width:"abbreviated",context:"formatting"});case"MMMMM":return r.month(n,{width:"narrow",context:"formatting"});case"MMMM":default:return r.month(n,{width:"wide",context:"formatting"})}},L:function(e,t,r){let n=e.getMonth();switch(t){case"L":return String(n+1);case"LL":return io(n+1,2);case"Lo":return r.ordinalNumber(n+1,{unit:"month"});case"LLL":return r.month(n,{width:"abbreviated",context:"standalone"});case"LLLLL":return r.month(n,{width:"narrow",context:"standalone"});case"LLLL":default:return r.month(n,{width:"wide",context:"standalone"})}},w:function(e,t,r,n){let o=Pj(e,n);return t==="wo"?r.ordinalNumber(o,{unit:"week"}):io(o,t.length)},I:function(e,t,r){let n=Oj(e);return t==="Io"?r.ordinalNumber(n,{unit:"week"}):io(n,t.length)},d:function(e,t,r){return t==="do"?r.ordinalNumber(e.getDate(),{unit:"date"}):Lg.d(e,t)},D:function(e,t,r){let n=BGe(e);return t==="Do"?r.ordinalNumber(n,{unit:"dayOfYear"}):io(n,t.length)},E:function(e,t,r){let n=e.getDay();switch(t){case"E":case"EE":case"EEE":return r.day(n,{width:"abbreviated",context:"formatting"});case"EEEEE":return r.day(n,{width:"narrow",context:"formatting"});case"EEEEEE":return r.day(n,{width:"short",context:"formatting"});case"EEEE":default:return r.day(n,{width:"wide",context:"formatting"})}},e:function(e,t,r,n){let o=e.getDay(),i=(o-n.weekStartsOn+8)%7||7;switch(t){case"e":return String(i);case"ee":return io(i,2);case"eo":return r.ordinalNumber(i,{unit:"day"});case"eee":return r.day(o,{width:"abbreviated",context:"formatting"});case"eeeee":return r.day(o,{width:"narrow",context:"formatting"});case"eeeeee":return r.day(o,{width:"short",context:"formatting"});case"eeee":default:return r.day(o,{width:"wide",context:"formatting"})}},c:function(e,t,r,n){let o=e.getDay(),i=(o-n.weekStartsOn+8)%7||7;switch(t){case"c":return String(i);case"cc":return io(i,t.length);case"co":return r.ordinalNumber(i,{unit:"day"});case"ccc":return r.day(o,{width:"abbreviated",context:"standalone"});case"ccccc":return r.day(o,{width:"narrow",context:"standalone"});case"cccccc":return r.day(o,{width:"short",context:"standalone"});case"cccc":default:return r.day(o,{width:"wide",context:"standalone"})}},i:function(e,t,r){let n=e.getDay(),o=n===0?7:n;switch(t){case"i":return String(o);case"ii":return io(o,t.length);case"io":return r.ordinalNumber(o,{unit:"day"});case"iii":return r.day(n,{width:"abbreviated",context:"formatting"});case"iiiii":return r.day(n,{width:"narrow",context:"formatting"});case"iiiiii":return r.day(n,{width:"short",context:"formatting"});case"iiii":default:return r.day(n,{width:"wide",context:"formatting"})}},a:function(e,t,r){let o=e.getHours()/12>=1?"pm":"am";switch(t){case"a":case"aa":return r.dayPeriod(o,{width:"abbreviated",context:"formatting"});case"aaa":return r.dayPeriod(o,{width:"abbreviated",context:"formatting"}).toLowerCase();case"aaaaa":return r.dayPeriod(o,{width:"narrow",context:"formatting"});case"aaaa":default:return r.dayPeriod(o,{width:"wide",context:"formatting"})}},b:function(e,t,r){let n=e.getHours(),o;switch(n===12?o=SS.noon:n===0?o=SS.midnight:o=n/12>=1?"pm":"am",t){case"b":case"bb":return r.dayPeriod(o,{width:"abbreviated",context:"formatting"});case"bbb":return r.dayPeriod(o,{width:"abbreviated",context:"formatting"}).toLowerCase();case"bbbbb":return r.dayPeriod(o,{width:"narrow",context:"formatting"});case"bbbb":default:return r.dayPeriod(o,{width:"wide",context:"formatting"})}},B:function(e,t,r){let n=e.getHours(),o;switch(n>=17?o=SS.evening:n>=12?o=SS.afternoon:n>=4?o=SS.morning:o=SS.night,t){case"B":case"BB":case"BBB":return r.dayPeriod(o,{width:"abbreviated",context:"formatting"});case"BBBBB":return r.dayPeriod(o,{width:"narrow",context:"formatting"});case"BBBB":default:return r.dayPeriod(o,{width:"wide",context:"formatting"})}},h:function(e,t,r){if(t==="ho"){let n=e.getHours()%12;return n===0&&(n=12),r.ordinalNumber(n,{unit:"hour"})}return Lg.h(e,t)},H:function(e,t,r){return t==="Ho"?r.ordinalNumber(e.getHours(),{unit:"hour"}):Lg.H(e,t)},K:function(e,t,r){let n=e.getHours()%12;return t==="Ko"?r.ordinalNumber(n,{unit:"hour"}):io(n,t.length)},k:function(e,t,r){let n=e.getHours();return n===0&&(n=24),t==="ko"?r.ordinalNumber(n,{unit:"hour"}):io(n,t.length)},m:function(e,t,r){return t==="mo"?r.ordinalNumber(e.getMinutes(),{unit:"minute"}):Lg.m(e,t)},s:function(e,t,r){return t==="so"?r.ordinalNumber(e.getSeconds(),{unit:"second"}):Lg.s(e,t)},S:function(e,t){return Lg.S(e,t)},X:function(e,t,r){let n=e.getTimezoneOffset();if(n===0)return"Z";switch(t){case"X":return HGe(n);case"XXXX":case"XX":return Z_(n);case"XXXXX":case"XXX":default:return Z_(n,":")}},x:function(e,t,r){let n=e.getTimezoneOffset();switch(t){case"x":return HGe(n);case"xxxx":case"xx":return Z_(n);case"xxxxx":case"xxx":default:return Z_(n,":")}},O:function(e,t,r){let n=e.getTimezoneOffset();switch(t){case"O":case"OO":case"OOO":return"GMT"+GGe(n,":");case"OOOO":default:return"GMT"+Z_(n,":")}},z:function(e,t,r){let n=e.getTimezoneOffset();switch(t){case"z":case"zz":case"zzz":return"GMT"+GGe(n,":");case"zzzz":default:return"GMT"+Z_(n,":")}},t:function(e,t,r){let n=Math.trunc(+e/1e3);return io(n,t.length)},T:function(e,t,r){return io(+e,t.length)}};function GGe(e,t=""){let r=e>0?"-":"+",n=Math.abs(e),o=Math.trunc(n/60),i=n%60;return i===0?r+String(o):r+String(o)+t+io(i,2)}function HGe(e,t){return e%60===0?(e>0?"-":"+")+io(Math.abs(e)/60,2):Z_(e,t)}function Z_(e,t=""){let r=e>0?"-":"+",n=Math.abs(e),o=io(Math.trunc(n/60),2),i=io(n%60,2);return r+o+t+i}u();var $Ge=(e,t)=>{switch(e){case"P":return t.date({width:"short"});case"PP":return t.date({width:"medium"});case"PPP":return t.date({width:"long"});case"PPPP":default:return t.date({width:"full"})}},WGe=(e,t)=>{switch(e){case"p":return t.time({width:"short"});case"pp":return t.time({width:"medium"});case"ppp":return t.time({width:"long"});case"pppp":default:return t.time({width:"full"})}},HSr=(e,t)=>{let r=e.match(/(P+)(p+)?/)||[],n=r[1],o=r[2];if(!o)return $Ge(e,t);let i;switch(n){case"P":i=t.dateTime({width:"short"});break;case"PP":i=t.dateTime({width:"medium"});break;case"PPP":i=t.dateTime({width:"long"});break;case"PPPP":default:i=t.dateTime({width:"full"});break}return i.replace("{{date}}",$Ge(n,t)).replace("{{time}}",WGe(o,t))},UO={p:WGe,P:HSr};u();var $Sr=/^D+$/,WSr=/^Y+$/,YSr=["D","DD","YY","YYYY"];function Dj(e){return $Sr.test(e)}function Nj(e){return WSr.test(e)}function BO(e,t,r){let n=ZSr(e,t,r);if(console.warn(n),YSr.includes(e))throw new RangeError(n)}function ZSr(e,t,r){let n=e[0]==="Y"?"years":"days of the month";return`Use \`${e.toLowerCase()}\` instead of \`${e}\` (in \`${t}\`) for formatting ${n} to the input \`${r}\`; see: https://github.com/date-fns/date-fns/blob/master/docs/unicodeTokens.md`}var KSr=/[yYQqMLwIdDecihHKkms]o|(\w)\1*|''|'(''|[^'])+('|$)|./g,XSr=/P+p+|P+|p+|''|'(''|[^'])+('|$)|./g,JSr=/^'([^]*?)'?$/,QSr=/''/g,eTr=/[a-zA-Z]/;function ioe(e,t,r){var y,w,E,A,P,j,D,L,z,B,G,Z,K,te,se,le,pe,me;let n=vf(),o=(w=(y=r==null?void 0:r.locale)!=null?y:n.locale)!=null?w:FO,i=(B=(z=(j=(P=r==null?void 0:r.firstWeekContainsDate)!=null?P:(A=(E=r==null?void 0:r.locale)==null?void 0:E.options)==null?void 0:A.firstWeekContainsDate)!=null?j:n.firstWeekContainsDate)!=null?z:(L=(D=n.locale)==null?void 0:D.options)==null?void 0:L.firstWeekContainsDate)!=null?B:1,a=(me=(pe=(te=(K=r==null?void 0:r.weekStartsOn)!=null?K:(Z=(G=r==null?void 0:r.locale)==null?void 0:G.options)==null?void 0:Z.weekStartsOn)!=null?te:n.weekStartsOn)!=null?pe:(le=(se=n.locale)==null?void 0:se.options)==null?void 0:le.weekStartsOn)!=null?me:0,c=Ln(e,r==null?void 0:r.in);if(!Cj(c))throw new RangeError("Invalid time value");let h=t.match(XSr).map(_e=>{let de=_e[0];if(de==="p"||de==="P"){let Ce=UO[de];return Ce(_e,o.formatLong)}return _e}).join("").match(KSr).map(_e=>{if(_e==="''")return{isToken:!1,value:"'"};let de=_e[0];if(de==="'")return{isToken:!1,value:tTr(_e)};if(ooe[de])return{isToken:!0,value:_e};if(de.match(eTr))throw new RangeError("Format string contains an unescaped latin alphabet character `"+de+"`");return{isToken:!1,value:_e}});o.localize.preprocessor&&(h=o.localize.preprocessor(c,h));let m={firstWeekContainsDate:i,weekStartsOn:a,locale:o};return h.map(_e=>{if(!_e.isToken)return _e.value;let de=_e.value;(!(r!=null&&r.useAdditionalWeekYearTokens)&&Nj(de)||!(r!=null&&r.useAdditionalDayOfYearTokens)&&Dj(de))&&BO(de,t,String(e));let Ce=ooe[de[0]];return Ce(c,de,o.localize,m)}).join("")}function tTr(e){let t=e.match(JSr);return t?t[1].replace(QSr,"'"):e}u();function YGe(e,t){var m,y;let r=Ln(e,t==null?void 0:t.in);if(isNaN(+r))throw new RangeError("Invalid time value");let n=(m=t==null?void 0:t.format)!=null?m:"extended",o=(y=t==null?void 0:t.representation)!=null?y:"complete",i="",a="",c=n==="extended"?"-":"",h=n==="extended"?":":"";if(o!=="time"){let w=io(r.getDate(),2),E=io(r.getMonth()+1,2);i=`${io(r.getFullYear(),4)}${c}${E}${c}${w}`}if(o!=="date"){let w=r.getTimezoneOffset();if(w!==0){let L=Math.abs(w),z=io(Math.trunc(L/60),2),B=io(L%60,2);a=`${w<0?"+":"-"}${z}:${B}`}else a="Z";let E=io(r.getHours(),2),A=io(r.getMinutes(),2),P=io(r.getSeconds(),2),j=i===""?"":"T",D=[E,A,P].join(h);i=`${i}${j}${D}${a}`}return i}u();function ZGe(){return Object.assign({},vf())}u();function KGe(e,t){let r=Ln(e,t==null?void 0:t.in).getDay();return r===0?7:r}u();function XGe(e){return Math.trunc(+Ln(e)/1e3)}u();function VO(e,t){return Ln(e,t==null?void 0:t.in).getFullYear()}u();u();u();function JGe(e,t){let r=rTr(t)?new t(0):Mo(t,0);return r.setFullYear(e.getFullYear(),e.getMonth(),e.getDate()),r.setHours(e.getHours(),e.getMinutes(),e.getSeconds(),e.getMilliseconds()),r}function rTr(e){var t;return typeof e=="function"&&((t=e.prototype)==null?void 0:t.constructor)===e}var nTr=10,Lj=class{constructor(){St(this,"subPriority",0)}validate(t,r){return!0}},kj=class extends Lj{constructor(t,r,n,o,i){super(),this.value=t,this.validateValue=r,this.setValue=n,this.priority=o,i&&(this.subPriority=i)}validate(t,r){return this.validateValue(t,this.value,r)}set(t,r,n){return this.setValue(t,r,this.value,n)}},Rj=class extends Lj{constructor(r,n){super();St(this,"priority",nTr);St(this,"subPriority",-1);this.context=r||(o=>Mo(n,o))}set(r,n){return n.timestampIsSet?r:Mo(r,JGe(r,this.context))}};u();u();u();var zr=class{run(t,r,n,o){let i=this.parse(t,r,n,o);return i?{setter:new kj(i.value,this.validate,this.set,this.priority,this.subPriority),rest:i.rest}:null}validate(t,r,n){return!0}};var jj=class extends zr{constructor(){super(...arguments);St(this,"priority",140);St(this,"incompatibleTokens",["R","u","t","T"])}parse(r,n,o){switch(n){case"G":case"GG":case"GGG":return o.era(r,{width:"abbreviated"})||o.era(r,{width:"narrow"});case"GGGGG":return o.era(r,{width:"narrow"});case"GGGG":default:return o.era(r,{width:"wide"})||o.era(r,{width:"abbreviated"})||o.era(r,{width:"narrow"})}}set(r,n,o){return n.era=o,r.setFullYear(o,0,1),r.setHours(0,0,0,0),r}};u();u();u();var Lo={month:/^(1[0-2]|0?\d)/,date:/^(3[0-1]|[0-2]?\d)/,dayOfYear:/^(36[0-6]|3[0-5]\d|[0-2]?\d?\d)/,week:/^(5[0-3]|[0-4]?\d)/,hour23h:/^(2[0-3]|[0-1]?\d)/,hour24h:/^(2[0-4]|[0-1]?\d)/,hour11h:/^(1[0-1]|0?\d)/,hour12h:/^(1[0-2]|0?\d)/,minute:/^[0-5]?\d/,second:/^[0-5]?\d/,singleDigit:/^\d/,twoDigits:/^\d{1,2}/,threeDigits:/^\d{1,3}/,fourDigits:/^\d{1,4}/,anyDigitsSigned:/^-?\d+/,singleDigitSigned:/^-?\d/,twoDigitsSigned:/^-?\d{1,2}/,threeDigitsSigned:/^-?\d{1,3}/,fourDigitsSigned:/^-?\d{1,4}/},yf={basicOptionalMinutes:/^([+-])(\d{2})(\d{2})?|Z/,basic:/^([+-])(\d{2})(\d{2})|Z/,basicOptionalSeconds:/^([+-])(\d{2})(\d{2})((\d{2}))?|Z/,extended:/^([+-])(\d{2}):(\d{2})|Z/,extendedOptionalSeconds:/^([+-])(\d{2}):(\d{2})(:(\d{2}))?|Z/};function pi(e,t){return e&&{value:t(e.value),rest:e.rest}}function Co(e,t){let r=t.match(e);return r?{value:parseInt(r[0],10),rest:t.slice(r[0].length)}:null}function _f(e,t){let r=t.match(e);if(!r)return null;if(r[0]==="Z")return{value:0,rest:t.slice(1)};let n=r[1]==="+"?1:-1,o=r[2]?parseInt(r[2],10):0,i=r[3]?parseInt(r[3],10):0,a=r[5]?parseInt(r[5],10):0;return{value:n*(o*qO+i*jO+a*OGe),rest:t.slice(r[0].length)}}function qj(e){return Co(Lo.anyDigitsSigned,e)}function eo(e,t){switch(e){case 1:return Co(Lo.singleDigit,t);case 2:return Co(Lo.twoDigits,t);case 3:return Co(Lo.threeDigits,t);case 4:return Co(Lo.fourDigits,t);default:return Co(new RegExp("^\\d{1,"+e+"}"),t)}}function TS(e,t){switch(e){case 1:return Co(Lo.singleDigitSigned,t);case 2:return Co(Lo.twoDigitsSigned,t);case 3:return Co(Lo.threeDigitsSigned,t);case 4:return Co(Lo.fourDigitsSigned,t);default:return Co(new RegExp("^-?\\d{1,"+e+"}"),t)}}function IS(e){switch(e){case"morning":return 4;case"evening":return 17;case"pm":case"noon":case"afternoon":return 12;case"am":case"midnight":case"night":default:return 0}}function zj(e,t){let r=t>0,n=r?t:1-t,o;if(n<=50)o=e||100;else{let i=n+50,a=Math.trunc(i/100)*100,c=e>=i%100;o=e+a-(c?100:0)}return r?o:1-o}function Fj(e){return e%400===0||e%4===0&&e%100!==0}var Uj=class extends zr{constructor(){super(...arguments);St(this,"priority",130);St(this,"incompatibleTokens",["Y","R","u","w","I","i","e","c","t","T"])}parse(r,n,o){let i=a=>({year:a,isTwoDigitYear:n==="yy"});switch(n){case"y":return pi(eo(4,r),i);case"yo":return pi(o.ordinalNumber(r,{unit:"year"}),i);default:return pi(eo(n.length,r),i)}}validate(r,n){return n.isTwoDigitYear||n.year>0}set(r,n,o){let i=r.getFullYear();if(o.isTwoDigitYear){let c=zj(o.year,i);return r.setFullYear(c,0,1),r.setHours(0,0,0,0),r}let a=!("era"in n)||n.era===1?o.year:1-o.year;return r.setFullYear(a,0,1),r.setHours(0,0,0,0),r}};u();var Bj=class extends zr{constructor(){super(...arguments);St(this,"priority",130);St(this,"incompatibleTokens",["y","R","u","Q","q","M","L","I","d","D","i","t","T"])}parse(r,n,o){let i=a=>({year:a,isTwoDigitYear:n==="YY"});switch(n){case"Y":return pi(eo(4,r),i);case"Yo":return pi(o.ordinalNumber(r,{unit:"year"}),i);default:return pi(eo(n.length,r),i)}}validate(r,n){return n.isTwoDigitYear||n.year>0}set(r,n,o,i){let a=ES(r,i);if(o.isTwoDigitYear){let h=zj(o.year,a);return r.setFullYear(h,0,i.firstWeekContainsDate),r.setHours(0,0,0,0),Ac(r,i)}let c=!("era"in n)||n.era===1?o.year:1-o.year;return r.setFullYear(c,0,i.firstWeekContainsDate),r.setHours(0,0,0,0),Ac(r,i)}};u();var Vj=class extends zr{constructor(){super(...arguments);St(this,"priority",130);St(this,"incompatibleTokens",["G","y","Y","u","Q","q","M","L","w","d","D","e","c","t","T"])}parse(r,n){return n==="R"?TS(4,r):TS(n.length,r)}set(r,n,o){let i=Mo(r,0);return i.setFullYear(o,0,4),i.setHours(0,0,0,0),Pd(i)}};u();var Gj=class extends zr{constructor(){super(...arguments);St(this,"priority",130);St(this,"incompatibleTokens",["G","y","Y","R","w","I","i","e","c","t","T"])}parse(r,n){return n==="u"?TS(4,r):TS(n.length,r)}set(r,n,o){return r.setFullYear(o,0,1),r.setHours(0,0,0,0),r}};u();var Hj=class extends zr{constructor(){super(...arguments);St(this,"priority",120);St(this,"incompatibleTokens",["Y","R","q","M","L","w","I","d","D","i","e","c","t","T"])}parse(r,n,o){switch(n){case"Q":case"QQ":return eo(n.length,r);case"Qo":return o.ordinalNumber(r,{unit:"quarter"});case"QQQ":return o.quarter(r,{width:"abbreviated",context:"formatting"})||o.quarter(r,{width:"narrow",context:"formatting"});case"QQQQQ":return o.quarter(r,{width:"narrow",context:"formatting"});case"QQQQ":default:return o.quarter(r,{width:"wide",context:"formatting"})||o.quarter(r,{width:"abbreviated",context:"formatting"})||o.quarter(r,{width:"narrow",context:"formatting"})}}validate(r,n){return n>=1&&n<=4}set(r,n,o){return r.setMonth((o-1)*3,1),r.setHours(0,0,0,0),r}};u();var $j=class extends zr{constructor(){super(...arguments);St(this,"priority",120);St(this,"incompatibleTokens",["Y","R","Q","M","L","w","I","d","D","i","e","c","t","T"])}parse(r,n,o){switch(n){case"q":case"qq":return eo(n.length,r);case"qo":return o.ordinalNumber(r,{unit:"quarter"});case"qqq":return o.quarter(r,{width:"abbreviated",context:"standalone"})||o.quarter(r,{width:"narrow",context:"standalone"});case"qqqqq":return o.quarter(r,{width:"narrow",context:"standalone"});case"qqqq":default:return o.quarter(r,{width:"wide",context:"standalone"})||o.quarter(r,{width:"abbreviated",context:"standalone"})||o.quarter(r,{width:"narrow",context:"standalone"})}}validate(r,n){return n>=1&&n<=4}set(r,n,o){return r.setMonth((o-1)*3,1),r.setHours(0,0,0,0),r}};u();var Wj=class extends zr{constructor(){super(...arguments);St(this,"incompatibleTokens",["Y","R","q","Q","L","w","I","D","i","e","c","t","T"]);St(this,"priority",110)}parse(r,n,o){let i=a=>a-1;switch(n){case"M":return pi(Co(Lo.month,r),i);case"MM":return pi(eo(2,r),i);case"Mo":return pi(o.ordinalNumber(r,{unit:"month"}),i);case"MMM":return o.month(r,{width:"abbreviated",context:"formatting"})||o.month(r,{width:"narrow",context:"formatting"});case"MMMMM":return o.month(r,{width:"narrow",context:"formatting"});case"MMMM":default:return o.month(r,{width:"wide",context:"formatting"})||o.month(r,{width:"abbreviated",context:"formatting"})||o.month(r,{width:"narrow",context:"formatting"})}}validate(r,n){return n>=0&&n<=11}set(r,n,o){return r.setMonth(o,1),r.setHours(0,0,0,0),r}};u();var Yj=class extends zr{constructor(){super(...arguments);St(this,"priority",110);St(this,"incompatibleTokens",["Y","R","q","Q","M","w","I","D","i","e","c","t","T"])}parse(r,n,o){let i=a=>a-1;switch(n){case"L":return pi(Co(Lo.month,r),i);case"LL":return pi(eo(2,r),i);case"Lo":return pi(o.ordinalNumber(r,{unit:"month"}),i);case"LLL":return o.month(r,{width:"abbreviated",context:"standalone"})||o.month(r,{width:"narrow",context:"standalone"});case"LLLLL":return o.month(r,{width:"narrow",context:"standalone"});case"LLLL":default:return o.month(r,{width:"wide",context:"standalone"})||o.month(r,{width:"abbreviated",context:"standalone"})||o.month(r,{width:"narrow",context:"standalone"})}}validate(r,n){return n>=0&&n<=11}set(r,n,o){return r.setMonth(o,1),r.setHours(0,0,0,0),r}};u();u();function QGe(e,t,r){let n=Ln(e,r==null?void 0:r.in),o=Pj(n,r)-t;return n.setDate(n.getDate()-o*7),Ln(n,r==null?void 0:r.in)}var Zj=class extends zr{constructor(){super(...arguments);St(this,"priority",100);St(this,"incompatibleTokens",["y","R","u","q","Q","M","L","I","d","D","i","t","T"])}parse(r,n,o){switch(n){case"w":return Co(Lo.week,r);case"wo":return o.ordinalNumber(r,{unit:"week"});default:return eo(n.length,r)}}validate(r,n){return n>=1&&n<=53}set(r,n,o,i){return Ac(QGe(r,o,i),i)}};u();u();function eHe(e,t,r){let n=Ln(e,r==null?void 0:r.in),o=Oj(n,r)-t;return n.setDate(n.getDate()-o*7),n}var Kj=class extends zr{constructor(){super(...arguments);St(this,"priority",100);St(this,"incompatibleTokens",["y","Y","u","q","Q","M","L","w","d","D","e","c","t","T"])}parse(r,n,o){switch(n){case"I":return Co(Lo.week,r);case"Io":return o.ordinalNumber(r,{unit:"week"});default:return eo(n.length,r)}}validate(r,n){return n>=1&&n<=53}set(r,n,o){return Pd(eHe(r,o))}};u();var oTr=[31,28,31,30,31,30,31,31,30,31,30,31],iTr=[31,29,31,30,31,30,31,31,30,31,30,31],Xj=class extends zr{constructor(){super(...arguments);St(this,"priority",90);St(this,"subPriority",1);St(this,"incompatibleTokens",["Y","R","q","Q","w","I","D","i","e","c","t","T"])}parse(r,n,o){switch(n){case"d":return Co(Lo.date,r);case"do":return o.ordinalNumber(r,{unit:"date"});default:return eo(n.length,r)}}validate(r,n){let o=r.getFullYear(),i=Fj(o),a=r.getMonth();return i?n>=1&&n<=iTr[a]:n>=1&&n<=oTr[a]}set(r,n,o){return r.setDate(o),r.setHours(0,0,0,0),r}};u();var Jj=class extends zr{constructor(){super(...arguments);St(this,"priority",90);St(this,"subpriority",1);St(this,"incompatibleTokens",["Y","R","q","Q","M","L","w","I","d","E","i","e","c","t","T"])}parse(r,n,o){switch(n){case"D":case"DD":return Co(Lo.dayOfYear,r);case"Do":return o.ordinalNumber(r,{unit:"date"});default:return eo(n.length,r)}}validate(r,n){let o=r.getFullYear();return Fj(o)?n>=1&&n<=366:n>=1&&n<=365}set(r,n,o){return r.setMonth(0,o),r.setHours(0,0,0,0),r}};u();u();function MS(e,t,r){var w,E,A,P,j,D,L,z;let n=vf(),o=(z=(L=(P=(A=r==null?void 0:r.weekStartsOn)!=null?A:(E=(w=r==null?void 0:r.locale)==null?void 0:w.options)==null?void 0:E.weekStartsOn)!=null?P:n.weekStartsOn)!=null?L:(D=(j=n.locale)==null?void 0:j.options)==null?void 0:D.weekStartsOn)!=null?z:0,i=Ln(e,r==null?void 0:r.in),a=i.getDay(),h=(t%7+7)%7,m=7-o,y=t<0||t>6?t-(a+m)%7:(h+m)%7-(a+m)%7;return Tj(i,y,r)}var Qj=class extends zr{constructor(){super(...arguments);St(this,"priority",90);St(this,"incompatibleTokens",["D","i","e","c","t","T"])}parse(r,n,o){switch(n){case"E":case"EE":case"EEE":return o.day(r,{width:"abbreviated",context:"formatting"})||o.day(r,{width:"short",context:"formatting"})||o.day(r,{width:"narrow",context:"formatting"});case"EEEEE":return o.day(r,{width:"narrow",context:"formatting"});case"EEEEEE":return o.day(r,{width:"short",context:"formatting"})||o.day(r,{width:"narrow",context:"formatting"});case"EEEE":default:return o.day(r,{width:"wide",context:"formatting"})||o.day(r,{width:"abbreviated",context:"formatting"})||o.day(r,{width:"short",context:"formatting"})||o.day(r,{width:"narrow",context:"formatting"})}}validate(r,n){return n>=0&&n<=6}set(r,n,o,i){return r=MS(r,o,i),r.setHours(0,0,0,0),r}};u();var eq=class extends zr{constructor(){super(...arguments);St(this,"priority",90);St(this,"incompatibleTokens",["y","R","u","q","Q","M","L","I","d","D","E","i","c","t","T"])}parse(r,n,o,i){let a=c=>{let h=Math.floor((c-1)/7)*7;return(c+i.weekStartsOn+6)%7+h};switch(n){case"e":case"ee":return pi(eo(n.length,r),a);case"eo":return pi(o.ordinalNumber(r,{unit:"day"}),a);case"eee":return o.day(r,{width:"abbreviated",context:"formatting"})||o.day(r,{width:"short",context:"formatting"})||o.day(r,{width:"narrow",context:"formatting"});case"eeeee":return o.day(r,{width:"narrow",context:"formatting"});case"eeeeee":return o.day(r,{width:"short",context:"formatting"})||o.day(r,{width:"narrow",context:"formatting"});case"eeee":default:return o.day(r,{width:"wide",context:"formatting"})||o.day(r,{width:"abbreviated",context:"formatting"})||o.day(r,{width:"short",context:"formatting"})||o.day(r,{width:"narrow",context:"formatting"})}}validate(r,n){return n>=0&&n<=6}set(r,n,o,i){return r=MS(r,o,i),r.setHours(0,0,0,0),r}};u();var tq=class extends zr{constructor(){super(...arguments);St(this,"priority",90);St(this,"incompatibleTokens",["y","R","u","q","Q","M","L","I","d","D","E","i","e","t","T"])}parse(r,n,o,i){let a=c=>{let h=Math.floor((c-1)/7)*7;return(c+i.weekStartsOn+6)%7+h};switch(n){case"c":case"cc":return pi(eo(n.length,r),a);case"co":return pi(o.ordinalNumber(r,{unit:"day"}),a);case"ccc":return o.day(r,{width:"abbreviated",context:"standalone"})||o.day(r,{width:"short",context:"standalone"})||o.day(r,{width:"narrow",context:"standalone"});case"ccccc":return o.day(r,{width:"narrow",context:"standalone"});case"cccccc":return o.day(r,{width:"short",context:"standalone"})||o.day(r,{width:"narrow",context:"standalone"});case"cccc":default:return o.day(r,{width:"wide",context:"standalone"})||o.day(r,{width:"abbreviated",context:"standalone"})||o.day(r,{width:"short",context:"standalone"})||o.day(r,{width:"narrow",context:"standalone"})}}validate(r,n){return n>=0&&n<=6}set(r,n,o,i){return r=MS(r,o,i),r.setHours(0,0,0,0),r}};u();u();function tHe(e,t,r){let n=Ln(e,r==null?void 0:r.in),o=KGe(n,r),i=t-o;return Tj(n,i,r)}var rq=class extends zr{constructor(){super(...arguments);St(this,"priority",90);St(this,"incompatibleTokens",["y","Y","u","q","Q","M","L","w","d","D","E","e","c","t","T"])}parse(r,n,o){let i=a=>a===0?7:a;switch(n){case"i":case"ii":return eo(n.length,r);case"io":return o.ordinalNumber(r,{unit:"day"});case"iii":return pi(o.day(r,{width:"abbreviated",context:"formatting"})||o.day(r,{width:"short",context:"formatting"})||o.day(r,{width:"narrow",context:"formatting"}),i);case"iiiii":return pi(o.day(r,{width:"narrow",context:"formatting"}),i);case"iiiiii":return pi(o.day(r,{width:"short",context:"formatting"})||o.day(r,{width:"narrow",context:"formatting"}),i);case"iiii":default:return pi(o.day(r,{width:"wide",context:"formatting"})||o.day(r,{width:"abbreviated",context:"formatting"})||o.day(r,{width:"short",context:"formatting"})||o.day(r,{width:"narrow",context:"formatting"}),i)}}validate(r,n){return n>=1&&n<=7}set(r,n,o){return r=tHe(r,o),r.setHours(0,0,0,0),r}};u();var nq=class extends zr{constructor(){super(...arguments);St(this,"priority",80);St(this,"incompatibleTokens",["b","B","H","k","t","T"])}parse(r,n,o){switch(n){case"a":case"aa":case"aaa":return o.dayPeriod(r,{width:"abbreviated",context:"formatting"})||o.dayPeriod(r,{width:"narrow",context:"formatting"});case"aaaaa":return o.dayPeriod(r,{width:"narrow",context:"formatting"});case"aaaa":default:return o.dayPeriod(r,{width:"wide",context:"formatting"})||o.dayPeriod(r,{width:"abbreviated",context:"formatting"})||o.dayPeriod(r,{width:"narrow",context:"formatting"})}}set(r,n,o){return r.setHours(IS(o),0,0,0),r}};u();var oq=class extends zr{constructor(){super(...arguments);St(this,"priority",80);St(this,"incompatibleTokens",["a","B","H","k","t","T"])}parse(r,n,o){switch(n){case"b":case"bb":case"bbb":return o.dayPeriod(r,{width:"abbreviated",context:"formatting"})||o.dayPeriod(r,{width:"narrow",context:"formatting"});case"bbbbb":return o.dayPeriod(r,{width:"narrow",context:"formatting"});case"bbbb":default:return o.dayPeriod(r,{width:"wide",context:"formatting"})||o.dayPeriod(r,{width:"abbreviated",context:"formatting"})||o.dayPeriod(r,{width:"narrow",context:"formatting"})}}set(r,n,o){return r.setHours(IS(o),0,0,0),r}};u();var iq=class extends zr{constructor(){super(...arguments);St(this,"priority",80);St(this,"incompatibleTokens",["a","b","t","T"])}parse(r,n,o){switch(n){case"B":case"BB":case"BBB":return o.dayPeriod(r,{width:"abbreviated",context:"formatting"})||o.dayPeriod(r,{width:"narrow",context:"formatting"});case"BBBBB":return o.dayPeriod(r,{width:"narrow",context:"formatting"});case"BBBB":default:return o.dayPeriod(r,{width:"wide",context:"formatting"})||o.dayPeriod(r,{width:"abbreviated",context:"formatting"})||o.dayPeriod(r,{width:"narrow",context:"formatting"})}}set(r,n,o){return r.setHours(IS(o),0,0,0),r}};u();var aq=class extends zr{constructor(){super(...arguments);St(this,"priority",70);St(this,"incompatibleTokens",["H","K","k","t","T"])}parse(r,n,o){switch(n){case"h":return Co(Lo.hour12h,r);case"ho":return o.ordinalNumber(r,{unit:"hour"});default:return eo(n.length,r)}}validate(r,n){return n>=1&&n<=12}set(r,n,o){let i=r.getHours()>=12;return i&&o<12?r.setHours(o+12,0,0,0):!i&&o===12?r.setHours(0,0,0,0):r.setHours(o,0,0,0),r}};u();var sq=class extends zr{constructor(){super(...arguments);St(this,"priority",70);St(this,"incompatibleTokens",["a","b","h","K","k","t","T"])}parse(r,n,o){switch(n){case"H":return Co(Lo.hour23h,r);case"Ho":return o.ordinalNumber(r,{unit:"hour"});default:return eo(n.length,r)}}validate(r,n){return n>=0&&n<=23}set(r,n,o){return r.setHours(o,0,0,0),r}};u();var lq=class extends zr{constructor(){super(...arguments);St(this,"priority",70);St(this,"incompatibleTokens",["h","H","k","t","T"])}parse(r,n,o){switch(n){case"K":return Co(Lo.hour11h,r);case"Ko":return o.ordinalNumber(r,{unit:"hour"});default:return eo(n.length,r)}}validate(r,n){return n>=0&&n<=11}set(r,n,o){return r.getHours()>=12&&o<12?r.setHours(o+12,0,0,0):r.setHours(o,0,0,0),r}};u();var uq=class extends zr{constructor(){super(...arguments);St(this,"priority",70);St(this,"incompatibleTokens",["a","b","h","H","K","t","T"])}parse(r,n,o){switch(n){case"k":return Co(Lo.hour24h,r);case"ko":return o.ordinalNumber(r,{unit:"hour"});default:return eo(n.length,r)}}validate(r,n){return n>=1&&n<=24}set(r,n,o){let i=o<=24?o%24:o;return r.setHours(i,0,0,0),r}};u();var cq=class extends zr{constructor(){super(...arguments);St(this,"priority",60);St(this,"incompatibleTokens",["t","T"])}parse(r,n,o){switch(n){case"m":return Co(Lo.minute,r);case"mo":return o.ordinalNumber(r,{unit:"minute"});default:return eo(n.length,r)}}validate(r,n){return n>=0&&n<=59}set(r,n,o){return r.setMinutes(o,0,0),r}};u();var pq=class extends zr{constructor(){super(...arguments);St(this,"priority",50);St(this,"incompatibleTokens",["t","T"])}parse(r,n,o){switch(n){case"s":return Co(Lo.second,r);case"so":return o.ordinalNumber(r,{unit:"second"});default:return eo(n.length,r)}}validate(r,n){return n>=0&&n<=59}set(r,n,o){return r.setSeconds(o,0),r}};u();var fq=class extends zr{constructor(){super(...arguments);St(this,"priority",30);St(this,"incompatibleTokens",["t","T"])}parse(r,n){let o=i=>Math.trunc(i*Math.pow(10,-n.length+3));return pi(eo(n.length,r),o)}set(r,n,o){return r.setMilliseconds(o),r}};u();var dq=class extends zr{constructor(){super(...arguments);St(this,"priority",10);St(this,"incompatibleTokens",["t","T","x"])}parse(r,n){switch(n){case"X":return _f(yf.basicOptionalMinutes,r);case"XX":return _f(yf.basic,r);case"XXXX":return _f(yf.basicOptionalSeconds,r);case"XXXXX":return _f(yf.extendedOptionalSeconds,r);case"XXX":default:return _f(yf.extended,r)}}set(r,n,o){return n.timestampIsSet?r:Mo(r,r.getTime()-Y_(r)-o)}};u();var hq=class extends zr{constructor(){super(...arguments);St(this,"priority",10);St(this,"incompatibleTokens",["t","T","X"])}parse(r,n){switch(n){case"x":return _f(yf.basicOptionalMinutes,r);case"xx":return _f(yf.basic,r);case"xxxx":return _f(yf.basicOptionalSeconds,r);case"xxxxx":return _f(yf.extendedOptionalSeconds,r);case"xxx":default:return _f(yf.extended,r)}}set(r,n,o){return n.timestampIsSet?r:Mo(r,r.getTime()-Y_(r)-o)}};u();var mq=class extends zr{constructor(){super(...arguments);St(this,"priority",40);St(this,"incompatibleTokens","*")}parse(r){return qj(r)}set(r,n,o){return[Mo(r,o*1e3),{timestampIsSet:!0}]}};u();var gq=class extends zr{constructor(){super(...arguments);St(this,"priority",20);St(this,"incompatibleTokens","*")}parse(r){return qj(r)}set(r,n,o){return[Mo(r,o),{timestampIsSet:!0}]}};var rHe={G:new jj,y:new Uj,Y:new Bj,R:new Vj,u:new Gj,Q:new Hj,q:new $j,M:new Wj,L:new Yj,w:new Zj,I:new Kj,d:new Xj,D:new Jj,E:new Qj,e:new eq,c:new tq,i:new rq,a:new nq,b:new oq,B:new iq,h:new aq,H:new sq,K:new lq,k:new uq,m:new cq,s:new pq,S:new fq,X:new dq,x:new hq,t:new mq,T:new gq};var aTr=/[yYQqMLwIdDecihHKkms]o|(\w)\1*|''|'(''|[^'])+('|$)|./g,sTr=/P+p+|P+|p+|''|'(''|[^'])+('|$)|./g,lTr=/^'([^]*?)'?$/,uTr=/''/g,cTr=/\S/,pTr=/[a-zA-Z]/;function aoe(e,t,r,n){var D,L,z,B,G,Z,K,te,se,le,pe,me,_e,de,Ce,Ze,rt,ct;let o=()=>Mo((n==null?void 0:n.in)||r,NaN),i=ZGe(),a=(L=(D=n==null?void 0:n.locale)!=null?D:i.locale)!=null?L:FO,c=(le=(se=(Z=(G=n==null?void 0:n.firstWeekContainsDate)!=null?G:(B=(z=n==null?void 0:n.locale)==null?void 0:z.options)==null?void 0:B.firstWeekContainsDate)!=null?Z:i.firstWeekContainsDate)!=null?se:(te=(K=i.locale)==null?void 0:K.options)==null?void 0:te.firstWeekContainsDate)!=null?le:1,h=(ct=(rt=(de=(_e=n==null?void 0:n.weekStartsOn)!=null?_e:(me=(pe=n==null?void 0:n.locale)==null?void 0:pe.options)==null?void 0:me.weekStartsOn)!=null?de:i.weekStartsOn)!=null?rt:(Ze=(Ce=i.locale)==null?void 0:Ce.options)==null?void 0:Ze.weekStartsOn)!=null?ct:0;if(!t)return e?o():Ln(r,n==null?void 0:n.in);let m={firstWeekContainsDate:c,weekStartsOn:h,locale:a},y=[new Rj(n==null?void 0:n.in,r)],w=t.match(sTr).map(qe=>{let lt=qe[0];if(lt in UO){let _t=UO[lt];return _t(qe,a.formatLong)}return qe}).join("").match(aTr),E=[];for(let qe of w){!(n!=null&&n.useAdditionalWeekYearTokens)&&Nj(qe)&&BO(qe,t,e),!(n!=null&&n.useAdditionalDayOfYearTokens)&&Dj(qe)&&BO(qe,t,e);let lt=qe[0],_t=rHe[lt];if(_t){let{incompatibleTokens:Tt}=_t;if(Array.isArray(Tt)){let pt=E.find(ot=>Tt.includes(ot.token)||ot.token===lt);if(pt)throw new RangeError(`The format string mustn't contain \`${pt.fullToken}\` and \`${qe}\` at the same time`)}else if(_t.incompatibleTokens==="*"&&E.length>0)throw new RangeError(`The format string mustn't contain \`${qe}\` and any other token at the same time`);E.push({token:lt,fullToken:qe});let et=_t.run(e,qe,a.match,m);if(!et)return o();y.push(et.setter),e=et.rest}else{if(lt.match(pTr))throw new RangeError("Format string contains an unescaped latin alphabet character `"+lt+"`");if(qe==="''"?qe="'":lt==="'"&&(qe=fTr(qe)),e.indexOf(qe)===0)e=e.slice(qe.length);else return o()}}if(e.length>0&&cTr.test(e))return o();let A=y.map(qe=>qe.priority).sort((qe,lt)=>lt-qe).filter((qe,lt,_t)=>_t.indexOf(qe)===lt).map(qe=>y.filter(lt=>lt.priority===qe).sort((lt,_t)=>_t.subPriority-lt.subPriority)).map(qe=>qe[0]),P=Ln(r,n==null?void 0:n.in);if(isNaN(+P))return o();let j={};for(let qe of A){if(!qe.validate(P,m))return o();let lt=qe.set(P,j,m);Array.isArray(lt)?(P=lt[0],Object.assign(j,lt[1])):P=lt}return P}function fTr(e){return e.match(lTr)[1].replace(uTr,"'")}u();function nHe(e,t,r){let[n,o]=Mj(r==null?void 0:r.in,e,t);return n.getFullYear()===o.getFullYear()}u();function oHe(e,t){var m;let r=()=>Mo(t==null?void 0:t.in,NaN),n=(m=t==null?void 0:t.additionalDigits)!=null?m:2,o=gTr(e),i;if(o.date){let y=vTr(o.date,n);i=yTr(y.restDateString,y.year)}if(!i||isNaN(+i))return r();let a=+i,c=0,h;if(o.time&&(c=_Tr(o.time),isNaN(c)))return r();if(o.timezone){if(h=bTr(o.timezone),isNaN(h))return r()}else{let y=new Date(a+c),w=Ln(0,t==null?void 0:t.in);return w.setFullYear(y.getUTCFullYear(),y.getUTCMonth(),y.getUTCDate()),w.setHours(y.getUTCHours(),y.getUTCMinutes(),y.getUTCSeconds(),y.getUTCMilliseconds()),w}return Ln(a+c+h,t==null?void 0:t.in)}var vq={dateTimeDelimiter:/[T ]/,timeZoneDelimiter:/[Z ]/i,timezone:/([Z+-].*)$/},dTr=/^-?(?:(\d{3})|(\d{2})(?:-?(\d{2}))?|W(\d{2})(?:-?(\d{1}))?|)$/,hTr=/^(\d{2}(?:[.,]\d*)?)(?::?(\d{2}(?:[.,]\d*)?))?(?::?(\d{2}(?:[.,]\d*)?))?$/,mTr=/^([+-])(\d{2})(?::?(\d{2}))?$/;function gTr(e){let t={},r=e.split(vq.dateTimeDelimiter),n;if(r.length>2)return t;if(/:/.test(r[0])?n=r[0]:(t.date=r[0],n=r[1],vq.timeZoneDelimiter.test(t.date)&&(t.date=e.split(vq.timeZoneDelimiter)[0],n=e.substr(t.date.length,e.length))),n){let o=vq.timezone.exec(n);o?(t.time=n.replace(o[1],""),t.timezone=o[1]):t.time=n}return t}function vTr(e,t){let r=new RegExp("^(?:(\\d{4}|[+-]\\d{"+(4+t)+"})|(\\d{2}|[+-]\\d{"+(2+t)+"})$)"),n=e.match(r);if(!n)return{year:NaN,restDateString:""};let o=n[1]?parseInt(n[1]):null,i=n[2]?parseInt(n[2]):null;return{year:i===null?o:i*100,restDateString:e.slice((n[1]||n[2]).length)}}function yTr(e,t){if(t===null)return new Date(NaN);let r=e.match(dTr);if(!r)return new Date(NaN);let n=!!r[4],o=GO(r[1]),i=GO(r[2])-1,a=GO(r[3]),c=GO(r[4]),h=GO(r[5])-1;if(n)return TTr(t,c,h)?xTr(t,c,h):new Date(NaN);{let m=new Date(0);return!ETr(t,i,a)||!STr(t,o)?new Date(NaN):(m.setUTCFullYear(t,i,Math.max(o,a)),m)}}function GO(e){return e?parseInt(e):1}function _Tr(e){let t=e.match(hTr);if(!t)return NaN;let r=soe(t[1]),n=soe(t[2]),o=soe(t[3]);return ITr(r,n,o)?r*qO+n*jO+o*1e3:NaN}function soe(e){return e&&parseFloat(e.replace(",","."))||0}function bTr(e){if(e==="Z")return 0;let t=e.match(mTr);if(!t)return 0;let r=t[1]==="+"?-1:1,n=parseInt(t[2]),o=t[3]&&parseInt(t[3])||0;return MTr(n,o)?r*(n*qO+o*jO):NaN}function xTr(e,t,r){let n=new Date(0);n.setUTCFullYear(e,0,4);let o=n.getUTCDay()||7,i=(t-1)*7+r+1-o;return n.setUTCDate(n.getUTCDate()+i),n}var wTr=[31,null,31,30,31,30,31,31,30,31,30,31];function iHe(e){return e%400===0||e%4===0&&e%100!==0}function ETr(e,t,r){return t>=0&&t<=11&&r>=1&&r<=(wTr[t]||(iHe(e)?29:28))}function STr(e,t){return t>=1&&t<=(iHe(e)?366:365)}function TTr(e,t,r){return t>=1&&t<=53&&r>=0&&r<=6}function ITr(e,t,r){return e===24?t===0&&r===0:r>=0&&r<60&&t>=0&&t<60&&e>=0&&e<25}function MTr(e,t){return t>=0&&t<=59}var CS=class e{constructor({metadata:t,geometry:r}){St(this,"metadata",{});St(this,"geometry",{});if(this.constructor===e)throw new Error(`Abstract class '${this.constructor}' cannot be instantiated.`);this.metadata=t,this.geometry=r}getGeometry(){return this.geometry}getId(){return this.metadata.id}getMetadata(t){return Me(t)?this.metadata[t]:this.metadata}updateMetadata(t,r){if(!Me(t)){console.error("Cannot update metadata without key");return}if(!Object.values(Ue).includes(t)){console.error(`Cannot update metadata with invalid key '${t}'`);return}this.metadata[t]=r}getSortTime(){let t=this.metadata[Ue.timePeriod][0];return VO(t)}getDisplayTime(){let[t,r]=this.metadata[Ue.timePeriod];return nHe(t,r)?VO(t):`${VO(t)} \u2013 ${VO(r)}`}addLayerToMap(){throw new Error("Method 'addLayerToMap' must be implemented.")}isDisplayedInMap(){throw new Error("Method 'isDisplayedInMap' must be implemented.")}getType(){throw new Error("Method 'getType' must be implemented.")}setOpacity(){throw new Error("Method 'setOpacity' must be implemented.")}getOpacity(){throw new Error("Method 'getOpacity' must be implemented.")}moveToTop(){throw new Error("Method 'moveToTop' must be implemented.")}move(){throw new Error("Method 'move' must be implemented.")}getMapLibreLayerId(){throw new Error("Method 'getMapLibreLayerId' must be implemented.")}removeLayer(){throw new Error("Method 'removeLayer' must be implemented.")}setVisibility(){throw new Error("Method 'setVisibility' must be implemented.")}isVisible(){throw new Error("Method 'isVisible' must be implemented.")}serialize(){throw new Error("Method 'serialize' must be implemented.")}};u();u();var _q=ee(ke(),1);u();u();var HO=ee(ke(),1);var yq=ee(It(),1);var aHe=(e,{sourceId:t,fillId:r,outlineId:n})=>{e.addSource(t,{type:"geojson",data:{type:"FeatureCollection",features:[]}}),e.addLayer({id:r,type:"fill",source:t,paint:{"fill-color":"#ff0000","fill-opacity":.2}}),e.addLayer({id:n,type:"line",source:t,paint:{"line-color":"#ff0000","line-width":1}})},CTr=(e,{sourceId:t,fillId:r,outlineId:n})=>{e.getLayer(r)&&e.removeLayer(r),e.getLayer(n)&&e.removeLayer(n),e.getSource(t)&&e.removeSource(t)},sHe=e=>{let t=bt(rr);return(0,HO.useEffect)(()=>{if(Me(t)){let r=()=>{aHe(t,Te({},e))};return t._loaded?aHe(t,Te({},e)):t.once("load",r),()=>{CTr(t,Te({},e)),t.off("load",r)}}},[t]),HO.default.createElement(HO.default.Fragment,null)};sHe.propTypes={sourceId:yq.default.string.isRequired,fillId:yq.default.string.isRequired,outlineId:yq.default.string.isRequired};var lHe=sHe;var uHe=lHe;var cHe="vkf-map-overlay-source",Bu="vkf-map-overlay-fill",ATr="vkf-map-overlay-outline",loe=(e,t)=>{let r=e.getSource(cHe);r&&r.setData(t)},pHe=()=>_q.default.createElement(_q.default.Fragment,null,_q.default.createElement(uHe,{sourceId:cHe,fillId:Bu,outlineId:ATr}));pHe.propTypes={};var fHe=pHe;var dHe=(e,t,r,n)=>{var a,c;let o=e.getId();t.addSource(o,Dt(Te({type:"raster"},r),{bounds:e.getMetadata(Ue.bounds)}));let i=t.getLayer(Bu)!==void 0?Bu:void 0;t.addLayer({id:o,type:"raster",metadata:{[bp.id]:o},source:o,layout:{visibility:(a=n==null?void 0:n.visibility)!=null?a:"visible"},paint:{"raster-opacity":(c=n==null?void 0:n.opacity)!=null?c:1}},i)};u();u();u();var xp=6371008.8,y7n={centimeters:xp*100,centimetres:xp*100,degrees:360/(2*Math.PI),feet:xp*3.28084,inches:xp*39.37,kilometers:xp/1e3,kilometres:xp/1e3,meters:xp,metres:xp,miles:xp/1609.344,millimeters:xp*1e3,millimetres:xp*1e3,nauticalmiles:xp/1852,radians:1,yards:xp*1.0936};function mHe(e,t,r={}){let n={type:"Feature"};return(r.id===0||r.id)&&(n.id=r.id),r.bbox&&(n.bbox=r.bbox),n.properties=t||{},n.geometry=e,n}function gHe(e,t,r={}){if(!e)throw new Error("coordinates is required");if(!Array.isArray(e))throw new Error("coordinates must be an Array");if(e.length<2)throw new Error("coordinates must be at least 2 numbers long");if(!hHe(e[0])||!hHe(e[1]))throw new Error("coordinates must contain numbers");return mHe({type:"Point",coordinates:e},t,r)}function vHe(e,t,r={}){for(let o of e){if(o.length<4)throw new Error("Each LinearRing of a Polygon must have 4 or more Positions.");if(o[o.length-1].length!==o[0].length)throw new Error("First and last Position are not equivalent.");for(let i=0;i<o[o.length-1].length;i++)if(o[o.length-1][i]!==o[0][i])throw new Error("First and last Position are not equivalent.")}return mHe({type:"Polygon",coordinates:e},t,r)}function yHe(e,t={}){let r={type:"FeatureCollection"};return t.id&&(r.id=t.id),t.bbox&&(r.bbox=t.bbox),r.features=e,r}function hHe(e){return!isNaN(e)&&e!==null&&!Array.isArray(e)}function $O(e,t,r){if(e!==null)for(var n,o,i,a,c,h,m,y=0,w=0,E,A=e.type,P=A==="FeatureCollection",j=A==="Feature",D=P?e.features.length:1,L=0;L<D;L++){m=P?e.features[L].geometry:j?e.geometry:e,E=m?m.type==="GeometryCollection":!1,c=E?m.geometries.length:1;for(var z=0;z<c;z++){var B=0,G=0;if(a=E?m.geometries[z]:m,a!==null){h=a.coordinates;var Z=a.type;switch(y=r&&(Z==="Polygon"||Z==="MultiPolygon")?1:0,Z){case null:break;case"Point":if(t(h,w,L,B,G)===!1)return!1;w++,B++;break;case"LineString":case"MultiPoint":for(n=0;n<h.length;n++){if(t(h[n],w,L,B,G)===!1)return!1;w++,Z==="MultiPoint"&&B++}Z==="LineString"&&B++;break;case"Polygon":case"MultiLineString":for(n=0;n<h.length;n++){for(o=0;o<h[n].length-y;o++){if(t(h[n][o],w,L,B,G)===!1)return!1;w++}Z==="MultiLineString"&&B++,Z==="Polygon"&&G++}Z==="Polygon"&&B++;break;case"MultiPolygon":for(n=0;n<h.length;n++){for(G=0,o=0;o<h[n].length;o++){for(i=0;i<h[n][o].length-y;i++){if(t(h[n][o][i],w,L,B,G)===!1)return!1;w++}G++}B++}break;case"GeometryCollection":for(n=0;n<a.geometries.length;n++)if($O(a.geometries[n],t,r)===!1)return!1;break;default:throw new Error("Unknown Geometry Type")}}}}}function AS(e,t={}){if(e.bbox!=null&&t.recompute!==!0)return e.bbox;let r=[1/0,1/0,-1/0,-1/0];return $O(e,n=>{r[0]>n[0]&&(r[0]=n[0]),r[1]>n[1]&&(r[1]=n[1]),r[2]<n[0]&&(r[2]=n[0]),r[3]<n[1]&&(r[3]=n[1])}),r}var _He=AS;var WO,bq,bHe,uoe=class extends CS{constructor({metadata:r,geometry:n}){super({metadata:r,geometry:n});Ha(this,bq);Ha(this,WO,!1);fa(this,bq,bHe).call(this)}addLayerToMap(r,{sourceSettings:n,layerSettings:o}){if(r.getSource(this.getId())){console.error(`Source with id '${this.getId()}' exists already in map.`);return}return dHe(this,r,n,o)}addToOverlay(r,n){let o=r.getSource(n);if(o){let i=this.getPreviewFeature();i.id=this.getId();let a=[i];o.updateData({add:a})}}removeFromOverlay(r,n){let o=r.getSource(n);if(o){let i=[this.getId()];o.updateData({remove:i})}}getPreviewFeature(){return{type:"Feature",properties:{},geometry:this.geometry}}isDisplayedInMap(r){return r.getSource(this.getId())!==void 0&&r.getLayer(this.getId())!==void 0}getType(){return mo.HISTORIC_MAP}setOpacity(r,n){r.getLayer(this.getId())&&r.setPaintProperty(this.getId(),"raster-opacity",n)}getOpacity(r){var n;return r.getLayer(this.getId())?(n=r.getPaintProperty(this.getId(),"raster-opacity"))!=null?n:1:null}moveToTop(r){this.move(r,null)}move(r,n){let o=n;Me(n)||(Me(r.getLayer(Bu))?o=Bu:o=null),r.moveLayer(this.getId(),o)}getMapLibreLayerId(){return this.getId()}removeMapLibreLayers(r){r.getLayer(this.getMapLibreLayerId())&&r.removeLayer(this.getMapLibreLayerId()),r.getSource(this.getId())&&r.removeSource(this.getId())}setVisibility(r,n){r.setLayoutProperty(this.getMapLibreLayerId(),"visibility",n)}isVisible(r){return r.getLayoutProperty(this.getMapLibreLayerId(),"visibility")==="visible"}isMissing(){return qr(this,WO)}setIsMissing(r){$a(this,WO,r)}};WO=new WeakMap,bq=new WeakSet,bHe=function(){let r=this.geometry?AS(this.geometry):void 0;this.metadata[Ue.bounds]=r};var xHe=uoe;var kg=xHe;u();u();u();u();u();u();u();var YO=class extends Date{constructor(){super(),this.setTime(arguments.length===0?Date.now():arguments.length===1?typeof arguments[0]=="string"?+new Date(arguments[0]):arguments[0]:Date.UTC(...arguments))}getTimezoneOffset(){return 0}},wHe=/^(get|set)(?!UTC)/;Object.getOwnPropertyNames(Date.prototype).forEach(e=>{if(wHe.test(e)){let t=Date.prototype[e.replace(wHe,"$1UTC")];t&&(YO.prototype[e]=t)}});var xq=class extends YO{toString(){let t=this.toDateString(),r=this.toTimeString();return`${t} ${r}`}toDateString(){let t=OTr.format(this),r=PTr.format(this),n=this.getFullYear();return`${t} ${r} ${n}`}toTimeString(){return`${DTr.format(this)} GMT+0000 (Coordinated Universal Time)`}toLocaleString(t,r){return Date.prototype.toLocaleString.call(this,t,Te({timeZone:"UTC"},r))}toLocaleDateString(t,r){return Date.prototype.toLocaleDateString.call(this,t,Te({timeZone:"UTC"},r))}toLocaleTimeString(t,r){return Date.prototype.toLocaleTimeString.call(this,t,Te({timeZone:"UTC"},r))}},OTr=new Intl.DateTimeFormat("en-US",{weekday:"short",timeZone:"UTC"}),PTr=new Intl.DateTimeFormat("en-US",{month:"short",day:"numeric",timeZone:"UTC"}),DTr=new Intl.DateTimeFormat("en-GB",{hour12:!1,hour:"numeric",minute:"numeric",second:"numeric",timeZone:"UTC"});u();var s0=e=>new xq(+new Date(e));var OS={en:"MM/dd/yyyy",de:"dd.MM.yyyy"},EHe={en:/^[0-9]{2}\/[0-9]{2}\/[0-9]{4}$/,de:/^[0-9]{2}\.[0-9]{2}\.[0-9]{4}$/};function Ol(e){let t=mr.getSettings().LANGUAGE_CODE,r=new Date(e);return Yh(r)?Object.hasOwn(OS,t)?ioe(r,OS[t],{in:s0}):ioe(r,OS[gf.EN],{in:s0}):e}function Oc(e){let t=mr.getSettings().LANGUAGE_CODE,r=new Date;return Object.hasOwn(OS,t)?aoe(e,OS[t],r,{in:s0}):aoe(e,OS[gf.EN],r,{in:s0})}function l0(e,t={}){let r="";try{r=YGe(e,Dt(Te({},t),{in:s0}))}catch(n){r=""}return r}function wq(e){return!Me(e)||!bS(e)?new Date("invalid"):oHe(e,{in:s0})}function Yh(e){return Cj(e)}function coe(e){let t=mr.getSettings().LANGUAGE_CODE;return Object.hasOwn(EHe,t)?EHe[t].test(e)&&!Number.isNaN(Oc(e).valueOf()):!Number.isNaN(Oc(e).valueOf())}function Rg(e){return zO(e,{in:s0})}function ZO(e){return Me(e)?XGe(e):Number.NaN}function SHe(){return[l0(Date.now(),{representation:"date"}),l0(Date.now(),{representation:"date"})]}u();u();var Ir={SYMBOL:"symbol",LINE:"line",FILL:"fill",OUTLINE:"outline"},KO={[Ir.LINE]:"line-opacity",[Ir.FILL]:"fill-opacity",[Ir.OUTLINE]:"outline-opacity"},poe={[Ir.LINE]:"stroke-opacity",[Ir.FILL]:"fill-opacity",[Ir.OUTLINE]:"stroke-opacity"},foe=e=>Object.keys(poe).includes(e),cn={[Ir.SYMBOL]:{COLOR:"#0000FF"},[Ir.LINE]:{COLOR:"#00FF00",WIDTH:3,OPACITY:1},[Ir.OUTLINE]:{COLOR:"#0000FF",WIDTH:1,OPACITY:1},[Ir.FILL]:{COLOR:"#FFFF00",OPACITY:.27}},doe={[Ir.SYMBOL]:{type:"symbol",layout:{"icon-image":mr.getSettings().MARKER_IMAGE_ID,"icon-size":.5,"icon-anchor":"bottom","icon-allow-overlap":!0},paint:{"icon-color":["to-color",["feature-state","marker"],["get","marker"],cn[Ir.SYMBOL].COLOR],"icon-halo-color":"#FFF","icon-halo-width":1},filter:["==",["geometry-type"],"Point"]},[Ir.LINE]:{type:"line",paint:{"line-color":["coalesce",["feature-state","stroke"],["get","stroke"],cn[Ir.LINE].COLOR],"line-width":["coalesce",["feature-state","stroke-width"],["get","stroke-width"],cn[Ir.LINE].WIDTH],"line-opacity":["coalesce",["feature-state","stroke-opacity"],["get","stroke-opacity"],cn[Ir.LINE].OPACITY]},filter:["==",["geometry-type"],"LineString"]},[Ir.OUTLINE]:{type:"line",paint:{"line-color":["coalesce",["feature-state","stroke"],["get","stroke"],cn[Ir.OUTLINE].COLOR],"line-width":["coalesce",["feature-state","stroke-width"],["get","stroke-width"],cn[Ir.OUTLINE].WIDTH],"line-opacity":["coalesce",["feature-state","stroke-opacity"],["get","stroke-opacity"],cn[Ir.OUTLINE].OPACITY]},filter:["==",["geometry-type"],"Polygon"]},[Ir.FILL]:{type:"fill",paint:{"fill-color":["coalesce",["feature-state","fill"],["get","fill"],cn[Ir.FILL].COLOR],"fill-opacity":["coalesce",["feature-state","fill-opacity"],["get","fill-opacity"],cn[Ir.FILL].OPACITY]},filter:["==",["geometry-type"],"Polygon"]}};var kn={imgLink:"img_link",title:"title",description:"description",time:"time",marker:"marker",fill:"fill",fillOpacity:"fill-opacity",stroke:"stroke",strokeWidth:"stroke-width",strokeOpacity:"stroke-opacity"},u0={type:"FeatureCollection",features:[]},THe={Point:{marker:cn[Ir.SYMBOL].COLOR},MultiPoint:{marker:cn[Ir.SYMBOL].COLOR},Polygon:{fill:cn[Ir.FILL].COLOR,"fill-opacity":cn[Ir.FILL].OPACITY,stroke:cn[Ir.OUTLINE].COLOR,"stroke-opacity":cn[Ir.OUTLINE].OPACITY,"stroke-width":cn[Ir.OUTLINE].WIDTH},MultiPolygon:{fill:cn[Ir.FILL].COLOR,"fill-opacity":cn[Ir.FILL].OPACITY,stroke:cn[Ir.OUTLINE].COLOR,"stroke-opacity":cn[Ir.OUTLINE].OPACITY,"stroke-width":cn[Ir.OUTLINE].WIDTH},LineString:{stroke:cn[Ir.LINE].COLOR,"stroke-opacity":cn[Ir.LINE].OPACITY,"stroke-width":cn[Ir.LINE].WIDTH},MultiLineString:{stroke:cn[Ir.LINE].COLOR,"stroke-opacity":cn[Ir.LINE].OPACITY,"stroke-width":cn[Ir.LINE].WIDTH},GeometryCollection:{fill:cn[Ir.FILL].COLOR,"fill-opacity":cn[Ir.FILL].OPACITY,stroke:cn[Ir.LINE].COLOR,"stroke-opacity":cn[Ir.LINE].OPACITY,"stroke-width":cn[Ir.LINE].WIDTH}},XO={marker:{type:"color"},fill:{type:"color"},"fill-opacity":{step:.05,min:0,max:1,type:"number"},stroke:{type:"color"},"stroke-opacity":{max:1,min:0,step:.05,type:"number"},"stroke-width":{step:.1,min:0,max:20,type:"number"}},hoe=Object.keys(XO),PS=[kn.time,kn.title,kn.imgLink,kn.description],Vu={POINT:"Point",MULTI_POINT:"MultiPoint",POLYGON:"Polygon",MULTI_POLYGON:"MultiPolygon",LINE_STRING:"LineString",MULTI_LINE_STRING:"MultiLineString",GEOMETRY_COLLECTION:"GeometryCollection"},Ka={LOCAL:"local",REMOTE:"remote"};var IHe=e=>({type:"Polygon",coordinates:[[[e[0],e[1]],[e[2],e[1]],[e[2],e[3]],[e[0],e[3]],[e[0],e[1]]]]}),moe=e=>{let{properties:t}=e,r=LTr(t);return Dt(Te({},e),{properties:r})},goe=e=>{Object.hasOwn(e,"properties")||(e.properties={});let{properties:t}=e,r=NTr(t);return Dt(Te({},e),{properties:r})},NTr=e=>{let t=e[kn.time],r=kTr(t);return r.length===0?(delete e[kn.time],e):Dt(Te({},e),{[kn.time]:r})},LTr=e=>{let t=e[kn.time],r=RTr(t);return r.length===0?(delete e[kn.time],e):Dt(Te({},e),{[kn.time]:r})},kTr=e=>{if(Array.isArray(e)){if(e.length!==2)return[];let t=Rg(wq(e[0])).valueOf(),r=Rg(wq(e[1])).valueOf();return Number.isNaN(t)||Number.isNaN(r)?[]:t>r?[r,t]:[t,r]}if(bS(e)){let t=Rg(wq(e)).valueOf();return Number.isNaN(e)?[]:[t,t]}return[]},RTr=e=>{if(!Array.isArray(e))return[];if(e.length!==2)return[];let t=l0(e[0]),r=l0(e[1]);return t===""||r===""?[]:[t,r]},Eq=e=>{if(!Me(e))return[];let[t,r]=e;return!Me(t)||!Me(r)?[]:["any",["!",["has",kn.time]],["all",["<=",["at",0,["get",kn.time]],r*1e3],[">=",["at",1,["get",kn.time]],t*1e3]]]};u();u();var MHe=e=>{let t={};for(let r of Object.keys(Ir)){let n=Ir[r],o=`${e}-${n}`;t[o]=Dt(Te({id:o,source:e,metadata:{[bp.id]:e}},doe[n]),{layout:Dt(Te({},doe[n].layout),{visibility:"visible"})})}return t};u();var voe=class e{constructor(){if(this.constructor===e)throw new Error(`Abstract class '${this.constructor}' cannot be instantiated.`)}addLayerToMap(){throw new Error("Method 'addLayerToMap' must be implemented.")}removeLayerFromMap(){throw new Error("Method 'removeLayerFromMap' must be implemented.")}setDataOnMap(){throw new Error("Method 'setDataOnMap' must be implemented.")}getOpacity(){throw new Error("Method 'getOpacity' must be implemented.")}setOpacity(){throw new Error("Method 'setOpacity' must be implemented.")}isVisible(){throw new Error("Method 'isVisible' must be implemented.")}setVisibility(){throw new Error("Method 'setVisibility' must be implemented.")}isDisplayedInMap(){throw new Error("Method 'isDisplayedInMap' must be implemented.")}getLayerId(){throw new Error("Method 'getLayerId' must be implemented.")}move(){throw new Error("Method 'move' must be implemented.")}setFilters(){throw new Error("Method 'setFilters' must be implemented.")}resetFilters(){throw new Error("Method 'resetFilters' must be implemented.")}},Sq=voe;var CHe=[{type:"mousemove",handler:e=>e.target.getCanvas().style.cursor="pointer"},{type:"mouseleave",handler:e=>e.target.getCanvas().style.cursor=""}],c0,p0,DS,uu,AHe,OHe,Zh,yoe=class extends Sq{constructor(r){super();Ha(this,uu);Ha(this,c0,null);Ha(this,p0,[]);Ha(this,DS,{});$a(this,c0,r)}addLayerToMap(r,n,o){var h,m;if(!Me(r))return;let i=qr(this,c0),a=MHe(i);r.addSource(i,{type:"geojson",data:o});let c=r.getLayer(Bu)!==void 0?Bu:void 0;for(let[y,w]of Object.entries(a))r.addLayer(w,c),qr(this,p0).push(y),qr(this,DS)[y]=w.filter;if(Me(n)){let{layerSettings:y}=n,w=(h=y==null?void 0:y.opacity)!=null?h:1,E=(m=y==null?void 0:y.visibility)!=null?m:"visible";this.setOpacity(r,w),this.setVisibility(r,E)}fa(this,uu,AHe).call(this,r)}removeLayerFromMap(r){if(Me(r)){for(let{id:n}of fa(this,uu,Zh).call(this,r))fa(this,uu,OHe).call(this,r,n),r.removeLayer(n);r.removeSource(qr(this,c0)),$a(this,p0,[])}}setDataOnMap(r,n){let o=r.getSource(qr(this,c0));if(!Me(o)){console.error("Cannot update geojson on map. Source layer not found");return}o.setData(n)}getOpacity(r){let n=fa(this,uu,Zh).call(this,r),o=1,i=1;if(n.length===0)return null;for(let{id:a,type:c}of n){if(!foe(c))continue;let h=KO[c];o=r.getPaintProperty(a,h);break}if(typeof o=="number")return o;if(Array.isArray(o)&&o.length>0){if(o[0]==="*")return o[2];if(o[0]==="coalesce")return o[3]}return i}setOpacity(r,n){let o=fa(this,uu,Zh).call(this,r);if(!(o.length===0||!Me(n)))for(let{id:i,type:a}of o){if(!foe(a))continue;let c=cn[a].OPACITY,h=KO[a],m=poe[a];r.setPaintProperty(i,h,["*",["coalesce",["feature-state",m],["get",m],c],n])}}isVisible(r){let n=fa(this,uu,Zh).call(this,r);return n.length===0?!1:r.getLayoutProperty(n[0].id,"visibility")==="visible"}setVisibility(r,n){let o=fa(this,uu,Zh).call(this,r);if(!(o.length===0||!Me(n)))for(let{id:i}of o)r.setLayoutProperty(i,"visibility",n)}isDisplayedInMap(r){return r.getSource(qr(this,c0))!==void 0}getLayerId(){return qr(this,p0).length>0?qr(this,p0)[0]:null}move(r,n){let o=fa(this,uu,Zh).call(this,r),i=n;Me(n)||(Me(r.getLayer(Bu))?i=Bu:i=null),o.forEach(({id:a})=>{r.moveLayer(a,i)})}setFilters(r,n){let o=fa(this,uu,Zh).call(this,r);if(o.length===0)return;let i=n==null?void 0:n.timeExtent,a=Eq(i);for(let c of o){let{id:h}=c,y=["all",qr(this,DS)[h]];Me(a)&&a.length>0&&y.push(a),r.setFilter(h,y)}}resetFilters(r){let n=fa(this,uu,Zh).call(this,r);if(n.length!==0)for(let o of n){let{id:i}=o,a=qr(this,DS)[i];r.setFilter(i,a)}}};c0=new WeakMap,p0=new WeakMap,DS=new WeakMap,uu=new WeakSet,AHe=function(r){for(let{id:n}of fa(this,uu,Zh).call(this,r))for(let{type:o,handler:i}of CHe)r.on(o,n,i)},OHe=function(r,n){for(let{type:o,handler:i}of CHe)r.off(o,n,i)},Zh=function(r){let n=qr(this,p0).map(o=>r.getLayer(o));return n[0]===void 0?[]:n};var PHe=yoe;u();u();var N$e=ee(RO(),1);u();u();var Tq={},jTr=()=>{let e=pr(({set:r})=>(n,o)=>{r(n,o)},[]),t=pr(({snapshot:r})=>n=>yt(null,null,function*(){return r.getPromise(n)}),[]);return Tq.setState=e,Tq.getStateAsync=t,null},_oe=(e,t)=>Tq.setState(e,t),Iq=e=>yt(null,null,function*(){return Tq.getStateAsync(e)}),DHe=jTr;var NHe=DHe;u();var na={hoverPolygon:"hover_polygon",contentCertainty:"content_certainty",temporalCertainty:"temporal_certainty",spatialCertainty:"spatial_certainty",permalink:"permanent_link",parentLabel:"parent_label",tags:"tag",timeLabelDe:"time_label_edtf_de",timeLabelEn:"time_label_edtf_en",idohistLightColor:"idohist_light_color",idohistDarkColor:"idohist_dark_color"},Mq="#00b19e",JO="#00927E",K_={fill:.4,line:1},QO=["all",["==",["geometry-type"],"Polygon"],["==",["id"],"NON_EXISTING_ID"]],Cq={fill:{type:"fill",paint:{"fill-color":["coalesce",["get","idohist_light_color"],Mq],"fill-opacity":K_.fill},filter:QO},outline:{type:"line",paint:{"line-color":["coalesce",["get","idohist_dark_color"],JO],"line-width":2,"line-opacity":K_.line},filter:QO}},LHe={line:{type:"line",paint:{"line-color":["coalesce",["get","idohist_dark_color"],JO],"line-width":2,"line-opacity":K_.line},filter:["==",["geometry-type"],"LineString"]},fill:{type:"fill",paint:{"fill-color":["coalesce",["get","idohist_light_color"],Mq],"fill-opacity":K_.fill},filter:["==",["geometry-type"],"Polygon"]},outline:{type:"line",paint:{"line-color":["coalesce",["get","idohist_dark_color"],JO],"line-width":2,"line-opacity":K_.line},filter:["==",["geometry-type"],"Polygon"]}};u();u();u();u();function Pl(e){return function(){return e}}u();var boe=Math.abs,Dl=Math.atan2,f0=Math.cos,kHe=Math.max,Aq=Math.min,Dd=Math.sin,X_=Math.sqrt,Gu=1e-12,NS=Math.PI,eP=NS/2,LS=2*NS;function RHe(e){return e>1?0:e<-1?NS:Math.acos(e)}function xoe(e){return e>=1?eP:e<=-1?-eP:Math.asin(e)}u();u();u();var woe=Math.PI,Eoe=2*woe,J_=1e-6,qTr=Eoe-J_;function jHe(e){this._+=e[0];for(let t=1,r=e.length;t<r;++t)this._+=arguments[t]+e[t]}function zTr(e){let t=Math.floor(e);if(!(t>=0))throw new Error(`invalid digits: ${e}`);if(t>15)return jHe;let r=ig(10,t);return function(n){this._+=n[0];for(let o=1,i=n.length;o<i;++o)this._+=Math.round(arguments[o]*r)/r+n[o]}}var Q_=class{constructor(t){this._x0=this._y0=this._x1=this._y1=null,this._="",this._append=t==null?jHe:zTr(t)}moveTo(t,r){this._append`M${this._x0=this._x1=+t},${this._y0=this._y1=+r}`}closePath(){this._x1!==null&&(this._x1=this._x0,this._y1=this._y0,this._append`Z`)}lineTo(t,r){this._append`L${this._x1=+t},${this._y1=+r}`}quadraticCurveTo(t,r,n,o){this._append`Q${+t},${+r},${this._x1=+n},${this._y1=+o}`}bezierCurveTo(t,r,n,o,i,a){this._append`C${+t},${+r},${+n},${+o},${this._x1=+i},${this._y1=+a}`}arcTo(t,r,n,o,i){if(t=+t,r=+r,n=+n,o=+o,i=+i,i<0)throw new Error(`negative radius: ${i}`);let a=this._x1,c=this._y1,h=n-t,m=o-r,y=a-t,w=c-r,E=y*y+w*w;if(this._x1===null)this._append`M${this._x1=t},${this._y1=r}`;else if(E>J_)if(!(Math.abs(w*h-m*y)>J_)||!i)this._append`L${this._x1=t},${this._y1=r}`;else{let A=n-a,P=o-c,j=h*h+m*m,D=A*A+P*P,L=Math.sqrt(j),z=Math.sqrt(E),B=i*Math.tan((woe-Math.acos((j+E-D)/(2*L*z)))/2),G=B/z,Z=B/L;Math.abs(G-1)>J_&&this._append`L${t+G*y},${r+G*w}`,this._append`A${i},${i},0,0,${+(w*A>y*P)},${this._x1=t+Z*h},${this._y1=r+Z*m}`}}arc(t,r,n,o,i,a){if(t=+t,r=+r,n=+n,a=!!a,n<0)throw new Error(`negative radius: ${n}`);let c=n*Math.cos(o),h=n*Math.sin(o),m=t+c,y=r+h,w=1^a,E=a?o-i:i-o;this._x1===null?this._append`M${m},${y}`:(Math.abs(this._x1-m)>J_||Math.abs(this._y1-y)>J_)&&this._append`L${m},${y}`,n&&(E<0&&(E=E%Eoe+Eoe),E>qTr?this._append`A${n},${n},0,1,${w},${t-c},${r-h}A${n},${n},0,1,${w},${this._x1=m},${this._y1=y}`:E>J_&&this._append`A${n},${n},0,${+(E>=woe)},${w},${this._x1=t+n*Math.cos(i)},${this._y1=r+n*Math.sin(i)}`)}rect(t,r,n,o){this._append`M${this._x0=this._x1=+t},${this._y0=this._y1=+r}h${n=+n}v${+o}h${-n}Z`}toString(){return this._}};function qHe(){return new Q_}qHe.prototype=Q_.prototype;function zHe(e){let t=3;return e.digits=function(r){if(!arguments.length)return t;if(r==null)t=null;else{let n=Math.floor(r);if(!(n>=0))throw new RangeError(`invalid digits: ${r}`);t=n}return e},()=>new Q_(t)}function FTr(e){return e.innerRadius}function UTr(e){return e.outerRadius}function BTr(e){return e.startAngle}function VTr(e){return e.endAngle}function GTr(e){return e&&e.padAngle}function HTr(e,t,r,n,o,i,a,c){var h=r-e,m=n-t,y=a-o,w=c-i,E=w*h-y*m;if(!(E*E<Gu))return E=(y*(t-i)-w*(e-o))/E,[e+E*h,t+E*m]}function Oq(e,t,r,n,o,i,a){var c=e-r,h=t-n,m=(a?i:-i)/X_(c*c+h*h),y=m*h,w=-m*c,E=e+y,A=t+w,P=r+y,j=n+w,D=(E+P)/2,L=(A+j)/2,z=P-E,B=j-A,G=z*z+B*B,Z=o-i,K=E*j-P*A,te=(B<0?-1:1)*X_(kHe(0,Z*Z*G-K*K)),se=(K*B-z*te)/G,le=(-K*z-B*te)/G,pe=(K*B+z*te)/G,me=(-K*z+B*te)/G,_e=se-D,de=le-L,Ce=pe-D,Ze=me-L;return _e*_e+de*de>Ce*Ce+Ze*Ze&&(se=pe,le=me),{cx:se,cy:le,x01:-y,y01:-w,x11:se*(o/Z-1),y11:le*(o/Z-1)}}function Pq(){var e=FTr,t=UTr,r=Pl(0),n=null,o=BTr,i=VTr,a=GTr,c=null,h=zHe(m);function m(){var y,w,E=+e.apply(this,arguments),A=+t.apply(this,arguments),P=o.apply(this,arguments)-eP,j=i.apply(this,arguments)-eP,D=boe(j-P),L=j>P;if(c||(c=y=h()),A<E&&(w=A,A=E,E=w),!(A>Gu))c.moveTo(0,0);else if(D>LS-Gu)c.moveTo(A*f0(P),A*Dd(P)),c.arc(0,0,A,P,j,!L),E>Gu&&(c.moveTo(E*f0(j),E*Dd(j)),c.arc(0,0,E,j,P,L));else{var z=P,B=j,G=P,Z=j,K=D,te=D,se=a.apply(this,arguments)/2,le=se>Gu&&(n?+n.apply(this,arguments):X_(E*E+A*A)),pe=Aq(boe(A-E)/2,+r.apply(this,arguments)),me=pe,_e=pe,de,Ce;if(le>Gu){var Ze=xoe(le/E*Dd(se)),rt=xoe(le/A*Dd(se));(K-=Ze*2)>Gu?(Ze*=L?1:-1,G+=Ze,Z-=Ze):(K=0,G=Z=(P+j)/2),(te-=rt*2)>Gu?(rt*=L?1:-1,z+=rt,B-=rt):(te=0,z=B=(P+j)/2)}var ct=A*f0(z),qe=A*Dd(z),lt=E*f0(Z),_t=E*Dd(Z);if(pe>Gu){var Tt=A*f0(B),et=A*Dd(B),pt=E*f0(G),ot=E*Dd(G),$e;if(D<NS)if($e=HTr(ct,qe,pt,ot,Tt,et,lt,_t)){var De=ct-$e[0],Ke=qe-$e[1],Ge=Tt-$e[0],ft=et-$e[1],mt=1/Dd(RHe((De*Ge+Ke*ft)/(X_(De*De+Ke*Ke)*X_(Ge*Ge+ft*ft)))/2),Ot=X_($e[0]*$e[0]+$e[1]*$e[1]);me=Aq(pe,(E-Ot)/(mt-1)),_e=Aq(pe,(A-Ot)/(mt+1))}else me=_e=0}te>Gu?_e>Gu?(de=Oq(pt,ot,ct,qe,A,_e,L),Ce=Oq(Tt,et,lt,_t,A,_e,L),c.moveTo(de.cx+de.x01,de.cy+de.y01),_e<pe?c.arc(de.cx,de.cy,_e,Dl(de.y01,de.x01),Dl(Ce.y01,Ce.x01),!L):(c.arc(de.cx,de.cy,_e,Dl(de.y01,de.x01),Dl(de.y11,de.x11),!L),c.arc(0,0,A,Dl(de.cy+de.y11,de.cx+de.x11),Dl(Ce.cy+Ce.y11,Ce.cx+Ce.x11),!L),c.arc(Ce.cx,Ce.cy,_e,Dl(Ce.y11,Ce.x11),Dl(Ce.y01,Ce.x01),!L))):(c.moveTo(ct,qe),c.arc(0,0,A,z,B,!L)):c.moveTo(ct,qe),!(E>Gu)||!(K>Gu)?c.lineTo(lt,_t):me>Gu?(de=Oq(lt,_t,Tt,et,E,-me,L),Ce=Oq(ct,qe,pt,ot,E,-me,L),c.lineTo(de.cx+de.x01,de.cy+de.y01),me<pe?c.arc(de.cx,de.cy,me,Dl(de.y01,de.x01),Dl(Ce.y01,Ce.x01),!L):(c.arc(de.cx,de.cy,me,Dl(de.y01,de.x01),Dl(de.y11,de.x11),!L),c.arc(0,0,E,Dl(de.cy+de.y11,de.cx+de.x11),Dl(Ce.cy+Ce.y11,Ce.cx+Ce.x11),L),c.arc(Ce.cx,Ce.cy,me,Dl(Ce.y11,Ce.x11),Dl(Ce.y01,Ce.x01),!L))):c.arc(0,0,E,Z,G,L)}if(c.closePath(),y)return c=null,y+""||null}return m.centroid=function(){var y=(+e.apply(this,arguments)+ +t.apply(this,arguments))/2,w=(+o.apply(this,arguments)+ +i.apply(this,arguments))/2-NS/2;return[f0(w)*y,Dd(w)*y]},m.innerRadius=function(y){return arguments.length?(e=typeof y=="function"?y:Pl(+y),m):e},m.outerRadius=function(y){return arguments.length?(t=typeof y=="function"?y:Pl(+y),m):t},m.cornerRadius=function(y){return arguments.length?(r=typeof y=="function"?y:Pl(+y),m):r},m.padRadius=function(y){return arguments.length?(n=y==null?null:typeof y=="function"?y:Pl(+y),m):n},m.startAngle=function(y){return arguments.length?(o=typeof y=="function"?y:Pl(+y),m):o},m.endAngle=function(y){return arguments.length?(i=typeof y=="function"?y:Pl(+y),m):i},m.padAngle=function(y){return arguments.length?(a=typeof y=="function"?y:Pl(+y),m):a},m.context=function(y){return arguments.length?(c=y==null?null:y,m):c},m}u();var lUn=Array.prototype.slice;function FHe(e){return typeof e=="object"&&"length"in e?e:Array.from(e)}u();u();function UHe(e,t){return t<e?-1:t>e?1:t>=e?0:NaN}u();function BHe(e){return e}function Soe(){var e=BHe,t=UHe,r=null,n=Pl(0),o=Pl(LS),i=Pl(0);function a(c){var h,m=(c=FHe(c)).length,y,w,E=0,A=new Array(m),P=new Array(m),j=+n.apply(this,arguments),D=Math.min(LS,Math.max(-LS,o.apply(this,arguments)-j)),L,z=Math.min(Math.abs(D)/m,i.apply(this,arguments)),B=z*(D<0?-1:1),G;for(h=0;h<m;++h)(G=P[A[h]=h]=+e(c[h],h,c))>0&&(E+=G);for(t!=null?A.sort(function(Z,K){return t(P[Z],P[K])}):r!=null&&A.sort(function(Z,K){return r(c[Z],c[K])}),h=0,w=E?(D-m*B)/E:0;h<m;++h,j=L)y=A[h],G=P[y],L=j+(G>0?G*w:0)+B,P[y]={data:c[y],index:h,value:G,startAngle:j,endAngle:L,padAngle:z};return P}return a.value=function(c){return arguments.length?(e=typeof c=="function"?c:Pl(+c),a):e},a.sortValues=function(c){return arguments.length?(t=c,r=null,a):t},a.sort=function(c){return arguments.length?(r=c,t=null,a):r},a.startAngle=function(c){return arguments.length?(n=typeof c=="function"?c:Pl(+c),a):n},a.endAngle=function(c){return arguments.length?(o=typeof c=="function"?c:Pl(+c),a):o},a.padAngle=function(c){return arguments.length?(i=typeof c=="function"?c:Pl(+c),a):i},a}u();u();u();u();var Dq="http://www.w3.org/1999/xhtml",Toe={svg:"http://www.w3.org/2000/svg",xhtml:Dq,xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"};function Nq(e){var t=e+="",r=t.indexOf(":");return r>=0&&(t=e.slice(0,r))!=="xmlns"&&(e=e.slice(r+1)),Toe.hasOwnProperty(t)?{space:Toe[t],local:e}:e}function $Tr(e){return function(){var t=this.ownerDocument,r=this.namespaceURI;return r===Dq&&t.documentElement.namespaceURI===Dq?t.createElement(e):t.createElementNS(r,e)}}function WTr(e){return function(){return this.ownerDocument.createElementNS(e.space,e.local)}}function Lq(e){var t=Nq(e);return(t.local?WTr:$Tr)(t)}u();u();u();u();function YTr(){}function kq(e){return e==null?YTr:function(){return this.querySelector(e)}}function VHe(e){typeof e!="function"&&(e=kq(e));for(var t=this._groups,r=t.length,n=new Array(r),o=0;o<r;++o)for(var i=t[o],a=i.length,c=n[o]=new Array(a),h,m,y=0;y<a;++y)(h=i[y])&&(m=e.call(h,h.__data__,y,i))&&("__data__"in h&&(m.__data__=h.__data__),c[y]=m);return new Ra(n,this._parents)}u();u();function Ioe(e){return e==null?[]:Array.isArray(e)?e:Array.from(e)}u();function ZTr(){return[]}function GHe(e){return e==null?ZTr:function(){return this.querySelectorAll(e)}}function KTr(e){return function(){return Ioe(e.apply(this,arguments))}}function HHe(e){typeof e=="function"?e=KTr(e):e=GHe(e);for(var t=this._groups,r=t.length,n=[],o=[],i=0;i<r;++i)for(var a=t[i],c=a.length,h,m=0;m<c;++m)(h=a[m])&&(n.push(e.call(h,h.__data__,m,a)),o.push(h));return new Ra(n,o)}u();u();function $He(e){return function(){return this.matches(e)}}function Rq(e){return function(t){return t.matches(e)}}var XTr=Array.prototype.find;function JTr(e){return function(){return XTr.call(this.children,e)}}function QTr(){return this.firstElementChild}function WHe(e){return this.select(e==null?QTr:JTr(typeof e=="function"?e:Rq(e)))}u();var e2r=Array.prototype.filter;function t2r(){return Array.from(this.children)}function r2r(e){return function(){return e2r.call(this.children,e)}}function YHe(e){return this.selectAll(e==null?t2r:r2r(typeof e=="function"?e:Rq(e)))}u();function ZHe(e){typeof e!="function"&&(e=$He(e));for(var t=this._groups,r=t.length,n=new Array(r),o=0;o<r;++o)for(var i=t[o],a=i.length,c=n[o]=[],h,m=0;m<a;++m)(h=i[m])&&e.call(h,h.__data__,m,i)&&c.push(h);return new Ra(n,this._parents)}u();u();u();function jq(e){return new Array(e.length)}function KHe(){return new Ra(this._enter||this._groups.map(jq),this._parents)}function tP(e,t){this.ownerDocument=e.ownerDocument,this.namespaceURI=e.namespaceURI,this._next=null,this._parent=e,this.__data__=t}tP.prototype={constructor:tP,appendChild:function(e){return this._parent.insertBefore(e,this._next)},insertBefore:function(e,t){return this._parent.insertBefore(e,t)},querySelector:function(e){return this._parent.querySelector(e)},querySelectorAll:function(e){return this._parent.querySelectorAll(e)}};u();function XHe(e){return function(){return e}}function n2r(e,t,r,n,o,i){for(var a=0,c,h=t.length,m=i.length;a<m;++a)(c=t[a])?(c.__data__=i[a],n[a]=c):r[a]=new tP(e,i[a]);for(;a<h;++a)(c=t[a])&&(o[a]=c)}function o2r(e,t,r,n,o,i,a){var c,h,m=new Map,y=t.length,w=i.length,E=new Array(y),A;for(c=0;c<y;++c)(h=t[c])&&(E[c]=A=a.call(h,h.__data__,c,t)+"",m.has(A)?o[c]=h:m.set(A,h));for(c=0;c<w;++c)A=a.call(e,i[c],c,i)+"",(h=m.get(A))?(n[c]=h,h.__data__=i[c],m.delete(A)):r[c]=new tP(e,i[c]);for(c=0;c<y;++c)(h=t[c])&&m.get(E[c])===h&&(o[c]=h)}function i2r(e){return e.__data__}function JHe(e,t){if(!arguments.length)return Array.from(this,i2r);var r=t?o2r:n2r,n=this._parents,o=this._groups;typeof e!="function"&&(e=XHe(e));for(var i=o.length,a=new Array(i),c=new Array(i),h=new Array(i),m=0;m<i;++m){var y=n[m],w=o[m],E=w.length,A=a2r(e.call(y,y&&y.__data__,m,n)),P=A.length,j=c[m]=new Array(P),D=a[m]=new Array(P),L=h[m]=new Array(E);r(y,w,j,D,L,A,t);for(var z=0,B=0,G,Z;z<P;++z)if(G=j[z]){for(z>=B&&(B=z+1);!(Z=D[B])&&++B<P;);G._next=Z||null}}return a=new Ra(a,n),a._enter=c,a._exit=h,a}function a2r(e){return typeof e=="object"&&"length"in e?e:Array.from(e)}u();function QHe(){return new Ra(this._exit||this._groups.map(jq),this._parents)}u();function e$e(e,t,r){var n=this.enter(),o=this,i=this.exit();return typeof e=="function"?(n=e(n),n&&(n=n.selection())):n=n.append(e+""),t!=null&&(o=t(o),o&&(o=o.selection())),r==null?i.remove():r(i),n&&o?n.merge(o).order():o}u();function t$e(e){for(var t=e.selection?e.selection():e,r=this._groups,n=t._groups,o=r.length,i=n.length,a=Math.min(o,i),c=new Array(o),h=0;h<a;++h)for(var m=r[h],y=n[h],w=m.length,E=c[h]=new Array(w),A,P=0;P<w;++P)(A=m[P]||y[P])&&(E[P]=A);for(;h<o;++h)c[h]=r[h];return new Ra(c,this._parents)}u();function r$e(){for(var e=this._groups,t=-1,r=e.length;++t<r;)for(var n=e[t],o=n.length-1,i=n[o],a;--o>=0;)(a=n[o])&&(i&&a.compareDocumentPosition(i)^4&&i.parentNode.insertBefore(a,i),i=a);return this}u();function n$e(e){e||(e=s2r);function t(w,E){return w&&E?e(w.__data__,E.__data__):!w-!E}for(var r=this._groups,n=r.length,o=new Array(n),i=0;i<n;++i){for(var a=r[i],c=a.length,h=o[i]=new Array(c),m,y=0;y<c;++y)(m=a[y])&&(h[y]=m);h.sort(t)}return new Ra(o,this._parents).order()}function s2r(e,t){return e<t?-1:e>t?1:e>=t?0:NaN}u();function o$e(){var e=arguments[0];return arguments[0]=this,e.apply(null,arguments),this}u();function i$e(){return Array.from(this)}u();function a$e(){for(var e=this._groups,t=0,r=e.length;t<r;++t)for(var n=e[t],o=0,i=n.length;o<i;++o){var a=n[o];if(a)return a}return null}u();function s$e(){let e=0;for(let t of this)++e;return e}u();function l$e(){return!this.node()}u();function u$e(e){for(var t=this._groups,r=0,n=t.length;r<n;++r)for(var o=t[r],i=0,a=o.length,c;i<a;++i)(c=o[i])&&e.call(c,c.__data__,i,o);return this}u();function l2r(e){return function(){this.removeAttribute(e)}}function u2r(e){return function(){this.removeAttributeNS(e.space,e.local)}}function c2r(e,t){return function(){this.setAttribute(e,t)}}function p2r(e,t){return function(){this.setAttributeNS(e.space,e.local,t)}}function f2r(e,t){return function(){var r=t.apply(this,arguments);r==null?this.removeAttribute(e):this.setAttribute(e,r)}}function d2r(e,t){return function(){var r=t.apply(this,arguments);r==null?this.removeAttributeNS(e.space,e.local):this.setAttributeNS(e.space,e.local,r)}}function c$e(e,t){var r=Nq(e);if(arguments.length<2){var n=this.node();return r.local?n.getAttributeNS(r.space,r.local):n.getAttribute(r)}return this.each((t==null?r.local?u2r:l2r:typeof t=="function"?r.local?d2r:f2r:r.local?p2r:c2r)(r,t))}u();u();function qq(e){return e.ownerDocument&&e.ownerDocument.defaultView||e.document&&e||e.defaultView}function h2r(e){return function(){this.style.removeProperty(e)}}function m2r(e,t,r){return function(){this.style.setProperty(e,t,r)}}function g2r(e,t,r){return function(){var n=t.apply(this,arguments);n==null?this.style.removeProperty(e):this.style.setProperty(e,n,r)}}function p$e(e,t,r){return arguments.length>1?this.each((t==null?h2r:typeof t=="function"?g2r:m2r)(e,t,r==null?"":r)):v2r(this.node(),e)}function v2r(e,t){return e.style.getPropertyValue(t)||qq(e).getComputedStyle(e,null).getPropertyValue(t)}u();function y2r(e){return function(){delete this[e]}}function _2r(e,t){return function(){this[e]=t}}function b2r(e,t){return function(){var r=t.apply(this,arguments);r==null?delete this[e]:this[e]=r}}function f$e(e,t){return arguments.length>1?this.each((t==null?y2r:typeof t=="function"?b2r:_2r)(e,t)):this.node()[e]}u();function d$e(e){return e.trim().split(/^|\s+/)}function Moe(e){return e.classList||new h$e(e)}function h$e(e){this._node=e,this._names=d$e(e.getAttribute("class")||"")}h$e.prototype={add:function(e){var t=this._names.indexOf(e);t<0&&(this._names.push(e),this._node.setAttribute("class",this._names.join(" ")))},remove:function(e){var t=this._names.indexOf(e);t>=0&&(this._names.splice(t,1),this._node.setAttribute("class",this._names.join(" ")))},contains:function(e){return this._names.indexOf(e)>=0}};function m$e(e,t){for(var r=Moe(e),n=-1,o=t.length;++n<o;)r.add(t[n])}function g$e(e,t){for(var r=Moe(e),n=-1,o=t.length;++n<o;)r.remove(t[n])}function x2r(e){return function(){m$e(this,e)}}function w2r(e){return function(){g$e(this,e)}}function E2r(e,t){return function(){(t.apply(this,arguments)?m$e:g$e)(this,e)}}function v$e(e,t){var r=d$e(e+"");if(arguments.length<2){for(var n=Moe(this.node()),o=-1,i=r.length;++o<i;)if(!n.contains(r[o]))return!1;return!0}return this.each((typeof t=="function"?E2r:t?x2r:w2r)(r,t))}u();function S2r(){this.textContent=""}function T2r(e){return function(){this.textContent=e}}function I2r(e){return function(){var t=e.apply(this,arguments);this.textContent=t==null?"":t}}function y$e(e){return arguments.length?this.each(e==null?S2r:(typeof e=="function"?I2r:T2r)(e)):this.node().textContent}u();function M2r(){this.innerHTML=""}function C2r(e){return function(){this.innerHTML=e}}function A2r(e){return function(){var t=e.apply(this,arguments);this.innerHTML=t==null?"":t}}function _$e(e){return arguments.length?this.each(e==null?M2r:(typeof e=="function"?A2r:C2r)(e)):this.node().innerHTML}u();function O2r(){this.nextSibling&&this.parentNode.appendChild(this)}function b$e(){return this.each(O2r)}u();function P2r(){this.previousSibling&&this.parentNode.insertBefore(this,this.parentNode.firstChild)}function x$e(){return this.each(P2r)}u();function w$e(e){var t=typeof e=="function"?e:Lq(e);return this.select(function(){return this.appendChild(t.apply(this,arguments))})}u();function D2r(){return null}function E$e(e,t){var r=typeof e=="function"?e:Lq(e),n=t==null?D2r:typeof t=="function"?t:kq(t);return this.select(function(){return this.insertBefore(r.apply(this,arguments),n.apply(this,arguments)||null)})}u();function N2r(){var e=this.parentNode;e&&e.removeChild(this)}function S$e(){return this.each(N2r)}u();function L2r(){var e=this.cloneNode(!1),t=this.parentNode;return t?t.insertBefore(e,this.nextSibling):e}function k2r(){var e=this.cloneNode(!0),t=this.parentNode;return t?t.insertBefore(e,this.nextSibling):e}function T$e(e){return this.select(e?k2r:L2r)}u();function I$e(e){return arguments.length?this.property("__data__",e):this.node().__data__}u();function R2r(e){return function(t){e.call(this,t,this.__data__)}}function j2r(e){return e.trim().split(/^|\s+/).map(function(t){var r="",n=t.indexOf(".");return n>=0&&(r=t.slice(n+1),t=t.slice(0,n)),{type:t,name:r}})}function q2r(e){return function(){var t=this.__on;if(t){for(var r=0,n=-1,o=t.length,i;r<o;++r)i=t[r],(!e.type||i.type===e.type)&&i.name===e.name?this.removeEventListener(i.type,i.listener,i.options):t[++n]=i;++n?t.length=n:delete this.__on}}}function z2r(e,t,r){return function(){var n=this.__on,o,i=R2r(t);if(n){for(var a=0,c=n.length;a<c;++a)if((o=n[a]).type===e.type&&o.name===e.name){this.removeEventListener(o.type,o.listener,o.options),this.addEventListener(o.type,o.listener=i,o.options=r),o.value=t;return}}this.addEventListener(e.type,i,r),o={type:e.type,name:e.name,value:t,listener:i,options:r},n?n.push(o):this.__on=[o]}}function M$e(e,t,r){var n=j2r(e+""),o,i=n.length,a;if(arguments.length<2){var c=this.node().__on;if(c){for(var h=0,m=c.length,y;h<m;++h)for(o=0,y=c[h];o<i;++o)if((a=n[o]).type===y.type&&a.name===y.name)return y.value}return}for(c=t?z2r:q2r,o=0;o<i;++o)this.each(c(n[o],t,r));return this}u();function C$e(e,t,r){var n=qq(e),o=n.CustomEvent;typeof o=="function"?o=new o(t,r):(o=n.document.createEvent("Event"),r?(o.initEvent(t,r.bubbles,r.cancelable),o.detail=r.detail):o.initEvent(t,!1,!1)),e.dispatchEvent(o)}function F2r(e,t){return function(){return C$e(this,e,t)}}function U2r(e,t){return function(){return C$e(this,e,t.apply(this,arguments))}}function A$e(e,t){return this.each((typeof t=="function"?U2r:F2r)(e,t))}u();function*O$e(){for(var e=this._groups,t=0,r=e.length;t<r;++t)for(var n=e[t],o=0,i=n.length,a;o<i;++o)(a=n[o])&&(yield a)}var Coe=[null];function Ra(e,t){this._groups=e,this._parents=t}function B2r(){return new Ra([[document.documentElement]],Coe)}function V2r(){return this}Ra.prototype=B2r.prototype={constructor:Ra,select:VHe,selectAll:HHe,selectChild:WHe,selectChildren:YHe,filter:ZHe,data:JHe,enter:KHe,exit:QHe,join:e$e,merge:t$e,selection:V2r,order:r$e,sort:n$e,call:o$e,nodes:i$e,node:a$e,size:s$e,empty:l$e,each:u$e,attr:c$e,style:p$e,property:f$e,classed:v$e,text:y$e,html:_$e,raise:b$e,lower:x$e,append:w$e,insert:E$e,remove:S$e,clone:T$e,datum:I$e,on:M$e,dispatch:A$e,[Symbol.iterator]:O$e};function zq(e){return typeof e=="string"?new Ra([[document.querySelector(e)]],[document.documentElement]):new Ra([[e]],Coe)}var Nd={},Aoe="http://www.w3.org/2000/svg";typeof document!="undefined"&&(Nd.svg=document.createElementNS(Aoe,"svg"),Nd.arcs=document.createElementNS(Aoe,"g"),Nd.arcs.classList.add("arcs"),Nd.circle=document.createElementNS(Aoe,"circle"),Nd.circle.classList.add("circle"));var Ooe=45,G2r=(e,t)=>{let n=t-7-4,o=7+(1-e)*n,i=Math.round((1-e)*7),a=Nd.circle.cloneNode();return a.setAttribute("r",o),a.style.setProperty("--idohist-spatial-blur",`${i}px`),a.classList.add("spatial-certainty"),a},H2r=()=>{let e=Nd.circle.cloneNode();return e.setAttribute("r",Ooe),e.classList.add("background"),e},P$e=e=>{let t=Nd.circle.cloneNode();return t.setAttribute("r",e),t.classList.add("track"),t},D$e=({spatialCertainty:e,temporalCertainty:t,contentCertainty:r,lightColor:n,darkColor:o})=>{let i=Ooe*2,a=5,c=3,h=6,m=Ooe-a,y=m-h,w=y-c,E=w-h,A=P$e(w-(w-E)/2),P=P$e(m-(m-y)/2),j=G2r(e,E),D=H2r(),L=Nd.svg.cloneNode();L.style.setProperty("--idohist-light-color",n),L.style.setProperty("--idohist-dark-color",o);let z=Nd.arcs.cloneNode();z.classList.add("temporal");let B=Nd.arcs.cloneNode();B.classList.add("content");let G={content:[{value:r,cssClass:"certainty"},{value:1-r,cssClass:"uncertainty"}],temporal:[{value:t,cssClass:"certainty"},{value:1-t,cssClass:"uncertainty"}]},Z=Pq().innerRadius(m).outerRadius(y),K=Pq().innerRadius(E).outerRadius(w),te=Soe().sort(null).value(pe=>pe.value),se=zq(B),le=zq(z);return se.selectAll().data(te(G.content)).enter().append("path").attr("d",Z).attr("class",pe=>pe.data.cssClass),le.selectAll().data(te(G.temporal)).enter().append("path").attr("d",K).attr("class",pe=>pe.data.cssClass),L.setAttribute("viewBox",`${-i/2}, ${-i/2}, ${i}, ${i}`),L.append(D,j,A,P,z,B),L};var L$e="marker-idohist",k$e="data-vkf-feature-id",R$e="data-vkf-source-id",j$e="data-vkf-source-id-hover",Uq="data-vkf-visibility",Poe=Symbol("vkf:feature-properties"),$2r={type:"Polygon",coordinates:[]},W2r=typeof document!="undefined"?document.createElement("div"):{},Doe=e=>{if(!Me(e))return;let t=e.closest(`div.${L$e}`),r=parseInt(t.getAttribute(k$e),10),n=t.getAttribute(R$e),o=t.getAttribute(j$e),i=t.getAttribute(Uq);return{featureId:r,sourceId:n,sourceIdHover:o,visibility:i}},q$e=(e,t,r)=>{if(!Me(e))return;let n=Object.keys(Cq).map(o=>`${t}-${o}`);for(let o of n){if(!Me(r)){e.setFilter(o,QO);continue}let i=["all",QO[1],["==",["id"],r]];e.setFilter(o,i)}},Y2r=e=>{e.stopPropagation();let{target:t}=e,{featureId:r,sourceId:n,visibility:o}=Doe(t);o!==Ng.NONE&&_oe(el,{featureId:r,sourceId:n})},Z2r=e=>{e.stopPropagation();let{target:t}=e,{featureId:r,sourceIdHover:n,visibility:o}=Doe(t);o!==Ng.NONE&&Iq(rr).then(i=>{q$e(i,n,r)})},K2r=e=>{e.stopPropagation();let{target:t}=e,{sourceIdHover:r,visibility:n}=Doe(t);n!==Ng.NONE&&Iq(rr).then(o=>{q$e(o,r,null)})},z$e=(e,{sourceId:t,sourceIdHover:r})=>{let n=e.geometry.coordinates,o=e.id,{properties:i}=e,a=eb(i[na.contentCertainty]),c=eb(i[na.temporalCertainty]),h=eb(i[na.spatialCertainty]),{lightColor:m,darkColor:y}=V$e(i),w=W2r.cloneNode();w.classList.add(L$e),w.setAttribute(k$e,o),w.setAttribute(R$e,t),w.setAttribute(j$e,r);let E=D$e({spatialCertainty:h,temporalCertainty:c,contentCertainty:a,lightColor:m,darkColor:y});w.appendChild(E),w.addEventListener("click",Y2r),w.addEventListener("mouseenter",Z2r),w.addEventListener("mouseleave",K2r);let A=new N$e.Marker({element:w});return A.isVisible=!0,A.setLngLat(n),A[Poe]=e.properties,A},F$e=e=>{let{properties:t}=e,r=$2r;Object.hasOwn(t,na.hoverPolygon)&&t[na.hoverPolygon].type==="Polygon"&&(r=t[na.hoverPolygon]);let{lightColor:n,darkColor:o}=V$e(t);return{type:"Feature",geometry:r,id:e.id,properties:{[na.idohistLightColor]:n,[na.idohistDarkColor]:o}}},U$e=(e,t,r)=>{let n={};for(let o of Object.keys(t)){let i=`${e}-${o}`;n[i]=Te(Dt(Te({id:i,source:e},t[o]),{layout:Dt(Te({},t[o].layout),{visibility:"visible"})}),r&&{metadata:{[bp.id]:e,[bp.contentType]:Uu.IDOHIST}})}return n},Fq={largeZoom:{slope:.04,intercept:.24},smallZoom:{slope:.038,intercept:.06}},B$e=e=>e>14?Fq.largeZoom.slope*e+Fq.largeZoom.intercept:Fq.smallZoom.slope*e+Fq.smallZoom.intercept,eb=e=>Number.isNaN(Number.parseFloat(e))||e<0?0:e>1?1:e,V$e=e=>{var n,o;let t=(n=e[na.idohistDarkColor])!=null?n:JO,r=(o=e[na.idohistLightColor])!=null?o:Mq;return{darkColor:t,lightColor:r}};var G$e=[{type:"mousemove",handler:e=>e.target.getCanvas().style.cursor="pointer"},{type:"mouseleave",handler:e=>e.target.getCanvas().style.cursor=""}],H$e=(e,{sourceId:t,sourceIdHover:r})=>{let n={type:"FeatureCollection",features:[]},o=[];for(let i of e.features){if(i.geometry.type!=="Point")continue;let a=z$e(i,{sourceIdHover:r,sourceId:t});o.push(a);let c=F$e(i);n.features.push(c)}return{markers:o,geoJsonHoverPolygons:n}},Nl,Ld,kd,RS,rP,jg,jS,bf,kS,$$e,W$e,Noe=class extends Sq{constructor(r){super();Ha(this,bf);Ha(this,Nl,[]);Ha(this,Ld,null);Ha(this,kd,null);Ha(this,RS,!0);Ha(this,rP,1);Ha(this,jg,[]);Ha(this,jS,{});$a(this,Ld,r),$a(this,kd,`${r}-hover`)}addLayerToMap(r,n,o){var m,y;if(!Me(r))return;let{markers:i,geoJsonHoverPolygons:a}=H$e(o,{sourceId:qr(this,Ld),sourceIdHover:qr(this,kd)});$a(this,Nl,i),qr(this,Nl).forEach(w=>w.addTo(r));let c=r.getLayer(Bu)!==void 0?Bu:void 0,h=[{sourceId:qr(this,Ld),definition:LHe,data:o,hasPopup:!0},{sourceId:qr(this,kd),definition:Cq,data:a,hasPopup:!1}];for(let{sourceId:w,definition:E,data:A,hasPopup:P}of h){r.addSource(w,{type:"geojson",data:A});let j=U$e(w,E,P);for(let[D,L]of Object.entries(j))r.addLayer(L,c),qr(this,jg).push(D),qr(this,jS)[D]=L.filter}if(Me(n)){let{layerSettings:w}=n,E=(m=w==null?void 0:w.opacity)!=null?m:1,A=(y=w==null?void 0:w.visibility)!=null?y:"visible";this.setVisibility(r,A),this.setOpacity(r,E)}fa(this,bf,$$e).call(this,r)}removeLayerFromMap(r){qr(this,Nl).forEach(n=>n.remove()),$a(this,Nl,[]);for(let n of qr(this,jg))fa(this,bf,W$e).call(this,r,n),r.removeLayer(n);r.removeSource(qr(this,Ld)),r.removeSource(qr(this,kd)),$a(this,jg,[])}setDataOnMap(r,n){let{markers:o,geoJsonHoverPolygons:i}=H$e(n,{sourceId:qr(this,Ld),sourceIdHover:qr(this,kd)});qr(this,Nl).forEach(h=>h.remove()),$a(this,Nl,o),qr(this,Nl).forEach(h=>h.addTo(r));let a=r.getSource(qr(this,Ld)),c=r.getSource(qr(this,kd));if(!Me(a)||!Me(c)){console.error("Cannot update geojson on map. Source layer not found");return}a.setData(n),c.setData(i)}getOpacity(){return qr(this,rP)}setOpacity(r,n){if(!Me(n))return;$a(this,rP,n),qr(this,Nl).forEach(i=>i.setOpacity(n,0));let o=fa(this,bf,kS).call(this,r);for(let{id:i,type:a}of o){let c=K_[a],h=KO[a];r.setPaintProperty(i,h,["*",c,n])}}isVisible(){return qr(this,Nl).length===0?!1:qr(this,RS)}setVisibility(r,n){let o=fa(this,bf,kS).call(this,r);if(!(o.length===0||!Me(n))){for(let{id:i}of o)r.setLayoutProperty(i,"visibility",n);if(n===Ng.VISIBLE){for(let i of qr(this,Nl)){let a=i.getElement();a.setAttribute(Uq,Ng.VISIBLE),a.style.setProperty("display","block")}$a(this,RS,!0),r.fireVisibilityChanged(qr(this,Ld),n),r.fireVisibilityChanged(qr(this,kd),n);return}if(n===Ng.NONE){for(let i of qr(this,Nl)){let a=i.getElement();a.setAttribute(Uq,Ng.NONE),a.style.setProperty("display","none")}$a(this,RS,!1),r.fireVisibilityChanged(qr(this,Ld),n),r.fireVisibilityChanged(qr(this,kd),n);return}}}isDisplayedInMap(){return qr(this,Nl).length>0}getLayerId(){return qr(this,jg).length>0?qr(this,jg)[0]:null}move(){}setFilters(r,n){let o=n==null?void 0:n.timeExtent,i=Eq(o),a=fa(this,bf,kS).call(this,r);for(let c of a){let{id:h}=c,y=["all",qr(this,jS)[h]];Me(i)&&i.length>0&&y.push(i),r.setFilter(h,y)}for(let c of qr(this,Nl)){let[h,m]=c[Poe][kn.time],{timeExtent:y}=n;h<=y[1]*1e3&&m>=y[0]*1e3?c.addTo(r):c.remove()}}resetFilters(r){let n=fa(this,bf,kS).call(this,r);qr(this,Nl).forEach(o=>o.addTo(r));for(let o of n){let{id:i}=o,a=qr(this,jS)[i];r.setFilter(i,a)}}};Nl=new WeakMap,Ld=new WeakMap,kd=new WeakMap,RS=new WeakMap,rP=new WeakMap,jg=new WeakMap,jS=new WeakMap,bf=new WeakSet,kS=function(r){let n=qr(this,jg).map(o=>r.getLayer(o));return n[0]===void 0?[]:n},$$e=function(r){for(let{id:n}of fa(this,bf,kS).call(this,r))for(let{type:o,handler:i}of G$e)r.on(o,n,i)},W$e=function(r,n){for(let{type:o,handler:i}of G$e)r.off(o,n,i)};var Y$e=Noe;var tb,Ll,Bq,Z$e,qg=class qg extends CS{constructor({metadata:r,geometry:n,geoJson:o}){if(!qr(qg,tb))throw new TypeError("Constructor is private. Use GeoJsonLayer.fromApplication() or GeoJsonLayer.fromPersistence() instead.");$a(qg,tb,!1);super({metadata:r,geometry:n});Ha(this,Bq);St(this,"geoJSON",{});Ha(this,Ll,null);fa(this,Bq,Z$e).call(this,o),this.metadata[Ue.externalContentType]===Uu.IDOHIST?$a(this,Ll,new Y$e(this.getId())):$a(this,Ll,new PHe(this.getId()))}static fromApplication(r){return $a(qg,tb,!0),new qg(r)}static fromPersistence({metadata:r,geometry:n,geoJson:o}){$a(qg,tb,!0);let i=o.features.map(goe),a=Dt(Te({},o),{features:i});return new qg({metadata:r,geometry:n,geoJson:a})}getGeoJson(){return this.geoJSON}getGeoJsonForPersistence(){var o;let r=structuredClone(this.getGeoJson()),n=(o=r.features)!=null?o:[];return n=n.map(moe),r.features=n,r}setGeoJson(r){let n=r.features.map((i,a)=>(Object.hasOwn(i,"properties")||(i.properties={}),Me(i.id)?Te({},i):Dt(Te({},i),{id:a+1}))),o=Dt(Te({},r),{features:n});this.geoJSON=o}getFeature(r){let n=this.geoJSON.features.find(o=>o.id===r);return Me(n)?n:(console.warn(`No feature found for id '${r}'`),null)}getType(){return mo.VECTOR_MAP}isRemote(){return Me(this.metadata[Ue.vectorMapId])}isLocal(){return!this.isRemote()}isExternalVectorMap(){let r=this.metadata[Ue.externalContentUrl];return Me(r)&&_p(r)}getPreviewFeature(){let r=this.getMetadata(Ue.bounds);return{type:"Feature",properties:{},geometry:IHe(r)}}addLayerToMap(r,n){qr(this,Ll).addLayerToMap(r,n,this.geoJSON)}removeMapLibreLayers(r){qr(this,Ll).removeLayerFromMap(r)}setDataOnMap(r,n){!Me(r)||!Me(n)||(this.setGeoJson(n),qr(this,Ll).setDataOnMap(r,this.geoJSON))}getMapLibreLayerId(){return qr(this,Ll).getLayerId()}getOpacity(r){return qr(this,Ll).getOpacity(r)}setOpacity(r,n){qr(this,Ll).setOpacity(r,n)}isVisible(r){return qr(this,Ll).isVisible(r)}setVisibility(r,n){qr(this,Ll).setVisibility(r,n)}isDisplayedInMap(r){return qr(this,Ll).isDisplayedInMap(r)}move(r,n){qr(this,Ll).move(r,n)}moveToTop(r){this.move(r,null)}setFilters(r,n){if(!Me(n)||(n==null?void 0:n.length)===0){qr(this,Ll).resetFilters(r);return}qr(this,Ll).setFilters(r,n)}static toApplicationState(r){var i;if(!Me(r))return r;let n=structuredClone(r),o=(i=n.features)!=null?i:[];return o=o.map(goe),n.features=o,n}static toPersistenceState(r){var i;if(!Me(r))return r;let n=structuredClone(r),o=(i=n.features)!=null?i:[];return o=o.map(moe),n.features=o,n}};tb=new WeakMap,Ll=new WeakMap,Bq=new WeakSet,Z$e=function(r){var o,i;this.setGeoJson(r);let n=this.geometry?AS(this.geometry):AS(this.geoJSON);this.metadata[Ue.bounds]=n,this.metadata[Ue.id]=(o=this.metadata[Ue.id])!=null?o:crypto.randomUUID(),this.metadata[Ue.timePeriod]=(i=this.metadata[Ue.timePeriod])!=null?i:SHe(),this.metadata[Ue.hasGeoReference]=!0},Ha(qg,tb,!1);var Loe=qg,K$e=Loe;var $o=K$e;u();var X$e=_s,Hu={$schema:"http://json-schema.org/draft-07/schema#",$id:"https://geojson.org/schema/FeatureCollection.json",title:"GeoJSON FeatureCollection",type:"object",required:["type","features"],properties:{type:{type:"string",enum:["FeatureCollection"]},features:{type:"array",items:{title:"GeoJSON Feature",type:"object",required:["type","properties","geometry"],properties:{type:{type:"string",enum:["Feature"]},id:{oneOf:[{type:"number"},{type:"string"}]},properties:{oneOf:[{type:"null"},{type:"object"}]},geometry:{oneOf:[{type:"null"},{title:"GeoJSON Point",type:"object",required:["type","coordinates"],properties:{type:{type:"string",enum:["Point"]},coordinates:{type:"array",minItems:2,items:{type:"number"}},bbox:{type:"array",minItems:4,items:{type:"number"}}}},{title:"GeoJSON LineString",type:"object",required:["type","coordinates"],properties:{type:{type:"string",enum:["LineString"]},coordinates:{type:"array",minItems:2,items:{type:"array",minItems:2,items:{type:"number"}}},bbox:{type:"array",minItems:4,items:{type:"number"}}}},{title:"GeoJSON Polygon",type:"object",required:["type","coordinates"],properties:{type:{type:"string",enum:["Polygon"]},coordinates:{type:"array",items:{type:"array",minItems:4,items:{type:"array",minItems:2,items:{type:"number"}}}},bbox:{type:"array",minItems:4,items:{type:"number"}}}},{title:"GeoJSON MultiPoint",type:"object",required:["type","coordinates"],properties:{type:{type:"string",enum:["MultiPoint"]},coordinates:{type:"array",items:{type:"array",minItems:2,items:{type:"number"}}},bbox:{type:"array",minItems:4,items:{type:"number"}}}},{title:"GeoJSON MultiLineString",type:"object",required:["type","coordinates"],properties:{type:{type:"string",enum:["MultiLineString"]},coordinates:{type:"array",items:{type:"array",minItems:2,items:{type:"array",minItems:2,items:{type:"number"}}}},bbox:{type:"array",minItems:4,items:{type:"number"}}}},{title:"GeoJSON MultiPolygon",type:"object",required:["type","coordinates"],properties:{type:{type:"string",enum:["MultiPolygon"]},coordinates:{type:"array",items:{type:"array",items:{type:"array",minItems:4,items:{type:"array",minItems:2,items:{type:"number"}}}}},bbox:{type:"array",minItems:4,items:{type:"number"}}}},{title:"GeoJSON GeometryCollection",type:"object",required:["type","geometries"],properties:{type:{type:"string",enum:["GeometryCollection"]},geometries:{type:"array",items:{oneOf:[{title:"GeoJSON Point",type:"object",required:["type","coordinates"],properties:{type:{type:"string",enum:["Point"]},coordinates:{type:"array",minItems:2,items:{type:"number"}},bbox:{type:"array",minItems:4,items:{type:"number"}}}},{title:"GeoJSON LineString",type:"object",required:["type","coordinates"],properties:{type:{type:"string",enum:["LineString"]},coordinates:{type:"array",minItems:2,items:{type:"array",minItems:2,items:{type:"number"}}},bbox:{type:"array",minItems:4,items:{type:"number"}}}},{title:"GeoJSON Polygon",type:"object",required:["type","coordinates"],properties:{type:{type:"string",enum:["Polygon"]},coordinates:{type:"array",items:{type:"array",minItems:4,items:{type:"array",minItems:2,items:{type:"number"}}}},bbox:{type:"array",minItems:4,items:{type:"number"}}}},{title:"GeoJSON MultiPoint",type:"object",required:["type","coordinates"],properties:{type:{type:"string",enum:["MultiPoint"]},coordinates:{type:"array",items:{type:"array",minItems:2,items:{type:"number"}}},bbox:{type:"array",minItems:4,items:{type:"number"}}}},{title:"GeoJSON MultiLineString",type:"object",required:["type","coordinates"],properties:{type:{type:"string",enum:["MultiLineString"]},coordinates:{type:"array",items:{type:"array",minItems:2,items:{type:"array",minItems:2,items:{type:"number"}}}},bbox:{type:"array",minItems:4,items:{type:"number"}}}},{title:"GeoJSON MultiPolygon",type:"object",required:["type","coordinates"],properties:{type:{type:"string",enum:["MultiPolygon"]},coordinates:{type:"array",items:{type:"array",items:{type:"array",minItems:4,items:{type:"array",minItems:2,items:{type:"number"}}}}},bbox:{type:"array",minItems:4,items:{type:"number"}}}}]}},bbox:{type:"array",minItems:4,items:{type:"number"}}}}]},bbox:{type:"array",minItems:4,items:{type:"number"}}}}},bbox:{type:"array",minItems:4,items:{type:"number"}}}};function _s(e,{instancePath:t="",parentData:r,parentDataProperty:n,rootData:o=e}={}){let i=null,a=0;if(a===0)if(e&&typeof e=="object"&&!Array.isArray(e)){let Ee;if(e.type===void 0&&(Ee="type")||e.features===void 0&&(Ee="features"))return _s.errors=[{instancePath:t,schemaPath:"#/required",keyword:"required",params:{missingProperty:Ee},message:"must have required property '"+Ee+"'"}],!1;if(e.type!==void 0){let Be=e.type,gt=a;if(typeof Be!="string")return _s.errors=[{instancePath:t+"/type",schemaPath:"#/properties/type/type",keyword:"type",params:{type:"string"},message:"must be string"}],!1;if(Be!=="FeatureCollection")return _s.errors=[{instancePath:t+"/type",schemaPath:"#/properties/type/enum",keyword:"enum",params:{allowedValues:Hu.properties.type.enum},message:"must be equal to one of the allowed values"}],!1;var c=gt===a}else var c=!0;if(c){if(e.features!==void 0){let Be=e.features,gt=a;if(a===gt)if(Array.isArray(Be)){var h=!0;let Pt=Be.length;for(let Oe=0;Oe<Pt;Oe++){let xt=Be[Oe],Bt=a;if(a===Bt)if(xt&&typeof xt=="object"&&!Array.isArray(xt)){let pn;if(xt.type===void 0&&(pn="type")||xt.properties===void 0&&(pn="properties")||xt.geometry===void 0&&(pn="geometry"))return _s.errors=[{instancePath:t+"/features/"+Oe,schemaPath:"#/properties/features/items/required",keyword:"required",params:{missingProperty:pn},message:"must have required property '"+pn+"'"}],!1;if(xt.type!==void 0){let wt=xt.type,an=a;if(typeof wt!="string")return _s.errors=[{instancePath:t+"/features/"+Oe+"/type",schemaPath:"#/properties/features/items/properties/type/type",keyword:"type",params:{type:"string"},message:"must be string"}],!1;if(wt!=="Feature")return _s.errors=[{instancePath:t+"/features/"+Oe+"/type",schemaPath:"#/properties/features/items/properties/type/enum",keyword:"enum",params:{allowedValues:Hu.properties.features.items.properties.type.enum},message:"must be equal to one of the allowed values"}],!1;var m=an===a}else var m=!0;if(m){if(xt.id!==void 0){let wt=xt.id,an=a,Cr=a,or=!1,Er=null,Rt=a;if(!(typeof wt=="number"&&isFinite(wt))){let Un={instancePath:t+"/features/"+Oe+"/id",schemaPath:"#/properties/features/items/properties/id/oneOf/0/type",keyword:"type",params:{type:"number"},message:"must be number"};i===null?i=[Un]:i.push(Un),a++}var y=Rt===a;y&&(or=!0,Er=0);let qo=a;if(typeof wt!="string"){let Un={instancePath:t+"/features/"+Oe+"/id",schemaPath:"#/properties/features/items/properties/id/oneOf/1/type",keyword:"type",params:{type:"string"},message:"must be string"};i===null?i=[Un]:i.push(Un),a++}var y=qo===a;if(y&&or?(or=!1,Er=[Er,1]):y&&(or=!0,Er=1),or)a=Cr,i!==null&&(Cr?i.length=Cr:i=null);else{let Un={instancePath:t+"/features/"+Oe+"/id",schemaPath:"#/properties/features/items/properties/id/oneOf",keyword:"oneOf",params:{passingSchemas:Er},message:"must match exactly one schema in oneOf"};return i===null?i=[Un]:i.push(Un),a++,_s.errors=i,!1}var m=an===a}else var m=!0;if(m){if(xt.properties!==void 0){let wt=xt.properties,an=a,Cr=a,or=!1,Er=null,Rt=a;if(wt!==null){let Un={instancePath:t+"/features/"+Oe+"/properties",schemaPath:"#/properties/features/items/properties/properties/oneOf/0/type",keyword:"type",params:{type:"null"},message:"must be null"};i===null?i=[Un]:i.push(Un),a++}var w=Rt===a;w&&(or=!0,Er=0);let qo=a;if(!(wt&&typeof wt=="object"&&!Array.isArray(wt))){let Un={instancePath:t+"/features/"+Oe+"/properties",schemaPath:"#/properties/features/items/properties/properties/oneOf/1/type",keyword:"type",params:{type:"object"},message:"must be object"};i===null?i=[Un]:i.push(Un),a++}var w=qo===a;if(w&&or?(or=!1,Er=[Er,1]):w&&(or=!0,Er=1),or)a=Cr,i!==null&&(Cr?i.length=Cr:i=null);else{let Un={instancePath:t+"/features/"+Oe+"/properties",schemaPath:"#/properties/features/items/properties/properties/oneOf",keyword:"oneOf",params:{passingSchemas:Er},message:"must match exactly one schema in oneOf"};return i===null?i=[Un]:i.push(Un),a++,_s.errors=i,!1}var m=an===a}else var m=!0;if(m){if(xt.geometry!==void 0){let wt=xt.geometry,an=a,Cr=a,or=!1,Er=null,Rt=a;if(wt!==null){let Un={instancePath:t+"/features/"+Oe+"/geometry",schemaPath:"#/properties/features/items/properties/geometry/oneOf/0/type",keyword:"type",params:{type:"null"},message:"must be null"};i===null?i=[Un]:i.push(Un),a++}var j=Rt===a;j&&(or=!0,Er=0);let qo=a;if(a===qo)if(wt&&typeof wt=="object"&&!Array.isArray(wt)){let Un;if(wt.type===void 0&&(Un="type")||wt.coordinates===void 0&&(Un="coordinates")){let ua={instancePath:t+"/features/"+Oe+"/geometry",schemaPath:"#/properties/features/items/properties/geometry/oneOf/1/required",keyword:"required",params:{missingProperty:Un},message:"must have required property '"+Un+"'"};i===null?i=[ua]:i.push(ua),a++}else{if(wt.type!==void 0){let ua=wt.type,zt=a;if(typeof ua!="string"){let Dr={instancePath:t+"/features/"+Oe+"/geometry/type",schemaPath:"#/properties/features/items/properties/geometry/oneOf/1/properties/type/type",keyword:"type",params:{type:"string"},message:"must be string"};i===null?i=[Dr]:i.push(Dr),a++}if(ua!=="Point"){let Dr={instancePath:t+"/features/"+Oe+"/geometry/type",schemaPath:"#/properties/features/items/properties/geometry/oneOf/1/properties/type/enum",keyword:"enum",params:{allowedValues:Hu.properties.features.items.properties.geometry.oneOf[1].properties.type.enum},message:"must be equal to one of the allowed values"};i===null?i=[Dr]:i.push(Dr),a++}var E=zt===a}else var E=!0;if(E){if(wt.coordinates!==void 0){let ua=wt.coordinates,zt=a;if(a===zt)if(Array.isArray(ua)){if(ua.length<2){let hr={instancePath:t+"/features/"+Oe+"/geometry/coordinates",schemaPath:"#/properties/features/items/properties/geometry/oneOf/1/properties/coordinates/minItems",keyword:"minItems",params:{limit:2},message:"must NOT have fewer than 2 items"};i===null?i=[hr]:i.push(hr),a++}else{var A=!0;let hr=ua.length;for(let yn=0;yn<hr;yn++){let _n=ua[yn],On=a;if(!(typeof _n=="number"&&isFinite(_n))){let fn={instancePath:t+"/features/"+Oe+"/geometry/coordinates/"+yn,schemaPath:"#/properties/features/items/properties/geometry/oneOf/1/properties/coordinates/items/type",keyword:"type",params:{type:"number"},message:"must be number"};i===null?i=[fn]:i.push(fn),a++}var A=On===a;if(!A)break}}}else{let hr={instancePath:t+"/features/"+Oe+"/geometry/coordinates",schemaPath:"#/properties/features/items/properties/geometry/oneOf/1/properties/coordinates/type",keyword:"type",params:{type:"array"},message:"must be array"};i===null?i=[hr]:i.push(hr),a++}var E=zt===a}else var E=!0;if(E)if(wt.bbox!==void 0){let ua=wt.bbox,zt=a;if(a===zt)if(Array.isArray(ua)){if(ua.length<4){let hr={instancePath:t+"/features/"+Oe+"/geometry/bbox",schemaPath:"#/properties/features/items/properties/geometry/oneOf/1/properties/bbox/minItems",keyword:"minItems",params:{limit:4},message:"must NOT have fewer than 4 items"};i===null?i=[hr]:i.push(hr),a++}else{var P=!0;let hr=ua.length;for(let yn=0;yn<hr;yn++){let _n=ua[yn],On=a;if(!(typeof _n=="number"&&isFinite(_n))){let fn={instancePath:t+"/features/"+Oe+"/geometry/bbox/"+yn,schemaPath:"#/properties/features/items/properties/geometry/oneOf/1/properties/bbox/items/type",keyword:"type",params:{type:"number"},message:"must be number"};i===null?i=[fn]:i.push(fn),a++}var P=On===a;if(!P)break}}}else{let hr={instancePath:t+"/features/"+Oe+"/geometry/bbox",schemaPath:"#/properties/features/items/properties/geometry/oneOf/1/properties/bbox/type",keyword:"type",params:{type:"array"},message:"must be array"};i===null?i=[hr]:i.push(hr),a++}var E=zt===a}else var E=!0}}}else{let Un={instancePath:t+"/features/"+Oe+"/geometry",schemaPath:"#/properties/features/items/properties/geometry/oneOf/1/type",keyword:"type",params:{type:"object"},message:"must be object"};i===null?i=[Un]:i.push(Un),a++}var j=qo===a;if(j&&or)or=!1,Er=[Er,1];else{j&&(or=!0,Er=1);let Un=a;if(a===Un)if(wt&&typeof wt=="object"&&!Array.isArray(wt)){let zt;if(wt.type===void 0&&(zt="type")||wt.coordinates===void 0&&(zt="coordinates")){let Dr={instancePath:t+"/features/"+Oe+"/geometry",schemaPath:"#/properties/features/items/properties/geometry/oneOf/2/required",keyword:"required",params:{missingProperty:zt},message:"must have required property '"+zt+"'"};i===null?i=[Dr]:i.push(Dr),a++}else{if(wt.type!==void 0){let Dr=wt.type,hr=a;if(typeof Dr!="string"){let yn={instancePath:t+"/features/"+Oe+"/geometry/type",schemaPath:"#/properties/features/items/properties/geometry/oneOf/2/properties/type/type",keyword:"type",params:{type:"string"},message:"must be string"};i===null?i=[yn]:i.push(yn),a++}if(Dr!=="LineString"){let yn={instancePath:t+"/features/"+Oe+"/geometry/type",schemaPath:"#/properties/features/items/properties/geometry/oneOf/2/properties/type/enum",keyword:"enum",params:{allowedValues:Hu.properties.features.items.properties.geometry.oneOf[2].properties.type.enum},message:"must be equal to one of the allowed values"};i===null?i=[yn]:i.push(yn),a++}var D=hr===a}else var D=!0;if(D){if(wt.coordinates!==void 0){let Dr=wt.coordinates,hr=a;if(a===hr)if(Array.isArray(Dr)){if(Dr.length<2){let _n={instancePath:t+"/features/"+Oe+"/geometry/coordinates",schemaPath:"#/properties/features/items/properties/geometry/oneOf/2/properties/coordinates/minItems",keyword:"minItems",params:{limit:2},message:"must NOT have fewer than 2 items"};i===null?i=[_n]:i.push(_n),a++}else{var L=!0;let _n=Dr.length;for(let On=0;On<_n;On++){let sr=Dr[On],fn=a;if(a===fn)if(Array.isArray(sr)){if(sr.length<2){let rn={instancePath:t+"/features/"+Oe+"/geometry/coordinates/"+On,schemaPath:"#/properties/features/items/properties/geometry/oneOf/2/properties/coordinates/items/minItems",keyword:"minItems",params:{limit:2},message:"must NOT have fewer than 2 items"};i===null?i=[rn]:i.push(rn),a++}else{var z=!0;let rn=sr.length;for(let on=0;on<rn;on++){let Vr=sr[on],Gr=a;if(!(typeof Vr=="number"&&isFinite(Vr))){let Pn={instancePath:t+"/features/"+Oe+"/geometry/coordinates/"+On+"/"+on,schemaPath:"#/properties/features/items/properties/geometry/oneOf/2/properties/coordinates/items/items/type",keyword:"type",params:{type:"number"},message:"must be number"};i===null?i=[Pn]:i.push(Pn),a++}var z=Gr===a;if(!z)break}}}else{let rn={instancePath:t+"/features/"+Oe+"/geometry/coordinates/"+On,schemaPath:"#/properties/features/items/properties/geometry/oneOf/2/properties/coordinates/items/type",keyword:"type",params:{type:"array"},message:"must be array"};i===null?i=[rn]:i.push(rn),a++}var L=fn===a;if(!L)break}}}else{let _n={instancePath:t+"/features/"+Oe+"/geometry/coordinates",schemaPath:"#/properties/features/items/properties/geometry/oneOf/2/properties/coordinates/type",keyword:"type",params:{type:"array"},message:"must be array"};i===null?i=[_n]:i.push(_n),a++}var D=hr===a}else var D=!0;if(D)if(wt.bbox!==void 0){let Dr=wt.bbox,hr=a;if(a===hr)if(Array.isArray(Dr)){if(Dr.length<4){let _n={instancePath:t+"/features/"+Oe+"/geometry/bbox",schemaPath:"#/properties/features/items/properties/geometry/oneOf/2/properties/bbox/minItems",keyword:"minItems",params:{limit:4},message:"must NOT have fewer than 4 items"};i===null?i=[_n]:i.push(_n),a++}else{var B=!0;let _n=Dr.length;for(let On=0;On<_n;On++){let sr=Dr[On],fn=a;if(!(typeof sr=="number"&&isFinite(sr))){let rn={instancePath:t+"/features/"+Oe+"/geometry/bbox/"+On,schemaPath:"#/properties/features/items/properties/geometry/oneOf/2/properties/bbox/items/type",keyword:"type",params:{type:"number"},message:"must be number"};i===null?i=[rn]:i.push(rn),a++}var B=fn===a;if(!B)break}}}else{let _n={instancePath:t+"/features/"+Oe+"/geometry/bbox",schemaPath:"#/properties/features/items/properties/geometry/oneOf/2/properties/bbox/type",keyword:"type",params:{type:"array"},message:"must be array"};i===null?i=[_n]:i.push(_n),a++}var D=hr===a}else var D=!0}}}else{let zt={instancePath:t+"/features/"+Oe+"/geometry",schemaPath:"#/properties/features/items/properties/geometry/oneOf/2/type",keyword:"type",params:{type:"object"},message:"must be object"};i===null?i=[zt]:i.push(zt),a++}var j=Un===a;if(j&&or)or=!1,Er=[Er,2];else{j&&(or=!0,Er=2);let zt=a;if(a===zt)if(wt&&typeof wt=="object"&&!Array.isArray(wt)){let hr;if(wt.type===void 0&&(hr="type")||wt.coordinates===void 0&&(hr="coordinates")){let yn={instancePath:t+"/features/"+Oe+"/geometry",schemaPath:"#/properties/features/items/properties/geometry/oneOf/3/required",keyword:"required",params:{missingProperty:hr},message:"must have required property '"+hr+"'"};i===null?i=[yn]:i.push(yn),a++}else{if(wt.type!==void 0){let yn=wt.type,_n=a;if(typeof yn!="string"){let On={instancePath:t+"/features/"+Oe+"/geometry/type",schemaPath:"#/properties/features/items/properties/geometry/oneOf/3/properties/type/type",keyword:"type",params:{type:"string"},message:"must be string"};i===null?i=[On]:i.push(On),a++}if(yn!=="Polygon"){let On={instancePath:t+"/features/"+Oe+"/geometry/type",schemaPath:"#/properties/features/items/properties/geometry/oneOf/3/properties/type/enum",keyword:"enum",params:{allowedValues:Hu.properties.features.items.properties.geometry.oneOf[3].properties.type.enum},message:"must be equal to one of the allowed values"};i===null?i=[On]:i.push(On),a++}var G=_n===a}else var G=!0;if(G){if(wt.coordinates!==void 0){let yn=wt.coordinates,_n=a;if(a===_n)if(Array.isArray(yn)){var Z=!0;let sr=yn.length;for(let fn=0;fn<sr;fn++){let bn=yn[fn],rn=a;if(a===rn)if(Array.isArray(bn)){if(bn.length<4){let Vr={instancePath:t+"/features/"+Oe+"/geometry/coordinates/"+fn,schemaPath:"#/properties/features/items/properties/geometry/oneOf/3/properties/coordinates/items/minItems",keyword:"minItems",params:{limit:4},message:"must NOT have fewer than 4 items"};i===null?i=[Vr]:i.push(Vr),a++}else{var K=!0;let Vr=bn.length;for(let Gr=0;Gr<Vr;Gr++){let Mn=bn[Gr],Pn=a;if(a===Pn)if(Array.isArray(Mn)){if(Mn.length<2){let tr={instancePath:t+"/features/"+Oe+"/geometry/coordinates/"+fn+"/"+Gr,schemaPath:"#/properties/features/items/properties/geometry/oneOf/3/properties/coordinates/items/items/minItems",keyword:"minItems",params:{limit:2},message:"must NOT have fewer than 2 items"};i===null?i=[tr]:i.push(tr),a++}else{var te=!0;let tr=Mn.length;for(let ui=0;ui<tr;ui++){let Oi=Mn[ui],po=a;if(!(typeof Oi=="number"&&isFinite(Oi))){let Kl={instancePath:t+"/features/"+Oe+"/geometry/coordinates/"+fn+"/"+Gr+"/"+ui,schemaPath:"#/properties/features/items/properties/geometry/oneOf/3/properties/coordinates/items/items/items/type",keyword:"type",params:{type:"number"},message:"must be number"};i===null?i=[Kl]:i.push(Kl),a++}var te=po===a;if(!te)break}}}else{let tr={instancePath:t+"/features/"+Oe+"/geometry/coordinates/"+fn+"/"+Gr,schemaPath:"#/properties/features/items/properties/geometry/oneOf/3/properties/coordinates/items/items/type",keyword:"type",params:{type:"array"},message:"must be array"};i===null?i=[tr]:i.push(tr),a++}var K=Pn===a;if(!K)break}}}else{let Vr={instancePath:t+"/features/"+Oe+"/geometry/coordinates/"+fn,schemaPath:"#/properties/features/items/properties/geometry/oneOf/3/properties/coordinates/items/type",keyword:"type",params:{type:"array"},message:"must be array"};i===null?i=[Vr]:i.push(Vr),a++}var Z=rn===a;if(!Z)break}}else{let sr={instancePath:t+"/features/"+Oe+"/geometry/coordinates",schemaPath:"#/properties/features/items/properties/geometry/oneOf/3/properties/coordinates/type",keyword:"type",params:{type:"array"},message:"must be array"};i===null?i=[sr]:i.push(sr),a++}var G=_n===a}else var G=!0;if(G)if(wt.bbox!==void 0){let yn=wt.bbox,_n=a;if(a===_n)if(Array.isArray(yn)){if(yn.length<4){let sr={instancePath:t+"/features/"+Oe+"/geometry/bbox",schemaPath:"#/properties/features/items/properties/geometry/oneOf/3/properties/bbox/minItems",keyword:"minItems",params:{limit:4},message:"must NOT have fewer than 4 items"};i===null?i=[sr]:i.push(sr),a++}else{var se=!0;let sr=yn.length;for(let fn=0;fn<sr;fn++){let bn=yn[fn],rn=a;if(!(typeof bn=="number"&&isFinite(bn))){let Vr={instancePath:t+"/features/"+Oe+"/geometry/bbox/"+fn,schemaPath:"#/properties/features/items/properties/geometry/oneOf/3/properties/bbox/items/type",keyword:"type",params:{type:"number"},message:"must be number"};i===null?i=[Vr]:i.push(Vr),a++}var se=rn===a;if(!se)break}}}else{let sr={instancePath:t+"/features/"+Oe+"/geometry/bbox",schemaPath:"#/properties/features/items/properties/geometry/oneOf/3/properties/bbox/type",keyword:"type",params:{type:"array"},message:"must be array"};i===null?i=[sr]:i.push(sr),a++}var G=_n===a}else var G=!0}}}else{let hr={instancePath:t+"/features/"+Oe+"/geometry",schemaPath:"#/properties/features/items/properties/geometry/oneOf/3/type",keyword:"type",params:{type:"object"},message:"must be object"};i===null?i=[hr]:i.push(hr),a++}var j=zt===a;if(j&&or)or=!1,Er=[Er,3];else{j&&(or=!0,Er=3);let hr=a;if(a===hr)if(wt&&typeof wt=="object"&&!Array.isArray(wt)){let _n;if(wt.type===void 0&&(_n="type")||wt.coordinates===void 0&&(_n="coordinates")){let On={instancePath:t+"/features/"+Oe+"/geometry",schemaPath:"#/properties/features/items/properties/geometry/oneOf/4/required",keyword:"required",params:{missingProperty:_n},message:"must have required property '"+_n+"'"};i===null?i=[On]:i.push(On),a++}else{if(wt.type!==void 0){let On=wt.type,sr=a;if(typeof On!="string"){let fn={instancePath:t+"/features/"+Oe+"/geometry/type",schemaPath:"#/properties/features/items/properties/geometry/oneOf/4/properties/type/type",keyword:"type",params:{type:"string"},message:"must be string"};i===null?i=[fn]:i.push(fn),a++}if(On!=="MultiPoint"){let fn={instancePath:t+"/features/"+Oe+"/geometry/type",schemaPath:"#/properties/features/items/properties/geometry/oneOf/4/properties/type/enum",keyword:"enum",params:{allowedValues:Hu.properties.features.items.properties.geometry.oneOf[4].properties.type.enum},message:"must be equal to one of the allowed values"};i===null?i=[fn]:i.push(fn),a++}var le=sr===a}else var le=!0;if(le){if(wt.coordinates!==void 0){let On=wt.coordinates,sr=a;if(a===sr)if(Array.isArray(On)){var pe=!0;let bn=On.length;for(let rn=0;rn<bn;rn++){let on=On[rn],Vr=a;if(a===Vr)if(Array.isArray(on)){if(on.length<2){let Mn={instancePath:t+"/features/"+Oe+"/geometry/coordinates/"+rn,schemaPath:"#/properties/features/items/properties/geometry/oneOf/4/properties/coordinates/items/minItems",keyword:"minItems",params:{limit:2},message:"must NOT have fewer than 2 items"};i===null?i=[Mn]:i.push(Mn),a++}else{var me=!0;let Mn=on.length;for(let Pn=0;Pn<Mn;Pn++){let Et=on[Pn],tr=a;if(!(typeof Et=="number"&&isFinite(Et))){let Oi={instancePath:t+"/features/"+Oe+"/geometry/coordinates/"+rn+"/"+Pn,schemaPath:"#/properties/features/items/properties/geometry/oneOf/4/properties/coordinates/items/items/type",keyword:"type",params:{type:"number"},message:"must be number"};i===null?i=[Oi]:i.push(Oi),a++}var me=tr===a;if(!me)break}}}else{let Mn={instancePath:t+"/features/"+Oe+"/geometry/coordinates/"+rn,schemaPath:"#/properties/features/items/properties/geometry/oneOf/4/properties/coordinates/items/type",keyword:"type",params:{type:"array"},message:"must be array"};i===null?i=[Mn]:i.push(Mn),a++}var pe=Vr===a;if(!pe)break}}else{let bn={instancePath:t+"/features/"+Oe+"/geometry/coordinates",schemaPath:"#/properties/features/items/properties/geometry/oneOf/4/properties/coordinates/type",keyword:"type",params:{type:"array"},message:"must be array"};i===null?i=[bn]:i.push(bn),a++}var le=sr===a}else var le=!0;if(le)if(wt.bbox!==void 0){let On=wt.bbox,sr=a;if(a===sr)if(Array.isArray(On)){if(On.length<4){let bn={instancePath:t+"/features/"+Oe+"/geometry/bbox",schemaPath:"#/properties/features/items/properties/geometry/oneOf/4/properties/bbox/minItems",keyword:"minItems",params:{limit:4},message:"must NOT have fewer than 4 items"};i===null?i=[bn]:i.push(bn),a++}else{var _e=!0;let bn=On.length;for(let rn=0;rn<bn;rn++){let on=On[rn],Vr=a;if(!(typeof on=="number"&&isFinite(on))){let Mn={instancePath:t+"/features/"+Oe+"/geometry/bbox/"+rn,schemaPath:"#/properties/features/items/properties/geometry/oneOf/4/properties/bbox/items/type",keyword:"type",params:{type:"number"},message:"must be number"};i===null?i=[Mn]:i.push(Mn),a++}var _e=Vr===a;if(!_e)break}}}else{let bn={instancePath:t+"/features/"+Oe+"/geometry/bbox",schemaPath:"#/properties/features/items/properties/geometry/oneOf/4/properties/bbox/type",keyword:"type",params:{type:"array"},message:"must be array"};i===null?i=[bn]:i.push(bn),a++}var le=sr===a}else var le=!0}}}else{let _n={instancePath:t+"/features/"+Oe+"/geometry",schemaPath:"#/properties/features/items/properties/geometry/oneOf/4/type",keyword:"type",params:{type:"object"},message:"must be object"};i===null?i=[_n]:i.push(_n),a++}var j=hr===a;if(j&&or)or=!1,Er=[Er,4];else{j&&(or=!0,Er=4);let _n=a;if(a===_n)if(wt&&typeof wt=="object"&&!Array.isArray(wt)){let sr;if(wt.type===void 0&&(sr="type")||wt.coordinates===void 0&&(sr="coordinates")){let fn={instancePath:t+"/features/"+Oe+"/geometry",schemaPath:"#/properties/features/items/properties/geometry/oneOf/5/required",keyword:"required",params:{missingProperty:sr},message:"must have required property '"+sr+"'"};i===null?i=[fn]:i.push(fn),a++}else{if(wt.type!==void 0){let fn=wt.type,bn=a;if(typeof fn!="string"){let rn={instancePath:t+"/features/"+Oe+"/geometry/type",schemaPath:"#/properties/features/items/properties/geometry/oneOf/5/properties/type/type",keyword:"type",params:{type:"string"},message:"must be string"};i===null?i=[rn]:i.push(rn),a++}if(fn!=="MultiLineString"){let rn={instancePath:t+"/features/"+Oe+"/geometry/type",schemaPath:"#/properties/features/items/properties/geometry/oneOf/5/properties/type/enum",keyword:"enum",params:{allowedValues:Hu.properties.features.items.properties.geometry.oneOf[5].properties.type.enum},message:"must be equal to one of the allowed values"};i===null?i=[rn]:i.push(rn),a++}var de=bn===a}else var de=!0;if(de){if(wt.coordinates!==void 0){let fn=wt.coordinates,bn=a;if(a===bn)if(Array.isArray(fn)){var Ce=!0;let on=fn.length;for(let Vr=0;Vr<on;Vr++){let Gr=fn[Vr],Mn=a;if(a===Mn)if(Array.isArray(Gr)){if(Gr.length<2){let Et={instancePath:t+"/features/"+Oe+"/geometry/coordinates/"+Vr,schemaPath:"#/properties/features/items/properties/geometry/oneOf/5/properties/coordinates/items/minItems",keyword:"minItems",params:{limit:2},message:"must NOT have fewer than 2 items"};i===null?i=[Et]:i.push(Et),a++}else{var Ze=!0;let Et=Gr.length;for(let tr=0;tr<Et;tr++){let ui=Gr[tr],Oi=a;if(a===Oi)if(Array.isArray(ui)){if(ui.length<2){let so={instancePath:t+"/features/"+Oe+"/geometry/coordinates/"+Vr+"/"+tr,schemaPath:"#/properties/features/items/properties/geometry/oneOf/5/properties/coordinates/items/items/minItems",keyword:"minItems",params:{limit:2},message:"must NOT have fewer than 2 items"};i===null?i=[so]:i.push(so),a++}else{var rt=!0;let so=ui.length;for(let Kl=0;Kl<so;Kl++){let Fs=ui[Kl],Kc=a;if(!(typeof Fs=="number"&&isFinite(Fs))){let Kn={instancePath:t+"/features/"+Oe+"/geometry/coordinates/"+Vr+"/"+tr+"/"+Kl,schemaPath:"#/properties/features/items/properties/geometry/oneOf/5/properties/coordinates/items/items/items/type",keyword:"type",params:{type:"number"},message:"must be number"};i===null?i=[Kn]:i.push(Kn),a++}var rt=Kc===a;if(!rt)break}}}else{let so={instancePath:t+"/features/"+Oe+"/geometry/coordinates/"+Vr+"/"+tr,schemaPath:"#/properties/features/items/properties/geometry/oneOf/5/properties/coordinates/items/items/type",keyword:"type",params:{type:"array"},message:"must be array"};i===null?i=[so]:i.push(so),a++}var Ze=Oi===a;if(!Ze)break}}}else{let Et={instancePath:t+"/features/"+Oe+"/geometry/coordinates/"+Vr,schemaPath:"#/properties/features/items/properties/geometry/oneOf/5/properties/coordinates/items/type",keyword:"type",params:{type:"array"},message:"must be array"};i===null?i=[Et]:i.push(Et),a++}var Ce=Mn===a;if(!Ce)break}}else{let on={instancePath:t+"/features/"+Oe+"/geometry/coordinates",schemaPath:"#/properties/features/items/properties/geometry/oneOf/5/properties/coordinates/type",keyword:"type",params:{type:"array"},message:"must be array"};i===null?i=[on]:i.push(on),a++}var de=bn===a}else var de=!0;if(de)if(wt.bbox!==void 0){let fn=wt.bbox,bn=a;if(a===bn)if(Array.isArray(fn)){if(fn.length<4){let on={instancePath:t+"/features/"+Oe+"/geometry/bbox",schemaPath:"#/properties/features/items/properties/geometry/oneOf/5/properties/bbox/minItems",keyword:"minItems",params:{limit:4},message:"must NOT have fewer than 4 items"};i===null?i=[on]:i.push(on),a++}else{var ct=!0;let on=fn.length;for(let Vr=0;Vr<on;Vr++){let Gr=fn[Vr],Mn=a;if(!(typeof Gr=="number"&&isFinite(Gr))){let Et={instancePath:t+"/features/"+Oe+"/geometry/bbox/"+Vr,schemaPath:"#/properties/features/items/properties/geometry/oneOf/5/properties/bbox/items/type",keyword:"type",params:{type:"number"},message:"must be number"};i===null?i=[Et]:i.push(Et),a++}var ct=Mn===a;if(!ct)break}}}else{let on={instancePath:t+"/features/"+Oe+"/geometry/bbox",schemaPath:"#/properties/features/items/properties/geometry/oneOf/5/properties/bbox/type",keyword:"type",params:{type:"array"},message:"must be array"};i===null?i=[on]:i.push(on),a++}var de=bn===a}else var de=!0}}}else{let sr={instancePath:t+"/features/"+Oe+"/geometry",schemaPath:"#/properties/features/items/properties/geometry/oneOf/5/type",keyword:"type",params:{type:"object"},message:"must be object"};i===null?i=[sr]:i.push(sr),a++}var j=_n===a;if(j&&or)or=!1,Er=[Er,5];else{j&&(or=!0,Er=5);let sr=a;if(a===sr)if(wt&&typeof wt=="object"&&!Array.isArray(wt)){let bn;if(wt.type===void 0&&(bn="type")||wt.coordinates===void 0&&(bn="coordinates")){let rn={instancePath:t+"/features/"+Oe+"/geometry",schemaPath:"#/properties/features/items/properties/geometry/oneOf/6/required",keyword:"required",params:{missingProperty:bn},message:"must have required property '"+bn+"'"};i===null?i=[rn]:i.push(rn),a++}else{if(wt.type!==void 0){let rn=wt.type,on=a;if(typeof rn!="string"){let Vr={instancePath:t+"/features/"+Oe+"/geometry/type",schemaPath:"#/properties/features/items/properties/geometry/oneOf/6/properties/type/type",keyword:"type",params:{type:"string"},message:"must be string"};i===null?i=[Vr]:i.push(Vr),a++}if(rn!=="MultiPolygon"){let Vr={instancePath:t+"/features/"+Oe+"/geometry/type",schemaPath:"#/properties/features/items/properties/geometry/oneOf/6/properties/type/enum",keyword:"enum",params:{allowedValues:Hu.properties.features.items.properties.geometry.oneOf[6].properties.type.enum},message:"must be equal to one of the allowed values"};i===null?i=[Vr]:i.push(Vr),a++}var qe=on===a}else var qe=!0;if(qe){if(wt.coordinates!==void 0){let rn=wt.coordinates,on=a;if(a===on)if(Array.isArray(rn)){var lt=!0;let Gr=rn.length;for(let Mn=0;Mn<Gr;Mn++){let Pn=rn[Mn],Et=a;if(a===Et)if(Array.isArray(Pn)){var _t=!0;let ui=Pn.length;for(let Oi=0;Oi<ui;Oi++){let po=Pn[Oi],so=a;if(a===so)if(Array.isArray(po)){if(po.length<4){let Fs={instancePath:t+"/features/"+Oe+"/geometry/coordinates/"+Mn+"/"+Oi,schemaPath:"#/properties/features/items/properties/geometry/oneOf/6/properties/coordinates/items/items/minItems",keyword:"minItems",params:{limit:4},message:"must NOT have fewer than 4 items"};i===null?i=[Fs]:i.push(Fs),a++}else{var Tt=!0;let Fs=po.length;for(let Kc=0;Kc<Fs;Kc++){let wo=po[Kc],Kn=a;if(a===Kn)if(Array.isArray(wo)){if(wo.length<2){let fo={instancePath:t+"/features/"+Oe+"/geometry/coordinates/"+Mn+"/"+Oi+"/"+Kc,schemaPath:"#/properties/features/items/properties/geometry/oneOf/6/properties/coordinates/items/items/items/minItems",keyword:"minItems",params:{limit:2},message:"must NOT have fewer than 2 items"};i===null?i=[fo]:i.push(fo),a++}else{var et=!0;let fo=wo.length;for(let Zr=0;Zr<fo;Zr++){let gn=wo[Zr],tn=a;if(!(typeof gn=="number"&&isFinite(gn))){let Bn={instancePath:t+"/features/"+Oe+"/geometry/coordinates/"+Mn+"/"+Oi+"/"+Kc+"/"+Zr,schemaPath:"#/properties/features/items/properties/geometry/oneOf/6/properties/coordinates/items/items/items/items/type",keyword:"type",params:{type:"number"},message:"must be number"};i===null?i=[Bn]:i.push(Bn),a++}var et=tn===a;if(!et)break}}}else{let fo={instancePath:t+"/features/"+Oe+"/geometry/coordinates/"+Mn+"/"+Oi+"/"+Kc,schemaPath:"#/properties/features/items/properties/geometry/oneOf/6/properties/coordinates/items/items/items/type",keyword:"type",params:{type:"array"},message:"must be array"};i===null?i=[fo]:i.push(fo),a++}var Tt=Kn===a;if(!Tt)break}}}else{let Fs={instancePath:t+"/features/"+Oe+"/geometry/coordinates/"+Mn+"/"+Oi,schemaPath:"#/properties/features/items/properties/geometry/oneOf/6/properties/coordinates/items/items/type",keyword:"type",params:{type:"array"},message:"must be array"};i===null?i=[Fs]:i.push(Fs),a++}var _t=so===a;if(!_t)break}}else{let ui={instancePath:t+"/features/"+Oe+"/geometry/coordinates/"+Mn,schemaPath:"#/properties/features/items/properties/geometry/oneOf/6/properties/coordinates/items/type",keyword:"type",params:{type:"array"},message:"must be array"};i===null?i=[ui]:i.push(ui),a++}var lt=Et===a;if(!lt)break}}else{let Gr={instancePath:t+"/features/"+Oe+"/geometry/coordinates",schemaPath:"#/properties/features/items/properties/geometry/oneOf/6/properties/coordinates/type",keyword:"type",params:{type:"array"},message:"must be array"};i===null?i=[Gr]:i.push(Gr),a++}var qe=on===a}else var qe=!0;if(qe)if(wt.bbox!==void 0){let rn=wt.bbox,on=a;if(a===on)if(Array.isArray(rn)){if(rn.length<4){let Gr={instancePath:t+"/features/"+Oe+"/geometry/bbox",schemaPath:"#/properties/features/items/properties/geometry/oneOf/6/properties/bbox/minItems",keyword:"minItems",params:{limit:4},message:"must NOT have fewer than 4 items"};i===null?i=[Gr]:i.push(Gr),a++}else{var pt=!0;let Gr=rn.length;for(let Mn=0;Mn<Gr;Mn++){let Pn=rn[Mn],Et=a;if(!(typeof Pn=="number"&&isFinite(Pn))){let ui={instancePath:t+"/features/"+Oe+"/geometry/bbox/"+Mn,schemaPath:"#/properties/features/items/properties/geometry/oneOf/6/properties/bbox/items/type",keyword:"type",params:{type:"number"},message:"must be number"};i===null?i=[ui]:i.push(ui),a++}var pt=Et===a;if(!pt)break}}}else{let Gr={instancePath:t+"/features/"+Oe+"/geometry/bbox",schemaPath:"#/properties/features/items/properties/geometry/oneOf/6/properties/bbox/type",keyword:"type",params:{type:"array"},message:"must be array"};i===null?i=[Gr]:i.push(Gr),a++}var qe=on===a}else var qe=!0}}}else{let bn={instancePath:t+"/features/"+Oe+"/geometry",schemaPath:"#/properties/features/items/properties/geometry/oneOf/6/type",keyword:"type",params:{type:"object"},message:"must be object"};i===null?i=[bn]:i.push(bn),a++}var j=sr===a;if(j&&or)or=!1,Er=[Er,6];else{j&&(or=!0,Er=6);let bn=a;if(a===bn)if(wt&&typeof wt=="object"&&!Array.isArray(wt)){let on;if(wt.type===void 0&&(on="type")||wt.geometries===void 0&&(on="geometries")){let Vr={instancePath:t+"/features/"+Oe+"/geometry",schemaPath:"#/properties/features/items/properties/geometry/oneOf/7/required",keyword:"required",params:{missingProperty:on},message:"must have required property '"+on+"'"};i===null?i=[Vr]:i.push(Vr),a++}else{if(wt.type!==void 0){let Vr=wt.type,Gr=a;if(typeof Vr!="string"){let Mn={instancePath:t+"/features/"+Oe+"/geometry/type",schemaPath:"#/properties/features/items/properties/geometry/oneOf/7/properties/type/type",keyword:"type",params:{type:"string"},message:"must be string"};i===null?i=[Mn]:i.push(Mn),a++}if(Vr!=="GeometryCollection"){let Mn={instancePath:t+"/features/"+Oe+"/geometry/type",schemaPath:"#/properties/features/items/properties/geometry/oneOf/7/properties/type/enum",keyword:"enum",params:{allowedValues:Hu.properties.features.items.properties.geometry.oneOf[7].properties.type.enum},message:"must be equal to one of the allowed values"};i===null?i=[Mn]:i.push(Mn),a++}var ot=Gr===a}else var ot=!0;if(ot){if(wt.geometries!==void 0){let Vr=wt.geometries,Gr=a;if(a===Gr)if(Array.isArray(Vr)){var $e=!0;let Pn=Vr.length;for(let Et=0;Et<Pn;Et++){let tr=Vr[Et],ui=a,Oi=a,po=!1,so=null,Kl=a;if(a===Kl)if(tr&&typeof tr=="object"&&!Array.isArray(tr)){let wo;if(tr.type===void 0&&(wo="type")||tr.coordinates===void 0&&(wo="coordinates")){let Kn={instancePath:t+"/features/"+Oe+"/geometry/geometries/"+Et,schemaPath:"#/properties/features/items/properties/geometry/oneOf/7/properties/geometries/items/oneOf/0/required",keyword:"required",params:{missingProperty:wo},message:"must have required property '"+wo+"'"};i===null?i=[Kn]:i.push(Kn),a++}else{if(tr.type!==void 0){let Kn=tr.type,oi=a;if(typeof Kn!="string"){let fo={instancePath:t+"/features/"+Oe+"/geometry/geometries/"+Et+"/type",schemaPath:"#/properties/features/items/properties/geometry/oneOf/7/properties/geometries/items/oneOf/0/properties/type/type",keyword:"type",params:{type:"string"},message:"must be string"};i===null?i=[fo]:i.push(fo),a++}if(Kn!=="Point"){let fo={instancePath:t+"/features/"+Oe+"/geometry/geometries/"+Et+"/type",schemaPath:"#/properties/features/items/properties/geometry/oneOf/7/properties/geometries/items/oneOf/0/properties/type/enum",keyword:"enum",params:{allowedValues:Hu.properties.features.items.properties.geometry.oneOf[7].properties.geometries.items.oneOf[0].properties.type.enum},message:"must be equal to one of the allowed values"};i===null?i=[fo]:i.push(fo),a++}var De=oi===a}else var De=!0;if(De){if(tr.coordinates!==void 0){let Kn=tr.coordinates,oi=a;if(a===oi)if(Array.isArray(Kn)){if(Kn.length<2){let Zr={instancePath:t+"/features/"+Oe+"/geometry/geometries/"+Et+"/coordinates",schemaPath:"#/properties/features/items/properties/geometry/oneOf/7/properties/geometries/items/oneOf/0/properties/coordinates/minItems",keyword:"minItems",params:{limit:2},message:"must NOT have fewer than 2 items"};i===null?i=[Zr]:i.push(Zr),a++}else{var Ke=!0;let Zr=Kn.length;for(let gn=0;gn<Zr;gn++){let tn=Kn[gn],xn=a;if(!(typeof tn=="number"&&isFinite(tn))){let Ur={instancePath:t+"/features/"+Oe+"/geometry/geometries/"+Et+"/coordinates/"+gn,schemaPath:"#/properties/features/items/properties/geometry/oneOf/7/properties/geometries/items/oneOf/0/properties/coordinates/items/type",keyword:"type",params:{type:"number"},message:"must be number"};i===null?i=[Ur]:i.push(Ur),a++}var Ke=xn===a;if(!Ke)break}}}else{let Zr={instancePath:t+"/features/"+Oe+"/geometry/geometries/"+Et+"/coordinates",schemaPath:"#/properties/features/items/properties/geometry/oneOf/7/properties/geometries/items/oneOf/0/properties/coordinates/type",keyword:"type",params:{type:"array"},message:"must be array"};i===null?i=[Zr]:i.push(Zr),a++}var De=oi===a}else var De=!0;if(De)if(tr.bbox!==void 0){let Kn=tr.bbox,oi=a;if(a===oi)if(Array.isArray(Kn)){if(Kn.length<4){let Zr={instancePath:t+"/features/"+Oe+"/geometry/geometries/"+Et+"/bbox",schemaPath:"#/properties/features/items/properties/geometry/oneOf/7/properties/geometries/items/oneOf/0/properties/bbox/minItems",keyword:"minItems",params:{limit:4},message:"must NOT have fewer than 4 items"};i===null?i=[Zr]:i.push(Zr),a++}else{var Ge=!0;let Zr=Kn.length;for(let gn=0;gn<Zr;gn++){let tn=Kn[gn],xn=a;if(!(typeof tn=="number"&&isFinite(tn))){let Ur={instancePath:t+"/features/"+Oe+"/geometry/geometries/"+Et+"/bbox/"+gn,schemaPath:"#/properties/features/items/properties/geometry/oneOf/7/properties/geometries/items/oneOf/0/properties/bbox/items/type",keyword:"type",params:{type:"number"},message:"must be number"};i===null?i=[Ur]:i.push(Ur),a++}var Ge=xn===a;if(!Ge)break}}}else{let Zr={instancePath:t+"/features/"+Oe+"/geometry/geometries/"+Et+"/bbox",schemaPath:"#/properties/features/items/properties/geometry/oneOf/7/properties/geometries/items/oneOf/0/properties/bbox/type",keyword:"type",params:{type:"array"},message:"must be array"};i===null?i=[Zr]:i.push(Zr),a++}var De=oi===a}else var De=!0}}}else{let wo={instancePath:t+"/features/"+Oe+"/geometry/geometries/"+Et,schemaPath:"#/properties/features/items/properties/geometry/oneOf/7/properties/geometries/items/oneOf/0/type",keyword:"type",params:{type:"object"},message:"must be object"};i===null?i=[wo]:i.push(wo),a++}var Mt=Kl===a;Mt&&(po=!0,so=0);let Fs=a;if(a===Fs)if(tr&&typeof tr=="object"&&!Array.isArray(tr)){let wo;if(tr.type===void 0&&(wo="type")||tr.coordinates===void 0&&(wo="coordinates")){let Kn={instancePath:t+"/features/"+Oe+"/geometry/geometries/"+Et,schemaPath:"#/properties/features/items/properties/geometry/oneOf/7/properties/geometries/items/oneOf/1/required",keyword:"required",params:{missingProperty:wo},message:"must have required property '"+wo+"'"};i===null?i=[Kn]:i.push(Kn),a++}else{if(tr.type!==void 0){let Kn=tr.type,oi=a;if(typeof Kn!="string"){let fo={instancePath:t+"/features/"+Oe+"/geometry/geometries/"+Et+"/type",schemaPath:"#/properties/features/items/properties/geometry/oneOf/7/properties/geometries/items/oneOf/1/properties/type/type",keyword:"type",params:{type:"string"},message:"must be string"};i===null?i=[fo]:i.push(fo),a++}if(Kn!=="LineString"){let fo={instancePath:t+"/features/"+Oe+"/geometry/geometries/"+Et+"/type",schemaPath:"#/properties/features/items/properties/geometry/oneOf/7/properties/geometries/items/oneOf/1/properties/type/enum",keyword:"enum",params:{allowedValues:Hu.properties.features.items.properties.geometry.oneOf[7].properties.geometries.items.oneOf[1].properties.type.enum},message:"must be equal to one of the allowed values"};i===null?i=[fo]:i.push(fo),a++}var ft=oi===a}else var ft=!0;if(ft){if(tr.coordinates!==void 0){let Kn=tr.coordinates,oi=a;if(a===oi)if(Array.isArray(Kn)){if(Kn.length<2){let Zr={instancePath:t+"/features/"+Oe+"/geometry/geometries/"+Et+"/coordinates",schemaPath:"#/properties/features/items/properties/geometry/oneOf/7/properties/geometries/items/oneOf/1/properties/coordinates/minItems",keyword:"minItems",params:{limit:2},message:"must NOT have fewer than 2 items"};i===null?i=[Zr]:i.push(Zr),a++}else{var mt=!0;let Zr=Kn.length;for(let gn=0;gn<Zr;gn++){let tn=Kn[gn],xn=a;if(a===xn)if(Array.isArray(tn)){if(tn.length<2){let Ur={instancePath:t+"/features/"+Oe+"/geometry/geometries/"+Et+"/coordinates/"+gn,schemaPath:"#/properties/features/items/properties/geometry/oneOf/7/properties/geometries/items/oneOf/1/properties/coordinates/items/minItems",keyword:"minItems",params:{limit:2},message:"must NOT have fewer than 2 items"};i===null?i=[Ur]:i.push(Ur),a++}else{var Ot=!0;let Ur=tn.length;for(let lo=0;lo<Ur;lo++){let Hn=tn[lo],zo=a;if(!(typeof Hn=="number"&&isFinite(Hn))){let Zi={instancePath:t+"/features/"+Oe+"/geometry/geometries/"+Et+"/coordinates/"+gn+"/"+lo,schemaPath:"#/properties/features/items/properties/geometry/oneOf/7/properties/geometries/items/oneOf/1/properties/coordinates/items/items/type",keyword:"type",params:{type:"number"},message:"must be number"};i===null?i=[Zi]:i.push(Zi),a++}var Ot=zo===a;if(!Ot)break}}}else{let Ur={instancePath:t+"/features/"+Oe+"/geometry/geometries/"+Et+"/coordinates/"+gn,schemaPath:"#/properties/features/items/properties/geometry/oneOf/7/properties/geometries/items/oneOf/1/properties/coordinates/items/type",keyword:"type",params:{type:"array"},message:"must be array"};i===null?i=[Ur]:i.push(Ur),a++}var mt=xn===a;if(!mt)break}}}else{let Zr={instancePath:t+"/features/"+Oe+"/geometry/geometries/"+Et+"/coordinates",schemaPath:"#/properties/features/items/properties/geometry/oneOf/7/properties/geometries/items/oneOf/1/properties/coordinates/type",keyword:"type",params:{type:"array"},message:"must be array"};i===null?i=[Zr]:i.push(Zr),a++}var ft=oi===a}else var ft=!0;if(ft)if(tr.bbox!==void 0){let Kn=tr.bbox,oi=a;if(a===oi)if(Array.isArray(Kn)){if(Kn.length<4){let Zr={instancePath:t+"/features/"+Oe+"/geometry/geometries/"+Et+"/bbox",schemaPath:"#/properties/features/items/properties/geometry/oneOf/7/properties/geometries/items/oneOf/1/properties/bbox/minItems",keyword:"minItems",params:{limit:4},message:"must NOT have fewer than 4 items"};i===null?i=[Zr]:i.push(Zr),a++}else{var At=!0;let Zr=Kn.length;for(let gn=0;gn<Zr;gn++){let tn=Kn[gn],xn=a;if(!(typeof tn=="number"&&isFinite(tn))){let Ur={instancePath:t+"/features/"+Oe+"/geometry/geometries/"+Et+"/bbox/"+gn,schemaPath:"#/properties/features/items/properties/geometry/oneOf/7/properties/geometries/items/oneOf/1/properties/bbox/items/type",keyword:"type",params:{type:"number"},message:"must be number"};i===null?i=[Ur]:i.push(Ur),a++}var At=xn===a;if(!At)break}}}else{let Zr={instancePath:t+"/features/"+Oe+"/geometry/geometries/"+Et+"/bbox",schemaPath:"#/properties/features/items/properties/geometry/oneOf/7/properties/geometries/items/oneOf/1/properties/bbox/type",keyword:"type",params:{type:"array"},message:"must be array"};i===null?i=[Zr]:i.push(Zr),a++}var ft=oi===a}else var ft=!0}}}else{let wo={instancePath:t+"/features/"+Oe+"/geometry/geometries/"+Et,schemaPath:"#/properties/features/items/properties/geometry/oneOf/7/properties/geometries/items/oneOf/1/type",keyword:"type",params:{type:"object"},message:"must be object"};i===null?i=[wo]:i.push(wo),a++}var Mt=Fs===a;if(Mt&&po)po=!1,so=[so,1];else{Mt&&(po=!0,so=1);let wo=a;if(a===wo)if(tr&&typeof tr=="object"&&!Array.isArray(tr)){let oi;if(tr.type===void 0&&(oi="type")||tr.coordinates===void 0&&(oi="coordinates")){let fo={instancePath:t+"/features/"+Oe+"/geometry/geometries/"+Et,schemaPath:"#/properties/features/items/properties/geometry/oneOf/7/properties/geometries/items/oneOf/2/required",keyword:"required",params:{missingProperty:oi},message:"must have required property '"+oi+"'"};i===null?i=[fo]:i.push(fo),a++}else{if(tr.type!==void 0){let fo=tr.type,Zr=a;if(typeof fo!="string"){let gn={instancePath:t+"/features/"+Oe+"/geometry/geometries/"+Et+"/type",schemaPath:"#/properties/features/items/properties/geometry/oneOf/7/properties/geometries/items/oneOf/2/properties/type/type",keyword:"type",params:{type:"string"},message:"must be string"};i===null?i=[gn]:i.push(gn),a++}if(fo!=="Polygon"){let gn={instancePath:t+"/features/"+Oe+"/geometry/geometries/"+Et+"/type",schemaPath:"#/properties/features/items/properties/geometry/oneOf/7/properties/geometries/items/oneOf/2/properties/type/enum",keyword:"enum",params:{allowedValues:Hu.properties.features.items.properties.geometry.oneOf[7].properties.geometries.items.oneOf[2].properties.type.enum},message:"must be equal to one of the allowed values"};i===null?i=[gn]:i.push(gn),a++}var Yt=Zr===a}else var Yt=!0;if(Yt){if(tr.coordinates!==void 0){let fo=tr.coordinates,Zr=a;if(a===Zr)if(Array.isArray(fo)){var jt=!0;let tn=fo.length;for(let xn=0;xn<tn;xn++){let Bn=fo[xn],Ur=a;if(a===Ur)if(Array.isArray(Bn)){if(Bn.length<4){let Hn={instancePath:t+"/features/"+Oe+"/geometry/geometries/"+Et+"/coordinates/"+xn,schemaPath:"#/properties/features/items/properties/geometry/oneOf/7/properties/geometries/items/oneOf/2/properties/coordinates/items/minItems",keyword:"minItems",params:{limit:4},message:"must NOT have fewer than 4 items"};i===null?i=[Hn]:i.push(Hn),a++}else{var Ut=!0;let Hn=Bn.length;for(let zo=0;zo<Hn;zo++){let $n=Bn[zo],Zi=a;if(a===Zi)if(Array.isArray($n)){if($n.length<2){let $r={instancePath:t+"/features/"+Oe+"/geometry/geometries/"+Et+"/coordinates/"+xn+"/"+zo,schemaPath:"#/properties/features/items/properties/geometry/oneOf/7/properties/geometries/items/oneOf/2/properties/coordinates/items/items/minItems",keyword:"minItems",params:{limit:2},message:"must NOT have fewer than 2 items"};i===null?i=[$r]:i.push($r),a++}else{var ar=!0;let $r=$n.length;for(let Pi=0;Pi<$r;Pi++){let bi=$n[Pi],Us=a;if(!(typeof bi=="number"&&isFinite(bi))){let vn={instancePath:t+"/features/"+Oe+"/geometry/geometries/"+Et+"/coordinates/"+xn+"/"+zo+"/"+Pi,schemaPath:"#/properties/features/items/properties/geometry/oneOf/7/properties/geometries/items/oneOf/2/properties/coordinates/items/items/items/type",keyword:"type",params:{type:"number"},message:"must be number"};i===null?i=[vn]:i.push(vn),a++}var ar=Us===a;if(!ar)break}}}else{let $r={instancePath:t+"/features/"+Oe+"/geometry/geometries/"+Et+"/coordinates/"+xn+"/"+zo,schemaPath:"#/properties/features/items/properties/geometry/oneOf/7/properties/geometries/items/oneOf/2/properties/coordinates/items/items/type",keyword:"type",params:{type:"array"},message:"must be array"};i===null?i=[$r]:i.push($r),a++}var Ut=Zi===a;if(!Ut)break}}}else{let Hn={instancePath:t+"/features/"+Oe+"/geometry/geometries/"+Et+"/coordinates/"+xn,schemaPath:"#/properties/features/items/properties/geometry/oneOf/7/properties/geometries/items/oneOf/2/properties/coordinates/items/type",keyword:"type",params:{type:"array"},message:"must be array"};i===null?i=[Hn]:i.push(Hn),a++}var jt=Ur===a;if(!jt)break}}else{let tn={instancePath:t+"/features/"+Oe+"/geometry/geometries/"+Et+"/coordinates",schemaPath:"#/properties/features/items/properties/geometry/oneOf/7/properties/geometries/items/oneOf/2/properties/coordinates/type",keyword:"type",params:{type:"array"},message:"must be array"};i===null?i=[tn]:i.push(tn),a++}var Yt=Zr===a}else var Yt=!0;if(Yt)if(tr.bbox!==void 0){let fo=tr.bbox,Zr=a;if(a===Zr)if(Array.isArray(fo)){if(fo.length<4){let tn={instancePath:t+"/features/"+Oe+"/geometry/geometries/"+Et+"/bbox",schemaPath:"#/properties/features/items/properties/geometry/oneOf/7/properties/geometries/items/oneOf/2/properties/bbox/minItems",keyword:"minItems",params:{limit:4},message:"must NOT have fewer than 4 items"};i===null?i=[tn]:i.push(tn),a++}else{var jr=!0;let tn=fo.length;for(let xn=0;xn<tn;xn++){let Bn=fo[xn],Ur=a;if(!(typeof Bn=="number"&&isFinite(Bn))){let Hn={instancePath:t+"/features/"+Oe+"/geometry/geometries/"+Et+"/bbox/"+xn,schemaPath:"#/properties/features/items/properties/geometry/oneOf/7/properties/geometries/items/oneOf/2/properties/bbox/items/type",keyword:"type",params:{type:"number"},message:"must be number"};i===null?i=[Hn]:i.push(Hn),a++}var jr=Ur===a;if(!jr)break}}}else{let tn={instancePath:t+"/features/"+Oe+"/geometry/geometries/"+Et+"/bbox",schemaPath:"#/properties/features/items/properties/geometry/oneOf/7/properties/geometries/items/oneOf/2/properties/bbox/type",keyword:"type",params:{type:"array"},message:"must be array"};i===null?i=[tn]:i.push(tn),a++}var Yt=Zr===a}else var Yt=!0}}}else{let oi={instancePath:t+"/features/"+Oe+"/geometry/geometries/"+Et,schemaPath:"#/properties/features/items/properties/geometry/oneOf/7/properties/geometries/items/oneOf/2/type",keyword:"type",params:{type:"object"},message:"must be object"};i===null?i=[oi]:i.push(oi),a++}var Mt=wo===a;if(Mt&&po)po=!1,so=[so,2];else{Mt&&(po=!0,so=2);let oi=a;if(a===oi)if(tr&&typeof tr=="object"&&!Array.isArray(tr)){let Zr;if(tr.type===void 0&&(Zr="type")||tr.coordinates===void 0&&(Zr="coordinates")){let gn={instancePath:t+"/features/"+Oe+"/geometry/geometries/"+Et,schemaPath:"#/properties/features/items/properties/geometry/oneOf/7/properties/geometries/items/oneOf/3/required",keyword:"required",params:{missingProperty:Zr},message:"must have required property '"+Zr+"'"};i===null?i=[gn]:i.push(gn),a++}else{if(tr.type!==void 0){let gn=tr.type,tn=a;if(typeof gn!="string"){let xn={instancePath:t+"/features/"+Oe+"/geometry/geometries/"+Et+"/type",schemaPath:"#/properties/features/items/properties/geometry/oneOf/7/properties/geometries/items/oneOf/3/properties/type/type",keyword:"type",params:{type:"string"},message:"must be string"};i===null?i=[xn]:i.push(xn),a++}if(gn!=="MultiPoint"){let xn={instancePath:t+"/features/"+Oe+"/geometry/geometries/"+Et+"/type",schemaPath:"#/properties/features/items/properties/geometry/oneOf/7/properties/geometries/items/oneOf/3/properties/type/enum",keyword:"enum",params:{allowedValues:Hu.properties.features.items.properties.geometry.oneOf[7].properties.geometries.items.oneOf[3].properties.type.enum},message:"must be equal to one of the allowed values"};i===null?i=[xn]:i.push(xn),a++}var Or=tn===a}else var Or=!0;if(Or){if(tr.coordinates!==void 0){let gn=tr.coordinates,tn=a;if(a===tn)if(Array.isArray(gn)){var br=!0;let Bn=gn.length;for(let Ur=0;Ur<Bn;Ur++){let lo=gn[Ur],Hn=a;if(a===Hn)if(Array.isArray(lo)){if(lo.length<2){let $n={instancePath:t+"/features/"+Oe+"/geometry/geometries/"+Et+"/coordinates/"+Ur,schemaPath:"#/properties/features/items/properties/geometry/oneOf/7/properties/geometries/items/oneOf/3/properties/coordinates/items/minItems",keyword:"minItems",params:{limit:2},message:"must NOT have fewer than 2 items"};i===null?i=[$n]:i.push($n),a++}else{var Pr=!0;let $n=lo.length;for(let Zi=0;Zi<$n;Zi++){let Vo=lo[Zi],$r=a;if(!(typeof Vo=="number"&&isFinite(Vo))){let bi={instancePath:t+"/features/"+Oe+"/geometry/geometries/"+Et+"/coordinates/"+Ur+"/"+Zi,schemaPath:"#/properties/features/items/properties/geometry/oneOf/7/properties/geometries/items/oneOf/3/properties/coordinates/items/items/type",keyword:"type",params:{type:"number"},message:"must be number"};i===null?i=[bi]:i.push(bi),a++}var Pr=$r===a;if(!Pr)break}}}else{let $n={instancePath:t+"/features/"+Oe+"/geometry/geometries/"+Et+"/coordinates/"+Ur,schemaPath:"#/properties/features/items/properties/geometry/oneOf/7/properties/geometries/items/oneOf/3/properties/coordinates/items/type",keyword:"type",params:{type:"array"},message:"must be array"};i===null?i=[$n]:i.push($n),a++}var br=Hn===a;if(!br)break}}else{let Bn={instancePath:t+"/features/"+Oe+"/geometry/geometries/"+Et+"/coordinates",schemaPath:"#/properties/features/items/properties/geometry/oneOf/7/properties/geometries/items/oneOf/3/properties/coordinates/type",keyword:"type",params:{type:"array"},message:"must be array"};i===null?i=[Bn]:i.push(Bn),a++}var Or=tn===a}else var Or=!0;if(Or)if(tr.bbox!==void 0){let gn=tr.bbox,tn=a;if(a===tn)if(Array.isArray(gn)){if(gn.length<4){let Bn={instancePath:t+"/features/"+Oe+"/geometry/geometries/"+Et+"/bbox",schemaPath:"#/properties/features/items/properties/geometry/oneOf/7/properties/geometries/items/oneOf/3/properties/bbox/minItems",keyword:"minItems",params:{limit:4},message:"must NOT have fewer than 4 items"};i===null?i=[Bn]:i.push(Bn),a++}else{var Le=!0;let Bn=gn.length;for(let Ur=0;Ur<Bn;Ur++){let lo=gn[Ur],Hn=a;if(!(typeof lo=="number"&&isFinite(lo))){let $n={instancePath:t+"/features/"+Oe+"/geometry/geometries/"+Et+"/bbox/"+Ur,schemaPath:"#/properties/features/items/properties/geometry/oneOf/7/properties/geometries/items/oneOf/3/properties/bbox/items/type",keyword:"type",params:{type:"number"},message:"must be number"};i===null?i=[$n]:i.push($n),a++}var Le=Hn===a;if(!Le)break}}}else{let Bn={instancePath:t+"/features/"+Oe+"/geometry/geometries/"+Et+"/bbox",schemaPath:"#/properties/features/items/properties/geometry/oneOf/7/properties/geometries/items/oneOf/3/properties/bbox/type",keyword:"type",params:{type:"array"},message:"must be array"};i===null?i=[Bn]:i.push(Bn),a++}var Or=tn===a}else var Or=!0}}}else{let Zr={instancePath:t+"/features/"+Oe+"/geometry/geometries/"+Et,schemaPath:"#/properties/features/items/properties/geometry/oneOf/7/properties/geometries/items/oneOf/3/type",keyword:"type",params:{type:"object"},message:"must be object"};i===null?i=[Zr]:i.push(Zr),a++}var Mt=oi===a;if(Mt&&po)po=!1,so=[so,3];else{Mt&&(po=!0,so=3);let Zr=a;if(a===Zr)if(tr&&typeof tr=="object"&&!Array.isArray(tr)){let tn;if(tr.type===void 0&&(tn="type")||tr.coordinates===void 0&&(tn="coordinates")){let xn={instancePath:t+"/features/"+Oe+"/geometry/geometries/"+Et,schemaPath:"#/properties/features/items/properties/geometry/oneOf/7/properties/geometries/items/oneOf/4/required",keyword:"required",params:{missingProperty:tn},message:"must have required property '"+tn+"'"};i===null?i=[xn]:i.push(xn),a++}else{if(tr.type!==void 0){let xn=tr.type,Bn=a;if(typeof xn!="string"){let Ur={instancePath:t+"/features/"+Oe+"/geometry/geometries/"+Et+"/type",schemaPath:"#/properties/features/items/properties/geometry/oneOf/7/properties/geometries/items/oneOf/4/properties/type/type",keyword:"type",params:{type:"string"},message:"must be string"};i===null?i=[Ur]:i.push(Ur),a++}if(xn!=="MultiLineString"){let Ur={instancePath:t+"/features/"+Oe+"/geometry/geometries/"+Et+"/type",schemaPath:"#/properties/features/items/properties/geometry/oneOf/7/properties/geometries/items/oneOf/4/properties/type/enum",keyword:"enum",params:{allowedValues:Hu.properties.features.items.properties.geometry.oneOf[7].properties.geometries.items.oneOf[4].properties.type.enum},message:"must be equal to one of the allowed values"};i===null?i=[Ur]:i.push(Ur),a++}var Je=Bn===a}else var Je=!0;if(Je){if(tr.coordinates!==void 0){let xn=tr.coordinates,Bn=a;if(a===Bn)if(Array.isArray(xn)){var tt=!0;let lo=xn.length;for(let Hn=0;Hn<lo;Hn++){let zo=xn[Hn],$n=a;if(a===$n)if(Array.isArray(zo)){if(zo.length<2){let Vo={instancePath:t+"/features/"+Oe+"/geometry/geometries/"+Et+"/coordinates/"+Hn,schemaPath:"#/properties/features/items/properties/geometry/oneOf/7/properties/geometries/items/oneOf/4/properties/coordinates/items/minItems",keyword:"minItems",params:{limit:2},message:"must NOT have fewer than 2 items"};i===null?i=[Vo]:i.push(Vo),a++}else{var Ft=!0;let Vo=zo.length;for(let $r=0;$r<Vo;$r++){let Pi=zo[$r],bi=a;if(a===bi)if(Array.isArray(Pi)){if(Pi.length<2){let os={instancePath:t+"/features/"+Oe+"/geometry/geometries/"+Et+"/coordinates/"+Hn+"/"+$r,schemaPath:"#/properties/features/items/properties/geometry/oneOf/7/properties/geometries/items/oneOf/4/properties/coordinates/items/items/minItems",keyword:"minItems",params:{limit:2},message:"must NOT have fewer than 2 items"};i===null?i=[os]:i.push(os),a++}else{var $t=!0;let os=Pi.length;for(let vn=0;vn<os;vn++){let is=Pi[vn],Mu=a;if(!(typeof is=="number"&&isFinite(is))){let _a={instancePath:t+"/features/"+Oe+"/geometry/geometries/"+Et+"/coordinates/"+Hn+"/"+$r+"/"+vn,schemaPath:"#/properties/features/items/properties/geometry/oneOf/7/properties/geometries/items/oneOf/4/properties/coordinates/items/items/items/type",keyword:"type",params:{type:"number"},message:"must be number"};i===null?i=[_a]:i.push(_a),a++}var $t=Mu===a;if(!$t)break}}}else{let os={instancePath:t+"/features/"+Oe+"/geometry/geometries/"+Et+"/coordinates/"+Hn+"/"+$r,schemaPath:"#/properties/features/items/properties/geometry/oneOf/7/properties/geometries/items/oneOf/4/properties/coordinates/items/items/type",keyword:"type",params:{type:"array"},message:"must be array"};i===null?i=[os]:i.push(os),a++}var Ft=bi===a;if(!Ft)break}}}else{let Vo={instancePath:t+"/features/"+Oe+"/geometry/geometries/"+Et+"/coordinates/"+Hn,schemaPath:"#/properties/features/items/properties/geometry/oneOf/7/properties/geometries/items/oneOf/4/properties/coordinates/items/type",keyword:"type",params:{type:"array"},message:"must be array"};i===null?i=[Vo]:i.push(Vo),a++}var tt=$n===a;if(!tt)break}}else{let lo={instancePath:t+"/features/"+Oe+"/geometry/geometries/"+Et+"/coordinates",schemaPath:"#/properties/features/items/properties/geometry/oneOf/7/properties/geometries/items/oneOf/4/properties/coordinates/type",keyword:"type",params:{type:"array"},message:"must be array"};i===null?i=[lo]:i.push(lo),a++}var Je=Bn===a}else var Je=!0;if(Je)if(tr.bbox!==void 0){let xn=tr.bbox,Bn=a;if(a===Bn)if(Array.isArray(xn)){if(xn.length<4){let lo={instancePath:t+"/features/"+Oe+"/geometry/geometries/"+Et+"/bbox",schemaPath:"#/properties/features/items/properties/geometry/oneOf/7/properties/geometries/items/oneOf/4/properties/bbox/minItems",keyword:"minItems",params:{limit:4},message:"must NOT have fewer than 4 items"};i===null?i=[lo]:i.push(lo),a++}else{var xe=!0;let lo=xn.length;for(let Hn=0;Hn<lo;Hn++){let zo=xn[Hn],$n=a;if(!(typeof zo=="number"&&isFinite(zo))){let Vo={instancePath:t+"/features/"+Oe+"/geometry/geometries/"+Et+"/bbox/"+Hn,schemaPath:"#/properties/features/items/properties/geometry/oneOf/7/properties/geometries/items/oneOf/4/properties/bbox/items/type",keyword:"type",params:{type:"number"},message:"must be number"};i===null?i=[Vo]:i.push(Vo),a++}var xe=$n===a;if(!xe)break}}}else{let lo={instancePath:t+"/features/"+Oe+"/geometry/geometries/"+Et+"/bbox",schemaPath:"#/properties/features/items/properties/geometry/oneOf/7/properties/geometries/items/oneOf/4/properties/bbox/type",keyword:"type",params:{type:"array"},message:"must be array"};i===null?i=[lo]:i.push(lo),a++}var Je=Bn===a}else var Je=!0}}}else{let tn={instancePath:t+"/features/"+Oe+"/geometry/geometries/"+Et,schemaPath:"#/properties/features/items/properties/geometry/oneOf/7/properties/geometries/items/oneOf/4/type",keyword:"type",params:{type:"object"},message:"must be object"};i===null?i=[tn]:i.push(tn),a++}var Mt=Zr===a;if(Mt&&po)po=!1,so=[so,4];else{Mt&&(po=!0,so=4);let tn=a;if(a===tn)if(tr&&typeof tr=="object"&&!Array.isArray(tr)){let Bn;if(tr.type===void 0&&(Bn="type")||tr.coordinates===void 0&&(Bn="coordinates")){let Ur={instancePath:t+"/features/"+Oe+"/geometry/geometries/"+Et,schemaPath:"#/properties/features/items/properties/geometry/oneOf/7/properties/geometries/items/oneOf/5/required",keyword:"required",params:{missingProperty:Bn},message:"must have required property '"+Bn+"'"};i===null?i=[Ur]:i.push(Ur),a++}else{if(tr.type!==void 0){let Ur=tr.type,lo=a;if(typeof Ur!="string"){let Hn={instancePath:t+"/features/"+Oe+"/geometry/geometries/"+Et+"/type",schemaPath:"#/properties/features/items/properties/geometry/oneOf/7/properties/geometries/items/oneOf/5/properties/type/type",keyword:"type",params:{type:"string"},message:"must be string"};i===null?i=[Hn]:i.push(Hn),a++}if(Ur!=="MultiPolygon"){let Hn={instancePath:t+"/features/"+Oe+"/geometry/geometries/"+Et+"/type",schemaPath:"#/properties/features/items/properties/geometry/oneOf/7/properties/geometries/items/oneOf/5/properties/type/enum",keyword:"enum",params:{allowedValues:Hu.properties.features.items.properties.geometry.oneOf[7].properties.geometries.items.oneOf[5].properties.type.enum},message:"must be equal to one of the allowed values"};i===null?i=[Hn]:i.push(Hn),a++}var J=lo===a}else var J=!0;if(J){if(tr.coordinates!==void 0){let Ur=tr.coordinates,lo=a;if(a===lo)if(Array.isArray(Ur)){var oe=!0;let zo=Ur.length;for(let $n=0;$n<zo;$n++){let Zi=Ur[$n],Vo=a;if(a===Vo)if(Array.isArray(Zi)){var ue=!0;let Pi=Zi.length;for(let bi=0;bi<Pi;bi++){let Us=Zi[bi],os=a;if(a===os)if(Array.isArray(Us)){if(Us.length<4){let is={instancePath:t+"/features/"+Oe+"/geometry/geometries/"+Et+"/coordinates/"+$n+"/"+bi,schemaPath:"#/properties/features/items/properties/geometry/oneOf/7/properties/geometries/items/oneOf/5/properties/coordinates/items/items/minItems",keyword:"minItems",params:{limit:4},message:"must NOT have fewer than 4 items"};i===null?i=[is]:i.push(is),a++}else{var we=!0;let is=Us.length;for(let Mu=0;Mu<is;Mu++){let Jf=Us[Mu],_a=a;if(a===_a)if(Array.isArray(Jf)){if(Jf.length<2){let Ki={instancePath:t+"/features/"+Oe+"/geometry/geometries/"+Et+"/coordinates/"+$n+"/"+bi+"/"+Mu,schemaPath:"#/properties/features/items/properties/geometry/oneOf/7/properties/geometries/items/oneOf/5/properties/coordinates/items/items/items/minItems",keyword:"minItems",params:{limit:2},message:"must NOT have fewer than 2 items"};i===null?i=[Ki]:i.push(Ki),a++}else{var Fe=!0;let Ki=Jf.length;for(let Di=0;Di<Ki;Di++){let Fo=Jf[Di],ux=a;if(!(typeof Fo=="number"&&isFinite(Fo))){let Bs={instancePath:t+"/features/"+Oe+"/geometry/geometries/"+Et+"/coordinates/"+$n+"/"+bi+"/"+Mu+"/"+Di,schemaPath:"#/properties/features/items/properties/geometry/oneOf/7/properties/geometries/items/oneOf/5/properties/coordinates/items/items/items/items/type",keyword:"type",params:{type:"number"},message:"must be number"};i===null?i=[Bs]:i.push(Bs),a++}var Fe=ux===a;if(!Fe)break}}}else{let Ki={instancePath:t+"/features/"+Oe+"/geometry/geometries/"+Et+"/coordinates/"+$n+"/"+bi+"/"+Mu,schemaPath:"#/properties/features/items/properties/geometry/oneOf/7/properties/geometries/items/oneOf/5/properties/coordinates/items/items/items/type",keyword:"type",params:{type:"array"},message:"must be array"};i===null?i=[Ki]:i.push(Ki),a++}var we=_a===a;if(!we)break}}}else{let is={instancePath:t+"/features/"+Oe+"/geometry/geometries/"+Et+"/coordinates/"+$n+"/"+bi,schemaPath:"#/properties/features/items/properties/geometry/oneOf/7/properties/geometries/items/oneOf/5/properties/coordinates/items/items/type",keyword:"type",params:{type:"array"},message:"must be array"};i===null?i=[is]:i.push(is),a++}var ue=os===a;if(!ue)break}}else{let Pi={instancePath:t+"/features/"+Oe+"/geometry/geometries/"+Et+"/coordinates/"+$n,schemaPath:"#/properties/features/items/properties/geometry/oneOf/7/properties/geometries/items/oneOf/5/properties/coordinates/items/type",keyword:"type",params:{type:"array"},message:"must be array"};i===null?i=[Pi]:i.push(Pi),a++}var oe=Vo===a;if(!oe)break}}else{let zo={instancePath:t+"/features/"+Oe+"/geometry/geometries/"+Et+"/coordinates",schemaPath:"#/properties/features/items/properties/geometry/oneOf/7/properties/geometries/items/oneOf/5/properties/coordinates/type",keyword:"type",params:{type:"array"},message:"must be array"};i===null?i=[zo]:i.push(zo),a++}var J=lo===a}else var J=!0;if(J)if(tr.bbox!==void 0){let Ur=tr.bbox,lo=a;if(a===lo)if(Array.isArray(Ur)){if(Ur.length<4){let zo={instancePath:t+"/features/"+Oe+"/geometry/geometries/"+Et+"/bbox",schemaPath:"#/properties/features/items/properties/geometry/oneOf/7/properties/geometries/items/oneOf/5/properties/bbox/minItems",keyword:"minItems",params:{limit:4},message:"must NOT have fewer than 4 items"};i===null?i=[zo]:i.push(zo),a++}else{var We=!0;let zo=Ur.length;for(let $n=0;$n<zo;$n++){let Zi=Ur[$n],Vo=a;if(!(typeof Zi=="number"&&isFinite(Zi))){let Pi={instancePath:t+"/features/"+Oe+"/geometry/geometries/"+Et+"/bbox/"+$n,schemaPath:"#/properties/features/items/properties/geometry/oneOf/7/properties/geometries/items/oneOf/5/properties/bbox/items/type",keyword:"type",params:{type:"number"},message:"must be number"};i===null?i=[Pi]:i.push(Pi),a++}var We=Vo===a;if(!We)break}}}else{let zo={instancePath:t+"/features/"+Oe+"/geometry/geometries/"+Et+"/bbox",schemaPath:"#/properties/features/items/properties/geometry/oneOf/7/properties/geometries/items/oneOf/5/properties/bbox/type",keyword:"type",params:{type:"array"},message:"must be array"};i===null?i=[zo]:i.push(zo),a++}var J=lo===a}else var J=!0}}}else{let Bn={instancePath:t+"/features/"+Oe+"/geometry/geometries/"+Et,schemaPath:"#/properties/features/items/properties/geometry/oneOf/7/properties/geometries/items/oneOf/5/type",keyword:"type",params:{type:"object"},message:"must be object"};i===null?i=[Bn]:i.push(Bn),a++}var Mt=tn===a;Mt&&po?(po=!1,so=[so,5]):Mt&&(po=!0,so=5)}}}}if(po)a=Oi,i!==null&&(Oi?i.length=Oi:i=null);else{let wo={instancePath:t+"/features/"+Oe+"/geometry/geometries/"+Et,schemaPath:"#/properties/features/items/properties/geometry/oneOf/7/properties/geometries/items/oneOf",keyword:"oneOf",params:{passingSchemas:so},message:"must match exactly one schema in oneOf"};i===null?i=[wo]:i.push(wo),a++}var $e=ui===a;if(!$e)break}}else{let Pn={instancePath:t+"/features/"+Oe+"/geometry/geometries",schemaPath:"#/properties/features/items/properties/geometry/oneOf/7/properties/geometries/type",keyword:"type",params:{type:"array"},message:"must be array"};i===null?i=[Pn]:i.push(Pn),a++}var ot=Gr===a}else var ot=!0;if(ot)if(wt.bbox!==void 0){let Vr=wt.bbox,Gr=a;if(a===Gr)if(Array.isArray(Vr)){if(Vr.length<4){let Pn={instancePath:t+"/features/"+Oe+"/geometry/bbox",schemaPath:"#/properties/features/items/properties/geometry/oneOf/7/properties/bbox/minItems",keyword:"minItems",params:{limit:4},message:"must NOT have fewer than 4 items"};i===null?i=[Pn]:i.push(Pn),a++}else{var nt=!0;let Pn=Vr.length;for(let Et=0;Et<Pn;Et++){let tr=Vr[Et],ui=a;if(!(typeof tr=="number"&&isFinite(tr))){let po={instancePath:t+"/features/"+Oe+"/geometry/bbox/"+Et,schemaPath:"#/properties/features/items/properties/geometry/oneOf/7/properties/bbox/items/type",keyword:"type",params:{type:"number"},message:"must be number"};i===null?i=[po]:i.push(po),a++}var nt=ui===a;if(!nt)break}}}else{let Pn={instancePath:t+"/features/"+Oe+"/geometry/bbox",schemaPath:"#/properties/features/items/properties/geometry/oneOf/7/properties/bbox/type",keyword:"type",params:{type:"array"},message:"must be array"};i===null?i=[Pn]:i.push(Pn),a++}var ot=Gr===a}else var ot=!0}}}else{let on={instancePath:t+"/features/"+Oe+"/geometry",schemaPath:"#/properties/features/items/properties/geometry/oneOf/7/type",keyword:"type",params:{type:"object"},message:"must be object"};i===null?i=[on]:i.push(on),a++}var j=bn===a;j&&or?(or=!1,Er=[Er,7]):j&&(or=!0,Er=7)}}}}}}if(or)a=Cr,i!==null&&(Cr?i.length=Cr:i=null);else{let Un={instancePath:t+"/features/"+Oe+"/geometry",schemaPath:"#/properties/features/items/properties/geometry/oneOf",keyword:"oneOf",params:{passingSchemas:Er},message:"must match exactly one schema in oneOf"};return i===null?i=[Un]:i.push(Un),a++,_s.errors=i,!1}var m=an===a}else var m=!0;if(m)if(xt.bbox!==void 0){let wt=xt.bbox,an=a;if(a===an)if(Array.isArray(wt)){if(wt.length<4)return _s.errors=[{instancePath:t+"/features/"+Oe+"/bbox",schemaPath:"#/properties/features/items/properties/bbox/minItems",keyword:"minItems",params:{limit:4},message:"must NOT have fewer than 4 items"}],!1;{var Ye=!0;let or=wt.length;for(let Er=0;Er<or;Er++){let Rt=wt[Er],qo=a;if(!(typeof Rt=="number"&&isFinite(Rt)))return _s.errors=[{instancePath:t+"/features/"+Oe+"/bbox/"+Er,schemaPath:"#/properties/features/items/properties/bbox/items/type",keyword:"type",params:{type:"number"},message:"must be number"}],!1;var Ye=qo===a;if(!Ye)break}}}else return _s.errors=[{instancePath:t+"/features/"+Oe+"/bbox",schemaPath:"#/properties/features/items/properties/bbox/type",keyword:"type",params:{type:"array"},message:"must be array"}],!1;var m=an===a}else var m=!0}}}}else return _s.errors=[{instancePath:t+"/features/"+Oe,schemaPath:"#/properties/features/items/type",keyword:"type",params:{type:"object"},message:"must be object"}],!1;var h=Bt===a;if(!h)break}}else return _s.errors=[{instancePath:t+"/features",schemaPath:"#/properties/features/type",keyword:"type",params:{type:"array"},message:"must be array"}],!1;var c=gt===a}else var c=!0;if(c)if(e.bbox!==void 0){let Be=e.bbox,gt=a;if(a===gt)if(Array.isArray(Be)){if(Be.length<4)return _s.errors=[{instancePath:t+"/bbox",schemaPath:"#/properties/bbox/minItems",keyword:"minItems",params:{limit:4},message:"must NOT have fewer than 4 items"}],!1;{var be=!0;let Pt=Be.length;for(let Oe=0;Oe<Pt;Oe++){let xt=Be[Oe],Bt=a;if(!(typeof xt=="number"&&isFinite(xt)))return _s.errors=[{instancePath:t+"/bbox/"+Oe,schemaPath:"#/properties/bbox/items/type",keyword:"type",params:{type:"number"},message:"must be number"}],!1;var be=Bt===a;if(!be)break}}}else return _s.errors=[{instancePath:t+"/bbox",schemaPath:"#/properties/bbox/type",keyword:"type",params:{type:"array"},message:"must be array"}],!1;var c=gt===a}else var c=!0}}else return _s.errors=[{instancePath:t,schemaPath:"#/type",keyword:"type",params:{type:"object"},message:"must be object"}],!1;return _s.errors=i,a===0}u();var Kh=`${Ue.timePeriod}_start`,Xh=`${Ue.timePeriod}_end`,Vq=e=>Object.fromEntries(Object.entries(e).map(([t,r])=>!Me(r)||r===""?[t,null]:[t,r])),Gq=e=>Object.fromEntries(Object.entries(e).map(([t,r])=>Me(r)?[t,r]:[t,""])),Hq=e=>{let t=e[Ue.timePeriod]?Ol(e[Ue.timePeriod][0]):"",r=e[Ue.timePeriod]?Ol(e[Ue.timePeriod][1]):"";return{timePeriodStart:t,timePeriodEnd:r}},$q=(e,t)=>{let r=l0(Oc(e),{representation:"date"}),n=l0(Oc(t),{representation:"date"});return[r,n]};var Wq="vkf-geojson-metadata-form-external-vector-map",J$e=[{label:"VKF",value:Uu.VKF},{label:"IDOHIST",value:Uu.IDOHIST}],nP=e=>({[Ue.title]:e[Ue.title],[Ue.timePeriod]:e[Ue.timePeriod],[Ue.description]:e[Ue.description],[Ue.externalContentUrl]:e[Ue.externalContentUrl],[Ue.externalContentType]:e[Ue.externalContentType],[Ue.thumbnailUrl]:e[Ue.thumbnailUrl]}),koe=e=>{let t={title:e[Ue.title],link_content:e[Ue.externalContentUrl],content_type:e[Ue.externalContentType],time_period:e[Ue.timePeriod],description:e[Ue.description],link_thumb:e[Ue.thumbnailUrl]};return Vq(t)},Q$e=e=>{let{timePeriodStart:t,timePeriodEnd:r}=Hq(e),n=e[Ue.externalContentType],o=Me(n)&&n!==""?n:Uu.VKF,i={[Ue.title]:e[Ue.title],[Ue.externalContentUrl]:e[Ue.externalContentUrl],[Ue.externalContentType]:o,[Kh]:t,[Xh]:r,[Ue.description]:e[Ue.description],[Ue.thumbnailUrl]:e[Ue.thumbnailUrl]};return Gq(i)},eWe=e=>{let t=e,r=t[Kh],n=t[Xh],o=$q(r,n);return{[Ue.title]:t[Ue.title],[Ue.externalContentUrl]:t[Ue.externalContentUrl],[Ue.externalContentType]:t[Ue.externalContentType],[Ue.timePeriod]:o,[Ue.description]:t[Ue.description],[Ue.thumbnailUrl]:t[Ue.thumbnailUrl]}},tWe=e=>{let t=X$e(e);if(!t)throw new Error("The GeoJson is not a valid FeatureCollection");if(e.features.length===0)throw new Error("The GeoJson is an empty FeatureCollection");return t};var xf=dn({key:"activeBasemapId",default:mr.getSettings().BASEMAPS[0].id}),Yq=dn({key:"currentApplicationState",default:void 0}),Zq=dn({key:"elementScreenSize",default:{map:{height:0,width:0}}}),rWe={facets:[],georeference:!1},wf=dn({key:"facetState",default:{facets:[],georeference:!1}}),qS=dn({key:"layoutState",default:Mc.VERTICAL}),Pc=dn({key:"horizontalLayoutModeState",default:Qs.STANDARD}),rr=dn({key:"mapState",default:void 0,dangerouslyAllowMutability:!0}),nWe=dn({key:"map3dState",default:!1}),zS=dn({key:"mapCountState",default:10}),Kq=dn({key:"searchIsLoadingState",default:!1}),qn=dn({key:"selectedLayersState",default:[],dangerouslyAllowMutability:!0}),Xq=dn({key:"selectedOriginalMapIdState",default:void 0}),tl=dn({key:"selectedGeoJsonLayerIdState",default:void 0}),d0=dn({key:"selectedGeoJsonLayerLastUpdatedState",default:0}),cu=Js({key:"selectedGeoJsonLayerState",get:({get:e})=>{let t=e(tl),r=e(qn),n=e(d0);return{selectedLayer:r.find(i=>i.getId()===t),lastUpdated:n}},dangerouslyAllowMutability:!0}),el=dn({key:"selectedGeoJsonFeatureIdentifierState",default:null}),oWe=Js({key:"isGeoJsonFeatureSelectedState",get:({get:e})=>{let t=e(el);if(!Me(t))return!1;let{featureId:r,sourceId:n}=t;return Me(r)&&Me(n)}}),h0=dn({key:"timeExtentState",default:[1850,1970]}),Roe=[1850,1970],m0=dn({key:"timeRangeState",default:Roe}),Jq=dn({key:"baseMapStyleLayersState",default:[]}),iWe=dn({key:"activeDialogState",default:Ic.None}),rl=dn({key:"drawState",default:void 0}),nl=dn({key:"editedGeojsonState",default:null}),kl=dn({key:"metadataDrawState",default:null}),Wo=dn({key:"vectorMapState",default:null}),zg=dn({key:"vectorMapActiveVersionDrawState",default:null}),aWe=Js({key:"isActiveVectorMapVersionDifferentState",get:({get:e})=>e(zg)!==null}),Qq=dn({key:"showDropZoneState",default:!1}),ez=dn({key:"addedFileState",default:null}),sWe=dn({key:"addGeoJsonDialogState",default:!1}),bs=dn({key:"drawModePanelState",default:Ti.NONE}),Ef=dn({key:"vectorMapExternalModePanelState",default:Cc.NONE}),ja=dn({key:"layerExternalVectorMapState",default:null,dangerouslyAllowMutability:!0}),tz=dn({key:"forceUpdateLayerExternalVectorMapState",default:0}),rz=Js({key:"metadataExternalVectorMapState",get:({get:e})=>{e(tz);let t=e(ja);return Me(t)?nP(t.getMetadata()):null},dangerouslyAllowMutability:!0}),lWe=Js({key:"geojsonExternalVectorMapState",get:({get:e})=>{e(tz);let t=e(ja);return Me(t)?t.getGeoJson():null},dangerouslyAllowMutability:!0}),uWe=Js({key:"layerIdExternalVectorMapState",get:({get:e})=>{let t=e(ja);return Me(t)?t.getId():null},dangerouslyAllowMutability:!0});function cWe(e,t=250){let r=(0,Rd.useRef)();return(0,Rd.useEffect)(()=>{clearTimeout(r.current)},[e]),(...n)=>{r.current=window.setTimeout(()=>{e.apply(this,n)},t)}}function pWe(e){let[t,r]=(0,Rd.useState)(e);return(0,Rd.useEffect)(()=>{r(e)},[e]),t}function fWe(e,t){let r=Lr(Zq),n=oP(e);(0,Rd.useEffect)(()=>{let{height:o,width:i}=n;r(a=>Object.assign({},a,{[t]:{height:o,width:i}}))},[n])}var oP=e=>{let[t,r]=(0,Rd.useState)({height:0,width:0});return(0,Rd.useLayoutEffect)(()=>{r(e.current.getBoundingClientRect())},[e]),bVe(e,n=>r(n.contentRect)),t};u();function dWe(e){var t,r,n="";if(typeof e=="string"||typeof e=="number")n+=e;else if(typeof e=="object")if(Array.isArray(e))for(t=0;t<e.length;t++)e[t]&&(r=dWe(e[t]))&&(n&&(n+=" "),n+=r);else for(t in e)e[t]&&(n&&(n+=" "),n+=t);return n}function X2r(){for(var e,t,r=0,n="";r<arguments.length;)(e=arguments[r++])&&(t=dWe(e))&&(n&&(n+=" "),n+=t);return n}var qt=X2r;var hWe=e=>{let{onClose:t,text:r,type:n}=e;return wp.default.createElement("div",{className:"notification-item"},wp.default.createElement("div",{className:qt("alert","alert-"+n),role:"alert"},wp.default.createElement("div",{className:"close"},wp.default.createElement("button",{type:"button",className:"close","aria-label":"Close",onClick:t},wp.default.createElement("span",{"aria-hidden":"true"},"\xD7"))),wp.default.createElement("div",{className:"text"},r)))};hWe.propTypes={onClose:nz.default.func,text:nz.default.string,type:nz.default.string};var J2r=()=>{let e=bt(ks),t=pWe(e),[r,n]=(0,wp.useState)([]);return(0,wp.useEffect)(()=>{if(e!==null&&e.id!==null&&e!==t){let o=[...r],i=r.findIndex(a=>a.id===e.id);i>-1?o.splice(i,1,e.text!==null?e:void 0):o.splice(0,0,e),n(o.filter(a=>a!==void 0))}},[e,r,t]),wp.default.createElement("div",{className:qt("vkf-notifications",r.length===0?"hide":"")},r.map(({type:o,text:i},a)=>wp.default.createElement(hWe,{key:a,onClose:()=>{let c=[...r];c.splice(a,1),n(c)},type:o,text:i})))},mWe=J2r;var gWe=mWe;u();var P0=ee(ke(),1);var xrt=ee(oz(),1);u();var FS=ee(ke(),1);var kWe=e=>Object.values(e).every(t=>t===void 0||Object.entries(t).length===0),zoe=(e,t=4)=>{if(Array.isArray(e))return e.map(r=>zoe(r,t));if(typeof e=="object"&&e!==null){let r={};return Object.entries(e).forEach(([n,o])=>{r[n]=zoe(o)}),r}else return isNaN(e)||e===null?e:e.toFixed(Math.min(uIr(e),t))},lIr=(e,t=4)=>{let r={};return Object.entries(e).forEach(([n,o])=>{r[n]=zoe(o,t)}),r},uIr=e=>Math.floor(e)===e?0:e.toString().split(".")[1].length||0,Foe=({geojson:e,properties:t})=>$o.fromPersistence({metadata:t,geoJson:e!=null?e:structuredClone(u0)}),RWe=(e,t)=>{let r;if(e===void 0)r=t;else if(t===void 0)r=e;else{let n=Array.isArray(e),o=Array.isArray(t),i=n?e:[e],a=o?t:[t];r=Array.from(new Set([...i,...a]))}return r},jWe=(e,t)=>{let r=e.isVisible(t),n=e.getOpacity(t),o=e.getType(),i={isVisible:r,opacity:n};return o===mo.VECTOR_MAP&&e.isLocal()?Object.assign(i,{geojson:e.getGeoJsonForPersistence(),type:mo.VECTOR_MAP,properties:e.getMetadata()}):Object.assign(i,{id:e.getId(),type:o===mo.HISTORIC_MAP?mo.HISTORIC_MAP:mo.VECTOR_MAP})},US=(e,t=!1)=>{let r={center:e.getCenter().toArray(),bearing:e.getBearing(),pitch:e.getPitch(),zoom:e.getZoom()};return t?lIr(r,5):r};function jd(e,t){let r=()=>{if(typeof window=="undefined")return t;try{let a=window.localStorage.getItem(e);return a?JSON.parse(a):t}catch(a){return console.warn(`Error reading localStorage key \u201C${e}\u201D:`,a),t}},[n,o]=(0,FS.useState)(r),i=a=>{typeof window=="undefined"&&console.warn(`Tried setting localStorage key \u201C${e}\u201D even though environment is not a client`);try{let c=a instanceof Function?a(n):a;window.localStorage.setItem(e,JSON.stringify(c)),o(c),window.dispatchEvent(new Event("local-storage"))}catch(c){console.warn(`Error setting localStorage key \u201C${e}\u201D:`,c)}};return(0,FS.useEffect)(()=>{o(r())},[]),(0,FS.useEffect)(()=>{let a=()=>{o(r())};return window.addEventListener("storage",a),window.addEventListener("local-storage",a),()=>{window.removeEventListener("storage",a),window.removeEventListener("local-storage",a)}},[]),[n,i]}var qWe=e=>{(0,FS.useEffect)(()=>{let t="onpagehide"in window.self?"pagehide":"unload";return window.addEventListener(t,e,{capture:!0}),()=>{window.removeEventListener(t,e,{capture:!0})}},[e])},BS=e=>`${window.location.origin}${window.location.pathname}?${e}`;u();u();var zWe=e=>e.r!==void 0||e.d!==void 0||e.ri!==void 0||e.u!==void 0,FWe=e=>e.rotation!==void 0||e.direction!==void 0||e.right!==void 0||e.up!==void 0,UWe=e=>{let{c:t,r,d:n,u:o,p:i,z:a}=e;return Object.assign({},t===void 0?null:{center:t},r===void 0?null:{rotation:r},a===void 0?null:{zoom:a},i===void 0?null:{position:i},n===void 0?null:{direction:n},o===void 0?null:{up:o})},cIr=e=>{let[t,r,n]=e,o=Math.log2(6378137/n)+6;return{center:[t,r],pitch:50,zoom:o}},pIr=(e,t)=>({bearing:fIr(t),legacy3dMapView:!0}),BWe=e=>e*(180/Math.PI),fIr=e=>{let t=Math.PI+(Math.atan2(e[0],e[1])-Math.PI/2);return BWe(t)};function iz(e){let{center:t,rotation:r,direction:n,position:o,zoom:i}=e;return Object.assign({},t===void 0?null:{center:t},r===void 0?null:{pitch:BWe(r)},i===void 0?null:{zoom:i},o===void 0?null:cIr(o),n===void 0||o===void 0?null:pIr(o,n))}var az={"2D":0,"3D":1},VWe=e=>{if(e!==void 0)return e===az["3D"]},GWe=e=>{if(zWe(e)){let i=UWe(e);return iz(i)}let{c:t,be:r,p:n,z:o}=e;return Object.assign({},t===void 0?null:{center:t},r===void 0?null:{bearing:r},n===void 0?null:{pitch:n},o===void 0?null:{zoom:o})},HWe=e=>{let{fid:t,foid:r}=e;if(!Me(t)||!Me(r))return;let n=/^[0-9]+$/.test(t),o=Number.parseInt(t,10);if(!n||!Number.isFinite(o)){console.error(`The feature id cannot be parsed from url params. The id '${t}' cannot be coerced to type number.`);return}return{featureId:o,sourceId:r}};u();var rb=ee(ke(),1);var dIr=function(){let e=bt(xf),t=bt(wf),r=bt(rr),n=bt(h0),o=bt(m0),i=bt(qn),a=Lr(Yq),[,c]=jd(Uoe,{operationalLayers:[],is3dEnabled:!1}),h=(0,rb.useCallback)(()=>{if(r!==void 0){let m=r.isVkfGlobeModeEnabled(),y={activeBasemapId:e,is3dEnabled:m,operationalLayers:i.map(w=>jWe(w,r)).filter(w=>w!==null),searchOptions:{facets:t,timeExtent:n,timeRange:o}};return y.cameraOptions=US(r),c(y),y}},[e,r,t,i,n,o]);return qWe(h),(0,rb.useEffect)(()=>{a(()=>h)},[h]),rb.default.createElement(rb.default.Fragment,null)},$We=dIr;u();u();function VS(e){return yt(this,null,function*(){let t=mr.getSettings().API_SEARCH;if(t===void 0)throw new Error("The url for the search endpoint is not set.");let r=yield Za.get(`${t}/_doc/${e}`);if(r.status===200)return r.data._source;console.error("Something went wrong while trying to fetch search document.")})}u();var iP=function(e,t){let r="geometry"in t?t.geometry:void 0,n=[t.time_period_start,t.time_period_end];delete t.geometry,delete t.time_period_start,delete t.time_period_end;let o=Te({},t);return o.id=e,o[Ue.timePeriod]=n,o.type===mo.VECTOR_MAP?(o[Ue.vectorMapId]=e,$o.fromPersistence({geometry:r,metadata:o,geoJson:structuredClone(u0)})):new kg({metadata:o,geometry:r})},WWe=function(e){let t=[];for(let r=0,n=e.length;r<n;r++)t.push(iP(e[r]._id,e[r]._source));return t};var YWe=e=>VS(e).then(t=>iP(e,t)).catch(()=>{let t=new kg({metadata:{id:e,has_georeference:!1}});return t.setIsMissing(!0),t});u();var du=ee(ke(),1);u();u();var rie=ee(eZe(),1);function vr(){return vr=rie.default?rie.default.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},vr.apply(null,arguments)}u();var EZe=ee(fZe(),1);u();var iie=ee(wZe(),1);function gz(e,t){return gz=iie.default?iie.default.bind():function(r,n){return r.__proto__=n,r},gz(e,t)}function hn(e,t){e.prototype=(0,EZe.default)(t.prototype),e.prototype.constructor=e,gz(e,t)}u();function Tn(e,t){if(e==null)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(t.indexOf(n)!==-1)continue;r[n]=e[n]}return r}u();u();u();function yo(){return yo=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},yo.apply(null,arguments)}u();function HS(e,t){if(e==null)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(t.indexOf(n)!==-1)continue;r[n]=e[n]}return r}var sie=ee(ke());u();var KYn=ee(yz()),yMr=function(){};function TZe(e,t){var r={};return Object.keys(e).forEach(function(n){if(r[$S(n)]=yMr,0)var o}),r}function aie(e,t){return e[t]!==void 0}function $S(e){return"default"+e.charAt(0).toUpperCase()+e.substr(1)}function IZe(e){return!!e&&(typeof e!="function"||e.prototype&&e.prototype.isReactComponent)}u();u();u();function WS(e,t){return WS=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(r,n){return r.__proto__=n,r},WS(e,t)}function _z(e,t){e.prototype=Object.create(t.prototype),e.prototype.constructor=e,WS(e,t)}var YS=ee(ke()),PZe=ee(uie()),DZe=ee(yz());var bMr="/Users/jquense/src/uncontrollable/src/uncontrollable.js";function nb(e,t,r){r===void 0&&(r=[]);var n=e.displayName||e.name||"Component",o=IZe(e),i=Object.keys(t),a=i.map($S);o||!r.length||(0,DZe.default)(!1);var c=function(m){_z(y,m);function y(){for(var E,A=arguments.length,P=new Array(A),j=0;j<A;j++)P[j]=arguments[j];E=m.call.apply(m,[this].concat(P))||this,E.handlers=Object.create(null),i.forEach(function(L){var z=t[L],B=function(Z){if(E.props[z]){var K;E._notifying=!0;for(var te=arguments.length,se=new Array(te>1?te-1:0),le=1;le<te;le++)se[le-1]=arguments[le];(K=E.props)[z].apply(K,[Z].concat(se)),E._notifying=!1}E.unmounted||E.setState(function(pe){var me,_e=pe.values;return{values:yo(Object.create(null),_e,(me={},me[L]=Z,me))}})};E.handlers[z]=B}),r.length&&(E.attachRef=function(L){E.inner=L});var D=Object.create(null);return i.forEach(function(L){D[L]=E.props[$S(L)]}),E.state={values:D,prevProps:{}},E}var w=y.prototype;return w.shouldComponentUpdate=function(){return!this._notifying},y.getDerivedStateFromProps=function(A,P){var j=P.values,D=P.prevProps,L={values:yo(Object.create(null),j),prevProps:{}};return i.forEach(function(z){L.prevProps[z]=A[z],!aie(A,z)&&aie(D,z)&&(L.values[z]=A[$S(z)])}),L},w.componentWillUnmount=function(){this.unmounted=!0},w.render=function(){var A=this,P=this.props,j=P.innerRef,D=HS(P,["innerRef"]);a.forEach(function(z){delete D[z]});var L={};return i.forEach(function(z){var B=A.props[z];L[z]=B!==void 0?B:A.state.values[z]}),YS.default.createElement(e,yo({},D,L,this.handlers,{ref:j||this.attachRef}))},y}(YS.default.Component);(0,PZe.polyfill)(c),c.displayName="Uncontrolled("+n+")",c.propTypes=yo({innerRef:function(){}},TZe(t,n)),r.forEach(function(m){c.prototype[m]=function(){var w;return(w=this.inner)[m].apply(w,arguments)}});var h=c;return YS.default.forwardRef&&(h=YS.default.forwardRef(function(m,y){return YS.default.createElement(c,yo({},m,{innerRef:y,__source:{fileName:bMr,lineNumber:128},__self:this}))}),h.propTypes=c.propTypes),h.ControlledComponent=e,h.deferControlTo=function(m,y,w){return y===void 0&&(y={}),nb(m,yo({},t,y),w)},h}u();var fie=ee(pie());var FZe=ee(yz()),bz=ee(It());u();var fu={LARGE:"large",SMALL:"small",XSMALL:"xsmall"},cP={large:"lg",medium:"md",small:"sm",xsmall:"xs",lg:"lg",md:"md",sm:"sm",xs:"xs"};var zZe={SUCCESS:"success",WARNING:"warning",DANGER:"danger",INFO:"info"},pP={DEFAULT:"default",PRIMARY:"primary",LINK:"link",INVERSE:"inverse"};function die(e){return function(){for(var t=arguments.length,r=new Array(t),n=0;n<t;n++)r[n]=arguments[n];var o=r[r.length-1];return typeof o=="function"?e.apply(void 0,r):function(i){return e.apply(void 0,r.concat([i]))}}}function ri(e,t){var r=(e.bsClass||"").trim();return r==null&&(0,FZe.default)(!1),r+(t?"-"+t:"")}var go=die(function(e,t){var r=t.propTypes||(t.propTypes={}),n=t.defaultProps||(t.defaultProps={});return r.bsClass=bz.default.string,n.bsClass=e,t}),xz=die(function(e,t,r){typeof t!="string"&&(r=t,t=void 0);var n=r.STYLES||[],o=r.propTypes||{};e.forEach(function(c){n.indexOf(c)===-1&&n.push(c)});var i=bz.default.oneOf(n);if(r.STYLES=n,i._values=n,r.propTypes=vr({},o,{bsStyle:i}),t!==void 0){var a=r.defaultProps||(r.defaultProps={});a.bsStyle=t}return r}),Jh=die(function(e,t,r){typeof t!="string"&&(r=t,t=void 0);var n=r.SIZES||[],o=r.propTypes||{};e.forEach(function(c){n.indexOf(c)===-1&&n.push(c)});var i=[];n.forEach(function(c){var h=cP[c];h&&h!==c&&i.push(h),i.push(c)});var a=bz.default.oneOf(i);return a._values=i,r.SIZES=n,r.propTypes=vr({},o,{bsSize:a}),t!==void 0&&(r.defaultProps||(r.defaultProps={}),r.defaultProps.bsSize=t),r});function Yo(e){var t,r=(t={},t[ri(e)]=!0,t);if(e.bsSize){var n=cP[e.bsSize]||e.bsSize;r[ri(e,n)]=!0}return e.bsStyle&&(r[ri(e,e.bsStyle)]=!0),r}function UZe(e){return{bsClass:e.bsClass,bsSize:e.bsSize,bsStyle:e.bsStyle,bsRole:e.bsRole}}function BZe(e){return e==="bsClass"||e==="bsSize"||e==="bsStyle"||e==="bsRole"}function Ii(e){var t={};return(0,fie.default)(e).forEach(function(r){var n=r[0],o=r[1];BZe(n)||(t[n]=o)}),[UZe(e),t]}function ZS(e,t){var r={};t.forEach(function(o){r[o]=!0});var n={};return(0,fie.default)(e).forEach(function(o){var i=o[0],a=o[1];!BZe(i)&&!r[i]&&(n[i]=a)}),[UZe(e),n]}u();var Rl=ee(ke());function IMr(e,t,r){var n=0;return Rl.default.Children.map(e,function(o){return Rl.default.isValidElement(o)?t.call(r,o,n++):o})}function MMr(e,t,r){var n=0;Rl.default.Children.forEach(e,function(o){Rl.default.isValidElement(o)&&t.call(r,o,n++)})}function CMr(e){var t=0;return Rl.default.Children.forEach(e,function(r){Rl.default.isValidElement(r)&&++t}),t}function AMr(e,t,r){var n=0,o=[];return Rl.default.Children.forEach(e,function(i){Rl.default.isValidElement(i)&&t.call(r,i,n++)&&o.push(i)}),o}function OMr(e,t,r){var n=0,o;return Rl.default.Children.forEach(e,function(i){o||Rl.default.isValidElement(i)&&t.call(r,i,n++)&&(o=i)}),o}function PMr(e,t,r){var n=0,o=!0;return Rl.default.Children.forEach(e,function(i){o&&Rl.default.isValidElement(i)&&(t.call(r,i,n++)||(o=!1))}),o}function DMr(e,t,r){var n=0,o=!1;return Rl.default.Children.forEach(e,function(i){o||Rl.default.isValidElement(i)&&t.call(r,i,n++)&&(o=!0)}),o}function NMr(e){var t=[];return Rl.default.Children.forEach(e,function(r){Rl.default.isValidElement(r)&&t.push(r)}),t}var qd={map:IMr,forEach:MMr,count:CMr,find:OMr,filter:AMr,every:PMr,some:DMr,toArray:NMr};u();var hie=ee(It()),fP=ee(ke()),RMr={label:hie.default.string.isRequired,onClick:hie.default.func},jMr={label:"Close"},mie=function(e){hn(t,e);function t(){return e.apply(this,arguments)||this}var r=t.prototype;return r.render=function(){var o=this.props,i=o.label,a=o.onClick;return fP.default.createElement("button",{type:"button",className:"close",onClick:a},fP.default.createElement("span",{"aria-hidden":"true"},"\xD7"),fP.default.createElement("span",{className:"sr-only"},i))},t}(fP.default.Component);mie.propTypes=RMr;mie.defaultProps=jMr;var KZe=mie;u();u();function fi(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}var _ie=ee(ke()),Ug=ee(It()),oKe=ee($u());u();function ZMr(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];return t.filter(function(n){return n!=null}).reduce(function(n,o){if(typeof o!="function")throw new Error("Invalid Argument Type, must only provide functions, undefined, or null.");return n===null?o:function(){for(var a=arguments.length,c=new Array(a),h=0;h<a;h++)c[h]=arguments[h];n.apply(this,c),o.apply(this,c)}},null)}var Wu=ZMr;var KMr={href:Ug.default.string,onClick:Ug.default.func,onKeyDown:Ug.default.func,disabled:Ug.default.bool,role:Ug.default.string,tabIndex:Ug.default.oneOfType([Ug.default.number,Ug.default.string]),componentClass:oKe.default},XMr={componentClass:"a"};function nKe(e){return!e||e.trim()==="#"}var bie=function(e){hn(t,e);function t(n,o){var i;return i=e.call(this,n,o)||this,i.handleClick=i.handleClick.bind(fi(fi(i))),i.handleKeyDown=i.handleKeyDown.bind(fi(fi(i))),i}var r=t.prototype;return r.handleClick=function(o){var i=this.props,a=i.disabled,c=i.href,h=i.onClick;if((a||nKe(c))&&o.preventDefault(),a){o.stopPropagation();return}h&&h(o)},r.handleKeyDown=function(o){o.key===" "&&(o.preventDefault(),this.handleClick(o))},r.render=function(){var o=this.props,i=o.componentClass,a=o.disabled,c=o.onKeyDown,h=Tn(o,["componentClass","disabled","onKeyDown"]);return nKe(h.href)&&(h.role=h.role||"button",h.href=h.href||"#"),a&&(h.tabIndex=-1,h.style=vr({pointerEvents:"none"},h.style)),_ie.default.createElement(i,vr({},h,{onClick:this.handleClick,onKeyDown:Wu(this.handleKeyDown,c)}))},t}(_ie.default.Component);bie.propTypes=KMr;bie.defaultProps=XMr;var kz=bie;u();var iKe=ee(ZZe());var xie=ee(ko()),Rz=ee(ke()),ob=ee(It()),aKe=ee($u());var JMr={active:ob.default.bool,disabled:ob.default.bool,block:ob.default.bool,onClick:ob.default.func,componentClass:aKe.default,href:ob.default.string,type:ob.default.oneOf(["button","reset","submit"])},QMr={active:!1,block:!1,disabled:!1},wie=function(e){hn(t,e);function t(){return e.apply(this,arguments)||this}var r=t.prototype;return r.renderAnchor=function(o,i){return Rz.default.createElement(kz,vr({},o,{className:(0,xie.default)(i,o.disabled&&"disabled")}))},r.renderButton=function(o,i){var a=o.componentClass,c=Tn(o,["componentClass"]),h=a||"button";return Rz.default.createElement(h,vr({},c,{type:c.type||"button",className:i}))},r.render=function(){var o,i=this.props,a=i.active,c=i.block,h=i.className,m=Tn(i,["active","block","className"]),y=Ii(m),w=y[0],E=y[1],A=vr({},Yo(w),(o={active:a},o[ri(w,"block")]=c,o)),P=(0,xie.default)(h,A);return E.href?this.renderAnchor(E,P):this.renderButton(E,P)},t}(Rz.default.Component);wie.propTypes=JMr;wie.defaultProps=QMr;var jz=go("btn",Jh([fu.LARGE,fu.SMALL,fu.XSMALL],xz((0,iKe.default)(zZe).concat([pP.DEFAULT,pP.PRIMARY,pP.LINK]),pP.DEFAULT,wie)));u();var uKe=ee(ko()),Eie=ee(ke()),cKe=ee(It());var oCr={glyph:cKe.default.string.isRequired},pKe=function(e){hn(t,e);function t(){return e.apply(this,arguments)||this}var r=t.prototype;return r.render=function(){var o,i=this.props,a=i.glyph,c=i.className,h=Tn(i,["glyph","className"]),m=Ii(h),y=m[0],w=m[1],E=vr({},Yo(y),(o={},o[ri(y,a)]=!0,o));return Eie.default.createElement("span",vr({},w,{className:(0,uKe.default)(c,E)}))},t}(Eie.default.Component);pKe.propTypes=oCr;var Bg=go("glyphicon",pKe);u();var dKe=ee(ko()),Sie=ee(ke()),zz=ee(It()),PKn=ee(ib());var aCr={htmlFor:zz.default.string,srOnly:zz.default.bool},sCr={srOnly:!1},lCr={$bs_formGroup:zz.default.object},Fz=function(e){hn(t,e);function t(){return e.apply(this,arguments)||this}var r=t.prototype;return r.render=function(){var o=this.context.$bs_formGroup,i=o&&o.controlId,a=this.props,c=a.htmlFor,h=c===void 0?i:c,m=a.srOnly,y=a.className,w=Tn(a,["htmlFor","srOnly","className"]),E=Ii(w),A=E[0],P=E[1],j=vr({},Yo(A),{"sr-only":m});return Sie.default.createElement("label",vr({},P,{htmlFor:h,className:(0,dKe.default)(y,j)}))},t}(Sie.default.Component);Fz.propTypes=aCr;Fz.defaultProps=sCr;Fz.contextTypes=lCr;var Uz=go("control-label",Fz);u();var oXe=ee(pie());function qie(e,t){var r=t.propTypes,n={},o={};return(0,oXe.default)(e).forEach(function(i){var a=i[0],c=i[1];r[a]?n[a]=c:o[a]=c}),[n,o]}u();var iXe=ee(ko()),p8=ee(ke()),Sf=ee(It()),eT=ee(jKe()),c8,kAr={in:Sf.default.bool,mountOnEnter:Sf.default.bool,unmountOnExit:Sf.default.bool,appear:Sf.default.bool,timeout:Sf.default.number,onEnter:Sf.default.func,onEntering:Sf.default.func,onEntered:Sf.default.func,onExit:Sf.default.func,onExiting:Sf.default.func,onExited:Sf.default.func},RAr={in:!1,timeout:300,mountOnEnter:!1,unmountOnExit:!1,appear:!1},jAr=(c8={},c8[eT.ENTERING]="in",c8[eT.ENTERED]="in",c8),zie=function(e){hn(t,e);function t(){return e.apply(this,arguments)||this}var r=t.prototype;return r.render=function(){var o=this.props,i=o.className,a=o.children,c=Tn(o,["className","children"]);return p8.default.createElement(eT.default,c,function(h,m){return p8.default.cloneElement(a,vr({},m,{className:(0,iXe.default)("fade",i,a.props.className,jAr[h])}))})},t}(p8.default.Component);zie.propTypes=kAr;zie.defaultProps=RAr;var y0=zie;u();var pXe=ee(ko()),Gie=ee(ke()),wP=ee(It()),fXe=ee($u()),LXn=ee(ib());u();var Fie=ee(ko()),xP=ee(ke()),aXe=ee(It());var qAr={bsRole:"feedback"},zAr={$bs_formGroup:aXe.default.object},Uie=function(e){hn(t,e);function t(){return e.apply(this,arguments)||this}var r=t.prototype;return r.getGlyph=function(o){switch(o){case"success":return"ok";case"warning":return"warning-sign";case"error":return"remove";default:return null}},r.renderDefaultFeedback=function(o,i,a,c){var h=this.getGlyph(o&&o.validationState);return h?xP.default.createElement(Bg,vr({},c,{glyph:h,className:(0,Fie.default)(i,a)})):null},r.render=function(){var o=this.props,i=o.className,a=o.children,c=Tn(o,["className","children"]),h=Ii(c),m=h[0],y=h[1],w=Yo(m);if(!a)return this.renderDefaultFeedback(this.context.$bs_formGroup,i,w,y);var E=xP.default.Children.only(a);return xP.default.cloneElement(E,vr({},y,{className:(0,Fie.default)(E.props.className,i,w)}))},t}(xP.default.Component);Uie.defaultProps=qAr;Uie.contextTypes=zAr;var sXe=go("form-control-feedback",Uie);u();var lXe=ee(ko()),Bie=ee(ke()),uXe=ee($u());var FAr={componentClass:uXe.default},UAr={componentClass:"p"},Vie=function(e){hn(t,e);function t(){return e.apply(this,arguments)||this}var r=t.prototype;return r.render=function(){var o=this.props,i=o.componentClass,a=o.className,c=Tn(o,["componentClass","className"]),h=Ii(c),m=h[0],y=h[1],w=Yo(m);return Bie.default.createElement(i,vr({},y,{className:(0,lXe.default)(a,w)}))},t}(Bie.default.Component);Vie.propTypes=FAr;Vie.defaultProps=UAr;var cXe=go("form-control-static",Vie);var BAr={componentClass:fXe.default,type:wP.default.string,id:wP.default.string,inputRef:wP.default.func},VAr={componentClass:"input"},GAr={$bs_formGroup:wP.default.object},tT=function(e){hn(t,e);function t(){return e.apply(this,arguments)||this}var r=t.prototype;return r.render=function(){var o=this.context.$bs_formGroup,i=o&&o.controlId,a=this.props,c=a.componentClass,h=a.type,m=a.id,y=m===void 0?i:m,w=a.inputRef,E=a.className,A=a.bsSize,P=Tn(a,["componentClass","type","id","inputRef","className","bsSize"]),j=Ii(P),D=j[0],L=j[1],z;if(h!=="file"&&(z=Yo(D)),A){var B=cP[A]||A;z[ri({bsClass:"input"},B)]=!0}return Gie.default.createElement(c,vr({},L,{type:h,id:y,ref:w,className:(0,pXe.default)(E,z)}))},t}(Gie.default.Component);tT.propTypes=BAr;tT.defaultProps=VAr;tT.contextTypes=GAr;tT.Feedback=sXe;tT.Static=cXe;var Hie=go("form-control",Jh([fu.SMALL,fu.LARGE],tT));u();var dXe=ee(ko()),$ie=ee(ke()),f8=ee(It());var HAr={controlId:f8.default.string,validationState:f8.default.oneOf(["success","warning","error",null])},$Ar={$bs_formGroup:f8.default.object.isRequired},Wie=function(e){hn(t,e);function t(){return e.apply(this,arguments)||this}var r=t.prototype;return r.getChildContext=function(){var o=this.props,i=o.controlId,a=o.validationState;return{$bs_formGroup:{controlId:i,validationState:a}}},r.hasFeedback=function(o){var i=this;return qd.some(o,function(a){return a.props.bsRole==="feedback"||a.props.children&&i.hasFeedback(a.props.children)})},r.render=function(){var o=this.props,i=o.validationState,a=o.className,c=o.children,h=Tn(o,["validationState","className","children"]),m=ZS(h,["controlId"]),y=m[0],w=m[1],E=vr({},Yo(y),{"has-feedback":this.hasFeedback(c)});return i&&(E["has-"+i]=!0),$ie.default.createElement("div",vr({},w,{className:(0,dXe.default)(a,E)}),c)},t}($ie.default.Component);Wie.propTypes=HAr;Wie.childContextTypes=$Ar;var d8=go("form-group",Jh([fu.LARGE,fu.SMALL],Wie));u();var yae=ee(ko()),_ae=ee(IXe()),qJe=ee(lb()),zJe=ee(Qh()),bae=ee(Kie()),oT=ee(ke()),il=ee(It()),FJe=ee(xa()),iT=ee(CJe()),UJe=ee(eae()),BJe=ee($u());u();var AJe=ee(ko()),pae=ee(ke()),OJe=ee($u());var nDr={componentClass:OJe.default},oDr={componentClass:"div"},fae=function(e){hn(t,e);function t(){return e.apply(this,arguments)||this}var r=t.prototype;return r.render=function(){var o=this.props,i=o.componentClass,a=o.className,c=Tn(o,["componentClass","className"]),h=Ii(c),m=h[0],y=h[1],w=Yo(m);return pae.default.createElement(i,vr({},y,{className:(0,AJe.default)(a,w)}))},t}(pae.default.Component);fae.propTypes=nDr;fae.defaultProps=oDr;var CP=go("modal-body",fae);u();var dae=ee(ko()),AP=ee(ke()),PJe=ee(It());var iDr={dialogClassName:PJe.default.string},DJe=function(e){hn(t,e);function t(){return e.apply(this,arguments)||this}var r=t.prototype;return r.render=function(){var o,i=this.props,a=i.dialogClassName,c=i.className,h=i.style,m=i.children,y=i.onMouseDownDialog,w=Tn(i,["dialogClassName","className","style","children","onMouseDownDialog"]),E=Ii(w),A=E[0],P=E[1],j=ri(A),D=vr({display:"block"},h),L=vr({},Yo(A),(o={},o[j]=!1,o[ri(A,"dialog")]=!0,o));return AP.default.createElement("div",vr({},P,{tabIndex:"-1",role:"dialog",style:D,className:(0,dae.default)(c,j)}),AP.default.createElement("div",{className:(0,dae.default)(a,L),onMouseDown:y},AP.default.createElement("div",{className:ri(A,"content"),role:"document"},m)))},t}(AP.default.Component);DJe.propTypes=iDr;var L8=go("modal",Jh([fu.LARGE,fu.SMALL],DJe));u();var NJe=ee(ko()),hae=ee(ke()),LJe=ee($u());var aDr={componentClass:LJe.default},sDr={componentClass:"div"},mae=function(e){hn(t,e);function t(){return e.apply(this,arguments)||this}var r=t.prototype;return r.render=function(){var o=this.props,i=o.componentClass,a=o.className,c=Tn(o,["componentClass","className"]),h=Ii(c),m=h[0],y=h[1],w=Yo(m);return hae.default.createElement(i,vr({},y,{className:(0,NJe.default)(a,w)}))},t}(hae.default.Component);mae.propTypes=aDr;mae.defaultProps=sDr;var OP=go("modal-footer",mae);u();var kJe=ee(ko()),nT=ee(It()),k8=ee(ke());var lDr={closeLabel:nT.default.string,closeButton:nT.default.bool,onHide:nT.default.func},uDr={closeLabel:"Close",closeButton:!1},cDr={$bs_modal:nT.default.shape({onHide:nT.default.func})},R8=function(e){hn(t,e);function t(){return e.apply(this,arguments)||this}var r=t.prototype;return r.render=function(){var o=this.props,i=o.closeLabel,a=o.closeButton,c=o.onHide,h=o.className,m=o.children,y=Tn(o,["closeLabel","closeButton","onHide","className","children"]),w=this.context.$bs_modal,E=Ii(y),A=E[0],P=E[1],j=Yo(A);return k8.default.createElement("div",vr({},P,{className:(0,kJe.default)(h,j)}),a&&k8.default.createElement(KZe,{label:i,onClick:Wu(w&&w.onHide,c)}),m)},t}(k8.default.Component);R8.propTypes=lDr;R8.defaultProps=uDr;R8.contextTypes=cDr;var PP=go("modal-header",R8);u();var RJe=ee(ko()),gae=ee(ke()),jJe=ee($u());var pDr={componentClass:jJe.default},fDr={componentClass:"h4"},vae=function(e){hn(t,e);function t(){return e.apply(this,arguments)||this}var r=t.prototype;return r.render=function(){var o=this.props,i=o.componentClass,a=o.className,c=Tn(o,["componentClass","className"]),h=Ii(c),m=h[0],y=h[1],w=Yo(m);return gae.default.createElement(i,vr({},y,{className:(0,RJe.default)(a,w)}))},t}(gae.default.Component);vae.propTypes=pDr;vae.defaultProps=fDr;var DP=go("modal-title",vae);var dDr=vr({},iT.default.propTypes,L8.propTypes,{backdrop:il.default.oneOf(["static",!0,!1]),backdropClassName:il.default.string,keyboard:il.default.bool,animation:il.default.bool,dialogComponentClass:BJe.default,autoFocus:il.default.bool,enforceFocus:il.default.bool,restoreFocus:il.default.bool,show:il.default.bool,onHide:il.default.func,onEnter:il.default.func,onEntering:il.default.func,onEntered:il.default.func,onExit:il.default.func,onExiting:il.default.func,onExited:il.default.func,container:iT.default.propTypes.container}),hDr=vr({},iT.default.defaultProps,{animation:!0,dialogComponentClass:L8}),mDr={$bs_modal:il.default.shape({onHide:il.default.func})};function gDr(e){return oT.default.createElement(y0,vr({},e,{timeout:Sp.TRANSITION_DURATION}))}function vDr(e){return oT.default.createElement(y0,vr({},e,{timeout:Sp.BACKDROP_TRANSITION_DURATION}))}var Sp=function(e){hn(t,e);function t(n,o){var i;return i=e.call(this,n,o)||this,i.handleDialogBackdropMouseDown=function(){i._waitingForMouseUp=!0},i.handleMouseUp=function(a){var c=i._modal.getDialogElement();i._waitingForMouseUp&&a.target===c&&(i._ignoreBackdropClick=!0),i._waitingForMouseUp=!1},i.handleEntering=i.handleEntering.bind(fi(fi(i))),i.handleExited=i.handleExited.bind(fi(fi(i))),i.handleWindowResize=i.handleWindowResize.bind(fi(fi(i))),i.handleDialogClick=i.handleDialogClick.bind(fi(fi(i))),i.setModalRef=i.setModalRef.bind(fi(fi(i))),i.state={style:{}},i}var r=t.prototype;return r.getChildContext=function(){return{$bs_modal:{onHide:this.props.onHide}}},r.componentWillUnmount=function(){this.handleExited()},r.setModalRef=function(o){this._modal=o},r.handleDialogClick=function(o){if(this._ignoreBackdropClick||o.target!==o.currentTarget){this._ignoreBackdropClick=!1;return}this.props.onHide()},r.handleEntering=function(){_ae.default.on(window,"resize",this.handleWindowResize),this.updateStyle()},r.handleExited=function(){_ae.default.off(window,"resize",this.handleWindowResize)},r.handleWindowResize=function(){this.updateStyle()},r.updateStyle=function(){if(zJe.default){var o=this._modal.getDialogElement(),i=o.scrollHeight,a=(0,qJe.default)(o),c=(0,UJe.default)(FJe.default.findDOMNode(this.props.container||a.body)),h=i>a.documentElement.clientHeight;this.setState({style:{paddingRight:c&&!h?(0,bae.default)():void 0,paddingLeft:!c&&h?(0,bae.default)():void 0}})}},r.render=function(){var o=this.props,i=o.backdrop,a=o.backdropClassName,c=o.animation,h=o.show,m=o.dialogComponentClass,y=o.className,w=o.style,E=o.children,A=o.onEntering,P=o.onExited,j=Tn(o,["backdrop","backdropClassName","animation","show","dialogComponentClass","className","style","children","onEntering","onExited"]),D=qie(j,iT.default),L=D[0],z=D[1],B=h&&!c&&"in";return oT.default.createElement(iT.default,vr({},L,{ref:this.setModalRef,show:h,containerClassName:ri(j,"open"),transition:c?gDr:void 0,backdrop:i,backdropTransition:c?vDr:void 0,backdropClassName:(0,yae.default)(ri(j,"backdrop"),a,B),onEntering:Wu(A,this.handleEntering),onExited:Wu(P,this.handleExited),onMouseUp:this.handleMouseUp}),oT.default.createElement(m,vr({},z,{style:vr({},this.state.style,w),className:(0,yae.default)(y,B),onClick:i===!0?this.handleDialogClick:null,onMouseDownDialog:this.handleDialogBackdropMouseDown}),E))},t}(oT.default.Component);Sp.propTypes=dDr;Sp.defaultProps=hDr;Sp.childContextTypes=mDr;Sp.Body=CP;Sp.Header=PP;Sp.Title=DP;Sp.Footer=OP;Sp.Dialog=L8;Sp.TRANSITION_DURATION=300;Sp.BACKDROP_TRANSITION_DURATION=150;var Gg=go("modal",Jh([fu.LARGE,fu.SMALL],Sp));u();var VJe=ee(ko()),NP=ee($Ke()),LP=ee(ke()),al=ee(It()),GJe=ee(xa()),HJe=ee(lKe()),xQn=ee(ib());var yDr={activeKey:al.default.any,activeHref:al.default.string,stacked:al.default.bool,justified:(0,HJe.default)(al.default.bool,function(e){var t=e.justified,r=e.navbar;return t&&r?Error("justified navbar `Nav`s are not supported"):null}),onSelect:al.default.func,role:al.default.string,navbar:al.default.bool,pullRight:al.default.bool,pullLeft:al.default.bool},_Dr={justified:!1,pullRight:!1,pullLeft:!1,stacked:!1},bDr={$bs_navbar:al.default.shape({bsClass:al.default.string,onSelect:al.default.func}),$bs_tabContainer:al.default.shape({activeKey:al.default.any,onSelect:al.default.func.isRequired,getTabId:al.default.func.isRequired,getPaneId:al.default.func.isRequired})},j8=function(e){hn(t,e);function t(){return e.apply(this,arguments)||this}var r=t.prototype;return r.componentDidUpdate=function(){var o=this;if(this._needsRefocus){this._needsRefocus=!1;var i=this.props.children,a=this.getActiveProps(),c=a.activeKey,h=a.activeHref,m=qd.find(i,function(P){return o.isActive(P,c,h)}),y=qd.toArray(i),w=y.indexOf(m),E=GJe.default.findDOMNode(this).children,A=E&&E[w];!A||!A.firstChild||A.firstChild.focus()}},r.getActiveProps=function(){var o=this.context.$bs_tabContainer;return o||this.props},r.getNextActiveChild=function(o){var i=this,a=this.props.children,c=qd.filter(a,function(j){return j.props.eventKey!=null&&!j.props.disabled}),h=this.getActiveProps(),m=h.activeKey,y=h.activeHref,w=qd.find(a,function(j){return i.isActive(j,m,y)}),E=c.indexOf(w);if(E===-1)return c[0];var A=E+o,P=c.length;return A>=P?A=0:A<0&&(A=P-1),c[A]},r.getTabProps=function(o,i,a,c,h){var m=this;if(!i&&a!=="tablist")return null;var y=o.props,w=y.id,E=y["aria-controls"],A=y.eventKey,P=y.role,j=y.onKeyDown,D=y.tabIndex;return i&&(w=i.getTabId(A),E=i.getPaneId(A)),a==="tablist"&&(P=P||"tab",j=Wu(function(L){return m.handleTabKeyDown(h,L)},j),D=c?D:-1),{id:w,role:P,onKeyDown:j,"aria-controls":E,tabIndex:D}},r.handleTabKeyDown=function(o,i){var a;switch(i.keyCode){case NP.default.codes.left:case NP.default.codes.up:a=this.getNextActiveChild(-1);break;case NP.default.codes.right:case NP.default.codes.down:a=this.getNextActiveChild(1);break;default:return}i.preventDefault(),o&&a&&a.props.eventKey!=null&&o(a.props.eventKey),this._needsRefocus=!0},r.isActive=function(o,i,a){var c=o.props;return c.active||i!=null&&c.eventKey===i||a&&c.href===a?!0:c.active},r.render=function(){var o,i=this,a=this.props,c=a.stacked,h=a.justified,m=a.onSelect,y=a.role,w=a.navbar,E=a.pullRight,A=a.pullLeft,P=a.className,j=a.children,D=Tn(a,["stacked","justified","onSelect","role","navbar","pullRight","pullLeft","className","children"]),L=this.context.$bs_tabContainer,z=y||(L?"tablist":null),B=this.getActiveProps(),G=B.activeKey,Z=B.activeHref;delete D.activeKey,delete D.activeHref;var K=Ii(D),te=K[0],se=K[1],le=vr({},Yo(te),(o={},o[ri(te,"stacked")]=c,o[ri(te,"justified")]=h,o)),pe=w!=null?w:this.context.$bs_navbar,me,_e;if(pe){var de=this.context.$bs_navbar||{bsClass:"navbar"};le[ri(de,"nav")]=!0,_e=ri(de,"right"),me=ri(de,"left")}else _e="pull-right",me="pull-left";return le[_e]=E,le[me]=A,LP.default.createElement("ul",vr({},se,{role:z,className:(0,VJe.default)(P,le)}),qd.map(j,function(Ce){var Ze=i.isActive(Ce,G,Z),rt=Wu(Ce.props.onSelect,m,pe&&pe.onSelect,L&&L.onSelect);return(0,LP.cloneElement)(Ce,vr({},i.getTabProps(Ce,L,z,Ze,rt),{active:Ze,activeKey:G,activeHref:Z,onSelect:rt}))}))},t}(LP.default.Component);j8.propTypes=yDr;j8.defaultProps=_Dr;j8.contextTypes=bDr;var $Je=go("nav",xz(["tabs","pills"],j8));u();var WJe=ee(ko()),q8=ee(ke()),w0=ee(It());var xDr={active:w0.default.bool,disabled:w0.default.bool,role:w0.default.string,href:w0.default.string,onClick:w0.default.func,onSelect:w0.default.func,eventKey:w0.default.any},wDr={active:!1,disabled:!1},xae=function(e){hn(t,e);function t(n,o){var i;return i=e.call(this,n,o)||this,i.handleClick=i.handleClick.bind(fi(fi(i))),i}var r=t.prototype;return r.handleClick=function(o){if(this.props.disabled){o.preventDefault();return}this.props.onSelect&&this.props.onSelect(this.props.eventKey,o)},r.render=function(){var o=this.props,i=o.active,a=o.disabled,c=o.onClick,h=o.className,m=o.style,y=Tn(o,["active","disabled","onClick","className","style"]);return delete y.onSelect,delete y.eventKey,delete y.activeKey,delete y.activeHref,y.role?y.role==="tab"&&(y["aria-selected"]=i):y.href==="#"&&(y.role="button"),q8.default.createElement("li",{role:"presentation",className:(0,WJe.default)(h,{active:i,disabled:a}),style:m},q8.default.createElement(kz,vr({},y,{disabled:a,onClick:Wu(c,this.handleClick)})))},t}(q8.default.Component);xae.propTypes=xDr;xae.defaultProps=wDr;var YJe=xae;u();var EQe=ee(ko()),jP=ee(ke()),Tp=ee(It()),Cae=ee(wQe()),SQe=ee($u());var SNr=vr({},Cae.default.propTypes,{show:Tp.default.bool,rootClose:Tp.default.bool,onHide:Tp.default.func,animation:Tp.default.oneOfType([Tp.default.bool,SQe.default]),onEnter:Tp.default.func,onEntering:Tp.default.func,onEntered:Tp.default.func,onExit:Tp.default.func,onExiting:Tp.default.func,onExited:Tp.default.func,placement:Tp.default.oneOf(["top","right","bottom","left"])}),TNr={animation:y0,rootClose:!1,show:!1,placement:"right"},Aae=function(e){hn(t,e);function t(){return e.apply(this,arguments)||this}var r=t.prototype;return r.render=function(){var o=this.props,i=o.animation,a=o.children,c=Tn(o,["animation","children"]),h=i===!0?y0:i||null,m;return h?m=a:m=(0,jP.cloneElement)(a,{className:(0,EQe.default)(a.props.className,"in")}),jP.default.createElement(Cae.default,vr({},c,{transition:h}),m)},t}(jP.default.Component);Aae.propTypes=SNr;Aae.defaultProps=TNr;var Oae=Aae;u();var Pae=ee(ko()),lT=ee(ke()),uT=ee(It()),teo=ee(ib());var INr={inline:uT.default.bool,disabled:uT.default.bool,title:uT.default.string,validationState:uT.default.oneOf(["success","warning","error",null]),inputRef:uT.default.func},MNr={inline:!1,disabled:!1,title:""},Dae=function(e){hn(t,e);function t(){return e.apply(this,arguments)||this}var r=t.prototype;return r.render=function(){var o=this.props,i=o.inline,a=o.disabled,c=o.validationState,h=o.inputRef,m=o.className,y=o.style,w=o.title,E=o.children,A=Tn(o,["inline","disabled","validationState","inputRef","className","style","title","children"]),P=Ii(A),j=P[0],D=P[1],L=lT.default.createElement("input",vr({},D,{ref:h,type:"radio",disabled:a}));if(i){var z,B=(z={},z[ri(j,"inline")]=!0,z.disabled=a,z);return lT.default.createElement("label",{className:(0,Pae.default)(m,B),style:y,title:w},L,E)}var G=vr({},Yo(j),{disabled:a});return c&&(G["has-"+c]=!0),lT.default.createElement("div",{className:(0,Pae.default)(m,G),style:y},lT.default.createElement("label",{title:w},L,E))},t}(lT.default.Component);Dae.propTypes=INr;Dae.defaultProps=MNr;var Nae=go("radio",Dae);u();var jae=ee(ke()),rF=ee(It());u();var Z8=ee(ke()),Tf=ee(It());var CNr="tab",ANr="pane",ONr=Tf.default.oneOfType([Tf.default.string,Tf.default.number]),PNr={id:function(t){var r=null;if(!t.generateChildId){for(var n=arguments.length,o=new Array(n>1?n-1:0),i=1;i<n;i++)o[i-1]=arguments[i];r=ONr.apply(void 0,[t].concat(o)),!r&&!t.id&&(r=new Error("In order to properly initialize Tabs in a way that is accessible to assistive technologies (such as screen readers) an `id` or a `generateChildId` prop to TabContainer is required"))}return r},generateChildId:Tf.default.func,onSelect:Tf.default.func,activeKey:Tf.default.any},DNr={$bs_tabContainer:Tf.default.shape({activeKey:Tf.default.any,onSelect:Tf.default.func.isRequired,getTabId:Tf.default.func.isRequired,getPaneId:Tf.default.func.isRequired})},Lae=function(e){hn(t,e);function t(){return e.apply(this,arguments)||this}var r=t.prototype;return r.getChildContext=function(){var o=this.props,i=o.activeKey,a=o.onSelect,c=o.generateChildId,h=o.id,m=c||function(y,w){return h?h+"-"+w+"-"+y:null};return{$bs_tabContainer:{activeKey:i,onSelect:a,getTabId:function(w){return m(w,CNr)},getPaneId:function(w){return m(w,ANr)}}}},r.render=function(){var o=this.props,i=o.children,a=Tn(o,["children"]);return delete a.generateChildId,delete a.onSelect,delete a.activeKey,Z8.default.cloneElement(Z8.default.Children.only(i),a)},t}(Z8.default.Component);Lae.propTypes=PNr;Lae.childContextTypes=DNr;var K8=nb(Lae,{activeKey:"onSelect"});u();var TQe=ee(ko()),kae=ee(ke()),ql=ee(It()),X8=ee($u());var NNr={componentClass:X8.default,animation:ql.default.oneOfType([ql.default.bool,X8.default]),mountOnEnter:ql.default.bool,unmountOnExit:ql.default.bool},LNr={componentClass:"div",animation:!0,mountOnEnter:!1,unmountOnExit:!1},kNr={$bs_tabContainer:ql.default.shape({activeKey:ql.default.any})},RNr={$bs_tabContent:ql.default.shape({bsClass:ql.default.string,animation:ql.default.oneOfType([ql.default.bool,X8.default]),activeKey:ql.default.any,mountOnEnter:ql.default.bool,unmountOnExit:ql.default.bool,onPaneEnter:ql.default.func.isRequired,onPaneExited:ql.default.func.isRequired,exiting:ql.default.bool.isRequired})},qP=function(e){hn(t,e);function t(n,o){var i;return i=e.call(this,n,o)||this,i.handlePaneEnter=i.handlePaneEnter.bind(fi(fi(i))),i.handlePaneExited=i.handlePaneExited.bind(fi(fi(i))),i.state={activeKey:null,activeChild:null},i}var r=t.prototype;return r.getChildContext=function(){var o=this.props,i=o.bsClass,a=o.animation,c=o.mountOnEnter,h=o.unmountOnExit,m=this.state.activeKey,y=this.getContainerActiveKey(),w=m!=null?m:y,E=m!=null&&m!==y;return{$bs_tabContent:{bsClass:i,animation:a,activeKey:w,mountOnEnter:c,unmountOnExit:h,onPaneEnter:this.handlePaneEnter,onPaneExited:this.handlePaneExited,exiting:E}}},r.UNSAFE_componentWillReceiveProps=function(o){!o.animation&&this.state.activeChild&&this.setState({activeKey:null,activeChild:null})},r.componentWillUnmount=function(){this.isUnmounted=!0},r.getContainerActiveKey=function(){var o=this.context.$bs_tabContainer;return o&&o.activeKey},r.handlePaneEnter=function(o,i){return!this.props.animation||i!==this.getContainerActiveKey()?!1:(this.setState({activeKey:i,activeChild:o}),!0)},r.handlePaneExited=function(o){this.isUnmounted||this.setState(function(i){var a=i.activeChild;return a!==o?null:{activeKey:null,activeChild:null}})},r.render=function(){var o=this.props,i=o.componentClass,a=o.className,c=Tn(o,["componentClass","className"]),h=ZS(c,["animation","mountOnEnter","unmountOnExit"]),m=h[0],y=h[1];return kae.default.createElement(i,vr({},y,{className:(0,TQe.default)(a,ri(m,"content"))}))},t}(kae.default.Component);qP.propTypes=NNr;qP.defaultProps=LNr;qP.contextTypes=kNr;qP.childContextTypes=RNr;var J8=go("tab",qP);u();var IQe=ee(ko()),Q8=ee(ke()),hi=ee(It()),Rae=ee($u()),weo=ee(ib());var jNr={eventKey:hi.default.any,animation:hi.default.oneOfType([hi.default.bool,Rae.default]),id:hi.default.string,"aria-labelledby":hi.default.string,bsClass:hi.default.string,onEnter:hi.default.func,onEntering:hi.default.func,onEntered:hi.default.func,onExit:hi.default.func,onExiting:hi.default.func,onExited:hi.default.func,mountOnEnter:hi.default.bool,unmountOnExit:hi.default.bool},qNr={$bs_tabContainer:hi.default.shape({getTabId:hi.default.func,getPaneId:hi.default.func}),$bs_tabContent:hi.default.shape({bsClass:hi.default.string,animation:hi.default.oneOfType([hi.default.bool,Rae.default]),activeKey:hi.default.any,mountOnEnter:hi.default.bool,unmountOnExit:hi.default.bool,onPaneEnter:hi.default.func.isRequired,onPaneExited:hi.default.func.isRequired,exiting:hi.default.bool.isRequired})},zNr={$bs_tabContainer:hi.default.oneOf([null])},eF=function(e){hn(t,e);function t(n,o){var i;return i=e.call(this,n,o)||this,i.handleEnter=i.handleEnter.bind(fi(fi(i))),i.handleExited=i.handleExited.bind(fi(fi(i))),i.in=!1,i}var r=t.prototype;return r.getChildContext=function(){return{$bs_tabContainer:null}},r.componentDidMount=function(){this.shouldBeIn()&&this.handleEnter()},r.componentDidUpdate=function(){this.in?this.shouldBeIn()||this.handleExited():this.shouldBeIn()&&this.handleEnter()},r.componentWillUnmount=function(){this.in&&this.handleExited()},r.getAnimation=function(){if(this.props.animation!=null)return this.props.animation;var o=this.context.$bs_tabContent;return o&&o.animation},r.handleEnter=function(){var o=this.context.$bs_tabContent;o&&(this.in=o.onPaneEnter(this,this.props.eventKey))},r.handleExited=function(){var o=this.context.$bs_tabContent;o&&(o.onPaneExited(this),this.in=!1)},r.isActive=function(){var o=this.context.$bs_tabContent,i=o&&o.activeKey;return this.props.eventKey===i},r.shouldBeIn=function(){return this.getAnimation()&&this.isActive()},r.render=function(){var o=this.props,i=o.eventKey,a=o.className,c=o.onEnter,h=o.onEntering,m=o.onEntered,y=o.onExit,w=o.onExiting,E=o.onExited,A=o.mountOnEnter,P=o.unmountOnExit,j=Tn(o,["eventKey","className","onEnter","onEntering","onEntered","onExit","onExiting","onExited","mountOnEnter","unmountOnExit"]),D=this.context,L=D.$bs_tabContent,z=D.$bs_tabContainer,B=ZS(j,["animation"]),G=B[0],Z=B[1],K=this.isActive(),te=this.getAnimation(),se=A!=null?A:L&&L.mountOnEnter,le=P!=null?P:L&&L.unmountOnExit;if(!K&&!te&&le)return null;var pe=te===!0?y0:te||null;L&&(G.bsClass=ri(L,"pane"));var me=vr({},Yo(G),{active:K});z&&(Z.id=z.getPaneId(i),Z["aria-labelledby"]=z.getTabId(i));var _e=Q8.default.createElement("div",vr({},Z,{role:"tabpanel","aria-hidden":!K,className:(0,IQe.default)(a,me)}));if(pe){var de=L&&L.exiting;return Q8.default.createElement(pe,{in:K&&!de,onEnter:Wu(this.handleEnter,c),onEntering:h,onEntered:m,onExit:y,onExiting:w,onExited:Wu(this.handleExited,E),mountOnEnter:se,unmountOnExit:le},_e)}return _e},t}(Q8.default.Component);eF.propTypes=jNr;eF.contextTypes=qNr;eF.childContextTypes=zNr;var tF=go("tab-pane",eF);var FNr=vr({},tF.propTypes,{disabled:rF.default.bool,title:rF.default.node,tabClassName:rF.default.string}),zP=function(e){hn(t,e);function t(){return e.apply(this,arguments)||this}var r=t.prototype;return r.render=function(){var o=vr({},this.props);return delete o.title,delete o.disabled,delete o.tabClassName,jae.default.createElement(tF,o)},t}(jae.default.Component);zP.propTypes=FNr;zP.Container=K8;zP.Content=J8;zP.Pane=tF;var nF=zP;u();var db=ee(ke()),zd=ee(It()),MQe=ee(kie());var CQe=ee($u());var UNr=K8.ControlledComponent,BNr={activeKey:zd.default.any,bsStyle:zd.default.oneOf(["tabs","pills"]),animation:zd.default.oneOfType([zd.default.bool,CQe.default]),id:(0,MQe.default)(zd.default.oneOfType([zd.default.string,zd.default.number])),onSelect:zd.default.func,mountOnEnter:zd.default.bool,unmountOnExit:zd.default.bool},VNr={bsStyle:"tabs",animation:!0,mountOnEnter:!1,unmountOnExit:!1};function GNr(e){var t;return qd.forEach(e,function(r){t==null&&(t=r.props.eventKey)}),t}var oF=function(e){hn(t,e);function t(){return e.apply(this,arguments)||this}var r=t.prototype;return r.renderTab=function(o){var i=o.props,a=i.title,c=i.eventKey,h=i.disabled,m=i.tabClassName;return a==null?null:db.default.createElement(YJe,{eventKey:c,disabled:h,className:m},a)},r.render=function(){var o=this.props,i=o.id,a=o.onSelect,c=o.animation,h=o.mountOnEnter,m=o.unmountOnExit,y=o.bsClass,w=o.className,E=o.style,A=o.children,P=o.activeKey,j=P===void 0?GNr(A):P,D=Tn(o,["id","onSelect","animation","mountOnEnter","unmountOnExit","bsClass","className","style","children","activeKey"]);return db.default.createElement(UNr,{id:i,activeKey:j,onSelect:a,className:w,style:E},db.default.createElement("div",null,db.default.createElement($Je,vr({},D,{role:"tablist"}),qd.map(A,this.renderTab)),db.default.createElement(J8,{bsClass:y,animation:c,mountOnEnter:h,unmountOnExit:m},A)))},t}(db.default.Component);oF.propTypes=BNr;oF.defaultProps=VNr;go("tab",oF);var qae=nb(oF,{activeKey:"onSelect"});u();var AQe=ee(ko()),FP=ee(ke()),zl=ee(It()),OQe=ee(kie());var HNr={id:(0,OQe.default)(zl.default.oneOfType([zl.default.string,zl.default.number])),placement:zl.default.oneOf(["top","right","bottom","left"]),positionTop:zl.default.oneOfType([zl.default.number,zl.default.string]),positionLeft:zl.default.oneOfType([zl.default.number,zl.default.string]),arrowOffsetTop:zl.default.oneOfType([zl.default.number,zl.default.string]),arrowOffsetLeft:zl.default.oneOfType([zl.default.number,zl.default.string])},$Nr={placement:"right"},zae=function(e){hn(t,e);function t(){return e.apply(this,arguments)||this}var r=t.prototype;return r.render=function(){var o,i=this.props,a=i.placement,c=i.positionTop,h=i.positionLeft,m=i.arrowOffsetTop,y=i.arrowOffsetLeft,w=i.className,E=i.style,A=i.children,P=Tn(i,["placement","positionTop","positionLeft","arrowOffsetTop","arrowOffsetLeft","className","style","children"]),j=Ii(P),D=j[0],L=j[1],z=vr({},Yo(D),(o={},o[a]=!0,o)),B=vr({top:c,left:h},E),G={top:m,left:y};return FP.default.createElement("div",vr({},L,{role:"tooltip",className:(0,AQe.default)(w,z),style:B}),FP.default.createElement("div",{className:ri(D,"arrow"),style:G}),FP.default.createElement("div",{className:ri(D,"inner")},A))},t}(FP.default.Component);zae.propTypes=HNr;zae.defaultProps=$Nr;var Fae=go("tooltip",zae);var HP=ee(It(),1);u();var mi=ee(ke(),1);var Hae=ee(It(),1);u();u();var bo=e=>e!==void 0,PQe=(e,t,r)=>t in e?e[t]:e[t]=r,UP={ELEMENT:1,ATTRIBUTE:2,TEXT:3,CDATA_SECTION:4,ENTITY_REFERENCE:5,ENTITY:6,PROCESSING_INSTRUCTION:7,COMMENT:8,DOCUMENT:9,DOCUMENT_TYPE:10,DOCUMENT_FRAGMENT:11,NOTATION:12},Vae=class{constructor(t){this._parser=new t}toDocument(t){return this._parser.parseFromString(t,"application/xml")}getAllTextContent(t,r){return sF(t,r).join("")}};function sF(e,t){return DQe(e,t,[]).join("")}function DQe(e,t,r){if(e.nodeType===UP.CDATA_SECTION||e.nodeType===UP.TEXT)t?r.push(String(e.nodeValue).replace(/(\r\n|\r|\n)/g,"")):r.push(e.nodeValue);else{var n;for(n=e.firstChild;n;n=n.nextSibling)DQe(n,t,r)}return r}function WNr(e,t,r,n){for(var o=YNr(t);o;o=ZNr(o)){var i=o.namespaceURI||null,a=e[i];if(bo(a)){var c=a[o.localName];bo(c)&&c.call(n,o,r)}}}function YNr(e){let t=e.firstElementChild||e.firstChild;for(;t&&t.nodeType!==UP.ELEMENT;)t=t.nextSibling;return t}function ZNr(e){let t=e.nextElementSibling||e.nextSibling;for(;t&&t.nodeType!==UP.ELEMENT;)t=t.nextSibling;return t}function Fl(e,t,r){return KNr(e,t,r)}function KNr(e,t,r){var n=bo(r)?r:{},o,i;for(o=0,i=e.length;o<i;++o)n[e[o]]=t;return n}function NQe(e,t){return function(r,n){var o=e.call(bo(t)?t:this,r,n);if(bo(o)){var i=n[n.length-1];i.push(o)}}}function sl(e,t,r,n,o){return n.push(e),WNr(t,r,n,o),n.pop()}function Yr(e,t,r){return function(n,o){let i=e.call(bo(r)?r:this,n,o);if(bo(i)){var a=o[o.length-1],c=bo(t)?t:n.localName;a[c]=i}}}function Lc(e,t,r){return function(n,o){var i=e.call(bo(r)?r:this,n,o);if(bo(i)){var a=o[o.length-1],c=bo(t)?t:n.localName,h=PQe(a,c,[]);h.push(i)}}}var XNr=/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g;function JNr(e){return e.replace(XNr,"")}function hb(e){let t=/^\s*(true|1)|(false|0)\s*$/.exec(e);if(t)return bo(t[1])||!1}function cT(e){return Wg(sF(e,!1))}function Wg(e){let t=/^\s*([+\-]?\d*\.?\d+(?:e[+\-]?\d+)?)\s*$/i.exec(e);if(t)return parseFloat(t[1])}function Uae(e){return iF(sF(e,!1))}function iF(e){let t=/^\s*(\d+)\s*$/.exec(e);if(t)return parseInt(t[1],10)}function Zo(e){return JNr(sF(e,!1))}var QNr="http://www.w3.org/1999/xlink";function Gae(e){return e.getAttributeNS(QNr,"href")}function e4r(e,t){return sl({},M4r,e,t)}function LQe(e){return[Wg(e.getAttribute("minx")),Wg(e.getAttribute("miny")),Wg(e.getAttribute("maxx")),Wg(e.getAttribute("maxy"))]}function t4r(e,t){let r=LQe(e),n=[Wg(e.getAttribute("resx")),Wg(e.getAttribute("resy"))];return{crs:e.getAttribute("CRS")||e.getAttribute("SRS"),extent:r,res:n}}function r4r(e,t){let r=LQe(e);if(!(!bo(r[0])||!bo(r[1])||!bo(r[2])||!bo(r[3])))return r}function n4r(e,t){let r=parseFloat(e.getAttribute("min")),n=parseFloat(e.getAttribute("max"));return{min:r,max:n}}function o4r(e,t){let r=sl({},C4r,e,t);if(!bo(r))return;let n=r.westBoundLongitude,o=r.southBoundLatitude,i=r.eastBoundLongitude,a=r.northBoundLatitude;if(!(!bo(n)||!bo(o)||!bo(i)||!bo(a)))return[n,o,i,a]}function i4r(e,t){return sl({},x4r,e,t)}function a4r(e,t){return sl({},w4r,e,t)}function s4r(e,t){return sl({},E4r,e,t)}function l4r(e,t){return sl({},S4r,e,t)}function u4r(e,t){return sl({},T4r,e,t)}function c4r(e,t){return sl([],I4r,e,t)}function p4r(e,t){let r=hb(e.getAttribute("queryable"));return sl({queryable:bo(r)?r:!1},jQe,e,t)}function f4r(e,t){var r=t[t.length-1];let n=sl({},jQe,e,t);if(!bo(n))return;let o=hb(e.getAttribute("queryable"));bo(o)||(o=r.queryable),n.queryable=bo(o)?o:!1;let i=iF(e.getAttribute("cascaded"));bo(i)||(i=r.cascaded),n.cascaded=i;let a=hb(e.getAttribute("opaque"));bo(a)||(a=r.opaque),n.opaque=bo(a)?a:!1;let c=hb(e.getAttribute("noSubsets"));bo(c)||(c=r.noSubsets),n.noSubsets=bo(c)?c:!1;let h=Wg(e.getAttribute("fixedWidth"));bo(h)||(h=r.fixedWidth),n.fixedWidth=h;let m=Wg(e.getAttribute("fixedHeight"));bo(m)||(m=r.fixedHeight),n.fixedHeight=m;let y=["Style","CRS","AuthorityURL"];for(let E=0,A=y.length;E<A;E++){let P=y[E],j=r[P];if(bo(j)){let D=PQe(n,P,[]);D=D.concat(j),n[P]=D}}let w=["EX_GeographicBoundingBox","BoundingBox","Dimension","Attribution","MinScaleDenominator","MaxScaleDenominator"];for(let E=0,A=w.length;E<A;E++){let P=w[E],j=n[P];if(!bo(j)){let D=r[P];n[P]=D}}return n}function d4r(e,t){return{name:e.getAttribute("name"),units:e.getAttribute("units"),unitSymbol:e.getAttribute("unitSymbol"),default:e.getAttribute("default"),multipleValues:hb(e.getAttribute("multipleValues")),nearestValue:hb(e.getAttribute("nearestValue")),current:hb(e.getAttribute("current")),values:Zo(e)}}function Yg(e,t){return sl({},L4r,e,t)}function h4r(e,t){return sl({},A4r,e,t)}function m4r(e,t){return sl({},P4r,e,t)}function g4r(e,t){return sl({},D4r,e,t)}function Bae(e,t){return sl({},O4r,e,t)}function kQe(e,t){var r=Yg(e,t);if(bo(r)){let n=[iF(e.getAttribute("width")),iF(e.getAttribute("height"))];return r.size=n,r}}function v4r(e,t){var r=Yg(e,t);if(bo(r))return r.name=e.getAttribute("name"),r}function y4r(e,t){var r=Yg(e,t);if(bo(r))return r.type=e.getAttribute("type"),r}function _4r(e,t){return sl({},N4r,e,t)}function RQe(e,t){return sl([],k4r,e,t)}var Ul=[null,"http://www.opengis.net/wms"],b4r=Fl(Ul,{Service:Yr(a4r),Capability:Yr(i4r)}),x4r=Fl(Ul,{Request:Yr(h4r),Exception:Yr(c4r),Layer:Yr(p4r)}),w4r=Fl(Ul,{Name:Yr(Zo),Title:Yr(Zo),Abstract:Yr(Zo),KeywordList:Yr(RQe),OnlineResource:Yr(Gae),ContactInformation:Yr(s4r),Fees:Yr(Zo),AccessConstraints:Yr(Zo),LayerLimit:Yr(Uae),MaxWidth:Yr(Uae),MaxHeight:Yr(Uae)}),E4r=Fl(Ul,{ContactPersonPrimary:Yr(l4r),ContactPosition:Yr(Zo),ContactAddress:Yr(u4r),ContactVoiceTelephone:Yr(Zo),ContactFacsimileTelephone:Yr(Zo),ContactElectronicMailAddress:Yr(Zo)}),S4r=Fl(Ul,{ContactPerson:Yr(Zo),ContactOrganization:Yr(Zo)}),T4r=Fl(Ul,{AddressType:Yr(Zo),Address:Yr(Zo),City:Yr(Zo),StateOrProvince:Yr(Zo),PostCode:Yr(Zo),Country:Yr(Zo)}),I4r=Fl(Ul,{Format:NQe(Zo)}),jQe=Fl(Ul,{Name:Yr(Zo),Title:Yr(Zo),Abstract:Yr(Zo),KeywordList:Yr(RQe),CRS:Lc(Zo),SRS:Lc(Zo),EX_GeographicBoundingBox:Yr(o4r),LatLonBoundingBox:Yr(r4r),BoundingBox:Lc(t4r),Dimension:Lc(d4r),Attribution:Yr(e4r),AuthorityURL:Lc(v4r),Identifier:Lc(Zo),MetadataURL:Lc(y4r),DataURL:Lc(Yg),FeatureListURL:Lc(Yg),Style:Lc(_4r),MinScaleDenominator:Yr(cT),MaxScaleDenominator:Yr(cT),ScaleHint:Yr(n4r),Layer:Lc(f4r)}),M4r=Fl(Ul,{Title:Yr(Zo),OnlineResource:Yr(Gae),LogoURL:Yr(kQe)}),C4r=Fl(Ul,{westBoundLongitude:Yr(cT),eastBoundLongitude:Yr(cT),southBoundLatitude:Yr(cT),northBoundLatitude:Yr(cT)}),A4r=Fl(Ul,{GetCapabilities:Yr(Bae),GetMap:Yr(Bae),GetFeatureInfo:Yr(Bae)}),O4r=Fl(Ul,{Format:Lc(Zo),DCPType:Lc(m4r)}),P4r=Fl(Ul,{HTTP:Yr(g4r)}),D4r=Fl(Ul,{Get:Yr(Yg),Post:Yr(Yg)}),N4r=Fl(Ul,{Name:Yr(Zo),Title:Yr(Zo),Abstract:Yr(Zo),LegendURL:Lc(kQe),StyleSheetURL:Yr(Yg),StyleURL:Yr(Yg)}),L4r=Fl(Ul,{Format:Yr(Zo),OnlineResource:Yr(Gae)}),k4r=Fl(Ul,{Keyword:NQe(Zo)}),aF=class{constructor(t,r){!r&&typeof window!="undefined"&&(r=window.DOMParser),this.version=void 0,this._parser=new Vae(r),this._data=t}data(t){return this._data=t,this}toJSON(t){return t=t||this._data,this.parse(t)}parse(t){return this.readFromDocument(this._parser.toDocument(t))}readFromDocument(t){for(let r=t.firstChild;r;r=r.nextSibling)if(r.nodeType==UP.ELEMENT)return this.readFromNode(r);return null}readFromNode(t){return this.version=t.getAttribute("version"),sl({version:this.version},b4r,t,[])||null}};var lF="wms-base-map-layer",BP="wms-base-map-source",VP="xyz-base-map-layer",uF="xyz-base-map-source";function qQe(e,t){return t.Capability.Layer.Layer.filter(r=>r.CRS.includes("EPSG:3857")).map(r=>{let o=r.Name;return{id:r.Title,label:r.Title,urls:[`${e}?bbox={bbox-epsg-3857}&format=image/png&service=WMS&version=1.1.0&request=GetMap&srs=EPSG:3857&transparent=true&width=512&height=512&layers=${o}`],type:"wms",layers:o,tileSize:512}})}function cF(e){return yt(this,null,function*(){let t=yield Za.get(e);if(t.status===200){let r=new aF().parse(t.data);return console.log("parse",qQe(e.split("?")[0],r)),qQe(e.split("?")[0],r)}else throw new Error(`Could not fetch wms capabilities document at ${e}`)})}var zQe=(e,t,r)=>{if(!t)return!1;if(BQe(e,r),!e.getSource(BP)){let n={type:"raster",tiles:[`${t.urls[0]}?bbox={bbox-epsg-3857}&format=image/png&service=WMS&version=2.0.0&request=GetMap&CRS=EPSG:3857&transparent=true&width=512&height=512&layers=${t.layers}&STYLES=`]};t.attribution&&(n.attribution=t.attribution),e.addSource(BP,n);let o=e.getStyle().layers[0].id;e.addLayer({id:lF,type:"raster",source:BP,paint:{}},o)}},FQe=e=>{for(let{id:t}of e.getStyle().layers)(t===lF||t===VP)&&e.setLayoutProperty(t,"visibility","visible")},GP=e=>{FQe(e),e.getLayer(lF)&&e.removeLayer(lF),e.getSource(BP)&&e.removeSource(BP)},UQe=(e,t)=>{t.forEach(r=>{e.setLayoutProperty(r.id,"visibility","visible")})},BQe=(e,t)=>{t.forEach(r=>{e.setLayoutProperty(r.id,"visibility","none")})},VQe=(e,t,r)=>{if(!t)return!1;if(BQe(e,r),GP(e),!e.getSource(VP)){e.addSource(uF,{type:"raster",tiles:[t.urls[0]],attribution:t.attribution});let n=e.getStyle().layers[0].id;e.addLayer({id:VP,type:"raster",source:uF,paint:{}},n)}},GQe=e=>{FQe(e),e.getLayer(VP)&&e.removeLayer(VP),e.getSource(uF)&&e.removeSource(uF)};var HQe=e=>{let{onClose:t,onSubmit:r}=e,[n,o]=(0,mi.useState)(""),[i,a]=(0,mi.useState)(!1),[c,h]=(0,mi.useState)([]),[m,y]=(0,mi.useState)(null),w=Lr(ks),E=(0,mi.useRef)(),A=(0,mi.useRef)(),P=Z=>{h([]),y(null),w({id:"dialog-add-wms",type:"danger",text:Z})},j=()=>{t()},D=()=>{r(m),j()},L=()=>yt(null,null,function*(){if(!_p(n)){a(!0);return}try{let Z=yield cF(n);Z.length!==0&&(h(Z),y(Z[0]))}catch(Z){P(fe("dialog.add-wms.error.invalid-url"))}}),z=Z=>{o(Z.target.value)},B=Z=>{Z.code==="Enter"&&L()},G=Z=>{let K=c.find(te=>te.id===Z.target.value);y(K)};return mi.default.createElement("div",null,mi.default.createElement(Gg,{className:"vkf-dialog-addwms",show:!0,onHide:j},mi.default.createElement(Gg.Header,null,mi.default.createElement(Gg.Title,null,fe("control-basemapselector-addwms-title"))),mi.default.createElement(Gg.Body,null,mi.default.createElement("div",{className:"dialog-content"},mi.default.createElement("div",{className:qt("form-group","set-url",i?"has-warning":"")},mi.default.createElement("label",{htmlFor:E.current},fe("control-basemapselector-addwms-input-label")),mi.default.createElement("div",{className:"form-group-capabilities"},mi.default.createElement("input",{type:"url",className:"form-control",ref:E,placeholder:"https://meinwms.de?Request=GetCapabilities&Service=WMS&Version=1.3.0",value:n,onChange:z,onKeyDown:B}),mi.default.createElement("button",{type:"submit",className:"btn",onClick:L},fe("control-basemapselector-addwms-btn-load-capabilities"))),mi.default.createElement("p",{className:"help-block"},fe("control-basemapselector-addwms-input-description"))),c.length>0&&m!==null&&mi.default.createElement("div",{className:qt("form-group","set-layer")},mi.default.createElement("label",{htmlFor:A.current},fe("control-basemapselector-addwms-select-label")),mi.default.createElement("select",{ref:A,value:m.id,onChange:G,className:"form-control"},c.map(Z=>mi.default.createElement("option",{key:Z.id,value:Z.id},Z.label))),mi.default.createElement("p",{className:"help-block"},fe("control-basemapselector-addwms-select-description"))))),mi.default.createElement(Gg.Footer,null,mi.default.createElement(jz,{onClick:j},fe("control-basemapselector-addwms-btn-canel")),mi.default.createElement(jz,{onClick:D,bsStyle:"primary",className:qt(m===null?"disabled":"")},fe("control-basemapselector-addwms-btn-submit")))))};HQe.propTypes={onClose:Hae.default.func.isRequired,onSubmit:Hae.default.func.isRequired};var $Qe=HQe;var mb="vkf-custom-basemaps",WQe=e=>{let{map:t}=e,[r,n]=Io(xf),[o,i]=jd(mb,[]),a=mr.getBaseMaps(),c=Lr(ks),[h,m]=(0,du.useState)(!1),y=P=>{n(P.id)},w=()=>{m(!0)},E=P=>{P.type==="wms"&&GP(t,P),r===P.id&&n(a[0].id),i(j=>j.filter(D=>D.id!==P.id))},A=P=>{if([...a,...o].find(D=>D.id===P.id||D.label===P.label))c({id:"basemapSelector",type:"danger",text:fe("control-basemapselector-error-initializiation")});else{let D=Dt(Te({},P),{allowDeletion:!0});i(L=>[...L,D])}};return du.default.createElement(du.default.Fragment,null,r!==void 0&&du.default.createElement(du.default.Fragment,null,du.default.createElement("h2",null,fe("control-basemapselector-label"),":"),du.default.createElement("ul",{className:"wms-entries"},[...a,...o].map(P=>du.default.createElement("li",{key:P.id,className:"basemap-selector-entry"},du.default.createElement(Nae,{onChange:()=>y(P),name:P.id,value:P.id,checked:r===P.id},P.label),P.allowDeletion&&du.default.createElement("button",{className:"delete-basemap-button",onClick:j=>{j.preventDefault(),j.stopPropagation(),E(P)},title:"Remove basemap"},du.default.createElement(Bg,{glyph:"remove"}))))),du.default.createElement("div",{className:"controls-container"},du.default.createElement("button",{className:"add-wms-button",onClick:w},fe("control-basemapselector-btn-addwms")))),h&&du.default.createElement($Qe,{onClose:()=>m(!1),onSubmit:A}))};WQe.propTypes={map:HP.default.object,onBasemapChange:HP.default.func,onSetNotification:HP.default.func,activeBasemapId:HP.default.string};var YQe=WQe;u();u();u();u();var Fd={RADIANS:"radians",DEGREES:"degrees",FEET:"ft",METERS:"m",PIXELS:"pixels",TILE_PIXELS:"tile-pixels",USFEET:"us-ft"},Jto={9001:Fd.METERS,9002:Fd.FEET,9003:Fd.USFEET,9101:Fd.RADIANS,9102:Fd.DEGREES};var kc={};kc[Fd.RADIANS]=6370997/(2*Math.PI);kc[Fd.DEGREES]=2*Math.PI*6370997/360;kc[Fd.FEET]=.3048;kc[Fd.METERS]=1;kc[Fd.USFEET]=1200/3937;var Rc=Fd;var R4r=function(){function e(t){this.code_=t.code,this.units_=t.units,this.extent_=t.extent!==void 0?t.extent:null,this.worldExtent_=t.worldExtent!==void 0?t.worldExtent:null,this.axisOrientation_=t.axisOrientation!==void 0?t.axisOrientation:"enu",this.global_=t.global!==void 0?t.global:!1,this.canWrapX_=!!(this.global_&&this.extent_),this.getPointResolutionFunc_=t.getPointResolution,this.defaultTileGrid_=null,this.metersPerUnit_=t.metersPerUnit}return e.prototype.canWrapX=function(){return this.canWrapX_},e.prototype.getCode=function(){return this.code_},e.prototype.getExtent=function(){return this.extent_},e.prototype.getUnits=function(){return this.units_},e.prototype.getMetersPerUnit=function(){return this.metersPerUnit_||kc[this.units_]},e.prototype.getWorldExtent=function(){return this.worldExtent_},e.prototype.getAxisOrientation=function(){return this.axisOrientation_},e.prototype.isGlobal=function(){return this.global_},e.prototype.setGlobal=function(t){this.global_=t,this.canWrapX_=!!(t&&this.extent_)},e.prototype.getDefaultTileGrid=function(){return this.defaultTileGrid_},e.prototype.setDefaultTileGrid=function(t){this.defaultTileGrid_=t},e.prototype.setExtent=function(t){this.extent_=t,this.canWrapX_=!!(this.global_&&t)},e.prototype.setWorldExtent=function(t){this.worldExtent_=t},e.prototype.setGetPointResolution=function(t){this.getPointResolutionFunc_=t},e.prototype.getPointResolutionFunc=function(){return this.getPointResolutionFunc_},e}(),pF=R4r;u();u();function Li(e,t,r){return Math.min(Math.max(e,t),r)}var ZQe=function(){var e;return"cosh"in Math?e=Math.cosh:e=function(t){var r=Math.exp(t);return(r+1/r)/2},e}(),fF=function(){var e;return"log2"in Math?e=Math.log2:e=function(t){return Math.log(t)*Math.LOG2E},e}();function KQe(e,t,r,n,o,i){var a=o-r,c=i-n;if(a!==0||c!==0){var h=((e-r)*a+(t-n)*c)/(a*a+c*c);h>1?(r=o,n=i):h>0&&(r+=a*h,n+=c*h)}return Zg(e,t,r,n)}function Zg(e,t,r,n){var o=r-e,i=n-t;return o*o+i*i}function XQe(e){for(var t=e.length,r=0;r<t;r++){for(var n=r,o=Math.abs(e[r][r]),i=r+1;i<t;i++){var a=Math.abs(e[i][r]);a>o&&(o=a,n=i)}if(o===0)return null;var c=e[n];e[n]=e[r],e[r]=c;for(var h=r+1;h<t;h++)for(var m=-e[h][r]/e[r][r],y=r;y<t+1;y++)r==y?e[h][y]=0:e[h][y]+=m*e[r][y]}for(var w=new Array(t),E=t-1;E>=0;E--){w[E]=e[E][t]/e[E][E];for(var A=E-1;A>=0;A--)e[A][t]-=e[A][E]*w[E]}return w}function pT(e){return e*Math.PI/180}function Ud(e,t){var r=e%t;return r*t<0?r+t:r}function JQe(e,t,r){return e+r*(t-e)}function QQe(e,t){var r=Math.pow(10,t);return Math.round(e*r)/r}function $P(e,t){return Math.floor(QQe(e,t))}function WP(e,t){return Math.ceil(QQe(e,t))}var j4r=function(){var e=function(t,r){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,o){n.__proto__=o}||function(n,o){for(var i in o)Object.prototype.hasOwnProperty.call(o,i)&&(n[i]=o[i])},e(t,r)};return function(t,r){if(typeof r!="function"&&r!==null)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");e(t,r);function n(){this.constructor=t}t.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),YP=6378137,dT=Math.PI*YP,q4r=[-dT,-dT,dT,dT],z4r=[-180,-85,180,85],dF=YP*Math.log(Math.tan(Math.PI/2)),fT=function(e){j4r(t,e);function t(r){return e.call(this,{code:r,units:Rc.METERS,extent:q4r,global:!0,worldExtent:z4r,getPointResolution:function(n,o){return n/ZQe(o[1]/YP)}})||this}return t}(pF),$ae=[new fT("EPSG:3857"),new fT("EPSG:102100"),new fT("EPSG:102113"),new fT("EPSG:900913"),new fT("http://www.opengis.net/def/crs/EPSG/0/3857"),new fT("http://www.opengis.net/gml/srs/epsg.xml#3857")];function eet(e,t,r){var n=e.length,o=r>1?r:2,i=t;i===void 0&&(o>2?i=e.slice():i=new Array(n));for(var a=0;a<n;a+=o){i[a]=dT*e[a]/180;var c=YP*Math.log(Math.tan(Math.PI*(+e[a+1]+90)/360));c>dF?c=dF:c<-dF&&(c=-dF),i[a+1]=c}return i}function tet(e,t,r){var n=e.length,o=r>1?r:2,i=t;i===void 0&&(o>2?i=e.slice():i=new Array(n));for(var a=0;a<n;a+=o)i[a]=180*e[a]/dT,i[a+1]=360*Math.atan(Math.exp(e[a+1]/YP))/Math.PI-90;return i}u();var F4r=function(){var e=function(t,r){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,o){n.__proto__=o}||function(n,o){for(var i in o)Object.prototype.hasOwnProperty.call(o,i)&&(n[i]=o[i])},e(t,r)};return function(t,r){if(typeof r!="function"&&r!==null)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");e(t,r);function n(){this.constructor=t}t.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),U4r=6378137,ret=[-180,-90,180,90],B4r=Math.PI*U4r/180,gb=function(e){F4r(t,e);function t(r,n){return e.call(this,{code:r,units:Rc.DEGREES,extent:ret,axisOrientation:n,global:!0,metersPerUnit:B4r,worldExtent:ret})||this}return t}(pF),Wae=[new gb("CRS:84"),new gb("EPSG:4326","neu"),new gb("urn:ogc:def:crs:OGC:1.3:CRS84"),new gb("urn:ogc:def:crs:OGC:2:84"),new gb("http://www.opengis.net/def/crs/OGC/1.3/CRS84"),new gb("http://www.opengis.net/gml/srs/epsg.xml#4326","neu"),new gb("http://www.opengis.net/def/crs/EPSG/0/4326","neu")];u();var Yae={};function net(e){return Yae[e]||Yae[e.replace(/urn:(x-)?ogc:def:crs:EPSG:(.*:)?(\w+)$/,"EPSG:$3")]||null}function oet(e,t){Yae[e]=t}u();u();var Mi=typeof Object.assign=="function"?Object.assign:function(e,t){if(e==null)throw new TypeError("Cannot convert undefined or null to object");for(var r=Object(e),n=1,o=arguments.length;n<o;++n){var i=arguments[n];if(i!=null)for(var a in i)i.hasOwnProperty(a)&&(r[a]=i[a])}return r};function If(e){for(var t in e)delete e[t]}var iet=typeof Object.values=="function"?Object.values:function(e){var t=[];for(var r in e)t.push(e[r]);return t};function aet(e){var t;for(t in e)return!1;return!t}var hT={};function ZP(e,t,r){var n=e.getCode(),o=t.getCode();n in hT||(hT[n]={}),hT[n][o]=r}function set(e,t){var r;return e in hT&&t in hT[e]&&(r=hT[e][t]),r}u();u();var ll={UNKNOWN:0,INTERSECTING:1,ABOVE:2,RIGHT:4,BELOW:8,LEFT:16};u();u();u();function Ao(){return function(){throw new Error("Unimplemented abstract method.")}()}var V4r=0;function Qa(e){return e.ol_uid||(e.ol_uid=String(++V4r))}var hF="6.15.1";var G4r=function(){var e=function(t,r){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,o){n.__proto__=o}||function(n,o){for(var i in o)Object.prototype.hasOwnProperty.call(o,i)&&(n[i]=o[i])},e(t,r)};return function(t,r){if(typeof r!="function"&&r!==null)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");e(t,r);function n(){this.constructor=t}t.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),H4r=function(e){G4r(t,e);function t(r){var n=this,o=hF==="latest"?hF:"v"+hF.split("-")[0],i="Assertion failed. See https://openlayers.org/en/"+o+"/doc/errors/#"+r+" for details.";return n=e.call(this,i)||this,n.code=r,n.name="AssertionError",n.message=i,n}return t}(Error),mF=H4r;function zn(e,t){if(!e)throw new mF(t)}function KP(e){for(var t=rm(),r=0,n=e.length;r<n;++r)XP(t,e[r]);return t}function $4r(e,t,r){var n=Math.min.apply(null,e),o=Math.min.apply(null,t),i=Math.max.apply(null,e),a=Math.max.apply(null,t);return Xg(n,o,i,a,r)}function cet(e,t){return t?(t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t):e.slice()}function gF(e,t,r){var n,o;return t<e[0]?n=e[0]-t:e[2]<t?n=t-e[2]:n=0,r<e[1]?o=e[1]-r:e[3]<r?o=r-e[3]:o=0,n*n+o*o}function Kg(e,t){return Zae(e,t[0],t[1])}function pet(e,t){return e[0]<=t[0]&&t[2]<=e[2]&&e[1]<=t[1]&&t[3]<=e[3]}function Zae(e,t,r){return e[0]<=t&&t<=e[2]&&e[1]<=r&&r<=e[3]}function uet(e,t){var r=e[0],n=e[1],o=e[2],i=e[3],a=t[0],c=t[1],h=ll.UNKNOWN;return a<r?h=h|ll.LEFT:a>o&&(h=h|ll.RIGHT),c<n?h=h|ll.BELOW:c>i&&(h=h|ll.ABOVE),h===ll.UNKNOWN&&(h=ll.INTERSECTING),h}function rm(){return[1/0,1/0,-1/0,-1/0]}function Xg(e,t,r,n,o){return o?(o[0]=e,o[1]=t,o[2]=r,o[3]=n,o):[e,t,r,n]}function mT(e){return Xg(1/0,1/0,-1/0,-1/0,e)}function fet(e,t){var r=e[0],n=e[1];return Xg(r,n,r,n,t)}function det(e,t,r,n,o){var i=mT(o);return Xae(i,e,t,r,n)}function Kae(e,t){return e[0]==t[0]&&e[2]==t[2]&&e[1]==t[1]&&e[3]==t[3]}function het(e,t){return t[0]<e[0]&&(e[0]=t[0]),t[2]>e[2]&&(e[2]=t[2]),t[1]<e[1]&&(e[1]=t[1]),t[3]>e[3]&&(e[3]=t[3]),e}function XP(e,t){t[0]<e[0]&&(e[0]=t[0]),t[0]>e[2]&&(e[2]=t[0]),t[1]<e[1]&&(e[1]=t[1]),t[1]>e[3]&&(e[3]=t[1])}function Xae(e,t,r,n,o){for(;r<n;r+=o)W4r(e,t[r],t[r+1]);return e}function W4r(e,t,r){e[0]=Math.min(e[0],t),e[1]=Math.min(e[1],r),e[2]=Math.max(e[2],t),e[3]=Math.max(e[3],r)}function vF(e,t){var r;return r=t(yF(e)),r||(r=t(_F(e)),r)||(r=t(bF(e)),r)||(r=t(S0(e)),r)?r:!1}function JP(e){var t=0;return vb(e)||(t=oa(e)*Bl(e)),t}function yF(e){return[e[0],e[1]]}function _F(e){return[e[2],e[1]]}function Bd(e){return[(e[0]+e[2])/2,(e[1]+e[3])/2]}function met(e,t){var r;return t==="bottom-left"?r=yF(e):t==="bottom-right"?r=_F(e):t==="top-left"?r=S0(e):t==="top-right"?r=bF(e):zn(!1,13),r}function QP(e,t,r,n,o){var i=Y4r(e,t,r,n),a=i[0],c=i[1],h=i[2],m=i[3],y=i[4],w=i[5],E=i[6],A=i[7];return Xg(Math.min(a,h,y,E),Math.min(c,m,w,A),Math.max(a,h,y,E),Math.max(c,m,w,A),o)}function Y4r(e,t,r,n){var o=t*n[0]/2,i=t*n[1]/2,a=Math.cos(r),c=Math.sin(r),h=o*a,m=o*c,y=i*a,w=i*c,E=e[0],A=e[1];return[E-h+w,A-m-y,E-h-w,A-m+y,E+h-w,A+m+y,E+h+w,A+m-y,E-h+w,A-m-y]}function Bl(e){return e[3]-e[1]}function nm(e,t,r){var n=r||rm();return eD(e,t)?(e[0]>t[0]?n[0]=e[0]:n[0]=t[0],e[1]>t[1]?n[1]=e[1]:n[1]=t[1],e[2]<t[2]?n[2]=e[2]:n[2]=t[2],e[3]<t[3]?n[3]=e[3]:n[3]=t[3]):mT(n),n}function S0(e){return[e[0],e[3]]}function bF(e){return[e[2],e[3]]}function oa(e){return e[2]-e[0]}function eD(e,t){return e[0]<=t[2]&&e[2]>=t[0]&&e[1]<=t[3]&&e[3]>=t[1]}function vb(e){return e[2]<e[0]||e[3]<e[1]}function get(e,t){return t?(t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t):e}function vet(e,t,r){var n=!1,o=uet(e,t),i=uet(e,r);if(o===ll.INTERSECTING||i===ll.INTERSECTING)n=!0;else{var a=e[0],c=e[1],h=e[2],m=e[3],y=t[0],w=t[1],E=r[0],A=r[1],P=(A-w)/(E-y),j=void 0,D=void 0;i&ll.ABOVE&&!(o&ll.ABOVE)&&(j=E-(A-m)/P,n=j>=a&&j<=h),!n&&i&ll.RIGHT&&!(o&ll.RIGHT)&&(D=A-(E-h)*P,n=D>=c&&D<=m),!n&&i&ll.BELOW&&!(o&ll.BELOW)&&(j=E-(A-c)/P,n=j>=a&&j<=h),!n&&i&ll.LEFT&&!(o&ll.LEFT)&&(D=A-(E-a)*P,n=D>=c&&D<=m)}return n}function yet(e,t,r,n){var o=[];if(n>1)for(var i=e[2]-e[0],a=e[3]-e[1],c=0;c<n;++c)o.push(e[0]+i*c/n,e[1],e[2],e[1]+a*c/n,e[2]-i*c/n,e[3],e[0],e[3]-a*c/n);else o=[e[0],e[1],e[2],e[1],e[2],e[3],e[0],e[3]];t(o,o,2);for(var h=[],m=[],c=0,y=o.length;c<y;c+=2)h.push(o[c]),m.push(o[c+1]);return $4r(h,m,r)}u();function _et(e,t){return e[0]+=+t[0],e[1]+=+t[1],e}function yb(e,t){for(var r=!0,n=e.length-1;n>=0;--n)if(e[n]!=t[n]){r=!1;break}return r}function gT(e,t){var r=Math.cos(t),n=Math.sin(t),o=e[0]*r-e[1]*n,i=e[1]*r+e[0]*n;return e[0]=o,e[1]=i,e}function bet(e,t){return e[0]*=t,e[1]*=t,e}function xet(e,t){if(t.canWrapX()){var r=oa(t.getExtent()),n=wet(e,t,r);n&&(e[0]-=n*r)}return e}function wet(e,t,r){var n=t.getExtent(),o=0;if(t.canWrapX()&&(e[0]<n[0]||e[0]>n[2])){var i=r||oa(n);o=Math.floor((e[0]-n[0])/i)}return o}u();var Z4r=6371008.8;function Jae(e,t,r){var n=r||Z4r,o=pT(e[1]),i=pT(t[1]),a=(i-o)/2,c=pT(t[0]-e[0])/2,h=Math.sin(a)*Math.sin(a)+Math.sin(c)*Math.sin(c)*Math.cos(o)*Math.cos(i);return 2*n*Math.atan2(Math.sqrt(h),Math.sqrt(1-h))}var Qae=!0;function Tet(e){var t=e===void 0?!0:e;Qae=!t}function ese(e,t,r){var n;if(t!==void 0){for(var o=0,i=e.length;o<i;++o)t[o]=e[o];n=t}else n=e.slice();return n}function Iet(e,t,r){if(t!==void 0&&e!==t){for(var n=0,o=e.length;n<o;++n)t[n]=e[n];e=t}return e}function K4r(e){oet(e.getCode(),e),ZP(e,e,ese)}function X4r(e){e.forEach(K4r)}function jc(e){return typeof e=="string"?net(e):e||null}function tse(e,t,r,n){e=jc(e);var o,i=e.getPointResolutionFunc();if(i){if(o=i(t,r),n&&n!==e.getUnits()){var a=e.getMetersPerUnit();a&&(o=o*a/kc[n])}}else{var c=e.getUnits();if(c==Rc.DEGREES&&!n||n==Rc.DEGREES)o=t;else{var h=rse(e,jc("EPSG:4326"));if(h===Iet&&c!==Rc.DEGREES)o=t*e.getMetersPerUnit();else{var m=[r[0]-t/2,r[1],r[0]+t/2,r[1],r[0],r[1]-t/2,r[0],r[1]+t/2];m=h(m,m,2);var y=Jae(m.slice(0,2),m.slice(2,4)),w=Jae(m.slice(4,6),m.slice(6,8));o=(y+w)/2}var a=n?kc[n]:e.getMetersPerUnit();a!==void 0&&(o/=a)}}return o}function Eet(e){X4r(e),e.forEach(function(t){e.forEach(function(r){t!==r&&ZP(t,r,ese)})})}function J4r(e,t,r,n){e.forEach(function(o){t.forEach(function(i){ZP(o,i,r),ZP(i,o,n)})})}function xF(e,t){return e?typeof e=="string"?jc(e):e:jc(t)}function Met(e,t){var r=tD(e,t!==void 0?t:"EPSG:3857","EPSG:4326"),n=r[0];return(n<-180||n>180)&&(r[0]=Ud(n+180,360)-180),r}function T0(e,t){if(e===t)return!0;var r=e.getUnits()===t.getUnits();if(e.getCode()===t.getCode())return r;var n=rse(e,t);return n===ese&&r}function rse(e,t){var r=e.getCode(),n=t.getCode(),o=set(r,n);return o||(o=Iet),o}function _b(e,t){var r=jc(e),n=jc(t);return rse(r,n)}function tD(e,t,r){var n=_b(t,r);return n(e,void 0,e.length)}function Cet(e,t,r,n){var o=_b(t,r);return yet(e,o,void 0,n)}var Jg=null;function Aet(){return Jg}function rD(e,t){return Jg?tD(e,t,Jg):e}function Vd(e,t){return Jg?tD(e,Jg,t):(Qae&&!yb(e,[0,0])&&e[0]>=-180&&e[0]<=180&&e[1]>=-90&&e[1]<=90&&(Qae=!1,console.warn("Call useGeographic() from ol/proj once to work with [longitude, latitude] coordinates.")),e)}function Oet(e,t){return Jg?Cet(e,t,Jg):e}function I0(e,t){return Jg?Cet(e,Jg,t):e}function Q4r(){Eet($ae),Eet(Wae),J4r(Wae,$ae,eet,tet)}Q4r();u();var ws=ee(ke(),1);u();u();var yT=ee(ke(),1),nse=ee(It(),1);u();var bb=ee(ke(),1),vT=ee(It(),1),Pet=({checked:e,georeferenceMode:t,id:r,onClick:n,title:o})=>r!=="ToGeoref"||r==="toGeoref"&&t?bb.default.createElement("li",null,bb.default.createElement("label",{htmlFor:r},bb.default.createElement("input",{checked:e,className:"facet-search-el",onChange:()=>{n(r)},id:r,title:o,type:"checkbox"}),bb.default.createElement("span",{dangerouslySetInnerHTML:{__html:o}}))):bb.default.createElement(bb.default.Fragment,null);Pet.propTypes={checked:vT.default.bool,georeferenceMode:vT.default.bool,id:vT.default.string,onClick:vT.default.func,title:vT.default.string};var Det=Pet;var ose={AE:"map_type-ae",AK:"map_type-ak",CM:"map_type-cm",GL:"map_type-gl",MB:"map_type-mb",MTB:"map_type-mtb",TK:"map_type-tk",TKX:"map_type-tkx",MM:"type-mosaic",VM:"type-vector"},e5r=(e,t)=>e.title>t.title?1:e.title<t.title?-1:0,t5r=()=>{let e=Object.keys(ose).map(t=>({key:t,title:fe(`facet-${t.toLowerCase()}`)}));return e.sort(e5r),e},r5r={};Object.keys(ose).forEach(e=>{r5r[e]=!1});var Net=({georeferenceMode:e,mosaicMode:t})=>{let[r,n]=Io(wf),o=(0,yT.useMemo)(()=>{let c=Te({},ose);return t&&(delete c.MM,delete c.VM),c},[t]),i=(0,yT.useMemo)(()=>t5r(),[]),a=c=>{n(h=>{let{facets:m,georeference:y}=h;if(c==="ToGeoref")return{facets:m,georeference:!y};{let w=m.slice(),E=w.findIndex(A=>A.id===c);if(E>-1)w.splice(E,1);else{let[A,P]=o[c].split("-");w.push({key:A,value:P,id:c})}return{facets:w,georeference:y}}})};return yT.default.createElement("ul",{className:"search-facet"},i.map(({key:c,title:h})=>yT.default.createElement(Det,{checked:r.facets.findIndex(m=>m.id===c)!==-1,key:c,georeferenceMode:e,onClick:a,id:c,title:h})))};Net.propTypes={georeferenceMode:nse.default.bool,mosaicMode:nse.default.bool};var Let=Net;var wF=Let;u();var Wd=ee(ke(),1);var Dse=ee(It(),1);u();var xs=ee(ke(),1),qc=ee(It(),1);u();u();function Fn(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}u();var ket=Number.isNaN||function(t){return typeof t=="number"&&t!==t};function n5r(e,t){return!!(e===t||ket(e)&&ket(t))}function o5r(e,t){if(e.length!==t.length)return!1;for(var r=0;r<e.length;r++)if(!n5r(e[r],t[r]))return!1;return!0}function i5r(e,t){t===void 0&&(t=o5r);var r,n=[],o,i=!1;function a(){for(var c=[],h=0;h<arguments.length;h++)c[h]=arguments[h];return i&&r===this&&t(c,n)||(o=e.apply(this,c),i=!0,r=this,n=c),o}return a}var EF=i5r;var bT=ee(ke());var a5r=typeof performance=="object"&&typeof performance.now=="function",Ret=a5r?function(){return performance.now()}:function(){return Date.now()};function jet(e){cancelAnimationFrame(e.id)}function s5r(e,t){var r=Ret();function n(){Ret()-r>=t?e.call(null):o.id=requestAnimationFrame(n)}var o={id:requestAnimationFrame(n)};return o}var ise=-1;function qet(e){if(e===void 0&&(e=!1),ise===-1||e){var t=document.createElement("div"),r=t.style;r.width="50px",r.height="50px",r.overflow="scroll",document.body.appendChild(t),ise=t.offsetWidth-t.clientWidth,document.body.removeChild(t)}return ise}var _T=null;function zet(e){if(e===void 0&&(e=!1),_T===null||e){var t=document.createElement("div"),r=t.style;r.width="50px",r.height="50px",r.overflow="scroll",r.direction="rtl";var n=document.createElement("div"),o=n.style;return o.width="100px",o.height="100px",t.appendChild(n),document.body.appendChild(t),t.scrollLeft>0?_T="positive-descending":(t.scrollLeft=1,t.scrollLeft===0?_T="negative":_T="positive-ascending"),document.body.removeChild(t),_T}return _T}var l5r=150,u5r=function(t,r){return t};function c5r(e){var t,r=e.getItemOffset,n=e.getEstimatedTotalSize,o=e.getItemSize,i=e.getOffsetForIndexAndAlignment,a=e.getStartIndexForOffset,c=e.getStopIndexForStartIndex,h=e.initInstanceProps,m=e.shouldResetStyleCacheOnItemSizeChange,y=e.validateProps;return t=function(w){_z(E,w);function E(P){var j;return j=w.call(this,P)||this,j._instanceProps=h(j.props,Fn(j)),j._outerRef=void 0,j._resetIsScrollingTimeoutId=null,j.state={instance:Fn(j),isScrolling:!1,scrollDirection:"forward",scrollOffset:typeof j.props.initialScrollOffset=="number"?j.props.initialScrollOffset:0,scrollUpdateWasRequested:!1},j._callOnItemsRendered=void 0,j._callOnItemsRendered=EF(function(D,L,z,B){return j.props.onItemsRendered({overscanStartIndex:D,overscanStopIndex:L,visibleStartIndex:z,visibleStopIndex:B})}),j._callOnScroll=void 0,j._callOnScroll=EF(function(D,L,z){return j.props.onScroll({scrollDirection:D,scrollOffset:L,scrollUpdateWasRequested:z})}),j._getItemStyle=void 0,j._getItemStyle=function(D){var L=j.props,z=L.direction,B=L.itemSize,G=L.layout,Z=j._getItemStyleCache(m&&B,m&&G,m&&z),K;if(Z.hasOwnProperty(D))K=Z[D];else{var te=r(j.props,D,j._instanceProps),se=o(j.props,D,j._instanceProps),le=z==="horizontal"||G==="horizontal",pe=z==="rtl",me=le?te:0;Z[D]=K={position:"absolute",left:pe?void 0:me,right:pe?me:void 0,top:le?0:te,height:le?"100%":se,width:le?se:"100%"}}return K},j._getItemStyleCache=void 0,j._getItemStyleCache=EF(function(D,L,z){return{}}),j._onScrollHorizontal=function(D){var L=D.currentTarget,z=L.clientWidth,B=L.scrollLeft,G=L.scrollWidth;j.setState(function(Z){if(Z.scrollOffset===B)return null;var K=j.props.direction,te=B;if(K==="rtl")switch(zet()){case"negative":te=-B;break;case"positive-descending":te=G-z-B;break}return te=Math.max(0,Math.min(te,G-z)),{isScrolling:!0,scrollDirection:Z.scrollOffset<te?"forward":"backward",scrollOffset:te,scrollUpdateWasRequested:!1}},j._resetIsScrollingDebounced)},j._onScrollVertical=function(D){var L=D.currentTarget,z=L.clientHeight,B=L.scrollHeight,G=L.scrollTop;j.setState(function(Z){if(Z.scrollOffset===G)return null;var K=Math.max(0,Math.min(G,B-z));return{isScrolling:!0,scrollDirection:Z.scrollOffset<K?"forward":"backward",scrollOffset:K,scrollUpdateWasRequested:!1}},j._resetIsScrollingDebounced)},j._outerRefSetter=function(D){var L=j.props.outerRef;j._outerRef=D,typeof L=="function"?L(D):L!=null&&typeof L=="object"&&L.hasOwnProperty("current")&&(L.current=D)},j._resetIsScrollingDebounced=function(){j._resetIsScrollingTimeoutId!==null&&jet(j._resetIsScrollingTimeoutId),j._resetIsScrollingTimeoutId=s5r(j._resetIsScrolling,l5r)},j._resetIsScrolling=function(){j._resetIsScrollingTimeoutId=null,j.setState({isScrolling:!1},function(){j._getItemStyleCache(-1,null)})},j}E.getDerivedStateFromProps=function(j,D){return p5r(j,D),y(j),null};var A=E.prototype;return A.scrollTo=function(j){j=Math.max(0,j),this.setState(function(D){return D.scrollOffset===j?null:{scrollDirection:D.scrollOffset<j?"forward":"backward",scrollOffset:j,scrollUpdateWasRequested:!0}},this._resetIsScrollingDebounced)},A.scrollToItem=function(j,D){D===void 0&&(D="auto");var L=this.props,z=L.itemCount,B=L.layout,G=this.state.scrollOffset;j=Math.max(0,Math.min(j,z-1));var Z=0;if(this._outerRef){var K=this._outerRef;B==="vertical"?Z=K.scrollWidth>K.clientWidth?qet():0:Z=K.scrollHeight>K.clientHeight?qet():0}this.scrollTo(i(this.props,j,D,G,this._instanceProps,Z))},A.componentDidMount=function(){var j=this.props,D=j.direction,L=j.initialScrollOffset,z=j.layout;if(typeof L=="number"&&this._outerRef!=null){var B=this._outerRef;D==="horizontal"||z==="horizontal"?B.scrollLeft=L:B.scrollTop=L}this._callPropsCallbacks()},A.componentDidUpdate=function(){var j=this.props,D=j.direction,L=j.layout,z=this.state,B=z.scrollOffset,G=z.scrollUpdateWasRequested;if(G&&this._outerRef!=null){var Z=this._outerRef;if(D==="horizontal"||L==="horizontal"){if(D==="rtl")switch(zet()){case"negative":Z.scrollLeft=-B;break;case"positive-ascending":Z.scrollLeft=B;break;default:var K=Z.clientWidth,te=Z.scrollWidth;Z.scrollLeft=te-K-B;break}else Z.scrollLeft=B;}else Z.scrollTop=B}this._callPropsCallbacks()},A.componentWillUnmount=function(){this._resetIsScrollingTimeoutId!==null&&jet(this._resetIsScrollingTimeoutId)},A.render=function(){var j=this.props,D=j.children,L=j.className,z=j.direction,B=j.height,G=j.innerRef,Z=j.innerElementType,K=j.innerTagName,te=j.itemCount,se=j.itemData,le=j.itemKey,pe=le===void 0?u5r:le,me=j.layout,_e=j.outerElementType,de=j.outerTagName,Ce=j.style,Ze=j.useIsScrolling,rt=j.width,ct=this.state.isScrolling,qe=z==="horizontal"||me==="horizontal",lt=qe?this._onScrollHorizontal:this._onScrollVertical,_t=this._getRangeToRender(),Tt=_t[0],et=_t[1],pt=[];if(te>0)for(var ot=Tt;ot<=et;ot++)pt.push((0,bT.createElement)(D,{data:se,key:pe(ot,se),index:ot,isScrolling:Ze?ct:void 0,style:this._getItemStyle(ot)}));var $e=n(this.props,this._instanceProps);return(0,bT.createElement)(_e||de||"div",{className:L,onScroll:lt,ref:this._outerRefSetter,style:yo({position:"relative",height:B,width:rt,overflow:"auto",WebkitOverflowScrolling:"touch",willChange:"transform",direction:z},Ce)},(0,bT.createElement)(Z||K||"div",{children:pt,ref:G,style:{height:qe?"100%":$e,pointerEvents:ct?"none":void 0,width:qe?$e:"100%"}}))},A._callPropsCallbacks=function(){if(typeof this.props.onItemsRendered=="function"){var j=this.props.itemCount;if(j>0){var D=this._getRangeToRender(),L=D[0],z=D[1],B=D[2],G=D[3];this._callOnItemsRendered(L,z,B,G)}}if(typeof this.props.onScroll=="function"){var Z=this.state,K=Z.scrollDirection,te=Z.scrollOffset,se=Z.scrollUpdateWasRequested;this._callOnScroll(K,te,se)}},A._getRangeToRender=function(){var j=this.props,D=j.itemCount,L=j.overscanCount,z=this.state,B=z.isScrolling,G=z.scrollDirection,Z=z.scrollOffset;if(D===0)return[0,0,0,0];var K=a(this.props,Z,this._instanceProps),te=c(this.props,K,Z,this._instanceProps),se=!B||G==="backward"?Math.max(1,L):1,le=!B||G==="forward"?Math.max(1,L):1;return[Math.max(0,K-se),Math.max(0,Math.min(D-1,te+le)),K,te]},E}(bT.PureComponent),t.defaultProps={direction:"ltr",itemData:void 0,layout:"vertical",overscanCount:2,useIsScrolling:!1},t}var p5r=function(t,r){var n=t.children,o=t.direction,i=t.height,a=t.layout,c=t.innerTagName,h=t.outerTagName,m=t.width,y=r.instance;if(0)var w};var SF=c5r({getItemOffset:function(t,r){var n=t.itemSize;return r*n},getItemSize:function(t,r){var n=t.itemSize;return n},getEstimatedTotalSize:function(t){var r=t.itemCount,n=t.itemSize;return n*r},getOffsetForIndexAndAlignment:function(t,r,n,o,i,a){var c=t.direction,h=t.height,m=t.itemCount,y=t.itemSize,w=t.layout,E=t.width,A=c==="horizontal"||w==="horizontal",P=A?E:h,j=Math.max(0,m*y-P),D=Math.min(j,r*y),L=Math.max(0,r*y-P+y+a);switch(n==="smart"&&(o>=L-P&&o<=D+P?n="auto":n="center"),n){case"start":return D;case"end":return L;case"center":{var z=Math.round(L+(D-L)/2);return z<Math.ceil(P/2)?0:z>j+Math.floor(P/2)?j:z}case"auto":default:return o>=L&&o<=D?o:o<L?L:D}},getStartIndexForOffset:function(t,r){var n=t.itemCount,o=t.itemSize;return Math.max(0,Math.min(n-1,Math.floor(r/o)))},getStopIndexForStartIndex:function(t,r,n){var o=t.direction,i=t.height,a=t.itemCount,c=t.itemSize,h=t.layout,m=t.width,y=o==="horizontal"||h==="horizontal",w=r*c,E=y?m:i,A=Math.ceil((E+n-w)/c);return Math.max(0,Math.min(a-1,r+A-1))},initInstanceProps:function(t){},shouldResetStyleCacheOnItemSizeChange:!0,validateProps:function(t){var r=t.itemSize}});u();var Uet=ee(ke());function f5r(e){var t=e.lastRenderedStartIndex,r=e.lastRenderedStopIndex,n=e.startIndex,o=e.stopIndex;return!(n>r||o<t)}function d5r(e){for(var t=e.isItemLoaded,r=e.itemCount,n=e.minimumBatchSize,o=e.startIndex,i=e.stopIndex,a=[],c=null,h=null,m=o;m<=i;m++){var y=t(m);y?h!==null&&(a.push(c,h),c=h=null):(h=m,c===null&&(c=m))}if(h!==null){for(var w=Math.min(Math.max(h,c+n-1),r-1),E=h+1;E<=w&&!t(E);E++)h=E;a.push(c,h)}if(a.length)for(;a[1]-a[0]+1<n&&a[0]>0;){var A=a[0]-1;if(!t(A))a[0]=A;else break}return a}var h5r=function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")},m5r=function(){function e(t,r){for(var n=0;n<r.length;n++){var o=r[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),g5r=function(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)},Fet=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t&&(typeof t=="object"||typeof t=="function")?t:e},v5r=function(e){g5r(t,e);function t(){var r,n,o,i;h5r(this,t);for(var a=arguments.length,c=Array(a),h=0;h<a;h++)c[h]=arguments[h];return i=(n=(o=Fet(this,(r=t.__proto__||Object.getPrototypeOf(t)).call.apply(r,[this].concat(c))),o),o._lastRenderedStartIndex=-1,o._lastRenderedStopIndex=-1,o._memoizedUnloadedRanges=[],o._onItemsRendered=function(m){var y=m.visibleStartIndex,w=m.visibleStopIndex;o._lastRenderedStartIndex=y,o._lastRenderedStopIndex=w,o._ensureRowsLoaded(y,w)},o._setRef=function(m){o._listRef=m},n),Fet(o,i)}return m5r(t,[{key:"resetloadMoreItemsCache",value:function(){var n=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!1;this._memoizedUnloadedRanges=[],n&&this._ensureRowsLoaded(this._lastRenderedStartIndex,this._lastRenderedStopIndex)}},{key:"componentDidMount",value:function(){}},{key:"render",value:function(){var n=this.props.children;return n({onItemsRendered:this._onItemsRendered,ref:this._setRef})}},{key:"_ensureRowsLoaded",value:function(n,o){var i=this.props,a=i.isItemLoaded,c=i.itemCount,h=i.minimumBatchSize,m=h===void 0?10:h,y=i.threshold,w=y===void 0?15:y,E=d5r({isItemLoaded:a,itemCount:c,minimumBatchSize:m,startIndex:Math.max(0,n-w),stopIndex:Math.min(c-1,o+w)});(this._memoizedUnloadedRanges.length!==E.length||this._memoizedUnloadedRanges.some(function(A,P){return E[P]!==A}))&&(this._memoizedUnloadedRanges=E,this._loadUnloadedRanges(E))}},{key:"_loadUnloadedRanges",value:function(n){for(var o=this,i=this.props.loadMoreItems||this.props.loadMoreRows,a=function(m){var y=n[m],w=n[m+1],E=i(y,w);E!=null&&E.then(function(){if(f5r({lastRenderedStartIndex:o._lastRenderedStartIndex,lastRenderedStopIndex:o._lastRenderedStopIndex,startIndex:y,stopIndex:w})){if(o._listRef==null)return;typeof o._listRef.resetAfterIndex=="function"?o._listRef.resetAfterIndex(y,!0):(typeof o._listRef._getItemStyleCache=="function"&&o._listRef._getItemStyleCache(-1),o._listRef.forceUpdate())}})},c=0;c<n.length;c+=2)a(c)}}]),t}(Uet.PureComponent),Bet=v5r;u();var Ctt=ee(ke(),1);u();var sD=ee(ke(),1);u();var Ro=ee(ke(),1),Ip=ee(It(),1);var aD=ee(Mse(),1);u();var vtt=(e,t)=>e.findIndex(r=>r.getId()===t.getId())!==-1,mLr="http://www.deutschefotothek.de/images/noimage/image120.jpg",iD=e=>e.getType()===mo.VECTOR_MAP?mr.getSettings().FALLBACK_THUMBNAIL:mLr,AF=e=>{let t=e.getMetadata(Ue.thumbnailUrl);return!Me(t)||t===""?iD(e):t.replace("http:","")};var ytt=({children:e,data:t,index:r,onClick:n,onMouseEnter:o,onMouseLeave:i,style:a})=>{var le;let{direction:c,maps:h}=t,m=(le=h[r])!=null?le:wb,y=bt(qn),[w,E]=(0,Ro.useState)(!1),{displayTime:A,sortTime:P}=(0,Ro.useMemo)(()=>({displayTime:m.getDisplayTime(),sortTime:m.getSortTime()}),[m]),j=(0,Ro.useMemo)(()=>AF(m),[m]),D=(0,Ro.useMemo)(()=>iD(m),[m]),L=()=>{n(m)},z=pe=>{pe.key==="Enter"&&L()},B=(0,Ro.useCallback)(()=>{j!==""&&j!==D&&E(!0)},[j,D]);(0,Ro.useEffect)(()=>{E(!1)},[m.getId()]);let G=m===wb,Z=vtt(y,m)&&!G,K=m.getMetadata(Ue.mapScale)==="0"||m.getMetadata(Ue.mapScale)===0?fe("mapsearch-listelement-unknown"):`1:${m.getMetadata(Ue.mapScale)}`,te=m.getMetadata(Ue.type)===mo.MOSAIC_MAP,se=m.getMetadata(Ue.type)===mo.VECTOR_MAP;return Ro.default.createElement("li",{tabIndex:0,style:a,className:qt("vkf-mapsearch-record",m.getMetadata(Ue.type),Z&&"selected",c,G&&"loading"),id:m.getMetadata(Ue.id),onClick:G?void 0:L,onKeyDown:G?void 0:z,onMouseEnter:o,onMouseLeave:i},e,Ro.default.createElement("span",{className:"data-col time"},isNaN(P)?"":P),Ro.default.createElement("span",{className:"data-col title"},m.getMetadata(Ue.title)),Ro.default.createElement("span",{className:"data-col time"},"1"),Ro.default.createElement("div",{className:"view-item"},Ro.default.createElement("span",{className:"thumbnail",href:"#"},G?Ro.default.createElement(aD.default.default,{height:"calc(100% - 6px)"}):Ro.default.createElement(Ro.default.Fragment,null,Ro.default.createElement("img",{alt:`Thumbnail Image of Map ${m.getMetadata(Ue.title)} ${A}`,onError:B,src:w?D:j}),te&&Ro.default.createElement("span",{className:qt("mosaic-badge",Z&&"selected")},fe("mosaic-badge-title")),se&&Ro.default.createElement("span",{className:qt("vector-badge",Z&&"selected")},fe("vector-badge-title"))),Z&&Ro.default.createElement("span",{className:"badge selected-badge"},Ro.default.createElement("span",{className:"glyphicon glyphicon-ok"})," ")),Ro.default.createElement("div",{className:"overview"},Ro.default.createElement("h2",null,G?Ro.default.createElement(aD.default.default,null):m.getMetadata(Ue.title)),Ro.default.createElement("div",{className:"details"},Ro.default.createElement("div",{className:"timestamp"},G?Ro.default.createElement(aD.default.default,null):`${fe("mapsearch-listelement-time")} ${A}`),!se&&Ro.default.createElement("div",{className:"scale"},G?Ro.default.createElement(aD.default.default,null):`${fe("mapsearch-listelement-scale")} ${K}`),!m.getMetadata(Ue.hasGeoReference)&&Ro.default.createElement("div",{className:"georeference"},fe("mapsearch-listelement-no-georef"))))))};ytt.propTypes={children:Ip.default.element,data:Ip.default.shape({direction:Ip.default.oneOf(["horizontal","vertical"]),feature:Ip.default.object,is3d:Ip.default.bool,maps:Ip.default.object,selected:Ip.default.bool}),onClick:Ip.default.func,onMouseEnter:Ip.default.func,onMouseLeave:Ip.default.func,index:Ip.default.number,style:Ip.default.object};var Cse=ytt;var _tt=e=>{var h;let{data:t,index:r}=e,{maps:n}=t,o=bt(rr),i=(h=n[r])!=null?h:wb,a=(0,sD.useCallback)(()=>{Me(o)&&loe(o,i.getPreviewFeature())},[o,i]),c=(0,sD.useCallback)(()=>{Me(o)&&loe(o,{type:"FeatureCollection",features:[]})},[o,i]);return sD.default.createElement(Cse,Te({onMouseEnter:a,onMouseLeave:c},e))};_tt.propTypes=Te({},Cse.propTypes);var Ase=_tt;u();var gLr=e=>yt(null,null,function*(){var t;try{let r=yield Za.get(`${e}/tilemapresource.xml`),n=new DOMParser().parseFromString(r.data,"text/xml"),o=n.getElementsByTagName("BoundingBox")[0],i=[o.getAttribute("minx"),o.getAttribute("miny"),o.getAttribute("maxx"),o.getAttribute("maxy")].map(parseFloat),a=n.getElementsByTagName("TileSet"),c=(t=parseInt(n.getElementsByTagName("TileFormat")[0].getAttribute("width")))!=null?t:256;return{bounds:i,maxZoom:a.length-1,tileSize:c}}catch(r){return console.error("Error fetching or parsing XML:",r),null}}),wT=e=>yt(null,null,function*(){let t=e.getMetadata(Ue.tmsUrls),r=e.getMetadata(Ue.onlineResources).find(i=>i.type==="WMS").url,n=Array.isArray(t)&&t.length>0,o;if(n){let{maxZoom:i,bounds:a,tileSize:c}=yield gLr(t[0]);o={bounds:a,tileSize:c,maxzoom:i,tiles:t.map(h=>`${h}/{z}/{x}/{y}.png`),scheme:"tms"}}else o={tiles:(yield cF(r))[0].urls};return o});u();u();var btt=(e,t)=>yt(null,null,function*(){return(yield mr.getGeoreferenceApiClient().post("/vector_maps/",Te({geojson:e},t))).data.id}),xtt=(e,t,r,n)=>yt(null,null,function*(){let o=mr.getGeoreferenceApiClient(),i=`/vector_maps/${e}`;return(yield o.patch(i,{geojson:t,metadata:r,current_version:n})).data.version}),wtt=e=>yt(null,null,function*(){let t=mr.getGeoreferenceApiClient(),r=`/vector_maps/${e}`;return(yield t.get(r)).data}),Ett=e=>yt(null,null,function*(){let t=mr.getGeoreferenceApiClient(),r=`/vector_maps/${e}`;return(yield t.delete(r)).data}),Stt=e=>yt(null,null,function*(){let t=mr.getGeoreferenceApiClient(),r=`/vector_maps/${e}/versions`;return(yield t.get(r)).data}),Ttt=(e,t)=>yt(null,null,function*(){let r=mr.getGeoreferenceApiClient(),n=`/vector_maps/${e}/versions/${t}`;return(yield r.get(n)).data}),Itt=e=>yt(null,null,function*(){let t=mr.getGeoreferenceApiClient(),r=`/vector_maps/${e}/roles`;return(yield t.get(r)).data}),Mtt=(e,t)=>yt(null,null,function*(){let r=mr.getGeoreferenceApiClient(),n=`/vector_maps/${e}/roles`;return(yield r.patch(n,Te({},t))).data});var vLr=e=>yt(null,null,function*(){let t=e.getMetadata(Ue.externalContentUrl),r={accept:"application/json"},n=yield Za.get(t,{headers:r}),o=$o.toApplicationState(n.data);e.setGeoJson(o)}),yLr=e=>yt(null,null,function*(){let t=yield wtt(e.getMetadata(Ue.vectorMapId));e.updateMetadata(Ue.userRole,t[Ue.userRole]),e.updateMetadata(Ue.version,t[Ue.version]);let r=$o.toApplicationState(t.geojson);e.setGeoJson(r)}),ET=e=>yt(null,null,function*(){if(e.isExternalVectorMap()){yield vLr(e);return}yield yLr(e)});var _Lr=()=>pr(({snapshot:e,set:t})=>r=>yt(null,null,function*(){let n=yield e.getPromise(qn),o=yield e.getPromise(rr);t(tl,void 0);let i=n.find(c=>c.getId()===r.getId());if(i){t(qn,n.filter(c=>c.getId()!==r.getId())),i.removeMapLibreLayers(o);return}if(r.getMetadata(Ue.type)===mo.VECTOR_MAP)yield ET(r),r.addLayerToMap(o),t(qn,c=>c.concat(r));else{let c=yield wT(r);r.addLayerToMap(o,{sourceSettings:c}),t(qn,h=>h.concat(r))}})),Att=e=>{let t=_Lr();return Ctt.default.createElement(Ase,Te({onClick:t},e))};Att.propTypes=Te({},Ase.propTypes);var Ott=Att;u();var C0=ee(It(),1),$d=ee(ke(),1);u();var M0=ee(ke(),1),lD=ee(It(),1);var bLr=e=>e===Yu.ASCENDING?Yu.DESCENDING:Yu.ASCENDING,Ptt=({label:e,sortOrder:t,sortKey:r,onClick:n})=>{let o=(0,M0.useCallback)(()=>{let a=bLr(t);n(r,a)},[r,t,n]),i=(0,M0.useCallback)(a=>{a.key==="Enter"&&o()},[o]);return M0.default.createElement("div",{className:qt("inner-col",r)},M0.default.createElement("div",{className:qt("sort-element",r,t),onClick:o,onKeyDown:i,tabIndex:0},e,M0.default.createElement("span",{className:"caret-container"},M0.default.createElement("span",{className:"caret caret-reversed"}))))};Ptt.propTypes={label:lD.default.string.isRequired,sortOrder:lD.default.string.isRequired,sortKey:lD.default.string.isRequired,onClick:lD.default.func.isRequired};var Dtt=Ptt;var Yu={ASCENDING:"ascending",DESCENDING:"descending"},Ntt=({sortColumns:e,onUpdateSortOrder:t,defaultSortKey:r="title",defaultSortOrder:n=Yu.ASCENDING})=>{let[o,i]=(0,$d.useState)(r),[a,c]=(0,$d.useState)(n),h=(0,$d.useCallback)((m,y)=>{i(m),c(y),t(m,y)},[t,a]);return $d.default.createElement("div",{className:"vkf-sort-control-root"},$d.default.createElement("div",{className:"list-header"},$d.default.createElement("strong",{className:"list-label"},fe("mapsearch-sorting"),":"),$d.default.createElement("div",{className:"inner-columns"},e.map(({sortKey:m,label:y})=>$d.default.createElement(Dtt,{key:m,onClick:h,sortOrder:o===m?a:"",sortKey:m,label:y})))))};Ntt.propTypes={sortColumns:C0.default.arrayOf(C0.default.shape({sortKey:C0.default.string,label:C0.default.string})).isRequired,onUpdateSortOrder:C0.default.func,defaultSortKey:C0.default.string,defaultSortOrder:C0.default.oneOf([Yu.ASCENDING,Yu.DESCENDING])};var OF=Ntt;var wb=new kg({metadata:{has_georeference:!0,map_scale:"0",thumb_url:"",[Ue.timePeriod]:[],title:"Loading"}}),PF=({direction:e="vertical",itemSize:t=110,ListItemComponent:r=Ott,minimumBatchSize:n,onFetchResults:o,onUpdateSortType:i,renderHeader:a=!0,searchResultDescriptor:{itemCount:c,id:h}})=>{let m=bt(nWe),[y,w]=(0,xs.useState)({}),E=(0,xs.useMemo)(()=>[{sortKey:"map_scale",label:fe("mapsearch-map_scale")},{sortKey:"time_period_start",label:fe("mapsearch-time")},{sortKey:"title",label:fe("mapsearch-title")}],[]),A=(0,xs.useRef)(!1),P=(0,xs.useRef)(),j=(0,xs.useRef)(),{height:D,width:L}=oP(j),z=(0,xs.useCallback)(G=>!A.current&&y[G]!==void 0&&y[G]!==wb,[y]),B=(0,xs.useCallback)((G,Z)=>{if(G!==void 0&&Z!==void 0){let K=Z-G+1;return o(G,K).then(te=>{te&&w(se=>{let le=A.current?{}:Object.assign({},se);return A.current=!1,te.forEach((pe,me)=>{le[G+me]=pe}),le})})}},[o]);return(0,xs.useEffect)(()=>{wb.updateMetadata("title",fe("mapsearch-listelement-loading"))},[]),(0,xs.useEffect)(()=>{A.current=!0,P.current.resetloadMoreItemsCache(!0)},[h]),xs.default.createElement("div",{className:qt("vkf-mapsearch-result-list",e)},a&&xs.default.createElement(OF,{sortColumns:E,onUpdateSortOrder:i,defaultSortKey:Ose,defaultSortOrder:Pse}),xs.default.createElement("div",{className:"mapsearch-contentlist-container",ref:j},xs.default.createElement(Bet,{isItemLoaded:z,itemCount:c,loadMoreItems:B,minimumBatchSize:n,ref:P},({onItemsRendered:G,ref:Z})=>xs.default.createElement(SF,{height:D,innerElementType:"ul",itemCount:c,itemSize:t,itemData:{direction:e,maps:y,is3d:m},layout:e,onItemsRendered:G,ref:Z,width:L},r))))};PF.propTypes={direction:qc.default.oneOf(["horizontal","vertical"]),itemSize:qc.default.number,minimumBatchSize:qc.default.number,ListItemComponent:qc.default.elementType,renderHeader:qc.default.bool,onFetchResults:qc.default.func,onUpdateSortType:qc.default.func,searchResultDescriptor:qc.default.shape({id:qc.default.number,itemCount:qc.default.number}),sortSettings:qc.default.shape({activeType:qc.default.string,sortOrder:qc.default.string})};var Ose="title",Pse=Yu.ASCENDING,Ltt=o=>{var i=o,{customQuery:e,DataProvider:t,enableOverlayLayer:r=!0}=i,n=En(i,["customQuery","DataProvider","enableOverlayLayer"]);let[a,c]=(0,Wd.useState)({activeType:Ose,sortOrder:Pse}),h=(0,Wd.useCallback)((y,w)=>{c({sortOrder:w,activeType:y})},[]);return Wd.default.createElement(Wd.Fragment,null,r&&Wd.default.createElement(fHe,null),Wd.default.createElement(t,{customQuery:e,renderConsumer:y=>Wd.default.createElement(PF,Te(Te({onUpdateSortType:h},n),y)),sortSettings:a}))};Ltt.propTypes=Te({DataProvider:Dse.default.elementType.isRequired,enableOverlayLayer:Dse.default.bool},PF.propTypes);var DF=Ltt;u();var Lse=ee(ke(),1),kse=ee(It(),1);u();var Nse=ee(ke(),1),NF=ee(It(),1);var ktt=({name:e,color:t,size:r})=>Nse.default.createElement("svg",{viewBox:"0 0 24 24",className:`icon ${e}`,fill:t,width:r,height:r},Nse.default.createElement("use",{xlinkHref:`${mr.getSettings().ICON_SPRITE}#${e}`}));ktt.propTypes={name:NF.default.string.isRequired,color:NF.default.string,size:NF.default.number};var hu=ktt;var Rtt=({onClick:e,isOpen:t})=>{let r=bt(wf);return Lse.default.createElement("button",{className:qt("vkf-toggle-facets",r.facets.length>0&&"active"),onClick:e,title:fe(`mapsearch-facetedsearch-${t?"close":"open"}`)},Lse.default.createElement(hu,{name:"icon-filter"}))};Rtt.propTypes={isOpen:kse.default.bool,onClick:kse.default.func};var LF=Rtt;u();var sm=ee(ke(),1);var xLr=()=>sm.default.createElement("div",{className:"lds-roller"},sm.default.createElement("div",null),sm.default.createElement("div",null),sm.default.createElement("div",null),sm.default.createElement("div",null),sm.default.createElement("div",null),sm.default.createElement("div",null),sm.default.createElement("div",null),sm.default.createElement("div",null)),kF=xLr;u();var Vl=ee(ke(),1),A0=ee(It(),1);u();var wLr=function(e){let t=[],r={bool:{should:t}};for(let n=0;n<e.length;n++){let o=e[n],i={term:{}};i.term[o.key]=o.value.toLowerCase(),t.push(i)}return r},jtt=function(e,t){return{aggs:{minYear:{min:{field:e}},maxYear:{max:{field:t}}}}},ELr=function(e,t){return{bool:{should:t.map(n=>({geo_shape:{[e]:{relation:"intersects",shape:{type:"polygon",coordinates:n}}}}))}}},qtt=function({timePeriodStartFieldName:e,timePeriodEndFieldName:t,timeValues:r,geometrySearchFieldName:n,geometrySearchPolygons:o,sortFieldName:i,sortValue:a,facets:c,customQueryExtension:h}){let[m,y]=r;return{query:{bool:{filter:[{range:{[e]:{lte:y}}},{range:{[t]:{gte:m}}},ELr(n,o),wLr(c),{term:{has_georeference:!0}},...(h||[])],must:[{match_all:{}}]}},sort:{[i]:{order:a}}}};u();u();var rrt=ee(trt(),1);function nrt(e,t={}){t.concavity=t.concavity||1/0;let r=[];if($O(e,o=>{r.push([o[0],o[1]])}),!r.length)return null;let n=(0,rrt.default)(r,t.concavity);return n.length>3?vHe([n]):null}var FF={height:15,width:15},ort={height:15,width:0},UF={width:340},Gse={width:340},irt=(e,t,r)=>{let{map:n}=e,o=r<=2?30:r<=3.5?20:r<=5?10:5,i,a,c,h;t===Mc.VERTICAL?(i=0,a=n.height,c=n.width,h=0):(i=0+UF.width+FF.width,a=n.height-ort.height-FF.height,c=n.width-Gse.width-FF.width,h=ort.height+FF.height);let m=(c-i)/o,y=(h-a)/o,w=[];for(let E=0;E<o+1;E++)for(let A=0;A<o+1;A++)w.push([Math.round(i+E*m),Math.round(a+A*y)]);return w};function art(e,t){let r=e.map(i=>t.unproject(i).wrap().toArray()),n=[],o=NLr(r);return mr.isDebug()&&o.forEach(i=>{i.forEach(a=>{n.push({type:"Feature",geometry:{type:"Point",coordinates:a}})})}),o.forEach(i=>{let a=nrt(yHe(i.map(c=>gHe(c))));n.push(a)}),n}function NLr(e){let t=e.map(c=>c[0]),r=Math.min(...t);if(!(Math.max(...t)-r>180))return[e];let i=e.filter(c=>c[0]>=0);return[e.filter(c=>c[0]<0),i]}u();var srt=ee(It(),1),lrt=ee(ke(),1);function urt({features:e}){let t=bt(rr);return(0,lrt.useEffect)(()=>{if(!t||!e)return;let r={type:"FeatureCollection",features:e},n="debug-search-source",o="debug-search-layer";if(!t.getSource(n))t.addSource(n,{type:"geojson",data:r}),t.addLayer({id:`${o}-polygon-fill`,type:"fill",source:n,paint:{"fill-color":"#209173","fill-opacity":.4}}),t.addLayer({id:`${o}-polygon-outline`,type:"line",source:n,paint:{"line-color":"#209173","line-width":2}}),t.addLayer({id:`${o}-point`,type:"circle",source:n,paint:{"circle-radius":5,"circle-color":"#0f0f0f","circle-stroke-width":1,"circle-stroke-color":"#0f0f0f"}});else{console.log("Zoom: ",t.getZoom());let i=t.getSource(n);i&&(console.log(r),i.setData(r))}},[t,e]),null}urt.propTypes=srt.default.array.isRequired;var crt=urt;function LLr(e,t){return e.length!==t.length?!1:e.every((r,n)=>JSON.stringify(r)===JSON.stringify(t[n]))}var prt=({customQuery:e,minimumBatchSize:t=20,renderConsumer:r,sortSettings:n})=>{let{activeType:o,sortOrder:i}=n,a=bt(Zq),{facets:c}=bt(wf),h=bt(qS),m=bt(rr),[y,w]=(0,Vl.useState)(void 0),E=Lr(Kq),A=Lr(zS),[P,j]=Io(m0),[D,L]=Io(h0),[z,B]=(0,Vl.useState)({itemCount:10,id:Date.now()}),Z=mr.getSettings().API_SEARCH,K=(0,Vl.useCallback)(me=>{let _e=i===Yu.ASCENDING?"asc":"desc",de=me.filter(Ce=>Ce.geometry.type==="Polygon").map(Ce=>Ce.geometry.coordinates);return qtt({timePeriodStartFieldName:"time_period_start",timePeriodEndFieldName:"time_period_end",timeValues:[`${D[0]}-01-01`,`${D[1]}-12-31`],geometrySearchFieldName:"geometry",geometrySearchPolygons:de,sortFieldName:o,sortValue:_e,facets:c,customQueryExtension:e})},[c,o,i,D]),te=(0,Vl.useCallback)((me,_e,de=!1)=>{if(y===void 0)return E(!1),new Promise(rt=>rt([]));let Ce=K(y),Ze=Z+"/_search?from="+me+"&size="+_e;return E(!0),Za.post(Ze,Ce).then(rt=>{if(rt.status===200){let ct=rt.data;return de?ct:WWe(ct.hits.hits)}}).catch(rt=>{console.warn(rt)}).finally(()=>{E(!1)})},[K,y]),se=(0,Vl.useCallback)(()=>{te(0,0,!0).then(me=>{let _e=me.hits.total.value;A(_e),B({itemCount:_e,id:Date.now()})})},[te]),le=cWe(se,30),pe=(0,Vl.useCallback)(()=>{if(Me(m)){let me=irt(a,h,m.getZoom()),_e=art(me,m);(y===void 0||!LLr(_e,y))&&w(_e)}},[m,y,a]);return(0,Vl.useEffect)(()=>{if(Me(m))return m.on("moveend",pe),()=>{m.off("moveend",pe)}},[m,pe]),(0,Vl.useEffect)(()=>{le()},[c,se,y,o,i,D]),(0,Vl.useEffect)(()=>{pe()},[a,m]),(0,Vl.useEffect)(()=>{let me=`${Z}/_search?`,_e=jtt("time_period_start","time_period_end");Za.post(me,_e,{}).then(de=>{if(de.status===200){let Ce=de.data,Ze=new Date(Ce.aggregations.maxYear.value),ct=[new Date(Ce.aggregations.minYear.value).getUTCFullYear(),Ze.getUTCFullYear()];(P===void 0||Roe===P||ct[0]!==P[0]||ct[1]!==P[1])&&(j(ct),L(ct))}})},[]),Vl.default.createElement(Vl.default.Fragment,null,r({minimumBatchSize:t,onRefresh:se,onFetchResults:te,searchResultDescriptor:z}),mr.isDebug()&&Vl.default.createElement(crt,{features:y}))};prt.propTypes={customQuery:A0.default.array,minimumBatchSize:A0.default.number,projection:A0.default.string,renderConsumer:A0.default.func,sortSettings:A0.default.shape({activeType:A0.default.string,sortOrder:A0.default.string})};var BF=prt;var VF=ee(It(),1),frt="EPSG:3857",drt=({customQuery:e,MapSearchListItemComponent:t,mosaicMode:r})=>{let[n,o]=Io(wf),[i,a]=(0,ws.useState)(!1),[c,h]=(0,ws.useState)(!1),m=bt(Kq),y=bt(zS),w=()=>{a(A=>!A)},E=()=>{o(rWe)};return(0,ws.useEffect)(()=>{h(m)},[m]),ws.default.createElement("div",{className:qt("mapsearch-container",i&&"facetedsearch-open")},ws.default.createElement("div",{className:"panel panel-default searchTablePanel"},ws.default.createElement("div",{className:"panel-heading"},ws.default.createElement("div",{className:"content"},ws.default.createElement("div",null,y===0?fe("mapsearch-found-no-maps"):`${y} ${fe("mapsearch-found-maps")}`),n.facets.length>0&&ws.default.createElement("button",{className:"remove-filter",onClick:E},ws.default.createElement(hu,{name:"icon-filter"})),c&&ws.default.createElement("div",{className:"loading-spinner"},ws.default.createElement(kF,null)),ws.default.createElement(LF,{onClick:w,isOpen:i})),ws.default.createElement("div",{className:"facet-container"},ws.default.createElement(wF,{georeferenceMode:!1,mosaicMode:r}))),ws.default.createElement("div",{className:"panel-body"},ws.default.createElement(DF,{customQuery:e,DataProvider:BF,ListItemComponent:t}))))};drt.propTypes={customQuery:VF.default.array,MapSearchListItemComponent:VF.default.elementType,mosaicMode:VF.default.bool};var hrt=drt;var mrt=e=>typeof e=="string"||e instanceof String,kLr=e=>{if(e===void 0||!Array.isArray(e)||e.length<2)return!1;let[t,r,...n]=e;if(isNaN(t)||isNaN(r)||n.some(o=>isNaN(o)))return!1;if(!grt(t,r)){let[o,i]=Met([t,r],frt);return grt(o,i)}return!0},grt=(e,t)=>e<=180&&e>=-180&&t<=90&&t>=-90,vrt=e=>{let{activeBasemapId:t,is3dEnabled:r,oid:n,operationalLayers:o,mapView:i}=e,a=!0;return a&&(a=t===void 0||mrt(t)),a&&(a=r===void 0||typeof r=="boolean"),a&&(a=n===void 0||mrt(n)||Array.isArray(n)),a&&(a=o===void 0||Array.isArray(o)),a&&(a=i===void 0||RLr(i,r)),a},RLr=e=>{let t,{bearing:r,center:n,pitch:o,zoom:i}=e;return t=n===void 0||kLr(n),t&&(t=o===void 0||!isNaN(o)&&o>=0),t&&(t=r===void 0||!isNaN(r)),t&&(t=i===void 0||!isNaN(i)),t};u();var jLr=Object.values(mo);function yrt(e){return yt(this,null,function*(){let w=e,{id:t,type:r,isVisible:n,opacity:o}=w,i=En(w,["id","type","isVisible","opacity"]),c={visibility:n?"visible":"none",opacity:o};if(!jLr.includes(r))throw console.error("Unknown layer type: ",r),new Error(`Layer type "${r}" not supported`);if(r===mo.LEGACY_GEOJSON)return{layer:Foe(i),settings:{layerSettings:c}};if(r===mo.VECTOR_MAP&&!Me(t)){if(!Me(i.properties)||!Me(i.geojson))throw new Error("Cannot restore local vector map layer without geojson or properties");return{layer:Foe(i),settings:{layerSettings:c}}}if(!Me(t))throw new Error("Cannot restore remote layers with missing id");let h=yield VS(t),m=iP(t,h),y={layer:m,settings:{layerSettings:c}};return r===mo.HISTORIC_MAP&&(y.settings.sourceSettings=yield wT(m)),r===mo.VECTOR_MAP&&(yield ET(m)),y})}u();var brt=ee(RO(),1);var TT=24,GF=100,qLr={left:TT+UF.width+GF,right:TT+Gse.width+GF,top:60,bottom:TT},zLr={left:50,right:50,top:75,bottom:150},FLr=e=>({padding:e===Mc.HORIZONTAL?qLr:zLr,animate:!1}),ULr={padding:{left:TT+UF.width*2+GF,right:GF,top:TT,bottom:TT},animate:!1},_rt=e=>{let t=e;Array.isArray(e)||(t=[e]);let r=null;for(let n of t){let o=n.getMetadata(Ue.bounds);if(!Me(r)){r=new brt.LngLatBounds(o);continue}r.extend(o)}return r},BLr=()=>{let e=pr(({snapshot:r})=>n=>yt(null,null,function*(){let o=yield r.getPromise(rr),i=yield r.getPromise(qS),a=FLr(i);if(Me(o)){let c=_rt(n);o.fitBounds(c,a)}}),[]),t=pr(({snapshot:r})=>n=>yt(null,null,function*(){let o=yield r.getPromise(rr);if(Me(o)){let i=_rt(n);o.fitBounds(i,ULr)}}),[]);return{zoomToExtent:e,zoomToExtentMosaicMap:t}},O0=BLr;var Uoe="vk_persistence_container",wrt=()=>{let e=bt(rr),[t,r]=(0,P0.useState)(void 0),n=Lr(xf),o=Lr(wf),i=Lr(ks),a=Lr(qn),c=Lr(m0),h=Lr(h0),m=Lr(el),{zoomToExtent:y}=O0(),w=mr.getGeoreferenceApiClient(),[E]=jd(Uoe,{operationalLayers:[],is3dEnabled:!1}),[A,P]=jd(mb,[]),j=(D,L="danger")=>{i({id:"persistence-controller",type:L,text:D})};return(0,P0.useEffect)(()=>{let K=(0,xrt.parse)(location.search,{arrayFormat:"comma",parseNumbers:!0}),{b:D,v:L,oid:z,map_id:B,map_view_id:G}=K,Z=En(K,["b","v","oid","map_id","map_view_id"]);if(G!==void 0){let se=`/map_view/${G}`;w.get(se).then(le=>{let{map_view_json:pe}=le.data,de=JSON.parse(pe),{customBasemaps:me}=de,_e=En(de,["customBasemaps"]);me!==void 0&&me.length>0&&P(me.concat(A).filter((Ce,Ze,rt)=>rt.findIndex(ct=>ct.id===Ce.id)===Ze)),_e.mapView&&FWe(_e.mapView)&&(_e.mapView=iz(_e.mapView)),r(_e)})}else{let te=VWe(L),se={activeBasemapId:D,is3dEnabled:te,cameraOptions:GWe(Z),oid:RWe(z,B),featureIdentifier:HWe(Z)},le=!kWe(se)||z!==void 0;r(le?se:E)}},[]),(0,P0.useEffect)(()=>{if(t!==void 0){let{activeBasemapId:D,is3dEnabled:L,oid:z,operationalLayers:B,cameraOptions:G={},featureIdentifier:Z}=t;if(!vrt(t)){j(fe("persistencecontroller-error-persistence-object"));return}try{if(D!==void 0&&n(D),e!==void 0){let K=Object.assign({},mr.getDefaultMapView(),G);if(e.jumpTo(K),K.legacy3dMapView){let te=e.getCanvas(),se=te.height,le=te.width,pe=e.unproject([le/2,se*.3]);e.setCenter(pe),j(fe("persistencecontroller-deprecated-3d-map-view"),"warning")}if(L&&e.enableVkfGlobeMode(),B!==void 0&&B.length>0&&z===void 0)try{let te=[];for(let se of B){let le=yrt(se);te.push(le)}Promise.all(te).then(se=>{for(let{layer:pe,settings:me}of se)pe.addLayerToMap(e,me);let le=se.map(({layer:pe})=>pe);a(le)}).catch(se=>{throw new Error(se)})}catch(te){console.error(te),j(fe("persistencecontroller-error-persistence-object"))}else if(z!==void 0){let se=(Array.isArray(z)?z:[z]).map(le=>YWe(le));Promise.all(se).then(le=>{Promise.all(le.map(pe=>pe.getType()===mo.VECTOR_MAP?ET(pe).then(()=>({layer:pe})):new Promise(me=>wT(pe).then(_e=>me({layer:pe,sourceSettings:_e}))))).then(pe=>{for(let{layer:me,sourceSettings:_e}of pe)me.addLayerToMap(e,{sourceSettings:_e});a(le),Me(Z)&&m(Z)}),(G===void 0||Object.entries(G).length===0)&&y(le)}).catch(le=>{console.error(le),j(fe("persistencecontroller-error-single-map"),"warning")})}}}catch(K){console.error(K),j(fe("persistencecontroller-error-persistence-object"))}}},[e,t]),(0,P0.useEffect)(()=>{if(t!==void 0){let{searchOptions:D}=t;if(D!==void 0){let{facets:L,timeExtent:z,timeRange:B}=D;L!==void 0&&o(L),B!==void 0&&c(B),z!==void 0&&h(z)}}},[t]),P0.default.createElement($We,null)};u();var qN=ee(ke(),1),Wht=ee(It(),1);u();var Pp=ee(ke(),1);u();u();var va=ee(ke(),1);u();u();var Mf=ee(ke(),1),YF=ee(It(),1);u();u();var Ert=(e,t)=>!Me(e.properties)||!Me(e.properties[t])?"":e.properties[t].trim().toLowerCase(),Srt=e=>!Me(e.properties)||!Me(e.properties[kn.time])?Number.NEGATIVE_INFINITY:e.properties[kn.time][0],Trt=(e,t)=>(r,n)=>{let o=t===Yu.ASCENDING?1:-1,i="",a="";return e===kn.time?(i=Srt(r),a=Srt(n)):(i=Ert(r,e),a=Ert(n,e)),i>a?1*o:i<a?-1*o:0};u();var lm=ee(ke(),1);var HF=kn.title,$F=Yu.ASCENDING,VLr=()=>{let e=Lr($se),t=Lr(Hse),r=(0,lm.useMemo)(()=>[{sortKey:kn.time,label:fe("mapsearch-time")},{sortKey:kn.title,label:fe("mapsearch-title")}],[]),n=(0,lm.useCallback)((o,i)=>{t(o),e(i)},[]);return(0,lm.useEffect)(()=>()=>{t(HF),e($F)},[]),lm.default.createElement(lm.default.Fragment,null,lm.default.createElement(OF,{sortColumns:r,defaultSortKey:HF,defaultSortOrder:$F,onUpdateSortOrder:n}))},Irt=VLr;var Es={INITIAL:1,FILTER:2,EDIT:3},D0=dn({key:"geoJsonLayerViewViewModeState",default:Es.INITIAL}),N0=dn({key:"geoJsonLayerViewLayerState",default:null,dangerouslyAllowMutability:!0}),Mrt=Js({key:"geoJsonLayerViewFeaturesState",get:({get:e})=>{var r,n;let t=e(N0);return e(d0),(n=(r=t==null?void 0:t.getGeoJson())==null?void 0:r.features)!=null?n:[]},dangerouslyAllowMutability:!0}),IT=dn({key:"geoJsonLayerViewTimeExtentFilterState",default:null}),Hse=dn({key:"geoJsonLayerViewFeaturesSortKeyState",default:HF}),$se=dn({key:"geoJsonLayerViewFeaturesSortOrderState",default:$F}),Wse=Js({key:"geoJsonLayerViewTimeRangeState",get:({get:e})=>{var o;let t=e(Mrt),r=Number.NaN,n=Number.NaN;for(let i of t){let a=(o=i.properties.time)!=null?o:[],[c,h]=a;!Yh(c)||!Yh(h)||(Number.isNaN(r)&&(r=c),Number.isNaN(n)&&(n=h),c<r&&(r=c),h>n&&(n=h))}return r===n?[]:Number.isNaN(r)||Number.isNaN(n)?[]:(r=ZO(Rg(r)),n=ZO(Rg(n)),[r,n])}}),WF=Js({key:"geoJsonLayerViewIsValidTimeRangeState",get:({get:e})=>e(Wse).length===2}),uD=Js({key:"geoJsonLayerViewFilteredFeaturesState",get:({get:e})=>{let t=e(D0),r=e(Mrt),n=e(Hse),o=e($se),i=Trt(n,o);if(t!==Es.FILTER)return[...r].sort(i);let a=r,c=e(IT);if(c!==null){let[m,y]=c;a=a.filter(({properties:w})=>{var D;let[E,A]=(D=w==null?void 0:w.time)!=null?D:[],P=ZO(Rg(E)),j=ZO(Rg(A));return Number.isNaN(P)||Number.isNaN(j)?!0:P<=y&&j>=m})}return[...a].sort(i)}}),Crt=Js({key:"geoJsonLayerViewExistFilteredFeaturesState",get:({get:e})=>e(uD).length>0}),Art=Js({key:"geoJsonLayerViewMapFilters",get:({get:e})=>{let t=e(D0),r=e(IT);return t!==Es.FILTER||r===null?null:{timeExtent:r}}});var Ort=({className:e,onFeatureClick:t,FeatureItem:r})=>{let n=bt(uD),o=(0,Mf.useMemo)(()=>({features:n,onFeatureClick:t}),[n,t]),i=(0,Mf.useRef)(null),{height:a}=oP(i);return Mf.default.createElement(Mf.default.Fragment,null,Mf.default.createElement("div",{className:e,ref:i},Mf.default.createElement("div",{className:"geojson-layer-feature-list-container"},Mf.default.createElement(Irt,null),n.length===0&&Mf.default.createElement("div",{className:"no-feature-container"},fe("geojsonlayerpanel-no-features")),n.length>0&&Mf.default.createElement(SF,{height:a,overscanCount:3,innerElementType:"ul",itemData:o,itemCount:n.length,width:340,itemSize:110},r))))};Ort.propTypes={className:YF.default.string,onFeatureClick:YF.default.func.isRequired,FeatureItem:YF.default.object.isRequired};var Prt=Ort;var Drt=Prt;u();u();var Yd=ee(ke(),1),MT=ee(It(),1);u();u();var Eb=ee(ke(),1),um=ee(It(),1);var Nrt=(0,Eb.forwardRef)(function(t,r){let{children:n,className:o="",onClick:i,type:a="default",disabled:c=!1,loading:h=!1,title:m,buttonType:y,form:w}=t;return Eb.default.createElement("button",{className:`vkf-button-${a} ${o} ${qt(h&&"loading")}`,disabled:c,onClick:i,ref:r,title:m,type:y,form:w},h===!0&&Eb.default.createElement(Eb.default.Fragment,null,Eb.default.createElement("div",{className:"loading-animation"}),n),h===!1&&n)});Nrt.propTypes={children:um.default.node,className:um.default.string,onClick:um.default.func,disabled:um.default.bool,loading:um.default.bool,title:um.default.string,type:um.default.oneOf(["primary","default","delete","discard","edit","save"]),buttonType:um.default.string,form:um.default.string};var cD=Nrt;var mn=cD;u();u();var yr=ee(ke(),1),Lrt=ee(It(),1);var GLr={addVectorMap:yr.default.createElement("svg",{width:"20",height:"16",viewBox:"0 0 20 16",fill:"none",xmlns:"http://www.w3.org/2000/svg"},yr.default.createElement("path",{d:"M5.3888 13.0958C5.31376 12.9926 5.21482 12.9091 5.10047 12.8525C4.19363 12.4067 3.42983 11.7158 2.89568 10.8581C2.36152 10.0003 2.0784 9.01005 2.0784 7.99957C2.0784 6.9891 2.36152 5.99884 2.89568 5.14109C3.42983 4.28334 4.19363 3.59241 5.10047 3.14666C5.21477 3.09032 5.3137 3.00711 5.3888 2.90416L5.4063 2.87916C5.51654 2.73062 5.57378 2.54941 5.56886 2.3645C5.56394 2.17959 5.49715 2.00167 5.37917 1.85921C5.26118 1.71674 5.09883 1.61797 4.91808 1.57868C4.73732 1.53939 4.54861 1.56186 4.38214 1.64249C3.19133 2.22398 2.18778 3.12823 1.48579 4.25223C0.783811 5.37623 0.411621 6.67479 0.411621 7.99999C0.411621 9.32519 0.783811 10.6237 1.48579 11.7477C2.18778 12.8717 3.19133 13.776 4.38214 14.3575C4.54869 14.4376 4.73726 14.4596 4.9178 14.4201C5.09833 14.3805 5.26043 14.2817 5.37826 14.1393C5.4961 13.997 5.56288 13.8192 5.56796 13.6345C5.57304 13.4498 5.51613 13.2686 5.4063 13.12L5.3888 13.0958Z",fill:"currentColor"}),yr.default.createElement("path",{d:"M12.4946 0.5C11.0113 0.5 9.56122 0.939867 8.32785 1.76398C7.09449 2.58809 6.13319 3.75943 5.56554 5.12987C4.99788 6.50032 4.84935 8.00832 5.13874 9.46318C5.42813 10.918 6.14244 12.2544 7.19133 13.3033C8.24022 14.3522 9.5766 15.0665 11.0315 15.3559C12.4863 15.6453 13.9943 15.4968 15.3648 14.9291C16.7352 14.3614 17.9065 13.4001 18.7307 12.1668C19.5548 10.9334 19.9946 9.48336 19.9946 8C19.9924 6.01155 19.2015 4.10518 17.7955 2.69914C16.3895 1.29309 14.4831 0.502206 12.4946 0.5ZM12.4946 13.8333C11.3409 13.8333 10.2131 13.4912 9.25381 12.8502C8.29452 12.2093 7.54685 11.2982 7.10533 10.2323C6.66382 9.16642 6.5483 7.99353 6.77338 6.86197C6.99846 5.73042 7.55404 4.69102 8.36984 3.87521C9.18565 3.0594 10.225 2.50383 11.3566 2.27875C12.4882 2.05367 13.661 2.16919 14.727 2.6107C15.7929 3.05221 16.7039 3.79989 17.3449 4.75917C17.9858 5.71846 18.328 6.84628 18.328 8C18.3262 9.54655 17.7111 11.0293 16.6175 12.1228C15.5239 13.2164 14.0412 13.8316 12.4946 13.8333Z",fill:"currentColor"}),yr.default.createElement("path",{d:"M15.6321 6.9583H13.7446C13.6893 6.9583 13.6364 6.93635 13.5973 6.89728C13.5582 6.85821 13.5363 6.80522 13.5363 6.74997V4.86247C13.5363 4.5862 13.4265 4.32125 13.2312 4.1259C13.0358 3.93055 12.7709 3.8208 12.4946 3.8208C12.2183 3.8208 11.9534 3.93055 11.758 4.1259C11.5627 4.32125 11.4529 4.5862 11.4529 4.86247V6.74997C11.4529 6.80522 11.431 6.85821 11.3919 6.89728C11.3528 6.93635 11.2999 6.9583 11.2446 6.9583H9.3571C9.08083 6.9583 8.81588 7.06805 8.62053 7.2634C8.42518 7.45875 8.31543 7.7237 8.31543 7.99997C8.31543 8.27623 8.42518 8.54119 8.62053 8.73654C8.81588 8.93189 9.08083 9.04163 9.3571 9.04163H11.2446C11.2999 9.04163 11.3528 9.06358 11.3919 9.10265C11.431 9.14172 11.4529 9.19471 11.4529 9.24997V11.1366C11.4529 11.4129 11.5627 11.6779 11.758 11.8732C11.9534 12.0686 12.2183 12.1783 12.4946 12.1783C12.7709 12.1783 13.0358 12.0686 13.2312 11.8732C13.4265 11.6779 13.5363 11.4129 13.5363 11.1366V9.24997C13.5363 9.19471 13.5582 9.14172 13.5973 9.10265C13.6364 9.06358 13.6893 9.04163 13.7446 9.04163H15.6321C15.9084 9.04163 16.1733 8.93189 16.3687 8.73654C16.564 8.54119 16.6738 8.27623 16.6738 7.99997C16.6738 7.7237 16.564 7.45875 16.3687 7.2634C16.1733 7.06805 15.9084 6.9583 15.6321 6.9583Z",fill:"currentColor"})),uploadVectorMap:yr.default.createElement("svg",{width:"25",height:"24",viewBox:"0 0 25 24",fill:"none",xmlns:"http://www.w3.org/2000/svg"},yr.default.createElement("path",{d:"M17.6616 10.5C13.9366 10.5 10.9116 13.525 10.9116 17.25C10.9116 20.975 13.9366 24 17.6616 24C21.3866 24 24.4116 20.975 24.4116 17.25C24.4116 13.525 21.3866 10.5 17.6616 10.5ZM17.6616 12C20.5596 12 22.9116 14.352 22.9116 17.25C22.9116 20.148 20.5596 22.5 17.6616 22.5C14.7636 22.5 12.4116 20.148 12.4116 17.25C12.4116 14.352 14.7636 12 17.6616 12ZM8.66162 19.5H2.66162C2.25062 19.5 1.91162 19.161 1.91162 18.75V2.25C1.91162 1.839 2.25062 1.5 2.66162 1.5H13.2896C13.4886 1.5 13.6796 1.579 13.8206 1.719L16.6936 4.591C16.8346 4.731 16.9136 4.922 16.9136 5.121V8.25C16.9136 8.664 17.2496 9 17.6636 9C18.0776 9 18.4136 8.664 18.4136 8.25V5.121C18.4136 4.524 18.1756 3.951 17.7536 3.529L14.8806 0.658C14.4586 0.237 13.8856 0 13.2896 0H2.66162C1.42762 0 0.411621 1.016 0.411621 2.25V18.75C0.411621 19.984 1.42762 21 2.66162 21H8.66162C9.07562 21 9.41162 20.664 9.41162 20.25C9.41162 19.836 9.07562 19.5 8.66162 19.5ZM8.88162 6.53L10.6006 8.25L8.88162 9.97C8.58862 10.262 8.58862 10.738 8.88162 11.03C9.17362 11.323 9.64962 11.323 9.94162 11.03L12.1916 8.78C12.4846 8.487 12.4846 8.013 12.1916 7.72L9.94162 5.47C9.64962 5.177 9.17362 5.177 8.88162 5.47C8.58862 5.762 8.58862 6.238 8.88162 6.53ZM5.88162 5.47L3.63162 7.72C3.33862 8.013 3.33862 8.487 3.63162 8.78L5.88162 11.03C6.17362 11.323 6.64962 11.323 6.94162 11.03C7.23462 10.738 7.23462 10.262 6.94162 9.97L5.22262 8.25L6.94162 6.53C7.23462 6.238 7.23462 5.762 6.94162 5.47C6.64962 5.177 6.17362 5.177 5.88162 5.47Z",fill:"currentColor"}),yr.default.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M17.7167 13.6361C18.2138 13.6361 18.6167 14.0391 18.6167 14.5361V19.8171C18.6167 20.3141 18.2138 20.7171 17.7167 20.7171C17.2197 20.7171 16.8167 20.3141 16.8167 19.8171L16.8167 14.5361C16.8167 14.0391 17.2197 13.6361 17.7167 13.6361Z",fill:"currentColor"}),yr.default.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M21.2572 17.1766C21.2572 17.6736 20.8543 18.0766 20.3572 18.0766H15.0763C14.5792 18.0766 14.1763 17.6736 14.1763 17.1766C14.1763 16.6795 14.5792 16.2766 15.0763 16.2766L20.3572 16.2766C20.8543 16.2766 21.2572 16.6795 21.2572 17.1766Z",fill:"currentColor"})),edit:yr.default.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20"},yr.default.createElement("path",{d:"M16.667 9.573a.833.833 0 0 0-.834.834v7.083a.834.834 0 0 1-.833.833H2.5a.833.833 0 0 1-.833-.833V3.323A.833.833 0 0 1 2.5 2.49h8.333a.833.833 0 0 0 0-1.667H2.5a2.5 2.5 0 0 0-2.5 2.5V17.49a2.5 2.5 0 0 0 2.5 2.5H15a2.5 2.5 0 0 0 2.5-2.5v-7.083a.833.833 0 0 0-.833-.834ZM19.513.482a1.706 1.706 0 0 0-2.357 0l-.884.884a.417.417 0 0 0 0 .589l1.767 1.767a.417.417 0 0 0 .59 0l.884-.884a1.666 1.666 0 0 0 0-2.356Z"}),yr.default.createElement("path",{d:"m9.466 8.762 1.767 1.767a.417.417 0 0 0 .59 0l5.303-5.303a.417.417 0 0 0 0-.59l-1.769-1.769a.43.43 0 0 0-.589 0L9.466 8.172a.417.417 0 0 0 0 .59ZM8.624 9.363a.422.422 0 0 0-.303.25l-1.01 2.529a.416.416 0 0 0 .092.449.44.44 0 0 0 .45.092l2.525-1.01a.417.417 0 0 0 .14-.681L9 9.477a.417.417 0 0 0-.376-.114Z"})),"edit-inverse":yr.default.createElement("svg",{viewBox:"0 0 14 14",xmlns:"http://www.w3.org/2000/svg"},yr.default.createElement("path",{d:"M7.98408 8.41697C7.87252 8.52907 7.73909 8.61704 7.59208 8.67538L5.53 9.50197C5.31774 9.58487 5.08603 9.60464 4.86279 9.5589C4.63955 9.51315 4.4343 9.40384 4.27175 9.24413C4.11028 9.0827 3.99972 8.87744 3.95379 8.65377C3.90785 8.43011 3.92856 8.19789 4.01333 7.98588L4.83758 5.92497C4.89649 5.77794 4.9846 5.64439 5.09658 5.53238L8.53067 2.09772C8.55074 2.07732 8.56439 2.05149 8.56994 2.02342C8.57549 1.99535 8.57269 1.96627 8.5619 1.93977C8.5511 1.91327 8.53277 1.89052 8.50918 1.87432C8.48559 1.85812 8.45778 1.84919 8.42917 1.84863H1.81883C1.33645 1.84863 0.873821 2.04026 0.532724 2.38136C0.191627 2.72245 0 3.18508 0 3.66747V11.6971C-1.22907e-08 11.9359 0.0470497 12.1724 0.138462 12.393C0.229874 12.6136 0.363857 12.8141 0.532759 12.983C0.701661 13.1518 0.902173 13.2857 1.12284 13.3771C1.34351 13.4684 1.58001 13.5154 1.81883 13.5153H9.84842C10.0872 13.5154 10.3237 13.4684 10.5443 13.3771C10.765 13.2857 10.9654 13.1518 11.1343 12.9829C11.3031 12.8141 11.4371 12.6136 11.5284 12.393C11.6198 12.1723 11.6667 11.9358 11.6667 11.6971V5.08847C11.6666 5.05971 11.658 5.03161 11.642 5.0077C11.6261 4.98379 11.6033 4.96515 11.5768 4.95412C11.5502 4.94308 11.521 4.94014 11.4928 4.94568C11.4646 4.95121 11.4386 4.96497 11.4182 4.98522L7.98408 8.41697Z"}),yr.default.createElement("path",{d:"M10.8312 1.77357C10.7755 1.72081 10.7017 1.69141 10.625 1.69141C10.5483 1.69141 10.4745 1.72081 10.4188 1.77357L5.8612 6.33174C5.83328 6.35975 5.81127 6.39307 5.79645 6.42974L4.97162 8.49241C4.95035 8.54548 4.94514 8.60363 4.95666 8.65964C4.96817 8.71564 4.99589 8.76703 5.03637 8.80741C5.0775 8.84649 5.12878 8.87323 5.18437 8.88457C5.23997 8.89592 5.29763 8.89142 5.35078 8.87157L7.41287 8.04674C7.44959 8.03203 7.48293 8.01 7.51087 7.98199L12.069 3.42441C12.1237 3.36971 12.1544 3.29554 12.1544 3.2182C12.1544 3.14086 12.1237 3.06669 12.069 3.01199L10.8312 1.77357Z"}),yr.default.createElement("path",{d:"M13.513 1.98011C13.7317 1.76133 13.8546 1.46464 13.8546 1.15528C13.8546 0.845921 13.7317 0.549228 13.513 0.330445C13.2908 0.118342 12.9954 0 12.6882 0C12.381 0 12.0856 0.118342 11.8634 0.330445L11.2444 0.949362C11.2354 0.961013 11.2272 0.973295 11.2199 0.986112C11.1818 1.03444 11.1604 1.09377 11.1587 1.15528C11.1587 1.19365 11.1663 1.23164 11.181 1.26707C11.1957 1.30251 11.2173 1.33469 11.2444 1.36178L12.4834 2.59903C12.5324 2.64926 12.5983 2.67943 12.6683 2.68364C12.7383 2.68785 12.8074 2.66579 12.862 2.62178C12.8739 2.61508 12.8852 2.60747 12.8959 2.59903L13.513 1.98011Z"})),close:yr.default.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 30 30"},yr.default.createElement("path",{d:"M0 0h30v30H0z"}),yr.default.createElement("path",{stroke:"#fff",strokeWidth:"2",d:"M0-1h15.582",transform:"scale(.98773 1.01212) rotate(45 -7.565 16.188)"}),yr.default.createElement("path",{stroke:"#fff",strokeWidth:"2",d:"M0-1h15.582",transform:"matrix(-.69843 .71568 -.69843 -.71568 19.883 9)"})),add:yr.default.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 19 19"},yr.default.createElement("path",{d:"M.875 9A8.625 8.625 0 1 0 9.5.375 8.635 8.635 0 0 0 .875 9Zm3.75-.375a.75.75 0 0 1 .75-.75h2.813a.187.187 0 0 0 .187-.188V4.876a.75.75 0 0 1 .75-.75h.75a.75.75 0 0 1 .75.75v2.813a.188.188 0 0 0 .188.187h2.812a.75.75 0 0 1 .75.75v.75a.75.75 0 0 1-.75.75h-2.813a.188.188 0 0 0-.187.188v2.812a.75.75 0 0 1-.75.75h-.75a.75.75 0 0 1-.75-.75v-2.813a.188.188 0 0 0-.188-.187H5.376a.75.75 0 0 1-.75-.75v-.75Z"})),delete:yr.default.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 18 18"},yr.default.createElement("path",{d:"M14.354 6.748H3.103a.375.375 0 0 0-.375.375V16.5a1.5 1.5 0 0 0 1.5 1.5h9.001a1.5 1.5 0 0 0 1.5-1.5V7.123a.375.375 0 0 0-.375-.375Zm-6.938 8.627a.563.563 0 1 1-1.125 0V9.749a.563.563 0 1 1 1.125 0v5.626Zm3.75 0a.563.563 0 1 1-1.125 0V9.749a.563.563 0 0 1 1.125 0v5.626ZM15.337 1.912l-3.498.675a.188.188 0 0 1-.22-.15l-.178-.92A1.875 1.875 0 0 0 9.244.033l-3.68.714A1.875 1.875 0 0 0 4.08 2.945l.178.92a.187.187 0 0 1-.15.22l-3.498.676a.75.75 0 0 0-.596.878.774.774 0 0 0 .88.595l14.729-2.85a.75.75 0 1 0-.285-1.474v.002Zm-9.788.75a.375.375 0 0 1 .3-.44l3.683-.712a.375.375 0 0 1 .438.3l.179.922a.188.188 0 0 1-.15.22l-4.052.776a.187.187 0 0 1-.22-.15l-.178-.916Z"})),discard:yr.default.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 16 16"},yr.default.createElement("path",{d:"m5 5 4.125 4.125M11 5l-6 6"}),yr.default.createElement("path",{d:"M14.667 0H1.333A1.333 1.333 0 0 0 0 1.333v13.334A1.333 1.333 0 0 0 1.333 16h9.334c.177 0 .346-.07.471-.195l4.667-4.667a.667.667 0 0 0 .195-.471V1.333A1.334 1.334 0 0 0 14.667 0ZM1.333 1.667a.333.333 0 0 1 .334-.334h12.666a.333.333 0 0 1 .334.334V10a.333.333 0 0 1-.334.333h-2.666a1.333 1.333 0 0 0-1.334 1.334v2.666a.333.333 0 0 1-.333.334H1.667a.333.333 0 0 1-.334-.334V1.667Z"})),save:yr.default.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 16 16"},yr.default.createElement("path",{d:"M12.0122 5.20332C12.0936 5.10023 12.154 4.98212 12.1897 4.85572C12.2255 4.72932 12.236 4.59711 12.2207 4.46665C12.2054 4.33618 12.1645 4.21001 12.1004 4.09534C12.0364 3.98067 11.9503 3.87974 11.8472 3.79832C11.7441 3.7169 11.626 3.65658 11.4996 3.62081C11.3732 3.58504 11.241 3.57451 11.1106 3.58984C10.9801 3.60516 10.8539 3.64603 10.7392 3.71011C10.6246 3.77419 10.5236 3.86023 10.4422 3.96332L6.71356 8.68665C6.69905 8.70522 6.68075 8.72048 6.65989 8.73143C6.63902 8.74238 6.61606 8.74876 6.59254 8.75015C6.56902 8.75153 6.54547 8.7479 6.52346 8.73948C6.50145 8.73106 6.48149 8.71805 6.46489 8.70132L5.04823 7.28465C4.85963 7.1025 4.60702 7.0017 4.34483 7.00398C4.08263 7.00626 3.83182 7.11143 3.64641 7.29684C3.461 7.48224 3.35583 7.73306 3.35355 7.99525C3.35128 8.25745 3.45207 8.51005 3.63423 8.69865L5.44823 10.5133C5.61595 10.6772 5.81604 10.8042 6.0357 10.8863C6.25536 10.9684 6.48974 11.0037 6.72383 10.99C6.95792 10.9762 7.18656 10.9137 7.3951 10.8065C7.60365 10.6993 7.7875 10.5497 7.93489 10.3673L12.0122 5.20332Z"}),yr.default.createElement("path",{d:"M14.6667 0H1.33333C0.979711 0 0.640573 0.140476 0.390524 0.390524C0.140476 0.640573 0 0.979711 0 1.33333L0 14.6667C0 15.0203 0.140476 15.3594 0.390524 15.6095C0.640573 15.8595 0.979711 16 1.33333 16H10.6667C10.8435 16 11.013 15.9297 11.138 15.8047L15.8047 11.138C15.9297 11.013 16 10.8435 16 10.6667V1.33333C16 0.979711 15.8595 0.640573 15.6095 0.390524C15.3594 0.140476 15.0203 0 14.6667 0ZM1.33333 1.66667C1.33333 1.57826 1.36845 1.49348 1.43096 1.43096C1.49348 1.36845 1.57826 1.33333 1.66667 1.33333H14.3333C14.4217 1.33333 14.5065 1.36845 14.569 1.43096C14.6315 1.49348 14.6667 1.57826 14.6667 1.66667V10C14.6667 10.0884 14.6315 10.1732 14.569 10.2357C14.5065 10.2982 14.4217 10.3333 14.3333 10.3333H11.6667C11.313 10.3333 10.9739 10.4738 10.7239 10.7239C10.4738 10.9739 10.3333 11.313 10.3333 11.6667V14.3333C10.3333 14.4217 10.2982 14.5065 10.2357 14.569C10.1732 14.6315 10.0884 14.6667 10 14.6667H1.66667C1.57826 14.6667 1.49348 14.6315 1.43096 14.569C1.36845 14.5065 1.33333 14.4217 1.33333 14.3333V1.66667Z"})),caret:yr.default.createElement("svg",{viewBox:"0 0 28 14",fill:"none",xmlns:"http://www.w3.org/2000/svg"},yr.default.createElement("path",{d:"M12.9393 10.0607L14 11.1213L15.0607 10.0607L21.0607 4.06066L23.6213 1.5H20H8H4.37868L6.93934 4.06066L12.9393 10.0607Z",fill:"#00655A",stroke:"white",strokeWidth:"3"})),"export-geojson":yr.default.createElement("svg",{viewBox:"0 0 21 25",fill:"none",xmlns:"http://www.w3.org/2000/svg"},yr.default.createElement("path",{d:"M10.4136 1V16",stroke:"#666666",strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round"}),yr.default.createElement("path",{d:"M5.91357 11.5L10.4136 16L14.9136 11.5",stroke:"#666666",strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round"}),yr.default.createElement("path",{d:"M14.1636 4.74902H16.4116C17.2073 4.74902 17.9703 5.06509 18.5329 5.6277C19.0956 6.19031 19.4116 6.95337 19.4116 7.74902V20.499C19.4116 21.2947 19.0956 22.0577 18.5329 22.6203C17.9703 23.183 17.2073 23.499 16.4116 23.499H4.41162C3.61597 23.499 2.85291 23.183 2.2903 22.6203C1.72769 22.0577 1.41162 21.2947 1.41162 20.499V7.74902C1.41162 6.95337 1.72769 6.19031 2.2903 5.6277C2.85291 5.06509 3.61597 4.74902 4.41162 4.74902H6.66162",stroke:"#666666",strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round"})),"user-roles":yr.default.createElement("svg",{viewBox:"0 0 17 16",fill:"none",xmlns:"http://www.w3.org/2000/svg"},yr.default.createElement("g",{clipPath:"url(#clip0_1491_11619)"},yr.default.createElement("path",{d:"M5.66626 2.74115C6.15948 3.25291 6.75085 3.65994 7.40499 3.9379C8.05913 4.21586 8.76261 4.35905 9.47336 4.35889C10.1932 4.3591 10.9056 4.2125 11.5668 3.92806",stroke:"currentColor",strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round"}),yr.default.createElement("path",{d:"M8.41156 7.54465C10.171 7.54465 11.5973 6.11835 11.5973 4.35892C11.5973 2.59949 10.171 1.17319 8.41156 1.17319C6.65213 1.17319 5.22583 2.59949 5.22583 4.35892C5.22583 6.11835 6.65213 7.54465 8.41156 7.54465Z",stroke:"currentColor",strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round"}),yr.default.createElement("path",{d:"M2.49536 14.8263C2.49536 13.2572 3.11869 11.7524 4.22822 10.6428C5.33776 9.5333 6.8426 8.90997 8.41172 8.90997C9.98084 8.90997 11.4857 9.5333 12.5952 10.6428C13.7048 11.7524 14.3281 13.2572 14.3281 14.8263",stroke:"currentColor",strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round"})),yr.default.createElement("defs",null,yr.default.createElement("clipPath",{id:"clip0_1491_11619"},yr.default.createElement("rect",{width:"16",height:"16",fill:"currentColor",transform:"translate(0.411621 -0.000244141)"})))),filter:yr.default.createElement("svg",{viewBox:"0 0 22 24",fill:"none",xmlns:"http://www.w3.org/2000/svg"},yr.default.createElement("path",{d:"M10.75 9.75C16.1348 9.75 20.5 7.73528 20.5 5.25C20.5 2.76472 16.1348 0.75 10.75 0.75C5.36522 0.75 1 2.76472 1 5.25C1 7.73528 5.36522 9.75 10.75 9.75Z",strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round"}),yr.default.createElement("path",{d:"M1 5.25C1.00123 7.44343 1.74225 9.57232 3.10325 11.2924C4.46425 13.0126 6.36565 14.2233 8.5 14.729V21C8.5 21.5967 8.73705 22.169 9.15901 22.591C9.58097 23.0129 10.1533 23.25 10.75 23.25C11.3467 23.25 11.919 23.0129 12.341 22.591C12.7629 22.169 13 21.5967 13 21V14.729C15.1343 14.2233 17.0358 13.0126 18.3967 11.2924C19.7577 9.57232 20.4988 7.44343 20.5 5.25",strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round"})),"metadata-panel":yr.default.createElement("svg",{viewBox:"0 0 17 18",fill:"none",xmlns:"http://www.w3.org/2000/svg"},yr.default.createElement("g",{clipPath:"url(#clip0_1419_7239)"},yr.default.createElement("path",{d:"M12.2444 13.3538C12.7967 13.3538 13.2444 12.906 13.2444 12.3538C13.2444 11.8015 12.7967 11.3538 12.2444 11.3538C11.6921 11.3538 11.2444 11.8015 11.2444 12.3538C11.2444 12.906 11.6921 13.3538 12.2444 13.3538Z",fill:"currentColor"}),yr.default.createElement("path",{d:"M16.0896 11.4357C16.263 11.2498 16.3723 11.0132 16.4013 10.7606C16.4303 10.508 16.3774 10.2528 16.2506 10.0324C16.1237 9.8121 15.9296 9.63826 15.6966 9.53649C15.4636 9.43471 15.2041 9.41037 14.9562 9.46705L14.0155 9.68438C13.9412 9.70131 13.8631 9.6894 13.7972 9.65104C13.7312 9.61268 13.6823 9.55074 13.6602 9.47771L13.3775 8.54905C13.3044 8.30537 13.1546 8.09176 12.9505 7.93991C12.7463 7.78806 12.4986 7.70605 12.2442 7.70605C11.9898 7.70605 11.7421 7.78806 11.538 7.93991C11.3338 8.09176 11.1841 8.30537 11.1109 8.54905L10.8282 9.47771C10.806 9.55065 10.757 9.6125 10.6911 9.65083C10.6252 9.68916 10.5473 9.70115 10.4729 9.68438L9.53288 9.46638C9.28515 9.40991 9.02585 9.43436 8.79304 9.53613C8.56023 9.6379 8.36617 9.81162 8.23938 10.0318C8.11258 10.252 8.05971 10.507 8.08854 10.7595C8.11737 11.0119 8.22637 11.2485 8.39955 11.4344L9.05822 12.145C9.11026 12.2019 9.13913 12.2763 9.13913 12.3534C9.13913 12.4305 9.11026 12.5048 9.05822 12.5617L8.39955 13.271C8.22608 13.4569 8.11682 13.6936 8.08783 13.9461C8.05884 14.1987 8.11165 14.454 8.2385 14.6743C8.36535 14.8947 8.55955 15.0685 8.79254 15.1703C9.02553 15.272 9.28503 15.2964 9.53288 15.2397L10.4735 15.0224C10.548 15.0058 10.626 15.018 10.6919 15.0564C10.7577 15.0948 10.8067 15.1567 10.8289 15.2297L11.1115 16.157C11.1843 16.4011 11.334 16.6151 11.5382 16.7673C11.7423 16.9195 11.9902 17.0017 12.2449 17.0017C12.4996 17.0017 12.7474 16.9195 12.9516 16.7673C13.1558 16.6151 13.3054 16.4011 13.3782 16.157L13.6609 15.229C13.6827 15.1558 13.7315 15.0936 13.7975 15.0551C13.8635 15.0166 13.9417 15.0046 14.0162 15.0217L14.9569 15.239C15.2046 15.2955 15.4639 15.2711 15.6967 15.1693C15.9295 15.0675 16.1236 14.8938 16.2504 14.6736C16.3772 14.4534 16.4301 14.1984 16.4012 13.946C16.3724 13.6935 16.2634 13.457 16.0902 13.271L15.4316 12.561C15.3795 12.5041 15.3506 12.4298 15.3506 12.3527C15.3506 12.2756 15.3795 12.2013 15.4316 12.1444L16.0896 11.4357ZM12.2442 14.3537C11.8487 14.3537 11.462 14.2364 11.1331 14.0167C10.8042 13.7969 10.5478 13.4845 10.3965 13.1191C10.2451 12.7536 10.2055 12.3515 10.2826 11.9635C10.3598 11.5756 10.5503 11.2192 10.83 10.9395C11.1097 10.6598 11.4661 10.4693 11.854 10.3921C12.242 10.315 12.6441 10.3546 13.0096 10.506C13.375 10.6573 13.6874 10.9137 13.9072 11.2426C14.1269 11.5715 14.2442 11.9581 14.2442 12.3537C14.2442 12.8841 14.0335 13.3929 13.6584 13.7679C13.2834 14.143 12.7746 14.3537 12.2442 14.3537Z",fill:"currentColor"}),yr.default.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M7.09017 13.782C7.0974 13.8043 7.09994 13.8278 7.09762 13.8511C7.06412 14.1643 7.09939 14.481 7.20095 14.7791C7.2097 14.8042 7.2123 14.831 7.20855 14.8572C7.20479 14.8835 7.19479 14.9085 7.17938 14.9301C7.16396 14.9517 7.14359 14.9693 7.11997 14.9815C7.09635 14.9936 7.07017 14.9999 7.04362 14.9998H2.41162C1.88119 14.9998 1.37248 14.789 0.997407 14.414C0.622335 14.0389 0.411621 13.5302 0.411621 12.9998V3.99976C0.411621 3.46932 0.622335 2.96062 0.997407 2.58554C1.37248 2.21047 1.88119 1.99976 2.41162 1.99976H11.745C12.2754 1.99976 12.7841 2.21047 13.1592 2.58554C13.5342 2.96062 13.745 3.46932 13.745 3.99976V6.95976C13.745 6.99007 13.7368 7.01983 13.7212 7.0458C13.7056 7.07177 13.6831 7.09297 13.6563 7.10709C13.6293 7.12109 13.599 7.12756 13.5686 7.1258C13.5382 7.12404 13.5088 7.11412 13.4836 7.09709C13.4779 7.09315 13.4721 7.08924 13.4664 7.08536C13.1685 6.74277 12.7022 6.52222 12.178 6.52222C11.6135 6.52222 11.1161 6.77796 10.824 7.16642H9.74495C9.70075 7.16642 9.65836 7.18398 9.6271 7.21524C9.59585 7.24649 9.57829 7.28889 9.57829 7.33309V8.28442C9.57831 8.30728 9.57364 8.32989 9.56458 8.35087C9.55553 8.37186 9.54226 8.39076 9.52562 8.40642C9.50904 8.42206 9.48941 8.4341 9.46795 8.44178C9.4465 8.44947 9.42369 8.45264 9.40095 8.45109C9.19328 8.43777 8.98476 8.45393 8.78162 8.49909C8.75723 8.50469 8.73189 8.50466 8.70751 8.499C8.68314 8.49334 8.66038 8.4822 8.64095 8.46642C8.62099 8.45049 8.60495 8.43018 8.59409 8.40706C8.58322 8.38394 8.57782 8.35863 8.57829 8.33309V7.33309C8.57829 7.28889 8.56073 7.24649 8.52947 7.21524C8.49822 7.18398 8.45582 7.16642 8.41162 7.16642H5.74495C5.70075 7.16642 5.65836 7.18398 5.6271 7.21524C5.59585 7.24649 5.57829 7.28889 5.57829 7.33309V9.66842C5.57829 9.71263 5.59585 9.75502 5.6271 9.78627C5.65836 9.81753 5.70075 9.83509 5.74495 9.83509H6.99562C7.02151 9.83498 7.04707 9.84096 7.07023 9.85254C7.09339 9.86412 7.1135 9.88098 7.12895 9.90176C7.1445 9.92219 7.15511 9.94593 7.15997 9.97114C7.16483 9.99635 7.1638 10.0223 7.15695 10.0471C7.10109 10.2487 7.07459 10.4573 7.07829 10.6664C7.07847 10.7102 7.06133 10.7523 7.03061 10.7835C6.99989 10.8147 6.95808 10.8326 6.91429 10.8331H5.74495C5.70075 10.8331 5.65836 10.8506 5.6271 10.8819C5.59585 10.9132 5.57829 10.9556 5.57829 10.9998V13.4998C5.57829 13.544 5.59585 13.5864 5.6271 13.6176C5.65836 13.6489 5.70075 13.6664 5.74495 13.6664H6.93162C6.95502 13.6664 6.97815 13.6714 6.99951 13.6809C7.02088 13.6904 7.03999 13.7043 7.05562 13.7218C7.07118 13.7392 7.08294 13.7598 7.09017 13.782ZM4.52881 9.78427C4.56006 9.75302 4.57762 9.71063 4.57762 9.66642L4.57829 7.33309C4.57829 7.28889 4.56073 7.24649 4.52947 7.21524C4.49822 7.18398 4.45582 7.16642 4.41162 7.16642H1.91162C1.86742 7.16642 1.82503 7.18398 1.79377 7.21524C1.76251 7.24649 1.74495 7.28889 1.74495 7.33309V9.66642C1.74495 9.71051 1.76242 9.7528 1.79353 9.78404C1.82465 9.81528 1.86687 9.83291 1.91095 9.83309H4.41095C4.45516 9.83309 4.49755 9.81553 4.52881 9.78427ZM5.68097 6.15393C5.70127 6.16226 5.72301 6.16651 5.74495 6.16642H8.41162C8.45582 6.16642 8.49822 6.14886 8.52947 6.11761C8.56073 6.08635 8.57829 6.04396 8.57829 5.99976V3.49976C8.57829 3.45555 8.56073 3.41316 8.52947 3.3819C8.49822 3.35065 8.45582 3.33309 8.41162 3.33309H5.74495C5.72301 3.333 5.70127 3.33725 5.68097 3.34558C5.66067 3.35392 5.64222 3.36618 5.62667 3.38167C5.61112 3.39715 5.59879 3.41556 5.59037 3.43582C5.58195 3.45609 5.57762 3.47781 5.57762 3.49976V5.99976C5.57762 6.0217 5.58195 6.04343 5.59037 6.06369C5.59879 6.08396 5.61112 6.10236 5.62667 6.11784C5.64222 6.13333 5.66067 6.14559 5.68097 6.15393ZM12.2164 3.52835C12.0913 3.40333 11.9218 3.33309 11.745 3.33309H9.74495C9.70075 3.33309 9.65836 3.35065 9.6271 3.3819C9.59585 3.41316 9.57829 3.45555 9.57829 3.49976V5.99976C9.57829 6.04396 9.59585 6.08635 9.6271 6.11761C9.65836 6.14886 9.70075 6.16642 9.74495 6.16642H12.245C12.2892 6.16642 12.3315 6.14886 12.3628 6.11761C12.3941 6.08635 12.4116 6.04396 12.4116 5.99976V3.99976C12.4116 3.82294 12.3414 3.65338 12.2164 3.52835ZM4.41162 3.33309H2.41162C2.23481 3.33309 2.06524 3.40333 1.94022 3.52835C1.81519 3.65338 1.74495 3.82294 1.74495 3.99976V5.99976C1.74495 6.04384 1.76242 6.08613 1.79353 6.11737C1.82465 6.14861 1.86687 6.16625 1.91095 6.16642H4.41162C4.45582 6.16642 4.49822 6.14886 4.52947 6.11761C4.56073 6.08635 4.57829 6.04396 4.57829 5.99976V3.49976C4.57829 3.45555 4.56073 3.41316 4.52947 3.3819C4.49822 3.35065 4.45582 3.33309 4.41162 3.33309ZM1.74495 10.9998V12.9998C1.74495 13.1766 1.81519 13.3461 1.94022 13.4712C2.06524 13.5962 2.23481 13.6664 2.41162 13.6664H4.41162C4.45582 13.6664 4.49822 13.6489 4.52947 13.6176C4.56073 13.5864 4.57829 13.544 4.57829 13.4998V10.9998C4.57829 10.9556 4.56073 10.9132 4.52947 10.8819C4.49822 10.8506 4.45582 10.8331 4.41162 10.8331H1.91162C1.86742 10.8331 1.82503 10.8506 1.79377 10.8819C1.76251 10.9132 1.74495 10.9556 1.74495 10.9998Z",fill:"currentColor"})),yr.default.createElement("defs",null,yr.default.createElement("clipPath",{id:"clip0_1419_7239"},yr.default.createElement("rect",{width:"16",height:"18",fill:"currentColor",transform:"translate(0.411621 -0.000244141)"})))),clock:yr.default.createElement("svg",{viewBox:"0 0 18 15",fill:"none",xmlns:"http://www.w3.org/2000/svg"},yr.default.createElement("path",{d:"M5.71093 8.93449L3.56128 6.79363L1.41162 8.93449M3.42462 7.6044C3.46047 9.22172 4.09697 10.7684 5.21112 11.9456C6.32527 13.1228 7.838 13.847 9.45702 13.9782C11.076 14.1094 12.6864 13.6383 13.977 12.656C15.2676 11.6736 16.1468 10.2498 16.4447 8.6595C16.7427 7.06923 16.4382 5.42542 15.5901 4.04569C14.742 2.66597 13.4105 1.64826 11.8529 1.18921C10.2953 0.730155 8.62218 0.862343 7.15674 1.56023",strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round",stroke:"currentColor"}),yr.default.createElement("path",{d:"M9.04295 8.08988L10.7639 5.10907",strokeWidth:"1.5",strokeLinecap:"round",stroke:"currentColor"}),yr.default.createElement("path",{d:"M9.04288 8.0901L12.0237 9.81107",strokeWidth:"1.5",strokeLinecap:"round",stroke:"currentColor"})),"image-placeholder":yr.default.createElement("svg",{viewBox:"0 0 66 66",fill:"none",xmlns:"http://www.w3.org/2000/svg"},yr.default.createElement("path",{d:"M59.7357 1.99231H14.2691C11.9863 1.99231 10.1357 3.84287 10.1357 6.12564V51.5923C10.1357 53.8751 11.9863 55.7256 14.2691 55.7256H59.7357C62.0185 55.7256 63.8691 53.8751 63.8691 51.5923V6.12564C63.8691 3.84287 62.0185 1.99231 59.7357 1.99231Z",stroke:"#cccccc",strokeWidth:"3",strokeLinecap:"round",strokeLinejoin:"round"}),yr.default.createElement("path",{d:"M55.6025 63.9924H6.00247C4.90625 63.9924 3.85492 63.5569 3.07977 62.7817C2.30462 62.0066 1.86914 60.9553 1.86914 59.859V10.259",stroke:"#cccccc",strokeWidth:"3",strokeLinecap:"round",strokeLinejoin:"round"}),yr.default.createElement("path",{d:"M23.5662 18.5256C23.362 18.5262 23.1625 18.5872 22.9929 18.7011C22.8233 18.815 22.6913 18.9766 22.6135 19.1654C22.5357 19.3543 22.5157 19.562 22.5558 19.7622C22.596 19.9625 22.6947 20.1464 22.8393 20.2906C22.9839 20.4349 23.168 20.533 23.3684 20.5726C23.5688 20.6123 23.7764 20.5917 23.965 20.5134C24.1537 20.4351 24.3149 20.3026 24.4284 20.1328C24.5418 19.9629 24.6023 19.7632 24.6023 19.559C24.6023 19.2849 24.4934 19.0221 24.2997 18.8283C24.1059 18.6345 23.843 18.5256 23.569 18.5256",stroke:"#cccccc",strokeWidth:"3",strokeLinecap:"round",strokeLinejoin:"round"}),yr.default.createElement("path",{d:"M55.6022 43.3257L44.9382 27.2443C44.7512 26.9648 44.4986 26.7353 44.2026 26.5757C43.9066 26.4161 43.5761 26.3313 43.2398 26.3286C42.9036 26.3258 42.5717 26.4053 42.2732 26.5601C41.9746 26.7149 41.7184 26.9403 41.5269 27.2167L36.0295 35.07L32.6209 32.3448C32.3972 32.1661 32.1387 32.0359 31.862 31.9624C31.5853 31.8889 31.2963 31.8736 31.0134 31.9177C30.7305 31.9617 30.4598 32.0641 30.2186 32.2182C29.9773 32.3724 29.7707 32.575 29.6118 32.8132L22.5962 43.3257H55.6022Z",stroke:"#cccccc",strokeWidth:"3",strokeLinecap:"round",strokeLinejoin:"round"})),[Vu.POINT]:yr.default.createElement("svg",{viewBox:"0 0 10 13",fill:"none",xmlns:"http://www.w3.org/2000/svg"},yr.default.createElement("path",{d:"M5 0C3.67439 0.001577 2.40351 0.54425 1.46616 1.50897C0.528809 2.47369 0.00153226 3.78169 0 5.14601C0 8.69242 3.44105 11.9106 4.49526 12.8125C4.637 12.9337 4.81547 13 4.99974 13C5.18401 13 5.36247 12.9337 5.50421 12.8125C6.55684 11.9106 10 8.69134 10 5.14547C9.99833 3.78124 9.47099 2.47339 8.53366 1.50878C7.59632 0.544176 6.32552 0.00157672 5 0ZM5 7.85443C4.47952 7.85443 3.97073 7.69559 3.53797 7.39798C3.10521 7.10037 2.76792 6.67738 2.56874 6.18248C2.36956 5.68758 2.31745 5.143 2.41899 4.61762C2.52053 4.09224 2.77116 3.60964 3.13919 3.23086C3.50723 2.85208 3.97613 2.59413 4.4866 2.48962C4.99708 2.38512 5.5262 2.43875 6.00706 2.64375C6.48792 2.84874 6.89892 3.19589 7.18808 3.64129C7.47724 4.08669 7.63158 4.61033 7.63158 5.14601C7.63158 5.50168 7.56351 5.85388 7.43126 6.18248C7.29901 6.51108 7.10517 6.80965 6.86081 7.06115C6.61644 7.31265 6.32634 7.51216 6.00706 7.64827C5.68778 7.78438 5.34558 7.85443 5 7.85443Z",fill:"#999999"})),[Vu.LINE_STRING]:yr.default.createElement("svg",{viewBox:"0 0 12 12",fill:"none",xmlns:"http://www.w3.org/2000/svg"},yr.default.createElement("path",{d:"M10 2L2 10",stroke:"#999999",strokeWidth:"1.5"}),yr.default.createElement("circle",{cx:"2",cy:"10",r:"2",fill:"#999999"}),yr.default.createElement("circle",{cx:"10",cy:"2",r:"2",fill:"#999999"})),[Vu.POLYGON]:yr.default.createElement("svg",{viewBox:"0 0 13 14",fill:"none",xmlns:"http://www.w3.org/2000/svg"},yr.default.createElement("path",{d:"M1.50439 12.282L4.13685 5.51279L10.53 2.50427L9.77783 7.39312L9.0257 11.5298L1.50439 12.282Z",stroke:"#999999",strokeWidth:"1.5"}),yr.default.createElement("circle",{cx:"11",cy:"2",r:"2",fill:"#999999"}),yr.default.createElement("circle",{cx:"9",cy:"11",r:"2",fill:"#999999"}),yr.default.createElement("path",{d:"M4 12C4 13.1046 3.10457 14 2 14C0.89543 14 0 13.1046 0 12C0 10.8954 0.89543 10 2 10C3.10457 10 4 10.8954 4 12Z",fill:"#999999"}),yr.default.createElement("path",{d:"M6 5C6 6.10457 5.10457 7 4 7C2.89543 7 2 6.10457 2 5C2 3.89543 2.89543 3 4 3C5.10457 3 6 3.89543 6 5Z",fill:"#999999"}))},krt=({name:e})=>{var t;return(t=GLr[e])!=null?t:""};krt.propTypes={name:Lrt.default.string.isRequired};var Rrt=krt;var Hr=Rrt;var jrt=({extraButton:e,isEditAllowed:t=!0,title:r,onCloseClick:n,onEditClick:o})=>{let i=(0,Yd.useMemo)(()=>!Me(o),[o]);return Yd.default.createElement("div",{className:"geojson-panel-header-root"},Yd.default.createElement("div",{className:"header-buttons"},Me(e)&&e,!i&&Yd.default.createElement(mn,{disabled:!t,className:"edit-button",onClick:o,type:"edit"},Yd.default.createElement(Hr,{name:"edit"})),Yd.default.createElement(mn,{className:"close-button",onClick:n},Yd.default.createElement(Hr,{name:"close"}))),Yd.default.createElement("div",{className:"header-info"},Yd.default.createElement("span",{className:"header-title"},r)))};jrt.propTypes={extraButton:MT.default.node,isEditAllowed:MT.default.bool,title:MT.default.string.isRequired,onCloseClick:MT.default.func.isRequired,onEditClick:MT.default.func};var qrt=jrt;var Cf=qrt;u();u();var $Lr=ee(ke(),1),WLr=ee(xa(),1),Fuo=ee(Yte(),1);u();var Yse=ee(ke(),1);u();u();var Zse=ee(ke(),1);u();var ZF=ee(ke(),1);u();var Kse=ee(ke(),1);var cm=mr;var tv="vk2-admin",pD="vk2-editor",KF="owner",zrt="editor",Xse=()=>cm.getUserRole()===tv,Frt=()=>cm.getUserRole()===tv,Urt=()=>cm.getUserRole()===tv,XF=()=>{let e=cm.getUserRole();return e===tv||e===pD},Brt=e=>{if(!Me(e.getMetadata(Ue.vectorMapId)))return!0;let r=e.getMetadata(Ue.userRole),n=cm.getUserRole();return n===tv?!0:n===pD?r===zrt||r===KF:!1},JF=e=>{if(e===null)return!0;let{type:t,layerRole:r,id:n}=e;if(t===Ka.LOCAL)return!0;let i=cm.getUserRole();return i===tv?!0:i===pD?r===KF||!Me(n):!1},Vrt=e=>{if(e===null)return!0;let{layerRole:t,id:r}=e,n=cm.getUserRole();return n===tv?!0:n===pD?(t===zrt||t===KF)&&Me(r):!1},fD=e=>{if(e===null)return!0;let{id:t}=e;return!!(cm.getUserRole()===tv&&Me(t))},dD=e=>{if(e===null)return!0;let{layerRole:t,id:r}=e,n=cm.getUserRole();return n===tv&&Me(r)?!0:n===pD?t===KF&&Me(r):!1};u();u();u();var vi=ee(ke(),1),gm=ee(It(),1);u();u();u();function mu(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}u();function Grt(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,D6(n.key),n)}}function gu(e,t,r){return t&&Grt(e.prototype,t),r&&Grt(e,r),Object.defineProperty(e,"prototype",{writable:!1}),e}u();function vu(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&WS(e,t)}u();u();function Zd(e){return Zd=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},Zd(e)}u();function Jse(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(t){}return(Jse=function(){return!!e})()}u();function Hrt(e,t){if(t&&(No(t)=="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return Fn(e)}function yu(e){var t=Jse();return function(){var r,n=Zd(e);if(t){var o=Zd(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return Hrt(this,r)}}var ule=ee(ke());u();var Qse={},YLr=[],ZLr=function(t){YLr.push(t)};function KLr(e,t){if(0)var r}function XLr(e,t){if(0)var r}function JLr(){Qse={}}function $rt(e,t,r){!t&&!Qse[r]&&(e(!1,r),Qse[r]=!0)}function QF(e,t){$rt(KLr,e,t)}function QLr(e,t){$rt(XLr,e,t)}QF.preMessage=ZLr;QF.resetWarned=JLr;QF.noteOnce=QLr;var pm=QF;u();var Wrt=ee(ke()),e3r=function(t){var r,n,o=t.className,i=t.included,a=t.vertical,c=t.style,h=t.length,m=t.offset,y=t.reverse;h<0&&(y=!y,h=Math.abs(h),m=100-m);var w=a?(r={},Zt(r,y?"top":"bottom","".concat(m,"%")),Zt(r,y?"bottom":"top","auto"),Zt(r,"height","".concat(h,"%")),r):(n={},Zt(n,y?"right":"left","".concat(m,"%")),Zt(n,y?"left":"right","auto"),Zt(n,"width","".concat(h,"%")),n),E=nr(nr({},c),w);return i?Wrt.default.createElement("div",{className:o,style:E}):null},e7=e3r;u();u();function Zu(e,t){if(e==null)return{};var r,n,o=HS(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(n=0;n<i.length;n++)r=i[n],t.indexOf(r)===-1&&{}.propertyIsEnumerable.call(e,r)&&(o[r]=e[r])}return o}u();u();u();function hD(e,t){(t==null||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}function Yrt(e){if(Array.isArray(e))return hD(e)}u();function ele(e){if(typeof Symbol!="undefined"&&e[Symbol.iterator]!=null||e["@@iterator"]!=null)return Array.from(e)}u();function mD(e,t){if(e){if(typeof e=="string")return hD(e,t);var r={}.toString.call(e).slice(8,-1);return r==="Object"&&e.constructor&&(r=e.constructor.name),r==="Map"||r==="Set"?Array.from(e):r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?hD(e,t):void 0}}u();function Zrt(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Af(e){return Yrt(e)||ele(e)||mD(e)||Zrt()}u();u();function Krt(e,t){for(;!{}.hasOwnProperty.call(e,t)&&(e=Zd(e))!==null;);return e}function CT(){return CT=typeof Reflect!="undefined"&&Reflect.get?Reflect.get.bind():function(e,t,r){var n=Krt(e,t);if(n){var o=Object.getOwnPropertyDescriptor(n,t);return o.get?o.get.call(arguments.length<3?e:r):o.value}},CT.apply(null,arguments)}var OT=ee(ke());u();var tle=ee(xa());function Ku(e,t,r,n){var o=tle.default.unstable_batchedUpdates?function(a){tle.default.unstable_batchedUpdates(r,a)}:r;return e!=null&&e.addEventListener&&e.addEventListener(t,o,n),{remove:function(){e!=null&&e.removeEventListener&&e.removeEventListener(t,o,n)}}}var int=ee(ko());u();var rle=ee(ke()),Xrt=ee(ko());var t3r=function(t,r,n,o,i,a){pm(n?o>0:!0,"`Slider[step]` should be a positive number in order to make Slider[dots] work.");var c=Object.keys(r).map(parseFloat).sort(function(m,y){return m-y});if(n&&o)for(var h=i;h<=a;h+=o)c.indexOf(h)===-1&&c.push(h);return c},r3r=function(t){var r=t.prefixCls,n=t.vertical,o=t.reverse,i=t.marks,a=t.dots,c=t.step,h=t.included,m=t.lowerBound,y=t.upperBound,w=t.max,E=t.min,A=t.dotStyle,P=t.activeDotStyle,j=w-E,D=t3r(n,i,a,c,E,w).map(function(L){var z,B="".concat(Math.abs(L-E)/j*100,"%"),G=!h&&L===y||h&&L<=y&&L>=m,Z=n?nr(nr({},A),{},Zt({},o?"top":"bottom",B)):nr(nr({},A),{},Zt({},o?"right":"left",B));G&&(Z=nr(nr({},Z),P));var K=(0,Xrt.default)((z={},Zt(z,"".concat(r,"-dot"),!0),Zt(z,"".concat(r,"-dot-active"),G),Zt(z,"".concat(r,"-dot-reverse"),o),z));return rle.default.createElement("span",{className:K,style:Z,key:L})});return rle.default.createElement("div",{className:"".concat(r,"-step")},D)},Jrt=r3r;u();var t7=ee(ke()),Qrt=ee(ko()),n3r=function(t){var r=t.className,n=t.vertical,o=t.reverse,i=t.marks,a=t.included,c=t.upperBound,h=t.lowerBound,m=t.max,y=t.min,w=t.onClickLabel,E=Object.keys(i),A=m-y,P=E.map(parseFloat).sort(function(j,D){return j-D}).map(function(j){var D,L=i[j],z=No(L)==="object"&&!t7.default.isValidElement(L),B=z?L.label:L;if(!B&&B!==0)return null;var G=!a&&j===c||a&&j<=c&&j>=h,Z=(0,Qrt.default)((D={},Zt(D,"".concat(r,"-text"),!0),Zt(D,"".concat(r,"-text-active"),G),D)),K=Zt({marginBottom:"-50%"},o?"top":"bottom","".concat((j-y)/A*100,"%")),te=Zt({transform:"translateX(".concat(o?"50%":"-50%",")"),msTransform:"translateX(".concat(o?"50%":"-50%",")")},o?"right":"left","".concat((j-y)/A*100,"%")),se=n?K:te,le=z?nr(nr({},se),L.style):se;return t7.default.createElement("span",{className:Z,style:le,key:j,onMouseDown:function(me){return w(me,j)},onTouchStart:function(me){return w(me,j)}},B)});return t7.default.createElement("div",{className:r},P)},ent=n3r;u();var nle=ee(ke()),tnt=ee(ko());var AT=function(e){vu(r,e);var t=yu(r);function r(){var n;return mu(this,r),n=t.apply(this,arguments),n.state={clickFocused:!1},n.setHandleRef=function(o){n.handle=o},n.handleMouseUp=function(){document.activeElement===n.handle&&n.setClickFocus(!0)},n.handleMouseDown=function(o){o.preventDefault(),n.focus()},n.handleBlur=function(){n.setClickFocus(!1)},n.handleKeyDown=function(){n.setClickFocus(!1)},n}return gu(r,[{key:"componentDidMount",value:function(){this.onMouseUpListener=Ku(document,"mouseup",this.handleMouseUp)}},{key:"componentWillUnmount",value:function(){this.onMouseUpListener&&this.onMouseUpListener.remove()}},{key:"setClickFocus",value:function(o){this.setState({clickFocused:o})}},{key:"clickFocus",value:function(){this.setClickFocus(!0),this.focus()}},{key:"focus",value:function(){this.handle.focus()}},{key:"blur",value:function(){this.handle.blur()}},{key:"render",value:function(){var o,i,a=this.props,c=a.prefixCls,h=a.vertical,m=a.reverse,y=a.offset,w=a.style,E=a.disabled,A=a.min,P=a.max,j=a.value,D=a.tabIndex,L=a.ariaLabel,z=a.ariaLabelledBy,B=a.ariaValueTextFormatter,G=Zu(a,["prefixCls","vertical","reverse","offset","style","disabled","min","max","value","tabIndex","ariaLabel","ariaLabelledBy","ariaValueTextFormatter"]),Z=(0,tnt.default)(this.props.className,Zt({},"".concat(c,"-handle-click-focused"),this.state.clickFocused)),K=h?(o={},Zt(o,m?"top":"bottom","".concat(y,"%")),Zt(o,m?"bottom":"top","auto"),Zt(o,"transform",m?null:"translateY(+50%)"),o):(i={},Zt(i,m?"right":"left","".concat(y,"%")),Zt(i,m?"left":"right","auto"),Zt(i,"transform","translateX(".concat(m?"+":"-","50%)")),i),te=nr(nr({},w),K),se=D||0;(E||D===null)&&(se=null);var le;return B&&(le=B(j)),nle.default.createElement("div",yo({ref:this.setHandleRef,tabIndex:se},G,{className:Z,style:te,onBlur:this.handleBlur,onKeyDown:this.handleKeyDown,onMouseDown:this.handleMouseDown,role:"slider","aria-valuemin":A,"aria-valuemax":P,"aria-valuenow":j,"aria-disabled":!!E,"aria-label":L,"aria-labelledby":z,"aria-valuetext":le}))}}]),r}(nle.default.Component);u();var nnt=ee(xa());u();var In={MAC_ENTER:3,BACKSPACE:8,TAB:9,NUM_CENTER:12,ENTER:13,SHIFT:16,CTRL:17,ALT:18,PAUSE:19,CAPS_LOCK:20,ESC:27,SPACE:32,PAGE_UP:33,PAGE_DOWN:34,END:35,HOME:36,LEFT:37,UP:38,RIGHT:39,DOWN:40,PRINT_SCREEN:44,INSERT:45,DELETE:46,ZERO:48,ONE:49,TWO:50,THREE:51,FOUR:52,FIVE:53,SIX:54,SEVEN:55,EIGHT:56,NINE:57,QUESTION_MARK:63,A:65,B:66,C:67,D:68,E:69,F:70,G:71,H:72,I:73,J:74,K:75,L:76,M:77,N:78,O:79,P:80,Q:81,R:82,S:83,T:84,U:85,V:86,W:87,X:88,Y:89,Z:90,META:91,WIN_KEY_RIGHT:92,CONTEXT_MENU:93,NUM_ZERO:96,NUM_ONE:97,NUM_TWO:98,NUM_THREE:99,NUM_FOUR:100,NUM_FIVE:101,NUM_SIX:102,NUM_SEVEN:103,NUM_EIGHT:104,NUM_NINE:105,NUM_MULTIPLY:106,NUM_PLUS:107,NUM_MINUS:109,NUM_PERIOD:110,NUM_DIVISION:111,F1:112,F2:113,F3:114,F4:115,F5:116,F6:117,F7:118,F8:119,F9:120,F10:121,F11:122,F12:123,NUMLOCK:144,SEMICOLON:186,DASH:189,EQUALS:187,COMMA:188,PERIOD:190,SLASH:191,APOSTROPHE:192,SINGLE_QUOTE:222,OPEN_SQUARE_BRACKET:219,BACKSLASH:220,CLOSE_SQUARE_BRACKET:221,WIN_KEY:224,MAC_FF_META:224,WIN_IME:229,isTextModifyingKeyEvent:function(t){var r=t.keyCode;if(t.altKey&&!t.ctrlKey||t.metaKey||r>=In.F1&&r<=In.F12)return!1;switch(r){case In.ALT:case In.CAPS_LOCK:case In.CONTEXT_MENU:case In.CTRL:case In.DOWN:case In.END:case In.ESC:case In.HOME:case In.INSERT:case In.LEFT:case In.MAC_FF_META:case In.META:case In.NUMLOCK:case In.NUM_CENTER:case In.PAGE_DOWN:case In.PAGE_UP:case In.PAUSE:case In.PRINT_SCREEN:case In.RIGHT:case In.SHIFT:case In.UP:case In.WIN_KEY:case In.WIN_KEY_RIGHT:return!1;default:return!0}},isCharacterKey:function(t){if(t>=In.ZERO&&t<=In.NINE||t>=In.NUM_ZERO&&t<=In.NUM_MULTIPLY||t>=In.A&&t<=In.Z||window.navigator.userAgent.indexOf("WebKit")!==-1&&t===0)return!0;switch(t){case In.SPACE:case In.QUESTION_MARK:case In.NUM_PLUS:case In.NUM_MINUS:case In.NUM_PERIOD:case In.NUM_DIVISION:case In.SEMICOLON:case In.DASH:case In.EQUALS:case In.COMMA:case In.PERIOD:case In.SLASH:case In.APOSTROPHE:case In.SINGLE_QUOTE:case In.OPEN_SQUARE_BRACKET:case In.BACKSLASH:case In.CLOSE_SQUARE_BRACKET:return!0;default:return!1}}},rv=In;function r7(e,t){try{return Object.keys(t).some(function(r){return e.target===(0,nnt.findDOMNode)(t[r])})}catch(r){return!1}}function n7(e,t){var r=t.min,n=t.max;return e<r||e>n}function ole(e){return e.touches.length>1||e.type.toLowerCase()==="touchend"&&e.touches.length>0}function rnt(e,t){var r=t.marks,n=t.step,o=t.min,i=t.max,a=Object.keys(r).map(parseFloat);if(n!==null){var c=Math.pow(10,ont(n)),h=Math.floor((i*c-o*c)/(n*c)),m=Math.min((e-o)/n,h),y=Math.round(m)*n+o;a.push(y)}var w=a.map(function(E){return Math.abs(e-E)});return a[w.indexOf(Math.min.apply(Math,Af(w)))]}function ont(e){var t=e.toString(),r=0;return t.indexOf(".")>=0&&(r=t.length-t.indexOf(".")-1),r}function ile(e,t){return e?t.clientY:t.pageX}function ale(e,t){return e?t.touches[0].clientY:t.touches[0].pageX}function sle(e,t){var r=t.getBoundingClientRect();return e?r.top+r.height*.5:window.pageXOffset+r.left+r.width*.5}function gD(e,t){var r=t.max,n=t.min;return e<=n?n:e>=r?r:e}function o7(e,t){var r=t.step,n=isFinite(rnt(e,t))?rnt(e,t):0;return r===null?n:parseFloat(n.toFixed(ont(r)))}function nv(e){e.stopPropagation(),e.preventDefault()}function o3r(e,t,r){var n={increase:function(c,h){return c+h},decrease:function(c,h){return c-h}},o=n[e](Object.keys(r.marks).indexOf(JSON.stringify(t)),1),i=Object.keys(r.marks)[o];return r.step?n[e](t,r.step):Object.keys(r.marks).length&&r.marks[i]?r.marks[i]:t}function i7(e,t,r){var n="increase",o="decrease",i=n;switch(e.keyCode){case rv.UP:i=t&&r?o:n;break;case rv.RIGHT:i=!t&&r?o:n;break;case rv.DOWN:i=t&&r?n:o;break;case rv.LEFT:i=!t&&r?n:o;break;case rv.END:return function(a,c){return c.max};case rv.HOME:return function(a,c){return c.min};case rv.PAGE_UP:return function(a,c){return a+c.step*2};case rv.PAGE_DOWN:return function(a,c){return a-c.step*2};default:return}return function(a,c){return o3r(i,a,c)}}function fm(){}function vD(e){var t;return t=function(r){vu(o,r);var n=yu(o);function o(i){var a;mu(this,o),a=n.call(this,i),a.onDown=function(w,E){var A=E,P=a.props,j=P.draggableTrack,D=P.vertical,L=a.state.bounds,z=j&&a.positionGetValue?a.positionGetValue(A)||[]:[],B=r7(w,a.handlesRefs);if(a.dragTrack=j&&L.length>=2&&!B&&!z.map(function(Z,K){var te=K?!0:Z>=L[K];return K===z.length-1?Z<=L[K]:te}).some(function(Z){return!Z}),a.dragTrack)a.dragOffset=A,a.startBounds=Af(L);else{if(!B)a.dragOffset=0;else{var G=sle(D,w.target);a.dragOffset=A-G,A=G}a.onStart(A)}},a.onMouseDown=function(w){if(w.button===0){a.removeDocumentEvents();var E=a.props.vertical,A=ile(E,w);a.onDown(w,A),a.addDocumentMouseEvents()}},a.onTouchStart=function(w){if(!ole(w)){var E=a.props.vertical,A=ale(E,w);a.onDown(w,A),a.addDocumentTouchEvents(),nv(w)}},a.onFocus=function(w){var E=a.props,A=E.onFocus,P=E.vertical;if(r7(w,a.handlesRefs)&&!a.dragTrack){var j=sle(P,w.target);a.dragOffset=0,a.onStart(j),nv(w),A&&A(w)}},a.onBlur=function(w){var E=a.props.onBlur;a.dragTrack||a.onEnd(),E&&E(w)},a.onMouseUp=function(){a.handlesRefs[a.prevMovedHandleIndex]&&a.handlesRefs[a.prevMovedHandleIndex].clickFocus()},a.onMouseMove=function(w){if(!a.sliderRef){a.onEnd();return}var E=ile(a.props.vertical,w);a.onMove(w,E-a.dragOffset,a.dragTrack,a.startBounds)},a.onTouchMove=function(w){if(ole(w)||!a.sliderRef){a.onEnd();return}var E=ale(a.props.vertical,w);a.onMove(w,E-a.dragOffset,a.dragTrack,a.startBounds)},a.onKeyDown=function(w){a.sliderRef&&r7(w,a.handlesRefs)&&a.onKeyboard(w)},a.onClickMarkLabel=function(w,E){w.stopPropagation(),a.onChange({value:E}),a.setState({value:E},function(){return a.onEnd(!0)})},a.saveSlider=function(w){a.sliderRef=w};var c=i.step,h=i.max,m=i.min,y=isFinite(h-m)?(h-m)%c===0:!0;return pm(c&&Math.floor(c)===c?y:!0,"Slider[max] - Slider[min] (".concat(h-m,") should be a multiple of Slider[step] (").concat(c,")")),a.handlesRefs={},a}return gu(o,[{key:"componentDidMount",value:function(){this.document=this.sliderRef&&this.sliderRef.ownerDocument;var a=this.props,c=a.autoFocus,h=a.disabled;c&&!h&&this.focus()}},{key:"componentWillUnmount",value:function(){CT(Zd(o.prototype),"componentWillUnmount",this)&&CT(Zd(o.prototype),"componentWillUnmount",this).call(this),this.removeDocumentEvents()}},{key:"getSliderStart",value:function(){var a=this.sliderRef,c=this.props,h=c.vertical,m=c.reverse,y=a.getBoundingClientRect();return h?m?y.bottom:y.top:window.pageXOffset+(m?y.right:y.left)}},{key:"getSliderLength",value:function(){var a=this.sliderRef;if(!a)return 0;var c=a.getBoundingClientRect();return this.props.vertical?c.height:c.width}},{key:"addDocumentTouchEvents",value:function(){this.onTouchMoveListener=Ku(this.document,"touchmove",this.onTouchMove),this.onTouchUpListener=Ku(this.document,"touchend",this.onEnd)}},{key:"addDocumentMouseEvents",value:function(){this.onMouseMoveListener=Ku(this.document,"mousemove",this.onMouseMove),this.onMouseUpListener=Ku(this.document,"mouseup",this.onEnd)}},{key:"removeDocumentEvents",value:function(){this.onTouchMoveListener&&this.onTouchMoveListener.remove(),this.onTouchUpListener&&this.onTouchUpListener.remove(),this.onMouseMoveListener&&this.onMouseMoveListener.remove(),this.onMouseUpListener&&this.onMouseUpListener.remove()}},{key:"focus",value:function(){var a;this.props.disabled||(a=this.handlesRefs[0])===null||a===void 0||a.focus()}},{key:"blur",value:function(){var a=this;this.props.disabled||Object.keys(this.handlesRefs).forEach(function(c){var h,m;(h=a.handlesRefs[c])===null||h===void 0||(m=h.blur)===null||m===void 0||m.call(h)})}},{key:"calcValue",value:function(a){var c=this.props,h=c.vertical,m=c.min,y=c.max,w=Math.abs(Math.max(a,0)/this.getSliderLength()),E=h?(1-w)*(y-m)+m:w*(y-m)+m;return E}},{key:"calcValueByPos",value:function(a){var c=this.props.reverse?-1:1,h=c*(a-this.getSliderStart()),m=this.trimAlignValue(this.calcValue(h));return m}},{key:"calcOffset",value:function(a){var c=this.props,h=c.min,m=c.max,y=(a-h)/(m-h);return Math.max(0,y*100)}},{key:"saveHandle",value:function(a,c){this.handlesRefs[a]=c}},{key:"render",value:function(){var a,c=this.props,h=c.prefixCls,m=c.className,y=c.marks,w=c.dots,E=c.step,A=c.included,P=c.disabled,j=c.vertical,D=c.reverse,L=c.min,z=c.max,B=c.children,G=c.maximumTrackStyle,Z=c.style,K=c.railStyle,te=c.dotStyle,se=c.activeDotStyle,le=CT(Zd(o.prototype),"render",this).call(this),pe=le.tracks,me=le.handles,_e=(0,int.default)(h,(a={},Zt(a,"".concat(h,"-with-marks"),Object.keys(y).length),Zt(a,"".concat(h,"-disabled"),P),Zt(a,"".concat(h,"-vertical"),j),Zt(a,m,m),a));return OT.default.createElement("div",{ref:this.saveSlider,className:_e,onTouchStart:P?fm:this.onTouchStart,onMouseDown:P?fm:this.onMouseDown,onMouseUp:P?fm:this.onMouseUp,onKeyDown:P?fm:this.onKeyDown,onFocus:P?fm:this.onFocus,onBlur:P?fm:this.onBlur,style:Z},OT.default.createElement("div",{className:"".concat(h,"-rail"),style:nr(nr({},G),K)}),pe,OT.default.createElement(Jrt,{prefixCls:h,vertical:j,reverse:D,marks:y,dots:w,step:E,included:A,lowerBound:this.getLowerBound(),upperBound:this.getUpperBound(),max:z,min:L,dotStyle:te,activeDotStyle:se}),me,OT.default.createElement(ent,{className:"".concat(h,"-mark"),onClickLabel:P?fm:this.onClickMarkLabel,vertical:j,marks:y,included:A,lowerBound:this.getLowerBound(),upperBound:this.getUpperBound(),max:z,min:L,reverse:D}),B)}}]),o}(e),t.displayName="ComponentEnhancer(".concat(e.displayName,")"),t.defaultProps=nr(nr({},e.defaultProps),{},{prefixCls:"rc-slider",className:"",min:0,max:100,step:1,marks:{},handle:function(n){var o=n.index,i=Zu(n,["index"]);return delete i.dragging,i.value===null?null:OT.default.createElement(AT,yo({},i,{key:o}))},onBeforeChange:fm,onChange:fm,onAfterChange:fm,included:!0,disabled:!1,dots:!1,vertical:!1,reverse:!1,trackStyle:[{}],handleStyle:[{}],railStyle:{},dotStyle:{},activeDotStyle:{}}),t}var i3r=function(e){vu(r,e);var t=yu(r);function r(n){var o;mu(this,r),o=t.call(this,n),o.positionGetValue=function(c){return[]},o.onEnd=function(c){var h=o.state.dragging;o.removeDocumentEvents(),(h||c)&&o.props.onAfterChange(o.getValue()),o.setState({dragging:!1})};var i=n.defaultValue!==void 0?n.defaultValue:n.min,a=n.value!==void 0?n.value:i;return o.state={value:o.trimAlignValue(a),dragging:!1},pm(!("minimumTrackStyle"in n),"minimumTrackStyle will be deprecated, please use trackStyle instead."),pm(!("maximumTrackStyle"in n),"maximumTrackStyle will be deprecated, please use railStyle instead."),o}return gu(r,[{key:"calcValueByPos",value:function(o){return 0}},{key:"calcOffset",value:function(o){return 0}},{key:"saveHandle",value:function(o,i){}},{key:"removeDocumentEvents",value:function(){}},{key:"componentDidUpdate",value:function(o,i){var a=this.props,c=a.min,h=a.max,m=a.value,y=a.onChange;if("min"in this.props||"max"in this.props){var w=m!==void 0?m:i.value,E=this.trimAlignValue(w,this.props);E!==i.value&&(this.setState({value:E}),!(c===o.min&&h===o.max)&&n7(w,this.props)&&y(E))}}},{key:"onChange",value:function(o){var i=this.props,a=!("value"in i),c=o.value>this.props.max?nr(nr({},o),{},{value:this.props.max}):o;a&&this.setState(c);var h=c.value;i.onChange(h)}},{key:"onStart",value:function(o){this.setState({dragging:!0});var i=this.props,a=this.getValue();i.onBeforeChange(a);var c=this.calcValueByPos(o);this.startValue=c,this.startPosition=o,c!==a&&(this.prevMovedHandleIndex=0,this.onChange({value:c}))}},{key:"onMove",value:function(o,i){nv(o);var a=this.state.value,c=this.calcValueByPos(i);c!==a&&this.onChange({value:c})}},{key:"onKeyboard",value:function(o){var i=this.props,a=i.reverse,c=i.vertical,h=i7(o,c,a);if(h){nv(o);var m=this.state,y=m.value,w=h(y,this.props),E=this.trimAlignValue(w);if(E===y)return;this.onChange({value:E}),this.props.onAfterChange(E),this.onEnd()}}},{key:"getValue",value:function(){return this.state.value}},{key:"getLowerBound",value:function(){var o=this.props.startPoint||this.props.min;return this.state.value>o?o:this.state.value}},{key:"getUpperBound",value:function(){return this.state.value<this.props.startPoint?this.props.startPoint:this.state.value}},{key:"trimAlignValue",value:function(o){var i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(o===null)return null;var a=nr(nr({},this.props),i),c=gD(o,a);return o7(c,a)}},{key:"render",value:function(){var o=this,i=this.props,a=i.prefixCls,c=i.vertical,h=i.included,m=i.disabled,y=i.minimumTrackStyle,w=i.trackStyle,E=i.handleStyle,A=i.tabIndex,P=i.ariaLabelForHandle,j=i.ariaLabelledByForHandle,D=i.ariaValueTextFormatterForHandle,L=i.min,z=i.max,B=i.startPoint,G=i.reverse,Z=i.handle,K=this.state,te=K.value,se=K.dragging,le=this.calcOffset(te),pe=Z({className:"".concat(a,"-handle"),prefixCls:a,vertical:c,offset:le,value:te,dragging:se,disabled:m,min:L,max:z,reverse:G,index:0,tabIndex:A,ariaLabel:P,ariaLabelledBy:j,ariaValueTextFormatter:D,style:E[0]||E,ref:function(Ze){return o.saveHandle(0,Ze)}}),me=B!==void 0?this.calcOffset(B):0,_e=w[0]||w,de=ule.default.createElement(e7,{className:"".concat(a,"-track"),vertical:c,included:h,offset:me,reverse:G,length:le-me,style:nr(nr({},y),_e)});return{tracks:de,handles:pe}}}]),r}(ule.default.Component),ant=vD(i3r);u();var cle=ee(ke()),ple=ee(ko());var yD=function(t){var r=t.value,n=t.handle,o=t.bounds,i=t.props,a=i.allowCross,c=i.pushable,h=Number(c),m=gD(r,i),y=m;return!a&&n!=null&&o!==void 0&&(n>0&&m<=o[n-1]+h&&(y=o[n-1]+h),n<o.length-1&&m>=o[n+1]-h&&(y=o[n+1]-h)),o7(y,i)},fle=function(e){vu(r,e);var t=yu(r);function r(n){var o;mu(this,r),o=t.call(this,n),o.positionGetValue=function(A){var P=o.getValue(),j=o.calcValueByPos(A),D=o.getClosestBound(j),L=o.getBoundNeedMoving(j,D),z=P[L];if(j===z)return null;var B=Af(P);return B[L]=j,B},o.onEnd=function(A){var P=o.state.handle;o.removeDocumentEvents(),P||(o.dragTrack=!1),(P!==null||A)&&o.props.onAfterChange(o.getValue()),o.setState({handle:null})};var i=n.count,a=n.min,c=n.max,h=Array.apply(void 0,Af(Array(i+1))).map(function(){return a}),m="defaultValue"in n?n.defaultValue:h,y=n.value!==void 0?n.value:m,w=y.map(function(A,P){return yD({value:A,handle:P,props:n})}),E=w[0]===c?0:w.length-1;return o.state={handle:null,recent:E,bounds:w},o}return gu(r,[{key:"calcValueByPos",value:function(o){return 0}},{key:"getSliderLength",value:function(){return 0}},{key:"calcOffset",value:function(o){return 0}},{key:"saveHandle",value:function(o,i){}},{key:"removeDocumentEvents",value:function(){}},{key:"componentDidUpdate",value:function(o,i){var a=this,c=this.props,h=c.onChange,m=c.value,y=c.min,w=c.max;if(("min"in this.props||"max"in this.props)&&!(y===o.min&&w===o.max)){var E=m||i.bounds;if(E.some(function(P){return n7(P,a.props)})){var A=E.map(function(P){return gD(P,a.props)});h(A)}}}},{key:"onChange",value:function(o){var i=this.props,a=!("value"in i);if(a)this.setState(o);else{var c={};["handle","recent"].forEach(function(y){o[y]!==void 0&&(c[y]=o[y])}),Object.keys(c).length&&this.setState(c)}var h=nr(nr({},this.state),o),m=h.bounds;i.onChange(m)}},{key:"onStart",value:function(o){var i=this.props,a=this.state,c=this.getValue();i.onBeforeChange(c);var h=this.calcValueByPos(o);this.startValue=h,this.startPosition=o;var m=this.getClosestBound(h);this.prevMovedHandleIndex=this.getBoundNeedMoving(h,m),this.setState({handle:this.prevMovedHandleIndex,recent:this.prevMovedHandleIndex});var y=c[this.prevMovedHandleIndex];if(h!==y){var w=Af(a.bounds);w[this.prevMovedHandleIndex]=h,this.onChange({bounds:w})}}},{key:"onMove",value:function(o,i,a,c){nv(o);var h=this.state,m=this.props,y=m.max||100,w=m.min||0;if(a){var E=m.vertical?-i:i;E=m.reverse?-E:E;var A=y-Math.max.apply(Math,Af(c)),P=w-Math.min.apply(Math,Af(c)),j=Math.min(Math.max(E/(this.getSliderLength()/(y-w)),P),A),D=c.map(function(B){return Math.floor(Math.max(Math.min(B+j,y),w))});h.bounds.map(function(B,G){return B===D[G]}).some(function(B){return!B})&&this.onChange({bounds:D});return}var L=this.calcValueByPos(i),z=h.bounds[h.handle];L!==z&&this.moveTo(L)}},{key:"onKeyboard",value:function(o){var i=this.props,a=i.reverse,c=i.vertical,h=i7(o,c,a);if(h){nv(o);var m=this.state,y=this.props,w=m.bounds,E=m.handle,A=w[E===null?m.recent:E],P=h(A,y),j=yD({value:P,handle:E,bounds:m.bounds,props:y});if(j===A)return;var D=!0;this.moveTo(j,D)}}},{key:"getValue",value:function(){return this.state.bounds}},{key:"getClosestBound",value:function(o){for(var i=this.state.bounds,a=0,c=1;c<i.length-1;c+=1)o>=i[c]&&(a=c);return Math.abs(i[a+1]-o)<Math.abs(i[a]-o)&&(a+=1),a}},{key:"getBoundNeedMoving",value:function(o,i){var a=this.state,c=a.bounds,h=a.recent,m=i,y=c[i+1]===c[i];return y&&c[h]===c[i]&&(m=h),y&&o!==c[i+1]&&(m=o<c[i+1]?i:i+1),m}},{key:"getLowerBound",value:function(){return this.state.bounds[0]}},{key:"getUpperBound",value:function(){var o=this.state.bounds;return o[o.length-1]}},{key:"getPoints",value:function(){var o=this.props,i=o.marks,a=o.step,c=o.min,h=o.max,m=this.internalPointsCache;if(!m||m.marks!==i||m.step!==a){var y=nr({},i);if(a!==null)for(var w=c;w<=h;w+=a)y[w]=w;var E=Object.keys(y).map(parseFloat);E.sort(function(A,P){return A-P}),this.internalPointsCache={marks:i,step:a,points:E}}return this.internalPointsCache.points}},{key:"moveTo",value:function(o,i){var a=this,c=this.state,h=this.props,m=Af(c.bounds),y=c.handle===null?c.recent:c.handle;m[y]=o;var w=y;h.pushable!==!1?this.pushSurroundingHandles(m,w):h.allowCross&&(m.sort(function(E,A){return E-A}),w=m.indexOf(o)),this.onChange({recent:w,handle:w,bounds:m}),i&&(this.props.onAfterChange(m),this.setState({},function(){a.handlesRefs[w].focus()}),this.onEnd())}},{key:"pushSurroundingHandles",value:function(o,i){var a=o[i],c=this.props.pushable,h=Number(c),m=0;if(o[i+1]-a<h&&(m=1),a-o[i-1]<h&&(m=-1),m!==0){var y=i+m,w=m*(o[y]-a);this.pushHandle(o,y,m,h-w)||(o[i]=o[y]-m*h)}}},{key:"pushHandle",value:function(o,i,a,c){for(var h=o[i],m=o[i];a*(m-h)<c;){if(!this.pushHandleOnePoint(o,i,a))return o[i]=h,!1;m=o[i]}return!0}},{key:"pushHandleOnePoint",value:function(o,i,a){var c=this.getPoints(),h=c.indexOf(o[i]),m=h+a;if(m>=c.length||m<0)return!1;var y=i+a,w=c[m],E=this.props.pushable,A=Number(E),P=a*(o[y]-w);return this.pushHandle(o,y,a,A-P)?(o[i]=w,!0):!1}},{key:"trimAlignValue",value:function(o){var i=this.state,a=i.handle,c=i.bounds;return yD({value:o,handle:a,bounds:c,props:this.props})}},{key:"render",value:function(){var o=this,i=this.state,a=i.handle,c=i.bounds,h=this.props,m=h.prefixCls,y=h.vertical,w=h.included,E=h.disabled,A=h.min,P=h.max,j=h.reverse,D=h.handle,L=h.trackStyle,z=h.handleStyle,B=h.tabIndex,G=h.ariaLabelGroupForHandles,Z=h.ariaLabelledByGroupForHandles,K=h.ariaValueTextFormatterGroupForHandles,te=c.map(function(me){return o.calcOffset(me)}),se="".concat(m,"-handle"),le=c.map(function(me,_e){var de,Ce=B[_e]||0;(E||B[_e]===null)&&(Ce=null);var Ze=a===_e;return D({className:(0,ple.default)((de={},Zt(de,se,!0),Zt(de,"".concat(se,"-").concat(_e+1),!0),Zt(de,"".concat(se,"-dragging"),Ze),de)),prefixCls:m,vertical:y,dragging:Ze,offset:te[_e],value:me,index:_e,tabIndex:Ce,min:A,max:P,reverse:j,disabled:E,style:z[_e],ref:function(ct){return o.saveHandle(_e,ct)},ariaLabel:G[_e],ariaLabelledBy:Z[_e],ariaValueTextFormatter:K[_e]})}),pe=c.slice(0,-1).map(function(me,_e){var de,Ce=_e+1,Ze=(0,ple.default)((de={},Zt(de,"".concat(m,"-track"),!0),Zt(de,"".concat(m,"-track-").concat(Ce),!0),de));return cle.default.createElement(e7,{className:Ze,vertical:y,reverse:j,included:w,offset:te[Ce-1],length:te[Ce]-te[Ce-1],style:L[_e],key:Ce})});return{tracks:pe,handles:le}}}],[{key:"getDerivedStateFromProps",value:function(o,i){if(!("value"in o||"min"in o||"max"in o))return null;var a=o.value||i.bounds,c=a.map(function(h,m){return yD({value:h,handle:m,bounds:i.bounds,props:o})});if(i.bounds.length===c.length){if(c.every(function(h,m){return h===i.bounds[m]}))return null}else c=a.map(function(h,m){return yD({value:h,handle:m,props:o})});return nr(nr({},i),{},{bounds:c})}}]),r}(cle.default.Component);fle.displayName="Range";fle.defaultProps={count:1,allowCross:!0,pushable:!1,draggableTrack:!1,tabIndex:[],ariaLabelGroupForHandles:[],ariaLabelledByGroupForHandles:[],ariaValueTextFormatterGroupForHandles:[]};var a7=vD(fle);u();var PD=ee(ke());u();var sv=ee(ke());u();u();var Zle=ee(ke()),qT=ee(ke());u();var Cp=ee(ke()),$ot=ee(xa());u();var lnt=function(t){return+setTimeout(t,16)},unt=function(t){return clearTimeout(t)};typeof window!="undefined"&&"requestAnimationFrame"in window&&(lnt=function(t){return window.requestAnimationFrame(t)},unt=function(t){return window.cancelAnimationFrame(t)});var snt=0,dle=new Map;function cnt(e){dle.delete(e)}var pnt=function(t){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:1;snt+=1;var n=snt;function o(i){if(i===0)cnt(n),t();else{var a=lnt(function(){o(i-1)});dle.set(n,a)}}return o(r),n};pnt.cancel=function(e){var t=dle.get(e);return cnt(e),unt(t)};var zc=pnt;u();function Sb(e,t){if(!e)return!1;if(e.contains)return e.contains(t);for(var r=t;r;){if(r===e)return!0;r=r.parentNode}return!1}u();var dnt=ee(ke()),hle=ee(xa());function fnt(e){return e instanceof HTMLElement||e instanceof SVGElement}function a3r(e){return e&&No(e)==="object"&&fnt(e.nativeElement)?e.nativeElement:fnt(e)?e:null}function _D(e){var t=a3r(e);if(t)return t;if(e instanceof dnt.default.Component){var r;return(r=hle.default.findDOMNode)===null||r===void 0?void 0:r.call(hle.default,e)}return null}u();var v7=ee(ke()),bD=ee(vnt());u();var u3r=ee(ke());u();var c3r=Symbol.for("react.element"),p3r=Symbol.for("react.transitional.element"),f3r=Symbol.for("react.fragment");function vle(e){return e&&No(e)==="object"&&(e.$$typeof===c3r||e.$$typeof===p3r)&&e.type===f3r}var d3r=Number(v7.version.split(".")[0]),yle=function(t,r){typeof t=="function"?t(r):No(t)==="object"&&t&&"current"in t&&(t.current=r)},PT=function(){for(var t=arguments.length,r=new Array(t),n=0;n<t;n++)r[n]=arguments[n];var o=r.filter(Boolean);return o.length<=1?o[0]:function(i){r.forEach(function(a){yle(a,i)})}};var xD=function(t){var r,n;if(!t)return!1;if(ynt(t)&&d3r>=19)return!0;var o=(0,bD.isMemo)(t)?t.type.type:t.type;return!(typeof o=="function"&&!((r=o.prototype)!==null&&r!==void 0&&r.render)&&o.$$typeof!==bD.ForwardRef||typeof t=="function"&&!((n=t.prototype)!==null&&n!==void 0&&n.render)&&t.$$typeof!==bD.ForwardRef)};function ynt(e){return(0,v7.isValidElement)(e)&&!vle(e)}var _nt=function(t){if(t&&ynt(t)){var r=t;return r.props.propertyIsEnumerable("ref")?r.props.ref:r.ref}return null};u();var Kd=ee(ke()),bnt=ee(xa());u();function dm(){return!!(typeof window!="undefined"&&window.document&&window.document.createElement)}var h3r=(0,Kd.forwardRef)(function(e,t){var r=e.didUpdate,n=e.getContainer,o=e.children,i=(0,Kd.useRef)(),a=(0,Kd.useRef)();(0,Kd.useImperativeHandle)(t,function(){return{}});var c=(0,Kd.useRef)(!1);return!c.current&&dm()&&(a.current=n(),i.current=a.current.parentNode,c.current=!0),(0,Kd.useEffect)(function(){r==null||r(e)}),(0,Kd.useEffect)(function(){return a.current.parentNode===null&&i.current!==null&&i.current.appendChild(a.current),function(){var h;(h=a.current)===null||h===void 0||(h=h.parentNode)===null||h===void 0||h.removeChild(a.current)}},[]),a.current?bnt.default.createPortal(o,a.current):null}),xnt=h3r;var Wot=ee(ko());u();function m3r(e,t,r){return r?e[0]===t[0]:e[0]===t[0]&&e[1]===t[1]}function wnt(e,t,r){var n=e[t]||{};return nr(nr({},n),r)}function Ent(e,t,r,n){for(var o=r.points,i=Object.keys(e),a=0;a<i.length;a+=1){var c=i[a];if(m3r(e[c].points,o,n))return"".concat(t,"-placement-").concat(c)}return""}u();u();u();function _le(e){if(Array.isArray(e))return e}u();function Snt(e,t){var r=e==null?null:typeof Symbol!="undefined"&&e[Symbol.iterator]||e["@@iterator"];if(r!=null){var n,o,i,a,c=[],h=!0,m=!1;try{if(i=(r=r.call(e)).next,t===0){if(Object(r)!==r)return;h=!1}else for(;!(h=(n=i.call(r)).done)&&(c.push(n.value),c.length!==t);h=!0);}catch(y){m=!0,o=y}finally{try{if(!h&&r.return!=null&&(a=r.return(),Object(a)!==a))return}finally{if(m)throw o}}return c}}u();function ble(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function jo(e,t){return _le(e)||Snt(e,t)||mD(e,t)||ble()}var Cb=ee(ke()),OD=ee(ke());u();var Tnt=function(){if(typeof navigator=="undefined"||typeof window=="undefined")return!1;var e=navigator.userAgent||navigator.vendor||window.opera;return /(android|bb\d+|meego).+mobile|avantgo|bada\/|blackberry|blazer|compal|elaine|fennec|hiptop|iemobile|ip(hone|od)|iris|kindle|lge |maemo|midp|mmp|mobile.+firefox|netfront|opera m(ob|in)i|palm( os)?|phone|p(ixi|re)\/|plucker|pocket|psp|series(4|6)0|symbian|treo|up\.(browser|link)|vodafone|wap|windows ce|xda|xiino|android|ipad|playbook|silk/i.test(e)||/1207|6310|6590|3gso|4thp|50[1-6]i|770s|802s|a wa|abac|ac(er|oo|s-)|ai(ko|rn)|al(av|ca|co)|amoi|an(ex|ny|yw)|aptu|ar(ch|go)|as(te|us)|attw|au(di|-m|r |s )|avan|be(ck|ll|nq)|bi(lb|rd)|bl(ac|az)|br(e|v)w|bumb|bw-(n|u)|c55\/|capi|ccwa|cdm-|cell|chtm|cldc|cmd-|co(mp|nd)|craw|da(it|ll|ng)|dbte|dc-s|devi|dica|dmob|do(c|p)o|ds(12|-d)|el(49|ai)|em(l2|ul)|er(ic|k0)|esl8|ez([4-7]0|os|wa|ze)|fetc|fly(-|_)|g1 u|g560|gene|gf-5|g-mo|go(\.w|od)|gr(ad|un)|haie|hcit|hd-(m|p|t)|hei-|hi(pt|ta)|hp( i|ip)|hs-c|ht(c(-| |_|a|g|p|s|t)|tp)|hu(aw|tc)|i-(20|go|ma)|i230|iac( |-|\/)|ibro|idea|ig01|ikom|im1k|inno|ipaq|iris|ja(t|v)a|jbro|jemu|jigs|kddi|keji|kgt( |\/)|klon|kpt |kwc-|kyo(c|k)|le(no|xi)|lg( g|\/(k|l|u)|50|54|-[a-w])|libw|lynx|m1-w|m3ga|m50\/|ma(te|ui|xo)|mc(01|21|ca)|m-cr|me(rc|ri)|mi(o8|oa|ts)|mmef|mo(01|02|bi|de|do|t(-| |o|v)|zz)|mt(50|p1|v )|mwbp|mywa|n10[0-2]|n20[2-3]|n30(0|2)|n50(0|2|5)|n7(0(0|1)|10)|ne((c|m)-|on|tf|wf|wg|wt)|nok(6|i)|nzph|o2im|op(ti|wv)|oran|owg1|p800|pan(a|d|t)|pdxg|pg(13|-([1-8]|c))|phil|pire|pl(ay|uc)|pn-2|po(ck|rt|se)|prox|psio|pt-g|qa-a|qc(07|12|21|32|60|-[2-7]|i-)|qtek|r380|r600|raks|rim9|ro(ve|zo)|s55\/|sa(ge|ma|mm|ms|ny|va)|sc(01|h-|oo|p-)|sdk\/|se(c(-|0|1)|47|mc|nd|ri)|sgh-|shar|sie(-|m)|sk-0|sl(45|id)|sm(al|ar|b3|it|t5)|so(ft|ny)|sp(01|h-|v-|v )|sy(01|mb)|t2(18|50)|t6(00|10|18)|ta(gt|lk)|tcl-|tdg-|tel(i|m)|tim-|t-mo|to(pl|sh)|ts(70|m-|m3|m5)|tx-9|up(\.b|g1|si)|utst|v400|v750|veri|vi(rg|te)|vk(40|5[0-3]|-v)|vm40|voda|vulc|vx(52|53|60|61|70|80|81|83|85|98)|w3c(-| )|webc|whit|wi(g |nc|nw)|wmlb|wonu|x700|yas-|your|zeto|zte-/i.test(e==null?void 0:e.substr(0,4))};u();var Ole=ee(ke()),Hnt=ee(ko());u();u();var Vnt=ee(ko());var Uc=ee(ke()),Ale=ee(ke());u();var xle=ee(ke());var Int=xle.createContext({});u();var Mnt=ee(ke()),g3r=function(e){vu(r,e);var t=yu(r);function r(){return mu(this,r),t.apply(this,arguments)}return gu(r,[{key:"render",value:function(){return this.props.children}}]),r}(Mnt.Component),Cnt=g3r;u();u();u();var y7=ee(ke());function L0(e){var t=y7.useRef();t.current=e;var r=y7.useCallback(function(){for(var n,o=arguments.length,i=new Array(o),a=0;a<o;a++)i[a]=arguments[a];return(n=t.current)===null||n===void 0?void 0:n.call.apply(n,[t].concat(i))},[]);return r}u();u();var DT=ee(ke());var Ant=dm()?DT.useLayoutEffect:DT.useEffect,v3r=function(t,r){var n=DT.useRef(!0);Ant(function(){return t(n.current)},r),Ant(function(){return n.current=!1,function(){n.current=!0}},[])};var wD=v3r;u();var NT=ee(ke());function ov(e){var t=NT.useRef(!1),r=NT.useState(e),n=jo(r,2),o=n[0],i=n[1];NT.useEffect(function(){return t.current=!1,function(){t.current=!0}},[]);function a(c,h){h&&t.current||i(c)}return[o,a]}u();u();u();u();var _7=ee(ke());function wle(e){var t=_7.useReducer(function(c){return c+1},0),r=jo(t,2),n=r[1],o=_7.useRef(e),i=L0(function(){return o.current}),a=L0(function(c){o.current=typeof c=="function"?c(o.current):c,n()});return[i,a]}var C7=ee(ke()),av=ee(ke());u();var hm="none",ED="appear",SD="enter",TD="leave",Ele="none",Fc="prepare",iv="start",k0="active",b7="end",x7="prepared";u();var Rnt=ee(ke()),jnt=ee(ke());u();function Ont(e,t){var r={};return r[e.toLowerCase()]=t.toLowerCase(),r["Webkit".concat(e)]="webkit".concat(t),r["Moz".concat(e)]="moz".concat(t),r["ms".concat(e)]="MS".concat(t),r["O".concat(e)]="o".concat(t.toLowerCase()),r}function _3r(e,t){var r={animationend:Ont("Animation","AnimationEnd"),transitionend:Ont("Transition","TransitionEnd")};return e&&("AnimationEvent"in t||delete r.animationend.animation,"TransitionEvent"in t||delete r.transitionend.transition),r}var b3r=_3r(dm(),typeof window!="undefined"?window:{}),Dnt={};dm()&&(Pnt=document.createElement("div"),Dnt=Pnt.style);var Pnt,w7={};function Nnt(e){if(w7[e])return w7[e];var t=b3r[e];if(t)for(var r=Object.keys(t),n=r.length,o=0;o<n;o+=1){var i=r[o];if(Object.prototype.hasOwnProperty.call(t,i)&&i in Dnt)return w7[e]=t[i],w7[e]}return""}var Lnt=Nnt("animationend"),knt=Nnt("transitionend"),E7=!!(Lnt&&knt),Sle=Lnt||"animationend",Tle=knt||"transitionend";function Ile(e,t){if(!e)return null;if(No(e)==="object"){var r=t.replace(/-\w/g,function(n){return n[1].toUpperCase()});return e[r]}return"".concat(e,"-").concat(t)}var qnt=function(e){var t=(0,jnt.useRef)();function r(o){o&&(o.removeEventListener(Tle,e),o.removeEventListener(Sle,e))}function n(o){t.current&&t.current!==o&&r(t.current),o&&o!==t.current&&(o.addEventListener(Tle,e),o.addEventListener(Sle,e),t.current=o)}return Rnt.useEffect(function(){return function(){r(t.current)}},[]),[n,r]};u();var S7=ee(ke()),x3r=dm()?S7.useLayoutEffect:S7.useEffect,T7=x3r;u();var Fnt=ee(ke());u();var I7=ee(ke()),znt=function(){var e=I7.useRef(null);function t(){zc.cancel(e.current)}function r(n){var o=arguments.length>1&&arguments[1]!==void 0?arguments[1]:2;t();var i=zc(function(){o<=1?n({isCanceled:function(){return i!==e.current}}):r(n,o-1)});e.current=i}return I7.useEffect(function(){return function(){t()}},[]),[r,t]};var w3r=[Fc,iv,k0,b7],E3r=[Fc,x7],Mle=!1,Unt=!0;function M7(e){return e===k0||e===b7}var Bnt=function(e,t,r){var n=ov(Ele),o=jo(n,2),i=o[0],a=o[1],c=znt(),h=jo(c,2),m=h[0],y=h[1];function w(){a(Fc,!0)}var E=t?E3r:w3r;return T7(function(){if(i!==Ele&&i!==b7){var A=E.indexOf(i),P=E[A+1],j=r(i);j===Mle?a(P,!0):P&&m(function(D){function L(){D.isCanceled()||a(P,!0)}j===!0?L():Promise.resolve(j).then(L)})}},[e,i]),Fnt.useEffect(function(){return function(){y()}},[]),[w,i]};function Cle(e,t,r,n){var o=n.motionEnter,i=o===void 0?!0:o,a=n.motionAppear,c=a===void 0?!0:a,h=n.motionLeave,m=h===void 0?!0:h,y=n.motionDeadline,w=n.motionLeaveImmediately,E=n.onAppearPrepare,A=n.onEnterPrepare,P=n.onLeavePrepare,j=n.onAppearStart,D=n.onEnterStart,L=n.onLeaveStart,z=n.onAppearActive,B=n.onEnterActive,G=n.onLeaveActive,Z=n.onAppearEnd,K=n.onEnterEnd,te=n.onLeaveEnd,se=n.onVisibleChanged,le=ov(),pe=jo(le,2),me=pe[0],_e=pe[1],de=wle(hm),Ce=jo(de,2),Ze=Ce[0],rt=Ce[1],ct=ov(null),qe=jo(ct,2),lt=qe[0],_t=qe[1],Tt=Ze(),et=(0,av.useRef)(!1),pt=(0,av.useRef)(null);function ot(){return r()}var $e=(0,av.useRef)(!1);function De(){rt(hm),_t(null,!0)}var Ke=L0(function(Pr){var Le=Ze();if(Le!==hm){var Je=ot();if(!(Pr&&!Pr.deadline&&Pr.target!==Je)){var tt=$e.current,Ft;Le===ED&&tt?Ft=Z==null?void 0:Z(Je,Pr):Le===SD&&tt?Ft=K==null?void 0:K(Je,Pr):Le===TD&&tt&&(Ft=te==null?void 0:te(Je,Pr)),tt&&Ft!==!1&&De()}}}),Ge=qnt(Ke),ft=jo(Ge,1),mt=ft[0],Ot=function(Le){switch(Le){case ED:return Zt(Zt(Zt({},Fc,E),iv,j),k0,z);case SD:return Zt(Zt(Zt({},Fc,A),iv,D),k0,B);case TD:return Zt(Zt(Zt({},Fc,P),iv,L),k0,G);default:return{}}},At=C7.useMemo(function(){return Ot(Tt)},[Tt]),Mt=Bnt(Tt,!e,function(Pr){if(Pr===Fc){var Le=At[Fc];return Le?Le(ot()):Mle}if(Ut in At){var Je;_t(((Je=At[Ut])===null||Je===void 0?void 0:Je.call(At,ot(),null))||null)}return Ut===k0&&Tt!==hm&&(mt(ot()),y>0&&(clearTimeout(pt.current),pt.current=setTimeout(function(){Ke({deadline:!0})},y))),Ut===x7&&De(),Unt}),Yt=jo(Mt,2),jt=Yt[0],Ut=Yt[1],ar=M7(Ut);$e.current=ar;var jr=(0,av.useRef)(null);T7(function(){if(!(et.current&&jr.current===t)){_e(t);var Pr=et.current;et.current=!0;var Le;!Pr&&t&&c&&(Le=ED),Pr&&t&&i&&(Le=SD),(Pr&&!t&&m||!Pr&&w&&!t&&m)&&(Le=TD);var Je=Ot(Le);Le&&(e||Je[Fc])?(rt(Le),jt()):rt(hm),jr.current=t}},[t]),(0,av.useEffect)(function(){(Tt===ED&&!c||Tt===SD&&!i||Tt===TD&&!m)&&rt(hm)},[c,i,m]),(0,av.useEffect)(function(){return function(){et.current=!1,clearTimeout(pt.current)}},[]);var Or=C7.useRef(!1);(0,av.useEffect)(function(){me&&(Or.current=!0),me!==void 0&&Tt===hm&&((Or.current||me)&&(se==null||se(me)),Or.current=!0)},[me,Tt]);var br=lt;return At[Fc]&&Ut===iv&&(br=nr({transition:"none"},br)),[Tt,Ut,br,me!=null?me:t]}function S3r(e){var t=e;No(e)==="object"&&(t=e.transitionSupport);function r(o,i){return!!(o.motionName&&t&&i!==!1)}var n=Uc.forwardRef(function(o,i){var a=o.visible,c=a===void 0?!0:a,h=o.removeOnLeave,m=h===void 0?!0:h,y=o.forceRender,w=o.children,E=o.motionName,A=o.leavedClassName,P=o.eventProps,j=Uc.useContext(Int),D=j.motion,L=r(o,D),z=(0,Ale.useRef)(),B=(0,Ale.useRef)();function G(){try{return z.current instanceof HTMLElement?z.current:_D(B.current)}catch(qe){return null}}var Z=Cle(L,c,G,o),K=jo(Z,4),te=K[0],se=K[1],le=K[2],pe=K[3],me=Uc.useRef(pe);pe&&(me.current=!0);var _e=Uc.useCallback(function(qe){z.current=qe,yle(i,qe)},[i]),de,Ce=nr(nr({},P),{},{visible:c});if(!w)de=null;else if(te===hm)pe?de=w(nr({},Ce),_e):!m&&me.current&&A?de=w(nr(nr({},Ce),{},{className:A}),_e):y||!m&&!A?de=w(nr(nr({},Ce),{},{style:{display:"none"}}),_e):de=null;else{var Ze;se===Fc?Ze="prepare":M7(se)?Ze="active":se===iv&&(Ze="start");var rt=Ile(E,"".concat(te,"-").concat(Ze));de=w(nr(nr({},Ce),{},{className:(0,Vnt.default)(Ile(E,te),Zt(Zt({},rt,rt&&Ze),E,typeof E=="string")),style:le}),_e)}if(Uc.isValidElement(de)&&xD(de)){var ct=_nt(de);ct||(de=Uc.cloneElement(de,{ref:_e}))}return Uc.createElement(Cnt,{ref:B},de)});return n.displayName="CSSMotion",n}var A7=S3r(E7);u();var Tb=ee(ke());u();var O7="add",P7="keep",D7="remove",L7="removed";function T3r(e){var t;return e&&No(e)==="object"&&"key"in e?t=e:t={key:e},nr(nr({},t),{},{key:String(t.key)})}function N7(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[];return e.map(T3r)}function Gnt(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[],t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:[],r=[],n=0,o=t.length,i=N7(e),a=N7(t);i.forEach(function(m){for(var y=!1,w=n;w<o;w+=1){var E=a[w];if(E.key===m.key){n<w&&(r=r.concat(a.slice(n,w).map(function(A){return nr(nr({},A),{},{status:O7})})),n=w),r.push(nr(nr({},E),{},{status:P7})),n+=1,y=!0;break}}y||r.push(nr(nr({},m),{},{status:D7}))}),n<o&&(r=r.concat(a.slice(n).map(function(m){return nr(nr({},m),{},{status:O7})})));var c={};r.forEach(function(m){var y=m.key;c[y]=(c[y]||0)+1});var h=Object.keys(c).filter(function(m){return c[m]>1});return h.forEach(function(m){r=r.filter(function(y){var w=y.key,E=y.status;return w!==m||E!==D7}),r.forEach(function(y){y.key===m&&(y.status=P7)})}),r}var I3r=["component","children","onVisibleChanged","onAllRemoved"],M3r=["status"],C3r=["eventProps","visible","children","motionName","motionAppear","motionEnter","motionLeave","motionLeaveImmediately","motionDeadline","removeOnLeave","leavedClassName","onAppearPrepare","onAppearStart","onAppearActive","onAppearEnd","onEnterStart","onEnterActive","onEnterEnd","onLeaveStart","onLeaveActive","onLeaveEnd"];function A3r(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:A7,r=function(n){vu(i,n);var o=yu(i);function i(){var a;mu(this,i);for(var c=arguments.length,h=new Array(c),m=0;m<c;m++)h[m]=arguments[m];return a=o.call.apply(o,[this].concat(h)),Zt(Fn(a),"state",{keyEntities:[]}),Zt(Fn(a),"removeKey",function(y){a.setState(function(w){var E=w.keyEntities.map(function(A){return A.key!==y?A:nr(nr({},A),{},{status:L7})});return{keyEntities:E}},function(){var w=a.state.keyEntities,E=w.filter(function(A){var P=A.status;return P!==L7}).length;E===0&&a.props.onAllRemoved&&a.props.onAllRemoved()})}),a}return gu(i,[{key:"render",value:function(){var c=this,h=this.state.keyEntities,m=this.props,y=m.component,w=m.children,E=m.onVisibleChanged,A=m.onAllRemoved,P=Zu(m,I3r),j=y||Tb.Fragment,D={};return C3r.forEach(function(L){D[L]=P[L],delete P[L]}),delete P.keys,Tb.createElement(j,P,h.map(function(L,z){var B=L.status,G=Zu(L,M3r),Z=B===O7||B===P7;return Tb.createElement(t,yo({},D,{key:G.key,visible:Z,eventProps:G,onVisibleChanged:function(te){E==null||E(te,{key:G.key}),te||c.removeKey(G.key)}}),function(K,te){return w(nr(nr({},K),{},{index:z}),te)})}))}}],[{key:"getDerivedStateFromProps",value:function(c,h){var m=c.keys,y=h.keyEntities,w=N7(m),E=Gnt(y,w);return{keyEntities:E.filter(function(A){var P=y.find(function(j){var D=j.key;return A.key===D});return!(P&&P.status===L7&&A.status===D7)})}}}]),i}(Tb.Component);return Zt(r,"defaultProps",{component:"div"}),r}var O3r=A3r(E7);var LT=A7;u();function k7(e){var t=e.prefixCls,r=e.motion,n=e.animation,o=e.transitionName;return r||(n?{motionName:"".concat(t,"-").concat(n)}:o?{motionName:o}:null)}function Ple(e){var t=e.prefixCls,r=e.visible,n=e.zIndex,o=e.mask,i=e.maskMotion,a=e.maskAnimation,c=e.maskTransitionName;if(!o)return null;var h={};return(i||c||a)&&(h=nr({motionAppear:!0},k7({motion:i,prefixCls:t,transitionName:c,animation:a}))),Ole.createElement(LT,yo({},h,{visible:r,removeOnLeave:!0}),function(m){var y=m.className;return Ole.createElement("div",{style:{zIndex:n},className:(0,Hnt.default)("".concat(t,"-mask"),y)})})}u();var Mp=ee(ke()),Mb=ee(ke());u();u();u();function $nt(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(o){return Object.getOwnPropertyDescriptor(e,o).enumerable})),r.push.apply(r,n)}return r}function Wnt(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?$nt(Object(r),!0).forEach(function(n){P3r(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):$nt(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function Rle(e){"@babel/helpers - typeof";return Rle=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Rle(e)}function P3r(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var ID,D3r={Webkit:"-webkit-",Moz:"-moz-",ms:"-ms-",O:"-o-"};function F7(){if(ID!==void 0)return ID;ID="";var e=document.createElement("p").style,t="Transform";for(var r in D3r)r+t in e&&(ID=r);return ID}function aot(){return F7()?"".concat(F7(),"TransitionProperty"):"transitionProperty"}function U7(){return F7()?"".concat(F7(),"Transform"):"transform"}function Ynt(e,t){var r=aot();r&&(e.style[r]=t,r!=="transitionProperty"&&(e.style.transitionProperty=t))}function Dle(e,t){var r=U7();r&&(e.style[r]=t,r!=="transform"&&(e.style.transform=t))}function N3r(e){return e.style.transitionProperty||e.style[aot()]}function L3r(e){var t=window.getComputedStyle(e,null),r=t.getPropertyValue("transform")||t.getPropertyValue(U7());if(r&&r!=="none"){var n=r.replace(/[^0-9\-.,]/g,"").split(",");return{x:parseFloat(n[12]||n[4],0),y:parseFloat(n[13]||n[5],0)}}return{x:0,y:0}}var k3r=/matrix\((.*)\)/,R3r=/matrix3d\((.*)\)/;function j3r(e,t){var r=window.getComputedStyle(e,null),n=r.getPropertyValue("transform")||r.getPropertyValue(U7());if(n&&n!=="none"){var o,i=n.match(k3r);if(i)i=i[1],o=i.split(",").map(function(c){return parseFloat(c,10)}),o[4]=t.x,o[5]=t.y,Dle(e,"matrix(".concat(o.join(","),")"));else{var a=n.match(R3r)[1];o=a.split(",").map(function(c){return parseFloat(c,10)}),o[12]=t.x,o[13]=t.y,Dle(e,"matrix3d(".concat(o.join(","),")"))}}else Dle(e,"translateX(".concat(t.x,"px) translateY(").concat(t.y,"px) translateZ(0)"))}var q3r=/[\-+]?(?:\d*\.|)\d+(?:[eE][\-+]?\d+|)/.source,AD;function Znt(e){var t=e.style.display;e.style.display="none",e.offsetHeight,e.style.display=t}function kT(e,t,r){var n=r;if(Rle(t)==="object"){for(var o in t)t.hasOwnProperty(o)&&kT(e,o,t[o]);return}if(typeof n!="undefined"){typeof n=="number"&&(n="".concat(n,"px")),e.style[t]=n;return}return AD(e,t)}function z3r(e){var t,r,n,o=e.ownerDocument,i=o.body,a=o&&o.documentElement;return t=e.getBoundingClientRect(),r=Math.floor(t.left),n=Math.floor(t.top),r-=a.clientLeft||i.clientLeft||0,n-=a.clientTop||i.clientTop||0,{left:r,top:n}}function sot(e,t){var r=e["page".concat(t?"Y":"X","Offset")],n="scroll".concat(t?"Top":"Left");if(typeof r!="number"){var o=e.document;r=o.documentElement[n],typeof r!="number"&&(r=o.body[n])}return r}function lot(e){return sot(e)}function uot(e){return sot(e,!0)}function CD(e){var t=z3r(e),r=e.ownerDocument,n=r.defaultView||r.parentWindow;return t.left+=lot(n),t.top+=uot(n),t}function Fle(e){return e!=null&&e==e.window}function cot(e){return Fle(e)?e.document:e.nodeType===9?e:e.ownerDocument}function F3r(e,t,r){var n=r,o="",i=cot(e);return n=n||i.defaultView.getComputedStyle(e,null),n&&(o=n.getPropertyValue(t)||n[t]),o}var U3r=new RegExp("^(".concat(q3r,")(?!px)[a-z%]+$"),"i"),B3r=/^(top|right|bottom|left)$/,Nle="currentStyle",Lle="runtimeStyle",Ib="left",V3r="px";function G3r(e,t){var r=e[Nle]&&e[Nle][t];if(U3r.test(r)&&!B3r.test(t)){var n=e.style,o=n[Ib],i=e[Lle][Ib];e[Lle][Ib]=e[Nle][Ib],n[Ib]=t==="fontSize"?"1em":r||0,r=n.pixelLeft+V3r,n[Ib]=o,e[Lle][Ib]=i}return r===""?"auto":r}typeof window!="undefined"&&(AD=window.getComputedStyle?F3r:G3r);function R7(e,t){return e==="left"?t.useCssRight?"right":e:t.useCssBottom?"bottom":e}function Knt(e){if(e==="left")return"right";if(e==="right")return"left";if(e==="top")return"bottom";if(e==="bottom")return"top"}function Xnt(e,t,r){kT(e,"position")==="static"&&(e.style.position="relative");var n=-999,o=-999,i=R7("left",r),a=R7("top",r),c=Knt(i),h=Knt(a);i!=="left"&&(n=999),a!=="top"&&(o=999);var m="",y=CD(e);("left"in t||"top"in t)&&(m=N3r(e)||"",Ynt(e,"none")),"left"in t&&(e.style[c]="",e.style[i]="".concat(n,"px")),"top"in t&&(e.style[h]="",e.style[a]="".concat(o,"px")),Znt(e);var w=CD(e),E={};for(var A in t)if(t.hasOwnProperty(A)){var P=R7(A,r),j=A==="left"?n:o,D=y[A]-w[A];P===A?E[P]=j+D:E[P]=j-D}kT(e,E),Znt(e),("left"in t||"top"in t)&&Ynt(e,m);var L={};for(var z in t)if(t.hasOwnProperty(z)){var B=R7(z,r),G=t[z]-y[z];z===B?L[B]=E[B]+G:L[B]=E[B]-G}kT(e,L)}function H3r(e,t){var r=CD(e),n=L3r(e),o={x:n.x,y:n.y};"left"in t&&(o.x=n.x+t.left-r.left),"top"in t&&(o.y=n.y+t.top-r.top),j3r(e,o)}function $3r(e,t,r){if(r.ignoreShake){var n=CD(e),o=n.left.toFixed(0),i=n.top.toFixed(0),a=t.left.toFixed(0),c=t.top.toFixed(0);if(o===a&&i===c)return}r.useCssRight||r.useCssBottom?Xnt(e,t,r):r.useCssTransform&&U7()in document.body.style?H3r(e,t):Xnt(e,t,r)}function Ule(e,t){for(var r=0;r<e.length;r++)t(e[r])}function pot(e){return AD(e,"boxSizing")==="border-box"}var W3r=["margin","border","padding"],jle=-1,Y3r=2,qle=1,Z3r=0;function K3r(e,t,r){var n={},o=e.style,i;for(i in t)t.hasOwnProperty(i)&&(n[i]=o[i],o[i]=t[i]);r.call(e);for(i in t)t.hasOwnProperty(i)&&(o[i]=n[i])}function MD(e,t,r){var n=0,o,i,a;for(i=0;i<t.length;i++)if(o=t[i],o)for(a=0;a<r.length;a++){var c=void 0;o==="border"?c="".concat(o).concat(r[a],"Width"):c=o+r[a],n+=parseFloat(AD(e,c))||0}return n}var mm={getParent:function(t){var r=t;do r.nodeType===11&&r.host?r=r.host:r=r.parentNode;while(r&&r.nodeType!==1&&r.nodeType!==9);return r}};Ule(["Width","Height"],function(e){mm["doc".concat(e)]=function(t){var r=t.document;return Math.max(r.documentElement["scroll".concat(e)],r.body["scroll".concat(e)],mm["viewport".concat(e)](r))},mm["viewport".concat(e)]=function(t){var r="client".concat(e),n=t.document,o=n.body,i=n.documentElement,a=i[r];return n.compatMode==="CSS1Compat"&&a||o&&o[r]||a}});function Jnt(e,t,r){var n=r;if(Fle(e))return t==="width"?mm.viewportWidth(e):mm.viewportHeight(e);if(e.nodeType===9)return t==="width"?mm.docWidth(e):mm.docHeight(e);var o=t==="width"?["Left","Right"]:["Top","Bottom"],i=Math.floor(t==="width"?e.getBoundingClientRect().width:e.getBoundingClientRect().height),a=pot(e),c=0;(i==null||i<=0)&&(i=void 0,c=AD(e,t),(c==null||Number(c)<0)&&(c=e.style[t]||0),c=Math.floor(parseFloat(c))||0),n===void 0&&(n=a?qle:jle);var h=i!==void 0||a,m=i||c;return n===jle?h?m-MD(e,["border","padding"],o):c:h?n===qle?m:m+(n===Y3r?-MD(e,["border"],o):MD(e,["margin"],o)):c+MD(e,W3r.slice(n),o)}var X3r={position:"absolute",visibility:"hidden",display:"block"};function Qnt(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];var n,o=t[0];return o.offsetWidth!==0?n=Jnt.apply(void 0,t):K3r(o,X3r,function(){n=Jnt.apply(void 0,t)}),n}Ule(["width","height"],function(e){var t=e.charAt(0).toUpperCase()+e.slice(1);mm["outer".concat(t)]=function(n,o){return n&&Qnt(n,e,o?Z3r:qle)};var r=e==="width"?["Left","Right"]:["Top","Bottom"];mm[e]=function(n,o){var i=o;if(i!==void 0){if(n){var a=pot(n);return a&&(i+=MD(n,["padding","border"],r)),kT(n,e,i)}return}return n&&Qnt(n,e,jle)}});function fot(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r]);return e}var Yn={getWindow:function(t){if(t&&t.document&&t.setTimeout)return t;var r=t.ownerDocument||t;return r.defaultView||r.parentWindow},getDocument:cot,offset:function(t,r,n){if(typeof r!="undefined")$3r(t,r,n||{});else return CD(t)},isWindow:Fle,each:Ule,css:kT,clone:function(t){var r,n={};for(r in t)t.hasOwnProperty(r)&&(n[r]=t[r]);var o=t.overflow;if(o)for(r in t)t.hasOwnProperty(r)&&(n.overflow[r]=t.overflow[r]);return n},mix:fot,getWindowScrollLeft:function(t){return lot(t)},getWindowScrollTop:function(t){return uot(t)},merge:function(){for(var t={},r=0;r<arguments.length;r++)Yn.mix(t,r<0||arguments.length<=r?void 0:arguments[r]);return t},viewportWidth:0,viewportHeight:0};fot(Yn,mm);var kle=Yn.getParent;function zle(e){if(Yn.isWindow(e)||e.nodeType===9)return null;var t=Yn.getDocument(e),r=t.body,n,o=Yn.css(e,"position"),i=o==="fixed"||o==="absolute";if(!i)return e.nodeName.toLowerCase()==="html"?null:kle(e);for(n=kle(e);n&&n!==r&&n.nodeType!==9;n=kle(n))if(o=Yn.css(n,"position"),o!=="static")return n;return null}var eot=Yn.getParent;function J3r(e){if(Yn.isWindow(e)||e.nodeType===9)return!1;var t=Yn.getDocument(e),r=t.body,n=null;for(n=eot(e);n&&n!==r&&n!==t;n=eot(n)){var o=Yn.css(n,"position");if(o==="fixed")return!0}return!1}function Ble(e,t){for(var r={left:0,right:1/0,top:0,bottom:1/0},n=zle(e),o=Yn.getDocument(e),i=o.defaultView||o.parentWindow,a=o.body,c=o.documentElement;n;){if((navigator.userAgent.indexOf("MSIE")===-1||n.clientWidth!==0)&&n!==a&&n!==c&&Yn.css(n,"overflow")!=="visible"){var h=Yn.offset(n);h.left+=n.clientLeft,h.top+=n.clientTop,r.top=Math.max(r.top,h.top),r.right=Math.min(r.right,h.left+n.clientWidth),r.bottom=Math.min(r.bottom,h.top+n.clientHeight),r.left=Math.max(r.left,h.left)}else if(n===a||n===c)break;n=zle(n)}var m=null;if(!Yn.isWindow(e)&&e.nodeType!==9){m=e.style.position;var y=Yn.css(e,"position");y==="absolute"&&(e.style.position="fixed")}var w=Yn.getWindowScrollLeft(i),E=Yn.getWindowScrollTop(i),A=Yn.viewportWidth(i),P=Yn.viewportHeight(i),j=c.scrollWidth,D=c.scrollHeight,L=window.getComputedStyle(a);if(L.overflowX==="hidden"&&(j=i.innerWidth),L.overflowY==="hidden"&&(D=i.innerHeight),e.style&&(e.style.position=m),t||J3r(e))r.left=Math.max(r.left,w),r.top=Math.max(r.top,E),r.right=Math.min(r.right,w+A),r.bottom=Math.min(r.bottom,E+P);else{var z=Math.max(j,w+A);r.right=Math.min(r.right,z);var B=Math.max(D,E+P);r.bottom=Math.min(r.bottom,B)}return r.top>=0&&r.left>=0&&r.bottom>r.top&&r.right>r.left?r:null}function Q3r(e,t,r,n){var o=Yn.clone(e),i={width:t.width,height:t.height};return n.adjustX&&o.left<r.left&&(o.left=r.left),n.resizeWidth&&o.left>=r.left&&o.left+i.width>r.right&&(i.width-=o.left+i.width-r.right),n.adjustX&&o.left+i.width>r.right&&(o.left=Math.max(r.right-i.width,r.left)),n.adjustY&&o.top<r.top&&(o.top=r.top),n.resizeHeight&&o.top>=r.top&&o.top+i.height>r.bottom&&(i.height-=o.top+i.height-r.bottom),n.adjustY&&o.top+i.height>r.bottom&&(o.top=Math.max(r.bottom-i.height,r.top)),Yn.mix(o,i)}function Vle(e){var t,r,n;if(!Yn.isWindow(e)&&e.nodeType!==9)t=Yn.offset(e),r=Yn.outerWidth(e),n=Yn.outerHeight(e);else{var o=Yn.getWindow(e);t={left:Yn.getWindowScrollLeft(o),top:Yn.getWindowScrollTop(o)},r=Yn.viewportWidth(o),n=Yn.viewportHeight(o)}return t.width=r,t.height=n,t}function tot(e,t){var r=t.charAt(0),n=t.charAt(1),o=e.width,i=e.height,a=e.left,c=e.top;return r==="c"?c+=i/2:r==="b"&&(c+=i),n==="c"?a+=o/2:n==="r"&&(a+=o),{left:a,top:c}}function j7(e,t,r,n,o){var i=tot(t,r[1]),a=tot(e,r[0]),c=[a.left-i.left,a.top-i.top];return{left:Math.round(e.left-c[0]+n[0]-o[0]),top:Math.round(e.top-c[1]+n[1]-o[1])}}function rot(e,t,r){return e.left<r.left||e.left+t.width>r.right}function not(e,t,r){return e.top<r.top||e.top+t.height>r.bottom}function ekr(e,t,r){return e.left>r.right||e.left+t.width<r.left}function tkr(e,t,r){return e.top>r.bottom||e.top+t.height<r.top}function q7(e,t,r){var n=[];return Yn.each(e,function(o){n.push(o.replace(t,function(i){return r[i]}))}),n}function z7(e,t){return e[t]=-e[t],e}function oot(e,t){var r;return /%$/.test(e)?r=parseInt(e.substring(0,e.length-1),10)/100*t:r=parseInt(e,10),r||0}function iot(e,t){e[0]=oot(e[0],t.width),e[1]=oot(e[1],t.height)}function dot(e,t,r,n){var o=r.points,i=r.offset||[0,0],a=r.targetOffset||[0,0],c=r.overflow,h=r.source||e;i=[].concat(i),a=[].concat(a),c=c||{};var m={},y=0,w=!!(c&&c.alwaysByViewport),E=Ble(h,w),A=Vle(h);iot(i,A),iot(a,t);var P=j7(A,t,o,i,a),j=Yn.merge(A,P);if(E&&(c.adjustX||c.adjustY)&&n){if(c.adjustX&&rot(P,A,E)){var D=q7(o,/[lr]/gi,{l:"r",r:"l"}),L=z7(i,0),z=z7(a,0),B=j7(A,t,D,L,z);ekr(B,A,E)||(y=1,o=D,i=L,a=z)}if(c.adjustY&&not(P,A,E)){var G=q7(o,/[tb]/gi,{t:"b",b:"t"}),Z=z7(i,1),K=z7(a,1),te=j7(A,t,G,Z,K);tkr(te,A,E)||(y=1,o=G,i=Z,a=K)}y&&(P=j7(A,t,o,i,a),Yn.mix(j,P));var se=rot(P,A,E),le=not(P,A,E);if(se||le){var pe=o;se&&(pe=q7(o,/[lr]/gi,{l:"r",r:"l"})),le&&(pe=q7(o,/[tb]/gi,{t:"b",b:"t"})),o=pe,i=r.offset||[0,0],a=r.targetOffset||[0,0]}m.adjustX=c.adjustX&&se,m.adjustY=c.adjustY&&le,(m.adjustX||m.adjustY)&&(j=Q3r(P,A,E,m))}return j.width!==A.width&&Yn.css(h,"width",Yn.width(h)+j.width-A.width),j.height!==A.height&&Yn.css(h,"height",Yn.height(h)+j.height-A.height),Yn.offset(h,{left:j.left,top:j.top},{useCssRight:r.useCssRight,useCssBottom:r.useCssBottom,useCssTransform:r.useCssTransform,ignoreShake:r.ignoreShake}),{points:o,offset:i,targetOffset:a,overflow:m}}function rkr(e,t){var r=Ble(e,t),n=Vle(e);return!r||n.left+n.width<=r.left||n.top+n.height<=r.top||n.left>=r.right||n.top>=r.bottom}function B7(e,t,r){var n=r.target||t,o=Vle(n),i=!rkr(n,r.overflow&&r.overflow.alwaysByViewport);return dot(e,o,r,i)}B7.__getOffsetParent=zle;B7.__getVisibleRectForElement=Ble;function hot(e,t,r){var n,o,i=Yn.getDocument(e),a=i.defaultView||i.parentWindow,c=Yn.getWindowScrollLeft(a),h=Yn.getWindowScrollTop(a),m=Yn.viewportWidth(a),y=Yn.viewportHeight(a);"pageX"in t?n=t.pageX:n=c+t.clientX,"pageY"in t?o=t.pageY:o=h+t.clientY;var w={left:n,top:o,width:0,height:0},E=n>=0&&n<=c+m&&o>=0&&o<=h+y,A=[r.points[0],"cc"];return dot(e,w,Wnt(Wnt({},r),{},{points:A}),E)}u();function nkr(e,t){var r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!1,n=new Set;function o(i,a){var c=arguments.length>2&&arguments[2]!==void 0?arguments[2]:1,h=n.has(i);if(pm(!h,"Warning: There may be circular references"),h)return!1;if(i===a)return!0;if(r&&c>1)return!1;n.add(i);var m=c+1;if(Array.isArray(i)){if(!Array.isArray(a)||i.length!==a.length)return!1;for(var y=0;y<i.length;y++)if(!o(i[y],a[y],m))return!1;return!0}if(i&&a&&No(i)==="object"&&No(a)==="object"){var w=Object.keys(i);return w.length!==Object.keys(a).length?!1:w.every(function(E){return o(i[E],a[E],m)})}return!1}return o(e,t)}var mot=nkr;u();var got=function(e){if(!e)return!1;if(e instanceof Element){if(e.offsetParent)return!0;if(e.getBBox){var t=e.getBBox(),r=t.width,n=t.height;if(r||n)return!0}if(e.getBoundingClientRect){var o=e.getBoundingClientRect(),i=o.width,a=o.height;if(i||a)return!0}}return!1};var Gl=ee(ke());u();var Gle=ee(ke()),vot=function(e,t){var r=Gle.default.useRef(!1),n=Gle.default.useRef(null);function o(){window.clearTimeout(n.current)}function i(a){if(o(),!r.current||a===!0){if(e(a)===!1)return;r.current=!0,n.current=window.setTimeout(function(){r.current=!1},t)}else n.current=window.setTimeout(function(){r.current=!1,i()},t)}return[i,function(){r.current=!1,o()}]};u();u();var _ot=function(){if(typeof Map!="undefined")return Map;function e(t,r){var n=-1;return t.some(function(o,i){return o[0]===r?(n=i,!0):!1}),n}return function(){function t(){this.__entries__=[]}return Object.defineProperty(t.prototype,"size",{get:function(){return this.__entries__.length},enumerable:!0,configurable:!0}),t.prototype.get=function(r){var n=e(this.__entries__,r),o=this.__entries__[n];return o&&o[1]},t.prototype.set=function(r,n){var o=e(this.__entries__,r);~o?this.__entries__[o][1]=n:this.__entries__.push([r,n])},t.prototype.delete=function(r){var n=this.__entries__,o=e(n,r);~o&&n.splice(o,1)},t.prototype.has=function(r){return!!~e(this.__entries__,r)},t.prototype.clear=function(){this.__entries__.splice(0)},t.prototype.forEach=function(r,n){n===void 0&&(n=null);for(var o=0,i=this.__entries__;o<i.length;o++){var a=i[o];r.call(n,a[1],a[0])}},t}()}(),Hle=typeof window!="undefined"&&typeof document!="undefined"&&window.document===document,V7=function(){return typeof global!="undefined"&&global.Math===Math?global:typeof self!="undefined"&&self.Math===Math?self:typeof window!="undefined"&&window.Math===Math?window:Function("return this")()}(),okr=function(){return typeof requestAnimationFrame=="function"?requestAnimationFrame.bind(V7):function(e){return setTimeout(function(){return e(Date.now())},1e3/60)}}(),ikr=2;function akr(e,t){var r=!1,n=!1,o=0;function i(){r&&(r=!1,e()),n&&c()}function a(){okr(i)}function c(){var h=Date.now();if(r){if(h-o<ikr)return;n=!0}else r=!0,n=!1,setTimeout(a,t);o=h}return c}var skr=20,lkr=["top","right","bottom","left","width","height","size","weight"],ukr=typeof MutationObserver!="undefined",ckr=function(){function e(){this.connected_=!1,this.mutationEventsAdded_=!1,this.mutationsObserver_=null,this.observers_=[],this.onTransitionEnd_=this.onTransitionEnd_.bind(this),this.refresh=akr(this.refresh.bind(this),skr)}return e.prototype.addObserver=function(t){~this.observers_.indexOf(t)||this.observers_.push(t),this.connected_||this.connect_()},e.prototype.removeObserver=function(t){var r=this.observers_,n=r.indexOf(t);~n&&r.splice(n,1),!r.length&&this.connected_&&this.disconnect_()},e.prototype.refresh=function(){var t=this.updateObservers_();t&&this.refresh()},e.prototype.updateObservers_=function(){var t=this.observers_.filter(function(r){return r.gatherActive(),r.hasActive()});return t.forEach(function(r){return r.broadcastActive()}),t.length>0},e.prototype.connect_=function(){!Hle||this.connected_||(document.addEventListener("transitionend",this.onTransitionEnd_),window.addEventListener("resize",this.refresh),ukr?(this.mutationsObserver_=new MutationObserver(this.refresh),this.mutationsObserver_.observe(document,{attributes:!0,childList:!0,characterData:!0,subtree:!0})):(document.addEventListener("DOMSubtreeModified",this.refresh),this.mutationEventsAdded_=!0),this.connected_=!0)},e.prototype.disconnect_=function(){!Hle||!this.connected_||(document.removeEventListener("transitionend",this.onTransitionEnd_),window.removeEventListener("resize",this.refresh),this.mutationsObserver_&&this.mutationsObserver_.disconnect(),this.mutationEventsAdded_&&document.removeEventListener("DOMSubtreeModified",this.refresh),this.mutationsObserver_=null,this.mutationEventsAdded_=!1,this.connected_=!1)},e.prototype.onTransitionEnd_=function(t){var r=t.propertyName,n=r===void 0?"":r,o=lkr.some(function(i){return!!~n.indexOf(i)});o&&this.refresh()},e.getInstance=function(){return this.instance_||(this.instance_=new e),this.instance_},e.instance_=null,e}(),bot=function(e,t){for(var r=0,n=Object.keys(t);r<n.length;r++){var o=n[r];Object.defineProperty(e,o,{value:t[o],enumerable:!1,writable:!1,configurable:!0})}return e},RT=function(e){var t=e&&e.ownerDocument&&e.ownerDocument.defaultView;return t||V7},xot=H7(0,0,0,0);function G7(e){return parseFloat(e)||0}function yot(e){for(var t=[],r=1;r<arguments.length;r++)t[r-1]=arguments[r];return t.reduce(function(n,o){var i=e["border-"+o+"-width"];return n+G7(i)},0)}function pkr(e){for(var t=["top","right","bottom","left"],r={},n=0,o=t;n<o.length;n++){var i=o[n],a=e["padding-"+i];r[i]=G7(a)}return r}function fkr(e){var t=e.getBBox();return H7(0,0,t.width,t.height)}function dkr(e){var t=e.clientWidth,r=e.clientHeight;if(!t&&!r)return xot;var n=RT(e).getComputedStyle(e),o=pkr(n),i=o.left+o.right,a=o.top+o.bottom,c=G7(n.width),h=G7(n.height);if(n.boxSizing==="border-box"&&(Math.round(c+i)!==t&&(c-=yot(n,"left","right")+i),Math.round(h+a)!==r&&(h-=yot(n,"top","bottom")+a)),!mkr(e)){var m=Math.round(c+i)-t,y=Math.round(h+a)-r;Math.abs(m)!==1&&(c-=m),Math.abs(y)!==1&&(h-=y)}return H7(o.left,o.top,c,h)}var hkr=function(){return typeof SVGGraphicsElement!="undefined"?function(e){return e instanceof RT(e).SVGGraphicsElement}:function(e){return e instanceof RT(e).SVGElement&&typeof e.getBBox=="function"}}();function mkr(e){return e===RT(e).document.documentElement}function gkr(e){return Hle?hkr(e)?fkr(e):dkr(e):xot}function vkr(e){var t=e.x,r=e.y,n=e.width,o=e.height,i=typeof DOMRectReadOnly!="undefined"?DOMRectReadOnly:Object,a=Object.create(i.prototype);return bot(a,{x:t,y:r,width:n,height:o,top:r,right:t+n,bottom:o+r,left:t}),a}function H7(e,t,r,n){return{x:e,y:t,width:r,height:n}}var ykr=function(){function e(t){this.broadcastWidth=0,this.broadcastHeight=0,this.contentRect_=H7(0,0,0,0),this.target=t}return e.prototype.isActive=function(){var t=gkr(this.target);return this.contentRect_=t,t.width!==this.broadcastWidth||t.height!==this.broadcastHeight},e.prototype.broadcastRect=function(){var t=this.contentRect_;return this.broadcastWidth=t.width,this.broadcastHeight=t.height,t},e}(),_kr=function(){function e(t,r){var n=vkr(r);bot(this,{target:t,contentRect:n})}return e}(),bkr=function(){function e(t,r,n){if(this.activeObservations_=[],this.observations_=new _ot,typeof t!="function")throw new TypeError("The callback provided as parameter 1 is not a function.");this.callback_=t,this.controller_=r,this.callbackCtx_=n}return e.prototype.observe=function(t){if(!arguments.length)throw new TypeError("1 argument required, but only 0 present.");if(!(typeof Element=="undefined"||!(Element instanceof Object))){if(!(t instanceof RT(t).Element))throw new TypeError("parameter 1 is not of type \"Element\".");var r=this.observations_;r.has(t)||(r.set(t,new ykr(t)),this.controller_.addObserver(this),this.controller_.refresh())}},e.prototype.unobserve=function(t){if(!arguments.length)throw new TypeError("1 argument required, but only 0 present.");if(!(typeof Element=="undefined"||!(Element instanceof Object))){if(!(t instanceof RT(t).Element))throw new TypeError("parameter 1 is not of type \"Element\".");var r=this.observations_;r.has(t)&&(r.delete(t),r.size||this.controller_.removeObserver(this))}},e.prototype.disconnect=function(){this.clearActive(),this.observations_.clear(),this.controller_.removeObserver(this)},e.prototype.gatherActive=function(){var t=this;this.clearActive(),this.observations_.forEach(function(r){r.isActive()&&t.activeObservations_.push(r)})},e.prototype.broadcastActive=function(){if(this.hasActive()){var t=this.callbackCtx_,r=this.activeObservations_.map(function(n){return new _kr(n.target,n.broadcastRect())});this.callback_.call(t,r,t),this.clearActive()}},e.prototype.clearActive=function(){this.activeObservations_.splice(0)},e.prototype.hasActive=function(){return this.activeObservations_.length>0},e}(),wot=typeof WeakMap!="undefined"?new WeakMap:new _ot,Eot=function(){function e(t){if(!(this instanceof e))throw new TypeError("Cannot call a class as a function.");if(!arguments.length)throw new TypeError("1 argument required, but only 0 present.");var r=ckr.getInstance(),n=new bkr(t,r,this);wot.set(this,n)}return e}();["observe","unobserve","disconnect"].forEach(function(e){Eot.prototype[e]=function(){var t;return(t=wot.get(this))[e].apply(t,arguments)}});var xkr=function(){return typeof V7.ResizeObserver!="undefined"?V7.ResizeObserver:Eot}(),Sot=xkr;function Tot(e,t){return e===t?!0:!e||!t?!1:"pageX"in t&&"pageY"in t?e.pageX===t.pageX&&e.pageY===t.pageY:"clientX"in t&&"clientY"in t?e.clientX===t.clientX&&e.clientY===t.clientY:!1}function Iot(e,t){e!==document.activeElement&&Sb(t,e)&&typeof e.focus=="function"&&e.focus()}function $le(e,t){var r=null,n=null;function o(a){var c=jo(a,1),h=c[0].target;if(document.documentElement.contains(h)){var m=h.getBoundingClientRect(),y=m.width,w=m.height,E=Math.floor(y),A=Math.floor(w);(r!==E||n!==A)&&Promise.resolve().then(function(){t({width:E,height:A})}),r=E,n=A}}var i=new Sot(o);return e&&i.observe(e),function(){i.disconnect()}}function Mot(e){return typeof e!="function"?null:e()}function Cot(e){return No(e)!=="object"||!e?null:e}var wkr=function(t,r){var n=t.children,o=t.disabled,i=t.target,a=t.align,c=t.onAlign,h=t.monitorWindowResize,m=t.monitorBufferTime,y=m===void 0?0:m,w=Gl.default.useRef({}),E=Gl.default.useRef(),A=Gl.default.Children.only(n),P=Gl.default.useRef({});P.current.disabled=o,P.current.target=i,P.current.align=a,P.current.onAlign=c;var j=vot(function(){var me=P.current,_e=me.disabled,de=me.target,Ce=me.align,Ze=me.onAlign,rt=E.current;if(!_e&&de&&rt){var ct,qe=Mot(de),lt=Cot(de);w.current.element=qe,w.current.point=lt,w.current.align=Ce;var _t=document,Tt=_t.activeElement;return qe&&got(qe)?ct=B7(rt,qe,Ce):lt&&(ct=hot(rt,lt,Ce)),Iot(Tt,rt),Ze&&ct&&Ze(rt,ct),!0}return!1},y),D=jo(j,2),L=D[0],z=D[1],B=Gl.default.useState(),G=jo(B,2),Z=G[0],K=G[1],te=Gl.default.useState(),se=jo(te,2),le=se[0],pe=se[1];return wD(function(){K(Mot(i)),pe(Cot(i))}),Gl.default.useEffect(function(){(w.current.element!==Z||!Tot(w.current.point,le)||!mot(w.current.align,a))&&L()}),Gl.default.useEffect(function(){var me=$le(E.current,L);return me},[E.current]),Gl.default.useEffect(function(){var me=$le(Z,L);return me},[Z]),Gl.default.useEffect(function(){o?z():L()},[o]),Gl.default.useEffect(function(){if(h){var me=Ku(window,"resize",L);return me.remove}},[h]),Gl.default.useEffect(function(){return function(){z()}},[]),Gl.default.useImperativeHandle(r,function(){return{forceAlign:function(){return L(!0)}}}),Gl.default.isValidElement(A)&&(A=Gl.default.cloneElement(A,{ref:PT(A.ref,E)})),A},Aot=Gl.default.forwardRef(wkr);Aot.displayName="Align";var Oot=Aot;var Pot=Oot;var jot=ee(ko());u();u();function $7(){"use strict";$7=function(){return t};var e,t={},r=Object.prototype,n=r.hasOwnProperty,o=typeof Symbol=="function"?Symbol:{},i=o.iterator||"@@iterator",a=o.asyncIterator||"@@asyncIterator",c=o.toStringTag||"@@toStringTag";function h(pe,me,_e,de){return Object.defineProperty(pe,me,{value:_e,enumerable:!de,configurable:!de,writable:!de})}try{h({},"")}catch(pe){h=function(_e,de,Ce){return _e[de]=Ce}}function m(pe,me,_e,de){var Ce=me&&me.prototype instanceof E?me:E,Ze=Object.create(Ce.prototype);return h(Ze,"_invoke",function(rt,ct,qe){var lt=1;return function(_t,Tt){if(lt===3)throw Error("Generator is already running");if(lt===4){if(_t==="throw")throw Tt;return{value:e,done:!0}}for(qe.method=_t,qe.arg=Tt;;){var et=qe.delegate;if(et){var pt=Z(et,qe);if(pt){if(pt===w)continue;return pt}}if(qe.method==="next")qe.sent=qe._sent=qe.arg;else if(qe.method==="throw"){if(lt===1)throw lt=4,qe.arg;qe.dispatchException(qe.arg)}else qe.method==="return"&&qe.abrupt("return",qe.arg);lt=3;var ot=y(rt,ct,qe);if(ot.type==="normal"){if(lt=qe.done?4:2,ot.arg===w)continue;return{value:ot.arg,done:qe.done}}ot.type==="throw"&&(lt=4,qe.method="throw",qe.arg=ot.arg)}}}(pe,_e,new se(de||[])),!0),Ze}function y(pe,me,_e){try{return{type:"normal",arg:pe.call(me,_e)}}catch(de){return{type:"throw",arg:de}}}t.wrap=m;var w={};function E(){}function A(){}function P(){}var j={};h(j,i,function(){return this});var D=Object.getPrototypeOf,L=D&&D(D(le([])));L&&L!==r&&n.call(L,i)&&(j=L);var z=P.prototype=E.prototype=Object.create(j);function B(pe){["next","throw","return"].forEach(function(me){h(pe,me,function(_e){return this._invoke(me,_e)})})}function G(pe,me){function _e(Ce,Ze,rt,ct){var qe=y(pe[Ce],pe,Ze);if(qe.type!=="throw"){var lt=qe.arg,_t=lt.value;return _t&&No(_t)=="object"&&n.call(_t,"__await")?me.resolve(_t.__await).then(function(Tt){_e("next",Tt,rt,ct)},function(Tt){_e("throw",Tt,rt,ct)}):me.resolve(_t).then(function(Tt){lt.value=Tt,rt(lt)},function(Tt){return _e("throw",Tt,rt,ct)})}ct(qe.arg)}var de;h(this,"_invoke",function(Ce,Ze){function rt(){return new me(function(ct,qe){_e(Ce,Ze,ct,qe)})}return de=de?de.then(rt,rt):rt()},!0)}function Z(pe,me){var _e=me.method,de=pe.i[_e];if(de===e)return me.delegate=null,_e==="throw"&&pe.i.return&&(me.method="return",me.arg=e,Z(pe,me),me.method==="throw")||_e!=="return"&&(me.method="throw",me.arg=new TypeError("The iterator does not provide a '"+_e+"' method")),w;var Ce=y(de,pe.i,me.arg);if(Ce.type==="throw")return me.method="throw",me.arg=Ce.arg,me.delegate=null,w;var Ze=Ce.arg;return Ze?Ze.done?(me[pe.r]=Ze.value,me.next=pe.n,me.method!=="return"&&(me.method="next",me.arg=e),me.delegate=null,w):Ze:(me.method="throw",me.arg=new TypeError("iterator result is not an object"),me.delegate=null,w)}function K(pe){this.tryEntries.push(pe)}function te(pe){var me=pe[4]||{};me.type="normal",me.arg=e,pe[4]=me}function se(pe){this.tryEntries=[[-1]],pe.forEach(K,this),this.reset(!0)}function le(pe){if(pe!=null){var me=pe[i];if(me)return me.call(pe);if(typeof pe.next=="function")return pe;if(!isNaN(pe.length)){var _e=-1,de=function Ce(){for(;++_e<pe.length;)if(n.call(pe,_e))return Ce.value=pe[_e],Ce.done=!1,Ce;return Ce.value=e,Ce.done=!0,Ce};return de.next=de}}throw new TypeError(No(pe)+" is not iterable")}return A.prototype=P,h(z,"constructor",P),h(P,"constructor",A),A.displayName=h(P,c,"GeneratorFunction"),t.isGeneratorFunction=function(pe){var me=typeof pe=="function"&&pe.constructor;return!!me&&(me===A||(me.displayName||me.name)==="GeneratorFunction")},t.mark=function(pe){return Object.setPrototypeOf?Object.setPrototypeOf(pe,P):(pe.__proto__=P,h(pe,c,"GeneratorFunction")),pe.prototype=Object.create(z),pe},t.awrap=function(pe){return{__await:pe}},B(G.prototype),h(G.prototype,a,function(){return this}),t.AsyncIterator=G,t.async=function(pe,me,_e,de,Ce){Ce===void 0&&(Ce=Promise);var Ze=new G(m(pe,me,_e,de),Ce);return t.isGeneratorFunction(me)?Ze:Ze.next().then(function(rt){return rt.done?rt.value:Ze.next()})},B(z),h(z,c,"Generator"),h(z,i,function(){return this}),h(z,"toString",function(){return"[object Generator]"}),t.keys=function(pe){var me=Object(pe),_e=[];for(var de in me)_e.unshift(de);return function Ce(){for(;_e.length;)if((de=_e.pop())in me)return Ce.value=de,Ce.done=!1,Ce;return Ce.done=!0,Ce}},t.values=le,se.prototype={constructor:se,reset:function(me){if(this.prev=this.next=0,this.sent=this._sent=e,this.done=!1,this.delegate=null,this.method="next",this.arg=e,this.tryEntries.forEach(te),!me)for(var _e in this)_e.charAt(0)==="t"&&n.call(this,_e)&&!isNaN(+_e.slice(1))&&(this[_e]=e)},stop:function(){this.done=!0;var me=this.tryEntries[0][4];if(me.type==="throw")throw me.arg;return this.rval},dispatchException:function(me){if(this.done)throw me;var _e=this;function de(_t){rt.type="throw",rt.arg=me,_e.next=_t}for(var Ce=_e.tryEntries.length-1;Ce>=0;--Ce){var Ze=this.tryEntries[Ce],rt=Ze[4],ct=this.prev,qe=Ze[1],lt=Ze[2];if(Ze[0]===-1)return de("end"),!1;if(!qe&&!lt)throw Error("try statement without catch or finally");if(Ze[0]!=null&&Ze[0]<=ct){if(ct<qe)return this.method="next",this.arg=e,de(qe),!0;if(ct<lt)return de(lt),!1}}},abrupt:function(me,_e){for(var de=this.tryEntries.length-1;de>=0;--de){var Ce=this.tryEntries[de];if(Ce[0]>-1&&Ce[0]<=this.prev&&this.prev<Ce[2]){var Ze=Ce;break}}Ze&&(me==="break"||me==="continue")&&Ze[0]<=_e&&_e<=Ze[2]&&(Ze=null);var rt=Ze?Ze[4]:{};return rt.type=me,rt.arg=_e,Ze?(this.method="next",this.next=Ze[2],w):this.complete(rt)},complete:function(me,_e){if(me.type==="throw")throw me.arg;return me.type==="break"||me.type==="continue"?this.next=me.arg:me.type==="return"?(this.rval=this.arg=me.arg,this.method="return",this.next="end"):me.type==="normal"&&_e&&(this.next=_e),w},finish:function(me){for(var _e=this.tryEntries.length-1;_e>=0;--_e){var de=this.tryEntries[_e];if(de[2]===me)return this.complete(de[4],de[3]),te(de),w}},catch:function(me){for(var _e=this.tryEntries.length-1;_e>=0;--_e){var de=this.tryEntries[_e];if(de[0]===me){var Ce=de[4];if(Ce.type==="throw"){var Ze=Ce.arg;te(de)}return Ze}}throw Error("illegal catch attempt")},delegateYield:function(me,_e,de){return this.delegate={i:le(me),r:_e,n:de},this.method==="next"&&(this.arg=e),w}},t}u();function Dot(e,t,r,n,o,i,a){try{var c=e[i](a),h=c.value}catch(m){return void r(m)}c.done?t(h):Promise.resolve(h).then(n,o)}function Not(e){return function(){var t=this,r=arguments;return new Promise(function(n,o){var i=e.apply(t,r);function a(h){Dot(i,n,o,a,c,"next",h)}function c(h){Dot(i,n,o,a,c,"throw",h)}a(void 0)})}}var jT=ee(ke());var Lot=["measure","alignPre","align",null,"motion"],kot=function(e,t){var r=ov(null),n=jo(r,2),o=n[0],i=n[1],a=(0,jT.useRef)();function c(y){i(y,!0)}function h(){zc.cancel(a.current)}function m(y){h(),a.current=zc(function(){c(function(w){switch(o){case"align":return"motion";case"motion":return"stable";default:}return w}),y==null||y()})}return(0,jT.useEffect)(function(){c("measure")},[e]),(0,jT.useEffect)(function(){switch(o){case"measure":t();break;default:}o&&(a.current=zc(Not($7().mark(function y(){var w,E;return $7().wrap(function(P){for(;;)switch(P.prev=P.next){case 0:w=Lot.indexOf(o),E=Lot[w+1],E&&w!==-1&&c(E);case 3:case"end":return P.stop()}},y)}))))},[o]),(0,jT.useEffect)(function(){return function(){h()}},[]),[o,m]};u();var W7=ee(ke()),Rot=function(e){var t=W7.useState({width:0,height:0}),r=jo(t,2),n=r[0],o=r[1];function i(c){var h=c.offsetWidth,m=c.offsetHeight,y=c.getBoundingClientRect(),w=y.width,E=y.height;Math.abs(h-w)<1&&Math.abs(m-E)<1&&(h=w,m=E),o({width:h,height:m})}var a=W7.useMemo(function(){var c={};if(e){var h=n.width,m=n.height;e.indexOf("height")!==-1&&m?c.height=m:e.indexOf("minHeight")!==-1&&m&&(c.minHeight=m),e.indexOf("width")!==-1&&h?c.width=h:e.indexOf("minWidth")!==-1&&h&&(c.minWidth=h)}return c},[e,n]);return[a,i]};var qot=Mp.forwardRef(function(e,t){var r=e.visible,n=e.prefixCls,o=e.className,i=e.style,a=e.children,c=e.zIndex,h=e.stretch,m=e.destroyPopupOnHide,y=e.forceRender,w=e.align,E=e.point,A=e.getRootDomNode,P=e.getClassNameFromAlign,j=e.onAlign,D=e.onMouseEnter,L=e.onMouseLeave,z=e.onMouseDown,B=e.onTouchStart,G=e.onClick,Z=(0,Mb.useRef)(),K=(0,Mb.useRef)(),te=(0,Mb.useState)(),se=jo(te,2),le=se[0],pe=se[1],me=Rot(h),_e=jo(me,2),de=_e[0],Ce=_e[1];function Ze(){h&&Ce(A())}var rt=kot(r,Ze),ct=jo(rt,2),qe=ct[0],lt=ct[1],_t=(0,Mb.useState)(0),Tt=jo(_t,2),et=Tt[0],pt=Tt[1],ot=(0,Mb.useRef)();wD(function(){qe==="alignPre"&&pt(0)},[qe]);function $e(){return E||A}function De(){var Mt;(Mt=Z.current)===null||Mt===void 0||Mt.forceAlign()}function Ke(Mt,Yt){var jt=P(Yt);le!==jt&&pe(jt),pt(function(Ut){return Ut+1}),qe==="align"&&(j==null||j(Mt,Yt))}wD(function(){qe==="align"&&(et<3?De():lt(function(){var Mt;(Mt=ot.current)===null||Mt===void 0||Mt.call(ot)}))},[et]);var Ge=nr({},k7(e));["onAppearEnd","onEnterEnd","onLeaveEnd"].forEach(function(Mt){var Yt=Ge[Mt];Ge[Mt]=function(jt,Ut){return lt(),Yt==null?void 0:Yt(jt,Ut)}});function ft(){return new Promise(function(Mt){ot.current=Mt})}Mp.useEffect(function(){!Ge.motionName&&qe==="motion"&&lt()},[Ge.motionName,qe]),Mp.useImperativeHandle(t,function(){return{forceAlign:De,getElement:function(){return K.current}}});var mt=nr(nr({},de),{},{zIndex:c,opacity:qe==="motion"||qe==="stable"||!r?void 0:0,pointerEvents:!r&&qe!=="stable"?"none":void 0},i),Ot=!0;w!=null&&w.points&&(qe==="align"||qe==="stable")&&(Ot=!1);var At=a;return Mp.Children.count(a)>1&&(At=Mp.createElement("div",{className:"".concat(n,"-content")},a)),Mp.createElement(LT,yo({visible:r,ref:K,leavedClassName:"".concat(n,"-hidden")},Ge,{onAppearPrepare:ft,onEnterPrepare:ft,removeOnLeave:m,forceRender:y}),function(Mt,Yt){var jt=Mt.className,Ut=Mt.style,ar=(0,jot.default)(n,o,le,jt);return Mp.createElement(Pot,{target:$e(),key:"popup",ref:Z,monitorWindowResize:!0,disabled:Ot,align:w,onAlign:Ke},Mp.createElement("div",{ref:Yt,className:ar,onMouseEnter:D,onMouseLeave:L,onMouseDownCapture:z,onTouchStartCapture:B,onClick:G,style:nr(nr({},Ut),mt)},At))})});qot.displayName="PopupInner";var zot=qot;u();var Pf=ee(ke());var Fot=ee(ko()),Uot=Pf.forwardRef(function(e,t){var r=e.prefixCls,n=e.visible,o=e.zIndex,i=e.children,a=e.mobile;a=a===void 0?{}:a;var c=a.popupClassName,h=a.popupStyle,m=a.popupMotion,y=m===void 0?{}:m,w=a.popupRender,E=e.onClick,A=Pf.useRef();Pf.useImperativeHandle(t,function(){return{forceAlign:function(){},getElement:function(){return A.current}}});var P=nr({zIndex:o},h),j=i;return Pf.Children.count(i)>1&&(j=Pf.createElement("div",{className:"".concat(r,"-content")},i)),w&&(j=w(j)),Pf.createElement(LT,yo({visible:n,ref:A,removeOnLeave:!0},y),function(D,L){var z=D.className,B=D.style,G=(0,Fot.default)(r,c,z);return Pf.createElement("div",{ref:L,className:G,onClick:E,style:nr(nr({},B),P)},j)})});Uot.displayName="MobilePopupInner";var Bot=Uot;var Ekr=["visible","mobile"],Vot=Cb.forwardRef(function(e,t){var r=e.visible,n=e.mobile,o=Zu(e,Ekr),i=(0,OD.useState)(r),a=jo(i,2),c=a[0],h=a[1],m=(0,OD.useState)(!1),y=jo(m,2),w=y[0],E=y[1],A=nr(nr({},o),{},{visible:c});(0,OD.useEffect)(function(){h(r),r&&n&&E(Tnt())},[r,n]);var P=w?Cb.createElement(Bot,yo({},A,{mobile:n,ref:t})):Cb.createElement(zot,yo({},A,{ref:t}));return Cb.createElement("div",null,Cb.createElement(Ple,A),P)});Vot.displayName="Popup";var Got=Vot;u();var Hot=ee(ke()),Skr=Hot.createContext(null),Wle=Skr;function Yle(){}function Tkr(){return""}function Ikr(e){return e?e.ownerDocument:window.document}var Mkr=["onClick","onMouseDown","onTouchStart","onMouseEnter","onMouseLeave","onFocus","onBlur","onContextMenu"];function Ckr(e){var t=function(r){vu(o,r);var n=yu(o);function o(i){var a;mu(this,o),a=n.call(this,i),Zt(Fn(a),"popupRef",Cp.createRef()),Zt(Fn(a),"triggerRef",Cp.createRef()),Zt(Fn(a),"portalContainer",void 0),Zt(Fn(a),"attachId",void 0),Zt(Fn(a),"clickOutsideHandler",void 0),Zt(Fn(a),"touchOutsideHandler",void 0),Zt(Fn(a),"contextMenuOutsideHandler1",void 0),Zt(Fn(a),"contextMenuOutsideHandler2",void 0),Zt(Fn(a),"mouseDownTimeout",void 0),Zt(Fn(a),"focusTime",void 0),Zt(Fn(a),"preClickTime",void 0),Zt(Fn(a),"preTouchTime",void 0),Zt(Fn(a),"delayTimer",void 0),Zt(Fn(a),"hasPopupMouseDown",void 0),Zt(Fn(a),"onMouseEnter",function(h){var m=a.props.mouseEnterDelay;a.fireEvents("onMouseEnter",h),a.delaySetPopupVisible(!0,m,m?null:h)}),Zt(Fn(a),"onMouseMove",function(h){a.fireEvents("onMouseMove",h),a.setPoint(h)}),Zt(Fn(a),"onMouseLeave",function(h){a.fireEvents("onMouseLeave",h),a.delaySetPopupVisible(!1,a.props.mouseLeaveDelay)}),Zt(Fn(a),"onPopupMouseEnter",function(){a.clearDelayTimer()}),Zt(Fn(a),"onPopupMouseLeave",function(h){var m;h.relatedTarget&&!h.relatedTarget.setTimeout&&Sb((m=a.popupRef.current)===null||m===void 0?void 0:m.getElement(),h.relatedTarget)||a.delaySetPopupVisible(!1,a.props.mouseLeaveDelay)}),Zt(Fn(a),"onFocus",function(h){a.fireEvents("onFocus",h),a.clearDelayTimer(),a.isFocusToShow()&&(a.focusTime=Date.now(),a.delaySetPopupVisible(!0,a.props.focusDelay))}),Zt(Fn(a),"onMouseDown",function(h){a.fireEvents("onMouseDown",h),a.preClickTime=Date.now()}),Zt(Fn(a),"onTouchStart",function(h){a.fireEvents("onTouchStart",h),a.preTouchTime=Date.now()}),Zt(Fn(a),"onBlur",function(h){a.fireEvents("onBlur",h),a.clearDelayTimer(),a.isBlurToHide()&&a.delaySetPopupVisible(!1,a.props.blurDelay)}),Zt(Fn(a),"onContextMenu",function(h){h.preventDefault(),a.fireEvents("onContextMenu",h),a.setPopupVisible(!0,h)}),Zt(Fn(a),"onContextMenuClose",function(){a.isContextMenuToShow()&&a.close()}),Zt(Fn(a),"onClick",function(h){if(a.fireEvents("onClick",h),a.focusTime){var m;if(a.preClickTime&&a.preTouchTime?m=Math.min(a.preClickTime,a.preTouchTime):a.preClickTime?m=a.preClickTime:a.preTouchTime&&(m=a.preTouchTime),Math.abs(m-a.focusTime)<20)return;a.focusTime=0}a.preClickTime=0,a.preTouchTime=0,a.isClickToShow()&&(a.isClickToHide()||a.isBlurToHide())&&h&&h.preventDefault&&h.preventDefault();var y=!a.state.popupVisible;(a.isClickToHide()&&!y||y&&a.isClickToShow())&&a.setPopupVisible(!a.state.popupVisible,h)}),Zt(Fn(a),"onPopupMouseDown",function(){if(a.hasPopupMouseDown=!0,clearTimeout(a.mouseDownTimeout),a.mouseDownTimeout=window.setTimeout(function(){a.hasPopupMouseDown=!1},0),a.context){var h;(h=a.context).onPopupMouseDown.apply(h,arguments)}}),Zt(Fn(a),"onDocumentClick",function(h){if(!(a.props.mask&&!a.props.maskClosable)){var m=h.target,y=a.getRootDomNode(),w=a.getPopupDomNode();(!Sb(y,m)||a.isContextMenuOnly())&&!Sb(w,m)&&!a.hasPopupMouseDown&&a.close()}}),Zt(Fn(a),"getRootDomNode",function(){var h=a.props.getTriggerDOMNode;if(h)return h(a.triggerRef.current);try{var m=_D(a.triggerRef.current);if(m)return m}catch(y){}return $ot.default.findDOMNode(Fn(a))}),Zt(Fn(a),"getPopupClassNameFromAlign",function(h){var m=[],y=a.props,w=y.popupPlacement,E=y.builtinPlacements,A=y.prefixCls,P=y.alignPoint,j=y.getPopupClassNameFromAlign;return w&&E&&m.push(Ent(E,A,h,P)),j&&m.push(j(h)),m.join(" ")}),Zt(Fn(a),"getComponent",function(){var h=a.props,m=h.prefixCls,y=h.destroyPopupOnHide,w=h.popupClassName,E=h.onPopupAlign,A=h.popupMotion,P=h.popupAnimation,j=h.popupTransitionName,D=h.popupStyle,L=h.mask,z=h.maskAnimation,B=h.maskTransitionName,G=h.maskMotion,Z=h.zIndex,K=h.popup,te=h.stretch,se=h.alignPoint,le=h.mobile,pe=h.forceRender,me=h.onPopupClick,_e=a.state,de=_e.popupVisible,Ce=_e.point,Ze=a.getPopupAlign(),rt={};return a.isMouseEnterToShow()&&(rt.onMouseEnter=a.onPopupMouseEnter),a.isMouseLeaveToHide()&&(rt.onMouseLeave=a.onPopupMouseLeave),rt.onMouseDown=a.onPopupMouseDown,rt.onTouchStart=a.onPopupMouseDown,Cp.createElement(Got,yo({prefixCls:m,destroyPopupOnHide:y,visible:de,point:se&&Ce,className:w,align:Ze,onAlign:E,animation:P,getClassNameFromAlign:a.getPopupClassNameFromAlign},rt,{stretch:te,getRootDomNode:a.getRootDomNode,style:D,mask:L,zIndex:Z,transitionName:j,maskAnimation:z,maskTransitionName:B,maskMotion:G,ref:a.popupRef,motion:A,mobile:le,forceRender:pe,onClick:me}),typeof K=="function"?K():K)}),Zt(Fn(a),"attachParent",function(h){zc.cancel(a.attachId);var m=a.props,y=m.getPopupContainer,w=m.getDocument,E=a.getRootDomNode(),A;y?(E||y.length===0)&&(A=y(E)):A=w(a.getRootDomNode()).body,A?A.appendChild(h):a.attachId=zc(function(){a.attachParent(h)})}),Zt(Fn(a),"getContainer",function(){if(!a.portalContainer){var h=a.props.getDocument,m=h(a.getRootDomNode()).createElement("div");m.style.position="absolute",m.style.top="0",m.style.left="0",m.style.width="100%",a.portalContainer=m}return a.attachParent(a.portalContainer),a.portalContainer}),Zt(Fn(a),"setPoint",function(h){var m=a.props.alignPoint;!m||!h||a.setState({point:{pageX:h.pageX,pageY:h.pageY}})}),Zt(Fn(a),"handlePortalUpdate",function(){a.state.prevPopupVisible!==a.state.popupVisible&&a.props.afterPopupVisibleChange(a.state.popupVisible)}),Zt(Fn(a),"triggerContextValue",{onPopupMouseDown:a.onPopupMouseDown});var c;return"popupVisible"in i?c=!!i.popupVisible:c=!!i.defaultPopupVisible,a.state={prevPopupVisible:c,popupVisible:c},Mkr.forEach(function(h){a["fire".concat(h)]=function(m){a.fireEvents(h,m)}}),a}return gu(o,[{key:"componentDidMount",value:function(){this.componentDidUpdate()}},{key:"componentDidUpdate",value:function(){var a=this.props,c=this.state;if(c.popupVisible){var h;!this.clickOutsideHandler&&(this.isClickToHide()||this.isContextMenuToShow())&&(h=a.getDocument(this.getRootDomNode()),this.clickOutsideHandler=Ku(h,"mousedown",this.onDocumentClick)),this.touchOutsideHandler||(h=h||a.getDocument(this.getRootDomNode()),this.touchOutsideHandler=Ku(h,"touchstart",this.onDocumentClick)),!this.contextMenuOutsideHandler1&&this.isContextMenuToShow()&&(h=h||a.getDocument(this.getRootDomNode()),this.contextMenuOutsideHandler1=Ku(h,"scroll",this.onContextMenuClose)),!this.contextMenuOutsideHandler2&&this.isContextMenuToShow()&&(this.contextMenuOutsideHandler2=Ku(window,"blur",this.onContextMenuClose));return}this.clearOutsideHandler()}},{key:"componentWillUnmount",value:function(){this.clearDelayTimer(),this.clearOutsideHandler(),clearTimeout(this.mouseDownTimeout),zc.cancel(this.attachId)}},{key:"getPopupDomNode",value:function(){var a;return((a=this.popupRef.current)===null||a===void 0?void 0:a.getElement())||null}},{key:"getPopupAlign",value:function(){var a=this.props,c=a.popupPlacement,h=a.popupAlign,m=a.builtinPlacements;return c&&m?wnt(m,c,h):h}},{key:"setPopupVisible",value:function(a,c){var h=this.props.alignPoint,m=this.state.popupVisible;this.clearDelayTimer(),m!==a&&("popupVisible"in this.props||this.setState({popupVisible:a,prevPopupVisible:m}),this.props.onPopupVisibleChange(a)),h&&c&&a&&this.setPoint(c)}},{key:"delaySetPopupVisible",value:function(a,c,h){var m=this,y=c*1e3;if(this.clearDelayTimer(),y){var w=h?{pageX:h.pageX,pageY:h.pageY}:null;this.delayTimer=window.setTimeout(function(){m.setPopupVisible(a,w),m.clearDelayTimer()},y)}else this.setPopupVisible(a,h)}},{key:"clearDelayTimer",value:function(){this.delayTimer&&(clearTimeout(this.delayTimer),this.delayTimer=null)}},{key:"clearOutsideHandler",value:function(){this.clickOutsideHandler&&(this.clickOutsideHandler.remove(),this.clickOutsideHandler=null),this.contextMenuOutsideHandler1&&(this.contextMenuOutsideHandler1.remove(),this.contextMenuOutsideHandler1=null),this.contextMenuOutsideHandler2&&(this.contextMenuOutsideHandler2.remove(),this.contextMenuOutsideHandler2=null),this.touchOutsideHandler&&(this.touchOutsideHandler.remove(),this.touchOutsideHandler=null)}},{key:"createTwoChains",value:function(a){var c=this.props.children.props,h=this.props;return c[a]&&h[a]?this["fire".concat(a)]:c[a]||h[a]}},{key:"isClickToShow",value:function(){var a=this.props,c=a.action,h=a.showAction;return c.indexOf("click")!==-1||h.indexOf("click")!==-1}},{key:"isContextMenuOnly",value:function(){var a=this.props.action;return a==="contextMenu"||a.length===1&&a[0]==="contextMenu"}},{key:"isContextMenuToShow",value:function(){var a=this.props,c=a.action,h=a.showAction;return c.indexOf("contextMenu")!==-1||h.indexOf("contextMenu")!==-1}},{key:"isClickToHide",value:function(){var a=this.props,c=a.action,h=a.hideAction;return c.indexOf("click")!==-1||h.indexOf("click")!==-1}},{key:"isMouseEnterToShow",value:function(){var a=this.props,c=a.action,h=a.showAction;return c.indexOf("hover")!==-1||h.indexOf("mouseEnter")!==-1}},{key:"isMouseLeaveToHide",value:function(){var a=this.props,c=a.action,h=a.hideAction;return c.indexOf("hover")!==-1||h.indexOf("mouseLeave")!==-1}},{key:"isFocusToShow",value:function(){var a=this.props,c=a.action,h=a.showAction;return c.indexOf("focus")!==-1||h.indexOf("focus")!==-1}},{key:"isBlurToHide",value:function(){var a=this.props,c=a.action,h=a.hideAction;return c.indexOf("focus")!==-1||h.indexOf("blur")!==-1}},{key:"forcePopupAlign",value:function(){if(this.state.popupVisible){var a;(a=this.popupRef.current)===null||a===void 0||a.forceAlign()}}},{key:"fireEvents",value:function(a,c){var h=this.props.children.props[a];h&&h(c);var m=this.props[a];m&&m(c)}},{key:"close",value:function(){this.setPopupVisible(!1)}},{key:"render",value:function(){var a=this.state.popupVisible,c=this.props,h=c.children,m=c.forceRender,y=c.alignPoint,w=c.className,E=c.autoDestroy,A=Cp.Children.only(h),P={key:"trigger"};this.isContextMenuToShow()?P.onContextMenu=this.onContextMenu:P.onContextMenu=this.createTwoChains("onContextMenu"),this.isClickToHide()||this.isClickToShow()?(P.onClick=this.onClick,P.onMouseDown=this.onMouseDown,P.onTouchStart=this.onTouchStart):(P.onClick=this.createTwoChains("onClick"),P.onMouseDown=this.createTwoChains("onMouseDown"),P.onTouchStart=this.createTwoChains("onTouchStart")),this.isMouseEnterToShow()?(P.onMouseEnter=this.onMouseEnter,y&&(P.onMouseMove=this.onMouseMove)):P.onMouseEnter=this.createTwoChains("onMouseEnter"),this.isMouseLeaveToHide()?P.onMouseLeave=this.onMouseLeave:P.onMouseLeave=this.createTwoChains("onMouseLeave"),this.isFocusToShow()||this.isBlurToHide()?(P.onFocus=this.onFocus,P.onBlur=this.onBlur):(P.onFocus=this.createTwoChains("onFocus"),P.onBlur=this.createTwoChains("onBlur"));var j=(0,Wot.default)(A&&A.props&&A.props.className,w);j&&(P.className=j);var D=nr({},P);xD(A)&&(D.ref=PT(this.triggerRef,A.ref));var L=Cp.cloneElement(A,D),z;return(a||this.popupRef.current||m)&&(z=Cp.createElement(e,{key:"portal",getContainer:this.getContainer,didUpdate:this.handlePortalUpdate},this.getComponent())),!a&&E&&(z=null),Cp.createElement(Wle.Provider,{value:this.triggerContextValue},L,z)}}],[{key:"getDerivedStateFromProps",value:function(a,c){var h=a.popupVisible,m={};return h!==void 0&&c.popupVisible!==h&&(m.popupVisible=h,m.prevPopupVisible=c.popupVisible),m}}]),o}(Cp.Component);return Zt(t,"contextType",Wle),Zt(t,"defaultProps",{prefixCls:"rc-trigger-popup",getPopupClassNameFromAlign:Tkr,getDocument:Ikr,onPopupVisibleChange:Yle,afterPopupVisibleChange:Yle,onPopupAlign:Yle,popupClassName:"",mouseEnterDelay:0,mouseLeaveDelay:.1,focusDelay:0,blurDelay:.15,popupStyle:{},destroyPopupOnHide:!1,popupAlign:{},defaultPopupVisible:!1,mask:!1,maskClosable:!0,action:[],showAction:[],hideAction:[],autoDestroy:!1}),t}var Yot=Ckr(xnt);u();var Df={adjustX:1,adjustY:1},Nf=[0,0],Zot={left:{points:["cr","cl"],overflow:Df,offset:[-4,0],targetOffset:Nf},right:{points:["cl","cr"],overflow:Df,offset:[4,0],targetOffset:Nf},top:{points:["bc","tc"],overflow:Df,offset:[0,-4],targetOffset:Nf},bottom:{points:["tc","bc"],overflow:Df,offset:[0,4],targetOffset:Nf},topLeft:{points:["bl","tl"],overflow:Df,offset:[0,-4],targetOffset:Nf},leftTop:{points:["tr","tl"],overflow:Df,offset:[-4,0],targetOffset:Nf},topRight:{points:["br","tr"],overflow:Df,offset:[0,-4],targetOffset:Nf},rightTop:{points:["tl","tr"],overflow:Df,offset:[4,0],targetOffset:Nf},bottomRight:{points:["tr","br"],overflow:Df,offset:[0,4],targetOffset:Nf},rightBottom:{points:["bl","br"],overflow:Df,offset:[4,0],targetOffset:Nf},bottomLeft:{points:["tl","bl"],overflow:Df,offset:[0,4],targetOffset:Nf},leftBottom:{points:["br","bl"],overflow:Df,offset:[-4,0],targetOffset:Nf}};u();var Y7=ee(ke()),Kot=ee(ko());function Z7(e){var t=e.showArrow,r=e.arrowContent,n=e.children,o=e.prefixCls,i=e.id,a=e.overlayInnerStyle,c=e.className,h=e.style;return Y7.createElement("div",{className:(0,Kot.default)("".concat(o,"-content"),c),style:h},t!==!1&&Y7.createElement("div",{className:"".concat(o,"-arrow"),key:"arrow"},r),Y7.createElement("div",{className:"".concat(o,"-inner"),id:i,role:"tooltip",style:a},typeof n=="function"?n():n))}var Akr=["overlayClassName","trigger","mouseEnterDelay","mouseLeaveDelay","overlayStyle","prefixCls","children","onVisibleChange","afterVisibleChange","transitionName","animation","motion","placement","align","destroyTooltipOnHide","defaultVisible","getTooltipContainer","overlayInnerStyle","arrowContent","overlay","id","showArrow"],Okr=function(t,r){var n=t.overlayClassName,o=t.trigger,i=o===void 0?["hover"]:o,a=t.mouseEnterDelay,c=a===void 0?0:a,h=t.mouseLeaveDelay,m=h===void 0?.1:h,y=t.overlayStyle,w=t.prefixCls,E=w===void 0?"rc-tooltip":w,A=t.children,P=t.onVisibleChange,j=t.afterVisibleChange,D=t.transitionName,L=t.animation,z=t.motion,B=t.placement,G=B===void 0?"right":B,Z=t.align,K=Z===void 0?{}:Z,te=t.destroyTooltipOnHide,se=te===void 0?!1:te,le=t.defaultVisible,pe=t.getTooltipContainer,me=t.overlayInnerStyle,_e=t.arrowContent,de=t.overlay,Ce=t.id,Ze=t.showArrow,rt=Ze===void 0?!0:Ze,ct=Zu(t,Akr),qe=(0,qT.useRef)(null);(0,qT.useImperativeHandle)(r,function(){return qe.current});var lt=nr({},ct);"visible"in t&&(lt.popupVisible=t.visible);var _t=function(){return Zle.createElement(Z7,{showArrow:rt,arrowContent:_e,key:"content",prefixCls:E,id:Ce,overlayInnerStyle:me},de)},Tt=!1,et=!1;if(typeof se=="boolean")Tt=se;else if(se&&No(se)==="object"){var pt=se.keepParent;Tt=pt===!0,et=pt===!1}return Zle.createElement(Yot,yo({popupClassName:n,prefixCls:E,popup:_t,action:i,builtinPlacements:Zot,popupPlacement:G,ref:qe,popupAlign:K,getPopupContainer:pe,onPopupVisibleChange:P,afterPopupVisibleChange:j,popupTransitionName:D,popupAnimation:L,popupMotion:z,defaultPopupVisible:le,destroyPopupOnHide:Tt,autoDestroy:et,mouseLeaveDelay:m,popupStyle:y,mouseEnterDelay:c},lt),A)},Xot=(0,qT.forwardRef)(Okr);var Jot=Xot;var Pkr=sv.forwardRef(function(e,t){var r=e.visible,n=e.overlay,o=sv.useRef(null),i=PT(t,o),a=sv.useRef(null);function c(){zc.cancel(a.current)}function h(){a.current=zc(function(){var m;(m=o.current)===null||m===void 0||m.forcePopupAlign()})}return sv.useEffect(function(){return r?h():c(),c},[r,n]),sv.createElement(Jot,yo({ref:i},e))}),Kle=Pkr;function Xle(e){var t;return t=function(r){vu(o,r);var n=yu(o);function o(){var i;return mu(this,o),i=n.apply(this,arguments),i.state={visibles:{}},i.handleTooltipVisibleChange=function(a,c){i.setState(function(h){return{visibles:nr(nr({},h.visibles),{},Zt({},a,c))}})},i.handleWithTooltip=function(a){var c=a.value,h=a.dragging,m=a.index,y=a.disabled,w=Zu(a,["value","dragging","index","disabled"]),E=i.props,A=E.tipFormatter,P=E.tipProps,j=E.handleStyle,D=E.getTooltipContainer,L=P.prefixCls,z=L===void 0?"rc-slider-tooltip":L,B=P.overlay,G=B===void 0?A(c):B,Z=P.placement,K=Z===void 0?"top":Z,te=P.visible,se=te===void 0?!1:te,le=Zu(P,["prefixCls","overlay","placement","visible"]),pe;return Array.isArray(j)?pe=j[m]||j[0]:pe=j,PD.default.createElement(Kle,yo({},le,{getTooltipContainer:D,prefixCls:z,overlay:G,placement:K,visible:!y&&(i.state.visibles[m]||h)||se,key:m}),PD.default.createElement(AT,yo({},w,{style:nr({},pe),value:c,onMouseEnter:function(){return i.handleTooltipVisibleChange(m,!0)},onMouseLeave:function(){return i.handleTooltipVisibleChange(m,!1)}})))},i}return gu(o,[{key:"render",value:function(){return PD.default.createElement(e,yo({},this.props,{handle:this.handleWithTooltip}))}}]),o}(PD.default.Component),t.defaultProps={tipFormatter:function(n){return n},handleStyle:[{}],tipProps:{},getTooltipContainer:function(n){return n.parentNode}},t}var K7=ant;K7.Range=a7;K7.Handle=AT;K7.createSliderWithTooltip=Xle;var X7=K7;u();var FT=ee(It(),1),ia=ee(ke(),1);u();u();var Xd=ee(It(),1),Ap=ee(ke(),1);function Dkr(e,t){function r(n){return n>="0"&&n<="9"}return e.split("").some(n=>!r(n)&&n!==t)}var Qot=(0,Ap.forwardRef)(function({className:t,value:r,onBlur:n=()=>{},onKeyDown:o=()=>{},onChange:i=()=>{},readOnly:a,tabIndex:c,placeholder:h,name:m},y){let[w,E]=(0,Ap.useState)(r),[A,P]=(0,Ap.useState)(r);A!==r&&(P(r),E(r));let j=(0,Ap.useMemo)(()=>mr.getSettings().LANGUAGE_CODE===gf.DE?".":"/",[]),D=(0,Ap.useCallback)(z=>{let B=`${z.target.value}`;Dkr(B,j)||B.length>10||(E(z.target.value),i(z.target.value))},[j]),L=(0,Ap.useCallback)(z=>{n(z,w)},[w,n]);return Ap.default.createElement("div",{className:"date-input-root"},Ap.default.createElement("input",{className:qt(a&&"readonly",t),ref:y,value:w,onBlur:L,onKeyDown:o,onChange:D,readOnly:a!=null?a:void 0,tabIndex:c!=null?c:void 0,placeholder:h!=null?h:void 0,name:m!=null?m:void 0}))});Qot.propTypes={value:Xd.default.string.isRequired,className:Xd.default.string,onBlur:Xd.default.func,onKeyDown:Xd.default.func,onChange:Xd.default.func,readOnly:Xd.default.bool,tabIndex:Xd.default.number,placeholder:Xd.default.string,defaultValue:Xd.default.string,name:Xd.default.string};var eit=Qot;var zT=eit;var tit=({values:e,min:t,max:r,onChange:n})=>{let[o,i]=(0,ia.useState)(e),[a,c]=(0,ia.useState)(!1),[h,m]=(0,ia.useState)(0),[y,w]=(0,ia.useState)(1),E=(0,ia.useRef)(),A=(0,ia.useRef)(),P=(0,ia.useRef)(),{start:j,end:D}=(0,ia.useMemo)(()=>({start:Ol(o[0]*1e3),end:Ol(o[1]*1e3)}),[o]),L=(0,ia.useCallback)((Z,K)=>{let te=Oc(K).valueOf()/1e3,se=o[1];if(Z.relatedTarget!==A.current&&Z.relatedTarget!==P.current&&c(!1),!Yh(te)||te>se||te<t){n([o[0],o[1]]),m(Date.now());return}n([te,se])},[o]),z=(0,ia.useCallback)((Z,K)=>{let te=o[0],se=Oc(K).valueOf()/1e3;if(Z.relatedTarget!==E.current&&Z.relatedTarget!==P.current&&c(!1),!Yh(se)||te>se||se>r){n([o[0],o[1]]),w(Date.now());return}n([te,se])},[o]),B=(0,ia.useCallback)(Z=>{Z.key==="Enter"&&(Z.target===E.current&&A.current.focus(),Z.target===A.current&&(Z.target.blur(),c(!1)))},[]),G=(0,ia.useCallback)(()=>{a||E.current.focus(),c(Z=>!Z)},[]);return(0,ia.useEffect)(()=>{i(e)},[e]),ia.default.createElement("div",{className:"timeslider-controls-root"},ia.default.createElement(zT,{ref:E,key:h,value:j,onBlur:L,onKeyDown:B,readOnly:!a,tabIndex:a?void 0:-1}),ia.default.createElement("span",null,"\u2013"),ia.default.createElement(zT,{ref:A,key:y,value:D,onBlur:z,onKeyDown:B,readOnly:!a,tabIndex:a?void 0:-1}),ia.default.createElement("button",{ref:P,className:qt("edit-button",a&&"edit-state"),onClick:G},ia.default.createElement(Hr,{name:"edit-inverse"})))};tit.propTypes={values:FT.default.arrayOf(FT.default.number).isRequired,min:FT.default.number.isRequired,max:FT.default.number.isRequired,onChange:FT.default.func.isRequired};var rit=tit;u();var Ab=ee(It(),1),UT=ee(ke(),1);var nit=(0,UT.forwardRef)(function({className:t,posX:r,shouldUseDate:n,value:o},i){let a=(0,UT.useMemo)(()=>Array.isArray(o)?n?`${Ol(o[0]*1e3)} - ${Ol(o[1]*1e3)}`:`${o[0]} - ${o[1]}`:n?Ol(o*1e3):o,[o]);return UT.default.createElement("div",{ref:i,className:t,style:{transform:`translate(${r}px)`}},a)});nit.propTypes={className:Ab.default.string,posX:Ab.default.number.isRequired,shouldUseDate:Ab.default.bool.isRequired,value:Ab.default.oneOfType([Ab.default.array,Ab.default.number]).isRequired};var J7=nit;u();var oit=(e,t,r,n)=>{let o=e.map(m=>(m-t[0])/(t[1]-t[0])),i=o[0]*n,a=o[1]*n,c=Jle(i,r,n),h=Jle(a,r,n);return{posMin:c,posMax:h}},iit=(e,t,r,n)=>{let a=((e[1]-e[0])/2+e[0]-t[0])/(t[1]-t[0])*n;return Jle(a,r,n)},Jle=(e,t,r)=>e<t/2?0:e>r-t/2?r-t:e-t/2;var Qle=[1e3,1e3],eue=e=>{let{title:t,values:r,timeRange:n,onChange:o,sliderProps:i,shouldUseDate:a,showControls:c}=e,[h,m]=(0,vi.useState)(r),[y,w]=(0,vi.useState)(0),[E,A]=(0,vi.useState)(0),[P,j]=(0,vi.useState)(0),[D,L]=(0,vi.useState)({min:0,max:0}),[z,B]=(0,vi.useState)(0),[G,Z]=(0,vi.useState)(!1),K=(0,vi.useRef)(),te=(0,vi.useRef)(),se=(0,vi.useRef)(),le=(0,vi.useCallback)(_e=>{let{posMin:de,posMax:Ce}=oit(_e,n,y,P);if(Math.abs(de-Ce)<y){Z(!0);let rt=iit(_e,n,E,P);B(rt);return}Z(!1),L({min:de,max:Ce})},[n,y,P]),pe=(0,vi.useCallback)(_e=>{le(_e),m(_e)},[le]),me=(0,vi.useCallback)(_e=>{pe(_e),o(_e)},[pe,o]);return(0,vi.useEffect)(()=>{if(K.current&&te.current&&se.current){let _e=K.current.getBoundingClientRect().width,de=te.current.getBoundingClientRect().width,Ce=se.current.getBoundingClientRect().width;L({min:0,max:_e-de}),A(Ce),j(_e),w(de)}},[]),(0,vi.useEffect)(()=>{m(r),le(r)},[r,le]),vi.default.createElement("div",{className:"timeslider-container"},vi.default.createElement("div",{className:"timeslider-control-container"},vi.default.createElement("label",null,t),c&&vi.default.createElement(rit,{min:n[0],max:n[1],values:h,onChange:me})),vi.default.createElement("div",{ref:K,className:"slider-container"},vi.default.createElement(a7,Te({allowCross:!1,ariaLabelledByGroupForHandles:["min-value","max-value"],min:n[0],max:n[1],onChange:pe,onAfterChange:o,value:h},i)),vi.default.createElement(J7,{className:qt("tooltip min-value",G&&"labels-too-close"),posX:D.min,ref:te,value:G?Qle[0]:h[0],shouldUseDate:a}),vi.default.createElement(J7,{className:qt("tooltip max-value",G&&"labels-too-close"),posX:D.max,value:G?Qle[1]:h[1],shouldUseDate:a}),vi.default.createElement(J7,{className:qt("tooltip min-max-value",G&&"labels-too-close"),posX:z,ref:se,value:G?h:Qle,shouldUseDate:a})))};eue.defaultProps={timeRange:[1850,1970],shouldUseDate:!1,showControls:!1};eue.propTypes={title:gm.default.string.isRequired,values:gm.default.arrayOf(gm.default.number),timeRange:gm.default.arrayOf(gm.default.number),onChange:gm.default.func.isRequired,sliderProps:gm.default.object,shouldUseDate:gm.default.bool,showControls:gm.default.bool};var ait=eue;var Q7=ait;var lv=ee(ke(),1);u();var tue=ee(ke(),1);var sit=()=>{let e=bt(Art),t=pr(({snapshot:n})=>()=>yt(null,null,function*(){let o=yield n.getPromise(rr),i=yield n.getPromise(N0);Me(o)&&Me(i)&&i.setFilters(o)})),r=pr(({snapshot:n})=>o=>yt(null,null,function*(){let i=yield n.getPromise(rr),a=yield n.getPromise(N0);Me(i)&&Me(a)&&a.setFilters(i,o)}));return(0,tue.useEffect)(()=>{e===null?t():r(e)},[e]),(0,tue.useEffect)(()=>()=>{t()},[]),null};var lit=()=>{let e=bt(WF),t=bt(Wse),r=bt(D0),n=Lr(IT);return lv.default.createElement(lv.default.Fragment,null,lv.default.createElement("div",{className:qt("plain-divider",r===Es.FILTER&&e&&"filtered")},lv.default.createElement("span",{className:qt("caret-container",r===Es.FILTER&&e&&"filtered")},lv.default.createElement(Hr,{name:"caret"}))),lv.default.createElement("div",{className:qt("filter-container",r===Es.FILTER&&e&&"in")},r!==Es.EDIT&&e&&lv.default.createElement(Q7,{title:`${fe("geojsonlayerpanel-timefilter-title")}: `,timeRange:t,onChange:o=>n(o),values:t,sliderProps:{step:86400,draggableTrack:!0},shouldUseDate:!0,showControls:!0})),lv.default.createElement(sit,null))};var vit=ee(It(),1);u();var uv=ee(ke(),1);u();var uit=(e,t)=>{let r="data:text/json;charset=utf-8,"+encodeURIComponent(t),n=document.createElement("a");n.setAttribute("href",r),n.setAttribute("download",`${e}.json`),n.click()};var Nkr=()=>{let e=bt(Crt),[t,r]=Io(D0),n=bt(WF),o=(0,uv.useCallback)(()=>{r(a=>a===Es.FILTER?Es.INITIAL:Es.FILTER)},[]),i=pr(({snapshot:a})=>()=>yt(null,null,function*(){let c=yield a.getPromise(uD),h=yield a.getPromise(N0),m={type:"FeatureCollection",features:c},y=$o.toPersistenceState(m),w=JSON.stringify(y),E=h.getMetadata("title");uit(E,w)}),[]);return uv.default.createElement(uv.default.Fragment,null,uv.default.createElement(mn,{className:"geojson-headline--button export-button",disabled:!e,onClick:i,title:fe("layermanagement-export-geojson")},uv.default.createElement(Hr,{name:"export-geojson"})),uv.default.createElement(mn,{className:"geojson-headline--button filter-button",disabled:t===Es.EDIT||!n,onClick:o,title:fe("layermanagement-filter-geojson-features")},uv.default.createElement(Hr,{name:"filter"})))},cit=Nkr;u();var e9=()=>{let e=pr(({set:r})=>()=>yt(null,null,function*(){r(nl,structuredClone(u0)),r(kl,{}),r(Wo,{type:Ka.REMOTE,id:null,layerRole:"owner"}),r(Pc,Qs.DRAW),r(bs,Ti.METADATA)}),[]),t=pr(({snapshot:r,set:n})=>o=>yt(null,null,function*(){var h;let i=yield r.getPromise(rr);if(!Me(i)||!Me(o))throw new Error("Cannot switch to draw mode. Map or layer not defined.");if(o.isExternalVectorMap())throw new Error("Cannot switch to draw mode. External vector maps are not supported.");o.setVisibility(i,"none"),n(nl,o.getGeoJson()),n(kl,{[Ue.title]:o.getMetadata(Ue.title),[Ue.description]:o.getMetadata(Ue.description),[Ue.thumbnailUrl]:o.getMetadata(Ue.thumbnailUrl),[Ue.timePeriod]:o.getMetadata(Ue.timePeriod)});let a=o.getMetadata(Ue.vectorMapId),c=o.getMetadata(Ue.version);n(Wo,{type:a?"remote":"local",id:a!=null?a:null,version:c!=null?c:null,layerRole:(h=o.getMetadata(Ue.userRole))!=null?h:null}),n(Pc,Qs.DRAW)}),[]);return{createNewVectorMap:e,editVectorMap:t}};u();var pit="unsaved_external_layer",DD=e=>e===pit,t9=()=>{let e=pr(({set:r,snapshot:n})=>()=>yt(null,null,function*(){let o=yield n.getPromise(rr);if(!Me(o))throw new Error("Cannot switch to external vector map mode. Map is not defined.");let i=$o.fromApplication({metadata:{[Ue.id]:pit},geoJson:structuredClone(u0)});i.addLayerToMap(o),r(ja,i),r(Pc,Qs.VECTOR_MAP_EXTERNAL),r(Ef,Cc.METADATA)}),[]),t=pr(({set:r,snapshot:n})=>o=>yt(null,null,function*(){let i=yield n.getPromise(rr);if(!Me(i)||!Me(o))throw new Error("Cannot switch to external vector map mode. Map or layer is not defined.");let a=o.getMetadata(),c=o.getGeoJson(),h=`${a[Ue.id]}-temp`,m=$o.fromApplication({metadata:Dt(Te({},a),{[Ue.id]:h}),geoJson:structuredClone(c)});m.addLayerToMap(i),o.setVisibility(i,"none"),r(ja,m),r(Ef,Cc.METADATA),r(Pc,Qs.VECTOR_MAP_EXTERNAL)}),[]);return{createNewExternalVectorMap:e,editExternalVectorMap:t}};u();u();var ul=ee(ke(),1),r9=ee(It(),1);u();var rue=mr.getSettings().LANGUAGE_CODE===gf.DE?"de-DE":"en-US",fit=new Intl.PluralRules(rue),dit=new Intl.NumberFormat(rue,{signDisplay:"exceptZero"}),Lkr=new Intl.DateTimeFormat(rue,{hour:"2-digit",minute:"2-digit",hour12:!1,day:"2-digit",month:"2-digit",year:"numeric"});function hit(e,t="de"){let r=Lkr.formatToParts(e),n={hour:r.find(o=>o.type==="hour").value,minute:r.find(o=>o.type==="minute").value,day:r.find(o=>o.type==="day").value,month:r.find(o=>o.type==="month").value,year:r.find(o=>o.type==="year").value};return t==="de"?`${n.hour}:${n.minute} Uhr ${n.day}.${n.month}.${n.year}`:`${n.hour}:${n.minute} o'clock ${n.day}.${n.month}.${n.year}`}function R0(e){if(!Me(e))return fe("geojson-featureview-no-time");let[t,r]=e;return!Yh(t)||!Yh(r)?fe("geojson-featureview-invalid-time"):t===r?Ol(t):`${Ol(t)}\u2013${Ol(r)}`}var mit=({data:e,index:t,style:r})=>{let n=e.features[t],{properties:o,geometry:i}=n,a=(0,ul.useCallback)(()=>{e.onFeatureClick(n.id)},[e.onFeatureClick,n.id]),{defaultTitle:c}=(0,ul.useMemo)(()=>({defaultTitle:fe("geojson-featureview-no-title")}),[]),h=(0,ul.useMemo)(()=>{let{type:w}=i;return w===Vu.MULTI_LINE_STRING?Vu.LINE_STRING:w===Vu.MULTI_POLYGON?Vu.POLYGON:w===Vu.MULTI_POINT?Vu.POINT:w===Vu.GEOMETRY_COLLECTION?Vu.POLYGON:Object.values(Vu).includes(w)?w:Vu.POLYGON},[i]),m=(0,ul.useMemo)(()=>{let w=o[kn.time];return R0(w)},[o[kn.time]]),y=(0,ul.useMemo)(()=>{var w;return(w=o[kn.title])!=null?w:c},[o[kn.title]]);return ul.default.createElement("li",{className:"geojson-feature-item-root",onClick:a,style:r},ul.default.createElement("div",{className:"geojson-feature-item-container"},ul.default.createElement("div",{className:"sub-headline"},ul.default.createElement("div",{className:`type-icon icon--${h}`},ul.default.createElement(Hr,{name:h})),ul.default.createElement("div",{className:"type-text"},h)),ul.default.createElement("div",{className:"title"},y),ul.default.createElement("div",{className:"details"},fe("geojson-featureview-time")," ",m)))};mit.propTypes={data:r9.default.object.isRequired,index:r9.default.number.isRequired,style:r9.default.object};var nue=(0,ul.memo)(mit);u();var Bc=ee(ke(),1),n9=ee(It(),1);var git=({data:e,index:t,style:r})=>{let n=e.features[t],{properties:o}=n,i=(0,Bc.useCallback)(()=>{e.onFeatureClick(n.id)},[e.onFeatureClick,n.id]),{defaultTitle:a}=(0,Bc.useMemo)(()=>({defaultTitle:fe("geojson-featureview-no-title")}),[]),c=(0,Bc.useMemo)(()=>{let w=mr.getSettings().LANGUAGE_CODE===gf.DE?o[na.timeLabelDe]:o[na.timeLabelEn];if(Me(w))return w;let E=o[kn.time];return R0(E)},[o[kn.time]]),{title:h,affiliation:m}=(0,Bc.useMemo)(()=>{var y,w;return{title:(y=o[kn.title])!=null?y:a,affiliation:(w=o[na.parentLabel])!=null?w:""}},[o[kn.title],o[na.parentLabel]]);return Bc.default.createElement("li",{className:"geojson-feature-item-root",onClick:i,style:r},Bc.default.createElement("div",{className:"geojson-feature-item-container"},Bc.default.createElement("div",{className:"title"},h),Bc.default.createElement("div",{className:"details"},fe("idohist-date-label")," ",c," ",Bc.default.createElement("br",null),m!==""&&m)))};git.propTypes={data:n9.default.object.isRequired,index:n9.default.number.isRequired,style:n9.default.object};var oue=(0,Bc.memo)(git);var kkr=e=>Me(e)?e.isExternalVectorMap()?Urt():Brt(e):!1,yit=({selectedLayer:e})=>{let[t,r]=Io(D0),n=Lr(IT),o=Lr(N0),i=Lr(tl),a=Lr(el),{editVectorMap:c}=e9(),{editExternalVectorMap:h}=t9(),m=bt(rr),{title:y,description:w,displayTime:E,layerId:A}=(0,va.useMemo)(()=>({title:e==null?void 0:e.getMetadata(Ue.title),description:e==null?void 0:e.getMetadata(Ue.description),displayTime:e==null?void 0:e.getDisplayTime(),layerId:e==null?void 0:e.getMetadata(Ue.id)}),[e]),P=(0,va.useMemo)(()=>E!=null?E:fe("geojson-featureview-no-time"),[E]),j=(0,va.useMemo)(()=>e.getMetadata(Ue.externalContentType)===Uu.IDOHIST?oue:nue,[e]),D=(0,va.useCallback)(()=>{i(null),r(Es.INITIAL),n(null)},[]),L=(0,va.useCallback)(()=>yt(null,null,function*(){try{e.isExternalVectorMap()?yield h(e):yield c(e)}catch(G){console.error(G);return}}),[e]),z=(0,va.useCallback)(()=>{e.setVisibility(m,"visible"),r(Es.INITIAL)},[e]),B=(0,va.useCallback)(G=>{a({featureId:G,sourceId:A})},[A]);return(0,va.useEffect)(()=>(o(e),()=>{r(Es.INITIAL),n(null),o(null)}),[e]),va.default.createElement(va.default.Fragment,null,va.default.createElement(Cf,{title:fe("geojsonlayerpanel-header-title"),onEditClick:t!==Es.EDIT&&kkr(e)?L:void 0,onCloseClick:t===Es.EDIT?z:D}),va.default.createElement("div",{className:"headline-container"},va.default.createElement("div",{className:"geojson-headline--date"},P),va.default.createElement("div",{className:"title-row"},va.default.createElement("div",{className:"geojson-headline--title"},y),va.default.createElement(cit,null)),va.default.createElement("div",{className:"description-row"},va.default.createElement("div",{className:"geojson-headline--description"},w))),va.default.createElement(lit,null),va.default.createElement(Drt,{className:qt("geojson-layer-feature-list-root ",t!==Es.EDIT&&["in","scrollable"]),onFeatureClick:B,FeatureItem:j}))};yit.propTypes={selectedLayer:vit.default.instanceOf($o)};var _it=yit;var bit=_it;u();var ya=ee(ke(),1);var VT=ee(It(),1);u();u();var cv=ee(ke(),1);var Rkr=()=>{let e=bt(rr),[t,r]=(0,cv.useState)(!0),n=bt(qn),o=fe(t?"layermanagement-deactivate-all-maps":"layermanagement-activate-all-maps"),i=(0,cv.useCallback)(()=>{n.forEach(a=>{a.setVisibility(e,t?"none":"visible")})},[e,t,n]);return(0,cv.useEffect)(()=>{if(e){let a=()=>{let h=n.length===0?!0:n.some(m=>m.isVisible(e));r(h)},c=()=>{a()};return e._loaded?a():e.on("load",a),e.on(ys.visibilityChanged,c),()=>{e.off(ys.visibilityChanged,c),e.off("load",a)}}},[e,n]),cv.default.createElement("button",{onClick:i,className:qt("deactivate-map-col-control",t?"deactivate":""),title:o,id:"deactivate-all-maps"},cv.default.createElement(hu,{name:"layermanagement-deactivate","aria-labelledby":"deactivate-all-maps",alt:o}))},xit=Rkr;var wit=xit;u();u();var Hl=ee(ke(),1);var o9=ee(It(),1);u();var Eit=(e,t)=>{for(let r in e)Object.prototype.hasOwnProperty.call(e,r)&&e[r].forEach(o=>{o.setOpacity(t,0),o.setVisibility(t,"visible")})},Sit=e=>e.slice().sort((t,r)=>{let n=t.getSortTime(),o=r.getSortTime();return n>o?1:n<o?-1:0}),Tit=(e,t)=>{let r={};return e.forEach(n=>{n.move(t,null);let o=n.getSortTime();o in r?r[o].push(n):r[o]=[n]}),r};var Iit=({animationOptions:e={}})=>{let[t,r]=(0,Hl.useState)(!1),[n,o]=(0,Hl.useState)(void 0),[i,a]=(0,Hl.useState)(!1),c=bt(rr),h=fe(`dynamicmapvis-${i?"close":"open"}`),[m,y]=Io(qn),w=(0,Hl.useRef)(!1),E=B=>{let{layers:G,delay:Z=500}=B;G.forEach(K=>{K.setOpacity(c,0),K.setVisibility(c,"visible")}),setTimeout(()=>{A(B)},Z)},A=B=>{var se;let{layers:G,steps:Z=.1,delay:K=500,successCallback:te}=B;if(w.current){let le=((se=G[0].getOpacity(c))!=null?se:0)+Z;le>1?(G.forEach(pe=>{pe.setOpacity(c,1)}),Me(te)&&te()):(G.forEach(pe=>{pe.setOpacity(c,le)}),setTimeout(()=>{A(B)},K))}},P=B=>{let{sortedLayers:G,delay:Z=500}=B;if(Eit(G,c),w.current){let te=Object.keys(G);if(te.length>0){let se=te[0],le=G[se],K=G,{[se]:pe}=K,me=En(K,[Xde(se)]),_e=()=>{P(Dt(Te({},B),{sortedLayers:me}))};setTimeout(()=>{E(Dt(Te({},B),{layers:le,successCallback:_e}),Z)}),o(se)}else D()}},j=()=>{r(!0),w.current=!0;let B=Sit(m),G=Tit(B,c);y(B),P(Dt(Te({},e),{sortedLayers:G}))},D=()=>{r(!1),w.current=!1,o(void 0)},L=B=>{B.preventDefault(),i?(D(),a(!1)):a(!0)},z=n&&n.length>4?n.split(" ")[2]:n;return Hl.default.createElement("div",{className:qt("vkf-dyn-vis-control",t&&"play",i&&"open"),title:h,"aria-label":h,id:"dynamic-map-visualization"},Hl.default.createElement("button",{type:"button",className:"open-dyn-vis",onClick:L,"aria-labelledby":"dynamic-map-visualization"},Hl.default.createElement("svg",{width:"100%",height:"100%",viewBox:"0 0 30 30",version:"1.1",xmlns:"http://www.w3.org/2000/svg",alt:h},Hl.default.createElement("path",{className:"arrow",d:"M14.822,4.521c0.057,-0.014 0.117,-0.021 0.178,-0.021c1.561,0 3.047,0.348 4.385,0.97c1.342,0.611 2.573,1.513 3.589,2.699c0.83,0.969 1.452,2.052 1.868,3.192c0.425,1.136 0.658,2.363 0.658,3.639c0,1.561 -0.348,3.047 -0.97,4.385c-0.611,1.342 -1.513,2.573 -2.699,3.589c-0.969,0.83 -2.052,1.452 -3.192,1.868c-1.136,0.425 -2.363,0.658 -3.639,0.658c-1.561,0 -3.047,-0.348 -4.385,-0.97c-1.342,-0.611 -2.573,-1.513 -3.589,-2.699l-0.488,-0.569c-0.075,-0.088 -0.126,-0.188 -0.154,-0.292c-1.033,-1.48 -1.696,-3.234 -1.85,-5.122l-1.685,1.685c-0.293,0.293 -0.768,0.293 -1.061,0c-0.293,-0.292 -0.293,-0.768 0,-1.06l3,-3c0.293,-0.293 0.768,-0.293 1.061,0l3,3c0.292,0.292 0.292,0.768 0,1.06c-0.293,0.293 -0.768,0.293 -1.061,0l-1.754,-1.754c0.286,3.268 2.35,6.059 5.208,7.389c2.154,0.98 4.642,1.084 6.877,0.268c2.229,-0.835 4.051,-2.533 5.049,-4.678c0.98,-2.154 1.084,-4.642 0.268,-6.877c-0.835,-2.229 -2.533,-4.051 -4.678,-5.049c-3.095,-1.408 -6.88,-1.008 -9.613,1.333c-0.315,0.269 -0.788,0.233 -1.058,-0.082c-0.269,-0.314 -0.233,-0.788 0.082,-1.057c1.921,-1.646 4.287,-2.469 6.653,-2.505Z"}),Hl.default.createElement("path",{className:"minute-hand",d:"M14.238,8.795l0,5.47c0,0.414 0.336,0.75 0.75,0.75c0.414,0 0.75,-0.336 0.75,-0.75l0,-5.47c0,-0.414 -0.336,-0.75 -0.75,-0.75c-0.414,-0 -0.75,0.336 -0.75,0.75Z"}),Hl.default.createElement("path",{className:"hour-hand",d:"M21.18,14.263l-5.47,-0c-0.414,-0 -0.75,0.336 -0.75,0.75c-0,0.413 0.336,0.75 0.75,0.75l5.47,-0c0.414,-0 0.75,-0.337 0.75,-0.75c0,-0.414 -0.336,-0.75 -0.75,-0.75Z"}))),Hl.default.createElement("div",{className:"content"},Hl.default.createElement("div",{className:qt("feedback",n!==void 0&&"running")},z),Hl.default.createElement("button",{"aria-label":fe("dynamicmapvis-start"),className:"start-button",onClick:j,tabIndex:i?void 0:-1,title:fe("dynamicmapvis-start"),type:"button"},"Start"),Hl.default.createElement("button",{"aria-label":fe("dynamicmapvis-stop"),className:"stop-button",onClick:D,tabIndex:i?void 0:-1,title:fe("dynamicmapvis-stop"),type:"button"},"Stop")))};Iit.propTypes={animationOptions:o9.default.shape({delay:o9.default.number,steps:o9.default.number})};var Mit=Iit;var Cit=Mit;u();u();var yi=ee(ke(),1);var q0=ee(It(),1);u();var i9=ee(ke(),1);function Ait(e,t=300,r={}){let n=(0,i9.useRef)(null),o=(0,i9.useCallback)(i=>{n.current?(clearTimeout(n.current),n.current=null,e&&e(i)):n.current=setTimeout(()=>{r.onSingleTap&&r.onSingleTap(i),n.current=null},t)},[e,t,r.onSingleTap]);return e?{onClick:o}:{}}u();var Lf=ee(ke(),1);var ND=ee(It(),1);var iue=e=>{let{onEndDrag:t,onStartDrag:r,orientation:n="horizontal",layer:o}=e,i=bt(rr),[a,c]=(0,Lf.useState)(o.getOpacity(i)*100),h=(0,Lf.useRef)(null),m=0,y=100,w=(P,j)=>{if(n==="vertical"){var D=100-(P-m)/(y-m)*100;j.style.top=D+"%",j.innerHTML=P.toFixed(0)+"%";return}let L=(P-m)/(y-m)*100;j.style.left=L+"%",j.innerHTML=P+"%"},E=P=>{let{layerId:j}=P;if(j===o.getId()){let D=o.getOpacity(i)*100;c(D)}},A=P=>{c(P),Me(i)&&o.setOpacity(i,P/100)};return(0,Lf.useEffect)(()=>{w(Math.round(a),h.current)},[a]),(0,Lf.useEffect)(()=>{if(i)return i.on(ys.opacityChanged,E),()=>{i.off(ys.opacityChanged,E)}},[i]),Lf.default.createElement("div",{className:"opacity-container"},Lf.default.createElement("div",{className:"slider-container"},Lf.default.createElement(X7,{onAfterChange:t,onBeforeChange:r,onChange:A,value:a,vertical:n==="vertical"}),Lf.default.createElement("div",{className:"tooltip value",ref:h},"100%")))};iue.propTypes={onEndDrag:ND.default.func,onStartDrag:ND.default.func,layer:ND.default.object.isRequired,orientation:ND.default.oneOf(["horizontal","vertical"])};u();var BT=ee(ke(),1),Oit=ee(It(),1);var Pit=r=>{var n=r,{active:e}=n,t=En(n,["active"]);let o=mr.getSettings();return BT.default.createElement("button",Te({className:qt("vkf-drag-button",e&&"active"),title:o==="de"?"Ebene verschieben":"Move layer"},t),BT.default.createElement("span",null),BT.default.createElement("span",null),BT.default.createElement("span",null),BT.default.createElement("span",null))};Pit.propTypes={active:Oit.default.bool};var Dit=Pit;u();var Nit=ee(It(),1),j0=ee(ke(),1);var Lit=e=>{let{layer:t}=e,r=t.getMetadata(Ue.title),n=bt(rr),o=(0,j0.useMemo)(()=>t.isVisible(n),[t,n]),[i,a]=(0,j0.useState)(o),c=m=>{m.preventDefault(),m.stopPropagation(),a(!i),n&&t.setVisibility(n,i?"none":"visible")},h=({layerId:m,value:y})=>{m===t.getId()&&a(y==="visible")};return(0,j0.useEffect)(()=>{if(n)return n.on(ys.visibilityChanged,h),()=>{n.off(ys.visibilityChanged,h)}},[n]),j0.default.createElement("button",{className:qt("disable-layer minimize-tool",i?"record-visible":"record-hidden"),onClick:c,type:"button",title:fe("layermanagement-show-map")},` ${fe("layermanagement-show-map")}: ${r}`)};Lit.propTypes={layer:Nit.default.object};var kit=Lit;u();u();var kf=hu;var aue=ee(ke(),1);var Rit=ee(It(),1);var jit=e=>{let{layer:t}=e,r=bt(rr),n=Lr(qn),[o,i]=Io(el);return aue.default.createElement("button",{className:"remove-layer minimize-tool",onClick:c=>{c.stopPropagation(),Me(r)&&(t.removeMapLibreLayers(r),n(h=>h.filter(m=>m.getId()!==t.getId())),t.getType()===mo.VECTOR_MAP&&(o==null?void 0:o.sourceId)===t.getId()&&i(null))},type:"button",title:fe("layermanagement-remove-map")},aue.default.createElement(kf,{name:"layeraction-remove-map"}))};jit.propTypes={layer:Rit.default.object.isRequired};var qit=jit;u();var LD=ee(ke(),1),zit=ee(It(),1);var Fit=e=>{let{layer:t}=e,{zoomToExtent:r}=O0(),n=(0,LD.useCallback)(()=>{r(t)},[r,t]);return LD.default.createElement("button",{className:"zoom-layer minimize-tool",onClick:n,type:"button",title:fe("layermanagement-zoom-to-map")},LD.default.createElement(kf,{name:"layeraction-center"}))};Fit.propTypes={layer:zit.default.object.isRequired};var Uit=Fit;u();var sue=ee(ke(),1);var Bit=ee(It(),1),Vit=e=>{let{layer:t}=e,r=bt(rr),n=Lr(qn);return sue.default.createElement("button",{className:"move-layer-top minimize-tool",onClick:i=>{i.stopPropagation(),t.moveToTop(r),n(a=>[...a.filter(c=>c!==t),t])},type:"button",title:fe("layermanagement-move-top")},sue.default.createElement(hu,{name:"layeraction-totop"}))};Vit.propTypes={layer:Bit.default.object.isRequired};var Git=Vit;u();var Rf=ee(ke(),1),Hit=ee(It(),1);var $it=({layer:e})=>{let[t,r]=(0,Rf.useState)(AF(e)),n=(0,Rf.useMemo)(()=>iD(e),[e]),{layerType:o,layerTitle:i,isMosaic:a,isRemoteVectorMap:c}=(0,Rf.useMemo)(()=>({layerType:e.getType(),layerTitle:e.getMetadata(Ue.title),isMosaic:e.getMetadata(Ue.type)===mo.MOSAIC_MAP,isRemoteVectorMap:Me(e.getMetadata(Ue.vectorMapId))}),[e]),h=(0,Rf.useCallback)(()=>{t!==n&&r(n)},[n]);return Rf.default.createElement("div",{className:"thumbnail-container"},Rf.default.createElement("img",{onError:h,src:t,alt:`Thumbnail Image of Map for ${i}`}),o===mo.VECTOR_MAP&&Rf.default.createElement("span",{className:qt("vector-badge",!c&&"local-vector-badge")},fe("vector-badge-title")),a&&Rf.default.createElement("span",{className:"mosaic-badge"},fe("mosaic-badge-title")))};$it.propTypes={layer:Hit.default.object.isRequired};var Wit=$it;u();var kD=ee(ke(),1);var Yit=ee(It(),1),Zit=({layer:e})=>{let t=Lr(Xq),r=(0,kD.useCallback)(()=>{t(e.getId())},[e]);return kD.default.createElement("button",{className:"show-original",onClick:r,type:"button",title:fe("layermanagement-show-original")},kD.default.createElement(kf,{name:"layeraction-showoriginal"}))};Zit.propTypes={layer:Yit.default.object};var Kit=Zit;u();var RD=ee(ke(),1),Xit=ee(It(),1);var Jit=({layer:e})=>{let t=Lr(tl),r=(0,RD.useCallback)(()=>{e&&Me(e.getId())&&t(e.getId())},[e]);return RD.default.createElement("button",{className:"show-geojson-layer",onClick:r,type:"button",title:fe("layermanagement-show-geojson")},RD.default.createElement(hu,{name:"layermanagement-show-geojson"}))};Jit.propTypes={layer:Xit.default.instanceOf($o).isRequired};var Qit=Jit;var eat={LAYER:"LAYER"},tat=e=>{let{id:t,index:r,layer:n,onMoveLayer:o}=e,[i,a]=(0,yi.useState)(!1),[c,h]=(0,yi.useState)(!1),[m,y]=(0,yi.useState)(!1),[w,E]=(0,yi.useState)(!1),A=(0,yi.useRef)(null),P=mr.getSettings(),[{handlerId:j},D]=K6({accept:eat.LAYER,collect(rt){return{handlerId:rt.getHandlerId()}},hover(rt,ct){var ot;if(!A.current)return;let qe=rt.index,lt=r;if(qe===lt)return;let _t=(ot=A.current)==null?void 0:ot.getBoundingClientRect(),Tt=(_t.bottom-_t.top)/2,pt=ct.getClientOffset().y-_t.top;qe<lt&&pt<Tt||qe>lt&&pt>Tt||(o(qe,lt),rt.index=lt)}}),[{draggedItem:L,isDragging:z},B]=FBe({type:eat.LAYER,item:()=>({id:t,index:r}),collect:rt=>({isDragging:rt.isDragging(),draggedItem:rt.getItem()})}),G=()=>setTimeout(()=>{A.current!==null&&(A.current.contains(document.activeElement)||K())},100),Z=()=>{a(!0)},K=()=>{a(!1)},te=Ait(()=>{y(rt=>!rt)},500),se=()=>{h(!0)},le=()=>{h(!1)};(0,yi.useEffect)(()=>{i?L===null&&!w&&E(!0):L!==void 0&&!c&&E(!1)},[i,w,c,L]),B(D(A));let pe=n.getId(),me=n.getType(),_e=n.getDisplayTime(),de=n.getMetadata(Ue.title),Ze=n.getMetadata(Ue.type)==="mosaic";return yi.default.createElement("li",Dt(Te({className:qt("vkf-layermanagement-record",z&&"drag-and-drop-placeholder",m&&"show-actions",me===mo.VECTOR_MAP&&"geojson-data",w&&(L===null||L.id===pe)&&"force-hover"),id:r,"data-id":pe,"data-handler-id":j,onFocus:Z,onBlur:G,onMouseEnter:Z,onMouseOver:Z,onMouseLeave:K},te),{ref:A}),yi.default.createElement("div",{className:"visibility-container"},yi.default.createElement(kit,{layer:n})),yi.default.createElement(Wit,{layer:n}),yi.default.createElement("div",{className:"metadata-container"},yi.default.createElement("h3",null,de),yi.default.createElement("div",{className:"timestamps"},yi.default.createElement("span",{className:"timestamps-label"},`${fe("mapsearch-listelement-time")} ${_e}`))),yi.default.createElement("div",{className:"control-container"},yi.default.createElement(Git,{layer:n}),yi.default.createElement(qit,{layer:n}),yi.default.createElement(Uit,{layer:n}),me!==mo.VECTOR_MAP?yi.default.createElement(Kit,{layer:n}):yi.default.createElement(Qit,{layer:n}),!Ze&&P.LINK_TO_GEOREFERENCE!==void 0&&me!==mo.VECTOR_MAP&&yi.default.createElement("button",{className:"georeference-update",title:`${fe("layermangement-georef-update")} ...`,onClick:()=>{window.open(`${P.LINK_TO_GEOREFERENCE}?map_id=${pe}`,"_blank")}},yi.default.createElement(hu,{name:"icon-point-move"})),yi.default.createElement(iue,{onStartDrag:se,onEndDrag:le,orientation:"horizontal",layer:n})),yi.default.createElement("div",{className:"drag-container"},yi.default.createElement(Dit,{tabIndex:-1})))};tat.propTypes={id:q0.default.string,index:q0.default.number,layer:q0.default.oneOfType([q0.default.instanceOf($o),q0.default.instanceOf(kg)]),onMoveLayer:q0.default.func,showActions:q0.default.func};var rat=tat;var nat=rat;u();var cl=ee(ke(),1);function lue(){let{createNewVectorMap:e}=e9(),{createNewExternalVectorMap:t}=t9(),r=Lr(Qq),n=(0,cl.useCallback)(()=>{e()},[]),o=(0,cl.useCallback)(()=>{t()},[]),i=(0,cl.useCallback)(()=>{r(!0)},[]);return cl.default.createElement("div",{className:qt("geojson-container",Xse()&&"has-3-rows")},cl.default.createElement("div",{className:"geojson-action"},cl.default.createElement("button",{disabled:!XF(),onClick:n},cl.default.createElement(Hr,{name:"addVectorMap"}),cl.default.createElement("span",null,fe("layermanagement-create-vector-map")))),Xse()&&cl.default.createElement("div",{className:"geojson-action"},cl.default.createElement("button",{onClick:o},cl.default.createElement(Hr,{name:"addVectorMap"}),cl.default.createElement("span",null,fe("layermanagement-create-external-vector-map")))),cl.default.createElement("div",{className:"geojson-action"},cl.default.createElement("button",{onClick:i},cl.default.createElement(kf,{name:"layermanagement-upload"}),cl.default.createElement("span",null,fe("layermanagement-add-vector-map")))))}var oat=({showControls:e={showBadge:!0,showHideButton:!0,showDynamicMapVisualization:!0},showHeader:t=!0})=>{let{showBadge:r,showDynamicMapVisualization:n,showHideButton:o}=e,[i,a]=(0,ya.useState)(!1),c=bt(rr),h=bt(tl),[m,y]=Io(qn),w=(0,ya.useMemo)(()=>Me(h),[h]),E=(0,ya.useMemo)(()=>m.toReversed(),[m]),A=(j,D)=>{let L=[...E],z=L.splice(j,1)[0];L.splice(D,0,z);let B=D-1,G=B<0?null:L[B].getMapLibreLayerId();z.move(c,G),y(L.reverse())},P=()=>{a(j=>!j)};return ya.default.createElement("div",{className:qt("vkf-layermanagement-root",!w&&"in",i&&"show-controls")},r&&m.length!==0&&ya.default.createElement("span",{className:"badge"},m.length),t&&ya.default.createElement("div",{className:"heading"},ya.default.createElement("span",{className:"header-label"},fe("layermanagement-header-lbl")),ya.default.createElement("div",{className:"header-functions"},ya.default.createElement("span",{className:"deco-caret"},ya.default.createElement(Hr,{name:"caret"})),ya.default.createElement("button",{className:"geojson-upload",onClick:P},ya.default.createElement(Hr,{name:"uploadVectorMap"}),ya.default.createElement("span",{className:"label",id:"geojson-upload-label"},fe("geojson-adddialog-title"))),o&&ya.default.createElement(wit,null),n&&ya.default.createElement(Cit,{animationOptions:{delay:30,steps:.01}}))),ya.default.createElement(lue,null),ya.default.createElement("ul",{className:"layermanagement-body"},m===void 0||m.length===0?ya.default.createElement("li",{className:"empty"},ya.default.createElement("h4",null,fe("layermanagement-start-msg-header")),ya.default.createElement("p",null,fe("layermanagement-start-msg-body"))):E.map((j,D)=>{let L=j.getId();return ya.default.createElement(nat,{onMoveLayer:A,layer:j,index:D,key:L,id:L})})))};oat.propTypes={showControls:VT.default.shape({showBadge:VT.default.bool,showDynamicMapVisualization:VT.default.bool,showHideButton:VT.default.bool}),showHeader:VT.default.bool};var a9=oat;u();var F0=ee(ke(),1);var b9=ee(It(),1);u();u();var s9=ee(ke(),1);var iat=()=>{let e=bt(m0),[t,r]=Io(h0),n=(0,s9.useCallback)(o=>r(o),[]);return s9.default.createElement(Q7,{title:fe("timeslider-adjust-timeperiod"),timeRange:e,onChange:n,values:t,sliderProps:{draggableTrack:!0}})};iat.propTypes={};var aat=iat;var l9=aat;u();var y9=ee(ke(),1);u();var Pb=ee(ke(),1),tce=ee(It(),1);u();var Ju=ee(ke(),1);u();var ir=ee(It()),Qt=ee(ke()),Wkr=ee(hat());u();function mat(e){return typeof e=="object"&&e!=null&&e.nodeType===1}function gat(e,t){return(!t||e!=="hidden")&&e!=="visible"&&e!=="clip"}function cue(e,t){if(e.clientHeight<e.scrollHeight||e.clientWidth<e.scrollWidth){var r=getComputedStyle(e,null);return gat(r.overflowY,t)||gat(r.overflowX,t)||function(n){var o=function(i){if(!i.ownerDocument||!i.ownerDocument.defaultView)return null;try{return i.ownerDocument.defaultView.frameElement}catch(a){return null}}(n);return!!o&&(o.clientHeight<n.scrollHeight||o.clientWidth<n.scrollWidth)}(e)}return!1}function p9(e,t,r,n,o,i,a,c){return i<e&&a>t||i>e&&a<t?0:i<=e&&c<=r||a>=t&&c>=r?i-e-n:a>t&&c<r||i<e&&c>r?a-t+o:0}var vat=function(e,t){var r=window,n=t.scrollMode,o=t.block,i=t.inline,a=t.boundary,c=t.skipOverflowHiddenElements,h=typeof a=="function"?a:function(Yt){return Yt!==a};if(!mat(e))throw new TypeError("Invalid target");for(var m,y,w=document.scrollingElement||document.documentElement,E=[],A=e;mat(A)&&h(A);){if((A=(y=(m=A).parentElement)==null?m.getRootNode().host||null:y)===w){E.push(A);break}A!=null&&A===document.body&&cue(A)&&!cue(document.documentElement)||A!=null&&cue(A,c)&&E.push(A)}for(var P=r.visualViewport?r.visualViewport.width:innerWidth,j=r.visualViewport?r.visualViewport.height:innerHeight,D=window.scrollX||pageXOffset,L=window.scrollY||pageYOffset,z=e.getBoundingClientRect(),B=z.height,G=z.width,Z=z.top,K=z.right,te=z.bottom,se=z.left,le=o==="start"||o==="nearest"?Z:o==="end"?te:Z+B/2,pe=i==="center"?se+G/2:i==="end"?K:se,me=[],_e=0;_e<E.length;_e++){var de=E[_e],Ce=de.getBoundingClientRect(),Ze=Ce.height,rt=Ce.width,ct=Ce.top,qe=Ce.right,lt=Ce.bottom,_t=Ce.left;if(n==="if-needed"&&Z>=0&&se>=0&&te<=j&&K<=P&&Z>=ct&&te<=lt&&se>=_t&&K<=qe)return me;var Tt=getComputedStyle(de),et=parseInt(Tt.borderLeftWidth,10),pt=parseInt(Tt.borderTopWidth,10),ot=parseInt(Tt.borderRightWidth,10),$e=parseInt(Tt.borderBottomWidth,10),De=0,Ke=0,Ge="offsetWidth"in de?de.offsetWidth-de.clientWidth-et-ot:0,ft="offsetHeight"in de?de.offsetHeight-de.clientHeight-pt-$e:0,mt="offsetWidth"in de?de.offsetWidth===0?0:rt/de.offsetWidth:0,Ot="offsetHeight"in de?de.offsetHeight===0?0:Ze/de.offsetHeight:0;if(w===de)De=o==="start"?le:o==="end"?le-j:o==="nearest"?p9(L,L+j,j,pt,$e,L+le,L+le+B,B):le-j/2,Ke=i==="start"?pe:i==="center"?pe-P/2:i==="end"?pe-P:p9(D,D+P,P,et,ot,D+pe,D+pe+G,G),De=Math.max(0,De+L),Ke=Math.max(0,Ke+D);else{De=o==="start"?le-ct-pt:o==="end"?le-lt+$e+ft:o==="nearest"?p9(ct,lt,Ze,pt,$e+ft,le,le+B,B):le-(ct+Ze/2)+ft/2,Ke=i==="start"?pe-_t-et:i==="center"?pe-(_t+rt/2)+Ge/2:i==="end"?pe-qe+ot+Ge:p9(_t,qe,rt,et,ot+Ge,pe,pe+G,G);var At=de.scrollLeft,Mt=de.scrollTop;le+=Mt-(De=Math.max(0,Math.min(Mt+De/Ot,de.scrollHeight-Ze/Ot+ft))),pe+=At-(Ke=Math.max(0,Math.min(At+Ke/mt,de.scrollWidth-rt/mt+Ge)))}me.push({el:de,top:De,left:Ke})}return me};u();var $D=function(){return $D=Object.assign||function(t){for(var r,n=1,o=arguments.length;n<o;n++){r=arguments[n];for(var i in r)Object.prototype.hasOwnProperty.call(r,i)&&(t[i]=r[i])}return t},$D.apply(this,arguments)};var Ykr=0;function XD(){}function Zkr(e,t){if(!e)return;vat(e,{boundary:t,block:"nearest",scrollMode:"if-needed"}).forEach(n=>{let{el:o,top:i,left:a}=n;o.scrollTop=i,o.scrollLeft=a})}function yat(e,t,r){return e===t||t instanceof r.Node&&e.contains&&e.contains(t)}function fue(e,t){let r;function n(){r&&clearTimeout(r)}function o(){for(var i=arguments.length,a=new Array(i),c=0;c<i;c++)a[c]=arguments[c];n(),r=setTimeout(()=>{r=null,e(...a)},t)}return o.cancel=n,o}function js(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];return function(n){for(var o=arguments.length,i=new Array(o>1?o-1:0),a=1;a<o;a++)i[a-1]=arguments[a];return t.some(c=>(c&&c(n,...i),n.preventDownshiftDefault||n.hasOwnProperty("nativeEvent")&&n.nativeEvent.preventDownshiftDefault))}}function vm(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];return n=>{t.forEach(o=>{typeof o=="function"?o(n):o&&(o.current=n)})}}function Kkr(){return String(Ykr++)}function Xkr(e){let{isOpen:t,resultCount:r,previousResultCount:n}=e;return t?r?r!==n?`${r} result${r===1?" is":"s are"} available, use up and down arrow keys to navigate. Press Enter key to select.`:"":"No results are available.":""}function f9(e,t){return Object.keys(e).reduce((r,n)=>(r[n]=Tat(t,n)?t[n]:e[n],r),{})}function Tat(e,t){return e[t]!==void 0}function ZD(e){let{key:t,keyCode:r}=e;return r>=37&&r<=40&&t.indexOf("Arrow")!==0?`Arrow${t}`:t}function KD(e,t,r,n,o){if(o===void 0&&(o=!0),r===0)return-1;let i=r-1;(typeof t!="number"||t<0||t>=r)&&(t=e>0?-1:i+1);let a=t+e;a<0?a=o?i:0:a>i&&(a=o?0:i);let c=Ob(e,a,r,n,o);return c===-1?t>=r?-1:t:c}function Ob(e,t,r,n,o){let i=n(t);if(!i||!i.hasAttribute("disabled"))return t;if(e>0){for(let a=t+1;a<r;a++)if(!n(a).hasAttribute("disabled"))return a}else for(let a=t-1;a>=0;a--)if(!n(a).hasAttribute("disabled"))return a;return o?e>0?Ob(1,0,r,n,!1):Ob(-1,r-1,r,n,!1):-1}function _at(e,t,r,n){return n===void 0&&(n=!0),t.some(o=>o&&(yat(o,e,r)||n&&yat(o,r.document.activeElement,r)))}var Jkr=fue(e=>{Mat(e).textContent=""},500);function Iat(e,t){let r=Mat(t);e&&(r.textContent=e,Jkr(t))}function Mat(e){e===void 0&&(e=document);let t=e.getElementById("a11y-status-message");return t||(t=e.createElement("div"),t.setAttribute("id","a11y-status-message"),t.setAttribute("role","status"),t.setAttribute("aria-live","polite"),t.setAttribute("aria-relevant","additions text"),Object.assign(t.style,{border:"0",clip:"rect(0 0 0 0)",height:"1px",margin:"-1px",overflow:"hidden",padding:"0",position:"absolute",width:"1px"}),e.body.appendChild(t),t)}var Cat={highlightedIndex:-1,isOpen:!1,selectedItem:null,inputValue:""};function Qkr(e,t,r){let{props:n,type:o}=e,i={};Object.keys(t).forEach(a=>{eRr(a,e,t,r),r[a]!==t[a]&&(i[a]=r[a])}),n.onStateChange&&Object.keys(i).length&&n.onStateChange(Te({type:o},i))}function eRr(e,t,r,n){let{props:o,type:i}=t,a=`on${hue(e)}Change`;o[a]&&n[e]!==void 0&&n[e]!==r[e]&&o[a](Te({type:i},n))}function tRr(e,t){return t.changes}function rRr(e){let{selectedItem:t,itemToString:r}=e;return t?`${r(t)} has been selected.`:""}var nRr=fue((e,t)=>{Iat(e(),t)},200),oRr=typeof window!="undefined"&&typeof window.document!="undefined"&&typeof window.document.createElement!="undefined"?Qt.useLayoutEffect:Qt.useEffect;function Aat(e){let{id:t=`downshift-${Kkr()}`,labelId:r,menuId:n,getItemId:o,toggleButtonId:i,inputId:a}=e;return(0,Qt.useRef)({labelId:r||`${t}-label`,menuId:n||`${t}-menu`,getItemId:o||(h=>`${t}-item-${h}`),toggleButtonId:i||`${t}-toggle-button`,inputId:a||`${t}-input`}).current}function due(e,t,r){return e!==void 0?e:r.length===0?-1:r.indexOf(t)}function iRr(e){return e?String(e):""}function bat(e){return /^\S{1}$/.test(e)}function hue(e){return`${e.slice(0,1).toUpperCase()}${e.slice(1)}`}function g9(e){let t=(0,Qt.useRef)(e);return t.current=e,t}function Oat(e,t,r){let n=(0,Qt.useRef)(),o=(0,Qt.useRef)(),i=(0,Qt.useCallback)((w,E)=>{o.current=E,w=f9(w,E.props);let A=e(w,E);return E.props.stateReducer(w,Dt(Te({},E),{changes:A}))},[e]),[a,c]=(0,Qt.useReducer)(i,t),h=g9(r),m=(0,Qt.useCallback)(w=>c(Te({props:h.current},w)),[h]),y=o.current;return(0,Qt.useEffect)(()=>{y&&n.current&&n.current!==a&&Qkr(y,f9(n.current,y.props),a),n.current=a},[a,r,y]),[a,m]}function Pat(e,t,r){let[n,o]=Oat(e,t,r);return[f9(n,r),o]}var YD={itemToString:iRr,stateReducer:tRr,getA11ySelectionMessage:rRr,scrollIntoView:Zkr,circularNavigation:!1,environment:typeof window=="undefined"?{}:window};function Xu(e,t,r){r===void 0&&(r=Cat);let n=e[`default${hue(t)}`];return n!==void 0?n:r[t]}function WD(e,t,r){r===void 0&&(r=Cat);let n=e[t];if(n!==void 0)return n;let o=e[`initial${hue(t)}`];return o!==void 0?o:Xu(e,t,r)}function Dat(e){let t=WD(e,"selectedItem"),r=WD(e,"isOpen"),n=WD(e,"highlightedIndex"),o=WD(e,"inputValue");return{highlightedIndex:n<0&&t&&r?e.items.indexOf(t):n,isOpen:r,selectedItem:t,inputValue:o}}function GT(e,t,r,n){let{items:o,initialHighlightedIndex:i,defaultHighlightedIndex:a}=e,{selectedItem:c,highlightedIndex:h}=t;return o.length===0?-1:i!==void 0&&h===i?i:a!==void 0?a:c?r===0?o.indexOf(c):KD(r,o.indexOf(c),o.length,n,!1):r===0?-1:r<0?o.length-1:0}function Nat(e,t,r,n){let o=(0,Qt.useRef)({isMouseDown:!1,isTouchMove:!1});return(0,Qt.useEffect)(()=>{let i=()=>{o.current.isMouseDown=!0},a=y=>{o.current.isMouseDown=!1,e&&!_at(y.target,t.map(w=>w.current),r)&&n()},c=()=>{o.current.isTouchMove=!1},h=()=>{o.current.isTouchMove=!0},m=y=>{e&&!o.current.isTouchMove&&!_at(y.target,t.map(w=>w.current),r,!1)&&n()};return r.addEventListener("mousedown",i),r.addEventListener("mouseup",a),r.addEventListener("touchstart",c),r.addEventListener("touchmove",h),r.addEventListener("touchend",m),function(){r.removeEventListener("mousedown",i),r.removeEventListener("mouseup",a),r.removeEventListener("touchstart",c),r.removeEventListener("touchmove",h),r.removeEventListener("touchend",m)}},[e,r]),o}var mue=()=>XD;function d9(e,t,r){let h=r,{isInitialMount:n,highlightedIndex:o,items:i,environment:a}=h,c=En(h,["isInitialMount","highlightedIndex","items","environment"]);(0,Qt.useEffect)(()=>{n||nRr(()=>e(Te({highlightedIndex:o,highlightedItem:i[o],resultCount:i.length},c)),a.document)},t)}function Lat(e){let{highlightedIndex:t,isOpen:r,itemRefs:n,getItemNodeFromIndex:o,menuElement:i,scrollIntoView:a}=e,c=(0,Qt.useRef)(!0);return oRr(()=>{t<0||!r||!Object.keys(n.current).length||(c.current===!1?c.current=!0:a(o(t),i))},[t]),c}var gue=XD;function kat(e,t,r){let{type:n,props:o}=t,i;switch(n){case r.ItemMouseMove:i={highlightedIndex:t.disabled?-1:t.index};break;case r.MenuMouseLeave:i={highlightedIndex:-1};break;case r.ToggleButtonClick:case r.FunctionToggleMenu:i={isOpen:!e.isOpen,highlightedIndex:e.isOpen?-1:GT(o,e,0)};break;case r.FunctionOpenMenu:i={isOpen:!0,highlightedIndex:GT(o,e,0)};break;case r.FunctionCloseMenu:i={isOpen:!1};break;case r.FunctionSetHighlightedIndex:i={highlightedIndex:t.highlightedIndex};break;case r.FunctionSetInputValue:i={inputValue:t.inputValue};break;case r.FunctionReset:i={highlightedIndex:Xu(o,"highlightedIndex"),isOpen:Xu(o,"isOpen"),selectedItem:Xu(o,"selectedItem"),inputValue:Xu(o,"inputValue")};break;default:throw new Error("Reducer called without proper action type.")}return Te(Te({},e),i)}function xat(e){for(var t=e.keysSoFar,r=e.highlightedIndex,n=e.items,o=e.itemToString,i=e.getItemNodeFromIndex,a=t.toLowerCase(),c=0;c<n.length;c++){var h=(c+r+1)%n.length,m=n[h];if(m!==void 0&&o(m).toLowerCase().startsWith(a)){var y=i(h);if(!(y!=null&&y.hasAttribute("disabled")))return h}}return r}var Fxo={items:ir.default.array.isRequired,itemToString:ir.default.func,getA11yStatusMessage:ir.default.func,getA11ySelectionMessage:ir.default.func,circularNavigation:ir.default.bool,highlightedIndex:ir.default.number,defaultHighlightedIndex:ir.default.number,initialHighlightedIndex:ir.default.number,isOpen:ir.default.bool,defaultIsOpen:ir.default.bool,initialIsOpen:ir.default.bool,selectedItem:ir.default.any,initialSelectedItem:ir.default.any,defaultSelectedItem:ir.default.any,id:ir.default.string,labelId:ir.default.string,menuId:ir.default.string,getItemId:ir.default.func,toggleButtonId:ir.default.string,stateReducer:ir.default.func,onSelectedItemChange:ir.default.func,onHighlightedIndexChange:ir.default.func,onStateChange:ir.default.func,onIsOpenChange:ir.default.func,environment:ir.default.shape({addEventListener:ir.default.func,removeEventListener:ir.default.func,document:ir.default.shape({getElementById:ir.default.func,activeElement:ir.default.any,body:ir.default.any})})};function aRr(e){var t=e.isOpen,r=e.resultCount,n=e.previousResultCount;return t?r?r!==n?"".concat(r," result").concat(r===1?" is":"s are"," available, use up and down arrow keys to navigate. Press Enter or Space Bar keys to select."):"":"No results are available.":""}var sRr=$D($D({},YD),{getA11yStatusMessage:aRr}),lRr=XD,vue=0,yue=1,_ue=2,bue=3,xue=4,wue=5,Eue=6,Sue=7,h9=8,Rat=9,jat=10,Tue=11,qat=12,Iue=13,Mue=14,Cue=15,zat=16,Fat=17,Uat=18,Bat=19,Aue=20,pue=21,Vat=22,Gat=Object.freeze({__proto__:null,MenuKeyDownArrowDown:vue,MenuKeyDownArrowUp:yue,MenuKeyDownEscape:_ue,MenuKeyDownHome:bue,MenuKeyDownEnd:xue,MenuKeyDownEnter:wue,MenuKeyDownSpaceButton:Eue,MenuKeyDownCharacter:Sue,MenuBlur:h9,MenuMouseLeave:Rat,ItemMouseMove:jat,ItemClick:Tue,ToggleButtonClick:qat,ToggleButtonKeyDownArrowDown:Iue,ToggleButtonKeyDownArrowUp:Mue,ToggleButtonKeyDownCharacter:Cue,FunctionToggleMenu:zat,FunctionOpenMenu:Fat,FunctionCloseMenu:Uat,FunctionSetHighlightedIndex:Bat,FunctionSelectItem:Aue,FunctionSetInputValue:pue,FunctionReset:Vat});function uRr(e,t){let{type:r,props:n,shiftKey:o}=t,i;switch(r){case Tue:i={isOpen:Xu(n,"isOpen"),highlightedIndex:Xu(n,"highlightedIndex"),selectedItem:n.items[t.index]};break;case Cue:{let a=t.key,c=`${e.inputValue}${a}`,h=xat({keysSoFar:c,highlightedIndex:e.selectedItem?n.items.indexOf(e.selectedItem):-1,items:n.items,itemToString:n.itemToString,getItemNodeFromIndex:t.getItemNodeFromIndex});i=Te({inputValue:c},h>=0&&{selectedItem:n.items[h]})}break;case Iue:i={highlightedIndex:GT(n,e,1,t.getItemNodeFromIndex),isOpen:!0};break;case Mue:i={highlightedIndex:GT(n,e,-1,t.getItemNodeFromIndex),isOpen:!0};break;case wue:case Eue:i=Te({isOpen:Xu(n,"isOpen"),highlightedIndex:Xu(n,"highlightedIndex")},e.highlightedIndex>=0&&{selectedItem:n.items[e.highlightedIndex]});break;case bue:i={highlightedIndex:Ob(1,0,n.items.length,t.getItemNodeFromIndex,!1)};break;case xue:i={highlightedIndex:Ob(-1,n.items.length-1,n.items.length,t.getItemNodeFromIndex,!1)};break;case _ue:i={isOpen:!1,highlightedIndex:-1};break;case h9:i={isOpen:!1,highlightedIndex:-1};break;case Sue:{let a=t.key,c=`${e.inputValue}${a}`,h=xat({keysSoFar:c,highlightedIndex:e.highlightedIndex,items:n.items,itemToString:n.itemToString,getItemNodeFromIndex:t.getItemNodeFromIndex});i=Te({inputValue:c},h>=0&&{highlightedIndex:h})}break;case vue:i={highlightedIndex:KD(o?5:1,e.highlightedIndex,n.items.length,t.getItemNodeFromIndex,n.circularNavigation)};break;case yue:i={highlightedIndex:KD(o?-5:-1,e.highlightedIndex,n.items.length,t.getItemNodeFromIndex,n.circularNavigation)};break;case Aue:i={selectedItem:t.selectedItem};break;default:return kat(e,t,Gat)}return Te(Te({},e),i)}Hat.stateChangeTypes=Gat;function Hat(e){e===void 0&&(e={}),lRr(e,Hat);let t=Te(Te({},sRr),e),{items:r,scrollIntoView:n,environment:o,initialIsOpen:i,defaultIsOpen:a,itemToString:c,getA11ySelectionMessage:h,getA11yStatusMessage:m}=t,y=Dat(t),[w,E]=Pat(uRr,y,t),{isOpen:A,highlightedIndex:P,selectedItem:j,inputValue:D}=w,L=(0,Qt.useRef)(null),z=(0,Qt.useRef)(null),B=(0,Qt.useRef)({}),G=(0,Qt.useRef)(!0),Z=(0,Qt.useRef)(null),K=Aat(t),te=(0,Qt.useRef)(),se=(0,Qt.useRef)(!0),le=g9({state:w,props:t}),pe=(0,Qt.useCallback)(Ke=>B.current[K.getItemId(Ke)],[K]);d9(m,[A,P,D,r],Te({isInitialMount:se.current,previousResultCount:te.current,items:r,environment:o,itemToString:c},w)),d9(h,[j],Te({isInitialMount:se.current,previousResultCount:te.current,items:r,environment:o,itemToString:c},w));let me=Lat({menuElement:z.current,highlightedIndex:P,isOpen:A,itemRefs:B,scrollIntoView:n,getItemNodeFromIndex:pe});(0,Qt.useEffect)(()=>(Z.current=fue(Ke=>{Ke({type:pue,inputValue:""})},500),()=>{Z.current.cancel()}),[]),(0,Qt.useEffect)(()=>{D&&Z.current(E)},[E,D]),gue({isInitialMount:se.current,props:t,state:w}),(0,Qt.useEffect)(()=>{if(se.current){(i||a||A)&&z.current&&z.current.focus();return}if(A){z.current&&z.current.focus();return}o.document.activeElement===z.current&&L.current&&(G.current=!1,L.current.focus())},[A]),(0,Qt.useEffect)(()=>{se.current||(te.current=r.length)});let _e=Nat(A,[z,L],o,()=>{E({type:h9})}),de=mue("getMenuProps","getToggleButtonProps");(0,Qt.useEffect)(()=>{se.current=!1},[]),(0,Qt.useEffect)(()=>{A||(B.current={})},[A]);let Ce=(0,Qt.useMemo)(()=>({ArrowDown(Ke){Ke.preventDefault(),E({type:Iue,getItemNodeFromIndex:pe,shiftKey:Ke.shiftKey})},ArrowUp(Ke){Ke.preventDefault(),E({type:Mue,getItemNodeFromIndex:pe,shiftKey:Ke.shiftKey})}}),[E,pe]),Ze=(0,Qt.useMemo)(()=>({ArrowDown(Ke){Ke.preventDefault(),E({type:vue,getItemNodeFromIndex:pe,shiftKey:Ke.shiftKey})},ArrowUp(Ke){Ke.preventDefault(),E({type:yue,getItemNodeFromIndex:pe,shiftKey:Ke.shiftKey})},Home(Ke){Ke.preventDefault(),E({type:bue,getItemNodeFromIndex:pe})},End(Ke){Ke.preventDefault(),E({type:xue,getItemNodeFromIndex:pe})},Escape(){E({type:_ue})},Enter(Ke){Ke.preventDefault(),E({type:wue})}," "(Ke){Ke.preventDefault(),E({type:Eue})}}),[E,pe]),rt=(0,Qt.useCallback)(()=>{E({type:zat})},[E]),ct=(0,Qt.useCallback)(()=>{E({type:Uat})},[E]),qe=(0,Qt.useCallback)(()=>{E({type:Fat})},[E]),lt=(0,Qt.useCallback)(Ke=>{E({type:Bat,highlightedIndex:Ke})},[E]),_t=(0,Qt.useCallback)(Ke=>{E({type:Aue,selectedItem:Ke})},[E]),Tt=(0,Qt.useCallback)(()=>{E({type:Vat})},[E]),et=(0,Qt.useCallback)(Ke=>{E({type:pue,inputValue:Ke})},[E]),pt=(0,Qt.useCallback)(Ke=>Te({id:K.labelId,htmlFor:K.toggleButtonId},Ke),[K]),ot=(0,Qt.useCallback)(function(Ke,Ge){let br=Ke===void 0?{}:Ke,{onMouseLeave:ft,refKey:mt="ref",onKeyDown:Ot,onBlur:At,ref:Mt}=br,Yt=En(br,["onMouseLeave","refKey","onKeyDown","onBlur","ref"]),{suppressRefError:jt=!1}=Ge===void 0?{}:Ge,Ut=le.current.state,ar=Pr=>{let Le=ZD(Pr);Le&&Ze[Le]?Ze[Le](Pr):bat(Le)&&E({type:Sue,key:Le,getItemNodeFromIndex:pe})},jr=()=>{if(G.current===!1){G.current=!0;return}!_e.current.isMouseDown&&E({type:h9})},Or=()=>{E({type:Rat})};return de("getMenuProps",jt,mt,z),Te(Dt(Te({[mt]:vm(Mt,Pr=>{z.current=Pr}),id:K.menuId,role:"listbox","aria-labelledby":K.labelId,tabIndex:-1},Ut.isOpen&&Ut.highlightedIndex>-1&&{"aria-activedescendant":K.getItemId(Ut.highlightedIndex)}),{onMouseLeave:js(ft,Or),onKeyDown:js(Ot,ar),onBlur:js(At,jr)}),Yt)},[E,le,Ze,_e,de,K,pe]),$e=(0,Qt.useCallback)(function(Ke,Ge){let jr=Ke===void 0?{}:Ke,{onClick:ft,onKeyDown:mt,refKey:Ot="ref",ref:At}=jr,Mt=En(jr,["onClick","onKeyDown","refKey","ref"]),{suppressRefError:Yt=!1}=Ge===void 0?{}:Ge,jt=()=>{E({type:qat})},Ut=Or=>{let br=ZD(Or);br&&Ce[br]?Ce[br](Or):bat(br)&&E({type:Cue,key:br,getItemNodeFromIndex:pe})},ar=Te({[Ot]:vm(At,Or=>{L.current=Or}),id:K.toggleButtonId,"aria-haspopup":"listbox","aria-expanded":le.current.state.isOpen,"aria-labelledby":`${K.labelId} ${K.toggleButtonId}`},Mt);return Mt.disabled||(ar.onClick=js(ft,jt),ar.onKeyDown=js(mt,Ut)),de("getToggleButtonProps",Yt,Ot,L),ar},[E,le,Ce,de,K,pe]),De=(0,Qt.useCallback)(function(Ke){let Le=Ke===void 0?{}:Ke,{item:Ge,index:ft,onMouseMove:mt,onClick:Ot,refKey:At="ref",ref:Mt,disabled:Yt}=Le,jt=En(Le,["item","index","onMouseMove","onClick","refKey","ref","disabled"]),{state:Ut,props:ar}=le.current,jr=()=>{ft!==Ut.highlightedIndex&&(me.current=!1,E({type:jat,index:ft,disabled:Yt}))},Or=()=>{E({type:Tue,index:ft})},br=due(ft,Ge,ar.items);if(br<0)throw new Error("Pass either item or item index in getItemProps!");let Pr=Te({disabled:Yt,role:"option","aria-selected":`${br===Ut.highlightedIndex}`,id:K.getItemId(br),[At]:vm(Mt,Je=>{Je&&(B.current[K.getItemId(br)]=Je)})},jt);return Yt||(Pr.onClick=js(Ot,Or)),Pr.onMouseMove=js(mt,jr),Pr},[E,le,me,K]);return{getToggleButtonProps:$e,getLabelProps:pt,getMenuProps:ot,getItemProps:De,toggleMenu:rt,openMenu:qe,closeMenu:ct,setHighlightedIndex:lt,selectItem:_t,reset:Tt,setInputValue:et,highlightedIndex:P,isOpen:A,selectedItem:j,inputValue:D}}var Oue=0,Pue=1,Due=2,Nue=3,Lue=4,kue=5,Rue=6,m9=7,$at=8,Wat=9,jue=10,Yat=11,Zat=12,Kat=13,Xat=14,Jat=15,que=16,Qat=17,est=18,zue=19,tst=Object.freeze({__proto__:null,InputKeyDownArrowDown:Oue,InputKeyDownArrowUp:Pue,InputKeyDownEscape:Due,InputKeyDownHome:Nue,InputKeyDownEnd:Lue,InputKeyDownEnter:kue,InputChange:Rue,InputBlur:m9,MenuMouseLeave:$at,ItemMouseMove:Wat,ItemClick:jue,ToggleButtonClick:Yat,FunctionToggleMenu:Zat,FunctionOpenMenu:Kat,FunctionCloseMenu:Xat,FunctionSetHighlightedIndex:Jat,FunctionSelectItem:que,FunctionSetInputValue:Qat,FunctionReset:est,ControlledPropUpdatedSelectedItem:zue});function cRr(e){let t=Dat(e),{selectedItem:r}=t,{inputValue:n}=t;return n===""&&r&&e.defaultInputValue===void 0&&e.initialInputValue===void 0&&e.inputValue===void 0&&(n=e.itemToString(r)),Dt(Te({},t),{inputValue:n})}var Uxo={items:ir.default.array.isRequired,itemToString:ir.default.func,getA11yStatusMessage:ir.default.func,getA11ySelectionMessage:ir.default.func,circularNavigation:ir.default.bool,highlightedIndex:ir.default.number,defaultHighlightedIndex:ir.default.number,initialHighlightedIndex:ir.default.number,isOpen:ir.default.bool,defaultIsOpen:ir.default.bool,initialIsOpen:ir.default.bool,selectedItem:ir.default.any,initialSelectedItem:ir.default.any,defaultSelectedItem:ir.default.any,inputValue:ir.default.string,defaultInputValue:ir.default.string,initialInputValue:ir.default.string,id:ir.default.string,labelId:ir.default.string,menuId:ir.default.string,getItemId:ir.default.func,inputId:ir.default.string,toggleButtonId:ir.default.string,stateReducer:ir.default.func,onSelectedItemChange:ir.default.func,onHighlightedIndexChange:ir.default.func,onStateChange:ir.default.func,onIsOpenChange:ir.default.func,onInputValueChange:ir.default.func,environment:ir.default.shape({addEventListener:ir.default.func,removeEventListener:ir.default.func,document:ir.default.shape({getElementById:ir.default.func,activeElement:ir.default.any,body:ir.default.any})})};function pRr(e,t,r){let n=(0,Qt.useRef)(),[o,i]=Oat(e,t,r);return(0,Qt.useEffect)(()=>{Tat(r,"selectedItem")&&(n.current!==r.selectedItem&&i({type:zue,inputValue:r.itemToString(r.selectedItem)}),n.current=o.selectedItem===n.current?r.selectedItem:o.selectedItem)}),[f9(o,r),i]}var fRr=XD,dRr=Dt(Te({},YD),{getA11yStatusMessage:Xkr,circularNavigation:!0});function hRr(e,t){let{type:r,props:n,shiftKey:o}=t,i;switch(r){case jue:i={isOpen:Xu(n,"isOpen"),highlightedIndex:Xu(n,"highlightedIndex"),selectedItem:n.items[t.index],inputValue:n.itemToString(n.items[t.index])};break;case Oue:e.isOpen?i={highlightedIndex:KD(o?5:1,e.highlightedIndex,n.items.length,t.getItemNodeFromIndex,n.circularNavigation)}:i={highlightedIndex:GT(n,e,1,t.getItemNodeFromIndex),isOpen:n.items.length>=0};break;case Pue:e.isOpen?i={highlightedIndex:KD(o?-5:-1,e.highlightedIndex,n.items.length,t.getItemNodeFromIndex,n.circularNavigation)}:i={highlightedIndex:GT(n,e,-1,t.getItemNodeFromIndex),isOpen:n.items.length>=0};break;case kue:i=Te({},e.isOpen&&e.highlightedIndex>=0&&{selectedItem:n.items[e.highlightedIndex],isOpen:Xu(n,"isOpen"),highlightedIndex:Xu(n,"highlightedIndex"),inputValue:n.itemToString(n.items[e.highlightedIndex])});break;case Due:i=Te({isOpen:!1,highlightedIndex:-1},!e.isOpen&&{selectedItem:null,inputValue:""});break;case Nue:i={highlightedIndex:Ob(1,0,n.items.length,t.getItemNodeFromIndex,!1)};break;case Lue:i={highlightedIndex:Ob(-1,n.items.length-1,n.items.length,t.getItemNodeFromIndex,!1)};break;case m9:i=Te({isOpen:!1,highlightedIndex:-1},e.highlightedIndex>=0&&t.selectItem&&{selectedItem:n.items[e.highlightedIndex],inputValue:n.itemToString(n.items[e.highlightedIndex])});break;case Rue:i={isOpen:!0,highlightedIndex:Xu(n,"highlightedIndex"),inputValue:t.inputValue};break;case que:i={selectedItem:t.selectedItem,inputValue:n.itemToString(t.selectedItem)};break;case zue:i={inputValue:t.inputValue};break;default:return kat(e,t,tst)}return Te(Te({},e),i)}v9.stateChangeTypes=tst;function v9(e){e===void 0&&(e={}),fRr(e,v9);let t=Te(Te({},dRr),e),{initialIsOpen:r,defaultIsOpen:n,items:o,scrollIntoView:i,environment:a,getA11yStatusMessage:c,getA11ySelectionMessage:h,itemToString:m}=t,y=cRr(t),[w,E]=pRr(hRr,y,t),{isOpen:A,highlightedIndex:P,selectedItem:j,inputValue:D}=w,L=(0,Qt.useRef)(null),z=(0,Qt.useRef)({}),B=(0,Qt.useRef)(null),G=(0,Qt.useRef)(null),Z=(0,Qt.useRef)(null),K=(0,Qt.useRef)(!0),te=Aat(t),se=(0,Qt.useRef)(),le=g9({state:w,props:t}),pe=(0,Qt.useCallback)(Ge=>z.current[te.getItemId(Ge)],[te]);d9(c,[A,P,D,o],Te({isInitialMount:K.current,previousResultCount:se.current,items:o,environment:a,itemToString:m},w)),d9(h,[j],Te({isInitialMount:K.current,previousResultCount:se.current,items:o,environment:a,itemToString:m},w));let me=Lat({menuElement:L.current,highlightedIndex:P,isOpen:A,itemRefs:z,scrollIntoView:i,getItemNodeFromIndex:pe});gue({isInitialMount:K.current,props:t,state:w}),(0,Qt.useEffect)(()=>{(r||n||A)&&B.current&&B.current.focus()},[]),(0,Qt.useEffect)(()=>{K.current||(se.current=o.length)});let _e=Nat(A,[Z,L,G],a,()=>{E({type:m9,selectItem:!1})}),de=mue("getInputProps","getComboboxProps","getMenuProps");(0,Qt.useEffect)(()=>{K.current=!1},[]),(0,Qt.useEffect)(()=>{A||(z.current={})},[A]);let Ce=(0,Qt.useMemo)(()=>({ArrowDown(Ge){Ge.preventDefault(),E({type:Oue,shiftKey:Ge.shiftKey,getItemNodeFromIndex:pe})},ArrowUp(Ge){Ge.preventDefault(),E({type:Pue,shiftKey:Ge.shiftKey,getItemNodeFromIndex:pe})},Home(Ge){le.current.state.isOpen&&(Ge.preventDefault(),E({type:Nue,getItemNodeFromIndex:pe}))},End(Ge){le.current.state.isOpen&&(Ge.preventDefault(),E({type:Lue,getItemNodeFromIndex:pe}))},Escape(Ge){let ft=le.current.state;(ft.isOpen||ft.inputValue||ft.selectedItem||ft.highlightedIndex>-1)&&(Ge.preventDefault(),E({type:Due}))},Enter(Ge){let ft=le.current.state;!ft.isOpen||ft.highlightedIndex<0||Ge.which===229||(Ge.preventDefault(),E({type:kue,getItemNodeFromIndex:pe}))}}),[E,le,pe]),Ze=(0,Qt.useCallback)(Ge=>Te({id:te.labelId,htmlFor:te.inputId},Ge),[te]),rt=(0,Qt.useCallback)(function(Ge,ft){let jt=Ge===void 0?{}:Ge,{onMouseLeave:mt,refKey:Ot="ref",ref:At}=jt,Mt=En(jt,["onMouseLeave","refKey","ref"]),{suppressRefError:Yt=!1}=ft===void 0?{}:ft;return de("getMenuProps",Yt,Ot,L),Te({[Ot]:vm(At,Ut=>{L.current=Ut}),id:te.menuId,role:"listbox","aria-labelledby":te.labelId,onMouseLeave:js(mt,()=>{E({type:$at})})},Mt)},[E,de,te]),ct=(0,Qt.useCallback)(function(Ge){let xe=Ge===void 0?{}:Ge,{item:ft,index:mt,refKey:Ot="ref",ref:At,onMouseMove:Mt,onMouseDown:Yt,onClick:jt,onPress:Ut,disabled:ar}=xe,jr=En(xe,["item","index","refKey","ref","onMouseMove","onMouseDown","onClick","onPress","disabled"]),{props:Or,state:br}=le.current,Pr=due(mt,ft,Or.items);if(Pr<0)throw new Error("Pass either item or item index in getItemProps!");let Le="onClick",Je=jt,tt=()=>{mt!==br.highlightedIndex&&(me.current=!1,E({type:Wat,index:mt,disabled:ar}))},Ft=()=>{E({type:jue,index:mt})},$t=J=>J.preventDefault();return Te(Dt(Te({[Ot]:vm(At,J=>{J&&(z.current[te.getItemId(Pr)]=J)}),disabled:ar,role:"option","aria-selected":`${Pr===br.highlightedIndex}`,id:te.getItemId(Pr)},!ar&&{[Le]:js(Je,Ft)}),{onMouseMove:js(Mt,tt),onMouseDown:js(Yt,$t)}),jr)},[E,le,me,te]),qe=(0,Qt.useCallback)(function(Ge){let jt=Ge===void 0?{}:Ge,{onClick:ft,onPress:mt,refKey:Ot="ref",ref:At}=jt,Mt=En(jt,["onClick","onPress","refKey","ref"]),Yt=()=>{E({type:Yat}),!le.current.state.isOpen&&B.current&&B.current.focus()};return Te(Te({[Ot]:vm(At,Ut=>{G.current=Ut}),id:te.toggleButtonId,tabIndex:-1},!Mt.disabled&&{onClick:js(ft,Yt)}),Mt)},[E,le,te]),lt=(0,Qt.useCallback)(function(Ge,ft){let Ft=Ge===void 0?{}:Ge,{onKeyDown:mt,onChange:Ot,onInput:At,onBlur:Mt,onChangeText:Yt,refKey:jt="ref",ref:Ut}=Ft,ar=En(Ft,["onKeyDown","onChange","onInput","onBlur","onChangeText","refKey","ref"]),{suppressRefError:jr=!1}=ft===void 0?{}:ft;de("getInputProps",jr,jt,B);let Or=le.current.state,br=$t=>{let xe=ZD($t);xe&&Ce[xe]&&Ce[xe]($t)},Pr=$t=>{E({type:Rue,inputValue:$t.target.value})},Le=()=>{Or.isOpen&&!_e.current.isMouseDown&&E({type:m9,selectItem:!0})},Je="onChange",tt={};return ar.disabled||(tt={[Je]:js(Ot,At,Pr),onKeyDown:js(mt,br),onBlur:js(Mt,Le)}),Te(Te(Dt(Te({[jt]:vm(Ut,$t=>{B.current=$t}),id:te.inputId,"aria-autocomplete":"list","aria-controls":te.menuId},Or.isOpen&&Or.highlightedIndex>-1&&{"aria-activedescendant":te.getItemId(Or.highlightedIndex)}),{"aria-labelledby":te.labelId,autoComplete:"off",value:Or.inputValue}),tt),ar)},[E,Ce,le,_e,de,te]),_t=(0,Qt.useCallback)(function(Ge,ft){let Yt=Ge===void 0?{}:Ge,{refKey:mt="ref",ref:Ot}=Yt,At=En(Yt,["refKey","ref"]),{suppressRefError:Mt=!1}=ft===void 0?{}:ft;return de("getComboboxProps",Mt,mt,Z),Te({[mt]:vm(Ot,jt=>{Z.current=jt}),role:"combobox","aria-haspopup":"listbox","aria-owns":te.menuId,"aria-expanded":le.current.state.isOpen},At)},[le,de,te]),Tt=(0,Qt.useCallback)(()=>{E({type:Zat})},[E]),et=(0,Qt.useCallback)(()=>{E({type:Xat})},[E]),pt=(0,Qt.useCallback)(()=>{E({type:Kat})},[E]),ot=(0,Qt.useCallback)(Ge=>{E({type:Jat,highlightedIndex:Ge})},[E]),$e=(0,Qt.useCallback)(Ge=>{E({type:que,selectedItem:Ge})},[E]),De=(0,Qt.useCallback)(Ge=>{E({type:Qat,inputValue:Ge})},[E]),Ke=(0,Qt.useCallback)(()=>{E({type:est})},[E]);return{getItemProps:ct,getLabelProps:Ze,getMenuProps:rt,getInputProps:lt,getComboboxProps:_t,getToggleButtonProps:qe,toggleMenu:Tt,openMenu:pt,closeMenu:et,setHighlightedIndex:ot,setInputValue:De,selectItem:$e,reset:Ke,highlightedIndex:P,isOpen:A,selectedItem:j,inputValue:D}}var rst={activeIndex:-1,selectedItems:[]};function wat(e,t){return WD(e,t,rst)}function Eat(e,t){return Xu(e,t,rst)}function mRr(e){let t=wat(e,"activeIndex"),r=wat(e,"selectedItems");return{activeIndex:t,selectedItems:r}}function Sat(e){if(e.shiftKey||e.metaKey||e.ctrlKey||e.altKey)return!1;let t=e.target;return!(t instanceof HTMLInputElement&&t.value!==""&&(t.selectionStart!==0||t.selectionEnd!==0))}function gRr(e){let{removedSelectedItem:t,itemToString:r}=e;return`${r(t)} has been removed.`}var Bxo={selectedItems:ir.default.array,initialSelectedItems:ir.default.array,defaultSelectedItems:ir.default.array,itemToString:ir.default.func,getA11yRemovalMessage:ir.default.func,stateReducer:ir.default.func,activeIndex:ir.default.number,initialActiveIndex:ir.default.number,defaultActiveIndex:ir.default.number,onActiveIndexChange:ir.default.func,onSelectedItemsChange:ir.default.func,keyNavigationNext:ir.default.string,keyNavigationPrevious:ir.default.string,environment:ir.default.shape({addEventListener:ir.default.func,removeEventListener:ir.default.func,document:ir.default.shape({getElementById:ir.default.func,activeElement:ir.default.any,body:ir.default.any})})},vRr={itemToString:YD.itemToString,stateReducer:YD.stateReducer,environment:YD.environment,getA11yRemovalMessage:gRr,keyNavigationNext:"ArrowRight",keyNavigationPrevious:"ArrowLeft"},yRr=XD,Fue=0,Uue=1,Bue=2,Vue=3,Gue=4,Hue=5,$ue=6,Wue=7,Yue=8,Zue=9,Kue=10,Xue=11,Jue=12,_Rr=Object.freeze({__proto__:null,SelectedItemClick:Fue,SelectedItemKeyDownDelete:Uue,SelectedItemKeyDownBackspace:Bue,SelectedItemKeyDownNavigationNext:Vue,SelectedItemKeyDownNavigationPrevious:Gue,DropdownKeyDownNavigationPrevious:Hue,DropdownKeyDownBackspace:$ue,DropdownClick:Wue,FunctionAddSelectedItem:Yue,FunctionRemoveSelectedItem:Zue,FunctionSetSelectedItems:Kue,FunctionSetActiveIndex:Xue,FunctionReset:Jue});function bRr(e,t){let{type:r,index:n,props:o,selectedItem:i}=t,{activeIndex:a,selectedItems:c}=e,h;switch(r){case Fue:h={activeIndex:n};break;case Gue:h={activeIndex:a-1<0?0:a-1};break;case Vue:h={activeIndex:a+1>=c.length?-1:a+1};break;case Bue:case Uue:{let m=a;c.length===1?m=-1:a===c.length-1&&(m=c.length-2),h={selectedItems:[...c.slice(0,a),...c.slice(a+1)],activeIndex:m};break}case Hue:h={activeIndex:c.length-1};break;case $ue:h={selectedItems:c.slice(0,c.length-1)};break;case Yue:h={selectedItems:[...c,i]};break;case Wue:h={activeIndex:-1};break;case Zue:{let m=a,y=c.indexOf(i);y>=0&&(c.length===1?m=-1:y===c.length-1&&(m=c.length-2),h={selectedItems:[...c.slice(0,y),...c.slice(y+1)],activeIndex:m});break}case Kue:{let{selectedItems:m}=t;h={selectedItems:m};break}case Xue:{let{activeIndex:m}=t;h={activeIndex:m};break}case Jue:h={activeIndex:Eat(o,"activeIndex"),selectedItems:Eat(o,"selectedItems")};break;default:throw new Error("Reducer called without proper action type.")}return Te(Te({},e),h)}nst.stateChangeTypes=_Rr;function nst(e){e===void 0&&(e={}),yRr(e,nst);let t=Te(Te({},vRr),e),{getA11yRemovalMessage:r,itemToString:n,environment:o,keyNavigationNext:i,keyNavigationPrevious:a}=t,[c,h]=Pat(bRr,mRr(t),t),{activeIndex:m,selectedItems:y}=c,w=(0,Qt.useRef)(!0),E=(0,Qt.useRef)(null),A=(0,Qt.useRef)(y),P=(0,Qt.useRef)();P.current=[];let j=g9({state:c,props:t});(0,Qt.useEffect)(()=>{if(!w.current){if(y.length<A.current.length){let pe=A.current.find(me=>y.indexOf(me)<0);Iat(r({itemToString:n,resultCount:y.length,removedSelectedItem:pe,activeIndex:m,activeSelectedItem:y[m]}),o.document)}A.current=y}},[y.length]),(0,Qt.useEffect)(()=>{w.current||(m===-1&&E.current?E.current.focus():P.current[m]&&P.current[m].focus())},[m]),gue({isInitialMount:w.current,props:t,state:c});let D=mue("getDropdownProps");(0,Qt.useEffect)(()=>{w.current=!1},[]);let L=(0,Qt.useMemo)(()=>({[a](){h({type:Gue})},[i](){h({type:Vue})},Delete(){h({type:Uue})},Backspace(){h({type:Bue})}}),[h,i,a]),z=(0,Qt.useMemo)(()=>({[a](pe){Sat(pe)&&h({type:Hue})},Backspace(pe){Sat(pe)&&h({type:$ue})}}),[h,a]),B=(0,Qt.useCallback)(function(pe){let et=pe===void 0?{}:pe,{refKey:me="ref",ref:_e,onClick:de,onKeyDown:Ce,selectedItem:Ze,index:rt}=et,ct=En(et,["refKey","ref","onClick","onKeyDown","selectedItem","index"]),{state:qe}=j.current;if(due(rt,Ze,qe.selectedItems)<0)throw new Error("Pass either selectedItem or index in getSelectedItemProps!");let _t=()=>{h({type:Fue,index:rt})},Tt=pt=>{let ot=ZD(pt);ot&&L[ot]&&L[ot](pt)};return Te({[me]:vm(_e,pt=>{pt&&P.current.push(pt)}),tabIndex:rt===qe.activeIndex?0:-1,onClick:js(de,_t),onKeyDown:js(Ce,Tt)},ct)},[h,j,L]),G=(0,Qt.useCallback)(function(pe,me){let Tt=pe===void 0?{}:pe,{refKey:_e="ref",ref:de,onKeyDown:Ce,onClick:Ze,preventKeyAction:rt=!1}=Tt,ct=En(Tt,["refKey","ref","onKeyDown","onClick","preventKeyAction"]),{suppressRefError:qe=!1}=me===void 0?{}:me;D("getDropdownProps",qe,_e,E);let lt=et=>{let pt=ZD(et);pt&&z[pt]&&z[pt](et)},_t=()=>{h({type:Wue})};return Te(Te({[_e]:vm(de,et=>{et&&(E.current=et)})},!rt&&{onKeyDown:js(Ce,lt),onClick:js(Ze,_t)}),ct)},[h,z,D]),Z=(0,Qt.useCallback)(pe=>{h({type:Yue,selectedItem:pe})},[h]),K=(0,Qt.useCallback)(pe=>{h({type:Zue,selectedItem:pe})},[h]),te=(0,Qt.useCallback)(pe=>{h({type:Kue,selectedItems:pe})},[h]),se=(0,Qt.useCallback)(pe=>{h({type:Xue,activeIndex:pe})},[h]),le=(0,Qt.useCallback)(()=>{h({type:Jue})},[h]);return{getSelectedItemProps:B,getDropdownProps:G,addSelectedItem:Z,removeSelectedItem:K,setSelectedItems:te,setActiveIndex:se,reset:le,selectedItems:y,activeIndex:m}}var z0=ee(It(),1);function Que({buttonProps:e,fetchInputItems:t,label:r,itemToString:n,inputProps:o,onSelectedItemChange:i,timeout:a=300}){let[c,h]=(0,Ju.useState)([]),[m,y]=(0,Ju.useState)(void 0),w=(0,Ju.useRef)(),E=(0,Ju.useRef)(null),A=Ce=>{clearTimeout(E.current),E.current=setTimeout(()=>{t(Ce).then(Ze=>h(Ze))},a)},P=({inputValue:Ce})=>{m!==void 0&&y(void 0),A(Ce)},j=({selectedItem:Ce})=>{i!==void 0&&i(Ce),y(Ce)},{isOpen:D,getToggleButtonProps:L,getLabelProps:z,getMenuProps:B,getInputProps:G,getComboboxProps:Z,getItemProps:K,highlightedIndex:te}=v9({items:c,itemToString:n,onInputValueChange:P,onSelectedItemChange:j}),_e=e!=null?e:{},{onClick:se}=_e,le=En(_e,["onClick"]),de=G(),{ref:pe}=de,me=En(de,["ref"]);return Ju.default.createElement("div",{className:"vkf-autocomplete-container"},Ju.default.createElement("label",Dt(Te({},z()),{id:me["aria-labelledby"],className:"visually-hidden"}),r!==void 0?r:o.placeholder),Ju.default.createElement("div",Te({className:"form-group"},Z()),Ju.default.createElement("input",Te(Dt(Te({},me),{ref:Ce=>{pe(Ce),w.current=Ce},type:"text"}),o)),Ju.default.createElement("button",Te(Te(Dt(Te({type:"button"},L()),{"aria-label":"toggle menu"}),le),se!==void 0?{onClick:()=>{se(m,w.current!==null?w.current.value:"")}}:{}),"\u2193")),Ju.default.createElement("div",{className:"autocomplete-dropdown"},Ju.default.createElement("ul",Dt(Te({className:"autocomplete-result-list"},B()),{id:me["aria-controls"]}),D&&c.map((Ce,Ze)=>Ju.default.createElement("li",Te({className:qt("ui-menu-item",te===Ze&&"highlighted",m===Ce&&"selected"),key:`${Ce.label}${Ze}`},K({item:Ce,index:Ze})),Ce.label)))))}Que.propTypes={buttonProps:z0.default.object,fetchInputItems:z0.default.func,label:z0.default.string,inputProps:z0.default.object,itemToString:z0.default.func,onSelectedItemChange:z0.default.func,timeout:z0.default.number};u();var ece=(e,t,r)=>{let n=e+"?format=json&q="+t;return Za.get(n).then(o=>{let a=o.data.map(c=>({label:c.display_name,value:c.display_name,lonlat:{x:parseFloat(c.lon),y:parseFloat(c.lat)},type:c.type}));return r!==void 0&&r(),a})};var xRr=e=>e?e.label:"",ost=e=>{let{onSelectPosition:t,searchUrl:r}=e,[n,o]=(0,Pb.useState)(!1),i=Lr(ks),a=(0,Pb.useCallback)(h=>(o(!0),ece(r,h,()=>{o(!1)})),[r]),c=(h,m)=>{h!==void 0?t(h):ece(r,m).then(y=>{if(y.length>0)t(y[0]);else throw new Error(fe("placenamesearch-unknown-placename"))}).catch(()=>{i({id:"placenamesearch",type:"warning",text:fe("placenamesearch-unknown-placename")})})};return Pb.default.createElement("div",{className:"gazetteersearch-container"},Pb.default.createElement(Que,{buttonProps:{className:"form-control gazetteersearch-submit",onClick:c,"aria-label":fe("placenamesearch-submit"),title:fe("placenamesearch-submit")},fetchInputItems:a,inputProps:{className:`form-control gazetteersearch-input ${n?"loading":""}`,placeholder:fe("placenamesearch-placeholder")},itemToString:xRr,onSelectedItemChange:c}))};ost.propTypes={onSelectPosition:tce.default.func.isRequired,searchUrl:tce.default.string.isRequired};var ist=ost;var ast=ee(It(),1),sst=({searchUrl:e})=>{let t=bt(rr),r=(0,y9.useCallback)(n=>{if(t){let o=[n.lonlat.x,n.lonlat.y];t.flyTo({center:o,zoom:12})}},[t]);return y9.default.createElement(ist,{onSelectPosition:r,searchUrl:e})};sst.propTypes={searchUrl:ast.default.string.isRequired};var _9=sst;var lst=({customQuery:e,MapSearchListItemComponent:t,mosaicMode:r})=>{let n=bt(oWe);return F0.default.createElement("div",{className:qt("vkf-spatialsearch-root",!n&&"in")},F0.default.createElement("div",{className:"spatialsearch-inner-container"},F0.default.createElement("div",{className:"spatialsearch-content-panel"},F0.default.createElement("div",{className:"body-container"},F0.default.createElement(_9,{searchUrl:mr.getNominatimUrl()}),F0.default.createElement(l9,null),F0.default.createElement(hrt,{customQuery:e,MapSearchListItemComponent:t,mosaicMode:r})))))};lst.propTypes={customQuery:b9.default.array,MapSearchListItemComponent:b9.default.elementType,mosaicMode:b9.default.bool};var ust=lst;u();var co=ee(ke(),1),tU=ee(It(),1);u();u();var U0=ee(ke(),1),Db=ee(It(),1);var cst=({isOpen:e,onClose:t,modalClassName:r,renderContent:n,renderFooter:o,title:i})=>U0.default.createElement(Gg,{className:"vkf-modal",onHide:t,show:e,dialogClassName:r},U0.default.createElement(PP,null,U0.default.createElement(DP,null,i),U0.default.createElement(mn,{className:"close-button",onClick:t},U0.default.createElement(Hr,{name:"close"}))),U0.default.createElement(CP,null,n()),o!==void 0&&U0.default.createElement(OP,null,o()));cst.propTypes={isOpen:Db.default.bool,onClose:Db.default.func,modalClassName:Db.default.string,renderContent:Db.default.func,renderFooter:Db.default.func,title:Db.default.string};var pst=cst;var jf=pst;u();u();var l2=ee(ke(),1);var mN=ee(It(),1);u();u();u();var wRr=function(){function e(t){this.propagationStopped,this.defaultPrevented,this.type=t,this.target=null}return e.prototype.preventDefault=function(){this.defaultPrevented=!0},e.prototype.stopPropagation=function(){this.propagationStopped=!0},e}();var _u=wRr;u();u();u();u();var pv={PROPERTYCHANGE:"propertychange"};u();u();u();var ERr=function(){function e(){this.disposed=!1}return e.prototype.dispose=function(){this.disposed||(this.disposed=!0,this.disposeInternal())},e.prototype.disposeInternal=function(){},e}(),B0=ERr;u();u();function JD(e,t){return e>t?1:e<t?-1:0}function HT(e,t,r){var n=e.length;if(e[0]<=t)return 0;if(t<=e[n-1])return n-1;var o=void 0;if(r>0){for(o=1;o<n;++o)if(e[o]<t)return o-1}else if(r<0){for(o=1;o<n;++o)if(e[o]<=t)return o}else for(o=1;o<n;++o){if(e[o]==t)return o;if(e[o]<t)return typeof r=="function"?r(t,e[o-1],e[o])>0?o-1:o:e[o-1]-t<t-e[o]?o-1:o}return n-1}function fst(e,t){for(var r=Array.isArray(t)?t:[t],n=r.length,o=0;o<n;o++)e[e.length]=r[o]}function x9(e,t){var r=e.length;if(r!==t.length)return!1;for(var n=0;n<r;n++)if(e[n]!==t[n])return!1;return!0}function dst(e,t,r){var n=t||JD;return e.every(function(o,i){if(i===0)return!0;var a=n(e[i-1],o);return!(a>0||r&&a===0)})}function V0(){return!0}function fv(){return!1}function dv(){}function hst(e){var t=!1,r,n,o;return function(){var i=Array.prototype.slice.call(arguments);return(!t||this!==o||!x9(i,n))&&(t=!0,o=this,n=i,r=e.apply(this,arguments)),r}}var SRr=function(){var e=function(t,r){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,o){n.__proto__=o}||function(n,o){for(var i in o)Object.prototype.hasOwnProperty.call(o,i)&&(n[i]=o[i])},e(t,r)};return function(t,r){if(typeof r!="function"&&r!==null)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");e(t,r);function n(){this.constructor=t}t.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),TRr=function(e){SRr(t,e);function t(r){var n=e.call(this)||this;return n.eventTarget_=r,n.pendingRemovals_=null,n.dispatching_=null,n.listeners_=null,n}return t.prototype.addEventListener=function(r,n){if(!(!r||!n)){var o=this.listeners_||(this.listeners_={}),i=o[r]||(o[r]=[]);i.indexOf(n)===-1&&i.push(n)}},t.prototype.dispatchEvent=function(r){var n=typeof r=="string",o=n?r:r.type,i=this.listeners_&&this.listeners_[o];if(i){var a=n?new _u(r):r;a.target||(a.target=this.eventTarget_||this);var c=this.dispatching_||(this.dispatching_={}),h=this.pendingRemovals_||(this.pendingRemovals_={});o in c||(c[o]=0,h[o]=0),++c[o];for(var m,y=0,w=i.length;y<w;++y)if("handleEvent"in i[y]?m=i[y].handleEvent(a):m=i[y].call(this,a),m===!1||a.propagationStopped){m=!1;break}if(--c[o]===0){var E=h[o];for(delete h[o];E--;)this.removeEventListener(o,dv);delete c[o]}return m}},t.prototype.disposeInternal=function(){this.listeners_&&If(this.listeners_)},t.prototype.getListeners=function(r){return this.listeners_&&this.listeners_[r]||void 0},t.prototype.hasListener=function(r){return this.listeners_?r?r in this.listeners_:Object.keys(this.listeners_).length>0:!1},t.prototype.removeEventListener=function(r,n){var o=this.listeners_&&this.listeners_[r];if(o){var i=o.indexOf(n);i!==-1&&(this.pendingRemovals_&&r in this.pendingRemovals_?(o[i]=dv,++this.pendingRemovals_[r]):(o.splice(i,1),o.length===0&&delete this.listeners_[r]))}},t}(B0),qf=TRr;u();var kr={CHANGE:"change",ERROR:"error",BLUR:"blur",CLEAR:"clear",CONTEXTMENU:"contextmenu",CLICK:"click",DBLCLICK:"dblclick",DRAGENTER:"dragenter",DRAGOVER:"dragover",DROP:"drop",FOCUS:"focus",KEYDOWN:"keydown",KEYPRESS:"keypress",LOAD:"load",RESIZE:"resize",TOUCHMOVE:"touchmove",WHEEL:"wheel"};u();function ao(e,t,r,n,o){if(n&&n!==e&&(r=r.bind(n)),o){var i=r;r=function(){e.removeEventListener(t,r),i.apply(this,arguments)}}var a={target:e,type:t,listener:r};return e.addEventListener(t,r),a}function $T(e,t,r,n){return ao(e,t,r,n,!0)}function Ko(e){e&&e.target&&(e.target.removeEventListener(e.type,e.listener),If(e))}var IRr=function(){var e=function(t,r){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,o){n.__proto__=o}||function(n,o){for(var i in o)Object.prototype.hasOwnProperty.call(o,i)&&(n[i]=o[i])},e(t,r)};return function(t,r){if(typeof r!="function"&&r!==null)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");e(t,r);function n(){this.constructor=t}t.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),w9=function(e){IRr(t,e);function t(){var r=e.call(this)||this;return r.on=r.onInternal,r.once=r.onceInternal,r.un=r.unInternal,r.revision_=0,r}return t.prototype.changed=function(){++this.revision_,this.dispatchEvent(kr.CHANGE)},t.prototype.getRevision=function(){return this.revision_},t.prototype.onInternal=function(r,n){if(Array.isArray(r)){for(var o=r.length,i=new Array(o),a=0;a<o;++a)i[a]=ao(this,r[a],n);return i}else return ao(this,r,n)},t.prototype.onceInternal=function(r,n){var o;if(Array.isArray(r)){var i=r.length;o=new Array(i);for(var a=0;a<i;++a)o[a]=$T(this,r[a],n)}else o=$T(this,r,n);return n.ol_key=o,o},t.prototype.unInternal=function(r,n){var o=n.ol_key;if(o)MRr(o);else if(Array.isArray(r))for(var i=0,a=r.length;i<a;++i)this.removeEventListener(r[i],n);else this.removeEventListener(r,n)},t}(qf);w9.prototype.on;w9.prototype.once;w9.prototype.un;function MRr(e){if(Array.isArray(e))for(var t=0,r=e.length;t<r;++t)Ko(e[t]);else Ko(e)}var E9=w9;var gst=function(){var e=function(t,r){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,o){n.__proto__=o}||function(n,o){for(var i in o)Object.prototype.hasOwnProperty.call(o,i)&&(n[i]=o[i])},e(t,r)};return function(t,r){if(typeof r!="function"&&r!==null)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");e(t,r);function n(){this.constructor=t}t.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),mst=function(e){gst(t,e);function t(r,n,o){var i=e.call(this,r)||this;return i.key=n,i.oldValue=o,i}return t}(_u);var CRr=function(e){gst(t,e);function t(r){var n=e.call(this)||this;return n.on,n.once,n.un,Qa(n),n.values_=null,r!==void 0&&n.setProperties(r),n}return t.prototype.get=function(r){var n;return this.values_&&this.values_.hasOwnProperty(r)&&(n=this.values_[r]),n},t.prototype.getKeys=function(){return this.values_&&Object.keys(this.values_)||[]},t.prototype.getProperties=function(){return this.values_&&Mi({},this.values_)||{}},t.prototype.hasProperties=function(){return!!this.values_},t.prototype.notify=function(r,n){var o;o="change:".concat(r),this.hasListener(o)&&this.dispatchEvent(new mst(o,r,n)),o=pv.PROPERTYCHANGE,this.hasListener(o)&&this.dispatchEvent(new mst(o,r,n))},t.prototype.addChangeListener=function(r,n){this.addEventListener("change:".concat(r),n)},t.prototype.removeChangeListener=function(r,n){this.removeEventListener("change:".concat(r),n)},t.prototype.set=function(r,n,o){var i=this.values_||(this.values_={});if(o)i[r]=n;else{var a=i[r];i[r]=n,a!==n&&this.notify(r,a)}},t.prototype.setProperties=function(r,n){for(var o in r)this.set(o,r[o],n)},t.prototype.applyProperties=function(r){r.values_&&Mi(this.values_||(this.values_={}),r.values_)},t.prototype.unset=function(r,n){if(this.values_&&r in this.values_){var o=this.values_[r];delete this.values_[r],aet(this.values_)&&(this.values_=null),n||this.notify(r,o)}},t}(E9),fl=CRr;u();var rce={ACTIVE:"active"};u();function nce(e){return Math.pow(e,3)}function zf(e){return 1-nce(1-e)}function vst(e){return 3*e*e-2*e*e*e}function yst(e){return e}var ARr=function(){var e=function(t,r){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,o){n.__proto__=o}||function(n,o){for(var i in o)Object.prototype.hasOwnProperty.call(o,i)&&(n[i]=o[i])},e(t,r)};return function(t,r){if(typeof r!="function"&&r!==null)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");e(t,r);function n(){this.constructor=t}t.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),ORr=function(e){ARr(t,e);function t(r){var n=e.call(this)||this;return n.on,n.once,n.un,r&&r.handleEvent&&(n.handleEvent=r.handleEvent),n.map_=null,n.setActive(!0),n}return t.prototype.getActive=function(){return this.get(rce.ACTIVE)},t.prototype.getMap=function(){return this.map_},t.prototype.handleEvent=function(r){return!0},t.prototype.setActive=function(r){this.set(rce.ACTIVE,r)},t.prototype.setMap=function(r){this.map_=r},t}(fl);function _st(e,t,r){var n=e.getCenterInternal();if(n){var o=[n[0]+t[0],n[1]+t[1]];e.animateInternal({duration:r!==void 0?r:250,easing:yst,center:e.getConstrainedCenter(o)})}}function WT(e,t,r,n){var o=e.getZoom();if(o!==void 0){var i=e.getConstrainedZoom(o+t),a=e.getResolutionForZoom(i);e.getAnimating()&&e.cancelAnimations(),e.animate({resolution:a,anchor:r,duration:n!==void 0?n:250,easing:zf})}}var ym=ORr;u();var $i={SINGLECLICK:"singleclick",CLICK:kr.CLICK,DBLCLICK:kr.DBLCLICK,POINTERDRAG:"pointerdrag",POINTERMOVE:"pointermove",POINTERDOWN:"pointerdown",POINTERUP:"pointerup",POINTEROVER:"pointerover",POINTEROUT:"pointerout",POINTERENTER:"pointerenter",POINTERLEAVE:"pointerleave",POINTERCANCEL:"pointercancel"};var PRr=function(){var e=function(t,r){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,o){n.__proto__=o}||function(n,o){for(var i in o)Object.prototype.hasOwnProperty.call(o,i)&&(n[i]=o[i])},e(t,r)};return function(t,r){if(typeof r!="function"&&r!==null)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");e(t,r);function n(){this.constructor=t}t.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),DRr=function(e){PRr(t,e);function t(r){var n=this,o=r||{};return n=e.call(this,o)||this,o.handleDownEvent&&(n.handleDownEvent=o.handleDownEvent),o.handleDragEvent&&(n.handleDragEvent=o.handleDragEvent),o.handleMoveEvent&&(n.handleMoveEvent=o.handleMoveEvent),o.handleUpEvent&&(n.handleUpEvent=o.handleUpEvent),o.stopDown&&(n.stopDown=o.stopDown),n.handlingDownUpSequence=!1,n.targetPointers=[],n}return t.prototype.getPointerCount=function(){return this.targetPointers.length},t.prototype.handleDownEvent=function(r){return!1},t.prototype.handleDragEvent=function(r){},t.prototype.handleEvent=function(r){if(!r.originalEvent)return!0;var n=!1;if(this.updateTrackedPointers_(r),this.handlingDownUpSequence){if(r.type==$i.POINTERDRAG)this.handleDragEvent(r),r.originalEvent.preventDefault();else if(r.type==$i.POINTERUP){var o=this.handleUpEvent(r);this.handlingDownUpSequence=o&&this.targetPointers.length>0}}else if(r.type==$i.POINTERDOWN){var i=this.handleDownEvent(r);this.handlingDownUpSequence=i,n=this.stopDown(i)}else r.type==$i.POINTERMOVE&&this.handleMoveEvent(r);return!n},t.prototype.handleMoveEvent=function(r){},t.prototype.handleUpEvent=function(r){return!1},t.prototype.stopDown=function(r){return r},t.prototype.updateTrackedPointers_=function(r){r.activePointers&&(this.targetPointers=r.activePointers)},t}(ym);function YT(e){for(var t=e.length,r=0,n=0,o=0;o<t;o++)r+=e[o].clientX,n+=e[o].clientY;return[r/t,n/t]}var _m=DRr;u();u();u();var bu={XY:"XY",XYZ:"XYZ",XYM:"XYM",XYZM:"XYZM"};u();u();u();u();u();var G0=typeof navigator!="undefined"&&typeof navigator.userAgent!="undefined"?navigator.userAgent.toLowerCase():"",bst=G0.indexOf("firefox")!==-1,NRr=G0.indexOf("safari")!==-1&&G0.indexOf("chrom")==-1,xst=NRr&&!!(G0.indexOf("version/15.4")>=0||G0.match(/cpu (os|iphone os) 15_4 like mac os x/)),wst=G0.indexOf("webkit")!==-1&&G0.indexOf("edge")==-1,Est=G0.indexOf("macintosh")!==-1,S9=typeof devicePixelRatio!="undefined"?devicePixelRatio:1,Sst=typeof WorkerGlobalScope!="undefined"&&typeof OffscreenCanvas!="undefined"&&self instanceof WorkerGlobalScope,Tst=typeof Image!="undefined"&&Image.prototype.decode,T9=function(){var e=!1;try{var t=Object.defineProperty({},"passive",{get:function(){e=!0}});window.addEventListener("_",null,t),window.removeEventListener("_",null,t)}catch(r){}return e}();var oce=new Array(6);function Ff(){return[1,0,0,1,0,0]}function ZT(e){return I9(e,1,0,0,1,0,0)}function ice(e,t){var r=e[0],n=e[1],o=e[2],i=e[3],a=e[4],c=e[5],h=t[0],m=t[1],y=t[2],w=t[3],E=t[4],A=t[5];return e[0]=r*h+o*m,e[1]=n*h+i*m,e[2]=r*y+o*w,e[3]=n*y+i*w,e[4]=r*E+o*A+a,e[5]=n*E+i*A+c,e}function I9(e,t,r,n,o,i,a){return e[0]=t,e[1]=r,e[2]=n,e[3]=o,e[4]=i,e[5]=a,e}function H0(e,t){var r=t[0],n=t[1];return t[0]=e[0]*r+e[2]*n+e[4],t[1]=e[1]*r+e[3]*n+e[5],t}function M9(e,t){var r=Math.cos(t),n=Math.sin(t);return ice(e,I9(oce,r,n,-n,r,0,0))}function QD(e,t,r){return ice(e,I9(oce,t,0,0,r,0,0))}function Ist(e,t,r){return ice(e,I9(oce,1,0,0,1,t,r))}function $0(e,t,r,n,o,i,a,c){var h=Math.sin(i),m=Math.cos(i);return e[0]=n*m,e[1]=o*h,e[2]=-n*h,e[3]=o*m,e[4]=a*n*m-c*n*h+t,e[5]=a*o*h+c*o*m+r,e}function Mst(e,t){var r=LRr(t);zn(r!==0,32);var n=t[0],o=t[1],i=t[2],a=t[3],c=t[4],h=t[5];return e[0]=a/r,e[1]=-o/r,e[2]=-i/r,e[3]=n/r,e[4]=(i*h-a*c)/r,e[5]=-(n*h-o*c)/r,e}function LRr(e){return e[0]*e[3]-e[1]*e[2]}u();function ace(e,t,r,n,o,i){for(var a=i||[],c=0,h=t;h<r;h+=n){var m=e[h],y=e[h+1];a[c++]=o[0]*m+o[2]*y+o[4],a[c++]=o[1]*m+o[3]*y+o[5]}return i&&a.length!=c&&(a.length=c),a}function Cst(e,t,r,n,o,i,a){for(var c=a||[],h=Math.cos(o),m=Math.sin(o),y=i[0],w=i[1],E=0,A=t;A<r;A+=n){var P=e[A]-y,j=e[A+1]-w;c[E++]=y+P*h-j*m,c[E++]=w+P*m+j*h;for(var D=A+2;D<A+n;++D)c[E++]=e[D]}return a&&c.length!=E&&(c.length=E),c}function Ast(e,t,r,n,o,i,a,c){for(var h=c||[],m=a[0],y=a[1],w=0,E=t;E<r;E+=n){var A=e[E]-m,P=e[E+1]-y;h[w++]=m+o*A,h[w++]=y+i*P;for(var j=E+2;j<E+n;++j)h[w++]=e[j]}return c&&h.length!=w&&(h.length=w),h}function Ost(e,t,r,n,o,i,a){for(var c=a||[],h=0,m=t;m<r;m+=n){c[h++]=e[m]+o,c[h++]=e[m+1]+i;for(var y=m+2;y<m+n;++y)c[h++]=e[y]}return a&&c.length!=h&&(c.length=h),c}var kRr=function(){var e=function(t,r){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,o){n.__proto__=o}||function(n,o){for(var i in o)Object.prototype.hasOwnProperty.call(o,i)&&(n[i]=o[i])},e(t,r)};return function(t,r){if(typeof r!="function"&&r!==null)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");e(t,r);function n(){this.constructor=t}t.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),Pst=Ff(),RRr=function(e){kRr(t,e);function t(){var r=e.call(this)||this;return r.extent_=rm(),r.extentRevision_=-1,r.simplifiedGeometryMaxMinSquaredTolerance=0,r.simplifiedGeometryRevision=0,r.simplifyTransformedInternal=hst(function(n,o,i){if(!i)return this.getSimplifiedGeometry(o);var a=this.clone();return a.applyTransform(i),a.getSimplifiedGeometry(o)}),r}return t.prototype.simplifyTransformed=function(r,n){return this.simplifyTransformedInternal(this.getRevision(),r,n)},t.prototype.clone=function(){return Ao()},t.prototype.closestPointXY=function(r,n,o,i){return Ao()},t.prototype.containsXY=function(r,n){var o=this.getClosestPoint([r,n]);return o[0]===r&&o[1]===n},t.prototype.getClosestPoint=function(r,n){var o=n||[NaN,NaN];return this.closestPointXY(r[0],r[1],o,1/0),o},t.prototype.intersectsCoordinate=function(r){return this.containsXY(r[0],r[1])},t.prototype.computeExtent=function(r){return Ao()},t.prototype.getExtent=function(r){if(this.extentRevision_!=this.getRevision()){var n=this.computeExtent(this.extent_);(isNaN(n[0])||isNaN(n[1]))&&mT(n),this.extentRevision_=this.getRevision()}return get(this.extent_,r)},t.prototype.rotate=function(r,n){Ao()},t.prototype.scale=function(r,n,o){Ao()},t.prototype.simplify=function(r){return this.getSimplifiedGeometry(r*r)},t.prototype.getSimplifiedGeometry=function(r){return Ao()},t.prototype.getType=function(){return Ao()},t.prototype.applyTransform=function(r){Ao()},t.prototype.intersectsExtent=function(r){return Ao()},t.prototype.translate=function(r,n){Ao()},t.prototype.transform=function(r,n){var o=jc(r),i=o.getUnits()==Rc.TILE_PIXELS?function(a,c,h){var m=o.getExtent(),y=o.getWorldExtent(),w=Bl(y)/Bl(m);return $0(Pst,y[0],y[3],w,-w,0,0,0),ace(a,0,a.length,h,Pst,c),_b(o,n)(a,c,h)}:_b(o,n);return this.applyTransform(i),this},t}(fl),Dst=RRr;var jRr=function(){var e=function(t,r){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,o){n.__proto__=o}||function(n,o){for(var i in o)Object.prototype.hasOwnProperty.call(o,i)&&(n[i]=o[i])},e(t,r)};return function(t,r){if(typeof r!="function"&&r!==null)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");e(t,r);function n(){this.constructor=t}t.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),qRr=function(e){jRr(t,e);function t(){var r=e.call(this)||this;return r.layout=bu.XY,r.stride=2,r.flatCoordinates=null,r}return t.prototype.computeExtent=function(r){return det(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,r)},t.prototype.getCoordinates=function(){return Ao()},t.prototype.getFirstCoordinate=function(){return this.flatCoordinates.slice(0,this.stride)},t.prototype.getFlatCoordinates=function(){return this.flatCoordinates},t.prototype.getLastCoordinate=function(){return this.flatCoordinates.slice(this.flatCoordinates.length-this.stride)},t.prototype.getLayout=function(){return this.layout},t.prototype.getSimplifiedGeometry=function(r){if(this.simplifiedGeometryRevision!==this.getRevision()&&(this.simplifiedGeometryMaxMinSquaredTolerance=0,this.simplifiedGeometryRevision=this.getRevision()),r<0||this.simplifiedGeometryMaxMinSquaredTolerance!==0&&r<=this.simplifiedGeometryMaxMinSquaredTolerance)return this;var n=this.getSimplifiedGeometryInternal(r),o=n.getFlatCoordinates();return o.length<this.flatCoordinates.length?n:(this.simplifiedGeometryMaxMinSquaredTolerance=r,this)},t.prototype.getSimplifiedGeometryInternal=function(r){return this},t.prototype.getStride=function(){return this.stride},t.prototype.setFlatCoordinates=function(r,n){this.stride=Nst(r),this.layout=r,this.flatCoordinates=n},t.prototype.setCoordinates=function(r,n){Ao()},t.prototype.setLayout=function(r,n,o){var i;if(r)i=Nst(r);else{for(var a=0;a<o;++a)if(n.length===0){this.layout=bu.XY,this.stride=2;return}else n=n[0];i=n.length,r=zRr(i)}this.layout=r,this.stride=i},t.prototype.applyTransform=function(r){this.flatCoordinates&&(r(this.flatCoordinates,this.flatCoordinates,this.stride),this.changed())},t.prototype.rotate=function(r,n){var o=this.getFlatCoordinates();if(o){var i=this.getStride();Cst(o,0,o.length,i,r,n,o),this.changed()}},t.prototype.scale=function(r,n,o){var i=n;i===void 0&&(i=r);var a=o;a||(a=Bd(this.getExtent()));var c=this.getFlatCoordinates();if(c){var h=this.getStride();Ast(c,0,c.length,h,r,i,a,c),this.changed()}},t.prototype.translate=function(r,n){var o=this.getFlatCoordinates();if(o){var i=this.getStride();Ost(o,0,o.length,i,r,n,o),this.changed()}},t}(Dst);function zRr(e){var t;return e==2?t=bu.XY:e==3?t=bu.XYZ:e==4&&(t=bu.XYZM),t}function Nst(e){var t;return e==bu.XY?t=2:e==bu.XYZ||e==bu.XYM?t=3:e==bu.XYZM&&(t=4),t}var KT=qRr;u();function Lst(e,t,r,n,o,i,a){var c=e[t],h=e[t+1],m=e[r]-c,y=e[r+1]-h,w;if(m===0&&y===0)w=t;else{var E=((o-c)*m+(i-h)*y)/(m*m+y*y);if(E>1)w=r;else if(E>0){for(var A=0;A<n;++A)a[A]=JQe(e[t+A],e[r+A],E);a.length=n;return}else w=t}for(var A=0;A<n;++A)a[A]=e[w+A];a.length=n}function sce(e,t,r,n,o){var i=e[t],a=e[t+1];for(t+=n;t<r;t+=n){var c=e[t],h=e[t+1],m=Zg(i,a,c,h);m>o&&(o=m),i=c,a=h}return o}function kst(e,t,r,n,o){for(var i=0,a=r.length;i<a;++i){var c=r[i];o=sce(e,t,c,n,o),t=c}return o}function lce(e,t,r,n,o,i,a,c,h,m,y){if(t==r)return m;var w,E;if(o===0)if(E=Zg(a,c,e[t],e[t+1]),E<m){for(w=0;w<n;++w)h[w]=e[t+w];return h.length=n,E}else return m;for(var A=y||[NaN,NaN],P=t+n;P<r;)if(Lst(e,P-n,P,n,a,c,A),E=Zg(a,c,A[0],A[1]),E<m){for(m=E,w=0;w<n;++w)h[w]=A[w];h.length=n,P+=n}else P+=n*Math.max((Math.sqrt(E)-Math.sqrt(m))/o|0,1);if(i&&(Lst(e,r-n,t,n,a,c,A),E=Zg(a,c,A[0],A[1]),E<m)){for(m=E,w=0;w<n;++w)h[w]=A[w];h.length=n}return m}function Rst(e,t,r,n,o,i,a,c,h,m,y){for(var w=y||[NaN,NaN],E=0,A=r.length;E<A;++E){var P=r[E];m=lce(e,t,P,n,o,i,a,c,h,m,w),t=P}return m}u();function jst(e,t,r,n){for(var o=0,i=r.length;o<i;++o)e[t++]=r[o];return t}function uce(e,t,r,n){for(var o=0,i=r.length;o<i;++o)for(var a=r[o],c=0;c<n;++c)e[t++]=a[c];return t}function qst(e,t,r,n,o){for(var i=o||[],a=0,c=0,h=r.length;c<h;++c){var m=uce(e,t,r[c],n);i[a++]=m,t=m}return i.length=a,i}u();function zst(e,t,r,n,o,i,a){var c=(r-t)/n;if(c<3){for(;t<r;t+=n)i[a++]=e[t],i[a++]=e[t+1];return a}var h=new Array(c);h[0]=1,h[c-1]=1;for(var m=[t,r-n],y=0;m.length>0;){for(var w=m.pop(),E=m.pop(),A=0,P=e[E],j=e[E+1],D=e[w],L=e[w+1],z=E+n;z<w;z+=n){var B=e[z],G=e[z+1],Z=KQe(B,G,P,j,D,L);Z>A&&(y=z,A=Z)}A>o&&(h[(y-t)/n]=1,E+n<y&&m.push(E,y),y+n<w&&m.push(y,w))}for(var z=0;z<c;++z)h[z]&&(i[a++]=e[t+z*n],i[a++]=e[t+z*n+1]);return a}function XT(e,t){return t*Math.round(e/t)}function FRr(e,t,r,n,o,i,a){if(t==r)return a;var c=XT(e[t],o),h=XT(e[t+1],o);t+=n,i[a++]=c,i[a++]=h;var m,y;do if(m=XT(e[t],o),y=XT(e[t+1],o),t+=n,t==r)return i[a++]=m,i[a++]=y,a;while(m==c&&y==h);for(;t<r;){var w=XT(e[t],o),E=XT(e[t+1],o);if(t+=n,!(w==m&&E==y)){var A=m-c,P=y-h,j=w-c,D=E-h;if(A*D==P*j&&(A<0&&j<A||A==j||A>0&&j>A)&&(P<0&&D<P||P==D||P>0&&D>P)){m=w,y=E;continue}i[a++]=m,i[a++]=y,c=m,h=y,m=w,y=E}}return i[a++]=m,i[a++]=y,a}function Fst(e,t,r,n,o,i,a,c){for(var h=0,m=r.length;h<m;++h){var y=r[h];a=FRr(e,t,y,n,o,i,a),c.push(a),t=y}return a}u();function cce(e,t,r,n,o){for(var i=o!==void 0?o:[],a=0,c=t;c<r;c+=n)i[a++]=e.slice(c,c+n);return i.length=a,i}function Ust(e,t,r,n,o){for(var i=o!==void 0?o:[],a=0,c=0,h=r.length;c<h;++c){var m=r[c];i[a++]=cce(e,t,m,n,i[a]),t=m}return i.length=a,i}u();function pce(e,t,r,n){for(var o=0,i=e[r-n],a=e[r-n+1];t<r;t+=n){var c=e[t],h=e[t+1];o+=a*c-i*h,i=c,a=h}return o/2}function Bst(e,t,r,n){for(var o=0,i=0,a=r.length;i<a;++i){var c=r[i];o+=pce(e,t,c,n),t=c}return o}var URr=function(){var e=function(t,r){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,o){n.__proto__=o}||function(n,o){for(var i in o)Object.prototype.hasOwnProperty.call(o,i)&&(n[i]=o[i])},e(t,r)};return function(t,r){if(typeof r!="function"&&r!==null)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");e(t,r);function n(){this.constructor=t}t.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),BRr=function(e){URr(t,e);function t(r,n){var o=e.call(this)||this;return o.maxDelta_=-1,o.maxDeltaRevision_=-1,n!==void 0&&!Array.isArray(r[0])?o.setFlatCoordinates(n,r):o.setCoordinates(r,n),o}return t.prototype.clone=function(){return new t(this.flatCoordinates.slice(),this.layout)},t.prototype.closestPointXY=function(r,n,o,i){return i<gF(this.getExtent(),r,n)?i:(this.maxDeltaRevision_!=this.getRevision()&&(this.maxDelta_=Math.sqrt(sce(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,0)),this.maxDeltaRevision_=this.getRevision()),lce(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,this.maxDelta_,!0,r,n,o,i))},t.prototype.getArea=function(){return pce(this.flatCoordinates,0,this.flatCoordinates.length,this.stride)},t.prototype.getCoordinates=function(){return cce(this.flatCoordinates,0,this.flatCoordinates.length,this.stride)},t.prototype.getSimplifiedGeometryInternal=function(r){var n=[];return n.length=zst(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,r,n,0),new t(n,bu.XY)},t.prototype.getType=function(){return"LinearRing"},t.prototype.intersectsExtent=function(r){return!1},t.prototype.setCoordinates=function(r,n){this.setLayout(n,r,1),this.flatCoordinates||(this.flatCoordinates=[]),this.flatCoordinates.length=uce(this.flatCoordinates,0,r,this.stride),this.changed()},t}(KT),fce=BRr;u();var VRr=function(){var e=function(t,r){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,o){n.__proto__=o}||function(n,o){for(var i in o)Object.prototype.hasOwnProperty.call(o,i)&&(n[i]=o[i])},e(t,r)};return function(t,r){if(typeof r!="function"&&r!==null)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");e(t,r);function n(){this.constructor=t}t.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),GRr=function(e){VRr(t,e);function t(r,n){var o=e.call(this)||this;return o.setCoordinates(r,n),o}return t.prototype.clone=function(){var r=new t(this.flatCoordinates.slice(),this.layout);return r.applyProperties(this),r},t.prototype.closestPointXY=function(r,n,o,i){var a=this.flatCoordinates,c=Zg(r,n,a[0],a[1]);if(c<i){for(var h=this.stride,m=0;m<h;++m)o[m]=a[m];return o.length=h,c}else return i},t.prototype.getCoordinates=function(){return this.flatCoordinates?this.flatCoordinates.slice():[]},t.prototype.computeExtent=function(r){return fet(this.flatCoordinates,r)},t.prototype.getType=function(){return"Point"},t.prototype.intersectsExtent=function(r){return Zae(r,this.flatCoordinates[0],this.flatCoordinates[1])},t.prototype.setCoordinates=function(r,n){this.setLayout(n,r,0),this.flatCoordinates||(this.flatCoordinates=[]),this.flatCoordinates.length=jst(this.flatCoordinates,0,r,this.stride),this.changed()},t}(KT),Vst=GRr;u();u();function Gst(e,t,r,n,o){var i=vF(o,function(a){return!W0(e,t,r,n,a[0],a[1])});return!i}function W0(e,t,r,n,o,i){for(var a=0,c=e[r-n],h=e[r-n+1];t<r;t+=n){var m=e[t],y=e[t+1];h<=i?y>i&&(m-c)*(i-h)-(o-c)*(y-h)>0&&a++:y<=i&&(m-c)*(i-h)-(o-c)*(y-h)<0&&a--,c=m,h=y}return a!==0}function C9(e,t,r,n,o,i){if(r.length===0||!W0(e,t,r[0],n,o,i))return!1;for(var a=1,c=r.length;a<c;++a)if(W0(e,r[a-1],r[a],n,o,i))return!1;return!0}function Hst(e,t,r,n,o,i,a){for(var c,h,m,y,w,E,A,P=o[i+1],j=[],D=0,L=r.length;D<L;++D){var z=r[D];for(y=e[z-n],E=e[z-n+1],c=t;c<z;c+=n)w=e[c],A=e[c+1],(P<=E&&A<=P||E<=P&&P<=A)&&(m=(P-E)/(A-E)*(w-y)+y,j.push(m)),y=w,E=A}var B=NaN,G=-1/0;for(j.sort(JD),y=j[0],c=1,h=j.length;c<h;++c){w=j[c];var Z=Math.abs(w-y);Z>G&&(m=(y+w)/2,C9(e,t,r,n,m,P)&&(B=m,G=Z)),y=w}return isNaN(B)&&(B=o[i]),a?(a.push(B,P,G),a):[B,P,G]}u();u();function $st(e,t,r,n,o){var i;for(t+=n;t<r;t+=n)if(i=o(e.slice(t-n,t),e.slice(t,t+n)),i)return i;return!1}function Wst(e,t,r,n,o){var i=Xae(rm(),e,t,r,n);return eD(o,i)?pet(o,i)||i[0]>=o[0]&&i[2]<=o[2]||i[1]>=o[1]&&i[3]<=o[3]?!0:$st(e,t,r,n,function(a,c){return vet(o,a,c)}):!1}function dce(e,t,r,n,o){return!!(Wst(e,t,r,n,o)||W0(e,t,r,n,o[0],o[1])||W0(e,t,r,n,o[0],o[3])||W0(e,t,r,n,o[2],o[1])||W0(e,t,r,n,o[2],o[3]))}function Yst(e,t,r,n,o){if(!dce(e,t,r[0],n,o))return!1;if(r.length===1)return!0;for(var i=1,a=r.length;i<a;++i)if(Gst(e,r[i-1],r[i],n,o)&&!Wst(e,r[i-1],r[i],n,o))return!1;return!0}u();u();function Zst(e,t,r,n){for(;t<r-n;){for(var o=0;o<n;++o){var i=e[t+o];e[t+o]=e[r-n+o],e[r-n+o]=i}t+=n,r-=n}}function Kst(e,t,r,n){for(var o=0,i=e[r-n],a=e[r-n+1];t<r;t+=n){var c=e[t],h=e[t+1];o+=(c-i)*(h+a),i=c,a=h}return o===0?void 0:o>0}function Xst(e,t,r,n,o){for(var i=o!==void 0?o:!1,a=0,c=r.length;a<c;++a){var h=r[a],m=Kst(e,t,h,n);if(a===0){if(i&&m||!i&&!m)return!1}else if(i&&!m||!i&&m)return!1;t=h}return!0}function hce(e,t,r,n,o){for(var i=o!==void 0?o:!1,a=0,c=r.length;a<c;++a){var h=r[a],m=Kst(e,t,h,n),y=a===0?i&&m||!i&&!m:i&&!m||!i&&m;y&&Zst(e,t,h,n),t=h}return t}var HRr=function(){var e=function(t,r){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,o){n.__proto__=o}||function(n,o){for(var i in o)Object.prototype.hasOwnProperty.call(o,i)&&(n[i]=o[i])},e(t,r)};return function(t,r){if(typeof r!="function"&&r!==null)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");e(t,r);function n(){this.constructor=t}t.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),Jst=function(e){HRr(t,e);function t(r,n,o){var i=e.call(this)||this;return i.ends_=[],i.flatInteriorPointRevision_=-1,i.flatInteriorPoint_=null,i.maxDelta_=-1,i.maxDeltaRevision_=-1,i.orientedRevision_=-1,i.orientedFlatCoordinates_=null,n!==void 0&&o?(i.setFlatCoordinates(n,r),i.ends_=o):i.setCoordinates(r,n),i}return t.prototype.appendLinearRing=function(r){this.flatCoordinates?fst(this.flatCoordinates,r.getFlatCoordinates()):this.flatCoordinates=r.getFlatCoordinates().slice(),this.ends_.push(this.flatCoordinates.length),this.changed()},t.prototype.clone=function(){var r=new t(this.flatCoordinates.slice(),this.layout,this.ends_.slice());return r.applyProperties(this),r},t.prototype.closestPointXY=function(r,n,o,i){return i<gF(this.getExtent(),r,n)?i:(this.maxDeltaRevision_!=this.getRevision()&&(this.maxDelta_=Math.sqrt(kst(this.flatCoordinates,0,this.ends_,this.stride,0)),this.maxDeltaRevision_=this.getRevision()),Rst(this.flatCoordinates,0,this.ends_,this.stride,this.maxDelta_,!0,r,n,o,i))},t.prototype.containsXY=function(r,n){return C9(this.getOrientedFlatCoordinates(),0,this.ends_,this.stride,r,n)},t.prototype.getArea=function(){return Bst(this.getOrientedFlatCoordinates(),0,this.ends_,this.stride)},t.prototype.getCoordinates=function(r){var n;return r!==void 0?(n=this.getOrientedFlatCoordinates().slice(),hce(n,0,this.ends_,this.stride,r)):n=this.flatCoordinates,Ust(n,0,this.ends_,this.stride)},t.prototype.getEnds=function(){return this.ends_},t.prototype.getFlatInteriorPoint=function(){if(this.flatInteriorPointRevision_!=this.getRevision()){var r=Bd(this.getExtent());this.flatInteriorPoint_=Hst(this.getOrientedFlatCoordinates(),0,this.ends_,this.stride,r,0),this.flatInteriorPointRevision_=this.getRevision()}return this.flatInteriorPoint_},t.prototype.getInteriorPoint=function(){return new Vst(this.getFlatInteriorPoint(),bu.XYM)},t.prototype.getLinearRingCount=function(){return this.ends_.length},t.prototype.getLinearRing=function(r){return r<0||this.ends_.length<=r?null:new fce(this.flatCoordinates.slice(r===0?0:this.ends_[r-1],this.ends_[r]),this.layout)},t.prototype.getLinearRings=function(){for(var r=this.layout,n=this.flatCoordinates,o=this.ends_,i=[],a=0,c=0,h=o.length;c<h;++c){var m=o[c],y=new fce(n.slice(a,m),r);i.push(y),a=m}return i},t.prototype.getOrientedFlatCoordinates=function(){if(this.orientedRevision_!=this.getRevision()){var r=this.flatCoordinates;Xst(r,0,this.ends_,this.stride)?this.orientedFlatCoordinates_=r:(this.orientedFlatCoordinates_=r.slice(),this.orientedFlatCoordinates_.length=hce(this.orientedFlatCoordinates_,0,this.ends_,this.stride)),this.orientedRevision_=this.getRevision()}return this.orientedFlatCoordinates_},t.prototype.getSimplifiedGeometryInternal=function(r){var n=[],o=[];return n.length=Fst(this.flatCoordinates,0,this.ends_,this.stride,Math.sqrt(r),n,0,o),new t(n,bu.XY,o)},t.prototype.getType=function(){return"Polygon"},t.prototype.intersectsExtent=function(r){return Yst(this.getOrientedFlatCoordinates(),0,this.ends_,this.stride,r)},t.prototype.setCoordinates=function(r,n){this.setLayout(n,r,2),this.flatCoordinates||(this.flatCoordinates=[]);var o=qst(this.flatCoordinates,0,r,this.stride,this.ends_);this.flatCoordinates.length=o.length===0?0:o[o.length-1],this.changed()},t}(KT),Qst=Jst;function eN(e){var t=e[0],r=e[1],n=e[2],o=e[3],i=[t,r,t,o,n,o,n,r,t,r];return new Jst(i,bu.XY,[i.length])}var $Rr=function(){var e=function(t,r){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,o){n.__proto__=o}||function(n,o){for(var i in o)Object.prototype.hasOwnProperty.call(o,i)&&(n[i]=o[i])},e(t,r)};return function(t,r){if(typeof r!="function"&&r!==null)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");e(t,r);function n(){this.constructor=t}t.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),WRr=function(e){$Rr(t,e);function t(r){var n=e.call(this)||this;return n.geometry_=null,n.element_=document.createElement("div"),n.element_.style.position="absolute",n.element_.style.pointerEvents="auto",n.element_.className="ol-box "+r,n.map_=null,n.startPixel_=null,n.endPixel_=null,n}return t.prototype.disposeInternal=function(){this.setMap(null)},t.prototype.render_=function(){var r=this.startPixel_,n=this.endPixel_,o="px",i=this.element_.style;i.left=Math.min(r[0],n[0])+o,i.top=Math.min(r[1],n[1])+o,i.width=Math.abs(n[0]-r[0])+o,i.height=Math.abs(n[1]-r[1])+o},t.prototype.setMap=function(r){if(this.map_){this.map_.getOverlayContainer().removeChild(this.element_);var n=this.element_.style;n.left="inherit",n.top="inherit",n.width="inherit",n.height="inherit"}this.map_=r,this.map_&&this.map_.getOverlayContainer().appendChild(this.element_)},t.prototype.setPixels=function(r,n){this.startPixel_=r,this.endPixel_=n,this.createOrUpdateGeometry(),this.render_()},t.prototype.createOrUpdateGeometry=function(){var r=this.startPixel_,n=this.endPixel_,o=[r,[r[0],n[1]],n,[n[0],r[1]]],i=o.map(this.map_.getCoordinateFromPixelInternal,this.map_);i[4]=i[0].slice(),this.geometry_?this.geometry_.setCoordinates([i]):this.geometry_=new Qst([i])},t.prototype.getGeometry=function(){return this.geometry_},t}(B0),elt=WRr;u();function tN(e){var t=arguments;return function(r){for(var n=!0,o=0,i=t.length;o<i&&(n=n&&t[o](r),!!n);++o);return n}}var tlt=function(e){var t=e.originalEvent;return t.altKey&&!(t.metaKey||t.ctrlKey)&&t.shiftKey},YRr=function(e){var t=e.map.getTargetElement(),r=e.map.getOwnerDocument().activeElement;return t.contains(r)},A9=function(e){return e.map.getTargetElement().hasAttribute("tabindex")?YRr(e):!0},rlt=V0;var O9=function(e){var t=e.originalEvent;return t.button==0&&!(wst&&Est&&t.ctrlKey)};var P9=function(e){var t=e.originalEvent;return!t.altKey&&!(t.metaKey||t.ctrlKey)&&!t.shiftKey};var nlt=function(e){var t=e.originalEvent;return!t.altKey&&!(t.metaKey||t.ctrlKey)&&t.shiftKey},D9=function(e){var t=e.originalEvent,r=t.target.tagName;return r!=="INPUT"&&r!=="SELECT"&&r!=="TEXTAREA"&&!t.target.isContentEditable},N9=function(e){var t=e.originalEvent;return zn(t!==void 0,56),t.pointerType=="mouse"};var olt=function(e){var t=e.originalEvent;return zn(t!==void 0,56),t.isPrimary&&t.button===0};var ilt=function(){var e=function(t,r){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,o){n.__proto__=o}||function(n,o){for(var i in o)Object.prototype.hasOwnProperty.call(o,i)&&(n[i]=o[i])},e(t,r)};return function(t,r){if(typeof r!="function"&&r!==null)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");e(t,r);function n(){this.constructor=t}t.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),L9={BOXSTART:"boxstart",BOXDRAG:"boxdrag",BOXEND:"boxend",BOXCANCEL:"boxcancel"},mce=function(e){ilt(t,e);function t(r,n,o){var i=e.call(this,r)||this;return i.coordinate=n,i.mapBrowserEvent=o,i}return t}(_u);var ZRr=function(e){ilt(t,e);function t(r){var n=e.call(this)||this;n.on,n.once,n.un;var o=r||{};return n.box_=new elt(o.className||"ol-dragbox"),n.minArea_=o.minArea!==void 0?o.minArea:64,o.onBoxEnd&&(n.onBoxEnd=o.onBoxEnd),n.startPixel_=null,n.condition_=o.condition?o.condition:O9,n.boxEndCondition_=o.boxEndCondition?o.boxEndCondition:n.defaultBoxEndCondition,n}return t.prototype.defaultBoxEndCondition=function(r,n,o){var i=o[0]-n[0],a=o[1]-n[1];return i*i+a*a>=this.minArea_},t.prototype.getGeometry=function(){return this.box_.getGeometry()},t.prototype.handleDragEvent=function(r){this.box_.setPixels(this.startPixel_,r.pixel),this.dispatchEvent(new mce(L9.BOXDRAG,r.coordinate,r))},t.prototype.handleUpEvent=function(r){this.box_.setMap(null);var n=this.boxEndCondition_(r,this.startPixel_,r.pixel);return n&&this.onBoxEnd(r),this.dispatchEvent(new mce(n?L9.BOXEND:L9.BOXCANCEL,r.coordinate,r)),!1},t.prototype.handleDownEvent=function(r){return this.condition_(r)?(this.startPixel_=r.pixel,this.box_.setMap(r.map),this.box_.setPixels(this.startPixel_,this.startPixel_),this.dispatchEvent(new mce(L9.BOXSTART,r.coordinate,r)),!0):!1},t.prototype.onBoxEnd=function(r){},t}(_m),alt=ZRr;var KRr=function(){var e=function(t,r){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,o){n.__proto__=o}||function(n,o){for(var i in o)Object.prototype.hasOwnProperty.call(o,i)&&(n[i]=o[i])},e(t,r)};return function(t,r){if(typeof r!="function"&&r!==null)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");e(t,r);function n(){this.constructor=t}t.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),XRr=function(e){KRr(t,e);function t(r){var n=this,o=r||{},i=o.condition?o.condition:nlt;return n=e.call(this,{condition:i,className:o.className||"ol-dragzoom",minArea:o.minArea})||this,n.duration_=o.duration!==void 0?o.duration:200,n.out_=o.out!==void 0?o.out:!1,n}return t.prototype.onBoxEnd=function(r){var n=this.getMap(),o=n.getView(),i=this.getGeometry();if(this.out_){var a=o.rotatedExtentForGeometry(i),c=o.getResolutionForExtentInternal(a),h=o.getResolution()/c;i=i.clone(),i.scale(h*h)}o.fitInternal(i,{duration:this.duration_,easing:zf})},t}(alt),k9=XRr;u();u();u();var bm={POSTRENDER:"postrender",MOVESTART:"movestart",MOVEEND:"moveend",LOADSTART:"loadstart",LOADEND:"loadend"};u();function hv(e,t,r,n){var o;return r&&r.length?o=r.shift():Sst?o=new OffscreenCanvas(e||300,t||300):o=document.createElement("canvas"),e&&(o.width=e),t&&(o.height=t),o.getContext("2d",n)}function slt(e){var t=e.canvas;t.width=1,t.height=1,e.clearRect(0,0,1,1)}function JT(e,t){var r=t.parentNode;r&&r.replaceChild(e,t)}function rN(e){return e&&e.parentNode?e.parentNode.removeChild(e):null}function llt(e){for(;e.lastChild;)e.removeChild(e.lastChild)}function ult(e,t){for(var r=e.childNodes,n=0;;++n){var o=r[n],i=t[n];if(!o&&!i)break;if(o!==i){if(!o){e.appendChild(i);continue}if(!i){e.removeChild(o),--n;continue}e.insertBefore(i,o)}}}var JRr=function(){var e=function(t,r){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,o){n.__proto__=o}||function(n,o){for(var i in o)Object.prototype.hasOwnProperty.call(o,i)&&(n[i]=o[i])},e(t,r)};return function(t,r){if(typeof r!="function"&&r!==null)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");e(t,r);function n(){this.constructor=t}t.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),QRr=function(e){JRr(t,e);function t(r){var n=e.call(this)||this,o=r.element;return o&&!r.target&&!o.style.pointerEvents&&(o.style.pointerEvents="auto"),n.element=o||null,n.target_=null,n.map_=null,n.listenerKeys=[],r.render&&(n.render=r.render),r.target&&n.setTarget(r.target),n}return t.prototype.disposeInternal=function(){rN(this.element),e.prototype.disposeInternal.call(this)},t.prototype.getMap=function(){return this.map_},t.prototype.setMap=function(r){this.map_&&rN(this.element);for(var n=0,o=this.listenerKeys.length;n<o;++n)Ko(this.listenerKeys[n]);if(this.listenerKeys.length=0,this.map_=r,r){var i=this.target_?this.target_:r.getOverlayContainerStopEvent();i.appendChild(this.element),this.render!==dv&&this.listenerKeys.push(ao(r,bm.POSTRENDER,this.render,this)),r.render()}},t.prototype.render=function(r){},t.prototype.setTarget=function(r){this.target_=typeof r=="string"?document.getElementById(r):r},t}(fl),Op=QRr;u();var Ss={LAYERGROUP:"layergroup",SIZE:"size",TARGET:"target",VIEW:"view"};u();var nN="ol-hidden";var Uf="ol-unselectable",gce="ol-unsupported",xm="ol-control",vce="ol-collapsed",e6r=new RegExp(["^\\s*(?=(?:(?:[-a-z]+\\s*){0,2}(italic|oblique))?)","(?=(?:(?:[-a-z]+\\s*){0,2}(small-caps))?)","(?=(?:(?:[-a-z]+\\s*){0,2}(bold(?:er)?|lighter|[1-9]00 ))?)","(?:(?:normal|\\1|\\2|\\3)\\s*){0,3}((?:xx?-)?","(?:small|large)|medium|smaller|larger|[\\.\\d]+(?:\\%|in|[cem]m|ex|p[ctx]))","(?:\\s*\\/\\s*(normal|[\\.\\d]+(?:\\%|in|[cem]m|ex|p[ctx])?))",`?\\s*([-,\\"\\'\\sa-z]+?)\\s*$`].join(""),"i"),clt=["style","variant","weight","size","lineHeight","family"],plt=function(e){var t=e.match(e6r);if(!t)return null;for(var r={lineHeight:"normal",size:"1.2em",style:"normal",weight:"normal",variant:"normal"},n=0,o=clt.length;n<o;++n){var i=t[n+1];i!==void 0&&(r[clt[n]]=i)}return r.families=r.family.split(/,\s?/),r};var t6r=function(){var e=function(t,r){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,o){n.__proto__=o}||function(n,o){for(var i in o)Object.prototype.hasOwnProperty.call(o,i)&&(n[i]=o[i])},e(t,r)};return function(t,r){if(typeof r!="function"&&r!==null)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");e(t,r);function n(){this.constructor=t}t.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),flt=["fullscreenchange","webkitfullscreenchange","MSFullscreenChange"],dlt={ENTERFULLSCREEN:"enterfullscreen",LEAVEFULLSCREEN:"leavefullscreen"},r6r=function(e){t6r(t,e);function t(r){var n=this,o=r||{};n=e.call(this,{element:document.createElement("div"),target:o.target})||this,n.on,n.once,n.un,n.keys_=o.keys!==void 0?o.keys:!1,n.source_=o.source,n.isInFullscreen_=!1,n.boundHandleMapTargetChange_=n.handleMapTargetChange_.bind(n),n.cssClassName_=o.className!==void 0?o.className:"ol-full-screen",n.documentListeners_=[],n.activeClassName_=o.activeClassName!==void 0?o.activeClassName.split(" "):[n.cssClassName_+"-true"],n.inactiveClassName_=o.inactiveClassName!==void 0?o.inactiveClassName.split(" "):[n.cssClassName_+"-false"];var i=o.label!==void 0?o.label:"\u2922";n.labelNode_=typeof i=="string"?document.createTextNode(i):i;var a=o.labelActive!==void 0?o.labelActive:"\xD7";n.labelActiveNode_=typeof a=="string"?document.createTextNode(a):a;var c=o.tipLabel?o.tipLabel:"Toggle full-screen";return n.button_=document.createElement("button"),n.button_.title=c,n.button_.setAttribute("type","button"),n.button_.appendChild(n.labelNode_),n.button_.addEventListener(kr.CLICK,n.handleClick_.bind(n),!1),n.setClassName_(n.button_,n.isInFullscreen_),n.element.className="".concat(n.cssClassName_," ").concat(Uf," ").concat(xm),n.element.appendChild(n.button_),n}return t.prototype.handleClick_=function(r){r.preventDefault(),this.handleFullScreen_()},t.prototype.handleFullScreen_=function(){var r=this.getMap();if(r){var n=r.getOwnerDocument();if(hlt(n))if(mlt(n))o6r(n);else{var o=void 0;this.source_?o=typeof this.source_=="string"?n.getElementById(this.source_):this.source_:o=r.getTargetElement(),this.keys_?n6r(o):glt(o)}}},t.prototype.handleFullScreenChange_=function(){var r=this.getMap();if(r){var n=this.isInFullscreen_;this.isInFullscreen_=mlt(r.getOwnerDocument()),n!==this.isInFullscreen_&&(this.setClassName_(this.button_,this.isInFullscreen_),this.isInFullscreen_?(JT(this.labelActiveNode_,this.labelNode_),this.dispatchEvent(dlt.ENTERFULLSCREEN)):(JT(this.labelNode_,this.labelActiveNode_),this.dispatchEvent(dlt.LEAVEFULLSCREEN)),r.updateSize())}},t.prototype.setClassName_=function(r,n){var o,i,a,c;n?((o=r.classList).remove.apply(o,this.inactiveClassName_),(i=r.classList).add.apply(i,this.activeClassName_)):((a=r.classList).remove.apply(a,this.activeClassName_),(c=r.classList).add.apply(c,this.inactiveClassName_))},t.prototype.setMap=function(r){var n=this.getMap();n&&n.removeChangeListener(Ss.TARGET,this.boundHandleMapTargetChange_),e.prototype.setMap.call(this,r),this.handleMapTargetChange_(),r&&r.addChangeListener(Ss.TARGET,this.boundHandleMapTargetChange_)},t.prototype.handleMapTargetChange_=function(){for(var r=this.documentListeners_,n=0,o=r.length;n<o;++n)Ko(r[n]);r.length=0;var i=this.getMap();if(i){var a=i.getOwnerDocument();hlt(a)?this.element.classList.remove(gce):this.element.classList.add(gce);for(var n=0,o=flt.length;n<o;++n)r.push(ao(a,flt[n],this.handleFullScreenChange_,this));this.handleFullScreenChange_()}},t}(Op);function hlt(e){var t=e.body;return!!(t.webkitRequestFullscreen||t.msRequestFullscreen&&e.msFullscreenEnabled||t.requestFullscreen&&e.fullscreenEnabled)}function mlt(e){return!!(e.webkitIsFullScreen||e.msFullscreenElement||e.fullscreenElement)}function glt(e){e.requestFullscreen?e.requestFullscreen():e.msRequestFullscreen?e.msRequestFullscreen():e.webkitRequestFullscreen&&e.webkitRequestFullscreen()}function n6r(e){e.webkitRequestFullscreen?e.webkitRequestFullscreen():glt(e)}function o6r(e){e.exitFullscreen?e.exitFullscreen():e.msExitFullscreen?e.msExitFullscreen():e.webkitExitFullscreen&&e.webkitExitFullscreen()}var vlt=r6r;u();u();u();var Qu={ADD:"add",REMOVE:"remove"};var _lt=function(){var e=function(t,r){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,o){n.__proto__=o}||function(n,o){for(var i in o)Object.prototype.hasOwnProperty.call(o,i)&&(n[i]=o[i])},e(t,r)};return function(t,r){if(typeof r!="function"&&r!==null)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");e(t,r);function n(){this.constructor=t}t.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),ylt={LENGTH:"length"},R9=function(e){_lt(t,e);function t(r,n,o){var i=e.call(this,r)||this;return i.element=n,i.index=o,i}return t}(_u);var i6r=function(e){_lt(t,e);function t(r,n){var o=e.call(this)||this;o.on,o.once,o.un;var i=n||{};if(o.unique_=!!i.unique,o.array_=r||[],o.unique_)for(var a=0,c=o.array_.length;a<c;++a)o.assertUnique_(o.array_[a],a);return o.updateLength_(),o}return t.prototype.clear=function(){for(;this.getLength()>0;)this.pop()},t.prototype.extend=function(r){for(var n=0,o=r.length;n<o;++n)this.push(r[n]);return this},t.prototype.forEach=function(r){for(var n=this.array_,o=0,i=n.length;o<i;++o)r(n[o],o,n)},t.prototype.getArray=function(){return this.array_},t.prototype.item=function(r){return this.array_[r]},t.prototype.getLength=function(){return this.get(ylt.LENGTH)},t.prototype.insertAt=function(r,n){this.unique_&&this.assertUnique_(n),this.array_.splice(r,0,n),this.updateLength_(),this.dispatchEvent(new R9(Qu.ADD,n,r))},t.prototype.pop=function(){return this.removeAt(this.getLength()-1)},t.prototype.push=function(r){this.unique_&&this.assertUnique_(r);var n=this.getLength();return this.insertAt(n,r),this.getLength()},t.prototype.remove=function(r){for(var n=this.array_,o=0,i=n.length;o<i;++o)if(n[o]===r)return this.removeAt(o)},t.prototype.removeAt=function(r){var n=this.array_[r];return this.array_.splice(r,1),this.updateLength_(),this.dispatchEvent(new R9(Qu.REMOVE,n,r)),n},t.prototype.setAt=function(r,n){var o=this.getLength();if(r<o){this.unique_&&this.assertUnique_(n,r);var i=this.array_[r];this.array_[r]=n,this.dispatchEvent(new R9(Qu.REMOVE,i,r)),this.dispatchEvent(new R9(Qu.ADD,n,r))}else{for(var a=o;a<r;++a)this.insertAt(a,void 0);this.insertAt(r,n)}},t.prototype.updateLength_=function(){this.set(ylt.LENGTH,this.array_.length)},t.prototype.assertUnique_=function(r,n){for(var o=0,i=this.array_.length;o<i;++o)if(this.array_[o]===r&&o!==n)throw new mF(58)},t}(fl),ec=i6r;u();var a6r=function(){var e=function(t,r){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,o){n.__proto__=o}||function(n,o){for(var i in o)Object.prototype.hasOwnProperty.call(o,i)&&(n[i]=o[i])},e(t,r)};return function(t,r){if(typeof r!="function"&&r!==null)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");e(t,r);function n(){this.constructor=t}t.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),s6r=function(e){a6r(t,e);function t(r){var n=e.call(this)||this,o=r||{};return n.delta_=o.delta?o.delta:1,n.duration_=o.duration!==void 0?o.duration:250,n}return t.prototype.handleEvent=function(r){var n=!1;if(r.type==$i.DBLCLICK){var o=r.originalEvent,i=r.map,a=r.coordinate,c=o.shiftKey?-this.delta_:this.delta_,h=i.getView();WT(h,c,a,this.duration_),o.preventDefault(),n=!0}return!n},t}(ym),blt=s6r;u();var l6r=function(){var e=function(t,r){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,o){n.__proto__=o}||function(n,o){for(var i in o)Object.prototype.hasOwnProperty.call(o,i)&&(n[i]=o[i])},e(t,r)};return function(t,r){if(typeof r!="function"&&r!==null)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");e(t,r);function n(){this.constructor=t}t.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),u6r=function(e){l6r(t,e);function t(r){var n=e.call(this,{stopDown:fv})||this,o=r||{};n.kinetic_=o.kinetic,n.lastCentroid=null,n.lastPointersCount_,n.panning_=!1;var i=o.condition?o.condition:tN(P9,olt);return n.condition_=o.onFocusOnly?tN(A9,i):i,n.noKinetic_=!1,n}return t.prototype.handleDragEvent=function(r){this.panning_||(this.panning_=!0,this.getMap().getView().beginInteraction());var n=this.targetPointers,o=YT(n);if(n.length==this.lastPointersCount_){if(this.kinetic_&&this.kinetic_.update(o[0],o[1]),this.lastCentroid){var i=[this.lastCentroid[0]-o[0],o[1]-this.lastCentroid[1]],a=r.map,c=a.getView();bet(i,c.getResolution()),gT(i,c.getRotation()),c.adjustCenterInternal(i)}}else this.kinetic_&&this.kinetic_.begin();this.lastCentroid=o,this.lastPointersCount_=n.length,r.originalEvent.preventDefault()},t.prototype.handleUpEvent=function(r){var n=r.map,o=n.getView();if(this.targetPointers.length===0){if(!this.noKinetic_&&this.kinetic_&&this.kinetic_.end()){var i=this.kinetic_.getDistance(),a=this.kinetic_.getAngle(),c=o.getCenterInternal(),h=n.getPixelFromCoordinateInternal(c),m=n.getCoordinateFromPixelInternal([h[0]-i*Math.cos(a),h[1]-i*Math.sin(a)]);o.animateInternal({center:o.getConstrainedCenter(m),duration:500,easing:zf})}return this.panning_&&(this.panning_=!1,o.endInteraction()),!1}else return this.kinetic_&&this.kinetic_.begin(),this.lastCentroid=null,!0},t.prototype.handleDownEvent=function(r){if(this.targetPointers.length>0&&this.condition_(r)){var n=r.map,o=n.getView();return this.lastCentroid=null,o.getAnimating()&&o.cancelAnimations(),this.kinetic_&&this.kinetic_.begin(),this.noKinetic_=this.targetPointers.length>1,!0}else return!1},t}(_m),xlt=u6r;u();u();function QT(e){if(e!==void 0)return 0}function yce(e){if(e!==void 0)return e}function wlt(e){var t=2*Math.PI/e;return function(r,n){if(n)return r;if(r!==void 0)return r=Math.floor(r/t+.5)*t,r}}function Elt(e){var t=e||pT(5);return function(r,n){if(n)return r;if(r!==void 0)return Math.abs(r)<=t?0:r}}var c6r=function(){var e=function(t,r){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,o){n.__proto__=o}||function(n,o){for(var i in o)Object.prototype.hasOwnProperty.call(o,i)&&(n[i]=o[i])},e(t,r)};return function(t,r){if(typeof r!="function"&&r!==null)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");e(t,r);function n(){this.constructor=t}t.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),p6r=function(e){c6r(t,e);function t(r){var n=this,o=r||{};return n=e.call(this,{stopDown:fv})||this,n.condition_=o.condition?o.condition:tlt,n.lastAngle_=void 0,n.duration_=o.duration!==void 0?o.duration:250,n}return t.prototype.handleDragEvent=function(r){if(N9(r)){var n=r.map,o=n.getView();if(o.getConstraints().rotation!==QT){var i=n.getSize(),a=r.pixel,c=Math.atan2(i[1]/2-a[1],a[0]-i[0]/2);if(this.lastAngle_!==void 0){var h=c-this.lastAngle_;o.adjustRotationInternal(-h)}this.lastAngle_=c}}},t.prototype.handleUpEvent=function(r){if(!N9(r))return!0;var n=r.map,o=n.getView();return o.endInteraction(this.duration_),!1},t.prototype.handleDownEvent=function(r){if(!N9(r))return!1;if(O9(r)&&this.condition_(r)){var n=r.map;return n.getView().beginInteraction(),this.lastAngle_=void 0,!0}else return!1},t}(_m),Slt=p6r;u();u();var Y0={LEFT:37,UP:38,RIGHT:39,DOWN:40};var f6r=function(){var e=function(t,r){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,o){n.__proto__=o}||function(n,o){for(var i in o)Object.prototype.hasOwnProperty.call(o,i)&&(n[i]=o[i])},e(t,r)};return function(t,r){if(typeof r!="function"&&r!==null)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");e(t,r);function n(){this.constructor=t}t.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),d6r=function(e){f6r(t,e);function t(r){var n=e.call(this)||this,o=r||{};return n.defaultCondition_=function(i){return P9(i)&&D9(i)},n.condition_=o.condition!==void 0?o.condition:n.defaultCondition_,n.duration_=o.duration!==void 0?o.duration:100,n.pixelDelta_=o.pixelDelta!==void 0?o.pixelDelta:128,n}return t.prototype.handleEvent=function(r){var n=!1;if(r.type==kr.KEYDOWN){var o=r.originalEvent,i=o.keyCode;if(this.condition_(r)&&(i==Y0.DOWN||i==Y0.LEFT||i==Y0.RIGHT||i==Y0.UP)){var a=r.map,c=a.getView(),h=c.getResolution()*this.pixelDelta_,m=0,y=0;i==Y0.DOWN?y=-h:i==Y0.LEFT?m=-h:i==Y0.RIGHT?m=h:y=h;var w=[m,y];gT(w,c.getRotation()),_st(c,w,this.duration_),o.preventDefault(),n=!0}}return!n},t}(ym),Tlt=d6r;u();var h6r=function(){var e=function(t,r){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,o){n.__proto__=o}||function(n,o){for(var i in o)Object.prototype.hasOwnProperty.call(o,i)&&(n[i]=o[i])},e(t,r)};return function(t,r){if(typeof r!="function"&&r!==null)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");e(t,r);function n(){this.constructor=t}t.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),m6r=function(e){h6r(t,e);function t(r){var n=e.call(this)||this,o=r||{};return n.condition_=o.condition?o.condition:D9,n.delta_=o.delta?o.delta:1,n.duration_=o.duration!==void 0?o.duration:100,n}return t.prototype.handleEvent=function(r){var n=!1;if(r.type==kr.KEYDOWN||r.type==kr.KEYPRESS){var o=r.originalEvent,i=o.charCode;if(this.condition_(r)&&(i==43||i==45)){var a=r.map,c=i==43?this.delta_:-this.delta_,h=a.getView();WT(h,c,void 0,this.duration_),o.preventDefault(),n=!0}}return!n},t}(ym),Ilt=m6r;u();var g6r=function(){function e(t,r,n){this.decay_=t,this.minVelocity_=r,this.delay_=n,this.points_=[],this.angle_=0,this.initialVelocity_=0}return e.prototype.begin=function(){this.points_.length=0,this.angle_=0,this.initialVelocity_=0},e.prototype.update=function(t,r){this.points_.push(t,r,Date.now())},e.prototype.end=function(){if(this.points_.length<6)return!1;var t=Date.now()-this.delay_,r=this.points_.length-3;if(this.points_[r+2]<t)return!1;for(var n=r-3;n>0&&this.points_[n+2]>t;)n-=3;var o=this.points_[r+2]-this.points_[n+2];if(o<16.666666666666668)return!1;var i=this.points_[r]-this.points_[n],a=this.points_[r+1]-this.points_[n+1];return this.angle_=Math.atan2(a,i),this.initialVelocity_=Math.sqrt(i*i+a*a)/o,this.initialVelocity_>this.minVelocity_},e.prototype.getDistance=function(){return(this.minVelocity_-this.initialVelocity_)/this.decay_},e.prototype.getAngle=function(){return this.angle_},e}(),Mlt=g6r;u();var v6r=function(){var e=function(t,r){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,o){n.__proto__=o}||function(n,o){for(var i in o)Object.prototype.hasOwnProperty.call(o,i)&&(n[i]=o[i])},e(t,r)};return function(t,r){if(typeof r!="function"&&r!==null)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");e(t,r);function n(){this.constructor=t}t.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),_ce={TRACKPAD:"trackpad",WHEEL:"wheel"},y6r=function(e){v6r(t,e);function t(r){var n=this,o=r||{};n=e.call(this,o)||this,n.totalDelta_=0,n.lastDelta_=0,n.maxDelta_=o.maxDelta!==void 0?o.maxDelta:1,n.duration_=o.duration!==void 0?o.duration:250,n.timeout_=o.timeout!==void 0?o.timeout:80,n.useAnchor_=o.useAnchor!==void 0?o.useAnchor:!0,n.constrainResolution_=o.constrainResolution!==void 0?o.constrainResolution:!1;var i=o.condition?o.condition:rlt;return n.condition_=o.onFocusOnly?tN(A9,i):i,n.lastAnchor_=null,n.startTime_=void 0,n.timeoutId_,n.mode_=void 0,n.trackpadEventGap_=400,n.trackpadTimeoutId_,n.deltaPerZoom_=300,n}return t.prototype.endInteraction_=function(){this.trackpadTimeoutId_=void 0;var r=this.getMap();if(r){var n=r.getView();n.endInteraction(void 0,this.lastDelta_?this.lastDelta_>0?1:-1:0,this.lastAnchor_)}},t.prototype.handleEvent=function(r){if(!this.condition_(r))return!0;var n=r.type;if(n!==kr.WHEEL)return!0;var o=r.map,i=r.originalEvent;i.preventDefault(),this.useAnchor_&&(this.lastAnchor_=r.coordinate);var a;if(r.type==kr.WHEEL&&(a=i.deltaY,bst&&i.deltaMode===WheelEvent.DOM_DELTA_PIXEL&&(a/=S9),i.deltaMode===WheelEvent.DOM_DELTA_LINE&&(a*=40)),a===0)return!1;this.lastDelta_=a;var c=Date.now();this.startTime_===void 0&&(this.startTime_=c),(!this.mode_||c-this.startTime_>this.trackpadEventGap_)&&(this.mode_=Math.abs(a)<4?_ce.TRACKPAD:_ce.WHEEL);var h=o.getView();if(this.mode_===_ce.TRACKPAD&&!(h.getConstrainResolution()||this.constrainResolution_))return this.trackpadTimeoutId_?clearTimeout(this.trackpadTimeoutId_):(h.getAnimating()&&h.cancelAnimations(),h.beginInteraction()),this.trackpadTimeoutId_=setTimeout(this.endInteraction_.bind(this),this.timeout_),h.adjustZoom(-a/this.deltaPerZoom_,this.lastAnchor_),this.startTime_=c,!1;this.totalDelta_+=a;var m=Math.max(this.timeout_-(c-this.startTime_),0);return clearTimeout(this.timeoutId_),this.timeoutId_=setTimeout(this.handleWheelZoom_.bind(this,o),m),!1},t.prototype.handleWheelZoom_=function(r){var n=r.getView();n.getAnimating()&&n.cancelAnimations();var o=-Li(this.totalDelta_,-this.maxDelta_*this.deltaPerZoom_,this.maxDelta_*this.deltaPerZoom_)/this.deltaPerZoom_;(n.getConstrainResolution()||this.constrainResolution_)&&(o=o?o>0?1:-1:0),WT(n,o,this.lastAnchor_,this.duration_),this.mode_=void 0,this.totalDelta_=0,this.lastAnchor_=null,this.startTime_=void 0,this.timeoutId_=void 0},t.prototype.setMouseAnchor=function(r){this.useAnchor_=r,r||(this.lastAnchor_=null)},t}(ym),Clt=y6r;u();var _6r=function(){var e=function(t,r){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,o){n.__proto__=o}||function(n,o){for(var i in o)Object.prototype.hasOwnProperty.call(o,i)&&(n[i]=o[i])},e(t,r)};return function(t,r){if(typeof r!="function"&&r!==null)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");e(t,r);function n(){this.constructor=t}t.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),b6r=function(e){_6r(t,e);function t(r){var n=this,o=r||{},i=o;return i.stopDown||(i.stopDown=fv),n=e.call(this,i)||this,n.anchor_=null,n.lastAngle_=void 0,n.rotating_=!1,n.rotationDelta_=0,n.threshold_=o.threshold!==void 0?o.threshold:.3,n.duration_=o.duration!==void 0?o.duration:250,n}return t.prototype.handleDragEvent=function(r){var n=0,o=this.targetPointers[0],i=this.targetPointers[1],a=Math.atan2(i.clientY-o.clientY,i.clientX-o.clientX);if(this.lastAngle_!==void 0){var c=a-this.lastAngle_;this.rotationDelta_+=c,!this.rotating_&&Math.abs(this.rotationDelta_)>this.threshold_&&(this.rotating_=!0),n=c}this.lastAngle_=a;var h=r.map,m=h.getView();if(m.getConstraints().rotation!==QT){var y=h.getViewport().getBoundingClientRect(),w=YT(this.targetPointers);w[0]-=y.left,w[1]-=y.top,this.anchor_=h.getCoordinateFromPixelInternal(w),this.rotating_&&(h.render(),m.adjustRotationInternal(n,this.anchor_))}},t.prototype.handleUpEvent=function(r){if(this.targetPointers.length<2){var n=r.map,o=n.getView();return o.endInteraction(this.duration_),!1}else return!0},t.prototype.handleDownEvent=function(r){if(this.targetPointers.length>=2){var n=r.map;return this.anchor_=null,this.lastAngle_=void 0,this.rotating_=!1,this.rotationDelta_=0,this.handlingDownUpSequence||n.getView().beginInteraction(),!0}else return!1},t}(_m),Alt=b6r;u();var x6r=function(){var e=function(t,r){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,o){n.__proto__=o}||function(n,o){for(var i in o)Object.prototype.hasOwnProperty.call(o,i)&&(n[i]=o[i])},e(t,r)};return function(t,r){if(typeof r!="function"&&r!==null)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");e(t,r);function n(){this.constructor=t}t.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),w6r=function(e){x6r(t,e);function t(r){var n=this,o=r||{},i=o;return i.stopDown||(i.stopDown=fv),n=e.call(this,i)||this,n.anchor_=null,n.duration_=o.duration!==void 0?o.duration:400,n.lastDistance_=void 0,n.lastScaleDelta_=1,n}return t.prototype.handleDragEvent=function(r){var n=1,o=this.targetPointers[0],i=this.targetPointers[1],a=o.clientX-i.clientX,c=o.clientY-i.clientY,h=Math.sqrt(a*a+c*c);this.lastDistance_!==void 0&&(n=this.lastDistance_/h),this.lastDistance_=h;var m=r.map,y=m.getView();n!=1&&(this.lastScaleDelta_=n);var w=m.getViewport().getBoundingClientRect(),E=YT(this.targetPointers);E[0]-=w.left,E[1]-=w.top,this.anchor_=m.getCoordinateFromPixelInternal(E),m.render(),y.adjustResolutionInternal(n,this.anchor_)},t.prototype.handleUpEvent=function(r){if(this.targetPointers.length<2){var n=r.map,o=n.getView(),i=this.lastScaleDelta_>1?1:-1;return o.endInteraction(this.duration_,i),!1}else return!0},t.prototype.handleDownEvent=function(r){if(this.targetPointers.length>=2){var n=r.map;return this.anchor_=null,this.lastDistance_=void 0,this.lastScaleDelta_=1,this.handlingDownUpSequence||n.getView().beginInteraction(),!0}else return!1},t}(_m),Olt=w6r;u();u();var E6r=function(){var e=function(t,r){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,o){n.__proto__=o}||function(n,o){for(var i in o)Object.prototype.hasOwnProperty.call(o,i)&&(n[i]=o[i])},e(t,r)};return function(t,r){if(typeof r!="function"&&r!==null)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");e(t,r);function n(){this.constructor=t}t.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),S6r=function(e){E6r(t,e);function t(r,n,o){var i=e.call(this,r)||this;return i.map=n,i.frameState=o!==void 0?o:null,i}return t}(_u),Z0=S6r;var T6r=function(){var e=function(t,r){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,o){n.__proto__=o}||function(n,o){for(var i in o)Object.prototype.hasOwnProperty.call(o,i)&&(n[i]=o[i])},e(t,r)};return function(t,r){if(typeof r!="function"&&r!==null)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");e(t,r);function n(){this.constructor=t}t.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),I6r=function(e){T6r(t,e);function t(r,n,o,i,a,c){var h=e.call(this,r,n,a)||this;return h.originalEvent=o,h.pixel_=null,h.coordinate_=null,h.dragging=i!==void 0?i:!1,h.activePointers=c,h}return Object.defineProperty(t.prototype,"pixel",{get:function(){return this.pixel_||(this.pixel_=this.map.getEventPixel(this.originalEvent)),this.pixel_},set:function(r){this.pixel_=r},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"coordinate",{get:function(){return this.coordinate_||(this.coordinate_=this.map.getCoordinateFromPixel(this.pixel)),this.coordinate_},set:function(r){this.coordinate_=r},enumerable:!1,configurable:!0}),t.prototype.preventDefault=function(){e.prototype.preventDefault.call(this),"preventDefault"in this.originalEvent&&this.originalEvent.preventDefault()},t.prototype.stopPropagation=function(){e.prototype.stopPropagation.call(this),"stopPropagation"in this.originalEvent&&this.originalEvent.stopPropagation()},t}(Z0),wm=I6r;u();u();u();var Oo={OPACITY:"opacity",VISIBLE:"visible",EXTENT:"extent",Z_INDEX:"zIndex",MAX_RESOLUTION:"maxResolution",MIN_RESOLUTION:"minResolution",MAX_ZOOM:"maxZoom",MIN_ZOOM:"minZoom",SOURCE:"source",MAP:"map"};var M6r=function(){var e=function(t,r){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,o){n.__proto__=o}||function(n,o){for(var i in o)Object.prototype.hasOwnProperty.call(o,i)&&(n[i]=o[i])},e(t,r)};return function(t,r){if(typeof r!="function"&&r!==null)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");e(t,r);function n(){this.constructor=t}t.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),C6r=function(e){M6r(t,e);function t(r){var n=e.call(this)||this;n.on,n.once,n.un,n.background_=r.background;var o=Mi({},r);return typeof r.properties=="object"&&(delete o.properties,Mi(o,r.properties)),o[Oo.OPACITY]=r.opacity!==void 0?r.opacity:1,zn(typeof o[Oo.OPACITY]=="number",64),o[Oo.VISIBLE]=r.visible!==void 0?r.visible:!0,o[Oo.Z_INDEX]=r.zIndex,o[Oo.MAX_RESOLUTION]=r.maxResolution!==void 0?r.maxResolution:1/0,o[Oo.MIN_RESOLUTION]=r.minResolution!==void 0?r.minResolution:0,o[Oo.MIN_ZOOM]=r.minZoom!==void 0?r.minZoom:-1/0,o[Oo.MAX_ZOOM]=r.maxZoom!==void 0?r.maxZoom:1/0,n.className_=o.className!==void 0?o.className:"ol-layer",delete o.className,n.setProperties(o),n.state_=null,n}return t.prototype.getBackground=function(){return this.background_},t.prototype.getClassName=function(){return this.className_},t.prototype.getLayerState=function(r){var n=this.state_||{layer:this,managed:r===void 0?!0:r},o=this.getZIndex();return n.opacity=Li(Math.round(this.getOpacity()*100)/100,0,1),n.visible=this.getVisible(),n.extent=this.getExtent(),n.zIndex=o===void 0&&!n.managed?1/0:o,n.maxResolution=this.getMaxResolution(),n.minResolution=Math.max(this.getMinResolution(),0),n.minZoom=this.getMinZoom(),n.maxZoom=this.getMaxZoom(),this.state_=n,n},t.prototype.getLayersArray=function(r){return Ao()},t.prototype.getLayerStatesArray=function(r){return Ao()},t.prototype.getExtent=function(){return this.get(Oo.EXTENT)},t.prototype.getMaxResolution=function(){return this.get(Oo.MAX_RESOLUTION)},t.prototype.getMinResolution=function(){return this.get(Oo.MIN_RESOLUTION)},t.prototype.getMinZoom=function(){return this.get(Oo.MIN_ZOOM)},t.prototype.getMaxZoom=function(){return this.get(Oo.MAX_ZOOM)},t.prototype.getOpacity=function(){return this.get(Oo.OPACITY)},t.prototype.getSourceState=function(){return Ao()},t.prototype.getVisible=function(){return this.get(Oo.VISIBLE)},t.prototype.getZIndex=function(){return this.get(Oo.Z_INDEX)},t.prototype.setBackground=function(r){this.background_=r,this.changed()},t.prototype.setExtent=function(r){this.set(Oo.EXTENT,r)},t.prototype.setMaxResolution=function(r){this.set(Oo.MAX_RESOLUTION,r)},t.prototype.setMinResolution=function(r){this.set(Oo.MIN_RESOLUTION,r)},t.prototype.setMaxZoom=function(r){this.set(Oo.MAX_ZOOM,r)},t.prototype.setMinZoom=function(r){this.set(Oo.MIN_ZOOM,r)},t.prototype.setOpacity=function(r){zn(typeof r=="number",64),this.set(Oo.OPACITY,r)},t.prototype.setVisible=function(r){this.set(Oo.VISIBLE,r)},t.prototype.setZIndex=function(r){this.set(Oo.Z_INDEX,r)},t.prototype.disposeInternal=function(){this.state_&&(this.state_.layer=null,this.state_=null),e.prototype.disposeInternal.call(this)},t}(fl),j9=C6r;u();var xu={PRERENDER:"prerender",POSTRENDER:"postrender",PRECOMPOSE:"precompose",POSTCOMPOSE:"postcompose",RENDERCOMPLETE:"rendercomplete"};var A6r=function(){var e=function(t,r){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,o){n.__proto__=o}||function(n,o){for(var i in o)Object.prototype.hasOwnProperty.call(o,i)&&(n[i]=o[i])},e(t,r)};return function(t,r){if(typeof r!="function"&&r!==null)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");e(t,r);function n(){this.constructor=t}t.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),O6r=function(e){A6r(t,e);function t(r){var n=this,o=Mi({},r);delete o.source,n=e.call(this,o)||this,n.on,n.once,n.un,n.mapPrecomposeKey_=null,n.mapRenderKey_=null,n.sourceChangeKey_=null,n.renderer_=null,n.rendered=!1,r.render&&(n.render=r.render),r.map&&n.setMap(r.map),n.addChangeListener(Oo.SOURCE,n.handleSourcePropertyChange_);var i=r.source?r.source:null;return n.setSource(i),n}return t.prototype.getLayersArray=function(r){var n=r||[];return n.push(this),n},t.prototype.getLayerStatesArray=function(r){var n=r||[];return n.push(this.getLayerState()),n},t.prototype.getSource=function(){return this.get(Oo.SOURCE)||null},t.prototype.getRenderSource=function(){return this.getSource()},t.prototype.getSourceState=function(){var r=this.getSource();return r?r.getState():"undefined"},t.prototype.handleSourceChange_=function(){this.changed()},t.prototype.handleSourcePropertyChange_=function(){this.sourceChangeKey_&&(Ko(this.sourceChangeKey_),this.sourceChangeKey_=null);var r=this.getSource();r&&(this.sourceChangeKey_=ao(r,kr.CHANGE,this.handleSourceChange_,this)),this.changed()},t.prototype.getFeatures=function(r){return this.renderer_?this.renderer_.getFeatures(r):new Promise(function(n){return n([])})},t.prototype.getData=function(r){return!this.renderer_||!this.rendered?null:this.renderer_.getData(r)},t.prototype.render=function(r,n){var o=this.getRenderer();if(o.prepareFrame(r))return this.rendered=!0,o.renderFrame(r,n)},t.prototype.unrender=function(){this.rendered=!1},t.prototype.setMapInternal=function(r){r||this.unrender(),this.set(Oo.MAP,r)},t.prototype.getMapInternal=function(){return this.get(Oo.MAP)},t.prototype.setMap=function(r){this.mapPrecomposeKey_&&(Ko(this.mapPrecomposeKey_),this.mapPrecomposeKey_=null),r||this.changed(),this.mapRenderKey_&&(Ko(this.mapRenderKey_),this.mapRenderKey_=null),r&&(this.mapPrecomposeKey_=ao(r,xu.PRECOMPOSE,function(n){var o=n,i=o.frameState.layerStatesArray,a=this.getLayerState(!1);zn(!i.some(function(c){return c.layer===a.layer}),67),i.push(a)},this),this.mapRenderKey_=ao(this,kr.CHANGE,r.render,r),this.changed())},t.prototype.setSource=function(r){this.set(Oo.SOURCE,r)},t.prototype.getRenderer=function(){return this.renderer_||(this.renderer_=this.createRenderer()),this.renderer_},t.prototype.hasRenderer=function(){return!!this.renderer_},t.prototype.createRenderer=function(){return null},t.prototype.disposeInternal=function(){this.renderer_&&(this.renderer_.dispose(),delete this.renderer_),this.setSource(null),e.prototype.disposeInternal.call(this)},t}(j9);function Nb(e,t){if(!e.visible)return!1;var r=t.resolution;if(r<e.minResolution||r>=e.maxResolution)return!1;var n=t.zoom;return n>e.minZoom&&n<=e.maxZoom}var oN=O6r;u();var Vc={IDLE:0,LOADING:1,LOADED:2,ERROR:3,EMPTY:4};u();function bce(e){return e[0]>0&&e[1]>0}function Plt(e,t,r){return r===void 0&&(r=[0,0]),r[0]=e[0]*t+.5|0,r[1]=e[1]*t+.5|0,r}function dl(e,t){return Array.isArray(e)?e:(t===void 0?t=[e,e]:(t[0]=e,t[1]=e),t)}u();var Nlt=/^#([a-f0-9]{3}|[a-f0-9]{4}(?:[a-f0-9]{2}){0,2})$/i,Llt=/^([a-z]*)$|^hsla?\(.*\)$/i;function klt(e){return typeof e=="string"?e:D6r(e)}function Rlt(e){var t=document.createElement("div");if(t.style.color=e,t.style.color!==""){document.body.appendChild(t);var r=getComputedStyle(t).color;return document.body.removeChild(t),r}else return""}var xce=function(){var e=1024,t={},r=0;return function(n){var o;if(t.hasOwnProperty(n))o=t[n];else{if(r>=e){var i=0;for(var a in t)(i++&3)===0&&(delete t[a],--r)}o=P6r(n),t[n]=o,++r}return o}}();function jlt(e){return Array.isArray(e)?e:xce(e)}function P6r(e){var t,r,n,o,i;if(Llt.exec(e)&&(e=Rlt(e)),Nlt.exec(e)){var a=e.length-1,c=void 0;a<=4?c=1:c=2;var h=a===4||a===8;t=parseInt(e.substr(1+0*c,c),16),r=parseInt(e.substr(1+1*c,c),16),n=parseInt(e.substr(1+2*c,c),16),h?o=parseInt(e.substr(1+3*c,c),16):o=255,c==1&&(t=(t<<4)+t,r=(r<<4)+r,n=(n<<4)+n,h&&(o=(o<<4)+o)),i=[t,r,n,o/255]}else e.indexOf("rgba(")==0?(i=e.slice(5,-1).split(",").map(Number),Dlt(i)):e.indexOf("rgb(")==0?(i=e.slice(4,-1).split(",").map(Number),i.push(1),Dlt(i)):zn(!1,14);return i}function Dlt(e){return e[0]=Li(e[0]+.5|0,0,255),e[1]=Li(e[1]+.5|0,0,255),e[2]=Li(e[2]+.5|0,0,255),e[3]=Li(e[3],0,1),e}function D6r(e){var t=e[0];t!=(t|0)&&(t=t+.5|0);var r=e[1];r!=(r|0)&&(r=r+.5|0);var n=e[2];n!=(n|0)&&(n=n+.5|0);var o=e[3]===void 0?1:Math.round(e[3]*100)/100;return"rgba("+t+","+r+","+n+","+o+")"}function qlt(e){return Llt.test(e)&&(e=Rlt(e)),Nlt.test(e)||e.indexOf("rgba(")===0||e.indexOf("rgb(")===0}u();var Em=new fl,N6r=new qf;N6r.setSize=function(){console.warn("labelCache is deprecated.")};var e2=null,wce,L6r={},tMo=function(){var e=100,t="32px ",r=["monospace","serif"],n=r.length,o="wmytzilWMYTZIL@#/&?$%10\uF013",i,a;function c(m,y,w){for(var E=!0,A=0;A<n;++A){var P=r[A];if(a=zlt(m+" "+y+" "+t+P,o),w!=P){var j=zlt(m+" "+y+" "+t+w+","+P,o);E=E&&j!=a}}return!!E}function h(){for(var m=!0,y=Em.getKeys(),w=0,E=y.length;w<E;++w){var A=y[w];Em.get(A)<e&&(c.apply(this,A.split(`
`))?(If(L6r),e2=null,wce=void 0,Em.set(A,e)):(Em.set(A,Em.get(A)+1,!0),m=!1))}m&&(clearInterval(i),i=void 0)}return function(m){var y=plt(m);if(y)for(var w=y.families,E=0,A=w.length;E<A;++E){var P=w[E],j=y.style+`
`+y.weight+`
`+P;Em.get(j)===void 0&&(Em.set(j,e,!0),c(y.style,y.weight,P)||(Em.set(j,0,!0),i===void 0&&(i=setInterval(h,32))))}}}();function k6r(e,t){return e2||(e2=hv(1,1)),e!=wce&&(e2.font=e,wce=e2.font),e2.measureText(t)}function zlt(e,t){return k6r(e,t).width}u();var R6r=function(){var e=function(t,r){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,o){n.__proto__=o}||function(n,o){for(var i in o)Object.prototype.hasOwnProperty.call(o,i)&&(n[i]=o[i])},e(t,r)};return function(t,r){if(typeof r!="function"&&r!==null)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");e(t,r);function n(){this.constructor=t}t.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),j6r=function(e){R6r(t,e);function t(r){var n=e.call(this)||this;return n.ready=!0,n.boundHandleImageChange_=n.handleImageChange_.bind(n),n.layer_=r,n.declutterExecutorGroup=null,n}return t.prototype.getFeatures=function(r){return Ao()},t.prototype.getData=function(r){return null},t.prototype.prepareFrame=function(r){return Ao()},t.prototype.renderFrame=function(r,n){return Ao()},t.prototype.loadedTileCallback=function(r,n,o){r[n]||(r[n]={}),r[n][o.tileCoord.toString()]=o},t.prototype.createLoadedTileFinder=function(r,n,o){return function(i,a){var c=this.loadedTileCallback.bind(this,o,i);return r.forEachLoadedTile(n,i,a,c)}.bind(this)},t.prototype.forEachFeatureAtCoordinate=function(r,n,o,i,a){},t.prototype.getDataAtPixel=function(r,n,o){return null},t.prototype.getLayer=function(){return this.layer_},t.prototype.handleFontsChanged=function(){},t.prototype.handleImageChange_=function(r){var n=r.target;n.getState()===Vc.LOADED&&this.renderIfReadyAndVisible()},t.prototype.loadImage=function(r){var n=r.getState();return n!=Vc.LOADED&&n!=Vc.ERROR&&r.addEventListener(kr.CHANGE,this.boundHandleImageChange_),n==Vc.IDLE&&(r.load(),n=r.getState()),n==Vc.LOADED},t.prototype.renderIfReadyAndVisible=function(){var r=this.getLayer();r&&r.getVisible()&&r.getSourceState()==="ready"&&r.changed()},t.prototype.disposeInternal=function(){delete this.layer_,e.prototype.disposeInternal.call(this)},t}(E9),Flt=j6r;u();var q6r=function(){var e=function(t,r){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,o){n.__proto__=o}||function(n,o){for(var i in o)Object.prototype.hasOwnProperty.call(o,i)&&(n[i]=o[i])},e(t,r)};return function(t,r){if(typeof r!="function"&&r!==null)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");e(t,r);function n(){this.constructor=t}t.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),z6r=function(e){q6r(t,e);function t(r,n,o,i){var a=e.call(this,r)||this;return a.inversePixelTransform=n,a.frameState=o,a.context=i,a}return t}(_u),t2=z6r;u();var Gc={ANIMATING:0,INTERACTING:1};u();var F6r=function(){function e(){this.cache_={},this.cacheSize_=0,this.maxCacheSize_=32}return e.prototype.clear=function(){this.cache_={},this.cacheSize_=0},e.prototype.canExpireCache=function(){return this.cacheSize_>this.maxCacheSize_},e.prototype.expire=function(){if(this.canExpireCache()){var t=0;for(var r in this.cache_){var n=this.cache_[r];(t++&3)===0&&!n.hasListener()&&(delete this.cache_[r],--this.cacheSize_)}}},e.prototype.get=function(t,r,n){var o=Ult(t,r,n);return o in this.cache_?this.cache_[o]:null},e.prototype.set=function(t,r,n,o){var i=Ult(t,r,n);this.cache_[i]=o,++this.cacheSize_},e.prototype.setSize=function(t){this.maxCacheSize_=t,this.expire()},e}();function Ult(e,t,r){var n=r?klt(r):"null";return t+":"+e+":"+n}var Ece=new F6r;u();u();var U6r=function(){var e=function(t,r){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,o){n.__proto__=o}||function(n,o){for(var i in o)Object.prototype.hasOwnProperty.call(o,i)&&(n[i]=o[i])},e(t,r)};return function(t,r){if(typeof r!="function"&&r!==null)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");e(t,r);function n(){this.constructor=t}t.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),B6r=function(e){U6r(t,e);function t(r,n,o,i){var a=e.call(this)||this;return a.extent=r,a.pixelRatio_=o,a.resolution=n,a.state=i,a}return t.prototype.changed=function(){this.dispatchEvent(kr.CHANGE)},t.prototype.getExtent=function(){return this.extent},t.prototype.getImage=function(){return Ao()},t.prototype.getPixelRatio=function(){return this.pixelRatio_},t.prototype.getResolution=function(){return this.resolution},t.prototype.getState=function(){return this.state},t.prototype.load=function(){Ao()},t}(qf),Blt=B6r;var V6r=function(){var e=function(t,r){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,o){n.__proto__=o}||function(n,o){for(var i in o)Object.prototype.hasOwnProperty.call(o,i)&&(n[i]=o[i])},e(t,r)};return function(t,r){if(typeof r!="function"&&r!==null)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");e(t,r);function n(){this.constructor=t}t.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),AMo=function(e){V6r(t,e);function t(r,n,o,i,a,c){var h=e.call(this,r,n,o,Vc.IDLE)||this;return h.src_=i,h.image_=new Image,a!==null&&(h.image_.crossOrigin=a),h.unlisten_=null,h.state=Vc.IDLE,h.imageLoadFunction_=c,h}return t.prototype.getImage=function(){return this.image_},t.prototype.handleImageError_=function(){this.state=Vc.ERROR,this.unlistenImage_(),this.changed()},t.prototype.handleImageLoad_=function(){this.resolution===void 0&&(this.resolution=Bl(this.extent)/this.image_.height),this.state=Vc.LOADED,this.unlistenImage_(),this.changed()},t.prototype.load=function(){(this.state==Vc.IDLE||this.state==Vc.ERROR)&&(this.state=Vc.LOADING,this.changed(),this.imageLoadFunction_(this,this.src_),this.unlisten_=Sce(this.image_,this.handleImageLoad_.bind(this),this.handleImageError_.bind(this)))},t.prototype.setImage=function(r){this.image_=r,this.resolution=Bl(this.extent)/this.image_.height},t.prototype.unlistenImage_=function(){this.unlisten_&&(this.unlisten_(),this.unlisten_=null)},t}(Blt);function Sce(e,t,r){var n=e,o=!0,i=!1,a=!1,c=[$T(n,kr.LOAD,function(){a=!0,i||t()})];return n.src&&Tst?(i=!0,n.decode().then(function(){o&&t()}).catch(function(h){o&&(a?t():r())})):c.push($T(n,kr.ERROR,r)),function(){o=!1,c.forEach(Ko)}}u();var G6r=function(){var e=function(t,r){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,o){n.__proto__=o}||function(n,o){for(var i in o)Object.prototype.hasOwnProperty.call(o,i)&&(n[i]=o[i])},e(t,r)};return function(t,r){if(typeof r!="function"&&r!==null)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");e(t,r);function n(){this.constructor=t}t.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),H6r=function(e){G6r(t,e);function t(r){var n=e.call(this)||this;n.projection=jc(r.projection),n.attributions_=Vlt(r.attributions),n.attributionsCollapsible_=r.attributionsCollapsible!==void 0?r.attributionsCollapsible:!0,n.loading=!1,n.state_=r.state!==void 0?r.state:"ready",n.wrapX_=r.wrapX!==void 0?r.wrapX:!1,n.interpolate_=!!r.interpolate,n.viewResolver=null,n.viewRejector=null;var o=n;return n.viewPromise_=new Promise(function(i,a){o.viewResolver=i,o.viewRejector=a}),n}return t.prototype.getAttributions=function(){return this.attributions_},t.prototype.getAttributionsCollapsible=function(){return this.attributionsCollapsible_},t.prototype.getProjection=function(){return this.projection},t.prototype.getResolutions=function(){return Ao()},t.prototype.getView=function(){return this.viewPromise_},t.prototype.getState=function(){return this.state_},t.prototype.getWrapX=function(){return this.wrapX_},t.prototype.getInterpolate=function(){return this.interpolate_},t.prototype.refresh=function(){this.changed()},t.prototype.setAttributions=function(r){this.attributions_=Vlt(r),this.changed()},t.prototype.setState=function(r){this.state_=r,this.changed()},t}(fl);function Vlt(e){return e?Array.isArray(e)?function(t){return e}:typeof e=="function"?e:function(t){return[e]}:null}var Glt=H6r;function q9(e){var t=e||{},r=new ec,n=new Mlt(-.005,.05,100),o=t.altShiftDragRotate!==void 0?t.altShiftDragRotate:!0;o&&r.push(new Slt);var i=t.doubleClickZoom!==void 0?t.doubleClickZoom:!0;i&&r.push(new blt({delta:t.zoomDelta,duration:t.zoomDuration}));var a=t.dragPan!==void 0?t.dragPan:!0;a&&r.push(new xlt({onFocusOnly:t.onFocusOnly,kinetic:n}));var c=t.pinchRotate!==void 0?t.pinchRotate:!0;c&&r.push(new Alt);var h=t.pinchZoom!==void 0?t.pinchZoom:!0;h&&r.push(new Olt({duration:t.zoomDuration}));var m=t.keyboard!==void 0?t.keyboard:!0;m&&(r.push(new Tlt),r.push(new Ilt({delta:t.zoomDelta,duration:t.zoomDuration})));var y=t.mouseWheelZoom!==void 0?t.mouseWheelZoom:!0;y&&r.push(new Clt({onFocusOnly:t.onFocusOnly,duration:t.zoomDuration}));var w=t.shiftDragZoom!==void 0?t.shiftDragZoom:!0;return w&&r.push(new k9({duration:t.zoomDuration})),r}u();u();u();var $6r=function(){var e=function(t,r){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,o){n.__proto__=o}||function(n,o){for(var i in o)Object.prototype.hasOwnProperty.call(o,i)&&(n[i]=o[i])},e(t,r)};return function(t,r){if(typeof r!="function"&&r!==null)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");e(t,r);function n(){this.constructor=t}t.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),W6r=function(e){$6r(t,e);function t(r){var n=e.call(this)||this;return n.map_=r,n}return t.prototype.dispatchRenderEvent=function(r,n){Ao()},t.prototype.calculateMatrices2D=function(r){var n=r.viewState,o=r.coordinateToPixelTransform,i=r.pixelToCoordinateTransform;$0(o,r.size[0]/2,r.size[1]/2,1/n.resolution,-1/n.resolution,-n.rotation,-n.center[0],-n.center[1]),Mst(i,o)},t.prototype.forEachFeatureAtCoordinate=function(r,n,o,i,a,c,h,m){var y,w=n.viewState;function E(Ze,rt,ct,qe){return a.call(c,rt,Ze?ct:null,qe)}var A=w.projection,P=xet(r.slice(),A),j=[[0,0]];if(A.canWrapX()&&i){var D=A.getExtent(),L=oa(D);j.push([-L,0],[L,0])}for(var z=n.layerStatesArray,B=z.length,G=[],Z=[],K=0;K<j.length;K++)for(var te=B-1;te>=0;--te){var se=z[te],le=se.layer;if(le.hasRenderer()&&Nb(se,w)&&h.call(m,le)){var pe=le.getRenderer(),me=le.getSource();if(pe&&me){var _e=me.getWrapX()?P:r,de=E.bind(null,se.managed);Z[0]=_e[0]+j[K][0],Z[1]=_e[1]+j[K][1],y=pe.forEachFeatureAtCoordinate(Z,n,o,de,G)}if(y)return y}}if(G.length!==0){var Ce=1/G.length;return G.forEach(function(Ze,rt){return Ze.distanceSq+=rt*Ce}),G.sort(function(Ze,rt){return Ze.distanceSq-rt.distanceSq}),G.some(function(Ze){return y=Ze.callback(Ze.feature,Ze.layer,Ze.geometry)}),y}},t.prototype.forEachLayerAtPixel=function(r,n,o,i,a){return Ao()},t.prototype.hasFeatureAtCoordinate=function(r,n,o,i,a,c){var h=this.forEachFeatureAtCoordinate(r,n,o,i,V0,this,a,c);return h!==void 0},t.prototype.getMap=function(){return this.map_},t.prototype.renderFrame=function(r){Ao()},t.prototype.scheduleExpireIconCache=function(r){Ece.canExpireCache()&&r.postRenderFunctions.push(Y6r)},t}(B0);function Y6r(e,t){Ece.expire()}var Hlt=W6r;var Z6r=function(){var e=function(t,r){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,o){n.__proto__=o}||function(n,o){for(var i in o)Object.prototype.hasOwnProperty.call(o,i)&&(n[i]=o[i])},e(t,r)};return function(t,r){if(typeof r!="function"&&r!==null)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");e(t,r);function n(){this.constructor=t}t.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),K6r=function(e){Z6r(t,e);function t(r){var n=e.call(this,r)||this;n.fontChangeListenerKey_=ao(Em,pv.PROPERTYCHANGE,r.redrawText.bind(r)),n.element_=document.createElement("div");var o=n.element_.style;o.position="absolute",o.width="100%",o.height="100%",o.zIndex="0",n.element_.className=Uf+" ol-layers";var i=r.getViewport();return i.insertBefore(n.element_,i.firstChild||null),n.children_=[],n.renderedVisible_=!0,n}return t.prototype.dispatchRenderEvent=function(r,n){var o=this.getMap();if(o.hasListener(r)){var i=new t2(r,void 0,n);o.dispatchEvent(i)}},t.prototype.disposeInternal=function(){Ko(this.fontChangeListenerKey_),this.element_.parentNode.removeChild(this.element_),e.prototype.disposeInternal.call(this)},t.prototype.renderFrame=function(r){if(!r){this.renderedVisible_&&(this.element_.style.display="none",this.renderedVisible_=!1);return}this.calculateMatrices2D(r),this.dispatchRenderEvent(xu.PRECOMPOSE,r);var n=r.layerStatesArray.sort(function(A,P){return A.zIndex-P.zIndex}),o=r.viewState;this.children_.length=0;for(var i=[],a=null,c=0,h=n.length;c<h;++c){var m=n[c];r.layerIndex=c;var y=m.layer,w=y.getSourceState();if(!Nb(m,o)||w!="ready"&&w!="undefined"){y.unrender();continue}var E=y.render(r,a);E&&(E!==a&&(this.children_.push(E),a=E),"getDeclutter"in y&&i.push(y))}for(var c=i.length-1;c>=0;--c)i[c].renderDeclutter(r);ult(this.element_,this.children_),this.dispatchRenderEvent(xu.POSTCOMPOSE,r),this.renderedVisible_||(this.element_.style.display="",this.renderedVisible_=!0),this.scheduleExpireIconCache(r)},t.prototype.forEachLayerAtPixel=function(r,n,o,i,a){for(var c=n.viewState,h=n.layerStatesArray,m=h.length,y=m-1;y>=0;--y){var w=h[y],E=w.layer;if(E.hasRenderer()&&Nb(w,c)&&a(E)){var A=E.getRenderer(),P=A.getDataAtPixel(r,n,o);if(P){var j=i(E,P);if(j)return j}}}},t}(Hlt),$lt=K6r;u();u();var Wlt=function(){var e=function(t,r){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,o){n.__proto__=o}||function(n,o){for(var i in o)Object.prototype.hasOwnProperty.call(o,i)&&(n[i]=o[i])},e(t,r)};return function(t,r){if(typeof r!="function"&&r!==null)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");e(t,r);function n(){this.constructor=t}t.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),mv=function(e){Wlt(t,e);function t(r,n){var o=e.call(this,r)||this;return o.layer=n,o}return t}(_u);var Tce={LAYERS:"layers"},X6r=function(e){Wlt(t,e);function t(r){var n=this,o=r||{},i=Mi({},o);delete i.layers;var a=o.layers;return n=e.call(this,i)||this,n.on,n.once,n.un,n.layersListenerKeys_=[],n.listenerKeys_={},n.addChangeListener(Tce.LAYERS,n.handleLayersChanged_),a?Array.isArray(a)?a=new ec(a.slice(),{unique:!0}):zn(typeof a.getArray=="function",43):a=new ec(void 0,{unique:!0}),n.setLayers(a),n}return t.prototype.handleLayerChange_=function(){this.changed()},t.prototype.handleLayersChanged_=function(){this.layersListenerKeys_.forEach(Ko),this.layersListenerKeys_.length=0;var r=this.getLayers();this.layersListenerKeys_.push(ao(r,Qu.ADD,this.handleLayersAdd_,this),ao(r,Qu.REMOVE,this.handleLayersRemove_,this));for(var n in this.listenerKeys_)this.listenerKeys_[n].forEach(Ko);If(this.listenerKeys_);for(var o=r.getArray(),i=0,a=o.length;i<a;i++){var c=o[i];this.registerLayerListeners_(c),this.dispatchEvent(new mv("addlayer",c))}this.changed()},t.prototype.registerLayerListeners_=function(r){var n=[ao(r,pv.PROPERTYCHANGE,this.handleLayerChange_,this),ao(r,kr.CHANGE,this.handleLayerChange_,this)];r instanceof t&&n.push(ao(r,"addlayer",this.handleLayerGroupAdd_,this),ao(r,"removelayer",this.handleLayerGroupRemove_,this)),this.listenerKeys_[Qa(r)]=n},t.prototype.handleLayerGroupAdd_=function(r){this.dispatchEvent(new mv("addlayer",r.layer))},t.prototype.handleLayerGroupRemove_=function(r){this.dispatchEvent(new mv("removelayer",r.layer))},t.prototype.handleLayersAdd_=function(r){var n=r.element;this.registerLayerListeners_(n),this.dispatchEvent(new mv("addlayer",n)),this.changed()},t.prototype.handleLayersRemove_=function(r){var n=r.element,o=Qa(n);this.listenerKeys_[o].forEach(Ko),delete this.listenerKeys_[o],this.dispatchEvent(new mv("removelayer",n)),this.changed()},t.prototype.getLayers=function(){return this.get(Tce.LAYERS)},t.prototype.setLayers=function(r){var n=this.getLayers();if(n)for(var o=n.getArray(),i=0,a=o.length;i<a;++i)this.dispatchEvent(new mv("removelayer",o[i]));this.set(Tce.LAYERS,r)},t.prototype.getLayersArray=function(r){var n=r!==void 0?r:[];return this.getLayers().forEach(function(o){o.getLayersArray(n)}),n},t.prototype.getLayerStatesArray=function(r){var n=r!==void 0?r:[],o=n.length;this.getLayers().forEach(function(y){y.getLayerStatesArray(n)});var i=this.getLayerState(),a=i.zIndex;!r&&i.zIndex===void 0&&(a=0);for(var c=o,h=n.length;c<h;c++){var m=n[c];m.opacity*=i.opacity,m.visible=m.visible&&i.visible,m.maxResolution=Math.min(m.maxResolution,i.maxResolution),m.minResolution=Math.max(m.minResolution,i.minResolution),m.minZoom=Math.max(m.minZoom,i.minZoom),m.maxZoom=Math.min(m.maxZoom,i.maxZoom),i.extent!==void 0&&(m.extent!==void 0?m.extent=nm(m.extent,i.extent):m.extent=i.extent),m.zIndex===void 0&&(m.zIndex=a)}return n},t.prototype.getSourceState=function(){return"ready"},t}(j9),iN=X6r;u();u();var aN={POINTERMOVE:"pointermove",POINTERDOWN:"pointerdown",POINTERUP:"pointerup",POINTEROVER:"pointerover",POINTEROUT:"pointerout",POINTERENTER:"pointerenter",POINTERLEAVE:"pointerleave",POINTERCANCEL:"pointercancel"};var J6r=function(){var e=function(t,r){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,o){n.__proto__=o}||function(n,o){for(var i in o)Object.prototype.hasOwnProperty.call(o,i)&&(n[i]=o[i])},e(t,r)};return function(t,r){if(typeof r!="function"&&r!==null)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");e(t,r);function n(){this.constructor=t}t.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),Q6r=function(e){J6r(t,e);function t(r,n){var o=e.call(this,r)||this;o.map_=r,o.clickTimeoutId_,o.emulateClicks_=!1,o.dragging_=!1,o.dragListenerKeys_=[],o.moveTolerance_=n===void 0?1:n,o.down_=null;var i=o.map_.getViewport();return o.activePointers_=[],o.trackedTouches_={},o.element_=i,o.pointerdownListenerKey_=ao(i,aN.POINTERDOWN,o.handlePointerDown_,o),o.originalPointerMoveEvent_,o.relayedListenerKey_=ao(i,aN.POINTERMOVE,o.relayMoveEvent_,o),o.boundHandleTouchMove_=o.handleTouchMove_.bind(o),o.element_.addEventListener(kr.TOUCHMOVE,o.boundHandleTouchMove_,T9?{passive:!1}:!1),o}return t.prototype.emulateClick_=function(r){var n=new wm($i.CLICK,this.map_,r);this.dispatchEvent(n),this.clickTimeoutId_!==void 0?(clearTimeout(this.clickTimeoutId_),this.clickTimeoutId_=void 0,n=new wm($i.DBLCLICK,this.map_,r),this.dispatchEvent(n)):this.clickTimeoutId_=setTimeout(function(){this.clickTimeoutId_=void 0;var o=new wm($i.SINGLECLICK,this.map_,r);this.dispatchEvent(o)}.bind(this),250)},t.prototype.updateActivePointers_=function(r){var n=r,o=n.pointerId;if(n.type==$i.POINTERUP||n.type==$i.POINTERCANCEL){delete this.trackedTouches_[o];for(var i in this.trackedTouches_)if(this.trackedTouches_[i].target!==n.target){delete this.trackedTouches_[i];break}}else(n.type==$i.POINTERDOWN||n.type==$i.POINTERMOVE)&&(this.trackedTouches_[o]=n);this.activePointers_=iet(this.trackedTouches_)},t.prototype.handlePointerUp_=function(r){this.updateActivePointers_(r);var n=new wm($i.POINTERUP,this.map_,r,void 0,void 0,this.activePointers_);this.dispatchEvent(n),this.emulateClicks_&&!n.defaultPrevented&&!this.dragging_&&this.isMouseActionButton_(r)&&this.emulateClick_(this.down_),this.activePointers_.length===0&&(this.dragListenerKeys_.forEach(Ko),this.dragListenerKeys_.length=0,this.dragging_=!1,this.down_=null)},t.prototype.isMouseActionButton_=function(r){return r.button===0},t.prototype.handlePointerDown_=function(r){this.emulateClicks_=this.activePointers_.length===0,this.updateActivePointers_(r);var n=new wm($i.POINTERDOWN,this.map_,r,void 0,void 0,this.activePointers_);this.dispatchEvent(n),this.down_={};for(var o in r){var i=r[o];this.down_[o]=typeof i=="function"?dv:i}if(this.dragListenerKeys_.length===0){var a=this.map_.getOwnerDocument();this.dragListenerKeys_.push(ao(a,$i.POINTERMOVE,this.handlePointerMove_,this),ao(a,$i.POINTERUP,this.handlePointerUp_,this),ao(this.element_,$i.POINTERCANCEL,this.handlePointerUp_,this)),this.element_.getRootNode&&this.element_.getRootNode()!==a&&this.dragListenerKeys_.push(ao(this.element_.getRootNode(),$i.POINTERUP,this.handlePointerUp_,this))}},t.prototype.handlePointerMove_=function(r){if(this.isMoving_(r)){this.updateActivePointers_(r),this.dragging_=!0;var n=new wm($i.POINTERDRAG,this.map_,r,this.dragging_,void 0,this.activePointers_);this.dispatchEvent(n)}},t.prototype.relayMoveEvent_=function(r){this.originalPointerMoveEvent_=r;var n=!!(this.down_&&this.isMoving_(r));this.dispatchEvent(new wm($i.POINTERMOVE,this.map_,r,n))},t.prototype.handleTouchMove_=function(r){var n=this.originalPointerMoveEvent_;(!n||n.defaultPrevented)&&(typeof r.cancelable!="boolean"||r.cancelable===!0)&&r.preventDefault()},t.prototype.isMoving_=function(r){return this.dragging_||Math.abs(r.clientX-this.down_.clientX)>this.moveTolerance_||Math.abs(r.clientY-this.down_.clientY)>this.moveTolerance_},t.prototype.disposeInternal=function(){this.relayedListenerKey_&&(Ko(this.relayedListenerKey_),this.relayedListenerKey_=null),this.element_.removeEventListener(kr.TOUCHMOVE,this.boundHandleTouchMove_),this.pointerdownListenerKey_&&(Ko(this.pointerdownListenerKey_),this.pointerdownListenerKey_=null),this.dragListenerKeys_.forEach(Ko),this.dragListenerKeys_.length=0,this.element_=null,e.prototype.disposeInternal.call(this)},t}(qf),Ylt=Q6r;u();u();var sN=1/0,ejr=function(){function e(t,r){this.priorityFunction_=t,this.keyFunction_=r,this.elements_=[],this.priorities_=[],this.queuedElements_={}}return e.prototype.clear=function(){this.elements_.length=0,this.priorities_.length=0,If(this.queuedElements_)},e.prototype.dequeue=function(){var t=this.elements_,r=this.priorities_,n=t[0];t.length==1?(t.length=0,r.length=0):(t[0]=t.pop(),r[0]=r.pop(),this.siftUp_(0));var o=this.keyFunction_(n);return delete this.queuedElements_[o],n},e.prototype.enqueue=function(t){zn(!(this.keyFunction_(t)in this.queuedElements_),31);var r=this.priorityFunction_(t);return r!=sN?(this.elements_.push(t),this.priorities_.push(r),this.queuedElements_[this.keyFunction_(t)]=!0,this.siftDown_(0,this.elements_.length-1),!0):!1},e.prototype.getCount=function(){return this.elements_.length},e.prototype.getLeftChildIndex_=function(t){return t*2+1},e.prototype.getRightChildIndex_=function(t){return t*2+2},e.prototype.getParentIndex_=function(t){return t-1>>1},e.prototype.heapify_=function(){var t;for(t=(this.elements_.length>>1)-1;t>=0;t--)this.siftUp_(t)},e.prototype.isEmpty=function(){return this.elements_.length===0},e.prototype.isKeyQueued=function(t){return t in this.queuedElements_},e.prototype.isQueued=function(t){return this.isKeyQueued(this.keyFunction_(t))},e.prototype.siftUp_=function(t){for(var r=this.elements_,n=this.priorities_,o=r.length,i=r[t],a=n[t],c=t;t<o>>1;){var h=this.getLeftChildIndex_(t),m=this.getRightChildIndex_(t),y=m<o&&n[m]<n[h]?m:h;r[t]=r[y],n[t]=n[y],t=y}r[t]=i,n[t]=a,this.siftDown_(c,t)},e.prototype.siftDown_=function(t,r){for(var n=this.elements_,o=this.priorities_,i=n[r],a=o[r];r>t;){var c=this.getParentIndex_(r);if(o[c]>a)n[r]=n[c],o[r]=o[c],r=c;else break}n[r]=i,o[r]=a},e.prototype.reprioritize=function(){var t=this.priorityFunction_,r=this.elements_,n=this.priorities_,o=0,i=r.length,a,c,h;for(c=0;c<i;++c)a=r[c],h=t(a),h==sN?delete this.queuedElements_[this.keyFunction_(a)]:(n[o]=h,r[o++]=a);r.length=o,n.length=o,this.heapify_()},e}(),Zlt=ejr;u();var Rr={IDLE:0,LOADING:1,LOADED:2,ERROR:3,EMPTY:4};var tjr=function(){var e=function(t,r){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,o){n.__proto__=o}||function(n,o){for(var i in o)Object.prototype.hasOwnProperty.call(o,i)&&(n[i]=o[i])},e(t,r)};return function(t,r){if(typeof r!="function"&&r!==null)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");e(t,r);function n(){this.constructor=t}t.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),rjr=function(e){tjr(t,e);function t(r,n){var o=e.call(this,function(i){return r.apply(null,i)},function(i){return i[0].getKey()})||this;return o.boundHandleTileChange_=o.handleTileChange.bind(o),o.tileChangeCallback_=n,o.tilesLoading_=0,o.tilesLoadingKeys_={},o}return t.prototype.enqueue=function(r){var n=e.prototype.enqueue.call(this,r);if(n){var o=r[0];o.addEventListener(kr.CHANGE,this.boundHandleTileChange_)}return n},t.prototype.getTilesLoading=function(){return this.tilesLoading_},t.prototype.handleTileChange=function(r){var n=r.target,o=n.getState();if(o===Rr.LOADED||o===Rr.ERROR||o===Rr.EMPTY){n.removeEventListener(kr.CHANGE,this.boundHandleTileChange_);var i=n.getKey();i in this.tilesLoadingKeys_&&(delete this.tilesLoadingKeys_[i],--this.tilesLoading_),this.tileChangeCallback_()}},t.prototype.loadMoreTiles=function(r,n){for(var o=0,i,a,c;this.tilesLoading_<r&&o<n&&this.getCount()>0;)a=this.dequeue()[0],c=a.getKey(),i=a.getState(),i===Rr.IDLE&&!(c in this.tilesLoadingKeys_)&&(this.tilesLoadingKeys_[c]=!0,++this.tilesLoading_,++o,a.load())},t}(Zlt),Klt=rjr;function Xlt(e,t,r,n,o){if(!e||!(r in e.wantedTiles))return sN;if(!e.wantedTiles[r][t.getKey()])return sN;var i=e.viewState.center,a=n[0]-i[0],c=n[1]-i[1];return 65536*Math.log(o)+Math.sqrt(a*a+c*c)/o}u();u();var Bf={CENTER:"center",RESOLUTION:"resolution",ROTATION:"rotation"};u();var Jlt=42,K0=256;u();function Ice(e,t,r){return function(n,o,i,a,c){if(n){if(!o&&!t)return n;var h=t?0:i[0]*o,m=t?0:i[1]*o,y=c?c[0]:0,w=c?c[1]:0,E=e[0]+h/2+y,A=e[2]-h/2+y,P=e[1]+m/2+w,j=e[3]-m/2+w;E>A&&(E=(A+E)/2,A=E),P>j&&(P=(j+P)/2,j=P);var D=Li(n[0],E,A),L=Li(n[1],P,j);if(a&&r&&o){var z=30*o;D+=-z*Math.log(1+Math.max(0,E-n[0])/z)+z*Math.log(1+Math.max(0,n[0]-A)/z),L+=-z*Math.log(1+Math.max(0,P-n[1])/z)+z*Math.log(1+Math.max(0,n[1]-j)/z)}return[D,L]}}}function Qlt(e){return e}u();function Mce(e,t,r,n){var o=oa(t)/r[0],i=Bl(t)/r[1];return n?Math.min(e,Math.max(o,i)):Math.min(e,Math.min(o,i))}function Cce(e,t,r){var n=Math.min(e,t),o=50;return n*=Math.log(1+o*Math.max(0,e/t-1))/o+1,r&&(n=Math.max(n,r),n/=Math.log(1+o*Math.max(0,r/e-1))/o+1),Li(n,r/2,t*2)}function eut(e,t,r,n){return function(o,i,a,c){if(o!==void 0){var h=e[0],m=e[e.length-1],y=r?Mce(h,r,a,n):h;if(c){var w=t!==void 0?t:!0;return w?Cce(o,y,m):Li(o,m,y)}var E=Math.min(y,o),A=Math.floor(HT(e,E,i));return e[A]>y&&A<e.length-1?e[A+1]:e[A]}else return}}function tut(e,t,r,n,o,i){return function(a,c,h,m){if(a!==void 0){var y=o?Mce(t,o,h,i):t,w=r!==void 0?r:0;if(m){var E=n!==void 0?n:!0;return E?Cce(a,y,w):Li(a,w,y)}var A=1e-9,P=Math.ceil(Math.log(t/y)/Math.log(e)-A),j=-c*(.5-A)+.5,D=Math.min(y,a),L=Math.floor(Math.log(t/D)/Math.log(e)+j),z=Math.max(P,L),B=t/Math.pow(e,z);return Li(B,w,y)}else return}}function Ace(e,t,r,n,o){return function(i,a,c,h){if(i!==void 0){var m=n?Mce(e,n,c,o):e,y=r!==void 0?r:!0;return!y||!h?Li(i,t,m):Cce(i,m,t)}else return}}var njr=function(){var e=function(t,r){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,o){n.__proto__=o}||function(n,o){for(var i in o)Object.prototype.hasOwnProperty.call(o,i)&&(n[i]=o[i])},e(t,r)};return function(t,r){if(typeof r!="function"&&r!==null)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");e(t,r);function n(){this.constructor=t}t.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),Oce=0,ojr=function(e){njr(t,e);function t(r){var n=e.call(this)||this;n.on,n.once,n.un;var o=Mi({},r);return n.hints_=[0,0],n.animations_=[],n.updateAnimationKey_,n.projection_=xF(o.projection,"EPSG:3857"),n.viewportSize_=[100,100],n.targetCenter_=null,n.targetResolution_,n.targetRotation_,n.nextCenter_=null,n.nextResolution_,n.nextRotation_,n.cancelAnchor_=void 0,o.projection&&Tet(),o.center&&(o.center=Vd(o.center,n.projection_)),o.extent&&(o.extent=I0(o.extent,n.projection_)),n.applyOptions_(o),n}return t.prototype.applyOptions_=function(r){var n=Mi({},r);for(var o in Bf)delete n[o];this.setProperties(n,!0);var i=ajr(r);this.maxResolution_=i.maxResolution,this.minResolution_=i.minResolution,this.zoomFactor_=i.zoomFactor,this.resolutions_=r.resolutions,this.padding_=r.padding,this.minZoom_=i.minZoom;var a=ijr(r),c=i.constraint,h=sjr(r);this.constraints_={center:a,resolution:c,rotation:h},this.setRotation(r.rotation!==void 0?r.rotation:0),this.setCenterInternal(r.center!==void 0?r.center:null),r.resolution!==void 0?this.setResolution(r.resolution):r.zoom!==void 0&&this.setZoom(r.zoom)},Object.defineProperty(t.prototype,"padding",{get:function(){return this.padding_},set:function(r){var n=this.padding_;this.padding_=r;var o=this.getCenter();if(o){var i=r||[0,0,0,0];n=n||[0,0,0,0];var a=this.getResolution(),c=a/2*(i[3]-n[3]+n[1]-i[1]),h=a/2*(i[0]-n[0]+n[2]-i[2]);this.setCenterInternal([o[0]+c,o[1]-h])}},enumerable:!1,configurable:!0}),t.prototype.getUpdatedOptions_=function(r){var n=this.getProperties();return n.resolution!==void 0?n.resolution=this.getResolution():n.zoom=this.getZoom(),n.center=this.getCenterInternal(),n.rotation=this.getRotation(),Mi({},n,r)},t.prototype.animate=function(r){this.isDef()&&!this.getAnimating()&&this.resolveConstraints(0);for(var n=new Array(arguments.length),o=0;o<n.length;++o){var i=arguments[o];i.center&&(i=Mi({},i),i.center=Vd(i.center,this.getProjection())),i.anchor&&(i=Mi({},i),i.anchor=Vd(i.anchor,this.getProjection())),n[o]=i}this.animateInternal.apply(this,n)},t.prototype.animateInternal=function(r){var n=arguments.length,o;n>1&&typeof arguments[n-1]=="function"&&(o=arguments[n-1],--n);for(var i=0;i<n&&!this.isDef();++i){var a=arguments[i];a.center&&this.setCenterInternal(a.center),a.zoom!==void 0?this.setZoom(a.zoom):a.resolution&&this.setResolution(a.resolution),a.rotation!==void 0&&this.setRotation(a.rotation)}if(i===n){o&&z9(o,!0);return}for(var c=Date.now(),h=this.targetCenter_.slice(),m=this.targetResolution_,y=this.targetRotation_,w=[];i<n;++i){var E=arguments[i],A={start:c,complete:!1,anchor:E.anchor,duration:E.duration!==void 0?E.duration:1e3,easing:E.easing||vst,callback:o};if(E.center&&(A.sourceCenter=h,A.targetCenter=E.center.slice(),h=A.targetCenter),E.zoom!==void 0?(A.sourceResolution=m,A.targetResolution=this.getResolutionForZoom(E.zoom),m=A.targetResolution):E.resolution&&(A.sourceResolution=m,A.targetResolution=E.resolution,m=A.targetResolution),E.rotation!==void 0){A.sourceRotation=y;var P=Ud(E.rotation-y+Math.PI,2*Math.PI)-Math.PI;A.targetRotation=y+P,y=A.targetRotation}ljr(A)?A.complete=!0:c+=A.duration,w.push(A)}this.animations_.push(w),this.setHint(Gc.ANIMATING,1),this.updateAnimations_()},t.prototype.getAnimating=function(){return this.hints_[Gc.ANIMATING]>0},t.prototype.getInteracting=function(){return this.hints_[Gc.INTERACTING]>0},t.prototype.cancelAnimations=function(){this.setHint(Gc.ANIMATING,-this.hints_[Gc.ANIMATING]);for(var r,n=0,o=this.animations_.length;n<o;++n){var i=this.animations_[n];if(i[0].callback&&z9(i[0].callback,!1),!r)for(var a=0,c=i.length;a<c;++a){var h=i[a];if(!h.complete){r=h.anchor;break}}}this.animations_.length=0,this.cancelAnchor_=r,this.nextCenter_=null,this.nextResolution_=NaN,this.nextRotation_=NaN},t.prototype.updateAnimations_=function(){if(this.updateAnimationKey_!==void 0&&(cancelAnimationFrame(this.updateAnimationKey_),this.updateAnimationKey_=void 0),!!this.getAnimating()){for(var r=Date.now(),n=!1,o=this.animations_.length-1;o>=0;--o){for(var i=this.animations_[o],a=!0,c=0,h=i.length;c<h;++c){var m=i[c];if(!m.complete){var y=r-m.start,w=m.duration>0?y/m.duration:1;w>=1?(m.complete=!0,w=1):a=!1;var E=m.easing(w);if(m.sourceCenter){var A=m.sourceCenter[0],P=m.sourceCenter[1],j=m.targetCenter[0],D=m.targetCenter[1];this.nextCenter_=m.targetCenter;var L=A+E*(j-A),z=P+E*(D-P);this.targetCenter_=[L,z]}if(m.sourceResolution&&m.targetResolution){var B=E===1?m.targetResolution:m.sourceResolution+E*(m.targetResolution-m.sourceResolution);if(m.anchor){var G=this.getViewportSize_(this.getRotation()),Z=this.constraints_.resolution(B,0,G,!0);this.targetCenter_=this.calculateCenterZoom(Z,m.anchor)}this.nextResolution_=m.targetResolution,this.targetResolution_=B,this.applyTargetState_(!0)}if(m.sourceRotation!==void 0&&m.targetRotation!==void 0){var K=E===1?Ud(m.targetRotation+Math.PI,2*Math.PI)-Math.PI:m.sourceRotation+E*(m.targetRotation-m.sourceRotation);if(m.anchor){var te=this.constraints_.rotation(K,!0);this.targetCenter_=this.calculateCenterRotate(te,m.anchor)}this.nextRotation_=m.targetRotation,this.targetRotation_=K}if(this.applyTargetState_(!0),n=!0,!m.complete)break}}if(a){this.animations_[o]=null,this.setHint(Gc.ANIMATING,-1),this.nextCenter_=null,this.nextResolution_=NaN,this.nextRotation_=NaN;var se=i[0].callback;se&&z9(se,!0)}}this.animations_=this.animations_.filter(Boolean),n&&this.updateAnimationKey_===void 0&&(this.updateAnimationKey_=requestAnimationFrame(this.updateAnimations_.bind(this)))}},t.prototype.calculateCenterRotate=function(r,n){var o,i=this.getCenterInternal();return i!==void 0&&(o=[i[0]-n[0],i[1]-n[1]],gT(o,r-this.getRotation()),_et(o,n)),o},t.prototype.calculateCenterZoom=function(r,n){var o,i=this.getCenterInternal(),a=this.getResolution();if(i!==void 0&&a!==void 0){var c=n[0]-r*(n[0]-i[0])/a,h=n[1]-r*(n[1]-i[1])/a;o=[c,h]}return o},t.prototype.getViewportSize_=function(r){var n=this.viewportSize_;if(r){var o=n[0],i=n[1];return[Math.abs(o*Math.cos(r))+Math.abs(i*Math.sin(r)),Math.abs(o*Math.sin(r))+Math.abs(i*Math.cos(r))]}else return n},t.prototype.setViewportSize=function(r){this.viewportSize_=Array.isArray(r)?r.slice():[100,100],this.getAnimating()||this.resolveConstraints(0)},t.prototype.getCenter=function(){var r=this.getCenterInternal();return r&&rD(r,this.getProjection())},t.prototype.getCenterInternal=function(){return this.get(Bf.CENTER)},t.prototype.getConstraints=function(){return this.constraints_},t.prototype.getConstrainResolution=function(){return this.get("constrainResolution")},t.prototype.getHints=function(r){return r!==void 0?(r[0]=this.hints_[0],r[1]=this.hints_[1],r):this.hints_.slice()},t.prototype.calculateExtent=function(r){var n=this.calculateExtentInternal(r);return Oet(n,this.getProjection())},t.prototype.calculateExtentInternal=function(r){var n=r||this.getViewportSizeMinusPadding_(),o=this.getCenterInternal();zn(o,1);var i=this.getResolution();zn(i!==void 0,2);var a=this.getRotation();return zn(a!==void 0,3),QP(o,i,a,n)},t.prototype.getMaxResolution=function(){return this.maxResolution_},t.prototype.getMinResolution=function(){return this.minResolution_},t.prototype.getMaxZoom=function(){return this.getZoomForResolution(this.minResolution_)},t.prototype.setMaxZoom=function(r){this.applyOptions_(this.getUpdatedOptions_({maxZoom:r}))},t.prototype.getMinZoom=function(){return this.getZoomForResolution(this.maxResolution_)},t.prototype.setMinZoom=function(r){this.applyOptions_(this.getUpdatedOptions_({minZoom:r}))},t.prototype.setConstrainResolution=function(r){this.applyOptions_(this.getUpdatedOptions_({constrainResolution:r}))},t.prototype.getProjection=function(){return this.projection_},t.prototype.getResolution=function(){return this.get(Bf.RESOLUTION)},t.prototype.getResolutions=function(){return this.resolutions_},t.prototype.getResolutionForExtent=function(r,n){return this.getResolutionForExtentInternal(I0(r,this.getProjection()),n)},t.prototype.getResolutionForExtentInternal=function(r,n){var o=n||this.getViewportSizeMinusPadding_(),i=oa(r)/o[0],a=Bl(r)/o[1];return Math.max(i,a)},t.prototype.getResolutionForValueFunction=function(r){var n=r||2,o=this.getConstrainedResolution(this.maxResolution_),i=this.minResolution_,a=Math.log(o/i)/Math.log(n);return function(c){var h=o/Math.pow(n,c*a);return h}},t.prototype.getRotation=function(){return this.get(Bf.ROTATION)},t.prototype.getValueForResolutionFunction=function(r){var n=Math.log(r||2),o=this.getConstrainedResolution(this.maxResolution_),i=this.minResolution_,a=Math.log(o/i)/n;return function(c){var h=Math.log(o/c)/n/a;return h}},t.prototype.getViewportSizeMinusPadding_=function(r){var n=this.getViewportSize_(r),o=this.padding_;return o&&(n=[n[0]-o[1]-o[3],n[1]-o[0]-o[2]]),n},t.prototype.getState=function(){var r=this.getProjection(),n=this.getResolution(),o=this.getRotation(),i=this.getCenterInternal(),a=this.padding_;if(a){var c=this.getViewportSizeMinusPadding_();i=Pce(i,this.getViewportSize_(),[c[0]/2+a[3],c[1]/2+a[0]],n,o)}return{center:i.slice(0),projection:r!==void 0?r:null,resolution:n,nextCenter:this.nextCenter_,nextResolution:this.nextResolution_,nextRotation:this.nextRotation_,rotation:o,zoom:this.getZoom()}},t.prototype.getZoom=function(){var r,n=this.getResolution();return n!==void 0&&(r=this.getZoomForResolution(n)),r},t.prototype.getZoomForResolution=function(r){var n=this.minZoom_||0,o,i;if(this.resolutions_){var a=HT(this.resolutions_,r,1);n=a,o=this.resolutions_[a],a==this.resolutions_.length-1?i=2:i=o/this.resolutions_[a+1]}else o=this.maxResolution_,i=this.zoomFactor_;return n+Math.log(o/r)/Math.log(i)},t.prototype.getResolutionForZoom=function(r){if(this.resolutions_){if(this.resolutions_.length<=1)return 0;var n=Li(Math.floor(r),0,this.resolutions_.length-2),o=this.resolutions_[n]/this.resolutions_[n+1];return this.resolutions_[n]/Math.pow(o,Li(r-n,0,1))}else return this.maxResolution_/Math.pow(this.zoomFactor_,r-this.minZoom_)},t.prototype.fit=function(r,n){var o;if(zn(Array.isArray(r)||typeof r.getSimplifiedGeometry=="function",24),Array.isArray(r)){zn(!vb(r),25);var i=I0(r,this.getProjection());o=eN(i)}else if(r.getType()==="Circle"){var i=I0(r.getExtent(),this.getProjection());o=eN(i),o.rotate(this.getRotation(),Bd(i))}else{var a=Aet();a?o=r.clone().transform(a,this.getProjection()):o=r}this.fitInternal(o,n)},t.prototype.rotatedExtentForGeometry=function(r){for(var n=this.getRotation(),o=Math.cos(n),i=Math.sin(-n),a=r.getFlatCoordinates(),c=r.getStride(),h=1/0,m=1/0,y=-1/0,w=-1/0,E=0,A=a.length;E<A;E+=c){var P=a[E]*o-a[E+1]*i,j=a[E]*i+a[E+1]*o;h=Math.min(h,P),m=Math.min(m,j),y=Math.max(y,P),w=Math.max(w,j)}return[h,m,y,w]},t.prototype.fitInternal=function(r,n){var o=n||{},i=o.size;i||(i=this.getViewportSizeMinusPadding_());var a=o.padding!==void 0?o.padding:[0,0,0,0],c=o.nearest!==void 0?o.nearest:!1,h;o.minResolution!==void 0?h=o.minResolution:o.maxZoom!==void 0?h=this.getResolutionForZoom(o.maxZoom):h=0;var m=this.rotatedExtentForGeometry(r),y=this.getResolutionForExtentInternal(m,[i[0]-a[1]-a[3],i[1]-a[0]-a[2]]);y=isNaN(y)?h:Math.max(y,h),y=this.getConstrainedResolution(y,c?0:1);var w=this.getRotation(),E=Math.sin(w),A=Math.cos(w),P=Bd(m);P[0]+=(a[1]-a[3])/2*y,P[1]+=(a[0]-a[2])/2*y;var j=P[0]*A-P[1]*E,D=P[1]*A+P[0]*E,L=this.getConstrainedCenter([j,D],y),z=o.callback?o.callback:dv;o.duration!==void 0?this.animateInternal({resolution:y,center:L,duration:o.duration,easing:o.easing},z):(this.targetResolution_=y,this.targetCenter_=L,this.applyTargetState_(!1,!0),z9(z,!0))},t.prototype.centerOn=function(r,n,o){this.centerOnInternal(Vd(r,this.getProjection()),n,o)},t.prototype.centerOnInternal=function(r,n,o){this.setCenterInternal(Pce(r,n,o,this.getResolution(),this.getRotation()))},t.prototype.calculateCenterShift=function(r,n,o,i){var a,c=this.padding_;if(c&&r){var h=this.getViewportSizeMinusPadding_(-o),m=Pce(r,i,[h[0]/2+c[3],h[1]/2+c[0]],n,o);a=[r[0]-m[0],r[1]-m[1]]}return a},t.prototype.isDef=function(){return!!this.getCenterInternal()&&this.getResolution()!==void 0},t.prototype.adjustCenter=function(r){var n=rD(this.targetCenter_,this.getProjection());this.setCenter([n[0]+r[0],n[1]+r[1]])},t.prototype.adjustCenterInternal=function(r){var n=this.targetCenter_;this.setCenterInternal([n[0]+r[0],n[1]+r[1]])},t.prototype.adjustResolution=function(r,n){var o=n&&Vd(n,this.getProjection());this.adjustResolutionInternal(r,o)},t.prototype.adjustResolutionInternal=function(r,n){var o=this.getAnimating()||this.getInteracting(),i=this.getViewportSize_(this.getRotation()),a=this.constraints_.resolution(this.targetResolution_*r,0,i,o);n&&(this.targetCenter_=this.calculateCenterZoom(a,n)),this.targetResolution_*=r,this.applyTargetState_()},t.prototype.adjustZoom=function(r,n){this.adjustResolution(Math.pow(this.zoomFactor_,-r),n)},t.prototype.adjustRotation=function(r,n){n&&(n=Vd(n,this.getProjection())),this.adjustRotationInternal(r,n)},t.prototype.adjustRotationInternal=function(r,n){var o=this.getAnimating()||this.getInteracting(),i=this.constraints_.rotation(this.targetRotation_+r,o);n&&(this.targetCenter_=this.calculateCenterRotate(i,n)),this.targetRotation_+=r,this.applyTargetState_()},t.prototype.setCenter=function(r){this.setCenterInternal(r&&Vd(r,this.getProjection()))},t.prototype.setCenterInternal=function(r){this.targetCenter_=r,this.applyTargetState_()},t.prototype.setHint=function(r,n){return this.hints_[r]+=n,this.changed(),this.hints_[r]},t.prototype.setResolution=function(r){this.targetResolution_=r,this.applyTargetState_()},t.prototype.setRotation=function(r){this.targetRotation_=r,this.applyTargetState_()},t.prototype.setZoom=function(r){this.setResolution(this.getResolutionForZoom(r))},t.prototype.applyTargetState_=function(r,n){var o=this.getAnimating()||this.getInteracting()||n,i=this.constraints_.rotation(this.targetRotation_,o),a=this.getViewportSize_(i),c=this.constraints_.resolution(this.targetResolution_,0,a,o),h=this.constraints_.center(this.targetCenter_,c,a,o,this.calculateCenterShift(this.targetCenter_,c,i,a));this.get(Bf.ROTATION)!==i&&this.set(Bf.ROTATION,i),this.get(Bf.RESOLUTION)!==c&&(this.set(Bf.RESOLUTION,c),this.set("zoom",this.getZoom(),!0)),(!h||!this.get(Bf.CENTER)||!yb(this.get(Bf.CENTER),h))&&this.set(Bf.CENTER,h),this.getAnimating()&&!r&&this.cancelAnimations(),this.cancelAnchor_=void 0},t.prototype.resolveConstraints=function(r,n,o){var i=r!==void 0?r:200,a=n||0,c=this.constraints_.rotation(this.targetRotation_),h=this.getViewportSize_(c),m=this.constraints_.resolution(this.targetResolution_,a,h),y=this.constraints_.center(this.targetCenter_,m,h,!1,this.calculateCenterShift(this.targetCenter_,m,c,h));if(i===0&&!this.cancelAnchor_){this.targetResolution_=m,this.targetRotation_=c,this.targetCenter_=y,this.applyTargetState_();return}var w=o||(i===0?this.cancelAnchor_:void 0);this.cancelAnchor_=void 0,(this.getResolution()!==m||this.getRotation()!==c||!this.getCenterInternal()||!yb(this.getCenterInternal(),y))&&(this.getAnimating()&&this.cancelAnimations(),this.animateInternal({rotation:c,center:y,resolution:m,duration:i,easing:zf,anchor:w}))},t.prototype.beginInteraction=function(){this.resolveConstraints(0),this.setHint(Gc.INTERACTING,1)},t.prototype.endInteraction=function(r,n,o){var i=o&&Vd(o,this.getProjection());this.endInteractionInternal(r,n,i)},t.prototype.endInteractionInternal=function(r,n,o){this.setHint(Gc.INTERACTING,-1),this.resolveConstraints(r,n,o)},t.prototype.getConstrainedCenter=function(r,n){var o=this.getViewportSize_(this.getRotation());return this.constraints_.center(r,n||this.getResolution(),o)},t.prototype.getConstrainedZoom=function(r,n){var o=this.getResolutionForZoom(r);return this.getZoomForResolution(this.getConstrainedResolution(o,n))},t.prototype.getConstrainedResolution=function(r,n){var o=n||0,i=this.getViewportSize_(this.getRotation());return this.constraints_.resolution(r,o,i)},t}(fl);function z9(e,t){setTimeout(function(){e(t)},0)}function ijr(e){if(e.extent!==void 0){var t=e.smoothExtentConstraint!==void 0?e.smoothExtentConstraint:!0;return Ice(e.extent,e.constrainOnlyCenter,t)}var r=xF(e.projection,"EPSG:3857");if(e.multiWorld!==!0&&r.isGlobal()){var n=r.getExtent().slice();return n[0]=-1/0,n[2]=1/0,Ice(n,!1,!1)}return Qlt}function ajr(e){var t,r,n,o=28,i=2,a=e.minZoom!==void 0?e.minZoom:Oce,c=e.maxZoom!==void 0?e.maxZoom:o,h=e.zoomFactor!==void 0?e.zoomFactor:i,m=e.multiWorld!==void 0?e.multiWorld:!1,y=e.smoothResolutionConstraint!==void 0?e.smoothResolutionConstraint:!0,w=e.showFullExtent!==void 0?e.showFullExtent:!1,E=xF(e.projection,"EPSG:3857"),A=E.getExtent(),P=e.constrainOnlyCenter,j=e.extent;if(!m&&!j&&E.isGlobal()&&(P=!1,j=A),e.resolutions!==void 0){var D=e.resolutions;r=D[a],n=D[c]!==void 0?D[c]:D[D.length-1],e.constrainResolution?t=eut(D,y,!P&&j,w):t=Ace(r,n,y,!P&&j,w)}else{var L=A?Math.max(oa(A),Bl(A)):360*kc[Rc.DEGREES]/E.getMetersPerUnit(),z=L/K0/Math.pow(i,Oce),B=z/Math.pow(i,o-Oce);r=e.maxResolution,r!==void 0?a=0:r=z/Math.pow(h,a),n=e.minResolution,n===void 0&&(e.maxZoom!==void 0?e.maxResolution!==void 0?n=r/Math.pow(h,c):n=z/Math.pow(h,c):n=B),c=a+Math.floor(Math.log(r/n)/Math.log(h)),n=r/Math.pow(h,c-a),e.constrainResolution?t=tut(h,r,n,y,!P&&j,w):t=Ace(r,n,y,!P&&j,w)}return{constraint:t,maxResolution:r,minResolution:n,minZoom:a,zoomFactor:h}}function sjr(e){var t=e.enableRotation!==void 0?e.enableRotation:!0;if(t){var r=e.constrainRotation;return r===void 0||r===!0?Elt():r===!1?yce:typeof r=="number"?wlt(r):yce}else return QT}function ljr(e){return!(e.sourceCenter&&e.targetCenter&&!yb(e.sourceCenter,e.targetCenter)||e.sourceResolution!==e.targetResolution||e.sourceRotation!==e.targetRotation)}function Pce(e,t,r,n,o){var i=Math.cos(-o),a=Math.sin(-o),c=e[0]*i-e[1]*a,h=e[1]*i+e[0]*a;c+=(t[0]/2-r[0])*n,h+=(r[1]-t[1]/2)*n,a=-a;var m=c*i-h*a,y=h*i+c*a;return[m,y]}var Sm=ojr;var ujr=function(){var e=function(t,r){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,o){n.__proto__=o}||function(n,o){for(var i in o)Object.prototype.hasOwnProperty.call(o,i)&&(n[i]=o[i])},e(t,r)};return function(t,r){if(typeof r!="function"&&r!==null)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");e(t,r);function n(){this.constructor=t}t.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}();function rut(e){if(e instanceof oN){e.setMapInternal(null);return}e instanceof iN&&e.getLayers().forEach(rut)}function nut(e,t){if(e instanceof oN){e.setMapInternal(t);return}if(e instanceof iN)for(var r=e.getLayers().getArray(),n=0,o=r.length;n<o;++n)nut(r[n],t)}var cjr=function(e){ujr(t,e);function t(r){var n=e.call(this)||this;n.on,n.once,n.un;var o=pjr(r);n.renderComplete_,n.loaded_=!0,n.boundHandleBrowserEvent_=n.handleBrowserEvent.bind(n),n.maxTilesLoading_=r.maxTilesLoading!==void 0?r.maxTilesLoading:16,n.pixelRatio_=r.pixelRatio!==void 0?r.pixelRatio:S9,n.postRenderTimeoutHandle_,n.animationDelayKey_,n.animationDelay_=function(){this.animationDelayKey_=void 0,this.renderFrame_(Date.now())}.bind(n),n.coordinateToPixelTransform_=Ff(),n.pixelToCoordinateTransform_=Ff(),n.frameIndex_=0,n.frameState_=null,n.previousExtent_=null,n.viewPropertyListenerKey_=null,n.viewChangeListenerKey_=null,n.layerGroupPropertyListenerKeys_=null,n.viewport_=document.createElement("div"),n.viewport_.className="ol-viewport"+("ontouchstart"in window?" ol-touch":""),n.viewport_.style.position="relative",n.viewport_.style.overflow="hidden",n.viewport_.style.width="100%",n.viewport_.style.height="100%",n.overlayContainer_=document.createElement("div"),n.overlayContainer_.style.position="absolute",n.overlayContainer_.style.zIndex="0",n.overlayContainer_.style.width="100%",n.overlayContainer_.style.height="100%",n.overlayContainer_.style.pointerEvents="none",n.overlayContainer_.className="ol-overlaycontainer",n.viewport_.appendChild(n.overlayContainer_),n.overlayContainerStopEvent_=document.createElement("div"),n.overlayContainerStopEvent_.style.position="absolute",n.overlayContainerStopEvent_.style.zIndex="0",n.overlayContainerStopEvent_.style.width="100%",n.overlayContainerStopEvent_.style.height="100%",n.overlayContainerStopEvent_.style.pointerEvents="none",n.overlayContainerStopEvent_.className="ol-overlaycontainer-stopevent",n.viewport_.appendChild(n.overlayContainerStopEvent_),n.mapBrowserEventHandler_=null,n.moveTolerance_=r.moveTolerance,n.keyboardEventTarget_=o.keyboardEventTarget,n.targetChangeHandlerKeys_=null,n.controls=o.controls||new ec,n.interactions=o.interactions||new ec,n.overlays_=o.overlays,n.overlayIdIndex_={},n.renderer_=null,n.postRenderFunctions_=[],n.tileQueue_=new Klt(n.getTilePriority.bind(n),n.handleTileChange_.bind(n)),n.addChangeListener(Ss.LAYERGROUP,n.handleLayerGroupChanged_),n.addChangeListener(Ss.VIEW,n.handleViewChanged_),n.addChangeListener(Ss.SIZE,n.handleSizeChanged_),n.addChangeListener(Ss.TARGET,n.handleTargetChanged_),n.setProperties(o.values);var i=n;return r.view&&!(r.view instanceof Sm)&&r.view.then(function(a){i.setView(new Sm(a))}),n.controls.addEventListener(Qu.ADD,function(a){a.element.setMap(this)}.bind(n)),n.controls.addEventListener(Qu.REMOVE,function(a){a.element.setMap(null)}.bind(n)),n.interactions.addEventListener(Qu.ADD,function(a){a.element.setMap(this)}.bind(n)),n.interactions.addEventListener(Qu.REMOVE,function(a){a.element.setMap(null)}.bind(n)),n.overlays_.addEventListener(Qu.ADD,function(a){this.addOverlayInternal_(a.element)}.bind(n)),n.overlays_.addEventListener(Qu.REMOVE,function(a){var c=a.element,h=c.getId();h!==void 0&&delete this.overlayIdIndex_[h.toString()],a.element.setMap(null)}.bind(n)),n.controls.forEach(function(a){a.setMap(this)}.bind(n)),n.interactions.forEach(function(a){a.setMap(this)}.bind(n)),n.overlays_.forEach(n.addOverlayInternal_.bind(n)),n}return t.prototype.createRenderer=function(){throw new Error("Use a map type that has a createRenderer method")},t.prototype.addControl=function(r){this.getControls().push(r)},t.prototype.addInteraction=function(r){this.getInteractions().push(r)},t.prototype.addLayer=function(r){var n=this.getLayerGroup().getLayers();n.push(r)},t.prototype.handleLayerAdd_=function(r){nut(r.layer,this)},t.prototype.addOverlay=function(r){this.getOverlays().push(r)},t.prototype.addOverlayInternal_=function(r){var n=r.getId();n!==void 0&&(this.overlayIdIndex_[n.toString()]=r),r.setMap(this)},t.prototype.disposeInternal=function(){this.controls.clear(),this.interactions.clear(),this.overlays_.clear(),this.setTarget(null),e.prototype.disposeInternal.call(this)},t.prototype.forEachFeatureAtPixel=function(r,n,o){if(!(!this.frameState_||!this.renderer_)){var i=this.getCoordinateFromPixelInternal(r);o=o!==void 0?o:{};var a=o.hitTolerance!==void 0?o.hitTolerance:0,c=o.layerFilter!==void 0?o.layerFilter:V0,h=o.checkWrapped!==!1;return this.renderer_.forEachFeatureAtCoordinate(i,this.frameState_,a,h,n,null,c,null)}},t.prototype.getFeaturesAtPixel=function(r,n){var o=[];return this.forEachFeatureAtPixel(r,function(i){o.push(i)},n),o},t.prototype.getAllLayers=function(){var r=[];function n(o){o.forEach(function(i){i instanceof iN?n(i.getLayers()):r.push(i)})}return n(this.getLayers()),r},t.prototype.forEachLayerAtPixel=function(r,n,o){if(!(!this.frameState_||!this.renderer_)){var i=o||{},a=i.hitTolerance!==void 0?i.hitTolerance:0,c=i.layerFilter||V0;return this.renderer_.forEachLayerAtPixel(r,this.frameState_,a,n,c)}},t.prototype.hasFeatureAtPixel=function(r,n){if(!this.frameState_||!this.renderer_)return!1;var o=this.getCoordinateFromPixelInternal(r);n=n!==void 0?n:{};var i=n.layerFilter!==void 0?n.layerFilter:V0,a=n.hitTolerance!==void 0?n.hitTolerance:0,c=n.checkWrapped!==!1;return this.renderer_.hasFeatureAtCoordinate(o,this.frameState_,a,c,i,null)},t.prototype.getEventCoordinate=function(r){return this.getCoordinateFromPixel(this.getEventPixel(r))},t.prototype.getEventCoordinateInternal=function(r){return this.getCoordinateFromPixelInternal(this.getEventPixel(r))},t.prototype.getEventPixel=function(r){var n=this.viewport_.getBoundingClientRect(),o="changedTouches"in r?r.changedTouches[0]:r;return[o.clientX-n.left,o.clientY-n.top]},t.prototype.getTarget=function(){return this.get(Ss.TARGET)},t.prototype.getTargetElement=function(){var r=this.getTarget();return r!==void 0?typeof r=="string"?document.getElementById(r):r:null},t.prototype.getCoordinateFromPixel=function(r){return rD(this.getCoordinateFromPixelInternal(r),this.getView().getProjection())},t.prototype.getCoordinateFromPixelInternal=function(r){var n=this.frameState_;return n?H0(n.pixelToCoordinateTransform,r.slice()):null},t.prototype.getControls=function(){return this.controls},t.prototype.getOverlays=function(){return this.overlays_},t.prototype.getOverlayById=function(r){var n=this.overlayIdIndex_[r.toString()];return n!==void 0?n:null},t.prototype.getInteractions=function(){return this.interactions},t.prototype.getLayerGroup=function(){return this.get(Ss.LAYERGROUP)},t.prototype.setLayers=function(r){var n=this.getLayerGroup();if(r instanceof ec){n.setLayers(r);return}var o=n.getLayers();o.clear(),o.extend(r)},t.prototype.getLayers=function(){var r=this.getLayerGroup().getLayers();return r},t.prototype.getLoadingOrNotReady=function(){for(var r=this.getLayerGroup().getLayerStatesArray(),n=0,o=r.length;n<o;++n){var i=r[n];if(i.visible){var a=i.layer.getRenderer();if(a&&!a.ready)return!0;var c=i.layer.getSource();if(c&&c.loading)return!0}}return!1},t.prototype.getPixelFromCoordinate=function(r){var n=Vd(r,this.getView().getProjection());return this.getPixelFromCoordinateInternal(n)},t.prototype.getPixelFromCoordinateInternal=function(r){var n=this.frameState_;return n?H0(n.coordinateToPixelTransform,r.slice(0,2)):null},t.prototype.getRenderer=function(){return this.renderer_},t.prototype.getSize=function(){return this.get(Ss.SIZE)},t.prototype.getView=function(){return this.get(Ss.VIEW)},t.prototype.getViewport=function(){return this.viewport_},t.prototype.getOverlayContainer=function(){return this.overlayContainer_},t.prototype.getOverlayContainerStopEvent=function(){return this.overlayContainerStopEvent_},t.prototype.getOwnerDocument=function(){var r=this.getTargetElement();return r?r.ownerDocument:document},t.prototype.getTilePriority=function(r,n,o,i){return Xlt(this.frameState_,r,n,o,i)},t.prototype.handleBrowserEvent=function(r,n){var o=n||r.type,i=new wm(o,this,r);this.handleMapBrowserEvent(i)},t.prototype.handleMapBrowserEvent=function(r){if(this.frameState_){var n=r.originalEvent,o=n.type;if(o===aN.POINTERDOWN||o===kr.WHEEL||o===kr.KEYDOWN){var i=this.getOwnerDocument(),a=this.viewport_.getRootNode?this.viewport_.getRootNode():i,c=n.target;if(this.overlayContainerStopEvent_.contains(c)||!(a===i?i.documentElement:a).contains(c))return}if(r.frameState=this.frameState_,this.dispatchEvent(r)!==!1)for(var h=this.getInteractions().getArray().slice(),m=h.length-1;m>=0;m--){var y=h[m];if(!(y.getMap()!==this||!y.getActive()||!this.getTargetElement())){var w=y.handleEvent(r);if(!w||r.propagationStopped)break}}}},t.prototype.handlePostRender=function(){var r=this.frameState_,n=this.tileQueue_;if(!n.isEmpty()){var o=this.maxTilesLoading_,i=o;if(r){var a=r.viewHints;if(a[Gc.ANIMATING]||a[Gc.INTERACTING]){var c=Date.now()-r.time>8;o=c?0:8,i=c?0:2}}n.getTilesLoading()<o&&(n.reprioritize(),n.loadMoreTiles(o,i))}r&&this.renderer_&&!r.animate&&(this.renderComplete_===!0?(this.hasListener(xu.RENDERCOMPLETE)&&this.renderer_.dispatchRenderEvent(xu.RENDERCOMPLETE,r),this.loaded_===!1&&(this.loaded_=!0,this.dispatchEvent(new Z0(bm.LOADEND,this,r)))):this.loaded_===!0&&(this.loaded_=!1,this.dispatchEvent(new Z0(bm.LOADSTART,this,r))));for(var h=this.postRenderFunctions_,m=0,y=h.length;m<y;++m)h[m](this,r);h.length=0},t.prototype.handleSizeChanged_=function(){this.getView()&&!this.getView().getAnimating()&&this.getView().resolveConstraints(0),this.render()},t.prototype.handleTargetChanged_=function(){if(this.mapBrowserEventHandler_){for(var r=0,n=this.targetChangeHandlerKeys_.length;r<n;++r)Ko(this.targetChangeHandlerKeys_[r]);this.targetChangeHandlerKeys_=null,this.viewport_.removeEventListener(kr.CONTEXTMENU,this.boundHandleBrowserEvent_),this.viewport_.removeEventListener(kr.WHEEL,this.boundHandleBrowserEvent_),this.mapBrowserEventHandler_.dispose(),this.mapBrowserEventHandler_=null,rN(this.viewport_)}var o=this.getTargetElement();if(!o)this.renderer_&&(clearTimeout(this.postRenderTimeoutHandle_),this.postRenderTimeoutHandle_=void 0,this.postRenderFunctions_.length=0,this.renderer_.dispose(),this.renderer_=null),this.animationDelayKey_&&(cancelAnimationFrame(this.animationDelayKey_),this.animationDelayKey_=void 0);else{o.appendChild(this.viewport_),this.renderer_||(this.renderer_=this.createRenderer()),this.mapBrowserEventHandler_=new Ylt(this,this.moveTolerance_);for(var i in $i)this.mapBrowserEventHandler_.addEventListener($i[i],this.handleMapBrowserEvent.bind(this));this.viewport_.addEventListener(kr.CONTEXTMENU,this.boundHandleBrowserEvent_,!1),this.viewport_.addEventListener(kr.WHEEL,this.boundHandleBrowserEvent_,T9?{passive:!1}:!1);var a=this.getOwnerDocument().defaultView,c=this.keyboardEventTarget_?this.keyboardEventTarget_:o;this.targetChangeHandlerKeys_=[ao(c,kr.KEYDOWN,this.handleBrowserEvent,this),ao(c,kr.KEYPRESS,this.handleBrowserEvent,this),ao(a,kr.RESIZE,this.updateSize,this)]}this.updateSize()},t.prototype.handleTileChange_=function(){this.render()},t.prototype.handleViewPropertyChanged_=function(){this.render()},t.prototype.handleViewChanged_=function(){this.viewPropertyListenerKey_&&(Ko(this.viewPropertyListenerKey_),this.viewPropertyListenerKey_=null),this.viewChangeListenerKey_&&(Ko(this.viewChangeListenerKey_),this.viewChangeListenerKey_=null);var r=this.getView();r&&(this.updateViewportSize_(),this.viewPropertyListenerKey_=ao(r,pv.PROPERTYCHANGE,this.handleViewPropertyChanged_,this),this.viewChangeListenerKey_=ao(r,kr.CHANGE,this.handleViewPropertyChanged_,this),r.resolveConstraints(0)),this.render()},t.prototype.handleLayerGroupChanged_=function(){this.layerGroupPropertyListenerKeys_&&(this.layerGroupPropertyListenerKeys_.forEach(Ko),this.layerGroupPropertyListenerKeys_=null);var r=this.getLayerGroup();r&&(this.handleLayerAdd_(new mv("addlayer",r)),this.layerGroupPropertyListenerKeys_=[ao(r,pv.PROPERTYCHANGE,this.render,this),ao(r,kr.CHANGE,this.render,this),ao(r,"addlayer",this.handleLayerAdd_,this),ao(r,"removelayer",this.handleLayerRemove_,this)]),this.render()},t.prototype.isRendered=function(){return!!this.frameState_},t.prototype.renderSync=function(){this.animationDelayKey_&&cancelAnimationFrame(this.animationDelayKey_),this.animationDelay_()},t.prototype.redrawText=function(){for(var r=this.getLayerGroup().getLayerStatesArray(),n=0,o=r.length;n<o;++n){var i=r[n].layer;i.hasRenderer()&&i.getRenderer().handleFontsChanged()}},t.prototype.render=function(){this.renderer_&&this.animationDelayKey_===void 0&&(this.animationDelayKey_=requestAnimationFrame(this.animationDelay_))},t.prototype.removeControl=function(r){return this.getControls().remove(r)},t.prototype.removeInteraction=function(r){return this.getInteractions().remove(r)},t.prototype.removeLayer=function(r){var n=this.getLayerGroup().getLayers();return n.remove(r)},t.prototype.handleLayerRemove_=function(r){rut(r.layer)},t.prototype.removeOverlay=function(r){return this.getOverlays().remove(r)},t.prototype.renderFrame_=function(r){var n=this,o=this.getSize(),i=this.getView(),a=this.frameState_,c=null;if(o!==void 0&&bce(o)&&i&&i.isDef()){var h=i.getHints(this.frameState_?this.frameState_.viewHints:void 0),m=i.getState();if(c={animate:!1,coordinateToPixelTransform:this.coordinateToPixelTransform_,declutterTree:null,extent:QP(m.center,m.resolution,m.rotation,o),index:this.frameIndex_++,layerIndex:0,layerStatesArray:this.getLayerGroup().getLayerStatesArray(),pixelRatio:this.pixelRatio_,pixelToCoordinateTransform:this.pixelToCoordinateTransform_,postRenderFunctions:[],size:o,tileQueue:this.tileQueue_,time:r,usedTiles:{},viewState:m,viewHints:h,wantedTiles:{},mapId:Qa(this),renderTargets:{}},m.nextCenter&&m.nextResolution){var y=isNaN(m.nextRotation)?m.rotation:m.nextRotation;c.nextExtent=QP(m.nextCenter,m.nextResolution,y,o)}}if(this.frameState_=c,this.renderer_.renderFrame(c),c){if(c.animate&&this.render(),Array.prototype.push.apply(this.postRenderFunctions_,c.postRenderFunctions),a){var w=!this.previousExtent_||!vb(this.previousExtent_)&&!Kae(c.extent,this.previousExtent_);w&&(this.dispatchEvent(new Z0(bm.MOVESTART,this,a)),this.previousExtent_=mT(this.previousExtent_))}var E=this.previousExtent_&&!c.viewHints[Gc.ANIMATING]&&!c.viewHints[Gc.INTERACTING]&&!Kae(c.extent,this.previousExtent_);E&&(this.dispatchEvent(new Z0(bm.MOVEEND,this,c)),cet(c.extent,this.previousExtent_))}this.dispatchEvent(new Z0(bm.POSTRENDER,this,c)),this.renderComplete_=this.hasListener(bm.LOADSTART)||this.hasListener(bm.LOADEND)||this.hasListener(xu.RENDERCOMPLETE)?!this.tileQueue_.getTilesLoading()&&!this.tileQueue_.getCount()&&!this.getLoadingOrNotReady():void 0,this.postRenderTimeoutHandle_||(this.postRenderTimeoutHandle_=setTimeout(function(){n.postRenderTimeoutHandle_=void 0,n.handlePostRender()},0))},t.prototype.setLayerGroup=function(r){var n=this.getLayerGroup();n&&this.handleLayerRemove_(new mv("removelayer",n)),this.set(Ss.LAYERGROUP,r)},t.prototype.setSize=function(r){this.set(Ss.SIZE,r)},t.prototype.setTarget=function(r){this.set(Ss.TARGET,r)},t.prototype.setView=function(r){if(!r||r instanceof Sm){this.set(Ss.VIEW,r);return}this.set(Ss.VIEW,new Sm);var n=this;r.then(function(o){n.setView(new Sm(o))})},t.prototype.updateSize=function(){var r=this.getTargetElement(),n=void 0;if(r){var o=getComputedStyle(r),i=r.offsetWidth-parseFloat(o.borderLeftWidth)-parseFloat(o.paddingLeft)-parseFloat(o.paddingRight)-parseFloat(o.borderRightWidth),a=r.offsetHeight-parseFloat(o.borderTopWidth)-parseFloat(o.paddingTop)-parseFloat(o.paddingBottom)-parseFloat(o.borderBottomWidth);!isNaN(i)&&!isNaN(a)&&(n=[i,a],!bce(n)&&(r.offsetWidth||r.offsetHeight||r.getClientRects().length)&&console.warn("No map visible because the map container's width or height are 0."))}this.setSize(n),this.updateViewportSize_()},t.prototype.updateViewportSize_=function(){var r=this.getView();if(r){var n=void 0,o=getComputedStyle(this.viewport_);o.width&&o.height&&(n=[parseInt(o.width,10),parseInt(o.height,10)]),r.setViewportSize(n)}},t}(fl);function pjr(e){var t=null;e.keyboardEventTarget!==void 0&&(t=typeof e.keyboardEventTarget=="string"?document.getElementById(e.keyboardEventTarget):e.keyboardEventTarget);var r={},n=e.layers&&typeof e.layers.getLayers=="function"?e.layers:new iN({layers:e.layers});r[Ss.LAYERGROUP]=n,r[Ss.TARGET]=e.target,r[Ss.VIEW]=e.view instanceof Sm?e.view:new Sm;var o;e.controls!==void 0&&(Array.isArray(e.controls)?o=new ec(e.controls.slice()):(zn(typeof e.controls.getArray=="function",47),o=e.controls));var i;e.interactions!==void 0&&(Array.isArray(e.interactions)?i=new ec(e.interactions.slice()):(zn(typeof e.interactions.getArray=="function",48),i=e.interactions));var a;return e.overlays!==void 0?Array.isArray(e.overlays)?a=new ec(e.overlays.slice()):(zn(typeof e.overlays.getArray=="function",49),a=e.overlays):a=new ec,{controls:o,interactions:i,keyboardEventTarget:t,overlays:a,values:r}}var out=cjr;u();u();var fjr=function(){var e=function(t,r){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,o){n.__proto__=o}||function(n,o){for(var i in o)Object.prototype.hasOwnProperty.call(o,i)&&(n[i]=o[i])},e(t,r)};return function(t,r){if(typeof r!="function"&&r!==null)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");e(t,r);function n(){this.constructor=t}t.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),djr=function(e){fjr(t,e);function t(r){var n=this,o=r||{};n=e.call(this,{element:document.createElement("div"),render:o.render,target:o.target})||this,n.ulElement_=document.createElement("ul"),n.collapsed_=o.collapsed!==void 0?o.collapsed:!0,n.userCollapsed_=n.collapsed_,n.overrideCollapsible_=o.collapsible!==void 0,n.collapsible_=o.collapsible!==void 0?o.collapsible:!0,n.collapsible_||(n.collapsed_=!1);var i=o.className!==void 0?o.className:"ol-attribution",a=o.tipLabel!==void 0?o.tipLabel:"Attributions",c=o.expandClassName!==void 0?o.expandClassName:i+"-expand",h=o.collapseLabel!==void 0?o.collapseLabel:"\u203A",m=o.collapseClassName!==void 0?o.collapseClassName:i+"-collapse";typeof h=="string"?(n.collapseLabel_=document.createElement("span"),n.collapseLabel_.textContent=h,n.collapseLabel_.className=m):n.collapseLabel_=h;var y=o.label!==void 0?o.label:"i";typeof y=="string"?(n.label_=document.createElement("span"),n.label_.textContent=y,n.label_.className=c):n.label_=y;var w=n.collapsible_&&!n.collapsed_?n.collapseLabel_:n.label_;n.toggleButton_=document.createElement("button"),n.toggleButton_.setAttribute("type","button"),n.toggleButton_.setAttribute("aria-expanded",String(!n.collapsed_)),n.toggleButton_.title=a,n.toggleButton_.appendChild(w),n.toggleButton_.addEventListener(kr.CLICK,n.handleClick_.bind(n),!1);var E=i+" "+Uf+" "+xm+(n.collapsed_&&n.collapsible_?" "+vce:"")+(n.collapsible_?"":" ol-uncollapsible"),A=n.element;return A.className=E,A.appendChild(n.toggleButton_),A.appendChild(n.ulElement_),n.renderedAttributions_=[],n.renderedVisible_=!0,n}return t.prototype.collectSourceAttributions_=function(r){for(var n={},o=[],i=!0,a=r.layerStatesArray,c=0,h=a.length;c<h;++c){var m=a[c];if(Nb(m,r.viewState)){var y=m.layer.getSource();if(y){var w=y.getAttributions();if(w){var E=w(r);if(E)if(i=i&&y.getAttributionsCollapsible()!==!1,Array.isArray(E))for(var A=0,P=E.length;A<P;++A)E[A]in n||(o.push(E[A]),n[E[A]]=!0);else E in n||(o.push(E),n[E]=!0)}}}}return this.overrideCollapsible_||this.setCollapsible(i),o},t.prototype.updateElement_=function(r){if(!r){this.renderedVisible_&&(this.element.style.display="none",this.renderedVisible_=!1);return}var n=this.collectSourceAttributions_(r),o=n.length>0;if(this.renderedVisible_!=o&&(this.element.style.display=o?"":"none",this.renderedVisible_=o),!x9(n,this.renderedAttributions_)){llt(this.ulElement_);for(var i=0,a=n.length;i<a;++i){var c=document.createElement("li");c.innerHTML=n[i],this.ulElement_.appendChild(c)}this.renderedAttributions_=n}},t.prototype.handleClick_=function(r){r.preventDefault(),this.handleToggle_(),this.userCollapsed_=this.collapsed_},t.prototype.handleToggle_=function(){this.element.classList.toggle(vce),this.collapsed_?JT(this.collapseLabel_,this.label_):JT(this.label_,this.collapseLabel_),this.collapsed_=!this.collapsed_,this.toggleButton_.setAttribute("aria-expanded",String(!this.collapsed_))},t.prototype.getCollapsible=function(){return this.collapsible_},t.prototype.setCollapsible=function(r){this.collapsible_!==r&&(this.collapsible_=r,this.element.classList.toggle("ol-uncollapsible"),this.userCollapsed_&&this.handleToggle_())},t.prototype.setCollapsed=function(r){this.userCollapsed_=r,!(!this.collapsible_||this.collapsed_===r)&&this.handleToggle_()},t.prototype.getCollapsed=function(){return this.collapsed_},t.prototype.render=function(r){this.updateElement_(r.frameState)},t}(Op),iut=djr;u();var hjr=function(){var e=function(t,r){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,o){n.__proto__=o}||function(n,o){for(var i in o)Object.prototype.hasOwnProperty.call(o,i)&&(n[i]=o[i])},e(t,r)};return function(t,r){if(typeof r!="function"&&r!==null)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");e(t,r);function n(){this.constructor=t}t.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),mjr=function(e){hjr(t,e);function t(r){var n=this,o=r||{};n=e.call(this,{element:document.createElement("div"),render:o.render,target:o.target})||this;var i=o.className!==void 0?o.className:"ol-rotate",a=o.label!==void 0?o.label:"\u21E7",c=o.compassClassName!==void 0?o.compassClassName:"ol-compass";n.label_=null,typeof a=="string"?(n.label_=document.createElement("span"),n.label_.className=c,n.label_.textContent=a):(n.label_=a,n.label_.classList.add(c));var h=o.tipLabel?o.tipLabel:"Reset rotation",m=document.createElement("button");m.className=i+"-reset",m.setAttribute("type","button"),m.title=h,m.appendChild(n.label_),m.addEventListener(kr.CLICK,n.handleClick_.bind(n),!1);var y=i+" "+Uf+" "+xm,w=n.element;return w.className=y,w.appendChild(m),n.callResetNorth_=o.resetNorth?o.resetNorth:void 0,n.duration_=o.duration!==void 0?o.duration:250,n.autoHide_=o.autoHide!==void 0?o.autoHide:!0,n.rotation_=void 0,n.autoHide_&&n.element.classList.add(nN),n}return t.prototype.handleClick_=function(r){r.preventDefault(),this.callResetNorth_!==void 0?this.callResetNorth_():this.resetNorth_()},t.prototype.resetNorth_=function(){var r=this.getMap(),n=r.getView();if(n){var o=n.getRotation();o!==void 0&&(this.duration_>0&&o%(2*Math.PI)!==0?n.animate({rotation:0,duration:this.duration_,easing:zf}):n.setRotation(0))}},t.prototype.render=function(r){var n=r.frameState;if(n){var o=n.viewState.rotation;if(o!=this.rotation_){var i="rotate("+o+"rad)";if(this.autoHide_){var a=this.element.classList.contains(nN);!a&&o===0?this.element.classList.add(nN):a&&o!==0&&this.element.classList.remove(nN)}this.label_.style.transform=i}this.rotation_=o}},t}(Op),aut=mjr;u();var gjr=function(){var e=function(t,r){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,o){n.__proto__=o}||function(n,o){for(var i in o)Object.prototype.hasOwnProperty.call(o,i)&&(n[i]=o[i])},e(t,r)};return function(t,r){if(typeof r!="function"&&r!==null)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");e(t,r);function n(){this.constructor=t}t.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),vjr=function(e){gjr(t,e);function t(r){var n=this,o=r||{};n=e.call(this,{element:document.createElement("div"),target:o.target})||this;var i=o.className!==void 0?o.className:"ol-zoom",a=o.delta!==void 0?o.delta:1,c=o.zoomInClassName!==void 0?o.zoomInClassName:i+"-in",h=o.zoomOutClassName!==void 0?o.zoomOutClassName:i+"-out",m=o.zoomInLabel!==void 0?o.zoomInLabel:"+",y=o.zoomOutLabel!==void 0?o.zoomOutLabel:"\u2013",w=o.zoomInTipLabel!==void 0?o.zoomInTipLabel:"Zoom in",E=o.zoomOutTipLabel!==void 0?o.zoomOutTipLabel:"Zoom out",A=document.createElement("button");A.className=c,A.setAttribute("type","button"),A.title=w,A.appendChild(typeof m=="string"?document.createTextNode(m):m),A.addEventListener(kr.CLICK,n.handleClick_.bind(n,a),!1);var P=document.createElement("button");P.className=h,P.setAttribute("type","button"),P.title=E,P.appendChild(typeof y=="string"?document.createTextNode(y):y),P.addEventListener(kr.CLICK,n.handleClick_.bind(n,-a),!1);var j=i+" "+Uf+" "+xm,D=n.element;return D.className=j,D.appendChild(A),D.appendChild(P),n.duration_=o.duration!==void 0?o.duration:250,n}return t.prototype.handleClick_=function(r,n){n.preventDefault(),this.zoomByDelta_(r)},t.prototype.zoomByDelta_=function(r){var n=this.getMap(),o=n.getView();if(o){var i=o.getZoom();if(i!==void 0){var a=o.getConstrainedZoom(i+r);this.duration_>0?(o.getAnimating()&&o.cancelAnimations(),o.animate({zoom:a,duration:this.duration_,easing:zf})):o.setZoom(a)}}},t}(Op),F9=vjr;u();var yjr=function(){var e=function(t,r){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,o){n.__proto__=o}||function(n,o){for(var i in o)Object.prototype.hasOwnProperty.call(o,i)&&(n[i]=o[i])},e(t,r)};return function(t,r){if(typeof r!="function"&&r!==null)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");e(t,r);function n(){this.constructor=t}t.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),_jr=function(e){yjr(t,e);function t(r){var n=this,o=r||{};n=e.call(this,{element:document.createElement("div"),target:o.target})||this,n.extent=o.extent?o.extent:null;var i=o.className!==void 0?o.className:"ol-zoom-extent",a=o.label!==void 0?o.label:"E",c=o.tipLabel!==void 0?o.tipLabel:"Fit to extent",h=document.createElement("button");h.setAttribute("type","button"),h.title=c,h.appendChild(typeof a=="string"?document.createTextNode(a):a),h.addEventListener(kr.CLICK,n.handleClick_.bind(n),!1);var m=i+" "+Uf+" "+xm,y=n.element;return y.className=m,y.appendChild(h),n}return t.prototype.handleClick_=function(r){r.preventDefault(),this.handleZoomToExtent()},t.prototype.handleZoomToExtent=function(){var r=this.getMap(),n=r.getView(),o=this.extent?this.extent:n.getProjection().getExtent();n.fitInternal(eN(o))},t}(Op),sut=_jr;function lut(e){var t=e||{},r=new ec,n=t.zoom!==void 0?t.zoom:!0;n&&r.push(new F9(t.zoomOptions));var o=t.rotate!==void 0?t.rotate:!0;o&&r.push(new aut(t.rotateOptions));var i=t.attribution!==void 0?t.attribution:!0;return i&&r.push(new iut(t.attributionOptions)),r}var bjr=function(){var e=function(t,r){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,o){n.__proto__=o}||function(n,o){for(var i in o)Object.prototype.hasOwnProperty.call(o,i)&&(n[i]=o[i])},e(t,r)};return function(t,r){if(typeof r!="function"&&r!==null)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");e(t,r);function n(){this.constructor=t}t.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),xjr=function(e){bjr(t,e);function t(r){return r=Mi({},r),r.controls||(r.controls=lut()),r.interactions||(r.interactions=q9({onFocusOnly:!0})),e.call(this,r)||this}return t.prototype.createRenderer=function(){return new $lt(this)},t}(out),uut=xjr;u();u();u();var lN={PRELOAD:"preload",USE_INTERIM_TILES_ON_ERROR:"useInterimTilesOnError"};var wjr=function(){var e=function(t,r){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,o){n.__proto__=o}||function(n,o){for(var i in o)Object.prototype.hasOwnProperty.call(o,i)&&(n[i]=o[i])},e(t,r)};return function(t,r){if(typeof r!="function"&&r!==null)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");e(t,r);function n(){this.constructor=t}t.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),Ejr=function(e){wjr(t,e);function t(r){var n=this,o=r||{},i=Mi({},o);return delete i.preload,delete i.useInterimTilesOnError,n=e.call(this,i)||this,n.on,n.once,n.un,n.setPreload(o.preload!==void 0?o.preload:0),n.setUseInterimTilesOnError(o.useInterimTilesOnError!==void 0?o.useInterimTilesOnError:!0),n}return t.prototype.getPreload=function(){return this.get(lN.PRELOAD)},t.prototype.setPreload=function(r){this.set(lN.PRELOAD,r)},t.prototype.getUseInterimTilesOnError=function(){return this.get(lN.USE_INTERIM_TILES_ON_ERROR)},t.prototype.setUseInterimTilesOnError=function(r){this.set(lN.USE_INTERIM_TILES_ON_ERROR,r)},t.prototype.getData=function(r){return e.prototype.getData.call(this,r)},t}(oN),cut=Ejr;u();u();var Sjr=function(){function e(t){this.highWaterMark=t!==void 0?t:2048,this.count_=0,this.entries_={},this.oldest_=null,this.newest_=null}return e.prototype.canExpireCache=function(){return this.highWaterMark>0&&this.getCount()>this.highWaterMark},e.prototype.expireCache=function(t){for(;this.canExpireCache();)this.pop()},e.prototype.clear=function(){this.count_=0,this.entries_={},this.oldest_=null,this.newest_=null},e.prototype.containsKey=function(t){return this.entries_.hasOwnProperty(t)},e.prototype.forEach=function(t){for(var r=this.oldest_;r;)t(r.value_,r.key_,this),r=r.newer},e.prototype.get=function(t,r){var n=this.entries_[t];return zn(n!==void 0,15),n===this.newest_||(n===this.oldest_?(this.oldest_=this.oldest_.newer,this.oldest_.older=null):(n.newer.older=n.older,n.older.newer=n.newer),n.newer=null,n.older=this.newest_,this.newest_.newer=n,this.newest_=n),n.value_},e.prototype.remove=function(t){var r=this.entries_[t];return zn(r!==void 0,15),r===this.newest_?(this.newest_=r.older,this.newest_&&(this.newest_.newer=null)):r===this.oldest_?(this.oldest_=r.newer,this.oldest_&&(this.oldest_.older=null)):(r.newer.older=r.older,r.older.newer=r.newer),delete this.entries_[t],--this.count_,r.value_},e.prototype.getCount=function(){return this.count_},e.prototype.getKeys=function(){var t=new Array(this.count_),r=0,n;for(n=this.newest_;n;n=n.older)t[r++]=n.key_;return t},e.prototype.getValues=function(){var t=new Array(this.count_),r=0,n;for(n=this.newest_;n;n=n.older)t[r++]=n.value_;return t},e.prototype.peekLast=function(){return this.oldest_.value_},e.prototype.peekLastKey=function(){return this.oldest_.key_},e.prototype.peekFirstKey=function(){return this.newest_.key_},e.prototype.peek=function(t){if(this.containsKey(t))return this.entries_[t].value_},e.prototype.pop=function(){var t=this.oldest_;return delete this.entries_[t.key_],t.newer&&(t.newer.older=null),this.oldest_=t.newer,this.oldest_||(this.newest_=null),--this.count_,t.value_},e.prototype.replace=function(t,r){this.get(t),this.entries_[t].value_=r},e.prototype.set=function(t,r){zn(!(t in this.entries_),16);var n={key_:t,newer:null,older:this.newest_,value_:r};this.newest_?this.newest_.newer=n:this.oldest_=n,this.newest_=n,this.entries_[t]=n,++this.count_},e.prototype.setSize=function(t){this.highWaterMark=t},e}(),U9=Sjr;u();var put=function(){function e(t,r,n,o){this.minX=t,this.maxX=r,this.minY=n,this.maxY=o}return e.prototype.contains=function(t){return this.containsXY(t[1],t[2])},e.prototype.containsTileRange=function(t){return this.minX<=t.minX&&t.maxX<=this.maxX&&this.minY<=t.minY&&t.maxY<=this.maxY},e.prototype.containsXY=function(t,r){return this.minX<=t&&t<=this.maxX&&this.minY<=r&&r<=this.maxY},e.prototype.equals=function(t){return this.minX==t.minX&&this.minY==t.minY&&this.maxX==t.maxX&&this.maxY==t.maxY},e.prototype.extend=function(t){t.minX<this.minX&&(this.minX=t.minX),t.maxX>this.maxX&&(this.maxX=t.maxX),t.minY<this.minY&&(this.minY=t.minY),t.maxY>this.maxY&&(this.maxY=t.maxY)},e.prototype.getHeight=function(){return this.maxY-this.minY+1},e.prototype.getSize=function(){return[this.getWidth(),this.getHeight()]},e.prototype.getWidth=function(){return this.maxX-this.minX+1},e.prototype.intersects=function(t){return this.minX<=t.maxX&&this.maxX>=t.minX&&this.minY<=t.maxY&&this.maxY>=t.minY},e}();function Lb(e,t,r,n,o){return o!==void 0?(o.minX=e,o.maxX=t,o.minY=r,o.maxY=n,o):new put(e,t,r,n)}var B9=put;u();u();u();var Tjr=function(){var e=function(t,r){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,o){n.__proto__=o}||function(n,o){for(var i in o)Object.prototype.hasOwnProperty.call(o,i)&&(n[i]=o[i])},e(t,r)};return function(t,r){if(typeof r!="function"&&r!==null)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");e(t,r);function n(){this.constructor=t}t.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),Ijr=function(e){Tjr(t,e);function t(r,n,o){var i=e.call(this)||this,a=o||{};return i.tileCoord=r,i.state=n,i.interimTile=null,i.key="",i.transition_=a.transition===void 0?250:a.transition,i.transitionStarts_={},i.interpolate=!!a.interpolate,i}return t.prototype.changed=function(){this.dispatchEvent(kr.CHANGE)},t.prototype.release=function(){},t.prototype.getKey=function(){return this.key+"/"+this.tileCoord},t.prototype.getInterimTile=function(){if(!this.interimTile)return this;var r=this.interimTile;do{if(r.getState()==Rr.LOADED)return this.transition_=0,r;r=r.interimTile}while(r);return this},t.prototype.refreshInterimChain=function(){if(this.interimTile){var r=this.interimTile,n=this;do{if(r.getState()==Rr.LOADED){r.interimTile=null;break}else r.getState()==Rr.LOADING?n=r:r.getState()==Rr.IDLE?n.interimTile=r.interimTile:n=r;r=n.interimTile}while(r)}},t.prototype.getTileCoord=function(){return this.tileCoord},t.prototype.getState=function(){return this.state},t.prototype.setState=function(r){if(this.state!==Rr.ERROR&&this.state>r)throw new Error("Tile load sequence violation");this.state=r,this.changed()},t.prototype.load=function(){Ao()},t.prototype.getAlpha=function(r,n){if(!this.transition_)return 1;var o=this.transitionStarts_[r];if(!o)o=n,this.transitionStarts_[r]=o;else if(o===-1)return 1;var i=n-o+1e3/60;return i>=this.transition_?1:nce(i/this.transition_)},t.prototype.inTransition=function(r){return this.transition_?this.transitionStarts_[r]!==-1:!1},t.prototype.endTransition=function(r){this.transition_&&(this.transitionStarts_[r]=-1)},t}(qf),r2=Ijr;var Mjr=function(){var e=function(t,r){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,o){n.__proto__=o}||function(n,o){for(var i in o)Object.prototype.hasOwnProperty.call(o,i)&&(n[i]=o[i])},e(t,r)};return function(t,r){if(typeof r!="function"&&r!==null)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");e(t,r);function n(){this.constructor=t}t.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),Cjr=function(e){Mjr(t,e);function t(r){var n=this,o=Rr.IDLE;return n=e.call(this,r.tileCoord,o,{transition:r.transition,interpolate:r.interpolate})||this,n.loader_=r.loader,n.data_=null,n.error_=null,n.size_=r.size||[256,256],n}return t.prototype.getSize=function(){return this.size_},t.prototype.getData=function(){return this.data_},t.prototype.getError=function(){return this.error_},t.prototype.load=function(){if(!(this.state!==Rr.IDLE&&this.state!==Rr.ERROR)){this.state=Rr.LOADING,this.changed();var r=this;this.loader_().then(function(n){r.data_=n,r.state=Rr.LOADED,r.changed()}).catch(function(n){r.error_=n,r.state=Rr.ERROR,r.changed()})}},t}(r2),fut=Cjr;u();var Ajr=function(){var e=function(t,r){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,o){n.__proto__=o}||function(n,o){for(var i in o)Object.prototype.hasOwnProperty.call(o,i)&&(n[i]=o[i])},e(t,r)};return function(t,r){if(typeof r!="function"&&r!==null)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");e(t,r);function n(){this.constructor=t}t.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),Ojr=function(e){Ajr(t,e);function t(r,n,o,i,a,c){var h=e.call(this,r,n,c)||this;return h.crossOrigin_=i,h.src_=o,h.key=o,h.image_=new Image,i!==null&&(h.image_.crossOrigin=i),h.unlisten_=null,h.tileLoadFunction_=a,h}return t.prototype.getImage=function(){return this.image_},t.prototype.setImage=function(r){this.image_=r,this.state=Rr.LOADED,this.unlistenImage_(),this.changed()},t.prototype.handleImageError_=function(){this.state=Rr.ERROR,this.unlistenImage_(),this.image_=Pjr(),this.changed()},t.prototype.handleImageLoad_=function(){var r=this.image_;r.naturalWidth&&r.naturalHeight?this.state=Rr.LOADED:this.state=Rr.EMPTY,this.unlistenImage_(),this.changed()},t.prototype.load=function(){this.state==Rr.ERROR&&(this.state=Rr.IDLE,this.image_=new Image,this.crossOrigin_!==null&&(this.image_.crossOrigin=this.crossOrigin_)),this.state==Rr.IDLE&&(this.state=Rr.LOADING,this.changed(),this.tileLoadFunction_(this,this.src_),this.unlisten_=Sce(this.image_,this.handleImageLoad_.bind(this),this.handleImageError_.bind(this)))},t.prototype.unlistenImage_=function(){this.unlisten_&&(this.unlisten_(),this.unlisten_=null)},t}(r2);function Pjr(){var e=hv(1,1);return e.fillStyle="rgba(0,0,0,0)",e.fillRect(0,0,1,1),e.canvas}var kb=Ojr;u();u();var dut=.5,Tm=!0;u();var Djr=10,hut=.25,Njr=function(){function e(t,r,n,o,i,a){this.sourceProj_=t,this.targetProj_=r;var c={},h=_b(this.targetProj_,this.sourceProj_);this.transformInv_=function(B){var G=B[0]+"/"+B[1];return c[G]||(c[G]=h(B)),c[G]},this.maxSourceExtent_=o,this.errorThresholdSquared_=i*i,this.triangles_=[],this.wrapsXInSource_=!1,this.canWrapXInSource_=this.sourceProj_.canWrapX()&&!!o&&!!this.sourceProj_.getExtent()&&oa(o)==oa(this.sourceProj_.getExtent()),this.sourceWorldWidth_=this.sourceProj_.getExtent()?oa(this.sourceProj_.getExtent()):null,this.targetWorldWidth_=this.targetProj_.getExtent()?oa(this.targetProj_.getExtent()):null;var m=S0(n),y=bF(n),w=_F(n),E=yF(n),A=this.transformInv_(m),P=this.transformInv_(y),j=this.transformInv_(w),D=this.transformInv_(E),L=Djr+(a?Math.max(0,Math.ceil(fF(JP(n)/(a*a*256*256)))):0);if(this.addQuad_(m,y,w,E,A,P,j,D,L),this.wrapsXInSource_){var z=1/0;this.triangles_.forEach(function(B,G,Z){z=Math.min(z,B.source[0][0],B.source[1][0],B.source[2][0])}),this.triangles_.forEach(function(B){if(Math.max(B.source[0][0],B.source[1][0],B.source[2][0])-z>this.sourceWorldWidth_/2){var G=[[B.source[0][0],B.source[0][1]],[B.source[1][0],B.source[1][1]],[B.source[2][0],B.source[2][1]]];G[0][0]-z>this.sourceWorldWidth_/2&&(G[0][0]-=this.sourceWorldWidth_),G[1][0]-z>this.sourceWorldWidth_/2&&(G[1][0]-=this.sourceWorldWidth_),G[2][0]-z>this.sourceWorldWidth_/2&&(G[2][0]-=this.sourceWorldWidth_);var Z=Math.min(G[0][0],G[1][0],G[2][0]),K=Math.max(G[0][0],G[1][0],G[2][0]);K-Z<this.sourceWorldWidth_/2&&(B.source=G)}}.bind(this))}c={}}return e.prototype.addTriangle_=function(t,r,n,o,i,a){this.triangles_.push({source:[o,i,a],target:[t,r,n]})},e.prototype.addQuad_=function(t,r,n,o,i,a,c,h,m){var y=KP([i,a,c,h]),w=this.sourceWorldWidth_?oa(y)/this.sourceWorldWidth_:null,E=this.sourceWorldWidth_,A=this.sourceProj_.canWrapX()&&w>.5&&w<1,P=!1;if(m>0){if(this.targetProj_.isGlobal()&&this.targetWorldWidth_){var j=KP([t,r,n,o]),D=oa(j)/this.targetWorldWidth_;P=D>hut||P}!A&&this.sourceProj_.isGlobal()&&w&&(P=w>hut||P)}if(!(!P&&this.maxSourceExtent_&&isFinite(y[0])&&isFinite(y[1])&&isFinite(y[2])&&isFinite(y[3])&&!eD(y,this.maxSourceExtent_))){var L=0;if(!P&&(!isFinite(i[0])||!isFinite(i[1])||!isFinite(a[0])||!isFinite(a[1])||!isFinite(c[0])||!isFinite(c[1])||!isFinite(h[0])||!isFinite(h[1]))){if(m>0)P=!0;else if(L=(!isFinite(i[0])||!isFinite(i[1])?8:0)+(!isFinite(a[0])||!isFinite(a[1])?4:0)+(!isFinite(c[0])||!isFinite(c[1])?2:0)+(!isFinite(h[0])||!isFinite(h[1])?1:0),L!=1&&L!=2&&L!=4&&L!=8)return}if(m>0){if(!P){var z=[(t[0]+n[0])/2,(t[1]+n[1])/2],B=this.transformInv_(z),G=void 0;if(A){var Z=(Ud(i[0],E)+Ud(c[0],E))/2;G=Z-Ud(B[0],E)}else G=(i[0]+c[0])/2-B[0];var K=(i[1]+c[1])/2-B[1],te=G*G+K*K;P=te>this.errorThresholdSquared_}if(P){if(Math.abs(t[0]-n[0])<=Math.abs(t[1]-n[1])){var se=[(r[0]+n[0])/2,(r[1]+n[1])/2],le=this.transformInv_(se),pe=[(o[0]+t[0])/2,(o[1]+t[1])/2],me=this.transformInv_(pe);this.addQuad_(t,r,se,pe,i,a,le,me,m-1),this.addQuad_(pe,se,n,o,me,le,c,h,m-1)}else{var _e=[(t[0]+r[0])/2,(t[1]+r[1])/2],de=this.transformInv_(_e),Ce=[(n[0]+o[0])/2,(n[1]+o[1])/2],Ze=this.transformInv_(Ce);this.addQuad_(t,_e,Ce,o,i,de,Ze,h,m-1),this.addQuad_(_e,r,n,Ce,de,a,c,Ze,m-1)}return}}if(A){if(!this.canWrapXInSource_)return;this.wrapsXInSource_=!0}(L&11)==0&&this.addTriangle_(t,n,o,i,c,h),(L&14)==0&&this.addTriangle_(t,n,r,i,c,a),L&&((L&13)==0&&this.addTriangle_(r,o,t,a,h,i),(L&7)==0&&this.addTriangle_(r,o,n,a,h,c))}},e.prototype.calculateSourceExtent=function(){var t=rm();return this.triangles_.forEach(function(r,n,o){var i=r.source;XP(t,i[0]),XP(t,i[1]),XP(t,i[2])}),t},e.prototype.getTriangles=function(){return this.triangles_},e}(),mut=Njr;u();u();var Dce={imageSmoothingEnabled:!1,msImageSmoothingEnabled:!1};var Nce,kce=[];function gut(e,t,r,n,o){e.beginPath(),e.moveTo(0,0),e.lineTo(t,r),e.lineTo(n,o),e.closePath(),e.save(),e.clip(),e.fillRect(0,0,Math.max(t,n)+1,Math.max(r,o)),e.restore()}function Lce(e,t){return Math.abs(e[t*4]-210)>2||Math.abs(e[t*4+3]-.75*255)>2}function Ljr(){if(Nce===void 0){var e=document.createElement("canvas").getContext("2d");e.globalCompositeOperation="lighter",e.fillStyle="rgba(210, 0, 0, 0.75)",gut(e,4,5,4,0),gut(e,4,5,0,5);var t=e.getImageData(0,0,3,3).data;Nce=Lce(t,0)||Lce(t,4)||Lce(t,8)}return Nce}function vut(e,t,r,n){var o=tD(r,t,e),i=tse(t,n,r),a=t.getMetersPerUnit();a!==void 0&&(i*=a);var c=e.getMetersPerUnit();c!==void 0&&(i/=c);var h=e.getExtent();if(!h||Kg(h,o)){var m=tse(e,i,o)/i;isFinite(m)&&m>0&&(i/=m)}return i}function yut(e,t,r,n){var o=Bd(r),i=vut(e,t,o,n);return(!isFinite(i)||i<=0)&&vF(r,function(a){return i=vut(e,t,a,n),isFinite(i)&&i>0}),i}function _ut(e,t,r,n,o,i,a,c,h,m,y,w){var E=hv(Math.round(r*e),Math.round(r*t),kce);if(w||Mi(E,Dce),h.length===0)return E.canvas;E.scale(r,r);function A(G){return Math.round(G*r)/r}E.globalCompositeOperation="lighter";var P=rm();h.forEach(function(G,Z,K){het(P,G.extent)});var j=oa(P),D=Bl(P),L=hv(Math.round(r*j/n),Math.round(r*D/n));w||Mi(L,Dce);var z=r/n;h.forEach(function(G,Z,K){var te=G.extent[0]-P[0],se=-(G.extent[3]-P[3]),le=oa(G.extent),pe=Bl(G.extent);G.image.width>0&&G.image.height>0&&L.drawImage(G.image,m,m,G.image.width-2*m,G.image.height-2*m,te*z,se*z,le*z,pe*z)});var B=S0(a);return c.getTriangles().forEach(function(G,Z,K){var te=G.source,se=G.target,le=te[0][0],pe=te[0][1],me=te[1][0],_e=te[1][1],de=te[2][0],Ce=te[2][1],Ze=A((se[0][0]-B[0])/i),rt=A(-(se[0][1]-B[1])/i),ct=A((se[1][0]-B[0])/i),qe=A(-(se[1][1]-B[1])/i),lt=A((se[2][0]-B[0])/i),_t=A(-(se[2][1]-B[1])/i),Tt=le,et=pe;le=0,pe=0,me-=Tt,_e-=et,de-=Tt,Ce-=et;var pt=[[me,_e,0,0,ct-Ze],[de,Ce,0,0,lt-Ze],[0,0,me,_e,qe-rt],[0,0,de,Ce,_t-rt]],ot=XQe(pt);if(ot){if(E.save(),E.beginPath(),Ljr()||!w){E.moveTo(ct,qe);for(var $e=4,De=Ze-ct,Ke=rt-qe,Ge=0;Ge<$e;Ge++)E.lineTo(ct+A((Ge+1)*De/$e),qe+A(Ge*Ke/($e-1))),Ge!=$e-1&&E.lineTo(ct+A((Ge+1)*De/$e),qe+A((Ge+1)*Ke/($e-1)));E.lineTo(lt,_t)}else E.moveTo(ct,qe),E.lineTo(Ze,rt),E.lineTo(lt,_t);E.clip(),E.transform(ot[0],ot[2],ot[1],ot[3],Ze,rt),E.translate(P[0]-Tt,P[3]-et),E.scale(n/r,-n/r),E.drawImage(L.canvas,0,0),E.restore()}}),y&&(E.save(),E.globalCompositeOperation="source-over",E.strokeStyle="black",E.lineWidth=1,c.getTriangles().forEach(function(G,Z,K){var te=G.target,se=(te[0][0]-B[0])/i,le=-(te[0][1]-B[1])/i,pe=(te[1][0]-B[0])/i,me=-(te[1][1]-B[1])/i,_e=(te[2][0]-B[0])/i,de=-(te[2][1]-B[1])/i;E.beginPath(),E.moveTo(pe,me),E.lineTo(se,le),E.lineTo(_e,de),E.closePath(),E.stroke()}),E.restore()),E.canvas}var kjr=function(){var e=function(t,r){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,o){n.__proto__=o}||function(n,o){for(var i in o)Object.prototype.hasOwnProperty.call(o,i)&&(n[i]=o[i])},e(t,r)};return function(t,r){if(typeof r!="function"&&r!==null)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");e(t,r);function n(){this.constructor=t}t.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),Rjr=function(e){kjr(t,e);function t(r,n,o,i,a,c,h,m,y,w,E,A){var P=e.call(this,a,Rr.IDLE,{interpolate:!!A})||this;P.renderEdges_=E!==void 0?E:!1,P.pixelRatio_=h,P.gutter_=m,P.canvas_=null,P.sourceTileGrid_=n,P.targetTileGrid_=i,P.wrappedTileCoord_=c||a,P.sourceTiles_=[],P.sourcesListenerKeys_=null,P.sourceZ_=0;var j=i.getTileCoordExtent(P.wrappedTileCoord_),D=P.targetTileGrid_.getExtent(),L=P.sourceTileGrid_.getExtent(),z=D?nm(j,D):j;if(JP(z)===0)return P.state=Rr.EMPTY,P;var B=r.getExtent();B&&(L?L=nm(L,B):L=B);var G=i.getResolution(P.wrappedTileCoord_[0]),Z=yut(r,o,z,G);if(!isFinite(Z)||Z<=0)return P.state=Rr.EMPTY,P;var K=w!==void 0?w:dut;if(P.triangulation_=new mut(r,o,z,L,Z*K,G),P.triangulation_.getTriangles().length===0)return P.state=Rr.EMPTY,P;P.sourceZ_=n.getZForResolution(Z);var te=P.triangulation_.calculateSourceExtent();if(L&&(r.canWrapX()?(te[1]=Li(te[1],L[1],L[3]),te[3]=Li(te[3],L[1],L[3])):te=nm(te,L)),!JP(te))P.state=Rr.EMPTY;else{for(var se=n.getTileRangeForExtentAndZ(te,P.sourceZ_),le=se.minX;le<=se.maxX;le++)for(var pe=se.minY;pe<=se.maxY;pe++){var me=y(P.sourceZ_,le,pe,h);me&&P.sourceTiles_.push(me)}P.sourceTiles_.length===0&&(P.state=Rr.EMPTY)}return P}return t.prototype.getImage=function(){return this.canvas_},t.prototype.reproject_=function(){var r=[];if(this.sourceTiles_.forEach(function(y,w,E){y&&y.getState()==Rr.LOADED&&r.push({extent:this.sourceTileGrid_.getTileCoordExtent(y.tileCoord),image:y.getImage()})}.bind(this)),this.sourceTiles_.length=0,r.length===0)this.state=Rr.ERROR;else{var n=this.wrappedTileCoord_[0],o=this.targetTileGrid_.getTileSize(n),i=typeof o=="number"?o:o[0],a=typeof o=="number"?o:o[1],c=this.targetTileGrid_.getResolution(n),h=this.sourceTileGrid_.getResolution(this.sourceZ_),m=this.targetTileGrid_.getTileCoordExtent(this.wrappedTileCoord_);this.canvas_=_ut(i,a,this.pixelRatio_,h,this.sourceTileGrid_.getExtent(),c,m,this.triangulation_,r,this.gutter_,this.renderEdges_,this.interpolate),this.state=Rr.LOADED}this.changed()},t.prototype.load=function(){if(this.state==Rr.IDLE){this.state=Rr.LOADING,this.changed();var r=0;this.sourcesListenerKeys_=[],this.sourceTiles_.forEach(function(n,o,i){var a=n.getState();if(a==Rr.IDLE||a==Rr.LOADING){r++;var c=ao(n,kr.CHANGE,function(h){var m=n.getState();(m==Rr.LOADED||m==Rr.ERROR||m==Rr.EMPTY)&&(Ko(c),r--,r===0&&(this.unlistenSources_(),this.reproject_()))},this);this.sourcesListenerKeys_.push(c)}}.bind(this)),r===0?setTimeout(this.reproject_.bind(this),0):this.sourceTiles_.forEach(function(n,o,i){var a=n.getState();a==Rr.IDLE&&n.load()})}},t.prototype.unlistenSources_=function(){this.sourcesListenerKeys_.forEach(Ko),this.sourcesListenerKeys_=null},t.prototype.release=function(){this.canvas_&&(slt(this.canvas_.getContext("2d")),kce.push(this.canvas_),this.canvas_=null),e.prototype.release.call(this)},t}(r2),V9=Rjr;u();u();var uN=34962,cN=34963,xut=35040,n2=35044,wut=35048,Eut=5121,Sut=5123,Tut=5125,Rce=5126,but=["experimental-webgl","webgl","webkit-3d","moz-webgl"];function jce(e,t){for(var r=Mi({preserveDrawingBuffer:!0,antialias:!xst},t),n=but.length,o=0;o<n;++o)try{var i=e.getContext(but[o],r);if(i)return i}catch(a){}return null}var jjr={STATIC_DRAW:n2,STREAM_DRAW:xut,DYNAMIC_DRAW:wut},qjr=function(){function e(t,r){this.array=null,this.type=t,zn(t===uN||t===cN,62),this.usage=r!==void 0?r:jjr.STATIC_DRAW}return e.prototype.ofSize=function(t){this.array=new(qce(this.type))(t)},e.prototype.fromArray=function(t){var r=qce(this.type);this.array=r.from?r.from(t):new r(t)},e.prototype.fromArrayBuffer=function(t){this.array=new(qce(this.type))(t)},e.prototype.getType=function(){return this.type},e.prototype.getArray=function(){return this.array},e.prototype.getUsage=function(){return this.usage},e.prototype.getSize=function(){return this.array?this.array.length:0},e}();function qce(e){switch(e){case uN:return Float32Array;case cN:return Uint32Array;default:return Float32Array}}var G9=qjr;var zjr=function(){var e=function(t,r){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,o){n.__proto__=o}||function(n,o){for(var i in o)Object.prototype.hasOwnProperty.call(o,i)&&(n[i]=o[i])},e(t,r)};return function(t,r){if(typeof r!="function"&&r!==null)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");e(t,r);function n(){this.constructor=t}t.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}();function Mut(e,t,r){var n=r?e.LINEAR:e.NEAREST;e.bindTexture(e.TEXTURE_2D,t),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_WRAP_S,e.CLAMP_TO_EDGE),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_WRAP_T,e.CLAMP_TO_EDGE),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_MIN_FILTER,n),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_MAG_FILTER,n)}function Fjr(e,t,r,n){Mut(e,t,n),e.texImage2D(e.TEXTURE_2D,0,e.RGBA,e.RGBA,e.UNSIGNED_BYTE,r)}function Iut(e,t,r,n,o,i){var a=e.getGL(),c,h;if(r instanceof Float32Array){c=a.FLOAT,e.getExtension("OES_texture_float");var m=e.getExtension("OES_texture_float_linear");h=m!==null}else c=a.UNSIGNED_BYTE,h=!0;Mut(a,t,i&&h);var y=r.byteLength/n[1],w=1;y%8===0?w=8:y%4===0?w=4:y%2===0&&(w=2);var E;switch(o){case 1:{E=a.LUMINANCE;break}case 2:{E=a.LUMINANCE_ALPHA;break}case 3:{E=a.RGB;break}case 4:{E=a.RGBA;break}default:throw new Error("Unsupported number of bands: ".concat(o))}var A=a.getParameter(a.UNPACK_ALIGNMENT);a.pixelStorei(a.UNPACK_ALIGNMENT,w),a.texImage2D(a.TEXTURE_2D,0,E,n[0],n[1],0,E,c,r),a.pixelStorei(a.UNPACK_ALIGNMENT,A)}var o2=null;function Ujr(){var e=document.createElement("canvas");e.width=1,e.height=1,o2=e.getContext("2d")}var Bjr=function(e){zjr(t,e);function t(r){var n=e.call(this)||this;n.tile,n.textures=[],n.handleTileChange_=n.handleTileChange_.bind(n),n.renderSize_=dl(r.grid.getTileSize(r.tile.tileCoord[0])),n.gutter_=r.gutter||0,n.bandCount=NaN,n.helper_=r.helper;var o=new G9(uN,n2);return o.fromArray([0,1,1,1,1,0,0,0]),n.helper_.flushBufferData(o),n.coords=o,n.setTile(r.tile),n}return t.prototype.setTile=function(r){if(r!==this.tile)if(this.tile&&this.tile.removeEventListener(kr.CHANGE,this.handleTileChange_),this.tile=r,this.textures.length=0,this.loaded=r.getState()===Rr.LOADED,this.loaded)this.uploadTile_();else{if(r instanceof kb){var n=r.getImage();n instanceof Image&&!n.crossOrigin&&(n.crossOrigin="anonymous")}r.addEventListener(kr.CHANGE,this.handleTileChange_)}},t.prototype.uploadTile_=function(){var r=this.helper_,n=r.getGL(),o=this.tile;if(o instanceof kb||o instanceof V9){var i=n.createTexture();this.textures.push(i),this.bandCount=4,Fjr(n,i,o.getImage(),o.interpolate);return}var a=o.getSize(),c=[a[0]+2*this.gutter_,a[1]+2*this.gutter_],h=o.getData(),m=h instanceof Float32Array,y=c[0]*c[1],w=m?Float32Array:Uint8Array,E=w.BYTES_PER_ELEMENT,A=h.byteLength/c[1];this.bandCount=Math.floor(A/E/c[0]);var P=Math.ceil(this.bandCount/4);if(P===1){var i=n.createTexture();this.textures.push(i),Iut(r,i,h,c,this.bandCount,o.interpolate);return}for(var j=new Array(P),D=0;D<P;++D){var i=n.createTexture();this.textures.push(i);var L=D<P-1?4:this.bandCount%4;j[D]=new w(y*L)}for(var z=0,B=0,G=c[0]*this.bandCount,Z=0;Z<c[1];++Z){for(var K=0;K<G;++K){var te=h[B+K],se=Math.floor(z/this.bandCount),le=K%this.bandCount,D=Math.floor(le/4),pe=j[D],L=pe.length/y,me=le%4;pe[se*L+me]=te,++z}B+=A/E}for(var D=0;D<P;++D){var i=this.textures[D],pe=j[D],L=pe.length/y;Iut(r,i,pe,c,L,o.interpolate)}},t.prototype.handleTileChange_=function(){this.tile.getState()===Rr.LOADED&&(this.loaded=!0,this.uploadTile_(),this.dispatchEvent(kr.CHANGE))},t.prototype.disposeInternal=function(){var r=this.helper_.getGL();this.helper_.deleteBuffer(this.coords);for(var n=0;n<this.textures.length;++n)r.deleteTexture(this.textures[n]);this.tile.removeEventListener(kr.CHANGE,this.handleTileChange_)},t.prototype.getPixelData=function(r,n){if(!this.loaded)return null;var o=this.renderSize_[0],i=this.renderSize_[1],a=this.gutter_;if(this.tile instanceof fut){var c=this.tile.getSize(),h=c[0],m=c[1],y=h+2*a,w=m+2*a,E=a+Math.floor(h*(r/o)),A=a+Math.floor(m*(n/i)),P=this.tile.getData();if(P instanceof DataView){var j=P.byteLength/(y*w),D=j*(A*y+E),L=P.buffer.slice(D,D+j);return new DataView(L)}var z=this.bandCount*(A*y+E);return P.slice(z,z+this.bandCount)}o2||Ujr(),o2.clearRect(0,0,1,1);var B=this.tile.getImage(),G=B.width,Z=B.height,K=G-2*a,te=Z-2*a,se=a+Math.floor(K*(r/o)),le=a+Math.floor(te*(n/i)),pe;try{o2.drawImage(B,se,le,1,1,0,0,1,1),pe=o2.getImageData(0,0,1,1).data}catch(me){return o2=null,null}return pe},t}(qf),Cut=Bjr;u();u();u();var pN={LOST:"webglcontextlost",RESTORED:"webglcontextrestored"};u();var Vjr=`
  precision mediump float;
  
  attribute vec2 a_position;
  varying vec2 v_texCoord;
  varying vec2 v_screenCoord;
  
  uniform vec2 u_screenSize;
   
  void main() {
    v_texCoord = a_position * 0.5 + 0.5;
    v_screenCoord = v_texCoord * u_screenSize;
    gl_Position = vec4(a_position, 0.0, 1.0);
  }
`,Gjr=`
  precision mediump float;
   
  uniform sampler2D u_image;
  uniform float u_opacity;
   
  varying vec2 v_texCoord;
   
  void main() {
    gl_FragColor = texture2D(u_image, v_texCoord) * u_opacity;
  }
`,Hjr=function(){function e(t){this.gl_=t.webGlContext;var r=this.gl_;this.scaleRatio_=t.scaleRatio||1,this.renderTargetTexture_=r.createTexture(),this.renderTargetTextureSize_=null,this.frameBuffer_=r.createFramebuffer();var n=r.createShader(r.VERTEX_SHADER);r.shaderSource(n,t.vertexShader||Vjr),r.compileShader(n);var o=r.createShader(r.FRAGMENT_SHADER);r.shaderSource(o,t.fragmentShader||Gjr),r.compileShader(o),this.renderTargetProgram_=r.createProgram(),r.attachShader(this.renderTargetProgram_,n),r.attachShader(this.renderTargetProgram_,o),r.linkProgram(this.renderTargetProgram_),this.renderTargetVerticesBuffer_=r.createBuffer();var i=[-1,-1,1,-1,-1,1,1,-1,1,1,-1,1];r.bindBuffer(r.ARRAY_BUFFER,this.renderTargetVerticesBuffer_),r.bufferData(r.ARRAY_BUFFER,new Float32Array(i),r.STATIC_DRAW),this.renderTargetAttribLocation_=r.getAttribLocation(this.renderTargetProgram_,"a_position"),this.renderTargetUniformLocation_=r.getUniformLocation(this.renderTargetProgram_,"u_screenSize"),this.renderTargetOpacityLocation_=r.getUniformLocation(this.renderTargetProgram_,"u_opacity"),this.renderTargetTextureLocation_=r.getUniformLocation(this.renderTargetProgram_,"u_image"),this.uniforms_=[],t.uniforms&&Object.keys(t.uniforms).forEach(function(a){this.uniforms_.push({value:t.uniforms[a],location:r.getUniformLocation(this.renderTargetProgram_,a)})}.bind(this))}return e.prototype.getGL=function(){return this.gl_},e.prototype.init=function(t){var r=this.getGL(),n=[r.drawingBufferWidth*this.scaleRatio_,r.drawingBufferHeight*this.scaleRatio_];if(r.bindFramebuffer(r.FRAMEBUFFER,this.getFrameBuffer()),r.viewport(0,0,n[0],n[1]),!this.renderTargetTextureSize_||this.renderTargetTextureSize_[0]!==n[0]||this.renderTargetTextureSize_[1]!==n[1]){this.renderTargetTextureSize_=n;var o=0,i=r.RGBA,a=0,c=r.RGBA,h=r.UNSIGNED_BYTE,m=null;r.bindTexture(r.TEXTURE_2D,this.renderTargetTexture_),r.texImage2D(r.TEXTURE_2D,o,i,n[0],n[1],a,c,h,m),r.texParameteri(r.TEXTURE_2D,r.TEXTURE_MIN_FILTER,r.LINEAR),r.texParameteri(r.TEXTURE_2D,r.TEXTURE_WRAP_S,r.CLAMP_TO_EDGE),r.texParameteri(r.TEXTURE_2D,r.TEXTURE_WRAP_T,r.CLAMP_TO_EDGE),r.framebufferTexture2D(r.FRAMEBUFFER,r.COLOR_ATTACHMENT0,r.TEXTURE_2D,this.renderTargetTexture_,0)}},e.prototype.apply=function(t,r,n,o){var i=this.getGL(),a=t.size;if(i.bindFramebuffer(i.FRAMEBUFFER,r?r.getFrameBuffer():null),i.activeTexture(i.TEXTURE0),i.bindTexture(i.TEXTURE_2D,this.renderTargetTexture_),!r){var c=Qa(i.canvas);if(!t.renderTargets[c]){var h=i.getContextAttributes();h&&h.preserveDrawingBuffer&&(i.clearColor(0,0,0,0),i.clear(i.COLOR_BUFFER_BIT)),t.renderTargets[c]=!0}}i.enable(i.BLEND),i.blendFunc(i.ONE,i.ONE_MINUS_SRC_ALPHA),i.viewport(0,0,i.drawingBufferWidth,i.drawingBufferHeight),i.bindBuffer(i.ARRAY_BUFFER,this.renderTargetVerticesBuffer_),i.useProgram(this.renderTargetProgram_),i.enableVertexAttribArray(this.renderTargetAttribLocation_),i.vertexAttribPointer(this.renderTargetAttribLocation_,2,i.FLOAT,!1,0,0),i.uniform2f(this.renderTargetUniformLocation_,a[0],a[1]),i.uniform1i(this.renderTargetTextureLocation_,0);var m=t.layerStatesArray[t.layerIndex].opacity;i.uniform1f(this.renderTargetOpacityLocation_,m),this.applyUniforms(t),n&&n(i,t),i.drawArrays(i.TRIANGLES,0,6),o&&o(i,t)},e.prototype.getFrameBuffer=function(){return this.frameBuffer_},e.prototype.applyUniforms=function(t){var r=this.getGL(),n,o=1;this.uniforms_.forEach(function(i){if(n=typeof i.value=="function"?i.value(t):i.value,n instanceof HTMLCanvasElement||n instanceof ImageData)i.texture||(i.texture=r.createTexture()),r.activeTexture(r["TEXTURE".concat(o)]),r.bindTexture(r.TEXTURE_2D,i.texture),r.texParameteri(r.TEXTURE_2D,r.TEXTURE_MIN_FILTER,r.LINEAR),r.texParameteri(r.TEXTURE_2D,r.TEXTURE_WRAP_S,r.CLAMP_TO_EDGE),r.texParameteri(r.TEXTURE_2D,r.TEXTURE_WRAP_T,r.CLAMP_TO_EDGE),n instanceof ImageData?r.texImage2D(r.TEXTURE_2D,0,r.RGBA,r.RGBA,n.width,n.height,0,r.UNSIGNED_BYTE,new Uint8Array(n.data)):r.texImage2D(r.TEXTURE_2D,0,r.RGBA,r.RGBA,r.UNSIGNED_BYTE,n),r.uniform1i(i.location,o++);else if(Array.isArray(n))switch(n.length){case 2:r.uniform2f(i.location,n[0],n[1]);return;case 3:r.uniform3f(i.location,n[0],n[1],n[2]);return;case 4:r.uniform4f(i.location,n[0],n[1],n[2],n[3]);return;default:return}else typeof n=="number"&&r.uniform1f(i.location,n)})},e}(),zce=Hjr;u();function H9(){return[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1]}function i2(e,t){return e[0]=t[0],e[1]=t[1],e[4]=t[2],e[5]=t[3],e[12]=t[4],e[13]=t[5],e}var $jr=function(){var e=function(t,r){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,o){n.__proto__=o}||function(n,o){for(var i in o)Object.prototype.hasOwnProperty.call(o,i)&&(n[i]=o[i])},e(t,r)};return function(t,r){if(typeof r!="function"&&r!==null)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");e(t,r);function n(){this.constructor=t}t.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}();var fN={PROJECTION_MATRIX:"u_projectionMatrix",OFFSET_SCALE_MATRIX:"u_offsetScaleMatrix",OFFSET_ROTATION_MATRIX:"u_offsetRotateMatrix",TIME:"u_time",ZOOM:"u_zoom",RESOLUTION:"u_resolution"},a2={UNSIGNED_BYTE:Eut,UNSIGNED_SHORT:Sut,UNSIGNED_INT:Tut,FLOAT:Rce},$9={};function Aut(e){return"shared/"+e}var Out=0;function Wjr(){var e="unique/"+Out;return Out+=1,e}function Yjr(e){var t=$9[e];if(!t){var r=document.createElement("canvas");r.style.position="absolute",r.style.left="0",t={users:0,canvas:r},$9[e]=t}return t.users+=1,t.canvas}function Zjr(e){var t=$9[e];if(t&&(t.users-=1,!(t.users>0))){var r=t.canvas,n=jce(r),o=n.getExtension("WEBGL_lose_context");o&&o.loseContext(),delete $9[e]}}var Kjr=function(e){$jr(t,e);function t(r){var n=e.call(this)||this,o=r||{};n.boundHandleWebGLContextLost_=n.handleWebGLContextLost.bind(n),n.boundHandleWebGLContextRestored_=n.handleWebGLContextRestored.bind(n),n.canvasCacheKey_=o.canvasCacheKey?Aut(o.canvasCacheKey):Wjr(),n.canvas_=Yjr(n.canvasCacheKey_),n.gl_=jce(n.canvas_),n.bufferCache_={},n.extensionCache_={},n.currentProgram_=null,n.canvas_.addEventListener(pN.LOST,n.boundHandleWebGLContextLost_),n.canvas_.addEventListener(pN.RESTORED,n.boundHandleWebGLContextRestored_),n.offsetRotateMatrix_=Ff(),n.offsetScaleMatrix_=Ff(),n.tmpMat4_=H9(),n.uniformLocations_={},n.attribLocations_={},n.uniforms_=[],o.uniforms&&n.setUniforms(o.uniforms);var i=n.getGL();return n.postProcessPasses_=o.postProcesses?o.postProcesses.map(function(a){return new zce({webGlContext:i,scaleRatio:a.scaleRatio,vertexShader:a.vertexShader,fragmentShader:a.fragmentShader,uniforms:a.uniforms})}):[new zce({webGlContext:i})],n.shaderCompileErrors_=null,n.startTime_=Date.now(),n}return t.prototype.setUniforms=function(r){this.uniforms_=[];for(var n in r)this.uniforms_.push({name:n,value:r[n]});this.uniformLocations_={}},t.prototype.canvasCacheKeyMatches=function(r){return this.canvasCacheKey_===Aut(r)},t.prototype.getExtension=function(r){if(r in this.extensionCache_)return this.extensionCache_[r];var n=this.gl_.getExtension(r);return this.extensionCache_[r]=n,n},t.prototype.bindBuffer=function(r){var n=this.getGL(),o=Qa(r),i=this.bufferCache_[o];if(!i){var a=n.createBuffer();i={buffer:r,webGlBuffer:a},this.bufferCache_[o]=i}n.bindBuffer(r.getType(),i.webGlBuffer)},t.prototype.flushBufferData=function(r){var n=this.getGL();this.bindBuffer(r),n.bufferData(r.getType(),r.getArray(),r.getUsage())},t.prototype.deleteBuffer=function(r){var n=this.getGL(),o=Qa(r),i=this.bufferCache_[o];i&&!n.isContextLost()&&n.deleteBuffer(i.webGlBuffer),delete this.bufferCache_[o]},t.prototype.disposeInternal=function(){this.canvas_.removeEventListener(pN.LOST,this.boundHandleWebGLContextLost_),this.canvas_.removeEventListener(pN.RESTORED,this.boundHandleWebGLContextRestored_),Zjr(this.canvasCacheKey_),delete this.gl_,delete this.canvas_},t.prototype.prepareDraw=function(r,n){var o=this.getGL(),i=this.getCanvas(),a=r.size,c=r.pixelRatio;i.width=a[0]*c,i.height=a[1]*c,i.style.width=a[0]+"px",i.style.height=a[1]+"px",o.useProgram(this.currentProgram_);for(var h=this.postProcessPasses_.length-1;h>=0;h--)this.postProcessPasses_[h].init(r);o.bindTexture(o.TEXTURE_2D,null),o.clearColor(0,0,0,0),o.clear(o.COLOR_BUFFER_BIT),o.enable(o.BLEND),o.blendFunc(o.ONE,n?o.ZERO:o.ONE_MINUS_SRC_ALPHA),o.useProgram(this.currentProgram_),this.applyFrameState(r),this.applyUniforms(r)},t.prototype.prepareDrawToRenderTarget=function(r,n,o){var i=this.getGL(),a=n.getSize();i.bindFramebuffer(i.FRAMEBUFFER,n.getFramebuffer()),i.viewport(0,0,a[0],a[1]),i.bindTexture(i.TEXTURE_2D,n.getTexture()),i.clearColor(0,0,0,0),i.clear(i.COLOR_BUFFER_BIT),i.enable(i.BLEND),i.blendFunc(i.ONE,o?i.ZERO:i.ONE_MINUS_SRC_ALPHA),i.useProgram(this.currentProgram_),this.applyFrameState(r),this.applyUniforms(r)},t.prototype.drawElements=function(r,n){var o=this.getGL();this.getExtension("OES_element_index_uint");var i=o.UNSIGNED_INT,a=4,c=n-r,h=r*a;o.drawElements(o.TRIANGLES,c,i,h)},t.prototype.finalizeDraw=function(r,n,o){for(var i=0,a=this.postProcessPasses_.length;i<a;i++)i===a-1?this.postProcessPasses_[i].apply(r,null,n,o):this.postProcessPasses_[i].apply(r,this.postProcessPasses_[i+1])},t.prototype.getCanvas=function(){return this.canvas_},t.prototype.getGL=function(){return this.gl_},t.prototype.applyFrameState=function(r){var n=r.size,o=r.viewState.rotation,i=ZT(this.offsetScaleMatrix_);QD(i,2/n[0],2/n[1]);var a=ZT(this.offsetRotateMatrix_);o!==0&&M9(a,-o),this.setUniformMatrixValue(fN.OFFSET_SCALE_MATRIX,i2(this.tmpMat4_,i)),this.setUniformMatrixValue(fN.OFFSET_ROTATION_MATRIX,i2(this.tmpMat4_,a)),this.setUniformFloatValue(fN.TIME,(Date.now()-this.startTime_)*.001),this.setUniformFloatValue(fN.ZOOM,r.viewState.zoom),this.setUniformFloatValue(fN.RESOLUTION,r.viewState.resolution)},t.prototype.applyUniforms=function(r){var n=this.getGL(),o,i=0;this.uniforms_.forEach(function(a){if(o=typeof a.value=="function"?a.value(r):a.value,o instanceof HTMLCanvasElement||o instanceof HTMLImageElement||o instanceof ImageData){a.texture||(a.prevValue=void 0,a.texture=n.createTexture()),n.activeTexture(n["TEXTURE".concat(i)]),n.bindTexture(n.TEXTURE_2D,a.texture),n.texParameteri(n.TEXTURE_2D,n.TEXTURE_MIN_FILTER,n.LINEAR),n.texParameteri(n.TEXTURE_2D,n.TEXTURE_WRAP_S,n.CLAMP_TO_EDGE),n.texParameteri(n.TEXTURE_2D,n.TEXTURE_WRAP_T,n.CLAMP_TO_EDGE);var c=!(o instanceof HTMLImageElement)||o.complete;c&&a.prevValue!==o&&(a.prevValue=o,n.texImage2D(n.TEXTURE_2D,0,n.RGBA,n.RGBA,n.UNSIGNED_BYTE,o)),n.uniform1i(this.getUniformLocation(a.name),i++)}else if(Array.isArray(o)&&o.length===6)this.setUniformMatrixValue(a.name,i2(this.tmpMat4_,o));else if(Array.isArray(o)&&o.length<=4)switch(o.length){case 2:n.uniform2f(this.getUniformLocation(a.name),o[0],o[1]);return;case 3:n.uniform3f(this.getUniformLocation(a.name),o[0],o[1],o[2]);return;case 4:n.uniform4f(this.getUniformLocation(a.name),o[0],o[1],o[2],o[3]);return;default:return}else typeof o=="number"&&n.uniform1f(this.getUniformLocation(a.name),o)}.bind(this))},t.prototype.useProgram=function(r){if(r==this.currentProgram_)return!1;var n=this.getGL();return n.useProgram(r),this.currentProgram_=r,this.uniformLocations_={},this.attribLocations_={},!0},t.prototype.compileShader=function(r,n){var o=this.getGL(),i=o.createShader(n);return o.shaderSource(i,r),o.compileShader(i),i},t.prototype.getProgram=function(r,n){var o=this.getGL(),i=this.compileShader(r,o.FRAGMENT_SHADER),a=this.compileShader(n,o.VERTEX_SHADER),c=o.createProgram();if(o.attachShader(c,i),o.attachShader(c,a),o.linkProgram(c),!o.getShaderParameter(i,o.COMPILE_STATUS)){var h="Fragment shader compliation failed: ".concat(o.getShaderInfoLog(i));throw new Error(h)}if(o.deleteShader(i),!o.getShaderParameter(a,o.COMPILE_STATUS)){var h="Vertex shader compilation failed: ".concat(o.getShaderInfoLog(a));throw new Error(h)}if(o.deleteShader(a),!o.getProgramParameter(c,o.LINK_STATUS)){var h="GL program linking failed: ".concat(o.getShaderInfoLog(a));throw new Error(h)}return c},t.prototype.getUniformLocation=function(r){return this.uniformLocations_[r]===void 0&&(this.uniformLocations_[r]=this.getGL().getUniformLocation(this.currentProgram_,r)),this.uniformLocations_[r]},t.prototype.getAttributeLocation=function(r){return this.attribLocations_[r]===void 0&&(this.attribLocations_[r]=this.getGL().getAttribLocation(this.currentProgram_,r)),this.attribLocations_[r]},t.prototype.makeProjectionTransform=function(r,n){var o=r.size,i=r.viewState.rotation,a=r.viewState.resolution,c=r.viewState.center;return ZT(n),$0(n,0,0,2/(a*o[0]),2/(a*o[1]),-i,-c[0],-c[1]),n},t.prototype.setUniformFloatValue=function(r,n){this.getGL().uniform1f(this.getUniformLocation(r),n)},t.prototype.setUniformFloatVec4=function(r,n){this.getGL().uniform4fv(this.getUniformLocation(r),n)},t.prototype.setUniformMatrixValue=function(r,n){this.getGL().uniformMatrix4fv(this.getUniformLocation(r),!1,n)},t.prototype.enableAttributeArray_=function(r,n,o,i,a){var c=this.getAttributeLocation(r);c<0||(this.getGL().enableVertexAttribArray(c),this.getGL().vertexAttribPointer(c,n,o,!1,i,a))},t.prototype.enableAttributes=function(r){for(var n=Xjr(r),o=0,i=0;i<r.length;i++){var a=r[i];this.enableAttributeArray_(a.name,a.size,a.type||Rce,n,o),o+=a.size*Put(a.type)}},t.prototype.handleWebGLContextLost=function(){If(this.bufferCache_),this.currentProgram_=null},t.prototype.handleWebGLContextRestored=function(){},t.prototype.createTexture=function(r,n,o){var i=this.getGL(),a=o||i.createTexture(),c=0,h=i.RGBA,m=0,y=i.RGBA,w=i.UNSIGNED_BYTE;return i.bindTexture(i.TEXTURE_2D,a),n?i.texImage2D(i.TEXTURE_2D,c,h,y,w,n):i.texImage2D(i.TEXTURE_2D,c,h,r[0],r[1],m,y,w,null),i.texParameteri(i.TEXTURE_2D,i.TEXTURE_MIN_FILTER,i.LINEAR),i.texParameteri(i.TEXTURE_2D,i.TEXTURE_WRAP_S,i.CLAMP_TO_EDGE),i.texParameteri(i.TEXTURE_2D,i.TEXTURE_WRAP_T,i.CLAMP_TO_EDGE),a},t}(B0);function Xjr(e){for(var t=0,r=0;r<e.length;r++){var n=e[r];t+=n.size*Put(n.type)}return t}function Put(e){switch(e){case a2.UNSIGNED_BYTE:return Uint8Array.BYTES_PER_ELEMENT;case a2.UNSIGNED_SHORT:return Uint16Array.BYTES_PER_ELEMENT;case a2.UNSIGNED_INT:return Uint32Array.BYTES_PER_ELEMENT;case a2.FLOAT:default:return Float32Array.BYTES_PER_ELEMENT}}var Dut=Kjr;var Jjr=function(){var e=function(t,r){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,o){n.__proto__=o}||function(n,o){for(var i in o)Object.prototype.hasOwnProperty.call(o,i)&&(n[i]=o[i])},e(t,r)};return function(t,r){if(typeof r!="function"&&r!==null)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");e(t,r);function n(){this.constructor=t}t.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}();var Qjr=function(e){Jjr(t,e);function t(r,n){var o=e.call(this,r)||this,i=n||{};return o.inversePixelTransform_=Ff(),o.pixelContext_=null,o.postProcesses_=i.postProcesses,o.uniforms_=i.uniforms,o.helper,r.addChangeListener(Oo.MAP,o.removeHelper.bind(o)),o.dispatchPreComposeEvent=o.dispatchPreComposeEvent.bind(o),o.dispatchPostComposeEvent=o.dispatchPostComposeEvent.bind(o),o}return t.prototype.dispatchPreComposeEvent=function(r,n){var o=this.getLayer();if(o.hasListener(xu.PRECOMPOSE)){var i=new t2(xu.PRECOMPOSE,void 0,n,r);o.dispatchEvent(i)}},t.prototype.dispatchPostComposeEvent=function(r,n){var o=this.getLayer();if(o.hasListener(xu.POSTCOMPOSE)){var i=new t2(xu.POSTCOMPOSE,void 0,n,r);o.dispatchEvent(i)}},t.prototype.reset=function(r){this.uniforms_=r.uniforms,this.helper&&this.helper.setUniforms(this.uniforms_)},t.prototype.removeHelper=function(){this.helper&&(this.helper.dispose(),delete this.helper)},t.prototype.prepareFrame=function(r){if(this.getLayer().getRenderSource()){for(var n=!0,o=-1,i=void 0,a=0,c=r.layerStatesArray.length;a<c;a++){var h=r.layerStatesArray[a].layer,m=h.getRenderer();if(!(m instanceof t)){n=!0;continue}var y=h.getClassName();if((n||y!==i)&&(o+=1,n=!1),i=y,m===this)break}var w="map/"+r.mapId+"/group/"+o;(!this.helper||!this.helper.canvasCacheKeyMatches(w))&&(this.removeHelper(),this.helper=new Dut({postProcesses:this.postProcesses_,uniforms:this.uniforms_,canvasCacheKey:w}),i&&(this.helper.getCanvas().className=i),this.afterHelperCreated())}return this.prepareFrameInternal(r)},t.prototype.afterHelperCreated=function(){},t.prototype.prepareFrameInternal=function(r){return!0},t.prototype.disposeInternal=function(){this.removeHelper(),e.prototype.disposeInternal.call(this)},t.prototype.dispatchRenderEvent_=function(r,n,o){var i=this.getLayer();if(i.hasListener(r)){$0(this.inversePixelTransform_,0,0,o.pixelRatio,-o.pixelRatio,0,0,-o.size[1]);var a=new t2(r,this.inversePixelTransform_,o,n);i.dispatchEvent(a)}},t.prototype.preRender=function(r,n){this.dispatchRenderEvent_(xu.PRERENDER,r,n)},t.prototype.postRender=function(r,n){this.dispatchRenderEvent_(xu.POSTRENDER,r,n)},t.prototype.getDataAtPixel=function(r,n,o){var i=H0([n.pixelRatio,0,0,n.pixelRatio,0,0],r.slice()),a=this.helper.getGL();if(!a)return null;var c=this.getLayer(),h=c.getExtent();if(h){var m=H0(n.pixelToCoordinateTransform,r.slice());if(!Kg(h,m))return null}var y=a.getContextAttributes();if(!y||!y.preserveDrawingBuffer)return new Uint8Array;var w=Math.round(i[0]),E=Math.round(i[1]),A=this.pixelContext_;if(!A){var P=document.createElement("canvas");P.width=1,P.height=1,A=P.getContext("2d"),this.pixelContext_=A}A.clearRect(0,0,1,1);var j;try{A.drawImage(a.canvas,w,E,1,1,0,0,1,1),j=A.getImageData(0,0,1,1).data}catch(D){return j}return j[3]===0?null:j},t}(Flt);var Nut=Qjr;u();function s2(e,t,r,n){return n!==void 0?(n[0]=e,n[1]=t,n[2]=r,n):[e,t,r]}function Rb(e,t,r){return e+"/"+t+"/"+r}function X0(e){return Rb(e[0],e[1],e[2])}function Lut(e){return e.split("/").map(Number)}function kut(e){return(e[1]<<e[0])+e[2]}function Rut(e,t){var r=e[0],n=e[1],o=e[2];if(t.getMinZoom()>r||r>t.getMaxZoom())return!1;var i=t.getFullTileRange(r);return i?i.containsXY(n,o):!0}var eqr=function(){var e=function(t,r){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,o){n.__proto__=o}||function(n,o){for(var i in o)Object.prototype.hasOwnProperty.call(o,i)&&(n[i]=o[i])},e(t,r)};return function(t,r){if(typeof r!="function"&&r!==null)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");e(t,r);function n(){this.constructor=t}t.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),Vn={TILE_TEXTURE_ARRAY:"u_tileTextures",TILE_TRANSFORM:"u_tileTransform",TRANSITION_ALPHA:"u_transitionAlpha",DEPTH:"u_depth",TEXTURE_PIXEL_WIDTH:"u_texturePixelWidth",TEXTURE_PIXEL_HEIGHT:"u_texturePixelHeight",TEXTURE_RESOLUTION:"u_textureResolution",TEXTURE_ORIGIN_X:"u_textureOriginX",TEXTURE_ORIGIN_Y:"u_textureOriginY",RENDER_EXTENT:"u_renderExtent",RESOLUTION:"u_resolution",ZOOM:"u_zoom"},dN={TEXTURE_COORD:"a_textureCoord"},tqr=[{name:dN.TEXTURE_COORD,size:2,type:a2.FLOAT}],rqr={};function nqr(e){return 2*(1-1/(e+1))-1}function jut(e,t,r){r in e||(e[r]=[]),e[r].push(t)}function Fce(e,t){var r=e.layerStatesArray[e.layerIndex];r.extent&&(t=nm(t,I0(r.extent,e.viewState.projection)));var n=r.layer.getRenderSource();if(!n.getWrapX()){var o=n.getTileGridForProjection(e.viewState.projection).getExtent();o&&(t=nm(t,o))}return t}function Uce(e,t){return"".concat(e.getKey(),",").concat(X0(t))}var oqr=function(e){eqr(t,e);function t(r,n){var o=e.call(this,r,{uniforms:n.uniforms})||this;o.renderComplete=!1,o.tileTransform_=Ff(),o.tempMat4_=H9(),o.tempTileRange_=new B9(0,0,0,0),o.tempTileCoord_=s2(0,0,0),o.tempSize_=[0,0],o.program_,o.vertexShader_=n.vertexShader,o.fragmentShader_=n.fragmentShader,o.indices_=new G9(cN,n2),o.indices_.fromArray([0,1,3,1,2,3]);var i=n.cacheSize!==void 0?n.cacheSize:512;return o.tileTextureCache_=new U9(i),o.paletteTextures_=n.paletteTextures||[],o.frameState_=null,o}return t.prototype.reset=function(r){e.prototype.reset.call(this,{uniforms:r.uniforms}),this.vertexShader_=r.vertexShader,this.fragmentShader_=r.fragmentShader,this.paletteTextures_=r.paletteTextures||[],this.helper&&(this.program_=this.helper.getProgram(this.fragmentShader_,this.vertexShader_))},t.prototype.afterHelperCreated=function(){this.program_=this.helper.getProgram(this.fragmentShader_,this.vertexShader_),this.helper.flushBufferData(this.indices_)},t.prototype.isDrawableTile_=function(r){var n=this.getLayer(),o=r.getState(),i=n.getUseInterimTilesOnError();return o==Rr.LOADED||o==Rr.EMPTY||o==Rr.ERROR&&!i},t.prototype.prepareFrameInternal=function(r){var n=this.getLayer(),o=n.getRenderSource();return!o||vb(Fce(r,r.extent))?!1:o.getState()==="ready"},t.prototype.enqueueTiles=function(r,n,o,i){var a=r.viewState,c=this.getLayer(),h=c.getRenderSource(),m=h.getTileGridForProjection(a.projection),y=h.getGutterForProjection(a.projection),w=Qa(h);w in r.wantedTiles||(r.wantedTiles[w]={});for(var E=r.wantedTiles[w],A=this.tileTextureCache_,P=Math.max(o-c.getPreload(),m.getMinZoom(),c.getMinZoom()),j=o;j>=P;--j)for(var D=m.getTileRangeForExtentAndZ(n,j,this.tempTileRange_),L=m.getResolution(j),z=D.minX;z<=D.maxX;++z)for(var B=D.minY;B<=D.maxY;++B){var G=s2(j,z,B,this.tempTileCoord_),Z=Uce(h,G),K=void 0,te=void 0;if(A.containsKey(Z)&&(K=A.get(Z),te=K.tile),!K||K.tile.key!==h.getKey())if(te=h.getTile(j,z,B,r.pixelRatio,a.projection),!K)K=new Cut({tile:te,grid:m,helper:this.helper,gutter:y}),A.set(Z,K);else if(this.isDrawableTile_(te))K.setTile(te);else{var se=te.getInterimTile();K.setTile(se)}jut(i,K,j);var le=te.getKey();E[le]=!0,te.getState()===Rr.IDLE&&(r.tileQueue.isKeyQueued(le)||r.tileQueue.enqueue([te,w,m.getTileCoordCenter(G),L]))}},t.prototype.renderFrame=function(r){this.frameState_=r,this.renderComplete=!0;var n=this.helper.getGL();this.preRender(n,r);var o=r.viewState,i=this.getLayer(),a=i.getRenderSource(),c=a.getTileGridForProjection(o.projection),h=a.getGutterForProjection(o.projection),m=Fce(r,r.extent),y=c.getZForResolution(o.resolution,a.zDirection),w={};if(r.nextExtent){var E=c.getZForResolution(o.nextResolution,a.zDirection),A=Fce(r,r.nextExtent);this.enqueueTiles(r,A,E,w)}this.enqueueTiles(r,m,y,w);for(var P={},j=Qa(this),D=r.time,L=!1,z=w[y],B=0,G=z.length;B<G;++B){var Z=z[B],K=Z.tile,te=K.tileCoord;if(Z.loaded){var se=K.getAlpha(j,D);if(se===1){K.endTransition(j);continue}L=!0;var le=X0(te);P[le]=se}this.renderComplete=!1;var pe=this.findAltTiles_(c,te,y+1,w);if(!pe)for(var me=c.getMinZoom(),_e=y-1;_e>=me;--_e){var de=this.findAltTiles_(c,te,_e,w);if(de)break}}this.helper.useProgram(this.program_),this.helper.prepareDraw(r,!L);for(var Ce=Object.keys(w).map(Number).sort(JD),Ze=o.center[0],rt=o.center[1],ct=0,qe=Ce.length;ct<qe;++ct)for(var lt=Ce[ct],_t=c.getResolution(lt),Tt=dl(c.getTileSize(lt),this.tempSize_),et=c.getOrigin(lt),pt=Tt[0]+2*h,ot=Tt[1]+2*h,$e=pt/ot,De=(Ze-et[0])/(Tt[0]*_t),Ke=(et[1]-rt)/(Tt[1]*_t),Ge=o.resolution/_t,ft=nqr(lt),mt=w[lt],B=0,G=mt.length;B<G;++B){var Z=mt[B];if(Z.loaded){var K=Z.tile,te=K.tileCoord,le=X0(te),Ot=te[1],At=te[2];ZT(this.tileTransform_),QD(this.tileTransform_,2/(r.size[0]*Ge/pt),-2/(r.size[1]*Ge/pt)),M9(this.tileTransform_,o.rotation),QD(this.tileTransform_,1,1/$e),Ist(this.tileTransform_,(Tt[0]*(Ot-De)-h)/pt,(Tt[1]*(At-Ke)-h)/ot),this.helper.setUniformMatrixValue(Vn.TILE_TRANSFORM,i2(this.tempMat4_,this.tileTransform_)),this.helper.bindBuffer(Z.coords),this.helper.bindBuffer(this.indices_),this.helper.enableAttributes(tqr);for(var Mt=0;Mt<Z.textures.length;){var Yt="TEXTURE"+Mt,jt="".concat(Vn.TILE_TEXTURE_ARRAY,"[").concat(Mt,"]");n.activeTexture(n[Yt]),n.bindTexture(n.TEXTURE_2D,Z.textures[Mt]),n.uniform1i(this.helper.getUniformLocation(jt),Mt),++Mt}for(var Ut=0;Ut<this.paletteTextures_.length;++Ut){var ar=this.paletteTextures_[Ut];n.activeTexture(n["TEXTURE"+Mt]);var jr=ar.getTexture(n);n.bindTexture(n.TEXTURE_2D,jr),n.uniform1i(this.helper.getUniformLocation(ar.name),Mt),++Mt}var se=le in P?P[le]:1;se<1&&(r.animate=!0),this.helper.setUniformFloatValue(Vn.TRANSITION_ALPHA,se),this.helper.setUniformFloatValue(Vn.DEPTH,ft),this.helper.setUniformFloatValue(Vn.TEXTURE_PIXEL_WIDTH,pt),this.helper.setUniformFloatValue(Vn.TEXTURE_PIXEL_HEIGHT,ot),this.helper.setUniformFloatValue(Vn.TEXTURE_RESOLUTION,_t),this.helper.setUniformFloatValue(Vn.TEXTURE_ORIGIN_X,et[0]+Ot*Tt[0]*_t-h*_t),this.helper.setUniformFloatValue(Vn.TEXTURE_ORIGIN_Y,et[1]-At*Tt[1]*_t+h*_t);var Or=m;h>0&&(Or=c.getTileCoordExtent(te),nm(Or,m,Or)),this.helper.setUniformFloatVec4(Vn.RENDER_EXTENT,Or),this.helper.setUniformFloatValue(Vn.RESOLUTION,o.resolution),this.helper.setUniformFloatValue(Vn.ZOOM,o.zoom),this.helper.drawElements(0,this.indices_.getSize())}}this.helper.finalizeDraw(r,this.dispatchPreComposeEvent,this.dispatchPostComposeEvent);for(var br=this.helper.getCanvas(),Pr=this.tileTextureCache_;Pr.canExpireCache();){var Z=Pr.pop();Z.dispose()}var Le=function(Je,tt){a.expireCache(tt.viewState.projection,rqr)};return r.postRenderFunctions.push(Le),this.postRender(n,r),br},t.prototype.getData=function(r){var n=this.helper.getGL();if(!n)return null;var o=this.frameState_;if(!o)return null;var i=this.getLayer(),a=H0(o.pixelToCoordinateTransform,r.slice()),c=o.viewState,h=i.getExtent();if(h&&!Kg(I0(h,c.projection),a))return null;var m=i.getSources(KP([a]),c.resolution),y,w,E;for(y=m.length-1;y>=0;--y)if(w=m[y],w.getState()==="ready"){if(E=w.getTileGridForProjection(c.projection),w.getWrapX())break;var A=E.getExtent();if(!A||Kg(A,a))break}if(y<0)return null;for(var P=this.tileTextureCache_,j=E.getZForResolution(c.resolution);j>=E.getMinZoom();--j){var D=E.getTileCoordForCoordAndZ(a,j),L=Uce(w,D);if(P.containsKey(L)){var z=P.get(L);if(z.loaded){var B=E.getOrigin(j),G=dl(E.getTileSize(j)),Z=E.getResolution(j),K=(a[0]-B[0])/Z-D[1]*G[0],te=(B[1]-a[1])/Z-D[2]*G[1];return z.getPixelData(K,te)}}}return null},t.prototype.findAltTiles_=function(r,n,o,i){var a=r.getTileRangeForTileCoordAndZ(n,o,this.tempTileRange_);if(!a)return!1;for(var c=!0,h=this.tileTextureCache_,m=this.getLayer().getRenderSource(),y=a.minX;y<=a.maxX;++y)for(var w=a.minY;w<=a.maxY;++w){var E=Uce(m,[o,y,w]),A=!1;if(h.containsKey(E)){var P=h.get(E);P.loaded&&(jut(i,P,o),A=!0)}A||(c=!1)}return c},t.prototype.removeHelper=function(){if(this.helper){var r=this.tileTextureCache_;r.forEach(function(n){return n.dispose()}),r.clear()}e.prototype.removeHelper.call(this)},t.prototype.disposeInternal=function(){var r=this.helper;if(r){var n=r.getGL();n.deleteProgram(this.program_),delete this.program_,r.deleteBuffer(this.indices_)}e.prototype.disposeInternal.call(this),delete this.indices_,delete this.tileTextureCache_,delete this.frameState_},t}(Nut),qut=oqr;u();u();var iqr=function(){function e(t,r){this.name=t,this.data=r,this.texture_=null}return e.prototype.getTexture=function(t){if(!this.texture_){var r=t.createTexture();t.bindTexture(t.TEXTURE_2D,r),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_WRAP_S,t.CLAMP_TO_EDGE),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_WRAP_T,t.CLAMP_TO_EDGE),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_MIN_FILTER,t.NEAREST),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_MAG_FILTER,t.NEAREST),t.texImage2D(t.TEXTURE_2D,0,t.RGBA,this.data.length/4,1,0,t.RGBA,t.UNSIGNED_BYTE,this.data),this.texture_=r}return this.texture_},e}(),zut=iqr;var Mr={NUMBER:1,STRING:2,COLOR:4,BOOLEAN:8,NUMBER_ARRAY:16,ANY:31,NONE:0},oo={};function Im(e){if(typeof e=="number")return Mr.NUMBER;if(typeof e=="boolean")return Mr.BOOLEAN;if(typeof e=="string")return qlt(e)?Mr.COLOR|Mr.STRING:Mr.STRING;if(!Array.isArray(e))throw new Error("Unhandled value type: ".concat(JSON.stringify(e)));var t=e,r=t.every(function(o){return typeof o=="number"});if(r)return t.length===3||t.length===4?Mr.COLOR|Mr.NUMBER_ARRAY:Mr.NUMBER_ARRAY;if(typeof t[0]!="string")throw new Error("Expected an expression operator but received: ".concat(JSON.stringify(t)));var n=oo[t[0]];if(n===void 0)throw new Error("Unrecognized expression operator: ".concat(JSON.stringify(t)));return n.getReturnType(t.slice(1))}function aqr(e){return fF(e)%1===0}function W9(e){var t=e.toString();return t.indexOf(".")===-1?t+".0":t}function Fut(e){if(e.length<2||e.length>4)throw new Error("`formatArray` can only output `vec2`, `vec3` or `vec4` arrays.");return"vec".concat(e.length,"(").concat(e.map(W9).join(", "),")")}function sqr(e){var t=jlt(e).slice();return t.length<4&&t.push(1),Fut(t.map(function(r,n){return n<3?r/255:r}))}function Vce(e,t){return e.stringLiteralsMap[t]===void 0&&(e.stringLiteralsMap[t]=Object.keys(e.stringLiteralsMap).length),e.stringLiteralsMap[t]}function lqr(e,t){return W9(Vce(e,t))}function Fr(e,t,r){if(Array.isArray(t)&&typeof t[0]=="string"){var n=oo[t[0]];if(n===void 0)throw new Error("Unrecognized expression operator: ".concat(JSON.stringify(t)));return n.toGlsl(e,t.slice(1),r)}var o=Im(t);if((o&Mr.NUMBER)>0)return W9(t);if((o&Mr.BOOLEAN)>0)return t.toString();if((o&Mr.STRING)>0&&(r===void 0||r==Mr.STRING))return lqr(e,t.toString());if((o&Mr.COLOR)>0&&(r===void 0||r==Mr.COLOR))return sqr(t);if((o&Mr.NUMBER_ARRAY)>0)return Fut(t);throw new Error("Unexpected expression ".concat(t," (expected type ").concat(r,")"))}function Uut(e){if(!(Im(e)&Mr.NUMBER))throw new Error("A numeric value was expected, got ".concat(JSON.stringify(e)," instead"))}function es(e){for(var t=0;t<e.length;t++)Uut(e[t])}function But(e){if(!(Im(e)&Mr.STRING))throw new Error("A string value was expected, got ".concat(JSON.stringify(e)," instead"))}function Gce(e){if(!(Im(e)&Mr.BOOLEAN))throw new Error("A boolean value was expected, got ".concat(JSON.stringify(e)," instead"))}function Wi(e,t){if(e.length!==t)throw new Error("Exactly ".concat(t," arguments were expected, got ").concat(e.length," instead"))}function J0(e,t){if(e.length<t)throw new Error("At least ".concat(t," arguments were expected, got ").concat(e.length," instead"))}function Y9(e,t){if(e.length>t)throw new Error("At most ".concat(t," arguments were expected, got ").concat(e.length," instead"))}function Vut(e){if(e.length%2!==0)throw new Error("An even amount of arguments was expected, got ".concat(e," instead"))}function uqr(e){if(e.length%2===0)throw new Error("An odd amount of arguments was expected, got ".concat(e," instead"))}function Hce(e,t){if(!aqr(t))throw new Error("Could not infer only one type from the following expression: ".concat(JSON.stringify(e)))}oo.get={getReturnType:function(e){return Mr.ANY},toGlsl:function(e,t){Wi(t,1),But(t[0]);var r=t[0].toString();e.attributes.indexOf(r)===-1&&e.attributes.push(r);var n=e.inFragmentShader?"v_":"a_";return n+r}};function $ce(e){return"u_var_"+e}oo.var={getReturnType:function(e){return Mr.ANY},toGlsl:function(e,t){Wi(t,1),But(t[0]);var r=t[0].toString();return e.variables.indexOf(r)===-1&&e.variables.push(r),$ce(r)}};var Wce="u_paletteTextures";oo.palette={getReturnType:function(e){return Mr.COLOR},toGlsl:function(e,t){Wi(t,2),Uut(t[0]);var r=Fr(e,t[0]),n=t[1];if(!Array.isArray(n))throw new Error("The second argument of palette must be an array");for(var o=n.length,i=new Uint8Array(o*4),a=0;a<o;a++){var c=n[a],h=void 0;if(typeof c=="string")h=xce(c);else{if(!Array.isArray(c))throw new Error("The second argument of palette must be an array of strings or colors");var m=c.length;if(m===4)h=c;else{if(m!==3)throw new Error("Expected palette color to have 3 or 4 values, got ".concat(m));h=[c[0],c[1],c[2],1]}}var y=a*4;i[y]=h[0],i[y+1]=h[1],i[y+2]=h[2],i[y+3]=h[3]*255}e.paletteTextures||(e.paletteTextures=[]);var w="".concat(Wce,"[").concat(e.paletteTextures.length,"]"),E=new zut(w,i);return e.paletteTextures.push(E),"texture2D(".concat(w,", vec2((").concat(r," + 0.5) / ").concat(o,".0, 0.5))")}};var Bce="getBandValue";oo.band={getReturnType:function(e){return Mr.NUMBER},toGlsl:function(e,t){J0(t,1),Y9(t,3);var r=t[0];if(!(Bce in e.functions)){for(var n="",o=e.bandCount||1,i=0;i<o;i++){var a=Math.floor(i/4),c=i%4;c===o-1&&c===1&&(c=3);var h="".concat(Vn.TILE_TEXTURE_ARRAY,"[").concat(a,"]");n+=`
          if (band == `.concat(i+1,`.0) {
            return texture2D(`).concat(h,", v_textureCoord + vec2(dx, dy))[").concat(c,`];
          }
        `)}e.functions[Bce]=`
        float getBandValue(float band, float xOffset, float yOffset) {
          float dx = xOffset / `.concat(Vn.TEXTURE_PIXEL_WIDTH,`;
          float dy = yOffset / `).concat(Vn.TEXTURE_PIXEL_HEIGHT,`;
          `).concat(n,`
        }
      `)}var m=Fr(e,r),y=Fr(e,t[1]||0),w=Fr(e,t[2]||0);return"".concat(Bce,"(").concat(m,", ").concat(y,", ").concat(w,")")}};oo.time={getReturnType:function(e){return Mr.NUMBER},toGlsl:function(e,t){return Wi(t,0),"u_time"}};oo.zoom={getReturnType:function(e){return Mr.NUMBER},toGlsl:function(e,t){return Wi(t,0),"u_zoom"}};oo.resolution={getReturnType:function(e){return Mr.NUMBER},toGlsl:function(e,t){return Wi(t,0),"u_resolution"}};oo["*"]={getReturnType:function(e){return Mr.NUMBER},toGlsl:function(e,t){return Wi(t,2),es(t),"(".concat(Fr(e,t[0])," * ").concat(Fr(e,t[1]),")")}};oo["/"]={getReturnType:function(e){return Mr.NUMBER},toGlsl:function(e,t){return Wi(t,2),es(t),"(".concat(Fr(e,t[0])," / ").concat(Fr(e,t[1]),")")}};oo["+"]={getReturnType:function(e){return Mr.NUMBER},toGlsl:function(e,t){return Wi(t,2),es(t),"(".concat(Fr(e,t[0])," + ").concat(Fr(e,t[1]),")")}};oo["-"]={getReturnType:function(e){return Mr.NUMBER},toGlsl:function(e,t){return Wi(t,2),es(t),"(".concat(Fr(e,t[0])," - ").concat(Fr(e,t[1]),")")}};oo.clamp={getReturnType:function(e){return Mr.NUMBER},toGlsl:function(e,t){Wi(t,3),es(t);var r=Fr(e,t[1]),n=Fr(e,t[2]);return"clamp(".concat(Fr(e,t[0]),", ").concat(r,", ").concat(n,")")}};oo["%"]={getReturnType:function(e){return Mr.NUMBER},toGlsl:function(e,t){return Wi(t,2),es(t),"mod(".concat(Fr(e,t[0]),", ").concat(Fr(e,t[1]),")")}};oo["^"]={getReturnType:function(e){return Mr.NUMBER},toGlsl:function(e,t){return Wi(t,2),es(t),"pow(".concat(Fr(e,t[0]),", ").concat(Fr(e,t[1]),")")}};oo.abs={getReturnType:function(e){return Mr.NUMBER},toGlsl:function(e,t){return Wi(t,1),es(t),"abs(".concat(Fr(e,t[0]),")")}};oo.floor={getReturnType:function(e){return Mr.NUMBER},toGlsl:function(e,t){return Wi(t,1),es(t),"floor(".concat(Fr(e,t[0]),")")}};oo.round={getReturnType:function(e){return Mr.NUMBER},toGlsl:function(e,t){return Wi(t,1),es(t),"floor(".concat(Fr(e,t[0])," + 0.5)")}};oo.ceil={getReturnType:function(e){return Mr.NUMBER},toGlsl:function(e,t){return Wi(t,1),es(t),"ceil(".concat(Fr(e,t[0]),")")}};oo.sin={getReturnType:function(e){return Mr.NUMBER},toGlsl:function(e,t){return Wi(t,1),es(t),"sin(".concat(Fr(e,t[0]),")")}};oo.cos={getReturnType:function(e){return Mr.NUMBER},toGlsl:function(e,t){return Wi(t,1),es(t),"cos(".concat(Fr(e,t[0]),")")}};oo.atan={getReturnType:function(e){return Mr.NUMBER},toGlsl:function(e,t){return J0(t,1),Y9(t,2),es(t),t.length===2?"atan(".concat(Fr(e,t[0]),", ").concat(Fr(e,t[1]),")"):"atan(".concat(Fr(e,t[0]),")")}};oo[">"]={getReturnType:function(e){return Mr.BOOLEAN},toGlsl:function(e,t){return Wi(t,2),es(t),"(".concat(Fr(e,t[0])," > ").concat(Fr(e,t[1]),")")}};oo[">="]={getReturnType:function(e){return Mr.BOOLEAN},toGlsl:function(e,t){return Wi(t,2),es(t),"(".concat(Fr(e,t[0])," >= ").concat(Fr(e,t[1]),")")}};oo["<"]={getReturnType:function(e){return Mr.BOOLEAN},toGlsl:function(e,t){return Wi(t,2),es(t),"(".concat(Fr(e,t[0])," < ").concat(Fr(e,t[1]),")")}};oo["<="]={getReturnType:function(e){return Mr.BOOLEAN},toGlsl:function(e,t){return Wi(t,2),es(t),"(".concat(Fr(e,t[0])," <= ").concat(Fr(e,t[1]),")")}};function Gut(e){return{getReturnType:function(t){return Mr.BOOLEAN},toGlsl:function(t,r){Wi(r,2);for(var n=Mr.ANY,o=0;o<r.length;o++)n&=Im(r[o]);if(n===Mr.NONE)throw new Error("All arguments should be of compatible type, got ".concat(JSON.stringify(r)," instead"));return n&=~Mr.COLOR,"(".concat(Fr(t,r[0],n)," ").concat(e," ").concat(Fr(t,r[1],n),")")}}}oo["=="]=Gut("==");oo["!="]=Gut("!=");oo["!"]={getReturnType:function(e){return Mr.BOOLEAN},toGlsl:function(e,t){return Wi(t,1),Gce(t[0]),"(!".concat(Fr(e,t[0]),")")}};function Hut(e){return{getReturnType:function(t){return Mr.BOOLEAN},toGlsl:function(t,r){J0(r,2);for(var n=0;n<r.length;n++)Gce(r[n]);var o="";return o=r.map(function(i){return Fr(t,i)}).join(" ".concat(e," ")),o="(".concat(o,")"),o}}}oo.all=Hut("&&");oo.any=Hut("||");oo.between={getReturnType:function(e){return Mr.BOOLEAN},toGlsl:function(e,t){Wi(t,3),es(t);var r=Fr(e,t[1]),n=Fr(e,t[2]),o=Fr(e,t[0]);return"(".concat(o," >= ").concat(r," && ").concat(o," <= ").concat(n,")")}};oo.array={getReturnType:function(e){return Mr.NUMBER_ARRAY},toGlsl:function(e,t){J0(t,2),Y9(t,4),es(t);var r=t.map(function(n){return Fr(e,n,Mr.NUMBER)});return"vec".concat(t.length,"(").concat(r.join(", "),")")}};oo.color={getReturnType:function(e){return Mr.COLOR},toGlsl:function(e,t){J0(t,3),Y9(t,4),es(t);var r=t;t.length===3&&r.push(1);var n=t.map(function(o,i){return Fr(e,o,Mr.NUMBER)+(i<3?" / 255.0":"")});return"vec".concat(t.length,"(").concat(n.join(", "),")")}};oo.interpolate={getReturnType:function(e){for(var t=Mr.COLOR|Mr.NUMBER,r=3;r<e.length;r+=2)t=t&Im(e[r]);return t},toGlsl:function(e,t,r){Vut(t),J0(t,6);var n=t[0],o;switch(n[0]){case"linear":o=1;break;case"exponential":o=n[1];break;default:o=null}if(!o)throw new Error("Invalid interpolation type for \"interpolate\" operator, received: ".concat(JSON.stringify(n)));var i=r!==void 0?r:Mr.ANY,a=oo.interpolate.getReturnType(t)&i;Hce(t,a);for(var c=Fr(e,t[1]),h=W9(o),m="",y=2;y<t.length-2;y+=2){var w=Fr(e,t[y]),E=m||Fr(e,t[y+1],a),A=Fr(e,t[y+2]),P=Fr(e,t[y+3],a);m="mix(".concat(E,", ").concat(P,", pow(clamp((").concat(c," - ").concat(w,") / (").concat(A," - ").concat(w,"), 0.0, 1.0), ").concat(h,"))")}return m}};oo.match={getReturnType:function(e){for(var t=Mr.ANY,r=2;r<e.length;r+=2)t=t&Im(e[r]);return t=t&Im(e[e.length-1]),t},toGlsl:function(e,t,r){Vut(t),J0(t,4);var n=r!==void 0?r:Mr.ANY,o=oo.match.getReturnType(t)&n;Hce(t,o);for(var i=Fr(e,t[0]),a=Fr(e,t[t.length-1],o),c=null,h=t.length-3;h>=1;h-=2){var m=Fr(e,t[h]),y=Fr(e,t[h+1],o);c="(".concat(i," == ").concat(m," ? ").concat(y," : ").concat(c||a,")")}return c}};oo.case={getReturnType:function(e){for(var t=Mr.ANY,r=1;r<e.length;r+=2)t=t&Im(e[r]);return t=t&Im(e[e.length-1]),t},toGlsl:function(e,t,r){uqr(t),J0(t,3);var n=r!==void 0?r:Mr.ANY,o=oo.case.getReturnType(t)&n;Hce(t,o);for(var i=0;i<t.length-1;i+=2)Gce(t[i]);for(var a=Fr(e,t[t.length-1],o),c=null,i=t.length-3;i>=0;i-=2){var h=Fr(e,t[i]),m=Fr(e,t[i+1],o);c="(".concat(h," ? ").concat(m," : ").concat(c||a,")")}return c}};var cqr=function(){var e=function(t,r){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,o){n.__proto__=o}||function(n,o){for(var i in o)Object.prototype.hasOwnProperty.call(o,i)&&(n[i]=o[i])},e(t,r)};return function(t,r){if(typeof r!="function"&&r!==null)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");e(t,r);function n(){this.constructor=t}t.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}();function $ut(e,t){var r=`
    attribute vec2 `.concat(dN.TEXTURE_COORD,`;
    uniform mat4 `).concat(Vn.TILE_TRANSFORM,`;
    uniform float `).concat(Vn.TEXTURE_PIXEL_WIDTH,`;
    uniform float `).concat(Vn.TEXTURE_PIXEL_HEIGHT,`;
    uniform float `).concat(Vn.TEXTURE_RESOLUTION,`;
    uniform float `).concat(Vn.TEXTURE_ORIGIN_X,`;
    uniform float `).concat(Vn.TEXTURE_ORIGIN_Y,`;
    uniform float `).concat(Vn.DEPTH,`;

    varying vec2 v_textureCoord;
    varying vec2 v_mapCoord;

    void main() {
      v_textureCoord = `).concat(dN.TEXTURE_COORD,`;
      v_mapCoord = vec2(
        `).concat(Vn.TEXTURE_ORIGIN_X," + ").concat(Vn.TEXTURE_RESOLUTION," * ").concat(Vn.TEXTURE_PIXEL_WIDTH,` * v_textureCoord[0],
        `).concat(Vn.TEXTURE_ORIGIN_Y," - ").concat(Vn.TEXTURE_RESOLUTION," * ").concat(Vn.TEXTURE_PIXEL_HEIGHT,` * v_textureCoord[1]
      );
      gl_Position = `).concat(Vn.TILE_TRANSFORM," * vec4(").concat(dN.TEXTURE_COORD,", ").concat(Vn.DEPTH,`, 1.0);
    }
  `),n={inFragmentShader:!0,variables:[],attributes:[],stringLiteralsMap:{},functions:{},bandCount:t},o=[];if(e.color!==void 0){var i=Fr(n,e.color,Mr.COLOR);o.push("color = ".concat(i,";"))}if(e.contrast!==void 0){var a=Fr(n,e.contrast,Mr.NUMBER);o.push("color.rgb = clamp((".concat(a," + 1.0) * color.rgb - (").concat(a," / 2.0), vec3(0.0, 0.0, 0.0), vec3(1.0, 1.0, 1.0));"))}if(e.exposure!==void 0){var c=Fr(n,e.exposure,Mr.NUMBER);o.push("color.rgb = clamp((".concat(c," + 1.0) * color.rgb, vec3(0.0, 0.0, 0.0), vec3(1.0, 1.0, 1.0));"))}if(e.saturation!==void 0){var h=Fr(n,e.saturation,Mr.NUMBER);o.push(`
      float saturation = `.concat(h,` + 1.0;
      float sr = (1.0 - saturation) * 0.2126;
      float sg = (1.0 - saturation) * 0.7152;
      float sb = (1.0 - saturation) * 0.0722;
      mat3 saturationMatrix = mat3(
        sr + saturation, sr, sr,
        sg, sg + saturation, sg,
        sb, sb, sb + saturation
      );
      color.rgb = clamp(saturationMatrix * color.rgb, vec3(0.0, 0.0, 0.0), vec3(1.0, 1.0, 1.0));
    `))}if(e.gamma!==void 0){var m=Fr(n,e.gamma,Mr.NUMBER);o.push("color.rgb = pow(color.rgb, vec3(1.0 / ".concat(m,"));"))}if(e.brightness!==void 0){var y=Fr(n,e.brightness,Mr.NUMBER);o.push("color.rgb = clamp(color.rgb + ".concat(y,", vec3(0.0, 0.0, 0.0), vec3(1.0, 1.0, 1.0));"))}var w={},E=n.variables.length;if(E>1&&!e.variables)throw new Error("Missing variables in style (expected ".concat(n.variables,")"));for(var A=function(B){var G=n.variables[B];if(!(G in e.variables))throw new Error("Missing '".concat(G,"' in style variables"));var Z=$ce(G);w[Z]=function(){var K=e.variables[G];return typeof K=="string"&&(K=Vce(n,K)),K!==void 0?K:-9999999}},P=0;P<E;++P)A(P);var j=Object.keys(w).map(function(B){return"uniform float ".concat(B,";")}),D=Math.ceil(t/4);j.push("uniform sampler2D ".concat(Vn.TILE_TEXTURE_ARRAY,"[").concat(D,"];")),n.paletteTextures&&j.push("uniform sampler2D ".concat(Wce,"[").concat(n.paletteTextures.length,"];"));var L=Object.keys(n.functions).map(function(B){return n.functions[B]}),z=`
    #ifdef GL_FRAGMENT_PRECISION_HIGH
    precision highp float;
    #else
    precision mediump float;
    #endif

    varying vec2 v_textureCoord;
    varying vec2 v_mapCoord;
    uniform vec4 `.concat(Vn.RENDER_EXTENT,`;
    uniform float `).concat(Vn.TRANSITION_ALPHA,`;
    uniform float `).concat(Vn.TEXTURE_PIXEL_WIDTH,`;
    uniform float `).concat(Vn.TEXTURE_PIXEL_HEIGHT,`;
    uniform float `).concat(Vn.RESOLUTION,`;
    uniform float `).concat(Vn.ZOOM,`;

    `).concat(j.join(`
`),`

    `).concat(L.join(`
`),`

    void main() {
      if (
        v_mapCoord[0] < `).concat(Vn.RENDER_EXTENT,`[0] ||
        v_mapCoord[1] < `).concat(Vn.RENDER_EXTENT,`[1] ||
        v_mapCoord[0] > `).concat(Vn.RENDER_EXTENT,`[2] ||
        v_mapCoord[1] > `).concat(Vn.RENDER_EXTENT,`[3]
      ) {
        discard;
      }

      vec4 color = texture2D(`).concat(Vn.TILE_TEXTURE_ARRAY,`[0],  v_textureCoord);

      `).concat(o.join(`
`),`

      if (color.a == 0.0) {
        discard;
      }

      gl_FragColor = color;
      gl_FragColor.rgb *= gl_FragColor.a;
      gl_FragColor *= `).concat(Vn.TRANSITION_ALPHA,`;
    }`);return{vertexShader:r,fragmentShader:z,uniforms:w,paletteTextures:n.paletteTextures}}var Wut=function(e){cqr(t,e);function t(r){var n=this,o=r?Mi({},r):{},i=o.style||{};delete o.style;var a=o.cacheSize;return delete o.cacheSize,n=e.call(this,o)||this,n.sources_=o.sources,n.renderedSource_=null,n.renderedResolution_=NaN,n.style_=i,n.cacheSize_=a,n.styleVariables_=n.style_.variables||{},n.addChangeListener(Oo.SOURCE,n.handleSourceUpdate_),n}return t.prototype.getSources=function(r,n){var o=this.getSource();return this.sources_?typeof this.sources_=="function"?this.sources_(r,n):this.sources_:o?[o]:[]},t.prototype.getRenderSource=function(){return this.renderedSource_||this.getSource()},t.prototype.getSourceState=function(){var r=this.getRenderSource();return r?r.getState():"undefined"},t.prototype.handleSourceUpdate_=function(){this.getSource()&&this.setStyle(this.style_)},t.prototype.getSourceBandCount_=function(){var r=Number.MAX_SAFE_INTEGER,n=this.getSources([-r,-r,r,r],r);return n&&n.length&&"bandCount"in n[0]?n[0].bandCount:4},t.prototype.createRenderer=function(){var r=$ut(this.style_,this.getSourceBandCount_());return new qut(this,{vertexShader:r.vertexShader,fragmentShader:r.fragmentShader,uniforms:r.uniforms,cacheSize:this.cacheSize_,paletteTextures:r.paletteTextures})},t.prototype.renderSources=function(r,n){for(var o=this.getRenderer(),i,a=0,c=n.length;a<c;++a)this.renderedSource_=n[a],o.prepareFrame(r)&&(i=o.renderFrame(r));return i},t.prototype.render=function(r,n){var o=this;this.rendered=!0;for(var i=r.viewState,a=this.getSources(r.extent,i.resolution),c=!0,h=function(A,P){var j=a[A],D=j.getState();if(D=="loading"){var L=function(){j.getState()=="ready"&&(j.removeEventListener("change",L),o.changed())};j.addEventListener("change",L)}c=c&&D=="ready"},m=0,y=a.length;m<y;++m)h(m,y);var w=this.renderSources(r,a);if(this.getRenderer().renderComplete&&c)return this.renderedResolution_=i.resolution,w;if(this.renderedResolution_>.5*i.resolution){var E=this.getSources(r.extent,this.renderedResolution_).filter(function(A){return!a.includes(A)});if(E.length>0)return this.renderSources(r,E)}return w},t.prototype.setStyle=function(r){this.styleVariables_=r.variables||{},this.style_=r;var n=$ut(this.style_,this.getSourceBandCount_()),o=this.getRenderer();o.reset({vertexShader:n.vertexShader,fragmentShader:n.fragmentShader,uniforms:n.uniforms,paletteTextures:n.paletteTextures}),this.changed()},t.prototype.updateStyleVariables=function(r){Mi(this.styleVariables_,r),this.changed()},t}(cut);Wut.prototype.dispose;var Yut=Wut;u();u();var pqr=[0,0,0],Q0=5,fqr=function(){function e(t){this.minZoom=t.minZoom!==void 0?t.minZoom:0,this.resolutions_=t.resolutions,zn(dst(this.resolutions_,function(a,c){return c-a},!0),17);var r;if(!t.origins){for(var n=0,o=this.resolutions_.length-1;n<o;++n)if(!r)r=this.resolutions_[n]/this.resolutions_[n+1];else if(this.resolutions_[n]/this.resolutions_[n+1]!==r){r=void 0;break}}this.zoomFactor_=r,this.maxZoom=this.resolutions_.length-1,this.origin_=t.origin!==void 0?t.origin:null,this.origins_=null,t.origins!==void 0&&(this.origins_=t.origins,zn(this.origins_.length==this.resolutions_.length,20));var i=t.extent;i!==void 0&&!this.origin_&&!this.origins_&&(this.origin_=S0(i)),zn(!this.origin_&&this.origins_||this.origin_&&!this.origins_,18),this.tileSizes_=null,t.tileSizes!==void 0&&(this.tileSizes_=t.tileSizes,zn(this.tileSizes_.length==this.resolutions_.length,19)),this.tileSize_=t.tileSize!==void 0?t.tileSize:this.tileSizes_?null:K0,zn(!this.tileSize_&&this.tileSizes_||this.tileSize_&&!this.tileSizes_,22),this.extent_=i!==void 0?i:null,this.fullTileRanges_=null,this.tmpSize_=[0,0],this.tmpExtent_=[0,0,0,0],t.sizes!==void 0?this.fullTileRanges_=t.sizes.map(function(a,c){var h=new B9(Math.min(0,a[0]),Math.max(a[0]-1,-1),Math.min(0,a[1]),Math.max(a[1]-1,-1));if(i){var m=this.getTileRangeForExtentAndZ(i,c);h.minX=Math.max(m.minX,h.minX),h.maxX=Math.min(m.maxX,h.maxX),h.minY=Math.max(m.minY,h.minY),h.maxY=Math.min(m.maxY,h.maxY)}return h},this):i&&this.calculateTileRanges_(i)}return e.prototype.forEachTileCoord=function(t,r,n){for(var o=this.getTileRangeForExtentAndZ(t,r),i=o.minX,a=o.maxX;i<=a;++i)for(var c=o.minY,h=o.maxY;c<=h;++c)n([r,i,c])},e.prototype.forEachTileCoordParentTileRange=function(t,r,n,o){var i,a,c,h=null,m=t[0]-1;for(this.zoomFactor_===2?(a=t[1],c=t[2]):h=this.getTileCoordExtent(t,o);m>=this.minZoom;){if(this.zoomFactor_===2?(a=Math.floor(a/2),c=Math.floor(c/2),i=Lb(a,a,c,c,n)):i=this.getTileRangeForExtentAndZ(h,m,n),r(m,i))return!0;--m}return!1},e.prototype.getExtent=function(){return this.extent_},e.prototype.getMaxZoom=function(){return this.maxZoom},e.prototype.getMinZoom=function(){return this.minZoom},e.prototype.getOrigin=function(t){return this.origin_?this.origin_:this.origins_[t]},e.prototype.getResolution=function(t){return this.resolutions_[t]},e.prototype.getResolutions=function(){return this.resolutions_},e.prototype.getTileCoordChildTileRange=function(t,r,n){if(t[0]<this.maxZoom){if(this.zoomFactor_===2){var o=t[1]*2,i=t[2]*2;return Lb(o,o+1,i,i+1,r)}var a=this.getTileCoordExtent(t,n||this.tmpExtent_);return this.getTileRangeForExtentAndZ(a,t[0]+1,r)}return null},e.prototype.getTileRangeForTileCoordAndZ=function(t,r,n){if(r>this.maxZoom||r<this.minZoom)return null;var o=t[0],i=t[1],a=t[2];if(r===o)return Lb(i,a,i,a,n);if(this.zoomFactor_){var c=Math.pow(this.zoomFactor_,r-o),h=Math.floor(i*c),m=Math.floor(a*c);if(r<o)return Lb(h,h,m,m,n);var y=Math.floor(c*(i+1))-1,w=Math.floor(c*(a+1))-1;return Lb(h,y,m,w,n)}var E=this.getTileCoordExtent(t,this.tmpExtent_);return this.getTileRangeForExtentAndZ(E,r,n)},e.prototype.getTileRangeExtent=function(t,r,n){var o=this.getOrigin(t),i=this.getResolution(t),a=dl(this.getTileSize(t),this.tmpSize_),c=o[0]+r.minX*a[0]*i,h=o[0]+(r.maxX+1)*a[0]*i,m=o[1]+r.minY*a[1]*i,y=o[1]+(r.maxY+1)*a[1]*i;return Xg(c,m,h,y,n)},e.prototype.getTileRangeForExtentAndZ=function(t,r,n){var o=pqr;this.getTileCoordForXYAndZ_(t[0],t[3],r,!1,o);var i=o[1],a=o[2];return this.getTileCoordForXYAndZ_(t[2],t[1],r,!0,o),Lb(i,o[1],a,o[2],n)},e.prototype.getTileCoordCenter=function(t){var r=this.getOrigin(t[0]),n=this.getResolution(t[0]),o=dl(this.getTileSize(t[0]),this.tmpSize_);return[r[0]+(t[1]+.5)*o[0]*n,r[1]-(t[2]+.5)*o[1]*n]},e.prototype.getTileCoordExtent=function(t,r){var n=this.getOrigin(t[0]),o=this.getResolution(t[0]),i=dl(this.getTileSize(t[0]),this.tmpSize_),a=n[0]+t[1]*i[0]*o,c=n[1]-(t[2]+1)*i[1]*o,h=a+i[0]*o,m=c+i[1]*o;return Xg(a,c,h,m,r)},e.prototype.getTileCoordForCoordAndResolution=function(t,r,n){return this.getTileCoordForXYAndResolution_(t[0],t[1],r,!1,n)},e.prototype.getTileCoordForXYAndResolution_=function(t,r,n,o,i){var a=this.getZForResolution(n),c=n/this.getResolution(a),h=this.getOrigin(a),m=dl(this.getTileSize(a),this.tmpSize_),y=c*(t-h[0])/n/m[0],w=c*(h[1]-r)/n/m[1];return o?(y=WP(y,Q0)-1,w=WP(w,Q0)-1):(y=$P(y,Q0),w=$P(w,Q0)),s2(a,y,w,i)},e.prototype.getTileCoordForXYAndZ_=function(t,r,n,o,i){var a=this.getOrigin(n),c=this.getResolution(n),h=dl(this.getTileSize(n),this.tmpSize_),m=(t-a[0])/c/h[0],y=(a[1]-r)/c/h[1];return o?(m=WP(m,Q0)-1,y=WP(y,Q0)-1):(m=$P(m,Q0),y=$P(y,Q0)),s2(n,m,y,i)},e.prototype.getTileCoordForCoordAndZ=function(t,r,n){return this.getTileCoordForXYAndZ_(t[0],t[1],r,!1,n)},e.prototype.getTileCoordResolution=function(t){return this.resolutions_[t[0]]},e.prototype.getTileSize=function(t){return this.tileSize_?this.tileSize_:this.tileSizes_[t]},e.prototype.getFullTileRange=function(t){return this.fullTileRanges_?this.fullTileRanges_[t]:this.extent_?this.getTileRangeForExtentAndZ(this.extent_,t):null},e.prototype.getZForResolution=function(t,r){var n=HT(this.resolutions_,t,r||0);return Li(n,this.minZoom,this.maxZoom)},e.prototype.tileCoordIntersectsViewport=function(t,r){return dce(r,0,r.length,2,this.getTileCoordExtent(t))},e.prototype.calculateTileRanges_=function(t){for(var r=this.resolutions_.length,n=new Array(r),o=this.minZoom;o<r;++o)n[o]=this.getTileRangeForExtentAndZ(t,o);this.fullTileRanges_=n},e}(),Z9=fqr;u();u();var dqr=function(){var e=function(t,r){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,o){n.__proto__=o}||function(n,o){for(var i in o)Object.prototype.hasOwnProperty.call(o,i)&&(n[i]=o[i])},e(t,r)};return function(t,r){if(typeof r!="function"&&r!==null)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");e(t,r);function n(){this.constructor=t}t.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),hqr=function(e){dqr(t,e);function t(){return e!==null&&e.apply(this,arguments)||this}return t.prototype.expireCache=function(r){for(;this.canExpireCache();){var n=this.peekLast();if(n.getKey()in r)break;this.pop().release()}},t.prototype.pruneExceptNewestZ=function(){if(this.getCount()!==0){var r=this.peekFirstKey(),n=Lut(r),o=n[0];this.forEach(function(i){i.tileCoord[0]!==o&&(this.remove(X0(i.tileCoord)),i.release())}.bind(this))}},t}(U9),K9=hqr;u();u();var X9={TILELOADSTART:"tileloadstart",TILELOADEND:"tileloadend",TILELOADERROR:"tileloaderror"};u();u();function J9(e){var t=e.getDefaultTileGrid();return t||(t=vqr(e),e.setDefaultTileGrid(t)),t}function Zut(e,t,r){var n=t[0],o=e.getTileCoordCenter(t),i=Kut(r);if(Kg(i,o))return t;var a=oa(i),c=Math.ceil((i[0]-o[0])/a);return o[0]+=a*c,e.getTileCoordForCoordAndZ(o,n)}function mqr(e,t,r,n){var o=n!==void 0?n:"top-left",i=gqr(e,t,r);return new Z9({extent:e,origin:met(e,o),resolutions:i,tileSize:r})}function gqr(e,t,r,n){for(var o=t!==void 0?t:Jlt,i=Bl(e),a=oa(e),c=dl(r!==void 0?r:K0),h=n>0?n:Math.max(a/c[0],i/c[1]),m=o+1,y=new Array(m),w=0;w<m;++w)y[w]=h/Math.pow(2,w);return y}function vqr(e,t,r,n){var o=Kut(e);return mqr(o,t,r,n)}function Kut(e){e=jc(e);var t=e.getExtent();if(!t){var r=180*kc[Rc.DEGREES]/e.getMetersPerUnit();t=Xg(-r,-r,r,r)}return t}var Xut=function(){var e=function(t,r){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,o){n.__proto__=o}||function(n,o){for(var i in o)Object.prototype.hasOwnProperty.call(o,i)&&(n[i]=o[i])},e(t,r)};return function(t,r){if(typeof r!="function"&&r!==null)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");e(t,r);function n(){this.constructor=t}t.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),yqr=function(e){Xut(t,e);function t(r){var n=e.call(this,{attributions:r.attributions,attributionsCollapsible:r.attributionsCollapsible,projection:r.projection,state:r.state,wrapX:r.wrapX,interpolate:r.interpolate})||this;n.on,n.once,n.un,n.opaque_=r.opaque!==void 0?r.opaque:!1,n.tilePixelRatio_=r.tilePixelRatio!==void 0?r.tilePixelRatio:1,n.tileGrid=r.tileGrid!==void 0?r.tileGrid:null;var o=[256,256];return n.tileGrid&&dl(n.tileGrid.getTileSize(n.tileGrid.getMinZoom()),o),n.tileCache=new K9(r.cacheSize||0),n.tmpSize=[0,0],n.key_=r.key||"",n.tileOptions={transition:r.transition,interpolate:r.interpolate},n.zDirection=r.zDirection?r.zDirection:0,n}return t.prototype.canExpireCache=function(){return this.tileCache.canExpireCache()},t.prototype.expireCache=function(r,n){var o=this.getTileCacheForProjection(r);o&&o.expireCache(n)},t.prototype.forEachLoadedTile=function(r,n,o,i){var a=this.getTileCacheForProjection(r);if(!a)return!1;for(var c=!0,h,m,y,w=o.minX;w<=o.maxX;++w)for(var E=o.minY;E<=o.maxY;++E)m=Rb(n,w,E),y=!1,a.containsKey(m)&&(h=a.get(m),y=h.getState()===Rr.LOADED,y&&(y=i(h)!==!1)),y||(c=!1);return c},t.prototype.getGutterForProjection=function(r){return 0},t.prototype.getKey=function(){return this.key_},t.prototype.setKey=function(r){this.key_!==r&&(this.key_=r,this.changed())},t.prototype.getOpaque=function(r){return this.opaque_},t.prototype.getResolutions=function(){return this.tileGrid?this.tileGrid.getResolutions():null},t.prototype.getTile=function(r,n,o,i,a){return Ao()},t.prototype.getTileGrid=function(){return this.tileGrid},t.prototype.getTileGridForProjection=function(r){return this.tileGrid?this.tileGrid:J9(r)},t.prototype.getTileCacheForProjection=function(r){var n=this.getProjection();return zn(n===null||T0(n,r),68),this.tileCache},t.prototype.getTilePixelRatio=function(r){return this.tilePixelRatio_},t.prototype.getTilePixelSize=function(r,n,o){var i=this.getTileGridForProjection(o),a=this.getTilePixelRatio(n),c=dl(i.getTileSize(r),this.tmpSize);return a==1?c:Plt(c,a,this.tmpSize)},t.prototype.getTileCoordForTileUrlFunction=function(r,n){var o=n!==void 0?n:this.getProjection(),i=this.getTileGridForProjection(o);return this.getWrapX()&&o.isGlobal()&&(r=Zut(i,r,o)),Rut(r,i)?r:null},t.prototype.clear=function(){this.tileCache.clear()},t.prototype.refresh=function(){this.clear(),e.prototype.refresh.call(this)},t.prototype.updateCacheSize=function(r,n){var o=this.getTileCacheForProjection(n);r>o.highWaterMark&&(o.highWaterMark=r)},t.prototype.useTile=function(r,n,o,i){},t}(Glt),Jut=function(e){Xut(t,e);function t(r,n){var o=e.call(this,r)||this;return o.tile=n,o}return t}(_u);var Qut=yqr;u();function _qr(e,t){var r=/\{z\}/g,n=/\{x\}/g,o=/\{y\}/g,i=/\{-y\}/g;return function(a,c,h){if(a)return e.replace(r,a[0].toString()).replace(n,a[1].toString()).replace(o,a[2].toString()).replace(i,function(){var m=a[0],y=t.getFullTileRange(m);zn(y,55);var w=y.getHeight()-a[2]-1;return w.toString()})}}function ect(e,t){for(var r=e.length,n=new Array(r),o=0;o<r;++o)n[o]=_qr(e[o],t);return Yce(n)}function Yce(e){return e.length===1?e[0]:function(t,r,n){if(t){var o=kut(t),i=Ud(o,e.length);return e[i](t,r,n)}else return}}function Q9(e){var t=[],r=/\{([a-z])-([a-z])\}/.exec(e);if(r){var n=r[1].charCodeAt(0),o=r[2].charCodeAt(0),i=void 0;for(i=n;i<=o;++i)t.push(e.replace(r[0],String.fromCharCode(i)));return t}if(r=/\{(\d+)-(\d+)\}/.exec(e),r){for(var a=parseInt(r[2],10),c=parseInt(r[1],10);c<=a;c++)t.push(e.replace(r[0],c.toString()));return t}return t.push(e),t}var bqr=function(){var e=function(t,r){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,o){n.__proto__=o}||function(n,o){for(var i in o)Object.prototype.hasOwnProperty.call(o,i)&&(n[i]=o[i])},e(t,r)};return function(t,r){if(typeof r!="function"&&r!==null)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");e(t,r);function n(){this.constructor=t}t.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),xqr=function(e){bqr(t,e);function t(r){var n=e.call(this,{attributions:r.attributions,cacheSize:r.cacheSize,opaque:r.opaque,projection:r.projection,state:r.state,tileGrid:r.tileGrid,tilePixelRatio:r.tilePixelRatio,wrapX:r.wrapX,transition:r.transition,interpolate:r.interpolate,key:r.key,attributionsCollapsible:r.attributionsCollapsible,zDirection:r.zDirection})||this;return n.generateTileUrlFunction_=n.tileUrlFunction===t.prototype.tileUrlFunction,n.tileLoadFunction=r.tileLoadFunction,r.tileUrlFunction&&(n.tileUrlFunction=r.tileUrlFunction),n.urls=null,r.urls?n.setUrls(r.urls):r.url&&n.setUrl(r.url),n.tileLoadingKeys_={},n}return t.prototype.getTileLoadFunction=function(){return this.tileLoadFunction},t.prototype.getTileUrlFunction=function(){return Object.getPrototypeOf(this).tileUrlFunction===this.tileUrlFunction?this.tileUrlFunction.bind(this):this.tileUrlFunction},t.prototype.getUrls=function(){return this.urls},t.prototype.handleTileChange=function(r){var n=r.target,o=Qa(n),i=n.getState(),a;i==Rr.LOADING?(this.tileLoadingKeys_[o]=!0,a=X9.TILELOADSTART):o in this.tileLoadingKeys_&&(delete this.tileLoadingKeys_[o],a=i==Rr.ERROR?X9.TILELOADERROR:i==Rr.LOADED?X9.TILELOADEND:void 0),a!=null&&this.dispatchEvent(new Jut(a,n))},t.prototype.setTileLoadFunction=function(r){this.tileCache.clear(),this.tileLoadFunction=r,this.changed()},t.prototype.setTileUrlFunction=function(r,n){this.tileUrlFunction=r,this.tileCache.pruneExceptNewestZ(),typeof n!="undefined"?this.setKey(n):this.changed()},t.prototype.setUrl=function(r){var n=Q9(r);this.urls=n,this.setUrls(n)},t.prototype.setUrls=function(r){this.urls=r;var n=r.join(`
`);this.generateTileUrlFunction_?this.setTileUrlFunction(ect(r,this.tileGrid),n):this.setKey(n)},t.prototype.tileUrlFunction=function(r,n,o){},t.prototype.useTile=function(r,n,o){var i=Rb(r,n,o);this.tileCache.containsKey(i)&&this.tileCache.get(i)},t}(Qut),tct=xqr;var wqr=function(){var e=function(t,r){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,o){n.__proto__=o}||function(n,o){for(var i in o)Object.prototype.hasOwnProperty.call(o,i)&&(n[i]=o[i])},e(t,r)};return function(t,r){if(typeof r!="function"&&r!==null)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");e(t,r);function n(){this.constructor=t}t.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),Eqr=function(e){wqr(t,e);function t(r){var n=this,o=r.imageSmoothing!==void 0?r.imageSmoothing:!0;return r.interpolate!==void 0&&(o=r.interpolate),n=e.call(this,{attributions:r.attributions,cacheSize:r.cacheSize,opaque:r.opaque,projection:r.projection,state:r.state,tileGrid:r.tileGrid,tileLoadFunction:r.tileLoadFunction?r.tileLoadFunction:Sqr,tilePixelRatio:r.tilePixelRatio,tileUrlFunction:r.tileUrlFunction,url:r.url,urls:r.urls,wrapX:r.wrapX,transition:r.transition,interpolate:o,key:r.key,attributionsCollapsible:r.attributionsCollapsible,zDirection:r.zDirection})||this,n.crossOrigin=r.crossOrigin!==void 0?r.crossOrigin:null,n.tileClass=r.tileClass!==void 0?r.tileClass:kb,n.tileCacheForProjection={},n.tileGridForProjection={},n.reprojectionErrorThreshold_=r.reprojectionErrorThreshold,n.renderReprojectionEdges_=!1,n}return t.prototype.canExpireCache=function(){if(!Tm)return e.prototype.canExpireCache.call(this);if(this.tileCache.canExpireCache())return!0;for(var r in this.tileCacheForProjection)if(this.tileCacheForProjection[r].canExpireCache())return!0;return!1},t.prototype.expireCache=function(r,n){if(!Tm){e.prototype.expireCache.call(this,r,n);return}var o=this.getTileCacheForProjection(r);this.tileCache.expireCache(this.tileCache==o?n:{});for(var i in this.tileCacheForProjection){var a=this.tileCacheForProjection[i];a.expireCache(a==o?n:{})}},t.prototype.getGutterForProjection=function(r){return Tm&&this.getProjection()&&r&&!T0(this.getProjection(),r)?0:this.getGutter()},t.prototype.getGutter=function(){return 0},t.prototype.getKey=function(){var r=e.prototype.getKey.call(this);return this.getInterpolate()||(r+=":disable-interpolation"),r},t.prototype.getOpaque=function(r){return Tm&&this.getProjection()&&r&&!T0(this.getProjection(),r)?!1:e.prototype.getOpaque.call(this,r)},t.prototype.getTileGridForProjection=function(r){if(!Tm)return e.prototype.getTileGridForProjection.call(this,r);var n=this.getProjection();if(this.tileGrid&&(!n||T0(n,r)))return this.tileGrid;var o=Qa(r);return o in this.tileGridForProjection||(this.tileGridForProjection[o]=J9(r)),this.tileGridForProjection[o]},t.prototype.getTileCacheForProjection=function(r){if(!Tm)return e.prototype.getTileCacheForProjection.call(this,r);var n=this.getProjection();if(!n||T0(n,r))return this.tileCache;var o=Qa(r);return o in this.tileCacheForProjection||(this.tileCacheForProjection[o]=new K9(this.tileCache.highWaterMark)),this.tileCacheForProjection[o]},t.prototype.createTile_=function(r,n,o,i,a,c){var h=[r,n,o],m=this.getTileCoordForTileUrlFunction(h,a),y=m?this.tileUrlFunction(m,i,a):void 0,w=new this.tileClass(h,y!==void 0?Rr.IDLE:Rr.EMPTY,y!==void 0?y:"",this.crossOrigin,this.tileLoadFunction,this.tileOptions);return w.key=c,w.addEventListener(kr.CHANGE,this.handleTileChange.bind(this)),w},t.prototype.getTile=function(r,n,o,i,a){var c=this.getProjection();if(!Tm||!c||!a||T0(c,a))return this.getTileInternal(r,n,o,i,c||a);var h=this.getTileCacheForProjection(a),m=[r,n,o],y=void 0,w=X0(m);h.containsKey(w)&&(y=h.get(w));var E=this.getKey();if(y&&y.key==E)return y;var A=this.getTileGridForProjection(c),P=this.getTileGridForProjection(a),j=this.getTileCoordForTileUrlFunction(m,a),D=new V9(c,A,a,P,m,j,this.getTilePixelRatio(i),this.getGutter(),function(L,z,B,G){return this.getTileInternal(L,z,B,G,c)}.bind(this),this.reprojectionErrorThreshold_,this.renderReprojectionEdges_,this.getInterpolate());return D.key=E,y?(D.interimTile=y,D.refreshInterimChain(),h.replace(w,D)):h.set(w,D),D},t.prototype.getTileInternal=function(r,n,o,i,a){var c=null,h=Rb(r,n,o),m=this.getKey();if(!this.tileCache.containsKey(h))c=this.createTile_(r,n,o,i,a,m),this.tileCache.set(h,c);else if(c=this.tileCache.get(h),c.key!=m){var y=c;c=this.createTile_(r,n,o,i,a,m),y.getState()==Rr.IDLE?c.interimTile=y.interimTile:c.interimTile=y,c.refreshInterimChain(),this.tileCache.replace(h,c)}return c},t.prototype.setRenderReprojectionEdges=function(r){if(!(!Tm||this.renderReprojectionEdges_==r)){this.renderReprojectionEdges_=r;for(var n in this.tileCacheForProjection)this.tileCacheForProjection[n].clear();this.changed()}},t.prototype.setTileGridForProjection=function(r,n){if(Tm){var o=jc(r);if(o){var i=Qa(o);i in this.tileGridForProjection||(this.tileGridForProjection[i]=n)}}},t}(tct);function Sqr(e,t){e.getImage().src=t}var rct=Eqr;var nct=function(){var e=function(t,r){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,o){n.__proto__=o}||function(n,o){for(var i in o)Object.prototype.hasOwnProperty.call(o,i)&&(n[i]=o[i])},e(t,r)};return function(t,r){if(typeof r!="function"&&r!==null)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");e(t,r);function n(){this.constructor=t}t.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),Zce={DEFAULT:"default",TRUNCATED:"truncated"},Tqr=function(e){nct(t,e);function t(r,n,o,i,a,c,h){var m=e.call(this,n,o,i,a,c,h)||this;return m.zoomifyImage_=null,m.tileSize_=r,m}return t.prototype.getImage=function(){if(this.zoomifyImage_)return this.zoomifyImage_;var r=e.prototype.getImage.call(this);if(this.state==Rr.LOADED){var n=this.tileSize_;if(r.width==n[0]&&r.height==n[1])return this.zoomifyImage_=r,r;var o=hv(n[0],n[1]);return o.drawImage(r,0,0),this.zoomifyImage_=o.canvas,o.canvas}else return r},t}(kb);var Iqr=function(e){nct(t,e);function t(r){var n=this,o=r,i=o.imageSmoothing!==void 0?o.imageSmoothing:!0;o.interpolate!==void 0&&(i=o.interpolate);var a=o.size,c=o.tierSizeCalculation!==void 0?o.tierSizeCalculation:Zce.DEFAULT,h=o.tilePixelRatio||1,m=a[0],y=a[1],w=[],E=o.tileSize||K0,A=E*h;switch(c){case Zce.DEFAULT:for(;m>A||y>A;)w.push([Math.ceil(m/A),Math.ceil(y/A)]),A+=A;break;case Zce.TRUNCATED:for(var P=m,j=y;P>A||j>A;)w.push([Math.ceil(P/A),Math.ceil(j/A)]),P>>=1,j>>=1;break;default:zn(!1,53);break}w.push([1,1]),w.reverse();for(var D=[h],L=[0],z=1,B=w.length;z<B;z++)D.push(h<<z),L.push(w[z-1][0]*w[z-1][1]+L[z-1]);D.reverse();var G=new Z9({tileSize:E,extent:o.extent||[0,-y,m,0],resolutions:D}),Z=o.url;Z&&Z.indexOf("{TileGroup}")==-1&&Z.indexOf("{tileIndex}")==-1&&(Z+="{TileGroup}/{z}-{x}-{y}.jpg");var K=Q9(Z),te=E*h;function se(Ce){return function(Ze,rt,ct){if(Ze){var qe=Ze[0],lt=Ze[1],_t=Ze[2],Tt=lt+_t*w[qe][0],et=(Tt+L[qe])/te|0,pt={z:qe,x:lt,y:_t,tileIndex:Tt,TileGroup:"TileGroup"+et};return Ce.replace(/\{(\w+?)\}/g,function(ot,$e){return pt[$e]})}else return}}var le=Yce(K.map(se)),pe=Tqr.bind(null,dl(E*h));n=e.call(this,{attributions:o.attributions,cacheSize:o.cacheSize,crossOrigin:o.crossOrigin,interpolate:i,projection:o.projection,tilePixelRatio:h,reprojectionErrorThreshold:o.reprojectionErrorThreshold,tileClass:pe,tileGrid:G,tileUrlFunction:le,transition:o.transition})||this,n.zDirection=o.zDirection;var me=G.getTileCoordForCoordAndResolution(Bd(G.getExtent()),D[D.length-1]),_e=le(me,1,null),de=new Image;return de.addEventListener("error",function(){te=E,this.changed()}.bind(n)),de.src=_e,n}return t}(rct),oct=Iqr;u();var Hc=ee(ke(),1),ict=ee(xa(),1),gv=ee(It(),1);var hN={brightness:0,contrast:0,saturation:0},eU=e=>{let{max:t=1,min:r=0,onChange:n=()=>console.warn("onChange is not implemented."),step:o=.01,type:i="",value:a=.5,tooltip:c}=e,h=m=>{n(i,m)};return Hc.default.createElement("div",{className:"filter-slider",title:c},Hc.default.createElement("span",{className:qt("slider-icon",i),title:c}),Hc.default.createElement("div",null,Hc.default.createElement(X7,{title:c,ariaLabelForHandle:c,max:t,min:r,onChange:h,step:o,value:a})),Hc.default.createElement("span",{className:"slider-tooltip",title:c},a))};eU.propTypes={max:gv.default.number,min:gv.default.number,onChange:gv.default.func,step:gv.default.number,tooltip:gv.default.string,type:gv.default.string,value:gv.default.number};var act=e=>{let{layer:t}=e,[r,n]=(0,Hc.useState)(Te({},hN)),o=(a,c)=>{let h=Object.assign({},r,{[a]:c});n(h),t.updateStyleVariables(h)},i=()=>{n(Te({},hN)),t.updateStyleVariables(Te({},hN))};return Hc.default.createElement("div",null,Hc.default.createElement(eU,{max:1,min:-1,onChange:o,step:.01,type:"contrast",value:r.contrast,tooltip:fe("control-imagemanipulation-contrast")}),Hc.default.createElement(eU,{max:1,min:-1,onChange:o,step:.01,type:"saturation",value:r.saturation,tooltip:fe("control-imagemanipulation-saturation")}),Hc.default.createElement(eU,{max:1,min:-1,onChange:o,step:.01,type:"brightness",value:r.brightness,tooltip:fe("control-imagemanipulation-brightness")}),Hc.default.createElement("button",{className:"btn-reset",title:fe("control-imagemanipulation-reset"),onClick:i},fe("control-imagemanipulation-reset")))};act.propTypes={layer:gv.default.object};var Kce=class extends Op{constructor(t){let r="ol-unselectable ol-control image-manipulation",n=document.createElement("div");n.className=r;let o=document.createElement("button");o.title=fe("control-imagemanipulation-open"),o.innerHTML="I",o.type="button",n.appendChild(o);let i=document.createElement("div");i.className="content-container",i.style.display="none",n.appendChild(i);let a=()=>{let c=i.style.display==="block";n.className=c?r:`${r} active`,i.style.display=c?"none":"block"};ict.default.render(Hc.default.createElement(act,{layer:t.layer}),i),o.addEventListener("click",a,!1),o.addEventListener("touchstart",a,!1),super({element:n,target:t.target})}},sct=Kce;function Mqr(e){return yt(this,null,function*(){try{let t=yield Za.get(e);if(t.status===200){let n=new DOMParser().parseFromString(t.data,"text/xml");return{width:parseInt(n.firstChild.attributes.WIDTH.value,0),height:parseInt(n.firstChild.attributes.HEIGHT.value,0),url:e.substring(0,e.lastIndexOf("/")+1)}}else throw new Error("Could not fetch ImageProperties.xml")}catch(t){console.error("Something went wrong while trying to fetch the ImageProperties.xml."),console.error(t)}})}var lct=e=>{let{className:t="",onLoad:r,urlImageProperties:n,withImageManipulation:o=!1}=e,i=(0,l2.useRef)(null);return(0,l2.useEffect)(()=>{yt(null,null,function*(){let h=yield Mqr(n),m=new oct({url:h.url,size:[h.width,h.height],crossOrigin:"anonymous",zDirection:-1}),y=m.getTileGrid().getExtent(),w=new Yut({style:{brightness:["var","brightness"],contrast:["var","contrast"],saturation:["var","saturation"],variables:Te({},hN)},source:m}),E=new Sm({resolutions:w.getSource().getTileGrid().getResolutions(),extent:y,constrainOnlyCenter:!0}),A=new uut({controls:[new vlt({tipLabel:fe("control-fullscreen-title")}),new F9({zoomInTipLabel:fe("control-zoom-in"),zoomOutTipLabel:fe("control-zoom-in")})],interactions:q9().extend([new k9]),layers:[w],target:i.current,view:E});E.fit(y,{padding:[50,50,50,50]});let P=A.getSize();A.addControl(new sut({tipLabel:fe("control-zoomtoextent-title"),extent:E.calculateExtent([P[0]+50,P[1]+50])})),o&&A.addControl(new sct({layer:w})),r&&r({layer:w,map:A,source:m,zoomifyProps:h})})},[n]),l2.default.createElement("div",{className:qt("vk-mapview-zoomify",t),ref:i})};lct.propTypes={className:mN.default.string,onLoad:mN.default.func,urlImageProperties:mN.default.string.isRequired,withImageManipulation:mN.default.bool};var uct=lct;var cct=uct;var pct=e=>{let{isOpen:t,onClose:r,map_id:n}=e,[o,i]=(0,co.useState)(null),a=()=>{i(null),r()};if((0,co.useEffect)(()=>{n!==void 0&&yt(null,null,function*(){let P=yield VS(n);i(P)})},[n,i]),o===null)return co.default.createElement("div",{className:"vkf-view-original-map container"});let c=o.online_resources,h=c.find(A=>A.type==="Permalink"),m=c.find(A=>A.type==="WMS"),y=c.find(A=>A.type==="WCS"),w=c.find(A=>A.type==="download"),E=o.type==="mosaic";return co.default.createElement(jf,{key:n,modalClassName:qt("vkf-modal-original-map",o.type),onClose:a,renderContent:()=>co.default.createElement("div",{className:"vkf-view-original-map"},co.default.createElement("div",{className:"title"},co.default.createElement("h1",null,o.title," ",co.default.createElement("small",null,"/ ",o.title_long)),co.default.createElement("div",{className:"header-functions"},!E&&co.default.createElement("a",{href:o.permalink,rel:"noreferrer",className:"btn btn-default",target:"_blank"},fe("originalview-link-slub-label")),w!==void 0&&co.default.createElement("a",{href:w.url,rel:"noreferrer",className:"btn btn-default btn-download",target:"_blank",title:fe("originalview-link-download-label")},fe("originalview-link-download-label")))),o.thumb_url!==void 0&&E&&co.default.createElement("div",null,co.default.createElement("img",{className:"thumbnail",height:200,width:200,src:o.thumb_url})),co.default.createElement("div",{className:"content-metadata"},co.default.createElement("dl",null,co.default.createElement("dt",null,fe("originalview-label-desc")),co.default.createElement("dd",null,o.description),co.default.createElement("dt",null,fe("originalview-label-identifier")),co.default.createElement("dd",null,n),co.default.createElement("dt",null,fe("originalview-label-scale")),co.default.createElement("dd",null,"1:",o.map_scale),h!==void 0&&co.default.createElement(co.default.Fragment,null,co.default.createElement("dt",null,"Permalink"),co.default.createElement("dd",null,co.default.createElement("a",{href:h.url,rel:"noreferrer",target:"_blank"},h.url))),(m!==void 0||y!==void 0)&&co.default.createElement(co.default.Fragment,null,co.default.createElement("dt",null,fe("originalview-label-services")),m!==void 0&&co.default.createElement("dd",null,co.default.createElement("a",{href:m.url,rel:"noreferrer",target:"_blank"},"WMS")),y!==void 0&&co.default.createElement("dd",null,co.default.createElement("a",{href:y.url,rel:"noreferrer",target:"_blank"},"WCS"))))),!E&&co.default.createElement("div",{className:"content-map"},co.default.createElement(cct,{urlImageProperties:o.zoomify_url,withImageManipulation:!0}))),isOpen:t,title:fe(E?"originalview-title-mosaic":"originalview-title")})};pct.propTypes={isOpen:tU.default.bool,onClose:tU.default.func,map_id:tU.default.string};var Cqr=()=>{let[e,t]=Io(Xq);return co.default.createElement(pct,{isOpen:e!==void 0,onClose:()=>t(void 0),map_id:e})},fct=Cqr;u();u();var zb=ee(ke(),1),dU=ee(It(),1);u();var Yi=ee(ke(),1),e1=ee(It(),1);u();var u2=e=>{let t={};for(let r in e.properties)hoe.includes(r)||(t[r]=e.properties[r]);return t},Aqr=(e,t)=>Object.keys(e).filter(n=>{let o=hoe.includes(n),i=!Me(t[n])||t[n]==="";return!o&&i}),dct=({oldProperties:e,newProperties:t})=>{let r={};for(let[a,c]of Object.entries(t)){let h=c==="",m=a==="";!Me(a)||m||h||(r[a]=c)}let n=Aqr(e,t);return{addOrUpdateProperties:Object.entries(r).map(([a,c])=>({key:a,value:c})),removeProperties:n}},Qd=e=>{e(bs,Ti.NONE),e(Pc,Qs.STANDARD),e(Wo,null),e(zg,null),e(nl,null),e(kl,null)},gN=e=>{if(!Me(e))return;let t=structuredClone(e);for(let r of t.features)delete r.id;return t},rU=65535,hct=(e,t)=>{if(!Me(rU))throw new Error("Cannot generate feature id. MAX_VALUE_UINT_16 is not specified");if(!Me(e)||!Me(t))throw new Error("Cannot generate feature id. Version or index is missing.");if(!Number.isInteger(e)||!Number.isInteger(t))throw new Error("Cannot generate feature id. Version or index is not of type number");if(e>rU||t>rU)throw new Error(`Cannot generate feature id. Version or index is > ${rU}`);let r=new ArrayBuffer(4),n=new DataView(r);return n.setUint16(0,e),n.setUint16(2,t),n.getUint32(0)},mct=e=>{let t=structuredClone(e);for(let[r,n]of t.features.entries())n.id=hct(r+1,0);return t},gct=(e,t,r)=>{let n=structuredClone(t),o=new Set;for(let a of t.features)e.features.find(h=>h.id===a.id)||o.add(a.id);if(o.size===0)return n;let i=n.features.map((a,c)=>o.has(a.id)?Dt(Te({},a),{id:hct(c+1,r)}):a);return Dt(Te({},n),{features:i})},Xce=(e,t)=>{if(e.response){if(e.response.status===401){t("common-errors-http-401");return}if(e.response.status===403){t("common-errors-http-403");return}if(e.response.status===409){t("common-errors-http-409");return}if(e.response.status===422){t("geojson-draw-error-invalid-input");return}}t("common-errors-unexpected"),console.error(e)},jb=(e,t)=>{if(e.response){if(e.response.status===401){t("common-errors-http-401");return}if(e.response.status===403){t("common-errors-http-403");return}if(e.response.status===422){t("geojson-external-vector-map-error-invalid-input");return}}t("common-errors-unexpected"),console.error(e)},nU=(e,t)=>{if(!Me(e)||!Me(t)){console.error("Cannot update layer's metadata. Either of the two are not defined.");return}for(let[n,o]of Object.entries(t))e.updateMetadata(n,o);let r=e.getGeoJson();e.updateMetadata(Ue.bounds,_He(r))};u();u();var wu=ee(ke(),1),oU=ee(It(),1),vct=ee(Mse(),1);var $c={INITIAL:0,IMAGE:1,ERROR:2,PLACEHOLDER:3,LOADING:4},Jce=({imageUrl:e,showPlaceholder:t,imageAsPreview:r})=>{let[n,o]=(0,wu.useState)($c.INITIAL),i=(0,wu.useRef)(e);e!==i.current&&(o($c.INITIAL),i.current=e),n===$c.INITIAL&&(e.length===0&&t?o($c.PLACEHOLDER):o($c.LOADING));let a=n===$c.LOADING||n===$c.IMAGE,c=(0,wu.useMemo)(()=>n===$c.PLACEHOLDER?"placeholder":n===$c.ERROR?"error":"image",[n]);return wu.default.createElement("div",{className:"image-with-fallback-root"},wu.default.createElement("div",{className:`image-container ${c}`},a&&wu.default.createElement(wu.default.Fragment,null,n===$c.LOADING&&wu.default.createElement(vct.default.default,{height:180}),wu.default.createElement("img",{className:`${r?"preview":""} ${n===$c.LOADING?"loading":""}`,src:e,onLoad:()=>o($c.IMAGE),onError:()=>o($c.ERROR)})),!a&&wu.default.createElement("div",{className:`image-fallback-icon ${c}`},wu.default.createElement(Hr,{name:"image-placeholder"})),n===$c.ERROR&&wu.default.createElement("p",{className:"image-fallback-text"},fe("geojson-image-fallback-p"))))};Jce.defaultPropTypes={imageAsPreview:!1,showPlaceholder:!1,imageUrl:""};Jce.propTypes={imageUrl:oU.default.string,showPlaceholder:oU.default.bool,imageAsPreview:oU.default.bool};var yct=Jce;var Mm=yct;u();u();var vN=ee(ke(),1);u();u();var Eu=ee(ke(),1),iU=ee(It(),1);var _ct=({title:e,onClick:t,value:r})=>{let[n,o]=(0,Eu.useState)(!1),i=(0,Eu.useRef)(),a=(0,Eu.useRef)(),c=(0,Eu.useCallback)(()=>{(t!==void 0&&r===""?t():new Promise(m=>m())).then(m=>{clearTimeout(a.current),navigator.clipboard.writeText(m!==void 0?m:r),o(!0)})},[t,r]);return(0,Eu.useEffect)(()=>(n&&(a.current=setTimeout(()=>{o(!1)},1e3)),()=>{clearTimeout(a.current)}),[n]),Eu.default.createElement(Eu.default.Fragment,null,Eu.default.createElement("button",{className:"copy-button",onClick:c,ref:i,title:e!=null?e:fe("control-permalink-exporter-copy-title")},Eu.default.createElement(Bg,{glyph:"copy"})),Eu.default.createElement(Oae,{placement:"right",target:i.current,show:n},Eu.default.createElement(Fae,{id:"copy-state-indicator"},fe("control-permalink-exporter-copy"))))};_ct.propTypes={title:iU.default.string,onClick:iU.default.func,value:iU.default.string};var bct=_ct;var c2=bct;u();u();var aU=e=>{let{center:t,bearing:r,pitch:n,zoom:o}=e;return Object.assign({},t===void 0?null:{c:t},r===void 0?null:{be:r},n===void 0?null:{p:n},o===void 0?null:{z:o})},sU=e=>mr.getBaseMaps().filter(n=>n.id===e).length>0?{b:e}:{},lU=e=>({map_id:e.filter(t=>t.getType()===mo.HISTORIC_MAP||t.getMetadata(Ue.vectorMapId)).map(t=>t.getId())}),uU=e=>({v:e?az["3D"]:az["2D"]}),xct=({featureId:e,sourceId:t})=>({fid:e,foid:t});var wct=ee(oz(),1);var Oqr=()=>pr(({snapshot:e})=>()=>yt(null,null,function*(){let t=yield e.getPromise(rr),r=yield e.getPromise(el);if(!Me(t)||!Me(r))return;let n=yield e.getPromise(qn),o=yield e.getPromise(xf),i=uU(t.isVkfGlobeModeEnabled()),a=lU(n),c=sU(o),h=aU(US(t,!0)),m=xct(r),y=(0,wct.stringify)(Object.assign({},h,i,a,m,c),{arrayFormat:"comma"});return Promise.resolve(BS(y))}),[]),Ect=Oqr;var Pqr=()=>{let e=bt(qn),t=bt(el),r=(0,vN.useMemo)(()=>{if(Me(t)&&Me(e)){let{sourceId:o}=t,i=e.find(a=>a.getId()===o);return Me(i==null?void 0:i.getMetadata(Ue.vectorMapId))}return!1},[e,t]),n=Ect();return r?vN.default.createElement("div",{className:"feature-permalink-button-root"},vN.default.createElement(c2,{title:fe("feature-permalink-exporter-copy-title"),onClick:n,value:""})):null},Sct=Pqr;var cU=Sct;u();var pU=ee(ke(),1);var yN=ee(It(),1),Tct=({value:e})=>{let t=`${e}`;return _p(t)?pU.default.createElement("a",{href:t,target:"_blank",rel:"noreferrer"},pU.default.createElement("p",{className:"geojson-feature-property-link"},t)):pU.default.createElement("p",{className:"geojson-feature-property-text"},t)};Tct.propTypes={value:yN.default.oneOfType([yN.default.string,yN.default.number,yN.default.bool]).isRequired};var Ict=Tct;var Dqr=[...PS],Nqr=e=>Me(e)&&e!==""&&typeof e!="object",Mct=({feature:e,onClose:t})=>{let r=(0,Yi.useMemo)(()=>u2(e),[e]),{defaultTitle:n,defaultDescription:o}=(0,Yi.useMemo)(()=>({defaultTitle:fe("geojson-featureview-no-title"),defaultDescription:fe("geojson-featureview-no-description")}),[]),{imageLink:i,title:a,description:c,time:h}=(0,Yi.useMemo)(()=>{var A,P;let w=r[kn.time],E=Me(w)?R0(w):null;return{imageLink:r[kn.imgLink],title:(A=r[kn.title])!=null?A:n,description:(P=r[kn.description])!=null?P:o,time:E}},[r]),m=(0,Yi.useMemo)(()=>Me(i)&&i.length>0,[i]),y=(0,Yi.useMemo)(()=>Object.entries(r).filter(([w,E])=>!Dqr.includes(w)&&Nqr(E)),[r]);return Yi.default.createElement("div",{className:"geojson-feature-panel-root vkf-feature-panel"},Yi.default.createElement(Cf,{extraButton:Yi.default.createElement(cU,null),title:fe("geojson-featureview-header-text"),onCloseClick:t}),Yi.default.createElement("div",{className:"property-container scrollable"},m&&Yi.default.createElement(Mm,{imageUrl:i}),Yi.default.createElement("div",{className:"predefined-properties-container"},Yi.default.createElement("div",{className:"title-section "},Yi.default.createElement("span",{className:"geojson-feature-property-label"},fe("geojson-featureview-title")),Yi.default.createElement("span",{className:"title"},a)),Yi.default.createElement("div",{className:"description-section"},Yi.default.createElement("p",{className:"geojson-feature-property-label"},fe("geojson-featureview-description")),Yi.default.createElement("p",{className:"geojson-feature-property-text"},c)),h!==null&&Yi.default.createElement("div",{className:"time-section"},Yi.default.createElement("p",{className:"geojson-feature-property-label"},fe("geojson-featureview-time")),Yi.default.createElement("p",{className:"geojson-feature-property-text"},h))),y.length>0&&Yi.default.createElement("div",{className:"custom-properties-container"},y.map(([w,E])=>Yi.default.createElement("div",{key:w},Yi.default.createElement("p",{className:"geojson-feature-property-label"},w),Yi.default.createElement(Ict,{value:E}))))))};Mct.propTypes={feature:e1.default.shape({id:e1.default.oneOfType([e1.default.number,e1.default.string]).isRequired,geometry:e1.default.object.isRequired,properties:e1.default.object.isRequired}).isRequired,onClose:e1.default.func};var Cct=Mct;u();var Po=ee(ke(),1),t1=ee(It(),1);u();var qb=ee(ke(),1),Qce=ee(It(),1),Act=({label:e,value:t=0})=>qb.default.createElement("div",{className:"certainty-item"},qb.default.createElement("span",{className:"certainty-label"},e,": "),qb.default.createElement("span",{className:"value"},`${t*100}%`),qb.default.createElement("div",{className:"bar"},qb.default.createElement("div",{className:"track"}),qb.default.createElement("div",{className:"value",style:{width:`${t*100}%`}})));Act.propTypes={label:Qce.default.string.isRequired,value:Qce.default.number.isRequired};var fU=Act;var Oct=({feature:e,onClose:t})=>{let r=(0,Po.useMemo)(()=>u2(e),[e]),{defaultTitle:n,defaultDescription:o}=(0,Po.useMemo)(()=>({defaultTitle:fe("geojson-featureview-no-title"),defaultDescription:fe("geojson-featureview-no-description")}),[]),i=(0,Po.useMemo)(()=>{let P=mr.getSettings().LANGUAGE_CODE===gf.DE?r[na.timeLabelDe]:r[na.timeLabelEn];if(Me(P))return P;let j=r[kn.time];return R0(j)},[r[kn.time]]),{imageLink:a,title:c,description:h,permalink:m,certainties:y,affiliation:w}=(0,Po.useMemo)(()=>{var j,D,L,z;let A=r[na.permalink],P=_p(A)?A:"";return{imageLink:r[kn.imgLink],title:(j=r[kn.title])!=null?j:n,description:(D=r[kn.description])!=null?D:o,tags:(L=r[na.tags])!=null?L:[],permalink:P,affiliation:(z=r[na.parentLabel])!=null?z:"",certainties:{spatial:eb(r[na.spatialCertainty]),content:eb(r[na.contentCertainty]),temporal:eb(r[na.temporalCertainty])}}},[r]),E=(0,Po.useMemo)(()=>Me(a)&&a.length>0,[a]);return Po.default.createElement("div",{className:"geojson-feature-panel-root idohist-feature-panel"},Po.default.createElement(Cf,{extraButton:Po.default.createElement(cU,null),title:fe("geojson-featureview-header-text"),onCloseClick:t}),Po.default.createElement("div",{className:"property-container scrollable"},E&&Po.default.createElement(Mm,{imageUrl:a}),Po.default.createElement("div",{className:"predefined-properties-container"},Po.default.createElement("div",{className:"title-section "},Po.default.createElement("span",{className:"geojson-feature-property-label"},fe("geojson-featureview-title")),Po.default.createElement("span",{className:"title"},c)),w!==""&&Po.default.createElement("div",{className:"affiliation-section"},Po.default.createElement("p",{className:"geojson-feature-property-label"},fe("idohist-affiliation-label")),Po.default.createElement("p",{className:"affiliation geojson-feature-property-text"},w)),Po.default.createElement("div",{className:"time-section"},Po.default.createElement("p",{className:"geojson-feature-property-label"},fe("idohist-date-label")),Po.default.createElement("p",{className:"time geojson-feature-property-text"},i)),Po.default.createElement("div",{className:"description-section"},Po.default.createElement("p",{className:"geojson-feature-property-label"},fe("geojson-featureview-description")),Po.default.createElement("p",{className:"description geojson-feature-property-text"},h)),m!==""&&Po.default.createElement("div",{className:"permalink-section"},Po.default.createElement("p",{className:"geojson-feature-property-label"},fe("idohist-permalink-label")),Po.default.createElement("a",{href:m,target:"_blank",rel:"noreferrer"},Po.default.createElement("p",{className:"geojson-feature-property-link"},m))),Po.default.createElement("div",{className:"certainties-section"},Po.default.createElement("p",{className:"geojson-feature-property-label"},fe("idohist-certainty-label")),Po.default.createElement("div",{className:"certainty-items"},Po.default.createElement(fU,{label:fe("idohist-certainty-label-spatial"),value:y.spatial}),Po.default.createElement(fU,{label:fe("idohist-certainty-label-temporal"),value:y.temporal}),Po.default.createElement(fU,{label:fe("idohist-certainty-label-content"),value:y.content}))))))};Oct.propTypes={feature:t1.default.shape({id:t1.default.oneOfType([t1.default.number,t1.default.string]).isRequired,geometry:t1.default.object.isRequired,properties:t1.default.object.isRequired}).isRequired,onClose:t1.default.func};var Pct=Oct;var Dct=({contentType:e,geoJsonFeature:t,resetFeature:r})=>{let n=(0,zb.useCallback)(()=>{r()},[r]);return e===Uu.IDOHIST?zb.default.createElement(Pct,{feature:t,onClose:n}):zb.default.createElement(zb.default.Fragment,null,zb.default.createElement(Cct,{feature:t,onClose:n}))};Dct.propTypes={geoJsonFeature:dU.default.object.isRequired,resetFeature:dU.default.func.isRequired,contentType:dU.default.string.isRequired};var epe=Dct;u();u();var _N=ee(It(),1),vv=ee(ke(),1);var tpe=({className:e,Component:t,props:r,onExit:n})=>{let o=(0,vv.useRef)(null),[i,a]=(0,vv.useState)(null),c=Me(r);c&&o.current!==r&&(a(vv.default.createElement(t,Te({},r))),o.current=r);let h=(0,vv.useCallback)(()=>{c||(o.current=null,a(null),n&&n())},[c,n]);return vv.default.createElement("div",{onTransitionEnd:h,className:qt(e,r!==null&&"in")},i)};tpe.propTypes={className:_N.default.string.isRequired,Component:_N.default.func.isRequired,props:_N.default.object,onExit:_N.default.func};tpe.defaultPropTypes={props:null};var Nct=tpe;var r1=Nct;u();var eh=ee(ke(),1);var Lqr=e=>{var t;return Me((t=e.layer.metadata)==null?void 0:t[bp.id])},hU=(e,t)=>`${e}-${t}`,kqr=(e,t)=>{let{x:r,y:n}=e;return[[r-t,n-t],[r+t,n+t]]},Rqr=e=>{let{type:t,id:r,geometry:n}=e,o={};for(let i in e.properties){let a=e.properties[i],c="";try{if(c=JSON.parse(a),typeof c!="object")throw new Error}catch(h){c=a}o[i]=c}return{id:r,geometry:n,properties:o,type:t}},jqr=2;function qqr(){let e=Lr(ks),t=bt(rr),r=bt(qn),[n,o]=Io(el),[i,a]=(0,eh.useState)(null),[c,h]=(0,eh.useState)(null),m=(0,eh.useRef)(null),y=(0,eh.useCallback)(()=>{m.current=null,a(null),h(null),o(null)},[]),w=(0,eh.useCallback)(E=>{var D;let{point:A}=E,P=kqr(A,jqr),j=t.queryRenderedFeatures(P).filter(Lqr).at(0);if(Me(j)){let{id:L,source:z}=j,{layer:{metadata:B}}=j;if(!Me(L)){e({id:"no-feature-id",type:"warning",text:fe("error-no-feature-id")});return}if(hU(L,z)===m.current)return;o({featureId:L,sourceId:z}),m.current=hU(L,z);let G=(D=B[bp.contentType])!=null?D:Uu.VKF;h(G),a(Rqr(j))}else y()},[]);return(0,eh.useEffect)(()=>{if(Me(t))return t.on("click",w),()=>{t.off("click",w)}},[]),(0,eh.useEffect)(()=>{var E;if(!Me(n)){Me(m.current)&&y();return}if(Me(r)&&r.length>0){let{featureId:A,sourceId:P}=n;if(hU(A,P)===m.current)return;let j=r.find(z=>z.getId()===P);if(!Me(j)){console.error(`No layer found with id '${P}'.`),y();return}let D=j.getFeature(A),L=(E=j.getMetadata(Ue.externalContentType))!=null?E:Uu.VKF;if(!Me(D)){console.error(`No feature found with id '${A}'.`),y();return}m.current=hU(A,P),h(L),a(D)}},[r,n]),i===null?null:{contentType:c,geoJsonFeature:i,resetFeature:y}}var Lct=qqr;u();var Sa=ee(ke(),1),Fb=ee(It(),1);u();var kct=ee(ke(),1);var Rct=()=>{let{zoomToExtent:e}=O0(),t=pr(({snapshot:n,set:o})=>(i,a)=>yt(null,null,function*(){let c=yield n.getPromise(rr);if(Me(c)){try{let h={[Ue.title]:i},m=gN(a),y=$o.fromPersistence({metadata:h,geoJson:m});y.addLayerToMap(c),e(y),o(qn,w=>[...w,y]),o(tl,y.getId())}catch(h){console.log(h),o(ks,{id:"mapWrapper",type:"danger",text:fe("mapwrapper-geojson-parse-error")})}o(sWe,!1)}}),[e]),r=pr(({set:n})=>(o,i)=>yt(null,null,function*(){let a=gN(i);a=$o.toApplicationState(a),n(nl,a),n(kl,{[Ue.title]:o}),n(Wo,{type:Ka.REMOTE,id:null,layerRole:"owner"}),n(Pc,Qs.DRAW)}),[]);return(0,kct.useCallback)((n,o,i)=>i?r(n,o):t(n,o),[t,r])};u();var mU=ee(ke(),1);var rpe=ee(It(),1),jct=({disabled:e,id:t})=>mU.default.createElement("span",{className:"toggle-switch"},mU.default.createElement("input",{className:"toggle__input",disabled:e,name:t,type:"checkbox",id:t}),mU.default.createElement("div",{className:"toggle__fill"}));jct.propTypes={disabled:rpe.default.bool,id:rpe.default.string.isRequired};var qct=jct;var zct="persistGeoJson",Fct=({onSubmit:e,initialName:t,onClose:r})=>Sa.default.createElement(Sa.default.Fragment,null,Sa.default.createElement("form",{id:"add-geojson-form",onSubmit:e},Sa.default.createElement(d8,null,Sa.default.createElement("p",{className:"adddialog-description"},fe("geojson-adddialog-description")),Sa.default.createElement(Uz,{className:"geojson-label",htmlFor:"title"},fe("geojson-adddialog-layer-title-label")),Sa.default.createElement(Hie,{autoFocus:!0,defaultValue:t!=null?t:"Unknown",name:"title",type:"text",className:"geojson-input"})),Sa.default.createElement(d8,null,Sa.default.createElement(Uz,{className:"switch-label",htmlFor:zct},Sa.default.createElement(qct,{disabled:!XF(),id:zct}),Sa.default.createElement("p",{className:"geojson-label persistent-button-label"},fe("geojson-adddialog-persistent-button-label"))),Sa.default.createElement("div",null,Sa.default.createElement("p",{className:"persistent-button-description"},fe("geojson-adddialog-persistent-description"))))),Sa.default.createElement("div",{className:"add-geojson-buttons"},Sa.default.createElement(mn,{type:"save",form:"add-geojson-form",className:"btn btn-primary confirm-button"},fe("geojson-adddialog-confirm")),Sa.default.createElement(mn,{className:"cancel-button",type:"discard",onClick:r},fe("geojson-adddialog-cancel"))));Fct.propTypes={onSubmit:Fb.default.func.isRequired,initialName:Fb.default.string,onClose:Fb.default.func.isRequired};var Uct=({initialName:e,onClose:t,onSubmit:r})=>Sa.default.createElement(jf,{isOpen:!0,onClose:t,title:fe("geojson-adddialog-title"),renderContent:()=>Sa.default.createElement(Fct,{initialName:e,onSubmit:r,onClose:t}),modalClassName:"vkf-dialog-add-geojson"});Uct.propTypes={initialName:Fb.default.string,onClose:Fb.default.func.isRequired,onSubmit:Fb.default.func.isRequired};var zqr=()=>{let[e,t]=Io(ez),r=Rct(),n=(0,Sa.useCallback)(()=>{t(null)},[]),o=(0,Sa.useCallback)(i=>{i.preventDefault();let a=new FormData(i.currentTarget),c=a.get("title"),h=a.get("persistGeoJson")==="on";r(c,e.content,h).then(()=>{t(null)})},[r,e,t]);return e?Sa.default.createElement(Uct,{initialName:e.name,onClose:n,onSubmit:o}):null},Bct=zqr;u();var Ts=ee(ke(),1),$ct=ee(It(),1);u();var Vct=e=>new Promise((t,r)=>{let n=new FileReader;n.onloadend=function(){try{t({content:JSON.parse(this.result),modified:e.lastModified,name:e.name.split(".")[0]})}catch(o){console.log(o),r()}},n.readAsText(e)});u();var n1=ee(ke(),1);var npe=ee(It(),1),Gct=({refFileInput:e,onSelectFile:t})=>{let r=(0,n1.useCallback)(o=>{t(o.target.files[0])},[]),n=(0,n1.useCallback)(o=>{o.stopPropagation()},[]);return n1.default.createElement(n1.default.Fragment,null,n1.default.createElement("label",{className:"visually-hidden",htmlFor:"geojson-upload-file"},"GeoJSON Upload"),n1.default.createElement("input",{onClick:n,id:"geojson-upload-file",accept:"application/json, application/geo+json, .geojson",className:"hidden-file-input",type:"file",ref:e,onChange:r}))};Gct.propTypes={refFileInput:npe.default.object.isRequired,onSelectFile:npe.default.func.isRequired};var Hct=Gct;var Wct=ee(xa(),1),{FILE:Fqr}=Xy,Uqr={WRONG_FILETYPE:"wrong-filetype"},Yct=()=>{let[e,t]=(0,Ts.useState)(void 0),[r,n]=Io(Qq),o=Lr(ez),i=Lr(ks),a=(0,Ts.useRef)(),c=(0,Ts.useCallback)(P=>{console.error(P),i({id:"mapWrapper",type:"danger",text:fe("mapwrapper-geojson-parse-error")})},[]),h=(0,Ts.useCallback)(()=>{n(!1)},[]),m=(0,Ts.useCallback)(P=>{P.preventDefault(),P.stopPropagation(),a.current!==void 0&&a.current!==null&&(a.current.click(),document.activeElement.blur())},[]),y=(0,Ts.useCallback)(P=>{Vct(P).then(j=>{o(j),n(!1)}).catch(j=>c(j))},[c]),w=(0,Ts.useMemo)(()=>({accept:Fqr,canDrop:()=>r,collect(P){return{canDrop:P.canDrop(),isOver:P.isOver()}},drop:P=>{y(P.files[0])},hover:(P,j)=>{let D=j.getItem();D.items.length>0&&D.items[0].type!=="application/json"&&D.items[0].type!=="application/geo+json"&&t(Uqr.WRONG_FILETYPE)}}),[y,r]),[{isOver:E},A]=K6(w);return(0,Ts.useEffect)(()=>{E||t(void 0)},[E]),r?(0,Wct.createPortal)(Ts.default.createElement("div",{className:qt("vkf-dropzone",r&&"animation-show"),ref:A},Ts.default.createElement("div",{className:"dropzone-content-container",onClick:h},Ts.default.createElement("button",{onClick:m,className:"dropzone-content"},Ts.default.createElement(hu,{name:"dropzone-upload"}),Ts.default.createElement("p",{className:qt("dropzone-info",e!==void 0&&"error")},e===void 0?fe("dropzone-drop"):fe(`dropzone-${e}`))),Ts.default.createElement(Hct,{refFileInput:a,onSelectFile:y}))),document.body):null};Yct.propTypes={children:$ct.default.node};var Zct=Yct;var ope=()=>{let e=Lct(),{selectedLayer:t}=bt(cu);return Pp.default.createElement(Pp.default.Fragment,null,Pp.default.createElement("div",{className:"vkf-horizontal-layout"},Pp.default.createElement("div",{className:"spatialsearch-container",id:"spatialsearch-container"},Pp.default.createElement(ust,null)),Pp.default.createElement(r1,{className:"geojson-feature-panel-container",Component:epe,props:e}),Pp.default.createElement("div",{className:"layermanagement-container",id:"layermanagement-container"},Pp.default.createElement(a9,null)),Pp.default.createElement(r1,{className:"vkf-geojson-layer-view-root",Component:bit,props:t?{selectedLayer:t}:null})),Pp.default.createElement(fct,null),Pp.default.createElement(Bct,null),Pp.default.createElement(Zct,null))};u();var Kf=ee(ke(),1);u();u();var gpe=ee(ke(),1);u();u();u();u();var Bqr=function(e,t){let r={drag:[],click:[],mousemove:[],mousedown:[],mouseup:[],mouseout:[],keydown:[],keyup:[],touchstart:[],touchmove:[],touchend:[],tap:[]},n={on(i,a,c){if(r[i]===void 0)throw new Error(`Invalid event type: ${i}`);r[i].push({selector:a,fn:c})},render(i){t.store.featureChanged(i)}},o=function(i,a){let c=r[i],h=c.length;for(;h--;){let m=c[h];if(m.selector(a)){m.fn.call(n,a)||t.store.render(),t.ui.updateMapClasses();break}}};return e.start.call(n),{render:e.render,stop(){e.stop&&e.stop()},trash(){e.trash&&(e.trash(),t.store.render())},combineFeatures(){e.combineFeatures&&e.combineFeatures()},uncombineFeatures(){e.uncombineFeatures&&e.uncombineFeatures()},drag(i){o("drag",i)},click(i){o("click",i)},mousemove(i){o("mousemove",i)},mousedown(i){o("mousedown",i)},mouseup(i){o("mouseup",i)},mouseout(i){o("mouseout",i)},keydown(i){o("keydown",i)},keyup(i){o("keyup",i)},touchstart(i){o("touchstart",i)},touchmove(i){o("touchmove",i)},touchend(i){o("touchend",i)},tap(i){o("tap",i)}}},bN=Bqr;u();u();u();var rpt=ee(ept(),1);var Ci={};sw(Ci,{LAT_MAX:()=>Gqr,LAT_MIN:()=>Vqr,LAT_RENDERED_MAX:()=>yU,LAT_RENDERED_MIN:()=>vU,LNG_MAX:()=>$qr,LNG_MIN:()=>Hqr,activeStates:()=>Ri,classes:()=>$l,cursors:()=>ni,events:()=>qa,geojsonTypes:()=>_r,interactions:()=>lpe,meta:()=>aa,modes:()=>Gn,sources:()=>tc,types:()=>qs,updateActions:()=>o1});u();var $l={CANVAS:"mapboxgl-canvas",CONTROL_BASE:"mapboxgl-ctrl",CONTROL_PREFIX:"mapboxgl-ctrl-",CONTROL_BUTTON:"mapbox-gl-draw_ctrl-draw-btn",CONTROL_BUTTON_LINE:"mapbox-gl-draw_line",CONTROL_BUTTON_POLYGON:"mapbox-gl-draw_polygon",CONTROL_BUTTON_POINT:"mapbox-gl-draw_point",CONTROL_BUTTON_TRASH:"mapbox-gl-draw_trash",CONTROL_BUTTON_COMBINE_FEATURES:"mapbox-gl-draw_combine",CONTROL_BUTTON_UNCOMBINE_FEATURES:"mapbox-gl-draw_uncombine",CONTROL_GROUP:"mapboxgl-ctrl-group",ATTRIBUTION:"mapboxgl-ctrl-attrib",ACTIVE_BUTTON:"active",BOX_SELECT:"mapbox-gl-draw_boxselect"},tc={HOT:"mapbox-gl-draw-hot",COLD:"mapbox-gl-draw-cold"},ni={ADD:"add",MOVE:"move",DRAG:"drag",POINTER:"pointer",NONE:"none"},qs={POLYGON:"polygon",LINE:"line_string",POINT:"point"},_r={FEATURE:"Feature",POLYGON:"Polygon",LINE_STRING:"LineString",POINT:"Point",FEATURE_COLLECTION:"FeatureCollection",MULTI_PREFIX:"Multi",MULTI_POINT:"MultiPoint",MULTI_LINE_STRING:"MultiLineString",MULTI_POLYGON:"MultiPolygon"},Gn={DRAW_LINE_STRING:"draw_line_string",DRAW_POLYGON:"draw_polygon",DRAW_POINT:"draw_point",SIMPLE_SELECT:"simple_select",DIRECT_SELECT:"direct_select"},qa={CREATE:"draw.create",DELETE:"draw.delete",UPDATE:"draw.update",SELECTION_CHANGE:"draw.selectionchange",MODE_CHANGE:"draw.modechange",ACTIONABLE:"draw.actionable",RENDER:"draw.render",COMBINE_FEATURES:"draw.combine",UNCOMBINE_FEATURES:"draw.uncombine"},o1={MOVE:"move",CHANGE_PROPERTIES:"change_properties",CHANGE_COORDINATES:"change_coordinates"},aa={FEATURE:"feature",MIDPOINT:"midpoint",VERTEX:"vertex"},Ri={ACTIVE:"true",INACTIVE:"false"},lpe=["scrollZoom","boxZoom","dragRotate","dragPan","keyboard","doubleClickZoom","touchZoomRotate"],Vqr=-90,vU=-85,Gqr=90,yU=85,Hqr=-270,$qr=270;var tpt={Point:0,LineString:1,MultiLineString:1,Polygon:2};function Wqr(e,t){let r=tpt[e.geometry.type]-tpt[t.geometry.type];return r===0&&e.geometry.type===_r.POLYGON?e.area-t.area:r}function Yqr(e){return e.map(t=>(t.geometry.type===_r.POLYGON&&(t.area=rpt.default.geometry({type:_r.FEATURE,property:{},geometry:t.geometry})),t)).sort(Wqr).map(t=>(delete t.area,t))}var _U=Yqr;u();function Zqr(e,t=0){return[[e.point.x-t,e.point.y-t],[e.point.x+t,e.point.y+t]]}var bU=Zqr;u();function p2(e){if(this._items={},this._nums={},this._length=e?e.length:0,!!e)for(let t=0,r=e.length;t<r;t++)this.add(e[t]),e[t]!==void 0&&(typeof e[t]=="string"?this._items[e[t]]=t:this._nums[e[t]]=t)}p2.prototype.add=function(e){return this.has(e)?this:(this._length++,typeof e=="string"?this._items[e]=this._length:this._nums[e]=this._length,this)};p2.prototype.delete=function(e){return this.has(e)===!1?this:(this._length--,delete this._items[e],delete this._nums[e],this)};p2.prototype.has=function(e){return typeof e!="string"&&typeof e!="number"?!1:this._items[e]!==void 0||this._nums[e]!==void 0};p2.prototype.values=function(){let e=[];return Object.keys(this._items).forEach(t=>{e.push({k:t,v:this._items[t]})}),Object.keys(this._nums).forEach(t=>{e.push({k:JSON.parse(t),v:this._nums[t]})}),e.sort((t,r)=>t.v-r.v).map(t=>t.k)};p2.prototype.clear=function(){return this._length=0,this._items={},this._nums={},this};var Vf=p2;var Kqr=[aa.FEATURE,aa.MIDPOINT,aa.VERTEX],th={click:Xqr,touch:Jqr};function Xqr(e,t,r){return npt(e,t,r,r.options.clickBuffer)}function Jqr(e,t,r){return npt(e,t,r,r.options.touchBuffer)}function npt(e,t,r,n){if(r.map===null)return[];let o=e?bU(e,n):t,i={};r.options.styles&&(i.layers=r.options.styles.map(m=>m.id).filter(m=>r.map.getLayer(m)!=null));let a=r.map.queryRenderedFeatures(o,i).filter(m=>Kqr.indexOf(m.properties.meta)!==-1),c=new Vf,h=[];return a.forEach(m=>{let y=m.properties.id;c.has(y)||(c.add(y),h.push(m))}),_U(h)}function Ub(e,t){let r=th.click(e,null,t),n={mouse:ni.NONE};return r[0]&&(n.mouse=r[0].properties.active===Ri.ACTIVE?ni.MOVE:ni.POINTER,n.feature=r[0].properties.meta),t.events.currentModeName().indexOf("draw")!==-1&&(n.mouse=ni.ADD),t.ui.queueMapClasses(n),t.ui.updateMapClasses(),r[0]}u();u();function f2(e,t){let r=e.x-t.x,n=e.y-t.y;return Math.sqrt(r*r+n*n)}var Qqr=4,ezr=12,tzr=500;function d2(e,t,r={}){let n=r.fineTolerance!=null?r.fineTolerance:Qqr,o=r.grossTolerance!=null?r.grossTolerance:ezr,i=r.interval!=null?r.interval:tzr;e.point=e.point||t.point,e.time=e.time||t.time;let a=f2(e.point,t.point);return a<n||a<o&&t.time-e.time<i}u();var rzr=25,nzr=250;function h2(e,t,r={}){let n=r.tolerance!=null?r.tolerance:rzr,o=r.interval!=null?r.interval:nzr;return e.point=e.point||t.point,e.time=e.time||t.time,f2(e.point,t.point)<n&&t.time-e.time<o}u();u();u();u();u();u();u();var opt=(e,t=21)=>(r=t)=>{let n="",o=r|0;for(;o--;)n+=e[Math.random()*e.length|0];return n};var ozr=opt("0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz",32);function m2(){return ozr()}var i1=function(e,t){this.ctx=e,this.properties=t.properties||{},this.coordinates=t.geometry.coordinates,this.id=t.id||m2(),this.type=t.geometry.type};i1.prototype.changed=function(){this.ctx.store.featureChanged(this.id)};i1.prototype.incomingCoords=function(e){this.setCoordinates(e)};i1.prototype.setCoordinates=function(e){this.coordinates=e,this.changed()};i1.prototype.getCoordinates=function(){return JSON.parse(JSON.stringify(this.coordinates))};i1.prototype.setProperty=function(e,t){this.properties[e]=t};i1.prototype.toGeoJSON=function(){return JSON.parse(JSON.stringify({id:this.id,type:_r.FEATURE,properties:this.properties,geometry:{coordinates:this.getCoordinates(),type:this.type}}))};i1.prototype.internal=function(e){let t={id:this.id,meta:aa.FEATURE,"meta:type":this.type,active:Ri.INACTIVE,mode:e};if(this.ctx.options.userProperties)for(let r in this.properties)t[`user_${r}`]=this.properties[r];return{type:_r.FEATURE,properties:t,geometry:{coordinates:this.getCoordinates(),type:this.type}}};var Gf=i1;var xN=function(e,t){Gf.call(this,e,t)};xN.prototype=Object.create(Gf.prototype);xN.prototype.isValid=function(){return typeof this.coordinates[0]=="number"&&typeof this.coordinates[1]=="number"};xN.prototype.updateCoordinate=function(e,t,r){arguments.length===3?this.coordinates=[t,r]:this.coordinates=[e,t],this.changed()};xN.prototype.getCoordinate=function(){return this.getCoordinates()};var Bb=xN;u();var Vb=function(e,t){Gf.call(this,e,t)};Vb.prototype=Object.create(Gf.prototype);Vb.prototype.isValid=function(){return this.coordinates.length>1};Vb.prototype.addCoordinate=function(e,t,r){this.changed();let n=parseInt(e,10);this.coordinates.splice(n,0,[t,r])};Vb.prototype.getCoordinate=function(e){let t=parseInt(e,10);return JSON.parse(JSON.stringify(this.coordinates[t]))};Vb.prototype.removeCoordinate=function(e){this.changed(),this.coordinates.splice(parseInt(e,10),1)};Vb.prototype.updateCoordinate=function(e,t,r){let n=parseInt(e,10);this.coordinates[n]=[t,r],this.changed()};var Gb=Vb;u();var Cm=function(e,t){Gf.call(this,e,t),this.coordinates=this.coordinates.map(r=>r.slice(0,-1))};Cm.prototype=Object.create(Gf.prototype);Cm.prototype.isValid=function(){return this.coordinates.length===0?!1:this.coordinates.every(e=>e.length>2)};Cm.prototype.incomingCoords=function(e){this.coordinates=e.map(t=>t.slice(0,-1)),this.changed()};Cm.prototype.setCoordinates=function(e){this.coordinates=e,this.changed()};Cm.prototype.addCoordinate=function(e,t,r){this.changed();let n=e.split(".").map(i=>parseInt(i,10));this.coordinates[n[0]].splice(n[1],0,[t,r])};Cm.prototype.removeCoordinate=function(e){this.changed();let t=e.split(".").map(n=>parseInt(n,10)),r=this.coordinates[t[0]];r&&(r.splice(t[1],1),r.length<3&&this.coordinates.splice(t[0],1))};Cm.prototype.getCoordinate=function(e){let t=e.split(".").map(n=>parseInt(n,10)),r=this.coordinates[t[0]];return JSON.parse(JSON.stringify(r[t[1]]))};Cm.prototype.getCoordinates=function(){return this.coordinates.map(e=>e.concat([e[0]]))};Cm.prototype.updateCoordinate=function(e,t,r){this.changed();let n=e.split("."),o=parseInt(n[0],10),i=parseInt(n[1],10);this.coordinates[o]===void 0&&(this.coordinates[o]=[]),this.coordinates[o][i]=[t,r]};var Hb=Cm;u();var izr={MultiPoint:Bb,MultiLineString:Gb,MultiPolygon:Hb},xU=(e,t,r,n,o)=>{let i=r.split("."),a=parseInt(i[0],10),c=i[1]?i.slice(1).join("."):null;return e[a][t](c,n,o)},rh=function(e,t){if(Gf.call(this,e,t),delete this.coordinates,this.model=izr[t.geometry.type],this.model===void 0)throw new TypeError(`${t.geometry.type} is not a valid type`);this.features=this._coordinatesToFeatures(t.geometry.coordinates)};rh.prototype=Object.create(Gf.prototype);rh.prototype._coordinatesToFeatures=function(e){let t=this.model.bind(this);return e.map(r=>new t(this.ctx,{id:m2(),type:_r.FEATURE,properties:{},geometry:{coordinates:r,type:this.type.replace("Multi","")}}))};rh.prototype.isValid=function(){return this.features.every(e=>e.isValid())};rh.prototype.setCoordinates=function(e){this.features=this._coordinatesToFeatures(e),this.changed()};rh.prototype.getCoordinate=function(e){return xU(this.features,"getCoordinate",e)};rh.prototype.getCoordinates=function(){return JSON.parse(JSON.stringify(this.features.map(e=>e.type===_r.POLYGON?e.getCoordinates():e.coordinates)))};rh.prototype.updateCoordinate=function(e,t,r){xU(this.features,"updateCoordinate",e,t,r),this.changed()};rh.prototype.addCoordinate=function(e,t,r){xU(this.features,"addCoordinate",e,t,r),this.changed()};rh.prototype.removeCoordinate=function(e){xU(this.features,"removeCoordinate",e),this.changed()};rh.prototype.getFeatures=function(){return this.features};var $b=rh;function to(e){this.map=e.map,this.drawConfig=JSON.parse(JSON.stringify(e.options||{})),this._ctx=e}to.prototype.setSelected=function(e){return this._ctx.store.setSelected(e)};to.prototype.setSelectedCoordinates=function(e){this._ctx.store.setSelectedCoordinates(e),e.reduce((t,r)=>(t[r.feature_id]===void 0&&(t[r.feature_id]=!0,this._ctx.store.get(r.feature_id).changed()),t),{})};to.prototype.getSelected=function(){return this._ctx.store.getSelected()};to.prototype.getSelectedIds=function(){return this._ctx.store.getSelectedIds()};to.prototype.isSelected=function(e){return this._ctx.store.isSelected(e)};to.prototype.getFeature=function(e){return this._ctx.store.get(e)};to.prototype.select=function(e){return this._ctx.store.select(e)};to.prototype.deselect=function(e){return this._ctx.store.deselect(e)};to.prototype.deleteFeature=function(e,t={}){return this._ctx.store.delete(e,t)};to.prototype.addFeature=function(e,t={}){return this._ctx.store.add(e,t)};to.prototype.clearSelectedFeatures=function(){return this._ctx.store.clearSelected()};to.prototype.clearSelectedCoordinates=function(){return this._ctx.store.clearSelectedCoordinates()};to.prototype.setActionableState=function(e={}){let t={trash:e.trash||!1,combineFeatures:e.combineFeatures||!1,uncombineFeatures:e.uncombineFeatures||!1};return this._ctx.events.actionable(t)};to.prototype.changeMode=function(e,t={},r={}){return this._ctx.events.changeMode(e,t,r)};to.prototype.fire=function(e,t){return this._ctx.events.fire(e,t)};to.prototype.updateUIClasses=function(e){return this._ctx.ui.queueMapClasses(e)};to.prototype.activateUIButton=function(e){return this._ctx.ui.setActiveButton(e)};to.prototype.featuresAt=function(e,t,r="click"){if(r!=="click"&&r!=="touch")throw new Error("invalid buffer type");return th[r](e,t,this._ctx)};to.prototype.newFeature=function(e){let t=e.geometry.type;return t===_r.POINT?new Bb(this._ctx,e):t===_r.LINE_STRING?new Gb(this._ctx,e):t===_r.POLYGON?new Hb(this._ctx,e):new $b(this._ctx,e)};to.prototype.isInstanceOf=function(e,t){if(e===_r.POINT)return t instanceof Bb;if(e===_r.LINE_STRING)return t instanceof Gb;if(e===_r.POLYGON)return t instanceof Hb;if(e==="MultiFeature")return t instanceof $b;throw new Error(`Unknown feature class: ${e}`)};to.prototype.doRender=function(e){return this._ctx.store.featureChanged(e)};var ipt=to;to.prototype.onSetup=function(){};to.prototype.onDrag=function(){};to.prototype.onClick=function(){};to.prototype.onMouseMove=function(){};to.prototype.onMouseDown=function(){};to.prototype.onMouseUp=function(){};to.prototype.onMouseOut=function(){};to.prototype.onKeyUp=function(){};to.prototype.onKeyDown=function(){};to.prototype.onTouchStart=function(){};to.prototype.onTouchMove=function(){};to.prototype.onTouchEnd=function(){};to.prototype.onTap=function(){};to.prototype.onStop=function(){};to.prototype.onTrash=function(){};to.prototype.onCombineFeature=function(){};to.prototype.onUncombineFeature=function(){};to.prototype.toDisplayFeatures=function(){throw new Error("You must overwrite toDisplayFeatures")};var apt={drag:"onDrag",click:"onClick",mousemove:"onMouseMove",mousedown:"onMouseDown",mouseup:"onMouseUp",mouseout:"onMouseOut",keyup:"onKeyUp",keydown:"onKeyDown",touchstart:"onTouchStart",touchmove:"onTouchMove",touchend:"onTouchEnd",tap:"onTap"},azr=Object.keys(apt);function spt(e){let t=Object.keys(e);return function(r,n={}){let o={},i=t.reduce((c,h)=>(c[h]=e[h],c),new ipt(r));function a(c){return h=>i[c](o,h)}return{start(){o=i.onSetup(n),azr.forEach(c=>{let h=apt[c],m=()=>!1;e[h]&&(m=()=>!0),this.on(c,m,a(h))})},stop(){i.onStop(o)},trash(){i.onTrash(o)},combineFeatures(){i.onCombineFeatures(o)},uncombineFeatures(){i.onUncombineFeatures(o)},render(c,h){i.toDisplayFeatures(o,c,h)}}}}function lpt(e){let t=Object.keys(e.options.modes).reduce((E,A)=>(E[A]=spt(e.options.modes[A]),E),{}),r={},n={},o={},i=null,a=null;o.drag=function(E,A){A({point:E.point,time:new Date().getTime()})?(e.ui.queueMapClasses({mouse:ni.DRAG}),a.drag(E)):E.originalEvent.stopPropagation()},o.mousedrag=function(E){o.drag(E,A=>!d2(r,A))},o.touchdrag=function(E){o.drag(E,A=>!h2(n,A))},o.mousemove=function(E){if((E.originalEvent.buttons!==void 0?E.originalEvent.buttons:E.originalEvent.which)===1)return o.mousedrag(E);let P=Ub(E,e);E.featureTarget=P,a.mousemove(E)},o.mousedown=function(E){r={time:new Date().getTime(),point:E.point};let A=Ub(E,e);E.featureTarget=A,a.mousedown(E)},o.mouseup=function(E){let A=Ub(E,e);E.featureTarget=A,d2(r,{point:E.point,time:new Date().getTime()})?a.click(E):a.mouseup(E)},o.mouseout=function(E){a.mouseout(E)},o.touchstart=function(E){if(!e.options.touchEnabled)return;n={time:new Date().getTime(),point:E.point};let A=th.touch(E,null,e)[0];E.featureTarget=A,a.touchstart(E)},o.touchmove=function(E){if(e.options.touchEnabled)return a.touchmove(E),o.touchdrag(E)},o.touchend=function(E){if(E.originalEvent.preventDefault(),!e.options.touchEnabled)return;let A=th.touch(E,null,e)[0];E.featureTarget=A,h2(n,{time:new Date().getTime(),point:E.point})?a.tap(E):a.touchend(E)};let c=E=>!(E===8||E===46||E>=48&&E<=57);o.keydown=function(E){(E.srcElement||E.target).classList.contains($l.CANVAS)&&((E.keyCode===8||E.keyCode===46)&&e.options.controls.trash?(E.preventDefault(),a.trash()):c(E.keyCode)?a.keydown(E):E.keyCode===49&&e.options.controls.point?h(Gn.DRAW_POINT):E.keyCode===50&&e.options.controls.line_string?h(Gn.DRAW_LINE_STRING):E.keyCode===51&&e.options.controls.polygon&&h(Gn.DRAW_POLYGON))},o.keyup=function(E){c(E.keyCode)&&a.keyup(E)},o.zoomend=function(){e.store.changeZoom()},o.data=function(E){if(E.dataType==="style"){let{setup:A,map:P,options:j,store:D}=e;j.styles.some(z=>P.getLayer(z.id))||(A.addLayers(),D.setDirty(),D.render())}};function h(E,A,P={}){a.stop();let j=t[E];if(j===void 0)throw new Error(`${E} is not valid`);i=E;let D=j(e,A);a=bN(D,e),P.silent||e.map.fire(qa.MODE_CHANGE,{mode:E}),e.store.setDirty(),e.store.render()}let m={trash:!1,combineFeatures:!1,uncombineFeatures:!1};function y(E){let A=!1;Object.keys(E).forEach(P=>{if(m[P]===void 0)throw new Error("Invalid action type");m[P]!==E[P]&&(A=!0),m[P]=E[P]}),A&&e.map.fire(qa.ACTIONABLE,{actions:m})}return{start(){i=e.options.defaultMode,a=bN(t[i](e),e)},changeMode:h,actionable:y,currentModeName(){return i},currentModeRender(E,A){return a.render(E,A)},fire(E,A){e.map&&e.map.fire(E,A)},addEventListeners(){e.map.on("mousemove",o.mousemove),e.map.on("mousedown",o.mousedown),e.map.on("mouseup",o.mouseup),e.map.on("data",o.data),e.map.on("touchmove",o.touchmove),e.map.on("touchstart",o.touchstart),e.map.on("touchend",o.touchend),e.container.addEventListener("mouseout",o.mouseout),e.options.keybindings&&(e.container.addEventListener("keydown",o.keydown),e.container.addEventListener("keyup",o.keyup))},removeEventListeners(){e.map.off("mousemove",o.mousemove),e.map.off("mousedown",o.mousedown),e.map.off("mouseup",o.mouseup),e.map.off("data",o.data),e.map.off("touchmove",o.touchmove),e.map.off("touchstart",o.touchstart),e.map.off("touchend",o.touchend),e.container.removeEventListener("mouseout",o.mouseout),e.options.keybindings&&(e.container.removeEventListener("keydown",o.keydown),e.container.removeEventListener("keyup",o.keyup))},trash(E){a.trash(E)},combineFeatures(){a.combineFeatures()},uncombineFeatures(){a.uncombineFeatures()},getMode(){return i}}}u();u();function szr(e){return[].concat(e).filter(t=>t!==void 0)}var Wb=szr;u();function upe(){let e=this;if(!(e.ctx.map&&e.ctx.map.getSource(tc.HOT)!==void 0))return h();let r=e.ctx.events.currentModeName();e.ctx.ui.queueMapClasses({mode:r});let n=[],o=[];e.isDirty?o=e.getAllIds():(n=e.getChangedIds().filter(m=>e.get(m)!==void 0),o=e.sources.hot.filter(m=>m.properties.id&&n.indexOf(m.properties.id)===-1&&e.get(m.properties.id)!==void 0).map(m=>m.properties.id)),e.sources.hot=[];let i=e.sources.cold.length;e.sources.cold=e.isDirty?[]:e.sources.cold.filter(m=>{let y=m.properties.id||m.properties.parent;return n.indexOf(y)===-1});let a=i!==e.sources.cold.length||o.length>0;n.forEach(m=>c(m,"hot")),o.forEach(m=>c(m,"cold"));function c(m,y){let E=e.get(m).internal(r);e.ctx.events.currentModeRender(E,A=>{A.properties.mode=r,e.sources[y].push(A)})}a&&e.ctx.map.getSource(tc.COLD).setData({type:_r.FEATURE_COLLECTION,features:e.sources.cold}),e.ctx.map.getSource(tc.HOT).setData({type:_r.FEATURE_COLLECTION,features:e.sources.hot}),h();function h(){e.isDirty=!1,e.clearChangedIds()}}function Ai(e){this._features={},this._featureIds=new Vf,this._selectedFeatureIds=new Vf,this._selectedCoordinates=[],this._changedFeatureIds=new Vf,this._emitSelectionChange=!1,this._mapInitialConfig={},this.ctx=e,this.sources={hot:[],cold:[]};let t;this.render=()=>{t||(t=requestAnimationFrame(()=>{t=null,upe.call(this),this._emitSelectionChange&&(this.ctx.events.fire(qa.SELECTION_CHANGE,{features:this.getSelected().map(r=>r.toGeoJSON()),points:this.getSelectedCoordinates().map(r=>({type:_r.FEATURE,properties:{},geometry:{type:_r.POINT,coordinates:r.coordinates}}))}),this._emitSelectionChange=!1),this.ctx.events.fire(qa.RENDER,{})}))},this.isDirty=!1}Ai.prototype.createRenderBatch=function(){let e=this.render,t=0;return this.render=function(){t++},()=>{this.render=e,t>0&&this.render()}};Ai.prototype.setDirty=function(){return this.isDirty=!0,this};Ai.prototype.featureCreated=function(e,t={}){if(this._changedFeatureIds.add(e),(t.silent!=null?t.silent:this.ctx.options.suppressAPIEvents)!==!0){let n=this.get(e);this.ctx.events.fire(qa.CREATE,{features:[n.toGeoJSON()]})}return this};Ai.prototype.featureChanged=function(e,t={}){return this._changedFeatureIds.add(e),(t.silent!=null?t.silent:this.ctx.options.suppressAPIEvents)!==!0&&this.ctx.events.fire(qa.UPDATE,{action:t.action?t.action:o1.CHANGE_COORDINATES,features:[this.get(e).toGeoJSON()]}),this};Ai.prototype.getChangedIds=function(){return this._changedFeatureIds.values()};Ai.prototype.clearChangedIds=function(){return this._changedFeatureIds.clear(),this};Ai.prototype.getAllIds=function(){return this._featureIds.values()};Ai.prototype.add=function(e,t={}){return this._features[e.id]=e,this._featureIds.add(e.id),this.featureCreated(e.id,{silent:t.silent}),this};Ai.prototype.delete=function(e,t={}){let r=[];return Wb(e).forEach(n=>{this._featureIds.has(n)&&(this._featureIds.delete(n),this._selectedFeatureIds.delete(n),t.silent||r.indexOf(this._features[n])===-1&&r.push(this._features[n].toGeoJSON()),delete this._features[n],this.isDirty=!0)}),r.length&&this.ctx.events.fire(qa.DELETE,{features:r}),upt(this,t),this};Ai.prototype.get=function(e){return this._features[e]};Ai.prototype.getAll=function(){return Object.keys(this._features).map(e=>this._features[e])};Ai.prototype.select=function(e,t={}){return Wb(e).forEach(r=>{this._selectedFeatureIds.has(r)||(this._selectedFeatureIds.add(r),this._changedFeatureIds.add(r),t.silent||(this._emitSelectionChange=!0))}),this};Ai.prototype.deselect=function(e,t={}){return Wb(e).forEach(r=>{this._selectedFeatureIds.has(r)&&(this._selectedFeatureIds.delete(r),this._changedFeatureIds.add(r),t.silent||(this._emitSelectionChange=!0))}),upt(this,t),this};Ai.prototype.clearSelected=function(e={}){return this.deselect(this._selectedFeatureIds.values(),{silent:e.silent}),this};Ai.prototype.setSelected=function(e,t={}){return e=Wb(e),this.deselect(this._selectedFeatureIds.values().filter(r=>e.indexOf(r)===-1),{silent:t.silent}),this.select(e.filter(r=>!this._selectedFeatureIds.has(r)),{silent:t.silent}),this};Ai.prototype.setSelectedCoordinates=function(e){return this._selectedCoordinates=e,this._emitSelectionChange=!0,this};Ai.prototype.clearSelectedCoordinates=function(){return this._selectedCoordinates=[],this._emitSelectionChange=!0,this};Ai.prototype.getSelectedIds=function(){return this._selectedFeatureIds.values()};Ai.prototype.getSelected=function(){return this.getSelectedIds().map(e=>this.get(e))};Ai.prototype.getSelectedCoordinates=function(){return this._selectedCoordinates.map(t=>({coordinates:this.get(t.feature_id).getCoordinate(t.coord_path)}))};Ai.prototype.isSelected=function(e){return this._selectedFeatureIds.has(e)};Ai.prototype.setFeatureProperty=function(e,t,r,n={}){this.get(e).setProperty(t,r),this.featureChanged(e,{silent:n.silent,action:o1.CHANGE_PROPERTIES})};function upt(e,t={}){let r=e._selectedCoordinates.filter(n=>e._selectedFeatureIds.has(n.feature_id));e._selectedCoordinates.length!==r.length&&!t.silent&&(e._emitSelectionChange=!0),e._selectedCoordinates=r}Ai.prototype.storeMapConfig=function(){lpe.forEach(e=>{this.ctx.map[e]&&(this._mapInitialConfig[e]=this.ctx.map[e].isEnabled())})};Ai.prototype.restoreMapConfig=function(){Object.keys(this._mapInitialConfig).forEach(e=>{this._mapInitialConfig[e]?this.ctx.map[e].enable():this.ctx.map[e].disable()})};Ai.prototype.getInitialConfigValue=function(e){return this._mapInitialConfig[e]!==void 0?this._mapInitialConfig[e]:!0};u();var lzr=["mode","feature","mouse"];function cpt(e){let t={},r=null,n={mode:null,feature:null,mouse:null},o={mode:null,feature:null,mouse:null};function i(){a({mode:null,feature:null,mouse:null}),c()}function a(A){o=Object.assign(o,A)}function c(){if(!e.container)return;let A=[],P=[];lzr.forEach(j=>{o[j]!==n[j]&&(A.push(`${j}-${n[j]}`),o[j]!==null&&P.push(`${j}-${o[j]}`))}),A.length>0&&e.container.classList.remove(...A),P.length>0&&e.container.classList.add(...P),n=Object.assign(n,o)}function h(A,P={}){let j=document.createElement("button");return j.className=`${$l.CONTROL_BUTTON} ${P.className}`,j.setAttribute("title",P.title),P.container.appendChild(j),j.addEventListener("click",D=>{if(D.preventDefault(),D.stopPropagation(),D.target===r){m(),P.onDeactivate();return}y(A),P.onActivate()},!0),j}function m(){r&&(r.classList.remove($l.ACTIVE_BUTTON),r=null)}function y(A){m();let P=t[A];P&&P&&A!=="trash"&&(P.classList.add($l.ACTIVE_BUTTON),r=P)}function w(){let A=e.options.controls,P=document.createElement("div");return P.className=`${$l.CONTROL_GROUP} ${$l.CONTROL_BASE}`,A&&(A[qs.LINE]&&(t[qs.LINE]=h(qs.LINE,{container:P,className:$l.CONTROL_BUTTON_LINE,title:`LineString tool ${e.options.keybindings?"(l)":""}`,onActivate:()=>e.events.changeMode(Gn.DRAW_LINE_STRING),onDeactivate:()=>e.events.trash()})),A[qs.POLYGON]&&(t[qs.POLYGON]=h(qs.POLYGON,{container:P,className:$l.CONTROL_BUTTON_POLYGON,title:`Polygon tool ${e.options.keybindings?"(p)":""}`,onActivate:()=>e.events.changeMode(Gn.DRAW_POLYGON),onDeactivate:()=>e.events.trash()})),A[qs.POINT]&&(t[qs.POINT]=h(qs.POINT,{container:P,className:$l.CONTROL_BUTTON_POINT,title:`Marker tool ${e.options.keybindings?"(m)":""}`,onActivate:()=>e.events.changeMode(Gn.DRAW_POINT),onDeactivate:()=>e.events.trash()})),A.trash&&(t.trash=h("trash",{container:P,className:$l.CONTROL_BUTTON_TRASH,title:"Delete",onActivate:()=>{e.events.trash()}})),A.combine_features&&(t.combine_features=h("combineFeatures",{container:P,className:$l.CONTROL_BUTTON_COMBINE_FEATURES,title:"Combine",onActivate:()=>{e.events.combineFeatures()}})),A.uncombine_features&&(t.uncombine_features=h("uncombineFeatures",{container:P,className:$l.CONTROL_BUTTON_UNCOMBINE_FEATURES,title:"Uncombine",onActivate:()=>{e.events.uncombineFeatures()}}))),P}function E(){Object.keys(t).forEach(A=>{let P=t[A];P.parentNode&&P.parentNode.removeChild(P),delete t[A]})}return{setActiveButton:y,queueMapClasses:a,updateMapClasses:c,clearMapClasses:i,addButtons:w,removeButtons:E}}function ppt(e){let t=null,r=null,n={onRemove(){return e.map.off("load",n.connect),clearInterval(r),n.removeLayers(),e.store.restoreMapConfig(),e.ui.removeButtons(),e.events.removeEventListeners(),e.ui.clearMapClasses(),e.boxZoomInitial&&e.map.boxZoom.enable(),e.map=null,e.container=null,e.store=null,t&&t.parentNode&&t.parentNode.removeChild(t),t=null,this},connect(){e.map.off("load",n.connect),clearInterval(r),n.addLayers(),e.store.storeMapConfig(),e.events.addEventListeners()},onAdd(o){if(e.map=o,e.events=lpt(e),e.ui=cpt(e),e.container=o.getContainer(),e.store=new Ai(e),t=e.ui.addButtons(),e.options.boxSelect){e.boxZoomInitial=o.boxZoom.isEnabled(),o.boxZoom.disable();let i=o.dragPan.isEnabled();o.dragPan.disable(),o.dragPan.enable(),i||o.dragPan.disable()}return o.loaded()?n.connect():(o.on("load",n.connect),r=setInterval(()=>{o.loaded()&&n.connect()},16)),e.events.start(),t},addLayers(){e.map.addSource(tc.COLD,{data:{type:_r.FEATURE_COLLECTION,features:[]},type:"geojson"}),e.map.addSource(tc.HOT,{data:{type:_r.FEATURE_COLLECTION,features:[]},type:"geojson"}),e.options.styles.forEach(o=>{e.map.addLayer(o)}),e.store.setDirty(!0),e.store.render()},removeLayers(){e.options.styles.forEach(o=>{e.map.getLayer(o.id)&&e.map.removeLayer(o.id)}),e.map.getSource(tc.COLD)&&e.map.removeSource(tc.COLD),e.map.getSource(tc.HOT)&&e.map.removeSource(tc.HOT)}};return e.setup=n,n}u();u();var cpe="#3bb2d0",wN="#fbb03b",fpt="#fff",wU=[{id:"gl-draw-polygon-fill",type:"fill",filter:["all",["==","$type","Polygon"]],paint:{"fill-color":["case",["==",["get","active"],"true"],wN,cpe],"fill-opacity":.1}},{id:"gl-draw-lines",type:"line",filter:["any",["==","$type","LineString"],["==","$type","Polygon"]],layout:{"line-cap":"round","line-join":"round"},paint:{"line-color":["case",["==",["get","active"],"true"],wN,cpe],"line-dasharray":["case",["==",["get","active"],"true"],[.2,2],[2,0]],"line-width":2}},{id:"gl-draw-point-outer",type:"circle",filter:["all",["==","$type","Point"],["==","meta","feature"]],paint:{"circle-radius":["case",["==",["get","active"],"true"],7,5],"circle-color":fpt}},{id:"gl-draw-point-inner",type:"circle",filter:["all",["==","$type","Point"],["==","meta","feature"]],paint:{"circle-radius":["case",["==",["get","active"],"true"],5,3],"circle-color":["case",["==",["get","active"],"true"],wN,cpe]}},{id:"gl-draw-vertex-outer",type:"circle",filter:["all",["==","$type","Point"],["==","meta","vertex"],["!=","mode","simple_select"]],paint:{"circle-radius":["case",["==",["get","active"],"true"],7,5],"circle-color":fpt}},{id:"gl-draw-vertex-inner",type:"circle",filter:["all",["==","$type","Point"],["==","meta","vertex"],["!=","mode","simple_select"]],paint:{"circle-radius":["case",["==",["get","active"],"true"],5,3],"circle-color":wN}},{id:"gl-draw-midpoint",type:"circle",filter:["all",["==","meta","midpoint"]],paint:{"circle-radius":3,"circle-color":wN}}];u();u();var Xb={};sw(Xb,{isActiveFeature:()=>yv,isEnterKey:()=>Kb,isEscapeKey:()=>Zb,isFeature:()=>SU,isInactiveFeature:()=>EU,isOfMetaType:()=>g2,isShiftDown:()=>y2,isShiftMousedown:()=>ppe,isTrue:()=>uzr,isVertex:()=>Yb,noTarget:()=>v2});u();function g2(e){return function(t){let r=t.featureTarget;return!r||!r.properties?!1:r.properties.meta===e}}function ppe(e){return!e.originalEvent||!e.originalEvent.shiftKey?!1:e.originalEvent.button===0}function yv(e){return!e.featureTarget||!e.featureTarget.properties?!1:e.featureTarget.properties.active===Ri.ACTIVE&&e.featureTarget.properties.meta===aa.FEATURE}function EU(e){return!e.featureTarget||!e.featureTarget.properties?!1:e.featureTarget.properties.active===Ri.INACTIVE&&e.featureTarget.properties.meta===aa.FEATURE}function v2(e){return e.featureTarget===void 0}function SU(e){return!e.featureTarget||!e.featureTarget.properties?!1:e.featureTarget.properties.meta===aa.FEATURE}function Yb(e){let t=e.featureTarget;return!t||!t.properties?!1:t.properties.meta===aa.VERTEX}function y2(e){return e.originalEvent?e.originalEvent.shiftKey===!0:!1}function Zb(e){return e.keyCode===27}function Kb(e){return e.keyCode===13}function uzr(){return!0}u();u();function Am(e,t){this.x=e,this.y=t}Am.prototype={clone(){return new Am(this.x,this.y)},add(e){return this.clone()._add(e)},sub(e){return this.clone()._sub(e)},multByPoint(e){return this.clone()._multByPoint(e)},divByPoint(e){return this.clone()._divByPoint(e)},mult(e){return this.clone()._mult(e)},div(e){return this.clone()._div(e)},rotate(e){return this.clone()._rotate(e)},rotateAround(e,t){return this.clone()._rotateAround(e,t)},matMult(e){return this.clone()._matMult(e)},unit(){return this.clone()._unit()},perp(){return this.clone()._perp()},round(){return this.clone()._round()},mag(){return Math.sqrt(this.x*this.x+this.y*this.y)},equals(e){return this.x===e.x&&this.y===e.y},dist(e){return Math.sqrt(this.distSqr(e))},distSqr(e){let t=e.x-this.x,r=e.y-this.y;return t*t+r*r},angle(){return Math.atan2(this.y,this.x)},angleTo(e){return Math.atan2(this.y-e.y,this.x-e.x)},angleWith(e){return this.angleWithSep(e.x,e.y)},angleWithSep(e,t){return Math.atan2(this.x*t-this.y*e,this.x*e+this.y*t)},_matMult(e){let t=e[0]*this.x+e[1]*this.y,r=e[2]*this.x+e[3]*this.y;return this.x=t,this.y=r,this},_add(e){return this.x+=e.x,this.y+=e.y,this},_sub(e){return this.x-=e.x,this.y-=e.y,this},_mult(e){return this.x*=e,this.y*=e,this},_div(e){return this.x/=e,this.y/=e,this},_multByPoint(e){return this.x*=e.x,this.y*=e.y,this},_divByPoint(e){return this.x/=e.x,this.y/=e.y,this},_unit(){return this._div(this.mag()),this},_perp(){let e=this.y;return this.y=this.x,this.x=-e,this},_rotate(e){let t=Math.cos(e),r=Math.sin(e),n=t*this.x-r*this.y,o=r*this.x+t*this.y;return this.x=n,this.y=o,this},_rotateAround(e,t){let r=Math.cos(e),n=Math.sin(e),o=t.x+r*(this.x-t.x)-n*(this.y-t.y),i=t.y+n*(this.x-t.x)+r*(this.y-t.y);return this.x=o,this.y=i,this},_round(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this},constructor:Am};Am.convert=function(e){if(e instanceof Am)return e;if(Array.isArray(e))return new Am(+e[0],+e[1]);if(e.x!==void 0&&e.y!==void 0)return new Am(+e.x,+e.y);throw new Error("Expected [x, y] or {x, y} point format")};function czr(e,t){let r=t.getBoundingClientRect();return new Am(e.clientX-r.left-(t.clientLeft||0),e.clientY-r.top-(t.clientTop||0))}var TU=czr;u();u();function Om(e,t,r,n){return{type:_r.FEATURE,properties:{meta:aa.VERTEX,parent:e,coord_path:r,active:n?Ri.ACTIVE:Ri.INACTIVE},geometry:{type:_r.POINT,coordinates:t}}}u();function IU(e,t,r){let n=t.geometry.coordinates,o=r.geometry.coordinates;if(n[1]>yU||n[1]<vU||o[1]>yU||o[1]<vU)return null;let i={lng:(n[0]+o[0])/2,lat:(n[1]+o[1])/2};return{type:_r.FEATURE,properties:{meta:aa.MIDPOINT,parent:e,lng:i.lng,lat:i.lat,coord_path:r.properties.coord_path},geometry:{type:_r.POINT,coordinates:[i.lng,i.lat]}}}function dpt(e,t={},r=null){let{type:n,coordinates:o}=e.geometry,i=e.properties&&e.properties.id,a=[];n===_r.POINT?a.push(Om(i,o,r,h(r))):n===_r.POLYGON?o.forEach((y,w)=>{c(y,r!==null?`${r}.${w}`:String(w))}):n===_r.LINE_STRING?c(o,r):n.indexOf(_r.MULTI_PREFIX)===0&&m();function c(y,w){let E="",A=null;y.forEach((P,j)=>{let D=w!=null?`${w}.${j}`:String(j),L=Om(i,P,D,h(D));if(t.midpoints&&A){let B=IU(i,A,L);B&&a.push(B)}A=L;let z=JSON.stringify(P);E!==z&&a.push(L),j===0&&(E=z)})}function h(y){return t.selectedPaths?t.selectedPaths.indexOf(y)!==-1:!1}function m(){let y=n.replace(_r.MULTI_PREFIX,"");o.forEach((w,E)=>{let A={type:_r.FEATURE,properties:e.properties,geometry:{type:y,coordinates:w}};a=a.concat(dpt(A,t,E))})}return a}var _2=dpt;u();var Su={enable(e){setTimeout(()=>{!e.map||!e.map.doubleClickZoom||!e._ctx||!e._ctx.store||!e._ctx.store.getInitialConfigValue||e._ctx.store.getInitialConfigValue("doubleClickZoom")&&e.map.doubleClickZoom.enable()},0)},disable(e){setTimeout(()=>{!e.map||!e.map.doubleClickZoom||e.map.doubleClickZoom.disable()},0)}};u();u();var{LAT_MIN:MU,LAT_MAX:CU,LAT_RENDERED_MIN:hpt,LAT_RENDERED_MAX:mpt,LNG_MIN:gpt,LNG_MAX:vpt}=Ci;function pzr(e){let t={Point:0,LineString:1,Polygon:2,MultiPoint:1,MultiLineString:2,MultiPolygon:3}[e.geometry.type],r=[e.geometry.coordinates].flat(t),n=r.map(c=>c[0]),o=r.map(c=>c[1]),i=c=>Math.min.apply(null,c),a=c=>Math.max.apply(null,c);return[i(n),i(o),a(n),a(o)]}function b2(e,t){let r=MU,n=CU,o=MU,i=CU,a=vpt,c=gpt;e.forEach(m=>{let y=pzr(m),w=y[1],E=y[3],A=y[0],P=y[2];w>r&&(r=w),E<n&&(n=E),E>o&&(o=E),w<i&&(i=w),A<a&&(a=A),P>c&&(c=P)});let h=t;return r+h.lat>mpt&&(h.lat=mpt-r),o+h.lat>CU&&(h.lat=CU-o),n+h.lat<hpt&&(h.lat=hpt-n),i+h.lat<MU&&(h.lat=MU-i),a+h.lng<=gpt&&(h.lng+=Math.ceil(Math.abs(h.lng)/360)*360),c+h.lng>=vpt&&(h.lng-=Math.ceil(Math.abs(h.lng)/360)*360),h}function x2(e,t){let r=b2(e.map(n=>n.toGeoJSON()),t);e.forEach(n=>{let o=n.getCoordinates(),i=m=>{let y={lng:m[0]+r.lng,lat:m[1]+r.lat};return[y.lng,y.lat]},a=m=>m.map(y=>i(y)),c=m=>m.map(y=>a(y)),h;n.type===_r.POINT?h=i(o):n.type===_r.LINE_STRING||n.type===_r.MULTI_POINT?h=o.map(i):n.type===_r.POLYGON||n.type===_r.MULTI_LINE_STRING?h=o.map(a):n.type===_r.MULTI_POLYGON&&(h=o.map(c)),n.incomingCoords(h)})}var ji={};ji.onSetup=function(e){let t={dragMoveLocation:null,boxSelectStartLocation:null,boxSelectElement:void 0,boxSelecting:!1,canBoxSelect:!1,dragMoving:!1,canDragMove:!1,initialDragPanState:this.map.dragPan.isEnabled(),initiallySelectedFeatureIds:e.featureIds||[]};return this.setSelected(t.initiallySelectedFeatureIds.filter(r=>this.getFeature(r)!==void 0)),this.fireActionable(),this.setActionableState({combineFeatures:!0,uncombineFeatures:!0,trash:!0}),t};ji.fireUpdate=function(){this.fire(qa.UPDATE,{action:o1.MOVE,features:this.getSelected().map(e=>e.toGeoJSON())})};ji.fireActionable=function(){let e=this.getSelected(),t=e.filter(i=>this.isInstanceOf("MultiFeature",i)),r=!1;if(e.length>1){r=!0;let i=e[0].type.replace("Multi","");e.forEach(a=>{a.type.replace("Multi","")!==i&&(r=!1)})}let n=t.length>0,o=e.length>0;this.setActionableState({combineFeatures:r,uncombineFeatures:n,trash:o})};ji.getUniqueIds=function(e){return e.length?e.map(r=>r.properties.id).filter(r=>r!==void 0).reduce((r,n)=>(r.add(n),r),new Vf).values():[]};ji.stopExtendedInteractions=function(e){e.boxSelectElement&&(e.boxSelectElement.parentNode&&e.boxSelectElement.parentNode.removeChild(e.boxSelectElement),e.boxSelectElement=null),(e.canDragMove||e.canBoxSelect)&&e.initialDragPanState===!0&&this.map.dragPan.enable(),e.boxSelecting=!1,e.canBoxSelect=!1,e.dragMoving=!1,e.canDragMove=!1};ji.onStop=function(){Su.enable(this)};ji.onMouseMove=function(e,t){return SU(t)&&e.dragMoving&&this.fireUpdate(),this.stopExtendedInteractions(e),!0};ji.onMouseOut=function(e){return e.dragMoving?this.fireUpdate():!0};ji.onTap=ji.onClick=function(e,t){if(v2(t))return this.clickAnywhere(e,t);if(g2(aa.VERTEX)(t))return this.clickOnVertex(e,t);if(SU(t))return this.clickOnFeature(e,t)};ji.clickAnywhere=function(e){let t=this.getSelectedIds();t.length&&(this.clearSelectedFeatures(),t.forEach(r=>this.doRender(r))),Su.enable(this),this.stopExtendedInteractions(e)};ji.clickOnVertex=function(e,t){this.changeMode(Gn.DIRECT_SELECT,{featureId:t.featureTarget.properties.parent,coordPath:t.featureTarget.properties.coord_path,startPos:t.lngLat}),this.updateUIClasses({mouse:ni.MOVE})};ji.startOnActiveFeature=function(e,t){this.stopExtendedInteractions(e),this.map.dragPan.disable(),this.doRender(t.featureTarget.properties.id),e.canDragMove=!0,e.dragMoveLocation=t.lngLat};ji.clickOnFeature=function(e,t){Su.disable(this),this.stopExtendedInteractions(e);let r=y2(t),n=this.getSelectedIds(),o=t.featureTarget.properties.id,i=this.isSelected(o);if(!r&&i&&this.getFeature(o).type!==_r.POINT)return this.changeMode(Gn.DIRECT_SELECT,{featureId:o});i&&r?(this.deselect(o),this.updateUIClasses({mouse:ni.POINTER}),n.length===1&&Su.enable(this)):!i&&r?(this.select(o),this.updateUIClasses({mouse:ni.MOVE})):!i&&!r&&(n.forEach(a=>this.doRender(a)),this.setSelected(o),this.updateUIClasses({mouse:ni.MOVE})),this.doRender(o)};ji.onMouseDown=function(e,t){if(e.initialDragPanState=this.map.dragPan.isEnabled(),yv(t))return this.startOnActiveFeature(e,t);if(this.drawConfig.boxSelect&&ppe(t))return this.startBoxSelect(e,t)};ji.startBoxSelect=function(e,t){this.stopExtendedInteractions(e),this.map.dragPan.disable(),e.boxSelectStartLocation=TU(t.originalEvent,this.map.getContainer()),e.canBoxSelect=!0};ji.onTouchStart=function(e,t){if(yv(t))return this.startOnActiveFeature(e,t)};ji.onDrag=function(e,t){if(e.canDragMove)return this.dragMove(e,t);if(this.drawConfig.boxSelect&&e.canBoxSelect)return this.whileBoxSelect(e,t)};ji.whileBoxSelect=function(e,t){e.boxSelecting=!0,this.updateUIClasses({mouse:ni.ADD}),e.boxSelectElement||(e.boxSelectElement=document.createElement("div"),e.boxSelectElement.classList.add($l.BOX_SELECT),this.map.getContainer().appendChild(e.boxSelectElement));let r=TU(t.originalEvent,this.map.getContainer()),n=Math.min(e.boxSelectStartLocation.x,r.x),o=Math.max(e.boxSelectStartLocation.x,r.x),i=Math.min(e.boxSelectStartLocation.y,r.y),a=Math.max(e.boxSelectStartLocation.y,r.y),c=`translate(${n}px, ${i}px)`;e.boxSelectElement.style.transform=c,e.boxSelectElement.style.WebkitTransform=c,e.boxSelectElement.style.width=`${o-n}px`,e.boxSelectElement.style.height=`${a-i}px`};ji.dragMove=function(e,t){e.dragMoving=!0,t.originalEvent.stopPropagation();let r={lng:t.lngLat.lng-e.dragMoveLocation.lng,lat:t.lngLat.lat-e.dragMoveLocation.lat};x2(this.getSelected(),r),e.dragMoveLocation=t.lngLat};ji.onTouchEnd=ji.onMouseUp=function(e,t){if(e.dragMoving)this.fireUpdate();else if(e.boxSelecting){let r=[e.boxSelectStartLocation,TU(t.originalEvent,this.map.getContainer())],n=this.featuresAt(null,r,"click"),o=this.getUniqueIds(n).filter(i=>!this.isSelected(i));o.length&&(this.select(o),o.forEach(i=>this.doRender(i)),this.updateUIClasses({mouse:ni.MOVE}))}this.stopExtendedInteractions(e)};ji.toDisplayFeatures=function(e,t,r){t.properties.active=this.isSelected(t.properties.id)?Ri.ACTIVE:Ri.INACTIVE,r(t),this.fireActionable(),!(t.properties.active!==Ri.ACTIVE||t.geometry.type===_r.POINT)&&_2(t).forEach(r)};ji.onTrash=function(){this.deleteFeature(this.getSelectedIds()),this.fireActionable()};ji.onCombineFeatures=function(){let e=this.getSelected();if(e.length===0||e.length<2)return;let t=[],r=[],n=e[0].type.replace("Multi","");for(let o=0;o<e.length;o++){let i=e[o];if(i.type.replace("Multi","")!==n)return;i.type.includes("Multi")?i.getCoordinates().forEach(a=>{t.push(a)}):t.push(i.getCoordinates()),r.push(i.toGeoJSON())}if(r.length>1){let o=this.newFeature({type:_r.FEATURE,properties:r[0].properties,geometry:{type:`Multi${n}`,coordinates:t}});this.addFeature(o),this.deleteFeature(this.getSelectedIds(),{silent:!0}),this.setSelected([o.id]),this.fire(qa.COMBINE_FEATURES,{createdFeatures:[o.toGeoJSON()],deletedFeatures:r})}this.fireActionable()};ji.onUncombineFeatures=function(){let e=this.getSelected();if(e.length===0)return;let t=[],r=[];for(let n=0;n<e.length;n++){let o=e[n];this.isInstanceOf("MultiFeature",o)&&(o.getFeatures().forEach(i=>{this.addFeature(i),i.properties=o.properties,t.push(i.toGeoJSON()),this.select([i.id])}),this.deleteFeature(o.id,{silent:!0}),r.push(o.toGeoJSON()))}t.length>1&&this.fire(qa.UNCOMBINE_FEATURES,{createdFeatures:t,deletedFeatures:r}),this.fireActionable()};var ypt=ji;u();var _pt=g2(aa.VERTEX),bpt=g2(aa.MIDPOINT),qi={};qi.fireUpdate=function(){this.fire(qa.UPDATE,{action:o1.CHANGE_COORDINATES,features:this.getSelected().map(e=>e.toGeoJSON())})};qi.fireActionable=function(e){this.setActionableState({combineFeatures:!1,uncombineFeatures:!1,trash:e.selectedCoordPaths.length>0})};qi.startDragging=function(e,t){e.initialDragPanState=this.map.dragPan.isEnabled(),this.map.dragPan.disable(),e.canDragMove=!0,e.dragMoveLocation=t.lngLat};qi.stopDragging=function(e){e.canDragMove&&e.initialDragPanState===!0&&this.map.dragPan.enable(),e.dragMoving=!1,e.canDragMove=!1,e.dragMoveLocation=null};qi.onVertex=function(e,t){this.startDragging(e,t);let r=t.featureTarget.properties,n=e.selectedCoordPaths.indexOf(r.coord_path);!y2(t)&&n===-1?e.selectedCoordPaths=[r.coord_path]:y2(t)&&n===-1&&e.selectedCoordPaths.push(r.coord_path);let o=this.pathsToCoordinates(e.featureId,e.selectedCoordPaths);this.setSelectedCoordinates(o)};qi.onMidpoint=function(e,t){this.startDragging(e,t);let r=t.featureTarget.properties;e.feature.addCoordinate(r.coord_path,r.lng,r.lat),this.fireUpdate(),e.selectedCoordPaths=[r.coord_path]};qi.pathsToCoordinates=function(e,t){return t.map(r=>({feature_id:e,coord_path:r}))};qi.onFeature=function(e,t){e.selectedCoordPaths.length===0?this.startDragging(e,t):this.stopDragging(e)};qi.dragFeature=function(e,t,r){x2(this.getSelected(),r),e.dragMoveLocation=t.lngLat};qi.dragVertex=function(e,t,r){let n=e.selectedCoordPaths.map(a=>e.feature.getCoordinate(a)),o=n.map(a=>({type:_r.FEATURE,properties:{},geometry:{type:_r.POINT,coordinates:a}})),i=b2(o,r);for(let a=0;a<n.length;a++){let c=n[a];e.feature.updateCoordinate(e.selectedCoordPaths[a],c[0]+i.lng,c[1]+i.lat)}};qi.clickNoTarget=function(){this.changeMode(Gn.SIMPLE_SELECT)};qi.clickInactive=function(){this.changeMode(Gn.SIMPLE_SELECT)};qi.clickActiveFeature=function(e){e.selectedCoordPaths=[],this.clearSelectedCoordinates(),e.feature.changed()};qi.onSetup=function(e){let t=e.featureId,r=this.getFeature(t);if(!r)throw new Error("You must provide a featureId to enter direct_select mode");if(r.type===_r.POINT)throw new TypeError("direct_select mode doesn't handle point features");let n={featureId:t,feature:r,dragMoveLocation:e.startPos||null,dragMoving:!1,canDragMove:!1,selectedCoordPaths:e.coordPath?[e.coordPath]:[]};return this.setSelectedCoordinates(this.pathsToCoordinates(t,n.selectedCoordPaths)),this.setSelected(t),Su.disable(this),this.setActionableState({trash:!0}),n};qi.onStop=function(){Su.enable(this),this.clearSelectedCoordinates()};qi.toDisplayFeatures=function(e,t,r){e.featureId===t.properties.id?(t.properties.active=Ri.ACTIVE,r(t),_2(t,{map:this.map,midpoints:!0,selectedPaths:e.selectedCoordPaths}).forEach(r)):(t.properties.active=Ri.INACTIVE,r(t)),this.fireActionable(e)};qi.onTrash=function(e){e.selectedCoordPaths.sort((t,r)=>r.localeCompare(t,"en",{numeric:!0})).forEach(t=>e.feature.removeCoordinate(t)),this.fireUpdate(),e.selectedCoordPaths=[],this.clearSelectedCoordinates(),this.fireActionable(e),e.feature.isValid()===!1&&(this.deleteFeature([e.featureId]),this.changeMode(Gn.SIMPLE_SELECT,{}))};qi.onMouseMove=function(e,t){let r=yv(t),n=_pt(t),o=bpt(t),i=e.selectedCoordPaths.length===0;return r&&i?this.updateUIClasses({mouse:ni.MOVE}):n&&!i?this.updateUIClasses({mouse:ni.MOVE}):this.updateUIClasses({mouse:ni.NONE}),(n||r||o)&&e.dragMoving&&this.fireUpdate(),this.stopDragging(e),!0};qi.onMouseOut=function(e){return e.dragMoving&&this.fireUpdate(),!0};qi.onTouchStart=qi.onMouseDown=function(e,t){if(_pt(t))return this.onVertex(e,t);if(yv(t))return this.onFeature(e,t);if(bpt(t))return this.onMidpoint(e,t)};qi.onDrag=function(e,t){if(e.canDragMove!==!0)return;e.dragMoving=!0,t.originalEvent.stopPropagation();let r={lng:t.lngLat.lng-e.dragMoveLocation.lng,lat:t.lngLat.lat-e.dragMoveLocation.lat};e.selectedCoordPaths.length>0?this.dragVertex(e,t,r):this.dragFeature(e,t,r),e.dragMoveLocation=t.lngLat};qi.onClick=function(e,t){if(v2(t))return this.clickNoTarget(e,t);if(yv(t))return this.clickActiveFeature(e,t);if(EU(t))return this.clickInactive(e,t);this.stopDragging(e)};qi.onTap=function(e,t){if(v2(t))return this.clickNoTarget(e,t);if(yv(t))return this.clickActiveFeature(e,t);if(EU(t))return this.clickInactive(e,t)};qi.onTouchEnd=qi.onMouseUp=function(e){e.dragMoving&&this.fireUpdate(),this.stopDragging(e)};var xpt=qi;u();var Pm={};Pm.onSetup=function(){let e=this.newFeature({type:_r.FEATURE,properties:{},geometry:{type:_r.POINT,coordinates:[]}});return this.addFeature(e),this.clearSelectedFeatures(),this.updateUIClasses({mouse:ni.ADD}),this.activateUIButton(qs.POINT),this.setActionableState({trash:!0}),{point:e}};Pm.stopDrawingAndRemove=function(e){this.deleteFeature([e.point.id],{silent:!0}),this.changeMode(Gn.SIMPLE_SELECT)};Pm.onTap=Pm.onClick=function(e,t){this.updateUIClasses({mouse:ni.MOVE}),e.point.updateCoordinate("",t.lngLat.lng,t.lngLat.lat),this.fire(qa.CREATE,{features:[e.point.toGeoJSON()]}),this.changeMode(Gn.SIMPLE_SELECT,{featureIds:[e.point.id]})};Pm.onStop=function(e){this.activateUIButton(),e.point.getCoordinate().length||this.deleteFeature([e.point.id],{silent:!0})};Pm.toDisplayFeatures=function(e,t,r){let n=t.properties.id===e.point.id;if(t.properties.active=n?Ri.ACTIVE:Ri.INACTIVE,!n)return r(t)};Pm.onTrash=Pm.stopDrawingAndRemove;Pm.onKeyUp=function(e,t){if(Zb(t)||Kb(t))return this.stopDrawingAndRemove(e,t)};var wpt=Pm;u();u();function fzr(e,t){return e.lngLat?e.lngLat.lng===t[0]&&e.lngLat.lat===t[1]:!1}var Jb=fzr;var nh={};nh.onSetup=function(){let e=this.newFeature({type:_r.FEATURE,properties:{},geometry:{type:_r.POLYGON,coordinates:[[]]}});return this.addFeature(e),this.clearSelectedFeatures(),Su.disable(this),this.updateUIClasses({mouse:ni.ADD}),this.activateUIButton(qs.POLYGON),this.setActionableState({trash:!0}),{polygon:e,currentVertexPosition:0}};nh.clickAnywhere=function(e,t){if(e.currentVertexPosition>0&&Jb(t,e.polygon.coordinates[0][e.currentVertexPosition-1]))return this.changeMode(Gn.SIMPLE_SELECT,{featureIds:[e.polygon.id]});this.updateUIClasses({mouse:ni.ADD}),e.polygon.updateCoordinate(`0.${e.currentVertexPosition}`,t.lngLat.lng,t.lngLat.lat),e.currentVertexPosition++,e.polygon.updateCoordinate(`0.${e.currentVertexPosition}`,t.lngLat.lng,t.lngLat.lat)};nh.clickOnVertex=function(e){return this.changeMode(Gn.SIMPLE_SELECT,{featureIds:[e.polygon.id]})};nh.onMouseMove=function(e,t){e.polygon.updateCoordinate(`0.${e.currentVertexPosition}`,t.lngLat.lng,t.lngLat.lat),Yb(t)&&this.updateUIClasses({mouse:ni.POINTER})};nh.onTap=nh.onClick=function(e,t){return Yb(t)?this.clickOnVertex(e,t):this.clickAnywhere(e,t)};nh.onKeyUp=function(e,t){Zb(t)?(this.deleteFeature([e.polygon.id],{silent:!0}),this.changeMode(Gn.SIMPLE_SELECT)):Kb(t)&&this.changeMode(Gn.SIMPLE_SELECT,{featureIds:[e.polygon.id]})};nh.onStop=function(e){this.updateUIClasses({mouse:ni.NONE}),Su.enable(this),this.activateUIButton(),this.getFeature(e.polygon.id)!==void 0&&(e.polygon.removeCoordinate(`0.${e.currentVertexPosition}`),e.polygon.isValid()?this.fire(qa.CREATE,{features:[e.polygon.toGeoJSON()]}):(this.deleteFeature([e.polygon.id],{silent:!0}),this.changeMode(Gn.SIMPLE_SELECT,{},{silent:!0})))};nh.toDisplayFeatures=function(e,t,r){let n=t.properties.id===e.polygon.id;if(t.properties.active=n?Ri.ACTIVE:Ri.INACTIVE,!n)return r(t);if(t.geometry.coordinates.length===0)return;let o=t.geometry.coordinates[0].length;if(!(o<3)){if(t.properties.meta=aa.FEATURE,r(Om(e.polygon.id,t.geometry.coordinates[0][0],"0.0",!1)),o>3){let i=t.geometry.coordinates[0].length-3;r(Om(e.polygon.id,t.geometry.coordinates[0][i],`0.${i}`,!1))}if(o<=4){let i=[[t.geometry.coordinates[0][0][0],t.geometry.coordinates[0][0][1]],[t.geometry.coordinates[0][1][0],t.geometry.coordinates[0][1][1]]];if(r({type:_r.FEATURE,properties:t.properties,geometry:{coordinates:i,type:_r.LINE_STRING}}),o===3)return}return r(t)}};nh.onTrash=function(e){this.deleteFeature([e.polygon.id],{silent:!0}),this.changeMode(Gn.SIMPLE_SELECT)};var Ept=nh;u();var oh={};oh.onSetup=function(e){e=e||{};let t=e.featureId,r,n,o="forward";if(t){if(r=this.getFeature(t),!r)throw new Error("Could not find a feature with the provided featureId");let i=e.from;if(i&&i.type==="Feature"&&i.geometry&&i.geometry.type==="Point"&&(i=i.geometry),i&&i.type==="Point"&&i.coordinates&&i.coordinates.length===2&&(i=i.coordinates),!i||!Array.isArray(i))throw new Error("Please use the `from` property to indicate which point to continue the line from");let a=r.coordinates.length-1;if(r.coordinates[a][0]===i[0]&&r.coordinates[a][1]===i[1])n=a+1,r.addCoordinate(n,...r.coordinates[a]);else if(r.coordinates[0][0]===i[0]&&r.coordinates[0][1]===i[1])o="backwards",n=0,r.addCoordinate(n,...r.coordinates[0]);else throw new Error("`from` should match the point at either the start or the end of the provided LineString")}else r=this.newFeature({type:_r.FEATURE,properties:{},geometry:{type:_r.LINE_STRING,coordinates:[]}}),n=0,this.addFeature(r);return this.clearSelectedFeatures(),Su.disable(this),this.updateUIClasses({mouse:ni.ADD}),this.activateUIButton(qs.LINE),this.setActionableState({trash:!0}),{line:r,currentVertexPosition:n,direction:o}};oh.clickAnywhere=function(e,t){if(e.currentVertexPosition>0&&Jb(t,e.line.coordinates[e.currentVertexPosition-1])||e.direction==="backwards"&&Jb(t,e.line.coordinates[e.currentVertexPosition+1]))return this.changeMode(Gn.SIMPLE_SELECT,{featureIds:[e.line.id]});this.updateUIClasses({mouse:ni.ADD}),e.line.updateCoordinate(e.currentVertexPosition,t.lngLat.lng,t.lngLat.lat),e.direction==="forward"?(e.currentVertexPosition++,e.line.updateCoordinate(e.currentVertexPosition,t.lngLat.lng,t.lngLat.lat)):e.line.addCoordinate(0,t.lngLat.lng,t.lngLat.lat)};oh.clickOnVertex=function(e){return this.changeMode(Gn.SIMPLE_SELECT,{featureIds:[e.line.id]})};oh.onMouseMove=function(e,t){e.line.updateCoordinate(e.currentVertexPosition,t.lngLat.lng,t.lngLat.lat),Yb(t)&&this.updateUIClasses({mouse:ni.POINTER})};oh.onTap=oh.onClick=function(e,t){if(Yb(t))return this.clickOnVertex(e,t);this.clickAnywhere(e,t)};oh.onKeyUp=function(e,t){Kb(t)?this.changeMode(Gn.SIMPLE_SELECT,{featureIds:[e.line.id]}):Zb(t)&&(this.deleteFeature([e.line.id],{silent:!0}),this.changeMode(Gn.SIMPLE_SELECT))};oh.onStop=function(e){Su.enable(this),this.activateUIButton(),this.getFeature(e.line.id)!==void 0&&(e.line.removeCoordinate(`${e.currentVertexPosition}`),e.line.isValid()?this.fire(qa.CREATE,{features:[e.line.toGeoJSON()]}):(this.deleteFeature([e.line.id],{silent:!0}),this.changeMode(Gn.SIMPLE_SELECT,{},{silent:!0})))};oh.onTrash=function(e){this.deleteFeature([e.line.id],{silent:!0}),this.changeMode(Gn.SIMPLE_SELECT)};oh.toDisplayFeatures=function(e,t,r){let n=t.properties.id===e.line.id;if(t.properties.active=n?Ri.ACTIVE:Ri.INACTIVE,!n)return r(t);t.geometry.coordinates.length<2||(t.properties.meta=aa.FEATURE,r(Om(e.line.id,t.geometry.coordinates[e.direction==="forward"?t.geometry.coordinates.length-2:1],`${e.direction==="forward"?t.geometry.coordinates.length-2:1}`,!1)),r(t))};var Spt=oh;var AU={simple_select:ypt,direct_select:xpt,draw_point:wpt,draw_polygon:Ept,draw_line_string:Spt};var dzr={defaultMode:Gn.SIMPLE_SELECT,keybindings:!0,touchEnabled:!0,clickBuffer:2,touchBuffer:25,boxSelect:!0,displayControlsDefault:!0,styles:wU,modes:AU,controls:{},userProperties:!1,suppressAPIEvents:!0},hzr={point:!0,line_string:!0,polygon:!0,trash:!0,combine_features:!0,uncombine_features:!0},mzr={point:!1,line_string:!1,polygon:!1,trash:!1,combine_features:!1,uncombine_features:!1};function Tpt(e,t){return e.map(r=>r.source?r:Object.assign({},r,{id:`${r.id}.${t}`,source:t==="hot"?tc.HOT:tc.COLD}))}function Ipt(e={}){let t=Object.assign({},e);return e.controls||(t.controls={}),e.displayControlsDefault===!1?t.controls=Object.assign({},mzr,e.controls):t.controls=Object.assign({},hzr,e.controls),t=Object.assign({},dzr,t),t.styles=Tpt(t.styles,"cold").concat(Tpt(t.styles,"hot")),t}u();var fpe=ee(xO(),1),Apt=ee(Cpt(),1);u();function OU(e,t){return e.length!==t.length?!1:JSON.stringify(e.map(r=>r).sort())===JSON.stringify(t.map(r=>r).sort())}var yzr={Polygon:Hb,LineString:Gb,Point:Bb,MultiPolygon:$b,MultiLineString:$b,MultiPoint:$b};function Opt(e,t){t.modes=Gn;let r=e.options.suppressAPIEvents!==void 0?!!e.options.suppressAPIEvents:!0;return t.getFeatureIdsAt=function(n){return th.click({point:n},null,e).map(i=>i.properties.id)},t.getSelectedIds=function(){return e.store.getSelectedIds()},t.getSelected=function(){return{type:_r.FEATURE_COLLECTION,features:e.store.getSelectedIds().map(n=>e.store.get(n)).map(n=>n.toGeoJSON())}},t.getSelectedPoints=function(){return{type:_r.FEATURE_COLLECTION,features:e.store.getSelectedCoordinates().map(n=>({type:_r.FEATURE,properties:{},geometry:{type:_r.POINT,coordinates:n.coordinates}}))}},t.set=function(n){if(n.type===void 0||n.type!==_r.FEATURE_COLLECTION||!Array.isArray(n.features))throw new Error("Invalid FeatureCollection");let o=e.store.createRenderBatch(),i=e.store.getAllIds().slice(),a=t.add(n),c=new Vf(a);return i=i.filter(h=>!c.has(h)),i.length&&t.delete(i),o(),a},t.add=function(n){let i=JSON.parse(JSON.stringify((0,Apt.default)(n))).features.map(a=>{if(a.id=a.id||m2(),a.geometry===null)throw new Error("Invalid geometry: null");if(e.store.get(a.id)===void 0||e.store.get(a.id).type!==a.geometry.type){let c=yzr[a.geometry.type];if(c===void 0)throw new Error(`Invalid geometry type: ${a.geometry.type}.`);let h=new c(e,a);e.store.add(h,{silent:r})}else{let c=e.store.get(a.id),h=c.properties;c.properties=a.properties,(0,fpe.default)(h,a.properties)||e.store.featureChanged(c.id,{silent:r}),(0,fpe.default)(c.getCoordinates(),a.geometry.coordinates)||c.incomingCoords(a.geometry.coordinates)}return a.id});return e.store.render(),i},t.get=function(n){let o=e.store.get(n);if(o)return o.toGeoJSON()},t.getAll=function(){return{type:_r.FEATURE_COLLECTION,features:e.store.getAll().map(n=>n.toGeoJSON())}},t.delete=function(n){return e.store.delete(n,{silent:r}),t.getMode()===Gn.DIRECT_SELECT&&!e.store.getSelectedIds().length?e.events.changeMode(Gn.SIMPLE_SELECT,void 0,{silent:r}):e.store.render(),t},t.deleteAll=function(){return e.store.delete(e.store.getAllIds(),{silent:r}),t.getMode()===Gn.DIRECT_SELECT?e.events.changeMode(Gn.SIMPLE_SELECT,void 0,{silent:r}):e.store.render(),t},t.changeMode=function(n,o={}){return n===Gn.SIMPLE_SELECT&&t.getMode()===Gn.SIMPLE_SELECT?(OU(o.featureIds||[],e.store.getSelectedIds())||(e.store.setSelected(o.featureIds,{silent:r}),e.store.render()),t):(n===Gn.DIRECT_SELECT&&t.getMode()===Gn.DIRECT_SELECT&&o.featureId===e.store.getSelectedIds()[0]||e.events.changeMode(n,o,{silent:r}),t)},t.getMode=function(){return e.events.getMode()},t.trash=function(){return e.events.trash({silent:r}),t},t.combineFeatures=function(){return e.events.combineFeatures({silent:r}),t},t.uncombineFeatures=function(){return e.events.uncombineFeatures({silent:r}),t},t.setFeatureProperty=function(n,o,i){return e.store.setFeatureProperty(n,o,i,{silent:r}),t},t}var dpe={};sw(dpe,{CommonSelectors:()=>Xb,ModeHandler:()=>bN,StringSet:()=>Vf,constrainFeatureMovement:()=>b2,createMidPoint:()=>IU,createSupplementaryPoints:()=>_2,createVertex:()=>Om,doubleClickZoom:()=>Su,euclideanDistance:()=>f2,featuresAt:()=>th,getFeatureAtAndSetCursors:()=>Ub,isClick:()=>d2,isEventAtCoordinates:()=>Jb,isTap:()=>h2,mapEventToBoundingBox:()=>bU,moveFeatures:()=>x2,sortFeatures:()=>_U,stringSetsAreEqual:()=>OU,theme:()=>wU,toDenseArray:()=>Wb});u();var _zr=function(e,t){e=Ipt(e);let r={options:e};t=Opt(r,t),r.api=t;let n=ppt(r);return t.onAdd=n.onAdd,t.onRemove=n.onRemove,t.types=qs,t.options=e,t};function PU(e){_zr(e,this)}PU.modes=AU;PU.constants=Ci;PU.lib=dpe;var Ppt=PU;u();var Dpt=ee(ke(),1);var hpe=dn({key:"trackingHandlerState",default:null}),ih=dn({key:"geoJsonChangeTrackingState",default:null}),DU=()=>{let e=Lr(ih),t=(0,Dpt.useCallback)(i=>{e(a=>{if(a.addIds.includes(i))return Dt(Te({},a),{addIds:a.addIds.filter(h=>h!==i)});{let h=new Map(a.dirtyMap);return h.delete(i),Dt(Te({},a),{dirtyMap:h,deleteIds:[...a.deleteIds,i]})}})},[]),r=pr(({snapshot:i,set:a})=>c=>yt(null,null,function*(){let m=(yield i.getPromise(nl)).features.find(y=>y.id===c.id);m!==void 0&&(Object.keys(m.properties).length!==Object.keys(c.properties).length||Object.keys(m.properties).some(y=>{let w=m.properties[y],E=c.properties[y];return y===kn.time?w[0]!==E[0]||w[1]!==E[1]:w!==E})?a(ih,y=>{let w=new Map(y.dirtyMap);return w.set(c.id,!0),Dt(Te({},y),{dirtyMap:w})}):a(ih,y=>{if(y.dirtyMap.has(c.id)&&y.dirtyMap.get(c.id)){let w=new Map(y.dirtyMap);return w.set(c.id,!1),Dt(Te({},y),{dirtyMap:w})}return y}))}),[]),n=pr(({snapshot:i,set:a})=>()=>yt(null,null,function*(){let c=yield i.getPromise(rr);if(Me(c)){let y={"draw.update":w=>{let E=w.features[0];a(ih,A=>{if(A.dirtyMap.has(E.id)&&!A.dirtyMap.get(E.id)){let P=new Map(A.dirtyMap);return P.set(E.id,!0),Dt(Te({},A),{dirtyMap:P})}return A})},"draw.create":w=>{a(ih,E=>Dt(Te({},E),{addIds:[...E.addIds,w.features[0].id]}))},"draw.delete":w=>{a(ih,E=>{if(E.addIds.includes(w.features[0].id))return Dt(Te({},E),{addIds:E.addIds.filter(P=>P!==w.features[0].id)});{let P=new Map(E.dirtyMap);return P.delete(w.features[0].id),Dt(Te({},E),{dirtyMap:P,deleteIds:[...E.deleteIds,w.features[0].id]})}})}};Object.keys(y).forEach(w=>{c.on(w,y[w])}),a(hpe,y)}let h=yield i.getPromise(nl),m=new Map;h.features.forEach(y=>{m.set(y.id,!1)}),a(ih,{dirtyMap:m,deleteIds:[],addIds:[]})}),[]),o=pr(({snapshot:i,set:a})=>()=>yt(null,null,function*(){let c=yield i.getPromise(rr);if(Me(c)){let h=yield i.getPromise(hpe);h!==null&&(Object.keys(h).forEach(m=>{c.off(m,h[m])}),a(hpe,null))}}),[]);return{handleDeleteFeature:t,handleUpdateFeature:r,registerMapEventHandler:n,unregisterMapEventHandler:o}};u();var NU="shifted",w2="position-control",_v={topLeft:".maplibregl-ctrl-top-left",topRight:".maplibregl-ctrl-top-right",bottomRight:".maplibregl-ctrl-bottom-right"},Npt=(e,t)=>{for(let r of Object.values(e)){let n=t._controlContainer.querySelector(r);n.classList.remove(NU),n.classList.add(NU)}},Lpt=(e,t)=>{for(let r of Object.values(e))t._controlContainer.querySelector(r).classList.remove(NU)},LU=()=>{let e=pr(({snapshot:i})=>()=>yt(null,null,function*(){let a=yield i.getPromise(rr);if(Me(a)){let c=[_v.topLeft];Npt(c,a)}}),[]),t=pr(({snapshot:i})=>()=>yt(null,null,function*(){let a=yield i.getPromise(rr);if(Me(a)){let c=[_v.topRight,_v.bottomRight];Npt(c,a)}}),[]),r=pr(({snapshot:i})=>()=>yt(null,null,function*(){let a=yield i.getPromise(rr);if(Me(a)){let c=[_v.topLeft];Lpt(c,a)}}),[]),n=pr(({snapshot:i})=>()=>yt(null,null,function*(){let a=yield i.getPromise(rr);if(Me(a)){let c=[_v.topRight,_v.bottomRight];Lpt(c,a)}}),[]),o=pr(({snapshot:i})=>()=>yt(null,null,function*(){let a=yield i.getPromise(rr);if(Me(a))for(let c of Object.values(_v))a._controlContainer.querySelector(c).classList.remove(NU)}),[]);return{shiftLeft:e,shiftRight:t,unShiftLeft:r,unShiftRight:n,removeControlShifts:o}};u();var rc="user_",bzr="rgb(0, 177, 158)",mpe=bzr,kpt=[{id:"polygon-fill",type:"fill",paint:{"fill-color":["coalesce",["get",`${rc}fill`],cn[Ir.FILL].COLOR],"fill-opacity":["coalesce",["get",`${rc}fill-opacity`],cn[Ir.FILL].OPACITY]},filter:["all",["==",["geometry-type"],"Polygon"]]},{id:"polygon-outline-hot",type:"line",layout:{"line-cap":"round","line-join":"round"},paint:{"line-color":["coalesce",["get",`${rc}stroke`],cn[Ir.OUTLINE].COLOR],"line-width":["coalesce",["get",`${rc}stroke-width`],cn[Ir.OUTLINE].WIDTH],"line-opacity":["coalesce",["get",`${rc}stroke-opacity`],cn[Ir.OUTLINE].OPACITY],"line-dasharray":[.2,2]},filter:["all",["==",["get","active"],"true"],["any",["==",["geometry-type"],"Polygon"],["all",["==",["get","mode"],"draw_polygon"],["==",["geometry-type"],"LineString"]]]]},{id:"polygon-outline-cold",type:"line",paint:{"line-color":["coalesce",["get",`${rc}stroke`],cn[Ir.OUTLINE].COLOR],"line-width":["coalesce",["get",`${rc}stroke-width`],cn[Ir.OUTLINE].WIDTH],"line-opacity":["coalesce",["get",`${rc}stroke-opacity`],cn[Ir.OUTLINE].OPACITY]},filter:["all",["==",["get","active"],"false"],["==",["geometry-type"],"Polygon"]]},{id:"line-hot",type:"line",layout:{"line-cap":"round","line-join":"round"},paint:{"line-color":["coalesce",["get",`${rc}stroke`],cn[Ir.LINE].COLOR],"line-width":["coalesce",["get",`${rc}stroke-width`],cn[Ir.LINE].WIDTH],"line-opacity":["coalesce",["get",`${rc}stroke-opacity`],cn[Ir.LINE].OPACITY],"line-dasharray":[.2,2]},filter:["all",["==",["get","active"],"true"],["==",["geometry-type"],"LineString"],["!=",["get","mode"],"draw_polygon"]]},{id:"line-cold",type:"line",paint:{"line-color":["coalesce",["get",`${rc}stroke`],cn[Ir.LINE].COLOR],"line-width":["coalesce",["get",`${rc}stroke-width`],cn[Ir.LINE].WIDTH],"line-opacity":["coalesce",["get",`${rc}stroke-opacity`],cn[Ir.LINE].OPACITY]},filter:["all",["==",["get","active"],"false"],["==",["geometry-type"],"LineString"]]},{id:"point",type:"symbol",layout:{"icon-image":mr.getSettings().MARKER_IMAGE_ID,"icon-size":.5,"icon-anchor":"bottom","icon-allow-overlap":!0},paint:{"icon-color":["to-color",["get",`${rc}marker`],cn[Ir.SYMBOL].COLOR],"icon-halo-color":["case",["==",["get","active"],"true"],mpe,"#fff"],"icon-halo-width":["case",["==",["get","active"],"true"],2,1]},filter:["all",["==",["geometry-type"],"Point"],["==",["get","meta"],"feature"]]},{id:"gl-draw-vertex-outer",type:"circle",filter:["all",["==",["geometry-type"],"Point"],["==",["get","meta"],"vertex"],["!=",["get","mode"],"simple_select"]],paint:{"circle-radius":["case",["==",["get","active"],"true"],7,5],"circle-color":"#fff"}},{id:"gl-draw-vertex-inner",type:"circle",filter:["all",["==",["geometry-type"],"Point"],["==",["get","meta"],"vertex"],["!=",["get","mode"],"simple_select"]],paint:{"circle-radius":["case",["==",["get","active"],"true"],5,3],"circle-color":mpe}},{id:"gl-draw-midpoint",type:"circle",filter:["all",["==",["get","meta"],"midpoint"]],paint:{"circle-radius":3,"circle-color":mpe}}];var xzr={styles:kpt,userProperties:!0,controls:{combine_features:!1,uncombine_features:!1}},wzr=e=>{let r=e._controlContainer.querySelector(_v.topRight).querySelectorAll("button");for(let n of r){let o=document.createElement("div");o.classList.add("maplibregl-ctrl","maplibregl-ctrl-group"),n.before(o),o.appendChild(n)}},vpe=()=>{let e=pr(({snapshot:r,set:n})=>()=>yt(null,null,function*(){let o=yield r.getPromise(rr),i=yield r.getPromise(nl);if(Me(o)&&Me(i)){let a=new Ppt(xzr);n(rl,a),o.addControl(a,"top-right"),a.add(i),o._controlContainer.classList.add(w2),wzr(o)}}),[]),t=pr(({snapshot:r,set:n})=>()=>yt(null,null,function*(){let o=yield r.getPromise(rr),i=yield r.getPromise(rl),{selectedLayer:a}=yield r.getPromise(cu);Me(o)&&Me(a)&&!a.isVisible(o)&&a.setVisibility(o,"visible"),Me(o)&&Me(i)&&(o.removeControl(i),n(rl,void 0),o._controlContainer.classList.remove(w2),Qd(n))}),[]);return{initializeDraw:e,removeDraw:t}},Ezr=()=>{let e=bt(bs),{initializeDraw:t,removeDraw:r}=vpe(),{shiftLeft:n,shiftRight:o,unShiftLeft:i,unShiftRight:a,removeControlShifts:c}=LU(),{registerMapEventHandler:h,unregisterMapEventHandler:m}=DU();return(0,gpe.useEffect)(()=>(t(),h(),()=>{r(),c(),m()}),[]),(0,gpe.useEffect)(()=>{let y=e===Ti.FEATURE,w=e===Ti.METADATA||e===Ti.HISTORY;y?(n(),a()):w?(o(),i()):c()},[e]),null},Rpt=Ezr;var jpt=Rpt;u();u();var Wf=ee(ke(),1);u();var _pe=ee(xO(),1);u();var Szr=({id:e,translationKey:t})=>({id:e,type:"success",text:fe(t)}),Tzr=({id:e,translationKey:t})=>({id:e,type:"danger",text:fe(t)}),Izr=(e="mapWrapper")=>{let t=pr(({set:n})=>o=>{let i=Szr({id:e,translationKey:o});n(ks,i)},[e]),r=pr(({set:n})=>o=>{let i=Tzr({id:e,translationKey:o});n(ks,i)},[e]);return{notifySuccess:t,notifyError:r}},a1=Izr;u();var qpt=e=>({[Ue.title]:e[Ue.title],[Ue.description]:e[Ue.description],[Ue.thumbnailUrl]:e[Ue.thumbnailUrl],[Ue.timePeriod]:e[Ue.timePeriod]}),ype=e=>{let t={link_thumb:e[Ue.thumbnailUrl],title:e[Ue.title],description:e[Ue.description],time_period:e[Ue.timePeriod]};return Vq(t)},zpt=e=>{let{timePeriodStart:t,timePeriodEnd:r}=Hq(e),n={[Ue.title]:e[Ue.title],[Kh]:t,[Xh]:r,[Ue.description]:e[Ue.description],[Ue.thumbnailUrl]:e[Ue.thumbnailUrl]};return Gq(n)},Fpt=e=>{let t=e,r=t[Kh],n=t[Xh],o=$q(r,n);return{[Ue.title]:t[Ue.title],[Ue.timePeriod]:o,[Ue.description]:t[Ue.description],[Ue.thumbnailUrl]:t[Ue.thumbnailUrl]}};var Mzr=()=>{let{notifyError:e}=a1(),t=pr(({snapshot:o,set:i})=>()=>yt(null,null,function*(){let a=yield o.getPromise(rl);if(a){let c=mct(a.getAll()),h=yield o.getPromise(rr),m=yield o.getPromise(kl),y=null;try{let w=$o.toPersistenceState(c);y=yield btt(w,ype(m))}catch(w){Xce(w,e);return}if(Me(y)){let w=$o.fromApplication({metadata:Dt(Te({},m),{[Ue.id]:y,[Ue.vectorMapId]:y,[Ue.version]:0,[Ue.userRole]:"owner"}),geoJson:c});w.addLayerToMap(h),i(qn,E=>E.concat(w)),i(tl,w.getId())}Qd(i)}})),r=pr(({snapshot:o,set:i})=>()=>yt(null,null,function*(){let a=yield o.getPromise(rl);if(a){let{selectedLayer:c}=yield o.getPromise(cu),h=yield o.getPromise(rr),m=yield o.getPromise(kl),y=yield o.getPromise(Wo),w=yield o.getPromise(aWe),E=yield o.getPromise(nl),A=qpt(c.getMetadata()),P=a.getAll(),j=!(0,_pe.default)(E,P)||w,L=!(0,_pe.default)(A,m)&&JF(y);if(!j&&!L){Qd(i);return}let z=y.version+1,B=gct(E,P,z),G=ype(m),Z=null;try{let K=$o.toPersistenceState(B);Z=yield xtt(y.id,j?K:null,L?G:null,y.version)}catch(K){Xce(K,e);return}Me(h)&&Me(c)&&Me(Z)&&(j&&(c.setDataOnMap(h,B),c.updateMetadata(Ue.version,Z)),L&&Object.keys(m).forEach(K=>{c.updateMetadata(K,m[K])}),i(d0,Date.now()),Qd(i))}})),n=pr(({snapshot:o,set:i})=>()=>yt(null,null,function*(){let a=yield o.getPromise(rl);if(a){let{selectedLayer:c}=yield o.getPromise(cu),h=yield o.getPromise(rr),m=yield o.getPromise(kl);if(Me(h)&&Me(c)){let y=gN(a.getAll());c.setDataOnMap(h,y),Object.keys(m).forEach(w=>{c.updateMetadata(w,m[w])}),i(d0,Date.now()),Qd(i)}}}));return pr(({snapshot:o})=>()=>yt(null,null,function*(){let i=yield o.getPromise(Wo);i!==null&&(i.type===Ka.REMOTE?i.id===null?yield t():yield r():yield n())}))},Upt=Mzr;u();var ts=ee(ke(),1),jU=ee(It(),1);u();var Qb=ee(ke(),1);var kU=ee(It(),1),Bpt=({count:e,id:t,formatFunction:r})=>{let n=(0,Qb.useMemo)(()=>r?r(e):dit.format(e),[e]),o=(0,Qb.useMemo)(()=>fit.select(e)==="one"?fe(`geojson-control-bar-${t}`):fe(`geojson-control-bar-${t}-plural`),[e,t]);return Qb.default.createElement("span",{className:t},Qb.default.createElement("span",{className:"bold"},n)," ",Qb.default.createElement("span",null,o))};Bpt.propTypes={count:kU.default.number,id:kU.default.string,formatFunction:kU.default.func};var RU=Bpt;var Czr=e=>`x${e}`,Vpt=({onUpdateViewMode:e,formattedFeatureCount:t,viewState:r})=>{let n=bt(ih);(0,ts.useEffect)(()=>{if(n===null)return;let i=n.addIds.length>0||n.deleteIds.length>0||Array.from(n.dirtyMap.values()).some(a=>a);e(i?nc.UNSAVED_FEATURE_CHANGES:nc.INITIAL)},[n]);let o=(0,ts.useMemo)(()=>n?Array.from(n.dirtyMap.values()).filter(i=>i).length:0,[n==null?void 0:n.dirtyMap]);return ts.default.createElement(ts.default.Fragment,null,r===nc.UNSAVED_FEATURE_CHANGES&&ts.default.createElement(ts.default.Fragment,null,ts.default.createElement(RU,{count:n.addIds.length,id:"new"}),ts.default.createElement("span",{className:"separator"}),ts.default.createElement(RU,{count:-n.deleteIds.length,id:"deleted"}),ts.default.createElement("span",{className:"separator"}),ts.default.createElement(RU,{count:o,id:"changed",formatFunction:Czr})),r===nc.SHOW_FEATURE_COUNT&&ts.default.createElement(ts.default.Fragment,null,ts.default.createElement("span",{className:"bold"},t)," ",fe("geojson-control-bar-hint-features-present")),r===nc.NO_TITLE&&ts.default.createElement("span",{className:"bold"},fe("geojson-control-bar-hint-add-title")),r===nc.NO_FEATURES&&ts.default.createElement("span",{className:"bold"},fe("geojson-control-bar-hint-add-feature")))};Vpt.propTypes={viewState:jU.default.number.isRequired,onUpdateViewMode:jU.default.func.isRequired,formattedFeatureCount:jU.default.string};var Gpt=(0,ts.memo)(Vpt);u();var ic=ee(ke(),1);u();var qU=ee(ke(),1);var Hpt=ee(It(),1);var $pt=({onClick:e})=>{let t=bt(zg),r=bt(Wo);return(r==null?void 0:r.type)===Ka.REMOTE?qU.default.createElement(mn,{disabled:!Vrt(r),className:"control-bar-layer-buttons--button layer-history-button",onClick:e,title:fe("geojson-control-bar-history-btn-title")},qU.default.createElement("span",{className:qt("control-bar-layer-buttons--badge",t!==null&&"in")}),qU.default.createElement(Hr,{name:"clock"})):null};$pt.propTypes={onClick:Hpt.default.func.isRequired};var Wpt=$pt;u();var EN=ee(ke(),1),Ypt=ee(It(),1);var Zpt=({onClick:e})=>{let t=bt(Wo),{type:r}=t,n=(0,EN.useMemo)(()=>dD(t)||fD(t),[t]);return r===Ka.REMOTE&&n?EN.default.createElement(mn,{className:"control-bar-layer-buttons--button layer-roles-button",onClick:e,title:fe("geojson-control-bar-roles-btn-title")},EN.default.createElement(Hr,{name:"user-roles"})):null};Zpt.propTypes={onClick:Ypt.default.func.isRequired};var Kpt=Zpt;u();u();u();var Nm=ee(ke(),1);u();var ah=ee(ke());var Azr=(0,ah.createContext)(null),bpe={didCatch:!1,error:null},E2=class extends ah.Component{constructor(t){super(t),this.resetErrorBoundary=this.resetErrorBoundary.bind(this),this.state=bpe}static getDerivedStateFromError(t){return{didCatch:!0,error:t}}resetErrorBoundary(){let{error:t}=this.state;if(t!==null){for(var r,n,o=arguments.length,i=new Array(o),a=0;a<o;a++)i[a]=arguments[a];(r=(n=this.props).onReset)===null||r===void 0||r.call(n,{args:i,reason:"imperative-api"}),this.setState(bpe)}}componentDidCatch(t,r){var n,o;(n=(o=this.props).onError)===null||n===void 0||n.call(o,t,r)}componentDidUpdate(t,r){let{didCatch:n}=this.state,{resetKeys:o}=this.props;if(n&&r.error!==null&&Ozr(t.resetKeys,o)){var i,a;(i=(a=this.props).onReset)===null||i===void 0||i.call(a,{next:o,prev:t.resetKeys,reason:"keys"}),this.setState(bpe)}}render(){let{children:t,fallbackRender:r,FallbackComponent:n,fallback:o}=this.props,{didCatch:i,error:a}=this.state,c=t;if(i){let h={error:a,resetErrorBoundary:this.resetErrorBoundary};if(typeof r=="function")c=r(h);else if(n)c=(0,ah.createElement)(n,h);else if(o!==void 0)c=o;else throw a}return(0,ah.createElement)(Azr.Provider,{value:{didCatch:i,error:a,resetErrorBoundary:this.resetErrorBoundary}},c)}};function Ozr(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[],t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:[];return e.length!==t.length||e.some((r,n)=>!Object.is(r,t[n]))}var Vpe=ee(It(),1);u();var Xpt=ee(ke(),1);u();var S2={OWNER:"owner",EDITOR:"editor"},Tu={OWNERS:"owners",EDITORS:"editors"};var Jpt=dn({key:"vectorMapRolesQueryIdState",default:0}),Pzr=Js({key:"vectorMapRolesQuery",get:t=>yt(null,[t],function*({get:e}){e(Jpt);let{id:r,type:n}=e(Wo),o={editors:[],owners:[]};if(n===Ka.LOCAL||!Me(r))return o;let i=yield Itt(r);for(let{user_id:a,role:c}of i)c===S2.EDITOR?o.editors.push(a):c===S2.OWNER?o.owners.push(a):console.warn(`Cannot map unknown role '${c}'`);return o})}),xpe=()=>pr(({set:t})=>()=>{t(Jpt,r=>r+1)},[]),Dzr=()=>{let e=xpe(),t=bt(Pzr);return(0,Xpt.useEffect)(()=>()=>{e()},[]),t},Qpt=Dzr;u();u();var zi=ee(ke(),1);u();var GU=ee(ke(),1),An=ee(ke(),1);var IN=e=>e.type==="checkbox",ex=e=>e instanceof Date,oc=e=>e==null,uft=e=>typeof e=="object",rs=e=>!oc(e)&&!Array.isArray(e)&&uft(e)&&!ex(e),cft=e=>rs(e)&&e.target?IN(e.target)?e.target.checked:e.target.value:e,Nzr=e=>e.substring(0,e.search(/\.\d+(\.|$)/))||e,pft=(e,t)=>e.has(Nzr(t)),Lzr=e=>{let t=e.constructor&&e.constructor.prototype;return rs(t)&&t.hasOwnProperty("isPrototypeOf")},Lpe=typeof window!="undefined"&&typeof window.HTMLElement!="undefined"&&typeof document!="undefined";function Ta(e){let t,r=Array.isArray(e),n=typeof FileList!="undefined"?e instanceof FileList:!1;if(e instanceof Date)t=new Date(e);else if(e instanceof Set)t=new Set(e);else if(!(Lpe&&(e instanceof Blob||n))&&(r||rs(e))){if(t=r?[]:{},!r&&!Lzr(e))t=e;else for(let o in e)e.hasOwnProperty(o)&&(t[o]=Ta(e[o]));}else return e;return t}var MN=e=>Array.isArray(e)?e.filter(Boolean):[],sa=e=>e===void 0,gr=(e,t,r)=>{if(!t||!rs(e))return r;let n=MN(t.split(/[,[\].]+?/)).reduce((o,i)=>oc(o)?o:o[i],e);return sa(n)||n===e?sa(e[t])?r:e[t]:n},Dp=e=>typeof e=="boolean",kpe=e=>/^\w*$/.test(e),fft=e=>MN(e.replace(/["|']|\]/g,"").split(/\.|\[/)),_i=(e,t,r)=>{let n=-1,o=kpe(t)?[t]:fft(t),i=o.length,a=i-1;for(;++n<i;){let c=o[n],h=r;if(n!==a){let m=e[c];h=rs(m)||Array.isArray(m)?m:isNaN(+o[n+1])?{}:[]}if(c==="__proto__"||c==="constructor"||c==="prototype")return;e[c]=h,e=e[c]}},FU={BLUR:"blur",FOCUS_OUT:"focusout",CHANGE:"change"},Hf={onBlur:"onBlur",onChange:"onChange",onSubmit:"onSubmit",onTouched:"onTouched",all:"all"},bv={max:"max",min:"min",maxLength:"maxLength",minLength:"minLength",pattern:"pattern",required:"required",validate:"validate"},dft=An.default.createContext(null),C2=()=>An.default.useContext(dft),A2=e=>{let n=e,{children:t}=n,r=En(n,["children"]);return An.default.createElement(dft.Provider,{value:r},t)},hft=(e,t,r,n=!0)=>{let o={defaultValues:t._defaultValues};for(let i in e)Object.defineProperty(o,i,{get:()=>{let a=i;return t._proxyFormState[a]!==Hf.all&&(t._proxyFormState[a]=!n||Hf.all),r&&(r[a]=!0),e[a]}});return o},Rpe=typeof window!="undefined"?GU.useLayoutEffect:GU.useEffect;function kzr(e){let t=C2(),{control:r=t.control,disabled:n,name:o,exact:i}=e||{},[a,c]=An.default.useState(r._formState),h=An.default.useRef({isDirty:!1,isLoading:!1,dirtyFields:!1,touchedFields:!1,validatingFields:!1,isValidating:!1,isValid:!1,errors:!1});return Rpe(()=>r._subscribe({name:o,formState:h.current,exact:i,callback:m=>{!n&&c(Te(Te({},r._formState),m))}}),[o,n,i]),An.default.useEffect(()=>{h.current.isValid&&r._setValid(!0)},[r]),An.default.useMemo(()=>hft(a,r,h.current,!1),[a,r])}var Dm=e=>typeof e=="string",mft=(e,t,r,n,o)=>Dm(e)?(n&&t.watch.add(e),gr(r,e,o)):Array.isArray(e)?e.map(i=>(n&&t.watch.add(i),gr(r,i))):(n&&(t.watchAll=!0),r);function Rzr(e){let t=C2(),{control:r=t.control,name:n,defaultValue:o,disabled:i,exact:a}=e||{},c=An.default.useRef(o),[h,m]=An.default.useState(r._getWatch(n,c.current));return Rpe(()=>r._subscribe({name:n,formState:{values:!0},exact:a,callback:y=>!i&&m(mft(n,r._names,y.values||r._formValues,!1,c.current))}),[n,r,i,a]),An.default.useEffect(()=>r._removeUnmounted()),h}function jzr(e){let t=C2(),{name:r,disabled:n,control:o=t.control,shouldUnregister:i}=e,a=pft(o._names.array,r),c=Rzr({control:o,name:r,defaultValue:gr(o._formValues,r,gr(o._defaultValues,r,e.defaultValue)),exact:!0}),h=kzr({control:o,name:r,exact:!0}),m=An.default.useRef(e),y=An.default.useRef(o.register(r,Te(Dt(Te({},e.rules),{value:c}),Dp(e.disabled)?{disabled:e.disabled}:{}))),w=An.default.useMemo(()=>Object.defineProperties({},{invalid:{enumerable:!0,get:()=>!!gr(h.errors,r)},isDirty:{enumerable:!0,get:()=>!!gr(h.dirtyFields,r)},isTouched:{enumerable:!0,get:()=>!!gr(h.touchedFields,r)},isValidating:{enumerable:!0,get:()=>!!gr(h.validatingFields,r)},error:{enumerable:!0,get:()=>gr(h.errors,r)}}),[h,r]),E=An.default.useCallback(D=>y.current.onChange({target:{value:cft(D),name:r},type:FU.CHANGE}),[r]),A=An.default.useCallback(()=>y.current.onBlur({target:{value:gr(o._formValues,r),name:r},type:FU.BLUR}),[r,o._formValues]),P=An.default.useCallback(D=>{let L=gr(o._fields,r);L&&D&&(L._f.ref={focus:()=>D.focus(),select:()=>D.select(),setCustomValidity:z=>D.setCustomValidity(z),reportValidity:()=>D.reportValidity()})},[o._fields,r]),j=An.default.useMemo(()=>Dt(Te({name:r,value:c},Dp(n)||h.disabled?{disabled:h.disabled||n}:{}),{onChange:E,onBlur:A,ref:P}),[r,n,h.disabled,E,A,P,c]);return An.default.useEffect(()=>{let D=o._options.shouldUnregister||i;o.register(r,Te(Te({},m.current.rules),Dp(m.current.disabled)?{disabled:m.current.disabled}:{}));let L=(z,B)=>{let G=gr(o._fields,z);G&&G._f&&(G._f.mount=B)};if(L(r,!0),D){let z=Ta(gr(o._options.defaultValues,r));_i(o._defaultValues,r,z),sa(gr(o._formValues,r))&&_i(o._formValues,r,z)}return!a&&o.register(r),()=>{(a?D&&!o._state.action:D)?o.unregister(r):L(r,!1)}},[r,o,a,i]),An.default.useEffect(()=>{o._setDisabledField({disabled:n,name:r})},[n,r,o]),An.default.useMemo(()=>({field:j,formState:h,fieldState:w}),[j,h,w])}var O2=e=>e.render(jzr(e));var qzr=(e,t,r,n,o)=>t?Dt(Te({},r[e]),{types:Dt(Te({},r[e]&&r[e].types?r[e].types:{}),{[n]:o||!0})}):{},Wc=e=>Array.isArray(e)?e:[e],eft=()=>{let e=[];return{get observers(){return e},next:o=>{for(let i of e)i.next&&i.next(o)},subscribe:o=>(e.push(o),{unsubscribe:()=>{e=e.filter(i=>i!==o)}}),unsubscribe:()=>{e=[]}}},Ppe=e=>oc(e)||!uft(e);function l1(e,t){if(Ppe(e)||Ppe(t))return e===t;if(ex(e)&&ex(t))return e.getTime()===t.getTime();let r=Object.keys(e),n=Object.keys(t);if(r.length!==n.length)return!1;for(let o of r){let i=e[o];if(!n.includes(o))return!1;if(o!=="ref"){let a=t[o];if(ex(i)&&ex(a)||rs(i)&&rs(a)||Array.isArray(i)&&Array.isArray(a)?!l1(i,a):i!==a)return!1}}return!0}var Iu=e=>rs(e)&&!Object.keys(e).length,jpe=e=>e.type==="file",sh=e=>typeof e=="function",UU=e=>{if(!Lpe)return!1;let t=e?e.ownerDocument:0;return e instanceof(t&&t.defaultView?t.defaultView.HTMLElement:HTMLElement)},gft=e=>e.type==="select-multiple",qpe=e=>e.type==="radio",zzr=e=>qpe(e)||IN(e),wpe=e=>UU(e)&&e.isConnected;function Fzr(e,t){let r=t.slice(0,-1).length,n=0;for(;n<r;)e=sa(e)?n++:e[t[n++]];return e}function Uzr(e){for(let t in e)if(e.hasOwnProperty(t)&&!sa(e[t]))return!1;return!0}function Is(e,t){let r=Array.isArray(t)?t:kpe(t)?[t]:fft(t),n=r.length===1?e:Fzr(e,r),o=r.length-1,i=r[o];return n&&delete n[i],o!==0&&(rs(n)&&Iu(n)||Array.isArray(n)&&Uzr(n))&&Is(e,r.slice(0,-1)),e}var vft=e=>{for(let t in e)if(sh(e[t]))return!0;return!1};function BU(e,t={}){let r=Array.isArray(e);if(rs(e)||r)for(let n in e)Array.isArray(e[n])||rs(e[n])&&!vft(e[n])?(t[n]=Array.isArray(e[n])?[]:{},BU(e[n],t[n])):oc(e[n])||(t[n]=!0);return t}function yft(e,t,r){let n=Array.isArray(e);if(rs(e)||n)for(let o in e)Array.isArray(e[o])||rs(e[o])&&!vft(e[o])?sa(t)||Ppe(r[o])?r[o]=Array.isArray(e[o])?BU(e[o],[]):Te({},BU(e[o])):yft(e[o],oc(t)?{}:t[o],r[o]):r[o]=!l1(e[o],t[o]);return r}var SN=(e,t)=>yft(e,t,BU(t)),tft={value:!1,isValid:!1},rft={value:!0,isValid:!0},_ft=e=>{if(Array.isArray(e)){if(e.length>1){let t=e.filter(r=>r&&r.checked&&!r.disabled).map(r=>r.value);return{value:t,isValid:!!t.length}}return e[0].checked&&!e[0].disabled?e[0].attributes&&!sa(e[0].attributes.value)?sa(e[0].value)||e[0].value===""?rft:{value:e[0].value,isValid:!0}:rft:tft}return tft},bft=(e,{valueAsNumber:t,valueAsDate:r,setValueAs:n})=>sa(e)?e:t?e===""?NaN:e&&+e:r&&Dm(e)?new Date(e):n?n(e):e,nft={isValid:!1,value:null},xft=e=>Array.isArray(e)?e.reduce((t,r)=>r&&r.checked&&!r.disabled?{isValid:!0,value:r.value}:t,nft):nft;function oft(e){let t=e.ref;return jpe(t)?t.files:qpe(t)?xft(e.refs).value:gft(t)?[...t.selectedOptions].map(({value:r})=>r):IN(t)?_ft(e.refs).value:bft(sa(t.value)?e.ref.value:t.value,e)}var Bzr=(e,t,r,n)=>{let o={};for(let i of e){let a=gr(t,i);a&&_i(o,i,a._f)}return{criteriaMode:r,names:[...e],fields:o,shouldUseNativeValidation:n}},VU=e=>e instanceof RegExp,TN=e=>sa(e)?e:VU(e)?e.source:rs(e)?VU(e.value)?e.value.source:e.value:e,I2=e=>({isOnSubmit:!e||e===Hf.onSubmit,isOnBlur:e===Hf.onBlur,isOnChange:e===Hf.onChange,isOnAll:e===Hf.all,isOnTouch:e===Hf.onTouched}),ift="AsyncFunction",Vzr=e=>!!e&&!!e.validate&&!!(sh(e.validate)&&e.validate.constructor.name===ift||rs(e.validate)&&Object.values(e.validate).find(t=>t.constructor.name===ift)),Gzr=e=>e.mount&&(e.required||e.min||e.max||e.maxLength||e.minLength||e.pattern||e.validate),Dpe=(e,t,r)=>!r&&(t.watchAll||t.watch.has(e)||[...t.watch].some(n=>e.startsWith(n)&&/^\.\w+/.test(e.slice(n.length)))),M2=(e,t,r,n)=>{for(let i of r||Object.keys(e)){let a=gr(e,i);if(a){let o=a,{_f:c}=o,h=En(o,["_f"]);if(c){if(c.refs&&c.refs[0]&&t(c.refs[0],i)&&!n)return!0;if(c.ref&&t(c.ref,c.name)&&!n)return!0;if(M2(h,t))break}else if(rs(h)&&M2(h,t))break}}};function aft(e,t,r){let n=gr(e,r);if(n||kpe(r))return{error:n,name:r};let o=r.split(".");for(;o.length;){let i=o.join("."),a=gr(t,i),c=gr(e,i);if(a&&!Array.isArray(a)&&r!==i)return{name:r};if(c&&c.type)return{name:i,error:c};o.pop()}return{name:r}}var Hzr=(e,t,r,n)=>{r(e);let a=e,{name:o}=a,i=En(a,["name"]);return Iu(i)||Object.keys(i).length>=Object.keys(t).length||Object.keys(i).find(c=>t[c]===(!n||Hf.all))},$zr=(e,t,r)=>!e||!t||e===t||Wc(e).some(n=>n&&(r?n===t:n.startsWith(t)||t.startsWith(n))),Wzr=(e,t,r,n,o)=>o.isOnAll?!1:!r&&o.isOnTouch?!(t||e):(r?n.isOnBlur:o.isOnBlur)?!e:(r?n.isOnChange:o.isOnChange)?e:!0,Yzr=(e,t)=>!MN(gr(e,t)).length&&Is(e,t),wft=(e,t,r)=>{let n=Wc(gr(e,r));return _i(n,"root",t[r]),_i(e,r,n),e},zU=e=>Dm(e);function sft(e,t,r="validate"){if(zU(e)||Array.isArray(e)&&e.every(zU)||Dp(e)&&!e)return{type:r,message:zU(e)?e:"",ref:t}}var T2=e=>rs(e)&&!VU(e)?e:{value:e,message:""},Npe=(e,t,r,n,o,i)=>yt(null,null,function*(){let{ref:a,refs:c,required:h,maxLength:m,minLength:y,min:w,max:E,pattern:A,validate:P,name:j,valueAsNumber:D,mount:L}=e._f,z=gr(r,j);if(!L||t.has(j))return{};let B=c?c[0]:a,G=_e=>{o&&B.reportValidity&&(B.setCustomValidity(Dp(_e)?"":_e||""),B.reportValidity())},Z={},K=qpe(a),te=IN(a),se=K||te,le=(D||jpe(a))&&sa(a.value)&&sa(z)||UU(a)&&a.value===""||z===""||Array.isArray(z)&&!z.length,pe=qzr.bind(null,j,n,Z),me=(_e,de,Ce,Ze=bv.maxLength,rt=bv.minLength)=>{let ct=_e?de:Ce;Z[j]=Te({type:_e?Ze:rt,message:ct,ref:a},pe(_e?Ze:rt,ct))};if(i?!Array.isArray(z)||!z.length:h&&(!se&&(le||oc(z))||Dp(z)&&!z||te&&!_ft(c).isValid||K&&!xft(c).isValid)){let{value:_e,message:de}=zU(h)?{value:!!h,message:h}:T2(h);if(_e&&(Z[j]=Te({type:bv.required,message:de,ref:B},pe(bv.required,de)),!n))return G(de),Z}if(!le&&(!oc(w)||!oc(E))){let _e,de,Ce=T2(E),Ze=T2(w);if(!oc(z)&&!isNaN(z)){let rt=a.valueAsNumber||z&&+z;oc(Ce.value)||(_e=rt>Ce.value),oc(Ze.value)||(de=rt<Ze.value)}else{let rt=a.valueAsDate||new Date(z),ct=_t=>new Date(new Date().toDateString()+" "+_t),qe=a.type=="time",lt=a.type=="week";Dm(Ce.value)&&z&&(_e=qe?ct(z)>ct(Ce.value):lt?z>Ce.value:rt>new Date(Ce.value)),Dm(Ze.value)&&z&&(de=qe?ct(z)<ct(Ze.value):lt?z<Ze.value:rt<new Date(Ze.value))}if((_e||de)&&(me(!!_e,Ce.message,Ze.message,bv.max,bv.min),!n))return G(Z[j].message),Z}if((m||y)&&!le&&(Dm(z)||i&&Array.isArray(z))){let _e=T2(m),de=T2(y),Ce=!oc(_e.value)&&z.length>+_e.value,Ze=!oc(de.value)&&z.length<+de.value;if((Ce||Ze)&&(me(Ce,_e.message,de.message),!n))return G(Z[j].message),Z}if(A&&!le&&Dm(z)){let{value:_e,message:de}=T2(A);if(VU(_e)&&!z.match(_e)&&(Z[j]=Te({type:bv.pattern,message:de,ref:a},pe(bv.pattern,de)),!n))return G(de),Z}if(P){if(sh(P)){let _e=yield P(z,r),de=sft(_e,B);if(de&&(Z[j]=Te(Te({},de),pe(bv.validate,de.message)),!n))return G(de.message),Z}else if(rs(P)){let _e={};for(let de in P){if(!Iu(_e)&&!n)break;let Ce=sft(yield P[de](z,r),B,de);Ce&&(_e=Te(Te({},Ce),pe(de,Ce.message)),G(Ce.message),n&&(Z[j]=_e))}if(!Iu(_e)&&(Z[j]=Te({ref:B},_e),!n))return Z}}return G(!0),Z}),Zzr={mode:Hf.onSubmit,reValidateMode:Hf.onChange,shouldFocusError:!0};function Kzr(e={}){let t=Te(Te({},Zzr),e),r={submitCount:0,isDirty:!1,isReady:!1,isLoading:sh(t.defaultValues),isValidating:!1,isSubmitted:!1,isSubmitting:!1,isSubmitSuccessful:!1,isValid:!1,touchedFields:{},dirtyFields:{},validatingFields:{},errors:t.errors||{},disabled:t.disabled||!1},n={},o=rs(t.defaultValues)||rs(t.values)?Ta(t.defaultValues||t.values)||{}:{},i=t.shouldUnregister?{}:Ta(o),a={action:!1,mount:!1,watch:!1},c={mount:new Set,disabled:new Set,unMount:new Set,array:new Set,watch:new Set},h,m=0,y={isDirty:!1,dirtyFields:!1,validatingFields:!1,touchedFields:!1,isValidating:!1,isValid:!1,errors:!1},w=Te({},y),E={array:eft(),state:eft()},A=I2(t.mode),P=I2(t.reValidateMode),j=t.criteriaMode===Hf.all,D=Le=>Je=>{clearTimeout(m),m=setTimeout(Le,Je)},L=Le=>yt(null,null,function*(){if(!t.disabled&&(y.isValid||w.isValid||Le)){let Je=t.resolver?Iu((yield le()).errors):yield me(n,!0);Je!==r.isValid&&E.state.next({isValid:Je})}}),z=(Le,Je)=>{!t.disabled&&(y.isValidating||y.validatingFields||w.isValidating||w.validatingFields)&&((Le||Array.from(c.mount)).forEach(tt=>{tt&&(Je?_i(r.validatingFields,tt,Je):Is(r.validatingFields,tt))}),E.state.next({validatingFields:r.validatingFields,isValidating:!Iu(r.validatingFields)}))},B=(Le,Je=[],tt,Ft,$t=!0,xe=!0)=>{if(Ft&&tt&&!t.disabled){if(a.action=!0,xe&&Array.isArray(gr(n,Le))){let J=tt(gr(n,Le),Ft.argA,Ft.argB);$t&&_i(n,Le,J)}if(xe&&Array.isArray(gr(r.errors,Le))){let J=tt(gr(r.errors,Le),Ft.argA,Ft.argB);$t&&_i(r.errors,Le,J),Yzr(r.errors,Le)}if((y.touchedFields||w.touchedFields)&&xe&&Array.isArray(gr(r.touchedFields,Le))){let J=tt(gr(r.touchedFields,Le),Ft.argA,Ft.argB);$t&&_i(r.touchedFields,Le,J)}(y.dirtyFields||w.dirtyFields)&&(r.dirtyFields=SN(o,i)),E.state.next({name:Le,isDirty:de(Le,Je),dirtyFields:r.dirtyFields,errors:r.errors,isValid:r.isValid})}else _i(i,Le,Je)},G=(Le,Je)=>{_i(r.errors,Le,Je),E.state.next({errors:r.errors})},Z=Le=>{r.errors=Le,E.state.next({errors:r.errors,isValid:!1})},K=(Le,Je,tt,Ft)=>{let $t=gr(n,Le);if($t){let xe=gr(i,Le,sa(tt)?gr(o,Le):tt);sa(xe)||Ft&&Ft.defaultChecked||Je?_i(i,Le,Je?xe:oft($t._f)):rt(Le,xe),a.mount&&L()}},te=(Le,Je,tt,Ft,$t)=>{let xe=!1,J=!1,oe={name:Le};if(!t.disabled){if(!tt||Ft){(y.isDirty||w.isDirty)&&(J=r.isDirty,r.isDirty=oe.isDirty=de(),xe=J!==oe.isDirty);let ue=l1(gr(o,Le),Je);J=!!gr(r.dirtyFields,Le),ue?Is(r.dirtyFields,Le):_i(r.dirtyFields,Le,!0),oe.dirtyFields=r.dirtyFields,xe=xe||(y.dirtyFields||w.dirtyFields)&&J!==!ue}if(tt){let ue=gr(r.touchedFields,Le);ue||(_i(r.touchedFields,Le,tt),oe.touchedFields=r.touchedFields,xe=xe||(y.touchedFields||w.touchedFields)&&ue!==tt)}xe&&$t&&E.state.next(oe)}return xe?oe:{}},se=(Le,Je,tt,Ft)=>{let $t=gr(r.errors,Le),xe=(y.isValid||w.isValid)&&Dp(Je)&&r.isValid!==Je;if(t.delayError&&tt?(h=D(()=>G(Le,tt)),h(t.delayError)):(clearTimeout(m),h=null,tt?_i(r.errors,Le,tt):Is(r.errors,Le)),(tt?!l1($t,tt):$t)||!Iu(Ft)||xe){let J=Dt(Te(Te({},Ft),xe&&Dp(Je)?{isValid:Je}:{}),{errors:r.errors,name:Le});r=Te(Te({},r),J),E.state.next(J)}},le=Le=>yt(null,null,function*(){z(Le,!0);let Je=yield t.resolver(i,t.context,Bzr(Le||c.mount,n,t.criteriaMode,t.shouldUseNativeValidation));return z(Le),Je}),pe=Le=>yt(null,null,function*(){let{errors:Je}=yield le(Le);if(Le)for(let tt of Le){let Ft=gr(Je,tt);Ft?_i(r.errors,tt,Ft):Is(r.errors,tt)}else r.errors=Je;return Je}),me=(Ft,$t,...xe)=>yt(null,[Ft,$t,...xe],function*(Le,Je,tt={valid:!0}){for(let oe in Le){let ue=Le[oe];if(ue){let J=ue,{_f:we}=J,Fe=En(J,["_f"]);if(we){let We=c.array.has(we.name),nt=ue._f&&Vzr(ue._f);nt&&y.validatingFields&&z([oe],!0);let Ye=yield Npe(ue,c.disabled,i,j,t.shouldUseNativeValidation&&!Je,We);if(nt&&y.validatingFields&&z([oe]),Ye[we.name]&&(tt.valid=!1,Je))break;!Je&&(gr(Ye,we.name)?We?wft(r.errors,Ye,we.name):_i(r.errors,we.name,Ye[we.name]):Is(r.errors,we.name))}!Iu(Fe)&&(yield me(Fe,Je,tt))}}return tt.valid}),_e=()=>{for(let Le of c.unMount){let Je=gr(n,Le);Je&&(Je._f.refs?Je._f.refs.every(tt=>!wpe(tt)):!wpe(Je._f.ref))&&ft(Le)}c.unMount=new Set},de=(Le,Je)=>!t.disabled&&(Le&&Je&&_i(i,Le,Je),!l1(et(),o)),Ce=(Le,Je,tt)=>mft(Le,c,Te({},a.mount?i:sa(Je)?o:Dm(Le)?{[Le]:Je}:Je),tt,Je),Ze=Le=>MN(gr(a.mount?i:o,Le,t.shouldUnregister?gr(o,Le,[]):[])),rt=(Le,Je,tt={})=>{let Ft=gr(n,Le),$t=Je;if(Ft){let xe=Ft._f;xe&&(!xe.disabled&&_i(i,Le,bft(Je,xe)),$t=UU(xe.ref)&&oc(Je)?"":Je,gft(xe.ref)?[...xe.ref.options].forEach(J=>J.selected=$t.includes(J.value)):xe.refs?IN(xe.ref)?xe.refs.length>1?xe.refs.forEach(J=>(!J.defaultChecked||!J.disabled)&&(J.checked=Array.isArray($t)?!!$t.find(oe=>oe===J.value):$t===J.value)):xe.refs[0]&&(xe.refs[0].checked=!!$t):xe.refs.forEach(J=>J.checked=J.value===$t):jpe(xe.ref)?xe.ref.value="":(xe.ref.value=$t,xe.ref.type||E.state.next({name:Le,values:Ta(i)})))}(tt.shouldDirty||tt.shouldTouch)&&te(Le,$t,tt.shouldTouch,tt.shouldDirty,!0),tt.shouldValidate&&Tt(Le)},ct=(Le,Je,tt)=>{for(let Ft in Je){let $t=Je[Ft],xe=`${Le}.${Ft}`,J=gr(n,xe);(c.array.has(Le)||rs($t)||J&&!J._f)&&!ex($t)?ct(xe,$t,tt):rt(xe,$t,tt)}},qe=(Le,Je,tt={})=>{let Ft=gr(n,Le),$t=c.array.has(Le),xe=Ta(Je);_i(i,Le,xe),$t?(E.array.next({name:Le,values:Ta(i)}),(y.isDirty||y.dirtyFields||w.isDirty||w.dirtyFields)&&tt.shouldDirty&&E.state.next({name:Le,dirtyFields:SN(o,i),isDirty:de(Le,xe)})):Ft&&!Ft._f&&!oc(xe)?ct(Le,xe,tt):rt(Le,xe,tt),Dpe(Le,c)&&E.state.next(Te({},r)),E.state.next({name:a.mount?Le:void 0,values:Ta(i)})},lt=Le=>yt(null,null,function*(){a.mount=!0;let Je=Le.target,tt=Je.name,Ft=!0,$t=gr(n,tt),xe=J=>{Ft=Number.isNaN(J)||ex(J)&&isNaN(J.getTime())||l1(J,gr(i,tt,J))};if($t){let J,oe,ue=Je.type?oft($t._f):cft(Le),we=Le.type===FU.BLUR||Le.type===FU.FOCUS_OUT,Fe=!Gzr($t._f)&&!t.resolver&&!gr(r.errors,tt)&&!$t._f.deps||Wzr(we,gr(r.touchedFields,tt),r.isSubmitted,P,A),We=Dpe(tt,c,we);_i(i,tt,ue),we?($t._f.onBlur&&$t._f.onBlur(Le),h&&h(0)):$t._f.onChange&&$t._f.onChange(Le);let nt=te(tt,ue,we),Ye=!Iu(nt)||We;if(!we&&E.state.next({name:tt,type:Le.type,values:Ta(i)}),Fe)return(y.isValid||w.isValid)&&(t.mode==="onBlur"?we&&L():we||L()),Ye&&E.state.next(Te({name:tt},We?{}:nt));if(!we&&We&&E.state.next(Te({},r)),t.resolver){let{errors:be}=yield le([tt]);if(xe(ue),Ft){let Ee=aft(r.errors,n,tt),Be=aft(be,n,Ee.name||tt);J=Be.error,tt=Be.name,oe=Iu(be)}}else z([tt],!0),J=(yield Npe($t,c.disabled,i,j,t.shouldUseNativeValidation))[tt],z([tt]),xe(ue),Ft&&(J?oe=!1:(y.isValid||w.isValid)&&(oe=yield me(n,!0)));Ft&&($t._f.deps&&Tt($t._f.deps),se(tt,oe,J,nt))}}),_t=(Le,Je)=>{if(gr(r.errors,Je)&&Le.focus)return Le.focus(),1},Tt=(tt,...Ft)=>yt(null,[tt,...Ft],function*(Le,Je={}){let $t,xe,J=Wc(Le);if(t.resolver){let oe=yield pe(sa(Le)?Le:J);$t=Iu(oe),xe=Le?!J.some(ue=>gr(oe,ue)):$t}else Le?(xe=(yield Promise.all(J.map(oe=>yt(null,null,function*(){let ue=gr(n,oe);return yield me(ue&&ue._f?{[oe]:ue}:ue)})))).every(Boolean),!(!xe&&!r.isValid)&&L()):xe=$t=yield me(n);return E.state.next(Dt(Te(Te({},!Dm(Le)||(y.isValid||w.isValid)&&$t!==r.isValid?{}:{name:Le}),t.resolver||!Le?{isValid:$t}:{}),{errors:r.errors})),Je.shouldFocus&&!xe&&M2(n,_t,Le?J:c.mount),xe}),et=Le=>{let Je=Te({},a.mount?i:o);return sa(Le)?Je:Dm(Le)?gr(Je,Le):Le.map(tt=>gr(Je,tt))},pt=(Le,Je)=>({invalid:!!gr((Je||r).errors,Le),isDirty:!!gr((Je||r).dirtyFields,Le),error:gr((Je||r).errors,Le),isValidating:!!gr(r.validatingFields,Le),isTouched:!!gr((Je||r).touchedFields,Le)}),ot=Le=>{Le&&Wc(Le).forEach(Je=>Is(r.errors,Je)),E.state.next({errors:Le?r.errors:{}})},$e=(Le,Je,tt)=>{let Ft=(gr(n,Le,{_f:{}})._f||{}).ref,we=gr(r.errors,Le)||{},{ref:xe,message:J,type:oe}=we,ue=En(we,["ref","message","type"]);_i(r.errors,Le,Dt(Te(Te({},ue),Je),{ref:Ft})),E.state.next({name:Le,errors:r.errors,isValid:!1}),tt&&tt.shouldFocus&&Ft&&Ft.focus&&Ft.focus()},De=(Le,Je)=>sh(Le)?E.state.subscribe({next:tt=>Le(Ce(void 0,Je),tt)}):Ce(Le,Je,!0),Ke=Le=>E.state.subscribe({next:Je=>{$zr(Le.name,Je.name,Le.exact)&&Hzr(Je,Le.formState||y,Or,Le.reRenderRoot)&&Le.callback(Te(Te({values:Te({},i)},r),Je))}}).unsubscribe,Ge=Le=>(a.mount=!0,w=Te(Te({},w),Le.formState),Ke(Dt(Te({},Le),{formState:w}))),ft=(Le,Je={})=>{for(let tt of Le?Wc(Le):c.mount)c.mount.delete(tt),c.array.delete(tt),Je.keepValue||(Is(n,tt),Is(i,tt)),!Je.keepError&&Is(r.errors,tt),!Je.keepDirty&&Is(r.dirtyFields,tt),!Je.keepTouched&&Is(r.touchedFields,tt),!Je.keepIsValidating&&Is(r.validatingFields,tt),!t.shouldUnregister&&!Je.keepDefaultValue&&Is(o,tt);E.state.next({values:Ta(i)}),E.state.next(Te(Te({},r),Je.keepDirty?{isDirty:de()}:{})),!Je.keepIsValid&&L()},mt=({disabled:Le,name:Je})=>{(Dp(Le)&&a.mount||Le||c.disabled.has(Je))&&(Le?c.disabled.add(Je):c.disabled.delete(Je))},Ot=(Le,Je={})=>{let tt=gr(n,Le),Ft=Dp(Je.disabled)||Dp(t.disabled);return _i(n,Le,Dt(Te({},tt||{}),{_f:Te(Dt(Te({},tt&&tt._f?tt._f:{ref:{name:Le}}),{name:Le,mount:!0}),Je)})),c.mount.add(Le),tt?mt({disabled:Dp(Je.disabled)?Je.disabled:t.disabled,name:Le}):K(Le,!0,Je.value),Dt(Te(Te({},Ft?{disabled:Je.disabled||t.disabled}:{}),t.progressive?{required:!!Je.required,min:TN(Je.min),max:TN(Je.max),minLength:TN(Je.minLength),maxLength:TN(Je.maxLength),pattern:TN(Je.pattern)}:{}),{name:Le,onChange:lt,onBlur:lt,ref:$t=>{if($t){Ot(Le,Je),tt=gr(n,Le);let xe=sa($t.value)&&$t.querySelectorAll&&$t.querySelectorAll("input,select,textarea")[0]||$t,J=zzr(xe),oe=tt._f.refs||[];if(J?oe.find(ue=>ue===xe):xe===tt._f.ref)return;_i(n,Le,{_f:Te(Te({},tt._f),J?{refs:[...oe.filter(wpe),xe,...(Array.isArray(gr(o,Le))?[{}]:[])],ref:{type:xe.type,name:Le}}:{ref:xe})}),K(Le,!1,void 0,xe)}else tt=gr(n,Le,{}),tt._f&&(tt._f.mount=!1),(t.shouldUnregister||Je.shouldUnregister)&&!(pft(c.array,Le)&&a.action)&&c.unMount.add(Le)}})},At=()=>t.shouldFocusError&&M2(n,_t,c.mount),Mt=Le=>{Dp(Le)&&(E.state.next({disabled:Le}),M2(n,(Je,tt)=>{let Ft=gr(n,tt);Ft&&(Je.disabled=Ft._f.disabled||Le,Array.isArray(Ft._f.refs)&&Ft._f.refs.forEach($t=>{$t.disabled=Ft._f.disabled||Le}))},0,!1))},Yt=(Le,Je)=>tt=>yt(null,null,function*(){let Ft;tt&&(tt.preventDefault&&tt.preventDefault(),tt.persist&&tt.persist());let $t=Ta(i);if(E.state.next({isSubmitting:!0}),t.resolver){let{errors:xe,values:J}=yield le();r.errors=xe,$t=J}else yield me(n);if(c.disabled.size)for(let xe of c.disabled)_i($t,xe,void 0);if(Is(r.errors,"root"),Iu(r.errors)){E.state.next({errors:{}});try{yield Le($t,tt)}catch(xe){Ft=xe}}else Je&&(yield Je(Te({},r.errors),tt)),At(),setTimeout(At);if(E.state.next({isSubmitted:!0,isSubmitting:!1,isSubmitSuccessful:Iu(r.errors)&&!Ft,submitCount:r.submitCount+1,errors:r.errors}),Ft)throw Ft}),jt=(Le,Je={})=>{gr(n,Le)&&(sa(Je.defaultValue)?qe(Le,Ta(gr(o,Le))):(qe(Le,Je.defaultValue),_i(o,Le,Ta(Je.defaultValue))),Je.keepTouched||Is(r.touchedFields,Le),Je.keepDirty||(Is(r.dirtyFields,Le),r.isDirty=Je.defaultValue?de(Le,Ta(gr(o,Le))):de()),Je.keepError||(Is(r.errors,Le),y.isValid&&L()),E.state.next(Te({},r)))},Ut=(Le,Je={})=>{let tt=Le?Ta(Le):o,Ft=Ta(tt),$t=Iu(Le),xe=$t?o:Ft;if(Je.keepDefaultValues||(o=tt),!Je.keepValues){if(Je.keepDirtyValues){let J=new Set([...c.mount,...Object.keys(SN(o,i))]);for(let oe of Array.from(J))gr(r.dirtyFields,oe)?_i(xe,oe,gr(i,oe)):qe(oe,gr(xe,oe))}else{if(Lpe&&sa(Le))for(let J of c.mount){let oe=gr(n,J);if(oe&&oe._f){let ue=Array.isArray(oe._f.refs)?oe._f.refs[0]:oe._f.ref;if(UU(ue)){let we=ue.closest("form");if(we){we.reset();break}}}}for(let J of c.mount)qe(J,gr(xe,J))}i=Ta(xe),E.array.next({values:Te({},xe)}),E.state.next({values:Te({},xe)})}c={mount:Je.keepDirtyValues?c.mount:new Set,unMount:new Set,array:new Set,disabled:new Set,watch:new Set,watchAll:!1,focus:""},a.mount=!y.isValid||!!Je.keepIsValid||!!Je.keepDirtyValues,a.watch=!!t.shouldUnregister,E.state.next({submitCount:Je.keepSubmitCount?r.submitCount:0,isDirty:$t?!1:Je.keepDirty?r.isDirty:!!(Je.keepDefaultValues&&!l1(Le,o)),isSubmitted:Je.keepIsSubmitted?r.isSubmitted:!1,dirtyFields:$t?{}:Je.keepDirtyValues?Je.keepDefaultValues&&i?SN(o,i):r.dirtyFields:Je.keepDefaultValues&&Le?SN(o,Le):Je.keepDirty?r.dirtyFields:{},touchedFields:Je.keepTouched?r.touchedFields:{},errors:Je.keepErrors?r.errors:{},isSubmitSuccessful:Je.keepIsSubmitSuccessful?r.isSubmitSuccessful:!1,isSubmitting:!1})},ar=(Le,Je)=>Ut(sh(Le)?Le(i):Le,Je),jr=(Le,Je={})=>{let tt=gr(n,Le),Ft=tt&&tt._f;if(Ft){let $t=Ft.refs?Ft.refs[0]:Ft.ref;$t.focus&&($t.focus(),Je.shouldSelect&&sh($t.select)&&$t.select())}},Or=Le=>{r=Te(Te({},r),Le)},Pr={control:{register:Ot,unregister:ft,getFieldState:pt,handleSubmit:Yt,setError:$e,_subscribe:Ke,_runSchema:le,_getWatch:Ce,_getDirty:de,_setValid:L,_setFieldArray:B,_setDisabledField:mt,_setErrors:Z,_getFieldArray:Ze,_reset:Ut,_resetDefaultValues:()=>sh(t.defaultValues)&&t.defaultValues().then(Le=>{ar(Le,t.resetOptions),E.state.next({isLoading:!1})}),_removeUnmounted:_e,_disableForm:Mt,_subjects:E,_proxyFormState:y,get _fields(){return n},get _formValues(){return i},get _state(){return a},set _state(Le){a=Le},get _defaultValues(){return o},get _names(){return c},set _names(Le){c=Le},get _formState(){return r},get _options(){return t},set _options(Le){t=Te(Te({},t),Le)}},subscribe:Ge,trigger:Tt,register:Ot,handleSubmit:Yt,watch:De,setValue:qe,getValues:et,reset:ar,resetField:jt,clearErrors:ot,unregister:ft,setError:$e,setFocus:jr,getFieldState:pt};return Dt(Te({},Pr),{formControl:Pr})}var s1=()=>{let e=typeof performance=="undefined"?Date.now():performance.now()*1e3;return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,t=>{let r=(Math.random()*16+e)%16|0;return(t=="x"?r:r&3|8).toString(16)})},Epe=(e,t,r={})=>r.shouldFocus||sa(r.shouldFocus)?r.focusName||`${e}.${sa(r.focusIndex)?t:r.focusIndex}.`:"",Spe=(e,t)=>[...e,...Wc(t)],Tpe=e=>Array.isArray(e)?e.map(()=>{}):void 0;function Ipe(e,t,r){return[...e.slice(0,t),...Wc(r),...e.slice(t)]}var Mpe=(e,t,r)=>Array.isArray(e)?(sa(e[r])&&(e[r]=void 0),e.splice(r,0,e.splice(t,1)[0]),e):[],Cpe=(e,t)=>[...Wc(t),...Wc(e)];function Xzr(e,t){let r=0,n=[...e];for(let o of t)n.splice(o-r,1),r++;return MN(n).length?n:[]}var Ape=(e,t)=>sa(t)?[]:Xzr(e,Wc(t).sort((r,n)=>r-n)),Ope=(e,t,r)=>{[e[t],e[r]]=[e[r],e[t]]},lft=(e,t,r)=>(e[t]=r,e);function zpe(e){let t=C2(),{control:r=t.control,name:n,keyName:o="id",shouldUnregister:i,rules:a}=e,[c,h]=An.default.useState(r._getFieldArray(n)),m=An.default.useRef(r._getFieldArray(n).map(s1)),y=An.default.useRef(c),w=An.default.useRef(n),E=An.default.useRef(!1);w.current=n,y.current=c,r._names.array.add(n),a&&r.register(n,a),An.default.useEffect(()=>r._subjects.array.subscribe({next:({values:K,name:te})=>{if(te===w.current||!te){let se=gr(K,w.current);Array.isArray(se)&&(h(se),m.current=se.map(s1))}}}).unsubscribe,[r]);let A=An.default.useCallback(K=>{E.current=!0,r._setFieldArray(n,K)},[r,n]),P=(K,te)=>{let se=Wc(Ta(K)),le=Spe(r._getFieldArray(n),se);r._names.focus=Epe(n,le.length-1,te),m.current=Spe(m.current,se.map(s1)),A(le),h(le),r._setFieldArray(n,le,Spe,{argA:Tpe(K)})},j=(K,te)=>{let se=Wc(Ta(K)),le=Cpe(r._getFieldArray(n),se);r._names.focus=Epe(n,0,te),m.current=Cpe(m.current,se.map(s1)),A(le),h(le),r._setFieldArray(n,le,Cpe,{argA:Tpe(K)})},D=K=>{let te=Ape(r._getFieldArray(n),K);m.current=Ape(m.current,K),A(te),h(te),!Array.isArray(gr(r._fields,n))&&_i(r._fields,n,void 0),r._setFieldArray(n,te,Ape,{argA:K})},L=(K,te,se)=>{let le=Wc(Ta(te)),pe=Ipe(r._getFieldArray(n),K,le);r._names.focus=Epe(n,K,se),m.current=Ipe(m.current,K,le.map(s1)),A(pe),h(pe),r._setFieldArray(n,pe,Ipe,{argA:K,argB:Tpe(te)})},z=(K,te)=>{let se=r._getFieldArray(n);Ope(se,K,te),Ope(m.current,K,te),A(se),h(se),r._setFieldArray(n,se,Ope,{argA:K,argB:te},!1)},B=(K,te)=>{let se=r._getFieldArray(n);Mpe(se,K,te),Mpe(m.current,K,te),A(se),h(se),r._setFieldArray(n,se,Mpe,{argA:K,argB:te},!1)},G=(K,te)=>{let se=Ta(te),le=lft(r._getFieldArray(n),K,se);m.current=[...le].map((pe,me)=>!pe||me===K?s1():m.current[me]),A(le),h([...le]),r._setFieldArray(n,le,lft,{argA:K,argB:se},!0,!1)},Z=K=>{let te=Wc(Ta(K));m.current=te.map(s1),A([...te]),h([...te]),r._setFieldArray(n,[...te],se=>se,{},!0,!1)};return An.default.useEffect(()=>{if(r._state.action=!1,Dpe(n,r._names)&&r._subjects.state.next(Te({},r._formState)),E.current&&(!I2(r._options.mode).isOnSubmit||r._formState.isSubmitted)&&!I2(r._options.reValidateMode).isOnSubmit)if(r._options.resolver)r._runSchema([n]).then(K=>{let te=gr(K.errors,n),se=gr(r._formState.errors,n);(se?!te&&se.type||te&&(se.type!==te.type||se.message!==te.message):te&&te.type)&&(te?_i(r._formState.errors,n,te):Is(r._formState.errors,n),r._subjects.state.next({errors:r._formState.errors}))});else{let K=gr(r._fields,n);K&&K._f&&!(I2(r._options.reValidateMode).isOnSubmit&&I2(r._options.mode).isOnSubmit)&&Npe(K,r._names.disabled,r._formValues,r._options.criteriaMode===Hf.all,r._options.shouldUseNativeValidation,!0).then(te=>!Iu(te)&&r._subjects.state.next({errors:wft(r._formState.errors,te,n)}))}r._subjects.state.next({name:n,values:Ta(r._formValues)}),r._names.focus&&M2(r._fields,(K,te)=>{if(r._names.focus&&te.startsWith(r._names.focus)&&K.focus)return K.focus(),1}),r._names.focus="",r._setValid(),E.current=!1},[c,n,r]),An.default.useEffect(()=>(!gr(r._formValues,n)&&r._setFieldArray(n),()=>{let K=(te,se)=>{let le=gr(r._fields,te);le&&le._f&&(le._f.mount=se)};r._options.shouldUnregister||i?r.unregister(n):K(n,!1)}),[n,r,o,i]),{swap:An.default.useCallback(z,[A,n,r]),move:An.default.useCallback(B,[A,n,r]),prepend:An.default.useCallback(j,[A,n,r]),append:An.default.useCallback(P,[A,n,r]),remove:An.default.useCallback(D,[A,n,r]),insert:An.default.useCallback(L,[A,n,r]),update:An.default.useCallback(G,[A,n,r]),replace:An.default.useCallback(Z,[A,n,r]),fields:An.default.useMemo(()=>c.map((K,te)=>Dt(Te({},K),{[o]:m.current[te]||s1()})),[c,o])}}function u1(e={}){let t=An.default.useRef(void 0),r=An.default.useRef(void 0),[n,o]=An.default.useState({isDirty:!1,isValidating:!1,isLoading:sh(e.defaultValues),isSubmitted:!1,isSubmitting:!1,isSubmitSuccessful:!1,isValid:!1,submitCount:0,dirtyFields:{},touchedFields:{},validatingFields:{},errors:e.errors||{},disabled:e.disabled||!1,isReady:!1,defaultValues:sh(e.defaultValues)?void 0:e.defaultValues});t.current||(t.current=Dt(Te({},e.formControl?e.formControl:Kzr(e)),{formState:n}),e.formControl&&e.defaultValues&&!sh(e.defaultValues)&&e.formControl.reset(e.defaultValues,e.resetOptions));let i=t.current.control;return i._options=e,Rpe(()=>{let a=i._subscribe({formState:i._proxyFormState,callback:()=>o(Te({},i._formState)),reRenderRoot:!0});return o(c=>Dt(Te({},c),{isReady:!0})),i._formState.isReady=!0,a},[i]),An.default.useEffect(()=>i._disableForm(e.disabled),[i,e.disabled]),An.default.useEffect(()=>{e.mode&&(i._options.mode=e.mode),e.reValidateMode&&(i._options.reValidateMode=e.reValidateMode),e.errors&&!Iu(e.errors)&&i._setErrors(e.errors)},[i,e.errors,e.mode,e.reValidateMode]),An.default.useEffect(()=>{e.shouldUnregister&&i._subjects.state.next({values:i._getWatch()})},[i,e.shouldUnregister]),An.default.useEffect(()=>{if(i._proxyFormState.isDirty){let a=i._getDirty();a!==n.isDirty&&i._subjects.state.next({isDirty:a})}},[i,n.isDirty]),An.default.useEffect(()=>{e.values&&!l1(e.values,r.current)?(i._reset(e.values,i._options.resetOptions),r.current=e.values,o(a=>Te({},a))):i._resetDefaultValues()},[i,e.values]),An.default.useEffect(()=>{i._state.mount||(i._setValid(),i._state.mount=!0),i._state.watch&&(i._state.watch=!1,i._subjects.state.next(Te({},i._formState))),i._removeUnmounted()}),t.current.formState=hft(n,i),t.current}var Upe=ee(It(),1);u();u();var tx=ee(It(),1),$f=ee(ke(),1);u();u();var CN=ee(ke(),1),AN=ee(It(),1);var Eft=({className:e,value:t,onDeleteClick:r,disabled:n})=>CN.default.createElement("div",{className:`vkf-pill-root ${e}`},CN.default.createElement("span",{className:"value"},t," "),!n&&CN.default.createElement(mn,{className:"delete-button",onClick:()=>r(t),disabled:n},CN.default.createElement(Hr,{name:"delete"})));Eft.propTypes={value:AN.default.string.isRequired,onDeleteClick:AN.default.func.isRequired,className:AN.default.string,disabled:AN.default.bool};var Sft=Eft;var Tft=Sft;var Ift=(0,$f.forwardRef)(function(t,r){let{name:n,onChange:o=()=>{},onBlur:i=()=>{},value:a=[],disabled:c=!1,placeholder:h=""}=t,[m,y]=(0,$f.useState)(a!=null?a:[]),w=(0,$f.useCallback)(A=>{if(!Me(A))return;let P=[...m];P.splice(A,1),y(P),o(P)},[m]),E=(0,$f.useCallback)(A=>{var L;if(A.key!=="Enter")return;let P=(L=A.target.value)!=null?L:"";if(P===""||m.findIndex(z=>z===P)>-1)return;A.target.value="";let D=[...m,P];y(D),o(D)},[m]);return $f.default.createElement("div",{className:"multi-value-input-root"},$f.default.createElement("div",{className:"input-field"},m.map((A,P)=>$f.default.createElement(Tft,{className:"pill",key:A,value:A,onDeleteClick:()=>w(P),disabled:c})),$f.default.createElement("input",{className:"vkf-form-input",ref:r,name:n,onKeyDown:E,onBlur:i,disabled:c,placeholder:c?void 0:h})))});Ift.propTypes={name:tx.default.string.isRequired,value:tx.default.array,disabled:tx.default.bool,onChange:tx.default.func,onBlur:tx.default.func,placeholder:tx.default.string};var Mft=Ift;var Fpe=Mft;u();var Jzr=()=>pr(({snapshot:t})=>r=>yt(null,null,function*(){let{id:n,type:o}=yield t.getPromise(Wo);return o===Ka.LOCAL||!Me(n)?Promise.resolve():Mtt(n,r)}),[]),Cft=Jzr;u();var Qzr={owners:S2.OWNER,editors:S2.EDITOR},Aft=(e,t)=>{let r={remove:[],create_or_update:[]};for(let o of Object.values(Tu)){let i=Qzr[o];if(!Me(i)||!Me(e[o]))continue;let a=e[o].filter(h=>!t[o].includes(h)),c=t[o].filter(h=>!e[o].includes(h));a=a.map(h=>({user_id:h,role:i})),c=c.map(h=>({user_id:h,role:i})),r.create_or_update.push(...a),r.remove.push(...c)}let n=r.remove.filter(({user_id:o})=>r.create_or_update.findIndex(({user_id:c})=>c===o)===-1);return r.remove=n,r.remove.length===0&&r.create_or_update.length===0?null:r};var Oft="vkf-geojson-roles-form",e8r="PLACEHOLDER",t8r=(e,t)=>{let r=t[Tu.EDITORS],n=t[Tu.OWNERS];for(let o of r)if(n.findIndex(a=>a===o)!==-1)return fe("geojson-roles-form.error.duplicateRoles").replace(e8r,`"${o}"`);return!0},Pft=e=>{let{onCancelClick:t=()=>{},onSubmitted:r=()=>{}}=e,[n,o]=(0,zi.useState)(""),{handleSubmit:i,trigger:a,control:c,formState:{errors:h}}=u1(),m=Qpt(),y=Cft(),w=bt(Wo),E=(0,zi.useMemo)(()=>!Me(w.id),[w.id]),A=(0,zi.useCallback)(j=>{let D=Aft(j,m);if(!Me(D)){r();return}y(D).then(()=>{r()}).catch(L=>{if(console.log(L),L.response){if(L.response.status===401){o(fe("common-errors-http-401"));return}if(L.response.status===403){o(fe("common-errors-http-403"));return}}o(fe("common-errors-unexpected"))})},[r]),P=(0,zi.useCallback)(j=>{j.key==="Enter"&&Object.values(Tu).includes(j.target.name)&&j.preventDefault()},[]);return zi.default.createElement("div",{className:"vkf-geojson-roles-form-root"},zi.default.createElement("div",{className:"intro-text"},E?fe("geojson-roles-form-intro-unsaved"):fe("geojson-roles-form-intro")),zi.default.createElement("form",{id:Oft,onSubmit:i(A),onKeyDown:P},zi.default.createElement("div",{className:qt("vkf-form-control",h[Tu.OWNERS]&&"error")},zi.default.createElement("label",{className:"vkf-form-label"},fe("geojson-roles-owner")),zi.default.createElement(O2,{name:Tu.OWNERS,control:c,defaultValue:m.owners,rules:{required:fe("geojson-roles-form.error.required")},render:({field:j})=>zi.default.createElement(Fpe,Dt(Te({},j),{onChange:D=>{j.onChange(D),a(Tu.EDITORS),o("")},disabled:!fD(w),placeholder:fe("geojson-roles-insert-username")}))}),h[Tu.OWNERS]&&zi.default.createElement("div",{className:"vkf-form-error"},h[Tu.OWNERS].message)),zi.default.createElement("div",{className:qt("vkf-form-control",h[Tu.EDITORS]&&"error")},zi.default.createElement("label",{className:"vkf-form-label"},fe("geojson-roles-authors")),zi.default.createElement(O2,{name:Tu.EDITORS,control:c,defaultValue:m.editors,rules:{validate:t8r},render:({field:j})=>zi.default.createElement(Fpe,Dt(Te({},j),{onChange:D=>{j.onChange(D),a(Tu.EDITORS),o("")},disabled:!dD(w),placeholder:fe("geojson-roles-insert-username")}))}),h[Tu.EDITORS]&&zi.default.createElement("div",{className:"vkf-form-error"},h[Tu.EDITORS].message))),n.length!==""&&zi.default.createElement("div",{className:"error-message"},n),zi.default.createElement("div",{className:"buttons"},zi.default.createElement(mn,{form:Oft,disabled:!dD(w)&&!fD(w),buttonType:"submit",type:"save",className:"submit-button"},zi.default.createElement(Hr,{name:"save"}),fe("geojson-roles-btn-save")),zi.default.createElement(mn,{className:"cancel-button",type:"discard",onClick:t},zi.default.createElement(Hr,{name:"discard"}),fe("geojson-cancel-btn"))))};Pft.propTypes={onCancelClick:Upe.default.func,onSubmitted:Upe.default.func};var Dft=Pft;var Nft=Dft;u();u();var Bpe=ee(It(),1),HU=ee(ke(),1),Lft=({className:e,resetErrorBoundary:t})=>((0,HU.useEffect)(()=>()=>{t()},[t]),HU.default.createElement("div",{className:e},fe("common-errors-unexpected")));Lft.propTypes={className:Bpe.default.string,resetErrorBoundary:Bpe.default.func.isRequired};var kft=Lft;var $U=kft;var Rft=({show:e,onClose:t})=>{let r=xpe(),n=(0,Nm.useCallback)(()=>{t()},[t]);return Nm.default.createElement(jf,{isOpen:e,onClose:t,title:fe("geojson-roles-modal-title"),renderContent:()=>Nm.default.createElement(E2,{FallbackComponent:$U,onReset:r},Nm.default.createElement(Nm.Suspense,{fallback:Nm.default.createElement("div",null,"Loading ...")},Nm.default.createElement(Nft,{onCancelClick:t,onSubmitted:n}))),modalClassName:"vkf-dialog-geojson-roles"})};Rft.propTypes={show:Vpe.default.bool,onClose:Vpe.default.func};var jft=Rft;var qft=jft;var zft=qft;var r8r=()=>{let e={NONE:0,ROLES:1},[t,r]=(0,ic.useState)(e.NONE),n=bt(Wo),o=Lr(bs),i=(0,ic.useCallback)(()=>{r(e.NONE)},[]),a=(0,ic.useCallback)(()=>{o(Ti.METADATA)},[]),c=(0,ic.useCallback)(()=>{o(Ti.HISTORY)},[]),h=(0,ic.useCallback)(()=>{r(e.ROLES)},[]);return ic.default.createElement(ic.default.Fragment,null,JF(n)&&ic.default.createElement(mn,{className:"control-bar-layer-buttons--button layer-metadata-button",onClick:a,title:fe("geojson-control-bar-metadata-btn-title")},ic.default.createElement(Hr,{name:"metadata-panel"})),ic.default.createElement(Wpt,{onClick:c}),ic.default.createElement(Kpt,{onClick:h}),ic.default.createElement(zft,{show:t===e.ROLES,onClose:i}))},Fft=r8r;u();u();var Lm=ee(ke(),1);u();var c1=dn({key:"geoJsonFeatureDrawState",default:null}),WU=dn({key:"undoStylePropertiesState",default:[]}),n8r=()=>{let[e,t]=Io(c1),{handleDeleteFeature:r,handleUpdateFeature:n}=DU(),o=pr(({snapshot:m})=>(P,j,D)=>yt(null,[P,j,D],function*({addOrUpdateProperties:y,removeProperties:w},E,A){let L=yield m.getPromise(rl),z=yield m.getPromise(c1),B=Object.assign({},z);try{let{properties:G}=B,Z=Object.assign({},G);for(let se of w)delete Z[se];for(let{key:se,value:le}of y)Z[se]=le;B.properties=Z;let K=L.get(B.id),{geometry:te}=K;B.geometry=te,n(B),L.add(B),Me(E)&&typeof E=="function"&&E()}catch(G){Me(A)&&typeof A=="function"&&A(G)}}),[]),i=pr(({snapshot:m,set:y})=>(w,E)=>yt(null,null,function*(){let A=yield m.getPromise(rl),P=yield m.getPromise(c1),{id:j}=P,D=P.properties[w];y(WU,L=>[...L,[j,w,D]]),A.setFeatureProperty(j,w,E),A.add(A.get(j))}),[]),a=pr(({snapshot:m})=>y=>yt(null,null,function*(){let w=yield m.getPromise(rl),E=yield m.getPromise(c1),{id:A}=E;w.delete(A),r(A),Me(y)&&typeof y=="function"&&y()}),[]),c=pr(({snapshot:m,set:y})=>()=>yt(null,null,function*(){let w=yield m.getPromise(WU),E=yield m.getPromise(rl);for(let A of w)E.setFeatureProperty(...A);y(WU,[])}),[]),h=pr(({snapshot:m,set:y})=>(...P)=>yt(null,[...P],function*({skipPanelState:w,skipResetPreview:E,skipDeselect:A}={skipResetPreview:!1,skipPanelState:!1,skipDeselect:!1}){if(!A){let j=yield m.getPromise(rl);Me(j)&&j.changeMode("simple_select",{featureIds:[]})}E||c(),w||y(bs,Ti.NONE),y(WU,[]),y(c1,null)}),[c]);return{geoJsonFeature:e,setFeature:t,resetFeature:h,resetFeaturePreview:c,saveFeature:o,saveFeaturePreview:i,deleteFeature:a}},rx=n8r;var Uft="user_",Bft={HOT:"mapbox-gl-draw-hot",COLD:"mapbox-gl-draw-cold"},YU={DIRECT_SELECT:"direct_select",SIMPLE_SELECT:"simple_select",DRAW_POLYGON:"draw_polygon",DRAW_LINE_STRING:"draw_line_string"},o8r=e=>{let{source:t}=e,{properties:r}=e,{meta:n,mode:o}=r,i=(t===Bft.COLD||t===Bft.HOT)&&n==="feature",a=o===YU.DIRECT_SELECT||o===YU.SIMPLE_SELECT;return i&&a},i8r=e=>{let{properties:t,type:r,geometry:n}=e,{id:o}=t,i={};for(let a in t){if(!a.startsWith(Uft))continue;let c=a.slice(Uft.length),h="";try{if(h=JSON.parse(t[a]),typeof h!="object")throw new Error}catch(m){h=t[a]}i[c]=h}return{id:o,geometry:n,properties:i,type:r}},a8r=(e,t)=>{let{x:r,y:n}=e;return[[r-t,n-t],[r+t,n+t]]},s8r=2,l8r=()=>{let{setFeature:e,resetFeature:t,resetFeaturePreview:r}=rx(),n=bt(bs),o=(0,Lm.useRef)(!1),i=pr(({snapshot:w,set:E})=>A=>yt(null,null,function*(){let P=yield w.getPromise(rr),j=yield w.getPromise(rl),D=yield w.getPromise(c1),{point:L}=A,z=a8r(L,s8r),B=P.queryRenderedFeatures(z).filter(o8r).at(0);if(Me(B)){let{id:G}=B.properties;if((D==null?void 0:D.id)===G)return;r(),e(i8r(B)),E(bs,Ti.FEATURE)}else Me(D)&&!o.current&&([YU.DRAW_LINE_STRING,YU.DRAW_POLYGON].includes(j.getMode())?t({skipDeselect:!0}):t()),o.current=!1}),[e,t,r]),a=(0,Lm.useCallback)(()=>{t()},[t]),c=pr(({set:w})=>E=>{o.current=!0;let A=E.features[0];e(A),w(bs,Ti.FEATURE)},[e]),h=pr(({snapshot:w})=>()=>yt(null,null,function*(){let E=yield w.getPromise(rr);Me(E)&&(E.on("click",i),E.on("draw.delete",a),E.on("draw.create",c))}),[]),m=pr(({snapshot:w})=>()=>yt(null,null,function*(){let E=yield w.getPromise(rr);Me(E)&&(E.off("click",i),E.off("draw.delete",a),E.off("draw.create",c))}),[]),y=pr(({snapshot:w})=>E=>yt(null,null,function*(){let A=yield w.getPromise(c1);Me(A)&&E!==Ti.FEATURE&&t({skipPanelState:!0})}),[t]);return(0,Lm.useEffect)(()=>(h(),()=>{m()}),[]),(0,Lm.useEffect)(()=>{y(n)},[n,y]),Lm.default.createElement(Lm.default.Fragment,null)},Vft=l8r;var Gft=Vft;u();var nx=ee(It(),1),Ia=ee(ke(),1);u();var km=ee(ke(),1),ON=ee(It(),1);var Hft=({onClose:e,onSave:t,onDiscard:r,show:n})=>{let o=(0,km.useCallback)(()=>{t().finally(()=>{e()})},[t,e]);return km.default.createElement(jf,{isOpen:n,title:fe("geojson-discard-modal-title"),modalClassName:"vkf-discard-dialog",onClose:e,renderContent:()=>km.default.createElement(km.default.Fragment,null,km.default.createElement("p",null,fe("geojson-discard-modal-description")),km.default.createElement("div",{className:"discard-modal-buttons"},km.default.createElement(mn,{type:"discard",onClick:r},fe("geojson-discard-modal-discard-button")),km.default.createElement(mn,{type:"save",onClick:o},fe("geojson-discard-modal-save-button"))))})};Hft.propTypes={onClose:ON.default.func.isRequired,onDiscard:ON.default.func.isRequired,onSave:ON.default.func.isRequired,show:ON.default.bool.isRequired};var $ft=Hft;var ZU={NONE:0,DISCARD:1},Wft=({title:e,onSave:t=()=>Promise.resolve(),onDiscard:r=()=>null,controls:n,content:o,isSaveButtonDisabled:i})=>{let[a,c]=(0,Ia.useState)(!1),[h,m]=(0,Ia.useState)(ZU.NONE),y=(0,Ia.useMemo)(()=>{let j=e!=null?e:"";return j===""?`[${fe("geojson-featureview-no-title")}]`:j},[e]),w=(0,Ia.useCallback)(()=>{m(ZU.NONE)},[]),E=(0,Ia.useCallback)(()=>(c(!0),t().finally(()=>c(!1))),[t]),A=(0,Ia.useCallback)(()=>{r(),w()},[r]),P=(0,Ia.useCallback)(()=>{m(ZU.DISCARD)},[]);return Ia.default.createElement("div",{className:"vkf-geojson-control-bar-root"},Ia.default.createElement("div",{className:"control-bar-header"},Ia.default.createElement("div",{className:"control-bar-title"},y),Ia.default.createElement("div",{className:"control-bar-layer-buttons"},n)),Ia.default.createElement("div",{className:"control-bar-main"},Ia.default.createElement("div",{className:"control-bar-content"},o)),Ia.default.createElement("div",{className:"control-bar-footer"},Ia.default.createElement(mn,{className:"discard-button",onClick:P,type:"discard"},Ia.default.createElement(Hr,{name:"discard"}),fe("geojson-cancel-btn")),Ia.default.createElement(mn,{disabled:i,className:"save-button",onClick:E,loading:a,type:"save"},Ia.default.createElement(Hr,{name:"save"}),fe("geojson-save-btn"))),Ia.default.createElement($ft,{show:h===ZU.DISCARD,onSave:E,onDiscard:A,onClose:w}))};Wft.propTypes={title:nx.default.string,onSave:nx.default.func,onDiscard:nx.default.func,content:nx.default.element.isRequired,controls:nx.default.element.isRequired,isSaveButtonDisabled:nx.default.bool};var KU=Wft;u();var XU=e=>{var r;if(!Me((r=e==null?void 0:e.features)==null?void 0:r.length))return`${fe("geojson-control-bar-no-features")}`;let t=e.features.length;return t>1?`${t} ${fe("geojson-control-bar-feature-plural")}`:t===1?`1 ${fe("geojson-control-bar-feature")}`:`${fe("geojson-control-bar-no-features")}`};var nc={INITIAL:0,SHOW_FEATURE_COUNT:1,NO_TITLE:2,NO_FEATURES:3,UNSAVED_FEATURE_CHANGES:4},Yft=()=>{let{removeDraw:e}=vpe(),t=Upt(),{resetFeaturePreview:r}=rx(),n=bt(kl),o=bt(nl),[i,a]=(0,Wf.useState)(nc.INITIAL);i===nc.INITIAL?Me(n[Ue.title])?o.features.length===0?a(nc.NO_FEATURES):a(nc.SHOW_FEATURE_COUNT):a(nc.NO_TITLE):i===nc.NO_TITLE&&Me(n[Ue.title])&&(o.features.length===0?a(nc.NO_FEATURES):a(nc.SHOW_FEATURE_COUNT));let c=(0,Wf.useMemo)(()=>!Me(n[Ue.title])||n[Ue.title]==="",[n[Ue.title]]),h=(0,Wf.useMemo)(()=>XU(o),[o]),m=(0,Wf.useCallback)(()=>(r(),t()),[r,t]),y=(0,Wf.useCallback)(()=>{e()},[e]);return Wf.default.createElement(KU,{title:n[Ue.title],onSave:m,onDiscard:y,isSaveButtonDisabled:c,controls:Wf.default.createElement(Fft,null),content:Wf.default.createElement(Gpt,{onUpdateViewMode:a,viewState:i,formattedFeatureCount:h})})};Yft.propTypes={};var Gpe=Yft;u();var Yf=ee(ke(),1);u();var Hpe=ee(ke(),1);var p1=()=>{let e=pr(({set:n,snapshot:o})=>()=>yt(null,null,function*(){let i=yield o.getPromise(rr),a=yield o.getPromise(ja),{selectedLayer:c}=yield o.getPromise(cu);!Me(i)||!Me(a)||(Me(c)&&!c.isVisible(i)&&c.setVisibility(i,"visible"),a.removeMapLibreLayers(i),n(Pc,Qs.STANDARD),n(ja,null),n(Ef,Cc.NONE))}),[]),t=pr(({snapshot:n})=>()=>yt(null,null,function*(){let o=yield n.getPromise(rr);Me(o)&&o._controlContainer.classList.add(w2)}),[]),r=pr(({snapshot:n})=>()=>yt(null,null,function*(){let o=yield n.getPromise(rr);Me(o)&&o._controlContainer.classList.remove(w2),e()}),[]);return{initializeVectorMapExternalMode:t,removeVectorMapExternalMode:r,exitExternalVectorLayerMode:e}},u8r=()=>{let e=bt(Ef),{shiftRight:t,unShiftLeft:r,unShiftRight:n,removeControlShifts:o}=LU(),{initializeVectorMapExternalMode:i,removeVectorMapExternalMode:a}=p1();return(0,Hpe.useEffect)(()=>(i(),r(),()=>{o(),a()}),[]),(0,Hpe.useEffect)(()=>{e===Cc.METADATA?t():n()},[e]),null},Zft=u8r;u();var ox=ee(ke(),1);var c8r=()=>{let e=Lr(Ef),t=(0,ox.useCallback)(()=>{e(Cc.METADATA)},[]);return ox.default.createElement(ox.default.Fragment,null,Frt()&&ox.default.createElement(mn,{className:"control-bar-layer-buttons--button layer-metadata-button",onClick:t,title:fe("geojson-control-bar-metadata-btn-title")},ox.default.createElement(Hr,{name:"metadata-panel"})))},Kft=c8r;u();var Rm=ee(ke(),1),$pe=ee(It(),1);var Xft=({formattedFeatureCount:e,viewState:t})=>Rm.default.createElement(Rm.default.Fragment,null,t===Yc.SHOW_FEATURE_COUNT&&Rm.default.createElement(Rm.default.Fragment,null,Rm.default.createElement("span",{className:"bold"},e)," ",fe("geojson-control-bar-hint-features-present")),t===Yc.NO_TITLE&&Rm.default.createElement("span",{className:"bold"},fe("geojson-control-bar-hint-add-title")),t===Yc.NO_FEATURES&&Rm.default.createElement("span",{className:"bold"},fe("geojson-control-bar-hint-add-content-url")));Xft.propTypes={viewState:$pe.default.number.isRequired,formattedFeatureCount:$pe.default.string};var Jft=(0,Rm.memo)(Xft);u();u();var JU="/vector_maps_external",Qft=e=>yt(null,null,function*(){let t=mr.getGeoreferenceApiClient(),r=`${JU}/`;return(yield t.post(r,e)).data.id});var edt=(e,t)=>yt(null,null,function*(){let r=mr.getGeoreferenceApiClient(),n=`${JU}/${e}`;return(yield r.put(n,t)).data}),tdt=e=>yt(null,null,function*(){let t=mr.getGeoreferenceApiClient(),r=`${JU}/${e}`;return(yield t.delete(r)).data.id}),rdt=e=>yt(null,null,function*(){let t=mr.getGeoreferenceApiClient(),r=`${JU}/refresh_search_index/${e}`;yield t.post(r)});var ndt=ee(xO(),1);var p8r=()=>{let{notifyError:e}=a1(),{exitExternalVectorLayerMode:t}=p1(),r=pr(({set:o,snapshot:i})=>()=>yt(null,null,function*(){let a=yield i.getPromise(ja),c=yield i.getPromise(rr);if(!Me(a)||!Me(c)){console.error("State error. Cannot save external vector map to database.");return}let h=koe(a.getMetadata()),m=a.getGeoJson();try{let y=yield Qft(h),w=$o.fromApplication({metadata:Dt(Te({},a.getMetadata()),{[Ue.id]:y,[Ue.vectorMapId]:y}),geoJson:m});w.addLayerToMap(c),o(qn,E=>[...E,w])}catch(y){jb(y,e);return}t()}),[]),n=pr(({snapshot:o,set:i})=>()=>yt(null,null,function*(){let a=yield o.getPromise(ja),c=yield o.getPromise(rr),{selectedLayer:h}=yield o.getPromise(cu);if(!Me(a)||!Me(c)||!Me(h)){console.error("State error. Cannot save external vector map to database.");return}let m=a.getGeoJson(),y=a.getMetadata()[Ue.vectorMapId],w=nP(h.getMetadata()),E=nP(a.getMetadata()),A=!(0,ndt.default)(w,E);try{if(A)if(yield edt(y,koe(E)),nU(h,E),w[Ue.externalContentType]!==E[Ue.externalContentType]){h.removeMapLibreLayers(c);let P=$o.fromApplication({geoJson:m,metadata:h.getMetadata()});P.addLayerToMap(c),i(qn,j=>{let D=j.findIndex(L=>L.getId()===h.getId());return j[D]=P,[...j]})}else h.setDataOnMap(c,m),i(d0,Date.now())}catch(P){jb(P,e);return}t()}),[]);return pr(({snapshot:o})=>()=>yt(null,null,function*(){let i=yield o.getPromise(ja);if(Me(i))return DD(i.getId())?yield r():yield n()}),[])},odt=p8r;var Yc={INITIAL:0,SHOW_FEATURE_COUNT:1,NO_TITLE:2,NO_FEATURES:3},f8r=()=>{let e=odt(),[t,r]=(0,Yf.useState)(Yc.INITIAL),n=bt(rz),o=bt(lWe);t===Yc.INITIAL?Me(n[Ue.title])?o.features.length===0?r(Yc.NO_FEATURES):r(Yc.SHOW_FEATURE_COUNT):r(Yc.NO_TITLE):t===Yc.NO_TITLE?Me(n[Ue.title])&&(o.features.length===0?r(Yc.NO_FEATURES):r(Yc.SHOW_FEATURE_COUNT)):t===Yc.NO_FEATURES&&o.features.length>0&&r(Yc.SHOW_FEATURE_COUNT);let i=(0,Yf.useMemo)(()=>XU(o),[o]),a=(0,Yf.useMemo)(()=>{let y=!Me(n[Ue.title])||n[Ue.title]==="",w=!Me(n[Ue.externalContentUrl]),E=!Me(n[Ue.timePeriod])||n[Ue.timePeriod].length===0;return w||E||y},[n]),{exitExternalVectorLayerMode:c}=p1(),h=(0,Yf.useCallback)(()=>{c()},[]),m=(0,Yf.useCallback)(()=>e(),[]);return Yf.default.createElement(KU,{title:n[Ue.title],onDiscard:h,onSave:m,isSaveButtonDisabled:a,content:Yf.default.createElement(Jft,{formattedFeatureCount:i,viewState:t}),controls:Yf.default.createElement(Kft,null)})},Wpe=f8r;u();u();var Lp=ee(ke(),1);u();var d8r=()=>{let e=pr(({snapshot:n,set:o})=>()=>yt(null,null,function*(){let{selectedLayer:i}=yield n.getPromise(cu),a=i.getMetadata(Ue.vectorMapId),c=i.getId();yield Ett(a),o(el,null),o(tl,null),o(qn,h=>h.filter(m=>m.getId()!==c)),Qd(o)})),t=pr(({set:n})=>()=>yt(null,null,function*(){Qd(n)})),r=pr(({snapshot:n,set:o})=>()=>yt(null,null,function*(){let{selectedLayer:i}=yield n.getPromise(cu),a=i.getId();o(el,null),o(tl,null),o(qn,c=>c.filter(h=>h.getId()!==a)),Qd(o)}));return pr(({snapshot:n})=>()=>yt(null,null,function*(){let o=yield n.getPromise(Wo);if(!Me(o))return;let{type:i,id:a}=o;i===Ka.REMOTE?Me(a)?yield e():yield t():yield r()}))},idt=d8r;u();var f1=ee(It(),1),Zf=ee(ke(),1);var adt=({title:e,introText:t,submitButton:r,onClose:n,dangerZoneComponent:o,showDangerZone:i,formComponent:a})=>{let c=(0,Zf.useCallback)(()=>{n()},[n]);return Zf.default.createElement("div",{className:"geojson-metadata-panel-root"},Zf.default.createElement(Cf,{title:e,onCloseClick:c}),Zf.default.createElement("div",{className:"geojson-metadata-panel-content"},Zf.default.createElement("div",{className:"introduction-text content-padding"},t),Zf.default.createElement("div",{className:"metadata-form-container content-padding"},a),i&&Zf.default.createElement("div",{className:"danger-zone-container"},o)),Zf.default.createElement("div",{className:"footer-container"},r,Zf.default.createElement(mn,{className:"discard-button",onClick:c,type:"discard"},Zf.default.createElement(Hr,{name:"discard"}),fe("geojson-cancel-btn"))))};adt.propTypes={introText:f1.default.string.isRequired,title:f1.default.string.isRequired,onClose:f1.default.func.isRequired,showDangerZone:f1.default.bool.isRequired,formComponent:f1.default.element.isRequired,dangerZoneComponent:f1.default.element.isRequired,submitButton:f1.default.element.isRequired};var QU=adt;u();u();var Ype=ee(It(),1),la=ee(ke(),1);u();u();var Zc=ee(ke(),1);var PN=ee(It(),1);var sdt=(e,t)=>{let r=Oc(e),n=Oc(t);return r<=n},ldt=({startFieldName:e,endFieldName:t,showLabels:r=!0,required:n=!0})=>{let{trigger:o,control:i,formState:{errors:a}}=C2(),c=(0,Zc.useCallback)((m,{field:y,formState:w})=>{y.onChange(m),w.errors[t]&&o(t)},[]),h=(0,Zc.useCallback)((m,{field:y,formState:w})=>{y.onChange(m),w.errors[e]&&o(e)},[]);return Zc.default.createElement("div",{className:"time-period-field-root"},Zc.default.createElement("div",{className:"time-period-field-container"},Zc.default.createElement("div",{className:qt("vkf-form-control",a[e]&&"error")},r&&Zc.default.createElement("label",{className:"vkf-form-label",htmlFor:e},fe("geojson-label-timePeriod-start")),Zc.default.createElement(O2,{control:i,name:e,render:({field:m,formState:y})=>Zc.default.createElement(zT,Dt(Te({},m),{onChange:w=>c(w,{field:m,formState:y}),className:"vkf-form-input",placeholder:fe("geojson-editfeature-input-placeholder-date")})),rules:{required:n,validate:(m,{[t]:y})=>{let w=coe(m)&&sdt(m,y);return n?w:m===""||w}}})),Zc.default.createElement("div",{className:qt("vkf-form-control",a[t]&&"error")},r&&Zc.default.createElement("label",{className:"vkf-form-label",htmlFor:t},fe("geojson-label-timePeriod-end")),Zc.default.createElement(O2,{control:i,name:t,render:({field:m,formState:y})=>Zc.default.createElement(zT,Dt(Te({},m),{onChange:w=>h(w,{field:m,formState:y}),className:"vkf-form-input",placeholder:fe("geojson-editfeature-input-placeholder-date")})),rules:{required:n,validate:(m,{[e]:y})=>{let w=coe(m)&&sdt(y,m);return n?w:m===""||w}}}))))};ldt.propTypes={startFieldName:PN.default.string.isRequired,endFieldName:PN.default.string.isRequired,showLabels:PN.default.bool,required:PN.default.bool};var udt=ldt;var P2=udt;var h8r=e=>e===""||_p(e),Zpe=({formId:e,onValidatedFormSubmit:t})=>{var E;let r=bt(kl),[n,o]=(0,la.useState)((E=r[Ue.thumbnailUrl])!=null?E:""),i=(0,la.useMemo)(()=>zpt(r),[]),a=u1({defaultValues:i}),{register:c,handleSubmit:h,formState:{errors:m}}=a,y=(0,la.useCallback)(A=>o(A.target.value),[]),w=(0,la.useCallback)(A=>{let P=Fpt(A);t(P)},[t]);return la.default.createElement(A2,Te({},a),la.default.createElement("form",{className:"geojson-metadata-form-root",id:e,onSubmit:h(w)},la.default.createElement("div",{className:"geojson-metadata-form-fields"},la.default.createElement("div",{className:qt("vkf-form-control",m[Ue.title]&&"error")},la.default.createElement("label",{className:"vkf-form-label",htmlFor:Ue.title},fe("geojson-metadata-title")),la.default.createElement("input",Te({className:"vkf-form-input",placeholder:fe("geojson-placeholder-title")},c(Ue.title,{required:!0})))),la.default.createElement(P2,{startFieldName:Kh,endFieldName:Xh}),la.default.createElement("div",{className:qt("vkf-form-control",m[Ue.description]&&"error")},la.default.createElement("label",{className:"vkf-form-label",htmlFor:Ue.description},fe("geojson-metadata-description")),la.default.createElement("textarea",Te({className:"vkf-form-textarea",placeholder:fe("geojson-placeholder-description")},c(Ue.description)))),la.default.createElement("div",{className:qt("vkf-form-control",m[Ue.thumbnailUrl]&&"error")},la.default.createElement("label",{className:"vkf-form-label",htmlFor:Ue.thumbnailUrl},fe("geojson-metadata-thumbnailUrl")),la.default.createElement("div",{className:"image-with-fallback-container"},la.default.createElement(Mm,{imageUrl:n,showPlaceholder:!0,imageAsPreview:!0})),la.default.createElement("input",Te({className:"vkf-form-input",placeholder:fe("geojson-placeholder-thumbnailUrl")},c(Ue.thumbnailUrl,{onBlur:y,validate:h8r})))))))};Zpe.defaultPropTypes={};Zpe.propTypes={onValidatedFormSubmit:Ype.default.func.isRequired,formId:Ype.default.string.isRequired};var cdt=(0,la.memo)(Zpe);var pdt=cdt;u();var Np=ee(ke(),1);u();var eB=ee(ke(),1),fdt=ee(It(),1);var ddt=({children:e})=>eB.default.createElement("div",{className:"danger-zone-root"},eB.default.createElement("p",{className:"text text-header"},"danger zone"),eB.default.createElement("div",{className:"danger-zone-content"},e));ddt.propTypes={children:fdt.default.node};var D2=ddt;u();u();var jm=ee(ke(),1),DN=ee(It(),1);var hdt=({show:e,onClose:t,onDelete:r,description:n})=>jm.default.createElement(jf,{isOpen:e,onClose:t,title:fe("geojson-deletemodal-title"),renderContent:()=>jm.default.createElement(jm.default.Fragment,null,jm.default.createElement("p",null,n),jm.default.createElement("div",{className:"delete-feature-modal-buttons"},jm.default.createElement(cD,{className:"delete-btn",onClick:r,type:"delete"},jm.default.createElement(Hr,{name:"delete"}),fe("geojson-deletemodal-delete-btn")),jm.default.createElement(cD,{className:"cancel-btn",onClick:t,type:"discard"},jm.default.createElement(Hr,{name:"discard"}),fe("geojson-cancel-btn")))),modalClassName:"vkf-delete-dialog"});hdt.propTypes={show:DN.default.bool,onClose:DN.default.func,onDelete:DN.default.func,description:DN.default.string};var mdt=hdt;var N2=mdt;var gdt=ee(It(),1),NN={INITIAL:0,DELETE_DIALOG:1},vdt=({onDelete:e})=>{let[t,r]=(0,Np.useState)(NN.INITIAL),n=(0,Np.useCallback)(()=>{t!==NN.DELETE_DIALOG&&r(NN.DELETE_DIALOG)},[t]),o=(0,Np.useCallback)(()=>{r(NN.INITIAL)},[]),i=(0,Np.useCallback)(()=>{e()},[e]);return Np.default.createElement(D2,null,Np.default.createElement("p",{className:"text text-description"},fe("geojson-metadata-panel-delete")),Np.default.createElement(mn,{className:"delete-button",onClick:n,type:"delete"},Np.default.createElement(Hr,{name:"delete"}),Np.default.createElement("p",{className:"text text-button"},fe("geojson-metadata-panel-delete-btn"))),Np.default.createElement(N2,{show:t===NN.DELETE_DIALOG,onClose:o,onDelete:i,description:fe("geojson-metadata-delete-vector")}))};vdt.propTypes={onDelete:gdt.default.func.isRequired};var ydt=vdt;var _dt="vkf-geojson-metadata-form",bdt=()=>{let e=Lr(kl),t=Lr(bs),r=bt(Wo),n=idt(),{introText:o,title:i}=(0,Lp.useMemo)(()=>{if(!Me(r))return{introText:"",title:""};let{type:y,id:w}=r,E={introText:fe("geojson-metadata-panel-intro-edit"),title:fe("geojson-metadata-panel-header-edit")},A={introText:fe("geojson-metadata-panel-intro-create"),title:fe("geojson-metadata-panel-header-create")};return y===Ka.REMOTE?Me(w)?E:A:E},[r]),a=(0,Lp.useMemo)(()=>{if(!Me(r))return!1;let{type:y,id:w}=r;return y===Ka.REMOTE&&Me(w)},[r]),c=(0,Lp.useCallback)(()=>{n()},[n]),h=(0,Lp.useCallback)(()=>{t(Ti.NONE)},[]),m=(0,Lp.useCallback)(y=>{e(y),h()},[]);return Lp.default.createElement(QU,{introText:o,title:i,onClose:h,onDelete:c,showDangerZone:a,dangerZoneComponent:Lp.default.createElement(ydt,{onDelete:c}),formComponent:Lp.default.createElement(pdt,{onValidatedFormSubmit:m,formId:_dt}),submitButton:Lp.default.createElement(mn,{className:"save-button",type:"save",buttonType:"submit",form:_dt},Lp.default.createElement(Hr,{name:"save"}),fe("geojson-apply-btn"))})};bdt.propTypes={};var Kpe=bdt;u();u();var kp=ee(ke(),1);u();var Sdt=ee(It(),1),li=ee(ke(),1);u();u();var lh=ee(It(),1);var ix=ee(ke(),1);var xdt=(0,ix.forwardRef)(function(t,r){let a=t,{options:n}=a,o=En(a,["options"]),i=t.disabled;return ix.default.createElement("div",{className:"vkf-select-field-root"},ix.default.createElement("div",{className:qt("select-field-container",i&&"disabled")},ix.default.createElement("select",Dt(Te({},o),{ref:r}),n.map(c=>ix.default.createElement("option",{key:c.value,value:c.value},c.label)))))});xdt.propTypes={className:lh.default.string,options:lh.default.arrayOf(lh.default.shape({label:lh.default.string,value:lh.default.string})),onChange:lh.default.func,onBlur:lh.default.func,defaultValue:lh.default.string,name:lh.default.string,disabled:lh.default.bool};var wdt=xdt;var Edt=wdt;var Xpe=dn({key:"isExternalVectorMapFormLoadingState",default:!1}),Tdt=({onValidatedFormSubmit:e})=>{var A;let t=bt(rz),[r,n]=(0,li.useState)((A=t[Ue.thumbnailUrl])!=null?A:""),o=Lr(Xpe),i=(0,li.useMemo)(()=>Q$e(t),[t]),a=u1({defaultValues:i}),{register:c,handleSubmit:h,setError:m,formState:{errors:y}}=a,w=(0,li.useCallback)(P=>n(P.target.value),[]),E=pr(({snapshot:P})=>j=>yt(null,null,function*(){o(!0);let L=(yield P.getPromise(ja)).getMetadata()[Ue.externalContentUrl],z=j[Ue.externalContentUrl],B=L!==z,G=eWe(j);try{if(B){let K=(yield Za.get(z,{headers:{accept:"application/json"},timeout:1e4})).data;tWe(K),e({geoJson:K,metadata:G})}else e({metadata:G})}catch(Z){console.error(Z),m(Ue.externalContentUrl,{type:"custom",message:"custom message"},{shouldFocus:!0})}o(!1)}),[e]);return li.default.createElement(A2,Te({},a),li.default.createElement("form",{className:"geojson-metadata-form-root",id:Wq,onSubmit:h(E)},li.default.createElement("div",{className:"geojson-metadata-form-fields"},li.default.createElement("div",{className:qt("vkf-form-control",y[Ue.title]&&"error")},li.default.createElement("label",{className:"vkf-form-label",htmlFor:Ue.title},fe("geojson-metadata-title")),li.default.createElement("input",Te({className:"vkf-form-input",placeholder:fe("geojson-placeholder-title")},c(Ue.title,{required:!0})))),li.default.createElement("div",{className:qt("vkf-form-control",y[Ue.externalContentType]&&"error")},li.default.createElement("label",{className:"vkf-form-label",htmlFor:Ue.externalContentType},fe("geojson-metadata-externalContentType")),li.default.createElement(Edt,Dt(Te({className:"vkf-form-input"},c(Ue.externalContentType,{required:!0})),{options:J$e}))),li.default.createElement("div",{className:qt("vkf-form-control",y[Ue.externalContentUrl]&&"error")},li.default.createElement("label",{className:"vkf-form-label",htmlFor:Ue.externalContentUrl},fe("geojson-metadata-externalContentUrl")),li.default.createElement("input",Te({className:"vkf-form-input",placeholder:fe("geojson-placeholder-externalContentUrl")},c(Ue.externalContentUrl,{required:!0,validate:P=>_p(P)})))),li.default.createElement(P2,{startFieldName:Kh,endFieldName:Xh}),li.default.createElement("div",{className:qt("vkf-form-control",y[Ue.description]&&"error")},li.default.createElement("label",{className:"vkf-form-label",htmlFor:Ue.description},fe("geojson-metadata-description")),li.default.createElement("textarea",Te({className:"vkf-form-textarea",placeholder:fe("geojson-placeholder-description")},c(Ue.description)))),li.default.createElement("div",{className:qt("vkf-form-control",y[Ue.thumbnailUrl]&&"error")},li.default.createElement("label",{className:"vkf-form-label",htmlFor:Ue.thumbnailUrl},fe("geojson-metadata-thumbnailUrl")),li.default.createElement("div",{className:"image-with-fallback-container"},li.default.createElement(Mm,{imageUrl:r,showPlaceholder:!0,imageAsPreview:!0})),li.default.createElement("input",Te({className:"vkf-form-input",placeholder:fe("geojson-placeholder-thumbnailUrl")},c(Ue.thumbnailUrl,{onBlur:w,validate:P=>P===""||_p(P)})))))))};Tdt.propTypes={onValidatedFormSubmit:Sdt.default.func.isRequired};var Idt=(0,li.memo)(Tdt);u();var m8r=()=>{let{zoomToExtent:e}=O0();return{updateExternalVectorMapLayer:pr(({snapshot:r,set:n})=>a=>yt(null,[a],function*({metadata:o,geoJson:i}){let c=yield r.getPromise(rr),h=yield r.getPromise(ja);if(!Me(c)||!Me(h))return;let m=h.getMetadata(Ue.externalContentType);if(Me(i)){let y=$o.toApplicationState(i);h.setDataOnMap(c,y),e(h)}if(nU(h,o),o[Ue.externalContentType]!==m){h.removeMapLibreLayers(c);let y=$o.fromApplication({geoJson:h.getGeoJson(),metadata:h.getMetadata()});y.addLayerToMap(c),n(ja,y)}else n(tz,y=>y+1)}),[])}},Mdt=m8r;u();var g8r=()=>{let{notifyError:e}=a1();return pr(({snapshot:r,set:n})=>()=>yt(null,null,function*(){let o=yield r.getPromise(rr),i=yield r.getPromise(ja),{selectedLayer:a}=yield r.getPromise(cu);if(!Me(o)||!Me(i)||!Me(a)){console.error("Undefined state. Cannot delete vector map from database");return}let c=i.getMetadata()[Ue.vectorMapId];try{yield tdt(c),a.removeMapLibreLayers(o),n(qn,h=>h.filter(m=>m.getId()!==c)),n(tl,null)}catch(h){jb(h,e)}}),[])},Cdt=g8r;u();var Adt=Zft;u();var Jpe=ee(ke(),1);var v8r=()=>{let e=bt(Xpe);return Jpe.default.createElement(mn,{className:"save-button",type:"save",buttonType:"submit",form:Wq,loading:e},Jpe.default.createElement(Hr,{name:"save"}),fe("geojson-apply-btn"))},Odt=v8r;u();var ns=ee(ke(),1);var Qpe=ee(It(),1);var LN={INITIAL:0,DELETE_DIALOG:1},Pdt=({onDelete:e,onRefresh:t})=>{let[r,n]=(0,ns.useState)(!1),[o,i]=(0,ns.useState)(LN.INITIAL),a=(0,ns.useCallback)(()=>yt(null,null,function*(){n(!0);try{yield t()}catch(y){console.error(y)}n(!1)}),[t]),c=(0,ns.useCallback)(()=>{o!==LN.DELETE_DIALOG&&i(LN.DELETE_DIALOG)},[o]),h=(0,ns.useCallback)(()=>{i(LN.INITIAL)},[]),m=(0,ns.useCallback)(()=>{e()},[e]);return ns.default.createElement(D2,null,ns.default.createElement("div",{className:"metadata-external-container"},ns.default.createElement("div",null,ns.default.createElement("p",{className:"text text-description"},fe("geojson-metadata-panel-refresh")),ns.default.createElement(mn,{className:"refresh-button",onClick:a,type:"primary",loading:r},ns.default.createElement("p",{className:"text text-button"},fe("geojson-metadata-panel-refresh-btn")))),ns.default.createElement("div",null,ns.default.createElement("p",{className:"text text-description"},fe("geojson-metadata-panel-delete")),ns.default.createElement(mn,{className:"delete-button",onClick:c,type:"delete"},ns.default.createElement(Hr,{name:"delete"}),ns.default.createElement("p",{className:"text text-button"},fe("geojson-metadata-panel-delete-btn"))))),ns.default.createElement(N2,{show:o===LN.DELETE_DIALOG,onClose:h,onDelete:m,description:fe("geojson-metadata-delete-vector")}))};Pdt.propTypes={onDelete:Qpe.default.func.isRequired,onRefresh:Qpe.default.func.isRequired};var Ddt=Pdt;u();var y8r=()=>{let{notifySuccess:e,notifyError:t}=a1();return pr(({snapshot:r})=>()=>yt(null,null,function*(){let o=(yield r.getPromise(ja)).getMetadata()[Ue.vectorMapId];try{yield rdt(o),e("geojson-metadata-panel-notify-refresh")}catch(i){jb(i,t)}}),[])},Ndt=y8r;var _8r=()=>{let e=Ndt(),t=Cdt(),{updateExternalVectorMapLayer:r}=Mdt(),{exitExternalVectorLayerMode:n}=p1(),o=bt(uWe),i=Lr(Ef),a=(0,kp.useMemo)(()=>Me(o)&&!DD(o),[o]),{introText:c,title:h}=(0,kp.useMemo)(()=>Me(o)?DD(o)?{introText:fe("geojson-metadata-panel-intro-create-external"),title:fe("geojson-metadata-panel-header-create")}:{introText:fe("geojson-metadata-panel-intro-edit-external"),title:fe("geojson-metadata-panel-header-edit")}:{introText:"",title:""},[o]),m=(0,kp.useCallback)(({geoJson:A,metadata:P})=>{r({metadata:P,geoJson:A}),y()},[]),y=(0,kp.useCallback)(()=>i(Cc.NONE),[]),w=(0,kp.useCallback)(()=>{t().then(()=>n())},[]),E=(0,kp.useCallback)(()=>e(),[]);return kp.default.createElement(QU,{onClose:y,onDelete:w,introText:c,title:h,showDangerZone:a,dangerZoneComponent:kp.default.createElement(Ddt,{onDelete:w,onRefresh:E}),formComponent:kp.default.createElement(Idt,{onValidatedFormSubmit:m}),submitButton:kp.default.createElement(Odt,null)})},Ldt=_8r;var efe=Ldt;u();u();var za=ee(ke(),1),uh=ee(It(),1);u();u();var L2=ee(ke(),1),tB=ee(It(),1);var kdt=({description:e,onDeleteClick:t,buttonLabel:r})=>L2.default.createElement(D2,null,L2.default.createElement("p",{className:"text text-description"},e),L2.default.createElement(mn,{className:"delete-button",onClick:t,type:"delete"},L2.default.createElement(Hr,{name:"delete"}),L2.default.createElement("p",{className:"text text-button"},r)));kdt.propTypes={description:tB.default.string.isRequired,onDeleteClick:tB.default.func.isRequired,buttonLabel:tB.default.string.isRequired};var Rdt=kdt;var jdt=Rdt;u();u();var Bo=ee(ke(),1);var xv=ee(It(),1);u();var sx=ee(ke(),1),ax=ee(It(),1);var qdt=(0,sx.forwardRef)(function(h,c){var m=h,{title:t,value:r,onChange:n,onBlur:o,id:i}=m,a=En(m,["title","value","onChange","onBlur","id"]);return sx.default.createElement("div",{className:"style-field-root"},sx.default.createElement("div",{className:"vkf-form-control"},sx.default.createElement("label",{htmlFor:i,className:"vkf-form-label"},t),sx.default.createElement("input",Te({id:i,className:"vkf-form-input",defaultValue:r,onChange:n,onBlur:o,ref:c},a))))});qdt.propTypes={title:ax.default.string.isRequired,value:ax.default.any,inputProps:ax.default.object,onChange:ax.default.func,onBlur:ax.default.func,id:ax.default.string.isRequired};var zdt=qdt;u();u();var tfe="FF",rfe=e=>Number(e.toFixed(0)).toString(16).padStart(2,"0"),b8r=(e,{useAlpha:t}={useAlpha:!1})=>{let r=e.split("(")[1].split(")")[0].split(",").map(n=>parseInt(n,10)).map(rfe).join("");return t?`#${r}${tfe}`:`#${r}`},x8r=(e,{useAlpha:t}={useAlpha:!1})=>{let r=e.split("(")[1].split(")")[0].split(","),n=r.slice(0,3).map(i=>parseInt(i,10)).map(rfe).join(""),o=rfe(parseFloat(r[3])*255);return t?`#${n}${o}`:`#${n}`},w8r=(e,{useAlpha:t}={useAlpha:!1})=>{let r=e.trim();if(r.startsWith("rgba"))return x8r(r,{useAlpha:t});if(r.startsWith("rgb"))return b8r(r,{useAlpha:t});if(r.startsWith("#"))if(e.length===4){let n=e.slice(1,3).map(o=>`${o}${o}`);return t?`#${n}${tfe}`:`#${n}`}else{if(e.length===7)return t?`${e}${tfe}`:e;if(e.length===9)return t?e:e.slice(0,7)}throw new Error("Unknown color format")},E8r=e=>{let t={blue:"#0000ff",green:"#008000",orange:"#ffa500",pink:"#ffc0cb",yellow:"#ffff00"};if(!Me(e)&&typeof e!="string")throw new Error("No input specified");let r=e.trim().toLowerCase();if(!Object.hasOwn(t,r))throw new Error("No matching legacy color found");return t[r]},Fdt=e=>{let t=e;try{t=w8r(e)}catch(r){t=E8r(e)}return t};var S8r=e=>{var n,o;if(!Array.isArray(e))return{timeStart:"",timeEnd:""};let t=(n=Ol(e[0]))!=null?n:"",r=(o=Ol(e[1]))!=null?o:"";return{timeStart:t,timeEnd:r}},T8r=(e,t)=>{if(e===""||t==="")return[];let r=Oc(e).valueOf(),n=Oc(t).valueOf();return Number.isNaN(r)||Number.isNaN(n)?[]:[r,n]},I8r=e=>{var o,i;let t=(o=e==null?void 0:e.geometry)==null?void 0:o.type,r=THe[t],n=[];for(let a in r){let c=(i=e.properties[a])!=null?i:r[a],h=rB(a,c);n.push({name:a,value:h})}return n},M8r=e=>{var r;let t={};for(let n of PS){let o=(r=e.properties[n])!=null?r:"";t[n]=o}return t},C8r=e=>{let t=u2(e),r=[];for(let n in t){let o=t[n];if(!PS.includes(n)&&typeof o!="object"){if(typeof o=="boolean"){r.push({name:n,value:`${o}`});continue}r.push({name:n,value:o})}}return r},Udt=e=>{let h=M8r(e),{time:r}=h,n=En(h,["time"]),{timeStart:o,timeEnd:i}=S8r(r),a=C8r(e),c=I8r(e);return Dt(Te({timeStart:o,timeEnd:i},n),{customProps:a,styleProps:c})},Bdt=e=>{let{img_link:t,title:r,description:n,timeStart:o,timeEnd:i,customProps:a,styleProps:c}=e,h=T8r(o,i),m=Object.fromEntries(a.filter(w=>w.name!==""||w.value!=="").map(w=>[w.name,w.value])),y=Object.fromEntries(c.map(w=>{let E=rB(w.name,w.value);return[w.name,E]}));return Te(Te(Dt(Te({},h.length>0&&{time:h}),{title:r,description:n,img_link:t}),m),y)},rB=(e,t)=>{let{type:r,min:n,max:o}=XO[e],i=t;if(r==="number")i=Number.isNaN(Number.parseFloat(i))?1:parseFloat(i),i=Me(n)?Math.max(n,i):i,i=Me(o)?Math.min(o,i):i;else if(r==="color")try{i=Fdt(i)}catch(a){i=cn[Ir.SYMBOL].COLOR}return i},A8r=e=>`${e}`.trim().length!==0,O8r=e=>!Number.isNaN(Number.parseFloat(e)),Vdt=(e,t,r)=>{let n=t.customProps[r].value,o=e,i=t.customProps.filter((c,h)=>h!==r).filter(c=>c.name!=="").map(c=>c.name.toLowerCase()),a=[...PS,...i];return!(o.trim().length===0&&`${n}`.trim().length>0||a.includes(o.toLowerCase().trim()))},Gdt=(e,t,r,n)=>!(t.customProps[r].name.trim().length>0&&(n&&!O8r(e)||!n&&!A8r(e)));u();u();var ac=ee(ke(),1);var nfe=ee(It(),1);var Hdt=(0,ac.forwardRef)(function(t,r){let[n,o]=(0,ac.useState)(t.defaultValue),i=(0,ac.useCallback)(a=>{o(a.target.value),t.onBlur(a)},[t.onBlur]);return ac.default.createElement(ac.default.Fragment,null,ac.default.createElement("div",{className:"vkf-form-control non-style-property-item"},ac.default.createElement("label",{className:"vkf-form-label with-border"},fe("geojson-featureview-image-title")),ac.default.createElement(Mm,{imageUrl:n,showPlaceholder:!0,imageAsPreview:!0})),ac.default.createElement("div",{className:"vkf-form-control non-style-property-item"},ac.default.createElement("label",{className:"vkf-form-label with-border"},"img_link"),ac.default.createElement("input",Dt(Te({className:"vkf-form-input"},t),{onBlur:i,placeholder:fe("geojson-editfeature-input-placeholder"),ref:r}))))});Hdt.propTypes={defaultValue:nfe.default.string.isRequired,onBlur:nfe.default.func.isRequired};var $dt=Hdt;var Wdt=$dt;u();u();var kN=ee(ke(),1);var Ydt=ee(It(),1);var Zdt=({onClick:e})=>kN.default.createElement("div",{className:"add-field-button-root"},kN.default.createElement(mn,{className:"add-field-button",buttonType:"button",onClick:e},kN.default.createElement(Hr,{name:"add"}),kN.default.createElement("p",{className:"add-field-button-text"},fe("geojson-editfeature-add-new-field-button"))));Zdt.propTypes={onClick:Ydt.default.func.isRequired};var Kdt=Zdt;var Xdt=Kdt;u();u();var nB=ee(ke(),1);var Jdt=ee(It(),1);var Qdt=({onClick:e})=>nB.default.createElement(mn,{className:"remove-field-button",type:"discard",onClick:e},nB.default.createElement("p",null,fe("geojson-featureview-delete-field-btn")),nB.default.createElement(Hr,{name:"delete"}));Qdt.propTypes={onClick:Jdt.default.func.isRequired};var eht=Qdt;var tht=eht;var rht=({feature:e,onSavePreview:t,onFormSubmit:r})=>{let n=(0,Bo.useMemo)(()=>Udt(e),[e.id]),{img_link:o,title:i,description:a}=n,c=u1({defaultValues:n}),{register:h,handleSubmit:m,formState:{errors:y},control:w}=c,E=(0,Bo.useCallback)(G=>{G=Bdt(G),r(G)},[r]),{fields:A}=zpe({name:"styleProps",control:w}),{fields:P,append:j,remove:D}=zpe({name:"customProps",control:w}),L=(0,Bo.useCallback)(G=>{D(G)},[D]),z=(0,Bo.useCallback)(()=>{j([{name:"",value:""}])},[j]),B=(0,Bo.useCallback)(G=>{let{key:Z,target:K}=G;Z!=="Enter"||K instanceof HTMLTextAreaElement||G.preventDefault()},[]);return Bo.default.createElement(A2,Te({},c),Bo.default.createElement("form",{id:ofe,onSubmit:m(E),noValidate:!0,onKeyDown:B},Bo.default.createElement("div",{className:"feature-properties-form-root"},Bo.default.createElement("div",{className:"style-property-header"},Bo.default.createElement("p",{className:"header-text"},fe("geojson-editfeature-style-header"))),Bo.default.createElement("div",{className:"style-fields"},A.map((G,Z)=>{let K=G.name,te=XO[K],pe=h(`styleProps.${Z}.value`),{onChange:se}=pe,le=En(pe,["onChange"]);return Bo.default.createElement(zdt,Te(Dt(Te({},le),{onChange:me=>{let _e=rB(K,me.target.value);t(K,_e),se(me)},key:G.id,id:G.id,title:K}),te))})),Bo.default.createElement("div",{className:"non-style-fields"},Bo.default.createElement(Wdt,Dt(Te({},h("img_link")),{defaultValue:o})),Bo.default.createElement("div",{className:"vkf-form-control non-style-property-item"},Bo.default.createElement("label",{className:"vkf-form-label with-border",htmlFor:"vkf-props-title"},"title"),Bo.default.createElement("input",Dt(Te({id:"vkf-props-title",className:"vkf-form-input"},h("title")),{defaultValue:i,placeholder:fe("geojson-editfeature-input-placeholder")}))),Bo.default.createElement("div",{className:"vkf-form-control non-style-property-item"},Bo.default.createElement("label",{className:"vkf-form-label with-border",htmlFor:"vkf-props-description"},"description"),Bo.default.createElement("input",Dt(Te({id:"vkf-props-description",className:"vkf-form-input"},h("description")),{defaultValue:a,placeholder:fe("geojson-editfeature-input-placeholder")}))),Bo.default.createElement("div",{className:"time-period-field-wrapper"},Bo.default.createElement("label",{className:"vkf-form-label with-border"},"time"),Bo.default.createElement(P2,{startFieldName:"timeStart",endFieldName:"timeEnd",showLabels:!1,required:!1})),P.map((G,Z)=>{var le,pe,me,_e;let K=typeof G.value=="number",te=h(`customProps.${Z}.name`,{validate:(de,Ce)=>Vdt(de,Ce,Z)}),se=h(`customProps.${Z}.value`,{validate:(de,Ce)=>Gdt(de,Ce,Z,K),valueAsNumber:K});return Bo.default.createElement("div",{key:G.id,className:"custom-field-wrapper"},Bo.default.createElement("div",{className:qt("vkf-form-control ",((pe=(le=y==null?void 0:y.customProps)==null?void 0:le[Z])==null?void 0:pe.name)&&"error")},Bo.default.createElement("input",Dt(Te({},te),{className:"vkf-form-input as-label",placeholder:fe("geojson-editfeature-label-placeholder")}))),Bo.default.createElement("div",{className:qt("vkf-form-control ",((_e=(me=y==null?void 0:y.customProps)==null?void 0:me[Z])==null?void 0:_e.value)&&"error")},Bo.default.createElement("input",Dt(Te({},se),{type:K?"number":void 0,className:"vkf-form-input",placeholder:fe("geojson-editfeature-input-placeholder")})),Bo.default.createElement(tht,{onClick:()=>L(Z)})))}),Bo.default.createElement(Xdt,{onClick:z})))))};rht.propTypes={feature:xv.default.shape({properties:xv.default.object,geometry:xv.default.object,id:xv.default.oneOfType([xv.default.string,xv.default.number])}).isRequired,onSavePreview:xv.default.func.isRequired,onFormSubmit:xv.default.func.isRequired};var nht=rht;var oht=nht;var ofe="feature-properties-form",ife=e=>{let{feature:t,onDelete:r,onClose:n,onSave:o,onSavePreview:i}=e,[a,c]=(0,za.useState)(!1),h=(0,za.useCallback)(()=>{n({doRemoveFeatureState:!0})},[n]),m=(0,za.useCallback)(()=>{c(A=>!A)},[]),y=(0,za.useCallback)(()=>{c(!1)},[c]),w=(0,za.useCallback)(()=>{r(t),m()},[r,t,m]),E=(0,za.useCallback)(A=>{let P=dct({oldProperties:t.properties,newProperties:A});o(P)},[]);return za.default.createElement("div",{className:"geojson-feature-edit-panel-root vkf-geojson-feature-view-content full-height"},za.default.createElement(Cf,{title:fe("geojson-editview-header-text"),onCloseClick:n}),za.default.createElement("div",{className:"geojson-feature-edit-panel-content"},za.default.createElement("div",{className:"introduction-text"},fe("geojson-editview-intro-text")),za.default.createElement(oht,{feature:t,onFormSubmit:E,onSavePreview:i}),za.default.createElement("div",{className:"danger-zone-container"},za.default.createElement(jdt,{description:fe("geojson-editfeature-danger-zone-title"),onDeleteClick:m,buttonLabel:fe("geojson-featureview-delete-btn")}))),za.default.createElement("div",{className:"footer-container"},za.default.createElement(mn,{form:ofe,className:"save-button",type:"save"},za.default.createElement(Hr,{name:"save"}),fe("geojson-apply-btn")),za.default.createElement(mn,{className:"discard-button",onClick:h,type:"discard"},za.default.createElement(Hr,{name:"discard"}),fe("geojson-cancel-btn"))),za.default.createElement(N2,{show:a,onClose:y,onDelete:w,description:fe("geojson-deletemodal-body")}))};ife.defaultPropTypes={onSavePreview:()=>{}};ife.propTypes={feature:uh.default.shape({id:uh.default.oneOfType([uh.default.number,uh.default.string]).isRequired,geometry:uh.default.object.isRequired,properties:uh.default.object.isRequired}).isRequired,onClose:uh.default.func.isRequired,onDelete:uh.default.func.isRequired,onSave:uh.default.func.isRequired,onSavePreview:uh.default.func};var iht=ife;u();var wv=ee(ke(),1),k2=ee(It(),1);var afe=({geoJsonFeature:e,saveFeature:t,saveFeaturePreview:r,deleteFeature:n,resetFeature:o})=>{let i=(0,wv.useCallback)(m=>{o(m)},[o]),a=(0,wv.useCallback)(m=>{t(m,()=>{i({skipResetPreview:!0})},()=>{console.error("The feature could not be saved"),i()})},[t,i]),c=(0,wv.useCallback)((m,y)=>{r(m,y)},[r]),h=(0,wv.useCallback)(()=>{n(()=>i())},[n,i]);return wv.default.createElement(wv.default.Fragment,null,wv.default.createElement(aht,{key:e.id,feature:e,onDelete:h,onClose:i,onSave:a,onSavePreview:c}))};afe.defaultPropTypes={saveFeaturePreview:()=>{}};afe.propTypes={geoJsonFeature:k2.default.object.isRequired,resetFeature:k2.default.func.isRequired,saveFeature:k2.default.func.isRequired,deleteFeature:k2.default.func.isRequired,saveFeaturePreview:k2.default.func};var sfe=afe;var aht=iht;u();var zs=ee(ke(),1);u();var lfe=ee(ke(),1);u();var lx=ee(It(),1),ch=ee(ke(),1);u();var sht=()=>pr(({snapshot:e,set:t})=>r=>yt(null,null,function*(){let n=yield e.getPromise(Wo),o=yield e.getPromise(rl),i=yield Ttt(n.id,r);if(o){o.deleteAll().add(i.geojson);let a=new Map;i.geojson.features.forEach(c=>{a.set(c.id,!1)}),t(nl,i.geojson),t(ih,{dirtyMap:a,deleteIds:[],addIds:[]}),t(zg,r===n.version?null:r)}}),[]);var lht=({isSelected:e,version:t,isMostRecent:r})=>{let n=sht(),o=(0,ch.useCallback)(()=>{n(t.version)},[n,t]);return ch.default.createElement("li",{className:qt("version-history-entry",r?"current-version":"older-version",e?"selected":""),key:t.version},ch.default.createElement("div",{className:"version-history-entry-content"},ch.default.createElement(ch.default.Fragment,null,ch.default.createElement("span",{className:"time"},hit(new Date(t.submitted))),ch.default.createElement("span",{className:"author"},t.created_by),!r||r&&!e?ch.default.createElement(mn,{className:"version-history-reset-button",onClick:o},ch.default.createElement(Hr,{name:"clock"})):null)))};lht.propTypes={isSelected:lx.default.bool,isMostRecent:lx.default.bool,version:lx.default.shape({version:lx.default.number,submitted:lx.default.string,created_by:lx.default.string}).isRequired};var uht=lht;u();var cht=dn({key:"vectorMapVersionsQueryIdState",default:0}),P8r=Js({key:"vectorMapVersionsQuery",get:t=>yt(null,[t],function*({get:e}){e(cht);let r=e(Wo);return!Me(r)||r.type==="local"||r.id===null?null:yield Stt(r.id)})}),pht=()=>pr(({set:t})=>()=>{t(cht,r=>r+1)},[]),D8r=()=>bt(P8r),fht=D8r;var N8r=()=>{let e=bt(zg),t=fht();return t?lfe.default.createElement("ul",{className:"version-history"},t.map((r,n)=>lfe.default.createElement(uht,{isMostRecent:n===0,isSelected:e===null?n===0:e===r.version,key:r.version,version:r}))):null},dht=N8r;var hht=()=>{let e=Lr(bs),t=bt(Wo),r=pht(),n=(0,zs.useMemo)(()=>!Me(t.id),[t.id]),o=(0,zs.useMemo)(()=>n?fe("geojson-metadata-panel-intro-history-unsaved"):fe("geojson-metadata-panel-intro-history"),[n]),i=(0,zs.useMemo)(()=>fe("geojson-metadata-panel-header-history"),[]),a=(0,zs.useCallback)(()=>{e(Ti.NONE)},[]);return zs.default.createElement("div",{className:"geojson-history-panel-root"},zs.default.createElement(Cf,{title:i,onCloseClick:a}),zs.default.createElement("div",{className:"geojson-history-panel-content"},zs.default.createElement("div",{className:"introduction-text"},o),zs.default.createElement("div",{className:"history-list-container"},zs.default.createElement(E2,{fallbackRender:({resetErrorBoundary:c})=>zs.default.createElement($U,{className:"error-fallback",resetErrorBoundary:c}),onReset:r},zs.default.createElement(zs.Suspense,{fallback:zs.default.createElement("div",{className:"suspense-fallback"},"Loading...")},zs.default.createElement(dht,null))))))};hht.propTypes={};var mht=hht;var ufe=()=>{let e=bt(bs),t=rx(),r=(0,Kf.useMemo)(()=>Me(t.geoJsonFeature)?t:null,[t.geoJsonFeature]);return Kf.default.createElement(Kf.default.Fragment,null,Kf.default.createElement("div",{className:"vkf-horizontal-layout-draw"},Kf.default.createElement("div",{className:"geojson-control-bar-container"},Kf.default.createElement(Gpe,null)),Kf.default.createElement(r1,{className:"geojson-metadata-panel-container",Component:e===Ti.HISTORY?mht:Kpe,props:e===Ti.METADATA||e===Ti.HISTORY?{}:null}),Kf.default.createElement(r1,{className:"geojson-feature-edit-panel-container",Component:sfe,props:e===Ti.FEATURE?r:null})),Kf.default.createElement(jpt,null),Kf.default.createElement(Gft,null))};ufe.propTypes={};u();u();var d1=ee(ke(),1);var ght=()=>{let e=bt(Ef);return d1.default.createElement(d1.default.Fragment,null,d1.default.createElement("div",{className:"vkf-horizontal-layout-vector-map-external"},d1.default.createElement("div",{className:"geojson-control-bar-container"},d1.default.createElement(Wpe,null)),d1.default.createElement(r1,{className:"geojson-metadata-panel-container",Component:efe,props:e===Cc.METADATA?{}:null})),d1.default.createElement(Adt,null))};ght.propTypes={};var vht=ght;var yht=vht;u();var Wl=ee(ke(),1);u();var Fa=ee(ke(),1),aB=ee(It(),1);u();var cfe=ee(ke(),1),pfe=ee(It(),1);var _ht=({onClick:e})=>cfe.default.createElement("button",{className:"vkf-toggle-search-button",onClick:e,title:"toggle search"},cfe.default.createElement(kf,{name:"icon-search"}));_ht.propTypes={isOpen:pfe.default.bool,onClick:pfe.default.func};var bht=_ht;u();var oB=ee(ke(),1),iB=ee(It(),1);var ffe=({disabled:e,onClick:t,isOpen:r})=>oB.default.createElement("button",{className:qt("vkf-toggle-search-result-list",r?"open":"closed",e&&"disabled"),disabled:e,onClick:t},oB.default.createElement("div",{className:"background"}),oB.default.createElement("div",{className:"chevron"}));ffe.propTypes={disabled:iB.default.bool,isOpen:iB.default.bool,onClick:iB.default.func};var xht=({enableReopenResultList:e=!0,onToggleFacets:t,showFacets:r})=>{let n=bt(zS),[o,i]=(0,Fa.useState)(!1),[a,c]=(0,Fa.useState)(!1),[h,m]=(0,Fa.useState)(!1),y=()=>{i(A=>!A)},w=()=>{c(A=>!A)};(0,Fa.useEffect)(()=>{n===0&&o?(i(!1),m(!0)):e&&n>0&&h&&(i(!0),m(!1))},[n]);let E=o?"show-search-result-list":"hide-search-result-list";return Fa.default.createElement(Fa.Fragment,null,Fa.default.createElement("div",{className:"vkf-search-header"},Fa.default.createElement("div",{className:"top-container"},Fa.default.createElement("div",{className:"result-summary"},n===0?fe("mapsearch-found-no-maps"):`${n} ${fe("mapsearch-found-maps")}`),Fa.default.createElement("div",{className:"controls-container"},Fa.default.createElement(LF,{onClick:t,isOpen:r}),Fa.default.createElement(bht,{onClick:w,isOpen:a}))),a&&Fa.default.createElement("div",{className:"bottom-container"},Fa.default.createElement(_9,{searchUrl:mr.getNominatimUrl()}),Fa.default.createElement(l9,null))),Fa.default.createElement(ffe,{disabled:n===0,onClick:y,isOpen:o}),Fa.default.createElement("div",{className:qt("vkf-search-result-container",E)},Fa.default.createElement(DF,{enableOverlayLayer:!1,DataProvider:BF,direction:"horizontal",itemSize:170,renderHeader:!1})))};xht.propTypes={enableReopenResultList:aB.default.bool,onToggleFacets:aB.default.func,showFacets:aB.default.bool};var wht=xht;u();var sB=ee(ke(),1);var dfe=ee(It(),1);var Eht=({buttonState:e,onClick:t})=>{let r=bt(qn),n=r.length===0;return sB.default.createElement("button",{className:qt("vkf-toggle-layermanagement-button",!n&&e&&"opened",n&&"disabled"),disabled:n,onClick:t},!n&&sB.default.createElement("span",{className:"badge"},r.length),sB.default.createElement(kf,{name:"layers"}))};Eht.propTypes={buttonState:dfe.default.bool,onClick:dfe.default.func};var Sht=Eht;u();var Tht=a9;u();var Iht=ee(ke(),1),Mht=ee(It(),1),Cht=({onCloseLayerManagement:e})=>{let t=bt(qn);return(0,Iht.useEffect)(()=>{t.length===0&&e()},[t]),null};Cht.propTypes={onCloseLayerManagement:Mht.default.func.isRequired};var Aht=Cht;var L8r=()=>{let[e,t]=(0,Wl.useState)(!1),[r,n]=(0,Wl.useState)(!1),o=(0,Wl.useCallback)(()=>{n(!1)},[]),i=(0,Wl.useCallback)(()=>{n(c=>!c)},[]),a=()=>{t(c=>!c)};return Wl.default.createElement(Wl.default.Fragment,null,Wl.default.createElement(Aht,{onCloseLayerManagement:o}),Wl.default.createElement("div",{className:"vkf-vertical-layout"},Wl.default.createElement(wht,{onToggleFacets:a,showFacets:e}),Wl.default.createElement(Sht,{buttonState:r,onClick:i}),Wl.default.createElement("div",{className:qt("layermanagement-container",!r&&"closed")},Wl.default.createElement(Tht,{showControls:{showBadge:!1,showDynamicMapVisualization:!1,showHideButton:!0}}))),Wl.default.createElement(jf,{modalClassName:"faceted-search-modal",onClose:a,renderContent:()=>Wl.default.createElement(wF,{georeferenceMode:!1}),isOpen:e,title:"Filter"}))},hfe=L8r;u();var Xf=ee(ke(),1),ph=ee(It(),1);u();u();var RN=ee(ke(),1),Oht=ee(xa(),1);u();var qm=ee(ke(),1);var k8r=(e,t)=>{let r=bt(rr),[n,o]=(0,qm.useState)(null),[i,a]=Io(iWe),c=(0,qm.useRef)(null),h=(0,qm.useCallback)(y=>{c.current&&!c.current.contains(y.target)&&a(Ic.None)},[]),m=(0,qm.useCallback)(()=>{a(y=>y===t?Ic.None:t)},[t]);return(0,qm.useEffect)(()=>{if(Me(r)){let y=E=>{var A;((A=E.control)==null?void 0:A.id)===e&&o(E.control._container)},w=E=>{var A;((A=E.control)==null?void 0:A.id)===e&&o(null)};return r.on(ys.controlAdded,y),r.on(ys.controlRemoved,w),()=>{r.off(ys.controlAdded,y),r.off(ys.controlRemoved,w)}}},[r]),(0,qm.useEffect)(()=>(i===t?document.addEventListener("mousedown",h):document.removeEventListener("mousedown",h),()=>{document.removeEventListener("mousedown",h)}),[i,t,h]),{baseMapControlEl:n,activeDialog:i,toggleDialog:m,dialogRef:c}},lB=k8r;var R8r=()=>{let{baseMapControlEl:e,activeDialog:t,toggleDialog:r,dialogRef:n}=lB(Jne,Ic.BasemapSelector);return e!==null?(0,Oht.createPortal)(RN.default.createElement("div",{ref:n},RN.default.createElement("button",{onClick:r,title:fe("control-basemapselector-open"),className:qt("maplibregl-ctrl-basemap-selector",t===Ic.BasemapSelector&&"active")}),t===Ic.BasemapSelector&&RN.default.createElement("div",{className:qt("basemap-selector-modal",t===Ic.BasemapSelector&&"active")},RN.default.createElement(YQe,null))),e):null},Pht=R8r;var Dht=Pht;u();u();var mfe=class extends xj{addControl(t,r){let n=super.addControl(t,r);return this.fire(ys.controlAdded,{control:t}),n}removeControl(t){let r=super.removeControl(t);return this.fire(ys.controlRemoved,{control:t}),r}setPaintProperty(t,r,n,o){var h;let i=super.setPaintProperty(t,r,n,o),a=this.getLayer(t),c=(h=a==null?void 0:a.metadata)==null?void 0:h[bp.id];return wGe.has(r)&&c&&this.fire(ys.opacityChanged,{layerId:c,property:r,value:n}),i}setLayoutProperty(t,r,n,o){var h;let i=super.setLayoutProperty(t,r,n,o),a=this.getLayer(t),c=(h=a==null?void 0:a.metadata)==null?void 0:h[bp.id];return EGe.has(r)&&c&&this.fire(ys.visibilityChanged,{layerId:c,property:r,value:n}),i}fireVisibilityChanged(t,r){this.fire(ys.visibilityChanged,{layerId:t,property:"visibility",value:r})}},Nht=mfe;var Lht=Nht;u();var jN=ee(ke(),1),zht=ee(xa(),1);u();var zm=ee(ke(),1);u();var Yl=ee(ke(),1);var kht=ee(oz(),1);var j8r=()=>{let e=bt(rr),t=bt(qn),r=bt(xf),[n,o]=(0,Yl.useState)(""),i=(0,Yl.useRef)(),a=(0,Yl.useCallback)(()=>{if(!Me(e))return;let c=aU(US(e,!0)),h=uU(e.isVkfGlobeModeEnabled()),m=lU(t),y=sU(r),w=(0,kht.stringify)(Object.assign({},c,h,m,y),{arrayFormat:"comma"});o(BS(w))},[e]);return(0,Yl.useEffect)(()=>{if(e)return a(),e.on("moveend",a),()=>{e.off("moveend",a)}},[e,a]),Yl.default.createElement(Yl.default.Fragment,null,Yl.default.createElement("div",{className:"action-content"},Yl.default.createElement("label",{htmlFor:"permalink-value",className:"visually-hidden"},"Permalink"),Yl.default.createElement("input",{readOnly:!0,ref:i,value:n,id:"permalink-value"}),Yl.default.createElement(c2,{value:n})),Yl.default.createElement("div",{className:"description"},Yl.default.createElement("p",null,fe("control-permalink-exporter-permalink-description"))))},Rht=j8r;u();var Zl=ee(ke(),1);var jht=()=>{let[e]=jd(mb,[]),[t,r]=(0,Zl.useState)(!1),[n,o]=(0,Zl.useState)(""),i=bt(Yq),a=mr.getGeoreferenceApiClient(),c="/map_view/",h=(0,Zl.useCallback)(()=>{if(i!==void 0){let m=i(),{searchOptions:y}=m,w=En(m,["searchOptions"]),E=e.filter(P=>P.id===w.activeBasemapId),A=Object.assign({},w,E.length>0?{customBasemaps:E}:null);return r(!0),a.post(c,{map_view_json:A}).then(P=>{if(P.status===200&&P.data!==void 0){let{map_view_id:j}=P.data,D=BS(`map_view_id=${j}`);return o(D),r(!1),D}})}},[e,i]);return Zl.default.createElement(Zl.default.Fragment,null,Zl.default.createElement("div",{className:"action-content"},Zl.default.createElement("label",{htmlFor:"permalink-mapview",className:"visually-hidden"},"Permalink"),Zl.default.createElement("input",{placeholder:fe("control-permalink-input-mapview-placeholder"),readOnly:!0,value:n,id:"permalink-mapview"}),Zl.default.createElement(c2,{onClick:h,value:n}),Zl.default.createElement("button",{className:qt("upload-button",t&&"loading"),onClick:h},t?Zl.default.createElement(kF,null):Zl.default.createElement(Bg,{glyph:"upload"}),"Upload")),Zl.default.createElement("div",{className:"description"},Zl.default.createElement("p",null,fe("control-permalink-exporter-mapview-description"))))};var q8r=()=>{let e=!mr.isUserAuthenticated();return zm.default.createElement("div",{className:"vkf-permalink-exporter"},zm.default.createElement(qae,{defaultActiveKey:1,id:"permalink-exporter-tabs"},zm.default.createElement(nF,{eventKey:1,title:fe("control-permalink-title-permalink")},zm.default.createElement("div",{className:"permalink-exporter-content"},zm.default.createElement(Rht,null))),zm.default.createElement(nF,{disabled:e,eventKey:2,title:fe("control-permalink-title-map-view")},zm.default.createElement("div",{className:"permalink-exporter-content"},!e&&zm.default.createElement(jht,null)))))},qht=zm.default.memo(q8r);var z8r=()=>{let{baseMapControlEl:e,activeDialog:t,toggleDialog:r,dialogRef:n}=lB(toe,Ic.Permalink);return e!==null?(0,zht.createPortal)(jN.default.createElement("div",{ref:n},jN.default.createElement("button",{className:qt("maplibregl-ctrl-permalink",t===Ic.Permalink&&"active"),onClick:r,title:fe("control-permalink-open")}),t===Ic.Permalink&&jN.default.createElement("div",{className:"content-container"},jN.default.createElement(qht,null))),e):null},Fht=z8r;u();var uB=ee(ke(),1);var F8r=()=>{let e=bt(rr),t=bt(xf),r=bt(Jq),[n]=jd(mb,[]),o=mr.getBaseMaps(),i=(0,uB.useMemo)(()=>[...o,...n],[n,o]);return(0,uB.useEffect)(()=>{if(Me(e)){let a=i.find(h=>h.id===t);if(a===void 0)return;let c=a;if(GP(e),GQe(e),c.type==="vector")UQe(e,r);else if(c.type==="wms")zQe(e,c,r);else if(c.type==="xyz")VQe(e,c,r);else throw new Error("Unknown layer type")}},[t,e,r]),null},Uht=F8r;u();function Bht(){return{"NavigationControl.ZoomIn":fe("control-zoom-in"),"NavigationControl.ZoomOut":fe("control-zoom-out"),"FullscreenControl.Enter":fe("control-fullscreen-Enter"),"FullscreenControl.Exit":fe("control-fullscreen-Exit"),"NavigationControl.ResetBearing":fe("control-rotate"),"VkfGlobeModeControl.Enable":fe("control-toggleviewmode-title"),"VkfGlobeModeControl.Disable":fe("control-toggleviewmode-title"),"GeolocateControl.FindMyLocation":fe("control-locateme-title"),"GeolocateControl.LocationNotAvailable":fe("control-locateme-location-not-available")}}var U8r="https://tile-2.kartenforum.slub-dresden.de/styles/maptiler-basic-v2/style.json",Vht=e=>{let{target:t}=e,r=document.getElementsByClassName("map-container")[0];if(!Me(r))return;let n=B$e(t.getZoom());r.style.setProperty("--vkf-idohist-scale-factor",n)},Ght=e=>{let{target:t}=e,r=document.getElementsByClassName("map-container")[0];if(!Me(r))return;let n=t.isVkfGlobeModeEnabled()?"#262626":"#ffffff";r.style.setProperty("--vkf-map-background-color",n)};function Hht(e){let{ChildComponent:t,layout:r,mapViewSettings:n={center:[13.5981217,59.562795],projection:"EPSG:3857",zoom:2},loadMarkerIcon:o=!0}=e,[i,a]=Io(rr),c=Lr(Jq),h=(0,Xf.useRef)();return fWe(h,"map"),(0,Xf.useEffect)(()=>{let m=new Lht({container:h.current,center:n.center,zoom:n.zoom,maxZoom:n.maxZoom,style:U8r,locale:Bht(),attributionControl:!1}),y=()=>{if(a(m),c(m.getStyle().layers),o===!0){let{id:w,url:E}=mr.getMarkerSettings();m.loadImage(E).then(A=>{m.addImage(w,A.data,{sdf:!0})})}};return m.on("style.load",y),m.on("zoom",Vht),m.on(a0,Ght),()=>{m.off("style.load",y),m.off("zoom",Vht),m.off(a0,Ght),a(void 0),m.remove()}},[]),(0,Xf.useEffect)(()=>{if(Me(i)){let m=IGe();return m.forEach(({control:y,position:w})=>{i.addControl(y,w)}),()=>{m.forEach(({control:y})=>{i.removeControl(y)})}}},[i]),Xf.default.createElement("div",{className:"map-container"},Xf.default.createElement("div",{ref:h,className:qt("map-div","olMap",CGe(r)),tabIndex:0},Me(i)&&Xf.default.createElement(t,null),Xf.default.createElement(Dht,null),Xf.default.createElement(Fht,null),Xf.default.createElement(Uht,null)))}var B8r={baseMapUrl:ph.default.arrayOf(ph.default.string),ChildComponent:ph.default.func,layout:ph.default.string,mapViewSettings:ph.default.shape({center:ph.default.arrayOf(ph.default.number),projection:ph.default.string,zoom:ph.default.number}),loadMarkerIcon:ph.default.bool};Hht.propTypes=B8r;var $ht=Hht;var V8r=e=>{switch(e){case Qs.STANDARD:return ope;case Qs.DRAW:return ufe;case Qs.VECTOR_MAP_EXTERNAL:return yht;default:ope}},G8r=(e,t)=>{switch(e){case Mc.HORIZONTAL:return V8r(t);case Mc.VERTICAL:return hfe;default:return hfe}},Yht=e=>{let{layout:t}=e,r=Lr(qS),n=bt(Pc),o=G8r(t,n);return(0,qN.useEffect)(()=>{r(t)},[t]),qN.default.createElement($ht,{baseMapUrl:mr.getDefaultBaseMapUrls(),enable3d:!0,enableTerrain:!0,layout:t,mapViewSettings:mr.getDefaultMapView(),ChildComponent:o})};Yht.propTypes={layout:Wht.default.oneOf(Object.values(Mc))};var Zht=qN.default.memo(Yht);var H8r=ene.backends.map(e=>e.id==="touch"?Dt(Te({},e),{options:Dt(Te({},e.options),{scrollAngleRanges:[{start:30,end:150},{start:210,end:330}]})}):e),Xht=()=>{let e=l9e(),t=MGe(e),r=(0,Fm.useMemo)(()=>Object.assign({},ene,{backends:H8r}),[]);return Fm.default.createElement(dne,{options:r},Fm.default.createElement(i9e,null,Fm.default.createElement(NHe,null),Fm.default.createElement("div",{className:"vkf-plugin-map"},Fm.default.createElement(gWe,null),Fm.default.createElement(Zht,{layout:t}),Fm.default.createElement(wrt,null))))};Xht.propTypes={id:Kht.default.string.isRequired};var Jht=Xht;var $8r=mr;function W8r(e){emt.default.render(Qht.default.createElement(Jht,{id:e.id}),e)}return rvt(Y8r)})();/*! Bundled license information:

object-assign/index.js:
  (*
  object-assign
  (c) Sindre Sorhus
  @license MIT
  *)

react/cjs/react.production.min.js:
  (** @license React v17.0.2
   * react.production.min.js
   *
   * Copyright (c) Facebook, Inc. and its affiliates.
   *
   * This source code is licensed under the MIT license found in the
   * LICENSE file in the root directory of this source tree.
   *)

scheduler/cjs/scheduler.production.min.js:
  (** @license React v0.20.2
   * scheduler.production.min.js
   *
   * Copyright (c) Facebook, Inc. and its affiliates.
   *
   * This source code is licensed under the MIT license found in the
   * LICENSE file in the root directory of this source tree.
   *)

react-dom/cjs/react-dom.production.min.js:
  (** @license React v17.0.2
   * react-dom.production.min.js
   *
   * Copyright (c) Facebook, Inc. and its affiliates.
   *
   * This source code is licensed under the MIT license found in the
   * LICENSE file in the root directory of this source tree.
   *)

react/cjs/react-jsx-runtime.production.min.js:
  (** @license React v17.0.2
   * react-jsx-runtime.production.min.js
   *
   * Copyright (c) Facebook, Inc. and its affiliates.
   *
   * This source code is licensed under the MIT license found in the
   * LICENSE file in the root directory of this source tree.
   *)

maplibre-gl/dist/maplibre-gl.js:
  (**
   * MapLibre GL JS
   * @license 3-Clause BSD. Full text of license: https://github.com/maplibre/maplibre-gl-js/blob/v5.7.1/LICENSE.txt
   *)

classnames/index.js:
  (*!
  	Copyright (c) 2018 Jed Watson.
  	Licensed under the MIT License (MIT), see
  	http://jedwatson.github.io/classnames
  *)

react-is/cjs/react-is.production.min.js:
  (** @license React v16.13.1
   * react-is.production.min.js
   *
   * Copyright (c) Facebook, Inc. and its affiliates.
   *
   * This source code is licensed under the MIT license found in the
   * LICENSE file in the root directory of this source tree.
   *)

keycode/index.js:
  (*!
   * Programatically add the following
   *)

react-is/cjs/react-is.production.min.js:
  (**
   * @license React
   * react-is.production.min.js
   *
   * Copyright (c) Facebook, Inc. and its affiliates.
   *
   * This source code is licensed under the MIT license found in the
   * LICENSE file in the root directory of this source tree.
   *)

react-is/cjs/react-is.production.min.js:
  (** @license React v17.0.2
   * react-is.production.min.js
   *
   * Copyright (c) Facebook, Inc. and its affiliates.
   *
   * This source code is licensed under the MIT license found in the
   * LICENSE file in the root directory of this source tree.
   *)

wms-capabilities/dist/wms-capabilities.mjs:
  (**
   * wms-capabilities @0.6.0
   * @description WMS service Capabilities > JSON, based on openlayers 
   * @license BSD-2-Clause
   * @preserve
   *)

@babel/runtime/helpers/esm/regeneratorRuntime.js:
  (*! regenerator-runtime -- Copyright (c) 2014-present, Facebook, Inc. -- license (MIT): https://github.com/babel/babel/blob/main/packages/babel-helpers/LICENSE *)
*/